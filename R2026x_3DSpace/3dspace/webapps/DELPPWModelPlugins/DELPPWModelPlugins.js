define("DS/DELPPWModelPlugins/DatabasePlugin/DatabasePlugin",["UWA/Core","UWA/Promise","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWNavigationServices/NavigateUtil","DS/DELPPWModelServices/ModelUtils","DS/DELPPWModelServices/BehaviorUtil","DS/DELPPWNavigationServices/SwitchDBModeManager","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWWebServices/WebserviceUtils"],(function(e,t,n,i,o,r,u,a,s){"use strict";return function(c){var l,d,f,g,m,p,I,h=[],P=[],b={};return g=function(){return e.is(f)||(f=e.is(c.getPlugins("DicoPlugin"))?c.getPlugins("DicoPlugin").instance:null),f},p=function(){return e.is(m)||(m=e.is(c.getPlugins("AttributePlugin"))?c.getPlugins("AttributePlugin").instance:null),m},I=function(){var t=g(),n={boAttrName:[],otherAttrName:[],roAttrName:[]},o=s.getXMLValues("DisplayNameConfigXML"),r=e.is(o)?o.convert("DisplayNameAttributeList.Type","name"):{};if(b={},e.is(t)){for(let i in r)if(e.is(r[i])){let o=r[i].Attribute,u=t.isEntityReference(i),a=t.isEntityInstance(i);b[i]={},r[i].separator&&(b[i].separator=r[i].separator),r[i].Attribute=Array.isArray(o)?o:[o],b[i].Attribute=r[i].Attribute.map((t=>e.is(t.dicoType)?t.dicoType+"."+t.name:t.name)),b[i].Attribute.forEach((e=>{u&&-1===n.boAttrName.indexOf(e)&&n.boAttrName.push(e),a&&-1===n.roAttrName.indexOf(e)&&n.roAttrName.push(e)}))}i.setSelectPredicate(this.name,n)}else c.getLogger().debug("DatabasePlugin","dicoPlugin is not available so cannot compute Display Attributes")},l=function e(t,i){var o,r,u;if(i.id!==t.id){for(o=n.getParentInstancesFromCollection(i.id),u=0;u<o.length;u++)if(r=o[u],e(t,n.getAggregatingReferenceModelFromInstance(r)))return!0;return!1}return!0},d=function t(i,o){var r,u=[];return(u=n.getParentInstancesFromCollection(i)).length>0?u.forEach((function(e){var n,r;n=e.get("PID"),r=e.get("isAggregatedBy"),P.unshift(i),P.unshift(n),t(r,o),P=P.slice(2)})):(P.unshift(i),r=e.clone(P),o.push(r),P=P.slice(1)),o},{name:"DatabasePlugin",onStart:function(){var e=this;n.setReferenceCollectionEvents({onAdd:function(e,t,n){c.getMediator().notify("referenceAdded",[e,t,n])},onChange:function(e,t,n){c.getMediator().notify("referenceChanged",[e,t,n])},"onChange:sortIndex":function(e,t,n){c.getMediator().notify("changeSortIndex",[e,t,n])},onRemove:function(t,i,o){var r,u,a=e.getInstancesFromCollection(t.id),s=e.getParentInstancesFromCollection(t.id);for(r=0;r<s.length;r++)e.removeInstance(s[r]);for(r=0;r<a.length;r++)e.removeInstance(a[r]);u=n.getImpactedConnections(t.id),e.removeConnection(u,{silent:!0}),c.getMediator().notify("connectionRemoved",[u]),c.getMediator().notify("referenceRemoved",[t,i,o])}}),n.setConnectionsCollectionEvents({onAdd:function(e,t,n){c.getMediator().notify("connectionAdded",[e,t,n])},onChange:function(e,t,n){c.getMediator().notify("connectionChanged",[e,t,n])},onRemove:function(e,t,n){c.getMediator().notify("connectionRemoved",[e,t,n])}}),n.setInstanceCollectionEvents({onAdd:function(e,t,n){c.getMediator().notify("instanceAdded",[e,t,n])},onChange:function(e,t,n){c.getMediator().notify("instanceChanged",[e,t,n])},onRemove:function(t,i,o){var r;r=n.getImpactedConnections(null,t.id),e.removeConnection(r,{silent:!0}),c.getMediator().notify("connectionRemoved",[r]),c.getMediator().notify("instanceRemoved",[t,i,o])}}),h.push(c.addExternalListener("reset",e.resetAll)),I.call(this)},onStop:function(){var e,t;for(n.removeCollectionEvents(),e=0,t=h.length;e<t;e++)c.removeExternalListener(h[e]);h=[],b={}},findSomeConnection:function(e,t){return n.findSomeConnection(e,t)},findConnections:function(e){return n.findConnections(e)},findReferences:function(e){return n.findReferences(e)},findInstances:function(e){return n.findInstances(e)},getAllChildrenFromCollection:function(e){var t={referencesPID:[e],instancesPID:[]};return n.expandOnBackbone(e,t),t},getAllFilteredChildrenFromCollection:function(e,t){var i={referencesPID:[e],instancesPID:[]};return n.filteredExpandOnBackbone(e,t,i),i},getInstancesFromCollection:function(t,i){var o,r=i||{};return o=n.getInstancesFromCollection(t),e.is(r.sort)&&r.sort&&n.sortInstancesByTreeOrder(o),o},getParentInstancesFromCollection:function(e){return n.getParentInstancesFromCollection(e)},getReference:function(e){return n.getReferenceFromCollection(e)},getAllReferences:function(){return n.getAllReferences()},getReferencesFromArray:function(e){return n.getReferencesArrayFromCollection(e)},getReferenceModelFromInstance:function(e){return n.getReferenceModelFromInstance(e)},getAggregatingReferenceModelFromInstance:function(e){return n.getAggregatingReferenceModelFromInstance(e)},getReferenceModel:function(t){var n=null,i=this.getReference(t),o=null,u=null;return e.is(i)||(n=this.getInstance(t),e.is(n)?i=this.getReferenceModelFromInstance(n):c.getLogger().debug("Failed to get reference model. No instance or reference model found for PID: "+t)),r.isMdlAccessTestEnabled()&&(e.is(n)&&(c.getLogger().debug("Manipulated instance is: "),o=n.pick("PID","PLM_ExternalID","V_TreeOrder","isAggregatedBy","isInstanceOf"),c.getLogger().debug(JSON.stringify(o,null,4))),e.is(i)&&(c.getLogger().debug("Manipulated reference is: "),u=i.pick("PID","type","V_Name","V_description"),c.getLogger().debug(JSON.stringify(u,null,4)))),i},getReferenceIdFromInstance:function(t){var n,i=null;return n=this.getInstance(t),e.is(n)?i=n.get("isInstanceOf"):c.getLogger().debug("Failed to get reference Id. No instance model found for PID: "+t),i},getParentReferenceIdFromInstance:function(t){var n,i=null;return n=this.getInstance(t),e.is(n)?i=n.get("isAggregatedBy"):c.getLogger().debug("Failed to get reference Id. No instance model found for PID: "+t),i},isReference:function(e){return n.isReference(e)},isInstance:function(e){return n.isInstance(e)},getInstance:function(e){return n.getInstanceFromCollection(e)},getConnection:function(e){return n.getConnectionFromCollection(e)},createReference:function(e,t){return n.createRef(e,t)},addReference:function(e,t){return n.addRef(e,t)},fetchRefList:function(e,t){return n.fetchRefList(e,t)},fetchAttributes:function(e,t){n.fetch(e,t)},fetchReferences:function(e,t){n.fetchReferences(e,t)},fetchRoot:function(e,t){i.fetchRoot(e,t)},fetchMultiplePromise:function(e,t){return i.fetchMultiplePromise(e,t)},getProductScopedLinksFromIndex:function(e,t,n){i.getProductScopedLinksFromIndex(e,t,n)},navigateScopesFromIndex:function(e,t,n){i.navigateScopesFromIndex(e,t,n)},navigateScopesFromDB:function(e,t,n){n.onComplete=t,i.getProductScopedLinksFromDB(e,n)},navigateOnIndex:function(e,t,n){i.navigateOnIndex.navigateOnIndex(e,t,n)},getReferenceFromInstance:function(e,t,n){i.navigateOnIndex.getReferenceFromInstance(e,t,n)},updateReference:function(t,i){return i.isFacet=!!e.is(c.getConfig().isFacet)&&c.getConfig().isFacet,n.updateRef(t,i)},updateReferences:function(e,t){return n.updateRefs(e,t)},deleteReference:function(e,t){return n.deleteRef(e,t)},removeReference:function(e,t){n.removeRef(e,t)},createInstance:function(e,t){return n.createInst(e,t)},insertExistingRefs:function(e,t){return n.insertExistingRefs(e,t)},insertDuplicated:function(e,t){return n.insertDuplicated(e,t)},addInstance:function(e,t){return n.addInst(e,t)},fetchInstance:function(e,t){return n.fetchInst(e,t)},updateInstance:function(e,t){return n.updateInst(e,t)},updateInstances:function(e,t){return n.updateInsts(e,t)},deleteInstance:function(e,t){return n.deleteInst(e,t)},removeInstance:function(e,t){n.removeInstance(e,t)},removeConnection:function(e,t){n.removeConnection(e,t)},createConnection:function(e,t){return n.createConn(e,t)},addConnection:function(e,t){return n.addConn(e,t)},updateConnection:function(e,t){return n.updateConn(e,t)},deleteConnection:function(e,t){return n.deleteConn(e,t)},needToQueryForConnections:function(e){return n.needToQueryForConnections(null,e)},needToQueryForChildren:function(e){return n.needToQueryForChildren(e)},getDisplayName:function(t){var i,o,r=g(),u=p(),a="";const s="PLMEntity.V_Name",l="PLMInstance.PLM_ExternalID";e.is(r)||c.getLogger().debug(this.name,"dicoPlugin is not available to format DisplayName"),e.is(u)||c.getLogger().debug(this.name,"attributePlugin is not available to format DisplayName"),i=function(t,n){var i,o,a,s,c="NULL"!==n?n:"";return e.is(r)&&(i=r.getAttributeInfo(t),e.is(i)&&e.is(u)&&(o=u.isMultiValuated(i),a=u.hasMagnitude(i),s=u.isDate(i),a?c=u.getMagnitudeValue(c,i)+u.getNLSForUnit(i):o?(s&&Array.isArray(c)&&(c=c.map((function(e){return u.getFormattedDate(e)}))),c=u.getValueAsString(c,u.getType(i))):s?e.is(c)&&""!==c&&(c=e.is(c,"number")?1e3*c:c,c=u.getDate(c),c=new Intl.DateTimeFormat(widget.lang,{dateStyle:"long"}).format(c)):u.isBoolean(i)||(c=e.is(c)?c:""))),c},o=function(t){var n,o,r="",u=[],a=!1;return e.is(t)&&(n=e.is(t.get,"function")?t.get("type"):e.is(t.type)?t.type:null,e.is(n)&&(o=b[n],e.is(o)&&e.is(o.Attribute)&&(a=!0,o.Attribute.forEach((n=>{e.is(t.has,"function")?u.push(i(n,t.has(n)?t.get(n):"")):u.push(i(n,e.is(t[n])?t[n]:""))})),r=u.join(e.is(o.separator)?" "+o.separator+" ":" ")))),[a,r]};let d=!1;if(e.is(t.get,"function")){let e,i,r=!1,u=!1,s="",c="";n.isInstance(t.id)?(i=t,[r,s]=o(i),e=n.getReferenceModelFromInstance(i)):e=t,[u,c]=o(e),c.length>0&&s.length>0&&(s=" ("+s+") "),a=c+s,d=u||r}else[d,a]=o(t);return!d&&e.is(t)&&(e.is(t.get,"function")?t.has(s)?a=i(s,t.get(s)):t.has(l)&&(a=i(l,t.get(l))):t[s]?a=i(s,t[s]):t[l]&&(a=i(l,t[l]))),a},setScope:function(e,t,i){var o,r,u;o={oldPID:t.get("PID"),newPID:e.PID},r={oldPID:t.get("to"),newPID:e["to.attributesValue"].PID},n.updateConnectionsCache(t.get("from"),r,o),i?t.set({PID:e.PID,to:e["to.attributesValue"].PID}):(u=e.PID.split("|")[2],t.set({PID:e.PID,to:u})),c.getMediator().notify("connectionChanged",t)},findMissingLinkedObjects:function(t,n,o){i.findMissingLinkedObjects(t,(function(t){e.is(n,"function")&&n.call(null,t)}),o)},getImpacted:function(t,i,o){var r,u,a,s,c,l,d=[],f=[],g=[],m=[],p=this.getInstance(t),I={};if(o=o||{},e.is(o.relationTypes)?I.relationTypes=o.relationTypes:(e.is(o.excludeRelationTypes)&&(I.excludeRelationTypes=o.excludeRelationTypes),e.is(o.excludeTimeConstraintType)&&(I.excludeTimeConstraintType=o.excludeTimeConstraintType)),e.is(p)?(u=this.getReferenceModelFromInstance(p),a=e.is(o.onlyInstanceRelations)&&o.onlyInstanceRelations?null:u.id,g=n.getImpactedConnections(a,p.id,I),m=[u.id,p.id]):(I.isRefRefOnly=!0,g=n.getImpactedConnections(t,null,I),m=[t]),d=g,e.is(i)&&!0===i){for(r=0;r<g.length;r++)s=g[r].get("from"),c=g[r].get("to"),l=e.is(s,"array")?s[s.length-1]:s,m.indexOf(l)>-1?f.push(c):f.push(s);d=f}return d},getConnectionsByModel:function(t,n,o){var r,u=g(),a=e.is(t)?t.get("PPRTYPE"):e.is(n)?n.get("PPRTYPE"):null;o=o||{},r={forceDBMode:!!e.is(o.forceDBMode)&&o.forceDBMode,relationTypes:"array"===e.typeOf(o.relationTypes)?o.relationTypes:u.getAllConfiguredRelations(a,"read"),isRefRefOnly:!!e.is(o.isRefRefOnly)&&o.isRefRefOnly,silentMode:!!e.is(o.silentMode)&&o.silentMode,onComplete:e.is(o.onComplete)?o.onComplete:null,onFailure:e.is(o.onFailure)?o.onFailure:null},i.getConnectionsByModel(t,n,r)},getAltSubContextProductPromise:function(e,t){return i.getAltSubContextProductPromise(e,t)},getMultipleAltSubContextProductsPromise:function(e){return i.getMultipleAltSubContextProductsPromise(e)},getAlternateEnggItemPromise:function(e){return i.getAlternateEnggItemPromise(e)},getEngAlternatesFromBLPromise:function(e){return i.getEngAlternatesFromBLPromise(e).then((function(e){const{altSubInfosResult:n,someErrorOccured:i}=e;return i&&c.getLogger().warn("DatabasePlugin",a.getNLSValue("AltSub.BL.SomeError")),t.resolve(n)}))},getAlternateEnggItemInfoPromise:function(t,n){var o=c.getService("ConfigService"),r=null;return e.is(o)&&(r=o.getUserId()),i.getAlternateEnggItemInfoPromise(t,n,r)},getMfgItemsFromDesignAlternatesPromise:function(e,t,n){return i.getMfgItemsFromDesignAlternatesPromise(e,t,n)},fetchInstancesAndTheirReferences:function(e,t){return i.fetchInstancesAndTheirReferences(e,t)},addToCollections:function(e){n.addToCollections(e)},parseServerObjects:function(t,i){var o,r,u=i.stackedObjects?i.stackedObjects:{stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},a={referencePIDs:[],instancePIDs:[]},s=!e.is(i.silentOpt,"boolean")||i.silentOpt,c=this.getConnectionParser();e.is(t.instancesAndReferences)&&t.instancesAndReferences.forEach((function(e){o=e.attributesValue,Object.prototype.hasOwnProperty.call(o,"isInstanceOf")?(a.instancePIDs.push(o.PID),u.stackedInstances.push(o)):(a.referencePIDs.push(o.PID),u.stackedReferences.push(o))})),e.is(t.deletedObjects)&&t.deletedObjects.forEach((function(e){u.deletedObjects.push(e)})),e.is(t.connections)&&t.connections.forEach((function(e){c.parse(e,u)})),r=e.merge(u,{silentMode:s,onComplete:function(){e.is(i.onComplete)&&i.onComplete(a)}}),n.addToCollections(r)},getDocuments:function(t){var n,i;if(e.is(t)&&e.is(t.documents,"object")&&Object.keys(t.documents).length>0&&(i=c.getPlugins("DocumentPlugin"),e.is(i)&&(i=i.instance,e.is(t.documents,"object")))){const o=new Set;for(n in t.documents)Object.prototype.hasOwnProperty.call(t.documents,n)&&t.documents[n].forEach((e=>{o.add(e.PID)}));i.getDocumentInfo([...o],{onComplete:function(o){var r,u=[];for(r=0;r<o.data.length;r++){const e=o.data[r];i.addDocument(e,{silent:!0})}for(n in t.documents)Object.prototype.hasOwnProperty.call(t.documents,n)&&e.is(t.documents[n])&&t.documents[n].length>0&&(u.push(n),t.documents[n].forEach((function(e){i.addDocumentConnection(n,e.PID,e.type,{silent:!0})})));c.getMediator().notify("documentAdded",[u])}})}},getConnectionsFromServer:function(t,n,o){var r=o||{},u=this,a={noTimeout:!0};c.getMediator().notify("startProgress",a),i.getConnectionsFromServer(t,(function(t){e.is(n,"function")&&n.call(null,t),u.getDocuments(t),c.getMediator().notify("stopProgress",a)}),r)},getDescendantsFromServer:function(t,n,o){var r=o||{},u=this;i.getDescendantsFromServer(t,(function(t){var i=e.is(r.context)?r.context:null;e.is(n,"function")&&n.call(i,t),u.getDocuments(t)}),r)},getInverseConnectionsFromServer:function(e,t){i.getInverseConnectionsFromServer(e,t)},resetAll:function(){n.reset(),c.getMediator().notify("refreshAll")},resetCollections:function(e){n.reset(e)},setSelectPredicate:function(e,t){i.setSelectPredicate(e,t)},getConnectionParser:function(){return i.getConnectionParser()},getNavigateOnIndex:function(){return o.getNavigateOnIndex()},getNavigateOnDatabasePreference:function(){return o.getNavigateOnDatabasePreference()},isStandAlone:function(){return o.isStandAlone()},isNavigateOnDemand:function(){return o.isNavigateOnDemand()},isAuthoringMode:function(){var e=!0;return o.getNavigateOnDatabasePreference()||(e=u.isDbMode()),e},computeIsInstancePossible:function(t,n){var i,r,u,s=!0;e.is(n,"string")?r=n:(i=n,r=n.get("type"));let c=null;if(-1===this.getValidChildTypes(t).indexOf(r))s=!1,c=a.getNLSValue("InsertInstance.InvalidChildType.Failure");else if(t&&i)if(l(i,t)){s=!1;const e=i.get("PLMEntity.V_Name"),n=t.get("PLMEntity.V_Name");c=a.getNLSValue("InsertInstance.cyclicDependencyExists.Failure",{parentName:n,childName:e})}else"RESOURCE"!==(u=i.get("PPRTYPE"))&&"PRODUCT"!==u||!1===(s=o.isMGALicenseAvailable()||o.isRMELicenseAvailable())&&(c=a.getNLSValue("InsertInstance.LicenseDoesNotExist.Failure"));return{isInstancePossible:s,errorMessage:c}},getValidChildTypes:function(t){var n,i=g(),o=[];return e.is(t)&&(n=t.get("type"),o=i.getValidChildTypes(n)),o},getPPRType:function(t){var n,i=g(),o=t;return e.is(t,"string")?o=this.getReferenceModel(t):e.is(t)&&t.isInstance()&&(o=this.getReference(t.get("isInstanceOf"))),e.is(o)&&(n=o.get("PPRTYPE"),e.is(n)||(n=i.getPPRType(o.get("type")))),n},isSystem:function(t){return!(!e.is(t)||"SYSTEM"!==this.getPPRType(t))},isOperation:function(t){return!(!e.is(t)||"OPERATION"!==this.getPPRType(t))},isWorkInstruction:function(t){return!(!e.is(t)||"WORKINSTRUCTION"!==this.getPPRType(t))},isProcess:function(t){return!(!e.is(t)||"PROCESS"!==this.getPPRType(t))},isService:function(t){return!(!e.is(t)||"SERVICE"!==this.getPPRType(t))},isResource:function(t){return!(!e.is(t)||"RESOURCE"!==this.getPPRType(t))},isConstruction:function(t){return!(!e.is(t)||"CONSTRUCTION"!==this.getPPRType(t))},getWhereUsedReferences:function(e,t){i.getWhereUsedReferences(e,t)},getFilteredInstancesFromCollection:function(t,i,o){var r,u=o||{};return r=n.getFilteredInstancesFromCollection(t,i,o),e.is(u.sort)&&u.sort&&n.sortInstancesByTreeOrder(r),r},removeFilterFromCollection:function(e,t){n.removeFilterFromCollection(e,t)},getExecuteByBlockPromise:function(e){return o.getExecuteByBlockPromise(e)},transformToRIROccurrencePath:function(e){return n.transformToRIROccurrencePath(e)},transformRIRToAbsolutePath:function(e){return n.transformRIRToAbsolutePath(e)},isValidPID:function(t){var n=!1;return e.is(t,"string")&&t.length>0&&(n=!0),n},getLastElement:function(t){var n=null;return e.is(t,"array")&&(n=t.length>0?t[t.length-1]:null),n},getLastElementInstanceInfoPID:function(t,n){var i,o=null,r=null;return i=this.getLastElement(t),this.isValidPID(i)&&(o=this.getInstance(i),e.is(o)&&(r=o.get(n),this.isValidPID(r)||(r=null))),r},arrayCompare:function(t,n){var i,o;if(!e.is(t,"array")||!e.is(n,"array"))return!1;if(t.length!==n.length)return!1;for(i=0,o=t.length;i<o;i++)if(t[i]instanceof Array&&n[i]instanceof Array){if(!this.arrayCompare(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1;return!0},groupingBy:function(e,t,n){var i=new Map;return e.forEach((function(e){var o=t(e),r=n(e);i.has(o)?i.set(o,i.get(o).concat(r)):i.set(o,[].concat(r))})),i},hasConnection:function(e){return n.hasConnection(e)},traverseInstanceModels:function(e,t){n.traverseInstanceModels(e,t)},syncMaturity:function(e,t,i,o,r){n.syncMaturity(e,t,i,o,r)},getCurrentStates:function(e,t,i){n.getCurrentStates(e,t,i)},getSequencingModeAttrName:function(e){return n.getSequencingModeAttrName(e)},getSequencingMode:function(e,t){n.getSequencingMode(e,t)},setSequencingMode:function(e,t,i){n.setSequencingMode(e,t,i)},setOOTBRole:function(e,t,i,o){n.setOOTBRole(e,t,i,o)},manageLinearProductFlowsOnCreateInstance:function(e){n.manageLinearProductFlowsOnCreateInstance(e)},manageLinearProductFlowsOnCreateInstancePID:function(e){n.manageLinearProductFlowsOnCreateInstance(n.getInstanceFromCollection(e))},manageLinearProductFlowsOnDeleteInstance:function(e){n.manageLinearProductFlowsOnDeleteInstance(e)},manageLinearProductFlowsOnDeleteInstancePID:function(e){n.manageLinearProductFlowsOnDeleteInstance(n.getInstanceFromCollection(e))},detachExtn:function(e,t){n.detachExtn(e,t)},findAllRIRPaths:function(e){var t=[],n=Array.isArray(e)?e[0]:e;return P=[],d(n,t),Array.isArray(e)&&(t=t.map((function(t){return t.pop(),t=t.concat(e)}))),t},isLinearSequencingMode:function(e){return n.isLinearSequencingMode(e)},sortInstancesByTreeOrder:function(e){n.sortInstancesByTreeOrder(e)}}}})),define("DS/DELPPWModelPlugins/DELPXPSessionPlugin",["UWA/Core","DS/DELPXPMfgModelers/DELPXPMfgModelersAPI","DS/DELPXPSessionManager/DELPXPSessionManager","DS/DELPXPProcessBuildUp/DELPXPProcessBuildUpAPI"],(function(e,t,n,i){"use strict";return function(o){var r,u,a=o.getLogger(),s={},c=null;return u=function(){return a.debug("DELPXPSessionManager::create session method invoked"),n.createPXPSession()},{name:"DELPXPSessionPlugin",onStart:function(){},onStop:function(){},retriveSessionIdForSelected:function(e,t){var n=null,i=e+","+t;return-1!==Object.keys(s).indexOf(i)&&(n=s[i]),n},retriveActiveSessionId:function(){return c},retriveActiveSession:function(){return r},retriveAllSessions:function(){return s},resetSessionIdForSelected:function(e,t){var n=e+","+t;return-1!==Object.keys(s).indexOf(n)&&delete s[n],null},resetActiveSession:function(){var t;t=Object.keys(s).find((e=>s[e]===c)),e.is(t)&&(delete s[t],r=c=null)},resetAllSessions:function(){r=c=null,s={}},getMfgModelers:function(e){return t.GetMfgModelers(e)},createSession:function(e,t){var n;return null===(n=this.retriveSessionIdForSelected(e,t))&&(n=u(),s[[e,t]]=n),c=n,n},connectBuildUpSession:async function(e,n){var o,u,s;return o=this.createSession(e,n),u=await i.connectProcessBuildUp(o),s=i.GetProcessBuildUpAPI(u),r=u,a.debug("DELPXPProcessBuildUpAPI::Build Up session connected"),{processBuildUpAPI:s,initBuildupModelers:t.GetMfgModelers(u)}}}}})),define("DS/DELPPWModelPlugins/DicoPlugin",["UWA/Core","DS/DELPPWDicoServices/DicoUtils"],(function(e,t){"use strict";return function(n){var i={},o={};return{name:"DicoPlugin",getAttributeProperties:function(){return i},getMagnitudePreferences:function(){return o},getProtectedAttributes:function(e){return t.getProtectedAttributes(e)},getAttributeInfo:function(e,n){return t.getAttributeInfo(e,n)},getTypeInfo:function(e){return t.getTypeInfo(e)},getTypeMaskInfo:function(e){return t.getTypeMaskInfo(e)},getTypeExtnInfo:function(e){return t.getTypeExtnInfo(e)},getPPRType:function(e){return t.getPPRType(e)},getTypeHierarchy:function(e){return t.getTypeHierarchy(e)},getParentTypes:function(e){return t.getParentTypes(e)},getReadOnlyTypes:function(){return t.getReadOnlyTypes()},addTypeExtnCustomInterface:function(e,n){t.addTypeExtnCustomInterface(e,n)},isAKindOf:function(e,n){return t.isAKindOf(e,n)},getConfiguredRelations:function(e,n,i){return t.getConfiguredRelations(e,n,i)},getConfiguredCustomRelations:function(e,n,i){return t.getConfiguredCustomRelations(e,n,i)},isRelationTypeConfigured:function(e,n,i,o){var r;return r=t.getPossibleRelations(n,i,o),Array.isArray(r)&&r.indexOf(e)>-1},getPossibleRelations:function(e,n,i){return t.getPossibleRelations(e,n,i)},getPossibleRelationTypes:function(e,i){var o=e.get("type"),r=i.get("type");if(o&&r)return t.getPossibleRelations(o,r,"write");n.getLogger().debug(" No PPRTypes on models")},isReferencesHasReadOnlyType:function(t,n){let i=!1,o=null,r=n||{};const u=this,a=function(e){let t=o.has(e);if(!t){t=u.getParentTypes(e).some((function(e){return o.has(e)}))}return t};if(Array.isArray(r.excludeReferenceTypes)&&r.excludeReferenceTypes.length>0?(o=new Set(this.getReadOnlyTypes()),r.excludeReferenceTypes.forEach((function(e){o.delete(e)}))):o=this.getReadOnlyTypes(),e.is(t,"string"))i=a(t);else if(e.is(t,"object")){const e=t.get("type");i=a(e)}else Array.isArray(t)&&(i=t.some((function(t){if(e.is(t)){const e=t.get("type");return a(e)}return!1})));return i},isLinkPossible:function(e,t,n,i){var o=this.getPossibleRelationTypes(e,t,n,i),r=this.getPossibleRelationTypes(t,e,i,n);return o.length>0||r.length>0},isEntityReference:function(e){return t.isEntityReference(e)},isEntityInstance:function(e){return t.isEntityInstance(e)},isEntityConnection:function(e){return t.isEntityConnection(e)},isReparentPossible:function(e){var n=t.getAcceptedPPRTypesForActions();return null===n||n.REPARENT.PPRType.includes(e)},isReorderPossible:function(e){var n=t.getAcceptedPPRTypesForActions();return null===n||n.REORDER.PPRType.includes(e)},getAcceptedBaseTypesForActions:function(){return t.getAcceptedBaseTypesForActions()},isAutoCreateScopeOnHOP:function(){return t.isAutoCreateScopeOnHOP()},fetchDicoAttributeInfo:function(e,n,i){return t.fetchDicoAttributeInfo(e,n,i)},addAttributeInfo:function(e){return t.addAttributeInfo(e)},getAllConfiguredRelations:function(e,n){return t.getAllConfiguredRelations(e,n)},getValidChildTypes:function(e){return t.getValidChildTypes(e)},getReferenceTypes:function(){return t.getReferenceTypes()},getInstanceTypes:function(){return t.getInstanceTypes()},getCustoServiceProcessRoles:function(){return t.getCustoServiceProcessRoles()},retrieveCustoServiceProcessRoles:function(e){return t.retrieveCustoServiceProcessRoles(e)},getRoleOOTBFromRoleName:function(e){return t.getRoleOOTBFromRoleName(e)},getAllServiceProcessRoles:function(){return t.getAllServiceProcessRoles()}}}})),define("DS/DELPPWModelPlugins/ChangeActionPlugin",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/DELPPWWebServices/WebserviceUtils","DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext"],(function(e,t,n,i){"use strict";return function(o){var r,u,a,s,c,l,d,f,g,m,p="storedChangeAction",I=[],h=[];return c=function(){return widget.id+"/AuthKey"},a=function(){return widget.getValue(p)},s=function(e){widget.setValue(p,e)},m=function(){const t=a();e.is(t,"string")&&t.length>0&&i.cleanAuthDetails().then((function(){s("")}))},l=function(){const t=a();e.is(t,"string")&&t.length>0&&s("")},d=function(t){e.is(t)&&e.is(t.change)&&e.is(t.change.id,"string")&&s(t.change.id)},f=function(t){var r={context:1};return new e.Promise((function(u,a){n.webServiceRequest({url:"modeler/change/changeaction/pid:"+t,method:"GET",header:n.getHeaders({isJsonOnly:!0}),data:r,onComplete:function(n){var r=[];o.getLogger().debug(self.name,"Change action set completed: %s",n),(e.is(n)&&e.is(n.changeaction)&&e.is(n.changeaction.context,"array")?n.changeaction.context:[]).forEach((function(t){var n=e.is(t)&&e.is(t.id,"string")?t.id.split(":"):[];2===n.length&&"pid"===n[0]&&0!==n[1].length&&r.push(n[1])})),i.set({version:"1.0",change:{id:t}}),s(t),u(r)},onFailure:a,onTimeout:a})}))},g=function(){const t=a();e.is(t,"string")&&t.length>0&&f(t)},r=function(){h.push(o.addExternalListener("LoadNewSession",m)),h.push(o.addExternalListener("LoadRecentContent",g)),I.push(t.subscribe(c(),d)),I.push(t.subscribe("removeAuthCtxEvent"+c(),l))},u=function(){I.forEach((function(e){t.unsubscribe(e)})),h.forEach((function(e){o.removeExternalListener(e)})),h=[],I=[]},{name:"ChangeActionPlugin",onStart:function(){r()},onStop:function(){u()},getAuthoringContextPID:function(){var t=i.get();return e.is(t)&&e.is(t.change.id)?t.change.id:null},getAuthoringContextHdr:function(){var t=i.get();return e.is(t)&&e.is(t.AuthoringContextHeader)?t.AuthoringContextHeader:{}},setCAAndGetDetails:function(e){return f(e)}}}})),define("DS/DELPPWModelPlugins/ResourcePlugin/WebServicePlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils"],(function(e,t){"use strict";return function(n){var i="WebServicePlugin";return{name:i,onStart:function(){},getXMLValues:function(o,r,u){var a=null;return e.is(o,"string")&&o.length>0?a=t.getXMLValues(o,r,u):(n.getLogger().debug(i,"Invalid XML path (ixmlKey)"),e.is(u,"function")),a},webServiceRequest:function(e){t.webServiceRequest(e)},getSecurityContext:function(){return t.getSecurityContext()},get3DSpaceUrl:function(){return t.get3DSpaceUrl()},getTenant:function(){return t.getTenant()},getHeaders:function(e){return t.getHeaders(e)},get3DSpaceServiceName:function(){return t.get3DSpaceServiceName()},getPlatformID:function(e){return t.getPlatformID(e)},getServerConfigurationRawXML:function(e){return t.getServerConfigurationRawXML(e)}}}})),define("DS/DELPPWModelPlugins/AttributePlugin",["UWA/Core","DS/Utilities/Utils","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWModelServices/ModelUtils","DS/DELPPWDicoServices/DimensionUtils"],(function(e,t,n,i,o,r){"use strict";return function(u){var a,s,c,l,d,f,g,m,p,I,h,P,b,v,y,R,D,C,S,A,L,T,N,M,E,F,U,O,V,W,x,w,B,_,k,j,z,q,G,X,J,H,K,Q,Y=/(\d+)\/(\d+)\/(\d+)@\d+:\d+:\d+:\w+/;const $=["ProcessContinuousProvide","ProcessContinuousCreateMaterial","DELContinuousServicePartReference","DELConstructionWorkElementLength","DELConstructionWorkElementArea"],Z="DELFmiRatioOfDiscreteQuantity";return X=function(){return e.is(G)||(G=u.getPlugins("DicoPlugin").instance),G},a=function(t){var n="";return e.is(t)&&(n=e.is(t.Type)?t.Type:""),n},s=function(){if(!window)return navigator.language;const e=window.WUX||window.top.WUX;return e&&e.regionalFormatLanguage||navigator.language},k=function(e){var t,n,i,o,r,u,a,s,c,l;return e?(t=e.split("@"),n=e,t.length>1&&(o=(i=t[0].split("/"))[0],r=i[1]-1,u=i[2],s=(a=t[1].split(":"))[0],c=a[1],l=a[2],(n=new Date).setUTCHours(s),n.setUTCMinutes(c),n.setUTCSeconds(l),n.setUTCFullYear(o),n.setUTCDate(1),n.setUTCMonth(r),n.setUTCDate(u)),n):null},j=function(t){var n,i="";return"NULL"===t?i="":(Y.test(t)&&(t=k(t).toUTCString()),n=e.is(t,"number")?t:Date.parse(t),isNaN(n)||(i=new Date(n))),i},c=function(e){return"Boolean"===a(e)},l=function(e){return"Double"===a(e)},d=function(e){return"Integer"===a(e)},f=function(e){return"Date"===a(e)},g=function(e){return"String"===a(e)},m=function(t,n){var i=!1;return e.is(t)&&e.is(t.Protection)&&(1===t.Protection||2===t.Protection?-1!==["V_RepairType","V_CodeInfo","V_MaintenanceLevel","V_MaintenanceCandidate","V_SpareCandidate"].indexOf(t.Name)?i=!1:(i=i||!0===t.isReadOnly||e.is(t.UIAccess)&&"ReadOnly"===t.UIAccess,e.is(n)&&(i=i||!0===n.readOnly||!1===n.visible)):i=3===t.Protection?-1===["V_ContQuantity","V_SequencingMode","V_OverlapQty","V_OOTBRole","V_CustoRole","V_CapableRscGroupIndex","V_IsPreferred"].indexOf(t.Name):8!==t.Protection||-1===["V_DimensionType","V_RefQuantity","V_UseCase","V_WIPQuantityRatio","V_ScrapQuantityRatio","V_LossQuantity","V_IsConstQuantity"].indexOf(t.Name)),i},p=function(t){var n=!0;return e.is(t)&&(n=t.visible),n},h=function(t){return e.is(t)&&e.is(t.MultiValuated)&&"Yes"===t.MultiValuated},I=function(e){return f(e)&&h(e)},P=function(t){return e.is(t.MultiLine)&&"Yes"===t.MultiLine},b=function(t,n){var i=!1;return i=e.is(t)&&e.is(t.HasRangeDefined)&&"Yes"===t.HasRangeDefined,e.is(n)&&Array.isArray(n.authorizedValues)&&(i=i||n.authorizedValues.length>0),i},v=function(t){if(e.is(t))return e.is(t.Magnitude)&&""!==t.Magnitude&&!b(t)},R=function(t,n){var i=-1;return e.is(t)&&e.is(t.AuthorizedValues,"array")&&(i=t.AuthorizedValues.findIndex((function(t){var i=!1;return e.is(t)&&(i=t.Name==n),i}))),i},y=function(t,n,i){var o;if(e.is(n)&&Array.isArray(n.authorizedValues)&&n.authorizedValues.length>0){for(o=0;o<n.authorizedValues.length;o++)if(n.authorizedValues[o].NLS===i)return o;return 1}for(o=0;o<t.AuthorizedValues.length;o++)if(D(t,o)===i)return o},D=function(t,n){return f(t)?isNaN(t.AuthorizedValues[n].NLS)?B(t.AuthorizedValues[n].NLS):B(1e3*t.AuthorizedValues[n].NLS):e.is(t.AuthorizedValues,"array")&&t.AuthorizedValues.length>n&&n>=0?e.is(t.AuthorizedValues[n].NLS,"string")?t.AuthorizedValues[n].NLS:e.is(t.AuthorizedValues[n].Name,"string")?t.AuthorizedValues[n].Name:"Unknown Value":"Invalid Index"},C=function(e,t){return t<0?null:e.AuthorizedValues[t].Name},S=function(e,t){return t<0?null:e.AuthorizedValues[t].value},A=function(t,n){var i,o=[];if(e.is(n)&&Array.isArray(n.authorizedValues)&&n.authorizedValues.length>0){for(i=0;i<n.authorizedValues.length;i++)o.push(n.authorizedValues[i].NLS);return o}for(i=0;i<t.AuthorizedValues.length;i++)o.push(D(t,i));return o},L=function(t,n,i){var o=null,r=!1,a=function(n){var i=null;return e.is(t)&&Array.isArray(t.AuthorizedValues)&&t.AuthorizedValues.some((function(e,o){var r=!1;return D(t,o)===n&&(i=d(t)?Number.isInteger(parseInt(e.Name))?e.Name:(o+1).toString():e.Name,r=!0),r})),i},s=function(n){var o=u.getLogger(),r=e.is(t,"string")?t:JSON.stringify(t);e.is(o)&&e.is(o.debug,"function")&&(o.debug(n+" (attributeInfo): "+r),o.debug(n+" (value): "+i))};return e.is(n)&&Array.isArray(n.authorizedValues)&&(r=n.authorizedValues.some((function(e,n){var r=!1;return e===i&&(o=d(t)?n+1:e,r=!0),r}))),r||(o=a(i)),!e.is(o)&&e.is(t)&&e.is(t.DefaultValue)&&(o=a(t.DefaultValue),s("attributePlugin._getAuthorizedValue, from NLS to integer failure, default value fallback")),e.is(o)||(o=i,s("attributePlugin._getAuthorizedValue, from NLS to integer complete failure")),o},T=function(t,n){var i=[];return Array.isArray(n)?(b(t)&&e.is(t.AuthorizedValues,"array")&&n.forEach((function(n){t.AuthorizedValues.some((function(t){return!(!e.is(t.Name,"string")||n!==t.Name)&&(i.push(t.NLS),!0)}))})),i):i},N=function(t){return e.is(t.DefaultValue)?t.DefaultValue:""},M=function(e){return v(e)?e.Magnitude:""},E=function(e){return e.FullName},F=function(t){return e.is(t.MaxLength)?t.MaxLength:0},U=function(t){var n;return e.is(t)&&e.is(t.pattern)?t.pattern:d(t)?"^[-+]?([0-9]+)$":l(t)?"^([+-]?([1-9][0-9]*)|(0))([.,][0-9]+)?":(n=F(t))<=0?null:"^.{0,"+n+"}$"},O=function(t){var n="";return e.is(t)&&(n=e.is(t.NLS)?t.NLS:t.Name),n},V=function(t,n){return!!e.is(t)&&Object.prototype.hasOwnProperty.call(t._attributes,n)},W=function(t){return"array"!==e.typeOf(t)&&(t=e.is(t)&&t.length>0&&"NULL"!==t&&"null"!==t?t.split(o.getPrefSeparator()):[]),t},x=function(t){var n,i,r=[];if(Array.isArray(t))for(n=0;n<t.length;n++)i=_(t[n]),e.is(i)&&r.push(i);else if(e.is(t)&&t.length>0&&"NULL"!==t&&"null"!==t)for(t=t.split(o.getPrefSeparator()),n=0;n<t.length;n++)i=_(t[n]),e.is(i)&&r.push(i);return r},w=function(t,n,i){var r="",u=W(t),a=widget.lang,s=o.getPrefSeparator(),c=e.is(n,"string")&&"Double"===n,l=e.is(n,"string")&&"Integer"===n,d=!e.is(i,"boolean")||i,f=l?1:2;return e.is(u,"array")&&u.forEach((function(e,t){var n=null;t>0&&(r+=s),(l||c)&&d?(n=l?parseInt(e):parseFloat(e),isNaN(n)||(n=n.toLocaleString(a,{minimumSignificantDigits:f,maximumSignificantDigits:21}),r+=n)):r+=e})),r},B=function(e,t,n){var i=widget.lang,o=j(e);return isNaN(o)||""===o?"":!0===t?o.toLocaleString(i,n):o.toLocaleDateString(i,n)},_=function(e){return j(e)},z=function(t,n){var i,o,r,u=!1,a=X();if(e.is(t)&&e.is(n)&&-1!==n.indexOf(".")){i="string"===e.typeOf(t)?t:t.get("type"),o=a.getTypeExtnInfo(i),r=a.getParentTypes(i),new Set([...o||[],...r||[],i]).has(n.split(".")[0])&&(u=!0)}return u},q=function(e){var t=X(),n=e.split(".")[0];return t.getProtectedAttributes(n).indexOf(e.split(".")[1])>-1},J=function(t,n){var i=!1;if(!e.is(t))return!1;const o=t.get("type");return e.is(o)&&!$.includes(o)&&(i=n.contains(Z)),i},H=function(e,t){var n=M(t),o=e;if(e){let[r,u]=e.toString().split(" ");o=K(r,t)+" "+i.getNLSForUnit(n,u)}return o},K=function(n,i){var o,r=s(),u="";const a=Q(i),c=t.getDecimalSeparator();var[l,d]=n.toString().split(".");return u=new Intl.NumberFormat(r).format(l),o=d,e.is(d)&&d.length>0&&!a&&(o=`0.${d}`,o=2===(o=(o=new Intl.NumberFormat(r,{maximumFractionDigits:6}).format(o)).split(c)).length?o[1]:d),u+=e.is(o,"string")&&o.length>0?c+o:""},Q=function(e){return"TRUE"===e["IPML.DisplayAsEntered"]},{name:"AttributePlugin",getColumnInfos:function(t){var n,i,o,r,u,a,s,c,l=!1,d=null,f=null,g=null,m=null,p=null,I=null;if(e.is(t)){if(e.is(t.dataIndex))n=(l=l||"tree"===t.dataIndex)?t.label:t.dataIndex,i=e.is(t.dicoType)?t.dicoType:null,o=e.is(t.entity)?t.entity:null,g=e.is(i)?i+"."+n:n,f=e.is(o)?g+"."+o:g,m=e.is(t.displayType)?t.displayType:null,d={name:g,nodeName:f,dataIndex:n,dicoType:i,entity:o};else if(e.is(t.Attribute)){f=[],d=[],m=e.is(t.displayType)?t.displayType:null;let n,i=t.Attribute;for(i=Array.isArray(i)?i:[i],n=0;n<i.length;n++){let t,o,r,u,a,s=i[n];l=l||"tree"===s.dataIndex,r=s.name,u=e.is(s.dicoType)?s.dicoType:null,a=e.is(s.entity)?s.entity:null,t=e.is(u)?u+"."+r:r,o=e.is(a)?t+"."+a:t,f.push(o),d.push({name:t,nodeName:o,dataIndex:r,dicoType:u,entity:a})}}p=!e.is(t.isEditable)||t.isEditable,s=!e.is(t.isGroupable)||t.isGroupable,c=!e.is(t.isFilterable)||t.isFilterable,I=!!e.is(t.isHidden)&&t.isHidden,r=e.is(t.width)?t.width:null,u=e.is(t.minWidth)?t.minWidth:null,a=e.is(t.Tooltip)?t.Tooltip:null}return{attribute:d,dataIndex:l?"tree":e.is(f,"array")?f.join(","):f,displayType:m,isHidden:I,isGroupable:s,isFilterable:c,isEditable:p,width:r,minWidth:u,Tooltip:a}},getLabelInfos:function(t){var n,i,o,r,u,a,s;if(e.is(t)){for(t=Array.isArray(t)?t:[t],i=[],o=[],n=0;n<t.length;n++){let r,u,a,s,c,l=t[n];a=l.dataIndex,s=e.is(l.dicoType)?l.dicoType:null,c=e.is(l.entity)?l.entity:null,r=e.is(s)?s+"."+a:a,u=e.is(c)?r+"."+c:r,o.push(u),i.push({name:r,nodeName:u,dataIndex:a,dicoType:s,entity:c})}i=1===i.length?i[0]:i,o=1===o.length?o[0]:o.join(","),r=e.is(t.width)?t.width:null,u=e.is(t.minWidth)?t.minWidth:null,a=1!==t.length||!e.is(t[0].isGroupable)||t[0].isGroupable,s=1!==t.length||!e.is(t[0].isFilterable)||t[0].isFilterable}return{attribute:i,dataIndex:o,width:r,minWidth:u,isGroupable:a,isFilterable:s}},getNodeAndColumnInfos:function(t,i){var o,r,u,a,s,c=X(),l={};if(e.is(i))if(Array.isArray(i.attribute)&&e.is(t)){for(s=0;s<i.attribute.length;s++)if(u=(r=i.attribute[s]).name,a=r.entity,l.objectToBeModified="instance"===a?n.getInstanceFromCollection(t.getInstancePID()):"link"===a?n.getConnectionFromCollection(t.getLinkPID()):n.getReferenceFromCollection(t.getReferencePID()),e.is(l.objectToBeModified.get(u))){l.attributeName=r.name,l.attributeNodeName=r.nodeName,l.dataIndex=r.dataIndex,l.instOrRef=r.entity;break}}else e.is(t)&&("instance"===i.attribute.entity?l.objectToBeModified=n.getInstanceFromCollection(t.getInstancePID()):"link"===i.attribute.entity?l.objectToBeModified=n.getConnectionFromCollection(t.getLinkPID()):l.objectToBeModified=n.getReferenceFromCollection(t.getReferencePID())),l.attributeName=i.attribute.name,l.attributeNodeName=i.attribute.nodeName,l.dataIndex=i.attribute.dataIndex,l.instOrRef=i.attribute.entity;return l.attributeInfo=c.getAttributeInfo(l.attributeName),e.is(l.attributeInfo)||(l.attributeInfo={}),e.is(l.objectToBeModified)?(l.attributeDef={},o=c.getTypeMaskInfo(l.objectToBeModified.get("type")),e.is(o)&&e.is(Object.prototype.hasOwnProperty.call(o,l.dataIndex))&&(l.attributeDef=o[l.dataIndex])):l.attributeDef={},l.attributeNLSTitle=O(l.attributeInfo),l},getNodeAndColumnInfosForReference:function(t,i){var o,r,u,a=X(),s={};if(u=this.getAttributeInfoFromColumn(i),t&&(r=t.getReferencePID()),s.objectToBeModified=n.getReferenceFromCollection(r),e.is(s.objectToBeModified)&&e.is(i)&&e.is(i.attribute,"array")&&i.attribute.length>0){let t=s.objectToBeModified.get("DELFmiMagnitudeExt.V_DimensionType");if(!e.is(t)){const n=s.objectToBeModified.get("type");e.is(n)&&!$.includes(n)&&(t=Z)}i.attribute.forEach((function(e){const n=e.name;if(n.contains(t))return u.attributeName=u.dataIndex=n,u.attributeNodeName=e.nodeName,u.dicoType=e.dicoType,void(u.entity=e.entity)}))}if(s.attributeName=u.attributeName,s.attributeNodeName=u.attributeNodeName,s.dataIndex=u.dataIndex,s.instOrRef=u.entity,s.attributeInfo=a.getAttributeInfo(u.attributeName),!e.is(s.attributeInfo)){if(e.is(s.objectToBeModified)){const t=s.objectToBeModified.get("type");o=e.is(t,"string")?s.objectToBeModified.get("type")+"."+u.dataIndex:u.dataIndex}else o=u.dataIndex;s.attributeInfo=a.getAttributeInfo(o),e.is(s.attributeInfo)||(s.attributeInfo={})}return s.dataIndex.contains(Z)&&e.is(s.attributeInfo)&&e.is(s.attributeInfo.DefaultValue)&&(s.attributeInfo.DefaultValue=1),s.attributeDef={},s.attributeNLSTitle=O(s.attributeInfo),s},getFormatedMagnitudeValueWithUnitLabel:function(e,t){return H(e,t)},getFormatedNumberValue:function(e,t){return K(e,t)},getAttributeInfoFromColumn:function(t){var n={};return e.is(t)&&(t.dataIndex,n.dataIndex=t.attribute.dataIndex,n.entity=t.attribute.entity,n.dicoType=t.attribute.dicoType,n.attributeName=t.attribute.name,n.attributeNodeName=t.attribute.nodeName),n},getColumnDisplayValue:function(t){var n,o,r=this,u=X();return o=function(t){var n;return n=u.getAttributeInfo(t),e.is(n)?r.getNLS(n):i.getNLSValue("Column."+t)},n=e.is(t)&&e.is(t.dataIndex)&&e.is(t.attribute)?t:this.getColumnInfos(t),o(e.is(n.attribute)?e.is(n.attribute,"array")?n.attribute[0].name:e.is(n.attribute.name)?n.attribute.name:null:null)},getObjectAndAttributeInfos:function(t){var n,i=X(),o=this,r=[],u=function(t){var n,u,a;a=e.is(t.dicoType)?t.dicoType+"."+t.name:t.name,n=i.getAttributeInfo(a,null),u={attributeName:a,dataIndex:t.name,dicoType:t.dicoType,attributeNLSTitle:o.getNLS(n),attributeInfo:n,readOnly:!(!e.is(t.readOnly)||!0!==t.readOnly),mandatory:!(!e.is(t.mandatory)||!0!==t.mandatory)},r.push(u)};if("array"!==e.typeOf(t))u(t);else for(n=0;n<t.length;n++)u(t[n]);return r},getAttributeInfo:function(e,t){return X().getAttributeInfo(e,t)},isBoolean:function(e){return c(e)},isDouble:function(e){return l(e)},isInteger:function(e){return d(e)},isDate:function(e){return f(e)},isString:function(e){return g(e)},getFormattedDate:function(e,t,n){return B(e,t,n)},getDate:function(e){return _(e)},isReadOnly:function(e,t){return m(e,t)},isVisible:function(e){return p(e)},isMultiValuated:function(e){return h(e)},isMultiDate:function(e){return I(e)},isMultiLine:function(e){return P(e)},hasRangeDefined:function(e,t){return b(e,t)},hasMagnitude:function(e){return v(e)},getAuthorizedValueIndexFromName:function(e,t){return R(e,t)},getAuthorizedValueIndex:function(e,t,n){return y(e,t,n)},getAuthorizedValueNLS:function(e,t){return D(e,t)},getAuthorizedValueDB:function(e,t){return C(e,t)},getAuthorizedValueSavedValue:function(e,t){return S(e,t)},getAuthorizedValuesNLSList:function(e,t){return A(e,t)},getAuthorizedValue:function(e,t,n){return L(e,t,n)},getAuthorizedNLSvalues:function(e,t,n){return T(e,t)},getDefaultValue:function(e){return N(e)},getMagnitude:function(e){return M(e)},getFullName:function(e){return E(e)},getMaxLength:function(e){return F(e)},getPattern:function(e){return U(e)},getNLS:function(e){return O(e)},getType:function(e){return a(e)},getLocale:function(){return s()},doesAttributeExist:function(e,t){return V(e,t)},isAttributeInProtectedList:function(e){return q(e)},getValueAsArray:function(e,t){return W(e)},getValueAsDateArray:function(e){return x(e)},getValueAsString:function(e,t,n){return w(e,t,n)},getNLSForUnit:function(t){var n,o="";if(e.is(t)&&v(t)&&e.is(t.ManipulationUnit,"string")){if(0!==t.ManipulationUnit.length)n=t.ManipulationUnit;else{let i=widget.getPreference(t.Magnitude);null===(n=e.is(i)&&"hidden"!==i.type?i.value:null)&&"Ratio"===t.Magnitude&&(n="PERCENTAGE")}o=e.is(n)?i.getNLSForUnit(t.Magnitude,n):i.getNLSForUnit(t.Magnitude)}return o},getAttributeUnits:function(t){var n,o,r,u=[];if(e.is(t)&&v(t)&&e.is(t.Magnitude,"string"))if(n=t.Magnitude,0!==t.ManipulationUnit.length)o=t.ManipulationUnit;else{let n=widget.getPreference(t.Magnitude);null===(o=e.is(n)&&"hidden"!==n.type?n.value:null)&&"Ratio"===t.Magnitude&&(o="PERCENTAGE")}return e.is(n)&&(r=i.getDimension(n),e.is(r)&&(u=r.Units),e.is(o)||(o=r.MKSUnit),Array.isArray(u)&&e.is(o)&&(u=u.map((function(e){return{...e,defaultUnit:e.Name===o}})))),u},getMagnitudeValue:function(t,n,i){return v(n)&&(t=e.is(t,"array")?w(t,a(n),i):e.is(t)||1!==n.Protection?"NULL"===t?"":t:n.DefaultValue),t},convertDateToStandard:function(t){var n,i,o,r,u,a,s,c=widget.lang;return t?(n=e.is(t,"date")?e.clone(t):new Date,i=t.getUTCFullYear(),(o=t.getUTCMonth()+1)<10&&(o="0"+o),(r=t.getUTCDate())<10&&(r="0"+r),(u=t.getUTCHours())<10&&(u="0"+u),(a=t.getUTCMinutes())<10&&(a="0"+a),(s=t.getUTCSeconds())<10&&(s="0"+s),n.setYear(i),n.setMonth(t.getMonth()),n.setDate(r),n.setHours(u),n.setMinutes(a),n.setSeconds(s),{value:t.toLocaleString(c),valueDB:i+"/"+o+"/"+r+"@"+u+":"+a+":"+s+":GMT"}):{value:"",valueDB:""}},getDimensions:function(){return i.getDimensions()},getDimension:function(e){return i.getDimension(e)},addAttributeInfo:function(e){return X().addAttributeInfo(e)},isAttrApplicableForType:function(e,t){return z(e,t)},isAttrOfRatioDiscreteQuantity:function(e,t){return J(e,t)},addArbitraryDimensions:function(e,t){return i.addArbitraryDimensions(e,t)},getArbitraryDimensions:function(){return i.getArbitraryDimensions()},isDisplayAsEntered:function(e){return Q(e)},getMKSValueFromUnitValue:function(e,t,n){return r.getMKSValueFromUnitValue(e,t,n)},sanitizeHTML:function(e){return i.sanitizeHTML(e)}}}})),define("DS/DELPPWModelPlugins/ResourcePlugin/ResourcePlugin",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],(function(e,t){"use strict";return function(e){return{name:"ResourcePlugin",getNLSForUnit:function(e,n){return t.getNLSForUnit(e,n)},getLabelForUnit:function(e,n){return t.getLabelForUnit(e,n)},addCATNlsFile:function(e){t.addCATNlsFile(e)},addNls:function(e){t.addNls(e)},addNlsJSON:function(e,n=!1){t.addNlsJSON(e,n)},getNLSValue:function(e,n,i,o){return t.getNLSValue(e,n,i,o)},addIconsFromCATRsc:function(e,n){t.addIconsFromCATRsc(e,n)},addIcons:function(e,n){t.addIcons(e,n)},getIconURLFromKey:function(e,n,i){return t.getIconURLFromKey(e,n,i)},getIconElem:function(e,n){return t.getIconElem(e,n)},getCountryCodesForLanguage:function(e){return t.getCountryCodesForLanguage(e)},getLanguageForCountry:function(e){return t.getLanguageForCountry(e)}}}})),define("DS/DELPPWModelPlugins/DocumentPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DocumentManagement/DocumentManagement","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWModelServices/ModelUtils"],(function(e,t,n,i,o){"use strict";return function(r){var u,a,s,c,l,d,f,g,m,p,I,h,P,b,v=r.getLogger(),y=[],R={},D=r.getConfig().resource.documemntColumnConfigXML,C="dsmfg/private/V0/MfgElement/document",S="PLMDocConnection";return u=function(){var e=t.get3DSpaceServiceName(),n=t.getServiceUrl(e);return n=n.endsWith("/")?n.substring(0,n.length-1):n,{securityContext:t.getSecurityContext(),csrf:{name:"ENO_CSRF_TOKEN",value:t.getCSRFToken(e)},tenantUrl:n,tenant:t.getPlatformID({serviceId:e})}},a=function(i,r){o.isStandAlone()?(e.merge(r,{url:C,method:"GET",data:i}),t.webServiceRequest(r)):n.getDocuments(i,r)},s=function(i,r,u){o.isStandAlone()?(e.merge(u,{url:"dsmfg/private/V0/invoke/createDocuments",method:"POST",data:i}),t.webServiceRequest(u)):e.is(i.id)?n.addFileToDocument(i,u):n.createDocument(i,u)},c=function(i,r,u){o.isStandAlone()?(e.merge(u,{url:"dsmfg/private/V0/invoke/modifyFile",method:"POST",data:i}),t.webServiceRequest(u)):n.modifyDocument(i,u)},l=function(i,r,u){o.isStandAlone()?(e.merge(u,{url:"dsmfg/private/V0/invoke/fetchDocuments",method:"POST",data:i}),t.webServiceRequest(u)):n.downloadDocument(i,r,!1,u)},d=function(i,r,u){o.isStandAlone()?(e.merge(u,{url:"dsmfg/private/V0/invoke/deleteFile",method:"POST",data:{docId:i,fileID:r}}),t.webServiceRequest(u)):n.deleteFile(i,r,u)},g=function(i,r){o.isStandAlone()?(e.merge(r,{url:"dsmfg/private/V0/invoke/fetchDocuments",method:"POST",data:i}),t.webServiceRequest(r)):n.downloadDocuments(i,r)},m=function(i,r){o.isStandAlone()?(e.merge(r,{url:"dsmfg/private/V0/invoke/deleteDocuments",method:"DELETE",data:i}),t.webServiceRequest(r)):n.deleteDocument(i,r)},b=function(n){e.is(D)?t.getXMLValues(D,(function(t){var i,o,r,u;if(e.is(t.DisplayAttributeDescriptionList))for(i=t.DisplayAttributeDescriptionList,i=e.is(i.Document,"array")?i.Document:[i.Document],o=0;o<i.length;o++)r=e.is(i[o].Attribute,"array")?i[o].Attribute:[i[o].Attribute],u=[],r.forEach((function(e){u.push(e.name)})),R[i[o].coloumnName]=u;n()}),(function(){v.debug("DocumentsColumnMappingXML couldn't be fetched'"),n()})):(v.debug("DocumentsColumnMappingXML is not available"),n())},P=function(n,i){t.webServiceRequest({url:"dsmfg/private/V0/MfgElement/document/policyNames",method:"GET",data:null,onComplete:function(t){e.is(t,"array")?(f=t,e.is(n,"function")&&n(f)):e.is(i,"function")&&i("Document Policies are not recieved from server")},onFailure:function(t){v.debug("!!! WS call 'dsmfg/private/V0/MfgElement/document/policyNames' in DocumentPlugin._fetchDocumentsPolicies() failed"),e.is(i,"function")&&i(t)},onTimeout:function(t){v.debug("!!! WS call 'dsmfg/private/V0/MfgElement/document/policyNames' in DocumentPlugin._fetchDocumentsPolicies() timed out"),e.is(i,"function")&&i(t)}})},h=function(t){new e.Promise.all([new Promise(b)]).then((function(){v.debug("DocumentPlugin initialized!"),t()}),(function(e){v.debug("Failed to load DocumentPlugin Plugin. Error Description:"+e),t()}))},I=function(){f=void 0},p=function(e){var t=new(r.getPlugins("UXComponentsPlugin").instance.getComponent("Element"))("a"),n=e+"&attachment=true";"download"in t||(t.target="_blank"),t.setAttributes({download:!0,href:n}),t.click()},{name:"DocumentPlugin",onStart:function(e){h(e),i.setDocumentCollectionEvents({"onChange:relateddata":function(e,t,n){r.getMediator().notify("documentChanged",[e,t,n])}}),y.push(r.addExternalListener("endEdit",I))},onStop:function(){var e,t;for(i.removeDocumentCollectionEvents(),e=0,t=y.length;e<t;e++)r.removeExternalListener(y[e]);y=[],f=void 0},getDocumentTypes:function(){var t=[],n=r.getPlugins("DicoPlugin");return e.is(n)&&(t=(n=n.instance).getDocumentTypes()),t},getDocumentsPolicies:function(t){t=t||{},e.is(f,"array")?e.is(t.onComplete,"function")&&t.onComplete(f):P(t.onComplete,t.onFailure)},getAttributesConfiguredOnDocumentColumn:function(t){var n;return e.is(t)&&e.is(R)&&(n=R[t]),n},isColumnConfigured:function(t){return e.is(this.getAttributesConfiguredOnDocumentColumn(t))},isDocConnection:function(e){return e.get("type")===S},hasDocuments:function(e){return this.getDocumentConnections(e).length>0},getConnectedDocuments:function(e){var t=[];return i.getImpactedConnections(e,null,{relationTypes:[S,"Reference Document","SpecificationDocument"]}).forEach((function(e){t.push(e.get("to"))})),t},getConnectedDocumentPIDs:function(e){let t=[];return i.getImpactedConnections(e,null,{relationTypes:[S,"Reference Document","SpecificationDocument"]}).forEach((function(e){t.push(e.get("PID"))})),t},addDocument:function(e,t){return i.addDocument(e,t)},getDocument:function(e){return i.getDocument(e)},removeDocument:function(e){return i.removeDocument(e)},addDocumentConnection:function(t,n,o,r){const u=e.is(o)?o:S;return i.addConn({PID:u+"|"+t+"|"+n,from:t,to:n,type:u},r)},getDocumentConnections:function(e){var t=i.isReference(e)?e:i.getInstanceFromCollection(e).get("isInstanceOf");return i.findConnections({from:t,type:S})},getDocumentConnectionsByDocID:function(e){return i.findConnections({to:e,type:S})},removeDocumentConnections:function(e){var t=this;t.getConnectedDocumentPIDs(e).forEach((function(n){const[i,,o]=n.split("|");t.removeDocumentConnection(e,o,i)}))},removeDocumentConnection:function(t,n,o,r){const u=e.is(o)?o:S;return i.removeConnection(u+"|"+t+"|"+n,r)},getDocumentID:function(n,i){var o;i=i||{},o=e.merge({url:C+"?irpcPID="+n,method:"GET",onComplete:function(t){v.debug("Get document information is succeeded."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Get document information is failed due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),t.webServiceRequest(o)},linkWithDocumentID:function(n,i,o){var r,u={pid:n,myDocumentPID:i,isVPLMControlled:"true"};o=o||{},r=e.merge({url:C,method:"POST",data:e.Json.encode(u),onComplete:function(t){v.debug("Linking document with IRPC is succeeded."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Linking document with IRPC is failed due to :  "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),t.webServiceRequest(r)},deleteLink:function(n,i,o){var r,u={pid:n,myDocumentPID:i};o=o||{},r=e.merge({url:C,method:"DELETE",data:e.Json.encode(u),onComplete:function(t){v.debug("Delete link between IRPC and Document is succeeded."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Delete link between IRPC and Document is failed due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),t.webServiceRequest(r)},getDocumentInfo:function(n,i){var o,r=function(t){v.debug("Get document inforation is succeeded."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)};i=i||{},o=e.merge(u(),i),o=e.merge({securityContext:t.getSecurityContext(),onComplete:r,onFailure:function(t){v.debug("Get document inforation is failed due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},o),Array.isArray(n)||(n=[n]),n.length>0?a(n,o):r({data:[]})},attachFile:function(t,n,i){var o;(t=t||{}).fileInfo=n,i=i||{},o=e.merge(u(),i),o=e.merge({onComplete:function(t){v.debug("File successfully created."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Unable to attach file due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},o),s(t,0,o)},modifyFile:function(n,i,o){var r;(n=n||{}).fileInfo=i,o=o||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){v.debug("File successfully modifed."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Unable to modify file due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),c(n,0,r)},fetchFileURL:function(n,i,o){var r;o=o||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){v.debug("File URL successfully fetched.."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Unble to fetch File URL due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),l(n,i,r)},downloadFile:function(n,i,o){var r;o=o||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){p(t),v.debug("Files successfully downloaded.."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Unble to download files due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),l(n,i,r)},removeFile:function(n,i,o){var r;o=o||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){v.debug("File successfully modifed."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Unable to modify file due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),d(n,i,r)},downloadDocuments:function(n,i){var o,r,u;i=i||{},n=e.is(n,"array")?n:[n],o=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){for(r=0;r<t.length;r++)u=t[r].downloadUrl,p(u);v.debug("Files successfully downloaded.."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Unble to download files due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),g(n,o)},deleteDocument:function(n,i){var o;i=i||{},o=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){v.debug("Document successfully deleted.."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("unable to delete document due to"+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),m(n,o)}}}})),define("DS/DELPPWModelPlugins/InterWidgetComPlugin",["UWA/Core"],(function(e){"use strict";return function(t){const n="DELOER_AP",i="DELOERC_AP";var o,r,u,a="InterWidgetComPlugin",s=t.getLogger(),c=null,l=t.getConfig().widgetLinkOpts;return u=function(){return e.is(o)||(o=t.getPlugins("PlatformPlugin").instance),o},r=function(t){const n=parent.require;window.__karma__?(s.debug(a,"We are in karma test environment, thus preventing the use of WidgetLink."),t()):n(["DS/WidgetLink/WidgetLink"],(function(n){e.is(n)&&(l=l||{},(c=n.get(widget)).setLinkability(l)),t()}),(function(){s.debug(a,'ERROR couldnt fetch "DS/WidgetLink/WidgetLink"'),t()}))},{name:a,onStart:function(e){r(e)},onStop:function(){},getComLink:function(){return c},addEventListener:function(t,n){var i=this.getComLink();e.is(i)&&e.is(t,"string")&&e.is(n,"function")?i.addEventListener(t,n):s.debug(a,"ERROR couldnt addEventListener to widgetLink")},subscribeEvent:function(t,n){var i=this.getComLink();e.is(i)&&e.is(t,"string")&&e.is(n,"function")?i.subscribe(t,n):s.debug(a,"ERROR couldnt subscribeEvent from widgetLink")},publishEvent:function(t,n){var i=this.getComLink();e.is(i)&&e.is(t,"string")?i.publish(t,n):s.debug(a,"ERROR couldnt publishEvent to widgetLink")},isWidgetLinked:function(t){var n,i,o=!1;return n=this.getComLink(),e.is(n)&&(i=n.getLinked())&&i.length>0&&(o=i.some((e=>e.appId===t))),o},isOpsViewerWidgetLinked:function(){var e;return e=u().isCloud()?i:n,this.isWidgetLinked(e)},getOpViewerWidgetAppId:function(){return u().isCloud()?i:n},isCloud:function(){return u().isCloud()}}}})),define("DS/DELPPWModelPlugins/BatchCmdPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils"],(function(e,t){"use strict";return function(n){return{name:"BatchCmdPlugin",onStart:function(){},onStop:function(){},getTicket:function(){return new Promise((function(e,n){let i={url:t.getServiceUrl("3DSpace")+"ticket/get?maxuse=1",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:e,onFailure:n};t.webServiceRequest(i)}))},getRemoteBatchMachineInfos:function(){return new Promise((function(e,n){let i={url:"dsmfg/private/V0/invoke/delmodeler/getRemoteBatchMachines",method:"GET",onComplete:e,onFailure:n};t.webServiceRequest(i)}))},queryJobsInfo:function(n){return new Promise((function(i,o){let r={url:"dsmfg/private/V0/invoke/delmodeler/queryJobs",method:"POST",data:e.Json.encode(n),onComplete:i,onFailure:o};t.webServiceRequest(r)}))},saveJob:function(n){return new Promise((function(i,o){let r={url:"dsmfg/private/V0/invoke/delmodeler/saveJob",method:"POST",data:e.Json.encode(n),onComplete:i,onFailure:o};t.webServiceRequest(r)}))}}}})),define("DS/DELPPWModelPlugins/ReplaceWhereUsedPlugin",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],(function(e,t){"use strict";return function(){return{name:"ReplaceWhereUsedPlugin",RWUStatus:{Replace_By_Existing:{value:1},Replace_By_NewRev:{value:2},Replace_By_NewBranch:{value:3},Remove:{value:5},Ignore:{value:4},Add:{value:6},NoAction:{value:7},RefActionDefinedByUsage:{value:8},RefOnlyRev:{value:9},RefOnlyBranch:{value:10}},_initComboBox:function(e,n,i){var o=new Map;return i?(o.set(this.RWUStatus.NoAction.value,{labelItem:t.getNLSValue("RWU.Action.NoAction"),valueItem:this.RWUStatus.NoAction.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.NoAction",{obj1:e})}),o.set(this.RWUStatus.RefActionDefinedByUsage.value,{labelItem:t.getNLSValue("RWU.Action.RefActionDefinedByUsage"),valueItem:this.RWUStatus.RefActionDefinedByUsage.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.RefActionDefinedByUsage",{obj1:e})}),o.set(this.RWUStatus.RefOnlyRev.value,{labelItem:t.getNLSValue("RWU.Action.RefOnlyRev"),valueItem:this.RWUStatus.RefOnlyRev.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.RefOnlyRev",{obj1:e})}),o.set(this.RWUStatus.RefOnlyBranch.value,{labelItem:t.getNLSValue("RWU.Action.RefOnlyBranch"),valueItem:this.RWUStatus.RefOnlyBranch.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.RefOnlyBranch",{obj1:e})})):n?(o.set(this.RWUStatus.Ignore.value,{labelItem:t.getNLSValue("RWU.Action.Ignore"),valueItem:this.RWUStatus.Ignore.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.Ignore",{obj1:e})}),o.set(this.RWUStatus.Add.value,{labelItem:t.getNLSValue("RWU.Action.Add"),valueItem:this.RWUStatus.Add.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.Add",{obj1:e})})):(o.set(this.RWUStatus.Replace_By_Existing.value,{labelItem:t.getNLSValue("RWU.Action.ReplacedByExisting"),valueItem:this.RWUStatus.Replace_By_Existing.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.ReplacedByExisting",{obj1:e})}),o.set(this.RWUStatus.Replace_By_NewRev.value,{labelItem:t.getNLSValue("RWU.Action.ReplacedByNewRev"),valueItem:this.RWUStatus.Replace_By_NewRev.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.ReplacedByNewRev",{obj1:e})}),o.set(this.RWUStatus.Replace_By_NewBranch.value,{labelItem:t.getNLSValue("RWU.Action.ReplacedByNewBranch"),valueItem:this.RWUStatus.Replace_By_NewBranch.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.ReplacedByNewBranch",{obj1:e})}),o.set(this.RWUStatus.Remove.value,{labelItem:t.getNLSValue("RWU.Action.Remove"),valueItem:this.RWUStatus.Remove.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.Remove",{obj1:e})}),o.set(this.RWUStatus.Ignore.value,{labelItem:t.getNLSValue("RWU.Action.Ignore"),valueItem:this.RWUStatus.Ignore.value,tooltipItem:t.getNLSValue("RWU.ActionTooltip.Ignore",{obj1:e})})),o},getDefaultAction:function(t,n,i,o,r,u,a){var s,c;if(i)if(e.is(u))s=u[0].options.grid.RWU_Action_Reference.id,c=u[0].options.grid.RWU_Action_Reference;else if(r)switch(t){case"FROZEN":case"OBSOLETE":case"RELEASED":s=n.get(9).valueItem,c={value:n.get(9).tooltipItem,label:n.get(9).labelItem,id:n.get(9).valueItem,getLabel:function(){return this.label}};break;case"IN_WORK":case"PRIVATE":s=n.get(7).valueItem,c={value:n.get(7).tooltipItem,label:n.get(7).labelItem,id:n.get(7).valueItem,getLabel:function(){return this.label}};break;default:s=n.get(7).valueItem,c={value:n.get(7).tooltipItem,label:n.get(7).labelItem,tooltip:n.get(7).tooltipItem,id:n.get(7).valueItem,getLabel:function(){return this.label}}}else s=n.get(7).valueItem,c={value:n.get(7).tooltipItem,label:n.get(7).labelItem,id:n.get(7).valueItem,getLabel:function(){return this.label}};else if(e.is(u)&&u.forEach((function(e){e.options.childInstancePID===a&&(s=e.options.grid.RWU_Action_Instance.id,c=e.options.grid.RWU_Action_Instance)})),!e.is(s)&&!e.is(c))if(r)if(o)s=n.get(6).valueItem,c={value:n.get(6).tooltipItem,label:n.get(6).labelItem,id:n.get(6).valueItem,getLabel:function(){return this.label}};else switch(t){case"FROZEN":case"PRIVATE":case"OBSOLETE":s=n.get(1).valueItem,c={value:n.get(1).tooltipItem,label:n.get(1).labelItem,id:n.get(1).valueItem,getLabel:function(){return this.label}};break;case"IN_WORK":case"RELEASED":s=n.get(2).valueItem,c={value:n.get(2).tooltipItem,label:n.get(2).labelItem,id:n.get(2).valueItem,getLabel:function(){return this.label}};break;default:s=n.get(4).valueItem,c={value:n.get(4).tooltipItem,label:n.get(4).labelItem,id:n.get(4).valueItem,getLabel:function(){return this.label}}}else s=n.get(4).valueItem,c={value:n.get(4).tooltipItem,label:n.get(4).labelItem,id:n.get(4).valueItem,getLabel:function(){return this.label}};return[s,c]},buildGrid:function(n,i,o,r,u,a){var s=n.attributes;return s.isRWU=!0,s.RWU_Action_Instance=i?o[1]:null,s.RWU_Action_Reference=i?r[1]:null,s.RWU_Instance_Status="",s.RWU_Reference_Status="",s["RWU_PLM_ExternalID.instance"]=n.PLMExternalInstanceID,s["revision.reference"]=n.revision,s["current.reference"]=n.current,s.currentFullName=n.currentFullName,s.RWU_Replace=n.reroutingProposal,s.RWU_ReplacePID=n.RWUReplacePID,s.referencePID=n.referencePID,s.instancePID=n.instancePID,s.PID=n.PID,s.V_TreeOrder=n.vTreeOrder,s.referenceType=n.type,s.childType=n.childType,s.cellInfo={mbomId:n.PID,instanceAction:o[0],referenceAction:r[0],suggestionToPerformEntries:i&&e.is(u)?Array.from(u.values()):null,suggestionToPerformRefEntries:i&&e.is(a)?Array.from(a.values()):null,PreviousProdIconUrl:"",MfgItemIconUrl:t.getIconURLFromKey(n.type),isLeaf:i,RWU_Replace:n.reroutingProposal},s},getRWUNodeOptions:function(n){var i=null,o=this._initComboBox(n.childV_Name+"."+n.childRevision,n.isCreated,!1),r=this._initComboBox(n.V_Name,n.isCreated,!0),u=e.is(n.isLeaf)&&n.isLeaf,a=this.getDefaultAction(n.childCurrentFullName,o,!1,n.isCreated,n.isComboboxDisplayable,n.nodes,n.childInstancePID),s=this.getDefaultAction(n.currentFullName,r,!0,n.isCreated,n.isComboboxDisplayable,n.nodes,n.childInstancePID),c=this.buildGrid(n,u,a,s,o,r);return e.is(n)&&(i={label:n.label,V_Name:n.V_Name,childV_Name:n.childV_Name,icons:[t.getIconURLFromKey(n.type)],useAsyncPreExpand:!0,children:[],PID:n.PD,referencePID:n.referencePID,instancePID:n.instancePID,referenceType:n.type,defaultMILSuggestionValue:a[0],isLeaf:u,isCreated:n.isCreated,current:n.currentFullName,loadRootOnly:!u,suggestionsLinkedMap:o,suggestionsRefLinkedMap:r,selectedRWUAction:a[1],selectedRWUReferenceAction:s[1],instanceAction:a[0],referenceAction:s[0],childReferencePID:n.childReferencePID,childInstancePID:n.childInstancePID,childType:n.childType,childCurrentFullName:n.childCurrentFullName,childRevision:n.childRevision,newchildRevision:n.childRevision,revision:n.revision,newRevision:n.revision,vTreeOrder:n.vTreeOrder,parentReferencePID:n.parentReferencePID,parentInstancePID:n.parentInstancePID,parentNodes:e.is(n.parentNodes)?n.parentNodes:[],alreadyExpanded:!1,expanded:!0,reroutingProposal:n.reroutingProposal,isComboboxDisplayable:n.isComboboxDisplayable,attributes:n.attributes,attributesChanged:new Map,grid:c}),i}}}})),define("DS/DELPPWModelPlugins/ModelObserverPlugin",["UWA/Core","UWA/Utils","DS/DELPPWModelServices/CollectionUtils"],(function(e,t,n){"use strict";return function(i){var o,r,u=i.getLogger(),a=function(t){Object.keys(r).forEach((n=>{e.is(r[n],"function")&&r[n](t)}))};return{name:"ModelObserverPlugin",onStart:function(){r={},o=n.subscribeToModelChanges(a)},onStop:function(){r=null,n.unSubscribeToModelChanges(o)},subscribeToModelChanges:function(n){var i;return e.is(n,"function")?(i=t.getUUID(),r[i]=n):u.debug("ModelObserverPlugin::subscribeToModelChanges expected first argument to be function"),i},unSubscribeToModelChanges:function(t){e.is(r[t])&&delete r[t]}}}}));