define("DS/ENOChgServices/scripts/services/ChgLocalStorage",[],(function(){"use strict";return{_appKey:void 0,_prefStructure:void 0,_contextUser:void 0,initialize:function(e){var t;(this._appKey=e.appKey,this._prefStructure=e.prefStructure,this._contextUser=e.contextUser,window.localStorage.getItem(this._appKey))?(t=JSON.parse(window.localStorage.getItem(this._appKey))).hasOwnProperty(this._contextUser)||(t[this._contextUser]=this._prefStructure,window.localStorage.setItem(this._appKey,JSON.stringify(t))):((t={})[this._contextUser]=this._prefStructure,window.localStorage.setItem(this._appKey,JSON.stringify(t)))},destroy:function(){window.localStorage.removeItem(this._appKey)},getLocalStorageValue:function(e){try{if(window.localStorage.getItem(this._appKey)){var t=JSON.parse(window.localStorage.getItem(this._appKey));return t.hasOwnProperty(this._contextUser)?t[this._contextUser][this._appKey][e]:void 0}return}catch(e){return void console.error(e)}},updateLocalStorageValue:function(e,t){try{if(window.localStorage.getItem(this._appKey)){var a=JSON.parse(window.localStorage.getItem(this._appKey));a.hasOwnProperty(this._contextUser)&&(a[this._contextUser][this._appKey][e]=t,window.localStorage.setItem(this._appKey,JSON.stringify(a)))}}catch(e){console.error(e)}}}})),define("DS/ENOChgServices/scripts/services/ChgWidgetPreferencesManager",[],(function(){"use strict";return{_appKey:void 0,_prefStructure:void 0,initialize:function(e){this._appKey=e.appKey,this._prefStructure=e.prefStructure,widget.getValue(this._appKey)||widget.setValue(this._appKey,JSON.stringify(this._prefStructure))},updateWidgetPreference:function(e,t){try{var a=widget.getValue(this._appKey);if(a){var n=JSON.parse(a);n[this._appKey][e]=t,widget.setValue(this._appKey,JSON.stringify(n))}}catch(e){console.error(e)}},getWidgetPreference:function(e){try{var t=widget.getValue(this._appKey);return t?JSON.parse(t)[this._appKey][e]:void 0}catch(e){return void console.error(e)}}}})),define("DS/ENOChgServices/scripts/components/ChgCommonSelectDailog",["UWA/Class/View","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button"],(function(e,t,a,n){"use strict";return{launchInfoDailog:function(e){var i=this;console.log("Inside launchInfoDailog >>>>>>>>>>>>>> "+e);var r=e.title,o=e.content,s=e.target;this.buttons=[],e.buttonArray.forEach((function(e){var t=new n({label:e.label,className:e.className,onClick:function(t){e.handler()}});i.buttons.push(t)})),this.immersiveFrame=new t({}),this.myDialog=new a({id:"myinfoDialogId",class:"myinfoclass",immersiveFrame:this.immersiveFrame,title:r,content:o,resizableFlag:!1,modalFlag:!0,height:100,width:400,buttons:{Yes:this.buttons[0],No:this.buttons[1]}}),this.myDialog.addEventListener("close",(function(){i.closeDialog()})),this.immersiveFrame.inject(s)},closeDialog:function(){this.myDialog.destroy(),this.immersiveFrame.destroy()}}})),define("DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable",["UWA/Class"],(function(e){"use strict";var t=e.singleton({getIconMap:function(){return this.iconMap},setIconMap:function(e){this.iconMap=e},getPreviewURLArray:function(){return this.previewURLArray},setPreviewURLArray:function(e){this.previewURLArray=e},getGlobalVariable:function(){return this.enoviaCAGlobalVariable||this.setGlobalVariable(),this.enoviaCAGlobalVariable},setGlobalVariable:function(){this.enoviaCAGlobalVariable={CHGUserPreference:[],serviceName:"3DSpace",tenantMappings:void 0,baseURL:"",swymURL:"",compassURL:"",InterCom:UWA.Utils.InterCom,compassSocket:null,prefIntercomServer:null,compassSocketName:"",prefSocketName:"",arrOid:[],timezone:(new Date).getTimezoneOffset(),wsCallTimeout:12e6,mySecurityContext:"",proxy:window.UWA.Data.proxies.passport?"passport":"ajax",myRole:"",contextUser:"",isNative:!1,isPoweredBy:null,is3DSpace:!1,fromIDCard:!1,referentialsSearchType:"",contextSearchType:"",proposedSearchType:"",datamodel:"new",project_space:"",organization:"",mySkeleton:null,PropWidget:null,NamePref:"Title",ViewPref:"Grid",UXPref:"New",lastSelectedInfoType:"",frameWorkName:"ENOChangeActionUX",TaggerInNative:!0,TriggerCustomeUpdate:!0,CHG_FLOWDOWN:"false",CHG_CHANGE_MATURITY:"false",CHG_CHANGE_SUMMARY_GRID:"false",CHG_OPEN_WITH_COLLAB:"false",CHG_CREATE_CA_AUTO_PROMOTE:"false",CHG_OPENWITH:"false",CHG_CA_VIEWS_ENHANCEMENT:"false",CHG_CHANGE_GROUP:"false",CHG_TRANSFER_REALIZED_CUST_TYPE:"false",CHG_CHANGE_REQUEST:"true",CHG_APPROVAL_COLUMN:"true",CHG_IA_CUSTOM_VIEW:"true",CHG_IA_COLUMN_ASSESSMENT:"true",CHG_NATIVE_BREADCRUMB:"false",ECMEnableDefaultChangeAnalysis:"false",CHG_OLD_CA_CREATE:"false",CHG_ChangeImpact_IR_RolledUP:"false",CHG_ChangeImpact_IR_MassUpdate:"false",indexMode:"true",indexCRMode:"true",isChangeAvailable:!1,supportedOperationMap:new Object,slidePanelTagger:"false",CHG_EnableNonChangeGovernedToCA:"true",CHG_INVESTIGATION_REQUEST:"true",isFullLicence:"false",isLiteLicence:"false",isDerivativeLicense:"false",ECM_SearchRouteTemplateEnforcementForCA:"false",ECM_EnableRouteTemplateEnforcementForCA:"false",ECM_EnableChangeImpactsEnforcementForCR:"false",ECM_EnableExploreInCollabNApprovalForNative:"false",ECM_EnableAddMemberGenericComponent:"false",ECMEnableChangeAnalysisActivity_InWork:"false",CHGRefreshProposedForFlowdownChanges:"false",get3DSpaceURL:function(){return this.baseURL},getSwymURL:function(){return this.swymURL},getCompassURL:function(){return this.compassURL},computeUrl:function(e){return this.get3DSpaceURL()+e},computeSwymUrl:function(e){return this.getSwymURL()+e},getSecurityContext:function(){return this.mySecurityContext},getRole:function(){return this.myRole},collabspace:"",tenant:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",tenantnls:"",existingCAIds:null,existingCOIds:[],newlyAssignCAIds:null,changeActionSubTypePresent:!1,changeAnalysisSubTypePresent:!1,changeOrderSubTypePresent:!1,changeRequestSubTypePresent:!1,subTypePresent:!1,subTypes:null,changeActionSubTypes:null,changeAnalysisSubTypes:null,changeOrderSubTypes:null,changeRequestSubTypes:null,changeActionCustomColumns:void 0,changeAnalysisCustomColumns:void 0,changeOrderCustomColumns:void 0,changeRequestCustomColumns:void 0,ENO_CSRF_TOKEN:"",compassWindow:window.parent,Enable_TileView_Native:!1}}});return t})),define("DS/ENOChgServices/scripts/services/ChgErrors",["DS/UIKIT/Alert"],(function(e){"use strict";return{error:function(e,t){this.message(e,"error",t)},message:function(t,a,n){null!=this.alertCA&&(this.alertCA.hide(),this.alertCA.destroy());var i=!0;("error"==a||n&&"false"===n)&&(i=!1),this.alertCA=new e({closable:!0,visible:!0,autoHide:i,hideDelay:5e3,className:"wp-alert"}).inject(document.body,"top"),this.alertCA.add({className:a,message:t})},success:function(e,t){this.message(e,"success",t)},warn:function(e,t){this.message(e,"warning",t)},info:function(e,t){this.message(e,"primary",t)}}})),define("DS/ENOChgServices/scripts/services/ChgInfodialog",["UWA/Class/View","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button"],(function(e,t,a,n){"use strict";return{launchInfoDailog:function(e){var i=e.title,r=e.content;r="<span class='fonticon fonticon-wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-attention iconAlert' style = 'font-size: large'></span> "+r,this.buttons=[];var o=this;e.buttonArray.forEach((function(e){var t=new n({label:e.label,className:e.className,onClick:function(t){e.handler()}});o.buttons.push(t)})),this.immersiveFrame=new t({}),this.myDialog=new a({id:"myinfo",class:"myinfoclass",immersiveFrame:this.immersiveFrame,title:i,content:r,activeFlag:!1,resizableFlag:!0,height:150,width:400,buttons:{Yes:this.buttons[0],No:this.buttons[1]}}),this.immersiveFrame.inject(widget.body),this.myDialog.addEventListener("close",(function(e){o.immersiveFrame.remove()}))},closeDialog:function(){this.myDialog.close()}}})),define("DS/ENOChgServices/scripts/components/ChgCommonDailog",["DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/Editor","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/UIKIT/Mask"],(function(e,t,a,n,i,r){"use strict";return{launchInfoDailog:function(r){var o=r.boxTitle,s=(r.subTitle,r.btnId),l=(r.chgPhysicalId,r.chgType);this.buttons=[];var c,d=this,u=[{label:i.CHG_Done_Button_Label,handler:r.DoneCallback,className:"primary",disabled:"true"},{label:i.CHG_CANCEL_Button_Label,handler:r.CancelCallback,className:"default"}],p="";u.forEach((function(e){if(console.log("Dialog IN"),"InvestigationRequest"!=l||"Define"!=s&&"Assess"!=s&&"ProvisionalClose"!=s&&"PermanentClose"!=s){t=new a({label:e.label,className:e.className,disabled:e.disabled,onClick:function(a){if(t&&i.CHG_Done_Button_Label==t.label){var n={chgPhysicalId:r.chgPhysicalId,btnId:s,chgType:l,userComment:c.value};e.handler(n)}else e.handler(s)}});c=new n({placeholder:r.txtPlaceHolder,requiredFlag:!0,widthInCharNumber:80,nbRows:3,newLineMode:"enter"})}else{var t=new a({label:e.label,className:e.className,onClick:function(a){if(t&&i.CHG_Done_Button_Label==t.label){var n={chgPhysicalId:r.chgPhysicalId,btnId:s,chgType:l,userComment:c.value};e.handler(n)}else e.handler(s)}});c=new n({placeholder:r.txtPlaceHolder,widthInCharNumber:80,nbRows:3,newLineMode:"enter"})}d.buttons.push(t),t&&i.CHG_Done_Button_Label==t.label&&(p=t)}));var f=new e({}),g=new UWA.Element("div");g.id="contentDiv";var m=new UWA.Element("div");m.id="divheader";var h=new UWA.Element("label");h.setText(r.subTitle),h.inject(m),c.addEventListener("change",(function(e){p&&(c.value?p.disabled=!1:p.disabled=!0)})),c.addEventListener("uncommittedChange",(function(){p&&(""!=c.valueToCommit.trim()?p.disabled=!1:p.disabled=!0)}));var v=new UWA.Element("div");v.id="divEditor",c.inject(v),g.appendChild(m),g.appendChild(v),this.CAUpdateDialog=new t({id:"updateCA",immersiveFrame:f,title:o,content:g,activeFlag:!1,resizableFlag:!0,height:160,width:470,buttons:{Yes:this.buttons[0],No:this.buttons[1]},modalFlag:!0}),f.inject(widget.body),this.CAUpdateDialog.addEventListener("close",(function(e){d.CAUpdateDialog.immersiveFrame.remove()}))},closeDialog:function(){this.CAUpdateDialog.close()}}})),define("DS/ENOChgServices/scripts/components/ChgCommonCreateDialog",["DS/Controls/Button","DS/Controls/Editor","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","css!DS/ENOChgServices/ENOChgServices"],(function(e,t,a,n){"use strict";return{launchCreateChangeOrderDialog:function(i){this.buttons=[];var r=this,o="";i.buttonArray.forEach((function(t){var a=new e({label:t.label,className:t.className,disabled:t.disabled,checkFlag:t.checkFlag,onClick:function(e){var a={titleText:s.value,DescText:l.value};t.handler(a)}});0==r.buttons.length?(a.value="Primary",r.buttons.push(a)):r.buttons.push(a),a&&"Primary"==a.value&&(o=a)}));var s=new t({placeholder:i.TitlePlaceHolder,requiredFlag:!0,widthInCharNumber:80,nbRows:1,newLineMode:"enter"}),l=new t({placeholder:i.DescriptionPlaceHolder,requiredFlag:!1,widthInCharNumber:80,nbRows:3,newLineMode:"enter"});s.addEventListener("change",(function(e){o&&(s.value?o.disabled=!1:o.disabled=!0)})),s.addEventListener("uncommittedChange",(function(){o&&(""!=s.valueToCommit?o.disabled=!1:o.disabled=!0)}));var c=new a({}),d=new UWA.Element("div");d.id="commonContentDiv";var u=new UWA.Element("label");u.setText(i.TitleLabel);var p=new UWA.Element("label");p.setText(i.DescriptionLabel);var f=new UWA.createElement("div",{id:"Titlecontainer"}),g=new UWA.createElement("div",{id:"DescrContainer"});f.appendChild(u),s.inject(f),g.appendChild(p),l.inject(g),f.inject(d),g.inject(d),this.CAUpdateDialog=new n({id:"updateCA",immersiveFrame:c,title:i.boxTitle,content:d,activeFlag:!1,resizableFlag:!0,modalFlag:!0,height:240,width:470,buttons:{Yes:this.buttons[0],No:this.buttons[1]}}),c.inject(widget.body)},closeDialog:function(){this.CAUpdateDialog.close()}}})),define("DS/ENOChgServices/scripts/services/DefaultPreferencesManager",["UWA/Class"],(function(e){"use strict";return{preferences:{CA_DEF_TYPE:"Change Action",CO_DEF_TYPE:"Change Order",CR_DEF_TYPE:"Change Request",IA_DEF_TYPE:"Change Analysis",IR_DEF_TYPE:"Investigation Request",PROPOSED_DEF_VIEW:"DGV",REALIZED_DEF_VIEW:"DGV",CI_VIEW:"Investigation"},keys:{createKeys:{CA_DEF_TYPE:"CA_DEF_TYPE",CO_DEF_TYPE:"CO_DEF_TYPE",CR_DEF_TYPE:"CR_DEF_TYPE",IA_DEF_TYPE:"IA_DEF_TYPE",IR_DEF_TYPE:"IR_DEF_TYPE"},viewKeys:{PROPOSED_DEF_VIEW:"PROPOSED_DEF_VIEW",REALIZED_DEF_VIEW:"REALIZED_DEF_VIEW"},viewKeysForIR:{CI_VIEW:"CI_VIEW"}}}})),define("DS/ENOChgServices/scripts/services/ChgPropertiesServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/EditPropWidget/EditPropComponent","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/PlatformAPI/PlatformAPI","require"],(function(e,t,a,n,i,r,o,s){"use strict";var l={createPropertiesComponent:function(e,r){var s="";!0===r&&(s="businessobject"),this.caEditComp=new a({typeOfDisplay:n.ALL,selectionType:n.ALL_SELECTION,displayType:n.POPUP,setCloseButton:!1,readOnly:this.getPropertyAccess(),extraNotif:!1,editMode:!1,appId:widget.getValue("appId")});var l=[];if(Array.isArray(e))l=e.map((e=>{var a,n=new i({tenant:t.getGlobalVariable().tenant,objectId:e,metatype:s});return n.addEvent("onChangeAttributes",(function(e,t){a=e})),n.addEvent("onSave",(function(){o.publish("CO-Properties-Update",a)})),n}));else{var c,d=e,u=new i({tenant:t.getGlobalVariable().tenant,objectId:d,metatype:s});u.addEvent("onChangeAttributes",(function(e,t){c=e})),u.addEvent("onSave",(function(){o.publish("CO-Properties-Update",c)})),l.push(u)}this.caEditComp.show(l)},getPropertyAccess:function(){return"ChangeOrder"==t.getGlobalVariable().lastSelectedInfoType&&"false"==t.getGlobalVariable().isFullLicence},getPropertiesComponent:function(){return this.caEditComp},createPropertyPushItem:function(e,t){return{type:"PushItem",title:r.CHG_Properties_Menu,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-info-open-in-a-new-window"},action:{callback:function(){s(["DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil"],(function(e){e.createProbesData("Information")}));for(let a of e)a.contains("cid:")&&(t=!0);l.createPropertiesComponent(e,t)}}}}};return l})),define("DS/ENOChgServices/scripts/services/ChgApplicabilityServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t){return{getApplicabilityExpression:function(e){"use strict";var t=!1;if(e&&""===e.expressionXML)t=!0;else if(e&&""!=e.expressionXML){var a=(new DOMParser).parseFromString(e.expressionXML,"text/xml").getElementsByTagName("Expression");if(a.length>0){for(var n=[],i=a[0].getElementsByTagName("Context"),r=0;r<i.length;r++){var o=i[r];if(o){var s=o.textContent;"false"===s&&n.push(s)}}i.length===n.length&&(t=!0)}}return t},refreshApplicabilityView:function(e){require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],(function(a){for(var n=document.querySelector("#FacetDivForApplicabilityContext");n&&n.hasChildNodes();)n.removeChild(n.lastChild);var i=t.getGlobalVariable().isNative?"Native":"Dashboard",r={mode:"Applicability",objectid:e.replace("pid:",""),parent:n,environment:i};r.tenant=t.getGlobalVariable().tenant,r.parent&&a.create(r)}))}}})),define("DS/ENOChgServices/scripts/services/ChgApplicationPreferencesManager",["UWA/Class","DS/ENOChgServices/scripts/services/ChgLocalStorage","DS/ENOChgServices/scripts/services/ChgWidgetPreferencesManager","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,a,n){"use strict";return e.singleton({init:function(){var e=n.getGlobalVariable();this.contextUser=e.contextUser},initialize:function(e,n,i,r){var o={};o.appKey=e,o.prefStructure=n,o.contextUser=this.contextUser,this._withWidgetPreferences=i,this._withLocalStorage=r,i&&a.initialize(o),r&&t.initialize(o)},updatePreference:function(e,n){this._withWidgetPreferences&&a.updateWidgetPreference(e,n),this._withLocalStorage&&t.updateLocalStorageValue(e,n)},getPreference:function(e){return this._withWidgetPreferences&&null!=a.getWidgetPreference(e)?a.getWidgetPreference(e):this._withLocalStorage?t.getLocalStorageValue(e):void 0}})})),define("DS/ENOChgServices/scripts/services/ChgNativeInitService",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e){"use strict";return{DispatchEventToWin:function(t,a){if(e.getGlobalVariable().isNative||"Work_Under"==t&&e.getGlobalVariable().isPoweredBy){var n=window.dscef;void 0!==n?"function"==typeof n.sendString&&n.sendString(t+"="+a):"undefined"!=typeof CATCefSendString&&CATCefSendString(t+"="+a)}},getWebInWinParameters:function(t){window.COMPASS_CONFIG&&window.COMPASS_CONFIG.myAppsBaseUrl?t(window.COMPASS_CONFIG):this.getMyappsUrl((function(a){window.COMPASS_CONFIG||(window.COMPASS_CONFIG={}),a&&(window.COMPASS_CONFIG.myAppsBaseUrl=a,window.COMPASS_CONFIG.userId||(window.COMPASS_CONFIG.userId=e.getGlobalVariable().contextUser),window.COMPASS_CONFIG.lang||(window.COMPASS_CONFIG.lang=widget.lang)),t(window.COMPASS_CONFIG)}))},getMyappsUrl:function(e){this.isNatifEnvironnement()&&"function"==typeof dscef.getMyAppsURL?dscef.getMyAppsURL().then((function(t){console.log("MyApps URL",t),e.call(null,t)})).catch((function(t){console.error("Failed to fetch MyApps URL: "+t),e.call(null,null)})):e.call(null,null)},isNatifEnvironnement:function(){return"undefined"!=typeof dscef},takeOffFromWorkUnder:function(){this.DispatchEventToWin("Work_Under","FALSE")}}})),define("DS/ENOChgServices/scripts/services/UserPreferenceUtil",["UWA/Class","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t){"use strict";var a=e.singleton({initialize:function(e){this.prefix=e.prefix,this.storage=e.storage,this.storageProperty=this.prefix+"UserPreference"},fetchUserPreference:async function(e){return new Promise((function(n,i){let r="/resources/v1/chguxservices/connectedChange/getUserPreference?prefix="+a.prefix;var o=function(i){let r=e;for(const t in e)if(i.data[0])if(r=i.data[0],r.hasOwnProperty(t)){let a=r[t];null!=a&&""!==a||(r[t]=e[t])}else r[t]=e[t];let o=widget.getValue("CHGUserPreferences");var s=t.getGlobalVariable();if(!widget||s.is3DSpace||s.isNative)a.storage[a.storageProperty]=r,n(r);else try{o&&""!=o&&"[]"!=o?(r=JSON.parse(o),a.storage[a.storageProperty]=r,n(r)):(a.storage[a.storageProperty]=e,n(e))}catch(e){console.log("parsing failed while restoring widget preferences")}},s=function(t){console.log("Error in fetching user preference"+t),a.storage[a.storageProperty]=e,n(e)};require(["DS/ENOChgServices/scripts/services/ChgInfraService"],(function(e){e.makeWSCallWithCSRF(r,"GET","enovia","application/json","",o,s,!1)}))}))},getUserPreferences:function(){return a.storage[a.storageProperty]},getUserPreference:function(e){return a.storage[a.storageProperty][e]},saveUserPreference:function(e){Object.keys(e).forEach((function(t){let n=e[t];console.log(`Key: ${t}, Value: ${n}`),a.storage[a.storageProperty][t]=n}));var n=t.getGlobalVariable();if(!widget||n.is3DSpace||n.isNative)return console.log("inputJson----\x3e"+e),new Promise((function(t,n){let i="/resources/v1/chguxservices/connectedChange/saveUserPreference?prefix="+a.prefix,r=[];r.push(e);let o={data:r};o=JSON.stringify(o);var s=function(e){t(e)};require(["DS/ENOChgServices/scripts/services/ChgInfraService"],(function(e){e.makeWSCallWithCSRF(i,"POST","enovia","application/json",o,s,n,!1)}))}));widget.setValue("CHGUserPreferences",JSON.stringify(a.storage[a.storageProperty]))}});return a})),define("DS/ENOChgServices/scripts/services/ChgInfraService",["DS/Foundation/WidgetUwaUtils","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/WAFData/WAFData","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Dropdown","DS/ENOXWidgetPreferences/js/ENOXWidgetPreferences","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","require"],(function(e,t,a,n,i,r,o,s,l,c,d,u,p,f,g,m,h,v,y){"use strict";var C={URL:null,_SCPreferred:null,_theListSC:null,_theListSC_NLS:null,_SCPreferredDB:null,init:function(){e.setupEnoviaServer(),this.caGlobalObject=s.getGlobalVariable(),this.caGlobalObject||(s.setGlobalVariable(),this.caGlobalObject=s.getGlobalVariable()),this.caGlobalObject.isPoweredBy=this.IsPoweredBy(),this.caGlobalObject.nativeURL=document.location.href},setInfraValue:function(){var e=this;return new Promise((async function(t,a){if(!widget.id){var n=Math.random();n.toString(36);var i=n.toString(36).substr(2,9);widget.id="ChangeMgt"+i,widget.setValue("x3dSharedId",widget.id),widget.setValue("appId","ENONCHA_AP"),widget.setValue("x3dAppId","ENONCHA_AP")}window.enoviaServer.widgetName="ChangeActionManagement",window.enoviaServer.widgetId=window.widget.id,window.enoviaServer.tenant=widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",e.caGlobalObject.tenant=widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise";var r="wdg_"+(new Date).getTime();if(e.setupIntercomConnections.call(e,widget,e.caGlobalObject,r),"undefined"==typeof dscef||e.caGlobalObject.isPoweredBy){var l=o.getUser();l&&(e.caGlobalObject.contextUser=l.login),C.populate3DSpaceURL().then((function(e){h.initialize({prefix:"CHG",storage:s.getGlobalVariable()}),h.fetchUserPreference(v.preferences).then((function(e){}),(function(e){return Promise.reject(e)})),C.fetchChangeSubTypes(["Change Action","Change Order","Change Request","Change Analysis"]).then((function(e){C.PopulatePreferences().then((function(e){C.getSearchForbiddenTypes().then((function(e){let n="";n="true"==s.getGlobalVariable().is3DSpace?"WebApp":"ENOWCHA_AP"==widget.getValue("appId")?"CExecution":"CGovernance",C.getLicenceAccess(n).then((function(e){s.getGlobalVariable().isFullLicence=e.data[0].IsFullLicense,s.getGlobalVariable().isLiteLicence=e.data[0].IsLiteLicense,s.getGlobalVariable().isDerivativeLicense=e.data[0].isDerivativeLicense,t()}),(function(e){a(e)}))}),(function(e){a(e)}))}),(function(e){a(e)}))}),(function(e){a(e)}))}),(function(e){a(e)}))}else{e.initializeForNative((function(e){t(e)}))}}))},fetchCASubTypes:function(e){var t=this;t.makeWSCall("/resources/dictionary/getTypeInfo","POST","enovia","application/json",'["Change Action"]',(function(a){if(Object.keys(a).length>1){t.caGlobalObject.changeActionSubTypes=[];var n=[];Object.keys(a).forEach((function(e){var a=t.fetchNLSForSubType(e);n.push(a)})),Promise.all(n).then((function(){t.caGlobalObject.changeActionSubTypePresent=!0;var a=[],n=0;Object.keys(t.caGlobalObject.changeActionSubTypes).forEach((function(e){var i=t.caGlobalObject.changeActionSubTypes[e];a[n]={label:i,value:e},n++})),a.sort((function(e,t){return e.label.toUpperCase()>t.label.toUpperCase()?1:-1})),t.caGlobalObject.changeActionSubTypes=a,null!=e&&e()}))}else if(1==Object.keys(a).length){var i=Object.keys(a),r={};r[i[0]]=i[0],t.caGlobalObject.changeActionSubTypePresent=!1,t.caGlobalObject.changeActionSubTypes=[],t.caGlobalObject.changeActionSubTypes.push(r),null!=e&&e()}else null!=e&&e()}),(function(a){t.caGlobalObject.changeActionSubTypePresent=!1,null!=e&&e()}),!0)},fetchNLSForSubType:function(e){var t=this;return new Promise((function(a,n){var i="/resources/dictionary/class/"+e+"/attributes";t.makeWSCall(i,"GET","enovia","application/json","",(function(n){UWA.is(n.NLSName)&&""!=n.NLSName?t.caGlobalObject.changeActionSubTypes[e]=n.NLSName:t.caGlobalObject.changeActionSubTypes[e]=e,a()}),(function(n){t.caGlobalObject.changeActionSubTypes[e]=e,a()}),!0)}))},IsPoweredBy:function(){var e={},t=document.createElement("a");t.href=location.href;for(var a=t.search.substring(1).split("&"),n=0;n<a.length;n++){var i=a[n].split("=");e[i[0]]=decodeURIComponent(i[1])}return!(!e.widgetDomain||!(e.widgetDomain.search("catiav5")>=0||e.widgetDomain.search("solidworks")>=0))},populate3DSpaceURL:function(e){var a=this;return new Promise((function(n,i){var r=null;e&&((r={}).myAppsBaseUrl=e.myAppsBaseUrl,r.userId=e.userId,r.lang=e.lang),t.getPlatformServices({config:r,onComplete:function(e){for(var t=0;t<e.length;t++){if(a.caGlobalObject&&(a.caGlobalObject.tenantMappings=e,a.caGlobalObject.tenant==e[t].platformId)){a.caGlobalObject.baseURL=e[t]["3DSpace"],a.caGlobalObject.federatedURL=e[t]["3DSearch"],a.caGlobalObject.swymURL=e[t]["3DSwym"],a.caGlobalObject.compassURL=e[t]["3DCompass"],a.caGlobalObject.dashboardURL=e[t]["3DDashboard"];var i=a.caGlobalObject.swymURL;a.caGlobalObject.isSwymInstalled=null!=i}if(a.caGlobalObject=s.getGlobalVariable(),a.caGlobalObject&&a.caGlobalObject.tenant==e[t].platformId){a.caGlobalObject.baseURL=e[t]["3DSpace"],a.caGlobalObject.federatedURL=e[t]["3DSearch"],a.caGlobalObject.swymURL=e[t]["3DSwym"],a.caGlobalObject.compassURL=e[t]["3DCompass"],a.caGlobalObject.dashboardURL=e[t]["3DDashboard"];i=a.caGlobalObject.swymURL;a.caGlobalObject.isSwymInstalled=null!=i}}n()},onFailure:i})}))},populateSecurityContext:function(){var e=this;return new Promise((function(t,n){var r=widget.getValue("SC");if(null!=r&&null!=r&&""!=r){var o="ctx::"+r;o=o.replace("ctx::",""),e.caGlobalObject.myRole=o.substring(0,o.indexOf(".")),window.enoviaServer.myRole=o.substring(0,o.indexOf(".")),e.caGlobalObject.collabspace=o.substring(o.lastIndexOf(".")+1,o.length),t(o)}else e.makeWSCall("/resources/pno/person/getsecuritycontext","GET","enovia","application/json","",(function(n){if((o=n.SecurityContext)&&null!=o){if(null!=n&&""!=n&&n.hasOwnProperty("SecurityContext")){var r="";0!=n.SecurityContext.indexOf("ctx::")&&(r="ctx::"),o=r+n.SecurityContext}console.log("Setting security Context: "+o),e.caGlobalObject.mySecurityContext=o,o=o.replace("ctx::",""),UWA.is(window.enoviaServer)&&(window.enoviaServer.context=o),e.caGlobalObject.myRole=o.substring(0,o.indexOf(".")),window.enoviaServer&&(window.enoviaServer.myRole=o.substring(0,o.indexOf("."))),e.caGlobalObject.collabspace=o.substring(o.lastIndexOf(".")+1,o.length),t(n)}else a.error(i.ECM_CA_Use_Preferences)}),n,!0)}))},PopulatePreferences:function(){var e=this;return new Promise((function(t,a){m.addPlatformSelectionPreferenceToWidget({roles:["CSV","InternalDS"],mustHaveAll:!1}).then((function(){console.log("New Platform Preference"),m.addCredentialPreferenceToWidget().then((function(){console.log("New Credential");let a=m.getCredentialPreferenceKey();e.caGlobalObject.mySecurityContext="ctx::"+widget.getValue(a);let n=widget.getValue(a);UWA.is(window.enoviaServer)&&(window.enoviaServer.context=n),e.caGlobalObject.myRole=n.substring(0,n.indexOf(".")),window.enoviaServer&&(window.enoviaServer.myRole=n.substring(0,n.indexOf("."))),e.caGlobalObject.collabspace=n.substring(n.lastIndexOf(".")+1,n.length);let i=m.getPlatformPreferenceKey();e.caGlobalObject.tenant=widget.getValue(i);let r,o=s.getGlobalVariable().changeActionSubTypes;var l=[];o.length>1&&(r=C.populateChangeActionTypePreferences(o),l.push(r)),Promise.all(l).then((function(e){if(o.length>1){let t=e.length-1;widget.addPreference(e[t].changeActionSubTypes),null==widget.getValue("DefaultCASubType")&&widget.setValue("DefaultCASubType","Change Action")}t("success")}))}))}))}))},populateChangeActionTypePreferences:function(e){let t={name:"DefaultCASubType",type:"list",label:i.CHG_CA_Pref_Default_SubType_Label,options:[]};return new Promise((function(a,n){for(let a=0;a<e.length;a++)t.options.push({value:e[a].value,label:e[a].label});let i={};i.changeActionSubTypes=t,a(i)}))},getExpressionValue:function(){var e=this;return new Promise((function(t,a){C.makeWSCall("/resources/v2/e6w/service/ExpresssionSearch/CHG*,ECM*","GET","enovia","application/json","",(function(a){var n=["CHG_CHANGE_MATURITY","CHG_OPEN_WITH_COLLAB","CHG_CREATE_CA_AUTO_PROMOTE","CHG_ADD_MASS_PROPOSED","CHG_CA_VIEWS_ENHANCEMENT","CHG_CHANGE_GROUP","CHG_ChangeImpact_IR_RolledUP","CHG_ChangeImpact_IR_MassUpdate","CHG_TRANSFER_REALIZED_CUST_TYPE","CHG_APPROVAL_COLUMN","CHG_IA_COLUMN_ASSESSMENT","CHG_IA_CUSTOM_VIEW","CHG_IA_COLUMN_ASSESSMEN","ECMEnableDefaultChangeAnalysis","CHG_NATIVE_BREADCRUMB","CHG_ADD_IA_FROM_PARENT_CR","CHG_CA_REALIZED_REFRESH","ECM_SearchRouteTemplateEnforcementForCA","ECM_EnableRouteTemplateEnforcementForCA","ECM_EnableChangeImpactsEnforcementForCR","ECM_EnableExploreInCollabNApprovalForNative","ECM_EnableAddMemberGenericComponent","CHG_CR_DUPLICATE","CHG_INVESTIGATION_REQUEST","CHG_EnableNonChangeGovernedToCA","ECMEnableChangeAnalysisActivity_InWork","ECM_EnableChangeControlGranularity"];a&&a.data&&a.data.forEach((function(t){if(t.dataelements){var a=Object.keys(t.dataelements);for(var i in a)n.indexOf(a[i])>=0&&t.dataelements&&(e.caGlobalObject[a[i]]=t.dataelements[a[i]])}})),t()}),a,!0)}))},onRefresh:function(){var e="ctx::"+widget.getValue("SC");e=e.replace("ctx::",""),this.caGlobalObject.myRole=e.substring(0,e.indexOf(".")),this.caGlobalObject.collabspace=e.substring(e.lastIndexOf(".")+1,e.length)},getSCPreference:function(e){var t={name:"SC",type:"list",label:e,options:[]};if(C._theListSC)for(var a=0;a<C._theListSC.length;a++)t.options.push({value:C._theListSC[a],label:C._theListSC_NLS[a]});return t},update3DspaceURL:function(e){this.caGlobalObject.baseURL=e["3DSpace"],this.caGlobalObject.federatedURL=e["3DSearch"],this.caGlobalObject.tenant=e.platformId},readyDragContent:function(e,t,a){var n=[];if(t.nodeModel.getTreeDocument().getSelectedNodes().length>1)t.nodeModel.getTreeDocument().getSelectedNodes().forEach((function(e){var a={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",serviceId:e.options.grid.serviceName?e.options.grid.serviceName:"3DSpace",contextId:s.getGlobalVariable().getSecurityContext(),objectId:e.options.grid.ref_details?e.options.grid.ref_details.id:e.options.grid.serviceBasedObjId?e.options.grid.serviceBasedObjId:e.options.grid.id,objectType:e.options.grid.ref_details?e.options.grid.ref_details.dataelements["ds6w:type"][0]:e.options.grid.type,displayName:e.options.grid.ref_details?e.options.grid.ref_details.dataelements["ds6w:label"][0]:e.options.grid.title,displayType:e.options.grid.ref_details?e.options.grid.ref_details.dataelements["ds6w:type"][0]:e.options.grid.displayType};e.options.grid.serviceBasedObjId!==e.options.grid.id?a.i3dx=e.options.grid.id:a.i3dx="",t.contextChangeType&&"ChangeAction"==t.contextChangeType&&(a.ChangeActionID=t.contextChangeId,a.caContextIds=t.caContextData),n.push(a)}));else{var i;if(a&&a.objectId)i={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",contextId:s.getGlobalVariable().getSecurityContext(),serviceId:t.nodeModel.options.grid.serviceName?t.nodeModel.options.grid.serviceName:"3DSpace",objectId:a.objectId,objectType:a.objectType,displayName:a.displayName,displayType:a.displayType,i3dx:a.i3dx};else{var r=t.nodeModel.options.grid.ref_details?t.nodeModel.options.grid.ref_details.id:t.nodeModel.options.grid.serviceBasedObjId?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.id;r.contains("pid:")&&(r=r.replace("pid:","")),i={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",serviceId:t.nodeModel.options.grid.serviceName?t.nodeModel.options.grid.serviceName:"3DSpace",contextId:s.getGlobalVariable().getSecurityContext(),objectId:r,objectType:t.nodeModel.options.grid.ref_details?t.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0]:t.nodeModel.options.grid.type,displayName:t.nodeModel.options.grid.ref_details?t.nodeModel.options.grid.ref_details.dataelements["ds6w:label"][0]:t.nodeModel.options.grid.title,displayType:t.nodeModel.options.grid.ref_details?t.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0]:t.nodeModel.options.grid.displayType},t.nodeModel.options.grid.serviceBasedObjId!==t.nodeModel.options.grid.id?i.i3dx=t.nodeModel.options.grid.id:i.i3dx=""}t.contextChangeType&&"ChangeAction"==t.contextChangeType&&(i.ChangeActionID=t.contextChangeId,i.caContextIds=t.caContextData),n.push(i)}var o={protocol:"3DXContent",version:"2.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:n}};s.getGlobalVariable().isNative?o.source="ENONCHA_AP":o.source||(o.source="X3DCSMA_AP"),e.dataTransfer.setData("Text",JSON.stringify(o)),e.dataTransfer.effectAllowed="all"},updateWidgetTitle:function(e){var t=i.CHG_CA_Widget_Title;return null!=e&&(t=e),widget.setTitle(t)},getSearchTypes:function(){var e=this;return new Promise((function(t,a){e.makeWSCall("/resources/modeler/change/typeeallowed","GET","enovia","application/json","",(function(a){e.caGlobalObject.referentialsSearchType=e.getResultStringFromJSONArrayObj(a.referentials),e.caGlobalObject.contextSearchType=e.getResultStringFromJSONArrayObj(a.context),e.caGlobalObject.proposedSearchType=e.getResultStringFromJSONArrayObj(a.proposed),t(a)}),a,!0)}))},getSearchForbiddenTypes:function(){var e=this;return new Promise((function(t,a){e.makeWSCall("/resources/modeler/change/typeeallowed/enhanced","GET","enovia","application/json","",(function(a){e.caGlobalObject.referentialsSearchType=UWA.is(a.referentials)&&UWA.is(a.referentials.allowed)?e.getResultStringFromJSONArrayObj(a.referentials.allowed):"",e.caGlobalObject.referentialsSearchForbiddenType=UWA.is(a.referentials)&&UWA.is(a.referentials.forbidden)?e.getResultStringFromJSONArrayObj(a.referentials.forbidden):"",e.caGlobalObject.contextSearchType=UWA.is(a.context)&&UWA.is(a.context.allowed)?e.getResultStringFromJSONArrayObj(a.context.allowed):"",e.caGlobalObject.contextSearchForbiddenType=UWA.is(a.context)&&UWA.is(a.context.forbidden)?e.getResultStringFromJSONArrayObj(a.context.forbidden):"",e.caGlobalObject.proposedSearchType=UWA.is(a.proposed)&&UWA.is(a.proposed.allowed)?e.getResultStringFromJSONArrayObj(a.proposed.allowed):"",e.caGlobalObject.proposedSearchForbiddenType=UWA.is(a.proposed)&&UWA.is(a.proposed.forbidden)?e.getResultStringFromJSONArrayObj(a.proposed.forbidden):"",t()}),(function(){console.log("typeeallowed enhanced web service fails...!"),t()}),!0)}))},getResultStringFromJSONArrayObj:function(e){var t="";if(null!=e&&""!=e&&e.length>0)for(var a=0;a<e.length;a++)t=""==t?e[a]:t+","+e[a];return t},IsChangeAction:function(e,t){var a=this;return new Promise((function(n,i){var r="/resources/modeler/change/changeaction/pid:"+e;t||(t=!0),a.makeWSCall(r,"GET","enovia","application/json","",(function(e){n({isChangeAction:"TRUE"})}),(function(){n({isChangeAction:"FALSE"})}),t)}))},createCA:function(e,t,a){this.makeWSCall("/resources/modeler/change/changeaction","POST","enovia","application/json",e,t,a)},createCA_v1:function(e,t,a){this.makeWSCallWithCSRF("/resources/v1/chguxservices/changeaction/createChangeAction","POST","enovia","application/json",e,t,a)},createChangeOrder:function(e,t,a){this.makeWSCallWithCSRF("/resources/v1/chguxservices/changeorder","POST","enovia","application/json",e,t,a)},makeWSCall:function(e,t,o,l,c,d,u,p,f=!0){var g=null;if(this.caGlobalObject)g=this.caGlobalObject;else{var m=s.getGlobalVariable();m&&(g=m)}var h="";h=null!=(p=p||null)&&null!=p.isfederated&&1==p.isfederated?g.federatedURL+e:null!=p&&null!=p.isCompass&&1==p.isCompass?g.compassURL+e:g.computeUrl(e);var v="";v=null!=p&&null!=p.acceptType&&""!=p.acceptType?p.acceptType:"application/json";var y="Yes";null!=p&&null!=p.encodeSecurityContext&&""!=p.encodeSecurityContext&&(y=p.encodeSecurityContext);var C=(new Date).getTime();h=-1==h.indexOf("?")?h+"?tenant="+g.tenant+"&timestamp="+C:h+"&tenant="+g.tenant+"&timestamp="+C;var S=g.getSecurityContext();"No"!=y&&(S=encodeURIComponent(S)),d=d||function(){},u=u||function(){};var b=widget.getValue("lang");widget.lang&&(b=widget.lang);var w={};w.method=t,w.timeout=g.wsCallTimeout,null!=p&&null!=p.isSwymUrl&&0!=p.isSwymUrl||(w.type="json"),g.isNative||(o&&(w.auth={passport_target:o}),w.proxy=g.proxy),w.headers=S?{Accept:v,"Content-Type":l,SecurityContext:S,"Accept-Language":b}:{Accept:v,"Content-Type":l,"Accept-Language":b},c&&(w.data=c),w.onComplete=function(e){if(e&&e["error report"]&&Array.isArray(e["error report"])){for(var t=e["error report"],n="",i=0;i<t.length;i++){var o=t[i];o&&o.message&&(n=n+o.message+"<br>")}a.error(n);var s=document.getElementById("outer-ca-div");s&&r.unmask(s);var l=document.getElementsByClassName("moduleWrapper")[0];l&&r.isMasked(l)&&r.unmask(l),widget.body&&r.unmask(widget.body)}else d(e||"")},w.onFailure=function(e,n){if(console.log("Error in calling url: "+h),console.log("Additional Details:: httpMethod: "+t+" authentication: "+o+" securityContext: "+S+" ContentType: "+l),console.log("Error Detail: "+e),console.log("Error Data: "+JSON.stringify(n)),h.includes("getapplicability"))var s={blockError:!0};f&&(n&&n.errorMessage?null!=s&&s.blockError?console.log("errorBlocked"):a.error(n.errorMessage):n&&n.error&&n.error.message?a.error(n.error.message):e&&e.message?a.error(e.message):a.error(i.CHG_GOV_ERROR_MSG)),u(e,n);var c=document.getElementById("outer-ca-div");c&&r.unmask(c);var d=document.getElementsByClassName("moduleWrapper")[0];d&&r.isMasked(d)&&r.unmask(d),widget.body&&r.unmask(widget.body)},w.onTimeout=function(){console.log("Timedout for url: "+h),a.error(i.CHG_GOV_ERROR_SERVICE_TIMEOUT);var e=document.getElementById("outer-ca-div");e&&r.unmask(e);var t=document.getElementsByClassName("moduleWrapper")[0];t&&r.isMasked(t)&&r.unmask(t),widget.body&&r.unmask(widget.body)},n.authenticatedRequest(h,w)},makeWSCallWithCSRF:function(e,t,o,l,c,d,u,p){var f=null;if(this.caGlobalObject)f=this.caGlobalObject;else{var g=s.getGlobalVariable();g&&(f=g)}var m="";m=null!=(p=p||null)&&null!=p.isfederated&&1==p.isfederated?f.federatedURL+e:f.computeUrl(e);var h="";h=null!=p&&null!=p.acceptType&&""!=p.acceptType?p.acceptType:"application/json";var v="Yes";null!=p&&null!=p.encodeSecurityContext&&""!=p.encodeSecurityContext&&(v=p.encodeSecurityContext);var y=(new Date).getTime();m=-1==m.indexOf("?")?m+"?tenant="+f.tenant+"&timestamp="+y:m+"&tenant="+f.tenant+"&timestamp="+y;var C=f.getSecurityContext(),S=f.ENO_CSRF_TOKEN;"No"!=v&&(C=encodeURIComponent(C)),d=d||function(){},u=u||function(){};var b=widget.getValue("lang");widget.lang&&(b=widget.lang);var w={};w.method=t,w.timeout=f.wsCallTimeout,null!=p&&null!=p.isSwymUrl&&0!=p.isSwymUrl||(w.type="json"),f.isNative||(o&&(w.auth={passport_target:o}),w.proxy=f.proxy),w.headers=C?{Accept:h,"Content-Type":l,SecurityContext:C,"Accept-Language":b,ENO_CSRF_TOKEN:S}:{Accept:h,"Content-Type":l,"Accept-Language":b},null!=p&&null!=p.issueVersion&&""!=p.issueVersion&&(w.headers[p.issueVersion]=p.version),c&&(w.data=c),w.onComplete=function(e){if(e.csrf){var t=e.csrf.value;s.getGlobalVariable().ENO_CSRF_TOKEN=t}var n=void 0;if(e.data&&Array.isArray(e.data)&&e.data[0]&&e.data[0]["error report"]&&Array.isArray(e.data[0]["error report"])){var i=e.data[0]["error report"],r="";n=[];for(var o=0;o<i.length;o++){var l=i[o];l&&l.message&&(r=r+l.message+"<br>"),l&&l.id&&n.push(l.id)}a.error(r),e.data.splice(0,1)}d(e,n)},w.onFailure=function(e,n){var s;console.log("Error in calling url: "+m),console.log("Additional Details:: httpMethod: "+t+" authentication: "+o+" securityContext: "+C+" ContentType: "+l),console.log("Error Detail: "+e),console.log("Error Data: "+JSON.stringify(n)),n&&n.errorMessage?a.error(n.errorMessage):n&&n.error&&n.error.message?a.error(n.error.message):n&&n.error&&"string"==typeof n.error?a.error(n.error):n&&n.internalError?a.error(n.internalError):e&&e.message?a.error(e.message):a.error(i.CHG_GOV_ERROR_MSG),u(e,n),widget.body&&r.unmask(widget.body),(s=document.getElementsByClassName("moduleWrapper")[0])&&r.isMasked(s)&&r.unmask(s),(s=document.getElementsByClassName("chg-affectedItems-container")[0])&&r.isMasked(s)&&r.unmask(s),(s=document.getElementsByClassName("chg-orchestration-container")[0])&&r.isMasked(s)&&r.unmask(s),(s=document.getElementById("crAffectedItemsFullViewContainer"))&&r.isMasked(s)&&r.unmask(s),(s=document.getElementById("ChangeImpactParentDiv"))&&r.isMasked(s)&&r.unmask(s)},w.onTimeout=function(){console.log("Timedout for url: "+m),a.error(i.CHG_GOV_ERROR_SERVICE_TIMEOUT),widget.body&&r.unmask(widget.body)},n.authenticatedRequest(m,w)},setupIntercomConnections:function(e,t,a){t.compassSocketName=a+"EventSocket",t.compassSocket=new t.InterCom.Socket(t.compassSocketName),t.compassSocket.subscribeServer("com.ds.compass",window.parent),t.prefIntercomServer=new t.InterCom.Server("changeaction.intercom.server"),t.prefIntercomServer.addListener("onAddPref",(function(a,n){"RefreshMe"!=a.name?a.value?e.setValue(a.name,a.value):e.deleteValue(a.name):t.onRefresh()}))},initializeForNative:function(e){this.caGlobalObject.isNative=!0,this.caGlobalObject.callback=e,l.DispatchEventToWin("Native_Init","done")},initNative:function(e){this.caGlobalObject.isNative=!0,this.caGlobalObject.contextUser=e.userid,this.caGlobalObject.tenant=e.active_tenant,widget.setValue("x3dPlatformId",e.active_tenant),this.caGlobalObject.tenantnls=e.tenantDisplayName,l.DispatchEventToWin("Enable_Tile_View");let t={contextUser:e.userid,tenant:e.active_tenant,tenantnls:e.tenantDisplayName,isNative:!0};widget.setValue("native_user_info",t),widget.body.setStyle("height",document.body.parentElement.clientHeight+"px"),widget.addEvent("onResize",(function(){widget.body.setStyle("height",document.body.parentElement.clientHeight+"px")}));var a={},n=this;l.getWebInWinParameters((function(t){a=t||null,n.populate3DSpaceURL(a).then((function(t){n.populateSecurityContext().then((async function(t){await C.fetchChangeSubTypes(["Change Action","Change Order","Change Request","Change Analysis"]),n.getSearchForbiddenTypes().then((function(t){n.caGlobalObject.callback(e),h.initialize({prefix:"CHG",storage:s.getGlobalVariable()});var a=s.getGlobalVariable().proposedSearchType;l.DispatchEventToWin("NewProposedChangeSupportedTypes",a);var i=s.getGlobalVariable().contextSearchType;l.DispatchEventToWin("AddContextSupportedTypes",i);var r=s.getGlobalVariable().referentialsSearchType;l.DispatchEventToWin("AddReferentialsSupportedTypes",r),h.fetchUserPreference(v.preferences).then((function(e){}),(function(e){return Promise.reject(e)}));C.getLicenceAccess("Native").then((function(e){return s.getGlobalVariable().isFullLicence=e.data[0].IsFullLicense,s.getGlobalVariable().isLiteLicence=e.data[0].IsLiteLicense,s.getGlobalVariable().isDerivativeLicense=e.data[0].isDerivativeLicense,Promise.resolve()}),(function(e){return Promise.reject(e)}))}),(function(e){return console.log("Search Types failed"),Promise.reject(e)}))}),(function(e){return console.log("Populate Security Context failed"),Promise.reject(e)}))}),(function(e){return console.log("Populate 3DSpace URL failed"),Promise.reject(e)}))}))},getCSRFToken:function(){var e=this;return new Promise((function(t,a){e.makeWSCallWithCSRF("/resources/v1/application/CSRF","GET","enovia","application/json","",(function(e){s.getGlobalVariable().ENO_CSRF_TOKEN=e.csrf.value,t("success")}),a,!0)}))},getNLSValuesPromise:function(e){return new Promise((function(t,a){null!=e?c.getNlsOfPropertiesValues(JSON.stringify(e),{tenantId:s.getGlobalVariable().tenant,lang:widget.lang,onComplete:function(e){t(e)},onFailure:function(e){a(e)}}):t(e)}))},getNLSValuesPromiseForSource:function(e){return new Promise((function(t,a){null!=e?c.getNlsOfPropertiesValuesBySource(e,{tenantId:s.getGlobalVariable().tenant,lang:widget.lang,onComplete:function(e){t(e)},onFailure:function(e){a(e)}}):t(e)}))},caSubTypesFetched:function(){return new Promise((function(e,t){null!=s.getGlobalVariable().changeActionSubTypes?e():C.fetchCASubTypes(e,t)}))},iaSubTypesFetched:function(){return new Promise((function(e,t){null!=s.getGlobalVariable().changeAnalysisSubTypes?e():C.fetchIASubTypes(e,t)}))},fetchIASubTypes:function(e){var t=this;t.makeWSCall("/resources/dictionary/getTypeInfo","POST","enovia","application/json",'["Change Analysis"]',(function(a){if(Object.keys(a).length>1){s.getGlobalVariable().changeAnalysisSubTypes=[];var n=[];Object.keys(a).forEach((function(e){var a=t.fetchNLSForIASubType(e);n.push(a)})),Promise.all(n).then((function(){s.getGlobalVariable().changeAnalysisSubTypePresent=!0;var t=[],a=0;Object.keys(s.getGlobalVariable().changeAnalysisSubTypes).forEach((function(e){var n=s.getGlobalVariable().changeAnalysisSubTypes[e];t[a]={label:n,value:e},a++})),t.sort((function(e,t){return e.label.toUpperCase()>t.label.toUpperCase()?1:-1})),s.getGlobalVariable().changeAnalysisSubTypes=t,null!=e&&e()}))}else if(1==Object.keys(a).length){var i=Object.keys(a),r={};r[i[0]]=i[0],s.getGlobalVariable().changeAnalysisSubTypePresent=!1,s.getGlobalVariable().changeAnalysisSubTypes=[],s.getGlobalVariable().changeAnalysisSubTypes.push(r),null!=e&&e()}else null!=e&&e()}),(function(t){s.getGlobalVariable().changeAnalysisSubTypePresent=!1,null!=e&&e()}),!0)},fetchChangeSubTypes:async function(e){return new Promise((async function(t,a){s.getGlobalVariable();if(0==e.length)t();else try{const{subTypeResponseData:a,nlsResponse:i}=await C.fetchChangeSubTypesWS(e),r=["Change Action","Change Order"];var n=[];let o=!1,l=!1;a.forEach((e=>{const t=Object.keys(e)[0],a=e[t];var c=[],d=0;r.includes(t)&&(n.push(...a),"Change Action"==t?o=!0:"Change Order"==t&&(l=!0)),a.forEach((e=>{c[d]={label:i["ds6w:type"][e],value:e},d++})),c.sort((function(e,t){return e.label.toUpperCase()>t.label.toUpperCase()?1:-1})),"Change Analysis"==t?(s.getGlobalVariable().changeAnalysisSubTypePresent=!0,s.getGlobalVariable().changeAnalysisSubTypes=c):"Change Action"==t?(s.getGlobalVariable().changeActionSubTypePresent=!0,s.getGlobalVariable().changeActionSubTypes=c):"Change Order"==t?(s.getGlobalVariable().changeOrderSubTypePresent=!0,s.getGlobalVariable().changeOrderSubTypes=c):"Change Request"==t&&(s.getGlobalVariable().changeRequestSubTypePresent=!0,s.getGlobalVariable().changeRequestSubTypes=c)})),null==s.getGlobalVariable().subTypes&&1==o&&1==l&&(s.getGlobalVariable().subTypePresent=!0,s.getGlobalVariable().subTypes=n),t()}catch(e){console.log(e),t()}}))},fetchChangeSubTypesWS:async function(e){return new Promise(((t,a)=>{var n=[],i={types:e};n.push(i);let r={data:n};r=JSON.stringify(r);this.makeWSCall("/resources/v1/chguxservices/connectedChange/getSubTypeInfo","POST","enovia","application/json",r,(async function(e){if(e&&e.data&&e.data.length>0){var a=e.data,n=[];a.forEach((e=>{for(const t in e)e[t].forEach((e=>{var t={value:e,source:["3DSpace"]};n.push(t)}))}));var i={"ds6w:type":n},r=await C.getNLSValuesPromiseForSource(i);t({subTypeResponseData:a,nlsResponse:r})}}),(function(e){console.log("Failure in getSubTypeInfo webservice, Error is :"+e),a()}),!0)}))},getLicenceAccess:function(e){return new Promise((function(t,a){var n="/resources/v1/chguxservices/connectedChange/license?platform="+e;C.makeWSCallWithCSRF(n,"GET","enovia","application/json","",(function(e){t(e)}),a,!1)}))},fetchNLSForIASubType:function(e){var t=this;return new Promise((function(a,n){var i="/resources/dictionary/class/"+e+"/attributes";t.makeWSCall(i,"GET","enovia","application/json","",(function(t){UWA.is(t.NLSName)&&""!=t.NLSName?s.getGlobalVariable().changeAnalysisSubTypes[e]=t.NLSName:s.getGlobalVariable().changeAnalysisSubTypes[e]=e,a()}),(function(t){s.getGlobalVariable().changeAnalysisSubType[e]=e,a()}),!0)}))},getCopyLink:function(e,a){return{type:"PushItem",title:i.LinkCopiedTitle,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-link"},action:{callback:function(){y(["DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil"],(function(e){e.createProbesData("Copy Link")}));var n=void 0;let r;1==e.length?e[0].options?(r=e[0].options.grid.typeNLS||e[0].options.grid.type,n=e[0].options.grid.title||e[0].options.grid.name):(r=e[0].type,n=e[0].name):n="";var o=UWA.createElement("div",{styles:{display:"flex"}}),l=new p("input",{attributes:{readonly:"readonly"}});l.getContent().setStyles({display:"inline-block","border-top-right-radius":0,"border-bottom-right-radius":0}),l.inject(o);var c=new f({value:"Copy Link",className:"block",events:{onClick:function(e){l.setFocus(),l.elements.input.select(),l.elements.input.setSelectionRange(0,99999),document.execCommand("cut"),u.hide(),n&&""!==n?C.showNotification("success",i.get("LinkCopiedTitle"),UWA.String.format(i.get("LinkCopiedMsg"),r,n),"",!1,""):C.showNotification("success",i.get("LinkCopiedTitle"),i.get("LinkCopied"),"",!1,"")}}});c.getContent().setStyles({display:"inline-block","border-top-left-radius":0,"border-bottom-left-radius":0,padding:"0 10px"}),c.inject(o);var d,u=new g({body:o,closeOnClick:!1,events:{onClickOutside:function(e){console.log("DDClickOutside")}}}),m=s.getGlobalVariable();if(m.isNative)for(var h=m.tenantMappings,v=0;v<h.length;v++)m.tenant==h[v].platformId&&(d=h[v]["3DDashboard"]);else d=widget.widgetDomain;if(null==d){d=[]["3DDashboard"]}if(null==d)t.getPlatformServices({platformId:"OnPremise",onComplete:function(t){let n="",i=0;for(let o of e){var r=C.makeCopyLinkObject(o,a);let e=widget.getValue("appId")?widget.getValue("appId"):"ENOWCHA_AP",s=t["3DDashboard"]+"#app:"+e+"/content:X3DContentId="+encodeURIComponent(JSON.stringify(r));0==i?(n+=s,i++):n=n+" "+s}u.hide(),u.show(),l.setFocus(),l.setValue(n),l.elements.input.select(),l.elements.input.setSelectionRange(0,99999,"backward"),c.getContent().click()}});else{let t="",n=0;for(let i of e){let e;var S=C.makeCopyLinkObject(i,a),b=widget.getValue("appId");e=null==b&&m.isNative?d+"#app:"+(b="ENOWCHA_AP")+"/content:X3DContentId="+encodeURIComponent(JSON.stringify(S)):d+"#app:"+widget.getValue("appId")+"/content:X3DContentId="+encodeURIComponent(JSON.stringify(S)),0==n?(t+=e,n++):t=t+" "+e}u.hide(),u.show(),l.setFocus(),l.setValue(t),l.elements.input.select(),l.elements.input.setSelectionRange(0,99999,"backward"),c.getContent().click()}}}}},makeCopyLinkObject:function(e,t){var a={protocol:"3DXContent",data:{items:[]}};return e._options&&"ChangeAnalysis"==e._options.grid.isKindOfType?a.data.items.push({envId:s.getGlobalVariable().tenant,objectId:t,openLink:!0,IAid:e.options.grid.id,tabName:"crAssessment"}):a.data.items.push({envId:s.getGlobalVariable().tenant,objectId:e.options?e.options.grid.id:e.id,openLink:!0}),a},recent:function(){return new Promise((function(e,t){var a={label:window.widget.name+"-"+s.getGlobalVariable().contextUser+"-"+Date.now(),nresults:100,delta_time_interval:300,tenant:s.getGlobalVariable().tenant,select_predicate:["resourceid","ds6w:identifier","ds6w:label","ds6w:type","ds6w:modified","ds6w:created","preview_url","type_icon_url","ds6w:responsible","owner","ds6w:docextension","ds6w:organizationResponsible","ds6w:status","ds6w:responsible_value","ds6w:responsible:snippet","ds6wg:revision","ds6w:project","ds6w:project_value"],select_file:["icon","thumbnail_2d"],login:{"3dspace":{SecurityContext:s.getGlobalVariable().getSecurityContext()}}},i={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:6e5,onComplete:function(a){try{var n=JSON.parse(a);e(n)}catch(e){t(e)}},onFailure:t,data:JSON.stringify(a)},r=s.getGlobalVariable().federatedURL+"/recent?tenant="+s.getGlobalVariable().tenant+"&_="+Date.now();n.authenticatedRequest(r,i)}))},federatedSearch:function(e,t){return new Promise((function(a,i){var r={label:window.widget.name+"-"+s.getGlobalVariable().contextUser+"-"+Date.now(),query:e,nresults:200,tenant:s.getGlobalVariable().tenant,select_predicate:t,login:{"3dspace":{SecurityContext:s.getGlobalVariable().getSecurityContext()}}},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:6e5,onComplete:function(e){try{var t=JSON.parse(e);a(t)}catch(e){i(e)}},onFailure:i,data:JSON.stringify(r)},l=s.getGlobalVariable().federatedURL+"/search?tenant="+s.getGlobalVariable().tenant+"&_="+Date.now();n.authenticatedRequest(l,o)}))},cv2Fetch:function(e,t){return new Promise((function(a,i){var r={label:window.widget.name+"-"+s.getGlobalVariable().contextUser+"-"+Date.now(),physicalid:e[0],nresults:200,tenant:s.getGlobalVariable().tenant,select_predicate:t},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:6e5,onComplete:function(e){try{var t=JSON.parse(e);a(t)}catch(e){i(e)}},onFailure:i,data:JSON.stringify(r)},l=s.getGlobalVariable().baseURL+"/cvservlet/fetch/v2?tenant="+s.getGlobalVariable().tenant+"&_="+Date.now();n.authenticatedRequest(l,o)}))},fetchbyService:function(e){let t=e.ids,a=e.url.trim();a+="?include=ds6w:icon,ds6w:kind,ds6w:previewURL,ds6w:resourceType";var i={method:"POST"};i.headers={Accept:"application/json","Content-Type":"application/json",SecurityContext:s.getGlobalVariable().getSecurityContext(),"Accept-Language":widget.getValue("lang")};var r={data:[]};return t.forEach((e=>{var t={"ds6w:i3dx":e};r.data.push(t)})),i.data=JSON.stringify(r),new Promise((function(e,t){window.widget;var r={method:"POST",headers:i.headers,timeout:6e5,onComplete:function(a){try{var n=JSON.parse(a);e(n)}catch(e){t(e)}},onFailure:t,data:i.data};n.authenticatedRequest(a,r)}))},showNotification:function(e,t,a,n,i,r,o){var s={level:e,title:t,subtitle:a,message:n,sticky:i,allowUnsafeHTML:o||!1};window.notifs||(window.notifs=d,u.setNotificationManager(window.notifs)),r?u.inject(r):u.elements.container.isInjected()||u.inject(),window.notifs.addNotif(s)},coSubTypesFetched:function(){var e=this;return new Promise((function(t,a){null!=s.getGlobalVariable().changeOrderSubTypes?t():e.fetchCOSubTypes(t,a)}))},parseObjectInformation:function(e){var t=[],n=!1;const r=/^[0-9a-fA-F]{32}$/;for(var o=0;o<e.length;o++)if(e[o].serviceId)if(!("3DSPACE"!=e[o].serviceId.toUpperCase()||e[o].objectId&&e[o].objectId.contains(":"))||e[o].i3dx&&""!=e[o].i3dx.trim()){var s="";s="3DSPACE"==e[o].serviceId.toUpperCase()&&r.test(e[o].objectId)?e[o].objectId:e[o].i3dx,t.push({id:s,type:e[o].objectType,service:e[o].serviceId,updateAction:"CONNECT"})}else n=!0,console.log("Service: "+e[o].serviceId+" objectId:"+e[o].objectId+"droppedItemArr[0].i3dx:"+e[o].i3dx);else n=!0,console.log("Service: "+e[o].serviceId+" objectId:"+e[o].objectId+"i3dx:"+e[o].i3dx);return n&&(a.warn(i.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped")),t},parseInstanceObjectInformation:function(e){for(var t=[],n=!1,r=0;r<e.length;r++)if(e[r].serviceId)if(!("3DSPACE"!=e[r].serviceId.toUpperCase()||e[r].objectId&&e[r].objectId.contains(":"))||e[r].i3dx&&""!=e[r].i3dx.trim())if(!e[r].path||e[r].path.length<=1)a.error(i.CHG_GOV_Proposed_Add_Instance_Error);else{var o=e[r].path,s=o[o.length-3].resourceid,l=o[o.length-2].resourceid,c=o[o.length-2].type;t.push({referenceId:s,id:l,type:c,service:e[r].serviceId,updateAction:"CONNECT",isInstance:"true"})}else n=!0,console.log("Service: "+e[r].serviceId+" objectId:"+e[r].objectId+"droppedItemArr[0].i3dx:"+e[r].i3dx);else n=!0,console.log("Service: "+e[r].serviceId+" objectId:"+e[r].objectId+"i3dx:"+e[r].i3dx);return n&&(a.warn(i.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped")),t},fetchCOSubTypes:function(e){var t=this;C.makeWSCall("/resources/dictionary/getTypeInfo","POST","enovia","application/json",'["Change Order"]',(function(a){if(Object.keys(a).length>1){s.getGlobalVariable().changeOrderSubTypes=[];var n=[];Object.keys(a).forEach((function(e){var a=t.fetchNLSForCOSubType(e);n.push(a)})),Promise.all(n).then((function(){s.getGlobalVariable().changeOrderSubTypePresent=!0;var t=[],a=0;Object.keys(s.getGlobalVariable().changeOrderSubTypes).forEach((function(e){var n=s.getGlobalVariable().changeOrderSubTypes[e];t[a]={label:n,value:e},a++})),t.sort((function(e,t){return e.label.toUpperCase()>t.label.toUpperCase()?1:-1})),s.getGlobalVariable().changeOrderSubTypes=t,null!=e&&e()}))}else if(1==Object.keys(a).length){var i=Object.keys(a),r={};r[i[0]]=i[0],s.getGlobalVariable().changeOrderSubTypePresent=!1,s.getGlobalVariable().changeOrderSubTypes=[],s.getGlobalVariable().changeOrderSubTypes.push(r),null!=e&&e()}else null!=e&&e()}),(function(t){s.getGlobalVariable().changeOrderSubTypePresent=!1,null!=e&&e()}),!0)},fetchNLSForCOSubType:function(e){return new Promise((function(t,a){var n="/resources/dictionary/class/"+e+"/attributes";C.makeWSCall(n,"GET","enovia","application/json","",(function(a){UWA.is(a.NLSName)&&""!=a.NLSName?s.getGlobalVariable().changeOrderSubTypes[e]=a.NLSName:s.getGlobalVariable().changeOrderSubTypes[e]=e,t()}),(function(a){s.getGlobalVariable().changeOrderSubTypes[e]=e,t()}),!0)}))},crSubTypesFetched:function(){var e=this;return new Promise((function(t,a){null!=s.getGlobalVariable().changeRequestSubTypes?t():e.fetchCRSubTypes(t,a)}))},fetchCRSubTypes:function(e){var t=this;C.makeWSCall("/resources/dictionary/getTypeInfo","POST","enovia","application/json",'["Change Request"]',(function(a){if(Object.keys(a).length>1){s.getGlobalVariable().changeRequestSubTypes=[];var n=[];Object.keys(a).forEach((function(e){var a=t.fetchNLSForCRSubType(e);n.push(a)})),Promise.all(n).then((function(){s.getGlobalVariable().changeRequestSubTypePresent=!0;var t=[],a=0;Object.keys(s.getGlobalVariable().changeRequestSubTypes).forEach((function(e){var n=s.getGlobalVariable().changeRequestSubTypes[e];t[a]={label:n,value:e},a++})),t.sort((function(e,t){return e.label.toUpperCase()>t.label.toUpperCase()?1:-1})),s.getGlobalVariable().changeRequestSubTypes=t,null!=e&&e()}))}else if(1==Object.keys(a).length){var i=Object.keys(a),r={};r[i[0]]=i[0],s.getGlobalVariable().changeRequestSubTypePresent=!1,s.getGlobalVariable().changeRequestSubTypes=[],s.getGlobalVariable().changeRequestSubTypes.push(r),null!=e&&e()}else null!=e&&e()}),(function(t){s.getGlobalVariable().changeRequestSubTypePresent=!1,null!=e&&e()}),!0)},fetchNLSForCRSubType:function(e){return new Promise((function(t,a){var n="/resources/dictionary/class/"+e+"/attributes";C.makeWSCall(n,"GET","enovia","application/json","",(function(a){UWA.is(a.NLSName)&&""!=a.NLSName?s.getGlobalVariable().changeRequestSubTypes[e]=a.NLSName:s.getGlobalVariable().changeRequestSubTypes[e]=e,t()}),(function(a){s.getGlobalVariable().changeRequestSubTypes[e]=e,t()}),!0)}))},fetchAllChangeSubTypes:async function(){await C.fetchChangeSubTypes(["Change Action","Change Order","Change Request","Change Analysis"]),console.log("It is successful")},initializeCommonInfra:async function(){var e=o.getUser(),t=s.getGlobalVariable();t.tenant||(t.tenant=widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise"),e&&(t.contextUser=e.login);try{await C.populate3DSpaceURL(),await h.initialize({prefix:"CHG",storage:s.getGlobalVariable()}),await h.fetchUserPreference(v.preferences),await C.fetchChangeSubTypes(["Change Action","Change Order","Change Request","Change Analysis"]),console.log("FetchAllChangeSubTypes completed");let e="";return e="true"==s.getGlobalVariable().is3DSpace?"WebApp":"ENOWCHA_AP"==widget.getValue("appId")?"CExecution":"CGovernance",C.getLicenceAccess(e).then((function(e){s.getGlobalVariable().isFullLicence=e.data[0].IsFullLicense,s.getGlobalVariable().isLiteLicence=e.data[0].IsLiteLicense,s.getGlobalVariable().isDerivativeLicense=e.data[0].isDerivativeLicense,resolve()}),(function(e){reject(e)})),await C.getCSRFToken(),Promise.resolve()}catch(e){return Promise.reject(e)}}};return C})),define("DS/ENOChgServices/scripts/services/ChgContextServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgInfraService"],(function(e,t){"use strict";return{addContextToCA:function(e,a,n,i){var r="/resources/modeler/change/changeaction/"+a;t.makeWSCall(r,"PUT","enovia","application/json",e,n,i,!0)},removeContextFromCA:function(e,a,n,i){var r="/resources/modeler/change/changeaction/"+a;t.makeWSCall(r,"PUT","enovia","application/json",e,n,i,!0)},getCAContextData:function(e){return new Promise((function(a,n){var i="/resources/modeler/change/changeaction/"+e+"?context=1";t.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))}}})),define("DS/ENOChgServices/scripts/services/ChgProposedServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,a){"use strict";var n={getCAProposedData:function(e){return new Promise((function(a,n){var i="/resources/modeler/change/changeaction/"+e+"?proposed=1&flowdown=1&attributes=1&context=1";t.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getCAFlowdownData:function(e){return new Promise((function(a,n){var i="/resources/modeler/change/changeaction/"+e+"?flowdown=1&attributes=1";t.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getDataForProposedFacet:function(e){var t=this;return new Promise((function(a,i){var r=t.getCAProposedData(e),o={context:[],proposedData:[]},s=[],l=[],c=[],d=[];r.then((function(e){e&&e.changeaction&&(e.changeaction.context&&(o.context=e.changeaction.context),e.changeaction.proposed&&(s=e.changeaction.proposed,o.proposedData=o.proposedData.concat(e.changeaction.proposed)),e.changeaction.flowdownActivities&&(l=n._getFlowdownOperations(e.changeaction.flowdownActivities),c=e.changeaction.flowdownActivities,d=e.changeaction.flowdownIgnoreds,o.proposedData=o.proposedData.concat(l),n.cachedFlowdownModels=l)),t.mapping=n._mappedForSlidein(s,c,d),a(o)}))}))},getSupportedOperations:function(){return"None,NewVersion,NewMinorVersion,NewEvolution,Create,Restore"},getSupportedActivities:function(){return"Modify,Release,Obsolete"},getAllowedOperationActivity:function(e,a,n){var i=this;return new Promise((function(r,o){if(e&&e.length>0){var s=[];if(n&&1==e.length){var l={existingProposedPid:n,objectPid:e[0]};s.push(l)}else for(var c in e){l={objectPid:e[c]};s.push(l)}var d={getOperationForPhysicalIds:s,changeactionid:a};d=JSON.stringify(d);t.makeWSCall("/resources/modeler/change/operation/fromIds","POST","enovia","application/json",d,(function(e){var t,a=new Object;UWA.is(e)&&UWA.is(e.listOfOperationPerObject)&&e.listOfOperationPerObject.forEach((function(e){(t=new Object).allowedOperation=[],t.allowedActivity=[],t.defaultOperation="None",t.defaultActivity=void 0,e.allowedOperation.forEach((function(a){-1!=i.getSupportedOperations().indexOf(a)?t.allowedOperation.push(a):-1!=i.getSupportedActivities().indexOf(a)&&t.allowedActivity.push(a),t.allowedOperation.includes("Restore")&&(e.defaultOperation="None",t.allowedActivity.includes("Modify")||t.allowedActivity.push("Modify"))})),UWA.is(e.defaultOperation)&&-1!=i.getSupportedOperations().indexOf(e.defaultOperation)?t.defaultOperation=e.defaultOperation:UWA.is(e.defaultOperation)&&-1!=i.getSupportedActivities().indexOf(e.defaultOperation)&&(t.defaultActivity=e.defaultOperation),a[e.id.replace("pid:","")]=t}));var n={};n.allowedOperationActivity=a,r(n)}),o,!1)}else r(!0)}))},addProposedFromFlowdownPanel:function(e){if(UWA.is(e)){var t=e.proposedArrToAdd;if(t)Object.keys(t)}},setFlowdownMapping:function(e){if(this.flowdownMapping={},UWA.is(e)){var t=e.proposedArrToAdd;if(t){var a=t.map((function(e){return"pid:"+e.proposedId}));for(var n in a){var i=a[n];i&&""!=i&&(this.flowdownMapping[i]={flowdownForObjectId:e.proposedArrToAdd[i].flowdownForObjectId,flowdownForObjectTitle:e.proposedArrToAdd[i].flowdownForObjectTitle,flowdownForObjectType:e.proposedArrToAdd[i].flowdownForObjectType,flowdownForObjectTypeNLS:e.proposedArrToAdd[i].flowdownForObjectTypeNLS},e.moreInfo.length>1?this.flowdownMapping[i].moreInfo=e.moreInfo:(this.flowdownMapping[i].upstreamCAId=e.moreInfo[0].caID,this.flowdownMapping[i].upstreamCATitle=e.moreInfo[0].caTitle))}}}},setFlowdownForandFromMappingAndReturnProposedIds:function(e){this.flowdownForandFromMapping={};var t={forFlowdownOp:[],selectedProposedIds:[]};if(UWA.is(e)){var a=Object.keys(e.proposedArrToAdd);for(var n in a){var i=a[n],r=e.proposedArrToAdd[i];if(r){var o=r.selectedItems;if(o)for(var s in o){var l=o[s];l&&(l.fromAddResolutionTab?t.forFlowdownOp.push("pid:"+l.proposedId):t.selectedProposedIds.push("pid:"+l.proposedId),this.flowdownForandFromMapping["pid:"+l.proposedId]={flowdownForObjectId:i,flowdownForObjectTitle:r.objTitle,flowdownForObjectType:r.objType,flowdownForObjectTypeNLS:r.objTypeNLS,upstreamCAId:e.moreInfo.caID,upstreamCATitle:e.moreInfo.caTitle,upstreamAMOId:r.amoID})}}}}return t},getFlowdownForandFromMapping:function(){return this.flowdownForandFromMapping},getFlowdownMapping:function(){return this.flowdownMapping},getCachedFlowdownData:function(){return n.cachedFlowdownModels},_getFlowdownOperations:function(e){var t=[];for(var a in e){var n=e[a];if(UWA.is(n)){var i=n.flowdownElements,r=n.flowdownResolutions,o=(i.map((function(e){return e.elementPointedId})),i.map((function(e){return e.elementIdentifier})));if(r.length>0)for(var s in r){var l=r[s];UWA.is(l)&&o.forEach((function(e,a){-1!=l.resolutionValidIdentifiers.indexOf(e)?l.resolutionObject&&t.push(n):"Flowdown Pending"===i[a].elementStatus&&t.push(n),-1!=l.resolutionRejectedIdentifiers.indexOf(e)&&"Rejected"===i[a].elementStatus&&l.resolutionObject&&t.push(n)}))}0===r.length&&t.push(n)}}return t},_mappedForSlidein:function(e,t,a){var i=[],r={};for(var o in t){var s=t[o];if(UWA.is(s)){var l=s.flowdownElements,c=s.flowdownResolutions;if(Array.isArray(c)&&c.length>0){var d=[],u=[],p=[];for(var f in l){var g=l[f];if(g){d.push(g.elementPointedId),u.push(g.elementIdentifier),p.push(g.elementPointedCAId);var m={amoID:g.elementPointedId,caID:g.elementPointedCAId,caTitle:g.elementPointedCATitle,caName:g.elementPointedCAName,flowdownStatus:g.elementStatus};"Complete"!==g.elementStatus&&"Flowdown Complete"!==g.elementStatus||(m.flowdownStatus="Flowdown Complete"),("Complete"!==g.elementStatus&&"Flowdown Complete"!==g.elementStatus||"Updated"!==g.elementSyncStatus)&&"Transferred"!==g.elementSyncStatus||(m.flowdownStatus="Flowdown Pending"),"Started"===g.elementStatus&&(m.flowdownStatus="Flowdown Pending"),"Rejected"===g.elementStatus&&(m.flowdownStatus="Flowdown Pending"),r[g.elementIdentifier]=m}}for(var h in c){var v=c[h];UWA.is(v)&&u.forEach((function(t){if(-1!=v.resolutionValidIdentifiers.indexOf(t))if(v.resolutionObject)i.push(s),r[t]&&(r[t].resolution||(r[t].resolution=[]),r[t].resolution.push({objectData:v.resolutionObject}),r[t].directResolution=!0,r[t].proposedResolution=!1);else{var a=v.resolutionPointedId;for(var n in e){var o=e[n];if(o)if(o.id===a){r[t].resolution||(r[t].resolution=[]),r[t].resolution.push({proposedId:a,objectData:o.where}),r[t].directResolution=!1,r[t].proposedResolution=!0,o.flowdownInfo||(o.flowdownInfo={flowdownFor:[],flowdownFrom:[]}),o.flowdownInfo.flowdownFor.push(s.where);var l={caID:r[t].caID,caTitle:r[t].caTitle,caName:r[t].caName};o.flowdownInfo.flowdownFrom.push(l)}}}-1!=v.resolutionRejectedIdentifiers.indexOf(t)&&v.resolutionObject&&(i.push(s),r[t]&&(r[t].resolution||(r[t].resolution=[]),r[t].resolution.push({objectData:v.resolutionObject}),r[t].directResolution=!0,r[t].proposedResolution=!1))}))}}Array.isArray(c)&&0===c.length&&(r=n.setDirectResolvedPropsoed(s,r))}}for(var y in a){var C=a[y];UWA.is(C)&&(r[C.elementIdentifier]={amoID:C.elementPointedId,caID:C.elementPointedCAId,caTitle:C.elementPointedCATitle,caName:C.elementPointedCAName,flowdownStatus:"Ignored"})}return r},getFlowdownMappingForSlideIn:function(){return this.mapping},setDirectResolvedPropsoed:function(e,t){if(UWA.is(e)){var a=e.flowdownElements;for(var n in a){var i=a[n];i&&(t[i.elementIdentifier]={amoID:i.elementPointedId,caID:i.elementPointedCAId,caTitle:i.elementPointedCATitle,caName:i.elementPointedCAName,flowdownStatus:i.elementStatus},"Flowdown Pending"!==i.elementStatus&&"Flowdown Complete"!==i.elementStatus&&"Started"!==i.elementStatus&&"Complete"!==i.elementStatus||(t[i.elementIdentifier].resolution||(t[i.elementIdentifier].resolution=[]),t[i.elementIdentifier].resolution.push({objectData:e.where}),t[i.elementIdentifier].directResolution=!0,t[i.elementIdentifier].proposedResolution=!1))}}return t}};return n})),define("DS/ENOChgServices/scripts/services/ChgIDCardHeaderServices",["UWA/Core","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/LifecycleCmd/MaturityCmd","DS/PlatformAPI/PlatformAPI","DS/ENOjquery/ENOjquery","text!DS/ENOChgServices/assets/ChangeActionMapping.json","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS"],(function(e,t,a,n,i,r,o,s,l,c,d){"use strict";return{populateCOSearchResults:function(e,t,n){if(a.getGlobalVariable().isNative){for(var i=t.split("~"),r=[],o=0;o<i.length;o++)r.push(i[o]);for(var s=[],c=0;c<i.length;c++)s.push(r[c].split(","));t=s}var d=l(".modal-footer")[0];d&&(d.childNodes[0].disabled=!1);var u=e.substr(0,e.indexOf("_")),p=document.getElementById(u),f=document.getElementById(u+"_hidden"),g="",m="",h=p.value.split(",");!n&&t.length>1&&(t=t.slice(0,1));for(o=0;o<t.length;o++){var v=t[o];(n&&-1==h.indexOf(v[1])||!n)&&(""!=g&&(g+=","),g+=v[1],""!=m&&(m+=","),m+=v[0])}n?(""!=g&&(""!=p.value?p.value=p.value+","+g:p.value=g),""!=m&&(""!=f.value?f.value=f.value+","+m:f.value=m)):(p.value=g,f.value=m)},getCompletedTaskDetails:function(e){return new Promise((function(t,a){var i="/resources/modeler/change/inboxtask/"+e;n.makeWSCall(i,"GET","enovia","application/json","",(function(e){var a={};a.completedTaskDetail=e,t(a)}),null,!1)}))},getTaskDetails:function(e){return new Promise((function(t,a){var i="/resources/modeler/change/inboxtask/retrieveForUser/"+e;n.makeWSCall(i,"GET","enovia","application/json","",(function(e){var a={};a.taskDetail=e,t(a)}),null,!1)}))},createLifecycleSpanContent:function(t){var a=this,n=e.extendElement(document.body).getElement("#lifecycleSpan");if(n){n.empty();t.get("current");var i=t.get("currentDisplay"),r=t.get("holdStatus"),o="cursorPointer",s="a",l=t.get("userAccess"),c=!0,u=!0;l&&(c="true"===l.Promote,u="true"===l.Demote),"true"!==r&&(c||u)||("true"===r&&(i=i+" ["+d.CHG_CA_Hold_State+"] "),o="cursorDefault",s="text");var p={hold:"true"===r,promote:c,demote:u},f=[];t.set("objectId",t.get("id")),f.push(t);var g=!1;n.addContent({tag:"span",html:[{tag:"label",text:d.ECM_CA_Maturity_State+" : "},{tag:"span",html:"&nbsp;&nbsp;"},{tag:s,text:i,id:"ca_header_maturity",class:o,events:{click:function(){setTimeout((function(){g||a.changeMaturity(f,t,p),g=!0}),500)}}}]})}else;},changeMaturity:function(e,t,n){if(!(!n||n&&n.hold||n&&!n.promote&&!n.demote))if(a.getGlobalVariable().isNative)if("In Work"===t.get("current")){var r={stateName:""};r.caPhysicalId=t.id.replace("pid:","");var o=JSON.stringify(r);i.DispatchEventToWin("CA_MoveFrm_InWork",o)}else this.changeMaturityExecute(e,t);else this.changeMaturityExecute(e,t)},changeMaturityExecute:function(e,n){var i=[],r=[];e.forEach((function(e){var t=e.get("objectId");null!=t&&null!=t&&""!=t||(t=e.get("id")),r.push(t),i.push({physicalid:t.substring(4)})}));var l={securityContext:{SecurityContext:a.getGlobalVariable().getSecurityContext(),tenant:a.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}};new o({context:l,ID:"MaturityHdr"}).executeAsync(i).then((function(){var e={};t.mask(widget.body),e.onComplete=function(e){t.unmask(widget.body),t.unmask(widget.body);var a={id:e.id,maturity:e.get("current"),groupId:e.get("groupid")};s.publish("ca-IDCard-on-change-maturity",a)},n.fetch(e),console.log("Maturity  updated")}))},getCAthumbnailUrl:function(e){for(var t=e.get("referentials").toArray(),a="",n=JSON.parse(c).IMAGE,i=t.length-1;i>=0;i--){var r=null!=t[i]&&null!=t[i].get("fileExtension")?t[i].get("fileExtension").slice(1):"temp";if(n.includes(r.toUpperCase())){a=i;break}}return""!==a?t[a].get("image"):e.get("image")},getCAThumbnailUrl:function(e,t){for(var a=e.get("referentials").toArray(),n="",i=JSON.parse(c).IMAGE,r=a.length-1;r>=0;r--){var o=null!=a[r]&&null!=a[r].get("fileExtension")?a[r].get("fileExtension").slice(1):"temp";if(i.includes(o.toUpperCase())){n=r;break}}return""!==n?a[n].get("image"):e.get("image")},promoteChangeAction:function(e,t){return new Promise((function(a,i){var o='{ "data" : [{ "physicalid":"'+e+'","tostate":"'+t+'"}]}';n.makeWSCall("/resources/lifecycle/maturity/promote","POST","enovia","application/json",o,(function(t){if(null!=t.status&&""!=t.status&&"failure"==t.status)r.error(t.report[0].error);else if(null!=t.status&&""!=t.status&&"success"==t.status)var n={id:e,maturity:t.results[0].current};a(n)}),(function(e,t){r.error(e),i(e)}),!1)}))}}})),define("DS/ENOChgServices/scripts/services/ChgPropertiesComponentServices",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/UIKIT/Alert","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS"],(function(e,t,a,n,i,r,o){"use strict";var s={GetChangeRequired:function(e){return new Promise((function(t,a){var n="pid:"+e,r=[];r.push(n);var o={ObjectsListForGetChangeControl:r};o=JSON.stringify(o);i.makeWSCall("/resources/modeler/change/changecontrol","POST","enovia","application/json",o,(function(e){var a={};if(e&&e.objectListChangeControlled){var n=e.objectListChangeControlled[0];n&&(a.CCValue=n.changeControlValue)}e&&e.ChangeData&&(a.ChangeData=e.ChangeData[0]),e&&e.GroupChangeData&&(a.GroupChangeData=e.GroupChangeData[0]),t(a)}),null)}))},GetChangeRequiredInfoNew:function(e){return new Promise((function(t,a){var n="/resources/v1/chguxservices/connectedChange/"+e+"/getChangeRequiredStatus";i.makeWSCall(n,"GET","enovia","application/json","",(function(e){var a={};if(e&&e.data&&e.data[0]){var n=e.data[0];a.CCValue=n.changeControlStatus,a.ChangeData=n,n.GroupChangeData&&(a.GroupChangeData=e.GroupChangeData)}t(a)}),a,!1)}))},GetChangeRequiredInfoNewPost:function(e){return new Promise((function(t,a){let n={data:e};n=JSON.stringify(n);i.makeWSCall("/resources/v1/chguxservices/connectedChange/getChangeRequiredInfo","POST","enovia","application/json",n,(function(e){var a={};if(e&&e.data&&e.data[0]){var n=e.data[0];a.CCValue=n.changeControlStatus,a.ChangeData=n,n.GroupChangeData&&(a.GroupChangeData=e.GroupChangeData)}t(a)}),a,!1)}))},UpdateChangeControlInfoNewPost:function(e){return new Promise((function(t,a){let n={data:e};n=JSON.stringify(n);i.makeWSCall("/resources/v1/chguxservices/connectedChange/updateChangeControlStatus","POST","enovia","application/json",n,(function(e){var a={};if(e&&e.data&&e.data[0]){var n=e.data[0];a.CCValue=n.changeControlStatus,a.ChangeData=n,n.GroupChangeData&&(a.GroupChangeData=e.GroupChangeData)}t(a)}),(function(e,t){console.log("Web service call failed:",e),t&&t.error&&r.error(t.error),a(e)}),!1)}))},SetUnsetChangeRequired:function(e,t){return new Promise((function(a,n){var o="pid:"+e,s=[];s.push(o);var l={};l="Set"==t?{ObjectsListForSetChangeControl:s}:{ObjectsListForUnSetChangeControl:s},l=JSON.stringify(l);i.makeWSCall("/resources/modeler/change/changecontrol","PUT","enovia","application/json",l,(function(e){var t={};if(e&&e.objectListChangeControlled){var n=e.objectListChangeControlled[0];n&&(t.CCValue=n.changeControlValue)}e&&e.ChangeData&&(t.ChangeData=e.ChangeData[0]),a(t)}),(function(e,t){r.error(t.errorMessage);n({})}))}))},getImpactedCA:function(e){return new Promise((function(t,a){var n="pid:"+e,r=[];r.push(n);var o={};o={"impacted items":r},o=JSON.stringify(o);i.makeWSCall("/resources/modeler/change/impactAnalysis","POST","enovia","application/json",o,(function(e){var a={};e.object[0].impacting&&(a=e.object[0].impacting["complete ca"][0]),t(a)}),null)}))},getRouteFromChangeAction:function(e){return new Promise((function(t,a){var n="/resources/modeler/change/changeaction/"+e+"?lastApprovalRoute=1";i.makeWSCall(n,"GET","enovia","application/json","",(function(e){var a={};a.lastApproveRoute=e.changeaction.lastApprovalRoute,t(a)}),null,!1)}))},getRouteDetails:function(e){return new Promise((function(t,a){var n="/resources/v1/modeler/routes/"+(e=e.replace("pid:",""))+"/tasks";i.makeWSCall(n,"GET","enovia","application/json","",(function(e){var a={};a.routeInfo=e,t(a)}),null,!1)}))},checkIfObjectIsConfigurableAndHasConfigContext:function(e){return new Promise((function(t,a){var n={version:"1.0",pidList:[e]};n=JSON.stringify(n),i.makeWSCall("/resources/modeler/configuration/navigationServices/getMultipleConfigurationContextInfo","POST","enovia","application/ds-json",n,(function(e){t(e)}),(function(e){t({})}),!1)}))},getConfiguredObjectInfo:function(e){return new Promise((function(t,a){s.checkIfObjectIsConfigurableAndHasConfigContext(e).then((function(e){if(e&&e.referencesInfo&&"YES"==e.referencesInfo[0].isConfigurable&&"YES"==e.referencesInfo[0].hasConfigContext){var a={error:o.ECM_CONFIGURED_DATA_ERR};t(a)}else t({})}))}))},getCADetails:function(e){return new Promise((function(t,a){var n="/resources/modeler/change/changeaction/"+e+"?people=1&attributes=1&referentials=1";i.makeWSCall(n,"GET","enovia","application/json","",(function(e){t(e)}),a,!1)}))},buildApprovalSummaryDataGridModel:function(t){var n=new a,i=new e({dataModelSet:n,useAsyncPreExpand:!0});return t.forEach((function(e){var t=s.createTreeModel(n,e);i.addChild(t)})),i.prepareUpdate(),i.pushUpdate(),i},createTreeModel:function(e,a){return new t.createTreeNodeDataModel(e,{label:a.get("taskName"),children:[],icons:[],grid:{order:a.get("order"),title:a.get("taskTitle"),approver:a.get("taskApprover"),status:a.get("approvalStatus"),comments:a.get("approvalComments"),approvalDate:a.get("actualComplDate")}})},getChangeActionForGrop:function(e){return new Promise((function(t,a){var n="/resources/modeler/change/group/"+e+"?";i.makeWSCall(n,"GET","enovia","application/json","",(function(e){t(e)}),a,!1)}))}};return s})),define("DS/ENOChgServices/scripts/services/ChgReferentialServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgInfraService"],(function(e,t){"use strict";return{addReferentialToCA:function(e,a,n,i){var r="/resources/modeler/change/changeaction/"+a;t.makeWSCall(r,"PUT","enovia","application/json",e,n,i)},removeReferentialFromCA:function(e,a,n,i){var r="/resources/modeler/change/changeaction/"+a;t.makeWSCall(r,"PUT","enovia","application/json",e,n,i)},getCAReferentialData:function(e){return new Promise((function(a,n){var i="/resources/modeler/change/changeaction/"+e+"?referentials=1";t.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))}}})),define("DS/ENOChgServices/scripts/services/ChgDataService",["DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChangeActionUX/scripts/CASpinner"],(function(e,t,a){"use strict";return{updateRealizedActivityDescription:function(t,a,n){return new Promise((function(i,r){var o="/resources/v1/chguxservices/changeaction/"+t+"/realizedChanges";let s=JSON.stringify({activity_ids:a,activity_description:n,operation:"setWhy",action:"setWhy"});e.makeWSCallWithCSRF(o,"PUT","enovia","application/json",s,(function(e){i(e)}),r,!1)}))},getCARealizedChanges:function(t,a,n,i,r){var o="";return a&&(o=a),new Promise((function(a,s){var l="/resources/v1/chguxservices/changeaction/"+t+"/realizedChanges?realizedFilter="+o+"&lastIndexedTime="+n;UWA.is(i)&&!0===i&&UWA.is(r)&&(l+="&flowdown=true&targetCAID="+r);e.makeWSCall(l,"GET","enovia","application/json","",(function(e){a(e)}),(function(e){s(e)}),!1)}))},getTimestamp:function(){return new Promise((function(a,n){var i=t.getGlobalVariable().getSecurityContext(),r="/cvservlet/indexingdate?SecurityContext="+encodeURIComponent(i),o={select_service:["FTS"]};o=JSON.stringify(o);e.makeWSCall(r,"POST","enovia","application/json",o,(function(e){a(e)}),n,null)}))},deleteObjectStructure:function(t){return new Promise((function(a,n){var i={data:t,options:[]},r=JSON.stringify(i);e.makeWSCall("/resources/lifecycle/Delete/structure","POST","enovia","application/json",r,(function(e){a(e)}),n,!1)}))},handleContextMenuClickHold:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changeorder/"+t.chgPhysicalId+"/hold",o={data:[{dataelements:{reason:i}}],definitions:[]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){var t={};t.userDisplayName=e,a(t)}),null)}))},handleContextMenuClickResume:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changeorder/"+t.chgPhysicalId+"/resume",o={data:[{dataelements:{reason:i}}],definitions:[]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){var t={};t.userDisplayName=e,a(t)}),null)}))},handleContextMenuClickCancel:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changeorder/"+t.chgPhysicalId+"/cancel",o={data:[{dataelements:{reason:i}}],definitions:[]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){var t={};t.userDisplayName=e,a(t)}),null)}))},handleContextMenuClickHoldForCR:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changerequest/"+t.chgPhysicalId+"/hold",o={data:[{reason:i}]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){a(e)}),null)}))},handleContextMenuClickResumeForCR:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changerequest/"+t.chgPhysicalId+"/resume",o={data:[{reason:i}]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){a(e)}),null)}))},handleContextMenuClickCancelForCR:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changerequest/"+t.chgPhysicalId+"/cancel",o={data:[{reason:i}],definitions:[]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){a(e)}),null)}))},getConfiguredChangeActionList:function(t){return new Promise((function(a,n){var i="",r="",o="",s="",l="";i=1==t.simplifiedJSON?"$simpleJSON=true":"$simpleJSON=false",t.pageNumber&&(r="&page="+t.pageNumber),t.pageSize&&(o="&pageSize="+t.pageSize),s=1==t.indexed?"&indexed=true":"&indexed=false",t.timestamp&&(l="&lastIndexedTime="+t.timestamp);var c="/resources/v1/chguxservices/changeaction?"+i+r+o+s+l+(null!=t.filter&&"inactiveCA"==t.filter?"&active=false":"&active=true");let d={},u="";t.refine&&(d.refine={},d.refine={data:[t.refine.allfilters]},u="refine="+JSON.stringify(d.refine));e.makeWSCallWithCSRF(c,"POST","enovia","application/x-www-form-urlencoded",u,(function(e){a(e)}),n,!1)}))},getConfiguredChangeOrderList:function(t){return new Promise((function(a,n){var i="",r="",o="",s="",l="";i=1==t.simplifiedJSON?"$simpleJSON=true":"$simpleJSON=false",t.pageNumber&&(r="&page="+t.pageNumber),t.pageSize&&(o="&pageSize="+t.pageSize),s=1==t.indexed?"&indexed=true":"&indexed=false",t.timestamp&&(l="&lastIndexedTime="+t.timestamp);var c="/resources/v1/chguxservices/changeorder?"+i+r+o+s+l+(null!=t.filter&&"inactiveCO"==t.filter?"&active=false":"&active=true");let d={},u="";t.refine&&(d.refine={},d.refine={data:[t.refine.allfilters]},u="refine="+JSON.stringify(d.refine));e.makeWSCallWithCSRF(c,"POST","enovia","application/x-www-form-urlencoded",u,(function(e){a(e)}),n,!1)}))},getConfiguredChangeRequestList:function(t){return new Promise((function(a,n){var i="",r="",o="",s="",l="";i=1==t.simplifiedJSON?"$simpleJSON=true":"$simpleJSON=false",t.pageNumber&&(r="&page="+t.pageNumber),t.pageSize&&(o="&pageSize="+t.pageSize),s=1==t.indexed?"&indexed=true":"&indexed=false",t.timestamp&&(l="&lastIndexedTime="+t.timestamp);var c="/resources/v1/chguxservices/changerequest?"+i+r+o+s+l+(null!=t.filter&&"inactiveCR"==t.filter?"&active=false":"&active=true");let d={},u="";t.refine&&(d.refine={},d.refine={data:[t.refine.allfilters]},u="refine="+JSON.stringify(d.refine));e.makeWSCallWithCSRF(c,"POST","enovia","application/x-www-form-urlencoded",u,(function(e){a(e)}),n,!1)}))},getConfiguredInvestigationRequestList:function(t){return new Promise((function(a,n){var i="",r="",o="",s="",l="";i=1==t.simplifiedJSON?"$simpleJSON=true":"$simpleJSON=false",t.pageNumber&&(r="&page="+t.pageNumber),t.pageSize&&(o="&pageSize="+t.pageSize),s=1==t.indexed?"&indexed=true":"&indexed=false",t.timestamp&&(l="&lastIndexedTime="+t.timestamp);var c="/resources/v1/chguxservices/investigationRequest?"+i+r+o+s+l+(null!=t.filter&&"inactiveCR"==t.filter?"&active=false":"&active=true");let d={},u="";t.refine&&(d.refine={},d.refine={data:[t.refine.allfilters]},u="refine="+JSON.stringify(d.refine));e.makeWSCallWithCSRF(c,"POST","enovia","application/x-www-form-urlencoded",u,(function(e){a(e)}),n,!1)}))},getChangeOrderInfo:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/changeorder/"+t;1==a&&(r+="?$simpleJSON=true");e.makeWSCallWithCSRF(r,"GET","enovia","application/json","",(function(e){n(e)}),i,!1)}))},getChangeRequestInfo:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/changerequest/"+t;e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getChangeOrchestration:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/changeorder/"+t+"/changeorchestration";a&&(r+="?$simpleJSON=true");e.makeWSCallWithCSRF(r,"GET","enovia","application/json","",(function(e){n(e)}),i,!1)}))},getCRChangeOrchestration:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/changerequest/"+t+"/changeOrchestration";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},addExistingInCRChangeOrchestration:function(t,a,n){return new Promise((function(i,r){let o;o="Change Request"==a?"/resources/v1/chguxservices/changerequest/"+t+"/changeOrchestration/connect":"/resources/v1/chguxservices/changeorder/"+t+"/changeorchestration/connect?$simpleJSON=true";let s={data:n,definitions:[]};s=JSON.stringify(s);e.makeWSCallWithCSRF(o,"PUT","enovia","application/json",s,(function(e){i(e)}),r,!1)}))},addExistingChangeOrchestration:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/changeorder/"+t+"/changeorchestration/connect",o={data:a,definitions:[]};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},removeInCRChangeOrchestration:function(t,a,n){return new Promise((function(i,r){let o;o="Change Request"==a?"/resources/v1/chguxservices/changerequest/"+t+"/changeOrchestration/disconnect":"/resources/v1/chguxservices/changeorder/"+t+"/changeorchestration/disconnect?$simpleJSON=true";let s={data:n,definitions:[]};s=JSON.stringify(s);e.makeWSCallWithCSRF(o,"PUT","enovia","application/json",s,(function(e){i(e)}),r,!1)}))},removeChangeOrchestration:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/changeorder/"+t+"/changeorchestration/disconnect",o={data:a,definitions:[]};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},getApplicabilityData:function(t){return new Promise((function(a,n){let i=`/resources/ecm/modeler/changeorder/pid:${t}/getapplicability`;e.makeWSCall(i,"GET","enovia","application/json","",a,n,null)}))},getAttachementData:function(t,a){return null==a&&(a="Reference Document"),new Promise((function(n,i){var r="/resources/v1/modeler/documents/parentId/"+t+"?parentRelName="+a;e.makeWSCall(r,"GET","enovia","application/json","",(function(e){n(e)}),(function(e){i(e)}),null)}))},getCOChangeRequestData:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/changeorder/"+t+"/changerequest";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),(function(e){n(e)}),null)}))},getObjectInfo:function(t,a){return new Promise((function(n,i){if(t&&t.length>0){t=t.toString(),a=a&&a.length>0?a.toString():"name";var r="$ids="+t;r+="&$fields="+a;e.makeWSCall("/resources/v2/e6w/service/ObjectInfo","POST","enovia","application/x-www-form-urlencoded",r,(function(e){n(e.data)}),i,!1)}else n(!0)}))},getIssueDetails:function(t){return new Promise((function(a,n){var i={issueVersion:"DS-API-Version",version:"2.0"},r="/resources/issues/"+t;e.makeWSCallWithCSRF(r,"GET","enovia","application/json","",(function(e){a(e)}),n,i)}))},getRouteDetails:function(t){return new Promise((function(a,n){var i="/resources/v1/modeler/routes/"+(t=t.replace("pid:",""));e.makeWSCall(i,"GET","enovia","application/json","",(function(e){var t={};t.routeInfo=e,a(t)}),null,!1)}))},createGroupForChangeAction:function(t){return new Promise((function(a,n){var i={title:t.title,changeactions:t.changeactions},r=JSON.stringify(i);e.makeWSCall("/resources/modeler/change/group","POST","enovia","application/json",r,(function(e){a(e)}),null,!1)}))},removeGroupFromCA:function(t){return new Promise((function(a,n){var i=t.oldGroupId,r={addChangeActions:[],removeChangeActions:t.changeactions},o="/resources/modeler/change/group/"+i,s=JSON.stringify(r);e.makeWSCall(o,"PUT","enovia","application/json",s,(function(e){a(e)}),null,!1)}))},updateGroupToAddCA:function(t){return new Promise((function(a,n){var i=t.availbleGroupId,r={addChangeActions:t.changeactions,removeChangeActions:[]},o="/resources/modeler/change/group/"+i,s=JSON.stringify(r);e.makeWSCall(o,"PUT","enovia","application/json",s,(function(e){a(e)}),null,!1)}))},getListOfGroups:function(){return new Promise((function(t,a){e.makeWSCall("/resources/modeler/change/group/elligibleGroups","GET","enovia","application/json","",(function(e){t(e)}),null,!1)}))},getRouteBasedOnContentId:function(t){return new Promise((function(a,n){var i="/resources/v1/modeler/routes?whereUsed="+t;e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),(function(e){n(e)}),null)}))},getAllApprovalRouteIterations:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/connectedChange/"+t+"/getAllApprovalRouteIterations";e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getChangeOrderUserAccess:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/changeorder/"+t+"/access";e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getChangeRequestUserAccess:function(t){return new Promise((function(a,n){let i="/resources/v1/chguxservices/changerequest/"+t+"/access?$simpleJSON=false";e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getImpactAnalysisUserAccess:function(t){return new Promise((function(a,n){let i=`/resources/v1/chguxservices/impactAnalysis/${t}/access?$simpleJSON=false`;e.makeWSCall(i,"GET","enovia","application/json","",a,n,!1)}))},getChangeRequests:function(){return new Promise((function(t,a){e.makeWSCallWithCSRF("/resources/v1/chguxservices/changerequest","GET","enovia","application/json","",(function(e){let a={};a=e,t(a)}),a,!1)}))},getObjectTypeInformation:function(t){return"string"==typeof t?new Promise((function(a,n){let i=`/resources/v2/e6w/service/ApplicabilityTypeInfo/${t}`;e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){let t;e.data[0].dataelements&&null!=e.data[0].dataelements.applicabilityType&&(t=e.data[0].dataelements.applicabilityType),a(t)}),n,!1)})):"object"==typeof t?new Promise((function(a,n){let i=`/resources/v2/e6w/service/ApplicabilityTypeInfo/${t}`;e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)})):void 0},getCRAffectedItems:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/changerequest/"+t+"/affectedItems";r+=!0===a?"?impactAnalysis=1":"?impactAnalysis=0";e.makeWSCall(r,"GET","enovia","application/json","",(function(e){n(e)}),i,!1)}))},getIRAffectedItems:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/investigationRequest/"+t+"/affectedItems";r+=!0===a?"?impactAnalysis=1":"?impactAnalysis=0";e.makeWSCall(r,"GET","enovia","application/json","",(function(e){n(e)}),i,!1)}))},addExistingInCRAffectedItems:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changerequest/"+t+"/affectedItems",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},addExistingInIRAffectedItems:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/affectedItems",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},createDispositionFromIR:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/createDisposition",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},createDispositionThroughVerticalAssessment:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/createDispositionThroughVerticalAssessment",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},createResolvedByFromIR:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/createResolvedBy",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},massUpdateOnChangeImpacts:t=>new Promise(((a,n)=>{let i={data:t};i=JSON.stringify(i),e.makeWSCallWithCSRF("/resources/v1/chguxservices/investigationRequest/massUpdateOnChangeImpacts","PUT","enovia","application/json",i,a,n,!1)})),removeCRAffectedItems:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changerequest/"+t+"/affectedItems",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n([e,t])}),i,!1)}))},removeIRAffectedItems:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/affectedItems",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n([e,t])}),i,!1)}))},removeDisposition:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/removeDisposition",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n(e)}),i,!1)}))},removeResolvedBy:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/removeResolvedBy",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n(e)}),i,!1)}))},reviseDisposition:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/reviseDisposition",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n(e)}),i,!1)}))},replaceDisposition:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/replaceDisposition",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n(e)}),i,!1)}))},getAllAffectedUsages:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/getAllAffectedUsages",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n(e)}),i,!1)}))},changeDispositionType:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/changeDispositionType",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n(e)}),i,!1)}))},getWindowOfImpact:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/investigationRequest/"+t+"/windowOfImpact";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},updateWindowOfImpact:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/windowOfImpact",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},changeBusinessState:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/changeBusinessState",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n(e)}),i,!1)}))},getCRImpactAnalysis:function(t,a){return new Promise(((n,i)=>{let r="",o="";a&&a.filterView&&"rolledUpIA"==a.filterView?o=`/resources/v1/chguxservices/changerequest/${t}/impactAnalysisForRolledUpViewSummary`:(o=`/resources/v1/chguxservices/changerequest/${t}/impactAnalysisSummary`,r=a&&a.filterView&&"inactiveIA"==a.filterView?"?active=false":"?active=true",o+=r);e.makeWSCallWithCSRF(o,"GET","enovia","application/json","",n,i,!1)}))},getIssue:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/";"ChangeOrder"==t.type?i+="changeorder/":"ChangeRequest"==t.type?i+="changerequest/":"InvestigationRequest"==t.type?i+="investigationRequest/":i+="changeaction/",i=i+t.id+"/issues";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getAffectedItemsOnExpand:function(t,a){return new Promise((function(n,i){let r="";var o="/resources/v1/chguxservices/investigationRequest/"+t+"/AffectedItemsOnExpand";r=a&&1==a?"?affectedItemView=true":"?affectedItemView=false",o+=r;e.makeWSCallWithCSRF(o,"GET","enovia","application/json","",(function(e){n(e)}),i,!1)}))},getConnectedCA:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/impactAnalysis/"+t+"/implementingChangeActions";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},addExistingChangeActionImpactAnalysis:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/impactAnalysis/"+t+"/connectCAtoIA",o={data:a,definitions:[]};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},removeInCRChangeActionView:function(t,a,n){return new Promise((function(i,r){let o;"Change Action"==a&&(o="/resources/v1/chguxservices/impactAnalysis/"+t+"/disconnectCAfromIA");let s={data:n,definitions:[]};s=JSON.stringify(s);e.makeWSCallWithCSRF(o,"PUT","enovia","application/json",s,(function(e){i(e)}),r,!1)}))},getCRRelatedScope:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/changerequest/"+t+"/reportedAgainst";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getCORelatedScope:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/changeorder/"+t+"/reportedAgainst";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getGovernedDataForCA:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/changeaction/"+t+"/governedData";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getChangeGroupData:function(t){return new Promise((function(a,n){var i="/resources/modeler/change/changeaction/pid:"+t+"?attributes=1";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getChangeActionForGroup:function(t){return new Promise((function(a,n){var i="/resources/modeler/change/group/"+t+"?";e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},updateExistingImpactBasis:function(t,a,n){return new Promise((function(t,i){const r=`/resources/v1/chguxservices/impactAnalysis/${a}/impactBasis`;let o={data:n};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,t,i,!1)}))},updateExistingIssue:function(t,a){return new Promise((function(n,i){let r,o="/resources/issues/"+t+"/related";r=JSON.stringify(a);e.makeWSCallWithCSRF(o,"PUT","enovia","application/json",r,(function(e){n(e)}),i,!1)}))},removeExistingIssue:function(t,a){return new Promise((function(n,i){let r,o="/resources/issues/"+t+"/related";r=JSON.stringify(a);e.makeWSCallWithCSRF(o,"DELETE","enovia","application/json",r,(function(e){n(e)}),i,!1)}))},updateExistingImpactItem:function(t,a,n){return new Promise((function(t,i){const r=`/resources/v1/chguxservices/impactAnalysis/${a}/impactedItems`;let o={data:n};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,t,i,!1)}))},updateExistingRelatedScope:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changerequest/"+t+"/reportedAgainst",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},updateExistingCORelatedScope:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeorder/"+t+"/reportedAgainst",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},removeExistingRelatedScope:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changerequest/"+t+"/reportedAgainst",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},duplicateImpactAnalysis:(t,a)=>new Promise(((n,i)=>{let r=`/resources/v1/chguxservices/changerequest/${t}/duplicateChangeAnalysis`,o={data:a};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),refineImpactAnalysis:(t,a)=>new Promise(((n,i)=>{let r=`/resources/v1/chguxservices/changerequest/${t}/refineChangeAnalysis`,o={data:a};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),dispatchImpactAnalysisToSubCR:function(t,a){return new Promise(((n,i)=>{let r=`/resources/v1/chguxservices/changerequest/${t}/dispatchImpactAnalysisToChildCR`,o={data:a};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)}))},removeExistingCORelatedScope:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeorder/"+t+"/reportedAgainst",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},updateExistingContributors:function(t,a,n){return new Promise((function(t,i){const r=`/resources/v1/chguxservices/impactAnalysis/${a}/contributors`;let o={data:n};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,t,i,!1)}))},updateActivities:function(t,a){return new Promise((function(n,i){const r=`/resources/v1/chguxservices/impactAnalysis/${t}/activities`;let o=[];o.push({parentCRId:a});let s={data:o};s=JSON.stringify(s),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,n,i,!1)}))},getCAInfoImpactedItems:(t,a)=>new Promise(((n,i)=>{var r="/resources/v1/chguxservices/connectedChange/"+a+"/proposedChangeActionInImpacts";let o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),getImpactAnalysisFromId:function(t,a){return new Promise((function(n,i){let r=`/resources/v1/chguxservices/impactAnalysis/${t}/`;a&&(r+=`?$include=${a}`);e.makeWSCallWithCSRF(r,"GET","enovia","application/json","",n,i,!1)}))},getImpactAnalysisFacet:function(t,a){return new Promise((function(n,i){let r="";r="contributors"==a?`/resources/v1/chguxservices/impactAnalysis/${t}/?$include=${a},activeRoutes`:`/resources/v1/chguxservices/impactAnalysis/${t}/?$include=${a}`;e.makeWSCallWithCSRF(r,"GET","enovia","application/json","",n,i,!1)}))},getNewCADetails:function(t){return new Promise((function(a,n){var i="/resources/modeler/change/changeaction/pid:"+t+"?people=1&attributes=1";e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getChangeActionInfo:function(t){return new Promise((function(a,n){let i="/resources/v1/chguxservices/changeaction/"+t;e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",a,n,!1)}))},getChangeActionUserAccess:function(t){return new Promise((function(a,n){let i="/resources/v1/chguxservices/changeaction/"+t+"/access";e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},handleContextMenuClickHoldForCA:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changeaction/"+t.chgPhysicalId+"/hold",o={data:[{reason:i}]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){a(e)}),null)}))},handleContextMenuClickResumeForCA:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changeaction/"+t.chgPhysicalId+"/resume",o={data:[{reason:i}]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){a(e)}),null)}))},handleContextMenuClickCancelForCA:function(t){return new Promise((function(a,n){var i=t.userComment,r="/resources/v1/chguxservices/changeaction/"+t.chgPhysicalId+"/cancel",o={data:[{reason:i}],definitions:[]},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){a(e)}),null)}))},duplicateChangeActionCA:t=>new Promise(((a,n)=>{let i=`/resources/v1/chguxservices/changeaction/${t}/duplicateChangeAction`,r="";r=JSON.stringify(r),e.makeWSCallWithCSRF(i,"GET","enovia","application/json",r,a,n,!1)})),duplicateChangeRequestCR:t=>new Promise(((a,n)=>{let i=`/resources/v1/chguxservices/changerequest/${t[0].id}/duplicateChangeRequest`,r={data:t};r=JSON.stringify(r),e.makeWSCallWithCSRF(i,"PUT","enovia","application/json",r,a,n,!1)})),handleContextMenuClickBOMSyncForCA:function(t){return new Promise((function(n,i){var r="/resources/modeler/change/changeaction/"+("pid:"+t.chgPhysicalId)+"/synchronize";a.doWait(widget.body),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json","",(function(e){a.endWait(widget.body),n(e)}),null)}))},getCAContext:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/changeaction/"+t+"/contexts";e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},updateExistingCAContext:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+t+"/contexts",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},getApplicabilityDataForCA:function(t){return new Promise((function(a,n){let i=`/resources/modeler/change/changeaction/pid:${t}?applicability=1`;e.makeWSCall(i,"GET","enovia","application/json","",a,n,null)}))},connecteCAwithImpactedItem:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/impactAnalysis/"+a+"/connectImpactedItemsAsProposed",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),moveAffactedItemToOtherCR:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/changerequest/"+a+"/moveAffectedItems",o={data:t};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n([e,t])}),i,!1)})),orchestrateImpactAnalysis:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/connectedChange/"+a+"/orchestrateItemsForChange",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),orchestrateChangeOrder:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/connectedChange/"+a+"/orchestrateItemsForChange",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),orchestrateChangeAction:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/connectedChange/"+a+"/orchestrateItemsForChange",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),connecteIAwithAffactedItem:t=>new Promise(((a,n)=>{let i={data:t};i=JSON.stringify(i),e.makeWSCallWithCSRF("/resources/v1/chguxservices/connectedChange/connectAffectedItemsAsAnalysisBasis","POST","enovia","application/json",i,a,n,!1)})),mergeChangeAction:t=>new Promise(((a,n)=>{let i={data:t};i=JSON.stringify(i),e.makeWSCallWithCSRF("/resources/v1/chguxservices/connectedChange/mergeChangeAction","POST","enovia","application/json",i,a,n,!1)})),updateAIReasonForChangeValue:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/changerequest/"+a+"/setWhyForAffectedItems",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),updateImpactItemReasonForChangeValue:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/impactAnalysis/"+a+"/setWhyForImpactedItems",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),updateStatusOfImpactedItem:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/impactAnalysis/"+a+"/setStatusForImpactedItems",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),updateImpactBasisReasonForChangeValue:(t,a)=>new Promise(((n,i)=>{let r="/resources/v1/chguxservices/impactAnalysis/"+a+"/setWhyForImpactBasis",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)})),cancelRelatedImpactAnalysis:function(t,a){return new Promise((function(n,i){var r=`/resources/v1/chguxservices/changerequest/${t}/cancelChangeAnalysis`,o=JSON.stringify(a);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)}))},handleContextMenuClickWorkUnder:function(t){return new Promise((function(a,n){let i="/resources/modeler/change/changeaction/"+("pid:"+t.chgPhysicalId)+"?editability=1&attributes=1";e.makeWSCall(i,"GET","enovia","application/json","",a,n,!1)}))},deleteImpactAnalysis:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/connectedChange/"+t+"/deleteImpactAnalysis",o={data:a},s=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",s,(function(e){n(e)}),i,!1)}))},getChangeImpacts:function(t,a,n){return new Promise((function(i,r){var o={data:[{id:t,service:n,type:a}]},s=JSON.stringify(o);e.makeWSCallWithCSRF("/resources/v1/chguxservices/connectedChange/getChangeImpactDetails?proposed=1","PUT","enovia","application/json",s,(function(e){i(e)}),r,!1)}))},getStatesAttributes:function(t){return new Promise((function(a,n){var i={policies:t},r=JSON.stringify(i);e.makeWSCall("/resources/lifecycle/maturity/getStatesAttributes","POST","enovia","application/json",r,(function(e){a(e)}),n,!1)}))},getExtensionsForClass:function(a){return new Promise((function(n,i){var r="/resources/dictionary/class/interfaces?tenant="+t.getGlobalVariable().tenant,o={classes:a},s=JSON.stringify(o);e.makeWSCall(r,"POST","enovia","application/json",s,(function(e){n(e)}),i,!1)}))},getCAProposedChanges:function(t,a){return new Promise((function(n,i){var r="/resources/v1/chguxservices/changeaction/"+t+"/proposedChanges?context=1&flowdown="+a;e.makeWSCall(r,"GET","enovia","application/json","",(function(e){n(e)}),(function(e){i(e)}),!1)}))},editProposed:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+t+"/proposedChanges",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},addProposed:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+t+"/proposedChanges",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},removeProposedChange:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+t+"/proposedChanges",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n([e,t])}),i,!1)}))},updateProposedChangeReasonForChange:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+a+"/setWhyForProposedChange",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)}))},updateProposedChangeStatus:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+a+"/setStatusForProposedChange",o={data:t};o=JSON.stringify(o),e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,n,i,!1)}))},fetchAllowedOperation:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+t+"/allowedOperations",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"POST","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},addResolution:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+t+"/resolutionItems",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},removeResolution:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+t+"/resolutionItems",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},replaceProposedByRevision:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/changeaction/"+t+"/proposedChanges",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},getInvestigationRequestInfo:function(t){return new Promise((function(a,n){var i="/resources/v1/chguxservices/investigationRequest/"+t;e.makeWSCallWithCSRF(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getInvestigationRequestUserAccess:function(t){return new Promise((function(a,n){let i="/resources/v1/chguxservices/investigationRequest/"+t+"/access?$simpleJSON=false";e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},updateDispositionApprovers:function(t,a){return new Promise((function(n,i){var r=`/resources/v1/chguxservices/investigationRequest/${t}/approvers`,o=JSON.stringify(a);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},getIRDispositions:function(t,a){return new Promise((function(a,n){var i="/resources/v1/chguxservices/investigationRequest/"+t+"/dispositions";e.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},getImpactedIRDetails:function(t,a,n){return new Promise((function(i,r){var o={data:[{id:t,service:n,type:a}]},s=JSON.stringify(o);e.makeWSCallWithCSRF("/resources/v1/chguxservices/investigationRequest/getImpactedIRs?proposed=1","PUT","enovia","application/json",s,(function(e){i(e)}),r,!1)}))},getImpactedRolledUpIRs:function(t,a,n){return new Promise((function(i,r){var o={data:[{id:t,service:n,type:a}]},s=JSON.stringify(o);e.makeWSCallWithCSRF("/resources/v1/chguxservices/investigationRequest/getImpactedRolledUpIRs?proposed=1","PUT","enovia","application/json",s,(function(e){i(e)}),r,!1)}))},updateDisposition:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/updateDisposition",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e,t){n(e)}),i,!1)}))},getDispositionInfo:function(t,a){return new Promise((function(n,i){let r="/resources/v1/chguxservices/investigationRequest/"+t+"/dispositionInfo",o={data:a};o=JSON.stringify(o);e.makeWSCallWithCSRF(r,"PUT","enovia","application/json",o,(function(e){n(e)}),i,!1)}))},getTypesHierarchy:function(a){return new Promise((function(n,i){var r={types:a.types},o=JSON.stringify(r);var s="/resources/enong/dico/gettypeshierarchy?tenant="+t.getGlobalVariable().tenant;e.makeWSCallWithCSRF(s,"POST","enovia","application/json",o,(function(e){n(e)}),i,!1)}))}}})),define("DS/ENOChgServices/scripts/services/ChgMembersServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService"],(function(e,t,a){"use strict";return{reviewerType:{typeOfReviewer:"",labelSelected:!1},_addFullNameToPersonObject:function(e,t){var a=e.changeaction.people;Array.isArray(a)&&a.forEach((function(e){var a=e.name;if(t&&t[a]){var n=t[a].userDisplayName;e.fullName=n,e.id=t[a].id}}))},getAvatarDetails:function(e){var t={},a="",n=[[7,139,250],[249,87,83],[111,188,75],[158,132,106],[170,75,178],[26,153,123],[245,100,163],[255,138,46]],i=e.split(" "),r=i[0].charAt(0),o=i[i.length-1];o&&(a=o.charAt(0));var s=r+a,l=Math.ceil((r.charCodeAt(0)+a.charCodeAt(0))%n.length),c="rgb("+n[l][0]+","+n[l][1]+","+n[l][2]+")";return t.name=e,t.avatarStr=s,t.avatarColor=c,t},getQueryParameterForRouteTemplate:function(e){return'(flattenedtaxonomies:"types/Route Template" AND (route_95_base_95_purpose:"Approval" OR (route_95_base_95_purpose:"Standard" AND bo_46_route_46_template_46_isstandard:"true")) AND (route_95_template_95_availability: "Enterprise" OR route_95_template_95_availability: "'+e+'" ) AND policycurrent:"Route Template.Active"AND route_95_completion_95_action:"Promote Connected Object" AND latestrevision:"TRUE")'}}})),define("DS/ENOChgServices/scripts/services/ChgImpactAnalysisServices",["DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t){"use strict";return{getCustomAttributesWithUXService:function(a,n){t.getGlobalVariable().customeViewIAList;return new Promise((function(i,r){t.getGlobalVariable().contextUser;let o=[...a],s={data:[{physicalid:n,label:"test",select_predicate:o}]},l=JSON.stringify(s);e.makeWSCallWithCSRF("/resources/v1/chguxservices/connectedChange/genericResourceFetch","POST","enovia","application/json",l,(function(e){let t={};t=e,i(t)}),(function(e){r(e)}))}))}}})),define("DS/ENOChgServices/scripts/services/ChgCustomAttributeService",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgImpactAnalysisServices","DS/ENOChgServices/scripts/services/ChgDataService"],(function(e,t,a,n,i){"use strict";let r={ImpactAnalysis:"Impact Analysis",ChangeAction:"Change Action",ChangeOrder:"Change Order",ChangeRequest:"Change Request",getCombinedClassList:function(e){let t=this;return new Promise((function(a,n){let i=[],r=[],o=[];for(let a of e)if(a.hasOwnProperty("value")){i.push(a.value);let e=t.getClassExtensionInterface(a.value);o.push(e)}else{i.push(Object.keys(a)[0]);let e=t.getClassExtensionInterface(Object.keys(a)[0]);o.push(e)}Promise.all(o).then((function(e){if("[object Error]"!==Object.prototype.toString.call(e))for(let t of e)if(t.extensions.length>0)for(let e of t.extensions)r.push(e.curi);let t=[...i,...r].join(",");a(t)}))}))},getPropertyForClassGrid:function(a){return new Promise((function(n,i){let r=e.getGlobalVariable().tenant;var o="en";widget.lang&&(o=widget.lang);let s={tenantId:r,lang:o,onComplete:function(e){n(e)},onFailure:function(e){n(e)}};t.getPropertiesForClass(a,s)}))},getClassExtensionInterface:function(a){return new Promise((function(n,i){let r={tenantId:e.getGlobalVariable().tenant,lang:"en",onComplete:function(e){n(e)},onFailure:function(e){n(e)}};t.getExtensionsForClass(a,r)}))},getExtensions:async function(e){let t=new Array,a=await r.getClassExtensionInterface(e);return a&&Array.isArray(a.extensions)&&a.extensions.length>0&&a.extensions.forEach((e=>{t.push(e.curi.substring(6))})),t},iaSubTypesFetched:function(){return new Promise((function(t,a){null!=e.getGlobalVariable().subTypes?t():r.fetchSubTypes(t,a)}))},coSubTypesFetched:function(){return new Promise((function(t,a){null!=e.getGlobalVariable().changeOrderSubTypes?t():r.fetchCOSubTypes(t,a)}))},crSubTypesFetched:function(){return new Promise((function(t,a){null!=e.getGlobalVariable().changeRequestSubTypes?t():r.fetchCRSubTypes(t,a)}))},fetchCRSubTypes:function(t){var n=this;a.makeWSCall("/resources/dictionary/getTypeInfo","POST","enovia","application/json",'["Change Request"]',(function(a){if(Object.keys(a).length>1){e.getGlobalVariable().changeRequestSubTypes=[];var i=[];Object.keys(a).forEach((function(e){var t=n.fetchNLSForCRSubType(e);i.push(t)})),Promise.all(i).then((function(){e.getGlobalVariable().changeRequestSubTypePresent=!0;var a=[],n=0;Object.keys(e.getGlobalVariable().changeRequestSubTypes).forEach((function(t){var i=e.getGlobalVariable().changeRequestSubTypes[t];a[n]={label:i,value:t},n++})),a.sort((function(e,t){return e.label.toUpperCase()>t.label.toUpperCase()?1:-1})),e.getGlobalVariable().changeRequestSubTypes=a,null!=t&&t()}))}else if(1==Object.keys(a).length){var r=Object.keys(a),o={};o[r[0]]=r[0],e.getGlobalVariable().changeRequestSubTypePresent=!1,e.getGlobalVariable().changeRequestSubTypes=[],e.getGlobalVariable().changeRequestSubTypes.push(o),null!=t&&t()}else null!=t&&t()}),(function(a){e.getGlobalVariable().changeRequestSubTypePresent=!1,null!=t&&t()}),!0)},fetchCOSubTypes:function(t){var n=this;a.makeWSCall("/resources/dictionary/getTypeInfo","POST","enovia","application/json",'["Change Order"]',(function(a){if(Object.keys(a).length>1){e.getGlobalVariable().changeOrderSubTypes=[];var i=[];Object.keys(a).forEach((function(e){var t=n.fetchNLSForCOSubType(e);i.push(t)})),Promise.all(i).then((function(){e.getGlobalVariable().changeOrderSubTypePresent=!0;var a=[],n=0;Object.keys(e.getGlobalVariable().changeOrderSubTypes).forEach((function(t){var i=e.getGlobalVariable().changeOrderSubTypes[t];a[n]={label:i,value:t},n++})),a.sort((function(e,t){return e.label.toUpperCase()>t.label.toUpperCase()?1:-1})),e.getGlobalVariable().changeOrderSubTypes=a,null!=t&&t()}))}else if(1==Object.keys(a).length){var r=Object.keys(a),o={};o[r[0]]=r[0],e.getGlobalVariable().changeOrderSubTypePresent=!1,e.getGlobalVariable().changeOrderSubTypes=[],e.getGlobalVariable().changeOrderSubTypes.push(o),null!=t&&t()}else null!=t&&t()}),(function(a){e.getGlobalVariable().changeOrderSubTypePresent=!1,null!=t&&t()}),!0)},fetchNLSForCOSubType:function(t){return new Promise((function(n,i){var r="/resources/dictionary/class/"+t+"/attributes";a.makeWSCall(r,"GET","enovia","application/json","",(function(a){UWA.is(a.NLSName)&&""!=a.NLSName?e.getGlobalVariable().changeOrderSubTypes[t]=a.NLSName:e.getGlobalVariable().changeOrderSubTypes[t]=t,n()}),(function(a){e.getGlobalVariable().changeOrderSubTypes[t]=t,n()}),!0)}))},fetchNLSForCRSubType:function(t){return new Promise((function(n,i){var r="/resources/dictionary/class/"+t+"/attributes";a.makeWSCall(r,"GET","enovia","application/json","",(function(a){UWA.is(a.NLSName)&&""!=a.NLSName?e.getGlobalVariable().changeRequestSubTypes[t]=a.NLSName:e.getGlobalVariable().changeRequestSubTypes[t]=t,n()}),(function(a){e.getGlobalVariable().changeRequestSubTypes[t]=t,n()}),!0)}))},fetchSubTypes:function(t){var n=JSON.stringify(["Change Action","Change Order"]);a.makeWSCall("/resources/dictionary/getTypeInfo","POST","enovia","application/json",n,(function(a){if(Object.keys(a).length>0){e.getGlobalVariable().subTypes=[];var n=[];Object.keys(a).forEach((function(e){n.push(e)})),e.getGlobalVariable().subTypes=n,e.getGlobalVariable().subTypePresent=!0,null!=t&&t()}}),(function(a){e.getGlobalVariable().subTypePresent=!1,null!=t&&t()}),!0)},updateAsynAttributeColumn:function(e,t,a){window.performance.now();n.getCustomAttributesWithUXService(e,t,a).then((function(t){let n=t.data;if(null!=n){Array.isArray(a)&&a.length>0&&a[0].getTreeDocument().prepareUpdate();for(let t=0;t<n.length;t++){let i=a.filter((e=>e.options.grid.id===n[t].id)),r=[...e],o=n[t];if(Array.isArray(i)&&i.length>0)for(let e=0;e<r.length;e++)i[0].setAttribute(r[e],o[r[e]])}Array.isArray(a)&&a.length>0&&a[0].getTreeDocument().pushUpdate()}}))}};return r})),define("DS/ENOChgServices/scripts/services/ChgDataProcess",["i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgErrors","WebappsUtils/WebappsUtils","DS/Utilities/DateUtils","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/WidgetServices/WidgetServices","DS/TreeModel/BaseFilter","text!DS/ENOChgServices/assets/ChangeViewsNLSMapping.json","DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityColumns","DS/CfgWebAppEffectivityUX/scripts/CfgConfigurationContextColumn"],(function(e,t,a,n,i,r,o,s,l,c,d,u,p,f){"use strict";var g={getPoliciesFromFedResponse:function(e){let t=new Set,a=[];for(var n=0;n<e.length;n++)e[n].dataelements.policy&&e[n].dataelements.policy.length>0&&t.add(e[n].dataelements.policy[0]),e[n].relateddata&&e[n].relateddata.activities&&e[n].relateddata.activities.length>0&&e[n].relateddata.activities.forEach((function(e){e.relateddata&&e.relateddata.referenceDetails&&t.add(e.relateddata.referenceDetails[0].dataelements.policy[0])}));return t.forEach((e=>a.push(e))),a},getRealizedActivityIconName:function(e){var t=void 0;if(e&&""!==e)if(e.startsWith("ChangeStatus"))t="collaborative-lifecycle-management";else if(e.startsWith("FileAdded"))t="upload";else if(e.startsWith("FileModified"))t="update";else if(e.startsWith("FileRemoved"))t="trash";else switch(e){case"NonPrimeRoot":t="tree-view-flattened-leaves wux-ui-3ds";break;case"AddInFamily":case"Add":t="3dproduct-insert wux-ui-3ds";break;case"ConfiguredDelete":t="configuration-delete wux-ui-3ds";break;case"ConfiguredReplace":t="replace-by-configuration wux-ui-3ds";break;case"EvolveInstance":case"Evolve":case"NewEvolution":t="flow-branch-add wux-ui-3ds";break;case"ConfiguredMove":case"Move":t="move-to wux-ui-3ds";break;case"EditVariant":case"ConfiguredEditVariant":t="variants-and-options wux-ui-3ds";break;case"Extend":t="evolution-effectivity-extension wux-ui-3ds";break;case"Replace":t="replace-by-existing wux-ui-3ds";break;case"Cut":t="tree-delete wux-ui-3ds";break;case"Create":case"DOCUMENT_CREATE_UPDATE":t="plus wux-ui-3ds";break;case"Modify":t="pencil wux-ui-3ds";break;case"NewMinorVersion":case"NewVersion":t="flow-line-add wux-ui-3ds";break;case"Clone":t="duplicate wux-ui-3ds";break;case"TransferOwnership":case"ChangeResponsible":t="user-change wux-ui-3ds";break;case"AddAlternate":case"AddSubstitute":t="exchange wux-ui-3ds";break;case"AltSubFor":t="replace wux-ui-3ds";break;case"SubstitutionContextAdded":t="exchange-add wux-ui-3ds";break;case"SubtitutionContextRemoved":t="exchange-delete wux-ui-3ds";break;case"AltQualified":t="select-all-checkboxes wux-ui-3ds";break;case"AltObsolete":t="select-none-checkboxes wux-ui-3ds"}return t},getNonIndexedChangeActionNodeData:async function(e){var t=await s.getNLSValuesPromise({"ds6w:type":e.filter((e=>"ds6w:type"===e.name))[0].value,"ds6w:status":e.filter((e=>"ds6w:status"===e.name))[0].value});return{id:e.filter((e=>"resourceid"===e.name))[0].value,displayName:e.filter((e=>"ds6w:label"===e.name))[0].value,displayType:e.filter((e=>"ds6w:type"===e.name))[0].value,title:e.filter((e=>"ds6w:label"===e.name))[0].value,type:e.filter((e=>"ds6w:type"===e.name))[0].value,typeNLS:t["ds6w:type"][e.filter((e=>"ds6w:type"===e.name))[0].value],name:e.filter((e=>"ds6w:identifier"===e.name))[0].value,maturity:e.filter((e=>"ds6w:status"===e.name))[0].value,maturityNLS:t["ds6w:status"][e.filter((e=>"ds6w:status"===e.name))[0].value],icon:e.filter((e=>"type_icon_url"===e.name))[0].value,previewIcon:e.filter((e=>"preview_url"===e.name))[0].value,thumbnail:e.filter((e=>"preview_url"===e.name))[0].value}},getChangeActionNodeData:async function(e){var t=await s.getNLSValuesPromise({"ds6w:type":e.dataelements["ds6w:type"],"ds6w:status":e.dataelements["ds6w:status"]});return{id:e.id,displayName:e.dataelements["ds6w:label"][0],displayType:e.dataelements["ds6w:type"][0],title:e.dataelements["ds6w:label"][0],type:e.dataelements["ds6w:type"][0],typeNLS:t["ds6w:type"][e.dataelements["ds6w:type"][0]],name:e.dataelements["ds6w:identifier"][0],maturity:e.dataelements["ds6w:status"][0],maturityNLS:t["ds6w:status"][e.dataelements["ds6w:status"][0]],icon:e.dataelements.icon,previewIcon:e.dataelements.previewicon,thumbnail:e.dataelements.previewicon}},getClassifiedInterfaces:function(e){let t=new Array;try{e.forEach((e=>{let a={name:e.name,NLS:e.NLS,id:e.id,attrs:[]};e.relateddata&&e.relateddata.class_attrs?e.relateddata.class_attrs.forEach((e=>{a.attrs.push({curi:e.dataelements.curi,name:e.dataelements.name,NLS:e.dataelements.NLS,type:e.dataelements.type})})):e.class_attrs&&e.class_attrs.forEach((e=>{a.attrs.push(e)})),a.attrs.length>0&&t.push(a)}))}catch(e){console.error("parsing realized classified attributes failed")}return t},getProposedClassifiedInterfaces:function(e){let t=new Array;try{e.forEach((e=>{let a={name:e.name,NLS:e.NLS,id:e.id,attrs:[]};e&&e.class_attrs&&e.class_attrs.forEach((e=>{a.attrs.push({curi:e.curi,name:e.name,NLS:e.NLS,type:e.type})})),a.attrs.length>0&&t.push(a)}))}catch(e){console.error("parsing proposed classified attributes failed")}return t},getNonIndexedRealizedNodeData:async function(e,t,a){var n,i,r={},o=t.get(e.id),l=void 0,c=void 0;try{n=o.filter((e=>"ds6w:type"===e.name))[0].value,i=o.filter((e=>"ds6w:status"===e.name))[0].value,"TRUE"===e.dataelements.isInstanceOperation&&e.dataelements.ref_id&&(n=(l=t.get(e.dataelements.ref_id)).filter((e=>"ds6w:type"===e.name))[0].value,i=l.filter((e=>"ds6w:status"===e.name))[0].value);var d=await s.getNLSValuesPromise({"ds6w:type":[n],"ds6w:status":[i]});if(r={id:e.id,name:o.filter((e=>"ds6w:identifier"===e.name))[0].value,title:"TRUE"===e.dataelements.isInstanceOperation&&e.dataelements.ref_id?l.filter((e=>"ds6w:label"===e.name))[0].value:o.filter((e=>"ds6w:label"===e.name))[0].value,title_instance:"TRUE"===e.dataelements.isInstanceOperation&&"Cut"!==e.dataelements.operation?o.filter((e=>"ds6w:label"===e.name))[0].value:"",type:o.filter((e=>"ds6w:type"===e.name))[0].value,typeNLS:d["ds6w:type"][o.filter((e=>"ds6w:type"===e.name))[0].value],instance_typeNLS:"TRUE"===e.dataelements.isInstanceOperation?d["ds6w:type"][o.filter((e=>"ds6w:type"===e.name))[0].value]:"",policy:"",revision:o.filter((e=>"ds6wg:revision"===e.name))[0].value,maturity:o.filter((e=>"ds6w:status"===e.name))[0].value,maturityWithBadge:o.filter((e=>"ds6w:status"===e.name))[0].value?d["ds6w:status"][o.filter((e=>"ds6w:status"===e.name))[0].value]:"",maturityNLS:o.filter((e=>"ds6w:status"===e.name))[0].value?d["ds6w:status"][o.filter((e=>"ds6w:status"===e.name))[0].value]:"",reasonForChange:e.dataelements.data_description,operation:UWA.is(a)?"NonPrimeRoot":e.dataelements.operation?e.dataelements.operation:"",isInstanceOperation:e.dataelements.isInstanceOperation,sub_operations:e.dataelements.sub_operations?e.dataelements.sub_operations:[],icon:"TRUE"===e.dataelements.isInstanceOperation&&e.dataelements.ref_id?l.filter((e=>"type_icon_url"===e.name))[0].value:o.filter((e=>"type_icon_url"===e.name))[0].value,configured_icon:(e.dataelements.isRefConfigured,""),isRefConfigured:e.dataelements.isRefConfigured,instance_icon:"",previewIcon:o.filter((e=>"preview_url"===e.name))[0].value,thumbnail:o.filter((e=>"preview_url"===e.name))[0].value,displayName:o.filter((e=>"ds6w:label"===e.name))[0].value,displayType:d["ds6w:type"][o.filter((e=>"ds6w:type"===e.name))[0].value],activity_id:e.dataelements.activity_id,activity_icon:UWA.is(a)?this.getRealizedActivityIconName("NonPrimeRoot"):this.getRealizedActivityIconName(e.dataelements.operation),isTransferred:e.dataelements.isTransferred,moved_to_ca_id:e.dataelements.transferred_ca_id,reasonForMove:e.dataelements.transfer_reason,isIgnored:e.dataelements.isIgnored,activities:[]},"TRUE"===e.dataelements.isInstanceOperation&&e.dataelements.ref_id&&(r.type=l.filter((e=>"ds6w:type"===e.name))[0].value,r.typeNLS=d["ds6w:type"][l.filter((e=>"ds6w:type"===e.name))[0].value],r.maturity=l.filter((e=>"ds6w:status"===e.name))[0].value,r.maturityWithBadge=d["ds6w:status"][l.filter((e=>"ds6w:status"===e.name))[0].value],r.maturityNLS=d["ds6w:status"][l.filter((e=>"ds6w:status"===e.name))[0].value],r.name=l.filter((e=>"ds6w:identifier"===e.name))[0].value,r.revision=l.filter((e=>"ds6wg:revision"===e.name))[0].value),"TRUE"===e.dataelements.isInstanceOperation&&e.dataelements.after_id)if((c=t.get(e.dataelements.after_id)).filter((e=>"ds6w:type"===e.name))[0].value){var u=await s.getNLSValuesPromise({"ds6w:type":[c.filter((e=>"ds6w:type"===e.name))[0].value]});r.type_instance_NLS=u["ds6w:type"][c.filter((e=>"ds6w:type"===e.name))[0].value]}else r.type_instance_NLS=void 0;var p=r.sub_operations;if(p&&Array.isArray(p)&&p.length>1){var f=p.toString(),g=f.split("FileAdded#").length-1+(f.split("FileModified#").length-1)+(f.split("FileRemoved#").length-1);"Create"==r.operation&&g>1?(r.operation="DOCUMENT_CREATE_UPDATE",r.activity_icon="plus"):g>1&&(r.operation="DOCUMENT_UPDATE",r.activity_icon="doc-update")}}catch(e){console.log(e),r={msg:"PARSING_KO"}}return r},effectivityData:{},getRealizedNodeData:async function(e,t){var a,n,i=this,r={},o=void 0,l=new Array;let c,d,u="false";e.dataelements.interface&&(o=new Set(e.dataelements.interface)),a=e.dataelements["ds6w:type"],n=e.dataelements["ds6w:status"],e.relateddata&&e.relateddata.classes&&(l=[...l,...i.getClassifiedInterfaces(e.relateddata.classes)]),"TRUE"===e.dataelements.isInstanceOperation&&e.relateddata.referenceDetails&&(e.relateddata.referenceDetails[0].dataelements.interface.forEach((e=>{o.add(e)})),e.relateddata.referenceDetails[0].relateddata&&e.relateddata.referenceDetails[0].relateddata.classes&&(l=[...l,...i.getClassifiedInterfaces(e.relateddata.referenceDetails[0].relateddata.classes)]),a=e.relateddata.referenceDetails[0].dataelements["ds6w:type"],n=e.relateddata.referenceDetails[0].dataelements["ds6w:status"]),e.relateddata&&e.relateddata.beforeReferenceDetails&&(e.relateddata.beforeReferenceDetails[0].dataelements.interface.forEach((e=>{o.add(e)})),e.relateddata.beforeReferenceDetails.classes&&(l=[...l,...i.getClassifiedInterfaces(e.relateddata.beforeReferenceDetails.classes)]));var p=await s.getNLSValuesPromise({"ds6w:type":a,"ds6w:status":n});let f=[];o&&(f=Array.from(o),f=f.filter((e=>""!==e))),i.effectivityData&&i.effectivityData.effectivityResponse&&(e.id in i.effectivityData.effectivityResponse.pids?(c=i.effectivityData.effectivityResponse.pids[e.id],d=i.effectivityData.configurationResponse.pids[e.id],u="true"):"false"==u&&e.id in i.effectivityData.effectivityResponse.relids&&(c=i.effectivityData.effectivityResponse.relids[e.id]));let g=[];l&&l.length>0&&(g=l.filter((e=>""!==e.name)));try{if(r={id:e.id,name:e.dataelements["ds6w:identifier"][0],title:"TRUE"===e.dataelements.isInstanceOperation&&e.relateddata.referenceDetails?e.relateddata.referenceDetails[0].dataelements["ds6w:label"][0]:e.dataelements["ds6w:label"][0],title_instance:"TRUE"===e.dataelements.isInstanceOperation&&"Cut"!==e.dataelements.operation?e.dataelements["ds6w:label"][0]:"",interfaces:f,classes:g,type:e.dataelements["ds6w:type"][0],typeNLS:p["ds6w:type"][e.dataelements["ds6w:type"][0]],instance_typeNLS:"TRUE"===e.dataelements.isInstanceOperation?p["ds6w:type"][e.dataelements["ds6w:type"][0]]:"",policy:e.dataelements.policy[0],revision:e.dataelements["ds6wg:revision"][0],maturity:e.dataelements["ds6w:status"][0],maturityWithBadge:e.dataelements["ds6w:status"][0]?p["ds6w:status"][e.dataelements["ds6w:status"][0]]:"",maturityNLS:e.dataelements["ds6w:status"][0]?p["ds6w:status"][e.dataelements["ds6w:status"][0]]:"",reasonForChange:e.dataelements.activity_description,operation:UWA.is(t)?"NonPrimeRoot":e.dataelements.operation?e.dataelements.operation:"",isInstanceOperation:e.dataelements.isInstanceOperation,sub_operations:e.dataelements.sub_operations?e.dataelements.sub_operations:[],icon:"TRUE"===e.dataelements.isInstanceOperation&&e.relateddata.referenceDetails?e.relateddata.referenceDetails[0].dataelements.icon:e.dataelements.icon,configured_icon:(e.dataelements.isRefConfigured,""),isRefConfigured:e.dataelements.isRefConfigured,instance_icon:"",previewIcon:e.dataelements.previewicon,thumbnail:e.dataelements.previewicon,displayName:e.dataelements["ds6w:label"][0],displayType:p["ds6w:type"][e.dataelements["ds6w:type"][0]],activity_id:e.dataelements.activity_id,activity_icon:UWA.is(t)?i.getRealizedActivityIconName("NonPrimeRoot"):i.getRealizedActivityIconName(e.dataelements.operation),isTransferred:e.dataelements.isTransferred,moved_to_ca_id:e.dataelements.transferred_ca_id,reasonForMove:e.dataelements.transfer_reason,isIgnored:e.dataelements.isIgnored,activities:[],Effectivity:c&&c.Effectivity?c.Effectivity:"",VariantEffectivity:c&&c.VariantEffectivity?c.VariantEffectivity:"",CurrentEvolutionEffectivity:c&&c.CurrentEvolutionEffectivity?c.CurrentEvolutionEffectivity:"",ProjectedEvolutionEffectivity:c&&c.ProjectedEvolutionEffectivity?c.ProjectedEvolutionEffectivity:"",EvolutionEffectivity:c&&c.EvolutionEffectivity?c.EvolutionEffectivity:"",ConfigurationContext:d&&d.ConfigurationContext?d.ConfigurationContext:"",RevisionMaster:d&&d.RevisionMaster?d.RevisionMaster:"",RevisionMode:d&&d.RevisionMode?d.RevisionMode:""},e.dataelements.isFlowdownActivity&&"TRUE"===e.dataelements.isFlowdownActivity&&(r.isFlowdownActivity="TRUE",r.isUpstreamUpdated=e.dataelements.isUpstreamUpdated,r.flowdown_status=e.dataelements.flowdownStatus?e.dataelements.flowdownStatus:void 0,r.flowdown_statusORG=r.flowdown_status,e.relateddata.resolutionItems&&e.relateddata.resolutionItems.length>0&&(r.selected_proposed_items=[],r.selected_resolution_items=[],e.relateddata.resolutionItems.forEach((async e=>{let t=e.dataelements["ds6w:type"],a=e.dataelements["ds6w:status"],n=await s.getNLSValuesPromise({"ds6w:type":t,"ds6w:status":a});var i={id:e.id,name:e.dataelements["ds6w:identifier"][0],title:e.dataelements["ds6w:label"][0],type:e.dataelements["ds6w:type"][0],typeNLS:n["ds6w:type"][e.dataelements["ds6w:type"][0]],policy:e.dataelements.policy[0],revision:e.dataelements["ds6wg:revision"][0],maturity:e.dataelements["ds6w:status"][0],maturityWithBadge:e.dataelements["ds6w:status"][0]?n["ds6w:status"][e.dataelements["ds6w:status"][0]]:"",maturityNLS:e.dataelements["ds6w:status"][0]?n["ds6w:status"][e.dataelements["ds6w:status"][0]]:"",icon:e.dataelements.icon,previewIcon:e.dataelements.previewicon,thumbnail:e.dataelements.previewicon,displayName:e.dataelements["ds6w:label"][0],displayType:p["ds6w:type"][e.dataelements["ds6w:type"][0]]};e.dataelements.refId&&e.dataelements.refId[0]&&(i.refId=e.dataelements.refId[0]),"TRUE"==e.dataelements.isProposed?(i.prop_id=e.relateddata.proposedDetails[0].id,r.selected_proposed_items.push(i)):r.selected_resolution_items.push(i)})))),"TRUE"===e.dataelements.isInstanceOperation&&e.relateddata.referenceDetails&&(r.type=e.relateddata.referenceDetails[0].dataelements["ds6w:type"][0],r.typeNLS=p["ds6w:type"][e.relateddata.referenceDetails[0].dataelements["ds6w:type"][0]],r.maturity=e.relateddata.referenceDetails[0].dataelements["ds6w:status"][0],r.maturityWithBadge=p["ds6w:status"][e.relateddata.referenceDetails[0].dataelements["ds6w:status"][0]],r.maturityNLS=p["ds6w:status"][e.relateddata.referenceDetails[0].dataelements["ds6w:status"][0]],r.name=e.relateddata.referenceDetails[0].dataelements["ds6w:identifier"][0],r.revision=e.relateddata.referenceDetails[0].dataelements["ds6wg:revision"][0]),"TRUE"===e.dataelements.isInstanceOperation&&e.relateddata.afterDetails)if(e.relateddata.afterDetails[0].dataelements["ds6w:type"]&&e.relateddata.afterDetails[0].dataelements["ds6w:type"].length>0){var m=await s.getNLSValuesPromise({"ds6w:type":e.relateddata.afterDetails[0].dataelements["ds6w:type"]});r.type_instance_NLS=m["ds6w:type"][e.relateddata.afterDetails[0].dataelements["ds6w:type"]]}else r.type_instance_NLS=void 0;var h=r.sub_operations;if(h&&Array.isArray(h)&&h.length>1){var v=h.toString(),y=v.split("FileAdded#").length-1+(v.split("FileModified#").length-1)+(v.split("FileRemoved#").length-1);"Create"==r.operation&&y>1?(r.operation="DOCUMENT_CREATE_UPDATE",r.activity_icon="plus"):y>1&&(r.operation="DOCUMENT_UPDATE",r.activity_icon="doc-update")}}catch(e){console.log(e),r={msg:"PARSING_KO"}}return r},getAttrsObject:function(e){let t;return Array.isArray(e)&&(t={},t.id=e.filter((e=>"resourceid"===e.name))[0].value,t.type=e.filter((e=>"ds6w:type"===e.name))[0].value,t.name=e.filter((e=>"ds6w:identifier"===e.name))[0].value,t.dataelements={"ds6w:identifier":e.filter((e=>"ds6w:identifier"===e.name))[0].value,"ds6w:type":e.filter((e=>"ds6w:type"===e.name))[0].value,"ds6w:label":e.filter((e=>"ds6w:label"===e.name))[0].value,"ds6w:revision":e.filter((e=>"ds6wg:revision"===e.name))[0].value,icon:e.filter((e=>"type_icon_url"===e.name))[0].value}),t},getDEObject:function(e){let t;return Array.isArray(e)&&(t={},t.id=e.filter((e=>"resourceid"===e.name))[0].value,t.dataelements={"ds6w:identifier":e.filter((e=>"ds6w:identifier"===e.name))[0].value,"ds6w:type":e.filter((e=>"ds6w:type"===e.name))[0].value,"ds6w:label":e.filter((e=>"ds6w:label"===e.name))[0].value,"ds6w:revision":e.filter((e=>"ds6wg:revision"===e.name))[0].value,icon:e.filter((e=>"type_icon_url"===e.name))[0].value}),t},getPrimeActivityFromRC:async function(e,t){var a=this,n=null;if(e.relateddata&&e.relateddata.activities)for(var i=0;i<e.relateddata.activities.length;i++){var r=e.relateddata.activities[i];if("FALSE"===r.dataelements.isFedIndexed){if(r.dataelements.after_id===r.dataelements.where_id){if((n=await a.getNonIndexedRealizedNodeData(r,t)).msg&&"PARSING_KO"===n.msg)return n;n.isIndexed=e.dataelements.allActivitiesIndexed,r.dataelements.where_id?(n.where_id=r.dataelements.where_id,n.where_details=a.getDEObject(t.get(n.where_id))):n.where_details=r.relateddata&&r.relateddata.whereDetails?r.relateddata.whereDetails[0]:void 0,r.dataelements.ref_id?(n.ref_id=r.dataelements.ref_id,n.ref_details=a.getAttrsObject(t.get(n.ref_id))):n.ref_details=r.relateddata&&r.relateddata.referenceDetails?r.relateddata.referenceDetails[0]:void 0,r.dataelements.after_id?(n.after_id=r.dataelements.after_id,n.after_details=a.getAttrsObject(t.get(n.after_id))):n.after_details=r.relateddata&&r.relateddata.afterDetails?r.relateddata.afterDetails[0]:void 0,r.dataelements.before_id?(n.before_id=r.dataelements.before_id,n.before_details=a.getAttrsObject(t.get(n.before_id))):n.before_details=r.relateddata&&r.relateddata.beforeDetails?r.relateddata.beforeDetails[0]:void 0,"TRUE"===n.isTransferred&&(r.dataelements.transfer_ca_id?n.moved_to_ca_details=await a.getNonIndexedChangeActionNodeData(t.get(r.dataelements.transfer_ca_id)):n.moved_to_ca_details=await a.getChangeActionNodeData(r.relateddata.transferredCADetails[0]))}}else if(r.relateddata&&r.relateddata.whereDetails&&r.relateddata.afterDetails&&r.relateddata.whereDetails[0].id===r.relateddata.afterDetails[0].id){if((n=await a.getRealizedNodeData(r)).msg&&"PARSING_KO"===n.msg)return n;e.relateddata&&e.relateddata.classes&&(n.classes=a.getClassifiedInterfaces(e.relateddata.classes)),n.isRefConfigured=e.dataelements.isRefConfigured,n.isIndexed=e.dataelements.allActivitiesIndexed,"TRUE"===n.isRefConfigured&&(n.configured_icon=""),n.where_details=r.relateddata.whereDetails?r.relateddata.whereDetails[0]:void 0,n.after_details=r.relateddata.afterDetails?r.relateddata.afterDetails[0]:void 0,n.before_details=r.relateddata.beforeDetails?r.relateddata.beforeDetails[0]:void 0,n.ref_details=r.relateddata.referenceDetails?r.relateddata.referenceDetails[0]:void 0,"TRUE"===n.isTransferred&&(n.moved_to_ca_details=await a.getChangeActionNodeData(r.relateddata.transferredCADetails[0]))}}return n},addNonPrimeActivities:async function(e,t,a){for(var n=this,i={msg:"OK"},r=0;r<t.length;r++){var o=t[r];if("FALSE"===o.dataelements.isFedIndexed){if(o.dataelements.after_id===o.dataelements.where_id)continue;var s=await n.getNonIndexedRealizedNodeData(o,a);if(s.msg&&"PARSING_KO"===s.msg){i=s;continue}o.dataelements.where_id?(s.where_id=o.dataelements.where_id,s.where_details=n.getDEObject(a.get(s.where_id))):s.where_details=o.relateddata&&o.relateddata.whereDetails?o.relateddata.whereDetails[0]:void 0,o.dataelements.ref_id?(s.ref_id=o.dataelements.ref_id,s.ref_details=n.getAttrsObject(a.get(s.ref_id))):s.ref_details=o.relateddata&&o.relateddata.referenceDetails?o.relateddata.referenceDetails[0]:void 0,o.dataelements.after_id?(s.after_id=o.dataelements.after_id,s.after_details=n.getAttrsObject(a.get(s.after_id))):s.after_details=o.relateddata&&o.relateddata.afterDetails?o.relateddata.afterDetails[0]:void 0,o.dataelements.before_id?(s.before_id=o.dataelements.before_id,s.before_details=n.getAttrsObject(a.get(s.before_id))):s.before_details=o.relateddata&&o.relateddata.beforeDetails?o.relateddata.beforeDetails[0]:void 0,o.dataelements.before_ref_id?(s.before_ref_id=o.dataelements.before_ref_id,s.before_ref_details=n.getAttrsObject(a.get(s.before_ref_id))):s.before_ref_details=o.relateddata&&o.relateddata.beforeReferenceDetails?o.relateddata.beforeReferenceDetails[0]:void 0,"TRUE"===s.isTransferred&&(s.moved_to_ca_details=await n.getNonIndexedChangeActionNodeData(a.get(o.dataelements.transfer_ca_id))),e.activities.push(s)}else{if(o.relateddata&&o.relateddata.whereDetails&&o.relateddata.afterDetails&&o.relateddata.whereDetails[0].id===o.relateddata.afterDetails[0].id)continue;var l=await n.getRealizedNodeData(o);if(l.msg&&"PARSING_KO"===l.msg){i=l;continue}l.where_details=o.relateddata.whereDetails?o.relateddata.whereDetails[0]:void 0,l.after_details=o.relateddata.afterDetails?o.relateddata.afterDetails[0]:void 0,l.before_details=o.relateddata.beforeDetails?o.relateddata.beforeDetails[0]:void 0,l.before_ref_details=o.relateddata.beforeReferenceDetails?o.relateddata.beforeReferenceDetails[0]:void 0,l.ref_details=o.relateddata.referenceDetails?o.relateddata.referenceDetails[0]:void 0,"TRUE"===l.isTransferred&&(l.moved_to_ca_details=await n.getChangeActionNodeData(o.relateddata.transferredCADetails[0])),e.activities.push(l)}}return i},createPayloadEffectivityData:async function(e){let t={pids:[],relids:[],pairs:{}};for(var a=0;a<e.length;a++){"FALSE"==e[a].dataelements.isInstanceOperation&&t.pids.push(e[a].id);for(var n=0;n<e[a].relateddata.activities.length;n++)"TRUE"==e[a].relateddata.activities[n].dataelements.isInstanceOperation&&t.relids.push(e[a].relateddata.activities[n].id)}return{effectivityResponse:await new Promise(((e,a)=>{p.updateAttributes(t,(function(t){e(t)}))})),configurationResponse:await new Promise(((e,a)=>{f.updateAttributes(t,(function(t){e(t)}))}))}},processCARealizedChangesData:async function(e,t,a){var n=this,i={realized_changes:[],AllOK:!0,AllIndexed:!0,rc_count:e.length};e.length>0&&!0===a&&(n.effectivityData=await n.createPayloadEffectivityData(e));for(var r=0;r<e.length;r++){var o=null,s=!0;try{if(null==(o=await n.getPrimeActivityFromRC(e[r],t))?(o="FALSE"===e[r].dataelements.isFedIndexed?await n.getNonIndexedRealizedNodeData(e[r],t,!0):await n.getRealizedNodeData(e[r],!0),"FALSE"===e[r].dataelements.allActivitiesIndexed&&(i.AllIndexed=!1),"TRUE"===e[r].dataelements.isDeleted||o.msg&&"PARSING_KO"===o.msg?(i.AllOK=!1,s=!1):"FALSE"===e[r].dataelements.isFedIndexed?o.where_id=e[r].dataelements.where_id:o.where_details=e[r].relateddata.whereDetails?e[r].relateddata.whereDetails[0]:void 0):o.msg&&"PARSING_KO"===o.msg&&(i.AllOK=!1,s=!1),!0===s&&("FALSE"===o.isIndexed&&(i.AllIndexed=!1),i.realized_changes.push(o),e[r].relateddata&&e[r].relateddata.activities)){var l=await n.addNonPrimeActivities(o,e[r].relateddata.activities,t);l.msg&&"PARSING_KO"===l.msg&&(i.AllOK=!1)}}catch(e){console.log(e),i.AllOK=!1}}return i},escapeHTML:e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),getAttribute:function(e,t){if("undefined"!=e.changeaction&&e.changeaction.attributes)for(var a=e.changeaction.attributes,n=0;n<a.length;n++)if(a[n].name==t)return a[n].value;return null},processTimestampData:function(e){var t="";return e.FTS&&(t=e.FTS.allvaultsacl),t},createCustomOwnerField:function(e){var n="/api/user/getpicture/login/"+e.id+"/format/normal",i=t.getGlobalVariable().computeSwymUrl(n),r=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(t.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{var l=a.getAvatarDetails(e.fullName);(s=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}s.inject(o);var c=UWA.createElement("span",{class:"userName",html:e.fullName});return o.inject(r),c.inject(r),r.outerHTML},formatDate:function(e){var t=new Date(e);return r.formatDateToString(t,{datePrecision:"day",dateStyle:"medium",timePrecision:"min"})},processedCOSummaryList:async function(e,a){let n=this;var i=[],r=e.data;t.getGlobalVariable().existingCOIds=[];let o=[];if("true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&await l.getColumnApprovalStatusValue(g.createPayloadApprovalStatusValue(e)).then((function(e){e&&o.push(e)})),null!=r)for(var s=0;s<r.length;s++){var c,d,u,p,f,m,h,v,y,C,S,b,w,A,I,N,O,P,T="",D="";let e="ChangeOrder",a="",l="",E="",x="",j="",L="";c=r[s].id,d=r[s].type,P=r[s].typeNLS,p=r[s].name,f=r[s].revision,u=r[s].title,r[s].severity,v=r[s].severityNLS,h=r[s].current,y=r[s].currentNLS,N=r[s].description,C=r[s].project,S=r[s].organization,a=r[s].policy,b=r[s].icon,m=r[s].severity,E=g.formatDate(r[s].modified),x=g.formatDate(r[s].originated),r[s].changeCoordinator&&(T=r[s].changeCoordinator),r[s].changeCoordinatorFullName&&(D=r[s].changeCoordinatorFullName),w=r[s].owner,A=r[s].ownerFullName,I=r[s].previewicon,O="TRUE"===r[s].ecm_change_on_hold?"true":"false";var _=0;"Medium"==m?_=1:"High"==m&&(_=2);var R=0;if("In Work"==h?R=1:"In Approval"==h?R=2:"Approved"==h&&(R=3),"true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&o&&o[0]&&o[0][c]&&(j=o[0][c].approvalStatus,L=o[0][c].approvalStatusModel),null!=r[s].applicability){l=String(r[s].applicability).replace(/\n/g," , ")}t.getGlobalVariable().existingCOIds.push(c);var F={id:c,type:d,typeNLS:P,title:u,name:p,revision:f,maturity:h,maturityKey:a+"."+h,maturityNLS:y,severity:m,severityNLS:v,description:N,collabspace:C,organization:S,iconURL:b,changeCoordinator:T,changeCoordinatorFullName:D,owner:w,ownerFullName:A,thumbnail:I,severityGrade:_,stateGrade:R,onHold:O,isKindOfType:e,applicabilityNLS:l,modificationDate:E,creationDate:x,policy:a,interfaces:Array.isArray(r[s].interfaces)?r[s].interfaces:void 0,classes:Array.isArray(r[s].classes)?n.getClassifiedInterfaces(r[s].classes):void 0,ApprovalStatus:j,approvalStatusModel:L};i.push(F)}return new Promise((function(e,t){g.getNLSForProcessedList("COSummary",i).then((function(){e(i)}),(function(){e(i)}))}))},processedCAList:async function(e){var a=[],n=e.data;let i=[];if("true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&await l.getColumnApprovalStatusValue(g.createPayloadApprovalStatusValue(e)).then((function(e){e&&i.push(e)})),null!=n)for(var r=0;r<n.length;r++){var o,s,c,d,u,p,f,m,h,v,y,C,S,b,w;let e="ChangeAction",l="",g="",I="",N="";if(o=n[r].id,s=n[r].type,c=n[r].typeNLS,u=n[r].name,d=n[r].title,p=n[r].severity,m=n[r].severityNLS,f=n[r].current,h=n[r].currentNLS,v=n[r].project,y=n[r].organization,l=n[r].policy,C=n[r].icon,S=n[r].owner,b=n[r].ownerFullName,w=n[r].previewicon,"true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&i&&i[0]&&i[0][o]&&(g=i[0][o].approvalStatus,I=i[0][o].approvalStatusModel),null!=n[r].applicability){N=String(n[r].applicability).replace(/\n/g," , ")}var A={id:o,type:s,typeNLS:c,title:d,name:u,maturity:f,maturityNLS:h,severity:p,severityNLS:m,collabspace:v,organization:y,iconURL:C,owner:S,ownerFullName:b,thumbnail:w,isKindOfType:e,policy:l,ApprovalStatus:g,approvalStatusModel:I,applicabilityNLS:N};a.push(A)}return new Promise((function(e,t){g.getNLSForProcessedList("CASummary",a).then((function(){e(a)}),(function(){e(a)}))}))},getNLSForProcessedList:(e,t)=>new Promise((function(a,n){var i={};if(t&&t.length>0){for(var r=JSON.parse(u)[e],o=0;o<t.length;o++){var l=t[o];Object.keys(r).forEach((function(e){var t=r[e];i[t]?i[t].push(l[e]):i[t]=[l[e]]}))}s.getNLSValuesPromise(i).then((function(n){for(var i=0;i<t.length;i++){var o=t[i];Object.keys(r).forEach((function(t){var a=r[t];"CASummary"==e?n[a]&&n[a][o[t]]?o[t]=n[a][o[t]]:o[t]=o[t]:n[a]&&n[a][o[t]]?(o[t+"NLS"]=n[a][o[t]],"ds6w:status"==a&&(o.maturityWithBadge=n[a][o[t]])):o[t+"NLS"]=o[t]}))}a(t)}),(function(e){return a(t)}))}else a(t)})),getNLSForProcessedListFromSource:(e,t)=>new Promise((function(a,n){var i={};if(t&&t.length>0){for(var r=JSON.parse(u)[e],o=0;o<t.length;o++){var l=t[o];Object.keys(r).forEach((function(e){var t=r[e];let a={},n=[];n.push(l.serviceName),a.value=l[e],a.source=n,i[t]?i[t].push(a):i[t]=[a]}))}s.getNLSValuesPromiseForSource(i).then((function(n){for(var i=0;i<t.length;i++){var o=t[i];Object.keys(r).forEach((function(t){var a=r[t];"CASummary"==e?n[a]&&n[a][o[t]]?o[t]=n[a][o[t]]:o[t]=o[t]:n[a]&&n[a][o[t]]?o[t+"NLS"]=n[a][o[t]]:o[t+"NLS"]=o[t]}))}a(t)}),(function(e){return a(t)}))}else a(t)})),processedChangeOrchestrationSummaryList:async function(e){var a=[],n=e.data;let i=[];if("true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&await l.getColumnApprovalStatusValue(g.createPayloadApprovalStatusValue(e)).then((function(e){e&&i.push(e)})),null!=n)for(var r=0;r<n.length;r++){var o,s,c,d,u,p,f,m,h,v,y,C,S,b,w,A,I,N,O,P,T,D=!1,_=!1,R="";let e="",l="",g="";if(o=n[r].id,s=n[r].type,P=n[r].dataelements?n[r].dataelements.typeNLS:n[r].typeNLS,d=n[r].dataelements?n[r].dataelements.name:n[r].name,u=n[r].dataelements?n[r].dataelements.revision:n[r].revision,c=n[r].dataelements?n[r].dataelements.title:n[r].title,n[r].dataelements?n[r].dataelements.severity:n[r].severity,m=n[r].dataelements?n[r].dataelements.severityNLS:n[r].severityNLS,f=n[r].dataelements?n[r].dataelements.current:n[r].current,h=n[r].dataelements?n[r].dataelements.currentNLS:n[r].currentNLS,N=n[r].dataelements?n[r].dataelements.description:n[r].description,O=n[r].dataelements?n[r].dataelements.ecm_change_on_hold:n[r].ecm_change_on_hold,v=n[r].dataelements?n[r].dataelements.project:n[r].project,y=n[r].dataelements?n[r].dataelements.organization:n[r].organization,C=n[r].dataelements?n[r].dataelements.icon:n[r].icon,p=n[r].dataelements?n[r].dataelements.severity:n[r].severity,T=n[r].dataelements?n[r].dataelements.policy:n[r].policy,D=n[r].dataelements?n[r].dataelements.isChangeAction:n[r].isChangeAction,_="TRUE"===(_=n[r].dataelements?n[r].dataelements.isChangeRequest:n[r].isChangeRequest),R=1==(D="TRUE"===D)?"ChangeAction":1==_?"ChangeRequest":"ChangeOrder",S=n[r].dataelements?n[r].dataelements.changeCoordinator:n[r].changeCoordinator,b=n[r].dataelements?n[r].dataelements.changeCoordinatorFullName:n[r].changeCoordinatorFullName,w=n[r].dataelements?n[r].dataelements.owner:n[r].owner,A=n[r].dataelements?n[r].dataelements.ownerFullName:n[r].ownerFullName,I=n[r].dataelements?n[r].dataelements.previewicon:n[r].previewicon,null!=n[r].dataelements&&null!=n[r].dataelements.applicability){g=String(n[r].dataelements.applicability).replace(/\n/g," , ")}var F=0;"Medium"==p?F=1:"High"==p&&(F=2);var E=0;"In Work"==f?E=1:"In Approval"==f?E=2:"Approved"==f&&(E=3),"true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&i&&i[0]&&i[0][o]&&(e=i[0][o].approvalStatus,l=i[0][o].approvalStatusModel);var x={id:o,type:s,typeNLS:P,title:c,name:d,revision:u,maturity:f,maturityNLS:h,severity:p,severityNLS:m,description:N,collabspace:v,organization:y,iconURL:C,changeCoordinator:S,changeCoordinatorFullName:b,owner:w,ownerFullName:A,thumbnail:I,severityGrade:F,stateGrade:E,isKindOfChangeAction:D,isKindOfChangeRequest:_,ecm_change_on_hold:O,isKindOfType:R,policy:T,ApprovalStatus:e,approvalStatusModel:l,applicabilityNLS:g};a.push(x)}return new Promise((function(e,t){g.getNLSForProcessedList("COOrchestration",a).then((function(){e(a)}),(function(){e(a)}))}))},processChangeOrderRecentList:function(e,t){var a=[],n=e.data;if(null!=n)for(var i=0;i<n.length;i++){var r,o,s,l,c,d,u,p,f,g,m,h,v,y,C,S,b="",w="";r=n[i].id,o=n[i].type,S=n[i].typeNLS,l=n[i].name,c=n[i].revision,s=n[i].title,n[i].severity,p=n[i].severityNLS,u=n[i].current,f=n[i].currentNLS,v=n[i].description,C="TRUE"===n[i].ecm_change_on_hold?"true":"false",g=n[i].project,m=n[i].organization,h=n[i].icon,d=n[i].severity,y="TRUE"===n[i].isChangeAction,n[i].changeCoordinator&&(b=n[i].changeCoordinator),n[i].changeCoordinatorFullName&&(w=n[i].changeCoordinatorFullName);var A=0;"Medium"==d?A=1:"High"==d&&(A=2);var I=0;"In Work"==u?I=1:"In Approval"==u?I=2:"Approved"==u&&(I=3);var N={id:r,type:o,typeNLS:S,title:s,name:l,revision:c,maturity:u,maturityNLS:f,severity:d,severityNLS:p,description:v,collabspace:g,organization:m,iconURL:h,changeCoordinator:b,changeCoordinatorFullName:w,owner:n[i].owner,ownerFullName:n[i].ownerFullName,thumbnail:n[i].previewicon,severityGrade:A,stateGrade:I,isKindOfChangeAction:y,onHold:C,isKindOfType:t,businessState:n[i].businessStateName?n[i].businessStateName:"",allowedTransitionStatesList:n[i].allowedTransitionList&&n[i].allowedTransitionList.length>0&&n[i].allowedTransitionList[0].transitionStates[0]&&n[i].allowedTransitionList[0].transitionStates.length>0?n[i].allowedTransitionList[0].transitionStates:[]};a.push(N)}return a},processChangeActionInContext:function(a){var n=[],i=[],r=a.changeaction.name,o=a.changeaction.id;"pid"==o.substring(0,3)&&(o=o.substring(4));var s,l,c=a.changeaction.type,d=a.changeaction.type,u="",p="",f="",g="",m=(f="","");for(var h=a.changeaction.policy,v=(e.CHG_CA_Role_Owner,a.changeaction.attributes),y=0;y<v.length;y++)"current"==v[y].name?u=v[y].value:"attribute_Severity"==v[y].name?p=v[y].value:"attribute_Synopsis"==v[y].name?f=v[y].value:"interface[Change On Hold]"==v[y].name?v[y].value:"attribute_Originator"==v[y].name?g=v[y].value:"attribute_EstimatedCompletionDate"==v[y].name&&(m=v[y].value);m=m?new UWA.Date(m).strftime("%Y-%m-%d"):"";var C=0;"Medium"==p?C=1:"High"==p&&(C=2);var S=0;"In Work"==u?S=1:"In Approval"==u?S=2:"Approved"==u&&(S=3),s=e.get("CHG_CA_State_"+u),l=e.get("CHG_CA_Severity_"+p);var b=t.getGlobalVariable().collabspace,w=t.getGlobalVariable().organization,A=t.getGlobalVariable().computeUrl("/snresources/images/icons/large/I_ECM_CA108x144.png"),I=t.getGlobalVariable().computeUrl("/snresources/images/icons/small/I_ECM_CA.png"),N={title:f,name:r,maturity:u,severity:p,maturityNLS:s,severityNLS:l,owner:g,id:o,type:c,typeNLS:d,displayType:c,severityGrade:C,stateGrade:S,collabspaceNLS:b,organizationNLS:w,ownerFullName:t.getGlobalVariable().contextUserFullName,changeCoordinator:"",changeCoordinatorFullName:"",iconURL:I,thumbnail:A,isKindOfChangeAction:!0,isKindOfType:"ChangeAction",policy:h};return""!=m&&null!=m&&(N.dueDate=m),i.push(N),n.processData=i,n},createPayloadApprovalStatusValue:function(e){let a;a=e.data?e.data:e;var n=[];if(null!=a){for(let e=0;e<a.length;e++){let t="";if(a[e].dispostionId)t=a[e].dispostionId;else if(a[e].DispositionInformation||a[e].dispositionInformation){let n;n=a[e].DispositionInformation?a[e].DispositionInformation.length:a[e].dispositionInformation.length;for(let i=0;i<n;i++)t=a[e].DispositionInformation?a[e].DispositionInformation[i].dispostionId:a[e].dispositionInformation[i].dispostionId}else t=a[e].id;t.includes("pid:")&&(t=t.replace("pid:",""));let i={id:t};n.push(i)}var i=t.getGlobalVariable().tenant,r=decodeURIComponent(t.getGlobalVariable().getSecurityContext()),o=!1;1!=t.getGlobalVariable().is3DSpace&&1!=t.getGlobalVariable().isNative||(o=!0);var s={data:n,option:{tenant:i,securityContext:r,contextUserMailId:"testuser@gmail.com",removeHyperlink:o}}}return s},processedCASummaryList:async function(e,a){let n=this,i=[],r=[],o=e.data;if("true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&await l.getColumnApprovalStatusValue(g.createPayloadApprovalStatusValue(e)).then((function(e){e&&r.push(e)})),null!=o)for(let e=0;e<o.length;e++){let a="",s="",l="",c="",d="",u="",p="",f="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="",N="",O="",P="false",T="",D="ChangeAction",_="",R="",F="",E="";a=o[e].id,s=o[e].type,T=o[e].typeNLS,c=o[e].name,d=o[e].revision,l=o[e].title,u=o[e].severity,f=o[e].severityNLS,p=o[e].current,m=o[e].currentNLS,O=o[e].description,y=o[e].project,C=o[e].organization,S=o[e].icon,u=o[e].severity,E=o[e].policy,R=g.formatDate(o[e].modified),F=g.formatDate(o[e].originated),o[e].changeCoordinator&&(b=o[e].changeCoordinator),o[e].changeCoordinatorFullName&&(w=o[e].changeCoordinatorFullName),A=o[e].owner,I=o[e].ownerFullName,N=o[e].previewicon,P="TRUE"===o[e].ecm_change_on_hold?"true":"false";let x=0;"Medium"==u?x=1:"High"==u&&(x=2);let j=0;if("In Work"==p?j=1:"In Approval"==p?j=2:"Approved"==p&&(j=3),"true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&r&&r[0]&&r[0][a]&&(h=r[0][a].approvalStatus,v=r[0][a].approvalStatusModel),null!=o[e].applicability){_=String(o[e].applicability).replace(/\n/g," , ")}let L={id:a,type:s,typeNLS:T,title:l,name:c,revision:d,maturity:p,maturityNLS:m,severity:u,severityNLS:f,ApprovalStatus:h,approvalStatusModel:v,description:O,collabspace:y,organization:C,iconURL:S,changeCoordinator:b,changeCoordinatorFullName:w,owner:A,ownerFullName:I,thumbnail:N,severityGrade:x,stateGrade:j,onHold:P,isKindOfType:D,applicabilityNLS:_,modificationDate:R,creationDate:F,policy:E,interfaces:Array.isArray(o[e].interfaces)?o[e].interfaces:void 0,classes:Array.isArray(o[e].classes)?n.getClassifiedInterfaces(o[e].classes):void 0};i.push(L)}return new Promise((function(e,t){g.getNLSForProcessedList("CRSummary",i).then((function(){e(i)}),(function(){e(i)}))}))},processedCRSummaryList:async function(e,a){let n=this,i=[],r=e.data,o=[];if("true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&await l.getColumnApprovalStatusValue(g.createPayloadApprovalStatusValue(e)).then((function(e){e&&o.push(e)})),null!=r)for(let e=0;e<r.length;e++){let a="",s="",l="",c="",d="",u="",p="",f="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="",N="",O="",P="false",T="",D="ChangeRequest",_="",R="",F="",E="";a=r[e].id,s=r[e].type,T=r[e].typeNLS,c=r[e].name,d=r[e].revision,l=r[e].title,u=r[e].severity,f=r[e].severityNLS,p=r[e].current,m=r[e].currentNLS,O=r[e].description,h=r[e].project,v=r[e].organization,y=r[e].icon,u=r[e].severity,E=r[e].policy,R=g.formatDate(r[e].modified),F=g.formatDate(r[e].originated),r[e].changeCoordinator&&(C=r[e].changeCoordinator),r[e].changeCoordinatorFullName&&(S=r[e].changeCoordinatorFullName),b=r[e].owner,w=r[e].ownerFullName,N=r[e].previewicon,P="TRUE"===r[e].ecm_change_on_hold?"true":"false";let x=0;"Medium"==u?x=1:"High"==u&&(x=2);let j=0;if("In Work"==p?j=1:"In Approval"==p?j=2:"Approved"==p&&(j=3),"true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&o&&o[0]&&o[0][a]&&(A=o[0][a].approvalStatus,I=o[0][a].approvalStatusModel),null!=r[e].applicability){_=String(r[e].applicability).replace(/\n/g," , ")}let L={id:a,type:s,typeNLS:T,title:l,name:c,revision:d,maturity:p,maturityNLS:m,severity:u,severityNLS:f,ApprovalStatus:A,approvalStatusModel:I,description:O,collabspace:h,organization:v,iconURL:y,changeCoordinator:C,changeCoordinatorFullName:S,owner:b,ownerFullName:w,thumbnail:N,severityGrade:x,stateGrade:j,onHold:P,isKindOfType:D,applicabilityNLS:_,modificationDate:R,creationDate:F,policy:E,interfaces:Array.isArray(r[e].interfaces)?r[e].interfaces:void 0,classes:Array.isArray(r[e].classes)?n.getClassifiedInterfaces(r[e].classes):void 0};i.push(L)}return new Promise((function(e,t){g.getNLSForProcessedList("CRSummary",i).then((function(){e(i)}),(function(){e(i)}))}))},processedIRSummaryList:function(e){let t=this,a=[],n=e.data;if(null!=n)for(let e=0;e<n.length;e++){let i,r="",o="",s="",l="",c="",d="",u="",p="",f="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="false",N="",O="InvestigationRequest",P="",T="",D="",_="",R="";r=n[e].id,o=n[e].type,N=n[e].typeNLS,l=n[e].name,c=n[e].revision,s=n[e].title,d=n[e].severity,p=n[e].severityNLS,u=n[e].current,f=n[e].currentNLS,A=n[e].description,m=n[e].project,h=n[e].organization,v=n[e].icon,d=n[e].severity,_=n[e].policy,R=n[e].businessStateName?n[e].businessStateName:"",T=g.formatDate(n[e].modified),D=g.formatDate(n[e].originated),n[e].changeCoordinator&&(y=n[e].changeCoordinator),n[e].changeCoordinatorFullName&&(C=n[e].changeCoordinatorFullName),S=n[e].owner,b=n[e].ownerFullName,w=n[e].previewicon,i=n[e].allowedTransitionList&&n[e].allowedTransitionList.length>0?n[e].allowedTransitionList[0].transitionStates[0]&&n[e].allowedTransitionList[0].transitionStates.length>0?n[e].allowedTransitionList[0].transitionStates:[]:void 0,I="TRUE"===n[e].ecm_change_on_hold?"true":"false";let F=0;"Medium"==d?F=1:"High"==d&&(F=2);let E=0;if("In Work"==u?E=1:"In Approval"==u?E=2:"Approved"==u&&(E=3),null!=n[e].applicability){P=String(n[e].applicability).replace(/\n/g," , ")}let x={id:r,type:o,typeNLS:N,title:s,name:l,revision:c,maturity:u,maturityNLS:f,severity:d,severityNLS:p,description:A,collabspace:m,organization:h,iconURL:v,changeCoordinator:y,changeCoordinatorFullName:C,owner:S,ownerFullName:b,thumbnail:w,severityGrade:F,stateGrade:E,onHold:I,isKindOfType:O,applicabilityNLS:P,modificationDate:T,creationDate:D,policy:_,interfaces:Array.isArray(n[e].interfaces)?n[e].interfaces:void 0,classes:Array.isArray(n[e].classes)?t.getClassifiedInterfaces(n[e].classes):void 0,businessState:R,allowedTransitionStatesList:i};a.push(x)}return new Promise((function(e,t){g.getNLSForProcessedList("CRSummary",a).then((function(){e(a)}),(function(){e(a)}))}))},processedChangeRequestNewIssueList:function(e){let a=[],n=t.getGlobalVariable();if(null!=e){let t="",i="",r="",o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="";m=e.state,i=n.computeUrl("/"+e.iconurl),r=e.physicalId,f=e.type,p=e.title,s=e.organization,c=n.computeUrl("/"+e.image),d=e.collaborativeSpace,u=e.revision,o=e.name,l=e.owner.fullName,g=e.type,t=e.policy+"."+e.state,h=e.policy;let v={type:f,state:m,revision:u,title:p,id:r,name:o,thumbnail:c,icon:i,maturity:t,ownerFullName:l,collabSpce:d,organization:s,policy:h};a.push(v)}return new Promise((function(e,t){g.getNLSForProcessedList("createIssue",a).then((function(){e(a)}),(function(){e(a)}))}))},processCRChangeOrchestration:async function(e){let a=[],n=e.data,i=[];if("true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&await l.getColumnApprovalStatusValue(g.createPayloadApprovalStatusValue(e)).then((function(e){e&&i.push(e)})),null!=n)for(let e=0;e<n.length;e++){let r="",o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="",A="false",I="",N=!1,O=!1,P="",T="",D="",_="",R="";r=n[e].id,o=n[e].type,I=n[e].typeNLS,l=n[e].name,c=n[e].revision,s=n[e].title,d=n[e].severity,p=n[e].severityNLS,u=n[e].current,f=n[e].currentNLS,w=n[e].description,g=n[e].project,m=n[e].organization,h=n[e].icon,d=n[e].severity,n[e].changeCoordinator&&(v=n[e].changeCoordinator),n[e].changeCoordinatorFullName&&(y=n[e].changeCoordinatorFullName),C=n[e].owner,S=n[e].ownerFullName,b=n[e].previewicon,T=n[e].policy,A="TRUE"===n[e].ecm_change_on_hold?"true":"false";let F=0;"Medium"==d?F=1:"High"==d&&(F=2);let E=0;if("In Work"==u?E=1:"In Approval"==u?E=2:"Approved"==u&&(E=3),"true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&i&&i[0]&&i[0][r]&&(D=i[0][r].approvalStatus,_=i[0][r].approvalStatusModel),N="TRUE"===n[e].isChangeAction,O="TRUE"===n[e].isChangeRequest,P=1==N?"ChangeAction":1==O?"ChangeRequest":"ChangeOrder",null!=n[e].applicability){R=String(n[e].applicability).replace(/\n/g," , ")}let x={id:r,type:o,typeNLS:I,title:s,name:l,revision:c,maturity:u,maturityNLS:f,severity:d,severityNLS:p,description:w,collabspace:g,organization:m,iconURL:h,changeCoordinator:v,changeCoordinatorFullName:y,owner:C,ApprovalStatus:D,approvalStatusModel:_,ownerFullName:S,thumbnail:b,severityGrade:F,stateGrade:E,policy:T,ecm_change_on_hold:A,isKindOfType:P,isKindOfChangeAction:N,isKindOfChangeRequest:O,applicabilityNLS:R};a.push(x)}return new Promise((function(e,t){g.getNLSForProcessedList("CROrchestration",a).then((function(){e(a)}),(function(){e(a)}))}))},processedChangeOrderDetail:function(e){var t=[],a=e.data;if(null!=a)for(var n=0;n<a.length;n++){var i,r,o,s,l,c,d,u,p,f,g,m,h,v,y="",C="";let e="ChangeOrder";i=a[n].id,r=a[n].type,v=a[n].dataelements.typeNLS,s=a[n].dataelements.name,l=a[n].dataelements.revision,o=a[n].dataelements.title,a[n].dataelements.severity,u=a[n].dataelements.severityNLS,d=a[n].dataelements.current,p=a[n].dataelements.currentNLS,h=a[n].dataelements.description,f=a[n].dataelements.project,g=a[n].dataelements.organization,m=a[n].dataelements.icon,c=a[n].dataelements.severity,a[n].dataelements.changeCoordinator&&(y=a[n].dataelements.changeCoordinator),a[n].dataelements.changeCoordinatorFullName&&(C=a[n].dataelements.changeCoordinatorFullName);var S=0;"Medium"==c?S=1:"High"==c&&(S=2);var b=0;"In Work"==d?b=1:"In Approval"==d?b=2:"Approved"==d&&(b=3);var w={id:i,type:r,typeNLS:v,title:o,name:s,revision:l,maturity:d,maturityNLS:p,severity:c,severityNLS:u,description:h,collabspace:f,organization:g,iconURL:m,changeCoordinator:y,changeCoordinatorFullName:C,owner:a[n].dataelements.owner,ownerFullName:a[n].dataelements.ownerFullName,thumbnail:a[n].dataelements.previewicon,severityGrade:S,stateGrade:b,onHold:"TRUE"===a[n].dataelements.ecm_change_on_hold?"true":"false",isKindOfType:e};t.push(w)}return t},processedChangeRequestMemberList:function(e){var a=[],n=e.data;if(null!=n)for(var i=0;i<n.length;i++){var r,o,s,l,c,d,u="",p="";u="Group"==(r=n[i].type)&&"OnPremise"!=t.getGlobalVariable().tenant?n[i].groupURI:n[i].id,o="Group"==r?n[i].title:n[i].name,s=n[i].userid,p=n[i].roles,l=n[i].previewicon,c=n[i].icon,d=p.toString();var f={id:u,type:r,fullName:o,userId:s,roles:p,role:d,thumbnail:l,icon:c,title:n[i].title};a.push(f)}return a},processedChangeRequestIssueList:function(e){var t=[],a=e.data;if(null!=a)for(var n=0;n<a.length;n++){var i,r,o,s,l,c,d,u;r=a[n].id,l=a[n].typeNLS,u=a[n].typeNLS,d=a[n].type,c=a[n].title,o=a[n].ownerFullName,s=a[n].previewicon,i=a[n].icon;var p={type:d,typeNLS:u,revision:l,title:c,id:r,name:a[n].name,thumbnail:s,icon:i,maturity:a[n].current,maturityNLS:a[n].currentNLS,ownerFullName:o,collabSpce:a[n].project,organization:a[n].organization,relId:a[n].relId,policy:a[n].policyNLS,policyNLS:a[n].policyNLS};t.push(p)}return t},processedChangeRequestRelatedScope:function(e){var t=[],a=e.data;if(null!=a)for(var n=0;n<a.length;n++){var i,r,o,s,l,c,d,u,p,f,m,h,v,y,C;s=a[n].id,m=a[n].revision,y=a[n].typeNLS,v=a[n].type,h=a[n].title,d=a[n].ownerFullName,u=a[n].previewicon,o=a[n].icon,l=a[n].name,i=a[n].status,r=a[n].currentNLS,p=a[n].project,c=a[n].organization,f=a[n].relId,C=a[n].sourceType;var S={type:v,typeNLS:y,revision:m,title:h,id:s,name:l,previewicon:u,icon:o,maturity:i,maturityNLS:r,ownerFullName:d,collabSpce:p,organization:c,relId:f,policy:a[n].policy,sourceType:C,kind:a[n]["ds6w:kind"],serviceBasedObjId:s};t.push(S)}return new Promise((function(e,a){g.getNLSForProcessedList("ReportedAgainst",t).then((function(){e(t)}),(function(){e(t)}))}))},processCRAffectedItems:function(e){var t=void 0,a=new Array,n=[],i=e.data;if(null!=i)for(var r=0;r<i.length;r++){i[r].interface&&(t=new Set(i[r].interface)),i.classes&&(a=[...a,...this.getProposedClassifiedInterfaces(data.classes)]);let e=[];t&&(e=Array.from(t),e=e.filter((e=>""!==e)));let o=[];a&&a.length>0&&(o=a.filter((e=>""!==e.name)));let s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C=0,S="",b="",w="",A="",I="",N="",O="";l=i[r].id,c=i[r].type,f=i[r].name,y=i[r].status,v=i[r].currentNLS,s=i[r].title,u=i[r].previewicon,p=i[r].icon,m=i[r].project,h=i[r].organization,d=i[r].typeNLS,g=i[r].revision,C=i[r].impactAnalysis.length,S=i[r].reasonForChange,b=i[r].ownerFullName,w=i[r].policy,A=i[r].policyNLS,I=i[r].sourceType,N=i[r].service,O=i[r]["ds6w:kind"];let P={id:l,type:c,revision:g,typeNLS:d,thumbnail:u,maturity:y,maturityNLS:v,icon:p,name:f,title:s,countImpactAnalysis:C,collabspace:m,organization:h,reasonForChange:S,ownerFullName:b,policy:w,policyNLS:A,sourceType:I,serviceName:N,kind:O,serviceBasedObjId:l,interfaces:e,classes:o};n.push(P)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("CRAffectedItems",n),e(n)}))},processCRAffectedWithi3dxItems:function(e,t){var a=[],n=e.data;for(let e=0;e<n.length;e++){let i=0,r="",o="",s="",l=g.filterInformationFromFetchUri(n[e]),c=l.i3dx;if(t.has(c)){let e=t.get(c);r=e.reasonForChange,s=e.service,o=e.sourceType,i=e.impactAnalysis.length,t.delete(e.id)}let d={id:l.i3dx,type:l.type,revision:l.revision,typeNLS:l.typeNLS,thumbnail:l.thumbnail,maturity:l.maturity,maturityNLS:l.maturityNLS,icon:l.icon,name:l.name,title:l.title,countImpactAnalysis:i,collabspace:l.collabSpce,organization:l.organization,reasonForChange:r,ownerFullName:l.ownerFullName,sourceType:o,serviceName:s,policy:l.policy,kind:l["ds6w:kind"],serviceBasedObjId:l.id};a.push(d)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("CRAffectedItems",a),e(a)}))},processIRAffectedItems:async function(t,a){var n=[],i=t.data;let r=[];if(await l.getColumnApprovalStatusValue(g.createPayloadApprovalStatusValue(t)).then((function(e){e&&r.push(e)})),null!=i)for(var o=0;o<i.length;o++){let t="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="",N="",O="",P="",T="",D="",_="",R="",F="",E="",x="";if(l=i[o].id,c=i[o].type,f=i[o].name,y=i[o].status,v=i[o].currentNLS,t=i[o].title,u=i[o].previewicon,p=i[o].icon,m=i[o].project,h=i[o].organization,d=i[o].typeNLS,g=i[o].revision,C=i[o].reasonForChange,S=i[o].ownerFullName,b=i[o].policy,w=i[o].policyNLS,A=i[o].sourceType,I=i[o].service,N=i[o]["ds6w:kind"],P=i[o].scopeAnalysisId,x=i[o].isAffectedUsages&&"true"==i[o].isAffectedUsages?"true":"false",_=i[o].affectedAs&&""!=i[o].affectedAs?i[o].affectedAs:i[o].isAffectedUsages&&"true"==i[o].isAffectedUsages?"Affected":"Reported",a&&i[o].id===a&&(_="Reported"),R="Affected"==_?e.CHG_IR_Affected_Items_Affected:"Introduced In"==_?e.CHG_IR_Affected_Items_Introduced_In:e.CHG_IR_Affected_Items_Reported,i[o].introducedInData){for(let e=0;e<i[o].introducedInData.length;e++)F+=i[o].introducedInData[e].revision+", ";F=F.slice(0,-2)}if(i[o].fixedInData){for(let e=0;e<i[o].fixedInData.length;e++)E+=i[o].fixedInData[e].revision+", ";E=E.slice(0,-2)}if(i[o].DispositionInformation){for(var s=0;s<i[o].DispositionInformation.length;s++)r&&i[o].DispositionInformation&&r[0][i[o].DispositionInformation[s].dispostionId]&&(T=r[0][i[o].DispositionInformation[s].dispostionId].approvalStatus,D=r[0][i[o].DispositionInformation[s].dispostionId].approvalStatusModel);for(s=0;s<i[o].DispositionInformation.length;s++)i[o].DispositionInformation&&(i[o].DispositionInformation[s].ApprovalStatus=T,i[o].DispositionInformation[s].approvalStatusModel=D,O=i[o].DispositionInformation)}let j={id:l,type:c,revision:g,typeNLS:d,thumbnail:u,maturity:y,maturityNLS:v,icon:p,name:f,title:t,collabspace:m,organization:h,reasonForChange:C,ownerFullName:S,policy:b,policyNLS:w,sourceType:A,serviceName:I,kind:N,serviceBasedObjId:l,dispositionInformation:O,scopeAnalysisId:P,ApprovalStatus:T,approvalStatusModel:D,affectedAsIR:_,affectedAsIRNLS:R,introducedIn:F,fixedIn:E,isAffectedUsages:x};n.push(j)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("CRAffectedItems",n),e(n)}))},processIAImpacts:function(e){var t=[],a=e.data;if(null!=a)for(var n=0;n<a.length;n++){let e="",i="",r="",o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="",N="",O="",P="";i=a[n].id,r=a[n].type,d=a[n].name,m=a[n].status,g=a[n].currentNLS,e=a[n].title,s=a[n].previewicon,l=a[n].previewicon,c=a[n].icon,p=a[n].project,I=a[n].project,f=a[n].organization,o=a[n].typeNLS,u=a[n].revision,v="",y="IMPACTED",C=a[n].ownerFullName,S=a[n].policy,b=a[n].policyNLS,w=a[n].sourceType,A=a[n].service,N=a[n].service,h=a[n].owner,O=a[n].cestamp,P=a[n]["ds6w:kind"];let T={id:i,type:r,revision:u,typeNLS:o,thumbnail:s,previewicon:l,current:m,currentNLS:g,icon:c,name:d,title:e,collabspace:p,project:I,organization:f,reasonForChange:v,impactedItem:y,ownerFullName:C,policy:S,policyNLS:b,sourceType:w,serviceName:A,service:N,owner:h,cestamp:O,kind:P,serviceBasedObjId:i};t.push(T)}return new Promise((function(e,a){g.getNLSForProcessedList("IAImpacts",t).then((function(){e(t)}),(function(){e(t)}))}))},processIAImpactsForGet:function(e){var t=void 0,a=new Array,n=[],i=e;if(null!=i)for(var r=0;r<i.length;r++){i[r].interface&&(t=new Set(i[r].interface)),i.classes&&(a=[...a,...this.getProposedClassifiedInterfaces(data.classes)]);let e=[];t&&(e=Array.from(t),e=e.filter((e=>""!==e)));let o=[];a&&a.length>0&&(o=a.filter((e=>""!==e.name)));let s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="",N="",O="",P="",T="",D="",_="",R="";l=i[r].id,c=i[r].type,g=i[r].name,C=i[r].status,y=i[r].currentNLS,s=i[r].title,u=i[r].previewicon,p=i[r].previewicon,f=i[r].icon,h=i[r].project,T=i[r].project,v=i[r].organization,d=i[r].typeNLS,m=i[r].revision,b=i[r].reasonForChange,w=i[r].impactedItem,A=i[r].ownerFullName,I=i[r].policy,N=i[r].policyNLS,O=i[r].sourceType,P=i[r].service,D=i[r].service,S=i[r].owner,_=i[r].cestamp,R=i[r]["ds6w:kind"];let F={id:l,type:c,revision:m,typeNLS:d,thumbnail:u,previewicon:p,current:C,currentNLS:y,icon:f,name:g,title:s,collabspace:h,project:T,organization:v,reasonForChange:b,impactedItem:w,ownerFullName:A,policy:I,policyNLS:N,sourceType:O,serviceName:P,service:D,owner:S,cestamp:_,kind:R,serviceBasedObjId:l,interfaces:e,classes:o};n.push(F)}return new Promise((async function(e,t){await g.getNLSForProcessedList("IAImpacts",n),e(n)}))},processIAAnalysisBasis:function(e){var t=[],a=e.data;if(null!=a)for(var n=0;n<a.length;n++){let e="",i="",r="",o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="",N="",O="";i=a[n].id,r=a[n].type,d=a[n].name,m=a[n].status,g=a[n].currentNLS,e=a[n].title,s=a[n].previewicon,l=a[n].previewicon,c=a[n].icon,p=a[n].project,A=a[n].project,f=a[n].organization,o=a[n].typeNLS,u=a[n].revision,v="",y=a[n].ownerFullName,C=a[n].policy,S=a[n].policyNLS,b=a[n].sourceType,w=a[n].service,I=a[n].service,h=a[n].owner,N=a[n].cestamp,O=a[n]["ds6w:kind"];let P={id:i,type:r,revision:u,typeNLS:o,thumbnail:s,previewicon:l,current:m,currentNLS:g,icon:c,name:d,title:e,collabspace:p,project:A,organization:f,reasonForChange:v,ownerFullName:y,policy:C,policyNLS:S,sourceType:b,serviceName:w,service:I,owner:h,cestamp:N,kind:O,serviceBasedObjId:i};t.push(P)}return new Promise((function(e,a){g.getNLSForProcessedList("IAImpactBasis",t).then((function(){e(t)}),(function(){e(t)}))}))},processIAAnalysisBasisWithi3dxItems:function(e,t){var a=[],n=e.data;for(let e=0;e<n.length;e++){let i="",r="",o="",s=g.filterInformationFromFetchUri(n[e]),l=s.i3dx;if(t.has(l)){let e=t.get(l);i=e.reasonForChange,o=e.service,r=e.sourceType,t.delete(e.id)}let c={id:s.i3dx,type:s.type,revision:s.revision,typeNLS:s.typeNLS,thumbnail:s.thumbnail,maturity:s.maturity,maturityNLS:s.maturityNLS,icon:s.icon,name:s.name,title:s.title,collabspace:s.collabSpce,organization:s.organization,reasonForChange:i,ownerFullName:s.ownerFullName,sourceType:r,serviceName:o,policy:s.policy,kind:s["ds6w:kind"],serviceBasedObjId:s.id};a.push(c)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("IAImpactBasis",a),e(a)}))},processIAImpactsWithi3dxItems:function(e,t){var a=[],n=e.data;for(let e=0;e<n.length;e++){let i="",r="",o="",s=g.filterInformationFromFetchUri(n[e]),l=s.i3dx;if(t.has(l)){let e=t.get(l);i=e.reasonForChange,o=e.service,r=e.sourceType,t.delete(e.id)}let c={id:s.i3dx,type:s.type,revision:s.revision,typeNLS:s.typeNLS,thumbnail:s.thumbnail,maturity:s.maturity,maturityNLS:s.maturityNLS,icon:s.icon,name:s.name,title:s.title,collabspace:s.collabSpce,organization:s.organization,reasonForChange:i,ownerFullName:s.ownerFullName,sourceType:r,serviceName:o,policy:s.policy,kind:s["ds6w:kind"],serviceBasedObjId:s.id};a.push(c)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("IAImpacts",a),e(a)}))},processIAAnalysisBasisForGet:function(e){var t=void 0,a=new Array,n=[],i=e;if(null!=i)for(var r=0;r<i.length;r++){i[r].interface&&(t=new Set(i[r].interface)),i.classes&&(a=[...a,...this.getProposedClassifiedInterfaces(data.classes)]);let e=[];t&&(e=Array.from(t),e=e.filter((e=>""!==e)));let o=[];a&&a.length>0&&(o=a.filter((e=>""!==e.name)));let s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="",N="",O="",P="",T="",D="",_="";l=i[r].id,c=i[r].type,g=i[r].name,C=i[r].status,y=i[r].currentNLS,s=i[r].title,u=i[r].previewicon,p=i[r].previewicon,f=i[r].icon,h=i[r].project,P=i[r].project,v=i[r].organization,d=i[r].typeNLS,m=i[r].revision,b=i[r].reasonForChange,w=i[r].ownerFullName,A=i[r].policy,I=i[r].policyNLS,N=i[r].sourceType,O=i[r].service,T=i[r].service,S=i[r].owner,D=i[r].cestamp,_=i[r]["ds6w:kind"];let R={id:l,type:c,revision:m,typeNLS:d,thumbnail:u,previewicon:p,current:C,currentNLS:y,icon:f,name:g,title:s,collabspace:h,project:P,organization:v,reasonForChange:b,ownerFullName:w,policy:A,policyNLS:I,sourceType:N,serviceName:O,service:T,owner:S,cestamp:D,kind:_,serviceBasedObjId:l,interfaces:e,classes:o};n.push(R)}return new Promise((function(e,t){g.getNLSForProcessedList("IAImpactBasis",n).then((function(){e(n)}),(function(){e(n)}))}))},processCAContextItems:function(e){var t=[],a=e.data;if(null!=a)for(var n=0;n<a.length;n++){let e="",i="",r="",o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="";i=a[n].id,r=a[n].type,c=a[n].name,g=a[n].status,f=a[n].currentNLS,e=a[n].title,s=a[n].previewicon,l=a[n].icon,u=a[n].project,p=a[n].organization,o=a[n].typeNLS,d=a[n].revision,m=a[n].reasonForChange,h=a[n].ownerFullName,v=a[n].policy,y=a[n].policyNLS,C=a[n].sourceType,S=a[n].service,b=a[n]["ds6w:kind"];let w={id:i,type:r,revision:d,typeNLS:o,thumbnail:s,current:g,currentNLS:f,icon:l,name:c,title:e,collabspace:u,organization:p,reasonForChange:m,ownerFullName:h,policy:v,policyNLS:y,sourceType:C,serviceName:S,kind:b,serviceBasedObjId:i};t.push(w)}return new Promise((function(e,a){g.getNLSForProcessedList("CAContextItems",t).then((function(){e(t)}),(function(){e(t)}))}))},processInformationForRecentCRAffected:function(e){var t=[],a=new Set;for(let i=0;i<e.length;i++){let r=0,o="",s="",l="",c="",d=g.parsingInformationFromRecentSearch(e[i].nonIndexedData);var n=e[i].nonIndexedModelerData;n&&(n.reasonForChange&&(o=n.reasonForChange),n.service&&(l=n.service),n.sourceType&&(s=n.sourceType),n.impactAnalysis&&(r=n.impactAnalysis.length),n["ds6w:kind"]&&(c=n["ds6w:kind"])),a.add(d.ownerFullName);let u={id:d.id,type:d.type,revision:d.revision,typeNLS:d.typeNLS,thumbnail:d.thumbnail,maturity:d.maturity,maturityNLS:d.maturityNLS,icon:d.icon,name:d.name,title:d.title,countImpactAnalysis:r,collabspace:d.collabSpce,organization:d.organization,reasonForChange:o,ownerFullName:d.ownerFullName,sourceType:s,serviceName:l,policy:d.policy,kind:c,serviceBasedObjId:d.id};t.push(u)}let i="";return i=g.getQueryFromTriagram(a),i="("+i+")",console.log(i),new Promise((async function(e,a){var n=g.predicatesForFullNameForRecentData();const r=await Promise.all([g.getNLSForProcessedList("CRAffectedItems",t),s.federatedSearch(i,n)]);e(t=g.getOwnerFullNameForRecent(r[1],t))}))},processInformationForRecentIRAffected:function(t){var a=[],n=new Set;for(let r=0;r<t.length;r++){let o=0,s="",l="",c="",d="",u="",p="",f="",m="",h="",v=g.parsingInformationFromRecentSearch(t[r].nonIndexedData);var i=t[r].nonIndexedModelerData;i&&(i.reasonForChange&&(s=i.reasonForChange),i.service&&(c=i.service),i.sourceType&&(l=i.sourceType),i.impactAnalysis&&(o=i.impactAnalysis.length),i["ds6w:kind"]&&(d=i["ds6w:kind"]),i.DispositionInformation&&(u=i.DispositionInformation),i.scopeAnalysisId&&(p=i.scopeAnalysisId),h=i.isAffectedUsages&&"true"==i.isAffectedUsages?"true":"false",f=i.affectedAs&&""!=i.affectedAs?i.affectedAs:"Reported","Reported"==f?m=e.CHG_IR_Affected_Items_Reported:"Introduced In"==f?m=e.CHG_IR_Affected_Items_Introduced_In:"Affected"==f&&(m=e.CHG_IR_Affected_Items_Affected)),n.add(v.ownerFullName);let y={id:v.id,type:v.type,revision:v.revision,typeNLS:v.typeNLS,thumbnail:v.thumbnail,maturity:v.maturity,maturityNLS:v.maturityNLS,icon:v.icon,name:v.name,title:v.title,countImpactAnalysis:o,collabspace:v.collabSpce,organization:v.organization,reasonForChange:s,ownerFullName:v.ownerFullName,sourceType:l,serviceName:c,policy:v.policy,kind:d,serviceBasedObjId:v.id,dispositionInformation:u,scopeAnalysisId:p,affectedAsIR:f,affectedAsIRNLS:m,isAffectedUsages:h};a.push(y)}let r="";return r=g.getQueryFromTriagram(n),r="("+r+")",console.log(r),new Promise((async function(e,t){var n=g.predicatesForFullNameForRecentData();const i=await Promise.all([g.getNLSForProcessedList("CRAffectedItems",a),s.federatedSearch(r,n)]);e(a=g.getOwnerFullNameForRecent(i[1],a))}))},processInformationForRecentResolvedByDisposition:function(e){var t=[];for(let n=0;n<e.length;n++){let i="",r="",o=g.parsingInformationFromRecentSearch(e[n].nonIndexedData);var a=e[n].nonIndexedModelerData;a&&(a.resolvedById&&(i=a.resolvedById),a.dispositionId&&(r=a.dispositionId));let s={resolvedById:i,resolvedByThumbnail:o.thumbnail,resolvedByIcon:o.icon,resolvedByType:o.type,resolvedByName:o.name,resolvedByTitle:o.title,dispositionId:r};t.push(s)}return t},resolvedByInformationForCrossServiceAndRecents:async function(t){var a=t,i=new Map,r=a.length;for(let e=0;e<a.length;e+=50){let t=[];t=r<50?a.slice(e,e+r):a.slice(e,e+50);for(var o=[],l=new Map,c=t,d=0;d<c.length;d++){var u=c[d];o.push(u.resolvedById),l.set(u.resolvedById,u)}if(o.length>0){var p=g.commonPredicatedForFedSearch(),f=await g.callFederatedSearch(o,p);f&&f.results&&f.results.length}i=new Map([...i,...l]),r-=50}if(i&&i.size>0){var m=await s.recent();if(m&&m.results&&m.results.length>0){var h=g.filterNonIndexedDataNew(m,i);i.size!=h.length&&n.warn(e.CHG_GOV_Not_Accessable_Data,!0);var v=await g.processInformationForRecentResolvedByDisposition(h)}}return v},affectedItemsInformationInformationForCrossServiceAndRecents:async function(t){var a=new Map,i=t.length;for(let e=0;e<t.length;e+=50){let n=[];n=i<50?t.slice(e,e+i):t.slice(e,e+50);for(var r=[],o=new Map,l=n,c=0;c<l.length;c++){var d=l[c];r.push(d.affectedId),o.set(d.affectedId,d)}if(r.length>0){var u=g.commonPredicatedForFedSearch(),p=await g.callFederatedSearch(r,u);if(p&&p.results&&p.results.length>0)await g.processIRAffectedItemsFederatedSearch(p,o)}a=new Map([...a,...o]),i-=50}if(a&&a.size>0){var f=await s.recent();if(f&&f.results&&f.results.length>0){var m=g.filterNonIndexedDataNew(f,a);a.size!=m.length&&n.warn(e.CHG_GOV_Not_Accessable_Data,!0);var h=await g.processInformationForRecentIRAffected(m)}}return h},processInformationForRecentIAImpactBasis:function(e){var t=[],a=new Set;for(let r=0;r<e.length;r++){let o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="",A="",I="";for(let t=0;t<e[r].nonIndexedData.length;t++){var n=e[r].nonIndexedData[t];"resourceid"==n.name?s=n.value:"type_icon_url"==n.name?u=n.value:"preview_url"==n.name?d=n.value:"ds6w:identifier"==n.name?p=n.value:"ds6w:label"==n.name?o=n.value:"ds6w:type"==n.name?(l=n.value,c=n.dispValue):"ds6wg:revision"==n.name?f=n.value:"ds6w:status"==n.name?(A=n.value.split(".")[0],y=n.value.split(".")[1],v=n.dispValue):"ds6w:organizationResponsible"==n.name?(m=n.value,h=n.dispValue):"ds6w:project"==n.name?g=n.value:"ds6w:responsible"==n.name&&(S=n.value,I=n.value,a.add(S))}var i=e[r].nonIndexedModelerData;i&&(i.reasonForChange&&(C=i.reasonForChange),i.service&&(w=i.service),i.sourceType&&(b=i.sourceType));let N={id:s,type:l,revision:f,typeNLS:c,thumbnail:d,previewicon:d,current:y,currentNLS:v,icon:u,name:p,title:o,collabspace:g,organization:m,reasonForChange:C,ownerFullName:S,sourceType:b,serviceName:w,policy:A,owner:I,serviceBasedObjId:s};t.push(N)}let r="";return r=g.getQueryFromTriagram(a),r="("+r+")",console.log(r),new Promise((async function(e,a){var n=g.predicatesForFullNameForRecentData();const i=await Promise.all([g.getNLSForProcessedList("IAImpactBasis",t),s.federatedSearch(r,n)]);e(t=g.getOwnerFullNameForRecent(i[1],t))}))},processInformationForRecentIAImpacts:function(e){var t=[],a=new Set;for(let r=0;r<e.length;r++){let o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C=0,S="",b="",w="",A="",I="",N="",O="";for(let t=0;t<e[r].nonIndexedData.length;t++){var n=e[r].nonIndexedData[t];"resourceid"==n.name?s=n.value:"type_icon_url"==n.name?u=n.value:"preview_url"==n.name?d=n.value:"ds6w:identifier"==n.name?p=n.value:"ds6w:label"==n.name?o=n.value:"ds6w:type"==n.name?(l=n.value,c=n.dispValue):"ds6wg:revision"==n.name?f=n.value:"ds6w:status"==n.name?(N=n.value.split(".")[0],y=n.value.split(".")[1],v=n.dispValue):"ds6w:organizationResponsible"==n.name?(m=n.value,h=n.dispValue):"ds6w:project"==n.name?g=n.value:"ds6w:responsible"==n.name&&(w=n.value,O=n.value,a.add(w))}var i=e[r].nonIndexedModelerData;i&&(i.reasonForChange&&(S=i.reasonForChange),i.service&&(I=i.service),i.sourceType&&(A=i.sourceType),i.impactAnalysis&&(C=i.impactAnalysis.length),i.impactedItem&&(b=i.impactedItem));let P={id:s,type:l,revision:f,typeNLS:c,thumbnail:d,previewicon:d,current:y,currentNLS:v,icon:u,name:p,title:o,countImpactAnalysis:C,collabspace:g,organization:m,reasonForChange:S,ownerFullName:w,sourceType:A,serviceName:I,impactedItem:b,policy:N,owner:O,serviceBasedObjId:s};t.push(P)}let r="";return r=g.getQueryFromTriagram(a),r="("+r+")",console.log(r),new Promise((async function(e,a){var n=g.predicatesForFullNameForRecentData();const i=await Promise.all([g.getNLSForProcessedList("IAImpacts",t),s.federatedSearch(r,n)]);e(t=g.getOwnerFullNameForRecent(i[1],t))}))},processInformationForRecentCAContext:function(e){var t=[],a=new Set;for(let r=0;r<e.length;r++){let o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="";for(let t=0;t<e[r].nonIndexedData.length;t++){var n=e[r].nonIndexedData[t];"resourceid"==n.name?s=n.value:"type_icon_url"==n.name?u=n.value:"preview_url"==n.name?d=n.value:"ds6w:identifier"==n.name?p=n.value:"ds6w:label"==n.name?o=n.value:"ds6w:type"==n.name?(l=n.value,c=n.dispValue):"ds6wg:revision"==n.name?f=n.value:"ds6w:status"==n.name?(w=n.value.split(".")[0],y=n.value.split(".")[1],v=n.dispValue):"ds6w:organizationResponsible"==n.name?(m=n.value,h=n.dispValue):"ds6w:project"==n.name?g=n.value:"ds6w:responsible"==n.name&&(C=n.value,a.add(C))}var i=e[r].nonIndexedModelerData;i&&(i.service&&(b=i.service),i.sourceType&&(S=i.sourceType));let A={id:s,type:l,revision:f,typeNLS:c,thumbnail:d,previewicon:d,current:y,currentNLS:v,icon:u,name:p,title:o,collabspace:g,organization:m,ownerFullName:C,sourceType:S,serviceName:b,policy:w,serviceBasedObjId:s};t.push(A)}let r="";return r=g.getQueryFromTriagram(a),r="("+r+")",console.log(r),new Promise((async function(e,a){var n=g.predicatesForFullNameForRecentData();const i=await Promise.all([g.getNLSForProcessedList("CAContextItems",t),s.federatedSearch(r,n)]);e(t=g.getOwnerFullNameForRecent(i[1],t))}))},processInformationForRecentReportedAgainst:function(e){var t=[],a=new Set;for(let r=0;r<e.length;r++){let o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="";for(let t=0;t<e[r].nonIndexedData.length;t++){var n=e[r].nonIndexedData[t];"resourceid"==n.name?s=n.value:"type_icon_url"==n.name?u=n.value:"preview_url"==n.name?d=n.value:"ds6w:identifier"==n.name?p=n.value:"ds6w:label"==n.name?o=n.value:"ds6w:type"==n.name?(l=n.value,c=n.dispValue):"ds6wg:revision"==n.name?f=n.value:"ds6w:status"==n.name?(w=n.value.split(".")[0],y=n.value.split(".")[1],v=n.dispValue):"ds6w:organizationResponsible"==n.name?(m=n.value,h=n.dispValue):"ds6w:project"==n.name?g=n.value:"ds6w:responsible"==n.name&&(C=n.value,a.add(C))}var i=e[r].nonIndexedModelerData;i&&(i.service&&(b=i.service),i.sourceType&&(S=i.sourceType));let A={id:s,type:l,revision:f,typeNLS:c,thumbnail:d,previewicon:d,maturity:y,maturityNLS:v,icon:u,name:p,title:o,collabspace:g,organization:m,ownerFullName:C,sourceType:S,serviceName:b,policy:w,serviceBasedObjId:s};t.push(A)}let r="";return r=g.getQueryFromTriagram(a),r="("+r+")",console.log(r),new Promise((async function(e,a){var n=g.predicatesForFullNameForRecentData();const i=await Promise.all([g.getNLSForProcessedList("ReportedAgainst",t),s.federatedSearch(r,n)]);e(t=g.getOwnerFullNameForRecent(i[1],t))}))},processCRAffectedItemsFederatedSearch:function(e,t){var a=[],n=e.results;for(let e=0;e<n.length;e++){let i=0,r="",o="",s="",l=g.filterInformationFromFederatedSearch(n[e].attributes),c=l.i3dx?l.i3dx:l.id;if(t.get(c)){let e=t.get(c);r=e.reasonForChange,s=e.service,o=e.sourceType,i=e.impactAnalysis.length,t.delete(e.id)}let d={id:l.i3dx?l.i3dx:l.id,type:l.type,revision:l.revision,typeNLS:l.typeNLS,thumbnail:l.thumbnail,maturity:l.maturity,maturityNLS:l.maturityNLS,icon:l.icon,name:l.name,title:l.title,countImpactAnalysis:i,collabspace:l.collabSpce,organization:l.organization,reasonForChange:r,ownerFullName:l.ownerFullName,sourceType:o,serviceName:s,policy:l.policy,kind:l["ds6w:kind"],serviceBasedObjId:l.id};a.push(d)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("CRAffectedItems",a),e(a)}))},processIRAffectedItemsFederatedSearch:function(e,t){var a=[],n=e.results;for(let e=0;e<n.length;e++){let i=0,r="",o="",s="",l=g.filterInformationFromFederatedSearch(n[e].attributes),c=l.i3dx?l.i3dx:l.id;if(t.get(c)){let e=t.get(c);r=e.reasonForChange,s=e.service,o=e.sourceType,i=e.impactAnalysis.length,t.delete(e.id)}let d={id:l.i3dx?l.i3dx:l.id,type:l.type,revision:l.revision,typeNLS:l.typeNLS,thumbnail:l.thumbnail,maturity:l.maturity,maturityNLS:l.maturityNLS,icon:l.icon,name:l.name,title:l.title,countImpactAnalysis:i,collabspace:l.collabSpce,organization:l.organization,reasonForChange:r,ownerFullName:l.ownerFullName,sourceType:o,serviceName:s,policy:l.policy,kind:l["ds6w:kind"],serviceBasedObjId:l.id};a.push(d)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("CRAffectedItems",a),e(a)}))},processIAAnalysisBasisFederatedSearch:function(e,t){var a=[],n=e.results;for(let e=0;e<n.length;e++){let i="",r="",o="",s=g.filterInformationFromFederatedSearch(n[e].attributes),l=s.i3dx?s.i3dx:s.id;if(t.get(l)){let e=t.get(l);i=e.reasonForChange,o=e.service,r=e.sourceType,t.delete(e.id)}let c={id:s.i3dx?s.i3dx:s.id,type:s.type,revision:s.revision,typeNLS:s.typeNLS,thumbnail:s.thumbnail,previewicon:s.thumbnail,current:s.maturity,currentNLS:s.maturityNLS,icon:s.icon,name:s.name,title:s.title,collabspace:s.collabSpce,organization:s.organization,reasonForChange:i,ownerFullName:s.ownerFullName,sourceType:r,serviceName:o,policy:s.policy,kind:s["ds6w:kind"],owner:s.owner,serviceBasedObjId:s.id};a.push(c)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("IAImpactBasis",a),e(a)}))},processIAImpactsFederatedSearch:function(e,t){var a=[],n=e.results;for(let e=0;e<n.length;e++){let i="",r="",o="",s="",l=g.filterInformationFromFederatedSearch(n[e].attributes),c=l.i3dx?l.i3dx:l.id;if(t.get(c)){let e=t.get(c);i=e.reasonForChange,s=e.service,o=e.sourceType,r=e.impactedItem,t.delete(e.id)}let d={id:l.i3dx?l.i3dx:l.id,type:l.type,revision:l.revision,typeNLS:l.typeNLS,thumbnail:l.thumbnail,previewicon:l.thumbnail,current:l.maturity,currentNLS:l.maturityNLS,icon:l.icon,name:l.name,title:l.title,collabspace:l.collabSpce,organization:l.organization,reasonForChange:i,impactedItem:r,ownerFullName:l.ownerFullName,sourceType:o,serviceName:s,policy:l.policy,kind:l["ds6w:kind"],owner:l.owner,serviceBasedObjId:l.id};a.push(d)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("IAImpactBasis",a),e(a)}))},processCAContextItemsFederatedSearch:function(e,t){var a=[],n=e.results;for(let e=0;e<n.length;e++){let i="",r="",o=g.filterInformationFromFederatedSearch(n[e].attributes),s=o.i3dx?o.i3dx:o.id;if(t.get(s)){let e=t.get(s);r=e.service,i=e.sourceType,t.delete(e.id)}let l={id:o.i3dx?o.i3dx:o.id,type:o.type,revision:o.revision,typeNLS:o.typeNLS,thumbnail:o.thumbnail,previewicon:o.thumbnail,current:o.maturity,currentNLS:o.maturityNLS,icon:o.icon,name:o.name,title:o.title,collabspace:o.collabSpce,organization:o.organization,ownerFullName:o.ownerFullName,sourceType:i,serviceName:r,policy:o.policy,kind:o["ds6w:kind"],owner:o.owner,serviceBasedObjId:o.id};a.push(l)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("CAContextItems",a),e(a)}))},processReportedAgainstFederatedSearch:function(e,t){var a=[],n=e.results;for(let e=0;e<n.length;e++){let i="",r="",o=g.filterInformationFromFederatedSearch(n[e].attributes),s=o.i3dx?o.i3dx:o.id;if(t.get(s)){let e=t.get(s);r=e.service,i=e.sourceType,t.delete(e.id)}let l={id:o.i3dx?o.i3dx:o.id,type:o.type,revision:o.revision,typeNLS:o.typeNLS,thumbnail:o.thumbnail,previewicon:o.thumbnail,current:o.maturity,currentNLS:o.maturityNLS,icon:o.icon,name:o.name,title:o.title,collabspace:o.collabSpce,organization:o.organization,ownerFullName:o.ownerFullName,sourceType:i,serviceName:r,policy:o.policy,kind:o["ds6w:kind"],owner:o.owner,serviceBasedObjId:o.id};a.push(l)}return new Promise((async function(e,t){await g.getNLSForProcessedListFromSource("CAContextItems",a),e(a)}))},filterInformationFromFederatedSearch:function(e){let t={};for(let n=0;n<e.length;n++){var a=e[n];"resourceid"==a.name?t.id=a.value:"type_icon_url"==a.name?t.icon=a.value:"preview_url"==a.name?t.thumbnail=a.value:"ds6w:identifier"==a.name?t.name=a.value:"ds6w:label"==a.name?t.title=a.value:"ds6w:what/ds6w:type"==a.name?(t.type=a.value,t.typeNLS=a.value):"ds6wg:revision"==a.name?t.revision=a.value:"ds6w:what/ds6w:status"==a.name?a.value.includes(".")?(t.policy=a.value.split(".")[0],t.maturity=a.value.split(".")[1],t.maturityNLS=a.value.split(".")[1]):(t.maturity=a.value,t.maturityNLS=a.value):"ds6w:who/ds6w:responsible/ds6w:organizationResponsible"==a.name?(t.organization=a.value,t.organizationNLS=a.value):"ds6w:where/ds6w:context/ds6w:project"==a.name?t.collabSpce=a.value:"ds6w:who/ds6w:responsible"==a.name?t.ownerFullName=a.value:"ds6w:what/ds6w:i3dx"==a.name||"ds6w:i3dx"==a.name?t.i3dx=a.value:"ds6w:what/ds6w:kind"==a.name&&(t["ds6w:kind"]=a.value)}return t},filterInformationFromFetchUri:function(e){let t={};if(e.hasOwnProperty("objectState")&&(t.objectState=e.objectState),e.hasOwnProperty("ds6w:icon")&&(t.icon=e["ds6w:icon"]),e.hasOwnProperty("ds6w:previewURL")&&(t.thumbnail=e["ds6w:previewURL"]),e.hasOwnProperty("ds6w:identifier")&&(t.name=e["ds6w:identifier"]),e.hasOwnProperty("ds6w:label")&&(t.title=e["ds6w:label"]),e.hasOwnProperty("ds6w:type")&&(t.type=e["ds6w:type"],t.typeNLS=e["ds6w:type"]),e.hasOwnProperty("ds6wg:revision")&&(t.revision=e["ds6wg:revision"]),e.hasOwnProperty("ds6w:status")){var a=e["ds6w:status"];a.includes(".")?(t.policy=a.split(".")[0],t.maturity=a.split(".")[1],t.maturityNLS=a.split(".")[1]):(t.maturity=a,t.maturityNLS=a)}return e.hasOwnProperty("ds6w:project")&&(t.collabSpce=e["ds6w:project"]),e.hasOwnProperty("ds6wg:responsible")&&(t.ownerFullName=e["ds6wg:responsible"]),e.hasOwnProperty("ds6w:i3dx")&&(t.i3dx=e["ds6w:i3dx"]),e.hasOwnProperty("ds6w:kind")&&(t["ds6w:kind"]=e["ds6w:kind"]),t},parsingInformationFromRecentSearch:function(e){let t={};for(let n=0;n<e.length;n++){var a=e[n];"resourceid"==a.name?t.id=a.value:"type_icon_url"==a.name?t.icon=a.value:"preview_url"==a.name?t.thumbnail=a.value:"ds6w:identifier"==a.name?t.name=a.value:"ds6w:label"==a.name?t.title=a.value:"ds6w:type"==a.name?(t.type=a.value,t.typeNLS=a.dispValue):"ds6wg:revision"==a.name?t.revision=a.value:"ds6w:status"==a.name?(t.policy=a.value.split(".")[0],t.maturity=a.value.split(".")[1],t.maturityNLS=a.dispValue):"ds6w:organizationResponsible"==a.name?(t.organization=a.value,t.organizationNLS=a.dispValue):"ds6w:project"==a.name?t.collabSpce=a.value:"ds6w:responsible"==a.name&&(t.ownerFullName=a.value)}return t},callFederatedSearch:async function(e,t){var a=g.getQueryForNon3DSpace(e);return new Promise((async function(e,n){e(await s.federatedSearch(a,t))}))},callCV2FetchAPI:async function(e,t){return new Promise((async function(a,n){a(await s.cv2Fetch(e,t))}))},getQueryForNon3DSpace:function(e){let t="";for(let a=0;a<e.length;a++){let n='[ds6w:i3dx]:("'+e[a]+'")';a!=e.length-1&&(n+=" OR "),t+=n}return t},getOwnerFullNameForRecent:function(e,t){let a=new Map;if(e.results&&e.results.length)for(let t=0;t<e.results.length;t++){let i,r;for(let a=0;a<e.results[t].attributes.length;a++){var n=e.results[t].attributes[a];"ds6w:label"==n.name&&(i=n.value),"ds6w:identifier"==n.name&&(r=n.value)}null!=i&&null!=r&&a.set(r,i)}for(let e=0;e<t.length;e++){let n=t[e].ownerFullName;a.has(n)&&(t[e].ownerFullName=a.get(n))}return t},getQueryFromTriagram:function(e){let t="",a=Array.from(e);for(let e=0;e<a.length;e++){let n='3dexpPerson:"'+a[e]+'"';e!=a.length-1&&(n+=" OR "),t+=n}return t},getCRTypeIconOuterHTML:function(e){var t=UWA.createElement("span",{class:"CRTypeIconHolderOnIADGV",styles:{}});return UWA.createElement("img",{src:e.Icon,id:e.Id}).inject(t),t.outerHTML},processIADataList:function(t,a){let n="<div>";return t.length>1&&(n="<div style='padding-left:5px'>"),1===t.length?(n+=this.getCRTypeIconOuterHTML(t[0]),n+="&nbsp;",n+="<span id='"+t[0].Id+"'>",n+="Name"===a?t[0].Name:"Title"===a?t[0].Title:"",n+="</span>"):t.length>1&&(n+="<a id='MULTIPLE'>"+e.CHG_GOV_MULTIPLE+"</a>"),n+="</div>",n},processCRImpactAnalysis:function(t,a,n){let i=this,r=[],o=t.data;if(null!=o)for(let t=0;t<o.length;t++){let n="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="",A=0,I=0,N=0,O=0,P="ChangeAnalysis",T=0,D="true",_=0,R="true",F=0,E="true",x=0,j="true",L=0,G="true",W="",U="",k="",V="",M="",z="",H=null,J=null,q=null,B=Array.isArray(o[t].interfaces)?o[t].interfaces:void 0,K=Array.isArray(o[t].classes)?i.getClassifiedInterfaces(o[t].classes):void 0;s=o[t].id,l=o[t].type,c=o[t].typeNLS,g=o[t].name,n=o[t].title,d=o[t].previewicon,u=o[t].icon,p=o[t].owner,f=o[t].ownerFullName,h=o[t].current,m=o[t].currentNLS,v=o[t].policy,y=o[t]["Abstract Change Analysis.Completion Date Due"]?o[t]["Abstract Change Analysis.Completion Date Due"]:e.CHG_NOT_VALID_VALUE,C=o[t]["Abstract Change Analysis.Completion Date Estimated"]?o[t]["Abstract Change Analysis.Completion Date Estimated"]:e.CHG_NOT_VALID_VALUE,S=o[t]["Abstract Change Analysis.Start Date Estimated"]?o[t]["Abstract Change Analysis.Start Date Estimated"]:e.CHG_NOT_VALID_VALUE,b=o[t]["Abstract Change Analysis.Completion Date Actual"]?o[t]["Abstract Change Analysis.Completion Date Actual"]:e.CHG_NOT_VALID_VALUE,w=o[t]["Abstract Change Analysis.Start Date Actual"]?o[t]["Abstract Change Analysis.Start Date Actual"]:e.CHG_NOT_VALID_VALUE,A=parseInt(o[t].impactBasisCount),I=parseInt(o[t].impactedItemsCount),N=parseInt(o[t].attachmentCount),O=parseInt(o[t].contributorsCount),T=o[t]["Default Change Analysis Metrics.Benefit Impact"]?parseInt(o[t]["Default Change Analysis Metrics.Benefit Impact"]):e.CHG_NOT_VALID_VALUE,D=o[t]["Default Change Analysis Metrics.Benefit Impact"]?"true":"false",_=o[t]["Default Change Analysis Metrics.Cost Impact"]?parseInt(o[t]["Default Change Analysis Metrics.Cost Impact"]):e.CHG_NOT_VALID_VALUE,R=o[t]["Default Change Analysis Metrics.Cost Impact"]?"true":"false",F=o[t]["Default Change Analysis Metrics.Validation Effort"]?parseInt(o[t]["Default Change Analysis Metrics.Validation Effort"]):e.CHG_NOT_VALID_VALUE,E=o[t]["Default Change Analysis Metrics.Validation Effort"]?"true":"false",x=o[t]["Default Change Analysis Metrics.Risk Impact"]?parseInt(o[t]["Default Change Analysis Metrics.Risk Impact"]):e.CHG_NOT_VALID_VALUE,j=o[t]["Default Change Analysis Metrics.Risk Impact"]?"true":"false",L=o[t]["Default Change Analysis Metrics.Implementation Effort"]?parseInt(o[t]["Default Change Analysis Metrics.Implementation Effort"]):e.CHG_NOT_VALID_VALUE,G=o[t]["Default Change Analysis Metrics.Implementation Effort"]?"true":"false",W=o[t].cancelComment,o[t].Refinement&&(U=o[t].Refinement),o[t].Dispatch_To&&(k=this.processIADataList(o[t].Dispatch_To,"Name"),V=this.processIADataList(o[t].Dispatch_To,"Title"),H=o[t].Dispatch_To),o[t].Dispatch_From&&(M=this.processIADataList(o[t].Dispatch_From,"Name"),z=this.processIADataList(o[t].Dispatch_From,"Title"),J=o[t].Dispatch_From),o[t].Dispatch_From_ParentCR&&(q=o[t].Dispatch_From_ParentCR);let X={id:s,type:l,typeNLS:c,thumbnail:d,icon:u,name:g,title:n,owner:p,ownerFullName:f,maturity:h,maturityNLS:m,policy:v,dueDate:y,estimatedEndDate:C,estimatedStartDate:S,completionDateActual:b,startDateActual:w,countImpactBasis:A,countImpactedItems:I,countAttachment:N,countContributors:O,isKindOfType:P,parentCRId:a,benefitImpact:T,benefitImpactValid:D,costImpact:_,costImpactValid:R,validationEffort:F,validationEffortValid:E,riskImpact:x,riskImpactValid:j,implementationEffort:L,implementationEffortValid:G,cancelComment:W,refinement:U,dispTo:k,dispToTitle:V,dispFrom:M,dispFromTitle:z,Dispatch_To:H,Dispatch_From:J,Dispatch_From_ParentCR:q,interfaces:B,classes:K};r.push(X)}return r},processChangeActionDetails:function(t){let a=[],n=t.data;if(null!=n)for(let t=0;t<n.length;t++){let i="",r="",o="",s="",l="",c="",d="",u="",p="",f="",g="",m="",h="",v="",y="",C="",S="",b="",w="false",A="",I="ChangeAction";i=n[t].id,r=n[t].type,A=n[t].typeNLS,s=n[t].name,l=n[t].revision,o=n[t].title,c=n[t].severity,u=n[t].severityNLS,d=n[t].current,p=n[t].currentNLS,C=n[t].description,S=null!=n[t].groupId?"pid:"+n[t].groupId:"",b=null!=n[t].groupName?n[t].groupName:e.CHG_Header_Unassigned,f=n[t].project,g=n[t].organization,m=n[t].icon,c=n[t].severity,h=n[t].owner,v=n[t].ownerFullName,y=n[t].previewicon,w="TRUE"===n[t].ecm_change_on_hold?"true":"false";let N=0;"Medium"==c?N=1:"High"==c&&(N=2);let O=0;"In Work"==d?O=1:"In Approval"==d?O=2:"Approved"==d&&(O=3);let P={id:i,type:r,typeNLS:A,title:o,name:s,revision:l,maturity:d,maturityNLS:p,severity:c,severityNLS:u,description:C,collabspace:f,organization:g,iconURL:m,owner:h,ownerFullName:v,thumbnail:y,severityGrade:N,stateGrade:O,onHold:w,isKindOfType:I,groupId:S,groupName:b};a.push(P)}return a},processedChangeActionContext:function(e){var t=[],a=e.data;if(null!=a)for(var n=0;n<a.length;n++){var i,r,o,s,l,c,d,u;r=a[n].id,l=a[n].typeNLS,u=a[n].typeNLS,d=a[n].type,c=a[n].title,o=a[n].ownerFullName,s=a[n].previewicon,i=a[n].icon;var p={type:d,typeNLS:u,revision:l,title:c,id:r,name:a[n].name,previewicon:s,icon:i,maturity:a[n].current,maturityNLS:a[n].currentNLS,ownerFullName:o,collabSpce:a[n].project,organization:a[n].organization,relId:a[n].relId,sourceType:a[n].sourceType,policy:a[n].policy,policyNLS:a[n].policyNLS};t.push(p)}return t},processChangeAction:function(e){var t=e;let a="";if(null!=t){let e="",n="",i="",r="",o="",s="",l="",c="",d="";i=t.id,c=t.type,r=t.name,t.current,e=t.currentNLS,l=t.title,s=t.previewicon,n=t.icon,o=t.organization,d=t.typeNLS,a={id:i,type:c,typeNLS:d,previewicon:s,current:e,currentNLS:e,icon:n,name:r,title:l,organization:o}}return a},processAccessBitCO:function(e){return"true"===t.getGlobalVariable().isFullLicence||"true"===t.getGlobalVariable().isDerivativeLicense||"true"===t.getGlobalVariable().isLiteLicence&&(e.Delete&&(e.Delete="false"),e.Edit&&(e.Edit="false"),e.Hold&&(e.Hold="false"),e.Resume&&(e.Resume="false"),e.Cancel&&(e.Cancel="false"),e.SetCoordinator&&(e.SetCoordinator="false"),e.ManageRouteTemplates&&(e.ManageRouteTemplates="false"),e.setApplicability&&(e.setApplicability="false"),e.AddReferential&&(e.AddReferential="false"),e.Promote&&(e.Promote="false"),e.Demote&&(e.Demote="false"),e.ManageGovernedChanges&&(e.ManageGovernedChanges="false"),e.ManageReportedAgainst&&(e.ManageReportedAgainst="false"),e.ManageFollowers&&(e.ManageFollowers="false"),e.ManageAssignees&&(e.ManageAssignees="false")),e},processAccessBitCR:function(e){return e.CROrchestrationCreateCR="true",e.CROrchestrationCreateCO="true",e.CROrchestrationAddExisting="true",e.CROrchestrationMergeCA="true",e.CROrchestrationRemove="true",e.CROrchestrationDelete="true","false"==e.ManageImplementingChanges&&(e.CROrchestrationCreateCR="false",e.CROrchestrationCreateCO="false",e.CROrchestrationAddExisting="false",e.CROrchestrationMergeCA="false",e.CROrchestrationRemove="false",e.CROrchestrationDelete="false"),"true"===t.getGlobalVariable().isFullLicence||"true"===t.getGlobalVariable().isDerivativeLicense||"true"===t.getGlobalVariable().isLiteLicence&&(e.Hold&&(e.Hold="false"),e.Resume&&(e.Resume="false"),e.Cancel&&(e.Cancel="false"),e.CROrchestrationDelete&&(e.CROrchestrationDelete="false"),e.CROrchestrationCreateCO&&(e.CROrchestrationCreateCO="false"),e.CROrchestrationMergeCA&&(e.CROrchestrationMergeCA="false"),e.CROrchestrationRemove&&(e.CROrchestrationRemove="false"),e.ManageChangeAnalysis&&(e.ManageChangeAnalysis="false")),e},processAccessBitIA:function(e){return"true"===t.getGlobalVariable().isFullLicence||"true"===t.getGlobalVariable().isDerivativeLicense||"true"===t.getGlobalVariable().isLiteLicence&&(e.Cancel&&(e.Cancel="false"),e.AddAssignee&&(e.AddAssignee="false"),e.RemoveAssignee&&(e.RemoveAssignee="false"),e.ManageImplementingChanges&&(e.ManageImplementingChanges="false"),e.createActivities&&(e.createActivities="false")),e},processAccessBitCA:function(e){return e.AddToGroup&&e.RemoveFromGroup&&(e.AddToGroup="true"==e.AddToGroup||"true"==e.RemoveFromGroup),"true"===t.getGlobalVariable().isFullLicence||("true"===t.getGlobalVariable().isDerivativeLicense?(e.RealizedTransfer&&(e.RealizedTransfer="false"),e.AddToGroup&&(e.AddToGroup="false")):"true"==t.getGlobalVariable().isLiteLicence&&(e.Hold&&(e.Hold="false"),e.Resume&&(e.Resume="false"),e.RealizedTransfer&&(e.RealizedTransfer="false"),e.Synchronization&&(e.Synchronization="false"),e.AddToGroup&&(e.AddToGroup="false"),e.FlowdownTo&&(e.FlowdownTo="false"))),e},processedChangeActionBOMSync:function(e){return{id:e.userDisplayName.data[0].id,type:e.userDisplayName.data[0].type,accessBits:e.userDisplayName.data[0].dataelements}},processAccessBitIR:function(e){return e.CROrchestrationCreateCR="true",e.CROrchestrationCreateCO="true",e.CROrchestrationAddExisting="true",e.CROrchestrationMergeCA="true",e.CROrchestrationRemove="true",e.CROrchestrationDelete="true","false"==e.ManageImplementingChanges&&(e.CROrchestrationCreateCR="false",e.CROrchestrationCreateCO="false",e.CROrchestrationAddExisting="false",e.CROrchestrationMergeCA="false",e.CROrchestrationRemove="false",e.CROrchestrationDelete="false"),"true"===t.getGlobalVariable().isFullLicence||"true"===t.getGlobalVariable().isDerivativeLicense||"true"===t.getGlobalVariable().isLiteLicence&&(e.Hold&&(e.Hold="false"),e.Resume&&(e.Resume="false"),e.Cancel&&(e.Cancel="false"),e.CROrchestrationDelete&&(e.CROrchestrationDelete="false"),e.CROrchestrationCreateCO&&(e.CROrchestrationCreateCO="false"),e.CROrchestrationMergeCA&&(e.CROrchestrationMergeCA="false"),e.CROrchestrationRemove&&(e.CROrchestrationRemove="false"),e.ManageChangeAnalysis&&(e.ManageChangeAnalysis="false")),e},getGetCellValueFunction:function(e,t){return"dateTime"===e?(e,a)=>c.formatDate(new Date(e.nodeModel.getAttributeValue(t)),!0):(e,a)=>e.nodeModel.getAttributeValue(t)},identifierNameFilter:d.inherit({isDataFiltered:function(e){const t=t=>{let a=e.options[t];return a?a.toLowerCase():a},a=t("identifier"),n=t("name");if(a&&n&&this.filterModel&&this.filterModel.text){const e=this.filterModel.text.toLowerCase();return!(a.includes(e)||n.includes(e))}return!1},isEmpty:function(){return!this.filterModel.text}}),uniqBy:function(e,...t){return t.filter((e=>e)).flatMap((e=>[...e])).filter((a=new Set,function(t){return n=e(t),!a.has(n)&&a.add(n);var n}));var a},searchFromModelAndUniqAndAdd:function(e,t,a){return this.uniqBy(e,t.selectedItems,a.map(e).map((a=>t._model.getRoots().find((t=>e(t)===a))))||[])},getDefaultFilter:function(e){var t={};for(let n in e){var a=e[n].dataIndex;"tree"==e[n].dataIndex?t.label={filterId:"stringRegexp",filterModel:""}:e[n].filterId?t[a]={filterId:e[n].filterId,filterModel:e[n].filterModel}:"boolean"==e[n].dataType?t[a]={filterId:"set",filterModel:[]}:"integer"==e[n].dataType||"real"==e[n].dataType?t[a]={filterId:"number",filterModel:""}:"string"==e[n].dataType?e[n].range?t[a]={filterId:"set",filterModel:[]}:t[a]={filterId:"stringRegexp",filterModel:""}:Array.isArray(e[n].children)&&e[n].children.forEach((e=>{e.filterId&&(t[e.dataIndex]={filterId:e.filterId,filterModel:e.filterModel})}))}return t},getProposedNodeData_ForInstance:async function(e){var t=void 0,a=new Array;e.interface&&(t=new Set(e.interface)),e.classes&&(a=[...a,...this.getProposedClassifiedInterfaces(e.classes)]);let n=[];t&&(n=Array.from(t),n=n.filter((e=>""!==e)));let i=[];a&&a.length>0&&(i=a.filter((e=>""!==e.name)));var r=await s.getNLSValuesPromise({"ds6w:type":[e.type],"ds6w:status":[e.status],"ds6w:project":[e.project],"ds6w:organizationResponsible":[e.organization]});return{id:e.id,cestamp:e.cestamp,type:e.type,typeNLS:r["ds6w:type"][e.type],displayName:e.title,title:e.title,interfaces:n,classes:i,name:e.name,revision:e.revision?e.revision:"",maturity:e.status,maturityNLS:r["ds6w:status"][e.status],organization:e.organization,organizationNLS:r["ds6w:organizationResponsible"][e.organization],collabspace:e.project,collabspaceNLS:r["ds6w:project"][e.project],isLastRevision:e.isLastRevision,icon:e.icon,previewIcon:e.previewicon,owner:e.owner,ownerFullName:e.ownerFullName,proposedOperation:e.proposedOperation,proposedPID:e.proposedPID,proposedStatus:e.proposedStatus,reasonForChange:e.proposedWhy,evolutionPrefix:e.evolutionPrefix,sourceType:e.sourceType,serviceName:e.service,kind:e["ds6w:kind"],serviceBasedObjId:e.id,activity:e.activity,containsChangeRequired:e.containsChangeRequired}},getProposedNodeData:function(e){var t=void 0,a=new Array;e.interface&&(t=new Set(e.interface)),e.classes&&(a=[...a,...this.getProposedClassifiedInterfaces(e.classes)]);let n=[];t&&(n=Array.from(t),n=n.filter((e=>""!==e)));let i=[];return a&&a.length>0&&(i=a.filter((e=>""!==e.name))),{id:e.id,cestamp:e.cestamp,type:e.type,displayName:e.title,title:e.title,interfaces:n,classes:i,name:e.name,revision:e.revision?e.revision:"",maturity:e.status,organization:e.organization,collabspace:e.project,isLastRevision:e.isLastRevision,icon:e.icon,previewIcon:e.previewicon,owner:e.owner,ownerFullName:e.ownerFullName,proposedOperation:e.proposedOperation,proposedPID:e.proposedPID,proposedStatus:e.proposedStatus,reasonForChange:e.proposedWhy,evolutionPrefix:e.evolutionPrefix,sourceType:e.sourceType,serviceName:e.service,kind:e["ds6w:kind"],serviceBasedObjId:e.id,activity:e.activity,containsChangeRequired:e.containsChangeRequired}},processCAProposedChangesData:async function(e){var t=this,a=e[0].proposed,n={deletedOrUnaccessiblePropFound:"false",proposed:[],policies:[]},i=[];if(a&&a.length>0){let D=new Set;for(var r=0;r<a.length;r++){var o;D.add(a[r].policy);var l=t.getProposedNodeData(a[r]);if(l.resolution=[],a[r].resolution&&a[r].resolution.length>0){a[r].resolution[0].idsOfNonIndexedResolution&&(o=a[r].resolution[0].idsOfNonIndexedResolution,a[r].resolution.splice(0,1));for(var c=0;c<a[r].resolution.length;c++){var d=a[r].resolution[c];l.resolution.push(t.getProposedNodeData(d)),D.add(d.policy)}}if(a[r].activity&&a[r].activity.length>0)for(c=0;c<a[r].activity.length;c++)if("ChangeRequired"==a[r].activity[c].proposedOperation&&a[r].activity[c].instanceDetails&&a[r].activity[c].instanceDetails[0]&&a[r].activity[c].instanceDetails[0].referenceDetails&&a[r].activity[c].instanceDetails[0].referenceDetails[0]){var u=a[r].activity[c].instanceDetails[0].referenceDetails[0];u.proposedOperation=a[r].activity[c].proposedOperation,l.activity[c].instanceDetails[0].referenceDetails[0]=await t.getProposedNodeData_ForInstance(u),D.add(u.policy)}if(o&&o.length>0){var p=new Map,f=o.length;for(let a=0;a<f;a+=50){let n;n=f<50?o.slice(a,a+f):o.slice(a,a+50);for(var m,h=[],v=new Map,y=0;y<n.length;y++){e=n[y];h.push(e.id),v.set(e.id,e)}if(h.length>0){var C=t.commonPredicatedForFedSearch(),S=await t.callFederatedSearch(h,C);S&&S.results&&S.results.length>0&&(m=t.processCAProposedChangeResolutionFedSearch(S,v)),m&&m.length>0&&(l.resolution=l.resolution.concat(m))}p=new Map([...p,...v]),f-=50}if(p&&p.size>0){var b=await s.recent();if(b&&b.results&&b.results.length>0){var w=t.filterNonIndexedDataNew(b,p);p.size!=w.length&&console.log("Some data for resolution is not accessible");var A=t.processInformationForRecentResolution(w);A&&A.length>0&&(l.resolution=l.resolution.concat(A))}}}if(l.fdFrom=[],a[r].fdFrom&&a[r].fdFrom.length>0){a[r].fdFrom[0].idsOfNonIndexedResolution&&(o=a[r].fdFrom[0].idsOfNonIndexedResolution,a[r].fdFrom.splice(0,1));for(var I=0;I<a[r].fdFrom.length;I++){var N=a[r].fdFrom[I];l.fdFrom.push(t.getProposedNodeData(N)),D.add(N.policy)}}if(l.fdFor=[],a[r].fdFor&&a[r].fdFor.length>0){a[r].fdFor[0].idsOfNonIndexedResolution&&(o=a[r].fdFor[0].idsOfNonIndexedResolution,a[r].fdFor.splice(0,1));for(var O=0;O<a[r].fdFor.length;O++){var P=a[r].fdFor[O];l.fdFor.push(t.getProposedNodeData(P)),D.add(P.policy)}}i.push(l)}D.forEach((e=>n.policies.push(e)));var T=await g.getNLSForProcessedListFromSource("CAProposedChange",i);n.proposed=T}return n},processCAProposedChangesFedSearch:async function(e,t){var a=this,n={proposed:[],policies:[]};let i=new Set;var r=[],o=e.results;for(let e=0;e<o.length;e++){let n=g.filterInformationFromFederatedSearch(o[e].attributes),N=n.i3dx?n.i3dx:n.id;var l;if(t.get(N)){let e=t.get(N);var c=a.getProposedNodeDataFed(e,n);if(c.resolution=[],e.resolution&&e.resolution.length>0){e.resolution[0].idsOfNonIndexedResolution&&(l=e.resolution[0].idsOfNonIndexedResolution,e.resolution.splice(0,1));for(var d=0;d<e.resolution.length;d++){var u=e.resolution[d];c.resolution.push(a.getProposedNodeData(u)),i.add(u.policy)}}if(l&&l.length>0){var p=new Map,f=l.length;for(let e=0;e<f;e+=50){let t;t=f<50?l.slice(e,e+f):l.slice(e,e+50);for(var m,h=[],v=new Map,y=0;y<t.length;y++){var C=t[y];h.push(C.id),v.set(C.id,C)}if(h.length>0){var S=a.commonPredicatedForFedSearch(),b=await a.callFederatedSearch(h,S);b&&b.results&&b.results.length>0&&(m=a.processCAProposedChangeResolutionFedSearch(b,v)),m&&m.length>0&&(c.resolution=c.resolution.concat(m))}p=new Map([...p,...v]),f-=50}if(p&&p.size>0){var w=await s.recent();if(w&&w.results&&w.results.length>0){var A=a.filterNonIndexedDataNew(w,p);p.size!=A.length&&console.log("Some data for resolution is not accessible");var I=await a.processInformationForRecentResolution(A);I&&I.length>0&&(c.resolution=c.resolution.concat(I))}}}r.push(c),t.delete(N)}}var N=await g.getNLSForProcessedListFromSource("CAProposedChange",r);return n.proposed=N,n},processCAProposedChangeResolutionFedSearch:function(e,t){var a=[],n=e.results;for(let e=0;e<n.length;e++){let r=g.filterInformationFromFederatedSearch(n[e].attributes),o=r.i3dx?r.i3dx:r.id;if(t.get(o)){let e=t.get(o);var i=this.getProposedNodeDataFed(e,r);a.push(i),t.delete(o)}}return a},processInformationForRecentResolution:function(e){var t=[];for(let n=0;n<e.length;n++){let i=this.parsingInformationFromRecentSearch(e[n].nonIndexedData);var a=e[n].nonIndexedModelerData;let r=this.getProposedNodeDataFed(a,i);t.push(r)}return t},getProposedNodeDataFed:function(e,t){return{id:t.i3dx?t.i3dx:t.id,cestamp:e.cestamp,type:t.type,displayName:t.title,title:t.title,name:t.name,revision:t.revision?t.revision:"",policy:t.policy,maturity:t.maturity,organization:t.organization,collabspace:t.project||t.collabSpce,isLastRevision:t.isLastRevision,icon:t.icon,previewIcon:t.previewicon,owner:t.owner,ownerFullName:t.ownerFullName,proposedOperation:e.proposedOperation,proposedPID:e.proposedPID,proposedStatus:e.proposedStatus,reasonForChange:e.proposedWhy,evolutionPrefix:e.evolutionPrefix,sourceType:e.sourceType,serviceName:e.service,kind:t["ds6w:kind"],activity:e.activity,serviceBasedObjId:t.id}},processInformationForRecentProposed:function(e){var t={proposed:[],policies:[]};let a=new Set;var n=[],i=new Set;for(let t=0;t<e.length;t++){let o=g.parsingInformationFromRecentSearch(e[t].nonIndexedData);var r=e[t].nonIndexedModelerData;let s=this.getProposedNodeDataFed(r,o);a.add(s.policy),n.push(s),i.add(s.ownerFullName)}let o="";return o=g.getQueryFromTriagram(i),o="("+o+")",a.forEach((e=>t.policies.push(e))),new Promise((async function(e,a){var i=g.predicatesForFullNameForRecentData();const r=await Promise.all([g.getNLSForProcessedList("CAProposedChange",n),s.federatedSearch(o,i)]);n=g.getOwnerFullNameForRecent(r[1],n),t.proposed=n,e(t)}))},getRecentRealizedIds:function(e){let t=new Set;return Array.isArray(e)&&e.forEach((e=>{(e.isFedIndexed&&"FALSE"===e.isFedIndexed||e.dataelements.isFedIndexed&&"FALSE"===e.dataelements.isFedIndexed)&&t.add(e.id),e.relateddata&&e.relateddata.activities&&e.relateddata.activities.forEach((e=>{(e.isFedIndexed&&"FALSE"===e.isFedIndexed||e.dataelements.isFedIndexed&&"FALSE"===e.dataelements.isFedIndexed)&&(t.add(e.id),e.dataelements.rel_id&&t.add(e.dataelements.rel_id),e.dataelements.ref_id&&t.add(e.dataelements.ref_id),e.dataelements.after_id&&t.add(e.dataelements.after_id),e.dataelements.before_id&&t.add(e.dataelements.before_id),e.dataelements.before_ref_id&&t.add(e.dataelements.before_ref_id))}))})),Array.from(t)},getRecentData:async function(e){var t=new Map,a=await s.recent();if(a&&a.results&&a.results.length>0){var n=a.results;for(let a=0;a<e.length;a++)for(let i=0;i<n.length;i++){let r=n[i].attributes.filter((e=>"resourceid"==e.name)).map((e=>e.value));if(r&&1==r.length&&e[a]===r[0]){t.set(e[a],n[i].attributes);break}}}return t},filterNonIndexedDataNew:function(e,t){var a=e.results,n=[];for(let[e,r]of t)for(let t=0;t<a.length;t++){let o=a[t].attributes.filter((e=>"resourceid"==e.name)).map((e=>e.value));if(o&&1==o.length&&e===o[0]){var i={};i.nonIndexedData=a[t].attributes,i.nonIndexedModelerData=r,n.push(i);break}}return console.log(n),n},commonPredicatedForFedSearch:function(){return["resourceid","ds6w:identifier","ds6w:label","ds6w:type","ds6w:modified","ds6w:created","preview_url","type_icon_url","ds6w:responsible","owner","ds6w:docextension","ds6w:isLastRevision","ds6w:organizationResponsible","ds6w:status","ds6w:responsible_value","ds6w:responsible:snippet","ds6wg:revision","ds6w:project","ds6w:project_value","ds6wg:owner","ds6w:kind","ds6w:responsibleUid","ds6w:i3dx"]},predicatesForFullNameForRecentData:function(){return["ds6w:label","owner","ds6wg:owner","ds6w:identifier"]},processMembersList:function(e){let t=[],a=e.data;if(void 0!==a&&a.length>0)for(let e=0;e<a.length;e++){let n={};for(const t in a[e])if(Array.isArray(a[e][t])){let i=a[e][t].map((t=>({id:t.id,type:t.type,fullName:t.name,userId:t.userid,thumbnail:a[e].previewicon,icon:a[e].icon,title:t.title||"",roles:t.roles})));n[t]=i}t.push(n)}return t},processWindowOfImpact:function(a,i,r,o,s){var l,c=[];if(a)if(0!==Object.keys(a).length)if((l=a.options.grid).id)if(o){var d=o.options.grid;c.push({introducedIn:{id:l.id,type:l.type,service:t.getGlobalVariable().serviceName,revision:l.revision},existingIntroducedInId:{id:d.id,type:d.type,service:t.getGlobalVariable().serviceName,revision:d.revision}})}else c.push({introducedIn:{id:l.id,type:l.type,service:t.getGlobalVariable().serviceName,revision:l.revision}});else n.warn(e.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped");else if(o){d=o.options.grid;c.push({introducedIn:{},existingIntroducedInId:{id:d.id,type:d.type,service:t.getGlobalVariable().serviceName,revision:d.revision}})}else c.push({introducedIn:{}});if(i)if(0!==Object.keys(i).length)if((l=i.options.grid).id)if(r){var u=r.options.grid;c.push({fixedIn:{id:l.id,type:l.type,service:t.getGlobalVariable().serviceName,revision:l.revision},existingFixedInId:{id:u.id,type:u.type,service:t.getGlobalVariable().serviceName,revision:u.revision}})}else c.push({fixedIn:{id:l.id,type:l.type,service:t.getGlobalVariable().serviceName,revision:l.revision}});else n.warn(e.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped");else if(r){u=r.options.grid;c.push({fixedIn:{},existingFixedInId:{id:u.id,type:u.type,service:t.getGlobalVariable().serviceName,revision:u.revision}})}else c.push({fixedIn:{}});return s&&c.push({evaluateCornerCase:!0}),c},processMemberList:function(e,a=!1){let n=[],i=e.data;if(void 0!==i)for(let e=0;e<i.length;e++){let r="",o="",s="",l="",c="",d="",u="",p="",f="";o=i[e].type,r="Group"===o&&"OnPremise"!==t.getGlobalVariable().tenant?a&&i[e].dataelements.hasOwnProperty("groupURI")?i[e].dataelements.groupURI:i[e].groupURI||i[e].id:a?a?i[e].id:i[e].dataelements.id:i[e].id,s="Group"===o?a?i[e].dataelements.title:i[e].title:a?i[e].dataelements.name:i[e].name,l=a?i[e].dataelements.userid:i[e].userid,c=a?i[e].dataelements.roles:i[e].roles,d=a?i[e].dataelements.previewicon:i[e].previewicon,u=a?i[e].dataelements.icon:i[e].icon,p=c.toString(),f=a?i[e].dataelements.title:i[e].title;let g={id:r,type:o,fullName:s,userId:l,roles:c,role:p,thumbnail:d,icon:u,title:f};n.push(g)}return n}};return g})),define("DS/ENOChgServices/scripts/services/ChgSearchConfigServcies",["UWA/Core","UWA/Utils/InterCom","UWA/Class/Model","DS/ENOjquery/ENOjquery","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgMembersServices","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","require"],(function(e,t,a,n,i,r,o,s,l){"use strict";var c=function(e){this.multiSelectVal=e,this.socketName="search_socket_"+(new Date).getTime(),this.socket=new t.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var a=this.options();this.socket.dispatchEvent("RegisterContext",a)};return c.prototype.destroy=function(){var e={};e.widget_id=widget&&widget.id?widget.id:this.socketName,this.socket.dispatchEvent("unregisterSearchContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.disconnect()},c.prototype.options=function(e,t,a,r,s,c,d,u,p,f,g,m){i.getGlobalVariable().ECM_EnableAddMemberGenericComponent;let h=!1;"InvestigationRequest"==m&&(h=!0);var v={};let y;if(v.title=e,v.multiSel=this.multiSelectVal,v.mode="furtive",v.app_socket_id=this.socketName,v.widget_id=widget&&widget.id?widget.id:this.socketName,v.default_with_precond=0!=g&&1!=g||g,v.show_precond=!1,v.idcard_activated=!1,v.role=a,v.tenant=i.getGlobalVariable().tenant,y=h?t&&t.length>0:t&&"Person"!=t,y){"string"==typeof t&&t.length>0&&(t=t.split(",")),"string"==typeof f&&f.length>0&&(f=f.split(",")),v.precond="(",f&&f.length>0?(n.each(f,(function(e,t){v.precond+=0!==e?" OR ":"NOT(",v.precond+='[ds6w:type]:"'+t.trim()+'"'})),v.precond+=")"):n.each(t,(function(e,t){0!==e&&(v.precond+=" OR "),v.precond+='[ds6w:type]:"'+t.trim()+'"'})),v.precond+=")",""!=s&&(v.precond+=s),"Depend"!==e&&"Dependency"!==e||(v.precond+=' AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold" AND NOT current:"Cancelled")'),null!=p&&"addExistingOrchestration"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addExistingCROrchestration"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addExistingIssue"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addExistingRelatedScope"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addExistingAffectedItem"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addExistingImpactBasis"==p.condition&&(v.precond="",v.precond+=p.extendedQuery),null!=p&&"addExistingImpactedItems"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addExistingContexts"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addExistingImpactAnalysis"==p.condition&&(v.precond="",v.precond+=p.extendedQuery),null!=p&&"addExistingChangeAction"==p.condition&&(v.precond="",v.precond+=p.extendedQuery),null!=p&&"addExistingProposed"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addExistingDependancy"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"addChildChangeRequest"==p.condition&&(v.precond+=p.extendedQuery),null!=p&&"AddExistingDisposition"==p.condition&&(v.precond+=p.extendedQuery);i.getGlobalVariable().ECM_EnableAddMemberGenericComponent;if(h){let e=l("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices");v.precond=e.buildQueryStringForSearch(d,t,p,m)}else"Route Template"==t&&(v.precond=o.getQueryParameterForRouteTemplate(d))}if(!h)if("Person"===t&&p&&"addExistingIAAssignee"===p.condition){var C='(flattenedtaxonomies:"types/Person" AND policycurrent:"Person.Active")';C+="OnPremise"==i.getGlobalVariable().tenant?' OR (flattenedtaxonomies:"types/Group" AND current:"active")':" OR ([ds6w:type]:(Group))",v.precond=`(${C})`,null!=p&&"addExistingIAAssignee"==p.condition&&(v.precond+=p.extendedQuery)}else if(null!=m&&null!=m){let e=l("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices");v.precond=e.buildQueryStringForSearch(d,t,p,m)}return r&&(v.default_search_criteria=r),v},c.prototype.activate=function(e,t,a,n,i,r,o,s,l,c,d,u,p){var f=this.options(e,t,a,i,r,o,s,l,c,d,u,p);this.callback&&(this.callback=void 0),this.callback=n;var g={};g.widget_id=widget?widget.id:null,this.socket.dispatchEvent("unregisterSearchContext",g),this.socket.dispatchEvent("RegisterContext",f),this.socket.dispatchEvent("InContextSearch",f);var m=this;this.socket.addListener("onCloseTransient",(function(e){m.socket.dispatchEvent("UnregisterContext",{widget_id:g.widget_id})}))},c.prototype.isAvailable=function(){return e.is(this.socket)},c.prototype.objectsSelected=function(e){var t=[];if(this.callback){var n=!1;const c=/^[0-9a-fA-F]{32}$/;for(var i=0;i<e.length;i++){var o=new a(e[i]);let r=o.get("id"),s=o.get("ds6w:i3dx_value"),d=o.get("sourceid_value");d=d&&d.includes(":")?d.split(":")[0]:d;let u=o.get("ds6w:type_value");if("Group"==u||"foaf:Group"==u||!("3DSPACE"!=d.toUpperCase()||r&&r.contains(":"))||s&&""!=s.trim()){"3DSPACE"==d.toUpperCase()&&c.test(r)&&(s=void 0);var l=[];l.push(r),l.push(o.get("ds6w:identifier")),l.push(o.get("ds6w:type_value")),l.push(o.get("ds6w:policy_value")),l.push(o.get("type_icon_url")),l.push(o.get("ds6w:label")),l.push(o.get("ds6wg:revision")),l.push(d),l.push(s),t.push(l)}else n=!0,console.log("Service: "+d+" objectId:"+r+"i3dx:"+s)}n&&(r.warn(s.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped")),this.callback(t)}},c})),define("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices",["DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgSearchConfigServcies","DS/UIKIT/Alert","DS/WAFData/WAFData","UWA/Core","UWA/Class/Promise","DS/UIKIT/Native/Dropdown","DS/UIKIT/DropdownMenu","UWA/String","DS/i3DXCompassServices/i3DXCompassPubSub","require","UWA/Utils/InterCom","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/DocumentManagement/DocumentManagement","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/i3DXCompassPlatformServices/OpenWith","DS/WebappsUtils/WebappsUtils","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgDataService","DS/TransientWidget/TransientWidget"],(function(e,t,a,n,i,r,o,s,l,c,d,u,p,f,g,m,h,v,y,C,S,b){"use strict";var w={CurrModel:null,ChgIDCardCommonServices_CAModel:null,collectionToFilter:null,caEditComp:null,summaryCloned:null,dependencyElem:{},taggerObject:{},maturityCmd:null,initHandleBarsCalled:!1,selectedItemsArr:[],areCallbacksForOpenWithSet:!1,search:function(e,t,a,n,i,r,o,s,l,c,d,u){var f="";if("referentials"==n||"context"==n||"Contributors"==n||"Reviewers"==n||"Followers"==n||"proposed"==n||"Dependency"==n){for(var g=n+"ExcludeList",m=null!=r?r:null!=this.CurrModel&&null!=this.CurrModel?this.CurrModel.get(g):null,h=0;null!=m&&null!=m&&h<m.length;h++)if(m[h]){var v=m[h].toString();f=f+"NOT ("+(v=null!=r?"physicalid:"+v:v.replace("pid","physicalid"))+")"}}else if("ChangeOrder"==n||"TransferOwnership"==n){var y="ChangeOrder"==n?this.CurrModel.get("changeOrderId"):this.CurrModel.get("ownerId");UWA.is(y)&&""!=y&&(f="NOT ("+y.replace("pid","physicalid")+")")}var C=p.getGlobalVariable().getRole(),S=l,b=p.getGlobalVariable().contextUser,w=null!=this.CurrModel&&null!=this.CurrModel?this.CurrModel.get("id").slice(4):null;i.activate(e,t,C,a,S,f,o,b,w,s,c,d,u)},activateSearch:function(e,a){return new t(null==e||null==e||"Change Order"!=e&&"Issue"!==a&&"IA_Assignees"!=e&&("Person"!==e||"TransferOwnership"!==a)&&"proposed"!=a&&"Dependency"!==a&&"Change Request"!==a&&"Change Action"!==a&&"IA_ImpactAnalysis"!==a&&"resolutionItems"!==a)},activateSearch:function(e){return new t(e)},createCA:function(e,t,a){d("DS/ENOChgServices/scripts/services/ChgInfraService").makeWSCall("/resources/modeler/change/changeaction","POST","enovia","application/json",e,t,a)},editCA:function(e,t,a,n){var i="/resources/modeler/change/changeaction/"+t;d("DS/ENOChgServices/scripts/services/ChgInfraService").makeWSCall(i,"PUT","enovia","application/json",e,a,n)},getUserFullName:function(e){return new r((function(t,a){var n="";if(Array.isArray(e))for(var i=0;i<e.length;i++)""!=n?-1===n.indexOf(e[i])&&(n=n+"%7C"+e[i]):n=e[i];else n=e;f.makeWSCall("/resources/modeler/change/userdisplayname","GET","enovia","application/json","userNames="+n,(function(e){var a={};a.userDisplayName=e,t(a)}),null,!1)}))},getUserAccess:function(e){return new r((function(t,a){var n="/resources/modeler/change/access/"+e;d("DS/ENOChgServices/scripts/services/ChgInfraService").makeWSCall(n,"GET","enovia","application/json","",(function(e){var a={};a.userAccess=e,t(a)}),a,!1)}))},getCADetails:function(e){return new r((function(t,a){var n="/resources/modeler/change/changeaction/"+e+"?people=1&referentials=1&dependency=1&attributes=1&context=1&changeOrder=1&applicability=1";d("DS/ENOChgServices/scripts/services/ChgInfraService").makeWSCall(n,"GET","enovia","application/json","",(function(e){t(e)}),a,!1)}))},onItemViewDragForContents:function(e,t){var a,n,i,r,o,s,l,c,d=t.caId.substr(4);a=e[1];var u=[],p=Object.keys(a);for(var f in p){var m=a[p[f]];if(m){r=m.get("objectName"),o=m.get("fullName"),!UWA.is(r)&&UWA.is(o)&&""!=o&&(r=o),(i=(s=t.typeOfDrag&&"Proposed"===t.typeOfDrag?m.get("objectId"):m.get("id")).lastIndexOf(":"))>0&&(i+=1,s=s.substring(i)),(l=m.get("objectType"))||(l=m.get("type")),c=m.get("revision");var h={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",serviceId:"3DSpace",objectId:s,objectType:l,displayName:r,Revision:c,ChangeActionID:d,displayType:l,caContextIds:""};t.caContextIds&&0!=t.caContextIds.length&&(h.caContextIds=t.caContextIds),u.push(h)}}n=e[2];var v={protocol:"3DXContent",version:"1.1",source:"X3DCSMA_AP",widgetId:widget.id,data:{items:u}};g.DispatchEventToWin("DragStart",JSON.stringify(v)),n.dataTransfer.setData("Text",JSON.stringify(v))},updateExcludeList:function(e,t){var a=[];if("referentials"==t)e.get(t).forEach((function(e,t){a.push(e.get("id"))}));else if("context"==t){e.get(t).forEach((function(e,t){a.push(e.get("id"))}))}else"Depend"==t&&a.push(e.get("id"));e.set(t+"ExcludeList",a)},SetSpinnerWait:function(e,t){widget.body.style.pointerEvents="true"==e?"none":"auto"},removeDuplicatesToBeDroppedObjects:function(e){for(var t=0;t<e.data.items.length;t++)for(var a=t+1;a<e.data.items.length;a++)e.data.items[t].objectId==e.data.items[a].objectId&&(e.data.items.splice(a,1),a-=1);return e},getLatestRevisionFlag:function(e){return new r((function(t,a){var n={lastVersionRequests:[]};if(e&&e.length>0){e.forEach((function(e){n.lastVersionRequests.push({id:e})}));var i=UWA.Json.encode(n);d("DS/ENOChgServices/scripts/services/ChgInfraService").makeWSCall("/resources/v1/dslc/getlastversions?validIntents=E","POST","enovia","application/json",i,(function(e){var a={},n={};if(e.lastVersionRequests&&Array.isArray(e.lastVersionRequests))for(var i=0;i<e.lastVersionRequests.length;i++){var r=e.lastVersionRequests[i];r&&(n[r.id]=r.islast.toString())}a.versionInfo=n,t(a)}),a,!1)}else t(!0)}))},getFlowdownEnrichedInfo:function(e){var t=this;return new r((function(a,n){var i=[],r={};UWA.is(e)&&e.forEach((function(e){var t=e.id;if(r[t]={},"Cannot be found"!=e.get("flowDownFromTitle")&&""!=e.get("flowDownFromTitle")&&UWA.is(e.get("flowDownFromId"))&&""!=e.get("flowDownFromId")&&(r[t].flowdownFrom=e.get("flowDownFromId").replace("pid:",""),i.push(e.get("flowDownFromId").replace("pid:",""))),"Cannot be found"!=e.get("flowdownForObjectTitle")&&""!=e.get("flowdownForObjectTitle")&&UWA.is(e.get("flowdownForObjectId"))&&""!=e.get("flowdownForObjectId")&&(r[t].flowdownFor=e.get("flowdownForObjectId").replace("pid:",""),i.push(e.get("flowdownForObjectId").replace("pid:",""))),UWA.is(e.get("flowdownInfo"))){var a=e.get("flowdownInfo"),n=a.flowdownFor,o=[];for(var s in n){var l=n[s];l&&"Cannot be found"!=l.info["display name"]&&o.push(l.id.replace("pid:",""))}var c=[],d=a.flowdownFrom;for(var s in d){var u=d[s];u&&"Cannot be found"!=u.caTitle&&c.push(u.caID.replace("pid:",""))}o.length>0&&(i=i.concat(o)),c.length>0&&(i=i.concat(c))}})),i.length>0?t.getAdditionObjectInfo(i).then((function(t){var n=Object.keys(r);for(var i in n){var o=n[i];if(UWA.is(o)){var s=e.findWhere({id:o});if(s){var l=r[o];if(UWA.is(l)){var c=l.flowdownFrom;if(UWA.is(c)){var d=t.additionObjectInfo?t.additionObjectInfo[c]:null;UWA.is(d)&&(s.set("flowdownFromImage",d.image),s.set("flowdownFromIcon",d.icon))}var u=s.get("flowdownInfo");if(UWA.is(u)){var p=u.flowdownFrom;if(UWA.is(p)){var f=p.map((function(e){return e.caID}));for(var g in f){(C=t.additionObjectInfo?t.additionObjectInfo[f[g].replace("pid:","")]:void 0)&&(p[g].icon=C.icon,p[g].image=C.image)}}}var m=l.flowdownFor;if(UWA.is(m)){var h=t.additionObjectInfo?t.additionObjectInfo[m]:null;UWA.is(h)&&(s.set("flowdownForImage",h.image),s.set("flowdownForIcon",h.icon))}var v=s.get("flowdownInfo");if(UWA.is(v)){var y=u.flowdownFor;if(UWA.is(y)){f=y.map((function(e){return e.id}));for(var g in f){var C;(C=t.additionObjectInfo?t.additionObjectInfo[f[g].replace("pid:","")]:void 0)&&(y[g].info.icon=C.icon,y[g].info.image=C.image)}}}}}}}a(!0)})):a(!0)}))},getAdditionObjectInfo:function(e){return new r((function(t,a){if(e&&e.length>0){var n="$ids="+(e=e.toString());d("DS/ENOChgServices/scripts/services/ChgInfraService").makeWSCall("/resources/v2/e6w/service/ObjectInfo?$fields=ownerFullname,collabSpace,collabSpaceTitle,policy,icon,image,synopsis,functionalname,organization,organizationTitle","POST","enovia","application/x-www-form-urlencoded",n,(function(e){var a,n=new Object;UWA.is(e)&&UWA.is(e.data)&&e.data.forEach((function(e){var t="";e.dataelements.firstname&&e.dataelements.lastname&&(t=e.dataelements.firstname+" "+e.dataelements.lastname),(a=new Object).pid=e.id,a.type=e.type,a.typeNLS=e.dataelements.typeNLS,a.objectName=e.dataelements.name,a.revision=e.dataelements.revision,a.objectTitle=e.dataelements.title,a.icon=e.dataelements.icon,a.image=e.dataelements.image,a.fileExtension=e.dataelements.fileExtension,a.policy=e.dataelements.policy,a.collabSpace=e.dataelements.collabSpace,a.collabSpaceTitle=e.dataelements.collabSpaceTitle,a.organizationTitle=e.dataelements.organizationTitle,a.ownerFullname=e.dataelements.ownerFullname,a.fullName=t,a.synopsis=e.dataelements.synopsis,a.revision=e.dataelements.revision,a.stateNLS=e.dataelements.stateNLS,n[e.id]=a}));var i={};i.additionObjectInfo=n,t(i)}),a,!1)}else t(!0)}))},getObjectAdditionalInfo:function(e){var t=[];return new r((function(a,n){if(e&&e.data&&e.data.items){var i=e.data.items;if(UWA.is(i)&&UWA.is(i.length)&&i.length>0){for(var r=[],o=[],s=[],l=0;l<i.length;l++)if(i[l].objectId){var c=i[l].serviceId.toLowerCase();"3dspace"==c||c.includes("3dspace")?r.push(i[l].objectId):"3dswym"==c&&"pno:Person"==i[l].objectType&&(o.push(i[l].objectId.replace("iam:","")),s.push(i[l].displayName))}0!=r.length||0!=o.length?w.getAdditionObjectInfo(r).then((function(e){for(var n=0;n<r.length;n++){var i=e.additionObjectInfo[r[n]];t.push(i)}for(n=0;n<o.length;n++){(i={}).label=s[n],i.objectName=o[n],i.name=s[n],i.identifier=o[n],i.type="Person",i.pid=o[n],t.push(i)}a(t)}),(function(e){return console.log("Failed in getting person id"),n(e)})):C.error(h.CHG_GOV_FAILED_TO_GETID)}else console.log("Failed in getting search service response")}}))},enrichCollection:function(t,a,n){var i=this;return this.UpdateUnAccessibleObject(t),new r((function(o,s){var l=[],c=[],d={};if(UWA.is(a)?t.forEach((function(e){UWA.is(e.get(a))&&""!=e.get(a)&&e.get(a)!=e.get("id")?1==e.get("Access")&&(c.push(e.id),d[e.id]=e.get(a).replace("pid:",""),l.push(e.get(a).replace("pid:",""))):e.destroy()})):t.forEach((function(e){1==e.get("Access")&&(c.push(e.id),d[e.id]=e.id.replace("pid:",""),l.push(e.id.replace("pid:","")))})),l.length>0){var u=[],p=i.getAdditionObjectInfo(l);if(u.push(p),n){var f;f=i.getLatestRevisionFlag(l),u.push(f);var g;g=i.getFlowdownEnrichedInfo(t),u.push(g)}r.all(u).then((function(a){a.forEach((function(e){UWA.is(e)&&UWA.is(e.additionObjectInfo)&&c.forEach((function(i){n=d[i],UWA.is(e.additionObjectInfo[n])&&((a=t.get(i)).set("objectName",e.additionObjectInfo[n].objectName),""==e.additionObjectInfo[n].objectTitle?a.set("objectTitle",e.additionObjectInfo[n].objectName):a.set("objectTitle",e.additionObjectInfo[n].objectTitle),a.get("revision")&&a.set("IdentifierWithRevision",a.get("objectTitle")+a.get("revision")),a.set("icon",e.additionObjectInfo[n].icon),a.set("image",e.additionObjectInfo[n].image),a.set("fileExtension",e.additionObjectInfo[n].fileExtension),a.set("policy",e.additionObjectInfo[n].policy),a.set("collabSpace",e.additionObjectInfo[n].collabSpace),a.set("collabSpaceTitle",e.additionObjectInfo[n].collabSpaceTitle),a.set("organizationTitle",e.additionObjectInfo[n].organizationTitle),a.set("ownerFullname",e.additionObjectInfo[n].ownerFullname))}));if(UWA.is(e)&&UWA.is(e.versionInfo)){var a=null,n="",i=e.versionInfo;c.forEach((function(e){if(n=d[e],i[n]){a=t.get(e);var r=i[n];a&&a.set("isLastVersion",r)}}))}})),e.unmask(widget.body),o(t)}),(function(t){return console.log("failed from getting additional info"),e.unmask(widget.body),r.reject(t)}))}else e.unmask(widget.body),o(t)}))},UpdateUnAccessibleObject:function(e,t){if(!UWA.is(t))t="objectTitle";e.forEach((function(e){if(0==e.get("Access"))for(var a=e.pairs(),n=0;n<a.length;n++)"string"!=typeof a[n][1]||"Cannot be found"!=a[n][1]&&"Access denied"!=a[n][1]||a[n][0]!=t&&e.set(a[n][0],"",{silent:!0})}))},activateDeactiveTaggerProxies:function(e,t){var a=this.getTaggerObject(e);a&&a.activateTaggerProxy();var n=this.getTaggerObject(t);n&&n.deactivateTaggerProxy()},killTaggerProxies:function(e){var t=[];t=-1===e?[0,1,2,3,4,5]:[e];for(var a=0;a<t.length;a++){var n=t[a],i=this.getTaggerObject(n);if(i){i.taggerProxy.die();var r=i.viewName;delete this.taggerObject[r]}}},setTaggerObject:function(e,t){this.taggerObject[e]=t,t.activateTaggerProxy()},getTaggerObject:function(e){var t="",a=null;switch(e){case 0:t="Properties";break;case 1:t="Team";break;case 2:t="Proposed";break;case 3:t="Realized";break;case 4:t="Referential";break;case 5:t="Approval";break;case 6:t="Context";break;default:console.log("incorrect view selected")}return""!=t&&this.taggerObject&&(a=this.taggerObject[t]),a},filterInCurrentDashboard:function(e){var t=p.getGlobalVariable().mySkeleton,a=[];if(t){var n=t.getCollectionAt(0);null===this.summaryCloned&&(this.summaryCloned=new UWA.Class.Collection(n.toArray())),""===e&&(n.reset(),n.add(this.summaryCloned.toArray()));for(var i=n.toArray(),r=new UWA.Class.Collection(i),o=0;o<r.length;o++){var s=r.at(o);if(s){s.get("synopsis").indexOf(e)>=0&&a.push(s)}}var l=r.without(a);n.remove(l)}},_initDropDown:function(e,t){this.dropDown&&(this.dropDown.destroy(),this.dropDown=null),0===e.length&&e.push({text:h.ECM_CA_Command_NO_Action});var a={items:e,target:t,className:"CA_ConnectedObj_DropDown"};p.getGlobalVariable().isNative?this.dropDown=new o(a):this.dropDown=new s(a),this.dropDown&&this.dropDown.show()},checkTenantInforamation:function(e){var t=[];if(e){for(var a=e.data.items,n=[],i=[],r=0;r<a.length;r++)""===a[r].envId||void 0===a[r].envId||null===a[r].envId?n.push(a[r].displayName):a[r].envId!=p.getGlobalVariable().tenant&&i.push(a[r].displayName);t.TenantInfoMissing=n,t.DiffTenantData=i}return t},filterBasedOnServiceId:function(e){var t={};if(e){for(var a=e.data.items,n=[],i=[],r=0;r<a.length;r++)a[r].serviceId&&a[r].objectType?i.push(a[r]):n.push(a[r].displayName);e.data.items=i,t.dataJSON=e,t.incorrectServiceInfo=n}return t},sanitizeText:function(e){return e=e.trim(),UWA.is(e,"string")&&e.length>0?isNaN(parseFloat(e))?e=l.stripScripts(e):e:UWA.is(e,"number")?e:""},openRelationalExplorer:function(e){this.launchAppBasedOnAppId(e,"ENORIPE_AP")},openCompareApp:function(e){this.launchAppBasedOnAppId(e,"ENOCOMP_AP")},launchAppBasedOnAppId:function(e,t){var a=p.getGlobalVariable().getSecurityContext(),n=[];e.forEach((function(e){var t={envId:p.getGlobalVariable().tenant,serviceId:"3DSpace",contextId:a,objectId:e.replace("pid:","")};n.push(t)}));var i=widget.getValue("appId");i||(i="ENOWCHA_AP");var r={protocol:"3DXContent",version:"1.1",source:i,widgetId:widget.id,data:{items:n}},o=UWA.is(widget)&&widget.id?"caCompassSocket_"+widget.id:"caCcompassSocket";this._compass_socket||(this._compass_socket=new u.Socket(o),this._compass_socket.subscribeServer("com.ds.compass",p.getGlobalVariable().compassWindow)),this._compass_socket.dispatchEvent("onSetX3DContent",r,o);var s={appId:t};this._compass_socket.dispatchEvent("onLaunchApp",s,o)},launchTransientWidget:function(e,t,a){let n=[],i=[];t.forEach((function(e){let t={envId:p.getGlobalVariable().tenant,serviceId:"3DSpace",objectId:e};i.push(e),n.push(t)}));var r={X3DContentId:JSON.stringify({protocol:"3DXContent",source:widget.name,data:{items:n},inAppMode:!0,inAppOptions:{relationSet:"AutoModeProfile",localUID:e,selectedObjectIds:i}}),x3dPlatformId:p.getGlobalVariable().tenant};b.showWidget(a,"",r,{mode:"transient"})},getContentForCompassInteraction:function(e){var t=p.getGlobalVariable().getSecurityContext(),a=[];return e.forEach((function(e){var n={envId:widget.getValue("x3dPlatformId"),serviceId:"3DSpace",contextId:t,objectId:e.objectId,objectType:e.objectType,objectTaxonomies:e.objectTaxonomies,displayName:e.displayName,displayType:e.displayType,facetName:e.facetName?e.facetName:"",path:[{resourceid:e.objectId,type:e.objectType}]};a.push(n)})),{protocol:"3DXContent",version:"1.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:a}}},setSelectedItem:function(e){var t=!1;if(this.selectedItemsArr.forEach((function(a){a.phid!==e.selectedItem.objectId||(t=!0)})),!t){var a={phid:e.selectedItem.objectId,facetName:e.facetName};this.selectedItemsArr.push(a)}},getSelectedItem:function(e){var t={};return this.selectedItemsArr.forEach((function(a){a.facetName!==e||(t=a)})),t},getFacetName:function(e){var t="";if(!e)return t;var a=e.items;if(Array.isArray(a)&&a.length>0)for(var n=0;n<a.length;n++){var i=a[n];i&&(t=i.facetName?i.facetName:"")}return t},setCallbacksForOpenWith:function(e){var t=this;this.areCallbacksForOpenWithSet||(c.unsubscribe("setTypesCallback"),c.subscribe("setTypesCallback",(function(e){if(e.widgetId===window.widget.id){var a=t.getFacetName(e.data),n=t.buildDataForsetTypes(a),i=JSON.stringify(n),r={appId:e.appId,widgetId:e.widgetId,fileName:"-file",fileContent:i};c.publish("launchApp",r)}t.areCallbacksForOpenWithSet=!0}))),c.publish("setTypes",{widgetId:window.widget.id})},buildDataForsetTypes:function(e){var t=this.CurrModel,a={},n=this.getSelectedItem(e),i=[],r=(new Date).valueOf();i.push({id:""+r,phid:n.phid});var o=[{structure:[{id:""+r,show:!0,select:!0,children:[]}]}];if(UWA.is(t)&&t.get("userAccess")){var s=t.get("userAccess").WorkUnder,l={};if("true"===s)l={version:"1.0",AuthoringContextHeader:null,change:{id:t.get("id").replace("pid:",""),name:t.name,title:t.title,description:t.description,severity:t.severity,maturity:t.maturity}};a={version:"2.4",completionOnCAD:"yes",results:i,structures:o,viewpoint:[]},"true"===s&&(a.workUnder=l)}return a},getBlobObject:function(e,t){(0,n.authenticatedRequest)(e,{method:"GET",responseType:"blob",onload:t,onFailure:function(){},onComplete:function(){}})},downloadDocuments:function(e,t){var a=this,n={tenant:p.getGlobalVariable().tenant,securityContext:p.getGlobalVariable().getSecurityContext(),tenantUrl:p.getGlobalVariable().baseURL,autoDownload:!0,onFailure:function(e){t(e)},onComplete:function(t){UWA.is(t,"array")&&t.forEach((function(t){t.downloadUrl&&a.getBlobObject(t.downloadUrl,(function(){var a=this.response,n=e.length>1||void 0===t.fileName?"multiple_files.zip":t.fileName;if(window.navigator.msSaveOrOpenBlob){var i=this.getResponseHeader("content-type");window.navigator.msSaveOrOpenBlob(new Blob([a],{type:i}),n)}else{UWA.createElement("a",{href:window.URL.createObjectURL(a),download:n,type:"application/octet-stream"}).dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}console.log("download docuemnt sucess...!")}))}))}};e.length>1&&(n.asZip=!0),m.downloadDocuments(e,n)},getCollectionToFilter:function(){return this.collectionToFilter},getSummaryCloned:function(){return this.summaryCloned},setCurrModel:function(e){this.CurrModel=e},getCurrentModel:function(){return this.CurrModel},getUserFullNameMap:function(){return this.userFullNameMap},setUserFullNameMap:function(e){this.userFullNameMap=e},updateUserFullNameMap:function(e){this.setUserFullNameMap(e);var t=this.getUserFullNameMap();Object.keys(e).forEach((function(a){t[a]=e[a]}))},getUserFullNameFromIDs:function(e){var t=this,a={};return new r((function(n,i){var r=w.getUserFullNameMap(),o=[];e.forEach((function(e){r&&r[e]?a[e]=r[e]:o.push(e)})),o.length>0?t.getUserFullName(o).then((function(e){var i=e.userDisplayName.userInfo;t.updateUserFullNameMap(i),o.forEach((function(e){i&&i[e]?a[e]=i[e]:o.push(e)})),n(a)})):n(a)}))},openWith:function(e){var t=this;return new r((async function(a,n){var i=null;e.objectTaxonomies&&e.objectTaxonomies.length>0?await S.getTypesHierarchy({types:[e.objectType]}).then((t=>{e.objectTaxonomies=Array.from(new Set(e.objectTaxonomies.concat(t.types_hierarchies[0].hierarchy)))})):await S.getTypesHierarchy({types:[e.objectType]}).then((t=>{e.objectTaxonomies=Array.from(new Set([e.objectType].concat(t.types_hierarchies[0].hierarchy)))}));var r=[];r.push(e);var o=t.getContentForCompassInteraction(r),s=new v;s.set3DXContent(o);var l=[];UWA.is(s.retrieveCompatibleApps,"function")&&s.retrieveCompatibleApps((function(e){e.forEach((function(e){var t=e.icon?e.icon:e.fonticon;e.className&&1==e.className.contains("app-widget")?"Change Execution"==e.text?l.push({type:"PushItem",title:e.text,icon:{iconPath:t,className:"change-widget"},tooltip:h.CHG_Tooltip_Change_Execution_Widget,action:{callback:function(t){e.handler()}}}):l.push({type:"PushItem",title:e.text,icon:{iconPath:t,className:"change-widget"},action:{callback:function(t){e.handler()}}}):"Change Execution"==e.text?l.push({type:"PushItem",title:e.text,icon:t,tooltip:h.CHG_Tooltip_Change_Execution_Native,action:{callback:function(t){e.handler()}}}):l.push({type:"PushItem",title:e.text,icon:t,action:{callback:function(t){e.handler()}}})}));var t=p.getGlobalVariable();l.length>0&&t.isNative?"true"==t.CHG_OPENWITH&&(i={type:"PushItem",title:h.CHG_OpenWith_Menu,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-open-menu-dot"},submenu:l}):l.length>0&&(i={type:"PushItem",title:h.CHG_OpenWith_Menu,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-open-menu-dot"},submenu:l}),a(i)}))}))},getExploreMenu:function(e,t){return{type:"PushItem",title:h.ECM_CA_Command_Explore,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToVPMNavigator.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("Explore",e)}}}},getExploreWithMenu:function(e,t){var a=[];return a.push({type:"PushItem",title:h.ECM_CA_Command_ExploreSys,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_ExploreInRFLPNavigator.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("ExploreInRFLP",e)}}}),a.push({type:"PushItem",title:h.ECM_CA_Command_ExploreMfg,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToPPRNavigatorWithParent.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("ExploreInPPR",e)}}}),a.push({type:"PushItem",title:h.ECM_CA_Command_ExploreParents,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_GetParents.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("ExploreParents",e)}}}),a.push({type:"PushItem",title:h.ECM_CA_Command_ExploreMSB,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToPPRNavigatorWithParent.png"),action:{callback:function(){var e=t.instanceID?t.instanceID:t.objectID;g.DispatchEventToWin("ExploreInMSB",e)}}}),a.push({type:"PushItem",title:h.ECM_CA_Command_ExploreContext,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_FindInContext.png"),action:{callback:function(){var e=t.instanceID?t.instanceID:t.objectID;g.DispatchEventToWin("ExploreinContext",e)}}}),{type:"PushItem",title:h.ECM_CA_Command_ExploreWith,submenu:a}},getOpenMenu:function(e,t){return{type:"PushItem",title:h.ECM_CA_Command_Open,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenDB.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("Open",e)}}}},getOpenAdvMenu:function(e,t){return{type:"PushItem",title:h.ECM_CA_Command_OpenAdv,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenAdvDB.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("OpenAdv",e)}}}},getOpenROMenu:function(e,t){return{type:"PushItem",title:h.ECM_CA_Command_OpenRO,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenInReadOnly.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("OpenReadOnly",e)}}}},getOpenWithNativeMenu:function(e,t){return[{type:"PushItem",title:h.ECM_CA_Command_OpenAdv,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenAdvDB.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("OpenAdv",e)}}},{type:"PushItem",title:h.ECM_CA_Command_OpenRO,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenInReadOnly.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("OpenReadOnly",e)}}}]},getOpenCAMenu:function(e,t){return{type:"PushItem",title:h.ECM_CA_Command_OpenCA,icon:y.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenDB.png"),action:{callback:function(){var e=t.objectID;g.DispatchEventToWin("OpenCA",e)}}}},setLabelManagerView:function(e){w.labelManagerView=e},getLabelManagerView:function(){return w.labelManagerView},getAdditionSwymPersonInfo:function(e){return new r((function(t,a){if(e&&e.length>0){var n="/resources/v2/e6w/service/PersonSearchByName?searchStr="+(e=e.toString());d("DS/ENOChgServices/scripts/services/ChgInfraService").makeWSCall(n,"GET","enovia","application/json","",(function(e){var a,n=new Object;UWA.is(e)&&UWA.is(e.data)&&e.data.forEach((function(e){var t="";e.dataelements.firstname&&e.dataelements.lastname&&(t=e.dataelements.firstname+" "+e.dataelements.lastname),(a=new Object).pid=e.id,a.type=e.type,a.objectName=e.dataelements.name,a.fullName=t,n[e.dataelements.name]=a}));var i={};i.additionObjectInfo=n,t(i)}),a,!1)}else t(!0)}))}};return w})),define("DS/ENOChgServices/scripts/services/ChgDependencyServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e,t,a){"use strict";return{changeActionDependenciesLoaded:!1,changeActionDependencyModel:null,getDependUserAccess:function(e){return new Promise((function(a,n){var i="/resources/changedependencies/services/graph/access/"+e;t.makeWSCall(i,"GET","enovia","application/json","",(function(e){var t={};t.dependUserAccess=e,a(t)}),n,!1)}))},getCADependencies:function(e){return new Promise((function(a,n){var i="/resources/changedependencies/services/graph/"+e+"?depth=1";t.makeWSCall(i,"GET","enovia","application/json","",(function(e){a(e)}),n,!1)}))},addDependencyLink:function(e){var a=this;return new Promise((function(n,i){t.makeWSCall("/resources/changedependencies/services/create","PUT","enovia","application/json",e,(function(e){a.getDependencyOwnerFullName(e.elements).then((function(t){n(e)}))}),(function(e){i(e)}))}))},removeDependencyLink:function(e,a){return new Promise((function(e,n){var i="/resources/changedependencies/services/remove/"+a.options.linkid;t.makeWSCall(i,"PUT","enovia","application/json","",(function(t){e(t)}),(function(e){n(e)}))}))},syncDependency:function(e){return new Promise((function(a,n){var i=e.getSelectedNodes(),r=[];i&&Array.isArray(i)&&i.forEach((function(e){var t="";e&&(t=e.options.resourceid),""!=t&&r.push(t)}));var o={changeToSynchronize:r};t.makeWSCall("/resources/modeler/change/utils/synchronizeChanges","POST","enovia","application/json",JSON.stringify(o),(function(e){a(e)}),(function(e,t){t.errorMessage&&n(t.errorMessage)}))}))},getDependencyOwnerFullName:function(e){return new Promise((function(t,n){var i=[];e.forEach((function(e){var t=e.owner;i.push(t)})),a.getUserFullNameFromIDs(i).then((function(a){e.forEach((function(e){var t=e.owner;e.ownerFullName=a[t]?a[t].userDisplayName:""})),t(e)}))}))}}})),define("DS/ENOChgServices/scripts/services/ChgRealizedServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENORIPE_Relations/RelationsTabSettings","DS/ENORIPE_Relations/views/RelationsTab","DS/ENOFloatingPanel/ENOFloatingPanel","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","UWA/Utils/InterCom","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS"],(function(e,t,a,n,i,r,o,s,l,c,d,u,p,f,g){"use strict";var m={flowdownRealizedChanges:function(e){return new Promise((function(t,n){var i="/resources/v1/chguxservices/changeaction/"+e.target_ca_id+"/flowdownRealizedChanges";let r=JSON.stringify({data:[{origin_ca_id:e.origin_ca_id,target_ca_id:e.target_ca_id,realized_activity_id:e.realized_activity_id,proposedToAdd:e.proposedToAdd,proposedToRemove:e.proposedToRemove,resolutionToRemove:e.resolutionToRemove,fdStatus:e.fdStatus,cmd:e.cmd,where_id:e.where_id}]});a.makeWSCallWithCSRF(i,"PUT","enovia","application/json",r,(function(a){e.callback(a,e),t()}),(function(t){e.failureCallback&&e.failureCallback(t,e),n(t)}),!1)}))},loadRelationsTab:function(e){p.unsubscribe("DS/PADUtils/PADCommandProxy/select");var a=this,n=e.model.get("id"),i=new UWA.Class.Model({source:"3DSpace",tenant:t.getGlobalVariable().tenant,objectId:n,id:n}),r={getPlatformID:function(){return t.getGlobalVariable().tenant},getServiceID:function(){return"3DSpace"}};l.isAvailable(r,{isDraggable:!0,isProfilesVisible:!0,appID:"ENORIPE_ECM",isExternal:!0}).then((function(t){var n=e.model.get("objectInfo"),r=void 0===e.model.get("objectRevision")?"":e.model.get("objectRevision"),o=new d({animate:!0,autocenter:!0,closable:!0,limitParent:!1,overlay:!1,resizable:!0,visible:!0,header:"<h4>"+e.CHG_GOV_RELATIONAL_EXPLORER_HEADING+" - "+n+" "+r+"</h4>",footer:"<button type='button' class='btn btn-primary'>"+e.CHG_GOV_CLOSE+"</button> ",events:{onClose:function(){}}});o.getContent().getElements(".btn").forEach((function(e){e.addEvent("click",(function(){o.hide()}))}));var s=new UWA.createElement("div",{styles:{height:"500px",width:"500px"}});s.inject(o.elements.body),o.inject(widget.body).show(),a.facetRelationsModule=new c,a.facetRelationsModule.updateFacetExternal(i),a.facetRelationsModule.elements.container.inject(s),p.subscribe("DS/PADUtils/PADCommandProxy/select",(async function(t){if(widget&&t&&t.data){var a=t.data.paths;if(a&&Array.isArray(a)){var n=[];for(var i in a){var r=a[i],o=t.data.attrData;if(o)for(var s in o){var l=o[s];if(l.id===r[0]){var c={proposedId:l.id,proposedTitle:l.name,objName:l.name,proposedRevision:l.revision};n.push(c)}}}e.proposedToAdd=n.map((e=>e.proposedId)),await m.flowdownRealizedChanges(e)}}}))}))},onSearchCallbackForSelProposed:async function(e,t){e.proposedToAdd=t.map((e=>e[0])),await m.flowdownRealizedChanges(e)},onSearchCallbackForSelProposedNative:async function(e,t){var a=[];let n=t.split("~");for(var i=0;i<n.length;i++){var r=n[i].split(",");a.push(r[0])}e.proposedToAdd=a,await m.flowdownRealizedChanges(e)},launchSearchForSelectedProposed:function(e){if(t.getGlobalVariable().isNative){var a=this;s.DispatchEventToWin("Search_Flowdown_Proposed","SearchFlowdownProposed"),p.unsubscribe("FDDGV_ADD_PROPOSED_WITH_SEARCH_COMPLETE:"+(widget?widget.id:"")),p.subscribe("FDDGV_ADD_PROPOSED_WITH_SEARCH_COMPLETE:"+(widget?widget.id:""),(function(t){console.log("With Search Complete"),a.onSearchCallbackForSelProposedNative(e,t)}))}else{let a=o.activateSearch(t.getGlobalVariable().proposedSearchType,"multiple_proposed");o.search(e.NLS,t.getGlobalVariable().proposedSearchType,m.onSearchCallbackForSelProposed.bind(this,e),"multiple_proposed",a)}},addAsProposedForFlowdown:async function(e){await m.flowdownRealizedChanges(e)},getCARealizedFilterMapping:function(){return{ALL:1,DEFAULT:2,TRANSFERRED:8,IGNORED:4}},createCAAndTransferRealized:function(e,n,i,r){var s=o.getCurrentModel();n.originChangeActionId=s.id,n.receivingChangeAction=e,n=JSON.stringify(n);a.makeWSCall("/resources/modeler/change/transfer","PUT","enovia","application/json",n,(function(e){if(e&&"success"===e.status&&s){var a={};u.mask(widget.body);e={CADetails:e.receivingChangeAction,isSelect:"false"};p.publish("ca-create-grid-injection",e),a.onComplete=function(a){t.getGlobalVariable().arrOid=[],u.unmask(widget.body),i(e)},s.fetch(a)}}),(function(){u.unmask(widget.body)}))},flowDownToNewChangeAction:function(e,n,i,r){var s=o.getCurrentModel();n.originChangeActionId=s&&s.id?s.id:e.originChangeActionId?e.originChangeActionId:"",n.receivingChangeAction=e;var l=[];n.receivingChangeAction&&n.receivingChangeAction.synopsis&&l.push({name:"attribute_Synopsis",value:n.receivingChangeAction.synopsis}),n.receivingChangeAction&&n.receivingChangeAction.severity&&l.push({name:"attribute_Severity",value:n.receivingChangeAction.severity}),n.receivingChangeAction&&n.receivingChangeAction.scheduledCompletionDate&&l.push({name:"attribute_EstimatedCompletionDate",value:n.receivingChangeAction.scheduledCompletionDate}),n.receivingChangeAction&&(l.push({name:"current",value:"Prepare"}),l.push({name:"currentNLS",value:"Draft"}),l.push({name:"currentNLS",value:"Draft"}),l.push({name:"attribute_Originator",value:t.getGlobalVariable().contextUser})),n=JSON.stringify(n),u.mask(widget.body);a.makeWSCall("/resources/modeler/change/flowdown","PUT","enovia","application/json",n,(function(e){if(e&&e.changeaction){var a="";if(e.changeaction&&e.changeaction.name&&(e.changeaction.attributes=l,e.changeaction.name&&(a=e.changeaction.name)),s){var n={CADetails:e,isSelect:"false"};p.publish("ca-create-grid-injection",n);var r={onComplete:function(n){t.getGlobalVariable().arrOid=[],u.unmask(widget.body),e.caName=a,i(e)}};s.fetch(r)}else{n={CADetails:e,isSelect:"false"};p.publish("ca-create-grid-injection",n),t.getGlobalVariable().arrOid=[],u.unmask(widget.body),e.caName=a,i(e)}}}),(function(){u.unmask(widget.body)}))},transferRealized:function(e,n,i,r){var s=o.getCurrentModel();n.originChangeActionId=s.id,n.receivingChangeActionId=e.changeaction.id,n=JSON.stringify(n);a.makeWSCall("/resources/modeler/change/transfer","PUT","enovia","application/json",n,(function(e){if(s){var a={};u.mask(widget.body),a.onComplete=function(a){t.getGlobalVariable().arrOid=[],u.unmask(widget.body),i(e)},s.fetch(a)}}),(function(){u.unmask(widget.body)}))},flowDownToExistingChangeAction:function(e,n,i,r){var s=o.getCurrentModel();n.originChangeActionId=s&&s.id?s.id:e.originChangeActionId?e.originChangeActionId:"",n.receivingChangeActionId=e.id,n.originChangeActionId=e.originChangeActionId,n=JSON.stringify(n),u.mask(widget.body);a.makeWSCall("/resources/modeler/change/flowdown","PUT","enovia","application/json",n,(function(a){if(s){var n={onComplete:function(n){t.getGlobalVariable().arrOid=[],u.unmask(widget.body),a.caName=e.name,i(a)}};s.fetch(n)}else t.getGlobalVariable().arrOid=[],u.unmask(widget.body),a.caName=e.name,i(a)}),(function(){u.unmask(widget.body)}))},getCARealizedData:function(e,t){return new Promise((function(n,i){var r="/resources/modeler/change/changeaction/"+e+"?realized="+t+"&attributes=1&context=1";a.makeWSCall(r,"GET","enovia","application/json","",(function(e){n(e)}),i,!1)}))},getGroupCARealizedData:function(e){return new Promise((function(t,n){var i="/resources/modeler/change/group/"+e+"?realized=1";a.makeWSCall(i,"GET","enovia","application/json","",(function(e){t(e)}),n,!1)}))},enrichCollectionForRealized:function(e){return o.UpdateUnAccessibleObject(e),new Promise((function(t,a){var n=[],i={};e.forEach((function(e){if(1==e.get("Access")){var t=e.id.replace("pid:","");-1===n.indexOf(t)&&n.push(e.id.replace("pid:","")),i[e.id.replace("pid:","")]=e}e.get("activities").forEach((function(e,t){if(UWA.is(e.get("Afterobject"))&&UWA.is(e.get("Afterobject").id)&&1==e.get("Afterobject").Access){var a=e.get("Afterobject").id.replace("pid:","");-1===n.indexOf(a)&&(n.push(e.get("Afterobject").id.replace("pid:","")),i[e.id.replace("pid:","")]=e)}if(UWA.is(e.get("Beforeobject"))&&UWA.is(e.get("Beforeobject").id)&&1==e.get("Beforeobject").Access){a=e.get("Beforeobject").id.replace("pid:","");-1===n.indexOf(a)&&(n.push(e.get("Beforeobject").id.replace("pid:","")),i[e.id.replace("pid:","")]=e)}}))})),n.length>0?o.getAdditionObjectInfo(n).then((function(a){if(UWA.is(a)&&UWA.is(a.additionObjectInfo)){var n=a.additionObjectInfo,i=Object.keys(n);e.forEach((function(e){if(1==e.get("Access")){var t=e.id.replace("pid:",""),a=i.indexOf(t);if(a>-1){var r=n[i[a]];e.set("objectName",r.objectName),e.set("objectTitle",r.objectTitle),e.get("revision")&&e.set("IdentifierWithRevision",e.get("objectTitle")+e.get("revision")),e.set("icon",r.icon),e.set("policy",r.policy),e.set("collabSpace",r.collabSpace),e.set("ownerFullname",r.ownerFullname)}}e.get("activities").forEach((function(e,t){if(UWA.is(e.get("Afterobject"))&&e.get("Afterobject").id&&1==e.get("Afterobject").Access){var a=e.get("Afterobject").id.replace("pid:","");if((t=i.indexOf(a))>-1){var r=n[i[t]];e.get("Afterobject").name=r.objectName,e.get("Afterobject").title=r.objectTitle,e.get("Afterobject").icon=r.icon,e.get("Afterobject").collabSpace=r.collabSpace,e.get("Afterobject").ownerFullname=r.ownerFullname}}if(UWA.is(e.get("Beforeobject"))&&e.get("Beforeobject").id&&1==e.get("Beforeobject").Access){a=e.get("Beforeobject").id.replace("pid:","");if((t=i.indexOf(a))>-1){r=n[i[t]];e.get("Beforeobject").name=r.objectName,e.get("Beforeobject").title=r.objectTitle,e.get("Beforeobject").icon=r.icon,e.get("Beforeobject").collabSpace=r.collabSpace,e.get("Beforeobject").ownerFullname=r.ownerFullname}}}))}))}t(e)})):t(e)}))},getFlowdownCandidatesAndTheirStatus:function(e,t){return new Promise((function(n,i){if(e.length>0&&t.length>0){var r;r="/resources/modeler/change/changeaction/"+t+"?flowdown=1";a.makeWSCall(r,"GET","enovia","application/json",{},(function(e){n(e)}),(function(e){alert("flowdown status failed")}))}}))},ignoreChangeRealized:function(e,n,i){var r=o.getCurrentModel();""==e.originChangeActionId&&(e.originChangeActionId=r.id),e=JSON.stringify(e);a.makeWSCall("/resources/modeler/change/reject","POST","enovia","application/json",e,(function(e){if(r){var a={};u.mask(widget.body),a.onComplete=function(a){t.getGlobalVariable().arrOid=[],u.unmask(widget.body),n(e)},r.fetch(a)}}),(function(){u.unmask(widget.body)}))},setSelectedProposedPerRealizedObject:function(e){this.selectedproposedObjectsArr=[],this.selectedproposedObjectsArr=e},getSelectedProposedPerRealizedObject:function(){return this.selectedproposedObjectsArr}};return m})),define("DS/ENOChgServices/scripts/services/CACommonIgnore",["UWA/Core","DS/ENOChgServices/scripts/services/ChgRealizedServices","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/UIKIT/Mask","require"],(function(e,t,a,n,i,r,o){"use strict";return{ignoreNodes:function(e,a,o,s){var l=n.ECM_CA_Realized_Ignore_Change_Content+"<br><br>",c=[{label:n.ECM_CA_OK_Button_Label,handler:function(){a&&r.mask(a),t.ignoreChangeRealized(e,o,s),i.closeDialog()},className:"primary"},{label:n.ECM_CA_Cancel,handler:function(){i.closeDialog()},className:"default"}],d={title:n.ECM_CA_Realized_Ignore_Change,content:l,buttonArray:c};i.launchInfoDailog(d)}}}));