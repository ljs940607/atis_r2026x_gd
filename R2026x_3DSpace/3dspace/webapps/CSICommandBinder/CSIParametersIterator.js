define("DS/CSICommandBinder/CSIParametersIterator",["DS/CSICommandBinder/CSIValueType","DS/CSICommandBinder/CSIValueTypeAPI"],(function(t,r){"use strict";var e=function(t){t&&(this.keys_=Object.keys(t),this.currentKey=this.keys_.length>0?0:void 0)};e.prototype.next=function(){if(this.keys_&&this.currentKey<this.keys_.length){var t=++this.currentKey;return t===this.keys_.length&&(delete this.keys_,delete this.currentKey),t}},e.prototype.getName=function(){if(this.keys_&&this.currentKey<this.keys_.length)return this.keys_[this.currentKey]},e.prototype.equal=function(t){return this.currentKey===t.currentKey};var i=function(t,r,i){this.parameters_=t,this.it_=new e(r?void 0:t.propertyMap_),this.stringValueWithType_=i};i.prototype.next=function(){return this.parsedParameters_=void 0,this.it_.next()},i.prototype.equal=function(t){return this.parameters_===t.parameters_&&this.it_.equal(t.it_)},i.prototype.getName=function(){return this.it_.getName()},i.prototype.getType=function(){var t=this.it_.getName();if(void 0!==t)return r.readValueTypeAsString(this.parameters_.propertyMap_[t])},i.prototype.isObject=function(){var t=this.it_.getName();if(t)return r.isObject(this.parameters_.propertyMap_[t])},i.prototype.isObjectArray=function(){var t=this.it_.getName();if(t)return r.isObjectArray(this.parameters_.propertyMap_[t])};var a=function(t){if(t.isObject()){if(!t.parsedParameters_){var r=t.it_.getName();if(r){var e=new t.parameters_.__proto__.constructor;e.fromBinary(t.parameters_.propertyMap_[r])&&(t.parsedParameters_=e)}}return t.parsedParameters_}};i.prototype.objectBegin=function(){var t=a(this);if(t)return new i(t,!1,this.stringValueWithType_)},i.prototype.objectEnd=function(){var t=a(this);if(t)return new i(t,!0,this.stringValueWithType_)},i.prototype.getObjectArraySize=function(){var t=this.it_.getName();if(t)return r.getObjectArraySize(this.parameters_.propertyMap_[t])};var n=function(t){if(t.isObjectArray()){if(!(t.parsedParameters_ instanceof Array)){var e=t.it_.getName();if(e){var i=r.readParametersArrayBinaries(t.parameters_.propertyMap_[e]),a=[];if(i instanceof Array)for(var n=0;n<i.length;++n){var s=new t.parameters_.__proto__.constructor;s.fromBinary(i[n])&&(a[n]=s)}t.parsedParameters_=a}}return t.parsedParameters_}};i.prototype.objectArrayBegin=function(t){var r=n(this);if(r instanceof Array&&t<r.length&&r[t])return new i(r[t],!1,this.stringValueWithType_)},i.prototype.objectArrayEnd=function(t){var r=n(this);if(r instanceof Array&&t<r.length&&r[t])return new i(r[t],!0,this.stringValueWithType_)};var s=function(t,e,i){if(t.isObject()){var s=a(t);if(s)return e?s[e](i):s}else if(t.isObjectArray()){var o=n(t);if(o instanceof Array){for(var p=[],u=0;u<o.length;u++)if(e)if("toTypedObject"===e){var f={};f.type=o[u].typeName_,f.value=o[u][e](),p.push(f)}else p.push(o[u][e]());else p.push(o[u]());return p}}var y=t.it_.getName();if(y)return r.readValue(t.parameters_.propertyMap_[y],i)};return i.prototype.getTypedValue=function(r){var e=s(this,"toTypedObject",r);if(e instanceof ArrayBuffer)return t.stringifyBufferFromBinary(e);if(void 0!==e.length&&e[0]instanceof ArrayBuffer){for(var i="[",a=0;a<e.length;++a){if(!(e[a]instanceof ArrayBuffer))return"Error: Unable to convert a buffers array to string";i+=t.stringifyBufferFromBinary(e[a]),a+1<e.length&&(i+=",")}return i+="]"}return e},i.prototype.getJSValue=function(){return s(this,"toJSObject")},i.prototype.getStringValue=function(){var r=s(this,"toTypedObject");if(r){if(r instanceof ArrayBuffer)return'"'+t.stringifyBufferFromBinary(r)+'"';var e=this.getType();return"string"===e?'"'+r+'"':"string[]"===e?JSON.stringify(r):this.parameters_.__stringifyWithBigIntSupport(r)}},i}));