define("DS/TopFrame/LocalStorageManager",[],(function(){"use strict";var e="TopFrame-",t="lastLoadedxAppContentTopMenu";return{getLastLoadedxAppContentTopMenu:function(){return function(t){var n;try{n=window.localStorage.getItem(e+t)}catch(e){console.error("Fail to get item from key: "+t)}return n}(t)||""},setLastLoadedxAppContentTopMenu:function(n){!function(t,n){try{window.localStorage.setItem(e+t,n)}catch(e){console.error("Fail to set item for key: "+t,n)}}(t,n)}}})),define("DS/TopFrame/Utils",["UWA/Core","UWA/Utils"],(function(e,t){"use strict";var n,a;return n=Array.prototype,a=function(){function e(e){if(null==e)throw new TypeError("assign cannot be called with null or undefined");return Object(e)}return Object.assign?Object.assign:function(t){var n,a,i,o,s,r=e(t);if(1===arguments.length)return r;for(n=1;n<arguments.length;n++)if(null!=(a=arguments[n]))for(i=e(a),o=Object.keys(i),s=0;s<o.length;s++)r[o[s]]=i[o[s]];return r}}(),{debounce:function(e,t,n,a){var i,o,s,r;function l(){var c=(new Date).getTime()-s;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(r=e.apply(a,o),i||(a=o=null)))}return function(){a=a||this,o=arguments,s=(new Date).getTime();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(r=e.apply(a,o),a=o=null),r}},pick:function(t){var i,o,s;return o={},s=e.is,i=a.apply(null,n.concat.apply(n,n.slice.call(arguments,1)).map((function(e){var t;return s(e,"string")?(t={})[e]=e:s(e,"plain")&&(t=e),t}))),Object.keys(i).forEach((function(e){var n,a;e in t&&null!=(n=t[e])&&""!==n&&(a=i[e],s(a,"string")&&(o[a]=t[e]))})),o},resolve:function(t,n,a){var i=t;return!1!==n.every((function(t){var n=e.is(i);return n&&(i=i[t]),n}))&&void 0!==i||(i=a),i},always:function(e){return function(){return e}},getCurrentLanguage:function(){return require("i18n").getLocale()},getTopDomain:function(){var e,t=window.location.hostname,n="";if(!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(t)&&"localhost"!==t){for(e=t.split(".");e.length>2;)e.shift();n=e.join(".")}return n},setCookieStore:function(e,t,n,a,i){var o=e+"="+t,s=new Date(n);a&&(o+="; domain="+a),o+="; path=/",n&&(o+="; expires="+s.toGMTString()),i&&(o+="; Priority=High"),document.cookie=o},setProductionUpgradeCookie:function(e){var n=window.location.hostname.split(".").slice(1).join(".");this.setCookieStore("UPGRADE_INFO",t.base64Encode(JSON.stringify(e)),(new Date).getTime()+3456e7,n,!0)},isSeenBefore:function(e,t,n){return Math.abs(t-e)/864e5>=n},formatDate:function(e){var t=new Date(e).toLocaleDateString(this.getCurrentLanguage(),{year:"numeric",month:"2-digit",day:"2-digit"}).split("/");return[t[2],t[0],t[1]].join("-")},buildPath:function(){var e=[],t=arguments.length-1;return Array.prototype.forEach.call(arguments,(function(n,a){n&&(n+="",0!==a&&(n=n.replace(/^\//,"")),a!==t&&(n=n.replace(/\/$/,"")),e.push(n))})),e.join("/")}}})),define("DS/TopFrame/CompassAPI",["DS/i3DXCompass/i3DXCompass"],(function(e){"use strict";return{appIds:{notification:"X3DNTFC_AP",messaging:"X3DIMSG_AP",partSupply:"X3DPSLY_AP",partSupplyEPA:"X3DPSCM_AP",partSupplyEPU:"X3DPSCR_AP",swym:"X3DWNEW_AP",x3PDrive:"X3PDRIV_AP",x3DSearch:"X3DSEAR_AP",advancedFilter:"ENOREFS_AP",x3DSpace:"X3DCSMA_AP",bookmarkEditor:"ENOFOL4_AP",scientificSI:"BIOSSI_AP",a2xShadow:"X3DA2X_AP",solidworksLearnApp:"SWXLERN_AP",enovTasks:"ENOTASK_AP"},getAppInfo:function(t){return new Promise((function(n,a){var i=t.appId;if(!i)return a("Missing appId.");require([["DS","UWPClientCode","PublicAPI"].join("/")],(function(t){const o=t.getSandboxPlatformId();e.getAppInfo({appId:i,x3dPlatformId:o,onComplete:function(e){e?n(e):a("No app info for: "+i)}})}))}))}}})),define("DS/TopFrame/Views/Message",["UWA/Element","UWA/Class/View"],(function(e,t){"use strict";var n=t.extend({className:"topframe-message-view",tagName:"div",_title:"",_content:"",_icon:"",setup:function(e){e=e||{};var t=this;t._title=e.title||"",t._content=e.content||"",t._icon=e.icon||""},destroy:function(){this._parent.apply(this,arguments)},render:function(t){t=t||{};var n,a,i,o=this,s=o.container,r=o.elements;return t.className&&s.addClassName(t.className),n=r.title=new e("div",{class:"tf-msgview-title"}),a=r.content=new e("div",{class:"tf-msgview-content"}),i=r.icon=new e("div",{class:["tf-msgview-icon","fonticon"].join([" "])}),s.addContent([n,a,i]),o.setTitle(o._title).setContent(o._content).setIcon(o._icon),o},setTitle:function(e){e=e||"";var t=this;return t._title=e,t.elements.title.setText(e),t.toggleDisplay({title:!!e}),t},setContent:function(e){e=e||"";var t=this;return t._content=e,t.elements.content.setText(e),t.toggleDisplay({content:!!e}),t},setIcon:function(e){e=e||"";var t=this,n=t.elements.icon,a=t._icon;return t._icon=e,n.removeClassName(a),n.addClassName(e),t.toggleDisplay({icon:!!e}),t},toggleDisplay:function(e){var t=this;return Object.keys(e).forEach((function(n){var a=t.elements[n],i=e[n];a&&a.toggleClassName("tf-msgview-hide","boolean"==typeof i?!i:void 0)})),t}});return n})),define("DS/TopFrame/FrameUsageTracker",["UWA/Core","DS/Usage/TrackerAPI"],(function(e,t){"use strict";var n={dashboard:{tenantSwitch:"dashboard.tenantSwitch"}};return{track:function(a){a.options=a.options||{},a.options.appID=a.appId||"X3DDASH_AP",a.options.tenant=a.platformId,a.options.persVal=a.persVal,t.trackPageEvent((t=>{var a,i,o=n,s=(t||"").split(".").filter((function(e){return!!e})),r=s.length;for(a=0;a<r;a++){if(i=s[a],!e.is(o,"object")||!(i in o)){o=null;break}o=o[i]}return e.is(o,"string")||(o="",e.log('Tracker Id: "'+t+'", does not exist !')),o||t})(a.category),a.action,a.label,a.value,a.persDim,a.options)}}})),define("DS/TopFrame/Frame",["UWA/Core","UWA/Element","UWA/Class/Promise","UWA/Controls/Abstract","DS/UIKIT/Tooltip","DS/TopFrame/Utils","DS/MessageBus/MessageBus","i18n!DS/TopFrame/assets/nls/topFrame"],(function(e,t,n,a,i,o,s,r){"use strict";var l="main",c="left",p="right",d="open",u="close",m="minimized",g="maximized",h="floating",f="fitted",P="closed",_="doublePanelMode",v="maximized",b="fitted",S="pushed",w="left",A="right",T="shown",C=dsDashboardWindow.top.location.href,I=(C&&C.contains("fullscreenExperience:")&&(C.contains("?hl")||C.contains("&hl")),dsDashboardWindow.top.location&&dsDashboardWindow.top.location.search.contains("platformNav"));function y(e){e&&Array.prototype.slice.call(arguments,1).forEach((function(t){t&&e.removeClassName(t)}))}var D=a.extend({name:"frame",MAIN_PANEL:l,LEFT_PANEL:c,RIGHT_PANEL:p,OPEN_PANEL_ACTION:d,CLOSE_PANEL_ACTION:u,_UI_BREAKS:{SMALL:639,MEDIUM:1104,LARGE:1920},_content:null,_shownAllTags:null,_shownTags:null,_panelMode:_,_panels:null,_panelsDefault:{main:{marginLeft:0,marginRight:0,pushedLeft:!1,pushedRight:!1},left:{opened:!1,state:P,width:NaN,left:NaN,forceSmallScreenPanelMode:!1},right:{opened:!1,state:P,width:NaN,left:NaN,forceSmallScreenPanelMode:!1}},_ctnSize:null,defaultOptions:{mode:_,moveMainPanelOnPanelMove:{left:!0,right:!0},animateMainPanelOnPanelMove:{left:!0,right:!0},useWindowResize:!0,smallScreenPanelPriority:p},init:function(n,a){if(a||(a={}),!n)throw new Error("Missing content map.");a.renderTo=a.renderTo||document.body;var i=this;i._parent(a),a=i.options,i._shownAllTags={left:null,right:null},i._shownTags={left:null,right:null},i._panels=e.clone(i._panelsDefault),i.elements=i._build(),i._content=i._buildContent(n,i.elements),i._onResize=o.debounce(i._onResize.bind(i),400),t.inject.call(i.elements.container,a.renderTo),i.elements.container=a.renderTo,i.TOPBAR_HEIGHT=C&&C.contains("fullscreenExperience:")&&(C.contains("?hl")||C.contains("&hl"))?0:i.isStagingEnv&&i.isStagingBannerShown?79:44,i._initEvents()},_onResize:function(){var e,t,n,a,i,o=this,s=o._ctnSize||o._getContainerSize();if(o._ctnSize=null,(e=o._getContainerSize()).width!==s.width)if(t=o.isPanelOpen(c),n=o.isPanelOpen(p),i={animate:!1,force:!0},o._isSmallScreen(e.width))(t||n)&&(a=t&&n?o.options.smallScreenPanelPriority:t?c:p,o._doPanelAction(d,a,Object.assign({},i,{forceSmallScreenPanelMode:o.getPanel(a).forceSmallScreenPanelMode})));else{var r,l,u=t&&o.isPanelFitted(c),m=n&&o.isPanelFitted(p);t&&(r={action:d,panel:c,opts:Object.assign({},i,{maximize:o.isPanelMaximized(c),fit:o.isPanelFitted(c),preventPushMainPanel:m,forceSmallScreenPanelMode:o.getPanel(c).forceSmallScreenPanelMode})}),n&&(l={action:d,panel:p,opts:Object.assign({},i,{maximize:o.isPanelMaximized(p),fit:o.isPanelFitted(p),preventPushMainPanel:u,forceSmallScreenPanelMode:o.getPanel(p).forceSmallScreenPanelMode})}),(u?[l,r]:[r,l]).filter((function(e){return e})).forEach((function(e){o._doPanelAction(e.action,e.panel,e.opts)}))}},_build:function(){var t,n,a,o,s,l,d,u,m,g,h,f="div",P=this,_={},v=e.createElement;return _.container=t=document.createDocumentFragment(),_.leftPanel=v(f,{class:"column left"+(I?" platform-navigation":"")}).inject(t),_.main=v(f,{class:"main"+(I?" platform-navigation":"")}).inject(t),_.rightPanel=v(f,{class:"column right"}).inject(t),_.leftPanelCtn=a=v(f,{class:"column-ctn"}).inject(_.leftPanel),_.rightPanelCtn=n=v(f,{class:"column-ctn"}).inject(_.rightPanel),o=v(f,{class:"right-panel-actions column-actions",html:[]}).inject(n),s=v(f,{class:"left-panel-actions column-actions",html:[]}).inject(a),_.maximizeRightPanelBtn=l=v(f,{class:"panel-action maximize-action fonticon fonticon-resize-full column-action fit",events:{click:function(){P.openPanel(p,{maximize:!0})}}}).inject(o),_.minimizeRightPanelBtn=d=v(f,{class:"panel-action minimize-action fonticon fonticon-resize-small column-action minimize",events:{click:function(){P.openPanel(p,{minimize:!0})}}}).inject(o),_.maximizeLeftPanelBtn=h=v(f,{class:"panel-action maximize-action fonticon fonticon-resize-full column-action fit hide",events:{click:function(){P.openPanel(c,{maximize:!0})}}}).inject(s),_.minimizeLeftPanelBtn=g=v(f,{class:"panel-action minimize-action fonticon fonticon-resize-small column-action minimize",events:{click:function(){P.openPanel(c,{minimize:!0})}}}).inject(s),_.closeRightPanelBtn=u=v(f,{class:"panel-action close-action fonticon fonticon-cancel column-action close",events:{click:function(){P.closePanel(p,{xAppTag:P.getShownTag(p)})}}}).inject(o),_.closeLeftPanelBtn=m=v(f,{class:"panel-action close-action fonticon fonticon-cancel column-action close hide",events:{click:function(){P.closePanel(c)}}}).inject(s),new i({position:"bottom",target:l,body:r.actionMaximize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new i({position:"bottom",target:d,body:r.actionMinimize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new i({position:"bottom",target:h,body:r.actionMaximize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new i({position:"bottom",target:g,body:r.actionMinimize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new i({position:"bottom right",target:u,body:r.actionClose,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new i({position:"bottom right",target:m,body:r.actionClose,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),_},_getPanelEl:function(e){var t,n=this.elements;return e===c?t=n.leftPanel:e===p?t=n.rightPanel:e===l&&(t=n.main),t},_getPanelCtnEl:function(e){var t,n=this.elements;return e===c?t=n.leftPanelCtn:e===p&&(t=n.rightPanelCtn),t},_isSinglePanelMode:function(){return"singlePanelMode"===this.options.mode},_isSmallScreen:function(e){return(e="number"==typeof e?e:this._getContainerSize().width)<=this._UI_BREAKS.SMALL},_buildContent:function(n,a){var i=Object.create(null);function o(e,n){var a=Object.create(null),i=document.createDocumentFragment();for(var o in e)e.hasOwnProperty(o)&&(a[o]=s(e[o]),t.grab.call(i,a[o]));return n.grab(i),a}function s(n){var a=document.createDocumentFragment();return e.is(n,"element")?n:t.setContent.call(a,n)}return n.left&&(i.left=o(n.left,a.leftPanelCtn)),n.right&&(i.right=o(n.right,a.rightPanelCtn)),n.main&&(i.main=o(n.main,a.main)),i},extendPanelContent:function(e,t,n){var a,i={},o={},s=e===c?"leftPanelCtn":"rightPanelCtn";i[e]={},i[e][t]=n,o[s]=this.elements[s],a=this._buildContent(i,o),Object.assign(this._content[e],a[e])},_doPanelAction:function(e,t,a){a||(a={});var i,o,s="hide",r="show",l=this,m=l._isSmallScreen(),g=e===d,h=e===u,f=t===c,P=!!a.force,_=!!a.maximize,v=!!a.fit,b=!!a.float,S=!!a.minimize,w="boolean"!=typeof a.animate||a.animate,A=!!a.forceSmallScreenPanelMode,T=a.closeOppositePanel||l._isSinglePanelMode()||m,C=!!a.preventPushMainPanel,I=f?p:c,y=l.isPanelOpen(c),D=l.isPanelFloating(c),E=l.isPanelOpen(p),M=f?y:E,x=I===c?y:E,U=!1,N=!1,L={},O=n.resolve(),k=[];if(!P){if(h&&!M)return O;if(g&&M&&!D&&(_&&l.isPanelMaximized(t)||S&&l.isPanelMinimized(t)||!_&&!S))return O}return L={maximize:!1,fit:!1,preventPushMainPanel:C,animate:w,isSmallScreen:m,float:a.float,useSmallScreenPanelMode:A||m},x&&(U=l.isPanelMaximized(I),N=l.isPanelFitted(I)),l.getPanel(t).forceSmallScreenPanelMode=A,i=(k=(k=g?(o=Object.assign({},L,{maximize:_,fit:v}),A?(o.maximize=!1,o.fit=!1,T=!0):_&&x&&!T&&(o.maximize=!1,o.fit=!0),[x&&T&&{action:s,panel:I,opts:L},_&&N&&!T&&{action:r,panel:I,opts:Object.assign({},L,{minimize:!0})},{action:r,panel:t,opts:o},U&&!T&&{action:r,panel:I,opts:Object.assign({},L,{fit:!0})}]):[{action:s,panel:t,opts:Object.assign({},{float:b})},N&&{action:r,panel:I,opts:Object.assign({},L,{maximize:!0})}]).filter((function(e){return e}))).some((function(e){var t=e.opts||{};return e.action===r&&(t.fit||t.maximize||t.useSmallScreenPanelMode)})),i&&k.forEach((function(e){e.opts=e.opts||{},e.opts.preventPushMainPanel=!0})),n.all(k.map((function(e){var t=e.panel,n=e.opts;return e.action===s?l._hidePanel(t,n):l._showPanel(t,n)})))},_movePanel:function(e,t,a){a||(a={});var i,o,r,u,_,v,b,S,w=this,A=w.options,T=!!a.maximize,C=!!a.fit,y=!!a.float,D=!!a.preventPushMainPanel,E="boolean"!=typeof a.animate||a.animate,M="boolean"==typeof a.isSmallScreen?a.isSmallScreen:w._isSmallScreen(),x=a.useSmallScreenPanelMode||M,U=!D&&A.moveMainPanelOnPanelMove[t],N=w._getContainerSize().width,L=w.elements.main,O=e===d,k=t===c,F=k?p:c,R=w._getPanelEl(t),j=w._getPanelCtnEl(t),B=w.getPanel(t),z=w.getPanel(l),V=w.getPanel(F),W=!Number.isNaN(B.left),X=W?B.left:void 0,G={top:w.TOPBAR_HEIGHT,"z-index":"",height:"calc(100% - "+w.TOPBAR_HEIGHT+"px)",border:""};function H(e){return"translateX("+e+"px)"}function q(e){return"dashboardMenuCtn"===w._shownTags.left&&I}return x?(v={animate:!1,useAnimationFrame:!1},b={animate:E,useAnimationFrame:E},S={animate:!1,useAnimationFrame:!1},o={left:"",top:0,"z-index":"60",height:"100%",border:"none"},r={transform:O?H(0):""},u={left:O?0:"",transform:O?"none":"","z-index":O?"60":""},B.opened=O,B.state=O?m:P,B.width=O?N:NaN,B.left=O?0:NaN,U&&(_={marginLeft:"",marginRight:""},z.pushedLeft=!1,z.marginLeft=0,z.pushedRight=!1,z.marginRight=0),i={preStart:[{el:R,styles:o,opts:v},{el:j,styles:{display:"flex"},opts:v},{el:L,styles:_,opts:v}],start:[{el:R,styles:r,opts:b}],end:[{el:R,styles:u,opts:S},{el:j,styles:{width:"100%",display:O?"flex":"none"},opts:S}]},w._isSmallScreenPanelMode=!0):(i=T||C?function(){var e,t,n,a,i,o={animate:!1,useAnimationFrame:!1},s={animate:E,useAnimationFrame:E},r={animate:!1,useAnimationFrame:!1};return e=Object.assign({},G,{left:"",transform:W?H(X):"",border:"none"}),t={},n={transform:"none"},T?(a=0,i=N):C&&(a=V.width,a*=k?-1:1,i=Math.floor(N-V.width)),t.transform=H(a),n.left=a+"px",B.opened=!0,B.state=T?g:f,B.width=i,B.left=a,{preStart:[{el:R,styles:e,opts:o},{el:j,styles:{display:"flex"},opts:o}],start:[{el:R,styles:t,opts:s}],end:[{el:R,styles:n,opts:r},{el:j,styles:{width:T?"100%":i,display:"flex"},opts:r}]}}():y?function(){var e,t,n,a,i=Math.round(.125*N+240),o=N>=w._UI_BREAKS.LARGE?480:Math.min(i,480),s=(N-o)*(k?-1:1),r={animate:!1,useAnimationFrame:!1},l={animate:E,useAnimationFrame:E},c={animate:!1,useAnimationFrame:!1};return q()&&(o-=80),e=Object.assign({},G,{left:"",transform:W?H(X):""}),t={},a={},n={transform:O?"none":""},O?(k?e["border-right-width"]="1px":e["border-left-width"]="1px",t.transform=H(s),n.left=s+"px",n.transform="none",n.boxShadow="0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 8px 10px -6px rgba(0, 0, 0, 0.3)"):(k&&(t.transform="translateX(-100%)",z.pushedLeft&&(a.marginLeft="",z.pushedLeft=!1,z.marginLeft=0)),n.left="",n.boxShadow="none"),B.opened=O,B.state=O?h:P,B.width=O?o:NaN,B.left=O?s:NaN,{preStart:[{el:R,styles:e,opts:r},{el:j,styles:{display:"flex"},opts:r}],start:[{el:R,styles:t,opts:l}],end:[{el:R,styles:n,opts:c},{el:L,styles:a,opts:c},{el:j,styles:{width:o,display:O?"flex":"none"},opts:c}]}}():function(){var e,n,a,i,o,s=Math.round(.125*N+240),r=N>=w._UI_BREAKS.LARGE?480:Math.min(s,480),l=(N-r)*(k?-1:1),d={animate:!1,useAnimationFrame:!1},u={animate:E,useAnimationFrame:E},g={animate:!1,useAnimationFrame:!1},h=E&&A.animateMainPanelOnPanelMove[t];return q()&&(r-=80),e=Object.assign({},G,{left:"",transform:W?H(X):""}),n={},a={transform:O?"none":""},O?(k?e["border-right-width"]="1px":e["border-left-width"]="1px",n.transform=H(l),a.left=l+"px",a.transform="none",a.boxShadow="none"):(n.transform=k?"translateX(-100%)":"translateX(100%)",a.left=""),B.opened=O,B.state=O?m:P,B.width=O?r:NaN,B.left=O?l:NaN,function(){function e(){i.transform=H(r-z.marginLeft),o.marginLeft=q()?r+80:r,z.pushedLeft=!0,z.marginLeft=q()?r+80:r}function t(){i.transform=H(r-z.marginRight),o.marginRight=r,z.pushedRight=!0,z.marginRight=r}function n(){i.transform=H(-z.marginLeft),o.marginLeft="",z.pushedLeft=!1,z.marginLeft=0}function a(){i.transform=H(z.marginRight),o.marginRight="",z.pushedRight=!1,z.marginRight=0}i={},o={},U&&(O?k?e():t():k?n():a(),!w.isPanelOpen(c)&&z.pushedLeft&&n(),!w.isPanelOpen(p)&&z.pushedRight&&a(),w.isPanelOpen(c)&&!z.pushedLeft&&e(),w.isPanelOpen(p)&&!z.pushedRight&&t(),h||(i.transform=""),o.transform="")}(),{preStart:[{el:R,styles:e,opts:d},{el:j,styles:{display:"flex"},opts:d}],start:[{el:R,styles:n,opts:u},{el:L,styles:i,opts:u}],end:[{el:R,styles:a,opts:g},{el:L,styles:o,opts:g},{el:j,styles:{width:r,display:O?"flex":"none"},opts:g}]}}(),w._isSmallScreenPanelMode=!1),O&&s.publish({channel:"LEFT_PANEL_CHANGED",topic:"onPanelOpen",data:{panelInfo:a}}),function(e){function t(e){return w._setElementStyles(e.el,e.styles,e.opts)}return n.all((e.preStart||[]).map(t)).then((function(){return n.all((e.start||[]).map(t))})).then((function(){return n.all((e.end||[]).map(t))}))}(i)},_onMovePanelEnd:function(e,t){var n,a,i,o=this,s=e===d,r=t===c?p:c,u=o._shownTags[t];function m(e){var t,n=o._getPanelEl(e);y(n,T,v,b),o.isPanelOpen(e)&&(t=o.getPanelState(e),n.addClassName(T),t===g?n.addClassName(v):n.removeClassName(v),t===f?n.addClassName(b):n.removeClassName(b))}o.elements.container.toggleClassName("tf-smallscreen-panel-mode",o._isSmallScreenPanelMode),n={name:s?"onPanelOpen":"onPanelClose",data:{panel:t,tag:u,position:o.getPanelState(t)}},m(t),m(r),a=o._getPanelEl(l),i=o.getPanel(l),y(a,S,w,A),i.pushedLeft&&a.addClassName(S).addClassName(A),i.pushedRight&&a.addClassName(S).addClassName(w),setTimeout((function(){o.dispatchEvent(n.name,n.data)}))},_getContainerSize:function(){var e=this;return e._ctnSize||(e._ctnSize=t.getSize.call(e.elements.container)),e._ctnSize},_showPanel:function(e,t){var n=this;return n._movePanel(d,e,t).then((function(){return n._onMovePanelEnd(d,e,t)}))},_hidePanel:function(e,t){var n=this;return n._movePanel(u,e,t).then((function(){return n._onMovePanelEnd(u,e,t)}))},_setElementStyles:function(a,i,o){return o=e.extend({useAnimationFrame:!0,animate:!0},o||{}),a&&i?new n((function(n){function s(){var s;e.is(i.transform)&&o.animate?(i.transitionProperty=Object.keys(i).join(", "),i.transitionDuration="300ms",s=setTimeout(n,o.animDuration||400),function(e,n,a){t.addEvent.call(e,n,(function(i){t.removeEvent.call(e,n),a(i)}))}(a,"transitionEnd",(function(){clearTimeout(s),a.setStyle("transitionDuration",""),a.setStyle("transitionProperty",""),n()})),a.setStyles(i)):(a.setStyle("transitionDuration",""),a.setStyle("transitionProperty",""),a.setStyles(i),n())}window.requestAnimationFrame&&o.useAnimationFrame?window.requestAnimationFrame(s):s()})):n.resolve()},_initEvents:function(){var e=this;require([["DS","PubSub","PubSub"].join("/")],(t=>{t.add("panel:resize",(()=>{(e.isPanelMaximized(c)||e.isPanelFitted(c))&&e.closePanel(c),(e.isPanelMaximized(p)||e.isPanelFitted(p))&&e.closePanel(p)}))})),e.options.useWindowResize?window.onresize=e._onResize.bind(e):t.addEvent.call(e.elements.container,"resize",e._onResize.bind(e))},getPanel:function(e){return this._panels[e]},getPanelState:function(e){return this.getPanel(e).state},isPanelOpen:function(e){return this.getPanel(e).opened},isPanelFitted:function(e){return this.getPanelState(e)===f},isPanelMaximized:function(e){return this.getPanelState(e)===g},isPanelFloating:function(e){return this.getPanelState(e)===h},isPanelMinimized:function(e){return this.getPanelState(e)===m},openPanel:function(e,t){var n=(t=t||{}).xAppTag,a=t.xAppData;if(e.toLowerCase()===p){var i=t.maximize;window.dsDashboardWindow&&window.dsDashboardWindow.top.require&&window.dsDashboardWindow.top.require(["DS/UWPClientCode/PublicAPI"],(function(e){e.setDashboardRightPanelVisibility({show:!0,isMaximized:i,xAppTagToShow:n,xAppDataToShow:a,platformId:window.dsTenantId})}))}return this._doPanelAction(d,e,t)},closePanel:function(e,t){var n=(t=t||{}).xAppTag;return e.toLowerCase()===p&&window.dsDashboardWindow&&window.dsDashboardWindow.top.require&&window.dsDashboardWindow.top.require(["DS/UWPClientCode/PublicAPI"],(function(e){e.setDashboardRightPanelVisibility({show:!1,xAppTagToShow:n,platformId:window.dsTenantId})})),this._doPanelAction(u,e,t)},showPanelContent:function(e,t){var n=this,a=n._content[e];if(a){var i,o,s,r,l=n.getShownTag(e),p=l!==t,d=["loading","error"].includes(t);if(n._shownAllTags[e]=t,l!==t){for(s in o=l&&p&&!d,i=p&&!d,d||(n._shownTags[e]=t),o&&setTimeout((function(){n.dispatchEvent("onPanelHide",{panel:e,tag:l})})),n._content[e])a[s].hide();a[t]?(a[t].show(),n._shownTags[e]=t):(a[s].show(),n._shownTags[e]=s),e===c&&(n.activateLeftPanelActions(n),n.subscribeToDataFilter(n),I&&n._showPanel(c)),i&&(r=n.getPanelState(e),setTimeout((function(){n.dispatchEvent("onPanelChange",{panel:e,tag:t,position:r})})))}}},activateLeftPanelActions:e=>{if(!e)return;const t=e.elements.maximizeLeftPanelBtn,n=e.elements.minimizeLeftPanelBtn,a=[...e.elements.container.querySelector(".column.left").querySelector(".column-ctn").children].map((e=>{if(!e.classList.contains("column-actions")&&"none"!==e.style.display)return e})).filter((e=>e))[0];const i=()=>window.screen.width>768,o=()=>{(e.isPanelMaximized(c)||e.isPanelFitted(c))&&e.openPanel(c,{minimize:!0})},s=()=>{t.addClassName("hide"),n.addClassName("hide")},r=()=>{t.removeClassName("hide"),n.removeClassName("hide")},l=(e,t)=>e.classList.contains(t);function p(e){return"none"!==getComputedStyle(e).display}try{!function a(c,d){const u=e.elements.leftPanelCtn.querySelector(".left-panel-actions"),m=e.elements.closeLeftPanelBtn;if("DIV"===c.tagName){if(p(c)&&(l(c,"panelManagerClosable")||l(c,"panelManagerMaximizable")))throw l(c,"panelManagerClosable")?(u.style.marginRight="0px",m.removeClassName("hide")):m.addClassName("hide"),l(c,"panelManagerMaximizable")?(i()&&l(c,"panelManagerMaximizable")&&r(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.matchMedia("(orientation:portrait)").addEventListener("change",(e=>{e.matches?(s(),o()):i()&&r()})),l(e.elements.closeLeftPanelBtn,"hide")?u.style.marginRight="36px":u.style.marginRight="0px"):s(),new Error("Found element");if(d<3){const e=c.children;for(let t=0;t<e.length;t++){const n=e[t];p(n)&&"none"!==getComputedStyle(n).display&&a(n,d+1)}}}t.addClassName("hide"),m.addClassName("hide"),n.addClassName("hide"),o()}(a,0)}catch(e){}},subscribeToDataFilter:e=>{const t=e.elements.leftPanel.querySelector("#data-filter-panel-ct");if(0===t.childElementCount){const n=new MutationObserver((()=>{e.activateLeftPanelActions(e),n.disconnect()})),a={childList:!0,subtree:!0};n.observe(t,a)}},getShownTag:function(e){return this._shownTags[e]},getContentElement:function(e,t){return(this._content[e]||{})[t]}});return D.MAIN_PANEL=l,D.LEFT_PANEL=c,D.RIGHT_PANEL=p,D.MINIMIZED_PANEL_STATE=m,D.MAXIMIZED_PANEL_STATE=g,D.FLOATING_PANEL_STATE=h,D.FITTED_PANEL_STATE=f,D.CLOSED_PANEL_STATE=P,D})),define("DS/TopFrame/TopFrame",["UWA/Core","UWA/Class","UWA/Class/Options","UWA/Class/Events","UWA/Element","UWA/Utils","UWA/Class/Promise","DS/TopFrame/Frame","DS/TopFrame/Utils","DS/TopFrame/CompassAPI","DS/TopFrame/LocalStorageManager","DS/MessageBus/MessageBus","DS/Tenant/Tenant","DS/TopBar/TopBar","DS/TopBar/model/MainMenuBar","DS/TopBarProxy/TopBarProxy","DS/TopBar/utils/Utils","DS/i3DXCompass/i3DXCompass","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/TagNavigator/TagNavigator","DS/W3DLegal/W3DLegal","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Alert","DS/GDPR/GDPR","i18n!DS/TopFrame/assets/nls/topFrame"],(function(e,t,n,a,i,o,s,r,l,c,p,d,u,m,g,h,f,P,_,v,b,S,w,A,T,C,I){"use strict";var y,D,E=function(){},M=r.LEFT_PANEL,x=r.RIGHT_PANEL,U=r.MINIMIZED_PANEL_STATE,N=r.MAXIMIZED_PANEL_STATE,L=r.FITTED_PANEL_STATE,O=r.CLOSED_PANEL_STATE,k="open",F="close",R="toggle",j="content",B="social",z="notification",V="enovTasks",W="make",X="social",G="search",H="space",q="content",K="messaging",Q="partSupply",Y="notification",J="scientificSI",Z="partSupplyEPA",$="partSupplyEPU",ee="dataFilterPanelCtn",te="bookmarkEditor",ne="shadowWidget",ae="solidworksLearnApp",ie="enovTasks",oe="helpMenu",se="instantMessagingMenu",re="notificationsMenu",le="compassMenu",ce="searchMenu",pe={},de="3DDashboard";function ue(t){return t?t!==M||(e.log("Left panel currently not permitted."),!1):(e.log("Must specify a panel"),!1)}return pe[q]=!1,pe[H]=!1,pe[Q]=!0,pe[Z]=!1,pe[$]=!1,pe[te]=!1,pe[J]=!1,D={lang:"en",activateFederatedSearch:!0,activateSearch:!0,showCoachmark:!0,activateLegal:!0,activateAbout:!0,activateGDPR:!1,useTagger:!0,activateInstantMessaging:!0,xappsMode:!1,onTenantChange:function(e){var t=e&&e.from,n=e&&e.to,a=Object.keys(e.from).find((t=>e.from[t]===window.location.origin)),i=n&&a&&n[a];t.platformId!==n.platformId&&i&&location.replace(i)}},y=t.singleton(a,n,{TOPBAR_HEIGHT:44,COMPASS_BREAKPOINT:959,XAPPS:{notification:{id:c.appIds.notification,tag:Y,topMenuId:z,loadPromise:null,isLoaded:!1,content:null,widget:null},content:{id:c.appIds.x3PDrive,tag:q,topMenuId:j,loadPromise:null,isLoaded:!1,content:null,widget:null},social:{id:c.appIds.swym,tag:X,topMenuId:B,loadPromise:null,isLoaded:!1,content:null,widget:null},search:{id:c.appIds.x3DSearch,tag:G,loadPromise:null,isLoaded:!1,content:null,widget:null},messaging:{id:c.appIds.messaging,tag:K,loadPromise:null,isLoaded:!1,content:null,widget:null},make:{id:"Make",tag:W,loadPromise:null,isLoaded:!1,content:null,widget:null},partSupply:{id:c.appIds.partSupply,tag:Q,topMenuId:j,loadPromise:null,isLoaded:!1,content:null,widget:null},partSupplyEPU:{id:c.appIds.partSupplyEPU,tag:$,topMenuId:j,loadPromise:null,isLoaded:!1,content:null,widget:null},partSupplyEPA:{id:c.appIds.partSupplyEPA,tag:Z,topMenuId:j,loadPromise:null,isLoaded:!1,content:null,widget:null},dataFilterPanelCtn:{id:c.appIds.advancedFilter,tag:ee,loadPromise:null,isLoaded:!1,content:null,widget:null},bookmarkEditor:{id:c.appIds.bookmarkEditor,tag:te,topMenuId:j,loadPromise:null,isLoaded:!1,content:null,widget:null},space:{id:c.appIds.x3DSpace,tag:H,topMenuId:j,loadPromise:null,isLoaded:!1,content:null,widget:null},scientificSI:{id:c.appIds.scientificSI,tag:J,loadPromise:null,isLoaded:!1,content:null,widget:null},a2xShadow:{id:c.appIds.a2xShadow,tag:ne,loadPromise:null,isLoaded:!1,content:null,widget:null},socialShadow:{id:c.appIds.swym,tag:"shadowWidgetSocial",loadPromise:null,isLoaded:!1,content:null,widget:null},solidworksLearnApp:{id:c.appIds.solidworksLearnApp,tag:ae,loadPromise:null,isLoaded:!1,content:null,widget:null},enovTasks:{id:c.appIds.enovTasks,tag:ie,topMenuId:V,loadPromise:null,isLoaded:!1,content:null,widget:null}},viewportHeight:0,resizeHandler:null,_externalApps:{},_frame:null,_isTaggerVisible:!1,_isCompassVisible:!1,_isDataFilterPanelVisible:!1,_isDashboardMenuVisible:!1,_legalPromise:s.deferred(),_visibleApp:null,_currentSearchQuery:"",_passportUrl:"",_contentApps:{},_previousRightPanelState:O,_previousRightPanelXApp:null,_rightTopBarMenus:null,appContainer:null,makeQueryParams:null,uninitializedCalls:"throw",upgradeInfoCookie:!1,userRoles:null,isStagingEnv:!1,isStagingBannerShown:!1,init:function(e){var t,n=this;n._parent(e),n._initTopFrame(e),(t=n.options).addinMode&&document.body.addClassName("addinmode"),t.lockedAppMode&&document.body.addClassName("lockedapp"),n._initFrame(),n._initTopBar(),n._initTenant(),n._initTopBarProxy(),n._initSearchUX(),n._initInstantMessaging(),n._initDashboardMenu(),n._initTagNavigator(),n._initCompass(),n._initInfraSearchFrameController(),n._initA2XShadowWidget(),void 0!==o.parseQuery(window.location.search).platformNav&&n._initSocialNavigation(),n._initNotificationManager(),n._initEvents(),n._initEventsListener(),n._activateLegal(),t.activateGDPR&&C.init(),n.resize(),n._addStagingBanner().then((()=>{(window.innerWidth||document.documentElement.clientWidth)>768&&n._initRightPanelVisibility()})),n._loadModules(["DS/UWPClientCode/PublicAPI"]).then((function(e){var a=e[0],i=a.getApplicationConfiguration("app.urls.warningPrompt"),o=a.getApplicationConfiguration("app.build.cluster.id"),s=a.getApplicationConfiguration("app.build.subcluster.id");n.clusterId="main"===s?o:s;try{"true"===t.isCloud&&i&&n.clusterId&&n._checkUpgradeInfo(i,n.clusterId)}catch(e){}})),t.showCoachmark&&t.showCoachmarkAtStartup&&n._showCoachmark({dnsa:!1})},getCurrentUserRoles:function(){return new s((function(e,t){_.getGrantedRoles((function(n){try{e(n&&n.map((e=>e.id)))}catch(e){t(e)}}))}))},getCookieStore:function(e){return new s((t=>{var n,a=[],i=null;try{a=document.cookie.split("; ")}catch(e){}(n=a.filter((function(t){return t.split("=")[0]===e}))).length&&(i=n[0].split("=")[1]),t(i)}))},_getCookieStore:function(e){var t,n=[],a=null;try{n=document.cookie.split("; ")}catch(e){}return(t=n.filter((function(t){return t.split("=")[0]===e}))).length&&(a=t[0].split("=")[1]),a},_convertUpgradeInfo:function(e,t){var n=["plannedDate","level","overloadMessage","postURL","isDismissed","messageSeenOn","messageCancelOn","onCancel","refreshOn"];switch(t){case"array2obj":var a={};n.forEach((function(t,n){a[t]=e[n]}));break;case"obj2array":a=[];n.forEach((function(t,n){a.push(e[t])}))}return a},_doUpdateGlobalUpgradeInfoDB:function(e,t){this.globalUpgradeInfoDB={};try{this.globalUpgradeInfoDB=JSON.parse(o.base64Decode(this._getCookieStore("UPGRADE_INFO")))||{}}catch(e){}var n=this._convertUpgradeInfo(e,"obj2array");this.globalUpgradeInfoDB[t]=n,Object.keys(this.globalUpgradeInfoDB).forEach((e=>{new Date(1e3*this.globalUpgradeInfoDB[e][0])<new Date&&delete this.globalUpgradeInfoDB[e]})),this.clusterUpgrade_infoObj.messageSeenOn||(this.clusterUpgrade_infoObj.messageSeenOn=(new Date).getTime(),this.globalUpgradeInfoDB[t][5]=(new Date).getTime()),l.setProductionUpgradeCookie(this.globalUpgradeInfoDB)},_displayUpgradeInfo:function(){const e=this.isUpgradeEventInCurrentWeek(1e3*this.clusterUpgrade_infoObj.plannedDate),t=(new Date).getTime(),n=(Math.abs(t-this.clusterUpgrade_infoObj.messageSeenOn),l.isSeenBefore(parseInt(this.clusterUpgrade_infoObj.messageSeenOn),t,1)),a=l.isSeenBefore(parseInt(this.clusterUpgrade_infoObj.messageSeenOn),t,7);new Date(1e3*this.clusterUpgrade_infoObj.plannedDate).getTime()>(new Date).getTime()&&1==!this.clusterUpgrade_infoObj.isDismissed&&(e&&(n||!n&&!this.clusterUpgrade_infoObj.isDismissed&&!this.clusterUpgrade_infoObj.onCancel)||!e&&(a||!a&&!this.clusterUpgrade_infoObj.isDismissed&&!this.clusterUpgrade_infoObj.onCancel))&&(this.clusterUpgrade_infoObj.messageSeenOn=t,this.showProductionAlert(this.clusterUpgrade_infoObj),this._doUpdateGlobalUpgradeInfoDB(this.clusterUpgrade_infoObj,this.clusterId))},_checkUpgradeInfo:function(e,t){var n=this,a=new Date(new Date).toISOString().split("T")[0];n.globalUpgradeInfoDB={};try{n.globalUpgradeInfoDB=JSON.parse(o.base64Decode(n._getCookieStore("UPGRADE_INFO")))||{}}catch(e){}if(n.clusterUpgrade_infoObj=n._convertUpgradeInfo(n.globalUpgradeInfoDB[t]||{},"array2obj"),n.clusterUpgrade_infoObj&&n.clusterUpgrade_infoObj.refreshOn===a)this._displayUpgradeInfo();else{const i=encodeURIComponent(JSON.stringify({clusterid:t,lang:l.getCurrentLanguage()})),o=e+t+"?options="+i;require([["DS","WAFData","WAFData"].join("/")],(function(e){e.proxifiedRequest(o,{method:"GET",onComplete:function(e){try{e=JSON.parse(e),n.clusterUpgrade_infoObj.plannedDate!==e.plannedDate&&(n.clusterUpgrade_infoObj=n._convertUpgradeInfo({},"array2obj")),Object.keys(e).forEach((t=>{n.clusterUpgrade_infoObj[t]=e[t]})),n.clusterUpgrade_infoObj.refreshOn=a,n._doUpdateGlobalUpgradeInfoDB(n.clusterUpgrade_infoObj,t),n._displayUpgradeInfo()}catch(e){n.clusterUpgrade_infoObj=n._convertUpgradeInfo({},"array2obj"),n.clusterUpgrade_infoObj.refreshOn=a,n._doUpdateGlobalUpgradeInfoDB(n.clusterUpgrade_infoObj,t)}}})}))}},isUpgradeEventInCurrentWeek:e=>!l.isSeenBefore(parseInt(e),(new Date).getTime(),7),showProductionAlert(){const e=this.clusterUpgrade_infoObj,t=new Date,n=t.getMonth()+1,a=t.getDate()+"-"+n+"-"+t.getFullYear();if(!(e.isDismissed||e.onCancel&&e.messageCancelOn===a)){var i=this,o=e.messageSeenOn,s=(new Date).getTime();if(o){if(e.isDismissed||e.onCancel&&e.messageCancelOn===a)return;r(e)}else e.messageSeenOn=s,r(e)}function r(e){i._setUpgradeMessage(e).then((function(t){i.showProductionUgradeAlert({className:"upgrade-prompt-alert",autoHide:!1,messages:[{class:"upgrade-message primary",html:e.overloadMessage?e.overloadMessage:t}],closeOnClick:!0,upgradeInfo:e})}))}},_initTopFrame(t){var n,a,i,s=this;s.setOptions(t),a=(n=s.options).lockedAppMode,i=n.startupParams,n.brandAbout=n.brandAbout||"",n.appNameAbout=n.appNameAbout||"",n.numberAbout=n.numberAbout||"",n.communityUrl=n.communityUrl||"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:4",n.supportPublicCloudUrl=n.supportPublicCloudUrl||"https://www.3ds.com/support/3dexperience-platform-on-cloud-support/",n.lang=e.is(n.lang)?n.lang:D.lang,n.xappsMode=e.is(n.xappsMode)?n.xappsMode:D.xappsMode,n.activateAbout=e.is(n.activateAbout)?n.activateAbout:D.activateAbout,n.activateGDPR=e.is(n.activateGDPR)?n.activateGDPR:D.activateGDPR,n.activateLegal=e.is(n.activateLegal)?n.activateLegal:D.activateLegal,n.activateInstantMessaging=e.is(n.activateInstantMessaging)?n.activateInstantMessaging:D.activateInstantMessaging,n.activateSearch=e.is(n.activateSearch)?n.activateSearch:D.activateSearch,n.activateNewSearch=(e.is(n.activateFederatedSearch)?n.activateFederatedSearch:D.activateFederatedSearch)||o.getQueryString(window.location.href,"universal_search"),n.myAppsBaseUrl=n.myAppsBaseUrl||n.myAppsBaseURL,n.onTenantChange=e.is(n.onTenantChange,"function")?n.onTenantChange:D.onTenantChange,n.onCredentialsChange=e.is(n.onCredentialsChange,"function")?n.onCredentialsChange:E,n.onCollabSpaceChange=e.is(n.onCollabSpaceChange,"function")?n.onCollabSpaceChange:E,a?(n.showCoachmark=!1,n.showCoachmarkAtStartup=!1):(n.showCoachmark="boolean"==typeof n.showCoachmark?n.showCoachmark:D.showCoachmark,n.showCoachmarkAtStartup=n.showCoachmark&&!!(i||{}).showCoachmark),s.useTagger=e.is(n.useTagger)?n.useTagger:D.useTagger,n&&!1===s.useTagger&&(v=void 0),s._tenantId=n.tenant,s._communityId=n.community,s._passportUrl=n.passportUrl,s.isPublicCloud=s._isPublicCloud(),s._serviceUrl=n.serviceUrl,s._prefixUrl=n.prefixUrl,s._initContentAppsAttribute(),s._initRightTopBarMenusAttribute(),s.helpMenuOptions={brandAbout:n.brandAbout,appNameAbout:n.appNameAbout,numberAbout:n.numberAbout,getStartedUrl:n.getStartedUrl,communityUrl:n.communityUrl,supportPublicCloudUrl:n.supportPublicCloudUrl,topBarId:oe}},_initRightTopBarMenusAttribute:function(){var e,t=this,n=t.options.topMenus;function a(e){var n=e.xAppTag;t.isPanelOpen(x)&&n===t.getPanelApp(x)?t.closePanel(x):t.openPanel(x,{tag:n})}Array.isArray(n)&&(e={},n.forEach((function(t){e[t]=!0})),n=e),n&&(!0===n.notification&&(n.notification=function(){a({xAppTag:Y})}),!0===n.enovTasks&&(n.enovTasks=function(){a({xAppTag:ie})}),!0===n.content&&t.getEnabledContentxAppTags().length&&(n.content=function(){t.getEnabledContentxAppTags(t.userRoles);var e,n=t._contentApps,i=p.getLastLoadedxAppContentTopMenu();(e=i&&n[i]?i:n[q]?j:t.getEnabledContentxAppTags()[0])?a({xAppTag:e}):console.error("No xApp to show in Content Right panel.")}),!0===n.social&&(n.social=function(){a({xAppTag:X})}),n.context=!0,t._rightTopBarMenus=n)},_initContentAppsAttribute:function(){var e=this.options;if(!e.contentApps||0===Object.keys(e.contentApps).length){var t=e.topMenus,n=!1;if(Array.isArray(t)?n=t.includes(j):"object"==typeof t&&(n=!!t[j]),n){var a={};a[q]=!0,e.contentApps=a,console.warn("You are using a deprecated TopFrame init options.\nPlease now specify the available apps in the Content right panel.\nPlease provide: options.contentApps = {} at least to use TopFrame default value.\nSee TopFrame#init `options.contentApps` documentation for more information.")}}this._contentApps=Object.assign({},pe,e.contentApps||{})},getApplicationContainer:function(){return this.appContainer},showProductionUgradeAlert:function(t){var n,a=e.createElement,i=this,o=t.upgradeInfo;function s(){n&&n.elements&&n.destroy(),n=null}n=new T({className:["ifwe-prod-upgrade-notify",t.className||""].join(" "),closable:!0,visible:!0,autoHide:t.autoHide||!1,closeOnClick:!1,hideDelay:t.hideDelay||4e3,events:{onRemoveMessage:function(){const e=new Date,t=e.getMonth()+1,n=e.getDate()+"-"+t+"-"+e.getFullYear();o.onCancel=!0,o.messageCancelOn=n,i._doUpdateGlobalUpgradeInfoDB(i.clusterUpgrade_infoObj,i.clusterId),s()},onClick:t.onClick||function(){}}}).inject(document.body,"top");let r=e.createElement("span",{html:[t.messages[0]]});n.add(r);const l=a("div",{class:"buttonContainer"}).inject(n.elements.container.firstChild);return a("span",{class:"banner-action-container",html:[new A({className:"ReadMore-btn default",value:I.readMore,events:{onClick:function(){s(),i.openAboutDialog()}}}),new A({className:"dissmiss-btn link",value:I.dismissUpgradePrompt,events:{onClick:function(){o.isDismissed=!0,i._doUpdateGlobalUpgradeInfoDB(i.clusterUpgrade_infoObj,i.clusterId),s()}}})]}).inject(l),n},toggleTagger:function(e){var t=this;t._isTaggerVisible=void 0===e?!t._isTaggerVisible:e,t._isTaggerVisible&&(t._isCompassVisible&&P.hideAccordion(),t._isCompassVisible=!1),t._updateLeftPanel(),v&&v.toggle6WTaggerViewVisibility(t._isTaggerVisible)},_displayTagger:function(){this.toggleTagger(!0)},_setTaggerMode:function(e){v&&v.view&&e&&v.view.setTaggerMode(e)},_hideTagger:function(){this._isTaggerVisible&&this.toggleTagger(!1)},_initTopBar:function(){var t,n,a=this,s=a.options,r=a._getSwymURL();if((n=e.extend({userName:"",brand:"",appName:"",application:"",lang:"en",isShared:!1,useTagger:!0,picture:"",swymUrl:r,tenantId:s.hideTenantDisplay?"":a._tenantId,serviceName:s.serviceName,getAllTenants:s.getAllTenants,logoutMode:"private"!==s.logoutMode?"public":s.logoutMode,onUserContextClick:s.onUserContextClick,tenantSwitcher:void 0===s.tenantSwitcher||s.tenantSwitcher,events:{menu:function(){a.appContainer.toggleClassName("right")},logo:function(){var e=i.getSize.call(document),t=s.addinMode,n=s.lockedAppMode;a._isCompassVisible||n||t&&e.width>a.COMPASS_BREAKPOINT||P.showAccordion(!0)}}},l.pick(s,"userName","appIcon","brand","appName","application","isShared","useTagger","lang","events","signupAction","loginAction","signupUrl","loginUrl"),!0)).topMenus=a._rightTopBarMenus,n.activateNewSearch=!!s.activateNewSearch,n.activateSearch=!!s.activateSearch,s.picture)n.picture=s.picture;else if(s.userId&&r&&(t=o.parseUrl(r)).authority){var c,p=t.protocol||"https",d=t.authority,u=t.directoryPath||"/",h=s.userId;n.picture=p+"://"+d+u+"api/user/getpicture/login/"+h}if(n.picture){try{c=require(["DS","WAFData","WAFData"].join("/"))}catch(e){console.warn("WAFData is mandatory to proxify picture URL")}c&&(n.picture=c.proxifyUrl(n.picture))}n.addinMode=s.addinMode,n.lockedAppMode=s.lockedAppMode,n.dashboardLockedMode=s.dashboardLockedMode,n.shouldRemoveTopBar=s.shouldRemoveTopBar,n.topFrameVue=s.topFrameVue,n.userId=s.userId,n.dashboardLockedMode=s.dashboardLockedMode,s.hideTenantDisplay||n.tenantId||(n.tenantId=s.tenantId),m.init(n),g.setStaticMenuProviders([le,re,ce,se,oe]),m.addEvent({events:{search:function(e){a._onSearch(e.value||"")},clearSearch:function(){a._onSearch("")},tenant:s.onTenantChange,collabSpace:s.onCollabSpaceChange,credentials:s.onCredentialsChange}})},_setUpgradeMessage(e){var t=this,n=new Date(1e3*e.plannedDate);return new s((function(a,i){t._loadModules(["DS/UWPClientCode/I18n"]).then((function(t){var i=t[0];a(i.replace(I.upgradePromptMessage,{EventProductVersion:e.level,eventDate:n.toLocaleDateString(l.getCurrentLanguage(),{timeZone:"UTC",year:"numeric",month:"long",day:"numeric"}).replace(/,/g," ").replace(/ {2}/g," ")}))}),i)}))},_initTenant(){var e=this;require([["DS","PlatformAPI","PlatformAPI"].join("/")],(function(t){t.setTenant(e._tenantId)}),(function(e){}))},_initSearchUX:function(){var e=this,t=e.options;(t.activateSearch||t.activateNewSearch)&&require(["DS/SNSearchUX/SearchUX_TopBar"],(function(n){var a={ressources:{},userId:null,topBarId:ce,searchInputTarget:"input_search_div",events:{},resurrectSearch:!!e.options.resurrectSearch};a.x3dPlatformId=e._tenantId,a.addinMode=t.addinMode,t.events&&(a.events={search:t.events.search,clearSearch:t.events.clearSearch}),t.userId&&(a.userId=t.userId),t.startupParams&&(a.ressources=t.startupParams),t.searchParams&&(a.searchParams=t.searchParams),a.events.openTagger=e._displayTagger.bind(e),a.events.closeTagger=e._hideTagger.bind(e),a.events.setTaggerMode=e._setTaggerMode.bind(e),n.init(a)}))},_initInstantMessaging:function(){var t=this,n=t._getSwymURL(),a=t.options,i=a.startupParams;a.activateInstantMessaging&&!a.lockedAppMode&&require(["DS/InstantMessaging/InstantMessaging"],(function(o){o.init(e.extend({userId:null,topBarId:se,appName:a.brand,userName:a.userName,passportUrl:t._getPassportUrl(),ressources:n?{swym:[{id:t._tenantId,displayName:t._tenantId,url:n}],instantMessaging:i?i.instantMessaging:null}:{}},l.pick(a,"xswym","realtime","userId",{startupParams:"ressources"})))}))},_initDashboardMenu:function(){var e=this;e.options.dashboardSwitch&&require([["DS","Dashboard","NewDashboardMenu"].join("/")],(function(t){t.init({container:e._frame.getContentElement(M,"dashboardMenuCtn"),onClose:function(t){e._isDashboardMenuVisible=!1,e._updateLeftPanel(t)},onOpen:function(){e._isCompassVisible=!1,e._isDataFilterPanelVisible=!1,e._isDashboardMenuVisible=!0,e._hideTagger("compass"),e._updateLeftPanel()},onFloat:function(){e._isCompassVisible=!1,e._isDataFilterPanelVisible=!1,e._isDashboardMenuVisible=!0,e._hideTagger("compass"),e._updateLeftPanel({float:!0})}})}))},_initFrame:function(){var t,n,a,i,o,s="div",l="x-app",c="column-container",p=this,u=e.createElement,g=p.options,h=p._rightTopBarMenus,f=p.XAPPS,P=g.dashboardSwitch;function _(e,t){var n,a=t.panel,i=t.position,o=e===k,s=e===F,r="hide"===e,l=a===M,c="onLeftPanelOpened",u="onLeftPanelClosed",g="onLeftPanelHidden",h="onRightPanelOpened",f="onRightPanelClosed",P="onRightPanelHidden";if(a===x&&(p._onRightPanelChange(),o&&(n=h),s&&(n=f,m.view.children.rightMenuBar._onItemViewActivate()),r&&(n=P)),l){if(p._onLeftPanelChange(),s&&(n=u,l)){p._isTaggerVisible=!1,p._isCompassVisible=!1,p._isDataFilterPanelVisible=!1,p.useTagger&&v.toggle6WTaggerViewVisibility(!1);var _=p._manageCompass.bind(p);requestAnimationFrame(_)}o&&(n=c),r&&(n=g)}"dashboardMenuCtn"===t.tag&&d.publish({channel:"LEFT_PANEL_CHANGED",topic:n,data:{panelInfo:t}}),p.dispatchEvent(n,[e,a,t.tag,i,"taggerCtn"===t.tag&&{appId:"X3DTAGS_AP"}]),d.publish({channel:"topframe-panelchange",topic:n,data:{action:e,panel:a,tag:t.tag,panelPosition:i,appId:"taggerCtn"===t.tag?"X3DTAGS_AP":""}})}n=u(s,{id:"my-apps-ct",class:c}),a=u(s,{id:"tagger-ct",class:c}),i=u(s,{id:"data-filter-panel-ct",class:c}),P&&(o=u(s,{id:"new-dashboard-menu",class:c})),p.appContainer=u(s,{class:"app-content"}),t={left:{myAppsCtn:n,taggerCtn:a,dataFilterPanelCtnOld:i},main:{appContainer:p.appContainer},right:{}},P&&(t.left.dashboardMenuCtn=o),t.left.dataFilterPanelCtn=f.dataFilterPanelCtn.content=u(s,{class:l+" advancedFilter panelManagerClosable panelManagerMaximizable"}),t.left.a2xShadow=f.a2xShadow.content=u(s,{class:l+" a2xShadow"}),h&&(t.right={loading:u(s,{class:l+" spinner",text:I.loading}),error:u(s,{class:l+" error",text:I.xAppError})},(h.notification||g.addinMode)&&(t.right.notification=f.notification.content=u(s,{class:l+" notification"})),h.social&&(t.right.social=f.social.content=u(s,{class:l+" social"})),h.content&&(t.right.content=f.content.content=u(s,{class:l+" content"}),t.right.partSupply=f.partSupply.content=u(s,{class:l+" partSupply"}),t.right.partSupplyEPA=f.partSupplyEPA.content=u(s,{class:l+" partSupplyEPA"}),t.right.partSupplyEPU=f.partSupplyEPU.content=u(s,{class:l+" partSupplyEPU"}),t.right.space=f.space.content=u(s,{class:l+" space"}),t.right.bookmarkEditor=f.bookmarkEditor.content=u(s,{class:l+" bookmarkEditor"}),t.right.scientificSI=f.scientificSI.content=u(s,{class:l+" scientificSI"}),t.right.enovTasks=f.enovTasks.content=u(s,{class:l+" enovTasks"}),t.right.solidworksLearnApp=f.solidworksLearnApp.content=u(s,{class:l+" solidworksLearnApp"}))),g.activateSearch&&g.activateNewSearch&&(t.right.search=f.search.content=u(s,{class:l+" search"})),t.right.messaging=f.messaging.content=u(s,{class:l+" messaging"}),t.right.make=f.make.content=u(s,{class:l+" make"}),p._frame=new r(t,{animateMainPanelOnPanelMove:{left:!0,right:!1},events:{onPanelOpen:_.bind(p,"open"),onPanelClose:_.bind(p,"close"),onPanelHide:_.bind(p,"hide"),onPanelChange:g.onRightPanelChange||E},isStagingEnv:p.isStagingEnv,isStagingBannerShown:p.isStagingBannerShown})},_initTagNavigator:function(){var t,n=this,a=n.options,i=a.startupParams;v&&(t=e.extend({disableAutoComplete:!0,taggerIconId:"btn_tag_nav",appsTarget:"tagger-ct",events:{onFilterChange:l.always(!1)},lang:"en",userId:null,x3dPlatformId:n._tenantId,isAuthenticated:n._isAuthenticated},l.pick(a,"myAppsBaseUrl","tagsServerUrl","onFilterChange","getContextIdFromWidgetId","getTabTitleFromTabId","getWidgetNameFromWidgetId","displayFilteredState","getWidgetTitleFromWidgetId","lang","brand","tenant","userId")),i?t.startupParams=i:a.taggerService&&a.cStorageService&&n._tenantId?e.extend(t,l.pick(a,"taggerService","cStorageService","tenant")):a.tagsServerUrl&&(t.tagsServerUrl=a.tagsServerUrl,a.envId&&(t.tagsServerUrlParams={tenant:a.envId})),v.set6WTaggerOptions(t),v.create6WTaggerView(v.get6WTagger("default"),t.appsTarget,{onClose:function(){n._isTaggerVisible=!1,n._updateLeftPanel()},onOpen:function(){require([["DS","Dashboard","NewDashboardMenu"].join("/")],(function(e){e.close()})),n._isCompassVisible=!1,n._isDataFilterPanelVisible=!1,n._isDashboardMenuVisible=!1,n._isTaggerVisible||(n._isTaggerVisible=!0,n._updateLeftPanel())},onFilterChange:t.events.onFilterChange,displayTaggerOnFocus:n._displayTagger.bind(n),hideTaggerOnFocus:n._hideTagger.bind(n)}),v.toggle6WTaggerViewVisibility(!1))},_initCompass(){var t=this,n=t.options,a="DEFAULT",i=a;P.initialize(e.extend({version:n.compassVersion,defaultQuadrant:n.compassDefaultQuadrant,logoClassName:"topbar-logo",compassTarget:"compass_ctn",appsTarget:"my-apps-ct",closable:!0,enableWidgetDrag:null,closeOnLaunch:!1,launchOnSameDomain:l.always(!1),onOpen:function(){require([["DS","Dashboard","NewDashboardMenu"].join("/")],(function(e){e.close()})),t._isDashboardMenuVisible=!1,t._isDataFilterPanelVisible=!1,t._isCompassVisible=!0,i=a,t._hideTagger("compass"),t._updateLeftPanel()},onClose:function(){t._isCompassVisible=!1,i=a,t._updateLeftPanel()},setPanelMode:function(e){var n;i!==e&&(i=e,n="FULL_WIDTH"===e,t._updateLeftPanel({maximize:n,minimize:!n,closeRightPanel:n}))},getPanelMode:function(){return i},lang:"en",myAppsBaseUrl:"",userId:null,passportUrl:t._getPassportUrl(),proxyTicketUrl:null,topBarId:le,x3dPlatformId:t._tenantId,platform:t._tenantId},l.pick(n,"launchOnSameDomain","closeOnLaunch","enableWidgetDrag","userId","myAppsBaseUrl","proxyTicketUrl","lang","addinMode")))},async _initInfraSearchFrameController(){var e=this,t=await e.getCurrentUserRoles();e.userRoles=t,(e.options.serviceName===de&&t.includes("CSV")||t.includes("InternalDS"))&&e._autoInstantiateXApp("dataFilterPanelCtn"),require(["DS/ENOFrame3DXInfra/Frame3DXController"],(function(t){t.init({container:e._frame.getContentElement(M,"dataFilterPanelCtnOld"),open:function(){require([["DS","Dashboard","NewDashboardMenu"].join("/")],(function(e){e.close()})),e._isCompassVisible=!1,e._isDataFilterPanelVisible=!0,e._isDashboardMenuVisible=!1,e._isTaggerVisible=!1,e._hideTagger("compass"),e._updateLeftPanel({xAppTag:"dataFilterPanelCtn",maximize:!1,minimize:!0})},close:function(){e._isDataFilterPanelVisible=!1,e._updateLeftPanel()}})}))},async _initSocialNavigation(){var e=this;e.options.serviceName===de&&(e.XAPPS.socialShadow.content=document.querySelector(".main"),e._autoInstantiateXApp("socialShadow",{route:"/dm",shadowSocialApp:!0,header:!1},{header:!1}))},async _initA2XShadowWidget(){var e=this;"OnPremise"!==e._tenantId&&e.options.serviceName===de&&e._autoInstantiateXApp("a2xShadow")},async _addStagingBanner(){var e,t=this,n=t.options.getAllTenants||f.getAllTenants,a=t.options.tenant,i=t.options.serviceName,o="3DSwym"===i,s="3DSwym"===i||"3DDashboard"===i?"IFW":"";e=await f.getTenant(a,n,{serviceName:i,public:o,role:s});var r=document.querySelector(".staging-env");(r&&(r.remove(),t.isStagingBannerShown=!1,t._setPanelOffsetDueToBanner(!1)),e&&e.type&&"staging"===e.type.toLowerCase())&&(new T({visible:!0,fullWidth:!0,className:"staging-env",events:{onRemoveMessage:function(){document.querySelector(".staging-env").remove(),t.isStagingBannerShown=!1,t._setPanelOffsetDueToBanner(!1)}}}).inject(document.body,"top").add({className:"staging-env-item",message:I.stagingEnvMessage}),t.isStagingEnv=!0,t.isStagingBannerShown=!0,t._setPanelOffsetDueToBanner(!0))},_initRightPanelVisibility:function(){var t=this;t._loadModules(["DS/UWPClientCode/PublicAPI"]).then((function(n){var a,i,o,s,r=n[0].getDashboardRightPanelVisibility({platformId:window.dsTenantId});if(r){a=r.show,i=r.xAppTagToShow,o=r.xAppDataToShow;var l={tag:i,maximize:s=r.isMaximized};if(["X3DSEAR_AP","X3PSEAR_AP"].includes(i)&&t.options.shouldResurrectSearch){if(!r.show||t.options.addinMode||t.options.lockedAppMode||t.options.dashboardLockedMode)return;if(o&&o.bDisableResurrect)return;t.options.resurrectSearch=!0,l={appId:i,data:e.merge(o,{resurrectSearch:!0}),maximize:s}}a&&t.openPanel(x,l)}}))},_showCoachmark(t){t=t||{};var n=this;n.options.shouldRemoveTopBar||require(["DS/Coachmark/Coachmark"],(function(a){var i=n.options;t.events=t.events||{},e.merge(t.events,{onDNSAChange:i.onCoachmarkDNSAChange}),a.init({myAppsBaseURL:i.myAppsBaseUrl,forceDisplay:!0,lang:i.lang,xappsMode:i.xappsMode,dnsa:t.dnsa})}))},_initTopBarProxy(){var e,t=this,n=t.options;e=new h({id:oe}),n.showCoachmark&&e.addContent({help:[{label:I.getStartedItem,className:"item-getStartedItem",onExecute:function(){t._showCoachmark()}}]}),e.addContent({help:[{label:I.supportCommunitiesItem,className:"item-userCommunities",submenu:[{label:"3DEXPERIENCE Platform",onExecute:function(){t._openUrlInBlankTab({url:n.communityUrl,modalTitle:I.supportCommunitiesItem,modalButton:"3DEXPERIENCE Platform"})}},{label:"Social & Collaboration",submenu:[{label:"ENOVIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:38",modalTitle:I.supportCommunitiesItem,modalButton:"ENOVIA"})}},{label:"3DEXCITE",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:g_fzYGr0Q6mHYxoVvGKnOw",modalTitle:I.supportCommunitiesItem,modalButton:"3DEXCITE"})}}]},{label:"3D Modeling",submenu:[{label:"CATIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:6",modalTitle:I.supportCommunitiesItem,modalButton:"CATIA"})}},{label:"BIOVIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:36",modalTitle:I.supportCommunitiesItem,modalButton:"BIOVIA"})}},{label:"GEOVIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/community/swym:prd:R1132100503382:community:WtUufQuGThy_NBDbV8lzSg",modalTitle:I.supportCommunitiesItem,modalButton:"GEOVIA"})}},{label:"SOLIDWORKS",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:yUw32GbYTEqKdgY7-jbZPg",modalTitle:I.supportCommunitiesItem,modalButton:"SOLIDWORKS"})}}]},{label:"Simulation",submenu:[{label:"3DVIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/community/swym:prd:R1132100503382:community:thMjVQ40QFOr0z-nCl5RKg",modalTitle:I.supportCommunitiesItem,modalButton:"3DVIA"})}},{label:"SIMULIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:39",modalTitle:I.supportCommunitiesItem,modalButton:"SIMULIA"})}},{label:"DELMIA",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:26",modalTitle:I.supportCommunitiesItem,modalButton:"DELMIA"})}}]},{label:"Information Intelligence",submenu:[{label:"NETVIBES",onExecute:function(){t._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:34",modalTitle:I.supportCommunitiesItem,modalButton:"NETVIBES"})}}]}]}]}),t.isPublicCloud().then((function(a){a&&e.addContent({help:[{label:I.getSupportItem,className:"item-getSupport",onExecute:function(){t._openUrlInBlankTab({url:n.supportPublicCloudUrl,modalTitle:I.getSupportItem,modalButton:I.getSupportItem})}}]})})),n.activateAbout&&e.addContent({help:[{label:I.aboutItem,className:"item-aboutItem",onExecute:function(){var e,n;(n=i.getElement.call(document.body,[".ds-coachmark"]))&&(e=n.getElement(".ds-coachmark-close"))&&e.triggerEvent("click"),t.openAboutDialog()}}]}),n.activateGDPR&&e.addContent({profile:[{label:I.cookies,className:"item-cookies item-cookies-order",onExecute:function(){C.start()}}]})},_initEvents(){var e=this;require([["DS","PlatformAPI","PlatformAPI"].join("/")],(function(t){t.subscribe("marketplace.make.sendContent",(function(t){e.makeQueryParams=t||{},e.openPanel(x,{appId:"Make",tag:W})}))}))},_setPanelOffsetDueToBanner:function(e){e=!!e;var t=this._frame;if(e)this._frame.TOPBAR_HEIGHT=79;else{var n=t._panels.left,a=t._panels.right,i=t.elements.leftPanel,o=t.elements.rightPanel;this._frame.TOPBAR_HEIGHT=44,n.opened&&(i.style.top="44px",i.style.height="calc(100% - 44px)"),a.opened&&(o.style.top="44px",o.style.height="calc(100% - 44px)")}},_initEventsListener(){window.MessageBus=d,d.subscribe({channel:"3DDashboard-XAPP-Bus",topic:"toggleXAPPinSidePanel",callback:e=>{var t=c.appIds,n=Object.keys(t).find((n=>t[n]===e.appId));t.hasOwnProperty(n)&&this._updateRightPanel({xAppTag:n,maximize:"maximized"===e.panelState,minimize:"minimized"===e.panelState,action:e.action,xAppData:e.xAppData})}})},_initNotificationManager:function(){var t=this;require(["DS/NotificationManager/notificationManager"],(function(n){var a=t.options;new n(e.extend({notifServer:"",topBarID:re,swymServer:t._getSwymURL(),passportServer:"",login:""},l.pick(a,{passportUrl:"passportServer",userId:"login"},"notifServer")))}))},_getSwymURL:function(){var e=this.options;return e.swymUrl||l.resolve(e,["startupParams","swym","0","url"],null)},getPanelState:function(e){return this._frame.getPanelState(e)},_openUrlInBlankTab:function(t){if(o.Client.Engine.safari)var n=new w({header:t.modalTitle,body:e.createElement("div",{styles:{"text-align":"center"},html:new A({value:t.modalButton,className:"primary",icon:"login",events:{onClick:function(){window.open(t.url,"_blank"),n.hide()}}})}),visible:!0,closable:!0,renderTo:document.body,events:{onHide:function(){n=null}}});else window.open(t.url,"_blank")},_loadModules:function(t){var n=[];return e.is(t,"string")?n[0]=t:n=t,new s((function(e,t){require(n,(function(){e(Array.prototype.slice.call(arguments))}),(function(e){t("Error loading modules."+(e&&e.requireModules?e:""))}))}))},_instantiateApp:function(t,n,a,i){t=t||{},a=a||{},i=i||{};var o=this;return new s((function(s,r){o._loadModules(["DS/UWPClientCode/WidgetFactory","DS/TopFrame/Environment"]).then((function(l){var c=l[0],p=l[1],d=t.id,u=o._tenantId&&{x3dPlatformId:o._tenantId}||{},m=o._communityId&&{community:o._communityId}||{},g=e.merge(a,e.merge(u,m)),h=JSON.stringify(g),f={el:n,parent:!1,preview:!0,appId:d,data:h,header:i.header||!0,serviceUrl:o._serviceUrl,prefixUrl:o._prefixUrl};if(t.platforms&&o._tenantId&&t.platforms.forEach((function(e){e.id===o._tenantId&&(t.launchInfos=e.launchInfos,t.checksum=e.checksum||t.checksum,t.isolationLevel=e.isolationLevel||t.isolationLevel)})),!(t.checksum&&t.launchInfos||t.platforms&&t.platforms[0]&&t.platforms[0].checksum&&t.platforms[0].launchInfos))throw new Error("Could not get valid Config from MyApps for the App "+f.appId);f=e.extend(f,{widgetId:e.is(t.launchInfos)?t.launchInfos:t.platforms[0].launchInfos,isolationLevel:e.is(t.isolationLevel)?t.isolationLevel:t.platforms[0].isolationLevel,token:e.is(t.checksum)?t.checksum:t.platforms[0].checksum}),o._frame.showPanelContent(i.panel,i.xAppTag),c.load(f,(function(){s(f.widget)}),p,(function(e){console.error("Fail to load the widget: ",d,e),r(e)}))})).catch((function(e){r(e)}))}))},_autoInstantiateXApp(e,t={},n={}){var a=this,i=a.XAPPS[e]||a._externalApps[e];c.getAppInfo({appId:i.id}).then((function(e){return a._instantiateApp(e,i.content,t,n)})).then((function(e){i.isLoaded=!0,i.widget=e})).catch((function(e){try{console.error(e.stackTrace||e)}catch(e){}i.loadPromise=null}))},_showApp:function(t,n,a){var i,o=this,r=o._frame,l=o.XAPPS[t]||o._externalApps[t];if(!l||!l.content)return s.resolve();if(i=l.id,t===J){l.isLoaded=!1,l.loadPromise=null;for(var d=l.content;d.firstChild;)d.removeChild(d.firstChild);l.widget=null}return t===W?(require([["DS","i3DXCompassPlatformServices","i3DXCompassPlatformServices"].join("/")],(function(n){function i(t,n){return Object.keys(t).map((function(a){var o=t[a];if("originalAsset"===a)return i(o,"originalAsset_");try{return e.is(o,"object")&&(o=JSON.stringify(o)),n+encodeURIComponent(a)+"="+encodeURIComponent(o)}catch(e){return n+encodeURIComponent(a)+"="+encodeURIComponent(o)}})).join("&")}n.getPlatformServices({onComplete:function(e){var n=e&&e.filter((function(e){return e.mppresentation})),s=(n&&n[0]&&n[0].mppresentation||"https://make.3dexperience.3ds.com")+"/addin?"+i(o.makeQueryParams,""),c=document.createElement("iframe");for(c.setAttribute("src",s),c.style.width="100%",c.style.height="100%",c.style.paddingTop="38px",c.style.border="none";l.content.firstChild;)l.content.removeChild(l.content.firstChild);l.content.appendChild(c),l.isLoaded=!0,r.showPanelContent(a,t)}})})),s.resolve()):l.isLoaded||l.loadPromise?(n&&(l.widget.setValues(n),l.widget.dispatchEvent("endEdit")),r.showPanelContent(a,t),l.loadPromise||s.resolve()):(r.showPanelContent(a,"loading"),l.loadPromise=c.getAppInfo({appId:i}).then((function(e){return o._instantiateApp(e,l.content,n||{},{panel:a,xAppTag:t})})).then((function(e){l.isLoaded=!0,l.widget=e,r.showPanelContent(a,t)})).catch((function(e){try{console.error(e.stackTrace||e)}catch(e){}l.loadPromise=null,l.topMenuId===j?(p.getLastLoadedxAppContentTopMenu()===t&&p.setLastLoadedxAppContentTopMenu(""),r.showPanelContent(a,t),o._loadModules(["DS/TopFrame/Environment"]).then((function(e){new(0,e[0])({el:r.getContentElement(a,t),appId:i}).showErrorView()}))):r.showPanelContent(a,"error")})),l.loadPromise)},_updateColumn:function(e,t){return console.warn("TopFrame#_updateColumn is @private and @deprecated method. Please use @public TopFrame#openPanel method instead."),e===M?(this._updateLeftPanel(),!0):e===x&&(this._updateRightPanel({action:R,xAppTag:t}),!0)},_updateLeftPanel:function(e){var t,n,a=this,i=(e=e||{}).action===F,o=a._frame,r=e.xAppTag,l=!!e.maximize,c=!!e.minimize;function p(e){return o.closePanel(M,e)}if(i)t=p();else if(a._isTaggerVisible||a._isCompassVisible||a._isDataFilterPanelVisible||a._isDashboardMenuVisible){var d=!!a.options.addinMode,u=d&&document.body.hasClassName("with-app");a._isTaggerVisible?o.showPanelContent(M,"taggerCtn"):a._isCompassVisible?(o.showPanelContent(M,"myAppsCtn"),d&&!u&&(e.maximize=!0,e.minimize=!1,e.closeRightPanel=!0,n=!0)):a._isDataFilterPanelVisible?t=s.all([o.openPanel(M,{maximize:l,minimize:c,closeOppositePanel:!1}),a._showApp(r,undefined,M)]):a._isDashboardMenuVisible&&o.showPanelContent(M,"dashboardMenuCtn"),t=o.openPanel(M,{maximize:e.maximize,minimize:e.minimize,closeOppositePanel:e.closeRightPanel,forceSmallScreenPanelMode:n,float:e.float})}else t=p({float:e.float});return t.then(a._manageCompass.bind(a))},_updateRightPanel:function(e){e=e||{};var t,n=this,a=n._frame,i=e.action||R,o=e.xAppTag,r=o&&n.getxApp({tag:o}),l=e.xAppData,c=!!e.maximize,p=!!e.minimize,d=!!e.closeLeftPanel;return i===R&&(i=a.isPanelOpen(x)?F:k),i===k?(n._visibleApp=o,n._activateSelectedxAppTopMenu(r),t=s.all([a.openPanel(x,{maximize:c,minimize:p,closeOppositePanel:d,xAppTag:o,xAppData:l}),n._showApp(o,l,x)])):(n._visibleApp=null,t=a.closePanel(x,{xAppTag:o}).then((function(){n._deactivateActiveTopMenu()}))),t},updateRightPanelData:function(e){e=e||{};var t=this._frame,n=e.xAppTag,a=e.xAppData;return t.isPanelOpen(x)?this._loadModules(["DS/UWPClientCode/PublicAPI"]).then((function(e){var t=e[0],i=t.getDashboardRightPanelVisibility({platformId:window.dsTenantId});i&&i.xAppTagToShow===n&&t.setDashboardRightPanelVisibility({xAppTagToShow:n,xAppDataToShow:a,isMaximized:i.isMaximized,show:!0,platformId:window.dsTenantId})})):s.resolve()},_manageCompass:function(){var e,t,n;function a(){clearTimeout(n),e.removeClassName("compass-force-show"),t.removeEvent("transitionEnd",a)}e=document.querySelector("#compass_ctn"),this._isCompassVisible?e&&e.addClassName("compass-force-show"):(P.hideAccordion(),e&&(t=e.getElement(".compass-base"))&&(t.addEvent("transitionEnd",a),n=setTimeout(a,350)))},_activateLegal:function(){var t,n=this,a=n.options;if(a.activateLegal){var i=a.startupParams||{},o=a.myAppsBaseUrl||"",s=a.legal&&e.is(a.legal,"array"),r={myAppsBaseUrl:o,renderFooter:!0,footerContainer:n.appContainer,onAccept:null,legal:i.legal,swym:i.swym,onFailure:null,onAboutClick:n.openAboutDialog.bind(n),legalTenantId:n._tenantId};t=e.extend(r,l.pick(a,{onFailLegal:"onFailure",onAcceptLegal:"onAccept",myAppsBaseURL:"myAppsBaseUrl"},"renderFooter","legal")),n.isPublicCloud().then((function(e){s&&(t.legal=t.legal.filter((function(e){return e.id&&e.id===n._tenantId})),e&&a.legal.push({id:"3DS",displayName:"Dassault Systmes",acceptedDP:!0,dp:"https://www.3ds.com/privacy-policy/",ressourceType:"url",footerDisplay:c(t.legal)})),b.init(t),n._legalPromise.resolve()})).catch(E)}function c(t){var n=!1;return e.is(t,"array")&&(n=t.some((function(e){return!0===e.footerDisplay}))),n}},_onSearch:function(e){var t=this,n=t._frame;t._currentSearchQuery=e||"",(n.isPanelMaximized(x)||n.isPanelFitted(x))&&t._propagateSearch(e)},_onRightPanelChange:function(){var e=this,t=e.options||{},n=e.getPanelState(x),a=e.getPanelState(M),i=n!==e._previousRightPanelState,o=e._frame.getShownTag(x),s=o!==e._previousRightPanelXApp;function r(t){if(v){var n=v.get6WTagger("RightPanelContext");if(n)if(t){var a=Object.assign({},e.XAPPS,e._externalApps),i=e._visibleApp,o=(a&&i&&a[i]||{}).widget;o&&o.id?n.setAsCurrent().focusOnCC(o.id):n.unfocusCC()}else n.unfocusCC()}}if(e._previousRightPanelState=n,e._previousRightPanelXApp=o,n===O)e._visibleApp=null,i&&(r(!1),e._propagateSearch(""));else if(n===U){if(i||s){if(a===L)return;r(!1),e._propagateSearch("")}i&&"function"==typeof t.onRightPanelMinimize&&t.onRightPanelMinimize()}else n!==N&&n!==L||((i||s)&&(r(!0),e._propagateSearch()),i&&"function"==typeof t.onRightPanelMaximize&&t.onRightPanelMaximize())},_onLeftPanelChange:function(){var e=this,t=e.options||{},n=e.getPanelState(x),a=e.getPanelState(M),i=a!==e._previousLeftPanelState,o=n!==e._previousRightPanelState,s=e._frame.getShownTag(x),r=s!==e._previousRightPanelXApp;function l(t){if(v){var n=v.get6WTagger("RightPanelContext");if(n)if(t){var a=Object.assign({},e.XAPPS,e._externalApps),i=e._visibleApp,o=(a&&i&&a[i]||{}).widget;o&&o.id?n.setAsCurrent().focusOnCC(o.id):n.unfocusCC()}else n.unfocusCC()}}if(e._previousLeftPanelState=a,e._previousRightPanelState=n,e._previousRightPanelXApp=s,a===U&&n===U){if(o||r){if(n===L)return;l(!1),e._propagateSearch("")}o&&"function"==typeof t.onRightPanelMinimize&&t.onRightPanelMinimize()}else a!==N&&a!==L&&a!==U||((i||r)&&(l(!0),e._propagateSearch()),o&&"function"==typeof t.onRightPanelMaximize&&t.onRightPanelMaximize());a===U&&i?"function"==typeof t.onLeftPanelMinimize&&t.onLeftPanelMinimize():a===N&&i&&"function"==typeof t.onLeftPanelMaximize&&t.onLeftPanelMaximize()},_onRightPanelStateChange:function(){return console.warn("TopFrame#_onRightPanelStateChange is a @private and a @deprecated method."),this._onRightPanelChange()},_propagateSearch:function(t){var n,a,i=(e.Widgets||{}).instances||[];for(n=0;n<i.length;n++)"sidepanel"===(a=i[n].environment).name&&a.propagateSearch(e.is(t,"string")?t:this._currentSearchQuery)},_isAuthenticated:function(){return!!y.options.userId},_isPublicCloud:function(){var e=null,t=this.options,n=t.cloudType,a=t.isCloud,i=[],o=!1;return function(){var t=this;if(!t._isAuthenticated())return s.resolve(!1);if("boolean"==typeof e)return s.resolve(e);if(void 0===a&&void 0===n){if(o){var r=s.deferred(),c=r.promise;return i.push(r),c}return o=!0,new s((function(n,a){function s(e,t){i.forEach((function(n){n[e](t)})),i=[]}var r=l.buildPath(t._getPassportUrl(),"/api/authenticated/user/fields");require([["DS","WAFData","WAFData"].join("/")],(function(t){t.authenticatedRequest(r,{method:"GET",headers:{Accept:"application/json","Content-type":"application/json"},onComplete:function(t){try{e=!!JSON.parse(t).fields.dpp_consent}catch(t){e=!1}o=!1,s("resolve",e),n(e)},onFailure:function(e){window.console&&window.console.error(e),o=!1,s("reject",e),a(e)}})}),(function(e){window.console&&(window.console.error("WAFData can not be required ..."),window.console.error(e)),o=!1,s("reject",e),a(e)}))}))}return"true"===a&&"public"===n?(e=!0,s.resolve(e)):(e=!1,s.resolve(e))}},_getPassportUrl:function(){return this._passportUrl},activateLegal:function(){this._activateLegal()},openPanel:function(t,n){n||(n={});var a,i=this,o=i._frame,r=i.XAPPS,l=n.appId,c=n.tag,p=n.maximize,d=n.minimize;if(n.fit&&(p=!0),!ue(t))return s.reject();if(t===x){for(var u in r){if(r.hasOwnProperty(c))if(l===r[u].id||c===u){a=u;break}}if(!a&&l&&!((a=l)in i._externalApps)){var m=e.createElement("div",{class:"external-app "+a});i._externalApps[a]={id:a,content:m,isLoaded:!1,loadPromise:null,widget:null},o.extendPanelContent(x,a,m)}return a?i._updateRightPanel({action:k,xAppTag:a,xAppData:n.data,maximize:p,minimize:d}):(e.log("App does not exist in side panel."),s.reject())}return s.reject("Unknown panel: "+t)},closePanel:function(e){return e===M?this._updateLeftPanel({action:F}):e===x?this._updateRightPanel({action:F}):s.reject("Unknown panel: "+e)},isPanelOpen:function(e){return this._frame.isPanelOpen(e)},getPanelApp:function(e){if(ue(e))return e===x?this._visibleApp:void console.error("Unknown panel: "+e)},minimizeSidePanel:function(){var e=this._frame;return e.isPanelMaximized(x)||e.isPanelFitted(x)?e.openPanel(x,{minimize:!0}):s.resolve()},initResizeEvent:function(){i.addEvent.call(window,"resize",function(){this.resize()}.bind(this))},removeResizeEvent:function(){i.removeEvent.call(window,"resize",this.resizeHandler)},resize:function(){var e=this,t=window.innerHeight||document.documentElement.clientHeight;t!==e.viewportHeight&&(e.appContainer.setStyle("height",t-44),e.viewportHeight=t)},openAboutDialog:function(){var t=this,n=t.options,a=e.createElement,i=null,o=a("div",{class:"template-cont"}),s=a("div",{class:"template-header"});function r(){o.empty(),o.classList.remove("support","mobile-pairing","about"),o.addClassName("update-planned"),o.setStyle("padding","0px"),o.setStyle("height","auto"),i.getFooter().hide(),a("img",{class:"info-img-updatePlanned",src:S.getWebappsAssetUrl("TopFrame","images/banner-upgrade.jpg"),alt:I.aboutItem}).inject(o);var n=t.clusterUpgrade_infoObj;t._setUpgradeMessage(n).then((function(a){e.createElement("div",{class:"update-planned-description",html:n.overloadMessage?n.overloadMessage:a}).inject(o),new A({className:"update-planned-btn primary",value:I.cloudComunityButton,events:{onClick:function(){t._openUrlInBlankTab({url:n.postURL,modalTitle:I.cloudComunityButton,modalButton:I.cloudComunityButton})}}}).inject(o)}))}function l(){require(["DS/Latency/SupportDialogBuilder"],(function(e){e.build({container:i,tenantId:t._tenantId,buildDeploy:n.numberAbout})}))}function c(){var e;o.empty(),o.removeClassName("support"),o.removeClassName("mobile-pairing"),o.removeClassName("update-planned"),o.addClassName("about"),o.setStyle("padding","0px"),o.setStyle("height","auto"),i.getFooter().hide(),e=[n.appNameAbout,n.numberAbout].filter((function(e){return e})).join(" - "),a("img",{class:"info-img",src:S.getWebappsAssetUrl("TopFrame","images/about-empty.png"),alt:I.aboutItem}).inject(o),a("div",{html:n.brandAbout,class:"message title"}).inject(o),a("div",{text:e,class:"message"}).inject(o),t._legalPromise.promise.then((function(){var e=b._legal;e.buildFooter({acceptedTou:e.acceptedTou,acceptedDp:e.acceptedDp,acceptedCookies:e.acceptedCookies}).inject(o)}))}function p(){var n=t.options;t._loadModules(["DS/UWPClientCode/PublicAPI"]).then((function(t){var a=t[0].getApplicationConfiguration("app.urls.registry");require(["DS/MobilePairing/MobilePairing"],(function(t){t.buildMobilePairingDialog(i,e.extend(n,{registryBaseURL:a}))}))}))}i instanceof w?i.show():(i=new w({header:s,body:o,visible:!0,closable:!0,className:"ifwe-about-dialog",renderTo:document.body,events:{onHide:function(){i.destroy()}}}),function(){var n,a=e.createElement;function i(e,t,n,a){return{tag:"div",class:"about-tab-element "+e,html:[{tag:"span",class:"fonticon fonticon-"+t},{tag:"span",class:"title",text:n,title:n}],events:{mouseenter:function(){this.addClassName("bg-primary")},mouseleave:function(){this.hasClassName("selected")||this.removeClassName("bg-primary")},click:a}}}function o(e){var t=s.getElementsByClassName("about-tab-element selected");t[0].removeClassName("bg-primary"),t[0].removeClassName("selected"),this.addClassName("selected"),e()}a("h4",{text:I.aboutItem}).inject(s),n=[i("aboutElement "+(t.clusterUpgrade_infoObj&&void 0!==t.clusterUpgrade_infoObj.plannedDate&&t.clusterUpgrade_infoObj.plannedDate>0?"":"bg-primary selected"),"info",I.about,(function(){o.call(this,c)})),i("supportElement","lifebuoy",I.support,(function(){o.call(this,l)})),i("mobilePairing","component",I.mobilePairing,(function(){o.call(this,p)}))],t.clusterUpgrade_infoObj&&void 0!==t.clusterUpgrade_infoObj.plannedDate&&t.clusterUpgrade_infoObj.plannedDate>0&&n.splice(0,0,i("updatePlanned bg-primary selected","info",I.updatePlanned,(function(){o.call(this,r)}))),a("div",{html:n,class:"info-tab"}).inject(s)}(),t.clusterUpgrade_infoObj&&void 0!==t.clusterUpgrade_infoObj.plannedDate&&t.clusterUpgrade_infoObj.plannedDate>0?r():c())},isTaggerVisible:function(){return this._isTaggerVisible},getxApp:function(e){var t,n=this.XAPPS;return e.tag?t=n[e.tag]:e.id&&(t=Object.values(n).find((function(t){return t.id===e.id}))),t},getEnabledContentxAppTags:function(e){var t=this,n=t._contentApps;return e&&(e.includes("EPA")?(n.partSupplyEPA=!0,n.partSupplyEPU=!1,n.partSupply=!1):e.includes("EPU")&&(n.partSupplyEPA=!1,n.partSupplyEPU=!0,n.partSupply=!1),e.includes("CSV")&&(n.space=!0,n.bookmarkEditor=!0)),"OnPremise"===t._tenantId&&(n.content=!1),Object.keys(n).filter((function(e){return n[e]&&!!t.getxApp({tag:e})}))},_activateTopMenu:function(e){var t=e.activate,n=m.view.children.rightMenuBar,a=n.subViews.find(e.findTopMenu);a&&(t?(n._onItemViewActivate(),a.activate()):a.deactivate())},_deactivateActiveTopMenu:function(){this._activateTopMenu({activate:!1,findTopMenu:function(e){return e.isActive()}})},_activateSelectedxAppTopMenu:function(e){e?this._activateTopMenu({activate:!0,findTopMenu:function(t){var n=t.model.id;return n===e.tag||n===e.topMenuId}}):this._deactivateActiveTopMenu()}}),y.LEFT_PANEL=M,y.RIGHT_PANEL=x,y.OPEN_PANEL_ACTION=k,y.CLOSE_PANEL_ACTION=F,y.TOGGLE_PANEL_ACTION=R,y.PROFILE_TOPMENU_ID="profile",y.ADD_TOPMENU_ID="add",y.SHARE_TOPMENU_ID="share",y.HOME_TOPMENU_ID="home",y.HELP_TOPMENU_ID="help",y.CONTENT_TOPMENU_ID=j,y.SOCIAL_TOPMENU_ID=B,y.NOTIFICATION_TOPMENU_ID=z,y.ENOV_TASKS_TOPMENU_ID=V,y.NOTIFICATION_XAPP_TAG=Y,y.CONTENT_XAPP_TAG=q,y.SOCIAL_XAPP_TAG=X,y.SEARCH_XAPP_TAG=G,y.MESSAGING_XAPP_TAG=K,y.MAKE_XAPP_TAG=W,y.BOOKMARD_EDITOR_XAPP_TAG=te,y.X3DSPACE_XAPP_TAG=H,y.PARTSUPPLY_XAPP_TAG=Q,y.PARTSUPPLY_EPA_XAPP_TAG=Z,y.PARTSUPPLY_EPU_XAPP_TAG=$,y.ADVANCEDFILTER_XAPP_TAG=ee,y.SCIENTIFIC_SI_XAPP_TAG=J,y.A2X_SHADOW_XAPP_TAG=ne,y.XLEARNAPP_XAPP_TAG=ae,y.ENOV_TASKS_XAPP_TAG=ie,y})),define("TopFrame",["TopFrame/TopFrame"],(function(e){"use strict";return e})),define("TopFrame/TopFrame",["DS/TopFrame/TopFrame"],(function(e){"use strict";return e})),define("TopFrame",["TopFrame/TopFrame"],(function(e){"use strict";return e})),define("TopFrame/TopFrame",["DS/TopFrame/TopFrame"],(function(e){"use strict";return e})),window.dsDashboardWindow={topPlatformWindow:null,get parent(){try{if(window.parent.document)return window.parent}catch(e){return window.self}},get top(){if(this.topPlatformWindow)return this.topPlatformWindow;this.topPlatformWindow=window;try{for(;this.topPlatformWindow.parent&&this.topPlatformWindow!==this.topPlatformWindow.parent;)try{if(this.topPlatformWindow.parent.document,this.topPlatformWindow.wap&&this.topPlatformWindow.top&&!this.topPlatformWindow.top.wap)break;this.topPlatformWindow=this.topPlatformWindow.parent}catch(e){break}}catch(e){console.warn("Erreur while searching top window:",e)}return this.topPlatformWindow}},window.dsDashboardWindow.top,define("DS/TopFrame/Components/AppSwitcherMenu",["UWA/Core","UWA/Class/View","DS/UIKIT/DropdownMenu","DS/TopFrame/CompassAPI"],(function(e,t,n,a){"use strict";var i=function(){},o={},s=t.extend({tagName:"div",className:"tf-app-switcher-menu-cmp",_events:{onItemClick:i,onMenuShow:i,onMenuHide:i,onSetActiveAppName:i},_menu:null,_appIds:[],_selectedAppId:"",_activeAppName:"",setup:function(e){var t=this;t._appIds=e.appIds,t._selectedAppId=e.selectedAppId,t._events={},t._events.onItemClick=e.onItemClick||i,t._events.onMenuShow=e.onMenuShow||i,t._events.onMenuHide=e.onMenuHide||i,t._events.onSetActiveAppName=e.onSetActiveAppName||i},render:function(t){t=t||{};var a,i,o,s=this,r=s.container,l=s.elements;return a=l.activeAppName=e.createElement("div",{class:"active-app-name"}),i=l.openIcon=e.createElement("div",{class:"app-switcher-open-icon fonticon fonticon-down-open"}),r.addContent([a,i]),o={className:["tf-app-switcher-dd-menu",t.className||""].join(" "),renderTo:t.renderMenuTo||document.body,target:r,position:t.position||"bottom left",offset:t.offset||{x:0,y:0},items:[],contextual:!1,bound:!0,closeOnClick:!0,removeOnHide:!0,responsiveMode:!0,scrollMode:!0,events:{onClick:s._onItemClick.bind(s),onShow:s._onMenuShow.bind(s),onHide:s._onMenuHide.bind(s)}},s._menu=new n(o),s._fetchAppsInfo(),s},getActiveAppName:function(){return this._activeAppName},destroy:function(){var e=this;e._menu&&e._menu.destroy(),e._menu=null,e._events=null,e._appIds=null,e._selectedAppId="",e._activeAppName="",e._parent.apply(e,arguments)},_fetchAppsInfo:function(){var e,t=this;return e=t._appIds.map((function(e){return a.getAppInfo({appId:e}).then((function(n){var i=e===t._selectedAppId;n=Object.assign(n,o[e]||{});var s=[a.appIds.partSupplyEPA,a.appIds.partSupplyEPU].includes(e)?n.title.split(" ")[0]:n.title;t._menu.addItem({id:e,name:e,text:s||"",className:["app-item","app-item-"+e].join(" "),icon:n.icon||"",selected:i}),i&&t._setActiveAppName(n.title||"")})).catch((function(e){console.log(e)}))})),Promise.all(e)},_setActiveAppName:function(e){var t=this;t._activeAppName=e,e=e.split(" ")[0],t.elements.activeAppName.setText(e),t._events.onSetActiveAppName.apply(t,arguments)},_onMenuShow:function(){var e=this;e.container.addClassName("active"),e._events.onMenuShow.apply(e,arguments)},_onMenuHide:function(){var e=this;e.container.removeClassName("active"),e._events.onMenuHide.apply(e,arguments)},_onItemClick:function(){this._events.onItemClick.apply(this,arguments)}});return s})),define("DS/TopFrame/Environment",["UWA/Core","UWA/Element","UWA/Environment","UWA/Storage","DS/TopFrame/TopFrame","DS/TopFrame/CompassAPI","DS/TopFrame/Components/AppSwitcherMenu","DS/TopFrame/LocalStorageManager","DS/TopFrame/Utils","DS/TopFrame/Views/Message","i18n!DS/TopFrame/assets/nls/topFrame"],(function(e,t,n,a,i,o,s,r,l,c,p){"use strict";var d=n.extend({name:"boot",init:function(t){var n=this;n.wp=e.merge({isVisible:!0},t),n.html={},n.Features={},n.view={},n.data=t&&t.data||{},n.options={defaultView:{type:"windowed"}},n.html.module=t.el,n.buildSkeleton(),n.dispatchInit(),n.showLoadingView()},loadWidget:function(t,n){var a,i,s=this,r=s.wp,l=r.widgetId;if(n=e.extend({onFailure:function(e){throw e},onTimeout:function(e){throw e},onComplete:function(){}},n),r.isolationLevel){if(s.loadEmbeddedWidget(l||t,n),a=s.embedded){if(r.appId===o.appIds.partSupply){i=setTimeout((function(){console.error("Load timeout for "+r.appId),s.showErrorView()}),45e3)}a.addEvent("onLoad",(function(){clearTimeout(i),s.hideLoadingView(),s.hideErrorView(),a.launched=!0,s.launched=!0})),a.addEvent("onRegisterWidget",(function(){a.launched=!1,s.launched=!1}))}s.dispatchEvent("onRegisterWidget")}else s.loadInlinedWidget(l||t,n),s.launched=!0,s.hideLoadingView(),s.hideErrorView();if(r.appId===o.appIds.a2xShadow){var c=r.el.querySelector("iframe");window.top.dsA2X={frame:c}}return r.data.shadowSocialApp&&(s.html.module.addClassName("swym-navigation-widget hidden"),require([["DS","PubSub","PubSub"].join("/")],(function(e){e.dispatch("PlatformNavigationReady",s)}))),s},loadInlinedWidget:function(e,t){var n=this.getWidget(),a=t.fetcher;return n.id=this.wp.id,a.title=this.wp.title,n.setStyle(a.style),delete t.fetcher.style,this._parent(e,t)},loadEmbeddedWidget:function(n,a){var i,o;return this.getWidget().id=this.wp.id,a.cache=this.wp.checksum,i={id:this.wp.id,appId:this.wp.appId,token:this.wp.token,lang:l.getCurrentLanguage(),displayEdit:!1,exposition:2===this.wp.isolationLevel?e.hosts.untrustedExposition:e.hosts.exposition,debugMe:e.debug?1:null},a.embedded=e.extend(a.embedded||{},i),this._parent(n,a),o=this.embedded.elements.iframe,t.setAttributes.call(o,{width:"",height:"",scrolling:"auto"}),t.setStyles.call(o,{width:"0",height:"0",minWidth:"100%",minHeight:"100%"}),this},buildSkeleton:function(){var t=this.wp,n=e.createElement,a=this.html;require([["DS","Dashboard","Navigation"].join("/")],(function(e){if(e.shouldRemoveTopbar()){var t=document.querySelector(".main > .app-content.moduleLayout");t&&(t=t.parentElement),t&&t.classList.add("hl")}})),a.module.hasClassName("module")||(a.module=n("div",{class:"module"}).inject(a.module)),a.module.addClassName("wi-"+this.wp.id),a.wrapper=n("div",{class:"moduleWrapper"}).inject(a.module),t.isContainer?(a.body=a.wrapper,a.module.addClassName("moduleLayout")):a.body=n("div",{class:"moduleContent w-"+t.widgetId}).inject(a.wrapper)},setVisible:function(e,t){var n=this.wp,a=this.getWidget();(n.isVisible!==e||t)&&(n.isVisible=!!e,a.dispatchEvent(e?"onShow":"onHide"))},onRegisterWidget:function(){this.registered||this._parent()},propagateSearch:function(e){var t,n,a=this.wp,i=this.widget;if(a&&(t=a.children,i&&(e?i.dispatchEvent("onSearch",e):i.dispatchEvent("onResetSearch"),i.shouldPropagateSearch=!0,i.shouldPropagateSearchArg=e),a.isContainer&&(a.shouldPropagateSearch=!0,a.shouldPropagateSearchArg=e,void 0!==t)))for(n=t.length-1;n>=0;n--)t[n].widget&&t[n].widget.environment.propagateSearch(e)}}).extend({name:"sidepanel",init:function(){var t=this;t.components={},t.overwriteTitle=!1,t._parent.apply(t,arguments),e.extend(t.options,{defaultView:{type:"sidepanel"}})},buildSkeleton:function(){var t=this,n=t.html,a=t.data,i=e.createElement;t._parent.apply(t,arguments),!1!==a.header&&(n.header=i("div",{class:"moduleHeader"}).inject(n.wrapper,"top"),n.headerLeft=i("div",{class:"moduleHeader__left"}).inject(n.header),n.headerMiddle=i("div",{class:"moduleHeader__middle"}).inject(n.header),n.title=i("div",{class:"moduleHeader__title"}).inject(n.headerMiddle)),a.title&&(t.onUpdateTitle(a.title),t.overwriteTitle=!0),t.buildAppSwitcher()},buildAppSwitcher:async function(){var e,t,n=this,a=n.wp.appId,o=i.getxApp({id:a}),l=n.html,c=[],p=function(){},d=await i.getCurrentUserRoles();o&&(o.topMenuId===i.CONTENT_TOPMENU_ID&&(c=i.getEnabledContentxAppTags(d),p=r.setLastLoadedxAppContentTopMenu),(e=c.map((function(e){return(i.getxApp({tag:e})||{}).id})).filter((function(e){return e}))).length<2||(t=new s({selectedAppId:a,appIds:e,onItemClick:function(e,t){var n=t.id;if(a!==n){var o=(i.getxApp({id:n})||{}).tag||"";i.openPanel(i.RIGHT_PANEL,{tag:o}),p(o)}},onSetActiveAppName:function(){n.onUpdateTitle(n.wp.title)}}),n.components.appSwitcherMenu=t,t.render({offset:{x:0,y:-5}}).inject(l.headerLeft)))},onRegisterWidget:function(){this.registered||(this.data=new a({adapter:"Object",database:"preference"+this.wp.id}))},afterLoad:function(){var e,t;try{e=this.embedded&&this.embedded.elements.iframe.contentDocument}catch(e){}e&&(t=e.querySelector(".moduleContent"))&&t.classList.add("environment-"+this.name),this.onViewRequest(this.options.defaultView)},toggleFit:function(){var e=this;e.view.next||e.onViewRequest({type:e.isFitted()?"windowed":"fitted"})},isFitted:function(){var e=this.view.current;return!!e&&"fitted"===e.event.type},onUpdateTitle:function(e){e=e||"";var t=this,n=t.html,a=t.components.appSwitcherMenu;if([o.appIds.partSupplyEPA,o.appIds.partSupplyEPU,o.appIds.scientificSI].includes(t.wp.appId)&&(t.overwriteTitle=!0),t.overwriteTitle?e=t.wp.title:(e=e.trim(),t.wp.title=e),a){var i=a.getActiveAppName();e.includes(i)&&e!==i&&(e=e.replace(i,"").trim()),[o.appIds.partSupplyEPA,o.appIds.partSupplyEPU].includes(t.wp.appId)&&(e=e.split(" ")[0])}n.title&&(n.title.setText(e),n.title.offsetWidth<n.title.scrollWidth&&n.title.setAttribute("title",e))},onUpdatePreferences:function(){this._onUpdateValues&&this._onUpdateValues.apply(this,arguments),this._parent.apply(this,arguments)},onUpdateValue:function(){this._onUpdateValues&&this._onUpdateValues.apply(this,arguments),this._parent.apply(this,arguments)},showErrorView:function(e){e=e||{};var t=this,n=t.components;n.errorView&&n.errorView.destroy(),t.hideLoadingView();var a=new c({title:e.title||p.xAppErrorTitle,content:e.content||p.xAppErrorContent,icon:e.icon||"fonticon-offline"});a.render({className:"wi-error-msg-view"}).inject(t.html.module),n.errorView=a},hideErrorView:function(){var e=this.components.errorView;e&&e.hide()},showLoadingView:function(e){e=e||{};var t=this,n=t.components;n.loadingView&&n.loadingView.destroy();var a=new c({title:e.title||p.loading,content:e.content,icon:e.icon});a.render({className:"wi-loading-msg-view"}).inject(t.html.module),t.components.loadingView=a},hideLoadingView:function(){var e=this.components.loadingView;e&&e.hide()},destroy:function(){var e=this;Object.keys(e.components||{}).forEach((function(t){"function"==typeof t.destroy&&t.destroy(),delete e.components[t]})),e.components=null,e._parent.apply(e,arguments)}});return d.prototype.views.sidepanel=n.AbstractView.extend({enter:function(){this.dispatchEvent("onEnter")},onEnter:function(){}}),d}));