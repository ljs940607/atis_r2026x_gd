define("DS/RTVueUserPresenceAPI/PresenceConstants",[],(function(){"use strict";return{PRESENCE_LIST:["Online","Busy","DND","Away","Offline","OOO"],PRESENCE_APPEAR_NLS:{away:"appearAway",offline:"appearOffline",ooo:"appearOOO"},PRESENCE_ICONS:{online:"fonticon-status-ok",busy:"fonticon-record",dnd:"fonticon-status-noway",away:"fonticon-status-clock",offline:"fonticon-status-empty",ooo:"fonticon-status-out-of-office",unknown:"fonticon-status-empty"},PRESENCE_COLORS:{online:"#57B847",busy:"#EA4F37",dnd:"#EA4F37",away:"#FEE000",offline:"#ADADAD",ooo:"#9B2C98"}}})),define("DS/RTVueUserPresenceAPI/RTVueRawUserPresenceAPI",["DS/RTStore/RTStore","UWA/Data","i18n!DS/RTVueUserPresenceAPI/assets/nls/userpresence","DS/VueUserPresenceAPI/VueUserPresenceAPI","DS/RTVueUserPresenceAPI/PresenceConstants","DS/RTInterface/RTInterface","vu-kit"],(function(e,t,s,n,r,i,a){const{PRESENCE_LIST:l,PRESENCE_APPEAR_NLS:o,PRESENCE_ICONS:u,PRESENCE_COLORS:c}=r,p=85536e5,h=864e5,m=36e5;return{name:"vu-rtuserpresence",components:{"vu-userpresence":n},data:()=>({timelapsInterval:null,timelaps:0}),props:{login:{type:String,required:!0},tenantId:{type:String,required:!0},swymUrl:{type:String,required:!1},noTooltip:{type:Boolean,default:!0},staticPresence:{type:String,default:null},presenceStringOnly:{type:Boolean,default:!1}},created(){this.swymUrl&&!e.store.getters.swymUrl&&e.store.dispatch("swymUrl",{swymUrl:this.swymUrl})},computed:{avatarUrl(){let s=(this.swymUrl||e.store.getters.swymUrl)+"/api/user/getpicture/login/"+this.login;return e.store.getters.isMobile?t.proxifyUrl(s,{proxy:"passport"}):s},user(){return e.bridge.users(this.login,this.tenantId)},presence(){return this.staticPresence||this.user&&(this.user.presence||this.user.status||"unknown").toLowerCase()},fonticon:function(){return this.presence&&u[this.presence]},color(){return this.presence&&c[this.presence]},additionalLabels(){return this.user&&this.user.additionalLabels},startDate(){return this.user&&this.user.startDate&&new Date(this.user.startDate)},endDate(){return this.user&&this.user.endDate&&new Date(this.user.endDate)},simpleLabelsString:function(){return this.additionalLabels&&this.additionalLabels.length>0&&this.additionalLabels.map((e=>s[e])).filter((e=>!!e)).join("")||""},timelapsStart:function(){return this.startDate?this.setTimelaps():this.clearTimelaps(),!!this.startDate},timelapsString:function(){if(!this.timelaps)return null;let e=this.timelaps;if(e>=p)return s.sinceMoreThan99Days;const t=Math.floor(e/h);if(t>1)return s.sinceSeveralDays.replace("{timelaps}",t);if(1===t)return s.sinceOneDay;e%=h;const n=Math.floor(e/m);if(n>1)return s.sinceSeveralHours.replace("{timelaps}",n);if(1===n)return s.sinceOneHour;e%=m;const r=Math.floor(e/6e4);return r>=1?s.sinceSeveralMinutes.replace("{timelaps}",r):s.sinceSeveralSeconds},endDateString:function(){return"ooo"===this.presence&&this.endDate&&s.untilDate.replace("{endDate}",this.endDate.toLocaleDateString(s._lang,{year:"numeric",month:"numeric",day:"numeric"}))||null},presenceString:function(){return`${this.presence&&(s[this.presence]||s.offline)}${this.staticPresence?"":this.endDateString||this.timelapsStart&&this.timelapsString||this.simpleLabelsString||""}`},statusMenu:function(){return{label:s.myStatus,submenu:this.statusMenuList,icon:this.getIcon(this.presence)}},statusMenuList:function(){return l.map((e=>{let t=e.toLowerCase();return{key:t,name:e,nls:this.getStatusForMenuNLS(t),icon:this.getIcon(t),color:this.getColor(t),onclick:()=>{this.setMyStatus(t)},selected:!!this.login&&t===this.presence}}))},icons:function(){return u},colors:function(){return c},statusList:function(){return l}},methods:{getIcon(e="offline"){let t=e.toLowerCase();return u[t]},getColor(e="offline"){let t=e.toLowerCase();return c[t]},getStatusNls(e="offline"){let t=e.toLowerCase();return s[t]},getStatusForMenuNLS(e){let t=e.toLowerCase();return o[t]&&s[o[t]]||s[t]},setMyStatus(e){let t=e?.toLowerCase();if(!t||!u[t])return console.error("RTVueUserPresenceAPI presence unkown "+e);i.send({evenement:"SETSTATUS",data:{myStatus:t}},"fromwidgetim.ds.com")},clearTimelaps(e=!1){clearInterval(this.timelapsInterval),this.timelapsInterval=null,e||(this.timelaps=0)},setTimelapsDays(){clearInterval(this.timelapsInterval),this.timelapsInterval=setInterval((()=>{this.timelaps=Date.now()-this.startDate,this.timelaps>=p&&this.clearTimelaps(!0)}),h)},setTimelapsHours(){clearInterval(this.timelapsInterval),this.timelapsInterval=setInterval((()=>{this.timelaps=Date.now()-this.startDate,this.timelaps>=h&&this.setTimelapsDays()}),m)},setTimelapsMinutes(){clearInterval(this.timelapsInterval),this.timelapsInterval=setInterval((()=>{this.timelaps=Date.now()-this.startDate,this.timelaps>=m&&this.setTimelapsHours()}),6e4)},setTimelaps(){this.timelapsInterval||(this.timelaps=Date.now()-this.startDate,this.timelaps>h?this.setTimelapsDays():this.timelaps>m?this.setTimelapsHours():this.setTimelapsMinutes())}},template:'<vu-userpresence\n        :presence="presence"\n        :src="avatarUrl"\n        :noTooltip="noTooltip"\n        :presenceString="presenceString"\n        :fonticon="fonticon"\n        :presenceStringOnly="presenceStringOnly"\n    />'}})),define("DS/RTVueUserPresenceAPI/RTVueUserPresenceAPI",["vuejs","vu-kit","DS/RTVueUserPresenceAPI/RTVueRawUserPresenceAPI"],(function(e,t,s){var n=e.component("vu-rtuserpresence",s);return n.vue3cmp=s,n}));