/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/PIMwebUX/PIMwebGroupDefinitionPanelView",["UWA/Core","UWA/Class","DS/Controls/LineEditor"],(function(e,t,i){"use strict";return t.extend({init:function(t){var n=t.parent,a=t.editorText?t.editorText:"",l=e.createElement("div"),s=new i({disabled:!0,value:a,requiredFlag:!0,selectAllOnFocus:!0,autoCommitFlag:!0}).inject(l);s.elements.container.setStyles({width:"100%"}),s.elements.container.childNodes[0].setStyles({width:"100%"}),n.content=l,this.setEditorText=function(e){s.value=e},this.destroy=function(){l&&l.parentNode&&l.parentNode.removeChild(l),l=s=null}}})})),define("DS/PIMwebUX/PIMwebIsrContextGroupView",["UWA/Core","UWA/Class","DS/UIKIT/Iconbar","DS/CoreEvents/Events","DS/DataGridView/DataGridView","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/LineEditor","DS/WebappsUtils/WebappsUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrContextGroupView","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],(function(e,t,i,n,a,l,s,o,r,d,u,c){"use strict";return t.extend({init:function(t){this.groupTitle=t.groupTitle,this.dialog=t.dialog,this.htmlParent=t.htmlParent,this.id=t.id;var o=t.productContext,r=t.ctrl,d=this;d.tokenCSO={},d.groupDefinitionDialog=null,d.isFilter=!!t.isFilter&&t.isFilter;var u=!!t.readOnly&&t.readOnly;d.isEmpty=!0;var f,g,p;var h=function(){d.model&&(d.model.removeRoots(),d.model=null),d.dataGridListViewDiv&&d.dataGridListViewDiv.remove(),d.dataGridListViewDiv=null,d.groupContent&&d.groupContent.remove(),d.groupContent=null,d._groupDefinitionDialog&&(d._groupDefinitionDialog.editor&&(d._groupDefinitionDialog.editor.remove(),d._groupDefinitionDialog.editor=null),d._groupDefinitionDialog.remove(),d._groupDefinitionDialog=null),n.publish({event:"onContextGroupRemoved",data:d})};this.removeGroupView=function(){h()},this.addInfoInGroup=function(e){!function(e){if(e&&e.length){d.model.prepareUpdate(),d.isFilter&&(d.model.removeRoots(),0!==d.model.getRoots().length&&1!==e.length&&(d.isFilter=!1));for(var t=0;t<e.length;t++){var i=new l({id:e[t].id,label:e[t].label,icons:e[t].icons,pathElement:e[t].pathElement});d.model.addRoot(i)}d.model.pushUpdate(),d.isEmpty=!1,f.getElementsByTagName("h6")[0].getElementsByTagName("span")[0].hide(),n.publish({event:"onElemAddedInGroup",data:d})}}(e)},this.getGroupInfo=function(){var e,t={},i=d.model.getRoots();if(!i.length)return t;for(t.isFilter=d.isFilter,t.Elements=[],e=0;e<i.length;e++)t.Elements.push({id:i[e]._options.id,label:i[e]._options.label,icons:i[e]._options.icons,pathElement:i[e]._options.pathElement});return t},f=e.createElement("div",{class:"PIMwebGroupTitleWithIconbar",html:[{tag:"h6",html:[d.groupTitle+" # "+this.id+"  ",{tag:"span",class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}]}]}),u||(g=new i({renderTo:f,items:[{id:"product",fonticon:"product",text:c.isrCtxGroupSelectProduct,handler:function(){r&&r.addElementsInGroup(o.id,d)}},{id:"filter",text:c.isrCtxGroupSelectFilter,fonticon:"filter",handler:function(){r&&r.searchFilters(o.id).then((function(e){!function(e){if(e){d.model.prepareUpdate(),d.model.removeRoots(),d.isFilter=!0;var t=new l({label:e[0].alias,id:e[0].id,icons:e[0].icons});d.model.addRoot(t),d.model.pushUpdate(),d.isEmpty=!1,f.getElementsByTagName("h6")[0].getElementsByTagName("span")[0].hide(),n.publish({event:"onFilterAddedInGroup",data:d})}}(e)}))}},{id:"remove",text:c.isrCtxGroupElemRemove,fonticon:"remove",handler:function(){g.getItem("remove").elements.container.addClassName("disabled");var e=p.getNodesXSO().get(),t=e.length;if(t){d.model.prepareUpdate();for(var i=0;i<t;i++)d.model.removeRoot(e[i]);d.model.pushUpdate(),d.model.getRoots().length||(d.isEmpty=!0,d.isFilter=!1,f.getElementsByTagName("span")[0].show(),n.publish({event:"onEmptyGroup",data:d}))}}},{id:"delete",text:c.isrCtxGroupDelete,fonticon:"trash",handler:function(){h()}}]})).getItem("remove").elements.container.addClassName("disabled"),d.dataGridListViewDiv=new e.Element("div"),d.model=new s;var I=(p=new a({identifier:"DataGridViewContext",treeDocument:d.model,columns:[{text:"Tree",dataIndex:"tree"}],rowSelection:"multiple",cellSelection:"none",height:100,width:500,minWidth:100,minHeight:500,showRowBorderFlag:!0,showColumnBorderFlag:!0,placeholder:c.isrCtxGroupEmptyGroup,showOutlineFlag:!0})).getNodesXSO();I.options.getElementID=void 0,I.onPostAdd((function(e){g&&g.getItem("remove").elements.container.hasClassName("disabled")&&g.getItem("remove").elements.container.removeClassName("disabled"),r&&r.onPostRowSelect(e)})),I.onPostRemove((function(e){!p.getNodesXSO().get().length&&g&&g.getItem("remove").elements.container.addClassName("disabled"),r&&r.onPostRowUnselect(e)})),p.layout.columnsHeader=!1,p.inject(d.dataGridListViewDiv),d.groupContent=e.createElement("div",{class:"PIMwebGroupView",html:[e.createElement("div",{class:".PIMwebGroupElement",html:[{tag:"div",class:"PIMwebGroupField",html:[f,d.dataGridListViewDiv]}]})]}),d.groupContent.inject(d.htmlParent),n.publish({event:"onGroupViewCreated",data:d})}})})),define("DS/PIMwebUX/PIMwebOpacitySlider",["UWA/Core","UWA/Class","DS/Controls/Slider","DS/Controls/Button","DS/WebappsUtils/WebappsUtils"],(function(e,t,i,n,a){"use strict";var l=a.getWebappsAssetUrl("PIMwebUX","icons/32/");return t.extend({init:function(t){var a,s,o,r,d=this,u=t.parent,c=!1,f=t.userValue,g=1===t.checkedButton?1:2===t.checkedButton?2:0,p=1===g?0:2===g?100:f;a=new e.Element("div",{class:"pimWebOpacitySlider","data-rec-id":"pimWebOpacitySlider",styles:{position:"absolute",display:"none",margin:"1px auto"}}),u.appendChild(a),(s=new n({label:"",checkFlag:1===g,icon:l+"I_PIMOpacity0.png",displayStyle:"icon",recId:"btn1"}).inject(a)).onClick=function(){s.checkFlag=!s.checkFlag,g=s.checkFlag?1:0,o.checkFlag=!1,c=!0,r.value=s.checkFlag?0:f},(r=new i({minValue:0,maxValue:100,stepValue:1,value:p,disabled:!1,valuePopupFlag:!1,recId:"slider"}).inject(a)).elements.container.setStyle("display","inline-flex"),r.elements.container.setStyle("margin","1px 10px 2px 10px"),r.elements.container.setStyle("width","300px"),a.setStyle("display","none"),r.addEventListener("change",(function(e){if(c||(o.checkFlag=!1,s.checkFlag=!1,g=0,f=e.dsModel.value),c=!1,p!==e.dsModel.value){var t=p;p=e.dsModel.value,"function"==typeof d.onOpacityChange&&d.onOpacityChange({oldValue:t,newValue:p,userValue:f,checkedButton:g})}r.elements.container.getChildren()[0].setStyle("width","100%"),r.elements.container.getChildren()[0].setStyle("width","100%")})),(o=new n({label:"",checkFlag:2===g,icon:l+"I_PIMOpacity1.png",displayStyle:"icon",recId:"btn2"}).inject(a)).onClick=function(){o.checkFlag=!o.checkFlag,g=o.checkFlag?2:0,s.checkFlag=!1,c=!0,r.value=o.checkFlag?100:f},this.show=function(){a.setStyle("display","inline-flex")},this.hide=function(){a.setStyle("display","none")},this.onOpacityChange=null,this.getSize=function(){return a.getSize()},this.setPosition=function(e){a.setStyles(e)},this.destroy=function(){a&&a.parentNode&&a.parentNode.removeChild(a),d.onOpacityChange=null,d=a=u=s=o=r=null}}})})),define("DS/PIMwebUX/PIMwebUnitsUX",[],(function(){"use strict";var e=1/.0254,t=1/12*e,i=1/.003785411784,n=1/3*t;return Object.freeze({length:{mm:1e3,m:1,cm:100,km:.001,in:e,ft:t,micron:1e6,yard:n,mile:1/1609.344,nm:1e9,hm:.01,nmi:1/1852,dm:10,ang:1e10,cmm:1e5,mil:1e3*e},volume:{mm3:1e9,cm3:1e6,dm3:1e3,m3:1,km3:1e-9,L:1e3,in3:61023.74409473229,ft3:35.31466672148859,gal:i,brl:1/42*i,yard3:1.3079506193143924}})})),define("DS/PIMwebUX/PIMwebIsrPanelSpecTab",["UWA/Core","UWA/Class","DS/CATWebUXPreferences/CATWebUXPreferencesUtils","DS/Controls/LineEditor","DS/Controls/Toggle","DS/Controls/Button","DS/Controls/Expander","DS/Controls/ComboBox","DS/Controls/SpinBox","DS/CoreEvents/Events","DS/Controls/ButtonGroup","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelSpecTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],(function(e,t,i,n,a,l,s,o,r,d,u,c){"use strict";return t.extend({init:function(t){var f,g=this,p=t.parent,h=t.type,I=t.lengthUnit?t.lengthUnit:{unit:"Millimeter",decimalPlace:3,TrailingZero:!1},b=!!t.isNonPersistIsr&&t.isNonPersistIsr,m=!!t.readOnly&&t.readOnly,w={};localStorage.getItem("PIMwebIsrSpecs")&&(w=JSON.parse(localStorage.getItem("PIMwebIsrSpecs")));var C,S,v,x,y,F,M,T,P,L,D,R,k,E,O,A,V,N,U,j,G,_,W,B,Q,X,K,z,q,H,J,Y,Z,$,ee,te,ie,ne,ae={ComputationMode:{Clash:!0,Contact:!1,Clearance:!1,ClearanceValMeter:.01},Fasteners:{FstChecked:!1,CheckItfWithFastenedParts:!1},EngineeringCnx:{EnggCnxChecked:!1,CheckNoClash:!0,CheckContact:!0,CheckClearance:!0,NoCheck:!0},KnwRulesChecked:!1,ElecChecked:!1,PathwaysChecked:!1,ReuseExistingItf:{RecomputeOnlyModItf:!0,DeleteOutOfScopeItf:!1},ComputeQuantifer:{PenVolume:!1,PenVector:!0,MinDist:!1},StoredResults:{ClashQuantifier:1,ClearanceQuantifier:1,GeometryDetail:1,ClashGeometry:1,ContactGeometry:1,ClearanceGeometry:1,Accuracy:{valMeter:.01,units:"mm"}},AppRulesExpanded:!0,UsrDefRulesExpanded:!1,UpdateRulesExpanded:!1,StoredQuantifExpanded:!1,StoredResultsExpanded:!1};function le(){O.checkFlag?(_.disabled=!1,""===A.value?(d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoInsufficient"}),H.show()):(d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoSufficient"}),H.hide())):(A.disabled=_.disabled=!0,d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoSufficient"}),H.hide())}function se(e){g.ruleSet=e[0],A.value=e[0].alias+" "+e[0].identifier+" "+e[0].revision,le()}function oe(e){se.call(this,e.map((function(e){return{id:e.resourceid,type:e["ds6w:type_value"],alias:e["ds6w:label"],identifier:e["ds6w:identifier"],revision:e["ds6wg:revision"]}})))}function re(){"customFacetMode"!==h&&(S.checkFlag||O.checkFlag||L.checkFlag?d.publish({event:"onSpecInfoChange",data:"SpecInfoSufficient"}):d.publish({event:"onSpecInfoChange",data:"SpecInfoInsufficient"}))}function de(){"customFacetMode"!==h&&(!L.checkFlag||D.checkFlag||R.checkFlag||k.checkFlag||E.checkFlag?(J.hide(),d.publish({event:"onEngCnxInfoChange",data:"EngCnxInfoSufficient"})):(J.show(),d.publish({event:"onEngCnxInfoChange",data:"EngCnxInfoInsufficient"})))}function ue(e){return e||(e=.01),i.convertUnitValueToString(e,"Length",I.unit,I.decimalPlace,I.TrailingZero,{displaySymbol:!0,displaySpace:!0})}function ce(e){let t=parseFloat(e);return!e||t<=0||""===e.trim()?.01:i.convert(t,"Length",I.unit,"Meter")}function fe(){for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].classList.contains("wux-controls-expander")||e[t].classList.contains("wux-controls-expander-container")||e[t].classList.contains("wux-controls-expander-header")||(e[t].style.pointerEvents="none",e[t].style.userSelect="none",e[t].setAttribute("disabled",!0)),e[t].hasClassName&&e[t].hasClassName("fonticon-remove")&&e[t].getParent().addClassName("disabled")}localStorage.getItem("PIMwebIsrSpecs")&&(C=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),f=e.createElement("div",{class:"PIMwebIsrPanelSpecTabContent"}).inject(p);var ge=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection  PIMwebFirstTitle"}).inject(f),pe=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(ge);S=new a({type:"checkbox",label:c.isrSpecClash}).inject(pe),v=new a({type:"checkbox",label:c.isrSpecContact,checkFlag:C?C.ComputationMode.Contact:ae.ComputationMode.Contact}).inject(pe),(x=new a({type:"checkbox",label:c.isrSpecClearance})).inject(pe),y=new n({disabled:!0,selectAllOnFocus:!0}).inject(pe),ge.setStyles({borderBottom:"1px solid #d1d4d4"}),y.elements.container.setStyles({marginRight:"15px"}),y.elements.container.childNodes[0].setStyles({marginRight:"15px"}),y.addEventListener("change",(function(){let e=ce(y.value);y.value=ue(e)})),y.value=ue(C?C.ComputationMode.ClearanceValMeter:ae.ComputationMode.ClearanceValMeter),S.addEventListener("change",(function(){re()})),v.addEventListener("change",(function(){v.checkFlag?S.checkFlag=S.disabled=!0:S.disabled=!1})),x.addEventListener("change",(function(){x.checkFlag?(S.checkFlag=v.checkFlag=S.disabled=v.disabled=!0,y.disabled=!1):(y.disabled=!0,v.disabled=!1)})),S.checkFlag=C?C.ComputationMode.Clash:ae.ComputationMode.Clash,v.checkFlag=C?C.ComputationMode.Contact:ae.ComputationMode.Contact,x.checkFlag=C?C.ComputationMode.Clearance:ae.ComputationMode.Clearance;var he=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"});(F=new a({type:"checkbox",label:c.isrSpecFasteners})).inject(he),(M=new a({type:"checkbox",label:c.isrSpecCheckItfWithFastenedParts,disabled:!0})).inject(he),M.elements.container.setStyles({marginLeft:"28px"}),F.addEventListener("change",(function(){F.checkFlag?M.disabled=!1:M.disabled=!0})),(T=new a({type:"checkbox",label:c.isrSpecPathways})).inject(he),(P=new a({type:"checkbox",label:c.isrSpecElecBranches})).inject(he),F.checkFlag=C?C.Fasteners.FstChecked:ae.Fasteners.FstChecked,M.checkFlag=C?C.Fasteners.CheckItfWithFastenedParts:ae.Fasteners.CheckItfWithFastenedParts,T.checkFlag=C?C.PathwaysChecked:ae.PathwaysChecked,P.checkFlag=C?C.ElecChecked:ae.ElecChecked,(Q=new s({header:c.isrSpecAppRulesHeader,body:he,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),Q.expandedFlag=C?C.AppRulesExpanded:ae.AppRulesExpanded;var Ie=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f);if(!b){var be=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(Ie);(O=new a({type:"checkbox",label:c.isrSpecKnwRule}).inject(be)).elements.container.setStyles({marginRight:"5px",width:"50%"}),(H=e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(be)).setStyles({marginLeft:"5px",marginRight:"5px"}),H.hide(),(A=new n({disabled:!0,selectAllOnFocus:!0,autoCommitFlag:!0,placeholder:c.isrSpecSelectRuleSet}).inject(be)).elements.container.setStyles({width:"100%"}),A.elements.container.childNodes[0].setStyles({width:"100%"}),m||(_=new l({icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",disabled:!0,onClick:function(){require("DS/PADServices/views/LandingPage").launchSearch({title:c.isrSpecRuleSetSearchPageTitle,precondition:'flattenedtaxonomies:"types/PLMRuleset"',showApplyButton:!0,ok:oe.bind(g)})}}).inject(be),O.addEventListener("change",(function(){re(),le()}))),O.checkFlag=ae.KnwRulesChecked}var me=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(Ie);L=new a({type:"checkbox",label:c.isrSpecEnggCnx}).inject(me),(J=e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(me)).setStyles({marginLeft:"10px"}),J.hide();var we=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(Ie),Ce=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap PIMwebIsrPanelFlexEngCnx"}).inject(we),Se=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap PIMwebIsrPanelFlexEngCnx"}).inject(we);(D=new a({type:"checkbox",label:c.isrSpecEnggCnxNoClash,disabled:!0}).inject(Ce)).elements.container.setStyles({marginLeft:"28px"}),(R=new a({type:"checkbox",label:c.isrSpecEnggCnxContact,disabled:!0}).inject(Se)).elements.container.setStyles({marginLeft:"28px"}),(k=new a({type:"checkbox",label:c.isrSpecEnggCnxClearance,disabled:!0}).inject(Ce)).elements.container.setStyles({marginLeft:"28px"}),(E=new a({type:"checkbox",label:c.isrSpecEnggCnxNoCheck,disabled:!0}).inject(Se)).elements.container.setStyles({marginLeft:"28px"}),L.addEventListener("change",(function(){re(),L.checkFlag?D.disabled=R.disabled=k.disabled=E.disabled=!1:D.disabled=R.disabled=k.disabled=E.disabled=!0,de()})),D.addEventListener("change",(function(){de()})),R.addEventListener("change",(function(){de()})),k.addEventListener("change",(function(){de()})),E.addEventListener("change",(function(){de()})),L.setPropertyFromUIInteraction("checkFlag",ae.EngineeringCnx.EnggCnxChecked),D.checkFlag=ae.EngineeringCnx.CheckNoClash,R.checkFlag=ae.EngineeringCnx.CheckContact,k.checkFlag=ae.EngineeringCnx.CheckClearance,E.checkFlag=ae.EngineeringCnx.NoCheck;var ve=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(Ie);(W=new a({type:"checkbox",label:c.isrChkIntermediateReps,value:0,checkFlag:!1})).inject(ve);var xe,ye,Fe=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(Ie),Me=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(Fe);if((B=new a({type:"checkbox",label:c.isrComputeBetweenIntermediateReps,value:0,disabled:!0,checkFlag:!1})).inject(Me),Me.setStyles({marginLeft:"10px"}),Me.inject(Fe),W.addEventListener("change",(function(){W.checkFlag?B.disabled=!1:B.disabled=!0})),(X=new s({header:c.isrUserDefinedRulesHeader,body:Ie,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),X.expandedFlag=C?C.UsrDefRulesExpanded:ae.UsrDefRulesExpanded,b||(xe=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f),(V=new a({type:"checkbox",label:c.isrSpecRecomputeOnlyModified})).inject(xe),(N=new a({type:"checkbox",label:c.isrSpecDeleteOutOfScopeIsr})).inject(xe),N.elements.container.setStyles({marginLeft:"28px"}),(K=new s({header:c.isrUpdateRulesHeader,body:xe,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),K.expandedFlag=C?C.UpdateRulesExpanded:ae.UpdateRulesExpanded,V.addEventListener("change",(function(){V.checkFlag?N.disabled=!1:(N.disabled=!0,N.checkFlag=!1)})),V.checkFlag=ae.ReuseExistingItf.RecomputeOnlyModItf,N.checkFlag=ae.ReuseExistingItf.DeleteOutOfScopeItf),b){var Te=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"});(U=new a({type:"checkbox",label:c.isrSpecPenVol})).inject(Te),(j=new a({type:"checkbox",label:c.isrSpecPenVec})).inject(Te),(G=new a({type:"checkbox",label:c.isrSpecMinDist})).inject(Te),(z=new s({header:c.isrNonPersistQuantifiersHeader,body:Te,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),z.expandedFlag=C?C.StoredQuantifExpanded:ae.StoredQuantifExpanded,U.checkFlag=C&&C.ComputeQuantifer?C.ComputeQuantifer.PenVolume:ae.ComputeQuantifer.PenVolume,j.checkFlag=C&&C.ComputeQuantifer?C.ComputeQuantifer.PenVector:ae.ComputeQuantifer.PenVector,G.checkFlag=C&&C.ComputeQuantifer?C.ComputeQuantifer.MinDist:ae.ComputeQuantifer.MinDist}else!function(){var t=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}),n=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(t);n.innerHTML=c.isrSpecStoredResQuantifiers,n.setStyles({fontWeight:"normal"});var l=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t),d=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(l);d.innerHTML=c.isrSpecStoredResClash,d.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(Z=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecPenVec,c.isrSpecPenVol,c.isrSpecStoredResVecAndVol],enableSearchFlag:!1,selectedIndex:C&&C.StoredResults?C.StoredResults.ClashQuantifier:ae.StoredResults.ClashQuantifier,displayStyle:"normal"})).inject(l),Z.elements.container.setStyles({width:"30%"});var g=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t);g.setStyles({paddingTop:"5px"});var p=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(g);p.innerHTML=c.isrSpecStoredResClearance,p.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(te=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecMinDist],enableSearchFlag:!1,selectedIndex:C&&C.StoredResults?C.StoredResults.ClearanceQuantifier:ae.StoredResults.ClearanceQuantifier,displayStyle:"normal"})).inject(g),te.elements.container.setStyles({width:"30%"});var h=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(t);h.innerHTML=c.isrSpecStoredResGeometries,h.setStyles({fontWeight:"normal"}),($=new u({type:"radio"})).addChild(new a({type:"radio",label:c.isrSpecMainIsrType,value:1,checkFlag:C&&C.StoredResults?1===C.StoredResults.GeometryDetail:1===ae.StoredResults.GeometryDetail})),$.addChild(new a({type:"radio",label:c.isrSpecAllForEachIsr,value:2,checkFlag:C&&C.StoredResults?2===C.StoredResults.GeometryDetail:2===ae.StoredResults.GeometryDetail})),$.inject(t),$.elements.container.setStyles({marginLeft:"25px"});var b=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t),m=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(b);m.innerHTML=c.isrSpecStoredResClash,m.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(ee=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResCurve,c.isrSpecStoredResVolume,c.isrSpecStoredResCurveAndVol],enableSearchFlag:!1,selectedIndex:C&&C.StoredResults?C.StoredResults.ClashGeometry:ae.StoredResults.ClashGeometry,displayStyle:"normal"})).inject(b),ee.elements.container.setStyles({width:"30%"});var w=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t);w.setStyles({paddingTop:"5px"});var S=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(w);S.innerHTML=c.isrSpecStoredResContact,S.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(Y=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResTriangles],enableSearchFlag:!1,selectedIndex:C&&C.StoredResults?C.StoredResults.ContactGeometry:ae.StoredResults.ContactGeometry,displayStyle:"normal"})).inject(w),Y.elements.container.setStyles({width:"30%"});var v=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t);v.setStyles({paddingTop:"5px"});var x=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(v);x.innerHTML=c.isrSpecStoredResClearance,x.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(ie=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResTriangles,c.isrSpecStoredResArea],enableSearchFlag:!1,displayStyle:"normal"})).inject(v),ie.elements.container.setStyles({width:"30%"});var y=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(v);y.innerHTML=c.isrSpecStoredResAccuracy,y.setStyles({width:"16%",fontWeight:"normal",marginRight:"5px",textAlign:"right"}),(ne=new r({value:C&&C.StoredResults.Accuracy.valMeter?i.convert(C.StoredResults.Accuracy.valMeter,"Length","Meter",I.unit):i.convert(ae.StoredResults.Accuracy.valMeter,"Length","Meter",I.unit),units:C&&C.StoredResults?C.StoredResults.Accuracy.units:ae.StoredResults.Accuracy.units,stepValue:1})).inject(v),ne.elements.container.setStyles({width:"20%"}),ie.addEventListener("change",(function(){ne.disabled=!(ie.value===c.isrSpecStoredResArea)})),ie.selectedIndex=C&&C.StoredResults?C.StoredResults.ClearanceGeometry:ae.StoredResults.ClearanceGeometry,(q=new s({header:c.isrStoredResultsHeader,body:t,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),q.expandedFlag=C&&C.StoredResultsExpanded?C.StoredResultsExpanded:ae.StoredResultsExpanded}();"Create"!==t.type&&t.specInfo&&(ye=t.specInfo,S.checkFlag=ye.ComputationMode.Clash,v.checkFlag=ye.ComputationMode.Contact,x.checkFlag=ye.ComputationMode.Clearance,y.value=ue(ye.ComputationMode.ClearanceValMeter),F.checkFlag=ye.Fasteners.FstChecked,M.checkFlag=ye.Fasteners.CheckItfWithFastenedParts,L.checkFlag=ye.EngineeringCnx.EnggCnxChecked,D.checkFlag=ye.EngineeringCnx.CheckNoClash,R.checkFlag=ye.EngineeringCnx.CheckContact,k.checkFlag=ye.EngineeringCnx.CheckClearance,E.checkFlag=ye.EngineeringCnx.NoCheck,b||(O.checkFlag=ye.KnowledgeRule.KnwRulesChecked),ye.KnowledgeRule.RuleSet&&se([ye.KnowledgeRule.RuleSet]),P.checkFlag=ye.checkElec,T.checkFlag=ye.checkPathways,W.checkFlag=ye.CheckInterRep,B.checkFlag=ye.CompBetweenIntermediateReps,b?(U.checkFlag=ye.ComputeQuantifer.PenVolume,j.checkFlag=ye.ComputeQuantifer.PenVector,G.checkFlag=ye.ComputeQuantifer.MinDist):(V.checkFlag=ye.ReuseExistingItf.RecomputeOnlyModItf,N.checkFlag=ye.ReuseExistingItf.DeleteOutOfScopeItf,Z.selectedIndex=ye.StoredResults.ClashQuantifier,te.selectedIndex=ye.StoredResults.ClearanceQuantifier,ee.selectedIndex=ye.StoredResults.ClashGeometry,ie.selectedIndex=ye.StoredResults.ClearanceGeometry,Y.selectedIndex=ye.StoredResults.ContactGeometry,ne.value=i.convert(ye.StoredResults.Accuracy.valMeter,"Length","Meter",I.unit),ne.units=i.Length[I.unit].symbol,$.value=ye.StoredResults.GeometryDetail?[ye.StoredResults.GeometryDetail]:[ae.StoredResults.GeometryDetail]),d.publish({event:"onSpecTabComplete"})),re(),m&&fe(),this.getSpecInfo=function(){var e={};return e.ComputationMode={Clash:S.checkFlag,Contact:v.checkFlag,Clearance:x.checkFlag,ClearanceValMeter:ce(y.value)},e.Fasteners={FstChecked:F.checkFlag,CheckItfWithFastenedParts:M.checkFlag},e.EngineeringCnx={EnggCnxChecked:L.checkFlag,CheckNoClash:D.checkFlag,CheckContact:R.checkFlag,CheckClearance:k.checkFlag,NoCheck:E.checkFlag},e.checkPathways=T.checkFlag,e.CheckElec=P.checkFlag,b||(e.KnowledgeRule={KnwRulesChecked:O.checkFlag,RuleSet:g.ruleSet},e.ReuseExistingItf={RecomputeOnlyModItf:V.checkFlag,DeleteOutOfScopeItf:N.checkFlag}),b?e.ComputeQuantifer={PenVolume:U.checkFlag,PenVector:j.checkFlag,MinDist:G.checkFlag}:e.StoredResults={ClashQuantifier:Z.selectedIndex,ClearanceQuantifier:te.selectedIndex,GeometryDetail:$.value[0],ClashGeometry:ee.selectedIndex,ContactGeometry:Y.selectedIndex,ClearanceGeometry:ie.selectedIndex,Accuracy:{valMeter:i.convert(ne.value,"Length",I.unit,"Meter"),units:ne.units}},e.CheckInterRep=!!W&&W.checkFlag,e.CompBetweenIntermediateReps=!!B&&B.checkFlag,e},this.getPIMwebIsrSpecPrefs=function(){var e={ComputationMode:{Clash:S.checkFlag,Contact:v.checkFlag,Clearance:x.checkFlag,ClearanceValMeter:ce(y.value)},Fasteners:{FstChecked:F.checkFlag,CheckItfWithFastenedParts:M.checkFlag},PathwaysChecked:T.checkFlag,ElecChecked:P.checkFlag,ComputeQuantifer:!b&&w&&w.ComputeQuantifer?w.ComputeQuantifer:b?{PenVolume:U.checkFlag,PenVector:j.checkFlag,MinDist:G.checkFlag}:ae.ComputeQuantifer,AppRulesExpanded:Q.expandedFlag,UsrDefRulesExpanded:X.expandedFlag,UpdateRulesExpanded:K.expandedFlag,StoredResultsExpanded:q?q.expandedFlag:w&&w.StoredResultsExpanded?w.StoredResultsExpanded:ae.StoredResultsExpanded,StoredQuantifExpanded:z?z.expandedFlag:w&&w.StoredQuantifExpanded?w.StoredQuantifExpanded:ae.StoredQuantifExpanded};return b||(e.StoredResults={ClashQuantifier:Z.selectedIndex,ClearanceQuantifier:te.selectedIndex,GeometryDetail:$.value[0],ClashGeometry:ee.selectedIndex,ContactGeometry:Y.selectedIndex,ClearanceGeometry:ie.selectedIndex,Accuracy:{valMeter:i.convert(ne.value,"Length",I.unit,"Meter"),units:i.Length[I.unit].symbol}}),e},this.disableTab=function(){fe()},this.enableTab=function(){!function(){if(f)for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].classList.contains("wux-controls-expander")||e[t].classList.contains("wux-controls-expander-container")||e[t].classList.contains("wux-controls-expander-header")||(e[t].style.pointerEvents="",e[t].style.userSelect="",e[t].removeAttribute("disabled")),e[t].hasClassName("fonticon-remove")&&e[t].getParent().removeAttribute("disabled")}()}}})})),define("DS/PIMwebUX/PIMwebItfServices",["UWA/Class/Promise","UWA/Core","i18n!DS/PIMwebUX/assets/nls/PIMwebItfListUI","css!DS/PIMwebUX/assets/css/PIMwebItfListUI"],(function(e,t,i){"use strict";var n,a,l,s,o=!1;return{initIssueServices:function(){if(a)l.getSecurityContext=function(){return require("DS/PADUtils/PADSettingsMgt").getSetting("pad_security_ctx").replace("ctx::","")},l.getTenant=function(){return require("DS/PADUtils/PADUtilsServices").getPlatformId()};else{require(["DS/WAFData/WAFData","DS/IssueServices/Contexts","DS/IssueServices/services/PlatformServices","DS/IssueServices/services/IssueServices"],(function(e,t,i,r){n=e,l=i,s=r,(a=t).add("widget",window.widget),l.getSecurityContext=function(){return require("DS/PADUtils/PADSettingsMgt").getSetting("pad_security_ctx").replace("ctx::","")},l.getTenant=function(){return require("DS/PADUtils/PADUtilsServices").getPlatformId()},l.initPlatformServices().then((function(){o=!0}))}))}},get3DSwymUrl:function(){return o&&l&&""!==l.get3DSwymUrl()?l.get3DSwymUrl():void 0},getEnoviaModelRelations:function(t){return new e((function(e){var i=l.get3DSpaceUrl()+"/resources/enorelnav/v2/navigate/getEcosystem?tenant="+l.getTenant(),a=[];a.push(t.itfuid);var s={ids:a,trueREST:!1,direction:"in",restrictedMode:!1,relations:["v6_annexdoc_from"],responseMode:"ObjectsAndLinks",label:[t.itfuid]+"relations_request_"+window.widget.id,widgetId:"Reveal-"+window.widget.id+"-"+Date.now()},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",SecurityContext:l.getSecurityContext()},type:"json",data:JSON.stringify(s),onComplete:function(t){const i=t.objects.filter((function(e){return"Issue"===e.type})).map((function(e){return e.id})),n=t.objects.filter((function(e){return"Task"===e.type})).map((function(e){return e.id}));e({status:"OK",issueIds:i,taskIds:n})},onFailure:function(){e({status:"KO",issueIds:[],taskIds:[]})}};n.authenticatedRequest(i,o)}))},getProjectPlanningTaskInfo:function(t){return new e((function(e){var i=l.get3DSpaceUrl()+"/tasks/"+t,a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",SecurityContext:l.getSecurityContext()},onComplete:function(t){var i=JSON.parse(t);e(i)},onFailure:function(){e({status:"KO",issueIds:[],taskIds:[]})}};n.authenticatedRequest(i,a)}))},getTaskInfoFromId:function(t){return new e((function(e){var i=l.get3DSpaceUrl()+"/resources/v1/modeler/tasks/"+t.physicalId,a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",SecurityContext:l.getSecurityContext()},onComplete:function(t){var i=JSON.parse(t);e(i)},onFailure:function(){e({status:"KO",issueIds:[],taskIds:[]})}};n.authenticatedRequest(i,a)}))},getTaskOwner:function(e){var t=[],i=e.relateddata;return i&&i.ownerInfo&&i.ownerInfo.length>0&&t.push({label:i.ownerInfo[0].dataelements.firstname+" "+i.ownerInfo[0].dataelements.lastname,userID:i.ownerInfo[0].dataelements.name}),t},getTaskAssignees:function(e){var t=[],i=e.relateddata;return i&&i.assignees&&i.assignees.length>0&&i.assignees.forEach((function(e){t.push({label:e.dataelements.firstname+" "+e.dataelements.lastname,userID:e.dataelements.name})})),t},getTaskOriginator:function(e){var t=[],i=e.relateddata;return i&&i.originatorInfo&&i.originatorInfo.length>0&&t.push({label:i.originatorInfo[0].dataelements.firstname+" "+i.originatorInfo[0].dataelements.lastname,userID:i.originatorInfo[0].dataelements.name}),t},getTaskEstiDurationVal:function(e){var t="";if(void 0!==e&&""!==e){var n=e.trim().split(" ")[0],a=e.trim().split(" ")[1];t=n+" "+i[("1"===n?"Single":"Multiple")+a]}return t},launchSearchPanel:function(e){var t={parent_window:e.odtSpecificParentWindow,mode:e.mode,title:e.title,precond:e.precondition};require("DS/PADServices/utils/SearchUtils").inAppsSearch(t)},computeSharedIssuesURL:function(e){var i=l.get3DDashboardUrl()+"#dashboard:/tab:/app:ENXISSU_AP/content:XSharedContentId=";return i+=encodeURIComponent(JSON.stringify({issues:t.clone(e)}))},computeSharedTaskURL:function(e){var t={content:{data:{items:[]}}},i={};return i.objectId=e[0],i.objectType="Task",t.content.data.items.push(i),t.content.source="ENOTASK_AP",t.content.widgetId=window.widget?window.widget.id:void 0,t.content.data.items[0].envId=require("DS/PADUtils/PADUtilsServices").getPlatformId(),t.content.data.items[0].serviceId="3DSpace",t.content.data.items[0].contextId=require("DS/PADUtils/PADSettingsMgt").getSetting("pad_security_ctx").replace("ctx::",""),l.get3DDashboardUrl()+"#dashboard:/tab:/app:ENOTASK_AP/content:X3DContentId="+encodeURIComponent(JSON.stringify(t.content))},evalIssues:function(e,t){var i=this;this.getEnoviaModelRelations(e).then((function(n){let a=[],l=[];if(sessionStorage){let t=sessionStorage.getItem("PIMItfNewIssue"),i=t&&void 0!==t?JSON.parse(t):{};void 0!==i[e.itfuid]&&i[e.itfuid].forEach((function(e){(Date.now()-e.time)/1e3<300&&-1===n.issueIds.indexOf(e.id)&&n.issueIds.push(e.id)})),t=sessionStorage.getItem("PIMItfNewTask");let a=t&&void 0!==t?JSON.parse(t):{};void 0!==a[e.itfuid]&&a[e.itfuid].forEach((function(e){(Date.now()-e.time)/1e3<300&&-1===n.taskIds.indexOf(e.id)&&n.taskIds.push(e.id)}))}if(n.issueIds.forEach((function(e){a.push({physicalId:e})})),n.taskIds.forEach((function(e){l.push({physicalId:e})})),0===a.length){let i={itfuid:e.itfuid,itfIssueTitle:"-",itfIssueTitleUrl:"",itfIssueState:"",itfIssuePriority:"",itfIssueDesc:"",itfIssueName:""};i.itfIssueApprovals=i.itfIssueAssignees=i.itfIssueResolvedBy=i.itfIssueOwner=i.itfIssueModified="",t({status:"OK",grid:i})}else if(1===a.length)s.issues.retrieve({data:{objects:a}}).then((function(a){if(a.results.length>=1){let s=a.results[0].body,o=1===a.results.length?s.title:a.results.length.toString()+" Issues",r=i.computeSharedIssuesURL(n.issueIds),d={itfuid:e.itfuid,itfIssueTitle:o,itfIssueTitleUrl:r};d.itfIssueState=1===a.results.length?s.state:"",d.itfIssuePriority=1===a.results.length?s.priority:"",d.itfIssueDesc=1===a.results.length?s.description:"",d.itfIssueName=1===a.results.length?s.name:"",d.itfIssueModified=1===a.results.length?new Date(s.modified).toLocaleString():"",d.itfIssueApprovals=1===a.results.length?!("Unassigned"===s.waitingOn||""===s.waitingOn):"";var l=[];s.assignees.forEach((function(e){l.push({label:e.fullName,userID:e.user})})),d.itfIssueAssignees=l.length>=1?l:"",d.itfIssueResolvedBy=1===a.results.length?0===s.resolvedBy.length?"No":"Yes("+s.resolvedBy.length.toString()+")":"",d.itfIssueOwner=1===a.results.length?[{label:s.owner.fullName,userID:s.owner.user}]:"",t({status:"OK",grid:d})}else{let i={itfuid:e.itfuid,itfIssueTitle:"-",itfIssueTitleUrl:"",itfIssueState:"",itfIssuePriority:"",itfIssueDesc:"",itfIssueName:""};i.itfIssueApprovals=i.itfIssueAssignees=i.itfIssueResolvedBy=i.itfIssueOwner=i.itfIssueModified="",t({status:"OK",grid:i})}}));else if(a.length>1){let a=n.issueIds.length.toString()+" Issues",l=i.computeSharedIssuesURL(n.issueIds),s={itfuid:e.itfuid,itfIssueTitle:a,itfIssueTitleUrl:l,itfIssueState:"",itfIssuePriority:"",itfIssueDesc:"",itfIssueName:""};s.itfIssueApprovals=s.itfIssueAssignees=s.itfIssueResolvedBy=s.itfIssueOwner=s.itfIssueModified="",t({status:"OK",grid:s})}if(0===l.length){let i={itfuid:e.itfuid,itfTaskTitle:"-",itfTaskName:"",itfTaskMaturityState:"",itfTaskDesc:"",itfTaskAssignees:"",itfTaskCandiAssignment:""};i.itfTaskOriginator=i.itfTaskOwner=i.itfTaskEstiFinDate=i.itfTaskEstiDuration=i.itfTaskCreateDate=i.itfTaskModifDate="",t({status:"OK",grid:i})}else if(1===l.length)i.getTaskInfoFromId(l[0]).then((function(a){if(a.data&&a.data.length>=1){let l=a.data[0],s=1===a.data.length?l.dataelements.title:a.results.length.toString()+" Tasks",o={itfuid:e.itfuid,itfTaskTitle:s,itfTaskIds:n.taskIds};1===a.data.length&&(o.itfTaskName=void 0!==l.dataelements.title?l.dataelements.title:"",o.itfTaskMaturityState=void 0!==l.dataelements.state?l.dataelements.state:"",o.itfTaskDesc=void 0!==l.dataelements.description?l.dataelements.description:"",o.itfTaskAssignees=void 0!==l.relateddata.assignees&&0!==l.relateddata.assignees.length?i.getTaskAssignees(l):"",o.itfTaskCandiAssignment=void 0!==l.relateddata.candidateAssignees&&0!==l.relateddata.candidateAssignees.length?l.relateddata.candidateAssignees:"",o.itfTaskOriginator=void 0!==l.relateddata.originatorInfo?i.getTaskOriginator(l):"",o.itfTaskOwner=void 0!==l.relateddata.ownerInfo?i.getTaskOwner(l):"",o.itfTaskEstiFinDate=void 0!==l.dataelements.dueDate?new Date(l.dataelements.dueDate).toLocaleString():"",o.itfTaskEstiDuration=void 0!==l.dataelements.estimatedDurationInputValue?i.getTaskEstiDurationVal(parseInt(l.dataelements.estimatedDurationInputValue)+" "+l.dataelements.estimatedDurationInputUnit):"",o.itfTaskCreateDate=void 0!==l.dataelements.originated?new Date(l.dataelements.originated).toLocaleString():"",o.itfTaskModifDate=void 0!==l.dataelements.modified?new Date(l.dataelements.modified).toLocaleString():""),t({status:"OK",grid:o})}else{let i={itfuid:e.itfuid,itfTaskTitle:"-",itfTaskName:"",itfTaskMaturityState:"",itfTaskDesc:"",itfTaskAssignees:"",itfTaskCandiAssignment:""};i.itfTaskOriginator=i.itfTaskOwner=i.itfTaskEstiFinDate=i.itfTaskEstiDuration=i.itfTaskCreateDate=i.itfTaskModifDate="",t({status:"OK",grid:i})}}));else if(l.length>1){let i=n.taskIds.length.toString()+" Tasks",a={itfuid:e.itfuid,itfTaskTitle:i,itfTaskIds:n.taskIds,itfTaskName:"",itfTaskMaturityState:"",itfTaskDesc:"",itfTaskAssignees:"",itfTaskCandiAssignment:""};a.itfTaskOriginator=a.itfTaskOwner=a.itfTaskEstiFinDate=a.itfTaskEstiDuration=a.itfTaskCreateDate=a.itfTaskModifDate="",t({status:"OK",grid:a})}}))}}})),define("DS/PIMwebUX/PIMwebIsrPanelIsrTab",["UWA/Core","UWA/Class","DS/Controls/LineEditor","DS/Controls/Editor","DS/CoreEvents/Events","DS/Controls/ComboBox","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelIsrTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],(function(e,t,i,n,a,l,s){"use strict";return t.extend({init:function(t){var o,r,d,u,c,f,g=t.parent,p=t.ctrl,h=t.dialog,I=!!t.readOnly&&t.readOnly;function b(){if(f)for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].hasClassName("wux-ui-state-undefined")&&e[t].setAttribute("disabled",!0)}var m=[];p.getCreationParams().then((function(t){if(t&&t.types&&t.title&&t.name){d=t.name?t.name:"";var w=Object.keys(t.types).length;if(w){for(var C=0;C<w;C++)m.push(t.types[Object.keys(t.types)[C]]);if(a.publish({event:"onIsrTypeInitDone",data:m[0]}),p.setAllNlsType(t.types),f=e.createElement("div",{class:"PIMwebIsrPanelContextTabContent"}).inject(g),m.length>1){h.height=h.height+25,h.minHeight=h.minHeight+25;var S=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebFirstTitle"}).inject(f),v=e.createElement("div").inject(S);e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(v).innerHTML=s.isrType,(u=new l({elementsList:m,enableSearchFlag:!1})).inject(S),u.elements.container.setStyles({width:"100%"}),u.addEventListener("change",(function(){a.publish({event:"onIsrTypeChange",data:u.value})}))}var x;x=u?e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f):e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection  PIMwebFirstTitle"}).inject(f);var y=e.createElement("div").inject(x),F=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(y);F.innerHTML=s.isrTitle,F.setStyles({marginRight:"5px"}),c=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(y),e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(c),c.hide(),(o=new i({placeholder:s.titlePlaceholder,value:t.title?t.title:"",selectAllOnFocus:!0,autoCommitFlag:!0}).inject(x)).elements.container.setStyles({width:"100%"}),o.elements.container.childNodes[0].setStyles({width:"100%"}),o.addEventListener("change",(function(){a.publish({event:"onTitleChange",data:o.value})})),a.publish({event:"onTitleChange",data:o.value});var M,T=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f),P=e.createElement("div").inject(T);e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(P).innerHTML=s.isrDescription,(r=new n({nbRows:7,newLineMode:"shiftEnter",placeholder:s.descriptionPlaceholder,value:"",selectAllOnFocus:!0,autoCommitFlag:!0}).inject(T)).elements.container.setStyles({width:"100%",resize:"both"}),r.elements.container.childNodes[0].setStyles({width:"100%",resize:"both"}),localStorage.getItem("PIMwebIsrSpecs")&&(M=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),M&&M.descWidth&&M.descHeight&&r.elements.container.childNodes[0].setStyles({width:M.descWidth,height:M.descHeight}),I&&b()}}})),this.getIsrInfo=function(){return{isrType:u?u.value:1===m.length?m[0]:null,isrTitle:o.value,isrName:d,isrDesc:r.value}},this.getPIMwebIsrTabPrefs=function(){var e={};return r&&(e.descWidth=r.elements.container.childNodes[0].getSize().width,e.descHeight=r.elements.container.childNodes[0].getSize().height),e},this.setIsrTitleValidity=function(e){e?c.hide():c.show()},this.disableTab=function(){b()},this.enableTab=function(){!function(){if(f)for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].hasClassName("wux-ui-state-undefined")&&e[t].removeAttribute("disabled")}()}}})})),define("DS/PIMwebUX/PIMwebDetailedItfListUI",["UWA/Core","UWA/Class","DS/DataGridView/DataGridView","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Controls/Button","DS/PIMwebUX/PIMwebItfServices","DS/PIMwebUX/PIMwebUnitsUX","DS/WebappsUtils/WebappsUtils","DS/CATWebUXPreferences/CATWebUXPreferencesUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebItfListUI","css!DS/PIMwebUX/assets/css/PIMwebItfListUI"],(function(e,t,i,n,a,l,s,o,r,d,u){"use strict";var c,f="NotAnalyzed",g="OK",p="KO",h={},I="Clash",b="Contact",m="Clearance",w="NoInterference",C="Undefined",S={iconName:"presentation-slide",fontIconFamily:window.WUXManagedFontIcons.Font3DS},v=r.getWebappsAssetUrl("PIMwebUX","icons/22/"),x=["itfQuantifier","itfPenVec","itfMinDist","itfPenVol","itfTolerance","itfLbl3DAccuracy1Shape","itfLbl3DAccuracy2Shape"],y=["itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblFstType1","itfLblFstType2","itfLblCollabSpace1Ref","itfLblCollabSpace2Ref","itfLblCollabSpace1Shape","itfLblCollabSpace2Shape","itfLblOrganization1Ref","itfLblOrganization2Ref","itfLblOrganization1Shape","itfLblOrganization2Shape","itfLblMaturity1Ref","itfLblMaturity2Ref","itfLblMaturity1Shape","itfIssueState","itfIssuePriority","itfIssueApprovals","itfLblMaturity2Shape","itfLblRevision1Ref","itfLblRevision2Ref","itfLblRevision1Shape","itfLblRevision2Shape","itfOwner","itfOwnerID","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblShape1OwnerID","itfLblShape2OwnerID","current","organization","project","revision","policy","owner","itfCurrent","V_Context_Validity_Status","ISUPTODATE"],F={itfLblSlide:"M:itfLblSlide",tree:"M:Name",itfCtxName:"M:V_Name",itfDescription:"M:description",itfAnalysis:"M:V_Itf_Analysis",itfPrevAnalysis:"M:V_Itf_Previous_Analysis",itfSystemType:"M:V_Itf_Type",itfUserType:"M:V_Itf_User_Type",itfTolerance:"M:V_Itf_Real_Tolerance_Used_For_Computation",itfClearVal:"M:V_Itf_Spec_Clearance_value",itfPenVec:"M:V_Itf_Penetration_Value",itfPenVol:"M:V_Itf_Clash_Volume",itfMinDist:"M:V_Itf_Distance_Min",itfFeat1:"M:V_Itf_Feature_UUID_1",itfFeat2:"M:V_Itf_Feature_UUID_2",itfFeatName1:"M:V_Itf_Feature_Name_1",itfFeatName2:"M:V_Itf_Feature_Name_2",itfIssueTitle:"M:itfIssueTitle",itfIssueState:"M:itfIssueState",itfIssueDesc:"M:itfIssueDesc",itfIssueName:"M:itfIssueName",itfIssuePriority:"M:itfIssuePriority",itfIssueApprovals:"M:itfIssueApprovals",itfIssueAssignees:"M:itfIssueAssignees",itfIssueOwner:"M:itfIssueOwner",itfIssueResolvedBy:"M:itfIssueResolvedBy",itfIssueModified:"M:itfIssueModified",itfOwner:"M:responsible",itfOwnerID:"M:owner",itfCurrent:"M:status",itfQuantifier:"M:V_Quantifier",itfLblRef1:"R1:V_Name",itfLblRef2:"R2:V_Name",itfLblRef1Owner:"R1:owner",itfLblRef2Owner:"R2:owner",itfLblMaturity1Ref:"R1:current",itfLblMaturity2Ref:"R2:current",itfLblOrganization1Ref:"R1:organization",itfLblOrganization2Ref:"R2:organization",itfLblCollabSpace1Ref:"R1:project",itfLblCollabSpace2Ref:"R2:project",itfLblRef1OwnerID:"R1:ownerID",itfLblRef2OwnerID:"R2:ownerID",itfLblRevision1Ref:"R1:revision",itfLblRevision2Ref:"R2:revision",itfLblShape1:"S1:V_Name",itfLblShape2:"S2:V_Name",itfLblShape2Owner:"S1:owner",itfLblShape1Owner:"S2:owner",itfLblMaturity1Shape:"S1:current",itfLblMaturity2Shape:"S2:current",itfLblOrganization1Shape:"S1:organization",itfLblOrganization2Shape:"S2:organization",itfLblCollabSpace1Shape:"S1:project",itfLblCollabSpace2Shape:"S2:project",itfLblShape1OwnerID:"S1:ownerID",itfLblShape2OwnerID:"S2:ownerID",itfLblRevision1Shape:"S1:revision",itfLblRevision2Shape:"S2:revision",itfLbl3DAccuracy1Shape:"S1:3DAccuracy1Shape",itfLbl3DAccuracy2Shape:"S2:3DAccuracy2Shape",itfLblInst1:"I1:PLM_ExternalID",itfLblInst2:"I2:PLM_ExternalID",itfLblInst1Owner:"I1:owner",itfLblInst2Owner:"I2:owner",itfLblInst1OwnerID:"I1:ownerID",itfLblInst2OwnerID:"I2:ownerID",itfLblFstInst1:"F1:PLM_ExternalID",itfLblFstInst2:"F2:PLM_ExternalID",itfLblFstRef1:"F1:V_Name",itfLblFstRef2:"F2:V_Name",itfLblFstType1:"F1:V_Type",itfLblFstType2:"F2:V_Type",itfLblInst1Path:"I1:V_Path_to_Instance",itfLblInst2Path:"I2:V_Path_to_Instance",itfLblRef1Path:"R1:V_Path_to_Reference",itfLblRef2Path:"R2:V_Path_to_Reference"},M={EnumItfType:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus1:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus2:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}}};M.EnumItfType.semantics.possibleValues[u.Clash]=I,M.EnumItfType.semantics.possibleValues[u.Contact]=b,M.EnumItfType.semantics.possibleValues[u.Clearance]=m,M.EnumItfType.semantics.possibleValues[u.NoInterference]=w,M.EnumItfType.semantics.possibleValues[u.Undefined]=C,M.EnumItfStatus1.semantics.possibleValues[u.itfOK]=g,M.EnumItfStatus1.semantics.possibleValues[u.itfKO]=p,M.EnumItfStatus1.semantics.possibleValues[u.itfToAnalyze]=f,M.EnumItfStatus2.semantics.possibleValues[u.itfOK]=g,M.EnumItfStatus2.semantics.possibleValues[u.itfKO]=p,M.EnumItfStatus2.semantics.possibleValues[u.itfToReAnalyze]=f;var T,P,L,D,R,k,E,O,A,V=function(e,t){var i=u[e],n=u[t];return i===n?0:i<n?-1:1},N=(k="itfToAnalyze",E="itfToReAnalyze",O="itfOK",A="itfKO",function(e,t,i,n){return T=i.options.grid.itfPrevAnalysis,P=n.options.grid.itfPrevAnalysis,L=t===f?""===P||void 0===P?k:E:t===g?O:A,D=u[e===f?""===T||void 0===T?k:E:e===g?O:A],R=u[L],D===R?0:D<R?-1:1});function U(e,t){return e||t?e?t?e===t?0:e<t?-1:1:1:-1:0}function j(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfUserType)return"EnumItfType"}function G(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfAnalysis){var t=e.nodeModel.options.grid.itfPrevAnalysis;return""===t||void 0===t?"EnumItfStatus1":"EnumItfStatus2"}}function _(e){if(e&&-1!==e.rowID&&e.nodeModel)return e.nodeModel.options.grid.itfLblSlide?"url":void 0}function W(e){var t=e.cellModel;return t===I?"rgb(204, 9, 47)":t===b?"rgb(255, 138, 46)":t===m?"rgb(111, 188, 75)":t===w?"rgb(0, 157, 219)":t===C?"rgb(254, 224, 0)":null}function B(e){var t=e.cellModel;return t===g?"rgb(111, 188, 75)":t===p?"rgb(204, 9, 47)":t===f?"rgb(254, 224, 0)":null}function Q(e,t){return e<t?-1:e>t?1:0}return t.extend({init:function(t){var r,p,I={},b=null,m=t.readOnly,w=t.readOnlyForCSICompute,C=t.cbDnD?t.cbDnD:{},T=t.parent,P=this,L=!1,D="PIMwebItfListColPref"+(t.suffix?t.suffix:""),R=!1,k=t.deforder,E=t.defCols,O={},A=!0,X=0,K={pending:[],running:[]},z=m||w,q=t.isListRefreshNeeded,H=null,J=t.isCSIExecuteUrlAvailable,Y=!1,Z=null;if(x=x.concat(t.filterCols?t.filterCols.addColswithNumber:[]),y=y.concat(t.filterCols?t.filterCols.addColsWithSet:[]),s.initIssueServices(),t.isWebInWin)R=!0;else if(t.filterCols&&!E&&!t.filterCols.addColsWithSet){const e=y.indexOf("label");e>-1&&y.splice(e,1)}function $(e){(e||e.length||e.volume)&&(R?(e.length.unit&&o.length[e.length.unit]&&(O.length={val:e.length.unit,ratio:o.length[e.length.unit],decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&o.volume[e.volume.unit]&&(O.volume={val:e.volume.unit,ratio:o.volume[e.volume.unit],decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO})):(e.length.unit&&(O.length={val:e.length.unit,decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&(O.volume={val:e.volume.unit,decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO})),e.highExponent&&(O.highExponent=e.highExponent),e.lowExponent&&(O.lowExponent=e.lowExponent))}function ee(e,t){if(!("number"!=typeof e||e<=0)){var i,n=t?O.volume:O.length,a=e,l=1-Math.floor(Math.log(a)/Math.log(10)+1),s=n.decimalRW+l+O.highExponent+1;if(R)a=0!==(i=Number((a*(t?1:.001)*n.ratio).toFixed(n.decimalRW)))?i:Number((a*(t?1:.001)*n.ratio).toFixed(s));else if(a){let e=t?d.convert(a,"Volume","CubMet",n.val):d.convert(a,"Length","Millimeter",n.val);a=Number(e.toFixed(n.decimalRW))}return a}}function te(e){const t=this.grid||this.options.grid,i=this.label||this.options.label;if("itfLblSlide"===e)return t[e]?t[e]:0;if("label"===e)return i;if(x.indexOf(e)>-1){var n="itfPenVol"===e||A&&"itfQuantifier"===e&&"Clash"===t.itfSystemType;return t[e]?ee(t[e],n):void 0}if("itfUserType"===e)return u[t[e]];if("itfAnalysis"===e){var a=t[e]===f?""===t.itfPrevAnalysis?"itfToAnalyze":"itfToReAnalyze":t[e]===g?"itfOK":"itfKO";return u[a]}return"itfIssueState"===e?u["itfIssueMaturity"+t[e]]:"itfIssuePriority"===e?u["itfIssuePriorities"+t[e]]:u[t[e]]?u[t[e]]:t[e]}function ie(e){if(e.nodeModel){var t=b.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===t)return e.nodeModel.options.grid[t]?{icon:S,label:e.nodeModel.options.grid[t]}:void 0;var i="itfPenVol"===t||A&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return ee(e.nodeModel.options.grid[t],i)}}function ne(e){if(e.nodeModel){var t=b.layout.getDataIndexFromColumnIndex(e.columnID);return void 0===e.nodeModel.options.grid[t]?u.itfCustErrorMsg:e.nodeModel.options.grid[t]}}function ae(e){if(e.nodeModel){var t=b.layout.getDataIndexFromColumnIndex(e.columnID);return u[e.nodeModel.options.grid[t]]||""}}function le(e){if(e.nodeModel){var t=b.layout.getDataIndexFromColumnIndex(e.columnID);return u["itf"+e.nodeModel.options.grid[t]]||""}}function se(e){if("number"==typeof e.cellModel){var t=b.layout.getDataIndexFromColumnIndex(e.columnID),i="itfPenVol"===t||A&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return R?{units:(i?O.volume:O.length).val}:i?{units:d.Volume[O.volume.val].symbol}:{units:d.Length[O.length.val].symbol}}}function oe(e){if(-1!==e.rowID&&e.cellModel)return ie(e)+" "+se(e).units}function re(e){return!e.cellModel}function de(e){var t="",i=b.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===i)return-1===e.rowID?u.itfLblSlide:e.nodeModel.options.grid.itfLblSlide?String(e.nodeModel.options.grid.itfLblSlide):"";if(-1!==e.rowID&&e.cellModel){if("tree"===i)t+=e.nodeModel.options.label,e.nodeModel.getParents().forEach((function(e){t=e.options.label+"|"+t}));else if("itfUserType"===i)t=u[e.cellModel];else if("itfAnalysis"===i){var n=e.nodeModel.options.grid.itfPrevAnalysis,a=e.cellModel;t=u[a===f?""===n?"itfToAnalyze":"itfToReAnalyze":a===g?"itfOK":"itfKO"]}else if("itfOwner"===i||"itfOwner"===i)t=e.cellModel&&""!==e.cellModel?e.cellModel.label:e.cellModel;else if("itfIssueOwner"===i||"itfIssueAssignees"===i||"itfTaskAssignees"===i||"itfTaskCandiAssignment"===i||"itfTaskOriginator"===i||"itfTaskOwner"===i)t=e.cellModel.map((e=>e.label)).toString();else if("itfLblInst1Owner"===i||"itfLblInst2Owner"===i||"itfLblRef1Owner"===i||"itfLblRef2Owner"===i||"itfLblShape1Owner"===i||"itfLblShape2Owner"===i||"itfOwner"===i)t=e.cellModel&&""!==e.cellModel?e.cellModel.label:e.cellModel;else if("itfIssueTitle"===i||"itfTaskTitle"===i)t=e.cellModel.label;else{if("itfIssueState"===i||"itfTaskMaturityState"===i)return u[("itfIssueState"===i?"itfIssueMaturity":"itfTaskMaturity")+e.cellModel];if("itfIssuePriority"===i)return u["itfIssuePriorities"+e.cellModel]}return t}}function ue(){setTimeout((function(){b.reapplySortModel();var t=JSON.parse(localStorage.getItem(D));t&&t.filterModel&&!e.equals(t.filterModel,{})&&(p.setFilterModel({}),p.setFilterModel(t.filterModel),Object.keys(t.filterModel).forEach((function(e){var t=p.getFilterManager().getFilters()[e];t&&t.defaultFilterModel&&(t.defaultFilterModel=void 0)})))}),10)}function ce(e){return!z&&(!("itfCtxName"===b.columns[e.columnID].dataIndex&&e.nodeModel&&e.nodeModel.getNumberOfChildren()>0)&&((!e.nodeModel||!e.nodeModel.options.grid.isNonEditable&&!e.nodeModel.options.grid.isNonPersistentPIM)&&(!R||(void 0===b.columns[e.columnID].editableFlag||b.columns[e.columnID].editableFlag))))}function fe(e){var t=b.columns[e.columnID].dataIndex,i=[];(i=b.getTreeDocument().getSelectedNodes().filter((function(e){return e.options.grid.itfuid&&!e.options.grid.isNonEditable}))).length||i.push(e.nodeModel),p.withTransactionUpdate((function(){i.forEach((function(e){if(e.options.grid.hasOwnProperty(t)){var i={};i[t]=e.options.grid.itfIssueApprovals,e.updateOptions({grid:i})}}))}))}function ge(e,t){if(!z){var i=b.columns[e.columnID].dataIndex,n=[];"tree"===i&&e.nodeModel.updateOptions({label:t}),(n=b.getTreeDocument().getSelectedNodes().filter((function(e){return e.options.grid.itfuid&&!e.options.grid.isNonEditable}))).length||n.push(e.nodeModel),p.withTransactionUpdate((function(){n.forEach((function(e){if(e.options.grid.hasOwnProperty(i)){var n={};n[i]=t,e.options.grid.tree===e.options.grid.itfCtxName&&(n["tree"===i?"itfCtxName":"tree"]=e.options.grid.itfName=t,"itfCtxName"===i&&e.updateOptions({label:t})),e.updateOptions({grid:n})}}))})),n.forEach((function(e){if(P.onCellEdit&&e.options.grid.hasOwnProperty(i)){var n=e.options.grid,a="tree"===i?n.tree!==n.itfCtxName?"itfMetricName":"itfCtxName":i,l=e.getChildren()&&e.getChildren().length&&!R?e.getChildren()[0].options.grid.itfuid:n.itfuid;P.onCellEdit({id:l,actualId:n.itfuid,param:a,newValue:t})}}))}}function pe(t){let i=e.createElement("div",{class:""});return i.value=t,i.getStringFromValue=function(e){return e||""},i.computeContentSize=function(){let e=15;for(let t=i.childNodes.length-1;t>=0;--t)e+=i.childNodes[t].getDimensions().width;return e},i}function he(t){var i=e.createElement("div",{class:"spinner spinning",styles:{display:"flex","justify-content":"center",transform:"translate3d(0,0,0)"}}).inject(t);e.createElement("span",{class:"spinner-bar"}).inject(i),e.createElement("span",{class:"spinner-bar spinner-bar1"}).inject(i),e.createElement("span",{class:"spinner-bar spinner-bar2"}).inject(i),e.createElement("span",{class:"spinner-bar spinner-bar3"}).inject(i)}function Ie(t,i,n){let a=pe(i);if(n.contains("itfIssueState_Blank"))return a;if(n.contains("itfCellIssue_QueryRunning"))he(a);else{var l=b.layout.getDataIndexFromColumnIndex(t.columnID);if("itfIssueState"===l){let t=u["itfIssueMaturity"+i],n=e.createElement("span",{html:t,class:"itfCellsPadding itfIssueState"+i});n.style.color="white",n.inject(a)}else if("itfIssuePriority"===l){let t="";"High"===i?t="high wux-ui-3ds wux-ui-3ds-level-high":"Low"===i?t="low wux-ui-3ds wux-ui-3ds-level-low":"Medium"===i?t="medium wux-ui-3ds wux-ui-3ds-level-medium":"Urgent"===i&&(t="urgent wux-ui-3ds wux-ui-3ds-alert"),e.createElement("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-lg wux-ui-3ds-"+t+" itfIssuePriority"+i+" itfCellsPadding"}).inject(a);let n=u["itfIssuePriorities"+i];e.createElement("span",{html:n}).inject(a)}}return a}function be(t,i,n){let a=pe(i);if(n.contains("itfTaskState_Blank"))return a;if(n.contains("itfCellTask_QueryRunning"))he(a);else if("itfTaskMaturityState"===b.layout.getDataIndexFromColumnIndex(t.columnID)){let t=u["itfTaskMaturity"+i],n=e.createElement("span",{html:t,class:"itfCellsPadding itfTaskState"+i});n.style.color="white",n.inject(a)}return a}function me(e,t,i,n){let a,l;"itfCellIssue_QueryRunning"===t?(l="itfCellIssue_QueryRunning"+t,e.cellView&&e.cellView.elements&&e.cellView.elements.KPIColorDiv&&e.cellView.elements.KPIColorDiv.hide()):l="itfCellState_"+t+i,b._reusableCellContentManager.isRegistered(l)||b.registerReusableCellContent({id:l,buildContent:n.bind(null,e,i,t)}),a=b.reuseCellContent(l),e.cellView._setReusableContent(a),e.cellView.getContent().removeAttribute("no-tweaker")}function we(e,t,i,n){let a,l;"itfCellTask_QueryRunning"===t?(l="itfCellTask_QueryRunning"+t,e.cellView&&e.cellView.elements&&e.cellView.elements.KPIColorDiv&&e.cellView.elements.KPIColorDiv.hide()):l="itfCellState_"+t+i,b._reusableCellContentManager.isRegistered(l)||b.registerReusableCellContent({id:l,buildContent:n.bind(null,e,i,t)}),a=b.reuseCellContent(l),e.cellView._setReusableContent(a),e.cellView.getContent().removeAttribute("no-tweaker")}function Ce(e){p.withTransactionUpdate((function(){p.search({match:function(t){e.grid.itfuid&&t.nodeModel.options.grid.itfuid===e.grid.itfuid&&(t.nodeModel.updateOptions({grid:e.grid}),function(e){let t=K.pending.indexOf(e);t>-1&&K.pending.splice(t,1),t=K.running.indexOf(e),t>-1&&K.running.splice(t,1),K.pending.length>0&&K.pending.forEach((function(e){p.search({match:function(t){if(t.nodeModel.options.grid.itfuid===e){let e=t.nodeModel.options.grid,i=e.itfuid;for(;K.running.length<40&&-1===K.running.indexOf(i);)-1===K.running.indexOf(i)&&(K.running.push(i),s.evalIssues(e,Ce))}}})}))}(e.grid.itfuid))}})}))}function Se(e){let t=e.nodeModel.options.grid;if(t.itfIssueTitle=t.itfIssueTitle?t.itfIssueTitle:"running","running"!==t.itfIssueTitle)return{icon:"-"===t.itfIssueTitle?void 0:v+"I_DMUIssueSmall.png",label:t.itfIssueTitle,url:t.itfIssueTitleUrl}}function ve(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfIssueApprovals;return void 0!==t&&"running"!==t&&""!==t?"independantBoolean":void 0}function xe(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfIssueAssignees;return void 0!==t&&"running"!==t&&""!==t?"user":void 0}function ye(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfIssueOwner;return void 0!==t&&"running"!==t&&""!==t?"user":void 0}function Fe(e){if(e){if(h.hasOwnProperty(e))return h[e];var t=s.get3DSwymUrl();return h[e]=t?t+"/api/user/getpicture/login/"+e+"/format/mini":""}}function Me(e){let t=e.nodeModel.options.grid;if(t.itfIssueAssignees=void 0!==t.itfIssueAssignees?t.itfIssueAssignees:"running","running"!==t.itfIssueAssignees)return""===t.itfIssueAssignees?t.itfIssueAssignees:t.itfIssueAssignees.map((function(e){return{label:e.label.trim(),url:Fe(e.userID)?"":void 0}}))}function Te(e){let t=e.nodeModel.options.grid;if(t.itfIssueOwner=void 0!==t.itfIssueOwner?t.itfIssueOwner:"running","running"!==t.itfIssueOwner)return""===t.itfIssueOwner?t.itfIssueOwner:t.itfIssueOwner.map((function(e){return{label:e.label.trim(),url:Fe(e.userID)?"":void 0}}))}function Pe(e,t){let i=void 0!==t?t:"running";if("running"!==i)return b.defaultOnCellRequest(e);me(e,"running"===i?"itfCellIssue_QueryRunning":i,i,Ie)}function Le(e){if(!(b&&e&&e.nodeModel&&e.cellView))return;let t=e.nodeModel.options.grid;t.mID||(t.itfIssueTitle=t.itfIssueDesc=t.itfIssueName=t.itfIssueApprovals=t.itfIssueAssignees="",t.itfIssueOwner=t.itfIssuePriority=t.itfIssueState=t.itfIssueResolvedBy=t.itfIssueModified="");var i=b.layout.getDataIndexFromColumnIndex(e.columnID);if("itfIssueTitle"===i)Pe(e,t.itfIssueTitle);else if("itfIssueDesc"===i)Pe(e,t.itfIssueDesc);else if("itfIssueName"===i)Pe(e,t.itfIssueName);else if("itfIssueOwner"===i)Pe(e,t.itfIssueOwner);else if("itfIssueAssignees"===i)Pe(e,t.itfIssueAssignees);else if("itfIssueApprovals"===i)Pe(e,t.itfIssueApprovals);else if("itfIssueResolvedBy"===i)Pe(e,t.itfIssueResolvedBy);else if("itfIssueModified"===i)Pe(e,t.itfIssueModified);else if("itfIssuePriority"===i){t.itfIssuePriority=void 0!==t.itfIssuePriority?t.itfIssuePriority:"running",me(e,"running"===t.itfIssuePriority?"itfCellIssue_QueryRunning":t.itfIssuePriority,t.itfIssuePriority,Ie)}else if("itfIssueState"===i){t.itfIssueState=void 0!==t.itfIssueState?t.itfIssueState:"running",me(e,"running"===t.itfIssueState?"itfCellIssue_QueryRunning":""===t.itfIssueState?"itfIssueState_Blank":t.itfIssueState,t.itfIssueState,Ie)}if(t.mID&&(!t.itfIssueTitle||"running"===t.itfIssueTitle)&&-1===K.running.indexOf(t.itfuid)){let e=t.itfuid;for(-1===K.pending.indexOf(e)&&K.pending.push(e);K.running.length<40&&-1===K.running.indexOf(e);)s.evalIssues(t,Ce),-1===K.running.indexOf(e)&&K.running.push(e)}}function De(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfTaskOriginator;return void 0!==t&&"running"!==t&&""!==t?"user":void 0}function Re(e){let t=e.nodeModel.options.grid;if(t.itfTaskOriginator=void 0!==t.itfTaskOriginator?t.itfTaskOriginator:"running","running"!==t.itfTaskOriginator)return""===t.itfTaskOriginator?t.itfTaskOriginator:t.itfTaskOriginator.map((function(e){return{label:e.label.trim(),url:Fe(e.userID)?"":void 0}}))}function ke(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfTaskAssignees;return void 0!==t&&"running"!==t&&""!==t?"user":void 0}function Ee(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfTaskCandiAssignment;return void 0!==t&&"running"!==t&&""!==t?"user":void 0}function Oe(e){let t=e.nodeModel.options.grid;if(t.itfTaskAssignees=void 0!==t.itfTaskAssignees?t.itfTaskAssignees:"running","running"!==t.itfTaskAssignees)return""===t.itfTaskAssignees?t.itfTaskAssignees:t.itfTaskAssignees.map((function(e){return{label:e.label.trim(),url:Fe(e.userID)?"":void 0}}))}function Ae(e){let t=e.nodeModel.options.grid;if(t.itfTaskCandiAssignment=void 0!==t.itfTaskCandiAssignment?t.itfTaskCandiAssignment:"running","running"!==t.itfTaskCandiAssignment)return""===t.itfTaskCandiAssignment?t.itfTaskCandiAssignment:t.itfTaskCandiAssignment.map((function(e){if(e&&e.dataelements)return{label:e.dataelements.firstname+" "+e.dataelements.lastname,url:e.dataelements.image?"":void 0}}))}function Ve(e){if(!e||-1===e.rowID||!e.nodeModel)return;let t=e.nodeModel.options.grid.itfTaskOwner;return void 0!==t&&"running"!==t&&""!==t?"user":void 0}function Ne(e){let t=e.nodeModel.options.grid;if(t.itfTaskOwner=void 0!==t.itfTaskOwner?t.itfTaskOwner:"running","running"!==t.itfTaskOwner)return""===t.itfTaskOwner?t.itfTaskOwner:t.itfTaskOwner.map((function(e){return{label:e.label.trim(),url:Fe(e.userID)?"":void 0}}))}function Ue(e){let t=e.nodeModel.options.grid;if(t.itfTaskTitle=t.itfTaskTitle?t.itfTaskTitle:"running","running"!==t.itfTaskTitle)return{icon:"-"===t.itfTaskTitle?void 0:v+"I_CollaborativeTask.png",label:t.itfTaskTitle,parameters:t.itfTaskIds,module:"DS/PIMwebUX/PIMwebDetailedItfListUI",func:function(e){if(e.context.cellModel.parameters&&1===e.context.cellModel.parameters.length)window.open(s.computeSharedTaskURL(e.context.cellModel.parameters),"_blank");else if(e.context.cellModel.parameters&&e.context.cellModel.parameters.length>1){for(var t="",i=e.context.cellModel.parameters.length,n=0;n<i;n++)t+="(physicalid:"+e.context.cellModel.parameters[n]+")",i>1&&n<i-1&&(t+=" OR ");s.launchSearchPanel({title:u.itfSearchTaskTitle,precondition:t,showApplyButton:!1,mode:"false"})}}}}function je(e,t){let i=void 0!==t?t:"running";if("running"!==i)return b.defaultOnCellRequest(e);we(e,"running"===i?"itfCellTask_QueryRunning":i,i,be)}function Ge(e){if(!(b&&e&&e.nodeModel&&e.cellView))return;let t=e.nodeModel.options.grid;t.mID||(t.itfTaskTitle=t.itfTaskName=t.itfTaskMaturityState=t.itfTaskDesc=t.itfTaskAssignees=t.itfTaskCandiAssignment="",t.itfTaskOriginator=t.itfTaskOwner=t.itfTaskEstiFinDate=t.itfTaskEstiDuration=t.itfTaskCreateDate=t.itfTaskModifDate="");var i=b.layout.getDataIndexFromColumnIndex(e.columnID);if("itfTaskTitle"===i)je(e,t.itfTaskTitle);else if("itfTaskName"===i)je(e,t.itfTaskName);else if("itfTaskMaturityState"===i){t.itfTaskMaturityState=void 0!==t.itfTaskMaturityState?t.itfTaskMaturityState:"running",we(e,"running"===t.itfTaskMaturityState?"itfCellTask_QueryRunning":""===t.itfTaskMaturityState?"itfTaskState_Blank":t.itfTaskMaturityState,t.itfTaskMaturityState,be)}else"itfTaskDesc"===i?je(e,t.itfTaskDesc):"itfTaskAssignees"===i?je(e,t.itfTaskAssignees):"itfTaskCandiAssignment"===i?je(e,t.itfTaskCandiAssignment):"itfTaskOriginator"===i?je(e,t.itfTaskOriginator):"itfTaskOwner"===i?je(e,t.itfTaskOwner):"itfTaskEstiFinDate"===i?je(e,t.itfTaskEstiFinDate):"itfTaskEstiDuration"===i?je(e,t.itfTaskEstiDuration):"itfTaskCreateDate"===i?je(e,t.itfTaskCreateDate):"itfTaskModifDate"===i&&je(e,t.itfTaskModifDate);if(t.mID&&(!t.itfTaskTitle||"running"===t.itfTaskTitle)&&-1===K.running.indexOf(t.itfuid)){let e=t.itfuid;for(-1===K.pending.indexOf(e)&&K.pending.push(e);K.running.length<40&&-1===K.running.indexOf(e);)s.evalIssues(t,Ce),-1===K.running.indexOf(e)&&K.running.push(e)}}function _e(e,t,i){let n=pe(t);return i.contains("itfCellCust_QueryRunning")&&he(n),n}function We(e){if(!b||!e||!e.nodeModel)return;let t=b.layout.getDataIndexFromColumnIndex(e.columnID);return Boolean(e.nodeModel.options.grid[t])}function Be(e){if(!b||!e||!e.nodeModel)return;let t=b.layout.getDataIndexFromColumnIndex(e.columnID),i=e.nodeModel.options.grid[t];return i?{url:Fe(e.nodeModel.options.grid[t+"ID"])?"":void 0,label:i}:void 0}function Qe(e,t){if("running"!==t)return b.defaultOnCellRequest(e);!function(e,t,i,n){let a,l;"itfCellCust_QueryRunning"===t?(l="itfCellCust_QueryRunning"+t,e.cellView&&e.cellView.elements&&e.cellView.elements.KPIColorDiv&&e.cellView.elements.KPIColorDiv.hide()):l="itfCellState_"+t+i,b._reusableCellContentManager.isRegistered(l)||b.registerReusableCellContent({id:l,buildContent:n.bind(null,e,i,t)}),a=b.reuseCellContent(l),e.cellView._setReusableContent(a),e.cellView.getContent().removeAttribute("no-tweaker")}(e,"running"===t?"itfCellCust_QueryRunning":t,t,_e)}function Xe(e){let t;if(!(b&&e&&e.nodeModel&&e.cellView))return;var i=b.layout.getDataIndexFromColumnIndex(e.columnID);let n=e.nodeModel.options.grid;t=i in n&&!0===n.isQueryValueFetched?n[i]:i in n==!1&&!0===n.isQueryValueFetched?u.itfCustErrorMsg:"running",Qe(e,t)}function Ke(e){if(Array.isArray(e)&&"function"==typeof P.onSelect){var t=[],i=[];e.forEach((function(e){e.hasChildren()||-1!==t.indexOf(e.options.grid.itfuid)?e.processDescendants({processNode:function(e){var i=e.nodeModel;-1!==t.indexOf(i.options.grid.itfuid)||i.getChildren()||i.isFiltered()||i.isSelected()||t.push(e.nodeModel.options.grid.itfuid)}}):t.push(e.options.grid.itfuid),e.options.grid&&e.options.grid.itfuid&&i.push(e.options.grid.itfuid)})),P.onSelect({idsSelected:t,actualIdsSelected:i})}}function ze(e){if(Array.isArray(e)&&"function"==typeof P.onUnselect){var t=[],i=[];e.forEach((function(e){0===e.getParents().filter((function(e){return e.isSelected()})).length&&(e.hasChildren()||-1!==t.indexOf(e.options.grid.itfuid)?e.processDescendants({processNode:function(e){var i=e.nodeModel,n=i&&i.getParents().some((function(e){return e.isSelected()}));!i||n||-1!==t.indexOf(i.options.grid.itfuid)||i.getChildren()||i.isSelected()||t.push(e.nodeModel.options.grid.itfuid)}}):t.push(e.options.grid.itfuid)),e.options.grid&&e.options.grid.itfuid&&i.push(e.options.grid.itfuid)})),R?P.onUnselect(t,i):P.onUnselect(t,null,i)}}function qe(e){e&&(e.itfQuantifier=void 0,"Clash"===e.itfSystemType?e.itfQuantifier=A?e.itfPenVol:e.itfPenVec:"Clearance"===e.itfSystemType&&(e.itfQuantifier=e.itfMinDist))}function He(e){Object.keys(e).forEach((function(t){var i=e[t];i&&i.itfuid&&"Clash"===i.itfSystemType&&(i.itfPenVol&&i.itfPenVec?X=3:i.itfPenVol?X=2===X?3:1:i.itfPenVec&&(X=1===X?3:2),A=3===X||1===X),3!==X&&e[t]&&("object"==typeof e[t]||Array.isArray(e[t]))&&He(e[t])}))}function Je(e,t){if(void 0!==e.itfuid){qe(e);var i={label:e.itfName,grid:e,getAttributeValueForFiltering:te};e.icons&&e.itfName&&(i.icons=e.icons.map((e=>v+e)));var n=new a(i);return I[e.itfuid]=n,window.__karma__&&(n.toChangeValueForODT=ge),t&&t.addChild(n),n}}function Ye(e){3!==X&&He(e);var t=[];function i(e,n){var a=n,l=a===p;if(e.hasOwnProperty("row")&&(a=Je(e.row,l?void 0:a),l&&t.push(a)),e.hasOwnProperty("children")){var s=e.children;Object.keys(s).forEach((function(e){s[e].hasOwnProperty("row")&&i(s[e],a)}))}}Object.keys(e).forEach((function(t){i(e[t],p)})),t.length&&p.addRoot(t)}$(e.extend({length:{unit:"mm",decimalRW:3,decimalRO:3},volume:{unit:"mm3",decimalRW:3,decimalRO:3}},t.units)),this.onIssueOrTaskSuccess=function(e,t,i){p.withTransactionUpdate((function(){p.search({match:function(n){if(e.itfuid&&n.nodeModel.options.grid.itfuid===e.itfuid){e.itfIssueTitle=e.itfIssueState=e.itfIssueDesc=e.itfIssueName=e.itfIssuePriority=e.itfIssueApprovals=e.itfIssueAssignees=e.itfIssueOwner=e.itfIssueResolvedBy=e.itfIssueModified="running",e.itfTaskTitle=e.itfTaskName=e.itfTaskMaturityState=e.itfTaskDesc=e.itfTaskAssignees=e.itfTaskCandiAssignment=e.itfTaskOriginator=e.itfTaskOwner=e.itfTaskEstiFinDate=e.itfTaskEstiDuration=e.itfTaskCreateDate=e.itfTaskModifDate="running";let a=K.running.indexOf(e.itfuid);if(a>=0&&K.running.splice(a,1),sessionStorage)if("Issue"===i){let i=sessionStorage.getItem("PIMItfNewIssue"),n=i&&void 0!==i?JSON.parse(i):{};void 0===n[e.itfuid]?(n[e.itfuid]=[{time:Date.now(),id:t}],sessionStorage.setItem("PIMItfNewIssue",JSON.stringify(n))):-1===n[e.itfuid].indexOf(t)&&(n[e.itfuid].push({time:Date.now(),id:t}),sessionStorage.setItem("PIMItfNewIssue",JSON.stringify(n)))}else if("Task"===i){let i=sessionStorage.getItem("PIMItfNewTask"),n=i&&void 0!==i?JSON.parse(i):{};void 0===n[e.itfuid]?(n[e.itfuid]=[{time:Date.now(),id:t}],sessionStorage.setItem("PIMItfNewTask",JSON.stringify(n))):-1===n[e.itfuid].indexOf(t)&&(n[e.itfuid].push({time:Date.now(),id:t}),sessionStorage.setItem("PIMItfNewTask",JSON.stringify(n)))}n.nodeModel.updateOptions({grid:e})}}})}))},this.updateInterferences=function(e){0===Object.keys(I).length?Ye(e):p.withTransactionUpdate((function(){function t(e,t){!e.search({match:function(e){if(e.nodeModel.options.grid.itfuid===t)return!0}}).length&&I[t]&&(e.addChild(I[t]),3!==X&&He([I[t].options.grid]))}function i(e){Object.keys(e).forEach((function(n){if(e[n]&&e[n].itfuid&&"object"==typeof e[n]){var a=e[n];3!==X&&He([a.itfuid]),I.hasOwnProperty(a.itfuid)&&(qe(a),I[a.itfuid].updateOptions({label:a.itfName,grid:a})),I[a.itfuid]||Je(a,a.childOf?void 0:p),a.childIds&&e.children&&a.childIds.length===Object.keys(e.children).length&&Object.keys(e.children).forEach((function(i){I[a.childIds[i]]?e.children[i]&&e.children[i].row&&t(I[a.itfuid],e.children[i].row.itfuid):Je(e.children[i],I[a.itfuid])})),a.childOf&&I[a.childOf]&&t(I[a.childOf],a.itfuid)}if(e.hasOwnProperty("row")&&i(e[n]),e.hasOwnProperty("children")){var l=e.children;Object.keys(l).forEach((function(e){l[e].hasOwnProperty("row")&&i(l[e])}))}}))}Object.keys(e).forEach((function(t){e[t].hasOwnProperty("row")&&i(e[t])}))})),ue()},this.showSlideColumn=function(e){r.forEach((function(t){"itfLblSlide"===t.dataIndex&&b.layout.setColumnVisibleFlag(t.dataIndex,e,{isUserInteraction:!0})}))},this.removeInterferences=function(){X=0,A=!0,b.getNodesXSO().empty(),p.empty(),I={}},this.getSelectedInterferences=function(e){return e?b.getTreeDocument().getSelectedNodes().map((function(e){return e.options.grid.itfuid})).filter((function(e){return e})):this.getLeafNodeIds(!0)},this.getSelectedRows=function(){var e=[];return b.getNodesXSO().get().forEach((function(t){var i=b.layout.getCellsFromNodeModel(t,!0);i&&e.push(b.getCellInfosAt(i[0]).rowID)})),e.sort(Q)},this.selectRows=function(e){var t=e.map((function(e){return b.model[e]}));p.withTransactionUpdate((function(){b.unselectAll(),b.setActiveCell(-1,!1,!1),t.forEach((function(e){b.selectNodeModel(e,!0,!1)})),b.ensureNodeModelVisible(t[0],!1,!0)}))},this.selectRowsByUID=function(e,t){var i,n=this.getSelectedInterferences();if(!t&&n.length===e.length&&e.every((function(e,t){return e===n[t]})))return 1;b.unselectAll(),b.setActiveCell(-1,!1,!1),e.forEach((function(e){e&&p.search({match:function(t){var n=t.nodeModel.options.grid;(n.itfuid===e||n.childIds&&1===n.childIds.length&&n.childIds.indexOf(e)>-1)&&(b.selectNodeModel(t.nodeModel,!0,!1),i||(i=t.nodeModel))}})})),i&&b.ensureNodeModelVisible(i,!1,!0)},this.selectOrUnselectAll=function(e){e?b.selectAllVisibleNodes():b.unselectAll()},this.selectOrUnselectRows=function(e,t,i,n){var a=e.map((function(e){return b.model[e]}));p.withTransactionUpdate((function(){a.forEach((function(e){t?b.selectNodeModel(e,i,n):b.unselectNodeModel(e)}))})),b.ensureNodeModelVisible(a[0],!1,!0),n||b.setActiveCell(b.layout.getCellsFromNodeModel(a[0],!0)[0],!1,!0)},this.getNumberOfRows=function(){return b.model.length},this.removeCustoColoumn=function(){for(var e=b.layout.columns.length;e>c;e--)b.layout.columns.pop()},this.addCustoColumn=function(e){!function(e){var t=!1;for(let n=0;n<b.layout.columns.length;n++){var i=b.layout.columns[n];if(i&&i.dataIndex===e.dataIndex&&i.text===e.text){t=!0;break}}if(!t){let t={dataIndex:e.dataIndex,text:e.text,editableFlag:e.editableFlag&&!z,visibleFlag:!0,width:"auto",getCellValue:ne,onCellRequest:Xe};e.editableFlag&&Object.assign(t,{setCellValue:ge}),b.addColumnOrGroup(t)}}(e)},this.addColsFromDefaultView=function(e){var t=[];e.forEach((function(e){t.push(void 0===Object.keys(F).find((t=>F[t]===e))?e:Object.keys(F).find((t=>F[t]===e)))}));const i=t.filter((e=>e));!function(e){var t=b.getCustomViewsManager().getCustomViews().length>0?b.getCustomViewsManager().getCustomViews()[0]:b.getCustomViewsManager().getCustomViews();r.forEach((function(i){var n=e.includes(i.dataIndex);if(void 0!==t.columnsVisibleFlag&&t.columnsVisibleFlag.hasOwnProperty(i.dataIndex))t.columnsVisibleFlag[i.dataIndex]=n;else{var a={};void 0===t.columnsVisibleFlag&&(t.columnsVisibleFlag={}),a[i.dataIndex]=n,Object.assign(t.columnsVisibleFlag,a)}}))}(i),function(e){var t=b.layout.getVisibleOrderedLeafColumns().map((function(e){return e.dataIndex}));if(!(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,i)=>e===t[i])))){for(var i=0;i<e.length;i++)if(void 0!==b.getColumnOrGroup(e[i])){var n=b.getColumnOrGroup(e[i]);b.removeColumnOrGroup(e[i]),b.addColumnOrGroup(n,i)}(b.getCustomViewsManager().getCurrentCustomView()&&"Default View"===b.getCustomViewsManager().getCurrentCustomView().identifier||void 0===b.getCustomViewsManager().getCurrentCustomView())&&b.getCustomViewsManager().setCustomViews(b.getCustomViewsManager()._customViews,"Default View",!0,!0)}}(i)},this.addCustomAttrKeyAndName=function(e){var t={};t[e]=e,Object.assign(F,t)},this.getVisibleRows=function(){if(b)return b.model.map((function(e){return e.options.grid.itfuid}))},this.setListUIReadyOnlyFlagForCSICompute=function(e){w="pending"===e||"running"===e,z=m||w},this.getInternalChildInfo=function(e){var t;if(e)return p.search({match:function(i){var n=i.nodeModel.options.grid;(n.itfuid===e||n.childIds&&1===n.childIds.length&&n.childIds.indexOf(e)>-1)&&(t=n)}}),t},this.IsPenVolInQuantCol=function(){return A},this.toggleReadOnly=function(){p.withTransactionUpdate((function(){z=!z;var e=["tree","itfCtxName","itfDescription","itfUserType","itfAnalysis"];r.forEach((function(t){e.indexOf(t.dataIndex)>-1&&(t[b?"editableFlag":"isEditable"]=!z)}))}))},this.getRowInternalData=function(e){return e<=b.model.length?b.model[e].options.grid:{}},this.getColumns=function(){if(!b)return{};var e=[];return b.columns.forEach((function(t){e.push({dataIndex:t.dataIndex,text:t.text,editableFlag:t.editableFlag,visibleFlag:t.visibleFlag})})),e},this.getRowData=function(e,t,i){if(e>b.model.length)return[];var n=[],a=b.model[e].options.grid,l=b.layout.getLeafColumns();return t||(l=b.layout.getVisibleOrderedColumnsIndexes().map((function(e){return l[e]}))),l.forEach((function(t){if(a[t.dataIndex]){var l=i?t.text:t.dataIndex;if("function"==typeof t.getCellValueForExport){var s=b.layout.getCellIDFromCoordinates({rowID:e,columnID:b.layout.getColumnIndex(t.dataIndex)});if(void 0!==b.getCellInfosAt(s).cellModel){var o=t.getCellValueForExport(b.getCellInfosAt(s));n[l]=o||" "}}else"time"===t.typeRepresentation?n[l]=new Date(a[t.dataIndex]).toLocaleString():n[l]=a[t.dataIndex]?a[t.dataIndex]:" "}})),i||(n.itfuid=a.itfuid?a.itfuid:void 0),n},this.getRowInfosFromMousePosition=function(e){var t=b.layout.getCellIDFromPositionInView(e),i=b.getCellInfosAt(t).rowID;return i>=0?P.getRowData(i,!1,!0):[]},this.ensureSelectedLineVisibility=function(){var e=b.getNodesXSO().get();e&&0!==e.length&&b.ensureNodeModelVisible(e[0],!1,!0)},this.setUnits=$,this.exportAsCSV=function(e){return b.getAsCSV(e)},this.isDataGridReady=function(){return L},this.switchQuantifierColumnVal=function(e){A=e.isPenVolume,p.getAllDescendants().forEach((function(t){"Clash"===t.options.grid.itfSystemType&&(t.options.grid.itfQuantifier=e.isPenVolume?t.options.grid.itfPenVol:t.options.grid.itfPenVec,t.updateOptions({grid:t.options.grid}))})),ue()},this.reApplyFilterAndSort=ue,this.updateDataGridView=function(e){setTimeout((function(){b.invalidateLayout(e)}),0)},this.getLeafNodeIds=function(e){var t=e?b.getTreeDocument().getSelectedNodes():[p],i=[];return 1!==t.length||t[0].getChildren()?t.forEach((function(e){!e.getChildren()&&e.options.grid.itfuid?i.push(e.options.grid.itfuid):e.processDescendants({processNode:function(e){e.nodeModel.getChildren()||e.nodeModel.isFiltered()||!e.nodeModel.options.grid.itfuid||i.push(e.nodeModel.options.grid.itfuid)}})})):i.push(t[0].options.grid.itfuid),i},this.updateModel=function(e,t,i){var n={},a=[];n[t]=i,p.search({match:function(l){e&&l.nodeModel.options.grid.itfuid===e&&("tree"===t&&l.nodeModel.updateOptions({label:i}),l.nodeModel.updateOptions({grid:n}),a.push(l.nodeModel))}}),a.forEach((function(e){"function"==typeof e.onAttributeChangeFromUI&&e.onAttributeChangeFromUI({dataIndex:t,newValue:i})}))},this.expandOrCollapse=function(e,t,i,n){var a=e?b.model:i||t.map((function(e){return b.model[e]})),l=[];return a.forEach((function(e){e.canBeExpanded()&&(n&&!e.isExpanded()||!n&&e.isExpanded())&&(i||e.getAllDescendants().forEach((function(e){e.canBeExpanded()&&e.options.grid.itfuid&&(n&&!e.isExpanded()||!n&&e.isExpanded())&&(l.push(e),n?e.expand():e.collapse())})),l.push(e),n?e.expand():e.collapse())})),l},this.showListRefreshWarning=function(e){q=e,e?H&&b&&"hidden"===H.style.visibility&&(H.style.visibility="visible",b.getContent().setStyles({top:"50px"})):H&&b&&"visible"===H.style.visibility&&(H.style.visibility="hidden",b.getContent().setStyles({top:"0px"}))},this.setIsItfListRefreshRunning=function(e){(Y=e)?(Y=!0,Z.disabled=!0):Z&&(Z.disabled=!1)},this.onSelect=null,this.onUnselect=null,this.onCellEdit=null,this.onHideShowOpaSlider=null,this.contextualEvent=null,this.onItfListRefresh=null,function(){!function(){if(!r){var e={itfLblSlide:{dataIndex:"itfLblSlide",icon:S,editableFlag:!1,getCellValue:ie,getCellTypeRepresentation:_,getCellValueForExport:de,compareFunction:U,getCellSelectableState:re,pinned:"left",visibleFlag:!1,width:"50"},tree:{dataIndex:"tree",text:u.itfName,editableFlag:!z,getCellEditableState:ce,setCellValue:ge,getCellValueForExport:de,alwaysVisibleFlag:!0,width:"15%"},itfCtxName:{dataIndex:"itfCtxName",text:u.itfCtxName,editableFlag:!z,getCellEditableState:ce,setCellValue:ge,visibleFlag:!1,width:"auto"},itfSystemType:{dataIndex:"itfSystemType",text:u.itfSystemType,getCellValue:ae,editableFlag:!1,width:"auto"},itfUserType:{dataIndex:"itfUserType",text:u.itfUserType,editableFlag:!z,getCellEditableState:ce,setCellValue:ge,width:"auto",compareFunction:V,getCellKPIColor:W,getCellTypeRepresentation:j,editionPolicy:"EditionOnOver",getCellValueForExport:de},itfAnalysis:{dataIndex:"itfAnalysis",text:u.itfAnalysis,editableFlag:!z,getCellEditableState:ce,setCellValue:ge,width:"auto",compareFunction:N,getCellKPIColor:B,getCellTypeRepresentation:G,editionPolicy:"EditionOnOver",getCellValueForExport:de},itfPrevAnalysis:{dataIndex:"itfPrevAnalysis",text:u.itfPrevAnalysis,getCellValue:le,editableFlag:!1,width:"auto"},itfLblInst1Path:{dataIndex:"itfLblInst1Path",text:u.itfLblInst1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Path:{dataIndex:"itfLblInst2Path",text:u.itfLblInst2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Path:{dataIndex:"itfLblRef1Path",text:u.itfLblRef1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2Path:{dataIndex:"itfLblRef2Path",text:u.itfLblRef2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst1:{dataIndex:"itfLblFstInst1",text:u.itfLblFstInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1:{dataIndex:"itfLblInst1",text:u.itfLblInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst2:{dataIndex:"itfLblFstInst2",text:u.itfLblFstInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2:{dataIndex:"itfLblInst2",text:u.itfLblInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstType1:{dataIndex:"itfLblFstType1",text:u.itfLblFstType1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef1:{dataIndex:"itfLblFstRef1",text:u.itfLblFstRef1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1:{dataIndex:"itfLblRef1",text:u.itfLblRef1,editableFlag:!1,width:"auto"},itfLblFstType2:{dataIndex:"itfLblFstType2",text:u.itfLblFstType2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef2:{dataIndex:"itfLblFstRef2",text:u.itfLblFstRef2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2:{dataIndex:"itfLblRef2",text:u.itfLblRef2,editableFlag:!1,width:"auto"},itfFeatName1:{dataIndex:"itfFeatName1",text:u.itfFeatName1,editableFlag:!1,width:"auto",visibleFlag:!1},itfFeatName2:{dataIndex:"itfFeatName2",text:u.itfFeatName2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1:{dataIndex:"itfLblShape1",text:u.itfLblShape1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2:{dataIndex:"itfLblShape2",text:u.itfLblShape2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1Owner:{dataIndex:"itfLblInst1Owner",text:u.itfLblInst1Owner,typeRepresentation:"user",hasCellValue:We,getCellValue:Be,getCellValueForExport:de,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Owner:{dataIndex:"itfLblInst2Owner",text:u.itfLblInst2Owner,typeRepresentation:"user",hasCellValue:We,getCellValue:Be,getCellValueForExport:de,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Owner:{dataIndex:"itfLblRef1Owner",text:u.itfLblRef1Owner,typeRepresentation:"user",hasCellValue:We,getCellValue:Be,getCellValueForExport:de,editableFlag:!1,width:"auto"},itfLblRef2Owner:{dataIndex:"itfLblRef2Owner",text:u.itfLblRef2Owner,typeRepresentation:"user",hasCellValue:We,getCellValue:Be,getCellValueForExport:de,editableFlag:!1,width:"auto"},itfLblShape1Owner:{dataIndex:"itfLblShape1Owner",text:u.itfLblShape1Owner,typeRepresentation:"user",hasCellValue:We,getCellValue:Be,getCellValueForExport:de,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2Owner:{dataIndex:"itfLblShape2Owner",text:u.itfLblShape2Owner,typeRepresentation:"user",hasCellValue:We,getCellValue:Be,getCellValueForExport:de,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1OwnerID:{dataIndex:"itfLblInst1OwnerID",text:u.itfLblInst1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2OwnerID:{dataIndex:"itfLblInst2OwnerID",text:u.itfLblInst2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity1Ref:{dataIndex:"itfLblMaturity1Ref",text:u.itfLblMaturity1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity2Ref:{dataIndex:"itfLblMaturity2Ref",text:u.itfLblMaturity2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization1Ref:{dataIndex:"itfLblOrganization1Ref",text:u.itfLblOrganization1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization2Ref:{dataIndex:"itfLblOrganization2Ref",text:u.itfLblOrganization2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace1Ref:{dataIndex:"itfLblCollabSpace1Ref",text:u.itfLblCollabSpace1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace2Ref:{dataIndex:"itfLblCollabSpace2Ref",text:u.itfLblCollabSpace2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1OwnerID:{dataIndex:"itfLblRef1OwnerID",text:u.itfLblRef1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2OwnerID:{dataIndex:"itfLblRef2OwnerID",text:u.itfLblRef2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision1Ref:{dataIndex:"itfLblRevision1Ref",text:u.itfLblRevision1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision2Ref:{dataIndex:"itfLblRevision2Ref",text:u.itfLblRevision2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblReference1Title:{dataIndex:"itfLblReference1Title",text:u.itfLblReference1Title,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblReference2Title:{dataIndex:"itfLblReference2Title",text:u.itfLblReference2Title,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblReference1Name:{dataIndex:"itfLblReference1Name",text:u.itfLblReference1Name,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblReference2Name:{dataIndex:"itfLblReference2Name",text:u.itfLblReference2Name,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblReference1EnterpriseNum:{dataIndex:"itfLblReference1EnterpriseNum",text:u.itfLblReference1EnterpriseNum,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblReference2EnterpriseNum:{dataIndex:"itfLblReference2EnterpriseNum",text:u.itfLblReference2EnterpriseNum,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity1Shape:{dataIndex:"itfLblMaturity1Shape",text:u.itfLblMaturity1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity2Shape:{dataIndex:"itfLblMaturity2Shape",text:u.itfLblMaturity2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization1Shape:{dataIndex:"itfLblOrganization1Shape",text:u.itfLblOrganization1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization2Shape:{dataIndex:"itfLblOrganization2Shape",text:u.itfLblOrganization2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace1Shape:{dataIndex:"itfLblCollabSpace1Shape",text:u.itfLblCollabSpace1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace2Shape:{dataIndex:"itfLblCollabSpace2Shape",text:u.itfLblCollabSpace2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1OwnerID:{dataIndex:"itfLblShape1OwnerID",text:u.itfLblShape1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2OwnerID:{dataIndex:"itfLblShape2OwnerID",text:u.itfLblShape2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision1Shape:{dataIndex:"itfLblRevision1Shape",text:u.itfLblRevision1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision2Shape:{dataIndex:"itfLblRevision2Shape",text:u.itfLblRevision2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLbl3DAccuracy1Shape:{dataIndex:"itfLbl3DAccuracy1Shape",text:u.itfLbl3DAccuracy1Shape,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:ie,getCellSemantics:se,getCellValueForExport:oe,visibleFlag:!1},itfLbl3DAccuracy2Shape:{dataIndex:"itfLbl3DAccuracy2Shape",text:u.itfLbl3DAccuracy2Shape,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:ie,getCellSemantics:se,getCellValueForExport:oe,visibleFlag:!1},itfLblShape1Name:{dataIndex:"itfLblShape1Name",text:u.itfLblShape1Name,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2Name:{dataIndex:"itfLblShape2Name",text:u.itfLblShape2Name,editableFlag:!1,width:"auto",visibleFlag:!1},itfQuantifier:{dataIndex:"itfQuantifier",text:u.itfQuantifier,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:ie,getCellSemantics:se,getCellValueForExport:oe},itfPenVol:{dataIndex:"itfPenVol",text:u.itfPenVol,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:ie,getCellSemantics:se,getCellValueForExport:oe},itfPenVec:{dataIndex:"itfPenVec",text:u.itfPenVec,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:ie,getCellSemantics:se,getCellValueForExport:oe},itfMinDist:{dataIndex:"itfMinDist",text:u.itfMinDist,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:ie,getCellSemantics:se,getCellValueForExport:oe},itfDescription:{dataIndex:"itfDescription",text:u.itfDescription,editableFlag:!z,getCellEditableState:ce,setCellValue:ge,width:"auto"},itfTolerance:{dataIndex:"itfTolerance",text:u.itfTolerance,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:ie,getCellSemantics:se,getCellValueForExport:oe},itfOwner:{dataIndex:"itfOwner",text:u.itfOwner,typeRepresentation:"user",hasCellValue:We,getCellValue:Be,getCellValueForExport:de,editableFlag:!1,width:"auto"},itfOwnerID:{dataIndex:"itfOwnerID",text:u.itfOwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfCurrent:{dataIndex:"itfCurrent",text:u.itfCurrent,editableFlag:!1,width:"auto",visibleFlag:!1},itfIssueTitle:{dataIndex:"itfIssueTitle",text:u.itfIssueTitle,onCellRequest:Le,getCellValue:Se,typeRepresentation:"url",getCellValueForExport:de,editableFlag:!1,visibleFlag:!1,width:"auto"},itfIssueState:{dataIndex:"itfIssueState",text:u.itfIssueState,onCellRequest:Le,editableFlag:!1,visibleFlag:!1,width:"auto",getCellValueForExport:de},itfIssueDesc:{dataIndex:"itfIssueDesc",text:u.itfIssueDesc,onCellRequest:Le,editableFlag:!1,visibleFlag:!1,width:"auto"},itfIssueName:{dataIndex:"itfIssueName",text:u.itfIssueName,onCellRequest:Le,editableFlag:!1,visibleFlag:!1,width:"auto"},itfIssuePriority:{dataIndex:"itfIssuePriority",text:u.itfIssuePriority,onCellRequest:Le,typeRepresentation:"url",editableFlag:!1,visibleFlag:!1,width:"auto",getCellValueForExport:de},itfIssueApprovals:{dataIndex:"itfIssueApprovals",text:u.itfIssueApprovals,editionPolicy:"EditionInPlace",setCellValue:fe,getCellTypeRepresentation:ve,onCellRequest:Le,editableFlag:!0,visibleFlag:!1},itfIssueAssignees:{dataIndex:"itfIssueAssignees",text:u.itfIssueAssignees,getCellTypeRepresentation:xe,onCellRequest:Le,getCellValue:Me,getCellValueForExport:de,editableFlag:!1,visibleFlag:!1},itfIssueOwner:{dataIndex:"itfIssueOwner",text:u.itfIssueOwner,getCellTypeRepresentation:ye,onCellRequest:Le,getCellValue:Te,getCellValueForExport:de,editableFlag:!1,visibleFlag:!1},itfIssueResolvedBy:{dataIndex:"itfIssueResolvedBy",text:u.itfIssueResolvedBy,onCellRequest:Le,editableFlag:!1,visibleFlag:!1},itfIssueModified:{dataIndex:"itfIssueModified",typeRepresentation:"datetime",text:u.itfIssueModified,onCellRequest:Le,editableFlag:!1,visibleFlag:!1},itfTaskTitle:{dataIndex:"itfTaskTitle",text:u.itfTaskTitle,onCellRequest:Ge,getCellValue:Ue,typeRepresentation:"url",getCellValueForExport:de,editableFlag:!1,visibleFlag:!1,width:"auto"},itfTaskName:{dataIndex:"itfTaskName",text:u.itfTaskName,onCellRequest:Ge,editableFlag:!1,visibleFlag:!1,width:"auto"},itfTaskMaturityState:{dataIndex:"itfTaskMaturityState",text:u.itfTaskMaturityState,onCellRequest:Ge,editableFlag:!1,visibleFlag:!1,width:"auto",getCellValueForExport:de},itfTaskDesc:{dataIndex:"itfTaskDesc",text:u.itfTaskDesc,onCellRequest:Ge,editableFlag:!1,visibleFlag:!1,width:"auto"},itfTaskAssignees:{dataIndex:"itfTaskAssignees",text:u.itfTaskAssignees,getCellTypeRepresentation:ke,onCellRequest:Ge,getCellValue:Oe,getCellValueForExport:de,editableFlag:!1,visibleFlag:!1},itfTaskCandiAssignment:{dataIndex:"itfTaskCandiAssignment",text:u.itfTaskCandiAssignment,getCellTypeRepresentation:Ee,onCellRequest:Ge,getCellValue:Ae,getCellValueForExport:de,editableFlag:!1,visibleFlag:!1},itfTaskOriginator:{dataIndex:"itfTaskOriginator",text:u.itfTaskOriginator,getCellTypeRepresentation:De,onCellRequest:Ge,getCellValue:Re,getCellValueForExport:de,editableFlag:!1,visibleFlag:!1},itfTaskOwner:{dataIndex:"itfTaskOwner",text:u.itfTaskOwner,getCellTypeRepresentation:Ve,onCellRequest:Ge,getCellValue:Ne,getCellValueForExport:de,editableFlag:!1,visibleFlag:!1},itfTaskEstiFinDate:{dataIndex:"itfTaskEstiFinDate",typeRepresentation:"datetime",text:u.itfTaskEstiFinDate,onCellRequest:Ge,editableFlag:!1,visibleFlag:!1},itfTaskEstiDuration:{dataIndex:"itfTaskEstiDuration",text:u.itfTaskEstiDuration,onCellRequest:Ge,editableFlag:!1,visibleFlag:!1,width:"auto"},itfTaskCreateDate:{dataIndex:"itfTaskCreateDate",typeRepresentation:"datetime",text:u.itfTaskCreateDate,onCellRequest:Ge,editableFlag:!1,visibleFlag:!1},itfTaskModifDate:{dataIndex:"itfTaskModifDate",typeRepresentation:"datetime",text:u.itfTaskModifDate,onCellRequest:Ge,editableFlag:!1,visibleFlag:!1}},t=k||["itfLblSlide","tree","itfCtxName","itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblInst1Path","itfLblInst2Path","itfLblRef1Path","itfLblRef2Path","itfLblFstInst1","itfLblInst1","itfLblFstInst2","itfLblInst2","itfLblFstType1","itfLblFstRef1","itfLblRef1","itfLblFstType2","itfLblFstRef2","itfLblRef2","itfFeatName1","itfFeatName2","itfLblShape1","itfLblShape2","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblMaturity1Ref","itfLblMaturity2Ref","itfLblOrganization1Ref","itfLblOrganization2Ref","itfLblCollabSpace1Ref","itfLblCollabSpace2Ref","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblRevision1Ref","itfLblRevision2Ref","itfLblReference1Title","itfLblReference2Title","itfLblReference1Name","itfLblReference2Name","itfLblReference1EnterpriseNum","itfLblReference2EnterpriseNum","itfLblMaturity1Shape","itfLblMaturity2Shape","itfLblOrganization1Shape","itfLblOrganization2Shape","itfLblCollabSpace1Shape","itfLblCollabSpace2Shape","itfLblShape1OwnerID","itfLblShape2OwnerID","itfLblRevision1Shape","itfLblRevision2Shape","itfLbl3DAccuracy1Shape","itfLbl3DAccuracy2Shape","itfLblShape1Name","itfLblShape2Name","itfQuantifier","itfPenVol","itfPenVec","itfMinDist","itfDescription","itfTolerance","itfOwner","itfOwnerID","itfCurrent","itfIssueTitle","itfIssueName","itfIssueState","itfIssueDesc","itfIssuePriority","itfIssueApprovals","itfIssueResolvedBy","itfIssueAssignees","itfIssueOwner","itfIssueModified","itfTaskTitle","itfTaskName","itfTaskMaturityState","itfTaskDesc","itfTaskAssignees","itfTaskCandiAssignment","itfTaskOriginator","itfTaskOwner","itfTaskEstiFinDate","itfTaskEstiDuration","itfTaskCreateDate","itfTaskModifDate"];c=Object.keys(e).length,E&&(Object.assign(e.tree,E.tree),t.forEach((function(t){e[t]?Object.assign(e[t],E[t]):e[t]=E[t]}))),r=t.map((function(t){return e[t]}))}}();var t=Object.keys(C),a=t.length>0;p=new n({useAsyncPreExpand:!1,shouldAcceptDrag:function(){return a},shouldAcceptDrop:function(){return!1}});var s={identifier:D,treeDocument:p,defaultColumnDef:{width:"auto",height:80},columns:r,rowSelection:"multiple",cellSelection:"none",sortModel:[{dataIndex:"tree",sort:"asc"}],rowDragEnabledFlag:!R&&a,allowUnsafeHTMLContent:!1,cellDragEnabledFlag:!R&&a,activateAllCellsRenderedEventFlag:!0,placeholder:u.NoInterference,recId:"pimItfList",onContextualEvent:function(t){var i=[],n=t.cellInfos;if(t&&t.collectionView&&n){if(-1===n.rowID){if(-1===n.columnID)return[];var a,l=b.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID);if("tree"===l&&(l="label"),a=x.indexOf(l)>-1||"itfLblSlide"===l?"number":y.indexOf(l)>-1?"set":"itfIssueModified"===l?"date":"string",p.getFilterManager().getFilters().hasOwnProperty(l)){var s=p.getFilterManager().getFilters()[l];s&&s.defaultFilterModel&&(s.defaultFilterModel=void 0)}else p.getFilterManager().setPropertyFilterModel(l,{filterId:a},{isUserInteraction:!0});var o=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!1,columnsManagement:!0,sizeColumnToFit:!0}),r=o.splice(o.length-1,1)[0];J&&i.push({title:u.itfRefreshList,type:"PushItem",icon:{iconName:"refresh wux-ui-3ds",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){P.setIsItfListRefreshRunning(!0),p.withTransactionUpdate((function(){P.onItfListRefresh()}))}},state:Y?"disabled":"enabled"}),i.push(...o),i.push({title:u.itfExpandAllRows,type:"PushItem",icon:{iconName:"flow-tree-expand-down",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){p.withTransactionUpdate((function(){p.expandAll()}))}}}),i.push({title:u.itfCollapseAllRows,type:"PushItem",icon:{iconName:"flow-tree-expand-up",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){p.withTransactionUpdate((function(){p.collapseAll()}))}}}),b.layout.getColumnAlwaysVisibleFlag(l)||i.push({title:u.itfHideColumn,type:"PushItem",action:{callback:function(){b.layout.setColumnVisibleFlag(b.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID),!1,{isUserInteraction:!0})}}}),i.push({type:"SeparatorItem",title:""}),R?i.push(Object.assign({},r,{id:"customView",action:{context:t.collectionView}})):i.push(r),"itfQuantifier"===b.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID)&&3===X&&i.push({title:u.itfClashVal,type:"PushItem",submenu:[{title:u.itfPenVol,type:"RadioItem",state:A?"selected":"unselected",action:{callback:function(){A||P.switchQuantifierColumnVal({isPenVolume:!0})}}},{title:u.itfPenVec,type:"RadioItem",state:A?"unselected":"selected",action:{callback:function(){A&&P.switchQuantifierColumnVal({isPenVolume:!1})}}}]})}else{if(!P.getSelectedInterferences().length)return[];var d=b.getNodesXSO().get();d.some((function(e){return e.canBeExpanded()&&(!e.isExpanded()||e.getAllDescendants().some((function(e){return e.canBeExpanded()&&!e.isExpanded()})))}))&&i.push({title:u.itfExpandAll,type:"PushItem",icon:{iconName:"flow-tree-expand-down",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){p.withTransactionUpdate((function(){b.getNodesXSO().get().forEach((function(e){e.expandAll()}))}))}}}),d.some((function(e){return e.canBeExpanded()&&(e.isExpanded()||e.getAllDescendants().some((function(e){return e.canBeExpanded()&&e.isExpanded()})))}))&&i.push({title:u.itfCollapseAll,type:"PushItem",icon:{iconName:"flow-tree-expand-up",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){p.withTransactionUpdate((function(){b.getNodesXSO().get().forEach((function(e){e.collapseAll()}))}))}}}),z||R?z&&!R&&"X3DPLAW_AP"===window.widget.getValue("appId")&&(i=i.concat(P.onContextualEvent())):i=i.concat(P.onContextualEvent())}if(R){var c={isHeaderMenu:-1===n.rowID,isRowMenu:n.rowID>=0},f=e.clone(i,!1);P.contextualEvent(c,f),i=[]}}return i}};if(t.forEach((function(e){s[e]=C[e]})),C=null,(b=new i(s)).getContent().addClassName("pimWebTreeListView"),b.getTypeRepresentationFactory().registerTypeRepresentations(M),window.__karma__&&(b.layout.addCellCoordinates=!0),R){var o=new e.createElement("div");b.inject(o),T.appendChild(o)}else{var d=new e.createElement("div");if(J){H=new e.createElement("div",{class:"pimWebListWarningParent"});var f=new e.createElement("div",{class:"alert-message alert-warning alert-has-icon in",text:u.refreshWarning});new e.createElement("span",{class:"icon fonticon"}).inject(f,"top"),(Z=new l({label:u.lblRefresh,emphasize:"primary",disabled:Y,onClick:function(){P.setIsItfListRefreshRunning(!0),P.onItfListRefresh()}})).inject(f),Z.getContent().setStyles({marginLeft:"10px"}),f.inject(H),f.setStyles({borderBottom:"1px solid #d1d4d4",borderRight:"1px solid #d1d4d4"}),H.inject(d),H.style.visibility="hidden"}b.inject(d),T.content=d,P.showListRefreshWarning(q)}b.addEventListener("DSpointerup",(function(){setTimeout((function(){let e=P.getSelectedInterferences();P.onHideShowOpaSlider(e&&0===e.length)}),100)})),b.addEventListener("DSpointerhit",(function(e,t){var i=t&&t.columnID>=0?b.columns[t.columnID].dataIndex:null;if("itfLblSlide"===i){var n=t.nodeModel.options.grid.itfuid;P.onSelect({idsSelected:[n],cellClickedIdx:"itfLblSlide",idCellClicked:n})}i&&T&&T.isSmallWidth&&T.isSmallWidth()&&(z||"itfAnalysis"!==i&&"itfUserType"!==i&&"itfDescription"!==i&&"itfMetricName"!==i)&&T.collapsePanel()})),p.getFilterManager().subscribe("filterModelChange",(function(){setTimeout((function(){!function(){let t=e.clone(p.getFilterManager().filterModel,!0);t=Object.keys(t).reduce(((e,i)=>(t[i].filterModel&&Object.keys(t[i].filterModel).length>0&&(e[i]=t[i]),e)),{}),localStorage.setItem(D,JSON.stringify({filterModel:t}))}(),P.ensureSelectedLineVisibility()}),10)}));var g=b.getNodesXSO();g.options.getElementID=void 0,g.onPostAdd(Ke),g.onPostRemove(ze),p.getModelEvents().subscribe({event:"sortChildren"},(function(){setTimeout((function(){P.ensureSelectedLineVisibility()}),0)})),p.getModelEvents().subscribe({event:"READY"},(function(){setTimeout((function(){P.ensureSelectedLineVisibility()}),0)})),b.onReady((function(){setTimeout((function(){L=!0}),200)})),p.onPostCollapse((function(){P.updateDataGridView({updateCellLayout:!0,freePool:!0})})),p.onPostExpand((function(){P.updateDataGridView({updateCellLayout:!0,freePool:!0})}))}()}})})),define("DS/PIMwebUX/PIMwebIsrPanelContextTab",["UWA/Core","UWA/Class","DS/Controls/Button","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/CoreEvents/Events","DS/PIMwebUX/PIMwebIsrContextGroupView","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelContextTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],(function(e,t,i,n,a,l,s,o){"use strict";return t.extend({init:function(t){if(t){var r=this;r.productContext={},r.groups=[];var d,u,c,f,g,p,h,I,b,m,w,C,S,v,x,y=!!t.readOnly&&t.readOnly,F=t.parent,M=t.dialog,T=t.ctrl?t.ctrl:null,P=t.type,L=t.isNonPersistIsr,D=t.contextInfo?t.contextInfo:null,R=t.pad3DViewer,k=[],E=[],O=0,A={},V=null,N=!1;T?T.getAddedVPMRefRoots().then((function(e){(k=e).length?T.getLoadedVPMRefRootData(k).then((function(e){(E=e).length&&Y()})):Y()})):Y(),this.getContextInfo=function(){var e="betweenAllComponents";return c&&(c.value===o.isrBetweenAllComponents?e="betweenAllComponents":c.value===o.isrInsideGroups?e="insideGroups":c.value===o.isrGroupsAgainstContext?e="groupsAgainstContext":c.value===o.isrGroupsAgainstGroups&&(e="groupsAgainstGroups")),{ProductContext:r.productContext,FilterContext:A,Config:e,Groups:Z()}},this.createGroupViewWithInfo=function(e,t){H(e,t)},this.addInfoInGroup=function(e,t){!function(e,t){if(e&&e.model){for(var i=0;i<r.groups.length;i++)r.groups[i].id===e.id&&r.groups[i].addInfoInGroup(t);B()}}(e,t)},this.disableTab=function(){J()},this.enableTab=function(){!function(){if(v)for(var e=v.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].style.userSelect="",e[t].removeAttribute("disabled"),e[t].style.pointerEvents="",(e[t].hasClassName("fonticon-product")||e[t].hasClassName("fonticon-filter")||e[t].hasClassName("fonticon-remove")||e[t].hasClassName("fonticon-trash"))&&e[t].getParent().removeAttribute("disabled")}()}}function U(){"customFacetMode"===P||L||(r.productContext&&Object.keys(r.productContext).length?(w.hide(),l.publish({event:"onContextInfoChange",data:"ContextInfoSufficient"})):(w.show(),l.publish({event:"onContextInfoChange",data:"ContextInfoInsufficient"})))}function j(e){if(e&&0!==e.length&&e[0]!==V){var t=[];if(V){for(var i=0;i<d.elementsList.length;i++)d.elementsList[i]!==V.alias&&t.push(d.elementsList[i]);V=null}else t=d.elementsList;if(T)-1===T.getLoadedRoots().indexOf(e[0].id)&&(N=!0,V=e[0]);-1===t.indexOf(e[0].alias)&&t.push(e[0].alias),d.elementsList=[],d.elementsList=t.map((function(e){return e})),d.value=e[0].alias,d.selectedIndex=t.indexOf(e[0].alias),N=!1,f&&(f.disabled=!1),1===d.elementsList.length&&(d.disabled=!0),U()}}function G(e){e&&0!==e.length&&(A=e[0],u.value=A.alias,g&&(g.disabled=!1))}function _(){A={},u.value="",g&&(g.disabled=!0)}function W(){r.groups.splice(0,r.groups.length),O=0,l.unsubscribe(x),x=void 0,b.innerHTML=o.isrCtxNoGroupDefine,C.show()}function B(){!function(){for(var e=0;e<r.groups.length;e++)if(r.groups[e].isEmpty)return!1;return!0}()?((c.value===o.isrInsideGroups||c.value===o.isrGroupsAgainstContext)&&r.groups.length>=1||c.value===o.isrGroupsAgainstGroups&&r.groups.length>=2||c.value===o.isrBetweenAllComponents?C.hide():C.show(),l.publish({event:"onGroupInfoChange",data:"GroupInfoInsufficient"})):(c.value===o.isrInsideGroups||c.value===o.isrGroupsAgainstContext)&&r.groups.length>=1||c.value===o.isrGroupsAgainstGroups&&r.groups.length>=2||c.value===o.isrBetweenAllComponents?(C.hide(),l.publish({event:"onGroupInfoChange",data:"GroupInfoSufficient"})):(C.show(),l.publish({event:"onGroupInfoChange",data:"GroupInfoInsufficient"}))}function Q(){for(x=l.subscribe({event:"onAllContextGroupRemoved"},W);r.groups.length;)r.groups[r.groups.length-1].removeGroupView();l.publish({event:"onAllContextGroupRemoved"}),B()}function X(){N?r.productContext=V:d.value&&""!==d.value&&(V&&V.alias===d.value?r.productContext=V:(V&&V.alias!==d.value&&(V=null,d.elementsList=E.map((function(e){return e.alias}))),E.map((function(e){d.value===e.alias&&(r.productContext=e,e.filterAlias?G([{id:e.filterId,alias:e.filterAlias,type:e.filterType,icon:e.filterIcon}]):u.value="",f&&(f.disabled=!1))})))),1===d.elementsList.length&&(d.disabled=!0),U();for(var e=!0,t=0;t<E.length;t++){var i=E[t];if(d.value===i.alias&&u.value===i.filterAlias){e=!1;break}}e&&_(),Q()}function K(e){for(var t=0;t<r.groups.length;t++)if(r.groups[t]===e)return r.groups.splice(t,1),0===r.groups.length?(O=0,b.innerHTML=o.isrCtxNoGroupDefine,C.show()):b.innerHTML=r.groups.length.toString().concat(" ",r.groups.length>1?o.isrCtxGroupsDefined:o.isrCtxGroupDefined),void B()}function z(e){for(var t=0;t<r.groups.length;t++)r.groups[t].id===e.id&&(r.groups[t]=e);B()}function q(e){var t={htmlParent:I,parentTab:r,groupTitle:"Group",dialog:M,pad3DViewer:R,productContext:r.productContext,ctrl:T,id:++O,readOnly:y};e&&(t.isFilter=e);var i=new s(t);r.groups.push(i),b.innerHTML=r.groups.length.toString().concat(" ",r.groups.length>1?o.isrCtxGroupsDefined:o.isrCtxGroupDefined),l.subscribe({event:"onEmptyGroup"},z),l.subscribe({event:"onFilterAddedInGroup"},z),l.subscribe({event:"onElemAddedInGroup"},z),l.subscribe({event:"onGroupViewCreated"},z),l.subscribe({event:"onContextGroupRemoved"},K),B()}function H(e,t){q(t),r.groups[r.groups.length-1].addInfoInGroup(e),B()}function J(){for(var e=v.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].style.userSelect="none",e[t].setAttribute("disabled",!0),e[t].style.pointerEvents="none",(e[t].hasClassName("fonticon-product")||e[t].hasClassName("fonticon-filter")||e[t].hasClassName("fonticon-remove")||e[t].hasClassName("fonticon-trash"))&&e[t].getParent().addClassName("disabled")}function Y(){var s,x,M,R;v=e.createElement("div",{class:"PIMwebIsrPanelContextTabContent"}).inject(F),L||(!function(){var n=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebFirstTitle"}).inject(v),l=e.createElement("div").inject(n);(m=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(l)).innerHTML=o.isrCtxProduct,m.setStyles({marginRight:"5px"}),w=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(l),e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(w),w.hide();var s=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(n);(d=new a({elementsList:E.map((function(e){return e.alias})),enableSearchFlag:!1,placeholder:o.isrSelectProductCtx})).inject(s),d.elements.container.setStyles({width:"100%"}),d.addEventListener("change",(function(){X()})),1===d.elementsList.length&&(d.disabled=!0),"Create"===t.type&&new i({icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){T&&T.searchProducts().then((function(e){j(e)}))}}).inject(s)}(),s=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(v),x=e.createElement("div").inject(s),M=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(x),R=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(s),M.innerHTML=o.isrCtxFilter,(u=new n({disabled:!0,selectAllOnFocus:!0,autoCommitFlag:!0,placeholder:o.isrSelectFilterCtx}).inject(R)).elements.container.setStyles({width:"100%"}),u.elements.container.childNodes[0].setStyles({width:"100%"}),y||(g=new i({disabled:!0,icon:{iconName:"remove",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){_()}}).inject(R),f=new i({disabled:!0,icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){T&&T.searchFilters(r.productContext.id).then((function(e){G(e)}))}}).inject(R)),d.value&&""!==d.value&&E.map((function(e){d.value===e.alias&&(r.productContext=e,e.filterAlias?G([{id:e.filterId,alias:e.filterAlias,type:e.filterType,icon:e.filterIcon}]):u.value="",f&&(f.disabled=!1))})),U()),function(){var t=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebGroupHdrSection"}).inject(v),n=e.createElement("div").inject(t);(S=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(n)).innerHTML=o.isrCtxGroups,S.setStyles({marginRight:"5px"}),C=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(n),e.createElement("span",{class:"PIMwebIsrPanelLabel wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(C),C.hide();var l=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t),s=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(l);s.innerHTML=o.isrCtxLblCheck,s.setStyles({marginRight:"5px",fontWeight:"normal"}),(c=new a({elementsList:[o.isrInsideGroups,o.isrGroupsAgainstGroups,o.isrGroupsAgainstContext,o.isrBetweenAllComponents],enableSearchFlag:!1,value:o.isrBetweenAllComponents,displayStyle:"normal"})).inject(l),c.elements.container.setStyles({width:"90%"}),c.addEventListener("change",(function(){c.value===o.isrInsideGroups||c.value===o.isrGroupsAgainstGroups||c.value===o.isrGroupsAgainstContext?(h.inject(p),b.show()):(b.hide(),Q(),h.remove()),B()}));var d=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t);if(e.createElement("div").inject(d).setStyles({width:"10%"}),(b=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(d)).setStyles({width:"90%",fontWeight:"normal"}),b.hide(),p=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebGroupsMainSection"}).inject(v),h=e.createElement("div"),b.innerHTML=o.isrCtxNoGroupDefine,I=e.createElement("div").inject(h),!y){var u=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(h);new i({label:o.isrCtxAddNewGroup,icon:{iconName:"group-add",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){q()}}).inject(u).elements.container.setStyles({marginRight:"5px",paddingLeft:"5px",paddingRight:"5px"}),new i({label:o.isrCtxAddMoreGroups,icon:{iconName:"group-add",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){T&&T.addMoreGroups(r.productContext.id)}}).inject(u).elements.container.setStyles({marginRight:"5px",paddingLeft:"5px",paddingRight:"5px"}),new i({label:o.isrCtxDeleteAllGroups,icon:{iconName:"group-delete ",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){Q()}}).inject(u).elements.container.setStyles({marginRight:"0px",paddingLeft:"5px",paddingRight:"5px"})}}(),"Create"!==P&&D&&(!function(e){if(e&&(L||(e.ProductContext&&j([e.ProductContext]),d.disabled=!0,e.FilterContext&&G([e.FilterContext])),"betweenAllComponents"===e.Config?c.value=o.isrBetweenAllComponents:"insideGroups"===e.Config?c.value=o.isrInsideGroups:"groupsAgainstContext"===e.Config?c.value=o.isrGroupsAgainstContext:"groupsAgainstGroups"===e.Config&&(c.value=o.isrGroupsAgainstGroups),e.Groups))for(var t=0;t<e.Groups.length;t++)e.Groups[t].Elements&&H(e.Groups[t].Elements,e.Groups[t].isFilter)}(D),L||l.publish({event:"onContextTabComplete"})),y&&J()}function Z(){for(var e=[],t=0;t<r.groups.length;t++)e.push(r.groups[t].getGroupInfo());return e}}})})),define("DS/PIMwebUX/PIMwebIsrPanelView",["UWA/Core","UWA/Class","DS/PIMwebUX/PIMwebIsrPanelIsrTab","DS/PIMwebUX/PIMwebIsrPanelContextTab","DS/PIMwebUX/PIMwebIsrPanelSpecTab","DS/Controls/Tab","DS/Controls/ComboBox","DS/CoreEvents/Events","DS/Controls/Toggle","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelView","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],(function(e,t,i,n,a,l,s,o,r,d){"use strict";return t.extend({init:function(t){var u=e.createElement("div",{class:"PIMwebIsrPanelMainDiv"});t.isWeb?t.parent.content=u:t.parent.appendChild(u);var c,f,g,p,h,I,b,m=t.type,w=t.pad3DViewer,C=t.parent,S=t.ctrl,v=t.lengthUnit,x=!!t.isNonPersistIsr&&t.isNonPersistIsr,y=!!t.readOnly&&t.readOnly,F=t.isrAlreadyLoaded,M=-1,T=-1,P=-1,L=null,D=[],R=t.isCSICompute,k=t.isUpdateSimulationAllowed,E=t.configArr,O=t.configArrUnitNls;function A(e){M<0||!L.tabBar.getButtonFromValue(M)||(L.tabBar.getButtonFromValue(M).label=e)}"Create"!==m?(p=t.contextInfo,h=t.specInfo,T=0,P=1,D=["6w-what","6w-how"]):(M=0,T=1,P=2,D=["interference-simulation","6w-what","6w-how"]),C.addEventListener("stopResize",(function(){L.tabPanelContainer.setStyles({width:C.width-20+"px",height:C.height-(R?130:90)+"px"})}));var V,N,U,j,G,_,W=e.createElement("div",{class:"PIMwebIsrPanelTabSection"}).inject(u);(R&&W.setStyles({"margin-bottom":"50px"}),(L=new l({displayStyle:"strip"})).tabBar.pinFlag=!1,L.tabPanelContainer.setStyles({width:C.width-20+"px",height:C.height-(R?130:90)+"px",overflow:"auto"}),"Create"===m&&(o.subscribe({event:"onIsrTypeInitDone"},(function(e){A(e),o.unsubscribe({event:"onIsrTypeInitDone"})})),L.add({label:d.isrTabTitle,content:(V=e.createElement("div",{class:"PIMwebIsrPanelIsrTab"}),c=new i({type:m,parent:V,pad3DViewer:w,dialog:C,ctrl:S,readOnly:y}),V),icon:{iconName:"interference-simulation",fontIconFamily:WUXManagedFontIcons.Font3DS}})),L.add({label:d.contextTabTitle,content:(N=e.createElement("div",{class:"PIMwebIsrPanelContextTab"}),U={type:m,parent:N,pad3DViewer:w,dialog:C,ctrl:S,readOnly:y,isNonPersistIsr:x},"Create"!==m&&(U.contextInfo=p),f=new n(U),N),icon:{iconName:"6w-what",fontIconFamily:WUXManagedFontIcons.Font3DS}}),L.add({label:d.specTabTitle,content:(j=e.createElement("div",{class:"PIMwebIsrPanelSpecTab"}),G={type:m,parent:j,pad3DViewer:w,dialog:C,ctrl:S,readOnly:y,isNonPersistIsr:x,lengthUnit:v,isUpdateSimuAllowed:k},"Create"!==m&&(G.specInfo=h),g=new a(G),j),icon:{iconName:"6w-how",fontIconFamily:WUXManagedFontIcons.Font3DS}}),L.inject(W),L.value=[0],L.tabBar.centeredFlag=!1,R)?(e.createElement("div",{id:"Dummy"}).inject(W).setStyles({left:"5",right:"5",position:"absolute","margin-top":"50px"}),(_=e.createElement("div",{id:"Footer"}).inject(u)).setStyles({bottom:"0",left:"5",right:"5",position:"absolute"})):((_=e.createElement("div",{id:"Footer"}).inject(L.tabPanelContainer)).innerHTML="                                                                                         ",_.setStyles({color:"#FFFFFF","font-weight":"bold",margin:"0","margin-top":"35px"}));if(k){var B=e.createElement("div",{class:"PIMwebIsrPanelExecIsrSection"});B.inject(_);var Q=e.createElement("div",{class:"PIMwebIsrRunSimulationSection"});if(I=new r({type:"checkbox",label:E.length>0?d.isrChkExecuteWith:d.isrChkExecute,value:0,checkFlag:!1}),E.length>0){var X="8";if("Edit"===m){var K=S.getIsrPreviousComputationConfig();K&&(X=parseInt(K)>parseInt(E[E.length-1])?E[E.length-1]:K)}else localStorage.getItem("isrConfig")&&E.includes(localStorage.getItem("isrConfig"))&&(X=localStorage.getItem("isrConfig"));let e=E.map((function(e){return e.concat(O)}));(b=new s({elementsList:e,enableSearchFlag:!1,value:X.concat(O),displayStyle:"normal"})).elements.container.setStyles({width:"5%","margin-left":"5px","margin-top":"5px"})}I.inject(Q),E.length>0&&b.inject(Q),I.elements.container.setStyles({"margin-top":"5px"}),Q.setStyles({borderTop:"1px solid #d1d4d4",display:"flex","align-items":"center","margin-bottom":"5px"}),Q.inject(B);let t={};localStorage.getItem("PIMwebIsrSpecs")&&(t=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),I.checkFlag=!!t.ExecuteIsr&&t.ExecuteIsr,I.disabled=y,b&&(b.disabled=y,I.checkFlag?b.disabled=!1:b.disabled=!0,I.addEventListener("change",(function(){I.checkFlag?b.disabled=!1:b.disabled=!0})))}if("Create"===m&&F){var z=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(R?_:L.tabPanelContainer);z.innerHTML=d.warningMessage,z.setStyles({color:"#e87b00","font-weight":"normal","font-style":"italic",margin:"0","margin-top":"2px"}),C.height=C.height+15,C.minHeight=C.minHeight+15}function q(e,t){if(!(e<0)&&L.tabBar.buttonGroup.getButton(e)){var i=t?D[e]:"required";L.tabBar.buttonGroup.getButton(e).icon={iconName:i,fontIconFamily:WUXManagedFontIcons.Font3DS},t||L.tabBar.buttonGroup.getButton(e).elements.button.getChildren()[0].getChildren()[0].addClassName("PIMwebInvalidIcon")}}this.getIsrInfo=function(){if(c)return c.getIsrInfo()},this.getContextInfo=function(){return f.getContextInfo()},this.getSpecInfo=function(){return g.getSpecInfo()},this.setIsrTabValidity=function(e){q(M,e)},this.setContextTabValidity=function(e){q(T,e)},this.setSpecTabValidity=function(e){q(P,e)},this.setIsrTitleValidity=function(e){c&&c.setIsrTitleValidity(e)},this.checkContextInfoValidity=function(){var e;e=f.getContextInfo(),Object.keys(e.ProductContext).length||q(T,!1)},this.writePIMwebIsrPrefs=function(){var e=g.getPIMwebIsrSpecPrefs();let t={},i={},n={};n.ExecuteIsr=!!I&&I.checkFlag,c&&(t=c.getPIMwebIsrTabPrefs()),localStorage.getItem("PIMwebIsrSpecs")&&(i=JSON.parse(localStorage.getItem("PIMwebIsrSpecs")));var a=Object.assign(i,e,t,n);localStorage.setItem("PIMwebIsrSpecs",JSON.stringify(a))},this.createGroupViewWithInfo=function(e){f.createGroupViewWithInfo(e)},this.addInfoInGroup=function(e,t){f.addInfoInGroup(e,t)},this.setIsrTabTitle=function(e){A(e)},this.disableAllTabs=function(){f&&f.disableTab(),g&&g.disableTab(),"Create"===m&&c&&c.disableTab()},this.enableAllTabs=function(){f&&f.enableTab(),g&&g.enableTab(),"Create"===m&&c&&c.enableTab()},this.destroy=function(){o.unsubscribe({event:"onIsrTypeInitDone"}),c=g=f=null,w.getFrameWindow().getContextualUIManager().activateContextualBarOnLeftClic()},this.setIsrConfiguration=function(){!function(){var e="8";b&&E.length&&(e=E[b.selectedIndex]),localStorage.setItem("isrConfig",e)}()},this.getIsrJobConfig=function(){return function(){var e="8";return localStorage.getItem("isrConfig")&&(e=localStorage.getItem("isrConfig")),e}()}}})}));