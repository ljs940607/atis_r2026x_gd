define("DS/3DPlayBM/3DPlayBM",["UWA/Element","DS/Controls/ComboBox","DS/WebUtils/Logger","DS/Utilities/TouchUtils","DS/WebSystem/Environment"],(function(e,t,n,i,o){i.setTouchMode(!0);let s,a,u=!1,r=n("3DPlayBM"),p={beId:0,bmId:0,input:void 0};const d={"swym:Picture":"picture","swym:Document":"doc","swym:3dModel":"3d-object","swym:Drawing":"picture","swym:SimulationMedia":"picture","swym:Sketch":"app-3dsketch","swym:Whiteboard":"app-whiteboard","swym:Story":"app-3dstory"};function l(e){let t={type:e,version:"2"};t.data="valuesToSave"===e?{parametrization:JSON.stringify({version:"1.0.0",outputs:[{transientId:p.input.transientId,input:p.input}]}),outputs:[p.input],inputs:{businessMethods:[{bmId:p.input.bmId,outputs:[p.input]}]}}:{protocol:"2"},window.parent.postMessage(t,"*"),r.warn(t)}return window.addEventListener("message",(function(e){var n,i=e.data,c=i.type;switch(i=i.data,c){case"context":n=i.businessMethods,u||s.then((function(){let e=-1,i=[];n.forEach((t=>{"X3DMCTY_AP"!==t.appId&&"3DSwym"!==t.service||t.outputs.forEach((n=>{n.bmId=t.bmId,d[n.objectType]&&(i.push({icon:d[n.objectType],label:n.title,value:n}),-1==e&&p.input&&p.input.outputs&&p.input.outputs[0]&&p.input.outputs[0].transientId===n.transientId&&(e=i.length-1))}))}));let s=new UWA.Element("div",{styles:{display:"flex","align-items":"center","flex-direction":"column"}});s.inject(document.body),new UWA.Element("h3",{text:a.DefaultContent,styles:{font:"normal normal normal 16px/24px Arial","letter-spacing":"0px",color:"#3D3D3D",opacity:"1"}}).inject(s),u=new t({selectedIndex:e,elementsList:i,enableSearchFlag:!0,placeholder:a.ContentFromSwym}),(window.parent&&window.parent.__karma__||o.isSet("ODT_MODE"))&&(window.parent.myCombo=u),u.inject(s),u.elements.container.style.width="300px",u.addEventListener("change",(function(){u.value.properties=u.value.properties||{},p.input=u.value,l("notifyChanges")}))}));break;case"setup":window.require("i18n").locale=i.lang,s=new Promise((function(e){require(["i18n!DS/3DPlayBM/assets/nls/3DPlayBM"],(function(t){a=t,e()}))}));break;case"edit":p.input=i.inputs.businessMethods[0];case"create":p.beId=i.beId,p.bmId=i.bmId,l("getContext");break;case"saveRequested":l("valuesToSave")}r.log(c,e)})),l("onCodeLoaded"),{}}));