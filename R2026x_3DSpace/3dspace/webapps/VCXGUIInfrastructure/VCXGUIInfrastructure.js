define("DS/VCXGUIInfrastructure/VCXToolbarCtrl",["UWA/Core","UWA/Class","DS/CoreEvents/Events","DS/Core/PointerEvents","DS/RuntimeView/RSCManager","DS/ApplicationFrame/CommandsManager","DS/VCXWebSystem/VCXHardwareServices","DS/WebappsUtils/WebappsUtils"],(function(e,t,i,n,r,a,o,s){"use strict";return t.extend({init:function(t){if(this.options=t,void 0!==t.parent){var i=this;i._listFixedItem={},i._listItem={},i._listMainItem={},i.listCmdCreated=[],i._titleName=new e.Element("div",{html:t.title,class:"vcxToolbarTitle"}).inject(t.parent),i._titleMenu=new e.Element("div",{class:"vcxToolbarMenuExpandableTitleMenu"}).inject(t.parent),i._titleMenuExpandable=new e.Element("div",{class:"vcxToolbarMenuExpandable"}).inject(i._titleMenu),t.controller&&t.controller._vcxGuiManager&&o.isIE11()&&i._titleMenuExpandable.addClassName("IE11"),i._titleToolbar=new e.Element("div",{class:"vcxTitleToolbar"}).inject(t.parent),i._toolBarEdit=new e.Element("div",{class:"vcxToolbarEdit vcxHidden",styles:{float:"right",overflow:"hidden",whiteSpace:"nowrap"}}).inject(t.parent),i._listDisplayMainCmd=[],i._listDisplayExpandedCmd=[],i._toggleDisplayEditToolbar=!1,addEventListener("keydown",this.closeEditBar),i.resizeObs||("function"==typeof ResizeObserver?i.resizeObs=new ResizeObserver((e=>{e.forEach((e=>{i.updateToolbar()}))})):i.resizeObs=new MutationObserver(i.updateToolbar.bind(i)))}},unInitialize:function(){for(var e in this.listCmdCreated){var t=this.listCmdCreated[e];t.cmdId&&(t.removeEventListener(n.POINTERUP,t.pointerDownOnCommandButtonStarterCB,!1),t.vcxCallBack&&t.removeEventListener(n.POINTERUP,t.vcxCallBack,!1),t.flagPointerDown&&t.removeEventListener(n.POINTERDOWN,t.flagPointerDown),t.toggleMenu&&t.removeEventListener(n.POINTERUP,t.toggleMenu),t._experienceBase=null,t.cmdId=null,t.checkedButton=null,t.cbPointerDown=null,t.vcxCallBack=null,t.flagPointerDown=null,t.toggleMenu=null),t.cbPointerUp&&(t.removeEventListener(n.POINTERUP,t.cbPointerUp),t.cbPointerUp=null),t.remove&&t.remove()}removeEventListener("keydown",this.closeEditBar),this.listCmdCreated=null,this._titleName.remove(),this._titleName=null,this._titleMenu.remove(),this._titleMenu=null,this._titleMenuExpandable.remove(),this._titleMenuExpandable=null,this._titleToolbar.remove(),this._titleToolbar=null,this._toolBarEdit.remove(),this._toolBarEdit=null,this.resizeObs.disconnect(),this.resizeObs=null,this._listDisplayMainCmd=[],this._listDisplayExpandedCmd=[],this._listFixedItem={},this._listItem={},this._listMainItem={},this.options=null},getTextContainer:function(){return this._titleName},activateEditMode:function(e){var t=this;e&&(t=e),t._toggleDisplayEditToolbar=!0,void 0===t._toolbarTitle&&(t._toolbarTitle=t._titleName.innerHTML);var n=t.options.controller.getNbSelectedItems(),r=t.options.controller.getNbItems();t.options.parent.addClassName("vcxToolbarEdit"),t._titleName.innerHTML=n+" / "+r,t._titleName.addClassName("edit"),t._toolBarEdit.removeClassName("vcxHidden"),t._titleToolbar.addClassName("vcxHidden"),t._titleMenu.addClassName("vcxHidden"),t._TOOLBARSTATE_Token=i.subscribe({event:"VCX_CLOSE_TOOLBAR"},(function(){var e=document.getElementsByClassName("vcxToolbarButtonStarterMenuRight vcxToolbarButtonStarterMenuRightEdit")[0].cmdId;if(Array.isArray(e)){var t=e[0],i=e[1],n=e[2];i.call(t,n)}}))},getEditToolbar:function(){return this._toolBarEdit},isEditMode:function(){return this._toggleDisplayEditToolbar},exitEditMode:function(e){var t=this;e&&(t=e),t._toggleDisplayEditToolbar=!1,void 0!==t._toolbarTitle?t._titleName.innerHTML=t._toolbarTitle:t._toolbarTitle=t._titleName.innerHTML,t.options.parent.removeClassName("vcxToolbarEdit"),t._titleName.removeClassName("edit"),t._toolBarEdit.addClassName("vcxHidden"),t._titleToolbar.removeClassName("vcxHidden"),t._titleMenu.removeClassName("vcxHidden"),i.unsubscribe(t._TOOLBARSTATE_Token),delete t._TOOLBARSTATE_Token},closeEditBar:function(t){"esc"===e.Event.whichKey(t)&&i.publish({event:"VCX_CLOSE_TOOLBAR"})},updateToolbar:function(){if(this._titleName.style.width="",this._titleToolbar.style.width="",this._titleToolbar.offsetWidth&&this._titleName.offsetWidth){var e,t=this.options.controller.getFrame().getGoToParent(),i=(this.options.panel.elements?this.options.panel.elements.panel.offsetWidth:this.options.panel.offsetWidth)-24-(t?t.offsetWidth:0),n=this._titleName.offsetWidth,r=this._titleToolbar.offsetWidth,a=this._listDisplayMainCmd.length+1,o=this._titleMenu.getElementsByClassName("vcxToolbarButtonStarterMenuRight")[0];e=o?o.offsetWidth:0;if(n>i-this.offsetWidthProcess(a-1)-e){r=this.offsetWidthProcess(a-1),n=i-this.offsetWidthProcess(a-1)-e,this._titleName.style.overflow="hidden",this._titleName.style.width=n+"px",this._titleToolbar.style.width=r+"px";for(var s=a-1;s<this._listDisplayMainCmd.length;s++)this._listDisplayMainCmd[s].style.display="none";for(var l=0;l<this._listDisplayExpandedCmd.length;l++){this._listDisplayExpandedCmd[l].style.display="table-row"}}else{var d=i-n-this.offsetWidthProcess(a-1)-e,c=0;for(l=a-1;l<this._listDisplayMainCmd.length;l++)d-this.offsetWidthProcess(l,!0)>=0&&(c++,d-=this.offsetWidthProcess(l,!0));var p=0===c?r:this.offsetWidthProcess(a-1+c)+1;this._titleToolbar.style.width=p+"px";for(var u=a-1;u<this._listDisplayMainCmd.length;u++)this._listDisplayMainCmd[u].style.display=u<c+a-1?"inline-block":"none";for(var h=0;h<this._listDisplayExpandedCmd.length;h++)this._listDisplayExpandedCmd[h].style.display=h<c?"none":"table-row"}}},offsetWidthProcess:function(e,t){if(t){if(e>this._listDisplayMainCmd.length)return 0;var i,n=!1;return"none"===this._listDisplayMainCmd[e].style.display&&(n=!0,this._listDisplayMainCmd[e].style.display="inline-block"),i=this._listDisplayMainCmd[e].offsetWidth,n&&(this._listDisplayMainCmd[e].style.display="none"),i}for(var r=0,a=0;a<e;a++)if(a>=this._listDisplayMainCmd.length)r+=0;else{n=!1;"none"===this._listDisplayMainCmd[a].style.display&&(n=!0,this._listDisplayMainCmd[a].style.display="inline-block"),r+=this._listDisplayMainCmd[a].offsetWidth,n&&(this._listDisplayMainCmd[a].style.display="none")}return r},addMainItemFixed:function(e,t,i,n,r,a,o,s,l,d){var c=this.onCreateToolbarButton(e,t,i,n,r,o,s,l,d);if(!a){a=this._titleToolbar,this._listDisplayMainCmd.push(c);this.resizeObs.observe(c,{childList:!1,attributes:!0,characterData:!1,subtree:!0,attributeOldValue:!1,attributesFilter:["style"]}),this._listMainItem[i]=c}a&&(c.setAttribute("data-rec-id","id-"+i+"-"+e),c.addClassName("buttonID-"+e),a.appendChild(c))},addMainItem:function(e,t,i,n,r,a){this.addMainItemFixed(e,t,i,n,r,null,a);var o=this.addSubItem(e,t,i,n,r,a);this._listItem[i]=o},addSubItemFixed:function(e,t,i,n,r,a,o,s){if(s){var l=this._titleMenuExpandable.childNodes;l.length>0&&l[l.length-1].addClassName("vcxToolbarMenuExpandedRowLast")}var d=this.addSubItem(e,t,i,n,r,a,o,!0);this._listItem[i]=d,this._listFixedItem[i]=d,1===Object.keys(this._listFixedItem).length&&d.addClassName("activated")},activeItem:function(e){this.activeMainItem(e),this.activeSubItem(e)},desactiveItem:function(e){this.desactiveMainItem(e),this.desactiveSubItem(e)},setItem:function(e,t){t?this.activeItem(e):this.desactiveItem(e)},toggleItem:function(e){this.toggleMainItem(e),this.toggleSubItem(e)},activeMainItem:function(e){var t=this._listMainItem[e];t&&t.addClassName("activated")},activeSubItem:function(e){var t=this._listItem[e];t&&t.addClassName("activated")},getActiveItem:function(){this._listItem((function(e){1}))},desactiveMainItem:function(e){var t=this._listMainItem[e];t&&t.removeClassName("activated")},desactiveSubItem:function(e){var t=this._listItem[e];t&&t.removeClassName("activated")},toggleMainItem:function(e){var t=this._listMainItem[e];t&&(t.hasClassName("activated")?t.removeClassName("activated"):t.addClassName("activated"))},toggleSubItem:function(e){var t=this._listItem[e];t&&(t.hasClassName("activated")?t.removeClassName("activated"):t.addClassName("activated"))},activeSubItemFixed:function(e){var t=this._listItem[e];if(t){if(t.hasClassName("activated"))return;for(var i in this._listFixedItem){var n=this._listFixedItem[i];n.childNodes[0].childNodes[0].childNodes[0].hasClassName(e)?(n.addClassName("activated"),this._titleMenu.querySelector(".vcxToolbarButtonStarterMenuRight").querySelector(".vcxToolbarButton").className=e):n.removeClassName("activated")}}},addSubItem:function(t,i,r,o,s,l,d,c){var p=this.onCreateToolbarButton(t,i,r,o,l),u=new e.Element("div",{class:"vcxToolbarMenuExpandedRow"}).inject(this._titleMenuExpandable),h=this;if(u.addEventListener(n.POINTERDOWN,(function(e){if("function"==typeof t)t("ScenarioViewOptions"===i?d:l);else if(""!==t){var n=null,r=h.options.controller._vcxGuiManager._experienceBase.getManager("VCXContextManager");r&&(n=r.getContext()),a.getCommand(t,n)&&(a.getCommand(t,n).begin(),e.stopImmediatePropagation(),e.stopPropagation())}}),!0),c||this._listDisplayExpandedCmd.push(u),new e.Element("div",{class:"vcxToolbarMenuExpandedCellCmd"}).inject(u).appendChild(p),t&&"function"!=typeof t)new e.Element("div",{html:s[t],class:"vcxToolbarMenuExpandedCellTitle"}).inject(u);else new e.Element("div",{html:l,class:"vcxToolbarMenuExpandedCellTitle"}).inject(u);return u},addMenu:function(e,t,i,r,a,o,s){var l=this.onCreateToolbarButton(e,t,i,r,a,o);s||(s=this._titleMenu),s.appendChild(l);var d=this;l.vcxCallBack=function(){d._titleMenuExpandable.removeClassName("expanded"),document.removeEventListener(n.POINTERUP,l.vcxCallBack,!1)},l.flagPointerDown=function(e){l._pointerDown=!0},l.toggleMenu=function(e){l._pointerDown&&(l._pointerDown=!1,e.stopPropagation(),d._titleMenuExpandable.hasClassName("expanded")?document.removeEventListener(n.POINTERUP,l.vcxCallBack,!1):document.addEventListener(n.POINTERUP,l.vcxCallBack,!1),d._titleMenuExpandable.toggleClassName("expanded"))},l.addEventListener(n.POINTERDOWN,l.flagPointerDown),l.addEventListener(n.POINTERUP,l.toggleMenu)},onCreateToolbarButton:function(t,r,o,l,d,c,p,u,h){var m=new e.Element("div",{class:r,styles:{backgroundSize:"cover",display:"inline-block",verticalAlign:"top",float:"right"},html:[]}),y=!1,g=!1,f="";Array.isArray(o)?(g=!0,f=o[0].split("Checked")[0],y=o[0].search("Checked")):(f=o.split("Checked")[0],y=o.search("Checked")),y=y>0;var C=new e.Element("div",{class:f,styles:{},html:[]});if(m.commandButton=C,C.lockedWhile=!1|h,g){var v=new e.Element("span",{class:"wux-ui-fa wux-ui-fa-stack vcx-toolbar-stack"}).inject(C);e.createElement("i",{class:"wux-ui-fa wux-ui-fa-lg "+o[1]}).inject(v),e.createElement("i",{class:"wux-ui-fa wux-ui-fa-lg "+o[2]}).inject(v)}m.appendChild(C),y&&p&&(this._evtStart=i.subscribe({event:p},(function(e){C.setAttribute("checked","")}))),y&&u&&(this._evtEnd=i.subscribe({event:u},(function(e){C.removeAttribute("checked")}))),"MENU"===c||"VCXScenarioToolbarDisplayLayout"===c||(m._experienceBase=this.options.controller._vcxGuiManager._experienceBase,m.cmdId=t,m.checkedButton=y,m.pointerDownOnCommandButtonStarterCB=function(e){e.preventDefault();var t=this.commandButton,i=e.currentTarget||e.srcElement,n=!1;if(i.checkedButton)if(null!==t.getAttribute("checked")){if(t.lockedWhile)return;t.removeAttribute("checked"),n=!0}else t.setAttribute("checked","");var r=i.cmdId;if(Array.isArray(r)){var o=r[0],s=r[1],l=r[2];n||s.call(o,l)}else if(""!==r){var d=null,c=i._experienceBase.getManager("VCXContextManager");c&&(d=c.getContext()),a.getCommand(r,d)&&(n?a.getCommand(r,d).end():a.getCommand(r,d).begin())}e.stopImmediatePropagation(),e.stopPropagation()},m.addEventListener(n.POINTERUP,m.pointerDownOnCommandButtonStarterCB,!1),m.cbPointerUp=function(e){e.stopImmediatePropagation(),e.stopPropagation()},m.addEventListener(n.POINTERUP,m.cbPointerUp));var b="string"==typeof t&&""!==t?t:c&&(""===t||Array.isArray(t))?c:"";return l&&(C.style.backgroundImage="url("+s.getWebappsAssetUrl(l,"icons/32/"+c)+")"),d&&(m.title=d[b]),this.listCmdCreated.push(m),m},pointerUpOnCommandButtonStarterCB:function(e){e.preventDefault();var t=(e.currentTarget||e.srcElement).cmdId;"function"==typeof t&&(e.preventDefault(),t(),e.stopImmediatePropagation(),e.stopPropagation())}})})),define("DS/VCXGUIInfrastructure/VCXGUIComponentCtrl",["UWA/Class"],(function(e){"use strict";return e.extend({init:function(){},BuildView:function(e){},OnEndBuildView:function(){},RefreshView:function(){},InitializeEvents:function(){},UnInitializeEvents:function(){},initialize:function(){},unInitialize:function(){},postInitialize:function(){},updatePaperArea:function(){},EnsureVisible:function(){return null},GetDockingInfo:function(){return{area:null,order:null}},update:function(){},preRender:function(){},postUpdate:function(){},GetIdentifier:function(){return""}})})),
/*!
#include "VCXUISequence.h"
  Script: VCXUISequence.js

    This file is part of UWA JS Runtime.

  About: License

    Copyright 2006-2012 Netvibes, a Dassault Systemes company.
    All rights reserved.
*/
define("DS/VCXGUIInfrastructure/VCXUISequence",["UWA/Core","UWA/Controls/Accordion","DS/Core/PointerEvents","DS/VCXWebKernel/VCXCmdChangeSelection"],(function(e,t,i,n){"use strict";return t.extend({className:"VCXUISequence",defaultOptions:{className:"",title:null,multiSelect:!0,constantItemWidth:!1,contentPosition:"bottom"},init:function(e,t,i){this._parent(i),this.elements.container.addClassName(this.className),this._experience=e,this._panel=t,this.sequenceSelectedItems={},this.sequenceOpenedItems={}},unInitialize:function(){var e=this.elements.items;for(var t in e)e[t].titleDiv&&(e[t].titleDiv.removeEvent(i.POINTERUP),e[t].titleDiv.remove(),e[t].titleDiv=null);this._panel=null,this.sequenceSelectedItems=null,this.sequenceOpenedItems=null,this._experience=null},str2DOMElement:function(e){var t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t),t.contentDocument.open(),t.contentDocument.write(e),t.contentDocument.close();var i=t.contentDocument.body.firstChild;return document.body.removeChild(t),i},addItem:function(t,n){var r=this,a=this.elements,o=a.items=a.items||{},s=a.containers=a.containers||{};this._parent(t,n),s[t]=e.createElement("div",{class:this.className+"-content"}).inject(o[t],"top"===this.options.contentPosition?"top":"bottom"),s[t].parentNode.addClassName("VCXUISequence-item"),n.content&&this.setContent(t,n.content);var l=t+"-title",d=a.items[t].getElementsByClassName(l)[0];a.items[t].removeChild(d);var c=n.text,p=e.createElement("div",{class:"VCXUISequence-title"});a.items[t].appendChild(p);var u=t+"-title "+this.className+"-item-arrow",h=e.createElement("div",{class:u,events:{click:function(e){var i=a.items[t];r._panel.activeSequence(i)}}});p.appendChild(h),a.items[t].titleDiv=e.createElement("span",{class:l+" VCXUISequence-item-title",text:c}),a.items[t].titleDiv.addEvent(i.POINTERUP,(function(e){r.sequenceOpenedItem(t)})),p.appendChild(a.items[t].titleDiv);for(var m=[],y=0;y<a.items[t].children.length;y++)m[y]=a.items[t].children[y];a.items[t].removeChild(m[0]),a.items[t].removeChild(m[1]),a.items[t].appendChild(m[1])},deleteItem:function(e){var t=this.elements;t.itemContainer.removeChild(t.itemContainer.childNodes[e]),delete t.containers[e],delete t.items[e]},unset:function(e,t,i){var n=t;t={},n[e]=null,delete n[e];var r=0;for(var a in i&&(r=-1),n)void 0!==n[a]&&(i?r++:r=a,t[r]=n[a]);return t},isSequenceOpened:function(e){return this.sequenceOpenedItems[e]},sequenceOpenedItem:function(e,t){this.setSequenceItemOpenedState(e,!this.isSequenceOpened(e),t)},setSequenceItemOpenedState:function(t,i,n){if(this._experience.getManager("VCXSequenceManager").GetListSequences().length>1||i){var r=this.elements.items[t];n=!e.is(n)||n;var a=r.getElementsByClassName("vcx-controls-thumbnail");if(i&&0===a.length){if(i)if(0===(a=r.getElementsByClassName("vcx-controls-thumbnail")).length){r.addClassName("failOpened",i);setTimeout((function(){r.removeClassName("failOpened",i)}),500)}}else this.sequenceOpenedItems[t]!==i&&(r&&r.toggleClassName("opened",i),this.sequenceOpenedItems[t]=i)}},getOpenedItems:function(){var e=[];for(var t in this.sequenceOpenedItems){if(this.sequenceOpenedItems.hasOwnProperty(t))this.sequenceOpenedItems[t]&&e.push(t)}return e},getSelectedItems:function(){var e=[];for(var t in this.sequenceSelectedItems){if(this.sequenceSelectedItems.hasOwnProperty(t))this.sequenceSelectedItems[t]&&e.push(t)}return e},isSequenceSelected:function(e){return this.sequenceSelectedItems[e]},sequenceSelectItem:function(e,t){this.setSequenceItemSelectedState(e,!this.isSequenceSelected(e),t)},setSequenceItemSelectedState:function(t,i,r){var a=this.elements.items[t];if(r=!e.is(r)||r,a||this.sequenceSelectedItems[t]!==i){if(!document._ctrlDown)for(var o in this.sequenceSelectedItems){if(this.sequenceSelectedItems.hasOwnProperty(o))if(this.sequenceSelectedItems[o])this.elements.items[o].toggleClassName("selected",!1),this.sequenceSelectedItems[o]=!1}a.toggleClassName("selected",i),this.sequenceSelectedItems[t]=i;var s=this._experience.getManager("VCXSequenceManager").GetListSequences()[t];const e=new n(this._experience);i?document._ctrlDown?e.AddToSelection(s):e.SetSelection(s):e.RemoveFromSelection(s),this._experience.getManager("VCXCommandManager").Do(e)}},addDragOver:function(e){this._dragOverIndex=e,this.elements.items[e].toggleClassName("dragover",!0)},removeDragOver:function(){void 0!==this._dragOverIndex&&this.elements.items[this._dragOverIndex].toggleClassName("dragover",!1)}})})),define("DS/VCXGUIInfrastructure/VCXSidePanelExtendable",["UWA/Core","DS/CoreEvents/Events","DS/Core/PointerEvents","DS/Panels/SidePanel"],(function(e,t,i,n){"use strict";return n.extend({defaultOptions:{className:"VCXSidePanelExtendable"},mItemList:[],dragWhileFactory:function(e){return function(t){var i=e,n=t.clientX;t.preventDefault(),i.elements.panel.style.transition="","left"===i.options.side?i.elements.panel.style.width=n-i.marginX+"px":i.elements.panel.style.width=i.screenX-n-i.marginX+"px",i.options.usecallback&&i.options.usecallback(i.options.controller,Math.max(parseInt(i.elements.panel.style.minWidth),parseInt(i.elements.panel.style.width))),i.options.controller&&"function"==typeof i.options.controller.updateToolbar&&i.options.controller.updateToolbar()}},dragEndFactory:function(e){return function(){var t=e;document.removeEventListener(i.POINTERMOVE,t._fctWhile,!1),document.removeEventListener(i.POINTERUP,t._fctEnd,!1),t._isDragged=!1,t.elements.panel.style.boxShadow="0px 0px 0px 0px #888888",t.elements.panel.style.transition=t._savedTransition,t._bLockRecord=!1,t.options.controller&&t.options.controller._vcxGuiManager&&t.options.controller._vcxGuiManager.updateUsableArea()}},addPointerEvents:function(){var e=this;e._leftSensor.addEvent(i.POINTERDOWN,(function(t){e.screenX=document.body.clientWidth;var n=t.clientX,r=e.elements.panel.getBoundingClientRect().width;"left"===e.options.side?e.marginX=n-r:e.marginX=e.screenX-n-r,e._bLockRecord&&(document.removeEventListener(i.POINTERMOVE,e._fctWhile,!1),document.removeEventListener(i.POINTERUP,e._fctEnd,!1),e._isDragged=!1,e._bLockRecord=!1),document.addEventListener(i.POINTERMOVE,e._fctWhile),document.addEventListener(i.POINTERUP,e._fctEnd),e._bLockRecord=!0,e._isDragged=!0,e.elements.panel.style.transition=""}))},getvalueCSS:function(e,t){var i=null,n=e,r=null;return window.getComputedStyle?i=(r=n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):window.getComputedStyle(n,null)).getPropertyValue(t):document.documentElement.currentStyle&&(i=void 0!==(r=n.currentStyle).getPropertyValue?r.getPropertyValue(t):r[t]),i},init:function(t){var i=this;i._parent(t),i._bLockRecord=!1,i._fctWhile=i.dragWhileFactory(i),i._fctEnd=i.dragEndFactory(i);t.title;i.elements.title.innerHTML="",i.elements.title.addClassName("vcx-panels-panelbase-title"),i.elements.panel.addClassName("vcx-panels-panelbase-panel"),i.elements.panel.addClassName(t.class);var n=i.getvalueCSS(i.elements.panel,"z-index");i._leftSensor=new e.Element("div",{class:"SidePanelExtendableSensor",styles:{height:"100%",left:"-11px",width:"12px",position:"absolute",cursor:"col-resize",zIndex:n+1},events:{mouseover:function(){"left"===i.options.side?i.elements.panel.style.boxShadow="2px -2px 2px 0px #D3D3D3":i.elements.panel.style.boxShadow="-2px -2px 2px 0px #D3D3D3",i.elements.panel.style.transition=""},mouseout:function(){!1===i._isDragged&&(i.elements.panel.style.boxShadow="0px 0px 0px 0px #888888",i.elements.panel.style.transition=i._savedTransition)}}}),"left"===i.options.side&&(i._leftSensor.style.right=i._leftSensor.style.left,i._leftSensor.style.left=""),i._isDragged=!1,i._savedTransition=this.elements.panel.style.transition,i.elements.panel.insertBefore(i._leftSensor,i.elements.panel.firstChild),i.addPointerEvents()},slideIn:function(){this._parent();var e=parseFloat(this.elements.panel.style.transitionDuration);setTimeout((function(){t.publish({event:"VCX_GUI_PANEL_SLIDE_IN"})}),1e3*e)},slideOut:function(){this._parent();var e=parseFloat(this.elements.panel.style.transitionDuration);setTimeout((function(){t.publish({event:"VCX_GUI_PANEL_SLIDE_OUT"})}),1e3*e)}})})),define("DS/VCXGUIInfrastructure/VCXResizerEnum",["require","exports"],(function(e,t){"use strict";var i;return function(e){e.VCXResizeTop="Top",e.VCXResizeBottom="Bottom",e.VCXResizerLeft="Left",e.VCXResizerRight="Right"}(i||(i={})),i})),define("DS/VCXGUIInfrastructure/VCXFrameBoxing",["UWA/Class","DS/Visualization/ThreeJS_DS","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueFrame","DS/VCXWebProperties/VCXPropertyValuePoint","DS/VCXWebProperties/VCXPropertyValueLocation","DS/VCXWebSystem/VCXMathTools","i18n!DS/VCXGUIInfrastructure/assets/nls/VCXGUIInfrastructure"],(function(e,t,i,n,r,a,o,s,l,d){"use strict";return e.extend({init:function(){},GetPropertiesForGUI:function(e,t,r){var a,d,c=(t.GetPropertyName()||"Actor.PropertyFrame")+"_",p={hiddenFields:[],propertyPosition:null,propertyOrientation:null,propertyScale:null,propertyPivot:null};e instanceof s?(a=e.GetFrame().GetValue(),d=e.GetPivot().GetValue()):a=e.GetValue();var u=a.decompose(),h=u[0],m=u[1],y=u[2],g=new n(c+"Position",null,!1,t.Geti18n()),f=new o(h);p.propertyPosition=new i(g,f),r&&r.includes("Position")&&p.hiddenFields.push("propertyPosition");var C=new n(c+"Orientation",null,!1,t.Geti18n()),v=new o(l.getEulerFromQuaternion(m).multiplyScalar(180/Math.PI));p.propertyOrientation=new i(C,v),r&&r.includes("Orientation")&&p.hiddenFields.push("propertyOrientation");var b=new n(c+"Scale",null,!1,t.Geti18n()),P=new o(y);if(p.propertyScale=new i(b,P),r&&r.includes("Scale")&&p.hiddenFields.push("propertyScale"),d){var V=d.decompose()[0],_=new n(c+"Pivot",null,!1,t.Geti18n()),I=new o(V);p.propertyPivot=new i(_,I),r&&r.includes("Pivot")&&p.hiddenFields.push("propertyPivot")}return p},UpdateMapForGUI:function(e,i){for(var n=i.propName,r=i.value,a=["Scale","Pivot","ColumnX","ColumnY","ColumnZ","Orientation","Position"],s="",l=0;l<a.length;++l){var d=a[l];if(n.includes(d)){s="property"+d;break}}if(s){var c=e[s];return c&&(c.GetPropertyValue()instanceof o&&Array.isArray(r)&&("propertyScale"===s&&(r=r.map((function(e){return e<.01?.01:e}))),r=new t.Vector3(r[0],r[1],r[2])),c.GetPropertyValue().SetValue(r)),e}console.warn("VCXFrameBoxing#UpdateMapForGUI: Couldn't find the property to replace with the new value..")},BuildNewValueFromGUI:function(e){var i=null,n=null,r=new t.Matrix4,o=e.propertyOrientation.GetPropertyValue().GetValue(),d={x:o.x*Math.PI/180,y:o.y*Math.PI/180,z:o.z*Math.PI/180,order:"XYZ"};if(e.propertyPivot){i=new s;var c=e.propertyPivot.GetPropertyValue().GetValue();n=(new t.Matrix4).setPosition(c),i.SetPivot(new a(n))}else i=new a;r=new t.Matrix4;var p=l.getQuaternionFromEuler(d),u=e.propertyPosition.GetPropertyValue().GetValue(),h=e.propertyScale.GetPropertyValue().GetValue();return r.compose(u,p,h),n?i.SetFrame(new a(r)):i.SetValue(r),i.ToString()},getPropertiesNamesNLS:function(e){var t={};return t[e+"_Position"]=d.get("FrameBoxing_Position"),t[e+"_Orientation"]=d.get("FrameBoxing_Orientation"),t[e+"_Scale"]=d.get("FrameBoxing_Scale"),t[e+"_Pivot"]=d.get("FrameBoxing_Pivot"),t}})})),define("DS/VCXGUIInfrastructure/VCXFontBoxing",["UWA/Class","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueFont","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertyValueEnum","i18n!DS/VCXGUIInfrastructure/assets/nls/VCXGUIInfrastructure"],(function(e,t,i,n,r,a,o,s,l,d){"use strict";return e.extend({init:function(){},GetPropertiesForGUI:function(e,r,o){var d={hiddenFields:[],propertyName:null,propertyHeight:null,propertyItalic:null,propertyBold:null},c=new l;c.SetValue(0);var p=(r.GetPropertyName()||"Collab.Text.Font")+"_",u=new s(p+"Name",null,!1,r.Geti18n()),h={0:"__DONOTTRANSLATE__Arial",1:"__DONOTTRANSLATE__Arial Black",2:"__DONOTTRANSLATE__Comic Sans MS",3:"__DONOTTRANSLATE__Courier New",4:"__DONOTTRANSLATE__Georgia",5:"__DONOTTRANSLATE__Impact",6:"__DONOTTRANSLATE__Lucida Console",7:"__DONOTTRANSLATE__Lucida Sans Unicode",8:"__DONOTTRANSLATE__Palatino Linotype",9:"__DONOTTRANSLATE__Tahoma",10:"__DONOTTRANSLATE__Times New Roman",11:"__DONOTTRANSLATE__Trebuchet MS",12:"__DONOTTRANSLATE__Verdana"};for(var m in u.SetMapChoiceEnum(h),h)if(h.hasOwnProperty(m)){var y=h[m];if(e.GetFamily().GetValue()===y.replace("__DONOTTRANSLATE__","")){c.SetValue(parseInt(m));break}}d.propertyName=new t(u,c);var g=new i(p+"Height",null,!1,r.Geti18n()),f=new n;f.SetValue(Number(e.GetHeight().GetValue())),d.propertyHeight=new t(g,f),o&&o.includes("Height")&&d.hiddenFields.push("propertyHeight");var C=new i(p+"Italic",null,!1,r.Geti18n()),v=new a;return v.SetValue(e.GetItalic().GetValue()),d.propertyItalic=new t(C,v),o&&o.includes("Italic")&&d.hiddenFields.push("propertyItalic"),C=new i(p+"Bold",null,!1,r.Geti18n()),(v=new a).SetValue(700===e.GetWeight().GetValue()),d.propertyBold=new t(C,v),o&&o.includes("Bold")&&d.hiddenFields.push("propertyBold"),d},UpdateMapForGUI:function(e,t){var i=t.propName,n=t.std;if("Collab.Text.Font_Name"===i){var r=e.propertyName;r.GetPropertyInfo().GetMapChoiceEnum();if(r.GetPropertyValue().SetValue(13),Number.isNaN(Number(n)))throw new Error("A value was passed something different from an index of the enum.");r.GetPropertyValue().SetValue(Number(n))}else if("Collab.Text.Font_Height"===i){e.propertyHeight.GetPropertyValue().SetValue(n)}else if("Collab.Text.Font_Italic"===i){e.propertyItalic.GetPropertyValue().SetValue(n)}else if("Collab.Text.Font_Bold"===i){e.propertyBold.GetPropertyValue().SetValue(n)}return e},BuildNewValueFromGUI:function(e){var t=new o,i=new r,n=e.propertyName.GetPropertyInfo()._mapChoiceEnum[e.propertyName.GetPropertyValue().GetValue()];i.SetValue(n.replace("__DONOTTRANSLATE__",""));var a=e.propertyHeight.GetPropertyValue(),s=e.propertyItalic.GetPropertyValue(),l=e.propertyBold.GetPropertyValue();return t.SetFamily(i),t.SetHeight(a),t.SetItalic(s),t.GetWeight().SetValue(l.GetValue()?700:400),t.ToString()},getPropertiesNamesNLS:function(e){var t={};return t[e+"_Name"]=d.get("FontBoxing_Name"),t[e+"_Height"]=d.get("FontBoxing_Height"),t[e+"_Italic"]=d.get("FontBoxing_Italic"),t[e+"_Bold"]=d.get("FontBoxing_Bold"),t}})})),define("DS/VCXGUIInfrastructure/VCXHyperlinkBoxing",["UWA/Class","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueHyperlinkId","DS/WebRBTree/WebRBIterator","i18n!DS/VCXGUIInfrastructure/assets/nls/VCXGUIInfrastructure"],(function(e,t,i,n,r,a,o,s,l,d){"use strict";var c=e.extend({initialize:function(e){this._experienceBase=e},unInitialize:function(e){this._experienceBase=null},HyperlinkPropertyToString:function(e){var t="";if(e){var i=this._experienceBase.getManager("VCXDocManager").GetPropPath(e.GetValue());if(i){var n=i.GetFileName().GetValue();if(n)return n;t=i.GetValueURL().GetValue()}}return t},FillMapChoiceScenarios:function(e,t){var i=null,n=Object.keys(e).length,r=this._experienceBase.getManager("VCXScenarioManager").GetScenariosFromType(0);for(var a in r)if(r.hasOwnProperty(a)){var o=r[a].GetName();e[n]=o,a===t&&(i=n),n++}return i},FillMapChoiceMarkers:function(e,t){var i=null,n=Object.keys(e).length,r=this._experienceBase.getManager("VCXScenarioManager").GetScenariosFromType(0);for(var a in r)if(r.hasOwnProperty(a)){var o=r[a].GetTrackMarkers();if(o){n=0;for(var s=o._treekeys,d=new l(s),c=d.next();null!==c;){var p=c.GetValue(),u=this._experienceBase.ComponentsMap.GetComponentFromID(p);if(u){var h=u.GetName();e[n]=h,p===t&&(i=n),n++}c=d.next()}}}return i},GetPropertiesForGUI:function(e,s){var l={propertyAction:null,propertyType:null,propertyHyperlink:null},p=new i("Actor.Hyperlink_Action",null,!1,s.Geti18n()),u=new o;u.SetValue(!1),l.propertyAction=new t(p,u);var h=new r;h.SetValue(1);var m=new n("Actor.Hyperlink_Type",null,!1,s.Geti18n()),y={};y[c.EHyperlinkChoices.None]="__DONOTTRANSLATE__"+d.get("VCXHyperlinkBoxing.ChoiceToSelect.None"),y[c.EHyperlinkChoices.WebAdress]="__DONOTTRANSLATE__"+d.get("VCXHyperlinkBoxing.ChoiceToSelect.WebAdress"),y[c.EHyperlinkChoices.GoToScene]="__DONOTTRANSLATE__"+d.get("VCXHyperlinkBoxing.ChoiceToSelect.GoToScene"),(this._experienceBase.getManager("VCXContextManager").getContextFromName("OpenSMG")||this._experienceBase.getManager("VCXContextManager").getContextFromName("OpenSMGXML"))&&(y[c.EHyperlinkChoices.PlayScene]="__DONOTTRANSLATE__"+d.get("VCXHyperlinkBoxing.ChoiceToSelect.PlayScene"),y[c.EHyperlinkChoices.GoToMarker]="__DONOTTRANSLATE__"+d.get("VCXHyperlinkBoxing.ChoiceToSelect.GoToMarker"),y[c.EHyperlinkChoices.PlayMarkerSequence]="__DONOTTRANSLATE__"+d.get("VCXHyperlinkBoxing.ChoiceToSelect.PlayMarkerSequence")),m.SetMapChoiceEnum(y),l.propertyType=new t(m,h);var g=new n("Actor.Hyperlink_Hyperlink",null,!1,s.Geti18n());(C=new a).SetValue("http://www.3ds.com"),l.propertyHyperlink=new t(g,C);var f=null;if(e&&(f=this._experienceBase.getManager("VCXDocManager").GetPropPath(e.GetValue())),!f)return h.SetValue(0),g.SetVisible(!1),l;var C,v="",b=-1,P=f.GetPathType().GetValue();0===P&&((v=this.HyperlinkPropertyToString(e)).indexOf("scenario://")>=0?(P=1,v=v.slice(11)):((v.indexOf("http")>=0||v.indexOf("ftp")>=0)&&(b=c.EHyperlinkChoices.WebAdress),(C=new a).SetValue(v),l.propertyHyperlink.SetPropertyValue(C)));var V=!1,_={},I=new r,S=f.GetValueLink().GetValue();if(1===P){b=c.EHyperlinkChoices.GoToScene;for(var x=["Previous","Next","First","Last"],w=!1,E=0;E<x.length;E++){var T=x[E]+" scene";_[E.toString()]=T,v===x[E].toLowerCase()&&(I.SetValue(E),w=!0)}var M=this.FillMapChoiceScenarios(_,S);w||null!==M&&I.SetValue(M),V=!0}else if(2===P){b=c.EHyperlinkChoices.PlayScene;var D=this.FillMapChoiceMarkers(_,S),N=this.FillMapChoiceScenarios(_,S);null!==D?I.SetValue(D):null!==N&&I.SetValue(N),V=!0}else if(3===P){b=c.EHyperlinkChoices.GoToMarker,null!==(M=this.FillMapChoiceMarkers(_,S))&&I.SetValue(M),V=!0}else if(4===P){b=c.EHyperlinkChoices.PlayMarkerSequence;D=this.FillMapChoiceMarkers(_,S),N=this.FillMapChoiceScenarios(_,S);null!==D?I.SetValue(D):null!==N&&I.SetValue(N),V=!0}if(V){for(var k in y){var B=parseInt(k);y.hasOwnProperty(B)&&b===B&&h.SetValue(B)}g.SetMapChoiceEnum(_),l.propertyHyperlink.SetPropertyValue(I)}return u.SetValue(!0),l},UpdateMapForGUI:function(e,t){var i=t.propName,n=t.std,o=c.EHyperlinkChoices.None;if("Actor.Hyperlink_Action"===i)e.propertyAction.GetPropertyValue().SetValue(n),e.propertyHyperlink.GetPropertyInfo().SetVisible(n),e.propertyType.GetPropertyInfo().SetVisible(n);else if("Actor.Hyperlink_Type"===i){var s=e.propertyType;s.GetPropertyInfo().GetMapChoiceEnum();if(o=Number(n),Number.isNaN(o))throw new Error("A value was passed something different from an index of the enum.");s.GetPropertyValue().SetValue(o);var l=Boolean(o);e.propertyAction.GetPropertyValue().SetValue(l),e.propertyHyperlink.GetPropertyInfo().SetVisible(l);var d=null;if(o===c.EHyperlinkChoices.WebAdress)d=new a("http://www.3ds.com");else{var p=e.propertyHyperlink.GetPropertyInfo(),u={};switch(o){case c.EHyperlinkChoices.GoToScene:for(var h=["Previous","Next","First","Last"],m=0;m<h.length;m++){var y=h[m]+" scenario";u[m.toString()]=y}this.FillMapChoiceScenarios(u);break;case c.EHyperlinkChoices.PlayScene:this.FillMapChoiceScenarios(u),this.FillMapChoiceMarkers(u);break;case c.EHyperlinkChoices.GoToMarker:this.FillMapChoiceMarkers(u);break;case c.EHyperlinkChoices.PlayMarkerSequence:this.FillMapChoiceMarkers(u),this.FillMapChoiceScenarios(u)}p.SetMapChoiceEnum(u);d=new r(0)}e.propertyHyperlink.SetPropertyValue(d)}else if("Actor.Hyperlink_Hyperlink"===i){var g=e.propertyHyperlink;if("VCXPropertyValueString"===t.internalOptions.dataType)g.GetPropertyValue().SetValue(n);else if("VCXPropertyValueEnum"===t.internalOptions.dataType){if(Number.isNaN(Number(n)))throw new Error("A value was passed something different from an index of the enum.");g.GetPropertyValue().SetValue(Number(n))}}return e},BuildPropPathFromScenario:function(e,t){var i=this._experienceBase.getManager("VCXScenarioManager").GetScenariosFromType(0);for(var n in i){if(i.hasOwnProperty(n))if(i[n].QueryInterface("VCXIModifiable").GetProperty("Actor.Name").GetPropertyValue().GetValue()===e)return this._experienceBase.getManager("VCXDocManager").BuildPathFromLink(n,t)}},BuildPropPathFromMarker:function(e,t){var i=this._experienceBase.getManager("VCXScenarioManager").GetScenariosFromType(0);for(var n in i)if(i.hasOwnProperty(n)){var r=i[n].GetTrackMarkers();if(r)for(var a=r._treekeys,o=new l(a),s=o.next();null!==s;){var d=s.GetValue();if(this._experienceBase.ComponentsMap.GetComponentFromID(d).GetName()===e)return this._experienceBase.getManager("VCXDocManager").BuildPathFromLink(d,t);s=o.next()}}},BuildNewValueFromGUI:function(e){var t=new s;if(e.propertyAction.GetPropertyValue().GetValue()){var i=null,n=e.propertyHyperlink,r=e.propertyType.GetPropertyValue().GetValue();if(r===c.EHyperlinkChoices.OpenDocument);else if(r===c.EHyperlinkChoices.WebAdress)i=this._experienceBase.getManager("VCXDocManager").BuildPathFromString(n.GetPropertyValue().GetValue());else{var a=n.GetPropertyInfo().GetMapChoiceEnum()[n.GetPropertyValue().GetValue()];switch(r){case c.EHyperlinkChoices.GoToScene:if(!(i=this.BuildPropPathFromScenario(a))){var o="scenario://"+a.split(" ")[0].toLowerCase();i=this._experienceBase.getManager("VCXDocManager").BuildPathFromString(o)}break;case c.EHyperlinkChoices.PlayScene:var l=2;(i=this.BuildPropPathFromScenario(a,l))||(i=this.BuildPropPathFromMarker(a,l));break;case c.EHyperlinkChoices.GoToMarker:l=3;i=this.BuildPropPathFromMarker(a,l);break;case c.EHyperlinkChoices.PlayMarkerSequence:l=4;(i=this.BuildPropPathFromMarker(a,l))||(i=this.BuildPropPathFromScenario(a,l))}}i&&(t=this._experienceBase.getManager("VCXDocManager").AddOrModifyHyperlink(i))}else t.SetValue(-1);return t},getPropertiesNamesNLS:function(e){var t={};return t[e+"_Action"]=d.get("HyperlinkBoxing_Action"),t[e+"_Type"]=d.get("HyperlinkBoxing_Type"),t[e+"_Hyperlink"]=d.get("HyperlinkBoxing_Hyperlink"),t}});return c.EHyperlinkChoices={None:0,WebAdress:1,GoToScene:2,PlayScene:3,GoToMarker:5,PlayMarkerSequence:6},c})),define("DS/VCXGUIInfrastructure/VCXAccordeonUIServices",["require","exports","DS/Controls/Accordeon"],(function(e,t,i){"use strict";return class{static BuildAccordeon(e={}){return new i({exclusive:e.exclusive??!1,style:e.style??"divided",items:e.items??[]})}static AddExpander(e,t){return e.addItem(t)}static GetExpanderFromHeader(e,t){const i=e.getIndexFrom({header:t});return e.getExpanderFromIndex(i)}}})),define("DS/VCXGUIInfrastructure/VCXCardTypeEnum",["require","exports"],(function(e,t){"use strict";var i;return function(e){e.SCENE="SCENE",e.MATERIAL="MATERIAL",e.AMBIENCE="AMBIENCE",e.RATIO="RATIO"}(i||(i={})),i})),define("DS/VCXGUIInfrastructure/VCXView",["require","exports","DS/CoreEvents/Events"],(function(e,t,i){"use strict";return class{constructor(e){this.context=e,this.tokensEvents=new Map}unInitialize(){for(let e of this.tokensEvents.values())i.unsubscribe(e);this.tokensEvents.clear()}setInputContext(e){this.getView().setAttribute("data-vcxContext",e||"UIPanel")}subscribe(e,t){this.tokensEvents.set(e,i.subscribe({event:e},t))}}})),define("DS/VCXGUIInfrastructure/VCXWebGUIInfrastructure",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}));var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXGUIInfrastructure/VCXGUIComponentCtrlTS",["require","exports","DS/VCXWebComponents/VCXWebComponentBaseExperience","DS/CoreEvents/Events"],(function(e,t,i,n){"use strict";i=__importDefault(i),n=__importDefault(n);class r extends i.default{BuildView(e){}constructor(){super(),this.tokensEvents=new Map}OnEndBuildView(){}RefreshView(){}InitializeEvents(){}UnInitializeEvents(){}initialize(){}unInitialize(){for(let e of this.tokensEvents.values())n.default.unsubscribe(e);this.tokensEvents.clear()}subscribe(e,t){this.tokensEvents.set(e,n.default.subscribe({event:e},t))}postInitialize(){}updatePaperArea(){}EnsureVisible(){}GetDockingInfo(){return{area:null,order:null}}update(){}preRender(){}postUpdate(){}GetIdentifier(){throw new Error("Not implemented Here")}}return r})),define("DS/VCXGUIInfrastructure/VCXTabPageFrame",["UWA/Class","DS/CoreEvents/Events","DS/Core/PointerEvents","DS/Layouts/SlidingViews","DS/VCXGUIInfrastructure/VCXSidePanelExtendable","DS/VCXGUIInfrastructure/VCXToolbarCtrl","DS/Windows/Panel","i18n!DS/VCXGUIInfrastructure/assets/nls/VCXGUIInfrastructure"],(function(e,t,i,n,r,a,o,s){"use strict";return e.extend({init:function(e){var l=this;this.options=e,e.slidingViews._vcxuiSequencesMaster[0]={},e.slidingViews._vcxuiSequencesMaster[0].Menu=new UWA.Element("div",{class:"vcxuiSequencesMaster"});var d="Menu";if(this.options._experienceBase&&(d=s["VCXProperties.Menu"]),e.slidingViews.views.unshift({title:d,content:{html:e.slidingViews._vcxuiSequencesMaster[0].Menu,iframe:!1}}),e.immersiveFrame){this._panelMaster=new o({collapsibleFlag:!0,closeButtonFlag:!1,resizableFlag:!0,immersiveFrame:e.immersiveFrame,currentDockArea:e.sidePanel.currentDockArea,title:e.sidePanel.title,showTitleFlag:!1,minWidth:e.sidePanel.minWidth?e.sidePanel.minWidth:300,verticallyStretchableFlag:!0,movableFlag:!0,identifier:e.identifier,icon:e.sidePanel.icon,recId:e.recId}),e.immersiveFrame.addWindow(this._panelMaster),this._panel=this._panelMaster.elements._contentDiv,this._panel.style.width="inherit";var c=this._panelMaster.elements.container.parentNode;this.observer=new MutationObserver((function(i){i.forEach((function(i){e.sidePanel.usecallback&&e.sidePanel.usecallback(e.sidePanel.controller,Math.max(parseInt(0),parseInt(l._panelMaster.elements.container.parentNode.offsetWidth))),t.publish({event:"VCX_PANEL_RESIZED"}),e.sidePanel.controller&&"function"==typeof e.sidePanel.controller.updateToolbar&&e.sidePanel.controller.updateToolbar()}))}));c&&this.observer.observe(c,{attributes:!0,childList:!1,characterData:!0,subtree:!1,attributeOldValue:!0,attributeFilter:["style"]})}else{this._panel=new r(e.sidePanel);var p=e._uiLayer||this.options._experienceBase.getManager("VCXContextManager").getFrameWindow().getUIFrame();this._panel.inject(p)}for(var u in this._header=new UWA.Element("div",{html:"",class:e.classBaseNameCSS+"Header VCXPanelCtrlHeader"}).inject(l._panel),this._headerSeparator=new UWA.Element("div",{html:"",class:e.classBaseNameCSS+"HeaderSeparator VCXPanelCtrlHeaderSeparator"}).inject(this._header),this._wrapper=new UWA.Element("div",{html:"",class:e.classBaseNameCSS+"Wrapper VCXPanelCtrlWrapper",styles:{}}).inject(this._panel),this._footer=new UWA.Element("div",{html:"",class:e.classBaseNameCSS+"Footer VCXScenarioCtrlFooter",styles:{visibility:"visible",height:"0px",bottom:"0px",width:"100%",transition:"height 0.5s, visibility 0.5s",overflow:"hidden"}}).inject(this._panel),e.slidingViews.showPager=!1,e.immersiveFrame?e.slidingViews.prevPage=this._panelMaster.elements._titleP:e.slidingViews.prevPage=this._panel.elements.title,e.slidingViews.kinetic=!1,e.slidingViews._vcxuiSequencesMaster)if(0!==parseInt(u)&&e.slidingViews._vcxuiSequencesMaster.hasOwnProperty(u))for(var h in e.slidingViews._vcxuiSequencesMaster[u])e.slidingViews._vcxuiSequencesMaster[u].hasOwnProperty(h)&&this.addCreateMasterItem(h,parseInt(u));this._slidingViews=new n(e.slidingViews).inject(this._wrapper),this._slidingViews.getContent().setStyles({height:"100%"}),this._divSelectorGoToParent=new UWA.Element("div",{class:"vcxSlidingViewDirection vcxSlidingViewPrevious"}),e.immersiveFrame?this._panel.childNodes[0].insertBefore(this._divSelectorGoToParent,this._panel.childNodes[0].firstChild):this._panel.elements.title.insertBefore(this._divSelectorGoToParent,this._panel.elements.title.firstChild);var m=function(){l._display=0,l._panel.childNodes[0].firstChild.style.display="none",l._slidingViews.goToNthView(l._display),l._toolbar._titleName.innerHTML=l._slidingViews.options.views[0].title,l._toolbar.updateToolbar()};this._divSelectorGoToParent.addEvent(i.POINTERUP,(function(e){m()})),this._slidingViews.goToNthView(e.slidingViews.displayTabAtStart),1===e.slidingViews.disableSlindingMenu&&(this.getGoToParent().style.display="none"),this.onResizeCB=function(){if(l.options._experienceBase&&l._panelMaster){var e=l.options._experienceBase.getManager("VCXGUIManager").getUsableArea();if(e){var t=0;t=l._panelMaster.windowGroup?l._panelMaster.windowGroup.titleBarVisibleFlag?l._panelMaster.windowGroup.getTitleBar().offsetHeight:0:l._panelMaster.titleBarVisibleFlag?l._panelMaster.getTitleBar().offsetHeight:0;var i=l._header.offsetHeight;l._wrapper.style.height=e.clientHeight-(t+i)-3+"px"}}},window.addEventListener&&(this._tokenScreenResize=window.addEventListener("resize",this.onResizeCB,!0),this._tokenFreeZoneResize=window.addEventListener("freeZoneResize",this.onResizeCB,!0));var y=e.sidePanel.title,g="";if(this.options._experienceBase){let t=s;this.options._i18n&&(t=this.options._i18n),e.appID&&(g=t.get(e.appID+y+".PanelTitle")),""===g&&(g=t.get("VCX"+y+".PanelTitle"))}this._toolbar=new a({controller:e.sidePanel.controller,title:g,parent:e.immersiveFrame?this._header:this._panel.elements.title,panel:this._panel}),1!==e.slidingViews.disableSlindingMenu&&(this._toolbar.getTextContainer().addEvent(i.POINTERUP,(function(e){m()})),this._toolbar.getTextContainer().style.cursor="pointer")},unInitialize:function(){for(var e in window.addEventListener&&(window.removeEventListener("resize",this.onResizeCB,!0),window.removeEventListener("freeZoneResize",this.onResizeCB,!0),delete this._tokenScreenResize,delete this._tokenFreeZoneResize),this._divSelectorGoToParent.removeEvent(i.POINTERUP),this._divSelectorGoToParent.remove(),this._divSelectorGoToParent=null,this.observer&&this.observer.disconnect(),this._slidingViews=null,this._toolbar.getTextContainer().removeEvent(i.POINTERUP),this._toolbar.unInitialize(),this._toolbar=null,this._panelMaster?(this._panelMaster.destroy(),this._panelMaster=null):(this.getPanel().elements.container.parentNode.removeChild(this.getPanel().elements.container),this._panel.remove(),this._panel=null),this.options.slidingViews._vcxuiSequencesMaster)if(this.options.slidingViews._vcxuiSequencesMaster.hasOwnProperty(e))for(var t in this.options.slidingViews._vcxuiSequencesMaster[e])this.options.slidingViews._vcxuiSequencesMaster[e].row&&(this.options.slidingViews._vcxuiSequencesMaster[e].row.removeEvent(i.POINTERUP),this.options.slidingViews._vcxuiSequencesMaster[e].row.remove(),this.options.slidingViews._vcxuiSequencesMaster[e].row=null),this.options.slidingViews._vcxuiSequencesMaster[e].hasOwnProperty(t)&&this.options.slidingViews._vcxuiSequencesMaster[e][t]&&this.options.slidingViews._vcxuiSequencesMaster[e][t].unInitialize&&this.options.slidingViews._vcxuiSequencesMaster[e][t].unInitialize();this.options.slidingViews=null,this.options=null,this._panel=null,this.observer=null,this._header=null,this._headerSeparator=null,this._wrapper=null,this._footer=null,this.onResizeCB=null},tabWith:function(e){this._panelMaster&&(this._panelMaster.attachToWindow(e._panelMaster,WUXSnapAreaEnum.InsideArea),this._panelMaster.windowGroup)},getPanel:function(){return this._panel},getToolbar:function(){return this._toolbar},getHeader:function(){return this._header},getContent:function(){return this._wrapper},getFooter:function(){return this._footer},getGoToParent:function(){return this._divSelectorGoToParent},addCreateMasterItem:function(e,t){var n=new UWA.Element("div",{class:"vcxuiSequencesMasterRow"});n.inject(this.options.slidingViews._vcxuiSequencesMaster[0].Menu),this.options.slidingViews._vcxuiSequencesMaster[t].row=n,new UWA.Element("div",{html:e,class:"vcxuiSequencesMasterCell"}).inject(n),new UWA.Element("div",{class:"vcxSlidingViewNext"}).inject(n);var r=t,a=this;n.addEvent(i.POINTERUP,(function(e){var t;t=r,a._display=t,a._panel.childNodes[0].firstChild.style.display="",a._slidingViews.goToNthView(a._display),a._toolbar._titleName.innerHTML=a.options.slidingViews.views[a._display].title,a._toolbar.updateToolbar()}))}})}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXGUIInfrastructure/VCXPropertiesGUIService",["require","exports","DS/VCXWebSystem/VCXObjectTools","DS/ApplicationFrame/CommandsManager","i18n!DS/VCXGUIInfrastructure/assets/nls/VCXGUIInfrastructure","DS/VCXGUIInfrastructure/VCXFrameBoxing","DS/VCXGUIInfrastructure/VCXFontBoxing","DS/VCXGUIInfrastructure/VCXHyperlinkBoxing","UWA/Core","DS/VCXWebProperties/VCXPropertyGroupSet","DS/VCXWebProperties/VCXPropertySet","DS/Tweakers/TypeRepresentationFactory","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueColor","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables","DS/Controls/Button","DS/Menu/ContextualMenu","DS/WebappsUtils/WebappsUtils","DS/VCXWebKernelCommands/VCXCmdRequestChangeProperties","DS/VCXWebIO/VCXFileServices"],(function(e,t,i,n,r,a,o,s,l,d,c,p,u,h,m,y,g,f,C,v){"use strict";d=__importDefault(d),c=__importDefault(c),u=__importDefault(u),h=__importDefault(h),m=__importDefault(m),v=__importDefault(v);return class{constructor(e){this._experienceBase=e,this._textureUploadPlaceHolder=r.get("VCXProperties.TextureUploadPlaceHolder"),this._imageUploadPlaceHolder=r.get("VCXProperties.ImageUploadPlaceHolder"),this.eventCallbacks={},this._lastSelection=[],this.modifyWhile=!1,this.factory=new p,this._cmdApplyRequestChangeProperty=new C(this._experienceBase),this._cmdSimulateRequestChangeProperty=new C(this._experienceBase),this._hyperlinkBoxing=new s,this._hyperlinkBoxing.initialize(this._experienceBase),this._fontBoxing=new o,this._frameBoxing=new a}unInitialize(){this._hyperlinkBoxing&&(this._hyperlinkBoxing.unInitialize(),this._hyperlinkBoxing=null),this._fontBoxing&&(this._fontBoxing=null),this._frameBoxing&&(this._frameBoxing=null),this._lastSelection=[]}setLastSelection(e){this._lastSelection=e}getLastSelection(){return this._lastSelection}getModificationStatus(){return this.modifyWhile}BuildIntersectionPropertyGroups(e){for(var t=[],i=0;i<e.length;i++){var n=e[i].QueryInterface("VCXIModifiableView"),r=n&&n.getPropertyGroups&&n.getPropertyGroups();if(n&&n.isHiddenFromPropPanel()||!r)e.splice(i,1),--i;else{Object.keys(r).forEach((t=>{var i=n.getAdditionalPropertySettings&&n.getAdditionalPropertySettings(e)||{};r[t].additionalPropertySettings={},Object.keys(r[t]._propertiesInfos).forEach((e=>{i[e]&&(r[t].additionalPropertySettings[e]=i[e])}))}));var a=new d.default;a.SetFromGroupsMap(r),t.push(a)}}var o=new d.default;return o.Intersection(t),o}getGroupUIInformation(e,t,i){if(!1!==e.availability){var n=e.groupID;""===n&&(n="Group.Essentials");var r={propertyGroup:e,modifiableViewList:this.getSelectedModifiableviews(i)},a={name:this._getTranslationI18n(r).groupName,arrayProps:[],groupID:n};if(t[n]=a,t[n].order=e.priority,"boolean"!=typeof e.availability&&"boolean"==typeof e.visibility){if(void 0===e.availability&&"boolean"==typeof e.visibility&&""===e.PropertyControlingGroupVisibility)throw new Error("PropertyControlingGroupVisibility is undefined but a visibility was set on this group");t[n].checkbox=e.visibility,t[n].showPropName=e.PropertyControlingGroupVisibility}var o=new d.default;o.AddOrModifyGroup(e.clone());var s=this._getPropertiesFromPropertyGroups(i,o).map,l=e.getPropertiesIDsOrderedArray();for(var c in l){var p=l[c],u=s[p];this.getPropertyUIInformation(p,u,e,s,t[n],i)}0!==t[n].arrayProps.length||"checkbox"in t[n]||delete t[n]}}_getPropertiesFromPropertyGroups(e,t){for(var i=new c.default,n=t.getListPropertiesNames(),r=0;r<e.length;r++)for(var a=e[r],o=a&&a.QueryInterface("VCXIModifiable"),s=0;s<n.length;++s){var l=n[s],d=o.GetProperty(l);if(d){var p=i.GetProperty(l);p?p.GetPropertyValue().IsEqualTo(d.GetPropertyValue())||(p.GetPropertyInfo().SetDefined(!1),n.splice(s,1),--s):i.AddOrModifyProperty(d.Clone())}else this._experienceBase.getManager("VCXContextManager").getUrlVars().debug,n.splice(s,1),--s}return i}getPropertyUIInformation(e,t,i,n,r,a){let o={};o.touch=this._experienceBase.getManager("VCXGUIManager").isTouchActivated(),o.propertyId=e;let s=this._experienceBase.getManager("VCXContextManager").getUrlVars();if(!t||!this._isPropertyDisplayed(t,s))return;let l=t.GetPropertyValue();o.propertyValue=l;let d=t.GetPropertyInfo();o.propInfo=d;let c=i.additionalPropertySettings&&i.additionalPropertySettings[e];c&&(c.propertyName=e),o.propSettings=c;let p=a,u=!1;if(1===p.length){let t=p[0].QueryInterface("VCXIModifiable"),i=this._experienceBase.getManager("VCXScenarioManager");if(c&&c.overridePropertyList){for(let e=0;e<c.overridePropertyList.length;e++)if(i.IsCurrentPropertyDifferentFromNeutral(t,c.overridePropertyList[e])){u=!0;break}}else u=i.IsCurrentPropertyDifferentFromNeutral(t,e)}o.isOverriden=u;let h=i.isVisible(e);if(e===i.PropertyControlingGroupAvailability)return void(r.propControlingAvailability={propertyId:e,propertyValue:l});let m={strPropId:e,propInfo:d,propertyGroup:i,urlVariables:s,modifiableViewList:this.getSelectedModifiableviews(p)},y=this._getTranslationI18n(m).propName;o.label=y;o.disabled=false;let g=!d.IsDefined();if(o.multipleSelectionUndefined=g,d.IsBounded()&&(o.bounds=d.GetBounds()),i.PropertyControlingGroupVisibility===e)"boolean"!=typeof i.availability&&"boolean"==typeof i.visibility&&(r.checkbox=l.GetValue(),r.showPropName=e,r.disabled=false);else{let s=!0,d=i.getPropertiesIDsOrderedArray();if(d.indexOf(e)>=0&&(o.order=d.indexOf(e)),h&&this.isPropertyBoxed(e,t))s=!1,this.getBoxedPropertiesUIInfo(i,t,y,u,c,r.arrayProps,r.checkbox,a);else if(this._experienceBase.getManager("VCXContextManager").isSupported("OpacityOverride")&&h&&(e.includes(".Defined")||("Actor.Color"===e||"Actor.Opacity"===e)&&n&&n[e+".Defined"]&&i.isVisible(e+".Defined")))if(e.includes(".Defined"))s=!1;else{let t=e+".Defined",i=n[t],r=i.GetPropertyValue(),a=i.GetPropertyInfo();o.defined={propertyId:t,propertyDefined:i,propertyValue:r,propertyInfo:a}}else if(e.includes(".Color"))if(e.includes(".Opacity")&&n[e.replace(".Opacity","")])s=!1;else{let t=e+".Opacity",i=n[t];if(i){let e=i.GetPropertyValue(),n=i.GetPropertyInfo();o.opacity={propertyId:t,propertyOpacity:i,propertyValue:e,propertyInfo:n},n.IsBounded()&&(o.opacity.bounds=n.GetBounds())}}else if("VCXPropertyValueDocId"===l.GetType()){let t=l.GetValue(),i="Upload texture.",n="";if(t>=0){let e=this._experienceBase.getManager("VCXDocManager").GetPropPath(t);n=e&&e.GetFileName().GetValue()}1===p.length&&p[0].getSourceName&&(n=p[0].getSourceName()),(""===n||"I_VCX_DefaultTexture.png"===n)&&this._imageUploadPlaceHolder&&this._textureUploadPlaceHolder&&(i=e.includes("Image")?this._imageUploadPlaceHolder:this._textureUploadPlaceHolder,n=""),o.placeHolder={placeHolder:i,fileName:n}}else"VCXPropertyValueBase64"===l.GetType()&&(o.placeHolder={placeHolder:this._imageUploadPlaceHolder,fileName:""});this.fillEnumInformationInto(e,t,i,o,a),s&&h&&r.arrayProps.push(o)}}getBoxedPropertiesUIInfo(e,t,i,n,r,a,o,s){let l=t.GetPropertyInfo().GetPropertyName(),d=t.GetPropertyValue(),c=t.GetPropertyInfo();if(e.isVisible(l)&&this.isPropertyBoxed(l,t)){let o=e.getProperties()[l]&&e.getProperties()[l].hiddenFields,p="Actor.Hyperlink"===l?"hyperlink":"Collab.Text.Font"===l||"Collab.Text.Font.Container"===l?"font":"VCXPropertyValueFrame"===d.GetType()||"VCXPropertyValueLocation"===d.GetType()?"frame":null,u=null,h=this.getUnboxedPropertiesNLS(p,l);"Actor.Hyperlink"===l?(u=this.getUnboxedPropertiesForGUI(p,d,c),u&&u.propertyAction&&delete u.propertyAction,Boolean(u.propertyType.GetPropertyValue().GetValue())):("Collab.Text.Font"===l||["VCXPropertyValueLocation","VCXPropertyValueFrame"].includes(t.GetPropertyValue().GetType())&&this._experienceBase.getManager("VCXContextManager").isSupported("FrameUnboxing"))&&(u=this.getUnboxedPropertiesForGUI(p,d,c,o));let m,y=e.getPropertiesIDsOrderedArray();if(y.indexOf(l)>=0&&(m=y.indexOf(l)),u)for(let t in u)if(u.hasOwnProperty(t)){if("hiddenFields"===t)continue;let o=u[t];if(!o)continue;let d=o.GetPropertyInfo(),p=u.hiddenFields&&u.hiddenFields.includes(t);if(!d.IsVisible()||p)continue;let y=d.GetPropertyName(),g=i,f=h&&h[y];f&&("Actor.Position"===l||"Actor.Hyperlink"===l||g===l?g=f:g+=" "+f);let C={label:g,propertyId:y,propertyValue:o.GetPropertyValue(),touch:this._experienceBase.getManager("VCXGUIManager").isTouchActivated(),isOverriden:n,multipleSelectionUndefined:!c.IsDefined(),boxedProperty:o,order:m,propSettings:r};this.fillEnumInformationInto(y,o,e,C,s),a.push(C)}}}getMainPropNameFromBoxedPropName(e){return e.replace(/(\_\w+$)/,"")}getNewValueFromBoxedProperty(e,t,i,n){var r=this["_"+e+"Boxing"];if(r.UpdateMapForGUI&&r.BuildNewValueFromGUI){this.getMainPropNameFromBoxedPropName(n.propName)||console.log("Issue computing mainPropName from boxedProperty name");var a=this.getUnboxedPropertiesForGUI(e,t,i),o=r.UpdateMapForGUI(a,n);return r.BuildNewValueFromGUI(o)}}getUnboxedPropertiesForGUI(e,t,i,n){return"hyperlink"===e?this._hyperlinkBoxing.GetPropertiesForGUI(t,i):"font"===e?this._fontBoxing.GetPropertiesForGUI(t,i,n):"frame"===e?this._frameBoxing.GetPropertiesForGUI(t,i,n):void 0}getUnboxedPropertiesNLS(e,t){return"hyperlink"===e?this._hyperlinkBoxing.getPropertiesNamesNLS&&this._hyperlinkBoxing.getPropertiesNamesNLS(t):"font"===e?this._fontBoxing.getPropertiesNamesNLS&&this._fontBoxing.getPropertiesNamesNLS(t):"frame"===e?this._frameBoxing.getPropertiesNamesNLS&&this._frameBoxing.getPropertiesNamesNLS(t):void 0}_isPropertyDisplayed(e,t){let i=e.GetPropertyValue();if(!i)return!1;if(!t.propertiesNoFilter&&("VCXPropertyValueVector"===i.GetType()||"VCXPropertyValueAnchor"===i.GetType()||"VCXPropertyValueMap"===i.GetType()))return!1;var n=this._experienceBase,r=n&&n.getManager("VCXContextManager");return!!(t.propertiesNoFilter||"VCXPropertyValueFrame"!==i.GetType()&&"VCXPropertyValueLocation"!==i.GetType()||r&&r.isSupported("FrameUnboxing"))}getSelectedModifiableviews(e){var t=new Array;return e.every((function(e){return t.push(e.QueryInterface("VCXIModifiableView")),!0})),t}_getTranslationI18n(e){var t=e.strPropId,n=e.propInfo,r=e.propertyGroup,a=e.urlVariables,o=e.modifiableViewList,s={};if(t){if(s.propName=t,s.choices={},n&&n.GetMetaPropertyDef()){var l=n.GetMetaPropertyDef().GetDefaultLabel();l&&(s.propName=l)}else if(!a||!a.noNLS){var d={propertyName:t,group:r};o.every((e=>{var r=e.getTranslatedProperty(d);if(s.propName===t?s.propName=r.propertyName:s.propName===r.propertyName||(console.error("Translation error, differs from one modifiable to the other for property: ",t),s.propName="error"),r.choice&&0!==Object.keys(r.choice).length&&r.choice.constructor===Object)0===Object.keys(s.choices).length?s.choices=r.choice:i.deepCompare(Object.keys(r.choice),Object.keys(s.choices))&&i.deepCompare(Object.values(r.choice),Object.values(s.choices))||(console.error("Enumeration error, differs from one modifiable to the other for property: ",t),s.choices={error:"error"});else if(n.GetMapChoiceEnum&&n.GetMapChoiceEnum()){s.choices=n.GetMapChoiceEnum(),Object.keys(s.choices).every((e=>(s.choices[e]=s.choices[e].replace("__DONOTTRANSLATE__",""),!0)))}return!0}))}}else s.groupName=r.groupID,o.every((e=>{var i={group:r},n=e.getTranslatedProperty(i)&&e.getTranslatedProperty(i).groupName;if(s.groupName===r.groupID)s.groupName=n;else if(s.groupName!==n)return console.error("Translation error, differs from one modifiable to the other for property: ",t),s.groupName="error",!1;return!0}));return s}isPropertyBoxed(e,t){return!(!["Actor.Hyperlink","Collab.Text.Font"].includes(e)&&!["VCXPropertyValueLocation","VCXPropertyValueFrame"].includes(t.GetPropertyValue().GetType()))}fillEnumInformationInto(e,t,i,n,r){var a=this.getSelectedModifiableviews(r),o=t.GetPropertyValue(),s=t.GetPropertyInfo();if(s.GetMapChoiceEnum&&s.GetMapChoiceEnum()){var l=s.GetMapChoiceEnum(),d={propertyGroup:i,strPropId:e,propInfo:s,modifiableViewList:a},c=this._getTranslationI18n(d).choices,p=Object.keys(l);if(0===p.length)return;var u,h={};for(var m of p)c[m]?(h[m]=c[m],m===o.GetValue()+""&&(u=m)):(h[m]=l[m],m===o.GetValue()+""&&(u=m));n.mapChoiceEnum=l,n.enum=h,n.enumValue=u}}updatePanel(e,t){var n=this.BuildIntersectionPropertyGroups(e).getOrderedPropertyGroupsArray(),r=t.getPanelDisplayedInfo(),a=Object.keys(r),o=this.getSelectedModifiableviews(e),s=t.getUIGroupsInfo();if(s){for(var l=0;l<n.length;l++){for(var c=n[l],p={propertyGroup:c,modifiableViewList:o},u=this._getTranslationI18n(p).groupName,h=0;h<s.length;h++){if(s[h].groupID===c.groupID){s.splice(h,1);break}}var m=t.getGroupExpander(u);if(!a.includes(c.groupID)){var y={};if(this.getGroupUIInformation(c,y,e),y[c.groupID]){let e=this.createTweakerGroup({group:y[c.groupID],displayedInfo:r,callbackActivateDeactivateGroup:t.activateDeactivateGroup});t.addPropertyGroup?t.addPropertyGroup(e):console.error("Updating problem: the view does not have a function to add new groups")}continue}let V=new d.default;V.AddOrModifyGroup(c.clone());let _=this._getPropertiesFromPropertyGroups(e,V).map,I=Object.keys(_);for(var g=Object.keys(r[c.groupID]),f=0;f<I.length;f++){let n,a,o=I[f],s=_[o];if(g.includes(o)&&c.isVisible(o)){n=r[c.groupID][o].value,a=r[c.groupID][o].propType;let l=s.GetPropertyValue().GetValue(),d={arrayProps:[]};if(this.getPropertyUIInformation(o,s,c,_,d,e),o===c.PropertyControlingGroupVisibility&&r[c.groupID][o].value!==d.checkbox&&this.updateTweakers(o,d.checkbox,l,r),d.arrayProps.length>0){let e=d.arrayProps.length>0&&d.arrayProps[0].defined&&!d.arrayProps[0].defined.propertyValue.GetValue();d.arrayProps.length>0&&d.arrayProps[0].multipleSelectionUndefined&&(e=e||d.arrayProps[0].multipleSelectionUndefined);let p=r[c.groupID][o].undefinedDisplayFlag;if(!e||!p){let u=this.compareValues(s,l,a,n),h=d.arrayProps.length>0&&d.arrayProps[0].propSettings&&d.arrayProps[0].propSettings.buttons,y=r[c.groupID][o].additionalButtons,g=this.comparePropSettingsButtons(h,y);g&&(this.updateButtons(c.groupID,o,g.update,r),this.removeButtons(c.groupID,o,g.remove,r),this.addButtons(c.groupID,o,g.add,r),this.rebuildButtons(c.groupID,o,g.rebuild,r)),i.deepCompare(d.arrayProps[0].enum,r[c.groupID][o].enumChoices,!1,!1)||(u.needToRebuild=!0),c.isVisible(o)?u&&u.needToRebuild?(this.destroyTweakerLine(o,r),d.arrayProps.length>0&&this.buildPropertyLine({uiInfo:d.arrayProps[0]},m.body,r[c.groupID],t.panelContentHeader)):(u&&u.needToUpdate||e!==p)&&this.updateTweakers(o,u.valueForTweaker,l,r,e):this.destroyTweakerLine(o,r)}}}else if(o===c.PropertyControlingGroupAvailability);else if(this.isPropertyBoxed(o,s)){let l=[],d={strPropId:o,propInfo:s.GetPropertyInfo(),propertyGroup:c,urlVariables:this._experienceBase.getManager("VCXContextManager").getUrlVars(),modifiableViewList:this.getSelectedModifiableviews(e)},p=this._getTranslationI18n(d).propName;this.getBoxedPropertiesUIInfo(c,s,p,null,null,l,null,e);for(let d=0;d<l.length;d++){let p=l[d].boxedProperty,u=l[d].propertyId,h=l[d].propertyValue.GetValue();if(g.includes(u)){n=r[c.groupID][u].value,a=r[c.groupID][u].propType;let y={arrayProps:[]};this.getPropertyUIInformation(o,s,c,_,y,e);let g=this.compareValues(l[d].boxedProperty,h,a,n);for(let e=0;e<y.arrayProps.length;e++)if(y.arrayProps[e].propertyId===u){y.arrayProps=[y.arrayProps[e]];break}i.deepCompare(y.arrayProps[0].enum,r[c.groupID][u].enumChoices,!1,!1)||(g.needToRebuild=!0),p.GetPropertyInfo().IsVisible()?g&&g.needToRebuild?(this.destroyTweakerLine(u,r),this.buildPropertyLine({uiInfo:l[d]},m.body,r[c.groupID],t.panelContentHeader)):g&&g.needToUpdate&&this.updateTweakers(u,g.valueForTweaker,h,r):this.destroyTweakerLine(o,r)}else this.buildPropertyLine({uiInfo:l[d]},m.body,r[c.groupID],t.panelContentHeader);let y=g.indexOf(u);y>=0&&g.splice(y,1)}}else{if(!e[0].QueryInterface("VCXIModifiableView").getPropertyGroups()[c.groupID].isVisible(o))continue;var C={arrayProps:[]};this.getPropertyUIInformation(o,s,c,_,C,e),C.arrayProps.length>0&&this.buildPropertyLine({uiInfo:C.arrayProps[0]},m.body,r[c.groupID],t.panelContentHeader)}var v=g.indexOf(o);v>=0&&g.splice(v,1)}if(g.length>0)for(var b=0;b<g.length;b++){var P=g[b];this.destroyTweakerLine(P,r)}}if(s.length>0)for(var V=0;V<s.length;V++)t.destroyGroup(s[V])}}compareValues(e,t,i,n){var r=!1,a=!1,o=t,s=e.GetPropertyInfo().GetPropertyName();return"VCXPropertyValueDocId"===i||("VCXPropertyValueBase64"===i||e.GetPropertyValue().GetType()!==i?a=!0:t.GetColorHexString?"#"+t.GetColorHexString()!==n&&(o=t.GetColorHexString(),r=!0):n&&n.equals?n.equals(t.toArray())||(o=t.toArray(),r=!0):"VCXPropertyValueEnum"===e.GetPropertyValue().GetType()?t!==Number(n)&&(o=String(t),r=!0):n!==t&&(typeof n==typeof t?r=!0:console.log("%c there is an comparison issue with property: "+s,"color: red"))),{needToRebuild:a,needToUpdate:r,valueForTweaker:o}}comparePropSettingsButtons(e,t){if(!e||!t)return;let n={add:[],remove:[],update:[],rebuild:[]},r={...t};for(let a=0;a<e.length;a++){let o=e[a],s=t[o.type];if(s){i.deepCompare(o,t[o.type].buttonInfo)||(o.data&&!i.deepCompare(o.data,s.buttonInfo.data)?n.rebuild.push(o):n.update.push(o)),delete r[o.type]}else n.add.push(o)}for(const e in r)if(Object.hasOwnProperty.call(r,e)){const t=r[e];n.remove.push(t.buttonInfo)}return n}createTweakerGroup(e){let t;e.displayedInfo[e.group.groupID]={},"boolean"==typeof e.group.checkbox&&(t=(0,l.createElement)("div",{class:"vcxPropertyGroupHeader"}),this.factory.generateView(e.group.checkbox,{typePath:"independantBoolean",onViewCreated:i=>{if(void 0!==i){i.inject(t),i.internalOptions={propName:e.group.showPropName};let n=e.group.showPropName+"";n=n.replaceAll(".","-"),i.getContent().addClassName(n),i.getContent().setAttribute("data-rec-id",n+"-toggle"),e.callbackActivateDeactivateGroup&&i.getContent().addEventListener("change",(t=>{e.callbackActivateDeactivateGroup(i.value,e.group.name)})),i.getContent().addEventListener("DSpointerhit",(e=>{e.stopPropagation()})),e.displayedInfo[e.group.groupID][e.group.showPropName]={},e.displayedInfo[e.group.groupID][e.group.showPropName].tweakers=[],e.displayedInfo[e.group.groupID][e.group.showPropName].value=e.group.checkbox,e.displayedInfo[e.group.groupID][e.group.showPropName].tweakers.push(i)}else console.error("group switch creation failed")},onFailure:function(e){console.error("failed: ",e)}}));let i=!e.group.collapsed;void 0!==e.group.checkbox&&(e.group.checkbox||(i=!1));let n={header:e.group.name,customHeader:t,expandedFlag:i,disabled:e.fullDisableGroup,order:e.group.order},r=(0,l.createElement)("div",{html:"",class:"vcxPropertiesContainer"});return r.style.display="flex",r.style.flexDirection="column",e.group.arrayProps.every((t=>(this.buildPropertyLine({uiInfo:t},r,e.displayedInfo[e.group.groupID],e.specialHeaderElement),!0))),n.content=r,n.groupID=e.group.groupID,{groupAccordeonItem:n,displayInfo:e.displayedInfo}}buildPropertyLine(e,t,i,n){let r=(0,l.createElement)("div",{class:"vcxPropertyLine",styles:{order:e.uiInfo.order}});(0,l.createElement)("div",{html:"",class:"vcxPropertyLineNode vcxPropertyStatusBar"}).inject(r);let a=n&&e.uiInfo.propSettings&&e.uiInfo.propSettings.displayInHeader,o=e.uiInfo.propSettings&&e.uiInfo.propSettings.hiddenLabel,s=(0,l.createElement)("div",{html:e.uiInfo.label,class:"vcxPropertyLineNode vcxPropertyLabel"});s.title=e.uiInfo.label,a?r.inject(n):(r.inject(t),o||s.inject(r)),s.propertyId=e.uiInfo.propertyId,s.addEventListener("click",this.onClickLabel),s.addEventListener("dblclick",this.onDoubleClickLabel);let d=(0,l.createElement)("div",{html:"",class:"vcxPropertyLineNode vcxPropertyTweaker"}).inject(r);e.container=d;try{e.uiInfo.propSettings&&e.uiInfo.propSettings.exceptionTweaker?this.buildControl(e,i):this.buildTweaker(e,i)}catch(e){console.warn(e)}}buildControl(e,t){let i=e.uiInfo,n=e.container,r=i.propertyValue.GetType(),a=i.propertyId;if(a=a.replaceAll(".","-"),a=r+" "+a,t[i.propertyId]||(t[i.propertyId]={},t[i.propertyId].tweakers=[],t[i.propertyId].containerDiv=n),t[i.propertyId].propType=r,t[i.propertyId].enumChoices=i.enum,t[i.propertyId].value=i.propertyValue.GetValue(),"FunctionButtonGroup"===i.propSettings.displayStyle){let n=[];for(const e in i.mapChoiceEnum)if(i.mapChoiceEnum.hasOwnProperty(e)){const t=i.mapChoiceEnum[e];let r=i.propSettings.enumInfo[e];r&&n.push({displayStyle:r.displayStyle,value:t,icon:{iconName:r.iconName,iconPath:r.iconPath,fontIconFamily:1},commandId:r.commandId})}for(let r=0;r<n.length;r++){const a=n[r];let o=new y({displayStyle:a.displayStyle,icon:a.icon||{iconName:"i-question",fontIconFamily:1}}),s="";"string"==typeof a.commandId?s=a.commandId:"object"==typeof a.commandId&&(s=a.commandId.name),o.additionalButtonFunction=this.executeHeaderCommand.bind(this,s,a.commandId.args),o.inject(e.container),t[i.propertyId].tweakers.push(o)}}}buildTweaker(e,t){let i=e.uiInfo,n=e.container,r=i.propertyValue.GetType(),a=i.propertyId;a=a.replaceAll(".","-");let o=a;a=r+" "+a;let s,l,d,c,p,u,h,m,y,g,f,C,v,b,P={propName:i.propertyId,dataType:r};switch(i.bounds&&(h="slider",d=i.bounds.valueMin,c=i.bounds.valueMax,p=i.bounds.step,u=i.bounds.decimals),i.propSettings&&i.propSettings.displayStyle&&(h=i.propSettings.displayStyle),(i.defined&&i.defined.propertyValue&&!i.defined.propertyValue.GetValue()||i.multipleSelectionUndefined)&&(y=!0),r){case"VCXPropertyValueDocId":case"VCXPropertyValueBase64":i.disabled?(s="string",P.data="",f=i.propertyValue.GetValue(),i.disabled=!0):(i.placeHolder.fileName?l=new File([],i.placeHolder.fileName):(y=!0,v=i.placeHolder.placeHolder),s="file",f=i.propertyValue.GetValue()),i?.propSettings?.fileTypes&&(b=i.propSettings.fileTypes),o+="-filepicker";break;case"VCXPropertyValueDate":case"VCXPropertyValueHyperlinkId":default:break;case"VCXPropertyValueColor":s="color",y||(l="#"+i.propertyValue.GetValue().GetColorHexString()),o+="-colorpicker";break;case"VCXPropertyValueFloat":p=p||1,s="float",o+="slider"===h?"-slider":"-spinbox";break;case"VCXPropertyValueInt":s="integer",o+="slider"===h?"-slider":"-spinbox";break;case"VCXPropertyValueBoolean":o+="-checkbox",s="boolean";break;case"VCXPropertyValuePoint2D":s="vector2",g=i.disabled,l=Object.values(i.propertyValue.GetValue()),o+="-vector2";break;case"VCXPropertyValuePoint":s="vector3",g=i.disabled,l=Object.values(i.propertyValue.GetValue()),o+="-vector3";break;case"VCXPropertyValueString":s="string",o+="-textfield",i.propertyId.includes("Hyperlink_Hyperlink")&&(C="https?://.*|ftp://.*");break;case"VCXPropertyValueEnum":if(i.enum){l=i.enumValue,m=[],P.mapChoiceEnum=i.mapChoiceEnum;for(const e in i.enum)if(Object.prototype.hasOwnProperty.call(i.enum,e)){let t={value:e,label:i.enum[e]},n=i.propSettings?.enumInfo?.[e];n&&(t.icon={iconName:n.iconName,iconPath:n.iconPath,fontIconFamily:1}),m.push(t)}s="string",h=h||"combo",o+="-combobox"}else console.error("Enum ",i.propertyId," didnt have the necessary enum arguments")}t[i.propertyId]||(t[i.propertyId]={},t[i.propertyId].tweakers=[],t[i.propertyId].containerDiv=n),t[i.propertyId].propType=r,t[i.propertyId].enumChoices=i.enum,t[i.propertyId].undefinedDisplayFlag=y,t[i.propertyId].value=f||(void 0!==l?l:i.propertyValue.GetValue());let V=y?void 0:void 0!==l?l:i.propertyValue.GetValue();if(this.factory.generateView(V,{typePath:s,semantics:{disabled:i.disabled,minValue:d,maxValue:c,stepValue:p,displayStyle:h,decimals:u,placeholder:v,possibleValues:m,pattern:C,fileTypes:b},readOnly:g,onViewCreated:function(e){void 0!==e?(e.inject(n),e.internalOptions=P,e.getContent().addClassName(a),e.getContent().setAttribute("data-rec-id",o),e.getContent().setAttribute("data-prop-id",i.propertyId),t[i.propertyId].tweakers.push(e)):console.error("tweaker creation failed")},onFailure:function(e){console.error("failed: ",e)}}),"slider"===h&&this.factory.generateView(V,{typePath:s,semantics:{disabled:i.disabled,minValue:d,maxValue:c,stepValue:p,decimals:u},onViewCreated:function(e){if(void 0!==e){e.getContent().addClassName("vcxPropertySliderSpinbox"),e.getContent().addClassName(a);let r=i.propertyId;r=a.replaceAll(".","-"),r+="-spinbox",e.getContent().setAttribute("data-rec-id",r),e.getContent().setAttribute("data-prop-id",i.propertyId),e.inject(n),e.internalOptions=P,t[i.propertyId].tweakers.push(e)}else console.error("tweaker creation failed")},onFailure:function(e){console.error("failed: ",e)}}),i.opacity){let e={container:n,uiInfo:{...i.opacity,disabled:i.disabled}};this.buildTweaker(e,t)}if(i.defined){let e={container:n,uiInfo:{...i.defined,disabled:i.disabled}};this.buildTweaker(e,t)}1===this._lastSelection.length&&i.propSettings&&i.propSettings.buttons&&this.createPropSettingsButtons(i.propSettings,t)}createPropSettingsButtons(e,t){t[e.propertyName].additionalButtons||(t[e.propertyName].additionalButtons={});let i=t[e.propertyName].containerDiv;for(let n=0;n<e.buttons.length;n++){let r,a=e.buttons[n],o=0;if(a.available){if("Restore"===a.type)r=new y({displayStyle:"lite",disabled:a.buttonDisabled,icon:{iconPath:f.getWebappsAssetUrl("VCXWebGUI","icons/32/VCX_Restore_grey.png")}}),r.elements.container.title=a.tooltip||"Restore Default Value",o=20,r.additionalButtonFunction=this.restoreFunction,r.additionalButtonFunctionArgs={data:a.data},i.addClassName("vcx-prop-restorable");else if("Clear"===a.type)r=new y({displayStyle:"lite",disabled:a.buttonDisabled,icon:{iconName:"clear",fontIconFamily:WUXManagedFontIcons.Font3DS}}),r.elements.container.title=a.tooltip||"Clear Value",r.additionalButtonFunction=this.clearFunction,r.additionalButtonFunctionArgs={data:a.data};else if("NavigateTo"===a.type){i.getChildren().every((function(e){return e.hasClassName("vcx-propNode-label")||i.removeChild(e),!0})),new l.createElement("div",{html:"Overruled",class:"vcx-prop-overruled"}).inject(i),r=new y({label:"Go to parent"}),o=20,r.additionalButtonFunction=this.goToParentFunction,r.additionalButtonFunctionArgs={data:a.data},r.getContent().addClassName("vcx-goToParent-button")}else if("Contextual"===a.type){if(!(a.data instanceof Array))throw new Error("contextual button data is not an array!");r=new y({displayStyle:"lite",disabled:a.buttonDisabled,icon:{iconName:"menu-dot",fontIconFamily:WUXManagedFontIcons.Font3DS}}),o=100,r.additionalButtonFunction=this.contextualContentFunction,r.additionalButtonFunctionArgs=r,g.addEventListener(r.getContent(),{callback:()=>{let e=new Array;for(let t=0;t<a.data.length;t++){const i=a.data[t];e.push({type:"PushItem",title:i.label,fonticon:{content:"wux-ui-3ds-"+i.iconName+" wux-ui-3ds"},tooltip:{title:i.tooltipTitle,shortHelp:i.tooltip},action:{callback:i.functionCB}})}return e}})}else r=new y({displayStyle:"lite",disabled:a.buttonDisabled,icon:{iconName:a.iconName||"i-question",fontIconFamily:WUXManagedFontIcons.Font3DS}}),a.type||(a.type="defaultType",console.error("A additional setting button was created without button.type -> Only one can be created anonymously without causing issues")),r.additionalButtonFunction=a.functionCB,r.additionalButtonFunctionArgs={name:a.name,propertyName:e.propertyName,data:a.data},r.elements.container.title=a.tooltip||"";let n=e.propertyName.replaceAll(".","-")+"-"+a.type+"-button";r.getContent().setAttribute("data-rec-id",n),r.getContent().addClassName("vcx-additional-prop-button"),r.getContent().style.order=o.toString()||"",r.inject(i),t[e.propertyName].additionalButtons[a.type]&&console.error("Can't create two buttons of the same type for a single property"),t[e.propertyName].additionalButtons[a.type]={button:r,buttonInfo:a}}}}updateTweakers(e,t,i,n,r){try{let a=Object.keys(n);for(let o=0;o<a.length;o++){let s=a[o],l=n[s][e];if(l){let a=l.tweakers;for(let n=0;n<a.length;n++)if(r)a[n].value=void 0,l.undefinedDisplayFlag=!0;else{if(a[n].possibleValues)if(a[n].possibleValues.includes(t))a[n].value=t;else{let r=l.enumChoices&&l.enumChoices[t];if(r&&a[n].possibleValues.includes(r))a[n].value=r;else{let t=a[n].possibleValues.find((e=>e.value===i.toString()));t?a[n].value=t.value:console.error("Error with update of enum for: "+e)}}else a[n].value=t;l.undefinedDisplayFlag=!1}n[s][e].value=i}}}catch(e){console.error(e)}}updateButtons(e,t,i,n){let r=n,a=r[e][t].additionalButtons;for(let o=0;o<i.length;o++){const s=i[o];if(!s.available){this.removeButtons(e,t,[s],n);continue}let l=a[s.type].button;l.disabled=s.buttonDisabled,l.elements.container.title=s.tooltip,s.iconName&&(l.icon={iconName:s.iconName,fontIconFamily:WUXManagedFontIcons.Font3DS}),r[e][t].additionalButtons[s.type].buttonInfo=s}}removeButtons(e,t,i,n){let r=n,a=r[e][t].additionalButtons;for(let n=0;n<i.length;n++){const o=i[n];a[o.type].button.destroy(),delete r[e][t].additionalButtons[o.type]}}addButtons(e,t,i,n){let r={propertyName:t,buttons:i},a=n[e];this.createPropSettingsButtons(r,a)}rebuildButtons(e,t,i,n){this.removeButtons(e,t,i,n),this.addButtons(e,t,i,n)}destroyTweakerLine(e,t){let i=Object.keys(t);for(let n in i){let r=i[n],a=t[r];if(a[e]){let i,n=a[e].tweakers;n.length>0&&(i=n[0].getContent().closest(".vcxPropertyLine"));for(let e of n)try{e.destroy&&e.destroy()}catch(e){console.warn("Type error is thrown by WebUX bug upon destruction of blob tweaker. ",e.message)}i&&i.destroy(),delete t[r][e]}}}subscribePropertyEvents(e,t){this.eventCallbacks.preEditCB=t?.preEditCB||this._onPreEdit.bind(this),this.eventCallbacks.liveChangeCB=t?.liveChangeCB||this._onLiveChange.bind(this),this.eventCallbacks.changeCB=t?.changeCB||this._onChange.bind(this),this.eventCallbacks.postEditCB=t?.postEditCB||this._onPostEdit.bind(this),this.eventCallbacks.buttonClickCB=t?.buttonClickCB||this._onButtonClick.bind(this),this.eventCallbacks.cancelEditCB=t?.cancelEditCB||this._onCancelEdit.bind(this),e.addEventListener("preEdit",this.eventCallbacks.preEditCB),e.addEventListener("liveChange",this.eventCallbacks.liveChangeCB),e.addEventListener("change",this.eventCallbacks.changeCB),e.addEventListener("postEdit",this.eventCallbacks.postEditCB),e.addEventListener("cancelEdit",this.eventCallbacks.cancelEditCB),e.addEventListener("buttonclick",this.eventCallbacks.buttonClickCB)}unsubscribePropertyEvents(e){e.removeEventListener("preEdit",this.eventCallbacks.preEditCB),e.removeEventListener("liveChange",this.eventCallbacks.liveChangeCB),e.removeEventListener("change",this.eventCallbacks.changeCB),e.removeEventListener("postEdit",this.eventCallbacks.postEditCB),e.removeEventListener("cancelEdit",this.eventCallbacks.cancelEditCB),e.removeEventListener("buttonclick",this.eventCallbacks.buttonClickCB),delete this.eventCallbacks.preEditCB,delete this.eventCallbacks.liveChangeCB,delete this.eventCallbacks.changeCB,delete this.eventCallbacks.postEditCB,delete this.eventCallbacks.cancelEditCB,delete this.eventCallbacks.buttonClickCB}_onButtonClick(e){e.dsModel&&e.dsModel.additionalButtonFunction&&e.dsModel.additionalButtonFunction(e.dsModel.additionalButtonFunctionArgs)}async _onChange(e){this.modifyWhile=!0;try{await this._onNodeModelUpdate(e,!1,this.modifyWhile,this._lastSelection)}catch(e){console.error(e)}finally{this.modifyWhile=!1}}async _onLiveChange(e){console.log("_onLiveChange"),await this._onNodeModelUpdate(e,!1,this.modifyWhile,this._lastSelection)}async _onPreEdit(e){console.log("_onPreEdit"),this.modifyWhile=!0,this._experienceBase.getManager("VCXCommandManager").StartTransaction();var t=this._experienceBase.getManager("VCXContextManager").getMainViewer();this._experienceBase.getManager("VCXVisuManager").hideDecorations("PanelPropLiveChange",t),await this._onNodeModelUpdate(e,!0,this.modifyWhile,this._lastSelection)}async _onPostEdit(e){console.log("_onPostEdit"),this.modifyWhile=!1;var t=this._experienceBase.getManager("VCXContextManager").getMainViewer();this._experienceBase.getManager("VCXVisuManager").showDecorations("PanelPropLiveChange",t),await this._onNodeModelUpdate(e,!1,this.modifyWhile,this._lastSelection),this._experienceBase.getManager("VCXCommandManager").EndTransaction()}async _onCancelEdit(e){console.log("_onCancelEdit"),this.modifyWhile=!1;var t=this._experienceBase.getManager("VCXContextManager").getMainViewer();this._experienceBase.getManager("VCXVisuManager").showDecorations("PanelPropLiveChange",t),await this._onNodeModelUpdate(e,!1,this.modifyWhile,this._lastSelection),this._experienceBase.getManager("VCXCommandManager").CancelTransaction()}async _onNodeModelUpdate(e,t,i,n){if(e&&e.dsModel&&e.dsModel.internalOptions){var r=e.dsModel;r.propName=e.dsModel.internalOptions.propName,i&&(r.std=r.value||void 0!==r.checkFlag&&r.checkFlag);var a={};await this.getCID4Property(r,a,e,n);var o=a.vcxValue,s=a.propertyName;if("VCXPropertyValueColor"===r.dataType){let e=u.GetProperty(s).GetPropertyValue();if(!e)return;var l=e.GetPropertyValue().ToString(),d=o;if(d.substr(0,d.lastIndexOf(","))===l.substr(0,l.lastIndexOf(",")))return}for(var c=n.map((e=>e.QueryInterface("VCXIModifiable"))),p=0;p<c.length;p++){var u=c[p];if(-1!==s.search("Hyperlink_")){s="Actor.Hyperlink";let e=u.GetProperty(s).GetPropertyValue(),t=u.GetProperty(s).GetPropertyInfo();o=this.getNewValueFromBoxedProperty("hyperlink",e,t,r).GetValue()}else if(-1!==s.search("Text.Font")){s="Collab.Text.Font";let e=u.GetProperty(s).GetPropertyValue(),t=u.GetProperty(s).GetPropertyInfo();o=this.getNewValueFromBoxedProperty("font",e,t,r)}else if(-1!=s.search("_Position")||-1!=s.search("_Orientation")||-1!=s.search("_Scale")||-1!=s.search("_Pivot")){(s=s.replace(/(\_\w+$)/,""))||console.log("Issue computing mainPropName from boxedProperty name");let e=u.GetProperty(s).GetPropertyValue(),t=u.GetProperty(s).GetPropertyInfo();o=this.getNewValueFromBoxedProperty("frame",e,t,r)}}t?await this._cmdSimulateRequestChangeProperty.RequestModification(c,s,null,o):await this._cmdApplyRequestChangeProperty.RequestModification(c,s,null,o),this.applyOrSimulate(t)}}applyOrSimulate(e){e||(this._experienceBase.getManager("VCXCommandManager").Push(this._cmdApplyRequestChangeProperty),this._cmdApplyRequestChangeProperty=new C(this._experienceBase))}async getCID4Property(e,t,i,n){if(t.propertyName=e.propName,t.vcxValue=e.value+"",e.propName.endsWith(".Availability"))t.vcxValue=e.value?3:4;else if("tweakerEnum"===e.name||"TweakerString"===e.name&&("combo"===e.displayStyle||"buttonGroup"===e.displayStyle)){var r=e.value,a={},o=n[0].QueryInterface("VCXIModifiable").GetProperty(t.propertyName);if(o){var s=o.GetPropertyInfo();a=e.internalOptions&&e.internalOptions.mapChoiceEnum?e.internalOptions.mapChoiceEnum:s.GetMapChoiceEnum()}for(var l in a)if(a.hasOwnProperty(l)){var d=a[l],c=d,p=c;if("1"!=this._experienceBase.getManager("VCXContextManager").getUrlVars().noNLS){let e=s.Geti18n();if(e&&(p=e[c]),void 0===p)this._experienceBase.getManager("VCXStylesManager")&&(p=m.default[c]);void 0===p&&(p=c)}if(p===r){t.vcxValue=l;break}if(d===r){t.vcxValue=l;break}}}else if("tweakerFile"===e.name&&"VCXPropertyValueDocId"===e.internalOptions.dataType){var y="";let e=i.target.dsModel.value;i&&(y=e.name);var g=window.URL.createObjectURL(e),f=this._experienceBase.getManager("VCXDocManager").BuildPathFromString(g),C=new u.default;C.SetValue(y),f.SetFileName(C);var b=this._experienceBase.getManager("VCXDocManager").AddOrModifyDoc(f);t.vcxValue=String(b.GetValue())}else if("tweakerFile"===e.name&&"VCXPropertyValueBase64"===e.internalOptions.dataType){let n=i.target.dsModel.value;t.vcxValue=n?await v.default.GetBase64FromBlobObject(n):"",e.value=void 0}else if("TweakerColor"===e.name){var P="#"+t.vcxValue,V=new h.default;V.GetValue().FromHexString(P);var _=V.ToString();t.vcxValue=_}else if("TweakerVector"===e.name)t.vcxValue="["+t.vcxValue+"]";else if("TweakerString"===e.name)if(e.propName.includes("StipplingMotif")&&e.value.length>0)if(e.value===""+parseFloat(e.value))t.vcxValue=e.value;else{var I=e.value.match(/\d+(?:\.\d+)?/g),S=I&&I.map((e=>parseFloat(e)));t.vcxValue=S?S.join(" "):"0"}else t.vcxValue=e.value}executeHeaderCommand(e,t){if(""!==e){var i=null,r=this._experienceBase.getManager("VCXContextManager");r&&(i=r.getContext()),n.getCommand(e,i)&&n.getCommand(e,i).begin(t)}}restoreFunction(){console.error("This function was not implemented")}goToParentFunction(){console.error("This function was not implemented")}clearFunction(){console.error("This function was not implemented")}contextualContentFunction(e){g.buildAndDisplayContextualMenu(e.getContent(),{clientX:e.getContent().getOffsets().x+e.getContent().offsetWidth,clientY:e.getContent().getOffsets().y+e.getContent().offsetHeight})}onClickLabel(){console.warn("label click did nothing: callback was not given to PanelView")}onDoubleClickLabel(){console.warn("label doubleclick did nothing: callback was not given to PanelView")}}})),define("DS/VCXGUIInfrastructure/VCXUICard",["require","exports","DS/Controls/Button","DS/Controls/Toggle","DS/Menu/ContextualMenu","UWA/Core","DS/CoreEvents/Events","DS/VCXGUIInfrastructure/VCXCardTypeEnum"],(function(e,t,i,n,r,a,o,s){"use strict";return class{constructor(e){if(this.typeCard=s.SCENE,this.cardID=e.id,this.typeCard=e.type,this.activeClassName="vcxActiveScene",this.cardElement=(0,a.createElement)("div",{text:"",class:"vcxUICard",draggable:"true"}),this.cardElement.setAttribute("data-card-id",e.id),e.data)for(const t in e.data)if(Object.prototype.hasOwnProperty.call(e.data,t)){const i=e.data[t];this.cardElement.setAttribute("data-"+t,i)}let t;t=e.image instanceof HTMLElement?(0,a.createElement)("div",{class:"vcxUICard-thumbnail",html:[e.image],draggable:"false"}):(0,a.createElement)("img",{class:"vcxUICard-thumbnail",src:e.image,draggable:"false"});let l=(0,a.createElement)("div",{class:"vcxUICard-thumbnail-container"});if(e.cardLayout&&e.cardLayout.ratioX&&e.cardLayout.ratioY&&e.cardLayout.cardWidth){let i=(e.cardLayout.cardWidth-4)*e.cardLayout.ratioY/e.cardLayout.ratioX;t.style.height=i+"px"}l.inject(this.cardElement),t.inject(l),this.thumbnail=t,e.image||(t.style.display="none");let d=(0,a.createElement)("div",{text:"",class:"vcxUICard-descriptionContainer"});d.inject(this.cardElement),e.cardLayout&&e.cardLayout.descriptionHeight&&(d.style.height=e.cardLayout.descriptionHeight+"px");let c=(0,a.createElement)("div",{class:"vcxUICard-descriptionLabelsContainer"});c.inject(d),this.label=(0,a.createElement)("div",{text:e.title,class:"vcxUICard-descriptionTitle"}),this.label.setAttribute("data-rec-id","vcxuicard-title-div"),this.label.addEventListener("keydown",(e=>{"Enter"===e.key&&this.label.blur()})),this.label.inject(c),this.editableLabel=e.editableLabel??!1,this.setEditableLabel(this.editableLabel),e.subTitle&&(this.subLabel=(0,a.createElement)("div",{text:e.subTitle,class:"vcxUICard-descriptionSubtitle"}),this.subLabel.inject(c));let p=(0,a.createElement)("div",{text:"",class:"vcxUICard-descriptionActionBar"});return p.inject(d),this.selectToggle=new n({type:"checkbox"}),e.selectableFlag&&(this.selectToggle.inject(this.cardElement),this.selectToggle.getContent().addClassName("vcxSelectCard"),this.selectToggle.getContent().setAttribute("data-rec-id","vcxuicard-select-toggle"),this.selectToggle.getContent().addEventListener("click",(e=>{e.stopPropagation()})),this.selectToggle.getContent().addEventListener("change",(e=>{let t=e.dsModel;t&&"boolean"==typeof t.checkFlag&&(t.checkFlag?this.cardElement.addClassName("vcxSelected"):this.cardElement.removeClassName("vcxSelected")),o.publish({event:"VCXCard"+this.typeCard+"Selected",data:{id:this.getID(),checkflag:t.checkFlag}})}))),this.contextMenuButton=new i({displayStyle:"lite",icon:{iconName:"chevron-down",fontIconFamily:WUXManagedFontIcons.Font3DS}}),this.contextMenuButton.inject(p),this.contextMenuButton.getContent().addClassName("vcxCardMenu"),this.contextMenuButton.getContent().setAttribute("data-rec-id","vcxuicard-context-menu"),this.contextMenuButton.getContent().style.display="none",this.contextMenuButton.getContent().addEventListener("buttonclick",(()=>{r.buildAndDisplayContextualMenu(this.contextMenuButton.getContent(),{clientX:this.contextMenuButton.getContent().getOffsets().x+this.contextMenuButton.getContent().offsetWidth,clientY:this.contextMenuButton.getContent().getOffsets().y+this.contextMenuButton.getContent().offsetHeight})})),this}addRenameCardCallback(e){let t=this;this.label.addEventListener("focus",(()=>{window.getSelection()?.selectAllChildren(this.label)})),this.label.addEventListener("blur",(function(i){let n=i?.target?.innerHTML;(i?.target).scrollLeft=0,t.setEditableLabel(!1),e(t.getID(),n)}))}hideSelectToogle(){this.selectToggle.getContent().style.display="none"}getThumbnailElement(){return this.thumbnail}setImage(e){e&&(this.thumbnail.src=e),this.thumbnail.style.display=e?"block":"none"}destroy(){this.cardElement.destroy()}setLabel(e){return this.getLabel().setContent(e)}getLabel(){return this.label}getView(){return this.cardElement}setEditableLabel(e,t=!1){this.getLabel().setAttribute("contenteditable",e?"true":"false"),t&&this.getLabel().focus()}addCardClickCallback(e){e?this.cardElement.addEventListener("click",e):console.warn("a card was told to add an event listener with an undefined callback")}customizeMenu(e){r.addEventListener(this.contextMenuButton.getContent(),{callback:()=>{let t=new Array,i=e=>{if(!1===e.availability||e.availabilityCheckingCallback&&!e.availabilityCheckingCallback())return;let t={type:"PushItem",title:e.label,fonticon:{content:"wux-ui-3ds-"+e.icon+" wux-ui-3ds"},action:e.action?{callback:e.action}:void 0};if(e.state?t.state=e.state:e.stateCheckingCallback&&(t.state=e.stateCheckingCallback()?"enabled":"disabled"),e.subMenu){t.submenu=new Array;for(let n=0;n<e.subMenu.length;n++){let r=e.subMenu[n],a=i(r);a&&t.submenu.push(a)}0===t.submenu.length&&delete t.submenu}return t};for(let n=0;n<e.length;n++){const r=e[n];let a=i(r);a&&t.push(a)}return t}}),this.contextMenuButton.getContent().style.display=""}selectCard(){this.selectToggle.checkFlag||(this.selectToggle.checkFlag=!0)}unselectCard(){this.selectToggle.checkFlag&&(this.selectToggle.checkFlag=!1)}getID(){return this.cardID}activateCard(){this.cardElement.addClassName(this.activeClassName)}isCardActive(){return this.cardElement.classList.contains(this.activeClassName)}deactivateCard(){this.cardElement.removeClassName(this.activeClassName)}}}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXGUIInfrastructure/VCXPanel",["require","exports","DS/Controls/Button","DS/Tweakers/GeneratedToolbar","UWA/Core","DS/Tweakers/TypeEnums","DS/ApplicationFrame/CommandsManager","DS/Menu/ContextualMenu","DS/VCXGUIInfrastructure/VCXView"],(function(e,t,i,n,r,a,o,s,l){"use strict";l=__importDefault(l);class d extends l.default{constructor(e,t){super(t),this.immersiveFrame=e.immersiveFrame,this.headers={},this.tabViews=new Map}_buildDefaultHeaderSpace(e){let t=(0,r.createElement)("div",{html:"",class:"vcxPanelHeaderContainer"});return(0,r.createElement)("div",{html:e,class:"vcxPanelHeaderLabel"}).inject(t),(0,r.createElement)("div",{html:"",class:"vcxPanelHeaderToolbar"}).inject(t),t}getView(){return this.getPanel()}applyHeader(e){let t=this.headers[e];this.setPanelHeader(t.headerView)}displayDefaultHeader(){for(const e in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,e)){this.headers[e].default&&this.applyHeader(e)}}generateHeaders(e){let t=!1;for(let i=0;i<e.length;i++){const r=e[i];let a=this._buildDefaultHeaderSpace(r.title),o={entries:new Array},s=1;for(let e=0;e<r.commands.length;e++){const t=r.commands[e];let i;switch(t.type){case"brut":i=t;break;case"separator":s++;continue;case"command":i=this.addCommandHeaderButton(t.commandID,t.i18n,t.icon,t.hidden,t.position,s.toString());break;case"layout":if(!t.possibleValues){console.warn("NO POSSIBLE VALUES GIVEN TO LAYOUT");continue}i=this.addLayoutHeaderButton(t.i18n,t.hidden,t.possibleValues,t.value,t.position);break;case"callback":if(!t.callback){console.warn("NO CALLBACK GIVEN TO HEADER BUTTON");continue}i=this.addCallbackHeaderButton(t.i18n,t.icon,t.callback,t.hidden,t.disabled,t.position)}o.entries.push(i)}let l=n.prototype.createTreeDocument(o),d=new n({items:l});if(d.inject(a),r.specialButtons)for(let e=0;e<r.specialButtons.length;e++){const t=r.specialButtons[e];switch(t.type){case"clickDblClick":let e=this.addHeaderButtonClickAndDblClick(t.icon,t.commandIDClick,t.commandIDDlbClick,t.hidden,t.i18n),i=a.getElementsByClassName("vcxPanelHeaderToolbar")[0];e.inject(i);break;case"contextualMenuButton":let n=this.addMultipleCommandHeaderButton(t.id||"defaultID",t.commandList,t.i18n,t.icon,t.hidden),r=a.getElementsByClassName("vcxPanelHeaderToolbar")[0];n.inject(r)}}this.headers[r.id]={headerView:a,headerToolbar:d,default:r.default||!1},r.default&&(this.applyHeader(r.id),t=!0)}t||console.error("!! NO HEADER WAS DEFINED AS DEFAULT !!")}addHeaderButtonClickAndDblClick(e,t,n,r,a){let o=new i({displayStyle:"lite",icon:{iconName:e,fontIconFamily:WUXManagedFontIcons.Font3DS}});o.getContent().addClassName(t+" vcxPanelHeaderToolbarButton"),r&&o.getContent().addClassName("vcxHidden"),o.elements.container.title=a;let s=0;return o.addEventListener("buttonclick",(()=>{t&&this._needToCancelCmd(t)?this.stopHeaderCommand(t):n&&this._needToCancelCmd(n)?this.stopHeaderCommand(n):(s++,1===s&&setTimeout((()=>{1===s?this.executeHeaderCommand(t):2===s&&this.executeHeaderCommand(n),s=0}),300))})),o}_needToCancelCmd(e){return!!this.context&&(o.getCommand(e,this.context)?.isRunning()??!1)}addCommandHeaderButton(e,t,i,n,r="far",a="1"){return{id:e,dataElements:{typeRepresentation:"functionIcon",visibleFlag:!n,tooltip:t,value:this.executeHeaderCommand.bind(this,e),icon:{iconName:i,fontIconFamily:1},position:r,category:a}}}addMultipleCommandHeaderButton(e,t,n,r,a){let o=new i({displayStyle:"lite",icon:{iconName:r,fontIconFamily:WUXManagedFontIcons.Font3DS}});return o.getContent().addClassName(e+" vcxPanelHeaderToolbarButton"),a&&o.getContent().addClassName("vcxHidden"),o.elements.container.title=n,o.getContent().addEventListener("buttonclick",(()=>{s.buildAndDisplayContextualMenu(o.getContent(),{clientX:o.getContent().getOffsets().x+o.getContent().offsetWidth,clientY:o.getContent().getOffsets().y+o.getContent().offsetHeight})})),s.addEventListener(o.getContent(),{callback:()=>{let e=new Array;for(let i=0;i<t.length;i++){const n=t[i];let r="enabled",a=n.label,o=n.icon;n.stateCheckingCallback&&!n.stateCheckingCallback()&&(r="disabled"),e.push({type:"PushItem",title:a,state:r,fonticon:{content:"wux-ui-3ds-"+o+" wux-ui-3ds"},action:{callback:n.executeCallback}})}return e}}),o}addLayoutHeaderButton(e,t,i,n,r="far"){let a={id:"layoutButton",dataElements:{typeRepresentation:"layout",visibleFlag:!t,tooltip:e,position:r,category:"1"}};return a.dataElements.possibleValues=i,a.dataElements.value=n,a.onNodeUpdate=this.changeLayout.bind(this),a}addCallbackHeaderButton(e,t,i,n,r,a="far"){return{id:t,dataElements:{typeRepresentation:"functionIcon",visibleFlag:!n,tooltip:e,value:i,disabled:r,icon:{iconName:t,fontIconFamily:1},position:a,category:"1"}}}changeToolbarButtonVisibility(e,t,i){this.headers[e].headerToolbar.updateNodeModel(t,{visibleFlag:i})}async executeHeaderCommand(e){if(""!==e)if(this.context){let t=o.getCommand(e,this.context);t&&(t.isRunning()||await t.begin())}else console.warn("This panel has no context set. AFR Commands can't be executed: please set the context in panel initialization")}stopHeaderCommand(e){if(""!==e)if(this.context){let t=o.getCommand(e,this.context);t&&t.isRunning()&&t.end()}else console.warn("This panel has no context set. AFR Commands can't be executed: please set the context in panel initialization")}changeLayout(e){switch(e.getAttributeValue("data").value||e.getAttributeValue("data")){case a.Layout.SmallThumbnail.value:this.removeAllLayouts(),this.getPanelContent().addClassName("vcxDisplayModeSmall");break;case a.Layout.BigThumbnail.value:this.removeAllLayouts(),this.getPanelContent().addClassName("vcxDisplayModeLarge");break;case a.Layout.BigTile.value:this.removeAllLayouts(),this.getPanelContent().addClassName("vcxDisplayModeTile");break;case a.Layout.List.value:this.removeAllLayouts(),this.getPanelContent().addClassName("vcxDisplayModeList")}}removeAllLayouts(){this.getPanelContent().removeClassName("vcxDisplayModeTile"),this.getPanelContent().removeClassName("vcxDisplayModeSmall"),this.getPanelContent().removeClassName("vcxDisplayModeList"),this.getPanelContent().removeClassName("vcxDisplayModeLarge")}}return d})),define("DS/VCXGUIInfrastructure/VCXMainPanel",["require","exports","DS/VCXGUIInfrastructure/VCXPanel","DS/Windows/Window","DS/Windows/Panel","DS/CoreEvents/Events","DS/WebappsUtils/WebappsUtils","UWA/Core"],(function(e,t,i,n,r,a,o,s){"use strict";return class extends i{constructor(e,t,i,n){super(e,t),this.panel=this.init(e,i),this.setInputContext(n)}init(e,t){let i={header:this._buildDefaultHeaderSpace(e?.title),...e};return this._buildMainPanel(i)}unInitialize(){super.unInitialize(),this.panel.destroy()}buildPanelTabs(e){var t=o.getWebappsBaseUrl();let i={content:new Array};for(let n=0;n<e.length;n++){const r=e[n];r.view.inject(this.panel.content),this.tabViews.set(r.index,{content:r.view,isCurrent:0===n,headerId:r.headerId}),i.content.push({label:r.name,icon:t+"WUXImmersiveFrame/assets/ExtrudeIcon.png",onSelect:e=>{for(let[e,t]of this.tabViews.entries()){const i=t;r.index!==e?(i.content.hide(),i.isCurrent=!1):(i.content.show(),i.isCurrent=!0)}}})}this.panel.buildSuperFeature(i)}_buildMainPanel(e){let t=new r({icon:e.icon,header:e.header,title:e.title,identifier:e.identifier,content:(0,s.createElement)("div",{html:"",class:""}),immersiveFrame:e.immersiveFrame,verticallyStretchableFlag:!0,movableFlag:!0,width:e.minWidth||300,minWidth:e.minWidth||300,resizableFlag:!0,collapsibleFlag:!0,closeButtonFlag:!1,showTitleFlag:!1});return e.immersiveFrame&&e.currentDockArea&&this._addWindowToDockingGroup(t,e.currentDockArea),t.addEventListener("resize",(function(){a.publish({event:"VCX_PANEL_RESIZED"})})),t}_addWindowToDockingGroup(e,t){let i=!1;if(this.immersiveFrame){for(const[,r]of Object.entries(this.immersiveFrame.windows))if(r instanceof n&&e!==r&&r.currentDockArea===t){e.attachToWindow(r,WUXSnapAreaEnum.InsideArea,"before")<0?console.error("the window ",e?._properties?.title?.value," could not be attached to ",r?._properties?.title?.value):i=!0;break}i||(e.currentDockArea=t)}}setPanelContent(e){this.panel.content=e}setPanelHeader(e){this.panel.header=e}getPanelContent(){return this.panel.content}getPanelHeader(){return this.panel.header}getPanel(){return this.panel.getContent()}}})),define("DS/VCXGUIInfrastructure/VCXResizer",["require","exports","UWA/Core","DS/VCXGUIInfrastructure/VCXResizerEnum"],(function(e,t,i,n){"use strict";return class{constructor(e,t){this.containerToResize=e,this.resizerElement=(0,i.createElement)("div",{class:"vcxResizer"+t}).inject(this.containerToResize),this._lastDimensions="0px";let r=0,a=0;var o=!1;let s=i=>{if(r=i.x,a=i.y,o){switch(t){case n.VCXResizeTop:this._lastDimensions=e.getBoundingClientRect().bottom-a+"px",e.style.height=this._lastDimensions;break;case n.VCXResizeBottom:this._lastDimensions=a-e.getBoundingClientRect().top+"px",e.style.height=this._lastDimensions;break;case n.VCXResizerLeft:this._lastDimensions=e.getBoundingClientRect().right-r+"px",e.style.width=this._lastDimensions;break;case n.VCXResizerRight:this._lastDimensions=r-e.getBoundingClientRect().left+"px",e.style.width=this._lastDimensions}i.preventDefault()}},l=t=>{e.classList.remove("vcxNoTransition"),o=!1,document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",l)};this.resizerElement.addEventListener("pointerdown",(function(t){o=!0,e.classList.add("vcxNoTransition"),r=t.x,document.addEventListener("pointermove",s),document.addEventListener("pointerup",l)}))}}})),define("DS/VCXGUIInfrastructure/VCXMainPanelFixed",["require","exports","DS/Controls/Button","DS/VCXGUIInfrastructure/VCXPanel","DS/VCXGUIInfrastructure/VCXResizer","DS/VCXGUIInfrastructure/VCXResizerEnum","UWA/Core"],(function(e,t,i,n,r,a,o){"use strict";return class extends n{constructor(e,t,i,n){super(e,t),this.panel=this.init(e,i),this.setInputContext(n)}init(e,t){let i=this._buildMainPanel(e),n=this._buildDefaultHeaderSpace(e?.title),r=i.querySelector(".vcxFixedPanelHeaderBar");return r?.appendChild(n),i}unInitialize(){super.unInitialize(),this.panel.remove(),this.panel=null,this.headers={},this.tabViews=new Map}updateButtonTab(e,t){let i=[...this.tabViews.entries()].find((t=>t[0]===e))?.[1],n=i?.headerView;n&&(n.buttonHeader?.destroy(),this._generateButtonTab(e,t))}_generateButtonTab(e,t){let n=[...this.tabViews.entries()].find((t=>t[0]===e))?.[1],r=n?.headerView;if(!r||!n)return;let a=new i({displayStyle:"normal",icon:{fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"2x",...t}}).inject(r.tabButtonContainer);r.buttonHeader=a,a.getContent().addEventListener("buttonclick",(()=>{this.setCurrentTab(e)}))}buildPanelTabs(e,t=1){let i=this.panel.querySelector(".vcxFixedPanelSubHeader");i?.classList.add("vcxFixedPanelSubHeaderUsed");for(let n=1;n<=e.length;n++){const r=e[n-1];let a=(0,o.createElement)("div",{class:"vcxTabContainer",id:"scene"}).inject(i),s=(0,o.createElement)("div",{class:"tabButtonContainer"}).inject(a);(0,o.createElement)("div",{class:"tabLabel",html:r.name}).inject(a),this.tabViews.set(r.index,{content:r.view,isCurrent:n===t,headerView:{container:a,tabButtonContainer:s}}),this._generateButtonTab(n,{iconName:r.icon})}this.setCurrentTab(t)}setCurrentTab(e){let t=[...this.tabViews.entries()].find((t=>t[0]===e))?.[1];for(let[t,i]of this.tabViews.entries())i.isCurrent=t===e,i.headerView?.buttonHeader&&(i.isCurrent?(i.headerView.container.addClassName("currentTab"),i.headerView.buttonHeader.emphasize="primary"):(i.headerView.container.removeClassName("currentTab"),i.headerView.buttonHeader.emphasize="secondary"));t&&(this.setPanelContent(t.content),t?.headerId?this.applyHeader(t?.headerId):this.displayDefaultHeader())}_buildMainPanel(e){let t=(0,o.createElement)("div",{html:"",class:"vcxFixedPanel"}),i=(0,o.createElement)("div",{html:"",class:"vcxFixedPanelHeader"}).inject(t);return(0,o.createElement)("div",{html:"",class:"vcxFixedPanelHeaderBar"}).inject(i),(0,o.createElement)("div",{html:"",class:"vcxFixedPanelSubHeader"}).inject(i),(0,o.createElement)("div",{html:"",class:"vcxFixedPanelContent"}).inject(t),(0,o.createElement)("div",{html:"",class:"vcxFixedPanelFooter"}).inject(t),e.width&&(t.style.width=e.width),e.minWidth&&(t.style.minWidth=e.minWidth+"px"),e.currentDockArea?e.currentDockArea===WUXDockAreaEnum.LeftDockArea?(document.querySelector(".vcxLeftContainer")?.appendChild(t),new r(t,a.VCXResizerRight)):e.currentDockArea===WUXDockAreaEnum.RightDockArea&&(document.querySelector(".vcxRightContainer")?.appendChild(t),new r(t,a.VCXResizerLeft)):this.immersiveFrame?.elements.container.appendChild(t),t}setPanelContent(e){let t=this.panel.querySelector(".vcxFixedPanelContent");t&&(t.innerHTML="",e.inject?e.inject(t):t.appendChild(e))}getPanelContent(){return this.panel.querySelector(".vcxFixedPanelContent")}getPanelHeader(){return this.panel.querySelector(".vcxFixedPanelHeaderBar")}setPanelHeader(e){let t=this.panel.querySelector(".vcxFixedPanelHeaderBar");t&&(t.innerHTML="",t.appendChild(e))}getPanel(){return this.panel}}}));