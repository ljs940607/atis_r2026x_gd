define("DS/GEOHideShowFilterCmd/GEOHideShowFilterCmd",["DS/ApplicationFrame/Command","DS/WebInfraUI/ContextualBarManager","UWA/Core"],(function(e,t,i){"use strict";return e.extend({_frmWindow:null,_exp:null,_viewer:null,_geomBtn:null,_surfaceState:!0,_lineState:!0,_pointState:!0,init:function(e){var t=this;t._parent(e,{isAsynchronous:!0,mode:"exclusive"}),t._frmWindow=t.getFrameWindow(),t._viewer=t._frmWindow.getViewer(),t._exp=t._frmWindow.experience,t._surfaceState=!0,t._lineState=!0,t._pointState=!0,t._state=!0,t._glType=-1,t._exp.subscribe("ASSET/LOADINGFINISHED",t._onModelLoaded.bind(t))},_onModelLoaded:function(){var e=this;e._surfaceState=!0,e._lineState=!0,e._pointState=!0,e._frmWindow=e.getFrameWindow(),e._viewer=e._frmWindow.getViewer(),e._exp=e._frmWindow.experience},_hideShow:function(){var e=this,t=e._frmWindow.experience.getRootBag();if(null!==t){var n=t.getChildren();if(1===n.length){var r=n[0];if(0!==e._glType)for(var o=0;o<r.getChildren().length;o++){var l=r.children[o];if(i.is(l.mesh3js))(h=l.mesh3js.sceneGraph.children[0]).getPrimitivesCount()&&h.getPrimitiveGroup(0).glType===e._glType&&(e._state?l.setVisibility(!0):l.setVisibility(!1),e._viewer.render());else for(var a=0;a<l.getChildren().length;a++){var d=l.children[a];if(i.is(d.mesh3js))for(var s=0;s<d.getChildren().length;s++){var u=d.children[s];(h=u.mesh3js.sceneGraph.children[0]).getPrimitivesCount()&&h.getPrimitiveGroup(0).glType===e._glType&&(e._state?u.setVisibility(!0):u.setVisibility(!1),e._viewer.render())}}}else if(0===e._glType){var c=r.children;for(o=0;o<c.length;o++){var _=c[o];for(a=0;a<_.getChildren().length;a++){var h;(h=(l=_.children[a]).mesh3js.sceneGraph.children[0]).getPrimitivesCount()&&h.getPrimitiveGroup(0).glType===e._glType&&(e._state?l.setVisibility(!0):l.setVisibility(!1),e._viewer.render())}}}}}},beginExecute:function(){var e=this;e.contextualMenu=new t({frameWindow:e._frmWindow});var i={type:e.contextualMenu.Button.Check,id:"HideShowSurface",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:e._surfaceState,onclickCB:function(){e._surfaceState=!e._surfaceState,e._state=e._surfaceState,e._glType=4,e._hideShow()}},n={type:e.contextualMenu.Button.Check,id:"HideShowLine",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:e._lineState,onclickCB:function(){e._lineState=!e._lineState,e._state=e._lineState,e._glType=1,e._hideShow()}},r={type:e.contextualMenu.Button.Check,id:"HideShowPoint",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:e._pointState,onclickCB:function(){e._pointState=!e._pointState,e._state=e._pointState,e._glType=0,e._hideShow()}};e.surfaceBtnToken=e.contextualMenu.addButtons([i],{barType:e.contextualMenu.Toolbar.New}),e.lineBtnToken=e.contextualMenu.addButtons([n],{barType:e.contextualMenu.Toolbar.Append}),e.pointBtnToken=e.contextualMenu.addButtons([r],{barType:e.contextualMenu.Toolbar.Append}),e._viewer.render()},endExecute:function(){var e=this;e.contextualMenu.removeButtons(e.surfaceBtnToken),e.contextualMenu.removeButtons(e.lineBtnToken),e.contextualMenu.removeButtons(e.pointBtnToken),e.contextualMenu.dispose(),e.contextualMenu=void 0}})}));