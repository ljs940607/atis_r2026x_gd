define("DS/DELPPWViewBehaviors/UXFactoryBehavior/FormEventHelper",["UWA/Core"],(function(e){"use strict";return function(t,n,i,o,r,a){var s,l=["<",">","<=",">=","===","==","!=","!==","AND","OR","&&","||","IN","MATCH"],u=function(e){return l.indexOf(e)>-1},c=function(e){return e.length>=2&&"["===e[0]&&e[e.length-2]},d=function(t){var n=!1;return e.is(s)&&void 0!==s[t]||"EMPTY_STRING"===t||"true"===String(t).toLowerCase()||"false"===String(t).toLowerCase()||"null"===String(t).toLowerCase()||"undefined"===String(t).toLowerCase()?n=!0:isNaN(Number(t))?(c(t)||t>="a"&&t<="z"||t>="A"&&t<="Z")&&(n=!0):n=!0,n},g=function(e){var t=-1;return"!"===e?t=4:"AND"===e||"&&"===e?t=3:"OR"===e||"||"===e?t=2:l.indexOf(e)>-1&&(t=1),t},f=function t(n){var i=n;return e.is(s)&&void 0!==s[n]?i=t(s[n]):"EMPTY_STRING"===n||""===n?i="":"true"===String(n).toLowerCase()?i=!0:"false"===String(n).toLowerCase()?i=!1:"null"===String(n).toLowerCase()?i=null:"undefined"===String(n).toLowerCase()?i=void 0:isNaN(Number(n))?c(n)&&(i=n.substring(1,n.length-1).split(",").map((function(e){return t(e)}))):i=Number(n),i},p=function(e){var t,n,i,o,r=[];return!!Array.isArray(e)&&(e.forEach((function(e){u(e)?(t=r[r.length-1],r.pop(),n=r[r.length-1],r.pop(),i=function(e,t,n){var i=!1;switch(t){case"<":i=e<n;break;case"<=":i=e<=n;break;case">":i=e>n;break;case">=":i=e>=n;break;case"==":i=e==n;break;case"===":i=e===n;break;case"!=":i=e!=n;break;case"!==":i=e!==n;break;case"AND":case"&&":i=e&&n;break;case"OR":case"||":i=e||n;break;case"IN":i=n.indexOf(e)>-1;break;case"MATCH":i=new RegExp(n).test(e)}return i?"TRUE":"FALSE"}(n,e,t),i=f(i),r.push(i)):d(e)&&(o=f(e),r.push(o))})),1===r.length&&r.pop())},h=function(e){var t=function(e){var t=e.split(" "),n=[],i=[];for(t.forEach((function(e){if(u(e)){for(;0!==n.length&&g(e)<=g(n[n.length-1]);)i.push(n[n.length-1]),n.pop();n.push(e)}else if(d(e))i.push(e);else if("("===e)n.push(e);else if(")"===e){for(;"("!==n[n.length-1];)i.push(n[n.length-1]),n.pop();n.pop()}}));0!==n.length;)i.push(n[n.length-1]),n.pop();return i}(e);return p(t)};return{setFieldsValue:function(e){s=e},isConditionMatch:function(e){return h(e)}}}})),define("DS/DELPPWViewBehaviors/SearchBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["SearchPlugin","ResourcePlugin","DatabasePlugin","UXComponentsPlugin","WebServicePlugin"],creator:function(t,n,i,o,r,a,s){var l,u,c,d,g,f,p,h,m;return l=function(s,l){var p,I,y,b,D=a.getComponent("Button"),v=a.getComponent("LineEditor"),C=a.getComponent("Element"),P=e.is(l.title)?l.title:o.getNLSValue("Dialog.InsertInstanceCmd.Title"),R=e.is(l.placeholder)?l.placeholder:o.getNLSValue("Search.InsertInstanceCmd.Placeholder"),A=e.is(l.searchTitle)?l.searchTitle:o.getNLSValue("Search.InsertInstanceCmd.Title"),V=o.getNLSValue("InsertInstanceCmd.INSERT"),w=new C("div",{class:"search-dialog-container"}),S=new C("div",{class:"search-tree-container"}).inject(w),L=!0,E=!0,N=[];e.is(d)?((I=new v({placeholder:R,autoCommitFlag:!0}).inject(S)).addEventListener("change",(function(){I.value.length>0?u.buttons.Ok.disabled=!1:u.buttons.Ok.disabled=!0,e.is(u.buttons.Apply)&&(u.buttons.Apply.disabled=!0)})),"duplicate"===l.command?(V=o.getNLSValue("InsertInstanceCmd.INSERTAsCOPY"),P=o.getNLSValue("Dialog.InsertAsCopyCmd.Title"),y={Cancel:new D({onClick:function(){g()}}),Apply:new D({label:V,visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){f(N,s)}}),Ok:new D({label:o.getNLSValue("InsertInstanceCmd.SEARCH"),icon:"search",visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){i.activate(A,(function(e){let t=[];e.forEach((e=>{const n=e.id;t.push(n)})),f(t,s)}),e.is(l.types)?l.types:null,[I.value]),g()}})},I.disabled=!1,I.placeholder=o.getNLSValue("Search.InsertInstanceAsCopyCmd.Placeholder")):"ReplaceResourceInLink"===l.command?(E=!1,L=!1,V=o.getNLSValue("ManageCapableResource.ReplaceResourceInLink"),P=o.getNLSValue("Dialog.ReplaceResourceInLink.Title"),y={Cancel:new D({onClick:function(){g()}}),Apply:new D({label:V,visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){e.is(s)&&s([{id:p}]),g()}}),Ok:new D({label:o.getNLSValue("Search.ReplaceResourceInLink"),icon:"search",visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){c(),g()}})},I.disabled=!1,I.placeholder=o.getNLSValue("Search.ReplaceResourceInLink.Placeholder"),b=function(t){var n,i,o;!0===t.changed.isSelected&&(n=t.changed.nodeId,i=(o=r.getReferenceModel(n)).get("PPRTYPE"),e.is(i)&&"RESOURCE"===i&&(I.value=o.get("PLMEntity.V_Name"),p=o.get("PID"),u.buttons.Apply.disabled=!1))},h=t.addExternalListener("select",b)):y={Cancel:new D({onClick:function(){g()}}),Ok:new D({label:o.getNLSValue("InsertInstanceCmd.SEARCH"),icon:"search",visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){c(),g()}}),Apply:new D({label:V,visibleFlag:!0,disabled:!0,onClick:function(){let e=[];N.forEach((t=>{e.push({id:t})})),s(e),g()}})},u=d.create("Dialog",{domId:"search-dialog-container",identifier:"search-dialog-container",title:P,modalFlag:E,resizableFlag:!0,visibleFlag:!1,closable:!0,content:w,height:100,width:300,buttons:y}),L&&(m=i.subscribeToSelectEvent((function(t){const n=t.data;let i=[];if(N=[],e.is(n)&&Array.isArray(n.paths)&&n.paths.length>0){I.value="";n.paths.forEach((t=>{if(e.is(n.attributes)){const o=n.attributes[t];if(e.is(o)&&e.is(o.type)){const e=o.type;-1!==l.types.indexOf(e)&&(N.push(t[0]),i.push(o.label))}}})),0!==i.length?(I.value=i.join(", "),l.command,u.buttons.Apply.disabled=!1):"duplicate"===l.command&&(u.buttons.Apply.disabled=!0)}}))),u.close=function(){g()}):n.debug("uxFactoryBehavior is not available."),c=function(){i.activate(A,s,e.is(l.types)?l.types:null,[I.value])}},g=function(){e.is(u)&&(u.destroy(),u=void 0),e.is(m)&&(i.unSubscribeToSelectEvent(m),m=null),e.is(h)&&(t.removeExternalListener(h),h=null)},f=function(t,i){var r,a,l,u,c={},d={};l={selectedRefPIDs:t,oneDelmiaAggregationMode:n.getPreferenceValue("oneDelmiaAggregationMode")},r=function(t,i){var r;e.is(i)&&e.is(i.message,"string")?((r=o.getNLSValue(i.message,null,"Error","Title"))==="Error."+i.message+".Title"&&(r=o.getNLSValue(d.replaceType,null,"Error","Title"),n.debug(i.message)),p(c,r,null,d,u)):p(c,o.getNLSValue(d.replaceType,null,"Error","Title"),null,d,u)},a=function(e){var t;t=e.duplicatedPIDs.map((function(e){return{id:e}})),i(t),n.notify("stopProgress",c)},g(),s.webServiceRequest({url:"dsmfg/private/V0/invoke/duplicateStructure",method:"POST",headers:s.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(l),onFailure:r,onTimeout:r,onCancel:r,onComplete:a}),n.notify("startProgress",c)},p=function(t,i,o,r,a){var s=r||{},l=!e.is(s.popupMessage)||s.popupMessage;e.is(o)&&e.is(o.message,"string")&&(i+="\n"+o.message),!0===l?n.warn(i,a):n.log(i,a),n.notify("stopProgress",t),e.is(s.onFailure,"function")&&s.onFailure.call(null,i)},{onStart:function(){d=n.getBehavior("UXFactoryBehavior")},onStop:function(){},activate:function(e,t,n,o){i.activate(e,t,n,o)},showSearchDialoguAndActivate:function(t,n){var i=e.is(n)?n:{};l(t,i),u.show()},onClose:function(){g()}}}}})),define("DS/DELPPWViewBehaviors/Tagger/TaggerHelper",[],(function(){"use strict";return function(e,t){var n,i,o,r,a,s;return n=function(t){var n;return n=e.getBehavior(t),UWA.is(n)||e.debug(t+"is not available"),n},i=function(e,n,i){var o;i=i||{},Array.isArray(e)&&e.length>0&&Array.isArray(n)&&n.length>0?(o=e.map((e=>e.getReferencePID())),t.fetchMultiplePromise(o,{select_predicate:["physicalid"].concat(n),type:"entity",silent:!0,withSynthesisAttribute:!1,translateResult:!1}).then((function(e){var t;Array.isArray(e)&&(t=e.reduce(((e,t)=>(UWA.is(t)&&UWA.is(t.attributes)&&UWA.is(t.attributes.physicalid)&&(e[t.attributes.physicalid]=t.attributes),e)),{})),UWA.is(i.onComplete)&&i.onComplete(t)})).catch((function(e){UWA.is(i.onFailure)&&i.onFailure(e)}))):UWA.is(i.onFailure)&&i.onFailure(iErr)},o=function(e){var t={predicateKind:"",colorMap:{map:{},predicate:void 0}};return UWA.is(e.tagColors,"array")&&e.tagColors.length>0&&(t.predicateKind=e.tagColors[0].type,e.tagColors.forEach((function(e){var n,i;void 0===t.colorMap.predicate&&(i=(n=e.predicate.split("/"))[n.length-1],t.colorMap.predicate=i),t.colorMap.map[e.object]=e.color}))),t},r=function(e,t,n){var i,o,r,a,s,l="#00000000",u=[];if("date"===e&&UWA.is(n,"string"))for(s=new Date(n),u.push([s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2),("0"+s.getDate()).slice(-2)].join("/")),u.push([s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2)].join("/")),u.push(s.getFullYear().toString()),o=!0,i=0,r=u.length;i<r&&o;i++)void 0!==t.map[u[i]]&&(o=!1,l=t.map[u[i]]);else"boolean"===e&&"boolean"==typeof n?(a=n?"TRUE":"FALSE",l=t.map[a]):void 0!==t.map[n]&&(l=t.map[n]);return l},a=function(e,t){var n,i,o;n=this.parsedColorData.predicateKind,i=this.parsedColorData.colorMap,o=this.attributes,Array.isArray(e)&&e.forEach((e=>{var t=o[e.getReferencePID()],a=t&&t[i.predicate]?t[i.predicate]:null;if(UWA.is(a)){var s=r(n,i,a);UWA.is(s)&&e.updateOptions({color:s})}})),t()},{colorize:function(e,r){var l,u,c,d,g,f,p;s=UWA.Promise.deferred(),p=function(){UWA.is(r,"function")&&r(),s.resolve(),s=null},UWA.is(e)&&UWA.is(e.tagColors,"array")&&e.tagColors.length>0?(l=e.tagColors[0].predicate,d=n("WUXNodeModelBehavior"),UWA.is(l)&&UWA.is(d)&&(c=d.getAllDescendants(),i(c,[l],{onComplete:function(i){var r;c.length>0&&(u=o(e),r={callback:a,globalArray:c,context:{parsedColorData:u,attributes:i},blockSize:1e3},t.getExecuteByBlockPromise(r).then((function(){g=n("TreeListViewBehavior"),UWA.is(g)&&g.manageColumn("taggerColor",{visible:!0}),f=n("GraphViewBehavior"),UWA.is(f)&&f.setTaggerStatus(!0)})).finally((function(){p()})))},onFailure:function(){p()}}))):p()},unColorize:function(e){(UWA.is(s)?s.promise:Promise.resolve()).then((function(){var t,i;t=n("TreeListViewBehavior"),UWA.is(t)&&t.manageColumn("taggerColor",{visible:!1}),i=n("GraphViewBehavior"),UWA.is(i)&&i.setTaggerStatus(!1),UWA.is(e,"function")&&e()}))}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/AdditionalGroupingColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n){const i=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},o=i("ResourcePlugin"),r=i("AttributePlugin"),a=i("TreeViewPlugin"),s=n.getBehavior("WUXNodeModelBehavior"),l=a.getGroupingAdditonalColumns();var u;return u=function(t,n){var i=null,r="";switch(e.is(t.columnID)&&!e.is(n)&&(n=this.getColumnOrGroup(t.columnID).dataIndex),n){case l.Type:r=t.nodeModel.getReferenceType(),i=o.getNLSValue(r),r=e.is(i,"string")?i:o.getNLSValue("Type."+r);break;case l.Reference:r=t.nodeModel.getReferencePID()}return r},{displayType:"defaultGroupable",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.sortableFlag=!1,e.editableFlag=!1,e.defaultGroupable=!0,e.hasCellValue=this.hasCellValue,e.getCellValue=this.getCellValue,e.getCellGroupingKey=this.getCellGroupingKey,e.text=r.getColumnDisplayValue(e),delete e.tooltipIndex,delete e.getCellValueForExport,e},hasCellValue:function(t){return e.is(s)&&!s.isFakeNodeModel(t.nodeModel)},getCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=u.call(this,e);return t.dataIndex===l.Reference&&(n=e.nodeModel.getLabel()),n},getCellGroupingKey:function(e,t){return u.call(this,e,t)}}}})),define("DS/DELPPWViewBehaviors/ExportToCSVBehaviour",["UWA/Core"],(function(e){"use strict";return{plugins:["WebServicePlugin","UXComponentsPlugin","ResourcePlugin"],creator:function(t,n,i,o,r){var a,s,l,u,c,d,g,f,p=o.getComponent("Toggle"),h=o.getComponent("Button"),m=function(t){e.is(s)?i.getXMLValues(s,(function(n){u=function(t){var n,i,o=t||{};for(const t in o)if(o.hasOwnProperty(t)&&e.is(o[t].Attribute)&&Array.isArray(o[t].Attribute)){n=o[t].Attribute;for(let t=0;t<n.length;t++)i=e.is(n[t].dicoType)?n[t].dicoType:null,n[t].fullName=e.is(i)?i+"."+n[t].name:n[t].name}return o}(u=n.convert("Config.Preferences.ExportCSV.Type","name")),c=n.Config.Preferences.ExportCSV.showOptionPanel,d=n.Config.Preferences.ExportCSV.defaultValue,g=n.Config.Preferences.ExportCSV.exportUnits,t()}),(function(e){n.warn(r.getNLSValue("ExportCSVCmd.ConfigXMLFetchFailed")),n.debug("Cannot export as ExportCSVPreferences XML fetch failed ,"+e)})):n.debug("Cannot export as _exportCSVPreferencesXML path is not provided")},I=function(){return window.URL||window.webkitURL||window},y=function(e,t,n){var i,o,r,a,s,l;a=function(e,t){var n,i,o;if("string"==typeof e){for(n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([n],{type:t})}return e instanceof Blob?e:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?new Blob([e],{type:t}):null}(e,n),"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,t):(i=window.document.createElementNS("http://www.w3.org/1999/xhtml","a"),o=I().createObjectURL(a),i.href=o,i.download=t,r=new MouseEvent("click"),i.dispatchEvent(r),s=o,l=function(){"string"==typeof s?I().revokeObjectURL(s):s&&s.remove()},window.chrome?l():setTimeout(l,10))},b=function(e){var i,o;switch(t.getService("ConfigService").getPreference("csvSeparator")){case"Semicolon":i=";";break;case"Pipe":i="|";break;case"Tab":i="\t";break;default:i=","}o=e?l.getConfiguredAttributesAsCSV(u,i):l.getVisibleTableContentAsCSV(i),y(o,a+"_"+(new Date).toString().split(" ").splice(1,4).join(" ")+".csv","text/csv"),n.info(r.getNLSValue("ExportCSVCmd.SuccessMsg"))},D=function(){m((function(){var t,i;!0===c?(i=new p({label:r.getNLSValue("ExportCSVCmd.ExportAllQuestion"),checkFlag:d}),e.is(f)?(t=f.create("Dialog",{domId:"ExportCSV-Dialog",modalFlag:!0,visibleFlag:!1,snappableFlag:!1,title:r.getNLSValue("ExportCSVCmd.Header"),content:i,buttons:{Ok:new h({className:"ok primary",label:r.getNLSValue("ExportCSVCmd.OK"),emphasize:"primary",onClick:function(){t.destroy(),b(i.checkFlag)}}),Cancel:new h({className:"cancel",label:r.getNLSValue("ExportCSVCmd.CANCEL"),onClick:function(){t.destroy()}})}})).show():n.debug("uxFactoryBehavior is not available.")):b(!1)}))};return{listenTo:function(){return{ExportCSVCmd:D}},onStart:function(t){s=(t=t||{}).exportCSVPreferencesXML,a=t.exportCSVFileName,l=n.getBehavior("TreeListViewBehavior"),f=n.getBehavior("UXFactoryBehavior"),e.is(l)||n.debug("ExportToCSVBehaviour initialization failed as TreeListViewBehavior is not available")},onStop:function(){s=null,l=null},getExportUnitsPreference:function(){return!e.is(g,"boolean")||g}}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/DataGridViewManager",["UWA/Core"],(function(e){"use strict";return function(t){return{getDocument:function(){return t.getTreeDocument()},getCellID:function(e,n){return t.getLayout().getCellIDFromCoordinates({rowID:e,columnID:n})},getCellModel:function(e,n){var i=this.getCellID(e,n);return t.getCellInfosAt(i).cellModel},getCellNodeModel:function(e,n){var i=this.getCellID(e,n);return t.getCellInfosAt(i).nodeModel},getTreeNodeModelFromRowID:function(e){return t._rowModel.getVisibleNodeModel(e)},scrollToCellAt:function(e,n){var i=this.getCellID(e,n);t.scrollToCellAt(i)},getCellView:function(n,i,o){var r=!!e.is(o,"boolean")&&o,a=this.getCellID(n,i),s=t._getViewAt(a);return r&&(e.is(s)?s=Promise.resolve(s):(s=new Promise((function(e){t.subscribeOnceToAllCellsRendered((function(){var n=t._getViewAt(a);e(n)}))})),t.ensureCellVisible(a,!1,.5))),s},getCellContent:function(t,n,i){var o=!!e.is(i,"boolean")&&i,r=this.getCellView(t,n,o),a=null;return e.is(r)&&(a=i?r.then((function(t){return e.is(t)?Promise.resolve(t.getContent()):Promise.reject("No cell view found")})):r.getContent()),a},getNumberOfRows:function(){var t=this.getDocument(),n=0;return e.is(t)&&t.getChildren(!0).forEach((function(e){n+=e.isVisible()?1:0,n+=e.getAllDescendants(!1,!0).filter((function(e){return e.isVisible()})).length})),n},getColumnIDFromDataIndex:function(e){return t.getColumnIndexByDataIndex(e)},getModelEvents:function(){return t._modelEvents},getColumns:function(){return t.columns},unselectAll:function(){t.unselectAll()},selectAll:function(){t.selectAll()},getCellClassName:function(e,t,n){return e+' .wux-layouts-datagridview-cell[cell-id="'+this.getCellID(t,n)+'"]'},empty:function(){this.getDocument().empty()},getRows:function(){return t.model},getDataGridViewModel:function(){return t.model},getRowModel:function(e){var n,i,o,r=this.getColumns(),a={};for(n=0;n<r.length;n++)"tree"===(o=r[n].dataIndex)?a[o]=this.getTreeNodeModelFromRowID(e):(i=this.getCellID(e,o),a[o]=t.getModelAt(i));return a},getColumnOptions:function(e){return t.getColumnOrGroup(e)},getColumnOptionsByPosition:function(e){var n=t.layout.getOrderedColumnsIndexes()[e];return this.getColumnOptions(n)},isColumnHidden:function(e){return!1===t.layout.getColumnVisibleState(e)||0===t.layout.getColumnWidth(e)},scrollToCellCallback:function(e,n,i){t.subscribeOnceToAllCellsRendered(i),this.scrollToCellAt(e,n)},addEventListener:function(e,n){t.addEventListener(e,n,!0)},removeEventListener:function(e,n){t.removeEventListener(e,n,!0)},getDataGridViewLayout:function(){return t.getLayout()}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/UrlColumnManager",["UWA/Core","DS/Utilities/Utils"],(function(e,t){"use strict";return function(n,i){var o,r,a=function(e){let t=n.getPlugins(e);return t&&t.instance?t.instance:null},s=a("ResourcePlugin"),l=a("TreeViewPlugin");return o={"revision.reference":{command:"HistoryHdr"},"current.reference":{command:"MaturityHdr"},"owner.reference":{command:"ActionBar_TransferOwnership"},"organization.reference":{command:"ActionBar_ChangeOwner"},"project.reference":{command:"ActionBar_ChangeOwner"},"EnterpriseExtension.V_PartNumber.reference":{command:"SetThePartNumber",defaultValue:s.getNLSValue("Column.EnterpriseExtension.V_PartNumber.DefaultValue")}},r=t.debounce((function(t){if(e.is(t.context)){let n=o[t.context.dataIndex].command,i={},r=t.context.nodeModel.getAttributeValue(t.context.dataIndex);i.node=t.context.nodeModel,n=e.is(n,"object")?n[r]:n,l.executeCommand(n,i)}}),300,!0),{displayType:"URL",isSupportedColumn:function(t){return!!e.is(o[t.attribute.nodeName])},updateColumnInfos:function(t,n,a){var s,u;return a=a||{},n=n||{},u=!e.is(a.isViewEditable,"boolean")||a.isViewEditable,s=!!(!e.is(a.isViewFilterable,"boolean")||a.isViewFilterable)&&(!e.is(n.isFilterable)||n.isFilterable),t.getCellValue=function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.nodeName);return(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=o[n.attribute.nodeName].defaultValue),u?{label:i,func:r.bind(t),getLabel:function(){return this.label}}:i},t.hasCellValue=function(t){var n,i,r,a,s=!1;return r=t.nodeModel,a=this.getTreeDocument(),e.is(r)&&e.is(a)&&(s=a.isGroupingNodeModel(r)),s||(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.nodeName),(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=o[n.attribute.nodeName].defaultValue)),!!e.is(i)},t.getCellClassName=function(){return l.areModuleColumnsImmutable(i.getId())?"icon-text-column":"url-column"},t.getCellGroupingKey=function(t,n){var i,r;return i=this.getColumnOrGroup(n),t.nodeModel&&(r=t.nodeModel.getAttributeValue(i.attribute.nodeName),(!e.is(r)||e.is(r,"string")&&0===r.length)&&(r=o[i.attribute.nodeName].defaultValue)),r},t.getCellValueForExport=function(t){var n,i=this.getColumnOrGroup(t.columnID);return t.rowID<0?n=t.cellModel:(n=t.nodeModel.getAttributeValue(i.attribute.nodeName),(!e.is(n)||e.is(n,"string")&&0===n.length)&&(n=o[i.attribute.nodeName].defaultValue)),n},t.getCellTypeRepresentation=function(){return"url"},t.getCellTooltip=function(t){var n={longHelp:""};return-1===t.columnID?this.getCellDefaultTooltip(t):(!t.isHeader&&e.is(t.cellModel)?n.longHelp=t.cellModel.label:n.longHelp=t.cellModel,n)},s&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:function(t,n){var i,r;return r=this.getColumnOrGroup(t),e.is(r)&&e.is(n)&&(i=n.getAttributeValue(r.attribute.nodeName),(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=o[r.attribute.nodeName].defaultValue)),i}}}),t}}}})),define("DS/DELPPWViewBehaviors/ViewBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["TreeViewPlugin"],creator:function(t,n,i){var o;return o=function(){var e=n.getElement();i.getActiveView()!==n.getId()?e.removeClassName("focus"):e.addClassName("focus")},{listenTo:function(){return{activeViewChange:o}},onStart:function(t){var i=this,o=n.getElement();e.is(o)&&(o.onclick=function(){i.setActiveView(n.getId())})},onStop:function(){},registerViewforWidgetLayout:function(e){i.registerViewforWidgetLayout(e)},unregisterViewforWidgetLayout:function(e,t){i.unregisterViewforWidgetLayout(e,t)},setCurrentView:function(e){i.setCurrentView(n.getId(),e)},setActiveView:function(){i.setActiveView(n.getId()),n.notify("activeViewChange")},getActiveView:function(){return i.getActiveView()},setFocus:function(){var t=n.getElement();e.is(t)&&(this.getActiveView()!==n.getId()?t.removeClassName("focus"):t.addClassName("focus"))}}}}})),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/MessageDialog",["UWA/Core","UWA/Controls/Abstract"],(function(e,t){"use strict";return function(n,i){var o,r=t.extend({defaultOptions:{className:"Message-objectslist",showHeaderMessage:!1},objectsTableBody:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableBody.inject(t)},setData:function(t){var n,o=this,r=[],a=[];o.empty(),o.options.showHeaderMessage&&null!==o.objectsTableBody&&(r.push({tag:"th",text:t.headerMessage}),n=e.createElement("tr",{html:r}),o.objectsTableHead.appendChild(n)),null!==o.objectsTableBody&&t.messages.forEach((function(r){a=[],i.log(r,t.token),a.push({tag:"td",text:e.is(r)?r:""}),n=e.createElement("tr",{html:a}),o.objectsTableBody.appendChild(n)}))},empty:function(){if(e.is(this.objectsTableBody))for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return o=function(t,i,o){var r=e.createElement("div",{class:"Message-dialog-content-container"});e.is(i,"string")&&(i=e.createElement("span",{class:"message-dialog-message",text:i})).inject(r),e.is(o)&&o.inject(r),n.create("Dialog",{title:t,domId:"message-dialog-container",identifier:"message-dialog-container",content:r,minHeight:200,minWidth:400,modalFlag:!0,resizableFlag:!0}).close=function(){this.destroy(),null}},{show:function(t,n){var i,a;i=e.createElement("div",{class:"Message-objectList"}),(a=new r).setData(n),a.getContent().inject(i),o(t,null,i)},showWithMessage:function(t,n,i){let a=e.createElement("div",{class:"Message-objectList"}),s=new r;s.setData(i),s.getContent().inject(a),o(t,n,a)}}}})),define("DS/DELPPWViewBehaviors/RootsBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["RootsPlugin"],creator:function(e,t,n){return{listenTo:function(){return{LoadNewSession:this.removeRoots}},onStart:function(){},onStop:function(){},getRoots:function(){return n.getRoots(t.getId())},isRoot:function(e){return n.isRoot(e)},getRootFilter:function(e){return n.getRootFilter(e)},getCompatibleConfigurationFilters:function(e){return n.getCompatibleConfigurationFilters(e)},getAllCompatibleFilters:function(e){return n.getAllCompatibleFilters(e)},removeRoots:function(){return n.removeRoots(t.getId())}}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil",["UWA/Core"],(function(e){"use strict";return function(t,n,i,o,r,a,s){var l,u,c;return c=function(t,n,i,o){var a;return!(r.getImplementLinkType()===o&&(a=r.getPathToScope(i),!e.equals(t,a)&&!e.equals(n,a)))},l=function(s,l,u,c){var d,g,f,p,h,m,I,y={},b=[],D=e.is(s,"array")?s:[s];if(d=u||l,e.is(d)){for(b=n.getImpacted(d),f=t.getBehavior("LinkBehavior"),I=0;I<b.length;I++)switch((h=b[I]).get("type")){case"DELAsmProcessCanUseCnx":f.getSecondaryRscLinksFromPrimaryLink(h).forEach((function(e){(m=e.clone()).set("from",h.get("from")),b.splice(I+1,0,m),I+=1}));break;case"SecondaryCandidateResourceLink":p=f.getConnection(h.get("from")),e.is(p)&&((m=h.clone()).set("from",p.get("from")),b.splice(I,1,m))}return D.forEach((function(s){var d;y[s]=[],(d=i.getRelationsConfiguredOnColumn(s))&&b.forEach((function(f){var p,h,m,I,b,D,v,C,P,R,A,V,w,S=f.get("from"),L=f.get("to"),E=f.get("type"),N=!1,T=null,M="",F=a.getNLSValue("LinksUI.Link.JoinPattern"),x=function(t,n){var i,o="";if(t.length>0){let a=[],s=!1,l=!1;t.forEach((function(t){if(i=e.is(t.name)&&e.is(t.dicoType)?t.dicoType+"."+t.name:t.name,"Relation"===n||"relation"===n){let t=f.get("type");if("ProcessImplementLinkOcc"!==t||"PLMEntity.V_usage"!==i&&"ImplementLinkUsageFamily.V_Action"!==i)if("ProcessImplementLinkOcc"===t&&(i.contains("V_ContQuantity")||i.contains("V_UsageQuantityRatio"))){if(!s){let t=r.getQuantityInfoFromConnection(f.get("PID"));s=!0,e.is(t)&&a.push(t)}}else e.is(f.get(i))&&a.push(f.get(i));else if(!l){let e=r.getRoleFromModelOrComputed(f.get("PID")),t=r.getActionsFromConnection(f.get("PID")).map((function(e){return e.nlsText}));t.unshift(e.nlsText),a.push(t.join(F)),l=!0}}else e.is(h.get(i))&&a.push(h.get(i))})),o="Relation"===n||"relation"===n?a.join(")("):a.join(" ")}else o=e.is(h)?h.get("PLMEntity.V_Name")||h.get("name")||h.get("PLMEntity.PLM_ExternalID")||h.get("PLMInstance.PLM_ExternalID"):a.getNLSValue("TableView.RelationsColumn.Unknown");return o},O=function(t,n){return P=e.is(t)&&e.is(t.display_icon)?t.display_icon:null,R="relation"===P?E:n};if(Array.isArray(S)&&Array.isArray(L)){if(S=(A=S)[A.length-1],V=L,E===o.getImplementLinkType()||E===o.getContextualImplementLinkType()){if(Array.isArray(c)){if(!o.isProductImplementLinkValidForOccPath(A,V,c))return}}else if(L=V[V.length-1],Array.isArray(c)&&e.is(r.isImplementLinkValidForOccPath,"function")&&!r.isImplementLinkValidForOccPath(A,V,c))return}else!Array.isArray(S)&&Array.isArray(L)&&"ProcessImplementLink"===E?(w=L[L.length-2],L=L[L.length-1]):Array.isArray(S)&&"AllocatedResourceLink"===E&&(S=(A=S)[A.length-1]);if(p=u===S||l===S?L:S,I=e.is(E)?E:null,b=e.is(d[I])?d[I]:{},e.is(b)&&(e.is(b.attribute_source)||e.is(b.Attribute))&&e.is(b.direction))switch(b.direction){case"To":N=u===S||l===S;break;case"From":N=u===L||l===L;break;case"Both":N=!0;break;default:N=!1,t.debug("Direction configured for "+I+" in XML is invalid.")}if(!0===N){p&&(Array.isArray(p)?h=n.getInstance(p[p.length-1]):w?(m=n.getInstance(w),h=n.getReferenceModel(p)):"ProcessImplementLink"!==I&&"PartialProcessImplementLink"!==I||!n.isInstance(p)?h=n.getReferenceModel(p):(m=n.getInstance(p),h=n.getReferenceModel(m._attributes.isInstanceOf)));let t,o,r=[];if(e.is(b.Attribute)){const e=Array.isArray(b.Attribute)?[...b.Attribute]:[b.Attribute],t=new Set;for(const n of e)"reference"===n.entity||"instance"===n.entity?t.add("Type"):"relation"===n.entity&&t.add("Relation");r=[...t]}else e.is(b.attribute_source)&&(r=b.attribute_source.split(","));for(M="",o=0;o<r.length;o++){switch(v=r[o]){case"Relation":D=I;break;case"Type":D=e.is(h)?h.get("type"):null}C=i.getRelationsColumnDisplayOptions(D),T=null,(g=e.is(b.Attribute)?e.is(I)?d[I]:null:e.is(D)?d[D]:null)&&(i.isObjectConstraint()&&s===i.getConstraintRelationName()?T=g:e.is(g.Attribute)&&(T=Array.isArray(g.Attribute)?g.Attribute:[g.Attribute])),e.is(T)||(T=e.is(C.Attribute)?C.Attribute:[]),0===o&&e.is(D)&&e.is(m)&&("Installation"===D||"Transform"===D)&&(M="("+m._attributes["PLMInstance.PLM_ExternalID"]+") "),t=x(T,v),t="Relation"===v&&"Relation,Type"===r.toString()?"("+t+")":t,M+=t,R=O(C,D)}y[s].push({Icon:R,Value:M})}}))})),y}},u=function(i,o,r){var a,s={},u=[],d=t.getBehavior("WUXNodeModelBehavior");if(e.is(d)){if(e.is(o))return n.getImpacted(o,!1,{excludeRelationTypes:["PrimaryResourceLinkDetail","SecondaryResourceLinkDetail"]}).forEach((function(t){var g,f,p,h,m=t.get("from"),I=t.get("to"),y=t.get("type");e.is(m,"array")&&e.is(I,"array")&&e.is(r,"array")&&(m=(p=m)[p.length-1],I=(h=I)[h.length-1],!c(p,h,r,y))||(f=o===m?I:m,e.is(f)&&(g=e.is(f,"array")?n.getInstance(f[f.length-1]):n.getReference(f),a=d.getNodeInfo(g.get("PID"),!0),e.is(a)&&(e.is(a.instancePID)?s=l(i,a.referencePID,a.instancePID,r):e.is(a.referencePID)&&(s=l(i,a.referencePID,null,r)),e.is(s)&&(u[g.id]={attributes:s}))))})),u}else t.debug("nodeModelBehavior is not available to update the relation attributes.")},{fillNodeOptions:function(o,r,u,c){var d,g=!e.is(u)?o.referencePID:u.PID,f=l(r,g,null,c),p=n.needToQueryForConnections(g),h=i.getInverseRelationNameSet(),m=t.getPreferenceValue("navigateOnIndex"),I="Index"===m;for(d in f)if(f.hasOwnProperty(d)){if(I&&p&&h.has(d)){e.is(o.grid[d])||(o.grid[d]=[{Value:a.getNLSValue("Info.RelationsNotLoaded.Title")}]);continue}Array.isArray(o.grid[d])?(o.grid[d]=o.grid[d].filter((function(e){return e.Value!==a.getNLSValue("Info.RelationsNotLoaded.Title")})),e.is(u)&&(o.grid[d]=o.grid[d].concat(f[d]))):o.grid[d]=f[d]}if("IndexRelationsOnDemand"===m&&e.is(r)&&Array.isArray(r)&&p)for(const e in o.grid)o.grid.hasOwnProperty(e)&&r.indexOf(e)>=0&&(s.isMGALoadRelationsOnDemand()?o.grid[e].push({Value:"",Icon:"LinksNotFetched"}):o.grid[e].push({Value:a.getNLSValue("Info.RelationsNotLoaded.Title"),Icon:null}));return o},getRelationAttributes:function(n,o,r){var a,s,c,d,g,f,p,h,m=[],I=[],y=t.getBehavior("WUXNodeModelBehavior");if(e.is(y)){if(a=function(t){p=y.getNodeInfo(t),e.is(p,"array")&&p.forEach((function(t){e.is(t.instancePID)?(h=e.is(t.absPath,"array")?t.absPath:null,f=l(o,t.referencePID,t.instancePID,h),I[t.absPath]={attributes:f}):e.is(t.referencePID)&&(f=l(o,t.referencePID),I[t.referencePID]={attributes:f})}))},n.isConnection())a(n.get("from")),!Array.isArray(n.get("to"))||"ProcessImplementLink"!==n.get("type")&&"PartialProcessImplementLink"!==n.get("type")?a(n.get("to")):a(n.get("to")[n.get("to").length-1]);else if(g=n.changedAttributes(),e.is(g))for(s=n.get("type"),d=i.getRelationsColumnDisplayOptions(s),e.is(d)?d.Attribute.forEach((function(e){m.push(e.name)})):m[0]="PLMEntity.V_Name",c=0;c<m.length;c++)if(g.hasOwnProperty(m[c])){I=u(o,n.get("PID"),r);break}return I}t.debug("nodeModelBehavior is not available to update the relation attributes.")}}}})),define("DS/DELPPWViewBehaviors/LoadObjectBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["RootsPlugin","DatabasePlugin"],creator:function(t,n,i,o){var r;return{listenTo:function(){return{LoadRecentContent:this.loadObjectsFromRecent,LoadRelationsinViews:this.onLoadRelationsinViews}},onStart:function(e){r=e||{}},onStop:function(){},loadObjectsFromRecent:function(t){var o={action:[],parameters:[],promises:[],dragNDropInfo:{}},a=[],s=[],l=[],u={},c=n.getBehavior("TreeListViewBehavior"),d=n.getBehavior("WUXNodeModelBehavior"),g=function(){o.promises.forEach((function(t){var o=function(t){e.is(t.modelsNotRetrieved,"array")&&t.modelsNotRetrieved.forEach((function(e){i.removeRoot(n.getId(),e)}))};t.then(o,o)}))};s=e.is(t)&&e.is(t.store)?i.getStoreRoots(t.store,n.getId()):i.getRoots(n.getId()),(l=d.getRoots()).length>0&&Array.isArray(s)?s[0].forEach((function(e){-1===l.indexOf(e)&&a.push(e)})):a=Array.isArray(s)?s[0]:[],e.is(c)&&e.is(d)&&Array.isArray(a)&&a.length>0&&(o.action[0]="addRoot",o.parameters[0]={PIDsToAddRoot:a,forceIndexMode:r.forceIndexMode},o.dragNDropInfo.info={loadObjectsInOwnView:!0},n.notify("startProgress",u),d.prepareUpdate(),c.processDropEffect(o).then((function(){d.pushUpdate(),n.notify("stopProgress",u),n.notify("onRecentContentLoaded"),g()})).catch((function(){d.pushUpdate(),n.notify("stopProgress",u),n.debug("loadObjectsFromRecent failed"),g()})))},onLoadRelationsinViews:function(t){var i,a,s,l,u=[],c=!!e.is(t)&&t.selectConnectedObjects,d=n.getBehavior("SelectionBehavior"),g=n.getBehavior("WUXNodeModelBehavior"),f=[],p=[],h={expandLevel:0,forceDBMode:!0,silentMode:!0},m=!!e.is(r.isLoadObjectsinViews)&&r.isLoadObjectsinViews;0===(l=g.getSelectedNodes()).length&&m&&(s=(l=d.getSelections()).every((function(e){return 0===e.length})),l=!0===s?g.getAllDescendants():null),e.is(l,"array")&&(l.forEach((function(t){e.is(t.getID())&&u.push(t.getID()),e.is(t.getInstancePID())&&u.push(t.getInstancePID())})),i=function(t){var i=t.connections,r=[],a=[],s=[],l=[],d=function(){f.length>0&&(f.forEach((e=>{var t=o.transformToRIROccurrencePath(e);t.length>1?p.push(t):l.push(t[0])})),l.forEach((e=>{p.some((t=>t.includes(e)))||p.push([e])})),n.notify("addOccurrece",[p]),c&&s.length>0&&n.notify("selectNodes",[s]))};e.is(i,"array")&&i.length>0&&(i.forEach((function(t){var n=e.is(t.get("from"))?t.get("from"):[],i=e.is(t.get("to"))?t.get("to"):[],o=function(e){e=Array.isArray(e)?e:[e],u.some((function(t){return e.includes(t)}))||(f.push(e),s.push(e[e.length-1]),e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})))};o(n),o(i)})),r.forEach((function(e){o.isReference(e)||o.isInstance(e)||a.push(e)})),a.length>0?o.getDescendantsFromServer(a,(function(){var t,n,i=[];r.forEach((function(r){t=o.getInstance(r),e.is(t)&&(n=function(e){-1!==i.indexOf(e)||o.isReference(e)||i.push(e)},n(t.get("isInstanceOf")),n(t.get("isAggregatedBy")))})),i.length>0?o.fetchRefList(i,e.merge({onComplete:function(){d()}},h)):d()}),h):d())},a=function(){n.debug("Fetching getDescendantsFromServer for Load Relations in Views failed.")},u.length>0&&o.getDescendantsFromServer(u,i,e.merge(h,{onFailure:a,fetchInverseRelations:!0})))}}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n){var i,o,r;const a=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},s=a("ResourcePlugin"),l=a("TreeViewPlugin"),u=a("AttributePlugin"),c=a("DicoPlugin");return i=function(e){var t={};t.node=e.nodeModel,l.executeCommand("Relations",t)},o=function(t){var o,r=void 0,a=this,u=[],c=this.getColumnOrGroup(t.columnID),d=t.nodeModel.getAttributeValue(c.dataIndex);return e.is(d,"array")&&d.length>0&&((o=d).forEach((function(e){u.push({icon:{iconPath:s.getIconURLFromKey(e.Icon),iconSize:{width:"22px",height:"22px"}},label:e.Value,iconName:e.Icon,func:l.areModuleColumnsImmutable(n.getId())?null:i.bind(a,t),relations:o})})),u.func=l.areModuleColumnsImmutable(n.getId())?null:i.bind(a,t),r=u),r},r=function(t,n){var i=[],o=t.nodeModel.getAttributeValue(n);return e.is(o,"array")&&o.length>0&&o.forEach((function(t){var n=e.is(t.Value)?t.Value:t.toString();i.push(n)})),i.join(",")},{displayType:"Relation",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,i,o){return t.typeRepresentation="url",t.className=l.areModuleColumnsImmutable(n.getId())?"icon-text-column":"url-column",t.getCellValue=this.getCellValue,t.hasCellValue=this.hasCellValue,t.getCellValueForExport=this.getCellValueForExport,t.getCellGroupingKey=this.getCellGroupingKey,t.getCellTooltip=this.getCellTooltip,e.is(o.isViewFilterable,"boolean")&&o.isViewFilterable&&e.is(i)&&e.is(i.isFilterable)&&i.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:this.getCellValueForFilter}}),t},getCellValueForExport:function(t){var n,i,o="";return t.rowID<0?t.cellModel:(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),e.is(i,"array")&&i.forEach((function(t,n){e.is(t.Value)?o+=t.Value:o+=t.toString(),n!==i.length-1&&(o+=", ")})),o)},getCellValue:function(e){return o.call(this,e)},getCellValueForFilter:function(t,n){var i,o;return e.is(t)&&e.is(n)&&(o=n.getAttributeValue(t),Array.isArray(o)&&(i=o.map((t=>e.is(t.Value)?t.Value:t.toString())))),i.length>0?i:void 0},hasCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.options.grid;return Array.isArray(n[t.dataIndex])&&0!==n[t.dataIndex].length},getCellClassName:function(t){var n,i="";return e.is(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(t.dataIndex),i=Array.isArray(n)&&n.length>1?"relation-column-multivalued":"relation-column"),i},getCellGroupingKey:function(e,t){return r.call(this,e,t)},getCellTooltip:function(t){var i,o,r={longHelp:""},a=[],s=t.cellView.collectionView.getColumnOrGroup(t.columnID),l=u.getAttributeInfoFromColumn(s),d=c.getAttributeInfo(l.attributeName),g=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if("Relation"!==s.displayType||t.isHeader||(g=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(g)&&0!==g.length){for(i=0;i<g.length;i++)o=g[i],a.push(e.is(o.Value)?o.Value:o);let t=u.getType(d),s=u.getValueAsString(a,t),l=n.getPreferenceValue("separator");r.longHelp=s.split(l).join("\n")}else t.isHeader&&(r.longHelp=g);return r}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnSortUtils",["UWA/Core"],(function(e){"use strict";return{compareFunction:function(t,n){var i;if(e.is(t)||e.is(n))if(e.is(t))if(e.is(n)){if(e.is(t)&&e.is(n))if(e.is(t.magnitude)&&e.is(n.magnitude)){let e=t.magnitude,o=n.magnitude,r=t.mksValue,a=n.mksValue;i=e<o?-1:e>o?1:parseFloat(r)-parseFloat(a)}else{var o=parseFloat(t),r=parseFloat(n),a=!isNaN(o)&&isFinite(o),s=!isNaN(r)&&isFinite(r);i=a&&s?o-r:(t=t.toString())<(n=n.toString())?-1:t>n?1:0}}else i=1;else i=-1;else i=0;return i}}})),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/AbstractTreeNodeModel",["UWA/Core","DS/PPWTreeNodeModel/PPWTreeNodeModel"],(function(e,t){"use strict";var n=function(e){return e.getNodeSource()===t.NODE_SOURCE.GROUPING},i=function(n){n=n||{},this._logger=this.facade,this._referencePID=null,this._instancePID=null,this._type=null,this.options={label:"",badges:{},icons:[],grid:{},thumbnail:null,useAsyncPreExpand:!1},this.setReferencePID(n.referencePID),this.setReferenceType(n.referenceType),this.options=e.extend(this.options,n),n.instancePID&&this.setInstancePID(n.instancePID),n.linkPID&&this.setLinkPID(n.linkPID),t.call(this,this.options)};function o(e){e._getFilterInfo||(e._getFilterInfo=i.prototype._getFilterInfo.bind(e),e._getChildrenFilterInfo=i.prototype._getChildrenFilterInfo.bind(e),e._removeChildrenFilterInfo=i.prototype._removeChildrenFilterInfo.bind(e),e.filterInChild=i.prototype.filterInChild.bind(e),e.filterOutChild=i.prototype.filterOutChild.bind(e))}return(i.prototype=Object.create(t.prototype)).constructor=i,i.prototype.name="AbstractTreeNodeModel",i.prototype.addChild=function(e,i,o){var r,a,s,l,u,c,d=!0;return(r=t.prototype.addChild.call(this,e,i))&&!0!==o&&(d=!0,l=r.getAttributeValue("V_TreeOrder"),(a=r.getPreviousBrother())&&l<a.getAttributeValue("V_TreeOrder")&&(d=!1),(s=r.getNextBrother())&&l>s.getAttributeValue("V_TreeOrder")&&(d=!1),d||(u=r.getParent().getChildren().sort((function(e,t){return n(e)&&n(t)?0:n(e)?-1:n(t)?1:e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")})).map((function(e){return n(e)?"":e.getInstancePID()})),c=u.indexOf(r.getInstancePID()),r=t.prototype.addChild.call(this,r,c))),r},i.prototype.getID=function(){return this.getReferencePID()},i.prototype.setReferencePID=function(t){return e.is(t,"string")?(this._referencePID=t,this.getReferencePID()):null},i.prototype.setInstancePID=function(t){return e.is(t,"string")?(this._instancePID=t,this.getInstancePID()):null},i.prototype.setLinkPID=function(t){return e.is(t,"string")?(this._linkPID=t,this.getLinkPID()):null},i.prototype.setReferenceType=function(t){return e.is(t,"string")?(this._type=t,this.getReferenceType()):null},i.prototype.getReferencePID=function(){return this._referencePID},i.prototype.getInstancePID=function(){return this._instancePID},i.prototype.getLinkPID=function(){return this._linkPID},i.prototype.getReferenceType=function(){return this._type},i.prototype.getRootPID=function(){var t=this.getRoot(!0);return e.is(t)?t.getReferencePID():null},i.prototype.getAbsolutePath=function(){var e,t,i=this.getParents(),o=[];for(e=i.length-1;e>=0;e--)t=i[e],n(t)||o.push(t.getInstancePID());return o=o.concat([this.getInstancePID()]).slice(1)},i.prototype.getRIRpath=function(){var e,t,i,o=this.getParents(),r=[];for(i=o.length-1;i>=0;i--)e=o[i],n(e)||((t=e.getInstancePID())&&r.push(t),r.push(e.getReferencePID()));return r.length>0&&!n(this)?(r.push(this.getInstancePID()),r.push(this.getReferencePID())):n(this)||r.push(this.getReferencePID()),r},i.prototype.getChildrenPID=function(){var e=this.getChildren(!0),t=[];return Array.isArray(e)&&(t=e.map((function(e){return e.getInstancePID()}))),t},i.prototype.getSiblingsPID=function(){var t=this.getParent(),n=[];return e.is(t)&&(e.is(t.getChildrenPID)||(t.getChildrenPID=i.prototype.getChildrenPID.bind(t)),n=t.getChildrenPID()),n},i.prototype.expand=function(e){var n=e||{};return n.previousNodeState={},n.previousNodeState[this.getReferencePID()]=this.getState(),t.prototype.expand.call(this,n)},i.prototype._removeFilterInfo=function(){delete this.options._filterInfo},i.prototype._removeChildrenFilterInfo=function(){delete this.options._childrenFilterInfo},i.prototype.filterInChild=function(t){var i,o,r,a,s,l,u,c,d=this._getChildrenFilterInfo();if(d&&(i=d.childrenBeforeFiltering)&&(o=i.indexOf(t))>=0&&(r=t._getFilterInfo())&&r.parentBeforeFiltering===this){if(a=this.getChildren(!0))for(u=0;u<a.length;u++)if(s=a[u],!n(s)&&i.indexOf(s)>o){l=s;break}delete r.parentBeforeFiltering,e.is(t.options.isRootAttached)?!0===t.options.isRootAttached&&this.insertBefore(t,l):this.insertBefore(t,l),e.is(this.setState,"function")&&this.setState({state:d.expandStateBeforeFiltering}),t._removeFilterInfo(),c=d.filteredOutChildren.indexOf(t),d.filteredOutChildren.splice(c,1),0===d.filteredOutChildren.length&&this._removeChildrenFilterInfo()}},i.prototype.filterIn=function(e){var t,n,i,r=this._getFilterInfo();r&&r.parentBeforeFiltering&&(o(t=r.parentBeforeFiltering),t.filterInChild(this)),e&&(n=(i=this._getChildrenFilterInfo())&&i.childrenBeforeFiltering?i.childrenBeforeFiltering:this.getChildren(!0))&&n.forEach((function(t){t.filterIn(e)}))},i.prototype._getFilterInfo=function(e){return!this.options._filterInfo&&Boolean(e)&&(this.options._filterInfo={}),this.options._filterInfo},i.prototype._getChildrenFilterInfo=function(e){return!this.options._childrenFilterInfo&&Boolean(e)&&(this.options._childrenFilterInfo={}),this.options._childrenFilterInfo},i.prototype.filterOutChild=function(t){var n,i,o=this.getChildren(!0);if(o.indexOf(t)<0)throw"Not a child";(n=this._getChildrenFilterInfo(!0)).childrenBeforeFiltering||(n.childrenBeforeFiltering=o&&o.length>0?o.slice(0):[],i={noExpandState:"noChildren",expandingState:"expanding",partiallyExpandedState:"partiallyExpanded",collapseState:"expanded",expandState:"collapsed"},e.is(this._expandState)&&(n.expandStateBeforeFiltering=i[this._expandState])),t._getFilterInfo(!0).parentBeforeFiltering=this,e.is(this.removeChild,"function")?this.removeChild(t):this.removeRoot(t,!0,!0),e.is(this.setState,"function")&&this.setState({state:n.expandStateBeforeFiltering}),n.filteredOutChildren||(n.filteredOutChildren=[]),n.filteredOutChildren.push(t)},i.prototype.filterOut=function(){var e=this.isRoot(!0)?this.getTreeDocument():this.getParent();null!==e&&(o(e),e.filterOutChild(this))},i.prototype.isRoot=function(i){var o=!1,r=this.getParent();if((i=!!e.is(i,"boolean")&&i)&&r&&n(r)&&0===r.getNodeDepth())o=1===this.getNodeDepth();else if(r&&r.getNodeDepth()>0){o=this.getParents().every((e=>n(e)))}else o=t.prototype.isRoot.call(this);return o},i.prototype.getRoot=function(i){var o,r,a;if(i=!!e.is(i,"boolean")&&i,o=t.prototype.getRoot.call(this),i&&n(o))if(null===this.getInstancePID())o=this;else for(a=(r=this.getParents()).length-1;a>=0;a--)if(!n(r[a])){o=r[a];break}return o},i.prototype.getChildren=function(o){var r;return o=!!e.is(o,"boolean")&&o,r=t.prototype.getChildren.call(this),o&&Array.isArray(r)&&(r=r.reduce((function(e,t){var r;return n(t)?(r=i.prototype.getChildren.call(t,o),Array.isArray(r)&&(e=e.concat(r))):e.push(t),e}),[])),r},i.prototype.getVisibleChildren=function(o,r){var a;return r=!!e.is(r,"boolean")&&r,a=t.prototype.getVisibleChildren.call(this,o),r&&Array.isArray(a)&&(a=a.reduce((function(e,t){var a;return n(t)?(a=i.prototype.getVisibleChildren.call(t,o,r),Array.isArray(a)&&(e=e.concat(a))):e.push(t),e}),[])),a},i.prototype.getAllDescendants=function(i,o){var r=null,a=!!e.is(o,"boolean")&&o;return e.is(i,"array")&&(i=null),r=t.prototype.getAllDescendants.call(this,i),a&&e.is(r,"array")&&r.length>0&&(r=r.filter((function(e){return!n(e)}))),r},i.prototype.expandAll=function(){var n,i,o=this.getTreeDocument();i=function(){e.is(n)&&this.removeEventListener(n),e.is(o)&&o.decrementExpandAllCounter()},e.is(o)&&o.increamentExpandAllCounter(),n=o.onPostExpandAll(i),this._isTrueRoot()||(this.options.useAsyncPreExpand=!0),t.prototype.expandAll.call(this)},i.prototype.collapseAll=function(){var n,i,o=this.getTreeDocument();i=function(){e.is(n)&&this.removeEventListener(n),e.is(o)&&o.decrementCollapseAllCounter()},e.is(o)&&o.increamentCollapseAllCounter(),n=o.onPostCollapseAll(i),t.prototype.collapseAll.call(this)},i.prototype.get3DBuildUpState=function(){return this.options.hideShow3DBuildUpState},i.prototype.is3DHiddenByUser=function(){return this.options.hiddenByUser},i.NODE_SOURCE=t.NODE_SOURCE,i})),define("DS/DELPPWViewBehaviors/BulkTreeSearchHelper",["UWA/Core"],(function(e){"use strict";return function(t,n){var i,o,r,a,s,l,u,c;return i=function(t,n){var i,o=-1,r=t.length;for(i=0;i<r;i++)if(e.equals(t[i],n)){o=i;break}return o},o=function(e,t){var n,i,o=[],r=e.length;for(n=e.indexOf(t);n>-1&&(o.push(n),!((i=n+1)>=r));)n=e.indexOf(t,i);return o},r=function(t,n,i){var o,r,a;a=Array.isArray(i)?i:[i],e.is(t)&&(r=t[o=JSON.stringify(n)],e.is(r)?t[o]=r.concat(a):t[o]=a)},a=function(e,t){var n=[];return 1===t.length?n=n.concat(e):t.length>1&&e.forEach((function(e){var i,o,r,a,s=e;for(i=1;i<t.length;i++){for(r=s.getChildren(!0),a=!1,o=0;o<r.length;o++)if(r[o].getInstancePID()===t[i]){s=r[o],a=!0;break}if(!a)break}a&&n.push(s)})),n},s=function(t,n){var i,o,r,a,s,l=t;if(l.isVisible()){for(i=t.isRoot(!0)?0:1;i<n.length&&(s=l.getVisibleChildren(!1,!0),e.is(s)&&0!==s.length);i++)for(o=0;o<s.length;o++)if(s[o].getInstancePID()===n[i]){l=s[o];break}a=l}else{for(r=l.getParent();!r.isVisible();)r=r.getParent();a=r}return a},l=function(n){e.is(n,"function")&&t.getRoots(!0).forEach((function(e){var t,i,o=[];for(o.push(e);o.length>0;)t=o.pop(),n(t),i=t.getChildren(!0),Array.isArray(i)&&i.forEach((function(e){o.push(e)}))}))},u=function(i){var o;return o=t.getRoots(!0).map((function(e){return e.getReferencePID()})),i.map((function(t){var i,r=n.getInstance(t[0]),a=null;return e.is(r)&&(i=r.get("isAggregatedBy"),o.indexOf(i)>-1&&(a=i)),a}),[])},c=function(n){var i,a,s,c,d=Object.create(null),g=!1,f=!1;for(s=0,c=(i=u(n)).length;s<c&&(e.is(i[s])?g||(g=!0):f||(f=!0),!g||!f);s++);return g&&t.getRoots(!0).forEach((function(t){var a,s=t.getReferencePID();e.is(s)&&(a=o(i,s)).length>0&&a.forEach((function(e){r(d,n[e],t)}))})),f&&(a=i.map((function(t,i){var o=null;return e.is(t)||(o=n[i][0]),o})),l((function(t){var n,i=t.getInstancePID();e.is(i)&&(n=o(a,i)).length>0&&n.forEach((function(e){r(d,t.getAbsolutePath(),t)}))}))),d},{getNodeModels:function(t,n){var s,u,c,d,g=!e.is(n)||n,f=[],p=[],h=[],m=[],I=[],y=[],b=Object.create(null),D={found:[],notFound:[]};return(t=Array.isArray(t)?t:[t]).forEach((function(e){Array.isArray(e)?p.push(e):f.push(e)})),u=p.map((function(e){return e[0]})),l((function(t){var n,i,a,s=!1;a=t.getInstancePID(),e.is(a)&&(s=(n=f.indexOf(a))>-1,(i=o(u,a)).length>0&&i.forEach((function(e){r(b,p[e],t)}))),s||(s=(n=f.indexOf(t.getReferencePID()))>-1),s&&(I.push(f[n]),h.push(t))})),Object.keys(b).forEach((function(e){var t,n,i=JSON.parse(e);t=b[e],y.push(i),n=a(t,i),m=m.concat(n)})),g||(h.length<f.length&&(c=f.filter((function(e){return-1===I.indexOf(e)}))).length>0&&(D.notFound=D.notFound.concat(c)),m.length<p.length&&(d=p.filter((function(e){return-1===i(y,e)}))).length>0&&(D.notFound=D.notFound.concat(d))),(s=h.concat(m)).length>0&&(s=s.filter((function(e,t,n){return n.indexOf(e)===t})),D.found=s),D},getLastVisibleNodeModels:function(t){var n,i=[],a=[],c=new Set,d=Object.create(null);return t.forEach((function(e){Array.isArray(e)?a.push(e):i.push(e)})),n=u(a).filter((function(t){return e.is(t)})),l((function(t){var s,l,u,c,g=!1,f=t.getInstancePID();t.isRoot(!0)&&(u=t.getReferencePID(),e.is(u)&&(l=o(n,u)).length>0&&l.forEach((function(e){r(d,a[e],t)}))),e.is(f)&&(g=(s=i.indexOf(f))>-1),g||(g=(s=i.indexOf(t.getReferencePID()))>-1),g&&(c=[i[s]],r(d,c,t))})),c=Object.keys(d).reduce((function(e,t){var n,i=JSON.parse(t);return n=d[t],Array.isArray(n)&&n.length>0&&n.forEach((function(t){var n;n=s(t,i),e.add(n)})),e}),c),Array.from(c)},searchPathsPartially:function(e){var t,n,o,r={found:[],notFound:[]};return e.length>0&&(t=c(e),n=Object.keys(t).map((function(e){return JSON.parse(e)})),r.found=r.found.concat(n),n.length<e.length&&(o=e.filter((function(e){return-1===i(n,e)}))).length>0&&(r.notFound=r.notFound.concat(o))),r},traverseTreeListView:function(e){l(e)}}}})),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/MfgProcessCrossHighlightBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin"],creator:function(t,n,i){var o,r,a,s,l,u,c,d,g,f,p,h,m,I,y,b,D,v,C="MfgProcessCrossHighlightBehavior";return s=function(t){var i=n.getBehavior(t);return e.is(i)||n.debug(C+" : "+t+"behavior is not available "),i},u=function(){o=Object.create(null)},l=function(e,t){o[e.toString()]=t},c=function(e){delete o[e.toString()]},d=function(){return Object.keys(o).reduce((function(e,t){return e.concat(o[t])}),[])},g=function(){var t=s("WUXNodeModelBehavior"),i=r;return i&&e.is(t)&&t.isDocumentEmpty()&&(i=!1,n.debug(C+" : Not computing crossHighlight as document is empty")),i},f=function(t,o){var r,l,u,c=s("LinkBehavior"),d=[];return e.is(c)&&(r=i.getPPRType(t),u=a[r],Array.isArray(u)?(d=c.getConnectedObjects(t,o,{relationTypes:u,isCrossHighlight:!0})).length>0&&("SERVICE"===r||"SYSTEM"===r)&&(l=c.getConnectedUsagePoints(t,{relationTypes:u})).length>0&&(d=d.concat(l)):n.debug(C+" : Couldnt _computeConnectedObjs as crossHighLightLinkTypes config is not available for "+r)),d},p=function(e,t){const n=e.split(",");let i=0,o=!1;if(t.length>0)for(let e=0;e<n.length;e++){const r=n[e];if(t[i].indexOf(r)>-1&&(i++,i===t.length)){o=!0;break}}else o=!0;return o},h=function(t,n){var i,o,r,a,s;if(t.isVisible()){if(r=t,e.is(n))for(i=1;i<n.length&&(a=!1,s=r.getVisibleChildren(!1,!0),e.is(s)&&0!==s.length);i++){for(o=0;o<s.length;o++)if(s[o].getInstancePID()===n[i]){r=s[o],a=!0;break}if(!a)break}}else for(r=t.getParent();!r.isVisible();)r=r.getParent();return r},m=function(t){var n=s("WUXNodeModelBehavior"),o=[],r={},a={};return e.is(n)&&(n.getAllDescendants().forEach((function(t){var n,i,o;n=t.getReferencePID(),t.isRoot()?o=n:(i=t.getInstancePID(),o=t.getRIRpath().toString()),e.is(n)&&(e.is(r[n])||(r[n]=[]),r[n].push(o)),e.is(i)&&(e.is(r[i])||(r[i]=[]),r[i].push(o)),e.is(o)&&(a[o]=t)})),t.forEach((function(t){var n,s,l,u,c,d;if(e.is(t.occPath)||e.is(t.rirPath)){if(u=t.ctxPath||[],e.is(t.occPath)?l=t.occPath:e.is(t.rirPath)&&(s=t.rirPath,l=s.filter(((e,t)=>t%2!=0))),Array.isArray(s)&&1===s.length)e.is(a[s])&&o.push(h(a[s]));else if(l.length>0)if(d=l[0],e.is(r[d])&&r[d].filter((e=>p(e,u))).forEach((function(e){o.push(h(a[e],l))})),u.length>0){let t;for(t=u.length-1;t>=0;t--){let n=u[t],i=u.slice(0,t);n.forEach((t=>{e.is(r[t])&&r[t].filter((e=>p(e,i))).forEach((function(e){var t=a[e],n=t.getChildren(!0);Array.isArray(n)&&0===n.length&&o.push(h(t))}))}))}}else c=i.getParentReferenceIdFromInstance(d),e.is(c)&&e.is(r[c])&&r[c].forEach((function(e){var t=a[e].getChildren(!0);Array.isArray(t)&&0===t.length&&o.push(h(a[e]))}))}else e.is(t.objectPID)&&(n=t.objectPID,e.is(r[n])&&r[n].forEach((function(e){o.push(h(a[e]))})))}))),o},I=function(e){var t,n=s("WUXNodeModelBehavior");n&&Array.isArray(e)&&e.length>0&&(t=m(e)).length>0&&n.withTransactionUpdate((function(){t.forEach((function(e){e.highlight()}))}))},y=function(){var e,t=s("WUXNodeModelBehavior");t&&(e=t.getHighlightedNodes(),Array.isArray(e)&&e.length>0&&t.withTransactionUpdate((function(){e.forEach((function(e){e.unhighlight()}))})))},b=function(){u()},D=function(t){var n;g()&&e.is(t)&&((t=Array.isArray(t)?t:[t]).forEach((function(t){var n,i,o=t.nodeId,r=t.isSelected,a=t.absPath;e.is(o)&&e.is(r)&&e.is(a)&&(i=a.length>0?a:o,r?(n=f(o,a),l(i,n)):c(i))})),y(),n=d(),I(n))},v=function(t){var i,o=s("WUXNodeModelBehavior");g()&&e.is(o)&&e.is(t)&&e.is(t.sourceId)&&e.is(t.changed)&&(i=t.changed,t.sourceId!==n.getId()&&i.isSelected&&o.unSelectAll(),D(i))},{listenTo:function(){return{refreshAll:b,select:v,reComputeCrossHighlight:D,onNodeExpanded:this.reHighlightMyView,onNodeCollapsed:this.reHighlightMyView}},onStart:function(t){r=!!e.is(t.enableCrossHighlight)&&t.enableCrossHighlight,a=e.is(t.crossHighLightLinkTypes)?t.crossHighLightLinkTypes:{},u()},onStop:function(){o=null},reHighlightMyView:function(){var e;g()&&o&&Object.keys(o).length>0&&(y(),e=d(),I(e))}}}}})),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl",["UWA/Core"],(function(e){"use strict";return function(t,n,i,o,r,a){var s,l,u,c,d=null,g=null,f=null,p=!1,h=!1,m=!1,I=i.getComponent("TooltipModel"),y=i.getComponent("Accordeon"),b=i.getComponent("Button"),D=function(t){var n,i,l=new e.Element("div",{class:"TNRInfo"}),u=new e.Element("div",{class:"iconType-container"}).inject(l);return l.setData("objPid",t.id),n=r.isAKindOf(t,"DELFmiFunctionIdentifiedInstance")?a.getReference(t.get("isInstanceOf")).get("type"):e.is(t.get("PLMEntity.V_usage"))&&"NULL"!==t.get("PLMEntity.V_usage")&&"VPMReference"===t.get("type")?t.get("PLMEntity.V_usage"):t.get("type"),o.getIconElem(n).inject(u),new e.Element("div",{class:"SubLabelDiv",text:a.getDisplayName(t)}).inject(l),m&&(i=new e.Element("div",{class:"SubDeleteOptionBtn"}).inject(l),new b({displayStyle:"lite",icon:"wux-ui-3ds wux-ui-3ds wux-ui-3ds-close",onClick:function(t){var n,i;(n=t.target.parentNode.parentNode)&&e.is(n.getData("objPid"))&&-1!==(i=s.indexOf(n.getData("objPid")))&&(s.splice(i,1),n.destroy())}}).inject(i)),l},v=function(t,n){return(f=new e.Element("div",{class:"selectionUIitems-container"})).inject(n),new e.Element("div",{class:"SubLabelDiv",styles:{padding:"0px"}}).setHTML(o.getNLSValue(t)).inject(f),n};return{createUI:function(t){var n,i,r=new e.Element("div",{class:"accordeon-section-container"});l=new e.Element("div",{class:"inside-accordeon-warningMessage"}),u=new e.Element("div",{class:"inside-accordeon-errorMessage"}),s=[],e.is(t)&&(n=e.is(t.title)?t.title:"",i=e.is(t.message)?t.message:"",p=!!e.is(t.multiSelection)&&t.multiSelection,h=!!e.is(t.displayMultiSelection)&&t.displayMultiSelection,m=!!e.is(t.itemsWithOptions)&&t.itemsWithOptions),g=new e.Element("div",{class:"Data-selection-UI"}).inject(t.renderTo),""===n?d=v(i,g):(c=function(t,n,i){var r=new e.Element("div",{class:"accordeon-section-container"}).inject(i);return new y({items:[{header:o.getNLSValue(t),content:n,expandedFlag:!0}],style:"filled-separate"}).inject(r)}(n,r,g),d=v(i,r))},updateLabel:function(t){var n,i,l,u,c,g,m,y=[],b=!1,v=new e.Element("i",{class:"wux-ui-3ds wux-ui-3ds-menu-dot wux-layouts-rowentry-moreindicator",id:"multiValueCellMoreIndicator"}),C=[];if(!e.is(t,"string")){if(e.is(t,"array")||(t=[t]),t&&d)if(y=[],!1===p&&t.length>1)u=o.getNLSValue("Error.MultipleObjectsSelected"),this.showWarningMessage(u),b=!1;else if(t.length>0)if(h||d.empty(),f.empty(),r.isReferencesHasReadOnlyType(t))u=o.getNLSValue("Error.ReadOnlyTypesNotAllowed"),this.showErrorMessage(u),b=!1;else{for(i=0;i<t.length;i++)n=D(t[i]),h?s.includes(n.getData("objPid"))||(s.push(n.getData("objPid")),n.inject(d)):0===i&&n.inject(d),(l=new e.Element("div",{class:"TNRInfo"})).addContent(n.innerHTML),y.push(l),g=t[i].get("VPMReference.V_IsManufacturable"),e.is(g)&&"FALSE"===g&&(m=t[i].get("type"),e.is(m)&&"PRODUCT"===r.getPPRType(m)&&C.push(a.getDisplayName(t[i])));C.length>0&&(c=C.length>1?o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.NonBOMItems")):o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.NonBOMItem",{objectName:C[0]})),this.showWarningMessageForPrd(c)),!0===p&&t.length>1&&!1===h&&v.inject(d),h||(d.tooltipInfos=new I({shortHelp:y,allowUnsafeHTMLShortHelp:!0})),b=!0}return b}d&&(d.empty(),new e.Element("div",{}).inject(d).setHTML(t).inject(d),e.is(d.tooltipInfos)&&(d.tooltipInfos=null))},showErrorMessage:function(t){var n;d.empty(),n=new e.Element("div",{class:"TNRInfo"}).inject(d),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-attention"}).inject(n),u.setHTML(t).inject(n),e.is(d.tooltipInfos)&&(d.tooltipInfos=null)},showWarningMessage:function(t){var n;d.empty(),n=new e.Element("div",{class:"TNRInfo"}).inject(d),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(n),l.setHTML(t).inject(n),e.is(d.tooltipInfos)&&(d.tooltipInfos=null)},updateAccordeon:function(e,t){c.updateItem(e,t)},showWarningMessageForPrd:function(t){var n,i;i=d.getElement(".TNRWarning"),e.is(i)?n=i:(n=new e.Element("div",{class:"TNRWarning"}).inject(d),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert "}).inject(n)),l.setHTML(t).inject(n)},getSelectedItemsIds:function(){return s}}}})),define("DS/DELPPWViewBehaviors/RefreshBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","DocumentPlugin"],creator:function(t,n,i,o,r){var a,s=function(){var t=o.getNLSValue("View."+n.getId()+".Title"),i=a.getRoots(),r=n.getBehavior("TreeListViewBehavior"),s={action:[],parameters:[]};a.emptyNodeModel(),e.is(i,"array")&&i.length>0&&(i.forEach((function(e,t){s.action[t]="addRoot",s.parameters[t]={rootReferencePID:e}})),r.processDropEffect(s).then((function(){n.notify("onRefreshedAll",[i]),n.info(o.getNLSValue("RefreshAll.Success",{view:t}))})).catch((function(){n.warn(o.getNLSValue("RefreshAll.Failure",{view:t}))})))},l=function(t){var s,l,u,c,d,g,f,p={noTimeout:!0},h=!(!e.is(t)||!e.is(t.impactedChildren)),m=function(t){var n=e.clone(t.impactedChildren),i=e.clone(t.impactedObjects);a.withTransactionUpdate((function(){n.forEach((function(e){a.updateNode(e,{loadChildren:!0})})),i.forEach((function(e){a.updateNode(e)}))}))};if(h)u=e.clone(t);else{l=a.getSelectedNodesInfo();let t=n.getBehavior("ProductImplementBehavior");if(s=l.map((function(e){return e.id})),e.is(t)&&(c=l.map((function(e){return t.getPathToScope(e.absPath)}))),s.length<1)return}n.notify("startProgress",p),h?(m(u),n.notify("stopProgress",p)):((u={impactedChildren:[],impactedObjects:[]}).impactedChildren=(d=[],g=[],f=[],s.forEach((function(t){var n=i.getReferenceModel(t);(function e(t){var n=i.getInstancesFromCollection(t);-1===d.indexOf(t)&&d.unshift(t),g=g.concat(n),n.forEach((function(t){var n,o=t.get("PID"),r=i.getReferenceModel(o);n=i.getImpacted(o,!1,{onlyInstanceRelations:!0}),f=f.concat(n),e(r.get("PID")),r.setAdditionalInfo({queriedForChildren:!1})}))})(t),i.getImpacted(t).forEach((function(e){f.push(e)})),e.is(r)&&r.removeDocumentConnections(t),n.setAdditionalInfo({queriedForDocuments:!1,queriedForChildren:!1,queriedForConnections:!1})})),i.removeInstance(g,{silent:!0}),i.removeConnection(f,{silent:!0}),n.notify("instanceRemoved",[g]),n.notify("connectionRemoved",[f]),d),i.getDescendantsFromServer(s,(function(t){m(u),h||(n.notify("connectionAdded",[t.connections,{loadRelatedobjectsToView:!1}]),n.notify("connectionAddedInvokeBI",[t.connections]),n.notify("refreshImpacted",[u]),n.notify("refreshSwimLaneChart")),n.info(o.getNLSValue("RefreshSelected.Success",{view:o.getNLSValue("View."+n.getId()+".Title")})),e.is(n.getId())&&"EBOM"===n.getId()&&n.info(o.getNLSValue("Refresh.ItemView.Message")),n.notify("stopProgress",p)}),{fetchInverseRelations:!0,forceDBMode:!0,silentMode:!0,upperScopedPath:c,includeXcadDrawings:n.getPreferenceValue("includeXcadDrawingsInEBOMView")}))};return{listenTo:function(){return{refreshAll:s,RefreshCmd:l,refreshImpacted:l}},onStart:function(){a=n.getBehavior("WUXNodeModelBehavior")},onStop:function(){},onRefreshSelected:l}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu",["UWA/Core"],(function(e){"use strict";return function(t,n,i,o,r,a,s,l,u,c,d,g,f,p){const h=function(e,t){this.rirPath=e,this.isVisible=t},m=["DELConstructionWorkElementLength","DELConstructionWorkElementArea"];var I,y,b,D,v,C=i.getComponent("WUXCommandsManager"),P=new Set(["CreateAssemblyAndScopeAltSubst","CreateProvideAndScopeAltSubst","CreateMaterialAndScopeAltSubst","CreateKitAndScopeAltSubst","CreateContinuousProvidedMaterialAndScopeAltSubst","CreateServiceAttachingAndScopeAltSubst","CreateServiceSpareAndScopeAltSubst"]),R=new Set(["CreateAssemblyAndResultingProductAltSubst","CreateProvideAndResultingProductAltSubst","CreateMaterialAndResultingProductAltSubst","CreateKitAndResultingProductAltSubst","CreateServiceAttachingAndResultingProductAltSubst","CreateServiceSpareAndSResultingProductAltSubst"]);const A=["DELWkiAlertReference","DELWkiInstructionReference","DELWkiSignOffReference","DELWkiAlertWarningReference","DELWkiAlertCautionReference","DELWkiAlertNoteReference"];return localStorage.setItem("isExploreWebAppEnabled","false"),D=function(i,o){var a,l,u,c,g,m,I,y,b=[],D=[];switch(o=o||{},l=n.getAppContext(),i){case"EditInstruction":"DELWkiDataCollectPlanReference"===o.selectedNodes[0].getReferenceType()?n.notify("editDataCollectPlan",{WKIModel:o.infos.objectToBeModified,instancePID:o.selectedNodes[0].getInstancePID(),state:!0}):"DELWkiDataCollectChecklistReference"===o.selectedNodes[0].getReferenceType()?n.notify("editDataCollectChecklist",{WKIModel:o.infos.objectToBeModified,instancePID:o.selectedNodes[0].getInstancePID(),state:!0}):n.notify("editWorkInstruction",{WKIModel:o.infos.objectToBeModified,instancePID:o.selectedNodes[0].getInstancePID()});break;case"EditRichText":o.selectedNodes.forEach((function(e){b.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})})),n.notify("editRichText",[b]);break;case"EditResourceParameterPlan":c=t.isStarted("RPPMOD"),y={iRPPModel:o.infos.objectToBeModified,instancePID:o.selectedNodes[0].getInstancePID(),state:!0},c?n.notify("computeResourceParamPlan",y):n.notify("editResourceParameterPlan",y);break;case"EditDataCollectRow":n.notify("editDataCollectRow",{selectedRowMdl:o.infos.objectToBeModified,dcpPID:o.selectedNodes[0]._options.dataCollectPID});break;case"DeleteDataCollectRow":n.notify("deleteDataCollectRow");break;case"EditResourceParameterRow":n.notify("editResourceParameteRow",o.infos.objectToBeModified);break;case"DeleteResourceParameterRow":n.notify("deleteResourceParameterRow");break;case"Quantity":g={attribute:[{dataIndex:"V_ContQuantity",dicoType:"DELFmiContQuantity_Mass",entity:"instance",name:"DELFmiContQuantity_Mass.V_ContQuantity",nodeName:"DELFmiContQuantity_Mass.V_ContQuantity.instance"},{dataIndex:"V_ContQuantity",dicoType:"DELFmiContQuantity_Area",entity:"instance",name:"DELFmiContQuantity_Area.V_ContQuantity",nodeName:"DELFmiContQuantity_Area.V_ContQuantity.instance"},{dataIndex:"V_ContQuantity",dicoType:"DELFmiContQuantity_Length",entity:"instance",name:"DELFmiContQuantity_Length.V_ContQuantity",nodeName:"DELFmiContQuantity_Length.V_ContQuantity.instance"},{dataIndex:"V_ContQuantity",dicoType:"DELFmiContQuantity_Volume",entity:"instance",name:"DELFmiContQuantity_Volume.V_ContQuantity",nodeName:"DELFmiContQuantity_Volume.V_ContQuantity.instance"},{dataIndex:"V_ContQuantity",dicoType:"DELFmiRatioOfDiscreteQuantity",entity:"instance",name:"DELFmiRatioOfDiscreteQuantity.V_ContQuantity",nodeName:"DELFmiRatioOfDiscreteQuantity.V_ContQuantity.instance"}]},o.infos=r.getNodeAndColumnInfos(o.node,g),m=e.clone(o.infos.attributeInfo),e.is(m,"object")&&!e.owns(m,"Protection")&&(o.infos=r.getNodeAndColumnInfosForReference(o.node,g),m=e.clone(o.infos.attributeInfo)),m.Protection=1,o.infos.attributeInfo=m,o.selectedNodes.forEach((function(e){b.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})})),n.notify(i,[b,o.infos]);break;case"LoadIn3DViewer":case"LoadItemsIn3DViewer":I=o.selectedNodes[0],y={nodeId:I.getInstancePID()||I.getReferencePID(),absPath:I.getAbsolutePath()},n.notify(i,y);break;case"ReframeItemsIn3DViewer":I=o.selectedNodes[0],s.isProcess(I.getReferencePID())||s.isService(I.getReferencePID())?(I=o.selectedNodes[0],b.push(I.getRIRpath())):Array.isArray(u)||(u=[],(u=d.getAllScopedOrImplementedItems(I)).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)?b.push(e):s.findAllRIRPaths(e).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)&&b.push(e)}))}))),n.notify(i,[b]);break;case"HideShowIn3DViewer":o.selectedNodes.forEach((function(e){let t;t=0===f.get3DVisibilityState(e.getRIRpath()),y=new h(e.getRIRpath(),t),b.push(y)})),n.notify("compute3DVisibility",[b]);break;case"HideShowIn3D":let v;o.selectedNodes.forEach((function(e){v=0===p.get3DVisibilityState(e.getRIRpath()),b.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})})),v?n.notify("ShowIn3D",[b]):n.notify("HideIn3D",[b]);break;case"HideIn3DViewer":Array.isArray(u)||(u=[],o.selectedNodes.forEach((function(e){u=u.concat(d.getAllScopedOrImplementedItems(e))})),u.forEach((function(e){f.isAggregatingRootLoadedInViewer(e)?(y=new h(e,!1),b.push(y)):s.findAllRIRPaths(e).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)&&(y=new h(e,!1),b.push(y))}))}))),n.notify("compute3DVisibility",[b]);break;case"ShowIn3DViewer":Array.isArray(u)||(u=[],o.selectedNodes.forEach((function(e){u=u.concat(d.getAllScopedOrImplementedItems(e))})),u.forEach((function(e){f.isAggregatingRootLoadedInViewer(e)?b.push(e):s.findAllRIRPaths(e).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)&&b.push(e)}))}))),n.notify("computeShowItems3DVisibility",[b]);break;case"ShowOnlyIn3DViewerFromItems":I=o.selectedNodes[0],b.push(I.getRIRpath()),n.notify("computeShowOnly3DVisibility",[b]);break;case"ShowOnlyIn3DViewerFromRoutings":I=o.selectedNodes[0],Array.isArray(u)||(u=[],(u=d.getAllScopedOrImplementedItems(I)).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)?b.push(e):s.findAllRIRPaths(e).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)&&b.push(e)}))}))),n.notify("computeShowOnly3DVisibility",[b]);break;case"ShowAllIn3DViewer":I=o.selectedNodes[0],b.push(I.getRIRpath()),n.notify("computeShowAll3DVisibility",[b]);break;case"ShowOnlyIn3DFromItems":case"ShowOnlyIn3D":o.selectedNodes.forEach((function(e){b.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})})),n.notify("ShowOnlyIn3D",[b]);break;case"CreatePartialScopeOnHeaderOperation":n.notify("CreatePartialScopeLinkOnHeaderOperation",[o.node.getAbsolutePath()]);break;case"AddToAuxilliaryView":o.selectedNodes.forEach((function(e){D.push(e.options.referencePID)})),s.fetchRefList(D,e.merge({onComplete:function(t){e.is(t)&&e.is(t.instancesAndReferences,"array")&&t.instancesAndReferences.forEach((function(e){n.notify("addToAuxiliaryView",[e,{askAddToAuxConfirmation:!1}])}))}},{expandLevel:0,forceDBMode:!0,silentMode:!0}));break;case"AddToRoutingsView":case"AddToManufView":o.selectedNodes.forEach((function(e){D.push(e.options.referencePID)})),s.fetchRefList(D,e.merge({onComplete:function(t){e.is(t)&&e.is(t.instancesAndReferences,"array")&&n.notify("referenceAdded",[t.instancesAndReferences,null,{withLinksResolved:!0}])}},{expandLevel:0,forceDBMode:!0,silentMode:!0}));break;case"GenerateRecipeFromFBOM":n.notify("GenerateRecipeFromFBOM",[o.node.getReferencePID()]);break;case"ComputeResultingProduct":n.notify("ComputeResultingProduct",[o.node.getReferencePID()]);break;default:a=C.getCommand(i,l),e.is(a)?(a.beginExecute(o),a.execute({sourceModuleId:n.getId()}),a.endExecute()):(a=C.getCommandCheckHeader(i,l),e.is(a)&&!1===a.getState()?(a.options.node={referencePID:o.node.getReferencePID(),instancePID:o.node.getInstancePID(),absPath:o.node.getAbsolutePath()},a.toggleState()):(o.selectedNodes.forEach((function(e){b.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})})),n.notify(i,[b,o.infos])))}},I=function(t,n){const i=n.options,o=i.restrictLinkCreation,r=i.mfgReferenceId,a=!!e.is(i.isContextMfgRoot,"boolean")&&i.isContextMfgRoot;let s="enabled";return"AddMfgItemToMBOMAltSub"===t?e.is(r)||(s="disabled"):"ReplaceByAlternate"===t?e.is(r)&&!a||(s="disabled"):e.is(o,"string")&&("ResultingProduct"===o?P.has(t)&&(s="disabled"):R.has(t)&&(s="disabled")),s},function(){return{type:"SeparatorItem"}},v=function(e){return{type:"TitleItem",title:o.getNLSValue(e,null,"ContextMenu.Header","Title")}},y=function(t,i,g,h){var y,b,v,V,w,S,L,E,N,T,M,F,x,O=e.is(i)&&e.is(i.infos)?i.infos.objectToBeModified:null,B=e.is(O)?O.get("type"):"",U=e.is(O)&&"WORKINSTRUCTION"!==O.get("PPRTYPE");if(x=e.is(i)&&e.is(i.node)&&e.is(i.node.object)&&A.includes(i.node.object.type)||e.is(i)&&e.is(i.selectedNodes)&&e.is(i.selectedNodes[0])&&A.some((e=>u.isAKindOf(i.selectedNodes[0].getReferenceType(),e))),b="enabled",M=n.getAppContext(),e.is(t,"string"))w=t;else{if("object"!=typeof t)return void n.debug("Nodes should be an array of string or objects");e.is(t.text)&&e.is(t.command)&&(w=t.text,t=t.command)}if(v=o.getNLSValue(w,null,g,h),e.is(t))if("Refresh"===t&&l.isGroupingExist())b="disabled";else if("EditAttribute"===t)b="disabled","V_SequencingMode"===i.infos.dataIndex||r.isReadOnly(i.infos.attributeInfo,i.infos.attributeDef)||!r.doesAttributeExist(i.infos.objectToBeModified,i.infos.attributeName)&&!r.isAttrApplicableForType(i.infos.objectToBeModified,i.infos.attributeName)||("RichText"===i.column.displayType?b="disabled":i.column.attribute.length>1?1===i.selectedNodes.length&&(b="enabled"):i.column.dataIndex.contains("V_OOTBRole")?b="disabled":"isCoProduct"!==i.column.displayType&&(b="enabled"));else if("DELJobStatus"===t){if(!(a.isCreateMBOMv2()||a.isUpdateMBOMv2()||a.isResultingProductBatchEnabled()))return;b="enabled"}else if("Accountability"===t){if(!a.isBIPXPEnabled())return;b="enabled"}else if("CreateMfgItemStructure"===t){if(!a.isCreateMBOMv2())return;if(1===i.selectedNodes.length){const e=i.selectedNodes[0].getReferencePID();b=s.isProcess(e)||s.isService(e)||s.isConstruction(e)?"enabled":"disabled"}else b="disabled"}else if("UpdateMfgItemStructure"===t){if(!a.isUpdateMBOMv2())return;if(1===i.selectedNodes.length){const e=i.selectedNodes[0].getReferencePID();b=s.isProcess(e)||s.isService(e)||s.isConstruction(e)?"enabled":"disabled"}else b="disabled"}else if("HideIn3D"===t||"ShowIn3D"===t)b="enabled";else if("HideShowIn3D"===t){let e,t=!1,n=!1;for(S=i.selectedNodes,e=0;e<S.length;e++)if(p.isAggregatingRootLoadedInViewer(S[e].getRIRpath())){if(N=0!==p.get3DVisibilityState(S[e].getRIRpath()),e>0){if(n!==N){t=!1;break}}else 0===e&&(t=!0);n=N}b=t?"enabled":"disabled"}else if("ShowOnlyIn3D"===t||"ShowOnlyIn3DFromItems"===t)S=i.selectedNodes,b=1===S.length&&!S[0].isRoot(!0)&&p.isAggregatingRootLoadedInViewer(S[0].getRIRpath())?"enabled":"disabled";else if("ShowAllIn3D"===t)S=i.selectedNodes,b=1===S.length&&S[0].hasChildren()&&p.isAggregatingRootLoadedInViewer(S[0].getRIRpath())?"enabled":"disabled";else if("EditResourceParameterPlan"===t){if(1!==(S=i.selectedNodes).length||!s.isWorkInstruction(O)||"DELResourceParameterPlanReference"!==B)return;T="url("+o.getIconURLFromKey(B)+")",b="enabled"}else if("EditInstruction"===t){if(S=i.selectedNodes,x&&(v=o.getNLSValue("EditWorkInstruction",null,g,h)),1!==S.length||!s.isWorkInstruction(O)||"DELResourceParameterPlanReference"===B)return;T="url("+o.getIconURLFromKey(B)+")",b="enabled"}else if("EditRichText"===t){if(1!==(S=i.selectedNodes).length||!U)return;T="pen-lines",b="enabled"}else if("CreatePartialScopeOnHeaderOperation"===t){if(T="url("+o.getIconURLFromKey("PartialProcessImplementLink")+")",1!==(S=i.selectedNodes).length||S[0].isRoot())return;if(!u.isAKindOf(S[0].getReferenceType(),"DELLmiHeaderOperationReference"))return;F=d.canCreatePartialScopeLink(S[0].getAbsolutePath()),e.is(F.errorMessage)&&(b="disabled")}else if("EditDataCollectRow"===t)S=i.selectedNodes,b=1===S.length?"enabled":"disabled";else if("DeleteDataCollectRow"===t)b="enabled";else if(P.has(t)||R.has(t)||"AddMfgItemToMBOMAltSub"===t||"ReplaceByAlternate"===t)b=1===i.selectedNodes.length?I(t,i.selectedNodes[0]):"disabled";else if("Quantity"===t){S=i.selectedNodes;const t=i.node.object.type,n=m.includes(t);if(!e.is(S)||1!==S.length||S[0].isRoot()||n)return;b="enabled",T="url("+o.getIconURLFromKey("EditQuantity")+")"}else if("LoadIn3DViewer"===t||"LoadItemsIn3DViewer"===t){if(1===i.selectedNodes.length){let n=i.selectedNodes[0],o=!1;"LoadItemsIn3DViewer"===t?(o=d.isScoped(n.getReferencePID()),!o&&n.hasChildren()&&(o=n.getChildren(!0).some((function(e){return d.isScoped(e.getReferencePID())})))):(o=c.isScoped(n.getReferencePID()),e.is(o)&&!1===o&&(o=c.isPartialScoped(n.getReferencePID()))),b=o?"enabled":"disabled"}else b="disabled"}else if("ReframeIn3DViewer"===t)b=i.selectedNodes.length>1?"disabled":"enabled",(S=i.selectedNodes).every((function(e){!1===p.isAggregatingRootLoadedInViewer(e.getRIRpath())&&(b="disabled")}));else if("ReframeItemsIn3DViewer"===t)1===i.selectedNodes.length?(S=i.selectedNodes[0],s.isProcess(S.getReferencePID())||s.isService(S.getReferencePID())?b=f.isAggregatingRootLoadedInViewer(S.getRIRpath())?"enabled":"disabled":(Array.isArray(L)||(L=[],L=d.getAllScopedOrImplementedItems(S).filter((function(e){let t=!1;return f.isAggregatingRootLoadedInViewer(e)?t=!0:s.findAllRIRPaths(e).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)&&(t=!0)})),t}))),b=0===L.length?"disabled":"enabled")):b="disabled";else if("HideShowIn3DViewer"===t){let e=!1;N=(S=i.selectedNodes).every((function(t){return f.isAggregatingRootLoadedInViewer(t.getRIRpath())&&(e=0!==f.get3DVisibilityState(t.getRIRpath())),e})),E=S.every((function(t){return f.isAggregatingRootLoadedInViewer(t.getRIRpath())&&(e=0===f.get3DVisibilityState(t.getRIRpath())),e})),b=N||E?"enabled":"disabled"}else if("ShowIn3DViewer"===t||"HideIn3DViewer"===t)S=i.selectedNodes,Array.isArray(L)||(L=[],S.forEach((function(e){L=L.concat(d.getAllScopedOrImplementedItems(e).filter((function(e){let t=!1;return f.isAggregatingRootLoadedInViewer(e)?t=!0:s.findAllRIRPaths(e).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)&&(t=!0)})),t})))}))),b=L.length>0?"enabled":"disabled";else if("ShowOnlyIn3DViewerFromItems"===t)S=i.selectedNodes,b=1===S.length&&!S[0].isRoot(!0)&&f.isAggregatingRootLoadedInViewer(S[0].getRIRpath())?"enabled":"disabled";else if("ShowOnlyIn3DViewerFromRoutings"===t)1!==(S=i.selectedNodes).length||S[0].isRoot(!0)||!s.isSystem(S[0].getReferencePID())&&!s.isOperation(S[0].getReferencePID())?b="disabled":(Array.isArray(L)||(L=[],S.forEach((function(e){L=d.getAllScopedOrImplementedItems(e).filter((function(e){let t=!1;return f.isAggregatingRootLoadedInViewer(e)?t=!0:s.findAllRIRPaths(e).forEach((function(e){f.isAggregatingRootLoadedInViewer(e)&&(t=!0)})),t}))}))),b=L.length>0?"enabled":"disabled");else if("ShowAllIn3DViewer"===t)S=i.selectedNodes,b=1===S.length&&S[0].hasChildren()&&f.isAggregatingRootLoadedInViewer(S[0].getRIRpath())?"enabled":"disabled";else if("GenerateRecipeFromFBOM"===t)T="url("+o.getIconURLFromKey("GenerateRecipeFromFBOM")+")",S=i.selectedNodes,b=1===S.length&&S[0].isRoot(!0)&&u.isAKindOf(S[0].getReferenceType(),"Formulated_Product")?"enabled":"disabled";else if("ComputeResultingProduct"===t){if(S=i.selectedNodes,!a.isResultingProductBatchEnabled()||1!==S.length||"PROCESS"!==u.getPPRType(S[0].getReferenceType()))return;b="enabled"}else y=C.getCommand(t,M),e.is(y)||(y=C.getCommandCheckHeader(t,M)),e.is(y)&&(b=y.isEnabled()?"enabled":"disabled");return V=D.bind(null,t,i),{icon:e.is(T)?T:"url("+o.getIconURLFromKey(t)+")",type:"PushItem",title:v,label:v,sensitivity:b,state:b,callback:V,action:{callback:V}}},b=function(e){var t=!0;return"ExploreInWebApp"===e&&(t="true"===localStorage.getItem("isExploreWebAppEnabled")),["ExploreInWebApp"].indexOf(e)>-1&&a.isCloud()&&(t=!1),["GenerateRecipeFromFBOM"].indexOf(e)>-1&&!a.isCloud()&&(t=!1),t},{getDefaultContextualMenu:function(){return["showAuxiliaryView","ProcessView","ItemsView","ResourcesView"]},buildContextualMenu:function(t,i,r,a){var s=[];return r=r||"Cmd",a=a||"Title",e.is(t,"array")?(t.forEach((function(t){var l,u,c,d=[];if(e.is(t,"object")&&e.is(t.groupName)){if("GroupBy"===t.groupName&&e.is(i.params)&&(c={insertRow:!1,expandCollapse:!1,pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!1,filter:!0},l=i.params.collectionView.buildDefaultContextualMenu(i.params,c),e.is(l[0])&&s.push(l[0])),"3DViewer"===t.groupName&&!g.isOpsViewerWidgetLinked())return;if("InsertObject"===t.groupName&&Array.isArray(t.insertCommands)&&(t.insertCommands.forEach((function(t){var n;"SEPARATOR"===t?n={type:"SeparatorItem"}:e.is(t,"object")&&e.is(t.headerName)?d.push(v(t.headerName)):n=y(t,i,r,a),e.is(n)&&d.push(n)})),u=o.getNLSValue(t.groupName,null,r,a),l=0===(d=(d=d.filter((function(e){return"TitleItem"===e.type||"enabled"===e.state}))).filter((function(t,n){let i=!1;return i=!("TitleItem"!==t.type||!e.is(d[n+1])||"TitleItem"===d[n+1].type)||"PushItem"===t.type,i}))).length?{icon:"url("+o.getIconURLFromKey(t.groupName)+")",type:"PushItem",title:u,label:u,state:"disabled"}:{icon:"url("+o.getIconURLFromKey(t.groupName)+")",type:"PushItem",title:u,label:u,state:"enabled",submenu:d},s.push(l)),!Array.isArray(t.commands))return n.debug('"commands" in a group should be an array'),null;t.commands.forEach((function(t){var n;n="SEPARATOR"===t?{type:"SeparatorItem"}:y(t,i,r,a),e.is(n)&&d.push(n)})),u=o.getNLSValue(t.groupName,null,r,a),l={icon:"url("+o.getIconURLFromKey(t.groupName)+")",type:"PushItem",title:u,label:u,state:"enabled",submenu:d},s.push(l)}else e.is(t,"object")&&e.is(t.headerName)?s.push(v(t.headerName)):e.is(t,"string")&&"SEPARATOR"===t?s.push({type:"SeparatorItem"}):b(t)&&(l=y(t,i,r,a),e.is(l)&&s.push(l))}),this),s):(n.debug("Nodes should be an array"),null)},onContextMenuCallback:function(e,t){return D(e,t)}}}})),define("DS/DELPPWViewBehaviors/DropZoneViewBehavior/DropZoneViewBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin"],creator:function(t,n,i,o){var r=null,a=null,s="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",l="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-plus",u={DROPHERE:1,PLUS:2};return{onStart:function(){var e,t,s;s=o.getComponent("Element"),a=new s("div",{class:"drop-zone-container"}),(r=new s("div",{class:"dropLayer"}))&&(e=new s("div",{class:"mfndnd_invite_container"}).inject(r))?(t=new s("div",{class:"mfndnd_invite_display",draggable:!1}).inject(e),new s("i",{class:"mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",draggable:"false"}).inject(t),new s("h5",{class:"font-3dsregular",text:i.getNLSValue("DragDrop.DropHere.Title")}).inject(t),r.inject(a)):n.debug("Could not create droplayer")},onStop:function(){e.is(a)&&(a.destroy(),a=void 0)},getContent:function(){if(a)return a},hide:function(){r?r.hide():n.debug("No container")},show:function(){r?r.show():n.debug("No container")},isVisible:function(){var e=!1;return r&&(e="none"!==r.getStyle("display")),e},setIcon:function(t){var o,r,a,c;if(c=function(e,t,n){r.removeClassName(e),r.addClassName(t),a.setHTML(i.getNLSValue(n))},o=this.getContent(),e.is(o)&&(r=o.getElement(".mfndnd_invite_img"),a=o.getElement(".font-3dsregular"),e.is(r)&&e.is(a)))switch(t){case u.DROPHERE:c(l,s,"DragDrop.DropHere.Title");break;case u.PLUS:c(s,l,"DragDrop.AddObjectInContext.Title");break;default:n.debug("wrong option")}this.show()},iconEnum:u}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/LockColumnManager",["UWA/Core"],(function(e){"use strict";return function(t){var n,i,o,r,a,s,l,u;const c=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},d=c("ResourcePlugin"),g=c("AttributePlugin"),f=c("TreeViewPlugin"),p={"reserved.reference":{TRUE:{command:"ActionBar_UnreserveCmd",nls:d.getNLSValue("Cmd.RefLock.Title")},FALSE:{command:"ActionBar_ReserveCmd",nls:d.getNLSValue("Cmd.RefUnlock.Title")}},"reserved.instance":{TRUE:{command:"ActionBar_UnreserveCmd",nls:d.getNLSValue("Cmd.InstLock.Title")},FALSE:{command:"ActionBar_ReserveCmd",nls:d.getNLSValue("Cmd.InstUnlock.Title")}}};return o=function(t){var n,i,o,r,a=!1;return o=t.nodeModel,r=this.getTreeDocument(),e.is(o)&&e.is(r)&&(a=r.isGroupingNodeModel(o)),a||(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.nodeName)),!!e.is(i)},n=function(t){var n,i,o,r,a,s;return o=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(o.attribute.nodeName),e.is(i)&&(r=p[o.attribute.nodeName],l&&("reserved.reference"===o.attribute.nodeName?s={id:t.nodeModel.getReferencePID(),entity:"reference",value:i}:"reserved.instance"===o.attribute.nodeName&&(s={id:t.nodeModel.getInstancePID(),entity:"instance",value:i}),a=r[i].command,n=f.executeRefInstCommand.bind(this,a,s))),n},i=function(t){var n,i,o,r={};return i=this.getColumnOrGroup(t.columnID),e.is(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(i.attribute.nodeName),e.is(n)&&(r={icon:{iconName:o="TRUE"===n?"key":"lock-open",fontIconFamily:WUXManagedFontIcons.Font3DS,className:o+"-lockColumnIcon"},alignment:"center"})),r},r=function(t,n){var i,o,r;return r=this.getColumnOrGroup(n),i=t.nodeModel.getAttributeValue(r.attribute.nodeName),e.is(i)&&(o=p[r.attribute.nodeName][i].nls),o},a=function(e){var t,n,i,o=!1;if(e.rowID<0)t=e.cellModel;else{n=this.getColumnOrGroup(e.columnID),o=this.getTreeDocument().isGroupingNodeModel(e.nodeModel);let r=e.nodeModel.getAttributeValue(n.attribute.nodeName);i=p[n.attribute.nodeName],t=!o&&i[r]?i[r].nls:""}return t},s=function(t,n){var i,o,r;return r=this.getColumnOrGroup(t),i=n.getAttributeValue(r.attribute.nodeName),e.is(i)&&(o=p[r.attribute.nodeName][i].nls),o},u=function(t){var n={longHelp:""},i=(t.cellModel,t.cellView.collectionView.getColumnOrGroup(t.columnID)),o=g.getAttributeInfoFromColumn(i);if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader&&e.is(t.nodeModel)&&!e.is(t.nodeModel.getReferencePID))return n;if(!t.isHeader&&e.is(t.cellModel)){if("instance"===i.attribute.entity){let e;e="TRUE"===t.nodeModel.getAttributeValue(o.attributeNodeName)?"Cmd.InstLock.Title":"Cmd.InstUnlock.Title",n.longHelp=d.getNLSValue(e)}else if("reference"===i.attribute.entity){let e;e="TRUE"===t.nodeModel.getAttributeValue(o.attributeNodeName)?"Cmd.RefLock.Title":"Cmd.RefUnlock.Title",n.longHelp=d.getNLSValue(e)}}else n.longHelp=t.cellModel;return n},{displayType:"Lock",isSupportedColumn:function(t){return!!e.is(p[t.attribute.nodeName])},updateColumnInfos:function(t,c,d){return c=c||{},d=d||{},l=!e.is(d.isViewEditable,"boolean")||d.isViewEditable,t.editableFlag=!1,t.getCellValue=n,t.hasCellValue=o,t.getCellGroupingKey=r,t.getCellValueForExport=a,t.typeRepresentation="functionIcon",t.getCellSemantics=i,t.getCellTooltip=u,!!(!e.is(d.isViewFilterable,"boolean")||d.isViewFilterable)&&(!e.is(c.isFilterable)||c.isFilterable)&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:s}}),t}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop",["UWA/Core","UWA/Class/Promise","UWA/Utils/InterCom"],(function(e,t,n){"use strict";return function(i,o,r,a,s,l,u){var c,d,g,f=null,p=function(t){var n="";return e.is(t)&&(n=e.is(t.get)?t.get("PPRTYPE"):e.is(t["ds6w:type_value"])?s.getPPRType(t["ds6w:type_value"]):e.is(t,"string")?s.getPPRType(t):(t=a.getReference(t.referenceID)).get("PPRTYPE")),n},h=function(t){var n=p(t),i=c.acceptedTypes;return!e.is(i)||-1!==i.indexOf(n)},m=function(e){return a.getLastElementInstanceInfoPID(e,"isAggregatedBy")},I=function(e){return a.getLastElementInstanceInfoPID(e,"isInstanceOf")},y=function(t){var n=null;return e.is(t)&&(e.is(t.instancePIDsArray,"array")&&t.instancePIDsArray.length>0&&(n=I(t.instancePIDsArray)),n||(n=a.isValidPID(t.rootReferencePID)?t.rootReferencePID:null)),n},b=function(t){var n=null;return e.is(t)&&(n=e.is(t.targetInstancePIDsArray,"array")&&t.targetInstancePIDsArray.length>0?I(t.targetInstancePIDsArray):a.isValidPID(t.targetRootReferencePID)?t.targetRootReferencePID:null),n},D=function(t,n){var i=o.getBehavior("DropZoneViewBehavior"),r=o.getBehavior("WUXNodeModelBehavior");e.is(i)&&(i.setIcon(t),e.is(r)&&(!0!==n||r.isDocumentEmpty()||i.hide()))},v=function(t){var n={action:new Array(t.draggedItems.length),parameters:new Array(t.draggedItems.length),message:new Array(t.draggedItems.length),dragNDropInfo:t},l=o.getBehavior("DropZoneViewBehavior"),u={parameters:null,message:null},c={createLink:null,createLinkOrInstance:null,addCA:null,addRoot:null,reOrderRoot:null,reOrder:null,reParent:null},d=function(e,t){var n=Array.isArray(i.getConfig().unAuthorizedTypes)?i.getConfig().unAuthorizedTypes:[];return!(n.indexOf(s.getPPRType(e))>-1&&n.indexOf(s.getPPRType(t))>-1)},g=function(n){var i=!1;return a.isValidPID(t.draggedItems[n].rootReferencePID)&&!e.is(a.getLastElement(t.draggedItems[n].instancePIDsArray))&&(i=!0),i},f=function(e){var n=!1,i=null,o=null;return g(e)||(i=m(t.draggedItems[e].instancePIDsArray),o=m(t.targetInstancePIDsArray),a.isValidPID(i)&&a.isValidPID(o)&&i===o&&(n=!0)),n},p=function(i){var o=!1,l=e.is(t.targetInstanceSiblingPID,"array")?t.targetInstanceSiblingPID:[],u=t.draggedItems[i],g=-1,p=a.getLastElement(u.instancePIDsArray),m=null,I=!1,y=t.draggedItems[i].type,b=s.getPPRType(y);return t.info.fromSameSource&&f(i)&&h(y)&&(s.isReorderPossible(b)?d(t.targetType,y)?(-1!==(g=l.indexOf(p))&&l.splice(g,1),e.is(c.reOrder,"number")?(n.action[i]="aggregatedAction",n.parameters[i]=c.reOrder,n.message[i]=null,e.is(n.parameters[c.reOrder])&&!n.parameters[c.reOrder].isTargetIdDragged&&(n.parameters[c.reOrder].movedInstancePID.push(p),n.parameters[c.reOrder].newChildrenPID=l)):(I=function(){var n=e.is(t.draggedItems,"array")?t.draggedItems:[],i=a.getLastElement(t.targetInstancePIDsArray);return-1!==n.findIndex((function(e){return a.getLastElement(e.instancePIDsArray)===i}))}(),I?n.action[i]="aggregatedAction":(m=a.getLastElement(t.targetInstancePIDsArray),n.action[i]="reorder"),n.parameters[i]={movedInstancePID:[p],newChildrenPID:l,targetInstancePID:m,dropPosition:t.info.dropPosition,isTargetIdDragged:I},n.message[i]=null,c.reOrder=i),o=!0):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed")):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.ReOrderRestricted",{objectName:s.getPPRType(y)}))),o};return t.draggedItems.forEach((function(i,I){n.action[I]="error",n.parameters[I]=null,n.message[I]=null,function(i){var o=!1,s=null;return"middle"===t.info.dropPosition&&(t.targetRootReferencePID===t.draggedItems[i].rootReferencePID&&a.arrayCompare(t.draggedItems[i].instancePIDsArray,t.targetInstancePIDsArray)?(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.SameObject")):d(t.targetType,t.draggedItems[i].type)?(s="createLinkOrInstance",u.parameters={rootReferencePID:t.draggedItems[i].rootReferencePID,referencePID:y(t.draggedItems[i]),targetReferencePID:b(t),instancePID:a.getLastElement(t.draggedItems[i].instancePIDsArray),targetRootReferencePID:t.targetRootReferencePID,targetInstancePID:a.getLastElement(t.targetInstancePIDsArray),allowMove:t.info.fromSameSource&&"middle"===t.info.dropPosition,instancePIDsArray:t.draggedItems[i].instancePIDsArray,targetInstancePIDsArray:t.targetInstancePIDsArray,path:Array.isArray(t.path)?t.path:[]},e.is(c[s],"number")?(n.action[i]="aggregatedAction",n.parameters[i]=c[s],n.message[i]=null,n.parameters[c[s]].push(u.parameters)):(n.action[i]=s,n.parameters[i]=[u.parameters],n.message[i]=null,c[s]=i),o=!0):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed"))),o}(I)||function(e){var i=!1;return a.isValidPID(t.targetRootReferencePID)||"Change Action"===t.draggedItems[e].type&&(n.action[e]="addChangeAction",n.parameters[e]={rootReferencePID:t.draggedItems[e].rootReferencePID},n.message[e]=null,i=!0),i}(I)||function(e){var i=!1;return a.isValidPID(t.targetRootReferencePID)||"PPRContext"===t.draggedItems[e].type&&(n.action[e]="addPPRContext",n.parameters[e]={rootReferencePID:t.draggedItems[e].rootReferencePID},n.message[e]=null,i=!0),i}(I)||function(i){var o=!1;return a.isValidPID(t.targetRootReferencePID)?(D(l.iconEnum.DROPHERE,!0),n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAuthorized")):(u.parameters={PIDsToAddRoot:[y(t.draggedItems[i])]},e.is(c.addRoot,"number")?(n.action[i]="aggregatedAction",n.parameters[i]=c.addRoot,n.message[i]=null,e.is(n.parameters[c.addRoot])&&n.parameters[c.addRoot].PIDsToAddRoot.push(y(t.draggedItems[i]))):(n.action[i]="addRoot",n.parameters[i]=u.parameters,n.message[i]=null,c.addRoot=i),o=!0),o}(I)||function(e){var i=!1;return g(e)&&t.info.fromSameSource&&h(t.draggedItems[e].type)&&(n.action[e]="reorderRoots",n.parameters[e]={rootReferencePID:y(t.draggedItems[e]),targetRootReferencePID:t.targetRootReferencePID,position:t.info.dropPosition},n.message[e]=null,i=!0),i}(I)||p(I)||function(i){var l=!1,g=t.info.wuxLocalID,p=t.draggedItems[i].instancePIDsArray,I=a.getLastElement(p),y=m(t.targetInstancePIDsArray),b=e.is(t.targetInstanceSiblingPID,"array")?t.targetInstanceSiblingPID.slice(0):[],D=a.getReferenceModel(y),v=a.getReferenceModel(I),C=t.draggedItems[i].type,P=s.getPPRType(C);const{isInstancePossible:R,errorMessage:A}=a.computeIsInstancePossible(D,v);return o.debug(A),t.info.fromSameSource&&"middle"!==t.info.dropPosition&&!f(i)&&a.isValidPID(y)&&h(C)&&R&&(s.isReparentPossible(P)?d(t.targetType,C)?a.isWorkInstruction(v)?(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.ReparentWorkInstruction")):("bottom"===t.info.dropPosition&&g++,b.splice(g,0,null),u.parameters={instancesPIDsToReparent:[I],formerInstancesParentPIDs:[m(p)],newParentPID:y,newParentInstancesOrder:b},e.is(c.reParent,"number")?(n.action[i]="aggregatedAction",n.parameters[i]=c.reParent,n.message[i]=null,e.is(n.parameters[c.reParent])&&(n.parameters[c.reParent].instancesPIDsToReparent.push(I),n.parameters[c.reParent].formerInstancesParentPIDs.push(u.parameters.formerInstancesParentPIDs[0]),n.parameters[c.reParent].newParentInstancesOrder.splice(g,0,null))):(n.action[i]="reparent",n.parameters[i]=u.parameters,n.message[i]=null,c.reParent=i),l=!0):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed")):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.MoveInstanceRestricted",{objectName:s.getPPRType(C)}))),l}(I)||o.debug("AbstractDragAndDropManager.InternalError")}),this),n},C=function(e){return e.preventDefault(),!0},P=function(e){return e.some((function(e){const t=e.object.type;return s.isReferencesHasReadOnlyType(t)}))},R=function(t){var n,i,o,r=[];if(e.is(t,"object"))return n=t.targetType,e.owns(t,"draggedItems")&&Array.isArray(t.draggedItems)&&t.draggedItems.length>0&&(r=t.draggedItems.reduce((function(t,r){return e.owns(r,"isManufacturable")&&"FALSE"===r.isManufacturable&&(i=r.type,"PROCESS"!==s.getPPRType(n)&&"CONSTRUCTION"!==s.getPPRType(n)&&"SERVICE"!==s.getPPRType(n)||"PRODUCT"!==s.getPPRType(i)||(o=y(r),e.is(o)&&t.push(a.getReferenceModel(o)))),t}),[])),r},A=function(t,n){var i=o.getBehavior("UXFactoryBehavior"),s=r.getNLSValue("NON-BOM.Confirmation.Title"),l=r.getNLSValue("NON-BOM.Confirmation.Message"),u=[];for(let e=0;e<t.length;e++)u.push(a.getDisplayName(t[e]));i.showConfirmation(s,l,{displayNames:u,models:t},(function(t){e.is(t,"boolean")&&t&&n()}))};return{init:function(t){var n=this;c=t||{},e.is(c.dropZone)&&(c.dropZone.addEventListener("drop",(function(e){e.preventDefault(),n.onTreeListViewDrop(e)})),c.dropZone.addEventListener("dragover",(function(e){e.preventDefault()})))},isAcceptedType:function(e){return h(e)},getDraggedReferencePID:function(e){return y(e)},getDDBehavior:function(){var e=this;return{onDragStartCell:e.onDragStartCell,onDragStartRowHeader:e.onDragStartCell,onDragEndCell:e.onDragEndCell,onDragEnterRowHeader:e.onDragEnterRowHeader,onDragLeaveRowHeader:e.onDragLeaveRowHeader,onDragEnterColumnHeader:e.onDragEnterColumnHeader,onDragLeaveColumnHeader:e.onDragLeaveColumnHeader.bind(this),onDragEnterCell:e.onDragEnterCell,onDragLeaveCell:e.onDragLeaveCell,onDropCell:e.onDropCell.bind(this),onDropRowHeader:e.onDropCell.bind(this),onDragEnterBlank:e.onDragEnterBlank,onDragLeaveBlank:e.onDragLeaveBlank,onDropBlank:e.onDropBlank.bind(this),onDropColumnHeader:e.onDropColumnHeader.bind(this),onDragOverRowHeader:C,onDragOverCell:C,onDragOverBlank:C,onDragOverColumnHeader:C}},processRootDrop:function(n,i,s,l,u,d,g){var f,m,I=!1,y=o.getBehavior("WUXNodeModelBehavior"),b=r.getNLSValue(o.getId()),v=r.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:b}),C=r.getNLSValue("AbstractDragAndDropManager.AddRoot.Error",{view:b}),P=o.getBehavior("DropZoneViewBehavior"),R=function(t,n,s,l){var d,g,f,v={},R=n||{},A=o.getBehavior("WUXNodeModelBehavior"),V=function(){o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!0}),o.warn(C,m,"failed"),l()},w=function(t){var n=r.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{objectName:a.getDisplayName(t),view:b});o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!0}),o.log(n,m,"completed"),null!==u?(f=o.getBehavior("ExpandFilterBehavior"),e.is(f)?f.applyFilter(u,s):(o.debug("Expand filter behavior is not available on this module"),s())):s()},S=!!e.is(R.forceDBMode,"boolean")&&R.forceDBMode,L=!!e.is(R.forceIndexMode,"boolean")&&R.forceIndexMode;t=e.is(t,"array")?t:[t],A.prepareUpdate(),t.forEach((function(t){var n,a,u;n=t,g=e.is(y)?y.validate(n):null,e.is(g)?(e.is(P)&&D(P.iconEnum.DROPHERE,!0),v[g.param]=g.paramValue,d=r.getNLSValue(g.key,v,"ValidationError"),o.log(d,m),l()):e.is(y)&&h(t)?(o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!1}),y.addNode(t,{onAddToTreeListFail:V,onAddToTreeListComplete:w,forceDBMode:S,forceIndexMode:L})):e.is(i)&&i&&(a=p(t),u=e.is(c.pprTypesWithSupportedViews)?c.pprTypesWithSupportedViews:[],!e.is(u)||-1!==u.indexOf(a))?(o.notify("referenceAdded",[t]),s()):(I=!0,o.notify("addToAuxiliaryView",[t]),s())})),I&&(o.info(r.getNLSValue("AbstractDragAndDropManager.RepositionAuxView")),e.is(P)&&D(P.iconEnum.DROPHERE,!0)),A.pushUpdate()},A=function(n,i){var s,l,u,c,f=[],p=[],h=[],m=[],I={modelsFetched:[]};if((i=i||{}).moduleID=o.getId(),e.is(i.modelsNotRetrieved)&&(I.modelsNotRetrieved=i.modelsNotRetrieved,l=(l=r.getNLSValue("AbstractDragAndDropManager.ObjectsNotRetrieved")).replace("%n",i.modelsNotRetrieved.length),o.warn(l)),e.is(i.modelsFromForceDB)&&(p=i.modelsFromForceDB),(n=e.is(n,"array")?n:[n]).forEach((function(n){p.indexOf(n.get("PID"))>-1?(h.push(n),e.is(I.modelsFromForceDB)||(I.modelsFromForceDB=[]),I.modelsFromForceDB.push(n.get("PID"))):(s=new t((function(e,t){R(n,i,e,t)})),f.push(s)),I.modelsFetched.push(n.get("PID"))})),h.length>0){u=o.getBehavior("UXFactoryBehavior"),c=r.getNLSValue("AbstractDragAndDropManager.indexOrDBDialog"),l=r.getNLSValue("AbstractDragAndDropManager.RootsNotInIndex");for(let e=0;e<h.length;e++)m.push(a.getDisplayName(h[e]));u.showConfirmation(c,l,{displayNames:m,models:h},(function(n){e.is(n,"boolean")&&n&&(s=new t((function(e,t){R(h,i,e,t)})),f.push(s))}))}t.all(f).then((function(){d(I)}),(function(){g(I)}))};m=o.log(v),f=a.getReferencesFromArray(n),n.length!==f.length?f=a.fetchRoot(n,{onComplete:A,onFailure:function(){o.warn(r.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),m),o.debug("Failed to fetch refernce for PID: "+n),g()},context:this,silent:!0}):A(f)},retrieveItems:function(t){var n,i,r,a,s,l=[],u="",c=["text/searchitems","text/plain","Text"];if(!e.is(t))return o.debug("ERROR: No dropped item found"),l;for(r=e.is(t.dataTransfer.types.indexOf,"function")?"indexOf":"contains",a=0;a<c.length&&""===u;a++)s=t.dataTransfer.types[r](c[a]),(e.is(s,"number")&&s>=0||e.is(s,"boolean")&&!0===s)&&(u=c[a]);if(""===u)return o.debug("ERROR: No data retrieved"),l;n=t.dataTransfer.getData(u);try{i=e.Json.decode(n)}catch(e){return o.debug(e),l}return e.is(i)?e.is(i.data)?e.is(i.data.items,"array")?i.data.items:(o.debug("ERROR: Items is not an array"),l):(o.debug("ERROR: No data retrieved"),l):(o.debug("ERROR: Parsing returned null"),l)},onDragStartCell:function(t,n){var u,c,d,g=[],f=n.nodeModel,p=widget.data,h=l.get3DSpaceServiceName(),m=o.getBehavior("WUXNodeModelBehavior"),I=o.getBehavior("ExpandFilterBehavior"),y={widgetId:widget.id,appId:p.x3dSharedId};return e.is(I)&&e.is(I.getFilterProxy())?(u=I.getFilterProxy())&&u.getCtxForSharing&&(y=u.getCtxForSharing()):e.is(f)&&"VPMReference"===f.getReferenceType()&&(y.appId="EBOM_"+i.getConfig().appContext.widget.getId()),c={protocol:"3DXContent",version:"1.1",source:i.getConfig().appId,widgetId:widget.id,data:{items:[]},biProxyCtx:y},d={properties:[function(){return{property:"envId",value:l.getPlatformID({serviceId:h})}},function(){return{property:"serviceId",value:h}},function(){return{property:"contextId",value:p.Credentials}},function(){return{property:"objectId",value:e.is(this.getReferencePID)?this.getReferencePID():null}},function(){var t=null;return{property:"objectType",value:t=e.is(this.object)&&e.is(this.object.defType)?this.object.defType:e.is(t)?t:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"secondaryObjectType",value:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:e.is(this.getReferenceType)?r.getNLSValue(this.getReferenceType(),null,"Type"):null}},function(){var t,n,i,o=[];if(e.is(this.getRIRpath))for(t=this.getRIRpath(),Array.isArray(t)&&0===t.length&&t.push(this.getReferencePID()),i=0;i<t.length;i++)n=i%2==1?a.getInstance(t[i]):a.getReference(t[i]),o.push({resourceid:t[i],type:n.get("type")});return{property:"path",value:o}},function(){var t,n=this.options.grid;return e.is(this.getReferenceType,"function")&&"PRODUCT"===s.getPPRType(this.getReferenceType())&&e.owns(n,"VPMReference.V_IsManufacturable.reference")&&(t=n["VPMReference.V_IsManufacturable.reference"]),{property:"isManufacturable",value:t}}]},f.isSelected()||f.select(),n.cellView.collectionView.getTreeDocument().getXSO().get().forEach((function(t){e.is(m)&&!m.isFakeNodeModel(t)&&g.push(t.dump(d))})),c.data.items=g,t.dataTransfer.setData("Text",JSON.stringify(c)),t.dataTransfer.effectAllowed="copyMove",!1},getDragNDropInfo:function(t,n){var i,o,r,s={draggedItems:[],info:{fromWUX:!1,dropPosition:null,fromSameSource:!1},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};return e.is(t)&&e.is(t.dataTransfer)&&e.is(t.dataTransfer.getData,"function")&&(o=t.dataTransfer.getData("Text"),e.is(o,"string")&&o.length>0&&(r=JSON.parse(o),e.is(r)&&e.is(r.widgetId,"string")&&(s.info.fromSameSource=r.widgetId===widget.id,e.is(r.data.items,"array")&&r.data.items.length>0&&(s.info.fromManageCapableResource=!!e.is(r.data.items[0].linkId))))),e.is(n)&&e.is(n.nodeModel,"object")&&e.is(n.dropPosition)&&(s.info.fromWUX=!0,s.info.dropPosition=n.dropPosition,s.targetTreeNodeModel=n.nodeModel,e.is(n.nodeModel.isDummyNode)&&(s.fromGroupingView=!0)),e.is(n)&&e.is(n.loadObjectsInOwnView)&&(s.info.loadObjectsInOwnView=n.loadObjectsInOwnView),e.is(r.biProxyCtx)&&(s.ctx={},s.ctx.biProxyCtx=r.biProxyCtx,s.ctx.objIds=[],r.data.items.forEach((function(e){s.ctx.objIds.push(e.objectId)}))),i=this.retrieveItems(t),e.is(i,"array")&&(i.forEach((function(t){var n,i={};e.is(t)&&(i.rootReferencePID=e.is(t.objectId)?t.objectId:null,i.instancePIDsArray=e.is(t.path,"array")?a.transformRIRToAbsolutePath(t.path):null,i.name=e.is(t.displayName,"string")?t.displayName:null,i.type=e.is(t.referenceType,"string")?t.referenceType:e.is(t.secondaryObjectType)?t.secondaryObjectType:t.objectType,i.typeNLS=e.is(t.displayType,"string")||e.is(t.displayType)?t.displayType:null,i.securityContext=e.is(t.contextId,"string")?t.contextId:null,i.tenant=e.is(t.envId,"string")?t.envId:null,i.service=e.is(t.serviceId,"string")?t.serviceId:null,i.path=Array.isArray(t.path)?t.path:[],e.is(t.linkId)&&(i.linkPID=t.linkId,i.resourceAreaID=t.resourceAreaID,i.referencePID=e.is(t.objectId)?t.objectId:null,delete i.rootReferencePID),e.is(t.isManufacturable,"string")&&(i.isManufacturable=t.isManufacturable),e.is(i.instancePIDsArray,"array")&&i.instancePIDsArray.length>0&&(n=a.getInstance(i.instancePIDsArray[0]),e.is(n)&&(i.rootReferencePID=n.get("isAggregatedBy")))),s.draggedItems.push(i)})),e.is(s.targetTreeNodeModel)&&(e.is(s.targetTreeNodeModel.getRootPID,"function")&&(s.targetRootReferencePID=s.targetTreeNodeModel.getRootPID(),s.targetInstancePIDsArray=s.targetTreeNodeModel.getAbsolutePath(),s.targetInstanceSiblingPID=s.targetTreeNodeModel.getSiblingsPID(),s.targetType=s.targetTreeNodeModel.getReferenceType(),s.info.wuxLocalID=s.targetTreeNodeModel._localID),delete s.targetTreeNodeModel)),s},processDropEffect:function n(i){var c=this;return new t((function(d){var g=o.getBehavior("ModelBehavior"),f=null,p=o.getBehavior("WUXNodeModelBehavior"),m=o.getBehavior("DropZoneViewBehavior"),I=function(n){return new t((function(t,o){var r=i.parameters[n],a=e.is(r.PIDsToAddRoot)?r.PIDsToAddRoot:r.rootReferencePID,s=e.is(i.dragNDropInfo)&&e.is(i.dragNDropInfo.ctx)?i.dragNDropInfo.ctx:null,l=e.is(i.dragNDropInfo)&&e.is(i.dragNDropInfo.info.loadObjectsInOwnView)?i.dragNDropInfo.info.loadObjectsInOwnView:null;c.processRootDrop(a,l,n,i.action.length,s,t,o)}))},y=function(n){return new t((function(t){var s=(n||[{actionIndex:null}])[0].actionIndex,l=e.is(s,"number")?i.parameters[s]:null,u=e.is(l.PIDsToAddRoot)?l.PIDsToAddRoot:l.rootReferencePID,c=a.findConnections({from:u}),d=a.getInstancesFromCollection(u),g="AUXILIARY"===o.getId(),f=[],p=[];c.forEach((function(e){f.push(e.get("to"))})),d.forEach((function(e){f.push(e.get("isInstanceOf"))})),(p=a.getReferencesFromArray(f)).length>0?(p.forEach((function(e){g?o.notify("addToAuxiliaryView",[e,{loadRelatedobjectsToView:!1}]):o.notify("referenceAdded",[e,null,{loadRelatedobjectsToView:!1}])})),o.info(r.getNLSValue("AbstractDragAndDropManager.PPRContext.Success"))):o.warn(r.getNLSValue("AbstractDragAndDropManager.PPRContext.Empty")),e.is(m)&&D(m.iconEnum.DROPHERE,!0),t()}))},v=function(n){var i=t.reject(),a=e.is(n,"string")?n:r.getNLSValue("AbstractDragAndDropManager.InternalError");return o.warn(a),i},C=function(n){var o=e.is(i.parameters[n],"array")?i.parameters[n]:[i.parameters[n]],s=[];return o.forEach((function(i){var o=a.getReference(i.referencePID),l=new t((function(t,s){var l={onComplete:function(e){t({rootReferenceMdl:e,actionIndex:n})},onFailure:function(){s(r.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))},silent:!0};e.is(o)?t({rootReferenceMdl:o,actionIndex:n}):a.fetchRoot(i.rootReferencePID,l)}));s.push(l)})),t.all(s)},P=function(n){var i=n||[],l=[],u={},c={};return o.notify("startProgress",c),i.forEach((function(n){var i=new t((function(t,i){e.is(n.rootReferenceMdl)?a.needToQueryForChildren(n.rootReferenceMdl.get("PID"))?(s.isAKindOf(n.rootReferenceMdl,"PPRContext")&&(u={expandLevel:1,forceDBMode:!0}),a.getDescendantsFromServer(n.rootReferenceMdl.get("PID"),(function(){t(n)}),u)):t(n):i(r.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))}));l.push(i)})),t.all(l).then((function(e){return o.notify("stopProgress",c),t.resolve(e)})).catch((function(e){return o.notify("stopProgress",c),t.reject(e)}))},R=function(e){var n=e||[],o=b(i.dragNDropInfo);return n.some((function(e){var t=!1;return a.isWorkInstruction(e.rootReferenceMdl)&&a.isOperation(o)&&(t=!0),t}))?new t((function(t,n){a.needToQueryForChildren(o)?a.getDescendantsFromServer(o,(function(){t(e)}),{onFailure:n}):t(e)})):t.resolve(e)},A=function(i){return new t((function(t,o){e.is(i,"array")&&i.forEach((function(i){var s=a.getReference(i),l=function(e){var i={};h(e)?(i.action=["addRoot"],i.parameters=[{rootReferencePID:e.get("PID")}],i.message=[null]):(i.action=["error"],i.parameters=[null],i.message=[r.getNLSValue("AbstractDragAndDropManager.NotValidType")]),n.call(c,i).then(t,o)};e.is(s)?l(s):a.fetchRoot(i,{context:c,onComplete:l,onFailure:o,silent:!0})}),c)}))},V=function(n){return new t((function(t){var r=(n||[{actionIndex:null}])[0].actionIndex,a=e.is(r,"number")?i.parameters[r]:null;o.notify("CreateLinkOrInstance",[a]),t()}))},w=function(n,s){var c=null;switch(n){case"addRoot":case"reorderRoots":c=I(s);break;case"addChangeAction":c=u.setCAAndGetDetails(i.parameters[s].rootReferencePID).then(A,v);break;case"addPPRContext":c=C(s).then(P).then(y).catch(v);break;case"createLinkOrInstance":c=C(s).then(P).then(R).then(V).catch(v);break;case"reorder":c=function(n){return new t((function(t,s){var u,c,d=-1,g={},f={},h=function(e){o.warn(r.getNLSValue("AbstractDragAndDropManager.ReorderFailure")),o.debug("AbstractDragAndDropManager.ReorderFailure. Error Details: "+e),o.notify("stopProgress",g),s()};o.notify("startProgress",g),d=i.parameters[n].newChildrenPID.indexOf(i.parameters[n].targetInstancePID),"bottom"===i.parameters[n].dropPosition&&d++,i.parameters[n].movedInstancePID.forEach((function(e,t){i.parameters[n].newChildrenPID.splice(d+t,0,e)})),u={listOrdered:i.parameters[n].newChildrenPID,listModifiable:i.parameters[n].movedInstancePID},c={url:"dsmfg/private/V0/invoke/persistChildrenOrder",method:"POST",onComplete:function(r){var s=[];e.is(r,"array")&&r.forEach((function(t){var n;e.is(t.PID,"string")&&e.is(t.V_TreeOrder)&&(n=a.getInstance(t.PID),a.manageLinearProductFlowsOnDeleteInstance(n),n.set("V_TreeOrder",t.V_TreeOrder),a.manageLinearProductFlowsOnCreateInstance(n))})),i.parameters[n].newChildrenPID.forEach((function(e){s.push(a.getInstance(e))})),p.prepareUpdate(),o.notify("instanceRemoved",[s]),o.notify("instanceAdded",[s]),o.notify("reorder",f),p.pushUpdate(),o.notify("stopProgress",g),t()},onFailure:h,onTimeout:h,data:e.Json.encode(u)},l.webServiceRequest(c)}))}(s);break;case"reparent":c=function(n){return new t((function(t,r){var a=e.merge({onComplete:t,onFailure:r},i.parameters[n]);e.is(g)?g.moveInstance(a):(o.debug("Model behavior is not available to reparent"),r())}))}(s);break;case"aggregatedAction":c=t.resolve();break;case"error":c=v(i.message[s]);break;default:c=v("AbstractDragAndDropManager.DropEffectError")}return c};return e.is(i)&&e.is(i.action,"array")&&(i.action.forEach((function(t,n){var o=function(){var o=w(t,n);return i.promises=e.is(i.promises,"array")?i.promises:[],i.promises[n]=o,o};f=e.is(f)?f.then(o,o):o()}),this),f.then(d,d)),!1}))},_computeAndProcessDropEffect:function(t){var n;e.is(t)&&(n=v(t),e.is(n)&&this.processDropEffect(n))},onTreeListViewDrop:function(t,i){var o,r,a=this.getDragNDropInfo(t,i);return e.is(a)&&(o=v(a),e.is(o)&&(this.processDropEffect(o),r=e.is(widget)&&widget.id?"padcompassSocket_"+widget.id:"padcompassSocket",null===f&&(f=new n.Socket(r)).subscribeServer("com.ds.compass",window.parent),f.dispatchEvent("onResetX3DContent",{},r))),!1},onDragEnterColumnHeader:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(e.is(g)?g.promise.then((function(){d=e.Promise.deferred(),D(t.iconEnum.PLUS,!1),g=null}),(function(){o.debug("failed")})):(d=e.Promise.deferred(),D(t.iconEnum.PLUS,!1))),!0},onDragLeaveColumnHeader:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(D(t.iconEnum.DROPHERE,!0),e.is(d)&&d.resolve()),!0},onDragEnterBlank:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(e.is(d)?d.promise.then((function(){D(t.iconEnum.PLUS,!1),d=null}),(function(){o.debug("failed")})):D(t.iconEnum.PLUS,!1),g=e.Promise.deferred()),!0},onDragLeaveBlank:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&D(t.iconEnum.DROPHERE,!0),e.is(g)&&g.resolve(),!0},onDropCell:function(t,n){var i,a,l,u,c=this,d=this.getDragNDropInfo(t,n),g=o.getBehavior("WUXNodeModelBehavior");if(e.is(n.nodeModel)&&g.isFakeNodeModel(n.nodeModel))return!1;if(e.is(d.info.fromManageCapableResource)&&!0===d.info.fromManageCapableResource)return function(e){var t=[];e.draggedItems.forEach((function(n){e.targetRootReferencePID===n.resourceAreaID&&0===e.targetInstancePIDsArray.length&&t.push({isAggregatedBy:e.targetRootReferencePID,isInstanceOf:n.referencePID,linkPID:n.linkPID})})),o.notify("createResourceUsage",t)}(d),!0;if(e.is(n.droppedNodes)&&P(n.droppedNodes))return o.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1;if(e.is(n.nodeModel)){const e=n.nodeModel.object.type;if(s.isReferencesHasReadOnlyType(e))return o.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1}if(e.is(d.draggedItems)&&!1==(l=d.draggedItems,u=n.nodeModel,!(e.is(u.object)&&"DELConstructionWorkPackageGroup"===u.object.type||l.some((e=>"DELConstructionWorkPackageGroup"===e.type)))))return o.warn(r.getNLSValue("AbstractDragAndDropManager.NotAllowed")),!1;i=o.getBehavior("DropZoneViewBehavior");try{return a=R(d),Array.isArray(a)&&a.length>0?(A(a,(function(){c._computeAndProcessDropEffect(d)})),!1):this.onTreeListViewDrop(t,n)}catch(t){return o.debug(t),e.is(i)&&D(i.iconEnum.DROPHERE,!0),!0}},onDropBlank:function(t,n){var i,a,s=this,l=this.getDragNDropInfo(t,n);if(e.is(n.droppedNodes)&&P(n.droppedNodes))return o.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1;i=o.getBehavior("DropZoneViewBehavior");try{return a=R(l),Array.isArray(a)&&a.length>0?(A(a,(function(){s._computeAndProcessDropEffect(l)})),!1):this.onTreeListViewDrop(t,n)}catch(t){return o.debug(t),e.is(i)&&D(i.iconEnum.DROPHERE,!0),!0}},onDropColumnHeader:function(t,n){var i,r=o.getBehavior("DropZoneViewBehavior");try{return i=e.Json.decode(t.dataTransfer.getData("Text")),!(!e.is(i.data)||!e.is(i.data.DataGridView_Column_Options))||this.onTreeListViewDrop(t,n)}catch(t){return o.debug(t),e.is(r)&&D(r.iconEnum.DROPHERE,!0),!0}}}}})),define("DS/DELPPWViewBehaviors/SelectionBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["SelectionPlugin","DatabasePlugin"],creator:function(t,n,i,o){return{onStart:function(){},onStop:function(){},getSelections:function(){return i.getSelections(n.getId())},getModuleSelections:function(e){return i.getModuleSelections(e)},getSelectedNodesCount:function(){return i.getSelectedNodesCount(n.getId())},getSelectionsWithPaths:function(){return i.getSelectionsWithPaths(n.getId())},getSelectedRefs:function(){var t,r=[];return i.getSelections(n.getId()).forEach((function(n){n.forEach((function(n){t=o.getReference(n),e.is(t)&&r.push(t)}))})),r},getSelectedInsts:function(){var t,r=[];return i.getSelections(n.getId()).forEach((function(n){n.forEach((function(n){t=o.getInstance(n),e.is(t)&&r.push(t)}))})),r}}}}})),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/ConfigIdsContainer",[],(function(){"use strict";const e=function(e,t){let n=new Set(e);for(const e of t)n.add(e);return n};class t{constructor(e,t,n){this.pidSet=e,this.relidSet=t,this.pairs=n}static empty(){return new t(new Set,new Set,{})}addPID(e){return this.pidSet.add(e),this}addRelID(e){return this.relidSet.add(e),this}addPair([e,t]){return this.pairs[e]=t,this}combine(n){const i=e(this.pidSet,n.pidSet),o=e(this.relidSet,n.relidSet),r={...this.pairs,...n.pairs};return new t(i,o,r)}getIdsObjAsPerExternalSpec(){return{pids:Array.from(this.pidSet),relids:Array.from(this.relidSet),pairs:this.pairs}}}return t})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager",["UWA/Core"],(function(e){"use strict";return function(t,n,i,o,r,a){var s,l=function(i){n.getXMLValues(i,(function(t){!function(t){var n;if(e.is(t))for(t=Array.isArray(t)?t:[t],n=0;n<t.length;n++)s[t[n].name]=Array.isArray(t[n].Attribute)?t[n].Attribute:[t[n].Attribute]}(t.Tooltips.Tooltip)}),(function(){t.debug("Failed to get"+i+"XML configuration file")}))},u=function(t){var n,i,l,u,c,d,g,f,p,h,m,I="";if(e.is(t)&&e.is(t.nodeModel)&&(f=o.getReference(t.nodeModel.getReferencePID()),p=e.is(t.nodeModel.getInstancePID()),h=t.cellView.collectionView.getColumnOrGroup(t.columnID).tooltipIndex,p&&(m=o.getInstance(t.nodeModel.getInstancePID())),e.is(h)&&(c=s[h],e.is(c))))for(n=0;n<c.length;n++)i=c[n],l=e.is(i.dicoType)?i.dicoType+"."+i.name:i.name,u=i.entity,g=r.getAttributeInfo(l),("instance"!==u||p)&&("instance"===u&&e.is(m)?d=m.get(l):e.is(f)&&(d=f.get(l)),e.is(d)&&""!==d&&(d=e.is(g)&&a.hasMagnitude(g)?a.getMagnitudeValue(d,g)+" "+a.getNLSForUnit(g):"NULL"===d?"":d,I+=(e.is(g)?a.getNLS(g):l)+" : "+d+"\n"));return I};return{init:function(e){s={},l(e)},getTooltipValue:function(e){return u(e)}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/BIEssentials/BIColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return function(){var t=function(t){var n;return e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options,t.dataIndex)&&(n=t.nodeModel.options[t.dataIndex]),n};return{displayType:"BIEssentials",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,n,i){return t.typeRepresentation="color",t.className="biessentials",t.getCellValue=this.getCellValue,t.hasCellValue=this.hasCellValue,t.getCellValueForExport=this.getCellValueForExport,t.getCellGroupingKey=this.getCellGroupingKey,t.getCellTooltip=this.getCellTooltip,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:this.getCellValueForFilter}}),t},hasCellValue:function(n){var i=t(n);return!(!e.is(i)||"transparent"===i.colorCode)},getCellValue:function(e){return t(e).colorCode},getCellValueForFilter:function(t,n){var i,o;return e.is(t)&&e.is(n)&&(o=n.options[t],e.is(o)&&(i=o.tooltip)),i},getCellValueForExport:function(n){var i="";return e.is(n.cellModel,"string")?i=n.cellModel:(i=t(n),i=e.is(i)?i.tooltip:""),i},getCellGroupingKey:function(n,i){var o,r="";return e.is(n.dataIndex)||(n.dataIndex=i),o=t(n),"MakeBuyStatus"===i?e.is(o)&&e.is(o.status)&&(r=o.status):e.is(o)&&e.is(o.tooltip)&&(r=o.tooltip),r},getCellTooltip:function(t){var n,i={longHelp:""};return-1===t.columnID?this.getCellDefaultTooltip(t):(t.isHeader?i.longHelp=t.cellModel:(n=t.nodeModel.options[t.dataIndex],i.longHelp=e.is(n)?n.tooltip:""),i)}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/DocMgmtColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n){const i=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},o=i("TreeViewPlugin"),r=i("ResourcePlugin");return{displayType:"DocMgmt",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,i,r){return t.className=o.areModuleColumnsImmutable(n.getId())?"icon-text-column":"url-column",t.groupableFlag=!1,t.getCellValue=this.getCellValue,t.getCellValueForExport=this.getCellValueForExport,t.getCellTooltip=this.getCellTooltip,e.is(r.isViewFilterable,"boolean")&&r.isViewFilterable&&e.is(i)&&e.is(i.isFilterable)&&i.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:this.getCellValueForFilter}}),t},getCellValue:function(e){var t;if(!e.isHeader&&(t=e.nodeModel.getAttributeValue(e.dataIndex),Array.isArray(t))){const e=t.length;if(1===e)return t[0].title;if(e>1)return`${t[0].title} ...`}return""},getCellValueForFilter:function(t,n){var i,o;return e.is(t)&&e.is(n)&&(o=n.getAttributeValue(t),e.is(o)&&(i=(o=Array.isArray(o)?o:[o]).map((e=>e.title)))),i},getCellValueForExport:function(t){return e.is(t.cellModel,"array")&&t.cellModel.join(", "),e.is(t.cellModel)?t.cellModel.toString():""},getCellTooltip:function(e){var t={longHelp:""},n=e.cellModel,i=[];if(-1===e.columnID)return this.getCellDefaultTooltip(e);if(e.isHeader||(n=e.nodeModel.getAttributeValue(e.dataIndex)),Array.isArray(n)&&0!==n.length){const e=r.getNLSValue("SpecificationsFacet.Specifications"),o=r.getNLSValue("AttachmentsFacet.Attachments");i=n.reduce(((t,n)=>("Reference Document"===n.type?t[o].push(n.title):t[e].push(n.title),t)),{[e]:[],[o]:[]});let a="";for(const[e,t]of Object.entries(i))Array.isArray(t)&&t.length>0&&(a+=e+":",t.forEach((e=>{a+="\n\t"+e})),a+="\n");t.longHelp=a}else e.isHeader&&(t.longHelp=n);return t}}}})),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgCellManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return function(){const t="string",n="configLoading";return{displayType:"CFG",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.groupableFlag=!1,e.getCellTypeRepresentation=this.getCellTypeRepresentation,e.getCellValue=this.getCellValue,e.hasCellValue=this.hasCellValue,e},hasCellValue:function(t){var n=this.getTreeDocument(),i=!0,o=t.nodeModel;return e.is(o)&&e.is(n)&&(i=!n.isGroupingNodeModel(o)),i},getCellValue:function(t){let n=null;if(e.owns(t,"nodeModel")){const i=t.nodeModel,o=t.dataIndex,r=i.options.grid[o];n=e.is(r,"string")?r.trim():r}return e.is(n)?n:""},getCellTypeRepresentation:function(i){let o=n;if(e.owns(i,"nodeModel")){const a=i.nodeModel;if(e.is(a))if(r=i.cellModel,e.is(r,"string")&&0===r.length){o=!!e.is(a.options.areCfgColumnsFilled,"boolean")&&a.options.areCfgColumnsFilled?t:n}else o=t}var r;return o}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil",["UWA/Core"],(function(e){"use strict";return function(t,n,i){var o,r;return o=function(t,n,o){var r,a,s=i.getAttributesConfiguredOnDocumentColumn(o),l="";if(e.is(t))if(r=t.get("dataelements"),e.is(s))for(a=0;a<s.length;a++)e.is(r[s[a]])&&""!==r[s[a]]&&(l={title:r[s[a]],type:n});else l=r.title;return l},{fillNodeOptions:function(e,t){var i,o,a=r(e.referencePID,t);for(i in a)a.hasOwnProperty(i)&&(e.grid[i]=a[i]);if("IndexRelationsOnDemand"===widget.getValue("navigateOnIndex")&&n.needToQueryForConnections(e.referencePID))for(o in e.grid)Array.isArray(e.grid[o])&&0===e.grid[o].length&&e.grid[o].push({Value:"??",Icon:null});return e},getDocumentNodeOptions:r=function(t,n){var r,a,s,l,u={},c=i.getConnectedDocumentPIDs(t);if(Array.isArray(n)||(n=[n]),e.is(c)&&n.length>0)for(a=0;a<n.length;a++)for(u[s=n[a]]=[],r=0;r<c.length;r++){const[t,,n]=c[r].split("|");l=i.getDocument(n),e.is(l)&&u[s].push(o(l,t,s))}return u}}}})),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog",["UWA/Core","UWA/Controls/Abstract"],(function(e,t){"use strict";return function(n,i){var o,r=!(!e.is(i)||!e.is(i.check,"string")),a=t.extend({defaultOptions:{className:"confirmation-objectslist",appendObjects:!1,showColumnHeaders:!1},objectsTableBody:null,objectsTableHead:null,objectsTableFoot:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableHead=e.createElement("thead"),this.objectsTableFoot=e.createElement("tfoot"),this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableHead.inject(t),this.objectsTableBody.inject(t),this.objectsTableFoot.inject(t)},setData:function(t){var n,i,o=this,r=[],a=[],s=e.is(t)&&e.is(t.attributes,"array")?t.attributes:[],l=e.is(t)&&e.is(t.models,"array")?t.models:[],u=e.is(t)&&e.is(t.displayNames,"array")?t.displayNames:[];if(!1===o.options.appendObjects&&o.empty(),o.options.showColumnHeaders&&null!==o.objectsTableBody&&s.length>0&&(s.forEach((function(e){r.push({tag:"th",text:e})})),n=e.createElement("tr",{html:r}),o.objectsTableHead.appendChild(n)),null!==o.objectsTableBody)if(u.length>0)for(let t=0;t<u.length;t++)(a=[]).push({tag:"td",text:u[t]}),n=e.createElement("tr",{html:a}),o.objectsTableBody.appendChild(n);else l.length>0&&l.forEach((function(t){a=[],s.forEach((function(n){i=t.get(n),a.push({tag:"td",text:e.is(i)?i:""})})),a.length>0&&(n=e.createElement("tr",{html:a}),o.objectsTableBody.appendChild(n))}))},empty:function(){if(null!==this.objectsTableBody)for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return o=function(t,o,a,s,l){var u,c,d=e.createElement("div",{class:"confirmation-dialog-content-container"});if(e.is(o,"string")){const t=!!e.is(i.isHTML,"boolean")&&i.isHTML;e.createElement("span",{class:"confirmation-dialog-message",[t?"html":"text"]:o}).inject(d)}e.is(l)&&l.inject(d),r&&(c=n.create("Toggle",{type:"checkbox",checkFlag:!1,label:i.check})).inject(d);const g=e.is(i.buttonOkLabel,"string")?i.buttonOkLabel:null,f=e.is(i.buttonCancelLabel,"string")?i.buttonCancelLabel:null;(u=n.create("Dialog",{title:t,domId:"ConfirmationUI-Dialog",content:d,minHeight:100,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Cancel:n.create("Button",{...f&&{label:f},onClick:function(){u.close(),a.apply(null,[!1,s])}}),Ok:n.create("Button",{disabled:!1,emphasize:"primary",...g&&{label:g},onClick:function(){u.close(),a.apply(null,[!0,s,e.is(c)?c.checkFlag:null])}})}})).close=function(){this.destroy(),o=null,t=null,u=null}},{show:function(t,n,r,s){var l,u,c;e.is(r)&&e.is(r.models)&&(l=r.models).length>0&&((c=new a(i)).setData(r),u=e.createElement("div",{class:"confirmation-objectList"}),c.getContent().inject(u)),o(t,n,s,l,u)}}}})),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeDocument",["UWA/Core","DS/PPWTreeDocument/PPWTreeDocument","DS/PPWTreeNodeModel/PPWTreeNodeModel"],(function(e,t,n){"use strict";return t.extend({name:"TreeDocument",_expandAllCounter:0,_collapseAllCounter:0,getTreeNodeModel:function(t,n){var i=null;if(n=n||{},!t)throw new Error("id is not defined");return i=this.searchTree(t),e.is(n.returnFirstOne)&&n.returnFirstOne&&(i=0<i.length?i[0]:null),i},getMatchingNodeModels:function(t){var n=[];return e.is(t,"function")&&(n=this.search({match:function(n){var i,o=n.nodeModel,r=!1;return i=t(o),e.is(i,"boolean")&&(r=i),r},useTransaction:!1})),n},getHighlightedNodes:function(){return this.search({match:function(e){return e.nodeModel.isHighlighted()},useTransaction:!1})},searchTree:function(e,t,n,i){var o,r=this;return e=Array.isArray(e)?e:[e],this.search({match:function(a){if(r.isGroupingNodeModel(a.nodeModel))return!1;if(i&&!a.nodeModel.isRoot(!0))return!1;if(t&&"PID"!==t){if(t&&(o=n?".instance":".reference",e.indexOf(a.nodeModel.options.grid[t+o])>-1))return!0}else{if(e.indexOf(a.nodeModel.getInstancePID())>-1)return!0;if(e.indexOf(a.nodeModel.getReferencePID())>-1)return!0;if(e.indexOf(a.nodeModel.getLinkPID())>-1)return!0}},useTransaction:!1})},getRoots:function(t){var n=!!e.is(t,"boolean")&&t,i=this._parent(),o=this;return n&&(i=i.reduce((function(e,t){var n;if(o.isGroupingNodeModel(t)){let i=e=>{let t=e.getChildren();return Array.isArray(t)&&(t=t.reduce((function(e,t){var n;return o.isGroupingNodeModel(t)?(n=i(t),Array.isArray(n)&&(e=e.concat(n))):e.push(t),e}),[])),t};n=i(t),Array.isArray(n)&&(e=e.concat(n))}else e.push(t);return e}),[])),i},getAllDescendants:function(t){var i;return t=!!e.is(t)&&t,i=this._parent(),t&&e.is(i,"array")&&(i=i.filter((function(e){return e.getNodeSource()===n.NODE_SOURCE.MODEL}))),i},increamentExpandAllCounter:function(){this._expandAllCounter++},decrementExpandAllCounter:function(){this._expandAllCounter--},isExpandAllProgressive:function(){return this._expandAllCounter>0},increamentCollapseAllCounter:function(){this._collapseAllCounter++},decrementCollapseAllCounter:function(){this._collapseAllCounter--},isCollapseAllProgressive:function(){return this._collapseAllCounter>0},onPostExpandAll:function(e){return this.getModelEvents().subscribe({event:"postExpandAll"},e)},onPostCollapseAll:function(e){return this.getModelEvents().subscribe({event:"postCollapseAll"},e)}})})),define("DS/DELPPWViewBehaviors/EditAttributeBehavior",["UWA/Core","text!DS/DELPPWViewBehaviors/assets/json/EditAttributeFormEvents.json"],(function(e,t){"use strict";return{plugins:["UXComponentsPlugin","AttributePlugin","DicoPlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin"],creator:function(n,i,o,r,a,s,l,u){var c,d,g,f,p=o.getComponent("Button"),h=null,m=null,I=null,y=e.Json.decode(t),b=function(e){return n.getPlugins("ProcessImplementPlugin").instance.getSelectedDimensionTypeFromConnection(e)},D=function(t,n){var i,o=d.createElement("div",{class:"section-container"}),r={};e.is(n)&&e.is(n.formStyle)&&(r.formStyle=n.formStyle);const a=function(e){const t=e.AsRequired.checkFlag;var n;Object.keys(e).forEach((i=>{"AsRequired"!==i&&((n=e[i]).disabled=0,t&&(n.disabled=1))}))};if(e.is(t[0])&&t[0].dataIndex.contains("V_ContQuantity")){const n=t[0].attributeName.contains("DELFmiRatioOfDiscreteQuantity"),i=t[0].objectToBeModified.get("type");if(["ProcessInstanceContinuous","MBOMContinuousPhaseInstance","DELFmiFunctionIdentifiedInstance"].includes(i)||n||e.is(t[0].attributeInfo)&&(t[0].attributeInfo.isReadOnly=!0),!n){const e={attributeInfo:{NLS:s.getNLSValue("EditAttributeUI.AsRequired"),Type:"Boolean",FullName:"AsRequired",onChange:a}};t[0].attributeInfo.isReadOnly&&(e.value="TRUE"),t.push(e)}}return i={attribute:t},r.section=i,m=d.create("FormUI",{sections:r,renderTo:o,headerAccordean:!1}),o},v=function(t,n){c=d.createElement("div",{class:"EditAttribute-Dialog"}),e.is(d)?(I=d.create("Dialog",e.merge(t,{domId:"EditAttributeUI-Dialog",content:c,resizableFlag:!0,modalFlag:!0,width:400,minWidth:290,buttons:{Cancel:new p({onClick:function(){I.close()}}),Ok:new p({disabled:!1,emphasize:"primary",onClick:function(){e.is(n,"function")&&n()}})}}))).close=function(){this.destroy(),e.is(m)&&m.destroy(),e.is(c)&&c.destroy(),I=null}:i.debug("uxFactoryBehavior is not available.")},C=function(t){return new Promise((function(n,o){var r={},a=function(){i.notify("stopProgress",r),i.warn(s.getNLSValue("EditAttributeUI.retrieveDataFailure")),o()};if(!e.is(t))return i.debug("objectToBeModified is not available."),void o();i.notify("startProgress",r),l.fetchAttributes(t,{onComplete:function(){i.notify("stopProgress",r),n()},onFailure:a,onTimeout:a})}))},P=function(t){var n=l.getReference(t);return e.is(n)||(n=l.getInstance(t)),e.is(n)||(n=l.getConnection(t)),n},R=function(t,n){var i=l.getReferenceModel(t.get("to")[t.get("to").length-1]),o="DELFmiMagnitudeExt.V_DimensionType",s=i.get(o),u=a.getAttributeInfo(o),c=r.getAuthorizedValue(u,null,s);!e.is(s)&&a.isAKindOf(i,"MBOMContinuousPhaseReference")&&(s=function(t){var n,i,o,r=["DELFmiRefQuantity_Area","DELFmiRefQuantity_Length","DELFmiRefQuantity_Mass","DELFmiRefQuantity_Volume"];for(o=0;o<r.length;o++)if(n=t.get(r[o]+".V_RefQuantity"),e.is(n)){i=r[o].substring(r[o].indexOf("_")+1);break}return i}(i),c=r.getAuthorizedValue(u,null,s)),e.is(c)&&(c="MASS"===c?"WEIGHT":c,n.events.forEach((function(e){e.conditions.forEach((function(e){"MfgProductionPlanning.V_Overlap === true"===e.condition&&e.affectedAttributes.forEach((function(e){e.fullName.toUpperCase().contains(c)&&(e.hide=!1),"DELLmiSendAheadQty_Each.V_SendAheadQty"===e.fullName&&(e.hide=!0)}))}))})))};return{name:"EditAttributeBehavior",listenTo:function(){return{refreshAll:this.closeDialog}},onStart:function(t){var n;d=i.getBehavior("UXFactoryBehavior"),g=i.getBehavior("ModelBehavior"),f=i.getBehavior("LinkBehavior"),n=u.getXMLValues("editFormAttributesXML"),h=e.is(n)?n.convert("AttributesDescriptionList.Type","name"):{},e.is(t.editFormAttributesXML)&&(n=(n=u.getXMLValues(t.editFormAttributesXML)).convert("AttributesDescriptionList.Type","name"),h=e.merge(h,n))},onStop:function(){},closeDialog:function(){e.is(I)&&I.close()},hasEditConfiguration:function(t){var n=!1,o=null;return e.is(h)?(o=P(t),e.is(o)&&e.is(h[o.get("type")])&&(n=!0)):i.debug("_editFormAttrsConfig is not available."),n},editConfiguredAttributes:function(t){var u,g,p,A,V,w,S,L,E=null,N={};w=l.getConnection(t),S=e.is(w)?w.get("type"):null,e.is(h)?(E=P(t),e.is(E)?(u=h[E.get("type")],y[E.get("type")]&&(L=e.clone(y[E.get("type")])),e.is(u)?(p=Array.isArray(u.Attribute)?u.Attribute:[u.Attribute],e.is(u.formStyle)&&(N.formStyle=u.formStyle),(A=e.clone(r.getObjectAndAttributeInfos(p))).forEach((function(e){"ProcessImplementLinkOcc"===S&&"V_usage"===e.dataIndex?(e.attributeInfo.AuthorizedValues=function(e){var t,i,o,r,a=[],l=n.getPlugins("ProcessImplementPlugin").instance;return t=l.getRolesForTargrtObject(e),i=f.getConnection(e),r=l.getRoleFromModelOrComputed(i.get("PID")),o=t.indexOf(r.usage),t.splice(o,1),t.unshift(r.usage),t.forEach((function(e,t){a.push({NLS:0===t?r.nlsText:s.getNLSValue("Role."+e),Name:e,value:e})})),a}(t),a.addAttributeInfo({"MfgProductionPlanning.V_usage":e.attributeInfo}),e.value=w.get("PLMEntity."+e.dataIndex)):"ProcessImplementLinkOcc"===S&&"V_DimensionType"===e.dataIndex?(e.attributeInfo.AuthorizedValues=function(e){return n.getPlugins("ProcessImplementPlugin").instance.getDimensionTypesForQty(e)}(t),e.value=b(t)):"ProcessImplementLinkOcc"===S&&"V_Action"===e.dataIndex&&(e.attributeInfo.AuthorizedValues=function(e){var t=n.getPlugins("ProcessImplementPlugin").instance,i=[];return i=t.getActions(),t.getActionsFromConnection(e).forEach((e=>{i.some((t=>t.value===e.action))||i.push({value:e.action,NLS:e.nlsText})})),i}(t),e.value=w.get("ImplementLinkUsageFamily."+e.dataIndex))})),A.forEach((function(t,n){t.objectToBeModified=E,e.is(p[n].displayType)&&(t.displayType=p[n].displayType)})),C(E).then((function(){var a,u;a=A.filter((function(o,a){var c=e.is(o.attributeNLSTitle)?o.attributeNLSTitle:r.getNLS(o.attributeInfo);if(r.doesAttributeExist(E,o.attributeName)||r.isAttrApplicableForType(E,o.attributeName)){if("DELLmiTimeConstraintCnx"===S&&"DELLmiTimeConstraintCategoryAbstractCusto.flowType"===o.attributeName){let t=i.getBehavior("ProductFlowLinkBehavior");e.is(t)&&(o.attributeInfo.AuthorizedValues=t.getDynamicAuthorizedListFlowType(w))}if(e.is(L)&&e.is(L[o.attributeName])&&(o.events=L[o.attributeName],"ProcessImplementLinkOcc"===S&&R(w,o)),"ProcessImplementLinkOcc"===S&&["V_ContQuantity","DELLmiUsageQuantity","MfgProductionPlanning.V_DimensionType"].some((e=>o.attributeName.contains(e)))){if(!e.is(b(t)))return!1;"MfgProductionPlanning.V_DimensionType"===o.attributeName&&function(t,i){var o=n.getPlugins("ProcessImplementPlugin").instance,r=t.get("to"),a=o.getDimensionOfItem(r);!!e.is(a)&&(i.events.forEach((e=>{e.conditions.forEach((e=>{"MfgProductionPlanning.V_DimensionType !== Ratio"===e.condition&&e.affectedAttributes.forEach((e=>{e.fullName.toUpperCase().contains(a.toUpperCase())&&(e.hide=!1)}))}))})),o.getQuantityAttributeFromModel(r)||(i.attributeInfo.isReadOnly=!0,i.value=a.toUpperCase()))}(w,o)}if("ProcessImplementLinkOcc"===S&&"MfgProductionPlanning.usagePoint"===o.attributeName){if(o.attributeInfo.AuthorizedValues=function(t){var i,o,r,a,u=[],c=n.getPlugins("ProcessImplementPlugin").instance,d=l.getConnection(t);return c.validateIfPartialScoped(d.get("from"),[d.get("to")[0]])||(r=c.findInstanceWhoseParentIsScoped(d.get("from")).scopeLinks,a=c.findInstanceWhoseParentIsScoped([d.get("to")[0]]).scopeLinks,o=r.filter((function(e){return a.some((t=>e.get("PID")===t.get("PID")))})),e.is(o)&&o.length>0&&(i=c.getUsagePointsForTargetScopes(o)).length>0&&(u.push({NLS:s.getNLSValue("EditAttributeUI.NoUsagePoint"),value:[]}),i.forEach((function(t){var n=l.getInstance(t[t.length-1]);e.is(n)&&u.push({NLS:n.get("PLMInstance.PLM_ExternalID"),value:[t]})})))),u}(t),0===o.attributeInfo.AuthorizedValues.length)return!1;o.value=function(t){var n,i,o=[],r=l.getConnection(t);return e.is(r.get("usagePoint"))&&r.get("usagePoint").length>0&&(n=r.get("usagePoint")[0][r.get("usagePoint").length-1],e.is(n)&&(i=l.getInstance(n),e.is(i)&&(o=r.get("usagePoint")))),o}(t),u=o.value}return"ProcessImplementLinkOcc"!==S||"MfgProductionPlanning.V_Action"!==o.attributeName||!function(e){return 0===n.getPlugins("ProcessImplementPlugin").instance.getActions(e).length}(t)}return i.warn(s.getNLSValue("EditAttributeUI.AttrNotAvilaibleOnObject",{attributeNLS:c})),!1})),a.length>0?(V=D(a,N),g={title:s.getNLSValue("EditAttributeUI.HeaderMulti")},l.isWorkInstruction(E)&&(g=e.merge({position:{my:"top",at:"top"},height:500,width:600},g)),v(g,(function(){var c,g,p,h,y,b,D={},v={},C="MfgProductionPlanning.usagePoint";if(!0!==(g=m.validate()).result)return I.error(g.message),void(I.buttons.Ok.disabled=!1);if(p=m.getValues(),E.isConnection()){if("ProcessImplementLinkOcc"===S){let t=n.getPlugins("ProcessImplementPlugin").instance.validateQtyValue(p);if(e.is(t.errorMsg))return I.error(t.errorMsg),void(I.buttons.Ok.disabled=!1)}if(e.is(f)){for(h in e.is(p[C])&&(JSON.stringify(p[C])!==JSON.stringify(u)&&f.setImplementLinkToUsagePoints(t,p[C]),delete p[C]),p)if(p.hasOwnProperty(h))for(y=0;y<a.length;y++)h===a[y].attributeInfo.FullName&&(a[y].attributeInfo.Protection<3||!r.isReadOnly(a[y].attributeInfo))&&(b=p[h],a[y].newValue=b);new Promise((function(n,r){if("ProcessImplementLinkOcc"===S){i.getBehavior("ProcessImplementBehavior").validateTotalQtyConsumed(t,p,(function(t){t=t||{},e.is(t.OverConsumedValue)?function(t,n,i){var r,a=o.getComponent("Button"),l=d.createElement("div");r=d.create("Dialog",{domId:"ValidateTotalQtyConsumed",identifier:"ValidateTotalQtyConsumed",icon:s.getIconURLFromKey("MarkUp"),title:s.getNLSValue("EditLink.QuantityInfo.Dialog.Title",{itemName:i.itemName}),modalFlag:!0,resizableFlag:!0,visibleFlag:!1,closable:!0,content:l,height:200,width:400,buttons:{Cancel:new a({onClick:function(){r.close()}}),Ok:new a({label:s.getNLSValue("EditLink.QuantityInfo.Dialog.OK"),emphasize:"primary",onClick:function(){r.destroy(),t()}})}}),l.setHTML(s.getNLSValue("EditLink.QuantityInfo.Dialog.Info",{OverConsumedValue:"<b>"+i.OverConsumedValue+"</b>",instQty:"<b>"+i.InstanceQtyValue+"</b>",itemName:i.itemName})+"<br><br>"+s.getNLSValue("EditLink.QuantityInfo.Dialog.AreYouSure")),r.show(),r.close=function(){this.destroy(),e.is(l)&&l.destroy(),r=null,n()}}(n,r,t):n()}))}else n()})).then((function(){f.updateLinkAttributes([t],a)}))}else i.debug("linkBehavior is not available.")}else{for(h in p)if(p.hasOwnProperty(h))for(y=0;y<a.length;y++)h===a[y].attributeInfo.FullName&&a[y].attributeInfo.Protection<3&&(v[h]=p[h]);c={data:v,onFailure:function(t,n){var o=s.getNLSValue("EditAttributeUI.UpdateFailure");e.is(n)&&e.is(n.message,"string")&&(o+="\n"+n.message),i.warn(o),i.notify("stopProgress",D)},onComplete:function(){i.info(s.getNLSValue("EditAttributeUI.UpdateSuccess")),i.notify("stopProgress",D)}},i.notify("startProgress",D),E.isReference()?l.updateReference(t,c):E.isInstance()&&l.updateInstance(t,c)}I.close()})),new Promise((function(e,i){if(I.hide(),"ProcessImplementLinkOcc"===S){n.getPlugins("ProcessImplementPlugin").instance.computeTotalQtyConsumed(t,{onComplete:function(){e()},onFailure:function(){e()}})}else e()})).then((function(){I.show(),V.inject(c),"ProcessImplementLinkOcc"===S&&function(t,i){var o=n.getPlugins("ProcessImplementPlugin");if(e.is(o)){let n=(o=o.instance).getQuantityConsumedInfo(t);if(e.is(n.qtyConsumedInfo)){let e=d.createElement("div",{class:"EditLink-QuantityConsumedInfo",id:"QuantityConsumedInfo"}),t=d.createElement("div",{class:n.colorCode});t.inject(e),t.setText(n.qtyConsumedInfo),e.inject(i),e.scrollIntoView({behavior:"smooth"})}}}(t,c)}))):i.warn(s.getNLSValue("EditAttributeUI.ConfigAttrNotAvilaibleOnObject"))}))):i.warn(s.getNLSValue("EditAttributeUI.NoAttributesConfigured"))):i.debug("objectToBeModified is not available.")):i.debug("_editFormAttrsConfig is not available.")},editAttribute:function(t,n){var o,u,d,p,h,y;e.is(n,"array")||(n=[n]),e.is(t,"array")||(t=[t]),h=n[0].objectToBeModified,C(h).then((function(){var b=!0;p=n.length>1?s.getNLSValue("EditAttributeUI.HeaderMulti"):s.getNLSValue("EditAttributeUI.Header",{attributeName:u}),n.forEach((function(n){var l,c;r.doesAttributeExist(h,n.attributeName)||r.isAttrApplicableForType(h,n.attributeName)||r.isAttrOfRatioDiscreteQuantity(h,n.attributeName)?(u=e.is(n.attributeNLSTitle)?n.attributeNLSTitle:r.getNLS(n.attributeInfo),d=[],t.forEach((function(t){o=null,o="reference"===n.instOrRef&&e.is(t.referencePID)?t.referencePID:"instance"===n.instOrRef&&e.is(t.instancePID)?t.instancePID:t.id,e.is(o)&&d.push(o)})),"DELServiceProcessRoleExt.V_CustoRole"===n.attributeName&&(n.attributeInfo=e.clone(r.getAttributeInfo("MfgProductionPlanning.V_CustoRole")),n.attributeInfo.FullName,n.attributeInfo.AuthorizedValues=(l=a.getAllServiceProcessRoles(),c=[],l.forEach((e=>{c.push({NLS:e.nlsText||s.getNLSValue("ServiceRole."+e.role),Name:e.role,value:e.role})})),c),n.attributeInfo.value=n.objectToBeModified.get("DELServiceProcessRoleExt.V_CustoRole"),n.attributeName="MfgProductionPlanning.V_CustoRole",n.dataIndex=n.attributeName.split(".")[1])):(b=!1,i.warn(s.getNLSValue("TableView.AvailabilityFailure",{key:u})))})),b&&(e.is(I)||(y=D(n),v({title:p},(function(){var t,o,u,c,p,h;if(!0!==(h=m.validate()).result)return I.error(h.message),void(I.buttons.Ok.disabled=!1);o=m.getValues();if("false",Object.keys(o).length>1){if(e.is(o.AsRequired)){if("true"===o.AsRequired)t="AsRequired";else for(u in o)u===n[0].attributeInfo.FullName&&(t=o[u]);n[0].newValue=t,p=n[0].instOrRef,n=n[0]}else for(u in t=[],p=[],o)if(o.hasOwnProperty(u))for(c=0;c<n.length;c++)u!==n[c].attributeInfo.FullName||r.isReadOnly(n[c].attributeInfo)||(t[c]=o[u],n[c].newValue=o[u],p[c]=n[c].instOrRef)}else for(u in o)if(o.hasOwnProperty(u))for(c=0;c<n.length;c++)u!==n[c].attributeInfo.FullName||r.isReadOnly(n[c].attributeInfo)||(t=o[u],n[c].newValue=t,p=n[c].instOrRef);e.is(g&&p)?(t=e.is(t,"array")?t:[t],(n=e.is(n,"array")?n:[n]).forEach(((n,o)=>{if("MfgProductionPlanning.V_CustoRole"===n.attributeInfo.FullName){let r=n.attributeInfo.AuthorizedValues.find((e=>e.Name===t[o])).Name,u=a.getRoleOOTBFromRoleName(r),c=n.objectToBeModified;l.setOOTBRole(c.get("PID"),r,u,{onComplete:function(){e.is(c._changed)||(c._changed={}),c._changed["DELServiceProcessRoleExt.V_CustoRole"]=r,i.notify("objectAttributesModified",""),i.notify("instanceChanged",c),i.info(s.getNLSValue("OOTBRole.UpdateSuccess"))},onFailure:function(){i.warn(s.getNLSValue("OOTBRole.UpdateFailure"))}})}else g.updateModelAttribute(d,n,t[o])}))):e.is(f)&&f.updateLinkAttributes(d,n),I.close()})),y.inject(c)))}))},editRichTextAttribute:function(t,n){var o,u,g,f,p,h,y,b,R,A={},V=[],w=function(t){let n,i="reference"===t?g:f,o="reference"===t?y:h,r=[];e.is(i)&&(r.push(m.getValues()),r.forEach((t=>{for(n in t)t.hasOwnProperty(n)&&n===o.attributeInfo.FullName&&(o.value=e.is(t[n],"array")?t[n].join(""):t[n])})))};n=e.is(n,"array")?n[0]:{},e.is(t,"array")&&(t=t[0]),o=e.is(n.attributeNLSTitle)?n.attributeNLSTitle:r.getNLS(n.attributeInfo),e.is(t.referencePID)&&(b=P(t.referencePID),V.push(C(b))),e.is(t.instancePID)&&(R=P(t.instancePID),V.push(C(R))),e.is(b)||e.is(R)||i.warn(s.getNLSValue("TableView.RichTextUpdate.PanelError")),Promise.allSettled(V).then((function(){if(n.displayType="richText",e.is(b)&&(A.reference={pid:t.referencePID,name:s.getNLSValue("EditAttributeUI.EditRichText.Reference.Prefix")+b.get("PLMEntity.V_Name")},(y={...n}).attributeName="DELLmiRichText.V_RichText",y.attributeInfo={...a.getAttributeInfo("DELLmiRichText.V_RichText")},y.attributeInfo.FullName+=".Ref",y.objectToBeModified=b,y.value=b.get("DELLmiRichText.V_RichText"),y.instOrRef="reference"),e.is(R)&&(A.instance={pid:t.instancePID,name:s.getNLSValue("EditAttributeUI.EditRichText.Instance.Prefix")+R.get("PLMInstance.PLM_ExternalID")},(h={...n}).attributeName="DELLmiRichText.V_RichText",h.attributeInfo={...a.getAttributeInfo("DELLmiRichText.V_RichText")},h.attributeInfo.FullName+=".Inst",h.objectToBeModified=R,h.value=R.get("DELLmiRichText.V_RichText"),h.instOrRef="instance"),u=s.getNLSValue("EditAttributeUI.Header",{attributeName:o}),!e.is(R)&&e.is(b)?u+=" : "+A.reference.name:!e.is(b)&&e.is(R)&&(u+=" : "+A.instance.name),!e.is(I)){if(e.is(b)&&!e.is(R))g=D(y,{formStyle:"Vertical"});else if(e.is(R)&&!e.is(b))f=D(h,{formStyle:"Vertical"});else if(e.is(b)&&e.is(R)){let e=d.getComponent("WUXTab");g=D(y,{formStyle:"Vertical"}),(p=new e({displayStyle:"strip"})).add({label:A.reference.name,isSelected:!0,content:g}),p.add({label:A.instance.name}),p.addEventListener("change",(function(e){1===e.dsModel.value[0]?(w("reference"),g.destroy(),f&&f.destroy(),f=D(h,{formStyle:"Vertical"}),e.dsModel.setPageContentFromValue(1,f)):0===e.dsModel.value[0]&&(w("instance"),f.destroy(),g.destroy(),g=D(y,{formStyle:"Vertical"}),e.dsModel.setPageContentFromValue(0,g))}))}v({title:u,position:{my:"top",at:"top"},height:500,width:600},(function(){var t,n,o=[];if(!0!==(n=m.validate()).result)return I.error(n.message),void(I.buttons.Ok.disabled=!1);if(e.is(m)&&((o=[]).push(m.getValues()),o.forEach((n=>{for(t in n)n.hasOwnProperty(t)&&e.is(y)&&t===y.attributeInfo.FullName?y.newValue=n[t]:n.hasOwnProperty(t)&&e.is(h)&&t===h.attributeInfo.FullName&&(h.newValue=n[t])}))),e.is(l)){let t,n,o=[],r={},a=(t,n)=>{if(e.is(t)&&e.is(n)){let e,i;return[t,n].forEach((t=>{e=t.indexOf("<body>"),i=t.indexOf("</body>"),t=e>-1&&i>-1?t.slice(e+6,i):""})),t!==n}return!(!t||e.is(n))},u={data:{}},c={data:{}};i.notify("startProgress",r),e.is(A.reference)&&(e.is(y.newValue)||e.is(y.value))&&(n=e.is(y.newValue)?y.newValue:y.value,n=e.is(n,"array")?n.join(""):n,t=y.objectToBeModified.get(y.attributeName),t=e.is(t,"array")?t.join(""):t,a(n,t)?(n=e.is(y.newValue)?y.newValue:y.value,n=e.is(n,"array")?n:[n],u.data[y.attributeName]=n,o.push(new Promise(((t,n)=>{l.updateReference(A.reference.pid,e.extend(u,{onComplete:function(){t("Reference")},onFailure:function(t,i){let o=e.is(i.message)&&i.message.includes("VPLMDataCollectPlanAdapter.setDCPlanRowText")||e.is(i,"string")&&i.includes('ResponseCode with value "500"');n(["Reference",o])}}))})))):o.push(new Promise((e=>{e("NCReference")})))),e.is(A.instance)&&(e.is(h.newValue)||e.is(h.value))&&(n=e.is(h.newValue)?h.newValue:h.value,n=e.is(n,"array")?n.join(""):n,t=h.objectToBeModified.get(h.attributeName),t=e.is(t,"array")?t.join(""):t,a(n,t)?(n=e.is(h.newValue)?h.newValue:h.value,n=e.is(n,"array")?n:[n],c.data[h.attributeName]=n,o.push(new Promise(((t,n)=>{l.updateInstance(A.instance.pid,e.extend(c,{onComplete:function(){t("Instance")},onFailure:function(t,i){let o=e.is(i.message)&&i.message.includes("VPLMDataCollectPlanAdapter.setDCPlanRowText")||e.is(i,"string")&&i.includes('ResponseCode with value "500"');n(["Instance",o])}}))})))):o.push(new Promise((e=>{e("NCInstance")})))),Promise.allSettled(o).then((e=>{e.some((e=>"rejected"===e.status))||I.close(),e.forEach((e=>{if("fulfilled"!==e.status||e.value.includes("NC"))if("rejected"===e.status){let t=s.getNLSValue("TableView.RichTextUpdate."+e.reason[0]+".Failure");t+=e.reason[1]?s.getNLSValue("TableView.RichTextUpdate.TextExceedsSizeLimit"):"",i.warn(t)}else i.info(s.getNLSValue("TableView.RichTextUpdate."+e.value.replace("NC","")+".NoChange"));else i.info(s.getNLSValue("TableView.RichTextUpdate."+e.value+".Success"))})),i.notify("stopProgress",r)}))}})),e.is(A.instance)&&e.is(A.reference)?p.inject(c):e.is(A.reference)&&!e.is(A.instance)?g.inject(c):e.is(A.instance)&&!e.is(A.reference)&&f.inject(c)}}))}}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/OwnerNameColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n){const i=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},o=i("TreeViewPlugin"),r=i("DatabasePlugin");var a=function(e,t){var n={};n.node=t.nodeModel,e.command&&o.executeCommand(e.command,n)};return{displayType:"FullOwnerURL",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,i,r){return t.typeRepresentation="url",t.className=o.areModuleColumnsImmutable(n.getId())?"icon-text-column":"url-column",t.getCellValue=this.getCellValue,t.command=o.areModuleColumnsImmutable(n.getId())?null:"ActionBar_ChangeOwner",t.getCellValueForExport=this.getCellValueForExport,t.getCellGroupingKey=this.getCellGroupingKey,e.is(r.isViewFilterable,"boolean")&&r.isViewFilterable&&e.is(i)&&e.is(i.isFilterable)&&i.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0}}),t},getCellValue:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.attribute.nodeName),o=e.is(i)?r.getReferenceModel(t.nodeModel._referencePID):null,s=e.is(o)?o.get("ds6w:responsible"):"";return{label:e.is(s)?s:e.is(i)?i:"",func:a.bind(this,n,t),getLabel:function(){return this.label}}},getCellGroupingKey:function(t,n){var i,o=this.getColumnOrGroup(n);return e.is(o)&&(i=t.nodeModel.getAttributeValue(o.attribute.name)),i},getCellValueForExport:function(t){var n=t.cellModel;return t.rowID>=0&&e.is(t.cellModel)&&(n=t.cellModel.getLabel()),n}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager",["UWA/Core","DS/Utilities/Utils"],(function(e,t){"use strict";return function(n,i){const o=function(e){let t=n.getPlugins(e);return t&&t.instance?t.instance:null},r=o("DicoPlugin"),a=o("AttributePlugin"),s=o("ResourcePlugin");var l={},u=i.getBehavior("ModelBehavior"),c=i.getBehavior("WUXNodeModelBehavior"),d=i.getBehavior("LinkBehavior"),g=function(t,n){var i,o;if(Array.isArray(t.attribute)){for(let r=0;r<t.attribute.length;r++)if(e.owns(n.options.grid,t.attribute[r].nodeName)){i=t.attribute[r].name,o=t.attribute[r].nodeName;break}}else i=t.attribute.name,o=t.attribute.nodeName;return{attrName:i,attrNodeName:o}},f=function(t,n,o){var r,a=[],s=[],l=t.cellModel;e.is(n)&&(n.newValue=o,a.push(n),s.push(n.objectToBeModified.id),r={onFailure:function(){t.nodeModel.setAttribute(n.attributeName,l)}},e.is(d)?d.updateLinkAttributes(s,a,r):i.debug("LinkBehavior not Available"))},p=function(){return e.is(widget.getValue("separator"))?widget.getValue("separator"):"|"},h=function(t){var n,i={},o=this.getColumnOrGroup(t.columnID);return n=r.getAttributeInfo(o.attribute.name),e.is(n)&&a.hasMagnitude(n)&&(e.is(l[o.attribute.name])||(l[o.attribute.name]=a.getAttributeUnits(n)),i.allowedUnits=l[o.attribute.name]),i},m=function(t){var n=!1,i=!1,o=!1,r=!1,s=!1,l=!1,u=!1;return e.is(t)&&(r=a.hasRangeDefined(t),l=a.isMultiValuated(t),u=a.hasMagnitude(t),i=a.isInteger(t),o=a.isDouble(t),s=a.isBoolean(t),n=a.isDate(t)),{hasRange:r,isMultivalued:l,hasMagnitude:u,isInteger:i,isDouble:o,isBoolean:s,isDate:n}},I=function(t,n,i){var o,r,l,u,d,g,f=[],p=t[0],h=this;g=function(n=!1){const i={};throw e.is(d)&&(i.message=d),n&&(i.cellIDs=t.map((({cellID:e})=>e))),i},u=a.isMultiValuated(n.attributeInfo);const m=/^-?\d+$/;if(a.doesAttributeExist(n.objectToBeModified,n.attributeName)||a.isAttrApplicableForType(n.objectToBeModified,n.attributeName)||(d=s.getNLSValue("TableView.AvailabilityFailure",{key:n.attributeNLSTitle}),g(!0)),a.isBoolean(n.attributeInfo))u&&(i=a.getValueAsArray(i,a.getType(n.attributeInfo)));else if(a.hasRangeDefined(n.attributeInfo,n.attributeDef))e.is(i)||g(),i=a.getAuthorizedValue(n.attributeInfo,n.attributeDef,i);else if(a.isDate(n.attributeInfo)){if(i=e.is(i)?i:"",u)for(f=a.getValueAsArray(i),i=[],l=0;l<f.length;l++)r=new Date(f[l]),isNaN(r.getTime())?(d=s.getNLSValue("TableView.InvalidDateMessage",{date:f[l]}),g(!0)):i.push(Math.floor(r.getTime()/1e3));else r=new Date(i),isNaN(r.getTime())?(d=s.getNLSValue("TableView.InvalidDateMessage",{date:i}),g()):i=Math.floor(r.getTime()/1e3);c.withTransactionUpdate((()=>{t.forEach((e=>{p.nodeModel.setAttribute(n.attributeNodeName,i),h.updateRenderedRow(e.rowID)}))}))}else u?i=a.getValueAsArray(i,a.getType(n.attributeInfo)):e.is(p.cellModel)?a.isInteger(n.attributeInfo)&&(m.test(i)?i=parseInt(i):(d=s.getNLSValue("TableView.InvalidIntegerValue",{attr:n.attributeNLSTitle,value:i}),g())):(o=a.getMaxLength(n.attributeInfo))>0&&i.length>o&&(d=s.getNLSValue("TableView.MaxLengthFailure",{length:i.length,maxLength:o}),g());return i},y=function(t,n,i,o){let r=this;if(e.is(n.instOrRef)&&"link"===n.instOrRef){if(1!==t.length)throw{message:s.getNLSValue("AbstractDragAndDropManager.NotAllowed")};f.call(r,t[0],n,i)}else e.is(u)&&u.updateModelAttribute(o,n,i,{onFailure:function(){c.withTransactionUpdate((function(){t.forEach((t=>{var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),r._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0}),r.getLayout().getColumnAutoRowHeightFlag(t.columnID)&&r.getLayout().resetRowHeight(t.rowID)}))}))},onComplete:function(){n.attributeName.contains("V_RefQuantity")&&c.withTransactionUpdate((function(){o.forEach((e=>{c.updateNode(e,{loadChildren:!0})}))}))}})},b=function(t,n){var o,r,s,l=this,u=[];if(Array.isArray(t)&&t.length>0)try{s=this.getColumnOrGroup(t[0].columnID),r=a.getNodeAndColumnInfos(t[0].nodeModel,s),o=I.call(this,t,r,n),u=t.map((function(e){return a.getNodeAndColumnInfos(e.nodeModel,s).objectToBeModified.id})),y.call(l,t,r,o,u)}catch(t){e.is(t)&&e.is(t.message,"string")&&i.warn(t.message),e.is(t)&&Array.isArray(t.cellIDs)&&c.withTransactionUpdate((function(){t.cellIDs.forEach((function(e){l._renderCell(e,{updateCellContent:!0,updateCellLayout:!0})}))}))}};return{setValue:t.debounce((function(e,t){return b.call(this,[e],t)}),300),getCellValue:function(t,n){var i=a.getNodeAndColumnInfos(n.nodeModel,t),o=a.isMultiValuated(i.attributeInfo),r=a.hasRangeDefined(i.attributeInfo),l=n.nodeModel.getAttributeValue(i.attributeNodeName);return"type"===i.attributeName?l=s.getNLSValue(l):o?a.isDate(i.attributeInfo)&&l&&(l=l.map((function(e){return a.getDate(e)}))):a.isDate(i.attributeInfo)?e.is(l)&&(l=e.is(l,"number")?1e3*l:l,l=r?a.getFormattedDate(l):a.getDate(l)):a.isBoolean(i.attributeInfo)||(l=e.is(l)?l:""),l},getCellValueForSort:function(t,n){var i=this.getColumnOrGroup(n),o=a.getNodeAndColumnInfos(t,i),r=a.hasMagnitude(o.attributeInfo),s=a.hasRangeDefined(o.attributeInfo),l=t.getAttributeValue(o.attributeNodeName);if(r&&!s&&e.is(l)){let e=a.getMagnitude(o.attributeInfo),[t,n]=l.split(" ");l={magnitude:e,mksValue:a.getMKSValueFromUnitValue(e,n,t)}}return l},getDateCellGroupingKey:function(t,n){var i,o,r=this.getColumnOrGroup(n);return e.is(r)&&(o=g(r,t.nodeModel).attrNodeName,i=t.nodeModel.getAttributeValue(o),e.is(i)&&(i=e.is(i,"number")?1e3*i:i,i=a.getDate(i),i=new Intl.DateTimeFormat(widget.lang,{dateStyle:"long"}).format(i))),i},getMagnitudeGroupingKey:function(t,n){var i,o,s,l=this.getColumnOrGroup(n);return e.is(l)&&(o=g(l,t.nodeModel),i=t.nodeModel.getAttributeValue(o.attrNodeName),s=r.getAttributeInfo(o.attrName),e.is(i)&&e.is(s)&&a.isMultiValuated(s)&&(i=Array.isArray(i)?i:[i])),i},getMagnitudeGroupingLabel:function(t,n){var i,o,s,l,u;return u=t.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount,i=t.getIdentifier(),o=this.getColumnOrGroup(n),s=g(o,t),l=r.getAttributeInfo(s.attrName),i=Array.isArray(i)?i.map((function(e){return a.getFormatedMagnitudeValueWithUnitLabel(e,l)})).join(p()):a.getFormatedMagnitudeValueWithUnitLabel(i,l),e.is(i)||(i="N/A"),this.layout.getColumnOptionValue(n,"text")+": "+i+" ("+u+")"},getCellValueForFilter:function(t,n){var i,o,l,u,c,d,f,p,h,m,I,y=this.getColumnOrGroup(t);return e.is(y)&&e.is(n)&&(i=(I=g(y,n)).attrName,o=I.attrNodeName,c=u=n.getAttributeValue(o),"type.reference"===o?c=s.getNLSValue(u):(l=r.getAttributeInfo(i),e.is(l)&&e.is(u)&&(f=a.hasMagnitude(l),p=a.isInteger(l),h=a.isDouble(l),m=a.isDate(l),d=function(e){var t=e;return f?t=a.getFormatedMagnitudeValueWithUnitLabel(e,l):p||h?t=isNaN(e)?e:parseFloat(e):m&&(t=a.getDate(e)),t},c=Array.isArray(u)?(c=u.map(d)).length>0?c:void 0:d(u)))),c},getCellValueForExport:function(t){var n,i,o,s,l,u,c,d=this.getColumnOrGroup(t.columnID),g="",f=t.cellModel;if(e.is(f))if(t.rowID<0)g=f;else{if(Array.isArray(d.attribute)){for(let o=0;o<d.attribute.length;o++)if(e.owns(t.nodeModel.options.grid,d.attribute[o].nodeName)){n=d.attribute[o].name,i=d.attribute[o].nodeName;break}}else n=d.attribute.name,i=d.attribute.nodeName;if(s=r.getAttributeInfo(n),e.is(s)&&(u=a.hasRangeDefined(s),c=a.isMultiValuated(s),l=a.hasMagnitude(s)),l){o=t.nodeModel.getAttributeValue(i);let n=[];e.is(o)&&(o=Array.isArray(o)?o:[o]).forEach((e=>{if(""!==e){let t=a.getFormatedMagnitudeValueWithUnitLabel(e,s);n.push(t)}})),g=n.join()}else e.is(c)&&c&&e.is(u)&&!u?(o=t.nodeModel.getAttributeValue(i),Array.isArray(o)&&(g=o.join())):g=e.is(f,"array")?f.join():f.toString()}return g},getMultiValueDateSematics:function(){return{allowMultipleValuesFlag:!0,viewOptions:{multipleValuesSeparator:p()}}},getMagnitudeSematics:function(e){return h.call(this,e)},hasCellValue:function(t){var n,i,o,r,s,l,u;if(u=this.getTreeDocument(),e.is(u)&&u.isGroupingNodeModel(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"hideShowItems3D":case"hideShowBuildUp3D":case"NonEditable":case"ComputedValue":case"URL":o=!0;break;case"DocMgmt":r=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(r,"array")&&r.length>0;break;default:i=a.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=a.doesAttributeExist(i.objectToBeModified,i.attributeName),l=a.isAttrApplicableForType(i.objectToBeModified,i.attributeName),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||e.is(s)&&!s||l):o=!1}return o},getCellEditableState:function(t){var n,i,o=!1;return n=this.getColumnOrGroup(t.columnID),e.is(n)&&e.is(n.editableFlag)&&n.editableFlag&&(i=a.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.attributeInfo)&&(o=!a.isReadOnly(i.attributeInfo,i.attributeDef))),o},getCellTypeRepresentation:function(e){var t="string";const{hasRange:n,isBoolean:i,isInteger:o,isDouble:r,isDate:a}=m(e);return n?t="string":i?t="boolean":a?t="date":(o||r)&&(t="numberWithUnit"),t},getCellSemantics:function(e,t){var n={};const{hasMagnitude:i,isMultivalued:o,isInteger:r,isDouble:s}=m(e);if(i){const e=h.call(this,t);n.allowedUnits=e.allowedUnits}return o&&(n.allowMultipleValuesFlag=!0,n.viewOptions={multipleValuesSeparator:p()}),s&&(n.preservePrecisionInReadonly=a.isDisplayAsEntered(e)),n.integer=r,n},getCellTooltip:function(t){var n={longHelp:""},o=t.cellModel,l=t.cellView.collectionView.getColumnOrGroup(t.columnID);if(-1===t.columnID)return this.getCellDefaultTooltip(t);let u=t.cellView.collectionView.getTreeDocument();if(e.is(u)&&!u.isGroupingNodeModel(t.nodeModel)){if(!t.isHeader&&e.is(o)){let e=r.getAttributeInfo(l.attribute.name),t=a.hasRangeDefined(e),n=a.hasMagnitude(e),i=a.isMultiValuated(e),u=a.isDate(e),c=a.isBoolean(e),d=a.isInteger(e),g=a.isDouble(e);u?o=(o=i&&Array.isArray(o)?o:[o]).map((e=>a.getFormattedDate(e))).join("\n"):c?o=(o=i&&Array.isArray(o)?o:[o]).map((e=>"TRUE"===e.toString().toUpperCase()?s.getNLSValue("TRUE"):s.getNLSValue("FALSE"))).join("\n"):t?i&&Array.isArray(o)&&(o=o.join("\n")):o=n?(o=(o=Array.isArray(o)?o:[o]).map((t=>{var n="";return""!==t&&(n=a.getFormatedMagnitudeValueWithUnitLabel(t,e)),n}))).join("\n"):g||d?(o=(o=i&&Array.isArray(o)?o:[o]).map((t=>a.getFormatedNumberValue(t,e)))).join("\n"):i&&Array.isArray(o)?o.join("\n"):o}n.longHelp=o,n=function(t,n){var o;!t.isHeader&&e.is(t.nodeModel)&&(o=i.getBehavior("TreeListViewBehavior").getTooltipManager().getTooltipValue(t),e.is(n.longHelp)&&(n.longHelp+=n.longHelp.length>0&&o.length>0?"\n\n":"",n.longHelp+=o));return n}(t,n)}return n},setCellValueBulk:function(e,t){return b.call(this,e,t)}}}})),define("DS/DELPPWViewBehaviors/View",[],(function(){"use strict";return{plugins:["View"],creator:function(e,t,n){return{onStart:function(e){},onStop:function(){},extend:function(e){return n.extend(e)}}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MoreAttributesWizardColumnManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager"],(function(e,t){"use strict";return function(n,i){var o=new t(n,i);return{displayType:"MoreAttr",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.editionPolicy="EditionOnClick",e.getCellTypeRepresentation=this.getCellTypeRepresentation,e.getCellValue=this.getCellValue,e.hasCellValue=this.hasCellValue,e.setCellValue=o.setValue,e.setCellValueBulk=o.setCellValueBulk,e.getCellEditableState=this.getCellEditableState,e.getCellTooltip=this.getCellTooltip,e.getCellGroupingKey=this.getCellGroupingKey,e.autoRowHeightFlag=!1,"MoreAttr_InstOrRef"===e.dataIndex&&(e.text="",e.getCellSemantics=this.getCellSemantics),e.semantics={augmentedDisplay:"dialog"},e},getCellTypeRepresentation:function(e){return"MoreAttr_Scope"===e.dataIndex||"MoreAttr_Type"===e.dataIndex?"string":"MoreAttr_isExtension"===e.dataIndex?"boolean":"MoreAttr_InstOrRef"===e.dataIndex?"functionIcon":"string"},getCellValue:function(t){return("MoreAttr_Type"!==t.dataIndex&&"MoreAttr_Scope"!==t.dataIndex||!e.is(t.nodeModel.options.grid[t.dataIndex]))&&"MoreAttr_InstOrRef"===t.dataIndex?"product"===t.nodeModel.options.grid[t.dataIndex]?"reference":"instance":t.nodeModel.options.grid[t.dataIndex]},getCellGroupingKey:function(e){return e.nodeModel.options.grid[e.dataIndex]},hasCellValue:function(){return!0},getCellEditableState:function(){return!1},getCellSemantics:function(e){if("MoreAttr_InstOrRef"===e.dataIndex)return{icon:{iconName:e.nodeModel.options.grid[e.dataIndex],fontIconFamily:1},label:"test"}},getCellTooltip:function(t){if(e.is(t)&&e.is(t.nodeModel)&&e.is(t.nodeModel.options)&&e.is(t.nodeModel.options.grid)){if("MoreAttr_Type"===t.dataIndex||"MoreAttr_Scope"===t.dataIndex)return{longHelp:e.is(t.nodeModel.options.grid[t.dataIndex])?t.nodeModel.options.grid[t.dataIndex].join("\n"):t.nodeModel.options.grid[t.dataIndex],updateModel:!1};if("MoreAttr_InstOrRef"===t.dataIndex)return{longHelp:"product"===t.nodeModel.options.grid[t.dataIndex]?"Reference":"Instance",updateModel:!1};if("MoreAttr_isExtension"===t.dataIndex)return{longHelp:t.nodeModel.options.grid[t.dataIndex],updateModel:!1}}return{longHelp:"",updateModel:!1}}}}})),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgColumnsBehavior",["UWA/Core","DS/DELPPWViewBehaviors/CfgColumnsBehavior/ConfigIdsContainer"],(function(e,t){"use strict";return{plugins:["CfgColumnsPlugin"],creator:function(n,i,o){let r=new Set,a=[],s=!1;const l=function(){return r.size>0},u=function(e){!function(e){r=new Set(e)}(e),function(e){const t=o.getAdditionalColumnAMDsBasedOnDataIndices(e);a=t}(e)},c=function(){return a},d=function(t){return e.owns(t,"displayType")&&"CFG"===t.displayType},g=function(e){return o.isDataIndexAvailable(e.dataIndex)},f=function(t){return t.filter((t=>s?d(t)&&g(t):d(t)&&(t=>!!e.owns(t,"isHidden")&&!t.isHidden)(t)&&g(t))).map((e=>e.dataIndex))},p=function(t){if(l()){const n=i.getBehavior("WUXNodeModelBehavior");if(e.is(n)){const i=function(t){let n=[];return e.owns(t,"pids")&&(n=n.concat(Object.keys(t.pids))),e.owns(t,"relids")&&(n=n.concat(Object.keys(t.relids))),n}(t);n.updateCfgColumnsForCommandUpdates(i,t)}}},h=function(){const t=o.getColumnsFromPreferences(i.getId()),n=f(t);if(u(n),l()){const t=i.getBehavior("WUXNodeModelBehavior");e.is(t)&&t.resetConfigColumns()}};return{listenTo:function(){return{updateCfgColumns:p,TreeViewColumnVisibleStateChange:h}},onStart:function(t){var n;e.is(t)&&e.is(t.skipisHiddenCheck,"boolean")&&(n=t.skipisHiddenCheck,s=n)},onStop:function(){},computeVisibleConfigColDataIndices:function(e){return f(e)},setVisibleCfgColDataIndices:function(e){u(e)},getCombinedEntriesFromUpdatedAttributesObj:function(e){const t=Object.entries(e.pids),n=Object.entries(e.relids);return t.concat(n)},trimAttributesBasedOnVisibleDataIndices:function(t){return function(t,n){let i={};for(const o in n)e.owns(n,o)&&t(o)&&(i[o]=n[o]);return i}((e=>function(e){return r.has(e)}(e)),t)},isAnyCfgColumnVisible:function(){return l()},filterCFGColumnsBasedOnAvailability:function(e){let t;return t=l()?e.filter((function(e){let t;return t=!d(e)||g(e),t})):e,t},getNodeIdsObjAsPerExternalSpec:function(e){return e.reduce(((e,n)=>{const i=function(e){const n=e.getReferencePID();let i=t.empty().addPID(n);if(!e.isRoot()){const t=e.getInstancePID();i.addRelID(t).addPair([n,t])}return i}(n);return e.combine(i)}),t.empty()).getIdsObjAsPerExternalSpec()},updateAttributes:function(e){return o.updateAttributes(e,c)},getRequiredTypeRepresentations:function(){return o.getTypeRepresentations()}}}}})),define("DS/DELPPWViewBehaviors/ExpandFilterBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors/Tagger/TaggerHelper","DS/DELWebWidgetLinkInfra/WidgetLinkInfraController"],(function(e,t,n,i){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","ProxyPlugin","TreeViewPlugin","RootsPlugin","BIPlugin","UXComponentsPlugin"],creator:function(o,r,a,s,l,u,c,d,g){let f=new Map,p=new Map;var h,m,I,y,b,D,v,C,P,R,A,V,w,S,L,E,N,T,M,F,x,O=["union","intersection","minus"],B=["config_filter","sequence_filter","root_path_physicalid"],U=new n(r,a);return b=function(t){var n;return n=r.getBehavior(t),e.is(n)||r.debug(t+"is not available"),n},D=function(t){var n,i,o,l,c=t||null,d={},g=[];if(u.getActiveView()===r.getId())if(c=e.is(c,"string")?JSON.parse(c):c,d=e.is(c)?c.CVQueryV2:{},e.is(d.batch)&&Array.isArray(d.batch.expands)&&d.batch.expands.length>0&&(d=d.batch.expands[0].filter),i=Array.isArray(c.filterRootIds)&&c.filterRootIds.length>0?c.filterRootIds[0]:null,l=!!e.is(c.empty)&&c.empty,o=b("WUXNodeModelBehavior").getRoots(),n=e.is(c.CVQuery3D)?c.CVQuery3D:null,l){let e=[i];p.has(i)&&(e=e.concat(p.get(i)),p.delete(i)),e.forEach((e=>{f.has(e)&&f.delete(e)})),C(e,d,n)}else{if(e.is(document.getElementById("PropagateFilter-Dialog")))return;if(!0===a.isAuthoringMode())return void r.warn(s.getNLSValue("ExpandFilter.AuthoringON.FilterDisabled"));let t=new Map;if(1===o.length)return t.set(i,d),g.push(i),void v(g,t,n);let l,u,c,f,h=r.getBehavior("UXFactoryBehavior"),m=h.create("Dialog",{height:300}),I=h.getComponent("Button"),y=h.getComponent("ButtonGroup"),D=h.getComponent("Toggle"),C=h.getComponent("Element"),P=new y({type:"checkbox"}),R=new C("div",{class:"ApplyFilter-Dialog"}),A=new C("div",{class:"SelectdRoot-Section"}),V=new C("div",{class:"SelectAll-Section"}),w=new C("div",{class:"Checkbox-Section"});m.close=function(){this.destroy(),e.is(R)&&R.destroy(),m=null};let S=function(e){if(!1===e.dsModel.checkFlag)u.checkFlag=!1;else{let e=!0,t=P.getButtonCount();for(let n=0;n<t;n++){if(!1===P.getButton(n).checkFlag){e=!1;break}}e&&(u.checkFlag=!0)}},L=function(e){var t=e.dsModel.checkFlag,n=P.getButtonCount();for(let e=0;e<n;e++){P.getButton(e).checkFlag=t}},E=function(){t.set(i,d),g.push(i);let o=P.getButtonCount();for(let n=0;n<o;n++){let i=P.getButton(n);if(i.checkFlag){let n=i.value,o=(r=n,a=void 0,a=(a=JSON.stringify(e.clone(d))).replace(/physicalid:\\"([A-Z]|[0-9])+\\"/g,'physicalid:\\"'+r+'\\"'),JSON.parse(a));t.set(n,o),g.push(n)}}var r,a;v(g,t,n),g.length>1&&p.set(i,g.slice(1)),m.close()},N=function(){t.set(i,d),g.push(i),v(g,t,n),m.close()},T=b("ResourceBehavior");o.forEach((function(e){var t=a.getReferenceModel(e);i!==e?(l=new D({type:"checkbox",value:e,checkFlag:!0}),l.allowUnsafeHTMLLabel=!0,l.label="<img  src="+T.getIconURLFromKey(t.get("type"))+' width="22" height="22"><b style="padding-left: 5px;">'+t.get("PLMEntity.V_Name")+"</b>",l.addEventListener("change",S),P.addChild(l)):(f=" <img  src="+T.getIconURLFromKey(t.get("type"))+' width="22" height="22">',c=s.getNLSValue("ExpandFilter.Dialog.FilterAppliedTo")+f+'<b style="padding-left: 5px;">'+t.get("PLMEntity.V_Name")+"</b><br>"+s.getNLSValue("ExpandFilter.Dialog.PropagateToObjects"),A.setHTML(c),u=new D({type:"checkbox",value:e,checkFlag:!0}),u.allowUnsafeHTMLLabel=!0,u.label="<b>"+s.getNLSValue("ExpandFilter.Dialog.SelectAll")+"</b>",u.addEventListener("buttonclick",L),u.inject(V))})),P.inject(w),A.inject(R),V.inject(R),w.inject(R),m.content=R,m.domId="PropagateFilter-Dialog",m.title=s.getNLSValue("ExpandFilter.Dialog.PropagateFilter"),m.modalFlag=!0,m.resizableFlag=!0,m.buttons={Apply:new I({label:s.getNLSValue("ExpandFilter.Dialog.Propagate"),onClick:E,disabled:1===o.length}),Cancel:new I({label:s.getNLSValue("ExpandFilter.Dialog.DonotPropagate"),onClick:N})},m.show()}},v=function(n,i,o){var l,u={};i instanceof Map?(r.notify("startProgress",u),l=n.map((function(e){return new t((function(t,n){var r,l,u;l=function(e){t(e)},u=function(){n(s.getNLSValue("ExpandFilter.ApplyFilter.ExpandFailed"))},r={ordered:!1,context:this,doNotExpand:!0,expandLevel:-1,filterQuery:i.get(e),filterQuery3d:o,onFailure:u,onTimeout:u,onCancel:u},a.getDescendantsFromServer([e],l,r)}))})),t.all(l).then((function(t){var l,c=[];if(t.forEach((function(t){e.is(t.instancesAndReferences)&&(c=c.concat(t.instancesAndReferences))})),n.forEach((function(e){var t=i.get(e);P(e,t),f.set(e,{filterQuery:t,filterQuery3d:o})})),0===c.length){let t=[];n.forEach((n=>{const i=a.getReferenceModel(n);e.is(i)&&t.push(i.get("PLMEntity.V_Name"))}));const i=t.join(",");e.is(i,"string")&&r.warn(s.getNLSValue("ExpandFilter.EmptyResult.Message",{referenceName:i}))}else l=b("Viewer3DBehavior"),e.is(l)&&(!0===y&&r.notify("Filter3DApplied"),!0===I&&l.unHideAll3D());!0===d.getBICmdState()&&r.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),A(n,i),r.notify("stopProgress",u),r.notify("ExpandFilterApplied")})).catch((function(e){r.warn(e),r.notify("stopProgress",u)}))):r.debug("filterQuery Expected in the type of Map")},C=function(t,n){var i=b("Viewer3DBehavior"),o={};0<t.length&&e.is(n)&&t.every((function(e){return""!==e}))&&(r.notify("startProgress",o),t.forEach((function(e){R(e),a.removeFilterFromCollection(e,n)})),e.is(i)&&(!0===y&&r.notify("Filter3DApplied"),!0===I&&i.unHideAll3D()),!0===d.getBICmdState()&&r.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),A(t),r.notify("stopProgress",o),r.notify("ExpandFilterRemoved"))},P=function(t,n){var i,o,r={operator:null,filters:[]};i=function(e,t){var n,i=null;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)>-1){i=n;break}return i}(n,O),e.is(i)&&(r.operator=i,o=n[i].expand,Array.isArray(o)&&(r.filters=o.map((function(e){var n={};return Object.keys(e).filter((function(n){var i,o,r,a=!1;return(i=B.indexOf(n)>-1)&&"root_path_physicalid"===n&&(o=e[n],Array.isArray(o)&&o.length>0&&(r=o[0],Array.isArray(r)&&(a=1===r.length&&r[0]===t))),!a&&i})).forEach((function(t){n[t]=e[t]})),n})))),r.originalFilterQuery=n,c.addRootFilter(t,r)},R=function(e){c.removeRootFilter(e)},A=function(t,n){var i,o=b("WUXNodeModelBehavior"),r=b("TLV3DViewerBehavior");e.is(o)&&t.forEach((function(t){i=e.is(n)?n.get(t):null,o.filterChildren(t,i),e.is(r)&&r.onFilterUpdated(t)}))},V=function(){var t,n,i=b("WUXNodeModelBehavior");e.is(h)&&e.is(i)&&(n=m.appContext.widget,t=i.getRoots(),h.resetNGFilterUI({appId:n.data.app3DSharedId,widgetId:n.getId(),rootIds:t}))},w=function(){var t=b("WUXNodeModelBehavior"),n=b("TLV3DViewerBehavior"),i="ExpandFilter.AuthoringON.FilterDisabled";e.is(t)&&t.isFilterAppliedInAnyRoot()&&(!0===d.getBICmdState()&&(r.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),i="ExpandFilter.AuthoringON.FilterAndBIDisabled"),V(),t.removeFilterFromAllRoots().forEach((function(t){R(t),e.is(n)&&n.onFilterUpdated(t)})),r.info(s.getNLSValue(i)),r.notify("ExpandFilterRemovedOnAuthoring"))},S=function(){var e,t=a.isAuthoringMode(),n=new Map,i=[];if(!t&&f.size>0){for(const t of f.keys()){const o=f.get(t);n.set(t,o.filterQuery),i.push(t),e=o.filterQuery3d}v(i,n,e)}},L=function(t){var n=b("WUXNodeModelBehavior");e.is(n)&&(n.showOverlay(),n.prepareUpdate(),U.colorize(t,(function(){n.pushUpdate(),n.removeOverlay(),r.notify("TaggerColumnColorized",r.getId())})))},E=function(){U.unColorize((function(){r.notify("TaggerColumnUnColorized",r.getId())}))},N=function(t){f.has(t)&&f.delete(t),e.is(h)&&h.removeRoot(t)},T=function(){b("WUXNodeModelBehavior").getSelectedNodes().filter((function(e){return e.isRoot()})).forEach((function(e){var t=e.getReferencePID();f.has(t)&&(f.delete(t),R(t),e.setRootFiltered(!1))}))},M=function(){b("WUXNodeModelBehavior").getRootNodes().forEach((function(e){var t=e.getReferencePID();f.has(t)&&(f.delete(t),R(t),e.setRootFiltered(!1))}))},F=function(){e.is(h)&&(u.getActiveView()!==r.getId()?h.deactivate():h.activate())},x=function(){var t,n;e.is(h)&&(t=o.getService("ConfigService").getSecurityContext(),e.is(t)&&(n=t.getSCFromPreferences(),e.is(n)&&h.setDefaultSecurityContext(n)))},{listenTo:function(){return{instanceAdded:w,reparent:w,instanceChanged:w,referenceChanged:w,authoringMode:S,removeRoot:N,RefreshCmd:T,onRefreshedAll:M,activeViewChange:F,endEdit:x}},onStart:function(t){var n,s;if(m=o.getConfig(),n=e.is(t.disableExpandFilter)?t.disableExpandFilter:!!a.isStandAlone(),I=!!e.is(t.unhide3DOnFilterApplication,"boolean")&&t.unhide3DOnFilterApplication,y=!!e.is(t.support3DFilter,"boolean")&&t.support3DFilter,!n){if(s=m.appContext.widget.data,h=l.create(l.PROXY.FilterProxy,{processingMode:"appProcessing",appId:s.app3DSharedId,colorize:!0,volumeFilterAvailable:1,synthesis_priority:1,ExpandSynthesisON:!0,shareFilterSpec:!0,NGFUXId:r.getId()+"_"+o.getConfig().appContext.widget.getId()}),y){new i({matchKeys:t.matchKeysForFilter,proxy:h,shareContent:!0,NGFUXId:r.getId()+"_"+o.getConfig().appContext.widget.getId()})}e.is(h.setNGFilterOptions,"function")&&(h.setNGFilterOptions({expandServices:"progressive",appId:s.app3DSharedId}),h.setSynthesisMode("occurrence")),x(),h.addEvent("ApplyNGFilter",D),h.addEvent("FilterBIColorize",L),h.addEvent("FilterBIUnColorize",E)}},onStop:function(){e.is(h)&&(h.removeEvent("ApplyNGFilter"),h.removeEvent("FilterBIColorize"),h.removeEvent("FilterBIUnColorize"),V(),h.destroy(),h=null)},resetFilterUI:function(){V()},clear:function(){e.is(h)&&h.cleanProxy()},getFilterProxy:function(){return h},setTagsWithExpandSynthesis:function(t){var n,i=[t];e.is(h)&&(n={type_filter_bo:["PLMCoreReference"]},a.isStandAlone()||h.setTagsWithExpandSynthesis(i,n))},applyFilter:function(e,t){h.areRootsSharable(e.objIds,e.biProxyCtx).then((function(n){n.forEach((function(t){var n=t.rootId,i=t.hasFilter;h.removeRoot(n),!0===i&&h.shareFilterSpec({fromRootId:n,fromSourceCtx:e.biProxyCtx,fromDropOnFilter:!1,callback:function(e){if(1===e.success.length){let t=new Map;t.set(n,e.success[0].filter.CVQuery),v([n],t,null)}}})})),t()}))}}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/LabelColumnManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager"],(function(e,t){"use strict";return function(n,i){var o=new t(n,i);return{displayType:"Label",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.dataIndex)||"tree"!==t.dataIndex)},updateColumnInfos:function(t,n,i){return delete t.editionPolicy,delete t.hasCellValue,delete t.getCellValue,delete t.getCellValueForExport,t.isExportable=!1,t.editableFlag=!e.is(n.isEditable)||n.isEditable,t.getCellEditableState=o.getCellEditableState,t.setCellValue=o.setValue,t.setCellValueBulk=o.setCellValueBulk,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0}}),t}}}})),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel",["UWA/Core","UWA/Class","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/AbstractTreeNodeModel"],(function(e,t,n){"use strict";var i=function(t){t=t||{},n.call(this,t),this.object={},this.options.grid["ds6w:type"]=this.getReferenceType(),this.object.type=this.getReferenceType(),e.is(t.defType)&&(this.object.defType=t.defType)};return(i.prototype=Object.create(n.prototype)).constructor=i,i.prototype.updateBadge=function(e){this.prepareUpdate(),this.setBadges(e),this.pushUpdate()},i.prototype.setRootFiltered=function(e){this.isRoot(!0)&&(this.options.isFiltered=e),this.updateBadge({bottomRight:e?"filter":""})},i.prototype.isRootFiltered=function(){var t=!1;return this.isRoot(!0)&&e.is(this.options.isFiltered,"boolean")&&(t=this.options.isFiltered),t},i.NODE_SOURCE=n.NODE_SOURCE,i})),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/WUXNodeModelBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors/BulkTreeSearchHelper","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeDocument","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel"],(function(e,t,n,i,o){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","ProductImplementPlugin","ProcessImplementPlugin","KeyBindingPlugin","RootsPlugin","CfgColumnsPlugin","PlatformPlugin","DicoPlugin"],creator:function(r,a,s,l,u,c,d,g,f,p,h,m){var I,y,b,D,v,C,P,R,A,V,w,S,L,E,N,T,M,F,x,O,B,U,k,W,_,j,H,G,X,z,Q,K,q,J,Z,Y,$,ee,te,ne,ie,oe,re,ae,se,le,ue,ce,de,ge,fe,pe,he,me,Ie,ye,be="noChildren",De="expanding",ve="partiallyExpanded",Ce="expanded",Pe="collapsed",Re={virtualColumnID:null,sortOrder:null},Ae=[],Ve=0,we=new i({useAsyncPreExpand:!1,nodeModelClass:o,shouldAcceptDrag:function(t){return e.is(t.getReferencePID)},shouldAcceptDrop:function(t){var n=t.dropNode;return!e.is(n)||e.is(n.getReferencePID)}}),Se=new n(we,s),Le=!1;(I=we.getXSO())&&(I.onChange((function(t){var n=null,i=null,o=null,r=null,s=null,l=[],c=[],d=a.getBehavior("ViewBehavior");ue(t)?a.debug("WUXNodeModelBehavior: Ignoring selection of fake node model"):(i=t.getInstancePID()||t.getReferencePID(),o=t.isSelected(),s=t.getAbsolutePath(),r=we.getSelectedNodes(),e.is(r,"array")&&r.forEach((function(t){var n;e.is(t)&&e.is(t.getInstancePID,"function")&&e.is(t.getReferencePID,"function")&&e.is(t.getAbsolutePath,"function")&&(n=t.getInstancePID()||t.getReferencePID(),"MANAGECAPABLERESOURCESMOD"===a.getId()&&(n=t.getLinkPID()),l.push(n),c.push({id:n,path:t.getAbsolutePath()}))})),u.setSelection(a.getId(),c),e.is(d)&&!0===o&&d.setActiveView(),n={sourceId:a.getId(),selectedNodeIds:l,selectedNodePaths:c,changed:{nodeId:i,isSelected:o,absPath:s}},a.notify("select",n))})),I.onPostAdd((function(e){const t={sourceId:a.getId(),toggledNodes:e};a.notify("postNodesSelected",t)})),I.onPostRemove((function(e){const t={sourceId:a.getId(),toggledNodes:e};a.notify("postNodesUnselected",t)}))),T=function(){var t,n,i=function(){};t=function(t){var n,i,o,r,a;if(t.preventDefault(),t.stopPropagation(),o=function(){var t,n=we.getRoots();e.is(n)&&(t=n[0],e.is(t)&&t.select())},n=we.getSelectedNodes())if(r=n[0])if(r.hasChildren()||r.getNextBrother())r.getNextVisibleNode().select(),r.unselect();else{if(r.isRoot(!0))return r.unselect(),void o();for(a=r.getParent();a&&!a.getNextBrother()&&!a.isRoot(!0);)a=a.getParent();if(i=a.getNextBrother())i.select(),r.unselect();else{if(!a.getPreviousBrother())return r.unselect(),void o();a.getPreviousBrother().select(),r.unselect()}}else o();else o()},n=function(t){var n,i,o=we.getSelectedNodes(),r=function(){var t,n,i;t=we.getRoots(),e.is(t,"array")&&t.length>0&&(i=(n=t[t.length-1]).getVisibleChildren(!1,!0),(e.is(i,"array")&&i.length>0?i[i.length-1]:n).select())};if(t.preventDefault(),t.stopPropagation(),o)if(n=o[0]){if(0===n._rowID)return n.unselect(),void r();i=n.getPreviousVisibleNode(),n.unselect(),i.select()}else r();else r()},g.createHandler({domElement:a.getElement(),onTab:t,onDownArrow:t,onShiftTab:n,onUpArrow:n,onCtrlA:function(e){we.selectAll(),e.preventDefault(),e.stopPropagation()},onCtrlC:i,onCtrlV:i,onCtrlX:i,onSuppr:i,onBackspace:i})},M=function(t,n){var i,o;return n=n||!1,o=function(t){var i=[],o=null;return o=we.getTreeNodeModel(t[0]),e.is(o)&&0!==o.length?(1===t.length?n&&(o=o[0]):t.length>1&&(o.forEach((function(e){var n,o,r,a,s=e;for(n=1;n<t.length;n++){if(r=s.getChildren(!0),a=!1,Array.isArray(r))for(o=0;o<r.length;o++)if(r[o].getInstancePID()===t[n]){s=r[o],a=!0;break}if(!a)break}a&&i.push(s)})),o=i.length>0?n?i[0]:i:null),o):null},Array.isArray(t)&&t.length>0?i=o(t):e.is(t,"string")?(i=we.getTreeNodeModel(t,{returnFirstOne:n}),Array.isArray(i)&&i.length<1&&(i=null)):i=null,i},F=function(e,t){return Se.getNodeModels(e,t)},x=function(e){var t,n,i=we.getRoots(!0),o=null;for(n=i.length,t=0;t<n;t++)if(i[t].getReferencePID()===e){o=i[t];break}return o},O=function(){var e=we.getRoots();return Array.isArray(e)&&e.length<=0},B=function(t,n,i,r){var s,l,u,c,d,g=a.getBehavior("BIBehavior"),p=a.getBehavior("ExpandFilterBehavior"),h=a.getBehavior("TreeListViewBehavior"),m=a.getBehavior("TLV3DViewerBehavior"),I=a.getBehavior("Viewer3DBehavior"),b=!1,D={nodeOptions:{},taggerOptions:{}};return e.is(n)?(u=""!==(d=n.getAbsolutePath().toString())?d.concat(",",t.instancePID):t.instancePID,c=n.getRIRpath().join(",")+","+t.instancePID+","+t.referencePID):(u=t.referencePID,c=t.referencePID),g&&(D=g.getNodeOptions(u,c),e.merge(t,D.nodeOptions)),l=new o(t),e.is(n)?(!0===r&&(i=Ve++,b=!0),n.addChild(l,i,b)):(we.addRoot(l),e.is(p)&&p.setTagsWithExpandSynthesis(l.getReferencePID()),!0!==O()&&(s=a.getBehavior("DropZoneViewBehavior"),e.is(s)&&s.hide()),!0===y&&f.addRoot(a.getId(),l.getID())),e.is(t.fromXEN)&&(l.stringIdentifier=t.referencePID,l.fromXEN=t.fromXEN),U(l),e.is(m)&&h.hasHideShowItems3DColumn()&&m.add3DVisibilityState(l.getRIRpath()),e.is(I)&&h.has3DHideShowColumn()&&I.add3DVisibilityState(l.getRIRpath()),l},U=function(t){var n=!1,i=!1;e.is(t.fromXEN)&&t.fromXEN&&(i=t.fromXEN),e.is(D)&&!n&&c.getScopeLinksOfImplementing(t.getID(),i).length>0&&(k(t,D.badgeIcon),n=!0),e.is(v)&&!n&&d.getScopeLinksOfImplementing(t.getID(),i).length>0&&(k(t,v.badgeIcon),n=!0),e.is(C)&&!n&&c.getPartialScopeLinksOfImplementing(t.getID(),i).length>0&&(k(t,C.badgeIcon),n=!0),e.is(P)&&!n&&d.getPartialScopeLinksOfImplementing(t.getID(),i).length>0&&(k(t,P.badgeIcon),n=!0),e.is(R)&&!n&&c.getResultingProductLinksOfImplementing(t.getID(),i).length>0&&(k(t,R.badgeIcon),n=!0)},le=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-/]))?/.test(e)||/[/]?((\.|\.\.)*?([/]))*?(([a-zA-Z0-9_ ]+)\/)*?([a-zA-Z0-9_ ]+)\.([a-z]{2,})/.test(e)},k=function(t,n){var i=e.is(n)?l.getIconURLFromKey(n):"",o={bottomLeft:le(i)?{iconPath:i,iconSize:{width:"11px",height:"11px"}}:""};Array.isArray(t)?t.forEach((function(e){e.updateBadge(o)})):t.updateBadge(o)},Y=function(e,t){var n,i,o=null;if(t&&(i=t.getChildren(!0),Array.isArray(i)&&i.length>0))for(n=0;n<i.length;n++)if(e===i[n].options.instancePID){o=i[n];break}return o},ge=function(t,n){var i,o,r,l,u,c=a.getBehavior("TreeListViewBehavior"),d=a.getBehavior("TLV3DViewerBehavior"),g=a.getBehavior("GraphViewBehavior"),f=a.getBehavior("Viewer3DBehavior");return n=n||{},i=o=c.getReferenceNodeOptions(t),e.is(d)&&(r=d.getReferenceNodeOptions(),i=e.merge(o,r)),e.is(g)&&(l=g.getReferenceNodeOptions(t),i.grid=e.merge(o.grid,l.grid)),e.is(f)&&(u=f.getReferenceNodeOptions(),i=e.merge(o,u)),e.is(n.fromXEN)&&(i.fromXEN=n.fromXEN),!n.fromXEN&&(s.needToQueryForChildren(t)||e.is(n.forceIntializeChildren)&&n.forceIntializeChildren)&&(i.children=[]),B(i)},fe=function(t,n,i,o,r){var l,u,c,d,g,f,p=a.getBehavior("TreeListViewBehavior"),h=a.getBehavior("TLV3DViewerBehavior"),m=a.getBehavior("GraphViewBehavior"),I=a.getBehavior("Viewer3DBehavior");return r=r||{},l=i.getAbsolutePath().concat(t.get("PID")),u=c=p.getInstanceNodeOptions(n,t,l),e.is(h)&&(d=h.getReferenceNodeOptions(),u=e.merge(c,d)),e.is(m)&&(g=m.getInstanceNodeOptions(n,t),u.grid=e.merge(c.grid,g.grid)),e.is(I)&&(f=I.getReferenceNodeOptions(),u=e.merge(c,f)),(s.needToQueryForChildren(n)||e.is(r.forceIntializeChildren)&&r.forceIntializeChildren)&&(u.children=[],e.is(r.fromXEN)&&(u.fromXEN=r.fromXEN)),r.isFlatView?B(u,null,o,r.isFlatView):B(u,i,o,r.isFlatView)},_=function(t,n,i){var o,r,l,u,c,d,g,f=i||{},p=a.getBehavior("TreeListViewBehavior"),h=e.is(f.onEndAddToNodeList,"function")?f.onEndAddToNodeList:null,I=!0;if(e.is(h)&&delete f.onEndAddToNodeList,g=function(t,n){l.getRoot(!0).isRootFiltered()?ee(l):s.needToQueryForChildren(t)?ee(l,ve):ee(l),e.is(h)&&h(t,n)},!e.is(t,"string"))return a.debug("_addToNodeModelListRecursive: invalid PID."),void g(null,null);if(e.is(p)){if(d=function(){j(l,f),g(o,l)},e.is(n))if(r=s.getInstance(t),e.is(r)){if(o=s.getReferenceModelFromInstance(r),!e.is(o)||m.isAKindOf(o,"Document"))return;l=Y(t,n),e.is(l)&&(l.getReferencePID()!==r.get("isInstanceOf")?(u=l._getLocalID(),n.removeChild(l)):(I=!1,c=p.getUpdateNodeOptions(r,l),K(t,c),W(r,l.getAbsolutePath()))),I&&(l=M(f.rootId,!0),f.rootNode=l,l=fe(r,o,n,u,f))}else o=s.getReference(t);else(o=s.getReference(t))&&(e.is(f.loadRootOnly)&&f.loadRootOnly?f.expandLevel=0:f.expandLevel=Number(a.getPreferenceValue("fetchLevelOnLoad")),l=M(t,!0),e.is(l)&&(e.is(x(t))||e.is(f.updateItem)&&!0===f.updateItem)?(c=p.getUpdateNodeOptions(o),K(t,c)):l=ge(o,f));f.loadChildren?r?d():!A&&s.needToQueryForChildren(o)?e.is(f.loadRootOnly,"boolean")&&f.loadRootOnly&&!s.needToQueryForConnections(o)?d():(f=e.merge(f,{silentMode:!0}),ee(l,De),s.getDescendantsFromServer(o.get("PID"),d,f)):!A&&e.is(f.withLinksResolved)&&f.withLinksResolved&&s.needToQueryForConnections(o)&&!0!==f.isFlatView?(ee(l,De),s.findMissingLinkedObjects(o.get("PID"),d,f)):d():g(o,l)}else a.debug("treeListViewBehavior is undefined")},j=function(t,n){var i,o=n||{},r=e.is(o.filterQuery)?o.filterQuery:null,l=a.getBehavior("TreeListViewBehavior");e.is(t)&&t.removeChildren(),we.prepareUpdate(),i=s.getFilteredInstancesFromCollection(t.getReferencePID(),r),e.is(Re)&&e.is(Re.virtualColumnID)&&e.is(Re.sortOrder)?l.getDataGridView().reapplySortModel():i=(i=(i=i.map((function(e,t){return{position:t,data:e}}))).sort((function(e,t){var n=e.data.get("V_TreeOrder"),i=t.data.get("V_TreeOrder");return n&&i?Number(n)-Number(i):e.position-t.position}))).map((function(e){return e.data})),i.forEach((function(e){_(e.id,t,o)})),we.pushUpdate()},te=function(e){var t,n=!1,i=e.getReferencePID();return s.needToQueryForChildren(i)||(t=s.getInstancesFromCollection(i),n=e.getChildren(!0).length===t.length),n},H=function(t){var n,i,o,r,u,c,d,g,f,p,h=null,m=!1,I={};if(c=function(){a.notify("startProgress",I),h.prepareUpdate()},d=function(t){h.preExpandDone(),h.pushUpdate(),e.is(t)&&""!==t&&ee(h,t),a.notify("stopProgress",I)},o=function(){var t="";h.options&&h.options.useAsyncPreExpand&&(h.options.useAsyncPreExpand=s.needToQueryForChildren(h.getReferencePID())),(!h.hasChildren()||!f||e.is(n.previousNodeState)&&n.previousNodeState[h.getReferencePID()]===ve)&&j(h,{loadChildren:!0}),h.hasChildren()||(t=be),d(t)},r=function(){a.warn(l.getNLSValue("Error.ExpandFailed.Title")),g.setAdditionalInfo({queriedForChildren:!1}),d(m?Pe:ve)},u=function(){a.warn(l.getNLSValue("Info.ExpandCanceled.Title")),g.setAdditionalInfo({queriedForChildren:!1}),d(m?Pe:ve)},e.is(t)&&e.is(t.data)&&e.is(t.data.nodeModel))if(ue(t.data.nodeModel))t.target.preExpandDone();else if(n=t.data,h=n.nodeModel,g=s.getReference(h.getReferencePID()),c(),m=h.getRoot(!0).isRootFiltered(),!e.is(g)||A||m)d();else{p=!!e.is(n.expandAll,"boolean")&&n.expandAll,f=!s.needToQueryForChildren(g);const t=me(),l=new Set;t.length>0&&t.forEach((function(e){ue(e)||l.add(e.getReferencePID())})),p&&l.size>0&&!l.has(g.get("PID"))||!p&&f?o():(i={ordered:!1,context:this,doNotExpand:!0,onFailure:r,onTimeout:r,onCancel:u,forceIndexMode:Le},p&&(i.expandLevel=-1),i.includeXcadDrawings=a.getPreferenceValue("includeXcadDrawingsInEBOMView"),s.getDescendantsFromServer(g.get("PID"),o,i))}},G=function(){we.isExpandAllProgressive()||a.notify("onNodeExpanded")},X=function(){},z=function(){we.isCollapseAllProgressive()||a.notify("onNodeCollapsed")},Q=function(t,n={}){if(e.is(n.label)&&t.setLabel(n.label),e.is(n.attributes))if(e.is(t._getRowID()))t.updateOptions({grid:n.attributes});else for(const[e,i]of Object.entries(n.attributes))t.options.grid[e]=i;U(t)},K=function(e,t){const n=t||{},i=Array.isArray(e)?M(e):M(e.split(","));if(Array.isArray(i)){we.prepareUpdate();for(let e of i)Q(e,n);we.pushUpdate()}},q=function(e){e=e||{},we.withTransactionUpdate((function(){var t;for(t in e)if(Object.hasOwnProperty.call(e,t)){let n=t.split(","),i=M(n[n.length-1]);if(null!==i){i.filter((function(e){return e.getRIRpath().toString()===t})).forEach((function(n){Q(n,{attributes:e[t]})}))}}}))},J=function(e,t){Array.isArray(e)&&e.length>0&&we.withTransactionUpdate((function(){e.forEach((function(e){let n=e.split(","),i=M(n[n.length-1]);if(null!==i){i.filter((function(t){return t.getRIRpath().toString()===e})).forEach((function(e){e.removeAttribute(t)}))}}))}))},W=function(t,n){var i,o,r,s=a.getBehavior("TreeListViewBehavior");if(we.prepareUpdate(),i=s.getRelationNodeOptions(t,n),e.is(i))for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r=i[o].attributes,e.is(r)&&K(o,{attributes:r}));we.pushUpdate()},Z=function(t){var n,i,o,r,l,u,c=s.getReference(t.getReferencePID()),d=a.getBehavior("TreeListViewBehavior"),g=a.getBehavior("TLV3DViewerBehavior"),f=a.getBehavior("GraphViewBehavior"),p=a.getBehavior("Viewer3DBehavior");(e.is(t)||e.is(d))&&(t.isRoot(!0)?(n=o=d.getReferenceNodeOptions(c),e.is(g)&&(r=g.getReferenceNodeOptions(),n=e.merge(o,r)),e.is(f)&&(l=f.getReferenceNodeOptions(c),n.grid=e.merge(o.grid,l.grid)),e.is(p)&&(u=p.getReferenceNodeOptions(),n=e.merge(o,u))):(i=s.getInstance(t.getInstancePID()),n=o=d.getInstanceNodeOptions(c,i,t.getAbsolutePath()),e.is(g)&&(r=g.getReferenceNodeOptions(),n=e.merge(o,r)),e.is(f)&&(l=f.getInstanceNodeOptions(c,i),n.grid=e.merge(o.grid,l.grid)),e.is(p)&&(u=p.getReferenceNodeOptions(),n=e.merge(o,u))),t.updateOptions(n),U(t))},$=function(t,n){const i=(o=n,e=>o.filter((t=>((e,t)=>e===t.getReferencePID())(e,t)||((e,t)=>!!(e=>!e.isRoot())(t)&&e===t.getInstancePID())(e,t))));var o;const r=a.getBehavior("CfgColumnsBehavior");if(e.is(r)){let e={data:[],pids:[]};we.prepareUpdate();try{r.getCombinedEntriesFromUpdatedAttributesObj(t).forEach((([t,n])=>{const o=r.trimAttributesBasedOnVisibleDataIndices(n),a=i(t);for(let e of a)Q(e,{attributes:o});e.data.push(n),e.pids.push(t)})),a.notify("updateEffectivity",e)}finally{we.pushUpdate()}}},ee=function(t,n){var i=n||null,o=t.getState();e.is(i)||(i=t.hasChildren()?t.isExpanded()?Ce:Pe:be),!0===t.fromXEN?t.setState({state:be}):i!==o&&(i===De?t._expandState="expandingState":t.setState({state:i}))},ne=function(t){const n=a.getBehavior("ModelBehavior");if(e.is(n))return n.withMutexLock(t);a.log('"ModelBehavior" is not available to use MutexLock. Doing without any lock');return t()},ie=function(n){var i=a.getBehavior("TreeListViewBehavior");i.isInverseRelationColumnPresent()&&ne((()=>new t((function(t,i){var o,r,l=new Set,u=[],c=[],d=!1;o=n.filter((function(t){var n=!1;return!!e.is(t.options.areInverseRelationColumnsFilled,"boolean")&&t.options.areInverseRelationColumnsFilled||(s.needToQueryForConnections(t.getReferencePID())||e.is(t.getInstancePID())&&s.needToQueryForConnections(t.getInstancePID())?n=!0:c.push(t)),n})),c.length>0&&(c.forEach((function(e){Z(e),e.options.areInverseRelationColumnsFilled=!0})),d=!0),o.length>0?(o.forEach((function(t){var n=t.getInstancePID();e.is(n)&&l.add(n),l.add(t.getReferencePID())})),l.forEach((function(e){u.push(e)})),(r=o).forEach((function(e){e.options.areInverseRelationColumnsFilled=!1})),s.getInverseConnectionsFromServer(u,{onComplete:function(){r.forEach((function(e){Z(e),e.options.areInverseRelationColumnsFilled=!0})),a.notify("nodesUpdatedInAsync",a.getId()),t()},onFailure:function(e){i(e)}})):(d&&a.notify("nodesUpdatedInAsync",a.getId()),t())})))).catch((function(e){a.log("Inverse Relation Column update failed. Reason: "+e)}))},oe=function(t,n){let i=null,o={};const r=function(){let t;return e.is(i)?t=i:(t=n.filter((function(e){return!ue(e)})),i=t),t};h.isExpandFetchFetchEnabled()&&"Index"===a.getPreferenceValue("navigateOnIndex")&&!s.isAuthoringMode()&&ie(r());const l=a.getBehavior("AltSubBIBehavior");e.is(l)&&l.isCmdActive()&&l.showBIStatus(r());const u=a.getBehavior("CfgColumnsBehavior");e.is(u)&&u.isAnyCfgColumnVisible()&&re(r());const c=a.getBehavior("OperationTimeBehavior");if(e.is(c)&&c.isColumnVisible()){let t=r().map((e=>e.getRIRpath()));o=e.extend(o,c.getUpdateOptionsForVisibleNodes(t),!0)}Object.keys(o).length>0&&q(o)};const Ee=e=>t=>{we.prepareUpdate();for(let n of t)n.updateOptions({areCfgColumnsFilled:e});return we.pushUpdate(),t};return re=function(n){const i=Ee(!0),o=Ee(!1),r=a.getBehavior("CfgColumnsBehavior");e.is(r)&&ne((()=>function(n,r){return new t(((t,a)=>{const s=r.filter((t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled)));if(s.length>0){o(s);const e=n.getNodeIdsObjAsPerExternalSpec(s);n.updateAttributes(e).then((e=>{$(e,s),i(s),t()})).catch((function(e){a("Something failed while updating Cfg attributes in Tree: "+e)}))}else t()}))}(r,n))).catch((function(e){a.log("Updating Configuration columns failed. Reason: "+e)}))},ae=function(e){var t=M(e);Array.isArray(t)&&t.forEach(Z)},se=function(){var t;a.getBehavior("TreeListViewBehavior").has3DHideShowColumn()&&(t=we.getMatchingNodeModels((function(t){var n=t.options.hideShow3D,i=!1;return e.is(n,"boolean")&&(i=!1===n),i}))).length>0&&(we.prepareUpdate(),t.forEach((function(e){e.updateOptions({hideShow3D:!0})})),we.pushUpdate())},ue=function(t){return!(!e.is(t)||!e.is(t.getNodeSource,"function"))&&t.getNodeSource()===o.NODE_SOURCE.GROUPING},ce=function(e){return new o({label:l.getNLSValue(e),grid:{},useAsyncPreExpand:!1,referenceType:e+"Node",referencePID:e+"Node"})},de=function(e){const t=(e=>{const{found:t}=F([e]);return t})(e).filter((e=>!e.isRoot()));return t},E=function(e){var t=this;t.withTransactionUpdate((function(){e.forEach((e=>{t.selectNode(e)}))}))},N=function(e){var t=this;t.withTransactionUpdate((function(){e.forEach((e=>{t.unSelectNode(e)}))}))},he=function(e,t,n,i){var o=s.getReference(e);n&&(Ve=0),t.addNode(o,{forceDBMode:!1,isFlatView:n,rootId:e,filterQuery:i}),n||t.expandAllRoots(),we.reapplyFilterModel()},pe=function(e){const{found:t}=F(e);return t},me=function(){return we._xso.get()},Ie=function(t){if(e.is(t)&&"success"===t.status&&e.is(t.references))for(let e of t.references){const t=e.physicalid,n=e.partNumber;s.getReference(t).set("EnterpriseExtension.V_PartNumber",n)}else a.warn(l.getNLSValue("Error.EnterpriseExtension.V_PartNumber.Update"))},ye=function(t){if(e.is(t)){let n=M(t,!0);n=e.is(n,"array")?n[0]:n,e.is(n)&&n.expand()}},{listenTo:function(){return{changeSortIndex:this.onChangeSortIndex,Hide:this.onHideRootNode,HideAll:this.onHideAll,visibleNodesChanged:oe,updateRelationsColumn:ae,Filter3DApplied:se,selectNodes:E,unSelectNodes:N,updateNodes:q,unsetNodeAttr:J,updateEINAttribute:Ie,expandedFromProcedureView:ye}},onStart:function(t){var n=s.isNavigateOnDemand();y=!!e.is(t.registerRoots)&&t.registerRoots,b=e.is(t.withLinksResolved,"boolean")?t.withLinksResolved:!n,D=e.is(t.displayBadgeProductScope)?t.displayBadgeProductScope:null,v=e.is(t.displayBadgeProcessScope)?t.displayBadgeProcessScope:null,C=e.is(t.displayBadgePartialProductScope)?t.displayBadgePartialProductScope:null,P=e.is(t.displayBadgePartialProcessScope)?t.displayBadgePartialProcessScope:null,R=e.is(t.displayBadgeRPL)?t.displayBadgeRPL:null,V=we.onPreExpand(H),w=we.onPostExpand(G),S=we.onPreCollapse(X),L=we.onPostCollapse(z),T(),A=!!e.is(t.noExpandServerCall,"boolean")&&t.noExpandServerCall},onStop:function(){we.empty(),e.is(S)&&(this.removeEventListener(S),S=void 0),e.is(L)&&(this.removeEventListener(L),L=void 0),this.removePreExpandListener(),e.is(w)&&(this.removeEventListener(w),w=void 0)},removePreExpandListener:function(){e.is(V)&&(this.removeEventListener(V),V=null)},validate:function(t){var n;return e.is(t)&&e.is(x(t.get("PID")))&&((n={}).key="AlreadyRoot",n.param="referenceName",n.paramValue=t.get("PLMEntity.V_Name")),n},getNodeModel:function(e,t){return M(e,t)},getNodeInfo:function(t,n){var i,o=null,r=M(t,n);return i=function(e){return{label:e.getLabel(),referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),referenceType:e.getReferenceType(),absPath:e.getAbsolutePath()}},Array.isArray(r)?o=r.map(i):e.is(r,"object")&&(o=i(r)),o},addNodeModel:function(e,t){return B(e,t)},removeNode:function(t,n){var i;(e.is(t,"string")?we.searchTree(t):e.is(t,"array")?t:[t]).forEach((function(e){var t,n;e.isRoot(!0)?(n=e.getID(),e.remove(),!0===y&&f.removeRoot(a.getId(),n),a.notify("removeRoot",n)):(t=e.getParent())&&t.removeChild(e)})),i=a.getBehavior("DropZoneViewBehavior"),O()&&e.is(i)&&(i.setIcon(i.iconEnum.DROPHERE),i.show()),e.is(n,"function")&&n()},removeNodes:function(e,t){var n;Array.isArray(e)?(n=we.searchTree(e),this.removeNode(n,t)):t()},hideNodes:function(t){var n,i,o=[],r={};e.is(t,"array")&&t.length>0&&(n=a.getBehavior("ExpandFilterBehavior"),e.is(n)&&n.resetFilterUI(),o=t.filter((function(t){return e.is(t)&&t.isRoot(!0)})),r={callback:this.removeNode,globalArray:o,context:this,blockSize:50},we.prepareUpdate(),we.getXSO().empty(!1),s.getExecuteByBlockPromise(r).then((function(){var t=[];we.pushUpdate(),e.is(o,"array")&&o.length>0&&(o.forEach((function(e){var n=s.getReference(e.getID());t.push(n)})),a.notify("hideRootNode",[t])),i=f.getRoots(),e.is(i,"array")&&0===i.length&&s.resetCollections()})))},onHideRootNode:function(){this.hideNodes(we.getSelectedNodes())},onHideAll:function(){this.hideNodes(we.getRoots(!0))},updateCfgColumnsForCommandUpdates:function(e,n){const i=Ee(!0),o=pe(e);o.length>0&&ne((()=>($(n,o),i(o),t.resolve()))).catch((function(e){a.log("Updating Configuration columns failed. Reason: "+e)}))},onChangeSortIndex:function(t){var n=we.getTreeNodeModel(t.get("PID"));e.is(n)&&(n.setAttribute("sortIndex",t.get("sortIndex")),n.getParent().sortChildren({isRecursive:!1,sortFunction:function(e,t){return e.options.grid.sortIndex<t.options.grid.sortIndex?-1:1}}))},isSelected:function(t){var n=M(t,!1),i=!1;return e.is(n,"array")&&(i=n.some((function(e){return e.isSelected()}))),i},isNodeAdded:function(t){var n=M(t,!0);return e.is(n)},selectNode:function(t){var n=M(t,!1);e.is(n,"array")&&n.forEach((function(e){e.isSelected()&&e.unselect(),e.select()}))},unSelectNode:function(t){var n=M(t,!1);e.is(n,"array")&&n.forEach((function(e){e.isSelected()&&e.unselect()}))},updateBadge:function(t,n){var i;Array.isArray(t)?(i=we.searchTree(t),e.is(i)&&k(i,n)):e.is(t)&&(i=M(t,!1),e.is(i)&&k(i,n))},getWUXNodeModel:function(){return we},unSelectAll:function(){we.unselectAll()},withTransactionUpdate:function(e){we.withTransactionUpdate(e)},prepareUpdate:function(){we.prepareUpdate()},pushUpdate:function(){we.pushUpdate()},getRoots:function(){return we.getRoots(!0).map((function(e){return e.getReferencePID()}))},getRootNodes:function(){return we.getRoots(!0)},getChildren:function(t){var n=M(t,!0),i=[];return e.is(n)&&(i=n.getChildrenPID()),i},getAllDescendants:function(){return we.getAllDescendants(!0)},getVisibleNodesInViewport:function(){var t,n,i,o,r=a.getBehavior("TreeListViewBehavior").getTreeListViewManager(),s=[];if(e.is(r))for(i=(n=r.getDataGridViewLayout().getMinMaxVisibleRowIDs()).minRowID,t=r.getDataGridViewModel();i<=n.maxRowID;i++)o=t[i],!ue(o)&&e.is(o)&&s.push(o);return s},getSelectedNodes:function(){return me()},getHighlightedNodes:function(){return we.getHighlightedNodes()},getSelectedNodesInfo:function(){return this.getSelectedNodes().map((function(e){return{id:e.getID(),absPath:e.getAbsolutePath()}}))},update3DNodeOptions:function(e){var t=this.getSelectedNodes();t.length>0&&(we.prepareUpdate(),t.forEach((function(t){t.updateOptions({hideShow3D:e})})),we.pushUpdate())},emptyNodeModel:function(){var t,n=a.getBehavior("ExpandFilterBehavior");if(e.is(n)&&n.clear(),we.prepareUpdate(),e.is(we)){const e=this.getSelectedNodes();Array.isArray(e)&&e.length>0&&we._xso.empty(),we.empty()}we.pushUpdate(),we._numberOfNodesInDocument<1&&(t=a.getBehavior("DropZoneViewBehavior"),e.is(t)&&t.show())},addEventListener:function(e,t){return we.getModelEvents().addEventListener(e,t)},removeEventListener:function(e){we.getModelEvents().unsubscribe(e)},addNode:function(t,n){var i,o,r,l,u,c=n||{},d=!!e.is(c.loadRootOnly,"boolean")&&c.loadRootOnly,g=!e.is(c.loadChildren,"boolean")||c.loadChildren,f=!e.is(c.silentMode,"boolean")||c.silentMode,p=e.is(c.withLinksResolved,"boolean")?c.withLinksResolved:b,h=!!e.is(c.doNotExpand,"boolean")&&c.doNotExpand,m=!!e.is(c.forceDBMode,"boolean")&&c.forceDBMode,I=!!e.is(c.updateItem,"boolean")&&c.updateItem,y=e.is(c.onAddToTreeListFail,"function")?c.onAddToTreeListFail:null,D=e.is(c.onAddToTreeListComplete,"function")?c.onAddToTreeListComplete:null,v={noTimeout:!0},C=!!e.is(c.fromXEN,"boolean")&&c.fromXEN,P=!e.is(c.loadRelatedobjectsToView,"boolean")||c.loadRelatedobjectsToView,R=e.is(c.filterQuery)?c.filterQuery:null;l=function(t,n){var i="";e.is(n)&&(i=n.getLabel(),g&&!n.isExpanded()&&n.expand(),Z(n),a.notify("addRootNode",[n.getID(),{loadRelatedobjectsToView:P}])),a.notify("stopProgress",v),e.is(D,"function")&&D(t,i)},u=function(n){var i=we.getTreeNodeModel(t.get("PID"));a.notify("stopProgress",v),Array.isArray(i)&&i.length>0&&i.forEach((function(e){e&&e.getState()===De&&(ee(e,Pe),e.options.children=[])})),e.is(y,"function")&&y(n)},(c=e.merge(c,{loadChildren:g,silentMode:f,withLinksResolved:p,forceDBMode:m,updateItem:I,onFailure:u,loadRootOnly:d,fromXEN:C,includeXcadDrawings:a.getPreferenceValue("includeXcadDrawingsInEBOMView")})).isFlatView=!!e.is(c.isFlatView,"boolean")&&c.isFlatView,we.prepareUpdate(),t.isReference()?(a.notify("startProgress",v),c.onEndAddToNodeList=l,_(t.get("PID"),null,c)):t.isInstance()&&(o=s.getAggregatingReferenceModelFromInstance(t),r=s.needToQueryForChildren(o),e.is(o)&&(i=we.searchTree(o.get("PID")),e.is(R)&&(i=i.filter((function(e){return e.isRoot()}))),e.is(i)&&i.length>0&&i.forEach((function(e){var n,i={noTimeout:!0};a.notify("startProgress",i),n=e.getState(),_(t.get("PID"),e,c),r?(ee(e,ve),h=!0):n===Pe?te(e)||(ee(e,ve),h=!0):n===ve&&(ee(e,ve),h=!0),h||e.isExpanded()||e.expand(),a.notify("stopProgress",i)})))),we.pushUpdate()},addOccurences:function(t){var n,i,o=[],r={},l=[],u=[];n=function(t,n){e.is(r[t])||(r[t]=[]),r[t].push(n)},i=function(t,n){var i=t.getState();e.is(n)&&n===ve?ee(t,ve):i===Pe&&(te(t)?t.expand():ee(t,ve))},t.forEach((function(e){o=o.concat(e.filter((e=>o.indexOf(e)<0)))})),we.searchTree(o).forEach((function(t){var i=t.getReferencePID(),o=t.getInstancePID();e.is(i)&&(n(i,t),l.indexOf(i)<0&&l.push(i)),e.is(o)&&u.indexOf(o)<0&&u.push(o)})),t.forEach((function(e){e.forEach((function(t,o){var c,d,g,f,p,h;0===o?(d=e[o],l.indexOf(d)<0?(f=s.getReference(d),h=ge(f,{forceIntializeChildren:!0}),ee(h,ve),n(d,h),l.push(d),a.notify("addRootNode",[d])):r[d].forEach((function(e){i(e)}))):o%2!=0&&(u.indexOf(t)<0?(c=e[o-1],d=e[o+1],g=r[c],f=s.getReference(d),p=s.getInstance(t),g.forEach((function(e){var o=e.getState();h=fe(p,f,e,null,{forceIntializeChildren:!0}),ee(h,ve),i(e,o),n(d,h),u.push(t),l.indexOf(d)<0&&l.push(d)}))):(d=e[o+1],r[d].forEach((function(e){i(e.getParent())}))))}))}))},updateNode:function(t,n){var i=M(t);n=n||{},e.is(i,"array")&&(we.prepareUpdate(),i.forEach((function(t){e.is(n.loadChildren)&&n.loadChildren&&(j(t,n),(t.isSelected()||t.isRoot(!0))&&t.expand()),Z(t)})),we.pushUpdate())},updateAttributes:function(t){var n,i=a.getBehavior("TreeListViewBehavior");e.is(t)?(n=i.getUpdateNodeOptions(t),e.is(n)&&K(t.get("PID"),n),W(t)):a.debug("updateAttributes: Input model is undefined.")},updateDocAttributes:function(t){var n,i=a.getBehavior("TreeListViewBehavior");we.prepareUpdate(),n=i.getDocumentNodeOptions(t),e.is(n)&&K(t,n),we.pushUpdate()},reparent:function(t){var n,i,o,r,l,u,c,d,g=this,f={},p=function(e,t){return e.add(t)};e.is(t)&&(a.notify("startProgress",f),we.prepareUpdate(),l=t.formerParentsPIDArray,u=t.movedInstPIDArray,Array.isArray(l)&&(c=l.reduce(p,new Set),d=new Set,Array.isArray(u)&&(d=u.reduce(p,d)),c.forEach((function(e){var t;t=M(e),Array.isArray(t)&&t.forEach((function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.filter((function(e){return d.has(e.getInstancePID())})).forEach((function(e){e.remove()}))}))}))),n=t.newParentPID,i=t.newInstPIDArray,e.is(n,"string")&&(o=M(n),Array.isArray(o)&&(o.forEach((function(e){r=e.getChildren(!0),Array.isArray(r)&&r.forEach((e=>e.remove()))})),Array.isArray(i)&&i.forEach((function(t){var n=s.getInstance(t);e.is(n)&&g.addNode(n)})))),we.pushUpdate(),a.notify("stopProgress",f))},expandAll:function(e){var t=Array.isArray(e)?e:[e];t.length>1&&(t=t.filter((function(e,t,n){return e.getParents().every((function(e){return-1===n.indexOf(e)}))}))),t.forEach((function(e){e.expandAll()}))},collapseAll:function(e){var t,n;(Array.isArray(e)?e:[e]).forEach((function(e){n=e.getState(),e.hasChildren()&&n!==Pe&&(t=n,e.collapseAll(),t===ve&&(e.removeChildren(),ee(e,ve)))}))},expandAllRoots:function(){we.getRoots(!0).forEach((function(e){e.expandAll()}))},isFilterAppliedInAnyRoot:function(){return we.getRoots(!0).some((function(e){return e.isRootFiltered()}))},filterChildren:function(t,n){var i,o=this,r=n||null,a=!!e.is(r),l=a?{filterQuery:r}:{};i=x(t),e.is(i)&&(i.setRootFiltered(a),we.withTransactionUpdate((function(){i.hasChildren()&&i.getChildren(!0).slice().forEach((function(e){o.removeNode(e)})),s.getFilteredInstancesFromCollection(i.getReferencePID(),r).forEach((function(e){o.addNode(e,l)})),a?s.needToQueryForChildren(i.getReferencePID())&&i.getState()===ve&&ee(i):s.needToQueryForChildren(i.getReferencePID())&&i.getState()!==ve&&ee(i,ve)})))},removeFilterFromAllRoots:function(){var t,n=this;return t=we.getRoots(!0).filter((function(e){return e.isRootFiltered()})),we.prepareUpdate(),t.forEach((function(e){e.setRootFiltered(!1)})),Se.traverseTreeListView((function(t){t.getState()===Pe&&(t.getChildren(!0).slice().forEach((function(e){n.removeNode(e)})),e.is(t.options.children)||(t.options.children=[])),ee(t,ve)})),we.pushUpdate(),t.map((function(e){return e.getReferencePID()}))},isDocumentEmpty:function(){return O()},setTaggerColor:function(e,t){var n;Array.isArray(e)&&(n=F(e).found,Array.isArray(n)&&n.length>0&&(we.prepareUpdate(),n.forEach((function(e){e.updateOptions({color:t.color})})),we.pushUpdate()))},getMutex:function(){const t=a.getBehavior("ModelBehavior");return e.is(t)?t.getMutex():(a.log('"ModelBehavior" is not available to use mutex'),null)},updateNodeOptions:function(t,n){var i;(i=F(t).found).length>0&&(we.prepareUpdate(),i.forEach((function(t){var i=e.clone(n);t.updateOptions(i)})),we.pushUpdate())},setSortOptions:function(e,t){Re.virtualColumnID=e,Re.sortOrder=t},isFakeNodeModel:function(e){return ue(e)},getGroupingNode:function(e){return ce(e)},addGroupingNode:function t(n,i,r,u,c){var d,g=[],f=a.getBehavior("TreeListViewBehavior");return e.is(r)&&r.length>0?(g=r.map((function(e){var t;return t=e.isReference()?f.getReferenceNodeOptions(e):f.getInstanceNodeOptions(s.getReferenceModelFromInstance(e),e),new o(t)})),d=new o({label:l.getNLSValue(n),children:g,grid:{},useAsyncPreExpand:!1,referenceType:n+"Node",referencePID:n+"Node"}),i.addChild(d)):e.is(u)&&u?(d=new o({label:l.getNLSValue(n),grid:{},icons:[l.getIconURLFromKey(c)],referenceType:c}),i.addChild(d)):(d=ce(n),i.addChild(d),Object.keys(r).forEach((function(e){t(e,d,r[e])}))),d.isExpanded()||d.expand(),d},addNodeToGroupNode:function(e,t,n){var i,r;return i=a.getBehavior("TreeListViewBehavior").getReferenceNodeOptions(e),r=new o(i),t.addChild(r,n),r},getTreeDocument:function(){return we},showOverlay:function(){var t,n,i=l.getNLSValue("View.WaitMessage"),o=a.getBehavior("TreeListViewBehavior");if(e.is(o)){for(t=o.getDataGridView();Ae.length>0;)Ae.shift().resolve();n=e.Promise.deferred(),Ae.push(n),t.displayModalLoader(i,(function(){n.promise.then((function(){t.removeModalLoader(i)}))}))}},removeOverlay:function(){1===Ae.length&&Ae.shift().resolve()},updateNodeState:function(e,t){ee(e,t)},getWhereUsedInstanceIds:function(e){return de(e).map((e=>e.getInstancePID()))},getWhereUsedInstanceIdsUnderParent:function(t){let n=[];const i=M(t);if(Array.isArray(i)&&i.length>0){const a=i.filter((t=>n=>e.equals(n.getAbsolutePath(),t))(t));if(1===a.length){const e=a[0];n=(r=e,r.getBrothers()).concat(e).filter((o=e.getReferencePID(),e=>e.getReferencePID()===o)).map((e=>e.getInstancePID()))}}var o,r;return n},resetConfigColumns:function(){const n=Ee(!1),i=(t,i)=>{const o=t.filter((t=>e.owns(t.options,"areCfgColumnsFilled")));o.length>0&&n(o),e.is(i,"function")&&i()},o=this;var r;(r=o.getAllDescendants(),new t((e=>{ne((()=>(e=>new t((t=>{const n={callback:i,globalArray:e,context:null,blockSize:100};s.getExecuteByBlockPromise(n).then((()=>{t()})).catch((()=>{t()}))})))(r))).then((function(){e()})).catch((function(t){a.log("Resetting Configuration columns failed. Reason: "+t),e()}))}))).then((function(){re(o.getVisibleNodesInViewport())}))},getFlattenNodeModel:function(t,n,i){var o=this;e.is(t)&&t.forEach((function(e){he(e,o,n,i)}))},setForceIndexMode:function(e){Le=e}}}}})),define("DS/DELPPWViewBehaviors/MoreAttributesWizardBehavior",["UWA/Core","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel","text!DS/DELPPWViewBehaviors/assets/json/MoreAttrsDeprecatedAttributes.json"],(function(e,t,n){"use strict";return{plugins:["ResourcePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","MoreAttributesWizard"],creator:function(i,o,r,a,s,l,u){var c,d,g,f,p,h,m,I,y,b,D=function(t){var n={name:"",filename:"",selectedTypes:[]},i=[];switch(t){case"MANUFACTURING":n.name="Manufacturing",n.filename="ManufacturingViewColumnConfig.xml",n.xmlKey="MANUFACTURING.columnConfigPath",n.selectedTypes=["CreateAssembly","CreateMaterial","Provide","CreateKit","Installation","Transform","Fasten","ProcessInstanceContinuous","DELFmiFunctionIdentifiedInstance"];break;case"MBOM":n.name="Manufacturing",n.filename="ProcessColumnConfig.xml",n.xmlKey="MBOM.columnConfigPath",n.selectedTypes=["CreateAssembly","CreateMaterial","Provide","CreateKit","Installation","Transform","Fasten","DELFmiFunctionIdentifiedInstance","ProcessContinuousProvide","ProcessInstanceContinuous"];break;case"RESOURCE":n.name="Resource",n.filename="ResourceViewColumnConfig.xml",n.xmlKey="RESOURCE.columnConfigPath",n.selectedTypes=["Worker","ResourceArea","Transport","Conveyor","Machine","Robot","Storage","Sensor","IndustrialMachine","NCMachine","ToolDevice","Inspect","UserDefined","Organizational","ResourceManufacturingSetup","ControlDevice"];break;case"EBOM":n.name="ProductsAndParts",n.filename="ProductPartColumnConfig.xml",n.xmlKey="EBOM.columnConfigPath",n.selectedTypes=["VPMInstance","VPMReference","VPMRepReference","Document"];break;case"ROUTINGS":n.name="Routings",n.filename="RoutingsViewColumnConfig.xml",n.xmlKey="ROUTINGS.columnConfigPath",n.selectedTypes=["DELLmiHeaderWorkPlanReference","DELLmiGeneralSystemInstance","DELLmiWorkPlanSystemInstance","DELLmiTransformationSystemInstance","DELLmiTransferSystemInstance","DELLmiStorageSystemInstance","DELLmiServiceWorkPlanSystemInstance","DELWkiSignOffInstance","DELWkiDataCollectInstance","DELWkiInstructionInstance","DELWkiAlertInstance","DELLmiUnLoadingOperationInstance","DELLmiCurveOperationInstance","DELLmiPunctualOperationInstance","DELLmiSourceOperationInstance","DELLmiSinkOperationInstance","DELLmiBufferOperationInstance","DELLmiInterruptOperationInstance","DELLmiTransferOperationInstance","DELLmiRemoveMaterialOperationInstance","DELLmiGeneralOperationInstance","DELLmiLoadingOperationInstance","DELLmiPickingOperationInstance","DELLmiHeaderOperationInstance","DELLmiGeneralSystemReference","DELLmiWorkPlanSystemReference","DELLmiTransformationSystemReference","DELLmiTransferSystemReference","DELLmiStorageSystemReference","DELLmiServiceWorkPlanSystemReference","DELLmiServiceHeaderWorkPlanReference","DELWkiSignOffReference","DELWkiDataCollectReference","DELWkiInstructionReference","DELWkiAlertReference","DELLmiUnLoadingOperationReference","DELLmiCurveOperationReference","DELLmiPunctualOperationReference","DELLmiSourceOperationReference","DELLmiSinkOperationReference","DELLmiBufferOperationReference","DELLmiInterruptOperationReference","DELLmiUnloadingOperationReference","DELLmiTransferOperationReference","DELLmiRemoveMaterialOperationReference","DELLmiGeneralOperationReference","DELLmiPunctualOperationReference","DELLmiRemoveMaterialOperationReference","DELLmiLoadingOperationReference","DELLmiPickingOperationReference","DELLmiHeaderOperationReference","DELLmiQtyControlProcessReference","SourceSystem","DELLmiCurveOperationReference","DELLmiServiceWorkPlanOperationalReference","DELLmiServiceWorkPlanRectifyingReference","DELLmiServiceWorkPlanSupportingTaskReference"];break;case"FORMULA":n.name="Formula",n.filename="FormulaViewColumnConfig.xml",n.xmlKey="FORMULA.columnConfigPath",n.selectedTypes=["CreateAssembly","CreateMaterial","Provide","DELFmiFunctionIdentifiedInstance","ProcessContinuousCreateMaterial","ProcessContinuousProvide","ContinuousByProduct","DiscreteByProduct","MBOMContinuousPhaseReference","MBOMContinuousInProcessItem","MBOMContinuousPhaseInstance","ProcessInstanceContinuous"];break;case"RECIPE":n.name="Recipe",n.filename="RecipeViewColumnConfig.xml",n.xmlKey="RECIPE.columnConfigPath",n.selectedTypes=["DELLmiHeaderWorkPlanReference","DELLmiWorkPlanSystemInstance","DELWkiSignOffInstance","DELWkiDataCollectInstance","DELWkiInstructionInstance","DELWkiAlertInstance","DELLmiGeneralOperationInstance","DELLmiHeaderOperationInstance","DELLmiWorkPlanSystemReference","DELWkiSignOffReference","DELLmiRemoveMaterialOperationReference","DELWkiDataCollectReference","DELWkiInstructionReference","DELWkiAlertReference","DELLmiPunctualOperationReference","DELLmiUnloadingOperationReference","DELLmiGeneralOperationReference","DELLmiHeaderOperationReference","DELLmiQtyControlProcessReference","SourceSystem","DELLmiCurveOperationReference"];break;case"SBOM":n.name="Manufacturing",n.filename="ProcessColumnConfig.xml",n.xmlKey="SBOM.columnConfigPath",n.selectedTypes=["DELServiceAssemblyReference","DELServicePartReference","DELServiceKitReference","DELServiceAttachingItemReference","DELServiceSpareItemReference","DELFmiFunctionIdentifiedInstance","DELContinuousServicePartReference"];break;case"CBOM":n.name="Construction",n.filename="ProcessColumnConfig.xml",n.xmlKey="CBOM.columnConfigPath",n.selectedTypes=["DELConstructionStructure","DELConstructionWorkPackageEach","DELConstructionWorkPackageLength","DELConstructionWorkPackageGroup","DELConstructionWorkPackageArea","DELConstructionWorkElementEach","DELConstructionWorkElementLength","DELConstructionWorkElementArea"];break;default:return n}return n.selectedTypes.forEach((function(e){i.push(a.getTypeHierarchy(e))})),e.is(i,"array")&&(i=i.flat(),n.selectedTypes=i.concat(n.selectedTypes)),n},v=function(n,i,o,l){var u,c,d,f,p,h,m,I,y=new Map,b=new Map;c=a.getReferenceTypes(),d=a.getInstanceTypes(),u=d.length>0?c.concat(d):c,u=n.selectedTypes.filter((e=>u.includes(e))),(h=u,m={classes:h},I=new Map,new Promise((function(t){s.webServiceRequest({url:"dictionary/interfaces",method:"POST",data:e.Json.encode(m),onComplete:function(n){var i=[],o=[];n.results.forEach((function(t){var n=t.name;t.interfaces.forEach((function(t){var r;r=I.get(t.name),e.is(r)?i[r].declareIn.push(n):(t.declareIn=[n],i.push(t),I.set(t.name,i.length-1),o.push(t.name))}))})),t([i,o])},onFailure:function(){t([[],[]])}})}))).then((function(n){n[0].forEach((function(e){var t=[];y.set(e.name,e.declareIn),e.declareIn.forEach((function(n,i,o){t.push(r.getNLSValue(n)),i===o.length-1&&b.set(e.name,t)}))})),function(t,n,i,o,a){var l,u=[],c=new Map,d=[].concat(n).concat(t);return l={classes:d},new Promise((function(t){s.webServiceRequest({url:"dictionary/class/properties",method:"POST",data:e.Json.encode(l),onComplete:function(s){s.results.forEach((function(t){var s,l,d,g,f;d="Interface"===t.type,-1!==o.indexOf(t.name)&&(s="reference"),-1!==a.indexOf(t.name)&&(s="reference"===s?"Both":"instance"),e.is(s)||-1===n.indexOf(t.name)||(f=i.get(t.name),e.is(f,"array")&&f.length>0&&f.some((function(e){return-1!==o.indexOf(e)&&(s="reference"),-1!==a.indexOf(e)&&(s="reference"===s?"Both":"instance"),"Both"===s}))),l=t.name,g=r.getNLSValue(t.name),t.properties.forEach((function(t){var n,i,o,r;t.instOrRef=s,t.from=[l],t.fromNLS=[g],t.isFromExtension=d,t.attrNature=null,r=t.name===t.name.toLowerCase()&&!d,"name"===t.name||("Both"===s?((o=JSON.parse(JSON.stringify(t))).instOrRef="reference",n=c.get(o.name+o.instOrRef+o.nlsName),e.is(n)?-1===u[n].from.indexOf(l)&&(u[n].from.push(l),u[n].fromNLS.push(g)):(u.push(o),c.set(o.name+o.instOrRef+o.nlsName,u.length-1)),(i=JSON.parse(JSON.stringify(t))).instOrRef="instance",n=c.get(i.name+i.instOrRef+i.nlsName),e.is(n)?-1===u[n].from.indexOf(l)&&(u[n].from.push(l),u[n].fromNLS.push(g)):(r||u.push(i),c.set(i.name+i.instOrRef+i.nlsName,u.length-1))):(n=c.get(t.name+s+t.nlsName),e.is(n)?t.isFromExtension?u.push(t):(u[n].from.push(l),u[n].fromNLS.push(g)):(r?"reference"===s&&u.push(t):u.push(t),c.set(t.name+s+t.nlsName,u.length-1))))}))})),t(u)}})}))}(u,n[1],y,c,d).then((function(n){g.prepareUpdate(),n.forEach((function(n,r,s){var u=-1!==Array.from(i.keys()).indexOf(n.name),c=b.get(n.from[0]),d=!1,h=new t({label:n.nlsName,grid:{V_Name:n.nlsName,name:n.name,MoreAttr_InstOrRef:"reference"===n.instOrRef?"product":"flow-cascade",MoreAttr_Type:n.fromNLS.sort(),MoreAttr_isExtension:n.isFromExtension,MoreAttr_Scope:e.is(c)?c.sort():null,fromNLS:e.is(n.fromNLS,"array")?n.fromNLS.sort():n.fromNLS,scopes:b,from:e.is(n.from,"array")?n.from.sort():n.from,attrIsInXML:u,attrInfoArray:{dataIndex:n.name,entity:n.instOrRef,dicoType:n.isFromExtension?n.from[0]:null},dataIndex:n.name,selectable:!0}}),m=!1,I=l.get(n.name+"."+n.instOrRef);e.is(I)&&("undefined"===I[0]?d=!0:I.some((function(e){return n.from.includes(e)&&(d=!0),d}))),-1!==o.indexOf(n.name)||d||(u?(f=i.get(n.name),e.is(f,"array")?f.forEach((function(t){t.entity===n.instOrRef?e.is(t.dicoType)?a.isAKindOf(n.from[0],t.dicoType)||"PLMEntity"===t.dicoType&&"reference"===n.instOrRef||"PLMInstance"===t.dicoType&&"instance"===n.instOrRef?(g.addRoot(h,0),h.select(),m=!0):m||g.addRoot(h):(g.addRoot(h,0),h.select(),m=!0):m||g.addRoot(h)})):(g.addRoot(h,0),h.select())):g.addRoot(h)),r===s.length-1&&(g.pushUpdate(),(p=g.getFilterManager()).setPropertyFilterModel("MoreAttr_InstOrRef",{filterId:"string"}),p.setPropertyFilterModel("MoreAttr_Type",{filterId:"string"}),p.setPropertyFilterModel("MoreAttr_isExtension",{filterId:"string"}),p.setPropertyFilterModel("MoreAttr_Scope",{filterId:"string"}))}))}))}))},C=function(t){var i,a,C,P,R,A,V,w,S=[],L=[],E=t.currentView,N=t.columnPreferences,T=new Map,M=[],F=e.is(N),x=new Map;e.Json.decode(n).deprecatedAttributes.forEach((function(t){var n=x.get(t.name+"."+t.entity);e.is(n)?e.is(t.dicoType)&&(n.push(t.dicoType),x.set(t.name+"."+t.entity,n)):e.is(t.dicoType)?x.set(t.name+"."+t.entity,[t.dicoType]):x.set(t.name+"."+t.entity,["undefined"])})),i=o.getBehavior("TreeListViewBehavior"),p=o.getBehavior("UXFactoryBehavior"),h=p.getComponent("WUXFrameWindowsManager"),m=o.getAppContext(),I=h.getFrameWindow(m),y=p.getComponent("Dialog"),b=p.getComponent("Button"),P=p.create("Element","div",{class:"mil-tree-container",styles:{height:"100%",width:"100%"}}),C=(a=I.getImmersiveFrame()).elements.container.getSize(),A={shouldBeSelected:function(e){return e.options.grid.selectable},layoutOptions:{layoutDensity:"comfortable"}},d=o.getBehavior("WUXNodeModelBehavior"),(g=d.getWUXNodeModel()).setFilterModel({type:{filterId:"string"}}),e.extend(g.options,A),i.loadDocument(g),i.getContent().inject(P),(V=i.getDataGridView()).cellSelection="multiple",F?(Object.keys(N).forEach((function(e){var t;e!==E&&(t=D(e),L.push({filename:t.filename,name:t.name,xml:N[e]}))})),(f=N[E]).forEach((function(t,n,i){var o,r,a,s=!1;e.is(t.dataIndex[0])&&e.is(t.dataIndex[1])&&(s=e.is(t.displayType),e.is(t.attribute,"array")?t.attribute.forEach((function(e){s&&M.push(e),-1!==Array.from(T.keys()).indexOf(e.dataIndex)?T.get(e.dataIndex).push({dicoType:e.dicoType,entity:e.entity}):T.set(e.dataIndex,[{dicoType:e.dicoType,entity:e.entity}])})):e.is(t.attribute.dataIndex)&&(o=t.attribute.dicoType,r=t.attribute.dataIndex,a=t.attribute.entity,s&&M.push(r),-1!==Array.from(T.keys()).indexOf(r)?T.get(r).push({dicoType:o,entity:a}):T.set(r,[{dicoType:o,entity:a}])),n===i.length-1&&(R=D(E),v(R,T,M,x)))}))):(S=l.getCurrentView(),Object.keys(S).forEach((function(e){var t;e!==E&&(t=D(e),s.getXMLValues(t.xmlKey,(function(e){L.push({filename:t.filename,name:t.name,xml:e})})))})),R=D(E),(w=R.xmlKey,new Promise((function(t){var n=new Map,i=[];s.getXMLValues(w,(function(o){(f=o.Config.Columns.Column).forEach((function(o,r,a){var s,l,u;e.is(o.dataIndex)?(l=o.dicoType,s=o.dataIndex,u=o.entity,e.is(o.displayType)&&i.push(s),-1!==Array.from(n.keys()).indexOf(s)?n.get(s).push({dicoType:l,entity:u}):n.set(s,[{dicoType:l,entity:u}])):e.is(o.Attribute,"array")&&o.Attribute.forEach((function(e){-1!==Array.from(n.keys()).indexOf(e.name)?n.get(e.name).push({dicoType:e.dicoType,entity:e.entity}):n.set(e.name,[{dicoType:e.dicoType,entity:e.entity}])})),r===a.length-1&&t([n,i])}))}),(function(){t([])}))}))).then((function(e){T=e[0],M=e[1],v(R,T,M,x)}))),(c=new y({domId:"moreAttributes-Dialog",immersiveFrame:a,modalFlag:!0,visibleFlag:!1,resizableFlag:!1,snappableFlag:!0,height:C.height-200,width:C.width-500,title:r.getNLSValue("ViewPreferencesUI.MoreAttributesWizardTitle"),content:P,closeButtonFlag:!0,buttons:{Ok:new b({domId:"moreAttributes-Dialog-Ok",className:"ok primary",label:r.getNLSValue("Dialog.Ok"),emphasize:"primary",disabled:!1,onClick:function(){var t=d.getSelectedNodes(),n=[],i=[],o=[];t.forEach((function(t){t.options.grid.attrIsInXML||e.is(t.options.grid.attrInfoArray.dicoType)||n.push(t.options.grid.from[0]+":"+t.options.grid.dataIndex),o.push(t.options.grid.name)})),Array.from(T.keys()).forEach((function(e){o.includes(e)||M.includes(e)||i.push(e)})),n.length>0?s.webServiceRequest({url:"dsmfg/private/V0/invoke/getTrueDicoType",method:"POST",data:e.Json.encode(n),onComplete:function(n){var o,r,a,s,l,c=new Map;if(e.is(n))for(a=0;a<t.length;a++)s=(o=t[a]).options.grid.name,l=o.options.grid.attrInfoArray.entity,r=s+"."+o.options.grid.from[0],c.get(r)?(t.splice(a,1),a--):e.is(n[s])&&e.is(n[s][l])&&n[s][l].length>0?(1===n[s][l].length?(o.options.grid.attrNature=n[s][l][0],o.options.grid.attrInfoArray.dicoType=n[s][l][0]):(o.options.grid.attrNature=null,o.options.grid.attrInfoArray.dicoType=[],n[s][o.options.grid.attrInfoArray.entity].forEach((function(e){o.options.grid.attrInfoArray.dicoType.push(e)}))),c.set(r,!0)):c.set(r,!0);u.processAttributesWizard(R,f,L,t,I,i,F)},onFailure:function(){u.processAttributesWizard(R,f,L,t,I,i,F)}}):u.processAttributesWizard(R,f,L,t,I,i,F)}}),Cancel:new b({domId:"moreAttributes-Dialog-Close",className:"close",label:r.getNLSValue("MIL.PanelCloseButton"),onClick:function(){c.close()}})}})).close=function(){d.emptyNodeModel(),g.empty(),c.hide(),e.is(V.findDialog)&&V.findDialog.close()},c.show()};return{listenTo:function(){return{MoreAttributesWizard:C}},onStart:function(){}}}}})),define("DS/DELPPWViewBehaviors/ReplaceWhereUsedBehavior",["UWA/Core","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel"],(function(e,t){"use strict";return{plugins:["SelectionPlugin","DicoPlugin","AttributePlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin","ReplaceWhereUsedPlugin"],creator:function(n,i,o,r,a,s,l,u,c){var d,g=0,f=[],p=new Map,h=new Map,m=new Map,I=new Map,y=function(){var t;return e.is(t)||(t=i.getBehavior("WUXNodeModelBehavior")),t},b=function(){var t;return e.is(t)||(t=i.getBehavior("MfgItemReplaceBehavior")),t},D=function t(n,i){e.is(n,"array")&&n.forEach((function(n){e.is(n.options)&&(n.options.expanded=i,e.is(n.options.parentNodes)&&n.options.parentNodes.length>0&&(!i||"collapseState"===n._expandState)&&t(n.options.parentNodes,i))}))},v=function(t){var n=l.getReferenceModel(t);return!(!e.is(n)||!n.isSystem()&&!n.isWorkInstruction())},C=function(t){var n,o,r,a,l=null,d={},g=y(),h=!0;o=function(){i.notify("startProgress",d),l.prepareUpdate()},r=function(){l.preExpandDone(),l.pushUpdate(),i.notify("stopProgress",d),i.notify("onNodeExpanded")},e.is(t)&&e.is(t.data)&&e.is(t.data.nodeModel)&&(n=t.data,l=n.nodeModel,a=l._options,e.is(l)&&e.is(a)&&(a.isComboboxDisplayable&&(!a.isLeaf||7!==a.grid.RWU_Action_Reference.id&&9!==a.grid.RWU_Action_Reference.id&&10!==a.grid.RWU_Action_Reference.id)||(h=!1),o(),a.alreadyExpanded?(D(a.parentNodes,!0),r()):u.webServiceRequest({url:"dsmfg/private/V0/invoke/replaceWhereUsed",method:"POST",onComplete:function(t){var n=0;t.forEach((function(){t[0].from.forEach((function(i){var o,r,a,u=e.is(p.get(t[0].to[n].instancePID)),d={};Object.keys(t[0].to[n]).forEach((function(e){"interface"!==e&&"PID"!==e&&"isInstanceOf"!==e&&"instancePID"!==e&&"physicalid"!==e&&"referencePID"!==e&&(d[e+".instance"]=t[0].to[n][e],d[e+".reference"]=t[0].to[n][e])})),o=c.getRWUNodeOptions({label:t[0].to[n]["PLMEntity.V_Name"]+"."+t[0].to[n].majorrevision+s.getNLSValue("RWU.UsedIn")+i["PLMEntity.V_Name"],V_Name:i["PLMEntity.V_Name"],type:i.type,PID:i.PID,referencePID:i.PID,instancePID:u?p.get(t[0].to[n].instancePID):Math.random().toString(),childReferencePID:l.getReferencePID(),childV_Name:t[0].to[n]["PLMEntity.V_Name"],childRevision:t[0].to[n].majorrevision,childInstancePID:t[0].to[n].instancePID,childType:t[0].to[n].type,childCurrentFullName:t[0].to[n].currentFullName,vTreeOrder:t[0].to[n].V_TreeOrder,isLeaf:!0,isComboboxDisplayable:h,current:i.current,currentFullName:i.currentFullName,PLMExternalInstanceID:t[0].to[n].PLM_ExternalInstanceID,reroutingProposal:v(i.PID)?s.getNLSValue("RWU.RoutingObjectSelection"):s.getNLSValue("RWU.ManufItemSelection"),RWUReplacePID:1,revision:i.revision,attributes:d,nodes:g.getNodeModel(i.PID,!1)}),r=g.addNodeModel(o,l),l.options.parentNodes.push(r),-1===(a=f.findIndex((function(e){return e.options.childInstancePID===o.childInstancePID})))?f.splice(0,0,r):f.splice(0,0,f.splice(a,1)[0]),u||p.set(t[0].to[n].instancePID,o.instancePID),n++}))})),a.alreadyExpanded=!0,r()},onFailure:function(){r()},data:e.Json.encode([l.getReferencePID()])})))},P=function(t){var n=null;e.is(t)&&e.is(t.data)&&e.is(t.data.nodeModel)&&(n=t.data.nodeModel._options,D(n.parentNodes,!1))},R=function(t,n,o,r,a,u){var c,g,f,p,h,m,I,y=[],D=i.getBehavior("ModelBehavior"),v=l.getReferenceModel(t.options.childReferencePID),C=!1;switch(e.is(v)?v.isProcess()||v.isService()||v.isConstruction()?(h=b(),m=i.getBehavior("MfgItemBehavior")):(C=!0,e.is(I)||(I=i.getBehavior("MfgProcessReplaceBehavior")),h=I,m=i.getBehavior("MfgProcessBehavior")):(h=b(),m=i.getBehavior("MfgItemBehavior")),f=[[{id:t.options.childInstancePID,path:[t.options.childInstancePID]}]],t.options.grid.RWU_Action_Instance.id){case 1:e.is(t.options.grid.RWU_ReplacePID)&&""!==t.options.grid.RWU_ReplacePID?h.replace("replaceByExisting",t.options.grid.RWU_ReplacePID,f,!1,(function(n){if(e.is(n)&&e.is(n.instancesAndReferences)&&n.instancesAndReferences.length>0){for(g=0;g<n.instancesAndReferences.length;g++)if(n.instancesAndReferences[g].get("type")===t.options.childType)t.options.childReferencePID=n.instancesAndReferences[g].get("PID");else if("DELFmiFunctionIdentifiedInstance"===n.instancesAndReferences[g].get("type")||"ProcessInstanceContinuous"===n.instancesAndReferences[g].get("type"))r.getNodeModel(t.options.instancePID,!1).forEach((function(e){e.options.childInstancePID=n.instancesAndReferences[g].get("PID")}));else{let i=l.getReferenceModel(n.instancesAndReferences[g].get("PID"));e.is(i)&&i.get("type")===t.options.childType&&r.getNodeModel(t.options.instancePID,!1).forEach((function(e){e.options.childInstancePID=n.instancesAndReferences[g].get("PID")}))}a(n)}else u()}),u):(i.warn(s.getNLSValue("RWU.ReroutingProposalEmpty")),d.buttons.Ok.disabled=!1,u());break;case 2:e.is(n.get(t.options.childReferencePID))?h.replace("replaceByLatest",null,f,!1,(function(n){if(e.is(n)&&e.is(n.instancesAndReferences)&&n.instancesAndReferences.length>0){for(g=0;g<n.instancesAndReferences.length;g++)if(n.instancesAndReferences[g].get("type")===t.options.childType)t.options.childReferencePID=n.instancesAndReferences[g].get("PID");else if("DELFmiFunctionIdentifiedInstance"===n.instancesAndReferences[g].get("type")||"ProcessInstanceContinuous"===n.instancesAndReferences[g].get("type"))r.getNodeModel(t.options.instancePID,!1).forEach((function(e){e.options.childInstancePID=n.instancesAndReferences[g].get("PID")}));else{let i=l.getReferenceModel(n.instancesAndReferences[g].get("PID"));e.is(i)&&i.get("type")===t.options.childType&&r.getNodeModel(t.options.instancePID,!1).forEach((function(e){e.options.childInstancePID=n.instancesAndReferences[g].get("PID")}))}a(n)}else u()}),u):h.replace("replaceByNewRevision",null,f,!1,(function(i){var o,s;for(o=0;o<i.instancesAndReferences.length;o++)if(i.instancesAndReferences[o].get("type")===t.options.childType)s=i.instancesAndReferences[o].get("PID");else if("DELFmiFunctionIdentifiedInstance"===i.instancesAndReferences[o].get("type")||"ProcessInstanceContinuous"===i.instancesAndReferences[o].get("type"))r.getNodeModel(t.options.instancePID,!1).forEach((function(e){e.options.childInstancePID=i.instancesAndReferences[o].get("PID")}));else{let n=l.getReferenceModel(i.instancesAndReferences[o].get("PID"));e.is(n)&&n.get("type")===t.options.childType&&r.getNodeModel(t.options.instancePID,!1).forEach((function(e){e.options.childInstancePID=i.instancesAndReferences[o].get("PID")}))}e.is(s)?(n.set(t.options.childReferencePID,s),a(t)):u()}),u);break;case 3:if(c={},e.is(o.get(t.options.childReferencePID)))h.replace("replaceByExisting",o.get(t.options.childReferencePID),f,!1,(function(n){if(e.is(n)&&e.is(n.instancesAndReferences)&&n.instancesAndReferences.length>0){for(g=0;g<n.instancesAndReferences.length;g++)if(n.instancesAndReferences[g].get("type")===t.options.childType)t.options.childReferencePID=n.instancesAndReferences[g].get("PID");else if("DELFmiFunctionIdentifiedInstance"===n.instancesAndReferences[g].get("type")||"ProcessInstanceContinuous"===n.instancesAndReferences[g].get("type"))r.getNodeModel(t.options.instancePID,!1).forEach((function(e){e.options.childInstancePID=n.instancesAndReferences[g].get("PID")}));else{let i=l.getReferenceModel(n.instancesAndReferences[g].get("PID"));e.is(i)&&i.get("type")===t.options.childType&&r.getNodeModel(t.options.instancePID,!1).forEach((function(e){e.options.childInstancePID=n.instancesAndReferences[g].get("PID")}))}a()}else u()}),u);else if(C){let n={callback:function(n){if(e.is(n)&&e.is(n.succeeded)&&e.is(n.succeeded[t.options.referencePID])&&e.is(n.succeeded[t.options.referencePID][t.options.childInstancePID].instancesAndReferences[0])){let i=e.is(n.succeeded[t.options.referencePID][t.options.childInstancePID].instancesAndReferences[0].attributesValue)?n.succeeded[t.options.referencePID][t.options.childInstancePID].instancesAndReferences[0].attributesValue.PID:null;o.set(t.options.childReferencePID,i),t.options.childInstancePID=e.is(n.succeeded[t.options.referencePID][t.options.childInstancePID].instancesAndReferences[1].attributesValue)?n.succeeded[t.options.referencePID][t.options.childInstancePID].instancesAndReferences[1].attributesValue.PID:null,a(n)}}};c={MfgProcessUpdateAction:"ReplaceByNewBranch",mfgProcessOccPath:t.options.childInstancePID,pointedPaths:"",candidatePaths:"",linkPID:t.options.childInstancePID,custoRole:"Undefined",role:"Undefined",mfgProcessRefID:t.options.childReferencePID,mfgParentProcessID:t.options.referencePID,oneDelmiaAggregationMode:i.getPreferenceValue("oneDelmiaAggregationMode")},n.payload=c,h.replaceProcessByNewBranch(n,!0)}else c[t.options.referencePID]={brokenMfgItems:{},engConfigFilter:"",mfgConfigFilter:""},c[t.options.referencePID].brokenMfgItems[t.options.childInstancePID]={MbomUpdateAction:"ReplaceByNewBranch",VTreeOrder:t.options.vTreeOrder,aggregatedByPath:t.options.referencePID,brokenMfgPID:t.options.childInstancePID,candidatePaths:[t.options.childInstancePID],candidateProduct:"",id:t.options.childInstancePID,instanceLID:t.options.childInstancePID,instancePID:t.options.childInstancePID,isBroken:!0,isInstanceOf:t.options.childReferencePID,isLeaf:!0,mfgOccPathPIDs:t.options.childInstancePID,referecePID:t.options.childReferencePID,routeMfgItemPID:t.options.referencePID,status:"NotApplicable",type:"MfgItemsUpdateStatus",typeOfScope:"None",fromRWU:!0},m.webservice("rerouteLink",null,c,(function(n){e.is(n)&&e.is(n.succeeded)&&e.is(n.succeeded[t.options.referencePID])&&e.is(n.succeeded[t.options.referencePID][t.options.childInstancePID].instancesAndReferences[0])?(o.set(t.options.childReferencePID,n.succeeded[t.options.referencePID][t.options.childInstancePID].instancesAndReferences[0].PID),t.options.childInstancePID=n.succeeded[t.options.referencePID][t.options.childInstancePID].instancesAndReferences[1].PID,a(n)):u()}));break;case 4:a();break;case 5:D.deleteInstance([D.getInstance(t.options.childInstancePID)],{forceDBMode:!0,isDetachInstance:!0,askDeleteConfirmation:!1,onComplete:function(){a(t)},onFailure:function(){u(t)}});break;case 6:l.fetchRoot(t.options.referencePID,{onComplete:function(n){l.fetchRoot(t.options.childReferencePID,{onComplete:function(i){if(e.is(i)&&e.is(n)){for(g=0;g<t.options.grid.RWU_ReplacePID;g++)p=D.insertExistingRefs([{rootReferencePID:t.options.childReferencePID,referencePID:t.options.childReferencePID,targetReferencePID:t.options.referencePID,instancePID:null,targetRootReferencePID:t.options.referencePID,targetInstancePID:null,allowMove:!0,instancePIDsArray:[],targetInstancePIDsArray:[],path:[]}]),y.push(p);Promise.all(y).then((function(e){a(e)})).catch((function(){u()}))}else u()},onFailure:u,forceDBMode:!0})},onFailure:u,forceDBMode:!0});break;default:u()}},A=function(t,n,i,o){var r;i.getNodeModel(n.options.instancePID,!1).forEach((function(n){n.options.attributesChanged.size>0&&n.options.attributesChanged.keys().forEach((function(t){var i,o,a=n.options.attributesChanged.get(t);e.is(a)&&(r=n.options.grid[a],"reference"===a.split(".")[2]?(i=m.get(t),e.is(i)||(i={}),i[n.options.childReferencePID]={[t]:r},m.set(t,i)):(o=I.get(t),e.is(o)||(o={}),o[n.options.childInstancePID]={[t]:r},I.set(t,o)))})),t?4===n.options.grid.RWU_Action_Instance.id?(n.options.grid.RWU_Instance_Status=s.getNLSValue("MfgItemCreateReportUI.Status.Ignored"),n.options.rwuInstanceStatus="ignored"):n._options.isCreated?(n.options.grid.RWU_Instance_Status=s.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Created"),n.options.rwuInstanceStatus="success"):(n.options.grid.RWU_Instance_Status=s.getNLSValue("MIL.Status.Success"),n.options.rwuInstanceStatus="success"):n._options.isCreated?4===n.options.grid.RWU_Action_Instance.id?(n.options.grid.RWU_Instance_Status=s.getNLSValue("RWU.Status.NotCreated"),n.options.rwuInstanceStatus="ignored"):(n.options.grid.RWU_Instance_Status=s.getNLSValue("RWU.Message.CreationFailed",{suggestion:n.options.grid.RWU_Action_Instance.label,mfg:n.options.grid.RWU_Action_Instance.tooltip,failureMsg:""}),n.options.rwuInstanceStatus="fail"):(e.is(o)?n.options.grid.RWU_Instance_Status=o:n.options.grid.RWU_Instance_Status=s.getNLSValue("MIL.Message.Failure",{suggestion:n.options.grid.RWU_Action_Instance.label,mfg:n.options.grid.RWU_Action_Instance.tooltip,failureMsg:""}),n.options.rwuInstanceStatus="fail")})),i.updateNode(n.options.instancePID)},V=function(e,t,n,i){n.getNodeModel(t.options.instancePID,!1).forEach((function(t){e?7===t.options.grid.RWU_Action_Reference.id?(t.options.grid.RWU_Reference_Status=s.getNLSValue("MfgItemCreateReportUI.Status.Ignored"),t.options.rwuReferenceStatus="ignored"):(t.options.grid.RWU_Reference_Status=s.getNLSValue("MIL.Status.Success"),t.options.rwuReferenceStatus="success"):(t.options.grid.RWU_Reference_Status=s.getNLSValue("MIL.Message.Failure",{suggestion:t.options.grid.RWU_Action_Reference.label,mfg:t.options.grid.RWU_Action_Reference.tooltip,failureMsg:""}),t.options.rwuReferenceStatus="fail")})),n.updateNode(t.options.instancePID),i()},w=function(t,n,i,o,r,a){var s=y(),c=function(){var o,r=e.is(n.get(t.options.childReferencePID))?n.get(t.options.childReferencePID):i.get(t.options.childReferencePID),u=0;e.is(r)?(o=s.getNodeModel(t.options.instancePID,!1),l.getDescendantsFromServer([r],(function(e){e.instancesAndReferences.forEach((function(e){u<o.length&&e.get("isInstanceOf")===o[u]._parentNode.options.childReferencePID&&(o[u]._parentNode.options.childInstancePID=e.get("PID"),o[u]._parentNode.options.referencePID=e.get("isAggregatedBy"),o[u].options.childReferencePID=r,u++)})),A(!0,t,s),a()}))):(A(!0,t,s),a())},d=function(e){A(!1,t,s,e),a()};!function(t,n,i,o,r){var a,s=u.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),c={};switch(t.options.grid.RWU_Action_Reference.id){case 7:case 8:o(t);break;case 9:e.is(n.get(t.options.referencePID))?(t.options.referencePID=n.get(t.options.referencePID),l.getDescendantsFromServer([t.options.referencePID],(function(n){e.is(n)?n.instancesAndReferences.forEach((function(n){var i=n._attributes.isInstanceOf;e.is(i)&&i===t._options.childReferencePID&&(t.options.childInstancePID=n._attributes.PID,o())})):o()}),{forceDBMode:!0})):u.webServiceRequest({url:"v1/dslc/getversionnumberproposal",method:"POST",headers:s,context:this,data:e.Json.encode({addRequests:[{copyId:t.options.referencePID,ancestors:[{semantic:"LAST",id:t.options.referencePID}]}]}),onComplete:function(i){c={data:[{physicalid:t.options.referencePID,proposedRevision:i.addRequests[0].code,modifiedAttributes:{revision:i.addRequests[0].code}}],folderid:null,notificationTimeout:600},u.webServiceRequest({url:"lifecycle/revise/major",method:"POST",headers:s,data:e.Json.encode(c),onComplete:function(i){var a;e.is(i)&&e.is(i.results)&&i.results.length>0?(a=i.results[0].physicalid,i.results.forEach((function(n){e.is(n)&&n.derivedfromphysicalid===t.options.referencePID&&(a=n.physicalid)})),6===t.options.grid.RWU_Action_Instance.id?(n.set(t.options.referencePID,a),t.options.referencePID=a,o()):l.getDescendantsFromServer([a],(function(i){e.is(i)?(n.set(t.options.referencePID,a),t.options.referencePID=a,i.instancesAndReferences.forEach((function(n){var i=n._attributes.isInstanceOf;e.is(i)&&i===t._options.childReferencePID&&(t.options.childInstancePID=n._attributes.PID,o())}))):o()}),{forceDBMode:!0})):r()},onFailure:r})},onFailure:r});break;case 10:c={},e.is(i.get(t.options.referencePID))?(t.options.referencePID=i.get(t.options.referencePID),l.getDescendantsFromServer([t.options.referencePID],(function(n){e.is(n)?n.instancesAndReferences.forEach((function(n){var i=n._attributes.isInstanceOf;e.is(i)&&i===t._options.childReferencePID&&(t.options.childInstancePID=n._attributes.PID,o())})):o()}),{forceDBMode:!0})):(a={data:[{physicalid:t.options.referencePID,modifiedAttributes:{"PLMEntity.V_Name":t.options.V_Name,"PLMEntity.PLM_ExternalID":"","PLMReference.V_fromExternalID":""}}],intent:null,prefix:"",initBL_already_called:!0,notificationTimeout:600},u.webServiceRequest({url:"lifecycle/newbranch/execute_newbranch",method:"POST",headers:s,data:e.Json.encode(a),onComplete:function(n){var a;e.is(n)&&e.is(n.results)&&n.results.length>0?(a=n.results[0].physicalid,l.getDescendantsFromServer([a],(function(n){6===t.options.grid.RWU_Action_Instance.id?(i.set(t.options.referencePID,a),t.options.referencePID=a,o()):(i.set(t.options.referencePID,a),t.options.referencePID=a,n.instancesAndReferences.forEach((function(n){var i=n._attributes.isInstanceOf;e.is(i)&&i===t._options.childReferencePID&&(t._options.childInstancePID=n._attributes.PID,o())})))}),{forceDBMode:!0})):r()},onFailure:r}));break;default:r()}}(t,o,r,(function(){var e=new Promise((function(e){V(!0,t,s,e)}));e.then((function(){R(t,n,i,s,c,d)}))}),(function(){var e=new Promise((function(e){V(!1,t,s,e)}));e.then((function(){R(t,n,i,s,c,d)}))}))},S=function t(n,i,o,r,a,s,u){var c,d,g=y();n.length>i?(c=n[i],e.is(c)&&e.is(c.options)&&e.is(c.options.expanded)&&c.options.expanded&&c.options.isComboboxDisplayable?new Promise((function(t){e.is(l.getInstance(c.options.instancePID))||6===c.options.grid.RWU_Action_Instance.id?w(c,o,r,a,s,t):l.fetchInstance({PID:c.options.childInstancePID},{onComplete:function(){w(c,o,r,a,s,t)},onFailure:function(){t()},forceDBMode:!1})})).then((function(){t(n,i+1,o,r,a,s,u)})):e.is(c)&&e.is(c.options)&&!c.options.isComboboxDisplayable?(g.getNodeModel(c.options.instancePID,!1).forEach((function(t){t.options.attributesChanged.size>0&&t.options.attributesChanged.keys().forEach((function(n){var i,o,r=t.options.attributesChanged.get(n);e.is(r)&&(d=t.options.grid[r],"reference"===r.split(".")[2]?(i=m.get(n),e.is(i)||(i={}),i[t.options.childReferencePID]={[n]:d},m.set(n,i)):(o=I.get(n),e.is(o)||(o={}),o[t.options.childInstancePID]={[n]:d},I.set(n,o)))}))})),t(n,i+1,o,r,a,s,u)):t(n,i+1,o,r,a,s,u)):u()},L=function(t,n){var i,o,l,u,c,d,g,f,p=[s.getNLSValue("RWU.ReplacedByExisting"),s.getNLSValue("RWU.ReplacedByNewRev"),s.getNLSValue("RWU.ReplacedByNewBranch"),s.getNLSValue("RWU.Ignored"),s.getNLSValue("RWU.Removed"),s.getNLSValue("RWU.Added"),s.getNLSValue("RWU.NoAction"),s.getNLSValue("RWU.RefActionDefinedByUsage"),s.getNLSValue("RWU.RefOnlyRev"),s.getNLSValue("RWU.RefOnlyBranch")],h="",m="",I="",y=e.is(t.options.isCreated)?"":" ("+t.options.grid["PLMEntity.PLM_ExternalID.instance"]+")",b="",D=t.options.childV_Name;t.options.isComboboxDisplayable&&(!e.is(t.options.grid.RWU_Replace)||t.options.grid.RWU_Replace===s.getNLSValue("RWU.ManufItemSelection")&&t.options.grid.RWU_Replace===s.getNLSValue("RWU.RoutingObjectSelection")||6!==t.options.grid.RWU_Action_Instance.id&&1!==t.options.grid.RWU_Action_Instance.id||(I=t.options.grid.RWU_Replace,D=t.options.grid.RWU_Replace,m=6===t.options.grid.RWU_Action_Instance.id?" "+t.options.grid.RWU_ReplacePID+s.getNLSValue("RWU.Times"):" "+I),i=s.getNLSValue("RWU.ReferenceReportLine",{obj1:a.sanitizeHTML(t.options.V_Name)+"."+t.options.revision,action:p[t.options.grid.RWU_Action_Reference.id-1],information:""})+"<br>",o=s.getNLSValue("RWU.InstanceReportLine",{obj1:a.sanitizeHTML(t.options.childV_Name)+"."+t.options.childRevision+y,obj2:a.sanitizeHTML(t.options.V_Name)+"."+t.options.revision,action:p[t.options.grid.RWU_Action_Instance.id-1],information:m})+"<br>"),t.options.attributesChanged.size>0&&(5!==t.options.grid.RWU_Action_Instance.id||6!==t.options.grid.RWU_Action_Instance.id)&&t.options.attributesChanged.keys().forEach((function(n){b="",l=r.getAttributeInfo(n),c=a.hasMagnitude(l),d=t.options.grid[t.options.attributesChanged.get(n)],u=n,e.is(l)&&(c&&(d=a.getMagnitudeValue(d,l,!1),g=widget.getPreference(l.Magnitude),f=e.is(g)&&"hidden"!==g.type?g.value:null,b=s.getLabelForUnit(l.Magnitude,f),d=d.split(" ")[0]),a.isDate(l)?(d=e.is(d,"number")?1e3*d:d,d=a.getDate(d)):a.hasRangeDefined(l)&&(Number.isNaN(Number.parseInt(d))||(d=a.getAuthorizedValueNLS(l,Number.parseInt(d)-1))),u=l.NLS),h=h+s.getNLSValue("RWU.AttributeReportLine",{obj1:a.sanitizeHTML(D),attribute:u,value:d+" "+b})+"<br>"})),n({referenceStringContent:i,instanceStringContent:o,attributesStringContent:h})},E=function(t,n,o,a,u,c){var d,g,p,h,y="",b="",D="",v="",C=new(o.getComponent("Element"))("div",{class:"Summary"}),P=[],R={},A=function(t,n,o,r,a){var s=o||{};!0===(!e.is(s.popupMessage)||s.popupMessage)?i.info(n,r):i.log(n,r),e.is(t)&&i.notify("stopProgress",t),e.is(s.onComplete,"function")&&s.onComplete.call(null,n,o,a)},V=function(t,n,o,r,a,s){var l=r||{},u=!e.is(l.popupMessage)||l.popupMessage;e.is(o)&&e.is(o.message,"string")&&(n+="\n"+o.message),!0===u?i.warn(n,a):i.log(n,a),i.notify("stopProgress",t),e.is(l.onFailure,"function")&&l.onFailure.call(null,n,s)};for(g of f)e.is(g)&&e.is(g.options)&&e.is(g.options.expanded)&&g.options.expanded&&P.push(new Promise((function(e){L(g,e)})));Promise.all(P).then((function(o){o.forEach((function(e){y+=e.instanceStringContent,D+=e.referenceStringContent,b+=e.attributesStringContent})),v=s.getNLSValue("RWU.ReferenceAction")+"<br>"+D+"<br>"+s.getNLSValue("RWU.InstanceAction")+"<br>"+y+"<br>"+s.getNLSValue("RWU.AttributesModified")+"<br>"+b,C.setHTML(v),(d=new t({domId:"replaceWhereUsed-RecapDialog",immersiveFrame:a,modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,height:u.height-300,width:u.width-1e3,title:s.getNLSValue("RWU.DialogReport.Title"),content:C,closeButtonFlag:!0,buttons:{Ok:new n({domId:"replaceWhereUsed-Dialog-Apply",className:"ok primary",label:s.getNLSValue("MIL.PanelApplyButton"),emphasize:"primary",disabled:!1,onClick:function(){c.buttons.Ok.disabled=!0,c.buttons.Apply.disabled=!0,new Promise((function(e){S(f,0,new Map,new Map,new Map,new Map,e)})).then((function(){e.is(m)&&m.size>0&&m.forEach((function(e,t){h=r.getAttributeInfo(t),p={data:e,onFailure:function(e){V(R,s.getNLSValue("RWU.UpdateFailure",{key:h.NLS}),e,null)},onComplete:function(){A(R,s.getNLSValue("RWU.UpdateSuccess",{key:h.NLS}),null),i.notify("objectAttributesModified",{})},logMessage:s.getNLSValue("TableView.MassUpdateLogMessage")},l.updateReferences(t,p)})),e.is(I)&&I.size>0&&I.forEach((function(e,t){h=r.getAttributeInfo(t),p={data:e,onFailure:function(e){V(R,s.getNLSValue("RWU.UpdateFailure",{key:h.NLS}),e,null)},onComplete:function(){A(R,s.getNLSValue("RWU.UpdateSuccess",{key:h.NLS}),null),i.notify("objectAttributesModified",{})},logMessage:s.getNLSValue("TableView.MassUpdateLogMessage")},l.updateInstances(t,p)}))})),d.close()}}),Cancel:new n({domId:"replaceWhereUsed-Dialog-Close",className:"close",label:s.getNLSValue("MIL.PanelCloseButton"),onClick:function(){d.close()}})}})).show()}))},N=function(n){var r=y(),a=i.getBehavior("TreeListViewBehavior"),u=i.getBehavior("UXFactoryBehavior"),p=u.getComponent("Dialog"),b=u.getComponent("Button"),D=u.getComponent("WUXFrameWindowsManager").getFrameWindow(i.getAppContext()).getImmersiveFrame(),R=D.elements.container.getSize(),A=u.create("Element","div",{class:"mil-tree-container",styles:{height:"100%",width:"100%"}}),V=r.getWUXNodeModel(),w=e.is(n.values)?Array.isArray(n.values)?n.values:[n.values]:{};V.onPreExpand(C),V.onPreCollapse(P),e.extend(V.options,{shouldBeSelected:function(e){var t=!0;return e._options.isLeaf||(t=!1),t}}),a.loadDocument(V),a.getContent().inject(A),function(e,n){var i,o,r,a=[];e.forEach((function(e){r={},Object.keys(e._attributes).forEach((function(t){"interface"!==t&&"PID"!==t&&"isInstanceOf"!==t&&"instancePID"!==t&&"physicalid"!==t&&"referencePID"!==t&&(r[t+".reference"]=e.get(t))})),i=c.getRWUNodeOptions({label:e.get("PLMEntity.V_Name"),type:e.get("type"),PID:e.get("PID"),referencePID:e.get("PID"),selectedAction:null,isLeaf:null,isComboboxDisplayable:!0,current:e.get("current"),currentFullName:e.get("currentFullName"),PLMExternalInstanceID:e.get("PLMEntity.PLM_ExternalInstanceID"),reroutingProposal:v(e.get("PID"))?s.getNLSValue("RWU.RoutingObjectSelection"):s.getNLSValue("RWU.ManufItemSelection"),revision:e.get("revision"),parentNodes:[],attributes:r}),o=new t(i),-1===a.indexOf(i.referencePID)&&(n.addRoot(o),a.push(i.referencePID),h.set(i.referencePID,o))}))}(w,V),d=new p({domId:"replaceWhereUsed-Dialog-"+g,immersiveFrame:D,modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!0,height:R.height-200,width:R.width,title:s.getNLSValue("RWU.Dialog.Title"),content:A,closeButtonFlag:!0,buttons:{Ok:new b({domId:"replaceWhereUsed-Dialog-"+g+"-Ok",className:"ok primary",label:s.getNLSValue("Dialog.Ok"),emphasize:"primary",disabled:!1,onClick:function(){I.clear(),m.clear(),E(p,b,u,D,R,d)}}),Cancel:new b({domId:"replaceWhereUsed-Dialog-"+g+"-Close",className:"close",label:s.getNLSValue("MIL.PanelCloseButton"),onClick:function(){d.close()}}),Apply:new b({domId:"replaceWhereUsed-Dialog-"+g+"-Add",className:"Add",label:s.getNLSValue("RWU.Button.AddInstances"),onClick:function(){!function(n,r){var a,u,d,g,p=o.getModuleSelections(i.getId()),m=y();e.is(p,"array")&&p.length>0?(a=p[0].id,g=m.getNodeModel(a,!0),u=l.getReferenceModel(g.options.referencePID),d=l.getValidChildTypes(u),i.getBehavior("SearchBehavior").showSearchDialoguAndActivate((function(o){p.forEach((function(a){var u,d,g,p=m.getNodeModel(a.id,!0),I=null,y={};e.is(p.options.grid)&&p.options.grid.cellInfo.isLeaf?e.is(o,"array")&&(g=p.options,o.forEach((function(a){l.fetchRoot(a.id,{onComplete:function(i){e.is(i)&&(Object.keys(i._attributes).forEach((function(e){y[e]=i._attributes[e]})),d=c.getRWUNodeOptions({label:i.get("PLMEntity.V_Name"),V_Name:g.V_Name,childV_Name:null,childRevision:null,childCurrentFullName:null,type:i.get("type"),PID:i.get("PID"),instancePID:Math.random().toString(),referencePID:i.get("PID"),isLeaf:!1,current:o[0]["ds6w:status"],currentFullName:g.current,parentNodes:[],revision:o[0]["ds6wg:revision_value"],isCreated:!0,isComboboxDisplayable:!0,attributes:y})),u=h.get(d.referencePID),e.is(u)&&!u.options.isLeaf?(u.options.parentNodes.some((function(e){return e.options.referencePID===g.referencePID&&6===e.options.grid.RWU_Action_Instance.id&&(I=e,!0)})),e.is(I)?(I.options.grid.RWU_ReplacePID+=1,I.options.grid.RWU_Replace=s.getNLSValue("RWU.Quantity",{quantity:I.options.grid.RWU_ReplacePID}),m.updateNode(I.options.referencePID)):(d=c.getRWUNodeOptions({label:i.get("PLMEntity.V_Name")+"."+i.get("revision")+s.getNLSValue("RWU.UsedIn")+u._options.V_Name,V_Name:u._options.V_Name,type:g.referenceType,PID:g.referencePID,referencePID:g.referencePID,instancePID:Math.random().toString(),childReferencePID:i.get("PID"),childV_Name:i.get("PLMEntity.V_Name"),childRevision:i.get("revision"),childInstancePID:null,childType:i.get("type"),vTreeOrder:g.V_TreeOrder,isLeaf:!0,current:g.grid["current.reference"],currentFullName:g.current,PLMExternalInstanceID:null,reroutingProposal:s.getNLSValue("RWU.Quantity",{quantity:1}),RWUReplacePID:1,suggestionsRefLinkedMap:g.suggestionsRefLinkedMap,revision:i.get("revision"),isCreated:!0,isComboboxDisplayable:!0,attributes:{}}),I=m.addNodeModel(d,u),u.options.parentNodes.push(I),f.push(I))):(u=new t(d),r.addRoot(u),u.expand(),d=c.getRWUNodeOptions({label:i.get("PLMEntity.V_Name")+"."+i.get("revision")+s.getNLSValue("RWU.UsedIn")+u._options.V_Name,V_Name:u._options.V_Name,type:g.referenceType,PID:g.referencePID,referencePID:g.referencePID,instancePID:Math.random().toString(),childReferencePID:i.get("PID"),childV_Name:i.get("PLMEntity.V_Name"),childRevision:i.get("revision"),childInstancePID:null,childType:i.get("type"),vTreeOrder:g.V_TreeOrder,isLeaf:!0,current:g.grid["current.reference"],currentFullName:g.current,PLMExternalInstanceID:null,reroutingProposal:s.getNLSValue("RWU.Quantity",{quantity:1}),RWUReplacePID:1,suggestionsRefLinkedMap:g.suggestionsRefLinkedMap,revision:g.revision,isCreated:!0,isComboboxDisplayable:!0,attributes:{}}),I=m.addNodeModel(d,u),u.options.parentNodes.push(I),h.set(u.options.referencePID,u),f.push(I)),n.push({instancePID:d.instancePID,PID:d.referencePID})},onFailure:function(){i.warn(s.getNLSValue("RWU.ObjectRetrievalFailure"))}})}))):i.warn(s.getNLSValue("RWU.ObjectRetrievalFailure"))}))}),{title:s.getNLSValue("Dialog.InsertInstanceCmd.Title"),searchTitle:s.getNLSValue("Search.InsertInstanceCmd.Placeholder"),types:d})):i.warn(s.getNLSValue("ReplaceWhereUsed.NoSelection"))}(w,V)}})}}),d.close=function(){r.emptyNodeModel(),f=[],V.empty(),h.clear(),d.hide()},d.show(),g++},T=function(){var t,n=o.getSelections(i.getId()),r=!1;t=n,e.is(t,"array")&&t.length>0&&t.forEach((function(t){e.is(t,"array")&&t.length>0&&(r=!0)})),r&&new Promise((function(t,o){!function(t,n,o){var r,a=[],u=[];e.is(t,"array")&&t.length>0?t.forEach((function(t){t.forEach((function(t){e.is(t)&&(r=l.getReferenceModel(t),a.push(r),u.push(r.get("PID")))}))})):0===t.length&&(i.warn(s.getNLSValue("ReplaceWhereUsed.NoSelection")),o()),n(a)}(n,t,o)})).then((function(e){N({values:e})}))};return{listenTo:function(){return{ReplaceWhereUsed:T}}}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MultiAttrCellManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager"],(function(e,t){"use strict";return function(n,i){const o=function(e){let t=n.getPlugins(e);return t&&t.instance?t.instance:null};var r,a,s=new t(n,i),l=o("DatabasePlugin"),u=o("AttributePlugin"),c=o("TreeViewPlugin"),d=o("DicoPlugin"),g=o("ResourcePlugin");return r=function(t){var n,i,o,r,a,s;if(i=t.nodeModel,!this.treeDocument.isGroupingNodeModel(i)&&(o=this.getColumnOrGroup(t.columnID),e.is(i)&&Array.isArray(o.attribute))){let t;for((n={}).column=o,r=n.column.attribute,a=0;a<r.length;a++)if(t="instance"===r[a].entity?l.getInstance(i.getInstancePID()):l.getReference(i.getReferencePID()),s=i.getAttributeValue(r[a].nodeName),e.is(s)||u.doesAttributeExist(t,r[a].name)||u.isAttrApplicableForType(t,r[a].name)){n.attributeName=r[a].name,n.attributeNodeName=r[a].nodeName,n.dataIndex=r[a].dataIndex,n.dicoType=r[a].dicoType,n.entity=r[a].entity;break}}return n},a=function(t,n){var i,o,a="",s={columnID:t,nodeModel:n};if(e.is(t)&&e.is(n)&&(i=r.call(this,s),e.is(i)&&e.is(i.attributeNodeName))){a=n.getAttributeValue(i.attributeNodeName),o=d.getAttributeInfo(i.attributeName);let t=u.hasMagnitude(o),r=u.hasRangeDefined(o);if(t&&!r&&e.is(a)){let e=u.getMagnitude(o),[t,n]=a.split(" ");a={magnitude:e,mksValue:u.getMKSValueFromUnitValue(e,n,t)}}}return a},{updateColumnInfos:function(t,n,i){var o,r,a,l,c,g;g=!!e.is(i.enableWrapTextInView,"boolean")&&i.enableWrapTextInView,o=Array.isArray(n.attribute)?n.attribute[0].name:n.attribute.name,r=d.getAttributeInfo(o),e.is(r)&&(a=u.isDate(r),l=u.hasMagnitude(r),c=u.isString(r)),t.editionPolicy="EditionOnClick",t.getCellValue=this.getCellValue,t.getCellSemantics=this.getCellSemantics,t.hasCellValue=this.hasCellValue,t.setCellValue=s.setValue,t.setCellValueBulk=s.setCellValueBulk,t.getCellEditableState=this.getCellEditableState,t.getCellValueForSort=this.getCellValueForSort,t.getCellTooltip=this.getCellTooltip,c&&g?(t.autoRowHeightFlag=!0,t.typeRepresentation="textBlock"):t.getCellTypeRepresentation=this.getCellTypeRepresentation,a&&(t.editionPolicy="EditionInPlace",t.allowResetToUndefinedByUIFlag=!0,t.getCellGroupingKey=s.getDateCellGroupingKey,t.getCellValueForExport=function(e){var t="",n=e.cellModel;return e.rowID<0?t=n:n&&(t=u.getFormattedDate(n,!1)),t}),l&&(t.getCellGroupingKey=this.getMagnitudeGroupingKey,t.getGroupingNodeLabel=s.getMagnitudeGroupingLabel)},getCellTypeRepresentation:function(t){var n,i,o,a="string";return n=r.call(this,t),e.is(n)&&e.is(n.attributeName)&&(i=d.getAttributeInfo(n.attributeName),e.is(i)&&(o=u.hasRangeDefined(i),u.isMultiValuated(i)&&!o||o?a="string":u.isBoolean(i)?a="boolean":u.isInteger(i)||u.isDouble(i)?a="numberWithUnit":u.isDate(i)&&(a="date"))),a},getCellValue:function(t){var n,i="";return n=r.call(this,t),e.is(n)&&e.is(n.attributeNodeName)&&(i=t.nodeModel.getAttributeValue(n.attributeNodeName)),i},getCellValueForSort:function(e,t){return a.call(this,t,e)},getMagnitudeGroupingKey:function(t){var n,i,o={columnID:t.columnID,nodeModel:t.nodeModel},a=r.call(this,o);return e.is(a)&&(n=t.nodeModel.getAttributeValue(a.attributeNodeName),i=d.getAttributeInfo(a.attributeName),e.is(n)&&e.is(i)&&(n=Array.isArray(n)?n:[n])),n},getCellValueForFilter:function(t,n){var i,o,a="",s={columnID:t,nodeModel:n};return e.is(t)&&e.is(n)&&(i=r.call(this,s),e.is(i)&&e.is(i.attributeNodeName)&&(a=n.getAttributeValue(i.attributeNodeName),o=d.getAttributeInfo(i.attributeName),e.is(o)&&u.hasMagnitude(o)&&(a=u.getFormatedMagnitudeValueWithUnitLabel(a,o)))),a},hasCellValue:function(t){var n,i=!1;return n=r.call(this,t),e.is(n)&&e.is(n.attributeNodeName)&&(i=!0),i},getCellSemantics:function(t){var n,i,o=[],a={};if(n=r.call(this,t),e.is(n)&&e.is(n.attributeName)&&(i=d.getAttributeInfo(n.attributeName),e.is(i)))if(u.hasRangeDefined(i)){if(n.attributeName.contains("V_SequencingMode")){let e=u.getAuthorizedValuesNLSList(i);for(let t=0;t<e.length;t++){let n=e[t],r=u.getAuthorizedValueDB(i,t);o.push({value:r,label:n})}}else o=u.getAuthorizedValuesNLSList(i);a={possibleValues:o}}else u.hasMagnitude(i)&&(a={allowedUnits:u.getAttributeUnits(i),preservePrecisionInReadonly:u.isDisplayAsEntered(i)});return a},getCellEditableState:function(t){var n,o,a,s,g,f,p,h=!1;return c.areModuleColumnsImmutable(i.getId())||(n=r.call(this,t),e.is(n)&&e.is(n.attributeName)&&(e.is(n.entity)&&e.is(t.nodeModel)&&(f=n.entity,p=t.nodeModel,g="instance"===f?l.getInstance(p.getInstancePID()):l.getReference(p.getReferencePID()),e.is(g)&&(s=d.getTypeMaskInfo(g.get("type")),e.is(s)&&Object.prototype.hasOwnProperty.call(s,n.dataIndex)&&(a=s[n.dataIndex]))),o=d.getAttributeInfo(n.attributeName),e.is(o)&&(h=!u.isReadOnly(o,a)))),h},getCellTooltip:function(t){var n,i,o,a,s,l,c,f={longHelp:""},p=r.call(t.cellView.collectionView,t),h=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader&&e.is(p)){let r=d.getAttributeInfo(p.attributeName);if(e.is(r)&&(n=u.isMultiValuated(r),i=u.hasMagnitude(r),o=u.hasRangeDefined(r),a=u.isDate(r),s=u.isBoolean(r),l=u.isInteger(r),c=u.isDouble(r)),a)h=(h=n?h:[h]).map((e=>u.getFormattedDate(e))).join("\n");else if(s)h=(h=n?h:[h]).map((e=>"TRUE"===e.toString().toUpperCase()?g.getNLSValue("TRUE"):g.getNLSValue("FALSE"))).join("\n");else if(o)n&&(h=h.join("/n"));else if(i){let n=t.nodeModel.getAttributeValue(p.attributeNodeName);e.is(n)&&(n=Array.isArray(n)?n:[n],n=n.map((e=>{var t="";return""!==e&&(t=u.getFormatedMagnitudeValueWithUnitLabel(e,r)),t})),h=n.join("\n"))}else h=c||l?(h=(h=n?h:[h]).map((e=>u.getFormatedNumberValue(e,r)))).join("\n"):n?h.join("\n"):h}return f.longHelp=h,f}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/RWU/RWUColumnManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/MultiAttrCellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager"],(function(e,t,n){"use strict";return function(i,o){var r,a,s,l,u,c,d,g,f,p,h,m,I,y,b,D,v,C,P,R,A,V,w,S,L,E,N=e=>Array.isArray(e)&&e.length>0;const T="RWU_Action_Instance",M="RWU_Action_Reference",F="RWU_Instance_Status",x="RWU_Reference_Status",O="RWU_Replace",B="success",U="ignored";return a=(r=function(e){var t=i.getPlugins(e);return t&&t.instance?t.instance:null})("DatabasePlugin"),s=r("ResourcePlugin"),l=r("SelectionPlugin"),d=r("UXComponentsPlugin"),u=r("AttributePlugin"),c=r("DicoPlugin"),g=r("TreeViewPlugin"),C=function(){e.is(P)||(P=[],g.getCustoColumnManagers().forEach((t=>{var n;n=new t(i,o),e.is(n)&&(P[n.displayType]=n)})),E=new n(i,o),L=new t(i,o),R=P.MfgItemQuantity,A=P.Lock,V=P.URL,w=P.FullOwnerURL,S=P.DynamicAttrNonEditable)},I=function(t,n){var i,r=o.getBehavior("SearchBehavior"),u=l.getModuleSelections(o.getId()),c=o.getBehavior("WUXNodeModelBehavior"),d=t.nodeModel._referencePID,g=a.getReferenceModel(d),f=a.getValidChildTypes(g);r.showSearchDialoguAndActivate((function(t){u.forEach((function(r){c.getNodeModel(r.id,!1).forEach((function(r){e.is(r.options.grid)&&r.options.grid.cellInfo.isLeaf&&(e.is(t,"array")&&t.length>0?(i=a.getReferenceModel(t[0]),e.is(i)?(r.options.grid[n]=e.is(i.get("V_Name"))?i.get("V_Name")+" "+i.get("revision"):t[0]["ds6w:label_value"]+" "+t[0]["ds6wg:revision"],r.options.grid[n+"PID"]=i.get("PID")):(r.options.grid[n]=t[0]["ds6w:label"]+" "+t[0]["ds6wg:revision"],r.options.grid[n+"PID"]=t[0].id)):o.warn(s.getNLSValue("RWU.ObjectRetrievalFailure")),c.updateNode(r.options.referencePID))}))}))}),{title:s.getNLSValue("Dialog.ReplaceByExisting.Title"),searchTitle:s.getNLSValue("Search.ReplaceByExisting.Title"),types:f})},v=function(t,n){var i,o,r,s,l,u={};if(e.is(n))if(Array.isArray(n.attribute)&&e.is(t)){for(l=0;l<n.attribute.length;l++)if(r=(o=n.attribute[l]).name,s=o.entity,u.objectToBeModified="instance"===s?a.getInstance(t.options.childInstancePID):u.objectToBeModified=a.getReferenceModel(t.options.childReferencePID),e.is(u.objectToBeModified)&&e.is(u.objectToBeModified.get(r))){u.attributeName=o.name,u.attributeNodeName=o.nodeName,u.dataIndex=o.dataIndex,u.instOrRef=o.entity;break}}else e.is(t)&&("instance"===n.attribute.entity?u.objectToBeModified=a.getInstance(t.options.childInstancePID):u.objectToBeModified=u.objectToBeModified=a.getReferenceModel(t.options.childReferencePID)),u.attributeName=n.attribute.name,u.attributeNodeName=n.attribute.nodeName,u.dataIndex=n.attribute.dataIndex,u.instOrRef=n.attribute.entity;return u.attributeInfo=c.getAttributeInfo(u.attributeName),e.is(u.attributeInfo)||(u.attributeInfo={}),e.is(u.objectToBeModified)?(u.attributeDef={},i=c.getTypeMaskInfo(u.objectToBeModified.get("type")),e.is(i)&&e.is(Object.prototype.hasOwnProperty.call(i,u.dataIndex))&&(u.attributeDef=i[u.dataIndex])):u.attributeDef={},u},y=function(t){var n=l.getModuleSelections(o.getId()),i=d.getComponent("WUXFrameWindowsManager"),r=o.getBehavior("WUXNodeModelBehavior"),a=i.getFrameWindow(o.getAppContext()).getImmersiveFrame(),u=d.getComponent("Dialog"),c=d.getComponent("Editor"),g=d.getComponent("Button"),f=d.getComponent("Element"),p=new f("div",{class:"dialogueContent",styles:{width:"100%",height:"100%",verticalAlign:"center"}}),h=new f("div",{class:"EditorElement",align:"right",styles:{width:"40%"}}).inject(p),m=new c({value:"",selectAllOnFocus:!0,visibleFlag:!0,autoCommitFlag:!0,placeholder:s.getNLSValue("FormUI.Placeholder.EnterANumber")}).inject(h),I=new u({domId:"replaceWhereUsed-setQuantity",immersiveFrame:a,modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,height:100,width:140,title:s.getNLSValue("RWU.SetQuantity"),content:p,closeButtonFlag:!0,buttons:{Ok:new g({domId:"replaceWhereUsed-Dialog-Apply",className:"ok primary",label:s.getNLSValue("MIL.PanelApplyButton"),emphasize:"primary",disabled:!1,onClick:function(){var i=Number(m.value);i>0&&Number.isInteger(i)?n.forEach((function(n){r.getNodeModel(n.id,!1).forEach((function(n){e.is(n)&&e.is(n.options)&&e.is(n.options.grid)&&6===n.options.grid.RWU_Action_Instance.id&&(n.options.grid[t]=s.getNLSValue("RWU.Quantity",{quantity:i}),n.options.grid[t+"PID"]=i,r.updateNode(n.options.referencePID))}))})):o.warn(s.getNLSValue("RWU.QuantityFailure")),I.close()}}),Cancel:new g({domId:"replaceWhereUsed-Dialog-Close",className:"close",label:s.getNLSValue("MIL.PanelCloseButton"),onClick:function(){I.close()}})}});I.show()},p=(m=t=>n=>i=>{let o=!1;if(!i.isHeader){const r=i.nodeModel;if(e.is(r)){const i=r.getAttributeValue("cellInfo");if(e.is(i)){const e=i[t];o=n(e)}}}return o})("suggestionToPerformEntries")(N),h=m("suggestionToPerformRefEntries")(N),f=t=>{var n=!1,i=t.options.rwuInstanceStatus,o=t.options.rwuReferenceStatus;return e.is(i)&&e.is(o)&&(n=!(i!==B&&i!==U||o!==B&&o!==U)),n},b=function t(n,i){var r,a=o.getBehavior("WUXNodeModelBehavior");e.is(n)&&(i?n.forEach((function(e){r=e.getChildren(!0),e.options.isComboboxDisplayable=!0,a.updateNode(e.options.instancePID),e.options.isComboboxDisplayable&&7!==e.options.referenceAction&&9!==e.options.referenceAction&&10!==e.options.referenceAction?t(r,!0):t(r,!1)})):n.forEach((function(e){r=e.getChildren(!0),e.options.isComboboxDisplayable=!1,a.updateNode(e.options.referencePID),t(r,!1)})))},D=function(t,n,i,o,r){t.forEach((function(t){var a,s,l,u=t.options.grid.cellInfo,c=(i?u.suggestionToPerformEntries:u.suggestionToPerformRefEntries).find((e=>e.valueItem===o)),d=n.getNodeModel(t.options.referencePID,!1);e.is(u)&&e.is(c)&&(s={label:c.labelItem,value:c.tooltipItem,id:c.valueItem,tooltip:c.tooltipItem,getLabel:function(){return this.label}},t.setAttribute(r,s),r===T?(t.options.instanceAction=c.valueItem,t.options.grid[T]!==s&&(t.options.grid[T]=s),4===c.valueItem&&(l=u.suggestionToPerformRefEntries.find((e=>7===e.valueItem)),d.forEach((function(t){t.options.grid[M]={label:l.labelItem,value:l.tooltipItem,id:l.valueItem,tooltip:l.tooltipItem,getLabel:function(){return this.label}},t.options.referenceAction=l.valueItem,n.updateNode(t.options.referencePID),a=t.getChildren(!0),e.is(a)&&(t.options.isComboboxDisplayable&&7!==t.options.referenceAction&&9!==t.options.referenceAction&&10!==t.options.referenceAction?b(a,!0):b(a,!1))})))):(t.options.referenceAction=c.valueItem,t.options.grid[M]!==s&&(t.options.grid[M]=s),n.updateNode(t.options.referencePID),a=t.getChildren(!0),e.is(a)&&(t.options.isComboboxDisplayable&&7!==t.options.referenceAction&&9!==t.options.referenceAction&&10!==t.options.referenceAction?b(a,!0):b(a,!1))))}))},{displayType:"RWU",isTrasientColumn:!0,isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,n){var i,o,r,a,s,l,d=null,g=this;return C(),e.is(n.attribute,"array")?(d=c.getAttributeInfo(n.attribute[0].name),i=u.hasRangeDefined(d),"V_ContQuantity"===n.attribute[0].dataIndex?(R.updateColumnInfos(t,n,{}),t.setCellValue=this.setRWUValue.bind(null,n,d),t.getCellEditableState=function(e){return g.getCellEditableState(e,t)}):(t.editionPolicy=i?"EditionInPlace":"EditionOnClick",t.getCellTypeRepresentation=L.getCellTypeRepresentation,t.getCellValue=L.getCellValue,t.getCellSemantics=L.getCellSemantics,t.hasCellValue=L.hasCellValue,t.setCellValue=this.setRWUValue.bind(null,n,d),t.hasCellValue=function(e){return g.hasRWUCellValue(e,t)},t.getCellEditableState=function(e){return g.getCellEditableState(e,t)})):(d=c.getAttributeInfo(n.attribute.name),A.isSupportedColumn(n)?A.updateColumnInfos(t,n,{isViewEditable:!1}):V.isSupportedColumn(n)?(t.editionPolicy="RWU_Replace"===n.dataIndex?null:"EditionInPlace",t.getCellTypeRepresentation=function(e){return g.getCellTypeRepresentation(e,d)},t.setCellValue=this.setRWUValue.bind(null,n,d),t.getCellClassName=this.getCellClassName,t.getCellValue=function(e){g.getCellValue(e,t,null)},t.getCellSemantics=this.getCellSemantics,t.hasCellValue=function(e){return g.hasRWUCellValue(e,t)},t.getCellEditableState=function(){return!1},t.getCellGroupingKey=this.getRWUGroupingKeyForURLColumn,t.groupableFlag=!1):e.is(w)&&w.isSupportedColumn(n)?(w.updateColumnInfos(t,n),t.getCellEditableState=function(){return!1}):e.is(S)&&S.isSupportedColumn(n)?(S.updateColumnInfos(t,n),t.getCellEditableState=function(){return!1}):(t.editionPolicy="RWU_Replace"===n.dataIndex?null:"EditionInPlace",t.getCellTypeRepresentation=function(e){return g.getCellTypeRepresentation(e,d)},t.setCellValue=this.setRWUValue.bind(null,n,d),t.getCellClassName=this.getCellClassName,t.getCellValue=function(e){return g.getCellValue(e,t,d)},t.getCellSemantics=this.getCellSemantics,t.getCellGroupingKey=this.getRWUGroupingKeyForURLColumn,t.groupableFlag=!1,t.hasCellValue=function(e){return g.hasRWUCellValue(e,t)},t.getCellEditableState=function(e){return g.getCellEditableState(e,t)})),o=u.hasMagnitude(d),r=u.isInteger(d),a=u.isDouble(d),s=u.isBoolean(d),l=u.isDate(d),i=u.hasRangeDefined(d),o&&(t.getCellSemantics=E.getMagnitudeSematics),l?(t.editionPolicy="EditionInPlace",t.allowResetToUndefinedByUIFlag=!0,t.getCellValueForExport=function(e){var t="",n=e.cellModel;return e.rowID<0?t=n:n&&(t=u.getFormattedDate(n,!1)),t}):r||a?(t.filterInfos={type:"number",options:{getCellValueForFilter:E.getCellValueForFilter}},i&&d.AuthorizedValues&&d.AuthorizedValues.every((function(e){return""===e||isNaN(e)}))&&(t.filterInfos.type="string",t.filterInfos.options.allowRegexp=!0,t.filterInfos.options.getCellValueForFilter=null)):s&&(t.filterInfos={type:"boolean"}),i&&(t.allowResetToUndefinedByUIFlag=!1,t.hasRangeDefined=!0,t.editionPolicy="EditionOnClick",t.getCellSemantics=function(){return{possibleValues:u.getAuthorizedValuesNLSList(d)}}),t},hasRWUCellValue:function(t,n){var i,o,r,a,s;if(t.nodeModel.options.isLeaf)switch(t.dataIndex){case T:case M:case O:case x:case F:o=!0;break;default:i=v(t.nodeModel,n),e.is(i.objectToBeModified)?(o=u.doesAttributeExist(i.objectToBeModified,i.attributeName),r=u.isAttrApplicableForType(i.objectToBeModified,i.attributeName),a=i.objectToBeModified.getAdditionalInfo("isFetched"),s=e.is(t.nodeModel.options.grid[t.dataIndex]),o=o||e.is(a)&&!a||r||s):o=!1}else o=!0;return o},getCellTypeRepresentation:function(t,n){let i;if(t.isHeader)i="string";else if(e.is(n)&&u.hasRangeDefined(n))i="string";else if(e.is(n)&&u.isDate(n))i="date";else if(e.is(n)&&(u.isDouble(n)||u.isInteger(n)))i="numberWithUnit";else switch(t.dataIndex){case T:i=p(t)?"enumString":null;break;case M:i=h(t)?"enumString":null;break;case O:i="url";break;default:i="string"}return i},getCellClassName:function(t){var n,i,o="";return e.is(t.nodeModel)&&(n=t.nodeModel.options.rwuInstanceStatus,i=t.nodeModel.options.rwuReferenceStatus,"RWU_Instance_Status"===t.dataIndex&&("fail"===n?o="rwu-fail-status":"success"===n?o="rwu-success-status":"ignored"===n&&(o="rwu-ignored-status")),"RWU_Reference_Status"===t.dataIndex&&("fail"===i?o="rwu-fail-status":"success"===i?o="rwu-success-status":"ignored"===i&&(o="rwu-ignored-status")),"RWU_Replace"===t.dataIndex?o="url-column":("RWU_Instance_Status"!==t.dataIndex&&"success"===n||"RWU_Reference_Status"!==t.dataIndex&&"success"===i)&&(o+=" rwu-succeeded-row")),o},getCellValue:function(t,n,i){let o=null;const r=t.nodeModel.options.grid,a=t.dataIndex;var s;return e.is(t.nodeModel)&&a.split(",").forEach((function(n){switch(n){case T:case M:e.is(r[n])&&(t.isHeader||t.nodeModel.options.isComboboxDisplayable&&(o=r[n].value));break;case O:o=e.is(r[T])?1===r[T].id?{label:r[n],func:function(){I(t,n)},getLabel:function(){return this.label},PID:""}:6===r[T].id&&t.nodeModel.options.isCreated?{label:r[n],func:function(){y(n)},getLabel:function(){return this.label},value:1}:"":"";break;default:s=e.is(i)&&u.hasRangeDefined(i),e.is(i)&&u.isDate(i)?(o=e.is(r[n],"number")?1e3*r[n]:r[n],o=s?u.getFormattedDate(o):u.getDate(o)):s?(o=e.is(r[n])&&"NULL"!==r[n]?r[n]:"",Number.isNaN(Number.parseInt(o))||(o=u.getAuthorizedValueNLS(i,u.getAuthorizedValueIndexFromName(i,Number.parseInt(o))))):o=e.is(r[n])&&"NULL"!==r[n]?r[n]:""}})),o},getCellSemantics:function(t){const n=e=>e.reduce(((e,t)=>(e[t.labelItem]=t.tooltipItem,e)),{});let i=null;if(e.is(t.nodeModel)){const o=t.nodeModel.options.grid,r=t.dataIndex;if(e.is(o)){const a=o.cellInfo;e.is(a)&&(r===T?p(t)&&e.is(t.nodeModel.options.isComboboxDisplayable)&&t.nodeModel.options.isComboboxDisplayable&&(i={possibleValues:n(a.suggestionToPerformEntries)}):r===M&&h(t)&&e.is(t.nodeModel.options.isComboboxDisplayable)&&t.nodeModel.options.isComboboxDisplayable&&(i={possibleValues:n(a.suggestionToPerformRefEntries)}))}}return i},setRWUValue:function(t,n,i,r){var a,s,c,d,g,f=t.dataIndex,p=l.getModuleSelections(o.getId()),h=o.getBehavior("WUXNodeModelBehavior"),m=f===T,I=f===M,y=!(!e.is(n)||!u.isDate(n)),b=e.is(n)&&u.hasRangeDefined(n),C=v(i.nodeModel,t);y&&(g=new Date(r),isNaN(g.getTime())||(r=Math.floor(g.getTime()/1e3))),b&&(r=u.getAuthorizedValue(C.attributeInfo,C.attributeDef,r)),m?(c=i.nodeModel.options.grid.cellInfo.suggestionToPerformEntries.find((e=>e.tooltipItem===r)),d=c.valueItem,p.forEach((function(e){a=h.getNodeModel(e.id,!1),D(a,h,m,d,f)}))):I?(c=i.nodeModel.options.grid.cellInfo.suggestionToPerformRefEntries.find((e=>e.tooltipItem===r)),d=c.valueItem,p.forEach((function(e){(a=h.getNodeModel(e.id,!1)).forEach((function(e){s=h.getNodeModel(e.options.referencePID,!1),D(s,h,m,d,f)}))}))):p.length>1?p.forEach((function(n){(a=h.getNodeModel(n.id,!1)).forEach((function(n){h.getNodeModel(n.options.instancePID,!1).forEach((function(n){e.is(t.attribute,"array")?t.attribute.forEach((function(t){e.is(n.options.grid[t.nodeName])&&(n.setAttribute(t.nodeName,r),n.options.attributesChanged.set(t.name,t.nodeName))})):(n.setAttribute(t.attribute.nodeName,r),n.options.attributesChanged.set(t.attribute.name,t.attribute.nodeName))}))}))})):(a=h.getNodeModel(i.nodeModel.options.instancePID,!1)).forEach((function(n){h.getNodeModel(n.options.instancePID,!1).forEach((function(n){e.is(t.attribute,"array")?t.attribute.forEach((function(t){e.is(n.options.grid[t.nodeName])&&(n.setAttribute(t.nodeName,r),n.options.attributesChanged.set(t.name,t.nodeName))})):(n.setAttribute(t.attribute.nodeName,r),n.options.attributesChanged.set(t.attribute.name,t.attribute.nodeName))}))}))},getCellEditableState:function(t,n){var i,o=!0,r=t.dataIndex;return f(t.nodeModel)||!t.nodeModel.options.isLeaf?o=!1:(i=v(t.nodeModel,n),e.is(i.attributeInfo)&&(o=!u.isReadOnly(i.attributeInfo,i.attributeDef)),"RWU_PLM_ExternalID"!==r&&"revision"!==r&&"current"!==r&&"RWU_Instance_Status"!==r&&"RWU_Reference_Status"!==r||(o=!1)),o},getRWUGroupingKeyForURLColumn:function(e){var t;if(e.dataIndex===O)t=e.nodeModel.getAttributeValue(e.dataIndex);else t=null;return t},getCellTooltip:function(t){var n,i={longHelp:""},o=t.cellModel;return-1===t.columnID?this.getCellDefaultTooltip(t):(t.isHeader||"RWU_Action"!==t.dataIndex?i.longHelp="object"===e.typeOf(o)?o.getLabel():o:(n=t.nodeModel.options.grid[t.dataIndex],i.longHelp=e.is(n)?e.is(n.tooltip)?n.tooltip:e.is(n.getLabel)?n.getLabel():"":""),i)}}}})),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormEventHelper"],(function(e,t){"use strict";return function(n,i,o,r,a,s){var l,u=o.getComponent("Element"),c=o.getComponent("ComboBox"),d=o.getComponent("TreeDocument"),g=o.getComponent("TreeNodeModel"),f=o.getComponent("AutoComplete"),p=o.getComponent("LineEditor"),h=o.getComponent("Editor"),m=o.getComponent("Toggle"),I=o.getComponent("DatePicker"),y=o.getComponent("Accordeon"),b=o.getComponent("UnitsSpinEditor"),D=o.getComponent("TooltipModel"),v=o.getComponent("RichTextEditor"),C=o.getComponent("InclusiveLineEditor"),P=o.getComponent("UnitsLineEditorForKF"),R=o.getComponent("LineEditorGroupForKF"),A=o.getComponent("Chips"),V=o.getComponent("MagnitudeLineEditor"),w=o.getComponent("MagnitudeSelectionchipEditor"),S=!1,L=null,E=null,N={},T=new t,M="inline-container",F=!1,x=function(t){var n=i.getPreferenceValue("separator"),o=new p({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:r.getNLSValue("FormUI.Placeholder.EnterAText")});return"Yes"===t.multiValue&&(o.placeholder=r.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:n}),o.autoCorrectFlag=!1),o.fieldType=t.fieldType,o.pattern=t.pattern,N[t.name]=o,o},O=function(t,n,i){var o,r,s=function(s){var l={};switch(s){case"NumberWithUnit":a.isMultiValuated(i)?l.value=Array.isArray(n)&&n.length>0?n:"":l.value=a.getMagnitudeValue(n,i),l.integer=a.isInteger(i),l.type="NumberWithUnit";break;case"UnitsSpinEditor":l.type="unitsSpinEditor",l.value=a.getMagnitudeValue(n,i);break;case"UnitsLineEditorForKF":l.type="UnitsLineEditorForKF",l.value=n,l.unit=a.getNLSForUnit(i);break;case"multivalueRange":for(l.type="autoComplete",a.isDate(i)&&Array.isArray(n)&&(n=n.map((function(e){return a.getFormattedDate(e)}))),l.value=n,l.multiValue=!0,l.elementsList=[],l.allowFreeInputFlag=!1,o=0;o<i.AuthorizedValues.length;o++)r=a.getAuthorizedValueNLS(i,o),l.elementsList.push({label:r,value:a.getAuthorizedValueSavedValue(i,o)||a.getAuthorizedValueNLS(i,o)});break;case"range":for(l.type="select",l.value=a.isDate(i)?a.getFormattedDate(n):n,l.options=[],o=0;o<i.AuthorizedValues.length;o++)r=a.getAuthorizedValueNLS(i,o),l.options.push({label:r,value:a.getAuthorizedValueSavedValue(i,o)||a.getAuthorizedValueNLS(i,o)});break;case"multivalue":l.type="text",l.value=a.getValueAsString(n,a.getType(i),!1);break;case"date":l.type="date",l.value=e.is(n)&&"NULL"!==n&&""!==n?a.getDate(n):void 0,"datetime"===l.displayType&&(l.timePickerFlag=!0);break;case"multivalueDate":l.type="date",e.is(n)&&"NULL"!==n&&""!==n?l.value=n.map((function(e){return a.getDate(e)})):l.value=void 0;break;case"boolean":l.type="checkbox",l.value="TRUE"===n.toUpperCase();break;case"multiLine":l.type="textarea",l.value="NULL"===n?"":n,l.pattern=a.getPattern(i),l.rows="6";break;case"richTextEditor":l.type="richTextEditor",l.value="NULL"===n?"":n;break;case"inclusiveLineEditor":l.type="inclusiveLineEditor",l.value=n,l.unit=i.unit,l.step=a.isDouble(i)?.1:1,a.isInteger(i)?(l.decimals=0,l.typingFilter=!0):(l.decimals=6,l.typingFilter=!1);break;case"LineEditorGroupForKF":l.type="LineEditorGroupForKF",l.value=n,l.unit=i.unit;break;case"chips":l.type="chips",l.value=n;break;default:l.type="text",a.isDouble(i)||a.isInteger(i)?l.value=a.getValueAsString(n,a.getType(i),!1):l.value="NULL"===n?"":n,l.pattern=a.getPattern(i)}return e.extend(t,l)};return t=a.isString(i)&&"richTextEditor"===t.displayType?s("richTextEditor"):"LineEditorGroupForKF"===t.displayType?s("LineEditorGroupForKF"):"UnitsSpinEditor"===t.displayType?s("UnitsSpinEditor"):"UnitsLineEditorForKF"===t.displayType?s("UnitsLineEditorForKF"):"inclusiveLineEditor"===t.displayType?s("inclusiveLineEditor"):"chips"===t.displayType?s("chips"):a.hasRangeDefined(i)?a.isMultiValuated(i)?s("multivalueRange"):s("range"):a.isInteger(i)||a.isDouble(i)?s("NumberWithUnit"):a.isMultiValuated(i)?a.isDate(i)?s("multivalueDate"):s("multivalue"):a.isBoolean(i)?s("boolean"):a.isDate(i)?s("date"):a.isMultiLine(i)?s("multiLine"):s("text")},B=function(t,n){var i=t,o=function(e){var t="",n=new Date(e);return isNaN(n.getTime())||(t=Math.floor(n.getTime()/1e3)),t.toString()};return a.isMultiValuated(n)?(i=a.getValueAsArray(t),a.isDate(n)&&(i=a.hasRangeDefined(n)?i.map((function(e){return a.getAuthorizedValue(n,null,e)})):i.map((function(e){return o(e)})))):a.hasRangeDefined(n)?i=a.getAuthorizedValue(n,null,t):a.isBoolean(n)?i="true"===t?"TRUE":"FALSE":a.isDate(n)&&(t="NULL"!==t&&e.is(t)?t:"",i=o(t)),i},U=function(t){var n=new h({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:r.getNLSValue("FormUI.Placeholder.EnterAText")});return n.fieldType=t.fieldType,N[t.name]=n,n},k=function(t,n){var i=new m({type:"switch",checkFlag:t.value,value:t.value,disabled:t.disabled});return i.fieldType=t.fieldType,N[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n.bind(null,N)),i},W=function(t){var n=e.is(t)?new I(t):new I;return n.fieldType=t.fieldType,N[t.name]=n,n},_=function(t,n,i){var o,r,s,l,u=[];if(e.is(n)&&(s=N[n],e.is(s)&&"select"===s.fieldType)){for(l=s.selectedIndex,r=0;r<t.AuthorizedValues.length;r++)o=a.getAuthorizedValueNLS(t,r),u.push({labelItem:o,valueItem:a.getAuthorizedValueNLS(t,r)}),e.is(i)&&i===o&&(l=r);s.setProperties({elementsList:u}),s.selectedIndex=l}},j=function(t,n){var i,o,r=[];for(o=0;o<t.elementsList.length;o++)r[o]={labelItem:t.elementsList[o].label,valueItem:t.elementsList[o].value};return(i=new c({elementsList:r,actionOnClickFlag:!1,enableSearchFlag:!0,value:t.value,disabled:t.disabled,generateRegexString:function(e){return e}})).fieldType=t.fieldType,N[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n.bind(null,N)),i},H=function(t,n){var i,o,r;return o=new d({}),t.elementsList.forEach((function(e){r=new g({label:e.label,value:e.value}),o.addChild(r)})),i=new f({elementsTree:o,actionOnClickFlag:!1,enableSearchFlag:!1,multiSearchMode:t.multiValue,allowFreeInputFlag:!e.is(t.allowFreeInputFlag)||t.allowFreeInputFlag}),e.is(t.value,"array")&&t.value.length>0&&(i.value=t.value),i.fieldType=t.fieldType,N[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n.bind(null,N)),i},G=function(t){var n,i;return n=t.value,"Yes"===t.multiValue?(n=Array.isArray(n)?n:[],i=new w({value:n,placeholder:r.getNLSValue("FormUI.Placeholder.EnterANumber"),allowedUnits:a.getAttributeUnits(s.getAttributeInfo(t.name)),integer:t.integer,disabled:t.disabled})):(i=new V({value:"",requiredFlag:t.mandatory,placeholder:r.getNLSValue("FormUI.Placeholder.EnterANumber"),allowedUnits:a.getAttributeUnits(s.getAttributeInfo(t.name)),integer:t.integer,validFlag:!0,disabled:t.disabled}),n=e.is(n,"string")&&"null"===n.toLowerCase()?"":n,i.setValue(n)),i.fieldType=t.fieldType,N[t.name]=i,i},X=function(t){var n,i;return n="null"!==t.value?t.value:"",i=new b({value:n,decimals:6,typingFilter:!1,pageStepValue:1}),e.is(t.magnitudeText,"string")&&i.setUnit(t.magnitudeText),i.fieldType=t.fieldType,N[t.name]=i,i},z=function(e){var t=new P(e);return t.fieldType=e.fieldType,N[e.name]=t,t},Q=function(e){var t=new v;return""!==e.value&&t.setData(e.value),t.fieldType=e.fieldType,N[e.name]=t,t},K=function(e){var t=new C(e);return t.fieldType=e.fieldType,N[e.name]=t,t},q=function(e){var t=new R(e);return t.fieldType=e.fieldType,N[e.name]=t,t},J=function(t,n){var i=new A({value:t.value,uniqueValue:!0,disabled:t.disabled});return i.fieldType=t.fieldType,N[t.name]=i,e.is(n,"function")?i.addEventListener("change",n.bind(null,N)):i.addEventListener("change",(function(t){e.is(t)&&t.stopPropagation()})),i},Z=function(){var t,n,i,o={};for(n in N)Object.prototype.hasOwnProperty.call(N,n)&&(i=s.getAttributeInfo(n),e.is(n)&&!N[n].getContent().getParent().isHidden()&&("select"===N[n].fieldType?t=B(N[n].currentValue,i):"autoComplete"===N[n].fieldType?t=N[n].value?B(N[n].value.join("|"),i):B(N[n].value,i):"checkbox"===N[n].fieldType?(t=(t=N[n].checkFlag).toString(),t=B(t,i)):"date"===N[n].fieldType?t=B(N[n].value,i):"richTextEditor"===N[n].fieldType?t=N[n].getData():"inclusiveLineEditor"===N[n].fieldType||"LineEditorGroupForKF"===N[n].fieldType||"unitsSpinEditor"===N[n].fieldType?t=N[n].getValue():"UnitsLineEditorForKF"===N[n].fieldType?t=N[n].getValue().value:"chips"===N[n].fieldType?0===(t=N[n].value).length&&(t=""):t="NumberWithUnit"===N[n].fieldType?N[n].getValue():B(N[n].valueToCommit,i),e.is(t)&&(o[n]=t)));return o},Y=function(t,n){var i,o,r=function(e,t){var n=N[e];switch("defaultValue"===t&&(t=s.getAttributeInfo(e).DefaultValue),n.fieldType){case"checkbox":n.checkFlag=Boolean(t);break;case"select":n.selectedIndex=t;break;default:n.value=t}};T.setFieldsValue(Z()),i=function(t){var n;if(e.is(T))return(n=t.findIndex((function(e){return T.isConditionMatch(e.condition)})))>-1?t[n]:void 0}(t),e.is(i)&&e.is(i.affectedAttributes)&&(o=i.affectedAttributes,Array.isArray(o)||(o=[o]),o.forEach((function(t){var i,o,a;e.is(N[t.fullName])&&(o=N[t.fullName],t.hide?(o.getContent().getParent().hide(),e.is(n)&&e.is(t.resetValue)&&r(t.fullName,t.newValue)):t.hide||(o.getContent().getParent().show(),e.is(t.updateAuthorizedListFrom)&&t.updateAuthorizedListFrom&&(i=s.getAttributeInfo(t.updateAuthorizedListFrom),a=e.is(n)?void 0:o.value,_(i,t.fullName,a)),e.is(n)&&e.is(t.resetValue)&&r(t.fullName,t.newValue)))})))},$=function(e,t){var n=e.events;Array.isArray(n)||(n=[n]),n.forEach((function(e){t.addEventListener(e.event,Y.bind(null,e.conditions))}))},ee=function(t,n){var i,o,r,a,s,l,u,c,d;for(e.is(t,"array")||(t=[t]),o=0;o<t.length;o++){switch(r=t[o],a=new e.Element("div",{class:"wux-field-container "+M}),new e.Element("h6",{class:"wux-textElement",text:r.label}).inject(a).tooltipInfos=new D({shortHelp:r.label}),s={name:r.name,value:r.value,mandatory:r.mandatory,disabled:r.disabled,fieldType:r.type,multiValue:r.multiValue,pattern:r.pattern},r.type){case"text":default:i=x(s);break;case"textarea":i=U(s);break;case"checkbox":i=k(s,r.attributeInfo.onChange);break;case"date":l={timePickerFlag:r.timePickerFlag||!1,allowUndefinedFlag:!0},e.extend(s,l),"Yes"===r.multiValue&&e.extend(s,{allowMultipleValuesFlag:!0}),i=W(s);break;case"select":l={elementsList:r.options},e.extend(s,l),i=j(s,r.attributeInfo.onChange);break;case"autoComplete":l={elementsList:r.elementsList,allowFreeInputFlag:r.allowFreeInputFlag},e.extend(s,l),i=H(s,r.attributeInfo.onChange);break;case"NumberWithUnit":l={integer:r.integer},e.extend(s,l),i=G(s);break;case"unitsSpinEditor":l={magnitudeText:r.magnitudeText},e.extend(s,l),i=X(s);break;case"UnitsLineEditorForKF":s.unit=r.unit,i=z(s);break;case"richTextEditor":i=Q(s);break;case"inclusiveLineEditor":s.unit=r.unit,s.stepValue=r.step,0===r.decimals&&!0===r.typingFilter?(s.decimals=0,s.typingFilter=!0):(s.decimals=6,s.typingFilter=!1),i=K(s);break;case"LineEditorGroupForKF":s.unit=r.unit,i=q(s);break;case"chips":i=J(s,r.attributeInfo.onChange)}i.inject(a),a.inject(n),e.is(r.events)&&$(r,i)}for(o=0;o<t.length;o++)u=t[o],c=void 0,d=void 0,c=u.events,d=N[u.name].getContent().getParent().isHidden(),e.is(u.events)&&!d&&(Array.isArray(c)||(c=[c]),c.forEach((function(e){"change"===e.event&&Y.call(null,e.conditions)})))},te=function(t,n,i){var o,a=i||{},s=!e.is(a.expandedFlag)||a.expandedFlag,l=!!e.is(a.hide)&&a.hide,u=r.getNLSValue(t),c=new e.Element("div",{class:"accordeon-section-container"}).inject(L);o="Wrong NLS key"!==u?u:t,l&&c.hide(),new y({items:[{header:o,content:n,expandedFlag:s}],style:"filled-separate"}).inject(c)},ne=function(t){var n,i,o,u,c,d,g,f=[],p=r.getNLSValue(E,null,"Type");for(e.is(t,"array")||(t=[t]),i=0;i<t.length;i++){if(n=t[i],o=e.is(n.attributeName)?n.attributeName:n.dicoType+"."+n.name,u=e.is(n.attributeInfo)?n.attributeInfo:s.getAttributeInfo(o),!e.is(u))return void(S=!0);d=a.getFullName(u),c=e.is(n.defaultValue)?n.defaultValue:e.is(l&&l[d])?l[d]:"PLMEntity.V_Name"===d&&E?p:a.getDefaultValue(u),g={name:a.getFullName(u),mandatory:n.mandatory,label:a.getNLS(u),attributeInfo:u,magnitudeText:a.getNLSForUnit(u),multiValue:u.MultiValuated,disabled:n.readOnly||a.isReadOnly(u),defaultValue:c},e.is(n.value)?c=n.value:e.is(n.objectToBeModified)&&(c=n.objectToBeModified.get(n.dataIndex),e.is(c)||(c=n.objectToBeModified.get(u.FullName),e.is(c)||(c=g.defaultValue))),a.isDate(u)&&(g.displayType="DateTime"===n.displayType?"datetime":"date"),a.isString(u)&&e.is(n.displayType)&&"richText"===n.displayType?g.displayType="richTextEditor":(a.isInteger(u)||a.isDouble(u))&&e.is(n.displayType)&&"inclusiveEditor"===n.displayType?g.displayType="inclusiveLineEditor":e.is(n.displayType)&&"LineEditorGroupForKF"===n.displayType?g.displayType="LineEditorGroupForKF":e.is(n.displayType)&&"UnitsSpinEditor"===n.displayType?g.displayType="UnitsSpinEditor":e.is(n.displayType)&&"UnitsLineEditorForKF"===n.displayType?g.displayType="UnitsLineEditorForKF":e.is(n.displayType)&&"chips"===n.displayType&&(g.displayType="chips",g.valueType=u.Type),g=O(g,c,u),e.is(n.events)&&(g.events=n.events),f.push(g)}return f},ie=function(t,n){var o,r,a,s=new u("div",{class:"section-container"}),l=n||{};let c=e.is(n.wkiLTHEnabledForInstruction)?n.wkiLTHEnabledForInstruction:void 0,d=e.is(n.wkiLTHEnabledForDCPRPP)?n.wkiLTHEnabledForDCPRPP:void 0;for(o in e.is(c)&&!c&&(F=!0),F||!e.is(d)||d||(F=!0),!1===l.headerAccordean?s.inject(L):t.name||(t.name=""),t)if(e.is(o))switch(o.toLowerCase()){case"name":a={expandedFlag:!e.is(t.expandedFlag)||t.expandedFlag,hide:!!e.is(t.hide)&&t.hide},te(t[o],s,a);break;case"attribute":if(r=ne(t[o]),!e.is(r))return void i.debug("attributeInfo is not available");ee(r,s)}s.addEvent("resize",(function(){var t,n,i,o;o=s.getElements(".wux-field-container"),(i=s.clientWidth)<290||i>290&&"block-container"===M?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(o)&&o.forEach((function(e){e.removeClassName(t),e.addClassName(n)}))}))},oe=function(t){var n,o=t.sections;for(n in o)if(e.is(n))switch(n.toLowerCase()){case"section":e.is(o[n])&&(Array.isArray(o[n])?o[n].forEach((function(n){t.headerAccordean=!e.is(n.headerAccordean)||n.headerAccordean,ie(n,t)})):ie(o[n],t));break;case"formstyle":e.is(o[n])&&("Vertical"===o[n]?M="block-container":"Horizontal"===o[n]&&(M="inline-container"))}!0===S&&(S=!1,i.debug(r.getNLSValue("InsertCmd.WarningConfiguration")))};return{createUI:function(t){t=t||{},L=new u("div",{class:"data-collection-form-UI"}),e.is(t.renderTo)?(e.is(t.type)&&(E=t.type.split("/")[1]||""),e.is(t.defaultValues)&&(l=t.defaultValues),oe(t),L.inject(t.renderTo)):i.debug("no parent container is present to inject the mainContainer")},getFormStyle:function(){return M},destroy:function(){e.is(L)&&L.destroy(),N={}},getValues:function(){return Z()},getFieldValue:function(e,t){return B(e,t)},validate:function(){var t,n,i,o,l,u={result:!0,message:null,more:null},c=[],d=[],g=!1,f=!1;for(t in N)if(e.is(N[t])&&!N[t].getContent().getParent().isHidden()&&(o=r.getNLSValue(t),!0===N[t].requiredFlag&&""===N[t].value&&(u.result=!1,c.push(o)),e.is(N[t].pattern)&&(n=new RegExp(N[t].pattern),""===(i=e.is(N[t].valueToCommit)?N[t].valueToCommit:"")||n.test(i)||(d.push(o),u.result=!1)),"richTextEditor"===N[t].fieldType))if(F){let n=s.getAttributeInfo(t);if(e.is(n)){let e=a.getMaxLength(n);if(e>0){let n=N[t].getData(),i=Array.isArray(n)?n.join(""):"";if((l=(new TextEncoder).encode(i).length)>e){u.result=!1,g=!0;f=/<img[^>]+src="[^"]+"/g.test(i)}}}}else u.result=!0,g=!1;if(!u.result)if(c.length>0&&d.length>0)u.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.Multiple",{missingFields:c.join(","),invalidFields:d.join(",")});else if(c.length>0)u.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.ValueMissing",{fields:c.join(",")});else if(d.length>0)u.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidValue",{fields:d.join(",")});else if(g){let e="<br>",t=r.getNLSValue("TextSize.Size",{TextSize:l});if(f){let n=r.getNLSValue("TextAndImageSize.TooLarge"),i=r.getNLSValue("TextAndImageSize.Recommendation");u.message=n+e+i+e+t}else{let n=r.getNLSValue("TextSize.TooLarge"),i=r.getNLSValue("TextSize.Recommendation");u.message=n+e+i+e+t}}return u},updateToDefaultValues:function(t){var n;for(n in N)e.is(N[n])&&e.is(t[n])&&(N[n].value=t[n])},updateAuthorizedList:function(e,t){_(e,t)}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXAltSubstDragDrop",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],(function(e,t){"use strict";return function(e,n,i,o,r,a,s,l){var u,c=new t(e,n,i,o,r,a,s,l);return u=function(e,t){return c.onDragStartCell(e,t)},{init:function(e){c.init(e)},getDDBehavior:function(){return{onDragStartCell:u}}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MultiAttrCellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnSortUtils"],(function(e,t,n,i){"use strict";return function(o,r,a,s,l,u,c,d,g){var f,p,h={},m=new t(o,r),I=new n(o,r);return g.getCustoColumnManagers().forEach((t=>{var n;n=new t(o,r),e.is(n)&&(h[n.displayType]=n)})),f=function(t,n){let o,a,u,c=t;n=n||{},Array.isArray(c)||(c=[c]),o=!e.is(n.isViewGroupable,"boolean")||n.isViewGroupable,a=!e.is(n.isViewFilterable,"boolean")||n.isViewFilterable,u=!!e.is(n.enableWrapTextInView,"boolean")&&n.enableWrapTextInView;return c.map((function(t){var c,d,f,p,y,b,D,v=!1,C=!1,P=!1,R=!1,A=!1,V=!1,w=!1,S=!1;D=function(e){w?e.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:m.getCellValueForFilter}}:C||P?(e.filterInfos={type:"number",options:{getCellValueForFilter:m.getCellValueForFilter}},V&&e.authorizedValues&&e.authorizedValues.every((function(e){return""===e||isNaN(e)}))&&(e.filterInfos.type="string",e.filterInfos.options.allowRegexp=!0)):e.filterInfos=v?{type:"date",options:{getCellValueForFilter:m.getCellValueForFilter}}:R?{type:"boolean"}:{type:"string",options:{allowRegexp:!0,getCellValueForFilter:m.getCellValueForFilter}}},c=l.getColumnInfos(t),y=Array.isArray(c.attribute)?c.attribute[0].name:c.attribute.name,b=s.getAttributeInfo(y),e.is(b)&&(V=l.hasRangeDefined(b),A=l.isMultiValuated(b),w=l.hasMagnitude(b),C=l.isInteger(b),P=l.isDouble(b),R=l.isBoolean(b),v=l.isDate(b),S=l.isString(b)),e.is(c.displayType)||Object.keys(h).some((t=>{let n=h[t];return!(!e.is(n.isSupportedColumn,"function")||!n.isSupportedColumn(c))&&(c.displayType=t,!0)})),e.is(c.displayType)||(Array.isArray(c.attribute)?c.displayType="MultiType":v&&!V&!A&&(c.displayType="Date")),p=!!o&&(!e.is(c.isGroupable)||c.isGroupable),f=!!a&&(!e.is(c.isFilterable)||c.isFilterable);let L="auto";if(e.is(c.width,"string")&&c.width.contains("%")?L=c.width:e.is(c.width)&&!isNaN(c.width)&&(L=parseInt(c.width)),d={sortableFlag:!0,groupableFlag:p,dataIndex:c.dataIndex,attribute:c.attribute,displayType:c.displayType,editableFlag:!e.is(c.isEditable)||c.isEditable,visibleFlag:!e.is(c.isHidden)||!c.isHidden,width:L,minWidth:null===c.minWidth||isNaN(c.minWidth)?100:parseInt(c.minWidth),text:e.is(t.text)?t.text:l.getColumnDisplayValue(c),editionPolicy:"EditionOnClick",tooltipIndex:c.Tooltip,hasCellValue:m.hasCellValue,getCellValue:m.getCellValue.bind(m,c),getCellValueForExport:m.getCellValueForExport,getCellTooltip:m.getCellTooltip,compareFunction:i.compareFunction},Array.isArray(c.attribute)?e.is(c.attribute[0].entity)&&"instance"===c.attribute[0].entity&&(d.icon={iconName:"flow-cascade",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"}):e.is(c.attribute.entity)&&"instance"===c.attribute.entity&&(d.icon={iconName:"flow-cascade",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"}),e.is(c.displayType))if(d.editableFlag=!1,h[c.displayType]){d=h[c.displayType].updateColumnInfos(d,c,n)}else switch(c.displayType){case"MultiType":I.updateColumnInfos(d,c,n),f&&D(d);break;case"Date":case"DateTime":d.editionPolicy="EditionInPlace",d.editableFlag=!l.isReadOnly(b),d.getCellEditableState=m.getCellEditableState,d.typeRepresentation="DateTime"===c.displayType?"datetime":"date",d.setCellValue=m.setValue,d.setCellValueBulk=m.setCellValueBulk,d.getCellGroupingKey=m.getDateCellGroupingKey,d.getCellValueForExport=function(e){var t="",n=e.cellModel,i="DateTime"===c.displayType;return e.rowID<0?t=n:n&&(t=l.getFormattedDate(n,i)),t},d.allowResetToUndefinedByUIFlag=!0,f&&(d.filterInfos={type:"date",options:{getCellValueForFilter:m.getCellValueForFilter}});break;case"NonEditable":d.editableFlag=!1,u&&S?(d.autoRowHeightFlag=!0,d.typeRepresentation="textBlock"):R?d.typeRepresentation="boolean":w&&!A?(d.typeRepresentation="number",d.getCellSemantics=m.getMagnitudeSematics):v&&!V&&(d.typeRepresentation="date",A&&(d.getCellSemantics=m.getMultiValueDateSematics)),f&&(d.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:m.getCellValueForFilter}})}else d.editableFlag=!l.isReadOnly(b),d.getCellEditableState=m.getCellEditableState,d.getCellValueForSort=m.getCellValueForSort,d.getCellSemantics=function(e){return m.getCellSemantics.call(this,b,e)},u&&S?(d.autoRowHeightFlag=!0,d.typeRepresentation="textBlock"):d.getCellTypeRepresentation=function(e){return m.getCellTypeRepresentation.call(this,b,e)},A&&V?d.editableFlag=!1:V&&(d.allowResetToUndefinedByUIFlag=!1,d.hasRangeDefined=!0,d.editionPolicy="EditionOnClick",d.getCellSemantics=function(){return{possibleValues:l.getAuthorizedValuesNLSList(b)}},w&&(d.getCellSemantics=m.getMagnitudeSematics)),f&&D(d),p&&w&&(d.getCellGroupingKey=m.getMagnitudeGroupingKey,d.getGroupingNodeLabel=m.getMagnitudeGroupingLabel),d.setCellValue=m.setValue,d.setCellValueBulk=m.setCellValueBulk;return g.areModuleColumnsImmutable(r.getId())&&(d.editableFlag=!1),d}))},{getBlockAttributes:function(t){var n,i,o,r={boAttrName:[],roAttrName:[],otherAttrName:[]},a=!1,s=e.is(t.Columns)?t.Columns.Column:[];return o=function(e,t){switch(t){case"reference":-1===r.boAttrName.indexOf(e)&&r.boAttrName.push(e);break;case"instance":-1===r.roAttrName.indexOf(e)&&r.roAttrName.push(e);break;default:-1===r.otherAttrName.indexOf(e)&&r.otherAttrName.push(e)}},e.is(t.Label)&&(i=l.getLabelInfos(t.Label),Array.isArray(i.attribute)?i.attribute.forEach((function(e){o(e.name,e.entity)})):o(i.attribute.name,i.attribute.entity)),(s=Array.isArray(s)?s:[s]).forEach((function(e){var t=l.getColumnInfos(e);Array.isArray(t.attribute)?t.attribute.forEach((function(e){o(e.name,e.entity)})):"instance"===t.attribute.entity||"reference"===t.attribute.entity?o(t.attribute.name,t.attribute.entity):"Relation"===t.displayType&&(a=!0)})),a&&(n=d.getAllRelationDisplayAttributes(),e.is(n)&&(Array.isArray(n.bo)&&n.bo.forEach((function(e){o(e,"reference")})),Array.isArray(n.relation)&&n.relation.forEach((function(e){o(e,"instance")})))),r},setReusablecontent:function(t){var n=function(n,i){var o,s,c=!0,d={forceDBMode:!0,onComplete:function(){o=l.getNodeAndColumnInfos(i.nodeModel,s),e.is(o)&&e.is(o.objectToBeModified)&&(o.objectToBeModified.setAdditionalInfo({isFetched:!0}),l.doesAttributeExist(o.objectToBeModified,o.attributeName)||l.isAttrApplicableForType(o.objectToBeModified,o.attributeName)||r.warn(u.getNLSValue("TableView.AvailabilityFailure",{key:o.attributeNLSTitle}))),e.is(i)&&e.is(i.cellView)&&t.updateRenderedRow(i.rowID,{updateCellContent:!0})}};if(n.preventDefault(),n.stopPropagation(),i&&(s=i.cellView.collectionView.getColumnOrGroup(i.columnID),e.is(s))){if(e.is(s.displayType)&&h[s.displayType]){let t=h[s.displayType];e.is(t.isTrasientColumn)&&(c=!t.isTrasientColumn)}c&&(o=l.getNodeAndColumnInfos(i.nodeModel,s),!e.is(o.objectToBeModified)||l.doesAttributeExist(o.objectToBeModified,o.attributeName)||o.objectToBeModified.getAdditionalInfo("isFetched")||("instance"===o.instOrRef?a.fetchInstance({PID:o.objectToBeModified.id},d):a.fetchRoot(o.objectToBeModified.id,d)))}};t.addEventListener("show",(function(e,t){r.debug("onEventShow fired"),n(e,t)})),t.addEventListener("activeCellChange",(function(t){const i=t.dsModel,o=i.getActiveCellID();if(o>=0&&i.isCellInEdition(o)){let r=i.getCellInfosAt(o);e.is(r)&&r.rowID>=0&&r.columnID>=0&&e.is(r.nodeModel)&&e.is(r.nodeModel.getReferencePID)&&(e.is(r.cellView)||(r.cellView={collectionView:i}),n(t,r))}r.debug("activeCellChange fired")}))},getColumnDataIndexByDisplayType:function(t,n){var i,o,r,a=[];if(e.is(n))for(o=t.columns.length,i=1;i<o;i++)r=t.columns[i],e.is(r)&&e.owns(r,"dataIndex")&&e.owns(r,"displayType")&&r.displayType===n&&(Array.isArray(r.attribute)?r.attribute.forEach((function(e){a.push(e.name)})):a.push(r.attribute.name));return a},getColumnAttributesByEntity:function(t,n){var i,o,r,a,s,l={},u=!!e.is(n,"boolean")&&n;if(s=function(t,n){e.is(t)&&(e.is(l[t])?l[t].push(n):l[t]=[n])},u||!e.is(p)){for(r=t.columns.length,i=1;i<r;i++)a=t.columns[i],o=!e.is(a.isExportable)||a.isExportable,e.is(a)&&e.owns(a,"dataIndex")&&o&&(u&&a.isHidden||e.owns(a,"attribute")&&(Array.isArray(a.attribute)?a.attribute.forEach((function(t){e.is(t.entity)&&s(t.entity,t.name)})):s(a.attribute.entity,a.attribute.name)));u||(p=l)}else l=p;return l},getLabelAttributesByEntity:function(t){var n,i,o={};return i=function(t,n){e.is(t)&&(e.is(o[t])?o[t].push(n):o[t]=[n])},n=t.getColumnOrGroup("tree"),e.is(n)&&(Array.isArray(n.attribute)?n.attribute.forEach((function(t){e.is(t.entity)&&i(t.entity,t.name)})):i(n.attribute.entity,n.attribute.name)),o},createColumns:function(e,t){return f(e,t)},manageColumn:function(t,n,i){i&&(e.is(i.visible)&&(!0===i.visible?t.showColumn(n):t.hideColumn(n)),e.is(i.disabled)&&t.layout.setColumnOrGroupProperties(n,{disabled:i.disabled}))},manageWrapText:function(t,n){var i,o=t.columns.length;const r={autoRowHeightFlag:n,typeRepresentation:n?"textBlock":"string"};for(let n=0;n<o;n++)i=t.columns[n],e.is(i)&&e.owns(i,"dataIndex")&&("textBlock"===i.typeRepresentation||"string"===i.typeRepresentation)&&t.layout.setColumnOrGroupProperties(i.dataIndex,r)}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/TreeListViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnManager","DS/DELPPWItemViewBehaviors/WUXActionDragDrop","DS/DELPPWProcessViewBehaviors/WUXManageCapableRscDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXAltSubstDragDrop","DS/DELPPWInstructionViewBehaviors/WUXDataCollectRowDragDrop","DS/DELPPWInstructionViewBehaviors/WUXResourceParameterRowDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/DataGridViewManager"],(function(e,t,n,i,o,r,a,s,l,u,c,d,g){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ProductImplementPlugin","ProcessImplementPlugin","PlatformPlugin","SelectionPlugin","InterWidgetComPlugin","Operations3DViewerPlugin","Viewer3DPlugin"],creator:function(f,p,h,m,I,y,b,D,v,C,P,R,A,V,w,S,L,E,N){const T=R.getGroupingAdditonalColumns();var M,F,x,O,B,U,k,W,_,j,H,G,X,z,Q,K,q,J,Z,Y,$,ee,te,ne,ie,oe,re,ae,se,le,ue,ce,de,ge,fe,pe,he,me,Ie={},ye=new u(p,I,D,A,V,h,w),be=new c(p,I,v),De=m.getComponent("DataGridView"),ve=m.getComponent("Menu"),Ce=new d(p,C,h,I,y,b),Pe={placeholder:"",apiVersion:2,rowSelection:"multiple",cellSelection:"none",defaultColumnDef:{sortableFlag:!0,editionPolicy:"EditionOnDoubleClick",typeRepresentation:"string"},isEditable:!1,selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",rowGroupingOptions:{depth:0,hideGroupedColumns:!1,getGroupingNodeLabel:function(t){var n,i,o,r,a,s=this.getTreeDocument();const l=R.getGroupingAdditonalColumns();return e.is(t)&&s.isGroupingNodeModel(t)&&(o=t.getProperty(),n=this.getColumnOrGroup(o),r=t.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount,a=t.getIdentifier(),o===l.Reference&&(a=(a=s.getNodeModelFromGroupingNode(t)).getLabel()),i=n.text+": "+a+" ("+r+")"),i}},getCellEditableState:function(e){var t,n=!0;return!0===e.isHeader?n=!1:"selection"===e.dataIndex?n=!0:(t=b.getNodeAndColumnInfos(e.nodeModel,e.parent.options.columns[e.virtualColumnID]),n=!b.isReadOnly(t.attributeInfo,t.attributeDef)),n}};return he=function(t,n,i,o,r,a,s){var l,u,c=[],d=[];u={isViewGroupable:!e.is(t.isViewGroupable,"boolean")||t.isViewGroupable,isViewFilterable:!e.is(t.isViewFilterable,"boolean")||t.isViewFilterable,isViewEditable:!e.is(t.isViewEditable,"boolean")||t.isViewEditable},e.is(k)&&e.is(k.wrapText)&&(u.enableWrapTextInView=!!e.is(k.wrapText)&&k.wrapText.value),e.is(t.Columns)&&e.is(t.Columns.Column)&&(d=Array.isArray(t.Columns.Column)?e.clone(t.Columns.Column):e.clone([t.Columns.Column]));const g=p.getBehavior("CfgColumnsBehavior");if(e.is(g)){const e=g.computeVisibleConfigColDataIndices(d);g.setVisibleCfgColDataIndices(e),d=g.filterCFGColumnsBasedOnAvailability(d)}if(t.Label){let n={},i="NonEditable"!==t.Label.displayType,o=0===d.length;if(Array.isArray(t.Label)?(n.Attribute=t.Label,n.Attribute.forEach((e=>{e.name=e.dataIndex,e.dataIndex="tree"}))):(n=t.Label,n.label=n.dataIndex,n.dataIndex="tree"),e.is(t)&&e.is(t.name)){let e="Column.";n.text=h.getNLSValue(e+t.name)}"NonEditable"===t.Label.displayType&&delete t.Label.displayType,n.isEditable=i,n.width=e.is(n.minWidth)?"auto":o?"100%":"30%",n.minWidth=e.is(n.minWidth)?n.minWidth:150,d.splice(0,0,n)}if(e.is(t.addDefaultGroupingColumns,"boolean")&&!0===t.addDefaultGroupingColumns){let e=d.map((e=>b.getColumnInfos(e).dataIndex));Object.values(T).forEach((t=>{-1===e.indexOf(t)&&d.push({dataIndex:t.split(".")[0],entity:t.split(".")[1],displayType:"defaultGroupable",isGroupable:!0,isHidden:!0,minWidth:100})}))}return e.is(r)&&!0===r&&d.splice(0,0,{dataIndex:"hide_show_3D",displayType:"hideShow3D",isGroupable:!1,isHidden:!0,width:30,minWidth:30}),e.is(a)&&!0===a&&d.splice(0,0,{dataIndex:"hide_show_items_3D",displayType:"hideShowItems3D",isGroupable:!1,isHidden:!0,width:30,minWidth:30}),e.is(s)&&!0===s&&d.splice(0,0,{dataIndex:"hide_show_BuildUp_3D",displayType:"hideShowBuildUp3D",isGroupable:!1,isHidden:!0,width:30,minWidth:30}),d&&(c=x.createColumns(d,u)),Array.isArray(n)&&(l=c.filter((function(e){return n.includes(e.dataIndex)}))).length>0&&(c=c.filter((function(e){return!n.includes(e.dataIndex)})),l.length>0&&c.unshift.apply(c,l)),{columns:c}},q=function(u){var c;if(j=e.is(u.columnConfig)?u.columnConfig:R.getViewColumnPreferences(p.getId(),U),G=(u=u||{}).dataGridViewOptions?e.extend(Pe,u.dataGridViewOptions,!0):Pe,!e.is(j))throw new Error("_createTreeListView options not defined");if(j.addDefaultGroupingColumns=!!e.is(G.addDefaultGroupingColumns,"boolean")&&G.addDefaultGroupingColumns,j.isViewGroupable=!e.is(G.isViewGroupable,"boolean")||G.isViewGroupable,j.isViewFilterable=!e.is(G.isViewFilterable,"boolean")||G.isViewFilterable,j.isViewEditable=!e.is(G.isEditable,"boolean")||G.isEditable,G.contextualCommands&&(Q=new n(f,p,m,h,b,w,I,R,y,A,V,L,E,N),G.onContextualEvent=function(t,n){var i,o,r,a,s=this,l=[],u={};if(e.is(t.cellInfos)&&(i=(r=t.cellInfos).nodeModel,a=r.manager,e.is(r.rowID))){if(-1===r.rowID)e.is(G.headerContextualCommands)&&(o=s.getColumnOrGroup(r.columnID),(u={node:i,selectedNodes:s.getTreeDocument().getXSO().get(),column:o,virtualColumnID:r.columnID,dataIndex:o.dataIndex,manager:a,handlers:{}}).params=t,l=Q.buildContextualMenu(G.headerContextualCommands,u),"selection"===r.dataIndex||"taggerColor"===r.dataIndex||"hide_show_3D"===r.dataIndex||"hide_show_items_3D"===r.dataIndex||"hide_show_BuildUp_3D"===r.dataIndex?l.forEach((function(e){e.state="disabled"})):"tree"===r.dataIndex&&l.forEach((function(e){"Hide"===e.title&&(e.state="disabled")}))),Array.isArray(l)&&Array.isArray(n)&&(l=n.concat(l));else if(0<=r.rowID){if(!e.is(i.getReferencePID))return;e.is(i)&&(i.isSelected()||i.select()),o=s.getColumnOrGroup(r.columnID),(u={node:i,selectedNodes:s.getTreeDocument().getXSO().get(),column:o,getColumnIDFromDataIndex:function(e){return a.getColumnIndexByDataIndex(e)},getColumnOrGroup:function(e){return r.cellView.collectionView.getColumnOrGroup(e)}}).infos=b.getNodeAndColumnInfos(i,o),l=Q.buildContextualMenu(G.contextualCommands,u),Array.isArray(n)&&n.length>0&&(l=[...l.slice(0,3),...n,...l.slice(3)])}return l}}),e.is(u.dataGridViewOptions)&&e.is(u.dataGridViewOptions.enableDragAndDrop,"boolean")&&!0===u.dataGridViewOptions.enableDragAndDrop){switch(G.cellDragEnabledFlag=!0,G.rowDragEnabledFlag=!0,c={acceptedTypes:u.pprTypes,pprTypesWithSupportedViews:e.is(u.pprTypesWithSupportedViews)?u.pprTypesWithSupportedViews:[]},u.dragDropManager){case"WUXAltSubstDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),B=new a(f,p,h,I,y,C,P,w);break;case"WUXActionDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),B=new o(f,p,h,I,y,C,P,w);break;case"WUXManageCapableRscDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),B=new r(f,p,h,I,y,C,P,m);break;case"WUXDataCollectRowDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),B=new s(f,p,h,C,I);break;case"WUXResourceParameterRowDragDrop":c=e.extend(c,{linkTypes:u.linkTypes}),B=new l(f,p,h,C,I);break;default:B=new t(f,p,h,I,y,C,P,w)}B.init(c),G=e.extend(G,B.getDDBehavior())}x=new i(f,p,I,y,b,h,m,D,R,S,w,E,N),z=he(j,H,G.showTagger,G.showSelection,G.show3DHideShow,G.add3DHideShowColumn,G.add3DBuildUpColumn)},K=function(t){var n,i;if(O=t,n=ge(),e.is(z)&&e.is(z.columns,"array")?G.columns=z.columns:G.columns=[],n.length>0&&(G.initialDataIndecesToGroup=n),e.is(M))M.setProperties({columns:G.columns});else{t.addEventListener("nodeModelUpdate",fe.bind(this)),G.treeDocument=t,M=new De(G),F=new g(M),M.registerColumnsEnum();const n=p.getBehavior("CfgColumnsBehavior");if(e.is(n)){const e=n.getRequiredTypeRepresentations();M.registerColumnTypeRepresentations(e)}M.addEventListener("columnVisibleStateChange",pe)}e.is(G.toolbarOptions)&&Array.isArray(G.toolbarOptions.items)&&(X=M.setToolbar(ae(G.toolbarOptions.items))),e.is(G.setReusablecontent)&&!1===G.setReusablecontent||x.setReusablecontent(M),i=x.getBlockAttributes(j),I.setSelectPredicate(p.getId(),i)},J=function(t,n){var i,o,r=[],a=p.getPreferenceValue("separator"),s=x.getLabelAttributesByEntity(M);return i={},e.is(s)&&(e.is(s.reference)&&e.is(t)&&s.reference.forEach((function(n){e.owns(t,n)&&(i[n]=t[n])})),e.is(s.instance)&&e.is(n)&&s.instance.forEach((function(t){e.owns(n,t)&&(i[t]=n[t])}))),o=M.getColumnOrGroup("tree"),e.is(o)&&(Array.isArray(o.attribute)?o.attribute:[o.attribute]).forEach((function(t){e.is(i[t.name])&&r.push(i[t.name])})),r.join(a)},Y=function(t){var n,i,o,r=t.type,a={icons:"",label:"",grid:{},useAsyncPreExpand:!1},s=x.getColumnAttributesByEntity(M),l=x.getColumnDataIndexByDisplayType(M,"Relation"),u=x.getColumnDataIndexByDisplayType(M,"DocMgmt");for(n in o="VPMReference"===r&&(Array.isArray(t["PLMEntity.V_usage"])&&t["PLMEntity.V_usage"].includes("3DPart")||e.is(t["PLMEntity.V_usage"],"string")&&"3DPart"===t["PLMEntity.V_usage"])?h.getIconURLFromKey("3DPart"):h.getIconURLFromKey(r),a.icons=[o],a.label=J(t),t)Object.prototype.hasOwnProperty.call(t,n)&&(i=t[n],e.is(i)&&"NULL"!==i&&(e.is(s)&&e.is(s.reference)&&s.reference.indexOf(n)>=0?a.grid[n+".reference"]=t[n]:"PID"===n&&(a.referencePID=t[n]),"type"===n&&(a.referenceType=t[n]),"defType"===n&&(a.defType=i)));return a.referencePID&&(a.useAsyncPreExpand=I.needToQueryForChildren(a.referencePID)),l.length>0&&ye.fillNodeOptions(a,l),u.length>0&&be.fillNodeOptions(a,u),a},Z=function(t,n,i){var o,r,a=x.getColumnAttributesByEntity(M),s=x.getColumnDataIndexByDisplayType(M,"Relation"),l=Y(t);for(o in l.label=J(t,n),n)Object.prototype.hasOwnProperty.call(n,o)&&(r=n[o],e.is(r)&&"NULL"!==r&&(e.is(a)&&e.is(a.instance)&&a.instance.indexOf(o)>=0?l.grid[o+".instance"]=n[o]:"PID"===o?l.instancePID=n[o]:"V_TreeOrder"===o&&(l.grid.V_TreeOrder=parseFloat(n[o]))));return s.length>0&&ye.fillNodeOptions(l,s,n,i),l},$=function(t){var n,i,o,r,a,s=!1,l=t.changedAttributes(),u=t.isInstance()?"instance":"reference",c=x.getColumnAttributesByEntity(M),d=x.getLabelAttributesByEntity(M),g={};if(!t.isConnection()&&e.is(l)){for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e.is(c)&&e.is(c[u])&&-1!==c[u].indexOf(n)&&(g[n+"."+u]="NULL"!==l[n]?l[n]:""),e.is(d)&&e.is(d[u])&&d[u].indexOf(n)>-1&&(s=!0));return s&&(t.isInstance()?(o=t.toJSON(),i=I.getReferenceModelFromInstance(t),e.is(i)&&(r=i.toJSON())):r=t.toJSON(),a=J(r,o)),{label:a,attributes:g}}},ee=function(){var e,t,n=[],i=F.getNumberOfRows();for(e=0;e<i;e++)t=F.getTreeNodeModelFromRowID(e),n.push(t.getReferencePID());return n},te=function(){var t,n,i,o,r,a,s,l,u,c,d,g,f=[];if(W&&(i=R.getViewColumnPreferences(p.getId()),n=e.is(i)?i.Columns.Column:[],e.is(M))){for(r=M.getColumnIndexByDataIndex("tree")+1,Number.isNaN(r)&&(r=1),t=0;t<n.length;t++)s=b.getColumnInfos(n[t]),o=n[t],c={},l=M.layout.getColumnOptionValue(s.dataIndex,"groupableFlag"),e.is(o.groupingInfo)&&l&&f.push(o.groupingInfo),o.isHidden?M.isColumnHidden(s.dataIndex)||M.hideColumn(s.dataIndex):(g=isNaN(o.width)?"auto":parseInt(o.width),M.getColumnWidth(s.dataIndex)!==g&&(c.width=g),g=isNaN(o.minWidth)?"100":parseInt(o.minWidth),M.getColumnMinWidth(s.dataIndex)!==g&&(c.minWidth=g),M.isColumnHidden(s.dataIndex)&&(c.visibleFlag=!0),e.Object.keys(c).length>0&&M.layout.setColumnOrGroupProperties(s.dataIndex,c),d=M.getColumnIndexByDataIndex(s.dataIndex),u=M.layout.getOrderedColumnsReverseIndexes(),a=M.layout.getOrderedColumnsIndexes(),u[d]!==r&&M.moveColumn(s.dataIndex,a[r])),r++;f.sort((function(e,t){return e.position-t.position})),f=f.map((function(e){return e.dataIndex})),M.groupRows({dataIndexesToGroup:f})}},ne=function(e){var t,n,i="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(63&n|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(63&n|128));return i},ie=function(e){return'"'+ne(e).replace(/"/g,'""')+'"'},oe=function(e){G.showTagger&&M.updateNodeKPIColor(e)},re=function(t){var n,i,o=[],r=t.collectionView;if(t.startNodeIndex>=0&&t.endNodeIndex>=0){for(n=t.startNodeIndex;n<=t.endNodeIndex;n++)i=r.model[n],e.is(i)&&o.push(i);o.length>0&&p.notify("visibleNodesChanged",[p.getId(),o])}},ae=function(t){return{entries:t.map((function(t){var n,i={};return i=t.icon&&t.icon.iconName?{...t.icon}:{iconPath:h.getIconURLFromKey(t.icon),iconSize:{width:"22px",height:"22px"}},e.is(t.tooltip)&&(n={title:h.getNLSValue(t.tooltip.title),shortHelp:h.getNLSValue(t.tooltip.shortHelp)}),{id:t.id,dataElements:{typeRepresentation:e.is(t.typeRepresentation)?t.typeRepresentation:"functionIcon",position:e.is(t.position)?t.position:"far",category:e.is(t.category)?t.category:"0",icon:i,value:e.is(t.value)?t.value:se.bind(null,t.id),disabled:!!e.is(t.disabled)&&t.disabled,tooltip:n,readOnly:!!e.is(t.readOnly)&&t.readOnly}}}))}},ue=function(t,n){var i,o,r=[],a=[];r=Q.buildContextualMenu(t.children),i={position:{x:(o=n.dsModel.elements.container.getBoundingClientRect()).left+5,y:o.top+(o.height-5)}},0!==S.getModuleSelections(p.getId()).length?(r=r.filter((function(e){let t=!1;return t="TitleItem"===e.type||"enabled"===e.state,t}))).forEach((function(t,n){("TitleItem"===t.type&&e.is(r[n+1])&&"TitleItem"!==r[n+1].type||"PushItem"===t.type)&&a.push(t)})):r.forEach((function(t){"TitleItem"===t.type?a.push(t):e.is(t.state)&&(t.state="enabled",a.push(t))})),a.length>0&&ve.show(a,i)},se=function(t,n){var i;i=G.toolbarOptions.items.find((function(e){return t===e.id})),e.is(i)&&e.is(i.children)?ue(i,n):e.is(G.toolbarOptions.actionHandler,"function")?G.toolbarOptions.actionHandler.call(null,t,n):e.is(Q)&&Q.onContextMenuCallback(t)},le=function(t){var n;t=Array.isArray(t)?t:[t],M&&(n=M.getToolbar(),e.is(n)&&n.items.getChildren().forEach((function(e){var n=e.options.id,i=t.indexOf(n);e.updateOptions({disabled:-1===i})})))},ce=function(){var e;e=L.isOpsViewerWidgetLinked(),this.has3DHideShowColumn()&&this.manageColumn("hide_show_3D",{visible:e}),this.hasHideShowItems3DColumn()&&this.manageColumn("hide_show_items_3D",{visible:e}),this.has3DBuildUpColumn()&&this.manageColumn("hide_show_BuildUp_3D",{visible:e})},de=function(e){this.has3DBuildUpColumn()&&this.manageColumn("hide_show_BuildUp_3D",{disabled:e.state})},ge=function(){var t=[];return e.is(j)&&e.is(j.Columns)&&e.is(j.Columns.Column)&&j.Columns.Column.forEach((function(n){var i,o=n.groupingInfo;e.is(o)&&(i=z.columns.find((function(e){return e.dataIndex===o.dataIndex})),e.is(i)&&i.groupableFlag&&t.push(e.clone(n.groupingInfo)))})),t.length>0&&(t.sort((function(e,t){return e.position-t.position})),t=t.map((function(e){return e.dataIndex}))),t},fe=function(t){var n=t.data.nodeModel,i=t.data.attributes,o=p.getBehavior("MfgItemQuantityGroupingBehavior");e.is(i)&&(i=Object.keys(i)),e.is(n)&&!O.isGroupingNodeModel(n)&&i.length>0&&e.is(o)&&o.manageGroupingNodeUpdate(n,i,M)},pe=function(t){let n,i,o,r=t.options||{};e.is(r.columnID)&&(i=r.visibleState||!1,n=M.getColumnOrGroup(r.columnID),e.is(n)&&(R.updateViewPreferences(p.getId(),n.dataIndex,{visibility:i}),o={dataIndex:n.dataIndex,visibleFlag:i},p.notify("TreeViewColumnVisibleStateChange",o)))},me=function(t){var n,i=k.wrapText;e.is(t)&&Array.isArray(t.modifiedPreferences)&&e.is(i)&&t.modifiedPreferences.includes(i.prefName)&&(n=p.getPreferenceValue(i.prefName),x.manageWrapText(M,n))},{viewName:"treeListView",listenTo:function(){return{TreeViewPrefModified:te,LoadDropContent:this.processDropContent,widgetLinked:ce,widgetUnlinked:ce,BuildUpReviewModeCmd:de,MePreferencesUpdated:me}},onStart:function(t,n){var i,o,r,a;t=t||{},k={},e.is(t.views)&&e.is(t.views.treeListView)&&e.is(t.views.treeListView.mePreferences)&&(a=t.views.treeListView.mePreferences,Object.keys(a).forEach((t=>{const n=a[t];e.is(n.repo)&&(k[t]={prefName:n.name,value:p.getPreferenceValue(n.name)})}))),e.is(t.pprTypes)&&e.is(t.columnConfigName)?(e.is(t.hasReadOnlyTypes,"boolean")&&t.hasReadOnlyTypes&&(Pe.defaultColumnDef.getCellEditableState=function(e){return M.getColumnOrGroup(e.dataIndex).editableFlag}),e.is(t.views)&&e.is(t.views.treeListView)&&(Ie=t.views.treeListView,Object.prototype.hasOwnProperty.call(Ie,"show3DHideShow")&&w.isSuppressHideShow3DColumn()&&(Ie.show3DHideShow=!1)),e.is(t.views.treeListView.toolTipConfigXML)&&Ce.init(t.views.treeListView.toolTipConfigXML),U=t.columnConfigName,(W=!!e.is(t.registerViewPreference)&&t.registerViewPreference)&&R.registerViewforColumnPref({viewID:p.getId(),columnConfigName:t.columnConfigName,viewIcon:t.moduleIcon}),H=Array.isArray(t.columnsBeforeTitle)?t.columnsBeforeTitle:null,!!e.is(t.immutableColumns,"boolean")&&t.immutableColumns&&R.registerModuleColumnsAsImmutable(p.getId()),q({pprTypes:t.pprTypes,dataGridViewOptions:e.merge(Ie,{isEditable:!!e.is(t.isAuthoringAllowed)&&t.isAuthoringAllowed}),dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,pprTypesWithSupportedViews:Array.isArray(t.pprTypesWithSupportedViews)?t.pprTypesWithSupportedViews:null}),!0===(_=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&R.registerViewforWidgetLayout({viewID:p.getId(),viewType:this.viewName}),(o=!!e.is(t.custoAttrsInfoPath)&&t.custoAttrsInfoPath)?require(["text!"+o],(function(t){if(e.is(t)){if(r=(r=e.is(t,"string")?e.Json.decode(t):t)[p.getId()],e.is(r,"object")){for(i in r)if(e.is(i,"string")){let e={};r[i].NLS=h.getNLSValue(r[i].NLSKey),e[r[i].NLSKey]=r[i].NLS,delete r[i].NLSKey,h.addNlsJSON(e)}b.addAttributeInfo(r),n()}}else console.log("Custo Attrs Info is not defined.")})):n()):n()},onStop:function(){e.is(M)&&M.remove(),W&&R.unRegisterViewforColumnPref(p.getId()),!0===_&&R.unregisterViewforWidgetLayout(p.getId(),this.viewName)},has3DHideShowColumn:function(){return!!e.is(Ie.show3DHideShow,"boolean")&&Ie.show3DHideShow},hasHideShowItems3DColumn:function(){return!!e.is(Ie.add3DHideShowColumn,"boolean")&&Ie.add3DHideShowColumn},has3DBuildUpColumn:function(){return!!e.is(Ie.add3DBuildUpColumn,"boolean")&&Ie.add3DBuildUpColumn},createTreeListView:function(t){var n,i,o="",r=Ie;t=t||{},e.is(t.dataGridViewOptions.identifier)&&(o=t.dataGridViewOptions.identifier),e.is(t.columnConfig)&&(i=t.columnConfig),e.is(t.dataGridViewOptions)&&(r=t.dataGridViewOptions),q({columnConfig:i,pprTypes:t.pprTypes,dataGridViewOptions:r,dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,identifier:o}),e.is(t.treeDocument)&&(K(t.treeDocument),e.is(M.onDelayedModelDataRequest,"function")||(M.onDelayedModelDataRequest=re),e.is(t.treeListViewContainer)&&M.getContent().inject(t.treeListViewContainer),e.is(t.toolbarContainer)&&(n=M.getToolbar(),e.is(n)&&n.getContent().inject(t.toolbarContainer)))},getTooltipManager:function(){return Ce},getColumnsByDisplayType:function(e){var t,n,i=[],o=x.getColumnDataIndexByDisplayType(M,e),r=o.length;for(t=0;t<r;t++)n=o[t],i.push(n.split(".")[0]);return i},loadDocument:function(t){K(t),e.is(M.onDelayedModelDataRequest,"function")||(M.onDelayedModelDataRequest=re)},getContent:function(){var t=void 0;return e.is(M)&&(t=M.getContent()),t},manageColumn:function(t,n){if("taggerColor"!==t)return e.is(M)&&e.is(x)?x.manageColumn(M,t,n):void 0;oe(n.visible)},processDropEffect:function(e){return B.processDropEffect(e)},processDropContent:function(e,t){var n=new Event("Drag");return n.dataTransfer=new DataTransfer,n.dataTransfer.setData("Text",e),B.onTreeListViewDrop(n,t)},getTreeListViewManager:function(){var t=null;return e.is(F)&&(t=F),t},getLabelAttribute:function(){return M._label},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=Y(t.toJSON())),n},getInstanceNodeOptions:function(t,n,i){var o;return e.is(t)&&e.is(n)&&(o=Z(t.toJSON(),n.toJSON(),i)),o},getRelationNodeOptions:function(e,t){var n=x.getColumnDataIndexByDisplayType(M,"Relation");return ye.getRelationAttributes(e,n,t)},getDocumentNodeOptions:function(e){var t=x.getColumnDataIndexByDisplayType(M,"DocMgmt");return{attributes:be.getDocumentNodeOptions(e,t)}},getUpdateNodeOptions:function(t){var n;return e.is(t)&&(n=$(t)),n},getVisibleTableContentAsCSV:function(e){return ne(M.getAsCSV({columnSeparator:e,addLevelInformation:!0,allColumns:!1,forceQuotes:!0}))},getConfiguredAttributesAsCSV:function(t,n){var i,o,r,a,s,l=[],u="";function c(e,n){var i,o;for(i=t[n].Attribute,o=0;o<i.length;o++)if((a=i[o].fullName)===e)return!0;return!1}for(i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(o=t[i].Attribute,r=0;r<o.length;r++)a=o[r].fullName,-1===l.indexOf(a)&&l.push(a);for(s=0;s<l.length;s++)0!==s&&(u+=n),u+=ie(l[s]);return u+="\r\n",ee().forEach((function(o){var r,a,d;if(r=I.getReference(o),e.is(r)&&function(e){return Object.prototype.hasOwnProperty.call(t,e)}(i=r.get("type"))){for(s=0;s<l.length;s++)0!==s&&(u+=n),d=c(a=l[s],i)&&e.is(r.get(a))?String(r.get(a)):"",u+=ie(d);u+="\r\n"}})),u},isInverseRelationColumnPresent:function(){var t,n=!1,i=D.getInverseRelationNameSet();return i.size>0&&e.is(x)&&(t=x.getColumnDataIndexByDisplayType(M,"Relation"),e.is(t,"array")&&(n=t.some((function(e){return i.has(e)})))),n},getDataGridView:function(){return M},getToolBarOption:function(){return X},getTreeDocument:function(){return O},getToolBarContent:function(){var e,t=null;return M&&(e=M.getToolbar())&&(t=e.getContent()),t},enableToolBarItems:function(e){le(e)},manageToolBarItemsAvailability:function(){var e,t=!0,n=[],i=[];0===(n=p.getBehavior("WUXNodeModelBehavior").getSelectedNodes()).length?i.push("CreateItem"):1===n.length&&(e=I.getReferenceModel(n[0].getReferencePID()),I.getValidChildTypes(e).length>0&&i.push("CreateItem"));for(let e=0;e<n.length&&!(t=n[e].isRoot());e++);t||i.push("DetachInstance"),this.enableToolBarItems(i)},setToolbarActionHandler:function(t){e.is(G.toolbarOptions)&&(G.toolbarOptions=e.extend(G.toolbarOptions,{actionHandler:t}))}}}}})),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI","text!DS/DELPPWViewBehaviors/assets/json/TypeMapping.json","text!DS/DELPPWViewBehaviors/assets/json/CreateFormAttributeEvents.json"],(function(e,t,n,i){"use strict";return function(o,r,a,s,l,u,c){var d,g,f,p=null,h=null,m=null,I=null,y=null,b=null,D=null,v=null,C={},P=null,R=null,A=!1,V=!1,w=e.Json.decode(i),S=new e.Element("div",{class:"Form-Sections-Container"}),L=a.getComponent("ComboBox"),E=a.getComponent("Accordeon"),N=a.getComponent("TooltipModel"),T=e.Json.decode(n),M=function(t){var n;m=t.dsModel.currentValue,n=p.concat("/",m),d.type=n,v.destroy(),e.is(P)&&P.destroy(),null===R&&U(),k((function(e){W(e)})),d.onTypeChange(m,S)},F=function(e){h=e.dsModel.currentValue,R.destroy(),R=null,M(e)},x=function(e){y=e.dsModel.currentValue},O=function(e){e.sort((function(e,t){return e.label.localeCompare(t.label,widget.lang,{numeric:!0})}))},B=function(t){var n,i,o=[];return n={elementsList:o=t.elementsList.map((function(e){return{labelItem:e.label,valueItem:e.value}})),actionOnClickFlag:!1,enableSearchFlag:!1},e.is(t.selected)&&(n.selectedIndex=o.findIndex((function(e){return e.valueItem===t.selected}))),(i=new L(n)).fieldType=t.fieldType,C[t.name]=i,e.is(t.onChange,"function")&&i.addEventListener("change",t.onChange),i},U=function(){var t=function(){var t,n,i,r,a,l,u,d,g,p,I,b,v,C={},P=[];e.is(D,"object")&&e.owns(D,m)&&(C=D[m]),p=function(t){let n={},i=[];if(e.is(C,"object")&&e.owns(C,"Type")&&(n=function(t,n){let i;return Array.isArray(t.Type)&&(i=t.Type.find((function(e){return e.name===n}))),e.is(i)?i:{}}(C,t)),e.is(n,"object")&&(e.owns(n,"visibility")&&"true"===n.visibility||!e.owns(n,"visibility"))){g=c.getTypeInfo(t);let n=s.getNLSValue(t);c.isAKindOf(t,"Resource")?(e.owns(g,"isOOTB")&&"false"===g.isOOTB||e.owns(g,"Newable")&&function(e){let t=e.toUpperCase();return["NEW","ALL"].some((e=>t.includes(e)))}(g.Newable))&&i.push({value:t,label:n!==t?n:s.getNLSValue(t,null,"Type")}):i.push({value:t,label:n!==t?n:s.getNLSValue(t,null,"Type")})}return i},P=P.concat(p(m)),e.is(h)&&h!==m?(P=P.concat(p(h)),d=c.getTypeHierarchy(h)):d=c.getTypeHierarchy(m),e.is(d,"array")&&d.forEach((function(e){e!==m&&(P=P.concat(p(e)))})),O(P),u=new e.Element("div",{class:"section-container"}),t=new e.Element("div",{class:"wux-field-container inline-container"}).inject(u),r=new e.Element("div",{class:"wux-field-container inline-container"}).inject(u),i=new e.Element("h6",{class:"wux-type-textElement",text:s.getNLSValue("General.Type")}).inject(t),n=B({name:"V_Type",elementsList:P,fieldType:"select",selected:m,onChange:M}),i.tooltipInfos=new N({shortHelp:s.getNLSValue("General.Type")}),n.inject(t),l=new e.Element("h6",{class:"wux-type-textElement",text:s.getNLSValue("General.Credentials")}).inject(r),a=function(){var t=o.getService("ConfigService").getSecurityContext(),n=t.getAllSC(),i=o.getConfig().isFacet&&!t.getSCFromPreferences().includes("ctx::")?"ctx::"+t.getSCFromPreferences():t.getSCFromPreferences(),r=new L({elementsList:n.map((function(e){return{labelItem:e.label,valueItem:e.value}})),actionOnClickFlag:!1,enableSearchFlag:!1,selectedIndex:n.findIndex((function(e){return e.value===i}))});return y=i,e.is(x,"function")&&r.addEventListener("change",x),r}(),l.tooltipInfos=new N({shortHelp:s.getNLSValue("General.Credentials")}),a.inject(r),I="Section.General",b=u,v=new e.Element("div",{class:"Type-Section-Container"}).inject(S),new E({items:[{header:s.getNLSValue(I)?s.getNLSValue(I):I,content:b,expandedFlag:!0}],style:"filled-separate"}).inject(v),b.addEvent("resize",(function(){var t,n,i,o;o=b.getElements(".wux-field-container"),(i=b.clientWidth)<290||i>290&&"block-container"===f?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(o)&&o.forEach((function(e){e.removeClassName(t),e.addClassName(n)}))})),R=v};if(e.is(D))t();else{const n=o.getConfig().resource.ItemOOTBFiltering;e.is(n)?l.getXMLValues(n,(function(n){e.owns(T,r.getId())&&(D=n.convert("Config.Preferences."+T[r.getId()].section+".OOTBType","name")),t()}),(function(e){V=!0,r.debug("failed to get ItemOOTBFiltering XML. Error Desc: "+e)})):(r.debug("Cannot export as ItemOOTBFilteringXML path is not provided"),t())}},k=function(t){var n=function(){var n,i,o=b[m]||{},r=e.clone(w[m]);e.owns(o,"Section")||(o.Section={},o.Section.name=s.getNLSValue("Section.Attributes"),o.Section.Attribute=[{dicoType:"PLMEntity",name:"V_Name",mandatory:!0},{dicoType:"PLMEntity",name:"V_description"}]),["ProcessContinuousProvide","ProcessContinuousCreateMaterial","ContinuousByProduct","DELContinuousServicePartReference","MBOMContinuousPhaseReference","MBOMContinuousInProcessItem"].indexOf(m)>=0&&(n=c.getAttributeInfo("V_DimensionType"),e.is(n)&&((n=e.clone(n)).UIAccess="",n.NLS=s.getNLSValue("Attribute.DELFmiMagnitudeExt.V_DimensionType"),Array.isArray(n.AuthorizedValues)&&(i=n.AuthorizedValues.find((function(e){return"MASS"===e.Name})),e.is(i)&&(n.DefaultValue=i.NLS)),u.addAttributeInfo({[n.FullName]:n}))),Array.isArray(o.Section)||(o.Section=[o.Section]),o.Section.forEach((function(t,n){t.Attribute.forEach((t=>{e.is(r)&&e.is(r[t.name])&&(t.events=r[t.name])})),e.is(g)&&!0===g&&(o.Section[n].Attribute=o.Section[n].Attribute.filter((function(e){return"instance"!==e.entity})))})),t(o)};e.is(b)?n():l.getXMLValues(o.getConfig().resource.insertFormAttributeXML,(function(e){b=e.convert("AttributesDescriptionList.Type","name"),n()}),(function(e){A=!0,r.debug("failed to get insertFormAttribute XML. Error Desc: "+e)}))},W=function(n){v=new t(o,r,a,s,u,c),P=new e.Element("div",{class:"Form-container"}),v.createUI({sections:n,type:d.type,renderTo:P,defaultValues:I}),P.inject(S),f=v.getFormStyle()},_=function(){return A||V};return{createUI:function(t){d=t||{},e.is(d.type)&&e.is(d.renderTo)&&(A=!1,V=!1,m=d.type.split("/")[1]||"",p=d.type.split("/")[0],e.is(d.defaultValues)&&(I=d.defaultValues[0]),e.is(d.createRoot)&&(g=d.createRoot),k((function(t){var n,i,o,r;e.is(d.baseTypes)&&(r=d.baseTypes.map((function(e){return{value:e,label:s.getNLSValue(e,null,"Type")}})),O(r),n=new e.Element("div",{class:"top-container inline-container"}).inject(S),i=new e.Element("h6",{class:"wux-type-textElement",text:s.getNLSValue("Base.Type")}).inject(n),o=B({name:"V_BaseType",elementsList:r,fieldType:"select",selected:d.selectedBaseType,onChange:F}),i.tooltipInfos=new N({shortHelp:s.getNLSValue("Base.Type")}),o.inject(n),h=d.selectedBaseType),U(),W(t)})),_()&&e.is(d.onFailure,"function")&&d.onFailure({invalidXML:!0}),S.inject(d.renderTo))},destroy:function(){e.is(v)&&v.destroy(),e.is(P)&&P.destroy(),e.is(S)&&S.destroy()},getValues:function(){var t,n={};return e.owns(C,"V_Type")&&(C.V_Type.currentValue?(n.V_Type=p.concat("/",C.V_Type.currentValue),n.type=m):(n.V_Type=C.V_Type,n.type=m),e.is(null)&&(n["DELFmiMagnitudeExt.V_DimensionType"]=null)),t=v.getValues(),e.extend(t,n),t},getSecurityContextOverride:function(){return y},validate:function(){return _()?{result:!1,message:s.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidXML")}:v?v.validate():{result:!0,message:null}},updateToDefaultValues:function(e){v&&v.updateToDefaultValues(e)},getAuthorizedValue:function(e,t){var n=null;return v&&(n=v.getFieldValue(e,t)),n}}}})),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/UXFactoryBehavior",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl","DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog","DS/DELPPWViewBehaviors/UXFactoryBehavior/MessageDialog"],(function(e,t,n,i,o,r){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","WebServicePlugin","AttributePlugin","DicoPlugin","DatabasePlugin"],creator:function(a,s,l,u,c,d,g,f){var p=function(e,t){var n=[null].concat(t),i=l.getComponent(e);return new(Function.prototype.bind.apply(i,n))};return{onStart:function(){},onStop:function(){},getComponent:function(e){return l.getComponent(e)},showConfirmation:function(t,n,i,r,a){const s=e.is(a)?a:{};new o(this,s).show(t,n,i,r)},showMessage:function(e,t){new r(this,s).show(e,t)},showWithMessage:function(e,t,n){new r(this,s).showWithMessage(e,t,n)},createElement:function(){var e=Array.prototype.slice.call(arguments);return p("Element",e)},create:function(o,r){var h,m,I,y,b,D=[],v=Array.prototype.slice.call(arguments,1);switch(o){case"Panel":b=this.getComponent("WUXDockAreaEnum"),(h=new(l.getComponent("Panel"))(r)).allowedDockAreas=b.LeftDockArea|b.RightDockArea;break;case"Tree":h=new(l.getComponent("Tree"))({height:"inherit",width:"100%",apiVersion:2,selection:{toggle:!1,canMultiSelect:!1},styles:{height:"100%",width:"100%"}});break;case"Dialog":I=l.getComponent("WUXFrameWindowsManager").getFrameWindow(s.getAppContext()),m={position:{my:"center",at:"center"},immersiveFrame:a.getConfig().isFacet?a.getConfig().immersiveFrame:I.getImmersiveFrame()},e.extend(r,m),(h=new(l.getComponent("CustomDialog"))(r)).addEventListener("contextmenu",(function(e){e.preventDefault()})),h.errorMsg=function(t){h.error(t);let n=h.getContent().getElement(".custom-dialog-error-message");e.is(n)&&n.scrollIntoView({behavior:"smooth"})},e.is(h.buttons.Ok)?h.buttons.Ok._giveFocus():h.buttons.Cancel&&h.buttons.Cancel._giveFocus(),h.addEventListener("keypress",(function(e){"Enter"===e.key&&!0!==e.shiftKey&&(h.buttons.Ok&&!h.buttons.Ok.disabled&&h.buttons.Ok._isFocused()?h.buttons.Ok.onClick():h.buttons.Cancel&&!h.buttons.Cancel.disabled&&h.buttons.Cancel._isFocused()&&h.buttons.Cancel.onClick())}));break;case"Filter":(Array.isArray(r.filterToolbarSections)?r.filterToolbarSections:["PART","PRODUCT","SERVICE","PROCESS","SYSTEM","RESOURCE","ORGANIZATION","PARENT"]).forEach((function(e){"PARENT"===e?D.push({item:e,iconElemName:"CreateInstance",isSelected:!1}):D.push({item:e,iconElemName:e,isSelected:!0})})),y=D.reduce((function(t,n){var i=u.getNLSValue("PPRTYPE."+n.item),o=u.getIconElem(n.iconElemName),r=!!e.is(n.isSelected,"boolean")&&n.isSelected;return t[n.item]={text:i,tooltipText:i,title:o,pinned:r},t}),{}),h=new(l.getComponent("Segmented"))({multiSelect:!0,data:y});break;case"SelectionControl":(h=new n(a,s,l,u,g,f)).createUI(r);break;case"FormUI":(h=new t(a,s,l,u,d,g)).createUI(r);break;case"DataCollectionUI":(h=new i(a,s,l,u,c,d,g)).createUI(r);break;default:h=p(o,v)}return h}}}}}));