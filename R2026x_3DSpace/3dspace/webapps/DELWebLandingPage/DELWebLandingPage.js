define("DS/DELWebLandingPage/MRUCache",["UWA/Core","UWA/Class","DS/DELWebComponentManager/DELWebComponentManager"],(function(e,t,n){"use strict";return t.extend({init:function(e){var t=n.getComponent("Utils");this._list=[],this._key=t?t.getUserLogin()+"/"+t.getPlatformId()+"/MRUData":"MRUData",this._parent(e)},get:function(){var e=widget.getValue(this._key);return e?JSON.parse(e):{ids:[]}},add:function(t){var n=this.get();e.is(t,"array")&&t.forEach((e=>{-1===n.ids.indexOf(e)&&n.ids.push(e)})),widget.setValue(this._key,JSON.stringify(n))},remove:function(t){var n=this.get();e.is(t,"array")&&t.forEach((e=>{var t=n.ids.indexOf(e);t>-1&&n.ids.splice(t,1)})),widget.setValue(this._key,JSON.stringify(n))},clear:function(){widget.deleteValue(this._key)}})})),define("DS/DELWebLandingPage/DELWebDragAndDropPage",["DS/Utilities/Dom","DS/Logger/Logger","css!DS/DELWebLandingPage/assets/css/DELWebLandingPage.css"],(function(e,t){"use strict";return function(n){const a=("del-web-dnd-/"+widget.id).toLowerCase();var i,o,r=n.body,s={actual:null,count:0},d=t.getLogger("DELWebDragAndDropPage"),l=function(e){var t,n,a,i,o,r,s={data:{items:[]}};for(n=UWA.is(e.dataTransfer.types.indexOf,"function")?"indexOf":"contains",t="",a=["text/searchitems","text/plain","Text"],i=0;i<a.length&&""===t;i++)o=e.dataTransfer.types[n](a[i]),(UWA.is(o,"number")&&o>=0||UWA.is(o,"boolean")&&!0===o)&&(t=a[i]);if(""!==t){r=e.dataTransfer.getData(t);try{s=JSON.parse(r)}catch(e){d.error(e)}}return s},c=function(e){e.dataTransfer.setData(a,!0)},u=function(t){var n,r;return!!(t.dataTransfer&&UWA.is(t.dataTransfer.types,"array")&&t.dataTransfer.types.find((e=>e===a)))||(n=e.firstParentWithClass(t.target,"dropZoneGlobal"),0===s.count?(o.show(),i.show()):n&&(r=n.querySelector(".dropZone"),s.actual!==r&&(s.actual&&s.actual.classList.remove("zoneHighlighted"),r.classList.add("zoneHighlighted"),s.actual=r)),s.count++,t.stopPropagation(),!1)},g=function(t){return e.firstParentWithClass(t.target,"dropZoneGlobal")&&t.preventDefault(),t.stopPropagation(),!1},f=function(e){return s.count--,0===s.count&&(i.hide(),o.hide()),e.target===s.actual&&(s.actual.classList.remove("zoneHighlighted"),s.actual=null),e.stopPropagation(),!1},p=function(e){return s.count=0,s.actual&&(s.actual.classList.remove("zoneHighlighted"),s.actual=null),i.hide(),o.hide(),e.stopPropagation(),!1},h=function(t){var a;return s.count=0,i.hide(),o.hide(),t.stopPropagation(),t.defaultPrevented||(t.preventDefault(),s&&s.actual?(s.actual.classList.contains("dragAndDrop")?n.onDrop(l(t),!1):s.actual.classList.contains("filter")&&n.onDrop(l(t),!0),s.actual.classList.remove("zoneHighlighted"),s.actual=null):(a=e.firstParentWithClass(t.target,"dropZoneGlobal")).classList.contains("dragAndDrop")?n.onDrop(l(t),!1):a.classList.contains("filter")&&n.onDrop(l(t),!0)),!1};return{initialize:function(){var e,t,a,d,l;for(s={actual:null,count:0},function(){r&&(r.addEventListener("dragstart",c.bind(this)),r.addEventListener("dragenter",u.bind(this)),r.addEventListener("dragover",g.bind(this)),r.addEventListener("dragleave",f.bind(this)),r.addEventListener("dragend",p.bind(this)),r.addEventListener("drop",h.bind(this)))}(),i=UWA.createElement("div",{class:"dnd-area"}).inject(r),(o=UWA.createElement("div",{class:"overlay-area"}).inject(r)).hide(),i.hide(),i.inject(r),e=[{id:"dragAndDrop",icon:"drag-drop",title:n&&n.nls?n.nls.open:""},{id:"filter",icon:"filter-open",title:n&&n.nls?n.nls.openWithFilter:""}],t=0;t<e.length;t++)a=UWA.createElement("div",{class:"dropZoneGlobal "+e[t].id,draggable:!1}),d=UWA.createElement("div",{class:"dropZone "+e[t].id,draggable:!1}).inject(a),l=UWA.createElement("div",{class:"dropIconAndText "+e[t].id}).inject(d),UWA.createElement("i",{class:"iconImg wux-ui-3ds wux-ui-3ds-4x wux-ui-3ds-"+e[t].icon}).inject(l),UWA.createElement("h5",{class:"title "+e[t].id,text:e[t].title}).inject(l),a.inject(i)},destroy:function(){!function(){r&&(r.removeEventListener("dragstart",c.bind(this)),r.removeEventListener("dragenter",u.bind(this)),r.removeEventListener("dragover",g.bind(this)),r.removeEventListener("dragleave",f.bind(this)),r.removeEventListener("dragend",p.bind(this)),r.removeEventListener("drop",h.bind(this)))}(),i&&(i.destroy(),i=null),o&&(o.destroy(),o=null)}}}})),define("DS/DELWebLandingPage/DELWebLandingPage",["UWA/Core","DS/DELWebLandingPage/DELWebDragAndDropPage","DS/Logger/Logger","DS/WelcomeScreenView/WelcomeScreen","DS/WelcomeScreenView/WelcomeScreenButtonController","DS/WelcomeScreenView/WelcomeScreenMRUController","DS/DELWebComponentManager/DELWebComponentManager","DS/DELWebLandingPage/MRUCache","i18n!DS/DELWebLandingPage/assets/nls/DELWebLandingPageMRU","text!DS/DELWebLandingPage/assets/json/Attributes.json","css!DS/DELWebLandingPage/assets/css/DELWebLandingPage.css"],(function(e,t,n,a,i,o,r,s,d,l){"use strict";return function(c,u){const g=["thumbnail_2d"];var f,p,h,v,D=n.getLogger("DELWebLandingPage"),m=new s,L=u&&e.is(u.attributes,"array")?u.attributes:["ds6w:label"],b=JSON.parse(l),y=L.reduce(((e,t)=>({...e,[b[t].nlsKey]:t})),{});return v={initialize:function(n){return new e.Promise((function(s,l){e.is(p)?l("Landing page already exits."):(p=e.createElement("div",{class:"del-landingpage-component-container"}).inject(n.container),n.buttons&&e.is(n.buttons.items)&&n.buttons.items.forEach((function(e){e.onAction&&(e.controller=new i({onAction:t=>(e.onAction(t),Promise.resolve())}))})),n.MRU&&(n.MRU.controller=new o({onHit:e=>{n.MRU.onDoubleClick&&n.MRU.onDoubleClick(e)},onContextualMenu:t=>{let a=[];return t&&n.MRU.contextualMenu&&e.is(n.MRU.contextualMenu.items,"array")&&n.MRU.contextualMenu.items.forEach((e=>{"RemoveItem"===e.id?(e.type="PushItem",e.title=d.get("ContextualMenu.RemoveItem.Title"),e.fonticon={content:d.get("ContextualMenu.RemoveItem.FontIcon")},e.action={callback:()=>{var e;e=t,m.remove([e&&e.id?e.id:""]),v.setMRU(m.get())}}):e.onAction&&(e.action={callback:()=>{e.onAction(t)}}),a.push(e)})),a}})),f=new a(n),n.dndOptions&&(h=new t({onDrop:n.dndOptions.onDrop,body:p,nls:n.dndOptions.nls})).initialize(),p.appendChild(f.getDOM()),v.setMRU(m.get()).fail((function(e){D.debug(e),D.error("Unable to show recent content"),m.clear(),r.getComponent("Utils").displayNotification({level:"warning",message:d.get("RecentContentNotAvailable.Error.Message")})})).finally(s))}))},hideLandingPage:function(){p.addClassName("del-landingpage-component-container-hidden")},showLandingPage:function(){p.removeClassName("del-landingpage-component-container-hidden")},setMRU:function(t){return new e.Promise((function(n,a){var i,o,s;(i=t,o={items:[]},s=r.getComponent("Utils"),new e.Promise(((t,n)=>{e.is(i.ids,"array")&&i.ids.length>0?s.getAttributeForIds(i.ids,Object.values(L),g).then((function(n){var a={[y.Type]:[],[y.MaturityState]:[]},i=function(e,t){a[e].find((e=>e.value===t))||a[e].push({value:t,source:["3DSpace"]})};e.is(n,"object")&&(Object.keys(n).forEach((function(e){n[e][y.Type]&&i(y.Type,n[e][y.Type]),n[e][y.MaturityState]&&i(y.MaturityState,n[e][y.MaturityState])})),s.retrieveNLSWithSource({nlsData:a}).then((function(e){Object.keys(n).forEach((function(t){var a={id:t,title:n[t][y.Title]?n[t][y.Title]:"",image:n[t].preview_url,modified:n[t][y.ModificationDate]?new Date(n[t][y.ModificationDate]):"",custom:{tooltip:Object.keys(y).map((function(a){var i,o;switch(a){case"Type":o=n[t][y[a]],i={key:d.get("Tooltip."+a),value:e&&e[y.Type]&&e[y.Type][o]?e[y.Type][o]:""};break;case"MaturityState":o=n[t][y.MaturityState],i={key:d.get("Tooltip."+a),value:e&&e[y.MaturityState]&&e[y.MaturityState][o]?e[y.MaturityState][o]:""};break;case"ModificationDate":i={key:d.get("Tooltip."+a),value:n[t][y.ModificationDate]?new Date(n[t][y.ModificationDate]).toLocaleString():""};break;default:i={key:d.get("Tooltip."+a),value:n[t][y[a]]?n[t][y[a]]:""}}return i}))}};o.items.push(a)})),t(o)})))})).fail(n):t(o)}))).then((function(e){f.setMRU(e),n()})).fail((function(e){D.error("Failed to get MRU data ",e),a(e)}))}))},addMRUItems:function(t){return new e.Promise((function(n,a){t&&e.is(t.ids,"array")&&t.ids.length>0?(m.add(t.ids),v.setMRU(m.get()).then(n).fail(a)):(D.warn("Invalid input, array of ids required as input"),a())}))},clean:function(){return f&&(f.destroy(),f=null),p&&(p.destroy(),p=null),h&&(h.destroy(),h=null),e.Promise.resolve()},destroy:function(){v.clean()}}}}));