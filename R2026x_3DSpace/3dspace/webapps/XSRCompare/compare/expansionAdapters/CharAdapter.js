define("DS/XSRCompare/compare/expansionAdapters/CharAdapter",["DS/CompareWidget2/plugins/STRUCTURE/expansionAdapters/exAdapter","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/refInst_tree","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/refInst_node","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/dbObj"],(function(t,e,i,r){var a=function(t,e){this._objIDSpec=t,this._dbObjArray=[],this._dbObjByPhysicalID={},this._plugSvcs=e,this._pathArrayArray=[],this._typeIconsArrayArray=[],this._displayRoutineLimits=!0,this._displaySpecificationLimits=!0};return a.prototype.build_dbObj=function(t,e){var i=new r;Object.keys(t).forEach((e=>{if("typeDisplayName"==e)i.addAttr("ds6w:type",t[e]);else if("title"==e)i.addAttr("ds6w:label",t[e]);else if("revision"==e)i.addAttr("Revision",t[e]),i.addAttr("ds6wg:revision",t[e]);else if("additionalAttributes"==e){let r=t[e],a=[];Object.keys(r).forEach((t=>{let e=t,d=r[t];i.addAttr(e,d),a.push(e)}));const d=widget.getValue("XSRExtensions")||[],s=new Set([...d,...a]);widget.setValue("XSRExtensions",Array.from(s))}else if("testMethods"==e){let r=t[e],a=0===r.length?"":r.map((t=>t.title)).join(",");i.addAttr("TestMethods",a)}else"dimension"==e?i.addAttr("Dimension",t[e].displayName):"precision"==e?i.addAttr("Precision",t[e]):"priority"==e?i.addAttr("Priority",t[e]):"missedTargetAction"==e?i.addAttr("MissedTargetAction",t[e]):"notes"==e?i.addAttr("Notes",t[e]):"description"==e?i.addAttr("Description",t[e]):i.addAttr(e,t[e])})),this.addCombinedLimitValues(t,i);let a="RELEASED"==e.current,d=""==e["next.physicalid"];i.addAttr("latestReleased",a),i.addAttr("latestRevision",d);var s={smallURL:t.icon,largeURL:t.thumbnail_2d};return i.addAttr("typeIcons",s),i},a.prototype.addCombinedLimitValues=function(t,e){let{type:i,target:r,min:a,isMaxIncluded:d,isMinIncluded:s,max:n,lowerRoutineReleaseLimit:o,upperRoutineReleaseLimit:l,isLowerRoutineReleaseLimitIncluded:c,isUpperRoutineReleaseLimitIncluded:p,lowerSpecificationLimit:u,upperSpecificationLimit:h,isUpperSpecificationLimitIncluded:y,isLowerSpecificationLimitIncluded:b}=t;if("DescriptiveCharacteristic"==i)e.addAttr("Target",r),e.addAttr("Dimension","");else{if(null!=a||null!=n){let t=(a?(s?">=":">")+a:"")+(a&&n?" and ":"")+(n?(d?"<=":"<")+n:"");r&&(t+=(t?",":"")+"Target = "+r),e.addAttr("Target",t)}if(null!=o||null!=l){let t=(o?(c?">=":">")+o:"")+(o&&l?" and ":"")+(l?(p?"<=":"<")+l:"");e.addAttr("RoutineLimits",t)}if(null!=u||null!=h){let t=(u?(b?">=":">")+u:"")+(u&&h?" and ":"")+(h?(y?"<=":"<")+h:"");e.addAttr("SpecificationLimits",t)}}},a.prototype.build_rootDBObj=function(t){var e=new r;Object.keys(t).forEach((i=>{"_objType"==i&&(e.addAttr("ds6w:label","Physical Product"),e.addAttr("revision","A")),"type"==i?e.addAttr("ds6w:type",t[i]):"title"==i?e.addAttr("ds6w:label",t[i]):e.addAttr(i,t[i])}));var i={smallURL:t.icon,largeURL:t.thumbnail_2d};return e.addAttr("typeIcons",i),e},a.prototype.addRoot_dbObj=function(t){let e=this.build_rootDBObj(t);this._rootObj=e},a.prototype.add_dbObj=function(t){return null==this._dbObjByPhysicalID[t.getAttr("physicalid")]&&(this._dbObjByPhysicalID[t.getAttr("physicalid")]=t,this._dbObjArray.push(t)),!0},a.prototype.add_path=function(t){null==t||0==t.length?this._plugSvcs.errout("Attempt to add null or empty path to tree"):t.length%2!=1?this._plugSvcs.errout("Invalid path; contains even number of entries (count *must* be odd)"):this._pathArrayArray.push(t)},a.prototype.add_typeIcons=function(t){this._typeIconsArrayArray.push(t)},a.prototype._isTreeNodeRefInstID=function(t,e,i){var r=!1;t.getAttr("REF.physicalid")==e&&(t.getAttr("INST.physicalid")==i&&(r=!0));return r},a.prototype.buildTree=function(){var t=this,r=new e(this._objIDSpec);try{let e=new i(t._rootObj,null);r.setRoot(e),Object.keys(t._dbObjByPhysicalID).forEach((r=>{let a=t._dbObjByPhysicalID[r];var d=new i(a,null);e.addChild(d),d.setParent(e)}))}catch(t){this._plugSvcs.errout("Failure building riTree (from paths): "+t),r=null}return r},a.prototype._get_dbObjByPhysicalID=function(t){if(this._dbObjByPhysicalID[t])return this._dbObjByPhysicalID[t];let e=null;return Object.keys(this._dbObjByPhysicalID).forEach((i=>{this._dbObjByPhysicalID[i]._attrList.did==t&&(e=this._dbObjByPhysicalID[i])})),e},t.singleton({jsClass:"PE2REFINST_TREE",convert:function(t,e,i,r){var d=new a(t),s=r.filteringCondition;d.addRoot_dbObj(t),e.forEach((t=>{var e=t.characteristics.length;if(!("LatestReleased"==s&&"RELEASED"!=t.current||"LatestRevision"==s&&""!=t["next.physicalid"]))for(var i=0;i<e;i++){t.characteristics.forEach((e=>{var i=d.build_dbObj(e,t);d.add_dbObj(i)}))}}));var n=d.buildTree();return d=null,n}})}));