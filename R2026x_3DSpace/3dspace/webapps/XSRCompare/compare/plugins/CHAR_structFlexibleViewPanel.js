define("DS/XSRCompare/compare/plugins/CHAR_structFlexibleViewPanel",["UWA/Class","DS/CompareWidget2/plugins/STRUCTURE/flexibleView/ViewPanel/structFlexibleViewPanel","DS/CompareCommon/DragAndDrop","DS/CompareCommon/Utils","DS/CompareWidget2/plugins/STRUCTURE/ViewPanel/Overview","DS/XSRCompare/compare/plugins/CHAR_fvpTrees","DS/CompareWidget2/viewComponents/StandardCompareToolbar","DS/CompareWidget2/plugins/STRUCTURE/ViewPanel/structExpandCollapseMenu","DS/CompareWidget2/plugins/STRUCTURE/ViewPanel/externalController","i18n!DS/XSRCommonComponents/assets/nls/XSRCommonComponents","css!UIKIT/UIKIT.css","css!DS/CompareWidget2/CompareWidget2.css"],(function(e,t,i,o,n,s,a,l,r,d){"use strict";var p=t.extend({init:function(){this._parent(arguments[0])},buildSkeleton:function(e,t){var i=this;this._loadContextMenu(t.CONTEXT_MENU_PLUGIN),i.activeFilterView="LatestRevision",this._expandCollapseMenu=new l({structComparePanel:this});var o={doExpandCollapseUpdates:this._doExpandCollapseUpdates.bind(this),onContextMenu:this._onContextMenu.bind(this),syncOverview:this._syncOverview.bind(this)};this._fvpTrees=new s({options:t,plugSvcs:i._plugSvcs,gridView:i._gridView,flagDD:i._flagDD,structComparePanelCBs:o,compareTreeDocumentArray:this._compareTreeDocumentArray}),this._toolbar=this.buildToolbar(e,t),this._fvpTrees.inject(e);let a=i._gridView.getGridIDs();0!=t.ENABLE_OVERVIEW&&(this._overview=new n({viewID:this._myViewID,gridID:a[a.length-1]}),this._overview.inject(e)),0!=t.ENABLE_DND&&this._setupDnD()},buildOtherMenuItems:function(){var e=this,t=[];t.push({id:"FilterChars",dataElements:{domId:"compare-struct-expansion-button",typeRepresentation:"functionIcon",label:"CharFilter",tooltip:d.View,position:"far",priority:1,overflowPriority:"never",value:t=>e._displayMenu(this.getFilterMenu(),t.dsModel.elements.container),icon:{iconName:"flow-cascade-ok-2",fontIconFamily:1}}});let i={id:"CustomViews",dataElements:{domId:"compare-struct-display-style-button",typeRepresentation:"functionIcon",label:"CustomView",tooltip:d.CustomViews,position:"far",priority:1,overflowPriority:"never",icon:{iconName:"cog",fontIconFamily:1},value:e=>this.handleCustomToolbarCommands(e)}};return t.push(i),t},getFilterMenu:function(){var e=this;return[{id:"LatestReleased",icon:"flow-cascade-ok-1",title:d.LatestReleased,tooltip:d.LatestReleased},{id:"LatestRevision",icon:"flow-cascade-ok-2",title:d.LatestRevision,tooltip:d.LatestRevision}].map((t=>({type:"CheckItem",id:t.id,icon:t.icon,title:t.title,tooltip:t.tooltip,state:t.id==e.activeFilterView?"selected":"",action:{callback:()=>this.handleCustomToolbarCommands(t)}})))},handleCustomToolbarCommands:function(e){let t=this;console.log(e);let i=e.id;if("LatestReleased"==i||"LatestRevision"==i)t._plugSvcs.postEvent("CHAR_COMMAND_SELECTION",{id:e.id}),t._toolbar.update({displayIcon:[{id:"FilterChars",icon:e.icon}]}),t.activeFilterView=i;else if(e.context&&"CustomViews"==e.context.nodeModel._ID){t._fvpTrees.dataGridViews[0].showCustomViewsDialog();let e=this._fvpTrees.dataGridViews[0],i=this._fvpTrees.dataGridViews[1];e.onCustomViewsSave=(e,t)=>{i.loadCustomViews(e,t),widget.setValue("XSRCompareCustomGridViews",e),widget.setValue("XSRCompareCurrentCustomViewIndex",t)}}},_updateTreePanelCaptions:function(){let e=this;this._parent();let t=widget.getValue("XSRExtensions"),i=["synthProp_REF.Precision","synthProp_REF.Priority","synthProp_REF.MissedTargetAction","synthProp_REF.Dimension","synthProp_REF.Description","synthProp_REF.Notes"];e._fvpTrees.dataGridViews.forEach((e=>{let o=e.columns,n={};o.forEach((e=>{(t.includes(e.text)||i.includes(e.dataIndex))&&(e.visibleFlag=!1,n[e.dataIndex]=!1)}));let s={identifier:"DefaultConfiguration",label:"Default Configuration",columnsVisibleFlag:n};var a=widget.getValue("XSRCompareCustomGridViews"),l=widget.getValue("XSRCompareCurrentCustomViewIndex");a?(a[0].columnsVisibleFlag=n,e.loadCustomViews(a,l)):e.loadCustomViews([s],0)}));const o=Array.from(document.querySelectorAll(["#FLEX_VIEW-list-xen","#FLEX_VIEW-tree-list-xen","#FLEX_VIEW-tree-xen"].join(", "))).find((e=>"none"!==window.getComputedStyle(e).display));console.log(o);let n=o.querySelectorAll(".treePanel-headerText");this._getTreePanelCaptions().forEach(((t,i)=>{let o=n[i].getChildren()[0].getText(),s=n[i].getChildren()[1].getText();t.panelCaption.label[0].text=o,t.panelCaption.label[1].text=s,e._fvpTrees.setPanelCaption(t.panelContentId,t.panelCaption)}))}});return p}));