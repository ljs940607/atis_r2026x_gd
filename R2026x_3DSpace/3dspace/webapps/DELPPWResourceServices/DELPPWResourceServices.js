define("DS/DELPPWResourceServices/ResourceUtils",["UWA/Core","UWA/Class","UWA/Json","DS/DELPPWLoggerModel/LoggerUtils","DS/WebappsUtils/WebappsUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWModelServices/BehaviorUtil","text!DS/DELPPWResourceServices/assets/json/LanguagesConfig.json"],(function(e,n,i,r,t,a,o,s){"use strict";var c,u,l,f={},d=[],g=i.decode(s),m=function(n,i){var r={};return e.is(i,"string")&&i.length>0&&e.is(n,"array")&&n.some((function(e){var n=!1;return e.Name===i&&(r=e,n=!0),n})),r},h=function(n,i=!1){u?i?e.extend(u,n):e.merge(u,n):u=n},p=function(n,i=!1){var r;function t(n,i){return n.replace(/\{([\w-]+)\}/g,(function(n,r){return e.is(i[r])?i[r]:""}))}r=n,e.i18n(r),e.is(r.get)||Object.defineProperty(r,"get",{value:function(e){return this[e]||e},enumerable:!1}),r.replace||Object.defineProperty(r,"replace",{value:t,enumerable:!1}),h(r,i)},N=function(n,r){var t;if(n=e.is(n,"string")?i.decode(n):n,c||(c={}),e.is(r))for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(c[t]=n[t],r&&(c[t].ModuleName=r));else c=e.merge(c,n)},b=function(n,i){var r,t,a;return"ArbitraryUnit"===n?(r=m(d,n),t=m(r.Units,i)):(r=f[n]||{},a=e.is(i,"string")&&i.length>0?i:r.MKSUnit,t=m(r.Units,a)),t};return n.singleton({name:"ResourceUtils",uninitializedCalls:"throw",init:function(n){if(n=n||{},this.options=n,!e.is(this.options.iconCatalogPath)||!e.is(this.options.nlsFilePath))throw new Error("iconCatalogPath or nlsFilePath options not defined")},setup:function(n,t){var a=this;require(["text!"+a.options.iconCatalogPath,"i18n!"+a.options.nlsFilePath],(function(t,o){var s=i.decode(t);e.is(s.requireFolderPath)&&e.is(s.localIcons)&&e.is(s.requireModule)||r.debug(a.name,"requireFolderPath or localIcons or requireModule information has not been defined"),l=s.requireFolderPath+"/",N(s.localIcons,s.requireModule),h(o),n()}),(function(){t("ResourceUtils.Failure")}))},addDimensions:function(n){var i={};e.is(n,"array")&&(n.forEach((function(e){i[e.Name]=e.NLS,f[e.Name]=e})),p(i))},getDimensions:function(){return Object.values(f)},getDimension:function(e){return f[e]||{}},addArbitraryDimensions:function(n,i){var r={};!function(n,i){var r=[];n.forEach((function(e){r.push({uri:e.uri,Name:e.label,label:e.label,NLSName:e.symbolNLS})})),e.is(d,"array")&&!d.length&&d.push({Name:"ArbitraryUnit",NLS:i,MKSUnit:"",Units:r})}(n,i),e.is(d,"array")&&(d.forEach((function(e){r[e.Name]=e.NLS})),p(r))},getArbitraryDimensions:function(){return d},addCATNlsFile:function(e){var n,i,r=(n=e.replace(/\n|\r/g,"").split(";"),i={},n.forEach((function(e){var n,r,t;""!==e&&e.indexOf("=")>0&&(r=(n=e.split("="))[0],t=n[1].replace(/"|.png/g,""),i[r]=t)})),i);p(r)},addNls:function(e){h(e)},addNlsJSON:function(e,n=!1){p(e,n)},getNLSValue:function(n,i,t,a){var s,c,l;if(n){if(!e.is(u))return void r.debug(this.name,"Nls Library could not be undefined");l=n,t&&(l=t+"."+l),a&&(l=l+"."+a),(c=u.get(l))!==l?(s=i?u.replace(c,i):c,o.isNLSTestEnabled()&&(s="**NLS_OK**"+s)):s=n}else l="Wrong NLS key";return s||l},addIcons:function(e,n){N(e,n)},addIconsFromCATRsc:function(n,i){!function(n,i){var r=n.replace(/\n|\r/g,"").split(";"),t={};c||(c={}),r.forEach((function(e){var n,r,a;""!==e&&e.indexOf("=")>0&&(r=(n=e.split("="))[0].replace(/(\.Icon\.Normal)$/,""),a=n[1].replace(/"|.png/g,""),t[r]={IconName:a,ModuleName:i})})),c=e.merge(c,t)}(n,i)},getIconURLFromKey:function(n,i,o){var s,u="I_DELQuestionMark",f=a.get3DSpaceUrl()+"common/images/";if(c){if(i&&(n=i+"."+n),o&&(n=n+"."+o),s=c[n]){if(s.IconName?u=s.IconName:e.is(s.parent)&&e.is(c[s.parent])&&(u=e.is(c[s.parent].IconName)?c[s.parent].IconName:u),s.ModuleName)f=t.getWebappsAssetUrl(s.ModuleName,l);else if(e.is(s.sharedIconPath))f=a.get3DSpaceUrl()+s.sharedIconPath;else if(e.is(s.inheritanceChain,"array")&&s.inheritanceChain.length>0)for(n of s.inheritanceChain.length>1?s.inheritanceChain.slice().reverse():s.inheritanceChain)if(s=c[n],e.is(s.IconName)){if(e.is(s.ModuleName)){f=t.getWebappsAssetUrl(s.ModuleName,l),u=s.IconName;break}if(e.is(s.sharedIconPath)){f=a.get3DSpaceUrl()+s.sharedIconPath,u=s.IconName;break}}}else r.debug(this.name,"Icon: %s could not be found",n);return f+u+".png"}r.debug(this.name,"Icon Library is not defined")},getImageURLFromKey:function(e){var n,i="I_DELQuestionMark",o=a.get3DSpaceUrl()+"common/images/";if(c)return(n=c[e])?(n.ImageName&&(i=n.ImageName),n.ModuleName&&(o=t.getWebappsAssetUrl(n.ModuleName,"images/"))):r.debug(this.name,"Image: %s could not be found",e),o+i+".jpg";r.debug(this.name,"Image Library is not defined")},getIconNames:function(){var e,n,i=[];if(c)for(e in c)e&&(n=c[e])&&n.IconName&&i.push(n.IconName);else r.debug(this.name,"Icon Library is not defined");return i},setSharedIconPath:function(n){var i,t;if(e.is(c)&&e.is(n))for(i in t=c[i],c)i&&(t=c[i])&&t.IconName&&(t.sharedIconPath=n[t.IconName]);else r.debug(this.name,"Icon Library or sharedIconPathMap is not defined")},getIconElem:function(n,i){return i=i||"icon",e.createElement("img",{src:this.getIconURLFromKey(n),class:i})},getNLSForUnit:function(n,i){var r,t="";return r=b(n,i),e.is(r)&&e.is(r.NLSName,"string")&&(t=r.NLSName),t},getLabelForUnit:function(n,i){var r,t="";return r=b(n,i),e.is(r)&&e.is(r.label,"string")&&(t=r.label),t},sanitizeHTML:function(n){var i=n,r=document.createElement("div");return e.is(n,"string")&&(r.innerText=n,i=r.getHTML()),i},getLanguageForCountry:function(n){return e.is(n,"string")&&Object.prototype.hasOwnProperty.call(g,n.toUpperCase())?g[n.toUpperCase()]:"en"},getCountryCodesForLanguage:function(n){var i=[];if(e.is(n,"string"))for(const[e,r]of Object.entries(g))n.toLowerCase()===r&&i.push(e);return i}})}));