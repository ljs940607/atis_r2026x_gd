define("DS/Tweakers/typings/types",[],(()=>{}));var __extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerUtils",["require","exports","UWA/Core","DS/Controls/Popup","DS/Controls/Button","DS/Controls/Abstract","DS/Core/PointerEvents","DS/Windows/Dialog","DS/Utilities/KeyboardUtils","DS/Utilities/Dom","DS/Utilities/Utils","DS/Utilities/WUXUWAUtils","DS/Core/WebUXComponents"],(function(e,t,i,n,o,a,r,s,l,u,p,d,c){"use strict";var h=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return d.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{value:{defaultValue:void 0,type:"string",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype.init=function(t,i,n){this._tweaker=t,this._views=i,this._options=n,e.prototype.init.call(this,t,i,n)},t.prototype.buildView=function(){var e=this,t=this.elements.container;if(t.addClassName("wux-tweakers-aggregate-view-container"),this._views.inlined&&(t.inlinedView=this._views.inlined,this._views.inlined.classList.add("wux-tweakers-aggregate-view-inline"),this._views.inlined.classList.add("wux-tweakers-string-label"),t.appendChild(this._views.inlined)),this._options.hasButton?(this.elements.openExtendedViewButton=new o({label:"...",clickMode:0}),this.elements.openExtendedViewButton.getContent().addClassName("wux-tweakers-aggregate-view-open"),this.elements.openExtendedViewButton.inject(t)):t.setAttribute("noButton",""),this._views.extended||this._views.getExtended){var i=void 0,a=function(){if(!e._tweaker.disabled&&e.elements&&e.elements.container){var a,d,c,h=e._tweaker.augmentedDisplay;e.elements.extendedViewContainer&&i!==h&&(e.elements.extendedViewContainer.destroy(),e.elements.extendedViewContainer=null),i=h,e.elements.extendedViewContainer&&!1!==e.elements.extendedViewContainer.visibleFlag?e.elements.extendedViewContainer.visibleFlag=!1:("dialog"===h?(a=e,d=e._tweaker,c=e._views,a.elements&&(a.elements.extendedViewContainer||(a.elements.extendedViewContainer=function(e,t,i){var n=void 0;e.elements.extendedView=i.extended?i.extended:i.getExtended();var a=function(e){e.stopPropagation(),n.visibleFlag=!1,t.onHide({cancelFlag:!0})},r=function(e){e.stopPropagation(),n.visibleFlag=!1,t.onHide()};n=new s({title:t.dialogOptions.title?t.dialogOptions.title:t.name,icon:t.dialogOptions.icon,content:e.elements.extendedView,resizableFlag:!0,height:t.dialogOptions.height?t.dialogOptions.height:240,width:t.dialogOptions.width?t.dialogOptions.width:200,identifier:t.dialogOptions.identifier?t.dialogOptions.identifier:"",buttons:{Ok:new o({onClick:r}),Cancel:new o({onClick:a})},autoCloseFlag:!1,touchMode:t.touchMode});var l=t.name?"wux-tweakers-aggregate-view-dialog-"+t.name.toLowerCase():"";n.getContent().addClassName("wux-tweakers-aggregate-view-dialog "+l),u.addEventOnElement(n,n,"close",a);var d=u.findFirstImmersiveFrame.call(this,t.getContent());if(d)n.immersiveFrame=d;else{var c=p.getDocumentOwner(t);c&&c.body&&(n.inject(c.body),n.getContent().setStyle("z-index",1e3))}var h=u.findContainingWindow.call(this,t.getContent());return h&&h.modalFlag&&(t.dialogOptions.modalFlag=!0),n.modalFlag=t.dialogOptions.modalFlag,n.position={at:"center center",my:"center center"},n}(a,d,c)),a.elements.extendedViewContainer.visibleFlag=!0)):"popup"===h&&function(e,t,i,o,a){e.elements.extendedViewContainer||(e.elements.extendedViewContainer=function(e,t,i,o,a){var s=i.name?"wux-tweakers-aggregate-view-popup-"+i.name.toLowerCase():"",d=new n({target:t,position:"bottom",offset:{x:0,y:a.overlapContainer?-t.offsetHeight:0},alignment:a.popupAlignment||"far",className:"wux-controls-popup wux-tweakers-aggregate-view-popup "+s,touchMode:i.touchMode,constraint:"screen"}),c=function(t){if(d.visibleFlag&&!d.isElementInside(t.target)&&(!e.elements.openExtendedViewButton||!e.elements.openExtendedViewButton.getContent().contains(t.target))){var i=p.getDocumentOwner(d);d.hide(),u.removeEventOnElement(d,i.body,r.POINTERDOWN,c)}},h=function(e){var t=p.getDocumentWindow(d);e.target===t&&(d.hide(),u.removeEventOnElement(d,t,"blur",h,!0))};u.addEventOnElement(d,d,"show",(function(e){e.stopPropagation();var t=e.target;if(t&&t.dsModel===d){var i=p.getDocumentOwner(t);u.addEventOnElement(d,i.body,r.POINTERDOWN,c);var n=p.getDocumentWindow(t);u.addEventOnElement(d,n,"blur",h,!0)}}));var y=!1;u.addEventOnElement(d,d,"hide",(function(e){e.stopPropagation();var t=e.target;if(t&&t.dsModel===d){var n=p.getDocumentWindow(d);u.removeEventOnElement(d,n,"blur",h,!0),i.onHide({cancelFlag:y})}})),u.addEventOnElement(d,d,"keydown",(function(t){t.altKey||t.shiftKey||t.ctrlKey||t.keyCode!==l.ESCAPE&&t.keyCode!==l.ENTER||(t.stopPropagation(),e.elements.openExtendedViewButton._preventButtonClickListener=t.keyCode===l.ENTER,y=t.keyCode===l.ESCAPE,d.hide(),y=!1,o.viewModule.focus&&o.viewModule.focus({preventScroll:!0}))})),e.elements.extendedView=o.extended?o.extended:o.getExtended(),d.setBody(e.elements.extendedView);var w=function(t){"keydown"===t.type&&t.keyCode===l.TAB&&("function"==typeof e.elements.extendedView._resetFocus&&e.elements.extendedView._resetFocus(),e.elements.extendedViewContainer.visibleFlag=!1,i.focus({preventScroll:!0}),t.stopPropagation(),t.preventDefault())};return u.addEventOnElement(d,d,"keydown",w),d}(e,t,i,o,a));var s=176;a&&a.getExtendedViewHeight&&(s=a.getExtendedViewHeight());e.elements.extendedViewContainer.preferredHeight=s,!a.ignoreContainerWidth&&a.adaptWidthToContainer?e.elements.extendedViewContainer.getContent().setStyle("width",t.offsetWidth+"px"):a.ignoreContainerWidth||e.elements.extendedViewContainer.getContent().setStyle("min-width",t.offsetWidth+"px");e.elements.extendedViewContainer.visibleFlag=!0,a&&"function"==typeof a.onPopupDisplay&&a.onPopupDisplay.call()}(e,t,e._tweaker,e._views,e._options),e._tweaker.onShow(),e.elements.extendedView&&e.elements.extendedView.focus&&e.elements.extendedView.focus({preventScroll:!0}))}},d=this;this._options.hasButton&&(this.elements.openExtendedViewButton.onClick=function(e){d.elements.openExtendedViewButton._preventButtonClickListener?d.elements.openExtendedViewButton._preventButtonClickListener=!1:d.disabled||a()},this.elements.openExtendedViewButton.addEventListener("keydown",(function(e){e.keyCode===l.ESCAPE&&d.elements.extendedViewContainer&&!0===d.elements.extendedViewContainer.visibleFlag&&a()}))),this._options.displayExtendedOnInlinedClicked&&t.inlinedView&&u.addEventOnElement(this,t.inlinedView,r.POINTERHIT,a),this._options.displayExtendedOnKeyDown&&t.addEventListener("keydown",(function(e){!l.isAlphaNumeric(e.keyCode)||e.ctrlKey||e.shiftKey||e.altKey||d.disabled||a()})),this._options.immediateOpenFlag&&setTimeout((function(){a()}),1)}delete this.setPropertyFromUIInteraction},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("value")&&this._applyValue()},t.prototype._applyValue=function(e,t){this._tweaker.value=this.value},t.prototype._applyDisabled=function(t){e.prototype._applyDisabled.call(this,t),this.elements.openExtendedViewButton&&(this.elements.openExtendedViewButton.disabled=this.disabled)},t.prototype._applyTouchMode=function(t){e.prototype._applyTouchMode.call(this,t),this.elements.openExtendedViewButton&&(this.elements.openExtendedViewButton.touchMode=this.touchMode),this.elements.extendedViewContainer&&(this.elements.extendedViewContainer.touchMode=this.touchMode)},t}(a);c.addClass(h,"tweakerAggregateView");var y=[];return function(){function e(){}return e.addTypeRepresentationDirectory=function(e){y.push(e)},e.removeTypeRepresentationDirectory=function(e){var t=y.indexOf(e);-1!==t&&y.splice(t,1)},e.getTypePath=function(e){for(var t=!1,i=0;!t&&i<y.length;){if(y&&y[i].getRegisteredTypeRepresentation(e)){t=!0;var n=y[i].getRegisteredTemplate(y[i].getRegisteredTypeRepresentation(e).stdTemplate),o=y[i].getRegisteredTypeRepresentation(e).semantics;return{path:n.path,options:o}}if(y&&y[i].getRegisteredEnumeration(e))return{path:"DS/Tweakers/TweakerEnum",options:y[i].getRegisteredEnumeration(e)};i++}},e._isFromType=function(e,t){var i=this.getTypePath(e);if(!i)return t;var n=!0;switch(i.path){case"DS/Tweakers/TweakerBoolean":n=null!==/^(true|false|\d+(.\d+)?)$/i.exec(t);break;case"DS/Tweakers/TweakerString":case"DS/Tweakers/TweakerColor":case"DS/Tweakers/TweakerDate":n="string"==typeof t;break;case"DS/Tweakers/TweakerNumber":n=i.options&&0===i.options.decimals?parseInt(t,10)===t:parseFloat(t)===t;break;case"DS/Tweakers/TweakerArray":n="undefined"!==t.length;break;default:n=!0}return n},e._getValueFromString=function(e,t,i){var n,o=this.getTypePath(e);if(!o)return t;switch(o.path){case"DS/Tweakers/TweakerBoolean":n=null!==/(true|\d*[1-9]\d*(\.\d+)?|0\.\d*[1-9]\d*)/i.exec(t);break;case"DS/Tweakers/TweakerString":case"DS/Tweakers/TweakerColor":case"DS/Tweakers/TweakerDate":n=t?t.toString():"";break;case"DS/Tweakers/TweakerNumber":if(""===t){n=0;break}n=o.options&&0===o.options.decimals?parseInt(t):parseFloat(t),isNaN(n)&&(n=void 0);break;case"DS/Tweakers/TweakerArray":case"DS/Tweakers/TweakerObject":try{n=JSON.parse(t)}catch(e){n=void 0}break;case"DS/Tweakers/TweakerEnum":if(""===t){n=void 0;break}if(!o.options)return;var a=o.options;if("function"==typeof a)return t;for(var r in a)if(a[r].toString()==t)return a[r];if(!0===i)for(var r in a)if(r.toString()==t)return a[r];break;default:n=t}return n},e._getStringRepresentationFromValue=function(e,t){var i,n=this.getTypePath(e);if(!n)return t;switch(n.path){case"DS/Tweakers/TweakerEnum":if(""===t){i=void 0;break}if(!n.options)return;var o=n.options;if("function"==typeof o)return t;for(var a in o)if(o[a]==t)return a;break;default:i=t}return i},e._buildTweakerAggregateView=function(e,t,n){var o=i.extend({hasButton:!0,overlapContainer:!1,displayExtendedOnInlinedClicked:!0,displayExtendedOnKeyDown:!0,getExtendedViewHeight:null,immediateOpenFlag:!1,adaptWidthToContainer:!0},n);if(e&&t&&(t.inlined||o.hasButton&&(t.extended||t.getExtended)))return new h(e,t,o)},e._buildInlineEditor=function(t,n,a,r){var s=i.createElement("div",{class:"wux-tweakers-multirep wux-tweakers-multirep-inline-editor"});if(n)if(s.inlinedView=n,n._view){var p=n._view;p.getContent().addClassName("wux-tweakers-multirep-tweakerstring"),p.inject(s)}else n.addClassName("wux-tweakers-multirep-tweakerstring"),s.appendChild(n);r.hasNoButton||(s.editBtn=new o({label:"..."}),s.editBtn.getContent().addClassName("wux-tweakers-multirep-button"),s.editBtn.inject(s)),s.embeddedContainer=void 0;var d=void 0;if(a){var c=function(i){if("A"!==i.target.tagName&&("keydown"!==i.type||l.isAlphaNumeric(i.keyCode)&&!i.ctrlKey&&!i.shiftKey&&!i.altKey)){if(i.stopPropagation(),d&&d!==t.augmentedDisplay&&s.embeddedContainer.destroy(),d=t.augmentedDisplay,"dialog"===t.augmentedDisplay){if(s.embeddedContainer||(s.embeddedContainer=e._buildDialog(s,t,a,r),t.onShow()),!s.embeddedContainer)return;!1===s.embeddedContainer.visibleFlag&&(s.embeddedContainer.visibleFlag=!0,t.onShow())}else if("popup"===t.augmentedDisplay){if(!s.embeddedContainer){s.embeddedContainer=e._buildPopup(s,t,n,a,r);a._view&&u.addEventOnElement(t,a._view.getContent(),"keydown",(function(e){"keydown"===e.type&&e.keyCode===l.TAB&&(a._view&&a._view._resetFocus(),s.embeddedContainer.visibleFlag=!1,t.focus({preventScroll:!0}),e.stopPropagation(),e.preventDefault())}))}if(!s.embeddedContainer)return;s.embeddedContainer.preferredHeight=176,s.embeddedContainer.getContent().setStyle("width",s.offsetWidth+"px"),s.embeddedContainer.toggle()}("keydown"!==i.type||i.keyCode!==l.ENTER&&i.keyCode!==l.SPACE)&&a._view&&a._view.focus&&a._view.focus({preventScroll:!0})}};u.addEventOnElement(t,s,"click",c),r.hasNoButton||(u.addEventOnElement(t,s.editBtn,"buttonclick",(function(e){e.stopPropagation()})),u.addEventOnElement(t,s.editBtn,"click",c),u.addEventOnElement(t,s.editBtn,"keydown",c),u.addEventOnElement(t,s.editBtn,"keyup",(function(e){"keyup"!==e.type||e.keyCode!==l.ENTER&&e.keyCode!==l.SPACE||a._view&&a._view.focus&&a._view.focus({preventScroll:!0})})))}return s},e._buildPopup=function(e,t,i,o,a){if(o){var s=t.name?t.name.toLowerCase().replace("tweaker",""):"multi-rep",d=a.hasNoButton?i:e.editBtn,c=new n({target:d,position:"bottom",offset:{x:0,y:a.offset?-i.offsetHeight:0},alignment:"far",className:"wux-controls-popup wux-controls-popup-tweaker-"+s,touchMode:t.touchMode,constraint:"screen"});c.preferredHeight=176,c.getContent().setStyle("width",e.offsetWidth+"px"),c._updateView();var h=function(i){if(c.visibleFlag&&!c.isElementInside(i.target)&&(!e.editBtn||!e.editBtn.getContent().contains(i.target))){c.hide();var n=p.getDocumentOwner(c);u.removeEventOnElement(t,n.body,r.POINTERDOWN,h)}},y=!1;u.addEventOnElement(t,c,"show",(function(e){e.stopPropagation();var i=p.getDocumentOwner(c);u.addEventOnElement(t,i.body,r.POINTERDOWN,h),t.onShow()})),u.addEventOnElement(t,c,"hide",(function(e){e.stopPropagation(),t.onHide({cancelFlag:y})})),u.addEventOnElement(t,c,"keydown",(function(t){t.altKey||t.shiftKey||t.ctrlKey||(t.keyCode===l.ESCAPE?(y=!0,c.hide(),y=!1,e.editBtn&&e.editBtn.focus&&e.editBtn.focus({preventScroll:!0})):t.keyCode===l.ENTER&&(c.hide(),e.editBtn&&e.editBtn.focus&&e.editBtn.focus({preventScroll:!0})))}));var w=o._view?o._view:o;return c.setBody(w),c}},e._buildDialog=function(e,t,i,n){var a=void 0,r=function(e){e.stopPropagation(),a.visibleFlag=!1,t.onHide({cancelFlag:!0})};a=new s({title:t.dialogOptions.title?t.dialogOptions.title:t.name,icon:t.dialogOptions.icon,content:i,resizableFlag:!0,height:t.dialogOptions.height?t.dialogOptions.height:240,width:t.dialogOptions.width?t.dialogOptions.width:200,identifier:t.dialogOptions.identifier?t.dialogOptions.identifier:"",buttons:{Ok:new o({onClick:function(e){e.stopPropagation(),a.visibleFlag=!1;document.createEvent("Event");t.onHide()}}),Cancel:new o({onClick:r})},autoCloseFlag:!1,touchMode:t.touchMode});var l=t.name?t.name.toLowerCase().replace("tweaker",""):"multi-rep";a.getContent().addClassName("wux-tweakers-multirep-"+l),u.addEventOnElement(t,a,"close",r);var d=u.findFirstImmersiveFrame.call(this,t.getContent());if(d)a.immersiveFrame=d;else{var c=p.getDocumentOwner(t);c&&c.body&&(a.inject(c.body),a.getContent().setStyle("z-index",1e3))}var h=u.findContainingWindow.call(this,t.getContent());return h&&h.modalFlag&&(t.dialogOptions.modalFlag=!0),a.modalFlag=t.dialogOptions.modalFlag,a.position={at:"center center",my:"center center"},a},e.enableLiveChangeOnTreeListView=function(e){e.getManager()._getParent().elements.formContainer.addEvent("liveChange",e.getManager()._onCellChange.bind(e.getManager()))},e._setModelViewForDataColumnOneColumnCase=function(e,t,n,o,a){var r=t.cellView.getContent(),s=t.nodeModel.options,l=s.grid,u=void 0!==l.data?l.data:void 0!==l.defaultValue?l.defaultValue:void 0,p=function(){var i="",n=t.nodeModel.options.grid;return""!==e.valueType&&void 0!==e.valueType?(i=e.valueType+"."+(n.path?n.path:n.name),void 0!==n.type&&""!==n.type?i+="#"+n.type:void 0!==n.defaultType&&""!==n.defaultType&&(i+="#"+n.defaultType)):i=n.data&&"string"==typeof n.data&&0===n.data.indexOf("[")?"array":n.type||n.typeRep,i}(),d=void 0;(void 0!==l.readOnly||e.readOnly&&e.permanentReadOnly)&&(d=l.readOnly||e.readOnly&&e.permanentReadOnly);var c={typePath:p,readOnly:d,disabled:s.disabled,touchMode:l.touchMode,required:l.required,label:l.label?l.label:void 0,icon:l.semantics&&l.semantics.icon?l.semantics.icon:void 0,context:"inlinedTemplate",onViewCreated:function(e){void 0!==e&&(r.setContent(e),n&&(e.executionContext=n),r&&(e.readOnly||r.setAttribute("draggable",!1)),o&&o.call())},onFailure:function(t){l._buildFailure=!0,"function"==typeof e.onFailure&&e.onFailure(t),a&&a.call()}};if("oneColumn"===e.displayMode){var h,y=void 0,w=void 0,_=void 0,f=void 0;h=i.createElement("div"),(_=i.createElement("div",{class:"label"})).inject(h),(y=i.createElement("div",{class:"label",styles:{width:"50%",display:"inline-block","text-align":"left"}})).inject(_),(w=i.createElement("div",{class:"label",styles:{width:"50%",display:"inline-block","text-align":"right"}})).inject(_),(f=i.createElement("div",{class:"tweaker"})).inject(h),r.setContent(h);var v=t.nodeModel.options.grid;y.innerHTML=v.name,w.innerHTML="",e.typeDisplayFlag&&!e.authoringFlag&&(w.innerHTML=e._getTweakerTypeFromCellInfos(t)),r=f}return{generateViewOptions:c,data:u}},e._getOrCreateFakeInputForFindHighlight=function(e,t,n){var o=e;if(o&&void 0===o.highlightModel)return t._fakeInputForhighlight&&(t._fakeInputForhighlight.style.display="none"),null;if(t._fakeInputForhighlight)return t._fakeInputForhighlight.textContent=o.value,t._fakeInputForhighlight.style.display="",t._fakeInputForhighlight;t._fakeInputForhighlight=new i.Element("span",{class:"wux-tweakers-fake-input-for-highlight",contenteditable:!0,tabindex:0}).inject(t.getContent()),t._fakeInputForhighlight.textContent=o.value;var a=n,r=t._fakeInputForhighlight;o.value;return u.addEventOnElement(e,t._fakeInputForhighlight,"click",(function(e){r.style.display="none"}),!0),u.addEventOnElement(e,n,"focus",(function(e){r.style.display="none"})),u.addEventOnElement(e,n,"blur",(function(e){o&&o.value===a.value&&o.highlightModel&&(r.style.display="")})),t._fakeInputForhighlight},e}()})),define("DS/Tweakers/ModelProxy",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],(function(e,t){"use strict";function i(e){var t={};return this.forEach((function(i){var n=i[e];t[n]?t[n].push(i):t[n]=[i]})),t}function n(e){if(void 0!==e.criteria)for(var t in this)this[t]=i.call(this[t],e.criteria),void 0!==e.child&&void 0!==this[t]&&n.call(this[t],e.child)}function o(e,i){for(var n in e){var a=e[n],r=this;Array.isArray(a)?a.forEach((function(e,n,o){r.addChild(new t({label:e[i],grid:e}))})):("none"!==n&&(r=new t({label:n}),this.addChild(r)),o.call(r,a,i))}}function a(e,t){var i=this;for(var n in e){var o=e[n];if("none"===n)o.forEach((function(e,n,o){i.push({label:e[t]})}));else{var r=[],s={label:n};Array.isArray(o)?o.forEach((function(e,i,n){r.push({label:e[t]})})):a.call(r,o,t),s.children=r,i.push(s)}}}return{selectFilter:function(e){return void 0===e.pattern||""===e.pattern||void 0===e.criteria?this:this.filter((function(e){return void 0!==e[this.criteria]&&e[this.criteria].indexOf(this.pattern)>-1}),e)},fillFilter:function(e){return this.map((function(e,t,i){var n=e;for(var o in this)void 0===n[o]&&(n[o]=this[o]);return n}),e)},hierarchyFilter:function(e){var t=i.call(this,e.criteria);return void 0!==e.child&&void 0!==t&&n.call(t,e.child),t},modelToTreeDocument:function(e,i,n){function a(e,i,n){e.forEach((function(e,o,r){var s=new t({label:e[i],grid:e});n?n.addChild(s):n.addRoot(s),e.properties&&a(e.properties,i,s)}))}switch(i){case"flat":a(e,n,this);break;case"hierarchical":for(var r in e){var s=this;"undefined"!==r&&(s=new t({label:r}));var l=e[r];Array.isArray(l)?a(l,n,s):o.call(s,l,n),s!==this&&this.addChild(s)}}},modelToBreadCrumbModel:function(e,t){a.call(this,e,t)}}}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerBase",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Core/WebUXComponents","DS/Controls/Abstract","./typings/types","DS/Windows/typings/types"],(function(e,t,i,n,o,a,r){"use strict";var s="wux-tweakers-emphasize-",l="wux-tweakers-backgroundColor-";function u(e){var t=this;this._currentPossibleValue=void 0;var n=this.possibleValues;if(!this.allowFreeInputFlag&&n&&Array.isArray(n)){if(this.allowMultipleValuesFlag&&Array.isArray(e)){var o=e.filter((function(e){return n.some((function(i){var n=i,o=e;return i instanceof Object&&i.hasOwnProperty("value")&&(n=n.value),e instanceof Object&&e.hasOwnProperty("value")&&(o=e.value),0===t.compare(t._upgradeValue(n),o)}))}));return o&&o.length!==e.length?{isValidValue:!0,newValue:o}:{isValidValue:!0}}if(n.length>0){for(var a=void 0,r=0;r<n.length;r++){var s=n[r];if("object"==typeof s){if(s.hasOwnProperty("value")){var l="object"===i.typeOf(e)&&e.hasOwnProperty("value")?e.value:e;if(0===this.compare(this._upgradeValue(s.value),l)){a=s;break}}else if(void 0!==s.label&&null!==s.label){l="object"===i.typeOf(e)?e.label:e;if(0===this.compare(this._upgradeValue(s.label),l)){a=s;break}}}else if(0===this.compare(this._upgradeValue(s),e)){a=s;break}}this._currentPossibleValue=a;var u=this.allowResetToUndefinedByUIFlag||!this._isCurrentlyCalledFromUIInteraction()||void 0===this.value;if((void 0===e||""===e)&&u)return{isValidValue:!0};if(void 0===a)return this._currentPossibleValue=n[0],"object"==typeof n[0]?void 0!==n[0].value?{isValidValue:!0,newValue:n[0].value}:n[0].label?{isValidValue:!0,newValue:n[0].label}:{isValidValue:!0,newValue:n[0]}:{isValidValue:!0,newValue:n[0]}}}return{isValidValue:!0}}var p=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.blackBoxFlag=!0,e}return __extends(r,t),Object.defineProperty(r,"publishedProperties",{get:function(){return{value:{defaultValue:void 0,type:"object",advancedSetter:!0},icon:{defaultValue:void 0,type:"object"},highlightModel:{defaultValue:void 0,type:"object"},minValue:{defaultValue:void 0,type:"object"},maxValue:{defaultValue:void 0,type:"object"},possibleValues:{defaultValue:void 0,type:"object"},allowFreeInputFlag:{defaultValue:!1,type:"boolean"},allowMultipleValuesFlag:{defaultValue:!1,type:"boolean"},valueType:{defaultValue:"",type:"string"},referenceValue:{defaultValue:void 0,type:"object"},showReferenceValueFlag:{defaultValue:!1,type:"boolean"},readOnly:{defaultValue:!1,type:"boolean"},displayStyle:{defaultValue:void 0,type:"string"},escapeHTML:{defaultValue:!1,type:"boolean"},augmentedDisplay:{defaultValue:"popup",type:"string"},editorTitle:{defaultValue:"",type:"string"},dialogOptions:{defaultValue:{width:200,height:240,modalFlag:!1,title:void 0,icon:void 0,identifier:void 0},type:"object"},allowUnsafeHTMLContent:{defaultValue:!1,type:"boolean"},useWrappedView:{defaultValue:!1,type:"boolean"},handleEditionCancel:{defaultValue:!0,type:"boolean"},placeholder:{defaultValue:void 0,type:"string"},allowResetToUndefinedByUIFlag:{defaultValue:!1,type:"boolean"},executionContext:{defaultValue:void 0,type:"object",noNeedToApplyFlag:!0},alignment:{defaultValue:void 0,type:"string"},numeric:{defaultValue:!1,type:"boolean"},validState:{defaultValue:!0,type:"boolean",readOnly:!0,category:"Behavior"},getDisplayedInformation:{defaultValue:void 0,type:"function",category:"Behavior"},emphasize:{defaultValue:void 0,type:"string"},backgroundColor:{defaultValue:void 0,type:"string"},viewOptions:{defaultValue:void 0,type:"object"}}},enumerable:!1,configurable:!0}),r.prototype._preBuildView=function(e){this.elements.container?this.elements.container.addClassName("wux-tweakers"):this.elements.container=new i.Element("div",{class:"wux-tweakers"}),this.elements.container.dsModel=this,this._iconClassName="wux-tweakers-icon",this._eventsDisabledCounter=0,this._currentValueLabel=null,this._currentValueIcon=null,this.disableEvents()},r.prototype._postBuildView=function(){void 0===this.referenceValue&&(this.referenceValue=i.clone(this.value,!1)),this._applyDisabled(),this.enableEvents()},r.prototype.compare=function(e,t){return n.compare(e,t)},r.prototype.getStringFromValue=function(e){var t;if(null==e)return"";if(this.allowMultipleValuesFlag&&Array.isArray(e)){for(var i="",n=0;n<e.length;n++)n>0&&(i+=" "+((null===(t=this.viewOptions)||void 0===t?void 0:t.multipleValuesSeparator)||"|")+" "),i+=this.getStringFromValue(e[n]);return i}if(this.possibleValues){var o=this._getEntryInPossibleValues(e);return o instanceof Object&&o.hasOwnProperty("label")?o.label.toString():e.toString()}return e.toString()},r.prototype.isValueDisplayedAsString=function(e){return this.baseViewModule.prototype.isValueDisplayedAsString(e)},r.computeStringFromValue=function(e,t,i){var n;if(null==e)return"";var o=t,a="";if(o.allowMultipleValuesFlag&&Array.isArray(e)){for(var r=" "+((null===(n=o.viewOptions)||void 0===n?void 0:n.multipleValuesSeparator)||"|")+" ",s="",l=0,u=e.length;l<u;++l)l&&(s+=r),s+=this.computeStringFromValue(e[l],t,i)||"";return s}return"export"===(null==i?void 0:i.context)&&(a="object"==typeof e?e instanceof Date?e.toLocaleDateString():JSON.stringify(e):"string"==typeof e?e:e.toString()),a},r.prototype.computeContentSize=function(){var e;if(this.elements._viewModule&&this.elements._viewModule.computeTweakerContentLength)e=this.elements._viewModule.computeTweakerContentLength();else{var t=this.readOnly?this.getContent().innerText.length>0?this.getContent().innerText:this.getContent().textContent:this.value,i=this.getEditedState();e=o.computeStringWidth(t,this.getFontSize(),this.getFontFamily(),i,i)}this.readOnly&&(e+=2*this.getTweakerPadding(),this.getEditedState()&&(e+=5));return Math.ceil(e)},r.computeHeight=function(e,t,i){return e.touchMode?38:24},r.prototype.computeContentDimensions=function(){return{width:this.computeContentSize(),height:this.computeContentHeight()}},r.prototype.computeContentHeight=function(){var e=void 0;return this.elements&&this.elements._viewModule&&this.elements._viewModule._computeTweakerContentHeight&&(e=Math.ceil(this.elements._viewModule._computeTweakerContentHeight())),e},r.prototype.usesTextWrapping=function(){return this.elements&&this.elements._viewModule&&this.elements._viewModule.usesTextWrapping()},r.prototype.getFontSize=function(){var e=window.getComputedStyle(this.getContent(),null).getPropertyValue("font-size");return parseFloat(e)},r.prototype.getFontFamily=function(){return"Arial"},r.prototype.getTweakerPadding=function(){return this._getCurrentTouchMode()?14:7},r.prototype._preEditValue=function(e,t){var i=this._upgradeValue(t);if(this.possibleValues){var o=u.call(this,i);if(!o.isValidValue)return!1;if(o.newValue)return{validValue:o.newValue}}else{this._currentPossibleValue=void 0;var a=this.minValue;if(a)if(i&&Array.isArray(i)){for(var r=[],s=!1,l=0;l<i.length;++l)-1===this.compare(i[l],a)?(r.push(a),s=!0):r.push(i[l]);s&&(i=r)}else if(-1===this.compare(i,a))return{validValue:a};var p=this.maxValue;if(p)if(i&&Array.isArray(i)){for(r=[],s=!1,l=0;l<i.length;++l)1===this.compare(i[l],p)?(r.push(p),s=!0):r.push(i[l]);s&&(i=r)}else if(1===this.compare(i,p))return{validValue:p}}return 0===n.compare(i,t)||{validValue:i}},r.prototype._applyValue=function(e,t){this._updateEditedState(),this._updateValidState(),this.elements._viewModule?this.isDirty("readOnly")||this.isDirty("displayStyle")||this.elements._viewModule.setValue(this._properties.value.value,e):void 0!==this.elements.internalView&&(this.readOnly&&(this._properties.value.value=this.value&&this.escapeHTML?i.String.escapeHTML(this.value):this.value),this.elements.internalView.value=this.value),this._updateTooltipFromPossibleValues(),2===this._preEditState?(this._liveChangeOccurred=!0,this.getEventsAllowedState()&&this.fire("liveChange",{value:this.value})):this.onChange()},r.prototype._applyDisabled=function(e){if(t.prototype._applyDisabled.call(this,e),this.elements._viewModule&&this.elements._viewModule._view)if(Array.isArray(this.elements._viewModule._view))for(var i=this.elements._viewModule._view.length-1;i>=0;i--)this.elements._viewModule._view[i].disabled=this.disabled;else this.elements._viewModule._view.disabled=this.disabled;this.elements._viewModule&&this.elements._viewModule.setDisabled&&this.elements._viewModule.setDisabled(this.disabled)},r.prototype._applyIcon=function(e){this.possibleValues||(this._currentValueIcon=this.icon),this.elements._viewModule&&this.elements._viewModule.setIcon&&this.elements._viewModule.setIcon(this.icon)},r.prototype._updateIconFromPossibleValues=function(){"object"==typeof this._currentPossibleValue&&(this.readOnly&&void 0!==this._currentPossibleValue.icon_readOnly?this._currentValueIcon=this._currentPossibleValue.icon_readOnly:this._currentValueIcon=this._currentPossibleValue.icon)},r.prototype._applyMinValue=function(e){this._properties.minValue.value=this._upgradeMinMaxValue(this._properties.minValue.value),this.maxValue&&-1===this.compare(this.maxValue,this.minValue)&&(this.maxValue=this.minValue);var t=this.minValue;if(t){var i=this.value;if(Array.isArray(i)){for(var n=[],o=!1,a=0;a<i.length;++a)-1===this.compare(i[a],t)?(n.push(t),o=!0):n.push(i[a]);o&&(this.value=n)}else-1===this.compare(i,t)&&(this.value=t)}this.elements._viewModule?this.elements._viewModule.setMinValue(t):void 0!==this.elements.internalView&&(this.elements.internalView.minValue=t)},r.prototype._applyMaxValue=function(e){this._properties.maxValue.value=this._upgradeMinMaxValue(this._properties.maxValue.value),this.minValue&&1===this.compare(this.minValue,this.maxValue)&&(this.minValue=this.maxValue);var t=this.maxValue;if(t){var i=this.value;if(Array.isArray(i)){for(var n=[],o=!1,a=0;a<i.length;++a)1===this.compare(i[a],t)?(n.push(t),o=!0):n.push(i[a]);o&&(this.value=n)}else 1===this.compare(i,t)&&(this.value=t)}this.elements._viewModule?this.elements._viewModule.setMaxValue(t):void 0!==this.elements.internalView&&(this.elements.internalView.maxValue=t)},r.prototype._applyReferenceValue=function(e){this._properties.referenceValue.value=this._upgradeValue(this._properties.referenceValue.value),this._updateEditedState()},r.prototype._applyShowReferenceValueFlag=function(e){this._updateEditedState()},r.prototype._applyReadOnly=function(e){this._updateIconFromPossibleValues(),!this.elements._viewModule&&this.elements.internalView||void 0===e?void 0!==this.elements.internalView&&(this.elements.internalView.disabled=this.readOnly):this.isDirty("displayStyle")||this._applyDisplayStyle()},r.prototype._applyTouchMode=function(e){t.prototype._applyTouchMode.call(this,e);var i=this._getCurrentTouchMode();this.elements._viewModule?this.elements._viewModule.setTouchMode(i):void 0!==this.elements.internalView&&(this.elements.internalView.touchMode=i)},r.prototype._applyEmphasize=function(e){this.elements._viewModule&&this.elements._viewModule.setEmphasize&&this.elements._viewModule.setEmphasize(this.emphasize,e)},r.prototype._applyBackgroundColor=function(e){this.elements._viewModule&&this.elements._viewModule.setBackgroundColor&&this.elements._viewModule.setBackgroundColor(this.backgroundColor,e)},r.prototype._applyViewOptions=function(e){this.elements._viewModule&&this.elements._viewModule.setViewOptions(this.viewOptions,e)},r.prototype._applyAllowUnsafeHTMLContent=function(e){this.elements._viewModule&&this.elements._viewModule.setAllowUnsafeHTMLContent&&this.elements._viewModule.setAllowUnsafeHTMLContent(this.allowUnsafeHTMLContent,e)},r.prototype._applyUseWrappedView=function(e){void 0===this.useWrappedView||!1===this.useWrappedView&&void 0===e||this.isDirty("displayStyle")||this._applyDisplayStyle()},r.prototype._applyDisplayStyle=function(e){this.elements.container&&(this._createViewModule(),this._properties.possibleValues.dirty=!1)},r.prototype._createViewModule=function(){this._destroyViewModule(),this._importingViewmodule=!1;var t=this._resolveViewModuleToApply(this.displayStyle);if(t&&t.id&&t.definition){var i=function(e,t){this.elements._viewModule=new e(this,t),this._updateTooltipFromPossibleValues(),this.elements._viewModule.inject(this.elements.container),this.elements.internalView=this.elements._viewModule._view?this.elements._viewModule._view:this.elements.container,this._isFocused()&&(this.elements._viewModule&&this.elements._viewModule.focus?this.elements._viewModule.focus({preventScroll:!0}):this.elements.internalView&&this.elements.internalView.focus&&this.elements.internalView.focus({preventScroll:!0}))};if(t.definition.classObject)i.call(this,t.definition.classObject,t.definition.options);else if(t.definition.classPath||t.definition.filePath&&t.definition.key){var n=t.definition.classPath,o=t.definition.classPath||t.definition.filePath,a=o.split("/");if(a&&3===a.length){var r=a[0]+"/"+a[1]+"/"+a[1];this._importingViewmodule=!0;var s=this;new Promise((function(t,i){e([r],t,i)})).then((function(){new Promise((function(t,i){e([o],t,i)})).then((function(e){t.definition.classObject=n?e:e[t.definition.key],s._importingViewmodule&&(i.call(s,t.definition.classObject,t.definition.options),s.fire("viewBuilt"),s._importingViewmodule=!1)}))}))}else window.console.warn("Invalid path : "+o)}}},r.prototype._isViewBuilt=function(){return!0!==this._importingViewmodule},r.prototype._destroyViewModule=function(){if(this.elements._viewModule){this._popupOpenedState?this.onHide():this.onPostEdit();var e=this.elements._viewModule;this.elements._viewModule=void 0,e.destroy()}},r.prototype.cleanContent=function(){this._importingViewmodule=!1},r.prototype._applyHighlightModel=function(e){this.elements._viewModule&&this.elements._viewModule.setHighlightModel&&this.elements._viewModule.setHighlightModel(this.highlightModel)},r.prototype._applyPlaceholder=function(e){this.elements._viewModule&&this.elements._viewModule.setPlaceholder&&this.elements._viewModule.setPlaceholder(this.placeholder)},r.prototype._applyGetDisplayedInformation=function(e){this.elements._viewModule&&this.elements._viewModule.setGetDisplayedInformation&&this.elements._viewModule.setGetDisplayedInformation(this.getDisplayedInformation)},r.prototype._applyAllowResetToUndefinedByUIFlag=function(e){this.elements._viewModule&&this.elements._viewModule.setAllowResetToUndefinedByUIFlag&&this.elements._viewModule.setAllowResetToUndefinedByUIFlag(this.allowResetToUndefinedByUIFlag)},r.prototype._applyAlignment=function(e,t){this.alignment||!this.numeric?this.elements.container&&("near"===this.alignment?this.elements.container.setAttribute("alignment","near"):"center"===this.alignment?this.elements.container.setAttribute("alignment","center"):"far"===this.alignment?this.elements.container.setAttribute("alignment","far"):this.elements.container.removeAttribute("alignment")):this.alignment="far"},r.prototype._applyNumeric=function(e,t){!this.alignment&&this.numeric&&(this.alignment="far")},r.prototype.getEditedState=function(){var e=!1;if(this.showReferenceValueFlag&&void 0!==this.referenceValue){var t=this.value,i=this.referenceValue,o=this.isDirty("value")?this._upgradeValue(t):t,a=this.isDirty("referenceValue")?this._upgradeValue(i):i;e=0!==n.compare(o,a)}return e},r.prototype._updateEditedState=function(){this.elements.container&&(this.getEditedState()?this.elements.container.classList.add("wux-tweakers-edited"):this.elements.container.classList.remove("wux-tweakers-edited")),this.elements._viewModule&&this.elements._viewModule.usesReferenceValueLabel()&&this.elements._viewModule.updateReferenceValueLabel()},r.prototype._updateTooltipFromPossibleValues=function(){var e=this._currentPossibleValue;this.elements._viewModule&&e&&"object"==typeof e&&e.tooltip&&this.elements._viewModule.setTooltipInfos(e.tooltip)},r.prototype.destroy=function(){this.elements._viewModule&&(this.elements.internalView=void 0,delete this.elements.internalView),t.prototype.destroy.call(this)},r.prototype._applyEscapeHTML=function(e){var t=this.elements.internalView;void 0!==t&&void 0!==t&&(this.elements.internalView.escapeHTML=this.escapeHTML)},r.prototype._applyAllowMultipleValuesFlag=function(e){this.elements._viewModule&&this.elements._viewModule.setAllowMultipleValuesFlag?this.elements._viewModule.setAllowMultipleValuesFlag(this.allowMultipleValuesFlag):this.elements._viewModule&&!this.isDirty("displayStyle")&&this._applyDisplayStyle()},r.prototype._applyPossibleValues=function(e){var t=this.possibleValues;if(!(Array.isArray(e)&&Array.isArray(t)&&i.equals(t,e))){if(this._currentPossibleValue=void 0,this.elements._viewModule&&(t&&!e||!t&&e)){var n=this._resolveViewModuleToApply(this.displayStyle);if(n&&n.definition&&(n.definition.classObject&&!(this.elements._viewModule instanceof n.definition.classObject)||n.definition.classPath||n.definition.filePath&&n.definition.key))return void this._createViewModule()}if(this.elements._viewModule&&this.elements._viewModule.setPossibleValues(t),!this.isDirty("value")){var o=u.call(this,this.value);o.isValidValue&&Object.keys(o).indexOf("newValue")>-1&&o.newValue!==this.value?this.value=o.newValue:this.elements._viewModule&&this.elements._viewModule.setValue(this.value)}}},r.prototype._getEntryInPossibleValues=function(e){for(var t,n=0;n<this.possibleValues.length;n++){var o=this.possibleValues[n],a=e,r=o;if("object"==typeof o&&(o.hasOwnProperty("value")?(a="object"===i.typeOf(e)&&e.hasOwnProperty("value")?e.value:e,r=o.value):o.hasOwnProperty("label")&&(a="object"===i.typeOf(e)?e.label:e,r=o.label)),0===this.compare(this._upgradeValue(r),a)||0===this.compare(r,a)){t=o;break}}return t},r.prototype._applyProperties=function(e){t.prototype._applyProperties.call(this,e),this.isDirty("useWrappedView")&&this._applyUseWrappedView(e.useWrappedView),this.isDirty("allowUnsafeHTMLContent")&&this._applyAllowUnsafeHTMLContent(e.allowUnsafeHTMLContent),this.isDirty("highlightModel")&&this._applyHighlightModel(e.highlightModel),this.isDirty("touchMode")&&this._applyTouchMode(e.touchMode),this.isDirty("escapeHTML")&&this._applyEscapeHTML(e.escapeHTML),this.isDirty("allowMultipleValuesFlag")&&this._applyAllowMultipleValuesFlag(e.allowMultipleValuesFlag),this.isDirty("possibleValues")&&this._applyPossibleValues(e.possibleValues),this.isDirty("minValue")&&this._applyMinValue(e.minValue),this.isDirty("maxValue")&&this._applyMaxValue(e.maxValue),this.isDirty("value")&&a._applyForAdvancedSetterProperty(this,"value",e.value,this.value),this.isDirty("readOnly")&&this._applyReadOnly(e.readOnly),this.isDirty("referenceValue")&&this._applyReferenceValue(e.referenceValue),this.isDirty("showReferenceValueFlag")&&this._applyShowReferenceValueFlag(e.showReferenceValueFlag),this.isDirty("icon")&&this._applyIcon(this.icon),this.isDirty("allowResetToUndefinedByUIFlag")&&this._applyAllowResetToUndefinedByUIFlag(e.allowResetToUndefinedByUIFlag),this.isDirty("placeholder")&&this._applyPlaceholder(e.placeholder),this.isDirty("displayStyle")&&this._applyDisplayStyle(e.displayStyle),this.isDirty("disabled")&&this._applyDisabled(e.disabled),this.isDirty("alignment")&&this._applyAlignment(e.alignment),this.isDirty("numeric")&&this._applyNumeric(e.numeric),this.isDirty("getDisplayedInformation")&&this._applyGetDisplayedInformation(e.getDisplayedInformation),this.isDirty("emphasize")&&this._applyEmphasize(e.emphasize),this.isDirty("backgroundColor")&&this._applyBackgroundColor(e.backgroundColor),this.isDirty("viewOptions")&&this._applyViewOptions(e.viewOptions)},r.prototype.handleEvents=function(){},r.prototype._upgradeValue=function(e){return e},r.prototype._upgradeMinMaxValue=function(e){return this._upgradeValue(e)},r.prototype.resetToReferenceValue=function(){this.value=this.referenceValue},r.prototype.setValueAsReference=function(){this.referenceValue=i.clone(this.value,!1)},r.prototype._getElementToFocus=function(){return this.elements._viewModule&&this.elements._viewModule._getElementToFocus?this.elements._viewModule._getElementToFocus():this.elements.internalView?this.elements.internalView._getElementToFocus?this.elements.internalView._getElementToFocus():this.elements.internalView:null},r.prototype._onFocusReceived=function(){t.prototype._onFocusReceived.call(this),this.getContent()!==document.activeElement&&o.isActiveElementInContainer(this.getContent())||(this.elements._viewModule&&this.elements._viewModule.focus?this.elements._viewModule.focus({preventScroll:!0}):this.elements.internalView&&this.elements.internalView.focus&&this.elements.internalView.focus({preventScroll:!0}))},r.prototype._giveFocus=function(){t.prototype._giveFocus.call(this),this.getContent()!==document.activeElement&&o.isActiveElementInContainer(this.getContent())||(this.elements._viewModule&&this.elements._viewModule._giveFocus?this.elements._viewModule._giveFocus():this.elements.internalView&&this.elements.internalView._giveFocus&&this.elements.internalView._giveFocus())},r.prototype._resolveViewModuleToApply=function(e){var t={id:"",definition:void 0},i=this;function n(e){var n=Object.getPrototypeOf(i),o="";for(e.id&&i.displayStyle&&(o=i.displayStyle),e.hasPossibleValues&&(o+=(0===o.length?"":"_")+"hasPossibleValues"),e.allowMultipleValues&&(o+=(0===o.length?"":"_")+"allowMultipleValues"),e.readOnly&&(o+=(0===o.length?"":"_")+"readOnly");n&&!t.definition;){var a=n.VIEW_MODULES;if(a){var r=a[o];r&&i.useWrappedView&&r.wrappedView&&(o=r.wrappedView),(r=a[o])&&(r.classObject||r.classPath||r.filePath&&r.key)&&(t.id=o,t.definition=r)}n=Object.getPrototypeOf(n)}}var o=this.readOnly,a=Array.isArray(this.possibleValues)||this.possibleValues instanceof Function;return n({id:!0,hasPossibleValues:a,allowMultipleValues:this.allowMultipleValuesFlag,readOnly:o}),n({id:!0,hasPossibleValues:a,readOnly:o}),n({id:!0,readOnly:o}),n(o?{readOnly:!0}:{id:!0}),t},r.prototype.disableEvents=function(){this._eventsDisabledCounter++},r.prototype.enableEvents=function(){this._eventsDisabledCounter--},r.prototype.getEventsAllowedState=function(){return 0===this._eventsDisabledCounter},r.prototype.onChange=function(e){2===this._preEditState&&(this._cancelableValue=i.clone(this.value,!1)),this._updateEditedState(),this._liveChangeOccurred=!1,this.getEventsAllowedState()&&this.fire("change",e)},r.prototype.isInTransaction=function(){return this._preEditState>0},r.prototype.onPreEdit=function(){this._preEditState||(this._cancelableValue=i.clone(this.value,!1),this._preEditState=1,this._liveChangeOccurred=!1)},r.prototype.onPostEdit=function(e){this._preEditState&&(this._popupOpenedState||(this._cancelableValue=void 0,this._liveChangeOccurred&&this.onChange(),2===this._preEditState&&this.getEventsAllowedState()&&this.fire("postEdit",e),this._liveChangeOccurred=!1,this._preEditState=0))},r.prototype.onCancelEdit=function(e){this._preEditState&&(this._cancelableValue===this.value?this.onPostEdit():(this.handleEditionCancel&&this.setPropertyFromUIInteraction("value",this._cancelableValue),this._preEditState=0,this._cancelableValue=void 0,this.getEventsAllowedState()&&this.fire("cancelEdit",e)))},r.prototype.onShow=function(e){this._popupOpenedState=!0,this.onPreEdit(),this.getEventsAllowedState()&&this.fire("show",e)},r.prototype.onHide=function(e){this._popupOpenedState=!1,e&&e.cancelFlag?this.onCancelEdit():this.onPostEdit(),this.getEventsAllowedState()&&this.fire("hide",e)},r.prototype._isValueValid=function(e){return!0},r.prototype._updateValidState=function(){if(this._properties.value){var e=this._isValueValid(this._properties.value.value);this._properties.validState&&e!==this._properties.validState.value&&(this._properties.validState.value=e,this.fire("validStateChange"))}},r.prototype._getValidityReason=function(){return""},r.prototype._updateInformationToDisplay=function(e){this._currentValueIcon=this.icon,this._currentValueLabel=null;var t,i=void 0;if(t=this.getStringFromValue(e),i=this.icon,this._currentPossibleValue&&(this._currentPossibleValue.hasOwnProperty("label")?t=this._currentPossibleValue.label:this._currentPossibleValue.hasOwnProperty("labelItem")?t=this._currentPossibleValue.labelItem:this._currentPossibleValue.hasOwnProperty("value")&&(t=this.getStringFromValue(this._currentPossibleValue.value)),this.readOnly?this._currentPossibleValue.hasOwnProperty("icon_readOnly")?i=this._currentPossibleValue.icon_readOnly:this._currentPossibleValue.hasOwnProperty("icon")&&(i=this._currentPossibleValue.icon):this._currentPossibleValue.hasOwnProperty("icon")?i=this._currentPossibleValue.icon:this._currentPossibleValue.hasOwnProperty("icon_readOnly")&&(i=this._currentPossibleValue.icon_readOnly)),this.getDisplayedInformation){var n=this.getDisplayedInformation();n.hasOwnProperty("label")&&(t=n.label),n.hasOwnProperty("icon")&&(i=n.icon)}this._currentValueLabel=t,this._currentValueIcon=i},r.prototype.setHeight=function(e){var t,i;return!!(null===(i=null===(t=this.elements)||void 0===t?void 0:t._viewModule)||void 0===i?void 0:i.setHeight)&&this.elements._viewModule.setHeight(e)},r}(r),d=function(e,t){this._tweaker=e,this._options=Object.assign({},t),this._options.viewOptions&&(this._options.viewOptions=i.clone(this._options.viewOptions,!0)),this._cptUpdate=0,this._view=void 0,this.buildView(),this.handleEvents()};d.prototype._destroyViewItem=function(e){if(this[e]){if(this._view){var t=this._view.indexOf(this[e]);t>-1&&this._view.splice(t,1)}this[e].remove(),this[e].destroy&&this[e].destroy(),delete this[e]}},d.prototype.buildView=function(){},d.prototype.handleEvents=function(){},d.prototype.inject=function(e){if(this._view)if(Array.isArray(this._view))for(var t=this._view.length-1;t>=0;t--)e.prepend(this._view[t].getContent?this._view[t].getContent():this._view[t]);else e.prepend(this._view.getContent?this._view.getContent():this._view)},d.prototype.setTooltipInfos=function(e){this._view&&("string"==typeof e&&(e={shortHelp:e}),this._view.tooltipInfos=e)},d.prototype.destroy=function(){if(this._referenceValueLabel&&(this._referenceValueLabel.destroy(),this._referenceValueLabel=void 0),this._view)if(Array.isArray(this._view))for(var e=0;e<this._view.length;e++)this._view[e].remove(),this._view[e].destroy&&this._view[e].destroy();else this._view.remove(),this._view.destroy&&this._view.destroy();delete this._view},d.prototype.setTouchMode=function(e){if(this._view)if(Array.isArray(this._view))for(var t=0;t<this._view.length;t++)this._view[t].touchMode=e;else this._view.touchMode=e},d.prototype.setValue=function(e,t){},d.prototype.setTweakerValue=function(e){var t=this._tweaker;t&&(t._preEditState&&1===t._preEditState&&t.getEventsAllowedState()&&(t.fire("preEdit"),t._preEditState=2),t.setPropertyFromUIInteraction("value",e))},d.prototype.setPossibleValues=function(e){},d.prototype.setGetDisplayedInformation=function(e){},d.prototype.setAllowUnsafeHTMLContent=function(e){},d.prototype.setPlaceholder=function(e){},d.prototype.setAllowResetToUndefinedByUIFlag=function(e){},d.prototype.setMinValue=function(e){if(this._view)if(Array.isArray(this._view))for(var t=0;t<this._view.length;t++)this._view[t].minValue=e;else this._view.minValue=e},d.prototype.setMaxValue=function(e){if(this._view)if(Array.isArray(this._view))for(var t=0;t<this._view.length;t++)this._view[t].maxValue=e;else this._view.maxValue=e},d.prototype.usesReferenceValueLabel=function(){return!1},d.prototype.updateReferenceValueLabel=function(){var e=this._tweaker;if(e)if(e.getEditedState()){this._referenceValueLabel||(this._referenceValueLabel=i.createElement("div",{class:"wux-tweakers-reference-value"}));var t=void 0;if(t=this._formatReferenceValue?this._formatReferenceValue(e.referenceValue):e.getStringFromValue(e.referenceValue),n.getUnsafeHTMLContentValueToApply(e.allowUnsafeHTMLContent)?this._referenceValueLabel.innerHTML=t:this._referenceValueLabel.textContent=t,!this._referenceValueLabel.parentNode){var o=this._options.useCustomContainerDiv?this._options.useCustomContainerDiv:this._tweaker.elements.container;this._referenceValueLabel.inject(o)}}else this._referenceValueLabel&&(this._referenceValueLabel.destroy(),this._referenceValueLabel=void 0)},d.prototype.computeTweakerContentLength=function(){var e=0;if(this._tweaker.readOnly||!this._view){this._tweaker.icon&&this._icon&&(e+=this._icon.offsetWidth+7),!this._tweaker.validState&&this._validityIcon&&(e+=this._validityIcon.offsetWidth+7);var t=this._tweaker.readOnly?this._tweaker.getContent().innerText.length>0?this._tweaker.getContent().innerText:this._tweaker.getContent().textContent:this._tweaker.value,i=this._tweaker.getEditedState();e+=o.computeStringWidth(t,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),i,i);for(var n=0,a=0,r=new RegExp("<mark.*?>(.*?)</mark","ig"),s=r.exec(this._tweaker.getContent().innerHTML);null!==s;)n+=o.computeStringWidth(s[1],this._tweaker.getFontSize(),this._tweaker.getFontFamily(),!1,i),a+=o.computeStringWidth(s[1],this._tweaker.getFontSize(),this._tweaker.getFontFamily(),!0,i),s=r.exec(this._tweaker.getContent().innerHTML);return e+=a-n}if(Array.isArray(this._view))for(var l=this._view.length-1;l>=0;l--){var u=this._view[l],p=u.getContent?u.getContent():u,d=parseInt(p.offsetWidth.toString());d||(d=parseInt(window.getComputedStyle(p).minWidth)),e+=d}else{p=this._view.getContent?this._view.getContent():this._view;(e=parseInt(p.offsetWidth.toString()))||(e=parseInt(window.getComputedStyle(p).minWidth))}return e},d.prototype._computeTweakerContentHeight=function(){var e=0;if(this._view)if(Array.isArray(this._view))for(var t=this._view.length-1;t>=0;t--){var i=this._view[t],n=i.getContent?i.getContent():i,o=parseInt(n.offsetHeight.toString());o||(o=parseInt(window.getComputedStyle(n).minHeight)),e+=o}else{n=this._view.getContent?this._view.getContent():this._view;(e=parseInt(n.offsetHeight.toString()))||(e=parseInt(window.getComputedStyle(n).minHeight))}else e=this._tweaker.getContent().offsetHeight;return e},d.prototype.valueMustBeValidated=function(){return!1},d.prototype.validateValue=function(){return!1},d.prototype.isValueDisplayedAsString=function(e){return!0},d.prototype.focus=function(e){var t=this._getElementToFocus?this._getElementToFocus():void 0;t&&t.focus&&t.focus(e)},d.prototype.setViewOptions=function(e){},d.prototype._setViewOptionsOnAbstract=function(e,t,i){if(e){var n=this._options.viewOptions||{},o=Object.assign({},i);if(n&&Object.keys(n).forEach((function(e){i.hasOwnProperty(e)&&(o[e]=n[e])})),t){var a={};Object.keys(t).forEach((function(e){i.hasOwnProperty(e)&&(a[e]=t[e],!n[e]||void 0!==t[e]&&null!==t[e]||(a[e]=n[e]))})),Object.keys(a).length>0&&e.setProperties(a)}else e.setProperties(o)}},d.prototype.usesTextWrapping=function(){return this._options&&this._options.wrap};var c=function(e,t){this._currentMode=0,d.call(this,e,t)};return n.applyMixin(c,d),c.prototype.buildView=function(){this.formatHTMLValue(this._tweaker.value),this.setEmphasize(this._tweaker.emphasize),this.setBackgroundColor(this._tweaker.backgroundColor)},c.prototype.setEmphasize=function(e,t){if(t||e){if(t){var i=s+t;this._tweaker.getContent().classList.remove(i)}if(e){var n=s+e;this._tweaker.getContent().classList.add(n)}}},c.prototype.setBackgroundColor=function(e,t){if(t||e){if(t){var i=l+t;this._tweaker.getContent().classList.remove(i)}if(e){var n=l+e;this._tweaker.getContent().classList.add(n)}}},c.prototype._cleanContainerProperties=function(){var e=this._tweaker;e.elements.container&&(e.elements.container.textContent="",e.elements.container.removeClassName("wux-tweakers-string-label"),e.elements.container.removeClassName("wux-tweakers-readonly-label"),e.elements.container.removeClassName("wux-tweakers-domleaf"),e.elements.container.removeClassName("wux-tweakers-icon"),e.elements.container.removeAttribute("wrap"),o.cleanIcon(e.elements.container))},c.prototype.destroy=function(){this._cleanContainerProperties(),d.prototype.destroy.call(this)},c.prototype.setSuffix=function(e){this._tweaker&&this._tweaker.elements.container&&this.formatHTMLValue(this._tweaker.value)},c.prototype.setAllowUnsafeHTMLContent=function(e,t){if(1&this._currentMode&&t!==e){var i=void 0;i=1===this._currentMode?this._tweaker.elements.container:this._label,n.getUnsafeHTMLContentValueToApply(!0===e)?i.innerHTML=i.textContent:i.textContent=i.innerHTML}},c.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&this.formatHTMLValue(this._tweaker.value)},c.prototype.removeHighlightModel=function(){this.setHighlightModel(void 0)},c.prototype._shouldFormatHTMLValue=function(e){if(void 0===this._previousFormatHTMLValueProperties&&(this._previousFormatHTMLValueProperties={}),0===Object.keys(this._previousFormatHTMLValueProperties).length)return!0;var t=this._tweaker;return this._previousFormatHTMLValueProperties.suffix!==t._suffix||(this._previousFormatHTMLValueProperties.valueIcon!==t._currentValueIcon||(this._previousFormatHTMLValueProperties.valueLabel!==t._currentValueLabel||(this._previousFormatHTMLValueProperties.stringValue!==t.getStringFromValue(e)||JSON.stringify(this._previousFormatHTMLValueProperties.highlightModel)!==JSON.stringify(t.highlightModel))))},c.prototype.formatHTMLValue=function(e){var t=this._tweaker;if(t){var a=this._options.useCustomContainerDiv?this._options.useCustomContainerDiv:t.elements.container;t._updateInformationToDisplay(e);var r=t.highlightModel,s="wux-tweakers-tweakerbase-highlight",l="wux-tweakers-tweakerbase-selectedHighlight",u=n.getFindHighlightClasses(),p=this._options.hyperlink&&void 0!==t.value&&null!==t.value&&""!==t.value,d=t.validState,c=1;t._currentValueIcon?c=void 0!==e&&""!==e?3:d?2:3:d||(c=3),(1===this._currentMode&&1!==c||2===this._currentMode&&2!==c)&&this._cleanContainerProperties(),this._label&&3!==c&&!p&&(this._label.destroy(),this._label=void 0),!this._icon||t._currentValueIcon&&2!==c||this._destroyViewItem("_icon"),this._validityIcon&&d&&(this._destroyViewItem("_validityIcon"),t.elements.container.removeAttribute("with-validsign")),!t._currentValueIcon&&d&&t.elements.container.removeAttribute("has-icon");var h=null;if(1&c){if((h=this._label)||(p?(this._label=i.createElement("a"),h=this._label):3===c?(this._label=i.createElement("span"),h=this._label):h=this._getLabelDivToConsiderForHighlight?this._getLabelDivToConsiderForHighlight():a),!h)return;h.classList.add("wux-tweakers-string-label"),h.classList.add("wux-tweakers-readonly-label"),h===a?h.classList.add("wux-tweakers-domleaf"):h.classList.remove("wux-tweakers-domleaf"),this.usesTextWrapping()&&h.setAttribute("wrap","");var y=null===t._currentValueLabel?t.getStringFromValue(e):t._currentValueLabel;if(t._suffix)y+=this._getSuffixToConsiderForHighlight?this._getSuffixToConsiderForHighlight():" "+t._suffix;var w=n.getUnsafeHTMLContentValueToApply(t.allowUnsafeHTMLContent);if(w){if(r)for(var _=r.indexes.length-1;_>=0;_--){var f=r.indexes[_],v=(V=_===r.selectedIndex)?u.currentHighlight:u.highlight,g=V?'<mark class="'+s+" "+l+" "+v+'">':'<mark class="'+v+" "+s+'">';y=n.spliceString(y,f+r.label.length,0,"</mark>"),y=n.spliceString(y,f,0,g)}h.innerHTML=y}else if(r){var m=y.length;y=y.toString(),h.setContent();for(_=r.indexes.length-1;_>=0;_--){f=r.indexes[_];var b,V=_===r.selectedIndex;if(f+r.label.length<m)(b=document.createElement("span")).textContent=y.slice(f+r.label.length,m),h.prepend(b),m=f+r.label.length;var k=f+r.label.length;f+r.label.length>m&&(k=m);v=V?u.currentHighlight:u.highlight;var C=document.createElement("mark");C.classList.add(s),V&&C.classList.add(l),C.classList.add(v),C.textContent=y.slice(f,k),h.prepend(C),m=f}if(0!==m)(b=document.createElement("span")).textContent=y.slice(0,m),h.prepend(b)}else h.textContent=y;if(p)h.set("href",e);else if(!r&&!w){var O=h.textContent,T=o.hyperlinkifyText(O,!1);T!==O&&(h.innerHTML=T)}}var M=null,E=null;switch(2&c&&(t._currentValueIcon&&((M=this._icon)||3!==c?2===c&&(M=a):(this._icon=i.createElement("span"),M=this._icon),M.classList.add(t._iconClassName),o.generateIcon(t._currentValueIcon,{target:M})),d||(E=this._validityIcon)||(this._validityIcon=E=o.generateValidityIcon({state:"invalid",getValidityReason:function(){return t._getValidityReason()}}),this._validityIcon.classList.add("wux-ui-3ds-lg"),E.classList.add("wux-tweakers-icon"),t.elements.container.setAttribute("with-validsign","")),t.elements.container.setAttribute("has-icon","")),c){case 1:p&&this._label.inject(a);break;case 3:E&&a.appendChild(E),this._icon&&this._icon.inject(a),this._label.inject(a)}this._currentMode=c,this.updateReferenceValueLabel()}},c.prototype.setValue=function(e,t){this._tweaker&&this.formatHTMLValue(e)},c.prototype.setIcon=function(e){this.formatHTMLValue(this._tweaker.value)},c.prototype.usesReferenceValueLabel=function(){return!0},c.prototype.setViewOptions=function(e,t){var i=t&&t.multipleValuesSeparator;(e&&e.multipleValuesSeparator)!==i&&this.formatHTMLValue(this._tweaker.value)},p.prototype.baseViewModule=d,p.prototype.VIEW_MODULES={readOnly:{classObject:c}},p.prototype.registerViewModule=function(e,t){},a.addClass(p,"tweakerBase"),p})),define("DS/Tweakers/TypeEnums",["require","exports","i18n!DS/Tweakers/assets/nls/translation"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0,t.Layout=Object.freeze({TagCloud:Object.freeze({value:"tagcloud",label:i.get("tagcloud"),icon:Object.freeze({iconName:"view-tag-cloud",fontIconFamily:1})}),SmallThumbnail:Object.freeze({value:"smallthumbnail",label:i.get("smallthumbnail"),icon:Object.freeze({iconName:"view-small-thb",fontIconFamily:1})}),BigThumbnail:Object.freeze({value:"bigthumbnail",label:i.get("bigthumbnail"),icon:Object.freeze({iconName:"view-big-thb",fontIconFamily:1})}),ImageWallThumbnail:Object.freeze({value:"imagewallthumbnail",label:i.get("imagewallthumbnail"),icon:Object.freeze({iconName:"view-imagewall-thb",fontIconFamily:1})}),SmallTile:Object.freeze({value:"smalltile",label:i.get("smalltile"),icon:Object.freeze({iconName:"view-small-tile",fontIconFamily:1})}),BigTile:Object.freeze({value:"bigtile",label:i.get("bigtile"),icon:Object.freeze({iconName:"view-big-tile",fontIconFamily:1})}),TextualTile:Object.freeze({value:"textualtile",label:i.get("textualtile"),icon:Object.freeze({iconName:"view-textual-tile",fontIconFamily:1})}),DataGridView:Object.freeze({value:"datagridview",label:i.get("datagridview"),icon:Object.freeze({iconName:"view-list",fontIconFamily:1})}),Mixed:Object.freeze({value:"mixed",label:i.get("mixed"),icon:Object.freeze({iconName:"view-mixed",fontIconFamily:1})}),Large:Object.freeze({value:"large",label:i.get("large"),icon:Object.freeze({iconName:"view-3dswym-large",fontIconFamily:1})}),GraphList:Object.freeze({value:"graphlist",label:i.get("graphlist"),icon:Object.freeze({iconName:"graph-egraph-list",fontIconFamily:1})}),List:Object.freeze({value:"list",label:i.get("list"),icon:Object.freeze({iconName:"list",fontIconFamily:1})}),Kanban:Object.freeze({value:"kanban",label:i.get("kanban"),icon:Object.freeze({iconName:"compare-on",fontIconFamily:1})}),Graph:Object.freeze({value:"graph",label:i.get("graph"),icon:Object.freeze({iconName:"graph-linear",fontIconFamily:1})}),Gantt:Object.freeze({value:"gantt",label:i.get("gantt"),icon:Object.freeze({iconName:"chart-gantt",fontIconFamily:1})}),Map:Object.freeze({value:"map",label:i.get("map"),icon:Object.freeze({iconName:"map",fontIconFamily:1})})})})),define("DS/Tweakers/TypeUtils",["require","exports","DS/CoreBase/WebUXGlobalEnums"],(function(e,t,i){"use strict";return function(){function e(){}return e.getSortingIconDefinition=function(e,t,n){var o="sorting-asc",a="sorting-desc",r=t?t.getRegisteredTypeRepresentation(e):null;return r&&r.semantics&&r.semantics.numeric?(o="num-sorting-1-2",a="num-sorting-2-1"):"string"!==e&&"user"!==e&&"url"!==e||(o="alpha-sorting-a-z",a="alpha-sorting-z-a"),{iconName:"asc"===n?o:a,fontIconFamily:i.WUXManagedFontIcons.FontAwesome}},e.doesTypeRepresentationHandleIcon=function(e){return"url"===e||"clickableLabel"===e||"user"===e||"detailedUser"===e||"detailedInfo"===e},e}()}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerDate",["require","exports","UWA/Core","DS/Utilities/LanguageUtils","DS/Tweakers/TweakerBase","DS/Controls/DatePicker","DS/Controls/TimePicker","DS/Utilities/Utils","DS/Tweakers/TweakerUtils","DS/Utilities/Dom","DS/Utilities/KeyboardUtils","DS/Utilities/DateUtils","DS/Core/WebUXComponents","i18n!DS/Utilities/assets/nls/translation"],(function(e,t,i,n,o,a,r,s,l,u,p,d,c,h){"use strict";var y="Invalid Date",w=h.invalidDate;function _(e,t){return null==e?"":d.formatDateToString(e,t)}var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{value:{defaultValue:void 0,type:"date",advancedSetter:!0},minValue:{defaultValue:void 0,type:"date"},maxValue:{defaultValue:void 0,type:"date"},timePickerFlag:{defaultValue:!1,type:"boolean"},timePickerPrecision:{defaultValue:"min",type:"string"},displayStyle:{defaultValue:"date",type:"string"}}},enumerable:!1,configurable:!0}),t.prototype._applyTimePickerFlag=function(e,t){this.elements._viewModule&&this.elements._viewModule.setTimePickerFlag?this.elements._viewModule.setTimePickerFlag(t):this.readOnly&&this.elements._viewModule&&this.elements._viewModule.setValue(this.value)},t.prototype._applyTimePickerPrecision=function(e,t){this.elements._viewModule&&this.elements._viewModule.setTimePickerPrecision?this.elements._viewModule.setTimePickerPrecision(t):this.readOnly&&this.timePickerFlag&&this.elements._viewModule&&this.elements._viewModule.setValue(this.value)},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("timePickerFlag")&&this._applyTimePickerFlag(t.timePickerFlag,this.timePickerFlag),this.isDirty("timePickerPrecision")&&this._applyTimePickerPrecision(t.timePickerPrecision,this.timePickerPrecision)},t.prototype.buildView=function(){e.prototype.buildView.call(this),this.elements.container.addClassName("wux-tweakers-date")},t.prototype.handleEvents=function(){var e=this;this._updateOnCurrentFormatsLanguageChange=function(){e.elements._viewModule&&e.elements._viewModule.setValue(e.value)},n.subscribe("onRegionalFormatLanguageChange",this._updateOnCurrentFormatsLanguageChange)},t.prototype.compare=function(t,i){var n=t instanceof Date,o=i instanceof Date;return n||o?void 0===t&&i?2:t&&void 0===i?-2:n&&o?d.compare(t,i,this.timePickerFlag?"day":"time"):e.prototype.compare.call(this,t,i):e.prototype.compare.call(this,t,i)},t.prototype.getStringFromValue=function(t){if(!t)return"";if(Array.isArray(t)&&"date"===this.displayStyle)return e.prototype.getStringFromValue.call(this,t);if(!d.convertToDate(t))return w;if(t&&!t.toLocaleDateString&&(t=this._upgradeValue(t),Array.isArray(t)&&"date"===this.displayStyle))return e.prototype.getStringFromValue.call(this,t);var i={timePrecision:this.timePickerFlag?this.timePickerPrecision:void 0};return"time"===this.displayStyle&&(i={datePrecision:"none",timePrecision:this.timePickerPrecision}),_(t,i)},t.computeStringFromValue=function(t,i,n){if(!t)return"";var o=i,a=o.displayStyle||"date";if(Array.isArray(t)&&"date"===a)return e.computeStringFromValue.call(this,t,i,n);var r=d.convertToDate(t);if(!r)return w;var s={timePrecision:o.timePickerFlag?o.timePickerPrecision||"min":void 0};return"time"===i.displayStyle&&(s={datePrecision:"none",timePrecision:o.timePickerPrecision||"min"}),_(r,s)},t.prototype._upgradeValue=function(e){var t=e;if(""===t&&this.allowResetToUndefinedByUIFlag&&(t=void 0),null!=t)if(this.allowMultipleValuesFlag&&"date"===this.displayStyle)if(Array.isArray(t)){for(var i=!0,n=0,o=t.length;n<o;++n){var a=t[n];if(null!=a&&!(a instanceof Date)){if((a=new Date(a))instanceof Date&&a.toString()===y){i=!1;break}t[n]=a}}if(!i)return this.value}else if(t instanceof Date){if(t.toString()===y)return this.value;t=[t]}else{if((t=new Date(t))instanceof Date&&t.toString()===y)return this.value;t=[t]}else t instanceof Date||(t=new Date(t));return t instanceof Date&&t.toString()===y?this.value:t},t.prototype._upgradeMinMaxValue=function(e){return function(e){if(null!=e){var t=e;if(e instanceof Date||(t=new Date(e)),!(t instanceof Date)||!isNaN(t.getTime())&&t.toString()!==y)return t}}(e)},t.prototype.destroy=function(){n.unsubscribe("onRegionalFormatLanguageChange",this._updateOnCurrentFormatsLanguageChange),e.prototype.destroy.call(this)},t}(o),v=function(e,t){o.prototype.baseViewModule.call(this,e,t)};s.applyMixin(v,o.prototype.baseViewModule),v.prototype.handleEvents=function(){var e=this._view,t=this._tweaker;if(e&&t&&!t.readOnly){var i=this;e.addEventListener("change",(function(t){t.stopPropagation(),i.setTweakerValue(e.value)})),e.addEventListener("liveChange",(function(t){t.stopPropagation(),i.setTweakerValue(e.value)})),e.addEventListener("show",(function(e){e.stopPropagation(),t.onShow()})),e.addEventListener("hide",(function(e){e.stopPropagation(),t.onHide()}))}},v.prototype.setTimePickerFlag=function(){},v.prototype.setTimePickerPrecision=function(){};var g=function(e,t){v.call(this,e,t)};s.applyMixin(g,v),g.prototype.buildView=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions||{};e.precision=this._tweaker.timePickerPrecision,e.touchMode=this._tweaker.touchMode,e.fireOnlyFromUIInteractionFlag=!0,e.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag,this._view=new r(e),this.setValue(this._tweaker.value)}},g.prototype.setAllowResetToUndefinedByUIFlag=function(){this._view.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag},g.prototype.destroy=function(){this._view&&(this._view.popupVisibleFlag=!1),v.prototype.destroy.call(this)},g.prototype.setValue=function(e){this._view&&(this._view.value=e)},g.prototype.setTimePickerPrecision=function(e){this._view&&(this._view.precision=e)};var m={showWeekNumbers:void 0,hideTodayOrNowButton:!1};Object.freeze(m);var b=function(e,t){v.call(this,e,t)};s.applyMixin(b,v),b.prototype.buildView=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions||{};e.value=this._tweaker.value,e.timePickerFlag=this._tweaker.timePickerFlag,e.timePickerPrecision=this._tweaker.timePickerPrecision,e.minValue=this._tweaker.minValue,e.maxValue=this._tweaker.maxValue,e.touchMode=this._tweaker.touchMode,e.disabled=this._tweaker.disabled,e.fireOnlyFromUIInteractionFlag=!0,e.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag,this._view=new a(e),this._tweaker.viewOptions&&this.setViewOptions(this._tweaker.viewOptions)}},b.prototype.setAllowResetToUndefinedByUIFlag=function(){this._view.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag},b.prototype.destroy=function(){this._view&&(this._view.popupVisibleFlag=!1),v.prototype.destroy.call(this)},b.prototype.setValue=function(e){this._view&&(this._view.value=e)},b.prototype.setTimePickerPrecision=function(e){this._view&&this._view.timePickerPrecision&&(this._view.timePickerPrecision=e)},b.prototype.setTimePickerFlag=function(e){this._view&&this._view.timePickerFlag&&(this._view.timePickerFlag=e)},b.prototype.setViewOptions=function(e){this._setViewOptionsOnAbstract(this._view,e,m)};var V=function(e,t){b.call(this,e,t)};return s.applyMixin(V,b),V.prototype.buildView=function(){if(this._tweaker.elements.container){this._viewInlined=i.createElement("div",{class:"wux-tweakers-date-inlineview"});var e=this;this._view=l._buildTweakerAggregateView(this._tweaker,{viewModule:this,inlined:this._viewInlined,getExtended:function(){if(!e._viewExtended){var t=e._options.viewOptions||{};t.value=e._tweaker.value,t.allowMultipleValuesFlag=!0,t.timePickerFlag=e._tweaker.timePickerFlag,t.timePickerPrecision=e._tweaker.timePickerPrecision,t.minValue=e._tweaker.minValue,t.maxValue=e._tweaker.maxValue,t.touchMode=e._tweaker._getCurrentTouchMode(),t.disabled=e._tweaker.disabled,t.fireOnlyFromUIInteractionFlag=!0,t.allowUndefinedFlag=!0,e._viewExtended=new a(t),e._tweaker.viewOptions&&e.setViewOptions(e._tweaker.viewOptions),u.addEventOnElement(e,e._viewExtended,"change",(function(t){t.stopPropagation(),e.setTweakerValue(e._viewExtended.value)})),u.addEventOnElement(e,e._viewExtended.getContent(),"keydown",(function(e){!e.actionPerformed||e.keyCode!==p.TAB&&e.keyCode!==p.ENTER&&e.keyCode!==p.ESCAPE||e.stopPropagation()}))}return e._viewExtended}},{overlapContainer:!0,hasButton:!this._options.readOnly,getExtendedViewHeight:function(){return"auto"},onPopupDisplay:function(){e._view.elements.extendedViewContainer&&e._view.elements.extendedViewContainer.getContent().setStyle("min-height",e._view.getContent().offsetHeight)}}),this._view.getContent().addClassName("wux-tweakers-string-lineeditordots"),this.setTouchMode(this._tweaker._getCurrentTouchMode()),this.setValue(this._tweaker.value)}},V.prototype.computeTweakerContentLength=function(){var e=this._tweaker;if(e){var t=this._tweaker._getCurrentTouchMode()?78:42,i=e.getStringFromValue(this._tweaker.value);return u.computeStringWidth(i,e.getFontSize(),e.getFontFamily(),e.getEditedState())+t}},V.prototype.setValue=function(e){if(void 0===e)return this._viewInlined.textContent="",void(this._viewExtended&&(this._viewExtended.value=e));Array.isArray(e)&&(this._viewExtended&&(this._viewExtended.value=e),this._viewInlined.textContent=this._tweaker.getStringFromValue(e))},V.prototype.setTimePickerFlag=function(e){this._view&&(this._viewInlined.textContent=this._tweaker.getStringFromValue(this._tweaker.value),this._viewExtended&&(this._viewExtended.timePickerFlag=e))},V.prototype.setTimePickerPrecision=function(e){this._view&&(this._viewInlined.textContent=this._tweaker.getStringFromValue(this._tweaker.value),this._viewExtended&&(this._viewExtended.timePickerPrecision=e))},V.prototype.setViewOptions=function(e,t){if(this._setViewOptionsOnAbstract(this._viewExtended,e,m),this._viewInlined){var i=t&&t.multipleValuesSeparator;(e&&e.multipleValuesSeparator)!==i&&(this._viewInlined.textContent=this._tweaker.getStringFromValue(this._tweaker.value))}},V.prototype.setTouchMode=function(e){b.prototype.setTouchMode.call(this,e),!0===e?(this._view.getContent().setAttributeNode(document.createAttribute("touch-mode")),this._viewInlined&&this._viewInlined.setAttributeNode(document.createAttribute("touch-mode"))):(this._view.getContent().removeAttribute("touch-mode"),this._viewInlined&&this._viewInlined.removeAttribute("touch-mode")),this._viewExtended&&(this._viewExtended.touchMode=e)},V.prototype.destroy=function(){this._view&&(this._view.getContent().popupVisibleFlag=!1),this._viewInlined&&this._viewInlined.destroy(),delete this._viewInlined,this._viewExtended&&this._viewExtended.destroy(),delete this._viewExtended,b.prototype.destroy.call(this)},f.prototype.baseViewModule=v,f.prototype.VIEW_MODULES={time:{classObject:g},date:{classObject:b},date_allowMultipleValues:{classObject:V}},f.prototype.registerViewModule=function(e,t){},c.addClass(f,"tweakerDate"),f}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerParentTreeNodeModel",["require","exports","UWA/Core","DS/Utilities/Dom","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Core/WebUXComponents","DS/CoreBase/WebUXGlobalEnums","./typings/types"],(function(e,t,i,n,o,a,r){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{value:{defaultValue:void 0,type:"DS/TreeModel/TreeNodeModel"}}},enumerable:!1,configurable:!0}),t.prototype.managePreselection=function(e){return this.elements._viewModule.managePreselection(e)},t.prototype.manageSelection=function(e,t,i){return this.elements._viewModule.manageSelection(e,t,i)},t}(a),l=function(e,t){a.prototype.baseViewModule.call(this,e,t)};return o.applyMixin(l,a.prototype.baseViewModule),l.prototype.buildView=function(){this._view=i.createElement("div",{class:"wux-ui-tweakerParentTreeNodeModel"}),this.setValue(this._tweaker.value)},l.prototype.destroy=function(){this._view.destroy()},l.prototype.handleEvents=function(){var e=this;n.addEventOnElement(this,this._view,"mouseleave",(function(t){e._getTreeNodeModelFromEvent(t)===e._tweaker.value&&e.preselectedNode&&(e.preselectedNode.unPreSelect(),e.preselectedNode=void 0)}))},l.prototype._getTreeNodeModelFromEvent=function(e){for(var t=this._tweaker.value,i=0;i<this._icons.length;i++)if(n.isElementInside(e.target,this._icons[i])){var o=t.getVisibleChildren();o&&(t=o[i]);break}return t},l.prototype.managePreselection=function(e){var t=this._getTreeNodeModelFromEvent(e);return t===this._tweaker.value?(this.preselectedNode&&(this.preselectedNode.unPreSelect(),this.preselectedNode=void 0),!1):(this.preselectedNode!==t&&(this.preselectedNode&&this.preselectedNode.unPreSelect(),t&&t.preSelect(),this.preselectedNode=t),!0)},l.prototype.manageSelection=function(e,t,i){var n=this._getTreeNodeModelFromEvent(e);if(n===this._tweaker.value)return!1;if(e.shiftKey){var o=void 0,a=!1;i.nodeModel&&i.nodeModel._getRowID()<this._tweaker.value._getRowID()?(o=!0,this._latestNodeSelected=void 0):i.nodeModel&&i.nodeModel._getRowID()>this._tweaker.value._getRowID()?(o=!1,this._latestNodeSelected=void 0):this._latestNodeSelected&&this._latestNodeSelected!==n&&(o=!1,a=!0);for(var r=this._tweaker.value.getChildren(),s=0;s<r.length;s++)r[s]===n||a&&r[s]===this._latestNodeSelected?(r[s].select(),n!==this._latestNodeSelected&&(o=!o)):o?r[s].select():r[s].unselect()}else{if(t&&n&&n.isSelected())n.unselect();else if(n){var l=!t;n.select(l)}this._latestNodeSelected=n}return!0},l.prototype.setValue=function(e){var t=this;this.preselectedNode=void 0,this._view.textContent="",this._icons=[],this._listenerTokensForNodeModelUpdate&&this._listenerTokensForNodeModelUpdate.forEach((function(e){return e.node.removeEventListener(e.token)})),this._listenerTokensForNodeModelUpdate=[],e.onSelect((function(){return t._view.setAttribute("is-selected",!0)})),e.onUnselect((function(){return t._view.setAttribute("is-selected",!1)})),e.getVisibleChildren().forEach((function(e){var i=n.generateIcon({className:"wux-tweakers-clickable-icon",iconPath:e.getIcons()[0]}).inject(t._view);i.setAttribute("node-is-hidden",e._specTreeVisibility?"":"true"),t._icons.push(i),e.onSelect((function(){return i.setAttribute("is-selected","true")})),e.onUnselect((function(){return i.setAttribute("is-selected","false")})),e.onHighlight((function(){return i.setAttribute("is-highlighted","true")})),e.onUnhighlight((function(){return i.removeAttribute("is-highlighted")})),e.onPreselect((function(){if(t.preselectedNode){if(t.preselectedNode===e)return;t.preselectedNode.unPreSelect()}i.setAttribute("is-preselected","true"),t.preselectedNode=e})),e.onUnpreselect((function(){t.preselectedNode===e&&(t.preselectedNode=null),i.setAttribute("is-preselected","false")}));var o=e.addEventListener("nodeModelUpdate",(function(){i.setAttribute("node-is-hidden",e._specTreeVisibility?"":"true")}));t._listenerTokensForNodeModelUpdate.push({node:e,token:o})}))},s.prototype.VIEW_MODULES={clickableIcons:{classObject:l},clickableIcons_readOnly:{classObject:l}},r.addClass(s,"tweakerParentTreeNodeModel"),s}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerFile",["require","exports","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Controls/FilePicker","DS/Core/WebUXComponents","DS/Controls/FilePicker"],(function(e,t,i,n,o,a,r){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{placeholder:{defaultValue:void 0,type:"string",category:"Appearance"},displayStyle:{defaultValue:"filePicker",type:"string",category:"Appearance"},fileTypes:{defaultValue:void 0,type:"string",category:"Behavior"},allowMultipleFiles:{defaultValue:!1,type:"boolean",category:"Behavior"},allowResetToUndefinedByUIFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},dropOptions:{defaultValue:void 0,type:"Object",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype._preEditValue=function(e,t){return void 0===t||!!t&&(t instanceof File&&!1===this.allowMultipleValuesFlag||t instanceof FileList&&!0===this.allowMultipleValuesFlag)},t.prototype._applyValue=function(t,n){0!==i.compare(t,n)&&e.prototype._applyValue.call(this,t,n)},t.prototype._applyPlaceholder=function(e){this.elements._viewModule&&this.elements._viewModule.setPlaceholder&&this.elements._viewModule.setPlaceholder(this.placeholder)},t.prototype._applyFileTypes=function(e,t){var i;null===(i=this.elements._viewModule)||void 0===i||i.setFileTypes(t)},t.prototype._applyAllowMultipleFiles=function(e,t){this.allowMultipleValuesFlag=this.allowMultipleFiles},t.prototype._applyAllowResetToUndefinedByUIFlag=function(e){var t;null===(t=this.elements._viewModule)||void 0===t||t.setAllowResetToUndefinedByUIFlag(this.allowResetToUndefinedByUIFlag)},t.prototype._applyDropOptions=function(e,t){var i;null===(i=this.elements._viewModule)||void 0===i||i.setDropOptions(t)},t.prototype._applyProperties=function(t){this.isDirty("placeholder")&&this._applyPlaceholder(t.placeholder),this.isDirty("allowMultipleFiles")&&this._applyAllowMultipleFiles(t.allowMultipleFiles,this.allowMultipleFiles),this.isDirty("fileTypes")&&this._applyFileTypes(t.fileTypes,this.fileTypes),this.isDirty("allowResetToUndefinedByUIFlag")&&this._applyAllowResetToUndefinedByUIFlag(t.allowResetToUndefinedByUIFlag),this.isDirty("dropOptions")&&this._applyDropOptions(t.dropOptions,this.dropOptions),e.prototype._applyProperties.call(this,t)},t.prototype.getStringFromValue=function(t){return t instanceof FileList?e.prototype.getStringFromValue.call(this,Array.from(t)):t?t.name:""},t}(o),l=function(e,t){o.prototype.baseViewModule.call(this,e,t)};i.applyMixin(l,o.prototype.baseViewModule),l.prototype.setValue=function(){},l.prototype.setPlaceholder=function(){},l.prototype.setFileTypes=function(){},l.prototype.setAllowResetToUndefinedByUIFlag=function(){},l.prototype.setDropOptions=function(){};var u=function(e,t){l.call(this,e,t)};return i.applyMixin(u,l),u.prototype.buildView=function(){var e=this._tweaker;e.elements.container.classList.add("wux-tweakerfile"),this._view=new a({disabled:e.disabled,touchMode:e.touchMode,value:e.value,placeholder:e.placeholder,fileTypes:e.fileTypes,allowMultipleFiles:e.allowMultipleValuesFlag,allowResetToUndefinedByUIFlag:e.allowResetToUndefinedByUIFlag,dropOptions:e.dropOptions})},u.prototype.handleEvents=function(){var e=this;n.addEventOnElement(this,this._view,"change",(function(t){t.stopPropagation(),n.pushUserInteractionContext(),e.setTweakerValue(t.target.dsModel.value),n.popUserInteractionContext()}))},u.prototype.setValue=function(e){this._view&&(this._view.value=e)},u.prototype.setPlaceholder=function(e){this._view&&(this._view.placeholder=e)},u.prototype.setFileTypes=function(e){this._view&&(this._view.fileTypes=e)},u.prototype.setAllowMultipleValuesFlag=function(e){this._view&&(this._view.allowMultipleFiles=e)},u.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.allowResetToUndefinedByUIFlag=e)},u.prototype.setDropOptions=function(e){this._view&&(this._view.dropOptions=e)},u.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.elements.container.classList.remove("wux-tweakerfile"),l.prototype.destroy.call(this)},s.prototype.baseViewModule=l,s.prototype.VIEW_MODULES={filePicker:{classObject:u}},r.addClass(s,"tweakerFile"),s}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerFunction",["require","exports","DS/Utilities/Dom","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Controls/Button","DS/Controls/Flyout","DS/Controls/ComboBox","DS/Controls/Popup","DS/Menu/Menu","DS/Core/WebUXComponents","DS/CoreBase/WebUXGlobalEnums","./typings/types"],(function(e,t,i,n,o,a,r,s,l,u,p){"use strict";function d(e){return{context:e._tweaker.executionContext,dsModel:e._tweaker}}function c(){var e=this;if(e._tweaker.value&&"function"==typeof e._tweaker.value)e._tweaker.value(d(e));else if(e._tweaker.value&&(e._tweaker.value.module||e._tweaker.defaultModule)){var t=e._tweaker.value&&e._tweaker.value.module?e._tweaker.value.module:e._tweaker.defaultModule,i=e._tweaker.value&&e._tweaker.value.func?e._tweaker.value.func:e._tweaker.defaultFunction,n=e._tweaker.value.argument;n||(n={}),[].push(b.call(e,t,i,n))}}function h(){if(this._tweaker.value&&this._tweaker.value.func&&(this._tweaker.value.module||this._tweaker.defaultModule)){var e=this._tweaker.value.module?this._tweaker.value.module:this._tweaker.defaultModule,t=this._tweaker.value.func?this._tweaker.value.func:this._tweaker.defaultFunction,i=this._tweaker.value.argument;[].push(b.call(this,e,t,i))}else"function"==typeof this._tweaker.value?this._tweaker.value(d(this)):this._tweaker.value&&this._tweaker.value.callback&&this._tweaker.value.callback()}var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{label:{defaultValue:"",type:"string"},icon:{defaultValue:"",type:"string"},count:{defaultValue:null,type:"string"},countLimit:{defaultValue:void 0,type:"number"},emphasize:{defaultValue:"secondary",type:"string"},mainElementDisabledFlag:{defaultValue:!1,type:"boolean"},defaultModule:{defaultValue:void 0,type:"string"},defaultFunction:{defaultValue:void 0,type:"string"},displayStyle:{defaultValue:"button",type:"string",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype._applyEmphasize=function(e){this.elements._viewModule&&this.elements._viewModule.setEmphasize&&this.elements._viewModule.setEmphasize(this.emphasize)},t.prototype._applyIcon=function(){this.elements._viewModule&&this.elements._viewModule.setIcon&&this.elements._viewModule.setIcon(this.icon)},t.prototype._applyCount=function(){this.elements._viewModule&&this.elements._viewModule.setCount&&this.elements._viewModule.setCount(this.count)},t.prototype._applyCountLimit=function(){this.elements._viewModule&&this.elements._viewModule.setCount&&this.elements._viewModule.setCount(this.count)},t.prototype._applyLabel=function(){this.elements._viewModule&&this.elements._viewModule.setLabel&&this.elements._viewModule.setLabel(this.label)},t.prototype._applyMainElementDisabledFlag=function(){this.elements._viewModule&&this.elements._viewModule.setMainElementDisabledFlag&&this.elements._viewModule.setMainElementDisabledFlag(this.mainElementDisabledFlag)},t.prototype._applyDefaultModule=function(){this.elements._viewModule&&this.elements._viewModule.setDefaultModule&&this.elements._viewModule.setDefaultModule(this.defaultModule)},t.prototype._applyDefaultFunction=function(){this.elements._viewModule&&this.elements._viewModule.setDefaultFunction&&this.elements._viewModule.setDefaultFunction(this.defaultFunction)},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("emphasize")&&this._applyEmphasize(t.emphasize),this.isDirty("label")&&this._applyLabel(),this.isDirty("icon")&&this._applyIcon(),this.isDirty("count")&&this._applyCount(),this.isDirty("countLimit")&&this._applyCount(),this.isDirty("value")&&this._applyValue(t.value,this.value),this.isDirty("mainElementDisabledFlag")&&this._applyMainElementDisabledFlag(),this.isDirty("defaultModule")&&this._applyDefaultModule(),this.isDirty("defaultFunction")&&this._applyDefaultFunction()},t}(o),w=function(e,t){o.prototype.baseViewModule.call(this,e,t)};n.applyMixin(w,o.prototype.baseViewModule),w.prototype.buildView=function(e){var t=this._options.viewOptions||{};t.touchMode=this._tweaker.touchMode,t.label=this._tweaker.label,t.icon=this._tweaker.icon,t.emphasize=this._tweaker.emphasize,t.disabled=this._tweaker.disabled,this._view=new a(t),this._view.getContent().addClassName("wux-tweaker-function")},w.prototype.setIcon=function(e){this._view&&(this._view.icon=e)},w.prototype.setLabel=function(e){this._view&&(this._view.label=e)},w.prototype.computeTweakerContentLength=function(){if(this._view){var e=this._view.getContent().style.width;this._view.getContent().setStyle("width","auto");var t=parseInt(window.getComputedStyle(this._view.getContent()).width);if(isNaN(t)){var i=this._view.getContent().getDimensions();t=i&&void 0!==i.minWidth?i.minWidth:0}return this._view.getContent().setStyle("width",e),Math.max(this._tweaker._getCurrentTouchMode()?38:24,t)}return this._parent()},w.prototype.setDisabled=function(e){this._view&&(this._view.disabled=e)},w.prototype.setEmphasize=function(e){this._view&&(this._view.emphasize=e)},w.prototype.setValue=function(e){},w.prototype.setDefaultFunction=function(e){this._view&&(this._view.value||(this._view.value={},this._view.value.action||(this._view.value.action={})),this._view.value.action.func=e)},w.prototype.setDefaultModule=function(e){this._view&&(this._view.value||(this._view.value={},this._view.value.action||(this._view.value.action={})),this._view.value.action.module=e)},w.prototype.isValueDisplayedAsString=function(e){return!1};var _=function(e,t){w.call(this,e,t)};n.applyMixin(_,w),_.prototype.buildView=function(){w.prototype.buildView.call(this),this._options.hasIcon&&(this._view.displayStyle="smartIcon")},_.prototype.handleEvents=function(){var e=this;this._view.addEventListener("buttonclick",(function(){c.call(e)}))},_.prototype.computeTweakerContentLength=function(){if(this._view){var e=0;if(this._view.showLabelFlag){var t=this._view.label,n=this._tweaker.getEditedState();e=i.computeStringWidth(t,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),n,n)}this._view.icon&&this._view.elements.iconPlaceholder&&(e+=this._view.elements.iconPlaceholder.offsetWidth);var o=getComputedStyle(this._view.getContent());return e+parseInt(o.paddingLeft)+parseInt(o.paddingRight)}return this._parent()};var f=function(e,t){w.call(this,e,t),this.elements={}};n.applyMixin(f,w),f.prototype.buildView=function(){var e,t=this;if(void 0!==this._tweaker.value){var i=this._tweaker._getEntryInPossibleValues(this._tweaker.value);i&&i.icon&&(e=i.icon)}this._view=new r({type:r.TYPE.STANDARD,showLabelFlag:!1,icon:e,onClick:function(){h.call(t)},touchMode:this._tweaker.touchMode,getExtendedView:this.getExtendedView.bind(this),mainElementDisabledFlag:this._isMainElementDisabled()}),this._view.getContent().addClassName("wux-tweaker-function")},f.prototype._isMainElementDisabled=function(){if(void 0!==this._tweaker.value){var e=this._tweaker._getEntryInPossibleValues(this._tweaker.value);return!(!e||!e.disabled)}},f.prototype.getExtendedView=function(){return{menuModel:this._getMenuItemsFromPossibleValues()}},f.prototype._getMenuItemsFromPossibleValues=function(){var e=this,t=[];if(this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues))for(var i=function(i){var o=n._tweaker.possibleValues[i].value,a=n._tweaker.possibleValues[i].icon,r=n._tweaker.possibleValues[i].label,s=n._tweaker.possibleValues[i].tooltip,l="object"==typeof n._tweaker.value&&n._tweaker.value.value?n._tweaker.value.value:n._tweaker.value,u=0===n._tweaker.compare(o,l)?"selected":"";n._tweaker.possibleValues[i].disabled&&(u+=u?"|disabled":"disabled"),t.push({type:"CheckItem",icon:a,title:r,state:u,tooltip:s,action:{callback:function(){e._tweaker.value=o,h.call(e)}}})},n=this,o=0;o<this._tweaker.possibleValues.length;o++)i(o);return t},f.prototype.setIcon=function(){},f.prototype.setTouchMode=function(){this._view.touchMode=this._tweaker.touchMode},f.prototype.setValue=function(){var e,t;if(void 0!==this._tweaker.value){var i=this._tweaker._getEntryInPossibleValues(this._tweaker.value);i&&i.icon&&(e=i.icon),i&&i.disabled&&(t=i.disabled)}this._view.icon=e,this._view.mainElementDisabledFlag=t},f.prototype.handleEvents=function(){};var v=function(e,t){w.call(this,e,t)};n.applyMixin(v,w),v.prototype.buildView=function(){var e=this._options.viewOptions||{};this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues)&&(e.elementsList=this._tweaker.possibleValues.map((function(e){return{value:e.value,label:e.label,icon:e.icon}}))),e.touchMode=this._tweaker.touchMode,e.enableSearchFlag=!1,e.actionOnClickFlag=!0,e.popupSizeAdjustPolicy=l.SizeAdjustPolicyEnum.AdjustToVisibleContents,this._view=new s(e),this.setValue(this._tweaker.value),this._view.getContent().addClassName("wux-tweaker-function")},v.prototype.computeTweakerContentLength=function(){var e=this._tweaker._getCurrentTouchMode()?54:31,t=i.computeStringWidth(this._view.label,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),this._tweaker.getEditedState())+e;this._view.elements.iconPlaceholder&&(this._view.elements.iconPlaceholder.offsetWidth>0&&(t=t+this._view.elements.iconPlaceholder.offsetWidth+11));return t},v.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._view;n&&t&&(i.addEventOnElement(t,n,"show",(function(e){e.stopPropagation(),t.onShow()})),i.addEventOnElement(t,n,"hide",(function(e){e.stopPropagation(),t.onHide({cancelFlag:!!e.options.cancelPopupSelection})})),i.addEventOnElement(t,n,"click",(function(i){i.stopPropagation(),e.setTweakerValue(n.value),c.call(e),t.onPostEdit()})))},v.prototype.setValue=function(e){var t=this._view;t&&(t.value=null==e?{}:e)},v.prototype.setLabel=function(e){},v.prototype.setPossibleValues=function(e){this._view&&e&&(this._view.elementsList=e.map((function(e){return{value:e.value,label:e.label,icon:e.icon}})))},v.prototype.setPlaceholder=function(e){this._view&&(this._view.placeholder=e)},v.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.reachablePlaceholderFlag=e)},v.prototype.setDefaultFunction=function(e){},v.prototype.setDefaultModule=function(e){};var g=function(e,t){w.call(this,e,t)};function m(){return this._tweaker&&this._tweaker.value&&this._tweaker.value.menu&&this._tweaker.value.menu.length>0&&(this._tweaker.value.func||this._tweaker.value.callback)}n.applyMixin(g,w),g.prototype.buildView=function(){var e=this;m.call(this)?(this._view=new r(Object.assign(this._options.viewOptions||{},{touchMode:this._tweaker.touchMode,label:this._tweaker.label,icon:this._tweaker.icon,emphasize:this._tweaker.emphasize,disabled:this._tweaker.disabled,type:r.TYPE.STANDARD,showLabelFlag:!1,getExtendedView:this.getExtendedView.bind(this),mainElementDisabledFlag:this._isMainElementDisabled(),onClick:function(t){t||h.call(e,t)}})),this._view.getContent().addClassName("wux-tweaker-function"),this._options.hasArrow=!1):w.prototype.buildView.call(this),this._view.getContent().addClassName("wux-tweaker-function-menu"),this._options.hasIcon&&(this._view.displayStyle="smartIcon"),!1!==this._options.hasArrow&&(this._view.arrowSpan=document.createElement("span"),this._view.arrowSpan.className="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-expand-down",this._options.hasIcon?(this._view.arrowSpan.classList.add("arrow-icon"),this._view.getContent().addClassName("arrow-icon")):(this._view.arrowSpan.classList.add("arrow"),this._view.getContent().style.paddingRight="0px")),this._options.viewOptions&&this._options.viewOptions.bigIcon?this._view.getContent().setAttribute("wux-ui-tweaker-big-icon",""):this._view.getContent().removeAttribute("wux-ui-tweaker-big-icon"),!0===this._options.hasCount&&(this._view.count=document.createElement("span"),this._view.count.className="wux-tweaker-function-counter",this._view.count.innerText=this.validateCount(this._tweaker.count),this._view.count.style.width=this._computeCountTextWidth(),this._view.getContent().addClassName("wux-tweaker-function-displaycount")),this.setLabel(this._tweaker.label)},g.prototype._isMainElementDisabled=function(){if(void 0!==this._tweaker.value)return!(!this._tweaker.value||!this._tweaker.value.disabled)},g.prototype._computeCountTextWidth=function(){if(void 0!==this._view.count.innerText)return 6*this._view.count.innerText.length+"px"},g.prototype.getExtendedView=function(){for(var e=[],t=[],i=0;i<this._tweaker.value.menu.length;i++){var n=this._tweaker.value.menu[i];n.action&&(n.action.module||n.action.callback||this._tweaker.defaultModule)&&(n.action={func:n.action&&n.action.func?n.action.func:this._tweaker.defaultFunction,module:n.action&&n.action.module?n.action.module:this._tweaker.defaultModule,callback:n.action&&n.action.callback,argument:n.action.argument,context:d(this)}),V.call(this,n,t),e.push(n)}return{menuModel:e}},g.prototype.setLabel=function(e){this._view&&(this._view.label=e,!0===this._options.hasCount&&this._view.getContent().appendChild(this._view.count),!1!==this._options.hasArrow&&this._view.getContent().appendChild(this._view.arrowSpan))},g.prototype.validateCount=function(e){var t,i=parseInt(e);return this._tweaker.countLimit?this._tweaker.countLimit>=0?t=this._tweaker.countLimit:-1===this._tweaker.countLimit&&(t=i+1):t=999,i?i>t?t+"+":i<0?"0":i.toString():""},g.prototype.setCount=function(e){this._view&&this._view.count&&(this._view.count.innerText=this.validateCount(e),this._view.count.style.width=this._computeCountTextWidth())},g.prototype.setMainElementDisabledFlag=function(e){this._view&&(this._view.mainElementDisabledFlag=e)},g.prototype.handleEvents=function(){var e=this,t=this._view;t.addEventListener("buttonclick",(function(i){var n=[],o=[],a=e._view.getContent().getBoundingClientRect();if(e._tweaker.value.action&&(e._tweaker.value.action.module||e._tweaker.defaultModule)){var r=e._tweaker.value&&e._tweaker.value.module?e._tweaker.value.module:e._tweaker.defaultModule,s=e._tweaker.value&&e._tweaker.value.func?e._tweaker.value.func:e._tweaker.defaultFunction,l=e._tweaker.value.argument;n.push(b.call(e,r,s,l))}else if(e._tweaker.value.menu&&e._tweaker.value.menu.length>0)e._tweaker.value.menu.forEach((function(t){if(t.action&&(t.action.module||e._tweaker.defaultModule)){var i=t.action&&t.action.module?t.action.module:e._tweaker.defaultModule,a=t.action&&t.action.func?t.action.func:e._tweaker.defaultFunction,r=t.action.argument,s=d(e);t.action={func:a,module:i,argument:r,context:s}}V.call(e,t,n),Promise.all(n).then((function(){o.push(t)})).catch((function(e){throw new Error("Issue with menu format")}))})),Promise.all(n).then((function(){u.show(o,{position:{x:a.left,y:a.top+a.height},forceTouchMode:e._tweaker._getCurrentTouchMode()},{onShow:function(){t._setDisplayingMenuFlag(!0)},onHide:function(){t._setDisplayingMenuFlag(!1)}}),e._tweaker.fire("show")})).catch((function(){throw new Error("Issue with menu format")}));else if(e._options.contextMenuFallback){var p=document.createEvent("HTMLEvents");p.initEvent("contextmenu",!0,!1),p.pageX=a.left+ +a.width/2,p.pageY=a.top+a.height,p.dispatchContext="ctxMenuClick",t.getContent().dispatchEvent(p)}}))};var b=function(e,t,i){var o=d(this);return n.attachSimpleCallback(e,t,i,o)},V=function(e,t){var i=this;if(e&&e.submenu&&Array.isArray(e.submenu)&&e.submenu.length>0){var n=i._tweaker.defaultModule,o=i._tweaker.defaultFunction,a=d(i);e.submenu.forEach((function(e){if(e.action&&(e.action.module||n)){var r=e.action.module?e.action.module:n,s=e.action.func?e.action.func:o,l=e.action.argument;e.action={func:s,module:r,argument:l,context:a},e&&e.submenu&&Array.isArray(e.submenu)&&e.submenu.length>0&&(e.action&&(e.action.func||(e.func=i._tweaker.defaultFunction),e.action.module||(e.module=i._tweaker.defaultModule)),V.call(i,e,t))}else e&&e.submenu&&Array.isArray(e.submenu)&&e.submenu.length>0&&V.call(i,e,t)}))}};return g.prototype.computeTweakerContentLength=function(){if(m.call(this))return w.prototype.computeTweakerContentLength.call(this);if(this._view){var e=0;if(this._view.showLabelFlag){var t=this._view.label,n=this._tweaker.getEditedState();e=i.computeStringWidth(t,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),n,n)}this._view.icon&&this._view.elements.iconPlaceholder&&(e+=this._view.elements.iconPlaceholder.offsetWidth);var o=getComputedStyle(this._view.getContent());return e+parseInt(o.paddingLeft)+parseInt(o.paddingRight)}return 0},y.prototype.baseViewModule=w,y.prototype.VIEW_MODULES={button_readOnly:{classObject:_},button:{classObject:_},button_hasPossibleValues:{classObject:v},button_hasPossibleValues_readOnly:{classObject:v},buttonIcon_readOnly:{classObject:_,options:{hasIcon:!0,viewOptions:{showLabelFlag:!1}}},buttonIcon:{classObject:_,options:{hasIcon:!0,viewOptions:{showLabelFlag:!1}}},buttonIcon_hasPossibleValues:{classObject:f},buttonIcon_hasPossibleValues_readOnly:{classObject:f},menu_readOnly:{classObject:g},menu:{classObject:g},menuIcon_readOnly:{classObject:g,options:{hasIcon:!0,viewOptions:{showLabelFlag:!1}}},menuIcon:{classObject:g,options:{hasIcon:!0,viewOptions:{showLabelFlag:!1}}},menuIconWithCount:{classObject:g,options:{hasIcon:!0,hasCount:!0,viewOptions:{showLabelFlag:!1}}},chevronMenuIcon:{classObject:g,options:{hasIcon:!0,hasArrow:!1,contextMenuFallback:!0,viewOptions:{bigIcon:!0,showLabelFlag:!1}}},chevronMenuIcon_readOnly:{classObject:g,options:{hasIcon:!0,hasArrow:!1,contextMenuFallback:!0,viewOptions:{bigIcon:!0,showLabelFlag:!1}}},threeDotsMenu:{classObject:g,options:{hasIcon:!0,hasArrow:!1,viewOptions:{showLabelFlag:!1}}}},y.prototype.registerViewModule=function(e,t){},p.addClass(y,"tweakerFunction"),y}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerImage",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Core/WebUXComponents","DS/Utilities/WUXUWAUtils"],(function(e,t,i,n,o,a,r,s){"use strict";var l=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return s.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"simple",type:"string",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype.getTweakerPadding=function(){return 0},t}(a),u=function(e,t){a.prototype.baseViewModule.call(this,e,t)};n.applyMixin(u,a.prototype.baseViewModule),u.prototype.isValueDisplayedAsString=function(e){return!1};var p=function(e,t){u.call(this,e,t)};return n.applyMixin(p,u),p.prototype.buildView=function(){this._tweaker.elements.container.addClassName("wux-tweakers-image"),this._view=i.createElement("img",{class:"wux-tweakers-image-img"}),this.setValue(this._tweaker.value)},p.prototype.setValue=function(e){this._view&&(e?(o.generateIcon(e,{target:this._view}),this._view.getParent()||this._view.inject(this._tweaker.elements.container)):this._view.remove())},p.prototype.handleEvents=function(){},p.prototype.destroy=function(){this._tweaker&&this._tweaker.elements.container&&this._tweaker.elements.container.removeClassName("wux-tweakers-image"),u.prototype.destroy.call(this)},p.prototype.computeTweakerContentLength=function(){var e=0;return this._view&&(e+=this._view.offsetWidth),e},l.prototype.baseViewModule=u,l.prototype.VIEW_MODULES={simple:{classObject:p},simple_readOnly:{classObject:p}},l.prototype.registerViewModule=function(e,t){},r.addClass(l,"tweakerImage"),l})),define("DS/Tweakers/TweakerBlob",["UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Controls/Button","i18n!DS/Tweakers/assets/nls/translation"],(function(e,t,i,n,o,a){"use strict";var r="No name";let s=n.inherit({name:"tweakerBlob",publishedProperties:{placeholder:{defaultValue:"",type:"string",category:"Appearance"},blob:{defaultValue:void 0,type:"object",category:"Model"},displayStyle:{defaultValue:"label",type:"string",category:"Appearance"}},_applyPlaceholder:function(){this.elements._viewModule&&this.elements._viewModule.setPlaceholder(this.placeholder)},_applyBlob:function(){var e=this;if(e.blob){var t=new FileReader;t.onloadend=function(t){e.value!==t.target.result&&(e.value=t.target.result)},t.readAsDataURL(e.blob)}this.elements._viewModule&&this.elements._viewModule.setBlob(this.blob)},_applyValue:function(){this.blob=this._dataURLtoBlob(this.value),this.onChange()},_applyDisabled:function(e){this._parent(),this.elements._viewModule&&this.elements._viewModule.setDisabled&&this.elements._viewModule.setDisabled(this.disabled)},_dataURLtoBlob:function(e){if(e){var t=e.split(","),i=t[0].match(/:(.*?);/);if(i&&!(i.length<2)){for(var n=t[0].match(/:(.*?);/)[1],o=atob(t[1]),a=o.length,r=new Uint8Array(a);a--;)r[a]=o.charCodeAt(a);return new Blob([r],{type:n})}}}});s.computeStringFromValue=function(e,t,i){return n.computeStringFromValue(e,t,i)},s.computeHeight=function(e,t,i){return n.computeHeight(e,t,i)};var l=function(e,t){n.prototype.baseViewModule.call(this,e,t)};t.applyMixin(l,n.prototype.baseViewModule),l.prototype.setBlob=function(){},l.prototype.setBlobName=function(){},l.prototype.setDisabled=function(){},l.prototype.setPlaceholder=function(){};var u=function(e,t){this._inlinedView=void 0,l.call(this,e,t)};t.applyMixin(u,l),u.prototype.buildView=function(){var t=this,i=t._tweaker,n=i._getCurrentTouchMode();i.elements.container.addClassName("wux-tweakers-blob");var a=e.createElement("div",{class:"wux-tweakers-blob-main"});t._inlinedView=e.createElement("div",{class:"wux-tweakers-blob-inlinedView"}),!0===n?t._inlinedView.setAttributeNode(document.createAttribute("touch-mode")):t._inlinedView.removeAttribute("touch-mode"),t._inlinedView._spanText=document.createElement("span"),t._inlinedView._spanText.classList.add("wux-tweakers-blob-span-text"),t._inlinedView._spanText.classList.add("wux-tweakers-blob-span-text-placeholder"),t._inlinedView._spanText.textContent=i.placeholder,t._inlinedView.appendChild(t._inlinedView._spanText),t._inlinedView._placeholderDnD=document.createElement("div"),t._inlinedView._placeholderDnD.className="wux-tweakers-blob-draggable-div",t._inlinedView._placeholderDnD.style.display="none",t._inlinedView.appendChild(t._inlinedView._placeholderDnD);var r=document.createElement("span");r.className="wux-ui-3ds wux-ui-3ds-doc-add wux-ui-3ds-lg wux-tweakers-blob-span",t._inlinedView._placeholderDnD.appendChild(r),t._inlinedView.inject(a),t._editBtn=new o({showLabelFlag:!1,icon:{iconName:"upload",iconSize:"1x",fontIconFamily:WUXManagedFontIcons.Font3DS},touchMode:n}),t._editBtn.getContent().addClassName("wux-tweakers-multirep-button"),t._editBtn.inject(a),t._editBtn._blobFinderInput=document.createElement("input"),t._editBtn._blobFinderInput.type="file",t._editBtn._blobFinderInput.title=" ",t._editBtn._blobFinderInput.className="wux-tweakers-blobFinder-input",this._updateInputTooltip(),t._editBtn.getContent().appendChild(t._editBtn._blobFinderInput),t._editBtn.getContent().addClassName("wux-tweakers-multirep-button-line-editor"),t._view=a,t.setBlob(this._tweaker.blob)},u.prototype.handleEvents=function(){var e=this,t=e._tweaker,n=e._view;function o(n){var o;n.stopPropagation(),n.dataTransfer?(n.preventDefault(),o=n.dataTransfer.files[0],t._blobName=n.dataTransfer.files[0].name,e._inlinedView.removeClassName("wux-tweakers-blob-ondragover"),e._inlinedView._placeholderDnD.style.display="none"):e._editBtn._blobFinderInput.files&&e._editBtn._blobFinderInput.files.length&&(o=e._editBtn._blobFinderInput.files[0],t._blobName=e._editBtn._blobFinderInput.files[0].name);var a=new FileReader;a.onloadend=function(n){t.value===n.target.result&&n.target.result?e.setBlob(t.blob):(i.pushUserInteractionContext(),e.setTweakerValue(n.target.result),e.setBlob(t.blob),i.popUserInteractionContext())},o&&a.readAsDataURL(o)}i.addEventOnElement(e,e._editBtn._blobFinderInput,"change",o),i.addEventOnElement(e,n,"dragover",(function(t){t.preventDefault(),e._inlinedView.addClassName("wux-tweakers-blob-ondragover"),e._inlinedView._placeholderDnD.style.display="block"})),i.addEventOnElement(e,n,"drop",o),i.addEventOnElement(e,n,"dragleave",(function(t){t.preventDefault(),e._inlinedView.removeClassName("wux-tweakers-blob-ondragover"),e._inlinedView._placeholderDnD.style.display="none"}))},u.prototype.setPlaceholder=function(e){this._view&&this._inlinedView&&this._inlinedView._spanText&&!this.blob&&(this._inlinedView._spanText.textContent=e,this._updateInputTooltip())},u.prototype.setBlob=function(e){this._view&&(this._tweaker.value&&this._tweaker.blob&&!this._tweaker._blobName?this._tweaker._blobName=r:this._tweaker.value||this._tweaker.blob||(this._tweaker._blobName=this._tweaker.placeholder,this._editBtn._blobFinderInput.value=""),this._inlinedView&&this._inlinedView._spanText&&(this._inlinedView._spanText.textContent=this._tweaker._blobName,this._updateInputTooltip()),this._inlinedView._spanText.textContent===this._tweaker.placeholder?this._inlinedView._spanText.classList.add("wux-tweakers-blob-span-text-placeholder"):this._inlinedView._spanText.classList.remove("wux-tweakers-blob-span-text-placeholder"))},u.prototype.setTouchMode=function(e){this._view&&(!0===e?this._inlinedView.setAttributeNode(document.createAttribute("touch-mode")):this._inlinedView.removeAttribute("touch-mode"),this._editBtn.touchMode=e)},u.prototype.setDisabled=function(e){this._view&&(!0===e?(this._inlinedView.setAttributeNode(document.createAttribute("disabled")),this._inlinedView.getAttributeNode("focused")&&this._inlinedView.removeAttribute("focused")):this._inlinedView.removeAttribute("disabled"),this._editBtn.disabled=e,this._view.style.pointerEvents=e?"none":"auto")},u.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.elements.container.removeClassName("wux-tweakers-blob"),this._inlinedView&&(this._inlinedView.remove(),this._inlinedView.destroy()),this._editBtn&&(this._editBtn.remove(),this._editBtn.destroy()),l.prototype.destroy.call(this)},u.prototype._updateInputTooltip=function(){let e;e=this._inlinedView._spanText.textContent!=this._tweaker.placeholder?this._inlinedView._spanText.textContent:a.get("inputNoFileChosen"),this._editBtn&&(void 0===this._editBtn.tooltipInfos?this._editBtn.tooltipInfos={shortHelp:e}:this._editBtn.tooltipInfos.shortHelp=e)};var p=function(e,t){l.call(this,e,t)};return t.applyMixin(p,l),p.prototype.buildView=function(){var e=this._tweaker,t=e.elements.container;t.addClassName("wux-tweakers-string-label"),t.addClassName("wux-tweakers-domleaf"),e.value&&!e._blobName&&(e._blobName=r),e._blobName&&(t.textContent=e._blobName)},p.prototype.setBlob=function(e){var t=this._tweaker,i=t.elements.container;this._tweaker.blob&&!this._tweaker._blobName?this._tweaker._blobName=r:this._tweaker.value||this._tweaker.blob||(this._tweaker._blobName=this._tweaker.placeholder),i.textContent=t._blobName},p.prototype.destroy=function(){this._tweaker.elements.container&&(this._tweaker.elements.container.textContent="",this._tweaker.elements.container.removeClassName("wux-tweakers-string-label"),this._tweaker.elements.container.removeClassName("wux-tweakers-domleaf")),l.prototype.destroy.call(this)},s.prototype.baseViewModule=l,s.prototype.VIEW_MODULES={readOnly:{classObject:p},label:{classObject:u}},s.prototype.registerViewModule=function(e,t){},s})),define("DS/Tweakers/TweakerTreeNodeModel",["UWA/Core","DS/Tweakers/TweakerBase","DS/Controls/Abstract","DS/Core/PointerEvents"],(function(e,t,i,n){"use strict";var o={};function a(t,i){var n=window.getComputedStyle(i,null).getPropertyValue("font-size"),o=parseFloat(n),a=new e.Element("span",{html:t,styles:{opacity:1,fontSize:o,padding:5}}).inject(i),r=a.getDimensions().width;return a.remove(),r}var r=i.inherit({name:"TweakerTreeNodeModel",publishedProperties:{value:{defaultValue:null,type:"object"},height:{defaultValue:38,type:"number"},readOnly:{defaultValue:!0,type:"boolean"}},_postBuildView:function(){this.elements.container.addClassName("wux-layouts-treeview-cell"),this.elements.layout=new e.Element("ul",{class:"wux-ui-stack-h",styles:{width:"inherit",height:this.height,display:"inline-block"}}).inject(this.elements.container),this.elements.linksContainer=new e.Element("li",{class:"wux-layouts-treeview-links"}).inject(this.elements.layout),this.elements.nodeContainer=new e.Element("li",{class:"wux-layouts-treeview-node"}).inject(this.elements.layout),this.elements.expanderContainer=new e.Element("li",{class:"wux-layouts-treeview-expander"}).inject(this.elements.nodeContainer),this.elements.iconsContainer=new e.Element("li",{class:"wux-layouts-treeview-icons"}).hide().inject(this.elements.nodeContainer),this.elements.badgeTopRight=new e.Element("li",{class:"wux-layouts-treeview-badge wux-layouts-treeview-badge-top-right"}).inject(this.elements.iconsContainer),this.elements.badgeTopLeft=new e.Element("li",{class:"wux-layouts-treeview-badge wux-layouts-treeview-badge-top-left"}).inject(this.elements.iconsContainer),this.elements.badgeBottomRight=new e.Element("li",{class:"wux-layouts-treeview-badge wux-layouts-treeview-badge-bottom-right"}).inject(this.elements.iconsContainer),this.elements.badgeBottomLeft=new e.Element("li",{class:"wux-layouts-treeview-badge wux-layouts-treeview-badge-bottom-left"}).inject(this.elements.iconsContainer),this.elements.labelContainer=new e.Element("li",{class:"wux-layouts-treeview-label"}).inject(this.elements.nodeContainer),this._observeEvents(),this._parent()},_applyValue:function(e){this.value&&this.value.options&&(this.setLabel(this.value.options.label),this.setIcons(this.value.options.icons),this._setExpanderState(this.value._expandState),this._setDepth(this.value._nodeDepth))},isInEditionMode:function(){return!this.disabled&&!this.readOnly},switchToReadView:function(){this.readOnly=!0},notifyModelUpdate:function(){this.value.notifyModelUpdate()},_applyReadOnly:function(e){this._parent(e),this.setLabel(this.value.options.label)},setLabel:function(t){var i=this;function n(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),i.elements.container.scrollLeft=0,!1}function o(e){i.isInEditionMode()&&(document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),e.target.value!==i.value.options.label&&(i.value.options.label=e.target.value,i.notifyModelUpdate(),i._applyProperties()),i.switchToReadView(),i.fire("change"))}if(this.isInEditionMode()){var r=i.getContent().getDimensions().width,s=new e.Element("input",{type:"text",value:t,tabindex:"-1",class:"wux-tree-label-input wux-ui-state-clearable",styles:{"box-sizing":"border-box"},events:{dragstart:function(e){e.preventDefault(),e.stopPropagation()},keypress:function(e){i.elements.container.scrollLeft=0},keydown:function(e){i.elements.container.scrollLeft=0;var t=a(this.value,i.elements.labelContainer)+20,n=r-l;n<0&&(n=0),this.style.width=Math.min(t,r-l-0)+"px",this.style.maxWidth=n+"px"},keyup:function(t){i.elements.container.scrollLeft=0,"return"===e.Event.whichKey(event)&&(o.call(this,event),i.switchToReadView())},change:function(e){},focusin:function(e){e.preventDefault()},focus:function(e){e.preventDefault(),e.stopPropagation()},blur:function(e){o(e)},click:function(e){e.stopPropagation(),this.offsetWidth-18<e.clientX-this.getBoundingClientRect().left&&(this.value=i.value.options.label,i.switchToReadView(),i._lastClickTime=Date.now())},mouseup:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()}}});i.elements.container.addEventListener("scroll",n,!0),l=i.elements.labelContainer.getPosition().x,i.elements.container.scrollLeft=0,setTimeout((function(){if(i._cellReadWriteView){i.elements.container.scrollLeft=0;var e=i.getContent().getDimensions().width,t=a(s.value,i.elements.labelContainer)+20;s.style.width=t+"px";var n=s.getPosition().x;s.style.maxWidth=e-n-0+"px",i._cellReadWriteView.setSelectionRange(0,i._cellReadWriteView.value.length)}}),1),s.setAttribute("size",s.value.length),this.elements.labelContainer.textContent="",this.elements.labelContainer.setContent(s),this._cellReadWriteView=s,s.focus()}else{var l;i.elements.container.removeEventListener("scroll",n),this.elements.labelContainer.setContent(t)}},setIcons:function(t){var i,n=this,o="";t instanceof Array&&(t&&t.length>0?(i=this._icons&&this._icons.length===t.length&&this._icons.every((function(e,i){return e===t[i]})))||(this._icons=e.clone(t),t&&t.forEach((function(e,t){o+=n.addIcon(e)}))):(i=this._icons&&this._icons.length===t.length&&this._icons.every((function(e,i){return e===t[i]})))||(this._icons=e.clone(t)));"string"==typeof t&&(o+=n.addIcon(t,"css")),i||(this.elements.iconsContainer.innerHTML=o),""!==o&&this.elements.iconsContainer.show()},select:function(){this._lastClickTime=Date.now(),this._parent()},addIcon:function(e,t){var i;if("css"===t)i='<div class="wux-layouts-treeview-icon" style="display:inline-flex;" wux-icon-name="'+e+'" ></div>';else i='<div class="wux-layouts-treeview-icon" style="display:inline-flex;background-image:url('+e+')"></div>';return i},_observeEvents:function(){var e=this;this.elements.expanderContainer.addEvent(n.POINTERUP,(function(t){if(t.stopPropagation(),1===t.which){var i=e.value;i.options.children&&"noExpandState"!==e._expandState&&"expandingState"!==e._expandState&&(i.isExpanded()&&"partiallyExpandedState"!==i._expandState?i.collapse():(e._setExpanderState("expandingState"),i.expand()))}}))},handleEvents:function(){},_setExpanderState:function(e){if(e){this.elements.expanderContainer.setAttribute("data-wux-state",{noExpandState:"noChildren",noExpandStateButCouldBeExpand:"noChildren",noExpandStateButCouldBeCollapse:"noChildren",expandingState:"expanding",partiallyExpandedState:"partiallyExpanded",collapseState:"expanded",expandState:"collapsed"}[e])}},_setDepth:function(e){var t=this.value;void 0===e&&(e=t.getParents().length);this.elements.container.setStyle("padding-left",20);var i,n,a,r,s="";for(i=0;i<e;i++)s=s+(n=(r=t.getNthParent(e-1-i))&&r.isLastChild()&&i<=e-2?"transparent":"")+(a=i===e-1&&t.isLastChild()?"50%":"100%");if(void 0===o[s]){var l="";for(i=0;i<e;i++)n=(r=t.getNthParent(e-1-i))&&r.isLastChild()&&i<=e-2?"border-color:transparent":"",a=i===e-1&&t.isLastChild()?"50%":"100%",l=l+'<li class="wux-layouts-treeview-link" data-parentislastchild="'+(t.getParent()&&t.getParent().isLastChild()&&i<=e-1?"true":"false")+'" data-islastchild="'+(t.isLastChild()?"true":"false")+'" data-depth="'+i+"/"+(e-1)+'" style="'+n+";height: "+a+";margin-right:"+(i===e-1?0:25)+"px;margin-left:"+(0===i?25:0)+'px"></li>';this.elements.linksContainer.innerHTML=l,o[s]=l,this.elements.linksContainer.inject(this.elements.layout,"top")}else this.elements.linksContainer.innerHTML=o[s];this.getContent().setAttribute("data-node-depth",e)}});return t.inherit({name:"TweakerTreeNodeModel",publishedProperties:{value:{defaultValue:null,type:"object"}},_postBuildView:function(){if(void 0!==this.elements.container){this.elements.internalView=new r;var e=this;this.elements.internalView.elements.labelContainer.addEventListener(n.POINTERUP,(function(){var t=0;if(void 0===e.elements.internalView._lastClickTime){e.elements.internalView._lastClickTime=Date.now();var i=e.value.getTreeDocument(),n=i.getXSO().onChange((function(){delete e.elements.internalView._lastClickTime,console.log("-"),i.getXSO()._modelEvents.unsubscribe(n)}))}else t=Date.now()-e.elements.internalView._lastClickTime;console.log(t,e.value.isSelected()),t>300&&(e.elements.internalView.readOnly=!1,e.elements.internalView._lastClickTime=void 0)})),this.elements.internalView.inject(this.elements.container)}this._parent()},_applyReadOnly:function(){}})})),define("DS/Tweakers/StringViewModules",["UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Controls/LineEditor","DS/Controls/Editor","DS/Controls/ColorPicker","DS/Controls/ComboBox","DS/Controls/ButtonGroup","DS/Controls/Button","DS/Controls/Label","DS/Controls/SelectionChipsEditor","DS/Controls/Toggle","DS/Utilities/KeyboardUtils","DS/Tweakers/TweakerUtils","DS/Menu/Menu"],(function(e,t,i,n,o,a,r,s,l,u,p,d,c,h,y,w){"use strict";function _(e,t){let i;switch(e){case"integer":return i=parseInt(t,10),isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"number":return i=parseFloat(t),isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"boolean":return null!==/true/i.exec(t)||"1"===t;case"string":return t?t.toString():"";case"object":return JSON.parse(t);default:return t}}function f(e,t){return"string"==typeof t?t:"object"===e?JSON.stringify(t):"integer"!==e&&"number"!==e||!(Number.isNan&&!0===Number.isNaN(t)||void 0!==isNaN&&!0===isNaN(t))?"integer"===e||"number"===e?t.toString():t:"NaN"}let v=function(e,t){n.prototype.baseViewModule.call(this,e,t)};t.applyMixin(v,n.prototype.baseViewModule),v.prototype.isValueDisplayedAsString=function(e){return"icon"!==e};let g=function(e,t){v.call(this,e,t)};t.applyMixin(g,v),g.prototype.buildView=function(){this._view=[],this._tweaker._updateInformationToDisplay(this._tweaker.value),this.setIcon(this._tweaker._currentValueIcon);let e=this._options.viewOptions||{};e.escapeHTML=this._tweaker.escapeHTML,e.touchMode=this._tweaker._getCurrentTouchMode(),e.disabled=this._tweaker.readOnly,e.placeholder=this._tweaker.placeholder,e.requiredFlag=this._tweaker.requiredFlag,e.selectAllOnFocus=!0,e.fireOnlyFromUIInteractionFlag=!0,e.autoCommitFlag=!0,e.pattern=this._tweaker.pattern,e.autoCorrectFlag=this._tweaker.autoCorrectFlag,e.displayClearFieldButtonFlag=this._tweaker.allowResetToUndefinedByUIFlag,this._editor=new o(e),this._view.push(this._editor),this._tweaker.viewOptions&&this.setViewOptions(this._tweaker.viewOptions),this.setValue(this._tweaker.value),this._updateValidState()},g.prototype.computeTweakerContentLength=function(){let e=0,t=this._tweaker.touchMode;this._icon&&!this._icon.isHidden()&&(e+=this._icon.offsetWidth),this._iconValidity&&!this._validityIcon.isHidden()&&(e+=this._validityIcon.offsetWidth),this._icon&&!this._icon.isHidden()&&this._validityIcon&&!this._validityIcon.isHidden()&&(e+=7),e+=7,e+=8,e+=this._tweaker.allowResetToUndefinedByUIFlag?t?37:21:6;let n=i.computeStringWidth(this._editor.value,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),this._tweaker.getEditedState())+e;return Math.max(n,t?130:100)},g.prototype.handleEvents=function(){let e=this,t=this._tweaker,n=this._editor;n&&t&&(i.addEventOnElement(t,n,"blur",(function(i){t.onPostEdit(),e._iconWasInvalidDuringModification=!1,e._updateValidState()})),i.addEventOnElement(t,n,"uncommittedChange",(function(i){i.stopPropagation(),e._preEditState||t.validState||(e._iconWasInvalidDuringModification=!0),t.onPreEdit()})),i.addEventOnElement(t,n,"clear",(function(){t.value=void 0})),n.elements.inputField&&(i.addEventOnElement(t,n.elements.inputField,"keydown",(function(i){i.keyCode===h.ESCAPE&&(t._cancelableValue&&t._cancelableValue!==t.value&&(i.actionPerformed=!0),e.latestKeydownEvent=i,t.onCancelEdit()),i.keyCode!==h.ENTER||i.ctrlKey||i.shiftKey||i.altKey||!t._liveChangeOccurred||(t.onChange(),e.latestKeydownEvent=i,i.actionPerformed=!0)})),i.addEventOnElement(t,n.elements.inputField,"keyup",(function(t){e.latestKeydownEvent&&(e.latestKeydownEvent.actionPerformed&&(t.actionPerformed=!0),e.latestKeydownEvent=void 0)}))),i.addEventOnElement(t,n,"change",(function(i){i.stopPropagation();let o,a=n.value;o=null==a?a:_.call(t,t.valueType,a),e.setTweakerValue(o)})))},g.prototype.setValue=function(e){let t=this._tweaker,i=this._editor;if(!i||!t)return;let n=this._options||{};i.value=null==e?e:f(t.valueType,e),"user"!==n.displayStyle||t._currentValueIcon||this.setIcon(t._currentValueIcon),this._updateValidState()},g.prototype.setIcon=function(t){if(!this._tweaker)return;let n=this._options||{};this._icon||!t&&"user"!==n.displayStyle||(this._icon=e.createElement("span",{class:this._tweaker._iconClassName}),this._view.splice(this._validityIcon?1:0,0,this._icon)),t?(this._icon.classList.remove("wux-user-icon"),this._icon.style.backgroundColor&&(this._icon.style.backgroundColor=null),this._icon.textContent="",this._tweaker._currentValueIcon=t,this._currentMode=1,i.generateIcon(this._tweaker._currentValueIcon,{target:this._icon,roundFlag:"user"===n.displayStyle}),this._icon.parentNode||this._icon.inject(this._tweaker.elements.container,"top"),this._validityIcon&&this._tweaker.elements.container.prepend(this._validityIcon),this._icon.show(),this._tweaker.elements.container.setAttribute("has-icon","")):this._tweaker&&"user"===n.displayStyle?(this._icon.className=this._tweaker._iconClassName,this._tweaker.icon={userName:this._tweaker.value?this._tweaker.value.label:""},i.generateIcon(this._tweaker.icon,{target:this._icon,roundFlag:!0}),this._icon.parentNode||this._icon.inject(this._tweaker.elements.container,"top"),this._icon.show(),this._tweaker.elements.container.setAttribute("has-icon","")):(this._icon&&this._destroyViewItem("_icon"),this._validityIcon&&!this._validityIcon.isHidden()||this._tweaker.elements.container.removeAttribute("has-icon"))},g.prototype._getElementToFocus=function(){return this._editor._getElementToFocus()},g.prototype._giveFocus=function(){this._editor&&this._editor._giveFocus()},g.prototype.setPlaceholder=function(e){this._editor&&(this._editor.placeholder=e)},g.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&n.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},g.prototype.removeHighlightModel=function(){n.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},g.prototype._shouldFormatHTMLValue=function(e){return n.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},g.prototype._cleanContainerProperties=function(){return n.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)},g.prototype._getLabelDivToConsiderForHighlight=function(){return y._getOrCreateFakeInputForFindHighlight(this._tweaker,this._editor,this._editor.elements.inputField)},g.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._editor&&(this._editor.displayClearFieldButtonFlag=e)},g.prototype.setPattern=function(e){this._editor&&(this._editor.pattern=e,this._updateValidState())},g.prototype.setRequiredFlag=function(e){this._editor&&(this._editor.requiredFlag=e,this._updateValidState())},g.prototype.setAutoCorrectFlag=function(e){this._editor&&(this._editor.autoCorrectFlag=e)},g.prototype._updateValidState=function(){let e=this._tweaker,t=e&&e.validState,n=e&&e.elements.container,o=this._editor&&this._editor.elements.container;o&&n&&(o.removeAttribute("with-validsign"),t?this._iconWasInvalidDuringModification&&this._validityIcon?(n.setAttribute("with-validsign",""),this._validityIcon.setValidityIconState("valid")):(n.removeAttribute("with-validsign"),this._validityIcon&&this._destroyViewItem("_validityIcon"),this._icon&&!this._icon.isHidden()||n.removeAttribute("has-icon")):(n.setAttribute("with-validsign",""),this._validityIcon||(this._validityIcon=i.generateValidityIcon({state:"invalid",getValidityReason:()=>e.validState?"fixed":e.requiredFlag&&!this._editor.valueToCommit?"required":"format"}),this._validityIcon.classList.add("wux-ui-3ds-lg"),this._validityIcon.classList.add("wux-tweakers-icon"),n.prepend(this._validityIcon),this._view.splice(0,0,this._validityIcon)),this._validityIcon.setValidityIconState("invalid"),n.setAttribute("has-icon","")))};const m={maxLength:-1};Object.freeze(m),g.prototype.setViewOptions=function(e){this._setViewOptionsOnAbstract(this._editor,e,m)},g.prototype.destroy=function(){v.prototype.destroy.call(this),delete this._editor,delete this._icon,delete this._validityIcon};let b=function(e,t){g.call(this,e,t)};t.applyMixin(b,g),b.prototype.buildView=function(){let e=this._options.viewOptions||{};e.escapeHTML=this._tweaker.escapeHTML,e.disabled=this._tweaker.readOnly,e.placeholder=this._tweaker.placeholder,e.requiredFlag=this._tweaker.requiredFlag,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,e.selectAllOnFocus=!0,e.autoCommitFlag=!0,e.nbRows=0,e.widthInCharNumber=0,this._editor=new a(e),this._view=this._editor,this._tweaker.getContent().addClassName("wux-tweakers-editor"),this.setValue(this._tweaker.value),this.setViewOptions(this._tweaker.viewOptions)},b.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.getContent().removeClassName("wux-tweakers-editor"),g.prototype.destroy.call(this)},b.prototype._getElementToFocus=function(){return this._view._getElementToFocus()},b.prototype._giveFocus=function(){this._view._giveFocus()},b.prototype._resetFocus=function(){this._view._resetFocus()},b.prototype.setValue=function(e){let t=this._view;t&&(t.value=e)},b.prototype.setHeight=function(e){return!!this._editor&&(this._editor.setHeight(e),!0)},b.prototype.setRequiredFlag=function(e){this._editor&&(this._editor.requiredFlag=e,this._updateValidState())};const V={resizableFlag:!1,newLineMode:"shiftEnter"};Object.freeze(V),b.prototype.setViewOptions=function(e){this._setViewOptionsOnAbstract(this._view,e,V)},b.prototype._updateValidState=function(){};let k=function(e,t){this._readOnlyInline=void 0,this._standardEditor=void 0,v.call(this,e,t)};t.applyMixin(k,v),k.prototype.buildView=function(){this._readOnlyInlineContainer=new e.createElement("div"),this._readOnlyInline=new n.prototype.VIEW_MODULES.readOnly.classObject(this._tweaker,{useCustomContainerDiv:this._readOnlyInlineContainer}),this._standardEditor=new b(this._tweaker,this._options),this._standardEditor.setViewOptions(this._tweaker.viewOptions),this._view=y._buildTweakerAggregateView(this._tweaker,{viewModule:this,inlined:this._readOnlyInlineContainer,extended:this._standardEditor},{overlapContainer:!0,getExtendedViewHeight:()=>"auto"}),this._view.getContent().addClassName("wux-tweakers-string-lineeditordots"),this._view.elements.openExtendedViewButton.getContent().addClassName("wux-tweakers-multirep-button-line-editor"),this.setValue(this._tweaker.value),this.setTouchMode(this._tweaker._getCurrentTouchMode()),this.updateReferenceValueLabel()},k.prototype._getElementToFocus=function(){return this._view.elements.openExtendedViewButton.getContent()},k.prototype._giveFocus=function(){this._view.elements.openExtendedViewButton.getContent().focus()},k.prototype.setTouchMode=function(e){this._view&&(!0===e?this._readOnlyInlineContainer.setAttributeNode(document.createAttribute("touch-mode")):this._readOnlyInlineContainer.removeAttribute("touch-mode"),!0===e?this._view.getContent().setAttributeNode(document.createAttribute("touch-mode")):this._view.getContent().removeAttribute("touch-mode"),this._readOnlyInline.setTouchMode(e),this._standardEditor.setTouchMode(e),this._view.touchMode=e)},k.prototype.setValue=function(e){let t=this._tweaker;if(!this._view||!t)return;let i=e;e&&(i=e.replace(/(\r\n|\n|\r)/gm," ")),this._readOnlyInline.setValue(i),this._standardEditor.setValue(e)},k.prototype.usesReferenceValueLabel=function(){return!0},k.prototype.updateReferenceValueLabel=function(){this._readOnlyInline._formatReferenceValue=function(e){return e.replace(/(\r\n|\n|\r)/gm," ")},this._readOnlyInline.updateReferenceValueLabel()},k.prototype.setHeight=function(e){return!!this._standardEditor&&(this._standardEditor.setHeight(e),!0)},k.prototype.setViewOptions=function(e){this._standardEditor&&this._standardEditor.setViewOptions(e)},k.prototype.destroy=function(){this._view&&this._view.getContent().remove(),this._readOnlyInlineContainer&&this._readOnlyInlineContainer.destroy(),this._readOnlyInline&&this._readOnlyInline.destroy(),this._standardEditor&&this._standardEditor.destroy(),this._view&&this._view.destroy(),delete this._view,i.removeAllEventsOnElement(this),v.prototype.destroy.call(this)};let C=function(e,t){this._standardEditor=void 0,v.call(this,e,t)};t.applyMixin(C,v),C.prototype.buildView=function(){this._readOnlyInlineContainer=new e.createElement("div"),this._readOnlyInline=new n.prototype.VIEW_MODULES.readOnly.classObject(this._tweaker,{useCustomContainerDiv:this._readOnlyInlineContainer});let t=new e.Element("div");t.addClassName("wux-tweakers-string-readonly-editor"),this._readOnlyStandard=new n.prototype.VIEW_MODULES.readOnly.classObject(this._tweaker,{useCustomContainerDiv:t}),this._view=y._buildTweakerAggregateView(this._tweaker,{inlined:this._readOnlyInlineContainer,extended:t},{overlapContainer:!0,hasButton:!1}),this._tweaker.getContent().addClassName("wux-tweakers-domleaf"),this.setValue(this._tweaker.value),this.setTouchMode(this._tweaker._getCurrentTouchMode()),this.updateReferenceValueLabel()},C.prototype.setTouchMode=function(e){this._view&&(!0===e?this._readOnlyInlineContainer.setAttributeNode(document.createAttribute("touch-mode")):this._readOnlyInlineContainer.removeAttribute("touch-mode"),this._view.touchMode=e,this._readOnlyInline.setTouchMode(e),this._readOnlyStandard.setTouchMode(e))},C.prototype.setValue=function(t){this._tweaker.escapeHTML&&t&&(t=e.String.escapeHTML(t));let i=t;t&&(i=t.replace(/(\r\n|\n|\r)/gm," ")),this._readOnlyInline.setValue(i),this._readOnlyStandard.setValue(t)},C.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&n.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},C.prototype.removeHighlightModel=function(){n.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},C.prototype._shouldFormatHTMLValue=function(e){return n.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},C.prototype._cleanContainerProperties=function(){return n.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)},C.prototype.usesReferenceValueLabel=function(){return!0},C.prototype.updateReferenceValueLabel=function(){this._readOnlyInline._formatReferenceValue=function(e){return e.replace(/(\r\n|\n|\r)/gm," ")},this._readOnlyInline.updateReferenceValueLabel()},C.prototype.destroy=function(){this._view&&this._view.getContent().remove(),this._readOnlyInlineContainer&&this._readOnlyInlineContainer.destroy(),this._readOnlyInline&&this._readOnlyInline.destroy(),this._readOnlyStandard&&this._readOnlyStandard.destroy(),this._view&&this._view.destroy(),delete this._view,v.prototype.destroy.call(this)},C.prototype._getLabelDivToConsiderForHighlight=function(){return this._tweaker?this._tweaker.elements.container:null};let O=function(e,t){v.call(this,e,t)};function T(e){return e.map((function(e,t){if("string"==typeof e)return e;if("object"==typeof e){const t=e.hasOwnProperty("label"),i=e.hasOwnProperty("value"),n=e.hasOwnProperty("description");let o={};return e.hasOwnProperty("icon")&&(o.icon=e.icon),i?o.value=e.value:t&&(o.value=e.label),t?o.label=e.label:i&&(o.label=e.value),n?o.description=e.description:t?o.description=e.label:i&&(o.description=e.value),o}}))}t.applyMixin(O,v),O.prototype.buildView=function(){let e=this._options.viewOptions||{};this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues)&&(e.elementsList=T(this._tweaker.possibleValues)),e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,e.reachablePlaceholderFlag=void 0===this._tweaker.value||this._tweaker.allowResetToUndefinedByUIFlag,e.placeholder=this._tweaker.placeholder,e.getMainElementCustomization=this._tweaker.getDisplayedInformation,this._view=new s(e),this.setValue(this._tweaker.value)},O.prototype.computeTweakerContentLength=function(){let e=this._tweaker.touchMode?54:31;let t=Math.max(i.computeStringWidth(this._view.label,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),this._tweaker.getEditedState()),50)+e;if(this._view.elements.iconPlaceholder){this._view.elements.iconPlaceholder.offsetWidth>0&&(t=t+this._view.elements.iconPlaceholder.offsetWidth+11)}return t},O.prototype.handleEvents=function(){let e=this,t=this._tweaker,n=this._view,o=!1;n&&t&&(i.addEventOnElement(t,n,"show",(function(e){e.stopPropagation(),t.onShow()})),i.addEventOnElement(t,n,"hide",(function(e){e.stopPropagation(),t.onHide({cancelFlag:Boolean(e.options.cancelPopupSelection)})})),i.addEventOnElement(t,n,"preselectionChange",(function(t){let i;t.stopPropagation(),i=n._getAllDescendants()[n.preselectedIndex].options.grid.valueItem,i||(i=n._getAllDescendants()[n.preselectedIndex].options.label),o=!0,e.setTweakerValue(i),o=!1})),i.addEventOnElement(t,n,"change",(function(i){i.stopPropagation(),o||(e.setTweakerValue(n.value),t.onPostEdit())})))},O.prototype.setValue=function(e){let t=this._view;t&&(t.value=null==e?void 0:e)},O.prototype.setPossibleValues=function(e){if(this._view&&e){let t=T(e);this._tweaker.isDirty("value")?this._view.setProperties({elementsList:t,value:this._tweaker.value}):this._view.elementsList=t}},O.prototype.setPlaceholder=function(e){this._view&&(this._view.placeholder=e)},O.prototype.setGetDisplayedInformation=function(e){this._view&&(this._view.getMainElementCustomization=e)},O.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.reachablePlaceholderFlag=void 0===this._tweaker.value||e)};let M=function(e,t){v.call(this,e,t)};t.applyMixin(M,v),M.prototype.buildView=function(){this._view=e.createElement("div",{class:"wux-tweakers-string-icon-view"}),this.setValue(this._tweaker.value),this.setTouchMode()},M.prototype.setTouchMode=function(){this._tweaker._getCurrentTouchMode()?this._view.setAttributeNode(document.createAttribute("touch-mode")):this._view.removeAttribute("touch-mode")},M.prototype.setEmphasize=function(e,t){n.prototype.VIEW_MODULES.readOnly.classObject.prototype.setEmphasize.call(this,e,t)},M.prototype.setBackgroundColor=function(e,t){n.prototype.VIEW_MODULES.readOnly.classObject.prototype.setBackgroundColor.call(this,e,t)},M.prototype.setValue=function(t,n){let o=this._view;if(!o)return;this._view.className="";let a=o.getChildren();if(void 0!==t)if(Array.isArray(t)){let n;if(this._view.addClassName("wux-tweakers-string-icons-view"),t.forEach(((t,r)=>{a&&a[r]?n=a[r]:(n=e.createElement("div",{class:"wux-tweakers-string-icon-view"}),n.inject(o)),i.generateIcon(t,{target:n})})),a=o.getChildren(),Array.isArray(a))for(let e=t.length;e<a.length;e++)a[e].remove()}else this._view.addClassName("wux-tweakers-string-icon-view"),i.generateIcon(t,{target:o});else o.hasClassName("wux-tweakers-string-icons-view")?(o.removeClassName("wux-tweakers-string-icons-view"),a.forEach((e=>{e.remove()}))):(o.removeClassName("wux-tweakers-string-icon-view"),i.cleanIcon(o))};let E=function(e,t){v.call(this,e,t)};t.applyMixin(E,v),E.prototype.buildView=function(){if(this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues)){let e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.label=this._tweaker.label,e.icon=this._tweaker.icon,e.emphasize=this._tweaker.emphasize,e.backgroundColor=this._tweaker.backgroundColor,e.disabled=this._tweaker.disabled,e.displayStyle="smartIcon",this._view=new u(e)}this.setValue(this._tweaker.value)},E.prototype.handleEvents=function(){const e=this;i.addEventOnElement(this._view,this._view,"buttonclick",(function(){const t=e._view.getContent().getBoundingClientRect(),i=e._getMenuItemsFromPossibleValues();w.show(i,{position:{x:t.left,y:t.top+t.height}},{onShow:()=>{e._view._setDisplayingMenuFlag(!0)},onHide:()=>{e&&e._view&&e._view._setDisplayingMenuFlag(!1)}})}))},E.prototype.setValue=function(e,t){let i=this._tweaker._getEntryInPossibleValues(e);"object"==typeof i.icon?this._view.icon=Object.assign({},i.icon):this._view.icon=i.icon},E.prototype._getMenuItemsFromPossibleValues=function(){let e=[];return this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues)&&this._tweaker.possibleValues.forEach((t=>{let i=t.value,n=t.icon,o=t.label,a=t.label,r=0===this._tweaker.compare(i,this._tweaker.value)?"selected":"";t.disabled&&(r+=(r?"|":"")+"disabled"),e.push({type:"CheckItem",icon:n,state:r,title:o,tooltip:a,action:{callback:()=>{this._tweaker.value=i}}})})),e},M.prototype.setPossibleValues=function(){this.setValue(this.tweaker.value)},M.prototype.setTouchMode=function(e){this._view&&(this._view.touchMode=e)};let S=function(e,t){this._controlType="button",t&&t.viewOptions&&"toggle"===t.viewOptions.controlType&&(this._controlType="toggle"),v.call(this,e,t)};t.applyMixin(S,v),S.prototype.buildView=function(){let e=this._options.viewOptions||{};e.disabled=this._tweaker.readOnly,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,this._view=new l(e),this.setAllowMultipleValuesFlag(this._tweaker.allowMultipleValuesFlag),this.setPossibleValues(this._tweaker.possibleValues),this.setValue(this._tweaker.value)},S.prototype.handleEvents=function(){let e=this._tweaker,t=this._view;i.addEventOnElement(e,t,"change",(i=>{i.stopPropagation();let n=e.allowMultipleValuesFlag?[...t.value]:t.value[0];this.setTweakerValue(n)}))},S.prototype.setPossibleValues=function(e){let t=this._tweaker,i=this._view;if(!i||!t)return;const n=i.getButtonCount();for(let e=0;e<n;e++){let e=i.getButton(0);i.removeChild(e),e.destroy()}if(e&&Array.isArray(e)){let n=u,o="radio";"toggle"===this._controlType&&(n=c,t.allowMultipleValuesFlag&&(o="checkbox")),e.forEach((function(e){if("string"==typeof e)i.addChild(new n({type:o,label:e,value:e}));else{let t=Object.assign({},e);t.type=o;const a=new n(t);e.description&&(a.tooltipInfos={shortHelp:t.description}),i.addChild(a)}}))}},S.prototype.setValue=function(e){let t=this._tweaker,i=this._view;i&&t&&(null==e||""===e?i.value=[]:t.allowMultipleValuesFlag&&Array.isArray(e)?i.value=[...e]:"string"==typeof e&&(i.value=[e]))},S.prototype.setAllowMultipleValuesFlag=function(e){this._view&&("button"===this._controlType?(this._view.type="radio",this._view.multiSelFlag=e):this._view.type=e?"checkbox":"radio")},S.prototype.computeTweakerContentLength=function(){let e=this._view;if(e)return e.getContent().offsetWidth};let x=function(e,t){v.call(this,e,t)};t.applyMixin(x,v),x.prototype.buildView=function(){let e=this._options.viewOptions||{};e.disabled=this._tweaker.readOnly,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,this._view=new r(e),this.setValue(this._tweaker.value)},x.prototype.handleEvents=function(){let e=this,t=this._tweaker,n=this._view;i.addEventOnElement(t,n,"show",(function(e){e.stopPropagation(),t.onShow()})),i.addEventOnElement(t,n,"hide",(function(e){e.stopPropagation(),t.onHide()})),i.addEventOnElement(t,n,"keydown",(function(e){e.keyCode===h.ESCAPE&&(t._cancelableValue&&t._cancelableValue!==t.value&&(e.actionPerformed=!0),t.onCancelEdit())})),i.addEventOnElement(t,n,"liveChange",(function(i){i.stopPropagation(),t.onPreEdit(),e.setTweakerValue(n.value)})),i.addEventOnElement(t,n,"change",(function(i){i.stopPropagation(),e.setTweakerValue(n.value),t.onPostEdit()}))},x.prototype.setValue=function(t){let i=this._tweaker,n=this._view;if(!n||!i)return;let o=t;i.readOnly&&i.escapeHTML&&t&&(o=e.String.escapeHTML(this.value),i._properties.value.value=o),n.value=f(this.valueType,o)};let F=function(e,t){v.call(this,e,t)};t.applyMixin(F,v),F.prototype.buildView=function(){this._tweaker.elements.container.addClassName("wux-tweakers-color-square"),this.setValue(this._tweaker.value)},F.prototype.destroy=function(){this._tweaker.elements.container&&(this._tweaker.elements.container.style.backgroundColor="",this._tweaker.elements.container.removeClassName("wux-tweakers-color-square")),v.prototype.destroy.call(this)},F.prototype.setValue=function(e){this._tweaker&&(this._tweaker.elements.container.style.backgroundColor="#"+e)},F.prototype.setTouchMode=function(){};let D=function(e,t){v.call(this,e,t)};function P(e,t){let i={value:e,icon:this._tweaker.icon?this._tweaker.icon:void 0,emphasize:this._tweaker.emphasize,backgroundColor:this._tweaker.backgroundColor};return void 0===t?(t=new p(i),this._tweaker.allowMultipleValuesFlag?Array.isArray(this._view)&&this._view.push(t):this._view=t):t.setProperties(i),t}function I(e,t,i){e&&(Array.isArray(e)?e:[e]).forEach((e=>{e[t]=i}))}t.applyMixin(D,v),D.prototype.buildView=function(){if(this._tweaker.elements.container.addClassName("wux-tweakers-label"),this._tweaker.allowMultipleValuesFlag){if(Array.isArray(this._tweaker.value)){this._view=[];for(let e=0;e<this._tweaker.value.length;e++)P.call(this,this._tweaker.value[e])}}else P.call(this,this._tweaker.value)},D.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.elements.container.removeClassName("wux-tweakers-label"),v.prototype.destroy.call(this)},D.prototype.setValue=function(e){if(this._tweaker&&this._view){if(Array.isArray(this._view)){let t=e&&Array.isArray(e)?e.length:0;for(let e=0;e<this._tweaker.value.length;e++)P.call(this,this._tweaker.value[e],this._view[e]);for(let e=t,i=this._view.length;e<i;++e)this._view[e].destroy();this._view.length=t}else this._view.value=e;this.inject(this._tweaker.elements.container)}},D.prototype.setAllowMultipleValuesFlag=function(e){if(this._view)if(Array.isArray(this._view)&&!e){for(let e=1,t=this._view.length;e<t;++e)this._view[e].destroy();this._view=this._view[0]}else!Array.isArray(this._view)&&e&&(this._view=[this._view])},D.prototype.setIcon=function(e){I(this._view,"icon",e)},D.prototype.setEmphasize=function(e,t){I(this._view,"emphasize",e)},D.prototype.setBackgroundColor=function(e,t){I(this._view,"backgroundColor",e)},D.prototype.setTouchMode=function(e){I(this._view,"touchMode",e)},D.prototype.computeTweakerContentLength=function(){if(!this._view)return 0;let e=0;return(Array.isArray(this._view)?this._view:[this._view]).forEach((t=>{e+=t.getContent().offsetWidth})),e};let L={};let A=function(e,t){v.call(this,e,t)};return t.applyMixin(A,v),A.prototype.buildView=function(){let t=this._tweaker;this._tweaker.elements.container.addClassName("wux-tweakers-selectionchipseditor");let n=this._options.viewOptions||{};n.placeholder=this._tweaker.placeholder;let o=[],a=this._tweaker.value;if(Array.isArray(a))for(let e=0,i=a.length;e<i;++e)o.push(t.getStringFromValue(a[e]));else o.push(t.getStringFromValue(a));n.value=o,n.disabled=this._tweaker.disabled,n.touchMode=this._tweaker._getCurrentTouchMode(),n.fireOnlyFromUIInteractionFlag=!0,this._viewInlined=e.createElement("div");let r=this;this._view=y._buildTweakerAggregateView(this._tweaker,{viewModule:this,inlined:this._viewInlined,getExtended:function(){return r._viewExtended||(r._viewExtended=new d(n),function(e){if(Object.keys(L).length)return;const t=e.getPublishedPropertiesDefaultValue();["maxLength","uniqueValue","customValidator","selection"].forEach((e=>{L[e]=t[e]})),Object.freeze(L)}(r._viewExtended),r._tweaker.viewOptions&&r.setViewOptions(r._tweaker.viewOptions),i.addEventOnElement(r,r._viewExtended,"change",(function(e){e.stopPropagation();let i=r._viewExtended.value;if(i&&Array.isArray(i)){let e=[];for(let n=0,o=i.length;n<o;++n){let o=y._getValueFromString(t.valueType,i[n]);void 0!==o&&e.push(o)}r.setTweakerValue(e)}})),i.addEventOnElement(r,r._viewExtended.getContent(),"keydown",(function(e){!e.actionPerformed||e.keyCode!==h.TAB&&e.keyCode!==h.ENTER&&e.keyCode!==h.ESCAPE||e.stopPropagation()}))),r._viewExtended}},{overlapContainer:!0,hasButton:!this._options.readOnly,getExtendedViewHeight:()=>"auto",onPopupDisplay:function(){r._view.elements.extendedViewContainer&&r._view.elements.extendedViewContainer.getContent().setStyle("min-height",r._view.getContent().offsetHeight),r._viewExtended&&r._viewExtended.focus({preventScroll:!0})}}),this._view.getContent().addClassName("wux-tweakers-string-lineeditordots"),this.setTouchMode(n.touchMode),this.setValue(n.value)},A.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.elements.container.removeClassName("wux-tweakers-selectionchipseditor"),this._viewInlined&&this._viewInlined.destroy(),delete this._viewInlined,this._viewExtended&&this._viewExtended.destroy(),delete this._viewExtended,v.prototype.destroy.call(this)},A.prototype.computeTweakerContentLength=function(){const e=this._tweaker;if(!e)return;let t=this._tweaker._getCurrentTouchMode()?68:37;const n=e.getStringFromValue(this._tweaker.value);return i.computeStringWidth(n,e.getFontSize(),e.getFontFamily(),e.getEditedState())+t},A.prototype.setValue=function(e){const t=this._tweaker;if(this._viewInlined&&(this._viewInlined.textContent=this._tweaker.getStringFromValue(e)),this._viewExtended){let i=[];if(Array.isArray(e))for(let n=0,o=e.length;n<o;++n)i.push(t.getStringFromValue(e[n]));else i.push(t.getStringFromValue(e));this._viewExtended.value=i}},A.prototype.setPlaceholder=function(e){this._viewExtended&&(this._viewExtended.placeholder=e)},A.prototype.setTouchMode=function(e){v.prototype.setTouchMode.call(this,e),!0===e?this._view.getContent().setAttributeNode(document.createAttribute("touch-mode")):this._view.getContent().removeAttribute("touch-mode"),this._viewExtended&&(this._viewExtended.touchMode=e)},A.prototype.setViewOptions=function(e,t){if(this._setViewOptionsOnAbstract(this._viewExtended,e,L),!this._viewInlined)return;let i=t&&t.multipleValuesSeparator;(e&&e.multipleValuesSeparator)!==i&&(this._viewInlined.textContent=this._tweaker.getStringFromValue(this._tweaker.value))},{Base:v,LineEditor:g,ComboBox:O,Icon:M,IconWithPossibleValues:E,ButtonGroup:S,ColorPicker:x,ColorSquare:F,Editor:b,LineEditorDotsEditor:k,StringDotsEditor:C,Label:D,SelectionChipsEditor:A}}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerBoolean",["require","exports","UWA/Core","DS/Tweakers/TweakerBase","DS/Tweakers/TweakerUtils","DS/Controls/Toggle","DS/Utilities/Dom","DS/Utilities/Utils","DS/Core/WebUXComponents","DS/Utilities/WUXUWAUtils","DS/Tweakers/StringViewModules"],(function(e,t,i,n,o,a,r,s,l,u,p){"use strict";var d=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return u.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{value:{defaultValue:!1,type:"boolean",advancedSetter:!0},valueType:{defaultValue:"boolean",type:"string"},displayStyle:{defaultValue:"checkbox",type:"string"},label:{defaultValue:"",type:"string"}}},enumerable:!1,configurable:!0}),t.prototype._upgradeValue=function(e){if(void 0===e)return e;if("boolean"==typeof e)return e;if("string"==typeof e&&(e.match(/^0+$/)||e.match(/^false$/i))||0===e)return!1;if("undefined"!==e){if(this.allowMultipleValuesFlag&&Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=this._upgradeValue(e[t]);return e}return Boolean(e)}},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("label")&&this._applyLabel(t.label)},t.prototype._applyLabel=function(e,t){this.elements._viewModule&&this.elements._viewModule.setLabel&&this.elements._viewModule.setLabel(this._properties.label.value,e)},t}(n);function c(e){var t=[{value:"checked",icon:"check"},{value:"unchecked",icon:"wrong"},{value:"checked_mixed",icon:"minus"},{value:"unchecked_mixed",icon:"minus"}];if(e)for(var i=0;i<e.length;i++)"true"===e[i].value||!0===e[i].value?t[0].icon=e[i].icon||"":"false"===e[i].value||!1===e[i].value?t[1].icon=e[i].icon||"":"undefined"!==e[i].value&&void 0!==e[i].value||(t[2].icon=e[i].icon||"",t[3].icon=e[i].icon||"");return t}var h=function(e,t){n.prototype.baseViewModule.call(this,e,t)};s.applyMixin(h,n.prototype.baseViewModule),h.prototype.isValueDisplayedAsString=function(e){return!1};var y=function(e,t){h.call(this,e,t)};s.applyMixin(y,h),y.prototype.buildView=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions.displayStyle;this._tweaker.getContent().classList.add("wux-tweakers-boolean","wux-tweakers-boolean-".concat(e.toLocaleLowerCase()));var t=this._options.viewOptions||{};t.type=e,t.touchMode=this._tweaker._getCurrentTouchMode(),t.fireOnlyFromUIInteractionFlag=!0,t.label=this._tweaker.label?this._tweaker.label:"","toggleIcon"===t.type&&(t.iconsReference=c.call(this,this._tweaker.possibleValues)),this._view=new a(t),"toggleIcon"===t.type&&this._view.getContent().addClassName("wux-ui-style-smartIcon"),this.setValue(this._tweaker.value)}},y.prototype.destroy=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions.displayStyle;this._tweaker.getContent().classList.remove("wux-tweakers-boolean","wux-tweakers-boolean-".concat(e.toLocaleLowerCase()))}h.prototype.destroy.call(this)},y.prototype.setPossibleValues=function(e){"toggleIcon"===this._options.viewOptions.displayStyle&&(this._view.iconsReference=c.call(this,e))},y.prototype.computeTweakerContentLength=function(){var e=0;if(this._tweaker.label){var t=this._tweaker.getEditedState();e=r.computeStringWidth(this._tweaker.label,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),t,t)}return(this._tweaker._getCurrentTouchMode()?22:14)+2*this._tweaker.getTweakerPadding()+e},y.prototype.handleEvents=function(){var e=this._view,t=this._tweaker,i=this;e.addEventListener("change",(function(n){n.stopPropagation(),t.allowResetToUndefinedByUIFlag&&!e.checkFlag&&t.value?(e.mixedState=!0,i.setTweakerValue(void 0)):i.setTweakerValue(e.checkFlag)}))},y.prototype.setValue=function(e,t){this._view&&(void 0===this._tweaker.value||null===this._tweaker.value?(this._view.mixedState=!0,this._view.checkFlag=!1):(this._view.mixedState=!1,this._view.checkFlag=this._tweaker.value))},y.prototype.setTouchMode=function(e,t){this._view&&(this._view.touchMode=e)},y.prototype.setLabel=function(e,t){this._view.label!==e&&(this._view.label=e||"")};var w=function(e,t){this._tweakerView=void 0,this._labelView=void 0,h.call(this,e,t)};s.applyMixin(w,h),w.prototype.buildView=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions.displayStyle;this._tweaker.getContent().classList.add("wux-tweakers-boolean","wux-tweakers-boolean-readonly","wux-tweakers-boolean-".concat(e.toLocaleLowerCase())),this._view=i.createElement("div"),this._tweakerView=i.createElement("div"),this._tweakerView.inject(this._view),this.setTouchMode(this._tweaker._getCurrentTouchMode()),this.setValue(this._tweaker.value),this.setLabel(this._tweaker.label)}},w.prototype.destroy=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions.displayStyle;this._tweaker.getContent().classList.remove("wux-tweakers-boolean","wux-tweakers-boolean-readonly","wux-tweakers-boolean-".concat(e.toLocaleLowerCase()))}h.prototype.destroy.call(this)},w.prototype.setValue=function(e,t){if(this._view){this._tweaker._updateInformationToDisplay(e);var i=this._tweaker._currentValueIcon;void 0===i&&(i=void 0===this._tweaker.value||null===this._tweaker.value?"minus":this._tweaker.value?"check":"wrong"),r.generateIcon(i,{target:this._tweakerView})}},w.prototype.setTouchMode=function(e,t){this._view&&(e?this._view.setAttributeNode(document.createAttribute("touch-mode")):this._view.removeAttribute("touch-mode"))},w.prototype.computeTweakerContentLength=function(){return this._tweaker._getCurrentTouchMode()?19:14},w.prototype.setLabel=function(e,t){if(this._labelView&&!e)return this._labelView=void 0,void this._view.removeChild(this._view.querySelector("label"));!this._labelView&&e&&(this._labelView=i.createElement("label",{class:"wux-label"}),this._labelView.inject(this._view)),this._labelView&&this._labelView.innerText!==e&&(this._labelView.innerText=e)},d.prototype.baseViewModule=h;return d.prototype.VIEW_MODULES={switch:{classObject:y,options:{viewOptions:{displayStyle:"switch"}}},readOnly:{classObject:w,options:{viewOptions:{displayStyle:"switch"}}},checkbox:{classObject:y,options:{viewOptions:{displayStyle:"checkbox"}}},checkbox_allowMultipleValues:{classObject:p.SelectionChipsEditor,options:{viewOptions:{customValidator:function(e){return"string"==typeof e&&void 0!==o._getValueFromString("boolean",e)?e:void 0}}}},checkbox_allowMultipleValues_readOnly:{classObject:n.prototype.VIEW_MODULES.readOnly.classObject},radio:{classObject:y,options:{viewOptions:{displayStyle:"radio"}}},toggleIcon_readOnly:{classObject:w,options:{viewOptions:{readOnly:!0,displayStyle:"toggleIcon"}}},toggleIcon:{classObject:y,options:{viewOptions:{displayStyle:"toggleIcon"}}}},d.prototype.registerViewModule=function(e,t){},l.addClass(d,"TweakerBoolean"),d}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerLayout",["require","exports","DS/Tweakers/TweakerBase","DS/Tweakers/StringViewModules","DS/Core/WebUXComponents","DS/Utilities/WUXUWAUtils","DS/Utilities/Utils"],(function(e,t,i,n,o,a,r){"use strict";var s=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return a.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"layoutModes",type:"string"}}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(t){e.prototype._preBuildView.call(this,t),this.elements.container.addClassName("wux-tweakers-layout")},t.prototype._upgradeValue=function(e){if(null==e||"string"==typeof e||"object"==typeof e)return e},t.prototype._preEditValue=function(t,i){if(r.isObject(i)&&i.value){var n=e.prototype._preEditValue.call(this,t,i.value);return r.isObject(n)&&n.validValue?n:{validValue:i.value}}return e.prototype._preEditValue.call(this,t,i)},t.prototype._getEntryInPossibleValues=function(e){for(var t,i=0;i<this.possibleValues.length;i++){var n=this.possibleValues[i],o=e,a=n.value;if(0===this.compare(this._upgradeValue(a),o)||0===this.compare(a,o)){t=n;break}}return t},t}(i),l=function(e,t){n.IconWithPossibleValues.call(this,e,t)};return r.applyMixin(l,n.IconWithPossibleValues),l.prototype.setValue=function(e,t){var i=this._tweaker._getEntryInPossibleValues(e);void 0!==i&&("object"==typeof i.icon?this._view.icon=Object.assign({},i.icon):this._view.icon=i.icon)},l.prototype._getMenuItemsFromPossibleValues=function(){var e=this,t=[];return this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues)&&this._tweaker.possibleValues.forEach((function(i){var n=0===e._tweaker.compare(i.value,e._tweaker.value)?"selected":"";t.push({type:"CheckItem",icon:i.icon,state:n,title:i.label,tooltip:i.tooltip||i.label,action:{callback:function(){e._tweaker.value=i.value}}})})),t},s.prototype.baseViewModule=n.Base,s.prototype.VIEW_MODULES={layoutModes:{classObject:n.Icon},layoutModes_hasPossibleValues:{classObject:l}},s.prototype.registerViewModule=function(e,t){},o.addClass(s,"TweakerLayout"),s}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerRange",["require","exports","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Core/WebUXComponents"],(function(e,t,i,n,o){"use strict";var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{stepValue:{defaultValue:void 0,type:"number"}}},enumerable:!1,configurable:!0}),t.prototype._applyStepValue=function(e){this.elements._viewModule&&this.elements._viewModule.setStepValue?this.elements._viewModule.setStepValue(this.stepValue):void 0!==this.elements.internalView&&(this.elements.internalView.stepValue=this.stepValue)},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("stepValue")&&this._applyStepValue(t.stepValue)},t}(n),r=function(e,t){n.prototype.baseViewModule.call(this,e,t)};return i.applyMixin(r,n.prototype.baseViewModule),r.prototype.setStepValue=function(e){this._view&&(this._view.stepValue=e)},a.prototype.baseViewModule=r,a.prototype.VIEW_MODULES={},a.prototype.registerViewModule=function(e,t){},o.addClass(a,"TweakerRange"),a}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerVector",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerRange","DS/Controls/SpinBox","DS/Core/WebUXComponents"],(function(e,t,i,n,o,a,r){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{units:{defaultValue:"",type:"string",category:"Appearance"},definition:{defaultValue:["x","y"],type:"array",category:"Model"},value:{defaultValue:void 0,type:"array",category:"Model",advancedSetter:!0},stepValue:{defaultValue:.1,type:"number"},displayStyle:{defaultValue:"spinBoxes",type:"string",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(t){e.prototype._preBuildView.call(this,t),this.elements.container.addClassName("wux-tweakers-vector-view")},t.prototype._upgradeValue=function(e){if(null==e)return e;var t=e;if(e instanceof Array)t=e;else if("string"==typeof e)try{t=JSON.parse(e)}catch(i){t=n.upgradeValueAsNumber(e)}else t=n.upgradeValueAsNumber(e);if(void 0===t)return this.value;t instanceof Array||(t=[t]);for(var o=this.definition.length,a=i.clone(t),r=a.length,s=0;a.length<o;++s)a.push(a[s%r]);return a.length=o,a.forEach((function(e,t){a[t]=n.upgradeValueAsNumber(e)})),a},t.prototype.compare=function(e,t){if(void 0===e&&void 0!==t)return 2;if(void 0!==e&&void 0===t)return-2;if(void 0===e&&void 0===t)return 0;for(var i=0,n=0;n<e.length;n++)i+=e[n]*e[n];var o=0;for(n=0;n<t.length;n++)o+=t[n]*t[n];return i===o?0:i<o?-1:1},t.prototype._applyUnits=function(){this.elements._viewModule&&this.elements._viewModule.setUnits(this.units)},t.prototype._applyDefinition=function(e){this.value=this._upgradeValue(this.value),this.elements._viewModule&&this.elements._viewModule.setDefinition(this.definition,e)},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t);var i=!(this.isDirty("displayStyle")||this.isDirty("readOnly"));i&&this.isDirty("definition")&&this._applyDefinition(t.definition),i&&this.isDirty("units")&&this._applyUnits()},t}(o),l=function(e,t){o.prototype.baseViewModule.call(this,e,t)};n.applyMixin(l,o.prototype.baseViewModule),l.prototype.setUnits=function(e){},l.prototype.setDefinition=function(e){};var u=function(e,t){this._labelsDiv=[],this._spinBoxes=[],l.call(this,e,t)};return n.applyMixin(u,l),u.prototype.buildView=function(){this.setDefinition(this._tweaker.definition)},u.prototype.handleEvents=function(){},u.prototype.destroy=function(){this._labelsDiv.forEach((function(e){e.remove()})),this._labelsDiv=[],this._spinBoxes.forEach((function(e){e.remove(),e.destroy()})),this._spinBoxes=[]},u.prototype.setValue=function(e){var t=e||[];this._updateFromAPI=!0;for(var i=0;i<t.length&&i<this._spinBoxes.length;i++)this._spinBoxes[i].value=t[i];for(;i<this._spinBoxes.length;i++)this._spinBoxes[i].value=void 0},u.prototype.setTouchMode=function(e){this._spinBoxes.forEach((function(t){t.touchMode=e}))},u.prototype.setUnits=function(e){this._spinBoxes.forEach((function(t){t.units=e}))},u.prototype.setStepValue=function(e){this._spinBoxes.forEach((function(t){t.stepValue=e}))},u.prototype.setDefinition=function(e,t){var n=this._tweaker,o=n.getContent(),r=t?t.length:0,s=e.length-r;if(s>0){var l=this._options.viewOptions||{};l.stepValue=n.stepValue,l.touchMode=n._getCurrentTouchMode(),l.units=n.units,l.fireOnlyFromUIInteractionFlag=!0;for(var u=n.value||[],p=0;p<s;p++){var d=i.createElement("label",{class:"wux-tweakers-vector-label",tabindex:-1});d.inject(o),this._labelsDiv.push(d),l.value=r+p<u.length?u[r+p]:void 0;var c=new a(l);c.getContent().addClassName("wux-tweakers-vector-spinBox"),c._indexToModify=r+p,c.addEventListener("change",(function(e){e.stopPropagation(),n.value||(n._properties.value.value=Array.apply(void 0,Array(n.definition.length))),n.value.length>e.dsModel._indexToModify&&(n.value[e.dsModel._indexToModify]=e.dsModel.value),n._applyValue()})),c.addEventListener("beginEdit",(function(e){e.stopPropagation(),n.onPreEdit(null,"beginEdit")})),c.addEventListener("uncommittedChange",(function(e){e.stopPropagation()})),c.addEventListener("endEdit",(function(e){e.stopPropagation(),n.onPostEdit(null,"endEdit")})),c.inject(o),this._spinBoxes.push(c)}}else if(s<0){s*=-1,this._labelsDiv.splice(e.length,s).forEach((function(e){e.remove()})),this._spinBoxes.splice(e.length,s).forEach((function(e){e.remove(),e.destroy()}))}this._labelsDiv.forEach((function(t,i){var n=e[i];t.textContent=n||""}))},s.prototype.baseViewModule=l,s.prototype.VIEW_MODULES={readOnly:{classObject:u,options:{viewOptions:{disabled:!0}}},spinBoxes:{classObject:u}},r.addClass(s,"TweakerVector"),s}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerString",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Tweakers/StringViewModules","DS/Core/WebUXComponents","DS/Utilities/WUXUWAUtils"],(function(e,t,i,n,o,a,r,s){"use strict";function l(e){return null==e||"string"==typeof e?e:n.equalsToNaN(e)?this?this.value:void 0:"object"!=typeof e||Array.isArray(e)||e instanceof Date?String(e):void 0!==e.iconName&&void 0!==e.fontIconFamily?e:JSON.stringify(e,(function(e,t){return""!==e&&"object"==typeof t?t.toString():t}))}function u(e,t){return!e||"string"!=typeof e||Boolean(e.match("^(?:"+t+")$"))}var p=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return s.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"lineEditor",type:"string"},value:{defaultValue:"",type:"string",advancedSetter:!0},placeholder:{defaultValue:"",type:"string"},pattern:{defaultValue:"",type:"string",category:"Behavior"},requiredFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},autoCorrectFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},minLengthBeforeSearch:{defaultValue:0,type:"integer",category:"Behavior"},typeDelayBeforeSearch:{defaultValue:500,type:"integer",category:"Behavior"},keepSearchResultsFlag:{defaultValue:!0,type:"boolean",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){e.prototype.buildView.call(this),this.elements.container.addClassName("wux-tweakers-string")},t.prototype._applyProperties=function(t){this.isDirty("pattern")&&!this.isDirty("value")&&this._updateValidState(),e.prototype._applyProperties.call(this,t),this.isDirty("minLengthBeforeSearch")&&this._applyMinLengthBeforeSearch(t.minLengthBeforeSearch),this.isDirty("typeDelayBeforeSearch")&&this._applyTypeDelayBeforeSearch(t.typeDelayBeforeSearch),this.isDirty("keepSearchResultsFlag")&&this._applyKeepSearchResultsFlag(t.keepSearchResultsFlag)},t.prototype._applyMinLengthBeforeSearch=function(e){this.elements._viewModule&&this.elements._viewModule.setMinLengthBeforeSearch&&this.elements._viewModule.setMinLengthBeforeSearch(this.minLengthBeforeSearch)},t.prototype._applyTypeDelayBeforeSearch=function(e){this.elements._viewModule&&this.elements._viewModule.setTypeDelayBeforeSearch&&this.elements._viewModule.setTypeDelayBeforeSearch(this.typeDelayBeforeSearch)},t.prototype._applyKeepSearchResultsFlag=function(e){this.elements._viewModule&&this.elements._viewModule.setKeepSearchResultsFlag&&this.elements._viewModule.setKeepSearchResultsFlag(this.keepSearchResultsFlag)},t.prototype._applyPattern=function(e){this._updateValidState(),this.readOnly&&this.elements._viewModule.formatHTMLValue?this.elements._viewModule.formatHTMLValue(this.value):this.elements._viewModule&&this.elements._viewModule.setPattern&&this.elements._viewModule.setPattern(this.pattern)},t.prototype._applyRequiredFlag=function(e){this._updateValidState(),this.elements._viewModule&&this.elements._viewModule.setRequiredFlag&&this.elements._viewModule.setRequiredFlag(this.requiredFlag)},t.computeStringFromValue=function(t,i,n){return t?Array.isArray(t)?e.computeStringFromValue.call(this,t,i,n):l(t):""},t.prototype._upgradeValue=function(e){if(!this.allowMultipleValuesFlag||!Array.isArray(e)){if("string"!=typeof e&&"icon"!==this.valueType)return l.call(this,e);if(this.escapeHTML)return i.String.escapeHTML(e)}return e},t.prototype._isValueValid=function(e){var t=this.pattern;if(t)if("string"==typeof e){if(!u(e,t))return!1}else if(Array.isArray(e))for(var i=0,n=e.length;i<n;++i)if("string"==typeof e[i]&&!u(e[i],t))return!1;if(this.requiredFlag){if("string"==typeof e&&""===e)return!1;if(Array.isArray(e)&&0===e.length)return!1;if(!e)return!1}return!0},t.prototype._getValidityReason=function(){var e="fixed";return this.validState||(this.requiredFlag&&(!this.value||Array.isArray(this.value)&&!this.value.length)?e="required":this.pattern&&(e="format")),e},t}(o);return p.prototype.baseViewModule=a.Base,p.prototype.VIEW_MODULES={lineEditor:{classObject:a.LineEditor},lineEditor_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteViewModuleTweakerString"},lineEditor_hasPossibleValues_allowMultipleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString"},lineEditor_allowMultipleValues:{classObject:a.SelectionChipsEditor},password:{classObject:a.LineEditor,options:{viewOptions:{displayStyle:"password"}}},password_readOnly:{classObject:a.LineEditor,options:{viewOptions:{displayStyle:"password"}}},link:{classObject:a.LineEditor},link_readOnly:{classObject:o.prototype.VIEW_MODULES.readOnly.classObject,options:{hyperlink:1}},combo:{classObject:a.ComboBox,options:{viewOptions:{enableSearchFlag:!1,actionOnClickFlag:!1}}},icon:{classObject:a.Icon},icon_hasPossibleValues:{classObject:a.IconWithPossibleValues},icon_readOnly:{classObject:a.Icon},buttonGroup:{classObject:a.ButtonGroup},buttonGroup_readOnly:{classObject:a.ButtonGroup},toggleGroup:{classObject:a.ButtonGroup,options:{viewOptions:{controlType:"toggle"}}},color:{classObject:a.ColorPicker},color_readOnly:{classObject:a.ColorSquare},editor_readOnly:{classObject:o.prototype.VIEW_MODULES.readOnly.classObject,options:{wrap:1}},editor:{classObject:a.Editor},editorInline:{classObject:a.LineEditorDotsEditor,wrappedView:"editor"},editorInline_readOnly:{classObject:a.StringDotsEditor,wrappedView:"editor_readOnly"},editor2Inline:{classObject:a.LineEditorDotsEditor,options:{viewOptions:{displayPopupOnCreation:!0}}},editor2Inline_readOnly:{classObject:o.prototype.VIEW_MODULES.readOnly.classObject},editorVerticallyResizable:{classObject:a.Editor,options:{viewOptions:{resizableFlag:"vertical"}}},editorVerticallyResizableInline:{classObject:a.LineEditorDotsEditor,options:{viewOptions:{resizableFlag:"vertical"}}},tag:{classObject:a.LineEditor},tag_readOnly:{classObject:a.Label},tag_allowMultipleValues:{classObject:a.SelectionChipsEditor},tag_allowMultipleValues_readOnly:{classObject:a.Label}},p.prototype.registerViewModule=function(e,t){},r.addClass(p,"TweakerString"),p}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerColor",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerString","DS/Controls/ColorPicker","DS/Controls/ColorChooser","DS/Controls/ColorCanvas","DS/Utilities/KeyboardUtils","DS/Utilities/Dom","DS/Utilities/Color","DS/Core/WebUXComponents"],(function(e,t,i,n,o,a,r,s,l,u,p,d){"use strict";var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{value:{defaultValue:"ffffff",type:"string",advancedSetter:!0},valueType:{defaultValue:"color",type:"string"},displayStyle:{defaultValue:"colorpicker",type:"string"},showAlphaFlag:{defaultValue:!1,type:"boolean"}}},enumerable:!1,configurable:!0}),t.prototype._applyValue=function(t,i){return this.showAlphaFlag?this.value=p.addAlphaComponentToHex(i):this.value=p.removeAlphaComponentFromHex(i),e.prototype._applyValue.call(this,t,this.value)},t.prototype._upgradeValue=function(e){return n.upgradeValueAsColor.call(this,e)},t}(o),h=function(e,t){o.prototype.baseViewModule.call(this,e,t)};n.applyMixin(h,o.prototype.baseViewModule),h.prototype.computeTweakerContentLength=function(){return this._tweaker._getCurrentTouchMode()?38:22},h.prototype.isValueDisplayedAsString=function(e){return!1};var y=function(e,t){h.call(this,e,t)};n.applyMixin(y,h),y.prototype.buildView=function(){this._tweaker.elements.container.addClassName("wux-tweakers-color-square"),this.setValue(this._tweaker.value)},y.prototype.destroy=function(){this._tweaker.elements.container&&(this._tweaker.elements.container.style.backgroundColor="",this._tweaker.elements.container.removeClassName("wux-tweakers-color-square"))},y.prototype.setValue=function(e){var t=this._tweaker;t&&("string"==typeof e&&"#"===e.charAt(0)&&(e=e.substr(1)),t.elements.container.style.backgroundColor=e?"#"+e:"")},y.prototype.setTouchMode=function(e){};var w=function(e,t){h.call(this,e,t)};n.applyMixin(w,h),w.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.value=this._tweaker.value,e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,e.showAlphaFlag=this._tweaker.showAlphaFlag,this._view=new a(e),this._tweaker.elements.container.addClassName("wux-tweakers-color")},w.prototype.destroy=function(){this._view&&(this._view.popupVisibleFlag=!1),h.prototype.destroy.call(this)},w.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view,n=!1;i.addEventListener("show",(function(e){!n&&i.elements._popup&&(i.elements._popup.addEventListener("beginEdit",(function(e){e.stopPropagation()})),n=!0),e.stopPropagation(),t.onShow()})),i.addEventListener("hide",(function(e){e.stopPropagation(),t.onHide(e.options)})),i.addEventListener("change",(function(t){t.stopPropagation(),e.setTweakerValue(i.value)})),i.addEventListener("liveChange",(function(t){t.stopPropagation(),e.setTweakerValue(i.value)})),u.addEventOnElement(this,i,"keydown",(function(e){e.keyCode===l.ESCAPE&&t.onCancelEdit()}))},w.prototype.setValue=function(e){var t=this._view;t&&("string"==typeof e&&"#"===e.charAt(0)&&(e=e.substr(1)),t.value=e)};var _=function(e,t){h.call(this,e,t)};n.applyMixin(_,h),_.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.value=this._tweaker.value,e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,e.showAlphaFlag=this._tweaker.showAlphaFlag,this._view=new r(e),this._tweaker.value!==this._view.value&&(this._tweaker.value=this._view.value)},_.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i.addEventListener("beginEdit",(function(e){e.stopPropagation(),t.onPreEdit()})),i.addEventListener("endEdit",(function(e){e.stopPropagation(),t.onPostEdit()})),i.addEventListener("change",(function(t){t.stopPropagation(),e.setTweakerValue(i.value)})),u.addEventOnElement(this,i,"keydown",(function(e){e.keyCode===l.ESCAPE&&t.onCancelEdit()}))},_.prototype.setValue=function(e){var t=this._tweaker,i=this._view;i&&t&&("string"==typeof e&&"#"===e.charAt(0)&&(e=e.substr(1)),i.value=e,i.value!==e&&(t.value=i.value))};var f=function(e,t){h.call(this,e,t)};n.applyMixin(f,h),f.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.value=this._tweaker.value,e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,this._view=new s(e)},f.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i.addEventListener("beginEdit",(function(e){e.stopPropagation(),t.onPreEdit()})),i.addEventListener("endEdit",(function(e){e.stopPropagation(),t.onPostEdit()})),i.addEventListener("change",(function(t){t.stopPropagation(),e.setTweakerValue(i.value)})),u.addEventOnElement(this,i,"keydown",(function(e){e.keyCode===l.ESCAPE&&t.onCancelEdit()}))},f.prototype.setValue=function(e){var t=this._view;t&&("string"==typeof e&&"#"===e.charAt(0)&&(e=e.substr(1)),t.value=e)};var v=function(e,t){h.call(this,e,t)};return n.applyMixin(v,h),v.prototype.buildView=function(){this._view=i.createElement("div",{class:"wux-tweakers-color-colorbar"});var e=this._options.viewOptions||{};e.handleEditionCancel=!1,this._colorPickerVM=new w(this._tweaker,e),this._colorPickerVM._view.inject(this._view),this._colorCanvasVM=new f(this._tweaker,e),this._colorCanvasVM._view.inject(this._view)},v.prototype.handleEvents=function(){var e=this,t=this._tweaker;t.addEventListener("show",(function(t){e._colorCanvasVM._view.elements._pickerCursor.hide()})),t.addEventListener("hide",(function(t){e._colorCanvasVM._view.elements._pickerCursor.show()}))},v.prototype.setValue=function(e){var t=this._tweaker;if(this._view&&t){t.disableEvents();var i=!1;this._colorPickerVM.setValue(e),i=i||this._colorPickerVM._updateFromView,this._colorCanvasVM.setValue(e),i=i||this._colorCanvasVM._updateFromView,t.enableEvents()}},v.prototype.setTouchMode=function(e){this._colorCanvasVM.setTouchMode(e),this._colorPickerVM.setTouchMode(e)},v.prototype.destroy=function(){this._colorPickerVM.destroy(),this._colorCanvasVM.destroy(),h.prototype.destroy.call(this)},c.prototype.baseViewModule=h,c.prototype.VIEW_MODULES={readOnly:{classObject:y},colorpicker:{classObject:w},std_readOnly:{classObject:y},std:{classObject:_},colorBar_readOnly:{classObject:y},colorBar:{classObject:v},canvas:{classObject:f}},c.prototype.registerViewModule=function(e,t){},d.addClass(c,"TweakerColor"),c}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerMultiRep",["require","exports","UWA/Core","DS/Core/PointerEvents","DS/Tweakers/TweakerBase","DS/Tweakers/TweakerString","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/Popup","DS/Utilities/Dom","DS/Core/WebUXComponents"],(function(e,t,i,n,o,a,r,s,l,u,p){"use strict";function d(e){e.stopPropagation(),this.editor&&(this.lastEditor=this.editor),"dialog"===this.augmentedDisplay?(this._dialog||(this._popup&&this._popup.destroy(),this._dialog=this._buildDialog()),this._dialog.visibleFlag=!0):(this._dialog&&this._dialog.destroy(),!this._popup&&this.elements.editBtn&&(this._popup=this._buildPopup(this.elements.editBtn),this._popup.preferredHeight=176,this.elements.editBtn._popup=this._popup),this._popup.getContent().setStyle("width",this.internalTweakerString.getContent().offsetWidth+this.elements.editBtn.getContent().offsetWidth+"px"),this._popup._updateView(),this._popup.toggle())}var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"inline",type:"string"},liveChangeFlag:{defaultValue:!1,type:"boolean"}}},enumerable:!1,configurable:!0}),t.prototype._preEditValue=function(e,t){return!0},t.prototype._postBuildView=function(){switch(this.displayStyle){case"inline":this._buildInlineEditor();break;case"std":this._buildStdEditor()}this._preEditValue(null,this.value)&&this._applyValue(null,this.value),this._applyReadOnly(null)},t.prototype._applyValue=function(e,t){switch(this.displayStyle){case"inline":this._applyValueInline(),this.editor&&!i.equals(this.value,this.editor.value)&&("dialog"===this.augmentedDisplay?this.editor.value=this._copyValueForDialog():void 0!==this.value&&null!==this.value&&(this.editor.value=this.value)),this._manageEditButtonVisibility();break;case"std":this._applyValueStd()}},t.prototype._applyValueInline=function(){},t.prototype._applyTouchMode=function(t){e.prototype._applyTouchMode.call(this),this.elements.editBtn&&(this.elements.editBtn.touchMode=this.touchMode),this.internalTweakerString&&(this.internalTweakerString.touchMode=this.touchMode)},t.prototype._applyDialogOptions=function(){if(this._dialog){this._dialog.title=this.dialogOptions.title,this._dialog.icon=this.dialogOptions.icon,this._dialog.width=this.dialogOptions.width,this._dialog.height=this.dialogOptions.height;var e=y.call(this,this.getContent());e&&e.modalFlag&&(this.dialogOptions.modalFlag=!0),this._dialog.modalFlag=this.dialogOptions.modalFlag}},t.prototype._applyValueStd=function(){this.elements.internalView&&(this.elements.internalView.value=this.value)},t.prototype._applyReadOnly=function(t){switch(this.displayStyle){case"inline":this.internalTweakerString&&(this.internalTweakerString.readOnly=this.readOnly,this.readOnly&&this.elements.editBtn?this.elements.editBtn.getContent().removeClassName("wux-tweakers-multirep-button-line-editor"):this.elements.editBtn.getContent().addClassName("wux-tweakers-multirep-button-line-editor"),this._manageEditButtonVisibility()),this.editor&&(this.editor.readOnly=this.readOnly);break;case"std":e.prototype._applyReadOnly.call(this,t)}},t.prototype._buildInlineEditor=function(){var e=this;this.elements.internalView&&(u.removeEventOnElement(this,this.elements.editBtn,"click",d.bind(e)),this.elements.editBtn.destroy(),this.elements.internalView.remove()),this.elements.internalView=i.createElement("div"),this.elements.internalView.addClassName("wux-tweakers-multirep wux-tweakers-multirep-inline-editor"),this.internalTweakerString=new a({readOnly:this.readOnly,touchMode:this.touchMode}),this.internalTweakerString.inject(this.elements.internalView),this.elements.internalView.inject(this.elements.container),this.internalTweakerString.getContent().addClassName("wux-tweakers-multirep-tweakerstring"),this.internalTweakerString.getContent().addEventListener("change",(function(t){if(t.stopPropagation(),(!e._dialog||!e._dialog.visibleFlag)&&(e.editor&&e.editor._changeOptions&&(e._changeOptions=e.editor._changeOptions),e._processValueFromString(e.internalTweakerString.value),e._preEditValue(null,e.value)))if(e._applyValue(e.value,e.value),e._popup&&e._popup.visibleFlag)"[]"!==e.internalTweakerString.value&&JSON.stringify(e._changeOptions)!==e.internalTweakerString.value&&e.fire("liveChange",e._changeOptions);else if(!e._popup||e._popup&&!e._popup.visibleFlag){if(e._lockUI)return;e.fire("change",e._changeOptions)}})),this.elements.editBtn=new r({label:"...",touchMode:this.touchMode}),this.elements.editBtn.getContent().addClassName("wux-tweakers-multirep-button"),u.addEventOnElement(this,this.elements.editBtn,"click",d.bind(e)),this.elements.editBtn.inject(this.elements.internalView),this._manageEditButtonVisibility()},t.prototype._manageEditButtonVisibility=function(){var e=this;if(this.elements.editBtn){this._checkOnNodeRendered=!1;var t=!0;this.readOnly&&(void 0===this.value||null===this.value||Array.isArray(this.value)&&0===this.value.length||"object"==typeof this.value&&0===Object.keys(this.value).length?t=!1:this.internalTweakerString&&(this.getContent().isConnected?this.internalTweakerString.computeContentSize()<this.getContent().offsetWidth&&(t=!1):(this._checkOnNodeRendered=!0,this._onNodeRenderedCBSet||(this._onNodeRenderedCBSet=!0,this.elements.editBtn.getContent().setStyle("visibility","hidden"),u.onNodeRendered(this.getContent(),(function(){e._onNodeRenderedCBSet=!1,e._checkOnNodeRendered?(e.elements.editBtn.visibleFlag=e.internalTweakerString.computeContentSize()>e.getContent().offsetWidth,e.elements.editBtn.getContent().setStyle("visibility","visible")):e.elements.editBtn.getContent().setStyle("visibility","visible")}),{once:!0}))))),this.elements.editBtn.visibleFlag=t}},t.prototype._processValueFromString=function(e){},t.prototype._processValueFromCopy=function(e){console.log("Override the method _processValueFromCopy of the TweakerMultirep to correctly manage the update of the value"),this.value=e},t.prototype._copyValueForDialog=function(){return console.log("Override the method _copyValueForDialog of the TweakerMultirep to correctly manage the update of the value"),this.value},t.prototype._buildStdEditor=function(){},t.prototype._buildEditor=function(e){},t.prototype._buildDialog=function(){var e=this;e.editor=e._buildEditor({displayStyle:"std",value:e._copyValueForDialog(),readOnly:e.readOnly,valueType:e.valueType,liveChangeFlag:e.liveChangeFlag});var t=function(t){e._dialog.visibleFlag=!1,e.editor&&(e._dialog.destroy(),e._dialog=void 0),e.fire("cancelEdit")},i=new s({title:e.dialogOptions.title?e.dialogOptions.title:e.editorTitle,icon:e.dialogOptions.icon,content:e.editor,resizableFlag:!0,height:e.dialogOptions.height?e.dialogOptions.height:240,width:e.dialogOptions.width?e.dialogOptions.width:200,identifier:e.dialogOptions.identifier?e.dialogOptions.identifier:"",buttons:{Ok:new r({onClick:function(t){var i=e.value;e.editor&&(e._processValueFromCopy(e.editor.value),e._applyValue()),t.dsModel.dialog.visibleFlag=!1,i=JSON.stringify(i,(function(e,t){return void 0===t?null:t}));var n=JSON.stringify(e.editor.value,(function(e,t){return void 0===t?null:t}));e.editor&&(e._dialog.destroy(),e._dialog=void 0),i!==n&&e.fire("change",e.value)}}),Cancel:new r({onClick:t})},autoCloseFlag:!1});i.addEventListener("close",t);var n=h.call(this,e.getContent());n?n.addWindow(i):document.body&&(i.inject(document.body),i.getContent().setStyle("z-index","1000"));var o=y.call(this,e.getContent());if(o&&o.modalFlag&&(e.dialogOptions.modalFlag=!0),i.modalFlag=e.dialogOptions.modalFlag,!n){var a=e.getContent().getParent(".wux-controls-popup");a&&i.getContent().parentElement.setStyle("z-index",(parseInt(a.getStyle("zIndex"))+1).toString())}return i.position={at:"center center",my:"center center"},e._dialog=i,(e.value&&Array.isArray(e.value)&&0===e.value.length||!e.value||null===e.value)&&e._placeholderView?e._placeholderView():e.elements._placeholder&&(e.elements._placeholder.style.display="none"),e._dialog.addEventListener("change",(function(e){e.stopPropagation()})),i},t.prototype._buildPopup=function(e){var t=this;t.editor=t._buildEditor({displayStyle:"std",value:t.value,readOnly:t.readOnly,valueType:t.valueType}),t.editor&&t.editor.addEventListener("change",(function(e){e.stopPropagation(),t.editorInitialValue=t.editor.value,e.stopPropagation(),t._popup&&t._popup.visibleFlag?t.value!==t.editor.value?t.value=t.editor.value:t.fire("liveChange",t.editor._changeOptions):(!t._popup||t._popup&&!t._popup.visibleFlag)&&(t.value!==t.editor.value?t.value=t.editor.value:t.fire("change",t.editor._changeOptions))}));var i=this.name?this.name.toLowerCase().replace("tweaker",""):void 0,o="wux-controls-popup wux-controls-popup-tweaker-multi-rep";i&&(o=o+" wux-controls-popup-tweaker-"+i);var a=new l({target:e,position:"bottom",alignment:"far",className:o,constraint:"screen"});function r(e){!a.visibleFlag||a.isElementInside(e.target)||t.elements.editBtn&&t.elements.editBtn.getContent().contains(e.target)||(a.hide(),document.body.removeEventListener(n.POINTERDOWN,r))}function s(e){e.target===window&&(a.hide(),document.body.removeEventListener(n.POINTERDOWN,r))}return a.preferredHeight=176,a.getContent().setStyle("width",t.internalTweakerString.getContent().offsetWidth+t.elements.editBtn.getContent().offsetWidth-parseInt(a.getContent().getStyle("padding-right"))-parseInt(a.getContent().getStyle("padding-left"))+"px"),u.addEventOnElement(this,a,"show",(function(e){if(e.target&&e.target.dsModel===a){if(t.value)try{t.initialValue=JSON.parse(JSON.stringify(t.value))}catch(e){t.initialValue=void 0}if(t._applyValue(),t._applyValueStd(),t._popup.getBody()){var i=t._popup.getBody().doc;i&&t.doc&&i.getChildren()!==t.doc.getChildren()?(i=t.doc,t.value&&Array.isArray(t.value)&&0===t.value.length||!t.value||null===t.value?t._placeholderView.call(t):(t.elements._placeholder&&(t.elements._placeholder.style.display="none"),a.setBody(t.editor))):i||(t.value&&Array.isArray(t.value)&&0===t.value.length||!t.value||null===t.value?t._placeholderView():(t.elements._placeholder&&(t.elements._placeholder.style.display="none"),a.setBody(t.editor)))}u.addEventOnElement(a,document.body,n.POINTERDOWN,r),t.internalTweakerString.getContent().addEventListener("focus",r),t.editor&&t.editor._applyDisplayRowIndexes&&t.editor._applyDisplayRowIndexes(),u.addEventOnElement(a,window,"blur",s,!0)}})),u.addEventOnElement(this,a,"hide",(function(e){u.removeEventOnElement(a,window,"blur",s,!0),t._applyValueInline(),(t.value&&t.initialValue&&JSON.stringify(t.value)!==JSON.stringify(t.initialValue)||!t.initialValue&&t.value)&&t.fire("change")})),a.setBody(t.editor),a},t.prototype._applyDisplayRowIndexes=function(){},t.prototype._applyProperties=function(e){this.isDirty("value")&&this._preEditValue(e.value,this.value)&&this._applyValue(e.value,this.value),this.isDirty("dialogOptions")&&this._applyDialogOptions(),this.isDirty("readOnly")&&this._applyReadOnly(e.readOnly),this.isDirty("touchMode")&&this._applyTouchMode(e.touchMode)},t}(o);function h(e){var t=e.getParent(".wux-windows-immersive-frame");if(t)return t.dsModel;var i=e.getParent(".wux-controls-popup");return i?h(i.dsModel.target.getContent()):null}function y(e){var t=e.getParent(".wux-windows-window");if(t)return t.dsModel;var i=e.getParent(".wux-controls-popup");return i?y(i.dsModel.target.getContent()):null}return p.addClass(c,"TweakerMultiRep"),c}));var __awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}l((n=n.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var i,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=s(0),r.throw=s(1),r.return=s(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};define("DS/Tweakers/URLObjectViewModules",["require","exports","DS/Tweakers/TweakerBase","./StringViewModules","UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Core/PointerEvents","DS/Controls/LineEditor","DS/Controls/Button"],(function(e,t,i,n,o,a,r,s,l,u){"use strict";var p="wux-tweakers-string-pipe",d=function(e,t){i.prototype.baseViewModule.call(this,e,t)};a.applyMixin(d,i.prototype.baseViewModule),d.prototype.setHyperLinkTarget=function(){};var c=function(e,t){n.LineEditor.call(this,e,t)};a.applyMixin(c,n.LineEditor),c.prototype.buildView=function(){if(this._tweaker){var e=this._tweaker.value,t=e?e.icon:void 0;this._tweaker._currentValueIcon=t,n.LineEditor.prototype.buildView.call(this),this._tweaker.elements.container&&this._tweaker.getContent().addClassName("wux-tweakers-urlobject")}},c.prototype.setValue=function(e){if(this._tweaker){var t=e?e.label:"",i=e?e.icon:void 0;this._tweaker._currentValueIcon=i,n.LineEditor.prototype.setValue.call(this,t),this.setIcon(i)}},c.prototype.setTweakerValue=function(e){if(this._tweaker){var t=Object.assign({},this._tweaker.value);t.label=e,n.LineEditor.prototype.setTweakerValue.call(this,t)}},c.prototype.setHyperLinkTarget=function(){};var h=function(e,t){n.Editor.call(this,e,t)};a.applyMixin(h,n.Editor),h.prototype.buildView=function(){if(this._tweaker){var e=this._tweaker.value,t=e?e.icon:void 0;this._tweaker._currentValueIcon=t,n.Editor.prototype.buildView.call(this),this._tweaker.elements.container&&this._tweaker.getContent().addClassName("wux-tweakers-urlobject")}},h.prototype.setValue=function(e){if(this._tweaker){var t=e?e.label:"",i=e?e.icon:void 0;this._tweaker._currentValueIcon=i,n.Editor.prototype.setValue.call(this,t)}},h.prototype.setTweakerValue=function(e){if(this._tweaker){var t=Object.assign({},this._tweaker.value);t.label=e,n.Editor.prototype.setTweakerValue.call(this,t)}},h.prototype.setHyperLinkTarget=function(){};var y=function(e,t){this.hyperlinkTargets=[],this._container=(null==t?void 0:t.useCustomContainerDiv)||e.elements.container,d.call(this,e,t)};a.applyMixin(y,d),y.prototype.buildView=function(){this._container&&(this._initViewElements(),this.setValue(this._tweaker.value),this.setTouchMode(this._tweaker.touchMode),this.setHyperLinkTarget(this.hyperlinkTargets&&this.hyperlinkTargets.length>0&&this.hyperlinkTargets||this._tweaker.hyperlinkTargets&&this._tweaker.hyperlinkTargets.length>0&&this._tweaker.hyperlinkTargets||this._tweaker.hyperlinkTarget),this._tweaker.highlightModel&&this.setHighlightModel(this._tweaker.highlightModel),this._options&&!0===this._options.wrap&&this._container.setAttribute("wrap",""))},y.prototype._initViewElements=function(){this._view=[],this._container.classList.add("wux-tweakers-urlobject"),this._mainIcons=[],this._labels=[],this._pipes=[]},y.prototype.setValue=function(e){for(var t,i,n,a,s,l=this,u=Array.isArray(e)?e:void 0===e?[]:[e],d=u.length;d<this._pipes.length;d++)this._pipes&&this._pipes[d]&&this._pipes[d].hide();var c="|";this._tweaker.viewOptions&&(c=this._tweaker.viewOptions.multipleValuesSeparator||c),u.forEach((function(e,u){t=e?e.url:void 0,i=e?e.parameters:void 0,n=e?e.icon:void 0,a=e?e.label:"",s=e?e.func:void 0,u>0&&(l._pipes[u]?l._pipes&&l._pipes[u]&&l._pipes[u].show():(l._pipes[u]=o.createElement("span",{text:c,class:p}),l._view.push(l._pipes[u]))),l._mainIcons[u]?r.cleanIcon(l._mainIcons[u]):(l._mainIcons[u]=o.createElement("span",{class:l._tweaker._iconClassName}),l._view.push(l._mainIcons[u]));var d=l._options&&"user"===l._options.displayStyle;!n&&d&&(n={userName:a});var h=r.generateIcon(n,{target:l._mainIcons[u],roundFlag:d});l._mainIcons[u].setStyle("display",h?"":"none"),h?(l._mainIcons[u].show(),l._container.setAttribute("has-icon","")):(l._mainIcons[u].hide(),l._container.removeAttribute("has-icon","")),l._labels[u]||(l._labels[u]=o.createElement("a",{class:"wux-tweakers-string-label"}),l._view.push(l._labels[u])),l._tweaker.highlightModel||(l._labels[u].textContent=a),l._labels[u].show(),t?(l._labels[u].href=t+(i||""),!e.target||l.hyperlinkTarget&&e.target===l.hyperlinkTargets[u]||(l.hyperlinkTargets[u]=e.target)):l._labels[u].removeAttribute("href"),s?l._labels[u].setAttribute("has-function",""):l._labels[u].removeAttribute("has-function")}));for(d=u.length;d<this._labels.length;d++)this._mainIcons[d].hide(),this._labels[d].hide(),this._pipes[d]&&this._pipes[d].hide();this.inject(this._container),this.updateReferenceValueLabel();for(d=0;this._labels&&d<this._labels.length;d++)this._labels[d]._index=d,this._mainIcons[d]._index=d},y.prototype.setViewOptions=function(e,t){if(this._view){var i=t&&t.multipleValuesSeparator;if((e&&e.multipleValuesSeparator)!==i){var n="|";e&&(n=e.multipleValuesSeparator||n),this._pipes.forEach((function(e){e.setText(n)}))}}},y.prototype._getElementToFocus=function(){return null};var w=function(t){return __awaiter(this,void 0,void 0,(function(){var i,n,o,a,s,l,u,p,d,c;return __generator(this,(function(h){switch(h.label){case 0:return(i=r.firstParentWithClass(t.target,"wux-tweakers-string-label"))||(i=r.firstParentWithClass(t.target,"wux-tweakers-string-icon")),i?void 0===(n=i._index)?[2]:(o=r.firstParentWithClass(i,"wux-tweakers"))&&o.dsModel?(a=o.dsModel,(s=Array.isArray(a.value)?a.value[n]:a.value)&&s.func?(t.stopImmediatePropagation(),"function"!=typeof s.func?[3,1]:(s.func({context:a.executionContext}),[3,3])):[2]):[2]:[2];case 1:return s.module?(l=s.module,u=s.func,[4,new Promise((function(t,i){e([l],t,i)}))]):[3,3];case 2:(p=h.sent())&&(d=p[u])&&"function"==typeof d&&((c=Object.assign({},s.argument)).context=a.executionContext,d(c)),h.label=3;case 3:return[2]}}))}))};y.prototype.handleEvents=function(){r.addEventOnElement(this,this._container,s.POINTERHIT,w)},y.prototype.setTouchMode=function(e,t){this._view&&(this._view.touchMode=e)},y.prototype.setHyperLinkTarget=function(e,t){if(this._view){var i=Array.isArray(e)?e:[e];this._labels.forEach((function(e,t){e&&e.setAttribute("target",t<i.length&&i[t]||i[0])}))}},y.prototype.usesReferenceValueLabel=function(){return!0},y.prototype.computeTweakerContentLength=function(){var e,t,i,n,o,a=this,r=0,s=Array.isArray(this._tweaker.value)?this._tweaker.value:[this._tweaker.value],l=this._options&&"user"===this._options.displayStyle,u=this._tweaker.getFontSize(),p=this._tweaker.getFontFamily(),d=this._tweaker.getEditedState();return s.forEach((function(s,c){e=a._icons&&a._icons[c]||void 0,i=e?e.offsetWidth+7:0,t=a._mainIcons&&a._mainIcons[c]||void 0,n=t?t.offsetWidth+7:l?22:0,o=a._getTextWidth(c,u,p,d,s),r+=i+n+o+(c>0?15:0)})),r},y.prototype._getTextWidth=function(e,t,i,n,o){return this._labels&&this._labels[e]&&o?r.computeStringWidth(o.label,t,i,n,n):0},y.prototype.setHighlightModel=function(e){var t=this;if(void 0!==this._tweaker.value&&null!==this._tweaker.value){var i=a.getUnsafeHTMLContentValueToApply(this._tweaker.allowUnsafeHTMLContent);this._labels.forEach((function(e){e&&t._tweaker.value.label&&a.highlightContent(e,{highlightModel:t._tweaker.highlightModel,newValue:t._tweaker.value.label,allowUnsafeHTMLContent:i})}))}},y.prototype.removeHighlightModel=function(){i.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},y.prototype._shouldFormatHTMLValue=function(e){return i.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},y.prototype._cleanContainerProperties=function(){return this._container&&this._container.removeAttribute("wrap"),i.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)},y.prototype.destroy=function(){return this._cleanContainerProperties(),i.prototype.VIEW_MODULES.readOnly.classObject.prototype.destroy.call(this)};var _=function(e,t){this._container=(null==t?void 0:t.useCustomContainerDiv)||e.elements.container,y.call(this,e,t)};a.applyMixin(_,y),_.prototype._initViewElements=function(){y.prototype._initViewElements.call(this),this._container.classList.add("wux-tweakers-urlobject-detailed"+this._options.displayStyle),this._labelAndSubElementsContainers=[],this._subIconAndSubLabelContainers=[],this._subIcons=[],this._subLabels=[]},_.prototype._getTextWidth=function(e,t,i,n,o){var a=y.prototype._getTextWidth.call(this,e,14,i,n,o),s=this._subLabels&&this._subLabels[e]?r.computeStringWidth(this._subLabels[e].innerText,12,i,n,n):0,l=this._subIcons&&this._subIcons[e]?this._subIcons[e].offsetWidth+(s&&3):0;return Math.max(a,s+l)},_.prototype.setValue=function(e){var t,i,n,a,s,l,u,d=this,c=Array.isArray(e)?e:void 0===e?[]:[e],h="|";this._tweaker.viewOptions&&(h=this._tweaker.viewOptions.multipleValuesSeparator||h),c.forEach((function(e,c){t=e?e.url:void 0,i=e?e.parameters:void 0,n=e?e.icon:void 0,a=e?e.label:"",s=e?e.subIcon:void 0,l=e?e.subLabel:void 0,u=e?e.func:void 0,c>0&&(d._pipes[c]?d._pipes[c].show():(d._pipes[c]=o.createElement("span",{text:h,class:p}),d._view.push(d._pipes[c]))),d._mainIcons[c]?r.cleanIcon(d._mainIcons[c]):(d._mainIcons[c]=o.createElement("span",{class:d._tweaker._iconClassName}),d._view.push(d._mainIcons[c]));var y=d._options&&"user"===d._options.displayStyle;!n&&y&&(n={userName:a});var w=r.generateIcon(n,{target:d._mainIcons[c],roundFlag:y});d._mainIcons[c].setStyle("display",w?"":"none"),d._labelAndSubElementsContainers[c]||(d._labelAndSubElementsContainers[c]=o.createElement("div",{class:"wux-tweakers-string-label-sublabel-container"}),d._view.push(d._labelAndSubElementsContainers[c])),d._labelAndSubElementsContainers[c].show(),d._labels[c]||(d._labels[c]=o.createElement("a",{class:"wux-tweakers-string-label"}).inject(d._labelAndSubElementsContainers[c])),d._labels[c].textContent=a,d._labels[c].show(),t?(d._labels[c].href=t+(i||""),e.target&&e.target!==d._tweaker.hyperlinkTargets[c]&&(d.hyperlinkTargets[c]=e.target)):d._labels[c].removeAttribute("href"),u?d._labels[c].setAttribute("has-function",""):d._labels[c].removeAttribute("has-function"),d._subIconAndSubLabelContainers[c]||(d._subIconAndSubLabelContainers[c]=o.createElement("div",{class:"wux-tweakers-string-icon-sublabel-container"}).inject(d._labelAndSubElementsContainers[c])),d._subIconAndSubLabelContainers[c].show(),d._subIcons[c]||(d._subIcons[c]=o.createElement("div").inject(d._subIconAndSubLabelContainers[c]));var _=r.generateIcon(s,{target:d._subIcons[c]});_&&(_.style.minHeight="15px"),d._subIcons[c].setStyle("display",_?"":"none"),d._subLabels[c]||(d._subLabels[c]=o.createElement("span",{class:"wux-tweakers-string-sublabel"}).inject(d._subIconAndSubLabelContainers[c])),d._subLabels[c]&&(d._subLabels[c].textContent=l),d._subLabels[c].show()}));for(var y=c.length;y<this._labels.length;y++)y>0&&this._pipes[y].hide(),this._mainIcons[y].hide(),this._labelAndSubElementsContainers[y].hide(),this._labels[y].hide(),this._subIconAndSubLabelContainers[y].hide(),this._subIcons[y].hide(),this._subLabels[y].hide();this.inject(this._container);for(y=0;this._labels&&y<this._labels.length;y++)this._labels[y]._index=y,this._mainIcons[y]._index=y},_.prototype.setHighlightModel=function(e){var t=this;if(void 0!==this._tweaker.value&&null!==this._tweaker.value){var i=a.getUnsafeHTMLContentValueToApply(this._tweaker.allowUnsafeHTMLContent);this._labels.forEach((function(e,n){t._labels[n]&&t._tweaker.value.label&&a.highlightContent(t._labels[n],{highlightModel:t._tweaker.highlightModel,newValue:t._tweaker.value.label,allowUnsafeHTMLContent:i}),t._subLabels[n]&&t._tweaker.value.subLabel&&a.highlightContent(t._subLabels[n],{highlightModel:t._tweaker.highlightModel,newValue:t._tweaker.value.subLabel,allowUnsafeHTMLContent:i})}))}},_.prototype.setViewOptions=function(e,t){if(this._view){var i=t&&t.multipleValuesSeparator;if((e&&e.multipleValuesSeparator)!==i){var n="|";e&&(n=e.multipleValuesSeparator||n),this._pipes.forEach((function(e){e.setText(n)}))}}};var f=function(e,t){d.call(this,e,t)};return a.applyMixin(f,d),f.prototype.buildView=function(){var e=this;if(this._tweaker.elements.container){var t=this._options.viewOptions||{};t.escapeHTML=this._tweaker.escapeHTML,t.touchMode=this._tweaker._getCurrentTouchMode(),t.disabled=this._tweaker.readOnly,t.selectAllOnFocus=!0,t.fireOnlyFromUIInteractionFlag=!0,t.autoCommitFlag=!0,t.displayClearFieldButtonFlag=!0,this._view=[],this._tweaker.getContent().addClassName("wux-tweakers-urlobject"),this._view._lineEditor=new l(t),this._view._lineEditor.getContent().addClassName("wux-tweakers-urlobject-editor"),this._view.push(this._view._lineEditor),this._view._editBtn=new u({label:"..."}),this._view._editBtn.getContent().addClassName("wux-tweakers-urlobject-button"),this._view.push(this._view._editBtn),this._view._giveFocus=function(){e._view._lineEditor._giveFocus()},this.setTouchMode(this._tweaker.touchMode),this.setValue(this._tweaker.value)}},f.prototype.handleEvents=function(){var t=this,i=this._view,o=this._tweaker,a=this._view._lineEditor;i._editBtn.onClick=function(t){if(o.value&&"function"==typeof o.value)o.value({context:o.context});else if(o.value&&o.value.module){var i=o.value.module,n=o.value.func,a=o.value.argument||{};a.context=o.executionContext,function(t,i,n){__awaiter(this,void 0,void 0,(function(){var a,r,s;return __generator(this,(function(l){switch(l.label){case 0:return[4,new Promise((function(i,n){e([t],i,n)}))];case 1:return(a=l.sent())&&(r=a[i])&&"function"==typeof r&&((s=Object.assign({},n)).context=o.executionContext,r(s)),[2]}}))}))}(i,n,a)}},this._view=a,n.LineEditor.prototype.handleEvents.call(this),this._view=i,this._view._giveFocus=function(){t._view._lineEditor._giveFocus()}},{Base:d,ClickableLabel:y,LineEditor:c,Editor:h,SearchableLink:f,ClickableDetailed:_}}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)};define("DS/Tweakers/TweakerURLObject",["require","exports","DS/Core/WebUXComponents","DS/Tweakers/TweakerBase","DS/Tweakers/URLObjectViewModules","DS/WUXTypings/typings/WEBUX"],(function(e,t,i,n,o){"use strict";var a=function(e,t){var i={};if(t&&e)return t.picture?i.picture=t.picture:e.icon&&(i.picture=e.icon),t.icon&&(i.titleIcon=t.icon),t.label&&(i.titleText=t.label),t.subLabel&&(i.subtitle=t.subLabel),t.description&&(i.description=t.description),t.func?i.mainAction={func:t.func,module:t.module,argument:__assign(__assign({},t.argument||{}),{context:null==e?void 0:e.executionContext})}:t.url&&(i.mainAction={url:t.url,target:t.target,parameters:t.parameters}),(null==e?void 0:e.viewOptions)&&(void 0!==e.viewOptions.descriptionHeight&&(i.descriptionHeight=e.viewOptions.descriptionHeight),void 0!==e.viewOptions.orientation&&(i.orientation=e.viewOptions.orientation)),i},r=function(e,t){return t},s=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.apply(this,t)||this}return __extends(t,e),t.prototype.getStringFromValue=function(e){function t(e){if(!e)return"";var t="";return e.label?(t=e.label,t+=e.subLabel?" "+e.subLabel:""):e.subLabel?t=e.subLabel:e.description&&(t=e.description),t}var i="";if(Array.isArray(e)){i=t(e[0]);var n="|";this.viewOptions&&(n=this.viewOptions.multipleValuesSeparator||n);for(var o=1;o<e.length;o++)i+=" "+n+" "+t(e[o])}else i=t(e);return i},Object.defineProperty(t,"publishedProperties",{get:function(){return{value:{defaultValue:void 0,type:"object"},displayStyle:{defaultValue:"clickableLabel",type:"string"},hyperlinkTarget:{defaultValue:"_blank",type:"string"}}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(t){e.prototype._preBuildView.call(this,t),this._iconClassName="wux-tweakers-string-icon"},t.prototype._applyHyperlinkTarget=function(e){if(this.elements._viewModule&&this.elements._viewModule.setHyperLinkTarget){var t=this.value;if(t&&!Array.isArray(t)){var i=this.value.target;this.elements._viewModule.setHyperLinkTarget(i||this.hyperlinkTarget)}}},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("hyperlinkTarget")&&this._applyHyperlinkTarget(t.hyperlinkTarget)},t}(n);return s.prototype.baseViewModule=o.Base,s.prototype.VIEW_MODULES={clickableLabel:{classObject:o.LineEditor,wrappedView:"clickableLabelBlock"},clickableLabel_readOnly:{classObject:o.ClickableLabel,options:{displayStyle:"clickableLabel"},wrappedView:"clickableLabelBlock_readOnly"},clickableLabel_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteViewModuleTweakerString",options:{immediateOpenFlag:!0,className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"url"}}},clickableLabel_hasPossibleValues_readOnly:{classObject:o.ClickableLabel,options:{displayStyle:"url"},wrappedView:"clickableLabelBlock_hasPossibleValues_readOnly"},clickableLabel_hasPossibleValues_allowMultipleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"url"}}},clickableLabelBlock:{classObject:o.Editor},clickableLabelBlock_readOnly:{classObject:o.ClickableLabel,options:{wrap:!0,displayStyle:"clickableLabelBlock"}},clickableLabelBlock_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteViewModuleTweakerString",options:{immediateOpenFlag:!0,className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"url"}}},clickableLabelBlock_hasPossibleValues_readOnly:{classObject:o.ClickableLabel,options:{wrap:!0,displayStyle:"url"}},clickableLabelBlock_hasPossibleValues_allowMultipleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"url"}}},searchableLink:{classObject:o.SearchableLink},searchableLink_readOnly:{classObject:o.ClickableLabel,options:{displayStyle:"searchableLink"}},user:{classObject:o.LineEditor,options:{displayStyle:"user"}},user_readOnly:{classObject:o.ClickableLabel,options:{displayStyle:"user"}},user_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteViewModuleTweakerString",options:{immediateOpenFlag:!0,className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"user"}}},user_hasPossibleValues_readOnly:{classObject:o.ClickableLabel,options:{displayStyle:"user"}},user_hasPossibleValues_allowMultipleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"user"}}},detailedUser_readOnly:{classObject:o.ClickableDetailed,options:{displayStyle:"user"}},detailedUser_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteViewModuleTweakerString",options:{immediateOpenFlag:!0,className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"detailedUser",columnOptions:{autoRowHeightFlag:!0}}}},detailedUser_hasPossibleValues_readOnly:{classObject:o.ClickableDetailed,options:{displayStyle:"user"}},detailedUser_hasPossibleValues_allowMultipleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"detailedUser",columnOptions:{autoRowHeightFlag:!0}}}},detailedInfo_readOnly:{classObject:o.ClickableDetailed,options:{displayStyle:"info"}},detailedInfo_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteViewModuleTweakerString",options:{immediateOpenFlag:!0,className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"detailedInfo",columnOptions:{autoRowHeightFlag:!0}}}},detailedInfo_hasPossibleValues_readOnly:{classObject:o.ClickableDetailed,options:{displayStyle:"info"}},detailedInfo_hasPossibleValues_allowMultipleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{className:"wux-tweakers-urlobject",viewOptions:{typeRepresentation:"detailedInfo",columnOptions:{autoRowHeightFlag:!0}}}},card_readOnly:{filePath:"DS/TweakersEx/ControlsExViewModules",key:"Cards",options:{getFormattedCardOptions:a,getFormattedURLObjectOptions:r}},card:{filePath:"DS/TweakersEx/ControlsExViewModules",key:"Cards",options:{getFormattedCardOptions:a,getFormattedURLObjectOptions:r}},inlinedCard_readOnly:{filePath:"DS/TweakersEx/ControlsExViewModules",key:"InlinedCards",options:{getFormattedCardOptions:a,getFormattedURLObjectOptions:r}},inlinedCard:{filePath:"DS/TweakersEx/ControlsExViewModules",key:"InlinedCards",options:{getFormattedCardOptions:a,getFormattedURLObjectOptions:r}}},i.addClass(s,"tweakerURLObject"),s})),define("DS/Tweakers/DurationViewModules",["require","exports","DS/Tweakers/TweakerBase","DS/Utilities/Utils","DS/Utilities/Dom","UWA/Core","i18n!DS/Tweakers/assets/nls/translation","DS/Controls/DatePicker"],(function(e,t,i,n,o,a,r,s){"use strict";var l={};var u=function(e,t){i.prototype.baseViewModule.call(this,e,t)};n.applyMixin(u,i.prototype.baseViewModule),u.prototype.setDisplayOptions=function(e){};var p=function(e,t){u.call(this,e,t)};return n.applyMixin(p,u),p.prototype.buildView=function(){var e=this._tweaker.displayOptions;if(l.TweakerDuration._isFromToOptions(this._tweaker.value,e)){if(this._view=new a.Element("div"),this._view.classList.add("wux-tweakers-duration-datePickers"),this._view.setAttribute("has-label",!0===this._options.hasLabel),this._view.setAttribute("single-line",!0===this._options.singleLine),this._options.hasLabel){var t=document.createElement("label");t.classList.add("wux-tweakers-duration-datePickers-from-label"),t.textContent=r.TweakerDuration_DatePickers_From,this._view.appendChild(t)}if(this._fromInput=new s({allowUndefinedFlag:!0,timePickerFlag:e.timePickerFlag,fireOnlyFromUIInteractionFlag:!0,value:l.TweakerDuration._getFromDate(this._tweaker.value,e)}),this._fromInput.getContent().classList.add("wux-tweakers-duration-datePickers-from-input"),this._fromInput.inject(this._view),this._options.hasLabel){var i=document.createElement("label");i.classList.add("wux-tweakers-duration-datePickers-to-label"),i.textContent=r.TweakerDuration_DatePickers_To,this._view.appendChild(i)}this._toInput=new s({allowUndefinedFlag:!0,timePickerFlag:e.timePickerFlag,fireOnlyFromUIInteractionFlag:!0,value:l.TweakerDuration._getToDate(this._tweaker.value,e)}),this._toInput.getContent().classList.add("wux-tweakers-duration-datePickers-to-input"),this._toInput.inject(this._view)}},p.prototype.handleEvents=function(){var e=this;this._fromInput&&o.addEventOnElement(this,this._fromInput,"change",(function(t){t.stopPropagation();var i,n=e._tweaker.value;(void 0!==e._fromInput.value||void 0!==n&&void 0!==n.to)&&(i={from:void 0!==e._fromInput.value?e._fromInput.value.getTime():void 0,to:void 0!==n?n.to:void 0}),e.setTweakerValue(i)})),this._toInput&&o.addEventOnElement(this,this._toInput,"change",(function(t){t.stopPropagation();var i,n=e._tweaker.value;(void 0!==e._toInput.value||void 0!==n&&void 0!==n.from)&&(i={from:void 0!==n?n.from:void 0,to:void 0!==e._toInput.value?e._toInput.value.getTime():void 0}),e.setTweakerValue(i)}))},p.prototype.setValue=function(e){this._fromInput.value=l.TweakerDuration._getFromDate(e,this._tweaker.displayOptions),this._toInput.value=l.TweakerDuration._getToDate(e,this._tweaker.displayOptions)},p.prototype.setDisplayOptions=function(e){this._fromInput.timePickerFlag=e.timePickerFlag,this._toInput.timePickerFlag=e.timePickerFlag},{setHelpers:function(e,t){l[e]=t},Base:u,DatePickers:p}})),define("DS/Tweakers/TypeRepresentationDirectory",["require","exports","UWA/Core","DS/Utilities/Array","DS/Utilities/Utils","DS/CoreEvents/ModelEvents","DS/Tweakers/TweakerUtils","text!DS/Tweakers/assets/defaultTypeRepresentations.json","text!DS/Tweakers/assets/typeTemplates.json"],(function(e,t,i,n,o,a,r,s,l){"use strict";var u=function(e){var t,i=this;for(var n in e)t=n,i._callOnTemplateRequired(t,(function(t){0===Object.keys(this._templatesToRequire).length&&i._modelEvents.publish({context:i,event:"templatesRequired",data:Object.keys(e)})}))},p=function(e){e&&(e._childrenDirectories.push(this),e.getModelEvents()._addParent(this.getModelEvents()))},d=function(){var e=this._options.parentDirectory;if(this._options.parentDirectory){var t=e._childrenDirectories.indexOf(this);-1!==t&&e._childrenDirectories.splice(t,1),e.getModelEvents()._unsetParent(this.getModelEvents());var i=this;this._childrenDirectories.forEach((function(t){i.getModelEvents()._unsetParent(t.getModelEvents()),p.call(t,e)})),this._options.parentDirectory=void 0}},c=function(){function e(e){this._options=i.extend({preLoadTemplates:!1,parentDirectory:h},e),this._typeRepresentations={},this._enumerations={},this._templates={},this._modelEvents=new a,this._templatesToRequire={},this._bufferTemplateLoaded={},this._childrenDirectories=[],p.call(this,this._options.parentDirectory),r.addTypeRepresentationDirectory(this)}return Object.defineProperty(e,"WebUXTypeRepresentationDirectory",{get:function(){return h},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){d.call(this),r.removeTypeRepresentationDirectory(this)},e.prototype.setPreLoadTemplates=function(e){this._options.preLoadTemplates=e,this._options.preLoadTemplates&&u.call(this,this._templatesToRequire)},e.prototype.getNumberOfTemplatesToRequire=function(){return Object.keys(this._templatesToRequire).length},e.prototype.getModelEvents=function(){return this._modelEvents},e.prototype.registerTypeRepresentations=function(e){if(void 0!==e){var t=typeof e;if("string"!==t&&"object"!==t)throw new Error("Cannot register type representations");var n=e;"string"==typeof e&&(n=JSON.parse(e)),i.merge(this._typeRepresentations,n)}},e.prototype.getRegisteredTypeRepresentation=function(e){if(e){if(this._typeRepresentations[e])return this._typeRepresentations[e];if(this._parentDirectory)return this._parentDirectory.getRegisteredTypeRepresentation(e)}},e.prototype.getAllRegisteredTypeRepresentationNames=function(){return this._typeRepresentations?Object.keys(this._typeRepresentations):[]},e.prototype.registerEnumerations=function(e){if(void 0!==e){var t=typeof e;if("string"!==t&&"object"!==t)throw new Error("Cannot register type representations");var n=e;"string"===t&&(n=JSON.parse(e)),i.merge(this._enumerations,n)}},e.prototype.getRegisteredEnumeration=function(e){if(e){if(this._enumerations[e])return this._enumerations[e];if(this._parentDirectory)return this._parentDirectory.getRegisteredEnumeration(e)}},e.prototype.registerTemplates=function(e){if(void 0!==e){var t,n=typeof e;if("string"!==n&&"object"!==n)throw new Error("Cannot register templates");for(var o in t="string"==typeof e?JSON.parse(e):e)t[o].path||delete t[o];var a=Object.keys(t),r=this;if(a.forEach((function(e){void 0!==r.getRegisteredTemplate(e)&&delete t[e]})),0===a.length)return;i.merge(this._templatesToRequire,t),i.merge(this._templates,t),this._options.preLoadTemplates&&u.call(this,t)}},e.prototype.getRegisteredTemplate=function(e){if(e){if(this._templates[e])return this._templates[e];if(this._parentDirectory)return this._parentDirectory.getRegisteredTemplate(e)}},e.prototype._callOnTemplateRequired=function(e,t){var i=this.getRegisteredTemplate(e);if(i){if(i.src)return t.call(this,i.src);var n=i.path;if(this._bufferTemplateLoaded[n])this._bufferTemplateLoaded[n].templateIdentifiers.push(e),this._bufferTemplateLoaded[n].templateDefinitions.push(i),this._bufferTemplateLoaded[n].callbacks.push(t);else{this._bufferTemplateLoaded[n]={templateIdentifiers:[e],templateDefinitions:[i],callbacks:[t]};var a=this;o.dynamicRequire(n).then((function(e){for(var t=0;t<a._bufferTemplateLoaded[n].templateIdentifiers.length;t++)delete a._templatesToRequire[a._bufferTemplateLoaded[n].templateIdentifiers[t]],a._bufferTemplateLoaded[n].templateDefinitions[t].src=e,a._bufferTemplateLoaded[n].callbacks[t].call(a,e);a._options.preLoadTemplates||a._modelEvents.publish({context:a,event:"templatesRequired",data:a._bufferTemplateLoaded[n].templateIdentifiers}),delete a._bufferTemplateLoaded[n]}))}}},e}(),h=new c({preLoadTemplates:!1,parentDirectory:void 0});return h.registerTypeRepresentations(s),h.registerTemplates(l),h.registerEnumerations({allSupportedTypes:function(e){var t=e||h,i=[],o=t;do{[t._typeRepresentations,t._enumerations].forEach((function(e){for(var t in e)n.pushUnique(i,t)})),o=o._options.parentDirectory}while(o);return i.sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))}}),c})),define("DS/Tweakers/TypeRepresentationFactory",["require","exports","UWA/Core","DS/Utilities/ReusableContentsManager","DS/Tweakers/TypeRepresentationDirectory","./typings/types"],(function(e,t,i,n,o){"use strict";function a(e,t){"function"==typeof this.onFailure&&this.onFailure({message:e,data:t,typePath:this.typePath,typeRep:this.typeRep})}function r(e){return"true"===e}function s(e,t,n,o,r,s){var l,u=this;if(n){this._currentValue=o,this._currentOptions=s,this._currentSemantics=r,this._reusablesManager.isRegistered(e)||this._reusablesManager.register({id:e,buildContent:function(){var e={};return i.merge(e,t.options),i.merge(e,u._currentOptions),e.value=u._currentValue,e=i.extend(e,u._currentSemantics),new n(e)},cleanContent:function(e){return e.cleanContent()}});var p=this._reusablesManager.use(e).component;if(p){p.disableEvents&&p.disableEvents(),i.merge(r,t.options),i.merge(r,s),r.realPath=s.realPath,p.failureCapture&&(r.onFailure=s.onFailure);var d=p.getPublishedPropertiesDefaultValue();return i.merge(r,d),r.value=o,void 0===r.referenceValue&&(r.referenceValue=i.clone(o,!1)),r&&p.setProperties&&p.setProperties(r),p.enableEvents&&p.enableEvents(),p._isViewBuilt()?null===(l=s.onViewCreated)||void 0===l||l.call(s,p):p.addEventListener("viewBuilt",(function(){var e;null===(e=s.onViewCreated)||void 0===e||e.call(s,p)}),{once:!0}),p}a.call({onFailure:s.onFailure,typePath:s.typePath,typeRep:s.typeRep},"Tweaker instance undefined",o)}}function l(e){if(Array.isArray(e)){if(e.every((function(e){return"string"==typeof e})))return"enumString";if(e.every((function(e){return"number"==typeof e})))return"enumInteger"}else if("function"==typeof e)return"enumDyn";return"enumCustom"}return function(){function e(t){this.options=i.extend({directory:o.WebUXTypeRepresentationDirectory,onReady:function(){},preLoadTemplates:!0},t),this._reusablesManager=new n,this._isReady=!1,Object.defineProperty(e.prototype,"onReady",{get:function(){return this.options.onReady},set:function(e){this.options.onReady=e,this._isReady&&e.call(this)},enumerable:!0,configurable:!0});var a=this,r=function(){a._isReady=!0,a.options.onReady&&a.options.onReady.call(a)};if(this.options.preLoadTemplates&&0!==this.options.directory.getNumberOfTemplatesToRequire())var s=this.options.directory.getModelEvents(),l=s.subscribe({event:"templatesRequired"},(function(){s.unsubscribe(l),r()}));else r();this.options.directory.setPreLoadTemplates(this.options.preLoadTemplates),Object.defineProperty(e.prototype,"typeReps",{get:function(){return this.options.directory._typeRepresentations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeEnums",{get:function(){return this.options.directory._enumerations},enumerable:!0,configurable:!0})}return e.prototype.destroy=function(){this._reusablesManager.destroy()},e.prototype.generateTweaker=function(t,i){var n=this;return this.loadTemplateAndExecute(t,i,(function(t,o,r,l,u){if(!i.needToCreateViewAfterRequireEnded||i.needToCreateViewAfterRequireEnded&&!0===i.needToCreateViewAfterRequireEnded.call(n))return s.call(n,e.getTemplateIdentifierFromTypeRep(u.typeRep,u.context),o,t,r,l,u);a.call({onFailure:u.onFailure,typePath:u.typePath,typeRep:u.typeRep},"No need to create view",r)}))},e.prototype._mergeSemantics=function(e,t){var n=(t.semantics?i.merge(t.semantics,t.typeRep.semantics):t.typeRep.semantics)||{};if(n.readOnly=void 0!==t.readOnly?t.readOnly:r(n.readOnly),n.touchMode=void 0!==t.touchMode?t.touchMode:n.touchMode,n.icon=void 0!==t.icon?t.icon:n.icon,n.escapeHTML=void 0!==t.escapeHTML?t.escapeHTML:r(n.escapeHTML),/*!semantics.hasOwnProperty('valueType') && */void 0===t.valueType&&void 0!==t.typePath){var o=void 0,a=void 0,s=t.typePath.indexOf("<"),l=t.typePath.indexOf(">");if(-1!==s&&-1!==l&&s<l)o=t.typePath.substring(s+1,l);else if("array"===t.typePath||t.typeRep&&t.context&&"array"===t.typeRep[t.context]&&(!t.semantics||"auto"!==t.semantics.valueType))o=n.hasOwnProperty("valueType")?n.valueType:"auto";else{o="enumCustom"===n.valueType||"enumSearchableCombo"===n.valueType||"enumString"===n.valueType||"enumValueToProperty"===n.valueType?n.valueType:""!==t.typePath?t.typePath:i.typeOf(e);var u=this._getTypeData(t.typePath).realType;a=u||(""!==t.typePath?t.typePath:i.typeOf(e))}n.valueType=o,n.realType=a}return n},e.prototype.loadTemplateAndExecute=function(t,i,n){var o=this;if(i&&i.typeRep){var r=e.getTemplateIdentifierFromTypeRep(i.typeRep,i.context);if(r){"string"!=typeof r&&(r=i.readOnly&&r.readOnly?r.readOnly:r.default);var s=this.options.directory.getRegisteredTemplate(r);if(s){var l=this._mergeSemantics(t,i),u=function(e){return n.call(o,e,s,t,l,i)};if(s&&s.src){var p=s.src;return u(p)}return new Promise((function(e,t){o.options.directory._callOnTemplateRequired(r,(function(i){try{var n=u(i);void 0===n?t(new Error("Execution returned undefined")):e(n)}catch(e){t(e)}}))}))}a.call(i,"Cannot retrieve a view template for the given typePath",t)}else a.call({onFailure:i.onFailure,typePath:i.typePath,typeRep:i.typeRep},"No template identifier found",t)}else a.call({onFailure:null==i?void 0:i.onFailure,typePath:null==i?void 0:i.typePath,typeRep:null==i?void 0:i.typeRep},"Missing required options or typeRep",t)},e.prototype.getTweakerStaticHeight=function(e,t,n){return this.loadTemplateAndExecute(null,e,(function(n,o,a,r,s){var l={};return i.merge(l,o.options),i.merge(l,e),l.value=a,l=i.extend(l,r),n.computeHeight(l,t,a)}))},e.prototype.getTweakerStaticStringFromValue=function(e,t,n){return this.loadTemplateAndExecute(null,t,(function(t,o,a,r,s){var l={};return i.merge(l,o.options),(l=i.extend(l,r)).value=e,t.computeStringFromValue(e,l,n)}))},e.prototype.generateView=function(e,t){var i=this;if(!(t=t||{}).onViewCreated&&!t.onFailure)return new Promise((function(n,o){t.onViewCreated=function(e){return n(e)},t.onFailure=function(e){return o(e)},i._generateViewInternal(e,t)}));this._generateViewInternal(e,t)},e.prototype._generateViewInternal=function(e,t){var n=this._getTypeData(t.typePath,t.semantics,e);if(t.semantics=t.semantics||{},i.merge(t.semantics,n.semantics),null!==n.typePath&&void 0!==n.typePath)if(void 0!==n.typeRep){t.typeRep=n.typeRep,t.typePath=n.typePath;var o=this.generateTweaker(e,t);o instanceof Promise&&o.catch((function(e){"function"==typeof t.onFailure&&t.onFailure(e)}))}else a.call({onFailure:t.onFailure,typePath:t.typePath,typeRep:t.typeRep},"Cannot generate view with the given typePath",e);else a.call({onFailure:t.onFailure,typePath:t.typePath,typeRep:t.typeRep},"Cannot generate view with an undefined typePath and undefined data",e)},e.getTemplateIdentifierFromTypeRep=function(e,t){var i;if(e){var n=t||"stdTemplate";void 0===e[n]&&(n="stdTemplate"),i=e[n]}return i},e.prototype._getTypeData=function(e,t,n){var o,a,r=this,s="";function u(e,t){var i=l(e),n=r.options.directory.getRegisteredTypeRepresentation(i);return(t=t||{}).possibleValues=e,{semantics:t,finalPath:i,typeRep:n}}if(null!=(e=e||(void 0!==n?i.typeOf(n):void 0))){var p=e.split("#"),d=void 0;2===p.length&&(e=p[0],d=p[1]);var c=e.split("."),h="";if(c.every((function(e,i,n){if(s+=String(e),i!==n.length-1&&(s+="."),void 0!==o)if("string"!=typeof o&&o.children){if("string"==typeof(o=o.children[e])&&0===o.indexOf("#")){var p,d=o.slice(1);if(a=d,void 0===(o=r.options.directory.getRegisteredTypeRepresentation(d))||""===o)if(p=r.options.directory.getRegisteredEnumeration(d)){var c=u(p,t);return t=c.semantics,o=c.typeRep,h=c.finalPath,void 0!==o||i!==n.length-1}}void 0!==o?h+="."+e:h=""}else o=void 0,h="";else o=r.options.directory.getRegisteredTypeRepresentation(e),h=e,!(p=r.options.directory.getRegisteredEnumeration(e))||void 0===o&&void 0!==o||(void 0===o&&(h=l(p),o=r.typeReps[h]),(t=t||{}).possibleValues=p.semantics&&p.semantics.possibleValues?p.semantics.possibleValues:p);return void 0!==o||i!==n.length-1})),void 0===o||""===o){var y=r.options.directory.getRegisteredEnumeration(d);if(y){var w=u(y,t);t=w.semantics,o=w.typeRep,h=w.finalPath}}if(o&&"string"!=typeof o&&o.children){var _=(t=t||{}).configuration||{};Object.getOwnPropertyNames(o.children).forEach((function(i){var o,a;_[i]={},(e+"."+i).includes(i)||(a=(o=r._getTypeData(e+"."+i,t,n)).semantics&&o.semantics.configuration?o.semantics.configuration:{},Object.getOwnPropertyNames(a).forEach((function(e){_[i+"."+e]||(_[i+"."+e]={})})))})),t.configuration=_}e===s&&void 0===o&&-1!==e.indexOf(".")&&(void 0!==d&&(o=r.options.directory.getRegisteredTypeRepresentation(d)),void 0===o&&(o=r.options.directory.getRegisteredTypeRepresentation(i.typeOf(n))),h=""),void 0===o&&-1!==e.indexOf("<")&&-1!==e.indexOf(">")&&void 0===(o=r.options.directory.getRegisteredTypeRepresentation(e.substring(0,e.indexOf("<"))))&&(o=r.options.directory.getRegisteredTypeRepresentation("array")),e=h}return{typeRep:o,typePath:e,semantics:t,realType:a}},e.prototype.registerTypeRepresentations=function(e){this.options.directory.registerTypeRepresentations(e)},e.prototype.getRegisteredTypeRepresentation=function(e){return this.options.directory.getRegisteredTypeRepresentation(e)},e.prototype.registerTypeTemplates=function(e){this.options.directory.registerTemplates(e)},e.prototype.getRegisteredTypeTemplate=function(e){return this.options.directory.getRegisteredTemplate(e)},e.prototype.registerEnum=function(e,t){var i={};i[e]=t,this.options.directory.registerEnumerations(i)},e.prototype.getRegisteredEnum=function(e){return this.options.directory.getRegisteredEnumeration(e)},e}()}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var __spreadArray=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};define("DS/Tweakers/GeneratedToolbar",["require","exports","UWA/Core","DS/Utilities/Dom","DS/Utilities/Utils","DS/Controls/Abstract","DS/Controls/Toolbar","DS/Core/TooltipModel","DS/Core/WebUXComponents","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Menu/Menu","UWA/Utils/Client","DS/Tweakers/TypeRepresentationFactory","DS/CoreBase/WebUXGlobalEnums"],(function(e,t,i,n,o,a,r,s,l,u,p,d,c,h,y){"use strict";var w=8;function _(e){return e?42:28}function f(e,t,n){for(var a in t)n&&-1!==n.indexOf(a)||(o.isPlainObject(t[a])?e[a]=i.clone(t[a]):e[a]=t[a])}function v(e,t){var i={};if(f(i,t.options.grid.semantics),t.options.tooltip)"string"==typeof t.options.tooltip?t._associatedView&&t._associatedView.tooltipInfos?(t._associatedView.tooltipInfos.setProperties({title:void 0,shortHelp:t.options.tooltip,shortHelpImage:void 0,longHelp:void 0,longHelpImage:void 0}),i.tooltipInfos=t._associatedView.tooltipInfos):i.tooltipInfos=new s({shortHelp:t.options.tooltip}):t._associatedView&&t._associatedView.tooltipInfos?(t._associatedView.tooltipInfos.setProperties(t.options.tooltip),i.tooltipInfos=t._associatedView.tooltipInfos):i.tooltipInfos=new s(t.options.tooltip);else if(!t.options.displayLabel)if(t._associatedView&&t._associatedView.tooltipInfos){var n=t._associatedView.tooltipInfos;n.shortHelp=t.getLabel(),i.tooltipInfos=n}else i.tooltipInfos=new s({shortHelp:t.getLabel()});return f(i,t.options,["grid","children"]),t.options.grid&&"icon"===t.options.grid.typeRep&&(i.icon=t.options.grid.data),t.options.grid&&"boolean"===t.options.grid.typeRep&&delete i.label,!1===i.displayLabel&&delete i.label,i.executionContext=S(e,t),e.disabled?i.disabled=!0:t.options.hasOwnProperty("disabled")&&(i.disabled=t.options.disabled),i.viewOptions||(i.viewOptions={}),i.viewOptions.identifier=t.options.id,i}function g(e){if(e._associatedView){var t=v(this,e);t.value=R(e),this._getCurrentTouchMode()&&(t.touchMode=!0),o.setTweakerProperties(e._associatedView,t,e.options.grid.typeRep,this.typeRepresentationFactory);var i=this._getToolbarItem(e);void 0!==e.options.visibleFlag&&(i.visibleFlag=e.options.visibleFlag),void 0!==e.options.displayLabel&&(i.displayLabel=e.options.displayLabel),this._manageToolbarItemVisibility(i),this._manageDisplayLabelChange(i)}}function m(){if(this.items){var e=this;this.items.processDescendants({onlyVisibleNodes:!1,processNode:function(t){var i=t.nodeModel;g.call(e,i)}})}}function b(){var e=this;if(0===this._updateCounter){var t,n=0,a=0;e._toolbar.clear(),e.items&&(t={near:{},center:{},far:{}},e.items.getChildren().forEach((function(e){var i,n;i=e.options.position,n=e.options.category||"other",i&&void 0!==t[i]||(i="near"),t[i][n]||(t[i][n]=[]),t[i][n].push(e)})),e.promises=[],e.array1=r(this.items,t.near),e.array2=r(this.items,t.center),e.array3=r(this.items,t.far),Promise.allSettled(e.promises).then((function(t){e._toolbar._enableCalculus("tweakersBuilt"),e._toolbar._onResize(),e._isReady=!0,e._toolbar.fire("onReady"),e._toolbar.fire("dimensionsChanged")})),e.__isModelCommandsOnly="Basic"!==e.popupDisplayStyle&&j.call(e,e.items),e._applyOverflowManagement(),e._popupDataGridView&&(e._popupDataGridView.treeDocument=this.items))}function r(t,r){n=0;var s=[],l=function(l){if(!r[l]||0===r[l].length)return{value:void 0};r[l].forEach((function(r){var u=function(t,r,s){var l,u,p,d={id:r._ID};(l=i.createElement("div",{class:"wux-generated-toolbar-items"})).toolbarProperties=l.toolbarProperties||{},l.toolbarProperties.order=a,a++,l._treeNodeModel=r,(p=r.options.label)&&r.options.displayLabel&&(r.options._associatedLabel=i.createElement("div",{class:"wux-generated-toolbar-items-label",html:p}).inject(l));if(u=i.createElement("div",{class:"wux-generated-toolbar-items-tweaker"}).inject(l),!r.__generatedToolbarNodeModelUpdate){var c=function(t){var i;r._associatedView||(null===(i=null==r?void 0:r.options)||void 0===i?void 0:i.alwaysInOverflow)?(g.call(e,r),e._toolbar.modelModified(),e._toolbar._onResize(),r.options.onNodeUpdate&&("function"==typeof r.options.onNodeUpdate?r.options.onNodeUpdate.call(e,r,t&&t.data?t.data.attributes:void 0):"object"==typeof r.options.onNodeUpdate&&r.options.onNodeUpdate.func&&r.options.onNodeUpdate.module&&o.attachSimpleCallback(r.options.onNodeUpdate.module,r.options.onNodeUpdate.func,r.options.onNodeUpdate.argument,x(e,r))),e.fire("modelUpdated")):r._hasBeenUpdatedSinceViewGeneration=!0};r.__generatedToolbarNodeModelUpdate=r.addEventListener("nodeModelUpdate",c)}r.options.alwaysInOverflow||e.promises.push(e.typeRepresentationFactory.generateView(R(r),{typePath:r.options.grid.typeRep,readOnly:r.options.readOnly,touchMode:e._getCurrentTouchMode(),context:"inlinedTemplate",semantics:v(e,r)}).then((function(i){void 0!==i&&(u.setContent(i),d.tweaker=i,i.disabled!==(e.disabled||r.options.disabled)&&(i.disabled=e.disabled||r.options.disabled),r._ID&&function(e){var t=!1;if(e.addTweakersIDs)t=!0;else{var i=window.__karma__;i&&i.config&&i.config.json?t=i.config.json.ADD_TOOLBAR_TWEAKERS_IDS:!i&&navigator.webdriver&&(t=!0)}return t}(e)&&i.getContent().setAttribute("tweaker_id",r._ID),i.executionContext=S(e,r),r._associatedView=i,r._hasBeenUpdatedSinceViewGeneration&&c(),i.addEventListener("change",(function(){t&&r&&r.setAttribute("data",i.value)})),i.addEventListener("focus",(function(){t&&r&&r&&r.options.onViewFocus&&("function"==typeof r.options.onViewFocus?r.options.onViewFocus.call(this,r):"object"==typeof r.options.onViewFocus&&r.options.onViewFocus.func&&r.options.onViewFocus.module&&o.attachSimpleCallback(r.options.onViewFocus.module,r.options.onViewFocus.func,r.options.onViewFocus.argument,x(e,r)))})),i.addEventListener("blur",(function(){t&&r&&r&&r.options.onViewBlur&&("function"==typeof r.options.onViewBlur?r.options.onViewBlur.call(this,r):"object"==typeof r.options.onViewBlur&&r.options.onViewBlur.func&&r.options.onViewBlur.module&&o.attachSimpleCallback(r.options.onViewBlur.module,r.options.onViewBlur.func,r.options.onViewBlur.argument,x(e,r)))})))})));return e._toolbar.add("element",{element:l,position:r.options.position||"near",priority:r.options.priority,category:s,index:n,visibleFlag:void 0===r.options.visibleFlag||r.options.visibleFlag,alwaysInOverflow:r.options.alwaysInOverflow,id:r.options.id}),n++,d}(t,r,l);s.push(u)}))};for(var u in r){var p=l(u);if("object"==typeof p)return p.value}return s}}function V(e,t){t&&t.options.onNodeLiveUpdate&&("function"==typeof t.options.onNodeLiveUpdate?t.options.onNodeLiveUpdate.call(this,t,e.value):"object"==typeof t.options.onNodeLiveUpdate&&t.options.onNodeLiveUpdate.func&&t.options.onNodeLiveUpdate.module&&o.attachSimpleCallback(t.options.onNodeLiveUpdate.module,t.options.onNodeLiveUpdate.func,t.options.onNodeLiveUpdate.argument,x(this,t)))}function k(){var e=this;this._promisesArray=[];var t=[{dataIndex:"label",text:"Label",width:"40%",selectableFlag:!1,getCellClassName:function(e){var t=e.nodeModel.getPreviousVisibleNode();return t&&(t._options.category!==e.nodeModel._options.category||t._options.position!==e.nodeModel._options.position)?"wux-generatedToolbar-firstInSection":""},getCellTooltip:function(e){return void 0!==e.nodeModel.options.tooltip||e.nodeModel.options.displayLabel?"string"==typeof e.nodeModel.options.tooltip?{shortHelp:e.nodeModel.options.tooltip}:e.nodeModel.options.tooltip:{shortHelp:e.nodeModel.getLabel()}}},{dataIndex:"data",text:"Value",isEditable:!0,width:"auto",minWidth:16,selectableFlag:!1,editionPolicy:"EditionInPlace",getCellTypeRepresentation:function(e){return e.nodeModel.getAttributeValue("typeRep")},getCellClassName:function(e){var t=e.nodeModel.getPreviousVisibleNode();return t&&(t._options.category!==e.nodeModel._options.category||t._options.position!==e.nodeModel._options.position)?"wux-generatedToolbar-firstInSection":""},getCellSemantics:function(t){return v(e,t.nodeModel)},getCellEditableState:function(e){return!e.nodeModel.options.readOnly},onCellRequest:function(e){this.defaultOnCellRequest(e);var t=e.cellView.getReusableContent();t&&t.getContent().setAttribute("tweaker_id",e.nodeModel._ID)}}];o.dynamicRequire("DS/DataGridView/DataGridView").then((function(i){var o={cellSelection:"none",rowSelection:"none",columnSelection:"none",cellActivationFeedback:"none",cellPreselectionFeedback:"none",layoutOptions:{rowsHeader:!1,columnsHeader:!1,cellHeight:_(e.touchMode)},touchMode:e.touchMode,columns:t,treeDocument:e.items,showAlternateBackgroundFlag:!1,liveUpdateFlag:!0,maxVisibleRowCount:w,selectNextCellOnEnterFlag:!1};e._popupDataGridView=new i(o),e._popupDataGridView.getContent().addClassName("wux-toolbar-popup-treeList"),e._popupDataGridView.inject(e._toolbar.getPopupContent()),e._popupDataGridView.subscribeOnceToAllCellsRendered((function(){e._managePopupWidth()})),n.addEventOnElement(e,e.elements.dropdownPopup,"dimensionsChanged",function(e){if(e.target!==this.elements.dropdownPopup.getContent()){var t=n.firstParentWithClass(e.target,"wux-tweakers");t&&t.dsModel&&(t.dsModel.isInTransaction&&t.dsModel.isInTransaction()?t.dsModel.addEventListener("postEdit",this._managePopupWidth.bind(this),{once:!0}):this._debounceManagePopupWidth())}}.bind(e)),n.addEventOnElement(e,e.elements.dropdownPopup,"liveChange",(function(t){var i,n=P(t.target),o=n._associatedNode||e.getNodeModelByID(null===(i=n.viewOptions)||void 0===i?void 0:i.identifier);V.call(e,n,o)}))}))}function C(){var e=this;e._popupDataGridView&&e._popupDataGridView.hide(),e._toolbar.enablePopupBehavior()}function O(){var e=this;this.items&&this.items.processDescendants({onlyVisibleNodes:!0,processNode:function(e){e.nodeModel.hide()}}),this._toolbar.enablePopupBehavior({moveFromToolbarToPopup:function(e){e.data={labelWidth:0,tweakerWidth:0};var t=e.element._treeNodeModel.options.label;if(t){var i=window.getComputedStyle(e.element,null);e.data.labelWidth=n.computeStringWidth(t,parseFloat(i.getPropertyValue("font-size")),i.getPropertyValue("font-family"),!1)}var o=P(e.element);o&&(e.data.tweakerWidth=Math.max(parseInt(getComputedStyle(o.getContent()).width),o.computeContentSize())),this._moveFromToolbarToPopupDefault(e)},moveFromPopupToToolbar:function(e){this._moveFromPopupToToolbarDefault(e)},showEverything:T.bind(this),onPopupCreationFunction:k.bind(this),popupBeforeDisplayCallback:function(){e.elements.dropdownPopup&&(e.elements.dropdownPopup.usePaddingFlag=!0,e.elements.dropdownPopup.getContent().setStyle("visibility","hidden")),e._popupDataGridView&&(e._popupDataGridView.hasPendingCellsToRender()?e._popupDataGridView.subscribeOnceToAllCellsRendered((function(){e._managePopupHeight(),e._managePopupWidth()})):(e._managePopupHeight(),e._managePopupWidth()))},popupPostOverlapCallback:function(t){var i=e._managePopupHeight(t);return e.elements.dropdownPopup&&!i&&e._managePopupWidth(),!0}})}function T(){this.items.prepareUpdate();for(var e=0;e<this._toolbar.getNumberOfItems();e++){var t=this._toolbar.getItemFromIndex(e);"popup"!==t.container||t.alwaysInOverflow||this._toolbar._moveFromPopupToToolbar(t)}this.items.pushUpdate()}function M(){n.hasEventOnElement(this,this._toolbar.getContent(),"dropDownButtonClick")||n.addEventOnElement(this,this._toolbar.getContent(),"dropDownButtonClick",E.bind(this))}function E(){var e=this;if(this._currentMenuModel)d.hide();else{var t=this._toolbar.elements.dropDownButton.getContent().getBoundingClientRect();this._currentMenuModel=function(e,t){var i,n=e,o=[];return t.processDescendants({onlyVisibleNodes:!0,processNode:function(t){var a=t.nodeModel,r=F(e,a),s=r.value,l=a.options.category;i&&l&&l!==i&&o.push({type:"SeparatorItem"}),i=l;var u={type:"PushItem",title:r.label,icon:r.icon};if(r.tooltip&&(u.tooltip=r.tooltip),r.disabled&&(u.state="disabled"),r.count){var p={number:{value:r.count,backgroundColor:void 0}};"string"==typeof u.icon&&(u.icon={iconName:u.icon}),u.icon.badges?u.icon.badges.topRight?u.icon.badges.bottomRight=p:u.icon.badges.topRight=p:u.icon.badges={topRight:p}}if("object"==typeof s&&s.menu)u.submenu=s.menu;else{("function"==typeof s||"object"==typeof s&&s.func&&s.module)&&(u.action={callback:D(n,s,a)});var d=v(e,a).possibleValues;if(d)if("customBoolean"===r.typeRepresentation)u.type="RadioItem",!0===r.value&&(void 0===u.state?u.state="selected":u.state+="|selected"),u.action={callback:function(){a.setAttribute("data",!r.value)}};else{for(var c=[],h=function(e){var t=d[e],i=t.value,o={title:t.label,icon:t.icon,type:"RadioItem",action:{callback:function(){var e=a.getTreeDocument();e.prepareUpdate(),a.setAttribute("data",i),e.pushUpdate(),D(n,i,a).call(this)}}};t.tooltip&&(o.tooltip=t.tooltip),i===s&&(o.state="selected"),r.disabled&&(o.state="disabled"),c.push(o)},y=0;y<d.length;y++)h(y);u.submenu=c}}o.push(u)}}),o}(this,this.items),d.show(this._currentMenuModel,{layout:"TopLeft",position:{x:t.left,y:t.top+t.height},submenu:"outside",forceTouchMode:this._getCurrentTouchMode()},{onHide:function(){e._currentMenuModel=void 0}})}}function S(e,t){if(t._associatedView){var i=t.getAttributeValue("data");return!t._associatedView.executionContext||e.executionContext!==t._associatedView.executionContext.executionContext||(Array.isArray(t._associatedView.executionContext.value)&&Array.isArray(i)?t._associatedView.executionContext.value.equals(i):t._associatedView.executionContext.value===i)?{executionContext:e.executionContext,toolbar:e,nodeModel:t,value:t.getAttributeValue("data")}:t._associatedView.executionContext}return{executionContext:e.executionContext,toolbar:e,nodeModel:t,value:t.getAttributeValue("data")}}function x(e,t){return{context:S(e,t),dsModel:void 0}}function F(e,t){var n=v(e,t),a=t.getAttributeValue("typeRep"),r=e.typeRepresentationFactory.getRegisteredTypeRepresentation(t.getAttributeValue("typeRep")),s=h.getTemplateIdentifierFromTypeRep(r,"inlinedTemplate"),l=e.typeRepresentationFactory.getRegisteredTypeTemplate(s);r&&r.semantics&&i.merge(n,r.semantics),l&&l.options&&i.merge(n,l.options);var u=t.getAttributeValue("data");if(!n.possibleValues)return{icon:n.icon,count:n.count,label:n.label,tooltip:n.tooltip,disabled:n.disabled,value:u,typeRepresentation:a};if(Array.isArray(n.possibleValues))for(var p=0;p<n.possibleValues.length;p++)if(0===o.compare(n.possibleValues[p].value,u)||0===o.compare(n.possibleValues[p],u)){var d=Object.assign({},n.possibleValues[p],{disabled:n.disabled});return d.typeRepresentation=a,d}}function D(e,t,i){return function(){"function"==typeof t?t.call(e,x(e,i)):"object"==typeof t&&t.func&&t.module&&o.attachSimpleCallback(t.module,t.func,t.argument,x(e,i))}}var P=function(e){if(e.hasClassName("wux-tweakers"))return e.dsModel;var t=e.getChildren();if(t)for(var i=0;i<t.length;i++){var n=P(t[i]);if(n)return n}};function I(e){var t=e;if("string"==typeof e&&(t=JSON.parse(e)),t.entries){var i=[],n=t.entries,o=n.length,a=0,r=0,s=null,l=null,u=0;for(a=0;a<o;++a){if(!(s=n[a]).dataElements)throw new Error("Missing dataElements on"+s);if(!s.dataElements.typeRepresentation)throw new Error("Missing dataElements.typeRepresentation on"+s);if(s.grid)throw new Error("grid is a reserved keyword");if(s.grid={},Object.defineProperty(s.grid,"typeRep",Object.getOwnPropertyDescriptor(s.dataElements,"typeRepresentation")),delete s.dataElements.typeRepresentation,s.grid.semantics={},void 0!==s.dataElements.icon&&null!==s.dataElements.icon&&(Object.defineProperty(s.grid.semantics,"icon",Object.getOwnPropertyDescriptor(s.dataElements,"icon")),delete s.dataElements.icon),void 0!==s.dataElements.readOnly&&null!==s.dataElements.readOnly&&Object.defineProperty(s.grid,"readOnly",Object.getOwnPropertyDescriptor(s.dataElements,"readOnly")),void 0!==s.dataElements.disabled&&null!==s.dataElements.disabled&&Object.defineProperty(s.grid,"disabled",Object.getOwnPropertyDescriptor(s.dataElements,"disabled")),s.dataElements.hasOwnProperty("value")&&(Object.defineProperty(s.grid,"data",Object.getOwnPropertyDescriptor(s.dataElements,"value")),delete s.dataElements.value),s.dataElements.hasOwnProperty("data")&&(Object.defineProperty(s.grid,"data",Object.getOwnPropertyDescriptor(s.dataElements,"data")),delete s.dataElements.data),void 0===s.grid.data&&s.children)for(s.grid.data={},Object.defineProperty(s.grid.data,"menu",Object.getOwnPropertyDescriptor(s,"children")),delete s.children,u=s.grid.data.menu.length,r=0;r<u;++r)if(_(l=s.grid.data.menu[r]),l.children&&l.children.length>0){Object.defineProperty(l,"submenu",Object.getOwnPropertyDescriptor(l,"children")),delete l.children;for(var d=l.submenu,c=d.slice(0,d.length),h=null;c.length>0;)(h=c.splice(0,1)[0]).children&&h.children.length>0&&(c=c.concat(h.children),Object.defineProperty(h,"submenu",Object.getOwnPropertyDescriptor(h,"children")),delete h.children),_(h)}var y=null;for(y in s.dataElements)Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(s.dataElements,y)),delete s.dataElements[y];if(delete s.dataElements,s.action){for(y in void 0===s.grid.data&&(s.grid.data={}),s.action)Object.defineProperty(s.grid.data,y,Object.getOwnPropertyDescriptor(s.action,y)),delete s.action[y];delete s.action}var w=new p(s);w.hide(),w._ID=s.id,i.push(w)}return{nodes:i,typeReps:t.typeRepresentations,enums:t.enums}}function _(e){if(e.dataElements){var t=null,i=null,n={label:"title",typeRepresentation:"type"};for(t in e.dataElements)i=t,n.hasOwnProperty(t)&&(i=n[t]),Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(e.dataElements,t)),delete e.dataElements[t]}}}var L=function(e){e.isDestroyed()||this._documentListeners.forEach((function(t){e.unsubscribe(t)}))},A=function(e,t){this._documentListeners.push(this.items.subscribe({event:e},t))};var U=["function","functionIcon","functionMenu","functionMenuIcon","chevronMenuIcon","threeDotsMenu","layout","functionMenuIconCount","icon","customBoolean"];function j(e){var t=!0;return e.processDescendants({processNode:function(e){if(e){var i=e.nodeModel.getAttributeValue("typeRep");U.includes(i)||(t=!1)}}}),t}function R(e){return e.options.grid.data}function N(){for(var e=0,t=0,n=this._toolbar._getNbElementsInPopup().nbElementsInPopup>w?i.Utils.Client.getScrollbarWidth():0,o=0;o<this._toolbar.getNumberOfItems();o++){var a=this._toolbar.getItemFromIndex(o);"popup"===a.container&&a.element._treeNodeModel&&!1!==a.element._treeNodeModel.options.visibleFlag&&!a.alwaysInOverflow&&(t=Math.max(t,a.data.tweakerWidth))}var r=!1;this.items.processDescendants({processNode:function(e){e&&e.nodeModel&&e.nodeModel.getLabel()&&e.nodeModel.options.displayLabel&&(r=!0)},onlyVisibleNodes:!0}),r&&(e=this._popupDataGridView.sizeColumnToFit("label",{computeAllRows:!0})+20),t=Math.max(t,this._popupDataGridView.sizeColumnToFit("data",{computeAllRows:!0})),this._popupDataGridView.layout.setColumnVisibleFlag("label",r),this._popupDataGridView.layout.setColumnWidth("label",e),this._popupDataGridView.layout.setColumnWidth("data",t);var s=(r?e:0)+t+n,l=this._popupDataGridView.getContent().style.width;if("100%"===l||parseFloat(l)!==s){var u=this._popupDataGridView.width;this._popupDataGridView.width=s,this._popupDataGridView.fire("dimensionsChanged"),c.Engine.firefox&&s!==u&&(this._popupDataGridView.getDimensions(!0),this._popupDataGridView.invalidateLayout({updateCellContent:!1,updateCellLayout:!0,updateCellAttributes:!1}))}this.elements.dropdownPopup.getContent().setStyle("visibility","visible")}var B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{overflowManagement:{defaultValue:"scroll",type:"string",category:"Behavior"},direction:{defaultValue:"horizontal",type:"string",category:"Appearance"},items:{defaultValue:null,type:"DS/TreeModel/TreeDocument",category:"Model"},typeRepresentationFactory:{defaultValue:null,type:"DS/Tweakers/TypeRepresentationFactory",category:"Model"},executionContext:{defaultValue:void 0,type:"object"},popupDisplayStyle:{defaultValue:"DataGridView",type:"string",category:"Appearance"},addTweakersIDs:{defaultValue:!1,type:"boolean"}}},enumerable:!1,configurable:!0}),t.prototype.createTreeDocument=function(e){var t=null,i=I(e);return i&&((t=new u).prepareUpdate(),t.addRoot(i.nodes),t.pushUpdate()),t},t.prototype.updateModel=function(e){this.items&&this.items.empty();var t=I(e);t&&(this.items||(this.items=new u),this.items.prepareUpdate(),this.items.addRoot(t.nodes),this.items.pushUpdate())},t.prototype._preBuildView=function(t){var i=this;e.prototype._preBuildView.call(this,t),this._toolbar=new r({touchMode:t?t.touchMode:void 0,popupClass:"wux-generated-toolbar-popup"}),this._updateCounter=0,this._debounceManagePopupWidth=o.debounce((function(){i._managePopupWidth.bind(i)}),100)},t.prototype.buildView=function(){var e=this;this._toolbar._customDropDownManagement=!0,this._toolbar._enableCalculus=function(e){"tweakersBuilt"===e&&(this._isCalculusEnabled=!0)},this._toolbar._enableSizeCalculus=function(t){if(this._isCalculusEnabled&&t&&t.element){var i=P(t.element),n=e._getNodeModelFromTweaker(i);if(n&&!1!==n.options.visibleFlag)return!0}return!1},this._toolbar.addEventListener("itemRemoved",(function(e){if(e&&e.options&&e.options.item&&e.options.item.element){var t=e.options.item.element._treeNodeModel;t&&t.__generatedToolbarNodeModelUpdate&&(t.removeEventListener(t.__generatedToolbarNodeModelUpdate),t.__generatedToolbarNodeModelUpdate=void 0)}})),this._properties.typeRepresentationFactory.value=new h,this.elements=this._toolbar.elements,this.elements.container.dsModel=this,this._documentListeners=[]},t.prototype._postBuildView=function(){"Basic"===this.popupDisplayStyle?C.call(this):this.__isModelCommandsOnly?M.call(this):O.call(this)},t.prototype.showAllAndResize=function(){T.call(this),this._manageAllToolbarItemsVisibility()},t.prototype.handleEvents=function(){var e=this;n.addEventOnElement(this,this._toolbar,"dimensionsChanged",(function(){e._manageAllToolbarItemsVisibility()})),n.addEventOnElement(this,this._toolbar,"liveChange",(function(t){var i=P(t.target),n=e._getNodeModelFromTweaker(i);V.call(e,i,n)}))},t.prototype._applyProperties=function(e){this.prepareUpdateView(),this.isDirty("disabled")&&this._applyDisabled(e?e.disabled:void 0),!this.isDirty("visibleFlag")||e&&void 0===e.visibleFlag||this._applyVisibleFlag(e?e.visibleFlag:void 0),this.isDirty("domId")&&this._applyDomId(e?e.domId:void 0),this.isDirty("direction")&&this._applyDirection(e.direction),this.isDirty("overflowManagement")&&this._applyOverflowManagement(e.overflowManagement),this.isDirty("popupDisplayStyle")&&this._applyPopupDisplayStyle(e.popupDisplayStyle),this.isDirty("items")&&this._applyItems(e.items),this.isDirty("addTweakersIDs")&&this._applyAddTweakersIDs(e.addTweakersIDs),this.pushUpdateView()},t.prototype._applyPopupDisplayStyle=function(e){"Basic"===this.popupDisplayStyle?(this._toolbar._customDropDownManagement=!1,C.call(this)):this.__isModelCommandsOnly?M.call(this):O.call(this)},t.prototype._applyAddTweakersIDs=function(e){this.prepareUpdateView(),this.pushUpdateView()},t.prototype._applyOverflowManagement=function(e){var t="scroll"===this.overflowManagement?this.overflowManagement:this.__isModelCommandsOnly?"custom":"dropdown";this._toolbar.overflowManagement=t},t.prototype._applyDirection=function(e){this._toolbar.direction=this.direction},t.prototype._applyItems=function(e){if(e&&L.call(this,e),this.items){var t=this;!function(e){for(var t=[],i=__spreadArray([],e.getRoots(),!0),n=-1,o=-1,a=0;a<i.length;a++){var r=i[a].options.position;void 0===r&&(i[a].options.position=y.TOOLBAR_POSITIONS.NEAR,r=y.TOOLBAR_POSITIONS.NEAR),r===y.TOOLBAR_POSITIONS.NEAR&&(a!==n+1&&e.addRoot(i[a],n+1),n++,o++),r===y.TOOLBAR_POSITIONS.CENTER&&(a!==o+1&&e.addRoot(i[a],o+1),o++),t.push(r)}}(this.items);var i=!0,n=function(){t.items&&!t.items.isDestroyed()&&i&&b.call(t)};A.call(this,"addChild",n),A.call(this,"removeChild",n),A.call(this,"empty",(function(){i=!1})),A.call(this,"modelUpdate",(function(){i||(i=!0,b.call(t))}))}b.call(this)},t.prototype._applyTouchMode=function(t){e.prototype._applyTouchMode.call(this,t),m.call(this),this._popupDataGridView&&(this._popupDataGridView.layout.cellHeight=_(this.touchMode))},t.prototype._applyDisabled=function(t){e.prototype._applyDisabled.call(this,t),m.call(this)},t.prototype.isReady=function(){return!!this._isReady},t.prototype._managePopupWidth=function(){var e=this;this._popupDataGridView&&this._popupDataGridView.onReady((function(){e._popupDataGridView.hasPendingCellsToRender()?e._popupDataGridView.subscribeOnceToAllCellsRendered(N.bind(e)):N.call(e)}))},t.prototype._managePopupHeight=function(e){if(this._popupDataGridView)if(e){this._popupDataGridView.maxVisibleRowCount=void 0;var t=parseInt(this.elements.dropdownPopup.getContent().getStyle("height"))-10;if(t!==this._popupDataGridView.height)return this._popupDataGridView.height=t,!0}else this._popupDataGridView.maxVisibleRowCount||(this._popupDataGridView.maxVisibleRowCount=w);return!1},t.prototype.prepareUpdateView=function(){this._updateCounter++},t.prototype.pushUpdateView=function(){this._updateCounter--,0===this._updateCounter&&b.call(this)},t.prototype.updateNodeModel=function(e,t){if(this.items){var i=void 0,n=this.items.getChildren().length,o=this.getNodeModelByID(e);if(o)return o.updateOptions(t),!0;for(var a=0;a<n;a++)if(R(i=this.items.getChildren()[a])&&R(i).menu)for(var r=R(i).menu,s=r.length,l=function(i){var n=r[i];return n.id===e?(Object.keys(t).forEach((function(e){var i=t[e];n[e]=i})),{value:!0}):n.submenu&&u.updateNodeModelSubMenu(n,e,t)?{value:!0}:void 0},u=this,p=0;p<s;p++){var d=l(p);if("object"==typeof d)return d.value}return!1}},t.prototype.updateNodeModelSubMenu=function(e,t,i){if(e.submenu){for(var n=e.submenu,o=n.length,a=function(e){var o=n[e];return o.id===t?(Object.keys(i).forEach((function(e){var t=i[e];o[e]=t})),{value:!0}):o.submenu&&r.updateNodeModelSubMenu(o,t,i)?{value:!0}:void 0},r=this,s=0;s<o;s++){var l=a(s);if("object"==typeof l)return l.value}return!1}},t.prototype.getNodeModelByID=function(e){if(this.items)for(var t=void 0,i=this.items.getRoots(),n=0;n<i.length;n++)if((t=i[n])._ID===e)return t},t.prototype._getMenuLabelFromID=function(e){var t="",i=this.getNodeModelByID(e);if(i){var n=F(this,i);n.label&&(t=n.label)}return t},t.prototype.giveFocusTo=function(e){var t=this.getNodeModelByID(e),i=this._getToolbarItem(t);P(i.element).focus()},t.prototype._getNodeModelFromTweaker=function(e){if(this.items)for(var t=void 0,i=this.items.getRoots(),n=0;n<i.length;n++)if((t=i[n])._associatedView===e)return t},t.prototype._getToolbarItem=function(e){for(var t=e._associatedView.getContent();t!==this._toolbar.getContent()&&!t.hasClassName("wux-toolbar-items");)t=t.getParent();return this._toolbar.getItemFromElement(t)},t.prototype._manageOverflowButtonVisibility=function(){if("scroll"!==this.overflowManagement){var e=!1;this.items.processDescendants({onlyVisibleNodes:!0,processNode:function(t){return e=!0,{stopProcessing:!0}}}),e?this.elements.dropdownButtonContainer.show():this.elements.dropdownButtonContainer.hide()}},t.prototype._manageAllToolbarItemsVisibility=function(){if(this.items){this.items.prepareUpdate();for(var e=0;e<this._toolbar._elementsArray.length;e++)this._manageToolbarItemVisibility(this._toolbar._elementsArray[e]);this.items.pushUpdate(),this._manageOverflowButtonVisibility()}},t.prototype._manageToolbarItemVisibility=function(e){void 0!==e&&("scroll"!==this.overflowManagement&&("popup"===e.container?!1===e.element._treeNodeModel.options.visibleFlag?e.element._treeNodeModel.isHidden()||(this.items.prepareUpdate(),e.element._treeNodeModel.hide(),this.items.pushUpdate()):e.element._treeNodeModel.isHidden()&&(this.items.prepareUpdate(),e.element._treeNodeModel.show(),this.items.pushUpdate()):e.element._treeNodeModel.isHidden()||(this.items.prepareUpdate(),e.element._treeNodeModel.hide(),this.items.pushUpdate())),!1===e.element._treeNodeModel.options.visibleFlag?e.element.addClassName("wux-toolbar-items-invisible"):e.element.removeClassName("wux-toolbar-items-invisible"))},t.prototype._manageDisplayLabelChange=function(e){if(void 0!==e){var t=e.element._treeNodeModel.options._associatedLabel;t&&(e.displayLabel&&!1!==e.element._treeNodeModel.options.visibleFlag?t.show():t.hide())}},t.prototype.destroy=function(){e.prototype.destroy.call(this),L.call(this,this.items)},t.prototype.hide=function(t){e.prototype.hide.call(this,t),this.elements.dropdownPopup?this.elements.dropdownPopup.hide():this._currentMenuModel&&d.hide()},t}(a);return l.addClass(B,"generatedToolbar"),B})),define("DS/Tweakers/TweakerArray",["UWA/Core","DS/Tweakers/TweakerMultiRep","DS/Controls/Button","DS/Utilities/KeyboardUtils","DS/Tree/TreeListView","DS/TreeModel/TreeNodeModel","DS/Tweakers/TypeRepresentationFactory","DS/Tweakers/TweakerUtils","DS/Utilities/Dom"],(function(e,t,i,n,o,a,r,s,l){"use strict";let u=t.inherit({name:"tweakerArray",doc:void 0,publishedProperties:{editorTitle:{defaultValue:"Array Editor",type:"string"},valueType:{defaultValue:"string",type:"string"},value:{defaultValue:[],type:"array",advancedSetter:!0},displayRowIndexes:{defaultValue:!0,type:"boolean"},itemEditionTrigger:{defaultValue:"double click",type:"string"}},buildView:function(){this._parent(),void 0!==this.elements.container&&this.elements.container.addClassName("wux-tweakers-array"),this.dialogOptions.title||(this.dialogOptions.title=this.editorTitle)},_preEditValue:function(t,i){return void 0===i||"array"===e.typeOf(i)&&0===i.length||null===i||!("typedarray"!==e.typeOf(i)&&!v.call(this,this.valueType,i))&&this._parent(t,i)},_convertValueToStringRepresentation:function(){var e=[];for(var t in this.value){if(!this.value.hasOwnProperty(t))break;e.push(s._getStringRepresentationFromValue(this.valueType,this.value[t]))}return e},_applyValueInline:function(t){var i="",n=this._convertValueToStringRepresentation();if(this.value&&this.value.length>0)if("string"==typeof this.value&&0===this.value.indexOf("["))i=this.value;else{for(var o in i="[",this.value){if(!this.value.hasOwnProperty(o))break;var a="";if("object"==typeof this.value[o])try{a=JSON.stringify(this.value[o])}catch(e){return""}else a="string"==typeof this.value[o]?'"'+(a=this.value[o].replace(/\\"/g,'"')).replace(/"/g,'\\"')+'"':n?"string"==typeof n[o]?'"'+(a=n[o].replace(/\\"/g,'"')).replace(/"/g,'\\"')+'"':n[o]:this.value[o];i+=a+","}","===i.slice(-1)&&(i=i.substring(0,i.length-1)),i+="]"}else void 0===this.value||null===this.value?i="":this.value&&0===this.value.length&&(i="[]");this.internalTweakerString&&this.internalTweakerString.value!==i&&(this.internalTweakerString.value=i),this.editor&&!e.equals(this.value,this.editor.value)&&(this.editor._isValueBeingSet=!0,"dialog"===this.augmentedDisplay?this.editor.value=this._copyValueForDialog():this.editor.value=this.value,this.editor._isValueBeingSet=!1),this._updateEditorColumnsOption()},_applyValueStd:function(e){var t=this,i="in place"===t.itemEditionTrigger;if(this._isValueBeingSet=!0,t.doc||t._buildStdEditor(),t.doc){if(t.editor.getManager().prepareUpdateView(),void 0===t.value||null===t.value||t.value&&0===t.value.length)if(1!==(o=t.doc.getRoots()).length){t.doc.empty();var n=new a({grid:{data:void 0},inEdition:i});t.doc.addRoot(n)}else o[0].updateOptions({grid:{data:void 0},inEdition:i});if(t.value&&t.value.length>0){for(var o=t.doc.getRoots(),r=0;r<t.value.length;r++)if(o&&r<o.length&&t.value[r]!==o[r].options.grid.data)o[r].updateOptions({grid:{data:t.value[r]},inEdition:i});else if(!o||r>=o.length){n=new a({grid:{data:t.value[r]},inEdition:i});t.doc.addChild(n)}if(o&&o.length>t.value.length)for(;t.value.length!==o.length;)t.doc.removeRoot(o[t.value.length])}t.editor.getManager().pushUpdateView()}this._isValueBeingSet=!1,this._updateEditorColumnsOption()},_applyReadOnly:function(e){switch(this.displayStyle){case"inline":this._parent();break;case"std":this._parent(),this._updateEditorColumnsOption()}},_applyValueType:function(e){this.editor&&(this.editor.valueType=this.valueType),this._updateEditorColumnsOption()},_applyDisplayRowIndexes:function(){this.editor&&this.editor.getManager().setHeadersDimensions({width:this.displayRowIndexes?5*(this.editor.getManager().getDocument().getRoots().length-1).toString().length+20:void 0,height:0})},_applyItemEditionTrigger:function(e){var t=this;t.doc&&t.doc.getAllDescendants().forEach((function(e){var i="in place"===t.itemEditionTrigger;e.options.inEdition!==i&&(e.options.inEdition=i)}))},_handleEvents:function(){var e=this;l.addEventOnElement(this,this.getContent(),"change",(function(t){e.internalTweakerString&&e._applyValueInline()}))},_applyProperties:function(e){this.isDirty("valueType")&&this._applyValueType(e.valueType),this.isDirty("displayRowIndexes")&&this._applyDisplayRowIndexes(),this._preEditValue(null,this.value)||(this.value=[]),this._parent(e)},_updateEditorColumnsOption:function(){this.editor&&"std"===this.displayStyle&&(this.editor.getManager().setColumnOptions("data",{isEditable:!this.readOnly}),this.editor.getManager().setColumnOptions("column_action",{isHidden:"typedarray"===e.typeOf(this.value)||this.readOnly}),this.editor.getManager().updateView(!0))},_buildInlineEditor:function(){this._parent(),this.elements.internalView.addClassName("wux-tweakers-array-inline-editor")},_applyLiveChangeFlag:function(){this.editor&&this.liveChangeFlag&&s.enableLiveChangeOnTreeListView(this.editor)},_applyTouchMode:function(){this._parent(),this.editor&&(this.editor.defaultCellHeight=this.touchMode?44:30)},_buildStdEditor:function(){var t=this,a={defaultCellHeight:this.touchMode?44:30,height:"auto",isSortable:!1,apiVersion:2,resize:{columns:!0},selection:{toggle:!1,canMultiSelect:!1,unselectAllOnEmptyArea:!1},show:{rowHeaders:t.displayRowIndexes,columnHeaders:!1},headersDimensions:{width:25,height:0},columns:[{dataIndex:"tree",isHidden:!0,isEditable:!0},{dataIndex:"data",text:"Value",width:"auto",onCellRequest:function(i){if(i.nodeModel&&i.nodeModel.options){var n=i.nodeModel.options,o=n.grid,a=o.data,s=t.valueType;i.cellView.getContent();if("typedarray"===s)s=(t.value&&t.value.constructor&&t.value.constructor.name?t.value.constructor.name.toLocaleLowerCase():"String").replace("array","");else"auto"===s&&(s=e.typeOf(a));var u={typePath:s,touchMode:t.touchMode,context:"inlinedTemplate",readOnly:!n.inEdition,onViewCreated:function(e){void 0!==e&&(i.cellView._setReusableContent(e),l.onNodeRendered(e.getContent(),(function(){n.giveFocus&&(n.inEdition?(l.pushUserInteractionContext(),e.focus({preventScroll:!0}),l.popUserInteractionContext()):i.cellView.getGridEngine()._giveFocus(!0),i.cellView&&n.inEdition&&i.cellView.getContent().setAttribute("draggable",!1))})))}};void 0===WUX.typeRepFactory||o._buildFailure?(WUX.typeRepFactory=new r,WUX.typeRepFactory.onReady=function(){o._buildFailure||WUX.typeRepFactory.generateView(a,u)}):WUX.typeRepFactory.generateView(a,u)}},onCellChange:function(e){if(e.event&&e.event.dsModel)return e.event.dsModel.value}},{dataIndex:"column_action",isEditable:!1,width:50,text:"",isHidden:"typedarray"===e.typeOf(this.value)||t.readOnly,onCellRequest:function(e){if(!e.isHeader){var n=e.cellView.getContent(),o=new i({icon:"plus",displayStyle:"lite"});o.getContent().addClassName("wux-tweakers-array-add-element"),o.getContent().setStyle("margin-right","5"),l.addEventOnElement(n,o.getContent(),"click",(function(i){_.call(t),p.call(t,e.rowID),i.stopPropagation()})),o.visibleFlag=e.nodeModel.isSelected(),n.setContent(o),e.btnPlus=o;var a=new i({icon:"minus",displayStyle:"lite"});a.getContent().addClassName("wux-tweakers-array-remove-element"),l.addEventOnElement(n,a.getContent(),"click",(function(i){f.call(t),p.call(t,e.rowID),i.stopPropagation()})),a.visibleFlag=e.nodeModel.isSelected(),n.addContent(a),e.btnMinus=a}}}],shouldAcceptDrag:function(t){var i=!(!t||!t.nodeModel)&&t.nodeModel.options.inEdition;return!this.readOnly&&"typedarray"!==e.typeOf(this.value)&&!i},shouldDisplayTooltip:function(e){if(e.isHeader)return{shortHelp:""};if("tree"===e.dataIndex)return{shortHelp:e.nodeModel.getLabel()};if("data"===e.dataIndex){const t=e.nodeModel.getAttributeValue("data");return{shortHelp:JSON.stringify(t)}}},onDragOverCell:function(i,n){if(t.readOnly||"typedarray"===e.typeOf(t.value))return!1;"middle"===n.dropPosition&&(n.dropPosition="top"),n.manager.setDragOverStateForNode(n.nodeModel,n.dropPosition)},onDropCell:function(i,n){if(t.readOnly||"typedarray"===e.typeOf(t.value))return!1;var o=this.unserializeDragAndDropEvent(i);if(o){var a=o.source.uuid;if(this._uxid!==a)return!1}return"middle"===n.dropPosition&&(n.dropPosition="top"),t._cellJustDropped=!0,!0},onDragEnterBlank:function(i,n){return!t.readOnly&&"typedarray"!==e.typeOf(t.value)},onDropBlank:function(i,n){if(t.readOnly||"typedarray"===e.typeOf(t.value))return!1;var o=this.unserializeDragAndDropEvent(i);if(o){var a=o.source.uuid;if(this._uxid!==a)return!1}return t._cellJustDropped=!0,!0}};a.headersDimensions={width:25,height:0},t.editor=new o(a),t._applyLiveChangeFlag(),l.addEventOnElement(t,t.editor.getManager(),"click",(function(e,i){p.call(t,i?i.data.rowID:null),d.call(t,i,e,"click")})),l.addEventOnElement(t,t.editor.getManager(),"dblclick",(function(e,i){d.call(t,i,"double click")})),l.addEventOnElement(t,t.editor.getManager(),"liveChange",(function(e,i){w.call(t,i)})),l.addEventOnElement(t,t.editor.getContent(),"mouseover",(function(e,i){p.call(t,i?i.data.rowID:null)})),l.addEventOnElement(t,t.editor.getContent(),"mouseleave",(function(e){p.call(t)})),l.addEventOnElement(t,t.editor.getContent(),"keyup",(function(e){if(e.keyCode===n.DELETE&&t.doc&&t.doc.getXSO()){for(var i=t.doc.getXSO().get(),o=i[0]._getRowID(),a=0;a<i.length;a++)t.doc.removeRoot(i[a]);t.doc.getAllDescendants()[o].select()}})),l.addEventOnElement(t,t.editor.getContent(),"keydown",(function(e){if(n.previous(e.keyCode)){var i=t.doc.getXSO().get()[0]._getRowID();if(o=t.doc.getAllDescendants()[i-1])t.doc.getXSO().empty(),o.select(),(a=t.editor.getManager().nodePositionInVisibleViewport(o))<0?t.editor.getManager().scrollToNode(o,"top"):a>0?t.editor.getManager().scrollToNode(o,"bottom"):t.editor.getManager().updateView()}else if(n.next(e.keyCode)){var o,a;i=t.doc.getXSO().get()[0]._getRowID();if(o=t.doc.getAllDescendants()[i+1])t.doc.getXSO().empty(),o.select(),(a=t.editor.getManager().nodePositionInVisibleViewport(o))<0?t.editor.getManager().scrollToNode(o,"top"):a>0?t.editor.getManager().scrollToNode(o,"bottom"):t.editor.getManager().updateView()}else if(e.keyCode===n.F2){var r,s=t.doc.getSelectedNodes();if(0===s.length)return;r=s[0],"in place"!==t.itemEditionTrigger&&(r.options.inEdition?c.call(t,r,!1,!0):h.call(t,r))}})),t.doc=t.editor.getDocument(),t.doc.onNodeModelUpdate((function(e){t._isValueBeingSet||y.call(t)})),t.doc.addModelEventListener("addChild",(function(e){t._isValueBeingSet||(t._cellJustDropped||h.call(t,e.data.nodeModel),t._cellJustDropped=!1,t._applyDisplayRowIndexes(),y.call(t))})),t.doc.addModelEventListener("removeChild",(function(e){t._isValueBeingSet||(t._applyDisplayRowIndexes(),y.call(t))})),t.editor.getContent().addClassName("wux-tweakers-array-editor"),t.elements.internalView=e.createElement("div",{class:"wux-tweakers-array-container"}),t.editor.inject(t.elements.internalView),t.elements.internalView.inject(t.elements.container)},_buildEditor:function(e){return new u(e)},_processValueFromString:function(e){function t(e){var t,i,n,o;function a(){var e,t,a,r,s,l,u,p,d,c,h;for(e="",t=1,a=i[0],u=","!==(r=n[a]||","),p='"'===r,h="{"===a||"["===a,s=!1;!s&&t<=i.length&&(e=(l=i.indexOf(r,t)+(u?1:0))>0?i.slice(0,l):i,h&&(d=(e.match(new RegExp("["===a?"\\[":a,"g"))||[]).length,c=(e.match(new RegExp("]"===r?"\\]":r,"g"))||[]).length),h&&d!==c||1!==e.length&&p&&e.slice(-2)[0]===o||(s=!0),l!==t);)t=l;return(i=t>0?i.slice(t+(u?0:1),i.length):"").startsWith(",")&&(i=i.slice(1)),'"'===a&&'"'===r&&(e=e.slice(1,-1)),e=e.replace(/\\"/g,'"')}for(t=[],n={'"':'"',"{":"}","[":"]"},o="\\",i=e;i&&i.length>0;){var r=i.length,s=a();if(r===i.length)break;t.push(s)}return t}if(this._isValueBeingSet=!0,"string"==typeof e){if(""===e)return this.value&&(this.value.length=0),void(this._isValueBeingSet=!1);var i;i=0===e.indexOf("[")?t(e.substring(1,Math.max(1,e.length-1))):t(e);for(var n=0;n<i.length;n++)if("string"==typeof i[n]){var o=i[n].replace(/\\"/g,'"');i[n]=m.call(this,this.valueType,o,!0)}else i[n]=m.call(this,this.valueType,i[n],!0);if(!v.call(this,this.valueType,i))return;Array.isArray(i)&&this._processValueFromCopy(i)}this._isValueBeingSet=!1},_processValueFromCopy:function(t){if(!e.equals(this.value,t)&&(!t||0===t.length||v.call(this,this.valueType,t))){var i=this.value;if(null==i&&!this._lockUI&&t&&(i=[]),"typedarray"===e.typeOf(t)){if("typedarray"===e.typeOf(i)&&t.length===i.length)for(var n=0;n<t.length;n++)i[n]!==t[n]&&(i[n]=t[n])}else if(Array.isArray(t))if("typedarray"===e.typeOf(i)){if(t.length===i.length)for(n=0;n<t.length;n++)i[n]!==t[n]&&(i[n]=t[n])}else if(void 0!==t&&null!=i){"typedarray"!==e.typeOf(i)&&"array"!==e.typeOf(i)&&(i=[]);for(n=0;n<t.length;n++){var o=t[n];null!==o&&(n<i.length&&i[n]!==o?i[n]=o:n>=i.length&&i.push(o))}i.length>t.length&&i.splice(t.length,i.length-t.length)}this.value=i}},_copyValueForDialog:function(){return this.value?this.value.slice():void 0},_placeholderView:function(){var t=this,i="in place"===t.itemEditionTrigger;t.elements._placeholder||(t.elements._placeholder=e.createElement("div",{class:"wux-tweakers-array-placeholder"}),e.createElement("span",{class:"wux-tweakers-array-placeholder-span"}).inject(t.elements._placeholder).setContent("Click here to add items"),e.createElement("span",{class:"wux-tweakers-array-placeholder-icon wux-ui-3ds wux-ui-3ds-list-add wux-ui-3ds-3x"}).inject(t.elements._placeholder),l.addEventOnElement(t,t.elements._placeholder,"click",(function(e){t.doc||t._buildStdEditor(),t.elements._placeholder.style.display="none",t._lockUI=!0,t.doc.empty(),t._lockUI=!1;var n=new a({grid:{data:m.call(t,t.valueType,"date"===t.valueType?new Date:"")},inEdition:i});t.doc.addRoot(n),t._popup?t._popup.setBody(t.editor):t._dialog&&(t._dialog.content=t.editor)})));t._popup?t._popup.setBody(t.elements._placeholder):t._dialog&&(t._dialog.content=t.elements._placeholder),t.elements._placeholder.style.display="block"}});function p(e){var t=this;function i(e,t){e.btnMinus.visibleFlag=t,e.btnPlus.visibleFlag=t}function n(e,t){return e&&(e===t||e.nodeModel.isSelected())}var o,a,r,s=null!==(o=e)&&isFinite(o)&&(r=(a=t.editor.getManager().getCell(o,"column_action"))?a.getView():null)?r.getCellInfos():null;t._lastSelectedCellInfos&&!n(t._lastSelectedCellInfos,s)&&(i(t._lastSelectedCellInfos,!1),t._lastSelectedCellInfos=null),t._lastHoveredCellInfos&&!n(t._lastHoveredCellInfos,s)&&(i(t._lastHoveredCellInfos,!1),t._lastHoveredCellInfos=null),s&&s.btnMinus&&s.btnPlus&&(i(s,!0),s.nodeModel.isSelected()?t._lastSelectedCellInfos=s:t._lastHoveredCellInfos=s)}function d(e,t){var i;e?(i=e.nodeModel,!this.readOnly&&this.itemEditionTrigger===t&&i?h.call(this,i):this._currentlyInEdition&&this._currentlyInEdition!==i&&2!==e.columnID&&c.call(this,this._currentlyInEdition,!1,!0)):c.call(this,this._currentlyInEdition,!1,!0)}function c(e,t,i){e&&(e.options.inEdition=t,e.options.giveFocus=i,this._currentlyInEdition=t?e:null,e.notifyModelUpdate(),this.editor.getManager().updateView())}function h(e){this.doc&&(this.doc.prepareUpdate(),this._currentlyInEdition&&("in place"===this.itemEditionTrigger?this._currentlyInEdition=null:c.call(this,this._currentlyInEdition,!1,!1)),c.call(this,e,!0,!0),this.doc.unselectAll(),e.select(),this.doc.pushUpdate())}function y(){var e=this;if(void 0!==e.doc){for(var t=e.doc.getRoots(),i=[],n=0;n<t.length;n++){var o=t[n];if("addItem"!==o.options.grid.type)if("string"==typeof o.options.grid.data){var a=m.call(e,"typedarray"!==e.valueType?e.valueType:"number",o.options.grid.data);if(!g.call(e,e.valueType,a))return void e._applyValue(e.value);i.push(a)}else g.call(e,e.valueType,o.options.grid.data)?i.push(o.options.grid.data):i.push(void 0)}(e._dialog&&e._dialog.visibleFlag||e._popup&&e._popup.visibleFlag)&&(e._lockUI||void 0===i||JSON.stringify(i)===JSON.stringify(e._changeOptions)||(e.fire("liveChange",i),e._changeOptions=i,e.editor.value=i)),(!e._dialog||e._dialog&&!e._dialog.visibleFlag)&&(e._processValueFromCopy(i),e._applyValue(e.value))}}function w(e){var t=this;if(e.cellView._reusableContent&&void 0!==t.doc){for(var i=t.doc.getRoots(),n=[],o=0;o<i.length;o++){var a=i[o];if("addItem"!==a.options.grid.type)if("string"==typeof a.options.grid.data){if(r=e.nodeModel===a?m.call(t,"typedarray"!==t.valueType?t.valueType:"number",e.cellView._reusableContent.value):m.call(t,"typedarray"!==t.valueType?t.valueType:"number",a.options.grid.data),!g.call(t,t.valueType,r))return void t._applyValue(t.value);n.push(r)}else if(g.call(t,t.valueType,e.cellView._reusableContent.value)||g.call(t,t.valueType,a.options.grid.data)){var r;e.nodeModel===a?n.push(e.cellView._reusableContent.value):n.push(a.options.grid.data)}else n.push(void 0)}if(t._dialog&&t._dialog.visibleFlag||t._popup&&t._popup.visibleFlag){var s=t.editor.value;t.editor.value=n,JSON.stringify(s)!==JSON.stringify(t.editor.value)&&t.fire("liveChange",t.editor.value)}}}function _(){var e=this,t=new a({grid:{data:m.call(e,e.valueType,"date"===e.valueType?new Date:"")}}),i=0,n=e.doc.getSelectedNodes();0!==n.length&&(i=n[0]._getLocalID()+1);var o=e.doc.getNthRoot(i);e.doc.insertBefore(t,o),e._applyDisplayRowIndexes()}function f(){var e=this,t=e.doc.getChildren().length;if(t>1){0!==(i=e.doc.getSelectedNodes()).length?(i[0]._getRowID(),e.doc.removeRoot(i[0])):(e.doc.getNthRoot(t-1)._getRowID()+1,e.doc.removeRoot(e.doc.getNthRoot(t-1)))}else if(1==t){var i;0!==(i=e.doc.getSelectedNodes()).length?e.doc.removeRoot(i[0]):e.doc.removeRoot(e.doc.getNthRoot(t-1)),e._placeholderView()}e._applyDisplayRowIndexes()}function v(e,t){if(t&&t.length>0)for(var i=0;i<t.length;i++){var n=t[i];if(!g.call(this,e,n))return!1}return!0}function g(t,i){return void 0===i||("auto"===t&&(t=e.typeOf(i)),s._isFromType(t,i))}function m(t,i,n){if("auto"===t){if("string"===e.typeOf(i))try{return parsedValue=JSON.parse(i),parsedValue}catch(e){return i}return i}return s._getValueFromString(t,i,n)}return u.computeStringFromValue=function(e,i,n){return t.computeStringFromValue(e,i,n)},u.computeHeight=function(e,i,n){return t.computeHeight(e,i,n)},u})),define("DS/Tweakers/AbstractMagnitudeViewModules",["require","exports","DS/Tweakers/TweakerBase","DS/Tweakers/TweakerUtils","DS/Utilities/Utils","DS/Utilities/Dom","UWA/Core","DS/Controls/SpinBox","DS/Controls/ComboBox"],(function(e,t,i,n,o,a,r,s,l){"use strict";var u={};var p=function(e,t){i.prototype.baseViewModule.call(this,e,t)};o.applyMixin(p,i.prototype.baseViewModule),p.prototype.setDisplayOptions=function(e){};var d=function(e,t){this._magnitudeLabel=null,this._magnitudeInput=null,this._magnitudeChooser=null,this._toleranceSpan=null,this._toleranceInput=null,p.call(this,e,t)};function c(){var e=this,t=this._tweaker.displayOptions,i=this._tweaker.magnitudeKey;this._options.hasLabel&&(this._toleranceSpan=new r.Element("span"),a.generateIcon("math-more-less",{target:this._toleranceSpan}),this._toleranceSpan.classList.add("wux-tweakers-magnitude-tolerance-span"));var n=u.TweakerAbstractMagnitude._getStringsFromMagnitudeAndToleranceValue(this._tweaker.value,i,t);this._toleranceInput=new s({displayStyle:"lite",decimals:t.precision,allowUndefinedFlag:!0,fireOnlyFromUIInteractionFlag:!0,value:void 0!==n.tolerance?parseFloat(n.tolerance):void 0}),this._toleranceInput.getContent().classList.add("wux-tweakers-magnitude-tolerance-input");var o=u.TweakerAbstractMagnitude._getToleranceSupportedUnits(t.supportedUnits,i),p=u.TweakerAbstractMagnitude._getToleranceUnit(t.unit);this._toleranceChooser=new l({elementsList:y.call(this,o),enableSearchFlag:!1,fireOnlyFromUIInteractionFlag:!0,value:p}),this._toleranceChooser.getContent().classList.add("wux-tweakers-magnitude-tolerance-chooser"),this._toleranceChooser.inject(this._view),a.addEventOnElement(this,this._toleranceInput,"change",(function(t){var i;t.stopPropagation();var n,o,a,r=e._tweaker.value,s=r&&r.hasOwnProperty("tolerance"),l=e._tweaker.magnitudeKey;if(o=s?r[l]:r,void 0!==e._toleranceInput.value){var p=e._tweaker.displayOptions,d=u.TweakerAbstractMagnitude._getToleranceSupportedUnits(p.supportedUnits,l),c=u.TweakerAbstractMagnitude._getToleranceUnit(p.unit),h=d&&d[c];a=e._toleranceInput.value*h.ratio}void 0!==a?((i={})[l]=o,i.tolerance=a,n=i):n=o,e.setTweakerValue(n)})),a.addEventOnElement(this,this._toleranceChooser,"change",(function(t){var i;t.stopPropagation();var n=e._tweaker.displayOptions,o=e._tweaker.magnitudeKey,a=e._tweaker.value;if(a&&a.hasOwnProperty("tolerance")&&void 0!==a.tolerance){var r=a[o],s=u.TweakerAbstractMagnitude._getToleranceSupportedUnits(n.supportedUnits,o),l=u.TweakerAbstractMagnitude._getToleranceUnit(n.unit),p=s&&s[l],d=s&&s[e._toleranceChooser.value],c=a.tolerance*d.ratio/p.ratio,h=((i={})[o]=r,i.tolerance=c,i);u.TweakerAbstractMagnitude._setToleranceUnit(n,e._toleranceChooser.value,o),e.setTweakerValue(h)}else u.TweakerAbstractMagnitude._setToleranceUnit(n,e._toleranceChooser.value,o)}))}function h(){var e=this._tweaker.displayOptions;return e.tolerance&&!this._toleranceInput&&c.call(this),e.tolerance?(this._options.hasLabel&&this._toleranceSpan.inject(this._view),this._toleranceInput.inject(this._view),this._toleranceChooser.inject(this._view)):this._toleranceInput&&(this._options.hasLabel&&this._toleranceSpan.remove(),this._toleranceInput.remove(),this._toleranceChooser.remove()),this._view.setAttribute("tolerance",!0===e.tolerance),e.tolerance}function y(e){var t=[];for(var i in e){var n=e[i];t.push({label:n.label,value:i})}return t}o.applyMixin(d,p),d.prototype.buildView=function(){var e=this._tweaker.displayOptions,t=this._tweaker.magnitudeKey;if(u.TweakerAbstractMagnitude._isMagnitudeAndToleranceOptions(this._tweaker.value,t,e)){this._view=new r.Element("div"),this._view.classList.add("wux-tweakers-magnitude-editors"),this._view.setAttribute("has-label",!0===this._options.hasLabel),this._options.hasLabel&&(this._magnitudeLabel=document.createElement("label"),this._magnitudeLabel.classList.add("wux-tweakers-magnitude-label"),this._magnitudeLabel.textContent=e.label,this._view.appendChild(this._magnitudeLabel));var i=u.TweakerAbstractMagnitude._getStringsFromMagnitudeAndToleranceValue(this._tweaker.value,t,this._tweaker.displayOptions);this._magnitudeInput=new s({displayStyle:"lite",decimals:e.precision,allowUndefinedFlag:!0,fireOnlyFromUIInteractionFlag:!0,value:void 0!==i[t]?parseFloat(i[t]):void 0}),this._magnitudeInput.getContent().classList.add("wux-tweakers-magnitude-input"),this._magnitudeInput.inject(this._view);var n=u.TweakerAbstractMagnitude._getMagnitudeSupportedUnits(e.supportedUnits,t),o=u.TweakerAbstractMagnitude._getMagnitudeUnit(e.unit,t);this._magnitudeChooser=new l({elementsList:y.call(this,n),enableSearchFlag:!1,fireOnlyFromUIInteractionFlag:!0,value:o}),this._magnitudeChooser.getContent().classList.add("wux-tweakers-magnitude-chooser"),this._magnitudeChooser.inject(this._view),h.call(this)}},d.prototype.handleEvents=function(){var e=this;a.addEventOnElement(this,this._magnitudeInput,"change",(function(t){var i;t.stopPropagation();var n,o=e._tweaker.displayOptions,a=e._tweaker.magnitudeKey,r=u.TweakerAbstractMagnitude._getMagnitudeSupportedUnits(o.supportedUnits,a),s=u.TweakerAbstractMagnitude._getMagnitudeUnit(o.unit,a),l=r&&r[s];void 0!==e._magnitudeInput.value&&(n=e._magnitudeInput.value*l.ratio);var p,d=e._tweaker.value;d&&d.hasOwnProperty("tolerance")?((i={})[a]=n,i.tolerance=d.tolerance,p=i):p=n,e.setTweakerValue(p)})),a.addEventOnElement(this,this._magnitudeChooser,"change",(function(t){var i;t.stopPropagation();var n,o=e._tweaker.value,a=o&&o.hasOwnProperty("tolerance"),r=e._tweaker.displayOptions,s=e._tweaker.magnitudeKey,l=u.TweakerAbstractMagnitude._getMagnitudeSupportedUnits(r.supportedUnits,s),p=u.TweakerAbstractMagnitude._getMagnitudeUnit(r.unit,s),d=l&&l[p],c=l&&l[e._magnitudeChooser.value];a?((i={})[s]=o[s]*c.ratio/d.ratio,i.tolerance=o.tolerance,n=i):o&&(n=o*c.ratio/d.ratio),u.TweakerAbstractMagnitude._setMagnitudeUnit(r,e._magnitudeChooser.value,s),e.setTweakerValue(n)}))},d.prototype.setValue=function(e){var t=this._tweaker.magnitudeKey,i=u.TweakerAbstractMagnitude._getStringsFromMagnitudeAndToleranceValue(e,t,this._tweaker.displayOptions);this._magnitudeInput.value=void 0!==i[t]?parseFloat(i[t]):void 0,this._toleranceInput&&(this._toleranceInput.value=void 0!==i.tolerance?parseFloat(i.tolerance):void 0)},d.prototype.setDisplayOptions=function(e,t){var i={label:1,precision:2,tolerance:4,supportedUnits:8,unit:16},n=0;for(var o in i)e[o]!==t[o]&&(n+=i[o]);n&i.label&&this._magnitudeLabel&&(this._magnitudeLabel.textContent=e.label);var a=this._tweaker.magnitudeKey;if(n&i.precision&&(this._magnitudeInput.decimals=e.precision,this._toleranceInput&&(this._toleranceInput.decimals=e.precision)),n&i.supportedUnits){var r=u.TweakerAbstractMagnitude._getMagnitudeSupportedUnits(e.supportedUnits,a);if(this._magnitudeChooser.elementsList=y.call(this,r),this._toleranceChooser){var s=u.TweakerAbstractMagnitude._getToleranceSupportedUnits(e.supportedUnits,a);this._toleranceChooser.elementsList=y.call(this,s)}}if(n&i.unit){var l=u.TweakerAbstractMagnitude._getMagnitudeUnit(e.unit,a);if(this._magnitudeChooser.value=l,this._toleranceChooser){var p=u.TweakerAbstractMagnitude._getToleranceUnit(e.unit,a);this._toleranceChooser.value=p}this.setValue(this._tweaker.value)}n&i.tolerance&&h.call(this)},d.prototype.setTouchMode=function(e){this._view&&(this._magnitudeInput.touchMode=e,this._magnitudeChooser.touchMode=e,this._toleranceInput&&(this._toleranceInput.touchMode=e,this._toleranceChooser.touchMode=e))},d.prototype._giveFocus=function(){this._magnitudeInput.focus()};var w=function(e,t){this._readOnlyInlineContainer=null,this._readOnlyInline=null,this._standardEditor=null,p.call(this,e,t)};return o.applyMixin(w,p),w.prototype.buildView=function(){var e=this;this._readOnlyInlineContainer=new r.createElement("div"),this._readOnlyInline=new i.prototype.VIEW_MODULES.readOnly.classObject(this._tweaker,{useCustomContainerDiv:this._readOnlyInlineContainer}),this._view=n._buildTweakerAggregateView(this._tweaker,{viewModule:this,inlined:this._readOnlyInlineContainer,getExtended:function(){return e._standardEditor=new d(e._tweaker,{hasLabel:!0}),e._standardEditor}},{overlapContainer:!0,getExtendedViewHeight:function(){return"auto"},onPopupDisplay:function(){e._standardEditor._giveFocus()},adaptWidthToContainer:!1}),this._view.getContent().addClassName("wux-tweakers-magnitude wux-tweakers-magnitude-divdotseditors"),this.setValue(this._tweaker.value)},w.prototype.setValue=function(e){this._readOnlyInline.setValue(e),this._standardEditor&&this._standardEditor.setValue(e)},w.prototype.setDisplayOptions=function(e,t){e.precision===t.precision&&e.tolerance===t.tolerance&&e.unit===t.unit||this._readOnlyInline.setValue(this._tweaker.value),this._standardEditor&&this._standardEditor.setDisplayOptions(e,t)},w.prototype.setTouchMode=function(e){this._view&&(!0===e?this._readOnlyInlineContainer.setAttributeNode(document.createAttribute("touch-mode")):this._readOnlyInlineContainer.removeAttribute("touch-mode"),!0===e?this._view.getContent().setAttributeNode(document.createAttribute("touch-mode")):this._view.getContent().removeAttribute("touch-mode"),this._readOnlyInline.setTouchMode(e),this._standardEditor&&this._standardEditor.setTouchMode(e),this._view.touchMode=e)},{setHelpers:function(e,t){u[e]=t},Base:p,Editors:d,DivDotsEditors:w}})),define("DS/Tweakers/CustomTreeNodeViewTweaker",["DS/Tree/TreeNodeView","DS/Tweakers/TypeRepresentationFactory","DS/Utilities/DocUtils","DS/Utilities/Utils","DS/Tweakers/TweakerUtils"],(function(e,t,i,n,o){"use strict";return function(a){var r=this;a=a||{},r.updateNodeParent=function(e,t){var i=e.getParent(),o=i.options.grid,s=n.getObjectPropertyInfo(a.value,o.path);if(s.valid&&s.value!==o.data&&(o.data=s.value),i&&!i._isTrueRoot()){var l=t.getCell(i._getRowID(),"data");if(l){var u=l.getView();u&&u.updateView()}r.updateNodeParent(i,t)}},r.updateNodeChildren=function(e,t,i){var o=e.getChildren();o&&o.forEach((function(e){if(e){var o=e.options.grid;if(o&&void 0!==o.path){var a=n.getObjectPropertyInfo(i,o.path),s=t.getCell(e._getRowID(),"data");if(s&&a.valid&&a.value!==o.value){var l=s.getView();o.data=a.value,l&&l.updateView()}r.updateNodeChildren(e,t,i)}}}))},r.customTreeNodeView=e.extend({init:function(e){this._parent(e)},updateInternalParameters:function(){this._parent();var e=this.getCellInfos();if(a._portalTweaker&&("tree"===e.dataIndex||"oneColumn"===a.displayMode&&"data"===e.dataIndex)&&i.getWebUXPropertyDocumentation(e.nodeModel.options.label,a.realPath?a.realPath:a.valueType,(function(t){var i={title:t&&t.property?t.property:"",longHelp:t&&t.doc?t.doc:e.nodeModel.options.label};e.cellView._setTooltip(e.cellView.elements.labelContainer,i)})),!e.isHeader){var t=e.nodeModel;this.getContent().setAttribute("has-children",t.hasChildren()),this.getContent().setAttribute("is-required",t.options.grid.required||!1),"left"===a.labelDisplay||a.authoringFlag?(this.getContent().addClassName("wux-left-labelDisplay"),this.getContent().removeClassName("wux-right-labelDisplay")):"right"===a.labelDisplay&&(this.getContent().addClassName("wux-right-labelDisplay"),this.getContent().removeClassName("wux-left-labelDisplay")),e.cellView&&e.cellView.elements.labelContainer&&e.cellView._setTooltip(e.cellView.elements.labelContainer,{shortHelp:t.options.tooltip})}},_setTooltip:function(e,t){var i,n,o,a=this,r=t.title?t.title:"";i=a.getCellInfos().dataIndex,n=a.getCellModel().options,o=t.longHelp,"tree"!==i&&o===String(n.value)||"tree"===i&&o===String(n.value.options.grid.name)&&""===r||(a.getContent().tooltipInfos={title:r,shortHelp:t.shortHelp,longHelp:t.longHelp,mouseRelativePosition:!0})}}),this.treeOptions={defaultCellHeight:38,isSortable:!1,cellClass:this.customTreeNodeView,apiVersion:2,show:{rowHeaders:!1,columnHeaders:!1},expanderStyle:"triangle",performances:{buildLinks:!1},treeDocument:a.doc,resize:{columns:!0},selection:!1,columns:[{dataIndex:"tree",text:"Label",isDraggable:!1,isHidden:!1,width:"40%"},{dataIndex:"type",isHidden:!0},{dataIndex:"tweakerType",isHidden:!0},{dataIndex:"data",text:"Value",isEditable:!0,width:"auto",onCellRequest:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options&&!e.nodeModel.options.temporary){var i=function(i,n){var s=o._setModelViewForDataColumnOneColumnCase(r,e,a.tweakersExecutionContext,i,n),l=e.nodeModel.options.grid;void 0===WUX.typeRepFactory||l._buildFailure?WUX.typeRepFactory=new t({onReady:function(){this.generateView(s.data,s.generateViewOptions)}}):WUX.typeRepFactory.generateView(s.data,s.generateViewOptions)};a.promisesArray?a.promisesArray.push(new Promise((function(e,t){i(e)}))):i()}},setValue:function(e){e.nodeModel.setAttribute("data",e.value)},getValue:function(e){return e.nodeModel.options.grid.data}},{dataIndex:"remove",isHidden:!0}]}}})),define("DS/Tweakers/TweakerObjectBase",["UWA/Core","DS/Tweakers/TweakerMultiRep","DS/Controls/Button","DS/Tree/TreeListView","DS/TreeModel/TreeNodeModel","DS/Tree/TreeNodeView","DS/TreeModel/TreeDocument","DS/Tweakers/TypeRepresentationFactory","DS/Tweakers/ModelProxy","DS/Utilities/Utils","DS/Tweakers/CustomTreeNodeViewTweaker","DS/Tweakers/TweakerUtils"],(function(e,t,i,n,o,a,r,s,l,u,p,d){"use strict";function c(e){if(e){var t=e.getChildren()?e.getLastChild():null,i=e.options.grid,n=t&&t.options.temporary,a=e._isTrueRoot()?this.value:i.data;"object"===i.type||"object"==typeof a?n||function(e){if(e){var t=e.options.grid,i=!e._isTrueRoot();e.prepareUpdate(),e.addChild(new o({label:"Add property to <b>"+(i?t.name:"current object")+"</b>",temporary:!0})),e.isExpanded()||e.expand(),e.pushUpdate()}}(e):n&&(e.prepareUpdate(),t.remove(),e.pushUpdate())}}let h=t.inherit({name:"tweakerObjectBase",doc:void 0,publishedProperties:{editorTitle:{defaultValue:"Object Editor",type:"string",category:"Appearance"},hierarchyCriteria:{defaultValue:"category",type:"string",category:"Behavior"},configuration:{defaultValue:void 0,type:"objet",category:"Behavior"},recursionDepth:{defaultValue:0,type:"integer",category:"Behavior"},permanentReadOnly:{defaultValue:!0,type:"boolean",category:"Behavior"},uiOptions:{defaultValue:{height:"inherit",maxHeight:"100%",rootMargin:7},type:"object",category:"Appearance"},labelDisplay:{defaultValue:"left",type:"string",category:"Appearance"},failureCapture:{defaultValue:!0,type:"boolean",category:"Behavior"},onFailure:{defaultValue:void 0,type:"function",category:"Behavior"},displayMode:{defaultValue:"twoColumns",type:"string",category:"Appearance"},authoringFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},authoringFilters:{defaultValue:void 0,type:"object",category:"Behavior"},typeDisplayFlag:{defaultValue:!1,type:"boolean",category:"Appearance"}},buildView:function(){this._parent(),void 0!==this.elements.container&&this.elements.container.addClassName("wux-tweakers-object"),this.dialogOptions.title||(this.dialogOptions.title=this.editorTitle)},buildPropertyList:function(){return[]},_applyHierarchyCriteria:function(){this._applyValue()},_applyRecursionDepth:function(){this._applyValue()},_applyConfiguration:function(e){this.configuration?u.isObjectEmpty(this.configuration)&&!e||this._applyValue():this.configuration={}},_applyProperties:function(e){this._parent(e),this.isDirty("labelDisplay")&&this._applyLabelDisplay(),this.isDirty("displayMode")&&this._applyDisplayMode(),this.isDirty("configuration")&&this._applyConfiguration(),this._applyLiveChangeFlag()},_applyValueStd:function(e){var t=this;if(t.doc&&!t._preventEditorRefresh){t.doc.prepareUpdate(),t.doc.empty();var i=t.buildPropertyList();!function e(t){for(var i=0;i<t.length;i++){var n=t[i],o=(n.name,null!=n.referenceValue?n.referenceValue:n.defaultValue);if(null==o&&n.type)switch(n.type){case"string":o="";break;case"number":o=0}"string"==typeof t[i]&&(t[i]={name:t[i]}),t[i].data=o,t[i].properties&&e(t[i].properties)}}(i),t.hierarchyCriteria?(l.modelToTreeDocument.call(t.doc,l.hierarchyFilter.call(i,{criteria:t.hierarchyCriteria}),"hierarchical","name"),"flat"!==t.hierarchyCriteria&&t.doc.expandNLevels({numberOfLevelsToExpand:0}),t.authoringFlag&&t._applyAuthoringFlag()):l.modelToTreeDocument.call(t.doc,i,"flat","name"),t.doc.pushUpdate()}},_processValueFromString:function(e){try{if(e){var t=JSON.parse(e);(this.authoringFlag||u.arePrototypesEqual(this.value,t))&&(this.value=JSON.parse(e))}}catch(e){this.value=void 0}},_createFlattenedObject:function(e){for(var t={},i=this.buildPropertyList(e),n=0;n<i.length;n++)t[i[n].name]=e&&"object"==typeof e?e[i[n].name]:void 0;return t},_copyValueForDialog:function(){return this.value?JSON.parse(JSON.stringify(this.value)):void 0},_buildInlineEditor:function(){this._parent(),this.elements.internalView.addClassName("wux-tweakers-object-inline-editor")},onPostUpdateView:function(e){if(this.editor){var t=this.editor.getManager();if(t)return t.onPostUpdateView(e)}},onPostUpdateViewOnce:function(e){if(this.editor){var t=this.editor.getManager();if(t)return t.onPostUpdateViewOnce(e)}},_applyValueInline:function(){if(this.internalTweakerString||this._buildInlineEditor(),this.internalTweakerString)try{this.internalTweakerString.value=JSON.stringify(this.value)}catch(e){this.internalTweakerString.value=""}this.editor&&!e.equals(this.value,this.editor.value)&&(this.editor._isValueBeingSet=!0,"dialog"===this.augmentedDisplay?this.editor.value=this._copyValueForDialog():this.editor.value=this.value)},_handleEvents:function(){var e=this;this.getContent().addEventListener("liveChange",(function(t){e._changeOptions&&(t.options=e._changeOptions)})),this.getContent().addEventListener("change",(function(t){e.internalTweakerString&&e._applyValueInline(),e._changeOptions&&(t.options=e._changeOptions)}))},_applyLabelDisplay:function(){this.editor&&(this.customTreeNodeView&&(this.customTreeNodeView.labelDisplay=this.authoringFlag?"left":this.labelDisplay),this.editor.getManager().updateView(!0))},_applyLiveChangeFlag:function(){this.editor&&this.liveChangeFlag&&d.enableLiveChangeOnTreeListView(this.editor)},_applyTypeDisplayFlag:function(){var e=this;if(e.editor){var t=e.editor.getManager();t.prepareUpdateView(),"std"!==e.displayStyle||e.authoringFlag||(e.typeDisplayFlag?"twoColumns"===this.displayMode?(t.showColumn("tweakerType"),t.setColumnOptions("tree",{width:"30%"}),t.setColumnOptions("tweakerType",{width:"10%"}),t.setColumnOptions("data",{width:"60%"})):"oneColumn"===this.displayMode&&(t.hideColumn("tweakerType"),t.setColumnOptions("data",{width:"100%"})):(t.hideColumn("tweakerType"),"twoColumns"===this.displayMode?(t.setColumnOptions("tree",{width:"40%"}),t.setColumnOptions("data",{width:"60%"})):"oneColumn"===this.displayMode&&t.setColumnOptions("data",{width:"100%"}))),t.pushUpdateView(!0)}},_applyDisplayMode:function(){function e(e,t){t=t||{},e.setOption("defaultCellHeight",t.cellHeight||38),e.setColumnOptions("tree",{width:t.widthTree||"40%"}),e.setColumnOptions("data",{width:t.widthTweaker||"53%"}),e._needToIndexRowsPosition()}if(this.editor){var t=this.editor.getManager();t.prepareUpdateView(),"std"===this.displayStyle&&(this.customTreeNodeView&&(this.customTreeNodeView.displayMode=this.displayMode),"oneColumn"===this.displayMode?(e(t,{cellHeight:60,widthTree:"0%",widthTweaker:"100%"}),t.hideColumn("tree"),t.hideColumn("tweakerType"),t.setColumnOptions("data")):(this.typeDisplayFlag&&!this.authoringFlag?(e(t,{widthTree:"30%"}),t.showColumn("tweakerType")):e(t),t.showColumn("tree"))),t.pushUpdateView(!0)}},_applyAuthoringFlag:function(){var e=this;if("inline"!==e.displayStyle){if(!e.editor)return;var t=e.editor.getManager();t.prepareUpdateView(),e.customTreeNodeView&&(e.customTreeNodeView.labelDisplay=e.authoringFlag?"left":e.labelDisplay),e.doc.prepareUpdate(),e.authoringFlag?(t.showColumn("remove"),t.showColumn("type"),t.hideColumn("tweakerType"),t.setColumnOptions("data",{width:"25%"}),e.doc.getAllDescendants().forEach((function(t){c.call(e,t)})),c.call(e,e.doc._getTrueRoot()),e._initTypeRepForProp()):(t.hideColumn("remove"),t.hideColumn("type"),e.typeDisplayFlag&&"twoColumns"===e.displayMode?(t.setColumnOptions("tweakerType",{width:"15%"}),t.showColumn("tweakerType")):"oneColumn"===e.displayMode?t.setColumnOptions("data",{width:"100%"}):t.setColumnOptions("data",{width:"53%"}),e.doc.getAllDescendants().forEach((function(e){e.options.temporary&&e.remove()}))),e.doc.pushUpdate(),t.pushUpdateView()}else e.editor&&(e.editor.authoringFlag=e.authoringFlag)},_checkAuthoringFilters:function(){if(this.authoringFilters)for(var e in this.authoringFilters)if(this.authoringFilters[e].types)for(var t in this.authoringFilters[e].types)void 0===WUX.typeRepFactory.getRegisteredTypeRepresentation(this.authoringFilters[e].types[t])&&(console.warn("[WEBUX][TweakerObjectBase] The required type representation ("+this.authoringFilters[e].types[t]+") is not registered in the TypeRepresentationFactory. The field will not be added."),delete this.authoringFilters[e].types[t]);else console.warn("[WEBUX][TweakerObjectBase] No type defined for the authoring filter ("+e+").")},_initTypeRepForProp:function(){var e=this;this._filterForProp={},this.doc&&this.doc.getAllDescendants().forEach((function(t){var i=t.options.grid;WUX.typeRepFactory=new s;var n="filteredType"+i.path;if(n=n.split(".").join("_"),WUX.typeRepFactory.typeEnums.customAllSupportedTypes=void 0,e._checkAuthoringFilters(),e.configuration[i.path]&&e.configuration[i.path].authoringFilters){if(e.configuration[i.path]&&e.configuration[i.path].authoringFilters){Array.isArray(e.configuration[i.path].authoringFilters)||(e.configuration[i.path].authoringFilters=[e.configuration[i.path].authoringFilters]);var o,a=0;e.configuration[i.path].authoringFilters[a];o=function(){for(var t=[],n=Object.keys(e.authoringFilters),o=0;o<n.length;o++){var r=n[o];for(a=0;a<e.configuration[i.path].authoringFilters.length;a++)if(r===e.configuration[i.path].authoringFilters[a])for(var s=0;s<e.authoringFilters[r].types.length;s++)t.push(e.authoringFilters[r].types[s])}return t.sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))},WUX.typeRepFactory.registerEnum(n,o);var r={};r[n]={stdTemplate:"enumSearchableCombo"};WUX.typeRepFactory.registerTypeRepresentations(r);if(e._filterForProp&&!e._filterForProp[n]){var l,u="default",p=0;if(i.authoringFilters instanceof Array)for(var d=0;d<i.authoringFilters.length;d++){var c=i.authoringFilters[d];e.authoringFilters[c].defaultType&&e.authoringFilters[c].defaultTypeWeight?e.authoringFilters[c].defaultTypeWeight>p&&(u=e.authoringFilters[c].defaultType,p=e.authoringFilters[c].defaultTypeWeight,e.authoringFilters[c].defaultValue&&(l=e.authoringFilters[c].defaultValue)):e.authoringFilters[c].defaultType&&0===p&&(u=e.authoringFilters[c].defaultType,e.authoringFilters[c].defaultValue&&(l=e.authoringFilters[c].defaultValue))}else"string"==typeof i.authoringFilters&&(void 0!==e.authoringFilters[i.authoringFilters].defaultType&&(u=e.authoringFilters[i.authoringFilters].defaultType),void 0!==e.authoringFilters[i.authoringFilters].defaultValue&&(l=e.authoringFilters[i.authoringFilters].defaultValue));"default"!==u&&(i.defaultType=u),void 0!==l&&(i.defaultValue=l),WUX.typeRepFactory.generateView(i.type?i.type:u,{typePath:n,context:"inlinedTemplate",onViewCreated:function(t){void 0!==t&&(e._filterForProp[n]=t)}})}}}else{if(e.authoringFilters&&e.authoringFilters.allSupportedTypes){function _(){for(var t=[],i=Object.keys(e.authoringFilters),n=0;n<i.length;n++){var o=i[n];if("allSupportedTypes"===o)for(var a=0;a<e.authoringFilters[o].types.length;a++){var r=e.authoringFilters[o].types[a];r&&t.push(r)}}return t.sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))}void 0!==e.authoringFilters.allSupportedTypes.defaultType&&(i.defaultType=e.authoringFilters.allSupportedTypes.defaultType),void 0!==e.authoringFilters.allSupportedTypes.defaultValue&&(i.defaultValue=e.authoringFilters.allSupportedTypes.defaultValue),WUX.typeRepFactory.registerEnum("customAllSupportedTypes",_);WUX.typeRepFactory.registerTypeRepresentations({customAllSupportedTypes:{stdTemplate:"enumSearchableCombo"}})}if(e._filterForProp&&!e._filterForProp[n]){var h="allSupportedTypes";void 0!==WUX.typeRepFactory.typeEnums.customAllSupportedTypes&&(h="customAllSupportedTypes");var y=WUX.typeRepFactory._getTypeData(e.valueType+"."+i.path).realType||"default",w=i.type?i.type:e.authoringFilters&&e.authoringFilters.allSupportedTypes&&e.authoringFilters.allSupportedTypes.defaultType?e.authoringFilters.allSupportedTypes.defaultType:y;WUX.typeRepFactory.generateView(w,{typePath:h,context:"inlinedTemplate",onViewCreated:function(t){void 0!==t&&(e._filterForProp[n]=t)}})}}}))},_buildStdEditor:function(){var t=this,o=window.location.pathname.indexOf("WUXPortalUI");t._portalTweaker=o>=0,t.doc=new r({shouldAcceptDrag:function(e){return!1}}),t.configuration||(t.configuration={}),t.customTreeNodeView=new p(t);var a=e.clone(this.uiOptions);"auto"===a.height?a.height="inherit":"inherit"===a.height&&(a.height="auto");var l=e.merge(t.customTreeNodeView.treeOptions,a);l.performances.resizeDebounceTimeout=500,t.editor=new n(l);var h=t.editor.getManager();t.liveChangeFlag&&d.enableLiveChangeOnTreeListView(t.editor),h.onNodeClick((function(e){if("tree"===e.dataIndex&&!t.authoringFlag){var i=e.cellView.getCellInfos().nodeModel;i.isExpanded()?i.collapse():i.expand()}})),t.doc.onNodeModelUpdate((function(e){if(e.target){var i=e.target.options.grid.name,n=e.target.options.grid.path,o=void 0===e.target.options.grid.data&&void 0!==e.target.options.grid.defaultValue?e.target.options.grid.defaultValue:e.target.options.grid.data;if(t.onNodeUpdate){var a=!e.target.getParent(),r=u.getObjectPropertyInfo(t.value,n).value;t.onNodeUpdate(i,n,o,{removed:a});t.authoringFlag&&("object"==typeof o&&r!==o||"object"==typeof r&&"object"!=typeof o||void 0===o)?t._applyValueStd():(t.customTreeNodeView.updateNodeParent(e.target,h),t.customTreeNodeView.updateNodeChildren(e.target,h,t.value)),t._changeOptions={propertyChangePath:n,propertyChangeName:i,propertyChangeValue:o}}}})),t.editor.getContent().addClassName("wux-tweakers-object-editor-full"),t.elements.internalView=e.createElement("div",{class:"wux-tweakers-object-container-full"}),t.editor.inject(t.elements.internalView),t.elements.internalView.inject(t.elements.container),h.setColumnOptions("remove",{dataIndex:"remove",isEditable:!1,width:30,text:"Remove",isHidden:!0,onCellRequest:function(e){var n=e.nodeModel,o=n.options.grid;if(!e.isHeader&&!n.options.temporary){var a=e.cellView.getContent(),r=new i({icon:"close",displayStyle:"lite",tooltipInfos:{shortHelp:"Remove this property"}});r.getContent().addEvent("click",(function(){if(t.value&&o.path){var e=o.path,i=e.split("."),a=i[i.length-1];for(var r in t.configuration)t.configuration.hasOwnProperty(r)&&r.startsWith(e)&&delete t.configuration[r];n.prepareUpdate(),u.removeObjectProperty(t.value,e)&&n.remove(),n.pushUpdate(),t.fire("change",{propertyChangeName:a,propertyChangePath:e})}})),a.setContent(r),e.removeButton=r}}}),h.setColumnOptions("tweakerType",{dataIndex:"tweakerType",isEditable:!1,width:"auto",text:"TweakerType",isHidden:!0,onCellRequest:function(e){var i=t._getTweakerTypeFromCellInfos(e);e.cellView.getContent().setText(i)}}),h.setColumnOptions("data",{dataIndex:"data",text:"Value",isEditable:!0,width:"auto",onCellRequest:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options&&!e.nodeModel.options.temporary){var i=d._setModelViewForDataColumnOneColumnCase(t,e),n=e.nodeModel.options.grid;void 0===WUX.typeRepFactory||n._buildFailure?(WUX.typeRepFactory=new s,WUX.typeRepFactory.onReady=function(){WUX.typeRepFactory.generateView(i.data,i.generateViewOptions)}):WUX.typeRepFactory.generateView(i.data,i.generateViewOptions)}}}),h.setColumnOptions("type",{dataIndex:"type",isEditable:!1,width:"auto",text:"Type",isHidden:!0,onCellRequest:function(e){if(!e.isHeader&&!e.nodeModel.options.temporary){void 0===WUX.typeRepFactory&&(WUX.typeRepFactory=new s);var i="filteredType"+e.nodeModel.options.grid.path;if(i=i.split(".").join("_"),t._filterForProp&&t._filterForProp[i])e.cellView.getContent().setContent(t._filterForProp[i]);else{var n="allSupportedTypes";void 0!==WUX.typeRepFactory.typeEnums.customAllSupportedTypes&&(n="customAllSupportedTypes"),WUX.typeRepFactory.generateView(e.nodeModel.options.grid.type||"default",{typePath:n,context:"inlinedTemplate",onViewCreated:function(n){void 0!==n&&t._filterForProp&&(t._filterForProp[i]=n,e.cellView.getContent().setContent(t._filterForProp[i]))}})}}},onCellChange:function(e){if(e.event&&e.event.dsModel)return e.event.dsModel.value},setValue:function(e){var i=e.nodeModel,n=i.options.grid;"default"===e.value||"defaultRep"===e.value||"uwaObject"===e.value?(n.type=void 0,t.configuration[n.path]&&(t.configuration[n.path].type=void 0)):(n.type=e.value,t.configuration[n.path]||(t.configuration[n.path]={}),t.configuration[n.path].type=e.value);var o=h.getCell(e.rowID,"data");if(o){var a=o.getView();a&&a.updateView()}c.call(t,i)},getValue:function(e){return e.nodeModel.options.grid.type}}),h.setColumnOptions("tree",{onCellRequest:function(e){if(!e.isHeader){var n=e.cellView,o=e.nodeModel;if(o){if(void 0===t.editor.options.shouldDisplayTooltip&&n.getContent().setAttribute("title",o.getLabel()),t.authoringFlag){var a=n.elements.labelContainer,r=o.options,l=r.grid;if(a.style.display="inline-block",r.temporary){var p=new i({icon:"plus",label:r.label,allowUnsafeHTMLLabel:!0,displayStyle:"lite",tooltipInfos:{shortHelp:"Add a new property"}});p.onClick=function(){var e=o.getParent(),i=e.options.grid.data,n=e.options.grid.path||"",a=t.authoringFilters&&t.authoringFilters.allSupportedTypes&&void 0!==t.authoringFilters.allSupportedTypes.defaultType?t.authoringFilters.allSupportedTypes.defaultType:"default",r=e.options.grid.name||"";if("object"==typeof i&&void 0!==i||(r.length>0?(i={},e.prepareUpdate(),e.options.grid.data=i,e.pushUpdate(),u.setObjectProperty(t.value,n,i)):i=t.value),e&&void 0!==i){var s,l,p,d="NewProp",h=1;if(i.hasOwnProperty(d)){do{p=d+"_"+h,h++}while(i.hasOwnProperty(p));d=p}s=n+(n.length>0?".":"")+d,l=t.authoringFilters&&t.authoringFilters.allSupportedTypes&&void 0!==t.authoringFilters.allSupportedTypes.defaultValue?t.authoringFilters.allSupportedTypes.defaultValue:void 0;var y=t.getPropertyDefinition({propPath:s,propName:d,propValue:l});y.data=l,y.type=a,e.prepareUpdate(),o.updateOptions({temporary:!1,label:d,grid:y}),u.addObjectProperty(t.value,s,l),c.call(t,e||t.doc._getTrueRoot()),e.pushUpdate(),t.fire("change",{propertyChangeName:d,propertyChangePath:s})}},a.setContent(p),e.addButton=p}else void 0===WUX.typeRepFactory&&(WUX.typeRepFactory=new s),WUX.typeRepFactory.generateView(l.name,{typePath:"string",context:"inlinedTemplate",onViewCreated:function(e){void 0!==e&&a.setContent(e)}})}else n.setLabel(o.getLabel());n.setIcons(o.getIcons()),n.setBadges(o.getBadges()),n._setExpanderState(o._expandState),n._setDepth(o._nodeDepth),e.cellView.elements.container.setContent(e.cellView.elements.layout)}}},onCellChange:function(e){var i=e.event?e.event.dsModel:null,n=e.nodeModel.options.grid;if(i){var o=n.path,a=o.split("."),r=a[a.length-1],s=i.value,l="";return a.length>1&&(l+=o.substr(0,o.length-r.length)),l+=s,t.value&&s.length>0&&l&&!u.isPropertyInObject(t.value,l)?{name:s,path:l}:(i.value=r,{name:r,path:o})}return null},setValue:function(e){var i=e.nodeModel,n=i.options.grid,o=e.value.name,a=e.value.path,r=n.path;if(a!==r){for(var s in t.doc.prepareUpdate(),function e(t){t&&!t.options.temporary&&(t.options.grid.path.substr(0,r.length)===r&&(t.prepareUpdate(),t.options.grid.path=a+t.options.grid.path.substr(r.length),t.pushUpdate()),t.getAllDescendants().forEach((function(t){e(t)})))}(i),t.configuration)if(t.configuration.hasOwnProperty(s)&&s.startsWith(r)){var l=a+s.substr(r.length);t.configuration[l]=t.configuration[s],delete t.configuration[s]}i.prepareUpdate(),i.options.label=n.name=o,u.removeObjectProperty(t.value,r),u.addObjectProperty(t.value,a,n.data),t.customTreeNodeView.updateNodeParent(i,h),i.pushUpdate(),t.doc.pushUpdate()}}}),t.authoringFlag&&t._applyAuthoringFlag(),t._applyDisplayMode(),t._applyTypeDisplayFlag()},_getTweakerTypeFromCellInfos:function(t){var i=this,n=void 0,o=t.nodeModel.options.grid,a=o.data,r="filteredType"+o.path;r=r.split(".").join("_");var l="allSupportedTypes";i.authoringFilters&&i.configuration&&i.configuration[o.path]&&i.configuration[o.path].authoringFilters&&(Array.isArray(i.configuration[o.path].authoringFilters)||(i.configuration[o.path].authoringFilters=[i.configuration[o.path].authoringFilters]),i.configuration[o.path].authoringFilters[0]&&(l=i.configuration[o.path].authoringFilters[0])),void 0===WUX.typeRepFactory&&(WUX.typeRepFactory=new s);var u=WUX.typeRepFactory._getTypeData(i.valueType+"."+o.path).realType;return i._filterForProp&&i._filterForProp[r]?n=i._filterForProp[r].value:i.authoringFilters&&i.authoringFilters[l]&&i.authoringFilters[l].defaultType in i.authoringFilters[l].types?n=i.authoringFilters[l].defaultType:""!==u&&void 0!==u?n=u:i.configuration&&i.configuration[o.path]&&(n=i.configuration[o.path].type),n||(n=e.typeOf(a)),n}});return h.computeStringFromValue=function(e,i,n){return t.computeStringFromValue(e,i,n)},h.computeHeight=function(e,i,n){return t.computeHeight(e,i,n)},h})),define("DS/Tweakers/TweakerWUXAbstract",["UWA/Core","DS/Tweakers/TweakerObjectBase"],(function(e,t){"use strict";let i=t.inherit({name:"tweakerWUXAbstract",doc:void 0,publishedProperties:{},buildView:function(){this._parent()},buildPropertyList:function(){if(this.value){var e=[];for(var t in this.value.publishedProperties){var i=this.value;do{i=Object.getPrototypeOf(i)}while(!i.hasOwnProperty(t));var n=this.value.publishedProperties[t];!1!==n.uiDisplay&&e.push({name:t,className:i.name,referenceValue:this.value[t],defaultValue:n.defaultValue,type:n.type,category:n.category,readOnly:n.readOnly,touchMode:this.value.touchMode})}return e}return[]},onNodeUpdate:function(t,i,n){if("array"===e.typeOf(this.value[t])||"object"===e.typeOf(this.value[t]))if(JSON.stringify(this.value[t])!==JSON.stringify(n))this.value[t]=n,this.fire("change");else{var o="_apply"+t.substring(0,1).toUpperCase()+t.substring(1,t.length);this.value[o]?this.value[o]():this.value._applyProperties()}if(!1===e.equals(this.value[t],n))this.value[t]=n,this.fire("change");else if("object"===e.typeOf(this.value[t])||"array"===e.typeOf(this.value[t])){o="_apply"+t.substring(0,1).toUpperCase()+t.substring(1,t.length);this.value[o]?this.value[o]():this.value._applyProperties()}}});return i.computeStringFromValue=function(e,i,n){return t.computeStringFromValue(e,i,n)},i.computeHeight=function(e,i,n){return t.computeHeight(e,i,n)},i})),define("DS/Tweakers/TweakerObject",["UWA/Core","DS/Tweakers/TweakerObjectBase","DS/Utilities/Utils","DS/Utilities/Array"],(function(e,t,i,n){"use strict";function o(e){return e=e||{},!!this.filter.parameters.displayFunctions||(this.configuration&&this.configuration[e.propName]&&this.configuration[e.propName].type?"function"!==this.configuration[e.propName].type:"function"!=typeof e.propValue)}function a(e){e=e||{};for(var t=0;t<this.filter.parameters.exceptions.length;t++)if(this.filter.parameters.exceptions[t]===e.propName)return!e.isAllExcept;return e.isAllExcept}function r(e){return e=e||{},new RegExp("^__").test(e.propName)||"constructor"===e.propName?-1:this.configuration&&this.configuration[e.propPath]&&void 0!==this.configuration[e.propPath].uiDisplay?this.configuration[e.propPath].uiDisplay?1:-1:this.filter.parameters.matchingRegexp&&!new RegExp(this.filter.parameters.matchingRegexp).test(e.propName)?-1:0}function s(e){if("object"!=typeof e||null==e)return!1;var t=Object.getPrototypeOf(e);if(!t)return!1;var i=Object.getPrototypeOf(t);return!(t&&i&&t!==i)}let l=t.inherit({name:"tweakerObject",doc:void 0,publishedProperties:{filter:{type:"object",defaultValue:{mode:"standard",parameters:{matchingRegexp:"",displayFunctions:!0,displayChainOfPrototypes:!1}}}},buildView:function(){this._parent()},_applyFilter:function(){this._applyValue()},buildPropertyList:function(){function t(e,n,l,u){var p=e;do{Object.getOwnPropertyNames(p).forEach((function(e){var r=l&&u?u+"."+e:e,d=i._treatProperty({propName:e,propPath:r,propValue:p[e]});d&&s(p[e])&&n!==i.recursionDepth&&t(p[e],n+1,d,r),l?(l.properties=l.properties||[],l.properties=l.properties.concat(d)):o=o.concat(d),d&&d.name&&(a[r]=!0)})),p=Object.getPrototypeOf(p)}while(r&&p)}var i,o,a,r;if(i=this,a={},o=[],void 0!==this.value&&null!==this.value&&("string"==typeof this.filter.mode&&(r=!0,"standard"===this.filter.mode&&(r=this.filter.parameters.displayChainOfPrototypes),t(this.value,0)),"function"==typeof this.filter.mode))return this.filter.mode.call(this);if(i.configuration&&(void 0===this.value||s(this.value))){var l=e.clone(this.value)||{};for(var u in i.configuration){if(a[u])break;for(var p=u.split("."),d=l,c=0;c<p.length;c++){var h=p[c];c<p.length-1?void 0!==d[h]&&null!==d[h]&&"object"==typeof d[h]||(d[h]={}):d[h]=void 0,d=d[h]}}n.clear(o),t(l,0)}return o},_buildEditor:function(e){return this._parent(e),e.value=this._createFlattenedObject(e.value),e.authoringFlag=this.authoringFlag,e.authoringFlag&&(e.readOnly=!1),e.recursionDepth=this.recursionDepth,e.configuration=this.configuration,e.typeDisplayFlag=this.typeDisplayFlag,void 0===this.value&&void 0!==e.value&&0!==Object.keys(e.value).length&&(this._lockUI=!0,this.value=this._createFlattenedObject(e.value),this._lockUI=!1),e.authoringFilters=this.authoringFilters,new l(e)},_applyProperties:function(e){this._parent(e)},getStringFromValue:function(e){var t="{/n";for(var i in e)t=t+i+": "+e[i]+"/n";return t+="}"},_treatProperty:function(e){return(e=e||{}).propPath=e.propPath||e.propName,e.filterMode=this.filter.mode,this.isPropertyValidWithMode(e)?this.getPropertyDefinition(e):[]},isPropertyValidWithMode:function(e){(e=e||{}).propPath=e.propPath||e.propName;var t=r.call(this,e);if(0!==t)return t>0;switch(e.filterMode){case"standard":return o.call(this,e);case"noneExcept":return e.isAllExcept=!1,a.call(this,e);case"allExcept":return e.isAllExcept=!0,a.call(this,e);default:return[]}},getPropertyDefinition:function(t){(t=t||{}).propPath=t.propPath||t.propName;var i={name:t.propName,path:t.propPath,referenceValue:t.propValue,touchMode:t.touchMode};return this.configuration&&this.configuration[t.propPath]&&(i=e.merge(i,this.configuration[t.propPath])),i},onNodeUpdate:function(e,t,n,o){if(null!=t)return this._preventEditorRefresh=!0,o&&o.removed?i.removeObjectProperty(this.value,t):i.setObjectProperty(this.value,t,n)||(void 0===this.value&&(this.value={}),i.addObjectProperty(this.value,t,n)),this._preventEditorRefresh=!1,n=this.value}});return l.computeStringFromValue=function(e,i,n){return t.computeStringFromValue(e,i,n)},l.computeHeight=function(e,i,n){return t.computeHeight(e,i,n)},l})),define("DS/Tweakers/TweakerUWAObject",["UWA/Core","DS/Tweakers/TweakerObject"],(function(e,t){"use strict";let i=t.inherit({name:"tweakerUWAObject",doc:void 0,publishedProperties:{},buildView:function(){this._parent()},buildPropertyList:function(){return void 0!==this.value&&null!==this.value&&"onlyOptions"===this.filter.mode?this._treatProperty({propName:"options",propValue:this.value.options}):this._parent()},_treatProperty:function(e){if("options"===(e=e||{}).propName&&"object"==typeof e.propValue){var t=[],i=this;return Object.getOwnPropertyNames(e.propValue).forEach((function(n){t=t.concat(i._treatProperty({propName:n,propValue:e.propValue[n]}))})),t}return this._parent(e)},isPropertyValidWithMode:function(e){return"defaultOptions"!==e.propName&&"elements"!==e.propName&&("onlyOptions"===e.filterMode?(e.filterMode="standard",this._parent(e)):this._parent(e))},onNodeUpdate:function(t,i,n){void 0!==this.value[t]?!1===e.equals(this.value[t],n)&&(this.value[t]=n,this.fire("change")):!1===e.equals(this.value.options[t],n)&&(this.value.options[t]=n,this.fire("change"))}});return i.computeStringFromValue=function(e,i,n){return t.computeStringFromValue(e,i,n)},i.computeHeight=function(e,i,n){return t.computeHeight(e,i,n)},i})),define("DS/Tweakers/TweakerEnum",["UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Controls/ComboBox","DS/Controls/ButtonGroup","DS/Controls/Button","DS/Tweakers/TweakerUtils","DS/Utilities/Dom"],(function(e,t,i,n,o,a,r,s){let l=i.inherit({name:"tweakerEnum",publishedProperties:{displayStyle:{defaultValue:"combo",type:"string"},valueType:{defaultValue:"enumString",type:"string"}},_buildView:function(){this._viewCreated=!1},_postBuildView:function(){this._viewCreated=!0,this._applyDisplayStyle(),this._parent()},_applyDisplayStyle:function(e){this._viewCreated&&this._parent(e)},buildView:function(){this._parent(),this.elements.container.addClassName("wux-tweakers-enum")},getStringFromValue:function(e){return p(this.valueType,e,this.possibleValues)}});function u(e,t,i){switch(e){case"enumInteger":return parseInt(t,10);case"number":return parseFloat(t);case"boolean":return null!==/true/i.exec(t)||"1"===t;case"enumString":default:return t;case"enumCustom":for(let e in i)if(i[e].toString()==t)return i[e];break;case"enumValueToProperty":for(let e in i)if(e.toString()==t)return e;break;case"object":return JSON.parse(t)}}function p(e,t,i){if(void 0===t)return"";if("object"===e)return JSON.stringify(t);if(("enumInteger"===e||"number"===e)&&(Number.isNan&&!0===Number.isNaN(t)||void 0!==isNaN&&!0===isNaN(t)))return"NaN";if("enumInteger"===e||"number"===e||"enumString"===e)return t.toString();if("enumCustom"===e)for(let e in i){if(e==t)return e;if(i[e]==t)return e}else{if("enumValueToProperty"!==e)return r._getValueFromString(e,t);for(let e in i)if(e==t)return i[e]}}l.computeStringFromValue=function(e,t,n){return i.computeStringFromValue(e,t,n)},l.computeHeight=function(e,t,n){return i.computeHeight(e,t,n)};let d=function(e,t){i.prototype.baseViewModule.call(this,e,t)};t.applyMixin(d,i.prototype.baseViewModule),d.prototype._getElementToFocus=function(){return this._view._getElementToFocus()};let c=function(e,t){this._loadEntriesBinded=h.bind(this),d.call(this,e,t)};function h(){this._view&&(this._view.elementsList=this._tweaker.possibleValues.call(this._tweaker).slice(0))}function y(){let t=this._tweaker;if(void 0!==t.possibleValues){if("enumString"===t.valueType){if("object"===e.typeOf(t.possibleValues)){let e=[];for(let i in t.possibleValues)t.possibleValues.hasOwnProperty(i)&&e.push({value:t.possibleValues[i],label:i});return e}return"array"===e.typeOf(t.possibleValues)?t.possibleValues.map((function(e){return"string"==typeof e?e:{label:void 0===e.label?e.value:e.label,value:e.value,icon:e.icon,description:e.description}})):t.possibleValues}if("enumDyn"===t.valueType&&"function"==typeof t.possibleValues)return[];{let e=[];if(t.possibleValues.constructor===Array)for(let i=0;i<t.possibleValues.length;i++)e.push(p(t.valueType,t.possibleValues[i],t.possibleValues));else if("enumValueToProperty"===t.valueType)for(let i in t.possibleValues)e.push({label:t.possibleValues[i],value:i});else for(let i in t.possibleValues)e.push({label:p(t.valueType,i,t.possibleValues),value:t.possibleValues[i]});return e}}return[]}t.applyMixin(c,d),c.AllowedViewOptions={enableSearchFlag:!0,mainElementVisibleFlag:!0,expanderIcon:"expand-down"},Object.freeze(c.AllowedViewOptions),c.prototype.buildView=function(){let e=this._options.viewOptions||{},t=this._tweaker;e.touchMode=t._getCurrentTouchMode(),e.disabled=t.readOnly,e.fireOnlyFromUIInteractionFlag=!0,e.reachablePlaceholderFlag=void 0===t.value||t.allowResetToUndefinedByUIFlag,e.placeholder=t.placeholder,this._view=new n(e),this._tweaker.viewOptions&&this.setViewOptions(this._tweaker.viewOptions),this.setPossibleValues(this._tweaker.possibleValues),this.setValue(this._tweaker.value),this._tweaker.getContent().classList.add("wux-tweakers-enum")},c.prototype.computeTweakerContentLength=function(){let e=this._tweaker.touchMode?54:31;let t=Math.max(s.computeStringWidth(this._view.label,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),this._tweaker.getEditedState()),50)+e;return this._view.elements.iconPlaceholder&&this._view.elements.iconPlaceholder.childElementCount>0&&(t=t+this._view.elements.iconPlaceholder.offsetWidth+11),t},c.prototype.handleEvents=function(){let e=this,t=this._tweaker,i=this._view;i.addEventListener("change",(function(n){n.stopPropagation(),e.setTweakerValue(u(t.valueType,i.value,t.possibleValues))})),i.addEventListener("show",(function(e){e.stopPropagation(),t.onShow()})),i.addEventListener("hide",(function(e){e.stopPropagation(),t.onHide({cancelFlag:!!e.options.cancelPopupSelection})})),i.addEventListener("preselectionChange",(function(n){if(n.stopPropagation(),i.preselectedIndex>=0){let n=i._getAllDescendants()[i.preselectedIndex].options.grid.valueItem;void 0===n&&(n=i._getAllDescendants()[i.preselectedIndex].options.label),e.setTweakerValue(u(t.valueType,n,t.possibleValues))}else e.setTweakerValue(void 0)})),"enumDyn"===t.valueType&&"function"==typeof t.possibleValues&&i.addEventListener("preDropdown",this._loadEntriesBinded)},c.prototype.destroy=function(){this._view.removeEventListener("preDropdown",this._loadEntriesBinded),d.prototype.destroy.call(this)},c.prototype.setViewOptions=function(e){this._setViewOptionsOnAbstract(this._view,e,c.AllowedViewOptions)},c.prototype.setPlaceholder=function(e){this._view&&(this._view.placeholder=e)},c.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.reachablePlaceholderFlag=void 0===this._tweaker.value||e)},c.prototype.setValue=function(e){let t=this._tweaker,i=this._view;"function"!=typeof t.possibleValues||i._isPopupOpened()||(this._lockValueUpdate=!0,i.elementsList=t.possibleValues.call(t).slice(0));let n=i.elementsList;if(n&&0!==n.length&&""!==e&&void 0!==e){if(null==e)return;let t=e.toString();for(let o=0;o<n.length;o++)if(e===n[o]||e===n[o].value||t===n[o]||t===n[o].value){i.selectedIndex=o;break}}else i.selectedIndex=-1},c.prototype.setPossibleValues=function(e){this._view&&(this._view.removeEventListener("preDropdown",this._loadEntriesBinded),"enumDyn"===this._tweaker.valueType&&"function"==typeof e?this._view.addEventListener("preDropdown",this._loadEntriesBinded):this._view.elementsList=y.call(this))};let w=function(e,t){d.call(this,e,t)};return t.applyMixin(w,d),w.prototype.buildView=function(){let e=this._options.viewOptions;e.disabled=this._tweaker.readOnly,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,this._view=new o(e);let t=this._tweaker.value;this.setPossibleValues(this._tweaker.possibleValues),this.setValue(t)},w.prototype.handleEvents=function(){let e=this,t=(this._tweaker,this._view);t.addEventListener("change",(function(i){i.stopPropagation(),e.setTweakerValue(t.value)}))},w.prototype.setPossibleValues=function(e){let t=this._tweaker,i=this._view;if(!i||!t||!e)return;let n=i.getButtonCount();for(let e=0;e<n;e++){let e=i.getButton(0);i.removeChild(e),e.destroy()}if("enumString"===t.valueType)e.forEach((function(e){if("object"==typeof e){const t=new a({type:i.type,label:e.label,value:e.value,icon:e.icon});e.description&&(t.tooltipInfos={shortHelp:e.description}),i.addChild(t)}else i.addChild(new a({type:i.type,label:e,value:e}))}));else if("enumDyn"===t.valueType);else if("enumValueToProperty"===t.valueType)for(let t in e)i.addChild(new a({type:i.type,label:e[t],value:t}));else for(let t in e)i.addChild(new a({type:i.type,label:t,value:e[t]}))},w.prototype.setValue=function(e){let t=this._tweaker,i=this._view;i&&t&&(i.value=e)},l.prototype.baseViewModule=d,l.prototype.VIEW_MODULES={combo:{classObject:c,options:{viewOptions:{enableSearchFlag:!1}}},comboLite:{classObject:c,options:{viewOptions:{enableSearchFlag:!1,mainElementVisibleFlag:!1,displayStyle:"lite"}}},searchableCombo:{classObject:c},buttonGroup:{classObject:w},buttonGroup_readOnly:{classObject:w}},l.prototype.registerViewModule=function(e,t){},l})),define("DS/Tweakers/TweakerVariant",["UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Tweakers/TweakerEnum","DS/Tweakers/TypeRepresentationFactory"],(function(e,t,i,n,o,a){"use strict";let r=n.inherit({name:"TweakerVariant",publishedProperties:{valueTypes:{defaultValue:void 0,type:"string"},currentType:{defaultValue:void 0,type:"string"},displayStyle:{defaultValue:"editors",type:"string"}},_postBuildView:function(){this._parent(),void 0!==this.elements.container&&this.elements.container.addClassName("wux-tweakers-variant")},_applyProperties:function(e){this._parent(e),this.isDirty("valueTypes")&&this._applyValueTypes(),this.isDirty("currentType")&&this._applyCurrentType()},_applyCurrentType:function(){this.elements._viewModule&&this.elements._viewModule.setCurrentType&&this.elements._viewModule.setCurrentType(this.currentType)},_applyValueTypes:function(){this.elements._viewModule&&this.elements._viewModule.setValueTypes&&this.elements._viewModule.setValueTypes(this.valueTypes)}});r.computeStringFromValue=function(e,t,i){return n.computeStringFromValue(e,t,i)},r.computeHeight=function(e,t,i){return n.computeHeight(e,t,i)};var s=function(e,t){n.prototype.baseViewModule.call(this,e,t)};t.applyMixin(s,n.prototype.baseViewModule),s.prototype.setValueTypes=function(){},s.prototype.setCurrentType=function(){},s.prototype._getElementToFocus=function(){return this._view._getElementToFocus()};var l=function(e,t){s.call(this,e,t)};t.applyMixin(l,s),l.prototype.buildView=function(){this._view=[];var t=e.createElement("div",{class:"wux-tweakers-variant-typeContainer"}),i=new o({value:this._tweaker.currentType,touchMode:this._tweaker._getCurrentTouchMode(),displayStyle:"comboLite"});i.getContent().addClassName("wux-tweakers-variant-typeCustomizer"),i.viewOptions={expanderIcon:"cog"},i.elements._viewModule._view.elements.icon.style.fontSize="1.2em",this._view.push(t),this._view.push(i),this.setCurrentType(this._tweaker.currentType)},l.prototype._getElementToFocus=function(){return this._view[1]._getElementToFocus()},l.prototype.handleEvents=function(){var e=this;i.addEventOnElement(this._view[1],this._view[1],"change",(function(t){t.stopPropagation(),e._tweaker.currentType=t.dsModel.value}))},l.prototype.setValue=function(e){!this._view||this._view.length<3||(this._view[2].value=e)},l.prototype.setValueTypes=function(e){!this._view||this._view.length<2||void 0===e||this._view[1].setProperties({possibleValues:e.trim().split("|"),value:this._tweaker.currentType})},l.prototype.setCurrentType=function(e){if(this._view&&!(this._view.length<2)){this._view[1].value=e;var t=parseInt(Date.now());if(this._currentTimeStamp=t,this._view.length>2){var n=this._view.pop();n.remove(),n.destroy()}var o=this,r={touchMode:this._tweaker._getCurrentTouchMode(),typePath:e,context:"inlinedTemplate",onViewCreated:function(e){void 0!==e&&(o._view.push(e),e.inject(o._view[0]),i.addEventOnElement(e,e,"preEdit",(function(e){e.stopPropagation(),o._tweaker.onPreEdit()})),i.addEventOnElement(e,e,"postEdit",(function(e){e.stopPropagation(),o._tweaker.onPostEdit()})),["liveChange","change"].forEach((function(t){i.addEventOnElement(e,e,t,(function(t){t.stopPropagation(),o.setTweakerValue(e.value)}))})),o.setTweakerValue(e.value),o._tweaker.fire("currentTypeChange"))},needToCreateViewAfterRequireEnded:function(){return o._currentTimeStamp===t},semantics:{allowResetToUndefinedByUIFlag:this._tweaker.allowResetToUndefinedByUIFlag}};void 0!==WUX.typeRepFactory?WUX.typeRepFactory.generateView(this._tweaker.value,r):WUX.typeRepFactory=new a({onReady:function(){this.generateView(o._tweaker.value,r)}})}},l.prototype.setTouchMode=function(e){if(this._view&&!(this._view.length<2)){var t=this._tweaker._getCurrentTouchMode();this._view[1].touchMode=t,this._view.length>2&&(this._view[2].touchMode=t)}};var u=function(e,t){s.call(this,e,t)};return t.applyMixin(u,s),u.prototype.buildView=function(){this.setCurrentType(this._tweaker.currentType)},u.prototype.setValue=function(e){this._view&&(this._view.value=e)},u.prototype.setCurrentType=function(e){var t=parseInt(Date.now());this._currentTimeStamp=t,void 0!==this._view&&(this._view.remove(),this._view.destroy(),this._view=void 0);var i=this,n={touchMode:this._tweaker._getCurrentTouchMode(),readOnly:!0,typePath:e,context:"inlinedTemplate",onViewCreated:function(e){void 0!==e&&(i._view=e,i.inject(i._tweaker.elements.container),i.setTweakerValue(e.value),i._tweaker.fire("currentTypeChange"))},needToCreateViewAfterRequireEnded:function(){return i._currentTimeStamp===t},semantics:{allowResetToUndefinedByUIFlag:this._tweaker.allowResetToUndefinedByUIFlag}};void 0!==WUX.typeRepFactory?WUX.typeRepFactory.generateView(this._tweaker.value,n):WUX.typeRepFactory=new a({onReady:function(){this.generateView(i._tweaker.value,n)}})},u.prototype.setTouchMode=function(e){this._view&&(this._view.touchMode=this._tweaker._getCurrentTouchMode())},r.prototype.baseViewModule=s,r.prototype.VIEW_MODULES={readOnly:{classObject:u},editors:{classObject:l}},r.prototype.registerViewModule=function(e,t){},r}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerAbstractMagnitude",["require","exports","DS/Tweakers/TweakerBase","DS/Tweakers/AbstractMagnitudeViewModules","DS/Core/WebUXComponents","i18n!DS/Tweakers/assets/nls/translation"],(function(e,t,i,n,o,a){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"divDotsEditors",type:"string"},value:{defaultValue:void 0,type:"undefined | number | {magnitude: number, tolerance: number}",advancedSetter:!0},displayOptions:{defaultValue:{label:a.TweakerAbstractMagnitude_MagnitudeAndTolerance_Label,precision:3,tolerance:!0,unit:"",supportedUnits:{}},type:"DisplayOptions"}}},enumerable:!1,configurable:!0}),t.prototype._applyDisplayOptions=function(e){var t=this.defaultDisplayOptions;Object.assign(t,this.displayOptions),this._properties.displayOptions.value=t,this.elements._viewModule&&this.elements._viewModule.setDisplayOptions&&this.elements._viewModule.setDisplayOptions(this.displayOptions,e)},t.prototype._applyProperties=function(t){this.isDirty("displayOptions")&&this._applyDisplayOptions(t.displayOptions),e.prototype._applyProperties.call(this,t)},t.prototype.updateDisplayOptions=function(e){var t=this.defaultDisplayOptions;Object.assign(t,this.displayOptions,e),this.displayOptions=t},t.prototype.getStringFromValue=function(e){var t=this.displayOptions,i=this.magnitudeKey;if(l(e,i,t)){var n=s(e,i,t);if(!n[i])return"";var o=n[i],a=d(t.supportedUnits,i),r=u(t.unit,i),h=a&&a[r];if(o+=" "+h.label,n.tolerance){o+="  "+n.tolerance;var y=c(t.supportedUnits,i),w=p(t.unit,i),_=y&&y[w];_&&_.label!==h.label&&(o+=" "+_.label)}return o}return""},Object.defineProperty(t.prototype,"magnitudeKey",{get:function(){return"magnitude"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultDisplayOptions",{get:function(){return{label:a.TweakerAbstractMagnitude_MagnitudeAndTolerance_Label,precision:3,tolerance:!0,unit:"",supportedUnits:{}}},enumerable:!1,configurable:!0}),t}(i);function s(e,t,i){var n;if(l(e,t,i)){var o=d(i.supportedUnits,t),a=u(i.unit,t),r=o&&o[a];if(!r)return{};var s=e&&e.hasOwnProperty("tolerance"),h=e&&e.hasOwnProperty(t),y=void 0,w=void 0;if(s){if(void 0!==e[t]&&(y=e[t]/r.ratio),void 0!==e.tolerance){var _=c(i.supportedUnits,t),f=p(i.unit,t),v=_&&_[f];v&&(w=e.tolerance/v.ratio)}}else h?void 0!==e[t]&&(y=e[t]/r.ratio):void 0!==e&&(y=e/r.ratio);var g=void 0,m=void 0;return void 0!==y&&(g=parseFloat(y.toFixed(i.precision)).toString()),void 0!==w&&(m=parseFloat(w.toFixed(i.precision)).toString()),(n={})[t]=g,n.tolerance=m,n}return{}}function l(e,t,i){return!!(i.hasOwnProperty("tolerance")&&i.hasOwnProperty("precision")&&i.hasOwnProperty("unit")&&i.hasOwnProperty("supportedUnits"))&&(void 0===e||("number"==typeof e||!("object"!=typeof e||!e.hasOwnProperty(t)||void 0!==e[t]&&"number"!=typeof e[t])))}function u(e,t){return"string"==typeof e?e:e[t]}function p(e,t){return"string"==typeof e?e:e.tolerance?e.tolerance:e[t]}function d(e,t){return e.hasOwnProperty(t)?e[t]:e}function c(e,t){return e.hasOwnProperty(t)?e.hasOwnProperty("tolerance")?e.tolerance:e[t]:e}return n.setHelpers("TweakerAbstractMagnitude",{_getStringsFromMagnitudeAndToleranceValue:s,_isMagnitudeAndToleranceOptions:l,_getMagnitudeUnit:u,_setMagnitudeUnit:function(e,t,i){var n;"string"!=typeof e.unit?t!==e.unit.tolerance?e.unit[i]=t:e.unit=t:e.unit=((n={})[i]=t,n.tolerance=e.unit,n)},_getToleranceUnit:p,_setToleranceUnit:function(e,t,i){var n;"string"!=typeof e.unit?t!==e.unit[i]?e.unit.tolerance=t:e.unit=t:e.unit=((n={})[i]=e.unit,n.tolerance=t,n)},_getMagnitudeSupportedUnits:d,_getToleranceSupportedUnits:c}),r.prototype.baseViewModule=n.Base,r.prototype.VIEW_MODULES={editors:{classObject:n.Editors,options:{hasLabel:!0}},editorsInline:{classObject:n.Editors,options:{hasLabel:!1}},divDotsEditors:{classObject:n.DivDotsEditors}},o.addClass(r,"TweakerAbstractMagnitude"),r}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerDuration",["require","exports","DS/Tweakers/TweakerAbstractMagnitude","DS/Tweakers/DurationViewModules","DS/Core/WebUXComponents","DS/Utilities/DateUtils","i18n!DS/Tweakers/assets/nls/translation"],(function(e,t,i,n,o,a,r){"use strict";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"divDotsEditors",type:"string"},value:{defaultValue:void 0,type:"undefined | number | {magnitude: number, tolerance?: number} | { from: Date, to: Date}",advancedSetter:!0},displayOptions:{defaultValue:{label:r.TweakerDuration_MagnitudeAndTolerance_Label,precision:3,tolerance:!0,unit:"Seconds",supportedUnits:this.getDefaultSupportedUnits()},type:"DisplayOptions"}}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(i){this.format=t.Format.MagnitudeAndTolerance,e.prototype._preBuildView.call(this,i)},t.prototype._applyValue=function(t,i){e.prototype._applyValue.call(this,t,i)},t.prototype.getStringFromValue=function(t){var i=this.displayOptions;if(l(t,i)){var n=a.formatDateToString(u(t,i)),o=a.formatDateToString(p(t,i));return""!==n||""!==o?n+" - "+o:""}return e.prototype.getStringFromValue.call(this,t)},Object.defineProperty(t.prototype,"magnitudeKey",{get:function(){return"duration"},enumerable:!1,configurable:!0}),t.getDefaultSupportedUnits=function(){return{Seconds:{label:r.TweakerDuration_MagnitudeAndTolerance_Chooser_Seconds,ratio:1},Minutes:{label:r.TweakerDuration_MagnitudeAndTolerance_Chooser_Minutes,ratio:60},Hours:{label:r.TweakerDuration_MagnitudeAndTolerance_Chooser_Hours,ratio:3600},Days:{label:r.TweakerDuration_MagnitudeAndTolerance_Chooser_Days,ratio:86400},Weeks:{label:r.TweakerDuration_MagnitudeAndTolerance_Chooser_Weeks,ratio:604800},Months:{label:r.TweakerDuration_MagnitudeAndTolerance_Chooser_Months,ratio:2678400},Years:{label:r.TweakerDuration_MagnitudeAndTolerance_Chooser_Years,ratio:31536e3}}},Object.defineProperty(t.prototype,"defaultDisplayOptions",{get:function(){return{label:r.TweakerDuration_MagnitudeAndTolerance_Label,precision:3,tolerance:!0,unit:"Seconds",supportedUnits:t.getDefaultSupportedUnits()}},enumerable:!1,configurable:!0}),t.Format={MagnitudeAndTolerance:0,FromTo:1},t}(i);function l(e,t){return void 0===e||!("object"!=typeof e||!e.hasOwnProperty("from")&&!e.hasOwnProperty("to")||void 0!==e.from&&"number"!=typeof e.from||void 0!==e.to&&"number"!=typeof e.to)}function u(e,t){if(l(e)&&e&&void 0!==e.from)return new Date(e.from)}function p(e,t){if(l(e)&&e&&void 0!==e.to)return new Date(e.to)}return n.setHelpers("TweakerDuration",{_isFromToOptions:l,_getFromDate:u,_getToDate:p}),s.prototype.baseViewModule=n.Base,s.prototype.VIEW_MODULES={noLabelDatePickers:{classObject:n.DatePickers},datePickers:{classObject:n.DatePickers,options:{hasLabel:!0}},inlineDatePickers:{classObject:n.DatePickers,options:{hasLabel:!0,singleLine:!0}}},o.addClass(s,"TweakerDuration"),s}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerNumber",["require","exports","UWA/Core","DS/Utilities/LanguageUtils","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Tweakers/TweakerRange","DS/Tweakers/StringViewModules","DS/Controls/SpinBox","DS/Controls/Slider","DS/Controls/ProgressBar","DS/Controls/ColoredSlider","DS/Controls/Button","DS/Controls/ComboBox","DS/Utilities/KeyboardUtils","DS/Utilities/Dom","DS/Tweakers/TweakerUtils","i18n!DS/Tweakers/assets/nls/translation","DS/Core/WebUXComponents"],(function(e,t,i,n,o,a,r,s,l,u,p,d,c,h,y,w,_,f,v){"use strict";var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{decimals:{defaultValue:5,type:"number"},units:{defaultValue:"",type:"string"},colorFrom:{defaultValue:"#000",type:"string"},colorTo:{defaultValue:"#fff",type:"string"},displayStyle:{defaultValue:"spinBox",type:"string"},value:{defaultValue:0,type:"number",advancedSetter:!0},valueType:{defaultValue:"number",type:"string"},minValue:{defaultValue:void 0,type:"number"},maxValue:{defaultValue:void 0,type:"number"},stepValue:{defaultValue:.1,type:"number"},referenceValue:{defaultValue:void 0,type:"number"},highExponentProperty:{defaultValue:6,type:"integer",category:"Behavior"},lowExponentProperty:{defaultValue:6,type:"integer",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(t){e.prototype._preBuildView.call(this,t),this.elements.container.addClassName("wux-tweakers-number")},t.prototype._applyDecimals=function(e){this.elements._viewModule&&this.elements._viewModule.setDecimals&&this.elements._viewModule.setDecimals(this.decimals)},t.prototype._applyHighExponentProperty=function(e){this.elements._viewModule&&this.elements._viewModule.setHighExponentProperty&&this.elements._viewModule.setHighExponentProperty(this.highExponentProperty)},t.prototype._applyLowExponentProperty=function(e){this.elements._viewModule&&this.elements._viewModule.setLowExponentProperty&&this.elements._viewModule.setLowExponentProperty(this.lowExponentProperty)},t.prototype._applyUnits=function(e){this._suffix=this.units,this.elements._viewModule&&this.elements._viewModule.setSuffix&&this.elements._viewModule.setSuffix(this.units)},t.prototype._applyColorFrom=function(){this.elements._viewModule&&this.elements._viewModule.setColorFrom&&this.elements._viewModule.setColorFrom(this.colorFrom)},t.prototype._applyColorTo=function(){this.elements._viewModule&&this.elements._viewModule.setColorTo&&this.elements._viewModule.setColorTo(this.colorTo)},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("decimals")&&this._applyDecimals(t.decimals),this.isDirty("highExponentProperty")&&this._applyHighExponentProperty(t.highExponentProperty),this.isDirty("lowExponentProperty")&&this._applyLowExponentProperty(t.lowExponentProperty),this.isDirty("units")&&this._applyUnits(t.units),this.isDirty("colorFrom")&&this._applyColorFrom(),this.isDirty("colorTo")&&this._applyColorTo()},t.prototype.getStringFromValue=function(t){if(this.allowMultipleValuesFlag&&Array.isArray(t))return e.prototype.getStringFromValue.call(this,t);if(this.viewOptions&&this.viewOptions.customFormatter&&"string"==typeof this.viewOptions.customFormatter(t))return this.viewOptions.customFormatter(t);return o.getStringFromNumber(t,n.regionalFormatLanguage)},t.prototype._upgradeValue=function(e){if(null==e)return e;var t=o.upgradeValueAsNumber.call(this,e);if(this.allowMultipleValuesFlag&&Array.isArray(t))for(var i=0;i<t.length;i++)t[i]=this._upgradeValue(t[i]);else isNaN(t)||"number"!=typeof t||"integer"===this.valueType&&(t=parseFloat(t.toFixed(0)));return t},t.prototype.onPostEdit=function(t){this.elements._viewModule&&this.elements._viewModule.valueMustBeValidated()&&this.elements._viewModule.validateValue(),e.prototype.onPostEdit.call(this,t)},t}(r),m=function(e,t){r.prototype.baseViewModule.call(this,e,t)};o.applyMixin(m,r.prototype.baseViewModule),m.prototype.setDecimals=function(e){},m.prototype.setSuffix=function(e){},m.prototype.setColorFrom=function(e){},m.prototype.setColorTo=function(e){},m.prototype.setPlaceholder=function(e){},m.prototype._getElementToFocus=function(){return this._view._getElementToFocus()};var b=function(e,t){m.call(this,e,t)};o.applyMixin(b,m);var V={customValidator:void 0,customFormatter:void 0};Object.freeze(V),b.prototype.buildView=function(){var e=this._options.viewOptions||{};e.minValue=this._tweaker.minValue,e.maxValue=this._tweaker.maxValue,e.stepValue=this._tweaker.stepValue,e.pageStepValue=10*this._tweaker.stepValue,e.decimals=this._tweaker.decimals,e.units=this._tweaker.units,e.touchMode=this._tweaker._getCurrentTouchMode(),e.placeholder=this._tweaker.placeholder,e.selectAllOnFocus=!0,e.fireOnlyFromUIInteractionFlag=!0,e.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag,"spinBoxLite"===this._tweaker.displayStyle&&(e.displayStyle="lite"),this._tweaker.viewOptions&&this._tweaker.viewOptions.customValidator&&(e.customValidator=this._tweaker.viewOptions.customValidator),this._tweaker.viewOptions&&this._tweaker.viewOptions.customFormatter&&(e.customFormatter=this._tweaker.viewOptions.customFormatter),this._view=new l(e),this._tweaker.getContent().addClassName("wux-tweakers-number"),this.setValue(this._tweaker.value),this._tweaker&&this._tweaker.highlightModel&&a.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},b.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i&&t&&!t.readOnly&&(w.addEventOnElement(t,i,"beginEdit",(function(e){e.stopPropagation(),t.onPreEdit(null,"beginEdit")})),w.addEventOnElement(t,i,"uncommittedChange",(function(e){e.stopPropagation()})),w.addEventOnElement(t,i,"change",(function(t){t.stopPropagation(),e.setTweakerValue(i.value)})),w.addEventOnElement(t,i,"endEdit",(function(e){e.stopPropagation(),t.onPostEdit(null,"endEdit")})),w.addEventOnElement(t,i,"focus",(function(e){e.stopPropagation()})))},b.prototype.setValue=function(e){var t=this._tweaker,i=this._view;if(i&&t)if(this._options&&this._options.viewOptions&&this._options.viewOptions.externallyDriven)i.value=e;else{var n=parseFloat(e);isNaN(n)?i.value=void 0:i.value=n}},b.prototype.computeTweakerContentLength=function(){return this._tweaker.touchMode?200:150},b.prototype.setReadOnly=function(e){this._view&&(this._view.destroy(),this._view=void 0),this.buildView(),this.handleEvents(),this.inject(this._tweaker.getContent()),this._tweaker.elements.internalView=this._view},b.prototype.setDecimals=function(e){this._view&&(this._view.decimals=e)},b.prototype.setHighExponentProperty=function(e){this._view&&(this._view.highExponentProperty=e)},b.prototype.setLowExponentProperty=function(e){this._view&&(this._view.lowExponentProperty=e)},b.prototype.setSuffix=function(e){this._view&&this._tweaker&&(this._view.units=e)},b.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.allowUndefinedFlag=e)},b.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&a.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},b.prototype.removeHighlightModel=function(){this._view&&this._view._fakeInputForhighlight&&(this._view._fakeInputForhighlight.style.display="none"),a.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},b.prototype._shouldFormatHTMLValue=function(e){return a.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},b.prototype._cleanContainerProperties=function(){return a.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)},b.prototype._getLabelDivToConsiderForHighlight=function(){return _._getOrCreateFakeInputForFindHighlight(this._tweaker,this._view,this._view.elements.inputField)},b.prototype.valueMustBeValidated=function(){var e=!1;if(this._view&&this._view.editHasBegun&&this._view.elements.inputField){var t=parseFloat(this._view.elements.inputField.value);this._view.lastValueWhenEnter!==t&&(e=!0)}return e},b.prototype.validateValue=function(){var e=!1;return this._view&&this._view.elements.inputField&&(e=this._view._validateValue(this._view.elements.inputField.value))&&this.setTweakerValue(this._view.value),e},b.prototype.setPlaceholder=function(e){this._view&&(this._view.placeholder=e)},b.prototype.setViewOptions=function(e){this._setViewOptionsOnAbstract(this._view,e,V)};var k=function(e,t){m.call(this,e,t)};o.applyMixin(k,m),k.prototype.buildView=function(){var e=this._options.viewOptions||{};e.minValue=this._tweaker.minValue,e.maxValue=this._tweaker.maxValue,e.stepValue=this._tweaker.stepValue,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,this._view=new u(e),this._tweaker.getContent().addClassName("wux-tweakers-number"),this.setValue(this._tweaker.value)},k.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i&&t&&!t.readOnly&&(w.addEventOnElement(t,i,"beginEdit",(function(e){e.stopPropagation(),t.onPreEdit(null,"beginEdit")})),w.addEventOnElement(t,i,"change",(function(t){t.stopPropagation(),e.setTweakerValue(i.value)})),w.addEventOnElement(t,i,"endEdit",(function(e){e.stopPropagation(),t.onPostEdit(null,"endEdit")})),w.addEventOnElement(t,i,"keydown",(function(e){e.keyCode===y.ESCAPE&&(t.onCancelEdit(),t.onPreEdit(null,"cancelEdit-preEdit"))})))},k.prototype.setValue=function(e){this._view&&(this._view.value=e)},k.prototype.setSuffix=function(e){this._view&&this._tweaker&&(this._view.suffix=e)},k.prototype.computeTweakerContentLength=function(){return this._tweaker.touchMode?200:150};var C=function(e,t){k.call(this,e,t)};o.applyMixin(C,k),C.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.colorFrom=this._tweaker.colorFrom,e.colorTo=this._tweaker.colorTo,e.minValue=this._tweaker.minValue,e.maxValue=this._tweaker.maxValue,e.stepValue=this._tweaker.stepValue,e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,this._view=new d(e),this._tweaker.getContent().addClassName("wux-tweakers-number"),this.setValue(this._tweaker.value)},C.prototype.setValue=function(e){var t=this._tweaker;if(this._view&&t){var i=parseFloat(e);isNaN(i)?this._view.value=void 0:this._view.value=i}},C.prototype.setColorFrom=function(e){this._view&&this._tweaker&&!this._tweaker.readOnly&&(this._view.colorFrom=e)},C.prototype.setColorTo=function(e){this._view&&this._tweaker&&!this._tweaker.readOnly&&(this._view.colorTo=e)},C.prototype.computeTweakerContentLength=function(){return this._tweaker.touchMode?200:150};var O=function(e,t){m.call(this,e,t)};o.applyMixin(O,m),O.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,this._view=new p(e),this.setValue(this._tweaker.value),this._tweaker.getContent().addClassName("wux-tweakers-number"),this._tweaker&&this._tweaker.highlightModel&&a.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker._currentValueLabel+"%")},O.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i&&t&&w.addEventOnElement(t,i,"change",(function(t){t.stopPropagation(),e.setTweakerValue(i.value)}))},O.prototype.setValue=function(e){this._view&&(this._view.value=e,this._tweaker&&this._tweaker.highlightModel&&(this._previousFormatHTMLValueProperties={},a.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value+"%")))},O.prototype.computeTweakerContentLength=function(){return this._tweaker.touchMode?200:150},O.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&a.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},O.prototype._getLabelDivToConsiderForHighlight=function(){return this._view._view._linearStatus},O.prototype._getSuffixToConsiderForHighlight=function(){return this._tweaker._suffix},O.prototype.removeHighlightModel=function(){a.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},O.prototype._shouldFormatHTMLValue=function(e){return a.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},O.prototype._cleanContainerProperties=function(){return a.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)};var T=function(e,t){m.call(this,e,t)};o.applyMixin(T,m),T.prototype.buildView=function(){this._tweaker.getContent().addClassName("wux-tweakers-number wux-tweakers-number-pagination");var e=this._tweaker._getCurrentTouchMode();this._buttonFirstPage=new c({touchMode:e,icon:{iconName:"to-start",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon"}),this._buttonPrevious=new c({touchMode:e,icon:{iconName:"expand-left",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon"}),this._buttonNext=new c({touchMode:e,icon:{iconName:"expand-right",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon"}),this._buttonLastPage=new c({touchMode:e,icon:{iconName:"to-end",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon"}),this._comboBox=new h({touchMode:e,enableSearchFlag:!0,displayStyle:"lite"}),this.setElementsList(),this._label=new i.Element("span"),this.buildLabel(),this._view=[this._buttonFirstPage,this._buttonPrevious,this._label,this._buttonNext,this._buttonLastPage],this._tweaker.getContent().addClassName("wux-tweakers-number"),this.handleDisabledButtons()},T.prototype._getElementToFocus=function(){return this._buttonNext.getContent()},T.prototype.handleEvents=function(){var e=this,t=this._tweaker;this._view&&t&&(w.addEventOnElement(t,this._buttonFirstPage,"buttonclick",(function(i){i.stopPropagation(),e.setTweakerValue(t.minValue)})),w.addEventOnElement(t,this._buttonPrevious,"buttonclick",(function(i){i.stopPropagation(),e.setTweakerValue(t.value-1)})),w.addEventOnElement(t,this._buttonNext,"buttonclick",(function(i){i.stopPropagation(),e.setTweakerValue(t.value+1)})),w.addEventOnElement(t,this._buttonLastPage,"buttonclick",(function(i){i.stopPropagation(),e.setTweakerValue(t.maxValue)})),w.addEventOnElement(t,this._comboBox,"change",(function(t){t.stopPropagation(),e.setTweakerValue(e._comboBox.value)})))},T.prototype.setValue=function(e){this._view&&(void 0===this._tweaker.maxValue?this.buildLabel():this._comboBox.value=e,this.handleDisabledButtons())},T.prototype.buildLabel=function(){var e=this._tweaker,t=f.get("PaginationLabel");for(this._label.innerHTML="";t;)0!==t.indexOf("{")?-1===t.indexOf("{")?(this._label.appendText(t),t=""):(this._label.appendText(t.substring(0,t.indexOf("{"))),t=t.substring(t.indexOf("{"),t.length)):("{1}"===t.substring(0,t.indexOf("}")+1)?void 0!==e.maxValue?this._comboBox.inject(this._label):this._label.appendText(e.value):"{2}"===t.substring(0,t.indexOf("}")+1)&&(void 0!==e.maxValue?this._label.appendText(e.maxValue):this._label.appendText(f.get("Undefined"))),t=t.substring(t.indexOf("}")+1,t.length))},T.prototype.setElementsList=function(){var e=[],t=this._tweaker;if(t.maxValue&&t.minValue){for(var i=t.minValue;i<=t.maxValue;i++)e.push({valueItem:i,labelItem:i.toString()});this._comboBox.setProperties({elementsList:e,value:t.value})}},T.prototype.handleDisabledButtons=function(){var e=this._tweaker;e.value===e.minValue&&e.value===e.maxValue?(this._buttonFirstPage.disabled=!0,this._buttonPrevious.disabled=!0,this._buttonNext.disabled=!0,this._buttonLastPage.disabled=!0):e.value===e.minValue?(this._buttonFirstPage.disabled=!0,this._buttonPrevious.disabled=!0,this._buttonNext.disabled=!1,this._buttonLastPage.disabled=void 0===e.maxValue):e.value===e.maxValue?(this._buttonFirstPage.disabled=!1,this._buttonPrevious.disabled=!1,this._buttonNext.disabled=!0,this._buttonLastPage.disabled=!0):(this._buttonFirstPage.disabled=!1,this._buttonPrevious.disabled=!1,this._buttonNext.disabled=!1,this._buttonLastPage.disabled=void 0===e.maxValue)},T.prototype.setMinValue=function(){this.handleDisabledButtons(),this.setElementsList()},T.prototype.setMaxValue=function(){this.setElementsList(),this.buildLabel(),this.handleDisabledButtons()};var M=function(e,t){m.call(this,e,t)};o.applyMixin(M,m),M.prototype.buildView=function(){this._tweaker.getContent().addClassName("wux-tweakers-number-sliderAndSpinBox");var e=this._options.viewOptions||{};e.fireOnlyFromUIInteractionFlag=!0,this._sliderVM=new k(this._tweaker,e),this._sliderVM._view.inject(this._tweaker.getContent()),this._spinBoxVM=new b(this._tweaker,e),this._spinBoxVM._view.inject(this._tweaker.getContent()),this._tweaker.getContent().addClassName("wux-tweakers-number")},M.prototype._getElementToFocus=function(){return this._spinBoxVM._getElementToFocus()},M.prototype.setValue=function(e){this._sliderVM.setValue(e),this._spinBoxVM.setValue(e)},M.prototype.setMinValue=function(e){this._sliderVM.setMinValue(e),this._spinBoxVM.setMinValue(e)},M.prototype.setMaxValue=function(e){this._sliderVM.setMaxValue(e),this._spinBoxVM.setMaxValue(e)},M.prototype.setTouchMode=function(e){this._sliderVM.setTouchMode(e),this._spinBoxVM.setTouchMode(e)},M.prototype.destroy=function(){this._tweaker.elements.container.removeClassName("wux-tweakers-number-sliderAndSpinBox"),this._sliderVM.destroy(),this._spinBoxVM.destroy(),m.prototype.destroy.call(this)},g.prototype.baseViewModule=m;return g.prototype.VIEW_MODULES={spinBox:{classObject:b},spinBox_allowMultipleValues:{classObject:s.SelectionChipsEditor,options:{viewOptions:{customValidator:function(e){if("string"==typeof e)return void 0!==_._getValueFromString("number",e)?e:void 0}}}},slider:{classObject:k},progress:{classObject:k},progress_readOnly:{classObject:O},progressNoAnim:{classObject:k},progressNoAnim_readOnly:{classObject:O,options:{viewOptions:{gradientAnimationFlag:!1}}},colorSlider:{classObject:C},pagination:{classObject:T},sliderAndSpinBox:{classObject:M},spinBoxLite:{classObject:b}},g.prototype.registerViewModule=function(e,t){},v.addClass(g,"tweakerNumber"),g}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerParameter",["require","exports","DS/Tweakers/TweakerNumber","DS/Core/WebUXComponents"],(function(e,t,i,n){"use strict";var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{stepValue:{defaultValue:1,type:"number"}}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(t){e.prototype._preBuildView.call(this,t),this.elements.container.addClassName("wux-tweakers-parameter")},t.prototype._upgradeValue=function(e){return e},t.prototype.onPostEdit=function(t){this.elements._viewModule&&this.elements._viewModule._view&&void 0!==this.elements._viewModule._view._lastInput&&(this.value=this.elements._viewModule._view._lastInput),e.prototype.onPostEdit.call(this,t)},t}(i);return o.prototype.VIEW_MODULES={spinBox:{classObject:i.prototype.VIEW_MODULES.spinBox.classObject,options:{viewOptions:{customFormatter:function(e){return void 0!==this._lastInput?this._lastInput:e},customValidator:function(e,t,i){if("string"==typeof e){this._lastInput=e;var n=(parseFloat(e)+parseFloat(t)).toString();return this._getValidatedValue(n)}},externallyDriven:!0}}}},n.addClass(o,"tweakerParameter"),o}));