define("DS/DELWebViewerController/BehaviorFactory",[],(function(){"use strict";return function(e,t,n){var r={},i={DrillBehavior:"DS/DELWebViewerController/Drill/DrillController",ToolbarBehavior:"DS/DELWebViewerToolbar/ToolbarController",BuildUpBehavior:"DS/DELWebViewerBuildUpController/BuildUpController",WorkInstructionBehavior:"DS/DELWebViewerWorkInstructionController/WorkInstructionController",FTABehavior:"DS/DELWebViewerController/FTA/FTAController",StatusBarBehavior:"DS/DELWebViewerController/StatusBar/StatusBarController"};return{getCreatePromise:function(o){var a=this;return new Promise((function(s,l){var c,u=[null,a,e,t,n].concat(Array.prototype.slice.call(arguments,1));UWA.is(o,"array")&&o.length>0?(c=o.map((function(e){return i[e]})))instanceof Array?require(c,(function(){var e=Array.prototype.slice.call(arguments);e.length>0&&e.forEach((function(e,t){r[o[t]]=new(Function.prototype.bind.apply(e,u))})),s(r)})):l(n.getNLSValue("Error.InvalidInput.Message")):s(r)}))},getInstance:function(e){return e&&r[e]?r[e]:null},reset:function(){Object.values(r).forEach((function(e){e.reset&&e.reset()}))},destroy:function(){Object.values(r).forEach((function(e){e.destroy&&e.destroy()})),r={}}}}})),define("DS/DELWebViewerController/facets/LinkFacetController",["UWA/Core","UWA/Controls/Abstract","UWA/Class","DS/DELWebUiComponent/LinkFacetView","DS/DELPPRData/WebService","DS/Selection/CSOManager","DS/DEL3DViewer/NodeUtil","DS/DELWebViewerUtils/Utils","DS/EditPropWidget/facets/Common/FacetsBase"],(function(e,t,n,r,i,o,a,s,l){"use strict";const c="DELFmiProcessImplementCnx",u="DELFmiProcessOutputPrereqMaterializationCnx",h="Provide";return n.extend(t,l,{init:function(e){this._parent(e),this.linkFacetView=new r(this.elements),this.logger=e.logger},updateFacet:function(){var t,n,r,i,s,l,d,g,p=this,f=o.get(),m=f.length>0?f[0].pathElement:null;if(0!==f.length){for(this.linkFacetView.hide();m&&!a.isPLMNode(m.getLastElement(!0));)m=m.getParentPath();m&&(a.isInstance(m.getLastElement(!0))||(g=m.getParentPath().getLastElement(!0),r=a.getNodeID(g),i=a.getNodeType(g))),(l=m&&m.getParentPath()?m.getParentPath().getParentPath():null)&&(s=a.getNodeID(l.getLastElement()),d=a.getNodeType(l.getLastElement())),i!==c&&i!==u||d!==h||(t={lIds:[],relIDs:[r],busIDs:[],plmparameters:"false",attributes:"true",navigateToMain:"true",readonly:"true",debug_properties:""},n={lIds:[],relIDs:[],busIDs:[s],plmparameters:"false",attributes:"true",navigateToMain:"true",readonly:"true",debug_properties:""},e.Promise.all([this._webServiceCall(t),this._webServiceCall(n)]).then((function(e){p.linkFacetView.updateUI({linkInfo:p._parseData(e[0]),provideInfo:p._parseData(e[1])})})).fail((function(){p.logger.error("Unable to get attribute information due to web service call failed")})))}},destroyComponent:function(){this.linkFacetView.destroy()},onResize:function(){this.updateFacet()},onRefresh:function(){this.updateFacet()},_webServiceCall:function(t){var n=`${s.get3DSpaceUrl()}/resources/v1/collabServices/attributes/op/read`;return new e.Promise((function(e,r){i.request({url:n,method:"POST",dataType:"json",payload:t}).then(e).fail(r)}))},_parseData:function(t){var n={results:[]};return t&&e.is(t.results,"array")&&t.results.length>0&&(t.results[0].data.forEach((function(e){n.results.push(e)})),t.results[0].basicData.forEach((function(e){n.results.push(e)})),n.typeIconUrl=t.results[0].type_icon_url),n.results.sort((function(e,t){return e.UIPosition-t.UIPosition})),n},show:function(){this.getUI().show()},hide:function(){this.getUI().hide()}})})),define("DS/DELWebViewerController/Utils/DataParser",["UWA/Core"],(function(e){"use strict";var t,n=function(){return{getOpenDataFormat:function(t){let n={items:[]};return e.is(t,"array")&&t.forEach((t=>{let r={};t.processId?r={id:t.processId,scopedMfg:{id:t.mfgId,occurrence:e.is(t.installPath,"array")?t.installPath:[],predecessors:e.is(t.predecessors,"array")?t.predecessors:[]},resource:{id:t.resourceId},operation:{id:t.operationId,occurrence:e.is(t.operationPath,"array")?t.operationPath:[]},publishedRep:{id:t.publishedRepId},withFilter:!!e.is(t.withFilter,"boolean")&&t.withFilter,reframe:!e.is(t.reframe,"boolean")||t.reframe}:t.id&&(r={id:t.id,withFilter:!!e.is(t.withFilter,"boolean")&&t.withFilter,reframe:!e.is(t.reframe,"boolean")||t.reframe}),n.items.push(r)})),n}}};return e.is(t)||(t=new n),t})),define("DS/DELWebViewerController/Drill/DrillController",["UWA/Core","DS/Selection/CSOManager","DS/Selection/HSOManager"],(function(e,t,n){"use strict";return function(r,i,o,a){const s={detailedFasten:"DetailedFasten",manufacturedPart:"ElementaryEndItem"},l=["Drill","NoDrill","PreDrill"],c=-1,u=-2,h=a.getOption("mappingKeys");var d,g={},p=function(){let t=function(t,n){let r=[];return e.is(t,"array")&&n&&e.is(n.selected,"array")&&(r=e.is(t[0],"array")?t.map((e=>e.toString())):[t.toString()]),r};return{addSelectedPaths:function(e,n){t(e,n).forEach((function(e){-1===n.selected.indexOf(e.toString())&&n.selected.push(e.toString())}))},removeSelectedPaths:function(e,n){let r=t(e,n);n.selected=n.selected.filter((e=>-1===r.indexOf(e)))},getSelectedPaths:function(){var e=[];return Object.keys(g).forEach((function(t){e=e.concat(g[t].selected)})),e}}}(),f=a.getOption("eventCollection").getViewerCtrlEventHnd(),m=function(t,n,r=!1){e.is(t,"array")&&t.length>0&&i.setGraphicProperties({graphicProperties:function(e,t){return e.map((function(e){return{path:e,visibility:t,visibilityFree:!t,usePathElement:r}}))}(t,n)},h.SCENEGRAPHKEYS.PRIVATE).then((function(){i.render()}))},b=function(t){var n=i.getIdPathesLeadingToReference(t[t.length-3]),r=[];return e.is(n,"array")&&n.length>0&&n.forEach((function(e){e.ids.push(t[t.length-2]),e.ids.push(t[t.length-1]),r.push(e.ids)})),r},S=async function(t){var n,r=t.rootIds;e.is(r,"array")&&r.length>0&&(n=await o.getTaxonomies(r),r.forEach((async function(t){var r,a,s,l,c=o.getPPRType(n[t]),u=i.getContext().getController().getBIProxy().getFilterSpec(t,{V2:{}});"MBOM"===c&&(r=await(s=t,l=u?u.filter:null,o.getDrillData({id:s,filter:l})))&&e.is(r.paths,"array")&&r.paths.length>0&&(g[t]=r,g[t].selected=[],a=r.resultingProductDrillPaths,m(a,!1))})))},w=function(t){var r,o,a=t&&e.is(t.path)&&t.path.length>0?t.path:[],h=g[a[0]],d=h&&h.references?h.references[a[a.length-1]]:{},f=function(e){return e&&e.pathsr&&e.pathsr.includes("R_51")},S=function(e){var t;return e.parentNode.getChildren().forEach((function(n){n.getModelIdentification()===e.instanceObj.instanceId&&(t=n)})),t},w=function(e){let t,n,r,o,s=a.length>2?a.slice(0,a.length-2):a,l=function(e){i.highlightNode({pathElements:[{pathElement:e}],highlight:!0})};S(e)?(m([a],!0,!0),l(i.getPathElementV2(a))):(o=i.getPathElement(s),t=i.createNode({id:e.referenceObj.referenceId,type:e.referenceObj.type,matrix:null,usage:c}),n=i.createNode({id:e.instanceObj.instanceId,type:e.instanceObj.type,matrix:e.instanceObj.matrixtxt,parentMatrix:e.parentMatrix,usage:u}),r=i.createArrowNode({headLength:15,arrowLength:60,arrowWidth:1,headWidthToHeightRatio:.4,viewpoint:i.getContext().getViewer().currentViewpoint,color:{R:1,G:0,B:1},head:1,pickable:!0,globalSelection:!0}),n.addChild(t),t.addChild(r),e.parentNode.addChild(n),i.render(),o&&o.addElement&&(o.addElement(n),o.addElement(t),l(o)))},v=function(e){let r=e[e.length-1],o=e[e.length-2],a=n.get().map((e=>i.getRIRPath(e.pathElement).toString())),l=e[e.length-3],c=e[e.length-4],u=h&&h.references?h.references[l]:{},d=h&&h.instances?h.instances[c]:{},g={referenceObj:h&&h.references?h.references[r]:{},instanceObj:h&&h.instances?h.instances[o]:{},parentNode:i.getNode({id:l})},p=function(e){i.getNodeFromPath(e)&&m(b(e).filter((t=>-1===a.indexOf(t.toString())&&t.toString()!==e.toString())),!t.highlight,!0)};(f(g.instanceObj)||u.type===s.detailedFasten&&f(d))&&g.parentNode&&(t.highlight?(w(g),p(e)):(p(e),function(e){let t=(n.get()||[]).find((t=>t.pathElement.getLastElement().getModelIdentification()===e.referenceObj.referenceId));t&&i.highlightNode({pathElements:[t],highlight:!1}),e.parentNode&&(e.parentNode.removeChild(S(e)),i.render())}(g)))};h&&d&&d.taxonomies&&Object.values(l).some((e=>-1!==d.taxonomies.indexOf(e)))?(d.resultingProductLink?m([a],t.highlight):v(a),t.highlight?p.addSelectedPaths(a,h):p.removeSelectedPaths(a,h)):h&&d&&d.taxonomies&&Object.values(s).every((e=>-1===d.taxonomies.indexOf(e)))&&(o=d.referenceId,r={resultingProductDrills:h.resultingProductDrillPaths.filter((e=>e[e.length-3]===o)),drills:h.drillPaths.filter((e=>e[e.length-3]===o))},r.drills.forEach((function(e){v(e)})),m(r.resultingProductDrills,t.highlight),t.highlight?p.addSelectedPaths(r.drills.concat(r.resultingProductDrills),h):p.removeSelectedPaths(r.drills.concat(r.resultingProductDrills),h))},v=function(e){e&&e.idPath&&S({rootIds:e.idPath})},E=function(e){e&&e.id&&g&&g[e.id]&&delete g[e.id]},P=function(){let n=t.get()||[],r=[],o=function(t,n){e.is(t,"array")&&t.length>0&&t.forEach((function(e){w({path:e,highlight:n})}))};if(n.forEach((e=>r.push(i.getRIRPath(e.pathElement)))),r&&r.length>0){let e,t=p.getSelectedPaths(),n=[];r.forEach((function(e){n=n.concat(b(e).map((e=>e.toString())))})),e=t.filter((e=>-1===n.indexOf(e))).map((e=>e.split(","))),o(e,!1),o(r,!0)}else if(0===r.length){o(p.getSelectedPaths().map((e=>e.split(","))),!1)}};return(d=[{eventName:f.events.highlightNode,eventHandler:f,callback:w},{eventName:f.events.unHighlightNode,eventHandler:f,callback:w},{eventName:"onRootAdded",eventHandler:i,callback:v},{eventName:"onRootRemoved",eventHandler:i,callback:E},{eventName:f.events.onUnHighlightNode,eventHandler:f,callback:P},{eventName:f.events.onSelectNode,eventHandler:f,callback:P},{eventName:f.events.onUnSelectNode,eventHandler:f,callback:P}],{subscribeEvents:function(){d.forEach((function(e){e.eventHandler.subscribe(e.eventName,e.callback)}))}}).subscribeEvents(),{}}})),define("DS/DELWebViewerController/FTA/FTAController",[],(function(){"use strict";const e="RepTextTess",t="reqfta.ftaVisu",n="reqfta.ParamName",r="reqfta.ParamType",i="reqfta.ParamString",o="RepTTRS",a="FTASurfaceInstance",s="Requirement",l=-1,c=-2;return function(u,h,d,g){let p,f=g.getOption("logger"),m=g.getOption("eventCollection").getViewerCtrlEventHnd(),b=[],S=function(e,t){return h.createNode({id:e.physicalid,usage:t,type:e["ds6w:type"]?e["ds6w:type"]:e.type})},w=function(e,t){let o,a=e[n],s=e[r],l=e[i];for(let e=0,n=-1;e<a.length;e++){if("0"===s[e]&&n++,a[e]===t){o=l[n];break}}return o},v=function(n={}){let r={edgeTransparency:!1,textureInBlack:!0,processText:!1},i=S(n,l);h.addVisualizationToNode(i,n[t],r),h.addVisualizationToNode(i,w(n,e),r);try{!function(){let e,t,s=w(n,o),u=n.physicalid;s&&(t=S({physicalid:`${u}${a}`,type:a},c),e=S({physicalid:`${u}${o}`,type:o},l),h.addVisualizationToNode(e,s,r),t.setVisibility(!1),t.setVisibilityFree(!0),t.addChild(e),i.addChild(t))}()}catch(e){f.debug(e),f.warn(`Unable to create fta surface node for the requirement id - ${n.physicalid}`)}return i.traverse((function(e){return e.setPickParent(!0),!1})),i.setPickParent(!1),i},E=function(e,n){if(e){let r=[];n.forEach((e=>{if(UWA.is(e.elements,"array")&&function(e){return e.elements.some((e=>Object.prototype.hasOwnProperty.call(e,t)))}(e)){let t=S(e.owner,c);e.elements.forEach((e=>{t.addChild(v(e))})),r.push(t)}})),r.forEach((t=>{e.addChild(t)}))}},P=function(e,t){let n=e.getUserData();return!!n&&n.type===t},D=function(e,t){e&&e.length>0&&e.forEach((e=>{e&&UWA.is(e.paths,"array")&&e.paths.forEach((e=>{let n,r=h.getNodeFromPath(e);r&&P(r,s)&&(n=r.getChildren().find((e=>P(e,a))),n&&n.setVisibility(t))}))}))},y=function(e){D(e,!0)},V=function(e){D(e,!1)},I=function(e){if(!e&&!e.path)throw f.error("path property is mandatory, please check the input"),new Error(g.getNLSValue("Error.InvalidInput.Message"));return Array.isArray(e.path[0])?e.path:[e.path]},C=function(e,t){e.forEach((e=>{let n=h.getNodeFromPath(e);n?t(n,e):f.warn("Unable to find the item for the path",e)}))},L=function(e,t){let n=!1;return function(e){return e.getChildren().some((e=>P(e,"PLMReqSpecifyHowToCnx")))}(e)&&(e.getChildren().forEach((e=>{P(e,"PLMReqSpecifyHowToCnx")&&(e.setVisibility(t),e.setVisibilityFree(!t))})),n=!0),n};return function(){var e={onSelectNode:y,onUnSelectNode:V};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&b.push(m.subscribe(m.events[t],e[t]))}(),p={loadFTA:async function(e){f.debug("loadFTA function invoked with params - ",JSON.stringify(e));let t,n,r=I(e),i=[],o=[];return C(r,(function(e,t){L(e,!0)?i.push(t):o.push({path:t,node:e})})),o.length>0&&(t=o.map((e=>e.path[e.path.length-1])),n=await d.getRequirements(t),n.result.forEach((e=>{if(e.outputs.requirements){let t=o.find((t=>t.path[t.path.length-1]===e.input_object.physicalid));E(t.node,e.outputs.requirements),i.push(t.path)}else f.warn("FTA Information not found for the mfg item ",e.input_object.physicalid)}))),h.render(),{path:[i]}},removeFTA:async function(e,t=!0){f.debug("removeFTA function invoked with params - ",JSON.stringify(e));let n=[];return C(I(e),(function(e,t){L(e,!1)&&n.push(t)})),t&&h.render(),{path:n}},reset:function(){},destroy:function(){p.reset(),b.forEach(m.unSubscribe),b=[],m=null}},p}})),define("DS/DELWebViewerController/DELWebViewerHighlightManager",["UWA/Core","DS/Selection/CSOManager","DS/Selection/HSOManager","DS/Selection/PSOManager","DS/DEL3DViewer/NodeUtil","DS/DELWebViewerUtils/DELWebViewerSettingsMgt"],(function(e,t,n,r,i,o){"use strict";return function(a,s,l,c){const u="Mouse",h="Touch",d="select",g="unSelect",p="highlight",f="unhighlight",m="preHighlight",b="unPreHighlight";var S=[],w=[],v=[],E=a.getInstance("WorkInstructionBehavior"),P=c.getOption("eventCollection").getViewerCtrlEventHnd(),D=c.getOption("mappingKeys"),y=a.getInstance("BuildUpBehavior"),V=o.getDELViewerSetting("itemProductConnectionTypes"),I=c.getOption("logger"),C=function(t){(t=e.is(t,"array")&&t.length>0?t:[t]).forEach((t=>{!function(t){var n,r,o,a,l=y&&y.getCurrentBuildUpContent?y.getCurrentBuildUpContent():[];if(t.event&&(u===t.event.type||h===t.event.type)&&t.pathElement)if(s.getPickability()===D.PICKABILITY.BUILDUP&&l&&e.is(l.graphicData,"array")&&l.graphicData.length>0){for(a=(r=l.graphicData).length,o=s.getContext().streamPath(t.pathElement).toString(),n=0;n<a;n++)if(!0===r[n].visibility&&-1!==o.indexOf(r[n].path.toString())){t.pathElement=s.getContext().unstreamPath(r[n].path);break}}else if(s.getPickability()===D.PICKABILITY.ITEM){let e=t.pathElement;if(i.isRootMBOM(e)){for(;null!==e&&-1===V.indexOf(i.getNodeType(e.getLastElement(!0)));)e=e.getParentPath();e&&(t.pathElement=e.getParentPath())}}}(t)}))},L=function(o,a){var l;if(e.is(o,"array")&&o.length>0)switch(l=function(e){var t=[];return e.forEach((function(e){let n=[],r=[],o=[],a=[],l={},c={paths:n,POIs:r,POIGroups:o,ZOIs:a,attributes:l};if(e=e.pathElement?e.pathElement:e,i.isAModelPath(e))s.streamPathWithType(e,n,l);else if(i.isAPOIPath(e)){let t=i.getPOILayerId(e);s.streamPOI(e,t,r)}else i.isAPOIGroupPath(e)?s.streamPOIGroup(e,o):i.isAZOIPath(e)?s.streamZOI(e,a):i.isADMUPath(e)?E&&E.streamPathWithType(e,n,l):I.warn("Cannot stream path : ",e);t.push(c)})),t}(o),a){case d:t.options.fromAPI||P.publish(P.events.onSelectNode,l);break;case g:t.options.fromAPI||P.publish(P.events.onUnSelectNode,l);break;case p:n.options.fromAPI||P.publish(P.events.onHighlightNode,l);break;case f:n.options.fromAPI||P.publish(P.events.onUnHighlightNode,l);break;case m:r.options.fromAPI||P.publish(P.events.onPreHighlightNode,l);break;case b:r.options.fromAPI||P.publish(P.events.onUnPreHighlightNode,l)}};v.push(t.onPostAdd((function(e){L(e,d)}))),v.push(t.onPostRemove((function(e){L(e,g)}))),S.push(n.onPostAdd((function(e){L(e,p)}))),S.push(n.onPostRemove((function(e){L(e,f)}))),w.push(r.onPostAdd((function(e){L(e,m)}))),w.push(r.onPostRemove((function(e){L(e,b)})));let U=s.subscribe("onRootAdded",(async function(e){let t=await l.getTaxonomies([e.id]),n=l.getPPRType(t[e.id]),r=s.getNode({id:e.id});i.updateUserData(r,{pprType:n})}));return S.push(n.onPreAdd(C)),w.push(r.onPreAdd(C)),v.push(t.onPreAdd(C)),{destroy:function(){S.length>0&&(S.forEach((e=>n.unsubscribe(e))),S=[]),w.length>0&&(w.forEach((e=>r.unsubscribe(e))),w=[]),v.length>0&&(v.forEach((e=>t.unsubscribe(e))),v=[]),U&&s.unSubscribe(U),c.setOption(D.OPTIONS.CURRENTPICKABILITY,null)}}}})),define("DS/DELWebViewerController/StatusBar/StatusBarController",["UWA/Core","DS/DELWebUiComponent/StatusBar/StartUpViewUI","DS/DELWebUiComponent/StatusBar/LastIndexingTime","DS/DEL3DViewer/NodeUtil","DS/DELWebUiComponent/NotificationUtils","DS/DELWebViewerController/Utils/DataParser","DS/DELWebViewerUtils/DELWebViewerSettingsMgt"],(function(e,t,n,r,i,o,a){"use strict";return function(s,l,c,u){var h,d,g=u.getOption("statusBar").commands,p=l.getContext(),f=u.getOption("mappingKeys"),m=s.getInstance("BuildUpBehavior"),b=u.getOption("eventCollection").getViewerCtrlEventHnd(),S=u.getOption("logger"),w=function(t,n,r){let i=e.is(t,"array")&&t.length>0?t.map((e=>e.id)):[];p.getController().getAttributes({ids:i,attributes:["ds6w:label","thumbnail_2d"],callbacks:{onComplete:function(e){h.setStartupView(i.map((t=>({id:t,name:e[t]["ds6w:label"],icon:e[t].preview_url})))),n&&n(e)}.bind(this),onFailure:function(){r&&r()}}})},v=function(){var t=c.getDataManager().get("process"),n=[];if(t){let r=m.getCurrentBuildUpContent(),i=r&&e.is(r.pathIds,"array")?r.pathIds:[];t.operationId=i.length>0?i[i.length-1]:"",t.operationPath=i,t.withFilter=!1,t.reframe=!1,n.push(t)}else{l.getRoots().map((e=>r.getNodeID(e))).forEach((e=>n.push({id:e,withFilter:!1,reframe:!1})))}return o.getOpenDataFormat(n)},E=function(){return!(!u.getOption("startUpView")||!e.is(u.getOption("startUpView").enable,"boolean"))&&u.getOption("startUpView").enable},P=async function(){let e=widget.getValue(f.STARTUPVIEWDATA),t=l.getMode()===f.VIEWERMODES.WORKINSTRUCTIONS;if(!0===E()){if(m.isBuildUpApplied()&&t)return void i.displayNotification({level:"error",title:u.getNLSValue("Error.StartUpViewNotSupport.Title"),subtitle:u.getNLSValue("Error.StartUpViewNotSupportWKIMode.Message"),sticky:!1});if(e)b.publish(b.events.onStartupViewRemoved,e),widget.deleteValue(f.STARTUPVIEWDATA),h.clearStartupView(),i.displayNotification({level:"success",title:u.getNLSValue("Success.StartupViewRemove.Title"),subtitle:u.getNLSValue("Success.StartupViewRemove.Subtitle"),message:u.getNLSValue("Success.StartupViewRemove.Message"),sticky:!1});else{if(l.getRoots().length>0){let e={viewpoint:(await l.getViewPoint()).viewpoint,...v()};widget.setValue(f.STARTUPVIEWDATA,e),w(e.items,(t=>{let n=e.items.map((e=>t[e.id]["ds6w:label"]));n=n.join(", "),i.displayNotification({level:"success",title:u.getNLSValue("Success.StartUpViewSet.Title"),subtitle:u.getNLSValue("RootsLabel",{rootsLabel:n},"Success","Subtitle"),message:u.getNLSValue("Success.StartUpViewSet.Message"),sticky:!1})})),b.publish(b.events.onStartupViewSet,e)}else i.displayNotification({level:"error",title:u.getNLSValue("Error.StartUpViewNotSupport.Title"),subtitle:u.getNLSValue("Error.StartUpViewNoRoot.Subtitle"),message:u.getNLSValue("Error.StartUpViewNoRoot.Message"),sticky:!1})}}};return e.is(g,"array")&&g.forEach((r=>{let i={container:p.getStatusBar().elements.infoContainer};switch(r){case"LastIndexingTime":i.nls=u.getNLSValue("Info.LastIndex.Title"),d=new n(i),(s=a.getDELViewerSetting("displayLastIndexedTimeStamp"))&&s.value&&l.subscribe(b.events.onExpandCompleted,(function(){c.getIndexingDate(s.service).then((function(t){var n=Number(t[s.service].allvaultsacl);e.is(n)&&d.setIndexingTime(n)})).fail((function(e){S.error(u.getNLSValue(e))}))}));break;case"StartUpView":i.onClick=P,i.nls=u.getNLSValue("Tooltip.StartupView.label"),i.enable=E(),h=new t(i),i.enable&&((o=widget.getValue(f.STARTUPVIEWDATA))?((o="object"!=typeof o?JSON.parse(o):o).viewpoint&&u.getOption("startUpView").setViewpoint&&l.setViewPoint(o.viewpoint),e.is(o.items,"array")&&o.items.length>0&&w(o.items)):h.clearStartupView())}var o,s})),b.subscribe(b.events.onUpdateOptions,(function(t){t&&t.data&&t.data.startUpView&&e.is(t.data.startUpView.enable,"boolean")&&h.setStartUpViewState(t.data.startUpView.enable)})),{destroy:function(){d&&d.destroy(),h&&h.destroy()}}}})),define("DS/DELWebViewerController/Controller",["UWA/Core","UWA/Class/Promise","UWA/Class/Options","DS/DELWebViewerLogger/Logger","DS/DELWebViewerEvents/EventCollection","DS/DELPPRData/ModelInterface","DS/DEL3DViewer/ViewerInterface","DS/DELWebViewerController/BehaviorFactory","DS/DELWebViewerPerformaceLogger/PerformaceLogger","DS/DELWebViewerEventManager/ComponentEventHandler","DS/DELWebViewerProxyManager/ProxyManager","DS/DELWebViewerResourceUtils/ResourceUtils","DS/DELWebViewerPreferences/Preferences","DS/DELWebViewerUtils/DELWebViewerSettingsMgt","DS/DELWebViewerUtils/Utils","DS/DELWebViewerController/DELWebViewerHighlightManager"],(function(e,t,n,r,i,o,a,s,l,c,u,h,d,g,p,f){"use strict";return function(e,g,p){var m,b,S,w,v,E,P,D,y,V,I,C,L,U=new n,O=new r,N={MfgItemsViewer:[],ProcessViewer:["BuildUpBehavior","ToolbarBehavior"],WorkInstructionViewer:["BuildUpBehavior","ToolbarBehavior","WorkInstructionBehavior"]},T={removeMaterial:"DrillBehavior",requirementFTA:"FTABehavior",statusBar:"StatusBarBehavior"};return U.setOptions(e),L=(L=localStorage?localStorage.getItem("LoggerSeverity"):null)||U.getOption("loggerSeverity"),O.setLoggerSeverity(L),U.setOption("logger",O),!0!==U.getOption("performanceLogging")&&"true"!==localStorage.getItem("PerformanceLogging")||(l.setOptions(U),l.initPerfObserver()),b=new i(U),U.setOption("eventCollection",b),S=new h(p),Object.assign(U,S),w=new d(S),Object.assign(U,w),P=U.getOption("viewerType"),O.info("********** Viewer Component Initialization Started (Type:%s) **************",Object.keys(N)[P]),l.markStart("DELWebViewerComponent"),C=[function(){return m=new o(U),E=function(t){var n={};Object.entries(g).some((function([e,r]){return r===t&&(n.name=e,n.viewerBehaviors=N[e],!0)}));for(const[t,r]of Object.entries(T))e[t]&&n.viewerBehaviors.push(r);return n}(P),m.getCreatePromise(E.viewerBehaviors)},function(){let e;return e=new t((function(e,t){v=new a(U,e,t)})).fail((function(e){throw O.error("ViewerInterface initialization failed.",e),e})),e}].map((e=>e())),t.all(C).then((function(){return(D=new s(v,m,U)).getCreatePromise(E.viewerBehaviors)})).then((function(){return new t((function(e){y=new u(D,v,m,U),I=new c(y,U),e(y)}))})).then((function(){V=new f(D,v,m,U);let t=widget.getValue(e.mappingKeys.STARTUPVIEWDATA)||{};b.getComponentEventHnd().publish(b.getComponentEventHnd().events.onReady,t),l.markEnd("DELWebViewerComponent","Time taken to initialize the component"),O.info("********** Viewer Component Initialization Completed (Type:%s) **************",Object.keys(N)[P])})).fail((function(e){O.error("Component initialization failed due to : %o",e)})),{getViewer:function(){return v.getViewerElement()},getEventHnd:function(){return b.getComponentEventHnd()},getViewerBehavior:function(){return y},destroy:function(){[y,I,D,V,v,m,b,S].forEach((e=>{e&&e.destroy()})),I=U=null,b=S=D=v=m=O=w=C=V=null,l.dispose()}}}}));