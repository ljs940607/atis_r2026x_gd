define("DS/DELPPWProcessViewBehaviors/OrderbySequenceBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin","SelectionPlugin","WebServicePlugin","DicoPlugin"],creator:function(t,n,i,r,o,a){var l=!1;return{listenTo:function(){return{orderBySequence:this.orderBySequence}},onStart:function(t){e.is(t)&&e.is(t.manageServiceRoles)&&(l=t.manageServiceRoles)},onStop:function(){},orderBySequence:function(){var e,t,o=r.getModuleSelections(n.getId()),a=i.getReferenceModel(o[0]),l=i.getAllChildrenFromCollection(a.id).instancesPID;for(l.push(o[0].id),e=0;e<l.length;e++)l[e]&&(t=this.sortChildrenByProductFlowLink(l[e])),this.doWebServiceRequestCall(t)},doWebServiceRequestCall:function(t){var r=null,a=null,s={},c=function(e){n.notify("stopProgress",s),console.log(e)};t.length>0&&(r={listOrdered:t,listModifiable:t},a={url:"dsmfg/private/V0/invoke/persistChildrenOrder",method:"POST",onComplete:function(r){var o=[],a=n.getBehavior("WUXNodeModelBehavior");console.log(r),e.is(r,"array")&&r.forEach((function(t){var n;e.is(t.PID,"string")&&e.is(t.V_TreeOrder)&&(n=i.getInstance(t.PID),l&&i.manageLinearProductFlowsOnDeleteInstance(n),n.set("V_TreeOrder",t.V_TreeOrder))})),t.forEach((function(e){o.push(i.getInstance(e))})),a.prepareUpdate(),n.notify("instanceRemoved",[o]),n.notify("instanceAdded",[o]),n.notify("reorder",{}),a.pushUpdate(),l&&r.forEach((function(t){var n;e.is(t.PID,"string")&&(n=i.getInstance(t.PID),i.manageLinearProductFlowsOnCreateInstance(n))})),n.notify("stopProgress",s)},onFailure:c,onTimeout:c,data:e.Json.encode(r)},n.notify("startProgress",s),o.webServiceRequest(a))},sortChildrenByProductFlowLink:function(t){var n,r,o,s,c=i.getReferenceModel(t),u=i.getInstancesFromCollection(c.id),d={},g={},f={},p={},h={},m=[],I=[],P=[],C=!1,y=[],D=[],v=[],b=[],S=[],R=[],V=[],L=[],M=[],E=[],N=[],A=a.getCustoServiceProcessRoles(),T={"Set-Up":1,Procedure:2,"Close-Up":3},w={DELWkiAlertReference:1,DELWkiAlertWarningReference:2,DELWkiAlertCautionReference:3,DELWkiAlertNoteReference:4},k=!1;if(!(u.length>0))return[];i.sortInstancesByTreeOrder(u),k=i.isLinearSequencingMode(c.id),u.forEach((e=>{1===T[e.get("DELServiceProcessRoleExt.V_OOTBRole")]?"WORKINSTRUCTION"===i.getPPRType(e.id)?y.push(e):D.push(e):2===T[e.get("DELServiceProcessRoleExt.V_OOTBRole")]?"WORKINSTRUCTION"===i.getPPRType(e.id)?v.push(e):b.push(e):3===T[e.get("DELServiceProcessRoleExt.V_OOTBRole")]?"WORKINSTRUCTION"===i.getPPRType(e.id)?S.push(e):R.push(e):"WORKINSTRUCTION"===i.getPPRType(e.id)?L.push(e):(!k||l)&&V.push(e)})),o=function(t){var n,i;t.sort((function(t,r){return e.is(t.get("DELServiceProcessRoleExt.V_CustoRole"))&&e.is(r.get("DELServiceProcessRoleExt.V_CustoRole"))?(n=A.find((e=>e.rolecusto===t.get("DELServiceProcessRoleExt.V_CustoRole"))),i=A.find((e=>e.rolecusto===r.get("DELServiceProcessRoleExt.V_CustoRole"))),e.is(n)&&e.is(i)?n.rowIndex-i.rowIndex:0):0}))},r=function(t){t.sort((function(t,n){var r,o,a,l,s,c;return e.is(t)&&(a=i.getInstance(t.id),e.is(a)&&(r=i.getReferenceModelFromInstance(a)),e.is(r)&&(s=r.get("type"))),e.is(n)&&(l=i.getInstance(n.id),e.is(l)&&(o=i.getReferenceModelFromInstance(l)),e.is(o)&&(c=o.get("type"))),(w[s]||1/0)-(w[c]||1/0)}))},(E=[y,v,L,S]).forEach((e=>{r(e),o(e)})),(N=[D,b,V,R]).forEach((e=>{o(e)})),s=function(e){if(n=function e(t){var n,i=g[t];if(-1===P.indexOf(t)&&P.push(t),Array.isArray(i)&&i.length>0)for(n=0;n<i.length;n++)h[i[n]]||(h[i[n]]=!0,-1===P.indexOf(i[n])&&P.push(i[n]),e(i[n]))},e.forEach((function(e){var t=i.getImpacted(e.id,!1,{relationTypes:["DELLmiTimeConstraintCnx"]}).filter((function(t){return 1===t.get("from").length&&1===t.get("to").length&&e.id===t.get("from")[0]}));d[e.id]=t})),Object.keys(d).forEach((function(e){g[e]=d[e].map((function(e){return e.get("to")[0]})),f[e]=0,p[e]=0,h[e]=!1})),0===Object.keys(g).length)return e;for(var t in g)if(g[t].length>0){C=!0;break}return C?(Object.keys(g).forEach((function(e){g[e].forEach((function(t){f[t]++,p[e]++}))})),I=Object.keys(f).filter((function(e){return 0===f[e]})),(m=I.filter((function(e){return 0===p[e]}))).forEach((function(e){I.indexOf(e)>-1&&I.splice(I.indexOf(e),1)})),I.forEach((function(e){h[e]=!0,n(e)})),m=m.concat(P)):e},N.forEach((function(e){let t=s(e);M.push(t)}));let F=[];for(let e=0;e<=3;e++)E[e].length>0&&F.push(...E[e]),M[e].length>0&&F.push(...M[e]);return[...new Set(F.map((t=>e.is(t.id)?t.id:t)))]}}}}})),define("DS/DELPPWProcessViewBehaviors/WUXManageCapableRscDragDrop",["UWA/Core"],(function(e){"use strict";return function(t,n,i,r,o,a,l,s){var c,u,d=function(){return e.is(u)||(u=n.getBehavior("LinkBehavior")),u},g=function(){var t,i,r,o,a,l=null,s=n.getBehavior("ManageCapableResourcesBehaviour"),c=n.getBehavior("CapableResourceLinkBehaviour");return t=(o=(r=s.getBreadCrumb()).value[r.value.length-1]).refPID,i=o.instPID,a=c.getCapableRscStructureLinkOfAncestor(o.path),c.checkType(t,"OPERATION")&&e.is(i)&&c.checkParentType(i,"SYSTEM")&&(l=e.is(a)?a.get("to"):null),{fromRefPID:t,fromInstPID:i,resourceAreaID:l,fromSideAbsPath:o.path}},f=function(t,o){var a=[],l={};t.draggedItems.forEach((function(t){var n,i,o=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,l=o>0?t.instancePIDsArray[o-1]:null;n=o>0?r.getReferenceIdFromInstance(l):t.rootReferencePID,i=r.getReference(n),e.is(i)||a.push(n)})),a.length>0?(n.notify("startProgress",l),r.fetchRefList(a,{onComplete:function(){n.notify("stopProgress",l),e.is(o.onComplete)&&o.onComplete()},onFailure:function(){n.notify("stopProgress",l),n.warn(i.getNLSValue("ManageCapableResource.FetchReferene.Failed")),e.is(o.onFailure)&&o.onFailure()}})):e.is(o.onComplete)&&o.onComplete()},p=function(t){var n="",i=c.acceptedTypes;return e.is(t)&&(n=e.is(t.get)?t.get("PPRTYPE"):e.is(t["ds6w:type_value"])?o.getPPRType(t["ds6w:type_value"]):e.is(t,"string")?o.getPPRType(t):(t=r.getReference(t.referenceID)).get("PPRTYPE")),!e.is(i)||-1!==i.indexOf(n)},h=function(e){return e.preventDefault(),!0};return{init:function(t){var n=this;c=t||{},e.is(c.dropZone)&&(c.dropZone.addEventListener("drop",(function(e){e.preventDefault(),n.onTreeListViewDrop(e)})),c.dropZone.addEventListener("dragover",(function(e){e.preventDefault()})))},isAcceptedType:function(e){return p(e)},getDDBehavior:function(){var e=this;return{onDragStartCell:e.onDragStartCell,onDropCell:e.onDropCell.bind(this),onDropBlank:e.onDropBlank.bind(this),onDropColumnHeader:e.onDropColumnHeader.bind(this),onDragOverBlank:h,onDragOverColumnHeader:h,onDragOverCell:h,onDragEnterRowHeader:e.onDragEnterRowHeader,onDragLeaveRowHeader:e.onDragLeaveRowHeader,onDragOverRowHeader:e.onDragOverRowHeader}},onDragOverRowHeader:function(){return!1},onDragLeaveRowHeader:function(){return!1},onDragEnterRowHeader:function(){return!1},retrieveItems:function(t){var i,r,o,a,l,s=[],c="",u=["text/searchitems","text/plain","Text"];if(!e.is(t))return n.debug("ERROR: No dropped item found"),s;for(o=e.is(t.dataTransfer.types.indexOf,"function")?"indexOf":"contains",a=0;a<u.length&&""===c;a++)l=t.dataTransfer.types[o](u[a]),(e.is(l,"number")&&l>=0||e.is(l,"boolean")&&!0===l)&&(c=u[a]);if(""===c)return n.debug("ERROR: No data retrieved"),s;i=t.dataTransfer.getData(c);try{r=e.Json.decode(i)}catch(e){return s}return e.is(r)?e.is(r.data)?e.is(r.data.items,"array")?r.data.items:(n.debug("ERROR: Items is not an array"),s):(n.debug("ERROR: No data retrieved"),s):(n.debug("ERROR: Parsing returned null"),s)},onDragStartCell:function(r,o){var l,s,c,u=[],d=o.nodeModel,f=widget.data,p=a.get3DSpaceServiceName(),h=n.getBehavior("WUXNodeModelBehavior"),m=n.getBehavior("ExpandFilterBehavior"),I=n.getBehavior("ManageCapableResourcesBehaviour"),P={widgetId:widget.id,appId:t.getConfig().appId},C=g();if(!0!==I.getStepOperationUIState())return e.is(m)&&e.is(m.getFilterProxy())&&(l=m.getFilterProxy())&&l.getCtxForSharing&&(P=l.getCtxForSharing()),s={protocol:"3DXContent",version:"1.1",source:t.getConfig().appId,widgetId:widget.id,data:{items:[]},biProxyCtx:P},c={properties:[function(){return{property:"envId",value:a.getPlatformID({serviceId:p})}},function(){return{property:"serviceId",value:p}},function(){return{property:"contextId",value:[f.role,f.organization,f.collaborativeSpace].join(".")}},function(){return{property:"objectId",value:e.is(this.getReferencePID)?this.getReferencePID():null}},function(){return{property:"linkId",value:e.is(this.getLinkPID)?this.getLinkPID():null}},function(){return{property:"resourceAreaID",value:C.resourceAreaID}},function(){return{property:"objectType",value:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:e.is(this.getReferenceType)?i.getNLSValue(this.getReferenceType(),null,"Type"):null}}]},d.isSelected()||d.select(),o.cellView.collectionView.getTreeDocument().getXSO().get().forEach((function(t){e.is(h)&&!h.isFakeNodeModel(t)&&u.push(t.dump(c))})),s.data.items=u,r.dataTransfer.setData("Text",JSON.stringify(s)),r.dataTransfer.effectAllowed="copyMove",!1;n.warn("DrgDrop Not Supported")},getDragNDropInfo:function(t,n){var i,o,a,l={draggedItems:[],info:{fromWUX:!1,dropPosition:null,fromSameSource:!1},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};return e.is(t)&&e.is(t.dataTransfer)&&e.is(t.dataTransfer.getData,"function")&&(o=t.dataTransfer.getData("Text"),e.is(o,"string")&&o.length>0&&(a=JSON.parse(o),e.is(a)&&e.is(a.widgetId,"string")&&(l.info.fromSameSource=a.widgetId===widget.id))),e.is(n)&&e.is(n.nodeModel,"object")&&e.is(n.dropPosition)&&(l.info.fromWUX=!0,l.info.dropPosition=n.dropPosition,l.targetTreeNodeModel=n.nodeModel),i=this.retrieveItems(t),e.is(i,"array")&&(i.forEach((function(t){var n,i={};e.is(t)&&(i.rootReferencePID=e.is(t.objectId)?t.objectId:null,i.instancePIDsArray=e.is(t.path,"array")?r.transformRIRToAbsolutePath(t.path):null,i.name=e.is(t.displayName,"string")?t.displayName:null,i.type=e.is(t.referenceType,"string")?t.referenceType:e.is(t.objectType)?t.objectType:null,i.typeNLS=e.is(t.displayType,"string")||e.is(t.displayType)?t.displayType:null,i.securityContext=e.is(t.contextId,"string")?t.contextId:null,i.tenant=e.is(t.envId,"string")?t.envId:null,i.service=e.is(t.serviceId,"string")?t.serviceId:null,i.path=Array.isArray(t.path)?t.path:[],e.is(t.isManufacturable,"string")&&(i.isManufacturable=t.isManufacturable),e.is(i.instancePIDsArray,"array")&&i.instancePIDsArray.length>0&&(n=r.getInstance(i.instancePIDsArray[0]),e.is(n)&&(i.rootReferencePID=n.get("isAggregatedBy")))),l.draggedItems.push(i)})),e.is(l.targetTreeNodeModel)&&(e.is(l.targetTreeNodeModel.getLinkPID,"function")&&(l.targetReferencePID=l.targetTreeNodeModel.getReferencePID(),l.instPID=l.targetTreeNodeModel.getInstancePID(),l.linkPID=l.targetTreeNodeModel.getLinkPID(),l.nodeDepth=l.targetTreeNodeModel.getNodeDepth(),l.siblingsPID=l.targetTreeNodeModel.getSiblingsPID()),delete l.targetTreeNodeModel)),l},onDragEnterColumnHeader:function(){},onDragLeaveColumnHeader:function(){},onDragEnterBlank:function(){},onDragLeaveBlank:function(){},onDropCell:function(t,o){var a,l,s=[],c=[],u=this.getDragNDropInfo(t,o),h=u.siblingsPID,m=u.targetReferencePID,I=d(),P=n.getBehavior("ManageCapableResourcesBehaviour"),C=g(),y=u.info.dropPosition,D=0,v=1;!0!==P.getStepOperationUIState()?(n.getBehavior("ManageCapableResourcesBehaviour").canGroupApplied()&&(D=1,v=2),f(u,{onComplete:function(){u.draggedItems.forEach((function(t){var d,g,f=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,I=f>0?t.instancePIDsArray[f-1]:null,P=f>0?r.getReferenceIdFromInstance(I):t.rootReferencePID;if(p({referenceID:P}))if(u.nodeDepth===D)if(a=u.linkPID,m!==P||e.is(C.resourceAreaID)&&t.rootReferencePID===C.resourceAreaID){if(m===P&&C.resourceAreaID===t.rootReferencePID)f>0&&(d=r.getInstance(t.instancePIDsArray[f-1]),g={linkPID:a,instMdl:d},c.push(g));else if("middle"===y)s.push({type:"SecondaryCandidateResourceLink",fromSideRefPID:C.fromRefPID,toSideRefPID:P,fromSideInstPID:C.fromInstPID,fromSideAbsPath:C.fromSideAbsPath,connectionParams:{primaryResourceLinkPID:a}});else if("top"===y||"bottom"===y){let e=o.nodeModel.getAttributeValue("DELAsmProcessCanUseCnx.V_CapableRscGroupIndex.link");s.push({type:"DELAsmProcessCanUseCnx",fromSideRefPID:C.fromRefPID,toSideRefPID:P,fromSideInstPID:C.fromInstPID,toSideInstPID:I,fromSideAbsPath:C.fromSideAbsPath,toSideRootRefPID:t.rootReferencePID,connectionParams:{"DELAsmProcessCanUseCnx.V_CapableRscGroupIndex":e}})}}else n.warn(i.getNLSValue("ManageCapableResource.setResourceUsage.Failure",{resource:"CapableResourcesStructureLink dose not Exist (or) Instance Under Different Resorce Area"}));else u.nodeDepth===v&&(l=u.linkPID,m!==P||e.is(C.resourceAreaID)&&t.rootReferencePID===C.resourceAreaID?m===P&&t.rootReferencePID===C.resourceAreaID&&f>0&&(d=r.getInstance(t.instancePIDsArray[f-1]),-1===h.indexOf(d.get("PID"))&&(g={linkPID:l,instMdl:d},c.push(g))):n.warn(i.getNLSValue("ManageCapableResource.setResourceUsage.Failure",{resource:"CapableResourcesStructureLink dose not Exist (or) Instance Under Different Resorce Area"})));else n.warn(i.getNLSValue("ManageCapableResource.NotAResourceType"))})),s.length>0&&I.createConnection(s),c.forEach((function(e){n.notify("updateResourceUsage",[e,!0])}))}})):n.warn("DrgDrop Not Supported")},onDropBlank:function(t,o){var a,l=this.getDragNDropInfo(t,o),s=d(),c=n.getBehavior("ManageCapableResourcesBehaviour"),u=g();a=function(t){var o=[];return t.draggedItems.forEach((function(t){var a=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,l=a>0?t.instancePIDsArray[a-1]:null,s=a>0?r.getReferenceIdFromInstance(l):t.rootReferencePID;p({referenceID:s})?o.push({type:"DELAsmProcessCanUseCnx",fromSideRefPID:u.fromRefPID,toSideRefPID:s,fromSideInstPID:u.fromInstPID,toSideInstPID:l,fromSideAbsPath:u.fromSideAbsPath,toSideRootRefPID:t.rootReferencePID}):n.warn(i.getNLSValue("ManageCapableResource.NotAResourceType"))})),o},!0!==c.getStepOperationUIState()?f(l,{onComplete:function(){var e=a(l);s.createConnection(e)}}):n.warn("DrgDrop Not Supported")},onDropColumnHeader:function(e,t){this.onDropBlank(e,t)}}}})),define("DS/DELPPWProcessViewBehaviors/ManageCapableResourcesBehaviour/ManageCapableResourcesBehaviour",["UWA/Core","DS/DELWebInfrastructureControls/DELWebResourceParameter/DELWebResourceParameterModel"],(function(e,t){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin"],creator:function(n,i,r,o,a,l,s,c,u,d,g){var f,p,h,m,I,P,C,y,D,v;return I=[{type:"DELAsmProcessCanUseCnx",attributes:["V_IsPreferred","V_CapableRscGroupIndex"]}],P=function(t,n,r,o){r=r||{},e.is(n)&&i.info(n,o),i.notify("stopProgress",t),e.is(r.onComplete,"function")&&r.onComplete.call(null,n)},C=function(t,n,r,o,a){o=o||{},e.is(r,"string")&&(n+="\n"+r),i.warn(n,a),i.debug(n),i.notify("stopProgress",t),e.is(o.onFailure,"function")&&o.onFailure.call(null,n)},y=function(e,t){var n=l.getConnection(t),i=l.getReference(n.get("to")).get("PLMEntity.V_Name");return r.getNLSValue(e,{resource:i})},f=function(e){var t,n,i,o=[],a=e.path,s=e.id,c=function(e,t,n){e&&o.unshift({label:e.get("PLMEntity.V_Name"),icon:{iconPath:r.getIconURLFromKey(e.get("type")),iconSize:{width:"20px",height:"20px"}},instPID:t,refPID:e.get("PID"),path:n})};if(0===a.length)c(l.getReference(s),null,[]);else for(t=a.length-1;t>=0;t--)i=a[t],c(l.getReferenceModel(i),i,a.slice(0,t+1)),0===t&&(n=l.getInstance(i),c(l.getAggregatingReferenceModelFromInstance(n),null,[]));return o},p=function(e){var t=[],n=l.getFilteredInstancesFromCollection(e);return(n=(n=n.map((function(e,t){return{position:t,data:e}}))).sort((function(e,t){var n=e.data.get("V_TreeOrder"),i=t.data.get("V_TreeOrder");return n&&i?Number(n)-Number(i):e.position-t.position}))).forEach((function(e){var n=l.getReferenceModel(e.data.id);l.isOperation(n)&&t.push({name:n.get("PLMEntity.V_Name"),type:n.get("type"),instPID:e.data.id,icon:r.getIconURLFromKey(n.get("type")),refPID:n.get("PID")})})),t},D=function(e){var n={blnForceRefresh:!0,physicalid:e};return new Promise((function(e,i){t.getResourceParameterLists(n).then((function(t){e(t)}),(function(e){i(e)}))}))},v=function(e){var n={blnForceRefresh:!0,QueryList:e};return new Promise((function(e,i){t.getResourceParametersForList(n).then((function(t){e(t)}),(function(e){i(e)}))}))},{listenTo:function(){return{}},onStart:function(e,t){u.getViewLabelMap().MANAGECAPABLERESOURCESMOD={attribute:{name:"PLMEntity.V_Name",dataIndex:"V_Name",dicoType:"PLMEntity",entity:"reference"},dataIndex:"PLMEntity.V_Name"},t()},onStop:function(){},setStepOperationUIState:function(e){m=e},getStepOperationUIState:function(){return m},getChildrenInfo:function(e){return p(e)},getBreadcrumbValue:function(e){return f(e)},setBreadCrumb:function(e){h=e},getBreadCrumb:function(){return h},isBreadCrumbLabelSameAsNewLabel:function(e){var t=!1,n=h.value;return n.length===e.length&&(t=!(t=n.some((function(t,n){return t.label!==e[n].label})))),t},getBreadCrumbLastElementRefPID:function(){var e=this.getBreadCrumb().value;return e[e.length-1].refPID},getBreadCrumbRefPIDs:function(){var e=[];return this.getBreadCrumb().value.forEach((function(t){e.push(t.refPID)})),e},isBreadCrumbLastElementHeaderOperation:function(){var e=this.getBreadCrumbLastElementRefPID(),t=l.getReference(e);return s.isAKindOf(t,"DELLmiHeaderOperationReference")},getBreadCrumbLastElementInstPID:function(){var e=this.getBreadCrumb().value;return e[e.length-1].instPID},isPrimaryCapableResourceLink:function(e){return"DELAsmProcessCanUseCnx"===l.getConnection(e).get("type")},getBreadCrumbRIRPath:function(){var e,t,n,i=[];for(e=h.value.length,t=0;t<e;t++)n=h.value[t],0===t||i.push(n.instPID),i.push(n.refPID);return i},checkType:function(e,t){return l.getReference(e).get("PPRTYPE")===t},checkParentType:function(e,t){var n=l.getInstance(e).get("isAggregatedBy");return l.getReference(n).get("PPRTYPE")===t},isUsagePossible:function(){var t=this.getBreadCrumbLastElementRefPID(),n=this.getBreadCrumbLastElementInstPID();return this.checkType(t,"OPERATION")&&e.is(n)&&this.checkParentType(n,"SYSTEM")},createResourceUsage:function(e,t){l.createInstance(e,t)},getResourceUsage:function(t){var n=l.getConnection(t).get("ResourceUsage");return e.is(n)?l.getInstance(n):null},getReferenceModel:function(e){return l.getReferenceModel(e)},getReferencePID:function(e){return l.isReference(e)?e:l.getReferenceIdFromInstance(e)},getImpacted:function(e,t,n){return l.getImpacted(e,t,n)},getConnection:function(e){return l.getConnection(e)},canGroupApplied:function(){var e,t,n=this.getBreadCrumbRefPIDs(),i=!1;return n.length>=2&&(e=n[n.length-1],t=l.getReference(n[n.length-2]),this.checkType(e,"OPERATION")&&(s.isAKindOf(t,"DELLmiWorkPlanSystemReference")||s.isAKindOf(t,"DELLmiGeneralSystemReference")||s.isAKindOf(t,"DELLmiServiceWorkPlanSystemReference"))&&(i=!0)),i},canReplaceResource:function(e,t,n){var o=this.getConnection(n),a=o.get("type"),l=i.getBehavior("CapableResourceLinkBehaviour"),s=i.getBehavior("LinkBehavior"),c={canReplace:!0};if("DELAsmProcessCanUseCnx"===a)if(l.canCreatePrimaryCapableRscLink({fromSideRefPID:e,toSideRefPID:t}).canCreateLink){let e=s.getSecondaryRscLinksFromPrimaryLink(o);c.canReplace=!e.some((function(e){return e.get("to")===t})),c.canReplace||(c.errorMessage=r.getNLSValue("ManageCapableResource.ReplaceResourceInLink.PrimaryLinkSecondaryLinkError"))}else c.canReplace=!1,c.errorMessage=r.getNLSValue("ManageCapableResource.ReplaceResourceInLink.PrimaryLinkExistError");else if("SecondaryCandidateResourceLink"===a){let e=o.get("from"),n=this.getConnection(e);t===n.get("to")&&(c.canReplace=!1,c.errorMessage=r.getNLSValue("ManageCapableResource.ReplaceResourceInLink.SecondaryLinkPrimaryLinkError"))}return c},retrieveAttrInfos:function(t,n){var o,l={},s=e.clone(I),u=!1;for(o=0;o<s.length&&!1!==(u=s[o].attributes.every((function(t){var n=a.getAttributeInfo(s[o].type+"."+t);return e.is(n)})));o++);u?t():(i.notify("startProgress",l),c.webServiceRequest({url:"dictionary/properties",method:"POST",onComplete:function(e){var n={},o={};e.forEach((function(e){e.info.forEach((function(t){var i=e.type+"."+t.Name;"V_CapableRscGroupIndex"===t.Name&&(t.NLS=r.getNLSValue("Attribute.DELAsmProcessCanUseCnx.V_CapableRscGroupIndex")),o[i]=t.NLS,n[i]=t}))})),r.addNlsJSON(o),a.addAttributeInfo(n),i.notify("stopProgress",l),t()},onFailure:function(){i.notify("stopProgress",l),n()},onTimeout:function(){i.notify("stopProgress",l),n()},data:e.Json.encode(I)}))},setPreferred:function(e,t){var n="DELAsmProcessCanUseCnx.V_IsPreferred",r=i.getBehavior("LinkBehavior"),o=[];o[0]={attributeInfo:a.getAttributeInfo(n),attributeName:n,dataIndex:"V_IsPreferred",dicoType:"DELAsmProcessCanUseCnx",newValue:"TRUE",objectToBeModified:l.getConnection(e)},r.updateLinkAttributes([e],o)},setResourceUsage:function(t,n){var o,a,s,u={};this.isUsagePossible()&&(a=this.getBreadCrumbRIRPath(),o={url:"dsmfg/private/V0/MfgElement/connection/setResourceUsage/?rscInstance="+t.instPID+"&stepOperationRIRpath="+a+"&rscLinkPID="+t.linkPID,method:"PUT",context:this,onComplete:function(r){var o,a,c,d,g={};if(e.is(r.ResourceUsage))for(a in o=r.ResourceUsage)o.hasOwnProperty(a)&&(c=o[a],(d=l.getConnection(a)).set("ResourceUsage",c,{silent:!0}),g={linkPID:d.get("PID"),instMdl:l.getInstance(c)},i.notify("updateResourceUsage",g));P(u,y("ManageCapableResource.setResourceUsage.Success",t.linkPID),n,s)},onFailure:function(){C(u,y("ManageCapableResource.setResourceUsage.Failure",t.linkPID),n,s)}},i.notify("startProgress",u),s=i.log(r.getNLSValue("ManageCapableResource.setResourceUsage")),c.webServiceRequest(o))},fetchResourceUsages:function(t,n){var o,a,s=this,u={};e.is(t,"array")&&t.length>0?(o=t.map((function(t){return function(t){return new Promise((function(n,i){var r;r={url:"dsmfg/private/V0/MfgElement/connection/getResourceUsage?stepOperationRIRpath="+t.idFrom+"&rscLinkPID="+t.idTo,method:"GET",context:s,onComplete:function(t){var i,r,o;if(e.is(t.resourceUsage))for(r in i=t.resourceUsage)i.hasOwnProperty(r)&&(o=i[r],l.getConnection(r).set("ResourceUsage",o,{silent:!0}));n(t)},onFailure:function(){i()}},c.webServiceRequest(r)}))}(t)})),i.notify("startProgress",u),a=i.log(r.getNLSValue("ManageCapableResource.getResourceUsage")),e.Promise.allSettled(o).then((function(e){var t=[],i=0;e.forEach((function(e,n){"rejected"===e.state?i++:t.push(e.value)})),0===i?P(u,null,n,a):i===e.length?C(u,r.getNLSValue("ManageCapableResource.getResourceUsages.Failure"),null,n,a):C(u,r.getNLSValue("ManageCapableResource.getResourceUsages.PartialFailure"),null,n,a)}))):e.is(n)&&e.is(n.onComplete)&&n.onComplete.call(null)},createRscDetailLinkBulk:function(t,n){var o,a,s,u,d={},g=function(t){return new Promise((function(i,r){var o,a={connectionParams:t},s={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}};o={url:"dsmfg/private/V0/MfgElement/connection/resourceDetail/createResourceDetail",method:"POST",data:e.Json.encode(a),context:self,onComplete:function(t){var r=l.getConnectionParser();e.is(t.connections)&&t.connections.forEach((function(e){r.parse(e,s)})),l.addToCollections({stackedConnections:s.stackedConnections,onComplete:function(e){n.onComplete&&i(e.connections)}})},onFailure:function(){r()}},c.webServiceRequest(o)}))},f=[],p=[];if(e.is(t,"array")&&t.length>0){for(a=0,s=t.length;a<s;a+=5)u=t.slice(a,a+5),f.push(g(u));i.notify("startProgress",d),o=i.log(r.getNLSValue("ManageCapableResource.createResourceDetail")),e.Promise.allSettled(f).then((function(t){var i=0;t.forEach((function(e){"rejected"===e.state?i++:p=p.concat(e.value)})),0===i?(P(d,r.getNLSValue("ManageCapableResource.createResourceDetails.Success"),null,o),e.is(n)&&e.is(n.onComplete)&&n.onComplete.call(null,p)):i===t.length?C(d,r.getNLSValue("ManageCapableResource.createResourceDetails.Failure"),null,n,o):C(d,r.getNLSValue("ManageCapableResource.createResourceDetails.PartialFailure"),null,n,o)}))}else n.onComplete.call(null,p)},fetchRscDetailLinkBulk:function(t,n){var o,a,s,u,d={},g=function(t){return new Promise((function(i,r){var o,a={connectionParams:t},s={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}};o={url:"dsmfg/private/V0/MfgElement/connection/resourceDetail/getResourceDetail",method:"POST",data:e.Json.encode(a),context:self,onComplete:function(t){var r=l.getConnectionParser();e.is(t.connections)&&t.connections.forEach((function(e){r.parse(e,s)})),l.addToCollections({stackedConnections:s.stackedConnections,onComplete:function(e){n.onComplete&&i(e.connections)}})},onFailure:function(){r()}},c.webServiceRequest(o)}))},f=[],p=[];if(e.is(t,"array")&&t.length>0){for(a=0,s=t.length;a<s;a+=5)u=t.slice(a,a+5),f.push(g(u));i.notify("startProgress",d),o=i.log(r.getNLSValue("ManageCapableResource.getResourceDetail")),e.Promise.allSettled(f).then((function(t){var i=0;t.forEach((function(e){"rejected"===e.state?i++:p=p.concat(e.value)})),0===i?(P(d,null,null,o),e.is(n)&&e.is(n.onComplete)&&n.onComplete.call(null,p)):i===t.length?C(d,r.getNLSValue("ManageCapableResource.getResourceDetails.Failure"),null,n,o):C(d,r.getNLSValue("ManageCapableResource.getResourceDetails.PartialFailure"),null,n,o)}))}else n.onComplete.call(null,p)},replaceResourceInLink:function(t,n,o,a){var s,u,d,g={};u={connectionParams:{newResourcePID:t,hopRIRPath:n,linkPID:o}},d={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}},s={url:"dsmfg/private/V0/MfgElement/connection/replaceResourceInLink",method:"POST",data:e.Json.encode(u),context:self,onComplete:function(t){var n=l.getConnectionParser();e.is(t.connections)&&t.connections.forEach((function(e){n.parse(e,d)})),e.is(t.instancesAndReferences)&&(d.stackedInstances=t.instancesAndReferences),l.addToCollections(e.merge(d,{silentMode:!1,onComplete:function(t){i.notify("replaceResourceInLink",t.connections),e.is(a.onComplete,"function")&&a.onComplete()}})),P(g,r.getNLSValue("ManageCapableResource.ReplaceResourceInLink.Success"))},onFailure:function(){C(g,r.getNLSValue("ManageCapableResource.ReplaceResourceInLink.Failed"))}},i.notify("startProgress",g),c.webServiceRequest(s)},fetchResourceParameterListsInfo:function(t,n){var i=[];D(t).then((function(t){var r;for(r in t)t.hasOwnProperty(r)&&i.push({physicalid:t[r].resourceParameterList.physicalid,rpListName:t[r].resourceParameterList.V_Name});e.is(n,"function")&&n(i)}),(function(){e.is(n,"function")&&n(i)}))},fetchResourceParametersInfo:function(t,n){var i={};this.fetchResourceParameterListsInfo(t,(function(t){if(t.length>0){let r=t.map((function(e){return{physicalid:e.physicalid}}));v(r).then((function(r){i=r,Object.keys(i).forEach((function(e){i[e].rpListName=t.find((function(t){return t.physicalid===e})).rpListName})),e.is(n,"function")&&n(i)}),(function(){e.is(n,"function")&&n(i)}))}else e.is(n,"function")&&n(i)}))},fetchResourceParameterFromPlan:function(t,n,o,a){var l,s,u={};l={opRIRPath:t,rpListOccPaths:n,linkPID:o},s={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/getResourceParameterInfo",method:"POST",data:e.Json.encode(l),context:self,onComplete:function(t){e.is(a,"function")&&a(t),P(u)},onFailure:function(){C(u,r.getNLSValue("ManageCapableResource.FetchRPfromRPRow.Failed"))}},i.notify("startProgress",u),c.webServiceRequest(s)}}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/DynamicAttrNonEditableColumnManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager"],(function(e,t){"use strict";return function(n,i){var r=new t(n,i);const o=function(e){let t=n.getPlugins(e);return t&&t.instance?t.instance:null},a=o("DicoPlugin"),l=o("AttributePlugin");return{displayType:"DynamicAttrNonEditable",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,n,i){var o=n.attribute.name,s=a.getAttributeInfo(o),c=l.hasRangeDefined(s),u=l.isMultiValuated(s),d=l.hasMagnitude(s),g=l.isBoolean(s),f=l.isDate(s);return t.editableFlag=!1,g?t.typeRepresentation="boolean":d&&!u?(t.typeRepresentation="number",t.getCellSemantics=r.getMagnitudeSematics):f&&!c&&(t.typeRepresentation="date",u&&(t.getCellSemantics=r.getMultiValueDateSematics)),e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:r.getCellValueForFilter}}),t}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/MSOColumnManager",["UWA/Core","UWA/Class","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager"],(function(e,t,n){"use strict";return function(t,i){var r=new n(t,i),o="DELLmiEstimatedTime.V_EstimatedTime";const a=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},l=a("ResourcePlugin"),s=a("DatabasePlugin");return{displayType:"MANAGESTEPOPERATIONSUI",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e,t){return"DELLmiEstimatedTime.V_EstimatedTime"===t.attribute.name?(e.setCellValue=this.setLinkAttrValue.bind(null,t),e.getCellEditableState=this.getCellEditableState,e.hasCellValue=this.hasCellValue,e.typeRepresentation="numberWithUnit",e.getCellSemantics=r.getMagnitudeSematics):(e.editionPolicy="EditionOnClick",e.getCellTypeRepresentation=this.getCellTypeRepresentation,e.setCellValue=this.setValue.bind(null,t),e.getCellClassName=this.getCellClassName,e.getCellValue=this.getCellValue,e.getCellSemantics=this.getCellSemantics,e.hasCellValue=this.hasCellValue,e.getCellEditableState=this.getCellEditableState),e},hasCellValue:function(e){return!0},getCellTypeRepresentation:function(e){return e.isHeader?"string":"enumCustom"},getCellClassName:function(e){return""},getCellValue:function(t){var n=e.is(t.nodeModel)?t.nodeModel:null;if(e.is(n))return t.nodeModel.options.grid[t.dataIndex]},getCellSemantics:function(e){var t={"":"Undefined"};return t[l.getNLSValue("ManageStepOperation.StepOnly")]="StepOnly",t[l.getNLSValue("ManageStepOperation.Reserved")]="Reserved",t[l.getNLSValue("ManageStepOperation.Released")]="Released",{possibleValues:t,valueType:"enumCustom"}},setValue:function(t,n,r){var a,c,u,d,g,f=n.nodeModel.options.grid.cellInfo.rowInfo,p=e.is(f[t.dataIndex].resourceDetailPID)?f[t.dataIndex].resourceDetailPID:null,h=n.cellModel,m={},I=n.columnID<=2?"PrimaryResourceLinkDetail":"SecondaryResourceLinkDetail",P={onComplete:function(e){var r="Undefined"===e.get(I+".V_AvailabilityMode")?"":e.get(I+".V_AvailabilityMode");n.nodeModel.setAttribute(t.dataIndex,r),f[t.dataIndex]={resourceDetailPID:e.get("PID"),availabilityMode:e.get(I+".V_AvailabilityMode")},d=r.length>0?l.getNLSValue("ManageStepOperation.setAvilabilityMode.Success",{availablity:l.getNLSValue("ManageStepOperation."+r)}):l.getNLSValue("ManageStepOperation.ResetAvilabilityMode.Success"),i.info(d,u),i.notify("stopProgress",m)},onFailure:function(e){n.nodeModel.setAttribute(t.dataIndex,h),g=l.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),i.warn(g,u),i.debug(g),i.notify("stopProgress",m)},data:{}};P.data[I+".V_AvailabilityMode"]=r,e.is(p)?(i.notify("startProgress",m),u=i.log(l.getNLSValue("ManageStepOperation.setAvilabilityMode")),s.updateConnection(p,P)):(a=i.getBehavior("ManageCapableResourcesBehaviour"),e.is(f[t.dataIndex].connectionParams)&&(c=f[t.dataIndex].connectionParams,a.createRscDetailLinkBulk(c,{onComplete:function(r){e.is(r,"array")&&r.length>0&&(p=r[0].get("PID"),f[t.dataIndex]={resourceDetailPID:p,availabilityMode:r[0].get(I+".V_AvailabilityMode")},2===n.columnID&&(f[o+".link"]={resourceDetailPID:p,estimatedTime:r[0].get(o)}),i.notify("startProgress",m),s.updateConnection(p,P))},onFailure:function(e){n.nodeModel.setAttribute(t.dataIndex,h),g=l.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),i.warn(g),i.debug(g)}})))},setLinkAttrValue:function(t,n,r){var a,c,u,d,g,f=n.nodeModel.options.grid.cellInfo.rowInfo,p=e.is(f[t.dataIndex].resourceDetailPID)?f[t.dataIndex].resourceDetailPID:null,h=n.cellModel,m={},I={onComplete:function(e){var r=e.get(o);n.nodeModel.setAttribute(t.dataIndex,r),f[t.dataIndex]={resourceDetailPID:e.get("PID"),estimatedTime:e.get(o)},d=l.getNLSValue("TableView.SingleUpdateSuccess",{key:l.getNLSValue(o),value:r}),i.info(d,u),i.notify("stopProgress",m)},onFailure:function(e){n.nodeModel.setAttribute(t.dataIndex,h),g=l.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),i.warn(g,u),i.debug(g),i.notify("stopProgress",m)},data:{}};I.data[o]=r,e.is(p)?(i.notify("startProgress",m),u=i.log(l.getNLSValue("ManageStepOperation.setAvilabilityMode")),s.updateConnection(p,I)):(a=i.getBehavior("ManageCapableResourcesBehaviour"),e.is(f[t.dataIndex].connectionParams)&&(c=f[t.dataIndex].connectionParams,a.createRscDetailLinkBulk(c,{onComplete:function(n){if(e.is(n,"array")&&n.length>0){p=n[0].get("PID"),f[t.dataIndex]={resourceDetailPID:p,estimatedTime:n[0].get(o)};let e=n[0].get("to");f[e]={resourceDetailPID:p,availabilityMode:n[0].get("PrimaryResourceLinkDetail.V_AvailabilityMode")},i.notify("startProgress",m),s.updateConnection(p,I)}},onFailure:function(e){n.nodeModel.setAttribute(t.dataIndex,h),g=l.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),i.warn(g),i.debug(g)}})))},getCellEditableState:function(e){return!0}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/MagnitudeDynamicAttrCellManager",["UWA/Core"],(function(e){"use strict";return function(t,n){const i=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},r=i("DicoPlugin"),o=i("DatabasePlugin"),a=i("AttributePlugin"),l=i("ResourcePlugin"),s=i("TreeViewPlugin");var c,u,d,g,f=n.getBehavior("ModelBehavior"),p="DELFmiMagnitudeExt.V_DimensionType";return c=["V_RefQuantity","V_IncrementQuantity","V_MinLotQuantity","V_MaxLotQuantity","V_LowerTolerance","V_UpperTolerance"],g=function(){return e.is(widget.getValue("separator"))?widget.getValue("separator"):"|"},u=function(t){var n,i=e.clone(this.getColumnOrGroup(t.columnID)),r=t.nodeModel,l=this.getTreeDocument(),s={isAttrExistOnObj:!1,isAttrApplicableForType:!1};if(e.is(r)&&e.is(l)&&!l.isGroupingNodeModel(r)){let t,l=i.attribute;for(t=0;t<l.length;t++)if(n=r.getAttributeValue(l[t].nodeName),e.is(n)){s.isAttrExistOnObj=!0,s.isAttrApplicableForType=!0,s.attributeName=l[t].name,s.attributeNodeName=l[t].nodeName,s.dataIndex=l[t].dataIndex,s.dicoType=l[t].dicoType,s.entity=l[t].entity;break}if(!s.isAttrExistOnObj){let n=r.getReferencePID(),i=o.getReferenceModel(n);if(e.is(i)){let n=i.get(p),c=a.getAttributeInfo(p),u=a.getAuthorizedValue(c,null,n),d=new RegExp(u,"i");for(t=0;t<l.length;t++)if(-1!==l[t].dicoType.search(d)){s.attributeName=l[t].name,s.attributeNodeName=l[t].nodeName,s.dataIndex=l[t].dataIndex,s.dicoType=l[t].dicoType,s.entity=l[t].entity;break}if(e.is(s.attributeName)){let e="instance"===s.entity?o.getInstance(r.getInstancePID()):i;s.isAttrApplicableForType=!!a.isAttrApplicableForType(e,s.attributeName)}}}}return s},d=function(t,n){var i,r="",o={columnID:t,nodeModel:n};if(e.is(t)&&e.is(n)&&(i=u.call(this,o),e.is(i)&&e.is(i.attributeNodeName))){r=n.getAttributeValue(i.attributeNodeName);let t=a.getAttributeInfo(i.attributeName),o=a.hasMagnitude(t),l=a.hasRangeDefined(t);if(o&&!l&&e.is(r)){let e=a.getMagnitude(t),[n,i]=r.split(" ");r={magnitude:e,mksValue:a.getMKSValueFromUnitValue(e,i,n)}}}return r},{displayType:"MagnitudeDynamicAttr",isSupportedColumn:function(t){var n=!1;return e.is(t)&&e.is(t.dataIndex)&&(n=c.some((function(e){return t.dataIndex.contains(e)}))),n},updateColumnInfos:function(t,n,i){var o,l,s;return o=Array.isArray(n.attribute)?n.attribute[0].name:n.attribute.name,l=r.getAttributeInfo(o),e.is(l)&&(s=a.hasRangeDefined(l)),t.editionPolicy=s?"EditionInPlace":"EditionOnClick",t.getCellTypeRepresentation=this.getCellTypeRepresentation,t.getCellValue=this.getCellValue,t.getCellSemantics=this.getCellSemantics,t.hasCellValue=this.hasCellValue,t.setCellValue=this.setValue,t.getCellEditableState=this.getCellEditableState,t.getCellTooltip=this.getCellTooltip,t.getCellValueForExport=this.getCellValueForExport,t.getCellGroupingKey=this.getCellGroupingKey,t.getCellValueForSort=this.getCellValueForSort,t.getGroupingNodeLabel=this.getMagnitudeGroupingLabel,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{getCellValueForFilter:this.getCellValueForFilter}}),t},getCellTypeRepresentation:function(t){var n,i,o,l="string";return n=u.call(this,t),e.is(n)&&e.is(n.attributeName)&&(i=r.getAttributeInfo(n.attributeName),e.is(i)&&(o=a.hasRangeDefined(i),a.isMultiValuated(i)&&!o?l="string":o?l="enumString":a.isInteger(i)||a.isDouble(i)?l="numberWithUnit":a.isBoolean(i)&&(l="boolean"))),l},getCellTooltip:function(t){var n,i={longHelp:""},o=u.call(t.cellView.collectionView,t),l=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader){let i=r.getAttributeInfo(o.attributeName);if(e.is(i)&&(n=a.hasMagnitude(i)),n){let n=t.nodeModel.getAttributeValue(o.attributeNodeName);e.is(n)&&(n=Array.isArray(n)?n:[n],n=n.map((e=>{var t="";return""!==e&&(t=a.getFormatedMagnitudeValueWithUnitLabel(e,i)),t})),l=n.join("\n"))}}return i.longHelp=l,i},getCellValueForExport:function(t){var n,i,o=u.call(this,t);if(t.rowID<0)n=t.cellModel;else{let l=r.getAttributeInfo(o.attributeName);if(e.is(l)&&(i=a.hasMagnitude(l)),i){let i=t.nodeModel.getAttributeValue(o.attributeNodeName);e.is(i)&&(i=Array.isArray(i)?i:[i],i=i.map((e=>{var t="";return""!==e&&(t=a.getFormatedMagnitudeValueWithUnitLabel(e,l)),t})),n=i.join(""))}}return n},getCellValue:function(t){var n,i="";return n=u.call(this,t),e.is(n)&&n.isAttrExistOnObj&&(i=t.nodeModel.getAttributeValue(n.attributeNodeName)),i},getCellValueForSort:function(e,t){return d.call(this,t,e)},getCellGroupingKey:function(t){var n,i,o={columnID:t.columnID,nodeModel:t.nodeModel},a=u.call(this,o);return e.is(a)&&(n=t.nodeModel.getAttributeValue(a.attributeNodeName),i=r.getAttributeInfo(a.attributeName),e.is(n)&&e.is(i)&&(n=Array.isArray(n)?n:[n])),n},getMagnitudeGroupingLabel:function(t,n){var i,o,l,s,c;return s=t.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount,i=t.getIdentifier(),c=this.treeDocument.getNodeModelFromGroupingNode(t),o=u({columnID:n,nodeModel:c}),l=r.getAttributeInfo(o.attributeName),i=Array.isArray(i)?i.map((function(e){return a.getFormatedMagnitudeValueWithUnitLabel(e,l)})).join(g()):a.getFormatedMagnitudeValueWithUnitLabel(i,l),e.is(i)||(i="N/A"),this.layout.getColumnOptionValue(n,"text")+": "+i+" ("+s+")"},getCellValueForFilter:function(t,n){var i,o,l="",s={columnID:t,nodeModel:n};return e.is(t)&&e.is(n)&&(i=u.call(this,s),e.is(i)&&e.is(i.attributeNodeName)&&(l=n.getAttributeValue(i.attributeNodeName),o=r.getAttributeInfo(i.attributeName),e.is(o)&&a.hasMagnitude(o)&&(l=a.getFormatedMagnitudeValueWithUnitLabel(l,o)))),l},hasCellValue:function(t){var n,i=!1;return n=u.call(this,t),e.is(n)&&(n.isAttrExistOnObj||n.isAttrApplicableForType)&&(i=!0),i},getCellSemantics:function(t){var n,i,o={},l={};if(n=u.call(this,t),e.is(n)&&e.is(n.attributeName)&&(i=r.getAttributeInfo(n.attributeName),l.preservePrecisionInReadonly=a.isDisplayAsEntered(i),e.is(i)))if(a.hasRangeDefined(i)){let e=a.getAuthorizedValuesNLSList(i);for(let t=0;t<e.length;t++){let n=e[t],r=a.getAuthorizedValueDB(i,t);o[n]=r}l.possibleValues=o}else a.hasMagnitude(i)&&n.isAttrExistOnObj&&(l.allowedUnits=a.getAttributeUnits(i));return l},getCellEditableState:function(t){var i,l,c,d,g,f,p,h=!1;return s.areModuleColumnsImmutable(n.getId())||(i=u.call(this,t),e.is(i)&&e.is(i.attributeName)&&(e.is(i.entity)&&e.is(t.nodeModel)&&(f=i.entity,p=t.nodeModel,g="instance"===f?o.getInstance(p.getInstancePID()):o.getReference(p.getReferencePID()),e.is(g)&&(d=r.getTypeMaskInfo(g.get("type")),e.is(d)&&Object.prototype.hasOwnProperty.call(d,i.dataIndex)&&(c=d[i.dataIndex]))),l=r.getAttributeInfo(i.attributeName),e.is(l)&&(h=!a.isReadOnly(l,c)))),h},setValue:function(t,i){var r,o,s=e.clone(this.getColumnOrGroup(t.columnID));if(e.is(f)){if(r=a.getNodeAndColumnInfos(t.nodeModel,s),!e.is(r.attributeName)){let e={attribute:{name:(o=u.call(this,t)).attributeName,nodeName:o.attributeNodeName,dataIndex:o.dataIndex,dicoType:o.dicoType,entity:o.entity}};r=a.getNodeAndColumnInfos(t.nodeModel,e)}e.is(r.attributeName)?f.updateModelAttribute(r.objectToBeModified.id,r,i):n.warn(l.getNLSValue("TableView.AvailabilityFailure",{key:r.attributeNLSTitle}))}}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/OperationTime/OperationTimeColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n){const i=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},r=1,o=2,a=3,l=4,s=i("DicoPlugin"),c=i("AttributePlugin"),u=i("TreeViewPlugin"),d=i("ResourcePlugin");var g,f,p,h="V_OperationTime",m={},I=n.getBehavior("WUXNodeModelBehavior");return g=function(t){var n,i,c=o,u=this.getTreeDocument();return t.rowID>-1&&e.is(u)&&!u.isGroupingNodeModel(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(h),e.is(n)?c="FetchInProgress"===n?a:r:(i=t.nodeModel.getReferenceType(),"OPERATION"===s.getPPRType(i)&&(c=l))),c},f=function(e){var t;e.rowID>-1&&!I.isFakeNodeModel(e.nodeModel)&&(t=e.nodeModel.getReferencePID(),n.notify("refreshOperationTime",[t]))},p=function(t){var n,i={};return n=s.getAttributeInfo(t),e.is(n)&&c.hasMagnitude(n)&&(e.is(m[t])||(m[t]=c.getAttributeUnits(n)),i.allowedUnits=m[t]),i},{displayType:"OPTime",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.editableFlag=!1,e.groupableFlag=!1,e.getCellTypeRepresentation=this.getCellTypeRepresentation,e.getCellValue=this.getCellValue,e.hasCellValue=this.hasCellValue,e.getCellSemantics=this.getCellSemantics,e.getCellEditableState=this.getCellEditableState,e.getCellValueForExport=this.getCellValueForExport,e.getCellTooltip=this.getCellTooltip,e},getCellTypeRepresentation:function(e){var t,n="numberWithUnit";return(t=g.call(this,e))===a?n="user":t===l&&(n="functionIcon"),n},getCellValue:function(e){var t,i;return(t=g.call(this,e))===r?i=e.nodeModel.getAttributeValue(h):t===a?i={icon:{iconName:"refresh",fontIconFamily:WUXManagedFontIcons.Font3DS,className:"refresh-rotation-class"}}:t===l&&(i=u.areModuleColumnsImmutable(n.getId())?null:f.bind(this,e)),i},hasCellValue:function(e){return g.call(this,e)!==o},getCellSemantics:function(e){var t,n={};return(t=g.call(this,e))===r?n=p("DELLmiOperationReference."+h):t===a?n={alignment:"center"}:t===l&&(n={icon:{iconName:"refresh",fontIconFamily:WUXManagedFontIcons.Font3DS},alignment:"center"}),n},getCellEditableState:function(){return!1},getCellValueForExport:function(t){var i;if(i=t.rowID<0?t.cellModel:g.call(this,t)===r?t.nodeModel.getAttributeValue(h):"",t.rowID>=0&&""!==i){const r=n.getBehavior("ExportToCSVBehaviour");if(e.is(r)&&r.getExportUnitsPreference()){const n=this.getColumnOrGroup(t.columnID);if(e.is(n)){const t=c.getAttributeInfoFromColumn(n).attributeName,r=s.getAttributeInfo(t);if(e.is(r)&&c.hasMagnitude(r)){let[e,t]=i.split(" "),n=c.getMagnitude(r);i=e+" "+d.getNLSForUnit(n,t)}}}}return i},getCellTooltip:function(t){var n,i,r,o={longHelp:""};return-1===t.columnID?this.getCellDefaultTooltip(t):(t.isHeader?o.longHelp=t.cellModel:(n=t.nodeModel.getAttributeValue("V_OperationTime"),"string"===e.typeOf(n)&&"FetchInProgress"!==n&&(i=t.cellView.collectionView.getColumnOrGroup(t.columnID),r=c.getNodeAndColumnInfos(t.nodeModel,i),o.longHelp=c.getFormatedMagnitudeValueWithUnitLabel(n,r.attributeInfo))),o)}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/MfgProcessMILColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return function(){var t=function(e){var t,n=!1;return e.isHeader||(n=(t=e.nodeModel.getAttributeValue("cellInfo"))&&t.candidateEntries&&t.candidateEntries.length>1),n};return{displayType:"MIL",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e,t){return e.editionPolicy="EditionInPlace",e.getCellTypeRepresentation=this.getCellTypeRepresentation,e.setCellValue=this.setMILValue.bind(null,t),e.getCellClassName=this.getCellClassName,e.getCellValue=this.getCellValue,e.getCellSemantics=this.getCellSemantics,e.hasCellValue=this.hasMILCellValue,e.getCellEditableState=this.getCellEditableState,e.groupableFlag=!1,e.getCellTooltip=this.getCellTooltip,e},hasMILCellValue:function(e){return!0},getCellTypeRepresentation:function(e){var n;if(e.isHeader)return"string";switch(e.dataIndex){case"MIL_previous":case"MIL_manufactured":n="url";break;case"MIL_rerouting":n=t(e)?"enumString":"string";break;case"MIL_suggestion":n="enumString";break;default:n="string"}return n},getCellClassName:function(t){var n,i,r="";return e.is(t.nodeModel)&&(i=t.nodeModel.options.milStatus,"MIL_status"===t.dataIndex?(n=t.cellView.getContent(),"fail"===i?r="mil-fail-status":"success"===i?r="mil-success-status":"ignore"===i&&(r="mil-ignored-status"),""!==r&&n.hasClassName(r)&&(r="")):"MIL_manufactured"!==t.dataIndex&&"MIL_previous"!==t.dataIndex||(r="icon-text-column"),"MIL_status"!==t.dataIndex&&"success"===i&&(r+=" mil-succeeded-row"),"MIL_status"!==t.dataIndex&&"ignore"===i&&(r+=" mil-ignored-row")),r},getCellValue:function(t){var n,i,r=t.nodeModel.options.grid,o=function(e,t){return{label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}}};switch(t.dataIndex){case"MIL_previous":return n=r.cellInfo.PreviousProdIconUrl,o(r[t.dataIndex],n);case"MIL_manufactured":return n=r.cellInfo.MfgItemIconUrl,o(r[t.dataIndex],n);case"MIL_rerouting":return i=r[t.dataIndex],"object"===e.typeOf(i)&&e.is(this.isCellInEdition,"function")&&(this.isCellInEdition(t.cellID)&&(i=r[t.dataIndex].valueItem),i=r[t.dataIndex].labelItem),i;case"MIL_suggestion":return e.is(r[t.dataIndex])&&!t.isHeader&&e.is(this.isCellInEdition,"function")?this.isCellInEdition(t.cellID)?r[t.dataIndex].value:r[t.dataIndex].label:null;default:return r[t.dataIndex]}},getCellSemantics:function(e){var n,i=e.nodeModel.options,r=function(e){var t={};return e.forEach((function(e){t[e.labelItem]=e.valueItem})),t};return"MIL_rerouting"===e.dataIndex?i.grid&&i.grid.cellInfo&&t(e)&&(n={possibleValues:r(i.grid.cellInfo.candidateEntries)}):"MIL_suggestion"===e.dataIndex&&i.grid&&i.grid.cellInfo&&(n={possibleValues:r(i.grid.cellInfo.suggestionToPerformEntries)}),n},setMILValue:function(t,n,i){var r,o,a;if("MIL_suggestion"===t.dataIndex){if(!e.is(i)||""===i)return;n.nodeModel.options.grid.cellInfo.suggestionToPerformEntries.forEach((function(e){e.valueItem===i&&(a={label:e.labelItem,value:e.valueItem,tooltip:e.tooltipItem,getLabel:function(){return this.label}})})),n.nodeModel.setAttribute(t.dataIndex,a),e.is(n.nodeModel)&&e.is(n.nodeModel.options)&&(r=n.nodeModel.options,e.is(r.grid)&&(r.grid.MIL_suggestion=a,e.is(r.grid.cellInfo)&&(r=r.grid.cellInfo,e.is(r.action)&&(r.action=i))))}else if("MIL_rerouting"===t.dataIndex){if(!e.is(i)||""===i)return;n.nodeModel.options.grid.cellInfo.candidateEntries.forEach((function(e){e.valueItem===i&&(o=e)})),n.nodeModel.setAttribute(t.dataIndex,o)}},getCellEditableState:function(n){var i,r,o=!0;if(e.is(n.nodeModel)&&e.is(n.nodeModel.options))switch(r=n.nodeModel.options.milStatus,"MIL_suggestion"!==n.dataIndex||!e.is(r)||"success"!==r&&"ignore"!==r||(o=!1),n.dataIndex){case"MIL_suggestion":i=o;break;case"MIL_rerouting":i=t(n);break;default:i=!1}return i},getCellTooltip:function(t){var n,i,r={longHelp:""};return i=t.cellModel,-1===t.columnID?this.getCellDefaultTooltip(t):(t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?r.longHelp="object"===e.typeOf(i)?i.getLabel():i:(n=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(n)?e.is(n.tooltip)?n.tooltip:n.getLabel():""),r)}}}})),define("DS/DELPPWProcessViewBehaviors/GraphViewBehavior/EGraphLinkFilterUI",["UWA/Core"],(function(e){"use strict";var t=!0;return function(n){var i,r,o,a=[],l=n.getBehavior("UXFactoryBehavior"),s=n.getBehavior("EGraphViewBehaviour"),c=n.getBehavior("ResourceBehavior");return{init:function(t){i=e.extend(i,t)},destroy:function(){r.destroy(),r=void 0},isActive:function(){},getDisplayLabel:function(e){var t="";switch(e){case"scope":t=c.getNLSValue("GraphViewLinksFilter.Scope");break;case"partialscopeOnHeaderOperation":t=c.getNLSValue("GraphViewLinksFilter.PartialScope");break;case"implement":t=c.getNLSValue("GraphViewLinksFilter.Implement");break;case"origin":t=c.getNLSValue("GraphViewLinksFilter.Origin");break;case"alternate":t=c.getNLSValue("GraphViewLinksFilter.Alternate");break;case"output":t=c.getNLSValue("GraphViewLinksFilter.Output");break;case"productFlow":t=c.getNLSValue("GraphViewLinksFilter.ProductFlow");break;case"capableResources":t=c.getNLSValue("GraphViewLinksFilter.CapableResources");break;case"capableResourcesStructure":t=c.getNLSValue("GraphViewLinksFilter.CapableResourcesStructureLink");break;case"secondaryCapableResources":t=c.getNLSValue("GraphViewLinksFilter.SecondaryCandidateResourceLink");break;case"capableResourceAssetStructure":t=c.getNLSValue("GraphViewLinksFilter.CapableResourceAssetStructure");break;case"preAssignedWorkcenterLink":t=c.getNLSValue("GraphViewLinksFilter.preAssignedWorkcenterLink")}return t},loadLinkGraphUI:function(){var e,i,r,u,d,g,f,p,h=this,m={},I=c.getNLSValue("InsertCmd.OK"),P=l.getComponent("Toggle"),C=l.getComponent("ButtonGroup"),y=l.getComponent("Button");for(n.notify("startProgress",m),o=l.create("Dialog",{title:c.getNLSValue("GraphViewLinksFilter.Header"),domId:"PPR-GraphView-filter",resizableFlag:!0,modalFlag:!0,buttons:{Ok:new y({label:I,className:"ok primary",emphasize:"primary",onClick:function(){s.removeGenericEGraphView(),s.createGenericEGraphView(),o.destroy(),o=null}})}}),e=new C({type:"checkbox"}),p=new P({type:"switch",label:c.getNLSValue("GraphViewLinksFilter.SelectUnselectAll")+"</br>",checkFlag:t,allowUnsafeHTMLLabel:!0}),e.addChild(p),p.addEventListener("buttonclick",(function(e){!1===e.dsModel._properties.checkFlag.value?(h.setStateOfAllLinks(!1),t=!1):(h.setStateOfAllLinks(!0),t=!0)})),d=s.getSupportedTypesOfLink(),u=0;u<d.length;u++)i=(g=d._models[u]._attributes).linkType,r="<img src='"+c.getIconURLFromKey(g.img)+"'/>   "+h.getDisplayLabel(g.linkType),f=g.displayed,a[u]=new P({type:"checkbox",value:i,label:r,isMultiSelection:!0,checkFlag:f,allowUnsafeHTMLLabel:!0}),e.addChild(a[u]),a[u].addEventListener("buttonclick",(function(e){s.setLinkDisplayStatus(e.dsModel._properties.value.value,e.dsModel._properties.checkFlag.value)}));o.content=e,o.show(),n.notify("stopProgress",m)},setStateOfAllLinks:function(e){a.forEach((function(t){t.checkFlag=e,s.setLinkDisplayStatus(t._properties.value.value,e)}))}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/SequenceNoCellManager",["UWA/Core"],(function(e){"use strict";return function(t){const n=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null}("DicoPlugin");var i=function(t,i){var r,o,a=null;if(e.is(i)){if(i.isRoot())a=n.isAKindOf(i.object.type,"DELLmiHeaderWorkPlanReference")||n.isAKindOf(i.object.type,"DELLmiServiceHeaderWorkPlanReference")?null:1;else if(o=i.getParent().getAttributeValue(t),r=i.getPreviousBrother(),e.is(r)){let e=r.getAttributeValue(t).toString().split("."),n=parseInt(e[e.length-1]);a=null===o?n+1:o+"."+(n+1)}else a=null===o?1:o+".1";i.setAttribute(t,a)}return a};return{displayType:"SequenceNo",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,n,i){return t.groupableFlag=!1,t.getCellValue=this.getCellValue,t.hasCellValue=this.hasCellValue,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:this.getCellValueForFilter}}),t},getCellValue:function(e){var t=e.nodeModel,n=e.dataIndex;return i.call(this,n,t)},getCellValueForFilter:function(e,t){return i.call(this,e,t)},hasCellValue:function(t){var n,i,r=!1;return n=t.nodeModel,i=this.getTreeDocument(),e.is(n)&&e.is(i)&&(r=!i.isGroupingNodeModel(n)),r}}}})),define("DS/DELPPWProcessViewBehaviors/Operations3DViewerBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["Operations3DViewerPlugin"],creator:function(e,t,n){return{listenTo:function(){return{}},onStart:function(){},onStop:function(){},getPreferences:function(){return n.getPreferences()},updatePreferences:function(e){n.updatePreferences(e)},get3DVisibilityState:function(e){return n.get3DVisibilityState(e)},update3DVisibilityState:function(e,t){t=!0===t?1:0,n.update3DVisibilityState(e,t)},isAggregatingRootLoadedInViewer:function(e){return n.isAggregatingRootLoadedInViewer(e)},overrideAllChildrenNodesVisibilityState:function(e,t){t=!0===t?1:0,n.overrideAllChildrenNodesVisibilityState(e,t)}}}}})),define("DS/DELPPWProcessViewBehaviors/TLV3DViewerBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin","ProcessImplementPlugin","InterWidgetComPlugin","Operations3DViewerPlugin"],creator:function(t,n,i,r,o,a){const l=function(e,t){this.rirPath=e,this.isVisible=t};var s,c,u,d,g,f,p,h,m,I,P,C,y,D,v,b;return s=function(e){var t,n=[];for(t=0;t<e.length;t++)t%2==1&&n.push(e[t]);return n},c=function(){var e=n.getBehavior("TreeListViewBehavior"),t={};return e.hasHideShowItems3DColumn()&&(t.hideShowItems3D=function(e){var t,n=e.context.nodeModel,i=n.getRIRpath(),r=0===d(n);t=new l(i,r),I(t)},t.hiddenByUser=!1),e.has3DBuildUpColumn()&&(t.hideShowBuildUp3D=function(e){var t=e.context.nodeModel,i={};i.isActivated=0===t.get3DBuildUpState(),i.absPath=0===t.getAbsolutePath().length?[t.getID()]:t.getAbsolutePath(),n.notify("toggle3DBuildUpColumnButton",i)},t.hideShow3DBuildUpState=0),t},u=function(e){a.add3DVisibilityState(e)},d=function(e){return a.get3DVisibilityState(e.getRIRpath())},g=function(e,t){a.update3DVisibilityState(e.getRIRpath(),t)},f=function(e){return a.isAggregatingRootLoadedInViewer(e)},p=function(e,t){a.overrideAllChildrenNodesVisibilityState(e,t)},h=function(e,t){let n,i=[];return function e(t,r){t.hasChildren()&&t.getChildren(!0).forEach((function(t){1!==d(t)&&(n=new l(t.getRIRpath(),r),i.push(n)),t.hasChildren()&&e(t,r)}))}(e,t),i},m=function(t){var l,s,c,u,d=n.getBehavior("WUXNodeModelBehavior"),g=[],f=[],p={};u=function(t){var n,r,o,a=[],l=t.absPath,c=l[l.length-1],u=e.is(c)?c:t.nodeId,g=null,f=i.getReference(u);if(e.is(f)||(o=i.getInstance(c),e.is(o)&&(f=i.getReferenceModelFromInstance(o),g=o.id,u=f.id)),e.is(u))switch(i.getPPRType(f)){case"OPERATION":case"SYSTEM":i.getImpacted(e.is(g)?g:u,!0,{relationTypes:["ProcessImplementLink","PartialProcessImplementLink","ProcessImplementLinkOcc"]}).forEach((function(e){r=i.transformToRIROccurrencePath(e),a.push(r)})),n=d.getNodeModel(l.length>0?l:u,!0),s&&(p.sysOrOperRIRPath=n.getRIRpath());break;case"PROCESS":case"RESOURCE":case"SERVICE":n=d.getNodeModel(l.length>0?l:u),Array.isArray(n)&&n.forEach((function(e){a.push(e.getRIRpath())}))}return a},o.isOpsViewerWidgetLinked()&&n.getId()===t.sourceId&&(c=(s=t.changed.isSelected)?"Highlight":"UnHighlight",g=u(t.changed),n.getId()===t.sourceId&&(g.length>0?g.forEach((function(e){a.isAggregatingRootLoadedInViewer(e)?f.push(e):i.findAllRIRPaths(e).forEach((function(e){a.isAggregatingRootLoadedInViewer(e)&&f.push(e)}))})):(l=d.getNodeModel(t.changed.absPath.length>0?t.changed.absPath:t.changed.nodeId,!0),(g=r.getAllScopedOrImplementedItems(l)).forEach((function(e){a.isAggregatingRootLoadedInViewer(e)?f.push(e):i.findAllRIRPaths(e).forEach((function(e){a.isAggregatingRootLoadedInViewer(e)&&f.push(e)}))})))),(f.length>0||e.is(p.sysOrOperRIRPath))&&(p.path=f,p.event=c,n.notify("toggle3DHighlight",p)))},I=function(e){var t=[];e=Array.isArray(e)?e:[e],t=t.concat(e),n.notify("toggle3DVisibility",[t])},P=function(t){var i=n.getBehavior("WUXNodeModelBehavior"),r=i.getTreeDocument(),o=[];t.forEach((function(t){let n,a=1===t.length?t:s(t),c=i.getNodeModel(a,!0);e.is(c)&&(1!==d(c)&&(n=new l(c.getRIRpath(),!0),o.push(n)),c.getParents().forEach((function(t){if(!r.isGroupingNodeModel(t))if(o.length>0){let i,r=!1;for(i=0;i<o.length;i++)if(e.equals(o[i].rirPath,t.getRIRpath())){r=!0;break}r||1!==d(t)&&(n=new l(t.getRIRpath(),!0),o.push(n))}else 1!==d(t)&&(n=new l(t.getRIRpath(),!0),o.push(n))})),o=o.concat(h(c,!0)))})),I(o)},C=function(t){var i=n.getBehavior("WUXNodeModelBehavior"),r=i.getTreeDocument(),o=[],a=[],c=[],u=function(t,n){let i,r=t.getBrothers();return e.is(r)&&r.forEach((function(e){i=new l(e.getRIRpath(),!1),n.push(i)})),n};t.forEach((function(t){let n,c=1===t.length?t:s(t),d=i.getNodeModel(c,!0),g=[],f=[];if(e.is(d)){if(n=new l(d.getRIRpath(),!0),g.push(n),u(d,f),d.getParents().forEach((function(e){r.isGroupingNodeModel(e)||(n=new l(e.getRIRpath(),!0),g.push(n),u(e,f))})),g=g.concat(h(d,!0)),o.length>0&&g.length>0){let t,n,i=!1;for(t=0;t<g.length;t++){for(n=0;n<o.length;n++)if(e.equals(g[t].rirPath,o[n].rirPath)){i=!0;break}if(i||o.push(g[t]),a.length>0){for(i=!1,n=0;n<a.length;n++)if(e.equals(g[t].rirPath,a[n].rirPath)){i=!0;break}i&&a.splice(n,1)}}}else o=o.concat(g);if(f.length>0&&o.length>0&&a.length>0){let t,n,i=!1;for(t=0;t<f.length;t++){for(n=0;n<o.length;n++)if(e.equals(f[t].rirPath,o[n].rirPath)){i=!0;break}i||a.push(f[t])}}else a=a.concat(f)}})),c=(c=c.concat(o)).concat(a),I(c)},y=function(t){var i=n.getBehavior("WUXNodeModelBehavior"),r=[];t.forEach((function(t){let n,o=1===t.length?t:s(t),a=i.getNodeModel(o,!0);e.is(a)&&(1!==d(a)&&(n=new l(a.getRIRpath(),!0),r.push(n)),r=r.concat(h(a,!0)))})),I(r)},D=function(t){var i,r=n.getBehavior("WUXNodeModelBehavior"),o=r.getTreeDocument(),a=t.parentPID,l=t.isVisible?1:null;i=r.getNodeModel(a,!0),e.is(i)&&(o.prepareUpdate(),g(i,l),i.updateOptions({hiddenByUser:!1}),function e(t,n){if(!t.hasChildren())return g(t,n),void t.updateOptions({hiddenByUser:!1});t.getChildren(!0).forEach((function(t){g(t,n),t.updateOptions({hiddenByUser:!1}),t.hasChildren()&&e(t,n)}))}(i,l),o.pushUpdate())},v=function(t){var i,r,o=n.getBehavior("WUXNodeModelBehavior"),a=o.getTreeDocument();i=function(t,n){let i,r=0,o=0,a=t.getChildren(!0),l=1;for(i=0;i<a.length;i++)0===d(a[i])?o++:-1===d(a[i])&&r++;return(o>0||r>0)&&(l=a.length===o?e.is(n)?n:0:-1),l},r=function(e){e.getParents().forEach((function(e){a.isGroupingNodeModel(e)||e.is3DHiddenByUser()||(g(e,i(e)),e.updateOptions({hiddenByUser:!1}))}))},a.prepareUpdate(),t.forEach((function(t){var n=t.isVisible?1:0,a=o.getNodeModel(t.absPath,!0);e.is(a)&&(a.hasChildren()&&1===n?g(a,i(a,n)):g(a,n),a.isRoot()||r(a),0===n?a.updateOptions({hiddenByUser:!0}):a.updateOptions({hiddenByUser:!1}))})),a.pushUpdate()},b=function(t){var i=n.getBehavior("WUXNodeModelBehavior");t.forEach((function(t){var n=t.isActivated?1:0,r=i.getNodeModel(t.absPath,!0);e.is(r)&&r.updateOptions({hideShow3DBuildUpState:n})}))},{listenTo:function(){return{select:m,compute3DVisibility:I,computeShowItems3DVisibility:P,computeShowOnly3DVisibility:C,computeShowAll3DVisibility:y,set3DVisibilityState:D,update3DVisibilityState:v,update3DBuildUpState:b}},onStart:function(){},onStop:function(){},getReferenceNodeOptions:function(){return c()},get3DVisibilityState:function(e){return d(e)},update3DVisibilityState:function(e,t){g(e,t)},add3DVisibilityState:function(e){u(e)},isAggregatingRootLoadedInViewer:function(e){return f(e)},overrideAllChildrenNodesVisibilityState:function(e,t){p(e,t)},onFilterUpdated:function(e){f([e])&&n.notify("expandFilterUpdated",e)}}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/ContItemConcentrationColumnManager",["UWA/Core"],(function(e){"use strict";return function(t){const n=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},i=n("AttributePlugin"),r=n("DatabasePlugin"),o=n("DicoPlugin"),a=n("ResourcePlugin");var l=function(t,n,r){var l,s,c={},u=["DELFmiContQuantity_Mass.V_ContQuantity","DELFmiContQuantity_Area.V_ContQuantity","DELFmiContQuantity_Length.V_ContQuantity","DELFmiContQuantity_Volume.V_ContQuantity"],d=["DELFmiRefQuantity_Mass.V_RefQuantity","DELFmiRefQuantity_Area.V_RefQuantity","DELFmiRefQuantity_Length.V_RefQuantity","DELFmiRefQuantity_Volume.V_RefQuantity"];switch(n.toUpperCase()){case"MASS":r?(l=t.getAttributeValue(u[0]+".instance"),s=o.getAttributeInfo(u[0])):(l=t.get(d[0]),s=o.getAttributeInfo(d[0]));break;case"AREA":r?(l=t.getAttributeValue(u[1]+".instance"),s=o.getAttributeInfo(u[1])):(l=t.get(d[1]),s=o.getAttributeInfo(d[1]));break;case"LENGTH":r?(l=t.getAttributeValue(u[2]+".instance"),s=o.getAttributeInfo(u[2])):(l=t.get(d[2]),s=o.getAttributeInfo(d[2]));break;case"VOLUME":r?(l=t.getAttributeValue(u[3]+".instance"),s=o.getAttributeInfo(u[3])):(l=t.get(d[3]),s=o.getAttributeInfo(d[3]))}if(e.is(l)&&e.is(s)){let[e,t]=l.split(" ");if(i.hasMagnitude(s)){let n=i.getMagnitude(s);c={value:e,unit:a.getNLSForUnit(n,t)}}}return c},s=function(t,n){var i,o,a,s,c,u,d,g,f,p,h,m="DELFmiMagnitudeExt.V_DimensionType";return e.is(t._parentNode._referencePID)&&(i=r.getReferenceModel(t._parentNode.getReferencePID()),o=r.getReferenceModel(t.getReferencePID()),e.is(i)&&e.is(o)&&(a=i.get(m),s=o.get(m),e.is(a)&&e.is(s)&&(c=l(i,a,!1),u=l(t,s,!0),e.is(c)&&e.is(u)&&(d=Number(u.value)/Number(c.value),f=Math.log10(d),(f=Math.floor(f))<0&&Math.abs(f)>6?(d=d.toExponential(5),[p,h]=d.split("e"),d=(p=parseFloat(p).toString())+"e"+h):d=Math.round(1e6*(d+Number.EPSILON))/1e6,g=e.is(n)&&n?d:d+" "+u.unit+"/"+c.unit)))),g};return{displayType:"ComputedValue",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,n,i){return t.typeRepresentation="string",t.getCellValue=this.getCellValue,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"number",options:{getCellValueForFilter:this.getCellValueForFilter}}),t},getCellValue:function(t){var n;return"Calculated_Concentration"===this.getColumnOrGroup(t.columnID).dataIndex&&e.is(t.nodeModel)&&(n=s(t.nodeModel)),n},getCellValueForFilter:function(t,n){var i;return e.is(n)&&e.is(t)&&"Calculated_Concentration"===t&&(i=s(n,!0)),i}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/CoProductColumnManager",["UWA/Core"],(function(e){"use strict";const t=["CreateMaterial","Provide","ProcessContinuousCreateMaterial","ProcessContinuousProvide"];return function(n,i){const r=function(e){let t=n.getPlugins(e);return t&&t.instance?t.instance:null};var o=r("DatabasePlugin"),a=r("AttributePlugin"),l=r("DicoPlugin"),s=r("ResourcePlugin"),c=i.getBehavior("ModelBehavior"),u=function(e,t){var n,i,r=this.getColumnOrGroup(t);return i=e.getAttributeValue(r.attribute.nodeName),n=l.getAttributeInfo(r.attribute.name),"ProducingCoProduct"===a.getAuthorizedValue(n,null,i)},d=function(n,i){var r=!1,s=n.getInstancePID();if(e.is(s)){let e=o.getInstance(s);a.isAttrApplicableForType(e,i)&&function(e){var n,i,r=!1;for(i=o.getReferenceModelFromInstance(e),n=0;n<t.length;n++)if(l.isAKindOf(i,t[n])){r=!0;break}return r}(e)&&(r=!0)}return r};return{displayType:"isCoProduct",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,n,i){return t.editionPolicy="EditionOnClick",t.editableFlag=!0,t.getCellTypeRepresentation=this.getCellTypeRepresentation,t.getCellValue=this.getCellValue,t.hasCellValue=this.hasCellValue,t.setCellValue=this.setCellValue,t.getCellGroupingKey=this.getCellGroupingKey,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"boolean",options:{getCellValueForFilter:this.getCellValueForFilter}}),t},getCellTypeRepresentation:function(e){return e.isHeader?"string":"boolean"},hasCellValue:function(t){var n,i=this.getColumnOrGroup(t.columnID),r=this.getTreeDocument(),o=!1;return e.is(r)&&!r.isGroupingNodeModel(t.nodeModel)&&(n=a.getNodeAndColumnInfos(t.nodeModel,i),d(t.nodeModel,n.attributeName)&&(o=!0)),o},getCellValue:function(t){var n;return e.is(t)&&(n=u.call(this,t.nodeModel,t.dataIndex)),n},getCellGroupingKey:function(t,n){var i;return e.is(t)&&d(t.nodeModel,n)&&(i=u.call(this,t.nodeModel,n)),i},getCellValueForFilter:function(t,n){var i;return e.is(n)&&e.is(t)&&d(n,t)&&(i=(i=u.call(this,n,t)).toString()),i},setCellValue:function(t,n){var i,r,o;if(o=l.getAttributeInfo("DELFmiUseCaseExt.V_UseCase"),e.is(c)&&(i=this.getColumnOrGroup(t.columnID),r=a.getNodeAndColumnInfos(t.nodeModel,i),e.is(r))){n=n?"ProducingCoProduct":"EngineeringAssembly";const e=a.getNLS(o),t="ProducingCoProduct"===n?s.getNLSValue("TRUE"):s.getNLSValue("FALSE");c.updateModelAttribute(r.objectToBeModified.id,r,n,{successMsg:s.getNLSValue("TableView.SingleUpdateSuccess",{key:e,value:t}),failureMsg:s.getNLSValue("TableView.SingleUpdateFailure",{key:e,value:t})})}}}}})),define("DS/DELPPWProcessViewBehaviors/BI/MfgProcessBIBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","ProcessImplementPlugin"],creator:function(t,n,i,r,o,a,l){var s,c,u=[],d={ItemAssignmentStatus:{Assigned_OneAdd:{colorCode:"#009E73",label:o.getNLSValue("BI.ItemStatus.Assigned_OneAdd")},Assigned_AllAdd:{colorCode:"#CC79A7",label:o.getNLSValue("BI.ItemStatus.Assigned_AllAdd")},Assigned_AllRemove:{colorCode:"#0072B2",label:o.getNLSValue("BI.ItemStatus.Assigned_AllRemove")},Assigned_AddNRemove:{colorCode:"#56b4e9",label:o.getNLSValue("BI.ItemStatus.Assigned_AddNRemove")},Assignable:{colorCode:"#d55e00",label:o.getNLSValue("BI.ItemStatus.Assignable")},NonAssignable:{colorCode:"#cccccc",label:o.getNLSValue("BI.ItemStatus.NonAssignable")},Inconsistent:{colorCode:"#000000",label:o.getNLSValue("BI.ItemStatus.Inconsistent")}},SystemUpdateStatus:{UpToDate:{colorCode:"#008000",label:o.getNLSValue("BI.ProcessStatus.UpToDate")},InDirectlyImpacting:{colorCode:"#FFFF00",label:o.getNLSValue("BI.ProcessStatus.InDirectlyImpacting")},DirectlyImpacting:{colorCode:"#FF0000",label:o.getNLSValue("BI.ProcessStatus.DirectlyImpacting")},Inconsistent:{colorCode:"#000000",label:o.getNLSValue("BI.ProcessStatus.Inconsistent")}}},g="FullyAssigned",f="PartiallyAssigned",p="OverAssigned",h=function(t){var i,r,o=(r=n.getBehavior("TreeListViewBehavior").getColumnsByDisplayType("BIEssentials")).length>0?r[0]:null,a={nodeOptions:{}};return e.is(o)&&(i={colorCode:d[c].Inconsistent.colorCode,tooltip:d[c].Inconsistent.label,status:"Inconsistent"},i=e.is(u[t])?u[t]:i,a.nodeOptions[o]={colorCode:i.colorCode,tooltip:i.tooltip,status:i.status}),a},m=function(t){var i,r;e.is(c)&&(i=t[c],r=d[c],e.is(i,"array")&&i.length>0&&(i.forEach((function(t){var n,i,o=t.get("id"),a=t.get("status"),s=t.get("QuantityConsumedInfo");if(n=r[a].colorCode,i=r[a].label,e.is(s)){let t=l.getQuantityConsumedInfo(s);if(e.is(t)&&e.is(t.BITooltip))switch(i=t.BITooltip,t.BIStatus){case f:n="#FFFF66";break;case g:n="#009E73";break;case p:n="#CC79A7"}}u[o]={rirPath:o,colorCode:n,tooltip:i,status:a}})),function(){var t,i=n.getBehavior("WUXNodeModelBehavior"),r=i.getAllDescendants();i&&Object.keys(u).length>0&&(i.prepareUpdate(),t={callback:function(t,n){t.forEach((function(e){var t=e.getRIRpath(),n=h(t);n.nodeOptions&&e.updateOptions(n.nodeOptions)})),e.is(n,"function")&&n()},globalArray:r,context:this,blockSize:100},a.getExecuteByBlockPromise(t).then((function(){i.pushUpdate()})))}()))},I=function(){var t,i=n.getBehavior("TreeListViewBehavior"),r=n.getBehavior("WUXNodeModelBehavior"),o=i.getColumnsByDisplayType("BIEssentials"),a={};u=[],i&&r&&o&&(t=r.getAllDescendants(),o.forEach((function(n){a[n]={colorCode:"transparent",tooltip:""},e.is(t,"array")&&0<t.length&&r.withTransactionUpdate((function(){t.forEach((function(e){e.updateOptions(a)}))}))})))},P=function(){var e=n.getBehavior("WUXNodeModelBehavior");i.getBICmdState()&&e.getSelectedNodesInfo().length>0&&i.computeBI()};return{listenTo:function(){return{updateBIStatus:m,resetBIModel:I,refreshCmd:P}},onStart:function(t){s=t||{},e.is(s.biStatusType)&&(c=s.biStatusType)},onStop:function(){},getNodeOptions:function(t,n){var r={nodeOptions:{},taggerOptions:{}};return i.getBICmdState()&&e.is(n)&&(r=h(n)),r},getBICmdState:function(){return i.getBICmdState()},resetBIModelCollection:function(){return i.resetBIModelCollection()}}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/MCRColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return function(t){const n=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null}("ResourcePlugin");return{displayType:"MANAGECAPABLERESOURCESMOD",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e,t){return e.editionPolicy="EditionOnClick",e.getCellTypeRepresentation=this.getCellTypeRepresentation,e.setCellValue=this.setValue.bind(null,t),e.getCellClassName=this.getCellClassName,e.getCellValue=this.getCellValue,e.getCellSemantics=this.getCellSemantics,e.hasCellValue=this.hasCellValue,e.getCellEditableState=this.getCellEditableState,e},hasCellValue:function(e){return!0},getCellTypeRepresentation:function(e){var t="string";return e.isHeader?"string":("Preferred"===e.dataIndex&&(t="functionIcon"),t)},getCellClassName:function(e){return""},getCellValue:function(e){var t=e.nodeModel.options.grid;return"Preferred"===e.dataIndex?""===t[e.dataIndex]?n.getNLSValue("FALSE"):n.getNLSValue("TRUE"):t[e.dataIndex]},getCellSemantics:function(e){var t;return"Preferred"===e.dataIndex&&(t={icon:e.nodeModel.options.grid.Preferred}),t},setValue:function(e,t,n){},getCellEditableState:function(e){return!1}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/SequenceModeColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n){var i,r,o;const a=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},l=a("DicoPlugin"),s=a("AttributePlugin"),c=a("ResourcePlugin"),u=a("DatabasePlugin");return i=function(t){var n,i,r,o,a,l;if(i=t.nodeModel,r=this.getColumnOrGroup(t.columnID),e.is(i)&&Array.isArray(r.attribute))for((n={}).column=r,o=n.column.attribute,a=0;a<o.length;a++)if(l=i.getAttributeValue(o[a].nodeName),e.is(l)){n.attributeName=o[a].name,n.attributeNodeName=o[a].nodeName,n.dataIndex=o[a].dataIndex,n.dicoType=o[a].dicoType,n.entity=o[a].entity;break}return n},r=function(t){return e.is(t)&&e.is(t.AuthorizedValues)?[{Name:"Linear",NLS:t.AuthorizedValues[0].NLS},{Name:"Advanced",NLS:t.AuthorizedValues[1].NLS}]:[]},o=function(e,t){var n,i,o;return i=t.nodeModel.getAttributeValue(e.attributeNodeName),n=s.getAttributeInfo(e.attributeName),r(n).forEach((e=>{e.Name!==i&&e.NLS!==i||(o=e.Name)})),"Linear"===o?c.getNLSValue("SetSequencingModeUI.Linear"):"Advanced"===o?c.getNLSValue("SetSequencingModeUI.Advanced"):void 0},{displayType:"SequenceModeColumn",isSupportedColumn:function(t){var n=!1;return e.is(t)&&e.is(t.dataIndex)&&(n=t.dataIndex.contains("V_SequencingMode")),n},updateColumnInfos:function(t,n,i){return t.editionPolicy="EditionOnClick",t.typeRepresentation="string",t.editableFlag=!0,t.getCellValue=this.getCellValue,t.getCellSemantics=this.getCellSemantics,t.hasCellValue=this.hasCellValue,t.setCellValue=this.setCellValue,t.getCellValueForSort=this.getCellValueForSort,t.getCellTooltip=this.getCellTooltip,t.getCellValueForExport=this.getCellValueForExport,t.getCellGroupingKey=this.getCellGroupingKey,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:this.getCellValueForFilter}}),t},getCellValue:function(t){var n,o,a="";return n=i.call(this,t),e.is(n)&&e.is(n.attributeNodeName)&&(a=t.nodeModel.getAttributeValue(n.attributeNodeName),o=l.getAttributeInfo(n.attributeName),r.call(this,o).forEach((e=>{e.Name!==a&&e.NLS!==a||(a=e.Name)}))),a},getCellSemantics:function(e){return{possibleValues:[{value:"Linear",label:c.getNLSValue("SetSequencingModeUI.Linear")},{value:"Advanced",label:c.getNLSValue("SetSequencingModeUI.Advanced")}]}},hasCellValue:function(t){var n,r=!1;return n=i.call(this,t),e.is(n)&&e.is(n.attributeNodeName)&&(r=!0),r},getCellValueForSort:function(t,n){var r,a,l={columnID:n,nodeModel:t};return e.is(n)&&e.is(t)&&(r=i.call(this,l),e.is(r)&&e.is(r.attributeNodeName)&&(a=o(r,l))),a},getCellTooltip:function(t){var n={longHelp:""},r=i.call(t.cellView.collectionView,t),a=t.cellModel;return-1===t.columnID?this.getCellDefaultTooltip(t):(!t.isHeader&&e.is(r)&&(a=o(r,t)),n.longHelp=a,n)},getCellValueForFilter:function(t,n){var r,a,l={columnID:t,nodeModel:n};return e.is(t)&&e.is(n)&&(r=i.call(this,l),e.is(r)&&e.is(r.attributeNodeName)&&(a=o(r,l))),a},setCellValue:function(t,o){var a,l,d,g=t.cellModel,f={};a=i.call(this,t),e.is(a)&&e.is(a.attributeName)&&(d=s.getAttributeInfo(a.attributeName),(l=r.call(this,d)).forEach((e=>{e.Name!==g&&e.NLS!==g||(g=e.Name)})),l.forEach((e=>{e.Name!==o&&e.NLS!==o||(o=e.Name)})),n.notify("startProgress",f),u.setSequencingMode(t.nodeModel.getID(),o,{onFailure:function(){t.nodeModel.setAttribute(t.attributeNodeName,g),n.warn(c.getNLSValue("SetSequencingModeUI.UpdateFailure")),n.notify("stopProgress",f)},onComplete:function(){t.nodeModel.setAttribute(t.attributeNodeName,o),n.info(c.getNLSValue("SetSequencingModeUI.UpdateSuccess")),n.notify("refreshProductFlowView"),n.notify("setSequencingMode"),n.notify("stopProgress",f)}}))},getCellValueForExport:function(t){var n,r;return t.rowID<0?n=t.cellModel:(r=i.call(this,t),e.is(r)&&e.is(t)&&(n=o(r,t))),n},getCellGroupingKey:function(t){var n,r={columnID:t.columnID,nodeModel:t.nodeModel},a=i.call(this,r);return e.is(a)&&e.is(a.attributeNodeName)&&(n=o(a,t)),n}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/ServiceRoleCellManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager"],(function(e,t){"use strict";return function(n,i){var r=new t(n,i);const o=function(e){let t=n.getPlugins(e);return t&&t.instance?t.instance:null},a=o("DicoPlugin"),l=o("AttributePlugin"),s=o("DatabasePlugin"),c=o("ResourcePlugin");return{displayType:"ServiceRole",isSupportedColumn:function(e){return"DELServiceProcessRoleExt.V_OOTBRole"===e.attribute.name||"DELServiceProcessRoleExt.V_CustoRole"===e.attribute.name},updateColumnInfos:function(t,n,i){var o,s=a.getAllServiceProcessRoles(),c=[];return"DELServiceProcessRoleExt.V_OOTBRole"===n.attribute.name?(t.editableFlag=!1,t.allowResetToUndefinedByUIFlag=!0,t.hasRangeDefined=!1,t.hasCellValue=this.hasCellValue,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:r.getCellValueForFilter}})):"DELServiceProcessRoleExt.V_CustoRole"===n.attribute.name&&(o=a.getAttributeInfo(n.attribute.name),(c=s.map((e=>({label:e.nlsText,value:e.role})))).push(""),t.editableFlag=!l.isReadOnly(o),t.allowResetToUndefinedByUIFlag=!1,t.hasRangeDefined=!0,t.editionPolicy="EditionOnClick",t.typeRepresentation="string",t.getCellSemantics=function(){return{possibleValues:c}},t.hasCellValue=this.hasCellValue,t.setCellValue=this.setValue,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:r.getCellValueForFilter}})),t},setValue:function(t,n){var r=this.getColumnOrGroup(t.columnID),o=l.getNodeAndColumnInfos(t.nodeModel,r);let u,d=t.cellModel;u=a.getAllServiceProcessRoles().find((e=>e.role===n)),u=e.is(u)?u.roleootb:n,s.setOOTBRole(o.objectToBeModified.id,n,u,{onFailure:function(){t.nodeModel.setAttribute("DELServiceProcessRoleExt.V_CustoRole.instance",d),d=""===d?"":d,t.nodeModel.setAttribute("DELServiceProcessRoleExt.V_OOTBRole.instance",d),i.warn(c.getNLSValue("OOTBRole.UpdateFailure"))},onComplete:function(){i.notify("objectAttributesModified",""),i.info(c.getNLSValue("OOTBRole.UpdateSuccess"))}}),this.updateRenderedRow(t.rowID,{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1})},hasCellValue:function(t){var n,i,r,o,l,s,c,u=!1;return r=this.getTreeDocument(),(!e.is(r)||!r.isGroupingNodeModel(t.nodeModel))&&(t.nodeModel.isRoot()?i=!1:(o=function e(){return!r.isGroupingNodeModel(n)||(n=n.getParent(!0),e())},e.is(t.nodeModel)&&(l=t.nodeModel.getReferenceType()),n=t.nodeModel.getParent(!0),s=["DELWkiDataCollectPlanReference","DELWkiDataCollectChecklistReference","DELResourceParameterPlanReference"],o()&&!r.isGroupingNodeModel(t.nodeModel)&&e.is(n)?(c=n.getReferenceType(),(u=["DELLmiServiceWorkPlanSystemReference","DELLmiServiceWorkPlanOperationalReference","DELLmiServiceWorkPlanRectifyingReference","DELLmiServiceWorkPlanSupportingTaskReference"].some((e=>a.isAKindOf(c,e))))&&s.some((e=>a.isAKindOf(e,l)))?i=!1:u&&(i=!0)):i=!1),i)}}}})),define("DS/DELPPWProcessViewBehaviors/ProcedureViewBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin","DicoPlugin","WebServicePlugin","ResourcePlugin","AttributePlugin","UXComponentsPlugin","InterWidgetComPlugin"],creator:function(t,n,i,r,o,a,l,s,c){var u,d,g,f,p,h,m,I,P=s.getComponent("Button"),C=s.getComponent("ButtonGroup"),y=s.getComponent("Toggle"),D=s.getComponent("ComboBox");return h=function(t){return new Promise((function(r,o){var l={},s=function(){n.notify("stopProgress",l),n.warn(a.getNLSValue("EditAttributeUI.retrieveDataFailure")),o()};if(!e.is(t))return n.debug("object is not available."),void o();n.notify("startProgress",l),i.fetchAttributes(t,{onComplete:function(){n.notify("stopProgress",l),r()},onFailure:s,onTimeout:s})}))},m=function(e,t){i.isWorkInstruction(t)&&n.notify("editWorkInstruction",{WKIModel:t,instancePID:e})},I=function(t,n){var i,r=d.getReferenceModelFromInstance(t),o=d.getDisplayName(t),l=u.createElement("img",{class:"PV-Move-Img"}),s=u.createElement("p",{class:"PV-Move-Title"}),c=u.createElement("p",{class:"PV-Move-Label"}),h=u.createElement("div",{class:"PV-Move-Div"}),m=new C({type:"radio"}),I=u.createElement("p",{class:"PV-Move-Label"}),v=u.createElement("div",{class:"PV-Move-Div"}),b=u.createElement("img",{class:"PV-Move-Img"}),S=u.createElement("p",{class:"PV-Move-Title"}),R=[],V={Before:a.getNLSValue("ProcedureViewModule.Move.Before"),After:a.getNLSValue("ProcedureViewModule.Move.After")},L=function(){};g=u.createElement("div",{class:"ProcedureView-Move-Dialog"}),f=u.createElement("div",{class:"ProcedureView-Move-Form"}),(p=u.create("Dialog",{title:a.getNLSValue("ProcedureViewModule.Move.Title")+" - "+o,domId:"PV-Move-UI",content:g,modalFlag:!1,resizableFlag:!0,width:500,minWidth:300,height:300,minHeight:200,buttons:{Cancel:new P({onClick:function(){p.close()}}),Ok:new P({emphasize:"primary",onClick:function(){e.is(L,"function")}})}})).close=function(){e.is(g)&&g.destroy(),this.destroy(),p=null},c.setText(a.getNLSValue("ProcedureViewModule.Move.Title")),l.src=a.getIconURLFromKey(r.get("type")),s.setText(o),c.inject(h),l.inject(h),s.inject(h),h.inject(f),Object.entries(V).forEach((([e,t])=>{m.addChild(new y({type:"radio",label:t,value:e,checkFlag:"Before"===e}))})),m.addEventListener("change",(function(){I.setText(m.label)})),m.inject(f),n.forEach((e=>{let t=d.getInstance(e);R.push({label:d.getDisplayName(t),icon:a.getIconURLFromKey(t.get("type")),value:e})})),(i=new D({placeholder:a.getNLSValue("ProcedureViewModule.Move.PlaceHolder"),enableSearchFlag:!0,elementsList:R,mainElementContent:"icon"})).addEventListener("change",(function(){let e=d.getInstance(i.value),t=d.getReferenceModelFromInstance(e);b.src=a.getIconURLFromKey(t.get("type")),S.setText(d.getDisplayName(e))})),i.inject(f),I.setText(V.Before),S.setText("..."),I.inject(v),b.inject(v),S.inject(v),v.inject(f),f.inject(g),p.show()},{listenTo:function(){},onStart:function(){u=n.getBehavior("UXFactoryBehavior"),d=n.getBehavior("ModelBehavior")},onStop:function(){},fetchModelAttributes:function(e){return h(e)},editInstructionAttribute:function(e,t){return m(e,t)},getAttributeInfo:function(e){return l.getAttributeInfo(e)},isOpsViewerWidgetLinked:function(){return c.isOpsViewerWidgetLinked()},areChildrenFetched:function(e){return!i.needToQueryForChildren(e)},isMdlAKindOf:function(e,t){return r.isAKindOf(e,t)},move:function(e,t){return I(e,t)},isAttrApplicableForMdl:function(e,t){return l.isAttrApplicableForType(e,t)},getServiceOotbRoleFromCustoRole:function(e){return r.getRoleOOTBFromRoleName(e)}}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/HideShowItems3DColumnManager",["UWA/Core"],(function(e){"use strict";return function(t){const n=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},i=Object.freeze({SHOWN:1,HIDDEN:0,PARTIAL:-1});var r=n("Operations3DViewerPlugin"),o=n("ResourcePlugin");return{displayType:"hideShowItems3D",isTrasientColumn:!0,isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.sortableFlag=!1,e.editableFlag=!1,e.isDraggable=!1,e.isExportable=!1,e.editionPolicy="EditionInPlace",e.typeRepresentation="functionIcon",e.alignment="center",e.text="",e.icon=o.getIconURLFromKey("3DColumnIcon"),e.hasCellValue=this.hasCellValue,e.getCellValue=this.getCellValue,e.getCellSemantics=this.getCellSemantics,e.getCellTooltip=this.getCellTooltip,delete e.tooltipIndex,delete e.getCellValueForExport,e},getCellSemantics:function(t){var n,o,a=t.nodeModel,l=!1;if(e.is(a)){const s=t.nodeModel.options.grid;if(e.is(s))switch(r.get3DVisibilityState(a.getRIRpath())){case i.SHOWN:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye pad_eye wux-ui-3ds-lg";break;case i.HIDDEN:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-off pad_eye_off wux-ui-3ds-lg";break;case i.PARTIAL:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-partial pad_eye_partial wux-ui-3ds-lg";break;default:l=!0}o=l?{disabled:l}:{icon:{iconClasses:n}}}return o},hasCellValue:function(t){var n,i,r=!1;return n=t.nodeModel,i=this.getTreeDocument(),e.is(n)&&e.is(i)&&(r=!i.isGroupingNodeModel(n)),r},getCellValue:function(e){return e.nodeModel.options.hideShowItems3D},getCellTooltip:function(t){var n,i={longHelp:""};return t.isHeader?i.longHelp=o.getNLSValue("HideShow3D.tooltip"):(n=r.get3DVisibilityState(t.nodeModel.getRIRpath()),e.is(n,"number")&&(i.longHelp=0===n?o.getNLSValue("HideShow3D.show3D"):o.getNLSValue("HideShow3D.hide3D"))),i}}}})),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeUtil",["UWA/Core"],(function(e){"use strict";return function(t,n,i,r){var o,a,l,s=["V_EstimatedTime","V_MeasuredTime"],c="V_TimeMode",u="V_UseGanttTimeSolver",d={EstimatedTime:s[0],MeasuredTime:s[1]};return a=function(e){return n.doesAttributeExist(e,u)&&"TRUE"===e.get(u)},l=function(e){var t,i,o;return i=r.getAttributeInfo(c),t=n.getAuthorizedValueIndex(i,null,e.get(c)),o=n.getAuthorizedValueDB(i,t),d[o]},o=function(t){var n,r=void 0;return a(t)?i.needToQueryForChildren(t)?r=0:(r=0,i.getAllChildrenFromCollection(t.get("PID")).instancesPID.forEach((function(t){var n,o,a=i.getInstance(t);o=i.getReferenceIdFromInstance(a),o=i.getReference(o),e.is(o)&&(n=l(o),r+=e.is(n)&&o.get(n)?Number(o.get(n)):0)}))):(n=l(t),r=e.is(n)?t.get(n):void 0),r},{fillNodeOptions:function(t,n){var r,a=t.referencePID;e.is(a)&&(r=i.getReference(a),e.is(r)&&"OPERATION"===r.get("PPRTYPE")&&n.forEach((function(e){e.includes(".operationTime")&&(t.grid[e]=o(r))})))},fillUpdatedNodeOptions:function(t,n,i,r){var a;(r===c||s.indexOf(r)>-1)&&(a=n.find((function(e){return e.includes(".operationTime")})),e.is(a)&&(t[a]=o(i)))}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/RichTextColumnManager",["UWA/Core"],(function(e){"use strict";return function(t){const n=["DELWkiInstructionReference.V_WIInstruction_Text","DELWkiSignOffReference.V_WISignOff_Text","DELWkiAlertReference.V_WIAlert_Message","DELLmiRichText.V_RichText"];var i,r,o,a;return i=function(t){var n,i,r,o,a,l;if(i=t.nodeModel,!this.treeDocument.isGroupingNodeModel(i)&&(r=this.getColumnOrGroup(t.columnID),e.is(i)&&e.is(r.attribute)))for((n={}).column=r,o=Array.isArray(r.attribute)?n.column.attribute:[n.column.attribute],a=0;a<o.length;a++)if(l=i.getAttributeValue(o[a].nodeName),e.is(l)){n.attributeName=o[a].name,n.attributeNodeName=o[a].nodeName,n.dataIndex=o[a].dataIndex,n.dicoType=o[a].dicoType,n.entity=o[a].entity;break}return n},r=function(t){var n,r=!1;return n=i.call(this,t),e.is(n)&&e.is(n.attributeNodeName)&&(r=!0),r},o=function(e){const t=document.createElement("div");t.innerHTML=e;const n=t.querySelector("title");return n&&n.remove(),t.querySelectorAll("br").forEach((e=>e.replaceWith("\n"))),t.querySelectorAll("p, div").forEach((e=>{const t=document.createTextNode("\n"+e.textContent.trim()+"\n");e.replaceWith(t)})),(t.textContent||t.innerText||"").replace(/\n{3,}/g,"\n\n").replace(/[ \t]+/g," ").replace(/\s*\n\s*/g,"\n").trim()},a=function(t){var n,r="";return n=i.call(this,t),e.is(n)&&e.is(n.attributeNodeName)&&(r=t.nodeModel.getAttributeValue(n.attributeNodeName),e.is(r)&&(r=o(r))),r},{displayType:"RichText",isSupportedColumn:function(t){var i;return e.is(t)&&(i=Array.isArray(t.attribute)?t.attribute[0].name:t.attribute.name),n.indexOf(i)>-1},updateColumnInfos:function(t,n,i){var o;return o=!!e.is(i.enableWrapTextInView,"boolean")&&i.enableWrapTextInView,t.editableFlag=!1,t.hasCellValue=r,t.getCellValue=a,t.typeRepresentation="textBlock",o&&(t.autoRowHeightFlag=!0),t}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/CompensationMaterialColumnManager",["UWA/Core"],(function(e){"use strict";const t=["DELFmiContQuantity_Mass.V_ContQuantity","DELFmiContQuantity_Area.V_ContQuantity","DELFmiContQuantity_Length.V_ContQuantity","DELFmiContQuantity_Volume.V_ContQuantity"],n="IsCompensation",i="DELFmiMagnitudeExt.V_DimensionType";return function(r,o){const a=function(e){let t=r.getPlugins(e);return t&&t.instance?t.instance:null};var l,s,c=a("DicoPlugin"),u=a("AttributePlugin"),d=a("DatabasePlugin"),g=a("ResourcePlugin"),f=o.getBehavior("ModelBehavior"),p=o.getBehavior("WUXNodeModelBehavior");return l=function(n){var i=!1;if(e.is(n))for(let e=0;e<t.length;e++)if(u.doesAttributeExist(n,t[e])||c.isAKindOf(n,"ProcessInstanceContinuous")&&u.isAttrApplicableForType(n,t[e])){i=!0;break}return i},s=function(n){var i,r=!0;for(let o=0;o<t.length;o++)if(i=n.getAttributeValue(t[o]+".instance"),e.is(i)){r=!1;break}return r},{displayType:"isCompensation",isTrasientColumn:!0,isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(t,n,i){return t.editionPolicy="EditionOnClick",t.editableFlag=!0,t.getCellTypeRepresentation=this.getCellTypeRepresentation,t.getCellValue=this.getCellValue,t.hasCellValue=this.hasCellValue,t.setCellValue=this.setCellValue,e.is(i.isViewFilterable,"boolean")&&i.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"boolean",options:{getCellValueForFilter:this.getCellValueForFilter}}),t},getCellTypeRepresentation:function(e){return e.isHeader?"string":"boolean"},hasCellValue:function(e){var t,n,i=!1;return p.isFakeNodeModel(e.nodeModel)||(t=this.getColumnOrGroup(e.columnID),n=u.getNodeAndColumnInfos(e.nodeModel,t),i=l(n.objectToBeModified)),i},getCellValue:function(t){var n=!0;return e.is(t)&&(n=s(t.nodeModel)),n},getCellValueForFilter:function(t,n){var i,r,o;return e.is(n)&&(r=n.getInstancePID(),o=d.getInstance(r),l(o)&&(i=(i=s(n)).toString())),i},setCellValue:function(r,a){var l,s,p,h,m={},I={},P={},C=e.clone(this.getColumnOrGroup(r.columnID)),y=c.getAttributeInfo(n);switch(d.getReferenceModel(r.nodeModel.getReferencePID()).get(i).toUpperCase()){case"MASS":p=t[0];break;case"AREA":p=t[1];break;case"LENGTH":p=t[2];break;case"VOLUME":p=t[3]}e.is(f)&&(a?(m.IsCompensation="TRUE",P={data:m,onComplete:function(){o.notify("objectAttributesModified"),delete r.nodeModel.options.grid[p+".instance"],l=g.getNLSValue("TableView.SingleUpdateSuccess",{key:u.getNLS(y),value:g.getNLSValue("TRUE")}),o.info(l),o.notify("stopProgress",I)},onFailure:function(){l=g.getNLSValue("TableView.SingleUpdateFailure",{key:u.getNLS(y),value:g.getNLSValue("TRUE")}),o.warn(l),o.notify("stopProgress",I)}},o.notify("startProgress",I),h=r.nodeModel.getInstancePID(),d.updateInstance(h,P)):(C.attribute={name:p,dataIndex:p.split(".")[1],entity:"instance",dicoType:p.split(".")[0]},s=u.getNodeAndColumnInfos(r.nodeModel,C),a="1",h=r.nodeModel.getReferencePID(),f.updateModelAttribute(h,s,a,{onComplete:function(){l=g.getNLSValue("TableView.SingleUpdateSuccess",{key:u.getNLS(y),value:g.getNLSValue("FALSE")}),o.info(l)}})))}}}})),define("DS/DELPPWProcessViewBehaviors/ColumnManagers/BuildUp3DColumnManager",["UWA/Core"],(function(e){"use strict";return function(t){const n=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null};var i=n("ResourcePlugin"),r=n("DatabasePlugin");const o=Object.freeze({ACTIVATED:1,INPROGRESS:-1,DEACTIVATED:0});return{displayType:"hideShowBuildUp3D",isTrasientColumn:!0,isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.sortableFlag=!1,e.editableFlag=!1,e.isDraggable=!1,e.isExportable=!1,e.editionPolicy="EditionInPlace",e.typeRepresentation="functionIcon",e.alignment="center",e.text="",e.icon=i.getIconURLFromKey("3DBuildUpColumnIcon"),e.hasCellValue=this.hasCellValue,e.getCellValue=this.getCellValue,e.getCellSemantics=this.getCellSemantics,e.getCellTooltip=this.getCellTooltip,delete e.tooltipIndex,delete e.getCellValueForExport,e},getCellSemantics:function(t){var n,a=t.nodeModel,l=i.getIconURLFromKey("BuildUp_Off");if(e.is(a)&&(r.isOperation(a.getReferencePID())||r.isSystem(a.getReferencePID()))){const r=t.nodeModel.options.grid;if(e.is(r))switch(a.get3DBuildUpState()){case o.ACTIVATED:l=i.getIconURLFromKey("BuildUp_On");break;case o.DEACTIVATED:case o.INPROGRESS:l=i.getIconURLFromKey("BuildUp_Off")}n={icon:l}}return n},hasCellValue:function(t){var n,i,o=!0;return n=t.nodeModel,i=this.getTreeDocument(),e.is(n)&&e.is(i)&&(i.isGroupingNodeModel(n)||!r.isOperation(n.getReferencePID())&&!r.isSystem(n.getReferencePID()))&&(o=!1),o},getCellValue:function(e){return e.nodeModel.options.hideShowBuildUp3D},getCellTooltip:function(t){var n,r={longHelp:""};return-1===t.columnID?this.getCellDefaultTooltip(t):(t.isHeader?r.longHelp=i.getNLSValue("HideShowBuildUp3D.tooltip"):(n=t.nodeModel.get3DBuildUpState(),e.is(n,"number")&&(r.longHelp=0===n?i.getNLSValue("HideShowBuildUp3D.showBuildUp3D"):i.getNLSValue("HideShowBuildUp3D.hideBuildUp3D"))),r)}}}})),define("DS/DELPPWProcessViewBehaviors/MfgProcessReplaceBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin","DicoPlugin","ProcessImplementPlugin"],creator:function(t,n,i,r,o,a,l,s,c){var u,d,g;return u={replaceByLatest:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByLatestRevision",dialogTitle:o.getNLSValue("Dialog.ReplaceByLatest.Report")},replaceByExisting:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/WithExisting",dialogTitle:o.getNLSValue("Dialog.ReplaceByExisting.Report")},replaceByNewRevision:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByNewRevision",dialogTitle:o.getNLSValue("Dialog.ReplaceByNewRevision.Report")},replaceByNew:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByDuplicate",dialogTitle:o.getNLSValue("Dialog.ReplaceByNew.Report")}},d=function(t,i,r,a,s,c,d){var f={};n.notify("startProgress",f),new Promise((function(o,a){l.webServiceRequest({url:u[t].URL,method:"POST",headers:l.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode({instancesToReplace:i,existingRefPID:r,oneDelmiaAggregationMode:n.getPreferenceValue("oneDelmiaAggregationMode")}),onFailure:a,onTimeout:a,onCancel:a,onComplete:o})})).then((function(e){g(t,e,f,a,s,c,d)}),(function(i,r){n.notify("stopProgress",f),e.is(r)&&e.is(r.message,"string")&&n.warn(o.getNLSValue("Error."+t+".Title"),a),n.log(o.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+o.getNLSValue("failed"),a)})).catch((function(){n.notify("stopProgress",f),n.debug(o.getNLSValue("Error."+t+".Title"),a),n.log(o.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+o.getNLSValue("failed"),a)}))},g=function(t,r,l,s,c,d,g){var f,p,h,m,I,P=[],C=[],y=a.getConnectionParser();f={silentMode:!1,stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},p=r.succeeded||[],h=r.failed||[],p.forEach((function(e){e.instancesAndReferences.forEach((function(e){var t=e.attributesValue;Object.prototype.hasOwnProperty.call(t,"isInstanceOf")?(t.queriedForConnections=!0,f.stackedInstances.push(t)):(t.queriedForConnections=!0,C.push(t.PID),f.stackedReferences.push(t))})),e.connections.forEach((function(e){y.parse(e,f)})),f.deletedObjects=f.deletedObjects.concat(e.deletedObjects),P.push(e.message)})),h.forEach((function(e){P.push(e.message)})),f.onComplete=function(r){var g=n.getBehavior("UXFactoryBehavior"),p=n.getPreferenceValue("refreshBIOnAuthoring");e.is(c)&&!c||g.showMessage(u[t].dialogTitle,{messages:P,token:s}),e.is(p,"boolean")&&!0===p&&i.getBICmdState()&&i.computeBI(),e.is(f)&&Array.isArray(f.stackedInstances)&&f.stackedInstances.forEach((function(e){let t=a.getInstance(e.PID);a.manageLinearProductFlowsOnCreateInstance(t)})),n.notify("replaced",{}),e.is(d,"function")&&(e.is(r)&&e.is(Array.isArray(r.instancesAndReferences))&&f.stackedInstances.forEach((function(t){if(e.is(t)&&e.is(t.PID)){let n=a.getInstance(t.PID),i=e.is(n)?a.getAggregatingReferenceModelFromInstance(n):null;e.is(i)&&(i.isSystem()||i.isWorkInstruction())&&(r.instancesAndReferences.some((e=>e.id===n.id))||r.instancesAndReferences.push(n))}})),d(r)),n.notify("stopProgress",l),n.log(o.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+o.getNLSValue("completed"),s)},m=function(){a.addToCollections({stackedInstances:f.stackedInstances,silentMode:f.silentMode,onComplete:function(){a.addToCollections({stackedConnections:f.stackedConnections,stackedReferences:f.stackedReferences,deletedObjects:f.deletedObjects,silentMode:f.silentMode,onComplete:f.onComplete,onFailure:g})}})},I=function(){n.debug("Fetching getDescendantsFromServer for replaced Instances failed."),f.onComplete()},a.getDescendantsFromServer(C,m,{onFailure:I,silentMode:!0,forceDBMode:!0})},{listenTo:function(){return{}},onStart:function(e){e||{}},onStop:function(){},replace:function(t,i,l,g,f,p){var h,m=[],I=[],P=e.is(l)?l:r.getSelectionsWithPaths(n.getId()),C=n.log(o.getNLSValue("replaceCmd.LogMessage",{replaceType:t}));if(e.is(P)&&P.length>0){for(let e=0;e<P.length;e++)if(P[e].length>0){P=P[e];break}P.forEach((function(e){m.push(e.path.join(",")),I=I.concat(e.path.splice(0,e.path.length-1))})),h=P.every((function(e){var t=e.id;return-1===I.indexOf(t)}))}if(e.is(u[t]))if(m.length<1)n.warn(o.getNLSValue("Error.NoSelections.Title"),C);else if(h)if("replaceByExisting"===t){let r=a.getReference(i),l=[c.getPartialScopeLinkType()],u={relationTypes:l,onComplete:function(){var e=n.getBehavior("MfgProcessBehavior"),r=a.getReference(i);m.every((function(t){var n={child:r,targetAbsPath:t.split(",")};return!0===e.isInstPossible(n)}))?d(t,m,i,C,g,f,p):n.warn(o.getNLSValue("ModelBehavior.InsertInstance.HOP.Error",{refName:r.get("PLMEntity.V_Name")}),C)}};e.is(r)?s.isAKindOf(r,"DELLmiHeaderOperationReference")?a.getConnectionsByModel(r,null,u):d(t,m,i,C,g,f,p):a.getDescendantsFromServer(i,u.onComplete,{gridIDs:l,silentMode:!0,forceDBMode:!0,expandLevel:0})}else d(t,m,i,C,g,f,p);else n.warn(o.getNLSValue("Error.replaceDirectOrIndirectChild.Title"),C);else n.warn(o.getNLSValue("Error.InvalidReplaceOperation.Title"),C)},replaceProcessByNewBranch:function(t,i){var r,a,s,c,u,d={},f={};e.is(t)&&e.is(t.payload)&&new Promise((function(n,i){l.webServiceRequest({url:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByNewBranch",method:"POST",headers:l.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(t.payload),onFailure:i,onTimeout:i,onCancel:i,onComplete:n})})).then((function(e){if(i){r=t.payload.mfgParentProcessID,a=t.payload.mfgProcessOccPath,d.succeeded={[r]:{[a]:{instancesAndReferences:(l=e.succeeded,p=[],l.forEach((function(e){e.instancesAndReferences.forEach((function(e){p.push(e)}))})),p)}}},u=n.log(o.getNLSValue("replaceCmd.LogMessage",{replaceType:"ByNewBranch"})),s=function(e){t.callback(d)},c=function(e){n.notify("stopProgress",f)},n.notify("startProgress",f),g("replaceByNewBranch",e,f,u,!1,s,c)}var l,p}),(function(e){t.callback(e)}))}}}}})),define("DS/DELPPWProcessViewBehaviors/GraphViewBehavior/EGraphViewBehaviour",["UWA/Core","DS/DELPPWProcessViewBehaviors/GraphViewBehavior/EGraphLinkFilterUI"],(function(e,t){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin","ProcessImplementPlugin"],creator:function(n,i,r,o,a,l,s,c,u,d,g,f){var p,h,m,I,P,C,y,D,v,b,S,R,V,L,M,E,N,A,T,w,k,F,O,x,B,U,_,W,G,H,j,K,X,q,Q,z,Y,J,Z,$,ee,te,ne,ie,re,oe,ae,le,se,ce,ue,de,ge,fe,pe,he,me,Ie,Pe,Ce,ye,De,ve,be,Se={},Re={},Ve=0,Le=!1,Me={},Ee=new e.Class.Collection([],{}),Ne=o.getComponent("EGraphCore"),Ae=o.getComponent("EGraphViews"),Te=o.getComponent("EGraphIact"),we=o.getComponent("EGraphUtils"),ke=o.getComponent("Breadcrumb"),Fe=o.getComponent("ContextualMenuManager"),Oe=o.getComponent("TooltipModel"),xe=o.getComponent("WUXCommandsManager"),Be=i.getElement();return ie=function(){var e=i.getBehavior("SelectionBehavior").getSelectionsWithPaths()[0][0];return{id:e.id,path:e.path}},re=function(t){var n=l.getReferenceModel(C.id);return e.is(t)&&(t.get("isAggregatedBy")===C.id||n&&n.get("PID")===t.get("isAggregatedBy"))},oe=function(){return 1===Ve},b=function(){Ae.SVGEdgeView.call(this)},W=function(){},S=function(e,t){const n=document.createElement("canvas").getContext("2d");return n.font=t,n.measureText(e).width},R=function(e,t){var n="12px Arial";let i=e.view.display.text.childNodes[0].innerHTML,r=S(i,n),o=i;if(r>t){for(;r>t&&o.length>0;)o=o.slice(0,-1),r=S(o+"",n);o.length>0&&(o+="")}return o},V=function(e,t){var n,o,a=i.getBehavior("ProductFlowLinkBehavior");if(n=r.getNLSValue(e.mark.get(t)),"ProcessImplementLinkOcc"===e.mark.get(t)){let t=r.getNLSValue("LinksUI.Link.JoinPattern"),i=f.getRoleFromModelOrComputed(e.mark.get("PID")),o=f.getActionsFromConnection(e.mark.get("PID")).map((function(e){return e.nlsText}));o.unshift(i.nlsText),n="("+o.join(t)+")"+n}else if("DELLmiTimeConstraintCnx"===e.mark.get(t))o=l.getConnection(e.mark.get("PID")),n=a.getLinkInfo(o).NLS;else if("DELAsmProcessCanUseCnx"===e.mark.get(t)){"TRUE"===(o=l.getConnection(e.mark.get("PID"))).get("DELAsmProcessCanUseCnx.V_IsPreferred")&&(n="(*)"+n)}return n},N=function(t,n,i,o){var a,l,s=0;return W.prototype.onupdate=function(e){var t,n,i,r,o;t=e.cl1.c.aleft,r=e.cl1.c.atop,i=e.cl2.c.aleft,o=e.cl2.c.atop,n=.5*(t+i),e.set("path",[Ne.PathCmd.M,t,r,Ne.PathCmd.L,n,r,Ne.PathCmd.L,n,o,Ne.PathCmd.L,i,o])},b.prototype.onupdate=function(t){if(t.gr.addEdge(t.cl1.c,t.cl2.c,t),e.is(t.views.main.display.text)&&e.is(t.views.main.display.text.childNodes[0].innerHTML)&&t.views.main.display.text.childNodes[0].innerHTML.length>0){let n,i=Re.Attribute;""===t.mark?n="":e.is(i.name)&&"type"===i.name?n=V(t,i.name):e.is(i.name)&&t.mark.get(i.name)&&(n=r.getNLSValue(i.dicoType+"."+i.name)+": "+t.mark.get(i.name)),t.views.main.display.text.childNodes[0].innerHTML=n,t.views.main.display.text.childNodes[0].innerHTML=R(t,.8*t.views.main.display.elt.getTotalLength())}},b.prototype.oncreateDisplay=function(t){var n=this;Ae.SVGEdgeView.prototype.oncreateDisplay.apply(this,arguments),this.display.elt.id=Math.random(),this.display.elt.textContent="official",t.mark&&(this.display.elt.setAttribute("data-link-type-nls",r.getNLSValue(t.mark.get("type"))),this.display.elt.setAttribute("data-link-from",t.mark.get("from")),this.display.elt.setAttribute("data-link-to",t.mark.get("to"))),l=Re.Attribute,e.is(l,"array")?l.forEach((function(e){T(n,t,e.name,e.dicoType,s),s++})):T(n,t,l.name,l.dicoType,s)},a=new Ne.Edge,"Instance"===i?(a.set("geometry",new W),a.mark=""):(a.set("geometry",new Ne.AutoBezierGeometry),a.mark=i),a.views.main=new b("egraph_views_SVGEdgeView"),o.addEdge(t,n,a),e.is(a.view.display.text)&&e.is(a.view.display.text.childNodes[0].innerHTML)&&a.view.display.text.childNodes[0].innerHTML.length>0&&(a.view.display.text.childNodes[0].innerHTML=R(a,.8*a.view.display.elt.getTotalLength())),a},A=function(e,t,n,i){var r;return(r=new Ne.Edge).set("geometry",new Ne.AutoBezierGeometry),r.views.main=new Ae.SVGEdgeView(0===Ve?"my-first-edge-view":"my-sec-edge-view"),r.mark=n,i.addEdge(e,t,r),r},T=function(t,n,i,o,a){var l,s,c,u="http://www.w3.org/2000/svg",d=0;if((l=document.createElementNS(u,"textPath")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+t.display.elt.id),l.setAttribute("startOffset","10%"),""===n.mark?l.appendChild(document.createTextNode("")):"type"===i?(c=V(n,i),l.tooltipInfos=new Oe({longHelp:c}),l.appendChild(document.createTextNode(c)),a++):n.mark.get(i)&&(l.tooltipInfos=new Oe({longHelp:r.getNLSValue(o+"."+i)+": "+n.mark.get(i)}),l.appendChild(document.createTextNode(r.getNLSValue(o+"."+i)+": "+n.mark.get(i))),a++),t.display.text=document.createElementNS(u,"text"),e.is(n.mark)&&""!==n.mark)for(s=p.edges.first;s;s=s.next)e.is(s.mark)&&""!==s.mark&&s.mark.get("PID")!==n.mark.get("PID")&&n.cl1.c.node.PID===s.cl1.c.node.PID&&n.cl2.c.node.PID===s.cl2.c.node.PID&&d++;t.display.text.setAttribute("dy",-14*(a-1)+12*(d+1)),t.display.text.grElt=n,t.display.text.setAttribute("data-id",t.display.elt.id),we.classListAdd(t.display.text,"edge-text"),t.display.text.appendChild(l),""!==l.innerHTML&&t.structure.root.appendChild(t.display.text)},be=function(){var t=e.createElement("div",{class:"egraph_views_HTMLNodeView_Node input-node my-node"}),n=e.createElement("div",{class:"my-node-header"}),i=e.createElement("div",{class:"my-node-container"}),r=e.createElement("div",{class:"my-node-rightConnector-container"});return t.setStyles({width:"50px",height:"50px"}),t.appendChild(n),t.appendChild(i),t.appendChild(r),t},U=function(t,n,i){var o=e.is(Se.Lines)?Se.Lines.Line:[],a="";o.forEach((function(o){var l=e.is(o.Info,"array")?o.Info:[o.Info],c=new e.Element("div",{class:"my-node-line"}),u=function(e){return/^(auto|0)$|^[+-]?[0-9]+.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc|rem)$/.test(e)};l.forEach((function(i){var o,d,g,f,p=new e.Element("span",{class:"my-node-word"});o=e.is(i.dicoType)&&s.isEntityInstance(i.dicoType)?n.get(i.property):t.get(i.property),i.fontSize&&u(i.fontSize)&&(g=i.fontSize),d=i.maxWidth&&u(i.maxWidth)?i.maxWidth:100/l.length+"%",i.displayAttributeName&&(f=e.is(i.dicoType)?i.dicoType+"."+i.property:i.property,o=r.getNLSValue(f)+" : "+o),p.setText(o),p.setStyles({fontWeight:i.fontWeight,color:i.color,maxWidth:d,fontSize:g}),a+=o,a+=" ",p.inject(c)})),a+="\n",c.inject(i)})),i.tooltipInfos=new Oe({shortHelp:a})},_=function(t,n,o,a,s,c,u,d){var g,f;return f=s,(g=new Ne.Node).views.main=new v,g.name=o,g.idObjet=s,g.referencePID=s,g.typeDobjet=a,g.imgType=u,e.is(d)&&(g.PID=d.get("PID"),g.referencePID=d.get("referencePID"),g.instancePID=d.get("instancePID"),g.childOccurencePath=d.get("childOccurencePath"),g.isAggregatedBy=d.get("isAggregatedBy"),f=g.referencePID+(g.instancePID?"_"+g.instancePID:"")),f=f.replace(new RegExp(",","g"),"_"),g.id="node_"+f,g.data={},g.multiset("left",t,"top",n,"width",250,"height",oe()?90:100),v.prototype.buildNodeElement=function(t){var n,o,a,s,u,d,g,f=null,p=null,h="",m=null;if(e.is(t))return e.is(t.referencePID)?(f=l.getReference(t.referencePID),h=r.getIconURLFromKey(f.get("type")),t.instancePID&&(p=l.getInstance(t.instancePID)),m=c.cloneNode(!0),o=e.is(t.childOccurencePath)?t.childOccurencePath:t.referencePID,m.className+=" EGraph_obj_"+f.get("PPRTYPE")+" "+o,n=Se.Image.value,oe()?(!0===n&&e.is(h,"string")&&h.length>0&&(m.childNodes[0].src=h),U(f,p,m.childNodes[1])):(a=i.getBehavior("LinkBehavior"),s=e.is(Se.Primary.Attribute)?Se.Primary.Attribute:null,u=e.is(s)?e.is(s.dicoType)?s.dicoType+"."+s.name:s.name:null,d=e.is(u)?f.get(u):null,g=e.is(Se.Secondary.Attribute,"array")?Se.Secondary.Attribute:[Se.Secondary.Attribute],new e.Element("div",{class:"wux-control-inline-container"}).inject(m.childNodes[0]),!0===n&&e.is(h,"string")&&h.length>0&&(m.childNodes[0].innerHTML+='<img src="'+h+'">'),e.is(d,"string")&&d.length>0&&(m.childNodes[0].innerHTML+=d),g.forEach((function(t,n){var i,o,a,l;e.is(t)&&e.is(t.name)&&(i=e.is(t.dicoType)?t.dicoType+"."+t.name:t.name,o=r.getNLSValue(i),a=f.get(i),"type"===i&&(a=r.getNLSValue(a)),l="<div><b>"+o+"</b>: "+a+"</div>",m.childNodes[1].innerHTML+=l)})),(e.is(t.instancePID)?a.areRelationsLoaded(t.instancePID):a.areRelationsLoaded(t.referencePID))||r.getIconElem("LinksNotFetched").inject(m.childNodes[2]))):m=c.cloneNode(!0),m},g},function(t){var n;return e.is(t)&&e.is(t.views.main.display.elt)&&(n=t.views.main.display.elt),n},K=function(e,t){var n=!1;return t.forEach((function(t){(e===t.path.join()||0===t.path.length&&e===t.id)&&(n=!0)})),n},X=function(t,n){var o,a,s=[],c=n,u=t.clientPos[0],d=t.clientPos[1],g=l.getConnection(c).getAttribute("type"),f=i.getBehavior("EditAttributeBehavior");o={icon:"url("+r.getIconURLFromKey("GeneralDelete")+")",label:r.getNLSValue("LinksUI.DeleteLink"),sensitivity:"LinearProductFlowCnx"!==g?"enabled":"disabled",callback:function(){var t=l.getConnection(c);e.is(t)&&l.deleteConnection(c,{onFailure:function(){i.warn(r.getNLSValue("LinksUI.DeleteFailure"))},onComplete:function(){i.info(r.getNLSValue("LinksUI.DeleteSuccess"))},logMessage:r.getNLSValue("LinksUI.LogMessage")})}},["CapableResourcesStructureLink"].indexOf(g)>=0&&(o.sensitivity="disabled"),a={icon:"url("+r.getIconURLFromKey("EditAttribute")+")",label:r.getNLSValue("LinksUI.EditAttribute"),sensitivity:f.hasEditConfiguration(c)?"enabled":"disabled",callback:function(){f.editConfiguredAttributes(c)}},s.push(o),s.push(a),Fe.show({nodes:s},[u,d])},y=function(t){var n,o,a,s=!0;Be.getElement("#canvas"+Ve.toString()).addEventListener("mouseover",(function(e){e}),!1),t.addChangeListener((function(t){var c,u,d,g=[];if("edges"===t[0].path[0]&&(c=t[0].child.cl2.c,u=t[0].child.cl1.c,null!==c&&null!==u&&e.is(c.node.referencePID)&&e.is(u.node.referencePID))){if(!e.is(t[0].child.geometry)){if(c.node.PID===u.node.PID)return void i.warn(r.getNLSValue("CreateLink.SameItem"));d={allowMove:!0,instancePID:null,instancePIDsArray:[],referencePID:c.node.referencePID,rootReferencePID:null,targetInstancePID:null,targetInstancePIDsArray:[],targetReferencePID:u.node.referencePID,targetRootReferencePID:null},c.node.instancePID?(d.rootReferencePID=l.getInstance(c.node.childOccurencePath.split(",")[0]),d.rootReferencePID=e.is(d.rootReferencePID)?d.rootReferencePID.get("isAggregatedBy"):null,d.instancePIDsArray=c.node.childOccurencePath.split(","),d.instancePID=c.node.instancePID):d.rootReferencePID=c.node.referencePID,u.node.instancePID?(d.targetRootReferencePID=l.getInstance(u.node.childOccurencePath.split(",")[0]),d.targetRootReferencePID=e.is(d.targetRootReferencePID)?d.targetRootReferencePID.get("isAggregatedBy"):null,d.targetInstancePIDsArray=u.node.childOccurencePath.split(","),d.targetInstancePID=u.node.instancePID):d.targetRootReferencePID=u.node.referencePID,g.push(d),i.notify("CreateLinkOrInstance",[g])}setTimeout((function(){for(n=[],n=Be.getElements("path"),a=0;a<n.length;a++)"official"!==n[a].innerHTML&&(o=window.getComputedStyle(n[a]),"none"===o.getPropertyValue("marker-end")&&"arrow-edge-end-marker"!==n[a].parentElement.id&&n[a].parentElement.removeChild(n[a]))}),500)}s||(s=t.some((function(e){return"selection"===e.path[0]})))})),t.addListener("update",(function(){var n,r,o,a,c,u,d,g,f,p,h=i.getBehavior("SelectionBehavior"),m=[],I=new e.Class.Collection([],{});if(s){for(s=!1,u=(c=h.getSelections())[0].concat(c[1]).concat(c[2]).concat(c[3]),d=h.getSelectionsWithPaths()[0],u.forEach((function(t){e.is(t)&&(g=l.getReferenceModel(t),e.is(g)&&I.add({ref:g}))})),n=t.selection.first;n;n=n.nextSel)n.type===Ne.Type.NODE&&(r=l.getReference(n.referencePID),n.instancePID,a=K(n.PID,d),o=n.childOccurencePath,a?I.forEach((function(e){e.get("ref").id===n.referencePID&&I.remove(e)})):p=r.get("PID"));I.forEach((function(e){m.push(e.get("ref").id)})),f={selectedNodeIds:m},e.is(p)&&(f.changed={nodeId:p,childOccurencePath:e.is(o)?o.split(","):null,isSelected:!0}),Le||i.notify("EGraphNodeSelect",f),Le=!1}}))},D=function(){var e,t,n;return(e=new Ne.EGraph).setViewOpts({addTopologicalIds:!0}),n=Be.childNodes[0],e.addView("main",new Ae.HTMLGraphView(n)),(t=new Te.StateMachine(e,null,null,e.views.main)).rootState&&(t.rootState.doubleClickOnNode=ce,t.rootState.oncontextmenu=function(e,t){ue(e,t)}),e.setZoomOpts({customMgt:!0}),t.state.onwheel=function(e,t){var i,r;t.inside&&(i=e.graphView).zoominc&&(r=n.getBoundingClientRect(),i.zoominc(.5*t.wheelDelta,t.clientPos[0]-r.x,t.clientPos[1]-r.y))},e.updateLock(),e},v=function(){Ae.HTMLNodeView.call(this)},b=function(){Ae.SVGEdgeView.call(this)},z=function(e){var t=[],n=[],i=[],r=[];return e.forEach((function(e){switch(e.get("Type")){case 0:r.push(e);break;case 1:t.push(e);break;case 2:n.push(e);break;case 3:i.push(e)}})),[r,t,n,i]},L=function(t){for(var n,i,r,o,a,l,s,c,u,d,g=new e.Class.Collection([],{}),f=t.where({index:0}),p=0;f.length>0;){if(i=p,r=(n=f[0]).get("index"),f.shift(),void 0===g.findWhere({ref:n})){for(;void 0!==g.findWhere({y:i,x:r});)i++;g.add({y:i,x:r,ref:n}),p=i}for(c=n.get("links"),d=0;d<c.length;d++){for(u=c[d],i=p,r=(u=t.findWhere({PID:u[0]})).get("index");void 0!==g.findWhere({y:i,x:r});)i++;if(o=g.findWhere({ref:u}),a=g.findWhere({ref:n}),void 0===o){if(o=g.add({y:i,x:r,ref:u}),p=i,l=!1,i=a.get("y")-1,o.get("x")-a.get("x")>1){for(;!1===l;)for(l=!0,i++,s=a.get("x")+1;s<o.get("x");s++)void 0!==g.findWhere({x:s,y:i})&&(l=!1);for(s=a.get("x")+1;s<o.get("x");s++)g.add({y:i,x:s,ref:null});o.set({y:i}),a.set({y:i}),p=i}f.unshift(u)}else a.set({y:i}),p=i+1}}return g},M=function(e,t,n){var i;return 40,(i=new Ne.Connector).views.main=!0===n?new Ae.SVGConnView("egraph_views_SVGConnView egraph_views_mySVGConnView"):0===Ve?new Ae.SVGConnView("egraph_views_SVGConnView egraph_views_mySVGConnView_invisible"):new Ae.SVGConnView,i.multiset(["cstr","attach"],e,["cstr","offset"],40),i},E=function(e){0===Ve?(e.data.out=M(Ne.BorderCstr.RIGHT,0,!0),e.data.out.id="in_"+e.id,e.appendConnector(e.data.out),e.data.in1=M(Ne.BorderCstr.LEFT,0,!0),e.data.in1.id="out_"+e.id,e.appendConnector(e.data.in1),e.data.outInstance=M(Ne.BorderCstr.BOTTOM,0,!1),e.data.outInstance.id="instance_"+e.id,e.appendConnector(e.data.outInstance)):(e.data.in1=M(Ne.BorderCstr.LEFT,0,!0),e.appendConnector(e.data.in1),e.data.in2=M(Ne.BorderCstr.LEFT,0,!0),e.appendConnector(e.data.in2),e.data.out=M(Ne.BorderCstr.RIGHT,0,!0),e.appendConnector(e.data.out))},w=function(t,n){var r,o,a,s,c,u,d,g,f,p,h,m=0,I=0,P=0,C=i.getBehavior("SelectionBehavior"),y=e.Class.Model.extend({idAttribute:"PID"});p=new e.Class.Collection([],{model:y}),f=C.getSelectionsWithPaths(),g=f[0].concat(f[3]),t.forEach((function(e,t){e.forEach((function(e,n){m=e.get("X"),d=500*t+40+150*(m+I),r=125*n+40,o=e.get("PLMEntity.V_Name"),u=e.get("PPRTYPE"),c=e.get("PID"),a=be(),s=e.get("TYPE"),p.add({PID:c,referencePID:e.get("referencePID"),Node:_(d,r,o,u,c,a,s,e)}),E(p.last().get("Node")),m>P&&(P=m)})),I+=P}));try{p._models.forEach((function(e){var t;n.addNode(e.get("Node")),g.forEach((function(i){h=l.getReferenceModel(i),t=0===i.path.length?h.get("PID"):i.path.join(","),e.get("Node").PID===t&&n.addToSelection(e.get("Node"))}))}))}finally{n.updateUnlock()}return p},k=function(t,n){var i,r,o,a=0,l=0,s=new e.Class.Collection([],{});t.forEach((function(t){r=t.get("ref"),e.is(r)&&(i=ae(r,t.get("x"),t.get("y")),o=r.get("PID"),s.add({PID:o,Node:i}),E(s.last().get("Node")),a<150*t.get("y")&&(a=150*t.get("y")),l<450*t.get("x")&&(l=450*t.get("x")))}));try{s._models.forEach((function(e){n.addNode(e.get("Node"))}))}finally{n.updateUnlock()}return s},F=function(t,n,i){var r,o,a,s,c,u=null,d=null,g=function(t){return e.is(t,"array")&&0!==t.length},f=function(t){return I.filter((function(n){var i,r,o=n.get("Node");return e.is(o.childOccurencePath)&&(i=o.childOccurencePath.indexOf(t),r=o.childOccurencePath.slice(i)),e.is(r)&&r===t||o.referencePID===t}))},h=null,m=null,P=null,C=null,y=null,D=null,v=null;if(e.is(i)&&(v=i),c=v.get("PID"),e.is(Me[c])||(Me[c]={fromNodes:[],totalEdges:0}),e.is(t,"string")&&(u=(u=f(t)).filter((function(e){var t=e.get("Node").PID;return-1===Me[c].fromNodes.indexOf(t)&&(Me[c].fromNodes.push(t),!0)}))),e.is(n,"string")&&(d=f(n)),g(u)&&g(d))for(a=0;a<u.length;a++)for(h=u[a],e.is(h)&&(r=h.get("Node"),e.is(r)&&(P=l.getReference(r.referencePID),e.is(P)&&(y=P._attributes.PPRTYPE))),s=0;s<d.length;s++)m=d[s],e.is(m)&&(o=m.get("Node"),e.is(o)&&(C=l.getReference(o.referencePID),e.is(C)&&(D=C._attributes.PPRTYPE))),e.is(o)&&e.is(r)&&(y===D?(N(r.data.out,o.data.out,v,p),A(r.data.out,o.data.out,v,p)):r.actualLeft<o.actualLeft?(N(r.data.out,o.data.in1,v,p),A(r.data.out,o.data.in1,v,p)):(N(o.data.out,r.data.in1,v,p),A(r.data.in1,o.data.out,v,p)),Me[c].totalEdges+=2)},O=function(t,n,o){var a,s,c;t.forEach((function(t){null!==t.get("isAggregatedBy")&&n.where({PID:t.get("PID")}).forEach((function(l){e.is(l)?(a=l.get("Node"),n.where({referencePID:a.isAggregatedBy}).forEach((function(t){s=t.get("Node"),e.is(a.childOccurencePath)&&(c=a.childOccurencePath.split(","),e.is(s.instancePID)?c.length>1&&c[c.length-2]===s.instancePID&&s.childOccurencePath.split(",")[0]===c[0]&&N(a.data.in1,s.data.outInstance,"Instance",o):s.referencePID===a.isAggregatedBy&&1===c.length&&N(a.data.in1,s.data.outInstance,"Instance",o))}))):i.warn(r.getNLSValue("GraphView.NodeWithPID")+t.get("PID")+r.getNLSValue("GraphView.NotExist"))})),t.get("LINKS").forEach((function(e){var t=e.get("from"),n=e.get("to"),i=e.get("type"),r=e.get("PID"),o=!0;"DELLmiTimeConstraintCnx"!==i&&"DELLmiMaterialPathCnxCust"!==i&&"LinearProductFlowCnx"!==i||(o=function(e,t,n){var i,r,o,a,s,c,u;if(c=(s=l.getConnection(n)).get("from"),u=s.get("to"),Array.isArray(c)&&(c=c.join()),Array.isArray(u)&&(u=u.join()),i=e.replace(c,""),r=t.replace(u,""),i.length>0&&r.length>0){if(i=i.split(","),r=r.split(","),o=i.length-1,i.length!==r.length)return!1;for(a=0;a<o;a++)if(i[a]!==r[a])return!1}return!0}(t,n,r)),o&&F(t,n,e)}))}))},x=function(e,t,n){var i,r,o,a;e.forEach((function(l){i=l.get("PID"),l.get("links").forEach((function(s){o=(o=t.findWhere({PID:i})).get("Node"),a=(a=t.findWhere({PID:s[0]})).get("Node"),r=e.findWhere({PID:s[0]}),l.get("loopNode")&&l.get("index")>r.get("index")?A(o.data.in1,a.data.in1,s[1],n):r.get("loopNode")?A(o.data.out,a.data.out,s[1],n):A(o.data.out,a.data.in1,s[1],n)}))}))},G=function(){var e;$(),oe()?ve().then((function(){e=Q(),ee(e)})):Z()},H=function(){new t(i).loadLinkGraphUI()},B=function(){var t,n=i.getElement(),o=r.getIconURLFromKey("Refresh"),a=r.getIconURLFromKey("Graph.LinksFilter"),l=e.createElement("div",{class:"canvas-gv",id:"canvas"+Ve.toString()}),s=e.createElement("img",{src:o,class:"GraphViewBar refresh-btn"}),c=e.createElement("img",{src:a,class:"GraphViewBar filter-btn"}),u=e.createElement("div",{class:"egraph-toobar"}),d=e.createElement("div",{class:"egraph-navigator"}),g=Be.getElement("#canvas"+Ve.toString()),f=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","svg")),p=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","defs")),h=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","marker")),m=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","path"));return e.is(Be)||(Be=n),null!==g&&g.remove(0),f.appendChild(p),p.appendChild(h),h.appendChild(m),f.setAttribute("width","0"),f.setAttribute("height","0"),f.setAttribute("style","position:absolute;"),h.setAttribute("id","arrow-edge-end-marker"),h.setAttribute("markerWidth","10"),h.setAttribute("markerHeight","8"),h.setAttribute("refX","8"),h.setAttribute("refY","4"),h.setAttribute("orient","auto"),m.setAttribute("d","M 0 0 L 10 4 L 0 8"),m.setAttribute("fill","#777"),m.setAttribute("stroke","none"),m.setAttribute("z-index","10"),s.tooltipInfos=new Oe({shortHelp:r.getNLSValue("GraphView.Refresh.Tooltip")}),s.addEvent("click",(function(){G()})),c.addEvent("click",H),l.addEvent("contextmenu",(function(t){e.Event.stop(t)})),l.setStyles({width:"100%",height:"100%","background-color":"white",position:"relatve"}),l.appendChild(f),oe()&&((t=de(C.id,C.path))&&(t.inject(d),d.inject(u)),u.inject(l)),e.is(P.showReloadAction)&&!0===P.showReloadAction&&(oe()?s.inject(u):s.inject(l)),e.is(P.showGraphViewFilter)&&!0===P.showGraphViewFilter&&c.inject(l),e.is(Be)&&l.inject(Be),Be},j=function(e){var t,n,i;for(i=new we.BoundingRect,t=e.nodes.first;t;t=Ne.dftNext(e,t))i.update(t,t.actualLeft-300,t.actualLeft+t.actualWidth,t.actualTop,t.actualTop+t.actualHeight);i.xmax=i.xmax>800?800:i.xmax,i.ymax=i.ymax>2e3?2e3:i.ymax,n=we.reframeViewpoint(e.views.main.getSize(),i,{padding:15,minSize:50,horizontal:-1,vertical:-1,aliasing:0,defaultVpt:e.views.main.vpt,maxScale:1}),e.views.main.setViewpoint(n,!0)},J=function(){return B(),we.inherit(v,Ae.HTMLNodeView),0===Ve&&we.inherit(b,Ae.SVGEdgeView),p=D()},q=function(){var t,n=[];return e.is(h)&&h.length>0?h:((t=g.getRoots(i.getId())).length>0&&(n=t[0].concat(t[1]).concat(t[2])),h=d.getEGraphDataToDisplay(n))},Q=function(){var t;return e.is(C)&&e.is(C.id)&&(t=l.getReferenceModel(C.id),e.is(t)&&(h=d.getProductFlowDataToDisplay(t.id,C.path))),h},Y=function(e){return L(e)},Z=function(){var t,n;t=q(),Me={},e.is(t)&&t.length>0&&(m=z(t),n=J(),I=w(m,n),O(t,I,n),j(n),y(n))},$=function(){e.is(Be)&&e.is(Be.childNodes[0])&&(Be.childNodes[0].destroy(),p=void 0,h=void 0)},ee=function(t){var n,o;p=J(),e.is(t)&&t.length>0&&((n=d.isProductFlowDataLooped(t))>0&&(o=1===n?"ProductFlowView.Loop":"ProductFlowView.MultipleLoop",i.warn(r.getNLSValue(o),undefined,"error")),Ee=Y(t),I=k(Ee,p),x(t,I,p),j(p),y(p))},ae=function(e,t,n){var i,r,o,a,l,s,c,u;return null!==e&&(c=450*t,u=150*n,r=e.get("PLMEntity.V_Name"),o=e.get("PPRTYPE"),a=e.get("PID"),l=e.get("TYPE"),s=Be.childNodes[0].childNodes[0].childNodes[0],(i=_(c,u,r,o,a,s,l)).childOccurencePath=e.get("childOccurencePath"),i.instancePID=e.get("instancePID"),i.PID=a),i},le=function(e){var t,n,i,r=-1;t=d.getProductFlowGraphInstance(e,C.path),n=h.push(t),Ee.forEach((function(e){e.get("y")>r&&(r=e.get("y"))})),r+=1,Ee.add({y:r,x:0,ref:n}),i=ae(n,0,r),E(i);try{p.addNode(i)}finally{p.updateUnlock()}},se=function(e){var t,n=C.path.concat([e.get("PID")]).toString();for(t=p.nodes.first;t&&t.childOccurencePath!==n;t=t.next);t&&p.removeNode(t)},De=function(t,n){oe()&&(C.id=t,C.path=e.is(n,"string")&&n.length>0?n.split(","):n,$(),ve().then((function(){h=Q(),ee(h)})))},ce=function(e){De(e.instancePID,e.childOccurencePath)},ue=function(t,n){var o,a,c,u,d,g,h,m,I,P,C=n.grElt,y=[],D=n.clientPos[0],v=n.clientPos[1],b=i.getAppContext(),S={},R=i.getBehavior("LinkBehavior"),V=function(){var t,n,i=!1;return e.is(p.selection.first)&&(t=p.selection.first.PID),e.is(p.selection.last)&&(n=p.selection.last.PID),e.is(t)&&e.is(n)&&(i=t===n),i};e.is(C)&&(C.type===Ne.Type.NODE?(e.is(C.gr.selection.first)&&C.gr.selection.first.PID!==C.PID?(p.removeFromSelection(C.gr.selection.first),p.addToSelection(C)):null===C.gr.selection.first&&p.addToSelection(C),(e.is(C.instancePID)?R.areRelationsLoaded(C.instancePID):R.areRelationsLoaded(C.referencePID))||(a="LoadRelations",c={icon:"url("+r.getIconURLFromKey(a)+")",label:r.getNLSValue("Cmd."+a+".Title"),sensitivity:"enabled",callback:function(){o=xe.getCommand(a,b),e.is(o)&&(o.beginExecute(),o.execute({sourceModuleId:i.getId()}),o.endExecute())}},y.push(c)),u="Relations",d=!C.childOccurencePath,g={icon:"url("+r.getIconURLFromKey(u)+")",label:r.getNLSValue("Cmd."+u+".Title"),sensitivity:V()?"enabled":"disabled",callback:function(){o=xe.getCommandCheckHeader(u,b),e.is(o)&&!1===o.getState()&&(o.options.node=d?{referencePID:C.referencePID,instancePID:C.instancePID}:{referencePID:C.referencePID,instancePID:C.instancePID,absPath:C.childOccurencePath.split(",")},o.toggleState())}},y.push(g),h="DisplayProperties",m={icon:"url("+r.getIconURLFromKey(h)+")",label:r.getNLSValue("Cmd."+h+".Title"),sensitivity:V()?"enabled":"disabled",callback:function(){o=xe.getCommandCheckHeader(h,b),e.is(o)&&!1===o.getState()&&(o.options.node={referencePID:C.referencePID,instancePID:C.instancePID,absPath:C.childOccurencePath},o.toggleState())}},y.push(m),s.isAKindOf(l.getReference(C.referencePID),"DELLmiHeaderOperationReference")&&e.is(C.childOccurencePath)&&(I=C.childOccurencePath.split(","),S=f.canCreatePartialScopeLink(I),e.is(S.errorMessage)||(P={icon:"url("+r.getIconURLFromKey("PartialProcessImplementLink")+")",label:r.getNLSValue("Cmd.CreatePartialScopeOnHeaderOperation.Title"),callback:function(){i.notify("CreatePartialScopeLinkOnHeaderOperation",[I])},sensitivity:"enabled"},y.push(P))),Fe.show({nodes:y},[D,v])):C.type===Ne.Type.EDGE&&e.is(C.mark.get("PID"))&&(X(n,C.mark.get("PID"),C.mark.get("from")),C.gr.selection.first=null,C.gr.selection.last=null))},de=function(t,n){var i,o,a,s,c,u=[],d=function(e,t,n){a&&u.unshift({label:a.get("PLMEntity.V_Name"),icon:r.getIconURLFromKey(a.get("type")),id:t,childOccurencePath:n})};if(e.is(n,"string")&&(n=n.split(",")),0===n.length)d(0,(a=l.getReference(t)).get("PID"),[]);else for(c=n.length-1;c>=0;c--)s=n[c],a=l.getReferenceModel(s),d(0,s,n.slice(0,c+1)),0===c&&(o=l.getInstance(s),d(0,(a=l.getAggregatingReferenceModelFromInstance(o)).get("PID"),[]));return u.length>0&&(i=new ke({value:u,mode:ke.MODE.NAVIGATION})).addEventListener("selectionChange",(function(){var e=i.selectedValues[0];De(e.id,e.childOccurencePath)})),i},te=function(e,t,n){var i,r=[];for(n=n||!1,i=p.nodes.first;i&&(i[e]!==t||(r.push(i),n));i=i.next);return r},ne=function(t,n){var i,r,o=[];for(r=p.nodes.first;r;r=r.next)r.isAggregatedBy===t&&(e.is(n)?((i=r.childOccurencePath.split(",")).pop(),(i=i.join())===n&&o.push(r)):o.push(r));return o},Pe=function(t){var n,i,r,o,a,s,c,u,g,f,P,C,y,D,v,b,S,R,V,L,M,A=0,T=function(e){var t;return 1===e.length&&(t=e[0]).multiset("top",t.top+125),t},w=function e(t){var n=0,i=l.getInstancesFromCollection(t);return 0===i.length?0:(i.forEach((function(t){n++,n+=e(t.get("isInstanceOf"))})),n)},k=function(){var n,i=t.get("PLMEntity.V_Name"),r=e.is(C)?C:D,l=be();try{p.updateLock(),n=h.add({PID:r,X:c,Type:S,isAggregatedBy:t.get("isAggregatedBy"),childOccurencePath:C,instancePID:v,referencePID:D}),f=_(a,s,i,b,r,l,S,n),E(f),m[S].splice(o,0,n),I.add({PID:r,referencePID:D,Node:f}),p.addNode(f)}finally{p.updateUnlock()}},F=function(){k(),N(f.data.in1,y.data.outInstance,"Instance",p)};if(b=t.get("PPRTYPE"),!e.is(b)&&t.isInstance()&&(R=l.getReference(t.get("isInstanceOf")),b=R.get("PPRTYPE")),S="PRODUCT"===b&&t.isInstance()?function(){var e,n,i,r=0;for(e=0;e<m.length;e++)for(n=0;n<m[e].length;n++)if(i=m[e][n],t.get("isAggregatedBy")===i.get("referencePID"))return i.get("Type");return r}():d.getType(b),u=m[S].length,l.isReference(t))c=0,o=u,S>=1&&(A=function(e){var t,n,i=0;for(t=0;t<m[e].length;t++)(n=m[e][t]).get("X")>i&&(i=n.get("X"));return i}(S-1)),a=500*S+40+150*A,s=125*u+40,D=t.get("PID"),k();else{for(v=t.get("PID"),D=t.get("isInstanceOf"),n=0;n<m[S].length;n++)if(P=m[S][n],r=t.get("isAggregatedBy")===P.get("isAggregatedBy"),t.get("isAggregatedBy")===P.get("referencePID")||r){if(c=P.get("X"),0===(f=te("PID",P.get("PID"))).length)continue;if(f=f[0],V=ne(P.get("referencePID"),P.get("childOccurencePath")).find((function(e){return e.instancePID===t.get("PID")})),e.is(V)){if(L=n,n+=w(P.get("referencePID")),e.is(o))for(i=L;i<=n;i++)M=m[S][i],T(te("PID",M.get("PID")));continue}if(r)n+=w(P.get("referencePID")),a=f?f.left:0;else{if(e.is(y))for(F(),n+=1,P=m[S][n],g=te("PID",P.get("PID")),f=T(g),i=n+1;i<m[S].length;i++)M=m[S][i],T(te("PID",M.get("PID")));c=P.get("X")+1,C=P.get("childOccurencePath"),C=e.is(C)?C+","+t.get("PID"):t.get("PID"),y=f,a=(f?f.left:0)+150}s=125*(o=n+1)+40}else!r&&e.is(o)&&(g=te("PID",P.get("PID")),f=T(g));F()}},Ce=function(t,n){var i,r,o=function(t,n){var i,r,o;return(o=(e.is(t,"array")?t.toString():t)===(r=e.is(n,"array")?n.toString():n))||(i=e.is(t,"array")?t:t.split(",")).length>0&&(o=i[i.length-1]===r||i.slice(1).join()===r),o};for(r=p.edges.first;r&&(i=r.next,!(e.is(r.mark,"object")&&o(r.mark.get("from"),t.get("from"))&&o(r.mark.get("to"),t.get("to"))&&(n--,r.remove(),0===n)));r=i);},ye=function(t,n){var i,r,o,a=l.getAllChildrenFromCollection(t);if(n=e.is(n)?n:"",e.is(a.instancesPID)&&(!a||0!==a.instancesPID.length))for(r=0;r<a.instancesPID.length;r++)o=n.length>0?n+","+a.instancesPID[r]:a.instancesPID[r],1===(i=te("childOccurencePath",o)).length&&(i=i[0],ye(i.referencePID,o),pe(i))},fe=function(t){var n;t.get("isInstanceOf");n=t.isReference(),te(n?"referencePID":"instancePID",t.get("PID"),!0).forEach((function(t){e.is(t)&&(ye(t.referencePID,t.childOccurencePath),pe(t))}))},pe=function(t){var n;t.remove(),n=e.is(t.childOccurencePath)?t.childOccurencePath:t.referencePID,I.remove(n),he(n)},he=function(e){var t,n,i,r,o,a=!1;for(t=0;t<m.length;t++)for(n=0;n<m[t].length;n++)if(m[t][n].get("PID")===e&&(m[t].splice(n,1),a=!0),a){for(i=n;i<m[t].length;i++)o=m[t][i],1===(r=te("PID",o.get("PID"))).length&&(r=r[0]).multiset("top",r.top-125);return}},me=function(){var e,t;for(e=p.selection.first;e;e=t)ye(e.referencePID),t=e.nextSel,Le=!0,e.remove()},Ie=function(e){var t,n,i=e.changed;for(n=i.absPath.length>0?i.absPath.join(","):i.nodeId,t=p.nodes.first;t;t=t.next)if(t.PID===n||t.instancePID===n||t.childOccurencePath===n){Le=!0,i.isSelected?p.addToSelection(t):p.removeFromSelection(t);break}},ge=function(t){var n,i,r;if(e.is(p)){for(n=p.nodes.first;n&&(n.childOccurencePath.endsWith(t.get("from").toString())?i=n:n.childOccurencePath.endsWith(t.get("to").toString())&&(r=n),!i||!r);n=n.next);i&&r&&A(i.data.out,r.data.in1,t,p)}},ve=function(){var t,n=i.getBehavior("LinkBehavior"),r=i.getBehavior("ModelBehavior"),o=[];return r.isNavigateOnDemand()?(o.push({id:C.id,path:C.path}),t=l.getReferenceModel(C.id),l.getInstancesFromCollection(t.get("PID")).forEach((function(e){o.push({id:e.get("PID")})})),n.getRelations(o)):e.Promise.resolve()},{viewName:"EgraphView",listenTo:function(){return{}},onStart:function(t,n){var i;t=t||{},e.is(t.displayNodeConfigXML)&&e.is(t.displayLinkConfigXML)&&(i=c.getXMLValues(t.displayNodeConfigXML),e.is(i.Config.Preferences)&&(Se=i.Config.Preferences),i=c.getXMLValues(t.displayLinkConfigXML),e.is(i.Config.Preferences)&&(Re=i.Config.Preferences)),e.is(t.graphType)&&(Ve=t.graphType),P=t,n()},onStop:function(){$()},updateLink:function(t){var n,r,o,a,s=i.getBehavior("LinkBehavior"),c=function(t){return t=e.is(t,"array")?t[t.length-1]:t,l.getInstance(t)};"SecondaryCandidateResourceLink"===t.get("type")&&(t=s.cloneSecondaryCapableRscLinkWithFromAttr(t)),oe()?(a=c(t.get("to")),o=c(t.get("from")),re(a)&&re(o)&&ge(t)):(n=t.get("from").toString(),r=t.get("to").toString(),F(n,r,t))},onChangeReference:function(e){var t,n,i,r;(e=Array.isArray(e)?e:[e]).forEach((function(e){t=e,oe()&&(s.isEntityInstance(e.get("type"))&&(n=e,t=l.getReferenceModelFromInstance(n)),I.where({PID:t.get("PID")}).forEach((function(e){e.get("PID")===t.id&&(i=e.get("Node"),n=l.getInstance(i.instancePID),(r=i.view.elts.node.getElementsByClassName("my-node-container")[0]).innerHTML="",U(t,n,r))})))}))},removeEGraphNode:function(e){0===Ve?fe(e):oe()&&re(e)&&se(e)},removeLink:function t(n){var r,o,a,s=n.get("PID"),c=i.getBehavior("LinkBehavior"),u=function(t){return t=e.is(t,"array")?t[t.length-1]:t,l.getInstance(t)};"DELAsmProcessCanUseCnx"===n.get("type")&&l.getImpacted(s,!1,{relationTypes:["SecondaryCandidateResourceLink"]}).forEach((function(e){(e=e.clone()).set("from",n.get("from")),t(e)})),"SecondaryCandidateResourceLink"===n.get("type")&&(n=c.cloneSecondaryCapableRscLinkWithFromAttr(n)),0===Ve?(a=n.get("PID"),Ce(n,Me[a].totalEdges),Me[a]=void 0):oe()&&(o=u(n.get("to")),r=u(n.get("from")),re(o)&&re(r)&&Ce(n,2))},reparentInstances:function(e){var t,n=e.newInstPIDArray,i=e.movedInstPIDArray,r=this;Array.isArray(i)&&i.forEach((function(e){te("instancePID",e,!0).forEach((function(t){e===t.instancePID&&(ye(t.referencePID,t.childOccurencePath),pe(t))}))})),Array.isArray(n)&&n.forEach((function(e){0===te("instancePID",e,!0).length&&(t=l.getInstance(e),r.addNodeNChildrenRecursive(t))}))},addEGraphNode:function(e){0===Ve?Pe(e):oe()&&re(e)&&le(e)},addNodeNChildrenRecursive:function(t){var n,i=this,r=[];this.addEGraphNode(t),n=t.isReference()?t.get("PID"):t.get("isInstanceOf"),r=r.concat(l.getImpacted(n)),function t(n){var o,a;(o=l.getInstancesFromCollection(n)).sort((function(t,n){var i=t.get("V_TreeOrder"),r=n.get("V_TreeOrder");return(e.is(i)?i:0)-(e.is(r)?r:0)})),o.forEach((function(e){i.addEGraphNode(e),a=e.get("isInstanceOf"),r=(r=r.concat(l.getImpacted(e.id))).concat(l.getImpacted(a)),t(a)}))}(n),r.forEach((function(e){i.updateLink(e)}))},createGenericEGraphView:function(){var e={};i.notify("startProgress",e),Z(),i.notify("stopProgress",e)},removeGenericEGraphView:function(){$()},createProductFlowEGraphView:function(){var e,t={};i.notify("startProgress",t),C=ie(),ve().then((function(){e=Q(),ee(e),i.notify("stopProgress",t)}))},setLinkDisplayStatus:function(e,t){d.setLinkDisplayStatus(e,t)},getSupportedTypesOfLink:function(){return d.getCreatableTypesOfLink()},setGraphContainer:function(e){Be=e},reload:function(){G()},hideSelectionNodes:function(){me()},setTLVSelection:function(e){Ie(e)},getCurrentEGraphView:function(){return p},getEGraphNodeByPropValue:function(e,t,n){return te(e,t,n)}}}}}));