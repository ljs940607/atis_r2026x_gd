define("DS/ControlsEx/PathExplorer",["UWA/Core","DS/Controls/Abstract","DS/Utilities/Dom","DS/Controls/Breadcrumb","DS/Controls/Popup","DS/Menu/Menu","DS/DataGridView/DataGridView"],(function(e,t,i,n,s,o,a){"use strict";var l=function(){var e=[],t=this.value;if(t){var i=t.getParents().reverse();i.push(t),e=i.map((function(e){var t=e.getIcons();return{label:e.getLabel(),icon:t&&t.length>0?t[0]:void 0,value:e}}))}return e},r=function(){return this._breadcrumb.selectedValues.length>0?this._breadcrumb.selectedValues[0].value:null},d=function(){if(this.model){if(this.model.prepareUpdate(),this.model.collapseAll(),this.value)this.value.getParents().reverse().forEach((function(e){e.expand()}));this.model.pushUpdate()}},h=function(){if(this._dataGridViewContainer)return this._dataGridView.treeDocument=this.model,void(this._dataGridViewContainer.style.height=this._dataGridView.model.length*this._dataGridView.layout.getRowHeightFromCellHeight()+1+"px");var t={treeDocument:this.model,columns:[{text:"",dataIndex:"tree",typeRepresentation:"string",autoSizePadding:5,minWidth:200}],rowSelection:"single",cellSelection:"none",selectionBehavior:{toggle:!1,unselectAllOnEmptyArea:!1,selectNodeModelOnCellSelection:!0},showAlternateBackgroundFlag:!1,treeNodeCellOptions:{buildLinks:!1,expanderStyle:"triangle",depthIncrement:10}};this._dataGridView=new a(t),this._dataGridViewContainer=new e.Element("div",{class:"wux-controls-pathexplorer-dgvcontainer",styles:{height:this._dataGridView.model.length*this._dataGridView.layout.getRowHeightFromCellHeight()+1}}),this._dataGridView.inject(this._dataGridViewContainer),this._dataGridView.layout.rowsHeader=!1,this._dataGridView.layout.columnsHeader=!1},p=function(){if(!this.elements._popup){var e={target:this._burgerDiv,positionTarget:this.getContent(),position:"bottom",offset:{x:0,y:0},alignment:"near",constraint:"screen",className:"wux-controls-popup wux-controls-pathexplorer-popup",overlap:!1,trigger:"click"};this.elements._popup=new s(e),this.elements._popup.setBody(this._dataGridViewContainer);var t=this;i.addEventOnElement(this,this.elements._popup,"show",(function(e){t._dataGridView.onReady((function(){var e=t._dataGridView.sizeColumnToFit(0,{computeAllRows:!0});t._dataGridViewContainer.style.width=e+"px"}))})),i.addEventOnElement(this,this.elements._popup,"hide",(function(e){})),this.elements._popup.visibleFlag=!0}},u=function(){d.call(this),h.call(this),p.call(this)},c=function(e){var t=this.value.getParents();t.unshift(this.value);var i=t[t.length-1-e].getChildren();if(!i)return;var n=this,s=i.map((function(e){var t=e.getIcons();return{title:e.getLabel(),icon:t&&t.length>0?t[0]:void 0,type:"PushItem",action:{callback:function(t){n.value=e}}}}));let a=this._breadcrumb._listItems[e];let l,r;a.elements.container.hasAttribute("hidden")?(l=this._breadcrumb.elements._lastHiddenItemExpandableSeparator.getBoundingClientRect(),r=this._breadcrumb.elements._lastHiddenItemExpandableSeparator):(l=a.elements.separator.getBoundingClientRect(),r=a.elements.container),o.show(s,{position:{x:l.x-10,y:l.y+l.height+5}},{onShow:function(){r.setAttributeNode(document.createAttribute("is-displaying-children"))},onHide:function(){r.removeAttribute("is-displaying-children")}})},m=function(e){e&&(this._XSOEventListeners.forEach((function(t){e.getXSO().unsubscribe(t)})),this._XSOEventListeners=[],this._modelEventListeners.forEach((function(t){e.removeEventListener(t)})),this._modelEventListeners=[])},g=function(e){this._valueEventListeners.forEach((function(t){e.removeEventListener(t)})),this._valueEventListeners=[]};return t.inherit({name:"pathexplorer",publishedProperties:{model:{defaultValue:null,type:"DS/TreeModel/TreeDocument"},value:{defaultValue:null,type:"DS/TreeModel/TreeNodeModel"},useModelSelectionFlag:{defaultValue:!0,type:"boolean"},onBurgerClick:{defaultValue:function(){this.defaultOnBurgerClick()},type:"function"}},computeValueFromStrings:function(e){return this.model?this.model.computeNodeFromLabels(e):null},computeStringsFromValue:function(e){if(!e)return[];var t=e.getParents().reverse().map((function(e){return e.getLabel()}));return t.push(e.getLabel()),t},defaultOnBurgerClick:function(){u.call(this)},displayHierarchicalModel:function(){this.defaultOnBurgerClick(),this.elements._popup.visibleFlag=!0},_preBuildView:function(){this._parent(),this.elements.container.addClassName("wux-controls-pathexplorer")},buildView:function(){this._parent(),this._burgerDiv=new e.Element("div",{class:"wux-controls-pathexplorer-burger wux-controls-pathexplorer-burger wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-home"}).inject(this.getContent()),this._breadcrumb=null,this._dataGridView=null,this._dataGridViewContainer=null,this._modelEventListeners=[],this._XSOEventListeners=[],this._updateValueInProgress=!1,this._valueEventListeners=[]},_postBuildView:function(){var e={mode:n.MODE.NAVIGATION,expandableSeparatorFlag:!0,value:l.call(this)};this._breadcrumb=new n(e),this._breadcrumb.inject(this.getContent()),this._breadcrumb.__customOverflowManagement__=!0,this._breadcrumb._applyDisplayStyle();var t=this;i.addEventOnElement(this,this._breadcrumb,"change",(function(e){e.stopPropagation(),e&&e.dsModel&&(t.value=r.call(t))})),i.addEventOnElement(this,this._breadcrumb,"separatorClick",(function(e){e.options&&void 0!==e.options.index&&c.call(t,e.options.index)}))},_handleEvents:function(){var e=this;i.addEventOnElement(this,this._burgerDiv,"click",(function(t){e.onBurgerClick&&e.onBurgerClick()}))},destroy:function(){this._dataGridView&&(this._dataGridView.remove(),this._dataGridView.destroy()),m.call(this,this.model),g.call(this,this.value),this._parent()},_applyModel:function(e){if(e&&m.call(this,e),this.model){var t=this;if(this.useModelSelectionFlag){var i=this.model.getXSO(),n=function(e){if(!t._updateValueInProgress){var n=i.get();n.length>0?t.value=n[0]:t.value=null,t.elements._popup&&(t.elements._popup.visibleFlag=!1)}};this._XSOEventListeners.push(i.onPostAdd(n)),this._XSOEventListeners.push(i.onPostRemove(n))}this._modelEventListeners.push(this.model.addEventListener("removeChild",(function(){t.value&&t.value.getTreeDocument()!==t.model&&(t.value=null)})))}this._applyValue(this.value)},_applyValue:function(e){if(null!==e&&g.call(this,e),this.model||null===e)if(null===this.value||this.value.getTreeDocument()===this.model){this._breadcrumb&&(this._breadcrumb.value=l.call(this)),this.useModelSelectionFlag&&(this._updateValueInProgress=!0,this.value?this.model.getXSO().unique(this.value):this.model&&this.model.getXSO().empty(),this._updateValueInProgress=!1);var t=this,i=function(){!t.value||t.value.hasChildren()?t.elements.container.removeAttribute("is-displaying-leaf"):t.elements.container.setAttributeNode(document.createAttribute("is-displaying-leaf"))};this.value&&(this._valueEventListeners.push(this.value.addEventListener("addChild",i)),this._valueEventListeners.push(this.value.addEventListener("removeChild",i))),i(),this.value!==e&&this.fire("change")}else null===e?this._properties.value.value=null:this.value=null;else this.value=null},_applyProperties:function(e){this._parent(e),this.isDirty("model")?this._applyModel(e.model):this.isDirty("value")&&this._applyValue(e.value)}})})),define("DS/ControlsEx/typings/types",[],(()=>{}));var __extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/ControlsEx/IDCard",["require","exports","DS/Controls/Abstract","UWA/Core","DS/UIBehaviors/DragAndDropManager","DS/Core/WebUXComponents","DS/Utilities/WUXUWAUtils","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/GeneratedToolbar","DS/Tweakers/TypeRepresentationFactory","DS/Utilities/Dom","i18n!DS/ControlsEx/assets/nls/translation","DS/Controls/BadgesContainer","./typings/types"],(function(e,t,i,n,s,o,a,l,r,d,h,p,u,c){"use strict";var m;function g(){var e=l.createToolbarItemsModelFromCommands(this.toolbarCommands);e.forEach((function(e){e.dataElements=Object.assign(e.dataElements,{category:"CUSTOM_COMMANDS",position:"far",visibleFlag:!0})}));var t={id:"toolbarCommands",dataElements:{typeRepresentation:"chevronMenuIcon",value:{menu:l.createMenuModelFromCommands(this.toolbarCommands)},position:"far",category:"CUSTOM_COMMANDS_MENU",visibleFlag:!1}};return e.push(t),e}function f(){var e=this,t={entries:g.call(this)};return t.entries.push({id:"statusCombo",dataElements:{typeRepresentation:"comboSelector",possibleValues:this.status,value:this.getSelectedStatus(),position:"far",category:"SELECTOR",visibleFlag:void 0!==this.status&&this.status.length>0},onNodeUpdate:function(t){var i=t.getAttributeValue("data");e.setSelectedStatus(i),e.fire("statusChange",{value:i})}}),t.entries.push({id:"info",dataElements:{typeRepresentation:"functionIcon",position:"far",category:"STANDARD_COMMANDS",icon:{iconName:"info",fontIconFamily:1,className:this.infoActivatedFlag?"highlightInfo":""},tooltip:{shortHelp:u.information},value:function(){e.infoActivatedFlag=!e.infoActivatedFlag,e.fire("infoClicked")},visibleFlag:!!this.infoVisibleFlag}}),t.entries.push({id:"foldIcon",dataElements:{typeRepresentation:"functionIcon",position:"far",category:"STANDARD_COMMANDS",icon:{iconName:this.isFoldedFlag?"up-down-constrained":"up-down-reduced",fontIconFamily:1},value:function(){e.isFoldedFlag=!e.isFoldedFlag,e.fire("foldClicked")},tooltip:{shortHelp:this.isFoldedFlag?u.expand:u.collapse},visibleFlag:!!this.isFoldableFlag}}),t.entries.push({id:"home",dataElements:{typeRepresentation:"functionIcon",position:"far",category:"STANDARD_COMMANDS",icon:{iconName:"home",fontIconFamily:1},tooltip:{shortHelp:u.home},value:function(){e.fire("homeClicked")},visibleFlag:!!this.homeVisibleFlag}}),d.prototype.createTreeDocument(t)}function b(){this._toolbarWidthWithCommandsOutsideMenu=void 0,this._toolbarWidthWithCommandsInsideMenu=void 0;(new h).registerTypeRepresentations({comboSelector:{stdTemplate:"comboSelector"}});var e=f.call(this);return new d({overflowManagement:"dropdown",direction:"horizontal",items:e})}function y(){r.cleanIcon(this.elements.picture),this.elements.picture.show(),this.elements.picture.setStyle("min-width","unset");var e=this.elements.picture.offsetHeight,t=4/3*e;r.generateIcon({iconPath:this.pictureSrc,iconSize:{width:t+"px",height:e+"px"}},{target:this.elements.picture,keepAspectRatio:!0}),this.elements.picture.setStyle("min-width",t+"px")}function _(){for(var e=0,t=0;t<this._generatedToolbar.items.getChildren().length&&!("CUSTOM_COMMANDS"===this._generatedToolbar.items.getChildren()[t].options.category&&++e>1);t++);var i=this._generatedToolbar.getNodeModelByID("toolbarCommands");return e>1&&i&&i.options.visibleFlag}function v(e){if(e&&_.call(this)||!e&&!_.call(this)){this._generatedToolbar.prepareUpdateView();for(var t=this._generatedToolbar.items.getChildren(),i="",n=0;n<t.length;n++)if("CUSTOM_COMMANDS"===(i=t[n].options.category))t[n].options.visibleFlag=e;else{if("CUSTOM_COMMANDS_MENU"!==i)break;t[n].options.visibleFlag=!e}return this._generatedToolbar.pushUpdateView(),!0}return!1}function C(){var e=!1,t=this.elements.container.offsetWidth,i=t>0&&t<=529;if(!!(t>0&&t<=529&&this.pictureSrc)||!this.pictureSrc?this.elements.picture.hide():(y.call(this),this.elements.picture.show()),this._generatedToolbar&&this._generatedToolbar.isReady()){var n=this.elements.toolbar.style.width;if(i){var s=(this._getCurrentTouchMode()?42:16)+"px";n!==s&&(this.elements.toolbar.setStyle("width",s),v.call(this,!0),e=!0)}else{var o=""!==n;o&&this.elements.toolbar.setStyle("width",""),void 0===this._toolbarWidthWithCommandsOutsideMenu&&(this._toolbarWidthWithCommandsOutsideMenu=this._generatedToolbar._toolbar.getPreferredSize()),(v.call(this,this._toolbarWidthWithCommandsOutsideMenu<=this.elements.heading.offsetWidth/2)||o)&&(this._generatedToolbar.showAllAndResize(),e=!0)}}return e}function w(){this.subTitle||this.description?this.elements.content.show():this.elements.content.hide()}function T(e){var t=e.dataTransfer.getData("Text"),i={};if(t)try{i=JSON.parse(t)}catch(e){window.console.warn('The element being in dataTransfer type "text" is not parsable usable JSON.parse')}var n=Object.assign({source:{uuid:this.identifier,amd:"DS/ControlsEx/IDCard"},data:{"dswebux/x-controlsex.idcard.title+json":this.titleText,"dswebux/x-controlsex.idcard.subtitle+json":this.subTitle}},i);e.dataTransfer.setData("Text",JSON.stringify(n))}function S(){if(!this._dndInfos.isListening){var e={dragstart:"onDragStart",dragend:"onDragEnd",drag:"onDrag"};this._dndInfos.boundProcessDnDCallback=function(t){if("dragstart"===t.type&&p.isElementInside(t.target,this.elements.toolbar))t.preventDefault();else{"dragstart"===t.type?this.getContent().setAttributeNode(document.createAttribute("dragged")):"dragend"===t.type&&this.getContent().removeAttribute("dragged");var i=!0,n=e[t.type],s=this[n];if(s&&(i=s.call(this,t)),i){var o=this[n+"Default"];o&&o.call(this,t)}}}.bind(this),this.getContent().addEventListener("dragstart",this._dndInfos.boundProcessDnDCallback),this.getContent().addEventListener("drag",this._dndInfos.boundProcessDnDCallback),this.getContent().addEventListener("dragend",this._dndInfos.boundProcessDnDCallback),this._dndInfos.boundOnEnter=function(e){p.isElementInside(e.target,this.elements.toolbar)?this.getContent().removeAttribute("drag-is-possible"):this.getContent().setAttributeNode(document.createAttribute("drag-is-possible"))}.bind(this),this._dndInfos.boundOnLeave=function(e){p.isElementInside(e.relatedTarget,this.elements.toolbar)||!p.isElementInside(e.relatedTarget,this.getContent())?this.getContent().removeAttribute("drag-is-possible"):this.getContent().setAttributeNode(document.createAttribute("drag-is-possible"))}.bind(this),this.getContent().addEventListener("mouseenter",this._dndInfos.boundOnEnter,!0),this.getContent().addEventListener("mouseleave",this._dndInfos.boundOnLeave,!0)}}function D(){this._dndInfos.isListening&&(this.getContent().removeEventListener("dragstart",this._dndInfos.boundProcessDnDCallback),this.getContent().removeEventListener("drag",this._dndInfos.boundProcessDnDCallback),this.getContent().removeEventListener("dragend",this._dndInfos.boundProcessDnDCallback),this.getContent().removeEventListener("mouseenter",this._dndInfos.boundOnEnter),this.getContent().removeEventListener("mouseleave",this._dndInfos.boundOnLeave))}!function(e){e.CUSTOM_COMMANDS="CUSTOM_COMMANDS",e.CUSTOM_COMMANDS_MENU="CUSTOM_COMMANDS_MENU",e.SELECTOR="SELECTOR",e.STANDARD_COMMANDS="STANDARD_COMMANDS"}(m||(m={}));var F=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return n._idCardPrefKey="wux-controlsex-idcard",a.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{titleIcon:{defaultValue:null,type:"object"},titleText:{defaultValue:"",type:"string"},bannerSrc:{defaultValue:"",type:"string"},pictureSrc:{defaultValue:"",type:"string"},subTitle:{defaultValue:"",type:"string"},description:{defaultValue:"",type:"string"},badges:{defaultValue:[],type:"object[]"},status:{defaultValue:[],type:"object[]"},toolbarCommands:{defaultValue:[],type:"object[]"},isFoldedFlag:{defaultValue:!1,type:"boolean"},isFoldableFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},identifier:{defaultValue:"",type:"string",readOnly:!0,category:"Behavior"},infoVisibleFlag:{defaultValue:!0,type:"boolean"},homeVisibleFlag:{defaultValue:!1,type:"boolean"},infoActivatedFlag:{defaultValue:!1,type:"boolean"},draggableFlag:{defaultValue:!1,type:"boolean"},onDragStart:{defaultValue:void 0,noNeedToApplyFlag:!0,type:"function"},onDrag:{defaultValue:void 0,noNeedToApplyFlag:!0,type:"function"},onDragEnd:{defaultValue:void 0,noNeedToApplyFlag:!0,type:"function"},allowUnsafeHTML:{defaultValue:void 0,type:"object"}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){p.removeResizeObserver(this,this.elements.container,this._onIDCardResize),e.prototype.destroy.call(this)},t.prototype.onDragStartDefault=function(e){T.call(this,e),e.dataTransfer.effectAllowed="copyMove",s.storeGlobalData({sourceIDCardUUID:this.identifier,titleText:this.titleText,subTitle:this.subTitle,timestamp:Date.now()})},t.prototype.onDragDefault=function(e){},t.prototype.onDragEndDefault=function(e){},t.prototype._preBuildView=function(t){this._dndInfos={isListening:!1},e.prototype._preBuildView.call(this,t)},t.prototype.buildView=function(){this._buildLayout(),e.prototype.buildView.call(this)},t.prototype._buildLayout=function(){var e=this;this.elements.container.addClassName("wux-controls-idcard"),this.elements.banner=new n.Element("img",{class:"wux-idcard-banner",draggable:"false"}).inject(this.elements.container),this.elements.body=new n.Element("div",{class:"wux-idcard-body"}).inject(this.elements.container),this.elements.picture=new n.Element("div",{class:"wux-idcard-picture"}).inject(this.elements.body),this.elements.info=new n.Element("div",{class:"wux-idcard-info"}).inject(this.elements.body),this.elements.heading=new n.Element("div",{class:"wux-idcard-heading"}).inject(this.elements.info),this.elements.titles=new n.Element("div",{class:"wux-idcard-titles"}).inject(this.elements.heading),this.elements.title=new n.Element("div",{class:"wux-idcard-title"}).inject(this.elements.titles),this.elements.titleIcon=new n.Element("span",{class:"wux-idcard-title-icon"}).inject(this.elements.title),this.elements.titleText=new n.Element("span",{class:"wux-idcard-title-text"}).inject(this.elements.title),this.elements.titleText.tooltipInfos={getAllInformationCB:function(){if(e.titleText&&e.elements.titleText.getClientRects().length>2)return{model:{shortHelp:e.titleText}}}},this.elements.toolbar=new n.Element("div",{class:"wux-idcard-toolbar"}).inject(this.elements.heading),this.elements.content=new n.Element("div",{class:"wux-idcard-content"}).inject(this.elements.info),this.elements.subTitle=new n.Element("div",{class:"wux-idcard-subTitle"}).inject(this.elements.content),this.elements.subTitle.tooltipInfos={getAllInformationCB:function(){if(e.subTitle&&e.elements.subTitle.scrollWidth>e.elements.subTitle.offsetWidth)return{model:{shortHelp:e.subTitle}}}},this.elements.description=new n.Element("div",{class:"wux-idcard-description"}).inject(this.elements.content),this.elements.description.tooltipInfos={getAllInformationCB:function(){if(e.description&&e.elements.description.scrollHeight>e.elements.description.offsetHeight)return{model:{shortHelp:e.description}}}},this.elements.badges=(new c).inject(this.elements.info)},t.prototype._postBuildView=function(){var e=this;if(""!==this.identifier){var t=l.getDataFromLocalPreferences(this,this._idCardPrefKey,"is_folded_flag"),i=l.getDataFromLocalPreferences(this,this._idCardPrefKey,"info_activated");void 0!==t&&(this.isFoldedFlag=t),void 0!==i&&(this.infoActivatedFlag=i)}this._generatedToolbar=b.call(this).inject(this.elements.toolbar),p.addEventOnElement(this,this._generatedToolbar,"onReady",(function(t){t.stopPropagation(),C.call(e)?p.addEventOnElement(e,e._generatedToolbar,"toolbarResized",(function(){e.fire("onReady")}),{once:!0}):e.fire("onReady")}),{once:!0})},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("titleIcon")&&this._applyTitleIcon(t.titleIcon),this.isDirty("titleText")&&this._applyTitleText(t.titleText),this.isDirty("bannerSrc")&&this._applyBannerSrc(t.bannerSrc),this.isDirty("pictureSrc")&&this._applyPictureSrc(t.pictureSrc),this.isDirty("subTitle")&&this._applySubTitle(t.subTitle),this.isDirty("description")&&this._applyDescription(t.description),this.isDirty("badges")&&this._applyBadges(t.badges),this.isDirty("status")&&this._applyStatus(t.status),this.isDirty("toolbarCommands")&&this._applyToolbarCommands(t.toolbarCommands),this.isDirty("isFoldedFlag")&&this._applyIsFoldedFlag(t.isFoldedFlag),this.isDirty("infoVisibleFlag")&&this._applyInfoVisibleFlag(t.infoVisibleFlag),this.isDirty("homeVisibleFlag")&&this._applyHomeVisibleFlag(t.homeVisibleFlag),this.isDirty("isFoldableFlag")&&this._applyIsFoldableFlag(t.isFoldableFlag),this.isDirty("infoActivatedFlag")&&this._applyInfoActivatedFlag(t.infoActivatedFlag),this.isDirty("draggableFlag")&&this._applyDraggableFlag(t.draggableFlag),this.isDirty("allowUnsafeHTML")&&this._applyAllowUnsafeHTMLContent(t.allowUnsafeHTML)},t.prototype._handleEvents=function(){p.addResizeObserver(this,this.elements.container,this._onIDCardResize);var e=C.bind(this);p.addEventOnElement(this,this._generatedToolbar,"modelUpdated",e),p.addEventOnElement(this,this.elements.badges,"onReady",(function(e){e.stopPropagation()}))},t.prototype._applyTitleIcon=function(e){!this.titleIcon||0===Object.keys(this.titleIcon).length&&this.titleIcon.constructor===Object?this.elements.titleIcon.hide():(r.generateIcon(Object.assign(this.titleIcon,{fontIconSize:"16px",iconSize:{width:"16px",height:"16px"}}),{target:this.elements.titleIcon}),this.elements.titleIcon.show())},t.prototype._applyTitleText=function(e){this.allowUnsafeHTML&&this.allowUnsafeHTML.title?p.setContent(this.elements.titleText,this.titleText,!0):this.elements.titleText.innerText=this.titleText},t.prototype._applyBannerSrc=function(e){!this.bannerSrc||this.isFoldedFlag?this.elements.banner.hide():(this.elements.banner.src=this.bannerSrc,this.elements.banner.show())},t.prototype._applyPictureSrc=function(e){C.call(this)},t.prototype._applySubTitle=function(e){this.subTitle?(this.allowUnsafeHTML&&this.allowUnsafeHTML.subTitle?p.setContent(this.elements.subTitle,this.subTitle,!0):this.elements.subTitle.innerText=this.subTitle,this.elements.subTitle.show()):this.elements.subTitle.hide()},t.prototype._applyDescription=function(e){this.allowUnsafeHTML&&this.allowUnsafeHTML.description?p.setContent(this.elements.description,this.description,!0):this.elements.description.innerText=this.description,!this.description||this.isFoldedFlag?this.elements.description.hide():this.elements.description.show(),w.call(this)},t.prototype._applyBadges=function(e){!this.badges||0===this.badges.length||this.isFoldedFlag?this.elements.badges.hide():(this.elements.badges.value=this.badges,this.elements.badges.show())},t.prototype._applyStatus=function(e){if(this._generatedToolbar)if(this.status&&0!==this.status.length){var t=this.getSelectedStatus(),i=this._generatedToolbar.getNodeModelByID("statusCombo");i.getAttributeValue("data")===t&&!0===i.options.visibleFlag&&i.options.possibleValues===this.status||(this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("statusCombo",{visibleFlag:!0,possibleValues:this.status,grid:{data:t}}),this._generatedToolbar.pushUpdateView()),this.elements.body.classList.remove("hideStatus")}else this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("statusCombo",{visibleFlag:!1}),this._generatedToolbar.pushUpdateView(),this.elements.body.classList.add("hideStatus")},t.prototype.getSelectedStatus=function(){for(var e=0;e<this.status.length;e++)if(this.status[e].isSelected)return this.status[e].value;if(this.status.length>0)return this.status[0].value},t.prototype.setSelectedStatus=function(e){for(var t,i,n=0;n<this.status.length;n++)this.status[n].value===e?i=this.status[n]:this.status[n].isSelected&&(t=this.status[n]);t&&i&&t!==i&&(delete t.isSelected,i.isSelected=!0,this._applyStatus())},t.prototype.show=function(t){return e.prototype.show.call(this,t),this._generatedToolbar&&this._generatedToolbar.show(),this},t.prototype.hide=function(t){e.prototype.hide.call(this,t),this._generatedToolbar&&this._generatedToolbar.hide()},t.prototype._applyToolbarCommands=function(e){var t=this;if(this._generatedToolbar){void 0!==this._toolbarWidthWithCommandsOutsideMenu&&(this._toolbarWidthWithCommandsOutsideMenu=void 0),this._generatedToolbar.prepareUpdateView();var i=f.call(this);this._generatedToolbar.items=i,this._generatedToolbar.pushUpdateView(),p.addEventOnElement(this,this._generatedToolbar,"onReady",(function(e){e.stopPropagation(),C.call(t),t.fire("onReady")}),{once:!0})}},t.prototype._switchFoldMode=function(){this.isFoldedFlag?(this.elements.info.setStyle("gap","0"),this.elements.container.setAttribute("folded",""),this.elements.titles.appendChild(this.elements.subTitle)):(this.elements.info.setStyle("gap",""),this.elements.container.removeAttribute("folded"),this.elements.content.insertBefore(this.elements.subTitle,this.elements.description)),this._applyBannerSrc(this.bannerSrc),this._applyDescription(this.description),this._applyBadges(this.badges),C.call(this)},t.prototype._applyIsFoldedFlag=function(e){this._generatedToolbar&&this._generatedToolbar.updateNodeModel("foldIcon",{icon:{iconName:this.isFoldedFlag?"up-down-constrained":"up-down-reduced",fontIconFamily:1},tooltip:{shortHelp:this.isFoldedFlag?u.expand:u.collapse}}),""!==this.identifier&&this._isCurrentlyCalledFromUIInteraction()&&l.saveDataInLocalPreferences(this,this._idCardPrefKey,"is_folded_flag",this.isFoldedFlag),this._switchFoldMode(),this.fire("dimensionsChanged")},t.prototype._applyInfoActivatedFlag=function(e){this._generatedToolbar&&this._generatedToolbar.updateNodeModel("info",{grid:{semantics:{icon:{iconName:"info",fontIconFamily:1,className:this.infoActivatedFlag?"highlightInfo":""}}}}),""!==this.identifier&&this._isCurrentlyCalledFromUIInteraction()&&l.saveDataInLocalPreferences(this,this._idCardPrefKey,"info_activated",this.infoActivatedFlag)},t.prototype._applyInfoVisibleFlag=function(e){this._generatedToolbar&&(this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("info",{visibleFlag:this.infoVisibleFlag}),this._generatedToolbar.pushUpdateView())},t.prototype._applyHomeVisibleFlag=function(e){this._generatedToolbar&&(this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("home",{visibleFlag:this.homeVisibleFlag}),this._generatedToolbar.pushUpdateView())},t.prototype._applyIsFoldableFlag=function(e){this._generatedToolbar&&(this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("foldIcon",{visibleFlag:this.isFoldableFlag}),this._generatedToolbar.pushUpdateView())},t.prototype._applyDraggableFlag=function(e){this.draggableFlag?(this.getContent().setAttribute("draggable","true"),this.elements.toolbar.setAttribute("draggable","true"),S.call(this),this._dndInfos.isListening=!0):(this.getContent().removeAttribute("draggable"),this.elements.toolbar.removeAttribute("draggable"),D.call(this),this._dndInfos.isListening=!1)},t.prototype._applyAllowUnsafeHTMLContent=function(e){var t=this.allowUnsafeHTML;((null==t?void 0:t.title)&&!e||!t&&(null==e?void 0:e.title)||t&&e&&!t.title!=!e.title)&&this._applyTitleText(this.titleText),((null==t?void 0:t.subTitle)&&!e||!t&&(null==e?void 0:e.subTitle)||t&&e&&!t.subTitle!=!e.subTitle)&&this._applySubTitle(this.subTitle),((null==t?void 0:t.description)&&!e||!t&&(null==e?void 0:e.description)||t&&e&&!t.description!=!e.description)&&this._applyDescription(this.description)},t.prototype._onIDCardResize=function(){C.call(this)},t}(i);return o.addClass(F,"idCard"),F}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/ControlsEx/Card",["require","exports","DS/Controls/BaseCard","DS/Controls/BadgesContainer","DS/Core/PointerEvents","DS/Core/WebUXComponents","DS/Tweakers/GeneratedToolbar","DS/Utilities/Dom","DS/Utilities/Utils","./typings/types","DS/CoreBase/WebUXGlobalEnums"],(function(e,t,i,n,s,o,a,l,r){"use strict";function d(){var e=this,t={entries:h.call(this)},i=a.prototype.createTreeDocument(t),n=new a({overflowManagement:"dropdown",direction:"horizontal",items:i,touchMode:this.touchMode});return l.addEventOnElement(this,n,"modelUpdated",(function(){m.call(e)})),n}function h(){var e=r.createToolbarItemsModelFromCommands(this.actions);return e.forEach((function(e){e.dataElements=Object.assign(e.dataElements,{position:"far",visibleFlag:!0})})),e}function p(){this._elements.actionsToolbar.prepareUpdateView();for(var e=this._elements.actionsToolbar.items.getChildren()||[],t=0;t<e.length;t++)e[t--].remove();var i={entries:h.call(this)},n=a.prototype.createTreeDocument(i);if(n){for(t=0;t<e.length;t++)n.addChild(e[t]);this._elements.actionsToolbar.items=n}this._elements.actionsToolbar.pushUpdateView()}function u(){if(this._elements.actionsToolbar&&this._elements.actionsToolbar.isReady()){if(this._elements.actionsToolbar._toolbar._elementsArray)for(var e=this._elements.actionsToolbar._toolbar._elementsArray,t=0;t<e.length;t++)e[t].size&&(e[t].size.shouldRecomputeNextTimeInToolbar=!0);var i=this._elements.actionsToolbar._toolbar.getPreferredSize();i!==this._maxActionsToolbarWidth&&(this._maxActionsToolbarWidth=i,this._elements.actions.style.width=this._maxActionsToolbarWidth+1+"px")}}function c(){u.call(this),this.fire("onActionsReady")}function m(){u.call(this)}function g(e){var t=this.getContent()===e;if(!t)for(var i in this._elements)if(t=this._elements[i]&&this._elements[i].getContent&&this._elements[i].getContent()===e||this._elements[i]===e)break;return t}var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addBadge=function(e,t){void 0===this.badges&&(this.badges=[]),this._elements.badges.addBadge(e,t)},t.prototype.refreshBadge=function(e){void 0!==this.badges&&this._elements.badges.refreshBadge(e)},t.prototype.removeBadge=function(e){void 0!==this.badges&&this._elements.badges.removeBadge(e)},Object.defineProperty(t,"publishedProperties",{get:function(){return{activeFlag:{defaultValue:!1,type:"boolean",category:"Appearance"},selectableFlag:{defaultValue:!1,type:"boolean",category:"Appearance"},selectedFlag:{defaultValue:!1,type:"boolean",category:"Appearance"},orientation:{defaultValue:"portrait",type:"string",category:"Appearance"},picture:{defaultValue:void 0,type:"string",category:"Appearance"},titleIcon:{defaultValue:void 0,type:"object",category:"Appearance"},titleText:{defaultValue:void 0,type:"string",category:"Appearance"},subtitle:{defaultValue:void 0,type:"string",category:"Appearance"},description:{defaultValue:void 0,type:"string",category:"Appearance"},descriptionHeight:{defaultValue:1,type:"integer",category:"Appearance",advancedSetter:!0},badges:{defaultValue:void 0,type:"object[]"},actions:{defaultValue:void 0,type:"Array<WUX.CommandDefinitionModel>"},mainAction:{defaultValue:void 0,type:"WUX.LinkDefinition | WUX.FunctionDefinition"},_debug:{defaultValue:!1,type:"boolean",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(t){this._classId="card",e.prototype._preBuildView.call(this,t),void 0===this._maxActionsToolbarWidth&&(this._maxActionsToolbarWidth=0),e.prototype._preBuildView.call(this,t)},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("mainAction")&&this._applyMainAction(),this.isDirty("activeFlag")&&this._applyActiveFlag(),this.isDirty("selectableFlag")&&this._applySelectableFlag(),this.isDirty("selectedFlag")&&this._applySelectedFlag(),this.isDirty("orientation")&&this._applyOrientation(),this.isDirty("picture")&&this._applyPicture(),this.isDirty("titleIcon")&&this._applyTitleIcon(),this.isDirty("titleText")&&this._applyTitleText(),this.isDirty("subtitle")&&this._applySubtitle(),this.isDirty("description")&&this._applyDescription(),this.isDirty("descriptionHeight")&&o._applyForAdvancedSetterProperty(this,"descriptionHeight",t?t.descriptionHeight:1,this.descriptionHeight),this.isDirty("badges")&&this._applyBadges(),this.isDirty("actions")&&this._applyActions(),this.isDirty("_debug")&&this._apply_debug()},t.prototype.handleEvents=function(){var e=this;function t(i){e.elements.container.removeAttribute("focus",""),e.selectedFlag=!e.elements.container.attributes.hasOwnProperty("selected");var n=l.getDocumentOwner(e.getContent());l.removeEventOnElement(e,n,s.POINTERUP,t)}l.addEventOnElement(this,this.elements.container,s.POINTERDOWN,(function(i){if(e.selectableFlag&&g.call(e,i.target)){e.elements.container.setAttribute("focus","");var n=l.getDocumentOwner(e.getContent());l.addEventOnElement(e,n,s.POINTERUP,t)}})),l.addEventOnElement(this,this.elements.container,s.POINTERUP,t),l.addResizeObserver(this,this.elements.container,(function(){u.call(e)}))},t.prototype._applyActiveFlag=function(){this.elements.container[this.activeFlag?"setAttribute":"removeAttribute"]("active","")},t.prototype._applySelectableFlag=function(){var e=this;this._updateElement({name:"checkbox",parentName:"picture",nextSiblingsNames:[],shouldAddElement:function(){return void 0!==e.picture&&e.selectableFlag},createElement:function(){return l.generateIcon({iconName:"check",fontIconSize:"14px",className:"wux-card-checkbox"},{roundFlag:!0})},keepParentWhenRemoved:!0}),this.elements.container[this.selectableFlag?"setAttribute":"removeAttribute"]("selectable",""),this._applySelectedFlag()},t.prototype._applySelectedFlag=function(){this.elements.container[this.selectableFlag&&this.selectedFlag?"setAttribute":"removeAttribute"]("selected","")},t.prototype._applyOrientation=function(){this.elements.container.classList.add("wux-card-"+("landscape"===this.orientation?"landscape":"portrait")),this.elements.container.classList.remove("wux-card-"+("landscape"===this.orientation?"portrait":"landscape"))},t.prototype._applyPicture=function(){var e=this;this._updateElement({name:"picture",parentName:"container",nextSiblingsNames:["content"],shouldAddElement:function(){return void 0!==e.picture},fillElement:function(){e._elements.picture.style.backgroundImage="url("+e.picture+")"}}),this._applySelectableFlag()},t.prototype._applyTitleIcon=function(){var e=this;this._updateElement({name:"titleIcon",parentName:"title",nextSiblingsNames:["titleText"],shouldAddElement:function(){return void 0!==e.titleIcon},fillElement:function(){l.generateIcon(e.titleIcon,{target:e._elements.titleIcon})}}),this._applySubtitle()},t.prototype._applyTitleText=function(){var e=this;this._updateElement({name:"titleText",parentName:"title",nextSiblingsNames:[],shouldAddElement:function(){return void 0!==e.titleText},fillElement:function(){e.highlightModel?r.highlightContent(e._elements.titleText,{highlightModel:e.highlightModel,newValue:e.titleText,allowUnsafeHTMLContent:!1}):e._elements.titleText.textContent=e.titleText}}),this._applySubtitle()},t.prototype._applySubtitle=function(){var e=this;this._updateElement({name:"subtitle",parentName:"content",nextSiblingsNames:["description","footer"],shouldAddElement:function(){return void 0!==e.subtitle},fillElement:function(){e.highlightModel?r.highlightContent(e._elements.subtitle,{highlightModel:e.highlightModel,newValue:e.subtitle,allowUnsafeHTMLContent:!1}):e._elements.subtitle.textContent=e.subtitle}})},t.prototype._applyHighlightModel=function(){this._applySubtitle()},t.prototype._applyDescription=function(){var e=this;this._updateElement({name:"description",parentName:"content",nextSiblingsNames:["footer"],shouldAddElement:function(){return void 0!==e.description},fillElement:function(){e.highlightModel?r.highlightContent(e._elements.description,{highlightModel:e.highlightModel,newValue:e.description,allowUnsafeHTMLContent:!1}):e._elements.description.textContent=e.description}})},t.prototype._preEditDescriptionHeight=function(e,t){return!isNaN(t)&&"number"==typeof t&&t>=0&&t<=10},t.prototype._applyDescriptionHeight=function(){this.elements.container.style.setProperty("--description-lines",this.descriptionHeight)},t.prototype._applyBadges=function(){var e=this;this._updateElement({name:"badges",parentName:"footer",nextSiblingsNames:["actions"],shouldAddElement:function(){return void 0!==e.badges},createElement:function(){return new n},fillElement:function(){e._elements.badges.value=e.badges}})},t.prototype._applyActions=function(){var e=this;this._updateElement({name:"actions",parentName:"footer",nextSiblingsNames:[],shouldAddElement:function(){return void 0!==e.actions},fillElement:function(){e._elements.actionsToolbar?p.call(e):(e._elements.actionsToolbar=d.call(e).inject(e._elements.actions),l.addEventOnElement(e,e._elements.actionsToolbar,"onReady",c.bind(e)))}})},t.prototype._applyMainAction=function(){this._elements.title&&(void 0!==this.mainAction?this._elements.title.setAttributeNode(document.createAttribute("has-callback")):this._elements.title.removeAttribute("has-callback"))},t.prototype._updateContainer_container=function(){},t.prototype._updateContainer_picture=function(){this._updateContainerElement({name:"picture",parentName:"container",prepend:!0})},t.prototype._updateContainer_content=function(){this._updateContainerElement({name:"content",parentName:"container",prepend:!1})},t.prototype._updateContainer_title=function(){var e=this;this._updateContainerElement({name:"title",parentName:"content",prepend:!0,fillElement:function(){e._bindMainActionToElt(e._elements.title),void 0!==e.mainAction?e._elements.title.setAttributeNode(document.createAttribute("has-callback")):e._elements.title.removeAttribute("has-callback")}})},t.prototype._updateContainer_footer=function(){this._updateContainerElement({name:"footer",parentName:"content",prepend:!1})},t.prototype._updateHasElements_TO_REMOVE_WHEN_HAS_IS_SUPPORTED=function(){this.elements.container[void 0!==this.picture?"setAttribute":"removeAttribute"]("haspicture",""),this.elements.container[void 0!==this.titleIcon||void 0!==this.titleText||void 0!==this.description||void 0!==this.badges||void 0!==this.actions?"setAttribute":"removeAttribute"]("hasContent",""),this.elements.container[void 0!==this.titleIcon||void 0!==this.titleText?"setAttribute":"removeAttribute"]("hastitle",""),this.elements.container[void 0===this.titleIcon&&void 0===this.titleText||void 0===this.subtitle?"removeAttribute":"setAttribute"]("hassubtitle",""),this.elements.container[void 0!==this.description?"setAttribute":"removeAttribute"]("hasdescription",""),this.elements.container[void 0!==this.badges||void 0!==this.actions?"setAttribute":"removeAttribute"]("hasfooter",""),this.elements.container[void 0!==this.badges?"setAttribute":"removeAttribute"]("hasbadges",""),this.elements.container[void 0!==this.actions?"setAttribute":"removeAttribute"]("hasactions","")},t.prototype.show=function(t){return e.prototype.show.call(this,t),this._elements.actionsToolbar&&this._elements.actionsToolbar.show(),this},t.prototype.hide=function(t){e.prototype.hide.call(this,t),this._elements.actionsToolbar&&this._elements.actionsToolbar.hide()},t}(i);return o.addClass(f,"card"),f}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/ControlsEx/LoadingPanel",["require","exports","UWA/Core","UWA/Fx","DS/Controls/Abstract","DS/Controls/Button","DS/Core/WebUXComponents","DS/Controls/ModalContainer","DS/Controls/ProgressBar","DS/DataGridView/DataGridView","DS/DataGridView/DataGridViewLayout","DS/CoreBase/WebUXGlobalEnums","./typings/types"],(function(e,t,i,n,s,o,a,l,r,d,h,p){"use strict";var u="wux-controls-loading-panel",c=u+"-modal",m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="loadingPanel",t}return __extends(t,e),t.prototype.on=function(){var e=this;(e._onCount++,e._onCount>1)||(e.show(),new n(e.elements.container,{duration:1e3,transition:"linear",events:{onStart:function(){},onComplete:function(){e.fire("loadingPanelOn")}}}).start({opacity:[0,1]}))},t.prototype.off=function(){var e=this;(e._onCount=e._onCount>0?e._onCount-1:0,e._onCount)||new n(e.elements.container,{duration:1e3,transition:"linear",events:{onStart:function(){},onComplete:function(){0===e._onCount&&(e.hide(),e.fire("loadingPanelOff"))}}}).start({opacity:[1,0]})},Object.defineProperty(t,"publishedProperties",{get:function(){return{shape:{defaultValue:"linear",type:"string",category:"Appearance"},displayStyle:{defaultValue:"normal",type:"string",category:"Appearance"},width:{defaultValue:"100%",type:"string",category:"Appearance"},emphasize:{defaultValue:"info",type:"string",category:"Appearance"},value:{defaultValue:void 0,type:"number",category:"Appearance"},info:{defaultValue:"",type:"object",category:"Appearance"},showButtonsFlag:{defaultValue:!1,type:"boolean",category:"Appearance"},modalFlag:{defaultValue:!1,type:"boolean",category:"Appearance"},autoCloseFlag:{defaultValue:!0,type:"boolean",category:"Appearance",noNeedToApplyFlag:!0}}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){this.elements.container.addClassName(u),this.hide(),this._onCount=0,this.elements._panel=new i.Element("div").inject(this.elements.container);var e=new i.Element("div",{class:u+"-first-row"}).inject(this.elements._panel);this.elements._progressBar=new r({shape:"linear",infiniteFlag:!0}).inject(e),this.elements._buttonsContainer=i.Element("div",{class:u+"-buttons"}).inject(e),this.elements._playButton=new o({showLabelFlag:!1,icon:{iconName:"play",fontIconFamily:p.WUXManagedFontIcons.Font3DS,fontIconSize:"2x"}}).inject(this.elements._buttonsContainer),this.elements._playButton.hide(),this.elements._pauseButton=new o({showLabelFlag:!1,icon:{iconName:"pause",fontIconFamily:p.WUXManagedFontIcons.Font3DS,fontIconSize:"2x"}}).inject(this.elements._buttonsContainer),this.elements._stopButton=new o({showLabelFlag:!1,icon:{iconName:"close",fontIconFamily:p.WUXManagedFontIcons.Font3DS,fontIconSize:"2x"}}).inject(this.elements._buttonsContainer),this.elements._label=i.Element("div",{class:u+"-label"}).inject(this.elements._panel)},t.prototype.handleEvents=function(){var e=this;this.elements._playButton.addEventListener("buttonclick",(function(t){t.stopPropagation(),e.elements._progressBar.emphasize=e.emphasize,e.elements._playButton.hide(),e.elements._pauseButton.show(),e.fire("playPause",{isPaused:!1})})),this.elements._pauseButton.addEventListener("buttonclick",(function(t){t.stopPropagation(),e.elements._progressBar.emphasize="pause",e.elements._playButton.show(),e.elements._pauseButton.hide(),e.fire("playPause",{isPaused:!0})})),this.elements._stopButton.addEventListener("buttonclick",(function(t){t.stopPropagation(),e._onCount=1,e.elements._progressBar.emphasize="pause",e.elements._playButton.show(),e.elements._pauseButton.hide(),e.fire("stop"),e.autoCloseFlag&&e.off()}))},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("shape")&&this._applyShape(),this.isDirty("width")&&this._applyWidth(),this.isDirty("displayStyle")&&this._applyDisplayStyle(),this.isDirty("emphasize")&&this._applyEmphasize(),this.isDirty("value")&&this._applyValue(),this.isDirty("info")&&this._applyInfo(),this.isDirty("showButtonsFlag")&&this._applyShowButtonsFlag(),this.isDirty("modalFlag")&&this._applyModalFlag()},t.prototype._applyShape=function(){var e=this._shouldDisplayValueInline(this.elements._progressBar.shape);this.elements._progressBar.shape=this.shape;var t=this._shouldDisplayValueInline(this.shape);this._applyWidth(),e!==t?this._applyInfo():this._updateMainStyle()},t.prototype._applyWidth=function(){"linear"===this.shape?this.elements._panel.setStyle("width",this.width):"circular"===this.shape&&this.elements._panel.removeAttribute("style")},t.prototype._applyDisplayStyle=function(){this.elements._progressBar.displayStyle=this.displayStyle},t.prototype._applyEmphasize=function(){this.elements._progressBar.emphasize=this.emphasize},t.prototype._applyValue=function(){this._isValueValid()?(this.elements._progressBar.infiniteFlag=!1,this.elements._progressBar.value=this.value,this.elements._progressBar.statusFlag=!0):(this.elements._progressBar.infiniteFlag=!0,this.elements._progressBar.statusFlag=!1),this._shouldDisplayValueInline(this.shape)?this._applyInfo():this._updateMainStyle()},t.prototype._applyInfo=function(){if(this.info||(this._properties.info.value=""),"string"==typeof this.info){var e=this.info;this._shouldDisplayValueInline(this.shape)&&this._isValueValid()&&(""===e?e=this.value+"%":e+=" (".concat(this.value,"%)")),this.elements._label.textContent=e}else this.elements._tree||this._createTree(),this.elements._tree.treeDocument=this.info;this._updateMainStyle()},t.prototype._applyShowButtonsFlag=function(){this._updateMainStyle()},t.prototype._applyModalFlag=function(){this.modalFlag?(this.elements.container.addClassName(c),l.createModal(this.elements.container,this.elements._panel)):(l.removeModal(this.elements.container),this.elements.container.removeClassName(c),this.elements._panel.inject(this.elements.container))},t.prototype._createTree=function(){var e=i.Element("div",{class:u+"-tree-container"}).inject(this.elements._panel);this.elements._tree=new d({treeDocument:void 0,columns:[{text:"Text",dataIndex:"tree",editableFlag:!1}],layout:new h({columnsHeader:!1,rowsHeader:!1}),treeNodeCellOptions:{expanderStyle:"triangle",buildLinks:!1,depthIncrement:0},showAlternateBackgroundFlag:!1}).inject(e)},t.prototype._updateMainStyle=function(){this.elements._panel.removeClassName(this._lastMainStyleClass);var e=u;e+="-"+this.shape,e+="string"==typeof this.info&&""!==this.info?"-label":"",e+="linear"===this.shape&&"string"!=typeof this.info?"-tree":"",e+=this.showButtonsFlag?"-buttons":"",e+=this._getCurrentTouchMode()?"-touch":"-desktop",this.elements._panel.addClassName(e),this._lastMainStyleClass=e,this.elements._buttonsContainer.removeClassName("wux-controls-loading-panel-buttons-single"),this.elements._playButton.getContent().removeClassName("wux-controls-loading-panel-button-hide"),this.elements._pauseButton.getContent().removeClassName("wux-controls-loading-panel-button-hide"),this.elements._stopButton.getContent().removeClassName("wux-controls-loading-panel-button-hide"),"closeButtonOnly"===this.showButtonsFlag&&(this.elements._buttonsContainer.addClassName("wux-controls-loading-panel-buttons-single"),this.elements._playButton.getContent().addClassName("wux-controls-loading-panel-button-hide"),this.elements._pauseButton.getContent().addClassName("wux-controls-loading-panel-button-hide"))},t.prototype._shouldDisplayValueInline=function(e){return"spinner"===e},t.prototype._isValueValid=function(){return"number"==typeof this.value&&this.value>=0&&this.value<=100},t}(s);return a.addClass(m,"loadingPanel"),m}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/ControlsEx/CodeMirror",["require","exports","UWA/Core","DS/Controls/Abstract","DS/Utilities/Dom","DS/Core/WebUXComponents","DS/WebappsUtils/WebappsUtils","DS/CodeMirrorUtils/CodeMirrorUtils"],(function(e,t,i,n,s,o,a,l){"use strict";var r={lineNumbers:!0,theme:"monokai",autoCloseBrackets:!0,tabSize:2,indentUnit:2,indentWithTabs:!0,matchBrackets:!0,matchTags:{bothTags:!0}},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{mode:{defaultValue:void 0,type:"string",category:"Behavior",readOnly:!0},value:{defaultValue:void 0,type:"string",category:"Behavior"},CMOptions:{defaultValue:void 0,type:"object",category:"Behavior"},resizableFlag:{defaultValue:!1,type:"boolean",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){this.elements.container.addClassName("wux-controls-codemirror"),this.elements.inputField=new i.Element("textarea",{type:"text"}),this.elements.inputField.setStyle("display","none"),this.elements.inputField.inject(this.elements.container)},t.prototype._postBuildView=function(){var e=a.getWebappsBaseUrl(),t="object"==typeof this.mode?this.mode.name:this.mode;if(t){l.loadCSSFiles([e+"CodeMirrorV5.47/lib/codemirror.css",e+"CodeMirrorV5.47/addon/hint/show-hint.css",e+"CodeMirrorV5.47/addon/dialog/dialog.css"]);var i=[e+"CodeMirrorV5.47/lib/codemirror.js",e+"CodeMirrorV5.47/addon/edit/closetag.js",e+"CodeMirrorV5.47/addon/hint/anyword-hint.js",e+"CodeMirrorV5.47/addon/hint/show-hint.js",e+"CodeMirrorV5.47/addon/hint/javascript-hint.js",e+"CodeMirrorV5.47/addon/edit/closebrackets.js",e+"CodeMirrorV5.47/addon/edit/matchbrackets.js",e+"CodeMirrorV5.47/addon/search/search.js",e+"CodeMirrorV5.47/addon/search/searchcursor.js",e+"CodeMirrorV5.47/addon/dialog/dialog.js",e+"CodeMirrorV5.47/addon/comment/comment.js",e+"CodeMirrorV5.47/mode/"+t+"/"+t+".js"];l.loadJSFiles(i,this._createCodeMirror.bind(this))}else window.console.error("You must provide a value for mode property")},t.prototype._applyValue=function(){this.elements._codeMirror&&(this._nextChangeIsFromCM?this._nextChangeIsFromCM=!1:(this._nextChangeIsFromThis=!0,this.elements._codeMirror.setValue(this.value),this._nextChangeIsFromThis=!1,this.refresh()),this.fireOnlyFromUIInteractionFlag&&!this._isCurrentlyCalledFromUIInteraction()||this.fire("change"))},t.prototype._applyCMOptions=function(){if(this.CMOptions)for(var e=0,t=Object.entries(this.CMOptions);e<t.length;e++){var i=t[e],n=i[0],s=i[1];this.setCMOption(n,s)}},t.prototype._applyResizableFlag=function(e,t){e!==t&&(t?this.getContent().setAttribute("resize",!0===t?"both":t):this.getContent().removeAttribute("resize"))},t.prototype._applyDisabled=function(t){e.prototype._applyDisabled.call(this,t),this.setCMOption("readOnly",this.disabled)},t.prototype.setCMOption=function(e,t){if("theme"===e){var i=a.getWebappsBaseUrl();l.loadCSSFiles([i+"CodeMirrorV5.47/theme/"+t+".css"])}this.elements._codeMirror&&this.elements._codeMirror.setOption(e,t)},t.prototype._createCodeMirror=function(){var e=this,t=Object.assign({},r);this.CMOptions&&Object.assign(t,this.CMOptions),t.mode=this.mode,t.theme&&t.theme===r.theme&&this.setCMOption("theme",r.theme),this.disabled&&(t.readOnly=!0),this.elements.inputField.value=this.value||"",this.elements._codeMirror=window.CodeMirror.fromTextArea(this.elements.inputField,t),this._heightAtCreation&&this.elements._codeMirror.setSize(null,this._heightAtCreation),s.onNodeRendered(this.getContent(),(function(){e.refresh(),e.fire("dimensionsChanged")})),s.onNodeRendered(this.getContent(),(function(){e.fire("ready")}),{once:!0}),this.elements._codeMirror.on("change",(function(){e._nextChangeIsFromThis||(e._nextChangeIsFromCM=!0,s.pushUserInteractionContext(),e.setPropertyFromUIInteraction("value",e.elements._codeMirror.getValue()),s.popUserInteractionContext())}))},t.prototype.refresh=function(){this.elements._codeMirror&&this.elements._codeMirror.refresh()},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("value")&&this._applyValue(),this.isDirty("CMOptions")&&this._applyCMOptions(),this.isDirty("resizableFlag")&&this._applyResizableFlag(t.resizableFlag,this.resizableFlag)},t.prototype.setHeight=function(e){this.elements._codeMirror?this.elements._codeMirror.setSize(null,e):this._heightAtCreation=e},t}(n);return o.addClass(d,"CodeMirror"),d}));