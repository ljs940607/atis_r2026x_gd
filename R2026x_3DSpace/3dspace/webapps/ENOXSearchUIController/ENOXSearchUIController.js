define("DS/ENOXSearchUIController/ObjectOpenSearchUtil",["UWA/Core","UWA/Utils/InterCom"],(function(e,t){"use strict";return{initialize:function(){this.socketName="search_socket_"+(new Date).getTime(),this.socket=new t.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var e=this;return this.socket.addListener("onCloseTransient",(function(){e.socket.dispatchEvent("UnregisterContext",{widget_id:widget.id})})),this},options:function(t,i,s,c,r,n,o,a,d,h){var l={};return l.title=t,l.mode=o?"default":"furtive",l.app_socket_id=this.socketName,l.widget_id=widget.id,l.default_with_precond=!e.is(d)||d,l.source=h,l.show_precond=!1,l.idcard_activated=a||!1,l.multiSel=!!e.is(r)&&r,l.role=s,l.tenant=widget.data.x3dPlatformId,l.default_search_criteria=c?"("+c+")":"",i?(l.precond="(",Array.isArray(i)||(i=i.split(",")),i.forEach((function(e,t){0!==t&&(l.precond+=" OR "),l.precond+='type:"'+e+'"'})),l.precond+=")",""!==n&&void 0!==n&&(n+l.precond).length<=15884&&(l.precond+=n)):l.precond=n?.length<=15884?n:"",l},destroy:function(){var e={};e.widget_id=widget.id,this.socket.dispatchEvent("unregisterSearchContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.disconnect(),delete this.socket},activate:function(e,t,i,s,c,r,n,o,a,d,h){var l=this.options(e,t,i,s,c,r,n,o,a,d);this.callback=h,this.socket.dispatchEvent("RegisterContext",l),this.socket.dispatchEvent("InContextSearch",l)},isAvailable:function(){return e.is(this.socket)},configureSearch:function(e){this.isAvailable()||this.initialize(e)},launchSearch:function(e){this.activate(e.title,e.allowedTypes,e.role||"",e.criteria,e.multiSel,e.excludeList,e.defaultMode,e.idcard_activated,e.default_with_precond,e.source,(function(t){e.in_apps_callback(t)}))},objectsSelected:function(e){var t,i,s=[];if(this.callback){for(t=0,i=e.length;t<i;t++)s.push(e[t]);this.callback(s)}}}}));