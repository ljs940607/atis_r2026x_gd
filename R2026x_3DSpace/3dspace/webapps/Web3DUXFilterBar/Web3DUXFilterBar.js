/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/Web3DUXFilterBar/Web3DUXFilterBar",["UWA/Core","UWA/Controls/Abstract","DS/Core/PointerEvents","DS/CoreEvents/Events","DS/Visualization/ThreeJS_DS","css!DS/Web3DUXFilterBar/Web3DUXFilterBar.css"],(function(e,t,n,l,a){"use strict";return t.extend({defaultOptions:{body:null,actionBar:null,frmWindow:null,heightElem:"32px",widthElem:"32px",updateVisibilty:!0,typeSeparator:"line",lJsonElement:[],classpanel:"",Idpanel:"",position:null},init:function(t){var i;this._parent(t);let s=t&&t.verticalPanel;var o;if(!0===s&&t.lJsonElement)for(i=0;i<t.lJsonElement.length;i++)"separator"===t.lJsonElement[i].type&&t.lJsonElement.splice(i,1);var r,c,d,p,b,u,g,m=this,h=this.options||{},f=null,y=[],v={},E=null,x=null,w=h.position,W=!1,N=!1;let D;function S(e){e.addClassName("Web3DUXFilterActiveState")}function F(e){e.addClassName("Web3DUXFilterInactiveState")}function U(e){e.removeClassName("Web3DUXFilterActiveState")}function C(e){e.removeClassName("Web3DUXFilterInactiveState")}function k(t){var n=e.createElement("div",{class:"Web3DUXFilterSeparator"}).inject(t);return n.addClassName("bubble"===h.typeSeparator?"Web3DUXFilterBubble":"Web3DUXFilterLine"),n}function A(t,l,a,o){var r=e.createElement("div",{class:s?"Web3DUXFilterNewBtn":"Web3DUXFilterBtn",id:t.id,title:t.nls,styles:{top:a,left:o,height:h.heightElem,width:h.widthElem}}).inject(l),c=new e.Controls.Img({url:t.url,width:"25px",height:"25px"}).inject(r);s?c.elements.container.setStyles({position:"relative",display:"block",padding:"4px"}):c.elements.container.setStyles({position:"absolute",display:"block",padding:"4px"}),v[t.id]=t.callback,y.push(r);var d=new RegExp("Web3DUXFilterActiveState"),p=new RegExp("Web3DUXFilterInactiveState"),b=new RegExp("Web3DUXFilterExcludeType"),u=function(e,t){var n=function(){},l=new RegExp("Web3DUXFilterInactiveState");return t.bexclude&&(n=function(){for(var t=0;t<y.length;t++)e!==y[t]&&(l.test(y[t].className)||(F(y[t]),y[t].bManageOpacity&&(y[t].style.opacity=.5)))}),n}(r,t),g=function(e,t){var n=function(){};return t.bexclude&&(n=function(){for(var t=0;t<y.length;t++)e!==y[t]&&(C(y[t]),y[t].bManageOpacity&&(y[t].style.opacity=1))}),n}(r,t);return r.bManageOpacity=!0,t.bexclude&&(r.addClassName("Web3DUXFilterExcludeType"),r.bManageOpacity=!1,N&&!t.bstateActif&&(U(r),F(r))),t.bstateActif&&S(r),r.addEvent(n.POINTERUP,(function(e){if(p.test(this.className)&&!d.test(this.className)&&t.bexclude){for(C(this),S(this),i=0;i<y.length;i++)r!==y[i]&&b.test(y[i].className)&&(U(y[i]),v[y[i].id]&&v[y[i].id].call(m,e),F(y[i]));t.callback&&t.callback.call(m,e),u&&u.call(m,e)}else if(p.test(this.className)&&!d.test(this.className)&&!t.bexclude||p.test(this.className)&&d.test(this.className)&&!t.bexclude){for(C(this),d.test(this.className)||(S(this),t.callback&&t.callback.call(m,e)),i=0;i<y.length;i++)y[i].style.opacity=1,r!==y[i]&&(d.test(y[i].className)&&(U(y[i]),v[y[i].id]&&v[y[i].id].call(m,e)),p.test(y[i].className)&&C(y[i]));u&&u.call(m,e),x.style.opacity=1}else d.test(this.className)?(U(this),t.callback&&t.callback.call(m,e),g&&g.call(m,e)):(S(this),t.callback&&t.callback.call(m,e),u&&u.call(m,e))})),r.addEvent("mouseenter",(function(){t.onEnterCB&&t.onEnterCB({button:t})})),r.addEvent("mouseleave",(function(){t.onLeaveCB&&t.onLeaveCB({button:t})})),r}function B(){r=[];for(var t,n,l,a=0,i=0;i<h.lJsonElement.length;i++)"separator"===h.lJsonElement[i].type&&a++;(E=e.createElement("div",{id:"Web3DUXFilterMainDiv"+(h.Idpanel?" "+h.Idpanel:""),class:"Web3DUXFilterMainDiv"+(h.classpanel?" "+h.classpanel:"")})).addEvent("dragstart",(function(e){e.preventDefault()})),t="Web3DUXFilterLeftDiv",n=E,(l=e.createElement("div",{html:"",id:t,class:t})).style.display="block",n&&l.inject(n),x=l;for(var s=0;s<a;s++)r.push(k(x));m.setVisibleFlag(!0)}function X(){if(!E)return;p=s?48:40*y.length,E.style.width=p+"px";var e=h.frmWindow.getContent().offsetHeight;u=s?h.body.getStyle("width").replace(/px/g,"")-p:h.body.getStyle("width").replace(/px/g,"")/2-p/2;let t=h.frmWindow.getActionBar();t&&t.elements&&t.elements.container&&t.elements.container.getStyle("height")&&parseInt(t.elements.container.getStyle("height").replace(/px/g,""),10)>0?(c=parseInt(t.elements.container.getStyle("height").replace(/px/g,""),10),t.elements.container.getStyle("bottom")&&(c+=parseInt(t.elements.container.getStyle("bottom").replace(/px/g,""),10)),c+=50,c+=5):c=145,b=s?e-3*c:e-c}function I(e){if(E&&W&&g&&!s){e||(e=window.event);var t=g.distanceToPoint(new a.Vector2(e.pageX?e.pageX:e.clientX,e.pageY?e.pageY:e.clientY)),n=-.005,l=Math.min(1.5+n*t,1);l=Math.max(l,.5),E.style.opacity=l}}D=()=>{if(!E)return;o&&(clearInterval(o),o=null);let e=0;X();let t=t=>{let n=!0;t||e++;var l=0,a=h.frmWindow.getImmersiveFrame().getDockingElement(WUXDockAreaEnum.RightDockArea),s=a.getContainedWindows();if(s&&s.length&&(s[0].isAWindowGroup()&&s[0].getEmbeddedWindows().length||!s[0].isAWindowGroup())){var r=s[0].getEmbeddedWindows?s[0].getEmbeddedWindows():s,c=!1;for(i=0;i<r.length;i++)r[i].visibleFlag&&(c=!0);if(n=c,!t&&o&&e<6&&!c)return;l=c&&!a.collapseDockingZoneFlag?a.dockingZoneSize+a._collapserSize:a._collapserSize}else a.interactiveDockAreaVisibleFlag&&(l=a.dockingZoneSize+a._collapserSize);if(o&&e>5&&(clearInterval(o),o=null),E){let e=u-l+"px",t=h.frmWindow.getViewerFrame().offsetHeight/2-E.clientHeight/2+"px";E.style.left&&E.style.top&&E.style.left===e&&E.style.top===t||E.setStyles({left:e,top:t})}return n};var n=w&&!isNaN(w.x)?w.x:u,l=w&&!isNaN(w.y)?w.y:b;E.style.left=n+"px",E.style.top=l+"px",g=new a.Box2(new a.Vector2(n,l),new a.Vector2(n+p,l+d)),W&&(E.style.opacity=s?1:.5),s&&(h.frmWindow.getContent().offsetHeight<300?E.setStyles({height:"120px"}):E.setStyles({height:"auto"}),t(!0)||(o&&(clearInterval(o),o=null),o=setInterval(t,100)))},this.build=function(){if(N=!1,h.body&&h.lJsonElement&&(!h.lJsonElement||h.lJsonElement.length)){m.clear();var t=[];for(i=0;i<h.lJsonElement.length;i++)"separator"!==h.lJsonElement[i].type&&t.push(h.lJsonElement[i].id),!N&&h.lJsonElement[i].bexclude&&h.lJsonElement[i].bstateActif&&(N=!0);var a=function(e){for(var t=e.length,n=[],l={},a=0;a<t;a++)l[e[a]]=l[e[a]]>=1?l[e[a]]+1:1;for(var i in l)l[i]>1&&n.push(i);return n}(t);if(!a||0===a.length){s?((E=e.createElement("div",{id:"Web3DUXFilterMainDiv"+(h.Idpanel?" "+h.Idpanel:""),class:"Web3DUXFilterMainDiv"+(h.classpanel?" "+h.classpanel:"")})).setStyles({"border-radius":"10px 1px 1px 10px","overflow-y":"auto","border-left":"1px solid","border-right":"1px solid","border-top":"1px solid","box-shadow":"0 0 4px rgba(61, 61, 61, 0.5)","border-color":"#FFFFFF",background:"rgba(255, 255, 255, 1)",border:"1px solid transparent","box-sizing":"border-box"}),E.addEvent("dragstart",(function(e){e.preventDefault()})),x=e.createElement("div").inject(E),h.frmWindow.getImmersiveFrame().addEventListener("freeZoneResize",D),m.setVisibleFlag(!0)):B();var o=x,c=h.lJsonElement.length;d=0;var p,b=0,u=0,g=0,y=0;for(i=0;i<h.lJsonElement.length;i++){var v=-2*(h.lJsonElement.length/2-1)+2*i+(parseInt(h.widthElem,10)+8)*i+y;if(p=i>h.lJsonElement.length/2?-6*(i-h.lJsonElement.length/2):-6*(h.lJsonElement.length/2-1)+6*i,c<=3)u=v;else if(c%2==0)if(i===h.lJsonElement.length/2||i===h.lJsonElement.length/2-1)u=v;else if(i>=h.lJsonElement.length/2){b=p,u=-2*(h.lJsonElement.length/2-1)+2*(i-1)+(parseInt(h.widthElem,10)+8)*i+y}else b=p,u=v;else i===h.lJsonElement.length/2-.5||(b=p),u=v;"separator"===h.lJsonElement[i].type?("bubble"===h.typeSeparator?r[g].style.top=b+15+"px":r[g].style.top=b+"px",r[g].style.left=u+"px",(g>=1&&"bubble"!==h.typeSeparator||"bubble"!==h.typeSeparator)&&(r[g].style.transform="translate3d(0%, 0%, 0px) rotate(-15deg) rotateY(85deg)"),g++,y=-(parseInt(h.widthElem,10)+4)*g):(0===i&&(d=b+36),A(h.lJsonElement[i],o,b+"px",u+"px"))}h.body&&(D(),E&&E.inject(h.body),W=!1,h.updateVisibilty&&h.body.parentNode&&h.body.parentNode.parentNode&&(h.body.parentNode.parentNode.addEvent(n.POINTERMOVE,I),W=!0),f=l.subscribe({event:"/VISU/onWindowResized"},(function(e){"@onWindowResized"===e.eventType&&D()})))}}},this.setPosition=function(e){w=e,D()},this.getActiveState=function(e){if(E){for(var t=new RegExp("Web3DUXFilterActiveState"),n=0;n<y.length;n++)if(y[n].id===e&&t.test(y[n].className))return!0;return!1}},this.setVisibleFlag=function(e){E&&(E.style.display=e?"block":"none"),s&&e&&h.frmWindow.getViewerFrame()&&h.frmWindow.getViewerFrame().addEvent("resize",X),e&&D()},this.getVisibleFlag=function(){return!!E&&"block"===E.style.display},this.clear=function(){y=[],v={},E&&(E.destroy(),E=null),o&&(clearInterval(o),o=null),x&&(x.destroy(),x=null),W&&h.body&&h.body.parentNode&&h.body.parentNode.parentNode&&h.body.parentNode.parentNode.removeEvent(n.POINTERMOVE,I),f&&(l.unsubscribe(f),f=null)}}})})),define("DS/Web3DUXFilterBar/Web3DUXVerticalBar",["UWA/Core","UWA/Controls/Abstract","DS/Core/PointerEvents","DS/CoreEvents/Events","css!DS/Web3DUXFilterBar/Web3DUXFilterBar.css"],(function(e,t,n,l){"use strict";const a="wafr-ui-control-button-active";return t.extend({defaultOptions:{body:null,actionBar:null,frmWindow:null,heightElem:"32px",widthElem:"32px",updateVisibilty:!0,lBottom_content:[],lTop_content:[],classpanel:"",Idpanel:"",position:null},init:function(t){var i;this._parent(t);let s=[];var o,r,c,d,p,b=this,u=this.options||{},g=[],m=[],h=[],f={},y=null,v=null,E=null,x=null,w=u.position,W=!1,N=u.lTop_content,D=!1;let S;function F(e){s&&s.length&&s.forEach((t=>{e.key&&t.event&&e.key.toLowerCase()===t.event.toLowerCase()&&t.callback()}))}for(o=0;o<u.lBottom_content.length;o++)"separator"===u.lBottom_content[o].type&&u.lBottom_content.splice(o,1);function U(e){if(u.lBottom_content)for(var t=0;t<u.lBottom_content.length;t++)if(u.lBottom_content[t].id===e.id){u.lBottom_content[t].bstateActif=!0;break}e.addClassName("Web3DUXFilterActiveState"),A(e)}function C(e){e.addClassName("Web3DUXFilterInactiveState"),k(e)}function k(e){if(e.removeClassName("Web3DUXFilterActiveState"),u.lBottom_content)for(var t=0;t<u.lBottom_content.length;t++)if(u.lBottom_content[t].id===e.id){u.lBottom_content[t].bstateActif=!1;break}}function A(e){e.removeClassName("Web3DUXFilterInactiveState")}h=h.concat(u.lTop_content),g=g.concat(u.lBottom_content);let B=function(){return S=Boolean("wafr"===require("DS/PADUtils/PADSettingsMgt").getSetting("eno3dviewer_infrastructure_version")),S};function X(t,l,o,r){var c;return document.addEventListener("keydown",F),B()?(c=e.createElement("div",{class:"wafr-ui-control-button",id:t.id,title:t.nls,styles:{top:o,left:r,height:u.heightElem,width:u.widthElem}}).inject(l),"separator"===t.id?(i=c).addClassName("Web3DUXVerticalBarAssitantSepBtn"):(c.addClassName("wafr-ui-control"),c.addClassName("wafr-ui-control-button"),c.addClassName("wafr-ui-control-button-default"),c.addClassName("Web3DUXVerticalBarAssitantBtn"),c.addClassName("wafr-ui-control-enable"),t.bstateActif&&c.addClassName(a)),t.bstateActif&&c.addClassName("Web3DUXAssToolsActiveState"),new e.Controls.Img({url:t.url}).inject(c).elements.container.addClassName("temp")):(c=e.createElement("div",{class:"Web3DUXVerticalBarAssitantBtnOld",id:t.id,title:t.nls,styles:{top:o,left:r,height:u.heightElem,width:u.widthElem}}).inject(l),"separator"===t.id?((i=c).addClassName("Web3DUXVerticalBarAssitantSepBtnOld"),i.removeClassName("Web3DUXVerticalBarAssitantBtnOld")):c.addClassName("Web3DUXVerticalBarAssitantBtnOld"),t.bstateActif&&c.addClassName("Web3DUXAssToolsActiveState"),new e.Controls.Img({url:t.url}).inject(c).elements.container.setStyles({width:"25px",height:"25px",margin:"3px",padding:"0.25px"})),m.push(c),t.callback&&(c.addEvent(n.POINTERUP,(function(e){"boolean"==typeof t.bstateActif&&(this.hasClassName(a)?this.removeClassName(a):this.addClassName(a),this.hasClassName("Web3DUXAssToolsActiveState")?this.removeClassName("Web3DUXAssToolsActiveState"):this.addClassName("Web3DUXAssToolsActiveState")),t.callback&&t.callback.call(e)})),t.triggerEvent&&s.push({event:t.triggerEvent,callback:t.callback})),c}function I(t,l,a,i){var s=e.createElement("div",{class:"Web3DUXVerticalBarBtn",id:t.id,title:t.nls,styles:{top:a,left:i,height:u.heightElem,width:u.widthElem}}).inject(l);new e.Controls.Img({url:t.url,width:"32px",height:"32px"}).inject(s).elements.container.setStyles({position:"relative",display:"block",padding:"4px"}),f[t.id]=t.callback,m.push(s);var r=new RegExp("Web3DUXFilterActiveState"),c=new RegExp("Web3DUXFilterInactiveState"),d=new RegExp("Web3DUXFilterExcludeType"),p=function(e,t){var n=function(){},l=new RegExp("Web3DUXFilterInactiveState");return t.bexclude&&(n=function(){for(var t=0;t<m.length;t++)e!==m[t]&&(l.test(m[t].className)||(C(m[t]),m[t].bManageOpacity&&(m[t].style.opacity=.5)))}),n}(s,t),g=function(e,t){var n=function(){};return t.bexclude&&(n=function(){for(var t=0;t<m.length;t++)e!==m[t]&&(A(m[t]),m[t].bManageOpacity&&(m[t].style.opacity=1))}),n}(s,t);return s.bManageOpacity=!0,t.bexclude&&(s.addClassName("Web3DUXFilterExcludeType"),s.bManageOpacity=!1,D&&!t.bstateActif&&(k(s),C(s))),t.bstateActif&&U(s),s.addEvent(n.POINTERUP,(function(e){if(c.test(this.className)&&!r.test(this.className)&&t.bexclude){for(p&&p.call(b,e),A(this),U(this),o=0;o<m.length;o++)s!==m[o]&&d.test(m[o].className)&&(k(m[o]),f[m[o].id]&&f[m[o].id].call(b,e),C(m[o]));t.callback&&t.callback.call(b,e)}else if(c.test(this.className)&&!r.test(this.className)&&!t.bexclude||c.test(this.className)&&r.test(this.className)&&!t.bexclude){for(p&&p.call(b,e),A(this),r.test(this.className)||(U(this),t.callback&&t.callback.call(b,e)),o=0;o<m.length;o++)m[o].style.opacity=1,s!==m[o]&&(r.test(m[o].className)&&(k(m[o]),f[m[o].id]&&f[m[o].id].call(b,e)),c.test(m[o].className)&&A(m[o]));E.style.opacity=1}else r.test(this.className)?(k(this),g&&g.call(b,e),t.callback&&t.callback.call(b,e)):(U(this),p&&p.call(b,e),t.callback&&t.callback.call(b,e))})),s.addEvent("mouseenter",(function(){t.onEnterCB&&t.onEnterCB({button:t})})),s.addEvent("mouseleave",(function(){t.onLeaveCB&&t.onLeaveCB({button:t})})),s}function V(e){x&&(x.style.display=e?"block":"none")}function _(){return h&&h.length&&g&&g.length}function T(){if(!v)return;52,v.style.width="52px";var e=u.frmWindow.getContent().offsetHeight;p=u.body.getStyle("width").replace(/px/g,"")-52;let t=u.frmWindow.getActionBar();t&&t.elements&&t.elements.container&&t.elements.container.getStyle("height")&&parseInt(t.elements.container.getStyle("height").replace(/px/g,""),10)>0?(c=parseInt(t.elements.container.getStyle("height").replace(/px/g,""),10),t.elements.container.getStyle("bottom")&&(c+=parseInt(t.elements.container.getStyle("bottom").replace(/px/g,""),10)),c+=50,c+=5):c=145,d=e-3*c}function J(){h.length||g.length?_()?i&&(b.build(),i.style.display="block"):(b.build(),i&&(i.style.display="none")):b.clear()}this._updatePosition=function(){if(!v)return;r&&(clearInterval(r),r=null);let e=0;T();let t=t=>{let n=!0;t||e++;var l=0,a=u.frmWindow.getImmersiveFrame().getDockingElement(WUXDockAreaEnum.RightDockArea),i=a.getContainedWindows();if(i&&i.length&&(i[0].isAWindowGroup()&&i[0].getEmbeddedWindows().length||!i[0].isAWindowGroup())){var s=i[0].getEmbeddedWindows?i[0].getEmbeddedWindows():i,c=!1;for(o=0;o<s.length;o++)s[o].visibleFlag&&(c=!0);if(n=c,!t&&r&&e<6&&!c)return;l=c&&!a.collapseDockingZoneFlag?a.dockingZoneSize+a._collapserSize:a._collapserSize}else a.interactiveDockAreaVisibleFlag&&(l=a.dockingZoneSize+a._collapserSize);if(r&&e>5&&(clearInterval(r),r=null),v){let e=p-l+"px",t=u.frmWindow.getViewerFrame().offsetHeight/2-v.clientHeight/2+"px";v.style.left&&v.style.top&&v.style.left===e&&v.style.top===t||v.setStyles({left:e,top:t})}return n};var n=w&&!isNaN(w.x)?w.x:p,l=w&&!isNaN(w.y)?w.y:d;v.style.left=n+"px",v.style.top=l+"px",W&&(v.style.opacity=1),u.frmWindow.getContent().offsetHeight<300?v.setStyles({height:"120px"}):v.setStyles({height:"auto"}),t(!0)||(r&&(clearInterval(r),r=null),r=setInterval(t,100))},this.build=function(){if(D=!1,u.body){var a;b.clear(),function(){v||((v=e.createElement("div",{id:"Web3DUXVerticalMainDiv"+(u.Idpanel?" "+u.Idpanel:""),class:"Web3DUXVerticalMainDiv"+(u.classpanel?" "+u.classpanel:"")+" Web3DUXFilterMainDiv"})).addEvent("dragstart",(function(e){e.preventDefault()})),v.setStyles({"border-radius":"10px 1px 1px 10px","overflow-y":"auto","overflow-x":"hidden","border-left":"1px solid","border-right":"1px solid","border-top":"1px solid","box-shadow":"0 0 4px rgba(61, 61, 61, 0.5)","border-color":"#FFFFFF",background:"rgba(255, 255, 255, 1)",border:"1px solid transparent",display:"block","box-sizing":"border-box"})),x||(x=e.createElement("div",{class:"Web3DUXAssToolsMainDiv"}).inject(v)),x.style.display="block",E||(E=e.createElement("div").inject(v)),E.style.display="block",B()?E.style.padding="0px":E.style.margin="4px";let t=h.length;t>0&&!_()&&(t-=1),0===t?V(!1):1===t?x.setStyles({height:"45px"}):2===t?x.setStyles({height:39*t+"px"}):x.setStyles({height:37*t+"px"}),u.frmWindow.getImmersiveFrame().addEventListener("freeZoneResize",b._updatePosition)}();var i,r=E,c=g.length,d=0,p=0;for(o=0;o<g.length;o++)B()?(a=3.5,i=(g.length,0),c<=3?p=a:c%2==0?o===g.length/2||o===g.length/2-1?p=a:o>=g.length/2?(d=i,p=3.5):(d=i,p=a):(o===g.length/2-.5||(d=-i),p=a)):(a=0,i=(g.length,0),c<=3?p=a:c%2==0?o===g.length/2||o===g.length/2-1?p=a:o>=g.length/2?(d=i,p=0):(d=i,p=a):(o===g.length/2-.5||(d=-i),p=a)),I(t.lBottom_content[o],r,d+"px",p+"px");!function(){if(!h||!h.length)return;var e=0,t=0,a=h.length;if(h&&0!==h.length)for(s=[],o=0;o<a;o++)t="separator"===h[o].id?6:8,e="OK"===h[o].id?2:-2*(a/2-1)+2*o+(parseInt(u.heightElem,10)+12)*o/1.235,X(h[o],x,e+"px",t+"px");u.body&&(b._updatePosition(),v&&v.inject(u.body),W=!1,u.updateVisibilty&&u.body.parentNode&&u.body.parentNode.parentNode&&(u.body.parentNode.parentNode.addEvent(n.POINTERMOVE,b._updatePosition),W=!0),y=l.subscribe({event:"/VISU/onWindowResized"},(function(e){"@onWindowResized"===e.eventType&&b._updatePosition()})))}(),u.body&&(b._updatePosition(),v&&v.inject(u.body),W=!1,u.updateVisibilty&&u.body.parentNode&&u.body.parentNode.parentNode&&(u.body.parentNode.parentNode.addEvent(n.POINTERMOVE,b._updatePosition),W=!0),y=l.subscribe({event:"/VISU/onWindowResized"},(function(e){"@onWindowResized"===e.eventType&&b._updatePosition()})))}},this.addButton=function(e){e.id&&h.push(e)},this.removeButtons=function(e){if(Array.isArray(e)){var t=e.slice();for(t.sort((function(e,t){return e-t})),o=t.length-1;o>=0;o--)t[o]>=0&&t[o]<N.length&&N.splice(t[o],1)}},this.setPosition=function(e){w=e,this._updatePosition()},this.getActiveState=function(e){if(v){for(var t=new RegExp("Web3DUXFilterActiveState"),n=0;n<m.length;n++)if(m[n].id===e&&t.test(m[n].className))return!0;return!1}},this.setVisibleBottomContentFlag=function(e){u.lBottom_content&&u.lBottom_content.length&&(g=e?(g=[]).concat(u.lBottom_content):[],function(e){E&&(E.style.display=e?"block":"none")}(e),J(),e&&u.frmWindow.getViewerFrame()&&u.frmWindow.getViewerFrame().addEvent("resize",T))},this.setVisibleTopContentFlag=function(e){u.lTop_content&&u.lTop_content.length&&(h=e?(h=[]).concat(u.lTop_content):[],V(e),J(),e&&u.frmWindow.getViewerFrame()&&u.frmWindow.getViewerFrame().addEvent("resize",T))},this.setTopContent=e=>{i=void 0,u.lTop_content=e,h=(h=[]).concat(u.lTop_content),this.build(),b.setVisibleTopContentFlag(!0)},this.getVisibleBottomContent=function(){return!!E&&"block"===v.style.display},this.getVisibleTopContent=function(){return!!x&&"block"===x.style.display},this.clear=function(){m=[],f={},document.removeEventListener("keydown",F),s=[],x&&(x.destroy(),x=null),E&&(E.destroy(),E=null),v&&(v.destroy(),v=null),r&&(clearInterval(r),r=null),y&&(l.unsubscribe(y),y=null)},this.getPanelPosition=function(){let e={left:0,top:0};if(v&&v.getStyle()){let t=v.getStyle("left"),n=v.getStyle("top");t&&(e.left=parseInt(t.replace(/px/g,""))),n&&(e.top=parseInt(n.replace(/px/g,"")))}return e}}})}));