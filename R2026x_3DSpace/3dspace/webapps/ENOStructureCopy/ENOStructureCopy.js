define("DS/ENOStructureCopy/ENOStructureCopy",["UWA/Core","UWA/Controls/Abstract","DS/ENOStructureCopy/views/ENOAWLNFTreeView","DS/ENOStructureCopy/models/ENOAWLNFCollection","DS/ENOStructureCopy/models/ENOAWLNFModel","DS/ENOStructureCopy/models/ENOAWLNFConfigCollection","DS/ENOStructureCopy/models/ENOAWLNFSECopyModel","DS/ENOStructureCopy/utils/ENOAWLNFConstants","DS/ENOStructureCopy/utils/ENOAWLNFUtil","DS/ENOStructureCopy/utils/RequestUtils","i18n!DS/ENOStructureCopy/assets/nls/ENOStructureCopyNLS","css!DS/ENOStructureCopy/ENOStructureCopy"],(function(t,e,i,n,o,s,E,r,u,c,l){"use strict";return e.extend({collection:null,view:null,init:function(e){this._parent(e),this.elements.mContainer=new t.Element("div",{class:"awl-nutritionfacts-app"}),this.container=this.elements.mContainer;var i=this;i.loadConfiguration((function(){i.render()}))},loadConfiguration:function(t){c.send3DSpaceRequest(c.getAWLServiceUrl()+r.STRUCTURE_APPLICATION_CONFIG_ENDPOINT,"GET",{type:"json",headers:{"Content-type":"application/json"}},(function(e){c.set3DSpaceCSRFToken(e.csrf),t()}),(function(){t()}))},render:function(){this.languagemodel=new E({id:this.options.nutritionId}),this.languagemodel.fetch({onComplete:this.initDetailedView.bind(this),onFailure:this.initErrorView.bind(this)}),this.mListener=new t.Class.Listener},initErrorView:function(){this.elements.mContainer=new t.Element("div",{class:"awl-nutritionfacts-errorview",html:l.LoadingError}).inject(this.container)},initDetailedView:function(){this.nutritionconfig=new s({type:this.languagemodel.get("structuretype")}),this.nutritionconfig.fetch(),this.collection=new n({id:this.options.nutritionId}),this.collection.fetch(),this.view=new i({model:this.collection,nutritionconfig:this.nutritionconfig,languagemodel:this.languagemodel,frameName:this.options.frameName}),this.view.inject(this.container),this.view.listenTo(this.view,r.EVENT_MASTER_CREATE,this.nutritionCreateAction.bind(this)),this.view.listenTo(this.view,r.EVENT_MASTER_DELETE,this.elementDeletionAction.bind(this)),this.view.listenTo(this.view,r.EVENT_ELEMENT_UPDATE,this.elementUpdateAction.bind(this)),this.view.listenTo(this.view,r.EVENT_TASK_PROMOTE_DEMOTE,this.taskPromoteDemoteAction.bind(this))},nutritionCreateAction:function(t){var e=new o;u.objectToModel(e,t),e.set("structureid",this.options.nutritionId),e.createNutritionElement(this.onNutritionCreateSucess.bind(this),this.onNutritionCreateFailure.bind(this))},elementUpdateAction:function(t){var e=new o;u.objectToModel(e,t),e.updateCopyText(this.onElementUpdateSucess.bind(this),this.onElementUpdateFailure.bind(this))},elementDeletionAction:function(t){var e=new o;u.objectToModel(e,t),e.deleteNutritionElments(this.onElementDeletionSucess.bind(this),this.onElementDeletionFailure.bind(this))},taskPromoteDemoteAction:function(t){var e=new o;u.objectToModel(e,t),e.taskAction(this.taskPromoteDemoteSucess.bind(this),this.taskPromoteDemoteFailure.bind(this))},onNutritionCreateSucess:function(t){this.view.dispatchEvent(r.EVENT_MASTER_CREATE_SUCESS,t)},onNutritionCreateFailure:function(t){this.view.dispatchEvent(r.EVENT_MASTER_CREATE_FAILURE,t)},onElementDeletionSucess:function(t){this.view.dispatchEvent(r.EVENT_MASTER_DELETE_SUCESS,t)},onElementDeletionFailure:function(t){this.view.dispatchEvent(r.EVENT_MASTER_DELETE_FAILURE,t)},onElementUpdateSucess:function(t){this.view.dispatchEvent(r.EVENT_ELEMENT_UPDATE_SUCESS,t)},onElementUpdateFailure:function(t){this.view.dispatchEvent(r.EVENT_ELEMENT_UPDATE_FAILURE,t)},taskPromoteDemoteSucess:function(t){this.view.dispatchEvent(r.EVENT_TASK_PROMOTE_DEMOTE_SUCESS,t)},taskPromoteDemoteFailure:function(t){this.view.dispatchEvent(r.EVENT_TASK_PROMOTE_DEMOTE_FAILURE,t)}})}));