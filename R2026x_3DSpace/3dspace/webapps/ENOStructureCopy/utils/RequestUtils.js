define("DS/ENOStructureCopy/utils/RequestUtils",["UWA/Class","DS/WAFData/WAFData"],(function(e,t){"use strict";return e.singleton({awlApplicationPath:"awl",m3DSpaceURL:"../..",mUserLogin:"",m3DSpaceCSRFToken:"",mLanguage:null,init:function(){return this},configure:function(e,t){this.m3DSpaceURL=e,this.mUserLogin=t},getAWLServiceUrl:function(){return"resources/"+this.awlApplicationPath+"/"},get3DSpaceURL:function(){return this.m3DSpaceURL},getUserLogin:function(){return this.mUserLogin},set3DSpaceCSRFToken:function(e){this.m3DSpaceCSRFToken=e},get3DSpaceCSRFToken:function(){return this.m3DSpaceCSRFToken},send3DSpaceRequest:function(e,t,n,i,a){this.sendRequest(this.m3DSpaceURL+"/"+e,t,n,i,a)},send3DSpaceRequestSimple:function(e,t){this.sendRequestSimple(this.m3DSpaceURL+"/"+e,t)},sendRequest:function(e,t,n,i,a){n.method=t,n.onComplete=i,n.onFailure=a,this.sendRequestSimple(e,n)},sendRequestSimple:function(e,n){return n.headers||(n.headers={},n.headers["Content-type"]="text/html"),n.type||(n.type="text"),n.data||(n.data=""),this.m3DSpaceCSRFToken&&(n.headers["X-Requested-With"]="csrf protection",n.headers["X-Request"]=this.m3DSpaceCSRFToken),n.timeout=6e5,t.authenticatedRequest(e,n)},getLanguage:function(){if(this.mLanguage)return this.mLanguage;try{if(window.parent&&window.parent.dsLang)return window.parent.dsLang;if(widget)return widget.lang}catch(e){}var e="en";return(e=navigator.browserLanguage?navigator.browserLanguage:navigator.language).indexOf("fr")>-1?"fr":e.indexOf("en")>-1?"en":e.indexOf("es")>-1?"es":e.indexOf("it")>-1?"it":e.indexOf("de")>-1?"de":e.indexOf("ja")>-1?"ja":e.indexOf("zh")>-1?"zh":"en"},initLanguage:function(e){var t=this;this.send3DSpaceRequestSimple(this.getMerchWebServiceUrl()+"application/language",{method:"GET",type:"json",headers:{"Content-type":"application/json"},onComplete:function(n){require.config({config:{i18n:{locale:n.language}}}),t.mLanguage=n.language,e()}})}})}));