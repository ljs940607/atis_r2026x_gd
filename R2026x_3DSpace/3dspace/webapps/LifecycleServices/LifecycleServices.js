define("DS/LifecycleServices/CompareImgSrc",[],(function(){var e={VPMReference:"I_VPMNavProduct.png","3DShape":"I_Part.png",CATPart:"I_DECPrtCV5.png",CATProduct:"I_DECAsmCV5.png","CATIA Embedded Component":"I_DECAsmCV5.png",Drawing:"I_VPMNavDrawing.png",ENOStrRefinementSpecification:"I_AdvancedFilter32.png",Workspace:"I_TeamWorkspace.png"},t={ENOStrRefinementSpecification:"I_AdvancedFilter144.png",Workspace:"I_TeamWorkspace108x144.png"},n="common/images/",i={Default:"iconSmallDefault.gif",CATShape:"iconSmallCATShape.gif","CATIA CGR":"iconSmallCATIACGR.gif",CATProcess:"iconSmallCATProcess.gif",CATDrawing:"iconSmallCATDrawing.gif","CATIA Design Table":"iconSmallCATIADesignTable.gif","CATIA V4 Model":"iconSmallCATIAV4Model.gif",CATAnalysis:"iconSmallCATAnalysis.gif",CATAnalysisResults:"iconSmallCATAnalysisResults.gif",CATAnalysisComputations:"iconSmallCATAnalysisComputations.gif",Missing:"utilUploadStop.gif"};return{getObjTypeIconPath:function(t){return void 0!==e[t]?"snresources/images/icons/small/"+e[t]:void 0!==i[t]?n+i[t]:n+i.Default},getObjTypeLargeIconPath:function(e){var n=null;return null!=t[e]&&(n="snresources/images/icons/large/"+t[e]),n},defaultThumbnailPath:"/webapps/W3DSpace/assets/img/big/I_DefaultThumbnail.png",thumbnailUrlPath:"/resources/compare/thumbnailUrl/",iconUrlPath:"/resources/compare/icon/"}})),define("DS/LifecycleServices/NotificationPublish",["UWA/Core","DS/PlatformAPI/PlatformAPI"],(function(e,t){"use strict";return{publish:function(n,i){var r;r=e.is(i,"string")?i:JSON.stringify(i),t.publish(n,r),t.publish("webinwin:web:notification",r)}}})),define("DS/LifecycleServices/LifecycleServicesSettings",["UWA/Class","UWA/Class/Options","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/PlatformAPI/PlatformAPI","DS/WAFData/WAFData"],(function(e,t,n,i,r){"use strict";var o,s={CATIAV5:{name:"CATIAV5",require:"DS/ENOXCADCATIAV5UI/ENOXCADFileNameValidation"}},a=null;try{require(["DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext"],(function(e){o=e}),(function(){console.log("LifecycleServicesSettings: CfgAuthoringContext not available.")}))}catch(e){console.log("LifecycleServicesSettings: exception loading CfgAuthoringContext.")}var c=e.singleton(t,{folder_json:null,tenant:"",options:{wintop:!1},init:function(e){this._parent(),this._roles=null,this._userInfo=null},instance:function(){return this},getTenant:function(){return this.tenant},setTenant:function(e){this.tenant=e},getInstance:function(e){try{this.init(e)}catch(e){}for(var t in e)this.options[t]=e[t];return this},get3DSpaceUrl:function(e){var t=location.protocol+"//"+location.hostname,n="3DSpace";return e&&(e.serverUrl=t,e.serverUri=n),t+"/"+n},get3DSpaceBaseUrl:function(e){if(!UWA.is(this.getOption("platform_services"),"array"))throw new Error("Platform services not initialize yet");var t;try{for(var n=0;n<this.getOption("platform_services").length;n++)if(this.getOption("platform_services")[n].platformId==e){t=this.getOption("platform_services")[n]["3DSpace"];break}}catch(e){t=this.get3DSpaceUrl()}return t},get3DSpaceWSUrl:function(e,t,n){e&&""!=e||(e=widget.getValue("x3dPlatformId")||"OnPremise");var i=this.get3DSpaceBaseUrl(e)+t+(t.indexOf("?")<0?"?":"&")+"tenant="+e;return null!=n&&null!=n&&(i=i+"&"+n),i},getServerURL:function(){var e="";return n.getPlatformServices({onComplete:function(t){e=t[0]["3DSpace"]}}),e},getPlatformUrl:function(e,t){var n=location.protocol+"//"+location.hostname,i=e;return t&&(t.serverUrl=n,t.serverUri=i),n+"/"+i},getPlatformBaseUrl:function(e,t){if(!UWA.is(this.getOption("platform_services"),"array"))throw new Error("Platform services not initialize yet");var n;try{for(var i=0;i<this.getOption("platform_services").length;i++)if(this.getOption("platform_services")[i].platformId==t){n=this.getOption("platform_services")[i][e];break}}catch(e){n=this.getPlatformUrl()}return n},getPlatformWSUrl:function(e,t,n,i){null!=t&&null!=t&&""!=t||(t="OnPremise");var r=this.getPlatformBaseUrl(e,t)+n+"?tenant="+t;return null!=i&&null!=i&&(r=r+"&"+i),r},app_initialization:function(e,t){var i=this,r=!1;try{UWA.is(this.getOption("platform_services"),"array")||(r=!0)}catch(e){r=!0}r?t?(i.setOption("platform_services",t),e()):n.getPlatformServices({onComplete:function(t){i.setOption("platform_services",t),void 0!==window.widget&&window.widget&&void 0!==window.widget.getValue("x3dPlatformId")&&window.widget.getValue("x3dPlatformId")&&window.widget.getValue("x3dPlatformId").trim().length>0?i.tenant=window.widget.getValue("x3dPlatformId"):i.tenant=t[0].platformId,i.getEnforceFolderLinkSetting(),e()},onFailure:function(t){e()}}):e()},setFolderCommunicationChannel:function(e){e&&e.getCurrentFolder&&this.setCurrentFolder(e.getCurrentFolder()),i.subscribe("FolderEditor.CurrentFolder",this.setCurrentFolder.bind(this)),i.subscribe("FolderEditor.ActiveFolder",(function(e){void 0===e.origin?a=e:widget.id===e.origin&&""==(a=e).id&&(a.id=null),require(["DS/LifecycleServices/LifecycleServicesSettings"],(function(e){e.getActiveFolder=function(){return a}}))})),require(["DS/PlatformAPI/PlatformAPI"],(function(e){e.publish("FolderEditor.ActiveFolderCallBack",null)}))},setCurrentFolder:function(e){this.folder_json=JSON.parse(e)},getCurrentFolderID:function(){return null!=this.folder_json&&this.folder_json.hasOwnProperty("FolderID")?this.folder_json.FolderID:null},getCurrentFolderSecurityContext:function(){return null!=this.folder_json&&this.folder_json.hasOwnProperty("SecurityContext")?this.folder_json.SecurityContext:null},hasPARRole:function(e){var t=this;void 0===t._hasPARRole?(t._hasPARRole=!1,this.hasRole((n=>{t._hasPARRole=n,e(t._hasPARRole)}),["InternalDS","PAR","PAU","UWE"])):e(t._hasPARRole)},getGrantedRoles:function(e){let t=this;if(Array.isArray(this._roles)&&this._roles.length)e(this._roles);else try{n.getGrantedRoles((function(n){t._roles=n,e(t._roles)}))}catch(t){e([])}},hasRole:function(e,t){var n=!1;this.getGrantedRoles((i=>{for(var r=0;r<i.length&!n;r++)for(var o=0;o<t.length;o++)if(i[r]&&i[r].id===t[o]){n=!0;break}e(n)}))},getServices:function(){return this.options.wintop?(void 0!==this.options.platform_services&&this.options.platform_services.length>0&&void 0!==this.options.platform_services[0].platformId&&(this.tenant=this.options.platform_services[0].platformId),c.getInstance(this.options)):c},getEnforceFolderLinkSettingAsync:function(e){if(void 0!==this._enforceFolderLink)e(null,this._enforceFolderLink);else{if(void 0!==this._enforceFolderLinkReturned&&0==this._enforceFolderLinkReturned)return void e(null,this._enforceFolderLink);this._enforceFolderLinkReturned=!1;var t=this.getServices().get3DSpaceWSUrl(this.tenant,"/resources/lifecycle/product/getEnforceFolderSetting",null),n=this,i={type:"json",method:"POST",proxy:"passport",authentication:"passport",data:UWA.Json.encode(""),headers:c.getHeaders(),onComplete:function(t){n._enforceFolderLinkReturned=!0;var i=t.result;i&&"true"===i&&(n._enforceFolderLink=!0),i&&"false"===i&&(n._enforceFolderLink=!1),e(null,n._enforceFolderLink)},onFailure:function(t){n._enforceFolderLinkReturned=!0,console.log("getEnforceFolderLinkSetting: Failure..."+t),e("getEnforceFolderLinkSetting: Failure..."+t)},onTimeout:function(){n._enforceFolderLinkReturned=!0,console.log("getEnforceFolderLinkSetting: A connection timeout occured."),e("getEnforceFolderLinkSetting: A connection timeout occured.")}};r.handleRequest(t,i)}},getEnforceFolderLinkSetting:function(){return void 0!==this._enforceFolderLink?this._enforceFolderLink:void this.getEnforceFolderLinkSettingAsync((function(){}))},isLogicalDeleteActive:function(e){e(!1)},getHeaders:function(e){var t={Accept:"application/json","Content-Type":"application/json","Accept-Language":widget.lang};if(e&&(t.SecurityContext=encodeURIComponent(decodeURIComponent(e))),o)try{var n=o.get();n.change.id.length>0&&(t["DS-Change-Authoring-Context"]="pid:"+n.change.id),n.evolution.id.length>0&&(t["DS-Configuration-Authoring-Context"]="pid:"+n.evolution.id)}catch(e){}return t},isOpenWithCATIAV5Available:function(e){this.hasPARRole(e)},getCADvalidityService:function(e){return new Promise((function(t,n){var i=s[e];if(null!=i){var r=i.require;require([r],(function(e){t(e)}),(function(){n("No Mapping found")}))}else n("No Mapping found")}))},getCurrentUserPromise:function(){return new Promise(((e,t)=>{null!=this.userInfo?e(userInfo):n.getUser({onComplete:e,onFailure:()=>{}})}))}});return c})),define("DS/LifecycleServices/NewBranchObjectProp",["i18n!DS/LifecycleServices/assets/nls/LifecycleServicesNls","UWA/Core","UWA/Controls/Abstract","DS/EditPropWidget/facets/Properties/Properties","DS/EditPropWidget/models/EditPropAttributeModel","DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/utils/AttributesUtils"],(function(e,t,n,i,r,o,s){"use strict";return n.extend({defaultOptions:{className:"newbranchobjectprop",data_rec_id:"newbranchobjectprop-id",showTitle:!1,showProposedRevision:!1,editable:!1},init:function(e){this._parent(e),this.propUI=null,this.model=null,this._currentIntent=null,this.attributes=null,this.container=UWA.createElement("div",{name:"newbranch_prop",class:this.options.className})},getComputedMinHeight:function(){return this._min_height},isIntentModified:function(){if(null==this.model)return!1;var e=null,t=this.model.getChangedValues();return t.hasOwnProperty("intentsList")&&(e=t.intentsList),null!=e&&e.modified},getIntent:function(){return this._currentIntent},getErrors:function(){if(!this.model||!this.attributes)return null;var e=[];return this.attributes.forEach((t=>{var n=s.validateAttributes(this.model,[t]);if(n&&n.length&&"ERROR"===n[0].code){var i=t.label;(i=i?i.toLowerCase():"")&&n[0].message&&(n[0].message=n[0].message.replaceAll(i,t.label)),e.push(n[0])}})),e},_onObjectAttributeValueHasChanged:function(e,t,n,i){let r=n&&n.volatile;if(i&&r&&e.volatileAttributes&&e.volatileAttributes.hasOwnProperty(t))delete e.volatileAttributes[t];else if(i&&e.modifiedAttributes&&e.modifiedAttributes.hasOwnProperty(t))delete e.modifiedAttributes[t];else if(!i){r&&!e.volatileAttributes?e.volatileAttributes={}:e.modifiedAttributes||(e.modifiedAttributes={}),r?e.volatileAttributes[t]=n.valueDB:e.modifiedAttributes[t]=n.valueDB;var o=s.validateAttributes(this.model,[n]);if(null!=o&&o.length>0){var a=n.label;return(a=a?a.toLowerCase():"")&&o[0]&&o[0].message&&(o[0].message=o[0].message.replaceAll(a,n.label)),void this.dispatchEvent("onAttributeValidationError",[o])}"function"!=typeof n.onAttributeValueChanged||n.onAttributeValueChanged(e,t,n,i)}},setObject:function(t,n,s){var a=0,c={},l=this,u=[];if(t.hasOwnProperty("attributes_mask")&&(u=t.attributes_mask),this.options.showTitle){var d="",f="",p="",h=!0,g=null;t["attribute[PLMEntity.V_Name]"]&&(f="attribute[PLMEntity.V_Name]"),t["attribute[PLMEntity.V_Name]"]&&(p="PLMEntity.V_Name"),t["attribute[PLMEntity.V_Name]"]&&(d=t["attribute[PLMEntity.V_Name]"]),t.Title&&(f="Title"),t.Title&&(p="Title"),t.Title&&(d=t.Title),t.computedLabel&&t.computedLabel.selectable&&(f=t.computedLabel.selectable),t.computedLabel&&t.computedLabel.path&&(p=t.computedLabel.path),t.computedLabel&&t.computedLabel.value&&t.computedLabel.value.length>=1&&(d=t.computedLabel.value[0]);u=[];if(t.hasOwnProperty("attributes_mask")&&(u=t.attributes_mask),u.forEach((function(e){e.selectable==f&&(g=e),e.selectable==f&&!0===e.readOnly&&(h=!1)})),t.hasOwnProperty("modifiedAttributes")&&t.modifiedAttributes.hasOwnProperty(p)&&(d=t.modifiedAttributes[p]),h){var v=new r({name:"title",path:"title",label:e.title,valueDB:d,maxlength:100,readOnly:!1});g&&g.forbiddenChar&&v.set("forbiddenChar",g.forbiddenChar),v.saveInitialValues(),c[v.name]=v,a+=46}else{v=new r({name:"title",path:"title",label:e.title,value:d});c[v.name]=v,a+=28}}if(this.options.showProposedRevision){var m=t.proposedRevision;t.hasOwnProperty("modifiedAttributes")&&t.modifiedAttributes.hasOwnProperty("revision")&&(m=t.modifiedAttributes.revision);var y=!1,S=null;if(u.forEach((function(e){"revision"==e.selectable&&(S=e),"revision"==e.selectable&&!1===e.readOnly&&(y=!0)})),y){b=new r({name:"proposedRevision",path:"proposedRevision",label:e.proposedRevision,valueDB:m,readOnly:!1});S&&S.forbiddenChar&&b.set("forbiddenChar",S.forbiddenChar),b.saveInitialValues(),c[b.name]=b,a+=46}else{var b=new r({name:"proposedRevision",path:"proposedRevision",label:e.proposedRevision,value:m});c[b.name]=b,a+=28}}var A={};if(u.forEach((function(e){if("revision"!=e.selectable&&e.selectable!=f){var n="",i=!1,o=!1,s=!1,l=void 0;if(e.hasOwnProperty("multiline")&&(o=e.multiline),e.hasOwnProperty("value")&&(n=e.value),e.hasOwnProperty("readOnly")&&(i=!e.readOnly),e.hasOwnProperty("volatile")&&(s=e.volatile),e.hasOwnProperty("onAttributeValueChanged")&&(l=e.onAttributeValueChanged),s&&t.volatileAttributes&&t.volatileAttributes.hasOwnProperty(e.path)?n=t.volatileAttributes[e.path]:t.modifiedAttributes&&t.modifiedAttributes.hasOwnProperty(e.path)&&(n=t.modifiedAttributes[e.path]),A[e.selectable]=e.path,i){u=new r({name:e.selectable,path:e.selectable,label:e.nls,valueDB:n,readOnly:!1,maxlength:e.maxlength?e.maxlength:-1,multiline:o});e.authorizedValues&&u.set("authorizedValues",e.authorizedValues),e.authorizedValuesNLS&&u.set("authorizedValuesNLS",e.authorizedValuesNLS),e.forbiddenChar&&u.set("forbiddenChar",e.forbiddenChar),s&&(u.volatile=!0),l&&(u.onAttributeValueChanged=l),u.saveInitialValues(),c[u.name]=u,e.authorizedValues?a+=46:a+=o?64:46}else{var u=new r({name:e.selectable,path:e.selectable,label:e.nls,value:n,multiline:o});c[u.name]=u,a+=28}}})),n&&n.length>0){var C=[],_=[];n.forEach((function(e){C.push(e.operation),_.push(e.nls)})),this._currentIntent=s||C[0];var x=new r({name:"intentsList",path:"intentsList",label:e.IntentSelection,authorizedValues:C,authorizedValuesNLS:_,valueDB:this._currentIntent,readOnly:!1});x.saveInitialValues(),c[x.name]=x,a+=46}this.model=new o({metatype:"businessobject",objectId:t.physicalid}),this.model.set(c);var P=!1;null!==this.propUI&&(P=!0),P||(this.propUI=new i({setCloseButton:!1,editMode:this.options.editable,readOnly:!this.options.editable,identifier:this.options.identifier?this.options.identifier:void 0})),this.propUI.initData([this.model]),this.model.clearChangedValue(),this._min_height=a,P||(this.propUI.elements.container.setStyle("min-height",a+"px"),this.propUI.elements.mainDiv.setStyle("height","100%"),this.propUI.elements.container.setStyle("width","100%"),this.propUI.inject(this.container)),this.model.addEvent("onChangeAttributes",(function(e,n){l.attributes=n,n.forEach((function(e){"intentsList"===e.name?e.valueDB!==l._currentIntent&&(l._currentIntent=e.valueDB,l.dispatchEvent("onIntentChanged")):"title"!==e.name||e.valueDB?"title"===e.name?l._onObjectAttributeValueHasChanged(t,p,e,!1):"proposedRevision"===e.name?l._onObjectAttributeValueHasChanged(t,"revision",e,!1):"collaborativeSpace"===e.name?l._onObjectAttributeValueHasChanged(t,"collaborativeSpace",e,!1):l._onObjectAttributeValueHasChanged(t,A[e.name],e,!1):l._onObjectAttributeValueHasChanged(t,p,e,!0)}))}))}})})),define("DS/LifecycleServices/AssemblyJson",["UWA/Class"],(function(e){"use strict";var t=e.singleton({init:function(){this._parent({})},convertFromExpandFormat:function(e,t){var n=new function(){var e=[],n=[],i=[],r={},o={},s={},a={},c={},l={},u=[],d=[],f=[],p=0,h=0,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],v=-1,m={},y={},S={},b=null;function A(t,d){p=d&&d.firstNodeId||0,h=d&&d.firstOccId||0;var A=t.results,x=A.length;if(x>0){c={};var P=0;for(P=0;P<x;P++){if((w=A[P]).hasOwnProperty("icon__default_thumbnail_2d"))b=w.icon__default_thumbnail_2d;else if(void 0===(D=w.attributes)){if(void 0===(D=w.path))continue;u.push(D),_(D)}}for(l={},P=0,P=0;P<x;P++){var w,D;void 0!==(D=(w=A[P]).attributes)&&C(D)}!function(){var e=u.length,t=0;for(t=0;t<e;t++){var c=u[t],d="",p=c.length,b=0,A=!1,C=null,_=null,x=null,P=null,w=null;for(b=0;b<p;b++)if(!0===A)P=c[b],r[P]||(P=l[P]),d+=P,A=!1;else{if(_=c[b],r[_]||(_=l[_]),d=d+"|"+_,!f.hasOwnProperty(d)){var D=h++;f[d]=D,(x={}).occurrenceid=D,x.nodeid=r[_],x.iTitle=a[P],o.hasOwnProperty(P)?x.xform=o[P]:x.xform=g,n.push(x),0!==b?((w={}).parent=C,w.child=D,w.physicalid=P,w.iTitle=a[P],w.treeOrder=m[P],w.type=s[P],w.subType=y[P],w.enoviaSubType=S[P],i.push(w)):-1==v&&(v=D)}C=f[d],A=!0}}}();var E={uicontroltype:"piecewisecgrviewer",version:2};return E.rootoccurrence=v,E.nodes=e,E.occurrences=n,E.occurrencerelationships=i,d&&d.returnIdCounters&&(E.nextNodeId=p,E.nextOccId=h),E}}function C(n){var i,u,f,h=n.length,v=0,A={},C={},_=[];for(v=0;v<h;v++)u=(i=n[v]).name,"",f=i.value,A[u]=f;var x,P=c[A.did],w=A.physicalid;if(w||(w=A.resourceid),l[A.did]=w,s[w]=A["ds6w:type"],"relationship"==P){var D={physicalid:w};d.push(D);var E=!1;if(A.hasOwnProperty("matrixtxt")){var I=A.matrixtxt.split(",");_=[];var O=0;if(E=!0,12==I.length)for(O=0;O<12;O++){var T=Number(I[O]);if(NaN==T){E=!1;break}_.push(T),2==O&&_.push(0),5==O&&_.push(0),8==O&&_.push(0),11==O&&_.push(1)}else E=!1}0==E&&(_=g);var L=1;A.hasOwnProperty("TreeOrder")?L=parseFloat(A.TreeOrder):A.hasOwnProperty("ro.plminstance.V_treeorder")&&(L=parseFloat(A["ro.plminstance.V_treeorder"])),isNaN(L)&&(L=1),m[w]=L,o[w]=_,a[w]=A["ro.plminstance.plm_externalid"],A.hasOwnProperty("expand::subType")?y[w]=A["expand::subType"]:y[w]="Instance",A.hasOwnProperty("expand::enoviaSubType")?S[w]=A["expand::enoviaSubType"]:S[w]=""}else if("node"==P){var N=p++;r[w]=N,C.nodeid=N,C.physicalid=w,C.mod=A["ds6w:modified"],C.modms=Date.parse(C.mod),C.type=A["ds6w:type"],C.state=A["ds6w:status"],C.cadMaster=A["ds6w:cadMaster"],null==C.cadMaster&&(C.cadMaster=A["ds6w:cadmaster"]),C.project=A["ds6w:project"];var F=A.cgr;null==F&&(F=""),C.cgrurl=F,C.Title=A["ds6w:label"];var U=A["ds6w:revision"];void 0!==U&&""!==U||(U=A["ds6wg:revision"]),null==U&&(U="");var R=A.type_icon_url;if(void 0===R&&b){var W=!1;b.some((function(e){return e.did.some((function(t){return t===A.did&&(R=e.icon,W=!0),W})),W}))}t&&t.baseUrl&&R&&((x=R)&&-1===x.indexOf("http://")&&-1===x.indexOf("https://"))&&(R=t.baseUrl+R),C.revision=U,C.attributes={originated:A["ds6w:created"],name:A["ds6w:label"],locked:A["ds6w:reserved"],revision:U,description:A["ds6w:description"],owner:A["ds6w:responsible"],locker:A["ds6w:reservedBy"],type_icon_url:R},Object.keys(A).filter((e=>e.startsWith("expand::"))).forEach((e=>{C.attributes[e]=A[e]})),e.push(C)}}function _(e){var t=e.length,n=0,i=!1;for(n=0;n<t;n++)!0===i?(c[e[n]]="relationship",i=!1):(c[e[n]]="node",i=!0)}return{convert:function(e,t){return A(e,t)}}};return n.convert(e,t)},getNodeCount:function(e){return e.nodes.length},getRootOccurenceId:function(e){return e.rootoccurrence},_getChildOccurenceIds:function(e,t,n){for(var i=[],r=e.occurrencerelationships,o=r.length,s=[],a=n||!1,c=0;c<o;c++){var l=r[c];if(l.parent==t){if(a){var u=this.getOccurence(e,l.child);if(-1!==s.indexOf(u.nodeid))continue;s.push(u.nodeid)}i.push({id:l.child,treeOrder:l.treeOrder})}}return i},getChildOccurenceIds:function(e,t,n){return this._getChildOccurenceIds(e,t,n).map((function(e){return e.id}))},getChildOccurenceIdsTreeOrder:function(e,t,n){return this._getChildOccurenceIds(e,t,n).sort((function(e,t){return e.treeOrder-t.treeOrder})).map((function(e){return e.id}))},setOccurenceRelationshipOrder:function(e,t,n,i){for(var r=e.occurrencerelationships.length,o=0;o<r;o++)if(e.occurrencerelationships[o].parent==t&&e.occurrencerelationships[o].child==n){e.occurrencerelationships[o].order=i;break}},getOccurence:function(e,t){for(var n=e.occurrences,i=n.length,r=0;r<i;r++){var o=n[r];if(o.occurrenceid==t)return o}return null},getAllNodePhysicalIds:function(e){for(var t=[],n=e.nodes,i=n.length,r=0;r<i;r++){var o=n[r];t.push(o.physicalid)}return t},getNodePhysicalId:function(e,t){return this.getNode(e,t).physicalid},getNode:function(e,t){for(var n=e.nodes,i=n.length,r=0;r<i;r++){var o=n[r];if(o.nodeid==t)return o}return null},getNodeFromPhysicalId:function(e,t){for(var n=e.nodes,i=n.length,r=0;r<i;r++){var o=n[r];if(o.physicalid===t)return o}return null},Node:function(e){return{setAttribute:function(e,t){null!=this.nodeJson[e]?this.nodeJson[e]=t:this.nodeJson.attributes[e]=t},getAttribute:function(e){var t=this.nodeJson[e];return null==t&&(t=this.nodeJson.attributes[e]),t},nodeJson:e}},Assembly:function(e){return{getNodeByPhysicalId:function(e){for(var n=this.nodes.length,i=0;i<n;i++){var r=this.nodes[i];if(r.physicalid==e)return t.Node(r)}return null},getNodeCount:function(){return this.nodes.length},getNode:function(n){return t.Node(e.nodes[n])},nodes:e.nodes}},AssemblyHelper:function(e){return{getNode:function(e){return this._nodeIdMap.get(e)},getNodeByPid:function(e){return this._nodePidMap.get(e)},getOccurence:function(e){return this._occurrenceMap.get(e)},getNodeIdFromOccurenceId:function(e){return this.getOccurence(e).nodeid},getNodeFromOccurenceId:function(e){var t=this.getOccurence(e);return this.getNode(t.nodeid)},getRootOccurenceId:function(){return this._assembly.rootoccurrence},getNodeAttributeValues:function(e,t){const n=new Map(Object.entries({Title:"ds6w:label",type_icon_url:"icon"}));var i=[],r=this.getNode(e);return t.forEach((function(e){var t=r[e];null==t&&(t=r.attributes[e]),null==t&&n.has(e)&&(t=r[n.get(e)]),i.push(t)})),i},getParentOccurence:function(e){for(var t=null,n=this._assembly.occurrencerelationships,i=n.length,r=0;r<i;r++){var o=n[r];if(o.child==e){t=this.getOccurence(o.parent);break}}return t},getInstanceTitle:function(e){var t=this._occurrenceRelMap.get(e);return t?t.iTitle:null},getChildOccurenceIds:function(e,t){return this._getChildOccurenceIds(e,t).map((function(e){return e.id}))},getChildOccurenceIdsTreeOrder:function(e,t){return this._getChildOccurenceIds(e,t).sort((function(e,t){return e.treeOrder-t.treeOrder})).map((function(e){return e.id}))},addNode:function(e){this._assembly.nodes.push(e),this._nodeIdMap.set(e.nodeid,e),this._nodePidMap.set(e.physicalid,e)},addOccurrence:function(e){this._assembly.occurrences.push(e),this._occurrenceMap.set(e.occurrenceid,e)},_getChildOccurenceIds:function(e,t){var n=this,i=[],r=this._assembly.occurrencerelationships,o=(r.length,[]),s=t||!1;return r.forEach((function(t){if(t.parent==e){if(s){var r=n.getOccurence(t.child);if(-1!==o.indexOf(r.nodeid))return;o.push(r.nodeid)}i.push({id:t.child,treeOrder:t.treeOrder})}})),i},_assembly:e,_nodeIdMap:new Map(e.nodes.map((e=>[e.nodeid,e]))),_nodePidMap:new Map(e.nodes.map((e=>[e.physicalid,e]))),_occurrenceMap:new Map(e.occurrences.map((e=>[e.occurrenceid,e]))),_occurrenceRelMap:new Map(e.occurrencerelationships.map((e=>[e.child,e])))}},getNodeAttributeValue:function(e,t,n){var i=[n];return this.getNodeAttributeValues(e,t,i)[0]},getNodeAttributeValues:function(e,t,n){for(var i=[],r=this.getNode(e,t),o=n.length,s=0;s<o;s++){var a=n[s],c=r[a];null==c&&(c=r.attributes[a]),i.push(c)}return i},getNodeIdFromOccurenceId:function(e,t){return this.getOccurence(e,t).nodeid},getNodeIdsFromOccurenceIds:function(e,t){for(var n=[],i=t.length,r=0;r<i;r++){var o=this.getNodeIdFromOccurenceId(e,t[r]);-1==n.indexOf(o)&&n.push(o)}return n},getRelationshipId:function(e,t,n){for(var i=e.occurrencerelationships.length,r=0;r<i;r++)if(e.occurrencerelationships[r].parent===t&&e.occurrencerelationships[r].child===n)return e.occurrencerelationships[r].physicalid;return null},getRelationshipData:function(e,t,n){for(var i=e.occurrencerelationships.length,r=0;r<i;r++)if(e.occurrencerelationships[r].parent===t&&e.occurrencerelationships[r].child===n)return{pid:e.occurrencerelationships[r].physicalid,type:e.occurrencerelationships[r].type,subType:e.occurrencerelationships[r].subType,enoviaSubType:e.occurrencerelationships[r].enoviaSubType};return null},getRelationships:function(e,t,n){for(var i=[],r=e.occurrencerelationships.length,o=0;o<r;o++){var s=e.occurrencerelationships[o].parent,a=this.getOccurence(e,s).nodeid,c=e.occurrencerelationships[o].child,l=this.getOccurence(e,c).nodeid;a===t&&l===n&&-1===i.indexOf(e.occurrencerelationships[o].physicalid)&&i.push(e.occurrencerelationships[o].physicalid)}return i},foo:function(){}});return t})),define("DS/LifecycleServices/UUIDGenerator",["UWA/Class"],(function(e){"use strict";return e.singleton({init:function(){this.counter=0},create:function(){return(new Date).getTime()+this.counter++}})})),define("DS/LifecycleServices/EventHandler",[],(function(){"use strict";function e(t,n,i){if(!(this instanceof e))return new e(t,n,i);this.element=t,this.event=n,this.fn=i,void 0!==this.fn&&this.bind()}return e.prototype.bind=function(e){"function"==typeof e&&(this.fn=e),this.element.addEventListener(this.event,this.fn)},e.prototype.unbind=function(){this.element.removeEventListener(this.event,this.fn)},e})),define("DS/LifecycleServices/expandServices/ExpandReqBuilder",["UWA/Controls/Abstract"],(function(e){"use strict";return e.extend({select_rel:["physicalid","ds6w:type","ro.plminstance.plm_externalid","matrixtxt","ro.plminstance.V_treeorder"],select_rel_federated:["ds6w:label","ro.plminstance.V_treeorder"],select_bo:["physicalid","ds6w:type","ds6w:reservedBy","ds6w:globalType","ds6w:label","ds6wg:revision","ds6w:description","ds6w:responsible","ds6w:modified","ds6w:created","ds6w:identifier","ds6w:reserved","ds6w:status","ds6w:cadMaster","ds6wg:EnterpriseExtension.V_PartNumber","ds6w:project"],select_bo_federated:[],compute_select_bo:["thumbnail_2d","icon"],init:function(e,t,n){if(this.useV2expand=!(!n||null==n.useV2expand)&&n.useV2expand,this.getFilterSpec=function(){return{hasFilter:!1}},!e)return void console.warn("Duplicate: Missing API to retrieve current filter");this.operationType=t||"duplicate";let i=null;i=n&&n.hasFilter?n.hasFilter:e&&e._biFilter&&e._biFilter.hasFilter?e._biFilter.hasFilter.bind(e._biFilter):e&&e.hasFilter?e.hasFilter.bind(e):()=>({hasFilter:!1});let r=null;r=n&&n.GetFilterSpec?n.GetFilterSpec:e&&e._biFilter&&e._biFilter.GetFilterSpec?e._biFilter.GetFilterSpec.bind(e._biFilter):e&&e.GetFilterSpec?e.GetFilterSpec.bind(e):()=>({hasFilter:!1}),i&&r?this.getFilterSpec=function(e){var t=i(e);if(t&&!0===t.hasFilter){var n=r(e,{V1:!0}),o=r(e,{V2:!0});if(n||o)return{hasFilter:!0,filterSpec:n||{},filterSpecV2:o||{}}}return{hasFilter:!1}}:console.warn("Duplicate: Missing API to retrieve current filter")},isFiltered:function(e){return this.getFilterSpec(e).hasFilter},_buildPSEExpandDataNew:function(e){return{paths:[[e]],root_path_physicalid:[[e]],fcs_url_mode:"REDIRECT",expand_iter:"-1",no_type_filter_rel:["XCADBaseDependency"],"q.iterative_filter_query_bo":'[ds6w:globalType]:"ds6w:Document" OR [ds6w:globalType]:"ds6w:Part"'}},_buildPSEExpandData:function(e){return{intent:"explore_2D",debug:!1,roots:[{id:e}],level:"-1",source:"cstorage",authored:!0,no_type_filter_rel:["XCADBaseDependency"],"q.iterative_filter_query_bo":'[ds6w:globalType]:"ds6w:Document" OR [ds6w:globalType]:"ds6w:Part"'}},_buildExpandData:function(e){return{label:this._genUID(),root_physicalid:e,select_rel:this.select_rel,compute_select_bo:this.compute_select_bo,select_bo:this.select_bo,expand_iter:"-1","q.iterative_filter_query_bo":'[ds6w:globalType]:"ds6w:Document" OR [ds6w:globalType]:"ds6w:Part"',no_type_filter_rel:["XCADBaseDependency"]}},_buildExpandDataV2:function(e){return{batch:{expands:[{label:this._genUID(),root:{physical_id:e},filter:{all:1}}]},outputs:{select_object:this.select_bo,select_relation:this.select_rel,hits:{predefined_computation:["icons"]}}}},_buildFilteredExpandData:function(e){var t={select_rel:this.select_rel,compute_select_bo:this.compute_select_bo,synthesis_mode:"occurrence",select_bo:this.select_bo,label:this._genUID()};return UWA.merge(t,e.CVQuery)},_buildFilteredExpandDataV2:function(e,t){var n={batch:{expands:[{label:this._genUID(),root:{physical_id:e}}]},outputs:{select_object:this.select_bo,select_relation:this.select_rel,hits:{predefined_computation:["icons"]}}};return t.filter&&(n.batch.expands[0].filter=t.filter),t.aggregation_processors&&(n.batch.expands[0].aggregation_processors=t.aggregation_processors),n},build:function(e,t,n,i){if(!t&&n)return{URI:"/resources/enopad/lwc/expand",data:this._buildPSEExpandData(e)};if(t){var r=!i&&this.getFilterSpec(e);return r.hasFilter?this.useV2expand?{URI:"/cvservlet/progressiveexpand/v2",data:this._buildFilteredExpandDataV2(e,r.filterSpecV2),params:{output_format:"cvjson"}}:{URI:"/cvservlet/multiexpand",data:this._buildFilteredExpandData(r.filterSpec)}:this.useV2expand?{URI:"/cvservlet/progressiveexpand/v2",data:this._buildExpandDataV2(e),params:{output_format:"cvjson"}}:{URI:"/cvservlet/expand",data:this._buildExpandData(e)}}var o={roots:[]};return o.roots.push(e),{URI:"/resources/lifecycle/expand/db",data:o}},buildFederated:function(e,t,n,i){let r="",o="";var s=!i&&this.getFilterSpec(e);return s.hasFilter&&(r=JSON.stringify(s.filterSpec),o=JSON.stringify(s.filterSpecV2)),{URI:"/resources/lifecycle/expand/federated",data:{command:this.operationType,ids:[e],authoring:!t,filter:r,filterV2:o,select_bo:this.select_bo_federated,select_rel:this.select_rel_federated,enableProto:n}}},_genUID:function(){return"DUP-"+(new Date).getMilliseconds()+"-"+Math.random()}})})),define("DS/LifecycleServices/XMLDocHelper",["UWA/Utils"],(function(e){"use strict";return{loadXMLDoc:function(t){return e.loadXml(t)},filterNodes:function(e,t){if("object"!=typeof t)throw Error("XMLDocHelper.filterNodes:Invalid input: Cannot filter nodes");if(!e||0===e.length)throw Error("XMLDocHelper.filterNodes:nodeList does not contain nodes");for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i],s=!t.tag||"string"==typeof t.tag&&o.tagName===t.tag;if("object"==typeof t.attrList)for(var a in t.attrList){var c=o.getAttribute(a),l=t.attrList[a];s=s&&"string"==typeof c&&(!0===l.allowPartialMatch?(l.value instanceof RegExp?l.value:new RegExp(l.value)).test(c):c===l.value)}if("object"==typeof t.text){var u=o.textContent;s=s&&"string"==typeof u&&(!0===t.text.allowPartialMatch?(t.text.value instanceof RegExp?t.text.value:new RegExp(t.text.value)).test(u):u===t.text.value)}s&&n.push(o)}return n},filterDescendants:function(e,t){if(!e||0===e.length)throw Error("XMLDocHelper.filterDescendants:nodeList does not contain nodes");t=t||{};var n=[];function i(e,t){t.push(e);for(var n=0,r=e.childNodes.length;n<r;n++)(s=e.childNodes[n]).nodeType===Node.ELEMENT_NODE&&i(s,t);return t}for(var r=0,o=e.length;r<o;r++){var s=e[r];if("string"==typeof t.tag){var a=t.tag.split(":");n=2===a.length?s.getElementsByTagNameNS(s.lookupNamespaceURI(a[0]),a[1]):s.getElementsByTagName(a[0])}else n=i(s,n)}return"object"==typeof t.attrList?this.filterNodes(n,{attrList:t.attrList}):n},filterChildren:function(e,t){if(!e||0===e.length)throw Error("XMLDocHelper.filterChildren:nodeList does not contain nodes");t=t||{};for(var n=0,i=e.length,r=[];n<i;n++)for(var o,s=0,a=e[n].childNodes.length;s<a;s++)(o=e[n].childNodes[s]).nodeType===Node.ELEMENT_NODE&&r.push(o);return this.filterNodes(r,t)},filterIfDescendantElementExists:function(e,t){if(!e||0===e.length)throw Error("XMLDocHelper.filterIfDescendantElementExists:nodeList does not contain nodes");t=t||{};for(var n,i=[],r=0,o=e.length;r<o;r++)n=e[r],this.filterDescendants([n],t).length>0&&i.push(n);return i},filterFirstMatchingAncestor:function(e,t){if(!e||0===e.length)throw Error("XMLDocHelper.filterNodes:nodeList does not contain nodes");if("object"!=typeof t)throw Error("XMLDocHelper.filterNodes:Invalid input: Cannot filter nodes");for(var n=0,i=[],r=e.length;n<r;n++){for(var o=e[n].parentNode;o&&!this.filterNodes([o],t).length;)o=o.parentNode;i.push(o)}return i},getParent:function(e){return e.parentNode},getSiblings:function(e){var t=e.parentNode,n=t&&this.filterChildren([t])||[];return n.length&&n.splice(n.indexOf(e),1),n},getNodeInfo:function(e){var t={tag:void 0,value:void 0,attrList:{},text:void 0};if(t.tag=e.tagName,t.value=e.nodeValue,t.text=e.textContent,e.hasAttributes())for(var n=e.attributes,i=0,r=n.length;i<r;i++)t.attrList[n[i].name]=n[i].value;return t},getChildren:function(e){return this.filterChildren([e])}}})),define("DS/LifecycleServices/ArrayFunctions",(function(){"use strict";return Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;o<i;o++)if(t=n[o],e.call(r,t,o,n))return t}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;o<i;o++)if(t=n[o],e.call(r,t,o,n))return o;return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r,o,s=0|t,a=Math.max(0<=s?s:i-Math.abs(s),0);a<i;){if((r=n[a])===(o=e)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}}),"function"!=typeof Array.prototype.flatMap&&(Array.prototype.flatMap=function(e){for(var t=[],n=0;n<this.length;++n){var i=e(this[n],n,this);Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;++r)t.push(i[r])}return t}),null})),define("DS/LifecycleServices/LifecycleObjectList",["css!DS/LifecycleServices/LifecycleServices","UWA/Core","UWA/Controls/Abstract","DS/DataGridWidget/DataGridWidget","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls","i18n!DS/LifecycleServices/assets/nls/LifecycleServicesNls","DS/PlatformAPI/PlatformAPI"],(function(e,t,n,i,r,o,s){"use strict";var a=null;function c(){return null==a&&(a=s.getUser()),a}return n.extend({defaultOptions:{className:"Lifecycle-objectlist",showDisplayNameColumn:!0,showNameColumn:!1,showRevisionColumn:!1,showTypeColumn:!1,appendObjects:!1,showMaturityColumn:!1,showLockColumn:!1},objectsTableBody:null,objectsTable:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var e=this.options;this.objectsTable=new i([{text:"PhysicalID",dataIndex:"Id",sortKey:function(e){return e},sortable:!0,hidden:!0},{text:"",dataIndex:"Symbol",sortKey:function(e){return e},sortable:!0},{text:r.title,dataIndex:"Title",sortKey:function(e){return e},sortable:!0},{text:r.type,dataIndex:"Type",sortKey:function(e){return e},sortable:!0},{text:r.revision,dataIndex:"Revision",sortKey:function(e){return e},sortable:!0},{text:o.maturitystate,dataIndex:"Current",sortKey:function(e){return e},sortable:!0},{text:o.reserved,dataIndex:"Locked",sortKey:function(e){return e},sortable:!0}],{className:e.className,activeSelection:!1,setScroller:!0,useNativeScroller:!0,maxHeightScroller:""}),this.objectsTable.CurrentSortColumn=-1,this.objectsTable.getContent().setAttribute("data-rec-id","dataRecInitialSelectedGridAccess"),this.elements.container=this.objectsTable},setObjects:function(e){var t=this;t.objectsTable.clearAllLine();var n=[];e.forEach((function(e){var i=t.AddObjectInTable(e);null!=i&&n.push(i)})),t.objectsTable.AddDatasInTable(n)},AddObjectInTable:function(e){var t=e.type;e.typeDisplayName?t=e.typeDisplayName:e.displayType&&(t=e.displayType);var n,i,r=UWA.createElement("img",{src:e.imageUrl}),o=e.locked,s=UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-lock-open"});if(void 0===o)s=UWA.createElement("span",{});else if(!0===o){var a=(n=c(),i="",void 0!==n&&(i=n.login),i),l=function(){var e=c(),t="";return void 0!==e&&(t=e.firstName+" "+e.lastName),t}(),u=!0,d=e.lockedBy;d.trim().length>0&&((u=d.toUpperCase().trim()===a.toUpperCase().trim()||!1)||(u=d.toUpperCase().trim()===l.toUpperCase().trim()||!1)),s=u?UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-key lc_dgv_lock"}):UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-lock lc_dgv_lock_other"})}else!1===o&&(s=UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-lock-open"}));var f=e.revision;return null==f&&(f=""),{Id:e.physicalid,Title:e.name,Type:t,Revision:f,Current:e.current,Symbol:r,Locked:s}},empty:function(){if(null!==this.objectsTableBody)for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}})})),define("DS/LifecycleServices/Utils",[],(function(){"use strict";function e(){}const t=e=>e.reduce((function(e,n){return e.concat(Array.isArray(n)?t(n):n)}),[]);return e.prototype={debounce:function(e,t,n){var i;return function(){var r=this,o=arguments,s=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(r,o)}),t),s&&e.apply(r,o)}},toArray:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},flattenArray:function(e){return t(e)},toMaturityArray:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},htmlFromString:function(e){if(this._htmlFromString)return this._htmlFromString(e);try{return this._htmlFromString=function(e){return document.createRange().createContextualFragment(e)},this._htmlFromString(e)}catch(t){return this._htmlFromString=function(e){var t=document.createRange();return t.selectNode(document.body),t.createContextualFragment(e)},this._htmlFromString(e)}},createDbgNlsProxy:function(e){if(window&&window.showTranslated&&42!=e.isNlsProxy){return new Proxy(e,{get:function(e,t,n){return"isNlsProxy"===t?42:"T("+e[t]+")"}})}return e},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},forEach:function(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),this.isArray(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)},getWidgetDomainSearchParams:function(){var e=null,t=new URLSearchParams(window.location.search);if(t&&t.has("widgetDomain")){var n=t.get("widgetDomain");e=new URLSearchParams(n.substring(n.indexOf("?")))}return e},urlHasParam:function(e){var t=this.getWidgetDomainSearchParams();return t&&t.has(e)},getURLParamValue:function(e){var t=null,n=this.getWidgetDomainSearchParams();return n&&n.has(e)&&(t=n.get(e)),t},urlHasParamValue:function(e,t){var n=this.getURLParamValue(e);return n&&n===t},uid:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},createEvent:function(e,t,n){return{metadata:{uid:this.uid(),originUid:e,timestamp:Date.now(),appid:n.appId?n.appId:"default-app-id",originWidgetId:n.widgetId?n.widgetId:"default-widget-id"},data:t}},removeCrossHighlightWithColor:function(e){var t=this.uid(),n=this.createEvent(t,{},e);require(["DS/PlatformAPI/PlatformAPI"],(function(e){e.publish("DS/PADUtils/PADCommandProxy/enrich3D",n)}))},crossHighlightWithColor:function(e,t,n,i){if(i&&t){let o=t.getAllNodes().map((t=>e.getModelFromTreeNode(t._treeNode)));var r=this.createColorMap(o);this.publishPlatformAPIEnrichEvent(r,n,i)}},publishPlatformAPIEnrichEvent:function(e,t,n){let i={cumulativeMode:!1,graphicProperties:{layers:[{id:"L1",label:t.label,colorMap:e,styles:t.styles}]}};var r=this.uid(),o=this.createEvent(r,i,n);require(["DS/PlatformAPI/PlatformAPI"],(function(e){e.publish("DS/PADUtils/PADCommandProxy/enrich3D",o)}))},createColorMap:function(e){var t=[];return e.forEach((e=>{if(this.checkIfChildrenWithPossibleActionSelected(e))this.addChildrenInColorMap(e,t);else{var n=this.createColorMapItem(e);null!=n.style&&t.push(n)}})),t},addChildrenInColorMap:function(e,t){e.getChildren().forEach((e=>{var n=this.createColorMapItem(e);null==n.style||t.includes(n)||(this.checkIfChildrenWithPossibleActionSelected(e)?this.addChildrenInColorMap(e,t):t.push(n))}))},checkIfChildrenWithPossibleActionSelected:function(e){return e.supportedActions&&(e.getAction()==EnoTreeNodeAction.Duplicate||e.getAction()==EnoTreeNodeAction.Branch)&&e.getChildren()&&e.getChildren().length>0},createColorMapItem:function(e){var t={};return t.resourceid=e.assyNode.physicalid,t.style=this.getStyleId(e.getAction()),t.physicalid=e.assyNode.physicalid,t},getStyleId:function(e){switch(e){case EnoTreeNodeAction.Duplicate:case EnoTreeNodeAction.Branch:return 0;case EnoTreeNodeAction.Reuse:return 1;case EnoTreeNodeAction.Exclude:return 2;default:return console.log("we dont have a style to apply to this action id : "+e),null}}},new e})),define("DS/LifecycleServices/LifecycleObjectBlacklist",["UWA/Class"],(function(e){"use strict";return e.singleton({init:function(){this.blacklistedTypes=["Person","pno:Person","CATPart","CATProduct","CATDrawing"],this.isBlacklistedStr=function(e){return-1!==this.blacklistedTypes.indexOf(e)},this.isBlacklistedArray=function(e){for(var t=0;t<e.length;++t){var n=e[t].type||e[t].objectType||"";if(this.isBlacklistedStr(n))return!0}return!1}},isBlacklisted:function(e){return"[object Array]"===Object.prototype.toString.call(e)?this.isBlacklistedArray(e):("string"==typeof e||e instanceof String)&&this.isBlacklistedStr(e)}})})),define("DS/LifecycleServices/Expandv2Parser",["UWA/Class"],(function(e){"use strict";return e.singleton({parse:function(e,t){let n={rootoccurrence:-1,nodes:[],occurrences:[],occurrencerelationships:[]};if(!e)return n;const i=new Map,r=new Map;let o=t&&t.firstNodeId?t.firstNodeId:0,s=0;for(var a of e.results)if(a.from){let e=i.get(a.to);n.occurrences.push({occurrenceid:s,nodeid:e}),r.set(a.to,s),n.occurrencerelationships.push({parent:r.get(a.from),child:s,physicalid:a.resourceid,type:a["ds6w:type"],treeOrder:a["ro.plminstance.V_treeorder"]?parseFloat(a["ro.plminstance.V_treeorder"]):void 0,...a}),++s}else{a.physicalid=a.resourceid,i.set(a.resourceid,o);let e={nodeid:o,mod:a["ds6w:modified"],modms:Date.parse(a.mod),type:a["ds6w:type"],state:a["ds6w:status"],cadMaster:a["ds6w:cadMaster"],project:a["ds6w:project"],Title:a["ds6w:label"],revision:a["ds6wg:revision"],attributes:{},...a};n.nodes.push(e),a.icon&&(e.attributes.type_icon_url=a.icon),-1==n.rootoccurrence&&(n.rootoccurrence=s,n.occurrences.push({occurrenceid:s,nodeid:o}),r.set(a.resourceid,s),++s),++o}return t&&t.returnIdCounters&&(n.nextNodeId=o,n.nextOccId=s),n}})})),define("DS/LifecycleServices/LifecycleAlert",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],(function(e,t){"use strict";return{_notif_manager:null,displayNotification:function(n){null===this._notif_manager&&(this._notif_manager=e,t.setNotificationManager(this._notif_manager),t.setStackingPolicy(3));var i="info";UWA.is(n.eventID)&&"primary"!==n.eventID&&(i=n.eventID),n.hasOwnProperty("hasHtml")||(n.hasHtml=!1),this._notif_manager.addNotif({level:i,title:n.title||"",subtitle:n.subtitle||"",message:n.msg,allowUnsafeHTML:n.hasHtml,sticky:n.sticky||!1,category:n.category||""})},clearNotifications:function(){t.removeNotifications("","")}}})),define("DS/LifecycleServices/log",["UWA/Class"],(function(e){return e.singleton({rootElement:null,inject:function(e,t){e.innerHTML='<div id="_logRoot_"></div>',this.rootElement=e.querySelector("#_logRoot_"),this.rootElement.style.height=t+"px",this.rootElement.style.border="1px solid grey",this.rootElement.style.overflow="auto"},info:function(e){this.rootElement.insertAdjacentHTML("beforeend","<div>"+e+"</div>")}})})),define("DS/LifecycleServices/IllegalCharMapping",["UWA/Controls/Abstract","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleCmd/Dictionary"],(function(e,t,n){"use strict";return e.extend({init:function(){this.mappings=new n,this.types=new n},addCADType:function(e,t){return!this.mappings.find(e)&&(!this.types.find(e)&&(this.types.add(e,t),!0))},getMappings:function(){var e=this,t=[];return this.types.each((function(n,i){t.push(e._getTypeIllegalChar(n,i))})),this.types.clear(),new Promise((function(n,i){Promise.all(t).then((function(t){t.forEach((function(t){e.mappings.add(t.type,t.chars)})),n(e.mappings)})).catch((function(t){console.log("Some illegal char mapping service failed, error: "+t),n(e.mappings)}))}))},_getTypeIllegalChar:function(e,n){return new Promise((function(i,r){t.getCADvalidityService(e).then((function(t){return t.getInvalidCharInTitle?t.getInvalidCharInTitle():(console.warn("Illegal char implementation for:"+e+' does not implement "getInvalidCharInTitle" using default charlist:"'+n+'"'),n)})).then((function(t){i({type:e,chars:t})})).catch((function(t){console.warn("Failed to get illegal char mapping for:"+e+' using default charlist:"'+n+'" error: '+t),i({type:e,chars:null!=n?n:""})}))}))}})})),define("DS/LifecycleServices/Notification",["DS/LifecycleServices/LifecycleAlert"],(function(e){"use strict";return{displayError:function(e,t){this.displayNotification(e,{eventID:"error",msg:t})},displayWarning:function(e,t){this.displayNotification(e,{eventID:"warning",msg:t})},displayInfo:function(e,t){this.displayNotification(e,{eventID:"info",msg:t})},displayNotification:function(e,t){var n;if(e&&UWA.is(e.displayNotification,"function"))return n=UWA.is(t,"string")?{eventID:"warning",msg:t}:t,void e.displayNotification(n);this._displayAlert(t)},_displayAlert:function(t){var n;n=UWA.is(t,"string")?{msg:t}:t,e.displayNotification(n)}}})),define("DS/LifecycleServices/DictionaryServices",["UWA/Class","UWA/Class/Options","DS/LifecycleServices/LifecycleServicesSettings","DS/WAFData/WAFData"],(function(e,t,n,i){"use strict";return e.singleton(t,{init:function(){this.typeCache.push({type:"Workspace Vault",hierarchy:[]}),this.typeCache.push({type:"Workspace",hierarchy:["Project Management"]}),this.typeCache.push({type:"Personal Workspace",hierarchy:[]}),this.typeCache.push({type:"Folder",hierarchy:[]}),this.typeCache.push({type:"RootFolder",hierarchy:[]})},typeCache:[],isTypeInCache:function(e){return this.typeCache.some((function(t){return t.type===e}))},isKindOfFromCache:function(e,t){var n=this.typeCache.filter((function(e){return e.type===t}))[0];return n?e.some((function(e){return n.hierarchy.indexOf(e)>=0})):void console.log("isKindOfFromCache: Called when type is not in cache!")},getIsKindOfPromise:function(e,t,n){var i=this;return new UWA.Class.Promise((function(r,o){i.isKindOf(e,t,n,(function(e){r(e)}))}))},isKindOf:function(e,t,r,o){var s=this,a=!1,c=!1;if(t.some((function(e){return e===r}))&&(a=!0,c=!0),c)o(c);else if(s.isTypeInCache(r)&&(a=!0,c=s.isKindOfFromCache(t,r)),a)o(c);else{var l=n.get3DSpaceWSUrl(e,"/resources/enong/dico/gettypeshierarchy",null),u={types:[r]};i.authenticatedRequest(l,{method:"POST",type:"json",timeout:6e4,data:UWA.Json.encode(u),headers:n.getHeaders(),onComplete:function(e){console.log("gettypeshierarchy: onComplete:"+e);var n=!1;if(e.hasOwnProperty("types_hierarchies")&&e.types_hierarchies.length>0){var i=e.types_hierarchies[0];s.isTypeInCache(r)||s.typeCache.push(i),i.type===r&&(n=t.some((function(e){return i.hierarchy.indexOf(e)>=0}),this))}o(n)},onFailure:function(e){console.log("gettypeshierarchy: onFailure:"+e)},onTimeout:function(){console.log("gettypeshierarchy: onTimeout: A connection timeout occured.")}})}}})})),define("DS/LifecycleServices/LifecyclePerfTimer",["DS/LifecycleServices/LifecycleServicesSettings","DS/WAFData/WAFData","UWA/Widget","DS/ENOFloatingPanel/ENOFloatingPanel"],(function(e,t,n,i){"use strict";function r(){this._name="",this._sections={},this._options={}}var o;return r.prototype={init:function(e,t){e&&(this._name=e),t&&(this._options=t),this._sections={}},stop:function(e){if(this.getSectionIsRunning(e)){this.setSectionIsRunning(e,!1);var t=Date.now(),n=this.getStartMs(e);0!=n&&this.setInterval(e,n,t)}},start:function(e){if(!this.getSectionIsRunning(e)){this.setSectionIsRunning(e,!0);var t=Date.now();this.setStartMs(e,t)}},getTotalMs:function(e){var t=0;if(this._sections[e]&&this._sections[e].intervals)for(let i=0;i<this._sections[e].intervals.length;++i){const r=this._sections[e].intervals[i];var n=r.startMs;t=t+r.endMs-n}return t},getTotalMinutesAndSeconds:function(e){var t=this.getTotalMs(e);return this.millisToMinutesAndSeconds(t)},printTime:function(e){if(void 0===this._sections[e])console.log(e+" has not been executed or measured");else{var t=this.getTotalMinutesAndSeconds(e);console.log(e+"  "+t)}},getStartMs:function(e){var t=0;return this._sections[e]&&this._sections[e].currentStartMs&&(t=this._sections[e].currentStartMs),t},setStartMs:function(e,t){void 0===this._sections[e]&&(this._sections[e]={}),this._sections[e].currentStartMs=t},setSectionIsRunning:function(e,t){void 0===this._sections[e]&&(this._sections[e]={}),this._sections[e].isRunning=t},getSectionIsRunning:function(e){return void 0!==this._sections[e]&&this._sections[e].isRunning},setInterval:function(e,t,n){void 0===this._sections[e]&&(this._sections[e]={}),void 0===this._sections[e].intervals&&(this._sections[e].intervals=[]);var i={};i.startMs=t,i.endMs=n,this._sections[e].intervals.push(i)},millisToMinutesAndSeconds:function(e){var t=Math.floor(e/6e4),n=Math.trunc(e%6e4/1e3),i=Math.trunc(e%6e4%1e3/10),r=":"+n;return 0==n?r=":00":n<10&&(r=":0"+n),t+r+"."+(0==i?"00":(i<10?"0":"")+i)},launchDialog:function(e){if(null!=e){var t=new n;t.body=UWA.extend(document.body);var r="<head><style>pre {outline: 1px solid #ccc; padding: 5px; margin: 5px; overflow-y:scroll; height: 100%; width: 100% } .row { display: flex;} ";r+=" .column { flex: 50%; padding: 10px;} </style> </head> <body>",r+=' <h2>Timing Run</h2> <div class="row"> <div class="column" style="background-color:#FFF;"> ',r+=" <p>"+JSON.stringify(e)+"</p> ";var o=new i({className:"LifecycleCommandCheck_Dlg",title:"Report",body:r+=" </div> </div> </body> ",overlay:!0,escapeToClose:!0,closable:!0,animate:!0,resizable:!0,maximizable:!0,autocenter:!0,visible:!0,limitParent:!0});o.getBody().style.overflowY="scroll",o.getBody().style.overflowX="scroll",o.inject(t.body)}},printTimeShowDialogAndProcess:function(n,i,r){var o=this;for(let e=0;e<n.length;++e){var s=n[e];o.printTime(s)}r&&console.log(r);var a=e.get3DSpaceWSUrl(this.tenant,"/resources/lifecycle/util/getExpressionAndUser",null);t.authenticatedRequest(a,{method:"GET",headers:e.getHeaders(encodeURIComponent(i)),timeout:288e5,data:{expression:"LifecyclePerfTimerExpression"},onComplete:function(e){console.log("fetchOfExpression: completed"),console.log(e);var t="";if(null!=e){var i={},s="";if(e.result){t=e.result;i=JSON.parse(t)}e.user&&(s=e.user);var a="",c=!1;if(i.all&&(a=i.all),""!==s&&i[s]&&(a=i[s]),a.showDialog&&"true"===a.showDialog&&(c=!0),a.doPostAnalysis&&"true"===a.doPostAnalysis&&!0,!0===c){var l=[];for(let e=0;e<n.length;++e){var u=n[e],d={section:u,time:o.getTotalMinutesAndSeconds(u)};l.push(d)}r&&l.push(r),o.launchDialog(l)}}},onFailure:function(e,t){console.log("Failed to retrive data from the server")},onTimeout:function(e){console.log("Timed out on trying to retrive data from the server")},type:"json"})}},o||(o=new r)})),define("DS/LifecycleServices/LifecycleServices",["UWA/Array","UWA/Class","UWA/Class/Options","UWA/Class/Promise","DS/LifecycleServices/LifecycleServicesSettings","DS/WAFData/WAFData","DS/LifecycleServices/AssemblyJson","DS/WidgetServices/WidgetServices","DS/UIKIT/SuperModal","DS/PADUtils/PADSettingsMgt","DS/ENOCollabToolsUI/tracker/ENOCollabTrackerBackEnd","text!DS/LifecycleServices/assets/x3DSpaceResources.properties","i18n!DS/LifecycleServices/assets/nls/LifecycleServicesNls","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls"],(function(e,t,n,i,r,o,s,a,c,l,u,d,f,p){"use strict";var h=864e5;function g(e,t,n,i,r,s,c){var l=-1!=e.indexOf("?")?"&":"?",u=i.tenant?i.tenant:"OnPremise",d=i.url3DSpace+e+l+"tenant="+u,f={headers:{"Accept-Language":a.getLanguage(),Accept:"application/json","Content-Type":"application/json",SecurityContext:encodeURIComponent(i.securityContext)},method:1==t?"POST":"GET",type:"json",timeout:r,proxy:"passport",onComplete:s,onFailure:c};t&&(f.data=n),o.authenticatedRequest(d,f)}function v(e,t,n,i,r,o){var s=-1!=e.indexOf("?")?"&":"?",a=e;for(var c in t)a+=s+c+"="+t[c],s="&";g(a,!1,null,n,i,r,o)}function m(e,t,n,i,r,o){g(e,!0,UWA.Json.encode(t),n,i,r,o)}var y=t.singleton(n,{init:function(){this._mergeSupportedScope=null},isBaselineMode:function(e,t){var n=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(e){1==e.isConfiguredBaseline&&(n=!0)})),n},isFirstSemantic:function(e,t){var n=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){Array.isArray(t.semantic)&&t.semantic.indexOf("FIRST")>=0&&(e?e===t.id&&(n=!0):n=!0)})),n},isAnyEffectivityBasedMode:function(e,t){var n=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){Array.isArray(t.mode)&&(t.mode.indexOf("effectivity_based")>=0||t.mode.indexOf("effectivity_based_reused")>=0||t.mode.indexOf("effectivity_based_model")>=0)&&(e?e===t.id&&(n=!0):n=!0)})),n},isEffectivityBasedOrEffectivityBasedReuseMode:function(e,t){var n=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){Array.isArray(t.mode)&&(t.mode.indexOf("effectivity_based")>=0||t.mode.indexOf("effectivity_based_reused")>=0)&&(e?e===t.id&&(n=!0):n=!0)})),n},isEffectivityBasedReuseMode:function(e,t){var n=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){Array.isArray(t.mode)&&t.mode.indexOf("effectivity_based_reused")>=0&&(e?e===t.id&&(n=!0):n=!0)})),n},getRevisionMode:function(e,t){var n=null;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){e&&e===t.id&&(n=t.mode.indexOf("effectivity_based")>=0?"effectivity_based":t.mode.indexOf("effectivity_based_reused")>=0?"effectivity_based_reused":t.mode.indexOf("effectivity_based_model")>=0?"effectivity_based_model":t.mode)})),n},getgraphProprietary:function(e,t){var n=null;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){e&&e===t.id&&(n=t.graphProprietary)})),n},getMergeSupportedScope:function(e){var t=this;return UWA.is(t._mergeSupportedScope)?i.resolve(t._mergeSupportedScope):new i((function(n,i){r.app_initialization((function(){y.getSecurityContextPromise(r.getTenant(),e).then((function(e){try{var s=r.get3DSpaceWSUrl(r.getTenant(),"/resources/v1/dslc/getmergeallowlist",null)}catch(e){i(e)}o.authenticatedRequest(s,{method:"GET",headers:r.getHeaders(encodeURIComponent(e)),timeout:6e5,onComplete:function(e){e.MergeAllowList?(t._mergeSupportedScope=e.MergeAllowList,n(t._mergeSupportedScope)):(e.status||e.error||(console.log("missing status in response of getmergeallowlist"),i("missing status in response of getmergeallowlist")),i(e.error))},onFailure:function(e,t){var n=y.parseWebServiceError(e,t);i(n)},type:"json"})}))}))}))},fetchSubTypesFromServer:function(e,t,n,i){if(e.payload){var s=r.get3DSpaceWSUrl(r.getTenant(),"/resources/v1/FolderManagement/Folder/getSubTypes",null);o.authenticatedRequest(s,{method:"POST",headers:r.getHeaders(),timeout:864e5,data:UWA.Json.encode(e.payload),type:"json",onComplete:t,onFailure:n,onTimeout:i})}},getAllowedSemanticsPromise:function(e,t,n){var i=[];return e.forEach((function(e){i.push({id:e})})),new UWA.Class.Promise((function(e,s){y.getSecurityContextPromise(r.getTenant(),t).then((function(t){var a={allowedSemantics:i,output:{infos:"version"}};n&&n.nlsintents&&(a.output.nlsintents=!0);var c=JSON.stringify(a),l=null;n&&n.scope&&(l="scope="+n.scope);var u=r.get3DSpaceWSUrl(r.getTenant(),"/resources/v1/dslc/getallowedsemantics",l);o.authenticatedRequest(u,{method:"POST",headers:r.getHeaders(encodeURIComponent(t)),timeout:6e5,onComplete:function(t){e(t)},data:c,onFailure:function(e,t){var n=y.parseWebServiceError(e,t);s(n)},type:"json"})}))}))},getVersionNumberProposalPromise:function(e,t,n,i){var s=[];return e.forEach((function(e){var i={copyId:e};t&&(i.ancestors=[{semantic:t,id:e}]),n&&(i.prefix=n),s.push(i)})),new UWA.Class.Promise((function(e,t){y.getSecurityContextPromise(r.getTenant(),i).then((function(n){var i={addRequests:s},a=JSON.stringify(i),c=r.get3DSpaceWSUrl(r.getTenant(),"/resources/v1/dslc/getversionnumberproposal",null);o.authenticatedRequest(c,{method:"POST",headers:r.getHeaders(encodeURIComponent(n)),timeout:6e5,onComplete:function(t){e(t)},data:a,onFailure:function(e,n){var i=y.parseWebServiceError(e,n);t(i)},type:"json"})}))}))},_getAncestorsPromise:function(e,t,n){return new UWA.Class.Promise((function(i,s){y.getSecurityContextPromise(r.getTenant(),n).then((function(n){var a=r.get3DSpaceWSUrl(r.getTenant(),"/resources/v1/dslc/versiongraph/",null),c={graphRequests:[{id:e}]};o.authenticatedRequest(a,{method:"POST",headers:r.getHeaders(encodeURIComponent(n)),timeout:6e5,onComplete:function(n){var r=JSON.parse(n).graphs[0].versions.find((t=>t.id===e)).ancestors;if(t&&r&&Array.isArray(r)){var o=["I","SO"];r=r.filter((e=>!o.includes(e.semantic)))}i(r)},data:UWA.Json.encode(c),onFailure:function(e,t){var n=y.parseWebServiceError(e,t);s(n)}})}))}))},hasFilter:function(e,t){return e&&e._biFilter&&e._biFilter.hasFilter?e._biFilter.hasFilter(t):e&&e.hasFilter?e.hasFilter(t):{hasFilter:!1}},getPublicFilterSpecificationPromise:function(e,t){return new i((function(n,i){e&&e._biFilter&&e._biFilter.getPublicFilterSpecification?(e._biFilter.addEvent(t.eventName,function(i){e._biFilter.removeEvent(t.eventName),n(i)}.bind(this)),e._biFilter.getPublicFilterSpecification(t)):i("No available API to retrieve filter in session...")}))},getPublicVDRPFilterSpecificationPromise:function(e,t){var n,s=this,a=r.getTenant();return new i((function(i,c){y.getSecurityContextPromise(a,e).then((function(e){return n=e,s.getCsrfKeyPromise(a)})).then((e=>{var s=r.get3DSpaceWSUrl(a,"/resources/v1/modeler/dsadvfilter/dsadvfilter:VDRPFilter/"+t+"?$mask=dsadvfilter:VDRPFilterMask.VDRPFilterSpec",null),l=r.getHeaders(encodeURIComponent(n));l.ENO_CSRF_TOKEN=e.value;o.authenticatedRequest(s,{method:"GET",headers:l,type:"json",onComplete:function(e){i(e.member[0])},onFailure:function(e,t){var n=y.parseWebServiceError(e,t);c(n)}})}))}))},getVDRPExpandSpecPromise:function(e,t){var n=r.getTenant();return new i((function(i,s){y.getSecurityContextPromise(n,e).then((function(e){var a=r.get3DSpaceWSUrl(n,"/resources/FilterBIAPI/Filter/getVDRPExpandSpec",null);o.authenticatedRequest(a,{method:"POST",headers:r.getHeaders(encodeURIComponent(e)),type:"json",onComplete:function(e){i(e.batch.expands)},data:JSON.stringify(t),onFailure:function(e,t){var n=y.parseWebServiceError(e,t);s(n)}})}))}))},createFirstConfigurationRevisionPromise:function(e,t,n){return new UWA.Class.Promise((function(i,s){y.getSecurityContextPromise(r.getTenant()).then((function(a){var c={addRequests:[{copyId:e,code:t,ancestors:[{id:e,semantic:"FIRST"}],attributes:[{name:"description",value:n}]}]},l=JSON.stringify(c),u=r.get3DSpaceWSUrl(r.getTenant(),"/resources/v1/dslc/addversions",null);o.authenticatedRequest(u,{method:"POST",headers:r.getHeaders(encodeURIComponent(a)),timeout:6e5,onComplete:function(e){i(e)},data:l,onFailure:function(e,t){var n=y.parseWebServiceError(e,t);s(n)},type:"json"})}))}))},getAssemblyInfo:function(e,t,n,i){""!=t?y.listAttributes(e,[t],["name","owner","modified.generic","originated.generic","attribute[PLMEntity.V_description]"],(function(e){var t=e.results[0],i=t.physicalid,r=t.name,o=t.ownerFullName;null==o&&(o=t.owner);var s=t["modified.generic"],a=t["originated.generic"],c=t["attribute[PLMEntity.V_description]"];null==c&&(c="");n({physicalid:i,title:r,owner:o,mod:s,originated:a,desc:c,thumbnailUrl:""})}),(function(e){i(e)})):n(null)},expandAssembly2:function(e,t,n,i){var r=this;this.expandAssembly2D(e,t,(function(o){var a=s.convertFromExpandFormat(o,false);r.expandAssembly3D(e,t,(function(e){for(var t=s.convertFromExpandFormat(e,false),i=s.Assembly(t),r=s.Assembly(a),o=r.getNodeCount(),c=0;c<o;c++){var l=r.getNode(c),u=l.getAttribute("physicalid"),d=i.getNodeByPhysicalId(u).getAttribute("cgrurl");l.setAttribute("cgrurl",d)}n(a)}),(function(e){console.log(e),i(e)}))}),(function(e){console.log(e),i(e)}))},expandAssembly:function(e,t,n,i){this.expandAssemblyNoConversion(e,t,(function(e){var t=s.convertFromExpandFormat(e,!1);n(t)}),(function(e){console.log(e),i(e)}))},expandAssemblyNoConversion:function(e,t,n,i){this.expandAssemblyWithIntent(e,t,"compareExpand",n,i)},expandAssembly2D:function(e,t,n,i){this.expandAssemblyWithIntent(e,t,"explore_2D",n,i)},expandAssembly3D:function(e,t,n,i){this.expandAssemblyWithIntent(e,t,"explore_3D",n,i)},expandAssemblyWithIntent:function(e,t,n,i,s){var a={intent:n,debug:!1,type_filter_bo:["CATProduct","CATProcess","CATPart","CATDrawing","CATAnalysis","VPMReference","VPMRepReference","CATIA Embedded Component","3DShape","CATIA CGR","CATShape","CATIA V4 Model","CATIA Design Table"],roots:[{id:t}],level:"-1",source:"cstorage",select_bo:["did","resourceid","relcount","physicalid","ds6w:label","ds6w:reserved","ds6wg:revision","ds6w:description","ds6w:modified","ds6w:created","ds6w:responsible","type_icon_url","ds6w:type","ds6w:policy","ds6w:organizationResponsible","ds6w:project","ds6w:reservedBy","thumbnail_2d","thumbnail_3d"],authored:!0},c=r.get3DSpaceWSUrl(e,"/resources/enopad/navigate/expand",null);o.authenticatedRequest(c,{method:"POST",headers:r.getHeaders(),timeout:864e5,data:JSON.stringify(a),type:"json",onComplete:function(e){i(e)},onFailure:function(e){s(e)},onTimeout:function(){s("timeout")}})},formatDate:function(e,t){return e=(e=a.formatDate(e,!0)).replace(", "," ")},listAttributes:function(e,t,n,i,r){for(var o=[],s=t.length,a=0;a<s;a++){var c=t[a];o.push({physicalid:c})}var l={data:o,attributes:n};this.post(e,"/resources/lifecycle/product/attributeList",l,(function(e){i(e)}),(function(e){r(e)}))},listAttributesPromise:function(e,t,n){var i=this;return new UWA.Class.Promise((function(r,o){i.listAttributes(e,t,n,(function(e){r(e)}),(function(e){o(e)}))}))},getAttributeDisplayName:function(e){return"revision"==e||"code"==e?f.rev:"owner"==e?f.owner:"description"==e||"PLMEntity.V_description"==e?f.desc:"policy"==e||"policyTranslated"==e||"policy_nls"===e?f.policy:"modified"==e?f.mDate:"originated"==e||"creationDate"===e?f.cDate:"type"==e||"type_nls"===e?f.type:"project"==e?f.collSpace:"isdup"==e?f.isDup:"islast"==e?f.isLastRev:"title"==e||"displayName"==e?f.title:"newTitle"==e?f.newTitle:"ispublished"==e?f.published:"current"==e||"maturitystate"===e?f.maturitystate:"maturityNls"==e||"maturity_nls"==e?f.maturity:"PLMReference.V_versionComment"==e?f.comment:"locked"==e||"reserved"==e?f.reserved:"reservedby"==e||"locker"==e?f.reservedby:"organization"==e?f.organization:"vault"==e?f.vault:"maturity"==e?f.maturity:"instanceTitle"==e?f.instanceTitle:f[e]},getAttributeDisplayNames:function(e){for(var t=[],n=e.length,i=0;i<n;i++){var r=this.getAttributeDisplayName(e[i]);t.push(r)}return t},getTypeIcon:function(e,t){var n=this,i="x3DSpaceResources.smallIcon.type_"+t.replace(/\s+/g,"");null==n.typeIcons&&(n.typeIcons={},d.split("\n").forEach((function(t){if(""!=t.trim()){var i=t.split(" = "),o=i[0].trim(),s=i[1].trim(),a=r.get3DSpaceWSUrl(e,"/snresources/images/icons/small/"+s,null);n.typeIcons[o]=a}})));var o=n.typeIcons[i];null==o&&(o=r.get3DSpaceWSUrl(e,"/snresources/images/icons/small/I_CDM_Document.png"));return o},get:function(e,t,n,i,s){var a=this,c=Date.now().toString();n["timestamp"+c]=c,y.getSecurityContext(e,(function(c){var l=r.get3DSpaceWSUrl(e,t,null);for(var u in-1!=l.indexOf("?")?l+="&":l+="?",n){l+=u+"="+n[u]+"&"}o.authenticatedRequest(l,{method:"GET",headers:r.getHeaders(c),timeout:864e5,type:"json",onComplete:function(e){i(e)},onFailure:function(e,t){a.onWebServiceError(s,e,t)},onTimeout:function(){a.onWebServiceError(s,null,f.timeout)}})}),(function(e){a.onWebServiceError(s,null,e)}))},post:function(e,t,n,i,s){var a=this;y.getSecurityContextPromise(e).then((function(c){var l=r.get3DSpaceWSUrl(e,t,null);o.authenticatedRequest(l,{method:"POST",headers:r.getHeaders(c),timeout:864e5,data:UWA.Json.encode(n),type:"json",onComplete:function(e){i(e)},onFailure:function(e,t){a.onWebServiceError(s,e,t)},onTimeout:function(){a.onWebServiceError(s,null,f.timeout)}})}))},_getSecurityContextFromPreferencesOrOptions:function(e){if("function"==typeof widget.hasPreference&&widget.hasPreference("xPref_CREDENTIAL")){var t=widget.getPreference("xPref_CREDENTIAL");if(void 0!==t.value&&null!==t.value&&t.hasOwnProperty("value"))return"ctx::"+t.value}if("function"==typeof widget.hasPreference&&null!=widget.getPreference("pad_security_ctx"))return widget.getPreference("pad_security_ctx").value;if("function"==typeof widget.hasPreference&&widget.hasPreference("securityContext"))return widget.getPreference("securityContext").value;var n=r.getOption(e,null);return n&&n.hasOwnProperty("defaultValue")?"ctx::"+n.defaultValue:null},getSecurityContextForCollaborativeSharingCommands:function(){var e={tenant:{label:"onPremises",value:""},SecurityContext:""};if(e.tenant.value=r.getTenant(),widget.hasPreference("xPref_CREDENTIAL")){var t=widget.getPreference("xPref_CREDENTIAL");return void 0!==t.value&&null!==t.value&&t.hasOwnProperty("value")&&(e.SecurityContext="ctx::"+t.value),e}return null!=widget.getPreference("pad_security_ctx")?widget.getPreference("pad_security_ctx").value:null},_getSecurityContextFromContext:function(e){if(!e)return null;if("function"!=typeof e.getSecurityContext)return null;var t=e.getSecurityContext();return t&&t.hasOwnProperty("SecurityContext")?t.SecurityContext:null},getSecurityContextPromise:function(e,t){var n=this._getSecurityContextFromContext(t),i=this._getSecurityContextFromPreferencesOrOptions(e);return n?new UWA.Class.Promise.resolve(n):i?new UWA.Class.Promise.resolve(i):(this._getSecCtxPromise||(this._getSecCtxPromise=new UWA.Class.Promise((function(t,n){y.getSecurityContext(e,(function(e){t(e)}),(function(e){n(e)}))}))),this._getSecCtxPromise)},getSecurityContext:function(e,t,n){var i=r.get3DSpaceWSUrl(e,"/resources/pno/person/getsecuritycontext",null);o.authenticatedRequest(i,{type:"json",method:"GET",proxy:"passport",headers:r.getHeaders(),timeout:6e5,onComplete:function(e){var i="";if(null!=e&&""!=e&&e.hasOwnProperty("SecurityContext")&&null!=e.SecurityContext){(i=e.SecurityContext.replace("ctx::","")).trim().length>0&&(i="ctx::"+e.SecurityContext),t(i)}else n(p.ErrorSecurityContextEmpty)},onFailure:function(e,t){console.log("getSecurityContext:Failure..."+e),y.onWebServiceError(n,e,t)},ontimeout:function(){console.log("getSecurityContext: A connection timeout occurred."),y.onWebServiceError(n,null,p.connectionTimeout)}})},getSecurityContextList:function(e,t){var n=e;r.get3DSpaceWSUrl(e,"/resources/modeler/pno/person","current=true&select=preferredcredentials&select=collabspaces");require(["DS/ENOXWidgetPreferences/js/ENOXWidgetPreferences"],(function(e){var i=e.getCredentialPreferenceKey(),o=e.getPlatformPreferenceKey();if(!1===widget.hasPreference(o))console.log(widget.hasPreference(o)),console.log(widget.getPreference(o)),e.addPlatformSelectionPreferenceToWidget({roles:["CSV"]});else{var s=widget.getPreference(o);console.log(s),e.addPlatformSelectionPreferenceToWidget(s)}e.addCredentialPreferenceToWidget({usePreferredCredentials:!0},1).then((function(){var e=widget.getValue(i),o=widget.preferences[0].label,s=widget.preferences[0].options;r.setOption(n,{label:o,name:"xPref_CREDENTIAL",options:s,type:"list",value:e}),t()}),(function(){}))}),(function(){}))},getCsrfKeyPromise:function(e){var t=this;return new UWA.Class.Promise((function(n,i){t._csrfKey?n(t._csrfKey):y.getCsrfKey(e,(function(e){t._csrfKey=e,n(t._csrfKey)}),(function(e){i(e)}))}))},getCsrfKey:function(e,t,n){var i=r.get3DSpaceWSUrl(e,"/resources/v1/application/E6WFoundation/CSRF",null);o.authenticatedRequest(i,{type:"json",method:"GET",proxy:"passport",headers:r.getHeaders(),timeout:6e5,onComplete:function(e){e&&e.csrf?t(e.csrf):n(p.ErrorCsrfKeyEmpty)},onFailure:function(e,t){console.log("getCsrfKey:Failure..."+e),y.onWebServiceError(n,e,t)},ontimeout:function(){console.log("getCsrfKey: A connection timeout occurred."),y.onWebServiceError(n,null,p.connectionTimeout)}})},getOslcConfigPromise:function(){var e=this;return new UWA.Class.Promise((function(t,n){e._oslcConfig?t(e._oslcConfig):require(["text!DS/OSLCConsumer/assets/OSLCConfig.json"],(function(n){var i=JSON.parse(n);e._oslcConfig=i,t(e._oslcConfig)}),(function(){n(f.ErrorOslcConfig)}))}))},getHistoryConfigPromise:function(){var e=this;return new UWA.Class.Promise((function(t,n){null!=e._historyConfig?t(e._historyConfig):require(["text!DS/HistoryExplorer/assets/HistoryExplorerCustomConfig.json"],(function(i){if(""===i)e._historyConfig=null,n();else{var r=JSON.parse(i);e._historyConfig=r,t(e._historyConfig)}}),(function(){e._historyConfig=null,n()}))}))},oslcRequest:function(t,n,i,r){var o,s=this;this.getOslcConfigPromise().then((function(a){var c=e.detect(a.repositories,(function(e){return e.id&&""==n?(console.log("getting default 1rst repository definition ",e.id),e.id):e.id===n}));c?(""==i&&(console.log("getting default resourceUrl ",c.resourceUrl),i=c.resourceUrl),c.oauth?s.oauthRequest(c.oauth,t,i,r):c.parameters&&c.parameters.authorization?(r.retryIfUnauthorized=!0,o={Accept:"application/rdf+xml",Authorization:c.parameters.authorization},s._makeRequest(i,o,r)):(o={Accept:"application/rdf+xml"},s._makeRequest(i,o,r))):r.onError(f.replace(f.ErrorOslcServiceNotFound,{service:n}))}),(function(e){r.onError(e)}))},_makeRequest:function(e,t,n){var i,r=this;if(n.headers)for(var s in n.headers)t[s]=n.headers[s];var a={method:n.method,proxy:"passport",headers:t,timeout:6e5,onComplete:n.onSuccess,onFailure:function(o,s,a){401!==i.xhr.status&&0!==i.xhr.status||!n.retryIfUnauthorized?401!==i.xhr.status&&0!==i.xhr.status||!n.oauth?r.onWebServiceError(n.onError,o,s,i.xhr.status,a):r._oauthAuthenticateUser(n.oauth,n.tenant,n.onError):(n.retryIfUnauthorized=!1,r._makeRequest(e,t,n))},ontimeout:function(){r.onWebServiceError(n.onError,null,f.timeout)}};n.data&&(a.data=n.data),i=o.authenticatedRequest(e,a)},_getAuthorizationHeaderPromise:function(e,t,n,i){return new UWA.Class.Promise((function(r,o){var s="DS/OAuthSimple/OAuthSimple";require([s],(function(){var o="xrequestedwith=xmlhttprequest",s=t.split("?");t=s[0],s.length>1&&(o=s[1]+"&"+o),n&&Object.keys(n).forEach((function(e){o+="&"+e+"="+encodeURIComponent(n[e])}));var a=(new OAuthSimple).sign({action:e,path:t,parameters:o,signatures:{consumer_key:i.oauth_consumer_key,shared_secret:i.oauth_consumer_secret,access_token:i.oauth_token,oauth_secret:i.oauth_token_secret}});r(a.header)}),(function(e){(e.requireModules&&e.requireModules[0])===s&&o(f.ErrorOAuthSimple)}))}))},oauthRequest:function(e,t,n,i){var r=this;this._getOauthInfoPromise(e,t).then((function(e){return r._getAuthorizationHeaderPromise(i.method,n,i.data,e)})).then((function(o){var s={Accept:"application/rdf+xml",Authorization:o};i.oauth=e,i.tenant=t,r._makeRequest(n,s,i)})).catch((function(e){i.onError(e)}))},_getOauthInfoPromise:function(e,t){return new UWA.Class.Promise((function(n,i){y._getOauthInfo(e,t,(function(e){n(e)}),(function(e){i(e)}))}))},_getOauthInfo:function(e,t,n,i){var s=this,a=r.getPlatformWSUrl("3DPassport",t,"/oauth/access_token/"+e,null);o.authenticatedRequest(a,{type:"json",method:"GET",proxy:"passport",headers:r.getHeaders(),timeout:6e5,onComplete:function(r){"no.token.found"===r.error?s._oauthAuthenticateUser(e,t,i):r.error?i(r.error):n(r)},onFailure:function(e,t){console.log("_getOauthInfo:Failure..."+e),y.onWebServiceError(i,e,t)},ontimeout:function(){console.log("_getOauthInfo: A connection timeout occurred."),y.onWebServiceError(i,null,p.connectionTimeout)}})},_oauthAuthenticateUser:function(e,t,n){this._getAuthenticationUrlPromise(e,t).then((function(t){var i=new c({events:{onHide:function(){n(f.authorizationRequired)}},renderTo:document.body}),r=f.replace(f.authorizationDialogBody,{identityProvider:e,authenticationUrl:t}),o=r.indexOf("target=");r=[r.slice(0,o),"onclick=\"if (typeof dscef !== 'undefined') {dscef.sendString('launchOSLCAuthorization', '"+t+"'); return false;}\"",r.slice(o)].join(" "),i.dialog({body:r,title:f.authorizationDialogTitle,buttons:[{className:"primary",value:f.ok,action:function(e){e.hide()}}]})}),(function(e){n(e)}))},_getAuthenticationUrlPromise:function(e,t){return new UWA.Class.Promise((function(n,i){y._getAuthenticationUrl(e,t,(function(e){n(e)}),(function(e){i(e)}))}))},_getAuthenticationUrl:function(e,t,n,i){var s=r.getPlatformWSUrl("3DPassport",t,"/oauth/authenticate/"+e,null);o.authenticatedRequest(s,{type:"json",method:"GET",proxy:"passport",headers:r.getHeaders(),timeout:6e5,onComplete:function(e){e.redirect_uri?n(e.redirect_uri):i(f.authenticationError)},onFailure:function(e,t){console.log("_getAuthenticationUrl:Failure..."+e),y.onWebServiceError(i,e,t)},ontimeout:function(){console.log("_getAuthenticationUrl: A connection timeout occurred."),y.onWebServiceError(i,null,p.connectionTimeout)}})},showWebServiceError:function(e,t,n,i){var r=null,o=null;"function"==typeof t?o=t:(r=t,o=n);var s=e;e.hasOwnProperty("error")?s=e.error:e.hasOwnProperty("message")&&(s=e.message);var a=y._parseWebServiceError(s,r,i);o(a.message,a.isNotificationInfo,a.title,a.subtitle,a.submessage)},parseWebServiceError:function(e,t,n){return this._parseWebServiceError(e,t,n,null).message},_parseWebServiceError:function(e,t,n,i){var r=e,o=null,s=null,a=null;if(null!=i&&i.trim().length>0&&(a=f.replace(f.backgroundNotifMsgWithCommandName,{commandName:i})),!t||"object"!=typeof t||e instanceof Error){if("string"==typeof e||e instanceof Error){var c=e;e instanceof Error&&(c=e.message),c.startsWith("NetworkError:")?c.endsWith('return ResponseCode with value "0".')?r=f.noConnection:c.endsWith('return ResponseCode with value "401".')||c.endsWith('return ResponseCode with value "403".')?r=f.unauthorized:c.endsWith('return ResponseCode with value "504".')?(r=null!==a?UWA.is(n,"boolean")&&n?a:f.timedOut+" "+f.verifyConnection:UWA.is(n,"boolean")&&n?f.backgroundNotifMsg:f.timedOut+" "+f.verifyConnection,o=f.timedOut,s=f.verifyConnection):r=c.endsWith('return ResponseCode with value "500".')&&t&&"object"==typeof t&&t.message?t.message:c.endsWith('return ResponseCode with value "500".')&&t&&"object"==typeof t.error&&t.error.message?t.error.message:f.webServiceError:c.startsWith("The request has timedout")?(r=null!==a?UWA.is(n,"boolean")&&n?a:f.timedOut+" "+f.verifyConnection:UWA.is(n,"boolean")&&n?f.backgroundNotifMsg:f.timedOut+" "+f.verifyConnection,o=f.timedOut,s=f.verifyConnection):"string"==typeof c?r=c:"null"===e&&(r=f.webServiceError)}}else t.error&&t.error.message?r=t.error.message:t.message?r=t.message:t.errorMessage&&(r=t.errorMessage);return{message:r,isNotificationInfo:r===f.backgroundNotifMsg||r===a,title:o,subtitle:s,submessage:null}},onWebServiceError:function(e,t,n,i,r){e(y.parseWebServiceError(t,n),i,r)},getCurrentAppName:function(e){var t=null;return e?(e.hasOwnProperty("widget")&&"object"==typeof e.widget?e.widget.hasOwnProperty("data")&&(e.widget.data.hasOwnProperty("appId")||e.widget.data.hasOwnProperty("x3dAppId"))&&(e.widget.data.hasOwnProperty("appId")?t=e.widget.data.appId:e.widget.data.hasOwnProperty("x3dAppId")&&(t=e.widget.data.x3dAppId)):e.hasOwnProperty("options")?!e.options.hasOwnProperty("x3dAppId")||"ENOPRSU_AP"!=e.options.x3dAppId&&"ENOPSTR_AP"!=e.options.x3dAppId||(t=e.options.x3dAppId):"undefined"!=typeof widget&&widget.hasOwnProperty("data")&&widget.data.hasOwnProperty("appId")&&(t=widget.data.appId),t):t},getDeletedItems:function(e,t){var n=this;r.app_initialization((function(){y.getSecurityContext(this.tenant,(function(i){var s=r.get3DSpaceWSUrl(n.tenant,"/resources/lifecycle/Delete/deleteditems",null);o.authenticatedRequest(s,{method:"POST",headers:r.getHeaders(i),timeout:6e5,onComplete:function(t){console.log("getDeletedItems: onComplete:"+t),e(t)},data:"",onFailure:function(e,n){var i=y.parseWebServiceError(e,n);console.log("Failed to retrive data from the server"),t(i)},ontimeout:function(e){console.log("Timeout error"),t(f.timeout)},type:"json"})}))}))},isDECType:function(e){return e.startsWith("CAT")},_getAppId:function(e){try{return e.getValue("appId")}catch(e){return""}},isInLifecycleWidget:function(e){return"ENOLCMI_AP"===y._getAppId(e)},isInPSEditorWidget:function(e){return"ENOPSTE_AP"===y._getAppId(e)},isInXCADEditorWidget:function(e){return"ENOSTDE_AP"===y._getAppId(e)},translationServicePromise:function(e,t){var n=this;return new UWA.Class.Promise((function(i,r){n.post(e,"/resources/lifecycle/util/i18n",t,(function(e){i(e)}),(function(e){r(e)}))}))},getEffectivityPromise:function(e){return new UWAPromise((t=>{this.loadEffectivities(e,(e=>{var n=this.formatEffectivities(e);t(n)}))}))},formatEffectivities:function(e){var t=[];if(null==e)return console.log("unexpected effectivity"),t;var n=e.expressions;if(null==n)return console.log("unexpected effectivity"),t;for(var i=Object.keys(n),r=i.length,o=0;o<r;o++){var s=i[o],a=n[s],c=a.hasEffectivity;if("ERROR"!=c){var l=[],u={metatype:"effectivity",physicalID:s,data:l};t.push(u);var d="YES"==c?f.Yes:f.No;if(l.push({name:"Effectivity",nls:f.Effectivity,type:"string",value:[d]}),"NO"!=c){var p=a.content;if(null!=p){var h=p.Variant;null!=h&&l.push({name:"VariantOption",nls:f.VariantOption,type:"string",value:h});var g="",v="",m=p.Evolution;null!=m&&(g=null==m.Current?"":m.Current,v=null==m.Projected?"":m.Projected,l.push({name:"CurrentEvolution",nls:f.CurrentEvolution,type:"string",value:[g]}),l.push({name:"ProjectedEvolution",nls:["ProjectedEvolution"],type:"string",value:[v]}))}else console.log("unexpected effectivity")}}}return{results:t}},loadEffectivities:function(e,t){var n="/resources/modeler/configuration/navigationServices/getMultipleFilterableObjectInfo?timestamp="+(new Date).getTime().toString(),i={version:"1.0",output:{targetFormat:"TXT",withDescription:"YES",view:"ALL",domains:"ALL"},pidList:"["+e.join(",")+"]"};this.doPost(n,i,widget.getValue("x3dPlatformId"),widget.securityContext,function(e){t(e)}.bind(this),function(e){t({expressions:{}})}.bind(this))},getPropertiesPromise:function(e,t,n,r){return new i((function(i,o){("GET"==r?v:m)(e,n,t,h,i,o)}))},doPost:function(e,t,n,i,o,s){m(e,t,{url3DSpace:r.get3DSpaceBaseUrl(n),tenant:n,securityContext:i},h,o,s)},loadAttrs:function(e,t,n,o,s,a,c,l,d,f){for(var p=null,h=[],g=[],v=[],m=[],y=[],S=[],b=[],A={objectIds:[],serviceIds:[],tenant:s,securityContext:widget.securityContext},C=0;C<e.length;C++)"3DSpace"===t[C]?y.push(e[C]):"3dportfolio"===t[C]?m.push(e[C]):(A.objectIds.push(e[C]),A.serviceIds.push(t[C]));if(o.indexOf(1)>=0)for(C=0;C<n.length;C++)S.push(n[C]);if(o.indexOf(2)>=0)for(C=0;C<n.length;C++)b.push(n[C]);if(m.length){var _="",x="";if(null!=d)_="/"+d.typeInfo["dsxpfl:PortfolioVersion"].attributes.url,x=d.typeInfo["dsxpfl:PortfolioVersion"].url;else if(f&&f._RDF_SETTINGS&&f._RDF_SETTINGS._BASE_URL)x=f._RDF_SETTINGS._BASE_URL.replace("/3drdfpersist/v0","/3dportfolio"),_="/getAttrs";h.push(this.getPropertiesPromise(_,{securityContext:widget.securityContext,tenant:s,url3DSpace:x},{objectIds:m.join(",")},"GET"))}else y.length?(p={debug_properties:"",readonly:"false",navigateToMain:"true",attributes:"true",plmparameters:"true",busIDs:y,relIDs:[],lIds:[]},u.enrichRequestWithMetrics(p,{UXName:c}),h.push(this.getPropertiesPromise("/resources/v1/collabServices/attributes/op/read",{tenant:s,securityContext:widget.securityContext,url3DSpace:r.get3DSpaceBaseUrl(s)},p,"POST"))):null!=l&&A.objectIds.length&&h.push(this.getFederatedAttributesPromise(A));S.length&&(p={debug_properties:"",readonly:"false",navigateToMain:"false",attributes:"true",plmparameters:"true",busIDs:[],relIDs:S,lIds:[]},g.push(this.getPropertiesPromise("/resources/v1/collabServices/attributes/op/read",{tenant:s,securityContext:widget.securityContext,url3DSpace:r.get3DSpaceBaseUrl(s)},p,"POST"))),b.length&&v.push(this.getEffectivityPromise(b));var P=h.concat(g).concat(v);i.allSettled(P).then((function(e){for(var t=[],n=0;n<e.length;n++)if("rejected"!==e[n].state){var i=e[n].value;void 0!==i&&void 0!==i.results&&null!==i.results&&(t=t.concat(i.results))}a(t)}))}});return y})),define("DS/LifecycleServices/Refresh",["UWA/Class","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/NotificationPublish","DS/LifecycleCmd/MessageMediator"],(function(e,t,n,i,r){"use strict";return e.singleton({init:function(e){r.addEvent("onModification",(function(e){this._refreshCb(e)}),this)},setContext:function(e){null!=e&&(this.context=e)},_refreshCb:function(e){var t;null==e.context?(console.warn("No context sent for refresh"),t=this.context):(t=e.context,e.context=null),this._refresh(e,t)},_refresh:function(e,r){var o=t.getCurrentAppName(r),s=n.getCurrentFolderID(),a=n.getTenant();a||(a="undefined"!=typeof widget&&widget?widget.getValue("x3dPlatformId"):null),this.refreshEditors(s,e,o,r,(function(){if("function"==typeof r.refreshView&&["ENOLCMI_AP","DELMGA_AP","DELMFN_AP","X3DRYAP_AP","ENORERE_AP","ENXENG_AP","ENXWDOC_AP"].indexOf(o)>-1)try{r.refreshView(e)}catch(e){}var t=null;UWA.is(r.getUUID,"function")&&(t=r.getUUID());var n;n={From:"Lifecycle",Refresh:e,AppID:o,OriginID:t,tenant:a,WidgetID:widget?widget.id:void 0},i.publish("Lifecycle.Modification",n)}))},refreshEditors:function(e,t,n,i,r){var o=0;if(t.hasOwnProperty("created")&&(o+=t.created.length),t.hasOwnProperty("modified")&&(o+=t.modified.length),t.hasOwnProperty("deleted")&&(o+=t.deleted.length),t.hasOwnProperty("restored")&&(o+=t.restored.length),o>0){var s=[],a=[];t.hasOwnProperty("created")&&t.created.forEach((function(i){"ENOPRSU_AP"!=n&&"ENOPSTR_AP"!=n&&"ENXSOFT_AP"!=n||a.push(i.physicalid);var r=!0;(t.hasOwnProperty("refreshFolder")&&(r=t.refreshFolder),r&&i.hasOwnProperty("folders")&&e)&&(-1==i.folders.indexOf(e)&&(r=!1));if(r&&(null==e&&i.hasOwnProperty("folders")&&i.folders.length>0&&i.folders[0]&&(e=i.folders[0]),e)){var o=[e,i.physicalid];s.push(o)}}));var c=!1;a.length>0&&i&&"function"==typeof i.author&&"function"==typeof i.add&&(i.author(!0),i.add({pids:a}),c=!0);var l=[],u=[],d=[],f="deleted",p=!1;t.hasOwnProperty("deleted")&&t.deleted.forEach((function(e){u.push(e.physicalid),"PhysicalDeleteAfterLogical"===e.operation&&(f="physicaldeleteafterlogical"),e.impl&&(e.impl.contains("Workspace_Vault")||e.impl.contains("Workspace"))&&(p=!0)})),t.hasOwnProperty("modified")&&t.modified.forEach((function(e){l.push(e.physicalid)})),t.hasOwnProperty("restored")&&t.restored.forEach((function(e){d.push(e.physicalid)})),require(["DS/PADUtils/PADCommandProxy","DS/PADUtils/PADSession","i18n!DS/PADUtils/assets/nls/PADUtils.json"],(function(e,t,n){var o=e.create();if(p){(g={}).deleted=u,(h={}).authored=g,i.author(!0),i.onRefresh(h),o.destroy()}else{o.authored({authored:!0});var h,g={};l.length>0&&(g.modified=l),u.length>0&&(g[f]=u),s.length>0&&(g.connected=s),d.length>0&&(g.restored=d),a.length>0&&!c&&(g.created=a),(h={}).authored=g,o.refresh(h),o.destroy()}r()}),(function(e){r()}))}}})})),define("DS/LifecycleServices/TranslationService",["UWA/Core","UWA/Controls/Abstract","UWA/Class/Promise","DS/LifecycleCmd/Set","DS/LifecycleCmd/Dictionary","DS/LifecycleServices/LifecycleServices"],(function(e,t,n,i,r,o){"use strict";return t.extend({translationFailure:!1,init:function(e){this.states=new r,this.types=new i,this.policies=new i,this.handleError=e&&e.handleError||!1},addStateAndType:function(e,t){this.states.add(e,{type:t})},addStateAndId:function(e,t){this.states.add(e,{physicalid:t})},addStateAndPolicy:function(e,t){this.states.add(e,{policy:t})},addType:function(e){this.types.add(e)},addPolicy:function(e){this.policies.add(e)},initAsync:function(e){var t=this;return new UWA.Class.Promise((function(n,i){o.translationServicePromise(e,t._createPayload()).then((function(e){t._parseResponse(e),n()}),(function(e){t.handleError?(console.log("TranslationService translation failed: ",e),t.translationFailure=!0,n()):i(e)}))}))},translateState:function(e){return this.stateNls&&this.stateNls.contains(e)?this.stateNls.find(e):e},translateType:function(e){return this.typeNls&&this.typeNls.contains(e)?this.typeNls.find(e):e},translatePolicy:function(e){return this.policyNls&&this.policyNls.contains(e)?this.policyNls.find(e):e},_createPayload:function(){var e=this,t={states:[],types:[],policies:[]};return this.states.each((function(n,i){t.states.push(e._createStatePayload(n,i))})),this.types.each((function(e){t.types.push(e)})),this.policies.each((function(e){t.policies.push(e)})),t},_createStatePayload:function(e,t){var n={state:e};return UWA.merge(n,t)},_parseResponse:function(e){var t=this;this.stateNls=new r;var n=0;this.states.each((function(i){e.states&&e.states.length>n?t.stateNls.add(i,e.states[n++]):t.stateNls.add(i,i)})),this.typeNls=new r,n=0,this.types.each((function(i){e.types&&e.types.length>n?t.typeNls.add(i,e.types[n++]):t.typeNls.add(i,i)})),this.policyNls=new r,n=0,this.policies.each((function(i){e.policies&&e.policies.length>n?t.policyNls.add(i,e.policies[n++]):t.policyNls.add(i,i)}))}})})),define("DS/LifecycleServices/LifecycleCommandManager",["css!DS/LifecycleServices/LifecycleServices","UWA/Core","UWA/Controls/Abstract","DS/Controls/Toggle","DS/PlatformAPI/PlatformAPI","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/UIKIT/Accordion","DS/WAFData/WAFData","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls"],(function(e,t,n,i,r,o,s,a,c,l){return n.extend({tenant:null,_conditionalDiv:null,_conditionalInput:null,init:function(){this.options=[]},getOptions:function(e,t,n){var i=this;o.getSecurityContextPromise(this.tenant,n).then((function(n){i._getOptions(e,t,n)})).catch((function(e){t(o.parseWebServiceError(e))}))},_getOptions:function(e,t,n){var i=function(e,n){"function"==typeof t&&t(e,n)},r=this,a=s.get3DSpaceWSUrl(r.tenant,"/resources/lifecycle/"+e.command+"/options",null);c.authenticatedRequest(a,{method:"POST",type:"json",headers:s.getHeaders(n),timeout:6e5,data:JSON.stringify(e),onComplete:function(t){console.log("options for "+e.command+": COMPLETED"),console.log(t);var n={logicalDeleteSupported:!1};if(t.results&&t.results.length>0){var o=[],s=[];let e=new Set,i=!1,c=null;for(var a=0;a<t.results.length;a++){if(Array.isArray(t.results[a].options)&&t.results[a].options.length>0){let n=!1;t.results[a].options.forEach((function(t){let i=t.key+t.value,r="advanced"===t.key&&1==t.value;r&&(n=!0),e.has(i)||(r?c=t:o.push(t),e.add(i))})),n||(i=!0)}Array.isArray(t.results[a].objects)&&t.results[a].objects.length>0&&t.results[a].objects.forEach((function(e){s.push(e)}))}c&&!i&&o.push(c),r.options=o,t.results[0].hasOwnProperty("logicalDelete")&&(n.logicalDeleteSupported=t.results[0].logicalDelete),n.objects=s||[]}n.options=r.options?r.options:[],n.report=t.report,n.status=t.status,t.hasExtProviders&&(n.hasExtProviders=[...t.hasExtProviders]),"failure"===n.status?i(n.report[0].error,n):r.dispatchEvent("onCompleteGetOptions",n)},onFailure:function(e,t){console.log("options:Failure..."+e),i(o.parseWebServiceError(e,t))},ontimeout:function(){console.log("options: A connection timeout occured."),i()}})},buildOptionPanel:function(e){var t=this,n=document.createElement("div");return n.className="lifecycle-options",void 0!==e&&e.forEach((function(e){var i=e.key,r=e.type,o=e.nlsKey;void 0===o&&(o=i);var s=e.value,c=e.availability;void 0===c&&(c=!0);var l=document.createElement("div");l.className="lifecycle-option",l.dataset.optionType=e.type,l.dataset.optionKey=e.key;var u=document.createElement("div");u.className="lifecycle-textOptionKey";var d=document.createElement("b");if(d.innerHTML=o,u.appendChild(d),"text"===r){void 0===s&&(s="");var f=document.createElement("div");f.className="input-validation-container",(p=document.createElement("input")).className="lifecycle-option-"+i,p.type=r,p.name=i,p.value=s,p.disabled=!c,p.addEventListener("blur",(function(){e.value=p.value;var n={options:t.options};t.dispatchEvent("onModifyOptions",n)}),!0),l.appendChild(u),f.appendChild(p),l.appendChild(f)}else if("checkbox"===r){var p;void 0===s&&(s=!1),(p=document.createElement("input")).className="lifecycle-option-"+i,p.type=r,p.name=i,p.disabled=!c,p.checked=s,p.addEventListener("change",(function(){e.value=p.checked;var n={options:t.options};t.dispatchEvent("onModifyOptions",n)})),l.appendChild(p),l.appendChild(u);e.conditional&&!0===e.conditional&&e.conditionaltext&&t.buildConditionalDeleteDiv(e.conditionaltext,"none")}else"radio"===r||"accordion"===r&&new a({className:"filled",items:[{title:o,content:UWA.createElement("div")}],events:{onOpen:function(){var e=this.items[0].elements.content||this.items[0].content;t.dispatchEvent("onOpenAccordion",{div:e})},onClose:function(){t.dispatchEvent("onCloseAccordion")}}}).inject(l);n.appendChild(l),t._conditionalDiv&&n.appendChild(t._conditionalDiv)})),n},buildCheckboxOptionPanel:function(e){var t,n=this;if(!(void 0!==e&&Array.isArray(e)&&e.length>0))return(t=document.createElement("div")).className="lifecycle-options",t;if("checkbox"!==(e[0].type?e[0].type:"checkbox"))return n.buildObjectPanel(e);if((t=document.createElement("div")).className="lifecycle-options",void 0!==e){var r=e[0],o=r.key,s=(r.type,r.nlsKey);void 0===s&&(s=o);var a=r.value,c=r.availability;void 0===c&&(c=!0);var l=document.createElement("div");l.className="lifecycle-option-checkbox",void 0===a&&(a=!1);var u=new i({type:"checkbox",label:s,checkFlag:a});u.name=o,u.addEventListener("buttonclick",(function(e){r.value=e.dsModel.checkFlag;var t={options:n.options};n.dispatchEvent("onModifyOptions",t)})),u.inject(l);r.conditional&&!0===r.conditional&&r.conditionaltext&&n.buildConditionalDeleteDiv(r.conditionaltext,"none")}return t.appendChild(l),n._conditionalDiv&&t.appendChild(n._conditionalDiv),t},buildConditionalDeletePanel:function(e){var t=this,n=document.createElement("div");return n.className="lifecycle-options",t.buildConditionalDeleteDiv(e,"block"),t._conditionalDiv&&n.appendChild(t._conditionalDiv),n},buildConditionalDeleteDiv:function(e,t){that=this,that._conditionalDiv=document.createElement("div"),that._conditionalDiv.className="lifecycle-conditional-checkbox",that._conditionalDiv.name="lifecycle-conditional-div",that._conditionalDiv.style.display=t,that._conditionalInput=new i({type:"checkbox",label:e,checkFlag:!1}),that._conditionalInput.name="conditional",that._conditionalInput.addEventListener("buttonclick",(function(e){var t={};t.value=e.dsModel.checkFlag,that.dispatchEvent("onModifyConditional",t)})),that._conditionalInput.inject(that._conditionalDiv)},setDisplayStateConditionalDeleteCheckbox:function(e){that=this,that._conditionalDiv&&(!0===e?that._conditionalDiv.style.display="block":(that._conditionalDiv.style.display="none",!0===that._conditionalInput.checkFlag&&that._conditionalInput.toggle()))},findObjectDerivedFromSelection:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];if(void 0!==r){var o=r["attribute[PLMReference.V_DerivedFrom]"],s=r.derivedFromPhysicalid;if(void 0===s&&(s=r.derivedfromphysicalid),void 0!==o||void 0!==s)for(var a=0;a<t.length;a++){var c=t[a];if(void 0!==c){var l=c.physicalid;if(o===l||s===l){n.push(r);break}}}}}return n},setTenant:function(e){this.tenant=e}})})),define("DS/LifecycleServices/DefaultCredential",["UWA/Controls/Abstract","DS/LifecycleServices/LifecycleServices"],(function(e,t){"use strict";return{loadDefaultContexCredential:e=>{return(n=e.tenant,i=e.context,t.getSecurityContextPromise(n,i)).then((e=>UWA.Promise.resolve((e=>e.startsWith&&e.startsWith("ctx::")?e:"ctx::"+e)(e))));var n,i}}})),define("DS/LifecycleServices/OSLCServicesHelper",["UWA/Class","DS/LifecycleServices/XMLDocHelper","DS/LifecycleServices/LifecycleServices"],(function(e,t,n){"use strict";return{ServiceProvider:e.extend({xmlDoc:void 0,operationTypes:{CREATION_DIALOG:"oslc:creationDialog",SELECTION_DIALOG:"oslc:selectionDialog"},init:function(e){this.xmlDoc=t.loadXMLDoc(e)},getServiceDetails:function(e,n,i,r){var o,s=[];if(1===(e=t.filterDescendants([this.xmlDoc],{tag:"oslc:ServiceProvider",attrList:{"rdf:about":{value:e,allowPartialMatch:!0}}})).length){o=t.filterDescendants(e,{tag:n}),o=t.filterIfDescendantElementExists(o,{tag:"oslc:resourceType",attrList:{"rdf:resource":{value:i}}}),r&&(o=t.filterIfDescendantElementExists(o,{tag:"oslc:usage",attrList:{"rdf:resource":{value:"#default",allowPartialMatch:!0}}}));for(var a=0,c=o.length;a<c;a++){for(var l=t.getChildren(t.filterChildren(o.slice(a,a+1))[0]),u={},d=0,f=l.length;d<f;d++){var p=l[d],h=t.getNodeInfo(p);u[h.tag]=h}s.push(u)}}return s}}),ProjectAreaCatalog:e.extend({xmlDoc:void 0,serviceProviderList:[],init:function(e){this.serviceProviderList.length=0,this.xmlDoc=t.loadXMLDoc(e);for(var n=t.filterDescendants([this.xmlDoc],{tag:"oslc:ServiceProvider"}),i=0,r=n.length;i<r;i++){var o=t.getNodeInfo(n[i]),s={};s.url=o.attrList["rdf:about"],s.title=t.getNodeInfo(t.filterChildren([n[i]],{tag:"dcterms:title"})[0]).text,s.details=t.getNodeInfo(t.filterChildren([n[i]],{tag:"oslc:details"})[0]).attrList["rdf:resource"],this.serviceProviderList.push(s)}this.serviceProviderList.sort((function(e,t){var n=e.title.toUpperCase(),i=t.title.toUpperCase();return n<i?-1:n>i?1:0}))}}),getProxyObjectExternalDetails:function(e,i,r){n.oslcRequest(e.tenantId,e.proxyService,e.OSLCResource,{method:"GET",headers:{Accept:"application/rdf+xml"},onSuccess:function(n){var i,r=t.loadXMLDoc(n),o=t.filterDescendants([r],{tag:"rdf:Description"}),s=t.getNodeInfo(t.filterChildren(o,{tag:"dcterms:identifier"})[0]).text,a=t.getNodeInfo(t.filterChildren(o,{tag:"dcterms:title"})[0]).text,c=t.getNodeInfo(t.filterChildren(o,{tag:"dcterms:modified"})[0]).text;i=e.repositoryRootURL&&e.OSLCResource.startsWith(e.repositoryRootURL)?e.OSLCResource.substring(e.repositoryRootURL.length):e.OSLCResource,e.onSuccess({type:e.proxyType,dataelements:{Proxy_Id:s,Proxy_Service:e.proxyService,Proxy_Tenant:e.tenantId,Proxy_URL:i,Proxy_Title:a,Proxy_Modified:c,Proxy_State:""}})},onError:e.onError})},updateProxyObject:function(e){UWA.Class.Promise.all([n.getCsrfKeyPromise(e.tenantId),n.getSecurityContextPromise(e.tenantId)]).then((function(t){e.data.csrf=t[0],n.post(e.tenantId,"/resources/v1/modeler/e6wproxy",e.data,e.onSuccess,e.onError)})).catch((function(t){e.onError(t)}))}}})),define("DS/LifecycleServices/WebReq",["UWA/Class","UWA/Promise","DS/WAFData/WAFData","DS/LifecycleServices/Utils","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings"],(function(e,t,n,i,r,o){var s=e.singleton({defaults:{type:"json",timeout:6e4},init:function(){["delete","get","head","options"].forEach((function(e){this[e]=function(t,n){return this.request(UWA.merge(n||{},{url:t,method:e}))}}),this),["post","put","patch"].forEach((function(e){this[e]=function(t,n,i){let r={...i||{}};return this.request(UWA.merge(r,{url:t,method:e,data:n}))}}),this)},request:function(e){return"string"==typeof e?e={url:arguments[0]}:(e=e||{}).data&&"string"!=typeof e.data&&(e.data=JSON.stringify(e.data)),UWA.Utils.parseUrl(e.url).protocol||(e.url=o.get3DSpaceWSUrl(e.tenant,e.url,null)),(e=UWA.merge(e,this.defaults)).method=e.method?e.method.toLowerCase():"get",e.headers=e.headers||o.getHeaders(e.securityContext),e.securityContext||delete e.headers.SecurityContext,this._dispatchPromise(e)},_dispatchPromise:function(e){var t=this;return new UWA.Promise((function(i,r){n.authenticatedRequest(t._createURL(e),{method:e.method,headers:e.headers,timeout:e.timeout,data:e.data,type:e.type,onComplete:function(e){i(e)},onFailure:function(e,n,i){r({error:e,response:n,headers:i,errorMessage:t._parseError(e,n)})},onTimeout:function(){r({isTimeout:!0})}})}))},_parseError:function(e,t){return t&&t.error?JSON.stringify(t.error):r.parseWebServiceError(e,t)},_createURL:function(e){var t=e.url;return i.forEach(e.params,(function(e,n){t+=(-1===t.indexOf("?")?"?":"&")+n+"="+e})),t}});return s.init(),s}));const chunkit=(e,t,n)=>{if(n){if(!e.hasOwnProperty(n)&&!Array.isArray(e[n]))return[e];const i=[];return chunkit(e[n],t).forEach((t=>{let n={...e};n.ids=t,i.push(n)})),i}if(!Array.isArray(e))return[e];const i=[];for(;e.length>0;){const n=e.splice(0,t);i.push(n)}return i};define("DS/LifecycleServices/ChunkedwebReq",["UWA/Class","UWA/Promise","DS/WAFData/WAFData","DS/LifecycleServices/Utils","DS/LifecycleServices/WebReq"],(function(e,t,n,i,r){return e.singleton({defaults:{chunkSize:1e3},post:function(e,t,n){chunkSize=n&&n.chunkSize||this.defaults.chunkSize;let i=n&&n.chunkMember||void 0;return new UWA.Promise(((o,s)=>{let a=chunkit(t,chunkSize,i),c=[];a.forEach((t=>{c.push(r.post(e,t,n))})),UWA.Promise.all(c).then((e=>{let t=[];e.forEach((e=>{t=t.concat(e)})),o(t)})).catch((e=>{s(e)}))}))}})})),define("DS/LifecycleServices/expandServices/ComputeReusableService",["UWA/Core","UWA/Controls/Abstract","UWA/Class/Promise","DS/LifecycleCmd/Set","DS/LifecycleCmd/Dictionary","DS/LifecycleServices/LifecycleServices"],(function(e,t,n,i,r,o){"use strict";return t.extend({computationfailure:!1,init:function(e){this.nodes=new r,this.roots=new i,this.operationDetail="",this.handleError=e&&e.handleError||!1},setOperationDetail:function(e){this.operationDetail=e},addNode:function(e,t,n){if(t&&e){let i={physicalid:e,rootid:t,hasOpening:!0,children:[]};n&&n.forEach((e=>{i.children.push(e+"-"+t)})),this.nodes.add(e+"-"+t,i),this.roots.add(t)}else if(e){let t={physicalid:e,rootid:"",hasOpening:!0,children:[]};n&&n.forEach((e=>{t.children.push(e)})),this.nodes.add(e,t),this.roots.add("")}else console.log("ComputeReusableService.addNode / invalid node")},computeAsync:function(e){var t=this;return new UWA.Class.Promise((function(n,i){if(e&&"tenant"!=e){const i=Date.now();console.log("computeReusableAsync"),t._computeHasOpeningAsync(e).then((()=>t._computeReusableAsync(e))).then((()=>{const e=Date.now()-i;console.log("computeReusableAsync done in "+e+" ms"),n()}))}else n()}))},getReusedSet:function(){var e=new i;return this.nodes.each((function(t,n){n.reused&&e.add(n.physicalid)})),e},_computePayloadsSimultaneously:function(e,t){var n=this;return new UWA.Class.Promise((function(i,r){let o=[];t.forEach((t=>o.push(n._postPromise(e,t)))),UWA.Promise.all(o).then((function(e){e.forEach((e=>n._parseResponse(e))),i()}),(function(e){n.handleError?(console.log("ComputeReusableService translation failed: ",e),n.computationfailure=!0,i()):r(e)}))}))},_computeReusableAsync:function(e){var t=this;return new UWA.Class.Promise((function(i,r){if(e&&"tenant"!=e){let r=100,o=3,s=[];t.roots.each((e=>{let n=t._createChunks(r,e);s=s.concat(n)})),console.log("computeReusableAsync nb chunks: "+s.length);let a=0;const c=i=>{let r=[];for(;i<s.length&&r.length<o;){let e=t._createPayload(s[i]);e.data.length>0&&r.push(e),i++}if(0==r.length)return n.resolve();if(t.computationfailure)return n.resolve();a++;const l=Date.now();return t._computePayloadsSimultaneously(e,r).then((()=>{const e=Date.now()-l;return console.log("loop "+a+" done in "+e+" ms"),c(i)}))};c(0).then((()=>{i()}))}else i()}))},_createPayload:function(e){if(e){var t={data:[]};return e.forEach((e=>{!e.reused&&e.hasOpening&&t.data.push(e)})),this.operationDetail&&(t.operationDetail=this.operationDetail),t}},_createChunks:function(e,t){var n=[],i=[];return this.nodes.each((function(r,o){t&&o.rootid!=t||!t&&o.rootid||(i.length<e?i.push(o):(n.push(i),(i=[]).push(o)))})),i.length&&n.push(i),n},_parseResponse:function(e){if(!e)return console.log("ComputeReusableService invalid response from server"),void(this.computationfailure=!0);if(!e.status||!e.results)return console.log("ComputeReusableService invalid response from server"),void(this.computationfailure=!0);if("success"!=e.status)return console.log("ComputeReusableService computation from server: "+e.status),void(this.computationfailure=!0);let t=[];e.results.forEach((e=>{let n=e.rootid||"",i=e.physicalid,r=e.reused;n&&r&&this.nodes.contains(i+"-"+n)?(this.nodes.find(i+"-"+n).reused=!0,t.push(i+"-"+n)):r&&this.nodes.contains(i)&&(this.nodes.find(i).reused=!0,t.push(i))})),t.forEach((e=>{this._propagateResults(e)}))},_propagateResults:function(e){var t=this.nodes.find(e);if(t){var n=t.children;n&&n.forEach((e=>{this.nodes.contains(e)&&(this.nodes.find(e).reused||(this.nodes.find(e).reused=!0,this._propagateResults(e)))}))}},_postPromise:function(e,t){return new UWA.Class.Promise((function(n,i){o.post(e,"/resources/lifecycle/duplicate/reusable_objects",t,(function(e){n(e)}),(function(e){i(e)}))}))},_computeHasOpeningAsync:function(e){var t=this;return new UWA.Class.Promise((function(n,i){e&&"tenant"!=e?t._postHasOpeningPromise(e,t._createHasOpeningPayload()).then((function(e){t._parseHasOpeningResponse(e),n()}),(function(e){t.handleError?(console.log("ComputeHasOpeningService translation failed: ",e),t.computationfailure=!0,n()):i(e)})):n()}))},_createHasOpeningPayload:function(){var e=[];return this.nodes.each((function(t,n){e.push(n)})),{data:e}},_parseHasOpeningResponse:function(e){if(!e)return console.log("ComputeHasOpeningService invalid response from server"),void(this.computationfailure=!0);if(!e.status||!e.results)return console.log("ComputeHasOpeningService invalid response from server"),void(this.computationfailure=!0);if("success"!=e.status)return console.log("ComputeHasOpeningService computation from server: "+e.status),void(this.computationfailure=!0);let t=new i;e.results.forEach((e=>{e.hasOpening&&t.add(e.physicalid)})),this.nodes.each((function(e,n){n.hasOpening=!1,t.contains(n.physicalid)&&(n.hasOpening=!0)}))},_postHasOpeningPromise:function(e,t){return new UWA.Class.Promise((function(n,i){o.post(e,"/resources/lifecycle/duplicate/reusable_hasopening",t,(function(e){n(e)}),(function(e){i(e)}))}))}})}));const getAssyRootNode=e=>{let t=e.occurrences.filter((t=>t.occurrenceid===e.rootoccurrence)).map((e=>e.nodeid))[0];return e.nodes.filter((e=>e.nodeid===t))[0]};function ReplaceWithPolyfill(){var e,t=this.parentNode,n=arguments.length;if(t)for(n||t.removeChild(this);n--;)"object"!=typeof(e=arguments[n])?e=this.ownerDocument.createTextNode(e):e.parentNode&&e.parentNode.removeChild(e),n?t.insertBefore(this.previousSibling,e):t.replaceChild(e,this)}define("DS/LifecycleServices/expandServices/duplicateExpand",["UWA/Controls/Abstract","DS/LifecycleServices/expandServices/ComputeReusableService","DS/LifecycleServices/WebReq","DS/LifecycleServices/AssemblyJson","DS/LifecycleServices/Expandv2Parser","DS/LifecycleServices/LifecycleServicesSettings","i18n!DS/AdvancedView/assets/nls/AdvancedViewNls"],(function(e,t,n,i,r,o,s){"use strict";return e.extend({init:function(e){this.options=e,this.options.showError=e.showError?showError:()=>{},this.options.noFilter=!!e.noFilter,this.options.useV2expand=null!=e.useV2expand&&e.useV2expand,this.hasCachedFilteredExpand=!1},expand:async function(e,t){return this.expandPromise=this.expandPromise||new UWA.Promise((async(n,i)=>{this.assemblies=[],this.roots=this.options.roots,this.obj2expandProviders=this.options.objId2ExpandProvider||new Map,this.filterReqFails=[];try{let i=await this.options.getAuthoringMode(),r=await this.expandStructures(e,i);t?this.computeReusableFromBL(this.assemblies):await this.computeReusableFromBL(this.assemblies),n({assemblies:this.assemblies,idCounters:r})}catch(e){let t=s.expandFailed+" : "+e;console.error(t),i(t)}})),this.expandPromise},expandStructures:function(e,t){let n=!1,i=[];this.roots.forEach((r=>{let o=this.obj2expandProviders.has(r);!t&&this.options.expandReqBuilder.isFiltered(r)&&(n=!0),i.push(this.expandStructure(r,e,t,o))}));try{return new UWA.Promise(((e,t)=>{UWA.Promise.all(i).then((t=>{let i={},r={nextNodeId:0,nextOccId:0};t.forEach((e=>{let t=this.expandDone(e,i)||{};r.nextNodeId=i.firstNodeId=t.nextNodeId,r.nextOccId=i.firstOccId=t.nextOccId})),n&&(this.hasCachedFilteredExpand=!0),e(r)})).catch((function(e){console.error(e),t(e)}))}))}catch(e){console.error(e),reject(e)}},expandStructure:function(e,t,n,i){if(i)return this.expandStructureFederatedPromise(e,t,n);var r=this;return this.expandStructurePromise(e,t,n).then((function(i){if(!i||!i.results||0!=i.results.length||n)return UWA.Promise.resolve(i);console.log("expandStructure: No data in results, retrying with authored (non-index)"),r.options.expandReqBuilder.isFiltered(e)&&(r.filterReqFails.push(e),r.options.showError(s.filteredExpandEmpty)),r.expandStructurePromise(e,t,!0).then((e=>UWA.Promise.resolve(e)))})).then((function(n){return n&&"not_spported_query"===n.status?(console.log("query lifecycle/expand/db failed, retrying on enopad implementation"),r.expandStructurePromise(e,t,!0,!0)):UWA.Promise.resolve(n)})).catch((function(e){console.error("expand failed:",e);var t=s.expandFailed+": ";throw e.isTimeout?t+=s.connectionTimeout:t+=e?e.error?e.error:e:"",t}))},expandDone:function(e,t){this.dispatchEvent("onExpandDone",{expandData:e,options:t});var n=o.get3DSpaceBaseUrl(this.options.tenant);if(!e)throw s.expandFailed;if(!e.results){if(e.errorMessage)throw e.errorMessage;throw s.expandFailed}this.options.useV2expand;let a=null,c=Object.assign({returnIdCounters:!0,baseUrl:n},t);if(a=this.options.useV2expand&&e.infos?e?r.parse(e,c):{nodes:[]}:e?i.convertFromExpandFormat(e,c):{nodes:[]},e){if(!a)throw s.expandFailed;e.federatedExpand||(a.legacyExpand=!0);let t=getAssyRootNode(a);this.options.expandReqBuilder.isFiltered(t.physicalid)&&(this.filterReqFails.includes(t.physicalid)||(t.isFilteredRoot=!0)),this.assemblies=this.pruneAndCollectRoots(this.assemblies,a)}return a},pruneAndCollectRoots:function(e,t){const n=e=>{let t=e.occurrences.filter((t=>t.occurrenceid===e.rootoccurrence)).map((e=>e.nodeid))[0];return e.nodes.filter((e=>e.nodeid===t)).map((e=>e.physicalid))[0]},i=(e,t)=>e.nodes.filter((e=>e.physicalid===t)).length>0;let r=[],o=n(t),s=!1;return e.forEach((e=>{s||(s=i(e,o))})),s||r.push(t),e.forEach((e=>{i(t,n(e))||r.push(e)})),r},expandStructurePromise:function(e,t,i,r){var s=this.options.expandReqBuilder.build(e,!i,r,this.options.noFilter),a=o.get3DSpaceWSUrl(this.options.tenant,s.URI,null);let c=o.getHeaders();return c.SecurityContext=t,n.post(a,JSON.stringify(s.data),{securityContext:t,timeout:6e5,params:s.params,headers:c})},expandStructureDelegatedPromise:function(e,t,i){var r=o.get3DSpaceWSUrl(this.options.tenant,"/resources/lifecycle/expand/delegated",null);let s={ids:[this.roots[0].id],ExpandUUID:this.options.expand.providerUUID};return n.post(r,JSON.stringify(s),{securityContext:e,timeout:6e5})},expandStructureFederatedPromise:function(e,t,i){return new UWA.Promise(((r,s)=>{var a=this.options.expandReqBuilder.buildFederated(e,!i,!1,this.options.noFilter),c=o.get3DSpaceWSUrl(this.options.tenant,a.URI,null);n.post(c,JSON.stringify(a.data),{securityContext:t,timeout:6e5}).then((e=>{e.federatedExpand=!0,r(e)})).catch((e=>{s(e)}))}))},computeReusableFromBL:async function(e){let t=this.createComputeReusableSvc(e);t.setOperationDetail("None"),await t.computeAsync(this.options.tenant);let n=t.getReusedSet();n.size()>0&&this.setReusableDefaults(e,n)},createComputeReusableSvc:function(e){let n=new t({handleError:!0});return e.forEach((e=>{var t={};e.nodes.forEach((e=>{t[e.nodeid]=e.physicalid}));var i={};e.occurrences.forEach((e=>{i[e.occurrenceid]=t[e.nodeid]}));var r={};e.occurrencerelationships.forEach((e=>{var t=i[e.parent],n=i[e.child];r.hasOwnProperty(t)||(r[t]=[]),r[t].push(n)}));var o=e.occurrences.filter((t=>t.occurrenceid===e.rootoccurrence)).map((e=>e.nodeid))[0],s=t[o];e.nodes.forEach((e=>{n.addNode(e.physicalid,s,r[e.physicalid])}))})),n},setReusableDefaults:function(e,t){e.forEach((e=>{e.nodes.forEach((e=>{t.contains(e.physicalid)&&(e.defaultAction=EnoTreeNodeAction.Reuse)}))}))}})})),define("DS/LifecycleServices/expandServices/ExpandLoader",["UWA/Controls/Abstract","DS/LifecycleServices/WebReq","DS/LifecycleServices/AssemblyJson","DS/AdvancedView/models/TreeNodeModel","DS/AdvancedView/ExtensibilityConstants","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/expandServices/ComputeReusableService","i18n!DS/AdvancedView/assets/nls/AdvancedViewNls"],(function(e,t,n,i,r,o,s,a,c){"use strict";return e.extend({init:function(e){this.options=e,this.context=e.context,this.nodeToRoot=new Map,this.filteredRoots=new Map},expand:async function(e){return this.expandPromise=this.expandPromise||new UWA.Promise((async(t,n)=>{this.assemblies=[],this.roots=this.options.roots,this.obj2expandProviders=this.options.objId2ExpandProvider||new Map,this.filterReqFails=[];try{let n=await this.options.getAuthoringMode(),i=await this.expandStructures(e,n);await this.computeReusableFromBL(this.assemblies),t({assemblies:this.assemblies,idCounters:i})}catch(e){console.error(e),n(e)}})),this.expandPromise},expandStructures:function(e,t){let n=[];this.roots.forEach((i=>{if(this.options.providerIdSet.has(i))n.push(this.expandStructureFederatedPromise(i,e,t));else{var r=this.options.objectsList.filter((e=>e.physicalid===i));n.push(this._createExpandData(r[0]))}}));try{return new UWA.Promise(((e,t)=>{UWA.Promise.all(n).then((t=>{let n={},i={nextNodeId:0,nextOccId:0};t.forEach((e=>{let t=this.expandDone(e,n)||{};i.nextNodeId=n.firstNodeId=t.nextNodeId,i.nextOccId=n.firstOccId=t.nextOccId})),e(i)})).catch((function(e){console.error(e),t(e)}))}))}catch(e){console.error(e),reject(e)}},expandDone:function(e,t){var i=s.get3DSpaceBaseUrl(this.options.tenant);if(!e.results){if(e.errorCode&&211===e.errorCode)throw c.expandFailed+": "+c.expandDataNotIndexed;if(e.errorMessage)throw e.errorMessage;throw c.expandFailed}let r=e?n.convertFromExpandFormat(e,Object.assign({returnIdCounters:!0,baseUrl:i},t)):{nodes:[]};if(e){e.federatedExpand||(r.legacyExpand=!0);let t=(e=>{let t=e.occurrences.filter((t=>t.occurrenceid===e.rootoccurrence)).map((e=>e.nodeid))[0];return e.nodes.filter((e=>e.nodeid===t))[0]})(r);if(this.options.expandReqBuilder.isFiltered(t.physicalid))for(var o of(this.filterReqFails.includes(t.physicalid)||(t.isFilteredRoot=!0),r.nodes))o.physicalid!=t.physicalid&&this.nodeToRoot.set(o.physicalid,t.physicalid);this.assemblies=this.pruneAndCollectRoots(this.assemblies,r)}return r},pruneAndCollectRoots:function(e,t){const n=e=>{let t=e.occurrences.filter((t=>t.occurrenceid===e.rootoccurrence)).map((e=>e.nodeid))[0];return e.nodes.filter((e=>e.nodeid===t)).map((e=>e.physicalid))[0]},i=(e,t)=>e.nodes.filter((e=>e.physicalid===t)).length>0;let r=[],o=n(t),s=!1;return e.forEach((e=>{s||(s=i(e,o))})),s||r.push(t),e.forEach((e=>{i(t,n(e))||r.push(e)})),r},expandStructureFederatedPromise:function(e,n,i){return new UWA.Promise(((r,o)=>{var a=this.options.expandReqBuilder.buildFederated(e,!i,!0),l=s.get3DSpaceWSUrl(this.options.tenant,a.URI,null);t.post(l,JSON.stringify(a.data),{securityContext:n,timeout:6e5}).then((e=>{e.federatedExpand=!0,r(e)})).catch((e=>{var t=c.expandFailed+": ";e.errorMessage&&e.error&&e.error.message&&e.error.message.includes("504")?t+=e.errorMessage+" "+c.dataIsTooLarge:e.isTimeout?t+=c.connectionTimeout:t+=e?e.error?e.error:e:"",console.error(t),o(t)}))}))},computeReusableFromBL:async function(e){let t=this.createComputeReusableSvc(e);t.setOperationDetail("NewEvolution"),await t.computeAsync(this.options.tenant);let n=t.getReusedSet();n.size()>0&&this.setReusableDefaults(e,n)},createComputeReusableSvc:function(e){let t=new a({handleError:!0});return e.forEach((e=>{var n={};e.nodes.forEach((e=>{n[e.nodeid]=e.physicalid}));var i={};e.occurrences.forEach((e=>{i[e.occurrenceid]=n[e.nodeid]}));var r={};e.occurrencerelationships.forEach((e=>{var t=i[e.parent],n=i[e.child];r.hasOwnProperty(t)||(r[t]=[]),r[t].push(n)}));var o=e.occurrences.filter((t=>t.occurrenceid===e.rootoccurrence)).map((e=>e.nodeid))[0],s=n[o];e.nodes.forEach((e=>{t.addNode(e.physicalid,s,r[e.physicalid])}))})),t},setReusableDefaults:function(e,t){e.forEach((e=>{e.nodes.forEach((e=>{t.contains(e.physicalid)&&(e.attributes["expand::defaultAction"]=2)}))}))},getFilterSpecifications:async function(){let e=this,t=[];for await(let i of this.roots){if(o.hasFilter(this.context,i).hasFilter){var n={rootId:i,NGFUXId:this.context.getNGFUXID(!0)||widget.id,widgetId:widget.id,eventName:"getPublicFilterSpec_"+i};t.push(await e.getFilterSpecification(i,n))}}return UWA.Promise.all(t)},getFilterSpecification:function(e,t){let n=this;return new Promise((function(i,r){o.getPublicFilterSpecificationPromise(n.context,t).then((function(t){1===t.status?(n.filteredRoots.set(e,t.publicSpec),i(t.publicSpec)):0===t.status?(console.error(c.publicFilterSpecError+": "+t.error.message),r(c.publicFilterSpecError+": "+t.error.message)):(console.error(c.publicFilterSpecError),r(c.publicFilterSpecError))})).catch((function(e){r(e)}))}))},_createExpandData:function(e){return{results:[{attributes:[{name:"did",value:"0"},{name:"resourceid",value:e.physicalid||e.objectId},{name:"expand::providerUUID",value:""},{name:"ds6w:label",value:e["attribute[PLMEntity.V_Name]"]||e["attribute[Title]"]},{name:"physicalid",value:e.physicalid||e.objectId},{name:"ds6wg:revision",value:e.revision},{name:"ds6w:status",value:e.current},{name:"ds6w:cadMaster",value:e.cadMaster},{name:"ds6w:type",value:e.type},{name:"expand::capabilities",value:[6,3,2,4]},{name:"expand::defaultAction",value:6},{name:"expand::titleAttribute",value:(e["attribute[Title]"]?"Title":null)||(e["attribute[PLMEntity.V_Name]"]?"PLMEntity.V_Name":null)}]},{icon__default_thumbnail_2d:[{did:["0"],icon:e.imageUrl,thumbnail_2d:""}]},{path:["0"]}],federatedExpand:!0}}})})),Element.prototype.replaceWith||(Element.prototype.replaceWith=ReplaceWithPolyfill),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=ReplaceWithPolyfill),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=ReplaceWithPolyfill);var _get=function(e,t){return t.split(".").reduce((function(e,t){return null==e?e:e[t]}),e)};define("DS/LifecycleServices/HTMLTemplating",["UWA/Class","UWA/Controls/Abstract","DS/LifecycleServices/Utils","DS/LifecycleCmd/Dictionary","DS/Controls/Button","DS/Controls/LineEditor","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/ButtonGroup","DS/Utilities/TouchUtils"],(function(e,t,n,i,r,o,s,a,c,l){"use strict";return e.singleton({_isTouchMode:void 0,Expand:function(e,t,n){var i=t?e.replace(/\{\{(.*?)\}\}/g,(function(e){return e=(e=e.replace("{{","")).replace("}}",""),"function"==typeof t[e]?t[e]():t[e]})):e;return n&&(i=i.replace(/\[\[(.*?)\]\]/g,(function(e){return e=(e=e.replace("[[","")).replace("]]",""),n[e]?n[e]:e}))),i},ElementFromTemplate:function(e,t,i,r,o){i=n.createDbgNlsProxy(i);var s=this.Expand(e,t,i),a=n.htmlFromString(s);return r&&Array.prototype.slice.call(a.querySelectorAll("*[id]")).forEach((function(e){e.setAttribute("id",r+e.id)})),a.inject=function(e){e.appendChild(a)},this._replaceControls(a),o&&this._applyBindings(a,o),this._setTouchAttribute(a),a},isTouchMode:function(){return void 0===this._isTouchMode&&(this._isTouchMode=!!l.getTouchMode()),this._isTouchMode},_setTouchAttribute:function(e){var t=this;Array.prototype.slice.call(e.querySelectorAll(".is-mobile")).forEach((function(e){t.isTouchMode()&&e.setAttribute("touch-mode","")}))},_applyBindings:function(e,t){var n=0,i=1,r=2,o=3,s=0,a=1,c=2,l=3,u=function(e){var t={type:n,event:s,key:-1,fn:null,property:null};return e.forEach((function(e){var n=e.split("=");if(2==n.length){var u=n[0].trim(),d=n[1].trim();if("event"===u)t.event=function(e){var t={click:a,change:c,keydown:l};if(t.hasOwnProperty(e))return t[e];for(var n in console.error("Invalid event binding: ",e),console.error("Supported bindings:"),t)t.hasOwnProperty(n)&&console.log(n);return s}(d),t.type=i;else if("function"===u)t.fn=d;else if("key"===u)t.key=parseInt(d);else if("attribute"===u)if("value"===d)t.type=r;else{if("wuxchecked"!==d)return void console.error("Currently unsupported attribute binding: ",d);t.type=o}else"property"===u&&(t.property=d)}})),t},d=function(e,t,n){return"function"==typeof t[n]||(console.error("Invalid binding, missing function"),console.error("Binding function: "+n),console.error("Element ID: "+e.id),!1)};Array.prototype.slice.call(e.querySelectorAll("[data-bind]")).forEach((function(e){e.getAttribute("data-bind").split(";").forEach((function(n){var s=n.split(",");if(!(s.length<2)){var f=u(s);f.type===i?f.event===a?function(e,t,n){if(d(e,n,t)){var i=n[t];"ComboBox"===e.wuxControlType&&(i=function(e){e.dsModel&&n[t]()}),e.addEventListener("click",i)}}(e,f.fn,t):f.event===c?function(e,t,n){if(d(e,n,t)){var i=[];if("Toggle"===e.wuxControlType){var r=function(e){n[t](e.dsModel?e.dsModel.checkFlag:void 0,e)};i.push({event:"change",fn:r})}else"ComboBox"===e.wuxControlType?(r=function(e){n[t](e.dsModel?e.dsModel.currentValue:void 0,_get(e,"event.dsModel.elements.popup.visibleFlag"),e)},i.push({event:"change",fn:r})):"LineEditor"===e.wuxControlType?(r=function(e){n[t](e.dsModel?e.dsModel.value:void 0,!0,e)},i.push({event:"change",fn:r}),i.push({event:"uncommittedChange",fn:function(e){n[t](e.dsModel?e.dsModel._properties.valueToCommit.value:void 0,!1,e)}})):console.error("Fix binding to new type!");i.forEach((function(t){e.addEventListener(t.event,t.fn)}))}}(e,f.fn,t):f.event===l&&function(e,t,n,i){d(e,i,n)&&e.addEventListener("keydown",(function(e){e.keyCode===t&&i[n]()}))}(e,f.key,f.fn,t):f.type===r?function(e,t,n){if("function"==typeof n.setProperty)return"LineEditor"!==e.wuxControlType?(console.error("Invalid value binding, element type currently unsupported"),void console.error("Element ID: "+e.id)):void("LineEditor"===e.wuxControlType&&(e.wuxControl.addEventListener("change",(function(e){n.setProperty(t,e.dsModel.value)})),e.wuxControl.addEventListener("uncommittedChange",(function(e){n.setProperty(t,e.dsModel._properties.valueToCommit.value)}))));console.error("Invalid value binding, model missing setProperty()")}(e,f.property,t):f.type===o&&function(e,t,n){e.wuxControl&&"Toggle"===e.wuxControlType&&(void 0!==n[t]&&(e.wuxControl.checkFlag=n[t]),e.wuxControl.addEventListener("change",(function(e){void 0!==n[t]&&(n[t]=event.dsModel?event.dsModel.checkFlag:void 0)})))}(e,f.property,t)}}))}))},_replaceControls:function(e){var n=function(e,t){if(e){var n={};e.split(";").forEach((function(e){var t=e.split(":");2===t.length&&(n[t[0].trim()]=t[1].trim())})),t.setStyles(n)}},l=function(e,t,i){var r=t.getContent();r.id=e.id,r.wuxControl=t,r.wuxControlType=i,n(e.getAttribute("data-wuxstyle"),r),n(e.getAttribute("style"),r),function(e,t){e.className.split(" ").forEach((function(e){t.addClassName(e)}))}(e,r),function(e,t){["data-bind"].forEach((function(n){var i=e.getAttribute(n);i&&t.setAttribute(n,i)}))}(e,r),e.replaceWith(r)};var u=function(e,t,n){var i=Array.prototype.slice.call(e.querySelectorAll("option")).map((function(e){return{labelItem:e.text,valueItem:e.value}}));0===i.length&&(i=function(e){var t=e.innerText;if(t.split)return t.split(",")}(e));var r=e.getAttribute("data-wuxDisplayStyle");return r||(r=e.getAttribute("displayStyle")),new a({elementsList:i,enableSearchFlag:t,actionOnClickFlag:n,displayStyle:r})},d={LineEditor:function(e){var t=e.getAttribute("data-wuxplaceholder");t||(t=e.getAttribute("placeholder"));var n=new o({placeholder:t});return l(e,n,"LineEditor"),n},Button:function(e){var t=e.getAttribute("data-wuxlabel");t||(t=e.innerText);var n=new r({label:t});return l(e,n,"Button"),n},Checkbox:function(e){var t=e.getAttribute("data-wuxlabel");t||(t=e.innerText);var n=e.checked;void 0===n&&(n=e.getAttribute("checked"));var i=new s({type:"checkbox",checkFlag:n,label:t});return l(e,i,"Toggle"),i},Radio:function(e){var t=e.getAttribute("data-wuxlabel"),n=e.getAttribute("data-wuxchecked");t||(t=e.innerText),n||(n=e.getAttribute("checked"));var i=new s({type:"radio",label:t,checkFlag:"true"===n});return l(e,i,"Toggle"),i},Combo:function(e){var t=u(e,!1,!1);return l(e,t,"ComboBox"),t},DropdownBtn:function(e){var t=u(e,!1,!0);return l(e,t,"ComboBox"),t}},f={Radio:function(e){var t=e.getAttribute("data-wuxlabel"),n=e.getAttribute("data-wuxchecked"),i=new s({type:"radio",label:t,checkFlag:"true"===n}),r=i.getContent();return r.id=e.id,r.wuxControl=i,r.wuxControlType="Toggle",i}},p=t.extend({init:function(){this.elements=[]},add:function(e){this.elements.push(e)},create:function(){var e=new c({type:"radio"});this.elements.forEach((function(t){e.addChild(t.factory(t.element))})),l(this.elements[0].element,e),e.getContent().id="",this.elements.splice(1).forEach((function(e){var t=e.element;t.parentElement.removeChild(t)}))}}),h=new i;Array.prototype.slice.call(e.querySelectorAll("[data-wuxcontrol]")).forEach((function(e){var t=function(e){var t=e.getAttribute("data-wuxcontrol"),n=e.getAttribute("data-wuxgroup");if(n){var i=h.find(n);return i||(i=new p)&&h.add(n,i),i?(i.add({element:e,factory:f[t]}),{create:function(){console.error("Dont call")},isGroup:!0}):null}var r=d[t];return r?{create:r,isGroup:!1}:null}(e);t&&!1===t.isGroup&&t.create(e)})),h.each((function(e,t){t.create()})),Array.prototype.slice.call(e.querySelectorAll("[data-delete-element]")).forEach((function(e){e.parentElement.removeChild(e)}));[{tag:"wuxbutton",factory:"Button"},{tag:"wuxcombo",factory:"Combo"},{tag:"wuxcheckbox",factory:"Checkbox"},{tag:"wuxlineEditor",factory:"LineEditor"},{tag:"wuxradio",factory:"Radio"},{tag:"wuxdropdownButton",factory:"DropdownBtn"}].forEach((function(t){Array.prototype.slice.call(e.querySelectorAll(t.tag)).forEach((function(e){var n=d[t.factory];n&&n(e)}))}))}})})),define("DS/LifecycleServices/IdNs",["UWA/Controls/Abstract","DS/LifecycleServices/HTMLTemplating"],(function(e,t){"use strict";return e.extend({init:function(e,t){this.container=e,this.idPfx=t},getPfx:function(){return this.idPfx},getElById:function(e){return UWA.extendElement(this.container.querySelector("#"+this.idPfx+e))},elementFromTemplate:function(e,n,i,r){return UWA.extendElement(t.ElementFromTemplate(e,n,i,this.idPfx,r))}})}));