define("DS/MPFLanguageSelector/LanguageSelector",["UWA/Core","UWA/Class/View","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Toggle","DS/MPFUtils/MPFUtils","i18n!DS/MPFLanguageSelector/assets/nls/languageSelector","css!DS/MPFLanguageSelector/MPFLanguageSelector"],(function(e,t,a,n,g,s,i){"use strict";const o="swymlang",r={en:"English",fr:"Français",de:"Deutsch",it:"Italiano",es:"Español",cs:"Čeština",pl:"Polskie",ja:"日本語",ko:"한국어",ru:"Pусский",zh:"中文"};return t.extend({className:"mpf-language-selector",domEvents:{click:"onClick"},setup(){this._languageOptions=this._createLanguageOptions(),this._currentLanguage=this._getCurrentLanguage(),this._languageLabel=this._createLanguageLabel(),this._icon=this._createIcon(),this._modal=this._createModal()},render(){return this.container.setContent([this._languageLabel,this._icon]),this._selectedLanguage=this._languageOptions.find((e=>e.getValue()===this._currentLanguage)),this._selectedLanguage.check(),this},destroy(){this._modal.destroy(),this._modal=null,this._parent(),this.container=null},onClick(){this._modal.show()},onSave(e){this._currentLanguage!==this._selectedLanguage.getValue()&&this._setCurrentLanguageCookie(this._selectedLanguage.getValue()),this._modal.hide(),this._reloadPage()},onCancel(){this._modal.hide()},_reloadPage(){window.location.reload()},_createLanguageLabel(){return e.createElement("span",{class:"mpf-label",text:r[this._getCurrentLanguage()]})},_createIcon:()=>e.createElement("span",{class:"fonticon fonticon-globe"}),_createModal(){return new a({renderTo:document.body,header:i.get("languagePreferences"),body:e.createElement("div",{class:"mpf-language-selector-list",html:this._languageOptions}),footer:[new n({className:"primary",value:i.get("save"),events:{onClick:this.onSave.bind(this)}}),new n({value:i.get("cancel"),events:{onClick:this.onCancel.bind(this)}})]})},_createLanguageOptions(){return[this._createLanguageOption("en",i.get("english")),this._createLanguageOption("fr",i.get("french")),this._createLanguageOption("es",i.get("spanish")),this._createLanguageOption("de",i.get("german")),this._createLanguageOption("it",i.get("italian")),this._createLanguageOption("cs",i.get("czech")),this._createLanguageOption("pl",i.get("polish")),this._createLanguageOption("ja",i.get("japanese")),this._createLanguageOption("ko",i.get("korean")),this._createLanguageOption("ru",i.get("russian")),this._createLanguageOption("zh",i.get("chinese"))]},_createLanguageOption(e,t){return new g({name:"mpfLanguagePreference",className:"primary mpf-language-option",type:"checkbox",value:e,label:t,events:{onClick:this._setSelectedLanguage.bind(this,e)}})},_setSelectedLanguage(e){const t=this._languageOptions.find((t=>t.getValue()===e));this._selectedLanguage.getValue()!==e&&(this._selectedLanguage.uncheck(),this._selectedLanguage=t,this._selectedLanguage.check())},_getCurrentLanguage(){let e;return this._currentLanguage||(e=this._getCurrentLanguageFromCookie(),this._currentLanguage=e?decodeURIComponent(e.value):"en"),this._currentLanguage},_getCurrentLanguageFromCookie:()=>document.cookie.split(/\s*;\s*/).map((function(e){const t=e.split("=");return{key:t.length>=1?t[0]:null,value:t.length>=2?t[1]:null}})).find((function(e){return e.key===encodeURIComponent(o)})),_setCurrentLanguageCookie(e){const t=encodeURIComponent(o)+"="+encodeURIComponent(e),a=new Date,n="; expires="+new Date(a.getFullYear()+1,a.getMonth(),a.getDate()).toUTCString(),g=window.location.hostname,s="; domain="+g.substring(g.indexOf("."));document.cookie=t+n+s+"; path=/"}})}));