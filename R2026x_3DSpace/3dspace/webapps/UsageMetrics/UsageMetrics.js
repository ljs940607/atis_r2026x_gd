define("DS/UsageMetrics/Metrics",["UWA/Event","DS/WAFData/WAFData","DS/WidgetServices/WidgetServices"],((e,t,a)=>new Promise((n=>{let i=t.authenticatedRequest,r=["time","method","url","payload","headers","callstack"].join(",")+"\n";t.authenticatedRequest=function(e,t){var a='"'+(new Error).stack+'"';let n=e.replace(location.hostname,"<host>").replace(/:\d+/,":<port>"),s=t.data?t.data:"";s="object"==typeof s?JSON.stringify(s):s;let c='"'+s.replaceAll('"',"'")+'"',l=t.method.toUpperCase(),o='"'+JSON.stringify(t.headers).replaceAll('"',"'")+'"',d=new Date,h='"=""'+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"."+d.getMilliseconds()+'"""';return r+=[h,l,n,c,o,a].join(",")+"\n",i.apply(this,arguments)},UWA.Element.addEvent.call(document,"keydown",(t=>{"ctrl+m"===e.whichKey(t)&&a.download("metrics",r,"csv",!1)})),n()}))));