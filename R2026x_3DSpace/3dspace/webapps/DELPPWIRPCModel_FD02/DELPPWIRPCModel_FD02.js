define("DS/DELPPWIRPCModel_FD02/Collections/AbstractIRPCCollection",["UWA/Core","UWA/Date","UWA/Class/Collection","UWA/Class/Debug","DS/DELPPWModelServices_FD02/ModelUtils","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWLoggerModel_FD02/LoggerUtils"],(function(e,t,i,n,o,s,r){"use strict";return i.extend(n,{comparator:"PID",parse:function(t){var i=this,n=function(t){e.is(t.attributesValue)&&(t[i.model.prototype.idAttribute]=t.attributesValue[i.model.prototype.idAttribute])};return Array.isArray(t)?t.forEach((function(e){n(e)})):n(t),t},sync:function(i,n,c){var d,l,a,u=this._parent,h=c.onComplete,f=c.onFailure,P=c.onTimeout,C=t.now(),I="START - "+i+" request",p=" / Time: "+new t(C).toISOString(),D="END - "+i+" request",g=e.is(n.id)?I+" on "+n.id+p:I+p;g=e.is(n.id)?I+" on "+n.id+p:I+p,r.debug(g),e.is(c)&&e.is(c.logMessage)&&r.debug("AbstractIRPCCollection",c.logMessage),l=o.getTimeoutPreference(),e.is(l)&&(c.timeout=l),c.onComplete=function(i,o){var s=!0,l={code:500,message:"",status:"External Server error",type:""};e.is(i)&&e.is(i.type,"string")&&("Generic Error"!==i.type&&"BL Error"!==i.type||(s=!1,l.message=i.message,l.type=i.type)),s?(d=t.now(),a=" / Duration: "+(d-C)+" ms",g=e.is(n.id)?D+" on "+n.id+a:D+a,r.debug(g),e.is(c)&&(e.is(i,"array")&&i.forEach((function(t){e.is(t.attributesValue)&&(t.PID=t.attributesValue.PID)})),e.is(h,"function")&&h.call(null,i,o),e.is(c.logMessage)&&r.debug("AbstractIRPCModel success",c.logMessage))):c.onFailure.call(null,l,i,o)},c.onFailure=function(t,n,o){g="FAILURE during "+i+": "+e.Json.encode(t),r.debug(g),e.is(n)||(n=t),e.is(c)&&(e.is(f)&&f.call(null,n,o),e.is(c.logMessage)&&r.debug("AbstractIRPCCollection failed",c.logMessage))},c.onTimeout=function(t,n,o){g="TIMEOUT during "+i+": "+e.Json.encode(t),r.debug(g),e.is(c)&&(e.is(P)&&P.call(null,n,o),e.is(c.logMessage)&&r.debug("AbstractIRPCCollection timedout",c.logMessage))},c.ajax=function(t,i){var n=i||{},o={url:t||"NOURL",data:e.is(n.data)?n.data:"",headers:e.is(n.headers)?n.headers:"",method:e.is(n.method)?n.method:"GET",type:e.is(n.type)?n.type:null,onComplete:e.is(n.onComplete)?n.onComplete:null,onFailure:e.is(n.onFailure)?n.onFailure:null,onTimeout:e.is(n.onTimeout)?n.onTimeout:n.onFailure,options:c};return s.webServiceRequest(o),o},u.call(this,i,n,c)}})})),define("DS/DELPPWIRPCModel_FD02/Model/AbstractIRPCModel",["UWA/Core","UWA/Date","UWA/Class/Model","UWA/Class/Debug","DS/DELPPWModelServices_FD02/ModelUtils","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWLoggerModel_FD02/LoggerUtils","DS/DELPPWDicoServices_FD02/DicoUtils","DS/DELPPWModelServices_FD02/Navigation/IndexedDBUtils"],(function(e,t,i,n,o,s,r,c,d){"use strict";var l=i.extend(n,{idAttribute:"PID",_modelEvents:{},_attributesDef:{},init:function(e,t){(t=t||{}).parse=!0,this._parent(e,t)},destroy:function(t){return d.removeModel(this),this._parent(e.merge({type:"json"},t))},setup:function(){this._parent.apply(this,arguments)},setAdditionalInfo:function(t){var i,n,o=t;e.is(o)&&e.is(this._additionalInfo)&&(e.is(this._additionalInfo.directConnectionsFetched)&&e.is(this._additionalInfo.inverseConnectionsFetched)&&(Object.prototype.hasOwnProperty.call(o,"queriedForConnections")?Object.prototype.hasOwnProperty.call(o,"directConnectionsFetched")||Object.prototype.hasOwnProperty.call(o,"inverseConnectionsFetched")||(o.directConnectionsFetched=o.queriedForConnections,o.inverseConnectionsFetched=o.queriedForConnections):(Object.prototype.hasOwnProperty.call(o,"directConnectionsFetched")||Object.prototype.hasOwnProperty.call(o,"inverseConnectionsFetched"))&&(i=e.is(o.directConnectionsFetched,"boolean")?o.directConnectionsFetched:this._additionalInfo.directConnectionsFetched,n=e.is(o.inverseConnectionsFetched,"boolean")?o.inverseConnectionsFetched:this._additionalInfo.inverseConnectionsFetched,o.queriedForConnections=i&&n)),e.extend(this._additionalInfo,o))},getAdditionalInfo:function(t){if(t&&e.is(this._additionalInfo)&&e.is(this._additionalInfo[t]))return e.result(this._additionalInfo,t)},sync:function(i,n,c){var l,a,u,h,f,P,C,I=this,p=t.now(),D=I._parent,g=c.onComplete,m=c.onFailure,F=c.onTimeout,v=!!e.is(c.forceRefresh)&&c.forceRefresh,M="START - "+i+" request",b=" / Time: "+new t(p).toISOString(),R="END - "+i+" request";if(l=e.is(n.id)?M+" on "+n.id+b:M+b,r.debug(l),e.is(c)&&e.is(c.logMessage)&&r.debug("AbstractIRPCModel",c.logMessage),c.onComplete=function(i,o){var s=!0,u={code:500,message:"",status:"External Server error",type:""};e.is(i)&&e.is(i.type)&&("Generic Error"!==i.type&&"BL Error"!==i.type||(s=!1,u.message=i.message,u.type=i.type)),s?(a=t.now(),C=" / Duration: "+(a-p)+" ms",l=e.is(n.id)?R+" on "+n.id+C:R+C,r.debug(l),e.is(c)&&(e.is(g)&&(g.call(null,i,o),d.storeModel(I)),e.is(c.logMessage)&&r.debug("AbstractIRPCModel success",c.logMessage))):c.onFailure.call(null,u,i,o)},c.onFailure=function(t,n,o){l="FAILURE during "+i+": "+e.Json.encode(t),r.debug(l),e.is(n)||(n=t),e.is(c)&&(e.is(m)&&m.call(null,n,o),e.is(c.logMessage)&&r.debug("AbstractIRPCModel failed",c.logMessage))},c.onTimeout=function(t,n,o){l="TIMEOUT during "+i+": "+e.Json.encode(t),r.debug(l),e.is(c)&&(e.is(F)&&F.call(null,n,o),e.is(c.logMessage)&&r.debug("AbstractIRPCModel timedout",c.logMessage))},P=o.getTimeoutPreference(),e.is(P)&&(c.timeout=P),c.ajax=function(t,i){var n=i||{},o={url:t||"NOURL",data:e.is(n.data)?n.data:"",headers:e.is(n.headers)?n.headers:"",method:e.is(n.method)?n.method:"GET",type:e.is(n.type)?n.type:null,onComplete:e.is(n.onComplete)?n.onComplete:null,onFailure:e.is(n.onFailure)?n.onFailure:null,onTimeout:e.is(n.onTimeout)?n.onTimeout:n.onFailure};return s.webServiceRequest(o),o},o.isStandAlone()||"read"!==i||!o.getNavigateOnIndexedDB()||v)return I._parent.call(I,i,n,c);h=function(e){u=e._attributesDef,this.set(e),this.setAdditionalInfo({queriedForChildren:!1}),this.setAdditionalInfo({queriedForConnections:!1}),c.onComplete({attributesValue:this._attributes,attributesDef:u})}.bind(this),f=function(){return D.call(I,i,n,c)}.bind(this),d.getModel(n,h,f)},parse:function(t){var i;if(t)return i=e.is(t.attributesValue)?this.setTypeAndPPRTYPE(t.attributesValue):this.setTypeAndPPRTYPE(t),Object.keys(i).forEach((function(e){var t,n=c.getAttributeInfo(e),o=!1,s=/^\+?[1-9]\d*$/.test(i[e]);n&&n.AuthorizedValues&&((t=n.AuthorizedValues).forEach((function(t){t.Name===i[e]&&(i[e]=t.NLS,o=!0)})),!o&&s&&(i[e]=t[Number.parseInt(i[e])-1].NLS))})),i},setTypeAndPPRTYPE:function(t){var i,n,o;return"VPMReference"!==t.type&&"ErgoHuman"!==t.type&&""!==t.type||(t.defType=t.type,o=function(e){if(c.isAKindOf(e,"Resource"))return e},n=(Array.isArray(t.interface)?t.interface:[t.interface]).find(o),e.is(n)?(t.type=n,delete t.interface):e.is(t.V_discipline)&&t.V_discipline.length>0&&"NULL"!==t.V_discipline&&(t.baseType=t.type,t.type=t.V_discipline)),t.type&&(i=c.getPPRType(t.type))&&(t.PPRTYPE=i),t},isReference:function(){return!(this.isInstance()||this.isConnection())},isInstance:function(){return this.has("isInstanceOf")},isConnection:function(){return this.has("to")&&this.has("from")}});return l})),define("DS/DELPPWIRPCModel_FD02/Model/ReferenceModel",["UWA/Core","DS/DELPPWIRPCModel_FD02/Model/AbstractIRPCModel","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWIndexServices_FD02/IndexParser"],(function(e,t,i,n){"use strict";var o=t.extend({name:"ReferenceModel",idAttribute:"PID",urlRoot:function(){return i.getWebServicesURL()+"/reference"},defaultAdditionalInfo:{queriedForDocuments:!1,queriedForChildren:!1,queriedForConnections:!1,directConnectionsFetched:!1,inverseConnectionsFetched:!1},setup:function(t,n){this._parent.apply(this,arguments),this._additionalInfo||(this._additionalInfo=e.clone(this.defaultAdditionalInfo)),e.is(i.referenceModelSetup)&&i.referenceModelSetup(this,n)},isSystem:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="SYSTEM"===i||"OPERATION"===i),t},isWorkInstruction:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="WORKINSTRUCTION"===i),t},isProcess:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="PROCESS"===i),t},isService:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="SERVICE"===i),t},isResource:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="RESOURCE"===i),t},isPart:function(){var t=!1,i=this.get("PPRTYPE");return e.is(i)&&"PART"===i&&(t=!0),t},isProduct:function(){var t=!1,i=this.get("PPRTYPE");return e.is(i)&&"PRODUCT"===i&&(t=!0),t},parse:function(t,o){var s,r=this._parent.apply(this,arguments),c={};if(r)return this._additionalInfo||(this._additionalInfo=e.clone(this.defaultAdditionalInfo)),e.is(i.referenceModelParse)&&i.referenceModelParse(this,r,o),e.is(o)&&e.is(o.request)&&e.is(o.request.method,"string")&&"POST"===o.request.method&&this.setAdditionalInfo({queriedForChildren:!0,queriedForConnections:!0,directConnectionsFetched:!0,inverseConnectionsFetched:!0,queriedForDocuments:!0}),e.is(t.queriedForChildren)&&(c.queriedForChildren=t.queriedForChildren,delete t.queriedForChildren),e.is(t.queriedForConnections)&&(c.queriedForConnections=t.queriedForConnections,delete t.queriedForConnections),e.is(t.directConnectionsFetched)&&(c.directConnectionsFetched=t.directConnectionsFetched,delete t.directConnectionsFetched),e.is(t.inverseConnectionsFetched)&&(c.inverseConnectionsFetched=t.inverseConnectionsFetched,delete t.inverseConnectionsFetched),e.is(t.queriedForDocuments)&&(c.queriedForDocuments=t.queriedForDocuments,delete t.queriedForDocuments),e.is(t.ds6w)&&(c.ds6w=t.ds6w,delete t.ds6w),Object.keys(c).length>0&&this.setAdditionalInfo(c),!r.PID&&e.is(r._results)&&(s=n.translatePredicateToAttribute(r,{type:"entity",fromExpandService:r._results}),r=e.merge(r,s)),r}});return o})),define("DS/DELPPWIRPCModel_FD02/Collections/ReferenceCollection",["DS/DELPPWIRPCModel_FD02/Collections/AbstractIRPCCollection","DS/DELPPWIRPCModel_FD02/Model/ReferenceModel","DS/DELPPWWebServices_FD02/WebserviceUtils"],(function(e,t,i){"use strict";return e.extend({name:"ReferenceCollection",comparator:"PID",model:t,_collectionEvents:{},setup:function(){},url:function(){return i.getWebServicesURL()+"/reference"}})})),define("DS/DELPPWIRPCModel_FD02/Model/InstanceModel",["UWA/Core","DS/DELPPWIRPCModel_FD02/Model/AbstractIRPCModel","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWModelServices_FD02/Navigation/IndexedDBUtils","DS/DELPPWModelParsers_FD02/ConnectionParser"],(function(e,t,i,n,o){"use strict";var s=t.extend({name:"InstanceModel",_logger:null,urlRoot:function(){return i.getWebServicesURL()+"/instance"},defaultAdditionalInfo:{queriedForConnections:!1,directConnectionsFetched:!1,inverseConnectionsFetched:!1},setup:function(t,n){this._parent.apply(this,arguments),this._additionalInfo||(this._additionalInfo=e.clone(this.defaultAdditionalInfo)),e.is(i.instanceModelSetup)&&i.instanceModelSetup(this,n)},parse:function(t,s){var r,c,d={},l=this._parent.apply(this,arguments),a={};if(l){if(this._additionalInfo||(this._additionalInfo=e.clone(this.defaultAdditionalInfo)),e.is(s)&&e.is(s.request)&&e.is(s.request.method,"string")&&"POST"===s.request.method&&this.setAdditionalInfo({queriedForConnections:!0,directConnectionsFetched:!0,inverseConnectionsFetched:!0}),e.is(t.queriedForConnections)&&(a.queriedForConnections=t.queriedForConnections,delete t.queriedForConnections),e.is(t.directConnectionsFetched)&&(a.directConnectionsFetched=t.directConnectionsFetched,delete t.directConnectionsFetched),e.is(t.inverseConnectionsFetched)&&(a.inverseConnectionsFetched=t.inverseConnectionsFetched,delete t.inverseConnectionsFetched),e.is(t.filterQuery)&&(a.filterQuery=t.filterQuery,delete t.filterQuery),Object.keys(a).length>0&&this.setAdditionalInfo(a),e.is(i.referenceModelParse))i.referenceModelParse(this,l,s);else if(e.is(s.request)&&e.is(s.request.method,"string")&&"POST"===s.request.method){for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(r.contains("to.")&&(d[r.substring(r.indexOf("to.")+3)]=t[r]),"connections"===r&&t.connections.forEach((function(e){o.parse(e)})));Object.keys(d).length>0&&(c=this.collection.referenceCollection.add(d,{silent:!0}))&&(c.setAdditionalInfo({queriedForChildren:!0,queriedForConnections:!0}),n.storeModel(c))}return e.is(this.collection)&&e.is(l)&&e.is(l.PID)&&e.is(l.isAggregatedBy)&&e.is(l.isInstanceOf)&&(this.collection.addChildInfo(l.isAggregatedBy,l.PID),this.collection.addRefInfo(l.isInstanceOf,l.PID)),l}}});return s})),define("DS/DELPPWIRPCModel_FD02/Collections/InstanceCollection",["UWA/Core","DS/DELPPWIRPCModel_FD02/Collections/AbstractIRPCCollection","DS/DELPPWIRPCModel_FD02/Model/InstanceModel","DS/DELPPWWebServices_FD02/WebserviceUtils"],(function(e,t,i,n){"use strict";return t.extend({name:"InstanceCollection",model:i,childInfoCache:{},refInfoCache:{},comparator:null,setup:function(){this.childInfoCache={},this.refInfoCache={}},url:function(){return n.getWebServicesURL()+"/instance"},remove:function(t,i){var n=this;return(Array.isArray(t)?t:[t]).forEach((function(t){e.is(t)&&e.is(t.has)&&t.has("isAggregatedBy")&&t.has("isInstanceOf")&&t.has("PID")&&(n.removeChildInfo(t.get("isAggregatedBy"),t.get("PID")),n.removeRefInfo(t.get("isInstanceOf"),t.get("PID")))})),this._parent.call(this,t,i)},reset:function(e,t){return this.childInfoCache={},this.refInfoCache={},this._parent.call(this,e,t)},getChildren:function(t){var i=[];return e.is(t)&&e.is(this.childInfoCache[t])&&(i=this._getInstances(this.childInfoCache[t])),i},getInstancesForGivenReference:function(t){var i=[];return e.is(t)&&e.is(this.refInfoCache[t])&&(i=this._getInstances(this.refInfoCache[t])),i},_getInstances:function(t){var i=this,n=[];return Array.isArray(t)&&t.forEach((function(t){var o=i.get(t);e.is(o)&&n.push(o)})),n},addChildInfo:function(e,t){this._addToCache.call(this.childInfoCache,e,t)},addRefInfo:function(e,t){this._addToCache.call(this.refInfoCache,e,t)},_addToCache:function(t,i){e.is(this[t])||(this[t]=[]),this[t].indexOf(i)<0&&this[t].push(i)},removeChildInfo:function(e,t){this._removeFromCache.call(this.childInfoCache,e,t)},removeRefInfo:function(e,t){this._removeFromCache.call(this.refInfoCache,e,t)},_removeFromCache:function(t,i){var n=-1;e.is(this[t])&&(n=this[t].indexOf(i))>-1&&this[t].splice(n,1)}})})),define("DS/DELPPWIRPCModel_FD02/Model/BIModel",["DS/DELPPWIRPCModel_FD02/Model/AbstractIRPCModel"],(function(e){"use strict";return e.extend({name:"BIModel",idAttribute:"id"})})),define("DS/DELPPWIRPCModel_FD02/Collections/BIModelCollection",["DS/DELPPWIRPCModel_FD02/Collections/AbstractIRPCCollection","DS/DELPPWIRPCModel_FD02/Model/BIModel"],(function(e,t){"use strict";return e.extend({name:"BIModelCollection",model:t,comparator:"id"})})),define("DS/DELPPWIRPCModel_FD02/Model/ConnectionModel",["UWA/Core","DS/DELPPWIRPCModel_FD02/Model/AbstractIRPCModel","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWModelParsers_FD02/ConnectionParser"],(function(e,t,i,n){"use strict";var o=t.extend({name:"ConnectionModel",defaults:{},getAttribute:function(e){var t=this.get(e);return"to"!==e&&"from"!==e||(t=Array.isArray(t)?t[t.length-1]:t),t},setup:function(t,n){e.is(i.connectionModelSetup)&&i.connectionModelSetup(this,n)},parse:function(t,i){var o;if(t=e.is(t)&&e.is(t.connections)?n.parseAuthoringResponse(t,i):this._parent.apply(this,arguments),e.is(t)&&e.is(t.PID)&&e.is(this.collection)&&(this.collection.get(t.PID)||-1===t.PID.indexOf("ProductImplementLinkOcc|")&&-1===t.PID.indexOf("ProductImplementLink|")||(o=this.collection.findWhere({from:t.from,type:t.type}))&&this.collection.remove(o),e.is(t.from)&&e.is(t.to))){var s=Array.isArray(t.from)?t.from.slice(-1)[0]:t.from,r=Array.isArray(t.to)?t.to.slice(-1)[0]:t.to;this.collection.addImpactInfo(s,t.PID),this.collection.addImpactInfo(r,t.PID)}return t},destroy:function(){var t,o;return e.is(i.connectionModelSetup)||(o=arguments[0].onComplete,t=function(t,i,s){n.parseAuthoringResponse(i),e.is(o)&&o.apply(this,arguments)},arguments[0]=e.merge({onComplete:t},arguments[0])),this._parent.apply(this,arguments)}});return o})),define("DS/DELPPWIRPCModel_FD02/Collections/ConnectionCollection",["UWA/Core","DS/DELPPWIRPCModel_FD02/Collections/AbstractIRPCCollection","DS/DELPPWIRPCModel_FD02/Model/ConnectionModel","DS/DELPPWWebServices_FD02/WebserviceUtils"],(function(e,t,i,n){"use strict";return t.extend({name:"ConnectionCollection",model:i,url:function(){var e=n.getWebServicesURL();return this._isER?e+="/erconnection":e+="/connection",e},setup:function(t){var i;e.is(t)&&(i=t.isER,e.is(i,"boolean")&&(this._isER=i)),this.impactedInfo={}},useERObjects:function(t){e.is(t,"boolean")&&(this._isER=t)},isER:function(){return this._isER},remove:function(t,i){var n=this;return(Array.isArray(t)?t:[t]).forEach((function(t){e.is(t)&&e.is(t.has)&&t.has("from")&&t.has("to")&&t.has("PID")&&(n.removeImpactInfo(t.getAttribute("from"),t.getAttribute("PID")),n.removeImpactInfo(t.getAttribute("to"),t.getAttribute("PID")))})),this._parent.call(this,t,i)},reset:function(e,t){return this.impactedInfo={},this._parent.call(this,e,t)},getImpactedConnections:function(t,i,n){var o,s,r=this,c=[];return e.is(t)&&e.is(this.impactedInfo[t])&&this.impactedInfo[t].forEach((function(t){s=r.get(t),e.is(s)&&c.push(s)})),i&&e.is(this._byId)&&0===c.length&&(this.referenceCollection._models.forEach((function(e){"VPMReference"===e.get("type")&&(o=e.id)})),s=this.get(n[0]+"|"+t+"|"+o),e.is(s)&&c.push(s)),c},addImpactInfo:function(t,i){e.is(this.impactedInfo[t])||(this.impactedInfo[t]=[]),this.impactedInfo[t].indexOf(i)<0&&this.impactedInfo[t].push(i)},removeImpactInfo:function(t,i){if(e.is(this.impactedInfo[t])){var n=this.impactedInfo[t].indexOf(i);n>-1&&this.impactedInfo[t].splice(n,1)}}})}));