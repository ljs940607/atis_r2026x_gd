window.IPConfig={defaultAppId:"ENXTERM_AP",userAppId:"ENXTERM_AP",mepreferenceRepositoryName:"BrowsingStructureDefinitionRepository",default:"TerminologySection_AllTerminologies",defaultType:"Term",main:{Term:"TerminologySection_AllTerminologies",Terminology:"TerminologySection_AllTerminologies"},iconType:"rich",sections:[{name:"TerminologySection_AllTerminologies",icon:{module:"TerminologyEditor",path:"icons/32/I_Browsing_Structure_32.png"}}],plugins:["DS/TerminologyEditor/plugins/BSPlugin"],computedColumns:["DS/FolderEditor/views/additionalColumns/ThumbnailColumn"],indexModeHelp:"ENXTermUAPanelMap/ENXTerm-c-IndexMode.htm",settingsFile:"text!DS/TerminologyEditor/assets/terminology_settings.json",helpFile:"TerminologyEditor/help",filesToPrepare:{findInTreeNls:"i18n!DS/TerminologyEditor/assets/nls/TerminologyFindInTree",widgetNls:"i18n!DS/TerminologyEditor/assets/nls/TerminologyEditor"},columnDefinition:"DS/IPTableMePreferences/assets/conf/ENXTERM_IPTableMePreferences_conf.json",parameters:{canAddColumns:!1,keyProbes:"FolderWidget",supportMove:!1,uniqueName:!0},preferencePrefix:"Terminology",toolbarCmds:"text!DS/TerminologyEditor/assets/TerminologyEditorCmds.json",preferences:[{name:"xPref_CREDENTIAL",type:"hidden"},"activateBIFilter","useIndexAccleration","autoSwitch",{name:"expandSaveLimitation",debug:!0},{name:"resetCustomization",debug:!0},{name:"compactModeForLeftSidebar",debug:!0}]},define("DS/TerminologyEditor/service/TerminologyEditorWebService",["UWA/Core","DS/IPClassifyUXUtil/service/IPClassifyUXUtilWebService","DS/WidgetServices/WidgetServices"],(function(e,o,t){"use strict";let i={url:"/resources/v1/application/CSRF",method:"GET"};return{copyterminology:function(t){var i=t;return i.headers={"content-type":"application/json"},(i.TargetPhysicalId||""===i.TargetPhysicalId)&&i.PhysicalId&&(i.data={sourcePhysicalId:"",targetPhysicalId:i.TargetPhysicalId,physicalIds:i.PhysicalId,prefix:i.prefix,suffix:i.suffix},t.hasOwnProperty("withContent")&&(i.data.withContent=t.withContent),i.data=e.Json.encode(i.data)),i.method="POST",i.inSource="3DSpace",i.type="json",i.timeout=12e4,o._executeQuery("/resources/v1/TerminologyManagement/Terminologies/duplicateStructure",i,"copyTerminology")},setTerminologyProperties:function(i){var n=i;t.get3DSpaceUrlAsync({onComplete:r=>{this.createCSRFTokens({onComplete:function(s){var a=JSON.parse(s).csrf.value,l=r;return"Terminology"===i.type?l+="/resources/v1/modeler/dsbsd/dsbsd:BrowsingStructure/"+n.pid+"?$mask=dsbsd:BsdMask.Details":"Term"===i.type&&(l+="/resources/v1/modeler/dsbsd/dsbsd:BrowsingNode/"+n.pid+"?$mask=dsbsd:BsdMask.Details"),n.headers={Accept:"application/json","content-type":"application/json","Accept-Language":t.getLanguage(),SecurityContext:"ctx::"+widget.getValue("xPref_CREDENTIAL"),ENO_CSRF_TOKEN:a},n.method="PATCH",n.data=e.Json.encode(n.properties),o._executeRequest(l,n,"setTerminologyProperties")},onFailure:function(e){console.error(e)}},r)}})},createCSRFTokens:function(e,t){var n=e,r=t+i.url;n.method=i.method,o._executeRequest(r,n,"FolderActive-createCSRFToken")}}})),define("DS/TerminologyEditor/commands/ActionBar_NewBrowsingStructureCmd",["UWA/Core","DS/IPClassifyUtil/IPClassifyAlert","DS/ENONewWidget/command/NewContentCommandBase","i18n!DS/TerminologyEditor/assets/nls/TerminologyEditor","DS/FolderEditor/Folder_CSO","DS/FolderEditor/service/FolderEditorWebService","DS/IPClassifyUtil/IPClassifyModelEvents","DS/IPClassifyUXUtil/IPClassifyLoaderGlobal"],(function(e,o,t,i,n,r,s,a){"use strict";return t.extend({_newType:"Terminology",_commandName:"NewBrowsingStructure",_localContext:null,init:function(e){this._parent({...e},{mode:"exclusive",isAsynchronous:!0});require(["DS/PADUtils/PADContext"],(o=>{this._localContext=e.context?e.context:o.get()}))},getType:function(){return this._newType},getCreationDialogParameters:async function(){r.getHeadersInformations().then((async t=>{let n=this;var r={type:this._newType,notification:!0,events:{onSuccess:async function(t){o.displayNotification({message:i.msg_success_createBS,className:"success"}),await new Promise((e=>setTimeout(e))),t=e.is(t,"string")?JSON.parse(t):t,n._localContext.addRoots({pids:[t.result[0].identifier]})},onFailure:function(e){console.log(e)},onCancel:function(e){console.log(e),n.hideModalLoader()}},silentMode:!1,viewType:"listView",labelTopBar:i.commands.newBrowsingStructure,commandName:this._commandName,context:t,options:{}};this.launchCreateNew(r)}))},execute:function(){var e=this;this.showModalLoader(),require(["DS/ENONewWidget/ENONew/Events"],(function(o){o.addEvent("onCreationDialogAction",(function(o){o&&"ready"===o.action&&e.hideModalLoader()}))})),this.getCreationDialogParameters()},hideModalLoader:function(){a.removeComponentToLoad("global","new")},showModalLoader:function(){a.addComponentsToLoad("global",{new:i.New_Loading})}})})),define("DS/TerminologyEditor/commands/ActionBar_NewBrowsingNodeCmd",["UWA/Core","DS/IPClassifyUtil/IPClassifyAlert","DS/ENONewWidget/command/NewContentCommandBase","i18n!DS/TerminologyEditor/assets/nls/TerminologyEditor","DS/FolderEditor/utils/ServerDataAccess","DS/FolderEditor/Folder_CSO","DS/FolderEditor/service/FolderEditorWebService","DS/IPClassifyUtil/IPClassifyModelEvents","DS/IPClassifyUXUtil/IPClassifyLoaderGlobal"],(function(e,o,t,i,n,r,s,a,l){"use strict";return t.extend({_newType:"Term",_commandName:"NewBrowsingNode",_localContext:null,init:function(e){this._parent({...e},{mode:"exclusive",isAsynchronous:!0});require(["DS/PADUtils/PADContext"],(o=>{this._localContext=e.context?e.context:o.get()}))},getType:function(){return this._newType},getCreationDialogParameters:async function(){s.getHeadersInformations().then((async t=>{var s="";let a=r.getCurrentBookmarkElement()?[r.getCurrentBookmarkElement()]:[];if(1!==a.length)throw new Error(i.msg_error_invalidselection);var l=a[0];await n.isKindOfs(l.getType(),["Term","Terminology"])&&(s=l.getID());let c=this;var d={type:this._newType,notification:!0,events:{onSuccess:async function(t){o.displayNotification({message:i.msg_success_createBN,className:"success"}),await new Promise((e=>setTimeout(e))),t=e.is(t,"string")?JSON.parse(t):t,c._localContext.addRoots({pids:[t.result[0].identifier]})},onFailure:function(e){console.log(e)},onCancel:function(e){c.hideModalLoader(),console.log(e)}},silentMode:!1,viewType:"listView",labelTopBar:i.commands.newBrowsingNode,commandName:this._commandName,context:t,options:{parentPIDs:[s]}};this.launchCreateNew(d)}))},execute:function(){var e=this;this.showModalLoader(),require(["DS/ENONewWidget/ENONew/Events"],(function(o){o.addEvent("onCreationDialogAction",(function(o){o&&"ready"===o.action&&e.hideModalLoader()}))})),this.getCreationDialogParameters()},hideModalLoader:function(){l.removeComponentToLoad("global","new")},showModalLoader:function(){l.addComponentsToLoad("global",{new:i.New_Loading})}})})),define("DS/TerminologyEditor/plugins/BSPlugin",["DS/IPClassifyUtil/IPClassifyUtility","DS/FolderEditor/utils/SettingsHandler","DS/FolderEditor/utils/ServerDataAccess","DS/TerminologyEditor/service/TerminologyEditorWebService","i18n!DS/TerminologyEditor/assets/nls/TerminologyEditor"],((e,o,t,i,n)=>{let r={iconName:"browsing-structure-node",fontIconFamily:1},s={iconName:"browsing-structure-root",fontIconFamily:1};function a(){return Promise.resolve({fields:["prefix","suffix"]})}function l(){return Promise.resolve({fields:["prefix","suffix"]})}function c(e){return new Promise(((o,t)=>{let n=e.properties;props={},n&&(props.title=n.Title),i.setTerminologyProperties({...e,properties:props,onComplete:o,onFailure:function(e,o){t({err:e,serverErr:o})}})}))}function d(e,o){return o.dataTransfer.types.length>1||!o.dataTransfer.types.includes("Files")}function m({target:e,listOfTreeElements:i}){let r=!1,s="";for(var a=0;a<i.length;a++){let l=i[a];if(t.isKindOfSync(l.getType(),"Terminology")&&!o.isSection(e.getType())?(r=!0,s=n.msg_error_pasteDestination.InvalidParameters+n.msg_error_pasteDestination.BSDestination):t.isKindOfSync(l.getType(),"Term")&&o.isSection(e.getType())&&(r=!0,s=n.msg_error_pasteDestination.InvalidParameters+n.msg_error_pasteDestination.BNDestination),r)throw new Error(JSON.stringify({title:n.msg_error_pasteDestination.Title,subtitle:s}))}return!0}function u(e,o){t.isKindOfSync("Term",o.type)?o.icons=[r]:t.isKindOfSync("Terminology",o.type)&&(o.icons=[s])}let g={ActionBar_NewBrowsingStructureCmd:{author:!1,white_click:!0,search:!1,TREE:{types:{TerminologySection_AllTerminologies:!0}}},ActionBar_NewBrowsingNodeCmd:{author:!1,white_click:!0,search:!1,multisel:!1,TREE:{types:{Terminology:!0,Term:!0}}},RenameCmd_BrowsingStructure:{multisel:!1,TREE:{types:{Terminology:!0}},CONTENT:{types:{Terminology:!0}}},RenameCmd_BrowsingNode:{multisel:!1,TREE:{types:{Term:!0}},CONTENT:{types:{Term:!0}}},MaturityHdr:{TREE:{notypes:{Term:!0}},CONTENT:{notypes:{Term:!0}}}};return{updateCmdsRules:function(o){e.concatJsonValue(o,g)},updatePropertiesPanel:function(e){require(["DS/EditPropWidget/constants/EditPropConstants"],(o=>{e.removeFacets([o.FACET_VIEWS])}))},prepareDataFromIndex:function(e,o){u(0,o)},prepareDataFromDB:function(e,o){u(0,o)},prepareTreeData:function(e,o){let i=e.icon,n=e.type;t.isKindOfSync("Terminology",n)?i=s:t.isKindOfSync("Term",n)&&(i=r),o.icons=[i]},addProbesNlsMapping:function(e){require(["text!DS/TerminologyEditor/assets/TerminologyProbesCommandMapping.json"],(o=>{for(let t in o)e[t]=o[t]}))},getTypesByAction:function(){return{dropLeftView:{TerminologySection_AllTerminologies:()=>!1,Terminology:()=>!1,Term:()=>!1},isDropAuthorized:{TerminologySection_AllTerminologies:d,Terminology:d,Term:d},copyTreeElement:{Terminology:i.copyterminology.bind(i),Term:i.copyterminology.bind(i),TerminologySection_AllTerminologies:i.copyterminology.bind(i)},checkCopyTree:{Terminology:a,Term:l},canBePasted:{Terminology:m,Term:m,TerminologySection_AllTerminologies:m},renameTreeElement:{Terminology:c,Term:c}}}}}));