/*! -- Copyright 2014 Dassault Systemes. All rights reserved. */
define("DS/W3DXComponents/Views/Item/SkeletonRootView",["UWA/Core","DS/W3DXComponents/ContentSet","DS/W3DXComponents/Views/Layout/ChannelView","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/ListView","DS/W3DXComponents/Views/Item/TileView","DS/UIKIT/Input/ButtonGroup","DS/UIKIT/Input/Button","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a,r){"use strict";var l;return l=t.extend({name:"root-skeleton",defaultOptions:{defaultView:"channel",actions:{},switcher:{},detail:{},contents:{views:[{id:"channel",view:i},{id:"tile",view:n,itemView:o},{id:"list",view:s}]}},_getButtonGroup:function(t){var i,n,s=this;if(e.is(t))return i=t.events||(t.events={}),n=i.onClick,i.onClick=function(e,t){n&&n(e,t),s.dispatchEvent("onClick",[t,e])},new a(t||{})},getContentsViewOptions:function(t){var i,n,s,o,a=(i=this.options,n="buttonGroup",s=this.collection,"function"==typeof i[n]?i[n].apply(s,o):e.clone(i[n],!1));return(t=t||{}).default=t.id===this.options.defaultView,t=e.clone(t,!1),e.is(a)&&"channel"!==t.id&&(t.header=UWA.createElement("div",{class:"btn-grp-wrapper"}),this._getButtonGroup(a).inject(t.header)),this._parent.call(this,t)},onMaximized:function(e){var t=this.switcherView.getValue();(e=e||{}).type&&"maximized"===e.type?this._windowed=!1:this._windowed=!0,!this._windowed&&(t="tile"),this.dispatchEvent("onSwitch",[null,t])},onViewChange:function(e){this.onMaximized.apply(this,arguments)}}),l})),define("DS/W3DXComponents/Views/Layout/ScrollView",["UWA/Core","UWA/Event","UWA/Element","UWA/Class/View","UWA/Class/Timed","UWA/Utils/Client","UWA/Fx","DS/UIKIT/Scroller","DS/UIKIT/Spinner","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a,r,l){"use strict";var c="deactivated",h="ready",d="pulling",u="releasing",p="loading";function m(t,i,n,s,o){var a=180*(n>t?(n-t)/(i-t):0),r=n;s=!e.is(s)||s,o=!e.is(o)||o,s&&f.call(this,a),o&&g.call(this,r,this.axis)}function f(t){e.is(t,"number")&&this.elements.pullareaIcon.setStyles({"-webkit-transform":"rotate3d(0, 0, 1, "+t+"deg)","-ms-transform":"rotate3d(0, 0, 1, "+t+"deg)","-moz-transform":"rotate3d(0, 0, 1, "+t+"deg)",transform:"rotate3d(0, 0, 1, "+t+"deg)"})}function g(t,i){var n;e.is(t,"number")&&(n="x"===i?"translate3d("+t+"px, 0, 0)":"translate3d(0, "+t+"px, 0)",this.scroller.getContent().setStyles({"-webkit-transform":n,"-ms-transform":n,"-moz-transform":n,transform:n}))}function v(e){var t=this.elements;switch(e){case d:t.pullareaText.setText("Pull to refresh"),t.pullareaIcon.show(),t.pullareaLoader.hide(),this.scroller.elements.content.setStyle("overflow-"+this.axis,"visible"),this.pullToRefreshState=d;break;case u:t.pullareaText.setText("Release to refresh"),t.pullareaIcon.addClassName("spin").show(),this.fx.tween("spinhack",180,720),setTimeout((function(){t.pullareaIcon.removeClassName("spin")}),this.spinningTime),t.pullareaLoader.hide(),this.pullToRefreshState=u;break;case p:t.pullareaText.hide(),t.pullareaIcon.hide(),t.pullareaLoader.show(),this.container.addClassName("ease"),g.call(this,this.pullLoadingPosition,this.axis),this.pullToRefreshState=p;break;default:this.container.addClassName("ease"),m.call(this,0,0,0),setTimeout((function(e){var t=e.elements;t&&(t.pullareaText&&t.pullareaText.hide(),t.pullareaIcon&&t.pullareaIcon.hide(),t.pullareaLoader&&t.pullareaLoader.hide(),e.container&&e.container.removeClassName("ease"))}),300,this),this.scroller.elements.content.setStyle("overflow-"+this.axis,"auto"),this.pullToRefreshState=e===c?c:h}}function w(e){var t=this.elements;switch(e){default:case h:t.infiniteareaLoader.hide(),t.infinitearea.show(),this.infiniteScrollState=h;break;case p:t.infinitearea.show(),t.infiniteareaLoader.show(),this.infiniteScrollState=p;break;case c:t.infiniteareaLoader.hide(),t.infinitearea.hide(),this.infiniteScrollState=c}}function S(){this.scroller.elements.content.addEvents({resize:E.bind(this),scroll:E.bind(this)}),this.container.addEvents({touchstart:E.bind(this),touchend:E.bind(this),touchcancel:E.bind(this),resize:E.bind(this)})}function C(){this.container.addEvents({touchmove:E.bind(this)})}function y(){this.container.removeEvent("touchmove")}function _(){i.addEvent.call(window,"touchend",this._getReleaseHandler(),!0,1,!0),this.container.addEvent("touchmove",t.stop)}function b(){i.removeEvent.call(window,"touchend",this._getReleaseHandler(),!0),y.call(this)}function E(e){var t=this;switch(e.type){case"touchstart":case"mousedown":case"MSPointerDown":t.pullPosition=0,t._handlePull(e);break;case"touchmove":case"mousemove":case"MSPointerMove":t._handlePull(e);break;case"touchend":case"touchcancel":case"mouseup":case"MSPointerUp":t.pullPosition=-1;break;case"scroll":case"DOMSubtreeModified":case"orientationchange":case"resize":t._handleScroll()}}return r=r.extend({getPosition:function(){var e=this.elements.content;return{y:-e.scrollTop,x:-e.scrollLeft}},getProgress:function(e){var t=this.elements,i="x"===e?"width":"height",n=this.getPosition()[e],s=t.container.getDimensions()[i],o=t.content.getScrolls()[i];return o>0?Math.min((s+Math.abs(n))/o,1):1},isMaxPosition:function(e,t){var i=this.elements.content;return"x"===e?t>0?i.scrollLeft>=i.scrollWidth-i.clientWidth:i.scrollLeft<=0:"y"===e?t>0?i.scrollTop>=i.scrollHeight-i.clientHeight:i.scrollTop<=0:void 0}}),n.extend(s,{tagName:"div",className:"scroll-view",pullPosition:-1,pullLoadingPosition:40,pullMinPosition:20,pullMaxPosition:75,pullFactor:.6,scrollMaxProgress:.85,loadingMinTime:500,spinningTime:1600,defaultOptions:{orientation:"vertical",useInfiniteScroll:!0,usePullToRefresh:!0,loadingCompleteEvent:"loadingComplete",scrollEndEvent:"infiniteScrollEnd"},setup:function(e){var t=e.view,i=e.orientation;this.view=t,this.listenTo(t,this.options.scrollEndEvent,w.bind(this,c)),this.listenTo(t,this.options.loadingCompleteEvent,this.endLoading.bind(this)),this.options.orientation="vertical"===i||"horizontal"===i?i:this.defaultOptions.orientation,"horizontal"===this.options.orientation?(this.axis="x",this.dimension="width"):(this.axis="y",this.dimension="height")},render:function(){var e=this.elements,t=this.options,n=this.view,s=this;return n.render(),n.container.setStyle("horizontal"===this.options.orientation?"height":"width","100%"),this.container.removeClassName("horizontal").removeClassName("vertical").addClassName(t.orientation).empty(),e.pullareaLoader=new l({visible:!1}),e.infiniteareaLoader=new l({visible:!1}),e.pullarea=new i("div",{class:"pullarea",html:{tag:"div",class:"pullarea-info",html:[e.pullareaLoader,new i("span",{class:"fonticon fonticon-arrows-ccw"}).hide(),new i("span",{class:"text"}).hide()]}}).inject(this.container),e.infinitearea=new i("div",{class:"infinitearea",html:{tag:"div",class:"infinitearea-info",html:[e.infiniteareaLoader]}}),this.scroller=new r({element:new i("div",{html:[{tag:"div",class:"scrollable-body",html:n.container},{tag:"div",class:"scrollable-footer",html:e.infinitearea}]})}),this.scroller.getContent().setStyle(this.dimension,"100%"),this.scroller.inject(this.container),e.pullareaInfo=e.pullarea.getElement(".pullarea-info"),e.infiniteareaInfo=e.infinitearea.getElement(".infinitearea-info"),e.pullareaIcon=e.pullarea.getElement("span.fonticon"),e.pullareaText=e.pullarea.getElement("span.text"),this.fx=new a(e.pullareaIcon,{duration:this.spinningTime,transition:"backOut",events:{onAnimate:function(){f.call(s,this.current.spinhack)}}}),S.call(this),v.call(this,this.options.usePullToRefresh?h:c),w.call(this,this.options.useInfiniteScroll?h:c),this},isLoading:function(){return this.infiniteScrollState===p||this.pullToRefreshState===p},endLoading:function(){this.setDelayed("endLoading",(function(){this.infiniteScrollState===p&&w.call(this,h),this.pullToRefreshState===p&&v.call(this,h),this._handleScroll()}),this.loadingMinTime)},usePullToRefresh:function(e){v.call(this,e?h:c)},useInfiniteScroll:function(e){w.call(this,e?h:c)},_getReleaseHandler:function(){return e.is(this.handler)||(this.handler=this._handleRelease.bind(this)),this.handler},_handlePull:function(e){var i,n=this.pullToRefreshState,s=this.axis,o=t.getPosition(e)[s];n!==c&&(i=-1!==this.pullPosition?(o-this.pullPosition)*this.pullFactor:0,n===h&&0===this.pullPosition?(this.pullPosition=o,C.call(this)):n===h&&!this.isLoading()&&i>0&&this.scroller.isMaxPosition(s,-1)?(v.call(this,d),_.call(this),m.call(this,this.pullMinPosition,this.pullMaxPosition,i),t.stop(e)):n===d?(i>this.pullMaxPosition&&v.call(this,u),m.call(this,this.pullMinPosition,this.pullMaxPosition,i)):n===u&&m.call(this,this.pullMinPosition,this.pullMaxPosition,i,!1,!0))},_handleRelease:function(){this.pullToRefreshState===u?(v.call(this,p),this.options.useInfiniteScroll&&w.call(this,h),this.dispatchEvent("onPullToRefresh")):v.call(this,h),b.call(this)},_handleScroll:function(e){var t,i;(this.options.useInfiniteScroll&&this.infiniteScrollState!==c&&!this.isLoading()&&this.scroller.getProgress(this.axis)>this.scrollMaxProgress&&null!==(t=this.container,(i=t.offsetParent)!==document.body?i:null)||e)&&(w.call(this,p),this.dispatchEvent("onInfiniteScroll"))},scrollToPosition:function(e,t,i){this.scroller.scrollTo(e,t,i)},scrollToElement:function(e,t,i){this.scroller.scrollToElement(e,t,i)},destroy:function(){this.view&&this.view.destroy(),this.removeEvents(),this.container.removeEvents(),this.stopListening(),this._parent()}})})),define("DS/W3DXComponents/Views/Plugins/LazyLoading",["UWA/Core"],(function(e){"use strict";var t={defaultImgSrc:"",loaderSrc:"",imgElem:"",imgSrc:""};return{triggerLoading:function(e,t,i){var n=this;e.setAttribute("src",i),UWA.createElement("img",{styles:{display:"none"},events:{load:function(){n.onLoad(),this.destroy()},error:function(){n.onLoadError(),this.destroy()}}}).inject(document.body).setAttribute("src",t)},setSrc:function(e,t){e.setAttribute("src",t)},onLoading:function(){var i=e.extend(t,this.lazyLoading,!0),n=i.imgElem,s=i.imgSrc,o=i.loaderSrc;this.triggerLoading(n,s,o)},onLoadError:function(){var e=this.lazyLoading,t=e.imgElem,i=e.defaultImgSrc;this.setSrc(t,i),this.dispatchEvent("onLoadError")},onLoad:function(){var e=this.lazyLoading,t=e.imgElem,i=e.imgSrc;this.setSrc(t,i),this.dispatchEvent("onLoad")}}})),define("DS/W3DXComponents/PDFViewer",["UWA/Core","UWA/Event","UWA/Class/View","UWA/Utils","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/UIKIT/Alert","DS/UIKIT/Mask","DS/PDFjs/PDFjs","DS/WAFData/WAFData","i18n!DS/W3DXComponents/assets/nls/PDFViewer","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a,r,l,c,h){"use strict";var d=i.extend({tagName:"div",className:"pdf-viewer",url:"",pageNum:1,scale:100,forceFit:!1,stickyViewer:!1,downloadUrl:"",fullScreen:!1,_fullScreenButton:null,_pageRendering:!1,_pageNumPending:null,_canvas:null,_pdfDoc:null,_zoomChanged:!1,domEvents:{resize:"_onResize"},setup:function(e){(e=e||{}).requestsOptions=e.requestsOptions||{};var t=this;t.url=e.url||"",t.scale=parseInt(e.scale)||100,t.pageNum=parseInt(e.pageNum)||1,t.forceFit=!1!==e.forceFit,t.stickyViewer=e.stickyViewer,t.fullScreen=e.fullScreen,t.downloadUrl=e.downloadUrl||"",t.deactivateShortcutsOnBlur=!0===e.forceFit,t.options=e},render:function(){var i=this,n=e.createElement,a=i.container,r=i.elements,l="",c=i._getClientInformation();return i.stickyViewer&&(a.addClassName("sticky-pdf-viewer"),l=" sticky-toolbar"),a.addClassName("shortcuts-active"),n("div",{class:i.className+"-toolbar"+l,html:[{class:i.className+"-pagetools",html:[new s({className:i.className+"-previouspage-btn default",icon:"fonticon-left-dir",events:{onClick:i._onPrevPage.bind(i)}}),new s({className:i.className+"-nextpage-btn default",icon:"fonticon-right-dir",events:{onClick:i._onNextPage.bind(i)}}),n("span",{class:i.className+"-pages",html:[r.pageNum=new o({className:i.className+"-page-num",events:{onKeyDown:function(e){"return"===t.whichKey(e)&&(i.pageNum=parseInt(e.target.value),i._queueRenderPage(i.pageNum||1))}}}),{tag:"span",text:" / ",styles:{margin:"0 5px 0 5px"}},r.pageCount=n("div",{class:i.className+"-page-count"}),{tag:"span",text:" pages",styles:{"margin-left":"5px"}}]}),new s({className:i.className+"-zoomout-btn default",icon:"fonticon-minus",events:{onClick:i._onZoomOut.bind(i)}}),new s({className:i.className+"-zoomin-btn default",icon:"fonticon-plus",events:{onClick:i._onZoomIn.bind(i)}}),i.forceFit?"":new s({className:i.className+"-zoomfit-btn default",icon:"fonticon-arrow-double-combo",events:{onClick:i._onZoomFit.bind(i)}}),i.downloadUrl?new s({className:i.className+"-download-btn default",icon:"fonticon-download",events:{onClick:i._downloadAction.bind(i)}}):"",i.fullScreen?i._fullScreenButton=new s({className:i.className+"-fullscreen-btn default",icon:"fonticon-resize-full",events:{onClick:i._fullScreen.bind(i)}}):""]}]}).inject(a),n("div",{class:i.className+"-canvas-wrapper",html:[{tag:"canvas",class:i.className+"-canvas"}]}).inject(a),i._canvas=i.getElement("."+i.className+"-canvas"),i._downloadPdf(),c.isIphone||c.isIpad||(i.deactivateShortcutsOnBlur&&(window.addEventListener("click",i._deactivateShortcuts.bind(i)),i.container.addEvent("click",i._activateShortcuts.bind(i))),document.body.addEventListener("keyup",i._manage_shortcuts.bind(i),!1)),i},renderPage:function(e){this._queueRenderPage(e)},notify:function(e){e=e||{};var t=this;t._alert||(t._alert=new a({className:t.className+"-alert"}).inject(t.container||window.body)),t._alert.add(e),t._alert.show()},setUrl:function(e){this.url=e,this._downloadPdf()},_renderPage:function(e){var t=this;t._pdfDoc&&(t._pageRendering=!0,(e=e||t.pageNum)>t._pdfDoc.numPages&&(e=t._pdfDoc.numPages),e<=0&&(e=1),t.pageNum=e,t._pdfDoc.getPage(e).then((function(e){var i,n,s=t._canvas,o=t.container;s.width=o.getDimensions().width*(t.scale/100)-45,n=e.getViewport(s.width/e.getViewport(1).width),s.height=n.height,i={canvasContext:s.getContext("2d"),viewport:n},e.render(i).promise.then((function(){t._pageRendering=!1,null!==t._pageNumPending&&(t._renderPage(t._pageNumPending),t._pageNumPending=null)})).catch(t._catchPDfjsError.bind(t)),o.setStyle("height",n.height+54+"px")})).catch(t._catchPDfjsError.bind(t)),t.elements.pageNum.setValue(t.pageNum))},_downloadPdf:function(){var t=this,i=t.container;function n(n){e.log(n),r.unmask(i),t.options.requestsOptions.onFailure?t.options.requestsOptions.onFailure():t.notify({message:h.unreachableUrl,className:"error"})}t.url&&(r.mask(i),c.handleRequest(t.url,{method:"GET",type:"arraybuffer",authentication:t.options.requestsOptions.authentication,onComplete:function(e){e=new Uint8Array(e),l.getDocument(e).then((function(e){t._pdfDoc=e,t.elements.pageCount.textContent=t._pdfDoc.numPages,r.unmask(i),t._queueRenderPage(t.pageNum)})).catch(t._catchPDfjsError.bind(t))},onFailure:n,onTimeout:n}))},_queueRenderPage:function(e){var t=this;t._pageRendering?t._pageNumPending=e||t.pageNum:t._renderPage(e)},_onPrevPage:function(){var e=this;e.pageNum<=1||(e.pageNum--,e._queueRenderPage(e.pageNum))},_onNextPage:function(){var e=this;e.pageNum>=e._pdfDoc.numPages||(e.pageNum++,e._queueRenderPage(e.pageNum))},_onZoomIn:function(){var e=this;e.forceFit&&(e._zoomChanged=!0),e.scale+=10,e._queueRenderPage(e.pageNum)},_onZoomOut:function(){var e,t=this,i=t.scale;t.forceFit&&(t._zoomChanged=!0),(e=i-10)<=0&&(e=10),e!==i&&(t.scale=e,t._queueRenderPage(t.pageNum))},_onZoomFit:function(){var e=this;e.scale=100,e._queueRenderPage(e.pageNum)},_onResize:function(){var e=this;e.forceFit&&!e._zoomChanged?function(e,t,i){var n,s,o,a,r;function l(){var r=(new Date).getTime()-a;r<t&&r>=0?setTimeout(l,t-r):(null,i||(e.apply(o,s),n||null))}}(e._onZoomFit(),1e3,!1):e._zoomChanged=!1},_downloadAction:function(){var e=this._getClientInformation();window.open(this.downloadUrl,(e.isIphone||e.isIpad)&&e.isSafari?"_blank":"_self")},_fullScreen:function(){var e=this.container;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this._fullScreenButton.setIcon("fonticon-resize-full")):(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this._fullScreenButton.setIcon("fonticon-resize-small"))},_getClientInformation:function(){var e=n.Client,t=e.Platform,i=e.Engine;return{isIpad:!0===t.ipad,isIphone:"safari"===i.name&&t.ios&&!1===t.ipad,isSafari:"safari"===i.name}},_catchPDfjsError:function(e){r.unmask(this.container),this.notify({message:e&&e.message||"An error occured.",className:"error"})},_activateShortcuts:function(){this.container.addClassName("shortcuts-active")},_deactivateShortcuts:function(){this.container.removeClassName("shortcuts-active")},_manage_shortcuts:function(t){var i=this;if(this.container.hasClassName("shortcuts-active"))switch(t.keyCode){case 27:e.is(i._fullScreenButton)&&i._fullScreenButton.setIcon("fonticon-resize-full");break;case 37:i._onPrevPage();break;case 39:i._onNextPage();break;case 107:i._onZoomIn();break;case 109:i._onZoomOut()}},destroy:function(){var e=this,t=e._getClientInformation();return e._canvas&&e._canvas.destroy(),e._pdfDoc=null,e._alert&&e._alert.destroy(),e._alert=null,t.isIphone||t.isIpad||document.body.removeEvent("keyup",e._manage_shortcuts),e._parent.apply(e,arguments)}});return d})),define("DS/W3DXComponents/LanguagePicker",["UWA/Core","UWA/Class/View","DS/WAFData/WAFData","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Toggle","i18n!DS/W3DXComponents/assets/nls/LanguagePicker"],(function(e,t,i,n,s,o,a){"use strict";return t.extend({_propertyName:null,_passportUrl:null,_service:{url:null,data:{}},_getSupportedLanguages:null,_getCurrentLanguage:null,_setCurrentLanguage:null,_modal:null,_saveButton:null,_cancelButton:null,_currentLanguage:null,_language:null,className:"language-picker",_createContent:function(){var t,r=[];for(var l in t=this._getSupportedLanguages(),this._currentLanguage=this._getCurrentLanguage(),this._language=this._currentLanguage,this.saveButton=new s({value:a.Save,className:"primary",events:{onClick:function(){this.saveButton.load(),this.cancelButton.setDisabled();for(var t=0;t<r.length;t++)r[t].setDisabled();this._service.onComplete=function(){this._language!==this._currentLanguage?this._setCurrentLanguage(this._language):this._modal.hide()}.bind(this),this._service.onFailure=function(){this.saveButton.load(!1),this.cancelButton.setDisabled(!1);for(var e=0;e<r.length;e++)r[e].setDisabled(!1)}.bind(this),null!==this._service.url?("function"==typeof this._propertyName?this._service.data=e.Json.encode(this._propertyName(this._language)):"string"==typeof this._propertyName&&(this._service.data[this._propertyName]=e.Json.encode(this._language)),e.Data.request(this._service.url,this._service)):null!==this._passportUrl?(this._service.url=("/"===this._passportUrl.slice(-1)?this._passportUrl:this._passportUrl+"/")+"my-profile/update/language/"+this._language,i.authenticatedRequest(this._service.url,{method:"POST",onComplete:this._service.onComplete,onFailure:this._service.onComplete})):this._setCurrentLanguage(this._language)}.bind(this)}}),this.cancelButton=new s({value:a.Cancel,events:{onClick:function(){this._modal.hide()}.bind(this)}}),t){var c=new o({name:"language",label:t[l].localizedName+" ("+t[l].staticName+")",value:l,className:"primary",events:{onChange:this._changeLanguage.bind(this)}});this._language===l&&c.check(),r.push(c)}return this._modal=new n({closable:!0,header:"<h4>"+a.LanguagePreferences+"</h4>",body:r,footer:[this.saveButton,this.cancelButton],events:{onHide:function(){this.destroy()}.bind(this)}}),this._modal},_changeLanguage:function(e){this._language=e.target.value},render:function(){return this.container.setContent(this._createContent()),this},show:function(){this._modal.show()},setup:function(t){return t&&(e.merge(this._service,t.service),t.hasOwnProperty("propertyName")&&(this._propertyName=t.propertyName),t.hasOwnProperty("passportUrl")&&(this._passportUrl=t.passportUrl),t.hasOwnProperty("availableLanguagesGetter")&&t.hasOwnProperty("currentLanguageGetter")&&t.hasOwnProperty("currentLanguageSetter")&&(this._getSupportedLanguages=t.availableLanguagesGetter,this._getCurrentLanguage=t.currentLanguageGetter,this._setCurrentLanguage=t.currentLanguageSetter)),this}})})),define("DS/W3DXComponents/Views/Plugins/Multisel",(function(){"use strict";return{_initSelectionSet:function(){this._selectionState||(this._selectionState={isActive:!1,selectedObjects:[],wasExplicitlyActivated:!1})},resetSelectionState:function(){this._selectionState&&(this._selectionState.isActive=!1,this._selectionState.selectedObjects=[],this._selectionState.wasExplicitlyActivated=!1)},setMultisel:function(e){this._selectionState=e,this.dispatchEvent("onSetMultisel")},activateMultisel:function(e){this._initSelectionSet(),this._selectionState.isActive=!0,this._selectionState.wasExplicitlyActivated=e,this.dispatchEvent("onActivateMultisel")},deactivateMultisel:function(){this.resetSelectionState(),this.dispatchEvent("onDeactivateMultisel")},addSelection:function(e){this._initSelectionSet(),this._selectionState.selectedObjects.push(e),this.dispatchEvent("onAddSelection",e)},removeSelection:function(e){if(this._selectionState){for(var t=this._selectionState.selectedObjects.length-1;t>=0;t--)this._selectionState.selectedObjects[t].id===e.id&&this._selectionState.selectedObjects.splice(t,1);this.dispatchEvent("onRemoveSelection",e)}},isSelected:function(e){return!!this._selectionState&&this._selectionState.selectedObjects.filter((function(t){return t.id===e.id})).length>0},selectionIsEmpty:function(){return this._initSelectionSet(),0===this._selectionState.selectedObjects.length},getSelectionState:function(){return this._initSelectionSet(),this._selectionState},getSelection:function(){return this._initSelectionSet(),this._selectionState.selectedObjects}}})),define("DS/W3DXComponents/Models/ActionModel",["UWA/Core","UWA/Class/Model"],(function(e,t){"use strict";return t.extend({defaults:{title:"",icon:"",id:"",context:!1,overflow:!0}})})),define("DS/W3DXComponents/Views/GraphView",["UWA/Core","UWA/Class/View","DS/UIKIT/Alert","DS/3DXHighcharts/3DXHighcharts","i18n!DS/W3DXComponents/assets/nls/Views/GraphView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s){"use strict";var o="line",a="column",r="pie",l="donut",c="table",h="linear",d="datetime",u="none",p="warning",m="#000000",f="#9EC944",g=["#3A7DCC","#F8941C","#FFCB06",f,"#34B0D2","#8A5DC0","#D95F5C"],v={enabled:!1},w={enabled:!1};var S=t.extend({tagName:"div",className:"w3dx-GraphView",defaultOptions:{custoClass:"",title:"",subtitle:"",type:o,xAxis:{title:"",categories:[],type:h},yAxis:{title:""},series:[],unit:"",stacking:"",showPlot:!1,animation:!0,width:null,height:null},_highcharts:null,_tableEl:null,_alert:null,_messages:[],_isInjected:!1,setup:function(t){(t=t||{}).series=t.series||[],t.xAxis=t.xAxis||{},t.yAxis=t.yAxis||{},t.xAxis.categories=t.xAxis.categories||[],this.options=e.extend(e.clone(this.defaultOptions),t||{},!0),this._parent(t)},render:function(){var e,t=this.options,i=t.series;if(e=t.type=t.type.toLowerCase(),this.container.addClassName(t.custoClass),!i.length)return this._notify({message:s.noValidDataProvided,type:p}),this;if(e===c)this._highcharts&&(this._highcharts.destroy(),this._highcharts=null),this._drawTable();else try{this._tableEl&&(this._tableEl.destroy(),this._tableEl=null),this._drawHighcharts()}catch(e){this._notify({message:e.message})}return this},reflow:function(){return this._highcharts&&this._highcharts.reflow(),this},setSize:function(e,t){return e=e||100,t=t||100,this._highcharts?this._highcharts.setSize(e,t):this._tableEl&&this._tableEl.setStyles({width:e,height:t}),this},destroy:function(){this._highcharts&&(this._highcharts.destroy(),this._highcharts=null),this._tableEl&&(this._tableEl.destroy(),this._tableEl=null),this._alert&&(this._alert.destroy(),this._alert=null),this._messages=null,this._parent()},_parseGraphOption:function(t){var i,n,c={},h=t.type;switch(t.xAxis.type===d&&(t.xAxis.categories=null),h){case o:c=this._getLineOptions(t);break;case r:case l:c=this._getPieDonutOptions(t);break;case a:c=this._getColumnOptions(t);break;default:throw e.log("DS/W3DXComponents/Views/GraphView : Error => No valid type found in chart options"),{message:(i=s.TypeGraphNotDef,n={typeGraph:h},i.replace(/\{([\w\-]+)\}/g,(function(e,t){return void 0!==n[t]?n[t]:""})))}}return c.title={text:t.title},c.subtitle={text:t.subtitle},c},_getLineOptions:function(e){var t={},i=e.xAxis,n=e.unit,s=e.showPlot,o=e.stacking,a=i.categories||[];return t.plotOptions={area:{fillOpacity:.1,marker:{enabled:s}},line:{marker:{enabled:s}}},t.xAxis={title:{text:i.title},type:i.type},t.xAxis.categories=a.length?a:null,t.yAxis={title:{text:e.yAxis.title+(n?" ("+n+")":"")},plotLines:[{value:0,width:1,color:"#808080"}]},t.tooltip={pointFormat:"{series.name}: <b>{point.y}</b>"+(o!==u?" ({point.percentage:.1f}%)<br/>":"")},t.series=e.series,t=this._getThresholdOptions(t,e)},_getColumnOptions:function(e){var t={},i=e.unit,n=e.xAxis,s=e.stacking,o=n.categories||[];return t.xAxis={title:{text:n.title},type:n.type},t.yAxis={allowDecimals:!1,title:{text:e.yAxis.title+(i?" ("+i+")":"")}},t.xAxis.categories=o.length?o:null,t.tooltip={pointFormat:"{series.name}: <b>{point.y}</b>"+(s!==u?" ({point.percentage:.1f}%)<br/>":"")},t.series=e.series,t=this._getThresholdOptions(t,e)},_getPieDonutOptions:function(e){var t={};return t.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:m,connectorColor:m},showInLegend:!0}},t.tooltip={pointFormat:"<b>"+s.total+": {point.y}</b> ({point.percentage:.1f} %)"},t.series=[{type:r,name:e.unit,data:e.series[0].data,innerSize:e.type===l?"60%":"0%"}],t},_getThresholdOptions:function(t,i){var n=t.yAxis,s=n.plotLines,o=i.yAxis,a=o.thresholdMin||{},r=o.thresholdMax||{},l=a.value,c=r.value,h="ShortDash";return s||(s=n.plotLines=[]),a&&e.is(l)&&s.push({id:"limit-min",color:f,dashStyle:h,width:2,value:l||0,zIndex:100,label:{text:a.title||""}}),r&&e.is(c)&&s.push({id:"limit-max",color:"#B22222",dashStyle:h,width:2,value:c||0,zIndex:100,label:{text:r.title||""}}),t},_drawHighcharts:function(){var t,i,o=this.options,a=o.expertOpts,r=o.stacking||u,l=o.unit;i=this._parseGraphOption(o),e.extend(i,{chart:{renderTo:this.container,type:o.type,width:o.width||null,height:o.height||null},plotOptions:{series:{animation:o.animation,stacking:r===u?null:r}},legend:{borderWidth:0},tooltip:{valueSuffix:l},colors:g,credits:v,exporting:w},!0),a&&e.extend(i,a,!0),this._messages=[];try{this._highcharts=new n.Chart(i)}catch(n){e.log(n),e.log("GraphView: Provided highcharts options:"),e.log(i),t=n.message||"",HighchartsAdapter||(t=s.highchartsStandaloneNotDef+";<br/> "+t),this._notify({message:t||" "+s.errorInOptions})}},_drawTable:function(){var t,i,n,o,a,r,l,c,h,d,u,m,f,g=0,v=[],w=e.createElement,S=this,C=S.container,y=S.options,_=y.series||[],b=y.unit||"",E=(y.xAxis||{}).categories||[],x=!!E.length;function V(){S._notify({message:s.noValidDataProvided,type:p})}if(_.length&&_[0].data){for(v=(u=_[0]).data,h=w("table",{class:this.className+"-table table table-striped table-hover",html:[w("thead",{html:m=w("tr",{class:"th-row row"})}),d=w("tbody")]}),f=u.columns||[],x&&f.length&&m.addContent({tag:"th",class:"th-col col",html:"&nbsp;"}),t=0,l=f.length;t<l;t++)m.addContent({tag:"th",class:"th-col col",html:f[t]+""});for(t=0,r=v.length;t<r;t++)for(n=v[t],a=w("tr",{class:"tb-row row"}).inject(d),x&&(c=E[t]||"",a.addContent({tag:"td",class:"tb-col col category",html:c+""})),i=0,o=n.length;i<o;i++)g++,a.addContent({tag:"td",class:"tb-col col",html:n[i]+""});g?(S._messages=[],C.setContent(h),b&&C.addContent({tag:"div",class:"unit",html:"("+b+")"})):V()}else V()},_notify:function(t){var n,o,a=this._alert,r=this.container;n=(o=(t=t||{}).type||"error").ucfirst()+": <b>"+(t.message||s.errorNotSpec)+".</b>",r?(a&&a.destroy(),r.empty(),this._alert=a=new i({className:this.className+"-notify",closable:t.closable||!1,visible:!0,autoHide:t.autoHide||!1,hideDelay:t.hideDelay||4e3}).inject(r),this._isInjected?a.add({message:n,className:o}):this._messages.push(t)):e.log(n)},onPostInject:function(){var e=this;e._isInjected=!0,e._messages.forEach((function(t){e._notify(t)})),e._messages=[]}});return S.TYPE_LINE=o,S.TYPE_COLUMN=a,S.TYPE_PIE=r,S.TYPE_DONUT=l,S.TYPE_TABLE=c,S.XAXIS_TYPE_LINEAR=h,S.XAXIS_TYPE_DATETIME=d,S.XAXIS_TYPE_LOG="logarithmic",S.STACKING_NONE=u,S.STACKING_NORMAL="normal",S.STACKING_PERCENT="percent",function(){try{n.setOptions({lang:{contextButtonTitle:s.contextButtonTitle,drillUpText:s.drillUpText,loading:s.loading,resetZoomTitle:s.resetZoomTitle,months:[s.jan,s.feb,s.mar,s.apr,s.may,s.jun,s.jul,s.aug,s.sep,s.oct,s.nov,s.dec],shortMonths:[s.sjan,s.sfeb,s.smar,s.sapr,s.smay,s.sjun,s.sjul,s.saug,s.ssep,s.soct,s.snov,s.sdec],weekdays:[s.sun,s.mon,s.tue,s.wen,s.thu,s.fri,s.sat]}})}catch(t){e.log("Graph View Error: Highcharts is not defined. Can't be translated.")}}(),S})),define("DS/W3DXComponents/Views/Temp/DeprecatedAutocomplete",["UWA/Core","UWA/Event","UWA/Data","UWA/Json","UWA/Controls/Abstract","UWA/String"],(function(e,t,i,n,s,o){"use strict";return s.extend({typeTimeout:null,dataCache:{},itemCache:{},defaultOptions:{suggestUrl:null,suggestKey:"",placeholder:"",shouldExist:!1,itemDataKey:"item",dataParser:null,typeDelay:500,minLength:1,maxHeight:"auto",suggestFormat:"{name}",className:"uwa-autocomplete nv-autocomplete"},init:function(e){this._parent(e),this.buildSkeleton(),this.attachEvents()},buildSkeleton:function(){var t=this.elements,i=this.options.className;t.form=e.createElement("form",{class:i}),t.inputContainer=e.createElement("div",{class:i+"-searchbox"}).inject(t.form),t.input=e.createElement("input",{class:i+"-input",placeholder:this.options.placeholder,type:"text"}).inject(t.inputContainer),this.resetInput(),t.suggestsContainer=e.createElement("div",{class:i+"-suggests"}).inject(t.form),t.suggests=e.createElement("ul").inject(t.suggestsContainer),t.container=t.form},attachEvents:function(){var e=this.elements;e.input.addEvent("keyup",this.onKeyUp.bind(this)),e.input.addEvent("blur",this.onBlur.bind(this)),e.input.addEvent("focus",this.onFocus.bind(this)),e.form.addEvent("submit",function(i){var n=this.itemCache[e.input.value.toLowerCase()];return t.stop(i),this.options.shouldExist&&!n||(this.options.suggestKey&&n&&(e.input.value=n[this.options.suggestKey]),this.dispatchEvent("onSelect",[e.input.value,n]),e.input.blur(),this.dispatchEvent("onHideSuggests")),!1}.bind(this))},getSuggestions:function(e){var t;if(e)return this.dataCache[e]?(this.dispatchEvent("onUpdateSuggests",[this.dataCache[e]]),void(this.typeTimeout=null)):void(this.options.suggestUrl&&(t=this.options.suggestUrl.replace("{text}",e),i.getText(t,function(t){(t=this.dataParse(t)).length>0&&(this.dataCache[e]=t,this.dispatchEvent("onUpdateSuggests",[t])),this.typeTimeout=null}.bind(this))))},dataParse:function(t){var i,s,o,a=this.options.dataParser;if(e.is(a,"function"))t=a(t);else{if(n.isJson(t))t=n.decode(t),o=!0;else for(i in t=n.xmlToJson(t))if(t.hasOwnProperty(i)){t=t[i];break}for(i in t)t.hasOwnProperty(i)&&(s||(s=i),Array.isArray(t[i])&&(t=t[i],o=!0));!o&&s&&(t=[t[s]])}return Array.isArray(t)?t:[]},resizeSuggests:function(){var e=this.elements,t=e.input.getDimensions();e.suggestsContainer.setStyle("width",t.width+"px"),this.options.maxHeight&&"auto"!==this.options.maxHeight&&e.suggestsContainer.setStyle("height",this.options.maxHeight+"px")},getFormattedSuggest:function(t){return this.options.suggestFormat.replace(/\{(\w+)\}/g,(function(i,n){return e.is(t,"string")?t:t[n]}))},resetInput:function(){var e=this.elements;e.input.placeholder?e.input.value="":e.input.value=this.options.placeholder,this.resetCache()},getFocus:function(){this.elements.input.focus()},resetCache:function(){this.dataCache={},this.itemCache={}},onUpdateSuggests:function(t){var i,n,s=this.elements;s.suggests.empty(),this.dispatchEvent("onShowSuggests"),Array.isArray(t)&&0!==t.length&&(t.forEach(function(t){var a=this.getFormattedSuggest(t);i=e.createElement("li"),(n=e.createElement("a").inject(i)).setHTML(a),i.inject(s.suggests),this.options.suggestKey&&(this.itemCache[t[this.options.suggestKey].toLowerCase()]=t),n.addEvent("click",function(e){var t=this.options.suggestKey?e[this.options.suggestKey]:o.stripTags(this.getFormattedSuggest(e));this.dispatchEvent("onSelect",[t,e])}.bind(this,t))}.bind(this)),this.resizeSuggests())},onSelect:function(e,t){this.elements.input.value=e,this.dispatchEvent("onHideSuggests")},onHideSuggests:function(){this.elements.container.removeClassName(this.options.className+"-suggestsDisplayed")},onShowSuggests:function(){this.elements.container.addClassName(this.options.className+"-suggestsDisplayed")},onBlur:function(e){setTimeout(function(){this.dispatchEvent("onHideSuggests")}.bind(this),200)},onFocus:function(e){var i=this.elements,n=t.getElement(e);i.input.value===this.options.placeholder&&(i.input.value=""),this.getSuggestions(n.value)},onKeyUp:function(e){var i=t.getElement(e);0!==i.value.length?i.value.length>=this.options.minLength&&!this.typeTimeout&&(clearTimeout(this.typeTimeout),this.typeTimeout=setTimeout(function(){this.getSuggestions(i.value)}.bind(this),this.options.typeDelay)):this.onHideSuggests()}})})),define("DS/W3DXComponents/IdCard",["UWA/Core","UWA/Event","UWA/Array","UWA/Utils","UWA/Class","UWA/Class/View","UWA/Class/Model","UWA/Class/Debug","DS/UIKIT/Tooltip","DS/UIKIT/DropdownMenu","DS/UIKIT/Native/Dropdown","DS/UIKIT/Input/Text","DS/CefCommunication/CefCommunication","i18n!DS/W3DXComponents/assets/nls/IdCard","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a,r,l,c,h,d,u,p){"use strict";var m=48,f=0,g=1,v=0,w=1,S="bottom",C=n.Client.Features.touchEvents,y=/translateX\((([0-9\.\-]+)(?:px)*?)\)/;function _(t,i,n,o){var a=t[i];switch(e.typeOf(a)){case"function":return a.apply(n,o);case"class":return a;default:return a instanceof s?a:e.clone(a)}}var b=c.extend({defaultOptions:{bound:!1,position:"",removeOnHide:!1},_onWindowClick:function(e){var i=this.options.menuIcon,n=t.getElement(e);n===i||n.isInjected(i)?(e.stopPropagation(),this.toggle()):this.hide()},init:function(){this._parent.apply(this,arguments),this._onWindowClick=this._onWindowClick.bind(this),this.options.menuIcon.addEvent("click",this._onWindowClick),this.addEvents({onShow:function(){e.extendElement(document.body).addEvent("click",this._onWindowClick)},onHide:function(){e.extendElement(document.body).removeEvent("click",this._onWindowClick)}})}}),E=a.extend({defaults:{actions:null,facets:null,banner:null,thumbnail:null,title:null,ownerName:null,date:null,description:null,editView:null,editViewOptions:null},_retrieve:function(e,t){var i,n,s=void 0;return"string"==typeof e&&t&&"object"==typeof t&&((n=(i=e.split("->",2)).length)>1?s=this._retrieve(i[1],t[i[0]]):1===n&&(s=t[e])),s},get:function(e){return this._retrieve(e,this._attributes)},init:function(e,t){if(!t||!t.idCard)throw new Error("ID card instance could not be found.");return this._idCard=t.idCard,this._parent.apply(this,arguments)},destroy:function(){this._idCard=null,this.removeEvents(),this.stopListening()},"onChange:actions":function(t,i){!this._idCard._useNativeActionMenu()&&"array"===e.typeOf(i)&&i.length>10&&console.warn("The total of action buttons in the header should not exceed 10!")}}),x=o.extend({_rendered:!1,_controls:null,_createContent:function(){return""},_registerControl:function(e,t){if("string"==typeof e)return this._controls[e]&&this._controls[e].destroy(),this._controls[e]=t,t;throw new Error("Invalid arguments!")},_unregisterControl:function(e){if("string"!=typeof e)throw new Error("Invalid arguments!");this._controls[e]&&(this._controls[e].destroy(),delete this._controls[e])},init:function(){return this._controls={},this._parent.apply(this,arguments)},render:function(){return this.container.setContent(this._createContent()),this._rendered=!0,this},inject:function(){return this._rendered||this.render(),this._parent.apply(this,arguments)},destroy:function(){var e,t=null,i=this._controls;for(t in i)i.hasOwnProperty(t)&&(i[t].destroy(),delete i[t]);return this.stopListening(),this.dispatchEvent("onDestroy",[this]),e=this._parent(),this.options=null,this.container=null,this.tagName=null,this.className=null,this.attributes=null,this.domEvents=null,e}}),V=x.extend({_config:null,_attributesMapping:null,_collapsed:!1,_folded:!1,_minimized:!1,_facetsLikeTabs:!0,_editableElements:["title","banner","thumbnail"],_selectedFacet:null,_selectedFacetName:null,_previouslySelectedFacetName:null,_mode:f,_actionsLayout:v,_facetsLayout:v,_transitioning:!1,_inDOM:!1,_facetsScrollToLeft:0,_nativeActionMenu:!1,model:null,tagName:"div",className:"id-card without-banner without-thumbnail",domEvents:{resize:"_onResize","keyup .title-section > input":"_onTitleChangeRequest","click .banner-section .fonticon-pencil":"_onBannerChangeRequest","click .thumbnail-section .fonticon-pencil":"_onThumbnailChangeRequest"},_useNativeActionMenu:function(){return!0===this._nativeActionMenu&&u.isAvailable()},_getModelAttribute:function(t,i){if(!t&&!i)throw new Error("Attribute name and getter are both missing!");var n,s=this.model,o=this._attributesMapping,a=o&&o[t]||t;return i||(i="function"==typeof a?a:s.get),n=i.call(s,a),e.typeOf(n)?n+"":""},_createTitleSection:function(){return{class:"title-section",html:{tag:"h1",html:[{tag:"span",html:this._config.get("title")}]}}},_createList:function(t,i){if(!t)throw new Error("List type argument is missing");var n,s,o,a,r,c,d,u,p,m=this,f=t+"s",g=null,y=null,_=[],E=[],x=this._facetsLikeTabs,V=null;if((r=e.clone(this._config.get(f)))&&(r.length>0||"action"===t&&this._useNativeActionMenu())){if(E=[],_=[],"facet"===t)switch(d=this.getSelectedFacet(),e.typeOf(d)){case"number":u=function(e,t){return d===t?"selected":""};break;case"string":u=function(e){return d===e?"selected":""};break;default:u=function(){return""}}for(s=0,o=r.length;s<o;s++)c=!1,(n=r[s]).icon&&n.text?"facet"===t?(a=this._getFacetValue(n),!1!==x||a||(c=!0)):a="":(c=!0,a=""),n.hidden=c,p=n.handler?function(){var e=n.name||s,i=t,o=n.handler;return function(t){"facet"===i?this.selectFacet(e):(o.call(this),this.dispatchEvent("onActionSelect",[e]))}}().bind(this):null,i!==w&&E.push({className:t+(c?" hidden":""),text:(n.text?n.text+(a?" | ":""):"")+(a||""),icon:"fonticon fonticon-"+n.icon,selectable:"facet"===t,handler:p||null}),i!==v&&("action"===t?n.listElt=e.createElement("span",{class:t+" interactive"+(c?" hidden":""),html:{tag:"span",class:"fonticon fonticon-"+n.icon},events:p?{click:p}:null}):(V=e.createElement("span",{class:"fonticon fonticon-"+n.icon}),n.listElt=e.createElement("div",e.merge(n.name?{"data-name":n.name}:{},{class:t+(c?" hidden":"")+(p?"":" idc-disabled ")+" interactive "+(!1!==x?" tab-behavior":"")+" "+u(n.name,s),html:[V,!1!==x?{tag:"span",class:"facet-label",html:n.text}:"",!1!==x&&n.text&&a?{tag:"span",class:"facet-text-separator",html:"|"}:"",a?{tag:"span",class:"facet-count",html:a}:""],"data-position":""+s,events:p?{click:p}:null}))),_.push(n.listElt),C||this._registerControl(t+"Tooltip"+s,new l({target:!1===x||"action"===t?n.listElt:V,body:n.text,position:S})));if(i!==v&&(g=e.createElement("div",{class:t+"s-list",html:_})),i!==w){var D=null,I=null,A=null,N=e.createElement("div",{class:"menu-icon-wrapper interactive",html:{class:"fonticon "+("action"===t?"fonticon-down-open":"fonticon-menu-dot")},events:"action"===t?{click:function(){m.dispatchEvent("onActionMenuIconClick",[N,m,I])}}:null});"action"===t&&this._useNativeActionMenu()?(A=h,D=N):A=b,I=this._registerControl(t+"sMenu",new A({items:E,menuIcon:N,target:D})),"facet"===t&&I.addEventOnce("onShow",(function(){var t=m.getSelectedFacet();e.is(t)&&m._highlightFacet(m._getFacetElt(t,!0))})),I.elements.container.getElements(".item").forEach((function(e,t){var i={"data-position":t};r[t].name&&(i["data-name"]=r[t].name),e.set(i)})),y=e.createElement("div",{class:t+"s-menu",html:[N,I]})}return this._config.set(f+"WithExtraData",r),g?y?[g,y]:g:y||null}return null},_createBannerSection:function(){var t,i=this._config.get("banner->url");return i?(t=e.createElement("span",{class:"fonticon fonticon-pencil interactive"}),C||this._registerControl("bannerEditTooltip",new l({target:t,body:p.Change,position:S})),{class:"banner-section"+(!0===this._config.get("banner->alwaysEditable")?" edit-mode":""),html:[{class:"banner",styles:{"background-image":"url('"+i+"')"}},t]}):{class:"banner-section"}},_createThumbnailSection:function(){var t,i=this._config.get("thumbnail->url");return i?(t=e.createElement("span",{class:"fonticon fonticon-pencil interactive"}),C||this._registerControl("thumbnailEditTooltip",new l({target:t,body:p.Change,position:S})),{class:"thumbnail-section"+(!0===this._config.get("thumbnail->alwaysEditable")?" edit-mode":""),html:[{class:"thumbnail"+(!0===this._config.get("thumbnail->squareFormat")?" square-format":""),styles:{"background-image":"url('"+i+"')"}},t]}):{class:"thumbnail-section"}},_createActionsSection:function(){return{class:"actions-section",html:this._createList("action",this._useNativeActionMenu()?"menu":void 0)}},_createHeaderSection:function(){return{class:"header-section",html:[this._createTitleSection(),this._createActionsSection()]}},_createDetailedInfoSection:function(){var e=this._config.get("date"),t=this._config.get("ownerName"),i=this._config.get("description"),n=this._config.get("publicationText");return{class:"detailed-info-section",html:[{class:"owner-name-section",html:[n&&t?{tag:"span",class:"text-muted",html:n}:"",t?{tag:"span",class:"text-primary",html:t}:"",e?{tag:"span",class:"text-muted",html:(t?" : ":"")+e}:""]},i?{class:"description-section",html:i}:null]}},_createMainSection:function(){return{class:"main-section",html:{class:"info-and-thumbnail-section",html:[this._createThumbnailSection(),{class:"info-section",html:[this._createHeaderSection(),this._createDetailedInfoSection()]}]}}},_createFacetsSection:function(){var e={class:"facets-section",html:{class:"facets",html:this._createList("facet")}},t=this._config.get("facetsWithExtraData");return!0===(!t||(!!(this._facetsLikeTabs&&t.length<=1)||!t.some((function(e){return!e.hidden}))))?this.container.addClassName("without-facets"):this.container.removeClassName("without-facets"),e},_refreshSection:function(t){var i,n=null,s=void 0,o=this.elements,a=t+"Section";if(o[a]){switch(t){case"actions":for(s in this._controls)this._controls.hasOwnProperty(s)&&0===s.indexOf("actionTooltip")&&this._unregisterControl(s);break;case"facets":for(s in this._controls)this._controls.hasOwnProperty(s)&&0===s.indexOf("facetTooltip")&&this._unregisterControl(s)}switch((i=this["_create"+t.ucfirst()+"Section"]())&&(n=e.createElement("div",i)),function(e,t){if(e){var i=e.getParent();if(i)return t?i.replaceChild(t,e):e.destroy(),e}}(o[a],n),n?o[a]=n:delete o[a],t){case"actions":this._adaptActionsLayout();break;case"facets":this._facetsScrollToLeft=0,this._adaptFacetsLayout()}}},_handleFacetsVisibility:function(t,i,n,s){var o,a=!1,r=[],l=n.getElements(".facet:not(.hidden)"),c=this.container.hasClassName("facets-as-list"),h=Math.floor((t-(c?0:38))/m);if(!e.is(i,"number"))throw new Error('"facetsScrollToLeft" is supposed to be a number');return n||(n=this.getElement(".facets-list")),e.is(s,"number")||(s=Math.ceil((n.getSize().width-i-t+(c?0:38))/m)),o=Math.max(0,l.length-h-s),(s>0||o>0)&&(a=!0,o>0&&(r=l.slice(0,o)),s>0&&(r=r.concat(l.reverse().slice(0,s)))),l.forEach((function(e){r.indexOf(e)<0?e.removeClassName("resp-hidden"):e.addClassName("resp-hidden")})),a},_getMinimumScrollForFacetEltToBeVisible:function(e,t){var i,n=0;return t||(t=this.getElement(".facets-list")),this.container&&!0===this._inDOM&&((i=Math.round(e.getPosition(this.elements.facetsSection,"left").x))<=0?n=i:(38,n=(i=this.elements.facetsSection.getSize().width-i-m)>=38?0:Math.ceil((38-i)/m)*m)),n},_scrollFacetSectionToFacetElt:function(e,t){var i;t||(t=this.getElement(".facets-list")),this.container&&!0===this._inDOM&&(e?this._facetsScrollToLeft=Math.round(e.getPosition(this.elements.facetsSection,"left").x)+this._facetsScrollToLeft:((i=t.style.transform)&&(i=i.match(y)),this._facetsScrollToLeft=i?+i[2]:0),n.Client.Platform.ios&&(t.style["-webkit-transform"]="translateX(-"+this._facetsScrollToLeft+"px)"),t.style.transform="translateX(-"+this._facetsScrollToLeft+"px)")},_scrollFacetSectionAndHandleFacetsVisibility:function(e,t){var i,n,s,o,a=0,r=e.getElement(".facet.selected"),l=r;if(r){if(!r.hasClassName("resp-hidden")&&t>=182){o=r;do{o=o.previousElementSibling}while(o&&o.hasClassName("hidden"));if(o&&o.hasClassName("resp-hidden"))l=o;else{s=r;do{s=s.nextElementSibling}while(s&&s.hasClassName("hidden"));s&&(l=s)}}a=this._getMinimumScrollForFacetEltToBeVisible(l,e)}return n=(e.getSize().width-(this._facetsScrollToLeft+a)-t+(this.container.hasClassName("facets-as-list")?0:38))/m,n=Math.abs(n-Math.floor(n))<=.1?Math.max(0,Math.floor(n)):Math.max(0,Math.ceil(n)),i=this._handleFacetsVisibility(t,this._facetsScrollToLeft+a,e,n),this._scrollFacetSectionToFacetElt(e.getElement(".facet:not(.resp-hidden):not(.hidden)"),e),i},_adaptSectionLayout:function(t){var i=t.type,n=this.getElement("."+i+"s-list");if(!n)return!1;var s,o=n.getSize(),a="_"+i+"sLayout",r=n.hasClassName("minimized"),l=e.is(t.maxWidth)?t.maxWidth:t.containerWidth*t.maxWidthInPercent;return o.width<Math.floor(l)?(s=!1,this[a]=w,this.container.addClassName(i+"s-as-list"),"facet"===i&&(r?(n.removeClassName("without-counts"),n.getSize().width>l?n.addClassName("without-counts"):(n.removeClassName("minimized"),n.getSize().width>l&&n.addClassName("minimized")),!1!==this._facetsLikeTabs&&(s=this._scrollFacetSectionAndHandleFacetsVisibility(n,l))):!1!==this._facetsLikeTabs&&this._handleFacetsVisibility(l,0,n,0))):(s=!0,o.width>38&&(this[a]=v,this.container.removeClassName(i+"s-as-list")),"facet"===i&&!1!==this._facetsLikeTabs&&(n.hasClassName("without-counts")||(r||n.addClassName("minimized"),(0===l||n.getSize().width>l)&&n.addClassName("without-counts")),s=this._scrollFacetSectionAndHandleFacetsVisibility(n,l))),s?o.width>38&&(this[a]=v,this.container.removeClassName(i+"s-as-list")):(this[a]=w,this.container.addClassName(i+"s-as-list")),!0},_adaptActionsLayout:function(){var e,t,i,n,s=this.container,o=.25,a=this.getElement(".actions-list"),r=this.getElement(".header-section");return!(!r||!a)&&(i=r.getSize().width,a.getSize().width>o*i?(this._actionsLayout===w&&s.addClassName("with-priority-title"),n=(e=this.getElement(".title-section h1")).getSize().height,t=0,e.getElements("span").forEach((function(e){t+=e.getSize().width})),o=1-t/i,n>28&&o>.4&&(o=.4)):s.removeClassName("with-priority-title"),this._adaptSectionLayout({type:"action",maxWidthInPercent:o,containerWidth:i}))},_adaptFacetsLayout:function(){var e=this.getElement(".facets");if(e)return this._adaptSectionLayout({type:"facet",maxWidthInPercent:1,containerWidth:e.getSize().width})},_makeTransition:function(e,t){var i=this;return this._transitioning=!0,this.container.addClassName("transitioning"),e.call(this),this._transitioning=!1,setTimeout((function(){!1===i._transitioning&&i.container&&i.container.removeClassName("transitioning")}),t),this},_handleImagesDisplay:function(){this.container.getSize().width<=400?(this.container.addClassName("small-size-id-card"),this.container.addClassName("without-banner"),this.container.addClassName("without-thumbnail")):(this.container.removeClassName("small-size-id-card"),this._minimized||this._collapsed||this._folded||(this._config.get("thumbnail->url")?this.container.removeClassName("without-thumbnail"):this.container.addClassName("without-thumbnail"),this._config.get("banner->url")?this.container.removeClassName("without-banner"):this.container.addClassName("without-banner")))},_getFacet:function(t){var i=null,n=this._config.get("facets");if(n&&n.length>0)switch(e.typeOf(t)){case"string":i=n.detect((function(e){return e.name===t}));break;case"number":i=n[t];break;default:throw new Error("Invalid facet key!")}return i},_getFacetElt:function(t,i){var n=null,s=e.typeOf(t);switch(!0!==i&&(i=!1),s){case"string":case"number":n=this.getElement(".facets-"+(i?"menu":"list")+" .facet[data-"+("string"===s?"name":"position")+'="'+t+'"]');break;default:throw new Error("Invalid facet key!")}return n},_getFacetValue:function(e){var t="";return e&&(e.attribute||e.getter)&&(t=this._getModelAttribute(e.attribute,e.getter)),t},_getFacetName:function(e){var t=null;return e&&((t=e.name)||(t=[],e.text&&t.push("t_"+e.text),e.icon&&t.push("i_"+e.icon),(t=t.join("&"))&&(t=n.getCheckSum(t)))),t||(t=n.getUUID()),t},_setConfig:function(t){var i=this.model,n={},s=this.options;return t.forEach((function(e){n[e]=_(s,e,i)})),t.indexOf("bannerUrl")>-1&&(n.banner=e.merge(n.banner||{},{url:n.bannerUrl}),delete n.bannerUrl),t.indexOf("thumbnailUrl")>-1&&(n.thumbnail=e.merge(n.thumbnail||{},{url:n.thumbnailUrl}),delete n.thumbnailUrl),["title","ownerName","date","description"].forEach((function(e){n[e]=this._getModelAttribute(e)}),this),e.is(n.facets,"array")&&n.facets.forEach((function(e){e.value=this._getFacetValue(e)}),this),this._config.set(n),this},_onResize:function(){this._rendered&&this.container.getSize().width>0&&(this._handleImagesDisplay(),this._useNativeActionMenu()||this._adaptActionsLayout(),this._adaptFacetsLayout())},onInjected:function(){this.container&&(this._inDOM=!0,this._onResize(),this.container.addClassName("ready"))},_highlightFacet:function(e){if(e){var t,i,n=e.hasClassName("item"),s=this.getElements(".facet.selected");if(s.some((function(t){return t===e})))return!1;s.forEach((function(e){e.removeClassName("selected")})),e.addClassName("selected"),t=parseInt(e.getAttribute("data-position"),10),(i=this._getFacetElt(t,!n))&&i.addClassName("selected")}else console.warn("The facet element to highlight could not be found");return this},_injectEditView:function(t,i){var n=this._registerControl("editView",new t(e.merge({model:this.model},this._config.get("editViewOptions"))));return n.render(),n.inject(i),n},_onTitleChangeRequest:function(e){var t=this._controls.titleInput;t&&this.dispatchEvent("onTitleChangeRequest",[t.getValue(),this])},_onBannerChangeRequest:function(e){this.dispatchEvent("onBannerChangeRequest",[this])},_onThumbnailChangeRequest:function(e){this.dispatchEvent("onThumbnailChangeRequest",[this])},_createContent:function(){return[this._createBannerSection(),this._createMainSection(),this._createFacetsSection()]},init:function(t){var i,n,s,o=t&&t.model;if(!o)throw new Error("Model is missing");this._attributesMapping||(this._attributesMapping={}),this._config=new E({},{idCard:this}),this.listenTo(t.model,"onChange",this.render),n=(i=this._refreshSection).bind(this,"title"),s=i.bind(this,"detailedInfo"),this.listenTo(this._config,{"onChange:title":n,"onChange:date":s,"onChange:ownerName":s,"onChange:description":s,"onChange:facets":i.bind(this,"facets"),"onChange:actions":i.bind(this,"actions"),"onChange:banner":i.bind(this,"banner"),"onChange:thumbnail":i.bind(this,"thumbnail")}),["folded","collapsed","minimized","facetsLikeTabs","editableElements","attributesMapping","nativeActionMenu"].forEach((function(e){t.hasOwnProperty(e)&&(this["_"+e]=_(t,e,o))}),this),this.addEventOnce("onRender",(function(){var i=_(t,"selectedFacet",o);e.is(this._selectedFacet)||this.selectFacet(i),!0===this._folded&&(this._folded=!1,this.fold()),!0===this._collapsed&&(this._collapsed=!1,this.collapse()),this._minimized&&(this._minimized=!1,this.minimize())})),this._parent.apply(this,arguments),this.dispatchEvent("onInit",[this,t])},setOptions:function(t,i){if(t){var n={};e.is(i)&&"string"==typeof t?n[t]=i:n=t,this._parent(n),this._setConfig(Object.keys(n))}return this},setup:function(t){return this.setOptions(e.merge(e.clone(t,!1),this.options))},render:function(){return this._rendered?this.setOptions(this.options):this._parent(),this.dispatchEvent("onRender",[this]),this},onRender:function(){return this.selectFacet(this._selectedFacet),this._mode===g&&this.switchToEditMode(),["title","actions","facets","banner","thumbnail","detailed-info"].forEach((function(e){var t=e.camelCase()+"Section";this.elements[t]=this.getElement("."+e+"-section"),this.elements[t]||delete this.elements[t]}),this),this._mode===g&&(this._mode=f,this.switchToEditMode()),this._onResize(),this},minimize:function(){return this._minimized||(this._minimized=!0,this.container.addClassName("without-banner"),this.container.addClassName("without-thumbnail"),this.container.addClassName("minimized")),this},maximize:function(){return this._minimized&&(this._minimized=!1,this._handleImagesDisplay(),this.container.removeClassName("minimized")),this},isMinimized:function(){return this._minimized},selectFacet:function(t,i){if(!e.is(t,"number")&&!e.is(t,"string"))return!1;var n,s=t,o=this._getFacet(s),a=this.getSelectedFacet();if(e.is(a)||o||(s=0,o=this._getFacet(s)),!o)return!1;if(!1!==this._facetsLikeTabs){if(!(n=this._getFacetElt(s))&&!this._rendered)return this.setOption("selectedFacet",t),this;if(!this._highlightFacet(n))return this;this._selectedFacet=n.getAttribute("data-name")||parseInt(n.getAttribute("data-position"),10),this._previouslySelectedFacetName=this._selectedFacetName,this._selectedFacetName=this._getFacetName(o),this._adaptFacetsLayout()}return i&&!0===i.silent||this._previouslySelectedFacetName===this._selectedFacetName&&!1!==this._facetsLikeTabs||(o.handler.call(this),this.dispatchEvent("onFacetSelect",[this._selectedFacet,a])),this},getSelectedFacet:function(){return this._selectedFacet},collapse:function(){return this._collapsed||this._mode!==f||(this._collapsed=!0,this.container.addClassName("without-banner"),this.container.addClassName("without-thumbnail"),this.container.addClassName("collapsed")),this},expand:function(){return this._collapsed&&(this._collapsed=!1,this._handleImagesDisplay(),this.container.removeClassName("collapsed")),this},isCollapsed:function(){return this._collapsed},fold:function(){return this._makeTransition((function(){this._folded||this._mode!==f||(this._folded=!0,this.container.addClassName("without-banner"),this.container.addClassName("without-thumbnail"),this.container.addClassName("folded"))}),200),this},unfold:function(){return this._makeTransition((function(){this._folded&&(this._folded=!1,this._handleImagesDisplay(),this.container.removeClassName("folded"))}),300),this},isFolded:function(){return this._folded},switchToEditMode:function(){if(this._mode!==g){var t,n=this,s=this.model,o=this._folded,a=this._collapsed,r=this._editableElements,l=this.elements.bannerSection,c=this.getElement(".title-section"),h=this.elements.thumbnailSection,u=this._config.get("editView"),p=e.typeOf(u);if(i.isArray(r)&&r.length>0){if(o&&this.unfold(),a&&this.expand(),this._mode=g,this.container.addClassName("edit-mode"),this.stopListening(s,"onChange",this.render),c&&r.indexOf("title")>=0)switch(c.addClassName("edit-mode"),p){case"class":this._injectEditView(u,c);break;case"string":require([u],(function(e){n._injectEditView(e,c)}));break;default:(t=this._registerControl("titleInput",new d({value:this._config.get("title").unescapeHTML()||""}))).inject(c),t.focus()}this._config.get("banner->url")&&r.indexOf("banner")>=0&&l.addClassName("edit-mode"),this._config.get("thumbnail->url")&&r.indexOf("thumbnail")>=0&&h.addClassName("edit-mode"),!0===o&&this.addEventOnce("onSwitchToViewMode",this.fold),!0===a&&this.addEventOnce("onSwitchToViewMode",this.collapse),this.dispatchEvent("onSwitchToEditMode",[this])}}return this},switchToViewMode:function(){if(this._mode!==f){var e=this.getElement(".title-section"),t=this.elements.bannerSection,i=this.elements.thumbnailSection;this._mode=f,this.container.removeClassName("edit-mode"),e&&(this._unregisterControl("titleInput"),this._unregisterControl("editView"),e.removeClassName("edit-mode")),t&&!0!==this._config.get("banner->alwaysEditable")&&t.removeClassName("edit-mode"),i&&!0!==this._config.get("thumbnail->alwaysEditable")&&i.removeClassName("edit-mode"),this.render(),this.listenTo(this.model,"onChange",this.render),this.dispatchEvent("onSwitchToViewMode",[this])}return this},destroy:function(){return this._config.destroy(),this._config=null,this._inDOM=!1,this._parent.apply(this,arguments)}});return V})),define("DS/W3DXComponents/Views/Layout/CardView",["UWA/Core","UWA/Event","UWA/Element","UWA/Utils/Client","UWA/Class/View","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s){"use strict";var o=n.Features;function a(e,t,n,s){"init"===e?i.addEvents.call(t,{touchstart:n,mousedown:n,MSPointerDown:n},void 0,void 0,s):"start"===e?i.addEvents.call(t,{touchmove:n,mousemove:n,MSPointerMove:n,touchend:n,touchcancel:n,mouseup:n,MSPointerUp:n},void 0,void 0,s):"stop"===e?i.removeEvents.call(t,{touchmove:n,mousemove:n,MSPointerMove:n,touchcancel:n,touchend:n,mouseup:n,MSPointerUp:n}):"destroy"===e&&i.removeEvents.call(t,{touchstart:n,mousedown:n,MSPointerDown:n,touchmove:n,mousemove:n,MSPointerMove:n,touchcancel:n,touchend:n,mouseup:n,MSPointerUp:n})}function r(e){var t=e.type;return-1!==t.indexOf("mouse")?"mouse":-1!==t.indexOf("touch")?"touch":-1!==t.indexOf("ointer")?"pointer":"none"}return s.extend({tagName:"div",elements:{},className:"cardview",cards:null,_currIndex:1,contWidthCache:null,_eventHandler:null,dragInitEvent:null,dragMoveEvent:null,isDragging:null,dragPositions:[],maxAnimDuration:550,dragThreshold:60,isMuted:!1,isTracking:null,isAnimActive:!1,transitionProp:"",lastShownIndex:null,defaultOptions:{index:0,cardBackground:"white",bounce:!0},init:function(e,t){if(!Array.isArray(e))throw new Error("Elements must be of type array.");this._parent(t),this._currIndex=this.options.index,this.cards=this.mapElements(e)},setup:function(t){var i=this,n=i.container;o.matrixCSS?i.setPosition=function(t,i){var n=e.is(i.x,"number")?i.x+"px":i.x||0,s=e.is(i.y,"number")?i.y+"px":i.y||0;t.setStyle(t.getStyleName("transform",!0),"translate3d("+n+","+s+", 0)")}:i.setPosition=function(t,i){var n=e.is(i.x,"number")?i.x+"px":i.x||0,s=e.is(i.y,"number")?i.y+"px":i.y||0;t.setStyle(t.getStyleName("transform",!0),"translate("+n+","+s+")")},i.transitionProp=n.getStyleName("transform",!0),i._parent(t)},render:function(){var e=this;return e.buildCards(0,e.cards.length-1),e},mapElements:function(e){return e.map((function(e){return e instanceof s&&e.render(),{container:null,content:e,_animCount:0,_isDragged:!1,_index:null}}))},buildCard:function(t,i){return e.createElement("div",{class:this.className+"-card",html:t,styles:i})},buildCards:function(e,t){for(var n,s=this.cards,o=document.createDocumentFragment(),a=e||0,r=t||0,l=t+1;a<=r;a++)(n=s[a]).container=this.buildCard(n.content||null,{backgroundColor:this.options.cardBackground}),this.setPosition(n.container,{x:a<=this._currIndex?0:"100%",y:null}),n.container.inject(o);s[l]&&s[l].container&&s[l].container.isInjected()?i.inject.call(o,s[l].container,"before"):this.container.appendChild(o)},onPreInject:function(){this.initDragEvents()},getContainerDim:function(){return this.container?this.container.getDimensions().innerWidth:0},onDragInit:function(e){if(!this.isDragging&&function(e){return"touchstart"===e.type||0===t.whichButton(e)}(e)){var i=this,n=i.getContainerDim(),s=i.cards[i._currIndex];s&&(i.dragInitEvent={width:i.getContainerDim(),position:t.getPosition(e),time:e.timeStamp,draggedCard:s},a("start",i.container,i._eventHandler),i.contWidthCache=n,i.isTracking=r(e))}},onDragMove:function(i){if(this.dragInitEvent&&this.isTracking===r(i)){var n,s,o,a,l,c=this,h=c.options,d=t.getPosition(i),u=c.dragInitEvent,p=c.dragMoveEvent,m=u.position,f=c.cards,g=c._currIndex,v=u.width,w=d.x-m.x,S=i.timeStamp,C=!1;if(c.isDragging&&p)t.stop(i),n=d.x-(p?c.dragMoveEvent.position.x:0),a=p.draggedCard,o="right"===(s=p.direction)||p.bounce?w:v-Math.abs(w),c.setPosition(a.container,{x:o,y:null}),e.extend(c.dragMoveEvent,{time:S,position:d,currentDelta:{x:n,y:null}});else if(Math.abs(w)>=c.dragThreshold){if(c.blockScroll(),"right"===(s=w>0?"right":"left")?(g+1,a=f[g],l=g):(g-2,a=f[g+1],l=g+1),0===g&&"right"===s||g===f.length-1&&"left"===s){if(!h.bounce)return void c.resetDragFlags();C=!0,a||(a=f[g],l=g)}a._isDragged=!0,c.isDragging=!0,c.isAnimActive=!0,c.dragMoveEvent={draggedCard:a,index:l,currentPos:{x:o,y:null},position:d,time:S,direction:s||null,bounce:C,currentDelta:{x:n,y:null}},c.throwEvent("onStartDrag",a,{direction:s,index:l},i)}}},onDragStop:function(e){var i=this,n=i.dragInitEvent;if(i.isTracking===r(e)&&i.isDragging){var s,o,l=i.dragMoveEvent,c={time:e.timeStamp,position:t.getPosition(e)},h=i.container,d=n.position,u=c.position,p=c.time-n.time,m=n.width,f=l.currentDelta,g=i.calculateSpeed(d,u,p),v=h.getPosition(document.documentElement).x,w=l.draggedCard,S=!1,C=l.direction,y=i._currIndex,_=l.bounce;i.deblockScroll(),a("stop",h,i._eventHandler),_?s=0:(s=i.calculateFinalPosition(f,u,m,v,g))===m&&"right"===C?(i.updateIndex("left"),S=!0):0===s&&"left"===C&&(i.updateIndex("right"),S=!0),o=i.calculateTime(s,v,u,g),i.animateCardPosition(w,{x:s,y:null},{duration:Math.min(o,i.maxAnimDuration),cb:function(t){var n,s,o=t._index;_?(n=o,s="onPullCard"):"right"===C&&S||"left"===C&&!S?n=o-1:("left"===C&&S||"right"===C&&!S)&&(n=o),i.isAnimActive=!1,n!==i.lastShownIndex&&(i.lastShownIndex=n,s="onShowCard"),s&&i.throwEvent(s,t,{direction:C,index:n},e),t._index=null}}),i.throwEvent("onEndDrag",w,{direction:C,index:"right"===C?y:y+1,didSnap:S},e),i.resetDragFlags(w)}else i.resetDragFlags(n?n.card:null)},blockScroll:function(){this.container.addEvents({mousemove:t.preventDefault,touchmove:t.preventDefault})},deblockScroll:function(){var e=this.container;e.removeEvent("mousemove",t.preventDefault),e.removeEvent("touchmove",t.preventDefault)},calculateFinalPosition:function(e,t,i,n,s){var o=e.x;return o>0?t.x>=n+.4*i||s>=.5?i:0:o<0?t.x<=n+.6*i||s>=.5?0:i:t.x<=n+.5*i?0:i},calculateSpeed:function(e,t,i){var n;return n=Math.abs(e.x-t.x),Math.min(n/i,1.9)},throwEvent:function(e,t,i,n){this.dispatchEvent(e,[this,t,i,n])},calculateTime:function(e,t,i,n){return Math.abs(e+t-i)/n},resetDragFlags:function(e){var t=this;t.dragInitEvent=null,t.dragMoveEvent=null,t.isTracking=null,t.isDragging=!1,t.dragPositions=[],e&&(e._isDragged=!1)},updateShadows:function(){var e=this._currIndex;this.removeShadow(e-1),this.addShadow(e),this.removeShadow(e+2),this.addShadow(e+1)},updateIndex:function(e){var t=this;t._currIndex="left"===e?t._currIndex-1:t._currIndex+1},removeAnimationStyles:function(e){e.setStyles({transitionDuration:"",transitionProperty:"",perspective:"",fontSmoothing:"",transformOrigin:"",transitionTimingFunction:"",transitionDelay:"",transformStyle:""})},getAnimStyles:function(e,t){var i=this.container,n=this.transitionProp||i.getStyleName("transform",!0),s=e.x||0,a=e.y||0,r={transformOrigin:"0 0",fontSmoothing:"antialiased",perspective:800,transitionDelay:"0ms",transitionDuration:Math.round(t,10)+"ms",transitionProperty:n,transformStyle:"preserve-3d",transitionTimingFunction:"cubic-bezier(0.33, 0.66, 0.66, 1)"};return o.matrixCSS?r.transform="translate3d("+s+"px, "+a+"px, 0)":r.transform="translate("+s+"px, "+a+"px)",r},setPosition:function(){},animateCardPosition:function(t,i,n){var s,o=this,a=n||{},r=i,l=r.x,c=t.container,h=a.duration||400,d=o.getAnimStyles(r,h);function u(){clearTimeout(s),t._animCount--,o.removeAnimationStyles(c),c.removeEvent("transitionEnd"),0!==t._animCount||t._isDragged||(t._index=o.cards.indexOf(t),o.setPosition(c,{x:l===o.contWidthCache?"100%":0,y:null}),e.is(a.cb,"function")&&a.cb.call(null,t))}s=setTimeout(u,o.maxAnimDuration+20),t._animCount++,c.addEvent("transitionEnd",u),c.setStyles(d)},initDragEvents:function(){var e=this,i=e.container;if(!i)throw new Error("Render CardView before injecting.");i.addEvent("click",(function(i){if(e.isAnimActive)return t.stop(i),!1}),void 0,void 0,!0),e._eventHandler=e._eventHandler||e.handleEvent.bind(e),a("init",i,e._eventHandler,!0)},removeDragEvents:function(){var e=this.container;a("destroy",e,this._eventHandler),e.removeEvents()},handleEvent:function(e){var t=this;switch(e.type){case"touchstart":case"mousedown":case"MSPointerDown":t.onDragInit(e);break;case"touchmove":case"mousemove":case"MSPointerMove":t.onDragMove(e);break;case"touchend":case"touchcancel":case"mouseup":case"MSPointerUp":t.onDragStop(e)}},addCards:function(t,i){var n,s,o,a=this,r=(i||{}).where||"after",l=a.cards,c=a._currIndex,h=e.is(a.lastShownIndex)?a.lastShownIndex:c;if(!Array.isArray(t))throw new Error("Elements should be of type Array.");if(!e.is(r,"number")&&!e.is(r,"string"))throw new Error("Where must be of type string or number.");if(0!==t.length){switch(n=a.mapElements(t),r){case"after":s=l.length,o=(l=l.concat(n)).length-1;break;case"before":s=0,l=n.concat(l),o=n.length-1,c+=n.length,h+=n.length;break;default:s=r=r>l.length-1?l.length:r,l=l.slice(0,r).concat(n).concat(l.slice(r)),c=r>c?c:c+r,h=r>h?h:h+r,o=n.length-1}a.cards=l,a._currIndex=c,a.lastShownIndex=h,a.buildCards(s,o)}},addEmptyCard:function(e){this.addCards([null],e)},setCardContent:function(e,t){var i=this.cards[t];i&&(e instanceof s&&e.render(),i.content&&i.content.destroy(),i.content=e,i.content.inject(i.container.empty()))},removeShadow:function(e){var t=this.cards[e];t&&t.container&&t.container.removeClassName("shadow")},addShadow:function(e){var t=this.cards[e];t&&t.container&&t.container.addClassName("shadow")},removeCards:function(t,i){if(!e.is(t,"number")||!e.is(i,"number"))throw new Error("Arguments must be of type number.");if(i-t<0)throw new Error("Error with indexes.");this.cards.splice(t,i-t).forEach((function(e){e.content&&e.content.destroy(),e.container.destroy()}))},getCardAt:function(e){return this.cards[e]||null},mute:function(){if(!this.isMuted){var e=this,t=e.container;e.isMuted=!0,a("destroy",t,e._eventHandler)}},unMute:function(){if(this.isMuted){var e=this,t=e.container;e.isMuted=!1,a("init",t,e._eventHandler)}},destroy:function(){var e=this;e.removeDragEvents(),e.stopListening(),e.resetDragFlags(),e.cards.forEach((function(e){var t=e.content,i=e.container;t&&t.destroy(),i&&i.destroy()})),e._parent(),e.cards.length=0}})})),define("DS/W3DXComponents/Views/Temp/TempHandlebars",[],(function(){var e,t,i,n,s,o,a,r,l,c=(e=function(){"use strict";function e(e){this.string=e}return e.prototype.toString=function(){return""+this.string},e}(),t=function(e){"use strict";var t={},i=e,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/[&<>"'`]/g,o=/[&<>"'`]/;function a(e){return n[e]||"&amp;"}t.extend=function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])};var r,l=Object.prototype.toString;t.toString=l,(r=function(e){return"function"==typeof e})(/x/)&&(r=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=r;var c=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};return t.isArray=c,t.escapeExpression=function(e){return e instanceof i?e.toString():e||0===e?(e=""+e,o.test(e)?e.replace(s,a):e):""},t.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},t}(e),i=function(){"use strict";var e=["description","fileName","lineNumber","message","name","number","stack"];function t(t,i){var n;i&&i.firstLine&&(t+=" - "+(n=i.firstLine)+":"+i.firstColumn);for(var s=Error.prototype.constructor.call(this,t),o=0;o<e.length;o++)this[e[o]]=s[e[o]];n&&(this.lineNumber=n,this.column=i.firstColumn)}return t.prototype=new Error,t}(),n=function(e,t){"use strict";var i={},n=e,s=t;i.VERSION="1.3.0",i.COMPILER_REVISION=4,i.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};var o=n.isArray,a=n.isFunction,r=n.toString,l="[object Object]";function c(e,t){var i;this.helpers=e||{},this.partials=t||{},(i=this).registerHelper("helperMissing",(function(e){if(2!==arguments.length)throw new s("Missing helper: '"+e+"'")})),i.registerHelper("blockHelperMissing",(function(e,t){var n=t.inverse||function(){},s=t.fn;return a(e)&&(e=e.call(this)),!0===e?s(this):!1===e||null==e?n(this):o(e)?e.length>0?i.helpers.each(e,t):n(this):s(e)})),i.registerHelper("each",(function(e,t){var i,n=t.fn,s=t.inverse,r=0,l="";if(a(e)&&(e=e.call(this)),t.data&&(i=u(t.data)),e&&"object"==typeof e)if(o(e))for(var c=e.length;r<c;r++)i&&(i.index=r,i.first=0===r,i.last=r===e.length-1),l+=n(e[r],{data:i});else for(var h in e)e.hasOwnProperty(h)&&(i&&(i.key=h,i.index=r,i.first=0===r),l+=n(e[h],{data:i}),r++);return 0===r&&(l=s(this)),l})),i.registerHelper("if",(function(e,t){return a(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)})),i.registerHelper("unless",(function(e,t){return i.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})),i.registerHelper("with",(function(e,t){if(a(e)&&(e=e.call(this)),!n.isEmpty(e))return t.fn(e)})),i.registerHelper("log",(function(e,t){var n=t.data&&null!=t.data.level?parseInt(t.data.level,10):1;i.log(n,e)}))}i.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:h,log:d,registerHelper:function(e,t,i){if(r.call(e)===l){if(i||t)throw new s("Arg not supported with multiple helpers");n.extend(this.helpers,e)}else i&&(t.not=i),this.helpers[e]=t},registerPartial:function(e,t){r.call(e)===l?n.extend(this.partials,e):this.partials[e]=t}};var h={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(h.level<=e){var i=h.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,t)}}};function d(e,t){h.log(e,t)}i.logger=h,i.log=d;var u=function(e){var t={};return n.extend(t,e),t};return i.createFrame=u,i}(t,i),s=function(e,t,i){"use strict";var n={},s=e,o=t,a=i.COMPILER_REVISION,r=i.REVISION_CHANGES;function l(e,t,i){var n=function(e,n){return t(e,(n=n||{}).data||i)};return n.program=e,n.depth=0,n}return n.checkRevision=function(e){var t=e&&e[0]||1;if(t!==a){if(t<a){var i=r[a],n=r[t];throw new o("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+n+").")}throw new o("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},n.template=function(e,t){if(!t)throw new o("No environment passed to template");var i={escapeExpression:s.escapeExpression,invokePartial:function(e,i,n,s,a,r){var l=t.VM.invokePartial.apply(this,arguments);if(null!=l)return l;if(t.compile){var c={helpers:s,partials:a,data:r};return a[i]=t.compile(e,{data:void 0!==r},t),a[i](n,c)}throw new o("The partial "+i+" could not be compiled when running in runtime-only mode")},programs:[],program:function(e,t,i){var n=this.programs[e];return i?n=l(e,t,i):n||(n=this.programs[e]=l(e,t)),n},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i={},s.extend(i,t),s.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,s){var o,a,r=(s=s||{}).partial?s:t;s.partial||(o=s.helpers,a=s.partials);var l=e.call(i,r,n,o,a,s.data);return s.partial||t.VM.checkRevision(i.compilerInfo),l}},n.programWithDepth=function(e,t,i){var n=Array.prototype.slice.call(arguments,3),s=function(e,s){return s=s||{},t.apply(this,[e,s.data||i].concat(n))};return s.program=e,s.depth=n.length,s},n.program=l,n.invokePartial=function(e,t,i,n,s,a){var r={partial:!0,helpers:n,partials:s,data:a};if(void 0===e)throw new o("The partial "+t+" could not be found");if(e instanceof Function)return e(i,r)},n.noop=function(){return""},n}(t,i,n),o=function(e,t,i,n,s){"use strict";var o=e,a=t,r=i,l=n,c=s,h=function(){var e=new o.HandlebarsEnvironment;return l.extend(e,o),e.SafeString=a,e.Exception=r,e.Utils=l,e.VM=c,e.template=function(t){return c.template(t,e)},e},d=h();return d.create=h,d}(n,e,i,t,s),a=function(e){"use strict";var t=e;function i(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n={ProgramNode:function(e,t,s,o){var a,r;3===arguments.length?(o=s,s=null):2===arguments.length&&(o=t,t=null),i.call(this,o),this.type="program",this.statements=e,this.strip={},s?((r=s[0])?(a={first_line:r.firstLine,last_line:r.lastLine,last_column:r.lastColumn,first_column:r.firstColumn},this.inverse=new n.ProgramNode(s,t,a)):this.inverse=new n.ProgramNode(s,t),this.strip.right=t.left):t&&(this.strip.left=t.right)},MustacheNode:function(e,t,s,o,a){if(i.call(this,a),this.type="mustache",this.strip=o,null!=s&&s.charAt){var r=s.charAt(3)||s.charAt(2);this.escaped="{"!==r&&"&"!==r}else this.escaped=!!s;e instanceof n.SexprNode?this.sexpr=e:this.sexpr=new n.SexprNode(e,t),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){i.call(this,n),this.type="sexpr",this.hash=t;var s=this.id=e[0],o=this.params=e.slice(1),a=this.eligibleHelper=s.isSimple;this.isHelper=a&&(o.length||t)},PartialNode:function(e,t,n,s){i.call(this,s),this.type="partial",this.partialName=e,this.context=t,this.strip=n},BlockNode:function(e,n,s,o,a){if(i.call(this,a),e.sexpr.id.original!==o.path.original)throw new t(e.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=e,this.program=n,this.inverse=s,this.strip={left:e.strip.left,right:o.strip.right},(n||s).strip.left=e.strip.right,(s||n).strip.right=o.strip.left,s&&!n&&(this.isInverse=!0)},ContentNode:function(e,t){i.call(this,t),this.type="content",this.string=e},HashNode:function(e,t){i.call(this,t),this.type="hash",this.pairs=e},IdNode:function(e,n){i.call(this,n),this.type="ID";for(var s="",o=[],a=0,r=0,l=e.length;r<l;r++){var c=e[r].part;if(s+=(e[r].separator||"")+c,".."===c||"."===c||"this"===c){if(o.length>0)throw new t("Invalid path: "+s,this);".."===c?a++:this.isScoped=!0}else o.push(c)}this.original=s,this.parts=o,this.string=o.join("."),this.depth=a,this.isSimple=1===e.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(e,t){i.call(this,t),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,t){i.call(this,t),this.type="DATA",this.id=e},StringNode:function(e,t){i.call(this,t),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){i.call(this,t),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,t){i.call(this,t),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,t){i.call(this,t),this.type="comment",this.comment=e}};return n}(i),r=function(e,t){"use strict";var i={},n=e,s=t;return i.parser=n,i.parse=function(e){return e.constructor===s.ProgramNode?e:(n.yy=s,n.parse(e))},i}(function(){"use strict";return function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,i,n,s,o,a,r){var l=a.length-1;switch(o){case 1:return new s.ProgramNode(a[l-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],a[l-1],a[l],this._$);break;case 4:this.$=new s.ProgramNode(a[l-2],a[l-1],a[l],this._$);break;case 5:this.$=new s.ProgramNode(a[l-1],a[l],[],this._$);break;case 6:this.$=new s.ProgramNode(a[l],this._$);break;case 7:case 8:this.$=new s.ProgramNode([],this._$);break;case 9:case 47:this.$=[a[l]];break;case 10:a[l-1].push(a[l]),this.$=a[l-1];break;case 11:this.$=new s.BlockNode(a[l-2],a[l-1].inverse,a[l-1],a[l],this._$);break;case 12:this.$=new s.BlockNode(a[l-2],a[l-1],a[l-1].inverse,a[l],this._$);break;case 13:case 14:case 26:case 30:this.$=a[l];break;case 15:this.$=new s.ContentNode(a[l],this._$);break;case 16:this.$=new s.CommentNode(a[l],this._$);break;case 17:case 18:case 20:case 21:this.$=new s.MustacheNode(a[l-1],null,a[l-2],t(a[l-2],a[l]),this._$);break;case 19:this.$={path:a[l-1],strip:t(a[l-2],a[l])};break;case 22:this.$=new s.PartialNode(a[l-2],a[l-1],t(a[l-3],a[l]),this._$);break;case 23:this.$=t(a[l-1],a[l]);break;case 24:this.$=new s.SexprNode([a[l-2]].concat(a[l-1]),a[l],this._$);break;case 25:this.$=new s.SexprNode([a[l]],null,this._$);break;case 27:this.$=new s.StringNode(a[l],this._$);break;case 28:this.$=new s.IntegerNode(a[l],this._$);break;case 29:this.$=new s.BooleanNode(a[l],this._$);break;case 31:a[l-1].isHelper=!0,this.$=a[l-1];break;case 32:this.$=new s.HashNode(a[l],this._$);break;case 33:this.$=[a[l-2],a[l]];break;case 34:this.$=new s.PartialNameNode(a[l],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(a[l],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(a[l],this._$));break;case 37:this.$=new s.DataNode(a[l],this._$);break;case 38:this.$=new s.IdNode(a[l],this._$);break;case 39:a[l-2].push({part:a[l],separator:a[l-1]}),this.$=a[l-2];break;case 40:this.$=[{part:a[l]}];break;case 43:this.$=[];break;case 44:case 48:a[l-1].push(a[l])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,i=[0],n=[null],s=[],o=this.table,a="",r=0,l=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;s.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var u,p,m,f,g,v,w,S,C,y,_={};;){if(m=i[i.length-1],this.defaultActions[m]?f=this.defaultActions[m]:(null==u&&(y=void 0,"number"!=typeof(y=t.lexer.lex()||1)&&(y=t.symbols_[y]||y),u=y),f=o[m]&&o[m][u]),void 0===f||!f.length||!f[0]){var b="";if(!c){for(v in C=[],o[m])this.terminals_[v]&&v>2&&C.push("'"+this.terminals_[v]+"'");b=this.lexer.showPosition?"Parse error on line "+(r+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[u]||u)+"'":"Parse error on line "+(r+1)+": Unexpected "+(1==u?"end of input":"'"+(this.terminals_[u]||u)+"'"),this.parseError(b,{text:this.lexer.match,token:this.terminals_[u]||u,line:this.lexer.yylineno,loc:h,expected:C})}}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+u);switch(f[0]){case 1:i.push(u),n.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(f[1]),u=null,p?(u=p,p=null):(l=this.lexer.yyleng,a=this.lexer.yytext,r=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(w=this.productions_[f[1]][1],_.$=n[n.length-w],_._$={first_line:s[s.length-(w||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(w||1)].first_column,last_column:s[s.length-1].last_column},d&&(_._$.range=[s[s.length-(w||1)].range[0],s[s.length-1].range[1]]),void 0!==(g=this.performAction.call(_,a,l,r,this.yy,f[1],n,s)))return g;w&&(i=i.slice(0,-1*w*2),n=n.slice(0,-1*w),s=s.slice(0,-1*w)),i.push(this.productions_[f[1]][0]),n.push(_.$),s.push(_._$),S=o[i[i.length-2]][i[i.length-1]],i.push(S);break;case 3:return!0}}return!0}};function t(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}var i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,i,n,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(i=this._input.match(this.rules[o[a]]))||t&&!(i[0].length>t[0].length)||(t=i,n=a,this.options.flex));a++);return t?((s=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,i,n){function s(e,i){return t.yytext=t.yytext.substr(e,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:case 10:return 19;case 11:return 23;case 12:case 15:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 16:return 41;case 17:case 18:case 29:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:case 27:return 34;case 28:return 33;case 30:return t.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=i,n.prototype=e,e.Parser=n,new n}()}(),a),l=function(e){"use strict";var t={},i=e;function n(){}return t.Compiler=n,n.prototype={compiler:n,disassemble:function(){for(var e,t,i,n=this.opcodes,s=[],o=0,a=n.length;o<a;o++)if("DECLARE"===(e=n[o]).opcode)s.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var r=0;r<e.args.length;r++)"string"==typeof(i=e.args[r])&&(i='"'+i.replace("\n","\\n")+'"'),t.push(i);s.push(e.opcode+" "+t.join(" "))}return s.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;i<t;i++){var n=this.opcodes[i],s=e.opcodes[i];if(n.opcode!==s.opcode||n.args.length!==s.args.length)return!1;for(var o=0;o<n.args.length;o++)if(n.args[o]!==s.args[o])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(i=0;i<t;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.accept(e)},accept:function(e){var t,i=e.strip||{};return i.left&&this.opcode("strip"),t=this[e.type](e),i.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,i=0,n=t.length;i<n;i++)this.accept(t[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort((function(e,t){return e-t})),this},compileProgram:function(e){var t,i=(new this.compiler).compile(e,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var s=0,o=i.depths.list.length;s<o;s++)(t=i.depths.list[s])<2||this.addDepth(t-1);return n},block:function(e){var t=e.mustache,i=e.program,n=e.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var s=t.sexpr,o=this.classifySexpr(s);"helper"===o?this.helperSexpr(s,i,n):"simple"===o?(this.simpleSexpr(s),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,i,n=e.pairs;this.opcode("pushHash");for(var s=0,o=n.length;s<o;s++)i=(t=n[s])[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,i){var n=e.id,s=n.parts[0],o=null!=t||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,o)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var s=this.setupFullMustacheParams(e,t,n),o=e.id.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",s.length,o);else{if(this.options.knownHelpersOnly)throw new i("You specified knownHelpersOnly, but used the unknown helper "+o,e);this.opcode("invokeHelper",s.length,o,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth),e.parts[0]?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var t=1,i=e.parts.length;t<i;t++)this.opcode("lookup",e.parts[t])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new i("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,n=0,s=t.length;n<s;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,i=e.eligibleHelper,n=this.options;if(i&&!t){var s=e.id.parts[0];n.knownHelpers[s]?t=!0:n.knownHelpersOnly&&(i=!1)}return t?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t,i=e.length;i--;)t=e[i],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,i){var n=e.params;return this.pushParams(n),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.hash(e.hash):this.opcode("emptyHash"),n}},t.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new i("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);var s=n.parse(e),o=(new n.Compiler).compile(s,t);return(new n.JavaScriptCompiler).compile(o,t)},t.compile=function(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new i("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);var s;function o(){var i=n.parse(e),s=(new n.Compiler).compile(i,t),o=(new n.JavaScriptCompiler).compile(s,t,void 0,!0);return n.template(o)}return"data"in(t=t||{})||(t.data=!0),function(e,t){return s||(s=o()),s.call(this,e,t)}},t}(i),function(e,t,i,n,s){"use strict";var o=e,a=t,r=i.parser,l=i.parse,c=n.Compiler,h=n.compile,d=n.precompile,u=s,p=o.create,m=function(){var e=p();return e.compile=function(t,i){return h(t,i,e)},e.precompile=function(t,i){return d(t,i,e)},e.AST=a,e.Compiler=c,e.JavaScriptCompiler=u,e.Parser=r,e.parse=l,e};return(o=m()).create=m,o}(o,a,r,l,function(e,t){"use strict";var i=e.COMPILER_REVISION,n=e.REVISION_CHANGES,s=e.log,o=t;function a(e){this.value=e}function r(){}r.prototype={nameLookup:function(e,t){var i,n;return 0===e.indexOf("depth")&&(i=!0),n=/^[0-9]+$/.test(t)?e+"["+t+"]":r.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",i?"("+e+" && "+n+")":n},compilerInfo:function(){return"this.compilerInfo = ["+i+",'"+n[i]+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,i,n){this.environment=e,this.options=t||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var a,r=e.opcodes;this.i=0;for(var l=r.length;this.i<l;this.i++)"DECLARE"===(a=r[this.i]).opcode?this[a.name]=a.value:this[a.opcode].apply(this,a.args),a.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o("Compile completed with content left on stack");return this.createFunctionContext(n)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,i="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(i+=" data = data || {};"),e.push(i)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],o=0,a=this.environment.depths.list.length;o<a;o++)n.push("depth"+this.environment.depths.list[o]);var r=this.mergeSource();if(this.isChild||(r=this.compilerInfo()+r),e)return n.push(r),Function.apply(this,n);var l="function "+(this.name||"")+"("+n.join(",")+") {\n  "+r+"}";return s("debug",l+"\n\n"),l},mergeSource:function(){for(var e,t="",i=0,n=this.source.length;i<n;i++){var s=this.source[i];s.appendToBuffer?e=e?e+"\n    + "+s.content:s.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=s+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack((function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"}))},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack((function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e}))},lookup:function(e){this.replaceStack((function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")}))},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.lastHelper=this.setupHelper(e,t,!0),s=this.nameLookup("depth"+this.lastContext,t,"context"),o="helper = "+n.name+" || "+s;n.paramsInit&&(o+=","+n.paramsInit),this.push("("+o+",helper ? helper.call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,e,t),n=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=this.nameLookup("depth"+this.lastContext,e,"context"),o=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+n+") { "+o+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+o+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),t=this.popStack());var s=this.hash;t&&s.contexts.push("'"+e+"': "+t),i&&s.types.push("'"+e+"': "+i),s.values.push("'"+e+"': ("+n+")")},compiler:r,compileChildren:function(e,t){for(var i,n,s=e.children,o=0,a=s.length;o<a;o++){i=s[o],n=new this.compiler;var r=this.matchExistingProgram(i);null==r?(this.context.programs.push(""),r=this.context.programs.length,i.index=r,i.name="program"+r,this.context.programs[r]=n.compile(i,t,this.context),this.context.environments[r]=i):(i.index=r,i.name="program"+r)}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;t<i;t++){var n=this.context.environments[t];if(n&&n.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,i=this.environment.children[e],n=i.depths.list,s=[i.index,i.name,"data"],o=0,a=n.length;o<a;o++)1===(t=n[o])?s.push("depth0"):s.push("depth"+(t-1));return(0===n.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new a(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i,n,s="",o=this.isInline();if(o){var r=this.popStack(!0);if(r instanceof a)t=r.value,n=!0;else{var l=(i=!this.stackSlot)?this.incrStack():this.topStackName();s="("+this.push(l)+" = "+r+"),",t=this.topStack()}}else t=this.topStack();var c=e.call(this,t);return o?(n||this.popStack(),i&&this.stackSlot--,this.push("("+s+c+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+s+c+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;t<i;t++){var n=e[t];n instanceof a?this.compileStack.push(n):this.pushStack(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof a)return i.value;if(!t){if(!this.stackSlot)throw new o("Invalid stack pop");this.stackSlot--}return i},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];return!e&&i instanceof a?i.value:i},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,i){var n=[];return{params:n,paramsInit:this.setupParams(e,n,i),name:this.nameLookup("helpers",t,"helper"),callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(t)].concat(n).join(", ")}},setupOptions:function(e,t){var i,n,s,o=[],a=[],r=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),n=this.popStack(),((s=this.popStack())||n)&&(s||(this.context.aliases.self="this",s="self.noop"),n||(this.context.aliases.self="this",n="self.noop"),o.push("inverse:"+n),o.push("fn:"+s));for(var l=0;l<e;l++)i=this.popStack(),t.push(i),this.options.stringParams&&(r.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+a.join(",")+"]"),o.push("types:["+r.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(e,t,i){var n="{"+this.setupOptions(e,t).join(",")+"}";return i?(this.useRegister("options"),t.push("options"),"options="+n):(t.push(n),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=r.RESERVED_WORDS={},h=0,d=l.length;h<d;h++)c[l[h]]=!0;return r.isValidJavaScriptVariableName=function(e){return!(r.RESERVED_WORDS[e]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e))},r}(n,i)));return c})),define("DS/W3DXComponents/Views/Layout/PanelSlider/PanelSlider",["UWA/Core","UWA/Event","UWA/Element","UWA/Utils/Client","UWA/Class/View","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s){"use strict";var o=n.Features;return s.extend({className:"panel-slider",tagName:"div",_elements:null,_nextIndex:0,_ANIM_TMR:500,_displayedPanels:0,_panelsContent:null,_panels:null,_isMuted:!1,_totalSizes:0,_cachedWidth:null,init:function(e,t){var i=this;if(!Array.isArray(e))throw new Error("Arguments must be of type array");if(t&&!Array.isArray(t.layout))throw new Error("Layout options should be an Object[] of {className: String, size: Number}");i._elements=e,i._panels=[],i._panelsContent=[],i._parent(t)},_initEvents:function(){i.addEvent.call(this.placeHolder,"resize",this._resize.bind(this))},_removeEvents:function(){this.placeHolder&&i.removeEvent.call(this.placeHolder,"resize")},render:function(){var e=this,t=e.options;return e.elements.body=e.container,e.container.addClassName(e.className),t.className&&e.container.addClassName(t.className),e.setLayout(t.layout),e._buildPanels(e._elements),e},_doIntelligentRelayout:function(e){var t=this,i=e||{},n=i.index,s=i.indexRef,o=i.animate,a=i.prevLayout,r=i.layoutDelta,l=n-s-1,c=0,h=0,d=null,u=n-t._displayedPanels;function p(){++c<h||(t._nextIndex=n+1,t._cleanUnShownSlides({force:!0}),t._resizePanels({from:t._nextIndex}),t._resetActiveClasses(),d&&t._throwEvents(d),t._isMuted=!1,i.callback&&i.callback.apply(i.scope||t,[n,t._panelsContent[n],t]))}l>0?d="next":l<0&&(d="back"),t._isMuted=!0,u>=0&&(h++,t._resizePanels({from:0,to:u,animate:o,layout:a,callback:p})),h++,t._resizePanels({from:u+1,to:n,animate:o,indexRef:r<0?n+1:s,callback:p}),h++,n+1!==t._panels.length-1?t._resizePanels({from:n+1,to:t._panels.length-1,animate:o,layout:a,indexRef:r<0?n+1:s,callback:p}):p()},setLayout:function(t,i){var n,s,o,a=this,r=a.getContent(),l=e.merge(i||{},{animate:!0,index:null}),c=this.options.layout,h=this._nextIndex,d=l.index,u=l.animate?{size:!0,position:!0}:null;this._isMuted?l.callback&&l.callback.call(l.scope,!1):(a._totalSizes=0,a.options.layout=t,a._displayedPanels=a.options.layout.length,a.options.layout.forEach((function(e){a._totalSizes+=e.size})),s=a._calculateRefSizes(a._cachedWidth),a._currHiddenSize=s.currHiddenSize,a._currEmptySize=s.currEmptySize,r&&r.isInjected()&&(0!==(n=a.options.layout.length-c.length)||e.is(d)||d===h-1||a._resize({force:!0}),(o=e.is(d)?d:h-1>a._displayedPanels-1?h-1:a._displayedPanels-1)-h-1,n>=0&&o-a._displayedPanels<=0?a.slideTo(o,{doSlide:l.animate,callback:l.callback,scope:l.scope}):a._doIntelligentRelayout({index:o,indexRef:h,animate:u,prevLayout:c,layoutDelta:n,callback:l.callback,scope:l.scope})))},_buildPanels:function(e){for(var t,i=0,n=this._displayedPanels;i<n;i++)t=this._buildPanel(e[i],{className:this.options.layout[i].className,active:!0}).inject(this.elements.body),this._panels[i]=t,this._panelsContent[i]=e[i];this._nextIndex=i,this._addEmptyPanel(),this._panelsContent=this._panelsContent.concat(e.slice(i))},_buildPanel:function(t,i){var n="panel ";return i&&(n+=i.className||"",n+=i.active?" active":""),e.createElement("div",{class:n,html:t})},onPostInject:function(){var e=this;e.placeHolder=this.getContent().getParent(),e._resize(),e._initEvents()},_calculateRefSizes:function(e,t,i){var n=t||this.options.layout,s=n.length;i||this._totalSizes;return{currEmptySize:e*n[s-1].size/this._totalSizes,currHiddenSize:e*n[0].size/this._totalSizes}},_resize:function(e){var t,i,n=this,s=e||{},o=n.getContent();o&&o.isInjected()?(i=o.getDimensions().innerWidth,(n._cachedWidth!==i||s.force)&&(t=n._calculateRefSizes(i),n._currHiddenSize=t.currHiddenSize,n._currEmptySize=t.currEmptySize,n._cachedWidth=i,n._resizePanels({from:0,to:n._nextIndex,animate:s.animate?{size:!0,position:!0}:null,callback:s.callback}))):s.callback&&s.callback.call(s.scoe,!1)},_calculatePanelDim:function(e){var t,i=this,n=e.index,s=e.layoutOffset,o=e.indexRef||i._nextIndex,a=i._displayedPanels,r=e.layout||i.options.layout,l=i._cachedWidth,c=e.allSizes||i._totalSizes,h=r[Math.max(n-s,0)],d=r[Math.max(n-s-1,0)],u=r[0].size/c*l;return n<o-a?t={width:u,left:"-"+u,active:!1,className:r[0].className}:n===o-a?t={width:u,left:0,active:!0,className:r[0].className}:n!==o?t={width:l*h.size/c,left:e.posOffset||0,active:!0,className:h.className}:n===o&&(t={width:d?l*d.size/c:void 0,left:l,active:!1,className:r[r.length-1].className}),t.index=n,t},_removeAnimationStyles:function(e){e.setStyles({transitionDuration:"",transitionProperty:"",perspective:"",fontSmoothing:"",transformOrigin:"",transitionTimingFunction:"",transitionDelay:"",transformStyle:""})},_getAnimationStyles:function(t,i,n){var s=!(!n.position&&!n.size),a=this.container,r=Math.round(i,10),l=Math.round(t,10),c=a.getStyleName("transform",!0),h={width:l||void 0,transformStyle:"preserve-3d"};return s&&e.extend(h,{transformOrigin:"0 0",fontSmoothing:"antialiased",perspective:800,transitionDelay:"0ms",transitionDuration:this._ANIM_TMR+"ms",transitionProperty:[n.size?"width":""].concat([n.position?c:""]).join(","),transitionTimingFunction:"cubic-bezier(0.77, 0, 0.175, 1)"}),o.matrixCSS?h.transform="translate3d("+r+"px, 0, 0)":h.transform="translate("+r+"px, 0)",h},_resizePanels:function(i){var n,s,o,a,r,l,c=this,h=c._nextIndex,d=h-c._displayedPanels,u=i||{},p=c._panels,m=e.is(u.from)?u.from:d,f=e.is(u.to)?u.to:h,g=f-(m||1),v=0,w=[],S=0,C=!1;function y(){clearTimeout(l),C||(C=!0,w.forEach((function(e){var t=p[e.index];c._resetPanelLayoutClasses(t,e.className,{active:e.active})})),e.is(u.callback,"function")&&u.callback.call())}function _(e,i){t.getElement(i)===e&&(v===g?(v++,y()):v++,e.removeEvent("transitionEnd"),c._removeAnimationStyles(e))}for(u.animate=u.animate||{},n=u.animate.size||u.animate.position,u.layout?u.layout.forEach((function(e){S+=e.size})):(u.layout=c.options.layout,S=c._totalSizes);m<=f;m++)(o=p[m])&&(a=w[w.length-1],s=c._calculatePanelDim({index:m,layoutOffset:d,posOffset:a&&a.active?a.left+a.width:null,layout:u.layout,allSizes:S,indexRef:u.indexRef}),r=c._getAnimationStyles(s.width,s.left,u.animate),w.push(s),o.removeEvent("transitionEnd"),n?(o.addEvent("transitionEnd",_.bind(null,o)),o.setStyles(r)):o.setStyles(r));n?l=setTimeout(y,c._ANIM_TMR+20):u.callback&&setTimeout(y,0)},_resetPanelLayoutClasses:function(e,t,i){var n=i||{};e.className="panel "+t+(n.active?" active":"")},_resetActiveClasses:function(){for(var e,t=this._nextIndex-this._displayedPanels,i=this._nextIndex,n=this._nextIndex-this._displayedPanels,s=this.options.layout;t<i;t++)e=t-n,this._resetPanelLayoutClasses(this._panels[t],s[e].className,{active:!0})},insertPanel:function(e,t,i){this.insertPanels([e],t,i)},insertPanels:function(t,n,s){var o=this,a=e.merge(s||{},{resize:!1,animate:!1}),r=o._nextIndex,l=o._panels,c=o.elements.body,h=document.createDocumentFragment();function d(){var e=c.getElement(".panel:nth-child("+(n+1)+")");e?i.inject.call(h,e,"before"):i.inject.call(h,c),o._cleanUnShownSlides({force:!0}),a.callback&&a.callback.call(a.scope,o)}t.forEach((function(e,t){var i=t+n;i>=r?o._panelsContent.splice(i,0,e):(!function(e,t){var i=o._buildPanel(e);l.splice(t,0,i),i.inject(h)}(e,i))})),a.resize?o._resizePanels({animate:!!a.animate&&{position:!0,size:!0},from:n,to:o._nextIndex,callback:d}):setTimeout(d,0)},getPanel:function(e){var t=this._panels;return e>=this._nextIndex||!t[e]?null:t[e]},getPanels:function(){var e=this._panels;return e.slice(0,e.length-1)},_addEmptyPanel:function(){var e=this,t=e._nextIndex,i=e._panels,n=i[t];(n=e._buildPanel(null,t)).setStyles({width:e._currEmptySize||0}),e._setPanelPosition(n,e._cachedWidth),i[t]=n,n.inject(e.elements.body)},_setPanelPosition:function(e,t){o.matrixCSS?e.setStyle("transform","translate3d("+t+"px, 0, 0)"):e.setStyle("transform","translate("+t+"px, 0)")},_cleanSlide:function(e,t){!0===t.force?e.empty():setTimeout((function(){e.empty()}),this._ANIM_TMR)},_cleanUnShownSlides:function(t){var n=this,s=t||{};function o(){var t=n._nextIndex+1,o=n._panels,a=n._panelsContent,r=o.length;for(o[n._nextIndex]?o[n._nextIndex].empty():n._addEmptyPanel();t<r;t++)a[t]&&e.is(a[t],"element")&&i.isInjected.apply(a[t])&&o[t].removeChild(a[t]),o[t].destroy();o.splice(n._nextIndex+1),s.cb&&s.cb.call(n)}s.force?o():setTimeout((function(){o()}),n._ANIM_TMR)},addPanel:function(e,t,i){this._panels[t]&&this._panels[t].setContent(e),this._panelsContent[t]=e,i&&i.mute||t<this._nextIndex&&t>this._nextIndex-this.options.layout.length&&this.dispatchEvent("onPanelShown",t)},slideNext:function(e){var t,i,n=this,s=e||{};n._isMuted?s.callback&&s.callback.call(s.scope,!1):(n._isMuted=!0,t=n._nextIndex,i=n._displayedPanels,s.content&&(n._panelsContent[n._nextIndex]=s.content),n._panels[t].setContent(n._panelsContent[t]),t=++n._nextIndex,n._resizePanels({animate:{size:!0,position:!0},from:t-i-1,to:t-1,callback:function(){var e=t-1;n._addEmptyPanel(),n._throwEvents("next"),n._isMuted=!1,s.callback&&s.callback.apply(s.scope||n,[e,n._panelsContent[e],n])}}))},slideBack:function(e){var t=this,i=t._nextIndex,n=t._displayedPanels,s=t._panels,o=e||{};t._isMuted?o.callback&&o.callback.call(o.scope,!1):(t._isMuted=!0,s[i-n]&&(i=--t._nextIndex,t._resizePanels({animate:{size:!0,position:!0},from:i-n,callback:function(){var e=i-1;s[i].removeClassName("active"),s[i+1].destroy(),s.pop(),t._cleanSlide(s[i],{force:!0}),t._throwEvents("back"),t._isMuted=!1,o.callback&&o.callback.apply(o.scope||t,[e,t._panelsContent[e],t])}})))},slideTo:function(t,i){var n,s=this,o=e.merge(i||{},{doSlide:!0}),a=s._panels,r=s._panelsContent,l=s._nextIndex,c=s._displayedPanels;s._isMuted?o.callback&&o.callback.call(o.scope,!1):(s._isMuted=!0,t<0?e.log("[PanelSlider] Cannot slide to that panel!"):(t>=l||l<=c?(!function(e,t){for(var i,n=e,o=t,l=document.createDocumentFragment(),c=s.elements.body;n<o;n++)(i=a[n])?i.setContent(r[n]):((i=s._buildPanel(r[n],n)).setStyle("width",s._currHiddenSize),s._setPanelPosition(i,s._cachedWidth),i.inject(l),a.push(i));c.appendChild(l)}(l,t+1),l=t+1,n="next"):t<=c&&(l=t+1,n="back"),s._nextIndex=l,s._resize({force:!0,animate:o.doSlide,callback:function(e){s._isMuted=!1,e||(o.callback&&o.callback.apply(o.scope||s,[t,s._panelsContent[t],s]),s._throwEvents(n),s._cleanUnShownSlides({force:!0}))}})))},_throwEvents:function(e){var t,i=this;switch(e){case"next":i.dispatchEvent("onSlideNext"),t=i._nextIndex-1;break;case"back":i.dispatchEvent("onSlideBack"),t=i._nextIndex-i.options.layout.length}i.dispatchEvent("onPanelShown",t)},isMuted:function(){return!!this._isMuted},refresh:function(e){this._resize({force:!0},e)},getLayoutSize:function(){this.options.layout.length},destroy:function(){var t=this;t._removeEvents(),t.stopListening(),t._panelsContent.forEach((function(t){t&&e.is(t.destroy,"function")&&t.destroy()})),t._panels.forEach((function(e){e&&(e.removeEvent("transitionEnd"),e.destroy())})),t._panelsContent.length=0,t._panels.length=0,t._parent()}})})),define("DS/W3DXComponents/AppNavigationPersistence",["UWA/Core","UWA/Class"],(function(e,t){"use strict";var i=null,n=t.extend({_localStorage:null,_isFirstInit:null,_getLocalStorage:function(){this._localStorage=JSON.parse(localStorage.getItem(widget.id))},_setLocalStorage:function(){try{localStorage.setItem(widget.id,JSON.stringify(this._localStorage))}catch(e){console.error(e)}},_removeLocalStorage:function(){localStorage.removeItem(widget.id)},setRoute:function(e){this._localStorage?(this._localStorage.route?this._isFirstInit=!1:this._isFirstInit=!0,this._localStorage.route=e):(this._isFirstInit=!0,this._localStorage={route:e}),this._setLocalStorage()},getRoute:function(){return this._localStorage&&this._localStorage.route?this._localStorage.route:null},isFirstInit:function(){return this._isFirstInit},setFacetViewMode:function(e,t){this._localStorage?(this._localStorage.facetViewMode||(this._localStorage.facetViewMode={}),this._localStorage.facetViewMode[e]=t):(this._localStorage={facetViewMode:{}},this._localStorage.facetViewMode[e]=t),this._setLocalStorage()},getFacetViewMode:function(){return this._localStorage&&this._localStorage.facetViewMode?this._localStorage.facetViewMode:null},clear:function(){this._localStorage=null,this._isFirstInit=!0,this._removeLocalStorage()},init:function(e){this._parent.apply(this,arguments),this._getLocalStorage()}});return{getInstance:function(){return null===i&&(i=new n),i}}})),define("DS/W3DXComponents/Collections/ActionsCollection",["UWA/Core","UWA/Class/Collection","UWA/Class/Model","DS/W3DXComponents/Models/ActionModel"],(function(e,t,i,n){"use strict";return t.extend({model:n,name:"actions",url:function(){return"/"+this.name},setup:function(t,n){var s,o,a,r=n._modelKey;r&&r instanceof i&&(this._modelKey=r,this.url=(o="url",(s=r)&&(a=s[o],e.is(a,"function")&&(a=a.call(s))),a+Object.getPrototypeOf(this).url.call(this)))}})})),define("DS/W3DXComponents/Views/Temp/TempView",["DS/W3DXComponents/Views/Temp/TempHandlebars","UWA/Core","UWA/Class/View","UWA/Utils"],(function(e,t,i,n){"use strict";var s=["template","templateHelpers","mapping"],o=function(e){function t(t){t._isShown&&t._isRendered&&function(t){return e.contains(t.container)}(t)&&t.dispatchEvent("onDomRefresh")}return function(e){e.addEvent("onShow",(function(){!function(e){e._isShown=!0,t(e)}(e)}),this),e.addEvent("onRender",(function(){!function(e){e._isRendered=!0,t(e)}(e)}),this)}}(document.documentElement),a={get:n.memoize((function(t){return e.compile(t)}))},r=i.extend({init:function(e){var i,n;for(e=t.clone(e||{},!1),i=s.length-1;i>=0;i--)n=s[i],e.hasOwnProperty(n)&&(this[n]=e[n],delete e[n]);this._parent.call(this,e),o(this),this.listenTo(this,"onShow",this.onShowCalled)},id:function(){return this.cid},applyMapping:function(e,i){var n,s,o,a=e;for(n in i)s=i[n],t.is(s,"function")?a[n]=s.call(this):((o=s.split(/[\.\[\]]/)).unshift(e),a[n]=o.reduce((function(e,t){return e&&e[t]})));return a},getTemplate:function(){var e=this.template;return a.get(t.is(e,"function")?e.call(this):e)},mixinTemplateHelpers:function(e){e=e||{};var i=this.templateHelpers||{};return t.is(i,"function")&&(i=i.call(this)),i.cid=this.cid,this.name&&(i.name=this.name),t.extend(e,i)},onShowCalled:function(){},onPostInject:function(){this.dispatchEvent("onShow")},destroy:function(){return this.isDestroyed=!0,this.dispatchEvent("onDestroy"),this.stopListening(),this._parent.apply(this,arguments),this}});return r})),define("DS/W3DXComponents/Views/Temp/TempItemView",["DS/W3DXComponents/Views/Temp/TempView"],(function(e){"use strict";var t=e.extend({serializeData:function(){var e={};return this.model?(e=this.model.toJSON(),this.mapping&&(e=this.applyMapping(e,this.mapping))):this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isDestroyed=!1,this.dispatchEvent("onBeforeRender"),this.dispatchEvent("onBeforeItemRendered");var e=this.serializeData(),t=this.getTemplate()(e=this.mixinTemplateHelpers(e));return this.container.setHTML(t),this.dispatchEvent("onRender"),this.dispatchEvent("onItemRendered"),this},destroy:function(){this.isDestroyed||(this.dispatchEvent("onItemBeforeDestroy"),this._parent.apply(this,arguments),this.dispatchEvent("onItemDestroyed"))}});return t})),define("DS/W3DXComponents/Views/EmptyView",["DS/W3DXComponents/Views/Temp/TempItemView","i18n!DS/W3DXComponents/assets/nls/Views/EmptyView.json","css!DS/W3DXComponents/W3DXComponents"],(function(e,t){"use strict";return e.extend({name:"empty-view",tagName:"div",defaultOptions:{icon:void 0,title:t.noItem,subtitle:""},setup:function(){this.container.addClassName(this.getClassNames())},template:function(){var e='<div class="'+this.getClassNames("-infos")+'">',t=this.options.icon,i=this.options.title;return t&&(e+='<span class="'+this.getClassNames("-icon")+" center-block fonticon fonticon-5x fonticon-"+t+'" ></span>'),i&&(e+='<span class="'+this.getClassNames("-title")+' center-block">'+i+"</span>"),e+="</div>"}})})),define("DS/W3DXComponents/Views/Item/FilterView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempItemView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t){"use strict";return t.extend({name:"filter",tagName:"ul",template:'                            {{#each filters}}                                <li data-field={{field}}">{{value}}</li> |                             {{/each}}                            <li class="selected">All</li>                        ',domEvents:{"click li":"onClickCalled"},init:function(e){var t=UWA.clone(e,!1);["container","template","tagName","domEvents"].forEach((function(e){delete t[e]})),this._parent(t)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},onClickCalled:function(e){this.dispatchEvent("onClick",{field:e.target.dataset.field,value:e.target.textContent}),this.getElement(".selected").removeClassName("selected"),e.target.addClassName("selected")},serializeData:function(){return this.model}})})),define("DS/W3DXComponents/Views/Temp/TempCollectionView",["DS/W3DXComponents/Views/Temp/TempView","UWA/Core","UWA/Class/Model"],(function(e,t,i){"use strict";var n=["itemView","emptyView","itemViewOptions","itemViewEventPrefix","filterer"];var s=e.extend({itemViewEventPrefix:"ItemView",filterCallback:function(e,t){var i,n;i=e.container,n=t,i=UWA.extendElement(i),n?i.show():i.hide()},init:function(e){var i,s;for(e=t.clone(e||{},!1),i=n.length-1;i>=0;i--)s=n[i],e.hasOwnProperty(s)&&(this[s]=e[s],delete e[s]);this._initChildViewStorage(),this._initVisibleItemsStorage(),this._parent.call(this,e),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(this._bufferedChildren.forEach((function(e){e.dispatchEvent("onShow")})),this._bufferedChildren=[])},_initChildViewStorage:function(){this.children={}},_initVisibleItemsStorage:function(){this.visibleItems=[]},_initialEvents:function(){this._parent.apply(this,arguments),this.collection&&this.listenTo(this.collection,{onAdd:this.addChildView,onRemove:this.removeItemView,onReset:this.render})},addChildView:function(e,t,i){this.destroyEmptyView();var n=this.getItemView(e),s=this.collection.indexOf(e);this.addItemView(e,n,s)},onShowCalled:function(){for(var e in this.children)this.children[e].dispatchEvent("onShow")},render:function(){return this.isDestroyed=!1,this.triggerBeforeRendered(),this._renderChildren(),this.triggerRendered(),this},triggerBeforeRendered:function(){this.dispatchEvent("onBeforeRender"),this.dispatchEvent("onCollectionBeforeRender")},triggerRendered:function(){this.dispatchEvent("onRender"),this.dispatchEvent("onCollectionRendered")},_renderChildren:function(){this.startBuffering(),this.destroyChildren(),this.visibleItems.length=0,this.showCollection(),this.collection.isEmpty()&&this.dispatchEvent("onVisibilityChange",[this.visibleItems]),this.endBuffering()},showCollection:function(){var e;this.collection.forEach((function(t,i){e=this.getItemView(t),this.addItemView(t,e,i)}),this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!t.is(this._emptyView)){var n=new i;this._emptyView=this.addItemView(n,e,0)}},destroyEmptyView:function(){t.is(this._emptyView)&&this.removeChildView(this._emptyView)},getEmptyView:function(){return this.emptyView},getItemView:function(e){var t=this.itemView;if(!t)throw new Error("An `itemView` must be specified");return t},filter:function(e,i){var n,s;(t.is(e,"function")||null===e)&&(this.filterer=e),(t.is(i,"function")||null===i)&&(this.filterCallback=i),this.collection.forEach((function(e,i){if(n=!t.is(this.filterer,"function")||this.filterer(e,i),!(s=this.getChildView(e)))throw new Error("No view foun for #"+e.cid);this.filterCallback(s,n),this.updateVisibleItems(s.model,n,!1)}),this),this.dispatchEvent("onVisibilityChange",[this.visibleItems])},getChildView:function(e){var t;if(this.collection)return(t=this.collection.get(e))?this.children[t.cid]:void 0},addItemView:function(e,i,n){var s,o=this.itemViewOptions,a=i===this.getEmptyView();s=!t.is(this.filterer,"function")||this.filterer(e,n),t.is(o,"function")&&(o=o.call(this,e,n));var r=this.buildItemView(e,i,o);return this.addChildViewEventForwarding(r),this.dispatchEvent("onBeforeItemAdded",r),!a&&this.filterer&&this.filterCallback(r,s),this.children[e.cid]=r,this.renderItemView(r,n),this._isShown&&!this.isBuffering&&r.dispatchEvent("onShow"),this.dispatchEvent("onAfterItemAdded",r),a||this.updateVisibleItems(e,s),r},addChildViewEventForwarding:function(e){var t=this.itemViewEventPrefix;e.addEvent("onAnyEvent",(function(){var i=Array.prototype.slice.call(arguments),n="on"==i[0].substring(0,2)?i[0].substring(2,i[0].length):i[0];i[0]="on"+t+n,i.splice(1,0,e),this.dispatchEvent(i.splice(0,1)[0],i)}),this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,i,n){return new i(t.extend({model:e},n||{}))},removeItemView:function(e){var t=this.children[e.cid];this.removeChildView(t)},removeChildView:function(e){var t;e&&(t=this.getEmptyView(),delete this.children[e.model.cid],this.updateVisibleItems(e.model,!1,!0,"removeChildView"),e.destroy(),this.isBuffering&&e.container.parentNode===this.elBuffer&&this.elBuffer.removeChild(e.container),t&&e instanceof t&&delete this._emptyView),this.dispatchEvent("onItemRemoved",e)},onVisibilityChange:function(){0===this.visibleItems.length?this.showEmptyView():this.destroyEmptyView()},appendBuffer:function(e,t){e.container.addContent(t)},appendHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.container),e._bufferedChildren.push(t)):e.container.appendChild(t.container)},updateVisibleItems:function(e,i,n){var s=!1;!t.is(n)&&(n=!0);var o=this.visibleItems,a=o.indexOf(e),r=-1!==a;return i&&!r?(o.push(e),s=!0):!i&&r&&(o.splice(a,1),s=!0),s&&n&&this.dispatchEvent("onVisibilityChange",[o]),s},destroy:function(){this.isDestroyed||(this.dispatchEvent("onCollectionBeforeDestroyed"),this.destroyChildren(),this.dispatchEvent("onCollectionDestroyed"),this._parent.apply(this,arguments))},destroyChildren:function(){for(var e in this.children)this.removeChildView(this.children[e])}});return s})),define("DS/W3DXComponents/Views/Layout/NestedScrollView",["DS/W3DXComponents/Views/Layout/ScrollView","UWA/Core","DS/W3DXComponents/Views/Temp/TempItemView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i){"use strict";var n=["nested"];var s=i.extend({name:"scroll-nested",template:"",tagName:"div",defaultOptions:{orientation:"vertical",scrollPosition:null,useInfiniteScroll:!0,usePullToRefresh:!0},init:function(e){var i,s;for(e=t.clone(e||{},!1),i=n.length-1;i>=0;i--)s=n[i],e.hasOwnProperty(s)&&(this[s]=e[s],delete e[s]);["container","tagName","template","itemViewEventPrefix","itemViewContainer","domEvents"].forEach((function(t){delete e[t]})),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container")),delete this.options.events,this._initNestedView(),this._initScrollView(),this.listenTo(this.collection,{onReset:function(){var e=this.getOption("useInfiniteScroll");this.scrollView&&this.scrollView.useInfiniteScroll(e)}})},_initScrollView:function(){var i,n,s=this.nestedView;if(s)return i=this._scrollViewEvents={onInfiniteScroll:function(){Array.prototype.unshift.call(arguments,this.scrollView),this.dispatchEvent("onInfiniteScroll",arguments)},onPullToRefresh:function(){Array.prototype.unshift.call(arguments,this.scrollView),this.dispatchEvent("onPullToRefresh",arguments)}},n=this.scrollView=new e(t.extend(this.options,{view:s})),this.listenTo(n,i),this.scrollView},_initNestedView:function(){var e,i,n,s,o,a,r=(s="nested",o=this,(n=this)&&(a=n[s],t.is(a,"function")&&(a=a.call(o,n))),a);return e=this._nestedViewEvents={onItemViewDrag:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewDrag",arguments)},onItemViewCheck:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewCheck",arguments)},onItemViewSelect:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewSelect",arguments)},onItemViewUnSelect:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewUnSelect",arguments)},onItemViewClick:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewClick",arguments)},onItemViewDblClick:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewDblClick",arguments)},onItemViewContextMenu:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewContextMenu",arguments)},onItemViewActionClick:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewActionClick",arguments)},onAddSelection:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onAddSelection",arguments)},onRemoveSelection:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onRemoveSelection",arguments)},onDeactivateMultisel:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onDeactivateMultisel",arguments)},onUnSelectAll:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onUnSelectAll",arguments)}},i=this.nestedView=new r(t.extend({collection:this.collection},this.options)),this.listenTo(i,e),i},onRender:function(){return this.scrollView&&this.injectSubView(this.scrollView),this._parent.apply(this,arguments)},injectSubView:function(e,t){var i=t?this.getElement(t):this.container;e&&i&&(this.undelegateDOMEvents(),e.render().inject(i),this.delegateDOMEvents())},selectItemView:function(e,t){t||(t={});var i=this.nestedView,n=i.selectItemView&&i.selectItemView.apply(i,arguments);return t.scrollPosition&&this.scrollToItemView(n,t.scrollPosition)||n},getSelectedItemView:function(e){var t=this.nestedView;return t.getSelectedItemView&&t.getSelectedItemView.apply(t,arguments)},unSelectAll:function(e){var t=this.nestedView;return t.unSelectAll&&t.unSelectAll.apply(t,arguments)},setShadings:function(e){var t=this.nestedView;return t.setShadings&&t.setShadings.apply(t,arguments)},resetShadings:function(){var e=this.nestedView;return e.resetShadings&&e.resetShadings.apply(e,arguments)},scrollToItemView:function(e,t){var n;if(n=e instanceof i?e:this.nestedView.getChildView(e)){var s=this.getOption("scrollDuration");return s=s>0?s:0,this.scrollView.scrollToElement(n.container,t,s),n}},scrollToPosition:function(){var e=this.scrollView;return e.scrollToPosition&&e.scrollToPosition.apply(e,arguments)},onItemViewSelect:function(){var e,t=this.getOption("scrollPosition");if(t){if(e=arguments[arguments.length-1],"auto"===t){var i=this.isElementInViewport(e.container,!0);if(i.isInViewport)return;i.posOverflow.top?t="top":i.posOverflow.bottom&&(t="bottom")}this.scrollToItemView(e,t)}},isElementInViewport:function(e,t){var i={},n=e.getBoundingClientRect();return i.isInViewport=n.top>=50&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth),t&&(i.posOverflow={},i.posOverflow.top=!(n.top>=50),i.posOverflow.left=!(n.left>=0),i.posOverflow.bottom=!(n.bottom<=(window.innerHeight||document.documentElement.clientHeight)),i.posOverflow.right=!(n.right<=(window.innerWidth||document.documentElement.clientWidth))),i},destroy:function(){if(!this.isDestroyed){var e=this.scrollView,t=this.nestedView;return this.stopListening(e,this._scrollViewEvents),this.stopListening(t,this._nestedViewEvents),e.destroy(),delete this.scrollView,delete this.nestedView,this._parent.apply(this,arguments)}}});return s})),define("DS/W3DXComponents/Views/Temp/TempCompositeView",["DS/W3DXComponents/Views/Temp/TempCollectionView","UWA/Core"],(function(e,t){"use strict";var i=e.extend({_initialEvents:function(){this.listenToOnce(this,"onRender",(function(){this.collection&&this.listenTo(this.collection,{onAdd:this.addChildView,onRemove:this.removeItemView,onReset:this._renderChildren})}))},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON(),this.mapping&&(e=this.applyMapping(e,this.mapping))),e},render:function(){this.isRendered=!0,this.isDestroyed=!1,this.resetItemViewContainer();var e=this.renderModel();return this.container.setHTML(e),this.dispatchEvent("onCompositeModelRendered"),this._renderChildren(),this.dispatchEvent("onCompositeRendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.dispatchEvent("onCompositeCollectionBeforeRender"),this._parent.apply(this,arguments),this.dispatchEvent("onCompositeCollectionRendered"))},renderModel:function(){var e={};return e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.getTemplate()(e)},appendBuffer:function(e,t){this.getItemViewContainer(e).addContent(t)},appendHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.container),e._bufferedChildren.push(t)):this.getItemViewContainer(e).appendChild(t.container)},getItemViewContainer:function(e){if("itemViewContainerElem"in e)return e.itemViewContainerElem;var i,n=this.options.itemViewContainer||this.itemViewContainer;if(n){var s=t.is(n,"function")?n.call(this):n;i=e.container.getElement(s)}else i=e.container;return e.itemViewContainerElem=i,i},resetItemViewContainer:function(){this.itemViewContainerElem&&delete this.itemViewContainerElem}});return i})),define("DS/W3DXComponents/Views/Item/CounterView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempItemView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t){"use strict";var i=t.extend({name:"set-detail-view",tagName:"div",template:function(){return'                                {{#if title}}<span class="'+this.getClassNames("-title")+'">{{title}}</span>                                <span class="'+this.getClassNames("-count")+'">{{itemsLength}}</span>{{/if}}                            '},init:function(t){t=e.clone(t||{},!1),["container","template","tagName"].forEach((function(e){delete t[e]})),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},mixinTemplateHelpers:function(){var e=this._parent.apply(this,arguments),t=this.collection,i=t.state&&t.state.totalRecords;return!i&&(i=t.size()),e.itemsLength=i,e},setOptions:function(e){this._parent.apply(this,arguments);var t=this.collection;if(e.title){var i=this.templateHelpers||(this.templateHelpers={});i.title=e.title||i.title,t&&this.listenTo(t,{onAdd:this.render,onRemove:this.render,onReset:this.render})}else t&&this.stopListening(t);return this}});return i})),define("DS/W3DXComponents/Views/Item/ActionView",["DS/W3DXComponents/Views/Temp/TempItemView","UWA/Core","UWA/Event","UWA/Class/Events","DS/UIKIT/Tooltip","css!DS/W3DXComponents/W3DXComponents","css!DS/UIKIT/UIKIT.css"],(function(e,t,i,n,s){"use strict";return e.extend({name:"action",tagName:"div",template:function(){return'<div class="'+this.getClassNames("-icon-wrapper")+'"><span  class="fonticon fonticon-2x fonticon-{{icon}}"></span></div>'},domEvents:function(){return{click:this.dispatchAsEventListener("onClick"),touchstart:this.dispatchAsEventListener("onClick")}},init:function(e){e=t.clone(e||{},!1),["container","template","tagName","domEvents"].forEach((function(t){delete e[t]})),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},onRender:function(){t.is(this.model.get("title"))&&this.model.get("title").trim().length>0&&new s({position:"bottom",target:this.container,body:this.model.get("title")})}})})),define("DS/W3DXComponents/Views/Item/DropDownActionView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempItemView","css!DS/W3DXComponents/W3DXComponents","css!DS/UIKIT/UIKIT.css"],(function(e,t){"use strict";return t.extend({name:"drop-down-action",tagName:"li",template:function(){return'                                <span class="'+this.getClassNames("-icon-wrapper")+'"><span class="fonticon fonticon-2x fonticon-{{icon}}"></span></span>                                <span class="'+this.getClassNames("-title")+'">{{title}}</span>                            '},domEvents:function(){return{click:this.dispatchAsEventListener("onClick")}},init:function(t){t=e.clone(t||{},!1),["className","container","template","tagName","domEvents"].forEach((function(e){delete t[e]})),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container")),this.model&&this.listenTo(this.model,{onChange:this.render})}})})),define("DS/W3DXComponents/Views/Layout/ActionsView",["UWA/Core","DS/W3DXComponents/Views/Item/ActionView","DS/W3DXComponents/Views/Temp/TempCollectionView","UWA/Event","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n){"use strict";return i.extend({name:"actions",tagName:"div",itemView:t,itemViewEventPrefix:"Action",domEvents:function(){return{resize:this.dispatchAsEventListener("onResize")}},defaultOptions:{updateOnResize:!0},init:function(t){t=e.clone(t||{},!1),["container","template","tagName","itemViewEventPrefix","domEvents"].forEach((function(e){delete t[e]})),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},updateOverflow:function(){var e=this.container.offsetWidth-1,t=Math.floor(e/50);this.overflowActions=this.visibleItems.slice(t);this.dispatchEvent("onUpdateOverflow",[this.overflowActions])},onUpdateOverflow:function(e){var t=function(e,t){e.forEach((function(e){e.set({visible:t})}))};t(e,!1),t(this.collection.without(e),!0)},onAfterItemAdded:function(){this.updateOverflow()},onItemRemoved:function(){this.updateOverflow()},onResize:function(){this.updateOverflow()},onVisibilityChange:function(){this.updateOverflow()},onDestroy:function(){this.container.removeEvent()}})})),define("DS/W3DXComponents/Views/Layout/DropDownActionsView",["DS/W3DXComponents/Views/Item/DropDownActionView","DS/W3DXComponents/Views/Temp/TempCompositeView","UWA/Core","UWA/Element","UWA/Event","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s){"use strict";var o="drop-down-actions",a=["position","positionOptions"];return t.extend({name:o,tagName:"div",itemView:e,itemViewContainer:function(){return"."+o+"-wrapper"},itemViewEventPrefix:"Action",position:function(){throw new Error("You must specify a position!")},positionOptions:{},template:function(){return'                        <ul class="'+this.getClassNames("-wrapper")+'"></ul>                    '},init:function(e){var t,n;for(e=i.clone(e||{},!1),t=a.length-1;t>=0;t--)n=a[t],e.hasOwnProperty(n)&&(this[n]=e[n],delete e[n]);["container","template","itemViewContainer","itemViewEventPrefix","tagName"].forEach((function(t){delete e[t]})),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},updatePosition:function(){var e=this,t=function(t){return i.is(t,"function")?t.call(e):t};return this.isDestroyed||this.container.setPosition(t(this.position||this.options.position),t(this.positionOptions||this.options.positionOptions)),this},onShow:function(){n.addEvent.call(document,"click",this.onClickOutside.bind(this),null,0,!0),n.addEvent.call(this.container.getParent(),"resize",this.updatePosition.bind(this),null,0,!0),this.updatePosition()},onClickOutside:function(e){e&&(s.getElement(e).isInjected(this.container)||s.getElement(e)===this.container)||this.destroy()},onDestroy:function(){n.removeEvent.call(document,"click",this.onClickOutside,!0),n.removeEvent.call(this.container.getParent(),"resize",this.updatePosition,!0)}})})),define("DS/W3DXComponents/Views/Item/ActionsInlineView",["UWA/Class/Collection","UWA/Core","DS/W3DXComponents/Views/Layout/ActionsView","DS/W3DXComponents/Views/Layout/DropDownActionsView","DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/Native/Dropdown","DS/W3DXComponents/Collections/ActionsCollection","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a){"use strict";var r=["alwaysOverflow"],l=s.extend({name:"actions-inline",tagName:"div",template:function(){return'                                <div class="'+this.getClassNames("-wrapper")+'"></div>                                <div class="action-container actions-inline-dotted hidden">                                    <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-dot-3"></span></div>                                </div>                            '},domEvents:{"click .actions-inline-dotted":"onClickDotted","touchstart .actions-inline-dotted":"onClickDotted"},init:function(e){var i,n;for(e=t.clone(e||{},!1),i=r.length-1;i>=0;i--)n=r[i],e.hasOwnProperty(n)&&(this[n]=e[n],delete e[n]);["container","template","tagName","domEvents"].forEach((function(t){delete e[t]})),this.contextualActions=e.contextualActions,this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container")),this._initActionsView()},_initActionsView:function(){var e,t;return e=this._actionsViewEvents={onVisibilityChange:function(){Array.prototype.unshift.call(arguments,this.actionsView),this.dispatchEvent("onVisibilityChange",arguments)},onActionClick:function(e,t){t.preventDefault(),Array.prototype.unshift.call(arguments,this.actionsView),this.dispatchEvent("onActionClick",arguments)},onUpdateOverflow:this.onUpdateOverflow,onDestroy:function(){this.stopListening(this.actionsView,this._actionsViewEvents),delete this.actionsView},onResize:function(){this.dropDown&&this.dropDown.filter()}},t=this.actionsView=new i({collection:this.collection,filterer:this.isActionsVisible.bind(this)}),this.listenTo(t,e),t},_initDottedElem:function(){return this.dottedElem=this.getElement("."+this.name+"-dotted")},getContextualArg:function(){return this},_updateContextualActions:function(){var e,i=this;this.contextualActions=[];var n=function(e){var t=e.handler;t&&(e.handler=function(){t(i.getContextualArg())}),e.items&&e.items.forEach(n)};if(this.options&&this.options.contextualActions){var s=this.options.contextualActions;(e="function"==typeof s?s.apply(this.model):t.clone(s))&&e instanceof Array&&(e.forEach(n),this.contextualActions=e)}},_initDropDownMenu:function(){this.dottedElem;this._updateContextualActions();this.dropDown=new o({target:this.dottedElem,items:this.contextualActions});this.dropDown.show()},addContextualAction:function(e){return this.dropDown.addItem(e)},_executeHandler:function(e,t,i){i(e,t)},_initDropDown:function(){var e,i,s=this.dottedElem;return i=this._dropDownEvents={onActionClick:function(){Array.prototype.unshift.call(arguments,this.dropDown),this.dispatchEvent("onActionClick",arguments),this.destroyDropDown()},onDestroy:function(){this.stopListening(this.dropDown,this._dropDownEvents),delete this.dropDown}},e=this.dropDown=new n({collection:this.collection,filterer:this.isActionsOverflow.bind(this),position:function(){var e,i=this.container.getSize(),n=s.getOffsets(),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=n.x-i.width+s.offsetWidth,r=s.offsetHeight+n.y+i.height;return e=r>o+12||r>window.innerHeight+12?n.y-i.height+12:n.y+s.offsetHeight-12,t.merge({x:a,y:e},n)}}),this.listenTo(e,i),e},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&(this.undelegateDOMEvents(),i.grab(e.render().getContent()),this.delegateDOMEvents())},isActionsVisible:function(e,i){var n=!e.get("overflow"),s=this.options.filterer;return t.is(s,"function")&&(s=s.call(this,e,i),n=n&&s),n},isActionsOverflow:function(e,i){var n=!e.get("visible")||e.get("overflow"),s=this.options.filterer;return t.is(s,"function")&&(s=s.call(this,e,i),n=n&&s),n},hasOverflowAction:function(){this.collection;var e=!1;return this.collection&&(e=this.collection.some(this.isActionsOverflow,this)),e},destroyDropDown:function(){this.dropDown&&(this.dropDown.destroy(),delete this.dropDown)},onRender:function(){this._initDottedElem(),this.injectSubView(this.actionsView,"."+this.name+"-wrapper")},onShow:function(){this.actionsView.dispatchEvent("onShow")},onClickDotted:function(e){if(this.dispatchEvent("onActionClickDotted"),this.contextualActions){if(this.dropDown)return;this._initDropDownMenu()}else{if(this.dropDown)return;this._initDropDown().render().inject(document.body)}e.stopPropagation()},onUpdateOverflow:function(){this._isShown&&(this.hasOverflowAction()?(this.dottedElem.removeClassName("hidden"),this.dispatchEvent("onDottedVisible")):(this.destroyDropDown(),this.dottedElem.addClassName("hidden"),this.dispatchEvent("onDottedHidden")))},destroy:function(){if(!this.isDestroyed)return this.actionsView.destroy(),this.destroyDropDown(),delete this.dottedElem,this._parent.apply(this,arguments)}});return l})),define("DS/W3DXComponents/Views/Item/TileView",["DS/W3DXComponents/Views/Temp/TempHandlebars","UWA/Class/Collection","UWA/Core","DS/W3DXComponents/Views/Item/ActionsInlineView","DS/W3DXComponents/Views/Plugins/LazyLoading","DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/Input/Toggle","DS/W3DXComponents/Collections/ActionsCollection","DS/UIKIT/DropdownMenu","DS/UIKIT/Tooltip","css!DS/UIKIT/UIKIT.css","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a,r,l,c){"use strict";var h="tile",d=["lazyLoading"];e.registerHelper("getImgAttrs",(function(t){var n,s,o="";if(t){for(n in t){if(s=t[n],!i.is(s))break;o+=(n=e.Utils.escapeExpression(n))+'="'+(s=e.Utils.escapeExpression(s))+'" '}return new e.SafeString(o)}}));var u=o.extend(s,{name:h,tagName:"div",template:function(){return'                                        <div class="'+this.getClassNames("-check")+' {{#unless withMultisel}}hidden{{/unless}}">                                            <div class="toggle toggle-primary">                                                <input type="checkbox" name="radios" value="" id="checkbox-{{cid}}">                                                <label class="control-label" for="checkbox-{{cid}}"></label>                                            </div>                                        </div>                                        <div class="'+this.getClassNames("-sub-container")+'" draggable="true">                                            <div class="'+this.getClassNames("-header")+'">                                                {{#if image}}<img src="{{#unless lazyLoading}}{{image}}{{/unless}}" {{getImgAttrs imgAttrs}} class="'+this.getClassNames("-image")+'" draggable="false"/>{{/if}}                                            </div>                                            <div class="'+this.getClassNames("-body")+'">                                                {{#if icon}}<img src="{{icon}}" class="'+this.getClassNames("-icon")+'" draggable="false"/>{{/if}}\t                                                <div class="'+this.getClassNames("-title")+'">{{{title}}}</div>                                                <div class="'+this.getClassNames("-subtitle")+'">{{{subtitle}}}</div>                                                <div class="'+this.getClassNames("-content")+'">{{{content}}}</div>                                            <progress max="100" value="10" class="'+this.getClassNames("-progress")+'"></progress>                                            </div>                                            <div class="'+this.getClassNames("-actions")+'">                                                <div class="actions-inline-container">                                                    <div class="action-container single-action hidden">                                                        <div class="action-icon-wrapper"><span class="fonticon fonticon-2x"></span></div>                                                    </div>                                                    <div class="action-container actions-inline-dotted hidden">                                                        <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-down-open"></span></div>                                                    </div>                                                </div>                                            </div>                                        </div>                                    '},domEvents:function(){return{"click .tile-sub-container":function(e){e&&e.target&&this.container.getElement(".actions-inline-container")&&this.container.getElement(".actions-inline-container").contains(e.target)||this.dispatchEvent("onClick",[e])},"contextmenu .tile-sub-container":function(e){return e.preventDefault(),this.dispatchEvent("onContextMenu",[e]),!1},dragstart:this.dispatchAsEventListener("onDrag"),"dblclick .tile-sub-container":function(e){e&&e.target&&this.container.getElement(".actions-inline-container")&&this.container.getElement(".actions-inline-container").contains(e.target)||this.dispatchEvent("onDblClick",[e])},"change .tile-check input":this.dispatchAsEventListener("onCheck")}},init:function(e){var t,n;for((e=i.clone(e||{},!1)).attributes||(e.attributes={}),t=d.length-1;t>=0;t--)n=d[t],e.hasOwnProperty(n)&&(this[n]=e[n],delete e[n]);["container","template","tagName","domEvents"].forEach((function(t){delete e[t]})),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container")),this.listenTo(this.model,{onAdd:this.onAdd,onChange:this.render,onProgress:this.onProgress,onLoad:this.onLoad}),!this.options.contextualActions&&this.model.actions&&this.model.actions instanceof r&&this.listenTo(this.model.actions,{onRemove:this.render,onAdd:this.render,onChange:this.render}),this.manageLazyLoading()},_executeHandler:function(e,t,i){i(e,t)},_initDropDown:function(){var e;e=this.container.getElement(".actions-inline-dotted .action-icon-wrapper"),this.dropDown=new l({target:e,items:this.contextualActions}),this.dropDown.show()},updateContextualActions:function(e){this.options.contextualActions=e,this._updateContextualActions()},_updateContextualActions:function(){var e,t=this;this.contextualActions=[];var n=function(e){var i=e.handler;i&&(e.handler=function(){i(t)}),e.items&&e.items.forEach(n)};if(this.options&&this.options.contextualActions){var s=this.options.contextualActions;(e="function"==typeof s?s.apply(this.model):i.clone(s))&&e instanceof Array&&(e.forEach(n),this.contextualActions=e)}else this.model.actions&&((e=i.is(this.model.actions,"function")?this.model.actions():this.model.actions)instanceof r?(e=e.map((function(e){return{text:e.get("title"),fonticon:e.get("icon"),multisel:!1,handler:function(){t.dispatchEvent("onActionClick",[t,{model:e},arguments[0]])}}})),e&&e instanceof Array&&e.length>0&&(this.contextualActions=e)):console.log("TileView: actions on model not correctly defined."))},_setAspectRatios:function(){var e=this.container.getElement(".tile-image");e&&(e.onload=function(){this.naturalWidth/this.naturalHeight>1?(this.removeClassName("portrait"),this.addClassName("landscape")):(this.removeClassName("landscape"),this.addClassName("portrait"))})},mixinTemplateHelpers:function(){var e,t=this._parent.apply(this,arguments);return(e=t.imgAttrs)&&i.is(e,"function")&&(t.imgAttrs=e.call(this)),t.withMultisel=this.options.withMultisel,t},manageLazyLoading:function(){this.lazyLoading&&((this.templateHelpers||(this.templateHelpers={})).lazyLoading=this.lazyLoading)},persistCheckbox:function(){this.container.getElement(".tile-check").addClassName("persist")},unPersistCheckbox:function(){this.container.getElement(".tile-check").removeClassName("persist")},setShading:function(e){for(var t=0;t<e.length;t++)e[t].criteria(this.model)&&(this.container.setStyle("background-color",e[t].color),this.container.addClassName("shaded"),this.container.getElement(".tile-header").setStyle("outline-color",e[t].color))},resetShading:function(){this.container.style.backgroundColor="",this.container.removeClassName("shaded")},select:function(e){e||(e={}),this.container.addClassName("selected"),this.container.getElement(".tile-check input")&&(this.container.getElement(".tile-check input").checked=!0),e.silent||this.dispatchEvent("onSelect")},unSelect:function(e){this.container.removeClassName("selected"),this.container.getElement(".tile-check input")&&(this.container.getElement(".tile-check input").checked=!1),e&&!e.silent&&this.dispatchEvent("onUnSelect")},isSelected:function(){return this.container.hasClassName("selected")},onBeforeRender:function(){this.dropDown&&(this.dropDown.destroy(),delete this.dropDown),this.container.getElement(".actions-inline-dotted")&&this.container.getElement(".actions-inline-dotted").removeEvent("click")},onRender:function(){var e=this;if(this._setAspectRatios(),this.container.addClassName("with-actions"),this.options.actionButtonBinding)this.options.actionButtonBinding(this);else if(this._updateContextualActions(),this.contextualActions)if(1===this.contextualActions.length){var t=this.contextualActions[0];this.container.getElement(".single-action").removeClassName("hidden"),t.fonticon&&this.container.getElement(".single-action .fonticon").addClassName("fonticon-"+t.fonticon),t.handler&&this.container.getElement(".single-action").addEvent("click",(function(){e._actionTooltip&&e._actionTooltip.hide(),t.handler.apply(e,arguments)})),i.is(t.text)&&t.text.trim().length>0&&(delete this._actionTooltip,this._actionTooltip=new c({position:"bottom",target:this.container.getElement(".single-action"),body:t.text}))}else this.contextualActions.length>1&&this.container.getElement(".actions-inline-dotted")&&(this.container.getElement(".actions-inline-dotted").removeClassName("hidden"),this.container.getElement(".actions-inline-dotted").addEvent("click",(function(t){if(e.contextualActions){if(e.dropDown)return;e.dispatchEvent("onActionClickDotted",e),e._initDropDown()}})))},onItemRendered:function(){this.lazyLoading&&(this.lazyLoading=i.merge({imgElem:this.getElement(".tile-image"),imgSrc:this.model.get("image")},this.lazyLoading))},onProgress:function(e){this.getElement("progress").value=e},onLoad:function(){this.container.removeClassName("progress"),this.getElement("progress").value=0},onAdd:function(e,t,i){i.isProgress&&this.container.addClassName("progress")},destroy:function(){if(!this.isDestroyed)return this.dropDown&&(this.dropDown.destroy(),delete this.dropDown),this._actionTooltip&&(this._actionTooltip.destroy(),delete this._actionTooltip),this.container.getElement(".actions-inline-dotted")&&this.container.getElement(".actions-inline-dotted").removeEvent("click"),this._parent.apply(this,arguments)}});return u})),define("DS/W3DXComponents/Views/Item/RowView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempHandlebars","DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/DropdownMenu","DS/UIKIT/Input/Toggle","DS/W3DXComponents/Collections/ActionsCollection","DS/W3DXComponents/Views/Item/ActionsInlineView","DS/UIKIT/Tooltip","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a,r){"use strict";var l="row";t.registerHelper("propertyHelper",(function(e,t,i){var n=t.property||t,s=t.type||null,o=e[n]||"";return"date"===s&&(o=new Date(1e3*o).toLocaleString()),o.toString().replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}));var c=i.extend({name:l,tagName:"tr",template:function(){return'                            {{#if withMultisel}}<td class="row-data-check">                                <div class="row-check">                                    <div class="toggle toggle-primary">                                        <input type="checkbox" name="radios" value="" id="checkbox-{{cid}}">                                        <label class="control-label" for="checkbox-{{cid}}"></label>                                    </div>                                </div>                            </td>{{/if}}                            {{#each properties}}                                <td class="row-data{{#if this.actions}}-actions{{/if}}" >                                    {{#if this.actions}}                                        <div class="actions-inline-container">                                            <div class="action-container single-action hidden">                                                <div class="action-icon-wrapper"><span class="fonticon fonticon-2x"></span></div>                                            </div>                                            <div class="action-container actions-inline-dotted hidden">                                                <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-down-open"></span></div>                                            </div>                                        </div>                                    {{/if}}                                    {{#if this.icon}}<img src="{{../../this.icon}}" class="'+this.getClassNames("-icon")+'" draggable="false"/>{{/if}}                                    {{#unless this.actions}}{{propertyHelper ../../this ../this}}{{/unless}}                                </td>                            {{/each}}                            '},domEvents:function(){return{"click .row-data":this.dispatchAsEventListener("onClick"),dragstart:this.dispatchAsEventListener("onDrag"),"change .row-check input":this.dispatchAsEventListener("onCheck")}},defaultOptions:{properties:null},init:function(t){(t=e.clone(t||{},!1)).attributes||(t.attributes={}),e.extend(t.attributes,{draggable:"true"}),["className","container","template","tagName","domEvents"].forEach((function(e){delete t[e]})),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container")),this.listenTo(this.model,"onChange",this.render),!this.options.contextualActions&&this.model.actions&&this.model.actions instanceof o&&this.listenTo(this.model.actions,{onRemove:this.render,onAdd:this.render,onChange:this.render})},_initDropDown:function(){var e;e=this.container.getElement(".actions-inline-dotted"),this.dropDown=new n({target:e,items:this.contextualActions}),this.dropDown.show()},updateContextualActions:function(e){this.options.contextualActions=e,this._updateContextualActions()},_updateContextualActions:function(){var t,i=this;this.contextualActions=[];var n=function(e){var t=e.handler;t&&(e.handler=function(){t(i)}),e.items&&e.items.forEach(n)};if(this.options&&this.options.contextualActions){var s=this.options.contextualActions;(t="function"==typeof s?s.apply(this.model):e.clone(s))&&t instanceof Array&&(t.forEach(n),this.contextualActions=t)}else this.model.actions&&((t=e.is(this.model.actions,"function")?this.model.actions():this.model.actions)instanceof o?(t=t.map((function(e){return{text:e.get("title"),fonticon:e.get("icon"),multisel:!1,handler:function(){i.dispatchEvent("onActionClick",[i,{model:e},arguments[0]])}}})),t&&t instanceof Array&&t.length>0&&(this.contextualActions=t)):console.log("TileView: actions on model not correctly defined."))},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&(this.undelegateDOMEvents(),e.render().inject(i),this.delegateDOMEvents())},setOptions:function(e){var t;return this._parent.apply(this,arguments),e.properties&&((t=this.templateHelpers||(this.templateHelpers={})).properties=e.properties||t.properties||Object.keys(this.model.defaults())),this},persistCheckbox:function(){this.container.getElement(".row-check").addClassName("persist")},unPersistCheckbox:function(){this.container.getElement(".row-check").removeClassName("persist")},setShading:function(e){for(var t=0;t<e.length;t++)e[t].criteria(this.model)&&this.container.setStyle("background-color",e[t].color)},resetShading:function(){this.container.style.backgroundColor=""},onBeforeRender:function(){this.dropDown&&(this.dropDown.destroy(),delete this.dropDown),this.container.getElement(".actions-inline-dotted")&&this.container.getElement(".actions-inline-dotted").removeEvent("click")},mixinTemplateHelpers:function(){var e=this._parent.apply(this,arguments);return e.withMultisel=this.options.withMultisel,e},onRender:function(){var t=this;if(this.container.addClassName("with-actions"),this.options.actionButtonBinding)this.options.actionButtonBinding(this);else if(this._updateContextualActions(),this.contextualActions)if(1===this.contextualActions.length){var i=this.contextualActions[0];this.container.getElement(".single-action").removeClassName("hidden"),i.fonticon&&this.container.getElement(".single-action .fonticon").addClassName("fonticon-"+i.fonticon),i.handler&&this.container.getElement(".single-action").addEvent("click",i.handler),e.is(i.text)&&i.text.trim().length>0&&(delete this._actionTooltip,this._actionTooltip=new r({position:"bottom",target:this.container.getElement(".single-action"),body:i.text}))}else this.contextualActions.length>1&&this.container.getElement(".actions-inline-dotted")&&(this.container.getElement(".actions-inline-dotted").removeClassName("hidden"),this.container.getElement(".actions-inline-dotted").addEvent("click",(function(e){if(t.contextualActions){if(t.dropDown)return;t.dispatchEvent("onActionClickDotted",t),t._initDropDown()}})))},select:function(e){e||(e={}),this.container.addClassName("selected"),this.container.getElement(".row-check input")&&(this.container.getElement(".row-check input").checked=!0),e.silent||this.dispatchEvent("onSelect")},unSelect:function(e){this.container.removeClassName("selected"),this.container.getElement(".row-check input")&&(this.container.getElement(".row-check input").checked=!1),e&&!e.silent&&this.dispatchEvent("onUnSelect")},isSelected:function(){return this.container.hasClassName("selected")},destroy:function(){if(!this.isDestroyed)return this.actionsView&&(this.actionsView.destroy(),delete this.actionsView),this._actionTooltip&&(this._actionTooltip.destroy(),delete this._actionTooltip),this._parent.apply(this,arguments)}});return c})),define("DS/W3DXComponents/Views/Item/ThumbnailView",["DS/W3DXComponents/Views/Item/TileView","css!DS/UIKIT/UIKIT.css","css!DS/W3DXComponents/W3DXComponents"],(function(e){"use strict";return e.extend({name:"thumbnail",init:function(e){(this._parent.call(this,e),this.getOption("thumbnailType"))&&("small"===this.getOption("thumbnailType")&&(this.container.className+=" small-thumbnail-container"))}})})),define("DS/W3DXComponents/Views/Layout/TableView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempCompositeView","DS/W3DXComponents/Views/Temp/TempItemView","DS/W3DXComponents/Views/Item/RowView","DS/W3DXComponents/Views/Plugins/Multisel","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s){"use strict";var o=t.extend(s,{name:"table",tagName:"table",itemView:n,template:function(){return'                                {{#if headers}}                                    <thead>                                        <tr>                                            {{#if withMultisel}}<th class="'+this.getClassNames("-check")+'"></th>{{/if}}                                            {{#each headers}}                                                <th {{#if actions}}                                                        class="'+this.getClassNames("-actions")+'"                                                    {{else}}                                                        {{#if sortable}}class="sortable"{{/if}} data-property="{{property}}"                                                    {{/if}}                                                >{{label}}</th>                                            {{/each}}                                        </tr>                                    </thead>                                {{/if}}                                <tbody></tbody>                                <tfoot></tfoot>                            '},itemViewContainer:"tbody",defaultOptions:{headers:null,defaultItem:null,selectionMode:"oneToOne",headerOnEmpty:!0},domEvents:{"click th.sortable":"onClickHeader"},selectedHeader:{el:null,sort:"descending"},init:function(t){t=e.clone(t||{},!1),["container","tagName","template","itemViewEventPrefix","itemViewContainer","domEvents"].forEach((function(e){delete t[e]})),this._initSelectionSet(),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},setOptions:function(t){var i;this._parent.apply(this,arguments),t.headers&&((i=this.templateHelpers||(this.templateHelpers={})).headers=t.headers||i.headers||[],this.templateHelpers.headers.length>0&&(this.itemViewOptions=e.extend(this.itemViewOptions||{},{properties:i.headers.map((function(e){for(var t,i=["property","type","icon","actions"],n={},s=0;s<i.length;s++)n[t=i[s]]=e[t];return n}))},!0))),t.sort&&(this.sort=t.sort);var n="nullToMany"===this.getOption("selectionMode");return this.itemViewOptions=e.merge({withMultisel:n},this.itemViewOptions||{},!0),this},mixinTemplateHelpers:function(){var e=this._parent.apply(this,arguments);return e.withMultisel="nullToMany"===this.getOption("selectionMode"),e},setShadings:function(e){for(var t=0;t<this.collection.length;t++)this.getChildView(this.collection._models[t]).setShading(e)},resetShadings:function(){for(var e=0;e<this.collection.length;e++)this.getChildView(this.collection._models[e]).resetShading()},sort:function(e,t,i){var n=e.sortBy((function(e){if(UWA.is(i,"function"))return i.call(e);var t=i.split(/[\.\[\]]/),n=null;return t.unshift(e.toJSON()),(n=t.reduce((function(e,t){return e[t]})))&&n.toLowerCase()}));"descending"===t&&n.reverse(),e.reset(n),this.dispatchEvent("onSort",[t,i])},onClickHeader:function(e){var t=e.target||e.srcElement,i=t.dataset?t.dataset.property:t.getAttribute("data-property");i=this.itemViewOptions.mapping?this.itemViewOptions.mapping[i]:i,this.selectedHeader.el&&this.selectedHeader.el.removeClassName(this.selectedHeader.sort),this.selectedHeader.el=t,this.selectedHeader.sort="descending"===this.selectedHeader.sort?"ascending":"descending",this.selectedHeader.el.addClassName(this.selectedHeader.sort),this.sort(this.collection,this.selectedHeader.sort,i)},selectItemView:function(e,t){var n,s,o,a=this.getOption("selectionMode");if(a&&(n=e instanceof i?e:this.getChildView(e))){switch(o=(s=this.currentItemView)&&s===n,a){case"oneToOne":this.selectOneToOne(n,o,t);break;case"nullToOne":this.selectNullToOne(n,o,t);break;case"nullToMany":this.selectOneToMany(n,t)}return n}},addSelectedClass:function(e){this.getChildView(e).select({silent:!0})},removeSelectedClasses:function(){for(var e=0;e<this.collection.length;e++)this.getChildView(this.collection._models[e]).unSelect({silent:!0})},getSelectedItemView:function(){return this.currentItemView},selectNullToOne:function(e,t,i){return this.unSelectAll(),t||(this.currentItemView=e,e.select()),e},selectOneToOne:function(e,t,i){return t||(this.unSelectAll(),this.currentItemView=e,e.select()),e},selectOneToMany:function(e,t){return e.select(t),e},unselectOneToMany:function(e){e.unSelect({silent:!0})},unSelectAll:function(e){e||(e={});var t=this.currentItemView;t&&(t.unSelect(e),delete this.currentItemView,e.silent||this.dispatchEvent("onUnSelectAll"))},destroyEmptyView:function(){this.options.headerOnEmpty||this.container.getElement("thead").show(),this._parent.apply(this,arguments)},showEmptyView:function(){this.options.headerOnEmpty||this.container.getElement("thead").hide(),this._parent.apply(this,arguments)},onRender:function(){var e=this.getOption("defaultItem");e&&this.selectItemView(e)},onActivateMultisel:function(){this.refreshUI()},onDeactivateMultisel:function(){this.cleanUI()},onSetMultisel:function(){this.refreshUI()},onAddSelection:function(e){var t=this.getChildView(e);this.selectOneToMany(t,{silent:!0})},onItemRemoved:function(){this._selectionState.isActive&&this.deactivateMultisel()},onRemoveSelection:function(e){var t=this.getChildView(e);t&&this.unselectOneToMany(t)},cleanUI:function(){for(var e,t=0;t<this.collection.length;t++)(e=this.getChildView(this.collection._models[t]))&&(e.unPersistCheckbox(),e.unSelect());this.container.removeClassName(this.getClassNames("-multisel"))},populateUI:function(){if(this._selectionState.isActive){for(var e=0;e<this.collection.length;e++)this.getChildView(this.collection._models[e]).persistCheckbox();var t=this._selectionState.selectedObjects;for(e=0;e<t.length;e++)this.getChildView(this.collection.get(t[e].id)).select({silent:!0});this.container.addClassName(this.getClassNames("-multisel"))}else 1===this._selectionState.selectedObjects.length&&this.getChildView(this.collection.get(this._selectionState.selectedObjects[0].id)).select({silent:!0})},refreshUI:function(){this.cleanUI(),this.populateUI()},onItemViewClick:function(e,t){this._selectionState.isActive?this.selectItemView(e,{event:t,silent:!0}):this.selectItemView(e,{event:t,silent:!1})}});return o})),define("DS/W3DXComponents/Views/Layout/TableScrollView",["DS/W3DXComponents/Views/Layout/TableView","DS/W3DXComponents/Views/Layout/NestedScrollView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t){"use strict";return t.extend({name:"table-scroll",nested:e})})),define("DS/W3DXComponents/Views/Layout/GridView",["UWA/Class/View","DS/W3DXComponents/Views/Plugins/Multisel","DS/W3DXComponents/Views/Temp/TempCollectionView","DS/W3DXComponents/Views/Temp/TempItemView","DS/W3DXComponents/Views/Item/ThumbnailView","UWA/Core","css!DS/W3DXComponents/W3DXComponents","css!DS/UIKIT/UIKIT.css"],(function(e,t,i,n,s,o){"use strict";function a(e){var t,i,n,s;if(e)return e.itemView&&(i=e.itemView.prototype,n="className",i&&(s=i[n],o.is(s,"function")&&(s=s.call(i))),t=s),t||""}var r=i.extend(t,{name:"grid",tagName:"div",itemView:s,defaultOptions:{layout:null,defaultItem:null,selectionMode:"oneToOne",className:"",header:null},init:function(e){e=o.clone(e||{},!1),["container","tagName","template","itemViewEventPrefix","domEvents"].forEach((function(t){delete e[t]})),this._initSelectionSet(),this._parent.call(this,e)},setup:function(){if(this.container.addClassName(this.getClassNames("-container")),!this.options||!this.options.layout||1!==this.options.layout.column)for(var e=0;e<8;e++)UWA.createElement("div",{class:"by-pass-flex"}).inject(this.container)},setOptions:function(e){if(!this._itemViewOptions&&(this._itemViewOptions=this.itemViewOptions||{}),this._parent.apply(this,arguments),e.hasOwnProperty("layout")){var t,i,n,s,r=e.layout,l="";t={className:i=this._itemViewOptions.className?this._itemViewOptions.className:a(this),attributes:{styles:""}},this.container&&this.container.removeClassName("row-layout").removeClassName("column-layout").removeClassName("uikit-layout"),r&&(s=r.column),r&&(n=r.row),s?s.xsmall||s.small||s.medium||s.large?(s.xsmall&&12%s.xsmall==0&&(l+=" col-xs-"+12/s.xsmall),s.small&&12%s.small==0&&(l+=" col-sm-"+12/s.small),s.medium&&12%s.medium==0&&(l+=" col-md-"+12/s.medium),s.large&&12%s.large==0&&(l+=" col-lg-"+12/s.large),this.addClassName("uikit-layout"),t={className:i+l,attributes:{styles:{flex:"none"}}}):(this.addClassName("column-layout"),t={className:i,attributes:{styles:{height:"",width:(100/s).toFixed(2)+"%",flex:"none"}}}):n&&(this.addClassName("row-layout"),t={className:i,attributes:{styles:{width:"",height:(100/n).toFixed(2)+"%",flex:"none"}}}),this.itemViewOptions=o.merge(t,this._itemViewOptions||{},!0)}var c="nullToMany"===this.getOption("selectionMode");return this.itemViewOptions=o.merge({withMultisel:c},this.itemViewOptions||{},!0),this},addClassName:function(e){return this.container?this.container.addClassName(e):(this.options.className||(this.options.className=""),this.options.className+=" "+e),this},setShadings:function(e){for(var t=0;t<this.collection.length;t++)this.getChildView(this.collection._models[t]).setShading(e)},resetShadings:function(){for(var e=0;e<this.collection.length;e++)this.getChildView(this.collection._models[e]).resetShading()},selectItemView:function(e,t){var i,s,o,a=this.getOption("selectionMode");if(a&&(i=e instanceof n?e:this.getChildView(e))){switch(o=(s=this.currentItemView)&&s===i,a){case"oneToOne":this.selectOneToOne(i,o,t);break;case"nullToOne":this.selectNullToOne(i,o,t);break;case"nullToMany":this.selectOneToMany(i,t)}return i}},addSelectedClass:function(e){this.getChildView(e).select({silent:!0})},removeSelectedClasses:function(){for(var e=0;e<this.collection.length;e++)this.getChildView(this.collection._models[e]).unSelect({silent:!0})},getSelectedItemView:function(){return this.currentItemView},selectNullToOne:function(e,t,i){return this.unSelectAll(),t||(this.currentItemView=e,e.select(i)),e},selectOneToOne:function(e,t,i){return t||(this.unSelectAll(),this.currentItemView=e,e.select(i)),e},selectOneToMany:function(e,t){return this.currentItemView=e,e.select(t),e},unselectOneToMany:function(e){e.unSelect({silent:!0})},unSelectAll:function(e){e||(e={});var t=this.currentItemView;t&&(t.unSelect(e),delete this.currentItemView,e.silent||this.dispatchEvent("onUnSelectAll"))},appendBuffer:function(e,t){e.container.insertBefore(t,e.container.getElement(".by-pass-flex"))},appendHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.container),e._bufferedChildren.push(t)):e.container.insertBefore(t.container,e.container.getElement(".by-pass-flex"))},onRender:function(){var e=this.getOption("defaultItem"),t=this.getOption("header");o.is(t)&&(t=o.is(t,"function")?t.call(this):t).inject&&t.inject(this.container,"top"),e&&this.selectItemView(e)},onActivateMultisel:function(){this.refreshUI()},onDeactivateMultisel:function(){this.cleanUI()},onSetMultisel:function(){this.refreshUI()},onAddSelection:function(e){var t=this.getChildView(e);this.selectOneToMany(t,{silent:!0})},onItemRemoved:function(){this._selectionState.isActive&&this.deactivateMultisel()},onRemoveSelection:function(e){var t=this.getChildView(e);t&&this.unselectOneToMany(t)},cleanUI:function(){for(var e,t=0;t<this.collection.length;t++)(e=this.getChildView(this.collection._models[t]))&&(e.unPersistCheckbox(),e.unSelect());this.container.removeClassName(this.getClassNames("-multisel"))},populateUI:function(){if(this._selectionState.isActive){for(var e=0;e<this.collection.length;e++)this.getChildView(this.collection._models[e]).persistCheckbox();var t=this._selectionState.selectedObjects;for(e=0;e<t.length;e++)this.getChildView(this.collection.get(t[e].id)).select({silent:!0});this.container.addClassName(this.getClassNames("-multisel"))}else 1===this._selectionState.selectedObjects.length&&this.getChildView(this.collection.get(this._selectionState.selectedObjects[0].id)).select({silent:!0})},refreshUI:function(){this.cleanUI(),this.populateUI()},onItemViewClick:function(e,t){this._selectionState.isActive?this.selectItemView(e,{event:t,silent:!0}):this.selectItemView(e,{event:t,silent:!1})}});return r})),define("DS/W3DXComponents/Views/Layout/GridScrollView",["DS/W3DXComponents/Views/Layout/GridView","DS/W3DXComponents/Views/Layout/NestedScrollView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t){"use strict";return t.extend({name:"grid-scroll",nested:e})})),define("DS/W3DXComponents/Views/Layout/ListView",["DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Item/TileView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t){"use strict";return e.extend({name:"list",defaultOptions:{layout:{column:1},selectionMode:"oneToOne",itemView:t,scrollPosition:"auto",useInfiniteScroll:!0,usePullToRefresh:!0,scrollDuration:200}})})),define("DS/W3DXComponents/Views/Layout/ChannelView",["UWA/Core","DS/W3DXComponents/Views/Layout/GridScrollView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t){"use strict";return t.extend({name:"channel",defaultOptions:{layout:{row:1},orientation:"horizontal",useInfiniteScroll:!0,usePullToRefresh:!0}})})),define("DS/W3DXComponents/Views/Temp/TempAutocomplete",["UWA/Core","UWA/Event","UWA/String","DS/W3DXComponents/Views/Temp/DeprecatedAutocomplete","DS/UIKIT/Spinner","i18n!DS/W3DXComponents/assets/nls/Views/Temp/TempAutocomplete","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o){"use strict";var a,r,l=n.extend({_prevText:"",_suggestsIndex:0,defaultOptions:{attributes:{type:"autocomplete",autocomplete:"off"},className:"temp-autocomplete"},resizeSuggests:function(){},init:function(e){this._parent(e),e=e||{},this.collection=e.collection?e.collection:null,this.getSuggestions=e.getSuggestions||this.getSuggestions,this.suggestDistinction=e.suggestDistinction||this.suggestDistinction},attachEvents:function(){this._parent.apply(this,arguments);var e=this.elements;e.input.addEvent("keydown",this.onKeyDown.bind(this)),e.input.addEvent("paste",this.onPaste.bind(this)),e.input.addEvent("drop",this.onPaste.bind(this))},getId:function(){return this.elements.input.id},getName:function(){return this.elements.input.name},getFormattedLabel:function(e){return this.options.labelFormat.replace(/\{(\w+)\}/g,(function(t,i){return UWA.is(e,"string")?e:e[i]}))},suggestDistinction:function(e){return!1},successProcess:function(e,t){if(0===(e=UWA.is(e,"string")?this.dataParse(e):e).length&&this.options.onEmailAddress&&i.isEmail(t)){var n=this.options.onEmailAddress(t);n&&(e=[n])}e.length>0&&(this.dataCache[t]=e),this.dispatchEvent("onUpdateSuggests",[e]),this.elements.spin.hide(),this.typeTimeout=null},onUpdateSuggests:function(e){var n,s,a,r,l=this,c=this.elements;if(c.suggests.empty(),Array.isArray(e)&&e.length>0){for(var h=function(){var e=function(e){var t=l.options.suggestKey?e[l.options.suggestKey]:i.stripTags(l.getFormattedSuggest(e));l.elements.input.set({"data-key":t}),l.dispatchEvent("onSelect",[t,e,r])}.bind(this,p);!!navigator.userAgent.match(/(iPhone|iPad|iPod)/g)?s.addEvent("touchstart",e):(s.addEvent("click",e),s.addEvent("mouseover",(function(e){var i=t.getElement(e);c.suggests.getElement(".selected").removeClassName("selected"),i.parentNode.addClassName("selected")})))},d=Math.min(e.length,8),u=0;u<d;u++){var p=e[u],m=this.getFormattedSuggest(p);m=(r=this.suggestDistinction(p))?m+" ("+r+")":m,this.options.suggestKey&&(this.itemCache[p[this.options.suggestKey].toLowerCase()]=p),n=UWA.createElement("li"),s=UWA.createElement("a",{text:m}).inject(n),n.inject(c.suggests),r?(n.addClassName("distinct"),this.options.unlockDistinctClick?h():n.addClassName("locked")):h()}(a=this.elements.suggests.getElement("li:not(.locked)"))&&a.addClassName("selected"),l._suggestsIndex=0,this.resizeSuggests()}else n=UWA.createElement("li"),(s=UWA.createElement("a").inject(n)).setHTML(o.NoResults),n.inject(c.suggests),n.addClassName("error-suggest");this.dispatchEvent("onShowSuggests")},onSelect:function(e,t){t&&(this.elements.input.value=this.getFormattedLabel(t),this.resetInput(),this.onHideSuggests(),setTimeout(function(){this.getFocus()}.bind(this),100))},onBlur:function(e){setTimeout(function(){this.dispatchEvent("onHideSuggests")}.bind(this),200)},onFocus:function(e){var i=this,n=this.elements,s=t.getElement(e);n.input.value===this.options.placeholder&&(n.input.value=""),this.getSuggestions(s.value,this.dataCache,(function(e){i.successProcess(e,s.value)})),this.dispatchEvent("onFocused",e)},onShowSuggests:function(){var e=this.elements;e.input.value.length>0&&e.container.addClassName(this.options.className+"-suggestsDisplayed")},onPaste:function(e){setTimeout(function(){this.onKeyUp(e)}.bind(this),50)},onKeyDown:function(e){var i=this,n=i.elements.suggests.getElements("li:not(.locked)"),s=n[i._suggestsIndex],o=e.code||e.key;function a(e){var t=i._suggestsIndex+e;n[t]&&(s.removeClassName("selected"),i._suggestsIndex=t,n[t].addClassName("selected"))}if(i.elements.container.hasClassName(this.options.className+"-suggestsDisplayed")){switch(o){case"Escape":case"Esc":i.onHideSuggests();break;case"ArrowDown":case"Down":a(1);break;case"ArrowUp":case"Up":a(-1);break;case"Enter":case"NumpadEnter":s&&s.getElement("a")&&s.getElement("a").triggerEvent("click");break;default:return}t.stop(e)}else"ArrowDown"!==o&&"Down"!==o||i.onShowSuggests()},onKeyUp:function(e){var t=this,i=this.elements.input,n=i.value;if(n!==this._prevText)return 0===n.trim().length?(this.resetInput(),this.onHideSuggests(),void(this.typeTimeout=null)):(this._prevText=n,i.removeAttribute("data-key"),void(n.length>=this.options.minLength&&(clearTimeout(this.typeTimeout),this.showSpin(),this.typeTimeout=setTimeout(function(){this.getSuggestions(n,this.dataCache,(function(e){t.successProcess(e,n)}))}.bind(this),this.options.typeDelay))))},resetInput:function(e){this.elements.input.value="",this._prevText="";var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),this.elements.input.dispatchEvent(t),e&&this.resetCache()},showSpin:function(){var e,t=this.elements;t.suggests.empty(),this.elements.spin.show(),(e=UWA.createElement("li")).addClassName("li-spinner"),this.elements.spin.inject(e),e.inject(t.suggests),this.dispatchEvent("onShowSuggests")},buildSkeleton:function(){this._parent.apply(this,arguments),this.options.id&&(this.elements.input.id=this.options.id),this.options.name&&(this.elements.input.name=this.options.name),this.options.attributes&&this.elements.input.set(this.options.attributes),this.elements.spin=new s({className:"small"}),this.autosize=new c(this.elements.input,this.options.container)},destroy:function(){this.autosize&&this.autosize.destroy(),this._parent.apply(this,arguments)}});function c(t,i){var n;function s(){var e,i,s;for(e=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,s=0;s<a.length;s++)null!=(i=e[a[s]])&&(n.style[a[s]]=i);n.disabled="disabled",n.style.whiteSpace="pre",n.style.position="absolute",n.style.top=n.style.left="-9999em"}function o(){var e,s;(e=t.value||t.placeholder)!==n.value&&(n.setText(e),s=n.offsetWidth+r,i&&i.offsetWidth&&(s=i.offsetWidth>n.offsetWidth?n.offsetWidth:i.offsetWidth-4),t.style.width=s+"px")}function l(e){var i;t[(i=e?"remove":"add")+"Event"]("keydown",o),t[i+"Event"]("keyup",o),t[i+"Event"]("input",o),t[i+"Event"]("paste",o),t[i+"Event"]("change",o)}return n=e.createElement("span"),document.body.appendChild(n),s(),l(),o(),{remap:s,refresh:o,destroy:function(){l(!0),n.destroy(),t.style.width=""}}}return a=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","webkitBoxSizing","mozBoxSizing","boxSizing","padding","border"],r=20,l})),define("DS/W3DXComponents/Views/Item/MultiselView",["UWA/Core","UWA/Event","DS/W3DXComponents/Views/Item/ActionsInlineView","DS/UIKIT/Tooltip","i18n!DS/W3DXComponents/assets/nls/Views/Item/MultiselView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s){"use strict";var o=i.extend({tagName:"div",template:function(){return'                                <div class="'+this.getClassNames("-multisel-button")+'">                                    <input type="checkbox" id="{{cid}}-multisel-button" name="{{cid}}-buttons" value="multisel"/>                                    <label class="multisel-label fonticon fonticon-2x fonticon-select-on" for="{{cid}}-multisel-button"></label>                                    <div class="multisel-counter">{{counter}}</div>                                </div>                                <div class="'+this.getClassNames("-wrapper")+'"></div>                                <div class="action-container actions-inline-dotted hidden">                                    <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-open-down"></span></div>                                </div>                            '},domEvents:{"change input":"onChangeInput"},init:function(e){this.buildMultiselActions=e.buildMultiselActions||function(){return[]},this._parent.apply(this,arguments)},setup:function(){this._parent.apply(this,arguments);var e=this.templateHelpers||(this.templateHelpers={});e.counter=e.counter||0,this.isInMultiselMode=!1},onChangeInput:function(e){var i=t.getElement(e);i.checked?this.dispatchEvent("onMultiselOn",[this,i.value]):(this.exitMultisel(),this.dispatchEvent("onMultiselOff",[this,i.value]))},resetMultisel:function(){this.templateHelpers.counter=0,this.collection.reset(),this.container.getElement("input").checked=!1},_filterActions:function(e,t){for(var i=[],n=UWA.clone(e),s=0;s<n.length;s++)if(n[s].items){var o=n[s];o.items=this._filterActions(n[s].items,t),i.push(o)}else n[s].id?t.indexOf(n[s].id)>-1&&n[s].multisel&&i.push(n[s]):n[s].multisel&&i.push(n[s]);return i},buildMultisel:function(e){if(e.isActive){var t=e.selectedObjects.length;this._updateCounter(t),this.selectedModels=e.selectedObjects,this.contextualActions=this.options.contextualActions=this.buildMultiselActions(this.selectedModels),this.render(),this.container.getElement("input").checked="checked",this.dottedElem.removeClassName("hidden"),this.dispatchEvent("onDottedVisible"),0!==t||e.wasExplicitlyActivated||this.exitMultisel()}},getContextualArg:function(){return this.selectedModels},_executeHandler:function(e,t,i){i(this.selectedModels)},_updateCounter:function(e){this.templateHelpers.counter=e,this.container.getElement(".multisel-counter").setText(e)},exitMultisel:function(){this.container.getElement("input").checked=!1,this._updateCounter(0),this.destroyDropDown(),this.dottedElem.addClassName("hidden"),this.dispatchEvent("onDottedHidden")},setOptions:function(e){this._parent.apply(this,arguments);var t=this.collection;return t&&this.listenTo(t,{onReset:function(){this.render(),this.container.getElement("input").checked="checked"}}),this},onRender:function(){this._parent.apply(this,arguments),delete this.tooltip,this.tooltip=new n({position:"bottom",target:this.container.getElement(".multisel-label"),body:s.tooltipMultiselIcon})}});return o})),define("DS/W3DXComponents/Views/Item/SwitcherView",["UWA/Core","UWA/Utils","UWA/Event","DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/Tooltip","DS/UIKIT/IconDropdown","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o){"use strict";return n.extend({name:"switcher",tagName:"div",template:function(){return this.getOption("tempSingleIconOnMobile")?'                            {{#each buttons}}                                <div style="display: none;" class="'+this.getClassNames("-button")+'">                                    <input type="radio" id="{{../cid}}-{{id}}-button" name="{{../cid}}-buttons" value="{{id}}" {{#if default}}checked="checked"{{/if}}/>                                    <label for="{{../cid}}-{{id}}-button"/>                                </div>                            {{/each}}                            <div class="'+this.getClassNames("-button")+'">                              <label id="switch-view-button"/>                                <span style="font-size: 24px; margin: 0;" class="fonticon fonticon-view-big-thb"></span>                              </label>                            </div>                                                        ':'                            {{#each buttons}}                                <div class="'+this.getClassNames("-button")+'">                                    <input type="radio" id="{{../cid}}-{{id}}-button" name="{{../cid}}-buttons" value="{{id}}" {{#if default}}checked="checked"{{/if}}/>                                    <label for="{{../cid}}-{{id}}-button"/>                                </div>                            {{/each}}                            '},domEvents:{"change input":"onChange"},defaultOptions:{buttons:[]},init:function(t){t=e.clone(t||{},!1),["container","template","tagName","domEvents"].forEach((function(e){delete t[e]})),this._parent.call(this,t)},setup:function(){var e=this.templateHelpers||(this.templateHelpers={});this.container.addClassName(this.getClassNames("-container")),e.buttons=e.buttons||this.getOption("buttons")},onRender:function(){var t=this;if(this.getOption("tempSingleIconOnMobile")){var i=e.extendElement(t.container).getElement("#switch-view-button"),n=t.options.buttons.filter((function(e){return e.default}))[0];n=n||{};var a=function(e){switch(e){case"thumbnail":return"view-small-thb";case"tilebig":return"view-big-tile";case"tile":return"view-small-tile";case"table":return"view-list";default:return""}},r=[];t.options.buttons.forEach((function(e){r.push({name:e.id,fonticon:a(e.id),description:e.title,selectable:!0,selected:n.id===e.id})}));var l=new s({position:"bottom",target:i});new o({target:i,items:r,events:{onClick:function(e,n){n.actived||(t.dispatchEvent("onSwitch",[t,n.name]),this.items.forEach((function(e){e.actived=!1})),n.actived=!0,i.children[0].className=n.elements.icon.className,l.setBody(n.description))}}}).items.forEach((function(e){e.name===n.id&&(i.children[0].className=e.elements.icon.className,l.setBody(e.description))}))}else this.options.buttons.forEach((function(i){if(e.is(i.title)&&i.title.trim().length>0){var n=e.extendElement(t.container).getElement("#"+t.cid+"-"+i.id+"-button");new s({position:"bottom",target:n.getParent(),body:i.title})}}))},clear:function(){this.container.getElements("input").map((function(e){e.removeAttribute("checked")}))},setValue:function(t){var i=this.container.getElement("input#"+this.cid+"-"+t+"-button");e.is(i)&&(this.clear(),i.setAttribute("checked","checked"),this.dispatchEvent("onSwitch",[this,t]))},getValue:function(){for(var e,t,i=this.container.getElements("input"),n=0;e=i[n];n++)if(e.checked){t=e;break}return t.value},onChange:function(e){var t=i.getElement(e);t.checked&&this.dispatchEvent("onSwitch",[this,t.value])}})})),define("DS/W3DXComponents/Views/Item/SetView",["DS/W3DXComponents/Views/Item/SwitcherView","DS/W3DXComponents/Views/Item/ActionsInlineView","DS/W3DXComponents/Views/Item/CounterView","DS/W3DXComponents/Views/Temp/TempItemView","DS/W3DXComponents/Collections/ActionsCollection","UWA/Core","DS/W3DXComponents/Views/Item/MultiselView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a){"use strict";function r(e,t){var i;return e&&(i=e[t],o.is(i,"function")&&(i=i.call(e))),i}var l=n.extend({name:"set",tagName:"div",template:function(){return'                        <div class="'+this.getClassNames("-header")+'">                            <div class="'+this.getClassNames("-detail")+'"></div>                            <div class="'+this.getClassNames("-actions")+'"></div>                            <div class="'+this.getClassNames("-multiselHeader")+'"></div>                            <div class="'+this.getClassNames("-switcher")+'"></div>                        </div>                        <div class="'+this.getClassNames("-contents")+'"></div>                    '},defaultOptions:{actions:{},switcher:{},detail:{},multiselHeader:{},contents:{},multiselAction:{id:"multisel",icon:"check",overflow:!1}},actions:t,switcher:e,detail:i,multiselHeader:a,init:function(e){(e=o.clone(e||{},!1))&&e.actions&&e.actions.view&&(this.actions=e.actions.view),e&&e.detail&&e.detail.view&&(this.detail=e.detail.view),e&&e.switcher&&e.switcher.view&&(this.switcher=e.switcher.view),e&&e.multiselHeader&&e.multiselHeader.view&&(this.multiselHeader=e.multiselHeader.view),["container","template","tagName"].forEach((function(t){delete e[t]})),this._parent.call(this,e)},setup:function(){var e,t=this.getOption("contents"),i="nullToMany"===this.getOption("contents").selectionMode,n=this.getOption("defaultView");this.container.addClassName(this.getClassNames("-container"));for(var s=0;s<t.views.length;s++)if(t.views[s].default){e=t.views[s];break}e&&(console.log("DS/W3DXComponents/Views/Item/SetView - Use of deprecated option contents.views[n].default=true, use contents.defaultView instead"),n=e.id),n||(n=t.views[0].id),this.currentViewId=n,this._initDetailView(),i&&this._initMultiselHeaderView(),this._initActionsView(),this._initSwitcherView(),this._initContentsViews(t.views)},_initDetailView:function(){var e=r(this,"detail");return this.detailView=new e(this.getDetailViewOptions())},getDetailViewOptions:function(){return o.extend(this.getOption("detail"),{collection:this.collection})},_initMultiselHeaderView:function(){if(this.getOption("actions").collection){var e,t,i=r(this,"multiselHeader");return t=this._multiselHeaderViewEvents={onMultiselOn:function(){this.contentsViews[this.currentViewId].nestedView.activateMultisel(!0),this.dispatchEvent("onMultiselOn",arguments)},onMultiselOff:function(){this.contentsViews[this.currentViewId].nestedView.deactivateMultisel(),this.dispatchEvent("onMultiselOff",arguments)},onActionClick:function(){Array.prototype.unshift.call(arguments,this.actionsView),this.dispatchEvent("onActionClick",arguments)}},e=this.multiselHeaderView=new i(this.getMultiselHeaderViewOptions()),this.listenTo(e,t),e}},getMultiselHeaderViewOptions:function(){var e=new s,t="nullToMany"===this.getOption("contents").selectionMode,i=this.getOption("buildMultiselActions");return{collection:e=o.is(e,"function")?e.call(this):e,withMultisel:t,buildMultiselActions:i}},buildMultiselOnCheck:function(e){if(this.multiselHeaderView){var t=this.contentsViews[this.currentViewId].nestedView,i=t.getSelectionState();t.isSelected(e)?t.removeSelection(e):(i.isActive||t.activateMultisel(!1),t.addSelection(e)),this.multiselHeaderView.buildMultisel(i)}t.selectionIsEmpty()&&!i.wasExplicitlyActivated&&t.deactivateMultisel()},buildMultiselOnClick:function(e){if(this.multiselHeaderView){var t=this.contentsViews[this.currentViewId].nestedView,i=t.getSelectionState();i.isActive?(t.isSelected(e)?t.removeSelection(e):t.addSelection(e),this.multiselHeaderView.buildMultisel(i)):(t.deactivateMultisel(),t.addSelection(e)),t.selectionIsEmpty()&&!i.wasExplicitlyActivated&&t.deactivateMultisel()}},_initActionsView:function(){if(this.getOption("actions").collection){var e,t,i=r(this,"actions");return t=this._actionsViewEvents={onActionClick:function(){Array.prototype.unshift.call(arguments,this.actionsView),this.dispatchEvent("onActionClick",arguments)},onVisibilityChange:this.onVisibilityChange},e=this.actionsView=new i(this.getActionsViewOptions()),this.listenTo(e,t),e}},getActionsViewOptions:function(){var e=this.getOption("actions"),t=e.collection;return t=o.is(t,"function")?t.call(this):t,o.merge({collection:t},e)},_initSwitcherView:function(){var e,t,i=r(this,"switcher");return t=this._switcherViewEvents={onSwitch:function(){Array.prototype.unshift.call(arguments,this.switcherView),this.dispatchEvent("onSwitch",arguments)}},e=this.switcherView=new i(this.getSwitcherViewOptions()),this.listenTo(e,t),e},getSwitcherViewOptions:function(){return o.extend(this.getOption("switcher"),{buttons:this.getOption("contents").views,tempSingleIconOnMobile:this.getOption("tempSingleIconOnMobile")})},_initContentsViews:function(e){return this.contentsViews={},e.forEach((function(e,t){this.currentViewId===e.id?this.contentsViews[e.id]=this._buildContentsView(e):this.getOption("lazyRender")||(this.contentsViews[e.id]=this._buildContentsView(e))}),this),this.contentsViews},getContentsViewOptions:function(e){var t=this.getOption("contents"),i=o.extend(UWA.clone(t),e,!0);return o.extend(i,{collection:this.collection})},_buildContentsView:function(e){if(e&&e.view){if(this.contentsViews[e.id])throw new Exception("View is already built");var t=new e.view(this.getContentsViewOptions(e)),i={onItemViewDrag:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onItemViewDrag",arguments)},onItemViewCheck:function(){Array.prototype.unshift.call(arguments,t),arguments[2]instanceof n?this.buildMultiselOnCheck(arguments[2].model):this.buildMultiselOnCheck(arguments[2]),this.dispatchEvent("onItemViewCheck",arguments)},onItemViewClick:function(){Array.prototype.unshift.call(arguments,t),arguments[2]instanceof n?this.buildMultiselOnClick(arguments[2].model):this.buildMultiselOnClick(arguments[2]),this.dispatchEvent("onItemViewClick",arguments)},onItemViewDblClick:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onItemViewDblClick",arguments)},onItemViewContextMenu:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onItemViewContextMenu",arguments)},onItemViewSelect:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onItemViewSelect",arguments)},onAddSelection:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onAddSelection",arguments)},onRemoveSelection:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onRemoveSelection",arguments)},onDeactivateMultisel:function(){Array.prototype.unshift.call(arguments,t),this.multiselHeaderView.exitMultisel(),this.dispatchEvent("onDeactivateMultisel",arguments)},onUnSelectAll:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onUnSelectAll",arguments)},onInfiniteScroll:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onInfiniteScroll",arguments)},onPullToRefresh:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onPullToRefresh",arguments)},onRender:function(){Array.prototype.unshift.call(arguments,t),this.dispatchEvent("onRenderContentView",arguments)},onDestroy:function(){Array.prototype.unshift.call(arguments,t),this.stopListening(t),this.dispatchEvent("onDestroyContentView",arguments)}};return this.listenTo(t,i),t.container.hide(),t}},onRender:function(){var e=this.name;if(!this.currentViewId)throw Exception("No default view defined");for(var t in this.injectSubView(this.multiselHeaderView,"."+e+"-multiselHeader"),this.dispatchEvent("onMultiselHeaderView",this.multiselHeaderView),this.injectSubView(this.detailView,"."+e+"-detail"),this.dispatchEvent("onRenderDetailView",this.detailView),this.actionsView&&this.injectSubView(this.actionsView,"."+e+"-actions")&&this.dispatchEvent("onRenderActionsView",this.actionsView),this.contentsViews)this.contentsViews[t]&&this.injectSubView(this.contentsViews[t],"."+this.name+"-contents");return this.injectSubView(this.switcherView,"."+e+"-switcher"),this.dispatchEvent("onRenderSwitcherView",this.switcherView),this.switcherView.setValue(this.currentViewId),this},showContentsView:function(e,t){var i,n;if(!this.contentsViews[e]){for(var s=this.getOption("contents"),a=0;a<s.views.length;a++)if(s.views[a].id===e){n=s.views[a];break}this.contentsViews[e]=this._buildContentsView(n),this.injectSubView(this.contentsViews[e],"."+this.name+"-contents")}var r=this.contentsViews[e];if(t||(t={}),(i=t.selectedItemView)&&(i=this.selectItemView(i.model,{silent:!0,view:r})),r.container.show(),i&&this.scrollToItemView(i,{view:r,scrollPosition:this.getContentsViewOptions().scrollPosition}),this.currentShadings?r.setShadings&&r.setShadings(this.currentShadings):r.resetShadings&&r.resetShadings(),"nullToMany"===r.nestedView.options.selectionMode){var l=this.contentsViews[this.currentViewId];if(l&&"nullToMany"!==l.nestedView.options.selectionMode&&l.nestedView.resetSelectionState(),l&&l.nestedView.getSelectionState&&r.nestedView.setMultisel&&l.nestedView.getSelectionState()){var c=o.extend({},l.nestedView.getSelectionState());r.nestedView.setMultisel(c),this.multiselHeaderView.buildMultisel(c)}}this.currentViewId=e},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&(this.undelegateDOMEvents(),i.grab(e.render().getContent()),this.delegateDOMEvents())},switchView:function(e){this.switcherView.setValue(e)},selectItemView:function(e,t){t||(t={});var i=t.view||this.contentsViews[this.currentViewId];return i&&i.selectItemView&&i.selectItemView(e,t)},selectItemViews:function(){if(this.getSelection())for(var e=this.getSelection()._models,t=0;t<e.length;t++)this.selectItemView(e[t],{silent:!0})},getSelectedItemView:function(e){e||(e={});var t=e.view||this.contentsViews[this.currentViewId];return t&&t.getSelectedItemView&&t.getSelectedItemView()},getSelection:function(){return this.contentsViews[this.currentViewId].nestedView.getSelection()},unSelectAll:function(e){e||(e={});var t=e.view||this.contentsViews[this.currentViewId];return t&&t.unSelectAll&&t.unSelectAll(e)},setShadings:function(e){e=e||{},this.currentShadings=e;var t=e.view||this.contentsViews[this.currentViewId];return t&&t.setShadings&&t.setShadings(this.currentShadings)},resetShadings:function(){this.currentShadings=null;var e=this.contentsViews[this.currentViewId];return e&&e.resetShadings&&e.resetShadings()},scrollToItemView:function(e,t){t||(t={});var i=t.view||this.contentsViews[this.currentViewId];return i&&i.scrollToItemView&&i.scrollToItemView(e,t.scrollPosition)},scrollToPosition:function(e,t){t||(t={});var i=t.view||this.contentsViews[this.currentViewId];return i&&i.scrollToPosition&&i.scrollToPosition(e.x,e.y)},minimize:function(){this.isMinimized||(this.isMinimized=!0,this.container.addClassName("minimized"),this.dispatchEvent("onMinimized"))},maximize:function(){this.isMinimized&&(this.isMinimized=!1,this.container.removeClassName("minimized"),this.dispatchEvent("onMaximized"))},onVisibilityChange:function(){arguments[arguments.length-1].length?this.getElement(".set-actions").addClassName("with-actions"):this.getElement(".set-actions").removeClassName("with-actions")},onSwitch:function(){var e=arguments[arguments.length-1],t=(function(e,t,i){var n;e.forEach((function(e){e[t]===i&&(n=e)}))}(this.getOption("contents").views,"id",e),this.getSelectedItemView()),i=this.currentViewId,n=this.contentsViews[i];i=arguments[arguments.length-1],n&&(n.container.hide(),n.unSelectAll({silent:!0})),i&&this.showContentsView(i,{selectedItemView:t})},onShow:function(){this.detailView&&this.detailView.dispatchEvent("onShow"),this.switcherView&&this.switcherView.dispatchEvent("onShow"),this.actionsView&&this.actionsView.dispatchEvent("onShow"),this.multiselHeaderView&&this.multiselHeaderView.dispatchEvent("onShow")},destroyContentsViews:function(){for(var e in this.contentsViews)this.contentsViews[e]&&this.contentsViews[e].destroy();this.contentsViews.length=0},destroy:function(){if(!this.isDestroyed)return this.actionsView&&this.stopListening(this.actionsView,this._actionsViewEvents),this.stopListening(this.switcherView,this._switcherViewEvents),this.detailView&&(this.detailView.destroy(),delete this.detailView),this.multiselHeaderView&&(this.multiselHeaderView.destroy(),delete this.multiselHeaderView),this.actionsView&&(this.actionsView.destroy(),delete this.actionsView),this.switcherView&&(this.switcherView.destroy(),delete this.switcherView),this.destroyContentsViews(),this._parent.apply(this,arguments)}});return l})),define("DS/W3DXComponents/MemberSet",["UWA/Core","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/TableScrollView","DS/W3DXComponents/Views/Item/SetView","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/Collections/ActionsCollection","i18n!DS/W3DXComponents/assets/nls/MemberSet","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a){"use strict";var r="member-set";var l=n.extend({name:r,defaultOptions:{contents:{views:[{id:"tile",title:a.titleTileView,view:t,itemView:s,default:!0},{id:"table",title:a.titleTableView,view:i}]}},template:function(){return'                <div class="'+this.getClassNames("-header")+'">                    <div class="'+this.getClassNames("-multiselHeader")+'"></div>                    <div class="'+this.getClassNames("-detail")+'"></div>                    <div class="'+this.getClassNames("-actions")+'"></div>                    <div class="'+this.getClassNames("-switcher")+'"></div>                </div>                <div class="'+this.getClassNames("-slidepanel")+'"></div>                <div class="'+this.getClassNames("-contents")+'"></div>            '},init:function(e){this._parent(e)},setup:function(){this._parent.apply(this,arguments),this.options.slidepanel&&(this.slidepanel=this.options.slidepanel,this._initSlidepanelView())},_initSlidepanelView:function(){var t,i,n,s=(i="slidepanel",(t=this)&&(n=t[i],e.is(n,"function")&&(n=n.call(t))),n);return this.slidepanelView=new s.view(this.getSlidepanelViewOptions())},getSlidepanelViewOptions:function(){var t=this;return e.extend(this.getOption("slidepanel").viewOptions,{collection:this.collection,onClose:function(){t.refreshHeight()}})},togglePanel:function(){this.slidepanelView.container.hasClassName("expanded")?this.slidepanelView.hide():(this.slidepanelView.show(),this.slidepanelView.getElement("tr:not(.hidden) input").focus()),this.refreshHeight()},onRender:function(){this.injectSubView(this.slidepanelView,"."+r+"-slidepanel"),this._parent.apply(this,arguments)},refreshHeight:function(){var e=this.container.getElement("."+r+"-slidepanel"),t=this.container.getElement("."+r+"-contents"),i=this.container.getSize().height-e.getSize().height-50;t.setStyle("height",i+"px")},destroy:function(){this.slidepanelView&&this.slidepanelView.destroy(),this._parent.apply(this,arguments)}});return l})),define("DS/W3DXComponents/Views/Item/LabelManagerView",["UWA/Core","UWA/Event","UWA/Element","UWA/Utils","DS/W3DXComponents/Views/Temp/TempItemView","DS/W3DXComponents/Views/Temp/TempAutocomplete","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o){"use strict";var a="labelselector-item-view",r=s.extend({tagName:"div",className:a+"-container",name:a,template:function(){return'                                <table>                                    {{#each categories}}                                        <tr class="tr-{{id}}">                                            <td>                                                <span id="{{id}}-label">{{name}}</span>                                            </td>                                            <td>                                                <div id="{{id}}-wrapper" class="'+a+'-wrapper"></div>                                            </td>                                        </tr>                                    {{/each}}                                </table>'},domEvents:{"click .supp-icon":"onClickSuppCalled","click tr":"onLineClick"},init:function(e){e=e||{},this.collection=e.collection?e.collection:null,this._parent(e),this.newObjects=[],document.body.addEventListener("mousedown",this.clickOutside.bind(this))},setup:function(){var e=this.templateHelpers||(this.templateHelpers={});e.categories=e.categories||this.options.categories||[]},clickOutside:function(e){e.target===this.container||this.container.contains(e.target)||(this.container.removeClassName("highlighted"),this.container.getElement(".highlighted")&&this.container.getElement(".highlighted").removeClassName("highlighted"))},onLineClick:function(e){t.getElement(e).getElement("input").focus()},onFocus:function(e){var i=t.getElement(e),n=i.dataset?i.dataset.category:i.getAttribute("data-category");this.container.getElement(".highlighted")&&this.container.getElement(".highlighted").removeClassName("highlighted"),this.container.getElement("#"+n+"-label").addClassName("highlighted"),this.container.addClassName("highlighted")},onClickSuppCalled:function(e){var i=t.getElement(e);this.removeObject(i.parentElement.dataset.id)},validateSelection:function(e,t){return this.newObjects.map((function(i){i.item===t&&(e=i.selection)})),e=e||n.getUUID()},addObject:function(e,t,i,n,s){e=this.validateSelection(e,i);this.options.allowMultipleCategories||this.removeObject(e);var o=this.autocomplete.getFormattedLabel(i);this.renderOneLabel(e,o,s);var a={selection:e,categoryId:t,prevDistinction:n,item:i};this.newObjects.push(a),this.dispatchEvent("onUpdate",[this.newObjects])},removeObject:function(e){var t,i,n,s,o=this.container.getElement('[data-id="'+e+'"]');if(o){var a=(t=this.newObjects,i="selection",n=e,t.forEach((function(e){e[i]===n&&(s=e)})),s);this.newObjects.splice(this.newObjects.indexOf(a),1),o.remove(),this.dispatchEvent("onUpdate",[this.newObjects])}},renderOneLabel:function(e,t,n){new i("span",{"data-id":e,class:"label-object",html:[{tag:"div",class:"formatted-label",text:t},{tag:"div",class:"supp-icon",html:"&times;"}]}).inject(n,"before")},getJsonObjects:function(){return this.newObjects},attachAutocomplete:function(t,i){var n=this;return e.extend(this.options,{collection:this.collection,container:i,events:{onSelect:function(e,i,s){i&&n.addObject(e,t,i,s,this.getContent())},onFocused:function(e){n.onFocus(e)}},attributes:{"data-category":t}}),this.autocompletes=this.autocompletes||{},this.autocompletes[t]&&this.autocompletes[t].destroy(),this.options.autocompleteExtension?this.autocompletes[t]=new this.options.autocompleteExtension(this.options):this.autocompletes[t]=new o(this.options),this.autocomplete=this.autocompletes[t],this.autocomplete.inject(i)},onRender:function(){for(var e=this.options.categories,t=0;t<e.length;t++)this.attachAutocomplete(e[t].id,this.container.getElement("#"+e[t].id+"-wrapper"))},destroy:function(){this.autocompletes&&Object.keys(this.autocompletes).forEach((function(e){this.autocompletes[e].destroy()}),this),this._parent.apply(this,arguments)}});return r})),define("DS/W3DXComponents/Views/Item/PanelAddMemberView",["UWA/Core","UWA/Element","UWA/Class/View","DS/W3DXComponents/Views/Item/LabelManagerView","DS/UIKIT/Input/Button","i18n!DS/W3DXComponents/assets/nls/Views/Item/PanelAddMemberView","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o){"use strict";var a="paneladdmember-item-view",r=i.extend({tagName:"div",className:a+"-container",name:a,labels:[],init:function(e){this.options=e,this.options.saveProcess&&(this.saveProcess=this.options.saveProcess),this.onClose=this.options.onClose?this.options.onClose:function(){},this._parent(e),this.buildSkeleton()},buildSkeleton:function(){this.buildBody(),this.buildButton(),this.container.setHTML([this.elements.labelmanager,this.elements.buttons])},buildButton:function(){var t=this,i=new s({value:o.Add,className:"primary",disabled:!0,events:{onClick:function(){t.onSaveCalled()}}}),n=new s({value:o.Cancel,className:"default",events:{onClick:function(){t.onCancelCalled()}}});this.elements.buttons=e.createElement("div",{class:a+"-buttons"}),this.elements.buttons.save=i,this.elements.buttons.cancel=n,this.elements.buttons.addContent([i,n])},buildBody:function(){var t=this,i=e.extend({spreadClick:!0,events:{onUpdate:function(e){t.elements.buttons.save.setDisabled(e.length<1),t.labels=e}}},this.options);this.addMemberBody=new n(i),this.elements.labelmanager=e.createElement("div",{class:a+"-body",html:this.addMemberBody.render()})},saveProcess:function(e){for(var t=0;t<e.length;t++)this.collection.add({people:e[t].selection,role:e[t].categoryId})},show:function(){this.container.addClassName("expanded")},hide:function(){this.container.removeClassName("expanded")},onSaveCalled:function(){var e=this.labels;this.saveProcess(e),this.resetView()},onCancelCalled:function(){this.resetView()},resetView:function(){this.hide(),this.buildSkeleton(),this.render(),this.onClose()},destroy:function(){this.addMemberBody&&this.addMemberBody.destroy(),this._parent.apply(this,arguments)}});return r})),define("DS/W3DXComponents/ContentSet",["DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/ListView","DS/W3DXComponents/Views/Layout/TableScrollView","DS/W3DXComponents/Views/Item/SetView","DS/W3DXComponents/Views/Item/TileView","UWA/Core","i18n!DS/W3DXComponents/assets/nls/ContentSet","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a){"use strict";var r=n.extend({name:"content-set",defaultOptions:{actions:{},switcher:{},detail:{},contents:{defaultView:"thumbnail",views:[{id:"thumbnail",title:a.titleThumbnailView,view:e},{id:"tile",title:a.titleTileView,view:e,itemView:s},{id:"table",title:a.titleTableView,view:i},{id:"list",view:t,selectionMode:"oneToOne"}]}},getSwitcherViewOptions:function(){var e=o.clone(this._parent.apply(this,arguments));return e.buttons.pop(),e},onPositionChange:function(e,t){if("left"===t)this.minimize();else this.maximize()},onMinimized:function(){this.dispatchEvent("onSwitch",[null,"list"])},onMaximized:function(){var e=this.switcherView.getValue();this.dispatchEvent("onSwitch",[null,e])}});return r})),define("DS/W3DXComponents/Skeleton",["UWA/Core","UWA/Element","UWA/Utils","UWA/Class/Model","UWA/Class/Collection","UWA/Class/View","UWA/Class/Promise","DS/UIKIT/Mask","DS/UIKIT/Tooltip","DS/W3DXComponents/Views/Layout/PanelSlider/PanelSlider","DS/W3DXComponents/Views/Layout/CardView","DS/W3DXComponents/Views/Layout/ListView","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/Views/Layout/ChannelView","DS/W3DXComponents/Views/Item/SkeletonRootView","DS/W3DXComponents/IdCard","DS/WebAppsFoundations/Router","DS/WebAppsFoundations/AbstractHistory","i18n!DS/W3DXComponents/assets/nls/Skeleton","css!DS/UIKIT/UIKIT.css","css!DS/W3DXComponents/W3DXComponents"],(function(e,t,i,n,s,o,a,r,l,c,h,d,u,p,m,f,g,v,w){"use strict";function S(t,i,n){n=e.merge(n||{},{clone:!0});var s=e.is(i,"function")?i.call(null,t):i||{};return n.clone?e.clone(s,!1):s}function C(t,i){var n=[],s=i&&(!e.is(i.cacheFacets)||i.cacheFacets),o=y(t,i);return t._facets?t._facets:(o&&o.facets&&(n=o.facets,e.is(n,"function")&&(n=n.call(t)),s&&(t._facets=n)),n)}function y(t,i){var n,s=t._idCardOptions;return s||(n=i.idCardOptions,s=e.is(n,"function")?n.call(null,t):n||{},t._idCardOptions=s),s}var _,b,E=n.extend({defaults:{renderer:null,id:null,isLoading:!1,isPanelRendered:!1,panelNode:null,isRoot:!1,facetIndex:null,currentPromises:null},getActiveView:function(){var e=this.get("panelNode"),t=e?e.get("activeNode"):null,i=t?t.get("activeFacet"):null;return i?i.view:null},getActiveModel:function(){var e=this.get("panelNode");return e?e.getActiveModel():null},setup:function(){this.set("currentPromises",{})},destroy:function(e){this.get("panelNode")&&this.get("panelNode").destroy(e)}}),x=n.extend({defaults:{nodeCollection:null,activeNode:null,cardView:null},setup:function(e){var t,i=new D;e||(e={}),this.set("nodeCollection",i),e.addNode&&(t=new V,i.add(t),this.set("activeNode",t))},getActiveModel:function(){var e=this.get("activeNode");return e&&e.get("assignedModel")||null},setActiveNode:function(t){var i=this.get("nodeCollection");if(e.is(t,"number")&&(t=i.at(t)),!t||!(t instanceof n)||i.indexOf(t)<0)throw new Error("Node doesn't belong to this collection.");this.set("activeNode",t)},attachNode:function(e){this.get("nodeCollection").add(e)},destroy:function(e){var t=this.get("nodeCollection"),i=this.get("cardView"),n=0,s=[],o=e||{};function a(e){e.forEach((function(e){e.destroy(o)}))}t.forEach((function(e){s.push(e),0!==n&&n%3==0?(setTimeout(a(s),0),s=[],n=0):n++})),a(s),i&&(i.destroy(),i=null)}}),V=n.extend({defaults:{assignedModel:null,idCard:null,facets:null,activeFacet:null,isRoot:!1,placeHolder:null},setup:function(e){var t=this,i=(e=e||{}).assignedModel,n=i&&i._facetObjs||[];t.set("facets",n),i&&(i._facetObjs=n),t.nodeCollection=new D(e.nodes),t.listenTo(t,"onChange:assignedModel",this.onAssignedModel)},onAssignedModel:function(e,t){if(t){var i=e,n=i.get("facets"),s=t._facetObjs||[];n=n.concat(s),i.set("facets",n),t._facetObjs=n}},destroyFacet:function(t,i,n){var s=e.merge(n||{},{removeFacet:!0}),o=this.get("facets"),a=t.view,r=o.indexOf(t);a&&a.destroy(),e.extend(t,{view:null,viewType:null}),s.deleteRef&&(e.extend(t,{collection:null,reference:null}),s.removeFacet&&o.splice(r,1))},destroyFacets:function(t){var i=e.merge(t||{},{removeFacet:!1}),n=this;n.get("facets").forEach((function(e,t){n.destroyFacet(e,t,i)})),i.deleteRef&&n.set("facets",[])},setActiveFacet:function(e){if(this.get("facets").indexOf(e)<0)throw new Error("Facet does not exist in node.");this.set("activeFacet",e)},getFacet:function(e){var t=e;return this.get("facets").detect((function(e){return e.reference===t}))||null},setFacet:function(e,t){var i,n,s=this,o=t||{},a=s.get("facets");return i=s.getFacet(s,e),n={viewType:o.viewType||null,collection:null,url:null,index:o.index,view:null,reference:e},i?(s.destroyFacet(a,i,{deleteRef:!0}),i=n):a.push(n),n},destroy:function(t){var i=this,n=this.pick(["idCard","facets","assignedModel","placeHolder"]),s=n.idCard,o=n.facets,a=n.placeHolder,r=n.assignedModel,l=t||{};i.destroyFacets(l),a&&(a.destroy(),i.set("placeHolder",null)),s&&(s.destroy(),i.set("idCard",null)),l.deleteRef&&(o.length=0,r&&e.extend(r,{_facets:null,_facetObjs:null}))}}),D=s.extend({model:V,fetch:function(){}}),I="expanded",A="contracted",N="collapsed",k=o.extend({tagName:"div",className:"skeleton",elements:null,panelSlider:null,placeHolder:null,rendererMap:null,rootRenderer:null,rootRendererName:null,widthCache:null,heightCache:null,expandedLayout:[{size:25,className:"left"},{size:75,className:"right"}],contractedLayout:[{size:100,className:"left"}],collapsedLayout:[{size:100,className:"right"}],leftColumnMax:400,leftColumnMin:280,leftColumnDefaultRatio:25,cardBuildOffset:5,state:"contracted",slideCb:null,currentRoute:null,currentRouteSteps:null,tempRouteSteps:null,eventList:null,MAX_UNBUILT_DISTANCE:3,defaultOptions:{widthThreshold:560,rootIdCardOptions:null,responsiveTrigger:function(){return!1},minimizeIdCards:!0,height:"100%",startRoute:null,rendererOptions:{collection:s,view:null,swipe:i.Client.Features.touchEvents&&!i.Client.Features.pointerEvents,idKey:null,viewOptions:null,collectionOptions:null,fetchOptions:null,fetchMode:"always",cacheFacets:!0,idCardOptions:null}},init:function(t,i){i||(i={});var n,s=this,o=i.rootIdCardOptions;if(!t)throw new Error("Renderer map needs to be specified.");if(o&&(!o.model||!o.facets))throw new Error("If you specify rootIdCardOptions you need to specify a model and facets.");s._parent(i),s.rootRendererName=i.root&&t[i.root]?i.root:Object.keys(t)[0],s.rendererMap=function(t,i){var n,s=Object.keys(t),o={};return s.forEach((function(s){n=e.clone(t[s],!1),o[s]=e.merge(n,i)})),o}(t,s.options.rendererOptions),s.currentRouteSteps=[],s.elements={},s.eventList=[],s.options.startRoute=s.options.startRoute||(s.options.rootIdCardOptions?"/":"/"+s.rootRendererName+"/"),s.history=n=s.options.history||new v,s.router=new g({routes:{"(*path)(/?*)":s.goTo.bind(s)},History:n}),e.is(n.started)&&!n.started&&s.history.start({silent:!0})},render:function(){var e=this,t=e.elements;return e.container.addClassName("skeleton-cnt contracted"),t.content=e.container,e.panelSlider||e.buildPanelSlider(),e.router.navigate(e.currentRoute||e.options.startRoute,{trigger:!0}),e},onPostInject:function(){var e=this,t=e.elements,i=e.options;if(!t.content)throw new Error("You must render this view before you try to inject it.");e.panelSlider&&(e.placeHolder=this.getContent().getParent(),e.panelSlider.placeHolder=e.placeHolder,e.setHeight(i.height,{shouldCache:!1}),e.initContainerEvents())},goTo:function(t,n){var s=this,o=s.parseRoute(t||"/",s.rendererMap,{rootIdCardOptions:s.options.rootIdCardOptions,defaultRootRenderer:s.rootRendererName}),a=i.parseQuery(n||""),r=a.f||a.facet,l=a.s||a.state,c=o[o.length-1];if(1===o.length&&s.options.rootIdCardOptions&&!c.get("renderer"))c.set("facetIndex",r?parseInt(r):0);else if(r){if(!c.id)throw new Error("Facet index can only be specified after an ID and at the end of a route path.");o.push(new E({facetIndex:r?parseInt(r):0}))}s.mergeRoutes(o,s.currentRouteSteps||[],{state:l}).then((function(e){var t=e.steps,i=e.config,n=s.currentRouteSteps;s.currentRouteSteps=t,s.tempRouteSteps=null,s.currentRoute=s.getRoute(),s.updateStepStates(t,{minimizeIdCards:s.options.minimizeIdCards,addSelectedClass:i.addSelectedClass}),t.length-1==0||s.areStepsEqual(t.length-1,n,t)||s.eventList.push({name:"onItemSelect",args:[t[t.length-1].get("panelNode").getActiveModel()]}),i.notifyPosition&&s.notifyViewsPosition(),i.emptyEventQueue&&s.throwEvents(s.eventList)})).catch((function(t){t||(t=""),s.eventList=[],e.log("Error building route.\n"+t.stack||t)}))},throwEvents:function(e){var t,i,n=this;!Array.isArray(e)&&(e=[e]),e.forEach((function(e){t=e.context||n,i=e.args.map((function(e){return e?S(n,e,{clone:!1}):null})),t.dispatchEvent(e.name,i)})),e.length=0},parseRoute:function(t,i,n){n||(n={});var s,o,a,r=[];function l(e){throw new Error(e.msg||'Could not find "'+e.renderer+'" in renderer map while parsing route: /'+t+"/.")}function c(t){t||l({renderer:t}),a=r[r.length-1],!function(t){return!e.is(i[t])}(t)?r.push(new E({renderer:t})):(o=t,(!a&&0!==h||a&&a.id)&&l({renderer:t}),a?a.set("id",o):0===h&&l({msg:"You cannot specify an ID directly at the root."}))}if(s=(t=t.trim().replace(/^\/|\/$/g,"")).split("/"),!t)return n.rootIdCardOptions?r.push(new E):r.push(new E({renderer:n.defaultRootRenderer})),r;for(var h=0,d=s.length;h<d;h++)c(s[h]);return r},stringifySteps:function(t,n){n||(n={});var s="";return t.forEach((function(n,o){var a=n.id||null,r=n.get("renderer"),l=n.get("facetIndex"),c=e.is(l);s+="/",r&&(s+=r+"/",s+=a||""),t.length-1===o&&(s+=c?"?"+i.toQueryString({f:l}):"")})),n.state&&(s+=(s.indexOf("?")<0?"?":"&")+i.toQueryString({s:n.state})),s},getFacetIndex:function(e,t){for(var i,n,s=0,o=t.length;s<o;s++)if(n=(i=t[s]).handler._opts,i&&e===n.rendererRef)return s},selectFacet:function(t,i,n,s){s||(s={});var o,r,l=this,c=i[t],h=c.get("panelNode"),d=s.node||h.get("activeNode"),u=d.get("placeHolder"),p=d.get("assignedModel"),m=s.idCard||l.getIdCardAt(t),f=c.get("renderer"),g=n[f],v=c.get("facetIndex"),w={steps:i,stepIndex:t,node:d,placeHolder:u};if(0!==t||m){if(o=C(p,g),f?(r=f,v=l.getFacetIndex(f,o)):e.is(v)&&(r=o[v=Math.min(o.length-1,v)]&&o[v].handler._opts.rendererRef),!r)return a.resolve();e.merge(e.merge(w,{facetIndex:v,rendererRef:r}),o[v]?o[v].handler._opts:{})}else e.merge(w,{key:"_modelKey",fetchOptions:g.fetchOptions?e.clone(g.fetchOptions,!1):null,rendererRef:f});return(m&&m.getContent()?(m.selectFacet(v,{silent:!0}),a.resolve()):a.resolve()).then(l.loadFacet.bind(l,w)).then((function(e){var t,i,n=e.facet,s=l.getState(),o=e.steps,r=n.view,c=d.get("activeFacet").view===r,h=[];if(r)return!c&&l.hideFacet(n,{notify:!1}),r.getContent().isInjected()||(r.inject(u),c&&l.showFacet(n)),s===I?e.stepIndex===o.length-1?h.push({name:"onPositionChange",args:[s,"right"],context:r}):h.push({name:"onPositionChange",args:[s,"left"],context:r}):h.push({name:"onPositionChange",args:[s,null],context:r}),t=l.getViewAt(o.length-1)?l.getViewAt(o.length-1).getContent():null,i=l.getViewAt(o.length-2)?l.getViewAt(o.length-2).getContent():null,s===I?t&&i&&t.isInjected()&&i.isInjected()&&h.push({name:"onRouteChange",args:[l.getRoute(),l]}):t&&t.isInjected()&&h.push({name:"onRouteChange",args:[l.getRoute(),l]}),l.throwEvents(h.concat(l.eventList||[])),a.resolve()})).catch(l.treatError.bind(l)),a.resolve()},areStepsEqual:function(e,t,i){var n,s,o=t[e],a=t[e-1],r=i[e],l=i[e-1],c=["id","renderer"],h=!1;return o&&r&&(o.pick(c),r.pick(c),n=a?a.pick(c):{},s=l?l.pick(c):{},h=n.id&&s.renderer&&n.id===s.id&&n.renderer===s.renderer||0===e),h},updateStepStates:function(t,i){var n,s,o,a,r,l,c=this;i=e.merge(i||{},{minimizeIdCards:!0,addSelectedClass:!1});t.forEach((function(e,h){n=e.get("panelNode"),s=n&&n.get("cardView"),o=c.getIdCardAt(h),l=t[h+1],a=e.getActiveView(),r=l?l.getActiveModel():null,e.id,h!==t.length-1?(s&&s.mute(),i.minimizeIdCards&&o&&o.minimize(),i.addSelectedClass&&a&&r&&c.selectItemView(r,a)):s&&s.unMute()})),c.adaptRootView(),(o=c.getIdCardAt(t.length-1))&&o.maximize()},destroySteps:function(e,t){t||(t={});for(var i=t.from||0,n=t.to||e.length;i<n;i++)e[i]&&e[i].destroy({deleteRef:!0});return Array.isArray(t.oldSteps)&&t.oldSteps.forEach((function(e){e.destroy({deleteRef:!0})})),a.resolve()},mergeRoutes:function(t,i,n){n||(n={});var s,o,r,l,c,h,d,u,p,m=this,f=m.MAX_UNBUILT_DISTANCE,g=0,v=0,w=i.length-1,S=t.length-1,C=0,y=[],_={},b=[];function E(e,i){for(var n=[],s=e,o=i;s<=o;s++)n.push(m.renderStep(s,t));return a.all(n)}function x(e,t){var i,n,s,o,a,r,l=!1,c=["facetIndex","renderer"];return e&&t&&(i=e.pick(c),n=t.pick(c),s=i.renderer,o=n.renderer,a=i.facetIndex,r=n.facetIndex,l=s&&o?s===o:a===r),l}for(;v<=S;v++){var V;s=i[v],o=t[v],h=m.areStepsEqual(v,t,i),r=s&&s.get("renderer"),l=o&&o.get("renderer"),h&&!s.get("isPanelRendered")||!h?(!e.is(p)&&(p=v),g++,h?o.set(s.pick(["panelNode","currentPromises","isRoot"])):s&&s.get("isPanelRendered")&&(V=s)&&b.push(V),o.set("isLoading",v>=t.length-m.expandedLayout.length),o.set("isPanelRendered",!1)):(r&&l&&r!==l&&(w!==S||v!==S)&&y.push(v),t[v].set(s.pick(["isLoading","isPanelRendered","isRoot","currentPromises","panelNode"])))}return C=v-1,m.tempRouteSteps=t,y.forEach((function(e){var i,n,s,o=t[e],a=o.get("panelNode");o.get("isPanelRendered")&&(n=(i=a.get("activeNode")).setFacet(""),s=t[e].getActiveView(),m.switchFacets(n,i.get("activeFacet"),{notify:!1}),i.setActiveFacet(n),s&&(m.eventList.push({name:"onFacetUnselect",args:[m],context:s}),m.deSelectItemView(s)))})),0===p&&0===S||Math.abs(p-S)>=f&&p>0?u=0===C?(m.getState()!==A?m.setContractedLayout({index:C}):a.resolve()).then(m.renderStep.bind(m,C,t)):m.doSliderAction("slideTo",m[m.getState()+"Layout"].length-1,{doSlide:!1}).then((function(){t[0].set({isPanelRendered:!1,isLoading:!1}),b.push(t[0])})).then(E.bind(m,Math.max(C-1,0),C)):S===w&&m.areStepsEqual(S,t,i)&&m.areStepsEqual(Math.max(S-1,0),t,i)&&(e.is(t[C].get("facetIndex"))||t[C].get("renderer"))&&!x(t[C],i[C])?u=m.selectFacet(S,t,m.rendererMap):0===g&&S>=0&&S!==w&&t.length!==i.length-1?(_.notifyPosition=!0,_.emptyEventQueue=!0,m.getViewAt(C)&&m.eventList.push({name:"onRouteChange",args:[m.getRoute(),m]}),m.deSelectItemView(m.getViewAt(C)),u=0===S&&m.state===I?m.setContractedLayout({index:C,animate:!1}):m.doSliderAction("slideTo",C,{animate:!1})):t.length===i.length-1&&m.areStepsEqual(S,t,i)?(_.notifyPosition=!0,_.emptyEventQueue=!0,C=Math.max(C-1,0),d=m.panelSlider.getPanels().length-2,m.deSelectItemView(m.getViewAt(t.length-1)),m.getViewAt(d)&&m.eventList.push({name:"onRouteChange",args:[m.getRoute(),m]}),u=(t[C].get("isPanelRendered")?a.resolve({doSlide:!0}):m.doSliderAction("insertPanel",null,d,{resize:!0,animate:!0}).then((function(){return a.resolve({doSlide:!1})}))).then((function(e){return e||(e={}),0===S&&m.state===I?m.setContractedLayout({index:C}).then(m.renderStep.bind(m,C,t)):e.doSlide?m.doSliderAction("slideBack").then(m.renderStep.bind(m,C,t)):m.renderStep(C,t)}))):m.areStepsEqual(w,i,t)&&S===w+1?(c=m.calculateLayout(),_.addSelectedClass=!0,m.eventList.push({name:"onPositionChange",args:[I,c===I?"left":null],context:t[w].getActiveView()}),u=m.state===A&&c===I?m.renderStep(C,t).then((function(e){return m.setExpandedLayout().then((function(){return a.resolve(e)}))})):m.renderStep(C,t).then((function(e){return m.doSliderAction("slideNext").then((function(){return a.resolve(e)}))}))):w===S&&!m.areStepsEqual(C,t,i)&&m.areStepsEqual(C-1,t,i)?(_.addSelectedClass=!0,u=m.renderStep(C,t)):m.areStepsEqual(C,t,i)&&x(t[C],i[C])&&S===w&&n.state?(_.notifyPosition=!0,_.emptyEventQueue=!0,c=m.calculateLayout(),u=(n.state===N?m.setCollapsedLayout():c===A?m.setContractedLayout():m.setExpandedLayout()).then((function(){return m.getViewAt(C)&&m.eventList.push({name:"onRouteChange",args:[m.getRoute(),m]}),a.resolve()}))):(_.addSelectedClass=!0,u=w>S&&m.panelSlider.getPanels().length>S?m.doSliderAction("slideTo",C).then(E.bind(m,Math.max(C-1,0),C)):E(Math.max(C-1,0),C).then((function(e){var i=m.getRenderedPanelsCount(t,{limit:C}),s=function(){return a.resolve(e)};return n.state===N?m.setCollapsedLayout({steps:t,force:!0,index:i,animate:!1}).then(s):m.getState()!==I?m.setExpandedLayout({animate:!1,index:i}).then(s):m.doSliderAction("slideTo",i,{doSlide:!1}).then(s)}))),u.then((function t(i){return e.is(i,"array")?a.all(i.map(t)):i&&i.render?i.render():a.resolve()})).then((function(){return y.forEach((function(e){m.selectFacet(e,t,m.rendererMap)})),a.resolve()})).then((function(){return m.destroySteps(i,{from:v,oldSteps:b}),a.resolve()})).then((function(){return a.resolve({steps:t,config:_})})).catch(m.treatError.bind(m))},deSelectItemView:function(t){t&&(e.is(t.removeSelectedClasses,"function")?t.removeSelectedClasses():e.is(t.unSelectAll,"function")&&(e.log("Skeleton: 'unSelectAll' is deprecated in favor of 'removeSelectedClasses'."),t.unSelectAll()))},selectItemView:function(t,i){i&&(e.is(i.addSelectedClass,"function")?i.selectItemView(t):e.is(i.selectItemView,"function")&&(e.log("Skeleton: 'unSelectAll' is deprecated in favor of 'removeSelectedClasses'."),i.selectItemView(t,{silent:!0,trigger:!1})))},doSliderAction:function(t){var i=arguments,n=this.panelSlider,s=t;return[].splice.call(i,0,1),e.is(i[i.length-1],"object")||[].push.call(i,{}),new a((function(e){i[i.length-1].callback=e,n[s].apply(n,i)}))},selectItem:function(t){var i,s=this;s.panelSlider.isMuted()||(i=s.getCollectionAt(s.currentRouteSteps.length-1))&&(t instanceof n&&i.get(t)||e.is(t,"number")&&(t=i.at(t)))&&s.onItemViewSelect(t)},getRenderedPanelsCount:function(t,i){i||(i={});for(var n,s=0,o=0,a=e.is(i.limit)?i.limit:t.length;o<a;o++)((n=t[o]).get("isPanelRendered")||n.get("isLoading"))&&s++;return s},renderStep:function(e,t){var i,n,s=this,o=t[e],r=s.panelSlider,l=r.getPanels(),c=s.getRenderedPanelsCount(t,{limit:e});if(!o.get("isPanelRendered")||o.get("isLoading"))return o.set("isPanelRendered",!0),l[c]?(n=c,o.set("isLoading",!1),i=s.loadPanel(e,t,r.getPanel(n)||n)):(n=c,i=s.doSliderAction("insertPanel",null,n).then((function(){return o.set("isLoading",!1),a.resolve()})).then(s.loadPanel.bind(s,e,t,r.getPanel(n)||n))),i},getCollectionAt:function(e){var t=this.getNodeAt(e),i=t?t.get("activeFacet"):null;return i?i.collection:null},treatError:function(t){if(t){e.log("Error: "+(t.reason||t)+(t.reason&&t.reason.stack?"\n"+t.reason.stack:""));var i,n=this,s=t.steps,o=t.stepIndex||0,r=[];n.eventList=[];for(var l=0,c=o;l<c;l++)r.push(s[l].clone());return n.destroySteps(r,t.stepIndex),(i=r[r.length-1])?(i.set("id",null),n.router.navigate(n.stringifySteps(r,{rootIdCardOptions:n.options.rootIdCardOptions}),{trigger:!0})):n.router.navigate(n.options.rootIdCardOptions?"/":"/"+n.rootRendererName+"/",{trigger:!0}),a.reject()}},loadPanel:function(t,i,n){var s,o,r,l,c,h=this,d=h.rendererMap,u=i[t],p=i[t-1],m=p?d[p.get("renderer")]:null,f=p?p.get("currentPromises"):null,g=h.panelSlider;function v(t){var i,n,s,o=t.collection,a=f.fetchCollection;return(i=l.get("activeNode").getFacet(p.get("renderer")))||(i=l.get("activeNode").setFacet(p.get("renderer"))),s=e.merge({_modelId:p?p.get("id"):null},S(null,m.collectionOptions)),n=i.collection||h.createCollection(null,o,s),i.collection=n,f.fetchCollection=a=a||h.doCollectionAction("fetch",n,S(null,m.fetchOptions)),a}function w(s){var o,l,c,f,v,w=r.get("activeNode"),S={};if(s){if(v=m,!(s.length>0))return a.reject({stepIndex:t,steps:i,reason:"Collection is empty."});if(l=s.model,f=p.id,S[v.idKey||l&&l.prototype.idAttribute||"id"]=f,!(o=s.findWhere(S)))return a.reject({stepIndex:t,steps:i,reason:"Model with id '"+f+"' was not found."});w.set("assignedModel",o)}else 0===t&&(w.set("isRoot",!0),r.set("isRoot",!0),v=d[u.get("renderer")]);return r.attachNode(w),c=h.buildPanelContent({node:w,renderer:v,stepIndex:t,step:u,steps:i,parentCollection:s}),e.is(n,"element")?n.setContent(c.el):g.addPanel(c.el,n),r.setActiveNode(w),u.set("currentPromises",{}),p&&p.set("currentPromises",{}),a.resolve(c)}return(r=u.get("panelNode"))||(r=new x({addNode:!0}),u.set("panelNode",r)),p&&!p.get("panelNode")?(l=new x({addNode:!0}),p.set("panelNode",l)):p&&(l=p.get("panelNode")),c=(s=l?l.get("activeNode"):null)?s.get("activeFacet")||s.get("facets")[0]:null,o=c?c.collection:null,new a((function(e,i){return 0===t||o?w(o).then(e).catch(i):(n=f.loadCollection,f.loadCollection=n=n||(m?h.getRendererModules(m,["collection"]):null),n).then(v).then(w).then(e).catch(i);var n}))},getFacet:function(t){var i=this,n=t.node,s=t.rendererRef,o=n.get("activeFacet"),r=n.getFacet(s);return r||(r=n.setFacet(s,{index:t.facetIndex||0})),o===r?(o.view&&i.throwEvents({name:"onFacetSelect",context:o.view,args:[this]}),a.reject("Facet is already selected.")):(r.view?i.switchFacets(r,o,[i]):o&&i.hideFacet(o),a.resolve(e.merge(t,{facet:r})))},renderFacet:function(t){var i,n,s,o,r=this,l=t.rendererRef,c=t.node.get("assignedModel"),h=t.facet,u=t.rendererModules,p=t.steps[t.stepIndex],f=u.collection,g=e.merge(S(c,t.viewOptions),{model:c}),v=r.rendererMap[l],w=r.options,C=v?v.fetchMode||"once":null;function y(){return a.resolve(e.merge({fetchArgs:arguments},t))}function _(){e.is(l,"string")&&v?(p.set("renderer",l),p.set("facetIndex",null)):(p.set("renderer",""),p.set("facetIndex",t.facetIndex))}function b(){return"never"!==C&&("once"===C&&0===n.length||"always"===C)&&r.doCollectionAction("fetch",n,S(c,v.fetchOptions)),a.resolve()}return h.view?((n=h.view.collection)&&"always"===C&&(s=b().then(y)),_(),s||a.resolve(t)):(e.is(g.itemView,"string")&&e.log("Warning: If the view options contain an item view as an AMD module it will not be loaded dynamically by the skeleton."),e.is(l,"string")&&v?(o=u.view||(0===t.stepIndex?m:d),g=e.merge(0===t.stepIndex?{defaultView:w.useRootChannelView?"channel":"tile"}:{},e.merge(g,S(c,v.viewOptions))),(i=S(c,v.collectionOptions))[t.key]=c||null,h.collection=n=h.collection||r.createCollection(c,f,i),h.view=r.createCollectionView(o,e.extend({collection:n},g)).render(),r.initCollectionViewEvents(h.view),s=b().then(y)):((o=u.view)&&(h.view=r.createDetailView(o,g),h.view.render()),s=a.resolve(e.merge(t))),_(),s)},setActiveFacet:function(e){var t=e.node,i=e.facet;return t.setActiveFacet(i),a.resolve(e)},loadFacet:function(t){var i=this,n=i.rendererMap,s=t.node,o=t.rendererRef,l=s.get("assignedModel"),c=t.placeHolder,h=n[o];if(!l)throw new Error("Cannot load facet of uninitialized node");if(t.adaptableView)throw new Error("Adaptable view no longer supported, you should create a parent view that manages both subviews.");return r.mask(c),i.getFacet(t).then(i.setActiveFacet.bind(i)).then((function(t){return t.facet.view?a.resolve(t):h?e.is(o,"string")&&h?i.getRendererModules(h,["view","collection"]):void 0:i.getRendererModules({view:o},["view"])})).then((function(i){return r.unmask(c),a.resolve(e.merge({rendererModules:i},t))})).then(i.renderFacet.bind(i)).then((function(e){var t,s=e.steps[e.stepIndex],o=e.facet.view,r=n[s.get("renderer")]||{},l=s.id,c=o.collection;return o&&c&&l&&((t={})[r.idKey||c.model.prototype.idAttribute||"id"]=l,0===c.length?c.addEventOnce("onSync",(function(){i.selectItemView(c.findWhere(t),o)})):i.selectItemView(c.findWhere(t),o)),a.resolve(e)})).catch((function(i){return a.reject(i&&i.reason?i:e.merge(t,{reason:i}))}))},getRendererModules:function(t,i){var n,s,o={},r=[],l=[];return i||(i=[]),i.forEach((function(i){var n=t[i];switch(e.typeOf(n)){case"string":r.push(n),l.push(i);break;case"class":case"function":o[i]=n;break;default:o[i]=null}})),(n=r,s=[],e.is(n,"string")?s[0]=n:s=n,new a((function(e,t){require(s,(function(){e.call(null,Array.prototype.slice.call(arguments))}),(function(e){t("Error loading modules."+(e&&e.requireModules?e:""))}))}))).then((function(e){return Array.prototype.forEach.call(e,(function(e,t){e&&(o[l[t]]=e)})),a.resolve(o)}))},buildPanelSlider:function(){var e=this,t=new c([],{layout:[{size:1,className:"left"}],container:e.getContent(),events:{onSlideNext:e.onSlideEnd.bind(e,"right"),onSlideBack:e.onSlideEnd.bind(e,"left")}});t.render(),e.panelSlider=t},onSlideEnd:function(e){var t=this,i=t.getSteps();function n(e){var i;switch(t.getState()){case I:i=t.expandedLayout.length;break;case N:i=t.collapsedLayout.length;break;case A:i=t.contractedLayout.length}return e.call(t,i-1)}switch(e){case"left":t.eventList.push({name:"onSlide",args:[n.bind(t,t.getViewAt),n.bind(t,t.getModelAt),"left"]});break;case"right":t.eventList.push({name:"onSlide",args:[t.getViewAt.bind(t,i.length-1),t.getModelAt.bind(t,i.length-1),"right"]})}},onActionClick:function(e,t,i){var n=this,s=Array.prototype.slice.call(arguments,3),o=n.getNodeAt(t);s.unshift(n.getViewAt(t),n),i.apply(o.get("idCard"),s)},onFacetClick:function(e){var t=Array.prototype.slice.call(arguments,0,0);t=t.concat(Array.prototype.slice.call(arguments,1)),e.apply(this,t)},wrapActionFunction:function(e,t,i){var n=this,s=e,o=i;return function(){var e,i=s.call(t.get("assignedModel"),arguments);return i&&Array.isArray(i)&&(e=n.wrapActions(i,t,o)),e}},wrapFacetFunction:function(e,t){var i=this,n=t,s=n.node;return function(){var t,o=s.get("assignedModel"),a=o._facets||e.call(o,arguments);return a&&Array.isArray(a)&&(t=i.wrapFacets(a,n)),t}},wrapFacets:function(t,i){var n=this;return t.map((function(t,s){var o=e.clone(t.handler),a=e.clone(i,!1);return e.merge(a,{facetIndex:s}),e.merge({handler:o?n.onFacetClick.bind(n,o,a):null},t)}))},wrapActions:function(t,i,n){var s=this;return t.map((function(t){var o=e.clone(t.handler);return e.merge({handler:s.onActionClick.bind(s,i.model,n,o)},t)}))},createIdCard:function(t,i,n,s,o){var a,r=this,l=e.clone(o,!1)||{},c=l.actions,h=l.facets;return l.model=t.get("assignedModel"),l.selectedFacet=null,Array.isArray(c)?l.actions=r.wrapActions(c,t,n):e.is(c,"function")&&(a=e.clone(l.actions),l.actions=r.wrapActionFunction(a,t,n)),Array.isArray(h)?l.facets=r.wrapFacets(h,{node:t,placeHolder:i,stepIndex:n,steps:s}):e.is(h,"function")&&(a=e.clone(l.facets),l.facets=r.wrapFacetFunction(a,{node:t,placeHolder:i,stepIndex:n,steps:s})),new f(l)},buildPanelTitle:function(t,i){return e.createElement("div",{class:this.className+"-id-cnt",html:[i]})},initCollectionViewEvents:function(e){e.addEvent("onItemViewSelect",this.onItemViewSelect.bind(this))},initContainerEvents:function(){t.addEvent.call(this.container,"resize",this.onResize.bind(this)),this.panelSlider._removeEvents()},getModelPosition:function(e){for(var t,i,n,s=0,o=this.currentRouteSteps,a=o.length;s<a&&(n=(i=o[s]).get("panelNode"),!i.get("isPanelRendered")||!n||(t=n.get("activeNode").get("activeFacet")).collection!==e.collection);s++);return{panelIndex:s,facet:t}},notifyViewsPosition:function(){var e,t,i=this,n=i.currentRouteSteps.length-1,s=i.getState();s===I?(e=i.getViewAt(n-1),t=i.getViewAt(n),e&&i.eventList.push({name:"onPositionChange",args:[s,"left"],context:e}),t&&i.eventList.push({name:"onPositionChange",args:[s,"right"],context:t})):(e=i.getViewAt(n))&&i.eventList.push({name:"onPositionChange",args:[s,null],context:e})},switchViews:function(e,t){e.getContent().addClassName("push"),t.getContent().removeClassName("push")},createCollectionView:function(e,t){return new e(t)},createDetailView:function(e,t){return new e(t)},buildPanelContent:function(e){var t=this,i=e.node,n=e.renderer,s=t.buildNodeContent(e);return{el:[t.buildPanelControls(i),n&&n.swipe&&e.parentCollection?t.createCardView(s.el,e):s.el],render:s.render}},buildPanelControls:function(){var t,i,n=this,s=e.createElement;return t=s("div",{class:"fonticon fonticon-clickable fonticon-left-open skeleton-ctrl-back",events:{click:function(){n.slideBack(),_.hide()}}}),i=s("div",{class:"fonticon fonticon-clickable  fonticon-expand-collapse-panel  skeleton-ctrl-collapse",events:{click:function(){n.toggleCollapse(),b.hide()}}}),_&&_.destroy(),_=new l({position:"right",target:t,body:w.backIcon,offset:{x:0,y:0}}),b&&b.destroy(),b=new l({position:"bottom",target:i,body:w.collapseIcon,offset:{x:0,y:0}}),s("div",{class:"skeleton-ctrl",html:[t,i]})},buildNodeContent:function(t){var i,s,o,a,r=this,l=r.options,c=t.node,h=t.stepIndex,d=t.steps,u=t.renderer,p=e.createElement,m=p("div",{class:"skeleton-panel"}),f=p("div",{class:"facetviews"}),g="If you specify rootIdCardOptions you need to specify a model and facets.";if(0===h)if(l.rootIdCardOptions){if(!(s=y(a={},{idCardOptions:l.rootIdCardOptions})).facets)throw new Error(g);if(!s.model)throw new Error(g);i=s.model,e.extend(i,a),c.set("assignedModel",i),o=r.createIdCard(c,f,h,d,s),c.set("idCard",o),r.buildPanelTitle(c,o).inject(m)}else r.buildPanelTitle(c,null).inject(m),c.set("assignedModel",new n);else i=c.get("assignedModel"),s=y(i,u),o=r.createIdCard(c,f,h,d,s),c.set("idCard",o),r.buildPanelTitle(c,o).inject(m);return f.inject(m),c.set("placeHolder",f),{el:m,render:function(){var t=e.merge({},{idCard:s?o:null,node:c});return r.selectFacet(h,d,r.rendererMap,t)}}},createCardView:function(t,i){var n,s,o=this,a=(i=e.clone(i,!1)).step,r=i.parentCollection,l=a.get("panelNode"),c=l.get("cardView"),d=l.get("activeNode").get("assignedModel"),u=r.indexOf(d),p=o.cardBuildOffset;return c&&c.destroy(),s=Math.min(p,u),(n=function(e,t){for(var i=[];e<t;e++)r.at(e)&&i.push(null);return i}(u-p,u+p))[s]=t,(c=new h(n,{index:s,events:{onShowCard:o.onShowCard.bind(o,i,u),onStartDrag:o.onStartDrag.bind(o,i),onEndDrag:o.onEndDrag.bind(o,i)}})).render(),l.set("cardView",c),c},onShowCard:function(e,t,i,n,s){if(n._dragEvent){var o,a,r=this,l=e.parentCollection,c=n._dragEvent,h=c.ghostContent,d=c.nextModelIndex,u=l.at(d),p=c.direction,m=s.index,f=r.cardBuildOffset;(o=r.getViewAt(e.steps.length-2))&&o.selectItemView&&o.selectItemView(u,{silent:!0}),h&&h.content.render(),"right"===p?(a=g(d-f,d),i.addCards(a,{where:"before"})):(a=g(d+1,d+f),i.addCards(a)),r.dispatchEvent("onItemSelect",u),delete n._dragEvent}function g(e,t){for(var n,s=[],o=e,a=t;o<a;o++)n=o-d+m,l.at(o)&&!i.getCardAt(n)&&s.push(null);return s}},onStartDrag:function(e,t,i,n){var s,o,a,r,l,c=e.step,h=e.parentCollection,d=c.get("panelNode"),u=d.get("activeNode"),p=h.indexOf(u.get("assignedModel")),m=this.getDragNextIndex(p,n),f=m.nextModelIndex,g=m.nextCardIndex;f<0||p<0||(s=h.at(f))&&(r=d.get("nodeCollection").findWhere({assignedModel:s}),l={currModelIndex:p,nextModelIndex:f,nextCardIndex:g,ghostContent:null,direction:n.direction,collection:h},r?l.newActiveNode=r:(o=new V({assignedModel:s}),e.node=o,a=this.buildNodeContent(e),t.setCardContent(a.el,g),l.ghostContent={node:o,content:a}),i._dragEvent=l)},onEndDrag:function(e,t,i,n){if(i._dragEvent){var s,o,a,r=n.didSnap,l=i._dragEvent,c=e.step.get("panelNode"),h=l.ghostContent,d=h?h.node:l.newActiveNode;r?(a=d.get("assignedModel"),c.attachNode(d),c.setActiveNode(d),(s=this.currentRouteSteps[e.stepIndex-1])&&(o=this.rendererMap[s.get("renderer")],s.set(s.idAttribute,a.get(o.idKey||a.idAttribute||"id")))):c.get("nodeCollection").get(d)||d.destroy()}},getDragNextIndex:function(e,t){var i,n;return"left"===t.direction?(n=e+1,i=t.index):(n=e-1,i=t.index-1),{nextCardIndex:i,nextModelIndex:n}},doCollectionAction:function(t,i,n){return n||(n={}),new a((function(s){i[t](e.merge({onComplete:function(){s.apply(null,arguments),n.onComplete&&n.onComplete.apply(null,arguments)},onFailure:function(){s.apply(null,arguments),n.onFailure&&n.onFailure.apply(null,arguments)}},n))}))},createCollection:function(e,t,i){return new t(null,i)},onItemViewSelect:function(){var t,i,n,s,o,a,r,l,c=this,h=arguments[arguments.length-1],d=h.model||h,u=c.getModelPosition(d).panelIndex,p=c.expandedLayout.length,m=c.getModelAt(u+1);if(!c.panelSlider.isMuted())if(s=c.currentRouteSteps.map((function(e){return e.clone()})),m&&(d===c.getModelAt(u+1)||m.id&&d.id&&m.id===d.id))c.throwEvents({name:"onFacetSelect",args:[c],context:c.getViewAt(u+1)});else{if(u===s.length-p&&(t=s[u+1],s.pop()),n={facetIndex:0},o=s[u],l=C(d,a=c.rendererMap[o.get("renderer")]),!(i=d.get(a.idKey||d.idAttribute||"id")))throw new Error("Every model must specify an ID, either through the 'id' property of the model or the one specified by the 'idKey' property of the renderer.");0!==l.length?(o.set(o.idAttribute,i),s.splice(u+1,s.length-1,new E(n)),r={rootIdCardOptions:c.options.rootIdCardOptions,state:c.getState()===N?N:null},c.router.navigate(c.stringifySteps(s,r),{trigger:!0}),t&&setTimeout(t.destroy.bind(t),0)):e.log("It is not possible to select an item that has no facets.")}},calculateLayout:function(t){var i=this,n=t||{},s=e.is(n.respTrigger)?n.respTrigger:i.callResponsiveTrigger(),o=i.options;return(n.width||i.widthCache||i.container.getDimensions().innerWidth)>=o.widthThreshold||s?I:A},onResize:function(e){var t,i,n,s=this,o=e||{},r=s.container.getDimensions().innerWidth,l=s.currentRouteSteps,c=s.panelSlider,h=s.state;if(0!==r&&s.widthCache!==r||o.force){if(s.widthCache=r,c._cachedWidth=r,n=s.callResponsiveTrigger(),i=s.calculateLayout({respTrigger:n}),s.adaptRootView({respTriggerOutput:n}),s.state===N||l.length<=1)return void c.refresh();switch(i){case I:t=s.setExpandedLayout({animate:!1});break;case A:t=s.state!==A?s.setContractedLayout({animate:!1}):s.doSliderAction("refresh")}return t.then((function(){return h!==s.state&&s.notifyViewsPosition(),a.resolve()}))}},callResponsiveTrigger:function(e){var t=this;return t.options.responsiveTrigger.call(t,{state:e||t.state})},adaptRootView:function(e){var t=this,i=t.options,n=(e||{}).respTriggerOutput||t.callResponsiveTrigger(),s=i.useRootChannelView,o=t.currentRouteSteps.length-1,a=t.getViewAt(0);s&&0===o&&a&&a.switchView&&(n?a.switchView("tile"):a.switchView("channel"))},setExpandedLayout:function(e){var t=this,i=e||{},n=t.elements.content,s=t.widthCache||t.container.getDimensions().innerWidth,o=.25*s,r=t.expandedLayout[0].size,l=t.leftColumnMin,c=t.leftColumnMax,h=t.leftColumnDefaultRatio;return r=o<=l?l/s*100:o>=c?c/s*100:h,t.expandedLayout[0].size=r,t.expandedLayout[1].size=100-r,t.doSliderAction("setLayout",t.expandedLayout,i).then((function(){return n.removeClassName(A),n.removeClassName(N),n.addClassName(I),t.state=I,a.resolve()}))},setContractedLayout:function(e){var t=this,i=t.elements.content,n=e||{};return t.doSliderAction("setLayout",t.contractedLayout,n).then((function(){return i.removeClassName(I),i.removeClassName(N),i.addClassName(A),t.state=A,a.resolve()}))},slideBack:function(){var e,t,i=this;i.panelSlider.isMuted()||1===i.currentRouteSteps.length||((t=i.currentRouteSteps.map((function(e){return e}))).pop(),(e=t[t.length-1])&&e.set("id",null),i.router.navigate(i.stringifySteps(t,i.options),{trigger:!0}))},setCollapsedLayout:function(t){t||(t={});var i=this,n=i.elements.content,s=t.steps||i.currentRouteSteps,o=i.collapsedLayout;return i.panelSlider.isMuted()||s.length<=1||i.state===A&&e.is(t.force)&&!t.force?a.resolve():(i.state!==N?i.doSliderAction("setLayout",o,t).then((function(){return n.removeClassName(I),n.removeClassName(A),n.addClassName(N),i.state=N,a.resolve()})):a.resolve()).catch((function(t){e.log("Skeleton: Error modifying collapsed layout "+(t?t.stack||t:""))}))},toggleCollapse:function(){var e=this;e.router.navigate(e.stringifySteps(e.currentRouteSteps,{rootIdCardOptions:e.options.rootIdCardOptions,state:e.getState()===N?"auto":N}),{trigger:!0})},getViewAt:function(e){var t=this.getSteps(),i=t[e]?t[e].get("panelNode"):null,n=i?i.get("activeNode"):null,s=n?n.get("activeFacet"):null,o=s?s.view:null;return s?o:null},getNodeAt:function(e){var t=this.getSteps(),i=t[e]?t[e].get("panelNode"):null;return i?i.get("activeNode"):null},getIdCardAt:function(e){var t=this.getNodeAt(e);return t?t.get("idCard"):null},getModelAt:function(e){var t=this.getNodeAt(e);return t?t.get("assignedModel"):null},getCurrentPanelIndex:function(){return this.getSteps().length-1},setHeight:function(t,i){var n=this,s=n.getContent(),o=e.merge(i||{},{shouldCache:!0});if(!s)throw new Error("Content has not yet been created.");switch(n.heightCache=o.shouldCache?t:n.heightCache,e.typeOf(t)){case"string":s.setStyle("height",t);break;case"number":s.setStyle("height",t+"px")}},getState:function(){return this.state},getSkeletonState:function(){return e.log("Skeleton: `getSkeletonState` is deprecated, use `getState` instead."),this.getState.apply(this,arguments)},getSteps:function(){return this.tempRouteSteps||this.currentRouteSteps},getRoute:function(){var e=this,t=e.getState();return this.stringifySteps(e.getSteps(),{rootIdCardOptions:e.options.rootIdCardOptions,state:t===N?t:null})},setRoute:function(e){this.router.navigate(e,{trigger:!0})},getActiveIdCard:function(){var e=this.getNodeAt(this.getSteps().length-1);return e?e.get("idCard"):null},refresh:function(){this.onResize({force:!0})},hideFacet:function(t,i){if(t){var n=i||{},s=t.view,o=!e.is(n.notify)||n.notify;s&&(s.getContent().hide(),o&&this.throwEvents({name:"onFacetUnselect",args:[this],context:s}))}},showFacet:function(t,i){if(t){var n=i||{},s=t.view,o=!e.is(n.nofity)||n.notify;s&&(s.getContent().show(),o&&this.throwEvents({name:"onFacetSelect",args:[this],context:s}))}},switchFacets:function(e,t,i){this.hideFacet(t,i),this.showFacet(e,i)},destroy:function(){var t=this,i=t.currentRouteSteps;t.stopListening();try{i.forEach((function(e){e.destroy({deleteRef:!0})})),t.panelSlider&&(t.panelSlider.destroy(),t.panelSlider=null)}catch(t){e.log("Skeleton: Error destroying skeleton: "+t.stack)}i.length=0,t.tempRouteSteps&&(t.tempRouteSteps.length=0),t.rendererMap=null,t._parent.apply(t,arguments)}});return e.extend(k,{getRendererHandler:function(t,i){var n,s=t,o=e.merge(i||{},{key:"_modelKey",fetchOptions:null,viewOptions:null});if(!e.is(s,"string")&&!e.is(s,"class"))throw new Error("Renderer must be a string that references another renderer or a Constructor.");return n=function(t){var i=this,n=i.currentRouteSteps.map((function(e){return e.clone()})),o=n[t.stepIndex];e.is(s,"string")&&i.rendererMap[s]?(o.set("renderer",s),o.set("facetIndex",null)):(o.set("facetIndex",t.facetIndex),o.set("renderer",null)),o.set("id",null),n.splice(t.stepIndex+1,n.length),this.router.navigate(i.stringifySteps(n,{rootIdCardOptions:i.options.rootIdCardOptions,state:i.getState()}),{trigger:!0})},o.rendererRef=s,n._opts=o,n}}),k}));