define("DS/Mesh/ThreeJS_Base","undefined"!=typeof localStorage&&"true"===localStorage.getItem("__WEBVISU_USE_LOGGER__")?["DS/Visualization/Logger"]:[],(function(t){"use strict";var i=i||{REVISION:"57"};i.defineSlowProperty=function(t,i){Object.defineProperty(t.prototype,i,{get:function(){return this._slowProperties[i]},set:function(t){this._slowProperties[i]=t}})},i.definePackedBoolean=function(t,i){void 0===t.prototype.nbBitBooleans&&(t.prototype.nbBitBooleans=0);var e=Math.pow(2,t.prototype.nbBitBooleans++);Object.defineProperty(t.prototype,i,{set:function(t){t?this._bitsContainer|=e:this._bitsContainer&=~e},get:function(){return 0!=(this._bitsContainer&e)}})},i.extend=function(t,i){if(Object.keys)for(var e=Object.keys(i),n=0,r=e.length;n<r;n++){var s=e[n];Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))}else{var a={}.hasOwnProperty;for(var s in i)a.call(i,s)&&(t[s]=i[s])}return t},String.prototype.hashCode=function(){var t,i=0;if(0===this.length)return i;for(t=0;t<this.length;t++)i=(i<<5)-i+this.charCodeAt(t),i|=0;return i},i.SplitTrimStickString=function(t){return t.split("\n").map((t=>t.trim())).filter((t=>t.length>0&&!t.startsWith("//"))).join("\n")},String.prototype.includes||(String.prototype.includes=function(t,i){return"number"!=typeof i&&(i=0),!(i+t.length>this.length)&&-1!==this.indexOf(t,i)}),Array.prototype.findLastIndex||Object.defineProperty(Array.prototype,"findLastIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');if("function"!=typeof t)throw new TypeError("predicate must be a function");return Array.from(this).reverse().findIndex(t)},configurable:!0,writable:!0}),Uint32Array.prototype.slice||Object.defineProperty(Uint32Array.prototype,"slice",{value:function(t,i){return new Uint32Array(Array.prototype.slice.call(this,t,i))}}),Float32Array.prototype.slice||Object.defineProperty(Float32Array.prototype,"slice",{value:function(t,i){return new Float32Array(Array.prototype.slice.call(this,t,i))}}),"function"!=typeof Object.values&&Object.defineProperty(Object,"values",{value:function(t){var i=[];for(var e in t)t.hasOwnProperty(e)&&i.push(t[e]);return i},writable:!0,configurable:!0}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},writable:!0,configurable:!0}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var i=Object(this),e=i.length>>>0,n=arguments[1]>>0,r=n<0?Math.max(e+n,0):Math.min(n,e),s=arguments[2],a=void 0===s?e:s>>0,o=a<0?Math.max(e+a,0):Math.min(a,e);r<o;)i[r]=t,r++;return i}}),Float32Array.prototype.fill||(Float32Array.prototype.fill=Array.prototype.fill),Uint32Array.prototype.fill||(Uint32Array.prototype.fill=Array.prototype.fill),i._MaxBitMask=30,i.getWebVisualizationLevel=function(){return 428},i.getWebVisualizationFDLevel=function(){return 0},i._webglPerformanceProfile=function(){return"true"===localStorage.getItem("__WEBVISU_USE_HIGHPERFORMANCE_PROFILE__")?"high-performance":"default"};{let t=["EDGE","WIRE_EDGE","BOUNDARY_EDGE","SHARP_EDGE","SMOOTH_EDGE","HIDDEN_SEAM_EDGE","BOUNDARY_POINT","SHARP_POINT","SMOOTH_POINT","SURFACIC_POINT","FREE_POINT","HIDDEN_SEAM_POINT","INFINITE_FACE","FACE","UNKNOWN","_OUTLINE","_SECTION_LINE","AXIS_SYSTEM","UNKNOWN_2D","UNKNOWN_1D","UNKNOWN_0D","_HIGH_CURVATURE_EDGE"];if(t.length>i._MaxBitMask)throw"too many geom types";let n=new Object;for(var e=0;e<t.length;e++)n[t[e]]=1<<e;i.GeomTypeEnum=n,i.AllGeomTypesMask=(1<<t.length)-1}i.EffectState={Disabled:0,Enabled:1,Auto:2},i._VisuFilterType={GAS_INHERIT:0,POLYGON_OFFSET:1,ZMODE:2,GEOM_TYPE:3,DO_NOT_PICK_UNDER:4,LOOK:5,_STATIC_GEOM_TYPE:6,FURTIVE:7,_MATERIAL_TO_USE:8,_SIDE:9,DYNAMIC_MODE:10,FILTERED:11,LOD:12,_LOD_BRANCH:13,PLANE_VIEW_MODE:14,NO_HIGHLIGHT:15},i._InfiniteGeomertryType={REF_PLANE:1,AXIS_SYSTEM:2,CANONICAL:3,ARROWS:4,VOXEL_REP:5,TESSELATION:6,CURVED_PIPE:7},i._FilterType={SCISSORFILTER:1,LAYERFILTER:2,CLIPPINGFILTER:3,ADVANCEDLAYEROVERRIDEFILTER:4,VIEWMODE:5,DECALS:6},i.FixedSizeFiltering={Include:0,Exclude:1,CenterOnly:2},i.PriorityMode={ClassicPriority:0,SceneGraphOrder:1,Advanced:2,DepthPriority:3,ClassicPriority2D:4},i.AlphaTestMode={DISCARD:0,DISCARD_OR_OPAQUE:1},i.FilterMode={Replace:0,Cumulative:1,None:2,V4Master:3},i.PlaneViewMode={NORMAL:0,NO_DISPLAY:4,LOWLIGHT:1,NO_PICK:2,LOWLIGHT_NO_PICK:3},i.PolygonOffsetForceStatus={DEFAULT:0,ENABLED:1,DISABLED:2},i.TextureBlendOperations={BLEND:0,MODULATE:1,DECAL:2,REPLACE:3,IGNORE:4,KEEP_DEFAULT:5},i.AnchorPoint={BOTTOM_LEFT:0,BOTTOM_CENTER:1,BOTTOM_RIGHT:2,BASE_LEFT:3,BASE_CENTER:4,BASE_RIGHT:5,TOP_LEFT:6,TOP_CENTER:7,TOP_RIGHT:8},i.MappingType={DISABLED:-1,NONE:0,PLANAR:1,SPHERICAL:2,CUBIC:3,FINITE_CYLINDRICAL:4,INFINITE_CYLINDRICAL:5,SPHERICAL_NORMALIZED:6,INFINITE_CYLINDRICAL_NORMALIZED:7,INFINITE_CYLINDRICAL_NORM_ANGLE_PRES:8},i.MappingTransformSemantic={DEFAULT:1,DEFAULT_MULTIPLICATION:1,SEPARATE_TRANSLATION:2,ROTATION_AROUND_CENTER:3},i.CGR_WRAPPING={REPEAT:1,CLAMP_TO_EDGE:0,CLAMP_TO_BORDER:2,MIRRORED_REPEAT:3},i.ToGLSLTypes={f:{t:"float",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},fv1:{t:"float",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},v2:{t:"vec2",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},v2v:{t:"vec2",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},fv2:{t:"vec2",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},v3:{t:"vec3",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},v3v:{t:"vec3",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},fv3:{t:"vec3",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},v4:{t:"vec4",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},v4v:{t:"vec4",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},fv4:{t:"vec4",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},c:{t:"vec3",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},m2:{t:"mat2",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},m2v:{t:"mat2",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},m3:{t:"mat3",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},m3v:{t:"mat3",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},m4:{t:"mat4",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},m4v:{t:"mat4",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},i:{t:"int",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},iv1:{t:"int",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},i2:{t:"ivec2",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},iv2:{t:"ivec2",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},i3:{t:"ivec3",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},iv3:{t:"ivec3",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},i4:{t:"ivec4",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},iv4:{t:"ivec4",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},b:{t:"bool",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},bv1:{t:"bool",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},b2:{t:"bvec2",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},bv2:{t:"bvec2",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},b3:{t:"bvec3",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},bv3:{t:"bvec3",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},b4:{t:"bvec4",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},bv4:{t:"bvec4",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},t2:{t:"sampler2D",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},tu2:{t:"highp usampler2D",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},t2v:{t:"sampler2D",isArray:!0,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},tc:{t:"samplerCube",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},tcv:{t:"samplerCube",isArray:!0,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1}},i.ToWGSLTypes={f:{t:"f32",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},fv1:{t:"f32",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!0,isInt:!1},v2:{t:"vec2f",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},fv2:{t:"vec2f",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!0,isInt:!1},v2v:{t:"vec2f",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},v3:{t:"vec3f",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},fv3:{t:"vec3f",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},v3v:{t:"vec3f",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!0,isInt:!1},v4:{t:"vec4f",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},fv4:{t:"vec4f",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},v4v:{t:"vec4f",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},c:{t:"vec3f",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},m2:{t:"mat2x2f",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},m2v:{t:"mat2x2f",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},m3:{t:"mat3x3f",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},m3v:{t:"mat3x3f",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},m4:{t:"mat4x4f",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!0,isInt:!1},m4v:{t:"mat4x4f",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!1},i:{t:"i32",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},iv1:{t:"i32",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},i2:{t:"vec2i",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},iv2:{t:"vec2i",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!0},i3:{t:"vec3i",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},iv3:{t:"vec3i",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!0},i4:{t:"vec4i",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},iv4:{t:"vec4i",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},u:{t:"u32",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},uv1:{t:"u32",isArray:!0,isTexture:!1,canBeUniform:!0,canBeUniformArray:!1,canBeVarying:!1,isInt:!0},u2:{t:"vec2u",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},uv2:{t:"vec2u",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!0},u3:{t:"vec3u",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},uv3:{t:"vec3u",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!0},u4:{t:"vec4u",isArray:!1,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},uv4:{t:"vec4u",isArray:!0,isTexture:!1,canBeUniform:!0,canBeVarying:!1,isInt:!0},b:{t:"bool",isArray:!1,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},bv1:{t:"bool",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},b2:{t:"vec2<bool>",isArray:!1,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},bv2:{t:"vec2<bool>",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},b3:{t:"vec3<bool>",isArray:!1,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},bv3:{t:"vec3<bool>",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},b4:{t:"vec4<bool>",isArray:!1,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},bv4:{t:"vec4<bool>",isArray:!0,isTexture:!1,canBeUniform:!1,canBeVarying:!1,isInt:!1},t2:{t:"texture_2d<f32>",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},t2ms:{t:"texture_multisampled_2d<f32>",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},tu2:{t:"texture_2d<u32>",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},td2:{t:"texture_depth_2d",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},td2ms:{t:"texture_depth_multisampled_2d",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},t2v:{t:"texture_2d<f32>",isArray:!0,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},tc:{t:"texture_cube<f32>",isArray:!1,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1},tcv:{t:"texture_cube<f32>",isArray:!0,isTexture:!0,canBeUniform:!0,canBeVarying:!1,isInt:!1}},i.CloneStructure=function(t){var e,n,r,s={};for(e in t)if(s[e]={},t[e]instanceof Object)for(n in s[e]={},t[e])(r=t[e][n])instanceof i.Color||r instanceof i.Vector2||r instanceof i.Vector3||r instanceof i.Vector4||r instanceof i.Matrix4?s[e][n]=r.clone():s[e][n]=r instanceof Array?r.slice():r;else(r=t[e])instanceof i.Color||r instanceof i.Vector2||r instanceof i.Vector3||r instanceof i.Vector4||r instanceof i.Matrix4?s[e]=r.clone():s[e]=r instanceof Array?r.slice():r;return s},i._BinaryPrimitives=!1,i.IsIE11=null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),i.IsFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,i.__NoShowForAxisAndPlanesBags=function(){return!0},i.AutomatedTests=function(){return!(!window.__karma__&&!window.__odtplayer__)},i.AutomatedTestsOrWebDriver=function(){var t=!(!navigator.webdriver||localStorage.getItem("WebVisuEnableAAWithWebdriver"));return!(!i.AutomatedTests()&&!t)},i.isIOS=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},i.isAndroid=function(){return navigator.userAgent.match(/(Android)/i)},i.isSamsungBrowser=function(){return navigator.userAgent.match(/(SamsungBrowser)/i)},i.isMacOS=function(){return!i.isIOS()&&navigator.platform.toUpperCase().indexOf("MAC")>=0},i.isLinuxOS=function(){return navigator.platform.toUpperCase().indexOf("LINUX")>=0},i.isAppleDevice=function(){return i.isIOS()||i.isMacOS()},i.isMobile=function(){return i.isIOS()||i.isAndroid()},i.__unrolledHighlight=function(){return!1},i._toFastProperties=function(t){function i(){}i.prototype=t;var e=new i;function n(){return typeof e.foo}return n(),n(),t};{let t=["LARGE_SCALE","NON_UNIFORM_SCALE","COMPRESSED_VERTICES","COMPRESSED_UVS","COMPRESSED_COLORS","COMPRESSED_NORMALS","FIXED_SIZE","BILLBOARD","LIGHT_MAP","PRIMITIVE_HIGHLIGHT","NOZ_OBJECT","DECALS","MAPPING_OPERATOR","SKINNING","SKINNING_INSTANCING","VERTEX_COLORS","DEFAULT_INSTANCING","PLANAR_FACE","PLANE_VIEW_MODE"];if(t.length>i._MaxBitMask)throw"too many program ids";let n=new Object;for(var e=0;e<t.length;e++)n[t[e]]=1<<e;i.ProgramIDs=n}{const t=10;i._MaxRendererID=Math.pow(2,t)-1;let n=["OIT","POLITE_HIGHLIGHT","SKIP_TRANSPAR","NO_COLOR_WRITE","HAS_OVERRIDES","GAMMA_INPUT","GAMMA_OUTPUT","GAMMA_SIMPLE"];if(n.length>i._MaxBitMask-t)throw"too many global program ids";let r=new Object;for(var e=0;e<n.length;e++)r[n[e]]=1<<e+t;i.GlobalProgramIDs=r}i.AssetSource={MANUAL:0,MATERIAL_MANAGER:1},i.__visibleInCurrentSpaceSimple=function(t,i,e,n){var r=!0;if(!(r=i||e?t:!t)&&n&&n.layers)for(var s=n&&n.layers,a=0;a<s.length;a++){var o=s[a].drawableInterval;if(o&&!o.skip(null,null)&&o.gas&&o.gas.isGAS&&(!o.gas._show||o.gas._showFree))return!0}return r};const n=i.__visibleInCurrentSpaceSimple;var r,s,a,o,h;i.__visibleInCurrentSpace=function(t,i,e,r,s){var a=n(t,i,e,r);return s&&s._isFurtiveFiltered()&&(a=!1),a},i.setValuesToObject=function(t,e,n){if(e)for(var r in e){var s=e[r];if(void 0!==s&&!n.has(r)&&r in t){var a=t[r];a instanceof i.Color&&s instanceof i.Color?a.copy(s):a instanceof i.Color?a.set(s):a instanceof i.Vector3&&s instanceof i.Vector3||a instanceof i.Vector2&&s instanceof i.Vector2?a.copy(s):a instanceof Float32Array&&s instanceof Float32Array?t[r]=new Float32Array(s):t[r]=s}}},i.EventDispatcher=function(){var t={};this.addEventListener=function(i,e){void 0===t[i]&&(t[i]=[]),-1===t[i].indexOf(e)&&t[i].push(e)},this.removeEventListener=function(i,e){var n=t[i].indexOf(e);-1!==n&&(t[i][n]=null)},this.dispatchEvent=function(i){var e=t[i.type];if(void 0!==e){i.target=this;for(var n=!1,r=0,s=e.length;r<s;r++)e[r]?e[r].call(this,i):n=!0;if(n){var a=[];for(r=0,s=e.length;r<s;r++)e[r]&&a.push(e[r]);t[i.type]=a}}}},i.VisualizationTraces={_traces:[],info:function(t){var i=new Error,e=t+" - "+(i.stack?i.stack.split("\n")[2]:"");this._traces.push(e)},displayInfo:function(){console.log(this._traces)}},i.Quaternion=function(t,i,e,n){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==n?n:1},i.Quaternion.prototype={constructor:i.Quaternion,set:function(t,i,e,n){return this.x=t,this.y=i,this.z=e,this.w=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},createJSON:function(){return{x:this.x,y:this.y,z:this.z,w:this.w}},setFromJSON:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEuler:function(t,i){var e=Math.cos(t.x/2),n=Math.cos(t.y/2),r=Math.cos(t.z/2),s=Math.sin(t.x/2),a=Math.sin(t.y/2),o=Math.sin(t.z/2);return void 0===i||"XYZ"===i?(this.x=s*n*r+e*a*o,this.y=e*a*r-s*n*o,this.z=e*n*o+s*a*r,this.w=e*n*r-s*a*o):"YXZ"===i?(this.x=s*n*r+e*a*o,this.y=e*a*r-s*n*o,this.z=e*n*o-s*a*r,this.w=e*n*r+s*a*o):"ZXY"===i?(this.x=s*n*r-e*a*o,this.y=e*a*r+s*n*o,this.z=e*n*o+s*a*r,this.w=e*n*r-s*a*o):"ZYX"===i?(this.x=s*n*r-e*a*o,this.y=e*a*r+s*n*o,this.z=e*n*o-s*a*r,this.w=e*n*r+s*a*o):"YZX"===i?(this.x=s*n*r+e*a*o,this.y=e*a*r+s*n*o,this.z=e*n*o-s*a*r,this.w=e*n*r-s*a*o):"XZY"===i&&(this.x=s*n*r-e*a*o,this.y=e*a*r-s*n*o,this.z=e*n*o+s*a*r,this.w=e*n*r+s*a*o),this},setFromAxisAngle:function(t,i){var e=i/2,n=Math.sin(e);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(e),this},toEuler:function(){var t=new i.Vector3;return t.x=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),t.y=Math.asin(2*(this.w*this.y-this.z*this.x)),t.z=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z)),t},setFromRotationMatrix:function(t){var i,e=t.elements,n=e[0],r=e[4],s=e[8],a=e[1],o=e[5],h=e[9],u=e[2],c=e[6],l=e[10],y=n+o+l;return y>0?(i=.5/Math.sqrt(y+1),this.w=.25/i,this.x=(c-h)*i,this.y=(s-u)*i,this.z=(a-r)*i):n>o&&n>l?(i=2*Math.sqrt(1+n-o-l),this.w=(c-h)/i,this.x=.25*i,this.y=(r+a)/i,this.z=(s+u)/i):o>l?(i=2*Math.sqrt(1+o-n-l),this.w=(s-u)/i,this.x=(r+a)/i,this.y=.25*i,this.z=(h+c)/i):(i=2*Math.sqrt(1+l-n-o),this.w=(a-r)/i,this.x=(s+u)/i,this.y=(h+c)/i,this.z=.25*i),this},toRotationMatrix:function(){var t=2*this.x,e=2*this.y,n=2*this.z,r=t*this.w,s=e*this.w,a=(this.w,t*this.x),o=(this.x,n*this.x),h=e*this.y,u=n*this.y;this.z,(new i.Matrix3).elements;return new i.Vector3(o-s,u+r,1-(a+h))},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var t=this.length();return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},multiply:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,n=t.y,r=t.z,s=t.w,a=i.x,o=i.y,h=i.z,u=i.w;return this.x=e*u+s*a+n*h-r*o,this.y=n*u+s*o+r*a-e*h,this.z=r*u+s*h+e*o-n*a,this.w=s*u-e*a-n*o-r*h,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},multiplyVector3:function(t){return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},log:function(){if(Math.abs(this.w)>=1)return this.w=0,this;var t=Math.acos(this.w),i=Math.sin(t);if(this.w=0,Math.abs(i)<.001)return this;var e=t/i;return this.x*=e,this.y*=e,this.z*=e,this},exp:function(){var t=this.length();this.w=Math.cos(t);var i=Math.sin(t);if(Math.abs(t)<.001)return this;var e=i/t;return this.x*=e,this.y*=e,this.z*=e,this},slerp:function(t,i){var e=this.x,n=this.y,r=this.z,s=this.w,a=s*t.w+e*t.x+n*t.y+r*t.z;if(a<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,a=-a):this.copy(t),a>=1)return this.w=s,this.x=e,this.y=n,this.z=r,this;var o=Math.acos(a),h=Math.sqrt(1-a*a);if(Math.abs(h)<.001)return this.w=.5*(s+this.w),this.x=.5*(e+this.x),this.y=.5*(n+this.y),this.z=.5*(r+this.z),this;var u=Math.sin((1-i)*o)/h,c=Math.sin(i*o)/h;return this.w=s*u+this.w*c,this.x=e*u+this.x*c,this.y=n*u+this.y*c,this.z=r*u+this.z*c,this},intermediatePoint:function(t,e,n){return r||(r=new i.Quaternion),s||(s=new i.Quaternion),r.copy(e).inverse().multiply(t).log(),s.copy(e).inverse().multiply(n).log(),r.add(s).multiplyScalar(-.25),this.copy(e).multiply(r.exp()),this.normalize(),this},squad:function(t,e,n,r,s){this.copy(t).slerp(r,s,!1),this.normalize();var a=(new i.Quaternion).copy(e).slerp(n,s);return a.normalize(),this.slerp(a,2*s*(1-s)).normalize()},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},clone:function(){return new i.Quaternion(this.x,this.y,this.z,this.w)}},i.Quaternion.slerp=function(t,i,e,n){return e.copy(t).slerp(i,n)},i.Curve=function(){},i.Curve.prototype.getPoint=function(t){return console.log("Warning, getPoint() not implemented!"),null},i.Curve.prototype.getPointAt=function(t,i){var e=this.getUtoTmapping(t,i);return this.getPoint(e)},i.Curve.prototype.getPoints=function(t){t||(t=5);var i,e=[];for(i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},i.Curve.prototype.getSpacedPoints=function(t){t||(t=5);var i,e=[];for(i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},i.Curve.prototype.getLength=function(t){var i=this.getLengths();if(void 0!==t){var e=t*(i.length-1),n=Math.floor(e),r=e-n;return n+1>=i.length?i[n]:(1-r)*i[n]+r*i[n+1]}return i[i.length-1]},i.Curve.prototype.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i,e,n=[],r=this.getPoint(0),s=0;for(n.push(0),e=1;e<=t;e++)s+=(i=this.getPoint(e/t)).distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n},i.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},i.Curve.prototype.getUtoTmapping=function(t,i){var e,n=this.getLengths(),r=0,s=n.length;e=i||t*n[s-1];for(var a,o=0,h=s-1;o<=h;)if((a=n[r=Math.floor(o+(h-o)/2)]-e)<0)o=r+1;else{if(!(a>0)){h=r;break}h=r-1}if(n[r=h]==e)return r/(s-1);var u=n[r];return(r+(e-u)/(n[r+1]-u))/(s-1)},i.Curve.prototype.getTangent=function(t){var i=1e-4,e=t-i,n=t+i;e<0&&(e=0),n>1&&(n=1);var r=this.getPoint(e);return this.getPoint(n).clone().sub(r).normalize()},i.Curve.prototype.getTangentAt=function(t){var i=this.getUtoTmapping(t);return this.getTangent(i)},i.Curve.create=function(t,e){return t.prototype=Object.create(i.Curve.prototype),t.prototype.getPoint=e,t},i.Curve.Utils={tangentQuadraticBezier:function(t,i,e,n){return 2*(1-t)*(e-i)+2*t*(n-e)},tangentCubicBezier:function(t,i,e,n,r){return-3*i*(1-t)*(1-t)+3*e*(1-t)*(1-t)-6*t*e*(1-t)+6*t*n*(1-t)-3*t*t*n+3*t*t*r},tangentSpline:function(t,i,e,n,r){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},interpolate:function(t,i,e,n,r){var s=.5*(e-t),a=.5*(n-i),o=r*r;return(2*i-2*e+s+a)*(r*o)+(-3*i+3*e-2*s-a)*o+s*r+i}},i.QuaternionSpline=function(t){this.controlPts=[],this.tangentPts=[],this.setPoints(t)},i.QuaternionSpline.prototype={constructor:i.QuaternionSpline,setPoints:function(t){this.controlPts=t,t&&this._updateTangents()},clear:function(){this.controlPts=[],this.tangentPts=[]},getNbPoints:function(){return this.controlPts.length},addPoint:function(t){this.controlPts.push(t),this._updateTangents()},insertPoint:function(t,i){return!(t<0||t>this.controlPts.length)&&(this.controlPts.splice(t,0,i),this._updateTangents(),!0)},updatePoint:function(t,i){return!(t<0||t>=this.controlPts.length)&&(this.controlPts[t]=i,this._updateTangents(),!0)},removePoint:function(t){return!(t<0||t>=this.controlPts.length)&&(this.controlPts.splice(t,1),this._updateTangents(),!0)},interpolate:function(t){var i=t*(this.controlPts.length-1),e=Math.floor(i);return this._interpolate(e,i-e)},_interpolate:function(t,e){return t===this.controlPts.length-1||0===e?this.controlPts[t]:1===e?this.controlPts[t+1]:(new i.Quaternion).squad(this.controlPts[t],this.tangentPts[t],this.tangentPts[t+1],this.controlPts[t+1],e)},_updateTangents:function(){var t=this.controlPts.length;if(!(t<2)){this.controlPts[t-1].normalize();for(var e=t-1;e>0;e--)this.controlPts[e-1].normalize(),this.controlPts[e-1].dot(this.controlPts[e])<=0&&this.controlPts[e-1].multiplyScalar(-1);var n=this.controlPts[0].equals(this.controlPts[t-1]);for(e=0;e<t;++e){var r,s,a=this.controlPts[e];e?e===t-1?(r=this.controlPts[e-1],s=n?this.controlPts[1]:a):(r=this.controlPts[e-1],s=this.controlPts[e+1]):(s=this.controlPts[1],r=n?this.controlPts[t-2]:a),this.tangentPts[e]||(this.tangentPts[e]=new i.Quaternion),this.tangentPts[e].intermediatePoint(r,a,s)}}}},i.PositionSpline=function(t){this.controlPts=[],t&&this.setPoints(t)},i.PositionSpline.prototype={constructor:i.PositionSpline,getPointAt:i.Curve.prototype.getPointAt,getLength:i.Curve.prototype.getLength,getLengths:i.Curve.prototype.getLengths,updateArcLengths:i.Curve.prototype.updateArcLengths,getUtoTmapping:i.Curve.prototype.getUtoTmapping,getPoint:function(t){var i=t*(this.controlPts.length-1),e=Math.floor(i);return this._interpolate(e,i-e)},getNbPoints:function(){return this.controlPts.length},setPoints:function(t){this.controlPts=t,this._updateCurve()},clear:function(){this.controlPts=[],this._updateCurve()},addPoint:function(t){this.controlPts.push(t),this._updateCurve()},insertPoint:function(t,i){return!(t<0||t>this.controlPts.length)&&(this.controlPts.splice(t,0,i),this._updateCurve(),!0)},updatePoint:function(t,i){return!(t<0||t>=this.controlPts.length)&&(this.controlPts[t]=i,this._updateCurve(),!0)},removePoint:function(t){return!(t<0||t>=this.controlPts.length)&&(this.controlPts.splice(t,1),this._updateCurve(),!0)},_updateCurve:function(){this.updateArcLengths()},_interpolate:function(t,e){var n=this.controlPts.length;if(n<2)return null;if(t===n-1)return this.controlPts[t];if(0===e)return this.controlPts[t];if(1===e)return this.controlPts[t+1];var r,s,a,o=this.controlPts[0].equals(this.controlPts[n-1]),h=this.controlPts[t];o?(r=t?this.controlPts[t-1]:this.controlPts[n-2],s=t>n-2?this.controlPts[1]:this.controlPts[t+1],a=t===n-1?this.controlPts[2]:t===n-2?this.controlPts[1]:this.controlPts[t+2]):(r=t?this.controlPts[t-1]:h,s=t>n-2?h:this.controlPts[t+1],a=t>n-3?s:this.controlPts[t+2]);var u=void 0!==this.controlPts[0].w,c=u?new i.Vector4:new i.Vector3;return c.x=this._CatmullInterpolate(r.x,h.x,s.x,a.x,e),c.y=this._CatmullInterpolate(r.y,h.y,s.y,a.y,e),c.z=this._CatmullInterpolate(r.z,h.z,s.z,a.z,e),u&&(c.w=this._CatmullInterpolate(r.w,h.w,s.w,a.w,e)),c},_CatmullInterpolate:function(t,i,e,n,r){var s=.5*(e-t),a=.5*(n-i),o=r*r;return(2*i-2*e+s+a)*(r*o)+(-3*i+3*e-2*s-a)*o+s*r+i}},i.Vector2=function(t,i){this.x=t||0,this.y=i||0},i.Vector2.prototype={constructor:i.Vector2,set:function(t,i){return this.x=t,this.y=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,e=this.y-t.y;return i*i+e*e},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y},toArray:function(){return[this.x,this.y]},clone:function(){return new i.Vector2(this.x,this.y)}},i.Vector3=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0},i.Vector3.prototype={constructor:i.Vector3,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},barycentricCoordinates:function(t,e,n){var r=(new i.Vector3).subVectors(t,this),s=(new i.Vector3).subVectors(e,this),a=(new i.Vector3).subVectors(n,this),o=(new i.Vector3).subVectors(t,e),h=(new i.Vector3).subVectors(t,n),u=1/(new i.Vector3).crossVectors(o,h).length();return{alpha:(new i.Vector3).crossVectors(s,a).length(),beta:(new i.Vector3).crossVectors(a,r).length(),gamma:(new i.Vector3).crossVectors(r,s).length(),normalisationFactor:u}},setFromJSON:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},setFromArray:function(t){return this.x=t[0],this.y=t[1],this.z=t[2],this},createJSON:function(){return{x:this.x,y:this.y,z:this.z}},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},getMaxAxis:function(){var t=0,i=this.x;return this.y>i&&(t=1,i=this.y),this.z>i&&(t=2,i=this.z),t},add:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},sub:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyMatrix3:function(t){var i=this.x,e=this.y,n=this.z,r=t.elements;return this.x=r[0]*i+r[3]*e+r[6]*n,this.y=r[1]*i+r[4]*e+r[7]*n,this.z=r[2]*i+r[5]*e+r[8]*n,this},applyMatrix4:function(t){if(!t)return this;var i=this.x,e=this.y,n=this.z,r=t.elements;return this.x=r[0]*i+r[4]*e+r[8]*n+r[12],this.y=r[1]*i+r[5]*e+r[9]*n+r[13],this.z=r[2]*i+r[6]*e+r[10]*n+r[14],this},applyRotation:function(t){if(!t)return this;var i=this.x,e=this.y,n=this.z,r=t.elements;return this.x=r[0]*i+r[4]*e+r[8]*n,this.y=r[1]*i+r[5]*e+r[9]*n,this.z=r[2]*i+r[6]*e+r[10]*n,this},applyProjection:function(t){var i=this.x,e=this.y,n=this.z,r=t.elements,s=1/(r[3]*i+r[7]*e+r[11]*n+r[15]);return this.x=(r[0]*i+r[4]*e+r[8]*n+r[12])*s,this.y=(r[1]*i+r[5]*e+r[9]*n+r[13])*s,this.z=(r[2]*i+r[6]*e+r[10]*n+r[14])*s,this},applyQuaternion:function(t){var i=this.x,e=this.y,n=this.z,r=t.x,s=t.y,a=t.z,o=t.w,h=o*i+s*n-a*e,u=o*e+a*i-r*n,c=o*n+r*e-s*i,l=-r*i-s*e-a*n;return this.x=h*o+l*-r+u*-a-c*-s,this.y=u*o+l*-s+c*-r-h*-a,this.z=c*o+l*-a+h*-s-u*-r,this},transformDirection:function(t){var i=this.x,e=this.y,n=this.z,r=t.elements;return this.x=r[0]*i+r[4]*e+r[8]*n,this.y=r[1]*i+r[5]*e+r[9]*n,this.z=r[2]*i+r[6]*e+r[10]*n,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t,this.z/=t):(this.x=0,this.y=0,this.z=0),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this.z<t.z?this.z=t.z:this.z>i.z&&(this.z=i.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},cross:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i);var e=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-e*t.z,this.z=e*t.y-n*t.x,this},crossVectors:function(t,i){return this.x=t.y*i.z-t.z*i.y,this.y=t.z*i.x-t.x*i.z,this.z=t.x*i.y-t.y*i.x,this},applyAxisAngle:function(t,e){return void 0===h&&(h=new i.Quaternion),this.applyQuaternion(h.setFromAxisAngle(t,e)),this},projectOnVector:function(t){return void 0===a&&(a=new i.Vector3),a.copy(t).normalize(),o=this.dot(a),this.copy(a).multiplyScalar(o)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/(this.length()*t.length());return Math.acos(i.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,e=this.y-t.y,n=this.z-t.z;return i*i+e*e+n*n},getPositionFromMatrix:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},getColumnFromMatrix:function(t,i){var e=4*t,n=i.elements;return this.x=n[e],this.y=n[e+1],this.z=n[e+2],this},setEulerFromRotationMatrix:function(t,i){function e(t){return Math.min(Math.max(t,-1),1)}var n=t.elements,r=n[0],s=n[4],a=n[8],o=n[1],h=n[5],u=n[9],c=n[2],l=n[6],y=n[10];return void 0===i||"XYZ"===i?(this.y=Math.asin(e(a)),Math.abs(a)<.99999?(this.x=Math.atan2(-u,y),this.z=Math.atan2(-s,r)):(this.x=Math.atan2(l,h),this.z=0)):"YXZ"===i?(this.x=Math.asin(-e(u)),Math.abs(u)<.99999?(this.y=Math.atan2(a,y),this.z=Math.atan2(o,h)):(this.y=Math.atan2(-c,r),this.z=0)):"ZXY"===i?(this.x=Math.asin(e(l)),Math.abs(l)<.99999?(this.y=Math.atan2(-c,y),this.z=Math.atan2(-s,h)):(this.y=0,this.z=Math.atan2(o,r))):"ZYX"===i?(this.y=Math.asin(-e(c)),Math.abs(c)<.99999?(this.x=Math.atan2(l,y),this.z=Math.atan2(o,r)):(this.x=0,this.z=Math.atan2(-s,h))):"YZX"===i?(this.z=Math.asin(e(o)),Math.abs(o)<.99999?(this.x=Math.atan2(-u,h),this.y=Math.atan2(-c,r)):(this.x=0,this.y=Math.atan2(a,y))):"XZY"===i&&(this.z=Math.asin(-e(s)),Math.abs(s)<.99999?(this.x=Math.atan2(l,h),this.y=Math.atan2(a,r)):(this.x=Math.atan2(-u,y),this.y=0)),this},setEulerFromQuaternion:function(t,i){function e(t){return Math.min(Math.max(t,-1),1)}var n=t.x*t.x,r=t.y*t.y,s=t.z*t.z,a=t.w*t.w;return void 0===i||"XYZ"===i?(this.x=Math.atan2(2*(t.x*t.w-t.y*t.z),a-n-r+s),this.y=Math.asin(e(2*(t.x*t.z+t.y*t.w))),this.z=Math.atan2(2*(t.z*t.w-t.x*t.y),a+n-r-s)):"YXZ"===i?(this.x=Math.asin(e(2*(t.x*t.w-t.y*t.z))),this.y=Math.atan2(2*(t.x*t.z+t.y*t.w),a-n-r+s),this.z=Math.atan2(2*(t.x*t.y+t.z*t.w),a-n+r-s)):"ZXY"===i?(this.x=Math.asin(e(2*(t.x*t.w+t.y*t.z))),this.y=Math.atan2(2*(t.y*t.w-t.z*t.x),a-n-r+s),this.z=Math.atan2(2*(t.z*t.w-t.x*t.y),a-n+r-s)):"ZYX"===i?(this.x=Math.atan2(2*(t.x*t.w+t.z*t.y),a-n-r+s),this.y=Math.asin(e(2*(t.y*t.w-t.x*t.z))),this.z=Math.atan2(2*(t.x*t.y+t.z*t.w),a+n-r-s)):"YZX"===i?(this.x=Math.atan2(2*(t.x*t.w-t.z*t.y),a-n+r-s),this.y=Math.atan2(2*(t.y*t.w-t.x*t.z),a+n-r-s),this.z=Math.asin(e(2*(t.x*t.y+t.z*t.w)))):"XZY"===i&&(this.x=Math.atan2(2*(t.x*t.w+t.y*t.z),a-n+r-s),this.y=Math.atan2(2*(t.x*t.z+t.y*t.w),a+n-r-s),this.z=Math.asin(e(2*(t.z*t.w-t.x*t.y)))),this},getScaleFromMatrix:function(t){var i=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),e=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),n=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=i,this.y=e,this.z=n,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new i.Vector3(this.x,this.y,this.z)},isNaN:function(){return!(isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z))}},i.Vector4=function(t,i,e,n){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==n?n:1},i.Vector4.prototype={constructor:i.Vector4,set:function(t,i,e,n){return this.x=t,this.y=i,this.z=e,this.w=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},sub:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){if(!t)return this;var i=this.x,e=this.y,n=this.z,r=this.w,s=t.elements;return this.x=s[0]*i+s[4]*e+s[8]*n+s[12]*r,this.y=s[1]*i+s[5]*e+s[9]*n+s[13]*r,this.z=s[2]*i+s[6]*e+s[10]*n+s[14]*r,this.w=s[3]*i+s[7]*e+s[11]*n+s[15]*r,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t,this.z/=t,this.w/=t):(this.x=0,this.y=0,this.z=0,this.w=1),this},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this},setAxisAngleFromRotationMatrix:function(t){var i,e,n,r,s=.01,a=.1,o=t.elements,h=o[0],u=o[4],c=o[8],l=o[1],y=o[5],f=o[9],x=o[2],m=o[6],g=o[10];if(Math.abs(u-l)<s&&Math.abs(c-x)<s&&Math.abs(f-m)<s){if(Math.abs(u+l)<a&&Math.abs(c+x)<a&&Math.abs(f+m)<a&&Math.abs(h+y+g-3)<a)return this.set(1,0,0,0),this;i=Math.PI;var p=(h+1)/2,v=(y+1)/2,d=(g+1)/2,w=(u+l)/4,M=(c+x)/4,z=(f+m)/4;return p>v&&p>d?p<s?(e=0,n=.707106781,r=.707106781):(n=w/(e=Math.sqrt(p)),r=M/e):v>d?v<s?(e=.707106781,n=0,r=.707106781):(e=w/(n=Math.sqrt(v)),r=z/n):d<s?(e=.707106781,n=.707106781,r=0):(e=M/(r=Math.sqrt(d)),n=z/r),this.set(e,n,r,i),this}var A=Math.sqrt((m-f)*(m-f)+(c-x)*(c-x)+(l-u)*(l-u));return Math.abs(A)<.001&&(A=1),this.x=(m-f)/A,this.y=(c-x)/A,this.z=(l-u)/A,this.w=Math.acos((h+y+g-1)/2),this},getColumnFromMatrix:function(t,i){var e=4*t,n=i.elements;return this.x=n[e],this.y=n[e+1],this.z=n[e+2],this.w=1,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this.w>t.w&&(this.w=t.w),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this.w<t.w&&(this.w=t.w),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this.z<t.z?this.z=t.z:this.z>i.z&&(this.z=i.z),this.w<t.w?this.w=t.w:this.w>i.w&&(this.w=i.w),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t,i){return Math.sqrt(this.distanceToSquared(t,i))},distanceToSquared:function(t,i){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z,s=e*e+n*n+r*r;return i&&(s+=this.w-t.w),s},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new i.Vector4(this.x,this.y,this.z,this.w)}},i.Matrix3=function(t,i,e,n,r,s,a,o,h){this.elements=new Float32Array(9),this.set(void 0!==t?t:1,i||0,e||0,n||0,void 0!==r?r:1,s||0,a||0,o||0,void 0!==h?h:1)},i.Matrix3.prototype={constructor:i.Matrix3,set:function(t,i,e,n,r,s,a,o,h){var u=this.elements;return u[0]=t,u[3]=i,u[6]=e,u[1]=n,u[4]=r,u[7]=s,u[2]=a,u[5]=o,u[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},isIdentity:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&1===t[4]&&0===t[5]&&0===t[6]&&0===t[7]&&1===t[8]},copy:function(t){var i=t.elements;return this.set(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]),this},multiplyVector3:function(t){return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},flattenToArrayOffset:function(t,i){var e=this.elements;return t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=e[3],t[i+4]=e[4],t[i+5]=e[5],t[i+6]=e[6],t[i+7]=e[7],t[i+8]=e[8],t},multiplyVector3Array:function(){var t=new i.Vector3;return function(i){for(var e=0,n=i.length;e<n;e+=3)t.x=i[e],t.y=i[e+1],t.z=i[e+2],t.applyMatrix3(this),i[e]=t.x,i[e+1]=t.y,i[e+2]=t.z;return i}}(),multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},multiplyMatrices:function(t,i){if(!i)return this.copy(t),this;var e=t.elements,n=i.elements,r=this.elements,s=e[0],a=e[3],o=e[6],h=e[1],u=e[4],c=e[7],l=e[2],y=e[5],f=e[8],x=n[0],m=n[3],g=n[6],p=n[1],v=n[4],d=n[7],w=n[2],M=n[5],z=n[8];return r[0]=s*x+a*p+o*w,r[3]=s*m+a*v+o*M,r[6]=s*g+a*d+o*z,r[1]=h*x+u*p+c*w,r[4]=h*m+u*v+c*M,r[7]=h*g+u*d+c*z,r[2]=l*x+y*p+f*w,r[5]=l*m+y*v+f*M,r[8]=l*g+y*d+f*z,this},determinant:function(){var t=this.elements,i=t[0],e=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return i*s*u-i*a*h-e*r*u+e*a*o+n*r*h-n*s*o},getInverse:function(t,i){var e=t.elements,n=this.elements;n[0]=e[10]*e[5]-e[6]*e[9],n[1]=-e[10]*e[1]+e[2]*e[9],n[2]=e[6]*e[1]-e[2]*e[5],n[3]=-e[10]*e[4]+e[6]*e[8],n[4]=e[10]*e[0]-e[2]*e[8],n[5]=-e[6]*e[0]+e[2]*e[4],n[6]=e[9]*e[4]-e[5]*e[8],n[7]=-e[9]*e[0]+e[1]*e[8],n[8]=e[5]*e[0]-e[1]*e[4];var r=e[0]*n[0]+e[1]*n[3]+e[2]*n[6];if(0===r){var s="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(s);return console.warn(s),this.identity(),this}return this.multiplyScalar(1/r),this},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this},clone:function(){var t=this.elements;return new i.Matrix3(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},flattenToArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t},scale:function(t){var i=this.elements,e=t.x,n=t.y;return i[0]*=e,i[3]*=n,i[1]*=e,i[4]*=n,i[2]*=e,i[5]*=n,this},getMatrix4:function(){var t=this.elements;return new i.Matrix4(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1)},makeRotationAxis:function(t,i){var e=Math.cos(i),n=Math.sin(i),r=1-e,s=t.x,a=t.y,o=t.z,h=r*s,u=r*a;return this.set(h*s+e,h*a-n*o,h*o+n*a,h*a+n*o,u*a+e,u*o-n*s,h*o-n*a,u*o+n*s,r*o*o+e),this}},i._Float32Matrix4=function(t,i,e,n,r,s,a,o,h,u,c,l,y,f,x,m){this.elements=new Float32Array(16)},i._Float32Matrix4.prototype={constructor:i._Float32Matrix4,set:function(t,i,e,n,r,s,a,o,h,u,c,l,y,f,x,m){var g=this.elements;return g[0]=t,g[4]=i,g[8]=e,g[12]=n,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=h,g[6]=u,g[10]=c,g[14]=l,g[3]=y,g[7]=f,g[11]=x,g[15]=m,this},_fromMatrix4WithLowPartTranslation(t){this.elements.set(t.elements);var i=t.getLowPartTranslation();return this.elements[3]=i.x,this.elements[7]=i.y,this.elements[11]=i.z,this},isIdentity:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},_multiplyMatricesMV:function(t,i){var e=t.elements,n=i.elements,r=this.elements,s=e[0],a=e[4],o=e[8],h=e[12],u=e[1],c=e[5],l=e[9],y=e[13],f=e[2],x=e[6],m=e[10],g=e[14],p=n[0],v=n[4],d=n[8],w=n[12],M=n[1],z=n[5],A=n[9],b=n[13],I=n[2],T=n[6],E=n[10],P=n[14];return r[0]=s*p+a*M+o*I,r[4]=s*v+a*z+o*T,r[8]=s*d+a*A+o*E,r[12]=s*w+a*b+o*P+h,r[1]=u*p+c*M+l*I,r[5]=u*v+c*z+l*T,r[9]=u*d+c*A+l*E,r[13]=u*w+c*b+l*P+y,r[2]=f*p+x*M+m*I,r[6]=f*v+x*z+m*T,r[10]=f*d+x*A+m*E,r[14]=f*w+x*b+m*P+g,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this},multiplyMatricesAndInverse:function(t,e){var n=(new i.Matrix4).multiplyMatrices(t,e);return this.getInverse(n)},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[4],i[4]=t,t=i[2],i[2]=i[8],i[8]=t,t=i[6],i[6]=i[9],i[9]=t,t=i[3],i[3]=i[12],i[12]=t,t=i[7],i[7]=i[13],i[13]=t,t=i[11],i[11]=i[14],i[14]=t,this},getInverse:function(t,i){var e=this.elements,n=t.elements,r=n[0],s=n[4],a=n[8],o=n[12],h=n[1],u=n[5],c=n[9],l=n[13],y=n[2],f=n[6],x=n[10],m=n[14],g=n[3],p=n[7],v=n[11],d=n[15];e[0]=c*m*p-l*x*p+l*f*v-u*m*v-c*f*d+u*x*d,e[4]=o*x*p-a*m*p-o*f*v+s*m*v+a*f*d-s*x*d,e[8]=a*l*p-o*c*p+o*u*v-s*l*v-a*u*d+s*c*d,e[12]=o*c*f-a*l*f-o*u*x+s*l*x+a*u*m-s*c*m,e[1]=l*x*g-c*m*g-l*y*v+h*m*v+c*y*d-h*x*d,e[5]=a*m*g-o*x*g+o*y*v-r*m*v-a*y*d+r*x*d,e[9]=o*c*g-a*l*g-o*h*v+r*l*v+a*h*d-r*c*d,e[13]=a*l*y-o*c*y+o*h*x-r*l*x-a*h*m+r*c*m,e[2]=u*m*g-l*f*g+l*y*p-h*m*p-u*y*d+h*f*d,e[6]=o*f*g-s*m*g-o*y*p+r*m*p+s*y*d-r*f*d,e[10]=s*l*g-o*u*g+o*h*p-r*l*p-s*h*d+r*u*d,e[14]=o*u*y-s*l*y-o*h*f+r*l*f+s*h*m-r*u*m,e[3]=c*f*g-u*x*g-c*y*p+h*x*p+u*y*v-h*f*v,e[7]=s*x*g-a*f*g+a*y*p-r*x*p-s*y*v+r*f*v,e[11]=a*u*g-s*c*g-a*h*p+r*c*p+s*h*v-r*u*v,e[15]=s*c*y-a*u*y+a*h*f-r*c*f-s*h*x+r*u*x;var w=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12];if(0==w){var M="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(M);return console.warn(M),this.identity(),this}return this.multiplyScalar(1/w),this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}};var u=new Float32Array(1);i.SplitFloat32=function(t){u[0]=t;var i=u[0];return{low:t-i,high:i}},i._SplitFloat32PositiveError=function(t){u[0]=t;var i=u[0],e=t-i;return e<0&&(i-=2*(e=-e)),{low:e,high:i}};var c=!1,l,y,f,x,m,g;return i.Matrix4=function(t,i,e,n,r,s,a,o,h,u,c,l,y,f,x,m){this.elements=void 0!==t?[t,r,h,y,i,s,u,f,e,a,c,x,n,o,l,m]:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},i.Matrix4.prototype={constructor:i.Matrix4,getLowPartTranslation:function(){var t=i.SplitFloat32(this.elements[12]),e=i.SplitFloat32(this.elements[13]),n=i.SplitFloat32(this.elements[14]),r=new i.Vector3;return r.x=t.low,r.y=e.low,r.z=n.low,r},set:function(t,i,e,n,r,s,a,o,h,u,c,l,y,f,x,m){var g=this.elements;return g[0]=t,g[4]=i,g[8]=e,g[12]=n,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=h,g[6]=u,g[10]=c,g[14]=l,g[3]=y,g[7]=f,g[11]=x,g[15]=m,this},getValue:function(t,i){return this.elements[4*(i-1)+t-1]},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},isIdentity:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},copy:function(t){var i=t.elements;return this.set(i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14],i[3],i[7],i[11],i[15]),this},createJSON:function(){if(this.isIdentity())return"identity";var t,i=[],e=this.elements;if(1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15])i.push(e[12]),i.push(e[13]),i.push(e[14]);else for(t=0;t<16;t++)i.push(this.elements[t]);return i},setFromJSON:function(t){if("identity"===t)this.identity();else if(3===t.length)this.identity(),this.elements[12]=t[0],this.elements[13]=t[1],this.elements[14]=t[2];else{var i;for(i=0;i<16;i++)this.elements[i]=t[i]}return this},setRotationFromEuler:function(t,i){var e=this.elements,n=t.x,r=t.y,s=t.z,a=Math.cos(n),o=Math.sin(n),h=Math.cos(r),u=Math.sin(r),c=Math.cos(s),l=Math.sin(s);if(void 0===i||"XYZ"===i){var y=a*c,f=a*l,x=o*c,m=o*l;e[0]=h*c,e[4]=-h*l,e[8]=u,e[1]=f+x*u,e[5]=y-m*u,e[9]=-o*h,e[2]=m-y*u,e[6]=x+f*u,e[10]=a*h}else if("YXZ"===i){var g=h*c,p=h*l,v=u*c,d=u*l;e[0]=g+d*o,e[4]=v*o-p,e[8]=a*u,e[1]=a*l,e[5]=a*c,e[9]=-o,e[2]=p*o-v,e[6]=d+g*o,e[10]=a*h}else if("ZXY"===i){g=h*c,p=h*l,v=u*c,d=u*l;e[0]=g-d*o,e[4]=-a*l,e[8]=v+p*o,e[1]=p+v*o,e[5]=a*c,e[9]=d-g*o,e[2]=-a*u,e[6]=o,e[10]=a*h}else if("ZYX"===i){y=a*c,f=a*l,x=o*c,m=o*l;e[0]=h*c,e[4]=x*u-f,e[8]=y*u+m,e[1]=h*l,e[5]=m*u+y,e[9]=f*u-x,e[2]=-u,e[6]=o*h,e[10]=a*h}else if("YZX"===i){var w=a*h,M=a*u,z=o*h,A=o*u;e[0]=h*c,e[4]=A-w*l,e[8]=z*l+M,e[1]=l,e[5]=a*c,e[9]=-o*c,e[2]=-u*c,e[6]=M*l+z,e[10]=w-A*l}else if("XZY"===i){w=a*h,M=a*u,z=o*h,A=o*u;e[0]=h*c,e[4]=-l,e[8]=u*c,e[1]=w*l+A,e[5]=a*c,e[9]=M*l-z,e[2]=z*l-M,e[6]=o*c,e[10]=A*l+w}return this},setRotationFromQuaternion:function(t){var i=this.elements,e=t.x,n=t.y,r=t.z,s=t.w,a=e+e,o=n+n,h=r+r,u=e*a,c=e*o,l=e*h,y=n*o,f=n*h,x=r*h,m=s*a,g=s*o,p=s*h;return i[0]=1-(y+x),i[4]=c-p,i[8]=l+g,i[1]=c+p,i[5]=1-(u+x),i[9]=f-m,i[2]=l-g,i[6]=f+m,i[10]=1-(u+y),this},makeRotationFromQuaternion:function(t){var i=this.elements,e=t.x,n=t.y,r=t.z,s=t.w,a=e+e,o=n+n,h=r+r,u=e*a,c=e*o,l=e*h,y=n*o,f=n*h,x=r*h,m=s*a,g=s*o,p=s*h;return i[0]=1-(y+x),i[4]=c-p,i[8]=l+g,i[1]=c+p,i[5]=1-(u+x),i[9]=f-m,i[2]=l-g,i[6]=f+m,i[10]=1-(u+y),i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},lookAt:(l=new i.Vector3,y=new i.Vector3,f=new i.Vector3,function(t,i,e){var n=this.elements;return f.subVectors(t,i).normalize(),0===f.length()&&(f.z=1),l.crossVectors(e,f).normalize(),0===l.length()&&(f.x+=1e-4,l.crossVectors(e,f).normalize()),y.crossVectors(f,l),n[0]=l.x,n[4]=y.x,n[8]=f.x,n[1]=l.y,n[5]=y.y,n[9]=f.y,n[2]=l.z,n[6]=y.z,n[10]=f.z,this}),multiply:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,i){if(!i)return this.copy(t),this;var e=t.elements,n=i.elements,r=this.elements,s=e[0],a=e[4],o=e[8],h=e[12],u=e[1],c=e[5],l=e[9],y=e[13],f=e[2],x=e[6],m=e[10],g=e[14],p=e[3],v=e[7],d=e[11],w=e[15],M=n[0],z=n[4],A=n[8],b=n[12],I=n[1],T=n[5],E=n[9],P=n[13],V=n[2],B=n[6],_=n[10],S=n[14],O=n[3],U=n[7],C=n[11],R=n[15];return r[0]=s*M+a*I+o*V+h*O,r[4]=s*z+a*T+o*B+h*U,r[8]=s*A+a*E+o*_+h*C,r[12]=s*b+a*P+o*S+h*R,r[1]=u*M+c*I+l*V+y*O,r[5]=u*z+c*T+l*B+y*U,r[9]=u*A+c*E+l*_+y*C,r[13]=u*b+c*P+l*S+y*R,r[2]=f*M+x*I+m*V+g*O,r[6]=f*z+x*T+m*B+g*U,r[10]=f*A+x*E+m*_+g*C,r[14]=f*b+x*P+m*S+g*R,r[3]=p*M+v*I+d*V+w*O,r[7]=p*z+v*T+d*B+w*U,r[11]=p*A+v*E+d*_+w*C,r[15]=p*b+v*P+d*S+w*R,this},multiplyToArray:function(t,i,e){var n=this.elements;return this.multiplyMatrices(t,i),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},multiplyVector3:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){var t=new i.Vector3;return function(i){for(var e=0,n=i.length;e<n;e+=3)t.x=i[e],t.y=i[e+1],t.z=i[e+2],t.applyProjection(this),i[e]=t.x,i[e+1]=t.y,i[e+2]=t.z;return i}}(),rotateAxis:function(t){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){var e=this.elements,n=new i.Vector4;return n.x=e[0]*t.x+e[4]*t.y+e[8]*t.z+e[12]*t.w,n.y=e[1]*t.x+e[5]*t.y+e[9]*t.z+e[13]*t.w,n.z=e[2]*t.x+e[6]*t.y+e[10]*t.z+e[14]*t.w,n.w=t.w?e[3]*t.x+e[7]*t.y+e[11]*t.z+e[15]*t.w:1,n},determinant:function(){var t=this.elements,i=t[0],e=t[4],n=t[8],r=t[12],s=t[1],a=t[5],o=t[9],h=t[13],u=t[2],c=t[6],l=t[10],y=t[14];return t[3]*(+r*o*c-n*h*c-r*a*l+e*h*l+n*a*y-e*o*y)+t[7]*(+i*o*y-i*h*l+r*s*l-n*s*y+n*h*u-r*o*u)+t[11]*(+i*h*c-i*a*y-r*s*c+e*s*y+r*a*u-e*h*u)+t[15]*(-n*a*u-i*o*c+i*a*l+n*s*c-e*s*l+e*o*u)},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[4],i[4]=t,t=i[2],i[2]=i[8],i[8]=t,t=i[6],i[6]=i[9],i[9]=t,t=i[3],i[3]=i[12],i[12]=t,t=i[7],i[7]=i[13],i[13]=t,t=i[11],i[11]=i[14],i[14]=t,this},flattenToArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},setFromArray:function(t){var i=this.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this},flattenToArrayOffset:function(t,i){var e=this.elements;return t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=e[3],t[i+4]=e[4],t[i+5]=e[5],t[i+6]=e[6],t[i+7]=e[7],t[i+8]=e[8],t[i+9]=e[9],t[i+10]=e[10],t[i+11]=e[11],t[i+12]=e[12],t[i+13]=e[13],t[i+14]=e[14],t[i+15]=e[15],t},getPosition:function(){var t=new i.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var i=this.elements;return t.set(i[12],i[13],i[14])}}(),setPosition:function(t){var i=this.elements;return i[12]=t.x,i[13]=t.y,i[14]=t.z,this},getInverse:function(t,i){var e=this.elements,n=t.elements,r=n[0],s=n[4],a=n[8],o=n[12],h=n[1],u=n[5],c=n[9],l=n[13],y=n[2],f=n[6],x=n[10],m=n[14],g=n[3],p=n[7],v=n[11],d=n[15];e[0]=c*m*p-l*x*p+l*f*v-u*m*v-c*f*d+u*x*d,e[4]=o*x*p-a*m*p-o*f*v+s*m*v+a*f*d-s*x*d,e[8]=a*l*p-o*c*p+o*u*v-s*l*v-a*u*d+s*c*d,e[12]=o*c*f-a*l*f-o*u*x+s*l*x+a*u*m-s*c*m,e[1]=l*x*g-c*m*g-l*y*v+h*m*v+c*y*d-h*x*d,e[5]=a*m*g-o*x*g+o*y*v-r*m*v-a*y*d+r*x*d,e[9]=o*c*g-a*l*g-o*h*v+r*l*v+a*h*d-r*c*d,e[13]=a*l*y-o*c*y+o*h*x-r*l*x-a*h*m+r*c*m,e[2]=u*m*g-l*f*g+l*y*p-h*m*p-u*y*d+h*f*d,e[6]=o*f*g-s*m*g-o*y*p+r*m*p+s*y*d-r*f*d,e[10]=s*l*g-o*u*g+o*h*p-r*l*p-s*h*d+r*u*d,e[14]=o*u*y-s*l*y-o*h*f+r*l*f+s*h*m-r*u*m,e[3]=c*f*g-u*x*g-c*y*p+h*x*p+u*y*v-h*f*v,e[7]=s*x*g-a*f*g+a*y*p-r*x*p-s*y*v+r*f*v,e[11]=a*u*g-s*c*g-a*h*p+r*c*p+s*h*v-r*u*v,e[15]=s*c*y-a*u*y+a*h*f-r*c*f-s*h*x+r*u*x;var w=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12];if(0==w){var M="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(M);return console.warn(M),this.identity(),this}return this.multiplyScalar(1/w),this},extractBasis:function(t,i,e){var n=this.elements;return t.set(n[0],n[1],n[2]),i.set(n[4],n[5],n[6]),e.set(n[8],n[9],n[10]),this},makeBasis:function(t,i,e){return this.set(t.x,i.x,e.x,0,t.y,i.y,e.y,0,t.z,i.z,e.z,0,0,0,0,1),this},extractPosition:function(t){var i=this.elements,e=t.elements;return i[12]=e[12],i[13]=e[13],i[14]=e[14],this},extractRotation:function(t){var e=new i.Vector3;return function(t){var i=this.elements,n=t.elements,r=1/e.set(n[0],n[1],n[2]).length(),s=1/e.set(n[4],n[5],n[6]).length(),a=1/e.set(n[8],n[9],n[10]).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*s,i[5]=n[5]*s,i[6]=n[6]*s,i[8]=n[8]*a,i[9]=n[9]*a,i[10]=n[10]*a,this}}(),extractMatrix3:function(t){new i.Vector3;return function(t){var i=this.elements,e=t.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[8]=e[8],i[9]=e[9],i[10]=e[10],this}}(),translate:function(t){var i=this.elements,e=t.x,n=t.y,r=t.z;return i[12]=i[0]*e+i[4]*n+i[8]*r+i[12],i[13]=i[1]*e+i[5]*n+i[9]*r+i[13],i[14]=i[2]*e+i[6]*n+i[10]*r+i[14],i[15]=i[3]*e+i[7]*n+i[11]*r+i[15],this},rotateX:function(t){var i=this.elements,e=i[4],n=i[5],r=i[6],s=i[7],a=i[8],o=i[9],h=i[10],u=i[11],c=Math.cos(t),l=Math.sin(t);return i[4]=c*e+l*a,i[5]=c*n+l*o,i[6]=c*r+l*h,i[7]=c*s+l*u,i[8]=c*a-l*e,i[9]=c*o-l*n,i[10]=c*h-l*r,i[11]=c*u-l*s,this},rotateY:function(t){var i=this.elements,e=i[0],n=i[1],r=i[2],s=i[3],a=i[8],o=i[9],h=i[10],u=i[11],c=Math.cos(t),l=Math.sin(t);return i[0]=c*e-l*a,i[1]=c*n-l*o,i[2]=c*r-l*h,i[3]=c*s-l*u,i[8]=c*a+l*e,i[9]=c*o+l*n,i[10]=c*h+l*r,i[11]=c*u+l*s,this},rotateZ:function(t){var i=this.elements,e=i[0],n=i[1],r=i[2],s=i[3],a=i[4],o=i[5],h=i[6],u=i[7],c=Math.cos(t),l=Math.sin(t);return i[0]=c*e+l*a,i[1]=c*n+l*o,i[2]=c*r+l*h,i[3]=c*s+l*u,i[4]=c*a-l*e,i[5]=c*o-l*n,i[6]=c*h-l*r,i[7]=c*u-l*s,this},rotateByAxis:function(t,i){var e=this.elements;if(1===t.x&&0===t.y&&0===t.z)return this.rotateX(i);if(0===t.x&&1===t.y&&0===t.z)return this.rotateY(i);if(0===t.x&&0===t.y&&1===t.z)return this.rotateZ(i);var n=t.x,r=t.y,s=t.z,a=Math.sqrt(n*n+r*r+s*s),o=(n/=a)*n,h=(r/=a)*r,u=(s/=a)*s,c=Math.cos(i),l=Math.sin(i),y=1-c,f=n*r*y,x=n*s*y,m=r*s*y,g=n*l,p=r*l,v=s*l,d=o+(1-o)*c,w=f+v,M=x-p,z=f-v,A=h+(1-h)*c,b=m+g,I=x+p,T=m-g,E=u+(1-u)*c,P=e[0],V=e[1],B=e[2],_=e[3],S=e[4],O=e[5],U=e[6],C=e[7],R=e[8],L=e[9],D=e[10],N=e[11];return e[0]=d*P+w*S+M*R,e[1]=d*V+w*O+M*L,e[2]=d*B+w*U+M*D,e[3]=d*_+w*C+M*N,e[4]=z*P+A*S+b*R,e[5]=z*V+A*O+b*L,e[6]=z*B+A*U+b*D,e[7]=z*_+A*C+b*N,e[8]=I*P+T*S+E*R,e[9]=I*V+T*O+E*L,e[10]=I*B+T*U+E*D,e[11]=I*_+T*C+E*N,this},scale:function(t){var i=this.elements,e=t.x,n=t.y,r=t.z;return i[0]*=e,i[4]*=n,i[8]*=r,i[1]*=e,i[5]*=n,i[9]*=r,i[2]*=e,i[6]*=n,i[10]*=r,i[3]*=e,i[7]*=n,i[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,Math.max(e,n)))},getScaleOnAxisX:function(){var t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];return Math.sqrt(i)},getScaleOnAxisY:function(){var t=this.elements,i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6];return Math.sqrt(i)},getScaleOnAxisZ:function(){var t=this.elements,i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(i)},makeTranslation:function(t,i,e){return this.set(1,0,0,t,0,1,0,i,0,0,1,e,0,0,0,1),this},makeRotationX:function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(1,0,0,0,0,i,-e,0,0,e,i,0,0,0,0,1),this},makeRotationY:function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(i,0,e,0,0,1,0,0,-e,0,i,0,0,0,0,1),this},makeRotationZ:function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(i,-e,0,0,e,i,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,i){var e=Math.cos(i),n=Math.sin(i),r=1-e,s=t.x,a=t.y,o=t.z,h=r*s,u=r*a;return this.set(h*s+e,h*a-n*o,h*o+n*a,0,h*a+n*o,u*a+e,u*o-n*s,0,h*o-n*a,u*o+n*s,r*o*o+e,0,0,0,0,1),this},makeScale:function(t,i,e){return this.set(t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1),this},makeFrustum:function(t,i,e,n,r,s){var a=this.elements,o=2*r/(i-t),h=2*r/(n-e),u=(i+t)/(i-t),c=(n+e)/(n-e),l=-(s+r)/(s-r),y=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=y,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeFrustumInverted:function(t,i,e,n,r,s){var a=this.elements,o=2*r/(i-t),h=-2*r/(n-e),u=(i+t)/(i-t),c=-(n+e)/(n-e),l=-(s+r)/(s-r),y=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=y,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeFrustumWebGPU:function(t,i,e,n,r,s){var a=this.elements,o=2*r/(i-t),h=2*r/(n-e),u=(i+t)/(i-t),c=(n+e)/(n-e),l=-s/(s-r),y=-s*r/(s-r);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=y,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeFrustumWebGPUInverted:function(t,i,e,n,r,s){var a=this.elements,o=2*r/(i-t),h=-2*r/(n-e),u=(i+t)/(i-t),c=-(n+e)/(n-e),l=-s/(s-r),y=-s*r/(s-r);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=y,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,n,r,s,a){var o=n*Math.tan(i.Math.degToRad(.5*t)),h=-o,u=h*e,c=o*e;return s&&(u+=s*=Math.abs(c-u),c+=s),a&&(h+=a*=Math.abs(o-h),o+=a),this.makeFrustum(u,c,h,o,n,r)},makeOrthographic:function(t,i,e,n,r,s){var a=this.elements,o=i-t,h=e-n,u=s-r,c=(i+t)/o,l=(e+n)/h,y=(s+r)/u;return a[0]=2/o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2/h,a[9]=0,a[13]=-l,a[2]=0,a[6]=0,a[10]=-2/u,a[14]=-y,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},makeOrthographicWebGPU:function(t,i,e,n,r,s){var a=this.elements,o=i-t,h=e-n,u=s-r,c=(i+t)/o,l=(e+n)/h,y=r/u;return a[0]=2/o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2/h,a[9]=0,a[13]=-l,a[2]=0,a[6]=0,a[10]=-1/u,a[14]=-y,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},clone:function(){var t=this.elements;return new i.Matrix4(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])},setRotation:function(t){var i=this.elements;return i[0]=t[0],i[4]=t[1],i[8]=t[2],i[1]=t[3],i[5]=t[4],i[9]=t[5],i[2]=t[6],i[6]=t[7],i[10]=t[8],this},equals:function(t,i){var e=this.elements,n=t.elements;if(void 0===i){for(var r=0;r<16;r++)if(e[r]!==n[r])return!1}else for(r=0;r<16;r++)if(Math.abs(e[r]-n[r])>i)return!1;return!0}},i.IdentityMatrix=new i.Matrix4,i.extend(i.Matrix4.prototype,{compose:(x=new i.Matrix4,m=new i.Matrix4,function(t,i,e){var n=this.elements;return x.identity(),x.setRotationFromQuaternion(i),m.makeScale(e.x,e.y,e.z),this.multiplyMatrices(x,m),n[12]=t.x,n[13]=t.y,n[14]=t.z,this}),decompose:function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3,r=new i.Matrix4;return function(s,a,o){var h=this.elements;return t.set(h[0],h[1],h[2]),e.set(h[4],h[5],h[6]),n.set(h[8],h[9],h[10]),s=s instanceof i.Vector3?s:new i.Vector3,a=a instanceof i.Quaternion?a:new i.Quaternion,(o=o instanceof i.Vector3?o:new i.Vector3).x=t.length(),o.y=e.length(),o.z=n.length(),s.x=h[12],s.y=h[13],s.z=h[14],r.copy(this),r.elements[0]/=o.x,r.elements[1]/=o.x,r.elements[2]/=o.x,r.elements[4]/=o.y,r.elements[5]/=o.y,r.elements[6]/=o.y,r.elements[8]/=o.z,r.elements[9]/=o.z,r.elements[10]/=o.z,a.setFromRotationMatrix(r),[s,a,o]}}()}),i.Color=function(t){return void 0!==t&&this.set(t),this},i.Color.prototype={constructor:i.Color,r:1,g:1,b:1,set:function(t){switch(typeof t){case"number":this.setHex(t);break;case"string":this.setStyle(t);break;case"object":if(t.length&&t.length>=3){this.setRGB(t[0],t[1],t[2]);break}this.copy(t)}return this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,i,e){return this.r=t,this.g=i,this.b=e,this},setHSV:function(t,i,e){return console.log("DEPRECATED: Color's .setHSV() will be removed. Use .setHSL( h, s, l ) instead."),this.setHSL(t,i*e/((t=(2-i)*e)<1?t:2-t),t/2)},setHSL:function(t,i,e){if(0===i)this.r=this.g=this.b=e;else{var n=function(t,i,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(i-t)*e:e<.5?i:e<2/3?t+6*(i-t)*(2/3-e):t},r=e<=.5?e*(1+i):e+i-e*i,s=2*e-r;this.r=n(s,r,t+1/3),this.g=n(s,r,t),this.b=n(s,r,t-1/3)}return this},setStyle:function(t){if(/^rgb\((\d+),(\d+),(\d+)\)$/i.test(t)){var e=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(t);return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this}if(/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(t)){e=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(t);return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(t)){e=/^\#([0-9a-f]{6})$/i.exec(t);return this.setHex(parseInt(e[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t)){e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t);return this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this}if(/^(\w+)$/i.test(t))return this.setHex(i.ColorKeywords[t]),this},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyToLinear:function(t,i){return i?(this.r=t.r*t.r,this.g=t.g*t.g,this.b=t.b*t.b):(this.r=t.r<.04045?t.r/12.92:Math.pow((t.r+.055)/1.055,2.4),this.g=t.g<.04045?t.g/12.92:Math.pow((t.g+.055)/1.055,2.4),this.b=t.b<.04045?t.b/12.92:Math.pow((t.b+.055)/1.055,2.4)),this},copyGammaToLinear:function(t){return this.r=t.r*t.r,this.g=t.g*t.g,this.b=t.b*t.b,this},copyLinearToGamma:function(t){return this.r=Math.sqrt(t.r),this.g=Math.sqrt(t.g),this.b=Math.sqrt(t.b),this},convertGammaToLinear:function(){var t=this.r,i=this.g,e=this.b;return this.r=t*t,this.g=i*i,this.b=e*e,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:(g={h:0,s:0,l:0},function(){var t,i,e=this.r,n=this.g,r=this.b,s=Math.max(e,n,r),a=Math.min(e,n,r),o=(a+s)/2;if(a===s)t=0,i=0;else{var h=s-a;switch(i=o<=.5?h/(s+a):h/(2-s-a),s){case e:t=(n-r)/h+(n<r?6:0);break;case n:t=(r-e)/h+2;break;case r:t=(e-n)/h+4}t/=6}return g.h=t,g.s=i,g.l=o,g}),getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,i,e){var n=this.getHSL();return n.h+=t,n.s+=i,n.l+=e,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},desaturate:function(t){var i=.587*this.g+.299*this.r+.114*this.b,e=Math.min(Math.max(1-t,1e-5),1);return this.r=this.r*e+t*i,this.g=this.g*e+t*i,this.b=this.b*e+t*i,this},saturate:function(t){var i=.587*this.g+.299*this.r+.114*this.b,e=1/Math.min(Math.max(1-t,1e-5),1);return this.r=(this.r-t*i)*e,this.g=(this.g-t*i)*e,this.b=(this.b-t*i)*e,this},alphaBlend:function(t,i){var e=1-(i=Math.min(Math.max(i,0),.99999));return this.r=t.r*i+this.r*e,this.g=t.g*i+this.g*e,this.b=t.b*i+this.b*e,this},negative:function(){return this.r=1-this.r,this.g=1-this.g,this.b=1-this.b,this},lerp:function(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},clone:function(){return(new i.Color).setRGB(this.r,this.g,this.b)},toArray:function(){return[this.r,this.g,this.b]}},i.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},t?(i.Logger=t,t.log_class(i)):i})),define("Mesh/ThreeJS_Base",["DS/Mesh/ThreeJS_Base","DS/DSMigration/DSMigration"],(function(t,i){return i.deprecateModule("Mesh/ThreeJS_Base"),t}));