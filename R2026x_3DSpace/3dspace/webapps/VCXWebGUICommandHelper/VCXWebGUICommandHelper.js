var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebGUICommandHelper/VCXGUICommandBase",["require","exports","DS/VCXWebIO/VCXUUIDServices"],(function(e,t,i){"use strict";i=__importDefault(i);return class{get name(){return this._name}set name(e){this._name=e}constructor(e){this._id=i.default.generateUUID(),this._responsiveClassNameBig="",this._responsiveClassNameSmall="",this._experienceBase=e,this._name="",this._positionningCallback=()=>{},this.order=-1}_setPositionByX(e){if(this.view){const t=this._experienceBase.getManager("VCXGUIManager").getUsableArea(!0).getBoundingClientRect(),i=this.view.mainDiv.getBoundingClientRect(),s=t.width,n=i.width,a=t.left,o=t.right,r="right"===e.reference?o:(e.reference,a);let l=0,m=e.isAbsolute?e.value:e.value*s-n/2;l="right"===e.reference?r-m-n:r+m,this.view.mainDiv.style.left=`${l}px`}}_setPositionByY(e){if(this.view){const t=this._experienceBase.getManager("VCXGUIManager").getUsableArea(!0).getBoundingClientRect();const i=this.view.mainDiv.getBoundingClientRect().height,s=t.height,n=t.top,a=t.bottom,o="top"===e.reference?n:"bottom"===e.reference?a:n;let r=0,l=e.isAbsolute?e.value:e.value*s;r="top"===e.reference?o+l:o-l-i,this.view.mainDiv.style.top=`${r}px`}}_setPosition(e,t){if(this.view){const i=this._experienceBase.getManager("VCXGUIManager").getUsableArea(!0).getBoundingClientRect();let s=this.view.mainDiv.getBoundingClientRect();i.width<s.width+100?this.view.mainDiv.hasClassName(this._responsiveClassNameBig)&&(this.view.mainDiv.removeClassName(this._responsiveClassNameBig),this.view.mainDiv.addClassName(this._responsiveClassNameSmall)):this.view.mainDiv.hasClassName(this._responsiveClassNameSmall)&&(this.view.mainDiv.removeClassName(this._responsiveClassNameSmall),this.view.mainDiv.addClassName(this._responsiveClassNameBig)),this._setPositionByX(e),this._setPositionByY(t)}}start(e){}end(e){}warn(e){}next(e){}previous(e){}get id(){return this._id}}})),define("DS/VCXWebGUICommandHelper/VCXOptionsBar",["require","exports","DS/VCXWebGUIInfra/VCXUIObserver","UWA/Core","DS/Controls/Button"],(function(e,t,i,s,n){"use strict";return class{get mainDiv(){return this._mainDiv}set mainDiv(e){this._mainDiv=e}constructor(e){e.positionningCallback?this._positionningCallback=e.positionningCallback:this._positionningCallback=()=>{},this._buttons=[],document.getElementsByClassName("vcxMiddleContainer").length>0?this._parentUI=document.getElementsByClassName("vcxMiddleContainer")[0]:this._parentUI=document.getElementsByClassName("wux-afr-framewindow")[0],this._mainDiv=s.createElement("div",{class:"VCXOptionBar"}),this._mainDiv.setAttribute("data-vcxContext","UICommandOptions"),void 0===e.type||"linear"===e.type?e.responsiveClassNames?this._mainDiv.addClassName(e.responsiveClassNames.big):this._mainDiv.addClassName("VCXOptionBarRow"):this._mainDiv.addClassName("VCXOptionBarCircular");for(let t=0;t<e.options.length;t++){const i=e.options[t],s=new n({label:i.label,showLabelFlag:i.showLabelFlag??!0,icon:{iconName:i.icon,fontIconFamily:WUXManagedFontIcons.Font3DS}});s.getContent().addClassName("VCXOptionBarButton"),i.selected?s.getContent().addClassName("VCXOptionBarSelected"):s.getContent().addClassName("VCXOptionBarNotSelected"),i.color&&(s.getContent().style.setProperty("--VCX_OPTION_BUTTON_COLOR",`${i.color}`),s.getContent().classList.add("VCXOptionBarButtonColored")),s.addEventListener("buttonclick",(()=>{i.callback();for(let e of this._buttons)e.getContent().hasClassName("VCXOptionBarSelected")?(e.getContent().removeClassName("VCXOptionBarSelected"),e.getContent().addClassName("VCXOptionBarNotSelected")):(e.getContent().removeClassName("VCXOptionBarNotSelected"),e.getContent().addClassName("VCXOptionBarSelected"))})),this._setZoomEffect(s,t,e.options.length,"circular"===e.type),s.inject(this._mainDiv),this._buttons.push(s)}this.setPosition(),this._mainDiv.inject(this._parentUI)}destroy(){this._mainDiv&&this._mainDiv.destroy()}setPosition(){i.observe(!0,"VCXOptionBar",(()=>{this._positionningCallback()}))}_setZoomEffect(e,t,i,s){if(e.getContent()&&s){const i=0+t*45;e.getContent().classList.add("VCXOptionBarCircularPreEffect"),setTimeout((()=>{e.getContent().style.setProperty("transform",`scale(1) rotate(${i}deg) translate(-60px) rotate(calc(-${i}deg))`),e.getContent().classList.add("VCXOptionBarCircularZoomEffect")}),50)}}}})),define("DS/VCXWebGUICommandHelper/VCXGUICommandHelperView",["require","exports","DS/VCXWebGUIInfra/VCXUIObserver","UWA/Core","DS/Controls/Label","i18n!DS/VCXWebGUICommandHelper/assets/nls/VCXWebGUICommandHelper"],(function(e,t,i,s,n,a){"use strict";class o{get mainDiv(){return this._mainDiv}set mainDiv(e){this._mainDiv=e}get numberStep(){return this._numberStep}set numberStep(e){this._numberStep=e}constructor(e){this._numberStep=e.numberSteps,this._positionningCallback=e.positionningCallback,this._startTransitionEffect="fade"===localStorage.getItem("VCXCommandHelper")?o.EFFECT.FADE:"glow"===localStorage.getItem("VCXCommandHelper")?o.EFFECT.GLOW:(localStorage.getItem("VCXCommandHelper"),o.EFFECT.DROP);let t=document.getElementsByClassName("wux-afr-framewindow")[0];document.getElementsByClassName("vcxMiddleContainer").length>0&&(t=document.getElementsByClassName("vcxMiddleContainer")[0]),0===document.getElementsByClassName("VCXCommandHelperGroup").length?(this._parentUI=s.createElement("div",{class:"VCXCommandHelperGroup"}),this._parentUI.inject(t)):this._parentUI=document.getElementsByClassName("VCXCommandHelperGroup")[0],this._mainDiv=s.createElement("div",{class:"VCXCommandHelperMain"}),this._mainDiv.setAttribute("data-vcxContext","UICommandHelper"),e.responsiveClassNames&&this._mainDiv.addClassName(e.responsiveClassNames.big),this._leftSection=new n({value:"",icon:"info"}),this._leftSection.getContent().addClassName("VCXCommandHelperLeftSection"),this.numberStep>0&&this._leftSection.inject(this._mainDiv);const i=s.createElement("div",{class:"VCXCommandHelperSeparator"});this.numberStep>0&&i.inject(this._mainDiv),this._rightSection=s.createElement("div",{class:"VCXCommandHelperRightSection"}),this._rightSection.inject(this._mainDiv),this.setPosition(),this._mainDiv.inject(this._parentUI),this._setTransitionEffect()}destroy(){this._mainDiv&&this._mainDiv.destroy()}SetMessageInfo(e){this._leftSection.value=e}SetStep(e){if(this._leftSection){let t="";t=1===this._numberStep?`${a["Step.Action"]}`:`${a["Step.Title"]}: ${e}/${this._numberStep}`,this._leftSection.value=t}}SetMessage(e){this._rightSection.setText(e)}setShakeEffect(){this._mainDiv&&(this._mainDiv.classList.add("VCXCommandHelperMainShake"),setTimeout((()=>{this._mainDiv.classList.remove("VCXCommandHelperMainShake")}),500))}_setGlowEffect(){this._mainDiv&&(this._mainDiv.classList.add("VCXCommandHelperMainPreGlow"),this._mainDiv.classList.add("VCXCommandHelperMainGlow"),setTimeout((()=>{this._mainDiv.classList.remove("VCXCommandHelperMainGlow")}),500))}_setTransitionEffect(){this._startTransitionEffect===o.EFFECT.DROP?this._setDropEffect():this._startTransitionEffect===o.EFFECT.FADE?this._setFadeEffect():(this._startTransitionEffect,o.EFFECT.GLOW,this._setGlowEffect())}_setDropEffect(){this._mainDiv&&(this._mainDiv.classList.add("VCXCommandHelperMainPreDrop"),setTimeout((()=>{this._mainDiv.classList.add("VCXCommandHelperMainDrop")}),50))}_setFadeEffect(){this._mainDiv&&(this._mainDiv.classList.add("VCXCommandHelperMainPreFade"),setTimeout((()=>{this._mainDiv.classList.add("VCXCommandHelperMainFade")}),50))}setPosition(){i.observe(!0,"VCXCommandHelperMain",(()=>{this._positionningCallback()}))}}return function(e){let t;!function(e){e[e.DROP=0]="DROP",e[e.FADE=1]="FADE",e[e.GLOW=2]="GLOW"}(t=e.EFFECT||(e.EFFECT={}))}(o||(o={})),o}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebGUICommandHelper/VCXGUICommandValidatorCtrl",["require","exports","DS/VCXWebGUICommandHelper/VCXOptionsBar","DS/VCXGUIInfrastructure/VCXGUIComponentCtrlTS"],(function(e,t,i,s){"use strict";i=__importDefault(i),s=__importDefault(s);class n extends s.default{get locked(){return this._locked}set locked(e){this._locked=e}constructor(){super(),this.view=null,this.view=null,this._locked=!1}UpdateValidatorUI(e,t){this.DestroyValidatorUI(),this.BuildValidatorUI(t),this.UpdatePosition(e.x,e.y)}BuildValidatorUI(e){let t={type:"circular",options:e,positionningCallback:()=>{}};this.view=new i.default(t)}DestroyValidatorUI(){this.view&&this.view.destroy()}UpdatePosition(e,t){this._setPosition(e,t)}_setPosition(e,t){const i=e,s=t;if(this.view){const e=i+0,t=s+0,n=this.view.mainDiv.getBoundingClientRect(),a=e-n.width/2,o=t-n.height/2;this.view.mainDiv.style.left=`${a}px`,this.view.mainDiv.style.top=`${o}px`}}}return n}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebGUICommandHelper/VCXGUICommandOptionsCtrl",["require","exports","DS/VCXWebGUICommandHelper/VCXOptionsBar","DS/VCXWebGUICommandHelper/VCXGUICommandBase"],(function(e,t,i,s){"use strict";i=__importDefault(i),s=__importDefault(s);class n extends s.default{get selectedOption(){return this._selectedOption}constructor(e){super(e),this.view=null,this._responsiveClassNameBig="VCXOptionBarRow",this._responsiveClassNameSmall="VCXOptionBarColumn",this._positionningCallback=()=>{this._setPosition({value:.5,isAbsolute:!1,reference:"left"},{value:90,isAbsolute:!0,reference:"bottom"})}}BuildOptionsUI(e){let t={type:"linear",options:e,positionningCallback:this._positionningCallback.bind(this),responsiveClassNames:{big:this._responsiveClassNameBig,small:this._responsiveClassNameSmall}};for(let e of t.options)this._selectedOption?this._selectedOption===e.id?e.selected=!0:e.selected=!1:e.selected&&(this._selectedOption=e.id),e.callback=()=>{console.log(e.label),this._selectedOption=e.id};this.view=new i.default(t)}DestroyOptionsUI(){this.view&&(this.view.destroy(),this.view=null)}}return n}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebGUICommandHelper/VCXGUICommandHelperCtrl",["require","exports","DS/VCXWebGUICommandHelper/VCXGUICommandHelperView","DS/VCXWebGUICommandHelper/VCXGUICommandBase","i18n!DS/VCXWebGUICommandHelper/assets/nls/VCXWebGUICommandHelper"],(function(e,t,i,s,n){"use strict";i=__importDefault(i),s=__importDefault(s);class a extends s.default{constructor(e){super(e),this.view=null,this._currentStep=1,this._responsiveClassNameBig="",this._responsiveClassNameSmall="",this._positionningCallback=()=>{this._setPosition({value:.5,isAbsolute:!1,reference:"left"},{value:15,isAbsolute:!0,reference:"top"})}}start(e){const t=e.numberSteps??1,i=e.message??`${n["Step.DefaultMessage"]} ${t}`,s=e.noLabel??!1;this._onStartHelper(t,i,s,e.infoMessage)}end(e){this._onEndHelper()}next(e){const t=e.numberSteps??1,i=e.message??`${n["Step.DefaultMessage"]} ${t}`;this._onNextStepHelper(i)}warn(e){this._onWarnHelper()}_onStartHelper(e,t,i,s){this._BuildHelperUI(e,i),this.view&&(i||this.view.SetStep(this._currentStep),this.view.SetMessage(t),s&&!i&&this.view.SetMessageInfo(s))}_onEndHelper(){this._DestroyHelperUI(),this._currentStep=1}_onNextStepHelper(e){this._currentStep++,this.view&&(this.view.SetStep(this._currentStep),this.view.SetMessage(e))}_onWarnHelper(){this.view&&this.view.setShakeEffect()}_BuildHelperUI(e,t){this.view=new i.default({numberSteps:e,positionningCallback:this._positionningCallback.bind(this),responsiveClassNames:{big:this._responsiveClassNameBig,small:this._responsiveClassNameSmall,noLabel:t}})}_DestroyHelperUI(){this.view&&this.view.destroy()}_setPositionByY(e){if(this.view){const t=10,i=this._experienceBase.getManager("VCXGUIManager");if(i){const s=i.GetGUIComponentFromName("VCXGUICommandHelperManagerCtrl");if(s){let n=s.getHelpers().sort(((e,t)=>e.order-t.order)),o=0;const r=this.view.mainDiv.getBoundingClientRect(),l=i.getUsableArea(!0).getBoundingClientRect(),m=l.height,d=r.height,p=l.top,C=l.bottom,h="top"===e.reference?p:"bottom"===e.reference?C:p;let c=0,u=e.isAbsolute?e.value:e.value*m;c="top"===e.reference?h+u:h-u-d;for(let e=0;e<n.length;e++){const i=n[e];if(i instanceof a&&i.view){if(i.id===this.id)break;o+=t+i.view.mainDiv.getBoundingClientRect().height}}this.view&&this.view.mainDiv&&(this.view.mainDiv.style.top=`${c+o}px`)}}}}}return a}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebGUICommandHelper/VCXGUICommandHelperFactory",["require","exports","DS/VCXWebSystem/VCXCommandHelperEnum","DS/VCXWebGUICommandHelper/VCXGUICommandHelperCtrl","DS/VCXWebGUICommandHelper/VCXGUICommandOptionsCtrl"],(function(e,t,i,s,n){"use strict";i=__importDefault(i),s=__importDefault(s),n=__importDefault(n);return class{static BuildCommandHelper(e,t){switch(e){case i.default.Type.DEFAULT:return new s.default(t);case i.default.Type.OPTIONS:return new n.default(t);default:return null}}}}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebGUICommandHelper/VCXGUICommandHelperManagerCtrl",["require","exports","DS/VCXGUIInfrastructure/VCXGUIComponentCtrlTS","DS/VCXWebSystem/VCXCommandHelperEnum","DS/VCXWebGUICommandHelper/VCXGUICommandHelperFactory","DS/VCXWebIO/VCXLogServices"],(function(e,t,i,s,n,a){"use strict";i=__importDefault(i),s=__importDefault(s),n=__importDefault(n),a=__importDefault(a);class o extends i.default{constructor(){super(),this._commandHelpers={},this._isDirty=!1}getCommandHelperById(e){return this._commandHelpers.hasOwnProperty(e)?this._commandHelpers[e]:(a.default.log(`No command helper found with following id : ${e} !!!!`,a.default.EMessageType.Error),null)}getHelpers(){let e=[];for(let t in this._commandHelpers)this._commandHelpers.hasOwnProperty(t)&&e.push(this._commandHelpers[t]);return e}getCommandHelperByName(e){for(let t in this._commandHelpers)if(this._commandHelpers.hasOwnProperty(t)&&this._commandHelpers[t].name===e)return this._commandHelpers[t];return a.default.log(`No command helper found with following name : ${e} !!!!`,a.default.EMessageType.Error),null}addCommandHelper(e,t){const i=n.default.BuildCommandHelper(e,this._experienceBase);if(i){i.name=t??"",i.order=this._findBestOrder();const e=i.id;return this._commandHelpers[e]=i,i}return a.default.log("Cannot create a command helper !!!!",a.default.EMessageType.Error),null}removeCommandHelper(e){this._commandHelpers.hasOwnProperty(e)?delete this._commandHelpers[e]:a.default.log(`No command helper found with following id : ${e} !!!!`,a.default.EMessageType.Error)}update(){this._isDirty&&(this._updatePositions(),this._isDirty=!1)}postInitialize(){this.subscribe("VCX_GUI_USABLEAREA_UPDATE",(e=>{this._updatePositions()})),this.subscribe("VCX/Cmd/Step",(e=>{if(!e.hasOwnProperty("requestedStep"))return;if(!e.id&&!e.name)return;const t=e.requestedStep;let i=null;if(e.name?i=this.getCommandHelperByName(e.name):e.id&&(i=this.getCommandHelperById(e.id)),!i){if(t!==s.default.Step.START)return;i=this.addCommandHelper(s.default.Type.DEFAULT,e.name)}if(i)switch(t){case s.default.Step.START:i.start(e.options),this._isDirty=!0;break;case s.default.Step.NEXT:i.next(e.options);break;case s.default.Step.PREVIOUS:i.previous(e.options);break;case s.default.Step.END:i.end(e.options),this.removeCommandHelper(i.id),this._isDirty=!0;break;case s.default.Step.WARN:i.warn(e.options)}}))}_findBestOrder(){const e=this.getHelpers().sort(((e,t)=>e.order-t.order));if(0===e.length)return 0;if(1===e.length)return Math.abs(e[0].order-1);for(let t=0;t<e.length-1;t++)if(e[t+1].order-e[t].order>1)return e[t+1].order-1;return-1}_updatePositions(){for(let e in this._commandHelpers)this._commandHelpers.hasOwnProperty(e)&&this._commandHelpers[e]._positionningCallback()}}return o}));