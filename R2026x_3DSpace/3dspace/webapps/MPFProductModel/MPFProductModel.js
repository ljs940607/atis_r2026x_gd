define("DS/MPFProductModel/ProductModel",["UWA/Core","DS/MPFModel/MPFModel","DS/MPFConnector/NoConnector","DS/MPFDataProxy/NoDataProxy","DS/MPFSubscriptionModel/SubscriptionModel","DS/MPFSubscriptionModel/SubscriptionCollection","DS/MPFSubscriptionModel/SubscriptionFactory"],((t,e,r,i,n,s,o)=>{"use strict";const c=Object.freeze({DISPLAY_NAME:"displayName",SUBSCRIPTIONS:"subscriptions",QUANTITY:"quantity",TOTAL_QUANTITY:"totalQuantity",PRODUCT_TRIGRAM:"productTrigram",MARKETING_URL:"marketingUrl",LICENSING_SCHEME:"licensing_scheme",PRODUCT_NUMBER:"product_number",LICENSOR_ID:"licensor_id",INCLUDED_PRODUCTS:"includedProducts",RENEWABLE:"renewable",IS_MARKETPLACE_OFFER:"isMarketplaceOffer",DESCRIPTION:"description",BUYABLE:"buyable",NAME:"name",DISPLAY_BUY_MORE:"displayBuyMore",HAS_RENEWABLE_IFW:"hasRenewableIFW"}),u=Object.freeze({YSC:"YSC",QSC:"QSC",QRC:"QRC",MSC:"MSC"}),a=e.extend({defaults(){const t={};return t[c.DISPLAY_NAME]=null,t[c.SUBSCRIPTIONS]=null,t[c.TOTAL_QUANTITY]=null,t[c.PRODUCT_TRIGRAM]=null,t[c.MARKETING_URL]=null,t},init(t,e={}){this.subscriptionFactory=e.subscriptionFactory,this._parent(t,e)},setup(t,e){this._parent(t,e),this._type="ProductModel"},parse(t){const e=t;return e.subscriptions=this._parseSubscriptions(t.subscriptions,t.offerId),e},_parseSubscriptions(e=[],r){let c;return t.is(r)&&e.forEach((t=>{t[n.Fields.OFFER_ID]=r})),c=this.subscriptionFactory?this.subscriptionFactory.createCollection(o.Types.UNSUBSCRIBE,e,{parse:!0}):new s(e,{parse:!0,dataProxy:i.getInstance()}),c},getDisplayName(){return this.get(c.DISPLAY_NAME)},getName(){return this.get(c.NAME)},getQuantity(){return this.get(c.QUANTITY)},getTotalQuantity(){return this.get(c.TOTAL_QUANTITY)},getSubscriptions(){return this.get(c.SUBSCRIPTIONS)},getProductTrigram(){return this.get(c.PRODUCT_TRIGRAM)},getProductNumber(){return this.get(c.PRODUCT_NUMBER)||this.get("productNumber")},getLicensingScheme(){return this.get(c.LICENSING_SCHEME)||this.get("licensingScheme")},getLicensorId(){return this.get(c.LICENSOR_ID)||this.get("licensorId")},getMarketingUrl(){return this.get(c.MARKETING_URL)},hasSubscriptionsForLicensingScheme(t){const e=this.getSubscriptions().find((e=>e.getLicensingScheme()===t));return e&&e.getActiveQuantity()>0},hasYearlySubscription(){return this.getSubscriptions().some((t=>t.getLicensingScheme()===u.YSC))},getYearlySubscription(){return this.getSubscriptions().find((t=>t.getLicensingScheme()===u.YSC))},hasQuarterlySubscription(){return this.getSubscriptions().some((t=>t.getLicensingScheme()!==u.YSC))},getQuarterlySubscription(){return this.getSubscriptions().find((t=>t.getLicensingScheme()!==u.YSC))},getIncludedProducts(){return this.get(c.INCLUDED_PRODUCTS)},getAvailableLicensingSchemes(){return Object.keys(this.getSubscriptions().groupBy(n.Fields.LICENSING_SCHEME))},isMarketplaceOffer(){return!0===this.get(c.IS_MARKETPLACE_OFFER)},isRenewable(){return!1!==this.get(c.RENEWABLE)},isBuyable(){return!0===this.get(c.BUYABLE)||!0===this.get(c.DISPLAY_BUY_MORE)},getDescription(){return this.get(c.DESCRIPTION)},isEdu(){return(this.getProductTrigram()||"").endsWith("-AC")},hasRenewableIFW(){return this.get(c.HAS_RENEWABLE_IFW)}});return a.Fields=c,a.RevTypes=u,a})),define("DS/MPFProductModel/TenantProductListDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils","DS/MPFError/NotImplementedError"],(function(t,e,r){"use strict";return t.extend({init(t,e){this._parent(t,"/generic-bo/MP_InternalTenantProductsList",e)},urlGet(t,r){const i=this._parent(t,r),n=new e(i);return n.deleteParameter("tenant"),n.addParameter("tenant",t.getTenant()),n.getUrl()},urlPost:r.emit,urlPatch:r.emit,urlPut:r.emit})})),define("DS/MPFProductModel/TenantProductListModel",["DS/MPFModel/MPFModel"],(function(t){"use strict";const e=Object.freeze({TENANT:"tenant",NAME:"name",PUBLIC:"public",VALUE:"value"}),r=t.extend({setup(t,e){this._type=r,this._parent(t,e)},getProducts(){return this.get(e.VALUE)},getTenant(){return this.get(e.TENANT)},getName(){return this.get(e.NAME)}});return r.Fields=e,r})),define("DS/MPFProductModel/TenantProductListFactory",["DS/MPFModelFactory/Factory","DS/MPFProductModel/TenantProductListDataProxy","DS/MPFProductModel/TenantProductListModel"],(function(t,e,r){"use strict";const i=Object.freeze({INTERNAL_PLATFORM:"internalPlatform"}),n=t.extend({init(t,e={}){this._parent(t,e)},createModel(t=i.INTERNAL_PLATFORM,e,n){return this._parent(r,t,e,n)},getDataProxy(t){let r=null;return t===i.INTERNAL_PLATFORM&&(r=this.getOrCreateDataProxyForType(i.USER,e)),r}});return n.Types=i,n})),define("DS/MPFProductModel/ProductCollection",["DS/MPFModel/MPFCollection","DS/MPFProductModel/ProductModel"],(function(t,e){"use strict";return t.extend({model:e,setup:function(t,e){this.constraints=e.constraints||null,this.subscriptionFactory=e.subscriptionFactory,this._parent(t,e)}})})),define("DS/MPFProductModel/ProductFactory",["DS/MPFModelFactory/Factory","DS/MPFProductModel/ProductModel","DS/MPFProductModel/ProductCollection","DS/MPFDataProxy/NoDataProxy"],(function(t,e,r,i){"use strict";const n={PRODUCT:"Product"},s=t.extend({init(t,e={}){this.subscriptionFactory=e.subscriptionFactory,this._parent(t,e)},createModel(t=n.PRODUCT,r,i){return this._parent(e,t,r,Object.assign({subscriptionFactory:this.subscriptionFactory},i))},createCollection(t=n.PRODUCT,e,i){return this._parent(r,t,e,Object.assign({subscriptionFactory:this.subscriptionFactory},i))},getDataProxy:()=>i.getInstance()});return s.Types=n,s}));