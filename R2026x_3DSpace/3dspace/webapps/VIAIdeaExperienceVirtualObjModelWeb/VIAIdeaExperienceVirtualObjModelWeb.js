define("DS/VIAIdeaExperienceVirtualObjModelWeb/extensions/VIAEIxpVirtualPath",["UWA/Core","DS/Visualization/ThreeJS_DS","DS/MathematicsES/MathsDef"],(function(e,t,n){"use strict";return e.Class.extend({AddPoint:function(){console.error("Not Implemented")},RemovePoint:function(){console.error("Not Implemented")},InsertPoint:function(){console.error("Not Implemented")},GetDefinePoints:function(t){if(Array.isArray(t)){t.length=0;for(var n=this.QueryInterface("CATI3DExperienceObject").GetValueByName("pointslist"),r=0;r<n.length;r++)t.push(n[r])}else e.log("VIAEIxpVirtualPath.GetDefinePoints ERROR : unable to fill parameters, not an array !")},GetPointAtIndex:function(e){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("pointslist")[e]},GetNumberOfPoint:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("pointslist").length},GetLength:function(){console.error("Not Implemented")},GetValue:function(e,t,n){console.error("Not Implemented")},GetCtrlPoints:function(t,r){var o=new n.Transformation;if(e.is(t)){this.QueryInterface("CATIMovable").GetAbsPosition(o);var i=new n.Transformation;t.QueryInterface("CATIMovable").GetAbsPosition(i),o=new n.Transformation.multiply(o,i.getInverse())}else this.QueryInterface("CATIMovable").GetAbsPosition(o);var a=[];this.GetDefinePoints(a);var c=a;this.QueryInterface("CATI3DExperienceObject").GetValueByName("reversedDirection")&&(c=a.toReversed());for(var s=0;s<c.length;s++){var u=c[s],l=(new n.Vector3D).setFromArray(u.QueryInterface("CATI3DExperienceObject").GetValueByName("position"));l.applyMatrix3x3(o.matrix),l.addVectorToVector(o.vector),r[s]=l}},GetTangents:function(t,r,o){var i=new n.Transformation;if(e.is(t)){this.QueryInterface("CATIMovable").GetAbsPosition(i);var a=new n.Transformation;t.QueryInterface("CATIMovable").GetAbsPosition(a),i=new n.Transformation.multiply(i,a.getInverse())}else this.QueryInterface("CATIMovable").GetAbsPosition(i);var c=[];this.GetDefinePoints(c);var s=c,u=!1;this.QueryInterface("CATI3DExperienceObject").GetValueByName("reversedDirection")&&(s=c.toReversed(),u=!0);for(var l=0;l<s.length;l++){var f=s[l],I=new n.Vector3D,m=new n.Vector3D;u?(I.setFromArray(f.QueryInterface("CATI3DExperienceObject").GetValueByName("leftTangent")),I.negate(),m.setFromArray(f.QueryInterface("CATI3DExperienceObject").GetValueByName("rightTangent")),m.negate()):(I.setFromArray(f.QueryInterface("CATI3DExperienceObject").GetValueByName("rightTangent")),m.setFromArray(f.QueryInterface("CATI3DExperienceObject").GetValueByName("leftTangent"))),0===I.norm()&&(I=this._computeDefaultTangent(f)),0===m.norm()&&(m=this._computeDefaultTangent(f)),m.applyTransformation(i),I.applyTransformation(i),r[l]=m,o[l]=I}},_computeDefaultTangent:function(e){var t,r,o,i,a=this.QueryInterface("CATI3DExperienceObject").GetValueByName("reversedDirection"),c=e.QueryInterface("CATI3DExperienceObject").GetValueByName("index")-1,s=[];if(this.GetDefinePoints(s),0===c){i=c+1;do{void 0!==s[i]&&(t=(new n.Vector3D).setFromArray(s[i].QueryInterface("CATI3DExperienceObject").GetValueByName("position")),r=(new n.Vector3D).setFromArray(e.QueryInterface("CATI3DExperienceObject").GetValueByName("position")),o=t.subVectorFromVector(r)),i++}while(0===o.norm()&&i<=s.length())}else if(c===s.length-1){i=c-1;do{void 0!==s[i]&&(t=(new n.Vector3D).setFromArray(e.QueryInterface("CATI3DExperienceObject").GetValueByName("position")),r=(new n.Vector3D).setFromArray(s[i].QueryInterface("CATI3DExperienceObject").GetValueByName("position")),o=t.subVectorFromVector(r)),i--}while(0===o.norm()&&i>=0)}else{var u=c-1,l=c+1;do{void 0!==s[l-1]&&(t=(new n.Vector3D).setFromArray(s[l].QueryInterface("CATI3DExperienceObject").GetValueByName("position")),r=(new n.Vector3D).setFromArray(s[u].QueryInterface("CATI3DExperienceObject").GetValueByName("position")),o=t.subVectorFromVector(r)),l++}while(0===o.norm()&&l<s.length())}return a?o.multiplyScalar(-.5):o.multiplyScalar(.5)}})})),define("DS/VIAIdeaExperienceVirtualObjModelWeb/interfaces/VIAIIxpVirtualPath",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],(function(e,t){"use strict";return t.singleton({interfaceName:"VIAIIxpVirtualPath",required:{AddPoint:function(){},RemovePoint:function(){},InsertPoint:function(){},GetDefinePoints:function(){},GetPointAtIndex:function(){},GetNumberOfPoint:function(){},GetLength:function(){},GetValue:function(){},GetCtrlPoints:function(){},GetTangents:function(){}},optional:{Discretize:function(){},SetInterpolationMode:function(){},GetInterpolationMode:function(){}}})}));