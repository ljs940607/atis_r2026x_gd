define("DS/VCXWebInteropSMG/SaxParser",[],(function(){"use strict";return function(e){e.parser=function(e,t){return new a(e,t)},e.SAXParser=a,e.SAXStream=i,e.createStream=function(e,t){return new i(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(t,o){if(!(this instanceof a))return new a(t,o);var i=this;!function(e){for(var t=0,a=r.length;t<a;t++)e[r[t]]=""}(i),i.q=i.c="",i.bufferCheckPosition=e.MAX_BUFFER_LENGTH,i.opt=o||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=A.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(c)),void 0===i.opt.unquotedAttributeValues&&(i.opt.unquotedAttributeValues=!t),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),X(i,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),a.prototype={end:function(){D(this)},write:function(t){var a=this;if(this.error)throw this.error;if(a.closed)return L(a,"Cannot write after close. Assign an onready handler.");if(null===t)return D(a);"object"==typeof t&&(t=t.toString());var o=0,i="";for(;i=O(t,o++),a.c=i,i;)switch(a.trackPosition&&(a.position++,"\n"===i?(a.line++,a.column=0):a.column++),a.state){case A.BEGIN:if(a.state=A.BEGIN_WHITESPACE,"\ufeff"===i)continue;E(a,i);continue;case A.BEGIN_WHITESPACE:E(a,i);continue;case A.TEXT:if(a.sawRoot&&!a.closedRoot){for(var l=o-1;i&&"<"!==i&&"&"!==i;)(i=O(t,o++))&&a.trackPosition&&(a.position++,"\n"===i?(a.line++,a.column=0):a.column++);a.textNode+=t.substring(l,o-1)}"<"!==i||a.sawRoot&&a.closedRoot&&!a.strict?(g(i)||a.sawRoot&&!a.closedRoot||T(a,"Text data outside of root node."),"&"===i?a.state=A.TEXT_ENTITY:a.textNode+=i):(a.state=A.OPEN_WAKA,a.startTagPosition=a.position);continue;case A.SCRIPT:"<"===i?a.state=A.SCRIPT_ENDING:a.script+=i;continue;case A.SCRIPT_ENDING:"/"===i?a.state=A.CLOSE_TAG:(a.script+="<"+i,a.state=A.SCRIPT);continue;case A.OPEN_WAKA:if("!"===i)a.state=A.SGML_DECL,a.sgmlDecl="";else if(g(i));else if(f(p,i))a.state=A.OPEN_TAG,a.tagName=i;else if("/"===i)a.state=A.CLOSE_TAG,a.tagName="";else if("?"===i)a.state=A.PROC_INST,a.procInstName=a.procInstBody="";else{if(T(a,"Unencoded <"),a.startTagPosition+1<a.position){var u=a.position-a.startTagPosition;i=new Array(u).join(" ")+i}a.textNode+="<"+i,a.state=A.TEXT}continue;case A.SGML_DECL:if(a.sgmlDecl+i==="--"){a.state=A.COMMENT,a.comment="",a.sgmlDecl="";continue}a.doctype&&!0!==a.doctype&&a.sgmlDecl?(a.state=A.DOCTYPE_DTD,a.doctype+="<!"+a.sgmlDecl+i,a.sgmlDecl=""):(a.sgmlDecl+i).toUpperCase()===n?(M(a,"onopencdata"),a.state=A.CDATA,a.sgmlDecl="",a.cdata=""):(a.sgmlDecl+i).toUpperCase()===s?(a.state=A.DOCTYPE,(a.doctype||a.sawRoot)&&T(a,"Inappropriately located doctype declaration"),a.doctype="",a.sgmlDecl=""):">"===i?(M(a,"onsgmldeclaration",a.sgmlDecl),a.sgmlDecl="",a.state=A.TEXT):h(i)?(a.state=A.SGML_DECL_QUOTED,a.sgmlDecl+=i):a.sgmlDecl+=i;continue;case A.SGML_DECL_QUOTED:i===a.q&&(a.state=A.SGML_DECL,a.q=""),a.sgmlDecl+=i;continue;case A.DOCTYPE:">"===i?(a.state=A.TEXT,M(a,"ondoctype",a.doctype),a.doctype=!0):(a.doctype+=i,"["===i?a.state=A.DOCTYPE_DTD:h(i)&&(a.state=A.DOCTYPE_QUOTED,a.q=i));continue;case A.DOCTYPE_QUOTED:a.doctype+=i,i===a.q&&(a.q="",a.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:"]"===i?(a.doctype+=i,a.state=A.DOCTYPE):"<"===i?(a.state=A.OPEN_WAKA,a.startTagPosition=a.position):h(i)?(a.doctype+=i,a.state=A.DOCTYPE_DTD_QUOTED,a.q=i):a.doctype+=i;continue;case A.DOCTYPE_DTD_QUOTED:a.doctype+=i,i===a.q&&(a.state=A.DOCTYPE_DTD,a.q="");continue;case A.COMMENT:"-"===i?a.state=A.COMMENT_ENDING:a.comment+=i;continue;case A.COMMENT_ENDING:"-"===i?(a.state=A.COMMENT_ENDED,a.comment=w(a.opt,a.comment),a.comment&&M(a,"oncomment",a.comment),a.comment=""):(a.comment+="-"+i,a.state=A.COMMENT);continue;case A.COMMENT_ENDED:">"!==i?(T(a,"Malformed comment"),a.comment+="--"+i,a.state=A.COMMENT):a.doctype&&!0!==a.doctype?a.state=A.DOCTYPE_DTD:a.state=A.TEXT;continue;case A.CDATA:"]"===i?a.state=A.CDATA_ENDING:a.cdata+=i;continue;case A.CDATA_ENDING:"]"===i?a.state=A.CDATA_ENDING_2:(a.cdata+="]"+i,a.state=A.CDATA);continue;case A.CDATA_ENDING_2:">"===i?(a.cdata&&M(a,"oncdata",a.cdata),M(a,"onclosecdata"),a.cdata="",a.state=A.TEXT):"]"===i?a.cdata+="]":(a.cdata+="]]"+i,a.state=A.CDATA);continue;case A.PROC_INST:"?"===i?a.state=A.PROC_INST_ENDING:g(i)?a.state=A.PROC_INST_BODY:a.procInstName+=i;continue;case A.PROC_INST_BODY:if(!a.procInstBody&&g(i))continue;"?"===i?a.state=A.PROC_INST_ENDING:a.procInstBody+=i;continue;case A.PROC_INST_ENDING:">"===i?(M(a,"onprocessinginstruction",{name:a.procInstName,body:a.procInstBody}),a.procInstName=a.procInstBody="",a.state=A.TEXT):(a.procInstBody+="?"+i,a.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:f(m,i)?a.tagName+=i:(x(a),">"===i?B(a):"/"===i?a.state=A.OPEN_TAG_SLASH:(g(i)||T(a,"Invalid character in tag name"),a.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:">"===i?(B(a,!0),G(a)):(T(a,"Forward-slash in opening tag not followed by >"),a.state=A.ATTRIB);continue;case A.ATTRIB:if(g(i))continue;">"===i?B(a):"/"===i?a.state=A.OPEN_TAG_SLASH:f(p,i)?(a.attribName=i,a.attribValue="",a.state=A.ATTRIB_NAME):T(a,"Invalid attribute name");continue;case A.ATTRIB_NAME:"="===i?a.state=A.ATTRIB_VALUE:">"===i?(T(a,"Attribute without value"),a.attribValue=a.attribName,F(a),B(a)):g(i)?a.state=A.ATTRIB_NAME_SAW_WHITE:f(m,i)?a.attribName+=i:T(a,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if("="===i)a.state=A.ATTRIB_VALUE;else{if(g(i))continue;T(a,"Attribute without value"),a.tag.attributes[a.attribName]="",a.attribValue="",M(a,"onattribute",{name:a.attribName,value:""}),a.attribName="",">"===i?B(a):f(p,i)?(a.attribName=i,a.state=A.ATTRIB_NAME):(T(a,"Invalid attribute name"),a.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(g(i))continue;h(i)?(a.q=i,a.state=A.ATTRIB_VALUE_QUOTED):(a.opt.unquotedAttributeValues||L(a,"Unquoted attribute value"),a.state=A.ATTRIB_VALUE_UNQUOTED,a.attribValue=i);continue;case A.ATTRIB_VALUE_QUOTED:if(i!==a.q){"&"===i?a.state=A.ATTRIB_VALUE_ENTITY_Q:a.attribValue+=i;continue}F(a),a.q="",a.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:g(i)?a.state=A.ATTRIB:">"===i?B(a):"/"===i?a.state=A.OPEN_TAG_SLASH:f(p,i)?(T(a,"No whitespace between attributes"),a.attribName=i,a.attribValue="",a.state=A.ATTRIB_NAME):T(a,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(!V(i)){"&"===i?a.state=A.ATTRIB_VALUE_ENTITY_U:a.attribValue+=i;continue}F(a),">"===i?B(a):a.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(a.tagName)">"===i?G(a):f(m,i)?a.tagName+=i:a.script?(a.script+="</"+a.tagName,a.tagName="",a.state=A.SCRIPT):(g(i)||T(a,"Invalid tagname in closing tag"),a.state=A.CLOSE_TAG_SAW_WHITE);else{if(g(i))continue;y(p,i)?a.script?(a.script+="</"+i,a.state=A.SCRIPT):T(a,"Invalid tagname in closing tag."):a.tagName=i}continue;case A.CLOSE_TAG_SAW_WHITE:if(g(i))continue;">"===i?G(a):T(a,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var c,S;switch(a.state){case A.TEXT_ENTITY:c=A.TEXT,S="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:c=A.ATTRIB_VALUE_QUOTED,S="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:c=A.ATTRIB_VALUE_UNQUOTED,S="attribValue"}if(";"===i){var v=N(a);a.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(v)?(a.entity="",a.state=c,a.write(v)):(a[S]+=v,a.entity="",a.state=c)}else f(a.entity.length?C:d,i)?a.entity+=i:(T(a,"Invalid character in entity name"),a[S]+="&"+a.entity+i,a.entity="",a.state=c);continue;default:throw new Error(a,"Unknown state: "+a.state)}a.position>=a.bufferCheckPosition&&function(t){for(var a=Math.max(e.MAX_BUFFER_LENGTH,10),o=0,i=0,n=r.length;i<n;i++){var s=t[r[i]].length;if(s>a)switch(r[i]){case"textNode":I(t);break;case"cdata":M(t,"oncdata",t.cdata),t.cdata="";break;case"script":M(t,"onscript",t.script),t.script="";break;default:L(t,"Max buffer length exceeded: "+r[i])}o=Math.max(o,s)}var l=e.MAX_BUFFER_LENGTH-o;t.bufferCheckPosition=l+t.position}(a);return a}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;I(e=this),""!==e.cdata&&(M(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(M(e,"onscript",e.script),e.script="")}},t||(t=function(){});var o=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function i(e,r){if(!(this instanceof i))return new i(e,r);t.apply(this),this._parser=new a(e,r),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,o.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}i.prototype=Object.create(t.prototype,{constructor:{value:i}}),i.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=require("string_decoder").StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},i.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},i.prototype.on=function(e,r){var a=this;return a._parser["on"+e]||-1===o.indexOf(e)||(a._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),a.emit.apply(a,t)}),t.prototype.on.call(a,e,r)};var n="[CDATA[",s="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",c={xml:l,xmlns:u},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function h(e){return'"'===e||"'"===e}function V(e){return">"===e||g(e)}function f(e,t){return e.test(t)}function y(e,t){return!f(e,t)}var S,v,b,A=0;for(var P in e.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var r=e.ENTITIES[t],a="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=a})),e.STATE)e.STATE[e.STATE[P]]=P;function X(e,t,r){e[t]&&e[t](r)}function M(e,t,r){e.textNode&&I(e),X(e,t,r)}function I(e){e.textNode=w(e.opt,e.textNode),e.textNode&&X(e,"ontext",e.textNode),e.textNode=""}function w(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function L(e,t){return I(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,X(e,"onerror",t),e}function D(e){return e.sawRoot&&!e.closedRoot&&T(e,"Unclosed root tag"),e.state!==A.BEGIN&&e.state!==A.BEGIN_WHITESPACE&&e.state!==A.TEXT&&L(e,"Unexpected end"),I(e),e.c="",e.closed=!0,X(e,"onend"),a.call(e,e.strict,e.opt),e}function T(e,t){if("object"!=typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&L(e,t)}function x(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,M(e,"onopentagstart",r)}function _(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),a=r[0],o=r[1];return t&&"xmlns"===e&&(a="xmlns",o=""),{prefix:a,local:o}}function F(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=_(e.attribName,!0),r=t.prefix,a=t.local;if("xmlns"===r)if("xml"===a&&e.attribValue!==l)T(e,"xml: prefix must be bound to "+l+"\nActual: "+e.attribValue);else if("xmlns"===a&&e.attribValue!==u)T(e,"xmlns: prefix must be bound to "+u+"\nActual: "+e.attribValue);else{var o=e.tag,i=e.tags[e.tags.length-1]||e;o.ns===i.ns&&(o.ns=Object.create(i.ns)),o.ns[a]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,M(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function B(e,t){if(e.opt.xmlns){var r=e.tag,a=_(e.tagName);r.prefix=a.prefix,r.local=a.local,r.uri=r.ns[a.prefix]||"",r.prefix&&!r.uri&&(T(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=a.prefix);var o=e.tags[e.tags.length-1]||e;r.ns&&o.ns!==r.ns&&Object.keys(r.ns).forEach((function(t){M(e,"onopennamespace",{prefix:t,uri:r.ns[t]})}));for(var i=0,n=e.attribList.length;i<n;i++){var s=e.attribList[i],l=s[0],u=s[1],c=_(l,!0),p=c.prefix,m=c.local,d=""===p?"":r.ns[p]||"",C={name:l,value:u,prefix:p,local:m,uri:d};p&&"xmlns"!==p&&!d&&(T(e,"Unbound namespace prefix: "+JSON.stringify(p)),C.uri=p),e.tag.attributes[l]=C,M(e,"onattribute",C)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),M(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=A.TEXT:e.state=A.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function G(e){if(!e.tagName)return T(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=A.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=A.SCRIPT);M(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var a=r;t--;){if(e.tags[t].name===a)break;T(e,"Unexpected close tag")}if(t<0)return T(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=A.TEXT);e.tagName=r;for(var o=e.tags.length;o-- >t;){var i=e.tag=e.tags.pop();e.tagName=e.tag.name,M(e,"onclosetag",e.tagName);var n={};for(var s in i.ns)n[s]=i.ns[s];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&i.ns!==l.ns&&Object.keys(i.ns).forEach((function(t){var r=i.ns[t];M(e,"onclosenamespace",{prefix:t,uri:r})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=A.TEXT}function N(e){var t,r=e.entity,a=r.toLowerCase(),o="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[a]?e.ENTITIES[a]:("#"===(r=a).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),o=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),o=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||o.toLowerCase()!==r?(T(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function E(e,t){"<"===t?(e.state=A.OPEN_WAKA,e.startTagPosition=e.position):g(t)||(T(e,"Non-whitespace before first tag."),e.textNode=t,e.state=A.TEXT)}function O(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}A=e.STATE,String.fromCodePoint||(S=String.fromCharCode,v=Math.floor,b=function(){var e,t,r=[],a=-1,o=arguments.length;if(!o)return"";for(var i="";++a<o;){var n=Number(arguments[a]);if(!isFinite(n)||n<0||n>1114111||v(n)!==n)throw RangeError("Invalid code point: "+n);n<=65535?r.push(n):(e=55296+((n-=65536)>>10),t=n%1024+56320,r.push(e,t)),(a+1===o||r.length>16384)&&(i+=S.apply(null,r),r.length=0)}return i},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:b,configurable:!0,writable:!0}):String.fromCodePoint=b)}})),define("DS/VCXWebInteropSMG/VCXSmgLoaderCrypto",["UWA/Class"],(function(e){"use strict";return e.extend({init:function(){this.CRYPTO_DELTA=1754008087,this.strKEY="a??????bc??de????????fghi????jklmno????pqrstu??????vwxyzA??????BC??DE????????FGHI????JKLMNO????PQRSTU??VWXYZ0123456789",this.m_pKey=null,this.m_pKey=[0,0,0,0];for(var e=0;e<4;e++)this.m_pKey[e]=0},SetKey:function(e){if(4===e.length)for(var t=0;t<4;t++)this.m_pKey[t]=4294967295&e[t]},TEACodelong_A:function(e){if(2!==e.length)return[];for(var t=e[0],r=e[1],a=0,o=Math.floor(this.CRYPTO_DELTA),i=32;i-- >0;)a+=4294967295&o,r=r+(((t=t+((r<<4&4294967295)+this.m_pKey[0]&4294967295^r+a&4294967295^(r>>5&4294967295)+this.m_pKey[1]&4294967295)&4294967295)<<4&4294967295)+this.m_pKey[2]&4294967295^t+a&4294967295^(t>>5&4294967295)+this.m_pKey[3]&4294967295)&4294967295;return e[0]=t,e[1]=r,e},TEACode:function(e){if(null!=e&&e instanceof Array&&(0==e.length||null==e[0]||"number"==typeof e[0])||null===e)return this.TEACodelong_A(e);if("string"==typeof e||null===e)return this.TEACodejava_lang_String(e);throw new Error("invalid overload")},TEADecodelong_A:function(e){if(2!==e.length)return[];var t,r=32,a=e[0],o=e[1],i=Math.floor(this.CRYPTO_DELTA);for(t=i<<5&4294967295;r-- >0;)a=a-(((o=o-((a<<4&4294967295)+this.m_pKey[2]&4294967295^a+t&4294967295^((4294967295&a)>>>5)+this.m_pKey[3]&4294967295)&4294967295)<<4&4294967295)+this.m_pKey[0]&4294967295^o+t&4294967295^((4294967295&o)>>>5)+this.m_pKey[1]&4294967295)&4294967295,t-=i,t&=4294967295;return e[0]=a,e[1]=o,e},TEADecode:function(e){if(null!=e&&e instanceof Array&&(0==e.length||null==e[0]||"number"==typeof e[0])||null===e)return this.TEADecodelong_A(e);if("string"==typeof e||null===e)return this.TEADecodejava_lang_String(e);throw new Error("invalid overload")},TEACodejava_lang_String:function(e){var t=e;if(t.split("-").join(""),t.split("_").join(""),t.split(".").join(""),t.split("/").join(""),0===t.length)return"";if(0!==t.length%16)return"";t.toUpperCase();for(var r="";t.length>0;){var a=t.substring(0,Math.min(8,t.length));a=(a=t.substring(0,Math.min(16,t.length))).substring(t.length-8,t.length),this.TEACodelong_A([0,0]);r+=void 0,t.length<=16?t="":(t=a.substring(t.length-16,t.length),t+="-")}return r},TEADecodejava_lang_String:function(e){var t=e;if(t.split("-").join(""),t.split("_").join(""),t.split(".").join(""),t.split("/").join(""),0===t.length)return"";if(0!==t.length%16)return"";t.toUpperCase();for(var r="";t.length>0;){var a=t.substring(0,Math.min(8,t.length));a=(a=t.substring(0,Math.min(16,t.length))).substring(t.length-8,t.length),this.TEADecodelong_A([0,0]);r+=void 0,t.length<=16?t="":(t=a.substring(t.length-16,t.length),t+="-")}return r}})})),define("DS/VCXWebInteropSMG/VCXSmgXmlDataStorage",["UWA/Class"],(function(e){"use strict";return e.extend({init:function(){this._bIsModifMapUpdated=!1,this._smgXmlDocument=null,this._smgXmlRelativePath=null,this._components=[],this._mapComponentGuids=new Map},SetSmgXmlDocument:function(e){e&&(this._bIsModifMapUpdated=!1,this._smgXmlDocument=e)},GetSmgXmlDocument:function(){return this._smgXmlDocument},SetSmgXmlRelativePath:function(e){e&&(this._smgXmlRelativePath=e)},GetSmgXmlRelativePath:function(){return this._smgXmlRelativePath},GetSmgXmlServerModifNode:function(){if(this._smgXmlDocument){var e=this._smgXmlDocument.Server;return this.getServerFromType(e,"CLitServerModifiable")[0]}},GetSmgXmlViewsNode:function(){if(this._smgXmlDocument){var e=this._smgXmlDocument.Server;return this.getServerFromType(e,"CLitList")}},GetSmgXmlPropertyDefinitions:function(){if(this._smgXmlDocument){var e=this._smgXmlDocument.Server;return this.getServerFromType(e,"PropertyDefinitions")}},AddComponent:function(e){e&&(this._bIsModifMapUpdated=!1,this._components.push(e))},GetComponents:function(){return this._components},GetComponentsMap:function(){return!1===this._bIsModifMapUpdated&&this.ComputeModifiablesMap(),this._mapComponentGuids},ComputeModifiablesMap:function(){for(var e=0;e<this._components.length;e++){var t=this._components[e];if(t){var r=t.GetGUID();this.GetChildrenAndFillMap(t,r)}}this._bIsModifMapUpdated=!0},GetChildrenAndFillMap:function(e,t){this._mapComponentGuids.set(t,e);for(var r=e.QueryInterface("VCXIModelNavigable").getChildren(),a=0;a<r.length;a++){var o=r[a];if(o){var i=o.QueryInterface("VCXIModifiable");if(i)if(e=i.GetObject()){var n=t+"."+e.GetGUID();this.GetChildrenAndFillMap(e,n)}}}},getServerFromType:function(e,t){for(var r=[],a=0;a<e.length;a++){var o=e[a];o["@attributes"].Type===t&&r.push(o)}return r}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderInflate",["UWA/Class","ZipJS/inflate"],(function(e,t){"use strict";return e.extend({Inflate:function(e){var t=gztools.getZstream(),r=new Uint8Array(512),a=!1;t.inflateInit(),t.next_out=r;var o,i,n=[],s=0,l=0;if(0!==e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=512,0!==t.avail_in||a||(t.next_in_index=0,a=!0),o=t.inflate(0),a&&-5===o)return-1;if(0!==o&&1!==o)break;if(t.next_out_index&&(512===t.next_out_index?n.push(new Uint8Array(r)):n.push(new Uint8Array(r.subarray(0,t.next_out_index))),l+=t.next_out_index,1===o))break}while(t.avail_in>0||0===t.avail_out);return i=new Uint8Array(l),n.forEach((function(e){i.set(e,s),s+=e.length})),i}}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderTools",["UWA/Class","DS/Visualization/ThreeJS_DS","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueFrame","DS/VCXWebProperties/VCXPropertyValuePoint2D","DS/VCXWebProperties/VCXPropertyValuePoint","DS/VCXWebProperties/VCXPropertyValueLocation","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXPropertyValueVector","DS/VCXWebProperties/VCXPropertyValueAnchor","DS/VCXWebProperties/VCXPropertyValueDate","DS/VCXWebProperties/VCXPropertyValueDocId","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueFont","DS/VCXWebInteropSMG/VCXSmgLoaderCrypto","i18n!DS/VCXWebInteropSMG/assets/nls/VCXWebInteropSMG"],(function(e,t,r,a,o,i,n,s,l,u,c,p,m,d,C,g,h,V,f,y){"use strict";var S=e.singleton({fillMatrix:function(e,r){var a=new t.Matrix4;if(void 0===e)return a;var o=e.Origin,i=e.VX,n=e.VY,s=e.VZ;if(void 0!==o&&void 0!==i&&void 0!==n){var l,u=new t.Vector3(parseFloat(i["@attributes"].X.replace(",",".")),parseFloat(i["@attributes"].Y.replace(",",".")),parseFloat(i["@attributes"].Z.replace(",","."))),c=new t.Vector3(parseFloat(n["@attributes"].X.replace(",",".")),parseFloat(n["@attributes"].Y.replace(",",".")),parseFloat(n["@attributes"].Z.replace(",",".")));!0===r||void 0===s?((l=new t.Vector3).crossVectors(u,c),u.normalize(),l.normalize(),c.crossVectors(l,u)):l=new t.Vector3(parseFloat(s["@attributes"].X.replace(",",".")),parseFloat(s["@attributes"].Y.replace(",",".")),parseFloat(s["@attributes"].Z.replace(",","."))),a.set(u.x,c.x,l.x,parseFloat(o["@attributes"].X.replace(",",".")),u.y,c.y,l.y,parseFloat(o["@attributes"].Y.replace(",",".")),u.z,c.z,l.z,parseFloat(o["@attributes"].Z.replace(",",".")),0,0,0,1)}return a},fillPropertyValue:function(e,f,S){var v=null;switch(f){case"VCXPropertyValueString":var b;if(v=new r,e["@attributes"]&&(b="1"===e["@attributes"].Crypted?y["Property.EncryptedValue"]:e["@attributes"].Value),e.Line)for(var A=0;A<e.Line.length;A++)b?b+="\n":b="",b+=e.Line[A]["@attributes"].Value;var P=b;v.SetValue(P);break;case"VCXPropertyValueColor":var X=e["@attributes"];v=new p;var M=new t.Color;M.setRGB(X.R/255,X.G/255,X.B/255),v.SetValue(M);break;case"VCXPropertyValueVector":v=new m;X=e["@attributes"];var I=new t.Vector3(parseFloat(X.X.replace(",",".")),parseFloat(X.Y.replace(",",".")),parseFloat(X.Z.replace(",",".")));v.SetValue(I);break;case"VCXPropertyValueFloat":v=new a;var w=e["@attributes"].Value;v.SetValue(parseFloat(w));break;case"VCXPropertyValueInt":v=new o;w=e["@attributes"].Value;v.SetValue(parseInt(w));break;case"VCXPropertyValueHyperlinkId":v=w=e["@attributes"].Value;break;case"VCXPropertyValueBoolean":v=new n;var L=!1;("true"===(w=e["@attributes"].Value)||parseInt(w)>0)&&(L=!0),v.SetValue(L);break;case"VCXPropertyValueFrame":var D=this.fillMatrix(e.Frame?e.Frame:e,!1);(v=new s).SetValue(D);break;case"VCXPropertyValuePoint2D":var T=e["@attributes"];(v=new l).SetValue(new t.Vector2(parseFloat(T.X.replace(",",".")),parseFloat(T.Y.replace(",","."))));break;case"VCXPropertyValuePoint":T=e["@attributes"];(v=new u).SetValue(new t.Vector3(parseFloat(T.X.replace(",",".")),parseFloat(T.Y.replace(",",".")),parseFloat(T.Z.replace(",","."))));break;case"VCXPropertyValueLocation":var x=this.fillMatrix(e.Frame,!1),_=this.fillMatrix(e.Pivot,!1);v=new c;var F=new s;F.SetValue(x),v.SetFrame(F);var B=new s;B.SetValue(_),v.SetPivot(B);break;case"VCXPropertyValueAnchor":x=this.fillMatrix(e.Frame,!0),v=new d;var G=new s;if(G.SetValue(x),v.SetValueFrame(G),void 0!==(X=e["@attributes"])){var N=X.AttachId,E=S.ComponentsMap.GetComponentFromID(N);E&&v.SetValueLinkFromComponent(E)}break;case"VCXPropertyValueEnum":v=new i;w=e["@attributes"].Value;v.SetValue(parseInt(w));break;case"VCXPropertyValueDate":T=e["@attributes"];var O=new Date(T.Year,T.Month-1,T.Day,T.Hour,T.Min,T.Sec);v=new C(O);break;case"VCXPropertyValueDocId":(v=new g(O)).SetValue(-1);break;case"VCXPropertyValueMap":v=new h;break;case"VCXPropertyValueFont":if(v=new V,T=e["@attributes"]){if(T.FaceName){var W=T.FaceName;"MS Shell Dlg"===W&&(W="Microsoft Sans Serif"),v.SetFamily(new r(W))}if(T.Height&&v.SetHeight(new a(-parseFloat(T.Height)/1.33333)),T.Weight&&v.SetWeight(new o(parseInt(T.Weight))),T.Italic){L=!1;("true"===T.Italic||parseInt(T.Italic)>0)&&(L=!0),v.SetItalic(new n(L))}if(T.Underline){L=!1;("true"===T.Underline||parseInt(T.Underline)>0)&&(L=!0),v.SetUnderline(new n(L))}if(T.StrikeOut){L=!1;("true"===T.StrikeOut||parseInt(T.StrikeOut)>0)&&(L=!0),v.SetCrossline(new n(L))}}}return v},getPropertiesDicoFromWebComponent:function(e){S._factory&&S._factory._mapComponentConverter||console.warn("Properties dictionary is not set");var t=S._factory._mapComponentConverter.get(e);return t?t.getPropertiesDescription():(console.warn("Can't find any property name translation"),null)},getPropertiesDicoFromWebType:function(e){if(!S._factory)return null;var t=S._factory.getV1Ids();if(!t)return null;for(var r in t)if(t[r]&&t[r].classname===e){var a=new t[r].classFcntName;return a?a.getPropertiesDescription():(console.warn("Can't find any property name translation"),null)}},getPropertiesDicoFromWebTypeWithInheritance:function(e){if(!S._factory||!S._factory._mapComponentConverter)return null;var t=S.getPropertiesDicoFromWebType(e);return S._factory._mapComponentConverter.forEach((function(r,a){a&&a.IsKindOf(e)&&r&&(t=UWA.extend(t,r.getPropertiesDescription()))})),t},getPropertiesDicoFromV1Type:function(e){if(!S._factory)return null;var t=S._factory.getV1Ids();if(!t)return null;var r=new t[e].classFcntName;return r?r.getPropertiesDescription():(console.warn("Can't find any property name translation"),null)},_getAnchorIds:function(e,t){var r=[];t.forEach((function(e,t){var a=e;if("VCXPropertyValueAnchor"===a.GetType()){var o=a.GetValue();o&&o[0].Value&&r.push(o[0].Value)}}));var a=e.GetHashing();if(a){var o=e.ExperienceBase.getManager("VCXScenarioManager").GetNeutrals(a);if(o&&o._map)for(var i in o._map)if(o._map.hasOwnProperty(i)){var n=o.GetProperty(i).GetPropertyValue();if(n&&"VCXPropertyValueAnchor"===n.GetType()){var s=n.GetValue();s&&s[0].Value&&r.push(s[0].Value)}}}return r},getLinkedPropertyFromParent:function(e,t,r,a){var o="";if(o="$(#"+(t||"")+"#"+e+")",r.length){var i=a[r[0]];if(t){for(var n=i.QueryInterface("VCXIModelNavigable"),s=0;s<t;++s){if(!n){console.warn("Invalid string");break}n=n.getParent()}i=n.GetObject()}if(i){var l=S.getPropertiesDicoFromWebComponent(i);l&&l[e]&&(o=o.replace(e,l[e].name))}}return o},getNeutralPropertyValue:function(e,t){var r=null;if(!e)return r;var a=e.ExperienceBase.getManager("VCXScenarioManager").GetNeutrals(e.GetHashing());if(a&&a._map.hasOwnProperty(t)){var o=a.GetProperty(t);o&&(r=o.GetPropertyValue().GetValue())}return r},translateLinkedPropertyString:function(e,t,r,a,o,i){if(!e)return o;var n=this.getNeutralPropertyValue(t,"Collab.Text.LinkedProperty"),s=this.getNeutralPropertyValue(t,"Collab.Text.LinkedParentLevel");if(!o&&!r){if(!a)return"";r=n}a||(a=s);var l=e.ComponentsMap.GetComponentTable();if(!l)return o;var u="",c=this._getAnchorIds(t,i);if(c.length>0&&r&&"Text String"!==r)u=this.getLinkedPropertyFromParent(r,a,c,l);else if(o&&a&&c.length>0&&n&&"Text String"!==n)u=this.getLinkedPropertyFromParent(n,a,c,l);else if(o){u=o;var p=o.match(/([^$]|^)\$\(([0-9a-zA-Z.|_#-\s]*)\)+/g);if(p)for(var m=0;m<p.length;++m){var d=p[m];if(d){var C=d.substring(d.indexOf("(")+1,d.lastIndexOf("#")),g=d.substring(d.lastIndexOf("#")+1,d.length-1),h=l[C],V=""!==C&&!isNaN(C);if(h||V){for(var f="",y=0;y<d.length&&"$"!==d[y];)f+=d[y++];if(f+="$(",h?f+=C+"#0":V&&(f+="#"+C),f+="#"+g+")",h||(h=c.length?l[c[0]]:t.GetObject()),h){var v=S.getPropertiesDicoFromWebComponent(h),b=v&&v[g]?v[g].name:null;if(!b){var A=e.getManager("VCXMetaPropertyManager");(A&&A._MetaPropertyDef?A._MetaPropertyDef[g]:null)&&(b=g)}b?(f=f.replace(g,b),u=u.replace(d,f)):(u=u.replace(d," ? "),console.log("Warning : a property referenced by collab string : "+g+" doesn't exist - Check if property is imported"))}}else console.log("VCXSmgLoaderTools.translateLinkedPropertyString : Regex problem")}}}else""===o&&r&&"Text String"===r&&(u=" ");return u},_reflectCRC:function(e,t){for(var r=0,a=1;a<t+1;a++)0!=(1&e)&&(r|=1<<t-a),e>>=1,e&=4294967295;return r},calcCRC:function(e){var t=e.length;if(0===e.length||0===t)return 0;for(var r=function(e){for(var t=[];e-- >0;)t.push(0);return t}(256),a=0;a<=255;a++){r[0|a]=this._reflectCRC(a,8)<<24&4294967295;for(var o=0;o<8;o++)r[a]=4294967295&(r[a]<<1&4294967295^(0!=(-2147483648&r[a]&4294967295)?79764919:0));r[a]=this._reflectCRC(r[a],32)}var i=-1,n=e,s=i;for(a=0;t-- >0;){var l=0|s,u=l>>>8,c=255&l,p=n[a++],m=255&(c^p)|0,d=r[m];s=4294967295&(u^d),t-- >0&&(s=4294967295&((u=(l=0|s)>>>8)^(d=r[m=255&((c=255&l)^(p=0))|0])))}var C=4294967295^(i=s);return C<0?C>>>0:C},_ulong:function(e){return e<0?e>>>0:e},decodeOptions:function(e,t){var r=this._ulong(t),a=[];a[0]=305419896,a[1]=591751049|r,a[2]=878082192,a[3]=247375429;for(var o=[],i=0;i<e.length;i++)o[i]=4294967295&e[i];var n=new f;n.SetKey(a);var s=n.TEADecode(o),l=0,u=s[1]&r;return u!==r&&u!==s[1]||(l=s[0]),this._ulong(l)},loadXMLString:function(e){var t;window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e));return t},xmlToJson:function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var r=0;r<e.attributes.length;r++){var a=e.attributes.item(r);t["@attributes"][a.nodeName]=a.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++){var i=e.childNodes.item(o),n=i.nodeName;if(void 0===t[n])t[n]=this.xmlToJson(i);else{if(void 0===t[n].push){var s=t[n];t[n]=[],t[n].push(s)}t[n].push(this.xmlToJson(i))}}return t},RelativeToAbsolute:function(e,t){for(var r=e.split("/"),a=t.split("/"),o=0;o<a.length;o++)"."!=a[o]&&".."!=a[o]&&r.push(a[o]);return r.join("/")}});return S})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiable",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueEnum","DS/WebRBTree/WebRBIterator"],(function(e,t,r,a,o,i){"use strict";var n={"Actor.Name":{name:"Actor.Name",type:"VCXPropertyValueString"},"Text.StayOnTop":{name:"Actor.IsAlwaysOnTop",type:"VCXPropertyValueBoolean"},"Actor.ToolTip":{name:"Actor.ToolTip",type:"VCXPropertyValueString"},"Actor.LinkedToolTipPropertyName":{name:null,type:"VCXPropertyValueString"},Link:{name:"Actor.Hyperlink",type:"VCXPropertyValueHyperlinkId"},"Actor.Color":{name:"Actor.Color",type:"VCXPropertyValueColor"},"Actor.Alpha":{name:"Actor.Opacity",type:"VCXPropertyValueFloat"},"Actor.Location":{name:"Actor.Position",type:"VCXPropertyValueLocation"},"Actor.Interpolator.Location":{name:"Actor.Interpolation.Type",type:"VCXPropertyValueEnum"},"Actor.BomId":{name:"Actor.BomId",type:"VCXPropertyValueString"}};return e.extend({getPropertiesDescription:function(){return UWA.extend({},n)},getPropertiesMap:function(e,o,s,l,u){var c=new Map,p=null,m=null;for(var d in s){var C=s[d],g=n[d];if(g){var h=t.fillPropertyValue(C,g.type,o);switch(d){case"Actor.ToolTip":p=h.Value,h=null;break;case"Actor.LinkedToolTipPropertyName":m=h.Value;break;case"Actor.Color":if(void 0!==C["@attributes"]){var V=new r,f=C["@attributes"].Defined;V.SetValue("0"!==f),c.set("Actor.Color.Defined",V),h._bDefined="0"!==f}break;case"Actor.Alpha":h.Value/=255;break;case"Actor.Interpolator.Location":if(void 0!==C["@attributes"]&&void 0!==C["@attributes"].Value)switch(parseInt(C["@attributes"].Value)){case 0:default:h.SetValue(0);break;case 2:case 4:h.SetValue(1)}else h=null;break;case"Actor.BomId":"string"!=typeof h.Value&&(h=null);break;case"Link":var y=t.fillPropertyValue(C,"VCXPropertyValueHyperlinkId",o),S=null;if(y.indexOf("file://")>=0){var v=y.lastIndexOf("\\"),b=y.substring(v+1),A=l[b.toLowerCase()];A&&(S=o.getManager("VCXDocManager").BuildPathFromString(A,b))}else if(y)if(y.indexOf("view://")>=0){var P=y.substring(7);S=o.getManager("VCXDocManager").BuildPathFromLink(P)}else if(y.indexOf("previous://")>=0||y.indexOf("next://")>=0||y.indexOf("first://")>=0||y.indexOf("last://")>=0){v=y.indexOf("ref:");var X=y.substring(v+4);y="scenario://"+X,S=o.getManager("VCXDocManager").BuildPathFromString(y,"")}else if(y.indexOf("http://")>=0||y.indexOf("https://")>=0||y.indexOf("ftp://")>=0)S=o.getManager("VCXDocManager").BuildPathFromString(y,"");else{var M=o.getManager("VCXSequenceManager").GetListSequencesFromType(0)[0].GetListScenariosId()[0],I=o.ComponentsMap.GetComponentFromID(M),w=null,L="";y.indexOf("play://")>=0?(w=2,L=y.substring(7)):y.indexOf("marker://")>=0?(w=3,L=y.substring(9)):y.indexOf("playmarkersequence://")>=0&&(w=4,L=y.substring(21));var D=I.GetTrackMarkers();if(D)for(var T=D._treekeys,x=new i(T),_=x.next();null!==_;){var F=_.GetValue().GetValue(),B=o.ComponentsMap.GetComponentFromID(F);if(B)if(B.GetName()===L){S=o.getManager("VCXDocManager").BuildPathFromLink(F,w);break}_=x.next()}S||2!==w&&4!==w||(S=o.getManager("VCXDocManager").BuildPathFromLink(M,w))}h=o.getManager("VCXDocManager").AddOrModifyHyperlink(S)}g.name&&h&&c.set(g.name,h)}else if("Meta."===d.slice(0,5)){var G=o.getManager("VCXMetaPropertyManager").GetMetaPropertyDef(d);if(G)(h=t.fillPropertyValue(C,G.GetType(),o))?c.set(d,h):console.log("smgloader : meta fillPropertyValue FAILED");else console.log("smgloader : meta property def NOT FOUND")}}if(m||p){var N;if(m&&"Label String"!==m){var E="";m.startsWith("niveau ")>0?(E=m.substring(7),m="Actor.Name"):m.startsWith("level ")>0&&(E=m.substring(6),m="Actor.Name"),N="$(#"+E+"#"+m+")"}else N=p;if(N){N=N.replace("Actor.Alpha","Actor.Opacity");var O=new a;O.Value=N,c.set("Actor.ToolTip",O)}}return c}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiable"],(function(e,t,r){"use strict";var a={};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);l,u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableOccurrence",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiable"],(function(e,t,r){"use strict";var a={"Actor.LayerOpacity":{name:"Actor.LayerOpacity",type:"VCXPropertyValueFloat"},"Actor.Rendering":{name:"Actor.Rendering",type:"VCXPropertyValueEnum"},"Actor.Priority":{name:"Actor.Priority",type:"VCXPropertyValueEnum"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);if("Actor.LayerOpacity"===l)p.Value/=256;u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrow",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueBoolean","i18n!DS/VCXWebInteropSMG/assets/nls/VCXWebInteropSMG"],(function(e,t,r,a,o,i){"use strict";var n=0,s=1,l=2,u=3,c=!1,p={"Actor.Color":{name:"Arrow.Body.Color",type:"VCXPropertyValueColor"},"ActorArrow.Bg.Opacity":{name:"Arrow.Body.Color.Opacity",type:"VCXPropertyValueFloat"},"Actor.Gradient":{name:null,type:"VCXPropertyValueBoolean"},"ActorArrow.Border":{name:"Collab.Border.Show",type:"VCXPropertyValueBoolean"},"ActorArrow.Border.Type":{name:"Collab.Border.Line.Type",type:"VCXPropertyValueEnum"},"ActorArrow.Border.Width":{name:"Collab.Border.Line.Width",type:"VCXPropertyValueFloat"},"ActorArrow.Border.Color":{name:"Collab.Border.Line.Color",type:"VCXPropertyValueColor"},"ActorArrow.Border.Opacity":{name:"Collab.Border.Line.Color.Opacity",type:"VCXPropertyValueFloat"},"Actor.Thickness":{name:"Arrow.Width.1",type:"VCXPropertyValueFloat"},"Actor.Thickness2":{name:"Arrow.Width.1",type:"VCXPropertyValueFloat"},"ActorArrow.Thickness":{name:"Arrow.Width.1",type:"VCXPropertyValueFloat"},"ActorArrow.Thickness2":{name:"Arrow.Width.1",type:"VCXPropertyValueFloat"},"ActorArrow.Extremity":{name:null,type:"VCXPropertyValueInt"},"ActorArrow.Extremity.Head":{name:null,type:"VCXPropertyValueFloat"},"ActorArrow.Extremity.x":{name:null,type:"VCXPropertyValueFloat"},"ActorArrow.Extremity.y":{name:null,type:"VCXPropertyValueFloat"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),p)},getPropertiesMap:function(e,r,m,d,C){var g=this._parent(e,r,m,d,C),h=!1,V=!1,f=!1,y=!1,S=!1,v=!1;if(!0===(m["ActorArrow.OldVersion"]&&m["ActorArrow.OldVersion"]["@attributes"]&&"1"===m["ActorArrow.OldVersion"]["@attributes"].Value)&&m["Actor.Thickness"]&&!e.bIsOldVersion&&(g.set("Collab.Is.Paper",new o(!0)),e.bIsOldVersion=!0,!c)){var b={level:"warning",title:i["Notification.ArrowOldVersion.Title"],message:i["Notification.ArrowOldVersion.Msg"]};r.getManager("VCXNotificationManager").addNotification(b),c=!0}for(var A in m){var P=p[A];if(P){var X=m[A],M=t.fillPropertyValue(X,P.type,r);switch(A){case"Actor.Color":v=!0,e.bodyColorPropVal=M.Clone(),g.set("Arrow.Body.2.Color",M);break;case"ActorArrow.Bg.Opacity":v=!0,M.Value/=255,e.bodyOpacity=M.Value,g.set("Arrow.Body.2.Color.Opacity",M);break;case"Actor.Gradient":v=!0,e.gradient=M.Value;break;case"ActorArrow.Border.Color":e.borderColorPropVal=M.Clone(),g.set("Collab.Border.Line.2.Color",M);break;case"ActorArrow.Border.Opacity":M.Value/=255,e.borderOpacity=M.Value,g.set("Collab.Border.Line.2.Color.Opacity",M);break;case"Actor.Thickness":if(!e.bIsOldVersion){M=null;break}M.SetValue(.25*M.GetValue()),g.set("Arrow.Width.2",M),e.smgThickness=M.Value,e.smgExtremityHead=2*e.smgThickness,e.smgExtremityX=0,e.smgPreviousExtremityY=e.smgThickness,S=!0,V=!0,f=!0,y=!0;break;case"Actor.Thickness2":if(e.bIsOldVersion)break;S=!0,e.smgThickness=M.Value,g.set("Arrow.Width.2",M);break;case"ActorArrow.Extremity":v=!0,S=!0,h=!0,e.smgExtremity=M.Value;break;case"ActorArrow.Extremity.Head":if(e.bIsOldVersion)break;S=!0,V=!0,f=!0,e.smgExtremityHead=M.Value;break;case"ActorArrow.Extremity.x":if(e.bIsOldVersion)break;S=!0,f=!0,e.smgExtremityX=M.Value;break;case"ActorArrow.Extremity.y":if(e.bIsOldVersion)break;S=!0,y=!0,e.smgPreviousExtremityY=M.Value}P.name&&M&&g.set(P.name,M)}}if(S){var I=null,w=null,L=null,D=null,T=null,x=null,_=new o,F=new o;"number"==typeof e.smgPreviousExtremityY&&"number"==typeof e.smgThickness&&(e.smgExtremityY=e.smgPreviousExtremityY-.5*e.smgThickness);var B=e.smgExtremityHead,G=e.smgExtremityY,N=-e.smgExtremityHead*e.smgExtremityX;switch(void 0!==e.smgExtremityHead&&(I=new a(B),w=new a(B)),void 0!==e.smgExtremityY&&(L=new a(G),D=new a(G)),void 0!==e.smgExtremityX&&(T=new a(N),x=new a(N)),e.smgExtremity){case n:_.SetValue(!0),F.SetValue(!1);break;case s:_.SetValue(!1),F.SetValue(!0);break;case l:_.SetValue(!0),F.SetValue(!0);break;case u:_.SetValue(!1),F.SetValue(!1)}h&&(g.set("Arrow.Head.ShowMode",_),g.set("Arrow.Head.2.ShowMode",F)),V&&(g.set("Arrow.Head.Length",I),g.set("Arrow.Head.2.Length",w)),y&&(g.set("Arrow.Head.Size",L),g.set("Arrow.Head.2.Size",D)),f&&(g.set("Arrow.Head.Shape",T),g.set("Arrow.Head.2.Shape",x))}if(v&&e.gradient){var E=new a(0);switch(e.smgExtremity){case n:g.set("Arrow.Body.2.Color.Opacity",E),g.set("Collab.Border.Line.2.Color.Opacity",E);break;case s:g.set("Arrow.Body.Color.Opacity",E),g.set("Collab.Border.Line.Color.Opacity",E)}}return g}})})),define("DS/VCXWebInteropSMG/VCXSmgGeomLoader",["UWA/Class","DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D","DS/Mesh/MeshUtils","DS/VCXWebInteropSMG/VCXSmgLoaderInflate","DS/VCXWebSystem/VCXMeshServices","DS/VCXWebIO/VCXLogServices","DS/VCXWebKernel/VCXDRMManager"],(function(e,t,r,a,o,i,n,s){"use strict";var l=0,u=8449,c=7681,p=8448,m=260,d=3042,C=34160,g=34683,h=0,V=0,f=3;return e.extend({init:function(e){this._geoms=new Map,this._experienceBase=e,this._materialManager=this._experienceBase?this._experienceBase.getManager("VCXMaterialManager"):null,this.resources=null,this.outlines=null,this.alwaysBuildIndexedTrianglesSets=!0,this.alwaysBuildIndexedLinesSets=!0,this.ignoreGeodeMatrix=!0,this.mergeGeosets=!0,this.positionInBuffer=0,this.bufferSize=0,this.version=0,this.strFileNameAssociate="",this.checksum=0,this.ulOptionsPro=[],this.ulWatermark=[],this.ulHasExpirationDate=[],this.ulStartDate=[],this.ulEndDate=[],this.ulIsRelativeExpirationDate=[],this.bHasNormals=!1,this.cCodage=100,this.ulHasSignature=0,this.strSignaturePicturePath="",this.strAgreement="",this.ulAgreementMode=0,this.ulSignatureCRC=[],this.bHasTexture=!1,this.nTriangles=0},openZStream:function(e){if(!(e.length<=10)&&e instanceof Uint8Array){if(31===e[0]&&139===e[1]){for(var t=new Uint8Array(e.length-10),r=0;r<e.length-10;r++)t[r]=e[r+10];var a=(new o).Inflate(t),i=new ArrayBuffer(a.length),n=new Uint8Array(i);for(r=0;r<a.length;r++)n[r]=a[r];var s=new DataView(i);return this.positionInBuffer=0,this.bufferSize=s.byteLength,s}}else console.log("smgGeom : Invalid bytes")},setIgnoreGeodeMatrix:function(e){this.ignoreGeodeMatrix=e},setResources:function(e){void 0!==e&&(this.resources=e)},setOutlines:function(e){void 0!==e&&(this.outlines=e)},getMapGeodes:function(){return this._geoms},getBool:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=0!==e.getInt8(this.positionInBuffer);return this.positionInBuffer+=1,t}},getChar:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=e.getInt8(this.positionInBuffer);return this.positionInBuffer+=1,t}},getWChar:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=e.getInt16(this.positionInBuffer,!0);return this.positionInBuffer+=2,t}},getWString:function(e){for(var t="",r=this.getWChar(e);0!==r&&10!==r&&void 0!==r;)t+=String.fromCharCode(r),r=this.getWChar(e);return{value:t,byteSize:2*t.length}},getString:function(e){var t="",r=0;if(this.version<6.7){for(var a=this.getChar(e);0!==a&&10!==a&&void 0!==a;)t+=String.fromCharCode(a),a=this.getChar(e);r=t.length}else{for(a=this.getWChar(e);0!==a&&10!==a&&void 0!==a;)t+=String.fromCharCode(a),a=this.getWChar(e);r=2*t.length}return{value:t,byteSize:r}},getUnsignedChar:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=e.getUint8(this.positionInBuffer);return this.positionInBuffer+=1,t}},getCharArray:function(e,t){if(!(this.positionInBuffer>=this.bufferSize)){for(var r=new Int8Array(t),a=0;a<t;a++){var o=e.getInt8(this.positionInBuffer);this.positionInBuffer+=1,r[a]=o}return r}},getUnsignedInt8Array:function(e,t){if(!(this.positionInBuffer>=this.bufferSize)){for(var r=new Uint8Array(t),a=0;a<t;a++){var o=e.getUint8(this.positionInBuffer);this.positionInBuffer+=1,r[a]=o}return r}},getUnsignedInt16Array:function(e,t){if(!(this.positionInBuffer>=this.bufferSize)){for(var r=new Uint16Array(t),a=0;a<t;a++){var o=e.getUint16(this.positionInBuffer,!0);this.positionInBuffer+=2,r[a]=o}return r}},getDouble:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=e.getFloat64(this.positionInBuffer,!0);return this.positionInBuffer+=8,t}},getFloat:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=e.getFloat32(this.positionInBuffer,!0);return this.positionInBuffer+=4,t}},getLong:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=e.getInt32(this.positionInBuffer,!0);return this.positionInBuffer+=4,t}},getUnsignedInt:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=e.getUint32(this.positionInBuffer,!0);return this.positionInBuffer+=4,t}},getUnsignedLong:function(e){if(!(this.positionInBuffer>=this.bufferSize)){var t=e.getUint32(this.positionInBuffer,!0);return this.positionInBuffer+=4,t}},getUnsignedIntArray:function(e,t){if(!(this.positionInBuffer>=this.bufferSize)){for(var r=new Uint32Array(t),a=0;a<t;a++){var o=e.getUint32(this.positionInBuffer,!0);this.positionInBuffer+=4,r[a]=o}return r}},getUnsignedLongArray:function(e,t){if(!(this.positionInBuffer>=this.bufferSize)){for(var r=new Uint32Array(t),a=0;a<t;a++){var o=e.getUint32(this.positionInBuffer,!0);this.positionInBuffer+=4,r[a]=o}return r}},getFloatArray:function(e,t){if(!(this.positionInBuffer>=this.bufferSize)){for(var r=new Float32Array(t),a=0;a<t;a++){var o=e.getFloat32(this.positionInBuffer,!0);this.positionInBuffer+=4,r[a]=o}return r}},ReadMat:function(e){var r=this.getFloatArray(e,16),a=new t.Matrix4;return a.set(r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],0,0,0,1),a},ReadMatrix:function(e){var r=this.getChar(e);if(void 0===r||!r)return!1;var a=this.getFloatArray(e,16),o=new t.Matrix4;return o.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],0,0,0,1),{hasTransfo:r,matrix:o}},DecodeFloat8:function(e,t,r){return e*(1-r/255)+t*(r/255)},DecodeFloat16:function(e,t,r){return e*(1-r/65535)+t*(r/65535)},ReadTabSglVec2f:function(e,t,r){var a=this.getChar(e);if(97!==a){var o=this.getFloat(e),i=this.getFloat(e),n=this.getFloat(e),s=this.getFloat(e);if(98===a)for(l=this.getUnsignedInt16Array(e,2*t),u=0;u<t;u++){c=2*u,p=this.DecodeFloat16(o,i,l[c++]),m=this.DecodeFloat16(n,s,l[c++]);r[2*u]=p,r[2*u+1]=m}else if(99===a)for(l=this.getUnsignedInt8Array(e,2*t),u=0;u<t;u++){c=2*u,p=this.DecodeFloat8(o,i,l[c++]),m=this.DecodeFloat8(n,s,l[c++]);r[2*u]=p,r[2*u+1]=m}}else for(var l=this.getFloatArray(e,2*t),u=0;u<t;u++){var c=2*u,p=l[c++],m=l[c++];r[2*u]=p,r[2*u+1]=m}},GetTabVector8:function(e,t,r,a,o,i,n,s,l,u,c,p,m,d,C){var g=0;if(a||o||i)for(h=0;h<t;h++)a?r[g++]=n:(r[g++]=this.DecodeFloat8(u,c,e.getUint8(this.positionInBuffer,!0)),this.positionInBuffer+=1),o?r[g++]=s:(r[g++]=this.DecodeFloat8(p,m,e.getUint8(this.positionInBuffer,!0)),this.positionInBuffer+=1),i?r[g++]=l:(r[g++]=this.DecodeFloat8(d,C,e.getUint8(this.positionInBuffer,!0)),this.positionInBuffer+=1);else for(var h=0;h<t;h++)r[g++]=this.DecodeFloat8(u,c,e.getUint8(this.positionInBuffer,!0)),this.positionInBuffer+=1,r[g++]=this.DecodeFloat8(p,m,e.getUint8(this.positionInBuffer,!0)),this.positionInBuffer+=1,r[g++]=this.DecodeFloat8(d,C,e.getUint8(this.positionInBuffer,!0)),this.positionInBuffer+=1},GetTabVector16:function(e,t,r,a,o,i,n,s,l,u,c,p,m,d,C){var g=0;if(a||o||i)for(h=0;h<t;h++)a?r[g++]=n:(r[g++]=this.DecodeFloat16(u,c,e.getUint16(this.positionInBuffer,!0)),this.positionInBuffer+=2),o?r[g++]=s:(r[g++]=this.DecodeFloat16(p,m,e.getUint16(this.positionInBuffer,!0)),this.positionInBuffer+=2),i?r[g++]=l:(r[g++]=this.DecodeFloat16(d,C,e.getUint16(this.positionInBuffer,!0)),this.positionInBuffer+=2);else for(var h=0;h<t;h++)r[g++]=this.DecodeFloat16(u,c,e.getUint16(this.positionInBuffer,!0)),this.positionInBuffer+=2,r[g++]=this.DecodeFloat16(p,m,e.getUint16(this.positionInBuffer,!0)),this.positionInBuffer+=2,r[g++]=this.DecodeFloat16(d,C,e.getUint16(this.positionInBuffer,!0)),this.positionInBuffer+=2},GetTabVector32:function(e,t,r,a,o,i,n,s,l){var u=0;if(a||o||i)for(c=0;c<t;c++)a?r[u++]=n:(r[u++]=e.getFloat32(this.positionInBuffer,!0),this.positionInBuffer+=4),o?r[u++]=s:(r[u++]=e.getFloat32(this.positionInBuffer,!0),this.positionInBuffer+=4),i?r[u++]=l:(r[u++]=e.getFloat32(this.positionInBuffer,!0),this.positionInBuffer+=4);else for(var c=0;c<t;c++)r[u++]=e.getFloat32(this.positionInBuffer,!0),this.positionInBuffer+=4,r[u++]=e.getFloat32(this.positionInBuffer,!0),this.positionInBuffer+=4,r[u++]=e.getFloat32(this.positionInBuffer,!0),this.positionInBuffer+=4},ReadIndex:function(e,t,r){if(r<256){for(var a=this.getUnsignedInt8Array(e,t),o=new Uint16Array(a.length),i=0;i<a.length;++i)o[i]=a[i];return o}return r<65536?this.getUnsignedInt16Array(e,t):this.getUnsignedIntArray(e,t)},ReadTabSglVec3f:function(e,t,r){var a=this.getChar(e),o=this.getBool(e),i=this.getBool(e),n=this.getBool(e),s=0,l=0,u=0;if(o&&(s=this.getFloat(e)),i&&(l=this.getFloat(e)),n&&(u=this.getFloat(e)),97!==a){var c=0,p=0,m=0,d=0,C=0,g=0;o||(c=this.getFloat(e),p=this.getFloat(e)),i||(m=this.getFloat(e),d=this.getFloat(e)),n||(C=this.getFloat(e),g=this.getFloat(e)),98===a?this.GetTabVector16(e,t,r,o,i,n,s,l,u,c,p,m,d,C,g):99===a&&this.GetTabVector8(e,t,r,o,i,n,s,l,u,c,p,m,d,C,g)}else this.GetTabVector32(e,t,r,o,i,n,s,l,u)},ReadTriangleSet:function(e,t,r,o){var n=this.getUnsignedInt(e),s=3*n,l=new Float32Array(3*s);this.ReadTabSglVec3f(e,s,l);var u=null;if(this.getUnsignedInt(e)!==V&&(u=new Float32Array(3*s),this.ReadTabSglVec3f(e,s,u)),this.version>=6.8)this.getUnsignedInt(e);for(var c=i.allocIndexationArray(s,s),p=0;p<s;p++)c[p]=p;return u||(u=i.computeSmoothNormalsTrianglesSet(l,c)),this.nTriangles+=n,{meshType:a.ConnectivityTypeEnum.TRIANGLES,nTriangles:n,vertexArray:l,normalsArray:u,uvArray:null,vertexIndexArray:c,normalsIndexArray:c,uvIndexArray:null,uniqueIndexation:!0,colorRGBA:new a.Color(t[0],t[1],t[2],r)}},ReadIndexedTriangleSet:function(e,r,o,n){var s=this.getUnsignedInt(e),l=this.getUnsignedInt(e),u=this.getUnsignedInt(e),c=new Float32Array(3*l);this.ReadTabSglVec3f(e,l,c);var p=this.ReadIndex(e,u,l),m=null,d=null,C=0;if(this.getUnsignedInt(e)!==V){C=this.getUnsignedInt(e);m=new Float32Array(3*C);this.ReadTabSglVec3f(e,C,m),d=this.ReadIndex(e,u,C)}else C=l,m=i.computeSmoothNormalsTrianglesSet(c,p),d=p;var g=[],h=null;if(this.version>=6.8){var y=this.getUnsignedInt(e);if(y){for(var S=this.getUnsignedInt(e),v=0;v<y;++v){if(this.getUnsignedInt(e)===f){var b=new Float32Array(2*l);this.ReadTabSglVec2f(e,l,b),g.push(b)}}h=this.ReadIndex(e,u,S);g.length&&n}}if(l!==C){console.warn("Indexed triangles set geometry should use the same indexation buffer for vertices and normals");for(var A=3*s,P=new Float32Array(3*A),X=new Float32Array(3*A),M=A<65536?new Uint16Array(A):new Uint32Array(A),I=0,w=0;w<A;++w){var L=3*p[w],D=c[L],T=c[L+1],x=c[L+2],_=m[L=3*d[w]],F=m[L+1],B=m[L+2];P[I]=D,P[I+1]=T,P[I+2]=x,X[I]=_,X[I+1]=F,X[I+2]=B,I+=3,M[w]=w}c=P,m=X,p=M,d=M}var G=this.resources&&this.resources.length?this.resources[n[0]]:null;return this.nTriangles+=s,{meshType:a.ConnectivityTypeEnum.TRIANGLES,nTriangles:s,vertexArray:c,normalsArray:m,uvArray:g.length?g[0]:null,vertexIndexArray:p,normalsIndexArray:d,uvIndexArray:g.length?h:null,uniqueIndexation:!1,colorRGBA:new a.Color(r[0],r[1],r[2],o),material:this._materialManager.getMaterialPhong((new t.Color).setRGB(r[0],r[1],r[2]),o,g.length?G:null)}},ReadIndexedTriangleStripSet:function(e,r,o,n){var s=this.getUnsignedInt(e),l=this.getUnsignedInt(e),u=this.getUnsignedInt(e),c=this.getUnsignedInt(e),p=new Float32Array(3*l);this.ReadTabSglVec3f(e,l,p);var m=this.ReadIndex(e,u,l),d=null,C=null,g=0,h=this.getUnsignedInt(e);if(h!==V){g=this.getUnsignedInt(e);d=new Float32Array(3*g);this.ReadTabSglVec3f(e,g,d),C=this.ReadIndex(e,u,g)}for(var y=this.ReadIndex(e,s,c),S=0,v=0;v<s;v++)S+=y[v]-2;h!==V||(g=l,d=i.computeSmoothNormalsStripSet(p,m,y),C=m);var b=[],A=null;if(this.version>=6.8){var P=this.getUnsignedInt(e);if(P&&P>=0&&P<=4){for(var X=this.getUnsignedInt(e),M=0;M<P;++M){var I=null;this.getUnsignedInt(e)===f&&(I=new Float32Array(X),this.ReadTabSglVec2f(e,X,I)),b.push(I)}A=this.ReadIndex(e,u,X)}}console.warn("[VCXSmgGeomLoader] : Geometry read from smgGeom should use the same indexation buffer for vertices and normals, convert to mono-indexation"),l=3*S;for(var w=i.allocIndexationArray(l,l),L=0;L<l;L++)w[L]=L;for(var D=new Float32Array(3*l),T=new Float32Array(3*l),x=0,_=0,F=0,B=0;B<s;++B){var G=y[B];for(L=0;L<G-2;++L){var N=3*m[_+L],E=3*C[_+L];D[x]=p[N],D[x+1]=p[N+1],D[x+2]=p[N+2],T[x]=d[E],T[x+1]=d[E+1],T[x+2]=d[E+2],x+=3,1&L?(N=3*m[_+L+2],E=3*C[_+L+2],D[x]=p[N],D[x+1]=p[N+1],D[x+2]=p[N+2],T[x]=d[E],T[x+1]=d[E+1],T[x+2]=d[E+2],x+=3,N=3*m[_+L+1],E=3*C[_+L+1],D[x]=p[N],D[x+1]=p[N+1],D[x+2]=p[N+2],T[x]=d[E],T[x+1]=d[E+1],T[x+2]=d[E+2],x+=3):(N=3*m[_+L+1],E=3*C[_+L+1],D[x]=p[N],D[x+1]=p[N+1],D[x+2]=p[N+2],T[x]=d[E],T[x+1]=d[E+1],T[x+2]=d[E+2],x+=3,N=3*m[_+L+2],E=3*C[_+L+2],D[x]=p[N],D[x+1]=p[N+1],D[x+2]=p[N+2],T[x]=d[E],T[x+1]=d[E+1],T[x+2]=d[E+2],x+=3),F++}_+=G}return this.nTriangles+=F,{meshType:a.ConnectivityTypeEnum.TRIANGLES,nTriangles:F,vertexArray:D,normalsArray:T,uvArray:b.length?b[0]:null,vertexIndexArray:w,normalsIndexArray:w,uvIndexArray:b.length?A:null,uniqueIndexation:!0,colorRGBA:new a.Color(r[0],r[1],r[2],o),material:this._materialManager.getMaterialPhong((new t.Color).setRGB(r[0],r[1],r[2]),o,null)}},ReadMonoIndexedTriangleStripSet:function(e,t,r,o){var n=this.getUnsignedInt(e),s=this.getUnsignedInt(e),l=this.getUnsignedInt(e),u=this.getUnsignedInt(e),c=new Float32Array(3*s);this.ReadTabSglVec3f(e,s,c);var p=this.getUnsignedInt(e),m=null;if(p!==V){m=new Float32Array(3*s);this.ReadTabSglVec3f(e,s,m)}for(var d=this.ReadIndex(e,l,s),C=this.ReadIndex(e,n,u),g=0,h=0;h<n;h++)g+=C[h]-2;p===V&&(m=i.computeSmoothNormalsStripSet(c,d,C));var y=[];if(this.version>=6.8){var S=this.getUnsignedInt(e);if(S&&S>=0&&S<=2){for(var v=0;v<S;++v){if(this.getUnsignedInt(e)===f){var b=new Float32Array(2*s);this.ReadTabSglVec2f(e,s,b),y.push(b)}}y.length&&o}}this.resources&&this.resources.length&&this.resources[o[0]];return this.nTriangles+=g,{meshType:a.ConnectivityTypeEnum.TRIANGLE_STRIP,nStrips:n,vertexArray:c,normalsArray:m,uvArray:y.length?y[0]:null,vertexIndexArray:d,normalsIndexArray:d,uvIndexArray:y.length?d:null,uniqueIndexation:!0,lengthsArray:C,colorRGBA:new a.Color(t[0],t[1],t[2],r)}},ReadLineStripSet:function(e,t,r,o){var n=this.getFloat(e);let s="WIRE_EDGE"===o?n:n-.5;var l=this.getUnsignedInt(e),u=this.getUnsignedInt(e),c=this.getUnsignedInt(e),p=new Float32Array(3*u);this.ReadTabSglVec3f(e,u,p);var m=this.ReadIndex(e,l,c),d=0;m&&(d=m.length);for(var C=0,g=0;g<d;++g)C+=m[g];var h=i.allocIndexationArray(C,C);for(g=0;g<C;g++)h[g]=g;return{meshType:a.ConnectivityTypeEnum.LINE_STRIP,nStrips:d,vertexArray:p,normalsArray:null,uvArray:null,lengthsArray:m,vertexIndexArray:h,normalsIndexArray:null,uvIndexArray:null,uniqueIndexation:!0,edgeType:o,colorRGBA:new a.Color(t[0],t[1],t[2],r),thickness:s,material:null}},ReadPointSet:function(e,t,r){this.getFloat(e);var o=this.getUnsignedInt(e),n=new Float32Array(3*o);this.ReadTabSglVec3f(e,o,n);for(var s=i.allocIndexationArray(n.size,n.size),l=0;l<n.size;l++)s[l]=l;return{meshType:a.ConnectivityTypeEnum.POINTS,nStrips:o,vertexArray:n,normalsArray:null,uvArray:null,lengthsArray:null,vertexIndexArray:s,normalsIndexArray:null,uvIndexArray:null,uniqueIndexation:!0,colorRGBA:new a.Color(t[0],t[1],t[2],r),thickness:1,material:null}},ReadGeodeUserData:function(e){var t={strId:"",idLayer:-1,strAssemblyName:"",strIssuedFrom:"",volume:-1,area:-1,ucGeometryType:0,fCofG:[],fInertiaAxes:[]};if(this.version<1.1)return t;var r=2;this.version<6.7&&(r=1);var a=this.getUnsignedInt(e),o=0;if(a>o){var i=this.getString(e);t.strId=i.value,this.version<6.7&&i.byteSize>0?o+=i.byteSize*r+r:o+=t.strId.length*r+r}else t.strId="-1";if(a>o&&(t.idLayer=this.getLong(e),o+=4),a>o){i=this.getString(e);t.strAssemblyName=i.value,this.version<6.7&&i.byteSize>0?o+=i.byteSize*r+r:o+=t.strAssemblyName.length*r+r}if(a>o&&(t.volume=this.getFloat(e),o+=4),a>o&&(t.area=this.getFloat(e),o+=4),a>o&&(t.fCofG=this.getFloatArray(e,3),o+=12),a>o&&(t.fInertiaAxes=this.getFloatArray(e,9),o+=36),a>o&&(t.ucGeometryType=this.getUnsignedChar(e),o+=1),a>o){i=this.getString(e);t.strIssuedFrom=i.value,this.version<6.7&&i.byteSize>0?o+=i.byteSize*r+r:o+=t.strIssuedFrom.length*r+r}var n=1;a>o&&(n=this.getUnsignedInt(e),o+=4);var s=a-o;if(s>0)this.getCharArray(e,s);return{userdata:t,nbLOD:n}},ReadFace:function(e,r,o){this.getString(e).value;this.version>=.8&&this.version<.9?this.getLong(e).ToString():this.getString(e).value;var n=this.getFloatArray(e,3),s=(this.getFloatArray(e,3),this.getFloatArray(e,3),this.getFloat(e),this.getFloat(e)),V=0,f=[],y=[],S=[],v=[],b=[],A=[],P=[];if(this.version>=6.8){var X=0,M=this.getUnsignedInt(e);if(M>X&&(V=this.getUnsignedInt(e),X+=4),V<=2){for(var I=0;I<V;I++){var w;if(M>X)X+=2*(w=this.getString(e).value).length+2;f.push(w.replace(/^.*[\\\/]/,""))}for(I=0;I<V;I++){var L=new t.Matrix4;M>X&&(L=this.ReadMat(e),X+=64),y.push(L)}for(I=0;I<V;I++){var D=l;M>X&&(D=this.getChar(e),X+=1),S.push(D)}for(I=0;I<V;I++){var T=!1;M>X&&(T=this.getChar(e),X+=1),v.push(0!==T)}for(I=0;I<V;I++){var x=p;M>X&&(x=this.getUnsignedInt(e),X+=4);var _=x===u;_=(_=(_=(_=(_=(_=_||x===c)||x===p)||x===m)||x===d)||x===C)||x===g,b.push(_?x:p)}for(I=0;I<V;I++){var F=h;M>X&&(F=this.getChar(e),X+=1),A.push(F)}for(I=0;I<V;I++){var B=!1;M>X&&(B=this.getChar(e),X+=1),P.push(0!==B)}}var G=M-X;if(G>0)this.getCharArray(e,G)}var N=null,E=this.getChar(e);switch(E){case 97:N=this.ReadTriangleSet(e,n,s,f);break;case 98:N=this.ReadIndexedTriangleSet(e,n,s,f);break;case 99:N=this.ReadIndexedTriangleStripSet(e,n,s,f);break;case 100:N=this.ReadMonoIndexedTriangleStripSet(e,n,s,f);break;case 101:N=this.ReadLineStripSet(e,n,s,"WIRE_EDGE");break;case 102:N=this.ReadPointSet(e,n,s);break;default:console.log("smgGeom loading : Unknown geometry type")}if(N.meshType===a.ConnectivityTypeEnum.TRIANGLE_STRIP&&this.alwaysBuildIndexedTrianglesSets)N.normalsIndexArray&&N.normalsIndexArray.length!==N.vertexIndexArray.length&&console.error("Normals : Should be always mono - indexed"),N.uvIndexArray&&N.uvIndexArray.length!==N.vertexIndexArray.length&&console.error("(u, v) : Should be always mono - indexed"),(O=i.buildIndexationFromStripSet(N.meshType,N.nStrips,N.vertexIndexArray,N.lengthsArray,N.vertexArray))&&(N.meshType=a.ConnectivityTypeEnum.TRIANGLES,N.vertexIndexArray=N.vertexIndexArray?O:null,N.normalsIndexArray=N.normalsIndexArray?O:null,N.uvIndexArray=N.uvIndexArray?O:null);else if(N.meshType===a.ConnectivityTypeEnum.LINE_STRIP&&this.alwaysBuildIndexedLinesSets){var O;(O=i.buildIndexationFromStripSet(N.meshType,N.nStrips,N.vertexIndexArray,N.lengthsArray,N.vertexArray))&&(N.meshType=a.ConnectivityTypeEnum.LINES,N.vertexIndexArray=N.vertexIndexArray?O:null)}return N},BuildMeshNode:function(e){var t=null;switch(e.meshType){case a.ConnectivityTypeEnum.TRIANGLES:t=i.buildIndexedTriangleSet(e.nbTriangles,e.vertexArray,e.normalsArray,e.uvArray,e.vertexIndexArray,e.normalsIndexArray,e.uvIndexArray,e.colorRGBA,e.material,e.isSolid);break;case a.ConnectivityTypeEnum.TRIANGLE_STRIP:this.alwaysBuildIndexedTrianglesSets&&console.log("Unexpected TRIANGLE_STRIP type"),t=i.buildMonoIndexedTriangleStripSet(e.nStrips,e.vertexArray,e.normalsArray,e.uvArray,e.vertexIndexArray,e.lengthsArray,e.colorRGBA,e.material,e.isSolid);break;case a.ConnectivityTypeEnum.LINES:t=i.buildIndexedLineSet(e.vertexArray,e.vertexIndexArray,e.colorRGBA,e.thickness,e.edgeType,e.material);break;case a.ConnectivityTypeEnum.LINE_STRIP:this.alwaysBuildIndexedLinesSets&&console.log("Unexpected LINE_STRIP type"),t=i.buildLineStripSet(e.vertexArray,e.lengthsArray,e.vertexIndexArray,e.colorRGBA,e.thickness,e.edgeType,e.material);break;case a.ConnectivityTypeEnum.POINTS:t=i.buildPointSet(e.vertexArray,e.vertexIndexArray,e.material);break;case a.ConnectivityTypeEnum.DUMMY:console.log("smgGeom loading : Mesh with 0 triangles");break;default:console.error("smgGeom loading : Unknown geometry type")}return t},ReadGeode:function(e){var t=new r,a=this.ReadMatrix(e),o=a.hasTransfo,n=a.matrix,s=this.getString(e).value,l=this.ReadGeodeUserData(e),u=l.userdata,c=l.nbLOD;for(var p=[],m=0;m<c;m++){var d=this.getUnsignedInt(e);if(0===m){for(var C=0;C<d;C++)p[C]=-1;d}for(var g=[],h=0;h<d;h++){if(118!==this.getChar(e)){console.log("smgGeom loading : Unknown geometry identifier value");break}if(c>1);else{var V=this.ReadFace(e,0,-1);if(null==V)break;V.isSolid=u&&1===u.ucGeometryType;var f=null;1!==V.colorRGBA.a&&(this._materialManager.geohasopacity=!0),!0===this.mergeGeosets?g[g.length]=V:(f=this.BuildMeshNode(V))?(f.setPickParent(!0),t.add(f)):console.error("smgGeom loading : failed to convert geometry"),V=null}}if(null!==this.outlines){var y=this.outlines.get(u.strId);if(null!=y)if(!0===this.mergeGeosets){if(y.broken)for(var S=0;S<y.broken.length;++S)g.push(y.broken[S]);if(y.construction)for(var v=0;v<y.construction.length;++v)g.push(y.construction[v]);if(y.smart)for(var b=0;b<y.smart.length;++b)g.push(y.smart[b])}else{if(y.broken)for(S=0;S<y.broken.length;++S){(A=this.BuildMeshNode(y.broken[S])).setPickParent(!0),t.add(A)}if(y.construction)for(v=0;v<y.construction.length;++v){(A=this.BuildMeshNode(y.construction[v])).setPickParent(!0),t.add(A)}if(y.smart)for(b=0;b<y.smart.length;++b){var A;(A=this.BuildMeshNode(y.smart[b])).setPickParent(!0),t.add(A)}}}!0===this.mergeGeosets&&(t=i.mergeGeosets(g),g=null)}return o&&!this.ignoreGeodeMatrix&&t&&t.setMatrix(n),{userdata:u,matrix:n,name:s,geode:t}},LoadGeometries:function(e){var t=this.openZStream(e);this.version=this.getDouble(t),this.strFileNameAssociate=this.getString(t).value,this.checksum=this.getLong(t);var r=this.getUnsignedInt(t),a=0;if(!(this.version<1.2)){var o=2;if(this.version<6.7&&(o=1),r>a&&(this.ulOptionsPro=this.getUnsignedLongArray(t,2),a+=8),r>a&&(this.ulWatermark=this.getUnsignedLongArray(t,2),a+=8),r>a&&(this.ulHasExpirationDate=this.getUnsignedLongArray(t,2),a+=8),r>a&&(this.ulStartDate=this.getUnsignedLongArray(t,2),a+=8),r>a&&(this.ulEndDate=this.getUnsignedLongArray(t,2),a+=8),r>a&&(this.ulIsRelativeExpirationDate=this.getUnsignedLongArray(t,2),a+=8),r>a?(this.bHasNormals=this.getChar(t),a+=1):this.bHasNormals=!0,r>a?(this.cCodage=this.getChar(t),a+=1):this.cCodage=100,r>a&&(this.ulHasSignature=this.getUnsignedLong(t),a+=4),r>a){var i=this.getString(t);this.strSignaturePicturePath=i.value,this.version<6.7&&i.byteSize>0?a+=i.byteSize*o:a+=this.strSignaturePicturePath.length*o}if(r>a){i=this.getString(t);this.strAgreement=i.value,this.version<6.7&&i.byteSize>0?a+=i.byteSize*o:a+=this.strAgreement.length*o}r>a&&(this.ulAgreementMode=this.getUnsignedLong(t),a+=4),r>a&&(this.ulSignatureCRC=this.getUnsignedLongArray(t,2),a+=8),r>a?(this.bHasTexture=this.getChar(t),a+=1):this.bHasTexture=!1;var n=r-a;if(n>0)this.getCharArray(t,n);var l=this._experienceBase.getManager("VCXGUIManager").getGUIServices();this.ulHasSignature&&this.ulAgreementMode!==s.LitSignatureMode.LIT_SIGNATURE_NO_DISPLAY?l.displaySignature(this._experienceBase,this,t):this.LoadGeometriesBody(t)}},LoadGeometriesBody:function(e){for(;;){var t=this.getChar(e);if(void 0===t)break;if(117===t){var r=this.ReadGeode(e);this._geoms.set(r.userdata.strId,r)}}},LoadOutlines:function(e,t){var r=this.openZStream(e);this.getUnsignedInt(r),this.getDouble(r);for(this.version=6.8;;){if(71!==this.getChar(r))break;for(var o={broken:[],construction:[],smart:[]},n=this.getWString(r),s=this.getUnsignedInt(r),l=0;l<s;++l){var u=this.getChar(r),c=(this.getChar(r),this.ReadLineStripSet(r,[0,0,0],1,"SHARP_EDGE"));if(c.meshType!==a.ConnectivityTypeEnum.LINE_STRIP&&console.log("Unexpected type"),this.alwaysBuildIndexedLinesSets){var p=i.buildIndexationFromStripSet(c.meshType,c.nStrips,c.vertexIndexArray,c.lengthsArray);p&&(c.meshType=a.ConnectivityTypeEnum.LINES,c.vertexIndexArray=c.vertexIndexArray?p:null)}switch(u){case 66:o.broken.push(c),c.edgeType="SHARP_EDGE";break;case 83:o.construction.push(c),c.edgeType="SMOOTH_EDGE";break;case 70:o.smart.push(c),c.edgeType="BOUNDARY_EDGE"}}t.set(n.value,o)}return t},Load:function(e){var t=i.sharing,r=i.optimized;i.sharing=!0,i.optimized=!0;try{n.memoryLog("Loading smgGeom",!0),this.LoadGeometries(e),n.memoryLog("Loading smgGeom",!1)}catch(e){return e instanceof RangeError?console.error("smgGeom loading : "+e.message):console.error("smgGeom loading error"),!1}return i.sharing=t,i.optimized=r,!0},LoadAsModel:function(e,t,a){var o=this,i=new window.FileReader;i.onloadend=function(){o.setIgnoreGeodeMatrix(!1),o.Load(new Uint8Array(i.result));var e=o.getMapGeodes();t&&e.forEach((function(e,a){var o=e.geode,i=a,n=new r;n.productType="Instance3D",n.name=i,null!==o&&(n.add(o),o.productType="InstanceRep",o.name="rep_"+i),t.add(n)})),a()},i.readAsArrayBuffer(e)}})})),define("DS/VCXWebInteropSMG/VCXSmgXmlSaxReaderFullyShattered",["UWA/Class","DS/VCXWebInteropSMG/SaxParser"],(function(e,t){"use strict";return e.extend({init:function(){this.sax_object=new Object,this.SaxObject=new t(this.sax_object),this.parser=this.sax_object.parser(!0,{lowercase:!0}),this.cbCount=0,this.smgXmlFilesRead=new Map,this.retmap={},this.retmap.finaljson={}},Set_SmgXml_Map:function(e,t,r,a){if(this.cbCount++,(e=e.toLowerCase())===a?this.smgXmlFilesRead.set(e,""):this.smgXmlFilesRead.set(e,t),r===this.cbCount)return this.retmap.finaljson=t,t="",this.retmap.smgXmlFilesRead=this.smgXmlFilesRead,void(this.retmap.cbCount=this.cbCount)},SmgXml_Sax_Parser:function(e,t,r,a){return new Promise(((o,i)=>{var n=this;let s,l,u,c,p={},m=[],d={},C=-1,g=-1,h=0,V=0,f=0,y=0,S=!1,v=!1,b=!1,A=!1,P=!1,X=!1,M=!1,I=null,w=null,L=null;var D=function(e){m.push(w),w=w[s],w[e]={}},T=function(e){let t=w[e.name];u=l+V,c=V,h=0,w[e.name]=[],w[e.name][h]={},w[e.name][h]=t,t=null,h++},x=function(e){c=V,h=Object.keys(w[e]).length,w[e][h]={}},_=function(e,t){t&&(w[e.name]={}),0!==Object.keys(e.attributes).length&&B(w[e.name],e.attributes)},F=function(e){p.Server[C][e.name][y]={},B(p.Server[C][e.name][y],e.attributes)},B=function(e,t){e["@attributes"]={},e["@attributes"]=t},G=function(e,t){e["@attributes"]={},e["@attributes"].Type=t},N=function(e){V++,v=!0,S=!1,s=e},E=function(e){V-f==1||f===V?_(e,1):V-f>1&&(D(e.name),_(e,0),f=V)},O=function(e){w[e.name]["@attributes"]?T(e):w[e.name][0]?x(e.name):M&&function(e){w[e.name].Key?T(e):x(e.name)}(e)},W=function(e,t){0===Object.keys(w).length?w[e.name]={}:t&&c==V-1?(m.push(w),w[s]&&(w=w[s][h]?w[s][h]:w[s]),w[e.name]={}):D(e.name),_(e,0),f=V},R=function(e){A=!1,P=!1,V=0,c=0,h=0,y=0,L=e.attributes.Type,"CLitServerModifiable"===e.attributes.Type&&(P=!0,V=1,w=null,m=[]),b?(p.Server[C].History[e.name]={},G(p.Server[C].History[e.name],e.attributes.Type)):(C++,p.Server[C]={},G(p.Server[C],e.attributes.Type))},k=function(e){"Tracks"==e&&(M=!0),"Configuration"===e&&(X=!0),"CLitModifiable"===e&&X&&g++},U=function(e){k(e.name),1==V?function(e){p.Server[C][e.name]={},0!==Object.keys(e.attributes).length&&B(p.Server[C][e.name],e.attributes),w=p.Server[C],m.push(w),u="*",c=!1,h=0,d={}}(e):(w[e.name]?O(e):2==V&&(c=!1),c?S?f===V?function(e){c==V&&w[e.name]?(w[e.name][h]={},0!==Object.keys(e.attributes).length&&B(w[e.name][h],e.attributes)):_(e,1)}(e):E(e):W(e,1):S?E(e):W(e,0)),N(e.name)},H=function(e){k(e.name),1==V?function(e){let t=p.Server[C].CLitView[y-1];t[e.name]={},0!==Object.keys(e.attributes).length&&B(t,e.attributes),w=p.Server[C].CLitView[y-1][e.name],t=null,f=V,m.push(w)}(e):S?(E(e),f===V&&g>0&&"CLitModifiable"==e.name&&function(e){let t=w[e];1==g&&(d[e]=[],d[e][g-1]=[]),d[e][g-1]=t,t=null}(e.name)):W(e,0),N(e.name)},j=function(e){"Meta"===e.name?(p.Server[C].MetaProperties.Meta[y]={},B(p.Server[C].MetaProperties.Meta[y],e.attributes),y++):0===Object.keys(e.attributes).length?"MetaProperties"==e.name&&(p.Server[C][e.name]={},p.Server[C][e.name].Meta=[]):(p.Server[C][e.name]={},B(p.Server[C][e.name],e.attributes))},Y=function(e,t){t?(b=!0,p.Server[C][e.name]={},B(p.Server[C][e.name],e.attributes)):"CLitVersionHistory"==e.name?(0==y&&(p.Server[C].History.Server[e.name]=[]),p.Server[C].History.Server.CLitVersionHistory[y]={},y++):(p.Server[C].History.Server.CLitVersionHistory[y-1][e.name]={},B(p.Server[C].History.Server.CLitVersionHistory[y-1][e.name],e.attributes))},z=function(e){"ColumnTree"==e.name?(0==y&&(p.Server[C]["ColumnTreeList.ColumnList"]={},p.Server[C]["ColumnTreeList.ColumnList"][e.name]=[]),y++,p.Server[C]["ColumnTreeList.ColumnList"][e.name][y-1]={}):"ColumnTree"==e.name.split(".")[0]&&(p.Server[C]["ColumnTreeList.ColumnList"].ColumnTree[y-1][e.name]={},B(p.Server[C]["ColumnTreeList.ColumnList"].ColumnTree[y-1][e.name],e.attributes))},Q=function(e){0===y&&(p.Server[C][e.name]=[]),F(e),p.Server[C][e.name][y]["#text"]={},s=e.name,y++},K=function(e){A=!0,V=1,0==y&&(p.Server[C][e.name]=[]),F(e),y++,X=!1,g=-1},q=function(e){e.startsWith("\n")||("CLitSelection"==s?p.Server[C][s][y-1]["#text"]=e:!A||"Living"!=s&&"Ghostly"!=s&&"Invisible"!=s?w&&w[s]&&(w[s]["#text"]=e):p.Server[C].CLitView[y-1][s]["#text"]=e)},Z=function(e){"Server"===e?(s="",y=0,b&&(b=!1),h=0,L=null):"History"==e?b=!1:A?(V--,"Configuration"===e&&g>0&&(d.CLitModifiable[g]={},d.CLitModifiable[g]=w.CLitModifiable,p.Server[C].CLitView[y-1][e]=d,d={})):P&&("Tracks"==e&&(M=!1),c?u===e+(V-1)&&(c=!1):l=e,c>V-1&&(c=!1),V--)};let J,$,ee=!1;e&&r&&a?$=t.length:($=1,ee=!0);for(let te=0;te<$;te++){let re;ee?(re=t.size/5,J=t,r=t.name.toLowerCase()):t[te].name.toLowerCase()===r&&(re=t[te].size/5,J=t[te]);let ae=0,oe=new FileReader;function ie(){const e=J.slice(ae,ae+re);oe.readAsText(e)}n.parser.onopentag=async e=>{"DocumentSMG"===e.name||"ScenarioSMG"==e.name||"ViewsSMG"==e.name?(p[e.name]={},B(p[e.name],e.attributes),p.Server=[],h=0):"Server"===e.name?await R(e):"History"===e.name?Y(e,1):b?Y(e,0):"ColumnTree"==e.name||"ColumnTree"==e.name.split(".")[0]?z(e):"CLitSelection"==e.name?Q(e):P?await U(e):"CLitView"==e.name&&"CLitList"==L?K(e):A?await H(e):j(e)},n.parser.ontext=e=>{q(e)},n.parser.onclosetag=e=>{v?(S=!0,v=!1):S&&m.length>1&&(w=m[m.length-1],m.pop(),f=V-1),L&&Z(e)},oe.onload=function(i){if("product.smgxml"===oe.docID||oe.docID.toLowerCase()===r){const s=i.target.result;I="",n.parser.write(s),ae<J.size?(ae+=re,ie()):(n.parser.close(),m=[],e&&r&&a?(n.Set_SmgXml_Map(i.target.docID,p,t.length,r),p={},o(n.retmap),n.retmap={},n.retmap.finaljson={}):(o(p),p={}))}else console.error("Please Clear Cache and Refresh the Page")},oe.docID=ee?t.name:t[te].name,"product.smgxml"===oe.docID||oe.docID.toLowerCase()===r?ie():n.Set_SmgXml_Map(oe.docID,t[te],t.length,r)}}))}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableOccurrenceComposer",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableOccurrence","DS/VCXWebSystem/VCXEnums"],(function(e,t,r,a,o,i,n){"use strict";var s={"Texture.Frame.Gen":{name:"Actor.Texture.Frame.Gen",type:"VCXPropertyValueFrame"},"Texture.Map.Path":{name:"Actor.Texture.Map.Path",type:"VCXPropertyValueDocId"},"Texture.Frame.2D":{name:"Actor.Texture.Frame.2D",type:"VCXPropertyValueFrame"},"Texture.Transparency":{name:"Actor.Texture.Transparency",type:"VCXPropertyValueBoolean"},"Texture.Blending.Mode":{name:"Actor.Texture.Blending.Mode",type:"VCXPropertyValueBoolean"},"Texture.Border.Mode":{name:"Actor.Texture.Border.Mode",type:"VCXPropertyValueBoolean"},"Texture.UV.Scale":{name:"Actor.Texture.UV.Scale",type:"VCXPropertyValueInt"},"Texture.UV.Ratio":{name:"Actor.Texture.UV.Ratio",type:"VCXPropertyValueInt"},"Actor.Env.Effect":{name:"Actor.Env.Effect",type:"VCXPropertyValueEnum"},"Actor.Pulse":{name:"Actor.Pulse.Period",type:"VCXPropertyValueEnum"},"Actor.Pulse.Color":{name:"Pulse.Actor.Color",type:"VCXPropertyValueColor"},"Actor.Prop.Area":{name:"Actor.Prop.Area",type:"VCXPropertyValueFloat"},"Actor.Prop.Volume":{name:"Actor.Prop.Volume",type:"VCXPropertyValueFloat"}};return i.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),s)},getPropertiesMap:function(e,i,l,u,c){var p=this._parent(e,i,l,u,c);if(!e.GetObject().IsMesh())return p;for(var m in l){var d=s[m];if(d){var C=l[m],g=t.fillPropertyValue(C,d.type,i);switch(m){case"Texture.Frame.Gen":if(void 0!==C["@attributes"]&&void 0!==C["@attributes"].ProjectionMode){var h=parseInt(C["@attributes"].ProjectionMode),V=new r;if(1===h)V.SetValue(n.TextureMapping.Planar);else V.SetValue(n.TextureMapping.None);p.set("Actor.Texture.Projection.Type",V)}break;case"Texture.Map.Path":var f=-1;if(void 0!==C["@attributes"]&&void 0!==C["@attributes"].Value){var y=C["@attributes"].Value.split("\\").pop().split("/").pop().toLowerCase(),S=u[y];if(void 0!==S){var v=i.getManager("VCXDocManager").BuildPathFromString(S,y);f=i.getManager("VCXDocManager").AddOrModifyDoc(v).Value}}g.SetValue(f);break;case"Actor.Pulse":if((V=new r).SetValue(0),p.set("Actor.Pulse.Type",V),g.GetValue()>0){g.SetValue(g.GetValue()-1),V.SetValue(1);var b=new a;b.SetValue(!0),p.set("Actor.Pulse.PauseAnim",b)}if(!l["Actor.Pulse.Color"]){var A=new o;A.GetValue().SetRGB(0,1,0),p.set("Pulse.Actor.Color",A)}}d.name&&g&&p.set(d.name,g)}}return p}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableBomManager",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebProperties/VCXPropertyValueMap"],(function(e,t,r){"use strict";var a={"BOM.Sort.PropertyName":{name:"BOM.Sort.PropertyName",type:"VCXPropertyValueString"},"BOM.Filter":{name:"BOM.Filter",type:"VCXPropertyValueInt"},"BOM.Sort.Ascendant":{name:"BOM.Sort.Ascendant",type:"VCXPropertyValueBoolean"},"ColumnTreeList.ColumnList":{name:"ColumnTreeList.ColumnList",type:"VCXPropertyValueMap"}};return e.extend({getPropertiesDescription:function(){return UWA.extend({},a)},getPropertiesMap:function(e,o,i,n,s,l){var u=new Map,c=t.getPropertiesDicoFromWebTypeWithInheritance("VCXComponentOccurrenceSMG");for(var p in i){var m=a[p];if(m){var d=i[p],C=t.fillPropertyValue(d,m.type,o);if("ColumnTreeList.ColumnList"===p)for(var g=d.ColumnTree,h=0;h<g.length;h++){var V=g[h],f=new r,y=0;for(var S in V)if(V.hasOwnProperty(S)){var v=V[S];switch(S){case"ColumnTree.Name":var b=(P=t.fillPropertyValue(v,"VCXPropertyValueString"))?P.GetValue():null;c&&c[b]&&P.SetValue(c[b].name),f.SetValueAtIndex(y,P),f._value[y++].name=S;break;case"ColumnTree.Width":var A=t.fillPropertyValue(v,"VCXPropertyValueInt");f.SetValueAtIndex(y,A),f._value[y++].name=S;break;case"ColumnTree.CommonRoot":A=t.fillPropertyValue(v,"VCXPropertyValueInt");f.SetValueAtIndex(y,A),f._value[y++].name=S;break;case"ColumnTree.Label":var P=t.fillPropertyValue(v,"VCXPropertyValueString");f.SetValueAtIndex(y,P),f._value[y++].name=S}}C.SetValueAtIndex(h,f)}m.name&&C&&u.set(m.name,C)}}return u}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupPolyline",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup","DS/VCXWebProperties/VCXPropertyValueString"],(function(e,t,r,a){"use strict";var o={"ActorCurve.Line.Color":{name:"Collab.Body.Line.Color",type:"VCXPropertyValueColor"},"ActorCurve.Line.Opacity":{name:"Collab.Body.Line.Color.Opacity",type:"VCXPropertyValueFloat"},"ActorCurve.Line.Type":{name:"Collab.Body.Line.Type",type:"VCXPropertyValueEnum"},"ActorCurve.Close":{name:"Polyline.Is.Closed",type:"VCXPropertyValueBoolean"},"Actor.CurveLine.FrontStipplingMotif":{name:"Collab.Body.Line.StipplingMotif",type:"VCXPropertyValueString"},"ActorCurve.UseHiddenStyle":{name:"Collab.Body.Line.UseHiddenStyle",type:"VCXPropertyValueBoolean"},"ActorCurve.BackLine.Color":{name:"Collab.Body.Line.Back.Color",type:"VCXPropertyValueColor"},"ActorCurve.BackLine.Opacity":{name:"Collab.Body.Line.Back.Color.Opacity",type:"VCXPropertyValueFloat"},"ActorCurve.BackLine.Type":{name:"Collab.Body.Line.Back.Type",type:"VCXPropertyValueEnum"},"ActorCurve.BackLine.Width":{name:"Collab.Body.Line.Back.Width",type:"VCXPropertyValueFloat"},"Actor.CurveLine.BackStipplingMotif":{name:"Collab.Body.Line.Back.StipplingMotif",type:"VCXPropertyValueString"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),o)},getPropertiesMap:function(e,r,a,i,n){var s=this._parent(e,r,a,i,n);for(var l in a){var u=a[l];if("Anchor."===l.substring(0,7)){var c=t.fillPropertyValue(u,"VCXPropertyValueAnchor",r),p="Actor.Anchor."+l.substring(7);s.set(p,c)}else{var m=o[l];if(m){c=t.fillPropertyValue(u,m.type,r);switch(l){case"ActorCurve.Line.Opacity":case"ActorCurve.BackLine.Opacity":c.Value/=255;break;case"ActorCurve.Line.Width":case"ActorCurve.BackLine.Width":c.Value*=2}m.name&&c&&s.set(m.name,c)}}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableBomInfo",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebProperties/VCXPropertyValueMap"],(function(e,t,r){"use strict";var a={GroupInfoPropSet:{name:"GroupInfoPropSet",type:"VCXPropertyValueMap"}};return e.extend({getPropertiesDescription:function(){return UWA.extend({},a)},getPropertiesMap:function(e,o,i,n,s,l){var u=new Map,c=t.getPropertiesDicoFromWebTypeWithInheritance("VCXComponentOccurrenceSMG");for(var p in i){var m=a[p];if(m){var d=i[p],C=t.fillPropertyValue(d,m.type,o);switch(p){case"GroupInfoPropSet":var g=d["GroupInfo.List"];if(!g)break;if(!(g=g.GroupInfo))break;for(var h=0;h<g.length;h++){var V=g[h],f=new r,y=0;for(var S in V)if(V.hasOwnProperty(S)){var v=V[S];switch(S){case"Name":var b=t.fillPropertyValue(v,"VCXPropertyValueString"),A=b?b.GetValue():null;c&&c[A]&&b.SetValue(c[A].name),f.SetValueAtIndex(y,b),f._value[y++].name=S;break;case"Id":var P=t.fillPropertyValue(v,"VCXPropertyValueInt");f.SetValueAtIndex(y,P),f._value[y++].name=S}}C.SetValueAtIndex(h,f)}}m.name&&C&&u.set(m.name,C)}}return u}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrowCorner",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrow","DS/VCXWebProperties/VCXPropertyValueBoolean"],(function(e,t,r,a){"use strict";var o={"Anchor.0":{name:"Actor.Anchor.0",type:"VCXPropertyValueAnchor"},"Actor.Length2":{name:"Arrow.Corner.Length.1",type:"VCXPropertyValueFloat"},Length:{name:"Arrow.Corner.Length.2",type:"VCXPropertyValueFloat"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),o)},getPropertiesMap:function(e,r,i,n,s){var l=this._parent(e,r,i,n,s),u=!1;for(var c in i){var p=o[c];if(p){var m=i[c],d=t.fillPropertyValue(m,p.type,r);if("Anchor.0"===c)u=!0;p.name&&d&&l.set(p.name,d)}}if(!e.bIsOldVersion&&u){var C=new a;C.SetValue(!1),l.set("Collab.Is.Paper",C)}return l}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupPath",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupPolyline","DS/VCXWebProperties/VCXPropertyValueString"],(function(e,t,r,a){"use strict";var o={"ActorCurvePath.AxeOrder":{name:"Collab.Path.AxesOrder",type:"VCXPropertyValueEnum"},"ActorCurvePath.Full":{name:"Collab.Path.IsFull",type:"VCXPropertyValueBoolean"},"ActorCurvePath.IsFromNeutral":{name:"Collab.Path.IsFromNeutral",type:"VCXPropertyValueBoolean"},"ActorCurvePath.Mode":{name:"Collab.Path.ConstructMode",type:"VCXPropertyValueEnum"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),o)},getPropertiesMap:function(e,r,a,i){var n=this._parent(e,r,a,i);for(var s in a){var l=a[s];if("Anchor."===s.substring(0,7)){var u=t.fillPropertyValue(l,"VCXPropertyValueAnchor",r),c="Actor.Anchor."+s.substring(7);n.set(c,u)}else{var p=o[s];if(p){u=t.fillPropertyValue(l,p.type,r);s,p.name&&u&&n.set(p.name,u)}}}return n}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableCurveWire",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableOccurrence"],(function(e,t,r){"use strict";var a={"ActorCurve.Width":{name:"ActorCurve.Width",type:"VCXPropertyValueInt"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);l,u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrowLinear",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrow","DS/VCXWebProperties/VCXPropertyValueBoolean"],(function(e,t,r,a){"use strict";var o={"Anchor.0":{name:"Actor.Anchor.0",type:"VCXPropertyValueAnchor"},"Anchor.1":{name:"Actor.Anchor.1",type:"VCXPropertyValueAnchor"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),o)},getPropertiesMap:function(e,r,i,n,s){var l=this._parent(e,r,i,n,s),u=!1,c=!1;for(var p in i){var m=o[p];if(m){var d=i[p],C=t.fillPropertyValue(d,m.type,r);switch(p){case"Anchor.0":u=!0;break;case"Anchor.1":c=!0}m.name&&C&&l.set(m.name,C)}}if(u&&c){var g=new a;g.SetValue(!1),l.set("Collab.Is.Paper",g)}return l}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableHotSpot",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiable"],(function(e,t,r){"use strict";var a={"HotSpot.Show":{name:"Actor.Enable",type:"VCXPropertyValueBoolean"},"HotSpot.Color":{name:"Actor.Color",type:"VCXPropertyValueColor"},"HotSpot.Tooltip":{name:"Actor.ToolTip",type:"VCXPropertyValueString"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);l,u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableMeshPrimitive",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableOccurrenceComposer"],(function(e,t,r){"use strict";var a={"Domain1.DomainType":{name:"ActorMeshPrimitive.Domain1.DomainType",type:"VCXPropertyValueEnum"},"Domain1.Height":{name:"ActorMeshPrimitive.Domain1.Height",type:"VCXPropertyValueFloat"},"Cube.Depth":{name:"ActorMeshPrimitive.Cube.Depth",type:"VCXPropertyValueFloat"},"Cube.Width":{name:"ActorMeshPrimitive.Cube.Width",type:"VCXPropertyValueFloat"},"Domain1.OuterRadius":{name:"ActorMeshPrimitive.Domain1.OuterRadius",type:"VCXPropertyValueFloat"},"Domain1.TopRadius":{name:"ActorMeshPrimitive.Domain1.TopRadius",type:"VCXPropertyValueFloat"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);l,u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableViewport",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools"],(function(e,t){"use strict";var r={"Viewport.CameraToSeeInterface":{name:"Viewport.ActiveCamera",type:"VCXPropertyValueInt"},"Navigator.Camera.Vertical":{name:"Environment.Vertical",type:"VCXPropertyValueEnum"},"Viewport.Render.BackCulling":{name:"Environment.BackFaceCulling",type:"VCXPropertyValueBoolean"},"Viewport.Render.SSAO":{name:"Environment.SSAO",type:"VCXPropertyValueEnum"},"Viewport.Render.HLGlow":{name:"Environment.Bloom",type:"VCXPropertyValueBoolean"},"Viewport.Render.Mode":{name:"Render.Mode",type:"VCXPropertyValueEnum"},"Viewport.Render.ShowSharedEdges":{name:"Render.OutlineType",type:"VCXPropertyValueEnum"},"Viewport.Bk.Color":{name:"Environment.Background.Color",type:"VCXPropertyValueColor"},"Viewport.Bk.Alpha":{name:"Environment.Background.Color.Opacity",type:"VCXPropertyValueFloat"},"Viewport.BkFoot.Color":{name:"Environment.Background.Foot.Color",type:"VCXPropertyValueColor"},"Viewport.BkGradient":{name:"Environment.Background.Gradient",type:"VCXPropertyValueBoolean"},"Viewport.Bk.Image.Path":{name:"Environment.Background.Image",type:"VCXPropertyValueDocId"},"Viewport.Lights.Diffuse":{name:"Render.Lighting.Intensity",type:"VCXPropertyValueFloat"},"Viewport.Render.Lighting.Mode":{name:"Render.Lighting.Mode",type:"VCXPropertyValueEnum"}};return e.extend({getPropertiesDescription:function(){return UWA.extend({},r)},getPropertiesMap:function(e,a,o,i,n){var s=new Map,l=a.getManager("VCXContextManager").getContextFromName("ExperienceIn3DPlay");for(var u in o){var c=r[u];if(c){var p=o[u],m=t.fillPropertyValue(p,c.type,a);switch(u){case"Viewport.Render.SSAO":m.Value?m.Value=2:m.Value=1;break;case"Viewport.Bk.Alpha":case"Viewport.Lights.Diffuse":m.Value/=255;break;case"Viewport.Bk.Image.Path":var d=t.fillPropertyValue(p,"VCXPropertyValueString",a),C=d.Value.slice(d.Value.lastIndexOf("\\")+1).toLowerCase();if(C){var g=i[C],h=a.getManager("VCXDocManager").BuildPathFromString(g,C);h&&(m=a.getManager("VCXDocManager").AddOrModifyDoc(h))}}if(c.name&&m){if(!l&&"Viewport.Lights.Diffuse"===u)continue;s.set(c.name,m)}}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrowCircular",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrow","DS/VCXWebProperties/VCXPropertyValueBoolean"],(function(e,t,r,a){"use strict";var o={"Anchor.0":{name:"Actor.Anchor.0",type:"VCXPropertyValueAnchor"},"Actor.Angle":{name:"Arrow.Circular.Angle",type:"VCXPropertyValueFloat"},"Actor.Flat":{name:"Arrow.Circular.Flat",type:"VCXPropertyValueEnum"},"Actor.Radius":{name:"Arrow.Circular.Radius",type:"VCXPropertyValueFloat"},"Actor.Step":{name:"Arrow.Circular.Step",type:"VCXPropertyValueInt"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),o)},getPropertiesMap:function(e,r,i,n,s){var l=this._parent(e,r,i,n,s),u=!1;for(var c in i){var p=o[c];if(p){var m=i[c],d=t.fillPropertyValue(m,p.type,r);if("Anchor.0"===c)u=!0;p.name&&d&&l.set(p.name,d)}}if(!e.bIsOldVersion&&u){var C=new a;C.SetValue(!1),l.set("Collab.Is.Paper",C)}return l}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupPanel",["UWA/Class","DS/VCXWebDressup/VCXMarkup/VCXMarkup_Spec","DS/VCXWebDressup/VCXMarkup/VCXMarkupModifiable","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueAnchor","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXPropertyValueDocId","DS/VCXWebProperties/VCXPropertyValueFont","DS/VCXWebProperties/VCXColor"],(function(e,t,r,a,o,i,n,s,l,u,c,p,m,d){"use strict";var C={"Text.Position":{name:"Collab.3D.Paper.3D.Text.Position",type:"VCXPropertyValuePoint"},"Actor.Location":{name:"Actor.Anchor.Location",type:"vcxPropertyValueAnchor"},"Text.PreString":{name:"Collab.Measurement.PreString",type:"VCXPropertyValueString"},"Text.MiddleString":{name:"Collab.Measurement.MiddleString",type:"VCXPropertyValueString"},"Text.PostString":{name:"Collab.Measurement.PostString",type:"VCXPropertyValueString"},"Actor.PreSymbol":{name:"Collab.Measurement.PreSymbol",type:"VCXPropertyValueEnum"},"Actor.MiddleSymbol":{name:"Collab.Measurement.MiddleSymbol",type:"VCXPropertyValueEnum"},"Actor.PostSymbol":{name:"Collab.Measurement.PostSymbol",type:"VCXPropertyValueEnum"},"Actor.DisplayValue":{name:"Collab.Measurement.DisplayValue",type:"VCXPropertyValueBoolean"},"Text.Foreground.Color":{name:"Collab.Text.Color",type:"VCXPropertyValueColor"},"Text.Bk":{name:"Collab.Body.Shape",type:"VCXPropertyValueEnum"},"VectorImage.Shape":{name:"Collab.Body.Shape",type:"VCXPropertyValueEnum"},"Widget.Shape":{name:"Collab.Body.Shape",type:"VCXPropertyValueEnum"},"VectorImage.BackGround.Enable":{name:"Collab.Background.Show",type:"VCXPropertyValueBoolean"},"Widget.Background":{name:"Collab.3D.Paper.Is.Background",type:"VCXPropertyValueBoolean"},"Text.Bk.Opacity":{name:"Collab.Background.Color.Opacity",type:"VCXPropertyValueFloat"},"VectorImage.BackGround.Opacity":{name:"Collab.Background.Color.Opacity",type:"VCXPropertyValueFloat"},"ActorArrow.Bg.Opacity":{name:"Collab.Background.Color.Opacity",type:"VCXPropertyValueFloat"},"VectorImage.Scale":{name:"Collab.Image.Scale",type:"VCXPropertyValueFloat"},"Actor.Color":{name:"Collab.Background.Color",type:"VCXPropertyValueColor"},"VectorImage.BackGround.Color":{name:"Collab.Background.Color",type:"VCXPropertyValueColor"},"ActorCurve.Border":{name:"Collab.Border.Show",type:"VCXPropertyValueBoolean"},"Text.Label.Line.Show":{name:"Collab.Border.Show",type:"VCXPropertyValueBoolean"},"Text.Label.Line.Opacity":{name:"Collab.Border.Line.Color.Opacity",type:"VCXPropertyValueFloat"},"ActorCurve.Border.Opacity":{name:"Collab.Border.Line.Color.Opacity",type:"VCXPropertyValueFloat"},"Text.Label.Line.Color":{name:"Collab.Border.Line.Color",type:"VCXPropertyValueColor"},"ActorCurve.Border.Color":{name:"Collab.Border.Line.Color",type:"VCXPropertyValueColor"},"Text.LineWidth":{name:"Collab.Border.Line.Width",type:"VCXPropertyValueFloat"},"ActorCurve.Border.Width":{name:"Collab.Border.Line.Width",type:"VCXPropertyValueFloat"},"Text.Attach.Line.Color":{name:"Collab.Attach.Line.Color",type:"VCXPropertyValueColor"},"Text.Attach.Line.Width":{name:"Collab.Attach.Line.Width",type:"VCXPropertyValueFloat"},"Text.Attach.Line.Type":{name:"Collab.Attach.Line.Type",type:"VCXPropertyValueEnum"},"Text.Attach.Line.Curvature":{name:"Collab.Attach.Curvature",type:"VCXPropertyValueFloat"},"Text.String":{name:null,type:"VCXPropertyValueString"},"Text.Alignment":{name:"Collab.Text.HAlignment",type:"VCXPropertyValueEnum"},"Text.LinkedPropertyName":{name:"Collab.Text.LinkedProperty",type:"VCXPropertyValueString"},"Text.LinkedParentLevel":{name:"Collab.Text.LinkedParentLevel",type:"VCXPropertyValueInt"},"Text.Font":{name:"Collab.Text.Font",type:"VCXPropertyValueFont"},"Texture.Map.Path":{name:"Collab.Image.Doc.ID",type:"VCXPropertyValueDocId"},"VectorImage.Filepath":{name:"Collab.Image.Doc.ID",type:"VCXPropertyValueDocId"},"Text.CalloutAlignment":{name:"Collab.3D.Paper.Positioning.Type",type:"VCXPropertyValueEnum"},"Text.DrawAnchor":{name:"Collab.Attach.Preset",type:"VCXPropertyValueEnum"},"Text.Attach.Type":{name:"Collab.Measurement.Attach.Type",type:"VCXPropertyValueFloat"},"Text.ShowEndPoints":{name:"Collab.Measurement.ShowEndPoints",type:"VCXPropertyValueBoolean"},"Text.ShowConstruction":{name:"Collab.Measurement.ShowConstructionLines",type:"VCXPropertyValueBoolean"},"Text.ShowRedline":{name:"Collab.Measurement.ShowRedlines",type:"VCXPropertyValueBoolean"},"Text.ShowPlanes":{name:"Collab.Measurement.ShowPlanes",type:"VCXPropertyValueBoolean"},"Text.Callout2D":{name:null,type:"VCXPropertyValuePoint"},"Widget.Arrow.Origin":{name:"Collab.Attach.Origin",type:"VCXPropertyValuePoint"},"Widget.Top":{name:null,type:"VCXPropertyValueFloat"},"Widget.Left":{name:null,type:"VCXPropertyValueFloat"},"Widget.Depth":{name:"Collab.3D.Paper.Depth",type:"VCXPropertyValueFloat"},"Widget.Width":{name:"Collab.Body.Width",type:"VCXPropertyValueFloat"},"Panel.Width":{name:"Collab.Body.Width",type:"VCXPropertyValueFloat"},"Widget.Height":{name:"Collab.Body.Height",type:"VCXPropertyValueFloat"},"Panel.Height":{name:"Collab.Body.Height",type:"VCXPropertyValueFloat"},"Widget.Autofit":{name:"Collab.Body.FitToText",type:"VCXPropertyValueBoolean"},"ActorComposite.KeepAspectRatio":{name:"Collab.Body.KeepAspectRatio",type:"VCXPropertyValueBoolean"},"Widget.KeepAspectRatio":{name:"Collab.Body.KeepAspectRatio",type:"VCXPropertyValueBoolean"},"Widget.BOM.FilterOnVisibleCallouts":{name:"Collab.BOM.FilterOnVisibleCallouts",type:"VCXPropertyValueBoolean"},"Widget.BOM.TextLabelColor":{name:"Collab.BOM.Header.Text.Color",type:"VCXPropertyValueColor"},"Widget.BOM.TextCellColor":{name:"Collab.Text.Color",type:"VCXPropertyValueColor"},"Widget.BOM.LabelCellColor":{name:"Collab.BOM.Header.Background.Color",type:"VCXPropertyValueColor"},"Widget.BOM.OddCellColor":{name:"Collab.BOM.OddRow.Background.Color",type:"VCXPropertyValueColor"},"Widget.BOM.EvenCellColor":{name:"Collab.BOM.EvenRow.Background.Color",type:"VCXPropertyValueColor"},"Widget.BOM.Position":{name:"Collab.3D.Paper.Positioning.Type",type:"VCXPropertyValueEnum"},"Widget.BOM.Percentage":{name:"Collab.3D.Paper.BOM.Percentage",type:"VCXPropertyValueFloat"},"Widget.ShadowEnable":{name:"Collab.Body.Shadow.Show",type:"VCXPropertyValueBoolean"},"Widget.ShadowDistance":{name:"Collab.Body.Shadow.Distance",type:"VCXPropertyValueFloat"},"Widget.ShadowOrientation":{name:"Collab.Body.Shadow.Orientation",type:"VCXPropertyValueFloat"},"Widget.ShadowOpacity":{name:"Collab.Body.Shadow.Opacity",type:"VCXPropertyValueFloat"},"Widget.ShadowBlur":{name:"Collab.Body.Shadow.Blur",type:"VCXPropertyValueFloat"},"Actor.Radius":{name:"Collab.Measurement.Radius",type:"VCXPropertyValueFloat"},"Actor.Prop.Area":{name:"Collab.Measurement.Area",type:"VCXPropertyValueFloat"},"Actor.Prop.Volume":{name:"Collab.Measurement.Volume",type:"VCXPropertyValueFloat"},Length:{name:"Collab.Measurement.Length",type:"VCXPropertyValueFloat"},"Actor.Length1":{name:"Collab.Measurement.Length1",type:"VCXPropertyValueFloat"},"Actor.Length2":{name:"Collab.Measurement.Length2",type:"VCXPropertyValueFloat"},"Actor.Radius1":{name:"Collab.Measurement.Radius1",type:"VCXPropertyValueFloat"},"Actor.Radius2":{name:"Collab.Measurement.Radius2",type:"VCXPropertyValueFloat"},"Actor.Pulse":{name:"Actor.Pulse.Period",type:"VCXPropertyValueEnum"},"Actor.Pulse.Color":{name:"Pulse.Collab.Image.Color",type:"VCXPropertyValueColor"},"Widget.Freeze":{name:"Actor.Freeze",type:"VCXPropertyValueEnum"},Billboard:{name:"Collab.3D.Paper.Billboard.Type",type:"VCXPropertyValueEnum"},"Text.Autohide":{name:"Collab.HideIfOutsideAnchorFrustrum",type:"VCXPropertyValueBoolean"},"Text.Border.Color":{name:"Collab.Border.Line.Color",type:"VCXPropertyValueColor"},"Text.Border.Opacity":{name:"Collab.Border.Line.Color.Opacity",type:"VCXPropertyValueFloat"},"Text.Border.Width":{name:"Collab.Border.Line.Width",type:"VCXPropertyValueFloat"}};return o.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),C)},getPropertiesMap:function(e,o,m,g,h){var V=this._parent(e,o,m,g,h),f=null,y=null,S=null,v=null,b=!1,A=null,P=null,X=null;for(var M in m){var I,w=m[M];if("Anchor."===M.substring(0,7)){if(I=a.fillPropertyValue(w,"VCXPropertyValueAnchor",o),parseInt(M.substring(7))<1e3){var L="Actor.Anchor."+M.substring(7);V.set(L,I)}else if(("CLitTextMultiplePoints"===h||"CLitCalloutMP"===h)&&parseInt(M.substring(7))>1002){L="Actor.Anchor."+M.substring(7);V.set(L,I)}}else if("CLitDrawText"===h&&"Draw.Location"===M)w.Frame=void 0,w.Pivot=void 0,I=a.fillPropertyValue(w,"VCXPropertyValueAnchor",o),V.set("Actor.Anchor.0",I);else{var D=C[M];if(D){switch(I=a.fillPropertyValue(w,D.type,o),M){case"Widget.BOM.Position":switch(I.GetValue()){case 0:I.SetValue(1e3);break;case 1:I.SetValue(3);break;case 2:I.SetValue(7);break;case 3:I.SetValue(10);break;case 4:I.SetValue(12)}break;case"Actor.Location":var T=a.fillPropertyValue(w,"VCXPropertyValueLocation",o);(I=new l).SetValueFrame(T.GetFrame());break;case"Text.Bk":switch(I.GetValue()){case 0:I.SetValue(0);break;case 1:I.SetValue(10);break;case 2:I.SetValue(20);break;case 3:I.SetValue(3);break;case 4:I.SetValue(4);break;case 5:I.SetValue(5);break;case 6:I.SetValue(1)}break;case"VectorImage.Shape":switch(I.GetValue()){case 0:case 1:I.SetValue(1);break;case 2:case 3:I.SetValue(3)}break;case"Widget.Shape":switch(I.GetValue()){case 0:I.SetValue(1);break;case 1:I.SetValue(6);break;case 2:I.SetValue(7);break;case 3:I.SetValue(4);break;case 4:I.SetValue(5)}break;case"Billboard":switch(I.GetValue()){case 0:case 3:I.SetValue(0);break;case 1:case 2:I.SetValue(2)}break;case"Text.Bk.Opacity":case"VectorImage.BackGround.Opacity":case"ActorArrow.Bg.Opacity":case"Text.Label.Line.Opacity":case"ActorCurve.Border.Opacity":case"Text.Border.Opacity":case"Widget.ShadowOpacity":I.Value/=255;break;case"VectorImage.Scale":I.Value*=.01;break;case"Actor.Color":"CLitDrawText"===h?V.set("Collab.Text.Color",I):V.set("Collab.Image.Color",I);break;case"VectorImage.BackGround.Color":V.set("Collab.Image.Color",new c((new d).SetRGBA(1,1,1,1)));break;case"Text.Border.Width":case"Text.LineWidth":case"ActorCurve.Border.Width":case"Text.Attach.Line.Width":I.Value*=2;break;case"Text.String":A=I.Value,e._textString=A;break;case"Text.Alignment":V.set("Collab.Text.HAlignment",I);break;case"Text.LinkedPropertyName":"Text String"===(P=I.Value)&&(A=e._textString,X=0,e._textString=null);break;case"Text.LinkedParentLevel":X=I.Value;break;case"Texture.Map.Path":case"VectorImage.Filepath":var x=a.fillPropertyValue(w,"VCXPropertyValueString",o),_=x.Value.slice(x.Value.lastIndexOf("\\")+1).toLowerCase();if(_){var F=g[_];if(!F)F=g[_.replace(/^.*[\\\/]/,"")];var B=o.getManager("VCXDocManager").BuildPathFromString(F,_);B&&(I=o.getManager("VCXDocManager").AddOrModifyDoc(B))}I||(I=new p);break;case"Text.Autohide":V.set("Collab.HideIfOutsideAnchorFrustrum",I);break;case"Text.Position":"CLitText2dPaperSpace"===h&&(y=parseFloat(w["@attributes"].X),f=parseFloat(w["@attributes"].Y)),b=!0;break;case"Text.Callout2D":v=parseFloat(w["@attributes"].X),S=parseFloat(w["@attributes"].Y);break;case"Widget.Arrow.Origin":V.set("Collab.Attach.CenteredOrigin",new n(!1));break;case"Widget.Top":f=I.Value;break;case"Widget.Left":y=I.Value;break;case"Text.DrawAnchor":if(I.Value){var G=I.Value;9===G&&(G=30),V.set("Collab.Attach.Show",new n(!0));var N,E=r.GetAttachPresets(G);(N=new i).SetValue(E["Collab.Attach.LeadType"]),V.set("Collab.Attach.LeadType",N),(N=new i).SetValue(E["Collab.Attach.ExtremityType"]),V.set("Collab.Attach.ExtremityType",N),(N=new s).SetValue(E["Collab.Attach.Curvature"]),V.set("Collab.Attach.Curvature",N),(N=new n).SetValue(E["Collab.Attach.Background.Gradient"]),V.set("Collab.Attach.Background.Gradient",N),(N=new n).SetValue(E["Collab.Attach.Border.Gradient"]),V.set("Collab.Attach.Border.Gradient",N),(N=new n).SetValue(E["Collab.Attach.BentDot"]),V.set("Collab.Attach.BentDot",N)}else V.set("Collab.Attach.Show",new n(!0)),V.set("Collab.Attach.LeadType",new i(I.Value));break;case"Actor.Pulse":var O=new i;if(O.SetValue(0),I.GetValue()>0){I.SetValue(I.GetValue()-1),O.SetValue(1);var W=new n;W.SetValue(!0),V.set("Actor.Pulse.PauseAnim",W)}V.set("Actor.Pulse.Type",O);break;case"Actor.Pulse.Color":V.get("Actor.Pulse.Type")?V.set("Pulse.Collab.Background.Color",I):I=null;break;case"ActorCurve.Border":V.set("Collab.Border.Show",1);break;case"Text.Label.Line.Show":"CLit2dWidgetImagePaperSpaceFromCropArea"===h&&(I.Value=!1);break;case"Text.CalloutAlignment":var R=I.Value;for(var k in I.Value=t.EPositionType.Free3D,t.EPositionType)t.EPositionType[k]===R&&(I.Value=R)}D.name&&I&&V.set(D.name,I)}}}var U=a.translateLinkedPropertyString(o,e,P,X,A,V);if(U){var H=new u;H.Value=U,V.set("Collab.Text",H);var j=new n;j.Value=!0,V.set("Collab.Text.Show",j);var Y=new s;Y.SetValue(1),V.set("Collab.Body.InnerMargin",Y)}var z=!1;if(S&&(f=S*o.getManager("VCXPaperManager").Size.y,z=!0),v&&(y=v*o.getManager("VCXPaperManager").Size.x,z=!0),null!==y||null!==f){if(null!==y){var Q=new s;Q.SetValue(y),V.set("Collab.3D.Paper.Paper.Position.X",Q)}if(null!==f){var K=new s;K.SetValue(f),V.set("Collab.3D.Paper.Paper.Position.Y",K)}var q=new i,Z=new i;"CLitTextMultiplePoints"!==h&&"CLitText2dPaperSpace"!==h||null==A||(1===A.trim().split(" ").length&&-1===A.indexOf("\n")?Z.SetValue(1):Z.SetValue(0),V.set("Collab.Text.HAlignment",Z)),b||z?q.SetValue(2):q.SetValue(0),V.set("Collab.Body.VAlignment",q)}return V}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableRedLine",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup"],(function(e,t,r){"use strict";var a={"Anchor.0":{name:"Actor.Anchor.0",type:"VCXPropertyValueAnchor"},"Line.Width":{name:"Collab.Body.Line.Width",type:"VCXPropertyValueFloat"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);l,u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupCompass",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgGeomLoader","DS/VCXWebProperties/VCXPropertyValueDocId","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup"],(function(e,t,r,a,o){"use strict";var i={"Navigator.Compass.GeomPath":{name:"Compass.GeomPath",type:"VCXPropertyValueDocId"},"Navigator.Compass.AbsoluteSize":{name:"Compass.AbsoluteSize",type:"VCXPropertyValueBoolean"},"Navigator.Compass.Size":{name:"Compass.Size",type:"VCXPropertyValueFloat"},"Navigator.Compass.SizePixel":{name:"Compass.SizePixel",type:"VCXPropertyValueInt"},"Navigator.Compass.Translation":{name:"Compass.Translation",type:"VCXPropertyValuePoint"},"Navigator.Compass.Frame.Alignment":{name:"Compass.Alignment",type:"VCXPropertyValueFrame"}};return o.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),i)},getPropertiesMap:function(e,a,o,n,s){var l=e.QueryInterface("W3AISGNodeHolder");l&&l._sgNode&&l._sgNode.setGeomConverter((function(e,t){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onerror=function(){t&&void 0!==t&&t(new Map)},o.onload=function(e){if(200===this.status){var o=new r(a);o.setIgnoreGeodeMatrix(!1),o.Load(new Uint8Array(this.response)),t&&void 0!==t&&t(o.getMapGeodes())}else t&&void 0!==t&&t(new Map)},o.send()}));var u=this._parent(e,a,o,n);for(var c in o){var p=i[c];if(p){var m=o[c],d=t.fillPropertyValue(m,p.type,a);switch(c){case"Navigator.Compass.Visibility":default:break;case"Navigator.Compass.GeomPath":var C=-1;if(m["@attributes"]&&m["@attributes"].Value){var g=m["@attributes"].Value.split("\\").pop().split("/").pop().toLowerCase(),h=n[g];if(h){var V=a.getManager("VCXDocManager").BuildPathFromString(h,g);C=a.getManager("VCXDocManager").AddOrModifyDoc(V).Value}d.SetValue(C)}}p.name&&d&&u.set(p.name,d)}}return u}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiablePoint",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableOccurrence"],(function(e,t,r){"use strict";var a={"ActorPoint.Width":{name:"ActorPoint.Width",type:"VCXPropertyValueInt"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);l,u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableGround",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup"],(function(e,t,r){"use strict";var a={"Ground.LocalLocation":{name:"Actor.Position",type:"VCXPropertyValueLocation"},"Ground.Color":{name:"Environment.Ground.Color",type:"VCXPropertyValueColor"},"Ground.FallOff":{name:"Environment.Ground.FallOff",type:"VCXPropertyValueFloat"},"Ground.Grid.Show":{name:"Environment.Ground.Grid.Show",type:"VCXPropertyValueBoolean"},"Ground.Grid.Color":{name:"Environment.Ground.Grid.Color",type:"VCXPropertyValueColor"},"Ground.Auto.Size":{name:"Environment.Ground.Diameter.Auto",type:"VCXPropertyValueBoolean"},"Ground.Diameter":{name:"Environment.Ground.Diameter",type:"VCXPropertyValueFloat"},"Ground.Border.Show":{name:"Environment.Ground.Border.Show",type:"VCXPropertyValueBoolean"},"Ground.Border.Color":{name:"Environment.Ground.Border.Color",type:"VCXPropertyValueColor"},"Viewport.Render.GroundShadows":{name:"Environment.Ground.Shadows.Show",type:"VCXPropertyValueBoolean"},"Viewport.Render.GroundReflect":{name:"Environment.Ground.Mirror.Show",type:"VCXPropertyValueBoolean"},"Viewport.Render.GroundReflect.Blur":{name:"Environment.Ground.Mirror.Blurry",type:"VCXPropertyValueBoolean"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);if("Ground.FallOff"===l)p.Value*=.01;u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupSection",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup","DS/VCXWebProperties/VCXPropertyValueBoolean"],(function(e,t,r,a){"use strict";var o={"CuttingPlane.Enable":{name:"Section.Enable",type:"VCXPropertyValueBoolean"},"CuttingPlane.AutoFlip":{name:"Section.AutoFlip",type:"VCXPropertyValueBoolean"},"CuttingPlane.Capping":{name:"Section.Capping",type:"VCXPropertyValueBoolean"},"CuttingPlane.Capping.Color":{name:"Section.Capping.Color",type:"VCXPropertyValueColor"},"CuttingPlane.Capping.ActorColor":{name:"Section.Capping.ActorColor",type:"VCXPropertyValueBoolean"},"CuttingPlane.Hatch":{name:"Section.Hatching.Frequency",type:"VCXPropertyValueInt"},"CuttingPlane.HatchAngle":{name:"Section.Hatching.Angle",type:"VCXPropertyValueFloat"},"CuttingPlane.SpaceBackAlpha":{name:"Section.SpaceBackAlpha",type:"VCXPropertyValueFloat"},"CuttingPlane.SpaceFrontAlpha":{name:"Section.SpaceFrontAlpha",type:"VCXPropertyValueFloat"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),o)},getPropertiesMap:function(e,r,i,n,s){var l=this._parent(e,r,i,n,s);for(var u in i){var c=o[u];if(c){var p=i[u],m=t.fillPropertyValue(p,c.type,r);switch(u){case"CuttingPlane.SpaceBackAlpha":case"CuttingPlane.SpaceFrontAlpha":m.Value/=255;break;case"CuttingPlane.Enable":l.set("Section.Plane.Enable",new a(m.Value))}c.name&&m&&l.set(c.name,m)}}return l}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupCircle",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup"],(function(e,t,r){"use strict";var a={"Anchor.0":{name:"Actor.Anchor.0",type:"VCXPropertyValueAnchor"},"Actor.Color":{name:"Collab.Background.Color",type:"VCXPropertyValueColor"},"Actor.Circle.Background":{name:"Circle.Background.Type",type:"VCXPropertyValueEnum"},"ActorCurve.Line.Color":{name:"Collab.Body.Line.Color",type:"VCXPropertyValueColor"},"ActorCurve.Line.Opacity":{name:"Collab.Body.Line.Color.Opacity",type:"VCXPropertyValueFloat"},"ActorCurve.Line.Type":{name:"Collab.Body.Line.Type",type:"VCXPropertyValueEnum"},"ActorCurve.Line.Width":{name:"Collab.Body.Line.Width",type:"VCXPropertyValueFloat"},"ActorCurve.Border":{name:"Collab.Border.Show",type:"VCXPropertyValueBoolean"},"ActorCurve.Border.Color":{name:"Collab.Border.Line.Color",type:"VCXPropertyValueColor"},"ActorCurve.Border.Opacity":{name:"Collab.Border.Line.Color.Opacity",type:"VCXPropertyValueFloat"},"ActorCurve.Border.Type":{name:"Collab.Border.Line.Type",type:"VCXPropertyValueEnum"},"ActorCurve.Border.Width":{name:"Collab.Border.Line.Width",type:"VCXPropertyValueFloat"},"Actor.Radius":{name:"Circle.Radius",type:"VCXPropertyValueFloat"},"Actor.Thickness":{name:"Circle.Thickness",type:"VCXPropertyValueFloat"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);switch(l){case"ActorCurve.Line.Opacity":case"ActorCurve.Border.Opacity":p.Value/=255}u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiablePmi",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableOccurrence"],(function(e,t,r){"use strict";var a={"ActorCompositePmi.MirroringRepresentation":{name:"ActorCompositePmi.MirroringRepresentation",type:"VCXPropertyValueEnum"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),a)},getPropertiesMap:function(e,r,o,i,n){var s=this._parent(e,r,o,i,n);for(var l in o){var u=a[l];if(u){var c=o[l],p=t.fillPropertyValue(c,u.type,r);l,u.name&&p&&s.set(u.name,p)}}return s}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupCamera",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressup","DS/VCXWebProperties/VCXPropertyValueAnchor"],(function(e,t,r,a){"use strict";var o={"Navigator.Camera.Location":{name:null,type:"VCXPropertyValueLocation"},"Anchor.1":{name:"Actor.Anchor.1",type:"VCXPropertyValueAnchor"},"Anchor.2":{name:"Actor.Anchor.2",type:"VCXPropertyValueAnchor"},"Navigator.Camera.Fov":{name:"Camera.Angle",type:"VCXPropertyValueFloat"},"Navigator.Camera.Height":{name:"Camera.Height",type:"VCXPropertyValueFloat"},"Navigator.Camera.Proj.Persp":{name:"Camera.Ortho",type:"VCXPropertyValueBoolean"},"Navigator.Camera.Arcball":{name:"Camera.Arcball",type:"VCXPropertyValueBoolean"},"Navigator.Camera.Interpolator":{name:"Actor.Interpolation.Type",type:"VCXPropertyValueEnum"},"Camera.Pitch":{name:"Camera.Pitch",type:"VCXPropertyValueBoolean"},"Camera.Roll":{name:"Camera.Roll",type:"VCXPropertyValueBoolean"},"Camera.Yaw":{name:"Camera.Yaw",type:"VCXPropertyValueBoolean"},"Camera.LockDistCOI":{name:"Camera.LockDistCOI",type:"VCXPropertyValueBoolean"},"Camera.DistCOI":{name:"Camera.DistCOI",type:"VCXPropertyValueFloat"}};return r.extend({getPropertiesDescription:function(){return UWA.extend(this._parent(),o)},getPropertiesMap:function(e,r,i,n,s){var l=this._parent(e,r,i,n,s);for(var u in i){var c=o[u];if(c){var p=i[u],m=t.fillPropertyValue(p,c.type,r);switch(u){case"Navigator.Camera.Location":var d=new a;d.SetValueFrame(m.GetFrame()),l.set("Actor.Anchor.1",d);var C=new a;C.SetValueFrame(m.GetPivot()),l.set("Actor.Anchor.2",C);break;case"Navigator.Camera.Fov":m.Value=180*m.Value/Math.PI;break;case"Navigator.Camera.Proj.Persp":m.Value=!m.Value}c.name&&m&&l.set(c.name,m)}}return l}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupDigger",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebProperties/VCXPropertyValueFrame"],(function(e,t,r){"use strict";var a={"Inspector.Enabled":{name:"Actor.Opacity",type:"VCXPropertyValueFloat"},"Digger.Radius":{name:"Digger.Radius",type:"VCXPropertyValueFloat"},"Digger.Position":{name:"Digger.Position",type:"VCXPropertyValuePoint2D"},"Digger.Renderer":{name:"Digger.Mode",type:"VCXPropertyValueEnum"},"Digger.COIOn":{name:"Digger.Attach",type:"VCXPropertyValueBoolean"},"Digger.COIPos":{name:"Actor.Anchor.0",type:"VCXPropertyValueAnchor"},"Digger.Depth":{name:null,type:"VCXPropertyValueFloat"}};return e.extend({getPropertiesDescription:function(){return UWA.extend({},a)},getPropertiesMap:function(e,o,i,n,s){var l=new Map;for(var u in i){var c=a[u];if(c){var p=i[u],m=t.fillPropertyValue(p,c.type,o);switch(u){case"Digger.Renderer":switch(m.GetValue()){case 0:m.Value=1;break;case 1:m.Value=2;break;case 2:case 3:m.Value=0}break;case"Digger.COIPos":var d=t.fillPropertyValue(p,"VCXPropertyValueVector",o);m.SetValueFrame((new r).SetValueFromVector(d.GetValue()));break;case"Digger.Depth":"DigZoom"===e.loadParentMode?l.set("Digger.ZoomFactor",m):l.set("Digger.DepthFactor",m)}c.name&&m&&l.set(c.name,m)}}return l}})})),define("DS/VCXWebInteropSMG/VCXSmgLoaderModifiableFactory",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiable","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableViewport","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableGround","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableOccurrenceComposer","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableMeshPrimitive","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiablePmi","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableCurveWire","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiablePoint","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableRedLine","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupCamera","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupPath","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrowLinear","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrowCircular","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupArrowCorner","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupCircle","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupPolyline","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableBomManager","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableBomInfo","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupPanel","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupDigger","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableHotSpot","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupCompass","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableDressupSection","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueBoolean"],(function(e,t,r,a,o,i,n,s,l,u,c,p,m,d,C,g,h,V,f,y,S,v,b,A,P,X,M){"use strict";var I={CLitViewport:{classname:"VCXViewport_Spec",classFcntName:a,additionalProperties:{"Environment.Background.Override":new M(!0),"Render.Lighting.Override":new M(!0),"Render.ShowConstructions":new M(!0)}},CLitActorGround:{classname:"VCXComponentGround",classFcntName:o},CLitVectorImageBOM:{classname:"VCXBOM_Spec",classFcntName:S},CLitKBOMManager:{classname:"VCXComponentBomManager",classFcntName:f},CLitBOMInfo:{classname:"VCXBOMInfoComponent",classFcntName:y},CLitActor:{classname:"VCXComponentOccurrenceSMG",classFcntName:r},CLitAssyGroup:{classname:"VCXComponentOccurrenceSMG",classFcntName:i},CLitActorMesh:{classname:"VCXComponentOccurrenceSMG",classFcntName:i},CLitActorPoint:{classname:"VCXComponentPoint",classFcntName:u},CLitActorCurveWire:{classname:"VCXComponentCurveWire",classFcntName:l},CLitActorCompositePmi:{classname:"VCXComponentCompositePmi",classFcntName:s},CLitCameraActor:{classname:"CXPCameraActor_Spec",classFcntName:p},CLitRedline:{classname:"VCXRedLine_Spec",classFcntName:c},CLitActorCurvePolyline:{classname:"VCXPolyline_Spec",classFcntName:V},CLitQuotationArc:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(110),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationAngle:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(120),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationLinear:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(130),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationDiameter:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(140),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationGDT:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(150),"Collab.Measurement.DisplayValue":new M(!1)}},CLitQuotationBetweenAxis:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(160),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationBetweenCentres:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(170),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationBetweenPlanes:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(180),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationPlanePoint:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(190),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationBetweenPoints:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(200),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationBetweenObjects:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(210),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationArea:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(220),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationVolume:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(230),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationAreaMultiplePoints:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(250),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationVolumeMultiplePoints:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(260),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationBetweenLines:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(280),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationLinePoint:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(290),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationRadius:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(300),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitQuotationCoord:{classname:"VCXMeasurement_Spec",classFcntName:S,additionalProperties:{"Collab.Measurement.Type":new X(310),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitRLCircle:{classname:"VCXCircle_Spec",classFcntName:h,additionalProperties:{"Collab.Is.Paper":new M(!1),"Collab.Border.AlwaysVisible":new M(!0)}},CLitRLArrow:{classname:void 0,classFcntName:void 0},CLitRLArrowLinear:{classname:"VCXLinearArrow_Spec",classFcntName:d,additionalProperties:{"Collab.Is.Paper":new M(!1),"Collab.Border.AlwaysVisible":new M(!0)}},CLitRLArrowCircular:{classname:"VCXCircularArrow_Spec",classFcntName:C,additionalProperties:{"Collab.Is.Paper":new M(!1),"Collab.Border.AlwaysVisible":new M(!0)}},CLitRLArrowCorner:{classname:"VCXCornerArrow_Spec",classFcntName:g,additionalProperties:{"Collab.Is.Paper":new M(!1),"Collab.Border.AlwaysVisible":new M(!0)}},CLit2dWidgetImage:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Attach.3DAttach":new M(!1)}},CLit2dWidgetImagePaperSpace:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Attach.3DAttach":new M(!1),"Collab.Lead.AlwaysVisible":new M(!0)}},CLit2dWidgetImageFromDigger:{classname:"VCXDiggerPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Attach.3DAttach":new M(!1)}},CLit2dWidgetImagePaperSpaceFromDigger:{classname:"VCXDiggerPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Attach.3DAttach":new M(!1),"Collab.Lead.AlwaysVisible":new M(!0)}},CLit2dWidgetImagePaperSpaceFromCropArea:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Attach.3DAttach":new M(!1),"Collab.Lead.AlwaysVisible":new M(!0)}},CLit2dWidgetArea:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Attach.3DAttach":new M(!1)}},CLit2dWidgetText:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Background.Show":new M(!0),"Collab.Text.Availability":new X(1),"Collab.Attach.3DAttach":new M(!1)}},CLit2dWidgetTextPaperSpace:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Background.Show":new M(!0),"Collab.Text.Availability":new X(1),"Collab.Attach.3DAttach":new M(!1),"Collab.Text.VAlignment":new X(1),"Collab.Text.Wordwrap":new M(!1),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitVectorImage:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Attach.3DAttach":new M(!1),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitVectorImageFromDetailView:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Attach.3DAttach":new M(!1),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitVectorImage3D:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.3D.Paper.Positioning.Type":new X(1001),"Collab.3D.Paper.Billboard.Type":new X(0),"Collab.3D.Paper.Size.Control.Type":new X(0),"Actor.IsAlwaysOnTop":new M(!1)}},CLitPanel:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.3D.Paper.Positioning.Type":new X(1001),"Collab.3D.Paper.Billboard.Type":new X(0),"Collab.3D.Paper.Size.Control.Type":new X(0),"Actor.IsAlwaysOnTop":new M(!1)}},CLitText2d:{classname:"VCXLabel_Spec",classFcntName:S,additionalProperties:{"Collab.Body.HAlignment":new X(0),"Collab.Body.VAlignment":new X(0),"Collab.Text.Availability":new X(1),"Collab.Text.HAlignment":new X(0),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitText2dPaperSpace:{classname:"VCXPanel_Spec",classFcntName:S,additionalProperties:{"Collab.Body.HAlignment":new X(0),"Collab.Body.VAlignment":new X(0),"Collab.Background.Show":new M(!0),"Collab.Text.Availability":new X(1),"Collab.3D.Paper.Positioning.Type":new X(101),"Collab.UseDepthFromAnchor":new M(!0),"Collab.Text.Wordwrap":new M(!1),"Collab.Text.HAlignment":new X(1),"Collab.Text.VAlignment":new X(1),"Collab.Lead.AlwaysVisible":new M(!0)}},CLitTextMultiplePoints:{classname:"VCXLabel_Spec",classFcntName:S,additionalProperties:{"Collab.Body.HAlignment":new X(0),"Collab.Body.VAlignment":new X(1),"Collab.3D.Paper.UsesBarycenter":new M(!1),"Collab.Lead.AlwaysVisible":new M(!0),"Collab.HideIfOutsideAnchorFrustrum":new M(!1)}},CLitDrawText:{classname:"VCXLabel_Spec",classFcntName:S,additionalProperties:{"Collab.Is.Paper":new M(!1),"Collab.3D.Paper.Positioning.Type":new X(1001),"Collab.3D.Paper.Size.Control.Type":new X(0),"Collab.Markup.SubType":new X(2),"Collab.Body.HAlignment":new X(0),"Collab.Body.VAlignment":new X(2),"Collab.3D.Paper.UsesBarycenter":new M(!1),"Collab.Text.HAlignment":new X(1),"Collab.3D.Paper.Billboard.Type":new X(0),"Collab.Attach.Show":new M(!1),"Collab.Attach.Preset":new X(0)}},CLitCalloutMP:{classname:"VCXCallout_Spec",classFcntName:S,additionalProperties:{"Collab.Lead.AlwaysVisible":new M(!0),"Collab.HideIfOutsideAnchorFrustrum":new M(!1)}},CLitCallout:{classname:"VCXCallout_Spec",classFcntName:S,additionalProperties:{"Collab.Lead.AlwaysVisible":new M(!0),"Collab.HideIfOutsideAnchorFrustrum":new M(!1)}},CLitActorComposite:{classname:void 0,classFcntName:void 0},CLitActorCompositeIntersect:{classname:void 0,classFcntName:void 0},CLitCS:{classname:void 0,classFcntName:void 0},CLitGrid:{classname:void 0,classFcntName:void 0},CLitLight:{classname:void 0,classFcntName:void 0},CLitActorBBox:{classname:void 0,classFcntName:void 0},CLitActorPrim:{classname:"VCXComponentMeshPrimitive",classFcntName:n},CLitActorCompass:{classname:"VCXCompass_Spec",classFcntName:A},CLitActorAxis:{classname:void 0,classFcntName:void 0},CLitDigger:{classname:"VCXDigger_Spec",classFcntName:v},CLitActorMagnetLine:{classname:void 0,classFcntName:void 0},CLitSelectionHotSpot:{classname:"VCXComponentHotspot",classFcntName:b},CLitTargetObject:{classname:void 0,classFcntName:void 0},CLitCuttingPlane:{classname:"VCXSection_Spec",classFcntName:P,additionalProperties:{"Section.ComposerSMG":new M(!0)}},CLitActorCurvePolylinePath:{classname:"VCXComponentPath",classFcntName:m},CLitActorCurvePolylinePathAssociative:{classname:"VCXComponentAssociativePath",classFcntName:m}};return e.extend({init:function(){this._Converters={},this._mapComponentConverter=new Map,t.mapConverters&&console.warn("Converters map should be undefined"),t._factory=this},clear:function(){this._Converters=null,this._mapComponentConverter=null,delete t._factory},getV1Ids:function(){return I},createPropertiesMap:function(e,t,r,a,o){if(e){var i=this._mapComponentConverter.get(e.GetObject());if(!i)for(var n in I)I[n].classname===e.GetObject().GetType()&&(i=new I[n].classFcntName,this._Converters[I[n].classname]=i,this._mapComponentConverter.set(e.GetObject(),i));if(i)return i.getPropertiesMap(e,t,r,a,o);console.warn("Can't find properties set converter")}return console.warn("Can't create properties set"),new Map},create:function(e,t,r,a,o){var i=I[t];if(!i||!i.classname)return null;var n=e.Factory.BuildComponent(i.classname);if(!n)return console.warn("Unable to build component "+i.classname),null;"CLitActorMesh"===t&&n.SetIsMesh(!0);var s=n.QueryInterface("VCXIModifiable");for(var l in i.additionalProperties)i.additionalProperties.hasOwnProperty(l)&&s.OnChangeProperty(l,i.additionalProperties[l]);if(r&&(n.SetID(r),n.IsDressup?e.getManager("VCXDressupManager").AddDressups([n]):n.QueryInterface("W3AISGNodeHolder")&&a&&n.QueryInterface("W3AISGNodeHolder").setPathElement(a),e.ComponentsMap.AddComponent(n)),o&&void 0!==o&&!n.IsDressup){var u=n.QueryInterface("VCXIModelNavigable"),c=o.QueryInterface("VCXIModelNavigable");u&&c&&u.setParent(c)}var p=this._Converters[i.classname];return p||(p=new i.classFcntName,this._Converters[i.classname]=p),this._mapComponentConverter.set(n,p),n}})})),define("DS/VCXWebInteropSMG/VCXSmgXmlLoader",["UWA/Class","DS/CoreEvents/Events","DS/Visualization/PathElement","DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D","DS/Mesh/MeshUtils","DS/VCXKeyFramer/VCXScenario","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueLink","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueVector","DS/VCXWebProperties/VCXPropertyValueBin","DS/VCXWebModifiables/VCXMetaPropertyDef","DS/VCXWebInteropSMG/VCXSmgLoaderModifiableFactory","DS/VCXWebInteropSMG/VCXSmgLoaderPropertiesModifiableBomManager","DS/VCXWebKernelCommands/VCXCmdChangeSequence","DS/VCXWebKernelCommands/VCXCmdChangeScenarioSequence","DS/VCXWebKernelCommands/VCXCmdChangeKeys","DS/VCXWebKernelCommands/VCXCmdChangeNeutralProperties","DS/VCXWebKernelCommands/VCXCmdChangePropertiesAutokey","DS/VCXWebKernelCommands/VCXCmdGoToScenario","DS/VCXWebKernel/VCXCmdChangeMarker","DS/VCXWebSystem/VCXMeshServices","DS/VCXWebUnits/VCXUnitType","DS/VCXWebIO/VCXLogServices","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebInteropSMG/VCXSmgXmlSaxReaderFullyShattered","DS/VCXWebInteropSMG/VCXSmgXmlDataStorage","i18n!DS/VCXWebInteropSMG/assets/nls/VCXWebInteropSMG","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables","DS/VCXWebSystem/VCXMathTools"],(function(e,t,r,a,o,n,s,l,u,c,p,m,d,C,g,h,V,f,y,S,v,b,A,P,X,M,I,w,L,D,T,x,_,F,B,G,N,E){"use strict";var O=e.extend({init:function(){this._vcxViewport=null,this._vcxCompass=null,this._vcxBom=null,this._vcxBomInfo=null,this._vcxDigger=null,this._vcxScenarioAnimationSmg=null,this._mapGeodes=null,this._mapSequences={},this._resources=null,this._experienceBase=null,this._allPMIs=[],this._allPmisConstructionGeometries=[],this._modifiableFactory=new v,this._materialManager=null,this._documentProperties={},this._v1ComponentType={},this._smgViewFile=null,this._smgSceFile=null,this._smgXmlMasterFile=null,this._smgXmlMap=null,this._smgSceFileParsing=!1,this._listSmgXmlRootNodes=[],this._statNb3DNodes=0,this.VCXSmgXmlSaxReaderFullyShattered=null},loadXMLDoc:function(e){var t;(t=window.ActiveXObject?new ActiveXObject("Msxml2.XMLHTTP"):new XMLHttpRequest).open("GET",e,!1);try{t.responseType="msxml-document"}catch(e){}return t.send(""),t.responseXML},getNodes:function(e){if(void 0===e)return[];if(e instanceof Array)return e;var t=[];return t.push(e),t},getServerFromType:function(e,t){for(var r=[],a=0;a<e.length;a++){var o=e[a];o["@attributes"].Type===t&&r.push(o)}return r},SetSMGXMLs:function(e){this._smgXmlMap=e},GetSMGXMLs:function(e){this._smgXmlMap=e},SetSMGViewFile:function(e){this._smgViewFile=e},GetSMGViewFile:function(){return this._smgViewFile},SetSMGSceFile:function(e){this._smgSceFile=e},GetSMGSceFile:function(){return this._smgSceFile},SetMasterFileName:function(e){this._smgXmlMasterFile=e},concatArray:function(e){if(e instanceof Array){for(var t="",r=0;r<e.length;r++)t+=e[r];e=t}return e},createGroupSelectionSet:function(e){var t=e["@attributes"],r=t.Name,a=t.Ident,o=this._experienceBase.Factory.BuildComponent("VCXComponentGroupSelectionSet");o.SetID(a),this._experienceBase.ComponentsMap.AddComponent(o);for(var i=[],n=this.getNodes(e.CLitSelection),s=0;s<n.length;s++){var l=this.createSelectionSet(n[s]);l&&(l.GroupID=a,i.push(l.GetID()))}o.SetArrayActors(i),o.SetName(r);var u=o.QueryInterface("VCXIModifiable"),c=new M(this._experienceBase);c.CaptureNeutralProperties(u),this._experienceBase.getManager("VCXCommandManager").Do(c)},createSelectionSet:function(e){var t=e["@attributes"],r=t.Name,a=t.Ident,o=this._experienceBase.Factory.BuildComponent("VCXComponentSelectionSet");o.SetID(a),this._experienceBase.ComponentsMap.AddComponent(o);var i=[],n=e["#text"];if(n){(i=this.concatArray(n).split("#")).pop();var s=i.indexOf("-1");-1!==s&&(i[s]="VCX_RootSMG")}o.SetName(r),o.SetArrayActors(i);var l=o.QueryInterface("VCXIModifiable"),u=new M(this._experienceBase);return u.CaptureNeutralProperties(l),this._experienceBase.getManager("VCXCommandManager").Do(u),o},parseListSelection:function(e){console.log("PARSE SELECTION SETS");for(var t=this.getNodes(e.CLitSelection),r=0;r<t.length;r++){var a=t[r];a.CLitSelection?this.createGroupSelectionSet(a):this.createSelectionSet(a)}},parseDocumentSMGXML:async function(e){var r=e["@attributes"].VersionSeemage;if(parseFloat(r)<7){var a=!!localStorage&&localStorage.getItem("DS_COMPOSER_DONT_SHOW_AGAIN_UNSUPPORTED_FILE_WARNING");if("true"!==a&&"1"!==a){var o=G["Notification.UnsupportedVersion"],i=G["Notification.Donotshowagain"];this._experienceBase.getManager("VCXNotificationManager").addNotification({level:"warning",title:"warning",message:o,action:{label:i,callback:function(){localStorage&&(localStorage.setItem("DS_COMPOSER_DONT_SHOW_AGAIN_UNSUPPORTED_FILE_WARNING",!0),this.getParent()&&this.getParent().destroy())}}})}}var n=this._experienceBase.getManager("VCXContextManager");if(n.getContextFromName("ExperienceInConnectedPlayer")&&n._supportedFeatures._SMGFileOpenFromSwym){let e=r.lastIndexOf(".");if(r.slice(0,e)<"7.7.4"){o=G["Notification.OlderVersionWithBadImagePreview"];this._experienceBase.getManager("VCXNotificationManager").addNotification({level:"warning",title:"warning",message:o,action:{label:"OK",callback:function(){this.getParent()&&this.getParent().destroy()}}})}}this._mapSequences={},this._allPMIs=[];var l=e.Server,m=this.getServerFromType(l,"CLitIOManager");for(var d in m[0])m[0][d]["@attributes"]&&(this._documentProperties[d]=m[0][d]["@attributes"]);for(var C=this.getServerFromType(l,"PropertyDefinitions"),h=0;h<C.length;h++){var V=C[h];this.parseMetaPropertyDefinitions(V)}var f=this.GetFPSAndInterFrames(l),y=f.fps,S=f.interframeMax,v=this.getServerFromType(l,"CLitKKeyframer")[0];v&&v.Play&&v.Play["@attributes"]&&(v.Play["@attributes"].FPS&&(y=parseFloat(v.Play["@attributes"].FPS)),v.Play["@attributes"].InterFramesMax&&(S=parseInt(v.Play["@attributes"].InterFramesMax)));var b=1e3,X=this.getServerFromType(l,"CLitViewportManager")[0];X&&X.CameraSmoothTime&&X.CameraSmoothTime["@attributes"]&&X.CameraSmoothTime["@attributes"].Value&&(b=2*parseFloat(X.CameraSmoothTime["@attributes"].Value));var L=new p(S),D=new u(new g("ScenarioManager.InterFramesMax",2),L),x=new c(y),_=new u(new g("ScenarioManager.FPS",2),x),F=new c(b),B=new u(new g("ScenarioManager.TransitionTime",2),F),N=this._experienceBase.getManager("VCXScenarioManager"),E=N.QueryInterface("VCXIModifiable"),W=new I(this._experienceBase,!0);W.ChangeProperty(E,_),W.ChangeProperty(E,D),W.ChangeProperty(E,B),this._experienceBase.getManager("VCXCommandManager").Do(W),N.SetCurrentFrame(0),this._experienceBase.getManager("VCXGUIManager").InitGUI();var R=this._experienceBase.getManager("VCXExperience");await R.InitImagePanels();var k,U=this._experienceBase.Factory.BuildComponent("VCXScenarioSequence"),H=U.QueryInterface("VCXIModifiable");k=G["Sequence.Animation"],U.SetName(k),U.SetSequenceType(0);var j=new M(this._experienceBase);j.CaptureNeutralProperties(H),this._experienceBase.getManager("VCXCommandManager").Do(j);this._experienceBase.getManager("VCXSequenceManager");var Y=new A(this._experienceBase);Y.PushSequence(U),this._experienceBase.getManager("VCXCommandManager").Do(Y);var z=this._experienceBase.Factory.BuildComponent("VCXScenario"),Q=z.QueryInterface("VCXIModifiable");z.SetID("AnimationSmgID"),z.SetName("Animation smg"),z.SetScenarioType(s.EScenarioType.Scenario),this._vcxScenarioAnimationSmg=z;var K="image.bmp",q=this._resources[K],Z=this._experienceBase.getManager("VCXDocManager").BuildPathFromString(q,K);if(Z){var J=this._experienceBase.getManager("VCXDocManager").AddOrModifyDoc(Z);Q.OnChangeProperty("Actor.DocID",J)}var $=new P(this._experienceBase);$.PushScenarioInSequence(z,U.GetID()),this._experienceBase.getManager("VCXCommandManager").Do($);var ee=new w(this._experienceBase);ee.GoToScenario(z.GetID()),this._experienceBase.getManager("VCXCommandManager").Do(ee);var te=this.getServerFromType(l,"CLitKKeyframer");this.parseMarkers(te[0],z);var re=this.getServerFromType(l,"CLitServerModifiable");this._layerAnimation=re[0].CLitViewport?re[0].CLitViewport.CLitView:null,this.parseServerModifiable(re[0],z);var ae=this.getServerFromType(l,"CLitKBOMManager");if(this._experienceBase.getManager("VCXComponentBomManager")){var oe=this._experienceBase.getManager("VCXComponentBomManager").QueryInterface("VCXIModifiable");this._modifiableFactory.createPropertiesMap(oe,this._experienceBase,ae[0],this._experienceBase.ComponentsMap,this._resources,"CLitKBOMManager").forEach((function(e,t){var r=t,a=e;oe.OnChangeProperty(r,a)}))}var ie=-1,ne=-1,se=this.getServerFromType(l,"CLitPaperOutputManager");for(h=0;h<se.length;h++){var le=se[h];if(le["Vectorize.Paper.Width"]&&le["Vectorize.Paper.Height"]&&le["Vectorize.Paper.Landscape"]){var ue=parseInt(le["Vectorize.Paper.Landscape"]["@attributes"].Value),ce=parseFloat(le["Vectorize.Paper.Width"]["@attributes"].Value),pe=parseFloat(le["Vectorize.Paper.Height"]["@attributes"].Value);1===ue&&pe>ce||0===ue&&pe<ce?(ie=pe,ne=ce):(ie=ce,ne=pe)}else le["Vectorize.Paper.Width"]&&(ie=parseFloat(le["Vectorize.Paper.Width"]["@attributes"].Value)),le["Vectorize.Paper.Height"]&&(ne=parseFloat(le["Vectorize.Paper.Height"]["@attributes"].Value))}var me=this._experienceBase.getManager("VCXContextManager").getActiveViewport();if(me){var de=me.QueryInterface("VCXIModifiable");de&&(ie>=0&&de.OnChangeProperty("Paper.Width",new c(ie)),ne>=0&&de.OnChangeProperty("Paper.Height",new c(ne)))}var Ce=this._experienceBase.getManager("VCXUnitManager");if(Ce){var ge=this.getServerFromType(l,"CLitUnitManager");for(h=0;h<ge.length;h++){var he=ge[h];if(he)for(var Ve in he)if("Unit."===Ve.substring(0,5)){var fe=Ve.substring(5),ye=Ce.getUnitType(fe);if(ye){var Se=he[Ve];switch(ye.Precision=parseInt(Se["@attributes"].Precision),ye.SymbolDisplay=parseInt(Se["@attributes"].ShowName),ye.DisplayUnit=O.unitsTranslation[fe][Se["@attributes"].Range],ye.InternUnit=O.unitsTranslation[fe][Se["@attributes"].RangeLitToSI],Se["@attributes"].Separator){case"44":ye.LanguageDisplay=T.ELanguageDisplay.fr;break;case"46":ye.LanguageDisplay=T.ELanguageDisplay.en;break;case"59":ye.LanguageDisplay=T.ELanguageDisplay.local}}}}}for(C=this.getServerFromType(l,"PropertyDefinitions"),h=0;h<C.length;h++){V=C[h];this.parseMetaPropertyDefinitions(V)}if(this.parseSceFileIfExists(),this.GetSMGViewFile()){var ve=this.GetSMGViewFile().ViewsSMG.Server,be=this.getServerFromType(ve,"CLitList");for(h=0;h<be.length;h++){(Me=be[h]).CLitView&&this.parseViews(Me)}}for(be=this.getServerFromType(l,"CLitList"),h=0;h<be.length;h++){(Me=be[h]).CLitSelection?this.parseListSelection(Me):Me.CLitView&&this.parseViews(Me)}for(h=0;h<this._listSmgXmlRootNodes.length;h++){var Ae=this._listSmgXmlRootNodes[h];if(Ae)for(var Pe=Ae.GetSmgXmlViewsNode(),Xe=0;Xe<Pe.length;Xe++){var Me;(Me=Pe[Xe]).CLitSelection&&(this._experienceBase.getManager("VCXContextManager").setContextFromName("SmgXmlRoot",Ae),this.parseListSelection(Me),this._experienceBase.getManager("VCXContextManager").setContextFromName("SmgXmlRoot"))}}var Ie=this._documentProperties.LaunchAction;Ie&&"1"===Ie.Value&&R.SetViewMode(1),this._experienceBase.getManager("VCXHotspotManager")&&this._experienceBase.getManager("VCXHotspotManager").UpdateHotspotsHyperlinks(),this._experienceBase.getManager("SUIManager")&&this._experienceBase.getManager("SUIManager").syncCameraSystemModifiables(),t.publish({event:"VCX_REFRESH_ICON",data:z}),t.publish({event:"VCX_KEYS_CHANGED"})},GetFPSAndInterFrames:function(e){var t=null,r={};if(this.GetSMGSceFile()){var a=this.GetSMGSceFile().ScenarioSMG.Server;t=this.getServerFromType(a,"CLitKKeyframer")}else t=this.getServerFromType(e,"CLitKKeyframer");if(t){var o=t[0];o&&o.Play&&o.Play["@attributes"]&&(o.Play["@attributes"].FPS&&(r.fps=parseFloat(o.Play["@attributes"].FPS)),o.Play["@attributes"].InterFramesMax&&(r.interframeMax=parseInt(o.Play["@attributes"].InterFramesMax)))}return r},parseSceFileIfExists:function(){if(this.GetSMGSceFile()){this._smgSceFileParsing=!0;var e=this.GetSMGSceFile().ScenarioSMG.Server,t=this.getServerFromType(e,"CLitServerModifiable");if(1==t.length){var r=t[0];for(var a in this._modifiableFactory.getV1Ids()){var o=this.getNodes(r[a]);if(o.length)for(var i=0;i<o.length;i++){var n=o[i],s="",l=n["@attributes"];if(l){var u=l.NetGuid,c=l.Ident;u?s=l.NetGuid:c&&(s=l.Ident);var p=this._experienceBase.ComponentsMap.GetComponentFromID(s),m=p?p.QueryInterface("VCXIModifiable"):null;m&&(this.parseNeutrals(n,m,a),this.parseTracks(n,m,a))}}}}this._smgSceFileParsing=!1}},parseMarkers:function(e,t){if(void 0!==e&&void 0!==e.Markers&&e.Markers.CLitMarker){var r=[];e.Markers.CLitMarker.length?r=e.Markers.CLitMarker:r.push(e.Markers.CLitMarker);for(var a=this._experienceBase.getManager("VCXCommandManager"),o=new L(this._experienceBase),i=new I(this._experienceBase,!0),n=0;n<r.length;n++){var s=r[n],l=s["@attributes"].Pos,c=s["@attributes"].Label,d=s["@attributes"].Milestone,h=c+"_"+l,V=this._experienceBase.Factory.BuildComponent("VCXComponentMarker");V.SetID(h),o.AddMarkerToScenario(V,t,parseInt(l,10));var f=new p;f.FromString(l);var y=new u(new g("Actor.TimePos",2),f),S=new m(c),v=new u(new g("Actor.Name",2),S),b=new C;b.FromString(d);var A=new u(new g("Actor.IsMilestone",2),b),P=V.QueryInterface("VCXIModifiable");i.ChangeProperty(P,y),i.ChangeProperty(P,v),i.ChangeProperty(P,A)}a.Do(i),a.Do(o);var X=t.QueryInterface("VCXIModifiable"),w=new M(this._experienceBase);w.CaptureNeutralProperties(X),this._experienceBase.getManager("VCXCommandManager").Do(w)}},parseMetaPropertyDefinitions:function(e){for(var t=e.MetaProperties,r=this.getNodes(t.Meta),a=0;a<r.length;a++){var o=r[a],i="VCXPropertyValueString";switch(o["@attributes"].Type){case"String":default:i="VCXPropertyValueString";break;case"Bool":i="VCXPropertyValueBoolean";break;case"Color":i="VCXPropertyValueColor";break;case"Date":i="VCXPropertyValueDate";break;case"Float":i="VCXPropertyValueFloat";break;case"Int":i="VCXPropertyValueInt"}var n=new g(o["@attributes"].Name,0,!0);"1"===o["@attributes"].Bounded&&("VCXPropertyValueInt"===i?n.SetBounds(parseInt(o["@attributes"].MinValue),parseInt(o["@attributes"].MaxValue)):"VCXPropertyValueFloat"===i&&n.SetBounds(parseFloat(o["@attributes"].MinValue),parseFloat(o["@attributes"].MaxValue))),n.SetGroupId("Group.UserProperties"),n.Seti18nGroup(N);var s=new S(n,i);s.SetDefaultLabel(o["@attributes"].DefaultLabel),n.SetMetaPropertyDef(s),this._experienceBase.getManager("VCXMetaPropertyManager").AddMetaPropertyDef(s)}},parseViews:function(e){x.memoryLog("VCXSmgXmlLoader parseViews",!0);for(var t=this.getNodes(e.CLitView),r=0;r<t.length;r++)this.parseView(t[r]);x.memoryLog("VCXSmgXmlLoader parseViews",!1)},parseView:function(e){if("1"!==(B=e["@attributes"]).IsUsedByUpdatableCapture){var t=this._experienceBase.Factory.BuildComponent("VCXScenario"),r=B.Ident;B.Type!==O.ViewType.CadViews&&B.Type!==O.ViewType.CadCaptures||(r+=B.Type),t.SetID(r),"1"===B.AppliedToObject&&"1"===B.AppliedToProperties&&"0"===B.AppliedToSelection||t.SetApplyNeutralAtGoToScenario(!1);var a="1"===B.AppliedZoomFitAll||B.Type===O.ViewType.CadViews;t.SetZoomFitAll(a);var o=B.Type===O.ViewType.CadViews;if(!o&&e.Neutral){var i=e.Neutral["CADView.AppliedToPMIOnly"];if(i){var n=i["@attributes"];n&&(o="1"===n.Value)}}var l="view"+B.Ident+".jpg";l=l.toLowerCase();var u=this._resources[l],c=t.QueryInterface("VCXIModifiable"),p=this._experienceBase.getManager("VCXDocManager").BuildPathFromString(u,l);if(p){var m=this._experienceBase.getManager("VCXDocManager").AddOrModifyDoc(p);c.OnChangeProperty("Actor.DocID",m)}var d=!1,C=B.CollectionName;void 0!==C&&""!==C&&(d=!0);var g="Unknown",h=s.EScenarioType.Scenario;if(d?g=C:(B.Type===O.ViewType.Views?g="Views":B.Type===O.ViewType.Layers?(g="Layers",h=s.EScenarioType.Layer):B.Type===O.ViewType.CadViews?(g="CADViews",h=s.EScenarioType.CADView):B.Type===O.ViewType.CadCaptures&&(g="CADCaptures",h=s.EScenarioType.CADCapture),g=G["Sequence."+g]),t.SetName(B.Name),t.SetScenarioType(h),this.parseViewVisibility(t,e,o),!o&&"1"===B.AppliedToObject&&"1"===B.AppliedToVisibility&&"1"!==B.AppliedToSelection)if(this._documentProperties["View.VisibleBehavior"])switch(this._documentProperties["View.VisibleBehavior"].Value){case O.ViewCompressionV1.VisibleActors:case O.ViewCompressionV1.VisibleAssemblies:t.GetVisibility().SetMode(1),t.GetVisibility().AddVisibleToGroups(this._experienceBase.getManager("VCXContextManager").getRootComponent());break;case O.ViewCompressionV1.HiddenActors:case O.ViewCompressionV1.HiddenAssemblies:t.GetVisibility().SetMode(2);break;default:t.GetVisibility().SetMode(0)}else t.GetVisibility().SetMode(1),t.GetVisibility().AddVisibleToGroups(this._experienceBase.getManager("VCXContextManager").getRootComponent());(k=new M(this._experienceBase)).CaptureNeutralProperties(c),this._experienceBase.getManager("VCXCommandManager").Do(k),this._vcxCamera||(this._vcxCamera=this.createCamera(),this._experienceBase.getManager("VCXContextManager").setActiveCamera(this._vcxCamera));var V=e.Camera;if(V)for(var f=this.getNodes(V.CLitModifiable),y=0;y<f.length;y++)this.addModifiableNodeToView(t,f[y],null);else{var S=e.Navigator;if(void 0!==S){var v=this._vcxCamera.QueryInterface("VCXIModifiable");this.addModifiableToView(t,v,S)}}if(void 0!==e.Navigator&&this._vcxCompass){var b=this._vcxCompass.QueryInterface("VCXIModifiable");this.addModifiableToView(t,b,e.Navigator)}var X=e.Viewport;if(X&&this._vcxViewport){var I=this._vcxViewport.QueryInterface("VCXIModifiable");this.addModifiableToView(t,I,X)}var w=e.Configuration;if(e.Configuration={},w){var L=this.getNodes(w.CLitModifiable);if(w.CLitModifiable=[],void 0!==L)for(var D=0;D<L.length;D++){var T=L[D];L[D]={},this.addModifiableNodeToView(t,T)}}var x=e.BOMInfo;if(void 0!==x){var _=this._vcxBomInfo.QueryInterface("VCXIModifiable");this.addModifiableToView(t,_,x)}var F=e.Digger,B=e["@attributes"];if(void 0!==F&&B&&"1"===B.AppliedToDigger){var N="VCX_Digger.-1",E=null,W=this._experienceBase.ComponentsMap.GetComponentFromID(N);if(W||(W=this._modifiableFactory.create(this._experienceBase,"CLitDigger",N,void 0),this._v1ComponentType[N]="CLitDigger"),W&&(E=W.QueryInterface("VCXIModifiable")),E)if(this.addModifiableToView(t,E,F),E.loadParentMode="DigZoom",this.addModifiableToView(t,E,e.DigZoom),E.loadParentMode="DigOnionSkin",this.addModifiableToView(t,E,e.DigOnionSkin),E.loadParentMode="DigXRay",this.addModifiableToView(t,E,e.DigXRay),F["Inspector.Enabled"])if("1"===F["Inspector.Enabled"]["@attributes"].Value)t.GetVisibility().AddVisibleCollab(W)}var R=this._mapSequences[g];if(!R){var k,U=(R=this._experienceBase.Factory.BuildComponent("VCXScenarioSequence")).QueryInterface("VCXIModifiable");R.SetName(g),R.SetSequenceType(h),(k=new M(this._experienceBase)).CaptureNeutralProperties(U),this._experienceBase.getManager("VCXCommandManager").Do(k);var H=new A(this._experienceBase);H.PushSequence(R),this._experienceBase.getManager("VCXCommandManager").Do(H),this._mapSequences[g]=R}if(R){var j=new P(this._experienceBase);j.PushScenarioInSequence(t,R.GetID()),this._experienceBase.getManager("VCXCommandManager").Do(j)}}},parseActorList:function(e){if(void 0!==e){var t=[],r=e["#text"];if(void 0!==r){var a=this.concatArray(r).split("#");a.pop();for(var o=0;o<a.length;o++){var i=a[o];"-1"===i&&(i="VCX_RootSMG");var n=new d(i);t.push(n)}}if(t.length)return new h(t)}return null},parseViewVisibility:function(e,t,r){if(t){var a=e.GetVisibility();if(a){if(r)a.SetMode(0),a.AddInvisibles(this._allPMIs.slice(0).concat(this._allPmisConstructionGeometries.slice(0)));else if(e.GetApplyNeutralAtGoToScenario()){var o=e.QueryInterface("VCXIModifiable"),i=new V;if(this._documentProperties["View.VisibleBehavior"])switch(this._documentProperties["View.VisibleBehavior"].Value){case O.ViewCompressionV1.VisibleActors:case O.ViewCompressionV1.VisibleAssemblies:i.SetValue(1),a.AddVisibleToGroups(this._experienceBase.getManager("VCXContextManager").getRootComponent());break;case O.ViewCompressionV1.HiddenActors:case O.ViewCompressionV1.HiddenAssemblies:i.SetValue(2);break;default:a.SetMode(0)}else i.SetValue(1),a.AddVisibleToGroups(this._experienceBase.getManager("VCXContextManager").getRootComponent());var n=new M(this._experienceBase);n.ChangeProperty(o,"Scenario.Visibility.Mode",i),this._experienceBase.getManager("VCXCommandManager").Do(n)}else a.SetMode(0);var s=t.Living;if(void 0!==s){var l=s["#text"];if(void 0!==l)for(var u=this.concatArray(l).split("#"),c=0;c<u.length;c++){var p=u[c];if("-1"===p&&(p="VCX_RootSMG"),S=this._experienceBase.ComponentsMap.GetComponentFromID(p))if(S.IsKindOf("VCXComponentCompositePmi")&&!0===S._isSWPMI){a.AddVisible(S);for(var m=S.QueryInterface("VCXIModelNavigable").getChildren(),d=0;d<m.length;d++){var C=m[d];C&&C.GetObject().IsKindOf("VCXLabel_Spec")&&a.AddVisibleCollab(C.GetObject())}}else S.IsKindOf("VCXWebComponentOccurrence")&&!S.IsDressup?(r&&a.RemoveInvisible(S),a.AddVisibleToDescendants(S)):a.AddVisibleCollab(S)}}var g=t.Invisible;if(void 0!==g){var h=g["#text"];if(void 0!==h)for(var f=this.concatArray(h).split("#"),y=0;y<f.length;y++){var S,v=f[y];"-1"===v&&(v="VCX_RootSMG"),(S=this._experienceBase.ComponentsMap.GetComponentFromID(v))&&a.AddInvisibleToDescendants(S)}}if(this._vcxViewport&&a.AddVisibleCollab(this._vcxViewport),this._vcxCompass){var b=t.Navigator;if(void 0===b&&(b=t),void 0!==b){var A=b["Navigator.Compass.Visibility"];if(void 0!==A){var P=A["@attributes"];void 0!==P&&("0"===P.Value||"false"===P.Value?a.AddInvisible(this._vcxCompass):a.AddVisibleCollab(this._vcxCompass))}}}if(this._vcxDigger){var X=t;void 0!==X&&X.Tracks&&X.Tracks.Track&&a.AddVisibleCollab(this._vcxDigger)}}}},addModifiableToView:function(e,t,r){if(t){var a=t.GetObject().GetID(),o=this._v1ComponentType[a],i=this._modifiableFactory.createPropertiesMap(t,this._experienceBase,r,this._resources,o);r={};var n=new X(this._experienceBase);n.SetLockEvents(!0),n.SetLockUpdateProperties(!0),n.SetCloneValues(!1),i.forEach((function(r,a){var o=a,i=r;n.ChangeKey(e,t,o,parseFloat(0),i)})),this._experienceBase.getManager("VCXCommandManager").Do(n)}},addModifiableNodeToView:function(e,t){if(void 0!==t){var r=t["@attributes"].Ident,a=this._experienceBase.ComponentsMap.GetComponentFromID(r);if(a){var o=a.QueryInterface("VCXIModifiable");this.addModifiableToView(e,o,t)}else console.log("Can't find component "+r)}},createNodeForRefrencedXMLGrp:function(e,t,r,a,i,n,s,l){var u=t["@attributes"],c=null,p=null;if(n){this._statNb3DNodes++,(c=new o(u.Ident)).productType="Instance3D",a.add(c),i.addElement(c);var m=r;if(""===r&&(m="VCX_RootSMG"),(p=this._modifiableFactory.create(this._experienceBase,"CLitAssyGroup",m,i,s))&&""===r&&p.SetPersistency(1),p){p.SetGUID(u.Ident);var d=p.QueryInterface("VCXIModifiable");this.parseNeutrals(t,d,"CLitAssyGroup")}l&&l.AddComponent(p)}this.parseReferencedXML(e,r,c,i.clone(),!1,n,p,l)},tryToRetrieveRefXMLPath:function(e,t){var r=null;e=e.toLowerCase();for(var a=0;"."==e[a]||"\\"==e[a]||"/"==e[a];)a++;var o=e.slice(a);if(this._smgXmlMap.has(o)&&(r=o),!r&&t){var i=t.GetSmgXmlRelativePath().replace(/\\/g,"/"),n=i.slice(0,i.lastIndexOf("/"));o=null;e.startsWith(".\\")?(o=n+"\\"+(o=e.slice(2)),this._smgXmlMap.has(o)&&(r=o)):(o=n+"\\"+e,this._smgXmlMap.has(o)&&(r=o))}return r},parseReferencedXML:function(e,t,r,a,o,i,n,s){var l=this.tryToRetrieveRefXMLPath(e,s);let u=!!localStorage&&localStorage.getItem("DS_COMPOSER_LEGACY_PARSER");var c;if(!l||"true"!=u&&"1"!=u){if(l&&(!u||"false"===u)&&(c=this._smgXmlMap.get(l))){let e=c.Server;c.DocumentSMG.Server={},c.DocumentSMG.Server=e,e={};let o=this.getServerFromType(c.DocumentSMG.Server,"CLitServerModifiable"),s=o[0].CLitAssyRoot;o=null;let u=new B;if(u.SetSmgXmlDocument(c.DocumentSMG),u.SetSmgXmlRelativePath(l),i){this._listSmgXmlRootNodes.push(u);let e=this.getServerFromType(c.DocumentSMG.Server,"PropertyDefinitions");for(let t=0;t<e.length;t++){let r=e[t];this.parseMetaPropertyDefinitions(r)}}this.parseAssyGroup(s,t,r,a,!0,i,n,u)}}else if(c=this._smgXmlMap.get(l)){var p=_.loadXMLString(c),m=_.xmlToJson(p).DocumentSMG,d=m.Server,C=this.getServerFromType(d,"CLitServerModifiable")[0].CLitAssyRoot,g=new B;if(g.SetSmgXmlDocument(m),g.SetSmgXmlRelativePath(l),i){this._listSmgXmlRootNodes.push(g);for(var h=this.getServerFromType(d,"PropertyDefinitions"),V=0;V<h.length;V++){var f=h[V];this.parseMetaPropertyDefinitions(f)}}this.parseAssyGroup(C,t,r,a,!0,i,n,g)}},parseServerModifiable:function(e,t){var a=this._experienceBase.getManager("VCXContextManager").getRootNode(),o=this._experienceBase.getManager("VCXContextManager").getRootComponent(),i=e.CLitAssyRoot;void 0===i&&(i=e);var n=o.QueryInterface("W3AISGNodeHolder").getPathElement().clone(),s="";void 0!==i&&(x.memoryLog("VCXSmgXmlLoader Build Actors",!0),s="",this.parseAssyGroup(i,s,a,n,!0,!0,o),x.memoryLog("VCXSmgXmlLoader Build Actors",!1),x.memoryLog("VCXSmgXmlLoader Fill neutrals and tracks",!0),s="",this.parseAssyGroup(i,s,a,n,!0,!1,o),x.memoryLog("VCXSmgXmlLoader Fill neutrals and tracks",!1));var l=e.CLitVectorImageBOM;if(void 0!==l){n=new r;this._vcxBom=this.parseAnnotations("CLitVectorImageBOM",l,"",n,!0),this.parseAnnotations("CLitVectorImageBOM",l,"",n,!1)}var u=e.CLitBOMInfo;if(void 0!==u){n=null;var c="CLitBOMInfoId";this._vcxBomInfo=this.parseAnnotations("CLitBOMInfo",u,c,n,!0),this.parseAnnotations("CLitBOMInfo",u,c,n,!1)}var p=e.CLitActorGround;if(void 0!==p){n=new r;this._vcxGround=this.parseAnnotations("CLitActorGround",p,"",n,!0),this.parseAnnotations("CLitActorGround",p,"",n,!1)}if(void 0!==(d=e.CLitViewport)){n=new r;this._vcxViewport=this.parseAnnotations("CLitViewport",d,"",n,!0),this.parseAnnotations("CLitViewport",d,"",n,!1)}if(void 0!==d&&d.CLitNavigator&&void 0!==d.CLitNavigator){n=new r;var m="VCX_Compass";this._vcxCompass=this.parseAnnotations("CLitActorCompass",d.CLitNavigator,m,n,!0),this.parseAnnotations("CLitActorCompass",d.CLitNavigator,m,n,!1)}var d,C=void 0!==d?d.CLitDigger:void 0;if(void 0!==C&&C.Tracks&&C.Tracks.Track){n=new r;var g="VCX_Digger";this._vcxDigger=this.parseAnnotations("CLitDigger",C,g,n,!0),this.parseAnnotations("CLitDigger",C,g,n,!1)}for(var h=this.getNodes(e.CLitCameraActor),V=0;V<h.length;V++){n=new r;this._vcxCamera||(this._vcxCamera=this.parseAnnotations("CLitCameraActor",h[V],"",n,!0)),this.parseAnnotations("CLitCameraActor",h[V],"",n,!1),this._experienceBase.getManager("VCXContextManager").setActiveCamera(this._vcxCamera)}if(void 0!==(d=e.CLitViewport)){if(!this._vcxCamera){var f=d.CLitNavigator;void 0!==f&&this.parseNavigator(f)}var y=!1,S=d.CLitView;this.parseViewVisibility(t,S,y),void 0!==d.CLitNavigator&&this.parseViewVisibility(t,d.CLitNavigator.Neutral,y),this.parseViewVisibility(t,d.CLitDigger,y);for(var v=this._experienceBase.ComponentsMap.GetComponentFromType("VCXComponentCompositePmi"),b=0;b<v.length;b++){var A=v[b];if(A._isSWPMI)for(var P=parseInt(d.Neutral["Navigator.Camera.Vertical"]["@attributes"].Value),X=this.getMatrixToAdjustVerticalforSWPMI(P),M=A.QueryInterface("VCXIModelNavigable"),I=M&&M.getChildren(),w=0;w<I.length;w++){var L=I[w];if(L){var D=L.GetObject();if(D&&"VCXLabel_Spec"===D.GetType()){var T=D.QueryInterface("W3AISGNodeHolder");if(T){var _=T.getSGNode(),F=_.getMatrix();F.multiply(X),_.setMatrix(F)}}}}}}var B=this.getNodes(e.CLitSelectionHotSpot);this.parseHotSpots(B);for(var G=0;G<this._listSmgXmlRootNodes.length;G++){var N=this._listSmgXmlRootNodes[G];if(N){var E=N.GetSmgXmlServerModifNode(),O=this.getNodes(E.CLitSelectionHotSpot);O.length>0&&(this._experienceBase.getManager("VCXContextManager").setContextFromName("SmgXmlRoot",N),this.parseHotSpots(O),this._experienceBase.getManager("VCXContextManager").setContextFromName("SmgXmlRoot"))}}},parseHotSpots:function(e){console.log("PARSE HOTSPOTS");for(var t=0;t<e.length;t++){e[t].CLitSelectionHotSpot?this.createGroupHotspot(e[t]):this.createHotspot(e[t])}},createGroupHotspot:function(e){var t=e["@attributes"],r=t.Ident,a=this._experienceBase.Factory.BuildComponent("VCXComponentGroupHotspot");a.SetID(r),this._experienceBase.ComponentsMap.AddComponent(a);var o=e.CLitSelectionHotSpot;if(o){for(var i=[],n=0;n<o.length;n++){var s=o[n],l=this.createHotspot(s);l.GroupID=r,i.push(l.GetID())}var u=t.Name;a.SetName(u),a.SetArrayActors(i);var c=a.QueryInterface("VCXIModifiable"),p=new M(this._experienceBase);p.CaptureNeutralProperties(c),this._experienceBase.getManager("VCXCommandManager").Do(p)}},createHotspot:function(e){var t=e["@attributes"],r=t.Ident;this.parseAnnotations("CLitSelectionHotSpot",e,"",null,!0);var a=this._experienceBase.ComponentsMap.GetComponentFromID(r);if(a){var o=e.Actors;if(o){var i=o["#text"];if(i){var n=this.concatArray(i).split("#");n.pop();var s=n.indexOf("-1");-1!==s&&(n[s]="VCX_RootSMG")}}var l=t.Name;a.SetName(l),a.SetArrayActors(n);var u=a.QueryInterface("VCXIModifiable"),c=new M(this._experienceBase);c.CaptureNeutralProperties(u),this._experienceBase.getManager("VCXCommandManager").Do(c)}return this.parseAnnotations("CLitSelectionHotSpot",e,"",null,!1),a},parseAssyGroup:function(e,t,r,a,i,n,s,l){var u=e["@attributes"];i||(t=""===t?u.Ident:t+"."+u.Ident);var c=null,p=null;if(n)if(i&&l)c=r,p=s;else{this._statNb3DNodes++,(c=new o(u.Ident)).productType="Instance3D",r.add(c),a.addElement(c);var d=t;""===t&&(d="VCX_RootSMG"),(p=this._modifiableFactory.create(this._experienceBase,"CLitAssyGroup",d,a,s))&&""===t&&p.SetPersistency(1),p&&p.SetGUID(u.Ident),l&&l.AddComponent(p)}else{var C=t;if(""===C&&(C="VCX_RootSMG"),p=this._experienceBase.ComponentsMap.GetComponentFromID(C)){var g=p.QueryInterface("VCXIModifiable");if(this.parseNeutrals(e,g,"CLitAssyGroup"),this.parseTracks(e,g,"CLitAssyGroup"),i&&g){var h=g.GetProperty("Actor.Name");if(h)if("-1"===h.GetPropertyValue().GetValue()){var V=new m;V.SetValue("Root"),g.OnChangeProperty("Actor.Name",V)}}}for(var f=this.getNodes(e.CLitCADView),y=0;y<f.length;y++)this.parseView(f[y])}for(var S in this._modifiableFactory.getV1Ids()){var v=this.getNodes(e[S]);if(v.length)switch(S){case"CLitAssyGroup":for(var b=0;b<v.length;b++)if(v[b]){var A=v[b]["@attributes"],P=A.IsInstanceOf;if(P){var X="";X=""===t?A.Ident:t+"."+A.Ident,this.createNodeForRefrencedXMLGrp(P,v[b],X,c,a.clone(),n,p,l)}else this.parseAssyGroup(v[b],t,c,a.clone(),!1,n,p,l)}break;case"CLitActorMesh":case"CLitActor":case"CLitActorCurveWire":case"CLitActorPoint":case"CLitActorPrim":case"CLitActorCompositePmi":case"CLitRedline":for(var M=0;M<v.length;M++)v[M]&&this.parseActor(v[M],S,t,c,a.clone(),n,p,l);break;default:for(M=0;M<v.length;M++)v[M]&&this.parseAnnotations(S,v[M],t,a.clone(),n,l)}}if(n&&u&&("0"===u.NeutralVisibility&&this._vcxScenarioAnimationSmg&&!this._layerAnimation)){var I=this._vcxScenarioAnimationSmg.GetVisibility();I&&I.AddInvisible(p)}},getActorCompositePmiArray:function(e,t){var r=e[t];if(!r)return null;if(void 0===r.Data){if("points"===t){var a=[];for(var o in r){if("@attributes"!==o)(n=r[o]["@attributes"])&&(a.push(parseFloat(n.X)),a.push(parseFloat(n.Y)),a.push(parseFloat(n.Z)))}return a}var i=[];for(var o in r){var n;if("@attributes"!==o)(n=r[o]["@attributes"])&&i.push(parseFloat(n.Value))}return i}var s=r["@attributes"];if(!s)return null;var l=parseInt(s.size),u=r.Data["@attributes"];if(!u)return null;for(var c=atob(u.Value),p=new ArrayBuffer(c.length),m=0;m<c.length;m++)p[m]=c.charCodeAt(m);var d=new DataView(p);for(m=0;m<c.length;m++)d.setUint8(m,c.charCodeAt(m));var C=0;if("points"===t){for(a=new Float32Array(3*l),m=0;m<l;m++){var g=3*m;a[g]=d.getFloat32(4*C++,!0),a[g+1]=d.getFloat32(4*C++,!0),a[g+2]=d.getFloat32(4*C++,!0)}return a}var h=new Uint32Array(l);for(m=0;m<l;m++)h[m]=d.getUint32(4*C++,!0);return h},parseActorCompositePmiRepresentation:function(e,t="0"){this._statNb3DNodes++;var r=new o,n="1"===t?this.parseDrawPolylineSW(e):this.parseDrawPolyline(e);if(null!==n&&(r.add(n),n.productType="InstanceRep",n.setPickParent(!0)),"1"===t)for(var s=this.getNodes(e.CLitDrawExtremity),l=0;l<s.length;l++){var u=s[l];switch(parseInt(u.Neutral["ActorCurve.Extremity.Start"]["@attributes"].Value)){case 1:var c=parseFloat(u.Neutral["ActorCurve.Extremity.Size"]["@attributes"].Value),p=u.Neutral["Draw.Location"].Frame.Origin["@attributes"],m=u.Neutral["Draw.Location"].Frame.VX["@attributes"],d=u.Neutral["Draw.Location"].Frame.VY["@attributes"],C=new a.Vector3(parseFloat(m.X),parseFloat(m.Y),parseFloat(m.Z)),g=new a.Vector3(parseFloat(d.X),parseFloat(d.Y),parseFloat(d.Z)),h=new a.Vector3(parseFloat(p.X),parseFloat(p.Y),parseFloat(p.Z)),V=E.getMatrixFromOVxVy(h,C,g),f=.5*c,y=[];y[0]=-c,y[1]=-f,y[2]=0,y[3]=-c,y[4]=f,y[5]=0,y[6]=0,y[7]=0,y[8]=0;var S=[];S[0]=0,S[1]=0,S[2]=1,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=1;var v=D.allocIndexationArray(3,3);for(i=0;i<3;i++)v[i]=i;var b=null;this._materialManager&&(b=this._materialManager.getMaterialBasic(new a.Color(0,0,0),1));var A=D.buildIndexedTriangleSet(1,y,S,null,v,v,null,null,b,!1,!0);A.setMatrix(V),r.add(A);break;case 5:c=parseFloat(u.Neutral["ActorCurve.Extremity.Size"]["@attributes"].Value),p=u.Neutral["Draw.Location"].Frame.Origin["@attributes"],m=u.Neutral["Draw.Location"].Frame.VX["@attributes"],d=u.Neutral["Draw.Location"].Frame.VY["@attributes"],C=new a.Vector3(parseFloat(m.X),parseFloat(m.Y),parseFloat(m.Z)),g=new a.Vector3(parseFloat(d.X),parseFloat(d.Y),parseFloat(d.Z)),h=new a.Vector3(parseFloat(p.X),parseFloat(p.Y),parseFloat(p.Z)),V=E.getMatrixFromOVxVy(h,C,g),f=.5*c;var P=D.getPrimitiveMeshNode(4).clone();P.setMatrix(V),r.add(P)}}for(var X=this.getNodes(e.CLitDrawSurface),M=0;M<X.length;M++){for(var I=X[M],w=this.getActorCompositePmiArray(I,"points"),L=this.getActorCompositePmiArray(I,"triangles"),T=this.getActorCompositePmiArray(I,"indices"),x=this.getActorCompositePmiArray(I,"types"),_=new Float32Array(3*w.length),F=0;F<w.length;F++){var B=3*F;_[B]=0,_[B+1]=0,_[B+2]=1}var G=D.buildIndexation(w,L,x,T);G.length%3!=0&&console.log("Invalid indexation");var N=G.length/3;if(N){var O=null;this._materialManager&&(O=this._materialManager.getMaterialBasic(new a.Color(0,0,0),1));var W=D.buildIndexedTriangleSet(N,w,_,null,G,G,null,null,O,!1,!0),R=I.Neutral;if(R){(R["Draw.Billboard"]?R["Draw.Billboard"]["@attributes"].Value:0)&&(W._billboardData.type=1);var k=R["Draw.Location"]?R["Draw.Location"].Frame:0;if(k&&k.Origin){p=k.Origin["@attributes"],m=k.VX["@attributes"],d=k.VY["@attributes"],C=new a.Vector3(parseFloat(m.X),parseFloat(m.Y),parseFloat(m.Z)),g=new a.Vector3(parseFloat(d.X),parseFloat(d.Y),parseFloat(d.Z)),h=new a.Vector3(parseFloat(p.X),parseFloat(p.Y),parseFloat(p.Z));V=E.getMatrixFromOVxVy(h,C,g),W.setMatrix(V)}}r.add(W),W.setPickParent(!0),W.productType="InstanceRep"}}return r},parseDrawPolyline:function(e,t){var r=this.getNodes(e.CLitDrawPolyline);if(t){for(var a=new Uint32Array(r.length),o=[],i=0,s=0;s<r.length;s++){if(void 0!==(C=r[s])){var l=this.getActorCompositePmiArray(C,"points");if(null!==l){for(var u=new ArrayBuffer(4*l.length),c=new Float32Array(u),p=0;p<l.length;++p)c[p]=l[p];var m=new Uint8Array(u).toString();t=window.btoa(m);o.push(t)}}}return o}a=new Uint32Array(r.length);var d=[];for(i=0,s=0;s<r.length;s++){var C;if(void 0!==(C=r[s])){var g=this.getActorCompositePmiArray(C,"points");if(null!==g){for(var h=0;h<g.length;h++)d[i++]=g[h];a[s]=g.length/3}}}for(var V=d.length/3,f=D.allocIndexationArray(V,V),y=0;y<V;y++)f[y]=y;var S=new Float32Array(d.length);for(h=0;h<d.length;++h)S[h]=d[h];return D.buildLineStripSet(S,a,f,new n.Color(0,0,0,1),1,"WIRE_EDGE")},parseActor:function(e,t,r,i,s,l,u,c){var p=e["@attributes"];r=""===r?p.Ident:r+"."+p.Ident;var d=null,C=null;if(l){this._statNb3DNodes++,(C=new o(p.Ident)).productType="Instance3D",i.add(C),s.addElement(C),d=this._modifiableFactory.create(this._experienceBase,t,r,s,u),this._v1ComponentType[r]=t,d||console.error("Failed to build VCX component"),d.SetGUID(p.Ident),c&&c.AddComponent(d);var g=null,h=null;if(p.IdentGeom)(R=this._mapGeodes.get(p.IdentGeom))&&(g=R.geode,h=R.userdata);switch(t){case"CLitActorMesh":case"CLitActor":case"CLitActorCurveWire":g||(C.name=p.Ident+" IdentGeom:"+p.IdentGeom+" not found"),h&&6===h.ucGeometryType&&this._allPmisConstructionGeometries.push(d.GetID());break;case"CLitActorPoint":C.name="VCXPoint",(g=D.buildPoint([0,0,0],new n.Color(1,0,0,1),5,null)).setNoZ(!0);break;case"CLitActorPrim":C.name="VCXPrimitive";break;case"CLitRedline":this.generateAnchorsIdsArray(e),C.name="VCXRedline";for(var V=this.parseDrawPolyline(e,!0),f=(O=d?d.QueryInterface("VCXIModifiable"):null)?O.GetPropertyValue("Collab.VertexBuffers"):[],S=0;S<V.length;++S){var v=new y;v.SetValue(V[S]),f.SetValueAtIndex(S,v)}O.OnChangeProperty("Collab.VertexBuffers",f);break;case"CLitActorCompositePmi":if(C.name="VCXFTA",C.setNoZ(!0),g){g.setMaterial(new a.MeshBasicMaterial({color:"#FFFFFF",side:a.DoubleSide,force:!0,opacity:0})),g.setPickParent(!0);var b=s.clone();b.addElement(g),C.add(g);var A=this._experienceBase.getManager("VCXContextManager").getSharedSceneGraphOverride(b,!0);A&&A.setOpacity(0,!0)}var P=e.Neutral;if(P){var X="0";if(P["ActorCompositePmi.IsFromSW"]&&(X=P["ActorCompositePmi.IsFromSW"]["@attributes"].Value),"1"===X){d._isSWPMI=!0;for(var M=this.getNodes(e.CLitDrawText),I=0;I<M.length;I++){var w=M[I],L=[];L.push(0),w.Neutral.ArrayAnchorsIds=L;var T=e["@attributes"];if(l&&T)if("0"===T.NeutralVisibility&&this._vcxScenarioAnimationSmg&&!this._layerAnimation){var x=this._vcxScenarioAnimationSmg.GetVisibility();x&&x.AddInvisible(d)}}}}if(N=this.parseActorCompositePmiRepresentation(e,X)){C.add(N),N.setPickParent(!0);var _=[];_[0]=N;var F=e.MirroringRepresentations;if(F)for(var B=this.getNodes(F.MirroringRepresentation),G=0;G<B.length;G++){var N;(N=this.parseActorCompositePmiRepresentation(B[G]))&&(C.add(N),N.setPickParent(!0),N.setVisibility(!1),_[G+1]=N)}d&&(d._representations=_,this._allPMIs.push(d.GetID()))}}g&&(g.productType="InstanceRep",C.add(g))}else{var O;if((O=(d=this._experienceBase.ComponentsMap.GetComponentFromID(r))?d.QueryInterface("VCXIModifiable"):null)&&(this.parseNeutrals(e,O,t),this.parseTracks(e,O,t),null===O._name)){var W=new m,R=null;p.IdentGeom&&(R=this._mapGeodes.get(p.IdentGeom));var k=R?R.name:"";W.SetValue(k),O.OnChangeProperty("Actor.Name",W)}}for(var t in this._modifiableFactory.getV1Ids()){var U=this.getNodes(e[t]);if(U.length)switch(t){case"CLitAssyGroup":for(var H=0;H<U.length;H++)this.parseAssyGroup(U[H],r,C,s.clone(),!1,l,d);break;case"CLitActorMesh":case"CLitActor":case"CLitActorCurveWire":case"CLitActorPoint":case"CLitActorPrim":case"CLitActorCompositePmi":case"CLitRedline":for(var j=0;j<U.length;j++)this.parseActor(U[j],t,r,C,s.clone(),l,d);break;case"CLitDrawText":for(j=0;j<U.length;j++){var Y=U[j],z=this.parseAnnotations(t,Y,r,s.clone(),l);if(z){var Q=Y.Neutral["Draw.Location"].Frame.Origin["@attributes"],K=Y.Neutral["Draw.Location"].Frame.VX["@attributes"],q=Y.Neutral["Draw.Location"].Frame.VY["@attributes"],Z=new a.Vector3(parseFloat(K.X),parseFloat(K.Y),parseFloat(K.Z)),J=new a.Vector3(parseFloat(q.X),parseFloat(q.Y),parseFloat(q.Z)),$=new a.Vector3(parseFloat(Q.X),parseFloat(Q.Y),parseFloat(Q.Z)),ee=E.getMatrixFromOVxVy($,Z,J),te=d.QueryInterface("VCXIModelNavigable"),re=z.QueryInterface("VCXIModelNavigable");re&&te&&re.setParent(te);var ae=z.QueryInterface("W3AISGNodeHolder");if(ae){var oe=ae.getSGNode();oe.setMatrix(ee),oe&&(oe.setVisibility(!0),oe.setVisibilityInTree(!0),C.add(oe))}this._experienceBase.getManager("VCXDressupManager")._removeDressup(z)}if(!z){var ie=r;if((p=Y["@attributes"])&&(ie=ie+"."+p.Ident),z=this._experienceBase.ComponentsMap.GetComponentFromID(ie)){var ne=z.QueryInterface("VCXIModifiable"),se=this._experienceBase.getManager("VCXScenarioManager").GetNeutrals(ne.GetHashing());if(se){var le=se._map["Collab.Text.Font"]._propertyValue._value[1];le._value*=-1.769,se._map["Collab.Text.Font"]._propertyValue._value[1]=le}}}}break;default:for(j=0;j<U.length;j++)this.parseAnnotations(t,U[j],r,s.clone(),l)}}},parseDrawPolylineSW:function(e,t){var r=this.getNodes(e.CLitDrawPolyline);if(t){new Uint32Array(r.length);for(var i=[],s=0,l=0;l<r.length;l++){if(void 0!==(g=r[l])){var u=this.getActorCompositePmiArray(g,"points");if(null!==u){for(var c=new ArrayBuffer(4*u.length),p=new Float32Array(c),m=0;m<u.length;++m)p[m]=u[m];var d=new Uint8Array(c).toString();t=window.btoa(d);i.push(t)}}}return i}var C=new o;for(l=0;l<r.length;l++){var g;if(void 0!==(g=r[l])){var h,V=[],f=(s=0,this.getActorCompositePmiArray(g,"points"));if(null!==f){var y=this.getActorCompositePmiArray(g,"indices");if(null!==y){for(var S=0;S<f.length;S++)V[s++]=f[S];var v=new Float32Array(V.length);for(S=0;S<V.length;++S)v[S]=V[S];for(var b=V.length/3,A=D.allocIndexationArray(b,b),P=0;P<b;P++)A[P]=P;h=D.buildLineStripSet(v,y,A,new n.Color(0,0,0,1),1,"WIRE_EDGE");var X=g.Neutral["Draw.Location"]?g.Neutral["Draw.Location"].Frame:0;if(X&&X.Origin){var M,I=g.Neutral["Draw.Location"].Frame.Origin["@attributes"],w=g.Neutral["Draw.Location"].Frame.VX["@attributes"],L=g.Neutral["Draw.Location"].Frame.VY?g.Neutral["Draw.Location"].Frame.VY["@attributes"]:0,T=new a.Vector3(parseFloat(w.X),parseFloat(w.Y),parseFloat(w.Z)),x=new a.Vector3(parseFloat(I.X),parseFloat(I.Y),parseFloat(I.Z));if(L){var _=new a.Vector3(parseFloat(L.X),parseFloat(L.Y),parseFloat(L.Z));M=E.getMatrixFromOVxVy(x,T,_)}var F=g.Neutral["Draw.Location"].Frame.VZ?g.Neutral["Draw.Location"].Frame.VZ["@attributes"]:0;if(F){var B=new a.Vector3(parseFloat(F.X),parseFloat(F.Y),parseFloat(F.Z));M=E.getMatrixFromOVxVz(x,T,B)}h.setMatrix(M)}C.add(h)}}}}return C},getMatrixToAdjustVerticalforSWPMI:function(e){var t=new a.Vector3(1,0,0),r=new a.Vector3(0,1,0),o=new a.Vector3(0,0,1);switch(e){case 0:t.set(0,1,0),r.set(0,0,1),o.set(1,0,0);break;case 1:t.set(0,0,1),r.set(1,0,0),o.set(0,1,0);break;case 2:break;case 3:t.set(0,0,1),r.set(0,1,0),o.set(-1,0,0);break;case 4:t.set(1,0,0),r.set(0,0,1),o.set(0,-1,0);break;case 5:t.set(0,1,0),r.set(1,0,0),o.set(0,0,-1)}var i=new a.Matrix4;return i.makeBasis(t,r,o),i},parseAnnotations:function(e,t,r,a,o,i){var n=t["@attributes"];if(""===r?r=n.Ident:n&&(r=r+"."+n.Ident),o){var s=this._modifiableFactory.create(this._experienceBase,e,r,void 0);return this._v1ComponentType[r]=e,s&&n&&s.SetGUID(n.Ident),i&&i.AddComponent(s),s}var l=(s=this._experienceBase.ComponentsMap.GetComponentFromID(r))?s.QueryInterface("VCXIModifiable"):null;if(l){var u=null;if(t.ListActors&&(u=this.parseActorList(t.ListActors)),(t.Dynamic||t.ListIdAnchor||t.Neutral&&t.Neutral["Actor.Location"]&&!s.IsKindOf("VCXComponentGround")&&!s.IsKindOf("VCXSection_Spec"))&&this.generateAnchorsIdsArray(t),this.parseNeutrals(t,l,e,u),this.parseTracks(t,l,e),void 0!==t.CLitDigZoom){var c=t.CLitDigZoom;l.loadParentMode="DigZoom",this.parseNeutrals(c,l,e),this.parseTracks(c,l,e)}if(void 0!==t.CLitDigXRay){c=t.CLitDigXRay;l.loadParentMode="DigOnionSkin",this.parseNeutrals(c,l,e),this.parseTracks(c,l,e)}if(void 0!==t.CLitDigOnionSkin){c=t.CLitDigXRay;l.loadParentMode="DigXRay",this.parseNeutrals(c,l,e),this.parseTracks(c,l,e)}}},checkForLabelAndCallout:function(e,t){var r,a=e["@attributes"];if(a){var o=a.NetGuid,i=a.Ident;o?r=a.NetGuid:i&&(r=a.Ident)}var n=this._v1ComponentType[r];return("CLitTextMultiplePoints"===n||"CLitCalloutMP"===n)&&parseInt(t)>1002},generateAnchorsIdsArray:function(e){var t=[];if(e.ListIdAnchor&&e.ListIdAnchor.AnchorId)for(var r=e.ListIdAnchor.AnchorId,a=0;a<r.length;++a){var o=e.ListIdAnchor.AnchorId[a]["@attributes"].Id;t.push(parseInt(o))}else if(e.Dynamic&&e.Dynamic.Anchor&&e.Dynamic.Anchor["#text"]){var i=e.Neutral,n=e.Dynamic.Anchor["#text"].split("#");for(a=0;a<n.length;++a){0!==(o=n[a]).length&&i&&i["Anchor."+o]&&(parseInt(o)<1e3||this.checkForLabelAndCallout(e,o))&&t.push(parseInt(o))}}else e.Neutral["Actor.Location"]&&t.push("Location");e.Neutral.ArrayAnchorsIds=t;var s=[];if(e.Dynamic&&e.Dynamic.Anchor2D&&e.Dynamic.Anchor2D["#text"]){for(i=e.Neutral,n=e.Dynamic.Anchor2D["#text"].split("#"),a=0;a<n.length;++a){0!==(o=n[a]).length&&i&&i["Anchor."+o]&&(parseInt(o)<1e3||this.checkForLabelAndCallout(e,o))&&s.push(parseInt(o))}e.Neutral.Array2DAnchorsIds=s}},createCamera:function(){var e="CameraActorId",t=this._modifiableFactory.create(this._experienceBase,"CLitCameraActor",e,void 0);if(this._v1ComponentType[e]="CLitCameraActor",null!==t)return t},parseNavigator:function(e){this._vcxCamera=this.createCamera(),this._experienceBase.getManager("VCXContextManager").setActiveCamera(this._vcxCamera);var t=this._vcxCamera.QueryInterface("VCXIModifiable");this.parseNeutrals(e,t,"CLitNavigator"),this.parseTracks(e,t,"CLitNavigator")},parseNeutrals:function(e,t,r,a){var o=e.Neutral;if(void 0!==o){var i;i=Array.isArray(o)&&o.length>0?o[0]:o;var n=this._experienceBase.getManager("VCXScenarioManager"),s=n.GetNeutrals(t.GetHashing());s||(s=new l);e.Dynamic;if(i.ArrayAnchorsIds){var p=new f(i.ArrayAnchorsIds),m=new g("Collab.ListAnchorsIDs",0);s.AddOrModifyProperty(new u(m,p))}if(i.Array2DAnchorsIds){p=new f(i.Array2DAnchorsIds),m=new g("Collab.List2DAnchorsIDs",0);s.AddOrModifyProperty(new u(m,p))}if(this._modifiableFactory.createPropertiesMap(t,this._experienceBase,i,this._resources,r).forEach(((e,t)=>{var r=t,a=e,o=!0,i=this._experienceBase.getManager("VCXContextManager").getContextFromName("OpenSMGXML");if(s.GetProperty(r)&&i&&(o=!1),o){var n=new g(r,0);s.AddOrModifyProperty(new u(n,a))}})),a){m=new g("Actor.ListActors",2);s.AddOrModifyProperty(new u(m,a))}var d=t.GetObject();if(d.IsKindOf("VCXDigger_Spec")){var h=new c;h.SetValue(0);m=new g("Actor.Opacity",0);s.AddOrModifyProperty(new u(m,h))}else if(d.IsKindOf("VCXViewport_Spec")){var V=new C;V.SetValue(!0);m=new g("Environment.BackFaceCulling",1);s.AddOrModifyProperty(new u(m,V))}n.AddNeutrals(t,s)}},parseTracks:function(e,t,r){var a=e.Tracks;if(void 0!==a)for(var o=this.getNodes(a.Track),i=0;i<o.length;i++)o[i]&&this.parseKeys(e,t,this.getNodes(o[i].Key),r)},parseKeys:function(e,t,r,a){if(0!==r.length){var o=new X(this._experienceBase);o.SetLockEvents(!0),o.SetLockUpdateProperties(!0),o.SetCloneValues(!1);for(var i=this._experienceBase.getManager("VCXScenarioManager").GetScenarios()[this._experienceBase.getManager("VCXScenarioManager").GetCurrentScenario()],n=0;n<r.length;n++){if(!this._smgSceFileParsing&&e.Neutral.ArrayAnchorsIds)for(var s=e.Neutral.ArrayAnchorsIds,l=Object.keys(r[n]),u=0;u<l.length;++u){var p=l[u];if(p.startsWith("Anchor.")){var m=p.replace("Anchor.","");s.includes(m)}}this.parseKey(e,t,r[n],o,i,a)}if(t.GetObject().IsKindOf("VCXDigger_Spec")){var d=new c;d.SetValue(0);var C=d,g=o._keysForDo.length;for(n=0;n<g;n++){var h=o._keysForDo[n];if("Actor.Opacity"===h.propertyName){if(null!==C){var V=h.frame-1;V>=0&&o.ChangeKey(i,t,h.propertyName,V,C)}C=h.value}}}this._experienceBase.getManager("VCXCommandManager").Do(o)}},parseKey:function(e,t,r,a,o,i){var n=r["@attributes"].Time;this._modifiableFactory.createPropertiesMap(t,this._experienceBase,r,this._resources,i).forEach((function(e,r){var i=e;if(void 0!==i){var s=r,l=parseFloat(n);a.ChangeKey(o,t,s,l,i)}}))},LoadScenarioAndViewFiles:async function(e,t,r,a){if(e&&t)await new Promise((async o=>{if("Legacy"===r){var i=new FileReader;i.onload=async e=>{var r=_.loadXMLString(e.target.result),i=_.xmlToJson(r);this.SetSMGViewFile(i),await new Promise((e=>{var r=new FileReader;r.onload=async t=>{var r=_.loadXMLString(t.target.result),o=_.xmlToJson(r);this.SetSMGSceFile(o),await a(),e()},r.readAsText(t)})),o()},i.readAsText(e)}else{let r;var n=async(e,t)=>{this.VCXSmgXmlSaxReaderFullyShattered=new F,r=await this.VCXSmgXmlSaxReaderFullyShattered.SmgXml_Sax_Parser(!1,e,!1,!1);let a=r.Server;r.Server={},t?(r.ViewsSMG.Server={},r.ViewsSMG.Server=a,await this.SetSMGViewFile(r)):(r.ScenarioSMG.Server={},r.ScenarioSMG.Server=a,await this.SetSMGSceFile(r)),r={},a={}};await n(t,0),await n(e,1),await a(),o()}}));else if(e||t){var o=null;let i;e?(o=e,i=1):t&&(o=t,i=0),await new Promise((async n=>{if("Legacy"===r){var s=new FileReader;s.onload=async r=>{var o=_.loadXMLString(r.target.result),i=_.xmlToJson(o);e?this.SetSMGViewFile(i):t&&this.SetSMGSceFile(i),await a(),n()},s.readAsText(o)}else{let e;await(async(t,r)=>{this.VCXSmgXmlSaxReaderFullyShattered=new F,e=await this.VCXSmgXmlSaxReaderFullyShattered.SmgXml_Sax_Parser(!1,t,!1,!1);let a=e.Server;e.Server={},r?(e.ViewsSMG.Server={},e.ViewsSMG.Server=a,await this.SetSMGViewFile(e)):(e.ScenarioSMG.Server={},e.ScenarioSMG.Server=a,await this.SetSMGSceFile(e)),a={}})(o,i),await a(),n()}}))}else await a()},Load:async function(e,t,r,a,o,i,n,s,l,u,c){await this.LoadScenarioAndViewFiles(n,s,u,(async()=>{var t,n,s;if(this._mapGeodes=i,this._resources=l,this._experienceBase=e,this._materialManager=e?e.getManager("VCXMaterialManager"):null,"Legacy"===u){a.has(this._smgXmlMasterFile)&&(t=a.get(this._smgXmlMasterFile)),this.SetSMGXMLs(a),n=o?this.loadXMLDoc(window.URL.createObjectURL(t)):_.loadXMLString(t);let e=_.xmlToJson(n);n=null,x.memoryLog("VCXSmgXmlLoader parseDocumentSMGXML",!0),await this.parseDocumentSMGXML(e.DocumentSMG)}else{let e=(s=r).Server;s.Server={},s.DocumentSMG.Server={},s.DocumentSMG.Server=e,e=null,x.memoryLog("VCXSmgXmlLoader parseDocumentSMGXML",!0),await this.parseDocumentSMGXML(s.DocumentSMG)}x.memoryLog("VCXSmgXmlLoader parseDocumentSMGXML",!1),this._mapGeodes=null,this._resources=null,this._experienceBase=null,this._materialManager=null,this._modifiableFactory.clear(),this._modifiableFactory=null,await c()}))}});return O.ViewType={Views:"1",Layers:"2",CadViews:"3",CadCaptures:"4"},O.ViewCompressionV1={VisibleActors:"0",HiddenActors:"1",VisibleAssemblies:"2",HiddenAssemblies:"3"},O.unitsTranslation={Length:{0:"Micrometers",1:"Millimeters",2:"Centimeters",3:"Decimeters",4:"Meters",5:"Inches",6:"Feet",7:"Yards",8:"Kilometers"},Area:{0:"SquareMicrometers",1:"SquareMillimeters",2:"SquareCentimeters",3:"SquareDecimeters",4:"SquareMeters",5:"SquareInches",6:"SquareFeet",7:"SquareYards"},Volume:{0:"CubicMicrometers",1:"CubicMillimeters",2:"CubicCentimeters",3:"CubicDecimeters",4:"CubicMeters",5:"CubicInches",6:"CubicFeet",7:"CubicYards"},Angle:{0:"Degrees",1:"Radians",2:"Grades"}},O})),define("DS/VCXWebInteropSMG/VCXSmgXmlSaxReader",["UWA/Class","DS/VCXWebInteropSMG/VCXSmgXmlLoader","DS/VCXWebIO/VCXLogServices","DS/VCXWebInteropSMG/SaxParser"],(function(e,t,r,a){"use strict";return e.extend({init:function(){this.sax_object=new Object,this.SaxObject=new a(this.sax_object),this.parser=this.sax_object.parser(!0,{lowercase:!0})},LoadSmgXml:function(e,a,o,i,n){(new t).Load(e.expBase,e.viewer,a,"",!1,i,e.blobViewFile,e.blobSceFile,e.resources,"SaxParser",(function(){let t=r.memoryLog("LoadSmgXml",!1);console.log("[PERFO] "+t.logName+" "+t.time),console.log("[PERFO] Heap "+t.heap),e.expBase.getManager("VCXExperience").OnEndLoading(!1),e.viewer.render({updateInfinitePlane:!0}),n()}))},SmgXml_Sax_Parser:function(e,t,r,a,o){var i=this;let n,s,l,u,c={},p=[],m={},d=-1,C=-1,g=0,h=0,V=0,f=0,y=!1,S=!1,v=!1,b=!1,A=!1,P=!1,X=!1,M=null,I=null,w=null,L=0,D=!1,T=!1,x=function(e){p.push(I),I=I[n],I[e]={}},_=function(e){let t=I[e.name];l=s+h,u=h,g=0,I[e.name]=[],I[e.name][g]={},I[e.name][g]=t,t=null,g++},F=function(e){u=h,g=Object.keys(I[e]).length,I[e][g]={}},B=function(e,t){t&&(I[e.name]={}),0!==Object.keys(e.attributes).length&&G(I[e.name],e.attributes)},G=function(e,t){e["@attributes"]={},e["@attributes"]=t},N=function(e,t){e["@attributes"]={},e["@attributes"].Type=t},E=function(e){h++,S=!0,y=!1,n=e},O=function(e){h-V==1||V===h?B(e,1):h-V>1&&(x(e.name),B(e,0),V=h)},W=function(e){I[e.name]["@attributes"]?_(e):I[e.name][0]?F(e.name):X&&function(e){I[e.name].Key?_(e):F(e.name)}(e)},R=function(e,t){0===Object.keys(I).length?I[e.name]={}:t&&u==h-1?(p.push(I),I[n]&&(I=I[n][g]?I[n][g]:I[n]),I[e.name]={}):x(e.name),B(e,0),V=h},k=function(e){u==h&&I[e.name]?(I[e.name][g]={},0!==Object.keys(e.attributes).length&&G(I[e.name][g],e.attributes)):B(e,1)},U=function(e){b=!1,A=!1,D=!1,h=0,u=0,g=0,f=0,w=e.attributes.Type,"CLitServerModifiable"===e.attributes.Type&&(A=!0,h=1,I=null,p=[]),v?(c.Server[d].History[e.name]={},N(c.Server[d].History[e.name],e.attributes.Type)):(d++,c.Server[d]={},N(c.Server[d],e.attributes.Type))},H=function(e){"Tracks"==e&&(X=!0),"Configuration"===e&&(P=!0),"CLitModifiable"===e&&P&&C++},j=function(e){"CLitSelectionHotSpot"===e.name&&(T=!0),H(e.name),1==h?function(e){c.Server[d][e.name]&&"CLitSelectionHotSpot"===e.name?(I=c.Server[d],W(e),c.Server[d][e.name][g]={},0!==Object.keys(e.attributes).length&&G(c.Server[d][e.name][g],e.attributes),I=c.Server[d][e.name][g],p.push(I),T=!1):(c.Server[d][e.name]={},0!==Object.keys(e.attributes).length&&G(c.Server[d][e.name],e.attributes),I=c.Server[d],p.push(I),l="*",u=!1,g=0,m={})}(e):T?function(e){y?V===h?(W(e),k(e)):O(e):R(e,0),T=!1}(e):(I[e.name]?W(e):2==h&&"CLitSelectionHotSpot"!==n&&(u=!1),u?y?V===h?k(e):O(e):R(e,1):y?O(e):R(e,0)),E(e.name)},Y=function(e){H(e.name),1==h?function(e){let t=c.Server[d].CLitView[f-1];t[e.name]={},0!==Object.keys(e.attributes).length&&G(t,e.attributes),I=c.Server[d].CLitView[f-1][e.name],t=null,V=h,p.push(I)}(e):y?(V===h&&C>0&&"CLitModifiable"==e.name&&function(e){let t=I[e];1==C&&(m[e]=[],m[e][C-1]=[]),m[e][C-1]=t,t=null}(e.name),O(e)):R(e,0),E(e.name)},z=function(e){"Meta"===e.name?(c.Server[d].MetaProperties.Meta[f]={},G(c.Server[d].MetaProperties.Meta[f],e.attributes),f++):"CLitMarker"===e.name?function(e){if(c.Server[d].Markers[e.name])if(c.Server[d].Markers[e.name][0])c.Server[d].Markers[e.name][L]={},G(c.Server[d].Markers[e.name][L],e.attributes),L++;else{let t=c.Server[d].Markers[e.name];c.Server[d].Markers[e.name]=[],c.Server[d].Markers[e.name][L]={},c.Server[d].Markers[e.name][L]=t,L++,c.Server[d].Markers[e.name][L]={},G(c.Server[d].Markers[e.name][L],e.attributes),L++}else c.Server[d].Markers[e.name]={},G(c.Server[d].Markers[e.name],e.attributes)}(e):0===Object.keys(e.attributes).length?"MetaProperties"==e.name?(c.Server[d][e.name]={},c.Server[d][e.name].Meta=[]):"Markers"===e.name&&(c.Server[d][e.name]={}):(c.Server[d][e.name]={},G(c.Server[d][e.name],e.attributes))},Q=function(e,t){t?(v=!0,c.Server[d][e.name]={},G(c.Server[d][e.name],e.attributes)):"CLitVersionHistory"==e.name?(0==f&&(c.Server[d].History.Server[e.name]=[]),c.Server[d].History.Server.CLitVersionHistory[f]={},f++):(c.Server[d].History.Server.CLitVersionHistory[f-1][e.name]={},G(c.Server[d].History.Server.CLitVersionHistory[f-1][e.name],e.attributes))},K=function(e){b=!0,h=1,0==f&&(c.Server[d][e.name]=[]),function(e){c.Server[d][e.name][f]={},G(c.Server[d][e.name][f],e.attributes)}(e),f++,P=!1,C=-1};{const q=t[0].size/5;let Z=0,J=new FileReader;function $(){const e=t[0].slice(Z,Z+q);J.readAsText(e)}i.parser.onopentag=async e=>{"DocumentSMG"===e.name?(c[e.name]={},G(c[e.name],e.attributes),c.Server=[],g=0):"Server"===e.name?await U(e):"History"===e.name?Q(e,1):v?Q(e,0):"ColumnTree"==e.name||"ColumnTree"==e.name.split(".")[0]?function(e){"ColumnTree"==e.name?(0==f&&(c.Server[d]["ColumnTreeList.ColumnList"]={},c.Server[d]["ColumnTreeList.ColumnList"][e.name]=[]),f++,c.Server[d]["ColumnTreeList.ColumnList"][e.name][f-1]={}):"ColumnTree"==e.name.split(".")[0]&&(c.Server[d]["ColumnTreeList.ColumnList"].ColumnTree[f-1][e.name]={},G(c.Server[d]["ColumnTreeList.ColumnList"].ColumnTree[f-1][e.name],e.attributes))}(e):A?await j(e):"CLitView"==e.name&&"CLitList"==w?K(e):b?await Y(e):"CLitSelection"==e.name&&"CLitList"==w||D?function(e){D=!0,0===h?c.Server[d][e.name]?(W(e),k(e),I=c.Server[d],p.push(I)):(c.Server[d][e.name]={},0!==Object.keys(e.attributes).length&&G(c.Server[d][e.name],e.attributes),I=c.Server[d],p.push(I)):y?V===h?(W(e),k(e)):O(e):R(e,0),E(e.name)}(e):z(e)},i.parser.ontext=e=>{!function(e){if(!e.startsWith("\n"))if(!b||"Living"!=n&&"Ghostly"!=n&&"Invisible"!=n){if(I&&I[n])if(I[n][0]){let t=Object.keys(I[n]).length-1;I[n][t]["#text"]=e}else I[n]["#text"]=e}else c.Server[d].CLitView[f-1][n]["#text"]=e}(e)},i.parser.onclosetag=e=>{S?(y=!0,S=!1):y&&p.length>1&&(I=p[p.length-1],p.pop(),V=h-1),w&&function(e){"Server"===e?(n="",f=0,v&&(v=!1),g=0,w=null):"History"==e?v=!1:b?(h--,"Configuration"===e&&C>0&&(m.CLitModifiable[C]={},m.CLitModifiable[C]=I.CLitModifiable,c.Server[d].CLitView[f-1][e]=m,m={})):A?("Tracks"==e&&(X=!1),u?l===e+(h-1)&&(u=!1):s=e,u>h-1&&(u=!1),h--):D&&h--}(e)},J.onload=async function(n){{const s=n.target.result;if(M="",i.parser.write(s),!(Z<t[0].size))return i.parser.close(),console.log("Finished processing XML."),p=[],i.LoadSmgXml(e,c,r,a,o),void(c={});Z+=q,$()}},$()}}})})),define("DS/VCXWebInteropSMG/VCXSmgLoader",["UWA/Class","DS/VCXWebIO/VCXFileServices","DS/VCXWebInteropSMG/VCXSmgGeomLoader","DS/VCXWebInteropSMG/VCXSmgXmlLoader","DS/VCXWebInteropSMG/VCXSmgLoaderTools","DS/VCXWebIO/VCXLogServices","DS/VCXWebKernel/VCXDRMManager","DS/VCXWebInteropSMG/VCXSmgXmlSaxReader","DS/VCXWebInteropSMG/VCXSmgXmlSaxReaderFullyShattered","i18n!DS/VCXWebInteropSMG/assets/nls/VCXWebInteropSMG"],(function(e,t,r,a,o,i,n,s,l,u){"use strict";return e.extend({init:function(){this._progressBar=null,this._experienceProgressCB=null,this._mapGeodes=new Map,this._smgXmlMasterFileName=null,this._smgXMLDataResources=null,this._geomSignaturesAwaited=0},hasExtension:function(e,t){return-1!==e.toLowerCase().indexOf(t,e.length-t.length)},sendErrorNotification:function(e,t,r){var a=u[r];e.getManager("VCXNotificationManager").addNotification({level:t,title:t,message:a})},LoadJsonForRightManager:async function(e,t){e?await new Promise((r=>{var a=new FileReader;a.onload=async()=>{var e=a.result,o=JSON.parse(e);await t(o),r(o)},a.readAsText(e)})):await t(null)},LoadSmgGeomOutlines:function(e,t,a,o,i,n){if(!a||0>=a.length)n(null);else for(var s=0,l=new Map,u=0;u<a.length;u++){var c=new FileReader;c.onload=function(t){s++,new r(e).LoadOutlines(new Uint8Array(t.target.result),l),s===a.length&&n(l)},c.readAsArrayBuffer(a[u])}},LoadMultipleSmgGeom:async function(e,t,a,o,i,s){if(a)for(var l=this,u=0,c=[],p=async(t,p)=>{u++;var m=new r(e);m.setResources(i),m.setOutlines(o),m.launchsmgXMLCB=l.SignatureCB,m.smgLoader=l,!1===m.Load(new Uint8Array(p))&&l.sendErrorNotification(e,"error","Notification.GeomLoadingFailed"),l._progressBar?l._progressBar.update("50%"):l._experienceProgressCB&&l._experienceProgressCB({loaded:50,total:100}),m&&m.ulHasSignature&&m.ulAgreementMode!==n.LitSignatureMode.LIT_SIGNATURE_NO_DISPLAY&&(m._pause=!0),c.push(m),m.getMapGeodes().forEach((function(e,t){l._mapGeodes.set(t,e)})),u===a.length&&await s(l,c)},m=0;m<a.length;m++)await new Promise((e=>{var t=new FileReader;t.onload=async t=>{await p(t.target.docID,t.target.result),e()},t.docID=a[m].name,t.readAsArrayBuffer(a[m])}));else s(null)},CheckIfSignatureAndRightsFromGeomFiles:function(e,t){for(var r=!0,a=e.getManager("VCXDRMManager"),i=0;i<t.length;i++){var n=t[i];if(!n){r=!1;break}for(var s=0!==o.decodeOptions(n.ulWatermark,n.nTriangles),l=[],u=0;u<n.strFileNameAssociate.length;u++)l.push(n.strFileNameAssociate.charCodeAt(u));var c=o.calcCRC(l),p=o.decodeOptions(n.ulHasExpirationDate,c),m=o.decodeOptions(n.ulStartDate,c),d=o.decodeOptions(n.ulEndDate,c),C=Date.now()/1e3,g=!0;0!==p&&(g=C<d&&C>m);o.decodeOptions(n.ulSignatureCRC,c);for(var h=n.strAgreement,V=n.strSignaturePicturePath,f=n.ulAgreementMode,y=(0!==n.ulHasSignature?"1":"2")+": "+V+" ["+h+"]-"+(f+1),S=[],v=0;v<y.length;v++)S.push(y.charCodeAt(v));o.calcCRC(S);!0;var b=0!=(32&o.decodeOptions(n.ulOptionsPro,n.nTriangles));if(a.SetDisplayWatermark(s),console.log("[DRM MANAGER] Display watermark ? : "+(s?"YES":"NO")),a.SetValidDate(g),console.log("[DRM MANAGER] Has expiration date ? : "+(0!==p?"YES ":"NO ")),0!==p){var A=new Date(1e3*m),P=new Date(1e3*d);console.log("[DRM MANAGER] Date is valid ? : "+(g?"YES ":"NO ")+"- Start : "+A.toUTCString()+" - End : "+P.toUTCString())}if(a.SetDisplayTree(b),console.log("[DRM MANAGER] Show tree allowed ? "+(b?"YES":"NO")),a.SetValidSignature(true),console.log("[DRM MANAGER] Valid signature ? : YES"),a.GetValidDate()||(this.sendErrorNotification(e,"warning","Notification.SmgExpiration"),r=!1),a.GetValidSignature()||(this.sendErrorNotification(e,"warning","Notification.SmgInvalidSignature"),r=!1),!r)break}return r},LoadSmgXml:async function(e,t){if(!this._smgXMLDataResources)return void t(null);var r=this._smgXMLDataResources.expBase,o=this._smgXMLDataResources.viewer,n=this._smgXMLDataResources.blobSmgXmls,u=this._smgXMLDataResources.blobViewFile,c=this._smgXMLDataResources.blobSceFile,p=this._smgXMLDataResources.resources;if(!n||!e)return void await t(null);if(!this.CheckIfSignatureAndRightsFromGeomFiles(r,e))return void await t(null);var m=this;i.memoryLog("LoadSmgXml",!0);var d=0,C=new Map,g=async function(e,s,l,g){if("SaxParser"===g){d=e.cbCount;for(let[t,r]of e.smgXmlFilesRead)C.set(t,r)}else d++,e=e.toLowerCase(),C.set(e,s);if(n.length===d){var h=new a;m._smgXmlMasterFileName=m._smgXmlMasterFileName.toLowerCase(),h.SetMasterFileName(m._smgXmlMasterFileName),"SaxParser"===g&&(await h.SetSMGXMLs(C),C=null),await new Promise((async e=>{await h.Load(r,o,l,C,!1,m._mapGeodes,u,c,p,g,(async()=>{var a=i.memoryLog("LoadSmgXml",!1);console.log("[PERFO] "+a.logName+" "+a.time),console.log("[PERFO] Heap "+a.heap);var n=r.getManager("VCXExperience");await n.OnEndLoading(!1),o.render({updateInfinitePlane:!0}),m._progressBar?m._progressBar.update("100%"):m._experienceProgressCB&&m._experienceProgressCB({loaded:100,total:100}),await t(),e()}))}))}};let h=!!localStorage&&localStorage.getItem("DS_COMPOSER_LEGACY_PARSER");if("true"!==h&&"1"!==h){let e,r=new Map;if(1===n.length){if(n[0].name===m._smgXmlMasterFileName){(new s).SmgXml_Sax_Parser(m._smgXMLDataResources,n,m._smgXmlMasterFileName.toLowerCase(),m._mapGeodes,t)}}else await async function(){let t;for(let a=0;a<n.length;a++)if(n[a].name===m._smgXmlMasterFileName){let t=new l;e=await t.SmgXml_Sax_Parser(m._smgXMLDataResources,n,m._smgXmlMasterFileName.toLowerCase(),m._mapGeodes),r.set(n[a].name.toLowerCase(),"")}else{let e=new l;t=await e.SmgXml_Sax_Parser(!1,n[a],!1,!1),r.set(n[a].name.toLowerCase(),t)}e.smgXmlFilesRead=r,r=null,await g(e,"",e.finaljson,"SaxParser"),e=null}()}else for(var V=0;V<n.length;V++)await new Promise((e=>{var t=new FileReader;t.onload=async t=>{await g(t.target.docID,t.target.result,"","Legacy"),e()},t.docID=n[V].name,t.readAsText(n[V])}))},SignatureCB:async function(e,t){var r=t._smgXMLDataResources.expBase,a=t._smgXMLDataResources.cbLoadEnd,o=t._smgXMLDataResources.listsmgGeomLoaders;if(e){if(!e._pause){t._geomSignaturesAwaited--,e.getMapGeodes().forEach((function(e,r){t._mapGeodes.set(r,e)})),0===t._geomSignaturesAwaited&&await new Promise((e=>{t.LoadSmgXml(o,(async()=>{await a(r)})),e(r)}))}}else t._progressBar?t._progressBar.off():t._experienceProgressCB&&t._experienceProgressCB({loaded:100,total:100}),a()},ValidateSignatureAndLoadXMLFiles:async function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a&&a._pause&&e._geomSignaturesAwaited++}0===e._geomSignaturesAwaited?await new Promise((r=>{e.LoadSmgXml(t,(async()=>{var t=e._smgXMLDataResources.expBase,a=e._smgXMLDataResources.cbLoadEnd;await a(t),r(t)}))})):e._smgXMLDataResources.listsmgGeomLoaders=t},LoadDataFiles:async function(e,t,r,a){var o=this,i=[],n=[],s=[],l=null,u=null,c=null,p=[],m=e.getManager("VCXContextManager");m&&(m.getContextFromName("OpenSMGXML")||(m.setContextFromName("OpenSMG"),o._smgXmlMasterFileName="product.smgxml")),r.forEach((function(e,t){var r=t.slice(t.lastIndexOf(".")+1);r=r.toLowerCase();var a=o._smgXmlMasterFileName.slice(0,o._smgXmlMasterFileName.lastIndexOf("."));a=a.toLowerCase();var d=t.slice(0,t.lastIndexOf("."));if("product.smggeom"===t||"smggeom"===r)n.push(e),p[t]=URL.createObjectURL(e);else if("smgoutlines"===r)s.push(e);else if(o.hasExtension(t,".json"))l=e;else if(o.hasExtension(t,".smgxml")||o.hasExtension(t,".xml"))m.getContextFromName("OpenSMGXML")||(e.name="product.smgxml"),i.push(e);else if(o.hasExtension(t,".smgview"))m.getContextFromName("OpenSMGXML")?d===a&&(u=e):u=e;else if(o.hasExtension(t,".smgsce"))m.getContextFromName("OpenSMGXML")?d===a&&(c=e):c=e;else if(m.getContextFromName("OpenSMGXML")){var C=t.slice(t.lastIndexOf("."));d=t.slice(t.lastIndexOf("/")+1,t.lastIndexOf("."));p[d+C]=URL.createObjectURL(e)}else p[t]=URL.createObjectURL(e)})),o._progressBar?o._progressBar.update("0%"):o._experienceProgressCB&&o._experienceProgressCB({loaded:0,total:100});var d={};d.expBase=e,d.viewer=t,d.blobSmgXmls=i,d.blobViewFile=u,d.blobSceFile=c,d.resources=p,d.cbLoadEnd=a,this._smgXMLDataResources=d,await o.LoadJsonForRightManager(l,(async r=>{var i=!0;if(r){var l=e.getManager("VCXDRMManager");l.SetDisplayTree("true"===r.RightManagement.ShowTree),l.SetDisplayWatermark("true"===r.DisplayWatermark),l.SetValidDate("true"===r.ExpirationOk),l.SetValidSignature("true"===r.ValidSignatureCRC),l.GetValidDate()||(o.sendErrorNotification(e,"warning","Notification.SmgExpiration"),i=!1),l.GetValidSignature()||(o.sendErrorNotification(e,"warning","Notification.SmgInvalidSignature"),i=!1)}i?await new Promise((a=>{o.LoadSmgGeomOutlines(e,t,s,p,r,(async r=>{n.length<=0&&o.sendErrorNotification(e,"warning","Notification.SmgGeomNotFound"),await o.LoadMultipleSmgGeom(e,t,n,r,p,o.ValidateSignatureAndLoadXMLFiles),a()}))})):a(e)}))},LoadFromArrayBuffer:async function(e,r,a,o){const i=await t.PExtractFromArchiveData(a);await this.LoadDataFiles(e,r,i,o)},Load:async function(e,t,r,a){var o=this;i.memoryLog("VCXSmgLoader",!0,!0),this._progressBar?this._progressBar.update("0%"):o._experienceProgressCB&&o._experienceProgressCB({loaded:0,total:100}),await new Promise((i=>{var n=new FileReader;n.onload=async r=>{await o.LoadFromArrayBuffer(e,t,r.target.result,a),i()},n.readAsArrayBuffer(r)}))}})})),define("DS/VCXWebInteropSMG/VCXSmgXMLExperienceLoader",["DS/VCXWebInteropSMG/VCXSmgLoader","DS/VCXWebIO/VCXFileServices","DS/VCXWebInteropSMG/VCXSmgLoaderTools"],(function(e,t,r){"use strict";return e.extend({init:function(){this._progressBar=null,this._experienceProgressCB=null,this._mapGeodes=new Map,this._smgXmlMasterFileName=null,this._smgXMLDataResources=null,this._geomSignaturesAwaited=0,this._filesToTryAgain=[]},StartLoadingExperience:async function(e,a,o,i){e.getManager("VCXContextManager").setContextFromName("OpenSMGXML");var n=window.location.origin,s=o;o.indexOf("://")>0||0===o.indexOf("//")||(s=r.RelativeToAbsolute(n,o));var l=s.slice(s.lastIndexOf(".")),u=s.slice(0,s.lastIndexOf("/")),c=s.slice(s.lastIndexOf("/")+1,s.lastIndexOf("."));this._smgXmlMasterFileName=c+l;var p=u+"/Resources.xml",m=new Map,d=this,C=function(){d.sendErrorNotification(e,"warning","Notification.smgXmlResourcesNotFound"),i()},g=async t=>{var o=r.loadXMLString(t),n=r.xmlToJson(o).Resources.Resource,s={target:{}};s.target.files=[];var l=!1,c=async(t,r)=>{for(var o=0;o<t.target.files.length;o++){var n=t.target.files[o],s=n.name;s=s.toLowerCase(),m.set(s,n)}await d.LoadDataFiles(e,a,m,i),r&&d.sendErrorNotification(e,"warning","Notification.smgXmlSomeResourcesMissing")},p=async(e,t)=>{0!==t.length&&d._filesToTryAgain.length!==t.length||(l=!0),d._filesToTryAgain=t,await d.loadResourcesForSmgXml(e,t,u,c,p,l)};await d.loadResourcesForSmgXml(s,n,u,c,p,l)};t.BlobURLToText(p).then(g).catch((async()=>{p=u+"/"+c+"_Resources.xml",t.BlobURLToText(p).then(g).catch(C)}))},loadResourcesForSmgXml:async function(e,r,a,o,i,n){var s=r.length,l=0,u=!1,c=[];if(n)return o(e,!0);for(var p=(r,a)=>{if(r){var p=t.dataURLToBlob(r);p.lastModifiedDate=new Date,p.name=a,e.target.files.push(p)}else c.push(a),u=!0;if(++l===s)return!u||n?o(e,u):i(e,c)},m=0;m<s;m++){var d="",C=a;if(void 0!==(d=r[m]["@attributes"]&&r[m]["@attributes"].RelativePath?r[m]["@attributes"].RelativePath:r[m])&&""!==d){var g,h=0,V=0;if("."==d[h]){for(;"."==d[h]||"\\"==d[h]||"/"==d[h];)"\\"!=d[h]&&"/"!=d[h]||V++,h++;for(;V>0;)C=C.slice(0,C.lastIndexOf("/")),V--;d=d.slice(h+0)}g=C+"/"+d,t.BlobURLToBase64(g,"",p,d,p)}}}})}));