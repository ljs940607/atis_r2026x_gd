define("DS/DELPPWItemViewBehaviors/MfgItemViewer3DBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["Viewer3DPlugin","DatabasePlugin","ProductImplementPlugin","RootsPlugin","ResourcePlugin"],creator:function(t,n,o,i,r,s,a){const l=function(e,t){this.rirPath=e,this.isVisible=t};var c,u,d,g,f,p,h,m,I,S,y,P,b,C,v,A=["PRODUCT","PROCESS","SERVICE","CONSTRUCTION"],N=n.getBehavior("InterWidgetComBehavior");e.is(N)&&N.isCloud();return h=function(){var e={};return n.getBehavior("TreeListViewBehavior").has3DHideShowColumn()&&(e.hideShow3D=function(e){var t,n=e.context.nodeModel,o=n.getRIRpath(),i=0===I(n);t=new l(o,i),b(t)},e.hiddenByUser=!1),e},m=function(e){o.add3DVisibilityState(e)},I=function(e){return o.get3DVisibilityState(e.getRIRpath())},S=function(e,t){o.update3DVisibilityState(e.getRIRpath(),t)},y=function(e){return o.isAggregatingRootLoadedInViewer(e)},P=function(e,t){o.overrideAllChildrenNodesVisibilityState(e,t)},function(e,t){let n,o=[];return function e(t,i){t.hasChildren()&&t.getChildren(!0).forEach((function(t){1!==I(t)&&(n=new l(t.getRIRpath(),i),o.push(n)),t.hasChildren()&&e(t,i)}))}(e,t),o},b=function(e){var t=[];e=Array.isArray(e)?e:[e],t=t.concat(e),n.notify("change3DVisibilityfromEBOMview",[t])},C=function(t){var o,i=n.getBehavior("WUXNodeModelBehavior"),r=i.getTreeDocument(),s=t.parentPID,a=t.isVisible?1:null;o=i.getNodeModel(s,!0),e.is(o)&&(r.prepareUpdate(),S(o,a),o.updateOptions({hiddenByUser:!1}),function e(t,n){if(!t.hasChildren())return S(t,n),void t.updateOptions({hiddenByUser:!1});t.getChildren(!0).forEach((function(t){S(t,n),t.updateOptions({hiddenByUser:!1}),t.hasChildren()&&e(t,n)}))}(o,a),r.pushUpdate())},v=function(t){var o,i,r=n.getBehavior("WUXNodeModelBehavior"),s=r.getTreeDocument();o=function(t,n){let o,i=0,r=0,s=t.getChildren(!0),a=1;for(o=0;o<s.length;o++)0===I(s[o])?r++:-1===I(s[o])&&i++;return(r>0||i>0)&&(a=s.length===r?e.is(n)?n:0:-1),a},i=function(e){e.getParents().forEach((function(e){s.isGroupingNodeModel(e)||e.is3DHiddenByUser()||(S(e,o(e)),e.updateOptions({hiddenByUser:!1}))}))},s.prepareUpdate(),t.forEach((function(t){var n=t.isVisible?1:0,s=r.getNodeModel(t.absPath,!0);e.is(s)&&(s.hasChildren()&&1===n?S(s,o(s,n)):S(s,n),s.isRoot()||i(s),0===n?s.updateOptions({hiddenByUser:!0}):s.updateOptions({hiddenByUser:!1}))})),s.pushUpdate()},d=function(e){return"PROCESS"===i.getPPRType(e)},g=function(){return u.some((function(e){return A.indexOf(e)>-1}))},function(t){var n,i;e.is(c,"boolean")&&!0===c&&d(t)&&(i=r.getScopeLinksOfImplementing(t)).length>0&&(n=[i[0].get("to")],o.drop3D(n))},function(t){var n,o;e.is(c,"boolean")&&!0===c&&(n=r.getScopeLinksOfImplementing(t)).length>0&&(o=n[0].get("to"),p([o]))},f=function(t,i){var s,a,l,u,d;e.is(c,"boolean")&&!0===c&&(s=Array.isArray(t)?t:[t],a=r.getScopeLinkType(),u=n.getBehavior("WUXNodeModelBehavior"),e.is(u)&&(l=u.getRoots(),(d=s.filter((function(e){var t,n=a===e.get("type"),o=!1;return n&&(t=e.get("from"),o=l.indexOf(t)>-1),n&&o})).map((function(e){return e.get("to")}))).length>0&&(i?o.drop3D(d):p(d))))},function(e){f(e,!0)},function(e){f(e,!1)},p=function(t){var i;i=e.is(c,"boolean")&&!0===c?s.getRoots(n.getId())[0]:s.getRoots(n.getId())[1],0===t.reduce((function(e,t){var n,o=r.getScopeLinksOfImplemented(t);return o.length>0&&(n=o.map((function(e){return e.get("from")})),e=e.concat(n)),e}),[]).filter((function(e){return i.indexOf(e)>-1})).length&&o.remove3D(t)},{listenTo:function(){return{toggle3DVisibilityState:b,set3DVisibilityState:C,update3DVisibilityState:v}},onStart:function(t){c=e.is(t.implementing)?t.implementing:null,e.is(t.implemented)?t.implemented:null,u=t.pprTypes,t.ignoreSelectIn3DViewer},select3D:function(e){g()&&o.selectIn3D(e)},unSelectAll3D:function(){},unHideAll3D:function(){},getReferenceNodeOptions:function(){return h()},getPreferences:function(){return o.getPreferences()},updatePreferences:function(e){o.updatePreferences(e)},get3DVisibilityState:function(e){return I(iNodeModel)},update3DVisibilityState:function(e,t){S(iNodeModel,t)},add3DVisibilityState:function(e){m(e)},isAggregatingRootLoadedInViewer:function(e){return y(e)},overrideAllChildrenNodesVisibilityState:function(e,t){P(e,t)}}}}})),define("DS/DELPPWItemViewBehaviors/ItemUXBehavior/MfgItemCreateReportUI",["UWA/Core"],(function(e){"use strict";return function(t,n){var o,i,r="full_report",s="erroronly_report",a=n.getBehavior("UXFactoryBehavior"),l=t.getPlugins("ResourcePlugin").instance,c=t.getPlugins("DatabasePlugin").instance,u=t.getPlugins("UXComponentsPlugin").instance,d=u.getComponent("TreeNodeModel"),g=u.getComponent("TreeDocument"),f=u.getComponent("DataGridView"),p=a.getComponent("WUXFrameWindowsManager"),h=[{text:l.getNLSValue("MfgItemCreateReportUI.Column.ProductName"),description:l.getNLSValue("MfgItemCreateReportUI.Column.ProductName"),dataIndex:"tree",width:"40%"},{text:l.getNLSValue("MfgItemCreateReportUI.Column.Status"),description:l.getNLSValue("MfgItemCreateReportUI.Column.Status"),dataIndex:"Status",width:"10%"},{description:l.getNLSValue("MfgItemCreateReportUI.Column.isMfgRefernceCreatedOrReused"),dataIndex:"isMfgRefernceCreatedOrReused",icon:l.getIconURLFromKey("InsertCreateAssembly"),width:"10%"},{description:l.getNLSValue("MfgItemCreateReportUI.Column.isScopeLinkCreated"),dataIndex:"isScopeLinkCreated",typeRepresentation:"boolean",icon:l.getIconURLFromKey("ProductImplementLink"),width:"5%"},{description:l.getNLSValue("MfgItemCreateReportUI.Column.isInstanceCreated"),dataIndex:"isInstanceCreated",typeRepresentation:"boolean",icon:l.getIconURLFromKey("CreateInstance"),width:"5%"},{description:l.getNLSValue("MfgItemCreateReportUI.Column.isImplementLinkCreated"),dataIndex:"isImplementLinkCreated",typeRepresentation:"boolean",icon:l.getIconURLFromKey("ProductImplementLinkOcc"),width:"5%"},{text:l.getNLSValue("MfgItemCreateReportUI.Column.ErrorMessages"),description:l.getNLSValue("MfgItemCreateReportUI.Column.ErrorMessages"),dataIndex:"ErrorMessages",width:"30%"}],m=function(t){var n,o,i,r,s,a={longHelp:""};if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(r=(i=this.getColumnOrGroup(t.columnID)).dataIndex,s=t.nodeModel,-1===t.rowID)return e.is(i.description)&&(a.longHelp=i.description),a;if(o="tree"===r?s.getLabel():s.getAttributeValue(r),e.is(o))switch(r){case"tree":case"Status":case"isMfgRefernceCreatedOrReused":case"ErrorMessages":a.longHelp=o;break;case"isScopeLinkCreated":case"isInstanceCreated":case"isImplementLinkCreated":n="MfgItemCreateReportUI."+r+(o?".Created":".NotCreated"),a.longHelp=l.getNLSValue(n)}return a};return o=function(t){var o,i,r=p.getFrameWindow(n.getAppContext()).getImmersiveFrame(),s=l.getIconURLFromKey("CreateMfgItemStructure"),c=a.createElement("div",{class:"tree-list-container"});return(o=a.create("Panel",{title:e.is(t.title)?t.title:l.getNLSValue("MfgItemCreateReportUI.Dialog.Title"),icon:e.is(s)?s:"",identifier:"createMfgItemsReportPanel",immersiveFrame:r,content:c,width:500,height:250,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){o.hide()},i=new g,new f({treeDocument:i,columns:h,getCellTooltip:m}).getContent().inject(c),{panel:o,treeDocument:i}},i=function(t,n){var o=this;o.treeDocument.prepareUpdate(),t.forEach((function(t){var n,i,a,u,g,f,p;(o.mode===r||o.mode===s&&"Success"!==t.Status)&&(g=(u=t.ProductOcc.split(","))[u.length-1],f=c.getInstance(g),i=(p=c.getReferenceModel(g)).get("PLMEntity.V_Name")+"("+f.get("PLMInstance.PLM_ExternalID")+")",a=p.get("VPMReference.V_IsManufacturable"),e.is(t.isRefernceCreated)&&(t.isRefernceCreated?t.isMfgRefernceCreatedOrReused=l.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Created"):t.isMfgRefernceCreatedOrReused=l.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Reused")),e.is(t.Status)&&("Phanthom"===t.Status&&"FALSE"===a&&(t.Status="NON-BOM"),t.Status=l.getNLSValue("MfgItemCreateReportUI.Status."+t.Status)),n=new d({label:i,grid:t}),o.treeDocument.addRoot(n))})),o.treeDocument.pushUpdate(),n()},{displayReport:function(t){var n;t=t||{},e.is(t.report.CreatedItems,"array")&&(n=o(t),c.getExecuteByBlockPromise({callback:i,globalArray:t.report.CreatedItems,context:{treeDocument:n.treeDocument,mode:e.is(t.mode)?t.mode:r}}).then((function(){n.treeDocument.getRoots().length>0&&n.panel.show()})))}}}})),define("DS/DELPPWItemViewBehaviors/AltSubBehavior/AltSubReplaceReportUI",["UWA/Core","UWA/Controls/Abstract"],(function(e,t){"use strict";const n=t.extend({defaultOptions:{className:"Details-list",showHeaderMessage:!0},objectsTableHead:null,objectsTableBody:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){let t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableHead=e.createElement("thead",{id:"tableHeader"}),this.objectsTableHead.setStyles({"font-weight":"bold"}),this.objectsTableHead.inject(t),this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableBody.inject(t)},setData:function(t){if(this.empty(),this.options.showHeaderMessage&&e.is(this.objectsTableHead)){const n=[{tag:"th",text:"#"}],o=t.headers.map((e=>({tag:"th",text:e}))),i=e.createElement("tr",{html:n.concat(o)});this.objectsTableHead.appendChild(i)}e.is(this.objectsTableBody)&&t.detailObjs.map(((t,n)=>{const o=[{tag:"td",text:n+1},{tag:"td",text:t.instanceTitle},{tag:"td",text:t.parentTitle},{tag:"td",text:t.status},{tag:"td",text:t.message}];return e.createElement("tr",{html:o})})).forEach((e=>{this.objectsTableBody.appendChild(e)}))},empty:function(){if(e.is(this.objectsTableBody))for(;e.is(this.objectsTableBody.firstChild);)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return function(t,o,i,r){const s=function(e){return e.isReference()?e.get("PLMEntity.V_Name"):e.get("PLMInstance.PLM_ExternalID")},a=function(e){return Object.values(e).map((e=>"Success"===e.status?(e=>({instanceId:e.replacementInstanceId,status:i.getNLSValue("AltSub.ReplaceReport.Success"),message:e.successMessage}))(e):(e=>({instanceId:e.oldInstanceId,status:i.getNLSValue("AltSub.ReplaceReport.Failed"),message:e.errorMessage}))(e)))},l=function(l){let c=e.createElement("div",{class:"Replace-report-content-container"});(function(t){let o=new n;const a=t.map((e=>{const t=r.getInstance(e.instanceId),n=r.getAggregatingReferenceModelFromInstance(t);return{instanceTitle:s(t),parentTitle:s(n),status:e.status,message:e.message}}));o.setData({headers:[i.getNLSValue("AltSub.ReplaceReport.InstanceTitle"),i.getNLSValue("AltSub.ReplaceReport.ParentTitle"),i.getNLSValue("AltSub.ReplaceReport.Status"),i.getNLSValue("AltSub.ReplaceReport.Message")],detailObjs:a});let l=(()=>{let t=e.createElement("div",{class:"Details-list-div"});return t.setStyles({margin:"5px"}),t})();return o.getContent().inject(l),l})(a(l)).inject(c);(function(e){const n=o.getComponent("WUXFrameWindowsManager").getFrameWindow(t.getAppContext());let r=o.create("Panel",{title:i.getNLSValue("AltSub.ReplaceReport.Title"),icon:"",immersiveFrame:n.getImmersiveFrame(),content:e,width:500,height:250,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0});return r.close=function(){r.hide()},r})(c).show()};return{showReport:function(e){l(e)}}}})),define("DS/DELPPWItemViewBehaviors/GroupingViewBehavior/ManageCommands",["DS/CoreEvents/Events"],(function(e){"use strict";return{showProcurementView:function(){e.publish({event:"ManageCommands/ProcurementView"})},showStructureView:function(){e.publish({event:"ManageCommands/StructuralGrouping"})}}})),define("DS/DELPPWItemViewBehaviors/ColumnManagers/HideShowProduct3DColumnManager",["UWA/Core"],(function(e){"use strict";return function(t){const n=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},o=n("Viewer3DPlugin"),i=n("ResourcePlugin"),r=Object.freeze({SHOWN:1,HIDDEN:0,PARTIAL:-1});return{displayType:"hideShow3D",isTrasientColumn:!0,isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.sortableFlag=!1,e.text="",e.alignment="center",e.editionPolicy="EditionOnClick",e.hasCellValue=this.hasCellValue,e.getCellValue=this.getCellValue,e.getCellSemantics=this.getCellSemantics,e.editableFlag=!0,e.isDraggable=!1,e.isExportable=!1,e.typeRepresentation="functionIcon",e.icon=i.getIconURLFromKey("3DColumnIcon"),e.getCellTooltip=this.getCellTooltip,delete e.tooltipIndex,delete e.getCellValueForExport,e},getCellSemantics:function(t){var n,i,s=t.nodeModel,a=!1;if(e.is(s)){const l=t.nodeModel.options.grid;if(e.is(l))switch(o.get3DVisibilityState(s.getRIRpath())){case r.SHOWN:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye pad_eye wux-ui-3ds-lg";break;case r.HIDDEN:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-off pad_eye_off wux-ui-3ds-lg";break;case r.PARTIAL:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-partial pad_eye_partial wux-ui-3ds-lg";break;default:a=!0}i=a?{disabled:a}:{icon:{iconClasses:n}}}return i},hasCellValue:function(t){var n,o,i=!1;return n=t.nodeModel,o=this.getTreeDocument(),e.is(n)&&e.is(o)&&(i=!o.isGroupingNodeModel(n)),i},getCellValue:function(e){return e.nodeModel.options.hideShow3D},getCellTooltip:function(t){var n,r={longHelp:""};return-1===t.columnID?this.getCellDefaultTooltip(t):(t.isHeader?r.longHelp=i.getNLSValue("HideShow3D.tooltip"):(n=o.get3DVisibilityState(t.nodeModel.getRIRpath()),e.is(n,"number")&&(r.longHelp=0===n?i.getNLSValue("HideShow3D.show3D"):i.getNLSValue("HideShow3D.hide3D"))),r)}}}})),define("DS/DELPPWItemViewBehaviors/BI/BIBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","ProductImplementPlugin","DicoPlugin","RootsPlugin","BIMakeBuyPlugin"],creator:function(t,n,o,i,r,s,a,l,c,u){const d="MfgItemsUpdateStatus",g="ProductsAssignmentStatus";var f,p,h,m={},I={},S=[],y=[],P={},b=function(){return f.pprTypes.indexOf("PROCESS")>-1||f.pprTypes.indexOf("SERVICE")>-1||f.pprTypes.indexOf("CONSTRUCTION")>-1},C=function(){return f.pprTypes.indexOf("PART")>-1||f.pprTypes.indexOf("PRODUCT")>-1},v=function(t){var n,o={colorCode:I.Inconsistent.colorCode,tooltip:I.Inconsistent.label,status:"Inconsistent"},i={nodeOptions:{},taggerOptions:{}};if(""===t)return i={nodeOptions:null,taggerOptions:null};const r=C()?"ProductAssignmentStatus":b()?"ManufacturingItemUpdateStatus":"";if(e.is(r)){const a="ManufacturingItemUpdateStatus"===r;if("ManufacturingItemUpdateStatus"===r&&(n=t.split(","))[n.length-1],e.is(S[t]))o=S[t];else{const e=t.split(","),n=e[e.length-1],i=l.getParentTypes(s.getReferenceModel(n).get("type"));(i.includes("VPMRepReference")||i.includes("VPMReference")||a)&&(o={colorCode:"transparent",tooltip:"",status:""})}i.nodeOptions[r]={colorCode:o.colorCode,tooltip:o.tooltip,status:o.status},i.taggerOptions={absolutePath:t,status:o.status,dispValue:o.tooltip}}return i},A=function(t){e.is(t,"array")&&t.length>0&&(t.forEach((function(t){var n,o,i,r,s=t.get("status"),a=t.get("type"),l=e.is(t.get("isRef")),c=[];"ProductsAssignmentStatus"===a?(n=(c=(r=t.get("id")).split(","))[c.length-1],o=m[s].colorCode,i=m[s].label):"MfgItemsUpdateStatus"===a&&(n=(c=(r=t.get("id")).split(","))[c.length-1],e.is(t.get("MadeFrom_UseCase_AttValue"))&&"MadeFrom_UseCase_Att_Remove"!==s&&(s=s+"."+t.get("MadeFrom_UseCase_AttValue")),o=I[s].colorCode,i=I[s].label),S[e.is(r)?r:n]={PID:n,colorCode:o,tooltip:i,type:a,occurrencePath:r,status:s,isRef:l}})),function(){var t,i=n.getBehavior("WUXNodeModelBehavior"),r=i.getAllDescendants();i&&Object.keys(S).length>0&&(i.prepareUpdate(),t={callback:function(t,n){!0===o.getBICmdState()&&t.forEach((function(e){var t=e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),n=v(t);n.nodeOptions&&e.updateOptions(n.nodeOptions)})),e.is(n,"function")&&n()},globalArray:r,context:this,blockSize:100},s.getExecuteByBlockPromise(t).then((function(){i.pushUpdate(),n.notify("BIDone",n.getId())})))}())},N=function(t){var o;b()?o=t.ProcessStatus:C()&&(o=t.ProductStatus),function(t){const o=n.getBehavior("WUXNodeModelBehavior"),i={silent:!0,merge:!0};let r=[],a=[],l=[],u=[],d=[],g=new Map,f=2;t.forEach((function(t){const n=t.get("status");if(e.is(n,"string")){const n=t.get("id"),i=n.split(","),f=t.get("isRef");if(e.is(f)){const s=o.getNodeInfo(i[0]);Array.isArray(s)&&s.forEach((function(o){const i=o.instancePID;if(!e.is(i)){const o=c.isRoot(n);e.is(o)&&!0===o&&(r.push(n),a.push(t))}}))}else if(Array.isArray(i)&&i.length>1)d.push(t);else{l.push(n),u.push(t);const r=o.getNodeInfo(i[0]);Array.isArray(r)&&r.forEach((function(t){const o=t.instancePID;if(e.is(o)){const t=s.getInstance(o);if(e.is(t)){const e=t.get("isAggregatedBy");g.set(n,e)}}}))}}})),function e(t,n,o){let r=[],s=[],a=[],l=[];n.forEach((function(e){let n=[];t.forEach((function(t){const o=t.get("id"),i=o.split(",");if(i.length===f){if(i.pop(),i.toString()===e){const e={childId:o,status:t.get("status")};n.push(e)}l.includes(o)||(l.push(o),a.push(t))}else s.includes(o)||(r.push(t),s.push(o))})),0!==n.length&&o.forEach((function(t){t.get("id")===e&&t.set({childNodes:n},i)}))})),0!==l.length&&(f++,e(r,l,a))}(d,l,u),r.forEach((function(e){let t=[];g.forEach(((n,o)=>{e===n&&t.push(o)})),0!==t.length&&a.forEach((function(n){n.get("id")===e&&n.set({childInstancesPID:t},i)}))}))}(o),A(o)},M=function(e){(b()||C())&&A([e])},D=function(e){(b()||C())&&A([e])},E=function(){var t=n.getBehavior("WUXNodeModelBehavior"),o=[];if(S=[],!t)return;const i=t.getAllDescendants();b()?o.push("ManufacturingItemUpdateStatus"):C()&&o.push("ProductAssignmentStatus"),o.forEach((function(n){let o={};o[n]={colorCode:"transparent",tooltip:""},e.is(i,"array")&&0<i.length&&t.withTransactionUpdate((function(){i.forEach((function(e){e.updateOptions(o)}))}))}))},R=function(){var e=n.getBehavior("WUXNodeModelBehavior");o.getBICmdState()&&e.getSelectedNodesInfo().length>0&&o.computeBI()},B=function(e){var t=Array.isArray(e)?e:[e],n=!1;return o.isBIComputed()&&(n=t.some((function(e){return e.get("type")===p}))),n},L=function(t){var i,r=Array.isArray(t)?t:[t];!0===o.getBICmdState()&&(b()||C())&&(B(r)?b()&&o.computeBI():(i=!1===o.getBICmdState()?{silent:!0}:{},r.forEach((function(t){!function(t,i){var r,s,a,l,c,u,d,g=i||{},f=n.getBehavior("WUXNodeModelBehavior");(r=t.get("type"))===h&&e.is(f)&&(s=t.get("from"),a=t.get("to"),l=a.join(),d=o.getBIModelCollection(),b()&&(c=f.getNodeInfo(s),Array.isArray(c)&&c.forEach((function(t){var n,i,s=t.absPath.join();n=d.findWhere({id:s}),e.is(n)?n.set({pointedPaths:l,status:o.getProcessStatus(r,l)},g):(i={id:s,pointedPaths:l,status:o.getProcessStatus(r,l),type:"MfgItemsUpdateStatus"},d.add(i,g))}))),C()&&(u=f.getNodeInfo(a),Array.isArray(u)&&u.forEach((function(t){var n,i,a,l,c=t.absPath.join();n=d.findWhere({id:c}),e.is(n)?(i=n.get("implementingPIDs"),Array.isArray(i)?i.includes(s)||(a=i.concat(s),n.set({implementingPIDs:a,status:o.getProductStatus(a,r)},g)):n.set({implementingPIDs:[s],status:o.getProductStatus([s],r)},g)):(l={id:c,implementingPIDs:[s],status:o.getProductStatus([s],r),type:"ProductsAssignmentStatus"},d.add(l,g))}))))}(t,i)})))),!0===u.getBIMakeBuyCmdState()&&!0===C()&&u.computeBIMakeBuyStatus()},V=function(t){var i,r=Array.isArray(t)?t:[t];!0===o.getBICmdState()&&(b()||C())&&(B(r)?b()&&o.computeBI():(i=!1===o.getBICmdState()?{silent:!0}:{},r.forEach((function(t){!function(t,i){var r,s,a,l,c,u,d=i||{},g=n.getBehavior("WUXNodeModelBehavior");(r=t.get("type"))===h&&e.is(g)&&(s=t.get("from"),a=t.get("to"),u=o.getBIModelCollection(),b()&&(l=g.getNodeInfo(s),Array.isArray(l)&&l.forEach((function(t){var n,i=t.absPath.join();n=u.findWhere({id:i}),e.is(n)&&n.set({pointedPaths:"",status:o.getProcessStatus(r)},d)}))),C()&&(c=g.getNodeInfo(a),Array.isArray(c)&&c.forEach((function(t){var n,i,a,l=t.absPath.join();n=u.findWhere({id:l}),e.is(n)&&(i=n.get("implementingPIDs"),Array.isArray(i)&&(-1!==(a=i.indexOf(s))?(i.splice(a,1),n.set({implementingPIDs:i,status:o.getProductStatus(i,r)},d)):n.set({status:o.getProductStatus([],r)},d)))}))))}(t,i)})))),!0===u.getBIMakeBuyCmdState()&&!0===C()&&u.computeBIMakeBuyStatus()},O=function(){const t=n.getBehavior("WUXNodeModelBehavior");if(t&&C()){const n=t.getAllDescendants();let o={MakeBuyStatus:{colorCode:"transparent",tooltip:""}};e.is(n,"array")&&0<n.length&&t.withTransactionUpdate((function(){n.forEach((function(e){e.updateOptions(o)}))}))}},w=function(t){if(C()&&e.is(t,"array")&&t.length>0){t.forEach((function(e){const t=e.get("id"),n=e.get("status");let o="";if("None"!==n){const t=e.get("MakeOrBuy"),n=e.get("organization");o=t.map(((e,t)=>`${e} - ${n[t]}`)).join(" \n")}else o=P[n].label;const i=P[n].colorCode;y[t]={PID:t,status:n,colorCode:i,tooltip:o}}));const o=n.getBehavior("WUXNodeModelBehavior"),i=o.getAllDescendants();if(o&&Object.keys(y).length>0){o.prepareUpdate();const t=function(t,n){t.forEach((function(t){const n=t.getReferencePID(),o=y[n];if(e.is(o)){let e={};e.MakeBuyStatus={colorCode:o.colorCode,tooltip:o.tooltip,status:o.status},t.updateOptions(e)}})),e.is(n,"function")&&n()},n={callback:t,globalArray:i,context:this,blockSize:100};s.getExecuteByBlockPromise(n).then((function(){o.pushUpdate()}))}}},T=function(t){if(!function(){let e=!1;const t=s.isAuthoringMode();return u.isBIMakeBuyComputed()&&t&&(e=!0),e}())return;if(b())return;let n=[],o=[],i=[];const r=u.getBIModelCollection(),a={silent:!0,merge:!0},c=t.connections;Array.isArray(c)&&c.length>0&&o.push(...c),Array.isArray(o)&&o.length>0&&o.forEach((function(t){const o=(e.is(t.PID)?t.PID:t.id).split("|"),i=o[0],c=o[1],u=o[2];if("ProductImplementLink"===i){const o=e.is(t["from.attributesValue"])?t["from.attributesValue"]:s.getReferenceModel(c).toJSON(),i=o.type,d=!0===(l.isAKindOf(i,"Provide")||l.isAKindOf(i,"ProcessContinuousProvide")||l.isAKindOf(i,"DELConstructionWorkPackageGroup")||l.isAKindOf(i,"DELConstructionWorkElementEach")||l.isAKindOf(i,"DELConstructionWorkElementArea")||l.isAKindOf(i,"DELConstructionWorkElementLength")||l.isAKindOf(i,"DELServiceSpareItemReference")||l.isAKindOf(i,"DELContinuousServicePartReference"))?"Buy":"Make",g=o.organization,f=r.findWhere({id:u});if(e.is(f)){let t=f.get("scopedItemIDs");if(!t.includes(c)){t.push(c);let o=f.get("organization");o=e.is(o)?o:[],o.push(g);let i=f.get("status");i=e.is(i)?i:"None","None"===i?i=d:"Multiple"!==i&&(i="Multiple");let s=f.get("MakeOrBuy");s=e.is(s)?s:[],s.push(d),f.set({scopedItemIDs:t,status:i,MakeOrBuy:s,organization:o},a),n.push(r.findWhere({id:u}))}}else{const e={id:u,scopedItemIDs:[c],status:d,MakeOrBuy:[d],organization:[g],type:"ProductMakeBuyStatus"};n.push(r.add(e,a))}}}));const d=t.deletedConnections;Array.isArray(d)&&d.length>0&&i.push(...d),Array.isArray(i)&&i.length>0&&i.forEach((function(t){const o=t.split("|"),i=o[0],s=o[1],l=o[2];if("ProductImplementLink"===i){const t=r.findWhere({id:l});if(e.is(t)){let e=t.get("scopedItemIDs"),o=t.get("organization"),i=t.get("MakeOrBuy"),c=t.get("status");if(e.includes(s)){const u=e.indexOf(s);e.splice(u,1),o.splice(u,1),i.splice(u,1),c=e.length>1?"Multiple":1===e.length?i[0]:"None",t.set({scopedItemIDs:e,status:c,MakeOrBuy:i,organization:o},a),n.push(r.findWhere({id:l}))}}}})),w(n)},U=function t(n,i,r){const s={silent:!0,merge:!0},a=n.split(","),l=o.getBIModelCollection();if(a.length>1){a.pop();const o=a.join(),c=l.findWhere({id:o});let u=0,d=0;const g=e.is(c.get("childNodes"))?c.get("childNodes"):[];let f=!0;if(g.forEach((function(e){e.childId===n&&(f=!1)})),!0===f){const e={childId:n,status:i};g.push(e)}g.forEach((function(e){const t=e.childId;t===n&&(e.status=i);const o=e.status;if("NotApplicable"===o&&u++,"IntermediateChildrenNotUptoDate"===o||"IntermediateGood"===o){const e=l.findWhere({id:t}).get("status");"NotApplicable"===e&&u++,"IntermediateChildrenNotUptoDate"===e&&d++}}));let p=c.get("status");if("NotApplicable"===p||"IntermediateChildrenNotUptoDate"===p||!0===f&&"ImplGoodWithGoodScope"!==p){p="IntermediateChildrenNotUptoDate";(e.is(g)?g.length:0)===u&&(p="NotApplicable"),0===u&&0===d&&(p="IntermediateGood"),c.set({status:p,childNodes:g},s),r.push(l.findWhere({id:o})),t(o,p,r)}}},x=function t(n,i,r){const s={silent:!0,merge:!0},a=n.split(","),l=o.getBIModelCollection();if(a.length>1){a.pop();const o=a.join(),c=l.findWhere({id:o});let u=c.get("status");if("NotAssigned"===u||"PartiallyAssigned"===u||"AssignedIndirectly"===u){let a=0;const d=e.is(c.get("childNodes"))?c.get("childNodes"):[],g=e.is(d)?d.length:0;d.forEach((function(t){t.childId===n&&(t.status=i);if("NotAssigned"===t.status&&a++,"AssignedIndirectly"===t.status){let n=!1;if(function t(o){const i=l.findWhere({id:o.childId});(e.is(i.get("childNodes"))?i.get("childNodes"):[]).forEach((function(e){"AssignedIndirectly"!==e.status&&(n=!0),t(e)}))}(t),!1===n){a++;const n=function t(n){if("AssignedIndirectly"===n.status){const o=l.findWhere({id:n.childId});n.status="NotAssigned",o.set({status:n.status},s),r.push(l.findWhere({id:n.childId}));(e.is(o.get("childNodes"))?o.get("childNodes"):[]).forEach((function(e){t(e)}))}};n(t)}}})),u="PartiallyAssigned",g===a&&(u="NotAssigned"),0===a&&(u="AssignedIndirectly"),c.set({status:u},s),r.push(l.findWhere({id:o})),t(o,u,r)}if("AssignedDirectly"===u){let t=0;const o=e.is(c.get("childNodes"))?c.get("childNodes"):[];if(0!==(e.is(o)?o.length:0)&&(o.forEach((function(o){if(o.childId===n&&(o.status=i),"AssignedIndirectly"===o.status){let n=!1;(function t(o){const i=l.findWhere({id:o.childId});(e.is(i.get("childNodes"))?i.get("childNodes"):[]).forEach((function(e){"AssignedIndirectly"!==e.status&&(n=!0),t(e)}))})(o),!1===n&&t++}})),t>0)){(function t(n){(e.is(n.get("childNodes"))?n.get("childNodes"):[]).forEach((function(e){const n=l.findWhere({id:e.childId});"AssignedIndirectly"===e.status&&(e.status="NotAssigned",n.set({status:e.status},s),r.push(l.findWhere({id:e.childId})),t(n))}))})(c)}}}},W=function t(n,i,r,s){const a={silent:!0,merge:!0},l=n.split(","),c=o.getBIModelCollection();if(l.length>1){l.pop();const o=l.join(),u=c.findWhere({id:o});let d=0,g=0,f=e.is(u.get("childNodes"))?u.get("childNodes"):[],p=e.is(f)?f.length:0,h=[];Array.isArray(s)&&s.length>0&&(f.forEach((function(e){const t=e.childId;s.includes(t)||h.push(e)})),f=h,p=h.length),f.forEach((function(e){e.childId===n&&(e.status=i);switch(e.status){case"NotApplicable":d++;break;case"ImplGoodWithGoodScope":case"ImplGood":case"IntermediateGood":g++}}));let m=u.get("status");"IntermediateGood"!==m&&"IntermediateChildrenNotUptoDate"!==m||(m=p===d?"NotApplicable":p===g?"IntermediateGood":"IntermediateChildrenNotUptoDate",u.set({status:m,childNodes:f},a),r.push(c.findWhere({id:o})),t(o,m,r,s))}},F=function t(n,i,r,a){const l={silent:!0,merge:!0},c=n.split(","),u=o.getBIModelCollection();if(c.length>1){c.pop();const o=c.join(),d=u.findWhere({id:o});let g=d.get("status");if("PartiallyAssigned"===g||"AssignedIndirectly"===g){let s=0;const a=e.is(d.get("childNodes"))?d.get("childNodes"):[],c=e.is(a)?a.length:0;a.forEach((function(e){const t=e.childId,o=e.status;let i=o;if(t===n){if(i="NotAssigned","AssignedMoreThanOnce"===o){const e=u.findWhere({id:t}).get("implementingPIDs");Array.isArray(e)&&(i=e.length>1?"AssignedMoreThanOnce":1===e.length?"AssignedDirectly":"NotAssigned")}e.status=i}"NotAssigned"===i&&s++})),g="PartiallyAssigned",c===s&&(g="NotAssigned"),0===s&&(g="AssignedIndirectly"),d.set({status:g},l),i.push(u.findWhere({id:o})),t(o,i,r)}if("AssignedDirectly"===g||"AssignedMoreThanOnce"===g){let t=0;const o=e.is(d.get("childNodes"))?d.get("childNodes"):[],c=e.is(o)?o.length:0;if(0!==c){o.forEach((function(o){if(o.childId===n&&(o.status="NotAssigned"),"NotAssigned"===o.status&&t++,"AssignedIndirectly"===o.status){let n=!1;(function t(o){const i=u.findWhere({id:o.childId});(e.is(i.get("childNodes"))?i.get("childNodes"):[]).forEach((function(e){"AssignedIndirectly"!==e.status&&(n=!0),t(e)}))})(o),!1===n&&t++}}));(e.is(d.get("implementingPIDs"))?d.get("implementingPIDs"):[]).forEach((n=>{const o=s.getInstance(n);if(e.is(o)){const n=o.get("isInstanceOf");let g=s.getInstancesFromCollection(n);if(Array.isArray(g)&&1===g.length&&r.includes(g[0].get("PID"))&&(g=[]),Array.isArray(g)&&0===g.length&&c===t){(function t(n){(e.is(n.get("childNodes"))?n.get("childNodes"):[]).forEach((function(n){const o=u.findWhere({id:n.childId}),r=function(){n.status="AssignedIndirectly",o.set({status:n.status},l),i.push(u.findWhere({id:n.childId})),t(o)};"NotAssigned"===n.status&&r();const s=o.get("status");if("AssignedDirectly"===s||"AssignedMoreThanOnce"===s){(e.is(o.get("implementingPIDs"))?o.get("implementingPIDs"):[]).forEach((t=>{const n=a.get(t);e.is(n)&&r()}))}}))})(d)}}}))}}}},k=function t(n,i,r,a){const l={silent:!0,merge:!0},u=n.split(","),d=o.getBIModelCollection();if(u.length>1){u.pop();const o=u.join(),s=d.findWhere({id:o});if(e.is(s)){let c=0,u=0,g=e.is(s.get("childNodes"))?s.get("childNodes"):[],f=e.is(g)?g.length:0;if(e.is(a)){const e={childId:a,status:r};g.push(e),f=g.length}g.forEach((function(e){e.childId===n&&(e.status=r);switch(e.status){case"NotApplicable":c++;break;case"ImplGoodWithGoodScope":case"ImplGood":case"IntermediateGood":u++}}));let p=s.get("status");"ImplGoodWithGoodScope"!==p?(p=f===c?"NotApplicable":f===u?"IntermediateGood":"IntermediateChildrenNotUptoDate",s.set({status:p,childNodes:g},l),i.push(d.findWhere({id:o})),t(o,i,p)):(s.set({childNodes:g},l),i.push(d.findWhere({id:o})))}}else{const t=s.getInstance(u[0]);if(e.is(t)){const n=t.get("isAggregatedBy"),o=c.isRoot(n);if(e.is(o)&&!0===o){const t=d.findWhere({id:n});let o=e.is(t.get("childInstancesPID"))?t.get("childInstancesPID"):[];o.includes(u[0])||(o.push(u[0]),t.set({childInstancesPID:o},l),i.push(d.findWhere({id:n})))}}}},j=function(t){const i="NotApplicable",r="NotAssigned",s={silent:!0,merge:!0},a=o.getBIModelCollection();let l=[];return t.forEach((function(t){let o=e.is(t.attributesValue)?t.attributesValue:t.toJSON();const c=o.isInstanceOf;let u;if(e.is(c)){const t=o.type;let s=o.PID;if(e.is(t)){const e=n.getBehavior("WUXNodeModelBehavior").getNodeInfo(s);if(Array.isArray(e)&&e.forEach((function(e){s=e.absPath.join()})),"VPMInstance"===t&&C()){u={id:s,status:r,type:g,isInstanceOf:c}}else if(b()){const e={id:s,status:i,type:d,isInstanceOf:c};k(s,l,i,s),u=e}}}else{const t=o.PPRTYPE,n=o.PID;if(e.is(t))if("PROCESS"===t&&b()){u={id:n,status:i,type:d}}else if("PRODUCT"===t&&C()){u={id:n,status:r,type:g}}}e.is(u)&&l.push(a.add(u,s))})),l},_=function(){let e=!1;const t=s.isAuthoringMode();return o.isBIComputed()&&t&&(e=!0),e},G=function(t,i){const r=n.getBehavior("WUXNodeModelBehavior"),s={silent:!0,merge:!0},a=o.getBIModelCollection();t.forEach((function(t){let n=e.is(t.attributesValue)?t.attributesValue:t.toJSON();const o=n.isInstanceOf;if(e.is(o)){let t=n.PID;const l=r.getNodeInfo(t);Array.isArray(l)&&l.forEach((function(e){const o=e.absPath.join();if(o!==t){const e={id:o,status:"NotApplicable",type:d,isInstanceOf:n.isInstanceOf};i.push(a.add(e,s)),t=o}}));const c=a.findWhere({id:t});if(e.is(c)){let n=c.get("status");const l=r.getNodeInfo(o);Array.isArray(l)&&l.forEach((function(t){const o=t.absPath.join(),i=a.findWhere({id:o});if(e.is(i)){"NotApplicable"!==i.get("status")&&(n="MadeFrom_UseCase_Att_Add")}})),c.set({status:n},s),i.push(a.findWhere({id:t}))}else{const e={id:t,status:"NotApplicable",type:d};i.push(a.add(e,s))}}}))},X=function t(n,i,r,s){if(b()){const a={silent:!0,merge:!0},l=n.split(","),c=o.getBIModelCollection();if(l.length>1){l.pop();const o=l.join(),u=c.findWhere({id:o});if(e.is(u)){let l=0,d=0,g=e.is(u.get("childNodes"))?u.get("childNodes"):[],f=e.is(g)?g.length:0;if(e.is(s)){let e=[];g.forEach((function(t){const n=t.childId;s!==n&&e.push(t)})),g=e,f=e.length}g.forEach((function(e){e.childId===n&&(e.status=r);switch(e.status){case"NotApplicable":l++;break;case"ImplGoodWithGoodScope":case"ImplGood":case"IntermediateGood":d++}}));let p=u.get("status");"ImplGoodWithGoodScope"!==p?(p=f===l?"NotApplicable":f===d?"IntermediateGood":"IntermediateChildrenNotUptoDate",u.set({status:p,childNodes:g},a),i.push(c.findWhere({id:o})),t(o,i,p)):(u.set({childNodes:g},a),i.push(c.findWhere({id:o})))}}}},H=function(t,i,r){const l=t[1],c=t[2].split('"'),u=["[",",","]"];let f=[];c.forEach((function(e){u.includes(e)||f.push(e)}));const p=f.join(),h={silent:!0,merge:!0},m="ProductImplementLinkOcc",I=o.getBIModelCollection();let S=[];const y=function(t,n){const r=I.findWhere({id:t});if(e.is(n)){if(a.getScopeLinksOfImplementing(n).length>0)Array.isArray(i)||(i=[]),i.push(n);else{const t=I.findWhere({id:n});if(e.is(t)){const o=t.get("status");e.is(o)&&"ScopeGood"===o&&(Array.isArray(i)||(i=[]),i.push(n))}}}let c;if(e.is(r)){let a=r.get("isInstanceOf");if(!e.is(a)){const t=s.getInstance(l).toJSON();e.is(t)&&(a=t.isInstanceOf)}c=e.is(a)&&i.includes(a)||i.includes(n)?"ImplGoodWithGoodScope":o.getProcessStatus(m,p),r.set({pointedPaths:p,status:c},h),S.push(I.findWhere({id:t}))}else{c=e.is(i.includes(n))?"ImplGoodWithGoodScope":o.getProcessStatus(m,p);const r={id:t,pointedPaths:p,status:c,type:d};S.push(I.add(r,h))}U(t,c,S)},P=n.getBehavior("WUXNodeModelBehavior");if(b()){const e=P.getNodeInfo(l);Array.isArray(e)?e.forEach((function(e){const t=e.absPath.join(),n=e.referencePID;y(t,n)})):y(l)}const v=function(t){const n=I.findWhere({id:t});let i=o.getProductStatus([l],m);if(e.is(n)){let a=n.get("implementingPIDs");if(Array.isArray(a)&&a.length>0){let e=[];a.forEach((function(t){r.includes(t)||e.push(t)})),a=e,-1===a.indexOf(l)&&a.push(l),i=o.getProductStatus(a,m)}else a=[l];const c=s.getInstance(l);if(e.is(c)){const t=c.get("isInstanceOf"),o=s.getInstancesFromCollection(t);if(Array.isArray(o)&&0===o.length&&"AssignedDirectly"===i){(function t(n){(e.is(n.get("childNodes"))?n.get("childNodes"):[]).forEach((function(e){const n=I.findWhere({id:e.childId});e.status="AssignedIndirectly",n.set({status:e.status},h),S.push(I.findWhere({id:e.childId})),t(n)}))})(n)}}n.set({implementingPIDs:a,status:i},h),S.push(I.findWhere({id:t}))}else{const e={id:t,implementingPIDs:[l],status:i,type:g};S.push(I.add(e,h))}x(t,i,S)};if(C()){let t=P.getNodeInfo(p);if(!e.is(t)){const e=c[c.length-2];t=P.getNodeInfo(e)}if(Array.isArray(t))if(t.length>1){let e=[];(function t(n,o){const i=s.getInstance(n);if(i){const n=i.get("isAggregatedBy"),r=s.getParentInstancesFromCollection(n);Array.isArray(r)&&r.length>0?r.forEach((function(e){const n=e.get("PID"),i=a.getImplLinksOfImplementing([n]);let r=o;if(Array.isArray(i)&&i.length>0){r=i[0].get("to").join(",")+","+o}t(n,r)})):e.push(o)}})(l,p),t.forEach((function(t){const n=t.absPath.join();e.includes(n)&&v(n)}))}else t.forEach((function(e){const t=e.absPath.join();v(t)}));else v(p)}return S},z=function(t,i,r,l,c){const u=t[0],d={silent:!0,merge:!0},g=n.getBehavior("WUXNodeModelBehavior"),f=o.getBIModelCollection();let p=[];const h=function(t,n){let s=o.getProcessStatus(u);const a=f.findWhere({id:t});if(e.is(a)){const o=e.is(a.get("childNodes"))?a.get("childNodes"):[];let r=0;const l=o.length;if(Array.isArray(o)&&0!==l&&(o.forEach((function(t){e.is(t.status)&&"NotApplicable"===t.status&&r++})),s=r===l?"NotApplicable":"IntermediateChildrenNotUptoDate"),e.is(i)&&!0===i)s="NotApplicable";else if(e.is(n)){const t=f.findWhere({id:n});if(e.is(t)){"NotApplicable"!==t.get("status")&&(s="MadeFrom_UseCase_Att_Add")}}e.is(a.toJSON().pointedPaths)&&a.unset("pointedPaths"),a.set({status:s},d),p.push(f.findWhere({id:t}))}W(t,s,p,r)},m=t[1];if(b()){let e=g.getNodeInfo(m);if(Array.isArray(e)){let t=[];e.forEach((function(e){const n=e.absPath.join();r.includes(n)&&t.push(e)})),Array.isArray(t)&&t.length>0&&(e=t),e.forEach((function(e){const t=e.absPath.join(),n=e.referencePID;h(t,n)}))}else h(m)}const I=function(t){const n=f.findWhere({id:t});if(e.is(n)){let r=[];(e.is(n.get("implementingPIDs"))?n.get("implementingPIDs"):[]).forEach((function(e){e!==m&&r.push(e)}));let a=o.getProductStatus(r,u);if(e.is(i)&&!0===i)a="NotApplicable";else{const t=s.getInstance(m);if(e.is(t)){const o=t.get("isInstanceOf"),i=s.getInstancesFromCollection(o);if(Array.isArray(i)&&0===i.length&&"NotAssigned"===a){(function t(n){(e.is(n.get("childNodes"))?n.get("childNodes"):[]).forEach((function(e){const n=f.findWhere({id:e.childId});e.status="NotAssigned",n.set({status:e.status},d),p.push(f.findWhere({id:e.childId})),t(n)}))})(n)}}}n.set({implementingPIDs:r,status:a},d),p.push(f.findWhere({id:t}))}F(t,p,r,c)};if(C()){const n=t[2].split('"'),o=["[",",","]"];let i=[];n.forEach((function(e){o.includes(e)||i.push(e)}));const u=i.join();let d=g.getNodeInfo(u);if(!e.is(d)&&null===d){const e=n[n.length-2];d=g.getNodeInfo(e)}if(Array.isArray(d))if(d.length>1){let t=[];(function n(o,i,u){const d=s.getInstance(o);if(e.is(d)){const o=d.get("isAggregatedBy"),g=s.getParentInstancesFromCollection(o);Array.isArray(g)&&g.length>0?g.forEach((function(t){const o=t.get("PID"),s=a.getImplLinksOfImplementing([o]);let d=o+","+i,g=u;if(Array.isArray(s)&&s.length>0){const e=s[0].get("from"),t=s[0].get("to").join(",");Array.isArray(r)&&r.length>0?(r.includes(e)||l.includes(d))&&(g=t+","+u):g=t+","+u}else{const t=c.get(o);e.is(t)&&(g=t+","+u)}n(o,d,g)})):t.push(u)}})(m,m,u),d.forEach((function(e){const n=e.absPath.join();t.includes(n)&&I(n)}))}else d.forEach((function(e){const t=e.absPath.join();I(t)}));else I(u)}return p},K=function(e){const t=Array.isArray(e)?e:[e];if(_()){let e=[];if(b()){let n=j(t);G(t,n),n.forEach((function(t){t.get("type")===d&&e.push(t)}))}if(C()){j(t).forEach((function(t){t.get("type")===g&&e.push(t)}))}A(e)}},J=function(t){if(T(t),!_())return;let i=[],r=[],l=[],u=[],f=[],p=[],h=[],m=[],I=[];const S=n.getBehavior("WUXNodeModelBehavior"),y=o.getBIModelCollection(),P={silent:!0,merge:!0},v=t.reusedReferences;Array.isArray(v)&&v.length>0&&(v.forEach((function(e){const t={id:e,status:"ScopeGood",type:d};i.push(y.add(t,P)),I.push(e);!function e(t){s.getInstancesFromCollection(t).forEach((function(t){const n=t.get("PID"),o=s.getReferenceModel(n),i=o.get("PID");l.push(o),l.push(t);const r=a.getScopeLinksOfImplementing([n]);Array.isArray(r)&&r.length>0&&u.push(...r);const c=a.getImplLinksOfImplementing([n]);Array.isArray(c)&&c.length>0&&u.push(...c),e(i)}))}(e)})),r.push(...l),f.push(...u));const N=t.instancesAndReferences;if(Array.isArray(N)&&N.length>0&&r.push(...N),Array.isArray(r)&&r.length>0){const e=j(r);G(r,e),i.push(...e)}const M=t.deletedObjects;let D=[],E=[],R=[];if(Array.isArray(M)&&M.length>0){D.push(...M),D.forEach((function(t){const n=S.getNodeInfo(t);if(Array.isArray(n)){const t=function t(n){const o=y.findWhere({id:n});(e.is(o.get("childNodes"))?o.get("childNodes"):[]).forEach((function(e){const n=e.childId;E.push(n),t(n)}))};n.forEach((function(e){const n=e.absPath.join();X(n,i,"NotApplicable",n),t(n)}))}if(C()){let n=!1,r="AssignedDirectly";const l=a.getImplLinksOfImplementing(t.split(","));if(Array.isArray(l)&&l.length>0){let t=l[0].get("to").join(",");const n=y.findWhere({id:t});e.is(n)&&(r=n.get("status"))}const c=s.getInstance(t);if(e.is(c)){const t=c.get("isInstanceOf"),s=a.getScopeLinksOfImplementing(t);Array.isArray(s)&&s.length>0&&s.forEach((t=>{const s=t.get("to"),a=t.get("from"),l=y.findWhere({id:s});if(e.is(l)){let t=l.get("implementingPIDs");if(e.is(t)&&t.length>1){"AssignedMoreThanOnce"===r&&(n=!0);const e=t.indexOf(a);if(-1!==e){t.splice(e,1);const n=o.getProductStatus(t,"ProductImplementLink");l.set({implementingPIDs:t,status:n},P),i.push(y.findWhere({id:s}))}}}}))}if(!n){(function t(n){const o=s.getInstance(n);if(e.is(o)){const e=o.get("isInstanceOf");s.getInstancesFromCollection(e).forEach((function(e){const n=e.get("PID");E.push(n),t(n)}))}})(t);(function t(n,o){const i=s.getInstance(n);if(e.is(i)){const e=i.get("isAggregatedBy"),n=s.getParentInstancesFromCollection(e);Array.isArray(n)&&n.length>0?n.forEach((function(e){const n=e.get("PID");let i=n+","+o;R.push(i),t(n,i)})):R.push(o)}})(t,t)}}})),D.push(...E);let t=[];D.forEach((function(e){const n=a.getImplLinksOfImplementing(e.split(","));Array.isArray(n)&&n.length>0&&t.push(...n)})),p.push(...t)}const B=t.deletedConnections;if(Array.isArray(B)&&B.length>0&&p.push(...B),Array.isArray(p)&&p.length>0){let t=!1,r=new Map;p.forEach((function(s){const a=(e.is(s.id)?s.id:s).split("|"),l=a[0],u=a[1];if("ProductImplementLink"===l||"PartialProductImplementLink"===l){let r=function(t){const i=t[0],r=t[1],s={silent:!0,merge:!0},a=o.getBIModelCollection();let l=[];const u=function(t){const n=a.findWhere({id:t});if(e.is(n)){let o=n.get("status");"ImplGoodWithGoodScope"===o?o="ImplGood":"MadeFrom_UseCase_Att_Add"===o&&(o="NotApplicable"),e.is(n.toJSON().pointedPaths)&&n.unset("pointedPaths"),n.set({status:o},s),l.push(a.findWhere({id:t})),U(t,o,l)}};if(b()){const t=a.findWhere({id:r});if(e.is(t)){e.is(t.toJSON().pointedPaths)&&t.unset("pointedPaths"),t.set({status:o.getProcessStatus(i)},s),l.push(a.findWhere({id:r}));const c=n.getBehavior("WUXNodeModelBehavior").getNodeInfo(r);Array.isArray(c)?c.forEach((function(e){const t=e.absPath.join();u(t)})):u(r)}}if(C()){const n=t[2],u=a.findWhere({id:n});if(e.is(u)){let t=u.get("implementingPIDs")||[];t=t.filter((e=>e!==r));let d=o.getProductStatus(t,i);e.is(t)&&0===t.length&&(u.unset("implementingPIDs"),d=c.isRoot(n)?"NotApplicable":d),u.set({status:d},s),l.push(a.findWhere({id:n}))}}return l}(a);i.push(...r),"PartialProductImplementLink"===l&&m.push(u);const s=a[2],d=c.isRoot(s),g=function(t){const n=y.findWhere({id:t});(e.is(n.get("childInstancesPID"))?n.get("childInstancesPID"):[]).forEach((function(t){const n=y.findWhere({id:t});n.set({status:"NotApplicable"},P);!function t(n){(e.is(n.get("childNodes"))?n.get("childNodes"):[]).forEach((function(e){const n=e.childId,o=y.findWhere({id:n});o.set({status:"NotApplicable"},P),i.push(y.findWhere({id:n})),e.status="NotApplicable",t(o)}))}(n),i.push(y.findWhere({id:t}))}))};!0===c.isRoot(u)&&b()&&(t=!0,g(u)),!0===d&&C()&&(t=!0,g(s))}else if("ProductImplementLinkOcc"===l){const e=["[",",","]"];let t=[];a[2].split('"').forEach((function(n){e.includes(n)||t.push(n)}));const n=t.join();r.set(u,n)}})),p.forEach((function(n){const o=(e.is(n.id)?n.id:n).split("|");if("ProductImplementLinkOcc"===o[0]){let e=z(o,t,D,R,r);i.push(...e)}}))}const L=t.connections;Array.isArray(L)&&L.length>0&&f.push(...L),Array.isArray(f)&&f.length>0&&(f.forEach((function(t){const n=(e.is(t.PID)?t.PID:t.id).split("|"),r=n[0],s=n[2];if("ProductImplementLink"===r||"PartialProductImplementLink"===r){const t=function(t){const n=t[1],i=t[2],r={silent:!0,merge:!0},s=t[0],a=o.getBIModelCollection();let l=[];if(b()){const t=a.findWhere({id:n});if(e.is(t))t.set({pointedPaths:i,status:o.getProcessStatus(s,i)},r),l.push(a.findWhere({id:n}));else{const e={id:n,pointedPaths:i,status:o.getProcessStatus(s,i),type:d};l.push(a.add(e,r))}}if(C()){const t=a.findWhere({id:i});if(e.is(t)){const e=[...t.get("implementingPIDs")||[],n];t.set({implementingPIDs:e,status:o.getProductStatus(e,s)},r),l.push(a.findWhere({id:i}))}else{const e={id:i,implementingPIDs:[n],status:o.getProductStatus([n],s),type:g};l.push(a.add(e,r))}}return l}(n);i.push(...t),I.push(n[1]);if(!0===c.isRoot(s)&&"PartialProductImplementLink"!==r){const t=y.findWhere({id:s});(e.is(t.get("childInstancesPID"))?t.get("childInstancesPID"):[]).forEach((function(t){const n=y.findWhere({id:t});n.set({status:"NotAssigned"},P);!function t(n){(e.is(n.get("childNodes"))?n.get("childNodes"):[]).forEach((function(e){const n=e.childId,o=y.findWhere({id:n});o.set({status:"NotAssigned"},P),i.push(y.findWhere({id:n})),e.status="NotAssigned",t(o)}))}(n),i.push(y.findWhere({id:t}))}))}}if("PartialProductImplementLink"===r){const e=n[1];h.push(e)}})),f.forEach((function(t){const n=(e.is(t.PID)?t.PID:t.id).split("|");if("ProductImplementLinkOcc"===n[0]){let e=H(n,I,D);i.push(...e)}}))),h.forEach((function(t){const n=y.findWhere({isInstanceOf:t});if(e.is(n)){"NotApplicable"===n.get("status")&&(n.set({status:"IntermediatePartialGood"},P),i.push(y.findWhere({isInstanceOf:t})))}})),m.forEach((function(t){const n=y.findWhere({isInstanceOf:t});if(e.is(n)){"IntermediatePartialGood"===n.get("status")&&(n.set({status:"NotApplicable"},P),i.push(y.findWhere({isInstanceOf:t})))}})),function(e){let t=[],n=[];e.forEach((function(e){const o=e.get("type");o===g?t.push(e):o===d&&n.push(e)})),b()?A(n):C()&&A(t)}(i)};return{listenTo:function(){return{updateBIStatus:N,addBIModel:M,changeBIModel:D,refreshCmd:R,resetBIModel:E,connectionAddedInvokeBI:L,connectionRemovedInvokeBI:V,addInstanceAndReferenceToBIModel:K,updateBIModelFromServerResponse:J,updateBIMakeBuyStatus:w,resetMakeBuyBIModel:O}},onStart:function(e){f=e||{},p=a.getScopeLinkType(),h=a.getImplementLinkType(),m={AssociatedWithScope:{colorCode:"#006400",label:r.getNLSValue("BI.PrdStatus.AssociatedWithScope")},NotAssigned:{colorCode:"#FFA500",label:r.getNLSValue("BI.PrdStatus.NotAssigned")},AssignedIndirectly:{colorCode:"#00008B",label:r.getNLSValue("BI.PrdStatus.AssignedIndirectly")},AssignedDirectly:{colorCode:"#ADD8E6",label:r.getNLSValue("BI.PrdStatus.AssignedDirectly")},AssignedMoreThanOnce:{colorCode:"#bd07b0",label:r.getNLSValue("BI.PrdStatus.AssignedMoreThanOnce")},NotAssignable:{colorCode:"#808080",label:r.getNLSValue("BI.PrdStatus.NotAssignable")},NotApplicable:{colorCode:"#A9A9A9",label:r.getNLSValue("BI.PrdStatus.NotApplicable")},PartiallyAssigned:{colorCode:"#8B4513",label:r.getNLSValue("BI.PrdStatus.PartiallyAssigned")}},I={NotApplicable:{colorCode:"#A9A9A9",label:r.getNLSValue("BI.MfgStatus.NotApplicable")},ScopeGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ScopeGood")},ScopeToOldRev:{colorCode:"#7030a0",label:r.getNLSValue("BI.MfgStatus.ScopeToOldRev")},ScopeToAncestorBranch:{colorCode:"#7030a0",label:r.getNLSValue("BI.MfgStatus.ScopeToAncestorBranch")},ScopeToNew:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ScopeToNew")},ScopeNoCorrespondingProductOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ScopeNoCorrespondingProductOccurence")},ImplGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ImplGood")},ImplGoodWithGoodScope:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ImplGoodWithGoodScope")},ImplCandidatePrdOccWithGoodScope:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScope")},ImplCandidatePrdOccWithGoodScopeEvolveInstance:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScopeEvolveInstance")},ImplCandidatePrdOccWithScopeToOldRev:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToOldRev")},ImplCandidatePrdOccWithScopeToAncestorBranch:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToAncestorBranch")},ImplCandidatePrdOccButNotCorrespondingScope:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccButNotCorrespondingScope")},ImplCandPrdOccToSamePrd:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrd")},ImplCandPrdOccToSamePrdEvolveInstance:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrdEvolveInstance")},ImplCandPrdOccToOtherRev:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToOtherRev")},ImplCandPrdOccToAncestorBranch:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToAncestorBranch")},ImplCandPrdOccToDiffPrd:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToDiffPrd")},ImplNoCandProdOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ImplNoCandProdOccurence")},ImplNoProductOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ImplNoProductOccurence")},IntermediateGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.IntermediateGood")},IntermediatePartialGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.IntermediatePartialGood")},IntermediateChildrenNotUptoDate:{colorCode:"#FFFF00",label:r.getNLSValue("BI.MfgStatus.IntermediateChildrenNotUptoDate")},Inconsistent:{colorCode:"#000000",label:r.getNLSValue("BI.MfgStatus.Inconsistent")},MadeFrom_UseCase_Att_Add:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Add")},MadeFrom_UseCase_Att_Remove:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Remove")},MadeFrom_UseCase_Att_Good:{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good")},"MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom")},"MadeFrom_UseCase_Att_Good.ManufacturingAssembly":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingAssembly")},"MadeFrom_UseCase_Att_Good.EngineeringMadeFrom":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.EngineeringMadeFrom")}},P={Make:{colorCode:"#0073E6"},Buy:{colorCode:"#AAF224"},Multiple:{colorCode:"#5BA300"},None:{colorCode:"#E6308A",label:r.getNLSValue("BI.PrdMakeBuyStatus.None")},Inconsistent:{colorCode:"#000000",label:r.getNLSValue("BI.MfgStatus.Inconsistent")}}},onStop:function(){},getNodeOptions:function(t,n){var i={nodeOptions:{},taggerOptions:{}};if(o.getBICmdState()&&e.is(t)&&(i=v(t)),u.getBIMakeBuyCmdState()&&e.is(n)){const t=function(t){let n={colorCode:P.Inconsistent.colorCode,tooltip:P.Inconsistent.label,status:"Inconsistent"},o={};if(""===t)return o;if(C()){const i=t.split(","),r=i[i.length-1];e.is(y[r])?n=y[r]:l.getParentTypes(s.getReferenceModel(r).get("type")).includes("VPMRepReference")&&(n={colorCode:"transparent",tooltip:""}),o.MakeBuyStatus={colorCode:n.colorCode,tooltip:n.tooltip,status:n.status}}return o}(n);e.merge(i.nodeOptions,t)}return i},getBICmdState:function(){return o.getBICmdState()},resetBIModelCollection:function(){return o.resetBIModelCollection()},clearPseudoBIStatus:function(){o.clearPseudoBIStatus()}}}}})),define("DS/DELPPWItemViewBehaviors/MfgItemReplaceBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["SelectionPlugin","DatabasePlugin","ProductImplementPlugin","ResourcePlugin","WebServicePlugin"],creator:function(t,n,o,i,r,s,a){var l,c;return function(t,o,i,r){var s=i||{};!0===(!e.is(s.popupMessage)||s.popupMessage)?n.info(o,r):n.log(o,r),n.notify("stopProgress",t),e.is(s.onComplete,"function")&&s.onComplete.call(null,o)},c=function(t,o,i,r,s){var a=r||{},l=!e.is(a.popupMessage)||a.popupMessage;e.is(i)&&e.is(i.message,"string")&&(o+="\n"+i.message),!0===l?n.warn(o,s):n.log(o,s),n.notify("stopProgress",t),e.is(a.onFailure,"function")&&a.onFailure.call(null,o)},l=function t(o,r){var l,u,d,g,f,p,h,m={},I=o||{},S=a.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");f=s.getNLSValue("replaceCmd.LogMessage",{replaceType:I.replaceType}),p=n.log(f),n.notify("startProgress",m),g={instancePIDs:I.instancePIDs,scopedParentPrdRefIDs:I.scopedParentPrdRefIDs,rootMfgPIDs:I.rootMfgPIDs,replacementChecks:I.replacementChecks,RIRPaths:I.RIRPaths,instancesInfo:I.instancesInfo},e.is(S,"string")&&(g.xmlLinkAuthoringConfig=S),"replaceByLatest"===I.replaceType?l="dsmfg/private/V0/invoke/replaceByLatest":"replaceByExisting"===I.replaceType?(l="dsmfg/private/V0/invoke/replaceByExisting",g.existingRefPID=I.existingRefPID):"replaceByNewRevision"===I.replaceType?l="dsmfg/private/V0/invoke/replaceByNewRevision":"replaceByNew"===I.replaceType?l="dsmfg/private/V0/invoke/replaceByDuplicate":c(m,s.getNLSValue("InvalidReplaceOperation",null,"Error","Title"),null,I,p),u=function(t,o){var i;e.is(o)&&e.is(o.message,"string")?((i=s.getNLSValue(o.message,null,"Error","Title"))==="Error."+o.message+".Title"&&(i=s.getNLSValue(I.replaceType,null,"Error","Title"),n.debug(o.message)),c(m,i,null,I,p)):c(m,s.getNLSValue(I.replaceType,null,"Error","Title"),null,I,p)},"replaceByLatest"===I.replaceType?h=s.getNLSValue("Dialog.ReplaceByLatest.Report"):"replaceByExisting"===I.replaceType?h=s.getNLSValue("Dialog.ReplaceByExisting.Report"):"replaceByNewRevision"===I.replaceType?h=s.getNLSValue("Dialog.ReplaceByNewRevision.Report"):"replaceByNew"===I.replaceType&&(h=s.getNLSValue("Dialog.ReplaceByNew.Report")),d=function(o){var a,l,c,u,d=[],g=[],S=n.getBehavior("UXFactoryBehavior"),y=i.getConnectionParser(),P=[],b=[],C=[],v={silentMode:!1,stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[],onComplete:function(t){e.is(I.showReport)&&!I.showReport||S.showMessage(h,{messages:r,token:p});const o={instancesAndReferences:P,connections:b,deletedObjects:C};n.notify("updateBIModelFromServerResponse",o),e.is(I.onComplete)&&I.onComplete(t),n.notify("stopProgress",m),n.log(f+" "+s.getNLSValue("completed"),p)},onFailure:function(){e.is(I.onComplete)&&I.onFailure()}},A=o.failed,N=Object.keys(A);N.forEach((function(e){var t=A[e];(d=Object.keys(t)).forEach((function(e){r.push(t[e].message)}))})),e.is(o.warning)?(c=o.warning.message,e.is(c)&&(n.notify("stopProgress",m),S.showConfirmation(s.getNLSValue("Confirmation.AreYouSure"),c,null,(function(n){var o,i,s,a=[],l=[],c=[],u=I.instancePIDs,g=I.rootMfgPIDs,f=I.scopedParentPrdRefIDs;if(e.is(n,"boolean")&&n)if(I.replacementChecks=!1,d.length>0){for(let e=0;e<u.length;e++)o=u[e],0!==d.indexOf(o)&&(i=f[e],s=g[e],a.push(o),l.push(i),c.push(s));I.instancePIDs=a,I.scopedParentPrdRefIDs=l,I.rootMfgPIDs=c,a.length>0?t(I,r):S.showMessage(h,{messages:r,token:p})}else t(I,r)})))):(l=o.succeeded,Object.keys(l).forEach((function(e){var t=l[e];Object.keys(t).forEach((function(e){var n=t[e];n.instancesAndReferences.forEach((function(e){u=e.attributesValue,Object.prototype.hasOwnProperty.call(u,"isInstanceOf")?v.stackedInstances.push(u):(g.push(u.PID),v.stackedReferences.push(u)),P.push(e)})),n.connections.forEach((function(e){y.parse(e,v),b.push(e)})),v.deletedObjects=v.deletedObjects.concat(n.deletedObjects),C=v.deletedObjects,r.push(n.message)}))})),n.notify("replaced",{}),a=function(){i.addToCollections(v)},i.fetchRefList(g,{onComplete:a}),0===g.length&&N.length>0&&(n.notify("stopProgress",m),!e.is(I.showReport)||I.showReport?S.showMessage(h,{messages:r,token:p}):I.onFailure(r)))},a.webServiceRequest({url:l,method:"POST",headers:a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(g),onFailure:u,onTimeout:u,onCancel:u,onComplete:d})},{listenTo:function(){return{}},onStart:function(e){e||{}},onStop:function(){},replace:function(t,a,c,u,d,g){var f,p,h,m=e.is(c)?c:o.getSelectionsWithPaths(n.getId()),I=new Set,S=[],y=!0,P=[],b=[],C=[];if(e.is(m)&&m.length>0){for(let e=0;e<m.length;e++)if(m[e].length>0){m=m[e];break}let o=new Set;m.forEach((function(t){const{path:n}=t;for(h=(t=>{let n=null;const o=t.length>0?t[0]:null;e.is(o)&&(n=i.getInstance(o).get("isAggregatedBy"));return n})(n),o.add(h),S.push(h),p=0;p<n.length-1;p++)I.add(n[p]);let r=[];r.push(h),o=n.reduce((function(t,n){const o=i.getReferenceIdFromInstance(n);return e.is(o)&&(t.add(o),r.push(n),r.push(o)),t}),o),C.push(r.join(","))})),y=m.every((function(e){return f=e.id,!I.has(f)})),o.has(a)&&(y=!1);let c=i.getReferenceModel(h);if(e.is(c)&&e.is(c._attributes)){let e=c._attributes.type+".V_ContextualImplementLink";if("TRUE"===c._attributes[e])return void n.warn(s.getNLSValue("Replace.CILModeUnsupported"))}if(y){let n={};m.forEach((function(t){let o,s,a=null,l="NoScope";const{path:c,id:u}=t;P.push(u),o=r.getScopedParent(c),e.is(o)&&o.length>0&&(s=r.getScopeLinksOfImplementing(o),a=s[0].get("to")),b.push(a);const d=i.getReferenceIdFromInstance(u),g=r.isScoped(d);if(e.is(g)&&g)l="FullScope";else{const t=r.isPartialScoped(d);e.is(t)&&t&&(l="PartialScope")}n[u]={typeOfScope:l}})),l({instancePIDs:P,scopedParentPrdRefIDs:b,replaceType:t,existingRefPID:a,rootMfgPIDs:S,replacementChecks:!0,RIRPaths:C,showReport:u,onComplete:d,onFailure:g,instancesInfo:n},[])}else n.warn(s.getNLSValue("Error.replaceDirectOrIndirectChild.Title"))}}}}}})),define("DS/DELPPWItemViewBehaviors/ColumnManagers/RPColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return function(t,n){const o=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},i=o("DatabasePlugin"),r=o("ResourcePlugin"),s=o("DicoPlugin");return{displayType:"RP_USAGE",isTrasientColumn:!0,isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e,t){return e.editionPolicy="EditionInPlace",e.setCellValue=this.setRPValue.bind(null,t),e.typeRepresentation="enumString",e.getCellSemantics=this.getCellSemantics,e.hasCellValue=this.hasCellValue,e.getCellEditableState=this.getCellEditableState,e.editableFlag=!1,e.groupableFlag=!1,e},hasCellValue:function(e){return 0===e.nodeModel.getAbsolutePath().length},getCellTypeRepresentation:function(e){var t="string";return e.isHeader?"string":("Preferred"===e.dataIndex&&(t="functionIcon"),t)},getCellClassName:function(e){return""},getCellValue:function(e){return"RP_NONE"},getCellSemantics:function(e){var t=e.nodeModel._type,n={};return s.isAKindOf(t,"Drawing")?(n[r.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",n[r.getNLSValue("ResultingProduct.Overload.2D")]="2D"):"3D"===e.cellModel?(n[r.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",n[r.getNLSValue("ResultingProduct.Overload.EIN")]="EIN",n[r.getNLSValue("ResultingProduct.Overload.3D-EIN")]="3D-EIN",n[r.getNLSValue("ResultingProduct.Overload.3D")]="3D"):(n[r.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",n[r.getNLSValue("ResultingProduct.Overload.EIN")]="EIN",n[r.getNLSValue("ResultingProduct.Overload.3D-EIN")]="3D-EIN"),{possibleValues:n,valueType:"enumCustom"}},setRPValue:function(e,t,o){var s,a,l,c=n.getBehavior("ProductImplementBehavior"),u=t.nodeModel.options.grid.cellInfo.rpConnectionFakeID,d=e.dataIndex,g=t.cellModel,f={},p={onFailure:function(){t.nodeModel.setAttribute(e.dataIndex,g),l=r.getNLSValue("ResultingProduct.setOverload.Failure"),n.warn(l,s),n.debug(l),n.notify("stopProgress",f)}};if(g!==o)return e?(n.notify("startProgress",f),s=n.log(r.getNLSValue("ResultingProduct.setOverload")),void c.updateDataMaterializationLinkUsage(t.nodeModel.options.grid.cellInfo.rpConnectionPID,o,p).then((function(){i.addConnection({PID:u,V_usage:o}),t.nodeModel.setAttribute(d,o),a=r.getNLSValue("ResultingProduct.setOverload.Success",{Overload:o}),n.info(a,s),n.notify("stopProgress",f)}))):void 0},getCellEditableState:function(e){return!0}}}})),define("DS/DELPPWItemViewBehaviors/MfgItemQuantityGroupingBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:[],creator:function(){var t;return t=function(t,n,o){var i=!1,r=o.getTreeDocument();if(e.is(t)&&!r.isGroupingNodeModel(t)&&n.length>0&&Array.isArray(n)&&n.length>0&&(i=n.some((e=>{var t=!1;return(e.contains("V_ContQuantity")||e.contains("V_Quantity"))&&(t=!0),t}))),i&&e.is(t)){let e=t.getParent();if(r.isGroupingNodeModel(e)&&"referenceID.reference"===e.getProperty()){let t=e.getRowID();o.updateRenderedRow(t,{updateCellContent:!0})}}},{listenTo:function(){return{}},onStart:function(){},onStop:function(){},manageGroupingNodeUpdate:function(e,n,o){return t(e,n,o)}}}}})),define("DS/DELPPWItemViewBehaviors/GroupingViewBehavior/AbstractGroupingClass",[],(function(){"use strict";return function(){return{group:function(){},ungroup:function(){}}}})),define("DS/DELPPWItemViewBehaviors/AltSubBehavior/AltSubBIBehavior",["UWA/Core","UWA/Promise"],(function(e,t){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin"],creator:function(n,o,i,r){var s,a,l,c,u,d,g,f,p,h,m,I,S,y,P,b,C,v,A,N,M="#FFA500",D="#56B4E9",E="#008000",R="#F0E442",B="#CC79A7",L="Alternate",V="RefSubst",O="InstSubst",w={EMPTY:{colorCode:"transparent",label:""},NO_ENG_ALTERNATES:{colorCode:M,label:r.getNLSValue("AltSubBI.noEngAlternate")},NO_MFG_OR_ENG_ALTERNATES_OR_SUBSTITUTES:{colorCode:M,label:r.getNLSValue("AltSubBI.noMfgOrEngAlternateOrSubstitute")},EBOM_HAS_ENG_ALTERNATE:{colorCode:D,label:r.getNLSValue("AltSubBI.ebomHasEngAlternate")},MBOM_HAS_ENG_ALTERNATE:{colorCode:D,label:r.getNLSValue("AltSubBI.mbomHasEngAlternate")},HAS_MFG_ALTERNATE:{colorCode:E,label:r.getNLSValue("AltSubBI.hasMfgAlternate")},HAS_MFG_SUBSTITUTE:{colorCode:R,label:r.getNLSValue("AltSubBI.hasMfgSubstitute")},HAS_MFG_SUBSTITUTE_AND_MFG_ALTERNATE:{colorCode:B,label:r.getNLSValue("AltSubBI.hasMfgSubstituteAndMfgAlternate")}},T=!1;return a=function(){return s.indexOf("PROCESS")>-1||s.indexOf("SERVICE")>-1||s.indexOf("CONSTRUCTION")>-1},l=function(){return s.indexOf("PART")>-1||s.indexOf("PRODUCT")>-1},c=function(e,t,n){e.has(t)?e.set(t,e.get(t).concat(n)):e.set(t,[n])},u=function(e){return{AltSubBI:{colorCode:e.colorCode,tooltip:e.label},altSubBIComputed:e!==w.EMPTY}},d=function(t){return t.filter((function(t){var n=!0,o=t.options;return e.is(o.altSubBIComputed,"boolean")&&(n=!o.altSubBIComputed),n}))},g=function(e,t){var n;return n={PrimaryItemPhysicalId:e},t.length>0&&(n.SubstituteInstancePhysicalId=t),n},f=function(e,t){var n=o.getBehavior("WUXNodeModelBehavior");n.prepareUpdate(),e.forEach((function(e){var n=t(e.getReferencePID(),e.getInstancePID());e.updateOptions(u(n))})),n.pushUpdate()},p=function(e,t){o.getBehavior("WUXNodeModelBehavior").updateNodeOptions(e,u(t))},h=function(n,o){var r={alternateRefIds:new Set,referenceSubstInfoMap:new Map,instanceSubstInstIdMap:new Map};return new t((function(t,s){i.getAlternateEnggItemInfoPromise(n,o).then((function(n){Object.keys(n).forEach((function(t){var o,i,s=n[t];e.owns(s,"Alternate")&&r.alternateRefIds.add(t),e.owns(s,"ReferenceSubstitute")&&(o=e.owns(s,"referenceIds")?s.referenceIds:[],r.referenceSubstInfoMap.set(t,o)),e.owns(s,"InstanceSubstitute")&&(e.owns(s,"instanceIds")&&(i=s.instanceIds),Array.isArray(i)&&i.forEach((function(e){r.instanceSubstInstIdMap.set(e,t)})))})),t(r)})).catch((function(e){s(e)}))}))},m=function(n){var o=new Map;return new t((function(t,r){var s,a,l;s=["Proposed","Qualified"],l=i.groupingBy(n,(function(e){return e.getReferencePID()}),(function(e){return e.isRoot()?[]:[e.getInstancePID()]})),a=Array.from(l.keys()).map((function(e){var t=l.get(e);return g(e,t)})),h(a,s).then((function(i){n.forEach((function(t){var n=null,r=t.getReferencePID(),s=null;t.isRoot()||(s=t.getInstancePID()),i.alternateRefIds.has(r)?n=L:i.referenceSubstInfoMap.has(r)?i.referenceSubstInfoMap.get(r).includes(t.getParent().getReferencePID())&&(n=V):e.is(s)&&i.instanceSubstInstIdMap.has(s)&&(n=O),e.is(n)&&o.set(s||r,{referenceId:r,absPath:t.getAbsolutePath(),parentId:t.isRoot()?null:t.getParent().getReferencePID(),alternateType:n})})),t(o)})).catch((function(e){r(e)}))}))},I=function(){return new t((function(e){e({havingMfgAlternates:y(),havingMfgSubstitutes:P()})}))},S=function(e){var t;return t=e.map((function(e){var t=e.isRoot()?null:e.getInstancePID();return{referenceId:e.getReferencePID(),instanceId:t}})),i.getMultipleAltSubContextProductsPromise(t)},y=function(){return i.findConnections({type:"MfgProcessAlternate"}).map((function(e){return e.get("from")}))},P=function(){return i.findConnections({type:"DELFmiMfgSubstituteCnx"}).map((function(e){return e.get("from")}))},b=function(t){m(t).then((function(n){f(t,(function(t,o){var i=e.is(o)?o:t;return n.has(i)?w.EBOM_HAS_ENG_ALTERNATE:w.NO_ENG_ALTERNATES})),o.notify("AltSubBIDone",o.getId())})).catch((function(e){f(t,(function(){return w.NO_ENG_ALTERNATES})),o.warn(r.getNLSValue("AltSubBI.errorMsg")),o.log("Error: "+e)}))},C=function(t){I().then((function(e){var n;return f(t,(function(t,n){var o=e.havingMfgAlternates.includes(t),i=e.havingMfgSubstitutes.includes(n);return o?i?w.HAS_MFG_SUBSTITUTE_AND_MFG_ALTERNATE:w.HAS_MFG_ALTERNATE:i?w.HAS_MFG_SUBSTITUTE:w.NO_MFG_OR_ENG_ALTERNATES_OR_SUBSTITUTES})),n=t.filter((function(t){return!e.havingMfgAlternates.includes(t.getReferencePID()&&!e.havingMfgSubstitutes.includes(t.getInstancePID()))})),S(n)})).then((function(t){var n,r,s,a,l=Object.keys(t),u=new Map,d=new Map;l.length>0&&(a=l.map((function(e){return t[e]})),l.forEach((function(n){var o=t[n];e.is(o.instanceId)&&c(d,o.instanceId,n),c(u,o.referenceId,n)})),n=["Proposed","Qualified"],r=i.groupingBy(a,(function(e){return e.referenceId}),(function(t){return e.is(t.instanceId)?[t.instanceId]:[]})),s=Array.from(r.keys()).map((function(e){var t=r.get(e);return g(e,t)})),h(s,n).then((function(e){var t,n=new Set,i=new Set,r=new Set;e.alternateRefIds.forEach((function(e){u.has(e)&&u.get(e).forEach((function(e){n.add(e)}))})),e.referenceSubstInfoMap.forEach((function(e,t){u.has(t)&&u.get(t).forEach((function(e){i.add(e)}))})),e.instanceSubstInstIdMap.forEach((function(e,t){d.has(t)&&d.get(t).forEach((function(e){r.add(e)})),u.has(e)&&u.get(e).forEach((function(e){r.add(e)}))})),t=Array.from(n).concat(Array.from(i),Array.from(r)),p(t,w.MBOM_HAS_ENG_ALTERNATE),o.notify("AltSubBIDone",o.getId())})))})).catch((function(e){f(t,(function(){return w.NO_MFG_OR_ENG_ALTERNATES_OR_SUBSTITUTES})),o.warn(r.getNLSValue("AltSubBI.errorMsg")),o.log("Error: "+e)}))},v=function(e){var t=d(e);t.length>0&&(l()?b(t):a()&&C(t))},A=function(){var t,n=o.getBehavior("WUXNodeModelBehavior"),r=n.getAllDescendants();r.length>0&&(n.prepareUpdate(),t={callback:function(t,n){f(t,(function(){return w.EMPTY})),e.is(n,"function")&&n()},globalArray:r,context:this,blockSize:100},i.getExecuteByBlockPromise(t).then((function(){n.pushUpdate(),o.notify("AltSubBICleared",o.getId())})).catch((function(e){n.pushUpdate(),o.log("An error occured:"+e)})))},N=function(e){var t=o.getBehavior("WUXNodeModelBehavior");(a()||l())&&(!0===(T=e.state)?v(t.getVisibleNodesInViewport()):A())},{listenTo:function(){return{BIAltSub:N}},onStart:function(e){s=e.pprTypes},onStop:function(){},isCmdActive:function(){return T},showBIStatus:function(e){v(e)},getStatusEnum:function(){return w}}}}})),define("DS/DELPPWItemViewBehaviors/ItemUXBehavior/ImplementUI",["UWA/Core"],(function(e){"use strict";return function(t,n){var o,i,r,s,a,l,c,u,d,g,f,p,h,m,I,S,y,P,b,C,v,A,N,M,D=null,E=[],R=null,B=[],L=[],V=null,O=null,w=null,T=null,U=null,x=null,W=null,F=null,k=null,j=null,_=[],G=[],X=[];return I=function(){var t=a.getNLSValue("ImplementUI.Implementing"),n=a.getNLSValue("ImplementUI.SelectImplementing"),l=a.getNLSValue("ImplementUI.Implemented"),c=a.getNLSValue("ImplementUI.SelectImplemented");R=s.createElement("div",{class:"ImplementUI-Container"}),V=s.createElement("div",{class:"selectionForm-Main-Container"}).inject(R),!0===o.implementingSection&&(r=s.create("SelectionControl",{title:t,message:n,renderTo:V,multiSelection:e.is(o.multiSelectionOfImplementing)?o.multiSelectionOfImplementing:null})),!0===o.implementedSection&&(i=s.create("SelectionControl",{title:l,message:c,renderTo:V,multiSelection:!e.is(o.multiSelectionOfImplemented)||o.multiSelectionOfImplemented})),!0===o.optionsSection&&(O=s.createElement("div",{class:"options-section-container"}).inject(R),C()),k=s.createElement("div",{class:"dcForm-Main-Container"}).inject(R)},S=function(t){var n,o=t.newObjType,i=t.newObjDimensionType,r=t.cmdTitle;return e.is(i)?n=a.getNLSValue(r,{dimension:a.getNLSValue(i,null,"Dimension")}):e.is(o)?(-1!==o.indexOf("/")&&(o=o.split("/")[1]),n=a.getNLSValue(r,{type:a.getNLSValue(o||"",null,"Type")})):n=a.getNLSValue(r),n},y=function(t){var i,r,a,l=null,c=null,u="PLMEntity.V_Name";o=t,I(),(D=s.create("Dialog",{title:S(o),domId:o.cmdId,content:R,resizableFlag:!0,modalFlag:o.modalFlag,buttons:{Cancel:s.create("Button",{onClick:function(){D.close()}}),Ok:s.create("Button",{disabled:!e.is(i)||i,emphasize:"primary",onClick:function(){var t,i,s={};if(e.is(F)&&!0===n.getPreferenceValue("showDialog")){if(!0!==(a=F.validate()).result)return D.error(a.message),void(D.buttons.Ok.disabled=!1);for(l=F.getValues(),e.is(o.newObjDimensionType)&&(l["DELFmiMagnitudeExt.V_DimensionType"]=o.newObjDimensionType),c=F.getSecurityContextOverride(),l[u]!==E[0][u]&&(i=l[u]),t=0;t<E.length;t++)e.merge(E[t],l);if(i)if(E.length>1)for(t=0;t<E.length;t++)E[t][u]=i+"_"+(t+1);else E[0][u]=i}else if(e.is(o.newObjType)){if(e.is(L,"array"))for(t=0;t<L.length;t++)(l={}).V_Type=o.newObjType,E[t]=l}else E=null;r=e.clone(E),s.securityContextOverride=c,s.implementingId=j,s.implementedIDs=G,s.implementedPaths=X,s.implementingPaths=_,s.newObjAttributes=r,s.isInstancePossible=e.is(o.isInstancePossible)?o.isInstancePossible:null,s.cmdAction=e.is(o.cmdAction)?o.cmdAction:null,!0===o.optionsSection&&("ComboBox"===o.scopeOption?s.scopeCreation=T.value:"Toggle"===o.scopeOption&&(s.scopeCreation=T.checkFlag),e.is(o.mfgItemPrefix)&&o.mfgItemPrefix&&(s.mfgItemPrefix=U.value),e.is(o.mfgItemResultReport)&&o.mfgItemResultReport&&(s.resultReportMode=x.value),e.is(o.skipOpennessOption,"boolean")&&!0===o.skipOpennessOption&&(s.skipOpenness=W.checkFlag)),o.onOKCallBack(s)}})}})).close=function(){P()}},b=function(){e.is(h)&&h.destroy(),e.is(F)&&(F.destroy(),F=null)},P=function(){D.destroy(),b(),k=null,O=null,w=null,T=null,j=null,G=[],X=[],_=[],D=null,R=null,o.onCancelCallback&&o.onCancelCallback()},C=function(){var t;if(w=s.createElement("div",{class:"Basic-Section-container"}).inject(O),t=s.create("Accordeon",{items:[{header:a.getNLSValue("Expander.Options"),content:w,expandedFlag:!0}],style:"filled-separate"}).inject(O),e.is(o.scopeOption)&&(g=s.createElement("div",{class:"scope-option-container"}).inject(w),s.createElement("div",{class:"wux-title-textElement",text:a.getNLSValue("ImplementUI.CreateScopeForChildren")}).inject(g),g.tooltipInfos=new d({shortHelp:a.getNLSValue("ImplementUI.CreateScopeForChildren")}),"ComboBox"===o.scopeOption&&(T=s.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:a.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"},{labelItem:a.getNLSValue("ImplementUI.ScopeCreation.LeafScope"),valueItem:"Leaf"}]}).inject(g))),e.is(o.mfgItemPrefix)&&o.mfgItemPrefix&&(f=s.createElement("div",{class:"mfgItemPrefix-option-container"}).inject(w),s.createElement("div",{class:"wux-title-textElement",text:a.getNLSValue("ImplementUI.PrefixForMfgItems")}).inject(f),f.tooltipInfos=new d({shortHelp:a.getNLSValue("ImplementUI.PrefixForMfgItems")}),U=s.create("LineEditor",{placeholder:a.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder")}).inject(f)),e.is(o.mfgItemResultReport)&&o.mfgItemResultReport&&(p=s.createElement("div",{class:"resultReport-option-container"}).inject(w),s.createElement("div",{class:"wux-title-textElement",text:a.getNLSValue("ImplementUI.ResultReport")}).inject(p),p.tooltipInfos=new d({shortHelp:a.getNLSValue("ImplementUI.ResultReport")}),x=s.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:a.getNLSValue("ImplementUI.ResultReport.FullReport"),valueItem:"full_report"},{labelItem:a.getNLSValue("ImplementUI.ResultReport.ErrorReportOnly"),valueItem:"erroronly_report"},{labelItem:a.getNLSValue("ImplementUI.ResultReport.NoReport"),valueItem:"no_report"}]}).inject(p)),e.is(o.skipOpennessOption,"boolean")&&!0===o.skipOpennessOption){const e=s.createElement("div",{class:"openness-option-container"}).inject(w);(W=s.create("Toggle",{type:"checkbox",checkFlag:!1,label:a.getNLSValue("ImplementUI.SkipOpenness")})).inject(e)}return t},A=function(e,t){D.title=S(o),t.inject(R),D.clearMessages()},v=function(){G.length>0&&(!0===o.implementingSection?e.is(j)?D.buttons.Ok.disabled=!1:D.buttons.Ok.disabled=!0:D.buttons.Ok.disabled=!1)},N=function(t){var n,o,i=[];if(e.is(t,"array"))for(n=0;n<t.length;n++)o=t[n].get("PLMEntity.V_Name"),i.push(o);return i},M=function(){var e;!0===o.checkForImplementingScope&&("ResultingProduct"===o.linkType?u.isResultingLinked(j):u.isScoped(j))&&(e=a.getNLSValue(a.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:m})),D.error(e))},s=n.getBehavior("UXFactoryBehavior"),d=s.getComponent("TooltipModel"),a=t.getPlugins("ResourcePlugin").instance,l=t.getPlugins("DatabasePlugin").instance,c=t.getPlugins("SelectionPlugin").instance,u=t.getPlugins("ProductImplementPlugin").instance,{createUI:function(e){y(e)},isVisible:function(){return!!e.is(D)&&D.visibleFlag},destroyUI:function(){e.is(D)&&D.close()},updateImplemented:function(e){var t=[],n=[],r=[];B=e,X=[],G=[],D.clearMessages(),0!==e.length&&(e.forEach((function(e){n.push(e.id),r.push(e.path),t.push(l.getReferenceModel(e.id))})),i.updateLabel(t),L=N(t),!0===o.multiSelectionOfImplemented?(G=n,X=r):1===e.length?(G=[n[0]],X=[r[0]]):(D.buttons.Ok.disabled=!0,b()),v(),M())},getImplementedIDs:function(){return G},updateImplementing:function(t){var n=[],i=[],s=[];j=null,_=[],D.clearMessages(),0!==t.length&&(t.forEach((function(e){i.push(e.id),s.push(e.path),n.push(l.getReferenceModel(e.id))})),!1===r.updateLabel(n)?D.buttons.Ok.disabled=!0:(e.is(B,"array")&&this.updateImplemented(B),!0===o.multiSelectionOfImplementing||(1===t.length?(j=i[0],_=[s[0]],m=n[0].get("PLMEntity.V_Name")):(D.buttons.Ok.disabled=!0,b())),v(),M()))},getImplementingID:function(){return j},showDCFormForAssign:function(t){var n;if(e.is(j)&&G.length>0)if(o.isInstancePossible=t,!0===t){if(E=[],e.is(L,"array"))for(n=0;n<L.length;n++)E.push({"PLMEntity.V_Name":L[n]});e.is(F)?F.updateToDefaultValues(E[0]):F=s.create("DataCollectionUI",{type:o.newObjType,onTypeChange:A,renderTo:k,defaultValues:E})}else b()},showDCFormForCreate:function(t){var n;if(G.length>0){if(E=[],e.is(L,"array"))for(n=0;n<L.length;n++)E.push({"PLMEntity.V_Name":L[n]});e.is(F)?F.updateToDefaultValues(E[0]):F=s.create("DataCollectionUI",{type:o.newObjType,onTypeChange:A,renderTo:k,defaultValues:E,createRoot:!!e.is(t)&&t})}},getSelectionsWithPaths:function(){var e={},t=c.getSelectionsWithPaths(n.getId());return e.selNodes=[],e.bUpdateImplemented=!1,e.bUpdateImplementing=!1,t.length<=0||(0!==t[0].length?(e.selNodes=t[0],e.bUpdateImplemented=!0,e.bUpdateImplementing=!1):0!==t[1].length&&(e.selNodes=t[1],e.bUpdateImplemented=!1,e.bUpdateImplementing=!0)),e},showErrorMultipleImplementedSelected:function(e){i.showWarningMessage(e),X=[],G=[],D.buttons.Ok.disabled=!0},showMessages:function(e,t){"info"===t?D.info(e):"warning"===t?D.warning(e):"error"===t?D.error(e):n.debug("type of message is invalid")}}}})),define("DS/DELPPWItemViewBehaviors/ColumnManagers/AltSubMfgLabelColumnManager",["UWA/Core"],(function(e){"use strict";return function(){return{displayType:"IconText",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.typeRepresentation="url",e.className="icon-text-column",e.hasCellValue=this.hasCellValue,e.getCellValue=this.getCellValue,e},getCellValue:function(e){var t=e.nodeModel.options.grid;return{label:t[this.getColumnOrGroup(e.columnID).attribute.name],getLabel:function(){return this.label},icon:{iconPath:t.cellInfo.IconUrl,iconSize:{width:"22px",height:"22px"}}}},hasCellValue:function(){return!0}}}})),define("DS/DELPPWItemViewBehaviors/ColumnManagers/MfgItemMILColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return function(t,n){const o=(i=" ",(...e)=>e.join(i));var i;const r=function(){let e=new Map;return{generateFor:function(t){let n;return n=e.has(t)?e.get(t)+1:1,e.set(t,n),n}}},s="MIL_previous",a="MIL_rerouting",l="MIL_suggestion",c="MIL_status",u="success",d="fail",g=(f="SelectionPlugin",(p=t.getPlugins(f))&&p.instance?p.instance:null);var f,p;const h=t=>{let n=!1;var o;return e.is(t)&&(n=!0,o=t,e.is(o,"string")&&0===o.length&&(n=!1)),n},m=t=>n=>o=>{let i=!1;if(!o.isHeader){const r=o.nodeModel;if(e.is(r)){const o=r.getAttributeValue("cellInfo");if(e.is(o)){const e=o[t];i=n(e)}}}return i},I=m("candidateEntries")((e=>Array.isArray(e)&&e.length>1)),S=m("suggestionToPerformEntries")((e=>Array.isArray(e)&&e.length>0)),y=t=>{let n=!1;const o=t.options.milStatus;return e.is(o)&&(n=o===u),n};return{displayType:"CIM",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e,t){return e.editionPolicy="EditionInPlace",e.getCellTypeRepresentation=this.getCellTypeRepresentation,e.setCellValue=this.setMILValue.bind(null,t),e.getCellClassName=this.getCellClassName,e.getCellValue=this.getCellValue,e.getCellSemantics=this.getCellSemantics,e.hasCellValue=this.hasMILCellValue,e.getCellEditableState=this.getCellEditableState,e.groupableFlag=!1,e.getCellTooltip=this.getCellTooltip,e},hasMILCellValue:e=>!0,getCellTypeRepresentation(e){let t;if(e.isHeader)t="string";else switch(e.dataIndex){case s:t="url";break;case a:t=I(e)?"enumString":"string";break;case l:t=S(e)?"enumString":"string";break;default:t="string"}return t},getCellClassName(t){const n="",i="mil-success-status",r="mil-fail-status",a="icon-text-column",l=(e=>t=>e.cellView.getContent().hasClassName(t))(t);let g=n;if(e.is(t.nodeModel)){const e=t.nodeModel.options.milStatus,n=t.dataIndex;n===c?e===u?l(i)||(g=i):e===d&&(l(r)||(g=r)):(n===s&&(g=a),e===u&&(g=o(g,"mil-succeeded-row")))}return g},getCellValue(t){const n=(e,t)=>({label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}});let o=null;if(e.is(t.nodeModel)){const i=t.nodeModel.options.grid,r=t.dataIndex;switch(r){case s:if(e.is(i[r])&&!t.isHeader){const t=i.cellInfo;e.is(t)&&(o=n(i[r],t.PreviousProdIconUrl))}break;case a:case l:e.is(i[r])&&(t.isHeader||e.is(this.isCellInEdition,"function")&&(o=this.isCellInEdition(t.cellID)?i[r].value:i[r].label));break;default:o=i[r]}}return o},getCellSemantics(t){const n=t=>{const n=(e=>t=>{const n=e.generateFor(t);return o(t,"["+n+"]")})(new r);return t.reduce(((t,o)=>{const i=o.labelItem;if(e.owns(t,i)){t[n(i)]=o.valueItem}else t[i]=o.valueItem;return t}),{})};let i=null;if(e.is(t.nodeModel)){const o=t.nodeModel.options.grid,r=t.dataIndex;if(e.is(o)){const s=o.cellInfo;e.is(s)&&(r===a?I(t)&&(i={possibleValues:n(s.candidateEntries)}):r===l&&S(t)&&(i={possibleValues:n(s.suggestionToPerformEntries)}))}}return i},setMILValue(t,o,i){const r=t.dataIndex;if(e.is(o.nodeModel)){let t=o.nodeModel.options.grid;if(r===l){if(h(i)){let o=t.cellInfo;if(e.is(o)){let t=g.getModuleSelections(n.getId());const o=n.getBehavior("WUXNodeModelBehavior");t.forEach((function(t){!function(t,n,o){t.forEach((function(t){if(t.hasChildren())return;const i=l,r=t.options.grid.cellInfo;if(e.is(r)){const s=r.suggestionToPerformEntries.find((e=>e.valueItem===n));if(e.is(s)){const e={label:s.labelItem,value:s.valueItem,tooltip:s.tooltipItem,getLabel:function(){return this.label}};t.setAttribute(o,e),o===i&&(t.options.grid[i]!==e&&(t.options.grid[i]=e),r.action=n)}else{const e=t.options.grid[i];e&&(t.setAttribute(o,e),o===i&&(t.options.grid[i]!==e&&(t.options.grid[i]=e),r.action=e.value))}}}))}(o.getNodeModel(t.id,!1),i,r)}))}}}else if(r===a&&h(i)){let n=t.cellInfo;if(e.is(n)){const s=n.candidateEntries.find((e=>e.valueItem===i));if(e.is(s)){const e={label:s.labelItem,value:s.valueItem,tooltip:s.labelItem,getLabel:function(){return this.label}};o.nodeModel.setAttribute(r,e),t[a]!==e&&(t[a]=e)}if("#SELECT"===i)n.candidateId=null,n.candidateOccPath=null;else{const e=i.split(",");n.candidateId=function(e,t=null){const n=e.length;return n>0?e[n-1]:t}(e,""),n.candidateOccPath=e}}}}},getCellEditableState(t){let n;switch(t.dataIndex){case l:n=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;(y(e)||e.isExpanded()&&e.hasChildren())&&(n=!1)}return n})(t);break;case a:n=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;n=!y(e)&&I(t)}return n})(t);break;default:n=!1}return n},getCellTooltip(t){var n,o,i={longHelp:""};return o=t.cellModel,-1===t.columnID?this.getCellDefaultTooltip(t):(t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?i.longHelp="object"===e.typeOf(o)?o.getLabel():o:(n=t.nodeModel.options.grid[t.dataIndex],i.longHelp=e.is(n)?e.is(n.tooltip)?n.tooltip:n.getLabel():""),i)}}}})),define("DS/DELPPWItemViewBehaviors/GroupingViewBehavior/GroupingDialog",["UWA/Core"],(function(e){"use strict";return function(t,n,o){var i,r;return i=function(i){var s=e.createElement("div",{class:"Message-dialog-content-container"});(r=new(o.getComponent("ComboBox"))({elementsList:["type","current","organization","owner","V_NeedDedicatedSystem","isLastVersion","revision"],selectedIndex:0})).inject(s),n.create("Dialog",{title:"GROUPING DIALOG",content:s,minHeight:200,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Ok:n.create("Button",{onClick:function(e){var t=e.dsModel.dialog,n=r.value;t.close(),i(n)}}),Cancel:n.create("Button",{onClick:function(e){e.dsModel.dialog.close(),t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}})}}).close=function(){this.destroy(),null,t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}},{show:function(e){i(e)}}}})),define("DS/DELPPWItemViewBehaviors/AltSubBehavior/AltSubInfoContainer",[],(function(){"use strict";class e{constructor(e,t){this.ids=e,this.infoMap=new Map(t)}static empty(){return new e([],new Map)}addId(e){return this.ids.push(e),this}setInfo(e,t){return this.infoMap.set(e,t),this}combine(t){const n=this.ids.concat(t.ids),o=((...e)=>{let t=new Map;for(const n of e)for(const e of n)t.set(...e);return t})(this.infoMap,t.infoMap);return new e(n,o)}}return e})),define("DS/DELPPWItemViewBehaviors/GraphViewBehavior/GraphViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],(function(e,t,n){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","SelectionPlugin","DatabasePlugin","DicoPlugin","PlatformPlugin","WebServicePlugin","TreeViewPlugin","ProductImplementPlugin","ProcessImplementPlugin"],creator:function(o,i,r,s,a,l,c,u,d,g,f,p,h){const m="V_Name";var I,S,y,P,b,C,v,A,N,M,D,E={},R=s.getComponent("ETree"),B=s.getComponent("ETreeViewsFactory"),L=R.OrientationMode.ROOT_ON_TOP,V={paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0},O={height:"auto",useAsyncPreExpand:!1,isDraggable:!0,resize:{columns:!0},selection:{unselectAllOnEmptyArea:!0,toggle:!1,cells:!1,enableListSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0};return S=function(l){var g,f,S,P,b,C,v,A,N,M,w=i.getElement();e.is(w.getElementsByClassName,"function")&&(g=w.getElementsByClassName("graphView-container")[0])?(P=(C=l||{}).graphViewOptions?e.extend(O,C.graphViewOptions,!0):O,e.is(y,"array")&&(f=new t(o,i,s,r,a,d,c,u,p,h),N=function(t){var n,o,r,s={context:this,nodes:[]};return e.is(t)&&(t.isSelected()||t.select()),o={selectedNodes:I.getModel().getXSO().get()},n=f.buildContextualMenu(y,i.getAppContext(),o),0===o.selectedNodes.length&&(r=y.indexOf("ExploreInWebApp"))>=0&&(n[r].sensitivity="disabled"),s.nodes=n,s}),S={template:['<div class="etree-sync-node" draggable="true">','\t\t<div class="etree-sync-node-widget">','\t\t\t<div class="etree-sync-node-label">','\t\t\t\t<div class="etree-sync-node-color"></div>','\t\t\t\t<div class="etree-sync-node-label-content"></div>',"\t\t\t</div>",'    \t\t<div class="etree-sync-node-caption">','      \t\t<div class="etree-sync-node-icon"></div>','      \t\t<div class="etree-sync-node-moreinfo" data-egraph-subelt="moreinfo"></div>',"    \t\t</div>","  \t</div>",'\t\t<div class="etree-sync-node-collapse-expand" data-egraph-subelt="collapse-expand">','\t\t\t<div class="etree-sync-node-collapse-expand-spinner"></div>',"  \t</div>","</div>",'<div class="etree-sync-temp-node">',"</div>",'<div class="etree-sync-group">',"</div>"].join("\n"),onmodifyDisplay:function(t){var n,o,r,s,l,c,d,g=[{dicoType:"PLMEntity",dataIndex:m,entity:"reference"}],f=!1,p=e.is(E)?E:{},h=t.nodeView,I=t.nodeModel,S=i.getBehavior("WUXNodeModelBehavior"),y=i.getBehavior("TreeListViewBehavior");if(e.is(S)&&e.is(I)&&(f=S.isFakeNodeModel(I)),I.options.isBeingCut?h.classList.add("is-being-cut"):h.classList.remove("is-being-cut"),d=h.querySelector(".etree-sync-node-color"),e.is(D)&&D&&e.is(I.options.taggerColor)?(h.classList.add("colorized"),d.style.backgroundColor=I.options.taggerColor):h.classList.remove("colorized"),(d=h.querySelector(".etree-sync-node-icon")).classList.remove("hidden"),I.options.icons&&I.options.icons.length>0?(d.style.backgroundImage='url("'+I.options.icons[0]+'")',d.style["background-size"]="22px 22px"):d.classList.add("hidden"),(d=h.querySelector(".etree-sync-node-moreinfo")).classList.remove("hidden"),d.classList.add("hidden"),e.is(p.Color)&&(d=h.querySelector(".etree-sync-node-widget"),n=e.is(p.Color.dicoType)?p.Color.dicoType+"."+p.Color.dataIndex:p.Color.dataIndex,o=e.is(p.Color.entity)?n+"."+p.Color.entity:n,c=p.Color.colorDef,r=I.options.grid[o],e.is(r)&&e.is(c[r])&&!I.isSelected()?d.style.background=c[r].code:d.style.background=""),d=h.querySelector(".etree-sync-node-label-content"),e.is(p.Content)&&e.is(p.Content[I._type])&&(g=p.Content[I._type]),d.innerHTML="",f&&e.is(y)){const e=I.getProperty(),t=y.getDataGridView().getColumnOrGroup(e),n=document.createElement("div");n.textContent=t.text+" : "+I.getLabel(),d.appendChild(n)}else g.forEach((function(t){var n=e.is(t.dicoType)?t.dicoType+"."+t.dataIndex:t.dataIndex,o=e.is(t.entity)?n+"."+t.entity:n;r=I.options.grid[o],l=u.getAttributeInfo(n),s=a.getNLS(l);const i=document.createElement("div");i.textContent=s+" : "+r,d.appendChild(i)}))}},C=e.extend(P,{orientation:L,contextCallback:N,fittingArea:V,nodeView:B.generateNodeView(S)}),M=function(t,n){var o=i.getBehavior("DropZoneViewBehavior"),r=i.getBehavior("WUXNodeModelBehavior");e.is(o)&&(o.setIcon(t),e.is(r)&&(!0!==n||r.isDocumentEmpty()||o.hide()))},(I=new R.SyncEGraphTree(g,C)).treeContainer.ondragenter=function(){var t=i.getBehavior("DropZoneViewBehavior");e.is(t)&&M(t.iconEnum.PLUS,!1)},I.treeContainer.ondragleave=function(){var t=i.getBehavior("DropZoneViewBehavior");e.is(t)&&M(t.iconEnum.DROPHERE,!0)},I.treeContainer.ondrop=function(){var t=i.getBehavior("DropZoneViewBehavior");e.is(t)&&M(t.iconEnum.DROPHERE,!0)},"function"==typeof w.getElementsByClassName&&w.getElementsByClassName("drop-zone-container")[0]&&(I.widget.sm.rootState.actions.insert=function(){},I.widget.sm.rootState.movePredicate=function(){return!1},A=I.container.getElementsByClassName("egraph_views_RootLayer"),e.is(A)&&A.length>=1&&(v=A[0],e.is(v)&&(b={dropZone:v,acceptedTypes:l.pprTypes},new n(o,i,r,c,u).init(b)))),I.createOverview(),I.swapOverviewVisibility()):i.debug("graph Container not defined.")},P=function(){var t;return t=f.getCurrentView(),!(!e.is(t[i.getId()].currentView)||"graphView"!==t[i.getId()].currentView)},b=function(t){g.getXMLValues(t,(function(t){var n,o,i="BOMView";if(e.is(t.Config.Preferences[i])&&(e.is(t.Config.Preferences[i].Color)&&(E.Color=t.Config.Preferences.BOMView.Color.AttributeDefinition,E.Color.colorDef=t.convert("Config.Preferences.BOMView.Color.ColorDefinition","value")),e.is(t.Config.Preferences[i].Content)))for(n in E.Content={},o=t.convert("Config.Preferences.BOMView.Content.Type","name"))Object.prototype.hasOwnProperty.call(o,n)&&(E.Content[n]=Array.isArray(o[n].Row)?o[n].Row:[o[n].Row]);v()}),(function(){i.debug("Failed to get"+t+"XML configuration file")}))},v=function(){var t,n={boAttrName:[],roAttrName:[],otherAttrName:[]};t=A(),e.is(t)&&(t.reference&&(n.boAttrName=n.boAttrName.concat(t.reference)),t.instance&&(n.roAttrName=n.roAttrName.concat(t.instance))),c.setSelectPredicate(i.getId(),n)},A=function(t){var n,o={},i=[];return e.is(E)&&(e.is(E.Color)&&(n=e.is(E.Color.dicoType)?E.Color.dicoType+"."+E.Color.dataIndex:E.Color.dataIndex,e.is(E.Color.entity)&&(e.is(o[E.Color.entity])||(o[E.Color.entity]=[]),o[E.Color.entity].indexOf(n)<0&&o[E.Color.entity].push(n))),e.is(t)?e.is(E.Content)&&e.is(E.Content[t])&&i.push(t):e.is(E.Content)&&Object.keys(E.Content).forEach((function(e){i.push(e)})),i.forEach((function(t){E.Content[t].forEach((function(t){n=e.is(t.dicoType)?t.dicoType+"."+t.dataIndex:t.dataIndex,e.is(t.entity)&&(e.is(o[t.entity])||(o[t.entity]=[]),o[t.entity].indexOf(n)<0&&o[t.entity].push(n))}))}))),o},N=function(t){var n,o,i=t.type,r={icons:"",label:"",grid:{},useAsyncPreExpand:!0},s=[],a=".reference";for(n in s=A(i),s=e.is(s.reference)?s.reference:[],t)Object.prototype.hasOwnProperty.call(t,n)&&(o=t[n],e.is(o)&&"NULL"!==o&&(s&&s.indexOf(n)>=0?r.grid[n+a]=t[n]:"PID"===n?r.referencePID=t[n]:"type"===n&&(r.referenceType=t[n]),n.contains(m)&&(r.grid[n+a]=t[n])));return r},M=function(t,n){var o,i,r=[],s=N(t);for(o in r=A(t.type),r=e.is(r.instance)?r.instance:[],n)Object.prototype.hasOwnProperty.call(n,o)&&(i=n[o],e.is(i)&&"NULL"!==i&&(r&&r.indexOf(o)>=0?s.grid[o+".instance"]=n[o]:"PID"===o&&(s.instancePID=n[o])));return s},{viewName:"graphView",listenTo:function(){return{Reframe:this.reframeAll,ReframeOn:this.reframeOn,ToggleOrientation:this.toggleOrientation,ToggleOverview:this.toggleOverview}},onStart:function(t,n){t=t||{},e.is(t.views)&&e.is(t.views.graphView)&&(y=t.views.graphView.contextualCommands),S({pprTypes:t.pprTypes,graphViewOptions:t.graphViewOptions}),e.is(t.views.graphView.configXML)&&b(t.views.graphView.configXML),!0===(C=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&f.registerViewforWidgetLayout({viewID:i.getId(),viewType:this.viewName}),n()},onStop:function(){I.container.remove(),I=void 0,!0===C&&f.unregisterViewforWidgetLayout(i.getId(),this.viewName)},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=N(t.toJSON())),n},getInstanceNodeOptions:function(t,n){var o;return e.is(t)&&e.is(n)&&(o=M(t.toJSON(),n.toJSON())),o},setModel:function(t){i.debug("set model on Graph View"),e.is(I)&&I.setModel(t)},getModel:function(){var t=void 0;return e.is(I)&&(t=I.getModel()),t},toggleOrientation:function(){P()&&I.swapLayoutOrientation()},toggleOverview:function(){P()&&I.swapOverviewVisibility()},reframeOn:function(){P()&&I.reframeOn()},reframeAll:function(){P()&&I.reframeAll()},setSize:function(){P()&&I.setSize()},selectArea:function(){P()&&I.selectArea()},setRootPosition:function(t){if(P())if(e.is(t,"string"))switch(t){case"left":I.setRootPosition(R.OrientationMode.ROOT_ON_LEFT);break;case"top":I.setRootPosition(R.OrientationMode.ROOT_ON_TOP);break;case"right":I.setRootPosition(R.OrientationMode.ROOT_ON_RIGHT);break;case"bottom":I.setRootPosition(R.OrientationMode.ROOT_ON_BOTTOM)}else i.debug("position should be a string")},getContent:function(){var t=void 0;return e.is(I)&&(t=I.getContent()),t},setTaggerStatus:function(e){var t;t=i.getElement().getElementsByClassName("graphView-container")[0],D=e||!1,e?t.removeClassName("unColorizeTagger"):t.addClassName("unColorizeTagger")}}}}})),define("DS/DELPPWItemViewBehaviors/ColumnManagers/MfgItemMakeOrBuyColumnManager",["UWA/Core"],(function(e){"use strict";return function(t){const n=function(e){let n=t.getPlugins(e);return n&&n.instance?n.instance:null},o=n("ResourcePlugin"),i=n("DicoPlugin");return{displayType:"CustomString",isSupportedColumn:function(t){return!(!e.is(t)||!e.is(t.displayType)||t.displayType!==this.displayType)},updateColumnInfos:function(e){return e.typeRepresentation="string",e.getCellValue=this.getCellValue,e},getCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.getAttributeValue(t.attribute.nodeName),r=o.getNLSValue("Column.MakeOrBuy.Make"),s=o.getNLSValue("Column.MakeOrBuy.Buy");return i.isAKindOf(n,"Provide")||i.isAKindOf(n,"ProcessContinuousProvide")?s:r}}}})),define("DS/DELPPWItemViewBehaviors/ColumnManagers/MfgItemQuantityCellManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager"],(function(e,t){"use strict";return function(n,o){var i,r,s,a,l,c=new t(n,o);const u=["ProcessContinuousProvide","ProcessContinuousCreateMaterial","ContinuousByProduct","MBOMContinuousInProcessItem","DELContinuousServicePartReference"],d=function(e){let t=n.getPlugins(e);return t&&t.instance?t.instance:null},g=d("DicoPlugin"),f=d("AttributePlugin"),p=d("ResourcePlugin"),h=d("TreeViewPlugin"),m=d("DatabasePlugin"),I="referenceID.reference";return s=function(e){return u.some((function(t){return g.isAKindOf(e,t)}))},i=function(t){var n,o,i,r,s,l;if(o=t.nodeModel,t.columnID,this,i=this.getColumnOrGroup(t.columnID),e.is(o)&&Array.isArray(i.attribute))for((n={}).column=i,r=n.column.attribute,a=e.is(o.getReferenceType)?o.getReferenceType():null,s=0;s<r.length;s++)if(l=o.getAttributeValue(r[s].nodeName),e.is(l)){n.attributeName=r[s].name,n.attributeNodeName=r[s].nodeName,n.dataIndex=r[s].dataIndex,n.dicoType=r[s].dicoType,n.entity=r[s].entity;break}return n},r=function(t){const n=t.nodeModel.getChildren();let o,i,r=0;if(t.dataIndex.split(",").forEach((t=>{n.forEach((n=>{i=e.is(n.getReferenceType)?n.getReferenceType():null,e.is(n.getAttributeValue(t))&&(o=t)}))})),e.is(o)){let t=0;n.forEach((n=>{if(e.is(n.getAttributeValue(o))){const e=parseFloat(n.getAttributeValue(o));t+=e}})),r=t}else s(i)||(r=t.nodeModel.getAllDirectChildrenCount());return r},l=function(t,n){var o,r="",s={columnID:t,nodeModel:n};if(e.is(t)&&e.is(n)&&(o=i.call(this,s),e.is(o)&&e.is(o.attributeNodeName))){r=n.getAttributeValue(o.attributeNodeName);let t=f.getAttributeInfo(o.attributeName),i=f.hasMagnitude(t),s=f.hasRangeDefined(t);if(i&&!s&&e.is(r)){let e=f.getMagnitude(t),[n,o]=r.split(" ");r={magnitude:e,mksValue:f.getMKSValueFromUnitValue(e,o,n)}}}return r},{displayType:"MfgItemQuantity",isSupportedColumn:function(t){var n=!1;return e.is(t)&&e.is(t.dataIndex)&&(n=t.dataIndex.contains("V_ContQuantity")||t.dataIndex.contains("V_Quantity")),n},updateColumnInfos:function(t,n,o){var i,r,s;return i=Array.isArray(n.attribute)?n.attribute[0].name:n.attribute.name,r=g.getAttributeInfo(i),e.is(r)&&(s=f.hasRangeDefined(r)),t.editionPolicy=s?"EditionInPlace":"EditionOnClick",t.getCellTypeRepresentation=this.getCellTypeRepresentation,t.getCellValue=this.getCellValue,t.getCellSemantics=this.getCellSemantics,t.hasCellValue=this.hasCellValue,t.setCellValue=c.setValue,t.setCellValueBulk=c.setCellValueBulk,t.getCellEditableState=this.getCellEditableState,t.getCellTooltip=this.getCellTooltip,t.getCellValueForExport=this.getCellValueForExport,t.getCellGroupingKey=this.getCellGroupingKey,t.getCellValueForSort=this.getCellValueForSort,t.getGroupingNodeLabel=c.getMagnitudeGroupingLabel,e.is(o.isViewFilterable,"boolean")&&o.isViewFilterable&&e.is(n)&&e.is(n.isFilterable)&&n.isFilterable&&(t.filterInfos={type:"string",options:{allowRegexp:!0,getCellValueForFilter:this.getCellValueForFilter}}),t},getCellTypeRepresentation:function(t){var n,o,r,s="string";return n=i.call(this,t),e.is(n)&&e.is(n.attributeName)&&(o=g.getAttributeInfo(n.attributeName),e.is(o)&&(r=f.hasRangeDefined(o),f.isMultiValuated(o)&&!r?s="string":r?s="enumString":f.isBoolean(o)?s="boolean":(f.isInteger(o)||f.isDouble(o))&&(s="numberWithUnit"))),this.getTreeDocument().isGroupingNodeModel(t.nodeModel)&&(s="number"),s},getCellValue:function(t){var n,o="";return n=i.call(this,t),e.is(n)&&e.is(n.attributeNodeName)?o=t.nodeModel.getAttributeValue(n.attributeNodeName):s(a)&&e.is(t.nodeModel.getInstancePID())&&(o=p.getNLSValue("Quantity.AsRequired")),this.getTreeDocument().isGroupingNodeModel(t.nodeModel)&&(o=t.nodeModel.getProperty()===I?r(t):p.getNLSValue("Quantity.GroupByReference.NotApplicable")),o},getCellValueForSort:function(e,t){return l.call(this,t,e)},getCellGroupingKey:function(t){var n,o,r={columnID:t.columnID,nodeModel:t.nodeModel},s=i.call(this,r);return e.is(s)&&(n=t.nodeModel.getAttributeValue(s.attributeNodeName),o=g.getAttributeInfo(s.attributeName),e.is(n)&&e.is(o)&&(n=Array.isArray(n)?n:[n])),n},getCellValueForFilter:function(t,n){var o,r,s="",a={columnID:t,nodeModel:n};return e.is(t)&&e.is(n)&&(o=i.call(this,a),e.is(o)&&e.is(o.attributeNodeName)&&(s=n.getAttributeValue(o.attributeNodeName),r=g.getAttributeInfo(o.attributeName),e.is(r)&&f.hasMagnitude(r)&&(s=f.getFormatedMagnitudeValueWithUnitLabel(s,r)))),s},hasCellValue:function(t){var n,o=!1;return n=i.call(this,t),(e.is(n)&&e.is(n.attributeNodeName)||this.getTreeDocument().isGroupingNodeModel(t.nodeModel)||s(a))&&(o=!0),o},getCellSemantics:function(t){var n,o,r,s,a={},l={};if(n=i.call(this,t),e.is(n)&&e.is(n.attributeName)&&(s=g.getAttributeInfo(n.attributeName),e.is(s)))if(f.hasRangeDefined(s)){let e=f.getAuthorizedValuesNLSList(s);for(let t=0;t<e.length;t++){let n=e[t],o=f.getAuthorizedValueDB(s,t);a[n]=o}l={possibleValues:a}}else f.hasMagnitude(s)&&(l={allowedUnits:f.getAttributeUnits(s),preservePrecisionInReadonly:f.isDisplayAsEntered(s)});if(this.getTreeDocument().isGroupingNodeModel(t.nodeModel)&&t.nodeModel.getProperty()===I){const i=t.nodeModel.getChildren();let a;t.dataIndex.split(",").forEach((t=>{i.forEach((n=>{e.is(n.getAttributeValue(t))&&(a=t)}))})),(r=(o=n.column.attribute).findIndex((function(e){return e.nodeName===a})))>-1&&(s=g.getAttributeInfo(o[r].name)),l.allowedUnits=f.getAttributeUnits(s)}return l},getCellEditableState:function(t){var n,r,s,a,l,c,u,d=!1;return h.areModuleColumnsImmutable(o.getId())||(n=i.call(this,t),e.is(n)&&e.is(n.attributeName)&&(e.is(n.entity)&&e.is(t.nodeModel)&&(c=n.entity,u=t.nodeModel,l="instance"===c?m.getInstance(u.getInstancePID()):m.getReference(u.getReferencePID()),e.is(l)&&(a=g.getTypeMaskInfo(l.get("type")),e.is(a)&&Object.prototype.hasOwnProperty.call(a,n.dataIndex)&&(s=a[n.dataIndex]))),r=g.getAttributeInfo(n.attributeName),e.is(r)&&(d=!f.isReadOnly(r,s)))),d},getCellTooltip:function(t){var n,o={longHelp:""},r=i.call(t.cellView.collectionView,t),s=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader){let o=g.getAttributeInfo(r.attributeName);if(e.is(o)&&(n=f.hasMagnitude(o)),n){let n=t.nodeModel.getAttributeValue(r.attributeNodeName);e.is(n)&&(n=Array.isArray(n)?n:[n],n=n.map((e=>{var t="";return""!==e&&(t=f.getFormatedMagnitudeValueWithUnitLabel(e,o)),t})),s=n.join("\n"))}}return o.longHelp=s,o},getCellValueForExport:function(t){var n,o,r=i.call(this,t);if(t.rowID<0)n=t.cellModel;else{let i=g.getAttributeInfo(r.attributeName);if(e.is(i)&&(o=f.hasMagnitude(i)),o){let o=t.nodeModel.getAttributeValue(r.attributeNodeName);e.is(o)&&(o=Array.isArray(o)?o:[o],o=o.map((e=>{var t="";return""!==e&&(t=f.getFormatedMagnitudeValueWithUnitLabel(e,i)),t})),n=o.join(""))}}return n}}}})),define("DS/DELPPWItemViewBehaviors/DataGridViewBehavior/DataGridViewBehavior",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/CoreEvents/Events","DS/Menu/Menu"],(function(e,t,n,o){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","DicoPlugin","WebServicePlugin","PlatformPlugin"],creator:function(i,r,s,a,l,c,u,d){var g,f,p=null,h=t,m=i.getLogger(),I=["CreateAssembly","Provide","CreateMaterial","CreateKit","Installation","ProcessContinuousProvide"],S=function(e){var t=!1;return I.forEach((function(n){c.isAKindOf(e,n)&&(t=!0)})),t},y=function(t,n){var o=[],i=function(t){return e.is(n,"function")&&(g.removeRoots(),n(p)),t},r={context:this,onFailure:i};s.navigateScopesFromDB(t,(function(t){var r={context:this,forceDBMode:!0,onComplete:function(t){e.is(n)&&n(t)},onFailure:function(e){return e}};e.is(t)&&e.is(t,"array")&&t.length>0?(t.forEach((function(e){S(e.type)&&o.push(e.physicalid)})),s.fetchRoot(o,r)):i(null)}),r)},P=function(t,o){var i={context:this,onComplete:function(t){var i=d.isUsingOldCreation(o);o.options=t,e.is(t)&&(s.addReference(t),i?n.publish({event:"DELMFNCommands/CreateMfgItemAndScopeCmd",data:o}):n.publish({event:"DELPPWCommands/InsertCmdPLMNew",data:o}))}};m.log("createObjectAndScope fetchRoot objectId: "+t),s.fetchRoot(t,i),l.setSelection("IMPMOD",[{id:t,path:[]}])},b=function(t,o){var i={context:this,onComplete:function(t){var i=d.isUsingOldCreation(o);o.options=t,e.is(t)&&(s.addReference(t),i?n.publish({event:"DELMFNCommands/CreateMfgItemAndResultingProductCmd",data:o}):n.publish({event:"DELPPWCommands/InsertCmdPLMNew",data:o}))}};m.log("createObjectAndResultingProduct fetchRoot objectId: "+t),s.fetchRoot(t,i),l.setSelection("RESULTINGMOD",[{id:t,path:[]}])},C=function(t){var n=r.getBehavior("WUXNodeModelBehavior"),o=n.getRoots();e.is(t)&&t.length>=1&&t.forEach((function(t){e.is(o,"array")&&-1===o.indexOf(t.get("PID"))&&n.addNode(t,{silentMode:!0,withLinksResolved:!1,loadRootOnly:!0,doNotExpand:!0,loadChildren:!1,fromXEN:!0})}))},v=function(e){h.publish("DS/PADUtils/PADCommandProxy/refresh",{data:{authored:{modified:[e],fromFacet:!0}}})};return{onStart:function(){i.addExternalListener("createMfgItemAndScope",(function(){v(f)})),i.addExternalListener("createMfgItemAndResultingProduct",(function(){v(f)})),i.addExternalListener("referenceChanged",(function(){v(f)})),h.subscribe("DS/PADUtils/PADCommandProxy/refresh",(function(t){var n=t.data.authored.modified,o=t.data.authored.fromFacet,i=[],a=null;e.is(n,"array")&&!e.is(o)?n.forEach((function(t){i.onComplete=function(t){S(t.get("type"))?(a=g.getNodesFromIdentifierStringArray([t.get("PID")]),e.is(a)&&1===a.nodeModelArray.length&&(a.nodeModelArray[0].setAttribute("organization.reference",t.get("organization")),a.nodeModelArray[0].setAttribute("owner.reference",e.is(t.get("ds6w:responsible"))?t.get("ds6w:responsible"):t.get("owner")),a.nodeModelArray[0].setAttribute("current.reference",t.get("current")),a.nodeModelArray[0].setAttribute("project.reference",t.get("project")),a.nodeModelArray[0].setAttribute("EnterpriseExtension.V_PartNumber.reference",t.get("EnterpriseExtension.V_PartNumber")),a.nodeModelArray[0].setLabel(t.get("PLMEntity.V_Name")))):c.isAKindOf(t._attributes.type,"VPMReference")&&r.getPreferenceValue("isReleaseSyncXENEnabled")&&y(t.get("PID"),(function(n){var o=u.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0});e.is(n)&&e.is(n,"array")&&n.length>0&&s.getCurrentStates([t.get("PID")],o,(function(i){var a=[];e.is(i)&&"RELEASED"===i.get(t.get("PID"))&&(n.forEach((function(e){a.push(e.get("PID"))})),s.getCurrentStates(a,o,(function(i){var a=[];n.forEach((function(t){var n=e.is(i)?i.get(t.get("PID")):null;e.is(n)&&"RELEASED"!==n&&c.isAKindOf(t.get("type"),"Provide")&&a.push(t)})),a.length>0&&new Promise((function(e,t){s.syncMaturity(a,o,!0,e,t)})).then((function(){a.forEach((function(n){var o=g.getNodesFromIdentifierStringArray([n.get("PID")]);e.is(o)&&1===o.nodeModelArray.length&&o.nodeModelArray[0].setAttribute("current",t.get("current"))}))})).catch((function(){a.forEach((function(e){r.notify("referenceAdded",e)})),r.warn("The object(s) has been created but the state(s) hasn't been able to be changed")}))})))}))}))},i.forceDBMode=!0,s.fetchRoot(t,i)})):function(e){y(f,e)}(C)}))},setContextualMenu:function(e){e.onContextualEvent=function(e){var t=[],o=e.cellInfos.nodeModel.options.referencePID;r.getBehavior("WUXNodeModelBehavior");return t.push({type:"PushItem",fonticon:{family:"DSFontIcon",content:"wux-ui-3ds wux-ui-3ds-move-to"},title:a.getNLSValue("Command.MoveTo"),label:a.getNLSValue("Command.MoveTo"),action:{callback:function(){g.getRoots().forEach((function(e){o===e.options.referencePID&&e.select()})),n.publish({event:"FacetCommandManager/beginCommand",data:{commandName:"ActionBar_ChangeOwner"}})}}}),t.push({type:"PushItem",fonticon:{family:"DSFontIcon",content:"wux-ui-3ds-database-delete"},title:a.getNLSValue("Command.Delete"),label:a.getNLSValue("Command.Delete"),action:{callback:function(){g.getRoots().forEach((function(e){o===e.options.referencePID&&e.select()})),n.publish({event:"FacetCommandManager/beginCommand",data:{commandName:"DeleteHdr"}})}}}),t}},setTreeDocument:function(e){g=e},onStop:function(){},setSecurityContext:function(t){e.is(t,"string")&&n.publish({event:"DELPPXEN/CustomizeSecurityContext",data:t})},getContent:function(){p},getScopes:function(e,t,n){f=e,y(e,t)},removeRoots:function(){e.is(g)&&g.removeRoots()},fetchRoot:function(e,t){t.forceDBMode=!0,s.fetchRoot(e,t)},refreshNode:function(e){!function(e){var t=g.getRoots();g.prepareUpdate(),t.forEach((function(t){t.options.referencePID===e.id&&(t.setAttributeValue("Organization",e.attributes.organization),t.setAttributeValue("Owner",e.attributes.owner))})),g.pushUpdate()}(e)},refreshTable:function(e){y(f,e)},renderMenu:function(e,t,n){e&&n&&(f=t,function(e,t){if(!e||!Array.isArray(t))throw new Error("unable to build the menu");o.show(t,{position:{x:e.left,y:e.bottom},submenu:"outside"})}(e,function(e){return[{name:"CreateAssemblyAndScopeAction",icon:a.getIconURLFromKey("CreateAssemblyAndScope"),title:a.getNLSValue("Title.MakeAssembly"),tooltip:a.getNLSValue("Title.MakeAssembly"),type:"PushItem",action:{callback:function(){P(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateAssembly"},{ID:"LinkType",Mode:"IN",Value:"SCOPE"}]})}}},{name:"CreateAssemblyAndResultingProductAction",icon:a.getIconURLFromKey("CreateAssemblyAndResultingProduct"),title:a.getNLSValue("Title.ResultingProduct.MakeAssembly"),tooltip:a.getNLSValue("Title.ResultingProduct.MakeAssembly"),type:"PushItem",action:{callback:function(){b(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateAssembly"},{ID:"LinkType",Mode:"IN",Value:"RESULTING_PRODUCT"}]})}}},{name:"CreateMaterialAndScopeAction",icon:a.getIconURLFromKey("CreateMaterialAndScope"),title:a.getNLSValue("Title.MakeMaterial"),tooltip:a.getNLSValue("Title.MakeMaterial"),type:"PushItem",action:{callback:function(){P(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateMaterial"},{ID:"LinkType",Mode:"IN",Value:"SCOPE"}]})}}},{name:"CreateMaterialAndResultingProductAction",icon:a.getIconURLFromKey("CreateMaterialAndResultingProduct"),title:a.getNLSValue("Title.ResultingProduct.MakeMaterial"),tooltip:a.getNLSValue("Title.ResultingProduct.MakeMaterial"),type:"PushItem",action:{callback:function(){b(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateMaterial"},{ID:"LinkType",Mode:"IN",Value:"RESULTING_PRODUCT"}]})}}},{name:"CreateProvideAndScopeAction",icon:a.getIconURLFromKey("CreateProvideAndScope"),title:a.getNLSValue("Title.Buy"),tooltip:a.getNLSValue("Title.Buy"),type:"PushItem",action:{callback:function(){P(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Provide"},{ID:"LinkType",Mode:"IN",Value:"SCOPE"}]})}}},{name:"CreateProvideAndResultingProductAction",icon:a.getIconURLFromKey("CreateProvideAndResultingProduct"),title:a.getNLSValue("Title.ResultingProduct.Buy"),tooltip:a.getNLSValue("Title.ResultingProduct.Buy"),type:"PushItem",action:{callback:function(){b(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Provide"},{ID:"LinkType",Mode:"IN",Value:"RESULTING_PRODUCT"}]})}}},{name:"CreateInstallationAndResultingProductAction",icon:a.getIconURLFromKey("CreateInstallProcessAndResultingProduct"),title:a.getNLSValue("Title.ResultingProduct.InstallProcess"),tooltip:a.getNLSValue("Title.ResultingProduct.InstallProcess"),type:"PushItem",action:{callback:function(){b(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Installation"},{ID:"LinkType",Mode:"IN",Value:"RESULTING_PRODUCT"}]})}}},{name:"CreateContinuousProvidedMaterialAndScope",icon:a.getIconURLFromKey("CreateContinuousProvidedMaterialAndScope"),title:a.getNLSValue("Title.ContinuousProvidedMaterial.Buy"),tooltip:a.getNLSValue("Title.ContinuousProvidedMaterial.Buy"),type:"PushItem",action:{callback:function(){P(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/ProcessContinuousProvide"},{ID:"DisplayedInTableView",Value:"PROCESS",Mode:"In"},{ID:"LinkType",Mode:"IN",Value:"SCOPE"}]})}}}]}(t)))},isAvailableType:function(e){return c.isAKindOf(e,"VPMReference")},createObjectAndScope:function(e,t){P(e,t)},createContinuousProvidedMaterialAndScope:function(t,n){!function(t,n){var o={context:this,onComplete:function(t){e.is(t)&&(s.addReference(t),r.notify("InsertCmd",n))}};m.log("createObjectAndScope fetchRoot objectId: "+t),s.fetchRoot(t,o)}(t,n)},createObjectAndResultingProduct:function(e,t){b(e,t)},getModel:function(){return g},setSelectedObject:function(e){f=e,l.setSelection("IMPMOD",[{id:f,path:[]}])},hide:function(){},show:function(){}}}}})),define("DS/DELPPWItemViewBehaviors/ItemUXBehavior/ImplementedRevChooserUI",["UWA/Core"],(function(e){"use strict";return function(t,n){const o="PLMEntity.V_Name",i="revision",r=".reference",s="VPMReference.V_IsManufacturable";var a,l,c,u,d,g,f,p,h,m,I,S,y,P,b,C,v,A,N,M,D,E,R=null,B=null,L=[];return b=function(){c=m.createElement("div",{class:"implementedRevChooser-dlg-container"}),E=m.createElement("div",{class:"inside-accordeon-warningMessage"}),A(),N(),M()},C=function(t){l=e.merge(t,{disabled:!0,defaultWidth:"380",defaultHeight:"350",modalFlag:!1,resizableFlag:!0}),b(),(a=m.create("Dialog",{title:I.getNLSValue(l.cmdTitle),domId:l.cmdId,content:c,identifier:l.cmdId,width:l.defaultWidth,height:l.defaultHeight,modalFlag:l.modalFlag,resizableFlag:l.resizableFlag,buttons:{Cancel:m.create("Button",{onClick:function(){a.close()}}),Ok:m.create("Button",{disabled:!e.is(l.disabled)||l.disabled,emphasize:"primary",onClick:function(){var t=n.getBehavior("WUXNodeModelBehavior").getSelectedNodes(),o={};e.is(t)&&t.length>0&&(B=t[0].getReferencePID()),o.implementingId=R,o.implementedId=B,o.implementingPaths=L,!0===l.optionsSection&&("ComboBox"===l.scopeOption&&(o.scopeCreation=d.value),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(o.mfgItemPrefix=f.value),e.is(g)&&(o.updateIntermediateScopedAssemblies=g.checkFlag)),l.onOKCallBack(o)}})}})).close=function(){v()}},v=function(){var t,o=n.getBehavior("WUXNodeModelBehavior"),i=n.getBehavior("TreeListViewBehavior");e.is(a)&&(e.is(p)&&o.removeEventListener(p),e.is(h)&&o.removeEventListener(h),o.emptyNodeModel(),t=i.getDataGridView(),e.is(t)&&t.remove(),a.destroy(),u=void 0,c=void 0,a=void 0),l.onCancelCallback&&l.onCancelCallback()},A=function(){var e=m.createElement("div",{}).inject(c),t=I.getNLSValue("ImplementUI.Implementing"),n=I.getNLSValue("ImplementUI.SelectImplementing");u=m.create("SelectionControl",{title:t,message:n,renderTo:e})},N=function(){var t,o,i,r=I.getNLSValue("ImplementUI.SelectImplementedRevision"),s=m.createElement("div",{class:"implementedSection-header",html:"<h5>"+r+"</h5>"}),a=m.createElement("div",{class:l.implementedRevTreeListCSSStyle}),u=n.getBehavior("WUXNodeModelBehavior"),d=n.getBehavior("TreeListViewBehavior");D=m.createElement("div",{class:"Non-BOM_Item_WarningMsg"}),s.inject(c),a.inject(c),D.inject(c),i=e.clone(l.moduleOptions),t={rowSelection:"single"},e.is(i.views)&&e.is(i.views.treeListView)&&(o=e.extend(i.views.treeListView,t),delete i.views.treeListView,i.dataGridViewOptions=o),d.createTreeListView(i),d.loadDocument(u.getWUXNodeModel()),d.getContent().inject(a)},M=function(){var t,n,o,i,r;!0===l.optionsSection&&(r=m.createElement("div",{class:"accordeon-section-container, optionsSection"}).inject(c),t=m.createElement("div",{class:"options-container"}),m.create("Accordeon",{items:[{header:I.getNLSValue("Expander.Options"),content:t,expandedFlag:!0}],style:"filled-separate"}).inject(r),e.is(l.scopeOption)&&(n=m.createElement("div",{class:"scope-option-container"}).inject(t),m.createElement("div",{class:"wux-title-textElement",text:I.getNLSValue("ImplementUI.CreateScopeForChildren")}).inject(n),"ComboBox"===l.scopeOption&&(d=m.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:I.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"}]}).inject(n))),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(o=m.createElement("div",{class:"mfgItemPrefix-option-container"}).inject(t),m.createElement("div",{class:"wux-title-textElement",text:I.getNLSValue("ImplementUI.PrefixForMfgItems")}).inject(o),o.tooltipInfos=new P({shortHelp:I.getNLSValue("ImplementUI.PrefixForMfgItems")}),f=m.create("LineEditor",{placeholder:I.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder")}).inject(o)),i=m.createElement("div",{class:"scope-option-container"}).inject(t),m.createElement("div",{class:"wux-title-textElement-long",text:I.getNLSValue("ImplementUI.UpdateIntermediateScopedAssemblies")}).inject(i),g=m.create("Toggle",{checkFlag:!1}).inject(i))},m=n.getBehavior("UXFactoryBehavior"),P=m.getComponent("TooltipModel"),I=t.getPlugins("ResourcePlugin").instance,S=t.getPlugins("DatabasePlugin").instance,y=t.getPlugins("SelectionPlugin").instance,{createUI:function(e){C(e)},isVisible:function(){return!!e.is(a)&&a.visibleFlag},destroyUI:function(){e.is(a)&&a.close()},updateImplementingLabel:function(e){var t=n.getBehavior("WUXNodeModelBehavior");R=e,u.updateLabel([S.getReferenceModel(e)]),t.emptyNodeModel(),a.clearMessages()},updateImplementedRevnList:function(t,c,u,d){var g,f,S,y,P,b=!1,C=!1,v={},A={},N=n.getBehavior("WUXNodeModelBehavior"),M={};for(g=0;g<c.length;g++){if(S=(f=c[g]).PID,!b){if(t!==S)continue;b=!0}!0!==u?((A={})[o+r]=f[o],A[i+r]=f[i],v={id:S,referencePID:S,referenceType:f.type,grid:A,label:f.V_Name,revision:f.revision,icons:[I.getIconURLFromKey(f.PPRTYPE)]},e.owns(f,s)&&(v.isManufacturable=f[s]),N.addNodeModel(v),C=!0):u=!1}C?(d?(a.width="700",a.warning(I.getNLSValue("ImplementBehavior.Validation.ChildrenImpLinkDeletion"))):a.width=l.defaultWidth,p=N.addEventListener("select",(function(t){e.is(a)&&(M=t.data.nodeModel.options,e.owns(M,"isManufacturable")&&"FALSE"===M.isManufacturable&&(y=I.getNLSValue(I.getNLSValue("ImplementBehavior.Validation.NonBOMItem",{objectName:M.label+" "+M.revision})),"UpdateMfgItemStructure"===a.identifier?(P=new e.Element("div",{class:"TNRWarning"}).inject(D),m.createElement("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(P),E.setHTML(y).inject(P)):a.warning(y)),a.buttons.Ok.disabled=t.data.nodeModel.getTreeDocument().getSelectedNodes().length<1)})),h=N.addEventListener("unselect",(function(t){e.is(a)&&(D.empty(),a.clearMessages(),a.buttons.Ok.disabled=t.data.nodeModel.getTreeDocument().getSelectedNodes().length<1)}))):(a.width=l.defaultWidth,a.error(I.getNLSValue("ImplementBehavior.Validation.NoHigherRevision")))},showMessages:function(e,t){"info"===t?a.info(e):"warning"===t?a.warning(e):"error"===t?a.error(e):n.debug("type of message is invalid")},updateImplementing:function(){var e,t=[],o=y.getSelectionsWithPaths(n.getId());0!==o[1].length&&((e=o[1]).forEach((function(e){t.push(e.path)})),1===e.length&&(L=[t[0]]))}}}})),define("DS/DELPPWItemViewBehaviors/WUXActionDragDrop",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],(function(e,t){"use strict";return function(n,o,i,r,s,a,l,c){var u,d=new t(n,o,i,r,s,a,l,c),g=d.init;return d.init=function(e){u=e||{},g.call(this,e)},d.checkType=function(e){return!1!==this.isAcceptedType(e)},d.processRootDrop=function(t,n,s,a,l,c,d,g){var f,p,h,m,I,S,y,P=this,b=o.getBehavior("SelectionBehavior"),C=o.getBehavior("ModelBehavior"),v=o.getBehavior("LinkBehavior"),A=o.getBehavior("TreeListViewBehavior"),N=i.getNLSValue(o.getId()),M=i.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:N}),D=u.linkTypes[0];if(!e.is(b)||!e.is(C)||!e.is(v))return o.debug("WUXActionDragDrop: Required behaviors are missing."),void g("AbstractDragAndDropManager.InternalError");f=o.log(M),I=function(t){var n,i=o.getBehavior("WUXNodeModelBehavior");return n=e.is(i)?i.validate(t):n},y=function(t,n){var r,s,a,l={},c=e.is(A)?A.getLabelAttribute():"PLMEntity.V_Name";P.checkType(n)?(a=I(n),e.is(a)?(l[a.param]=a.paramValue,r=i.getNLSValue(a.key,l,"ValidationError"),o.warn(r,f,"failed"),g()):(s=i.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{objectName:n.get(c),view:N}),o.log(s,f,"completed"),v.createConnection([{type:D,IDFrom:t.get("PID"),IDTo:n.get("PID"),fromSideRefPID:t.get("PID"),toSideRefPID:n.get("PID"),fromSideAbsPath:C.isInstance(p)?[p]:p,fromSideInstPID:p}]),d())):(r=i.getNLSValue("AbstractDragAndDropManager.NotValidType"),o.warn(r,f,"failed"),g("AbstractDragAndDropManager.NotValidType"))},h=b.getSelections(),e.is(h)&&(e.is(h[1])&&1===h[1].length?p=e.is(h[1],"array")?h[1][0]:null:e.is(h[2])&&1===h[2].length&&(p=e.is(h[2],"array")?h[2][0]:null)),e.is(p)?(S=C.getReferenceModel(p),(m=C.getReference(t))?S.get("PID")===m.get("PID")?(o.warn(i.getNLSValue("AbstractDragAndDropManager.SameObject"),f,"failed"),g()):y(S,m):m=r.fetchRoot(t,{onComplete:function(t){e.is(t)?(y(S,t),o.debug("WUXActionDragDrop:Succesfully fetched reference : %o",t)):(o.warn(i.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),f,"failed"),g("AbstractDragAndDropManager.RootNotInDB"))},onFailure:function(){o.debug("Failed to fetch Reference for PID: "+t),o.warn(i.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),f,"failed"),g("AbstractDragAndDropManager.RootNotInDB")},context:this,silent:!0})):(o.warn(i.getNLSValue("AbstractDragAndDropManager.NoMBOMSelected"),f,"failed"),g())},d.onTreeListViewDrop=function(t,n){var o=this,i={action:[],parameters:[]},r=o.getDragNDropInfo(t,n);e.is(r)&&e.is(r.draggedItems,"array")&&(r.draggedItems.forEach((function(e,t){i.action[t]="addRoot",i.parameters[t]={rootReferencePID:o.getDraggedReferencePID(e)}})),this.processDropEffect(i))},d.onDropBlank=function(e,t){return this.onTreeListViewDrop(e,t)},d}})),define("DS/DELPPWItemViewBehaviors/AltSubBehavior/AltSubReplaceBehavior",["UWA/Core","DS/DELPPWItemViewBehaviors/AltSubBehavior/AltSubReplaceReportUI"],(function(e,t){"use strict";const n=e=>Array.isArray(e)&&e.length>0,o=e=>t=>t[e],i=function(e,t=null){return e.length>0?e[0]:t},r=function(e,t=null){const n=e.length;return n>0?e[n-1]:t},s=(...e)=>t=>e.reduce(((e,t)=>t(e)),t);return{plugins:["DatabasePlugin","WebServicePlugin","BIPlugin","ProductImplementPlugin"],creator:function(a,l,c,u,d,g){let f=[];const p=function(t){let n={stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]};const i=function(e,t){let n=new Map;n.set(!0,[]),n.set(!1,[]);for(const o of e){const e=t(o),i=o;n.set(e,n.get(e).concat(i))}return n}(t.instancesAndReferences,s(o("attributesValue"),(t=>e.owns(t,"isInstanceOf"))));let r=i.get(!0),a=i.get(!1);var l,u;n.stackedInstances=r.map((l="queriedForConnections",u=!0,e=>({...e,[l]:u}))),a.length>0&&(n.stackedReferences=a);const d=c.getConnectionParser();t.connections.forEach((e=>{d.parse(e,n)})),n.deletedObjects=t.deletedObjects;const g=t.resultReport;return{stackedObjects:n,resultReport:g}},h=function(a,f,h,m,I){const S=e=>e.get("isInstanceOf"),y=(e,t)=>{const n=t(e),o=(e=>{let t=[];const n=g.getImplLinksOfImplementing(e);if(Array.isArray(n)&&1===n.length){const e=i(n).get("to");t=g.getImplLinksOfImplemented(e).map((e=>e.get("from")))}return t})(e),r=function(e,t){let n=new Set;for(const o of t)e.has(o)&&n.add(o);return n}(new Set(n),new Set(o));return Array.from(r)},P=(t,n,o,i)=>{const l=s(r,c.getInstance,S),u=e=>{const t=l(e);return a.getWhereUsedInstanceIds(t)},d=e=>a.getWhereUsedInstanceIdsUnderParent(e);let g=[];if((t=>e.is(t))(i))if("reference"===i.type)g=d(t);else{let e=[];n?e=y(t,d):o&&(e=y(t,u)),g=e.length>0?e:[r(t)]}else g=o?u(t):d(t);return g},b=(e,t)=>{const n=function(e,t,n){let o;const i=((e,t)=>n(e).find((e=>t.has(e))))(e,new Set(t));return o=Array.isArray(e)?e.concat(i):[i],o}(e,t,(e=>a.getChildren(e)));a.unSelectAll(),a.selectNode(n)},C=t=>{const o=function(e){const t=e.length;return t>0?e.slice(0,t-1):e}(t);let r;return r=n(o)?o:(t=>{let n=null;const o=i(t);if(e.is(o)){n=c.getInstance(o).get("isAggregatedBy")}return n})(t),r},{isReplaceAll:v,restrictToUnderSameParent:A,replaceAllInstances:N}=m,M=(()=>{let t=null;const o=i(a.getSelectedNodesInfo(),null);if(e.is(o)){const e=o.absPath;n(e)&&r(e)===f&&(t=o.absPath)}return t})();if(e.is(M)){let n={};l.notify("startProgress",n),a.showOverlay();const i=C(M);(function(t){const n=e.Json.encode(t);return new Promise(((e,t)=>{u.webServiceRequest({url:"dsmfg/private/V0/invoke/MfgItem/replaceByAlternate",method:"POST",data:n,onComplete:function(t){e(t)},onFailure:function(e){t(e)}})}))})({instanceIdsToReplace:v?P(M,A,N,I):[f],replacementReferenceId:h}).then((function(r){a.unSelectNode(M);const{stackedObjects:u,resultReport:g}=p(r),f=u.deletedObjects.map(c.getInstance);return function(e){return new Promise((t=>{const n={...e,onComplete:t};c.addToCollections(n)}))}(Object.entries(u).filter((([e,t])=>"deletedObjects"!==e)).reduce(((e,[t,n])=>(e[t]=n,e)),{})).then((function(){!function(e){const t=Array.isArray(e)?e:[e];var n;(e=>{const t=e.map(o("id"));c.removeInstance(t,{silent:!0})})(t),n=t,l.notify("instanceRemoved",[n])}(f);const r=Object.values(g).filter(((e,t)=>n=>n[e]===t)("status","Success"));if(r.length>0){l.notify("replaced");const t=r.map(s(o("replacementInstanceId"),c.getInstance));!function(e){const t=Array.isArray(e)?e:[e];l.notify("instanceAdded",[t])}(t);const n=t.map(o("id"));b(i,n),(()=>{const t=l.getPreferenceValue("refreshBIOnAuthoring");return e.is(t,"boolean")&&!0===t})()&&!0===d.getBICmdState()&&d.computeBI()}else a.selectNode(M);l.notify("stopProgress",n),a.removeOverlay(),function(n){const o=l.getBehavior("UXFactoryBehavior"),i=l.getBehavior("ResourceBehavior");e.is(o)&&e.is(i)&&new t(l,o,i,c).showReport(n)}(g),l.notify("ReplaceByAlternateDone")}))})).catch((function(e){l.log("Error occured on replace: "+e),l.notify("stopProgress",n),a.removeOverlay()}))}};return{listenTo:function(){return{doReplaceByMfgAlternate:this.onDoReplaceByMfgAlternate}},onStart:function(e){f=e.pprTypes},onStop:function(){},onDoReplaceByMfgAlternate:function(t,n,o,i){if(f.includes("PROCESS")||f.includes("SERVICE")||f.includes("CONSTRUCTION")){const r=l.getBehavior("WUXNodeModelBehavior");e.is(r)&&h(r,t,n,o,i)}}}}}})),define("DS/DELPPWItemViewBehaviors/ItemUXBehavior/MfgItemUXBehavor",["UWA/Core","DS/DELPPWItemViewBehaviors/ItemUXBehavior/ImplementUI","DS/DELPPWItemViewBehaviors/ItemUXBehavior/ImplementedRevChooserUI","DS/DELPPWItemViewBehaviors/ItemUXBehavior/MfgItemCreateReportUI"],(function(e,t,n,o){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","DatabasePlugin","SelectionPlugin","ProductImplementPlugin"],creator:function(e,i,r,s,a,l,c){return{onStart:function(){},onStop:function(){},createImplementUI:function(n){var o=new t(e,i);return o.createUI(n),o},createImplementedRevChooserUI:function(t){var o=new n(e,i);return o.createUI(t),o},createMfgItemCreateReportUI:function(t){var n=new o(e,i);return n.displayReport(t),n}}}}})),define("DS/DELPPWItemViewBehaviors/AltSubBehavior/DesignAlternateRetriever",["UWA/Core","UWA/Promise","DS/DELPPWItemViewBehaviors/AltSubBehavior/AltSubInfoContainer"],(function(e,t,n){"use strict";return function(o){var i,r,s,a,l,c,u=()=>!0,d=()=>!1,g=u,f=d,p=d,h=d,m=d;return s=function(e,n,o){return new t((function(t,i){var r=[];e.forEach((function(e){n(e)&&r.push(e)})),r.length>0?o(r,t,i):t()}))},a=function(e){return s(e,(function(e){return!o.isReference(e)}),(function(e,t,n){o.fetchRoot(e,{forceDBMode:!0,silent:!0,onComplete:t,onFailure:n})}))},l=function(e){return s(e,(function(e){return!o.isInstance(e)}),(function(e,t,n){o.fetchInstancesAndTheirReferences(e,{onComplete:t,onFailure:n})}))},c=function(o){let i=n.empty(),r=n.empty(),s=n.empty();return new t((function(n){let c=[],u=new Set,d=new Set;o.forEach((function(t){const n=t.id,o=t.qualificationStatus;if(e.is(o)&&g(o)){const e=t.operation;p()&&e.includes("Substitute")&&("ReferenceSubstitute"===e?h(t.parentContextId)&&(r.addId(n).setInfo(n,t),d.add(t.parentContextId)):"InstanceSubstitute"===e&&m(t.instanceContextId)&&(s.addId(n).setInfo(n,t),u.add(t.instanceContextId))),f()&&"Alternate"===e&&i.addId(n).setInfo(n,t)}})),c=[a(d),l(u)],t.all(c).then((function(){n({alternates:i,referenceSubstitutes:r,instanceSubstitutes:s})}))}))},{of:function(e){return i=e,this},ofBL:function(e){return r=e,this},withStatus:function(e){return g=e,this},withAlternates:function(){return f=u,this},withoutSubstitutes:function(){return p=d,this},withReferenceSubstitutes:function(e){return h=e,p=u,this},withInstanceSubstitutes:function(e){return m=e,p=u,this},retrieve:function(){return o.getAlternateEnggItemPromise(i).then((function(e){return c(e)}))},retrieveThroughBL:function(){return o.getEngAlternatesFromBLPromise(r).then((function(e){return c(e)}))}}}})),define("DS/DELPPWItemViewBehaviors/AltSubBehavior/AltSubBehavior",["UWA/Core","UWA/Promise","DS/DELPPWItemViewBehaviors/AltSubBehavior/DesignAlternateRetriever","DS/DELPPWItemViewBehaviors/AltSubBehavior/AltSubInfoContainer"],(function(e,t,n,o){"use strict";return{plugins:["DatabasePlugin","ProductImplementPlugin","ResourcePlugin"],creator:function(i,r,s,a,l){var c,u,d,g,f,p,h,m,I,S,y,P,b,C,v={RESULTING_PRODUCT:"ResultingProduct",SCOPE:"Scope",IMPLEMENT:"Implement"};return c=function(e){return function(t){var n=null;return e.alternates.infoMap.has(t)?n=e.alternates.infoMap.get(t):e.referenceSubstitutes.infoMap.has(t)?n=e.referenceSubstitutes.infoMap.get(t):e.instanceSubstitutes.infoMap.has(t)&&(n=e.instanceSubstitutes.infoMap.get(t)),n}},u=function(e){return new t((function(t,n){var o=[];e.forEach((function(e){s.isReference(e)||o.push(e)})),o.length>0?s.fetchRoot(o,{forceDBMode:!0,silent:!0,onComplete:t,onFailure:n}):t()}))},d=function(n){return new t((function(t,o){var i=n.Results,r=[],a=new Set,l=function(t,n,o){return{productId:t,linkTypeNavigated:e.is(n,"string")?n:null,mfgId:e.is(o,"string")?o:null}};Array.isArray(i)?(i.forEach((function(e){var t,n,o,i=e.PrdID,c=e.mfgItems;a.add(i),Array.isArray(c)&&c.length>0&&(n=(t=s.groupingBy(c,(function(e){return e.linkType}),(function(e){return e.mfgItemIds}))).has(v.RESULTING_PRODUCT)?t.get(v.RESULTING_PRODUCT).length:0,o=t.has(v.SCOPE)?t.get(v.SCOPE).length:0,0===n&&0===o?r.push(l(i)):t.forEach((function(e,t){e.forEach((function(e){a.add(e),r.push(l(i,t,e))}))})))})),u(a).then((function(){t(r)}))):o('Server response of "/mfgItemsFromDesignAlternates" is not as expected')}))},g=function(o){var i=o.contextProductRefId,r=s.getInstance(o.contextProductInstId),a=o.contextLinkNavigated;return new t((function(t,o){var l,c,u=new n(s);e.is(i)?(a===v.RESULTING_PRODUCT||a===v.SCOPE?c=u.of(i).withStatus((function(e){return"Obsolete"!==e})).withAlternates().withoutSubstitutes().retrieve():e.is(r)?(l=r.get("isAggregatedBy"),c=u.of(i).withStatus((function(e){return"Obsolete"!==e})).withAlternates().withReferenceSubstitutes((function(e){return l===e})).withInstanceSubstitutes((function(e){return e===r.get("PID")})).retrieve()):o("No Context product Instance is found"),c.then(t)):o("No context product found")}))},f=function(e){return new n(s).ofBL(e).withStatus((()=>!0)).withAlternates().withReferenceSubstitutes((()=>!0)).withInstanceSubstitutes((()=>!0)).retrieveThroughBL()},p=function(n,o,i,r,a){return s.getMfgItemsFromDesignAlternatesPromise(n,o,i).then(d).then((function(n){return new t((t=>{t(n.filter((function(t){let n=!0;return e.is(t.mfgId)&&(n=a(t.mfgId)),n})).map((function(e){return{...e,altSubInfo:c(r)(e.productId)}})))}))}))},h=function(){return t.resolve([])},m=function(e,t,n){var o,i=e.alternates.ids,r=e.referenceSubstitutes.ids,s=e.instanceSubstitutes.ids,a=t.contextLinkNavigated;a===v.IMPLEMENT&&(a=v.SCOPE),o=i.concat(r).concat(s);return{contextProductRefId:t.contextProductRefId,designAlternateIds:o,contextLinkNavigated:a,altSubInfoObj:e}},I=function(){return{contextLinkNavigated:v.IMPLEMENT,contextProductRefId:null}},S=function(n,i,r){const s=g(r).then((function(e){return m(e,r)})),a=f(n).then((function(e){return m(e,r)}));return t.all([s,a]).then((function(n){const i=(t=>{let n={contextProductRefId:null,designAlternateIds:[],contextLinkNavigated:null,altSubInfoObj:{alternates:o.empty(),referenceSubstitutes:o.empty(),instanceSubstitutes:o.empty()}};for(const o of t)n.contextProductRefId=e.is(o.contextProductRefId)?o.contextProductRefId:null,n.designAlternateIds=n.designAlternateIds.concat(o.designAlternateIds),n.contextLinkNavigated=e.is(o.contextLinkNavigated)?o.contextLinkNavigated:null,n.altSubInfoObj.alternates=n.altSubInfoObj.alternates.combine(o.altSubInfoObj.alternates),n.altSubInfoObj.referenceSubstitutes=n.altSubInfoObj.referenceSubstitutes.combine(o.altSubInfoObj.referenceSubstitutes),n.altSubInfoObj.instanceSubstitutes=n.altSubInfoObj.instanceSubstitutes.combine(o.altSubInfoObj.instanceSubstitutes);return n})(n);return t.resolve(i)})).then((function(e){const{contextProductRefId:t,designAlternateIds:n,contextLinkNavigated:o,altSubInfoObj:r}=e;return p(t,n,o,r,i)}))},y=function(e,t){return f(e).then((function(e){return m(e,I())})).then((function(e){const{contextProductRefId:n,designAlternateIds:o,contextLinkNavigated:i,altSubInfoObj:r}=e;let s;return s=o.length>0?p(n,o,i,r,t):h(),s}))},P=function(t){return function(n){var o,i=e.is(n.mfgId)?n.mfgId:null,r=n.productId,a=n.altSubInfo,c={referenceModel:null,isContextProduct:r===t,status:null,engRelTypeNLS:null,engRelType:null,substituteContextModel:null},u={referenceModel:null,mfgRelTypeNLS:null,mfgRelType:null};return c.referenceModel=s.getReference(r),e.is(i)&&(u.referenceModel=s.getReference(i),u.mfgRelTypeNLS=l.getNLSValue("AltSub.Link."+n.linkTypeNavigated),u.mfgRelType=n.linkTypeNavigated),e.is(a)?(e.is(a.qualificationStatus)&&(c.status=l.getNLSValue("AltSub.Status."+a.qualificationStatus)),o=a.operation,e.is(o)&&(c.engRelTypeNLS=l.getNLSValue("AltSub."+o),c.engRelType=o,"ReferenceSubstitute"===o?c.substituteContextModel=s.getReference(a.parentContextId):"InstanceSubstitute"===o&&(c.substituteContextModel=s.getInstance(a.instanceContextId)))):(c.status="",c.engRelTypeNLS=""),{eng:c,mfg:u}}},b=function(t,n,o,i){var r={};return r.mfgReferenceId=t,r.results=e.is(n)?n:null,r.contextProductModel={reference:e.is(o)&&e.is(o.referenceModel)?o.referenceModel:null,instance:e.is(o)&&e.is(o.instanceModel)?o.instanceModel:null},r.contextLinkNavigated=e.is(i)?i:null,r},C=function(e){return b(e,null,null,null)},{onStart:function(e){},onStop:function(){},getEnggAlternatesAndMfgs:function(n,o,i,a){const l=e=>e!==n,c=function(n,o,i){if(n.length>0){let r=i.contextLinkNavigated;r===v.IMPLEMENT&&(r=v.SCOPE);const a=P(i.contextProductRefId),l=n.map(a),c=s.getReference(i.contextProductRefId),u=e.is(i.contextProductInstId)?s.getInstance(i.contextProductInstId):null;return t.resolve(b(o,l,{referenceModel:c,instanceModel:u},r))}return t.resolve(C(o))};let u={};r.notify("startProgress",u),s.getAltSubContextProductPromise(n,o).then((function(t){let o;return o=e.is(t)?S(i,l,t).then((e=>c(e,n,t))):y(i,l).then((e=>c(e,n,I()))),o})).then((function(e){r.notify("stopProgress",u),a(e)})).catch((function(e){r.notify("stopProgress",u),r.log("Error : "+e),a({})}))},getLinkTypeEnum:function(){return v}}}}})),define("DS/DELPPWItemViewBehaviors/GroupingViewBehavior/ProcurementGroupingImplementation",["DS/DELPPWItemViewBehaviors/GroupingViewBehavior/AbstractGroupingClass","UWA/Core"],(function(e,t){"use strict";return function(n,o,i,r){var s,a,l,c=n.getBehavior("TreeListViewBehavior"),u=n.getBehavior("WUXNodeModelBehavior"),d=(n.getBehavior("SelectionBehavior"),function(e,n){var o=function(){},i=function(){};c.loadDocument(u.getWUXNodeModel()),u.addNode(n,{onAddToTreeListFail:o,onAddToTreeListComplete:i,fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1}),t.is(e,"array")&&e.length>0?e.forEach((function(e){u.addNode(e,{onAddToTreeListFail:o,onAddToTreeListComplete:i,fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1})})):(function(e,t){var n=t;!function e(t){var o=t.getInstancePID()||t.getReferencePID();Object.keys(n).filter((function(e){return n[e].parent===o})).forEach((function(n){var o,i,r;o=n.split("|")[1],i=n.split("|")[2],(r=u.addGroupingNode(o,t,null,!0,i)).hasChildren()&&r.getChildren().forEach((function(t){e(t)}))}))}(e)}(u.getNodeModel(n.get("PID"),!0),e),u.expandAllRoots())}),g=function e(n,o,i){var r,s,a,l={};if(t.is(n))t.is(n,"array")&&0!==n.length?(n.forEach((function(e){var n=e.get(o);t.is(l[o+":"+n])?l[o+":"+n].push(e):l[o+":"+n]=[e]})),n=l):Object.keys(n).forEach((function(t){var r="";t.contains(":")&&(r=t.split(":")[0]),"root"!==t&&r!==o&&(n[t]=e(n[t],o,i))}));else for((n={}).root=i[0],r=1;r<i.length;r++)s=(a=i[r]).get(o),t.is(n[o+":"+s])?n[o+":"+s].push(a):n[o+":"+s]=[a];return n},f=function(e){var t,n=!1,o="",i=!1,r=Object.keys(e);if(e.length>0&&(n=!0),r.length>0)for(t=0;t<r.length;t++)Number.isNaN(Number.parseInt(r[t]))&&(i=!0);return n&&i||!n&&!i?o="error":n?o="array":i&&(o="json"),o},p=function(e){var t=null,n=null;return l=e,i.isReference(l)?t=i.getAllChildrenFromCollection(l):(n=i.getReferenceIdFromInstance(l),t=i.getAllChildrenFromCollection(n)),i.getReferencesFromArray(t.referencesPID)},h=function(e,t){var n;return l=e,n=p(e),a=g(a,t,n)},m=function e(n,o){var i=[];return o&&"json"===f(o)&&Object.keys(o).forEach((function(r){var s,a="";"root"!==r&&(r.contains(":")&&(a=r.split(":")[0]),a===n?"array"===f(o[r])?(i=i.concat(o[r]),delete o[r]):"json"===f(o[r])?(s=o[r],Object.keys(s).forEach((function(e){t.is(i[e])?("array"===f(s[e])&&(i[e]=i[e].concat(s[e])),Number.isNaN(Number.parseInt(e))&&(i[e]=t.merge(i[e],s[e]))):i[e]=s[e]})),delete o[r]):console.error("ProcurementGroupingImplementation : wrong structure"):i[r]=e(n,o[r]))})),Object.keys(i).length>0&&(t.is(o)&&t.is(o.root)&&(i.root=o.root),o=i),o},I=function(e,n,o,r,s){var a,l,c,u,d,g,f=[],p=e,h=p;i.traverseInstanceModels(p,(function(e){if(t.is(s)){let n=e.getAdditionalInfo("filterQuery");t.is(n)&&t.equals(n,s)&&f.push(e)}else f.push(e)})),f.length>0&&(a=function(e,n){var o={};return e.forEach((function(e){var i=n(e);t.is(o[i])?o[i].push(e):o[i]=[e]})),o}(f,o),Object.keys(a).forEach((function(e){c=a[e][0],d=r(c).split("|")[0],g=r(c).split("|")[1],l=h+"|"+d+" ("+a[e].length+")|"+g,u=[],a[e].forEach((function(e){u.push(e.get("PID"))})),n[l]={parent:p,children:u}})))};return s=new e,t.extend(s,{group:function(e,o,r,s){var a;a=u.getWUXNodeModel(),t.is(a)&&a.removeRoots(),c.loadDocument(a),t.is(r)?function(e,t,n,o){var r={};I(e,r,t,n,o),d(r,i.getReferenceModel(e))}(r,e,o,s):n.debug("GroupingViewBehavior._groupingPID is not set")},ungroup:function(){},groupByAttribute:function(e,t){return h(e,t)},ungroupByAttribute:function(e){return m(e,a)},updateDatagrid:function(e){t.is(e)&&"MBOM"===e.sourceId&&this.group()}})}})),define("DS/DELPPWItemViewBehaviors/GroupingViewBehavior/StructuralGroupingImplementation",["UWA/Core","DS/DELPPWItemViewBehaviors/GroupingViewBehavior/AbstractGroupingClass"],(function(e,t){"use strict";return function(n,o){var i,r,s,a,l,c,u=new t,d=n.getBehavior("TreeListViewBehavior"),g=n.getBehavior("WUXNodeModelBehavior");n.getBehavior("SelectionBehavior");return i=function(e,t){var n=t;!function e(t){var i=t.getInstancePID()||t.getReferencePID();Object.keys(n).filter((function(e){return n[e].parent===i})).forEach((function(i){var r,s,a,l=n[i],c=n[i].groupingValue;a=l.children.map((function(e){return o.getInstance(e)})),r=i.split("|")[1],(s=g.addGroupingNode(r,t,a,c)).hasChildren()&&s.getChildren().forEach((function(t){e(t)}))}))}(e)},r=function(e,t,n){var o;d.loadDocument(g.getWUXNodeModel()),g.addNode(t,{onAddToTreeListFail:function(){},onAddToTreeListComplete:function(){},fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1,filterQuery:n}),o=g.getNodeModel(t.get("PID"),!0),i(o,e),g.expandAllRoots()},s=function(t,n){var o={};return t.forEach((function(t){var i=n(t);e.is(o[i])?o[i].push(t):o[i]=[t]})),o},l=function(e,t,n,i,r,a){var l,c,u,d,g,f=e,p=f,h=[];!function e(t,n){o.getFilteredInstancesFromCollection(t,a).forEach((function(t){n.push(t),g=o.getReferenceIdFromInstance(t.get("PID")),e(g,n)}))}(f,h),h.length>0&&(l=s(h,i),Object.keys(l).forEach((function(e){u=l[e][0],c=p+"|"+r(u)+" ("+l[e].length+")",d=[],l[e].forEach((function(e){d.push(e.get("PID"))})),t[c]={parent:n?f:undefined,children:d,groupingValue:e}})))},a=function e(t,n,i,r,a,l){var c,u,d,g,f,p,h=t,m=h;i||(h=o.getReferenceIdFromInstance(t),m=p=t),(d=o.getFilteredInstancesFromCollection(h,l)).length>0&&(c=s(d,r),Object.keys(c).forEach((function(e){g=c[e][0],u=m+"|"+a(g)+" ("+c[e].length+")",f=[],c[e].forEach((function(e){f.push(e.get("PID"))})),n[u]={parent:i?h:p,children:f,groupingValue:e}})),d.forEach((function(t){e(t.get("PID"),n,!1,r,a)})))},c=function(t,i,s,c){var u={},d=n.getBehavior("GroupingViewBehavior");e.is(d)&&d.isFlatView()?l(t,u,!0,i,s,c):a(t,u,!0,i,s,c),r(u,o.getReferenceModel(t))},e.extend(u,{group:function(t,o,i,r){var s;s=g.getWUXNodeModel(),e.is(s)&&s.removeRoots(),d.loadDocument(s),e.is(i)?c(i,t,o,r):n.debug("GroupingViewBehavior._groupingPID is not set")},ungroup:function(){}})}})),define("DS/DELPPWItemViewBehaviors/GroupingViewBehavior/GroupingViewBehavior",["UWA/Core","DS/CoreEvents/Events","DS/DELPPWItemViewBehaviors/GroupingViewBehavior/GroupingDialog","DS/DELPPWItemViewBehaviors/GroupingViewBehavior/ProcurementGroupingImplementation","DS/DELPPWItemViewBehaviors/GroupingViewBehavior/StructuralGroupingImplementation"],(function(e,t,n,o,i){"use strict";return{plugins:["UXComponentsPlugin","DatabasePlugin","ResourcePlugin","TreeViewPlugin","RootsPlugin"],creator:function(r,s,a,l,c,u,d){var g,f,p,h,m,I,S,y,P,b=null,C=[],v=[],A=null,N=!1,M=function(){const t=s.getBehavior("SelectionBehavior");let n=null;if(e.is(t)){const[,o]=t.getSelectionsWithPaths();if(e.is(o)){const t=function({id:t,path:n}){let o;if(0===n.length)o=t;else{const t=function(e){return e.length>0?e[0]:null}(n);if(e.is(t)){const n=l.getInstance(t);e.is(n)&&(o=n.get("isAggregatedBy"))}}return o}(o[0]),i=d.getRootFilter(t);if(e.is(i)){const t=i.originalFilterQuery;n=e.is(t)?t:null}}}return n},D=function(){var t,n,o,i,r,a=s.getBehavior("WUXNodeModelBehavior"),c=s.getBehavior("TreeListViewBehavior"),d=s.getBehavior("SelectionBehavior"),g=u.getViewColumnPreferences(s.getId(),"MBOM.columnConfigPath"),f="";A=null,u.resetColumnsForGrouping(s.getId()),o=a.getWUXNodeModel(),e.is(o)&&o.removeRoots(),f+='{"label":{"filterId": "set"}',g.Columns.Column.forEach((function(e){f=f+',"'+e.dataIndex+'":{"filterId": "set"}'})),f+="}",o.setFilterModel(e.Json.decode(f)),c.loadDocument(o),n=d.getSelections(),i=e.is(n[2])?n[2].length:0,r=e.is(n[1])?n[1].length:0;let p=M();i>0&&r>0||r>1?s.notify("MultipleOrNoObjectSelected","multipleObjects"):0===r?s.notify("MultipleOrNoObjectSelected","noObject"):e.is(h)&&1===r&&(t=l.getReferenceModel(h),a.addNode(t,{onAddToTreeListFail:function(){},onAddToTreeListComplete:function(){a.expandAllRoots()},filterQuery:p}),s.notify("OneObjectSelected"))},E=function(e){"multipleObjects"===e?p.showErrorMessage(c.getNLSValue("Error.MultipleObjectsSelected")):p.showErrorMessage(c.getNLSValue("Error.NoObjectSelected"))},R=function(){p.showDatagrid()},B=function(){return e.is(A)},L=function(t,n){var o,i,r;let a=M();y=n?{dataIndex:"PLMEntity.V_Name.reference",title:c.getNLSValue("Column.Manufacturing")}:e.is(t)?t:e.is(A)?A:null,(e.is(y)||n)&&(o=function(e){var t,n,o=null;return 2!==(t=e.split(".")).length&&3!==t.length||(n=t[t.length-1],["reference","instance"].includes(n)&&(o={attributeName:3===t.length?t[0]+"."+t[1]:t[t.length-2],modelType:n})),o}(y.dataIndex),e.is(o)&&(i=function(e){var t="reference"===o.modelType?l.getReferenceModelFromInstance(e):e;return n?t.get("PID"):t.get(o.attributeName)},r=function(t){var i,r,a="reference"===o.modelType?l.getReferenceModelFromInstance(t):t,u=o.attributeName;return"PID"!==u&&"physicalid"!==u||(u="reference"===o.modelType?"PLMEntity.V_Name":"PLMInstance.PLM_ExternalID"),e.is(b)||(b=s.getBehavior("ModelBehavior")),r=a.get(u),i=c.getNLSValue(r)||r,e.is(i)&&""!==i||(i="N/A"),n?i+"|"+a.get("type"):y.title+": "+i},m?g.group(i,r,h,a):f.group(i,r,h,a),n||(A=y),s.notify("GroupingApplied")))},V=function(e){let t=M();var n=s.getBehavior("WUXNodeModelBehavior");e?(P=n.getRoots(),n.getFlattenNodeModel(n.getRoots(),e,t)):(n.emptyNodeModel(),n.getFlattenNodeModel(P,e,t)),B()&&L(null,!1)};return{listenTo:function(){return{activateProcurementGrouping:this.toggleProcurementGrouping,activateFlattenView:this.toggleFlattenView}},onStart:function(){g=new o(s,r,l,c),f=new i(s,l,c),C.push(r.addExternalListener("select",(function(e){e.sourceId!==s.getId()&&D()}))),C.push(r.addExternalListener("OneObjectSelected",R)),C.push(r.addExternalListener("MultipleOrNoObjectSelected",E)),m=!1,u.registerModuleForRecursiveGrouping(s.getId()),S=r.getPlugins("DatabasePlugin").instance,(I=s.getBehavior("WUXNodeModelBehavior").getTreeDocument()).options.shouldAcceptDrag=function(t){var n=e.is(t)?t:{},o=S.getPPRType(n.getReferencePID());return!!e.is(o)},I.options.shouldAcceptDrop=function(t){var n=e.is(t.dropNode)?t.dropNode:{},o=!1,i=S.getPPRType(n.getReferencePID());return"middle"===t.dropPosition&&(o=!e.is(i)),o}},onStop:function(){var e;for(e=0;e<C.length;e++)r.removeExternalListener(C[e]);for(C=[],e=0;e<v.length;e++)t.unsubscribe(v[e]);v=[],null,m=!1,u.resetColumnsForGrouping(s.getId()),u.unRegisterModuleForRecursiveGrouping(s.getId()),A=null},toggleProcurementGrouping:function(e){(m=e)?(V(!0),this.group(null,!0),B()&&this.group(null,!1)):(V(!1),B()&&this.group(null,!1))},toggleFlattenView:function(e){this.isFlatView(e),V(e)},showAttributeSelectionDialog:function(e){var t=s.getBehavior("UXFactoryBehavior");new n(s,t,a).show(e)},groupByAttribute:function(e,t){o.groupByAttribute(e,t)},group:function(e,t){L(e,t)},clearGrouping:function(){D(),N?this.toggleFlattenView(!0):m&&this.toggleProcurementGrouping(!0),s.notify("GroupingRemoved")},deleteFilters:function(){null,N=!1},displayView:function(e){switch(e){case"procView":g.group();break;case"structureView":f.group();break;default:D()}},setDatagridView:function(e){p=e},setGroupingPID:function(e){h=e},isFlatView:function(t){if(!e.is(t,"boolean"))return N;N=t}}}}}));