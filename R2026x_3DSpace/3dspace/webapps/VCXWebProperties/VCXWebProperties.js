"use strict";define("DS/VCXWebProperties/VCXPropertySet",["require","exports"],(function(e,t){class r{constructor(){this._map={}}get map(){return this._map}AddOrModifyProperty(e){if(e)if(e.GetPropertyValue())if(void 0!==e.GetPropertyValue().GetValue()){var t=e.GetPropertyInfo().GetPropertyName();if(t)return this._map[t]=e,!0;console.log("VCXPropertySet::AddOrModifyProperty NO property name !!")}else console.log("VCXPropertySet::AddOrModifyProperty NO VALUE !!");else console.log("VCXPropertySet::AddOrModifyProperty NO PROP VALUE !!");else console.log("VCXPropertySet::AddOrModifyProperty vcxProperty NULL !!");return!1}GetProperty(e){return this._map[e]}GetListPropertyNames(e){for(var t in this._map)if(this._map.hasOwnProperty(t)){var r=t;e.push(r)}return this}Clone(){var e=new r;for(var t in this._map)this._map.hasOwnProperty(t)&&e.AddOrModifyProperty(this._map[t].Clone());return e}RemoveProperty(e){return delete this._map[e],this}GetPropertyNumber(){var e=0;for(var t in this._map)this._map.hasOwnProperty(t)&&e++;return e}Merge(e){if(e){var t=this._map,r=e._map;for(var i in r)if(r.hasOwnProperty(i)){var o=t[i],n=r[i];o&&o.GetPropertyValue().IsEqualTo(n.GetPropertyValue())||this.AddOrModifyProperty(n.Clone())}}}onEachProperty(e){if(e)for(var t in this._map)if(this._map.hasOwnProperty(t)){var r=this._map[t];r&&e(t,r)}}IsEqualTo(e,t){if(t||(t={}),void 0===t.epsi&&(t.epsi=1e-5),void 0===t.epsiDist&&(t.epsiDist=1e-5),void 0===t.epsiScale&&(t.epsiScale=1e-5),void 0===t.epsiRot&&(t.epsiRot=1e-5),!e)return!1;var r=!0===t.intersection;if(!r&&this.GetPropertyNumber()!==e.GetPropertyNumber())return!1;var i=this._map,o=e._map,n=!0;for(var s in o)if(o.hasOwnProperty(s)&&(!t.propertiesNameToCompare||t.propertiesNameToCompare.includes(s))){var a=i[s];if(a){var l=o[s];let e=l.GetPropertyInfo().IsDefined(),r=a.GetPropertyInfo().IsDefined();if(!e&&!r)continue;r&&e||(console.warn("[ODT][diff] "+s+" IsDefined Cur = "+r),console.warn("[ODT][diff] "+s+" IsDefined Ref = "+e),n=!1),a.GetPropertyValue().IsEqualTo(l.GetPropertyValue(),t)||(n=!1,t.logDiff&&(console.warn("[ODT][diff] "+s+" Cur = "),a.GetPropertyValue().ToConsoleForDiff(),console.warn("[ODT][diff] "+s+" Ref = "),l.GetPropertyValue().ToConsoleForDiff(),t.logDetail&&(t.logDetail("[ODT][diff] "+s+" Cur = "+a.GetPropertyValue().ToString()),t.logDetail("[ODT][diff] "+s+" Ref = "+l.GetPropertyValue().ToString()))))}else r||(n=!1,!0===t.logDiff&&(console.warn("[ODT][diff] "+s+"NOT FOUND"),t.logDetail&&t.logDetail("[ODT][diff] "+s+"NOT FOUND")));if(!t.logDiff&&!n)break}return n}Iterate(e,t){if(!e)return!1;for(var r in this._map)if(this._map.hasOwnProperty(r)&&!e(r,this._map[r],t))return!1;return!0}Check(){let e=!0;for(const t in this._map)if(this._map.hasOwnProperty(t)){const r=this._map[t];if(!r){console.error(`VCXPropertySet::Check - Property "${t}" is null or undefined.`),e=!1;continue}const i=r.GetPropertyValue();if(!i){console.error(`VCXPropertySet::Check - Property "${t}" has no value.`),e=!1;continue}const o=i.GetValue();null!=o&&""!==o||(console.error(`VCXPropertySet::Check - Property "${t}" has an empty or invalid value.`),e=!1)}return e}}return r})),define("DS/VCXWebProperties/VCXProperty",["require","exports"],(function(e,t){class r{constructor(e,t){this._propertyInfo=e,this._propertyValue=t}SetPropertyInfo(e){return this._propertyInfo=e,this}SetPropertyValue(e){return this._propertyValue=e,this}GetPropertyInfo(){return this._propertyInfo}GetPropertyValue(){return this._propertyValue}Clone(){return new r(this._propertyInfo.Clone(),this._propertyValue.Clone())}}return r})),define("DS/VCXWebProperties/VCXPropertyValue",["require","exports"],(function(e,t){return class{constructor(e){this.SetValue(e)}GetType(){throw new Error("Must be implemented")}ToConsoleForDiff(){console.log(this.ToString())}ToString(){return void 0!==this.GetValue()?this.GetValue().toString():"undefined"}FromString(e){return this.SetValue(e),this}SetValue(e){return null==e?(console.log("WARNING SetValue() with undefined or null!!"),this):(this._value=e,this)}GetValue(){return this._value}Clone(){throw new Error("Must be implemented")}IsEqualTo(e,t){if(e){var r=e.GetValue();return this._value===r}return!1}CheckForInterpolatedValue(e,t){if(t){if(!e)return t;if(e.IsEqualTo(t))return e}else if(e)return e}GetInterpolatedValue(e,t,r){return e}GetCubicInterpolatedValue(e,t,r,i,o,n,s,a,l){return t}get Value(){return this.GetValue()}set Value(e){this.SetValue(e)}}})),define("DS/VCXWebProperties/VCXPropertyGroup",["require","exports"],(function(e,t){class r{constructor(e){this.groupID="",this.priority=9999999,this.i18nGroup="",this._propertiesOrder=[],this._propertiesInfos={},this.visibility=void 0,this.availability=void 0,this.PropertyControlingGroupVisibility="",this.PropertyControlingGroupAvailability="",e&&(this.groupID="string"==typeof e.groupID&&e.groupID||"",this.priority="number"==typeof e.priority&&e.priority||9999999,this.i18nGroup="string"==typeof e.i18nGroup&&e.i18nGroup||"")}addProperty(e){return"object"!=typeof e?(console.warn("Method deprecated, use addProperty(iParams)"),!1):(this.addProperties([e]),!0)}addPropertyFromPropertyGroup(e,t){let r=e._getInfo(t);return this.addProperties([r]),!0}addProperties(e){for(var t=0;t<e.length;++t){var r=e[t].propertyName,i=e[t].i18n,o=e[t].nlsId;r?(this._propertiesInfos[r]||(this._propertiesInfos[r]={}),this._propertiesInfos[r].propertyName=r,this._propertiesInfos[r].i18n=i,this._propertiesInfos[r].nlsId=o||r,e[t].mapChoiceEnum&&(this._propertiesInfos[r].mapChoiceEnum=e[t].mapChoiceEnum),e[t].mapChoiceIcons&&(this._propertiesInfos[r].mapChoiceIcons=e[t].mapChoiceIcons),"boolean"==typeof e[t].visible?this._propertiesInfos[r].visible=e[t].visible:"boolean"!=typeof this._propertiesInfos[r].visible&&(this._propertiesInfos[r].visible=!0),Array.isArray(e[t].hiddenFields)&&(this._propertiesInfos[r].hiddenFields=e[t].hiddenFields),"boolean"==typeof e[t].locked?this._propertiesInfos[r].locked=e[t].locked:"boolean"!=typeof this._propertiesInfos[r].locked&&(this._propertiesInfos[r].locked=null)):console.warn("Missing propertyName while adding a property to a propertyGroup!")}}removeProperty(e){return this.removeProperties([e]),!0}removeProperties(e){for(var t=0;t<e.length;++t){var r=e[t];this._propertiesInfos[r]&&delete this._propertiesInfos[r]}return!0}empty(){this._propertiesInfos={}}isIn(e){return"string"!=typeof e?(console.warn("isIn: Invalid arguments"),null):this._propertiesInfos[e]}setVisible(e,t){if("string"!=typeof e&&"boolean"!=typeof t)return console.warn("setVisible: Invalid arguments"),!1;this._propertiesInfos[e]||(this._propertiesInfos[e]={propertyName:e}),this._propertiesInfos[e].visible=t}isVisible(e){return"string"!=typeof e?(console.warn("isVisible: Invalid arguments"),null):this._propertiesInfos[e]?this._propertiesInfos[e].visible:null}isLockable(e){return"string"!=typeof e?(console.warn("isVisible: Invalid arguments"),null):this._propertiesInfos[e]?"boolean"==typeof this._propertiesInfos[e].locked:null}setPropertiesOrder(e){Array.isArray(e)?this._propertiesOrder=e:console.warn("Need an ordered array of properties names")}getPropertiesIDsOrderedArray(){var e=[],t=[];for(var r in this._propertiesInfos)if(this._propertiesInfos.hasOwnProperty(r)){var i=this._propertiesOrder.indexOf(r);i>=0?e[i]=r:(!r.includes(".Show")&&r.includes(".Availability"),t.push(r))}return e=(e=e.filter((function(e){return e}))).concat(t)}setProperties(e){this._propertiesInfos=e}getProperties(){return this._propertiesInfos}getName(){return this.groupID}isPropertyIn(e){return!!this._propertiesInfos[e]}geti18n(e){return this._getInfo(e,"i18n")}getNLSId(e){return this._getInfo(e,"nlsId")}_getInfo(e,t){var r="";return this._propertiesInfos[e]&&(r=this._propertiesInfos[e],t&&(r=this._propertiesInfos[e][t])),r}clone(){var e=new r({groupID:this.groupID});e._propertiesOrder=this._propertiesOrder.slice(0),e.priority=this.priority,e.i18nGroup=this.i18nGroup,e.PropertyControlingGroupVisibility=this.PropertyControlingGroupVisibility,e.PropertyControlingGroupAvailability=this.PropertyControlingGroupAvailability,e.visibility=this.visibility,e.availability=this.availability,this.additionalPropertySettings&&(e.additionalPropertySettings=this.additionalPropertySettings);for(let t in this._propertiesInfos)e._propertiesInfos[t]=this._propertiesInfos[t];return e}}return r})),define("DS/VCXWebProperties/VCXPropertyInfo",["require","exports"],(function(e,t){class r{constructor(e,t=r.EBehaviorType.Animable,i=!0,o){this._bDefined=!0,this._bVisible=!0,this._groupId="",this._bBounded=!1,this._valueMin=0,this._valueMax=0,this._decimals=null,this._step=1,this._metaPropertyDef=null,this._controlsGroupVisibility=!1,this._eType=0,this._strPropertyName=e,this._eBehaviorType=t,this._bPersistent=i,this._NLSID=this._strPropertyName,this._i18n=o}IsPersistent(){return this._bPersistent}SetMetaPropertyDef(e){return this._metaPropertyDef=e,this}GetMetaPropertyDef(){return this._metaPropertyDef}GetPropertyName(){return this._strPropertyName}SetType(e){return this._eType=e,this}GetType(){return this._eType}GetBehaviorType(){return this._eBehaviorType}SetBehaviorType(e){return this._eBehaviorType=e,this}SetNLSID(e){return this._NLSID=e,this}GetNLSID(){return this._NLSID}IsDefined(){return!0===this._bDefined}IsVisible(){return!0===this._bVisible}SetDefined(e){return this._bDefined=e,this}SetVisible(e){return this._bVisible=e,this}SetBounds(e,t,r,i=null){return"number"==typeof e&&(this._valueMin=e),"number"==typeof t&&(this._valueMax=t),"number"==typeof i&&(this._decimals=i),"number"==typeof r&&(t&&r>=t&&(r=t),this._step=r),null!==this._valueMin&&null!==this._valueMax&&(this._bBounded=!0),this}GetBounds(){return{valueMin:this._valueMin||0,valueMax:this._valueMax||0,step:this._step||0,decimals:this._decimals}}IsBounded(){return!0===this._bBounded}Seti18nGroup(e){return this._i18nGroup=e,this}Geti18nGroup(){return this._i18nGroup}Seti18n(e){return this._i18n=e,this}Geti18n(){return this._i18n}SetGroupId(e){return this._groupId=e,this}GetGroupId(){return this._groupId}SetUnitType(e){return this._unitType=e,this}GetUnitType(){return this._unitType}SetControlsGroupVisibility(e){return this._controlsGroupVisibility=e,this}GetControlsGroupVisibility(){return this._controlsGroupVisibility}Copy(e){return e?(this.SetBehaviorType(e.GetBehaviorType()),this.Seti18n(e.Geti18n()),this.SetDefined(e.IsDefined()),this.SetVisible(e.IsVisible()),this.SetNLSID(e.GetNLSID()),this.Seti18nGroup(e.Geti18nGroup()),this.SetGroupId(e.GetGroupId()),e.IsBounded()&&this.SetBounds(e.GetBounds().valueMin,e.GetBounds().valueMax,e.GetBounds().step,e.GetBounds().decimals),this.SetMetaPropertyDef(e.GetMetaPropertyDef()),this.SetControlsGroupVisibility(e.GetControlsGroupVisibility()),this.SetUnitType(e.GetUnitType()),this.SetType(e.GetType()),this):this}Clone(){return new r(this.GetPropertyName(),this.GetBehaviorType(),this.IsPersistent(),this.Geti18n()).Copy(this)}}return function(e){let t;!function(e){e[e.Animable=0]="Animable",e[e.NotAnimable=1]="NotAnimable",e[e.Singleton=2]="Singleton"}(t=e.EBehaviorType||(e.EBehaviorType={}))}(r||(r={})),r})),define("DS/VCXWebProperties/VCXPropertyGroupSet",["require","exports"],(function(e,t){class r{constructor(){this._map={}}AddOrModifyGroup(e){if(e){var t=e.groupID;return this._map[t]=e,!0}return console.log("VCXPropertyGroupSet::AddOrModifyProperty vcxPropertyGroup NULL !!"),!1}SetFromGroupsMap(e){return this._map=e,this}getGroupMap(){return this._map}RemoveGroup(e){return delete this._map[e],this}GetPropertyGroup(e){return this._map[e]}getListPropertiesNames(){var e=[];for(var t in this._map){var r=this._map[t];if(!1!==r.availability)for(var i=r.getPropertiesIDsOrderedArray(),o=0;o<i.length;++o){var n=i[o];e.push(n)}}return e}getOrderedPropertyGroupsArray(){var e=[];for(var t in this._map)!1!==this._map[t].availability&&e.push(this._map[t]);return e.sort(this._propGroupSort),e}_propGroupSort(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}Clone(){var e=new r;for(var t in this._map)this._map.hasOwnProperty(t)&&e.AddOrModifyGroup(this._map[t].clone());return e}GetGroupsQuantity(){var e=0;for(var t in this._map)this._map.hasOwnProperty(t)&&e++;return e}Intersection(e){if(1!==e.length){for(var t={},r=0;r<e.length;r++){var i=e[r];if(i){var o=i.getGroupMap();for(var n in o)if(o.hasOwnProperty(n))for(var s=o[n],a=s.getPropertiesIDsOrderedArray(),l=0;l<a.length;++l){let e=a[l];t[e]||(t[e]={}),"number"!=typeof t[e][s.groupID]?t[e][s.groupID]=1:++t[e][s.groupID]}}}for(let r in t)if(t.hasOwnProperty(r)){var u=Object.keys(t[r]);if(1!==u.length)continue;var p=u[0];if(t[r][p]!==e.length)continue;var h=e[0].getGroupMap()[p];this._map[p]||(this._map[p]=h.clone(),this._map[p].empty()),this._map[p].addPropertyFromPropertyGroup(h,r)}}else this.SetFromGroupsMap(e[0].getGroupMap())}onEachGroup(e){if(e)for(var t in this._map)if(this._map.hasOwnProperty(t)){var r=this._map[t];r&&e(t,r)}}}return r})),define("DS/VCXWebProperties/VCXColor",["require","exports","DS/Visualization/ThreeJS_DS"],(function(e,t,r){class i extends r.Color{constructor(e){super(e),this.GetThreeColor=function(){return this},this._a=1}Copy(e){return this.SetRGBA(e.r,e.g,e.b,1),this}SetRGBA(e=1,t=1,r=1,i=1){return this.setRGB(e,t,r),this._a=i,this}Clone(){var e=new i;return e.SetRGBA(this.r,this.g,this.b,this._a),e}SetFromName(e){let t=document.createElement("div");t.style.color=e,document.body.appendChild(t);let r=window.getComputedStyle(t).getPropertyValue("color");document.body.removeChild(t);let i=r.substr(4).split(")")[0].split(","),o=parseInt(i[0])/255,n=parseInt(i[1])/255,s=parseInt(i[2])/255;return this.setRGB(o,n,s),this}FromRGBA(e=1,t=1,r=1,i=1){return this.SetRGBA(e,t,r,i),this}GetRGBA(){var e=[];return e.push(this.r),e.push(this.g),e.push(this.b),e.push(this._a),e}GetStyle(){return`rgba(${(255*this.r).toFixed(0)},${(255*this.g).toFixed(0)},${(255*this.b).toFixed(0)},${this._a})`}SetRGB(e,t,r){return this.setRGB(e,t,r),this}FromRGB(e,t,r){return this.SetRGB(e,t,r),this._a=1,this}SetThreeColor(e){return e&&this.copy(e),this}Lerp(e,t){return e?(this.lerp(e,t),this._a+=(e._a-this._a)*t,this):null}SetRGBfromHexString(e){return e&&(this.setStyle(e),this._a=1),this}FromHexString(e){return this.SetRGBfromHexString(e),this}GetColorHexString(){return this.getHexString()}GetColorAlphaHexString(){return this.getHexString()+Math.round(255*this.a).toString(16).padStart(2,"0").toUpperCase()}SetRGBfromHex(e){return e&&(this.setHex(e),this._a=1),this}FromHex(e){return this.SetRGBfromHex(e),this}GetHex(){return this.getHex()}FromYIQ(e){return this.r=1*e.y+.9563*e.i+.621*e.q,this.g=1*e.y-.2721*e.i-.6474*e.q,this.b=1*e.y-1.107*e.i+1.7046*e.q,this._a=e.a,this}GetYIQ(){let e={};return e.y=.2999*this.r+.587*this.g+.114*this.b,e.i=.595716*this.r-.274453*this.g-.321264*this.b,e.q=.211456*this.r-.522591*this.g+.31135*this.b,e.a=this._a,e}getAssociatedColors(){let e={},t=this.GetYIQ(),i=t.y;e.body=this.Clone(),e.border=this.Clone();const o=(e,t,r)=>Math.min(Math.max(e,t),r);t.y=i-.3<0?i+.3:i-.3,e.border.FromYIQ(t),e.border.r=o(e.border.r,0,1),e.border.g=o(e.border.g,0,1),e.border.b=o(e.border.b,0,1),e.text=this.Clone();var n=new r.Color(0);return i<.5&&(n=new r.Color(16777215)),e.text.SetThreeColor(n),e.image=this.Clone(),e.attach=e.border.Clone(),e}IsEqualTo(e,t){return!!e&&(this.equals(e)&&this._a===e._a)}get a(){return this._a}set a(e){this._a=e}}return i})),define("DS/VCXWebProperties/VCXPropertyInfoEnum",["require","exports","DS/VCXWebProperties/VCXPropertyInfo"],(function(e,t,r){class i extends r{constructor(e,t,r,i){super(e,t,r,i),this._mapChoiceEnum={},this._mapEnumIcons={}}AddOrModifyChoice(e,t){return this._mapChoiceEnum[e]=t,this}SetMapChoiceEnum(e){return this._mapChoiceEnum=e,this}GetMapChoiceEnum(){return this._mapChoiceEnum}AddOrModifyIcon(e,t){return this._mapEnumIcons[e]=t,this}GetMapIcons(){return this._mapEnumIcons}SetMapIcons(e){return this._mapEnumIcons=e,this}Copy(e){return e?(this.SetMapChoiceEnum(e.GetMapChoiceEnum()),this.SetMapIcons(e.GetMapIcons()),this):this}Clone(){return new i(this.GetPropertyName(),this.GetBehaviorType(),this.IsPersistent(),this.Geti18n()).Copy(this)}}return i})),define("DS/VCXWebProperties/VCXPropertyValueMap",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=[]){super(e)}GetType(){return"VCXPropertyValueMap"}SetValues(e,t,r){for(var i=-1,o=0;o<e.length;o++){var n=e[o].type;void 0!==e[o].index?i=e[o].index:i++;var s=t(n,e[o].value,r);this.SetValueAtIndex(i,s)}return this}ToString(){for(var e="",t=0;t<this._value.length;t++)e+=this._value[t].ToString(),t!==this._value.length-1&&(e+="/");return e}FromString(e){for(var t=e.split("/"),r=0;r<t.length;r++)this._value[r].FromString(t[r]);return this}SetValueAtIndex(e,t){return this._value[e]=t,this}GetValueAtIndex(e){return this._value[e]}IsEqualTo(e,t){if(!(e instanceof i))return!1;var r=e.GetValue();if(this._value.length!==r.length)return!1;for(var o=0;o<this._value.length;o++)if(!this._value[o].IsEqualTo(r[o],t))return!1;return!0}Clone(){var e=new i;return this.CloneValue(e),e}CloneValue(e){for(var t=0;t<this._value.length;t++){var r=this._value[t];r&&e.SetValueAtIndex(t,r.Clone())}}GetInterpolatedValue(e,t,r){var i=e.GetValue(),o=t.GetValue();if(i.length!==o.length)return e;for(var n=e.Clone(),s=0;s<i.length;s++){var a=i[s].GetInterpolatedValue(i[s],o[s],r);n.SetValueAtIndex(s,a)}return n}GetCubicInterpolatedValue(e,t,r,i,o,n,s,a,l){if(void 0===e||void 0===r||void 0===i)return t;var u=t.GetValue(),p=r.GetValue(),h=e.GetValue(),V=i.GetValue();if(u.length!==p.length||h.length!==p.length||u.length!==V.length)return t;for(var y=t.Clone(),d=0;d<u.length;d++){var f;f=u[d].GetCubicInterpolatedValue?u[d].GetCubicInterpolatedValue(h[d],u[d],p[d],V[d],o,n,s,a,l):u[d].Clone(),y.SetValueAtIndex(d,f)}return y}}return i})),define("DS/VCXWebProperties/VCXPropertyValueString",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=""){super(e),this.GetType=function(){return"VCXPropertyValueString"}}SetValue(e){return"string"!=typeof e?(console.warn("WARNING : VCXPropertyValueString value is NOT string !!"),this):super.SetValue(e)}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyValueLink",["require","exports","DS/CoreEvents/Events","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r,i){class o extends i{constructor(e=""){super(e)}GetType(){return"VCXPropertyValueLink"}SetValue(e){return"string"!=typeof e?(console.log("WARNING : VCXPropertyValueLink value is NOT string !!"),this):(e!==this._value&&r.publish({event:"/VCXWebProperties/VCXPropertyValueLink/NewLink",data:{propertyValue:this,newValue:e}}),super.SetValue(e))}SetValueFromComponent(e){var t="";return e&&(t=e.GetID()),this.SetValue(t),this}Clone(){return new o(this.GetValue())}}return o})),define("DS/VCXWebProperties/VCXPropertyValueLinkedProperty",["require","exports","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueLink","DS/VCXWebProperties/VCXPropertyValueString"],(function(e,t,r,i,o){class n extends r{constructor(e){if(super(e),!e){var t=new i;this.SetValueLink(t);var r=new o;this.SetValuePropertyName(r)}}GetType(){return"VCXPropertyValueLinkedProperty"}Clone(){var e=new n;return this.CloneValue(e),e}SetValueLink(e){return this.SetValueAtIndex(0,e),this}SetValueLinkFromComponent(e){var t=new i;return t.SetValueFromComponent(e),this.SetValueLink(t),this}GetValueLink(){return this.GetValueAtIndex(0)}SetValuePropertyName(e){return this.SetValueAtIndex(1,e),this}GetValuePropertyName(){return this.GetValueAtIndex(1)}}return n})),define("DS/VCXWebProperties/VCXPropertyValueFrame",["require","exports","DS/Visualization/ThreeJS_DS","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r,i){class o extends i{constructor(e=new r.Matrix4){super(e),this.interScale=new r.Vector3,this.interQuaternion=new r.Quaternion,this.interPosition=new r.Vector3}GetType(){return"VCXPropertyValueFrame"}Clone(){return new o((new r.Matrix4).copy(this.GetValue()))}SetValueFromVector(e){return this.SetValue((new r.Matrix4).setPosition(e)),this}GetValueAsVector(){return(new r.Vector3).getPositionFromMatrix(this.GetValue())}GetInterpolatedValue(e,t,i){let n=this.CheckForInterpolatedValue(e,t);if(n)return n;var s=e.GetValue().decompose(),a=s[0],l=s[1],u=s[2],p=t.GetValue().decompose(),h=p[0],V=p[1],y=p[2],d=a.x*(1-i)+h.x*i,f=a.y*(1-i)+h.y*i,c=a.z*(1-i)+h.z*i;this.interPosition.set(d,f,c),r.Quaternion.slerp(l,V,this.interQuaternion,i);var S=u.x*(1-i)+y.x*i,P=u.y*(1-i)+y.y*i,C=u.z*(1-i)+y.z*i;this.interScale.set(S,P,C);var v=new r.Matrix4;return v.compose(this.interPosition,this.interQuaternion,this.interScale),new o(v)}log(e){var t,i=new r.Quaternion;i.copy(e),i.normalize();var o=[];t=Math.atan2(i.length(),i.w),i.length()>0?(o[0]=t/i.length(),o[1]=t/i.length(),o[2]=t/i.length()):(o[0]=1,o[1]=0,o[2]=0,t=0);var n=new r.Quaternion;return n.x=i.x*o[0],n.y=i.y*o[1],n.z=i.z*o[2],n.w=0,n}intermediatePointV2(e,t,i){var o=new r.Quaternion;o.copy(t),o.inverse();var n=new r.Quaternion;n.copy(o),n.multiply(i),n=this.log(n);var s=new r.Quaternion;s.copy(o),s.multiply(e),s=this.log(s);var a=new r.Quaternion;a.copy(n),a.add(s),a.multiplyScalar(-.25);var l=new r.Quaternion;return l.copy(t).multiply(a.exp()),l}GetCubicInterpolatedValue(e,t,i,n,s,a,l,u,p){if(void 0===t||void 0===i||null===t||null===i)return t;null==e&&(e=t),null==n&&(n=i);var h=new r.Quaternion,V=new r.Quaternion,y=new r.Quaternion,d=new r.Quaternion,f=e.GetValue().decompose(),c=f[0];h=f[1];var S=f[2],P=t.GetValue().decompose(),C=P[0];V=P[1];var v=P[2],G=i.GetValue().decompose(),m=G[0];y=G[1];var g=G[2],I=n.GetValue().decompose(),_=I[0];d=I[1];var X=I[2],D=new r.Quaternion,b=new r.Quaternion,w=new r.Quaternion,T=(new r.Quaternion).copy(h).multiplyScalar(-1),x=(new r.Quaternion).copy(V).multiplyScalar(-1),F=(new r.Quaternion).copy(y).multiplyScalar(-1),A=(new r.Quaternion).copy(d).multiplyScalar(-1),M=h.add(V).length()<h.add(x).length()?T:h,W=V.add(y).length()<V.add(F).length()?F:y,O=y.add(d).length()<y.add(A).length()?A:d;D=this.intermediatePointV2(M,V,W),b=this.intermediatePointV2(V,W,O),(w=(new r.Quaternion).squad(V,D,b,W,p)).normalize();var N,B,q,k=2*p*p*p-3*p*p+1,E=p*p*p-2*p*p+p,L=-2*p*p*p+3*p*p,R=p*p*p-p*p;N=l!==a?1/(l-a):1,B=l!==s?1/(N*(l-s)):1,q=u!==a?1/(N*(u-a)):1;var Q=new r.Vector3;Q.subVectors(m,c).multiplyScalar(B);var H=new r.Vector3;H.subVectors(_,C).multiplyScalar(q);var U=C.multiplyScalar(k),z=Q.multiplyScalar(E),$=m.multiplyScalar(L),j=H.multiplyScalar(R),J=new r.Vector3;J.addVectors(U,z),J.addVectors(J,$),J.addVectors(J,j);var Y=new r.Vector3;Y.subVectors(g,S).multiplyScalar(B);var K=new r.Vector3;K.subVectors(X,v).multiplyScalar(q);var Z=v.multiplyScalar(k),ee=Y.multiplyScalar(E),te=g.multiplyScalar(L),re=K.multiplyScalar(R),ie=new r.Vector3;ie.addVectors(Z,ee),ie.addVectors(ie,te),ie.addVectors(ie,re);var oe=new r.Matrix4;oe.compose(J,w,ie);var ne=new o;return ne.SetValue(oe),ne}ToString(){for(var e=this.GetValue().elements,t="[",r=0;r<e.length;r++)t+=e[r],r!==e.length-1&&(t+=",");return t+="]"}_FormatFloat(e){for(var t=e.toPrecision(7),r=12-t.length,i="",o=0;o<r;o++)i+=" ";return i+t}ToConsoleForDiff(){var e=this.GetValue().elements;console.log("[ODT][diff]       "+this._FormatFloat(e[0])+"\t"+this._FormatFloat(e[4])+"\t"+this._FormatFloat(e[8])+"\t"+this._FormatFloat(e[12])),console.log("[ODT][diff]       "+this._FormatFloat(e[1])+"\t"+this._FormatFloat(e[5])+"\t"+this._FormatFloat(e[9])+"\t"+this._FormatFloat(e[13])),console.log("[ODT][diff]       "+this._FormatFloat(e[2])+"\t"+this._FormatFloat(e[6])+"\t"+this._FormatFloat(e[10])+"\t"+this._FormatFloat(e[14])),console.log("[ODT][diff]       "+this._FormatFloat(e[3])+"\t"+this._FormatFloat(e[7])+"\t"+this._FormatFloat(e[11])+"\t"+this._FormatFloat(e[15]))}FromString(e){let t=e.slice(1,e.length-1).split(","),i=[];for(var o=0;o<t.length;o++)i[o]=parseFloat(t[o]);var n=new r.Matrix4;return n.set(i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14],i[3],i[7],i[11],1),this.SetValue(n),this}IsEqualTo(e,t){if(e){var i=e.GetValue();if(i){let e=new r.Vector3,n=new r.Quaternion,s=new r.Vector3;this._value.decompose(e,n,s);let a=new r.Vector3,l=new r.Quaternion,u=new r.Vector3;i.decompose(a,l,u);let p=1e-5;if(t&&t.epsiDist&&(p=t.epsiDist),e.distanceToSquared(a)>p*p)return t&&t.logDiff&&(console.warn("[ODT][diff] distance = "+e.distanceTo(a)+">"+p),t.logDetail&&t.logDetail("[ODT][diff] distance = "+e.distanceTo(a)+">"+p)),!1;let h=1e-5;if(t&&t.epsiScale&&(h=t.epsiScale),s.distanceToSquared(u)>h*h)return t&&t.logDiff&&(console.warn("[ODT][diff] scale = "+s.distanceTo(u)+">"+h),t.logDetail&&t.logDetail("[ODT][diff] scale = "+s.distanceTo(u)+">"+h)),!1;var o=1e-5;t&&t.epsiRot&&(o=t.epsiRot);let V=2*Math.acos(Math.abs(Math.max(Math.min(n.dot(l),1),-1)));return!(V>o)||(t&&t.logDiff&&(console.warn("[ODT][diff] angle = "+V+">"+o),t.logDetail&&t.logDetail("[ODT][diff] angle = "+V+">"+o)),!1)}}return!1}}return o})),define("DS/VCXWebProperties/VCXPropertyValueInt",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=0){super(e)}GetType(){return"VCXPropertyValueInt"}SetValue(e){return"number"!=typeof e?(console.log("WARNING : VCXPropertyValueInt value is NOT number !!"),this):super.SetValue(e)}FromString(e){var t=parseInt(e);return this.SetValue(t),this}GetInterpolatedValue(e,t,r){var o=this.CheckForInterpolatedValue(e,t);if(o)return o;var n=Math.floor(e.GetValue()*(1-r)+t.GetValue()*r);return new i(n)}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyValueBoolean",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=!0){super(e),this.GetType=function(){return"VCXPropertyValueBoolean"}}SetValue(e){return"boolean"!=typeof e?(console.log("WARNING : VCXPropertyValueBoolean value is NOT boolean !!"),this):super.SetValue(e)}FromString(e){var t="true"===e||"1"===e;return this.SetValue(t),this}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyValueFloat",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=0){super(e)}GetType(){return"VCXPropertyValueFloat"}SetValue(e){return"number"!=typeof e?(console.log("WARNING : VCXPropertyValueEnum value is NOT number !!"),this):super.SetValue(e)}IsEqualTo(e,t){if(e){var r=e.GetValue();return t&&t.epsi?!(Math.abs(this._value-r)>t.epsi)||(t&&t.logDiff&&(console.warn("[ODT][diff] float = "+Math.abs(this._value-r)+">"+t.epsi),t.logDetail&&t.logDetail("[ODT][diff] float = "+Math.abs(this._value-r)+">"+t.epsi)),!1):this._value===r}return!1}FromString(e){var t=parseFloat(e);return this.SetValue(t),this}GetInterpolatedValue(e,t,r){var o=this.CheckForInterpolatedValue(e,t);if(o)return o;var n=e.GetValue()*(1-r)+t.GetValue()*r;return new i(n)}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyValueDocId",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=-1){super(e),this.GetType=function(){return"VCXPropertyValueDocId"}}FromString(e){var t=parseInt(e);return this.SetValue(t),this}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyValueFont",["require","exports","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueBoolean"],(function(e,t,r,i,o,n,s){class a extends r{constructor(e){if(super(e),!e){var t=new i;this.SetFamily(t);var r=new n;this.SetHeight(r);var a=new o;this.SetWeight(a);var l=new s;this.SetItalic(l);var u=new s;this.SetUnderline(u);var p=new s;this.SetCrossline(p);var h=new s;this.SetExponent(h);var V=new s;this.SetIndice(V);var y=new o;this.SetSpacing(y)}}GetType(){return"VCXPropertyValueFont"}Clone(){var e=new a;return this.CloneValue(e),e}SetFamily(e){return this.SetValueAtIndex(0,e),this}GetFamily(){return this.GetValueAtIndex(0)}SetHeight(e){return this.SetValueAtIndex(1,e),this}GetHeight(){return this.GetValueAtIndex(1)}SetWeight(e){return this.SetValueAtIndex(2,e),this}GetWeight(){return this.GetValueAtIndex(2)}SetItalic(e){return this.SetValueAtIndex(3,e),this}GetItalic(){return this.GetValueAtIndex(3)}SetUnderline(e){return this.SetValueAtIndex(4,e),this}GetUnderline(){return this.GetValueAtIndex(4)}SetCrossline(e){return this.SetValueAtIndex(5,e),this}GetCrossline(){return this.GetValueAtIndex(5)}SetExponent(e){return this.SetValueAtIndex(6,e),this}GetExponent(){return this.GetValueAtIndex(6)}SetIndice(e){return this.SetValueAtIndex(7,e),this}GetIndice(){return this.GetValueAtIndex(7)}SetSpacing(e){return this.SetValueAtIndex(8,e),this}GetSpacing(){return this.GetValueAtIndex(8)}GetFont(){return{Family:this.GetFamily().Value,Height:this.GetHeight().Value,Weight:this.GetWeight().Value,Italic:this.GetItalic().Value,Underline:this.GetUnderline().Value,Crossline:this.GetCrossline().Value,Exponent:this.GetExponent().Value,Indice:this.GetIndice().Value,Spacing:this.GetSpacing().Value}}}return a})),define("DS/VCXWebProperties/VCXPropertyValuePath",["require","exports","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueLink","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueDocId","DS/VCXWebProperties/VCXPropertyValueMap"],(function(e,t,r,i,o,n,s,a){class l extends a{constructor(e){if(super(e),!e){var t=new r;this.SetPathType(t);var a=new i;this.SetValueURL(a);var l=new i;this.SetFileName(l);var u=new o;this.SetValueLink(u);var p=new n;this.SetValueBool(p);var h=new s;this.SetDocIdParent(h)}}GetType(){return"VCXPropertyValuePath"}Clone(){var e=new l;return this.CloneValue(e),e}SetPathType(e){return this.SetValueAtIndex(0,e),this}GetPathType(){return this.GetValueAtIndex(0)}SetValueURL(e){return this.SetValueAtIndex(1,e),this}GetValueURL(){return this.GetValueAtIndex(1)}SetFileName(e){return this.SetValueAtIndex(2,e),this}GetFileName(){return this.GetValueAtIndex(2)}SetValueLink(e){return this.SetValueAtIndex(3,e),this}GetValueLink(){return this.GetValueAtIndex(3)}SetValueBool(e){return this.SetValueAtIndex(4,e),this}GetValueBool(){return this.GetValueAtIndex(4)}SetDocIdParent(e){return this.SetValueAtIndex(5,e),this}GetDocIdParent(){return this.GetValueAtIndex(5)}}return l})),define("DS/VCXWebProperties/VCXPropertyValueBase64",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=""){super(e),this.GetType=function(){return"VCXPropertyValueBase64"}}SetValue(e){return"string"!=typeof e?(console.warn("WARNING : VCXPropertyValueString value is NOT string !!"),this):super.SetValue(e)}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyValueVector",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=[0,0,0]){super(e)}GetType(){return"VCXPropertyValueVector"}Clone(){var e=new i;return e.SetValue(this.GetValue().slice(0)),e}FromString(e){for(var t=e.slice(1,e.length-1).split(","),r=[],i=0;i<t.length;i++)r[i]=parseFloat(t[i]);return this.SetValue(r),this}ToString(){for(var e=this.GetValue(),t="[",r=0;r<e.length;r++)t+=e[r],r!==e.length-1&&(t+=",");return t+="]"}IsEqualTo(e){var t=e.GetValue(),r=this.GetValue();if(r.length!==t.length)return!1;for(var i=r.length-1;i>=0;--i)if(r[i]!==t[i])return!1;return!0}GetInterpolatedValue(e,t,r){var o=this.CheckForInterpolatedValue(e,t);if(o)return o;for(var n=new i,s=e.GetValue(),a=t.GetValue(),l=[],u=0;u<Math.min(s.length,a.length);u++)l[u]=s[u]*(1-r)+a[u]*r;return n.SetValue(l),n}}return i})),define("DS/VCXWebProperties/VCXPropertyValueColor",["require","exports","DS/VCXWebProperties/VCXPropertyValue","DS/Visualization/ThreeJS_DS","DS/VCXWebProperties/VCXColor"],(function(e,t,r,i,o){class n extends r{constructor(e=(new o).SetRGBA(1,1,1,1)){super(e)}GetType(){return"VCXPropertyValueColor"}Clone(){var e=new n;return this.GetValue()&&e.SetValue(this.GetValue().Clone()),e._bUndefined=this._bUndefined,e}GetThreeColor(){return this._value.GetThreeColor()}ToString(){return this.GetValue().GetStyle()}FromString(e){let t=e.slice(5,e.length-1).split(","),r=[];for(var i=0;i<t.length;i++)r[i]=parseFloat(t[i])/255;return this._value.SetRGBA(r[0],r[1],r[2],r[3]),this}GetInterpolatedValue(e,t,r){var i=this.CheckForInterpolatedValue(e,t);if(i)return i;var o=e.GetValue().Clone(),s=t.GetValue();o.Lerp(s,r);var a=new n;return a.SetValue(o),a}SetValue(e){return e&&(e instanceof o?this._value=e:e instanceof i.Color&&(this._value=new o,this._value.SetThreeColor(e))),this}IsEqualTo(e,t){if(e){var r=e.GetValue();if(r)return this._value.IsEqualTo(r,t)}return!1}IsUndefined(){return null===this._value||!0===this._bUndefined}}return n})),define("DS/VCXWebProperties/VCXPropertyValueAnchor",["require","exports","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueLink","DS/VCXWebProperties/VCXPropertyValueFrame"],(function(e,t,r,i,o){class n extends r{constructor(e){if(super(e),!e){var t=new i;this.SetValueLink(t);var r=new o;this.SetValueFrame(r)}}GetType(){return"VCXPropertyValueAnchor"}Clone(){var e=new n;return this.CloneValue(e),e}SetValueLink(e){return this.SetValueAtIndex(0,e),this}SetValueLinkFromComponent(e){var t=new i;return t.SetValueFromComponent(e),this.SetValueLink(t),this}GetValueLink(){return this.GetValueAtIndex(0)}SetValueFrame(e){return this.SetValueAtIndex(1,e),this}GetValueFrame(){return this.GetValueAtIndex(1)}}return n})),define("DS/VCXWebProperties/VCXPropertyValueBin",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=""){super(e),this.GetType=function(){return"VCXPropertyValueBin"}}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyMap",["require","exports","DS/VCXWebProperties/VCXPropertySet"],(function(e,t,r){class i{constructor(){this._map={}}get map(){return this._map}AddOrModifyPropertySet(e,t){return this._map[e]=t,!0}RemovePropertySet(e){return delete this._map[e],this}GetPropertySet(e){return this._map[e]}GetListModifiables(e){for(var t in this._map)if(this._map.hasOwnProperty(t)){var r=t;e.push(r)}}AddOrModifyProperty(e,t){var i=this.GetPropertySet(e);return i||(i=new r,this.AddOrModifyPropertySet(e,i)),i.AddOrModifyProperty(t)}GetProperty(e,t){var r=this.GetPropertySet(e);return r?r.GetProperty(t):null}Clone(){var e=new i;for(var t in this._map)if(this._map.hasOwnProperty(t)){var r=this._map[t];e.AddOrModifyPropertySet(t,r.Clone())}return e}Merge(e){for(var t in e._map)if(e._map.hasOwnProperty(t)){var r=e._map[t];this.MergePropertySet(t,r)}return this}MergePropertySet(e,t){var r=this.GetPropertySet(e);return r?r.Merge(t):this.AddOrModifyPropertySet(e,t.Clone()),this}Iterate(e,t){for(const r in this._map)if(this._map.hasOwnProperty(r)){if(e&&!e(r,this._map[r]))return!1;if(t&&!this._map[r].Iterate(t,r))return!1}return!0}IsEmpty(){return 0===Object.keys(this._map).length}Check(){for(const e in this._map){if(!e.trim())return console.error(`Invalid hash found: '${e}' (empty or whitespace)`),!1;const t=this._map[e];if(!t)return console.error(`Invalid VCXPropertySet for hash '${e}': null or undefined`),!1;if("function"==typeof t.Check&&!t.Check())return console.error(`Invalid properties in VCXPropertySet for hash '${e}'`),!1}return!0}DisplayContent(e){console.log(e),console.log("VCXPropertySet Content:");for(const e in this._map){if(!e.trim()){console.warn(`Skipping empty hash: '${e}'`);continue}const t=this._map[e];if(t)if(console.log(`- Hash: '${e}'`),"function"==typeof t.GetListPropertyNames){let e=[];t.GetListPropertyNames(e),console.log(`  Properties: [${e.join(", ")}]`);for(const r of e){const e=t.GetProperty(r),i=e?.GetPropertyValue()?.GetValue();console.log(`    - ${r}: ${void 0!==i?i:"(undefined)"}`)}}else console.warn(`  Unable to retrieve properties for hash '${e}'`);else console.warn(`Skipping hash '${e}': VCXPropertySet is null or undefined`)}}}return i})),define("DS/VCXWebProperties/VCXPropertyMapNeutrals",["require","exports","DS/VCXWebProperties/VCXPropertyMap"],(function(e,t,r){return class extends r{constructor(e){super(),this._restoreSet=e}AddOrModifyPropertySet(e,t){return super.AddOrModifyPropertySet(e,t),t.onEachProperty((t=>{this.AddPropertyToRestoreSet(e,t)})),!0}AddOrModifyProperty(e,t){r.prototype.AddOrModifyProperty.call(this,e,t);var i=t.GetPropertyInfo().GetPropertyName();return this.AddPropertyToRestoreSet(e,i)}AddPropertyToRestoreSet(e,t){let r=this._restoreSet.get(e)??new Map;return r.set(t,!0),this._restoreSet.set(e,r),!0}}})),define("DS/VCXWebProperties/VCXPropertyValueHyperlinkId",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=-1){super(e)}GetType(){return"VCXPropertyValueHyperLinkId"}SetValue(e){return"number"!=typeof e?(console.log("WARNING : VCXPropertyValueHyperlinkId value is NOT number !!"),this):super.SetValue(e)}FromString(e){var t=parseInt(e);return this.SetValue(t),this}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyValuePoint2D",["require","exports","DS/Visualization/ThreeJS_DS","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r,i){class o extends i{constructor(e=new r.Vector2){super(e)}GetType(){return"VCXPropertyValuePoint2D"}Clone(){return new o((new r.Vector2).copy(this.GetValue()))}GetInterpolatedValue(e,t,i){var n=this.CheckForInterpolatedValue(e,t);if(n)return n;var s=e.GetValue(),a=t.GetValue();if(s&&a){var l=s.x*(1-i)+a.x*i,u=s.y*(1-i)+a.y*i,p=new r.Vector2;p.set(l,u);var h=new o;return h.SetValue(p),h}return e}FromString(e){let t=e.slice(1,e.length-1).split(","),i=[];for(var o=0;o<t.length;o++)i[o]=parseFloat(t[o]);var n=new r.Vector2;return n.set(i[0],i[1]),this.SetValue(n),this}ToString(){for(var e=this.GetValue().toArray(),t="[",r=0;r<e.length;r++)t+=e[r],r!==e.length-1&&(t+=",");return t+="]"}IsEqualTo(e,t){if(e){var r=e.GetValue();if(void 0!==r){var i=1e-6;return t&&t.epsiDist&&(i=t.epsiDist),Math.abs(this._value.x-r.x)<i&&Math.abs(this._value.y-r.y)<i}}return!1}}return o})),define("DS/VCXWebProperties/VCXPropertyValueDate",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=new Date){super(e)}GetType(){return"VCXPropertyValueDate"}GetTime(){return this._value.getTime()}SetTime(e){return this._value.setTime(e)}FromString(e){var t=Date.parse(e);return this._value.setTime(t),this}ToString(){return this._value.strftime("%Y-%m-%dT%H:%M:%S")}ToISOString(){return this._value.toISOString()}ToUTCString(){return this._value.toUTCString()}Clone(){var e=new i;return e.GetValue().setTime(this._value.getTime()),e}SetValue(e){return e&&(e instanceof Date?this._value=e:console.log("The value is not a Date object.")),this}IsEqualTo(e){if(e){var t=e.GetValue();if(t&&t.getTime()===this._value.getTime())return!0}return!1}GetInterpolatedValue(e,t,r){var o=this.CheckForInterpolatedValue(e,t);if(o)return o;var n=e.GetValue().getTime()*(1-r)+t.GetValue().getTime()*r,s=new Date;return s.setTime(n),new i(s)}}return i})),define("DS/VCXWebProperties/VCXPropertyValuePoint",["require","exports","DS/Visualization/ThreeJS_DS","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r,i){class o extends i{constructor(e=new r.Vector3){super(e)}GetType(){return"VCXPropertyValuePoint"}Clone(){return new o((new r.Vector3).copy(this.GetValue()))}GetInterpolatedValue(e,t,i){var n=this.CheckForInterpolatedValue(e,t);if(n)return n;var s=e.GetValue(),a=t.GetValue();if(s&&a){var l=s.x*(1-i)+a.x*i,u=s.y*(1-i)+a.y*i,p=s.z*(1-i)+a.z*i,h=new r.Vector3(l,u,p),V=new o;return V.SetValue(h),V}return e}FromString(e){for(var t=e.slice(1,e.length-1).split(","),i=[],o=0;o<t.length;o++)i[o]=parseFloat(t[o]);var n=new r.Vector3;return n.set(i[0],i[1],i[2]),this.SetValue(n),this}ToString(){for(var e=this.GetValue().toArray(),t="[",r=0;r<e.length;r++)t+=e[r],r!==e.length-1&&(t+=",");return t+="]"}IsEqualTo(e,t){if(e){var r=e.GetValue();if(void 0!==r){var i=.01;return t&&t.epsiDist&&(i=t.epsiDist),!(this._value.distanceToSquared(r)>i*i)||(t&&t.logDiff&&(console.warn("[ODT][diff] distance = "+this._value.distanceTo(r)),t.logDetail&&t.logDetail("[ODT][diff] distance = "+this._value.distanceTo(r))),!1)}}return!1}}return o})),define("DS/VCXWebProperties/VCXPropertyValueEnum",["require","exports","DS/VCXWebProperties/VCXPropertyValue"],(function(e,t,r){class i extends r{constructor(e=0){super(e)}GetType(){return"VCXPropertyValueEnum"}SetValue(e){return"number"!=typeof e?(console.log("WARNING : VCXPropertyValueEnum value is NOT number !!"),this):super.SetValue(e)}FromString(e){var t=parseInt(e);return this.SetValue(t),this}Clone(){return new i(this.GetValue())}}return i})),define("DS/VCXWebProperties/VCXPropertyValueLocation",["require","exports","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueFrame","DS/Visualization/ThreeJS_DS"],(function(e,t,r,i,o){class n extends r{constructor(e){if(super(e),!e){var t=new i;this.SetFrame(t);var r=new i;this.SetPivot(r)}}GetType(){return"VCXPropertyValueLocation"}Clone(){var e=new n;return this.CloneValue(e),e}SetFrame(e){return this.SetValueAtIndex(0,e),this}GetFrame(){return this.GetValueAtIndex(0)}SetPivot(e){return this.SetValueAtIndex(1,e),this}GetPivot(){return this.GetValueAtIndex(1)}ToConsoleForDiff(){console.log("[ODT][diff]   frame"),this.GetFrame().ToConsoleForDiff(),console.log("[ODT][diff]   pivot"),this.GetPivot().ToConsoleForDiff()}GetInterpolatedValue(e,t,r){if(0===r)return e;if(e.IsEqualTo(t))return e;var s=t.GetFrame().Value,a=t.GetPivot().Value,l=(new o.Matrix4).getInverse(s);l.multiply(a).multiplyMatrices(e.GetFrame().Value,l);var u=new i(l),p=u.GetInterpolatedValue(u,t.GetPivot(),r),h=(new o.Matrix4).getInverse(a);return h.multiply(s).multiplyMatrices(p.GetValue(),h),new n([new i(h),p])}GetCubicInterpolatedValue(e,t,r,s,a,l,u,p,h){if(void 0===t||void 0===r||null===t||null===r)return t;null==e&&(e=t,a=l),null==s&&(s=r,p=u);var V=new n,y=r.GetFrame().GetValue(),d=(new o.Matrix4).getInverse(y),f=r.GetPivot().GetValue(),c=(new o.Matrix4).multiplyMatrices(d,f),S=e.GetFrame().GetValue(),P=(new o.Matrix4).multiplyMatrices(S,c),C=new i;C.SetValue(P);var v=t.GetFrame().GetValue(),G=(new o.Matrix4).multiplyMatrices(v,c),m=new i;m.SetValue(G);var g=s.GetFrame().GetValue(),I=(new o.Matrix4).multiplyMatrices(g,c),_=new i;_.SetValue(I);var X=r.GetPivot(),D=m.GetCubicInterpolatedValue(C,m,X,_,a,l,u,p,h);V.SetPivot(D);var b=(new o.Matrix4).getInverse(f),w=D.GetValue(),T=(new o.Matrix4).multiplyMatrices(b,y);T.multiplyMatrices(w,T);var x=new i;return x.SetValue(T),V.SetFrame(x),V}}return n})),define("DS/VCXWebProperties/VCXPropertyServices",["require","exports","DS/Visualization/ThreeJS_DS","DS/VCXWebProperties/VCXColor","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueDate","DS/VCXWebProperties/VCXPropertyValueFrame","DS/VCXWebProperties/VCXPropertyValuePoint2D","DS/VCXWebProperties/VCXPropertyValuePoint","DS/VCXWebProperties/VCXPropertyValueLocation","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXPropertyValueFont","DS/VCXWebProperties/VCXPropertyValueBin","DS/VCXWebProperties/VCXPropertyValueBase64","DS/VCXWebProperties/VCXPropertyValueLink","DS/VCXWebProperties/VCXPropertyValueDocId","DS/VCXWebProperties/VCXPropertyValueHyperlinkId","DS/VCXWebProperties/VCXPropertyValuePath","DS/VCXWebProperties/VCXPropertyValueAnchor","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueVector","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueBoolean"],(function(e,t,r,i,o,n,s,a,l,u,p,h,V,y,d,f,c,S,P,C,v,G,m,g,I){class _{static propertyValueToJson(e,t){let r=null;const i=e.GetType();if("VCXPropertyValueColor"===i)r=e.GetValue().GetRGBA();else if(e instanceof o){r=[];for(var n=0;n<e.GetValue().length;n++){var s=e.GetValue()[n];if(s){var a=_.propertyValueToJson(s,t);r.push({type:s.GetType(),index:n,value:a})}}}else if("VCXPropertyValueFrame"===i){r=[];var l=e.GetValue().elements;for(var u in l)l.hasOwnProperty(u)&&"3"!==u&&"7"!==u&&"11"!==u&&"15"!==u&&r.push(l[u])}else if("VCXPropertyValueBoolean"===i)r=e.GetValue();else if("VCXPropertyValueDate"===i)r=e.GetTime()/6e4;else if("VCXPropertyValuePoint2D"===i){let t=e.GetValue();r=[],r.push(t.x),r.push(t.y)}else if("VCXPropertyValuePoint"===i){let t=e.GetValue();r=[],r.push(t.x),r.push(t.y),r.push(t.z)}else if("VCXPropertyValueVector"===i){var p=e.GetValue();r=[];for(n=0;n<p.length;n++)r.push(p[n])}else{if("VCXPropertyValueLink"===i){var h=e.ToString();return t?t(h):(console.error("reformatObjectID is required"),h)}var V=e.GetValue();r="number"==typeof V?V:e.ToString()}return void 0!==r||(r="undefined"),r}static jsonToPropertyValue(e,t,X){var D=null;if("VCXPropertyValueFrame"===e){D=new s;for(var b=new r.Matrix4,w=0;w<12;w++)"string"==typeof t[w]&&(t[w]=parseFloat(t[w].replace(",",".")));0==t[0]&&0==t[3]&&0==t[6]&&0==t[1]&&0==t[4]&&0==t[7]&&0==t[2]&&0==t[5]&&0==t[8]&&console.log("BAD MATRIX in BuildVCXPropertyValue"),b.set(t[0],t[3],t[6],t[9],t[1],t[4],t[7],t[10],t[2],t[5],t[8],t[11],0,0,0,1),D.SetValue(b)}else if("VCXPropertyValuePoint2D"===e){D=new a;var T=new r.Vector2;for(w=0;w<2;w++)"string"==typeof t[w]&&(t[w]=parseFloat(t[w].replace(",",".")));T.set(t[0],t[1]),D.SetValue(T)}else if("VCXPropertyValuePoint"===e){D=new l;let e=new r.Vector3;for(w=0;w<3;w++)"string"==typeof t[w]&&(t[w]=parseFloat(t[w].replace(",",".")));e.set(t[0],t[1],t[2]),D.SetValue(e)}else if("VCXPropertyValueLocation"===e)(D=new u).SetValues(t,_.jsonToPropertyValue,X);else if("VCXPropertyValueColor"===e){D=new p;for(w=0;w<4;w++)"string"==typeof t[w]&&(t[w]=parseFloat(t[w].replace(",",".")));var x=(new i).FromRGBA(t[0],t[1],t[2],t[3]);D.SetValue(x)}else if("VCXPropertyValueFloat"===e)D=new G,"string"==typeof t&&(t=parseFloat(t.replace(",","."))),D.SetValue(t);else if("VCXPropertyValueInt"===e)D=new m,"string"==typeof t&&(t=parseFloat(t.replace(",","."))),D.SetValue(Math.floor(t));else if("VCXPropertyValueEnum"===e)(D=new g).SetValue(parseInt(t));else if("VCXPropertyValueBoolean"===e){var F;D=new I,F="boolean"!=typeof t?1===parseInt(t):t,D.SetValue(F)}else if("VCXPropertyValueString"===e)(D=new C).SetValue(t);else if("VCXPropertyValueVector"===e){D=new v;for(w=0;w<t.length;w++)"string"==typeof t[w]&&(t[w]=parseFloat(t[w].replace(",",".")));D.SetValue(t)}else if("VCXPropertyValueAnchor"===e){(D=new P).SetValues(t,_.jsonToPropertyValue,X)}else if("VCXPropertyValuePath"===e)(D=new S).SetValues(t,_.jsonToPropertyValue,X);else if("VCXPropertyValueHyperlinkId"===e||"VCXPropertyValueHyperLinkId"===e)(D=new c).SetValue(t);else if("VCXPropertyValueDocId"===e)""!==t&&(D=new f).SetValue(t);else if("VCXPropertyValueLink"===e){D=new d;if(t){let e=t;X?e=X(t):console.error("reformatObjectID is required"),D.SetValue(e)}}else if("VCXPropertyValueBase64"===e)D=new y,t&&D.SetValue(t);else if("VCXPropertyValueBin"===e)D=new V,t&&D.SetValue(t);else if("VCXPropertyValueFont"===e)(D=new h).SetValues(t,_.jsonToPropertyValue,X);else if("VCXPropertyValueDate"===e){D=new n;var A=parseInt(t);D.SetTime(6e4*A)}else"VCXPropertyValueMap"===e?(D=new o).SetValues(t,_.jsonToPropertyValue,X):console.log("type inconnu : "+e);return D}}return _}));