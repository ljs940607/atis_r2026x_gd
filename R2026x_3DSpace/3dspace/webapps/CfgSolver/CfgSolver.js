define("DS/CfgSolver/CfgSolverServices",["UWA/Core","DS/WAFData/WAFData","UWA/Utils","DS/i3DXCompassServices/i3DXCompassServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(e,t,n,i,a){"use strict";var r={solverUrlEndPoint:null,serviceUrl:null,method:"POST",_tenant:"OnPremise",_addedBaseConfiguration:[],_solverServiceAvailable:void 0,getDefaultImage:function(){var e="";return null!==this.serviceUrl&&(e=this.serviceUrl+"/snresources/images/icons/large/iconLargeDefault.png"),e},initSolver:function(t){var n="initialization/context/"+t.modelId;return this._solverURL="/resources/cfg/configurator/solver/",this._computeURL="computeAnswer",this.method="POST",this.receivedTenant=t.tenant,this._handleRequest(n,{type:"json",data:t.data}).then((function(t){return e.log("initialize solver successfull"),t}),(function(t){return e.log("failed while creating solver: "),e.log(t),null}))},hypervisordetails:function(){var t="hypervisordetails?random="+Math.random();return this.method="GET",this._handleRequest(t,{type:"json",data:null}).then((function(t){return e.log("initialize solver successfull"),t}),(function(t){return e.log("failed while creating solver: "),e.log(t),null}))},getUrlSolverService:function(t){var n=this;return new e.Promise((function(e,i){a.getPlatformServices({platformId:t,onComplete:function(t){void 0!==t.configrulesolver&&null!==t.configrulesolver?(n.serviceUrl="Config Solver Service",n.solverUrlEndPoint=t.configrulesolver,e(t.configrulesolver)):(console.warn("getUrlSolverService no SolverService..."),i(void 0))},onFailure:function(){console.log("getUrlSolverService failed..."),i(void 0)}})}))},getUrl3DSpaceService:function(t){var n=this;return n._solverURL="/resources/rulesolver/solver/",new e.Promise((function(a,r){i.getServiceUrl({serviceName:"3DSpace",platformId:t,onComplete:function(t){if("string"==typeof t)n.serviceUrl=t;else if(e.is(t,"array")&&(n.serviceUrl=t[0].url,n._tenant=t[0].platformId,n.receivedTenant&&"OnPremise"!==n.receivedTenant)){var i,r=t||[];for(i=0;i<r.length;i++)n.receivedTenant===r[i].platformId&&(n.serviceUrl=r[i].url,n._tenant=r[i].platformId)}n.solverUrlEndPoint=n.serviceUrl+n._solverURL,a(t[0].url)},onFailure:function(){console.error("getUrl3DSpaceService failed..."),r(void 0)}})}))},_handleRequest:function(n,i){i=i||{};var a=this;return new e.Promise((function(r,s){var o=e.extend({method:a.method,timeout:3e5,type:null,onComplete:function(){r.apply(this,arguments)},onFailure:function(){s.call(this,arguments)}},i);if(a.serviceUrl)t.authenticatedRequest(a.solverUrlEndPoint+n,o);else{var l="";window&&window.widget&&window.widget.getValue("x3dPlatformId")?l=window.widget.getValue("x3dPlatformId"):void 0!==i.tenant&&(l=i.tenant),a.getUrlSolverService(l).then((function(){a._solverServiceAvailable=!0,t.authenticatedRequest(a.solverUrlEndPoint+"/resources/v1/cfgsolver/session/"+n,o)}),(function(){a.getUrl3DSpaceService(l).then((function(){a._solverServiceAvailable=void 0,t.authenticatedRequest(a.solverUrlEndPoint+n,o)}),(function(){console.error("No service available for the solver")}))}))}}))},release:function(e){if(null===e&&(e=""),this._solverServiceAvailable){this.method="DELETE";var t="/resources/v1/cfgsolver/session/"+e;return this._handleRequest(t,{type:"application/ds-json",data:{},headers:{"Content-Type":"application/json"}})}return this._handleRequest("delete",{data:{solverKey:e}}).then((function(e){return e}),(function(e){console.log("failed while releasing the solver: "+e)}))},computeSolverServiceAnswer:function(t,n){var i="/resources/v1/cfgsolver/session/"+n+"/compute";this.method="POST";var a=t||{};e.is(t,"object")?a=JSON.stringify(t):e.is(t,"string")&&(a=t);var r={jsonMsg:a};return this._handleRequest(i,{type:"application/ds-json",data:JSON.stringify(r),headers:{"Content-Type":"application/json"}})},computeAnswer:function(t,n,i,a){if(this._solverServiceAvailable)return this.computeSolverServiceAnswer(t,n);var r=this._computeURL||"compute";this.method="POST";var s=t||{};e.is(t,"object")?s=JSON.stringify(t):e.is(t,"string")&&(s=t);var o={jsonMsg:s,solverKey:n=null==n?"":n};"computeAnswer"===r&&(o={selectedCriteria:s,solverId:n}),i&&(o.rand=i);var l=this;if(a){var u=t&&t._from?t._from:"apps",c={solverKey:n,jsonMsg:JSON.stringify({_from:u,_to:"solver",_request:"abortRequest",_data:""})};return this._handleRequest(r,{type:"application/ds-json",data:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(){return console.debug("Aborting solver"),l._handleRequest(r,{type:"application/ds-json",data:JSON.stringify(o),headers:{"Content-Type":"application/json"}})}),(function(){console.error("failed while trying to abort the solver")}))}return this._handleRequest(r,{type:"application/ds-json",data:JSON.stringify(o),headers:{"Content-Type":"application/json"}})},create:function(n){var i=this;this.receivedTenant=n&&n.tenant?n.tenant:"OnPremise";if(this._computeURL="compute",this.method="POST",n.modelVersionId)return new e.Promise((function(a,r){var s='{"modelVersion":"'+n.modelVersionId+'"}',o=e.extend({method:i.method,timeout:3e5,type:null,onComplete:function(){a.apply(this,arguments)},onFailure:function(e){r.apply(this,arguments)}},{type:"json"}),l=e.extend({method:i.method,timeout:3e5,type:null,onComplete:function(){i._solverServiceAvailable=!0,a.apply(this,arguments)},onFailure:function(e){i._solverServiceAvailable=void 0;var a="";window&&window.widget&&window.widget.getValue("x3dPlatformId")?a=window.widget.getValue("x3dPlatformId"):void 0!==n.tenant&&(a=n.tenant),i.getUrl3DSpaceService(a).then((function(e){t.authenticatedRequest(i.solverUrlEndPoint+"create",o)}),(function(e){console.error("No service available for the solver")}))},data:s,headers:{"Content-Type":"application/json",SecurityContext:n.securityContext}},{type:"json"});if(i.serviceUrl)i._solverServiceAvailable||"Config Solver Service"===i.serviceUrl?t.authenticatedRequest(i.solverUrlEndPoint+"/resources/v1/cfgsolver/session/",l):(void 0!==i.solverUrlEndPoint&&null!==i.solverUrlEndPoint||(i._solverURL="/resources/rulesolver/solver/",i.solverUrlEndPoint=i.serviceUrl+i._solverURL),t.authenticatedRequest(i.solverUrlEndPoint+"create",o));else{var u="";window&&window.widget&&window.widget.getValue("x3dPlatformId")?u=window.widget.getValue("x3dPlatformId"):void 0!==n.tenant&&(u=n.tenant),i.getUrlSolverService(u).then((function(e){t.authenticatedRequest(i.solverUrlEndPoint+"/resources/v1/cfgsolver/session/",l)}),(function(e){i.getUrl3DSpaceService(u).then((function(e){t.authenticatedRequest(i.solverUrlEndPoint+"create",o)}),(function(e){console.error("No service available for the solver")}))}))}}));var a="";return window&&window.widget&&window.widget.getValue("x3dPlatformId")?a=window.widget.getValue("x3dPlatformId"):void 0!==n.tenant&&(a=n.tenant),i.getUrl3DSpaceService(a).then((function(e){this._handleRequest("create",{type:"json"}).then((function(e){return console.log("create solver successfull"),e}),(function(e){return console.log("failed while creating solver: "),console.log(e),null}))}),(function(e){console.log("3DSpace is not available")}))},initialize:function(t){var n={};n.jsonData=t.jsonData?JSON.stringify(t.jsonData):"{}",n.solverKey=t.solverKey?t.solverKey:null,n=JSON.stringify(t);return this._solverServiceAvailable?new e.Promise((function(e,t){e()})):this._handleRequest("initialize",{type:"json",data:n,headers:{"Content-Type":"application/json"}}).then((function(e){return console.log("initialize solver successfull"),e}),(function(e){return console.log("failed while creating solver: "),console.log(e),null}))},clearSolver:function(e){if(this._solverServiceAvailable){this.method="DELETE";var t="/resources/v1/cfgsolver/session/"+e;return this._handleRequest(t,{type:"application/ds-json",data:{},headers:{"Content-Type":"application/json"}})}return this._handleRequest("clear",{type:"json",data:{solverKey:e}}).then((function(e){return console.log("clear solver successfull"),e}),(function(e){return console.log("failed while clear solver: "),console.log(e),null}))},getWAFdata:function(){return t},setRuleActivation:function(e,t,n,i){var a=this,r={_from:"ruleEditor",_to:"solverRule",_request:"ruleActivation",_data:{ruleId:e,ruleActivation:t}};return this.computeAnswer(r,n).catch((function(e){a._sendErrorMsgOnModelEvent(e,i)}))},callSolveForRulesCheckConflict:function(t,n,i,a){var r=this,s={matrixDefinition:{constrainedCriteria:t.constrainedCriteria,constrainedValues:t.constrainedValues,drivingCriteria:t.drivingCriteria,drivingCombinationValues:t.drivingCombinationValues,states:t.states},buildtimeCheckLevel:t.buildtimeCheckLevel?t.buildtimeCheckLevel:"none",runtimeCheckLevel:t.isDefaultValue?"statesValidity":"statesConflicts",buildtimeCauseComputation:t.buildtimeCauseComputation?t.buildtimeCauseComputation:"no",runtimeCauseComputation:t.runtimeCauseComputation?t.runtimeCauseComputation:"no",stateValidityWithDefault:"yes",conflictWithDefaultCheck:"no"};t.statesCauses&&(s.matrixDefinition.statesCauses=t.statesCauses,t._clientData.statesCauses=t.statesCauses);var o={_from:"ruleEditor",_to:"solverRule",_version:"3.0",_request:"checkMatrixRuleValidity",_data:s,_clientData:t._clientData||{}};if(a)return this.computeAnswer(o,n).then((function(t){var n=JSON.parse(t),a=n._data;a.version=n._version;var r=e.merge(a,{version:n._version,_clientData:n._clientData});a._clientData&&a._clientData.statesCauses?i.publish({event:"checkMatrixRuleValidity_SolverReason",data:{answerData:r}}):i.publish({event:"checkMatrixRuleValidity_statesConflicts_SolverAnswer",data:{answerData:a}})}),(function(e){r._sendErrorMsgOnModelEvent(e,i)}));this.computeAnswer(o,n).then((function(t){var n=JSON.parse(t),a=n._data;a.version=n._version;var r=e.merge(a,{version:n._version,_clientData:n._clientData});a._clientData&&a._clientData.statesCauses?i.publish({event:"checkMatrixRuleValidity_SolverReason",data:{answerData:r}}):i.publish({event:"checkMatrixRuleValidity_statesConflicts_SolverAnswer",data:{answerData:a}})}),(function(e){r._sendErrorMsgOnModelEvent(e,i)}))},callSolveForRulesCheckSuggestion:function(t,n,i,a){var r=this,s={matrixDefinition:{constrainedCriteria:t.constrainedCriteria,constrainedValues:t.constrainedValues,drivingCriteria:t.drivingCriteria,drivingCombinationValues:t.drivingCombinationValues,states:t.states},buildtimeCheckLevel:"none",runtimeCheckLevel:"statesValidity",buildtimeCauseComputation:"no",runtimeCauseComputation:t.runtimeCauseComputation?t.runtimeCauseComputation:"no",stateValidityWithDefault:"yes",conflictWithDefaultCheck:"no"};t.statesCauses&&(s.matrixDefinition.statesCauses=t.statesCauses,t._clientData.statesCauses=t.statesCauses);var o={_from:"ruleEditor",_to:"solverRule",_version:"3.0",_request:"checkMatrixRuleValidity",_data:s,_clientData:t._clientData||{}};if(a)return this.computeAnswer(o,n).then((function(t){var n=JSON.parse(t),a=n._data;a.version=n._version;var r=e.merge(a,{version:n._version,_clientData:n._clientData});a._clientData&&a._clientData.statesCauses?i.publish({event:"checkMatrixRuleValidity_SolverReason",data:{answerData:r}}):i.publish({event:"checkMatrixRuleValidity_SolverAnswer",data:{answerData:a}})}),(function(e){r._sendErrorMsgOnModelEvent(e,i)}));this.computeAnswer(o,n).then((function(t){var n=JSON.parse(t),a=n._data;a.version=n._version;var r=e.merge(a,{version:n._version,_clientData:n._clientData});a._clientData&&a._clientData.statesCauses?i.publish({event:"checkMatrixRuleValidity_SolverReason",data:{answerData:r}}):i.publish({event:"checkMatrixRuleValidity_SolverAnswer",data:{answerData:a}})}),(function(e){r._sendErrorMsgOnModelEvent(e,i)}))},callSolveForCausingDrivingComb:function(t,n,i){var a=this,r={matrixDefinition:{constrainedCriteria:t.constrainedCriteria,constrainedValues:t.constrainedValues,drivingCriteria:t.drivingCriteria,drivingCombinationValues:t.drivingCombinationValues,states:t.states},buildtimeCheckLevel:"statesValidity",runtimeCheckLevel:"none",buildtimeCauseComputation:"yes",runtimeCauseComputation:"no",stateValidityWithDefault:"yes",conflictWithDefaultCheck:"no"};t.statesCauses&&(r.matrixDefinition.statesCauses=t.statesCauses,t._clientData.statesCauses=t.statesCauses);var s={_from:"ruleEditor",_to:"solverRule",_version:"3.0",_request:"checkMatrixRuleValidity",_data:r,_clientData:t._clientData||{}};return this.computeAnswer(s,n).then((function(t){var n=JSON.parse(t),a=n._data;a.version=n._version;var r=e.merge(a,{version:n._version,_clientData:n._clientData});i.publish({event:"checkInvalidColumnCausingRules",data:{answerData:r}})}),(function(e){a._sendErrorMsgOnModelEvent(e,i)}))},addBaseConfigurations:function(t,n){let i={_from:"configurator",_to:"solver",_request:"addData",_data:{_version:"3.1",baseConfigurations:{member:[]}}};var a=this;return t.member.forEach((t=>{var n={id:t.id,attributes:{_name:t.name},constrainedValues:[],states:"",statesParameter:[]};t.selectedCriteria.member.forEach((t=>{let i=null;switch(n.constrainedValues.push({id:t.id}),t.status){case"Selected":i="S";break;case"Default":i="D";break;case"Not Available":i="N";break;default:i="A"}n.states+=i,e.is(t.value)?"Selected"===t.status||"Default"===t.status?n.statesParameter.push({Value:parseInt(t.value,10)}):n.statesParameter.push({}):n.statesParameter.push(null)})),i._data.baseConfigurations.member.push(n)})),a._addedBaseConfiguration[n]||(a._addedBaseConfiguration[n]=[]),a._addedBaseConfiguration[n]=a._addedBaseConfiguration[n].concat(t.member.map((e=>e.id))),this.computeAnswer(i,n)},isBaseConfigurationAdded:function(e,t){return!!this._addedBaseConfiguration[t]&&this._addedBaseConfiguration[t].find((t=>t===e))},removeBaseConfigurations:function(t,n){var i=this;e.is(n)&&e.is(this._addedBaseConfiguration[n],"array")&&e.is(t,"array")&&t.forEach((e=>{i._addedBaseConfiguration[n].splice(i._addedBaseConfiguration[n].indexOf(e),1)}))},callSolveForRules:function(t,n,i,a){var r=this,s={matrixDefinition:{constrainedCriteria:t.constrainedCriteria,constrainedValues:t.constrainedValues,drivingCriteria:t.drivingCriteria,drivingCombinationValues:t.drivingCombinationValues,states:t.states},buildtimeCheck:t.statesCauses?"validityWithCause":"validity",runtimeCheck:t.statesCauses?"validityWithCause":"validity",stateValidityWithDefault:"yes",conflictWithDefaultCheck:"no"};t.statesCauses&&(s.matrixDefinition.statesCauses=t.statesCauses,t._clientData.statesCauses=t.statesCauses);var o={_from:"ruleEditor",_to:"solverRule",_version:"2.0",_request:"checkMatrixRuleValidity",_data:s,_clientData:t._clientData||{}};this.computeAnswer(o,n).then((function(t){var n=JSON.parse(t),a=n._data;a.version=n._version;var r=e.merge(a,{version:n._version,_clientData:n._clientData});a._clientData&&a._clientData.statesCauses?(i.publish({event:"checkMatrixRuleValidity_SolverReason",data:{answerData:r}}),i.publish({event:"checkMatrixRuleValidity_SolverAnswer",data:{answerData:a}})):i.publish({event:"checkMatrixRuleValidity_SolverAnswer",data:{answerData:a}})}),(function(e){r._sendErrorMsgOnModelEvent(e,i)}))},CheckRulesConsistency:function(e,t){var n=this;return this.computeAnswer({_from:"configurator",_to:"solverConfiguration",_request:"checkModelConsistency",_data:""},e).catch((function(e){n._sendErrorMsgOnModelEvent(e,t)}))},setSelectionModeOnSolver:function(e,t,n){var i=this,a={_from:"configurator",_to:"solverConfiguration",_version:"3.0",_request:"setSelectionMode",_data:e};return this.computeAnswer(a,t).catch((function(e){i._sendErrorMsgOnModelEvent(e,n)}))},CallSolveMethodOnSolver:function(e,t,n){var i=this,a={_from:"configurator",_to:"solverConfiguration",_version:"4.0",_request:"solveAndDiagnoseAll",_data:e};return this.computeAnswer(a,t).catch((function(e){i._sendErrorMsgOnModelEvent(e,n)}))},callSolveForMatrixRulesCheckValidity:function(e,t,n){var i=this,a={_from:"ruleEditor",_to:"solverRule",_version:"3.0",_request:"checkMatrixRuleValidity",_data:e};return this.computeAnswer(a,t,"",!1).catch((function(e){i._sendErrorMsgOnModelEvent(e,n)}))},callSolveForExpressionRulesCheckValidity:function(e,t,n){var i=this,a={_from:"ruleEditor",_to:"solverRule",_version:"2.0",_request:"checkExpressionValidity",_data:e};return this.computeAnswer(a,t,"",!1).catch((function(e){i._sendErrorMsgOnModelEvent(e,n)}))},CallSolveWithoutDignoseMethodOnSolver:function(e,t,n){var i=this,a={_from:"configurator",_to:"solverConfiguration",_version:"4.0",_request:"solve",_data:e};return this.computeAnswer(a,t,"",!1).catch((function(e){i._sendErrorMsgOnModelEvent(e,n)}))},callDrivingCombinationsValues:function(e,t){var n={_from:"test",_to:"solver",_request:"computeSolutions",_data:{getCombinations:!0,combinationsIds:e,maxCombinations:1e3}};return this.computeAnswer(n,t).catch((function(e){that._sendErrorMsgOnModelEvent(e,modelEvents)}))},CallSolverOnSelectedIDsMethodOnSolver:function(e,t,n){var i=this,a={_from:"configurator",_to:"solverConfiguration",_request:"solveAndDiagnose",_version:"4.0",_data:e};return this.computeAnswer(a,t).catch((function(e){i._sendErrorMsgOnModelEvent(e,n)}))},getResultingStatusOriginators:function(e,t,n,i){var a=this,r={_from:"configurator",_to:"solverConfiguration",_request:"getResultingStatusOriginators",_version:"2.0",_data:{id:e,computeRules:i}};return this.computeAnswer(r,t).catch((function(e){a._sendErrorMsgOnModelEvent(e,n)}))},getConflictingAssumptionsCausingRules:function(e,t){var n=this;return this.computeAnswer({_from:"configurator",_to:"solverConfiguration",_request:"getConflictingAssumptionsCausingRules",_version:"2.0",_data:{}},e).catch((function(e){n._sendErrorMsgOnModelEvent(e,t)}))},abortSolverCall:function(e,t){var n=this;if(this._solverServiceAvailable){var i="/resources/v1/cfgsolver/session/"+e+"/abort";return this._handleRequest(i,{type:"application/ds-json",data:{},headers:{"Content-Type":"application/json"}}).catch((function(e){n._sendErrorMsgOnModelEvent(e,t)}))}return this.computeAnswer({_from:"configurator",_to:"solver",_request:"abortRequest",_data:""},e).catch((function(e){n._sendErrorMsgOnModelEvent(e,t)}))},setServiceUrl:function(e){this.serviceUrl=e||null},getServiceUrl:function(){return this.serviceUrl},_sendErrorMsgOnModelEvent:function(e,t){t&&t.publish({event:"solver-call-error",data:{errorMsg:e}})},resetService:function(){this.serviceUrl=null,this.solverServiceAvailable=void 0},callSolveForBCCheckConflict:function(e,t){let n={runtimeCheckLevel:"statesConflicts",runtimeCauseComputation:e.runtimeCauseComputation,conflictWithDefaultCheck:"no",stateValidityWithDefault:"yes",constrainedCriteria:e.constrainedCriteria,constrainedValues:e.constrainedValues,states:e.states,statesParameter:e.statesParameter};e.statesCauses&&(n.statesCauses=e.statesCauses),e.isDefaultValue&&(n.runtimeCheckLevel="statesValidity");let i={_from:"ruleEditor",_to:"solverRule",_request:"checkBaseConfigurationValidity",_data:n};return this.computeAnswer(i,t).catch((function(e){that._sendErrorMsgOnModelEvent(e,modelEvents)}))},callSolverToGetAvailableRange:function(e,t){let n=this,i={_from:"ruleEditor",_to:"solverRule",_request:"checkBaseConfigurationValidity",_data:{runtimeCheckLevel:"statesValidity",runtimeCauseComputation:"no",conflictWithDefaultCheck:"no",constrainedCriteria:[{id:e}],constrainedValues:[{id:e}],states:"A",statesParameter:[{}],statesCauses:"Y"}};return this.computeAnswer(i,t).catch((function(e){n._sendErrorMsgOnModelEvent(e,modelEvents)}))},callSolveForBCCheckValidity:function(e,t){let n={runtimeCheckLevel:"statesValidity",runtimeCauseComputation:e.runtimeCauseComputation,conflictWithDefaultCheck:"no",constrainedCriteria:e.constrainedCriteria,constrainedValues:e.constrainedValues,states:e.states,statesParameter:e.statesParameter,stateValidityWithDefault:"yes"},i={_from:"ruleEditor",_to:"solverRule",_request:"checkBaseConfigurationValidity",_data:n};return e.statesCauses&&(n.statesCauses=e.statesCauses),this.computeAnswer(i,t).catch((function(e){that._sendErrorMsgOnModelEvent(e,modelEvents)}))},callSolveForBCRemoveData:function(e,t){var n={_from:"configurator",_to:"solver",_request:"removeData",_data:{baseConfigurations:e.map((e=>({id:e})))}};return this.computeAnswer(n,t).catch((function(e){that._sendErrorMsgOnModelEvent(e,modelEvents)}))}};return r})),define("DS/CfgSolver/CfgSolverDebug",["DS/CfgSolver/CfgSolverServices","DS/UIKIT/Input/Button","DS/UIKIT/Form","css!DS/CfgSolver/CfgSolverDebug.css","css!DS/UIKIT/UIKIT.css"],(function(e,t,n,i,a){"use strict";return function(){var i=null,a=null,r=null,s=null,o=null,l=null,u=null,c=null,d=null,v=function(){l=document.createElement("div"),(u=document.createElement("div")).classList.add("solver-debug-title"),u.innerHTML="Solver Debugger Tool",c=document.createElement("div"),l.classList.add("solver-debug-panel"),l.setAttribute("draggable","true"),l.addEventListener("dragstart",(function(e){var t=window.getComputedStyle(e.target,null);e.dataTransfer.setData("text/plain",parseInt(t.getPropertyValue("left"),10)-e.clientX+","+(parseInt(t.getPropertyValue("top"),10)-e.clientY))}),!1),document.body.addEventListener("dragover",(function(e){return e.preventDefault(),!1}),!1),document.body.addEventListener("drop",(function(e){var t=e.dataTransfer.getData("text/plain").split(","),n=e.clientX+parseInt(t[0],10),i=Math.max(-20,n),a=l.parentElement.offsetWidth-20;i=Math.min(i,a);var r=l.parentElement.offsetHeight-20,s=e.clientY+parseInt(t[1],10);return s=Math.max(-20,s),s=Math.min(s,r),l.style.left=i+"px",l.style.top=s+"px",e.preventDefault(),!1}),!1),f();var e=document.createElement("button");e.setAttribute("type","button"),e.setAttribute("title","close"),e.classList.add("close"),e.classList.add("solver-close"),e.innerHTML="&times;",e.onclick=function(){l.parentNode.removeChild(l)},u.appendChild(e),l.appendChild(u),l.appendChild(c)},f=function(){c.classList.add("solver-debug-body");var l=new t({icon:"record",value:"Record",className:"success solver-start"});l.elements.container.addEventListener("click",(function(){d=!0,console.log("send start traces SOLVER");var t={};if(t._from=r,t._to="solver",t._request="tracesActivation",t._data={},t._data.activation="yes",t._data.path=a,t._data.level=1===s?"messagesAndSolver":"messages",i)e.computeAnswer(t,i,Math.random());else{var n=Object.keys(o),c=null,v=0;for(v=0;v<n.length;v+=1){c=n[v];var f=o[c];e.computeAnswer(t,f,Math.random())}}console.log(a),console.log(s),u.elements.container.removeAttribute("disabled"),l.elements.container.setAttribute("disabled",!0)})),l.elements.container.setAttribute("disabled",!0);var u=new t({icon:"stop",value:"Stop",className:"warning solver-stop"});u.addEvent("onClick",(function(){d=!1,console.log("send stop stump SOLVER");var t={};if(t._from=r,t._to="solver",t._request="tracesActivation",t._data={},t._data.activation="no",i)e.computeAnswer(t,i,Math.random());else{var n=Object.keys(o),c=null,v=0;for(v=0;v<n.length;v+=1){c=n[v];var f=o[c];e.computeAnswer(t,f,Math.random())}}u.elements.container.setAttribute("disabled",!0),l.elements.container.setAttribute("disabled",!0),""!==a&&s>=0&&l.elements.container.removeAttribute("disabled")})),u.elements.container.setAttribute("disabled",!0);var v=new n({fields:[{type:"text",label:"Folder path",name:"path",placeholder:"Path..."},{type:"select",label:"level",placeholder:"Pick a level of traces...",className:"tracelevel",name:"tracelevel",options:[{label:"Exchanged messages",value:"0"},{label:"Messages with resolution traces",value:"1"}]}],events:{onChange:function(e,t){switch(l.elements.container.setAttribute("disabled",!0),e){case"tracelevel":s=parseInt(t);break;case"path":a=t}""!==a&&s>=0&&!d&&l.elements.container.removeAttribute("disabled")}}});UWA.extendElement(c),v.inject(c),l.inject(c),u.inject(c)};this.init=function(e,t){a="",r=e,"solver","",s=-1,o=t,d=!1,v()},this.init2=function(e,t){a="",r=e,"solver","",s=-1,i=t,d=!1,v()},this.setPath=function(e){a=e},this.injectIn=function(e){e.appendChild(l)},this.getSolverServices=function(){return e}}}));