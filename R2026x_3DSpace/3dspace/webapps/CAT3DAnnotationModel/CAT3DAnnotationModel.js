/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
define("DS/CAT3DAnnotationModel/CATAttrRepresentationFactory",["DS/Visualization/ThreeJS_DS","DS/Visualization/SceneGraphFactory","DS/SceneGraphNodes/FixedSizeNode3D","DS/Visualization/Node3D","DS/SceneGraphNodes/BillBoardNode3D","DS/SceneGraphNodes/ArrowNode","i18n!DS/CAT3DAnnotationModel/assets/nls/CAT3DAnnotationModel"],(function(t,e,n,i,o,s,r){"use strict";function a(n){var i=e.createTextNode({text:n.text,font:"sans-serif",fontSize:n.fontSize,sdf:!0,color:new t.Color(n.color),side:t.DoubleSide});return i.setShadow(!1),i}function l(n){var o=.23*n.length,s=.08*n.length,r=s/2,l=[],P=[],T=0;l[T++]=-n.length/2,l[T++]=0,l[T++]=0,l[T++]=o-n.length/2,l[T++]=-r-.9*s,l[T++]=0,l[T++]=o-n.length/2,l[T++]=-r,l[T++]=0,l[T++]=n.length/2,l[T++]=-r,l[T++]=0,l[T++]=n.length/2,l[T++]=r,l[T++]=0,l[T++]=o-n.length/2,l[T++]=r,l[T++]=0,l[T++]=o-n.length/2,l[T++]=r+.9*s,l[T++]=0;var h=[];T=0,h[T++]=0,h[T++]=0,h[T++]=1;var u=[];T=0,u[T++]=1,u[T++]=1,u[T++]=1,u[T++]=1,u[T++]=1,u[T++]=1,u[T++]=1,P.push(0),P.push(1),P.push(2),P.push(0),P.push(2),P.push(3),P.push(0),P.push(3),P.push(4),P.push(0),P.push(4),P.push(5),P.push(0),P.push(5),P.push(6);var c=[];T=0;for(var d=0;d<l.length/3;d++)c.push(new t.Vector3(l[3*d],l[3*d+1],l[3*d+2]));c.push(new t.Vector3(l[0],l[1],l[2]));var S=new t.MeshBasicMaterial({color:new t.Color(n.color),side:t.DoubleSide,force:!0}),A=e.createSimpleMeshNode({material:S,bufferPosition:l,bufferNormal:h,bufferUV:u,bufferIndex:P,coordinates:c});A.setShadow(!1),A.setMatrix((new t.Matrix4).makeRotationZ(Math.PI).multiply((new t.Matrix4).makeTranslation(-n.length/2,0,0)));var p=a({text:n.text?n.text:String(Math.round(100*n.angle*180/Math.PI)/100),fontSize:o,color:n.color}),g=p.getBoundingBox();p.setMatrix((new t.Matrix4).makeRotationZ(-Math.PI/2));var E=new i;E.addChild(p),E.setMatrix((new t.Matrix4).makeTranslation(n.length,(g.max.x-g.min.x)/2,0));var f=new i;return f.setMatrix((new t.Matrix4).makeRotationZ(n.angle)),f.addChild(A),f.addChild(E),f}function P(t){var e=t.split("&#xA;"),n=[];e.forEach((function(t){n=n.concat(t.split("&#10;"))}));var i=[];return n.forEach((function(t){i=i.concat(t.split(/(\r\n|\n|\r)/gm))})),n}function T(t){t.setPickParent&&t.setPickParent(!0);for(var e=t.children,n=0;n<e.length;n++)T(e[n])}return{buildTechnologicalAttributeRepresentation:function(h){if(h&&h.category&&h.attrType&&h.data){var u,c,d=function(t){var e,n,i,o,s;if("4"===t.category){if(4===t.attrType||5===t.attrType)for(e={arrowLabel:"",arrowStartPoint:{x:0,y:0,z:0},arrowEndPoint:{x:0,y:0,z:0},arrowColor:{r:0,g:0,b:0},showState:!1},s=0;s<t.data.length;s++)i=(n=t.data[s]).Name,o=n.Value,"ArrowLabel"===i?e.arrowLabel=o:"ArrowStartX"===i?e.arrowStartPoint.x=parseFloat(o):"ArrowStartY"===i?e.arrowStartPoint.y=parseFloat(o):"ArrowStartZ"===i?e.arrowStartPoint.z=parseFloat(o):"ArrowEndX"===i?e.arrowEndPoint.x=parseFloat(o):"ArrowEndY"===i?e.arrowEndPoint.y=parseFloat(o):"ArrowEndZ"===i?e.arrowEndPoint.z=parseFloat(o):"ArrowColorR"===i?e.arrowColor.r=parseInt(o):"ArrowColorV"===i?e.arrowColor.g=parseInt(o):"ArrowColorB"===i?e.arrowColor.b=parseInt(o):"IsShownStatus"===i&&(e.showState="1"===o);else if(14===t.attrType)for(e={orientations:[],orientationsNls:[],colors:[],length:0,constantSize:!1,xAxis:{x:0,y:0,z:0},yAxis:{x:0,y:0,z:0},zAxis:{x:0,y:0,z:0},origin:{x:0,y:0,z:0}},s=0;s<t.data.length;s++)i=(n=t.data[s]).Name,o=n.Value,"Rosette Size"===i?e.length=o:"IsPixelSize"===i?e.constantSize="1"===o:"IsShownStatus"===i?e.showState="1"===o:"Direction Value"===i?(e.orientations.push(o),n.Nls&&e.orientationsNls.push(n.Nls)):"DirRed"===i?e.colors.push({r:o/255}):"DirGreen"===i?e.colors[e.colors.length-1].g=o/255:"DirBlue"===i?e.colors[e.colors.length-1].b=o/255:-1!==i.indexOf("\\Origin\\")?i.indexOf("\\X`")>=0?e.origin.x=1e3*o:i.indexOf("\\Y`")>=0?e.origin.y=1e3*o:i.indexOf("\\Z`")>=0&&(e.origin.z=1e3*o):-1!==i.indexOf("\\XAxis\\")?i.indexOf("\\X`")>=0?e.xAxis.x=o:i.indexOf("\\Y`")>=0?e.xAxis.y=o:i.indexOf("\\Z`")>=0&&(e.xAxis.z=o):-1!==i.indexOf("\\YAxis\\")?i.indexOf("\\X`")>=0?e.yAxis.x=o:i.indexOf("\\Y`")>=0?e.yAxis.y=o:i.indexOf("\\Z`")>=0&&(e.yAxis.z=o):-1!==i.indexOf("\\ZAxis\\")&&(i.indexOf("\\X`")>=0?e.zAxis.x=o:i.indexOf("\\Y`")>=0?e.zAxis.y=o:i.indexOf("\\Z`")>=0&&(e.zAxis.z=o));else if(32===t.attrType)for(e={name:null,entities:null,thickness:null,thicknessLaw:[],position:{x:0,y:0,z:0}},s=0;s<t.data.length;s++)i=(n=t.data[s]).Name,o=n.Value,"Core Sample"===i?e.name=o:"IsShownStatus"===i?e.showState="1"===o:i.indexOf("XPoint")>=0?e.position.x=o:i.indexOf("YPoint")>=0?e.position.y=o:i.indexOf("ZPoint")>=0?e.position.z=o:"Entities Number"===i?e.entities=o+" "+r.compositePliesLbl:"Thickness"===i?e.thickness=n.Nls?n.Nls:o:i.indexOf("Thickness Law")>=0&&(e.thicknessLaw=P(o))}else if("6"===t.category){var a;if(2===t.attrType||4===t.attrType||5===t.attrType||6===t.attrType)for(e={textWithLeaders:[]},s=0;s<t.data.length;s++)i=(n=t.data[s]).Name,o=n.Value,"MLPTextWLeader"===i?(a={},e.textWithLeaders.push(a),a.text=P(o)):"IsShownStatus"===i?a.showState="1"===o:"X_Start"===i?(a.startPosition={},a.startPosition.x=parseFloat(o)):"Y_Start"===i?a.startPosition.y=parseFloat(o):"Z_Start"===i?a.startPosition.z=parseFloat(o):"X_End"===i?(a.endPosition={},a.endPosition.x=parseFloat(o)):"Y_End"===i?a.endPosition.y=parseFloat(o):"Z_End"===i?a.endPosition.z=parseFloat(o):"R"===i?(a.color={},a.color.r=parseFloat(o)/255):"G"===i?a.color.g=parseFloat(o)/255:"B"===i?a.color.b=parseFloat(o)/255:"A"===i?a.color.a=parseFloat(o)/255:"ArrowHeadVisibility"===i?a.arrowVisibleFlag="1"===o:"Thickness"===i?a.thickness=parseFloat(o):"TotalThickness"===i?a.totalThickness=n.Nls?n.Nls:o:"NbOfLayers"===i?a.nbLayers=o+" "+r.compositePliesLbl:"CSName"===i&&(a.csName=o)}return e}(h),S=!1,A=0,p=function(e){if(e&&e.text&&e.parentNode){var n=a({text:e.text,fontSize:e.fontSize||13,color:new t.Color(e.color||"#000000")});e.parentNode.addChild(n),n.setMatrix((new t.Matrix4).makeTranslation(3,A+3,1));var i=n.getBoundingBox();A+=i.max.y-i.min.y+3}};if(d)if("4"===h.category)if(4!==h.attrType&&5!==h.attrType||!d.arrowLabel){if(14===h.attrType){d.length=d.constantSize?96/25.4*d.length:1e3*d.length;var g=d.constantSize?new n({ratio:1}):new i,E=e.createSphereNode({radius:d.length/10,color:new t.Color({r:.7,g:.7,b:.7})});for(E.setShadow(!1),g.addChild(E),u=0;u<d.orientations.length;u++)g.addChild(l({length:d.length,color:d.colors&&d.colors[u]?d.colors[u]:new t.Color({r:.7,g:.7,b:.7}),angle:d.orientations[u],text:d.orientationsNls&&d.orientationsNls[u]?d.orientationsNls[u]:null}));g.setMatrix((new t.Matrix4).makeBasis(d.xAxis,d.yAxis,d.zAxis).setPosition(d.origin)),g.setNoZ(!0),T(g),S={node:g,visible:d.showState}}else if(32===h.attrType){var f=new o({type:"Spherical"}),N=new n({ratio:1});f.addChild(N);var C;for(u=d.thicknessLaw.length-1;u>=0;u--)p({text:d.thicknessLaw[u],parentNode:N});p({text:d.thickness,parentNode:N}),p({text:d.entities,parentNode:N}),p({text:d.name,parentNode:N});var _=N.getBoundingBox();C=_.max.x-_.min.x;var R=new t.MeshBasicMaterial({color:new t.Color("#FFFFFF"),side:t.DoubleSide,force:!0}),M=e.createRectangleNode({width:C+6,height:A+6,fill:!0,noEdge:!1,material:R});M.setShadow(!1),N.addChild(M),f.setMatrix((new t.Matrix4).setPosition(d.position)),f.setNoZ(!0),T(f),S={node:f,visible:d.showState}}}else{let e=new t.Vector3(d.arrowStartPoint.x,d.arrowStartPoint.y,d.arrowStartPoint.z),i=new t.Vector3(d.arrowEndPoint.x,d.arrowEndPoint.y,d.arrowEndPoint.z),r=(new t.Vector3).subVectors(i,e);r.multiplyScalar(96/25.4);var O=new n({ratio:1});const l=8;O.addChild(new s({arrowWidth:l/4,headLength:l,color:new t.Color(d.arrowColor),initialPoint:new t.Vector3,finalPoint:r,head:s.types.ARROW}));var m=new o({type:"Spherical"}),D=a({text:d.arrowLabel,fontSize:14,color:new t.Color(d.arrowColor)});let P=D.getBoundingBox();D.setMatrix((new t.Matrix4).setPosition(new t.Vector3(l,-(P.max.y-P.min.y)/2,0))),m.addChild(D),m.setMatrix((new t.Matrix4).makeTranslation((P.max.y-P.min.y)/2,0,0)),O.addChild(m),O.setMatrix((new t.Matrix4).setPosition(e)),O.setNoZ(!0),T(O),S={node:O,visible:d.showState}}else if("6"===h.category){var I,y,b,x,w,Y,j;if(2===h.attrType&&d&&d.textWithLeaders&&d.textWithLeaders.length){var v=new i;for(u=0;u<d.textWithLeaders.length;u++){for(x=d.textWithLeaders[u].startPosition,w=d.textWithLeaders[u].endPosition,x=new t.Vector3(x.x,x.y,x.z),w=new t.Vector3(w.x,w.y,w.z),I=new n({ratio:1}),v.addChild(I),(y=(new t.Vector3).subVectors(w,x)).multiplyScalar(96/25.4),b=new s({arrowWidth:d.textWithLeaders[u].thickness,headLength:10,arrowScale:2,color:new t.Color(d.textWithLeaders[u].color),initialPoint:new t.Vector3,finalPoint:y,head:d.textWithLeaders[u].arrowVisibleFlag?s.types.ARROW:s.types.NONE}),I.addChild(b),Y=new o({type:"Spherical"}),I.addChild(Y),A=0,c=d.textWithLeaders[u].text.length-1;c>=0;c--)p({text:d.textWithLeaders[u].text[c],parentNode:Y,color:d.textWithLeaders[u].color});j=y.clone().setLength(A/2),Y.setMatrix((new t.Matrix4).setPosition((new t.Vector3).subVectors(y,j))),I.setMatrix((new t.Matrix4).setPosition(x))}v.setNoZ(!0),T(v),S={node:v,visible:d.showState}}else if((4===h.attrType||5===h.attrType||6===h.attrType)&&d&&d.textWithLeaders&&1===d.textWithLeaders.length){var U=new i,L=d.textWithLeaders[0];x=L.startPosition,w=L.endPosition,x=new t.Vector3(x.x,x.y,x.z),w=new t.Vector3(w.x,w.y,w.z),(y=(new t.Vector3).subVectors(x,w)).multiplyScalar(96/25.4),I=new n({ratio:1}),U.addChild(I),b=new s({arrowWidth:L.thickness,headLength:10,arrowScale:2,color:new t.Color(L.color),initialPoint:y,finalPoint:new t.Vector3,head:L.arrowVisibleFlag?s.types.ARROW:s.types.NONE}),I.addChild(b),Y=new o({type:"Spherical"}),I.addChild(Y);var V=[];for(L.csName?(V.push(L.csName),L.totalThickness&&V.push(L.totalThickness),L.nbLayers&&V.push(L.nbLayers)):V=L.text,A=0,c=V.length-1;c>=0;c--)p({text:V[c],parentNode:Y,color:L.color});var F=Y.getBoundingBox(),k=e.createRectangleNode({width:F.max.x-F.min.x+6,height:A+6,fill:!0,noEdge:!1,material:new t.MeshBasicMaterial({color:new t.Color("#FFFFFF"),opacity:0,side:t.DoubleSide,transparent:!0,force:!0})});k.setShadow(!1),Y.addChild(k),j=y.clone().setLength(A/2),Y.setMatrix((new t.Matrix4).setPosition((new t.Vector3).subVectors(y,j))),I.setMatrix((new t.Matrix4).setPosition(w)),U.setNoZ(!0),T(U),S={node:U,visible:d.showState}}}return S}}}})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationModelConstants",["require","exports"],(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTEXT_TYPE_ANNOT_SET=e.ANNOTATION_SET_TYPE=e.ANNOTATION_ROOT_TYPES=e.TPS_TYPE_SUPERTYPE_MAP=e.TPS_SUPERTYPE_MAP=e.TPS_TYPE_MAP=void 0,e.TPS_TYPE_MAP={TPSTEXT:1,TPSFLAGNOTE:2,TPSNONSEMANTICDATUM:3,TPSNONSEMANTICGDT:4,TPSDATUMSIMPLE:5,TPSDATUMTARGET:6,TPSTRUEPOSITION:7,TPSCONCENTRICITY:8,TPSSYMMETRY:9,TPSPOSITIONOFANYLINE:10,TPSPOSITIONOFASURFACE:11,TPSLINEARDIMENSION:12,TPSANGULARDIMENSION:13,TPSSECONDLINEARDIM:14,TPSCHAMFERDIMENSION:15,TPSBASICDIM:16,TPSTOTALRUNOUT:17,TPSCIRCULARRUNOUT:18,TPSPARALLELISM:19,TPSPERPENDICULARITY:20,TPSANGULARITY:21,TPSSTRAIGHTNESS:22,TPSFLATNESS:23,TPSCIRCULARITY:24,TPSCYLINDRICITY:25,TPSPROFILEOFANYLINE:26,TPSPROFILEOFASURFACE:27,TPSPATTERNTRUEPOS:28,TPSROUGHNESS:29,TPSNOA:30,TPSWELD:31,TPSREFERENCEFRAME:32,TPSDATUMSYSTEM:33,TPSNONSEMANTICDIMENSION:34,TPSNONSEMANTICTARGET:35,TPSCOORDDIM:36,TPSORIENTEDANGULARDIMENSION:37,TPSORIENTEDLINEARDIMENSION:38,TPSPOINT:40,TPSLINE:41,TPSPLANE:42,TPSCIRCLE:43,TPSCYLINDER:44,TPSCURVE:45,TPSTHREAD:46,TPSATTRIBUTE:47,TPSROUNDNESS:48,TPSCOAXIALITY:49,TPSEDGE_CONDITION_SYMBOL:50,TPSRESTRICTED_AREA:51,TPSDATUM_REFERENCE_FRAME:52,TPSPARTIAL_SURFACE:53,TPSEXTENDEDCYLINDER:54,TPSUNDEFINEDEDGE:55,TPSTRANSITIONSPECIFICATION:56},e.TPS_SUPERTYPE_MAP={NonSemantic:1,Datum:2,Position:3,Dimension:4,RunOut:5,Orientation:6,Form:7,Geometry:8,Attribute:9,RestrictedAreas:10,Capture:11},e.TPS_TYPE_SUPERTYPE_MAP={[e.TPS_TYPE_MAP.TPSTEXT]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSFLAGNOTE]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSNONSEMANTICDATUM]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSNONSEMANTICGDT]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSDATUMSIMPLE]:e.TPS_SUPERTYPE_MAP.Datum,[e.TPS_TYPE_MAP.TPSDATUMTARGET]:e.TPS_SUPERTYPE_MAP.Datum,[e.TPS_TYPE_MAP.TPSTRUEPOSITION]:e.TPS_SUPERTYPE_MAP.Position,[e.TPS_TYPE_MAP.TPSCONCENTRICITY]:e.TPS_SUPERTYPE_MAP.Position,[e.TPS_TYPE_MAP.TPSSYMMETRY]:e.TPS_SUPERTYPE_MAP.Position,[e.TPS_TYPE_MAP.TPSPOSITIONOFANYLINE]:e.TPS_SUPERTYPE_MAP.Position,[e.TPS_TYPE_MAP.TPSPOSITIONOFASURFACE]:e.TPS_SUPERTYPE_MAP.Position,[e.TPS_TYPE_MAP.TPSLINEARDIMENSION]:e.TPS_SUPERTYPE_MAP.Dimension,[e.TPS_TYPE_MAP.TPSANGULARDIMENSION]:e.TPS_SUPERTYPE_MAP.Dimension,[e.TPS_TYPE_MAP.TPSSECONDLINEARDIM]:e.TPS_SUPERTYPE_MAP.Dimension,[e.TPS_TYPE_MAP.TPSCHAMFERDIMENSION]:e.TPS_SUPERTYPE_MAP.Dimension,[e.TPS_TYPE_MAP.TPSBASICDIM]:e.TPS_SUPERTYPE_MAP.Dimension,[e.TPS_TYPE_MAP.TPSTOTALRUNOUT]:e.TPS_SUPERTYPE_MAP.RunOut,[e.TPS_TYPE_MAP.TPSCIRCULARRUNOUT]:e.TPS_SUPERTYPE_MAP.RunOut,[e.TPS_TYPE_MAP.TPSPARALLELISM]:e.TPS_SUPERTYPE_MAP.Orientation,[e.TPS_TYPE_MAP.TPSPERPENDICULARITY]:e.TPS_SUPERTYPE_MAP.Orientation,[e.TPS_TYPE_MAP.TPSANGULARITY]:e.TPS_SUPERTYPE_MAP.Orientation,[e.TPS_TYPE_MAP.TPSSTRAIGHTNESS]:e.TPS_SUPERTYPE_MAP.Form,[e.TPS_TYPE_MAP.TPSFLATNESS]:e.TPS_SUPERTYPE_MAP.Form,[e.TPS_TYPE_MAP.TPSCIRCULARITY]:e.TPS_SUPERTYPE_MAP.Form,[e.TPS_TYPE_MAP.TPSCYLINDRICITY]:e.TPS_SUPERTYPE_MAP.Form,[e.TPS_TYPE_MAP.TPSPROFILEOFANYLINE]:e.TPS_SUPERTYPE_MAP.Form,[e.TPS_TYPE_MAP.TPSPROFILEOFASURFACE]:e.TPS_SUPERTYPE_MAP.Form,[e.TPS_TYPE_MAP.TPSPATTERNTRUEPOS]:e.TPS_SUPERTYPE_MAP.Form,[e.TPS_TYPE_MAP.TPSROUGHNESS]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSNOA]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSWELD]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSREFERENCEFRAME]:e.TPS_SUPERTYPE_MAP.Datum,[e.TPS_TYPE_MAP.TPSDATUMSYSTEM]:e.TPS_SUPERTYPE_MAP.Datum,[e.TPS_TYPE_MAP.TPSNONSEMANTICDIMENSION]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSNONSEMANTICTARGET]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSCOORDDIM]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSORIENTEDANGULARDIMENSION]:e.TPS_SUPERTYPE_MAP.Dimension,[e.TPS_TYPE_MAP.TPSORIENTEDLINEARDIMENSION]:e.TPS_SUPERTYPE_MAP.Dimension,[e.TPS_TYPE_MAP.TPSPOINT]:e.TPS_SUPERTYPE_MAP.Geometry,[e.TPS_TYPE_MAP.TPSLINE]:e.TPS_SUPERTYPE_MAP.Geometry,[e.TPS_TYPE_MAP.TPSPLANE]:e.TPS_SUPERTYPE_MAP.Geometry,[e.TPS_TYPE_MAP.TPSCIRCLE]:e.TPS_SUPERTYPE_MAP.Geometry,[e.TPS_TYPE_MAP.TPSCYLINDER]:e.TPS_SUPERTYPE_MAP.Geometry,[e.TPS_TYPE_MAP.TPSCURVE]:e.TPS_SUPERTYPE_MAP.Geometry,[e.TPS_TYPE_MAP.TPSTHREAD]:e.TPS_SUPERTYPE_MAP.Geometry,[e.TPS_TYPE_MAP.TPSATTRIBUTE]:e.TPS_SUPERTYPE_MAP.Attribute,[e.TPS_TYPE_MAP.TPSRESTRICTED_AREA]:e.TPS_SUPERTYPE_MAP.RestrictedAreas,[e.TPS_TYPE_MAP.TPSEXTENDEDCYLINDER]:e.TPS_SUPERTYPE_MAP.Geometry,[e.TPS_TYPE_MAP.TPSUNDEFINEDEDGE]:e.TPS_SUPERTYPE_MAP.NonSemantic,[e.TPS_TYPE_MAP.TPSTRANSITIONSPECIFICATION]:e.TPS_SUPERTYPE_MAP.NonSemantic},e.ANNOTATION_ROOT_TYPES={1:"RootViews",2:"RootCaptures",3:"RootNonSemantic",4:"RootDatums",5:"RootPositions",6:"RootDimensions",7:"RootRunOuts",8:"RootOrientations",9:"RootForms",10:"RootGeometries",11:"RootAttributes",12:"RootRestrictedArea"},e.ANNOTATION_SET_TYPE=0,e.CONTEXT_TYPE_ANNOT_SET={CATFTASetCtxTypeV5Std:1,CATFTASetCtxTypeV5ARM:2,CATFTASetCtxTypeV5Prd:3,CATFTASetCtxTypeV6Std:4,CATFTASetCtxTypeV6Prd:5}})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationModel",[],(function(){})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationNode",["require","exports","DS/Visualization/Node3D","DS/CAT3DAnnotationRsc/CAT3DAnnotationRscServices","DS/CAT3DAnnotationModel/CAT3DAnnotationModelConstants"],(function(t,e,n,i,o){"use strict";let s;return class extends n{constructor(t){let e,n;t=t||{},super();let r,a=!1,l=this;if(this.getAnnotationClassType=function(){return"tps"},this.getAnnotationType=function(){return t.type},this.getAttributeCategory=function(){return t.category?t.category:"3DAnnotations"},this.getAnnotationVersion=function(){return t.version},this.getAnnotationSupertype=function(){return n||(n=o.TPS_TYPE_SUPERTYPE_MAP[t.type],n)},this.getAnnotationName=function(){return t.name},this.getAnnotationUuid=function(){return t.uuid},this.getAnnotationIcon=function(){if(e)return e;let n=t.category||"3DAnnotations",o="3DAnnotations"===n?l.getAnnotationType():t.attrType;return e=i.getFeatureIconPath(n,o),e},this.addLinkedData=function(t){t&&(r||(r={}),-1===t.type?(r.hyperlinksAndComments||(r.hyperlinksAndComments={}),r.hyperlinksAndComments.hiddenText=t.text):0===t.type?(r.hyperlinksAndComments||(r.hyperlinksAndComments={}),r.hyperlinksAndComments.urls||(r.hyperlinksAndComments.urls=[]),r.hyperlinksAndComments.urls.push({title:t.anchorText,url:t.address})):256&t.type?(r.relatedDocs||(r.relatedDocs=[]),r.relatedDocs.push(t)):512&t.type?(r.requirements||(r.requirements=[]),r.requirements.push(t)):"failureModes"===t.type&&(r.failureModes=t.data))},this.getAnnotationHyperlinkData=function(){return r},this.getAnnotationID=function(){return t.tpsID},this.getAnnotationTTRS=function(){return t.ttrs},this.getAnnotationSCSReframeArea=function(){return t.scsReframeArea},this.setDisplayFlag=function(t){t!==a&&(a=t)},this.getDisplayFlag=function(){return a},this.isVisualized=function(){return!0},this.getAnnotationSurfaceNormalRep=function(){return t.surfaceNormalRep},s||(s=t.onAnnotationAttrModifiedCB),t.hyperlinksData&&t.hyperlinksData.length)for(let e=0;e<t.hyperlinksData.length;e++)0!==t.hyperlinksData[e].type&&-1!==t.hyperlinksData[e].type||this.addLinkedData(t.hyperlinksData[e]);t.failureModes&&t.failureModes.length&&this.addLinkedData({type:"failureModes",data:t.failureModes}),t.Text&&(this.getText=function(){return t.Text}),t.NOAText&&(this.getNOAText=function(){return t.NOAText}),t.NOAType&&(this.getNOAType=function(){return t.NOAType}),this.visible=!0,this.setVisibilityFree(!1)}setVisibility(t){t!==this.visible&&(super.setVisibility(t),this.setVisibilityFree(!1===t),"function"==typeof s&&s(this,"visibility"))}toJSON(){if(!this.jsonObject){let t=this.isDefaultAnnotation?this.isDefaultAnnotation():void 0,e=this.getAnnotationToleranceValue?this.getAnnotationToleranceValue():void 0,n=this.getAnnotationToleranceZoneValue?this.getAnnotationToleranceZoneValue():void 0,i=this.getAnnotationDimensionLimits?this.getAnnotationDimensionLimits():void 0,o=this.getGeneralTolerance?this.getGeneralTolerance():void 0,s=this.getTabulatedLimit?this.getTabulatedLimit():void 0;this.jsonObject={},void 0!==this.getAnnotationID()&&(this.jsonObject.id=this.getAnnotationID()),void 0!==this.getAnnotationName()&&(this.jsonObject.name=this.getAnnotationName()),void 0!==this.getAnnotationIcon()&&(this.jsonObject.icon=this.getAnnotationIcon()),void 0!==this.getAnnotationType()&&(this.jsonObject.type=this.getAnnotationType()),void 0!==this.getAnnotationSupertype()&&(this.jsonObject.superType=this.getAnnotationSupertype()),void 0!==this.getAnnotationUuid()&&(this.jsonObject.uuid=this.getAnnotationUuid()),void 0!==this.getAnnotationTTRS()&&(this.jsonObject.ttrs=this.getAnnotationTTRS()),this.getText&&(this.jsonObject.text=this.getText()),this.getNOAText&&(this.jsonObject.noaText=this.getNOAText()),this.getNOAType&&(this.jsonObject.noaType=this.getNOAType()),void 0!==t&&(this.jsonObject.isDefaultAnnot=t),void 0!==e&&(this.jsonObject.toleranceValue=e),void 0!==n&&(this.jsonObject.toleranceZoneValue=n),void 0!==i&&(this.jsonObject.toleranceLimits=i),void 0!==o&&(this.jsonObject.generalTolerance=o),void 0!==s&&(this.jsonObject.tabulatedLimit=s)}if(this.children&&this.children.length){this.jsonObject.children&&this.jsonObject.children.splice(0,this.jsonObject.children.length);for(let t=0;t<this.children.length;t++)this.children[t]&&this.children[t].getAnnotationClassType&&this.children[t].toJSON&&(this.jsonObject.children||(this.jsonObject.children=[]),this.jsonObject.children.push(this.children[t].toJSON()))}return void 0!==this.getDisplayFlag()&&(this.jsonObject.displayFlag=this.getDisplayFlag()),void 0!==this.getAnnotationHyperlinkData()&&(this.jsonObject.hyperlink=this.getAnnotationHyperlinkData()),this.jsonObject.isVisible=this.isVisible(),this.jsonObject}}})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationRootNode",["require","exports","DS/CAT3DAnnotationModel/CAT3DAnnotationModelConstants","DS/CAT3DAnnotationModel/CAT3DAnnotationNode"],(function(t,e,n,i){"use strict";return class extends i{constructor(t){super(t),this.getAnnotationClassType=function(){return"tpsRoot"},this.getAnnotationType=function(){return n.ANNOTATION_ROOT_TYPES[t.rootType]},this.getAnnotationIcon=function(){},this.getAnnotationUuid=function(){return String(t.rootType)},this.getAnnotationCategory=function(){},this.isVisualized=function(){return!1}}toJSON(){super.toJSON(),void 0!==this.getAnnotationType()&&(this.jsonObject.type=this.getAnnotationType()),this.jsonObject.children||(this.jsonObject.children=[]),this.jsonObject.children.splice(0,this.jsonObject.children.length);for(let t=0;t<this.children.length;t++)this.jsonObject.children.push(this.children[t].toJSON());return this.jsonObject}}})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationAttributeNode",["require","exports","DS/CAT3DAnnotationModel/CATAttrRepresentationFactory","DS/Visualization/Node3D","DS/CAT3DAnnotationModel/CAT3DAnnotationNode"],(function(t,e,n,i,o){"use strict";return class extends o{constructor(t){super(t);let e,o=this,s=t.params||[];this.isRootAttribute=function(){return t.isRootAttribute},this.getAnnotationClassType=function(){return"tpsAttribute"},this.addAttributeParam=function(t){if(!t)return;let e=!0;for(let n=0;n<s.length;n++)s[n].Name===t.Name&&s[n].Magnitude===t.Magnitude&&(s[n]=t,e=!1);e&&s.push(t)},this.getAttributeParam=function(){return s},this.getPointedFeatureIds=function(){return t.pointedFeatureUuids},this.isFakeAttribute=function(){return!t.uuid||t.uuid&&!t.uuid.length},this.getAnnotationUuid=function(){return t.uuid?t.uuid:o.parents&&1===o.parents.length&&o.parents[0].getAnnotationUuid&&o.parents[0].getAnnotationUuid()?o.parents[0].getAnnotationUuid()+"_"+o.getAnnotationName():o.getAnnotationName()},this.getAnnotationAttributeNode=function(){return e},this.getAttributeType=function(){return t.attrType},this.buildVisualization=function(s){e&&e.removeChildren();let r=n.buildTechnologicalAttributeRepresentation({category:t.category,attrType:t.attrType,data:s});r&&r.node&&(e=new i(o.getAnnotationName()+"_rep"),o.addChild(e),e.addChild(r.node),e.setPickParent(!0),!1===r.visible&&o.setVisibility(!1))},this.isVisualized=function(){return void 0!==e}}toJSON(){return this.jsonObject?super.toJSON():(super.toJSON(),void 0!==this.getAttributeCategory()&&(this.jsonObject.category=this.getAttributeCategory()),void 0!==this.getAttributeParam()&&(this.jsonObject.param=this.getAttributeParam()),void 0!==this.getAnnotationTTRS()&&(this.jsonObject.ttrs=this.getAnnotationTTRS()),void 0!==this.isRootAttribute()&&(this.jsonObject.isRootAttr=this.isRootAttribute()),void 0!==this.getAttributeType()&&(this.jsonObject.attrType=this.getAttributeType()),void 0!==this.getPointedFeatureIds()&&(this.jsonObject.pointedAttrs=this.getPointedFeatureIds())),this.jsonObject}}})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationViewNode",["require","exports","DS/WebappsUtils/WebappsUtils","DS/CAT3DAnnotationModel/CAT3DAnnotationNode"],(function(t,e,n,i){"use strict";return class extends i{constructor(t){super(t);let e,i,o,s=t.thumbnail?"data:image/png;base64,"+t.thumbnail:null,r=!1,a=[];this.getAnnotationIcon=function(){if(e)return e;let t=this.getViewType();switch(e=n.getWebappsAssetUrl("CAT3DAnnotationRsc","icons/22/"),t){case"ProjectionView":e+="I_W3DAnnot_ProjectionView";break;case"SectionView":e+="I_W3DAnnot_SectionView";break;case"SectionCutView":e+="I_W3DAnnot_SectionCutView";break;default:e+="I_W3DAnnot_AxoView"}return e+=".png",e},this.isSubView=function(){return r},this.setIsSubView=function(t){r=t},this.setPreview=function(t){s=t},this.getPreview=function(){return s},this.getAnnotationClassType=function(){return"tpsView"},this.getViewType=function(){if(i)return i;let t=this.getMultiSectionData(),e=this.getAnnotationType();return i=1!==e||t?3===e?"SectionCutView":2===e||t?"SectionView":"AxonometricView":"ProjectionView",i},this.getViewPlane=function(){return t.viewPlane},this.getViewPlaneInformations=function(){return{direction:t.viewDirection,origin:t.viewOrigin,normal:t.viewNormal}},this.getCappingRep=function(){return t.cappingRep},this.getReframeArea=function(){return t.reframeArea},this.getVisibleAnnotations=function(e,n){let i,o,s,r=e.getLastElement?e.getLastElement(!0):e,a=[];if(t.TPSs)for(let n=0;n<t.TPSs.length;n++){let l=!1,P=r.children;for(i=0;i<P.length;i++){let r=P[i];if("RootViews"!==r.getAnnotationType()&&"RootCaptures"!==r.getAnnotationType()){let i=r.children;for(o=0;o<i.length;o++)if(i[o].getAnnotationID()===t.TPSs[n]){e.getLastElement?(s=e.clone(),s.addElement(r),s.addElement(i[o]),a.push(s)):a.push(i[o]),l=!0;break}}if(l)break}}let l=[];if(a&&a.length&&n){let t=r.getRootAnnotationNode("RootGeometries");if(t)for(i=0;i<a.length;i++){let n=a[i].getLastElement?a[i].getLastElement(!0):a[i];if(n.getAnnotationTTRS){let i=n.getAnnotationTTRS();if(i){let n=t.children;for(o=0;o<n.length;o++)n[o].getAnnotationTTRS()&&n[o].getAnnotationTTRS().equals(i)&&(e.getLastElement?(s=e.clone(),s.addElement(t),s.addElement(n[o]),l.push(s)):l.push(n[o]))}}}}return a.concat(l)},this.isMultiSectionView=function(){return!!(t.multiClipping&&t.multiClipping.SketchNormal&&t.multiClipping.SketchOrigin&&t.multiClipping.views&&t.multiClipping.views.length&&t.multiClipping.views.length>1&&t.multiClipping.pointsDef&&t.multiClipping.pointsDef.length)},this.get2DClippingInformation=function(){return t.clipping2D},this.get2DClippingRepresentation=function(){return o},this.set2DClippingRepresentation=function(t){o=t},this.getMultiSectionData=function(){return t.multiClipping},this.setAssociatedCapture=function(t){a.push(t)},this.getAssociatedCapture=function(){return a},this.getTPSList=function(){return t.TPSs},this.getAnnotationSupertype=function(){return 11}}toJSON(){if(this.jsonObject)super.toJSON();else{super.toJSON();let t,e=this.parents[0].parents[0],n=this.getVisibleAnnotations(e,!0),i=[];for(let o=0;o<n.length;o++){let s=n[o].parents[0],r=null,a=null;for(t=0;t<e.children.length;t++)if(s.getAnnotationType()===e.children[t].getAnnotationType()){r=t;break}for(t=0;t<e.children[r].children.length;t++)if(n[o].getAnnotationID()===e.children[r].children[t].getAnnotationID()){a=t;break}null!==r&&null!==a&&i.push([r,a])}void 0!==this.getAnnotationIcon()&&(this.jsonObject.icon=this.getAnnotationIcon()),void 0!==this.getAnnotationType()&&(this.jsonObject.type=this.getAnnotationType()),void 0!==this.getAnnotationSupertype()&&(this.jsonObject.superType=this.getAnnotationSupertype()),void 0!==this.isSubView()&&(this.jsonObject.isSubView=this.isSubView()),void 0!==this.getAssociatedCapture()&&(this.jsonObject.associatedCapture=this.getAssociatedCapture()),void 0!==this.isMultiSectionView()&&(this.jsonObject.isMultiSectionView=this.isMultiSectionView()),void 0!==this.getViewPlaneInformations()&&(this.jsonObject.viewPlaneInformations=this.getViewPlaneInformations()),void 0!==this.getMultiSectionData()&&(this.jsonObject.multiSectionData=this.getMultiSectionData()),void 0!==this.getReframeArea()&&(this.jsonObject.reframeArea=this.getReframeArea()),void 0!==i&&(this.jsonObject.tpsList=i)}return void 0!==this.getPreview()&&(this.jsonObject.preview=this.getPreview()),this.jsonObject}}})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationSetNode",["require","exports","DS/WebappsUtils/WebappsUtils","DS/CAT3DAnnotationModel/CAT3DAnnotationModelConstants","DS/CAT3DAnnotationModel/CAT3DAnnotationNode"],(function(t,e,n,i,o){"use strict";return class extends o{constructor(t){let e;super(t);let o,s=[],r=[];this.getAnnotationIcon=function(){return e||(e=n.getWebappsAssetUrl("CAT3DAnnotationRsc","icons/22/"),e+="I_W3DAnnot_NodeAnnotationSet.png",e)},this.getAnnotationClassType=function(){return"tpsAnnotationSet"},this.getAnnotationType=function(){return i.ANNOTATION_SET_TYPE},this.getRootAnnotationNode=function(t){for(let e=0;e<this.children.length;e++)if(this.children[e].getAnnotationType()===t)return this.children[e]},this.getContextType=function(){return t.contextType},this.addTTRS=function(t){if(t&&(t.GeoP||t.geomLinks)&&t.tpsID){let e,n,i=[];if(t.GeoP)for(let o=0;o<t.GeoP.length;o++){n=[],e=!1;for(let i=0;i<t.GeoP[o].length;i++)(0!==t.GeoP[o][i]||e)&&(n.push(t.GeoP[o][i]),e=!0);n.length&&i.push(n)}(i.length||t.geomLinks)&&s.push({geoP:i,tpsID:t.tpsID,referencedCGs:t.referencedCGs&&t.referencedCGs.length?t.referencedCGs:void 0,geomLinks:t.geomLinks})}},this.getPointedCompRelIds=()=>{let t;return s.forEach((e=>{e.geomLinks&&e.geomLinks.forEach((e=>{t||(t=[]),t=t.concat(e.compRelId)}))})),t},this.setPointedCompIds=t=>{r=t},this.getPointedCompIds=t=>{var e;return null===(e=r.find((e=>e.compRelId===t)))||void 0===e?void 0:e.phyIds},this.getTTRSs=function(){return s},this.addReferenceFrame=function(t){o||(o=[]),o.push({datums:t.datums,tpsID:t.tpsID,uuid:t.uuid})},this.getReferenceFrames=function(){return o}}toJSON(){return super.toJSON(),this.getSemanticStandards&&void 0!==this.getSemanticStandards()&&(this.jsonObject.semanticStandards=this.getSemanticStandards()),void 0!==this.getAnnotationIcon()&&(this.jsonObject.icon=this.getAnnotationIcon()),void 0!==this.getContextType()&&(this.jsonObject.contextType=this.getContextType()),void 0!==this.getAnnotationType()&&(this.jsonObject.type=this.getAnnotationType()),this.jsonObject}}})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationCaptureNode",["require","exports","DS/WebappsUtils/WebappsUtils","DS/CAT3DAnnotationModel/CAT3DAnnotationModelConstants","DS/CAT3DAnnotationModel/CAT3DAnnotationNode"],(function(t,e,n,i,o){"use strict";return class extends o{constructor(t){super(t);let e,o,s,r=t.thumbnail?"data:image/png;base64,"+t.thumbnail:null;this.getAnnotationIcon=function(){return e||(e=n.getWebappsAssetUrl("CAT3DAnnotationRsc","icons/22/"),e+="I_W3DAnnot_CaptureAnnotations.png",e)},this.getPointedView=function(){return t.view},this.setPreview=function(t){r=t},this.getPreview=function(){return r},this.getAnnotationClassType=function(){return"tpsCapture"},this.getAnnotationType=function(){return 6},this.getCaptureCamera=function(){return t.camera},this.getCappingRep=function(){return t.cappingRep},this.getVisibleAnnotations=function(e){let n,i,o,s,r=[],a=e.getLastElement?e.getLastElement(!0):e;if(t.TPSs)for(let l=0;l<t.TPSs.length;l++){let P=!1,T=a.children;for(o=0;o<T.length;o++){if(i=T[o],"RootViews"!==i.getAnnotationType()&&"RootCaptures"!==i.getAnnotationType()){let o=i.children;for(s=0;s<o.length;s++)if(o[s].getAnnotationID()===t.TPSs[l]){e.getLastElement?(n=e.clone(),n.addElement(i),n.addElement(o[s]),r.push(n)):r.push(o[s]),P=!0;break}}if(P)break}}for(let l=0;l<3;l++){let P=null,T=null;if(0===l?(P=t.CGs,T="RootGeometries"):1===l?(P=t.Views,T="RootViews"):1===l&&(P=t.Caps,T="RootCaptures"),P&&P.length&&(i=a.getRootAnnotationNode(T),i))for(o=0;o<P.length;o++){let t=i.children;for(s=0;s<t.length;s++)if(t[s].getAnnotationID()===P[o]){e.getLastElement?(n=e.clone(),n.addElement(i),n.addElement(t[s]),r.push(n)):r.push(t[s]);break}}}return r},this.isSectionPlaneActivated=function(){return 1===t.ClipPla},this.isCaptureManagingRepVisibility=function(){return Boolean(t.RepMngt)},this.getHiddenBodiesInst=function(){return t.HiddenBodyInst},this.getVisibleBodiesInst=function(){return t.VisibleBodyInst},this.getVisibleCompRelIds=function(){let e=t.VisibleCompRelId||[];return t.UncutCompRelId&&t.UncutCompRelId.length&&(e=e.concat(t.UncutCompRelId)),e},this.getUncutCompRelIds=function(){return t.UncutCompRelId},this.getUncutCGs=function(){return t.UncutCGs},this.getXMLVisibleCompRelIds=function(){let e=t.VisibleCompXmlId||[];return t.UncutCompXmlId&&t.UncutCompXmlId.length&&(e=e.concat(t.UncutCompXmlId)),e},this.getXMLUncutCompRelIds=function(){return t.UncutCompXmlId},this.getAnnotationSupertype=function(){return i.TPS_SUPERTYPE_MAP.Capture},this.setListsOfAssyPathComponents=function(t){if(t&&(t.visiblePaths&&t.visiblePaths.length||t.hiddenPaths&&t.hiddenPaths.length||t.visibleIdPaths&&t.visibleIdPaths.length)){let e;if(o||(o={visiblePaths:[],hiddenPaths:[],visibleIdPaths:[]}),t.visiblePaths)for(e=0;e<t.visiblePaths.length;e++)o.visiblePaths.push(t.visiblePaths[e].clone());if(t.hiddenPaths)for(e=0;e<t.hiddenPaths.length;e++)o.hiddenPaths.push(t.hiddenPaths[e].clone());if(t.visibleIdPaths)for(e=0;e<t.visibleIdPaths.length;e++)o.visibleIdPaths.push(t.visibleIdPaths[e])}},this.getListsOfAssyPathComponents=function(){return o},this.setListsOfUncutAssyPathComponents=function(t){if(t&&(t.uncutPaths&&t.uncutPaths.length||t.uncutCGs&&t.uncutCGs.length||t.uncutIdPaths&&t.uncutIdPaths.length)){let e;if(s||(s={uncutPaths:[],uncutCGs:[],uncutIdPaths:[]}),t.uncutPaths)for(e=0;e<t.uncutPaths.length;e++)s.uncutPaths.push(t.uncutPaths[e].clone());if(t.uncutCGs)for(e=0;e<t.uncutCGs.length;e++)s.uncutCGs.push(t.uncutCGs[e].clone());if(t.uncutIdPaths)for(e=0;e<t.uncutIdPaths.length;e++)s.uncutIdPaths.push(t.uncutIdPaths[e])}},this.getListsOfUncutAssyPathComponents=function(){return s},t.representation&&this.addChild(t.representation)}toJSON(){if(this.jsonObject)super.toJSON();else{super.toJSON();let t=[],e=this.parents[0].parents[0],n=this.getVisibleAnnotations(e);for(let i=0;i<n.length;i++){let o,s=n[i].parents[0],r=null,a=null;for(o=0;o<e.children.length;o++)if(s.getAnnotationType()===e.children[o].getAnnotationType()){r=o;break}for(r=r||0,o=0;o<e.children[r].children.length;o++)if(n[i].getAnnotationID()===e.children[r].children[o].getAnnotationID()){a=o;break}null!==r&&null!==a&&t.push([r,a])}void 0!==this.getAnnotationIcon()&&(this.jsonObject.icon=this.getAnnotationIcon()),void 0!==this.getAnnotationType()&&(this.jsonObject.type=this.getAnnotationType()),void 0!==this.getAnnotationSupertype()&&(this.jsonObject.superType=this.getAnnotationSupertype()),void 0!==this.getPointedView()&&(this.jsonObject.pointedView=this.getPointedView()),void 0!==this.getVisibleBodiesInst()&&(this.jsonObject.visibleBodiesInst=this.getVisibleBodiesInst()),void 0!==this.getHiddenBodiesInst()&&(this.jsonObject.hiddenBodiesInst=this.getHiddenBodiesInst()),void 0!==this.getCaptureCamera()&&(this.jsonObject.camera=this.getCaptureCamera()),void 0!==t&&(this.jsonObject.tpsList=t)}return void 0!==this.getPreview()&&(this.jsonObject.preview=this.getPreview()),this.jsonObject}}})),define("DS/CAT3DAnnotationModel/CAT3DAnnotationDIFCaptureNode",["require","exports","DS/CAT3DAnnotationModel/CAT3DAnnotationCaptureNode"],(function(t,e,n){"use strict";return class extends n{constructor(t){super(t),this.getCaptureSupportPlane=function(){return{plane:t.plane,up:t.up}},this.getDecorators=function(){return t.decorators},t.representation&&this.addChild(t.representation)}toJSON(){return this.jsonObject?super.toJSON():(super.toJSON(),void 0!==this.getCaptureSupportPlane()&&(this.jsonObject.plane=this.getCaptureSupportPlane())),this.jsonObject}}}));