define("DS/DELPPWRequirementViewModule/RequirementViewUI",["UWA/Core"],(function(e){"use strict";return function(t,n,o,i,r){let l,a,d,c,s=i.getComponent("WUXDockAreaEnum"),u=i.getComponent("WUXFrameWindowsManager").getFrameWindow(t.getAppContext()).getImmersiveFrame();return{init:function(c,u,g){e.is(c,"string")?(d=c,function(c,u){let g=t.getElement(),f=i.createElement("div",{class:"tree-list-container"}),m=e.is(r)?r.getIconURLFromKey(u):"";f.inject(g),l=r.getNLSValue("View."+c+".Title")||"",n.loadDocument(o.getWUXNodeModel()),n.getContent().inject(f),a=i.create("Panel",{position:{at:"right"},minWidth:300,minHeight:250,height:250,title:l,icon:m,side:s.RightDockArea,currentDockArea:s.RightDockArea,identifier:"panel-"+d,content:g,resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!1}),a.close=function(){e.is(d)?t.notify("toggleCmdCheckHeaderState",{cmdName:d,cmdState:!1}):a.hide()}}(u,g)):t.debug("RequirementViewUI","Command name is not defined to create action UI.")},destroy:function(){o.emptyNodeModel(),e.is(a)&&(a.destroy(),a=void 0)},toggle:function(t){var n;c=t.state,c&&!a.visibleFlag?(a.immersiveFrame=u,n=u.getDockingElement(a.currentDockArea),e.is(n)&&(n.collapseDockingZoneFlag=!1),a.show()):a.hide()},updateTitle:function(t){e.is(t)&&""!==t?a.title=l+" - "+t:a.title=l}}}})),define("DS/DELPPWRequirementViewModule/RequirementViewModule",["UWA/Core","DS/DELPPWRequirementViewModule/RequirementViewUI"],(function(e,t){"use strict";return{behaviors:["TreeListViewBehavior","ProductImplementBehavior","WUXNodeModelBehavior","UXFactoryBehavior","LinkBehavior","ModelBehavior","SelectionBehavior","SearchBehavior","ResourceBehavior","ViewBehavior"],creator:function(n,o,i,r,l,a,d,c,s,u,g){let f,m,h,p,y=[],v=[],A=function(t){return!(!e.is(t)||!e.is(t.get))&&v.indexOf(t.get("type"))>-1},R=function(){let t,i,l=c.getSelections(),s=function(n){let i;e.is(m)&&Array.isArray(n)&&n.length>0&&(r.prepareUpdate(),n.forEach((function(n){if(A(n)&&n.get("from")===t.get("PID")&&(i=d.getReference(n.get("to")),e.is(i)&&!r.isNodeAdded(i.get("PID")))){const e=o.getReferenceNodeOptions(i);e.children=[],p=r.addNodeModel(e);const t=!d.needToQueryForChildren(i);r.updateNodeState(p,t?"collapsed":"partiallyExpanded")}})),r.pushUpdate())};r.emptyNodeModel(),e.is(l,"array")&&1===l[1].length?(i=l[1][0],e.is(i)?(m=i,t=d.getReferenceModel(i),e.is(t)?(f.updateTitle(d.getDisplayName(t)),a.getConnectionsByModel(t,null,{silentMode:!0,onComplete:s,forceDBMode:a.isAuthoringMode()})):n.debug("Reference Model is empty for PID:"+i)):n.debug("No selection in mbom to load action view data.")):(m=null,f.updateTitle(""))};return{listenTo:function(){return{select:this.reloadUI,connectionAdded:this.onAddConnection,refreshImpacted:this.reloadUI,ActionRemove:this.onActionRemove,AddToAuxilliaryView:this.AddToAuxilliaryView,connectionRemoved:this.onRemoveConnection}},onStart:function(e){let i,a=(e=e||{}).moduleIcon;y=e.pprTypes,v=e.linkTypes,h=e.relatedCmdId,a=e.moduleIcon,i=u.getNLSValue(h),f=new t(n,o,r,l,u),f.init(h,i,a),f.toggle({state:!0}),R()},onStop:function(){e.is(f)&&(f.destroy(),f=void 0),m=null},AddToAuxilliaryView:function(e){e.map((e=>e.referencePID)).forEach((function(e){let t=d.getReference(e);n.notify("addToAuxiliaryView",t)}))},reloadUI:function(t){e.is(t)&&R()},onAddConnection:function(t){let n=function(t){let n,o,i,l;A(t)&&(i=t.get("to"),n=c.getSelections(),e.is(n,"array")&&1===n[1].length&&(o=d.getReferenceModel(n[1][0]),e.is(o)&&o.get("PID")!==i&&(l=d.getReferenceModel(i),e.is(l)&&(r.isNodeAdded(l.get("PID"))||r.addNode(l,{loadChildren:!1})))))};e.is(t,"array")?t.forEach((function(e){n(e)})):n(t)},onRemoveConnection:function(t){var n=[],o=Array.isArray(t)?t:[t];r.withTransactionUpdate((function(){o.forEach((function(t){var o,i=t.get("to");A(t)&&(o=d.getReferenceModel(i),e.is(o)&&n.push(o.get("PID")))})),n.length>0&&r.removeNodes(n)}))},onActionRemove:function(){let t,o=c.getSelections();e.is(o,"array")&&o[0].length>0&&e.is(1===o[1].length)&&(t=d.getReferenceModel(o[1]),a.getConnectionsByModel(t,null,{onComplete:function(t){if(e.is(t,"array")&&t.length>0)for(let e=0;e<o[0].length;e++)t.forEach((function(t){t.get("to")===o[0][e]&&a.deleteConnection(t.get("PID"))}))},onFailure:function(){n.debug("Getting connections failed")}}))}}}}}));