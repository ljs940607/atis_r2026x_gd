define("DS/DELWKOPropertiesModule/DELWKOPropertiesModuleCloud",["UWA/Core","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/models/EditPropAttributeModel","DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/constants/ConstantsMapping"],(function(e,t,r,i,o,n,s){"use strict";return{behaviors:["UXFactoryBehavior","SelectionBehavior","ModelBehavior","ResourceBehavior"],creator:function(i,a,c,l,d){var p,E,u,g,P,S,D,f,m,C,T,h;return D=function(t){var o,s,c=i.getElement(),D=a.getComponent("WUXDockAreaEnum"),f=a.getComponent("WUXFrameWindowsManager").getFrameWindow(i.getAppContext());e.is(f)&&(o=f.getImmersiveFrame(),e.is(o)&&((p=a.create("Panel",{position:{at:"top right"},side:D.RightDockArea,currentDockArea:D.RightDockArea,title:d.getNLSValue("Cmd.DisplayProperties.Title"),minWidth:450,width:500,height:300,content:c,resizableFlag:!0,visibleFlag:!1,collapsibleFlag:!0,floatableFlag:!0,verticallyStretchableFlag:!0})).close=function(){i.notify("toggleCmdCheckHeaderState",{cmdName:"DisplayProperties",cmdState:!1})},p.immersiveFrame=o,s=o.getDockingElement(p.currentDockArea),e.is(s)&&(s.collapseDockingZoneFlag=!1),g=(g=l.get3DSpaceUrl()).endsWith("/")?g.substring(0,g.length-1):g,P=l.getTenant(),(S={}).selectedId=h(),S.platformUrl=g,S.platformTenant=P,S.getSecurityContext=function(){return l.getSecurityContext()},S.getSelectedRefId=function(){return h()},"WORKORDER"===l.getPPRType(S.selectedId)||"EXECHEADER"===l.getPPRType(S.selectedId)||"STEP"===l.getPPRType(S.selectedId)?(u=a.create("DELWKOPropertiesPanelUI"),c.setStyles({"background-color":"white",overflow:"auto"})):((E=new r({className:"DisplayPropertiesPanel",typeOfDisplay:n.ALL,selectionType:n.NO_SELECTION,displayType:n.STANDARD,readOnly:!0,extraNotif:!0,editMode:!1})).inject(c),"WORKORDER"===l.getPPRType(S.selectedId)&&E.removeFacets([n.FACET_INSTANCE,n.FACET_EFFECTIVITY,n.FACET_SHARING,n.FACET_DOCUMENTS,n.FACET_RELATIONS,n.FACET_REVISIONS,n.FACET_CHANGE,n.FACET_SPECIFICATIONS]),E.inject(c))))},f=function(){return c.getSelections().reduce((function(e,t){return e.concat(t)}),[])},h=function(){var e=f()[0];return l.getReferenceId(e)},m=function(){return f().map((function(e){return new o({tenant:l.getTenant(),service:"3DSpace",objectId:e})}))},C=function(){for(var o,s=i.getElement();s.firstChild;)s.removeChild(s.firstChild);var d={};if(d.selectedId=h(),"WORKORDER"!=l.getPPRType(d.selectedId)&&"EXECHEADER"!=l.getPPRType(d.selectedId)&&"STEP"!=l.getPPRType(d.selectedId))e.is(E)?(o=m(),E.initDatas(o),E.inject(s)):((E=new r({className:"DisplayPropertiesPanel",typeOfDisplay:n.ALL,selectionType:n.NO_SELECTION,displayType:n.STANDARD,readOnly:!0,extraNotif:!0,editMode:!1})).inject(s),o=m(),E.initDatas(o));else{e.is(u)||(u=a.create("DELWKOPropertiesPanelUI"),s.setStyles({"background-color":"white",overflow:"auto"}));var p=[];c.getSelections().forEach((r=>{r.forEach((r=>{var i=t.getReferenceFromCollection(r);if(!e.is(i)){var o=t.getInstanceFromCollection(r);e.is(o)&&(i=t.getReferenceModelFromInstance(o))}e.is(i)&&p.push(i)}))}));var g={};g.refModels=p,u.initDatas(g),u.getDiv().inject(s)}},T=function(e){C()},function(){var e=n.FACET_PROPERTIES;return(e=s.getMapping()[n.FACET_PROPERTIES]).require="DS/DELWKOPropertiesModule/DELWKOPropWorkOrderFacet",[e]},{listenTo:function(){return{select:T,changeReference:T}},onStart:function(t){D(),C(),e.is(p)&&p.show()},onStop:function(){[],e.is(p)&&(p.hide(),e.is(E)&&(E.destroyComponent(),E=null),p.destroy(),p=null)}}}}})),define("DS/DELWKOPropertiesModule/DELWKOPropWorkOrderFacet",["DS/EditPropWidget/facets/Properties/EditPropController"],(function(e){var t=e.extend({_onCompleteLoadModel:function(e){if(this._parent.apply(this,arguments),this.editPropertiesUI&&(this.editPropertiesUI.elements&&this.editPropertiesUI.elements.formSection&&this.editPropertiesUI.elements.formSection._accordionProperties&&(this.editPropertiesUI.elements.formSection._accordionProperties.asset_resource={name:"asset_resource",nameNLS:"KB9 - TEST",weight:0}),this.editPropertiesUI.addSection({name:"asset_resource",section:"asset_resource",list:[]}),this.editPropertiesUI.elements&&this.editPropertiesUI.elements.formSection&&this.editPropertiesUI.elements.formSection.getOrganizers)){var t=this.editPropertiesUI.elements.formSection.getOrganizers();if(t&&t.asset_resource&&t.asset_resource.elements&&t.asset_resource.elements.container){e&&e.results&&1===e.results.length&&e.results[0].physicalID&&e.results[0].physicalID,t.asset_resource.elements.container.appendText('<div><div><img class="editProp_iconAttribute" src="https://vdevpril2834am.ux.dsone.3ds.com:443/3DSpace/snresources/images/icons/small/I_PPRWorkOrder.png"></div></div>')}}}});return t})),define("DS/DELWKOPropertiesModule/DELWKOPropertiesModule",["UWA/Core","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/models/EditPropAttributeModel","DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/constants/ConstantsMapping"],(function(e,t,r,i,o,n){"use strict";return{behaviors:["UXFactoryBehavior","SelectionBehavior","ModelBehavior","ResourceBehavior"],creator:function(r,s,a,c,l){var d,p,E,u,g,P,S,D,f,m,C;return P=function(i){var n,a,P=r.getElement(),S=s.getComponent("WUXDockAreaEnum"),D=s.getComponent("WUXFrameWindowsManager").getFrameWindow(r.getAppContext());e.is(D)&&(n=D.getImmersiveFrame(),e.is(n)&&((d=s.create("Panel",{position:{at:"top right"},side:S.RightDockArea,currentDockArea:S.RightDockArea,title:l.getNLSValue("Cmd.DisplayProperties.Title"),minWidth:450,height:300,content:P,resizableFlag:!0,visibleFlag:!1,collapsibleFlag:!0,floatableFlag:!0,verticallyStretchableFlag:!0})).close=function(){r.notify("toggleCmdCheckHeaderState",{cmdName:"DisplayProperties",cmdState:!1})},d.immersiveFrame=n,a=n.getDockingElement(d.currentDockArea),e.is(a)&&(a.collapseDockingZoneFlag=!1),p=new t({className:"DisplayPropertiesPanel",typeOfDisplay:o.ALL,selectionType:o.NO_SELECTION,displayType:o.STANDARD,readOnly:!1,extraNotif:!0,editMode:!1}),E=(E=c.get3DSpaceUrl()).endsWith("/")?E.substring(0,E.length-1):E,u=c.getTenant(),(g={}).selectedId=C(),g.platformUrl=E,g.platformTenant=u,g.getSecurityContext=function(){return c.getSecurityContext()},g.getSelectedRefId=function(){return C()},"WORKORDER"===c.getPPRType(g.selectedId)&&p.removeFacets([o.FACET_INSTANCE,o.FACET_EFFECTIVITY,o.FACET_SHARING,o.FACET_DOCUMENTS,o.FACET_RELATIONS,o.FACET_REVISIONS,o.FACET_CHANGE,o.FACET_SPECIFICATIONS]),p.inject(P)))},S=function(){return a.getSelections().reduce((function(e,t){return e.concat(t)}),[])},C=function(){var e=S()[0];return c.getReferenceId(e)},D=function(){return S().map((function(e){return new i({tenant:c.getTenant(),service:"3DSpace",objectId:e})}))},f=function(){var t;e.is(p)&&(t=D(),p.initDatas(t))},m=function(e){f()},function(){var e=o.FACET_PROPERTIES;return(e=n.getMapping()[o.FACET_PROPERTIES]).require="DS/DELWKOPropertiesModule/DELWKOPropWorkOrderFacet",[e]},{listenTo:function(){return{select:m}},onStart:function(t){P(),f(),e.is(d)&&d.show()},onStop:function(){[],e.is(d)&&(d.hide(),e.is(p)&&(p.destroyComponent(),p=null),d.destroy(),d=null)}}}}})),define("DS/DELWKOPropertiesModule/DELWKOPropMainController",["DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/constants/ConstantsMapping","DS/EditPropWidget/controllers/EditPropMainController","DS/EditPropWidget/UI/EditPropSkeleton"],(function(e,t,r,i){return r.extend({_setup:function(r){var o=this,n=t.getMapping(r),s=t.getDefaultFacets();r.facets&&(s=r.facets,delete r.facets);var a=[],c=!1;s.forEach((function(t){var r=o._getFacet(n,t);r&&(!c&&r.facet&&r.facet.name===e.FACET_PROPERTIES&&(c=!0,r.alwaysVisible=!0),a.push(r))})),c||(n[e.FACET_PROPERTIES].visible=!1,a.push(n[e.FACET_PROPERTIES])),this.skeleton=new i(a,r)}})})),define("DS/DELWKOPropertiesModule/DELWKOPropEditWidget",["DS/DELWKOPropertiesModule/DELWKOPropMainController","DS/EditPropWidget/EditPropWidget"],(function(e,t){return t.extend({_getController:function(t){return this.controller?this.controller:new e(t)}})}));