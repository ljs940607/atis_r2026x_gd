define("DS/FolderActive/commands/FolderCommands",["i18n!DS/FolderActive/assets/nls/FolderActive","i18n!DS/IPClassifyActive/assets/nls/IPClassifyActive","DS/IPClassifyUtil/IPClassifyAlert","DS/WidgetServices/WidgetServices","DS/WebappsUtils/WebappsUtils","DS/FolderEditor/Folder_CSO","DS/IPClassifyUtil/IPClassifyModelEvents"],(function(e,t,o,i,r,n,a){"use strict";return{addRemoveFavs:function(){a.publish({event:"add-remove-fav"})},infoPanelDisplay:function(){a.publish({event:"activate-info-panel"})},ExpandAllCmd:function(e,t){e.plmType;var o=[];"TREE"===t&&e&&o.push(e),o.length&&o.forEach((function(e){null===e.options.children||("TREE"===t||"Folder"===e.plmType||"FolderSection_AllFolders"===e.plmType?e.expand({expandLevel:"All"}):e.expandAll())}))},CollapseAllCmd:function(e,t){e.plmType;var o=[];"TREE"===t&&e&&o.push(e),o.length&&o.forEach((function(e){e.collapseAll(),e.removeChildren()}))},contextualCmdNotif:function(){o.displayNotification({subtitle:t.IPClassify_msg_selection_Incorrect,message:t.IPClassify_msg_selection_Incorrect_Advice,className:"warning"})},_addCtxCmd:function(e,t,o,r){var n=!1;("separator"===o.type||!1!==o.spaceAvailability)&&(n=!0),n&&(i.isWebInWinEnvironment()&&!1===o.webInWinAvailability&&(n=!1),i.isWebInWinEnvironment()||!1!==o.dashboardAvailability||(n=!1)),n&&(r&&("separator"!==r.type||t.length>0)&&t.push(r),t.push(o))},GetContextualMenuForActiveBookmark:function(o,i,r,a){var l,s=this,c=[],d=!!o.white_Click&&o.white_Click;if(void 0===(l=!0===d?l=n.getSelectedBookmark():o.nodeModel)&&(l=o),l.isFavorite)return c;const u={label:t.IPClassifyActive_btn_favorite,icon:"favorite-on",callback:function(){s.addRemoveFavs()},searchAvailability:!0},p={label:t.IPClassifyActive_hover_info,icon:"info",callback:function(){s.infoPanelDisplay()},searchAvailability:!0};var f={id:"cmd-expandAll",label:e.CMDExpandAll,icon:"flow-tree-expand-down",callback:function(){r?s.contextualCmdNotif():s.ExpandAllCmd(l,i)},searchAvailability:!0},v={id:"cmd-collapseAll",label:e.CMDCollapseAll,icon:"flow-tree-expand-up",callback:function(){r?s.contextualCmdNotif():s.CollapseAllCmd(l,i)},searchAvailability:!0},g={type:"separator"};return a?(r||this._addCtxCmd(i,c,u),this._addCtxCmd(i,c,f,g),this._addCtxCmd(i,c,v),this._addCtxCmd(i,c,p,g)):(this._addCtxCmd(i,c,f),this._addCtxCmd(i,c,v)),c}}})),define("DS/FolderActive/service/FolderActiveWebServices",["DS/IPClassifyUtil/IPClassifyUtility","DS/IPClassifyUXUtil/service/IPClassifyUXUtilWebService","DS/IPClassifyActive/service/IPClassifyActiveWebService","text!DS/FolderActive/assets/FolderActive_setting.json","DS/IPClassifyUtil/IPSettingsMgr","DS/IPClassifyUtil/IPServicesMgr","DS/WidgetServices/WidgetServices","DS/IPClassifyUXUtil/CredentialsView"],(function(e,t,o,i,r,n,a,l){"use strict";var s=Object.assign({},o);return s.getSearchQuery=()=>'type: "Workspace"',s.getType_filter_bo=()=>["Workspace","Workspace Vault"],s.navigatePathRelArray=()=>["Data Vaults","Sub Vaults"],s.getRel_filter_bo=()=>["Data Vaults","Sub Vaults"],s.generateSearchQuery=function(e,t){let o="*"===e.charAt(0)?"":"*",i="*"===e.charAt(e.length-1)?"":"*";return'(type: "Workspace" OR type: "Workspace Vault") AND (label: '+o+e+i+")"+(t?' AND NOT physicalid: "'+t+'"':"")},s.getLabel=function(t){return"ActiveBookmark-"+e.getUserId()+"-"+(new Date).getTime()},s.getSpecific_source_parameter=function(e,t){return{"3dspace":{search_in_context:{expand:{root_physicalid:e,expand_iter:t?"-1":"1",type_filter_bo:["Workspace Vault","Workspace"]}}}}},s.generateLabelQuery=e=>'(type: "Workspace" OR type: "Workspace Vault" OR type: "Personal Workspace") AND (physicalid:'+e+")",s.getSetting=function(){return JSON.parse(i)},s.getFolderProperties=function(e){var t=e;this.get3DSpaceUrl().then((e=>{var o=e+"/resources/v1/FolderManagement/Folder/"+t.pid+"/properties";t.method="GET",this._executeRequest(o,t,"getFolderProperties")}))},s.roots=function(e){var t=e;if(!UWA.is(t,"object"))throw new Error("Invalid inputs for FolderActiveWebService.roots");var o=this;o.get3DSpaceUrl().then((function(e){var i=e+"/resources/v1/FolderManagement/Folder/roots";return t.query={Type:t.type,CollabSpace:t.collabSpace},t.method="GET",o._executeRequest(i,t,"roots")}))},s.setUserPreferences=function(e){return t.saveUserPreferences({...e,repository:"ENOFOL3_AP"})},s.fetchObjectsForFindInTree=function(t){var o=[];if(o.push(new Promise((function(e,t){a.get3DSearchUrlAsync({onComplete:function(t){e(t)},onFailure:function(e){t(e)}})}))),this.getSecurityContext()||o.push(this.initSecurityContext()),!UWA.is(t,"object"))throw new Error("Invalid inputs for FolderActiveWebService.fetchObjectsForFindInTree");var i=this,s={};UWA.extend(s,t),Promise.allSettled(o).then((function(o){var a=o[0].value+"/search",c=widget.lang?widget.lang:widget.getValue("lang");if(s.payload={},s.payload.locale=c,t.searchFTSquery&&(s.payload.query="[ds6w:label]: *"+t.searchFTSquery+"*"),t.rscIdToSearch&&(s.payload.query="physicalid:"+t.rscIdToSearch),s.payload.select_bo=["physicalid","ds6w:type","ds6w:globalType","ds6w:label"],"FolderSection_AllFolders"===t.type)s.payload.specific_source_parameter={"3dspace":{search_in_context:{expand:{root_path_physicalid:t.pid,type_filter_rel:["Data Vaults","Sub Vaults"]}}}};else{let e=Array.isArray(t.pid)?t.pid[0]:t.pid;s.payload.specific_source_parameter={"3dspace":{search_in_context:{expand:{root_physicalid:e,type_filter_rel:["Data Vaults","Sub Vaults"]}}}}}s.payload.nresults=100,s.payload.source=["3dspace"],s.payload.login={"3dspace":{SecurityContext:i._securityContext}};var d=new Date,u=e.getUserId();return s.payload.label=("FolderActiveFetchObjectsForFindInTree_"+u+"_"+d.getTime()).replace(new RegExp(" ","g"),"_").replace(new RegExp(",","g"),"").replace(new RegExp("/","g"),"-"),s.timeout=12e4,s.method="POST",s.payload.tenant=n.getPlatformId()||r.getSetting("x3dPlatformId"),s.headers={Accept:"application/json","content-type":"application/json","Accept-Language":c,SecurityContext:l.getCredential()},s.type="json",s.data=UWA.Json.encode(s.payload),i._executeRequest(a,s,"_fetchObjectsForFindInTree")}))},s.create=function(e){var t=this,o=e;this.get3DSpaceUrl().then((e=>{var i=e;t.createCSRFTokens({onComplete:function(i){var r=JSON.parse(i).csrf.value,n=e+"/resources/v1/modeler/dsbks/dsbks:Bookmark?$mask=dsbks:BksMask.Details";o.data={},o.headers={Accept:"application/json","content-type":"application/json","Accept-Language":"en-US",SecurityContext:o.ctx,ENO_CSRF_TOKEN:r};var a={items:[{attributes:{title:o.title,description:o.title}}]};"FolderSection_AllFolders"!==o.nodeId&&(a.parentId=o.nodeId),o.data=JSON.stringify(a),o.method="POST",t._executeRequest(n,o,"FolderActive-createCSRFToken")},onFailure:function(e){}},i)}))},s.createCSRFTokens=function(e,t){var o=e,i=t+"/resources/v1/application/CSRF";o.method="GET",this._executeRequest(i,o,"FolderActive-createCSRFToken")},s.folderTree=function(e){var t=this,o=e;let i=this.initSecurityContext();Promise.all([this.get3DSpaceUrl(),i]).then((function([i,r]){var n,a=i+"/resources/v1/FolderManagement/Folder/"+(o.pid||"root")+"/folderTree";o.headers={"content-type":"application/json"},o.data={expandList:(n=o.expandList,UWA.is(n,"array")?n.toString():n),level:o.level&&o.level+"",isRoot:o.isRoot?"true":"",isPersonalFolder:o.isPersonalFolder},o.partialExpandList&&o.partialExpandList.length>0&&(o.data.partialExpandList=o.partialExpandList),o.query={section:e.section?e.section:"FolderSection_AllFolders"},o.data.Read=!1,o.data=UWA.Json.encode(o.data),o.method="POST",o.timeout=12e4,t._executeRequest(a,o,"folderTree")}))},s.getRefineFilterForBks=function(e){return{"ds6w:what/ds6w:status":[{object:"Workspace.Archive",type:"string",field:"internal",excluded:"true"}]}},s.checkConnectAccess=async function(e){var o,i=e;var r=await this.get3DSpaceUrl()+"/resources/v1/FolderManagement/Folder/checkConnectAccess";return o=i.IDs,i.method="POST",i.type="json",i.headers={Accept:"application/json","content-type":"application/json","Accept-Language":widget.lang},i.securityContext&&(i.headers.SecurityContext=i.securityContext),"function"==typeof this.getSecurityContext&&(i.headers.SecurityContext=this.getSecurityContext()),i.query={},i.payload={IDs:o},i.data=UWA.Json.encode(i.payload),i.timeout=12e4,t._executeQuery(r,i,"checkConnectAccess")},s})),define("DS/FolderActive/utils/PreferencesUtils",["DS/IPClassifyUtil/PlatformAPIWrapper","DS/IPClassifyUXUtil/service/IPClassifyUXUtilWebService","DS/IPClassifyActive/utils/IPClassifyActiveUtil","DS/FolderActive/service/FolderActiveWebServices"],(function(e,t,o,i){var r=null;function n(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}function a(e){var t=function(e,t){var i=widget.getValue(e);i&&(i=n(i=o.jsonUnzip(i)));return i||t}(e);return t&&t.id?t:null}function l(e,t){var o=JSON.stringify(t);widget.setValue(e,o)}return e.subscribe("FolderEditor.Bookmark",(function(e){e.origin===widget.id&&(r=e.current)})),e.publish("FolderEditor.RequestCurrentFolder"),{getWidgetPreference:function(){return a("activeBookmark_"+widget.id)},getPausePreference:function(){return a("activeBookmark_pause_"+widget.id)},getCurrentWidgetBookmark:function(){return new Promise((e=>{setTimeout((()=>{e(r)}))}))},setWidgetPreference:function(e){l("activeBookmark_"+widget.id,e)},setPausePreference:function(e){l("activeBookmark_pause_"+widget.id,e)},parseJsonExt:n,getUserPreferences:function(){return t.getUserPreferences({repository:"ENOFOL3_AP",name:"ActiveFolder_FolderID"})}}})),define("DS/FolderActive/BookmarkInput",["DS/IPClassifyActive/InputFieldAbstract","DS/FolderActive/utils/PreferencesUtils","DS/FolderActive/service/FolderActiveWebServices","i18n!DS/FolderActive/assets/nls/FolderActive"],(function(e,t,o,i){function r(){return new Promise((function(e,o){var i=t.getCurrentWidgetBookmark(),r=t.getWidgetPreference();i.then((i=>{i&&i.FolderID&&(r={id:i.FolderID,label:i.FolderLabel}),r?e(r):t.getUserPreferences().then((t=>{e(t.startsWith("!")?null:{id:t})})).catch(o)}))}))}return e.extend({init:function(e){(e=e||{}).panelRequire="DS/FolderActive/FolderActive",this._parent(e),e.value?this._firstPromise=Promise.resolve(e.value):this._firstPromise=r(),this._firstPromise.then((e=>{if(e&&e.id){var i=e.id;this._setValue([{id:i,label:e.label?e.label:"..."}]),e.label||o.getFolderProperties({pid:i,onComplete:e=>{var o=t.parseJsonExt(e),r="unknown";o&&(r=o.label),this._setValue([{id:i,label:r}])},onFailure:()=>{this._setValue([]),console.log("can't retrieve the current bookmark")}})}})),this._firstPromise.catch((e=>{console.log("Issue retrieving bookmark preferences"),console.log(e)}))},getOriginalValue:function(){return this._firstPromise},getActiveBookmark:r,getLabel:function(){return i.InputLabel}})})),define("DS/FolderActive/FolderActive",["DS/IPClassifyActive/IPClassifyActive","DS/FolderActive/service/FolderActiveWebServices","DS/IPClassifyUXUtil/service/IPClassifyUXUtilWebService","i18n!DS/FolderActive/assets/nls/FolderActive","DS/WebappsUtils/WebappsUtils","DS/FolderActive/commands/FolderCommands","DS/FolderActive/utils/PersonalFolderManager","DS/WidgetServices/WidgetServices","text!DS/FolderActive/assets/FolderActive_setting.json"],(function(e,t,o,i,r,n,a,l,s){"use strict";r.getWebappsAssetUrl("FolderEditor","icons/I_Bookmark_v2.png");var c={iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-bkmrk-folder-flash "},d=r.getWebappsAssetUrl("FolderEditor","icons/folder_perso.png"),u={iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-bkmrk-folder "};let p=["Workspace","Workspace Vault"],f=["Folder","Personal Workspace","Bookmark","Bookmark Root"];function v(e){return p.includes(e)||f.includes(e)}return e.extend({name:"FolderActive",_rootNodeFavorite:null,_rootNodeFolders:null,_rootNodeTrash:null,_requestInfo:{},_searchKeys:{},_pathInfo:{},_subBookmarkExpand:{},_personalSectionNode:null,_favoriteSection:"FolderSection_favorite",_allSection:"FolderSection_AllFolders",_findInTreeNLS:i,init:function(e){if(e.dataProvider={},e.dataProvider.widgetEventsProvider={set:"FolderActive.onSet",cancel:"FolderActive.onCancel",selection:"FolderEditor.Public.Bookmark",classify:"FolderActive.SelectIds",selectionChange:"FolderActive.selectionChange"},e.useSortByUnicode=!0,e.multiSelectionComponent&&!e.multiSelectionComponent.NLS&&(e.multiSelectionComponent.NLS=i.multiSelectionComponent,e.multiSelectionComponent.componentTitle&&(e.multiSelectionComponent.NLS.widget_name=e.multiSelectionComponent.componentTitle),e.multiSelectionComponent.OKButtonLabel&&(e.multiSelectionComponent.NLS.button_OK=e.multiSelectionComponent.OKButtonLabel)),e.dataProvider.widgetDataProvider={isValidType:function(e){return v(e)},getObjectForPublication:function(e){return e&&v(e.getType())?{FolderID:e.getID(),FolderLabel:e.getLabel()}:null},getBadge:function(e){var t=null;"TRUE"===e.publishOnConnect&&(t={bottomRight:r.getWebappsAssetUrl("FolderEditor","icons/folderPublishBadge.png")});widget.getValue("CandABookmark")&&"SHARED"===e.folderClassification&&(t={topRight:r.getWebappsAssetUrl("FolderEditor","icons/approvals.png")});return t},onFavoriteSectionRefresh:function(){a.resetToPreInitializedState()},getWidgetName:function(){return e.widgetName?e.widgetName:i.bookmark_defaultTitle},getWidgetIcon:function(){return"bkmrk-folder"},getSettings:function(){return JSON.parse(s)}},this._parent(e),l.isReplayedODT()&&!1!==window.isPopOverRequired){var t=this.nestedMenuInContext.popover.getContent().id;window[t]=this}},_getWebServiceRef:function(){return t},onSetActive:function(e){e&&"function"==typeof e&&(this.onSetActive=e)},_getPlmType:function(e){return-1===[...p,...f].indexOf(e)&&e?"Content":"Folder"},_getRootIcon:function(){return r.getWebappsAssetUrl("FolderEditor","icons/22/foldersectionall.png")},_getFavoritesIcon:function(){return r.getWebappsAssetUrl("IPClassifyUXUtil","icons/22/I_CommonIcon_Favorite_22.png")},_getRootName:function(){return i.name_Section_AllFolders},_getFavoritesName:function(){return i.name_Section_FavoriteFolders},_getActiveIcon:function(e){return e?"wux-ui-3ds wux-ui-3ds-wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-bkmrk-folder":"bkmrk-folder"},_getFocusBtnTooltip:function(){return i.activeBookmark_btn_focus},_showMessageWhileEmpty:function(e){return e?i.activeBookmark_msg_empty:i.activeBookmark_msg_noBookmark},_getIcon:function(e,t){var o="subFolders"!==t&&!1,i=u;return e&&e.type&&"Personal Workspace"===e.type?o||!i?d:i:"favorites"===t?e.inherit?c:i:e&&e.type&&["Workspace","Workspace Vault"].indexOf(e.type)<0&&e.icon?e.icon:o||e.iconType&&"SHARED"===e.iconType.toUpperCase()?c:i},_getRootVisbility:function(e){return e[0].outputs&&e[0].outputs.GET_PARENT?"Workspace"===e[0].outputs.GET_PARENT[0]["ds6w:type"]:"Workspace"===e[0].input_object["ds6w:type"]},couldBeExpand:function(e){return"Folder"===e.plmType||"RootFolder"===e.plmType},couldBeValid:function(e,t,o,r,n){var a=!1,l=t.getSelectedNodes().length;if(!(l>0))throw i.noSelectionError;{if(0==o&&l>1)throw i.multiSelectionNotSupported;let e=t.getSelectedNodes();for(let t=0;t<l;t++){let o=e[t];if(0===r){if(o.getID()===this._favoriteSection)throw i.favoriteSectionNotSupported;if(o.isFavorite)throw i.favoriteNotSupported}}if(!(a=(a=void 0!==r||0===e.filter((e=>["Workspace","Workspace Vault","Personal Workspace","Folder"].indexOf(e.getType())<0)).length)&&("favoriteCmd"!==n||0===e.filter((e=>["Personal Workspace"].indexOf(e.getType())>=0)).length)))throw i.sectionNotSupported}return a},getFavoriteKey:function(){return"FolderEditorFavoriteFolderList"},getCreationCommandName:function(){return"NewFolder"},executeServiceToCreate:function(e,o,i){t.create({nodeId:e.nodeId,ctx:e.ctx,title:e.title,onComplete:function(t){let i=e.nodeId&&"FolderSection_AllFolders"!==e.nodeId?"Workspace Vault":"Workspace";var r=JSON.parse(t).member[0];r.type=i,o(r)},onFailure:function(e){i(e)}})},initializeSelector:async function(){let e=await o.fetchSubTypes({payload:{types:p}}),t=[...p];p.forEach((o=>{(e[o]?e[o]:[]).forEach((e=>t.push(e)))})),p=t},getPersonalBookmark:function(){return new Promise((function(e){t.folderTree({pid:"",isPersonalFolder:!0,isRoot:!0,section:"Personal",onComplete:function(t){var o=null;if((t=JSON.parse(t)).folders&&t.folders.length>0){var i=t.folders[0];this._personalSectionNode=o={useAsyncPreExpand:!0},o.label=i.label,o.icons=[i.icon],o.children=[],o.id=i.id,o.type=i.type,o.isPersonal=!0,o.plmType=i.type}e(o)},onFailure:function(){console.log("Error getting Personal Bookmark"),e(null)}})}))},getAppSpecificFavJson:function(){return{protocol:"3DXContent",version:"1.0",source:"ENOFOL3_AP",data:{favorite_folders:[]}}},_getContextualMenu:function(e,t){let o,i=!1;if(this.nestedMenuInContext&&this.nestedMenuInContext.nestedMenu&&this.nestedMenuInContext.nestedMenu._treeView){let e=this.nestedMenuInContext.nestedMenu._treeView,t=e.getTreeDocument()?e.getTreeDocument().getSelectedNodes():[];o="multiple"==e.rowSelection&&t.length>1,i=this.nestedMenuInContext.dialogButtons&&this.nestedMenuInContext.favoriteButton}return n.GetContextualMenuForActiveBookmark(e,t,o,i)}})})),define("DS/FolderActive/commands/ActionBar_ActiveBookmarkCmd",["DS/ApplicationFrame/CommandCheckHeader","i18n!DS/FolderActive/assets/nls/FolderActive","DS/IPClassifyActive/utils/IPClassifyActiveCommunication","DS/IPClassifyActive/utils/IPClassifyActiveUtil","DS/FolderActive/FolderActive","DS/FolderActive/utils/PreferencesUtils","DS/FolderActive/service/FolderActiveWebServices"],(function(e,t,o,i,r,n,a){"use strict";return e.extend({labelTopBar:t.activeBookmark_cmd,isInsert:!0,datas:{},_activeBookmarkId:"",_activeBookmark:{},init:function(e){var i=this;this._parent(e,{mode:"exclusive",isAsynchronous:!1});var l=n.getWidgetPreference(),s=n.getPausePreference();if(l&&l.id){this._activeBookmarkId=l.id;let e=new Promise((e=>{a.folderTree({pid:"",isPersonalFolder:!0,isRoot:!0,onComplete:function(t){let o=null;(t=JSON.parse(t)).folders&&t.folders.length>0&&(o=t.folders[0].label);e(o)},onFailure:e})}));new Promise((function(t,o){a.searchInActiveBookmark({bookmarkID:l.id,onComplete:function(i){var r=i.results||[],n={"ds6w:label":"label"};if(r.length>0){for(var a=0;a<r.length;a++)for(var s=r[a].attributes,c=0;c<s.length;c++){if(n[s[c].name]){l.label=s[c].value;break}}t()}0===r.length&&e.then((e=>{l.label=e,e?t():o("No Bookmark found with specific ID, the bookmark is deleted or is not available")}))},onFailure:function(e,t,i){console.log(e),o(e)}})})).then((function(){i.dispatchEvent(l.id,l.label),i.setState(!0,!1),c()})).catch((function(e){console.log(e),l=void 0,i.setState(!1,!1),c()}))}else c();function c(){i.onStateChange((function(){i.popover?!1!==this._userClick&&i.popover.togglePopover():(i.popover=new r({container:widget.body,widgetName:t.activeBookmark_cmd}),l&&l.id?i.popover.nestedMenuInContext.setActiveNode(l.id,l.label):s&&s.id&&i.popover.nestedMenuInContext.setActiveNode_pause(s.id,s.label),i.popover.showPopover(),i._checkAndUpdateState(),i.popover.addEvent("updateActiveInfo",(function(e){var t={id:e.getID?e.getID():"",label:e.getLabel?e.getLabel():""};i.updateActiveBookmark(t)})),i.popover.addEvent("onSetActive",(function(e){i._activeBookmarkId=e.getID?e.getID():"",i.setState(e,!1);var t=e.getID?e.getID():"",o=e.getLabel?e.getLabel():"";i.dispatchEvent(t,o);var r={id:t,label:o};n.setWidgetPreference(r),n.setPausePreference(e.isPause?e.isPause:{id:"",label:""})}))),i._checkAndUpdateState(),i._userClick=null}))}o.subscribe("FolderEditor.ActiveFolderCallBack",(function(e){null!==e||i.dispatchEvent(i._activeBookmark.id,i._activeBookmark.label)}))},updateActiveBookmark:function(e){var t=e.id,o=n.getWidgetPreference();o&&o.id===t&&n.setWidgetPreference(e)},dispatchEvent:function(e,t){this._activeBookmark={origin:widget.id,id:e,label:t,sc:widget.getPreference("pad_security_ctx")&&widget.getPreference("pad_security_ctx").value},o.publish("FolderEditor.ActiveFolder",this._activeBookmark)},_checkAndUpdateState:function(){var e=this;this._activeBookmarkId&&!0!==this.getState()?setTimeout((function(){e._userClick=!1,e.setState(!0,!1)}),0):this._activeBookmarkId||!1===this.getState()||setTimeout((function(){e._userClick=!1,e.setState(!1,!1)}),0)}})})),define("DS/FolderActive/utils/PersonalFolderManager",["DS/FolderActive/FolderActive","DS/WebappsUtils/WebappsUtils"],(function(e,t){"use strict";var o=void 0,i=o,r=!1;function n(e){void 0!==e&&(i=e)}return{getPersonalFolder:function(){return i},isInitialized:function(){return!0===r},resetToPreInitializedState:function(){i=o,r=!1},getPersonalRootFolderInFavoriteFormat:function(){return(e=i)?{id:e.id,name:e.name,type:e.type,isPersonal:e.isPersonal}:void 0;var e},setupPersonalFolder:function(){return new UWA.Class.Promise((function(o,i){!0===r?i():e.FolderActiveWebService.roots({type:"Personal",collabSpace:"All"}).then((e=>{var i=(e=JSON.parse(e)).folders;n(null);for(var a=i?i.length:0,l=0;l<a;l++){var s=i[l];if("Personal Workspace"===s.type){var c={useAsyncPreExpand:!0},d=t.getWebappsAssetUrl("FolderEditor","icons/folder_perso.png");c.label=s.label,c.icons=[d],c.children=[],c.id=s.id,c.plmType="RootFolder",c.type=s.type,c.name=c.label,c.isPersonal=!0,n(c),r=!0;break}}o()})).catch((e=>{n(null),r=!0,i(e)}))}))}}}));