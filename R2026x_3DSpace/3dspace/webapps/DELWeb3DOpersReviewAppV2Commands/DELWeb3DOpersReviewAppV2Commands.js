define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERHomeCmd",["DS/Logger/Logger"],(function(e){"use strict";const t=e.getLogger("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERHomeCmd");function n(e){this.ec=e.executionContext}return n.prototype.beginExecute=function(){if(this.ec){let e=this.ec.getComponent(WAfrStandardComponentKey.HandlerComponent),n=this.ec.getComponent("mod_WelcomeScreen");this.ec.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"onHome",data:{origin:"HomeCmd"}}),n&&n.showWelcomeScreen(),e.hasHandler("DELWebOERClean")?e.executeHandler({id:"DELWebOERClean"}):t.log("DELWebOERClean Handler not found, please include DELWebOERSessionModelActions package in your app id card")}this.endExecute()},n.prototype.endExecute=function(){this.destroy(),this.done()},n.prototype.destroy=function(){delete this.ec},n})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERPreferencesCmd",["DS/Logger/Logger","DS/DELWebOERCommonUtils/utils/CommonUtils"],(function(e,t){"use strict";const n=e.getLogger("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERPreferencesCmd");function o(e){this.ec=e.executionContext,this._panelHasBeenRequested=!1}return o.prototype.beginExecute=function(){if(!this._panelHasBeenRequested){this._panelHasBeenRequested=!0;let e=this.ec.getComponent("DELCommonUtilsServices").getAppId();t.getMePreferencesDialog(`3DSApp.${e}`).then((()=>{this._panelHasBeenRequested=!1,this.endExecute()})).catch((e=>{n.error(e),this._panelHasBeenRequested=!1,this.endExecute()}))}},o.prototype.endExecute=function(){this.destroy(),this.done()},o.prototype.destroy=function(){delete this.ec},o})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERRelationalNavigatorCmd",["DS/PADUtils/PADUtilsServices","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/DELWebOERCommonUtils/utils/XSOManager"],(function(e,t,n){"use strict";let o=function(e){return!(!e||!UWA.is(e.isOOCPLMNode))&&e.isOOCPLMNode()},i=function(e){return e.getUserData&&e.getUserData()?e.getUserData().type:null};function r(e){this.ec=e.executionContext}return r.prototype.beginExecute=function(){var r=n&&n.getCSO?n.getCSO().get():[],s=[];t.trackChanges({executionContext:this.ec,category:"ActionBarCommand",action:"ShowRelations",label:"DELWebOERRelationalNavigatorCmd"}),r.forEach((function(e){var t;t=e.pathElement?function(e){for(var t,n=e.getLastElement(!0);n&&!o(n);)n=n.parents[0];return n&&(t={options:{type:i(n),grid:{"ds6w:type":""}},getID:function(){return n.getModelIdentification()},getLabel:function(){}}),t}(e.pathElement):function(e){return{options:{type:e.getReferenceType(),grid:{"ds6w:type":""}},getID:function(){return e.getReferenceId()},getLabel:function(){}}}(e),s.push(t)})),s.length&&(e.setObject_on_compass({nodes_2_open:s}),e.open_app({appId:"ENORIPE_AP"},(function(){}))),this.endExecute()},r.prototype.endExecute=function(){this.destroy(),this.done()},r.prototype.destroy=function(){delete this.ec},r})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERGenerateIssueCmd",["DS/DELWebOERCommonUtils/utils/XSOManager","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin"],(function(e,t,n){"use strict";const o="ds6w:type",i="3DSpace";var r,s,a,c,l,d=[];let p=function(e,t,n){if((t=e.length)>1)for(;n=--t;)for(;n--;)e[t]===e[n]&&e.splice(n,1);return e},u=function e(t,n){return n||(n=[]),1===t.parents.length&&"RootBag"===t.parents[0].name?(n.push(t),p(n)):(t.parents.forEach((function(t){e(t,n)})),p(n))};function m(e){this.ec=e.executionContext}return l=function(e,t){var n=t.getComponent("DELCommonUtilsServices"),o=t.getComponent("Widget"),i=o&&o.getSessionWidget?o.getSessionWidget():null;s?(a.getSecurityContext=function(){return n.getCurrentSecurityContext().replace("ctx::","")},a.getTenant=function(){return n.getPlatformId()},e()):require(["DS/IssueManagementWebInWin/ENOIssueGenerationWebPanel","DS/IssueServices/Contexts","DS/IssueServices/services/PlatformServices","DS/IssueServices/services/IssueServices"],(function(t,o,c,l){r=t,a=c,l,(s=o).add("widget",i),a.getSecurityContext=function(){return n.getCurrentSecurityContext().replace("ctx::","")},a.getTenant=function(){return n.getPlatformId()},a.initPlatformServices().then((function(){e()}))}))},m.prototype.beginExecute=async function(){let s=this,a={reportedAgainst:[],contexts:[],attachments:[]},p=e&&e.getCSO?e.getCSO().get():[],m=this.ec.getComponent("DELCommonUtilsServices"),g=this.ec.getComponent("SessionModel").get("roots"),E=g.some((e=>n.isProcess(e.pprType))),f=function(e,t){e=e||{},s._buildup={},!0===e.state&&t&&UWA.is(t.data.path,"array")&&t.data.path.length>0&&(s._buildup={state:!0,refId:t.data.path[t.data.path.length-1]})},C=function(){s._buildup&&(s._buildup={})},h=function(e){let t;if(e.pathElement){let n=u(e.pathElement.getLastElement());n.length>0&&(t=n[0].getModelIdentification())}else t=e.getRoot().getReferenceId();return t},D=function(){UWA.is(p,"array")&&p.length>0&&p.forEach((e=>{e.pathElement?a.reportedAgainst.push(function(e){var t,n,o=null;if(e){for(t=e;t&&!((n=t.getLastElement(!0))&&UWA.is(n.isOOCPLMNode)&&n.isOOCPLMNode());)t=t.getParentPath();o=t.getLastElement(!0).getModelIdentification()}return o}(e.pathElement)):(e.getReferenceType&&m.isWKIType(e.getReferenceType())&&e.getParent()&&a.contexts.push(e.getParent().getReferenceId()),a.reportedAgainst.push(e.getReferenceId()))}))};var S;S=s.ec.getComponent(WAfrStandardComponentKey.ModelEvents),[{eventName:{event:"activateBuildup"},callback:f.bind(null,{state:!0}),handler:S},{eventName:{event:"deactivateBuildup"},callback:f.bind(null,{state:!1}),handler:S},{eventName:{event:"loadData"},callback:C,handler:S}].forEach((function(e){d.push(e.handler.subscribe(e.eventName,e.callback))})),t.trackChanges({executionContext:this.ec,category:"ActionBarCommand",action:"GenerateIssue",label:"DELWebOERGenerateIssueCmd"}),g&&(E&&this._buildup&&!0===this._buildup.state&&this._buildup.refId?a.reportedAgainst.push(this._buildup.refId):D(),(()=>{let e,t;E?e=g:(t=[...new Set(p.map((e=>h(e))))],e=g.filter((e=>-1!==t.indexOf(e.id)))),e&&e.forEach((function(e){a.contexts.push(e.id);let t=UWA.is(e.scopedMfg,"array")?e.scopedMfg.map((e=>e.id)):e.scopedMfg&&e.scopedMfg.id?[e.scopedMfg.id]:[],n=UWA.is(e.resource,"array")?e.resource.map((e=>e.id)):e.resource&&e.resource.id?[e.resource.id]:[];t.length>0&&(a.contexts=a.contexts.concat(t)),n.length>0&&(a.contexts=a.contexts.concat(n))}))})());let b=await async function(e){let t=[...new Set([...e.reportedAgainst,...e.contexts])],n=await m.getAttributeForIds(t,[o]),r=function(e){return{physicalId:e,serviceId:i,objectType:n&&n[e]?n[e][o]:null}};return e.reportedAgainst=e.reportedAgainst.map(r),e.contexts=e.contexts.map(r),e}(a);var L;L=b,l((function(){let e=s.ec.getComponent("Widget"),t=e&&e.getSessionWidget?e.getSessionWidget():null;c=new r({data:L,htmlContainer:t.body,onClose:s.endExecute.bind(s)})}),s.ec)},m.prototype.endExecute=function(){c&&(c.destroy(),c=null);let e=this.ec.getComponent(WAfrStandardComponentKey.ModelEvents);d.forEach((t=>{e.unsubscribe(t)})),this.done(),this.destroy()},m.prototype.destroy=function(){delete this.ec},m})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERViewerFilterCommand",["UWA/Core","DS/ENONextGenFilterCmd/commands/ENONextGenFilterCmd","DS/Logger/Logger","DS/DELWebOERCommonUtils/utils/XSOManager","DS/DELWebOERCommonUtils/utils/NodeUtils","DS/DELWebViewerCommon/DELCommonUtils","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin"],(function(e,t,n,o,i,r,s){"use strict";const a="DELCommonUtilsServices";return t.extend({name:"DELWebOERViewerFilterCommand",logger:n.getLogger("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERViewerFilterCommand"),init:function(e={}){this.ec=e.executionContext},getAppParams:function(){var e=this.ec.getComponent(a);let t=this.ec.getComponent("DELWebViewer"),n=t.getDELViewerNGFUXID?t.getDELViewerNGFUXID():null;return{widgetId:e.getWidgetId(),appId:e.getAppId(),NGFUXId:n,shareFilterSpec:!0}},_isRootProcess:function(e){return s.isProcess(e.pprType)},getRoots:function(){let t=this.ec.getComponent("SessionModel").get("roots"),n=[];return e.is(t,"array")&&t.length>0&&t.forEach((e=>{n.push({id:e.id,filtered:!1})})),n},getSelectorManager:function(){return o.getCSO()},getSelection:function(){var e=o.getCSO().get()||[],t=[];return e.forEach((e=>{t.push(i.getRirPath(e))})),{path:t}},_subscribeEvent:function(){let t=this,n=this.ec.getComponent("DELWebViewer"),o=n.getDELViewerFilterProxy?n.getDELViewerFilterProxy():null,i=n.getDELViewerNGFUXID(),s=function(){o.removeEvent("NGFilter_Close",c),o.removeEvent("ApplyNGFilter",l)},c=function(){s()},l=async function(n){let c=t.ec.getComponent("SessionModel").get("roots")||[],l=n&&e.is(n.filterRootIds,"array")?n.filterRootIds[0]:"",d=t.ec.getComponent(a).getWidgetId(),p=await r.getPublicFilterSpecification({proxy:o,NGFUXId:i,rootId:l,widgetId:d}),u=t.ec.getComponent(WAfrStandardComponentKey.HandlerComponent),m=c.find((e=>e.id===l));if(m.id&&m.pprType){m.filterUpdated=!0;let e={id:l,filter:!0===n.empty?null:o.getFilterSpec(l,{V2:{}}).filter,publicFilterSpec:!0===n.empty?null:p,pprType:m.pprType};await u.executeHandler({id:"DELWebOERRemoveRoots",args:{items:[e]}}),await u.executeHandler({id:"DELWebOERAddRoots",args:{items:[e]}})}s()};o?(o.addEvent("NGFilter_Close",c),o.addEvent("ApplyNGFilter",l)):this.logger.error("DELMIA Viewer Filter proxy is not available")},beginExecute:function(){let t=this.ec.getComponent("SessionModel").get("roots");if(e.is(t,"array")&&t.length>0){let e=t.find((e=>this._isRootProcess(e)));e?(e.withFilter=!0,e.publicFilterSpec=null,this.ec.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"openWithFilter",data:{items:[e],origin:"DELWebOERViewerFilterCommand"}})):(this._subscribeEvent(),this.execute())}this.done()},endExecute:function(){this._parent()}})})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERCleanAllCmd",["DS/Logger/Logger","DS/DELWebOERCommonUtils/utils/TrackUtils"],(function(e,t){"use strict";const n=e.getLogger("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERHomeCmd");function o(e){this.ec=e.executionContext}return o.prototype.beginExecute=function(){let e=this.ec.getComponent(WAfrStandardComponentKey.HandlerComponent);this.ec&&(e.hasHandler("DELWebOERClean")?e.executeHandler({id:"DELWebOERClean"}):n.log("DELWebOERClean Handler not found, please include DELWebOERSessionModelActions package in your app id card"),t.trackChanges({executionContext:this.ec,category:"ActionBarCommand",action:"RemoveAllObjects",label:"DELWebOERCleanAllCmd"})),this.endExecute()},o.prototype.endExecute=function(){this.destroy(),this.done()},o.prototype.destroy=function(){delete this.ec},o})),define("DS/DELWeb3DOpersReviewAppV2Commands/Utils/DELOERPropertiesPanelUtils",["UWA/Core","DS/DELWebOERCommonUtils/utils/XSOManager","DS/DELWebOERCommonUtils/utils/NodeUtils","i18n!DS/DELWeb3DOpersReviewAppV2Commands/assets/nls/DELWeb3DOpersReviewAppV2Commands"],(function(e,t,n,o){"use strict";const i="DELFmiProcessImplementCnx",r="DELFmiProcessOutputPrereqMaterializationCnx",s="VPMReference",a="Requirement",c="GeometricalRequirement_Inst";return{getContext:function(o){let l=o.executionContext.getComponent("DELCommonUtilsServices"),d=o.executionContext.getComponent("Viewer"),p=!!e.is(o.excludeConnection,"boolean")&&o.excludeConnection,u=function(e={}){let t;if(e.pathElement){let o,l,d,u=e.pathElement,m=function(e){return n.getType(e.pathElement.getParentPath().getLastElement())},g=n.getType(e.pathElement.getLastElement());if(p&&((g!==s||m(e)!==i&&m(e)!==r)&&g!==a&&g!==c||(t=n.getID(e.pathElement.getLastElement()))),!t){for(;u&&!n.isPLM(u.getLastElement(!0));)u=u.getParentPath();u&&(o=u.getLastElement(!0),n.isInstance(o)?t=n.getID(o):(l=u.getParentPath(),d=l.getLastElement(!0),t=n.getID(d)))}}else{let n=e.getRirPath();n.length>1?t=n[n.length-2]:1===n.length&&(t=n[0])}return t};return{getSelectedNodes:function(){let o=t.getCSO().get()||[],i=[];if(o&&0===o.length&&d.isSelectiveLoadingActivated()){let t=d.getController().getOOCSelectedReferenceID();t=e.is(t,"array")?t:[t],t.length>0&&t.forEach((e=>i.push({id:e,relationId:e})))}return o.forEach((e=>{i.push({id:n.getID(e.pathElement?e.pathElement.getLastElement():e),relationId:u(e)})})),i.map((e=>({id:e.id,tenant:l.getPlatformId(),source:"3DSpace",getID:function(){return e.id},getRelationID:function(){return e.relationId}})))},getSecurityContext:function(){return{SecurityContext:l.getCurrentSecurityContext(),tenant:l.getPlatformId()}}}},getFacets:function(){return[{require:"DS/DELWebViewerCommonFacets/Controllers/DELWkiInstructionsFacet",facet:{name:"work_instructions",icon:"fonticon fonticon-book-open",text:o.get("Facet.work_instructions.Title")},position:0,alwaysVisible:!1},{require:"DS/DELPPWTimeAnalysisInfoFacet/facets/TimeAnalysisPropertiesFacet",alwaysVisible:!1,services:["3DSpace"],position:1,facet:{name:"TimeAnalysisProperties",icon:"clock-brush wux-ui-3ds",text:o.get("Facet.TimeAnalysisProperties.Title")}},{alwaysVisible:!0,content:null,facet:{icon:"doc-log wux-ui-3ds",name:"specificationdocuments",text:o.get("Facet.specificationdocuments.Title")},inheritance:!0,options:{hideAttachments:!0,readonly:!0,renderDiv:".explorer-root"},require:"DS/DELWebViewerFacets/SpecificationDocsFacet",services:["3DSpace"]},{alwaysVisible:!0,content:null,facet:{icon:"attach",name:"referencedocuments",text:o.get("Facet.referencedocuments.Title")},inheritance:!0,options:{hideSpecifications:!0,readonly:!0,renderDiv:".explorer-root",supportedTypes:{excludedTypes:[],includedTypes:["Document","DOCUMENTS","Drawing"]}},require:"DS/DELWebViewerFacets/AttachmentDocsFacet",services:["3DSpace"]}]}}})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELOERRightSidePanel",["DS/DEL3DViewer/commands/DELViewerRightSidePanel","DS/DELWebOERCommonUtils/utils/XSOManager","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/Selection/CSOManager"],(function(e,t,n,o){"use strict";var i=e.extend({init:function(e){this._csoToken=[],this._parent(e)},getXSO:function(){return t.getCSO()},getID:function(e){return e.pathElement?this._parent(e):e.getReferenceId()},getRelationID:function(e){return e.pathElement?this._parent(e):e.getInstanceId()},getServiceId:function(e){return e.pathElement?this._parent(e):"3DSpace"},destroy:function(){this._parent()}});function r(e){this.ec=e.executionContext,this._modelEventToken=[];let t=this.ec.getComponent(WAfrStandardComponentKey.ModelEvents),o=this;this.cmd=new i({context:"DELWebOER",ID:"DELWebOERRightSidePanel",arguments:[{ID:"PropertiesReadOnly",Value:"true"}],isEnabled:!0}),n.trackChanges({executionContext:this.ec,category:"ActionBarCommand",action:"ShowsInformationPanel",label:"DELWebOERRightSidePanelCmd"}),t&&(this._modelEventToken.push(t.subscribe({event:"openRightSidePanel"},(function(){o.cmd.setState(!0)}))),this._modelEventToken.push(t.subscribe({event:"closeRightSidePanel"},(function(){o.cmd.setState(!1)})))),this.cmd.onStateChange((function(){!1===o.cmd.getState()&&o.ec.getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:"DELWebOERRightSidePanelCmd",state:!1})}))}return r.prototype.destroy=function(){let e=this.ec.getComponent(WAfrStandardComponentKey.ModelEvents);this._modelEventToken.forEach((t=>{e.unsubscribe(t)})),this._modelEventToken=[],this._parent(),delete this.ec,delete this.cmd},r})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERToggleDataGridViewCmd",[],(function(){"use strict";let e=function(e,t){if(e&&UWA.is(t,"boolean")){let n=e.getComponent(WAfrStandardComponentKey.ModelEvents);n&&n.publish({event:"onToggleDataGridview",data:{data:{state:t},origin:"ToggleDataGridViewCmd"}})}};return{show:function(t,n){let o=n.executionContext;e(o,!0),t()},hide:function(t,n){let o=n.executionContext;e(o,!1),t()}}})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERPropertiesPanelCmd",["DS/ENOCollabSharingCmds/commands/EditPropCmd/EditPropCmdBase","DS/DELWeb3DOpersReviewAppV2Commands/Utils/DELOERPropertiesPanelUtils"],(function(e,t){"use strict";function n(e){this._ec=e.executionContext,this._csoTokens=[]}return n.prototype.beginExecute=function(){let n=t.getContext({executionContext:this._ec});(new e).launchProperties(n),this.done()},n.prototype.endExecute=function(){this.done()},n.prototype.destroy=function(){delete this._csoTokens,delete this._ec},n})),define("DS/DELWeb3DOpersReviewAppV2Commands/DELWebOERRightSidePanelCmd",["DS/DELWeb3DOpersReviewAppV2Commands/Utils/DELOERPropertiesPanelUtils","DS/DELWebViewerCommonFacets/DELEditPropWidgetUtils","DS/DELWebOERCommonUtils/utils/XSOManager","i18n!DS/DELWeb3DOpersReviewAppV2Commands/assets/nls/DELWeb3DOpersReviewAppV2Commands"],(function(e,t,n,o){"use strict";const i=t.getEditPropConstants();let r,s=[];return{show:function(a,c){let l=c.executionContext,d=function(){l.getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:"DELWebOERRightSidePanelCmd",state:!1})},p={displayType:i.DOCKABLE,appId:l.getComponent("DELCommonUtilsServices").getAppId(),className:"enxpropertiestab",multiselection:i.MULTISEL_NO,setEditButton:!1,readOnly:true,typeOfDisplay:i.ALL,selectionType:i.NO_SELECTION,actions:[{name:"action_close_panel",text:o.closeProperties,icon:"close",handler:()=>{d()}}],events:{onCancel:()=>{d()}},context:e.getContext({executionContext:l,excludeConnection:!0})},u=i.RESTRICTED_SELECTION;p.selectionType||(p.selectionType=u),p.USE_APP_SECURTIYCONTEXT=!0;p.indexModeParameter;let m=null;l&&l.getComponent&&"function"==typeof l.getComponent&&l.getComponent(WAfrStandardComponentKey.UIFrame)&&"function"==typeof l.getComponent(WAfrStandardComponentKey.UIFrame).getImmersiveFrame&&(m=l.getComponent(WAfrStandardComponentKey.UIFrame).getImmersiveFrame()),p.immersiveFrameFromApp||(p.immersiveFrameFromApp=m),r=t.getEditPropComponentFactory().createFactory(p),e.getFacets().forEach((e=>r.controller.addFacets([e])));let g=function(){let n=e.getContext({executionContext:l,excludeConnection:!0}).getSelectedNodes(),o=[];UWA.is(n,"array")&&n.forEach((function(e){let n=t.getEditPropUtils().getModelFromSelectedNode(e);n&&o.push(n)})),r.show(o)},E=n.getCSO();s.push(E.onPostAdd(g)),s.push(E.onPostRemove(g)),s.push(E.onEmpty(g)),g(),a()},hide:function(e,t){if(r&&r.elements&&r.elements.editPropWrapper&&r.elements.editPropWrapper.closePanel&&r.elements.editPropWrapper.closePanel(),r=null,UWA.is(s,"array")&&s.length>0){let e=n.getCSO();s.forEach((t=>e.unsubscribe(t)))}s=[],e()}}}));