define("DS/RTProxyDriver/RTLogger",["UWA/Class","UWA/Utils"],(function(e,o){"use strict";var t=new(e.extend({init:function(e,o){var t,r,i;if(e)if("string"==typeof e)n={service:e};else n=e;else var n={};for(t in this.service=n.service,this.getStringActivator=n.getStringActivator||(this.service?"logger"+this.service:"debug"),this.serviceColor=o||n.color,this.backgroundColor=n.backgroundColor,this.createLogMethod=function(e,o,t,r){return function(i,n){if(!i)return null;if(!o||!console.log.bind)return console.log(i,n||"");var s=console.log.bind(console);return!o.levelindex&&0!==o.levelindex||o.levels.indexOf(e)<=o.levelindex?"string"==typeof i?s("%c"+(o.service?"["+o.service+"]":"")+"["+e+"] "+i,"background-color:"+(r||o.backgroundColor||"white")+";color:"+(t||o.serviceColor||"black")+";",-1!=i.indexOf("%c")&&(n||o.opts)||""):s(i,n):null}},n&&n.dontDefaultLevel||(this.levels=["log","info","table","error","warn","debug"]),this.levels)r=this.levels[t],(i=this)[r]=i.createLogMethod(r,i);if(UWA.Utils.getQueryString(decodeURIComponent(document.URL),this.getStringActivator))UWA.log("Logger init service "+this.service+", traces activated");else{this.levelindex=0;-1!=document.location.hostname.indexOf("?")?(document.location.hostname,this.getStringActivator):(document.location.hostname,this.getStringActivator)}},setLevel:function(e){if(!e||"string"!=typeof e||-1==this.levels.indexOf(e))return this.levelindex=null,console.log("Logger setLevel defaulted to all levels");this.levelindex=this.levels.indexOf(e)},setService:function(e,o){if(!e||"string"!=typeof e)return console.log("Logger setService bad arg");this.service=e,o&&"string"==typeof o&&(this.serviceColor=o)},setOptions:function(e){if(!e||"string"!=typeof e)return console.log("Logger setOptions bad arg");this.opts=e},addLevel:function(e,o,t,r){return e&&"string"==typeof e?this[e]?console.log("Logger addLevel "+e+" already exists"):(t?this.levels.splice(t,0,e):this.levels.push(e),this[e]=this.createLogMethod(e,this,o),void(r&&this.setLevel(e))):console.log("Logger addLevel bad arg")},setColor:function(e){if(!e||"string"!=typeof e)return console.log("Logger setColor bad arg");this.serviceColor=e},setBackgroundColor:function(e){if(!e||"string"!=typeof e)return console.log("Logger setColor bad arg");this.backgroundColor=e}}))({service:"3DIM",color:"blue",backgroundColor:"lightgray"});if(t.addLevel("xmpp","green"),t.addLevel("node","green"),sessionStorage&&sessionStorage.getItem("DSY_SWYM_DEBUG")){console.log("RTLogger activation for TSM");try{console.log("Verbose logs for TSM: RTLogger"),t.levelindex=99,UWA&&(console.log("Verbose logs for TSM: UWA"),"function"==typeof UWA.setDebugMode&&UWA.setDebugMode(!0),UWA.debug=!0),console.log("Verbose logs for TSM: socket.io"),localStorage.setItem("debug","*")}catch(e){console.error(e)}}return t})),define("DS/RTProxyDriver/RTProxyDriver",["UWA/Class","UWA/Utils","UWA/Class/Events","DS/RTProxyDriver/RTLogger"],(function(e,o,t,r){"use strict";r.debug("RTProxyDriver load");var i={},n={"3DIM":{token:void 0},"3DNOTIF":{token:void 0}},s={eventName:{SETDRIVER:"SETDRIVER",GETSTATUSLIST:"GETSTATUSLIST",CONNECTED:"CONNECTED",ONMESSAGERECEIVED:"ONMESSAGERECEIVED",ONDATARECEIVED:"ONDATARECEIVED",CLOSESESSION:"CLOSESESSION:",SENDMSG:"SENDMSG",SENDDATA:"SENDDATA",GETSTATUS:"GETSTATUS",GETALLSTATUS:"GETALLSTATUS",STATUSUPDATED:"STATUSUPDATED",SETSTATUS:"SETSTATUS",ONPRESENCERECEIVED:"ONPRESENCERECEIVED",SEARCHCONTACT:"SEARCHCONTACT",RESULTOFSEARCH:"RESULTOFSEARCH",SENDNOTIF:"SENDNOTIF",DISCONNECTED:"DISCONNECTED",LOGOUT:"LOGOUT",SIGNOUT:"SIGNOUT"}},l=new t;return l.addEvent("SETDRIVER",(function(e){var o=e.nameApp;n[o]&&!i[o]&&require(["DS/RTDriver/RTDriver"],(function(t){r.debug("RTDriver loaded by RTProxyDriver");var n=new t(e);n&&(i[o]=n,l.dispatchEvent("DRIVERSETTED",[]))}))})),l.addEvent("LOGOUT",(function(e){var o=e.nameApp;delete i[o]})),s.dispatch=function(e,o){l&&l.dispatchEvent(e,o)},s.addEvent=function(e,o){l&&l.addEvent(e,o)},s.removeEvent=function(e,o){l&&("ALL"===e?l.removeEvents():l.removeEvent(e,o))},s}));