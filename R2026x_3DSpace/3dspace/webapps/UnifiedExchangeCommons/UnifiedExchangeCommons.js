define("DS/UnifiedExchangeCommons/Storage",["UWA/Class/Model","UWA/Class/Collection"],(function(e,t){const n="standalone",o="ds-enovia-unified-exchange",r="widget";return StorageEntry=e.extend({defaults:{preferences:{}},setPreferences:function(e){e&&(this.unset("preferences"),this.set("preferences",e))},getPreferences:function(){return this.get("preferences")}}),t.singleton({model:StorageEntry,setup:function(){var e=this;e.addEvent("onChange",e.onStorageChange.bind(null,e)),window.addEventListener("storage",(t=>{"ds-enovia-unified-exchange"===t.key&&e.setupDefaultEntries()}))},onStorageChange:function(e){var t=e.toJSON();e.storageMode===r?widget.setValue(o,JSON.stringify(t)):localStorage.setItem(o,JSON.stringify(t))},setMode:function(e){this.storageMode=e,this.setupDefaultEntries()},setupDefaultEntries:function(){var e=this,t=e.storageMode===r?widget.getValue(o):localStorage.getItem(o);UWA.is(t)&&(t=JSON.parse(t),e.remove(e.toArray()),t.forEach((t=>{e.add(new StorageEntry(t))})))},getEntryById:function(e){return this.find((t=>e===t.id))},setPreference:function(e,t,o=n){var r=this.getPreferences(o);r&&(r[e]=t,this.setPreferences(r,o))},getPreference:function(e,t=n){var o=this.getPreferences(t);return o&&o[e]},removePreference:function(e,t=n){var o=this.getPreferences(t);o&&(delete o[e],this.setPreferences(o,t))},getPreferences:function(e=n){var t=this.getEntryById(e);return t&&t.getPreferences()||{}},setPreferences:function(e,t=n){if(t&&e){var o=this.getEntryById(t);o||(o=new StorageEntry({id:t}),this.add(o)),o.setPreferences(e)}},removePreferences:function(e=n){var t=this.getEntryById(e);t&&this.remove(t)}})})),define("DS/UnifiedExchangeCommons/Upload",["UWA/Class","UWA/Class/Options","DS/WAFData/WAFData"],((e,t,n)=>e.extend(t,{init:function(e){e=e||{},this.setOptions(e)},upload:function(){let e=this,t=e.options.checkinticket;return"string"===UWA.typeOf(e.options.checkinticket)&&(t=e.checkinticket()),new UWA.Promise((function(n,o){t.then(e.postcheckinticket.bind(null,e)).then(e.checkin.bind(null,e)).then(n).fail(o)}))},checkinticket:function(){let e=this;return new UWA.Promise((function(t,o){e.checkinTicketRequest=n.authenticatedRequest(e.options.checkinticket,{method:"GET",onComplete:t,onFailure:o})}))},postcheckinticket:function(e,t){return t&&JSON.parse(t)||{}},checkin:function(e,t){return new UWA.Promise((function(o,r){let i=t.uploadCorrelation[0].fileId,s=t.url,c=new FormData;c.set("__fcs__jobTicket",t.ticket),c.set("__fcs__corelation_0",i);let a="";if(e.options.file)a=e.options.file.name,c.set("file_0",e.options.file),c.set("file-name",a),c.set("file-title",a),c.set("file-description",a);else if(e.options.content){a=`${i}.${e.options.content.extension}`;var l=new File([e.options.content.blob],a);c.set("file_0",l),c.set("file-name",a),c.set("file-title",a),c.set("file-description",a)}e.checkinRequest=n.authenticatedRequest(s,{method:"POST",data:c,timeout:18e5,cache:3600,onComplete:function(t){UWA.is(e.options.success)&&e.options.success({fileName:a,checkinFileId:i,checkInAnswer:t}),o()},onFailure:function(){UWA.is(e.options.failure)&&e.options.failure(arguments),r()},onUploadProgress:e.options.progress})}))},cancel:function(){UWA.is(this.checkinTicketRequest)&&this.checkinTicketRequest.cancel(),UWA.is(this.checkinRequest)&&this.checkinRequest.cancel()}}))),define("DS/UnifiedExchangeCommons/parameters/ParameterView",["UWA/Class/View","DS/TreeModel/TreeNodeModel","DS/Controls/Label","DS/Core/TooltipModel","DS/Utilities/TouchUtils"],(function(e,t,n,o,r){"use strict";return t=t.extendNode({getKey:function(){return this.options.key},getValue:function(){return this.options.key&&this.getAttributeValue(this.options.key)}}),e.extend({tagName:"div",className:"exportcommand-parameterview",setup:function(){this.treeNodeModel=new t({key:""})},build:function(e,t){try{let n=this;return n.key=e.key,n.resolve=t,n.treeNodeModel.validate=function(){if(e.validate){var t=e.validate.call(n.treeNodeModel);return n.error&&("object"===UWA.typeOf(t)?n.setError({message:t.message}):"string"===UWA.typeOf(t)?n.setError({message:t}):n.unsetError()),t}},n.treeNodeModel.updateOptions({key:e.key}),e.hidden&&n.treeNodeModel.setAttribute(e.key,e.value),e.type&&require([e.type],(function(t){(n.control=new t(e.options),n.control.postBuildView&&n.control.postBuildView({value:e.value}),n.control.getContent().setStyles({width:"100%"}),e.label?(n.buildRow(e,n.control).inject(n.container),"title"===e.key&&n.control.focus()):n.control.inject(n.container),e.blur&&n.control.addEventListener("blur",e.blur),e.keydown&&n.control.addEventListener("keydown",e.keydown),n.control.addEventListener("uncommittedChange",e.uncommittedChange?e.uncommittedChange:n.onChange.bind(null,n,e)),n.control.addEventListener("change",e.change?e.change:n.onChange.bind(null,n,e)),e.children||n.control.hasEvent("postBuildView"))||(UWA.is(e.value)?"boolean"!==UWA.typeOf(e.value)?(n.control.value=void 0,n.control.value=e.value):(n.control.checkFlag=void 0,n.control.checkFlag=e.value):n.treeNodeModel.getModelEvents().publish({event:"attributeChanged"}));n.resolve&&n.resolve(n.control)})),n.control}catch(e){console.log(e)}},buildRow:function(e,t){let n=this;try{let o=UWA.createElement("div",{class:"exportcommand-parametersview-group"}),i=UWA.createElement("div",{class:"exportcommand-parametersview-row"}).inject(o),s=e.label||"",c=UWA.createElement("div",{class:"exportcommand-parametersview-col-label",styles:{fontWeight:"bold",fontSize:r.getTouchMode()?14:12},html:s}).inject(i);if(e.help){let t=n.buildTooltip(e).getContent();c.appendChild(t)}let a=UWA.createElement("div",{class:"exportcommand-parametersview-col-value"}).inject(i);return n.buildValue(t,e).inject(a),n.buildError().inject(a),o}catch(e){console.log(e)}},buildTooltip:function(e){if(e.help){let t=new n({value:"",icon:{iconName:"help",fontIconFamily:1},class:"tooltip-icon-label",tooltipInfos:new o({title:e.label,shortHelp:e.help,mouseRelativePosition:!0,position:"top"})});return t.getContent().style.position="relative",t.getContent().style.top="-2.5px",t.getContent().style.margin="0px 0px",t.getContent().style.paddingLeft="0px",t.getContent().style.fontSize="8px",t.getContent().style.background="transparent",t.getContent().style.color="#B4B6BA",t}},buildValue:function(e){return UWA.createElement("div",{class:"exportcommand-parametersview-col-value-cell1",html:e})},buildError:function(){var e=this;return e.error=UWA.createElement("div",{styles:{marginBottom:5,marginTop:2,marginLeft:3,color:"#EA4F37",fontSize:r.getTouchMode()?14:12}}),e.error.hide(),e.error},setError:function(e){var t=this;e.showAlert||(t.error.style.color=e.color||"#EA4F37",t.error.setHTML(e.message||""),t.error.show())},unsetError:function(){var e=this;e.error.style.color="#EA4F37",e.error.setHTML(""),e.error.hide()},onChange:function(e,t,n){if(!t.children){let o,r=n.dsModel,i=n.options&&n.options.uncommittedValue;o=UWA.is(i)?i:null!=r.checkFlag?r.checkFlag:r.value,UWA.is(o)&&e.treeNodeModel.setAttribute(t.key,o)}}})})),define("DS/UnifiedExchangeCommons/parameters/ParametersTreeDocument",["DS/TreeModel/TreeDocument","DS/UnifiedExchangeCommons/Storage"],(function(e,t){t.setMode("localStorage");const n={properties:[function(){return{property:"key",value:this.options.key}},function(){return{property:"grid",value:this.options.grid}}]};return e.extend({init:function(e){var t=this;t._parent(e),t.getModelEvents().subscribe({event:"attributeChanged"},(()=>{var e=t.getAllDescendants().filter((e=>{if(e.validate)return e.validate()}));e&&e.length?t.options.block&&t.options.block():t.options.allow&&t.options.allow(t.toJson())}))},toJson:function(e){let t=this,o={},r=!1;if(e||(e=t.dump(n),r=!0),e.children){var i=e.children.reduce(((e,n)=>(UWA.merge(e,t.toJson(n)),e)),{});r?UWA.extend(o,i):o[e.key]=i}else UWA.is(e.key)&&UWA.extend(o,e.grid);return o},getPreferences:function(){return t.getPreferences(this.options.id)},setPreferences:function(){return t.setPreferences(this.toJson(),this.options.id)},removePreferences:function(){return t.removePreferences(this.options.id)}})})),define("DS/UnifiedExchangeCommons/parameters/ParametersViewFactory",["UWA/Class","UWA/Class/Options","UWA/Class/View","DS/TreeModel/TreeNodeModel","DS/UnifiedExchangeCommons/parameters/ParametersTreeDocument","DS/UnifiedExchangeCommons/parameters/ParameterView"],(function(e,t,n,o,r,i){"use strict";var s=n.extend({tagName:"div",className:"exportcommand-parametersview",setup:function(){this.parameters=[]},add:function(e){this.parameters.push(e),e.inject(this.getContent())},destroy:function(){this.parameters.forEach((e=>{e.treeNodeModel.remove()})),this.container.empty()}});return e.extend(t,{init:function(e){var t=this;t._parent(),t.setOptions(e),t.parameterTreeDocument=new r(e),t.preferences=t.parameterTreeDocument.getPreferences()},build:function(e,t){let n=this;var o=n.buildView(e,n.parameterTreeDocument,n.preferences);return o.getId=function(){return n.parameterTreeDocument.options.id},o.store=function(){n.parameterTreeDocument.setPreferences()},o.remove=function(){n.parameterTreeDocument.removePreferences()},o},buildView:function(e,t,n={}){let o=this,r=new s;return e.forEach((function(e){if(e.successors)o.buildSuccessors(r,e,t,n);else if(e.children)o.buildGroup(r,e,t,n);else{o.retainLastStoredPreferences(e,n);var s=new i;r.add(s),t.addChild(s.treeNodeModel),s.build(e)}})),r},buildSuccessors:function(e,t,n,o){let r,s=this,c=new i;n.addChild(c.treeNodeModel),c.inject(e.container),s.retainLastStoredPreferences(t,o),c.build(t);let a=[];c.treeNodeModel._modelEvents.subscribe({event:"attributeChanged"},(()=>{if(r&&r.destroy(),t.successors){let e=t.successors.call(UWA.clone(c.treeNodeModel.options.grid));e&&(e=e.filter((e=>!e.children&&!e.fields)),e.forEach((function(e){a.push(e.key)})),r=s.buildView(e,n,o),c.getContent().insertAdjacentElement("afterend",r.getContent()))}}))},buildGroup:function(e,t,n,r){let s=this,c=new i;new UWA.Promise((function(o){n.addChild(c.treeNodeModel),c.inject(e.container),t.options||(t.options={}),t.options.style="filled-separate",c.build(t,o)})).then((function(n){t.children.forEach(((i,a)=>{var l=new o({key:i.key});if(c.treeNodeModel.addChild(l),0==a&&(i.isSelected=!0),i.label&&(i.header=i.label),i.icon&&(i.icon={iconName:i.icon,fontIconFamily:WUXManagedFontIcons.Font3DS}),i.fields){var d={};if(UWA.is(r[t.key])){var u=r[t.key];UWA.is(u[i.key])&&(d=u[i.key])}let o=s.buildView(i.fields,l,d);i.content=o.getContent(),n.add?n.add(i):n.addItem?n.addItem(i):o.inject(e.container)}})),n.expandItem&&n.expandItem(0)}))},retainLastStoredPreferences:function(e,t={}){!1!==e.persist&&UWA.is(t[e.key])&&(e.value=t[e.key])}})}));