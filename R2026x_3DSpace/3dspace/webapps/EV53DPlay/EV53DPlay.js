define("DS/EV53DPlay/enoviav5",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return t.singleton({init:function(){},getWebServicesPath:function(){return"/resources/fedSearchV5"},getActionsPath:function(e){return getWebServicesPath()+"/actions"},get3DPlayProvider:function(e){return"EV5"}})})),define("DS/EV53DPlay/OxMQLV5Loader",["DS/WAFData/WAFData","DS/EV53DPlay/enoviav5"],(function(e,t){"use strict";return function(n,o){var i=null,r=void 0!==o?o:null,a=null,l=null,s=null,u=null,c=null,d=null;function v(){a=null,l=null,s=null,u=null,i=null,{}}function f(e,t,n){u&&u({rsc:"EV53DPlay/EV53DPlay_errors",type:e,level:void 0!==t?t:"warning",abort:void 0===n||n})}function g(){return c+t.getWebServicesPath()+"/SOPRequest/"}function D(){return c+t.getWebServicesPath()+"/LightVault/"}this.load=function(n,o,p,h,P,L){L,i={value:!1},a=o,s=p,l=function(){v(),h&&h()},u=P,d=n.physicalid,c=n.serverurl,console.log("Selected Object uuid: "+d),console.log("Selected Object Type: "+n.dtype),console.log("enoviav5 service URL: "+c),n.provider!==t.get3DPlayProvider()&&console.error("got a data for another provider "+n.provider+" (can only treat EV5 one)");var S=!1;S||(console.log(" ping V5"),function(){var t=g()+"Ping";console.log("ping url="+t);var n=[];n.method="GET",n.type="xml",n.async=!1,n.timeout=500,n.onComplete=function(e){console.log("pingV5 succeeded ",e)},n.onFailure=function(e){console.error(t+" has failed.!!  "+e)},n.onTimeout=function(e){console.error(t+" TimeOut.!!  "+e)},e.authenticatedRequest(t,n)}(),S=!0),function(){var t=g()+"Light3DEXPNavigation";console.log("url="+t);var n='<?xml version="1.0" encoding="UTF-8" ?><InputData Release = "419"><V53DEXPNavigation><NAVIGATION NAME="Expand3DPLAY" DEPTH="ALL"></NAVIGATION><UUIDList><UUID VALUE="'+d+'"/></UUIDList></V53DEXPNavigation></InputData>',o=[];o.method="POST",o.data=n,o.type="xml",o.headers={Accept:"text/xml","Content-Type":"text/xml"},o.onComplete=function(e){!function(e){var t=(new DOMParser).parseFromString(e,"text/xml");if(t instanceof XMLDocument){var n=t.firstChild;if("OutputData"===n.nodeName)if(1===n.childNodes.length&&"ListOfNodes"===n.childNodes[0].nodeName){var o=n.childNodes[0],i=o.attributes.length;require(["DS/Visualization/ModelLoader","DS/Visualization/Node3D","DS/Visualization/ThreeJS_DS"],(function(e,t,n){var c=new e;c.setRenderCallback(r),c.setOnLoadedCallback(l),c.setOnProgressCallback(s),c.setOnErrorCallback(u);for(var d=0;d<i;d++)if("Data"===o.attributes[d].name){var v=o.attributes[d].value,g=JSON.parse(v),p=g.List.length;if(console.log("Total CGR Models: "+p),0!=p)for(var h="",P=[],L=0;L<p;L++){g.List[L]["ds6w:title"],h=g.List[L].LOC,(P=g.List[L].POS)[9]*=1e3,P[10]*=1e3,P[11]*=1e3;var S=new n.Matrix4(P[0],P[3],P[6],P[9],P[1],P[4],P[7],P[10],P[2],P[5],P[8],P[11],0,0,0,1),E=new t("Document CGR");E.productType="Reference3D",E.setMatrix(S),h=h.replace("_","/");var O={provider:"FILE",filename:D()+h,serverurl:"",format:"cgr",requestsOptions:{authentication:"passport"}};c.loadModel(O,E),s&&s({loaded:p-L,total:p}),a&&a(E)}else console.warn("No CGR Model Available In Selected Object"),f("NO_GEOMETRY","info","true"),l()}}),(function(e){var t=e.requireModules&&e.requireModules[0];console.error("Module "+t+" is missing.")}))}else console.warn("No CGR Model Available In Selected Object"),f("NO_GEOMETRY","info","true"),l();else console.warn("Invalid XML Received From Light3DEXPNavigation"),l()}else console.warn("Light3DEXPNavigation Response Not Contains Any XML Data"),l()}((new XMLSerializer).serializeToString(e))},o.onFailure=function(e){console.error(t+" Query is failed.!!"),f("SERVIVE","error","true")},e.authenticatedRequest(t,o)}()},this.abort=function(){null!==i&&(i.value=!0,v())}}}));