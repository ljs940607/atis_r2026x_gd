define("DS/SourcingMEICompare/MEIQualViewDef",["UWA/Core","DS/CompareWidget2/ViewDefModules/ViewDefOptions"],(function(t,e){"use strict";var i={AttrFetch:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_FETCH_plugin"},AttrCompare:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_COMPARE_plugin"},AttrDisplay:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_DISPLAY_plugin",Options:e.ATTRIBUTE_DISPLAY_OPTIONS},StructCustAttrsPrep:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_CUST_ATTRS_PREP_plugin"},StructFetch:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_FETCH_plugin",Options:e.STRUCT_FETCH_OPTIONS},StructCompare:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_COMPARE_plugin",Options:e.STRUCT_COMPARE_OPTIONS},StructListViewPrep:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_LIST_VIEW_PREP_PLUGIN"},StructDisplay:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_DISPLAY_plugin",Options:e.STRUCT_DISPLAY_OPTIONS},Exporter:{Path:"DS/CompareWidget2/plugins/EXPORT/EXPORT_plugin",Options:e.STRUCT_DISPLAY_OPTIONS},MEI_CUSTOM_STRUCT:{Path:"DS/SourcingMEICompare/plugin/dataoverride/MEIStructDataOverride"},UPDATE_MEI_PROP:{Path:"DS/SourcingMEICompare/plugin/dataoverride/MEIAttrDataOverride"},MEICustomDisplay:{Path:"DS/SourcingMEICompare/plugin/display/MEIDisplayPlugin",Options:e.ATTRIBUTE_DISPLAY_OPTIONS},MEIStructDisplay:{Path:"DS/SourcingMEICompare/plugin/display/MEIStructDisplayPlugin",Options:e.STRUCT_DISPLAY_OPTIONS}};return t.merge({VIEWSETS:{MEI_STRUCT_PROPS:{ROW:["MEI_STRUCT_VIEW_WITH_CUSTOM_ATTRS",{COL:[["MEI_QAL_PROP_VIEW"]]}]},MEI_PROPS:{ROW:[["MEI_PROP_VIEW"]]}},VIEWDEFS:{MEI_PROP_VIEW:["AttrFetch","UPDATE_MEI_PROP","AttrCompare","MEICustomDisplay"],MEI_QAL_PROP_VIEW:["AttrFetch","UPDATE_MEI_PROP","AttrCompare","AttrDisplay"],MEI_STRUCT_VIEW_WITH_CUSTOM_ATTRS:["StructFetch","MEI_CUSTOM_STRUCT","StructCompare","StructCustAttrsPrep","StructListViewPrep","MEIStructDisplay","Exporter"]},PLUGDEFS:i},e)})),define("DS/SourcingMEICompare/plugin/view/MEIStructView",["DS/CompareWidget2/userSettings/UserSettingsManager","DS/CompareWidget2/plugins/STRUCTURE/ViewPanel/structComparePanel","i18n!DS/SourcingMEICompare/assets/nls/SourcingMEICompare"],(function(t,e,i){"use strict";return e.extend({init:function(e,i,n){this.options=i,t.userSettings["viewSettings.PROP_VIEW_M.attributes_always_shown"]=t.userSettings["viewSettings.PROP_VIEW.attributes_always_shown"],t.userSettings["viewSettings.PROP_VIEW_M.attributes_display_option"]=t.userSettings["viewSettings.PROP_VIEW.attributes_display_option"],t.userSettings["viewSettings.PROP_VIEW_M.attributes_not_shown"]=t.userSettings["viewSettings.PROP_VIEW.attributes_not_shown"],t.userSettings["viewSettings.PROP_VIEW_M.default_attributes"]=t.userSettings["viewSettings.PROP_VIEW.default_attributes"],t.userSettings["viewSettings.PROP_VIEW_M.showOnlyDifferences"]=t.userSettings["viewSettings.PROP_VIEW.showOnlyDifferences"],t.userSettings["viewSettings.PROP_VIEW_M.attributes_display_option"]=t.userSettings["viewSettings.PROP_VIEW.attributes_display_option"],t.userSettings["viewSettings.PROP_VIEW_M.display_mode"]=t.userSettings["viewSettings.STRUCT_VIEW.display_mode"],t.userSettings["viewSettings.PROP_VIEW_M.multi_statuses_to_hide_and"]=t.userSettings["viewSettings.STRUCT_VIEW.multi_statuses_to_hide_and"],t.userSettings["viewSettings.PROP_VIEW_M.show_3dshape_of_3dpart"]=t.userSettings["viewSettings.STRUCT_VIEW.show_3dshape_of_3dpart"],t.userSettings["viewSettings.PROP_VIEW_M.statuses_to_hide"]=t.userSettings["viewSettings.STRUCT_VIEW.statuses_to_hide"],t.userSettings["viewSettings.PROP_VIEW_M.statuses_unchecked"]=t.userSettings["viewSettings.STRUCT_VIEW.statuses_unchecked"],t.userSettings["viewSettings.PROP_VIEW_M.view3D.isolate"]=t.userSettings["viewSettings.PAD3D_VIEW.view3D.isolate"],this._parent(e,i,n)},getLabel:function(){return i.manufacturer_equivalent_item},getName:function(){return"structures"}})})),define("DS/SourcingMEICompare/models/ManufacturerEquivalentItem",["DS/SourcingCommonInfra/utils/Services"],(function(t){"use strict";var e=function(){this.source="sourcing"};return e.prototype.init=function(){t.initialize()},e.prototype.getMEIDetails=function(e){let i={};return i.endpoint="/resources/v1/modeler/dssrc/dssrc:ManufacturerEquivalentItem/"+e.id+"?$mask=dsmvsrc:ManufacturerEquivalentItem.Details&$fields=dsmveno:CustomerAttributes&$mva=true&tenant="+e.tenant,i.source="3DSpace",i.sc=e.sc,t.getDataPromise(i)},e.prototype.getQualificationDetails=function(e){let i={};return i.endpoint="/resources/v1/modeler/dssourcing/qualifications/"+e.id+"?$include=context-restrictions,target,Context&tenant="+e.tenant,i.source=this.source,t.getDataPromise(i)},e.prototype.getMEIProxy=function(e){let i={endpoint:"/resources/dssourcing/ProxyObject"};return i.postData=e,i.source=this.source,t.performPostPromise(i)},e.prototype.getAllQualificationsForTarget=function(e){return e.endpoint="/resources/v1/modeler/dssourcing/qualifications/target/"+e.id+"/",e.endpoint=e.endpoint+"?$include=include=Context,PreReq,context-restrictions",e.source=this.source,t.getDataPromise(e)},e})),define("DS/SourcingMEICompare/plugin/view/MEIView",["DS/CompareWidget2/plugins/ATTRIBUTE/ViewPanel/propsComparePanel","DS/CompareWidget2/userSettings/UserSettingsManager","i18n!DS/SourcingMEICompare/assets/nls/SourcingMEICompare"],(function(t,e,i){"use strict";return t.extend({init:function(t,i,n){this.options=i,e.userSettings["viewSettings.PROP_VIEW_M.attributes_always_shown"]=e.userSettings["viewSettings.PROP_VIEW.attributes_always_shown"],e.userSettings["viewSettings.PROP_VIEW_M.attributes_display_option"]=e.userSettings["viewSettings.PROP_VIEW.attributes_display_option"],e.userSettings["viewSettings.PROP_VIEW_M.attributes_not_shown"]=e.userSettings["viewSettings.PROP_VIEW.attributes_not_shown"],e.userSettings["viewSettings.PROP_VIEW_M.default_attributes"]=e.userSettings["viewSettings.PROP_VIEW.default_attributes"],e.userSettings["viewSettings.PROP_VIEW_M.showOnlyDifferences"]=e.userSettings["viewSettings.PROP_VIEW.showOnlyDifferences"],e.userSettings["viewSettings.PROP_VIEW_M.attributes_display_option"]=e.userSettings["viewSettings.PROP_VIEW.attributes_display_option"],e.userSettings["viewSettings.PROP_VIEW_M.display_mode"]=e.userSettings["viewSettings.STRUCT_VIEW.display_mode"],e.userSettings["viewSettings.PROP_VIEW_M.multi_statuses_to_hide_and"]=e.userSettings["viewSettings.STRUCT_VIEW.multi_statuses_to_hide_and"],e.userSettings["viewSettings.PROP_VIEW_M.show_3dshape_of_3dpart"]=e.userSettings["viewSettings.STRUCT_VIEW.show_3dshape_of_3dpart"],e.userSettings["viewSettings.PROP_VIEW_M.statuses_to_hide"]=e.userSettings["viewSettings.STRUCT_VIEW.statuses_to_hide"],e.userSettings["viewSettings.PROP_VIEW_M.statuses_unchecked"]=e.userSettings["viewSettings.STRUCT_VIEW.statuses_unchecked"],e.userSettings["viewSettings.PROP_VIEW_M.view3D.isolate"]=e.userSettings["viewSettings.PAD3D_VIEW.view3D.isolate"],this._parent(t,i,n)},getLabel:function(){return i.manufacturer_equivalent_item},getName:function(){return"PROP_VIEW_M"}})})),define("DS/SourcingMEICompare/plugin/display/MEIDisplayPlugin",["DS/SourcingMEICompare/plugin/view/MEIView","DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_DISPLAY_plugin"],(function(t,e){"use strict";return e.extend({createViewPanelObject:function(e,i){return new t(e,this._plugSvcs,i)},execute:function(t,e){this._parent(t,e)}})})),define("DS/SourcingMEICompare/plugin/dataoverride/MEIStructDataOverride",["DS/CompareWidget2/plugins/plugin","DS/ENOXLogger/Logger","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/refInst_node","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/dbObj","DS/SourcingCommonInfra/utils/PlatformServices","DS/SourcingMEICompare/models/ManufacturerEquivalentItem","DS/SourcingCommonInfra/utils/Constants","DS/SourcingCommonInfra/utils/Services"],(function(t,e,i,n,s,r,a,o){"use strict";return t.extend({onLoad:function(){return this.meiModel=new r,this._parent()},onDestroy:function(){return this._parent()},execute:async function(t,r){var u=this;u._parent(t,r);let g={logger:e};async function S(t){return new Promise((async e=>{t.getRoot().rmAllChildren(),t.getRoot().get_dbObj_REF().setAttr("icon",require.toUrl("SourcingCommonInfra/assets/icons/MEI-Thumbnail.png"));let r={};r.smallURL=require.toUrl("SourcingCommonInfra/assets/icons/MEI-Thumbnail.png"),r.largeURL=require.toUrl("SourcingCommonInfra/assets/icons/MEI-Thumbnail.png"),t.getRoot().get_dbObj_REF().setAttr("typeIcons",r);let g={data:[{id:t.getRoot().get_dbObj_REF().getAttr("physicalid"),type:a.MEI_PROXY,dataelements:{"ProxyItem.Proxy_Service":t.getObjIDSpec().getServiceName().toLowerCase(),"ProxyItem.Proxy_Tenant":s.getPlatformId()}}]},S=await u.meiModel.getMEIProxy(g),_=await u.meiModel.getAllQualificationsForTarget({id:S[t.getRoot().get_dbObj_REF().getAttr("physicalid")]});if(_.data){_.data.filter((t=>t.type===a.TYPE_SRC_GENERAL_QUALIFICATION)).forEach((e=>{let r=new n;r.addAttr("physicalid",e.id),r.addAttr("dfr",e.id),r.addAttr("ds6w:type",e.dataelements.typeDisplay),r.addAttr("ds6w:globaltype",e.dataelements.typeDisplay),r.addAttr("ds6wg:revision",e.dataelements.revision),r.addAttr("ds6w:label",e.dataelements.title),r.addAttr("versionid",e.id),r.addAttr("logicalid",e.id),r.addAttr("icon",require.toUrl("SourcingCommonInfra/assets/icons/Qualification-Thumbnail.png"));let u={};u.smallURL=require.toUrl("SourcingCommonInfra/assets/icons/Qualification16.png"),u.largeURL=require.toUrl("SourcingCommonInfra/assets/icons/Qualification16.png"),r.addAttr("typeIcons",u);let g=new i(r),S="";S=s.getPlatformId()!==a.ONPREMISE?a.SOURCE_SOURCING:a.SERVICE_3DSPACE;let _={securityContext:o.getSecurityContext(S),serviceName:S,tenant:s.getPlatformId()};g.setDBContext(_),g.setParent(t.getRoot()),t.getRoot().addChild(g)}))}e()}))}s.getPlatformServices(g).then((async function(t){g.platformServices=t})),await async function(t){for(const e of t)await S(e)}(t),null!==t?u.reportOK(t):u.reportKO()}})})),define("DS/SourcingMEICompare/plugin/dataoverride/MEIAttrDataOverride",["DS/CompareWidget2/plugins/plugin","DS/ENOXLogger/Logger","DS/CompareWidget2/plugins/DATA/attrValObj","DS/SourcingCommonInfra/utils/PlatformServices","DS/SourcingMEICompare/models/ManufacturerEquivalentItem","DS/SourcingCommonInfra/utils/Constants","i18n!DS/SourcingMEICompare/assets/nls/SourcingMEICompare"],(function(t,e,i,n,s,r,a){"use strict";return t.extend({onLoad:function(){return this.meiModel=new s,this._parent()},onDestroy:function(){return this._parent()},execute:async function(t,s){var o=this;o._parent(t,s);let u={logger:e};async function g(t){return new Promise((async e=>{if(t.getObjType()===r.VPMREFERENCE){t.attrVals.filter((t=>"thumbnailimage"===t.name))[0].value=require.toUrl("SourcingCommonInfra/assets/icons/MEI-Thumbnail.png"),t.getAttrByName("type").value=[r.MEI];let s=(await o.meiModel.getMEIDetails({id:t.getPhysicalID(),tenant:n.getPlatformId(),sc:t.getDBContext().securityContext})).member[0].manufacturer,u=new i("manufacturer",a.manufacturer,s,"string",5);t.attrVals.push(u),e()}else{if(n.getPlatformId()!==r.ONPREMISE){let e=(await o.meiModel.getQualificationDetails({id:t.getPhysicalID(),tenant:n.getPlatformId()})).data[0].dataelements,s=new i("maturity",a.maturity_state,e.stateDisplay,"string",t.attrVals.length+1);t.attrVals.push(s);let u=new i("type",a.type,e.typeDisplay,"string",t.attrVals.length+1);t.attrVals.push(u);let g=new i("lastTimeBuy",a.last_time_buy,e[r.LAST_TIME_BUY],"string",t.attrVals.length+1);t.attrVals.push(g);let S=new i("approved",a.qualification_status,e[r.APPROVED],"string",t.attrVals.length+1);t.attrVals.push(S);let _=new i("isPreferred",a.is_preferred,e[r.PREFERRED],"string",t.attrVals.length+1);t.attrVals.push(_);let l=new i("effectivityStartDate",a.effective_start_date,e[r.EFFECTIVITY_START],"string",t.attrVals.length+1);t.attrVals.push(l);let p=new i("effectivityEndDate",a.effective_end_date,e[r.EFFECTIVITY_END],"string",t.attrVals.length+1);t.attrVals.push(p)}e()}}))}n.getPlatformServices(u).then((async function(t){u.platformServices=t})),await async function(t){for(const e of t)await g(e)}(t),null!==t?o.reportOK(t):o.reportKO()}})})),define("DS/SourcingMEICompare/plugin/display/MEIStructDisplayPlugin",["DS/SourcingMEICompare/plugin/view/MEIStructView","DS/CompareWidget2/plugins/STRUCTURE/STRUCT_DISPLAY_plugin"],(function(t,e){"use strict";return e.extend({createViewPanelObject:function(e,i){return new t(e,this._plugSvcs,i)},execute:function(t,e){this._parent(t,e)}})}));