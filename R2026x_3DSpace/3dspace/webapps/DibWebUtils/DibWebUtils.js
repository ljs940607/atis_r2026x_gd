define("DS/DibWebUtils/DibQueryToolbox",["UWA/Core","DS/WAFData/WAFData","DS/WebappsUtils/WebappsUtils","DS/PADUtils/PADSettingsMgt"],(function(e,t,i,n){"use strict";var o=function(e,i){return t.authenticatedRequest(e,i)};return{getUDLData:function(t){return function(t){if(!e.is(t.objectPhysicalid,"array"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var i=t.serverUrl+"/cvservlet/fetch/v2?SecurityContext="+encodeURIComponent(t.securityContext),n={label:"UDL_"+Date.now(),physicalid:t.objectPhysicalid,select_file:["udl"]},r={data:JSON.stringify(n),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var i=JSON.parse(e);i&&t.onComplete(i)},onFailure:function(){t.onFailure()}};return o(i,r)}(t)},expandDifComponent:function(t){return function(t){if(!e.is(t.objectPhysicalid,"string"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var i=t.serverUrl+"/cvservlet/progressiveexpand/v2?output_format=cvjson&SecurityContext="+encodeURIComponent(t.securityContext),n={batch:{expands:[{label:"UDL_"+Date.now(),root:{physical_id:t.objectPhysicalid},filter:{all:1},graph:{descending_condition:{uql:"availability:1"},descending_condition_object:{uql:"availability:1"},descending_condition_relation:{uql:"availability:1"}}}]},outputs:{select_object:["physicalid","ds6w:type","ds6w:label","bo.PLMEntity.V_Name","bo.DIFCapture.V_ViewType","bo.DIFAbstractSheet.V_DIFOrientation","bo.DIFAbstractSheet.V_DIFFormatHeight","bo.DIFAbstractSheet.V_DIFFormatWidth","bo.DIFAbstractView.V_DIFScale","bo.DIFAbstractView.V_DIFScaleStatus","bo.DIFAbstractView.V_DIF3DMatrix"],select_relation:["physicalid","ds6w:type","ro.DIFAbstractViewInstance.V_DIFScale","ro.DIFAbstractViewInstance.V_DIFPosX","ro.DIFAbstractViewInstance.V_DIFPosY","ro.DIFAbstractViewInstance.V_DIFAngle"],format:"entity_relation_occurrence"}},r={data:JSON.stringify(n),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",SecurityContext:t.securityContext},onComplete:function(e){if(e){var i=JSON.parse(e);i&&t.onComplete(i)}else t.onFailure()},onFailure:function(){t.onFailure()}};return o(i,r)}(t)},expandPointedObject:function(t){return function(t){if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");e.is(t.objectPhysicalid,"string")||t.onFailure("No objectPhysicalid defined"),0===t.textsAttr.length&&t.onFailure("No attribute name defined"),e.is(t.onComplete,"function")||t.onFailure("No onComplete defined"),t.serverUrl||t.onFailure("No server URL"),t.securityContext||t.onFailure("No security context");var i=t.serverUrl+"/cvservlet/progressiveexpand/v2?output_format=cvjson&SecurityContext="+encodeURIComponent(t.securityContext),n=t.objectPhysicalid,r=t.mappingPLMRefId,a=t.textsAttr;a.push("physicalid"),a.push("ds6w:type");var s={batch:{expands:[{label:"UDL_"+Date.now(),root:{physical_id:n},filter:{all:1},graph:{descending_condition:{uql:"availability:1"},descending_condition_object:{uql:"availability:1"},descending_condition_relation:{uql:"availability:1"}}}]},outputs:{select_object:a,select_relation:a,format:"entity_relation_occurrence"}},l={data:JSON.stringify(s),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var i=JSON.parse(e);t.onComplete(i,n,r)},onFailure:function(){t.onFailure("Query expandPointedObject fail")}};return o(i,l)}(t)},getPointedObjects:function(t){return function(t){if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(e.is(t.difViewStreamId,"string"))if(0!==t.textsSRId.length)if(0!==t.textsAttr.length)if(e.is(t.onComplete,"function"))if(t.serverUrl){if(t.securityContext){var i=t.serverUrl+"/cvservlet/navigate?SecurityContext="+encodeURIComponent(t.securityContext),n=t.textsAttr,r=[];r.push(n);var a={input_physical_ids:[t.difViewStreamId],label:"RetrieveAnnLinkPointedObject"+Date.now(),primitives:[{navigate_to_sr:{id:1,filter:{role:["98"],sr_id:t.textsSRId}}}],patterns:{IMPLEMENT_LINK:[{id:1}]},attributes:r,flags:["returnMatches"],version:3},s={data:JSON.stringify(a),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var i=JSON.parse(e).result[0].outputs.IMPLEMENT_LINK[0];t.onComplete(i)},onFailure:function(){t.onFailure("Query getPointedObjectsInternal fail")}};return o(i,s)}t.onFailure("No security context")}else t.onFailure("No server URL");else t.onFailure("No onComplete defined");else t.onFailure("No attribute name defined");else t.onFailure("No sr id defined");else t.onFailure("No physical id defined")}(t)},getExtendedAttributes:function(t){return function(t){if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");e.is(t.objectPhysicalid,"string")||t.onFailure("No objectPhysicalid defined"),e.is(t.onComplete,"function")||t.onFailure("No onComplete defined"),t.serverUrl||t.onFailure("No server URL"),t.securityContext||t.onFailure("No security context");var i=t.objectPhysicalid,n=t.mappingPLMRefId,r=t.serverUrl+"/resources/xcad/lc/getextendedattributes?id="+i;return o(r,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var o=JSON.parse(e);t.onComplete(o,i,n)},onFailure:function(){t.onFailure("Query getExtendedAttributes fail")}})}(t)},getDIFAnnotatedProduct:function(t){return function(t){if(!e.is(t.objectPhysicalid,"string"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var i=t.serverUrl+"/cvservlet/navigate?SecurityContext="+encodeURIComponent(t.securityContext),n={input_physical_ids:[t.objectPhysicalid],primitives:[{navigate_from_sr:{id:1,mode:"ends",filter:{role:["505"],semantics:["5"]}},navigate_from_rel:{id:2}}],patterns:{IMPLEMENT_LINK:[{id:1},{id:2}]},fileAttributes:[],version:3,label:"navigate to annotationSet"},r={data:JSON.stringify(n),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var i=JSON.parse(e);if(i){var n=i.result[0];if(n){var o,r=n.outputs;if(r)o=r.IMPLEMENT_LINK,t.onComplete(o)}}},onFailure:function(){t.onFailure()}};return o(i,r)}(t)},getProductFromDifAnnotationSet:function(t){return function(t){if(!e.is(t.objectPhysicalid,"string"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var i=t.serverUrl+"/cvservlet/navigate?SecurityContext="+encodeURIComponent(t.securityContext),n={input_physical_ids:[t.objectPhysicalid],primitives:[{navigate_to_rel:{id:1},navigate_to_sr:{id:2,mode:"first"}}],patterns:{IMPLEMENT_LINK:[{id:1},{id:2}]},fileAttributes:[],version:3,label:"navigate to annotationSet"},r={data:JSON.stringify(n),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var i=JSON.parse(e);if(i){var n=i.result[0];if(n){var o=n.outputs;if(o){var r=o.IMPLEMENT_LINK;t.onComplete(r)}}}},onFailure:function(){t.onFailure()}};return o(i,r)}(t)},getRepObjPlmIdAssociatedToSymbol:function(t){return function(t){if(!e.is(t.difViewStreamId,"string"))throw new Error("No physical id defined");if(0==t.symbolsInViewRelIds.length)throw new Error("No symbol sr id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var i=t.serverUrl+"/cvservlet/navigate?SecurityContext="+encodeURIComponent(t.securityContext),n={input_physical_ids:[t.difViewStreamId],primitives:[{navigate_to_sr:{id:1,filter:{role:["326"],sr_id:t.symbolsInViewRelIds}},navigate_to_rel:{id:2,mode:"return_rel"}}],patterns:{symbol_pathSR:[{id:1}],symbol_relation:[{id:1},{id:2}]},flags:["returnMatches"],fileAttributes:[],version:3,label:"navigate to symbol"},r={data:JSON.stringify(n),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var i=JSON.parse(e);if(i){var n=i.result[0];if(n){var o=n.outputs;if(o){var r=o.symbol_pathSR,a=o.symbol_relation;t.onComplete(r,a)}}}},onFailure:function(){t.onFailure()}};return o(i,r)}(t)},getSupplementalGeometryData:function(t){return function(t){if(!e.is(t.objectPhysicalid,"array"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var i=t.serverUrl+"/cvservlet/fetch/v2?SecurityContext="+encodeURIComponent(t.securityContext),n={label:"UDL_"+Date.now(),physicalid:t.objectPhysicalid,select_file:["cgr"]},r={data:JSON.stringify(n),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var i=JSON.parse(e);i&&t.onComplete(i)},onFailure:function(){t.onFailure()}};return o(i,r)}(t)},getPointedObjectsFromLink:function(t){return function(t){if(!e.is(t.fatherID,"string"))throw new Error("No physical id defined");if(!e.is(t.role,"string"))throw new Error("No role defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var i=t.serverUrl+"/cvservlet/navigate?SecurityContext="+ +encodeURIComponent(t.securityContext),n={input_physical_ids:[t.fatherID],label:"RetrieveLinkPointedObject"+Date.now(),primitives:[{navigate_to_sr:{id:1,mode:"path",filter:{role:[t.role],sr_id:[t.sR_ID]}}}],patterns:{IMPLEMENT_LINK:[{id:1}]},flags:["returnMatches"],version:3},r={data:JSON.stringify(n),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var i=JSON.parse(e).result[0].outputs.IMPLEMENT_LINK[0];t.onComplete(i)},onFailure:function(){t.onFailure()}};return o(i,r)}(t)}}})),define("DS/DibWebUtils/DibFavoriteContextAccess",["UWA/Core","DS/WAFData/WAFData","DS/WebappsUtils/WebappsUtils","DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADUtilsServices"],(function(e,t,i,n,o){"use strict";var r=function(e,i){var o=null;return!0===n.getSetting("cors_activated")?o=t.authenticatedRequest(e,i):(i.proxy="passport",o=t.proxifiedRequest(e,i)),o};return{getFavoriteContextInfos:function(t){if(!e.is(t.ObjectPhysicalid,"string"))throw new Error("No onComplete defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");var i={RootObject:null,PathOfInstances:[],Error:null},a=o.get3DSpaceUrl()+"/cvservlet/navigate?SecurityContext=preferred";return function(t){if(!e.is(t.ObjectPhysicalid,"string"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");var i=o.get3DSpaceUrl()+"/cvservlet/navigate?SecurityContext=preferred",a={input_physical_ids:[t.ObjectPhysicalid],primitives:[{navigate_to_sr:{id:1,filter:{semantics:["1"],role:["318"]},mode:"path"}}],patterns:{ROOT_PRODUCT_PATH:[{id:1}]},attributes:[],flags:["noReturnThumbnails"],version:3,label:"FavoriteContextQuerry"},s=parseInt(n.getSetting("webapi_timeout"),10),l={data:JSON.stringify(a),timeout:s,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:t.onComplete,onFailure:t.onFailure};return r(i,l)}({ObjectPhysicalid:t.ObjectPhysicalid,onComplete:function(o){var s=e.is(o,"string")?JSON.parse(o):o;if(e.is(s.result,"array"))if(s.result.length<1)t.onComplete(i);else if(e.is(s.result[0].outputs.ROOT_PRODUCT_PATH,"array")){if(s.result[0].outputs.ROOT_PRODUCT_PATH.length<1)return i.Error=new Error("Bad length of the path of instances, it should be at least one element"),void t.onComplete(i);if(s.result[0].outputs.ROOT_PRODUCT_PATH[0].elements<1)return i.Error=new Error("Bad length of the path of instances, it should be at least one element"),void t.onComplete(i);var l=s.result[0].outputs.ROOT_PRODUCT_PATH[0].elements[0],c=s.result[0].outputs.ROOT_PRODUCT_PATH[0].elements;if("VPMRepInstance"===l["ds6w:type"]||"VPMInstance"===l["ds6w:type"]){var u={input_physical_ids:[l.physicalid],primitives:[{navigate_from_rel:{id:1}}],patterns:{ROOT_PRODUCT:[{id:1,iter:1}]},attributes:[],flags:["noReturnThumbnails"],version:3,label:"FavoriteContextInfosQuerry"},d=parseInt(n.getSetting("webapi_timeout"),10),p={data:JSON.stringify(u),timeout:d,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(n){var o=e.is(n,"string")?JSON.parse(n):n;e.is(o.result,"array")?o.result.length<1?t.onComplete(i):e.is(o.result[0].outputs.ROOT_PRODUCT,"array")?(o.result[0].outputs.ROOT_PRODUCT.length<1||(l=o.result[0].outputs.ROOT_PRODUCT[0],i.PathOfInstances=c,i.RootObject=l),t.onComplete(i)):t.onComplete(i):t.onComplete(i)},onFailure:t.onFailure};return r(a,p)}i.RootObject=l,t.onComplete(i)}else t.onComplete(i);else t.onComplete(i)},onFailure:t.onFailure})},getFilters:function(t){if(!e.is(t.ObjectPhysicalid,"string"))throw new Error("No onComplete defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");var i=parseInt(n.getSetting("webapi_timeout"),10),a=o.get3DSpaceUrl()+"/cvservlet/navigate?SecurityContext=preferred",s={input_physical_ids:[t.ObjectPhysicalid],primitives:[{navigate_to_sr:{id:1,filter:{semantics:["4"],role:["319"]},mode:"first"}}],patterns:{FILTERS:[{id:1}]},attributes:[],flags:["noReturnThumbnails"],version:3,label:"FavoriteContextQuerryFilter"},l={data:JSON.stringify(s),timeout:i,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:t.onComplete,onFailure:t.onFailure};return r(a,l)}}}));