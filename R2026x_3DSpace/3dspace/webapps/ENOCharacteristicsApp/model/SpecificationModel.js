define("DS/ENOCharacteristicsApp/model/SpecificationModel",["DS/SpecGridView/model/GridItemModel","DS/ENOCharacteristicsApp/utils/Constants","DS/WebappsUtils/WebappsUtils","DS/ENOCharacteristicsApp/model/CharacteristicsModel","DS/XSRCommonComponents/utils/Utils","i18n!DS/ENOCharacteristicsApp/assets/nls/ENOCharacteristicsApp"],(function(t,e,i,s,o,r){"use strict";return class extends t{constructor(t){super(),this.appCore=t.appCore;let e={title:"",description:"",notes:"",revision:"",maturity:"",type:"",category:"",lastRevision:"",relationshipActualName:"",relationship:"",nextRevisionID:""};Object.keys(e).forEach((t=>{Object.defineProperty(this.options.grid,t,{value:e[t],writable:!0,enumerable:!0,configurable:!0})}))}getTreeModel(){return this.options.label=this.getType(),this.updateOptions(this.options),this}getParentMaturityState(){return this.appCore.specRouteManager.getActiveSpecItem().getMaturityActualName()}getTitle(){return this.options.grid.title}setTitle(t){this.options.grid.title=t}getDescription(){return this.options.grid.description}setDescription(t){this.options.grid.description=t}getNotes(){return this.options.grid.notes}setNotes(t){this.options.grid.notes=t}getRevision(){return this.options.grid.revision}setRevision(t){this.options.grid.revision=t}getMaturity(){return this.options.grid.maturity}setMaturity(t){super.setMaturity(t),this.options.grid.maturity=t}setMaturityActualName(t){super.setMaturityActualName(t)}getCategory(){return this.options.grid.category}getType(){return this.options.grid.type}setCategory(t){this.options.grid.category=t}setType(t){this.options.grid.type=t}getName(){return this.options.grid.name}setName(t){super.setName(t),this.options.grid.name=t}getTree(){return this.options.grid.tree}setTree(t){this.setLabel(t),this.options.grid.tree=this.options.grid["ds6w:label"]=t}getRelationship(){return this.options.grid.relationship}setRelationship(t){this.options.grid.relationship=t}getRelationshipActualName(){return this.options.grid.relationshipActualName}setRelationshipActualName(t){this.options.grid.relationshipActualName=t}getNextRevisionID(){return this.options.grid.nextRevisionID}setNextRevisionID(t){this.options.grid.nextRevisionID=t}isLastRevision(){return this.options.grid.lastRevision}setLastRevision(t){this.options.grid.lastRevision=t}setTypeIcon(){var t=i.getWebappsAssetUrl("ENOCharacteristicsApp","icons/32/I_PerformanceSpecificationGrid.png");this.options.grid.typeIcon.push(t),this.options.icons.push(t)}canBeRevised(){return this.isReleased()||this.isObsolete()}isDerivedSpec(){return this.options.grid.isDerivedSpec}setIsDerivedSpec(t){this.options.grid.isDerivedSpec=t,this.options.color=t?"#78befa":"#005685"}getPreviousRevisionID(){return this.options.grid.previousRevisionID}setPreviousRevisionID(t){return this.options.grid.previousRevisionID=t}setAdditionalAttributes(t){this.options.grid.additionalAttributes=t}getAdditionalAttributes(){this.options.grid.additionalAttributes}setExtensions(t){this.options.grid.extensions=t}getExtensions(){this.options.grid.extensions}set(t){let i=t.physicalid||"",s=t.policy||e.POLICY_PERFORMANCE_SPEC,o=t.relationship||e.REL_PERFORMANCE_SPEC,r=t.name||"",n=t.type||"",a=t.typeDisplayName||n,p=t.relationshipDisplayName||o,h=t.policyDisplayName||s,l=t.additionalAttributes||"",d=t.extensions||"";if(!(i&&n&&s))throw"Required data is missing";return this.setPhysicalId(i),this.setTypeActualName(n),this.setPolicyActualName(s),this.setRelationshipActualName(o),this.setName(r),this.setPolicy(h),this.setRelationship(p),this.setType(a),this.setAdditionalAttributes(l),this.setExtensions(d),this.setTypeIcon(),this.syncModel(t),this.updateOptions(this.options),this}syncModel(t){let i=this,n=t.title||this.getTitle()||"";this.setTitle(n);let a=t.description||this.getDescription()||"";this.setDescription(a);let p=t.notes||this.getNotes()||"";this.setNotes(p);let h=t.revision||this.getRevision()||"";this.setRevision(h);let l=t.derived||!1;this.setIsDerivedSpec(l);let d=t.current||this.getMaturityActualName()||"";this.setMaturityActualName(d);let c="";switch(d){case e.MATURITY_IN_WORK:c=r.MATURITY_IN_WORK?r.MATURITY_IN_WORK:"In Work";break;case e.MATURITY_FROZEN:c=r.MATURITY_FROZEN?r.MATURITY_FROZEN:"Frozen";break;case e.MATURITY_RELEASED:c=r.MATURITY_RELEASED?r.MATURITY_RELEASED:"Released";break;case e.MATURITY_OBSOLETE:c=r.MATURITY_OBSOLETE?r.MATURITY_OBSOLETE:"Obsolete"}this.setMaturity(c);let u=t.typeDisplayName||this.getTree()||"";this.setType(u),this.setTree(u);let g=t.category||"";this.setCategory(g);let y=t["next.physicalid"]||this.getNextRevisionID()||null;this.setNextRevisionID(y);let R=!this.getNextRevisionID();this.setLastRevision(R);let m=t["previous.physicalid"]||this.getPreviousRevisionID()||null;this.setPreviousRevisionID(m),t.characteristics&&(this.hasChildren()||(this.removeChildren(),t.characteristics.sort(((t,e)=>{const i=parseInt(t.sequence),s=parseInt(e.sequence);return i<s?-1:i>s?1:0})),t.characteristics.forEach((t=>{let e=new s({appCore:i.appCore}).set(t);this.addChild(e)})),this.expand())),t.additionalAttributes&&i.appCore.defaultExtensionAttributes&&i.appCore.defaultExtensionAttributes.forEach((function(e){if(t.additionalAttributes.hasOwnProperty(e.name)){let s=e.extension+"||"+e.name,r=s+"_type",n=t.additionalAttributes[e.name],a=e.mandatory;e.rangevalue&&"timestamp"!==e.type?n=Array.isArray(n)?n.map((t=>e.rangevalue[t])):e.rangevalue[n]:e.rangevalue&&"timestamp"===e.type&&(n=Array.isArray(n)?n.map((t=>o.formatDate(t))):o.formatDate(n)),i.options.grid[s]=n,i.options.grid[r]=e.type,i.options.grid.mandatory=a}else if(t.extensions&&t.extensions.includes(e.extension)&&e.multiValue){let t=e.extension+"||"+e.name,s=t+"_type",o=[],r=e.mandatory;i.options.grid[t]=o,i.options.grid[s]=e.type,i.options.grid.mandatory=r}}))}}}));