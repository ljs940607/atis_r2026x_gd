define("DS/ENOCharacteristicsApp/model/TreeDocument",["UWA/Core","UWA/Class","DS/TreeModel/TreeDocument"],(function(e,t,i){"use strict";return i.extend({_charRefModels:[],init:function(e){this._parent(e)},getSelectedNodes:function(){for(var e=[],t=this._xso.get(),i=0;i<t.length;i++){var r=t[i];r._canBeGrouped()&&e.push(r)}return e},setLayoutInstance:function(e){this.gridLayout=e},removeRoot:function(e){var t;e&&e.getParent()&&(t=e.getParent()),this._parent(e),this.acceptChanges(),t.getChildren()&&this._updateGroupedRowCount(t),this._recursiveRemoveEmptyParent(t)},_updateGroupedRowCount:function(e){var t=e.getChildren().length;if(t>0){var i=e.options.label,r=(i?i.split("("):[])[0]+"("+t+")",n={label:r,grid:{tree:r}};e.updateOptions(n)}},_recursiveRemoveEmptyParent:function(e){e&&e.getParent()&&!e.getChildren()&&this.removeRoot(e)},groupRoots:function(e){var t=this;e.updateGroupingNodeOptions=function(e){var i=this.getProperty(),r=t.gridLayout.getColumnOptionValue(i,"hideColNameOnGroup")?"":t.gridLayout.getColumnOptionValue(i,"text"),n=(r?r+": ":"")+(this.getIdentifier().label?this.getIdentifier().label:this.getIdentifier())+" ("+this.getNumberOfVisibleChildren()+")",o={label:n,grid:{tree:n}};this.updateOptions(o)},this._parent(e);var i=e.propertiesToGroup;if(i){widget.setValue("char-grid-propertiesToGroup",i)}},acceptChanges:function(){this._charRefModels=[],this._parent()},cancelChanges:function(){this._charRefModels=[],this._parent()}})}));