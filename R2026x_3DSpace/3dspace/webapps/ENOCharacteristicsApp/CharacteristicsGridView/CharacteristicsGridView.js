define("DS/ENOCharacteristicsApp/CharacteristicsGridView/CharacteristicsGridView",["UWA/Core","UWA/Class","DS/ENOCharacteristicsApp/CharacteristicsGridView/controller/CharacteristicsGridViewManager","DS/ENOCharacteristicsApp/CharacteristicsGridView/controller/CharGridToolBar","DS/ENOCharacteristicsApp/model/CharacteristicsTreeDocument","DS/XSRCommonComponents/utils/TypeUtils","css!DS/ENOCharacteristicsApp/CharacteristicsGridView/CharacteristicsGridView.css"],(function(e,t,i,r,a,s){"use strict";return t.extend({init:function(t){this._parentView=t,this.appCore=t.appCore,this.currentTabKey=t.currentTabKey,this.itemId=t.itemId,this.enableCrossWidgetFeature=t.enableCrossWidgetFeature,this.enableInteractiveRightPanel=t.enableInteractiveRightPanel,this.container=t.container,this.modelEvents=t.modelEvents,this.parentModel=t.parentModel,this.toolbarContainer=e.createElement("div",{id:"chargrid-toolbar"}).inject(this.container);var s={modelEvents:this.modelEvents,container:this.container,appCore:this.appCore};this.toolbar=new r(s);var n=e.createElement("div",{id:"chargrid"}).inject(this.container),o=this,d={modelEvents:o.modelEvents,enableRightInteractivity:o.enableInteractiveRightPanel,enableCrossWidgetFeature:o.enableCrossWidgetFeature,currentTabKey:o.currentTabKey,appCore:o.appCore,parentModel:o.parentModel};this.gridTreeDocument=new a(d),this.model=this.gridTreeDocument.getTreeDocuments(),this.gridManager=new i({container:n,itemId:o.itemId,modelEvents:o.modelEvents,model:this.model,appCore:o.appCore,currentTabKey:o.currentTabKey})},setColumns:function(e){return this.gridManager.setColumns(e)},addColumn:function(e,t){this.gridManager.addColumn(e,t)},removeColumns:function(){},addChildColumns:function(e,t){this.gridManager.addChildColumns(e,t)},getGridViewInstance:function(){return this.dataGrid},unselectAll:function(){this.model.unselectAll()},addRootNodes:function(e,t){e&&this.gridTreeDocument.addRoot(e,t)},removeRootNodes:function(e){if(e)if(s.isPerformanceCharacteristics(e[0].getTypeActualName())){var t=e[0].getParent(),i=this;e.forEach((function(e){t.removeChild(e),i.gridManager.grid.getTreeDocument().acceptChanges()}))}else this.gridTreeDocument.removeRoot(e)},setRootNodes:function(e){return this.gridManager.setRootNodes(e)},groupRoots:function(e){this.gridManager.grid.groupRows({dataIndexesToGroup:e})},render:function(e){return this.gridManager.drawGrid(e)},checkAndUpdatePersistency:function(){var e=widget.getValue("char-grid-propertiesToGroup"),t="char-grid-first-load-group",i=widget.getValue(t);if(e&&e.length>0)this.groupRoots(e);else if(!i){this.groupRoots(["charCategory"]),widget.setValue(t,"char-grid-grouping-already-set")}},highlightCell:function(e,t){return this.gridManager.highlightCell(e,t)},exportGrid:function(e){var t={fileName:e?e+".csv":NLS.label_Characteristics+"_"+(new Date).toString().split(" ").splice(1,4).join(" ")+".csv",columnSeparator:widget.getValue("column-seperator")};this.gridManager.exportCSV(t)},hide:function(){this.container.setStyle("display","none")},show:function(){this.container.setStyle("display","block")},personalize:function(){this.gridManager&&this.gridManager.personalizeColumns()},setToolBarActions:function(e){var t=e.actions;t=this.updateToolbarCmdsStatus(t),this.toolbar.setActions(t),this.toolbar.setCurrentModel(this.model),this.toolbar.setCurrentView(this.gridManager.grid),this.toolbar.draw(this.toolbarContainer)},updateToolbarCmdsStatus(e){if(this.parentModel&&!this.getMaturityBasedDisabledCommands(this.parentModel.getMaturityActualName()))return e;const t=new Set(this.getMaturityBasedDisabledCommands(this.parentModel.getMaturityActualName()));for(let i of e)i.disabled=t.has(i.key);return e},getMaturityBasedDisabledCommands:function(e){switch(e){case"RELEASED":case"OBSOLETE":case"FROZEN":return["add"];default:return[]}},destroy:function(){this.toolbar.destroy(),this.container.destroy(),this.gridManager&&this.gridManager.destroy(),this.subs&&this.modelEvents.unsubscribeList(this.subs)}})}));