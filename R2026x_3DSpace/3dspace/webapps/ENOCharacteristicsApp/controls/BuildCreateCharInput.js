define("DS/ENOCharacteristicsApp/controls/BuildCreateCharInput",["UWA/Core","UWA/Class","DS/ENOCharacteristicsApp/utils/CharacteristicsValidation","DS/ENOCharacteristicsApp/utils/Constants","DS/ENOCharacteristicsApp/utils/Notification","i18n!DS/ENOCharacteristicsApp/assets/nls/ENOCharacteristicsApp"],(function(e,t,i,n,a,r){"use strict";return t.extend({init:function(e){this.formFields=e.formFields,this.parentId=e.parentId,this.testMethods=e.testMethods,this.isRoutineReleaseLimitsDisabled=e.isRoutineReleaseLimitsDisabled,this.isSpecificationLimitsDisabled=e.isSpecificationLimitsDisabled},setRequestInputs:function(e){var t=this,i=e.allowedValueList,s={isAggregated:!0};if(s.type=t.getInput("Type"),s.parameterTemplate=t.getInput("ParameterTemplate"),s.title=t.getInput(n.KEY_TITLE),t.getInput("Type")===n.MEASUREMENT_CHAR){var I=t.getInput(n.KEY_DIMENSIONTEXT);I&&(s.dimension=I==r.label_ArbitraryUnit?n.ARBITRARY_UNIT:I)}t.dbDimensionList;if(t.getInput("Type")===n.MEASUREMENT_CHAR){var p=t.getInput(n.DISPLAY_UNIT)||t.getInput(n.DISPLAY_UNIT_TEXT);s.storageUnit=p}t.getInput(n.LOWER_TARGET),t.getInput(n.UPPER_TARGET);s.multiple=i||[],s.overrideAllowedOnChild=!0,s.ObjectID=t.parentId,s.title=t.getInput(n.KEY_TITLE),s.name="",s.description=t.getInput(n.DESCRIPTION),s.priority=parseInt(t.getInput(n.PRIORITY));var o=t.formFields.TestMethod.inputfield.selectedItems,u=[];if(o&&o.length>0)for(var l=0;l<o.length&&o[l]._options.value;l++)u.push(o[l]._options.value);s.testMethods=u,t.getInput("Type")===n.MEASUREMENT_CHAR?(s.min=t.getInput(n.LOWER_TARGET),s.isMinIncluded=!!t.getInput(n.LOWER_INCl),s.target=t.getInput(n.TARGET),s.max=t.getInput(n.UPPER_TARGET),s.isMaxIncluded=!!t.getInput(n.UPPER_INCl)):s.target=t.getInput("TargetNew");if(s.dimension){if(s.min&&s.target&&s.min===s.target&&s.minIncluded===n.FALSE)return a.clearNotifications(),void a.displayNotification({eventID:"error",msg:r.Message_TargetLowerUpperInclusive});if(s.max&&s.target&&s.max===s.target&&s.maxIncluded===n.FALSE)return a.clearNotifications(),void a.displayNotification({eventID:"error",msg:r.Message_TargetLowerUpperInclusive});if(s.minIncluded===n.TRUE&&""===s.min||s.maxIncluded===n.TRUE&&""===s.max)return a.clearNotifications(),void a.displayNotification({eventID:"error",msg:r.Message_AcceptanceLimitEmptyCheck});if(s.min===s.max&&""===s.target&&s.minIncluded===n.FALSE&&s.maxIncluded===n.FALSE&&""!=s.min&&""!=s.max)return a.clearNotifications(),void a.displayNotification({eventID:"error",msg:r.Message_LowerUpper_TargetEmpty})}if(I===n.DIMENSION_BOOLEAN){var c=t.getInput(n.ALT_TARGET);s.target=c===n.YES?n.TRUE:n.FALSE||n.FALSE}if(I===n.DIMENSION_SUBJECTIVITY){var d=s.multiple;if(""===s.target||s.multiple===[]||""===s.comparedToStd)return a.clearNotifications(),void a.displayNotification({eventID:"error",msg:r.Message_SubjectivityEmptyError});if(s.multiple){var g=d.length;if(g>1&&g%2==0)return a.clearNotifications(),void a.displayNotification({eventID:"error",msg:r.Message_BadAllowedValueSize})}if(d&&s.target&&!d.includes(s.target))return a.clearNotifications(),void a.displayNotification({eventID:"error",msg:r.Message_SubTargetNotIncl_Allowed_Error})}return I!==n.DIMENSION_REAL&&I!==n.DIMENSION_INTEGER||(s.storageUnit=t.getInput(n.ALT_DISPLAY_UNIT)),t.getInput("Type")===n.MEASUREMENT_CHAR&&(s.precision=t.getInput(n.PRICISION)||t.getInput(n.PRICISION_TEXT),this.isSpecificationLimitsDisabled||(s.lowerSpecificationLimit=t.getInput(n.LOWER_SPECIFICATION_LIMIT),s.upperSpecificationLimit=t.getInput(n.UPPER_SPECIFICATION_LIMIT),s.isLowerSpecificationLimitIncluded=!!t.getInput("LowerSpecificationIncluded"),s.isUpperSpecificationLimitIncluded=!!t.getInput("UpperSpecificationIncluded")),this.isRoutineReleaseLimitsDisabled||(s.lowerRoutineReleaseLimit=t.getInput(n.LOWER_ROUTINE_LIMIT),s.upperRoutineReleaseLimit=t.getInput(n.UPPER_ROUTINE_LIMIT),s.isLowerRoutineReleaseLimitIncluded=!!t.getInput("LowerRoutineIncluded"),s.isUpperRoutineReleaseLimitIncluded=!!t.getInput("UpperRoutineIncluded"))),s.notes=t.getInput(n.CHAR_NOTES),s.missedTargetAction=t.getInput(n.MISSED_TARGET_ACTION),s},getInput:function(e){var t=[],i=this.formFields[e].inputfield;if(Array.isArray(i)){for(var n=0;n<i.length;n++)i[n].checkFlag?t.push(i[n].checkFlag):i[n].value?t.push(i[n].value.trim()):t.push("");return t}return i.checkFlag?t=i.checkFlag:i.value&&"string"==typeof i.value?t=i.value.trim():"number"==typeof i.value?t=i.value:"object"==typeof i.value&&"ParameterTemplate"==e?i.value.uri&&(t=i.value.uri):t=""==i.value&&"TargetNew"==e?"":void 0,t}})}));