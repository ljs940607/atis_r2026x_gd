define("DS/ENOCharacteristicsApp/utils/CharacteristicsUtils",["UWA/Class","DS/ENOCharacteristicsApp/utils/Constants","DS/WebappsUtils/WebappsUtils","DS/XSRCommonComponents/utils/RequestUtil","i18n!DS/ENOCharacteristicsApp/assets/nls/ENOCharacteristicsApp"],(function(e,i,t,a,n){return e.singleton({allDimensionSet:{},dimensionNameToIdMap:{},dimensionDisplayUnitMap:{},missedTargetActionMap:{},extensionsInfo:{},dimensionIdToObjMap:{},displayUnitIdToObjMap:{},dimensionId_uomValue_To_uomId:{},allTypeSet:{},allTypeList:[],allTypeMap:{},parameterTemplates:{},arbitraryUnits:{},processDimensionDisplayUnit:function(){for(var e=0;e<this.allDimensionSet.length;e++){var i=this.allDimensionSet[e],t=i.id,a=i.displayName;this.dimensionNameToIdMap[a]=t,this.dimensionIdToObjMap[t]=i;var r=i.units,s={};if(r&&r.length>0){for(var o=0;o<r.length;o++){var l=r[o],p=l.id,c=l.displayName;this.displayUnitIdToObjMap[p]=l,s[c]=l,this.dimensionId_uomValue_To_uomId[t+":"+c]=p}this.dimensionDisplayUnitMap[t]=s}}this.dimensionIdToObjMap.USER_DEFINED_UNIT=n.label_OtherDimension,this.dimensionNameToIdMap[n.label_OtherDimension]="USER_DEFINED_UNIT",this.missedTargetActionMap[n.label_NoActionRequired]="No Action Required",this.missedTargetActionMap[n.label_HoldandRetest]="Hold and Retest",this.missedTargetActionMap[n.label_ShipandMonitor]="Ship and Monitor"},processTemplatesAndArbitraryUnits:function(e){let i=this;i.parameterTemplates={},i.arbitraryUnits={},e.parameters&&e.parameters.forEach((e=>{i.parameterTemplates[e.uri]=e})),e.units&&e.units.forEach((e=>{i.arbitraryUnits[e.uri]=e}))},getArbitraryUnitURIByName:function(e){let i=this,t="";return Object.keys(i.arbitraryUnits).forEach((a=>{let n=i.arbitraryUnits[a];n&&n.symbolNLS===e&&(t=a)})),t},getStorageUnitObjForArbitraryUnit:function(e){return{displayName:this.arbitraryUnits[e].symbolNLS,name:this.arbitraryUnits[e].symbolNLS,id:e}},getLanguage:function(){if(this.mLanguage)return this.mLanguage;try{if(window.parent&&window.parent.dsLang)return window.parent.dsLang;if(widget)return widget.lang}catch(e){}return"en"},getDisplayUnit:function(e){if(this.dimensionDisplayUnitMap)return this.dimensionDisplayUnitMap[e]},getDBDisplayUnit:function(e,i){if(i)return i[e]},isTouchDevice:function(){return"ontouchstart"in document.documentElement},downloadCSV:function(e,i){var t="";a.getLanguage();t="\ufeff",t+=e;var n=this.convertNumberAsText(t),r={blob:new Blob(["\ufeff"+n],{type:"text/csv;charset=utf-8"}),fileName:i,mimeType:"text/csv;charset:utf-8",isCSV:!0};this.downloadFileonBrowser(r)},convertNumberAsText:function(e){return e.split("\n").map((e=>e.split(","))).map((e=>e.map((e=>/^-?\d*\.?\d+$/.test(e)||/^-?\d+e[+-]?\d+$/i.test(e)?`="${e}"`:e)))).map((e=>e.join(","))).join("\n")},downloadFileonBrowser:function(e){if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e.blob,e.fileName);else{var i=window.URL.createObjectURL(e.blob);if(a.isSafarionIPadorPod())window.open(i,"_blank");else{var t=new UWA.Element("a",{href:i,download:e.fileName}).inject(document.body);t.hide(),t.click(),setTimeout((function(){t.destroy(),window.URL.revokeObjectURL(i)}),100)}}},getIconForChar:function(e){return t.getWebappsAssetUrl("ENOCharacteristicsApp","icons/32/"+e+".png")},getImageForChar:function(e){return t.getWebappsAssetUrl("ENOCharacteristicsApp","images/"+e+".png")},emptyMsg:function(e){var i=UWA.createElement("div",{class:"grid-empty-tile wux-datagridview-emptycontentmessage char-grid"}),t=UWA.createElement("div");t.innerHTML="No Objects Found",t.inject(i),i.inject(e)},hideUnhideToggle:function(e,i){"hide"===i?e.forEach((function(e){e.fieldControl.elements.container.classList.add("xsr-char-hidden")})):"unhide"===i&&e.forEach((function(e){e.fieldControl.elements.container.classList.remove("xsr-char-hidden")}))},createSpecData:function(e,t){let a=this,r={};return r.title=e.title,r.description=e.description,r.notes=e.notes,r.current=i.MATURITY_IN_WORK,r.currentDisplayName=n.StateInWork,r.revision="1",r.type=e.type,r.typeDisplayName=a.allTypesMap[e.type],r.physicalid=e.physicalid,t.extensions&&(a.addExtensionAttribInfo(r,t),a.addExtensions(r,t)),r},addExtensionAttribInfo:function(e,i){let t=i.extensions.map((e=>e.name));i.appCore.defaultExtensionAttributes.forEach((i=>{t.includes(i.extension)&&((e.additionalAttributes=e.additionalAttributes||{})[i.name]=i.defaultValue)}))},addExtensions:function(e,i){e.extensions=i.extensions.map((e=>e.name))},createCharData:function(e,i){let t=this,a={};return a.title=e.title,a.parameterTemplate=e.parameterTemplate,a.description=e.description,a.notes=e.notes,a.category=e.category,a.dimension=e.dimension,a.displayUnit=e.storageUnit,a.current=n.StateExists,a.revision="1",a.type=e.type,a.physicalId=e.physicalId,a.physicalID=e.physicalId,a.min=e.min,a.max=e.max,a.lowerSpecificationLimit=e.lowerSpecificationLimit,a.upperSpecificationLimit=e.upperSpecificationLimit,a.target=e.target,a.lowerRoutineReleaseLimit=e.lowerRoutineReleaseLimit,a.upperRoutineReleaseLimit=e.upperRoutineReleaseLimit,a.priority=isNaN(e.priority)?"":e.priority,a.missedTargetAction=e.missedTargetAction,a.charPrecision=e.precision,a.isMinIncluded=e.isMinIncluded,a.isMaxIncluded=e.isMaxIncluded,a.isLowerRoutineReleaseLimitIncluded=e.isLowerRoutineReleaseLimitIncluded,a.isUpperRoutineReleaseLimitIncluded=e.isUpperRoutineReleaseLimitIncluded,a.isLowerSpecificationLimitIncluded=e.isLowerSpecificationLimitIncluded,a.isUpperSpecificationLimitIncluded=e.isUpperSpecificationLimitIncluded,a.testMethods=[],e.testMethods.forEach((function(i){a.testMethods.push({physicalid:i,name:e.testMethodsData.get(i).name,title:e.testMethodsData.get(i).title})})),i.extensions&&(t.addExtensionAttribInfo(a,i),t.addExtensions(a,i)),a},createDupCharData:function(e){var i={};return i.title=e.title,i.parameterTemplate=e.parameterTemplate,i.description=e.description,i.notes=e.notes,i.category=e.category,i.dimension=e.dimension,i.displayUnit=e.storageUnit,i.uom=e.displayUnit,i.current=n.StateExists,i.revision="1",i.type=e.type,i.physicalId=e.physicalid,i.physicalID=e.physicalid,i.min=e.min,i.max=e.max,i.lowerSpecificationLimit=e.lowerSpecificationLimit,i.upperSpecificationLimit=e.upperSpecificationLimit,i.target=e.target,i.lowerRoutineReleaseLimit=e.lowerRoutineReleaseLimit,i.upperRoutineReleaseLimit=e.upperRoutineReleaseLimit,i.priority=isNaN(e.priority)?"":e.priority,i.missedTargetAction=e.missedTargetAction,i.charPrecision=e.precision,i.isMinIncluded=e.isMinIncluded,i.isMaxIncluded=e.isMaxIncluded,i.isLowerRoutineReleaseLimitIncluded=e.isLowerRoutineReleaseLimitIncluded,i.isUpperRoutineReleaseLimitIncluded=e.isUpperRoutineReleaseLimitIncluded,i.isLowerSpecificationLimitIncluded=e.isLowerSpecificationLimitIncluded,i.isUpperSpecificationLimitIncluded=e.isUpperSpecificationLimitIncluded,i.sequence=e.sequence,i.additionalAttributes=e.additionalAttributes,i.testMethods=[],i.requirements=[],e.testMethods&&e.testMethods.forEach((function(e){i.testMethods.push({physicalid:e.physicalid,name:e.name,title:e.title})})),e.requirements&&e.requirements.forEach((function(e){i.requirements.push({physicalid:e.physicalid,name:e.name,title:e.title})})),i},CharLimitsValidation:function(e){var i=this,t=!0,a="validation Passed",r=e.getLowerSpecificationLimit()?parseFloat(e.getLowerSpecificationLimit()):"",s=e.getUpperSpecificationLimit()?parseFloat(e.getUpperSpecificationLimit()):"",o=e.getLowerTarget()?parseFloat(e.getLowerTarget()):"",l=e.getUpperTarget()?parseFloat(e.getUpperTarget()):"",p=e.getLowerRoutineReleaseLimit()?parseFloat(e.getLowerRoutineReleaseLimit()):"",c=e.getUpperRoutineReleaseLimit()?parseFloat(e.getUpperRoutineReleaseLimit()):"",u=e.getDisplayTarget()?parseFloat(e.getDisplayTarget()):"",d=e.isLowerTargetIncluded(),m=e.isUpperTargetIncluded(),g=e.isLowerRoutineIncluded(),h=e.isUpperRoutineIncluded(),f=e.isLowerSpecificationIncluded(),L=e.isUpperSpecificationIncluded();if(isNaN(e.getLowerSpecificationLimit())||isNaN(e.getUpperSpecificationLimit())||isNaN(e.getLowerTarget())||isNaN(e.getUpperTarget())||isNaN(e.getLowerRoutineReleaseLimit())||isNaN(e.getUpperRoutineReleaseLimit())||isNaN(e.getDisplayTarget())||e.getLowerSpecificationLimit().contains(".")&&e.getLowerSpecificationLimit().lastIndexOf(".")+1===e.getLowerSpecificationLimit().length||e.getUpperSpecificationLimit().contains(".")&&e.getUpperSpecificationLimit().lastIndexOf(".")+1===e.getUpperSpecificationLimit().length||e.getLowerTarget().contains(".")&&e.getLowerTarget().lastIndexOf(".")+1===e.getLowerTarget().length||e.getUpperTarget().contains(".")&&e.getUpperTarget().lastIndexOf(".")+1===e.getUpperTarget().length||e.getLowerRoutineReleaseLimit().contains(".")&&e.getLowerRoutineReleaseLimit().lastIndexOf(".")+1===e.getLowerRoutineReleaseLimit().length||e.getUpperRoutineReleaseLimit().contains(".")&&e.getUpperRoutineReleaseLimit().lastIndexOf(".")+1===e.getUpperRoutineReleaseLimit().length||e.getDisplayTarget().contains(".")&&e.getDisplayTarget().lastIndexOf(".")+1===e.getDisplayTarget().length)return{isValidated:!1,msg:n.ErrRealAndNumeric};let w={upperValue:s,upperInclusive:L,lowerValue:r,lowerInclusive:f},I={upperValue:c,upperInclusive:h,lowerValue:p,lowerInclusive:g},y={upperValue:l,upperInclusive:m,target:u,lowerValue:o,lowerInclusive:d};return a=(t=!!(t=i.validateRangeObj(w,!1))&&i.validateRangeObj(I,!1))?"":n.Message_ValidateUpperLowerValue,a=(t=!!t&&i.validateRangeObj(y,!0))||a?a:n.Message_ValidateAcceptanceValues,a=(t=!!t&&i.compareRangeObj(w,I,!1))||a?a:n.Message_RoutineWithInSpecLimits,a=(t=!!t&&i.compareRangeObj(w,y,!0))||a?a:n.Message_AcceptanceWithInSpecLimits,{isValidated:t=!!t&&i.compareRangeObj(I,y,!0),msg:a=t||a?a:n.Message_AcceptanceWithInRoutineLimits}},validateRangeObj:function(e,i){let t=!0;return e.upperValue&&e.lowerValue&&(t=!!(e.upperInclusive&&e.lowerInclusive&&e.lowerValue<=e.upperValue)||e.lowerValue<e.upperValue),i&&t&&e.target&&(e.lowerValue&&(t=!!(e.lowerInclusive&&e.lowerValue<=e.target||!e.lowerInclusive&&e.lowerValue<e.target)),e.upperValue&&t&&(t=!!(e.upperInclusive&&e.upperValue>=e.target||!e.upperInclusive&&e.upperValue>e.target))),t},compareRangeObj:function(e,i,t){let a=!0;return e.upperValue&&(i.upperValue||i.lowerValue)&&(i.upperValue&&(a=!!((e.upperInclusive||!e.upperInclusive&&!i.upperInclusive)&&e.upperValue>=i.upperValue||e.upperValue>i.upperValue)),i.lowerValue&&a&&(a=!!(e.upperInclusive&&i.lowerInclusive&&e.upperValue>=i.lowerValue||e.upperValue>i.lowerValue))),e.lowerValue&&(i.upperValue||i.lowerValue)&&a&&(i.upperValue&&(a=!!(e.lowerInclusive&&i.upperInclusive&&e.lowerValue<=i.upperValue||e.lowerValue<i.upperValue)),i.lowerValue&&a&&(a=!!((e.lowerInclusive||!e.lowerInclusive&&!i.lowerInclusive)&&e.lowerValue<=i.lowerValue||e.lowerValue<i.lowerValue))),t&&i.target&&a&&(e.upperValue&&(a=!!(e.upperInclusive&&e.upperValue>=i.target||e.upperValue>i.target)),e.lowerValue&&a&&(a=!!(e.lowerInclusive&&e.lowerValue<=i.target||e.lowerValue<i.target))),a},disableEditableContainers:function(){document.querySelectorAll(".uom-container-perf-spec").forEach((function(e){e.addClassName("xsr-hide-container")})),document.querySelectorAll(".uom-container-read-only").forEach((function(e){e.hasClassName("xsr-hide-container")&&e.removeClassName("xsr-hide-container")})),document.querySelectorAll(".routine-edit-container").forEach((function(e){e.addClassName("xsr-hide-container")})),document.querySelectorAll(".routine-limits-container-read-only").forEach((function(e){e.hasClassName("xsr-hide-container")&&e.removeClassName("xsr-hide-container")})),document.querySelectorAll(".specification-edit-container").forEach((function(e){e.addClassName("xsr-hide-container")})),document.querySelectorAll(".specification-limits-container-read-only").forEach((function(e){e.hasClassName("xsr-hide-container")&&e.removeClassName("xsr-hide-container")}))}})}));