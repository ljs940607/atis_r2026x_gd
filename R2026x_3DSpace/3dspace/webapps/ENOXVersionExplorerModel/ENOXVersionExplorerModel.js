define("DS/ENOXVersionExplorerModel/VersionTreeDocumentModel",["DS/LifecycleDAGModel/DAGDocumentModel","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/LifecycleDAGUtils/ArrayFunctions"],(function(t,i,e){return t.extend({init:function(t){this._parent(t),this.highlightedLinks=[]},usePersistentColor:function(){return!0!==this.persistentColor&&i.historyConfig&&i.historyConfig.settings&&i.historyConfig.settings.thumbnailGraph&&"true"===i.historyConfig.settings.thumbnailGraph.persistentColor&&(this.persistentColor=!0),this.persistentColor},highlightLink:function(t){Array.isArray(t)&&2===t.length&&(this.highlightedLinks.push(t),this._trueRoot._modelEvents.publish({event:"highlightLink",data:e.intersectionDifference(this._nodeList,t,(function(t,i){return t.options.id===i}))[0].intersection}));for(var i=null,n=0;n<this._nodeList.length;n++)t[1]==this._nodeList[n]._options.id&&this._nodeList[n]._options.copyFrom&&(i=this._nodeList[n]._options.copyFrom);if(i&&t[0]!=i){for(var o=[],s=0;s<this._nodeList.length;s++)t[0]==this._nodeList[s]._options.id&&this._nodeList[s]._options.ancestors&&o.push(this._nodeList[s]._options.ancestors[0].id);o.push(t[0]),Array.isArray(o)&&2===o.length&&(this.highlightedLinks.push(o),this._trueRoot._modelEvents.publish({event:"highlightLink",data:e.intersectionDifference(this._nodeList,o,(function(t,i){return t.options.id===i}))[0].intersection}))}},unhighlightLink:function(t){Array.isArray(t)&&2===t.length&&((o=this.highlightedLinks.findIndex((function(i){return i[0]===t[0]&&i[1]===t[1]||i[1]===t[0]&&i[0]===t[1]})))>=0&&this._trueRoot._modelEvents.publish({event:"unhighlightLink",data:e.intersectionDifference(this._nodeList,this.highlightedLinks.splice(o,1)[0],(function(t,i){return t.options.id===i}))[0].intersection}));for(var i=null,n=0;n<this._nodeList.length;n++)t[1]==this._nodeList[n]._options.id&&this._nodeList[n]._options.copyFrom&&(i=this._nodeList[n]._options.copyFrom);if(i&&t[0]!=i){for(var o,s=[],r=0;r<this._nodeList.length;r++)t[0]==this._nodeList[r]._options.id&&this._nodeList[r]._options.ancestors&&s.push(this._nodeList[r]._options.ancestors[0].id);if(s.push(t[0]),Array.isArray(s)&&2===s.length)(o=this.highlightedLinks.findIndex((function(t){return t[0]===s[0]&&t[1]===s[1]||t[1]===s[0]&&t[0]===s[1]})))>=0&&this._trueRoot._modelEvents.publish({event:"unhighlightLink",data:e.intersectionDifference(this._nodeList,this.highlightedLinks.splice(o,1)[0],(function(t,i){return t.options.id===i}))[0].intersection})}},getHighlightedLinksData:function(){var t=[],i=this;return this.highlightedLinks.length&&(t=this.highlightedLinks.reduce((function(t,n){return t.push(e.intersectionDifference(i._nodeList,n,(function(t,i){return t.options.id===i}))[0].intersection),t}),t)),t}})})),define("DS/ENOXVersionExplorerModel/VersionTreeNodeModel",["DS/LifecycleDAGModel/DAGNodeModelBase","UWA/Core"],(function(t,i){"use strict";var e=function(e,n,o,s,r,h,p,d,l,a,c){if(e)if(e instanceof t)for(var u in this.options={},e.options)"children"!==u&&(this.options[u]=i.clone(e.options[u]));else this.options={id:e,creationDate:o,fakeDate:s,ancestors:d,eStrings:l,copyFrom:h,grid:i.extend(n,{__isLeaf__:a,context:"",creationDate:o,__isActive__:!1}),label:n.title,data:{id:e,serviceId:r,contextId:p,physicalid:e,type:c,displayName:n.title,revision:n.code,name:n.title}};else this.options={isEmpty:!0};t.call(this,this.options)};return(e.prototype=Object.create(t.prototype)).constructor=e,e.prototype.isMIB=function(){return 0==this.options.grid.id.indexOf("Branch:")||0==this.options.grid.id.indexOf("branch:")||0==this.options.grid.id.indexOf("bid:")},e.prototype.isxRev=function(){return"xRevisionElement"===this.options.grid.type},e.prototype.isLeaf=function(){return!0===this.options.grid.__isLeaf__},e.prototype.isActive=function(){return!0===this.options.grid.__isActive__},e.prototype.clone=function(){return new e(this)},e.prototype.sortFunction=function(t,i){return!i&&(i=t=this),t.options.creationDate.getTime()<i.options.creationDate.getTime()},e.prototype.addMergeParent=function(i){if(i instanceof t)i=i._getID();else if("string"!=typeof i||!i.length)throw Error("VersionTreeNodeModel.addMergeAncestor:parent cannot be null");Array.isArray(this.options.ancestors)&&this.options.ancestors.findIndex((function(t){return t.id===i&&"I"===t.semantic}))<0&&this.options.ancestors.push({semantic:"I",id:i})},e.prototype._getID=function(){return this.isEmpty()?this._id:this.options.id},e.prototype.refreshNodeData=function(e){var n=!1,o=(e=e||{})instanceof t?e.options.grid:e,s={};for(var r in e.options&&e.options.eStrings&&(s=e.options.eStrings),o)if(!r.startsWith("__")||!r.endsWith("__"))if("title"===r){var h;if(!0===s[o[r]])null!==(h=o[r])&&(h=i.String.unescapeHTML(o[r]));var p=h||o.title||o.label;p&&this.options.label!==p&&(this.setAttribute("title",this.options.data.displayName=this.options.label=p),n=!0)}else if("thumbnail"===r){var d=this.options.grid[r];d||(d=""),o[r]&&o[r]!==d&&o[r].length>0?(this.setAttribute(r,o[r]),n=!0):(null==o[r]||0===o[r].length)&&d.length>0&&(this.setAttribute(r,d),n=!0)}else if(o[r]instanceof Date)(!(this.options.grid[r]instanceof Date)||o[r].getTime()!==this.options.grid[r].getTime())&&(this.setAttribute(r,o[r]),n=!0);else if(!0===s[o[r]]){var l=o[r];null!==l&&(l=i.String.unescapeHTML(o[r])),l!==this.options.grid[r]&&(this.setAttribute(r,l),n=!0)}else 0==o[r]&&"majororder"!==r&&"minororder"!==r&&"position"!==r&&"number"==typeof o[r]&&"number"==typeof this.options.grid[r]?this.setAttribute(r,"0"):o[r]===this.options.grid[r]||0==o[r]&&"0"===this.options.grid[r]||(this.setAttribute(r,o[r]),n=!0);return e.options&&Array.isArray(e.options.ancestors)&&e.options.ancestors.length&&(this.options.ancestors=e.options.ancestors),n},e.prototype.getAttribute=function(t){return this.options.grid[t]},e}));