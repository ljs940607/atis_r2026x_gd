define("DS/SpecGridView/controller/GridColumn",["DS/XSRCommonComponents/utils/Constants","DS/XSRCommonComponents/utils/Utils","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/Controls/Toggle","DS/Controls/Label","DS/XSRCommonComponents/utils/TypeUtils","DS/XSRCommonComponents/utils/RequestUtil","i18n!DS/SpecGridView/assets/nls/SpecGridView"],(function(e,t,n,a,l,i,o,r,d){"use strict";function u(e){return this}return u.prototype.process=function(u){var s=this;return u&&u.forEach((function(u){u.text=u.text,u.editableFlag&&u.forbiddenCheck&&(s.columnCharValidationList[u.dataIndex]=!0),!1!==u.exportFlag&&s.exportableColums.push(u.dataIndex),u.editableFlag&&(u.getCellEditableState=function(n){var a=n.nodeModel;return"isQS"===u.dataIndex?!s.parentModel||s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_OBSOLETE&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_OBSOLETE:o.isDrawing(a.getAttributeValue("ds6w:type_value"))?!a||a.options.maturity!==e.WELCOMEPANEL_ID_RELEASED&&a.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_RELEASED&&a.options.maturity!==e.WELCOMEPANEL_ID_OBSOLETE&&a.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_OBSOLETE:!(!a||!a.getID||t.isOriginatedInGLS(a))&&a.hasAccess("modify")}),"isQS"===u.dataIndex&&(u.getCellTypeRepresentation=function(t){var n=t.nodeModel;return!n||n.options.grid["ds6w:type_value"]!==e.PHASE&&n.options.grid["ds6w:type_value"]!==e.PROCESSINSTRUCTION?u.typeRepresentation:"string"}),"lossPercent"===u.dataIndex&&(u.getCellSemantics=function(t){if(t.nodeModel)return{pattern:e.LOSS_PATTERN}},u.getCellValueForExport=function(e){let t=e.nodeModel;if(t&&t.getID)return e.nodeModel.getLosspercent()},u.getCellEditableState=function(t){return!widget.getValue("isRecipeAssociated")&&(!s.parentModel||s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_OBSOLETE&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_OBSOLETE)}),"FormulaQunatityPercent"==u.dataIndex&&u.children.forEach((function(t){s.exportableColums.push(t.dataIndex),"minPercent"!==t.dataIndex&&"maxPercent"!==t.dataIndex&&"targetPercent"!==t.dataIndex||(t.getCellSemantics=function(t){var n=t.nodeModel;if(n&&!widget.getValue("recipeView"))return n.isWeightUnitExist?"":{pattern:e.MIN_MAX_TARGET_PATTERN}},t.getCellEditableState=function(t){return!widget.getValue("isRecipeAssociated")&&(!t.nodeModel.isWeightUnitExist&&(!s.parentModel||s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_OBSOLETE&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_OBSOLETE))}),"minPercent"!==t.dataIndex&&"maxPercent"!==t.dataIndex&&"targetPercent"!==t.dataIndex||(t.getCellValueForExport=function(e){let n=e.nodeModel;return n&&n.getID&&(widget.getValue("isRecipeAssociated")||widget.getValue("recipeView"))?n.getAttributeValue(t.dataIndex)?n.getAttributeValue(t.dataIndex):"":n&&n.isWeightUnitExist?"":n&&n.getID?n.getAttributeValue(t.dataIndex):void 0})})),"FormulaQuantityRange"===u.dataIndex&&u.children.forEach((function(t){s.exportableColums.push(t.dataIndex),"targetQuantity"!==t.dataIndex&&"minQuantity"!==t.dataIndex&&"maxQuantity"!==t.dataIndex||(t.getCellValueForExport=function(e){var t=s.grid.getColumnOrGroup(e.columnID).dataIndex;let n=e.nodeModel;if(n&&!n.isWeightUnitExist)return"";if(n&&n.getID){var a=e.nodeModel.getAttributeValue("unitNLS")?e.nodeModel.getAttributeValue("unitNLS"):"";switch(t){case"targetQuantity":case"minQuantity":case"maxQuantity":return e.nodeModel.getAttributeValue(t)?e.nodeModel.getAttributeValue(t)+" "+a:" "+a}}},t.getCellTooltip=function(e){var t,n=s.grid.getColumnOrGroup(e.columnID).dataIndex;if(null==e.nodeModel||!e.nodeModel.isWeightUnitExist)return{shortHelp:""};switch(n){case"targetQuantity":t=e.nodeModel.getAttributeValue("targetQuantity");break;case"minQuantity":t=e.nodeModel.getAttributeValue("minQuantity");break;case"maxQuantity":t=e.nodeModel.getAttributeValue("maxQuantity")}var a=e.nodeModel.getAttributeValue("unitNLS"),l=null==t||null==t?"":t;return{shortHelp:l+" "+(null==a||null==a||""==l?"":a)}},t.getCellValue=function(t){var l=s.grid.getColumnOrGroup(t.columnID).dataIndex,r=UWA.createElement("div",{class:"uom-container"}),u=t.nodeModel;if(!t.nodeModel.isWeightUnitExist)return r;if(u&&u._canBeGrouped()){if(widget.getValue("isRecipeAssociated"))var g=!1,c=!1;else g=!0,c=!0;"function"==typeof u.IsComputed&&u.IsComputed()&&(c=!1),!s.parentModel||s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_OBSOLETE&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_OBSOLETE||(c=!1);u=t.nodeModel;var p=Object.entries(o.getUOMUnits("Mass")),m=[],A=new Map;p.forEach((function(e){m.push(e[1]),A.set(e[1],e[0])})),m.sort((function(e,t){return(e=e.toLowerCase())==(t=t.toLowerCase())?0:e>t?1:-1}));var h,C=t.nodeModel.getUnitNLS();switch(l){case"targetQuantity":h=u.getAttributeValue("targetQuantity");break;case"minQuantity":h=u.getAttributeValue("minQuantity");break;case"maxQuantity":h=u.getAttributeValue("maxQuantity")}var E=null==h||null==h?"":h,M=-1;null!=C&&(M=m.indexOf(C));var v=E+" "+(null==C||null==C||""==E?"":C);"loading..."===C&&(v=d.loading,M=-1);var I=UWA.createElement("div",{class:"readonly-container",html:v}).inject(r),x=UWA.createElement("div",{class:"uom-container-edit xsr-grid-wux-hide"}).inject(r);c&&I.addEventListener("click",(function(){document.querySelectorAll(".readonly-container").forEach((e=>{e.hasClassName("xsr-grid-wux-hide")&&e.toggleClassName("xsr-grid-wux-hide")})),document.querySelectorAll(".uom-container-edit").forEach((e=>{e.hasClassName("xsr-grid-wux-hide")||e.toggleClassName("xsr-grid-wux-hide")})),I.addClassName("xsr-grid-wux-hide"),x.toggleClassName("xsr-grid-wux-hide")}));var y,b=g?"([0-9]*[.])?[0-9]+":"[0-9]+",f=new n({placeholder:d.placeholder_Quantity,value:E,pattern:b,selectAllOnFocus:!0}).inject(x);if(f.getContent().addClassName("xsr-grid-lineeditor-formula"),"targetQuantity"==l)(y=new a({elementsList:m,selectedIndex:M,placeholder:d.placeholder_UOM}).inject(x)).getContent().addClassName("xsr-grid-combobox-formula");else(y=new i({value:C,emphasize:C}).inject(x)).getContent().addClassName("xsr-grid-label-formula");switch(f.getContent().getChildren()[0].onpaste=function(e){e.preventDefault();let t=(e.clipboardData||window.clipboardData).getData("text");f.value=t},l){case"targetQuantity":f.addEventListener("change",(function(e){let n=e.dsModel.value;s.activeCellId=t.cellID;let a=y.getModel().value;""!=n&&null!=y.value?u.updateOptions({grid:{targetQuantity:n,unitNLS:a,unit:A.get(a)}}):u.updateOptions({grid:{targetQuantity:n}})}));break;case"minQuantity":f.addEventListener("change",(function(e){let n=e.dsModel.value;s.activeCellId=t.cellID;let a=y.getModel().value;""!=n&&null!=y.value?u.updateOptions({grid:{minQuantity:n,unitNLS:a,unit:A.get(a)}}):u.updateOptions({grid:{minQuantity:n}})}));break;case"maxQuantity":f.addEventListener("change",(function(e){let n=e.dsModel.value;s.activeCellId=t.cellID;let a=y.getModel().value;""!=n&&null!=y.value?u.updateOptions({grid:{maxQuantity:n,unitNLS:a,unit:A.get(a)}}):u.updateOptions({grid:{maxQuantity:n}})}))}y.addEventListener("change",(function(e){e.preventDefault(),e.stopPropagation();let n=e.dsModel.value;s.activeCellId=t.cellID,u.updateOptions({grid:{unitNLS:n,unit:A.get(n)}})})),g||(y.disabled=!0)}return s.activeCellId===t.cellID&&(I.addClassName("xsr-grid-wux-hide"),x.toggleClassName("xsr-grid-wux-hide")),r})})),"uomupdated"===u.dataIndex&&(u.getCellTooltip=function(t){if(null==t.nodeModel)return{shortHelp:t.cellModel};if("Formulated_Product"!==t.nodeModel.getAttributeValue("ds6w:type_value")&&o.isPhyProd(t.nodeModel.getAttributeValue("ds6w:type_value"))&&t.nodeModel.getAttributeValue("madeFrom"))return{shortHelp:""};if(t.nodeModel.getAttributeValue("dimensionType")===e.RECTANGULAR_DIMENSION){var n=t.nodeModel.getAttributeValue("unitNLS"),a=t.nodeModel.getAttributeValue("quantityLength"),l=t.nodeModel.getAttributeValue("quantityWidth"),i=null==c||null==c?"":c,r=null==a||null==a?"":a,u=null==l||null==l?"":l;return{shortHelp:!(s=t.nodeModel.getAttributeValue("asRequired"))||""!=r||""!=u||"EA (each)"!=n&&n?r+" x "+u+(null==n||null==n||""==r||""==u?"":" "+n)+(s?" "+d.label_As_Required:""):d.label_As_Required}}var s,g=t.nodeModel.getAttributeValue("unitNLS"),c=t.nodeModel.getAttributeValue("quantity");return{shortHelp:(i=null==c||null==c?"":c)+(null==g||null==g||""==i?"":" "+g)+((s=t.nodeModel.getAttributeValue("asRequired"))?" "+d.label_As_Required:"")}},u.getCellValue=function(t){var i=UWA.createElement("div",{class:"uom-container"}),r=widget.getValue(e.PERSISTENCY_BOM_VIEW);if((c=t.nodeModel)&&c._canBeGrouped()){let N=c.getAttributeValue("ds6w:type_value");if(!o.isFormulatedProduct(t.nodeModel.getAttributeValue("ds6w:type_value"))&&o.isPhyProd(c.getAttributeValue("ds6w:type_value"))&&c.getAttributeValue("madeFrom"))return i;if(!o.isFormulatedProduct(N)&&!o.isPhyProd(N)&&!o.isRawMaterial(N))return i;var u=!0,g=!0;"function"==typeof c.getCQInstance&&c.getCQInstance()?u=!0:"boolean"!=typeof r||r?"function"==typeof c.IsComputed&&c.IsComputed()&&(u=!1):u=!1,u&&!c.options.grid.dimensionType&&(g=!1),!s.parentModel||s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_RELEASED&&s.parentModel.options.maturity!==e.WELCOMEPANEL_ID_OBSOLETE&&s.parentModel.options.grid["ds6w:status"]!==e.WELCOMEPANEL_ID_OBSOLETE||(u=!1);var c=t.nodeModel,p=Object.entries(o.getUOMUnits(c.options.grid.dimensionType)),m=[],A=new Map;p.forEach((function(e){m.push(e[1]),A.set(e[1],e[0])})),m.sort((function(e,t){return(e=e.toLowerCase())==(t=t.toLowerCase())?0:e>t?1:-1}));var h=t.nodeModel.getAttributeValue("unitNLS"),C=c.getAttributeValue("quantity"),E=c.getAttributeValue("quantityLength"),M=c.getAttributeValue("quantityWidth"),v=null==C||null==C?"":C,I=null==E||null==E?"":E,x=null==M||null==M?"":M,y=-1;null!=h&&(y=m.indexOf(h));var b=c.getAttributeValue("asRequired"),f="";""==(f=c.getAttributeValue("dimensionType")===e.RECTANGULAR_DIMENSION?!b||""!==I||""!==x||"EA (each)"!=h&&h?I+" x "+x+(null==h||null==h||""==I||""==x?"":" "+h)+(b?" "+d.label_As_Required:""):d.label_As_Required:v+(null==h||null==h||""==v?"":" "+h)+(b?" "+d.label_As_Required:""))&&(o.isRawMaterial(c.getAttributeValue("ds6w:type_value"))||o.isFormulatedProduct(c.getAttributeValue("ds6w:type_value")))&&(f=d.placeholder_UOM_Details),"loading..."===h&&(f=d.loading,y=-1);var S=UWA.createElement("div",{class:"readonly-container",html:f}).inject(i),D=UWA.createElement("div",{class:"uom-container-edit xsr-grid-wux-hide"}).inject(i);if(u&&S.addEventListener("click",(function(){document.querySelectorAll(".readonly-container").forEach((e=>{e.hasClassName("xsr-grid-wux-hide")&&e.toggleClassName("xsr-grid-wux-hide")})),document.querySelectorAll(".uom-container-edit").forEach((e=>{e.hasClassName("xsr-grid-wux-hide")||e.toggleClassName("xsr-grid-wux-hide")})),S.addClassName("xsr-grid-wux-hide"),D.toggleClassName("xsr-grid-wux-hide")})),c.options.grid.dimensionType!==e.RECTANGULAR_DIMENSION){(P=new l({label:d.label_As_Required,type:"switch",checkFlag:b})).getContent().addClassName("xsr-grid-wux-inline"),P.getContent().addClassName("xsr-grid-wux-inline-fix"),P.addEventListener("buttonclick",(function(e){var n=e.dsModel.checkFlag;let a=c.getAttributeValue("quantity");null!=a&&parseFloat(a)<=0?(s.activeCellId=null,e.preventDefault(),e.stopPropagation(),P.checkFlag=!0):(s.activeCellId=t.cellID,c.updateOptions({grid:{asRequired:n}}))}));var L=g?"([0-9]*[.])?[0-9]+":"[0-9]+",_=new n({placeholder:d.placeholder_Quantity,value:v,pattern:L,selectAllOnFocus:!0}).inject(D),R=new a({elementsList:m,selectedIndex:y,placeholder:d.placeholder_UOM});o.isPhyProd(t.nodeModel.options.grid["ds6w:type_value"])?((R=new a({elementsList:m,selectedIndex:y,placeholder:"EA (each)"})).inject(D),_.getContent().addClassName("xsr-grid-lineeditor-product-box")):(R.inject(D),P.inject(D),_.getContent().addClassName("xsr-grid-lineeditor")),R.getContent().addClassName("xsr-grid-combobox"),_.getContent().getChildren()[0].onpaste=function(e){e.preventDefault();let t=(e.clipboardData||window.clipboardData).getData("text");_.value=t},_.addEventListener("change",(function(e){let n=e.dsModel.value;s.activeCellId=t.cellID;let a=R.getModel().value;o.isPhyProd(c.getAttributeValue("ds6w:type_value"))?c.updateOptions({grid:{quantity:parseFloat(n)}}):""!=n&&null!=R.value?c.updateOptions({grid:{quantity:n,unitNLS:a,unit:A.get(a),uom:a}}):""!=n&&(c.options.grid.quantity=n)})),R.addEventListener("change",(function(e){e.preventDefault(),e.stopPropagation();let n=e.dsModel.value;s.activeCellId=t.cellID,null!=_.getModel().value&&""!=_.getModel().value&&c.updateOptions({grid:{quantity:_.getModel().value,unitNLS:n,unit:A.get(n),uom:n}})})),g||(R.disabled=!0,P.disabled=!0)}else{var P;(P=new l({label:d.label_As_Required,type:"switch",checkFlag:b})).getContent().addClassName("xsr-grid-rectangular-inline"),P.getContent().addClassName("xsr-grid-wux-inline-fix"),P.addEventListener("buttonclick",(function(e){var n=e.dsModel.checkFlag;let a=c.getAttributeValue("quantity");null!=a&&parseFloat(a)<=0?(s.activeCellId=null,e.preventDefault(),e.stopPropagation(),P.checkFlag=!0):(s.activeCellId=t.cellID,c.updateOptions({grid:{asRequired:n}}))}));L=g?"([0-9]*[.])?[0-9]+":"[0-9]+";var w=new n({placeholder:d.Length,value:I,pattern:L,selectAllOnFocus:!0}).inject(D);UWA.createElement("span",{class:"xsr-rectangular-dimension-cross",html:"x"}).inject(D);var O=new n({placeholder:d.Width,value:x,pattern:L,selectAllOnFocus:!0}).inject(D);R=new a({elementsList:m,selectedIndex:y,placeholder:d.placeholder_UOM});o.isPhyProd(t.nodeModel.options.grid["ds6w:type"])?(w.getContent().addClassName("xsr-grid-lineeditor-product-box"),O.getContent().addClassName("xsr-grid-lineeditor-product-box")):(R.inject(D),P.inject(D),w.getContent().addClassName("xsr-grid-lengtheditor"),O.getContent().addClassName("xsr-grid-widtheditor")),R.getContent().addClassName("xsr-grid-rectangular-combobox"),w.getContent().getChildren()[0].onpaste=function(e){e.preventDefault();let t=(e.clipboardData||window.clipboardData).getData("text");w.value=t},w.addEventListener("change",(function(e){let n=e.dsModel.value;s.activeCellId=t.cellID,void 0!==O.getModel().value&&""!==O.getModel().value&&""!=n&&null!=R.value&&c.updateOptions({grid:{quantityLength:n}})})),O.getContent().getChildren()[0].onpaste=function(e){e.preventDefault();let t=(e.clipboardData||window.clipboardData).getData("text");O.value=t},O.addEventListener("change",(function(e){let n=e.dsModel.value;s.activeCellId=t.cellID,void 0!==w.getModel().value&&""!==w.getModel().value&&""!=n&&null!=R.value&&c.updateOptions({grid:{quantityWidth:n}})})),R.addEventListener("change",(function(e){e.preventDefault(),e.stopPropagation();let n=e.dsModel.value;s.activeCellId=t.cellID,void 0!==w.getModel().value&&""!==w.getModel().value&&void 0!==O.getModel().value&&""!==O.getModel().value&&c.updateOptions({grid:{quantityLength:w.getModel().value,quantityWidth:O.getModel().value,unitNLS:n,unit:A.get(n),uom:n}})})),g||(R.disabled=!0,P.disabled=!0)}}return s.activeCellId===t.cellID&&(S.addClassName("xsr-grid-wux-hide"),D.toggleClassName("xsr-grid-wux-hide")),i},u.getCellValueForExport=function(t){var n=t.nodeModel;if(n&&n.getID){if(o.isPhyProd(n.getAttributeValue("ds6w:type"))&&n.getAttributeValue("madeFrom"))return"";if(null==n)return d.label_UOM;var a,l=n.getUnit(),i=n.getDimensionType(),r=n.getQuantity();return i===e.RECTANGULAR_DIMENSION&&(r="",n.getquantityLength()&&""!=n.getquantityLength()&&(r=n.getquantityLength()+" x "+n.getquantityWidth())),a=""==l?r+" "+n.getUnit():r+" "+n.getUnitNLS(),n.getAsRequired()&&(a="null"==a||null==a||"nullEA (each)"==a?d.label_As_Required:a+" "+d.label_As_Required),a}}),"madeFrom"===u.dataIndex&&(u.getCellValueForExport=function(e){var t=e.nodeModel;if(t&&t.getID&&"madeFrom"===s.grid.layout.getDataIndexFromColumnIndex(e.columnID))return void 0===t.getMadeFrom()||null===t.getMadeFrom()?"":d.label_MakeFrom},u.getCellTooltip=function(e){var t=e.nodeModel;if(t&&t.getID&&!!t.getMadeFrom())return{shortHelp:d.label_MakeFrom}}),"revisionForTMS"===u.dataIndex&&(u.getCellTooltip=function(e){var t=e.nodeModel;if(t&&t.getID)return{shortHelp:t.isLastVersion()?t.getRevision():t.getRevision()+" "+d.HigherRevExist}},u.getCellValue=function(e){var t=e.nodeModel;if(t&&t.getRevision)return t.getRevision()},u.getCellSemantics=function(e){var t=e.nodeModel;if(t&&t.isLastVersion&&!t.isLastVersion())return{icon:"flow-line"}}),"url"===u.typeRepresentation||"urlBlock"===u.typeRepresentation?(u.getCellValue=function(n){var a,l,i=function(e,n,a,l,i){return t.isXSRAuthoredType(a.getTypeActualName())?{label:e,icon:l,url:"#UNEXISTANT_ID",module:"DS/XSRCommonComponents/utils/GridCommonActionsManager",func:"launch",argument:{commandId:n,selectedNode:a,appCore:s.appCore,currentTabKey:s.currentTabKey,selectFacet:i}}:{label:e}},o=n.nodeModel,r=s.grid.layout.getDataIndexFromColumnIndex(n.columnID);if(o.getID){switch(r){case"partNumber":(l=void 0===o.getPartNumber()||null===o.getPartNumber()?"":o.getPartNumber())&&(a=i(l,e.SET_PART_NUMB,o));break;case"ds6wg:revision":(l=void 0===o.getRevision()||null===o.getRevision()?"":o.getRevision())&&(a=i(l,e.VERSION_GRAPH_CMD,o),o.isLastVersion&&void 0!==o.isLastVersion()&&!o.isLastVersion()&&(a.icon="flow-line")),l&&t.isOriginatedInGLS(o)&&(a=l);break;case"ds6w:status":(l=void 0===o.getMaturity()||null===o.getMaturity()?"":o.getMaturity())&&(a=i(l,e.MATURITY_GRAPH_CMD,o)),l&&t.isOriginatedInGLS(o)&&(a=l);break;case"ds6w:responsible":(l=void 0===o.getOwner()||null===o.getOwner()?"":o.getOwner())&&(a=i(l,e.CHANGE_OWNER_CMD,o)),l&&t.isOriginatedInGLS(o)&&(a=l);break;case"Alternate":var d="",u=o._options.grid.Alternate;"Yes"==(u=u?u.replace("\n",""):u)&&(d="fonticon fonticon-exchange alternateColumn"),a=i("",e.INFORMATION_CMD,o,d,e.FACET_ALTERNATE);break;case"revisionForTMS":let n=null,r=null;o&&o.getRevision&&(n=o.getRevision()),o&&o.isLastVersion&&!o.isLastVersion()&&(r="flow-line"),a={icon:r,label:n}}return a}},u.getCellGroupingKey=function(e){var t=e.nodeModel;if(t&&t.getID){var n=s.grid.layout.getDataIndexFromColumnIndex(e.columnID);return e.nodeModel.options.grid[n]}},u.getCellValueForExport=function(e){var t=e.nodeModel;if(t&&t.getID)switch(s.grid.layout.getDataIndexFromColumnIndex(e.columnID)){case"partNumber":return void 0===t.getPartNumber()||null===t.getPartNumber()?"":t.getPartNumber();case"ds6wg:revision":var n=void 0===t.getRevision()||null===t.getRevision()?"":t.getRevision();return n=n&&t.isLastVersion&&t.isLastVersion()?n:n+"("+d.HigherRevExist+")";case"ds6w:status":return void 0===t.getMaturity()||null===t.getMaturity()?"":t.getMaturity();case"ds6w:responsible":return void 0===t.getOwner()||null===t.getOwner()?"":t.getOwner()}},"ds6wg:revision"===u.dataIndex&&(u.getCellTooltip=function(e){var t=e.nodeModel;if(t&&t.getID)return{shortHelp:t.isLastVersion()?t.getRevision():t.getRevision()+" "+d.HigherRevExist}}),"Alternate"===u.dataIndex&&(u.getCellTooltip=function(e){var t=e.nodeModel;if(t&&t.getID){return{shortHelp:"Yes"==t._options.grid.Alternate?d.label_Alternate:""}}}),"ds6wg:revision"!==u.dataIndex&&"ds6w:status"!==u.dataIndex&&"ds6w:responsible"!==u.dataIndex||(u.getCellTypeRepresentation=function(e){return e.nodeModel&&t.isOriginatedInGLS(e.nodeModel)?"string":u.typeRepresentation})):"menu"===u.dataIndex&&(u.getCellValue=function(t){var n=t.nodeModel,a=widget.getValue(e.PERSISTENCY_BOM_VIEW);if(void 0===a&&(a=!0),n.getID&&n.getID()){var l=[];if(n.currentTabKey!==e.FACET_MBMF&&n.currentTabKey!==e.MBMF_TAB||n.appCore.contextAppId!==e.XSR_APP_ID)if(n.currentTabKey!==e.FACET_MBMF&&n.currentTabKey!==e.MBMF_TAB||n.appCore.contextAppId===e.XSR_APP_ID)if(n.currentTabKey===e.BOM_TAB){let e=["Information_Widget","Alternates"];l=l.concat(e);let t=n.getAttributeValue("ds6w:status");const i=null!=n.getAttributeValue("madeFromRelationId"),r="expandState"===n._expandState,d="collapseState"===n._expandState,u=d&&(null===n.getAllDescendants()||n.getAllDescendants().length<2),s=d&&n.getAllDescendants().length>=2&&n.getAllDescendants().some((e=>null!=e.getAttributeValue("physicalId")&&null!=e.getAttributeValue("madeFromRelationId")));if((r||i||u||s)&&l.push("UPSAuthReorderProduct"),a){let e=["UPSAuthReorderProduct","UPSAuthCut","UPSAuthCopy","UPSAuthPaste"];l=l.concat(e)}if(n.options.grid.madeFromRelationId&&null!=n.options.grid.madeFromRelationId){let e=["UPSAuthReplaceByRevision","UPSAuthCut","UPSAuthCopy","UPSAuthPaste"];l=l.concat(e)}if(o.isFormulatedProduct(n.getAttributeValue("ds6w:type_value"))){let e=["UPSAuthReplaceByRevision","UPSAuthPaste"];l=l.concat(e)}if(o.isRawMaterial(n.getAttributeValue("ds6w:type"))){let e=["UPSAuthReorderProduct","UPSAuthPaste"];l=l.concat(e)}if("Released"===t||"Obsolete"===t){let e=["UPSAuthPaste"];l=l.concat(e)}if(!a){let e=["UPSAuthUnparent","DeleteItem"];l=l.concat(e)}if(r){if(r&&!a)return{label:"",module:"DS/XSRCommonComponents/utils/GridCommonActionsManager",func:"publishActionMenu",argument:{execludeCmds:l}}}else if(n.getChildren()&&n.getChildren().length>0&&n.getChildren().some((e=>null!=e.getAttributeValue("physicalId")&&null!=e.getAttributeValue("madeFromRelationId")))){let e=["UPSAuthCut","UPSAuthCopy","UPSAuthPaste"];l=l.concat(e)}}else n.currentTabKey===e.DOC_TAB?r.isMobile()&&l.push("DownloadDocument"):n.currentTabKey!==e.FORMULABOM_TAB||widget.getValue("recipeView")?n.currentTabKey===e.FORMULABOM_TAB&&widget.getValue("recipeView")?l=["Information","ManageFiles","UPSAuthUnparent","RemoveChild","VersionExplorer","DuplicateItem","CompareWith","RelatedObjects","MaturityGraph","ActionBar_ChangeOwner","MultiOwnership","DownloadReport","Subscriptions","DeleteItem","addExisting","RegenerateReport","Close","Information_Widget","Alternates","UPSAuthReplaceByRevision","UPSAuthCut","UPSAuthCopy","UPSAuthPaste","UPSAuthReplaceByRevision","UPSAuthReorderProduct"]:"test-method-facet"===n.currentTabKey&&(l=["Information","OpenWith","ManageFiles","SetPartNumber","UPSAuthUnparent","RemoveChild","VersionExplorer","DuplicateItem","CompareWith","RelatedObjects","MaturityGraph","ActionBar_ChangeOwner","MultiOwnership","DownloadReport","Subscriptions","DeleteItem","addExisting","RegenerateReport","Close","Information_Widget","Alternates"]):(l=["Information_Widget","Alternates","UPSAuthReorderProduct","UPSAuthReplaceByRevision","UPSAuthCut","UPSAuthCopy","UPSAuthPaste"],(widget.getValue("isRecipeAssociated")||n.getParent()&&n.getParent().getAttributeValue("hasRecipe")&&"true"===n.getParent().getAttributeValue("hasRecipe").toLowerCase())&&(l.push("DeleteItem"),l.push("UPSAuthUnparent")));else l=["Information","OpenSpecificationView","OpenWith","ManageFiles","SetPartNumber","UPSAuthUnparent","RemoveChild","VersionExplorer","DuplicateItem","CompareWith","RelatedObjects","MaturityGraph","ActionBar_ChangeOwner","MultiOwnership","DownloadReport","DownloadDocument","Subscriptions","DeleteItem","addExisting","RegenerateReport","Close","UPSAuthReorderProduct","UPSAuthReplaceByRevision","UPSAuthCut","UPSAuthCopy","UPSAuthPaste"];else l.push("Information"),l.push("OpenSpecificationView"),l.push("DeleteItem"),l.push("UPSAuthReorderProduct"),l.push("UPSAuthReplaceByRevision"),l.push("UPSAuthCut"),l.push("UPSAuthCopy"),l.push("UPSAuthPaste");return{label:"",module:"DS/XSRCommonComponents/utils/GridCommonActionsManager",func:"getActionMenu",argument:{execludeCmds:l}}}n.options.grid.menu=""},u.hasCellValue=function(e){var t=e.nodeModel;return!(!t||!t._canBeGrouped())}),u.dataIndex.includes(".")&&(u.getCellValueForExport=function(e){let n=u.dataIndex,a=e.nodeModel;const l="date"==u.typeRepresentation||"datetime"==u.typeRepresentation;if(a&&a._canBeGrouped()){let e=a._options.grid[n];return e instanceof Object?l?t.formatDate(e.toString()):e.toString():l?t.formatDate(e):e}}),"comments"===u.dataIndex&&(u.getCellValueForExport=function(e){let t=e.nodeModel;if(t&&t.getID)return null!=t.getAttributeValue("comments")?t.getAttributeValue("comments"):""})})),u},u}));