define("DS/DELWebViewerToolbarV2/commands/ToolbarConfig/ToolbarConfig",["UWA/Core","DS/DELWebViewerUtils/Utils"],(function(e,t){"use strict";return{getConfiguration:function(e){return{entries:[{id:"ShowBuildUpColors",dataElements:{typeRepresentation:"customBoolean",tooltip:{title:e.getNLSValue("ToolBar.ShowBuildUpColors.Label"),shortHelp:e.getNLSValue("ToolBar.ShowBuildUpColors.Tooltip.ShortHelp"),longHelp:e.getNLSValue("ToolBar.ShowBuildUpColors.Tooltip.LongHelp")},value:!0,onNodeUpdate:{module:"DS/DELWebViewerToolbarV2/commands/ShowBuildupColorsCmd",func:"execute"},possibleValues:[{value:!0,icon:{iconPath:t.getAssetsUrl("DELWeb3DViewerV2","icons/32/I_ShowPBUColor.png"),className:"ShowBuildUpColors"}},{value:!1,icon:{iconPath:t.getAssetsUrl("DELWeb3DViewerV2","icons/32/I_Color_OFF.png"),className:"ShowBuildUpColors"}}],category:"2"}},{id:"3DViewList",dataElements:{typeRepresentation:"customBoolean",tooltip:{title:e.getNLSValue("ToolBar.3DViewList.Label"),shortHelp:e.getNLSValue("ToolBar.3DViewList.Tooltip.ShortHelp"),longHelp:e.getNLSValue("ToolBar.3DViewList.Tooltip.LongHelp")},onNodeUpdate:{module:"DS/DELWebViewerToolbarV2/commands/View3DList",func:"execute"},value:!1,possibleValues:[{value:!0,icon:{iconPath:t.getAssetsUrl("DELWeb3DViewerV2","icons/32/I_3DViewList_ON.png"),className:"3DViewList"}},{value:!1,icon:{iconPath:t.getAssetsUrl("DELWeb3DViewerV2","icons/32/I_3DViewList_OFF.png"),className:"3DViewList"}}],category:"2"}},{id:"BuildUpDisplayOptions",dataElements:{typeRepresentation:"customBoolean",tooltip:{title:e.getNLSValue("ToolBar.BuildUpDisplayOptions.Label"),shortHelp:e.getNLSValue("ToolBar.BuildUpDisplayOptions.Tooltip.ShortHelp"),longHelp:e.getNLSValue("ToolBar.BuildUpDisplayOptions.Tooltip.LongHelp")},onNodeUpdate:{module:"DS/DELWebViewerToolbarV2/commands/BuildupDisplayOptionsCmd",func:"execute"},value:!1,possibleValues:[{value:!0,icon:{iconPath:t.getAssetsUrl("DELWeb3DViewerV2","icons/32/I_DisplayOptions.png"),className:"BuildUpDisplayOptions"}},{value:!1,icon:{iconPath:t.getAssetsUrl("DELWeb3DViewerV2","icons/32/I_DisplayOptions.png"),className:"BuildUpDisplayOptions"}}],category:"2"}},{id:"Reset",dataElements:{typeRepresentation:"functionIcon",tooltip:{title:e.getNLSValue("ToolBar.Reset.Label"),shortHelp:e.getNLSValue("ToolBar.Reset.Tooltip.ShortHelp"),longHelp:e.getNLSValue("ToolBar.Reset.Tooltip.LongHelp")},value:{module:"DS/DELWebViewerToolbarV2/commands/ResetCmd",func:"execute"},icon:{iconPath:t.getAssetsUrl("DELWeb3DViewerV2","icons/32/I_DELResetBuildUp.png"),className:"Reset"},category:"2"}}],WorkInstructions:{entriesToOverride:[{id:"ShowBuildUpColors",dataElements:{disabled:!0}},{id:"3DViewList",dataElements:{disabled:!1}},{id:"BuildUpDisplayOptions",dataElements:{disabled:!1}},{id:"Reset",dataElements:{disabled:!0}}]},BuildUp:{entriesToOverride:[{id:"ShowBuildUpColors",dataElements:{disabled:!1}},{id:"3DViewList",dataElements:{disabled:!1}},{id:"BuildUpDisplayOptions",dataElements:{disabled:!1}},{id:"Reset",dataElements:{disabled:!1}}]}}}}})),define("DS/DELWebViewerToolbarV2/ToolbarContext",[],(function(){"use strict";var e,t=function(){var e;return{set:function(t){e=t},get:function(){return e}}};return UWA.is(e)||(e=new t),e})),define("DS/DELWebViewerToolbarV2/ViewListColumnManager",["DS/DELWebViewerUtils/Utils"],(function(e){"use strict";const t={Columns:{Title:{dataIndex:"tree",text:"Title",pinned:"left",editionPolicy:"EditionOnOver",width:"250px",height:"40px"},Maturity:{dataIndex:"status",text:"Maturity State",kind:"string",width:100,height:"40px",editableFlag:!1,typeRepresentation:"tag",className:"lc-maturity-state",alignment:"center",customisation:{exportable:{lock:!1,value:!0}},visibleFlag:!0,getCellClassName:function(e){var t;return-1!==e.rowID&&(t=e&&e.nodeModel&&e.nodeModel.options&&e.nodeModel.options.grid&&e.nodeModel.options.grid.status),UWA.is(t,"string")?t.replace(/ /g,"").toUpperCase():t}},BuildUpCategory:{dataIndex:"category",text:"BuildUp Category",typeRepresentation:"string",height:"40px"},HideShow3D:{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,dataIndex:"hideShow3D",editionPolicy:"EditionInPlace",typeRepresentation:"independantBoolean",alignment:"center",pinned:"right",text:"",width:30,icon:e.getAssetsUrl("DEL3DViewer","icons/32/I_ShowHide.png"),getCellValue:function(e){return e.nodeModel.options.grid.hideShow3D}}},WorkInstructions:{columnPropertiesToOverride:{Title:{getCellKPIColor:null},HideShow3D:{visibleFlag:!1}}},BuildUp:{columnPropertiesToOverride:{Title:{getCellKPIColor:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options.grid.color)return e.nodeModel.options.grid.color}},HideShow3D:{visibleFlag:!0}}}};return{getColumns:function(e){let o=t.Columns;if(t[e]&&t[e].columnPropertiesToOverride){let i=t[e].columnPropertiesToOverride;Object.keys(i).forEach((e=>{o[e]={...o[e],...i[e]}}))}return o}}})),define("DS/DELWebViewerToolbarV2/DisplayOptionsColumns",[],(function(){"use strict";return{HideShow3D:{text:"Visibility",sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,alignment:"center",dataIndex:"visibility",editionPolicy:"EditionInPlace",typeRepresentation:"visibility",getCellValue:function(e){return e.nodeModel.options.grid.visibility}},Category:{dataIndex:"category",text:"Category",typeRepresentation:"string"},Transparency:{text:"Transparency",dataIndex:"opacity",typeRepresentation:"opacity",editionPolicy:"EditionInPlace",editableFlag:"true",alignment:"center",semantics:{minValue:0,maxValue:1,stepValue:.1,colorFrom:"transparent",colorTo:"#368EC4"}},ShowColor:{text:"Color ON/OFF",dataIndex:"withColor",typeRepresentation:"independantBoolean",editionPolicy:"EditionInPlace",editableFlag:"true",alignment:"center"},Color:{text:"Color",dataIndex:"color",typeRepresentation:"color",editableFlag:"true",editionPolicy:"EditionInPlace",alignment:"center"}}})),define("DS/DELWebViewerToolbarV2/commands/config/BuildUpDisplayOptionsToolbar",["DS/DELWebViewerUtils/Utils"],(function(e){"use strict";return{getToolbarDefination:function(t,o){let i=t.getOption("dynamicBuildUp")?{entries:[{id:"DisplayOptionsReset",dataElements:{typeRepresentation:"functionIcon",tooltip:{title:t.getNLSValue("DisplayOptions.Toolbar.Reset"),shortHelp:t.getNLSValue("DisplayOptions.Toolbar.Reset.ShortHelp"),longHelp:t.getNLSValue("DisplayOptions.Toolbar.Reset.LongHelp")},icon:{iconPath:e.getAssetsUrl("DELWeb3DViewerV2","icons/22/I_Reset.png")},action:{module:"DS/DELWebViewerToolbarV2/commands/BuildupDisplayOptionsCmd",func:"reset",argument:{arg1:!1,arg2:"all"}},position:"far",category:"1"}}]}:{entries:[{id:"ShowFTAOnOff",dataElements:{typeRepresentation:"showFTAOnOff",value:o,onNodeUpdate:{module:"DS/DELWebViewerToolbarV2/commands/BuildupDisplayOptionsCmd",func:"showFTAOnOffCmdClick",argument:{identifier:"ShowFTAOnOff"}},disabled:!1,position:"far",category:"1"}},{id:"DisplayOptionsReset",dataElements:{typeRepresentation:"functionIcon",tooltip:{title:t.getNLSValue("DisplayOptions.Toolbar.Reset"),shortHelp:t.getNLSValue("DisplayOptions.Toolbar.Reset.ShortHelp"),longHelp:t.getNLSValue("DisplayOptions.Toolbar.Reset.LongHelp")},icon:{iconPath:e.getAssetsUrl("DELWeb3DViewerV2","icons/22/I_Reset.png")},action:{module:"DS/DELWebViewerToolbarV2/commands/BuildupDisplayOptionsCmd",func:"reset",argument:{arg1:!1,arg2:"all"}},position:"far",category:"2"}}],typeRepresentations:{showFTAOnOff:{stdTemplate:"toggleIcon",semantics:{possibleValues:[{value:"true",icon:{iconPath:e.getAssetsUrl("DELWeb3DViewerV2","icons/22/I_FTAOn.png")},tooltip:{title:t.getNLSValue("DisplayOptions.Toolbar.ShowFTAOn"),shortHelp:t.getNLSValue("DisplayOptions.Toolbar.ShowFTAOn.ShortHelp"),longHelp:t.getNLSValue("DisplayOptions.Toolbar.ShowFTAOn.LongHelp")}},{value:"false",icon:{iconPath:e.getAssetsUrl("DELWeb3DViewerV2","icons/22/I_FTAOff.png")},tooltip:{title:t.getNLSValue("DisplayOptions.Toolbar.ShowFTAOn"),shortHelp:t.getNLSValue("DisplayOptions.Toolbar.ShowFTAOff.ShortHelp"),longHelp:t.getNLSValue("DisplayOptions.Toolbar.ShowFTAOff.LongHelp")}}]}}}};return JSON.stringify(i)}}})),define("DS/DELWebViewerToolbarV2/commands/ResetCmd",["UWA/Core","DS/DELWebViewerToolbarV2/ToolbarContext","DS/DELWebViewerUtils/Utils"],(function(e,t,o){"use strict";var i,n=function(){return{execute:function(){o.trackChanges({category:"QuickActionToolBar",action:"Reset_Visibility",label:"Reset"});let e=t.get(),i=e.viewerInterface,n=e.options.getOption("eventCollection").getViewerCtrlEventHnd();i.getHideShowBehavior().reset(),i.render(),n.publish(n.events.onBuildupResetCmdComplete,{success:!0})},destroy:function(){}}};return e.is(i)||(i=new n),i})),define("DS/DELWebViewerToolbarV2/ToolbarController",["UWA/Core","DS/DELWebViewerToolbarV2/ToolbarContext","DS/DELWebViewerModel/Buildup/BuildUpSettings","DS/DELWebViewerToolbarV2/commands/ToolbarConfig/ToolbarConfig"],(function(e,t,o,i){"use strict";return function(n,l,a,r){const s=r.getOption("mappingKeys"),d=r.getOption("buildupToolbarConfiguration");var p,u=i.getConfiguration(r),c=r.getOption("eventCollection").getViewerCtrlEventHnd(),g=function(){c.publish(c.events.onToolbarDestroy,{})},b=null,h=async function(){let e;if(b)e=b;else{let t=a.getInstance("BuildUpBehaviorModelService"),o=n.getInstance("WorkInstructionBehavior");switch(l.getMode()){case s.VIEWERMODES.WORKINSTRUCTIONS:o&&(e=await o.getCurrentBuildUpSettings());break;case s.VIEWERMODES.BUILDUP:t&&(e=t.getBuildUpGlobalSettings())}}return e},D=async function(t={}){var i;t.mode&&await async function(e){e&&u[e]&&u[e].entriesToOverride&&u[e].entriesToOverride.forEach((e=>{p.updateNodeModel({commandId:e.id,...e.dataElements})}))}(t.mode),i=t.settings?t.settings:null,b=i,function(t){let i,n,l;t&&(n=p.getNodeModel({commandId:"ShowBuildUpColors"}),i=n&&n.options&&n.options.grid&&e.is(n.options.grid.data,"boolean")?n.options.grid.data:null,l=o.isBuildUpColorsEnabled(t),i!==l&&p.updateNodeModel({commandId:"ShowBuildUpColors",grid:{data:l}}))}(await h()),c.publish(c.events.onToolbarUpdate,t)};return d&&e.is(d.entries,"array")&&d.entries.length>0&&(u.entries=d.entries),Object.assign(r,{toolbar:u.entries}),r.getOption("quickToolBar")&&(t.set({viewerInterface:l,modelInterface:a,toolbarInterface:{getBuildUpSettings:h},options:r}),(p=l.getToolBar()).create(u.entries),p.hide(),D({mode:l.getMode()}),c.subscribe(c.events.onSetModeComplete,(function(){g(),D({mode:l.getMode()})})),c.subscribe(c.events.onSelectView,D),c.subscribe(c.events.updateToolbar,D),c.subscribe(c.events.onGlobalBuildUpComplete,D)),{reset:function(){p&&(g(),p.reset(),p.hide()),b=null}}}})),define("DS/DELWebViewerToolbarV2/commands/View3DList",["UWA/Core","DS/DELWebViewerToolbarV2/ToolbarContext","DS/DELWebViewerToolbarV2/ViewListColumnManager","DS/DELWebViewerUtils/Utils","DS/DELWebViewerModel/Buildup/BuildUpSettings","DS/DELWeb3DViewerV2/NodeUtil","DS/DELWebOERCommonUtils/utils/DictionaryUtils","text!DS/DELWebViewerToolbarV2/assets/json/BuildUpCategory.json"],(function(e,t,o,i,n,l,a,r){"use strict";var s,d=function(){var n,s,d="3DViewList",p=[],u=function(){var e=t.get().options.getOption("eventCollection").getViewerCtrlEventHnd();n&&(n.destroy(),n=null),p.forEach((function(t){e.unSubscribe(t)})),p=[]},c=function c(){var g=t.get(),b=g.modelInterface,h=g.viewerInterface,D=(g.toolbarInterface,g.options),f=D.getOption("mappingKeys"),S=JSON.parse(r),m=b.getInstance("BuildUpBehaviorModelService"),y=m.getMfgAndResourceBuildup(),V=m.getFTABuildup(),E=function(){let e=o.getColumns(h.getMode());for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&("HideShow3D"!==t&&(e[t].text=D.getNLSValue("3DViewList.Title."+t)),e[t].description=D.getNLSValue("3DViewList.Description."+t));return Object.values(e)},T=function(t){return t&&e.is(t.path,"array")&&t.path.length>0?t.path[0]:null},w=function(o){var i,n=e.Promise.resolve({results:[]});return o&&o.id&&o.pathFilter&&o.pathFilter.length>0&&(i=h.getFilterSpec({id:o.id}),o.filter=i?i.filter:null,n=b.getProgressiveExpandData(function(o){var i=t.get().options.getOption("dynamicBuildUp"),n={batch:{expands:[{label:"3DViewList Expand",root:{physical_id:o.id},filter:function(){let t=[],i=[];return(o=o||{}).filter&&t.push(o.filter),function(t){let o;t&&t.length>0&&(o=e.is(t[0],"string")?[t]:t,i=i.concat(o.map((e=>({physical_id_path:e})))))}(o.pathFilter),i.length>0&&t.push({prefix_filter:{prefix_path:i}}),0===t.length&&t.push({all:1}),{and:{filters:t}}}()}]},outputs:{select_object:["physicalid","ds6w:label","ds6w:type","ds6w:status","IPML.IconName"],hits:{predefined_computation:["icons"]}}};if(o.isMfg){let e=i?"(flattenedtaxonomies:reltypes/DELFmiFunctionInstance)":"((flattenedtaxonomies:reltypes/DELFmiFunctionInstance)) OR ((flattenedtaxonomies:types/DELFmiProcessImplementCnx)) OR((flattenedtaxonomies:types/DELFmiProcessOutputPrereqMaterializationCnx)) OR ((flattenedtaxonomies:reltypes/VPMInstance)) OR((flattenedtaxonomies:reltypes/VPMRepInstance))";n.batch.expands[0].graph={descending_condition_relation:{uql:e}}}return n}(o))),n},U=function(e,t){n.updateHideShowColumn(t,e)};b&&h&&e.is(y,"array")&&(n?Promise.resolve(n):h.getComponentPromise(d,{executionContext:D.getOption("executionContext"),columns:E(),readOnly:h.getMode()===f.VIEWERMODES.WORKINSTRUCTIONS,event:D.getOption("eventCollection").getViewerCtrlEventHnd(),getNLSValue:D.getNLSValue}).then((e=>{n=e}))).then((async function(){var t,o,r;n?(n.toggleProgressBar(!0),t=await async function(){var t={mfgItems:[],resources:[],ftas:[]};return y.forEach((function(e){if(e.category&&!0===e.visibility){let o=h.getPathElementV2([e.path[0]]);l.isRootType(o,f.PPRTYPES.MBOM)||l.isRootType(o,f.PPRTYPES.SBOM)?t.mfgItems.push(e):l.isRootType(o,f.PPRTYPES.RESOURCE)&&t.resources.push(e)}})),e.is(V,"array")&&V.length>0&&V.forEach((function(e){!0===e.visibility&&t.ftas.push(e)})),t}(),r=w({id:T(t.mfgItems[0]),pathFilter:t.mfgItems.map((e=>e.path)),isMfg:!0}),o=w({id:T(t.resources[0]),pathFilter:t.resources.map((e=>e.path))}),e.Promise.all([r,o]).then((async function(o){var l=[];if(o&&o.length>0&&o.forEach((function(e){e&&e.results&&e.results.length>0&&(l=l.concat(e.results))})),l.length>0){let o=await async function(e){var o,n=[],l=[],r=(o={},e.forEach((function(e){e&&e.resourceid&&(o[e.resourceid]=e,e[f.EXPANDENUM.STATUS]&&-1===l.indexOf(e[f.EXPANDENUM.STATUS])&&l.push(e[f.EXPANDENUM.STATUS]))})),o),d=t.mfgItems.concat(t.resources);let p=await a.getNlsOfSearchValuesBySource({nlsData:{[f.EXPANDENUM.STATUS]:l.map((e=>({value:e,source:["3DSpace"]})))},tenantId:i.getPlatformId(),lang:i.getLanguage()});return d.forEach((function(e){var t,o=e.path,l=o[o.length-1],a=r[l],d=Object.keys(S).indexOf(e.category)>-1?S[e.category]:S.resource,u=h.getHideShowBehavior().getCurrentVisibility(o);a&&n.push({label:a[f.EXPANDENUM.LABEL]?a[f.EXPANDENUM.LABEL]:"",grid:{color:e.color?e.color:"",status:p[f.EXPANDENUM.STATUS][a[f.EXPANDENUM.STATUS]],category:D.getNLSValue(d),path:o,hideShow3D:!1!==u},icons:Object.keys(S).indexOf(e.category)>-1?[a[f.EXPANDENUM.ICON]]:[(t=a[f.EXPANDENUM.IPML_ICON],s||(s=i.get3DSpaceUrl()+"/snresources/images/icons/small/"),t?s+t+".png":"")]})})),n}(l);o=o.concat(await async function(){let o=[],n=t.ftas.filter((e=>{let t=h.getLeafMfgPath(e.path);return t.length>0&&h.getHideShowBehavior().getCurrentVisibility(t,f.SCENEGRAPHKEYS.BUILDUP)}));if(n.length>0){let l=n.map((e=>e[f.BUILDUPKEYS.PATH][e[f.BUILDUPKEYS.PATH].length-1])),r=await b.getAttributeForIds(l,["physicalid","ds6w:label","ds6w:type","ds6w:status"],["icon"]),s=[];Object.keys(r).forEach((e=>{-1===s.indexOf(r[e][f.EXPANDENUM.STATUS])&&s.push(r[e][f.EXPANDENUM.STATUS])}));let d=await a.getNlsOfSearchValuesBySource({nlsData:{[f.EXPANDENUM.STATUS]:s.map((e=>({value:e,source:["3DSpace"]})))},tenantId:i.getPlatformId(),lang:i.getLanguage()});e.is(r,"object")&&Object.keys(r).forEach((e=>{let i=t.ftas.find((t=>t[f.BUILDUPKEYS.PATH][t[f.BUILDUPKEYS.PATH].length-1]===e)).path,n=h.getHideShowBehavior().getCurrentVisibility(i);o.push({label:r[e][f.EXPANDENUM.LABEL],grid:{color:null,status:d[f.EXPANDENUM.STATUS]&&r[e][f.EXPANDENUM.STATUS]?d[f.EXPANDENUM.STATUS][r[e][f.EXPANDENUM.STATUS]]:"",category:f.BUILDUPCATEGORY.FTA,path:i,hideShow3D:!1!==n},icons:[r[e].type_icon_url]})}))}return o}()),n.create(o),n.onSelect((function(e){h.highlightNode({path:[e.options.grid.path],highlight:e.isSelected()})})),n.onShowHide((function(e){var t=e.data.nodeModel,o=t.getAttributeValue("hideShow3D"),i=t.getAttributeValue("path"),n=h.getHideShowBehavior();i&&(o?n.showNode({path:i}):n.hideNode({path:i}))}))}else n.toggleProgressBar(!1),n.reset()})).catch((function(){n.toggleProgressBar(!1)}))):(n.toggleProgressBar(!1),n.reset()),function(){var e=D.getOption("eventCollection").getViewerCtrlEventHnd(),t={onGlobalBuildUpRemoved:u,onToolbarDestroy:u,onBuildupResetCmdComplete:c,onGlobalBuildUpComplete:c,onHighlightNode:n.highlight,onUnHighlightNode:n.unHighlight,onUnSelectNode:n.unSelect,onHideNode:U.bind(null,!1),onShowNode:U.bind(null,!0)};if(0===p.length)for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&p.push(e.subscribe(e.events[o],t[o]))}()}))};return{execute:function(t){var o,n;t&&t.context&&t.context.nodeModel&&t.context.nodeModel.options&&(n=(o=t.context.nodeModel.options).grid&&e.is(o.grid.data,"boolean")&&o.grid.data,i.trackChanges({category:"QuickActionToolBar",action:"Show_View_list",label:d,dims:{pd1:n}}),n?c():u())},destroy:u}};return e.is(s)||(s=new d),s})),define("DS/DELWebViewerToolbarV2/commands/BuildupDisplayOptionsCmd",["UWA/Core","DS/DELWebViewerToolbarV2/ToolbarContext","DS/DELWebViewerToolbarV2/DisplayOptionsColumns","DS/DELWebViewerModel/Buildup/BuildUpSettings","DS/DELWebViewerUtils/Utils","DS/DELWebViewerToolbarV2/commands/config/BuildUpDisplayOptionsToolbar"],(function(e,t,o,i,n,l){"use strict";var a,r=function(){var a,r,s,d,p="BuildUpDisplayOptions",u={current:"BuildUp.Category.Current",previousinsystem:"BuildUp.Category.PreviousInSystem",previousfromprevioussystem:"BuildUp.Category.Previous",disassembled:"BuildUp.Category.Removed",context:"BuildUp.Category.Context",parallel:"BuildUp.Category.Parallel"},c=[],g=function(e){for(let t in o)Object.prototype.hasOwnProperty.call(o,t)&&(o[t].text=e.getNLSValue("DisplayOptions.Title."+t),o[t].description=e.getNLSValue("DisplayOptions.Description."+t));return Object.values(o)},b=function(){r&&(r.destroy(),r=null),c.forEach((function(e){e.handler.unSubscribe(e.token)})),c=[]},h=async function(o){let n,l,r=t.get()||{},s=r.toolbarInterface;var d,p,c;o&&r&&s&&(d=await s.getBuildUpSettings(),p=[],(c=i.getParsedBuildUpSettings(d))&&Object.keys(u).forEach((function(e){if(a&&a.requiredCategories&&!a.requiredCategories.includes(e))return;let t=c[e];t&&p.push(Object.assign({},t,{category:e},{color:i.getCategoryColor(d,e)}))})),n=p,l=function(t,o){var i=[];return e.is(t,"array")&&t.length>0&&o&&t.forEach((function(e){var t=o.getNLSValue(u[e.category]);i.push({label:t,text:e.text,grid:{visibility:e.visibility,category:t,opacity:parseInt(e.opacity)/255,withColor:e.withColor,color:e.color},categoryName:e.category})})),i}(n,r.options),o.create(l))},D=async function(){let e=(t.get()||{}).toolbarInterface;r.updateToolbar("ShowFTAOnOff",{grid:{data:i.getFTAVisibility(await e.getBuildUpSettings())}}),h(r)},f=async function(o={}){var n=t.get(),u=n.viewerInterface,f=n.options,S=f.getOption("mappingKeys");a=o,s=f.getOption("eventCollection").getViewerCtrlEventHnd(),d=f.getOption("eventCollection").getModelCtrlEventHnd();let m=await n.toolbarInterface.getBuildUpSettings(),y=l.getToolbarDefination(f,i.getFTAVisibility(m));u.getComponentPromise(p,{columns:g(f),executionContext:f.getOption("executionContext"),toolbarConfig:e.is(y,"string")?JSON.parse(y):y,readOnly:u.getMode()===S.VIEWERMODES.WORKINSTRUCTIONS,event:s,getNLSValue:f.getNLSValue}).then((async function(e){e&&(!function(){if(s&&d){let e=[{name:s.events.onGlobalBuildUpRemoved,callback:b,handler:s},{name:s.events.onToolbarUpdate,callback:D,handler:s},{name:s.events.onToolbarDestroy,callback:b,handler:s}];if(0===c.length)for(let t of e)c.push({handler:t.handler,token:t.handler.subscribe(t.name,t.callback)})}}(),r=e,h(e))}))};return{execute:function(t){var o,i;t&&t.context&&t.context.nodeModel&&t.context.nodeModel.options&&(i=(o=t.context.nodeModel.options).grid&&e.is(o.grid.data,"boolean")&&o.grid.data,n.trackChanges({category:"QuickActionToolBar",action:"Display_Buildup_options",label:p,dims:{pd1:i}}),i?f(t):b())},showFTAOnOffCmdClick:function(e){let o,i=t.get(),n=e&&e.context&&e.context.nodeModel&&e.context.nodeModel.getAttributeValue?e.context.nodeModel.getAttributeValue("data"):null;i&&i.options&&i.options.getOption&&(o=i.options.getOption("eventCollection").getViewerCtrlEventHnd(),o.publish(o.events.onBuildUpDisplayOptionsChange,{buildUpSettingsType:"GeneralOptions",option:"WithFTA",value:n}))},reset:function(){let e,o=t.get();o&&o.options&&o.options.getOption&&(e=o.options.getOption("eventCollection").getViewerCtrlEventHnd(),e.publish(e.events.onBuildUpDisplayOptionsReset))},destroy:b}};return e.is(a)||(a=new r),a})),define("DS/DELWebViewerToolbarV2/commands/ShowBuildupColorsCmd",["UWA/Core","DS/DELWebViewerToolbarV2/ToolbarContext","DS/DELWebViewerUtils/Utils"],(function(e,t,o){"use strict";var i,n=function(){var i="ShowBuildUpColors";return{execute:function(n){var l,a,r=t.get().options.getOption("eventCollection").getViewerCtrlEventHnd();n&&n.context&&n.context.nodeModel&&n.context.nodeModel.options&&(a=(l=n.context.nodeModel.options).grid&&e.is(l.grid.data,"boolean")&&l.grid.data?l.grid.data:null,o.trackChanges({category:"QuickActionToolBar",action:"Show_Buildup_Color_On_OFF",label:i,dims:{pd1:a}}),r.publish(r.events.onShowBuildupColorChange,{commandId:i,state:a}))},destroy:function(){}}};return e.is(i)||(i=new n),i}));