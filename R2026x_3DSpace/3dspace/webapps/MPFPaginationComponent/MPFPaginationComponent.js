define("DS/MPFPaginationComponent/PaginationComponent",["UWA/Core","UWA/Class/View","DS/MPFModel/MPFCollection","DS/MPFServices/ObjectService","css!DS/MPFPaginationComponent/MPFPaginationComponent.css"],(function(e,t,s,n){"use strict";const a=Object.freeze({CHANGE_PAGE:"changePage"}),i=t.extend({className:"mpf-pagination",tagName:"nav",setup(e={}){n.requiredOfPrototype(this.collection,s,"options.collection must be a MPFCollection"),this.pageSize=e.pageSize||20,this.currentPage=e.currentPage||1,this.pageCount=this.computePageCount(),this.listenTo(this.collection,"onReset",this.render.bind(this))},render:function(){this.pageCount=this.computePageCount();const t=this._createBackArrow(),s=this._createNextArrow(),n=this._createPages();return this.container.setContent(e.createElement("ol",{class:"mpf-page-selection",html:[t,n,s]})),this._refreshControls({pages:n,backArrow:t,nextArrow:s}),this},changePage:function(e,t={}){e>0&&e<=this.pageCount&&(this.currentPage=e,!0!==t.silent&&this.dispatchEvent(a.CHANGE_PAGE,{page:this.currentPage}))},onCollectionUpdate(){this.render()},computePageCount:function(){const e=this.collection.getTotalModelCount();return Math.ceil(e/this.pageSize)},destroy:function(){this.stopListening(this.collection),this.collection=null,this._parent(),this.container=null},_createBackArrow:function(){return e.createElement("li",{class:"mpf-pagination-item",html:{tag:"a",class:"mpf-link fonticon fonticon-chevron-left"},events:{click:()=>{const e=this.currentPage-1;e>0&&this.changePage(e)}}})},_createNextArrow:function(){return e.createElement("li",{class:"mpf-pagination-item",html:{tag:"a",class:"mpf-link fonticon fonticon-chevron-right"},events:{click:()=>{const e=this.currentPage+1;e<=this.pageCount&&this.changePage(e)}}})},_createPages:function(){const t=[],s=Math.max(2,this.currentPage-5),n=Math.min(this.pageCount-1,this.currentPage+5),a=this._getDisplayedXsPages();t.push(this._createPage(1)),s>2&&t.push(this._createEllipsis()),a.length>1&&a[0]>2&&t.push(this._createEllipsis({xsOnly:!0}));for(let e=s;e<=n;e++)t.push(this._createPage(e,a));return n<this.pageCount-1&&t.push(this._createEllipsis()),a.length>1&&a[a.length-1]<this.pageCount-1&&t.push(this._createEllipsis({xsOnly:!0})),this.pageCount>1&&t.push(this._createPage(this.pageCount)),e.createElement("li",{class:"mpf-pagination-item",html:{tag:"ol",class:"mpf-pages",html:t}})},_getDisplayedXsPages(){const e=this._getPagesArray(this.currentPage,this.pageCount,2);return e.join("").length<10?e:this._getPagesArray(this.currentPage,this.pageCount,1)},_getPagesArray(e,t,s){const n=Math.max(2,e-s),a=Math.min(t,e+s),i=[];for(let e=n;e<=a;e++)i.push(e);return i},_createEllipsis:function(t){const s=["mpf-pagination-item"];return t&&!0===t.xsOnly?s.push("mpf-visible-xs"):s.push("mpf-hidden-xs"),e.createElement("li",{class:s.join(" "),text:"â€¦"})},_createPage:function(t,s){const n=["mpf-pagination-item"];s&&!s.includes(t)&&n.push("mpf-hidden-xs");const a=e.createElement("li",{class:n.join(" "),html:[{tag:"a",class:"mpf-link",text:t}],events:{click:this.changePage.bind(this,t)}});return a.setData("pageNumber",t),a},_refreshControls({pages:e,backArrow:t,nextArrow:s}){t.removeClassName("mpf-disabled"),s.removeClassName("mpf-disabled"),1===this.currentPage&&t.addClassName("mpf-disabled"),this.currentPage===this.pageCount&&s.addClassName("mpf-disabled"),this._highlightSelectedPage({pages:e})},_highlightSelectedPage({pages:e}){e.getElements(".mpf-pagination-item").forEach((e=>{e.getData("pageNumber")===this.currentPage?e.addClassName("mpf-selected"):e.removeClassName("mpf-selected")}))}});return i.Events=Object.freeze(a),i}));