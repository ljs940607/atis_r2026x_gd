define("DS/Windows/typings/types",[],(()=>{}));var __extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/DockingElement",["require","exports","UWA/Core","UWA/Utils/Client","DS/Controls/Abstract","DS/Controls/Tab","DS/Utilities/WUXUWAUtils","DS/Core/PointerEvents","DS/Utilities/Utils","DS/Utilities/Dom","DS/WebRecordEnabler/Adapter","DS/WebRecordBase/Constants","DS/Core/WebUXComponents","DS/CoreBase/WebUXGlobalEnums","DS/WUXTypings/typings/UWA"],(function(e,t,i,n,o,s,r,a,l,d,h,c,u,p){"use strict";function m(e){return e&&"object"==typeof e&&e.content}var g="wux-docking-element-hide-docking-zone",f="wux-docking-anim-collapse",_="wux-ui-3ds wux-ui-3ds-1x wux-windows-docking-element-collapseIcon",w=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return r.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{dockingZoneSize:{defaultValue:100,type:"number",advancedSetter:!0,recordFlag:!0},minSize:{defaultValue:20,type:"number"},maxSize:{defaultValue:screen.width,advancedSetter:!0,type:"number"},side:{defaultValue:p.WUXDockAreaEnum.TopDockArea,type:"number",readOnly:!0},interactiveDockAreaVisibleFlag:{defaultValue:!1,type:"boolean"},collapsibleFlag:{defaultValue:!0,type:"boolean"},collapseDockingZoneFlag:{defaultValue:!1,advancedSetter:!0,type:"boolean",recordFlag:!0},overlayDockingZoneFlag:{defaultValue:!1,type:"boolean"},visibleCollapserFlag:{defaultValue:!0,type:"boolean"},collapserStyle:{defaultValue:t.COLLAPSER_STYLE.STANDARD,type:"enum",category:"Appearance",readOnly:!0},visibleDockingZoneFlag:{defaultValue:!0,type:"boolean"},resizableFlag:{defaultValue:!0,type:"boolean"},dockingZoneContent:{defaultValue:null,type:"object"},freeZoneContent:{defaultValue:null,type:"object"},useBordersFlag:{defaultValue:!0,type:"boolean"},useBackgroundFlag:{defaultValue:!1,type:"boolean"},alignment:{defaultValue:"near",type:"string",category:"Appearance"},autoExpandFlag:{defaultValue:!0,type:"boolean"}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._scrollBarSize=0,this._collapserSize=20,this.__forceCollapseDockingZoneFlagCpt=0,this._collapserVisibilityToBeChanged=!1,this._transitionInProgress=!1,e.prototype.init.apply(this,t)},t.prototype.buildView=function(){var e=this;this.elements.container.addClassName("wux-windows-docking-element"),h.setElementRecordMode(this.elements.container,c.RecordModes.DEFAULT_AND_CHILD),this.elements.dockingWithCollapserContainer=i.createElement("div",{class:"wux-windows-docking-and-collapser"}),this.elements.collapser=i.createElement("div",{class:"wux-windows-docking-element-collapser"}),n.Engine.ie||this.elements.collapser.addClassName("collapser-not-IE"),this.elements.dockingZoneMask=i.createElement("div",{class:"wux-windows-docking-element-docking-zone-mask"}),this.elements.fixedArea=i.createElement("div",{class:"wux-windows-docking-element-fixed-area"}).inject(this.elements.dockingZoneMask),this.elements.dockingZone=i.createElement("div",{class:"wux-windows-docking-element-docking-zone"}).inject(this.elements.dockingZoneMask),this.elements.resizeHandler=i.createElement("div",{class:"wux-windows-docking-element-resize-handler"}),this.elements._resizeHandlers=[this.elements.resizeHandler],this.elements.freeZone=i.createElement("div",{class:"wux-windows-docking-element-free-zone"}),this.elements.hackResize=i.createElement("div",{class:"wux-windows-docking-element-hack-resize"}).inject(this.elements.container),this.elements.hackResize.addClassName(g),this.elements.interactiveDockArea=i.createElement("div",{class:"wux-windows-docking-element-interactive-dock-area"}),this._pinnedFlag=!1,Object.defineProperty(this,"pinnedFlag",{get:function(){return e._pinnedFlag}}),this._onDocumentMouseMoveForAutoExpandBind=S.bind(this),this._onCollapserMouseEnterForAutoExpandBind=x.bind(this),this._onCollapserMouseLeaveForAutoExpandBind=P.bind(this)},t.prototype.handleEvents=function(){b.call(this),k.call(this)},t.prototype._postBuildView=function(){var e=this._getCollapseDockingZoneFlagFromPreferences();e&&(this.collapseDockingZoneFlag=e.collapseDockingZoneFlag)},t.prototype._applySide=function(){var e=this,t=this._getClassName();this.elements.container.addClassName(t),this.elements.collapser.addClassName(t),this.elements.dockingWithCollapserContainer.addClassName(t),this.elements.dockingZoneMask.addClassName(t),this.elements.dockingZone.addClassName(t),this.elements._resizeHandlers.forEach((function(e){return e&&e.classList.add(t)})),this.elements.freeZone.addClassName(t),this.elements.interactiveDockArea.addClassName(t),this.side&p.WUXDockAreaEnum.LeftDockArea||this.side&p.WUXDockAreaEnum.TopDockArea?(this.elements.collapser.inject(this.elements.dockingWithCollapserContainer),this.elements.dockingZoneMask.inject(this.elements.dockingWithCollapserContainer),this.elements._resizeHandlers.forEach((function(t){return t&&t.inject(e.elements.dockingWithCollapserContainer)})),this.elements.dockingWithCollapserContainer.inject(this.elements.container),this.elements.freeZone.inject(this.elements.container)):(this.elements._resizeHandlers.forEach((function(t){return t&&t.inject(e.elements.dockingWithCollapserContainer)})),this.elements.dockingZoneMask.inject(this.elements.dockingWithCollapserContainer),this.elements.collapser.inject(this.elements.dockingWithCollapserContainer),this.elements.freeZone.inject(this.elements.container),this.elements.dockingWithCollapserContainer.inject(this.elements.container)),this.elements.interactiveDockArea.inject(this.elements.dockingZoneMask)},t.prototype._preEditDockingZoneSize=function(e,t){return"100%"===t||(void 0!==this.maxSize&&t>this.maxSize?{validValue:this.maxSize}:!(void 0!==this.minSize&&t<this.minSize)||{validValue:this.minSize})},t.prototype._applyDockingZoneSize=function(e){this._updateDockingZoneSize()},t.prototype._applyIdentifier=function(){this.identifier&&(this.getContent().setAttribute("wux-identifier",this.identifier),this.elements.dockingWithCollapserContainer.setAttribute("wux-identifier",this.identifier))},t.prototype._getClassName=function(){switch(this.side){case p.WUXDockAreaEnum.LeftDockArea:return"wux-docking-element-left";case p.WUXDockAreaEnum.RightDockArea:return"wux-docking-element-right";case p.WUXDockAreaEnum.TopDockArea:return"wux-docking-element-top";case p.WUXDockAreaEnum.BottomDockArea:return"wux-docking-element-bottom"}return""},t.prototype._saveCollapseDockingZoneFlagInPreferences=function(){this.identifier&&l.saveDataInLocalPreferences(this,this._getClassName(),"collapseDockingZoneFlag",{collapseDockingZoneFlag:this.collapseDockingZoneFlag})},t.prototype._getCollapseDockingZoneFlagFromPreferences=function(){if(this.identifier)return l.getDataFromLocalPreferences(this,this._getClassName(),"collapseDockingZoneFlag")},t.prototype._applyInteractiveDockAreaVisibleFlag=function(){this.interactiveDockAreaVisibleFlag?this.elements.interactiveDockArea.setAttributeNode(document.createAttribute("displayed")):this.elements.interactiveDockArea.removeAttribute("displayed")},t.prototype._applyCollapsibleFlag=function(){this.collapsibleFlag||(this.__forceCollapseDockingZoneFlagCpt++,this.collapseDockingZoneFlag=!1,this.__forceCollapseDockingZoneFlagCpt--),this._updateSizes()},t.prototype.__shouldCollapserBeVisible=function(){return!(this.collapserStyle===t.COLLAPSER_STYLE.MOVABLE&&(this.pinnedFlag||!v.call(this)))&&(!(this.collapserStyle===t.COLLAPSER_STYLE.FIXED_AREA&&!this.collapseDockingZoneFlag&&(!this.elements._tab||this.elements._tab.getVisiblePageCount()<=1))&&(this.collapsibleFlag&&this.visibleDockingZoneFlag&&this.visibleCollapserFlag))},t.prototype._updateCollapserSize=function(){var e=this;this.__shouldCollapserBeVisible()?(this.collapserStyle===t.COLLAPSER_STYLE.MOVABLE?this._collapserSize=0:this._collapserSize=20,e._transitionInProgress&&!e._collapserVisibilityToBeChanged&&e.getContent().offsetParent?(e._collapserVisibilityToBeChanged=!0,e.addEventListener("dimensionsChanged",(function(){e._collapserVisibilityToBeChanged&&(e._collapserVisibilityToBeChanged=!1,e.elements.collapser.removeClassName(g))}),{once:!0})):(e._collapserVisibilityToBeChanged=!1,e.elements.collapser.removeClassName(g))):(this._collapserVisibilityToBeChanged=!1,this._collapserSize=0,this.elements.collapser.addClassName(g))},t.prototype.getCollasperSize=function(){return this._collapserSize},t.prototype._updateDockingZoneSize=function(){var e=this._hasScrollbar();e&&0===this._scrollBarSize?this._scrollBarSize=l.getScrollbarWidth():e||(this._scrollBarSize=0);var t,i,n,o,s,r=this.side,a=0;if(r===p.WUXDockAreaEnum.TopDockArea||r===p.WUXDockAreaEnum.BottomDockArea){t="height";var d=C.call(this);a=d,this.elements.dockingZone.setStyle("margin-top",d+"px"),i="100%"===this.dockingZoneSize?"100%":this.dockingZoneSize+this._scrollBarSize-d+"px"}else r!==p.WUXDockAreaEnum.LeftDockArea&&r!==p.WUXDockAreaEnum.RightDockArea||(t="width",i="100%"===this.dockingZoneSize?"100%":this.dockingZoneSize+this._scrollBarSize+"px");if("100%"!==i){var h=this.getResizeInfos();h.maxPossibleSize>0&&(i=Math.min(Number.parseInt(i),h.maxPossibleSize)+"px")}n=this.visibleDockingZoneFlag&&!this.collapseDockingZoneFlag?"100%"===i?"100%":(Number.parseInt(i)+a).toString()+"px":"0px",o=this.visibleDockingZoneFlag?this.visibleCollapserFlag?this.collapseDockingZoneFlag?this._collapserSize+"px":"100%"===i?"100%":Number.parseInt(n)+this._collapserSize+"px":n:"0px",s=!this.visibleDockingZoneFlag||this.collapseDockingZoneFlag&&0===this._collapserSize||this.overlayDockingZoneFlag?"100%":this.collapseDockingZoneFlag&&0!==this._collapserSize?"calc(100% - "+this._collapserSize+"px)":"calc(100% - "+("100%"===i?0:Number.parseInt(o))+"px)",this.elements.dockingZone.setStyle(t,i),this.elements.dockingZoneMask.setStyle(t,n),this.elements.dockingWithCollapserContainer.setStyle(t,o),this.elements.freeZone.setStyle(t,s),this._updateResizeHandlersSizes()},t.prototype._updateSizes=function(){this._updateCollapserSize(),this._updateDockingZoneSize()},t.prototype._applyOverlayDockingZoneFlag=function(){if(this.overlayDockingZoneFlag){switch(this.side){case p.WUXDockAreaEnum.TopDockArea:this.elements.dockingWithCollapserContainer.addClassName("wux-windows-docking-element-overlay-top");break;case p.WUXDockAreaEnum.BottomDockArea:this.elements.dockingWithCollapserContainer.addClassName("wux-windows-docking-element-overlay-bottom");break;case p.WUXDockAreaEnum.LeftDockArea:this.elements.dockingWithCollapserContainer.addClassName("wux-windows-docking-element-overlay-left");break;case p.WUXDockAreaEnum.RightDockArea:this.elements.dockingWithCollapserContainer.addClassName("wux-windows-docking-element-overlay-right")}this.elements.container.addClassName("wux-windows-docking-element-overlayed")}else this.elements.dockingWithCollapserContainer.removeClassName("wux-windows-docking-element-overlay-top"),this.elements.dockingWithCollapserContainer.removeClassName("wux-windows-docking-element-overlay-bottom"),this.elements.dockingWithCollapserContainer.removeClassName("wux-windows-docking-element-overlay-left"),this.elements.dockingWithCollapserContainer.removeClassName("wux-windows-docking-element-overlay-right"),this.elements.container.removeClassName("wux-windows-docking-element-overlayed");this._updateDockingZoneSize()},t.prototype._applyVisibleCollapserFlag=function(){this._updateSizes()},t.prototype._applyCollapserStyle=function(){var e="";this.collapserStyle===t.COLLAPSER_STYLE.FIXED_AREA?(e="fixed-area",B.call(this)):this.collapserStyle===t.COLLAPSER_STYLE.MOVABLE?(e="movable",I.call(this)):this.collapserStyle===t.COLLAPSER_STYLE.STANDARD&&(e="standard"),this.elements.container.setAttribute("collapser-style",e),this.collapserStyle===t.COLLAPSER_STYLE.FIXED_AREA&&this.side&p.WUXDockAreaEnum.BottomDockArea&&(this.elements._resizeHandlers.push(i.createElement("div",{class:"wux-windows-docking-element-resize-handler wux-windows-docking-element-resize-handler-secondary"})),this.elements._resizeHandlers.push(i.createElement("div",{class:"wux-windows-docking-element-resize-handler wux-windows-docking-element-resize-handler-secondary"})))},t.prototype._updateCollapserAutomaticPosition=function(e){if(void 0!==e&&!this._collapseIconPosSetByUser){var t=this.elements.collapser,i=this.elements.dockingWithCollapserContainer;t&&i&&(i.getBoundingClientRect(),t.setStyle("top",e+"px"))}},t.prototype._preEditCollapseDockingZoneFlag=function(){return this.__forceCollapseDockingZoneFlagCpt>0||this.collapsibleFlag},t.prototype._applyCollapseDockingZoneFlag=function(){var e=this;if(!l.browserIsIE()){var t=void 0;if(this.__onTransitionEnd=function(){e.elements.container&&(l.browserIsIE()||(e._transitionInProgress=!1,e.elements.dockingZone.removeClassName(f),e.elements.dockingZoneMask.removeClassName(f),e.elements.freeZone.removeClassName(f),e.elements.dockingWithCollapserContainer.removeClassName(f)),e.overlayDockingZoneFlag?d.removeEventOnElement(e,e.elements.dockingZone,"transitionend",e.__onTransitionEnd):d.removeEventOnElement(e,e.elements.freeZone,"transitionend",e.__onTransitionEnd),e.fire("dimensionsChanged"),clearTimeout(t))},this._transitionInProgress)this.__onTransitionEnd();else{this._transitionInProgress=!0;var i=this.overlayDockingZoneFlag?this.elements.dockingZone:this.elements.freeZone;d.addEventOnElement(this,i,"transitionend",this.__onTransitionEnd),t=setTimeout(this.__onTransitionEnd,500),this.elements.dockingZone.addClassName(f),this.elements.dockingZoneMask.addClassName(f),this.elements.freeZone.addClassName(f),this.elements.dockingWithCollapserContainer.addClassName(f)}}this._expandTimer||y.call(this,!this.collapseDockingZoneFlag),this.collapseDockingZoneFlag?W.call(this):E.call(this)},t.prototype._applyVisibleDockingZoneFlag=function(){this.visibleDockingZoneFlag?(this.elements.dockingZone.removeClassName(g),this.elements.dockingZoneMask.removeClassName(g)):(this.elements.dockingZone.addClassName(g),this.elements.dockingZoneMask.addClassName(g)),O.call(this),this._updateSizes()},t.prototype._applyResizableFlag=function(){O.call(this)},t.prototype._applyMinSize=function(){void 0!==this.minSize&&null!==this.minSize&&(void 0!==this.maxSize&&null!==this.maxSize&&this.minSize>this.maxSize&&(this.maxSize=this.minSize),"100%"!==this.dockingZoneSize&&this.minSize>this.dockingZoneSize&&(this.dockingZoneSize=this.minSize))},t.prototype._preEditMaxSize=function(e,t){return!(void 0!==this.minSize&&null!==this.minSize&&this.minSize>t)||{validValue:this.minSize}},t.prototype._applyMaxSize=function(){void 0!==this.maxSize&&null!==this.maxSize&&"100%"!==this.dockingZoneSize&&this.maxSize<this.dockingZoneSize&&(this.dockingZoneSize=this.maxSize)},t.prototype.getResizeInfos=function(){var e=D.call(this);switch(this.side){case p.WUXDockAreaEnum.TopDockArea:return{factor:1,resizeCursor:"ns-resize",directionProp:"pageY",maxPossibleSize:this.elements.dockingZoneMask.offsetHeight+e.offsetHeight-50};case p.WUXDockAreaEnum.BottomDockArea:return{factor:-1,resizeCursor:"ns-resize",directionProp:"pageY",maxPossibleSize:this.elements.dockingZoneMask.offsetHeight+e.offsetHeight-50};case p.WUXDockAreaEnum.LeftDockArea:return{factor:1,resizeCursor:"ew-resize",directionProp:"pageX",maxPossibleSize:this.elements.dockingZoneMask.offsetWidth+e.offsetWidth-50};case p.WUXDockAreaEnum.RightDockArea:return{factor:-1,resizeCursor:"ew-resize",directionProp:"pageX",maxPossibleSize:this.elements.dockingZoneMask.offsetWidth+e.offsetWidth-50}}},t.prototype._applyDockingZoneContent=function(e){e&&e.remove(),this.dockingZoneContent&&(i.is(this.dockingZoneContent,"element")&&(this._properties.dockingZoneContent.value=new i.extendElement(this.dockingZoneContent)),this.dockingZoneContent.inject(this.elements.dockingZone)),this.collapserStyle===t.COLLAPSER_STYLE.MOVABLE&&this._updateCollapserSize()},t.prototype.addContent=function(e,t){var i=this;if(t&&m(e)){this.elements._tab||(this.elements._tab=new s({tabBarDOMContainer:this.elements.collapser,tabPanelContainer:this.elements.dockingZone,_noCSSOnParent:!0,displayStyle:"dockingStyle",position:T(this.side),hideTabBarWhenOnlyOnePageFlag:!0}),this.elements._tab.getContent().addClassName("wux-windows-docking-element-tab"),this.elements._tab.tabBar.centeredFlag=!1,d.addEventOnElement(this,this.elements._tab.tabBar,"click",(function(e){e.stopPropagation()})),d.addEventOnElement(this,this.elements._tab.tabBar,a.POINTERDOWN,(function(e){if(e.dsModel){var t=e.dsModel.value,n=i.elements._tab.getPageContentFromValue(t);n&&n.dsModel&&n.dsModel._onDragPointerDown(e)}})));var n=this.elements._tab.add(e);if(t&&void 0!==t.dockingZoneSize){var o=n.value,r=this.elements._tab.getIndexesFromValues([o])[0];this.elements._tab._tabContent[r].dockingZoneSize=t.dockingZoneSize}}else this.elements.dockingZone.appendChild(e);d.onNodeRendered(e.getContent?e.getContent():e.content||e,(function(){i._updateResizeHandlersSizes()}),{once:!0})},t.prototype._getDockingZoneSize=function(e){if(this.elements._tab)for(var t=this.elements._tab._tabContent,i=0;i<t.length;i++)if(t[i].content===e)return t[i].dockingZoneSize},t.prototype._setDockingZoneSize=function(e,t){if(this.elements._tab)for(var i=this.elements._tab._tabContent,n=0;n<i.length;n++)if(i[n].content===e){i[n].dockingZoneSize=t;break}},t.prototype.containsContent=function(e){return this._isContentInTab(e)?this.elements._tab.containsContent(e):d.firstParentWithClass(e,"wux-windows-docking-element-docking-zone")===this.elements.dockingZone},t.prototype.replaceContent=function(e,t){var n=m(t)?t.content:t,o=m(e)?e.content:e;if(this._isContentInTab(n)&&this._isContentInTab(o)){this.elements._tab.removeTab(n);var s=this.elements._tab.getIndexOf(o);void 0!==s&&this.elements._tab.update(s,m(t)?t:{content:t})}else m(e)||(i.is(n,"element")&&(n=new i.extendElement(n)),n.inject(e,"before"),e.remove())},t.prototype.removeContent=function(e){this._isContentInTab(e)?this.elements._tab.removeTab(e):e.remove()},t.prototype.updateContent=function(e){if(this._isContentInTab(e.content)){var t=this.elements._tab.getIndexOf(e.content);t>=0&&this.elements._tab.update(t,e)}},t.prototype.updateContentVisibility=function(e,t){if(this._isContentInTab(e)){var i=this.elements._tab.getIndexOf(e);if(i>=0){var n=this.elements._tab.getPageValueFromIndex(i);this.elements._tab._setTabVisibility(n,t)}}},t.prototype.activateTab=function(e){if(this._isContentInTab(e)){var t=this.elements._tab.getIndexOf(e);if(t>=0){var i=this.elements._tab.getPageValueFromIndex(t);this.elements._tab.tabBar.value=[i]}}},t.prototype.isContentActive=function(e){if(this._isContentInTab(e)){var t=this.elements._tab.getIndexOf(e);if(t>=0){var i=this.elements._tab.getPageValueFromIndex(t);return!!this.elements._tab._getTabVisibility(i)&&this.elements._tab.tabBar.value.indexOf(i)>-1}}return!0},t.prototype.getIndexFromContent=function(e){if(this._isContentInTab(e))return this.elements._tab.getIndexOf(e);var t=d.firstParentWithClass(e,"wux-windows-docking-element-docking-zone");return t?t.getChildren().indexOf(e):void 0},t.prototype._isContentInTab=function(e){if(this.elements._tab)return-1!==this.elements._tab.getIndexOf(e)},t.prototype._applyFreeZoneContent=function(e){e&&e.remove(),this.freeZoneContent&&(i.is(this.freeZoneContent,"element")&&(this._properties.freeZoneContent.value=new i.extendElement(this.freeZoneContent)),this.freeZoneContent.inject(this.elements.freeZone))},t.prototype._applyUseBordersFlag=function(e){this.useBordersFlag?this.elements.dockingZone.addClassName("wux-docking-element-useBorders"):this.elements.dockingZone.removeClassName("wux-docking-element-useBorders"),this._updateResizeHandlersSizes()},t.prototype._applyUseBackgroundFlag=function(e){this.useBackgroundFlag?this.elements.dockingZone.addClassName("wux-docking-element-use-background"):this.elements.dockingZone.removeClassName("wux-docking-element-use-background"),this._updateResizeHandlersSizes()},t.prototype._applyAlignment=function(){"center"===this.alignment?(this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-near"),this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-far"),this.elements.dockingZoneMask.addClassName("wux-docking-element-align-center")):"far"===this.alignment?(this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-near"),this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-center"),this.elements.dockingZoneMask.addClassName("wux-docking-element-align-far")):(this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-center"),this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-far"),this.elements.dockingZoneMask.addClassName("wux-docking-element-align-near")),O.call(this),this._updateResizeHandlersSizes()},t.prototype._applyAutoExpandFlag=function(){this.autoExpandFlag?(d.addEventOnElement(this,this.elements.collapser,"mouseenter",this._onCollapserMouseEnterForAutoExpandBind),d.addEventOnElement(this,this.elements.collapser,"mouseleave",this._onCollapserMouseLeaveForAutoExpandBind)):(d.removeEventOnElement(this,this.elements.collapser,"mouseenter",this._onCollapserMouseEnterForAutoExpandBind),d.removeEventOnElement(this,this.elements.collapser,"mouseleave",this._onCollapserMouseLeaveForAutoExpandBind))},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("collapserStyle")&&this._applyCollapserStyle(),this.isDirty("side")&&this._applySide(),this.isDirty("dockingZoneSize")&&u._applyForAdvancedSetterProperty(this,"dockingZoneSize",t.dockingZoneSize,this.dockingZoneSize),this.isDirty("interactiveDockAreaVisibleFlag")&&this._applyInteractiveDockAreaVisibleFlag(),this.isDirty("resizableFlag")&&this._applyResizableFlag(),this.isDirty("dockingZoneContent")&&this._applyDockingZoneContent(),this.isDirty("freeZoneContent")&&this._applyFreeZoneContent(),this.isDirty("collapsibleFlag")&&this._applyCollapsibleFlag(),this.isDirty("visibleDockingZoneFlag")&&this._applyVisibleDockingZoneFlag(),this.isDirty("useBordersFlag")&&this._applyUseBordersFlag(t.useBordersFlag),this.isDirty("useBackgroundFlag")&&this._applyUseBackgroundFlag(t.useBackgroundFlag),this.isDirty("collapseDockingZoneFlag")&&u._applyForAdvancedSetterProperty(this,"collapseDockingZoneFlag",t.collapseDockingZoneFlag||!1,this.collapseDockingZoneFlag),this.isDirty("overlayDockingZoneFlag")&&this._applyOverlayDockingZoneFlag(),this.isDirty("visibleCollapserFlag")&&this._applyVisibleCollapserFlag(),this.isDirty("alignment")&&this._applyAlignment(),this.isDirty("autoExpandFlag")&&this._applyAutoExpandFlag()},t.prototype._getFixedArea=function(){return this.elements.fixedArea},t.prototype._getFixedAreaWidth=function(){return this.elements.fixedArea?this.elements.fixedArea.offsetWidth:0},t.prototype.getSensibilityDockArea=function(){return{x:0,y:0,width:0,height:0}},t.prototype._getDockingZoneDimensions=function(){var e=window.getComputedStyle(this.elements.dockingZoneMask),i=parseFloat(e.width),n=parseFloat(e.height);if(this.collapserStyle===t.COLLAPSER_STYLE.FIXED_AREA){var o=window.getComputedStyle(this.elements.expanderBar);i-=parseFloat(o.width)+1,n-=parseFloat(o.height)+1}return{width:i,height:n}},t.prototype._getScrollBarSize=function(){return this._scrollBarSize},t.prototype._scrollToBottom=function(){},t.prototype.__hasBackground=function(){return!1},t.prototype._pointerEventsAllIfOveflowY=function(){this.pointerEventsAllIfOverflow()},t.prototype._pointerEventsAllIfOverflow=function(){if(this.getContent().getComputedSize(),this.elements&&this.elements.dockingZone){var e=this.__hasBackground();this._hasScrollbar()?(this.elements.dockingZone.addClassName("wux-windows-docking-element-inoverflow"),this.elements.dockingZoneMask.removeClassName("wux-windows-docking-element-has-background")):e?(this.elements.dockingZone.removeClassName("wux-windows-docking-element-inoverflow"),this.elements.dockingZoneMask.addClassName("wux-windows-docking-element-has-background")):(this.elements.dockingZone.removeClassName("wux-windows-docking-element-inoverflow"),this.elements.dockingZoneMask.removeClassName("wux-windows-docking-element-has-background"))}},t.prototype.pointerEventsAllIfOverflow=function(){this._pointerEventsAllIfOverflow()},t.prototype._hasScrollbar=function(){var e,t,i=this.elements.dockingZone;(void 0!==i.currentStyle&&(e=i.currentStyle.overflow),e)||(e=(n=window.getComputedStyle(i,""))?n.overflow:"");if("scroll"===e)return!0;var n,o=this.side===p.WUXDockAreaEnum.RightDockArea||this.side===p.WUXDockAreaEnum.LeftDockArea;o?(void 0!==i.currentStyle&&(t=i.currentStyle.overflowY),t||(t=(n=window.getComputedStyle(i,""))?n.overflowY:"")):(void 0!==i.currentStyle&&(t=i.currentStyle.overflowX),t||(t=(n=window.getComputedStyle(i,""))?n.overflowX:""));return"scroll"===t||0!==i.getChildren().length&&(!(!/^(visible|auto)$/.test(e)&&!/^(visible|auto)$/.test(t))&&(o?i.scrollHeight>i.offsetHeight:i.scrollWidth>i.offsetWidth))},t.prototype._updateResizeHandlersSizes=function(){var e,i;if("center"===this.alignment&&this.side&p.WUXDockAreaEnum.BottomDockArea)if(this.collapserStyle===t.COLLAPSER_STYLE.FIXED_AREA){var n=null===(i=null===(e=this._getFixedArea())||void 0===e?void 0:e.firstElementChild)||void 0===i?void 0:i.getBoundingClientRect(),o=this.elements.expanderBar.getBoundingClientRect(),s=this.elements.dockingZone.getBoundingClientRect();if(n&&o&&s)(a=this.elements._resizeHandlers[0]).style.left=n.left+"px",a.style.width=n.width+"px",(a=this.elements._resizeHandlers[1])&&(a.style.left=o.left+"px",a.style.width=n.left-o.left+"px"),(a=this.elements._resizeHandlers[2])&&(a.style.left=n.right+"px",a.style.width=s.right-n.right+"px")}else{(a=this.elements._resizeHandlers[0]).style.left="",a.style.width="",a.style.top=""}else{if(this.useBordersFlag||this.useBackgroundFlag||this.__hasBackground())return(a=this.elements._resizeHandlers[0]).style.left="",a.style.width="",void(a.style.top="");if(this.side&p.WUXDockAreaEnum.BottomDockArea||this.side&p.WUXDockAreaEnum.TopDockArea){var r=0;if(this.elements.expanderBar){o=this.elements.expanderBar.getBoundingClientRect();r+=o.width}Array.from(this.elements.dockingZone.children).forEach((function(e){r+=e.getBoundingClientRect().width})),(a=this.elements._resizeHandlers[0]).style.left="0px",a.style.width=r+"px"}else{var a,l=0;if(this.elements.expanderBar){o=this.elements.expanderBar.getBoundingClientRect();l=o.height}Array.from(this.elements.dockingZone.children).forEach((function(e){l+=e.getBoundingClientRect().height})),(a=this.elements._resizeHandlers[0]).style.top="0px",a.style.height=l+"px"}}},t}(o);function v(){if(!this.dockingZoneContent)return!1;if(!this.dockingZoneContent.match('[class^="wux-skeleton"]'))return!0;var e=this.dockingZoneContent.querySelector('[class$="container"]');return e&&e.hasChildNodes()}function y(e){this._pinnedFlag!==e&&(this._pinnedFlag=e,this.collapserStyle===w.COLLAPSER_STYLE.FIXED_AREA&&F.call(this),this.collapserStyle===w.COLLAPSER_STYLE.MOVABLE&&this._updateSizes())}function b(){var e=this,t=0,i=0,n=0,o=0,s=0,r="",l=function(a){a.preventDefault(),t=a[r]-o;var l=i+s*t,d=Math.max(e.minSize,Math.min(l,e.maxSize,n));e.setPropertyFromUIInteraction("dockingZoneSize",d),e.fire("dockIsResizing")},h=function(){var t=e.getOwnerDocument();t.body.removeAttribute("resizing"),d.removeEventOnElement(e,t,a.POINTERMOVE,l),d.removeEventOnElement(e,t,a.POINTERUP,h),e.elements.hackResize.setStyle("cursor","default"),e.elements.hackResize.addClassName(g),e.fire("dockResize")},c=function(t){if(!1===e.collapseDockingZoneFlag&&!0===e.resizableFlag){t.preventDefault();var c=e.getOwnerDocument();c.body.setAttributeNode(document.createAttribute("resizing")),d.addEventOnElement(e,c,a.POINTERMOVE,l),d.addEventOnElement(e,c,a.POINTERUP,h);var u=e.getResizeInfos();n=u.maxPossibleSize,s=u.factor,r=u.directionProp,i=Math.min(e.dockingZoneSize,u.maxPossibleSize),o=t[r],e.elements.hackResize.setStyle("cursor",u.resizeCursor),e.elements.hackResize.removeClassName(g),e.fire("dockStartResize")}};this.elements._resizeHandlers.forEach((function(t){return t&&d.addEventOnElement(e,t,a.POINTERDOWN,c)})),d.addResizeObserverOnElement(this,this,this.elements.dockingZone,(function(){e._updateResizeHandlersSizes()}))}function D(){for(var e=this.elements.freeZone,t=!1;!t;){t=!0;for(var i=e.getChildren(),n=0;n<i.length;n++)if(i[n].hasClassName("wux-windows-docking-element")){var o=i[n].dsModel;o&&(e=o.elements.freeZone,t=!1)}}return e}function k(){d.addEventOnElement(this,this.elements.collapser,"click",A.bind(this)),this.collapserStyle===w.COLLAPSER_STYLE.FIXED_AREA&&this.elements.expanderBar.addEventListener("click",A.bind(this))}function A(){if(this.collapserStyle!==w.COLLAPSER_STYLE.MOVABLE||!this._collapserHasBeenMoved){if(this._expandTimer)clearTimeout(this._expandTimer),this._expandTimer=null,this.setPropertyFromUIInteraction("collapseDockingZoneFlag",!1);else if(this.autoExpandFlag&&!0===this._listenToMouseMove){this._listenToMouseMove=!1;var e=this.getOwnerDocument();d.removeEventOnElement(this,e,a.POINTERMOVE,this._onDocumentMouseMoveForAutoExpandBind)}else this.setPropertyFromUIInteraction("collapseDockingZoneFlag",!this.collapseDockingZoneFlag);y.call(this,!this.collapseDockingZoneFlag),this.elements.dockingWithCollapserContainer.removeAttribute("expand-hover"),this._saveCollapseDockingZoneFlagInPreferences()}}function W(){this.getContent().setAttributeNode(document.createAttribute("collapsed")),this.elements.dockingWithCollapserContainer.setAttributeNode(document.createAttribute("collapsed")),O.call(this),this.collapserStyle===w.COLLAPSER_STYLE.FIXED_AREA?this._updateSizes():this._updateDockingZoneSize();var e=-this.dockingZoneSize+"px";switch(this.side){case p.WUXDockAreaEnum.TopDockArea:this.elements.dockingZone.getStyle("top")===e&&"0px"===this.elements.dockingZoneMask.getStyle("height")?this.__onTransitionEnd():this.elements.dockingZone.setStyle("top",e);break;case p.WUXDockAreaEnum.BottomDockArea:"0px"===this.elements.dockingZoneMask.getStyle("height")&&this.__onTransitionEnd();break;case p.WUXDockAreaEnum.LeftDockArea:this.elements.dockingZone.getStyle("left")===e&&"0px"===this.elements.dockingZoneMask.getStyle("width")?this.__onTransitionEnd():this.elements.dockingZone.setStyle("left",e);break;case p.WUXDockAreaEnum.RightDockArea:"0px"===this.elements.dockingZoneMask.getStyle("width")&&this.__onTransitionEnd()}this.elements._tab&&this.elements._tab.tabBar.getContent().addClassName(g),this.fire("collapse")}function E(){this.getContent().removeAttribute("collapsed"),this.elements.dockingWithCollapserContainer.removeAttribute("collapsed"),O.call(this),this.collapserStyle===w.COLLAPSER_STYLE.FIXED_AREA?this._updateSizes():this._updateDockingZoneSize();var e="0px";switch(this.side){case p.WUXDockAreaEnum.TopDockArea:this.elements.dockingZone.getStyle("top")!==e&&""!==this.elements.dockingZone.getStyle("top")||"0px"===this.elements.dockingZoneMask.getStyle("height")?this.elements.dockingZone.setStyle("top",e):this.__onTransitionEnd();break;case p.WUXDockAreaEnum.BottomDockArea:this.elements.dockingZoneMask.getStyle("height")===this.dockingZoneSize+"px"&&this.__onTransitionEnd();break;case p.WUXDockAreaEnum.LeftDockArea:this.elements.dockingZone.getStyle("left")!==e&&""!==this.elements.dockingZone.getStyle("left")||"0px"===this.elements.dockingZoneMask.getStyle("width")?this.elements.dockingZone.setStyle("left",e):this.__onTransitionEnd();break;case p.WUXDockAreaEnum.RightDockArea:this.elements.dockingZoneMask.getStyle("width")===this.dockingZoneSize+"px"&&this.__onTransitionEnd()}this.elements._tab&&this.elements._tab.tabBar.getContent().removeClassName(g),this.fire("expand")}function C(){return this.elements.fixedArea?this.elements.fixedArea.offsetHeight:0}function F(){if(this.collapserStyle===w.COLLAPSER_STYLE.FIXED_AREA)if(this.pinnedFlag){var e=_;this.side&p.WUXDockAreaEnum.RightDockArea?e+=" wux-ui-3ds-open-right":this.side&p.WUXDockAreaEnum.BottomDockArea?e+=" wux-ui-3ds-open-down":this.side&p.WUXDockAreaEnum.LeftDockArea?e+=" wux-ui-3ds-open-left":this.side&p.WUXDockAreaEnum.TopDockArea&&(e+=" wux-ui-3ds-open-up"),this.elements.collapseIcon.className=e}else this.elements.collapseIcon.className=_+" wux-ui-3ds-pin"}function S(e){var t=this;l.isMouseOverElement(this.elements.dockingWithCollapserContainer,{x:e.clientX,y:e.clientY})?this._collapseTimer&&(clearTimeout(this._collapseTimer),this._collapseTimer=null):this._collapseTimer||(this._collapseTimer=setTimeout((function(){d.pushUserInteractionContext(),t.setPropertyFromUIInteraction("collapseDockingZoneFlag",!0),t.elements.dockingWithCollapserContainer.removeAttribute("expand-hover"),t.__collapseMemory=!1,d.popUserInteractionContext(),t._listenToMouseMove=!1;var e=t.getOwnerDocument();d.removeEventOnElement(t,e,a.POINTERMOVE,t._onDocumentMouseMoveForAutoExpandBind),t._collapseTimer=null}),1e3))}function x(){var e=this;!0!==this.collapseDockingZoneFlag||this._expandTimer||(this._expandTimer=setTimeout((function(){d.pushUserInteractionContext(),e.setPropertyFromUIInteraction("collapseDockingZoneFlag",!1),e.elements.dockingWithCollapserContainer.setAttributeNode(document.createAttribute("expand-hover")),d.popUserInteractionContext(),e._listenToMouseMove=!0;var t=e.getOwnerDocument();d.addEventOnElement(e,t,a.POINTERMOVE,e._onDocumentMouseMoveForAutoExpandBind),e._expandTimer=null}),300))}function P(){this._expandTimer&&(clearTimeout(this._expandTimer),this._expandTimer=null)}function B(){this.elements.expanderBar=i.createElement("div",{class:"wux-windows-docking-element-expanderBar"}),this.elements.collapseIconContainer=i.createElement("div",{class:"wux-windows-docking-element-collapse-icon-container"}).inject(this.elements.expanderBar),this.elements.collapseIcon=i.createElement("span",{class:_}).inject(this.elements.collapseIconContainer),this.elements.expanderBar.inject(this.elements.dockingZone,"before")}function I(){var e=this;this.elements.collapseIcon=i.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-lg wux-ui-3ds-menu wux-windows-docking-element-collapseIcon"}).inject(this.elements.collapser);var t,n,o,s,r=this.elements.dockingWithCollapserContainer,l=this.elements.collapser;this._collapseIconPosSetByUser=!1;var d=null,h=function(i){i.preventDefault();var r=i.clientX,a=i.clientY,h=e.side===p.WUXDockAreaEnum.TopDockArea||e.side===p.WUXDockAreaEnum.BottomDockArea;if(!e._getCurrentTouchMode()||!(h&&Math.abs(r-o)<5||!h&&Math.abs(a-s)<5)){null===d&&(d=e.elements.freeZone.style.pointerEvents,e.elements.freeZone.style.pointerEvents="none"),e._collapserHasBeenMoved=!0,e._collapseIconPosSetByUser=!0;var c=Math.max(0,Math.min(t.height-42,a-t.top+n.y)),u=Math.max(0,Math.min(t.width-42,r-t.left+n.x));l.setStyle("top",c+"px"),l.setStyle("left",u+"px")}};l.addEventListener(a.POINTERDOWN,(function(i){e._collapserHasBeenMoved=!1,t=r.getBoundingClientRect();var c=l.getBoundingClientRect();o=i.clientX,s=i.clientY,n={x:c.left-o,y:c.top-s};var u=e.getOwnerDocument();u.body.addEventListener(a.POINTERMOVE,h),u.body.addEventListener(a.POINTERUP,(function(){u.body.removeEventListener(a.POINTERMOVE,h),null!==d&&(e.elements.freeZone.style.pointerEvents=d,d=null)}),{once:!0})}))}function T(e){switch(e){case p.WUXDockAreaEnum.TopDockArea:return"top";case p.WUXDockAreaEnum.RightDockArea:return"right";case p.WUXDockAreaEnum.BottomDockArea:return"bottom";case p.WUXDockAreaEnum.LeftDockArea:return"left"}}function O(){var e=this,t="add";!0!==this.resizableFlag||!0!==this.visibleDockingZoneFlag||this.collapseDockingZoneFlag||(t="remove"),this.elements._resizeHandlers[0].classList[t](g),[1,2].forEach((function(i){var n=e.elements._resizeHandlers[i];n&&("center"===e.alignment?n.classList[t](g):n.classList.add(g))}))}return function(e){!function(e){e[e.STANDARD=0]="STANDARD",e[e.FIXED_AREA=1]="FIXED_AREA",e[e.MOVABLE=2]="MOVABLE"}(e.COLLAPSER_STYLE||(e.COLLAPSER_STYLE={}))}(w||(w={})),h.register(w,"DS/ControlsRec/AbstractRec"),u.addClass(w,"dockingElement"),w})),define("DS/Windows/WindowActivator",["require","exports","DS/Utilities/Dom","DS/Utilities/Utils"],(function(e,t,i,n){"use strict";return function(){function e(){}return e.getFocusedWidget=function(e){var t=n.getDocumentOwner(e).activeElement;return i.isElementInside(t,e)?t:null},e}()})),define("DS/Windows/WindowManager",["require","exports"],(function(e,t){"use strict";var i=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.setActiveWindow=function(t){return e.getInstance()._setActiveWindow(t)},e.prototype._setActiveWindow=function(e){if(this._activeWindow!==e){var t=this._activeWindow;this._activeWindow=e,this._activeWindow&&(this._activeWindow.activeFlag=!0),t&&(t.activeFlag=!1)}},e.getActiveWindow=function(){return e.getInstance()._activeWindow},e.bringToFront=function(t){return e.getInstance()._bringToFront(t)},e.prototype._bringToFront=function(e){if(e&&!e.getDockedFlag()&&!e.maximizedFlag){var t=e.getZIndex(),i=e.getFloatLayer()?e.getFloatLayer():"middle",n=-1,o=e.immersiveFrame;if(o){var s=[o];o._linkedImmersiveFrames&&s.push.apply(s,o._linkedImmersiveFrames);for(var r=0;r<s.length;r++){var a=s[r];for(var l in a.windows){var d=(u=a.windows[l]).getFloatLayer()?u.getFloatLayer():"middle";if(u&&!u.getDockedFlag()&&u!==e&&d===i){var h=u.getZIndex();n<h&&(n=h)}}}if("bottom"===i&&n>=100){var c=[];for(var l in o.windows){var u;d=(u=o.windows[l]).getFloatLayer()?u.getFloatLayer():"middle";u&&u!==e&&d===i&&c.push(u)}c.sort((function(e,t){return e.getZIndex()>t.getZIndex()?-1:1}));for(r=0;r<c.length;r++)n=r+1,c[r].getContent().setStyle("z-index",n.toString())}}if(-1!==n&&n>=t){var p=n+1;e._setZIndex(p)}}},e}();return i}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/Window",["require","exports","UWA/Core","DS/CoreBase/WebUXGlobalEnums","DS/Core/PointerEvents","DS/Core/WebUXComponents","DS/Core/TooltipManager","DS/Utilities/WUXUWAUtils","DS/Utilities/Utils","DS/Utilities/Dom","DS/Utilities/KeyboardUtils","DS/Utilities/DeviceUtils","DS/Utilities/TouchUtils","DS/Controls/Abstract","DS/Controls/Button","DS/Windows/WindowActivator","DS/Windows/WindowManager","DS/Menu/ContextualMenu","i18n!DS/Windows/assets/nls/translation","DS/WUXTypings/typings/WEBUX","DS/WUXTypings/typings/UWA","DS/Utilities/typings/types","./typings/types"],(function(e,t,i,n,o,s,r,a,l,d,h,c,u,p,m,g,f,_,w){"use strict";var v="wux-windows-window";function y(){this.elements.icon&&(this.elements.icon.remove(this.elements.iconPlaceholder),delete this.elements.icon);var e=d.generateIcon(this.icon);e?(this.elements.icon=e,this.elements.iconPlaceholder.show(),this.elements.icon.style.margin="0px",this.elements.icon.inject(this.elements.iconPlaceholder)):this.elements.iconPlaceholder.hide()}var b=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return a.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{title:{defaultValue:"",type:"string",category:"Appearance"},icon:{defaultValue:"",type:"object",category:"Appearance"},header:{defaultValue:null,type:"object",category:"Appearance"},content:{defaultValue:null,type:"object",category:"Behavior"},immersiveFrame:{defaultValue:null,type:"object",category:"Behavior"},position:{defaultValue:void 0,type:"object",category:"Appearance"},activeFlag:{defaultValue:!0,type:"boolean",category:"Behavior",advancedSetter:!0},movableFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},closeButtonFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},expandedFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},allowedDockAreas:{defaultValue:n.WUXDockAreaEnum.NoneDockArea,type:"integer",category:"Behavior"},currentDockArea:{defaultValue:n.WUXDockAreaEnum.NoneDockArea,type:"integer",category:"Behavior",advancedSetter:!0},windowGroup:{defaultValue:null,type:"object",category:"Behavior"},activeSnapArea:{defaultValue:n.WUXSnapAreaEnum.NoneArea,type:"integer",category:"Behavior"},resizableFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},width:{defaultValue:-1,type:"integer",category:"Appearance",advancedSetter:!0},height:{defaultValue:-1,type:"integer",category:"Appearance",advancedSetter:!0},minWidth:{defaultValue:150,defaultTouchValue:200,advancedSetter:!0,type:"integer",category:"Appearance"},minHeight:{defaultValue:0,type:"integer",category:"Appearance"},maximizedFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},allowMaximizeFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},maximizeButtonFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},horizontallyStretchableFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},verticallyStretchableFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},autoCloseFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},titleBarVisibleFlag:{defaultValue:!0,type:"boolean",category:"Appearance"},usePaddingFlag:{defaultValue:!0,type:"boolean",category:"Appearance"},ensureHeightDefinitionOnHierarchy:{defaultValue:!1,type:"boolean",category:"Behavior"},activateButtonsIfActionPerformed:{defaultValue:!0,type:"boolean",category:"Behavior"},buttons:{defaultValue:{},type:"object",category:"Behavior"},onContextualEvent:{defaultValue:function(e){return this._buildOrDelegateContextualMenu(e)},type:"function"},getDefaultFocusableElement:{defaultValue:void 0,type:"function",category:"Behavior"}}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_privateProperties",{get:function(){return{_floatLayer:{defaultValue:void 0,type:"string",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._savedPreferencesKeys=["position","dimension","dockedDimensions","dockArea","maximizedFlag"],this._titleBarCenteredFlag=!1,this._buttonsVisibleFlag=!0,this._computedMinWidth=0,e.prototype.init.apply(this,t)},t.prototype.buildView=function(){this._defaultButton=null,this.defaultButton=null,this._escapeButton=null,this._prefRestorationState=n.WUXPreferenceRestorationStateEnum.NotRestored,this.elements.container.addClassName("wux-windows-window"),this.elements.container.id=i.Utils.getUUID(),this.elements._titleBarDiv=new i.Element("div",{class:"wux-windows-window-titlebar"}),this.elements._titleBarDiv.inject(this.elements.container),this.elements._titleDiv=new i.Element("div",{class:"wux-windows-window-header-title"}).inject(this.elements._titleBarDiv),this.elements.iconPlaceholder=new i.Element("div",{class:"wux-window-icon-placeholder"}).inject(this.elements._titleDiv),this.elements._titleP=new i.Element("p",{text:this.title}),this.elements._titleP.inject(this.elements._titleDiv),this.elements._titlebarButtonsDiv=new i.Element("div",{class:"wux-windows-window-header-buttons-div"}),this.elements._titlebarButtonsDiv.inject(this.elements._titleBarDiv),this.elements._mainCollapsibleContainer=new i.Element("div",{class:"wux-windows-window-mask-content"}),this.elements._mainCollapsibleContainer.inject(this.elements.container),this.elements._mainContentDiv=new i.Element("div",{class:"wux-windows-window-maincontent wux-element-contentbox"}),this.elements._mainContentDiv.inject(this.elements._mainCollapsibleContainer),this.elements._headerDiv=new i.Element("div",{class:"wux-windows-window-header"}),this.elements._headerDiv.inject(this.elements._mainContentDiv),this.elements._contentDiv=new i.Element("div",{class:"wux-windows-window-content"}),this.elements._contentDiv.inject(this.elements._mainContentDiv),this.elements._ghostFloatableElement=new i.Element("div",{class:"wux-windows-window-ghost-floatable-element"});var e="wux-windows-window-resize-handler";this.elements._topResizeHandler=new i.Element("div",{class:e+" "+e+"-top "+e+"-side"}),this.elements._topResizeHandler.inject(this.elements.container),this.elements._topRightResizeHandler=new i.Element("div",{class:e+" "+e+"-top-right "+e+"-corner"}),this.elements._topRightResizeHandler.inject(this.elements.container),this.elements._rightResizeHandler=new i.Element("div",{class:e+" "+e+"-right "+e+"-side"}),this.elements._rightResizeHandler.inject(this.elements.container),this.elements._bottomRightResizeHandler=new i.Element("div",{class:e+" "+e+"-bottom-right "+e+"-corner"}),this.elements._bottomRightResizeHandler.inject(this.elements.container),this.elements._bottomResizeHandler=new i.Element("div",{class:e+" "+e+"-bottom "+e+"-side"}),this.elements._bottomResizeHandler.inject(this.elements.container),this.elements._bottomLeftResizeHandler=new i.Element("div",{class:e+" "+e+"-bottom-left "+e+"-corner"}),this.elements._bottomLeftResizeHandler.inject(this.elements.container),this.elements._leftResizeHandler=new i.Element("div",{class:e+" "+e+"-left "+e+"-side"}),this.elements._leftResizeHandler.inject(this.elements.container),this.elements._topLeftResizeHandler=new i.Element("div",{class:e+" "+e+"-top-left "+e+"-corner"}),this.elements._topLeftResizeHandler.inject(this.elements.container);var t="wux-windows-window-snap-area";this.elements._topSnapAreaDiv=new i.Element("div",{class:t+" "+t+"-top"}),this.elements._topSnapAreaDiv.inject(this.elements.container),this.elements._bottomSnapAreaDiv=new i.Element("div",{class:t+" "+t+"-bottom"}),this.elements._bottomSnapAreaDiv.inject(this.elements.container),this.elements._leftSnapAreaDiv=new i.Element("div",{class:t+" "+t+"-left"}),this.elements._leftSnapAreaDiv.inject(this.elements.container),this.elements._rightSnapAreaDiv=new i.Element("div",{class:t+" "+t+"-right"}),this.elements._rightSnapAreaDiv.inject(this.elements.container),this.elements._insideSnapAreaDiv=new i.Element("div",{class:t+" "+t+"-inside"}),this.elements._insideSnapAreaDiv.inject(this.elements._titleBarDiv)},t.prototype._postBuildView=function(){e.prototype._postBuildView.call(this),this._updateContentVisibleStateChange();var t=this;d.onNodeRendered(this.getContent(),(function(){t._isRendered=!0,t&&t.elements&&t.elements.container&&(t._applyHeight(),t._updateTitleMaxWidth(),t._applyPosition(),!0===t.activeFlag&&t._setFocus())})),this._manageContextualMenu()},t.prototype._manageContextualMenu=function(){if(void 0===this._ctxMenuToken){this._launchWebUXContextMenu=!1;var e=this,t=function(t){if(!e._launchWebUXContextMenu){var i=t.offsetX,n=t.offsetY;e._activateWindowForContextMenu(t.target),e._launchWebUXContextMenu=!0;var o=document.createEvent("HTMLEvents");o.initEvent("contextmenu",!0,!1),o.pageX=t.target.getOffsets().x+i,o.pageY=t.target.getOffsets().y+n,t.target.dispatchEvent(o),e._launchWebUXContextMenu=!1}};if(c.isMobileiOS()){var i,n=function(){var t=l.getDocumentWindow(e);if(t.getSelection&&t.getSelection())t.getSelection().removeAllRanges&&t.getSelection().removeAllRanges(),t.getSelection().empty&&t.getSelection().empty();else{var i=e.getOwnerDocument();if(i.getSelection){var n=i.getSelection();n&&n.empty&&n.empty()}}};d.addEventOnElement(this,this.elements._titleBarDiv,"DSlonghold",(function(e){r.hide(),t(e),i=setInterval(n,500)})),d.addEventOnElement(this,this.elements._titleBarDiv,o.POINTERUP,(function(e){setTimeout((function(){clearInterval(i)}),1e3)}))}this._ctxMenuToken=_.addEventListener(this.elements._titleBarDiv,{callback:function(t){var i=[];return e._launchWebUXContextMenu?i=e.onContextualEvent.call(e,{context:t.context,window:e,infos:t.info,data:t.data}):i}}),d.addEventOnElement(this,this.elements._titleBarDiv,"contextmenu",(function(e){t(e)}))}},t.prototype._activateWindowForContextMenu=function(e){this.activeFlag=!0},t.prototype._buildOrDelegateContextualMenu=function(e){var t=[],i=e.window;return e&&i&&(t=i.buildDefaultContextualMenu(e)),t},t.prototype.buildDefaultContextualMenu=function(e,t){this._supportedMenus=["close","maximize"];t=i.extend({close:!0,maximize:!0},t);var n=this,o=[];return this._supportedMenus.forEach((function(i){if(!0===t[i]){var s=i.substring(0,1).toUpperCase()+i.substring(1,i.length),r=n["_create"+s+"ContextualMenu"](e);o=o.concat(r)}})),o},t.prototype._createCloseContextualMenu=function(e){var t=this,i=[],o=t._getMenuToAddData("close",e);return o.canbeAdded&&i.push({type:"PushItem",title:o.closeAll?w.get("closeAllContextualMenu"):w.get("close"),icon:{iconName:"close",fontIconFamily:n.WUXManagedFontIcons.Font3DS},action:{callback:function(e){t._onCloseContextMenuAction(e.context)},context:o.menuTarget}}),i},t.prototype._createMaximizeContextualMenu=function(e){var t=this,i=[],o=this._getMenuToAddData("maximize",e),s=Boolean(this.maximizedFlag);return o.canbeAdded&&i.push({type:"PushItem",title:s?w.get("restore"):w.get("maximize"),icon:{iconName:s?"resize-small":"resize-full",fontIconFamily:n.WUXManagedFontIcons.Font3DS},action:{callback:function(e){t.maximizedFlag=!s}}}),i},t.prototype._getMenuToAddData=function(e,t){var i=!1;return"close"===e?i=this.closeButtonFlag:"maximize"===e&&(i=this.maximizeButtonFlag),{canbeAdded:i}},t.prototype._onCloseContextMenuAction=function(e){this.close()},t.prototype._applyTitle=function(e){if(this.elements._titleP.setText(this.title),this.title?this.elements._titleP.setStyle("padding-left",""):this.elements._titleP.setStyle("padding-left","0"),this.windowGroup&&this.windowGroup._updateTitle(),this.immersiveFrame&&this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea&&this.immersiveFrame._updateWindowInDockingArea(this),this.immersiveFrame&&this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea){var t=this.immersiveFrame.getDockingElement(this.currentDockArea);t&&t._updateResizeHandlersSizes()}},t.prototype._applyIdentifier=function(){this.identifier&&this.getContent().setAttribute("wux-identifier",this.identifier)},t.prototype._applyTouchMode=function(t){e.prototype._applyTouchMode.call(this,t),!0===this._getCurrentTouchMode()?this.elements._titleBarDiv.setAttributeNode(document.createAttribute("touch-mode")):this.elements._titleBarDiv.removeAttribute("touch-mode"),this._postEditTouchMode()},t.prototype._applyDisabled=function(t){e.prototype._applyDisabled.call(this,t),this.disabled?(this.elements.contentDisabler||(this.elements.contentDisabler=l.createContentDisablerDiv()),this.elements._mainCollapsibleContainer.appendChild(this.elements.contentDisabler)):this.elements.contentDisabler&&this.elements._mainCollapsibleContainer.removeChild(this.elements.contentDisabler)},t.prototype._postEditTouchMode=function(){var e=this._getCurrentTouchMode();this.windowGroup&&(this.windowGroup.touchMode=e),!0===e?this.minWidth===this.publishedProperties.minWidth.defaultValue&&(this.minWidth=this.publishedProperties.minWidth.defaultTouchValue):this.minWidth===this.publishedProperties.minWidth.defaultTouchValue&&(this.minWidth=this.publishedProperties.minWidth.defaultValue),this._applyWidth(),this._applyHeight(),this._applyPosition(),this._updateTitleMaxWidth()},t.prototype.getDefaultButtonLabel=function(e){var t;switch(e){case n.WUXStandardButtonEnum.Ok.name:t=w.get("ok");break;case n.WUXStandardButtonEnum.Open.name:t=w.get("open");break;case n.WUXStandardButtonEnum.Save.name:t=w.get("save");break;case n.WUXStandardButtonEnum.SaveAll.name:t=w.get("saveAll");break;case n.WUXStandardButtonEnum.Yes.name:t=w.get("yes");break;case n.WUXStandardButtonEnum.YesToAll.name:t=w.get("yesToAll");break;case n.WUXStandardButtonEnum.Retry.name:t=w.get("retry");break;case n.WUXStandardButtonEnum.Ignore.name:t=w.get("ignore");break;case n.WUXStandardButtonEnum.Cancel.name:t=w.get("cancel");break;case n.WUXStandardButtonEnum.Apply.name:t=w.get("apply");break;case n.WUXStandardButtonEnum.Reset.name:t=w.get("reset");break;case n.WUXStandardButtonEnum.RestoreDefaults.name:t=w.get("restoreDefaults");break;case n.WUXStandardButtonEnum.Help.name:t=w.get("help");break;case n.WUXStandardButtonEnum.No.name:t=w.get("no");break;case n.WUXStandardButtonEnum.NoToAll.name:t=w.get("noToAll");break;case n.WUXStandardButtonEnum.Abort.name:t=w.get("abort");break;case n.WUXStandardButtonEnum.Discard.name:t=w.get("discard");break;case n.WUXStandardButtonEnum.Close.name:t=w.get("close")}return t},t.prototype._applyIcon=function(e){if("object"==typeof this.icon)this.icon.iconClasses||(this.icon.iconClasses=""),this.icon.iconName||(this.icon.iconName=""),void 0===this.icon.fontIconFamily&&(this.icon.fontIconFamily=n.WUXManagedFontIcons.Font3DS),this.icon.fontIconSize||(this.icon.fontIconSize="1x");else if("string"==typeof this.icon&&""!==this.icon&&!d.isAPath(this.icon)){var t={iconName:this.icon};this.icon=t}y.call(this),this.icon?(this.elements.iconPlaceholder.setStyle("padding-left",""),this.elements.iconPlaceholder.setStyle("padding-right","")):(this.elements.iconPlaceholder.setStyle("padding-left","0"),this.elements.iconPlaceholder.setStyle("padding-right","0")),this.windowGroup&&this.windowGroup._updateTitle(),this.immersiveFrame&&this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea&&this.immersiveFrame._updateWindowInDockingArea(this)},t.prototype._applyHeader=function(e){this.elements._headerDiv.setContent(this.header),this.header?this.elements._headerDiv.show():this.elements._headerDiv.hide(),this._applyPosition()},t.prototype._applyContent=function(e){this.elements._contentDiv.setContent(this.content),this._applyPosition(),f.getActiveWindow()==this&&this._setFocus()},t.prototype._applyPosition=function(e){if(this.position){var t=!1;if(this.getEmbeddedState()||this.maximizedFlag&&this.allowMaximizeFlag){if(this.windowGroup&&this.windowGroup.getGroupType()===n.WUXWindowGroupTypeEnum.GroupAsGrid){var i;(i=this._getCompletePosition())&&(t=l.setPosition(this,i,i.of===this.immersiveFrame.getContent()))}}else this._isRendered||this.isAWindowGroup()||l.setPosition(this,this._getDefaultPosition()),(i=this._getCompletePosition())&&(t=l.setPosition(this,i));this._isRendered?this._visibility||(this._visibility=!0,this.fire("_preVisibilityChange"),this.getContent().setStyle("visibility","visible"),this._fireAndBroadcast("visibilityChange",void 0,"visibility")):(this._visibility=!1,this.getContent().setStyle("visibility","hidden")),t&&this.fire("move")}else this.position={}},t.prototype._getCompletePosition=function(){var e=this._getDefaultPosition();return{my:this.position&&this.position.my?this.position.my:e.my,at:this.position&&this.position.at?this.position.at:e.at,of:this.position&&this.position.of?this.position.of:e.of,constraint:this.position&&this.position.constraint?this.position.constraint:e.constraint,offsetX:this.position&&void 0!==this.position.offsetX?this.position.offsetX:e.offsetX,offsetY:this.position&&void 0!==this.position.offsetY?this.position.offsetY:e.offsetY,collision:this.position&&this.position.collision?this.position.collision:e.collision}},t.prototype._preEditActiveFlag=function(e,t){return!this.isBeingClosed()},t.prototype._applyActiveFlag=function(){this.windowGroup||(this.activeFlag?f.getActiveWindow()!=this&&(f.setActiveWindow(this),this.bringToFront()):f.getActiveWindow()===this&&f.setActiveWindow(null)),this.activeFlag?(this.fire("activate"),this._setFocus(this._lastFocusedWidget)):(this.fire("deactivate"),this._unsetFocus())},t.prototype._setFocus=function(e){if(this.disabled)this.elements._closeButton&&this.elements._closeButton.isConnected&&this.elements._closeButton.focus({preventScroll:!0});else{var t=null;e&&d.isElementInside(e,this.getContent())&&(t=e);var i=this.elements._contentDiv;if(this.visibleFlag){if(null==t&&null!=(t=g.getFocusedWidget(i)))return;if(null==t&&null==(t=this.getDefaultFocusableElement?this.getDefaultFocusableElement():d.FindFocusableInChildren(i,!0))&&(this._defaultButton&&(t=this._defaultButton.getContent()),null==t&&this._escapeButton&&(t=this._escapeButton.getContent())),t){if(u.getTouchMode()&&l.isInput(t))return;t.focus({preventScroll:!0})}this._lastFocusedWidget=t}}},t.prototype._unsetFocus=function(){var e=this._lastFocusedWidget;e&&(e.blur(),null!=e.dsModel&&null!=e.dsModel&&e.dsModel._resetFocus())},t.prototype._applyCloseButtonFlag=function(e){if(this.closeButtonFlag){var t=this;if(!this.elements._closeButton){this.elements._closeButton=new i.Element("button",{type:"button",class:"wux-windows-window-header-button wux-windows-window-header-close wux-ui-3ds wux-ui-3ds-close"}),this.elements._closeButton.tooltipInfos={owner:this.elements._closeButton,shortHelp:w.get("close")},d.addEventOnElement(t,t.elements._closeButton,"click",(function(e){e.stopPropagation(),t._onCloseButtonClick()}))}this.elements._closeButton.inject(this.elements._titlebarButtonsDiv,"bottom")}else this.elements._closeButton&&this.elements._closeButton.remove();this.windowGroup&&this.windowGroup._updateCloseButtonFlag(),this._updateTitleMaxWidth()},t.prototype._applyExpandedFlag=function(e){var t=this;if(this.expandedFlag)d.addEventOnElement(this,this.elements._mainContentDiv,"transitionend",(function e(i){i.target===t.elements._mainContentDiv&&(i.stopPropagation(),d.removeEventOnElement(t,t.elements._mainContentDiv,"transitionend",e),t._managePointerEvents())})),this.elements._mainContentDiv.removeClassName("wux-windows-window-maincontent-force-collapse"),this.getContent().removeAttribute("collapsed"),this.elements._mainContentDiv.setStyles({"margin-top":"0px"}),this.expandedFlag&&!e&&this.fire("expand");else if(!this.expandedFlag){if(this.getCollapsibleState()){d.addEventOnElement(this,this.elements._mainContentDiv,"transitionend",(function e(i){i.target===t.elements._mainContentDiv&&(i.stopPropagation(),t.elements._mainContentDiv.addClassName("wux-windows-window-maincontent-force-collapse"),d.removeEventOnElement(t,t.elements._mainContentDiv,"transitionend",e),t._managePointerEvents())}));var i=this.elements._mainContentDiv.getSize().height;this.elements._mainContentDiv.setStyles({"margin-top":"-"+i+"px"}),this.getContent().setAttributeNode(document.createAttribute("collapsed"))}else this.expandedFlag=!0;!this.expandedFlag&&e&&this.fire("collapse")}void 0!==e&&this.expandedFlag!==e&&this._updateContentVisibleStateChange()},t.prototype._applyVisibleFlag=function(t){if(e.prototype._applyVisibleFlag.call(this),this.activeFlag&&this._setFocus(),this.windowGroup&&this.windowGroup._updateCloseButtonFlag(),this._updateContentVisibleStateChange(),this.visibleFlag&&this._readWindowPreferences(),this.windowGroup&&this.windowGroup._updateWindowVisibility(this),!1===t&&this.visibleFlag&&this._applyPosition(),this.immersiveFrame&&this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea){var i=this.immersiveFrame.getDockingElement(this.currentDockArea);i&&(i.updateContentVisibility(this.getContent(),this.visibleFlag),i._updateFromContainedWindows(),i._updateContainedWindows()),this._managePointerEvents()}this.fire("visibleStateChange")},t.prototype._applyMovableFlag=function(e){this.windowGroup&&this.windowGroup._updateMovableFlag()},t.prototype._applyEnsureHeightDefinitionOnHierarchy=function(e){this.ensureHeightDefinitionOnHierarchy?this.getContent().setAttribute("ensureheightdefinitiononhierarchy",""):this.getContent().removeAttribute("ensureheightdefinitiononhierarchy")},t.prototype._applyButtons=function(e){if(null!=this.elements._buttonsDiv)for(;this.elements._buttonsDiv.childNodes.length>0;){if(!((s=this.elements._buttonsDiv.childNodes[0])&&s.dsModel instanceof m))break;s.remove()}if(this._defaultButton=null,this.defaultButton=null,this._escapeButton=null,this.elements._headerPopup&&(void 0===this.elements._panelButtonsDiv&&(this.elements._panelButtonsDiv=new i.Element("div",{class:"wux-windows-expander-buttons"})),this.elements._panelButtonsDiv.inject(this.elements._buttonsDiv)),this.buttons){var t=Object.keys(this.buttons);t.sort((function(e,t){return n.WUXStandardButtonEnum[e]&&n.WUXStandardButtonEnum[t]?n.WUXStandardButtonEnum[e].value-n.WUXStandardButtonEnum[t].value:e-t}));for(var o=0;o<t.length;o++){var s,r=t[o];if(r&&n.WUXStandardButtonEnum[r]){if(s=this.buttons[r]){var a=n.WUXStandardButtonEnum[r].role;a===n.WUXStandardButtonRoleEnum.AcceptRole||a===n.WUXStandardButtonRoleEnum.YesRole?this._defaultButton||(this._defaultButton=s,this.defaultButton=s):a!==n.WUXStandardButtonRoleEnum.RejectRole&&a!==n.WUXStandardButtonRoleEnum.NoRole||this._escapeButton||(this._escapeButton=s),s.value=r,s.dialog=this,null!=this.elements._buttonsDiv&&(this.elements._headerPopup&&this.elements._panelButtonsDiv?s.inject(this.elements._panelButtonsDiv):s.inject(this.elements._buttonsDiv))}}else console.log('Error in Window : "'+r+'" is not a valid standard button')}}this._applyPosition(),f.getActiveWindow()==this&&this._setFocus()},t.prototype._apply_floatLayer=function(e){this.getContent().removeAttribute("bottom-layer"),this.getContent().removeAttribute("top-layer"),"bottom"===this._floatLayer?this.getContent().setAttributeNode(document.createAttribute("bottom-layer")):"top"===this._floatLayer&&this.getContent().setAttributeNode(document.createAttribute("top-layer"))},t.prototype.getFloatLayer=function(){return this._floatLayer},t.prototype.getEmbeddedState=function(){return Boolean(null!==this.getContent().getAttribute("docked")||this.windowGroup)},t.prototype.getCollapsibleState=function(){return!1},t.prototype.getFloatableState=function(){return!0},t.prototype.getMovableState=function(){return this.movableFlag},t.prototype.getContentVisibleState=function(){var e=this.visibleFlag&&this.expandedFlag;if(this.windowGroup&&(e=e&&this.windowGroup.getWindowContentVisibleState(this)),this.getDockedFlag()&&this.immersiveFrame){var t=this.immersiveFrame.getDockingElement(this.currentDockArea);t&&(e=e&&!t.collapseDockingZoneFlag&&t.visibleDockingZoneFlag)}return e},t.prototype._updateContentVisibleStateChange=function(){var e=this.getContentVisibleState();this.contentVisibleState!==e&&(this.contentVisibleState=e,this.fire("contentVisibleStateChange",{contentVisibleState:this.contentVisibleState}))},t.prototype.getResizableFlag=function(){return this.resizableFlag},t.prototype._updateFromEmbeddedState=function(){this.getEmbeddedState()?this.getContent().setAttributeNode(document.createAttribute("embedded")):this.getContent().removeAttribute("embedded"),this._updateContentHeight()},t.prototype._updateFromCollapsibleState=function(){!this.getCollapsibleState()||!this.allowMaximizeFlag&&this.maximizedFlag?(this.getContent().removeAttribute("collapsible"),this.expandedFlag=!0):this.getContent().setAttributeNode(document.createAttribute("collapsible"))},t.prototype._preEditCurrentDockArea=function(e,t){return this._canBeDocked(t)},t.prototype._canBeDocked=function(e,t){if(e!==n.WUXDockAreaEnum.NoneDockArea&&e!==n.WUXDockAreaEnum.TopDockArea&&e!==n.WUXDockAreaEnum.BottomDockArea&&e!==n.WUXDockAreaEnum.LeftDockArea&&e!==n.WUXDockAreaEnum.RightDockArea)return!1;if((this.allowedDockAreas&e)!==e&&e!==n.WUXDockAreaEnum.NoneDockArea)return!1;if(e===n.WUXDockAreaEnum.NoneDockArea&&!this.getFloatableState())return!1;if(!t||!t.ignorePreferences){var i=this._getDockAreaFromPreferences();if(this.immersiveFrame&&!this._isCurrentlyCalledFromUIInteraction()&&void 0!==i&&i!==e)return!1}return!0},t.prototype._applyCurrentDockArea=function(e){null===this.immersiveFrame||void 0===this.immersiveFrame||this.isBeingClosed()||(this.currentDockArea===n.WUXDockAreaEnum.NoneDockArea?(this.currentDockArea===e||this.maximizedFlag||this.fire("prePlaceChange",{previousPlace:{currentDockArea:e}}),this.windowGroup&&this.windowGroup.currentDockArea===this.currentDockArea||(this.windowGroup=null,e&&(this.immersiveFrame.undockWindow(this,e),this._isCurrentlyCalledFromUIInteraction()&&this._updateAllWindowsPreferencesInOldDockingElement(e),this.activeFlag&&this.bringToFront())),this.getContent().removeAttribute("docked"),W.call(this,e)):(this.windowGroup&&this.windowGroup.currentDockArea!==this.currentDockArea&&(this.windowGroup=null),this.immersiveFrame._dockingElementWithTabs(this.currentDockArea)||this.windowGroup||this._visibility||-1!==this.width&&(this.currentDockArea===n.WUXDockAreaEnum.LeftDockArea||this.currentDockArea===n.WUXDockAreaEnum.RightDockArea)||-1!==this.height&&(this.currentDockArea===n.WUXDockAreaEnum.TopDockArea||this.currentDockArea===n.WUXDockAreaEnum.BottomDockArea)?A.call(this,e):(this.addEventListener("_preVisibilityChange",A.bind(this,e),{once:!0}),this.immersiveFrame&&this.immersiveFrame._moveWindowToImmersiveFrame(this)),this._isCurrentlyCalledFromUIInteraction()&&this._updateAllWindowsPreferencesInOldDockingElement(this.currentDockArea)))},t.prototype._managePointerEvents=function(){this.immersiveFrame&&this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea&&this.immersiveFrame.getDockingElement(this.currentDockArea).pointerEventsAllIfOverflow()},t.prototype._applyImmersiveFrame=function(e){void 0!==e&&this.immersiveFrame!==e&&this.fire("prePlaceChange",{previousPlace:{immersiveFrame:e}}),e&&e.removeWindow(this,{resetImmersiveFrame:!1}),this.immersiveFrame&&(this.immersiveFrame.addWindow(this),this._readWindowPreferences(),this.activeFlag&&this.bringToFront(),this._properties.currentDockArea.dirty=!1,this._applyCurrentDockArea(),this.maximizedFlag&&(this._properties.maximizedFlag.dirty=!1,this._applyMaximizedFlag()),this._updateMaxWidth(),this._updateMaxHeight(),this._applyHeight()),void 0!==e&&this.immersiveFrame!==e&&this.fire("placeChange")},t.prototype._applyWindowGroup=function(e){if(void 0!==e&&this.windowGroup!==e&&this.fire("prePlaceChange",{previousPlace:{windowGroup:e}}),e&&(e.detachWindow(this,this._isCurrentlyCalledFromUIInteraction()),e._updateAllowedDockAreas()),this.windowGroup){if(this._moveTitleBar(!1,null),this._setTitleBarCenteredFlag(!1),!this.windowGroup.containsWindow(this)){var t=null,i=this.windowGroup.getEmbeddedWindows();i&&(t=i[i.length-1]),this.windowGroup.attachWindow(this,t,n.WUXSnapAreaEnum.InsideArea)}var o=document.createAttribute("attached-to-group");switch(this.windowGroup.getGroupType()){case n.WUXWindowGroupTypeEnum.GroupAsGrid:o.value="grid";break;case n.WUXWindowGroupTypeEnum.GroupAsTab:o.value="tab"}this.getContent().setAttributeNode(o),this.windowGroup._updateAllowedDockAreas()}else this.getContent().removeAttribute("attached-to-group");this._updateFromEmbeddedState(),void 0!==e&&this.windowGroup!==e&&(this._updateContentVisibleStateChange(),this.fire("placeChange"))},t.prototype._applyActiveSnapArea=function(e){if(this.activeSnapArea===n.WUXSnapAreaEnum.NoneArea||this.activeSnapArea===n.WUXSnapAreaEnum.OutsideArea)this.getContent().removeAttribute("active-snap-area"),this.elements._titleBarDiv.removeAttribute("active-snap-area");else{var t=document.createAttribute("active-snap-area");switch(this.activeSnapArea){case n.WUXSnapAreaEnum.TopArea:t.value="top";break;case n.WUXSnapAreaEnum.BottomArea:t.value="bottom";break;case n.WUXSnapAreaEnum.LeftArea:t.value="left";break;case n.WUXSnapAreaEnum.RightArea:t.value="right";break;case n.WUXSnapAreaEnum.InsideArea:t.value="inside";var i=document.createAttribute("active-snap-area");i.value="inside",this.elements._titleBarDiv.setAttributeNode(i)}this.getContent().setAttributeNode(t)}},t.prototype._applyResizableFlag=function(e){!0===this.resizableFlag?(this.getContent().addClassName("wux-windows-window-vertically-resizable"),this.getContent().addClassName("wux-windows-window-horizontally-resizable")):"vertical"===this.resizableFlag?(this.getContent().addClassName("wux-windows-window-vertically-resizable"),this.getContent().removeClassName("wux-windows-window-horizontally-resizable")):"horizontal"===this.resizableFlag?(this.getContent().addClassName("wux-windows-window-horizontally-resizable"),this.getContent().removeClassName("wux-windows-window-vertically-resizable")):(this.getContent().removeClassName("wux-windows-window-vertically-resizable"),this.getContent().removeClassName("wux-windows-window-horizontally-resizable"))},t.prototype._preEditMinWidth=function(e,t){return null!=t&&!isNaN(t)},t.prototype._applyMinWidth=function(e){this._applyWidth(),this.windowGroup&&this.windowGroup._updateMinWidth(),!this.immersiveFrame||this.currentDockArea!==n.WUXDockAreaEnum.LeftDockArea&&this.currentDockArea!==n.WUXDockAreaEnum.RightDockArea||this.immersiveFrame.getDockingElement(this.currentDockArea)._updateFromContainedWindows()},t.prototype._updateMinWidth=function(){if(!this.windowGroup)if(!this.immersiveFrame||!this.immersiveFrame._ActionBar_V3||this.currentDockArea!==n.WUXDockAreaEnum.TopDockArea&&this.currentDockArea!==n.WUXDockAreaEnum.BottomDockArea||this.maximizedFlag)this._floatingMinWidth&&(this.minWidth=this._floatingMinWidth);else{var e=this.elements._titleDiv,t=window.getComputedStyle(e,null),i=parseInt(t.borderLeft.slice(0,-2)),o=parseInt(t.borderRight.slice(0,-2)),s=parseInt(t.paddingLeft.slice(0,-2)),r=parseInt(t.paddingRight.slice(0,-2)),a=d.computeStringWidth(this.title,parseInt(t.fontSize),t.fontFamily)+s+r+i+o+this._getDragZoneWidth()+3;a>this.minWidth&&(this._floatingMinWidth=this.minWidth,this.minWidth=a)}},t.prototype._preEditWidth=function(e,t){var i=this.getMinWidth();return!(-1!==t&&void 0!==i&&t<i)||(-1===e||e>i)&&{validValue:i}},t.prototype._applyWidth=function(e){this._updateMaxWidth();var t=this.width;t&&-1!==t?t<this.minWidth&&(t=this.minWidth):this.elements.container&&this.getContent().parentNode&&(i=window.getComputedStyle(this.getContent()))&&Math.round(parseInt(i.width))<t&&(t=this.minWidth);if(-1===t)this.getContent().setStyle("width","auto"),this.elements._mainContentDiv.setStyle("width","auto");else if(this.elements._mainContentDiv.setStyle("width",t+"px"),this.currentDockArea===n.WUXDockAreaEnum.NoneDockArea||this.currentDockArea===n.WUXDockAreaEnum.TopDockArea||this.currentDockArea===n.WUXDockAreaEnum.BottomDockArea){if(this.elements._footerDiv&&this.elements._buttonsDiv){var i=window.getComputedStyle(this.elements._footerDiv,null),o=parseInt(i.paddingLeft);this.elements._buttonsDiv.setStyle("max-width",t-o+"px")}}else this.elements._buttonsDiv&&this.elements._buttonsDiv.setStyle("max-width","");null!==this.header&&this._updateContentHeight(),void 0!==e&&t!==e&&this._fireAndBroadcast("resize",{bubbles:!1}),this.immersiveFrame&&this.immersiveFrame._updateAllDockingZoneSize(),this.windowGroup&&this.windowGroup.width!==t&&this.windowGroup._updateWidthAndHeight(),this._updateTitleBarWidth()},t.prototype.getMinWidth=function(){return Math.max(this.minWidth,this._computedMinWidth)},t.prototype._updateTitleBarWidth=function(){if(this.currentDockArea===n.WUXDockAreaEnum.TopDockArea&&this.immersiveFrame&&this.immersiveFrame._ActionBar_V3&&1===this.immersiveFrame.getDockingElement(n.WUXDockAreaEnum.TopDockArea).getContainedVisibleWindows().length){var e=this.elements._mainContentDiv.offsetWidth,t=Math.round(parseFloat(window.getComputedStyle(this.immersiveFrame.getDockingElement(n.WUXDockAreaEnum.TopDockArea).elements.dockingZone).width));e>t&&(e=t),e=Math.round(e),this.elements._titleBarDiv.setStyle("width",e+"px")}else this.elements._titleBarDiv.setStyle("width","");this.elements._titleDiv.scrollWidth>this.elements._titleDiv.clientWidth?(this.elements._titleDiv.setAttributeNode(document.createAttribute("overflow")),this.elements._titleDiv.tooltipInfos={shortHelp:this.title,owner:this.elements._titleDiv}):(this.elements._titleDiv.removeAttribute("overflow"),this.elements._titleDiv.tooltipInfos=void 0)},t.prototype._getDragZoneWidth=function(){return this._titleBarCenteredFlag?0:(this._getCurrentTouchMode()?36:22)+this.elements._titlebarButtonsDiv.clientWidth},t.prototype._updateTitleMaxWidth=function(){var e=0;this._titleBarCenteredFlag||(e=(this._getCurrentTouchMode()?36:24)+this.elements._titlebarButtonsDiv.clientWidth);this.elements._titleDiv.setStyle("max-width","calc(100% - "+e+"px)"),this._updateTitleBarWidth()},t.prototype._preEditHeight=function(e,t){if(null!=t&&-1!==t)if(t>=this.minHeight||!this.minHeight){var i=this._getFixedContentHeight(),n=this._getContentPadding();if(t<i+n)return this.height=i+n,!1}else if(this.minHeight&&t<this.minHeight)return this.height=this.minHeight,!1;return!0},t.prototype._applyHeight=function(e){this._updateMaxHeight(),null!==this.height&&void 0!==this.height&&(-1===this.height?this.elements._mainContentDiv.setStyle("height",""):this.elements._mainContentDiv.setStyle("height",this.height+"px"),this._updateContentHeight(),void 0!==e&&this.height!==e&&this._fireAndBroadcast("resize",{bubbles:!1})),this.immersiveFrame&&this.immersiveFrame._updateAllDockingZoneSize(),this._applyMinHeight(),this.windowGroup&&this.windowGroup._updateWidthAndHeight()},t.prototype.getMaxWidth=function(){return this.immersiveFrame.getContent().clientWidth},t.prototype.getMaxHeight=function(){if(this.immersiveFrame){var e=this.immersiveFrame.getContent().clientHeight;if(this.windowGroup){if(this.windowGroup.currentDockArea===n.WUXDockAreaEnum.TopDockArea||this.windowGroup.currentDockArea===n.WUXDockAreaEnum.BottomDockArea)return this.immersiveFrame.getDockingElement(this.windowGroup.currentDockArea).getResizeInfos().maxPossibleSize-this.immersiveFrame.getDockingElement(this.windowGroup.currentDockArea).getCollasperSize()-this.windowGroup._getTitleBarHeight();if(this.windowGroup.height>-1)return Math.min(this.windowGroup.height,e-this.windowGroup._getTitleBarHeight())}return e}},t.prototype._computeDropInsertionData=function(e){var t="after",i=this.immersiveFrame.getSnapTargetWindow();if(!e)return{targetWindow:i,beforeOrAfter:t};var n=this._getTitleWidth(),o=this.elements._titleDiv.getBoundingClientRect();return{targetWindow:i,beforeOrAfter:t=e.x<o.x+n/2?"before":"after"}},t.prototype._updateMaxWidth=function(){if(this.immersiveFrame&&this.immersiveFrame.elements&&this.immersiveFrame.elements.container&&this.immersiveFrame.getContent().clientWidth>0)if(this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea||this.windowGroup)this._titleBarCenteredFlag&&this.isAWindowGroup()&&this._updateMaxTabbarWidth(),this.getContent().setStyle("maxWidth",""),this.elements._titleBarDiv.setStyle("maxWidth",""),this.elements._mainContentDiv.setStyle("maxWidth","");else{var e=this.getMaxWidth();this.getContent().setStyle("maxWidth",e+"px"),this.elements._titleBarDiv.setStyle("maxWidth",e+"px"),this.elements._mainContentDiv.setStyle("maxWidth",e-2+"px")}},t.prototype._updateMaxTabbarWidth=function(){},t.prototype._updateMaxHeight=function(){if(this.immersiveFrame&&this.immersiveFrame.elements&&this.immersiveFrame.elements.container&&this.immersiveFrame.getContent().clientHeight>0)if(this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea||this.windowGroup)this.getContent().setStyle("maxHeight",""),this.elements._contentDiv.setStyle("maxHeight",""),this.elements._mainContentDiv.setStyle("maxHeight","");else{var e=this.getMaxHeight(),t=this._getTitleBarHeight(),i=this._getFixedContentHeight();this.getContent().setStyle("maxHeight",e+"px"),this.elements._mainContentDiv.setStyle("maxHeight",e-t+"px"),this.elements._contentDiv.setStyle("maxHeight",e-t-i+"px")}},t.prototype._getContentPadding=function(){var e=this.elements._contentDiv?window.getComputedStyle(this.elements._contentDiv):null;return(e?parseInt(e.getPropertyValue("padding-top"),10):0)+(e?parseInt(e.getPropertyValue("padding-bottom"),10):0)},t.prototype._getFixedContentHeight=function(){return(this.header?this.elements._headerDiv.offsetHeight:0)+(this.elements._footerDiv?this.elements._footerDiv.offsetHeight:this.elements._buttonsDiv?this.elements._buttonsDiv.offsetHeight:0)},t.prototype._updateContentHeight=function(){var e=this._getFixedContentHeight(),t=this.currentDockArea;if(this.maximizedFlag&&!this.windowGroup&&this.allowMaximizeFlag||this.maximizedFlag&&this.windowGroup&&this.windowGroup.allowMaximizeFlag||t==n.WUXDockAreaEnum.TopDockArea||t==n.WUXDockAreaEnum.BottomDockArea||this.verticallyStretchableFlag&&(t==n.WUXDockAreaEnum.RightDockArea||t==n.WUXDockAreaEnum.LeftDockArea)){var i=0;this.elements._titleBarDiv.getParent()===this.elements.container&&(i=this._getTitleBarHeight()),0===i?this.elements._mainCollapsibleContainer.setStyle("height","100%"):this.elements._mainCollapsibleContainer.setStyle("height","calc(100% - "+i+"px)"),this.elements._contentDiv.setStyle("height","calc(100% - "+e+"px)")}else if(this.immersiveFrame&&this.windowGroup&&this.windowGroup.getGroupType()===n.WUXWindowGroupTypeEnum.GroupAsTab&&-1!==this.height&&this.currentDockArea===n.WUXDockAreaEnum.NoneDockArea){var o=this.getMaxHeight(),s=Math.min(this.height,o);this.elements._mainCollapsibleContainer.setStyle("height",s),this.elements._contentDiv.setStyle("height","calc(100% - "+e+"px)")}else this.elements._mainCollapsibleContainer.setStyle("height",""),-1==this.height?this.elements._contentDiv.setStyle("height","auto"):this.elements._contentDiv.setStyle("height",this.height-e+"px")},t.prototype._applyMinHeight=function(e){var t=this.minHeight;this.height&&-1!==this.height&&this.height<t&&(this.height=t);var i=this._getFixedContentHeight();void 0!==t?this.elements._contentDiv.setStyle("min-height",t-i+"px"):this.elements._contentDiv.setStyle("min-height",""),this.windowGroup&&this.windowGroup._updateMinHeight(),!this.immersiveFrame||this.currentDockArea!==n.WUXDockAreaEnum.TopDockArea&&this.currentDockArea!==n.WUXDockAreaEnum.BottomDockArea||this.immersiveFrame.getDockingElement(this.currentDockArea)._updateFromContainedWindows()},t.prototype._applyMaximizedFlag=function(e){if(this.immersiveFrame){if(this._updateFromCollapsibleState(),void 0!==e&&this.maximizedFlag!==e&&this.fire("prePlaceChange",{previousPlace:{maximizedFlag:e}}),this.maximizedFlag&&this.allowMaximizeFlag)this.getContent().setAttributeNode(document.createAttribute("maximized")),this.windowGroup?this.windowGroup.maximizedFlag=!0:this._moveToAdequateZone();else if(!0===e)if(this.getContent().removeAttribute("maximized"),this.windowGroup&&this.windowGroup.maximizedFlag!==this.maximizedFlag&&(this.windowGroup=null),this.getDockedFlag()||this.windowGroup||this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea){if(!this.windowGroup&&this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea){var t=this.currentDockArea;this.currentDockArea=n.WUXDockAreaEnum.NoneDockArea,this.immersiveFrame.dockWindow(this,t,{restoreDockedPreferences:!0})}}else this._moveToAdequateZone(),this.bringToFront();this._updateMaximizeButtonIcon(),this._updateContentHeight(),void 0!==e&&this.maximizedFlag!==e&&(this._updateContentVisibleStateChange(),this.fire("placeChange"),this._fireAndBroadcast("resize",{bubbles:!1}))}},t.prototype._applyAllowMaximizeFlag=function(e){this.allowMaximizeFlag||(this.maximizedFlag=!1),this._applyMaximizeButtonFlag(),this.windowGroup&&this.windowGroup._updateAllowedDockAreas(),this._updateTitleMaxWidth()},t.prototype._moveToAdequateZone=function(e){var t=this.immersiveFrame;!t||this.windowGroup||this.isBeingClosed()||(this.maximizedFlag?t._moveWindowToMaximizeZone(this):this.getDockedFlag()?t._moveWindowToDockingArea(this,this.currentDockArea,e):t._moveWindowToImmersiveFrame(this))},t.prototype._updateMaximizeButtonIcon=function(){this.elements._maximizeButton&&(this.maximizedFlag?(this.elements._maximizeButton.addClassName("wux-ui-3ds-resize-small"),this.elements._maximizeButton.removeClassName("wux-ui-3ds-resize-full"),this.elements._maximizeButton.tooltipInfos.shortHelp=w.get("restore")):(this.elements._maximizeButton.addClassName("wux-ui-3ds-resize-full"),this.elements._maximizeButton.removeClassName("wux-ui-3ds-resize-small"),this.elements._maximizeButton.tooltipInfos.shortHelp=w.get("maximize")))},t.prototype._applyMaximizeButtonFlag=function(e){if(this.maximizeButtonFlag&&this.allowMaximizeFlag){if(!this.elements._maximizeButton){var t=this;this.elements._maximizeButton=new i.Element("button",{type:"button",class:"wux-windows-window-header-button wux-windows-window-header-maximize wux-ui-3ds"}),this.elements._maximizeButton.tooltipInfos={owner:this.elements._maximizeButton,shortHelp:w.get("maximize")},this._updateMaximizeButtonIcon(),d.addEventOnElement(t,t.elements._maximizeButton,"click",(function(e){e.stopPropagation(),t._onMaximizeButtonClick(),t._saveMaximizeInPreferences()}))}this.elements._maximizeButton.inject(this.elements._titlebarButtonsDiv,"top")}else this.elements._maximizeButton&&this.elements._maximizeButton.remove();this.windowGroup&&this.windowGroup._updateMaximizeButtonFlag(),this._updateTitleMaxWidth()},t.prototype._applyHorizontallyStretchableFlag=function(e){if(this.horizontallyStretchableFlag?(this.getContent().addClassName("wux-windows-window-horizontally-stretchable"),this.immersiveFrame&&this.immersiveFrame._ActionBar_V3&&this.elements._titleBarDiv.addClassName("wux-windows-window-horizontally-stretchable")):(this.getContent().removeClassName("wux-windows-window-horizontally-stretchable"),this.immersiveFrame&&this.immersiveFrame._ActionBar_V3&&this.elements._titleBarDiv.removeClassName("wux-windows-window-horizontally-stretchable")),this._applyResizableFlag(),this._managePointerEvents(),this.windowGroup&&this.windowGroup._updateHorizontallyStretchableFlag(),this.immersiveFrame){var t=this.currentDockArea;if(t===n.WUXDockAreaEnum.TopDockArea||t===n.WUXDockAreaEnum.BottomDockArea){var i=this.immersiveFrame.getDockingElement(t);i&&i._updateFitToChildState()}}this._updateTitleBarWidth()},t.prototype._applyVerticallyStretchableFlag=function(e){this.verticallyStretchableFlag?this.getContent().addClassName("wux-windows-window-vertically-stretchable"):this.getContent().removeClassName("wux-windows-window-vertically-stretchable"),this._applyResizableFlag(),this._updateContentHeight(),this._managePointerEvents(),this.windowGroup&&this.windowGroup._updateVerticallyStretchableFlag()},t.prototype._applyTitleBarVisibleFlag=function(e){this.elements._titleBarDiv&&(this.titleBarVisibleFlag?this.getContent().removeAttribute("no-title-bar"):this.getContent().setAttributeNode(document.createAttribute("no-title-bar")))},t.prototype._applyUsePaddingFlag=function(e){this.usePaddingFlag?this.getContent().removeAttribute("no-padding"):this.getContent().setAttributeNode(document.createAttribute("no-padding"))},t.prototype._applyAllowedDockAreas=function(e){if(this.windowGroup&&this.windowGroup._updateAllowedDockAreas(),!(this.getFloatableState()&&this.currentDockArea==n.WUXDockAreaEnum.NoneDockArea||this.currentDockArea&this.allowedDockAreas)){this.getFloatableState()&&(this.currentDockArea=n.WUXDockAreaEnum.NoneDockArea);for(var t=0,i=l.enumKeys(n.WUXDockAreaEnum);t<i.length;t++){var o=i[t];if(n.WUXDockAreaEnum[o]!==n.WUXDockAreaEnum.NoneDockArea&&n.WUXDockAreaEnum[o]&this.allowedDockAreas){this.currentDockArea=n.WUXDockAreaEnum[o];break}}}},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("currentDockArea")&&(this._canBeDocked(this.currentDockArea)||(this._properties.currentDockArea.value=t.currentDockArea|n.WUXDockAreaEnum.NoneDockArea)),this.isDirty("content")&&this._applyContent(t.content),this.isDirty("title")&&this._applyTitle(t.title),this.isDirty("_floatLayer")&&this._apply_floatLayer(t._floatLayer),this.isDirty("immersiveFrame")&&this._applyImmersiveFrame(t.immersiveFrame),this.isDirty("icon")&&this._applyIcon(t.icon),this.isDirty("header")&&this._applyHeader(t.header),this.isDirty("position")&&this._applyPosition(t.position),this.isDirty("activeFlag")&&this._applyActiveFlag(),this.isDirty("closeButtonFlag")&&this._applyCloseButtonFlag(),this.isDirty("currentDockArea")&&s._applyForAdvancedSetterProperty(this,"currentDockArea",t.currentDockArea,this.currentDockArea),this.isDirty("windowGroup")&&this._applyWindowGroup(t.windowGroup),this.isDirty("activeSnapArea")&&this._applyActiveSnapArea(t.activeSnapArea),this.isDirty("resizableFlag")&&this._applyResizableFlag(t.resizableFlag),this.isDirty("width")&&s._applyForAdvancedSetterProperty(this,"width",t.width,this.width),this.isDirty("height")&&s._applyForAdvancedSetterProperty(this,"height",t.height,this.height),this.isDirty("minWidth")&&s._applyForAdvancedSetterProperty(this,"minWidth",t.minWidth,this.minWidth),this.isDirty("minHeight")&&this._applyMinHeight(t.minHeight),this.isDirty("expandedFlag")&&this._applyExpandedFlag(t.expandedFlag),this.isDirty("maximizedFlag")&&this._applyMaximizedFlag(t.maximizedFlag),this.isDirty("horizontallyStretchableFlag")&&this._applyHorizontallyStretchableFlag(t.horizontallyStretchableFlag),this.isDirty("verticallyStretchableFlag")&&this._applyVerticallyStretchableFlag(t.verticallyStretchableFlag),this.isDirty("titleBarVisibleFlag")&&this._applyTitleBarVisibleFlag(t.titleBarVisibleFlag),this.isDirty("usePaddingFlag")&&this._applyUsePaddingFlag(t.usePaddingFlag),this.isDirty("buttons")&&this._applyButtons(t.buttons),this.isDirty("ensureHeightDefinitionOnHierarchy")&&this._applyEnsureHeightDefinitionOnHierarchy(),this.isDirty("touchMode")&&s._applyForAdvancedSetterProperty(this,"touchMode",t.touchMode,this.touchMode),this.isDirty("visibleFlag")&&this._applyVisibleFlag(),this._applyMaximizeButtonFlag()},t.prototype._setTitleBarCenteredFlag=function(e){this._titleBarCenteredFlag!==e&&(this._titleBarCenteredFlag=e,this.elements._titleBarDiv&&(this._titleBarCenteredFlag?(this.elements._titleBarDiv.addClassName("wux-windows-window-titlebar-align-center"),this.elements.container.addClassName("wux-windows-window-align-center")):(this.elements._titleBarDiv.removeClassName("wux-windows-window-titlebar-align-center"),this.elements.container.removeClassName("wux-windows-window-align-center"))),this._updateTitleMaxWidth()),this._setButtonsVisibleFlag(!e)},t.prototype._moveTitleBar=function(e,t){if(this.elements._titleBarDiv){var i=this.elements._titleBarDiv.getParent();if(e&&t){var n=t._getFixedArea();n&&i!==n&&this.elements._titleBarDiv.inject(n)}else i!==this.elements.container&&this.elements._titleBarDiv.inject(this.elements.container,"top")}},t.prototype._setButtonsVisibleFlag=function(e){this._buttonsVisibleFlag!==e&&(this._buttonsVisibleFlag=e,this.elements._titlebarButtonsDiv&&(this._buttonsVisibleFlag?this.elements._titlebarButtonsDiv.removeClassName("wux-windows-unvisible"):this.elements._titlebarButtonsDiv.addClassName("wux-windows-unvisible")))},t.prototype.getAbsolutePosition=function(){return this.windowGroup&&this.windowGroup.getGroupType()===n.WUXWindowGroupTypeEnum.GroupAsTab?this.windowGroup.getAbsolutePosition():this._getOwnAbsolutePosition()},t.prototype._getOwnAbsolutePosition=function(){if(this.elements&&this.elements.container){var e=this.getOwnerDocument(),t=this.getContent().getPosition(e.body);return this.windowGroup&&this.windowGroup.getGroupType()===n.WUXWindowGroupTypeEnum.GroupAsGrid&&(t.y-=1,0===parseInt(this.elements._mainContentDiv.getStyle("borderLeftWidth"))&&(t.x-=1)),t}},t.prototype.setAbsolutePosition=function(e){if(e){var t=this.getOffsetParentPosition(),i=this.getOffsetParentMargins(),n={x:e.x-t.x-i.left,y:e.y-t.y-i.top},o=this._getReferencePosRelativeToOffsetParent();this.position.offsetX=n.x-o.x,this.position.offsetY=n.y-o.y,this._applyPosition()}},t.prototype.getOffsetParentPosition=function(){var e=this.getContent().getOffsetParent(),t={x:0,y:0};if(e){var i=this.getOwnerDocument();t=e.getPosition(i.body)}return t},t.prototype.getOffsetParentMargins=function(){var e=this.getContent().getOffsetParent(),t={left:0,right:0,top:0,bottom:0};if(e){var i=window.getComputedStyle(e);""===i.marginLeft?t.left=0:t.left=parseInt(i.marginLeft,10),""===i.marginRight?t.right=0:t.right=parseInt(i.marginRight,10),""===i.marginTop?t.top=0:t.top=parseInt(i.marginTop,10),""===i.marginBottom?t.bottom=0:t.bottom=parseInt(i.marginBottom,10)}return t},t.prototype.getPositionRelativeToOffsetParent=function(){if(this.elements&&this.elements.container){var e=this.getContent().getOffsetParent();return this.getContent().getPosition(e)}},t.prototype.close=function(){this._isBeingClosed=!0,this.fire("close"),this.autoCloseFlag&&this.destroy(),this._isBeingClosed=!1},t.prototype.isBeingClosed=function(){return this._isBeingClosed},t.prototype.destroy=function(){this._isBeingClosed=!0,this.windowGroup&&d.setPropertyOutsideUserinteraction(this,"windowGroup",null),this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea&&this.immersiveFrame&&this.immersiveFrame._removeWindowFromDockingArea(this,this.currentDockArea),f.getActiveWindow()===this&&f.setActiveWindow(null),this._ctxMenuToken&&_.removeEventListener(this.elements.container,this._ctxMenuToken),this.immersiveFrame=null,e.prototype.destroy.call(this),this._isBeingClosed=!1},t.prototype.getDockedFlag=function(){return this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea},t.prototype.getZIndex=function(){var e=parseInt(getComputedStyle(this.getContent()).zIndex);return isNaN(e)&&(e=-1),e},t.prototype._setZIndex=function(e){this.getContent().setStyle("z-index",e.toString())},t.prototype.bringToFront=function(){this.windowGroup?this.windowGroup.bringToFront():f.bringToFront(this)},t.prototype.ensureVisible=function(){if(this.visibleFlag=!0,this.expandedFlag=!0,this.windowGroup&&(this.windowGroup.ensureVisible(),this.windowGroup.ensureWindowVisible(this)),this.getDockedFlag()&&this.immersiveFrame){var e=this.immersiveFrame.getDockingElement(this.currentDockArea);e&&(e.collapseDockingZoneFlag=!1,e.activateTab(this._getTopWindow().getContent()))}var t=this.getContent();t&&(t.parentNode.scrollTop=t.offsetTop,t.parentNode.scrollLeft=t.offsetLeft)},t.prototype.getTitleBar=function(){return this.elements._titleBarDiv},t.prototype._getTitleBarHeight=function(){return this.elements._titleBarDiv.offsetHeight},t.prototype._getTitleWidth=function(){return this.elements._titleDiv.offsetWidth},t.prototype._ensureTitleBarUnderPointer=function(e){var t=this.getOffsetParentPosition(),i=this.getOffsetParentMargins(),n=this.getContent().getSize(),o=this._getTitleBarHeight(),s=this.getPositionRelativeToOffsetParent();(s.x+t.x+n.width<e.x||s.x+t.x>=e.x)&&(s.x=e.x-n.width/2-t.x-i.left),(s.y+t.y+o<e.y||s.y+t.y>=e.y)&&(s.y=e.y-o/2-t.y-i.top);var r=this._getReferencePosRelativeToOffsetParent();this.position.offsetX=s.x-r.x,this.position.offsetY=s.y-r.y,this._applyPosition(),this._initialPointerPosition&&(this._initialPointerPosition.x=e.x,this._initialPointerPosition.y=e.y),this._initialWindowOffset&&(this._initialWindowOffset.x=this.position.offsetX,this._initialWindowOffset.y=this.position.offsetY)},t.prototype._canBeSnapSource=function(e,t){return!1},t.prototype._canBeSnapTarget=function(e,t){return!1},t.prototype.getBoundingClientRect=function(){var e=this.getContent().getBoundingClientRect(),t={top:e.top,left:e.left,bottom:e.bottom,right:e.right,x:e.x,y:e.y,width:e.width,height:e.height},i=this.currentDockArea;if((i===n.WUXDockAreaEnum.BottomDockArea||i===n.WUXDockAreaEnum.TopDockArea)&&this.elements._titleBarDiv.getParent()!==this.elements.container){var o=this._getTitleBarHeight();t.top-=o,t.height+=o}return t},t.prototype._getSnapAreaRect=function(e){var t=this.getBoundingClientRect(),i=10;switch(e){case n.WUXSnapAreaEnum.OutsideArea:return t;case n.WUXSnapAreaEnum.TopArea:return{left:t.left,top:t.top,width:t.width,height:i};case n.WUXSnapAreaEnum.BottomArea:return{left:t.left,top:t.top+t.height-i,width:t.width,height:i};case n.WUXSnapAreaEnum.LeftArea:return{left:t.left,top:t.top,width:i,height:t.height};case n.WUXSnapAreaEnum.RightArea:return{left:t.left+t.width-i,top:t.top,width:i,height:t.height};case n.WUXSnapAreaEnum.InsideArea:var o=this._getTitleBarHeight();return{left:t.left,top:t.top,width:t.width,height:o}}},t.prototype.isAWindowGroup=function(){return!(!this.elements||!this.elements.container)&&Boolean(this.getContent().hasClassName("wux-windows-windowgroup"))},t.prototype._getTopWindow=function(){for(var e=this;e.windowGroup;)e=e.windowGroup;return e},t.prototype.attachToWindow=function(e,t,i){return this._attachToWindow(e,t,i,{isInteractiveAttachment:!1})},t.prototype._attachToWindow=function(e,t,i,o){var s=-1;if(this.elements&&this.elements.container){if(this.immersiveFrame&&e&&(!o||!o.isInteractiveAttachment&&!o.ignorePreferences)){var r=this._getDetachedFromPreferences();if(e.windowGroup||e.isAWindowGroup())for(var a=(e.isAWindowGroup()?e:e.windowGroup).getEmbeddedWindows(),l=0;l<a.length;l++){var d=a[l];if(d&&-1!==r.indexOf(d.identifier))return-1}else if(-1!==r.indexOf(e.identifier))return-1;if(t===n.WUXSnapAreaEnum.InsideArea){var h=this.__getBestWindowToMakeWindowGroupAsTabFromPref();void 0!==h&&(e=h.targetWindow,i=h.beforeOrAfter)}}if(e&&t!==n.WUXSnapAreaEnum.NoneArea&&t!==n.WUXSnapAreaEnum.OutsideArea&&this._canBeSnapSource(e,t)&&e._canBeSnapTarget(this,t)){var c=t===n.WUXSnapAreaEnum.InsideArea?n.WUXWindowGroupTypeEnum.GroupAsTab:n.WUXWindowGroupTypeEnum.GroupAsGrid,u=e.isAWindowGroup()?e:null;if((!u||u.getGroupType()!==c)&&(u=e.windowGroup)&&u.getGroupType()!==c){if(c===n.WUXWindowGroupTypeEnum.GroupAsGrid){var p=this.windowGroup;return p&&p===u?(p.detachWindow(this),s=this._attachToWindow(e,t,i,o),this._applyHeight(),this._applyWidth(),e._postEditTouchMode(),u._postEditTouchMode(),s):(s=this._attachToWindow(u,t,i,o),this._postEditTouchMode(),e._postEditTouchMode(),u._postEditTouchMode(),s)}u=null}if(!u&&e._createWindowGroup&&(u=e._createWindowGroup(c),e.windowGroup&&e.windowGroup.getGroupType()===n.WUXWindowGroupTypeEnum.GroupAsGrid&&(u.windowGroup=e.windowGroup,e.windowGroup.replaceWindow(e,u)),u&&(u.immersiveFrame=e.immersiveFrame,u.attachWindow(e,null,n.WUXSnapAreaEnum.NoneArea,i,o&&o.isInteractiveAttachment))),u){if(e.isAWindowGroup()&&e.getGroupType()===c){var m=e.getEmbeddedWindows();e=m[m.length-1]}s=u.attachWindow(this,e,t,i,o&&o.isInteractiveAttachment);var g=!0,f=!1;for(l=0;l<u.getEmbeddedWindows().length;l++){var _=u.getEmbeddedWindows()[l];if(!1===_.allowMaximizeFlag){g=!1;break}!0===_.maximizeButtonFlag&&(f=!0)}u.maximizeButtonFlag=g&&f,u._postEditTouchMode()}s&&(!o||!o.isInteractiveAttachment||this.isAWindowGroup()&&0===this.getEmbeddedWindows().length||this._saveWindowGroupInPreferences())}}return s},t.prototype._getDefaultPosition=function(){var e={my:"top left",at:"top left",of:void 0,constraint:void 0,offsetX:0,offsetY:0,collision:"fit"};if(this.immersiveFrame)e.of=this.immersiveFrame.getContent(),e.constraint=this.immersiveFrame.getContent();else{var t=this.getOwnerDocument();e.of=t.body,e.constraint=t.body}return e},t.prototype._getReferencePosRelativeToOffsetParent=function(){var e=this._getCompletePosition();return e.offsetX=0,e.offsetY=0,l.getPositionRelativeToOffsetParent(this,e)},t.prototype._fireAndBroadcast=function(e,t,i){this.fire(e,t)},t.prototype._onDragPointerDown=function(e){if(this.getMovableState()){this.getOwnerDocument().body.setAttributeNode(document.createAttribute("dragging"));var t=this;if(t._onDragPointerDownInfos={dimensions:{height:t.height,width:t.width},maximizedFlag:t.maximizedFlag},d.addEventOnElement(t,t,"close",(function(e){d.removeEventOnElement(t,t.elements.container.ownerDocument,o.POINTERMOVE,a),d.removeEventOnElement(t,t.elements.container.ownerDocument,o.POINTERUP,l)})),!this.getFloatableState()){this.immersiveFrame&&this.elements._ghostFloatableElement.inject(this.immersiveFrame.elements.container),this.elements._ghostFloatableElement.setStyles({width:this.elements.container.getStyle("width"),height:this.elements.container.getStyle("height")}),this._initialGhostWindowOffset||(this._initialGhostWindowOffset={x:0,y:0});var i=this.getPositionRelativeToOffsetParent(),n=this._getReferencePosRelativeToOffsetParent();this._initialGhostWindowOffset.x=i.x-n.x,this._initialGhostWindowOffset.y=i.y-n.y}this._initialPointerPosition.x=e.clientX,this._initialPointerPosition.y=e.clientY;var s=this.getPositionRelativeToOffsetParent(),r=this._getReferencePosRelativeToOffsetParent();this._initialWindowOffset.x=s.x-r.x,this._initialWindowOffset.y=s.y-r.y,d.addEventOnElement(this,this.elements.container.ownerDocument,o.POINTERMOVE,a),d.addEventOnElement(this,this.elements.container.ownerDocument,o.POINTERUP,l,{capture:!0,once:!0}),d.addEventOnElement(this,this.elements.container.ownerDocument,"blur",h),this.fire("startWindowDrag")}function a(e){e.preventDefault(),t._onDragPointerMove(e)}function l(e){t._onDragPointerUp(e),t.elements.container&&(d.removeEventOnElement(t,t.elements.container.ownerDocument,o.POINTERMOVE,a),d.removeEventOnElement(t,t.elements.container.ownerDocument,o.POINTERUP,l),d.removeEventOnElement(t,t.elements.container.ownerDocument,"blur",h)),t._savePositionInPreferences(),t._onDragPointerDownInfos.dimensions.height===t.height&&t._onDragPointerDownInfos.dimensions.width===t.width||t._saveDimensionsInPreferences(),t._onDragPointerDownInfos.maximizedFlag!==t.maximizedFlag&&t._saveMaximizeInPreferences(),t.getOwnerDocument().body.removeAttribute("dragging"),t.immersiveFrame&&t.immersiveFrame._resetStackedWindowData()}function h(e){e.target===t.elements.container.ownerDocument&&l(e)}},t.prototype._onDragPointerMove=function(e){if(0===e.button){e.preventDefault();var t=e.clientX-this._initialPointerPosition.x,i=e.clientY-this._initialPointerPosition.y;if(0!==t||0!==i){var n={};if("top left"!==this.position.my||"top left"!==this.position.at){n.my="top left",n.at="top left",n.of=this.immersiveFrame?this.immersiveFrame.getContent():d.getDocumentOwner(this.getContent()).body;var o=this.getPositionRelativeToOffsetParent();this._initialWindowOffset.x=o.x,this._initialWindowOffset.y=o.y}if(n.offsetX=this._initialWindowOffset.x+t,n.offsetY=this._initialWindowOffset.y+i,this.modifyObjectFromUIInteraction("position",n),this.getFloatableState()){if(this.maximizedFlag&&(Math.abs(t)>15||Math.abs(i)>15)){this.setPropertyFromUIInteraction("maximizedFlag",!1),this._saveMaximizeInPreferences();var s={x:e.clientX,y:e.clientY};this._ensureTitleBarUnderPointer(s)}}else{if(!this.ghostPosition){var r=this._getCompletePosition();this.ghostPosition=r}this.ghostPosition.offsetX=this._initialGhostWindowOffset.x+t,this.ghostPosition.offsetY=this._initialGhostWindowOffset.y+i,l.setPosition(this.elements._ghostFloatableElement,this.ghostPosition),this.elements._ghostFloatableElement.show()}(this.immersiveFrame?this.immersiveFrame._computeFiringWindowDragEvents(this):this).fire("windowDrag",{x:e.clientX,y:e.clientY,deltaX:t,deltaY:i})}}},t.prototype._onDragPointerUp=function(e){this.elements._ghostFloatableElement.hide(),this._setFocus(this._lastFocusedWidget),this.fire("stopWindowDrag",{x:e.clientX,y:e.clientY})},t.prototype._onCloseButtonClick=function(){this.disabled||this.callMethodFromUIInteraction("close")},t.prototype._onMaximizeButtonClick=function(){this.allowMaximizeFlag&&this.setPropertyFromUIInteraction("maximizedFlag",!this.maximizedFlag)},t.prototype.handleEvents=function(){var e=this;d.addEventOnElement(this,this.getContent(),"dimensionsChanged",(function(t){if((-1===e.height||e.maximizedFlag||e.header)&&e._updateContentHeight(),-1!==e.height&&-1!==e.width||(e._applyPosition(),e.windowGroup?e.windowGroup._updateTitleBarWidth():e._updateTitleBarWidth()),e.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea){var i=e.immersiveFrame.getDockingElement(e.currentDockArea);i&&i.pointerEventsAllIfOverflow()}t.stopPropagation()})),d.addEventOnElement(this,this.elements.container,"keydown",(function(t){var i=null;switch(t.keyCode){case h.ENTER:i=e._defaultButton;break;case h.ESCAPE:i=e._escapeButton}i&&(e._buttonOnKeydownPressed=i,t.stopPropagation())})),d.addEventOnElement(this,this.elements.container,"keyup",(function(t){var i=null;if(!t.altKey&&!t.shiftKey&&!t.ctrlKey){switch(t.keyCode){case h.ENTER:i=e._defaultButton;break;case h.ESCAPE:i=e._escapeButton}!i||t.keyCode===h.ENTER&&d.isElementInside(t.target,e.elements._buttonsDiv)||e._buttonOnKeydownPressed!==i||!e.activateButtonsIfActionPerformed&&t.actionPerformed||(i.getContent().click(),t.stopPropagation(),t.preventDefault()),e._buttonOnKeydownPressed=void 0}})),this._initialPointerPosition||(this._initialPointerPosition={x:0,y:0}),this._initialWindowOffset||(this._initialWindowOffset={x:0,y:0}),this._initialWindowSize||(this._initialWindowSize={height:0,width:0}),d.addEventOnElement(this,e.elements.container,o.POINTERDOWN,(function(t){if(!e.activeFlag){e.setPropertyFromUIInteraction("activeFlag",!0);var i=e.getOwnerDocument();d.addEventOnElement(e,i.body,o.POINTERUP,(function(t){d.isElementInside(t.target,e.getContent())&&!d.isElementInside(i.activeElement,e.getContent())&&e._setFocus(e._lastFocusedWidget)}),{once:!0})}})),d.addEventOnElement(this,e.elements._titleBarDiv,o.POINTERDOWN,(function(t){e.setPropertyFromUIInteraction("activeFlag",!0),d.isElementInside(t.target,e.elements._titlebarButtonsDiv)||e.elements._tabBarContainer&&d.isElementInside(t.target,e.elements._tabBarContainer)||0!==t.button||e._onDragPointerDown(t)})),d.addEventOnElement(this,e.elements._titleBarDiv,o.POINTERHIT,(function(t){2===t.multipleHitCount&&(t.preventDefault(),!e.getCollapsibleState()||d.isElementInside(t.target,e.elements._titlebarButtonsDiv)||e.elements._tabBarContainer&&d.isElementInside(t.target,e.elements._tabBarContainer)||(t.stopPropagation(),e.setPropertyFromUIInteraction("expandedFlag",!e.expandedFlag)))}));var t=function(t,i){e._deltaPositionY=t-e._initialPointerPosition.y;var n=e._getCompletePosition(),o=0;e.windowGroup&&(o=e.windowGroup._getResizeOffset(e,"top")),"fit"===n.collision&&e._initialBoundingRect.top-o+e._deltaPositionY<0&&(e._deltaPositionY=-e._initialBoundingRect.top+o),e._initialWindowSize.height-e._deltaPositionY<i&&(e._deltaPositionY=e._initialWindowSize.height-i)};function i(i){i.preventDefault();var n=e._getFixedContentHeight();t(i.clientY,n),e.setPropertyFromUIInteraction("height",e._initialWindowSize.height-e._deltaPositionY),e._deltaPositionY=e._initialWindowSize.height-e.height,D.call(e,null,"top","topHandlerPointerMove")}var s=function(t,i){var n;if(e._deltaPositionY=t-e._initialPointerPosition.y,e.immersiveFrame)n=e.immersiveFrame.getContent().clientHeight-e.immersiveFrame.getContent().clientTop;else{var o=e.getOwnerDocument();n=o.body.clientHeight||o.defaultView.innerHeight}var s=e._getCompletePosition(),r=0;e.windowGroup&&(r=e.windowGroup._getResizeOffset(e,"bottom"));var a=n-e._initialBoundingRect.bottom-e._deltaPositionY-r;"fit"===s.collision&&a<0&&(e._deltaPositionY=n-e._initialBoundingRect.bottom-r),e._initialWindowSize.height+e._deltaPositionY<i&&(e._deltaPositionY=i-e._initialWindowSize.height)};function r(t){t.preventDefault();var i=e._getFixedContentHeight();s(t.clientY,i),e.setPropertyFromUIInteraction("height",e._initialWindowSize.height+e._deltaPositionY),e._deltaPositionY=e.height-e._initialWindowSize.height,D.call(e,null,"bottom","bottomHandlerPointerMove")}var a=function(t){e._deltaPositionX=t-e._initialPointerPosition.x;var i,n=0;if(e.windowGroup&&(n=e.windowGroup._getResizeOffset(e,"right")),e.immersiveFrame)i=e.immersiveFrame.getContent().clientWidth-e.immersiveFrame.getContent().clientLeft;else{var o=e.getOwnerDocument();i=o.body.clientWidth||o.defaultView.innerWidth}"fit"===e._getCompletePosition().collision&&e._deltaPositionX>i-e._initialBoundingRect.right-n&&(e._deltaPositionX=i-e._initialBoundingRect.right-n),e._initialWindowSize.width+e._deltaPositionX<0&&(e._deltaPositionX=-e._initialWindowSize.width)};function l(t){t.preventDefault(),a(t.clientX);var i=e._deltaPositionX;e.currentDockArea===n.WUXDockAreaEnum.BottomDockArea&&"center"===e.immersiveFrame.getDockingElement(n.WUXDockAreaEnum.BottomDockArea).alignment&&(i=2*e._deltaPositionX);var o=e._initialWindowSize.width+i;e.windowGroup&&(o=e.windowGroup._getAcceptableWidthForEmbeddedWindowResize(e,o)),e.setPropertyFromUIInteraction("width",o),e._deltaPositionX=e.width-e._initialWindowSize.width,D.call(e,"right",null,"rightHandlerPointerMove")}var c=function(t){e._deltaPositionX=t-e._initialPointerPosition.x;var i=0;e.windowGroup&&(i=e.windowGroup._getResizeOffset(e,"left")),"fit"===e._getCompletePosition().collision&&e._initialBoundingRect.left+e._deltaPositionX+i<0&&(e._deltaPositionX=-e._initialBoundingRect.left-i),e._initialWindowSize.width-e._deltaPositionX<0&&(e._deltaPositionX=e._initialWindowSize.width)};function u(t){t.preventDefault(),c(t.clientX);var i=e._initialWindowSize.width-e._deltaPositionX;e.windowGroup&&(i=e.windowGroup._getAcceptableWidthForEmbeddedWindowResize(e,i)),e.setPropertyFromUIInteraction("width",i),e._deltaPositionX=e._initialWindowSize.width-e.width,D.call(e,"left",null,"leftHandlerPointerMove")}function p(t){i.call(e,t),u.call(e,t)}function m(t){i.call(e,t),l.call(e,t)}function g(t){r.call(e,t),l.call(e,t)}function f(t){r.call(e,t),u.call(e,t)}function _(t){(e._deltaPositionX=void 0,e._deltaPositionY=void 0,e.windowGroup&&e.windowGroup._onStopInteractiveResizeOfEmbeddedWindow(e),e._fireAndBroadcast("stopResize"),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,i),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,l),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,r),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,u),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,p),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,m),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,g),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,f),d.removeEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_),e.getOwnerDocument().body.removeAttribute("resizing"),e.immersiveFrame)&&(e.immersiveFrame.getDockingElement(e.currentDockArea)&&e._managePointerEvents());e._saveDimensionsInPreferences(),e._savePositionInPreferences(),e._setFocus(e._lastFocusedWidget)}function w(t){e.getOwnerDocument().body.setAttributeNode(document.createAttribute("resizing")),e.setPropertyFromUIInteraction("activeFlag",!0),e._initialPointerPosition.x=t.clientX,e._initialPointerPosition.y=t.clientY,e._initialBoundingRect=e.elements.container.getBoundingClientRect(),e.immersiveFrame&&e.currentDockArea===n.WUXDockAreaEnum.NoneDockArea&&(e._initialBoundingRect=k.call(e)),e._initialWindowSize.width=e.elements._mainContentDiv.clientWidth,e._initialWindowSize.height=e.elements._mainContentDiv.clientHeight;var i=e.getPositionRelativeToOffsetParent(),o=e._getReferencePosRelativeToOffsetParent();e._initialWindowOffset.x=i.x-o.x,e._initialWindowOffset.y=i.y-o.y}this.elements._resizeZone&&d.addEventOnElement(this,this.elements._resizeZone,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"bottom right",cursor:"nw-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,g),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)})),d.addEventOnElement(this,this.elements._topResizeHandler,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"top",cursor:"s-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,i),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)})),d.addEventOnElement(this,this.elements._bottomResizeHandler,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"bottom",cursor:"s-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,r),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)})),d.addEventOnElement(this,this.elements._rightResizeHandler,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"right",cursor:"w-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,l),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)})),d.addEventOnElement(this,this.elements._leftResizeHandler,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"left",cursor:"w-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,u),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)})),d.addEventOnElement(this,this.elements._topLeftResizeHandler,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"top left",cursor:"nw-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,p),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)})),d.addEventOnElement(this,this.elements._topRightResizeHandler,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"top right",cursor:"sw-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,m),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)})),d.addEventOnElement(this,this.elements._bottomRightResizeHandler,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"bottom right",cursor:"nw-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,g),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)})),d.addEventOnElement(this,this.elements._bottomLeftResizeHandler,o.POINTERDOWN,(function(t){e._fireAndBroadcast("startResize",{side:"bottom left",cursor:"sw-resize"}),w(t),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERMOVE,f),d.addEventOnElement(e,e.elements.container.ownerDocument,o.POINTERUP,_)}))},t.prototype._touchModeChange=function(t){e.prototype._touchModeChange.call(this,t),this._applyWidth(),this._applyHeight(),this._applyPosition()},t.prototype._hasValidIdentifier=function(){return t._isIdentifierValid(this.identifier)},t._isIdentifierValid=function(e){if(e){var t=Math.floor(Number(e));return t<0||String(t)!==e}return!1},t._getWindowPrefKey=function(){return v},t.prototype._saveDataInPreferences=function(e,t){this._hasValidIdentifier()&&l.saveDataInLocalPreferences(this,v,e,t)},t.prototype._getDataFromPreferences=function(e){var t=void 0;return this._hasValidIdentifier()&&(t=l.getDataFromLocalPreferences(this,v,e)),t},t.prototype._savePositionInPreferences=function(){if(this.identifier){var e=this;this.windowGroup&&(e=this.windowGroup);var t={my:e.position.my,at:e.position.at,collision:e.position.collision,offsetX:e.position.offsetX,offsetY:e.position.offsetY};this._saveDataInPreferences("position",t)}},t.prototype._getPositionFromPreferences=function(){return this._getDataFromPreferences("position")},t.prototype._saveDimensionsInPreferences=function(){if(this.identifier){var e={height:this.height,width:this.width};this._saveDataInPreferences("dimension",e)}},t.prototype._getDimensionsFromPreferences=function(){return this._getDataFromPreferences("dimension")},t.prototype._saveDockedDimensionsInPreferences=function(){if(this.identifier&&this.immersiveFrame){var e=void 0;this.currentDockArea===n.WUXDockAreaEnum.NoneDockArea?e={height:void 0,width:void 0}:((e=this._getDockedDimensionsFromPreferences())||(e={}),this.currentDockArea===n.WUXDockAreaEnum.LeftDockArea||this.currentDockArea===n.WUXDockAreaEnum.RightDockArea?e.width=this.immersiveFrame.getDockingElement(this.currentDockArea).dockingZoneSize:e.height=this.immersiveFrame.getDockingElement(this.currentDockArea).dockingZoneSize),this._saveDataInPreferences("dockedDimensions",e)}},t.prototype._getDockedDimensionsFromPreferences=function(){return this._getDataFromPreferences("dockedDimensions")},t.prototype._updateAllWindowsPreferencesInOldDockingElement=function(e,t){if(this.immersiveFrame){var i=[],o=[];e!==n.WUXDockAreaEnum.NoneDockArea&&((o=this.immersiveFrame.getDockingElement(e).getContainedVisibleWindows()).length>0&&o.map((function(e){if(e.isAWindowGroup()){var t=E(e);i.push(t)}else e._hasValidIdentifier()&&i.push(e.identifier)})),o.length>0&&o.map((function(n){if(n.isAWindowGroup())for(var o=n.getVisibleEmbeddedWindows(),s=0;s<o.length;s++){var r=o[s];r._saveDataInPreferences("dockAreaOrder",i),t&&r._saveDataInPreferences("dockArea",e)}else n._hasValidIdentifier()&&(n._saveDataInPreferences("dockAreaOrder",i),t&&n._saveDataInPreferences("dockArea",e))})))}},t.prototype._saveDockAreaInPreferences=function(){if(this.identifier&&this.immersiveFrame){var e=[];this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea&&(e=this.immersiveFrame.getDockingElement(this.currentDockArea).getContainedVisibleWindows());var t=this.currentDockArea;e.length>0?this._updateAllWindowsPreferencesInOldDockingElement(t,!0):this._saveDataInPreferences("dockAreaOrder",[]),this._saveDataInPreferences("dockArea",t)}},t.prototype._getDockAreaFromPreferences=function(){return this._getDataFromPreferences("dockArea")},t.prototype._getDockAreaOrderFromPreferences=function(){return this._getDataFromPreferences("dockAreaOrder")},t.prototype._getDockAreaIndexFromPreferences=function(){var e=this._getDockAreaOrderFromPreferences();if(e){for(var t=0;t<e.length;t++){if(e[t]===this.identifier)return t;if(Array.isArray(e[t])&&C(this.identifier,e[t]))return t}return e.indexOf(this.identifier)}},t.prototype._getMaximizedFlagFromPreferences=function(){return this._getDataFromPreferences("maximizedFlag")},t.prototype._saveMaximizeInPreferences=function(){if(this.identifier){var e=this.maximizedFlag;this._saveDataInPreferences("maximizedFlag",e)}},t.prototype._getWindowGroupAsTabFromPreferences=function(){var e=this._getDataFromPreferences("windowGroupAsTab");return e||(e=[]),e},t.prototype._saveWindowGroupAsTabInPreferences=function(e){this._saveDataInPreferences("windowGroupAsTab",e)},t.prototype.__getBestWindowToMakeWindowGroupAsTabFromPref=function(){var e=this._getWindowGroupAsTabFromPreferences();if(e&&e.length>0)for(var t=e.length-1;t>=0;t--){for(var i=e[t],n=void 0,o=void 0,s=void 0,r=0;r<i.length;r++){var a=i[r];if(a===this.identifier)n=r;else if(this.immersiveFrame.windows[a]){var l=this.immersiveFrame.windows[a];if(l.currentDockArea===this.currentDockArea&&l.maximizedFlag===this.maximizedFlag){if(void 0!==n){if(s){if(n-o>r-n){s=a,o=r;break}break}s=a,o=r;break}s=a,o=r}}}if(void 0!==n&&s&&void 0!==o){var d=n<o?"before":"after";return{targetWindow:this.immersiveFrame.windows[s],beforeOrAfter:d}}}},t.prototype._getSnappingFromPreferences=function(){var e=this._getDataFromPreferences("windowGroupAsGrid");return e||(e=[]),e},t.prototype._saveSnappingInPreferences=function(e){this._saveDataInPreferences("windowGroupAsGrid",e)},t.prototype._getDetachedFromPreferences=function(){var e=this._getDataFromPreferences("detachedFrom");return e||(e=[]),e},t.prototype._saveDetachedInPreferences=function(e){this._saveDataInPreferences("detachedFrom",e)},t.prototype._saveWindowGroupInPreferences=function(e){if(this.isAWindowGroup())for(var t=this.getEmbeddedWindows(),i=0;i<t.length;i++){(d=t[i])&&void 0!==d.identifier&&(!e||e.isAWindowGroup()&&0===e.getEmbeddedWindows().length||d._saveWindowGroupInPreferences(e))}else if(this.identifier)if(e){var o=this._getDetachedFromPreferences();if(e.isAWindowGroup())for(t=e.getEmbeddedWindows(),i=0;i<t.length;i++){if((d=t[i])&&void 0!==d.identifier){0!==o.length&&-1!==o.indexOf(d.identifier)||d.identifier===this.identifier||o.push(d.identifier);var s=d._getDetachedFromPreferences();0!==s.length&&-1!==s.indexOf(this.identifier)||(s.push(this.identifier),d._saveDetachedInPreferences(s))}}else{void 0===e.identifier||0!==o.length&&-1!==o.indexOf(e.identifier)||o.push(e.identifier);var r=e._getDetachedFromPreferences();0!==r.length&&-1!==r.indexOf(this.identifier)||void 0===e.identifier||(r.push(this.identifier),e._saveDetachedInPreferences(r))}if(this._saveDetachedInPreferences(o),e.isAWindowGroup())for(t=e.getEmbeddedWindows(),i=0;i<t.length;i++){(d=t[i])&&void 0!==d.identifier&&(this._saveWindowGroupAsTabInPreferences(this._locateAndRemoveWindowFromWGAsTabPreferencesArray(this,d.identifier,this._getWindowGroupAsTabFromPreferences())),d._saveWindowGroupAsTabInPreferences(this._locateAndRemoveWindowFromWGAsTabPreferencesArray(d,this.identifier,d._getWindowGroupAsTabFromPreferences())))}else void 0!==e.identifier&&(this._saveWindowGroupAsTabInPreferences(this._locateAndRemoveWindowFromWGAsTabPreferencesArray(this,e.identifier,this._getWindowGroupAsTabFromPreferences())),e._saveWindowGroupAsTabInPreferences(this._locateAndRemoveWindowFromWGAsTabPreferencesArray(e,this.identifier,e._getWindowGroupAsTabFromPreferences())));this.windowGroup&&this._saveWindowGroupInPreferences()}else if(this.windowGroup){var a=this.windowGroup;if(a.getGroupType()===n.WUXWindowGroupTypeEnum.GroupAsTab){a.windowGroup&&a.windowGroup.getGroupType()===n.WUXWindowGroupTypeEnum.GroupAsGrid&&a.windowGroup;var l=E(a);for(t=a.getEmbeddedWindows(),i=0;i<t.length;i++){(d=t[i])&&void 0!==d.identifier&&d._saveWindowGroupAsTabInPreferences(d._addWGAsTabPreferences(l))}for(i=0;i<t.length;i++){var d;if((d=t[i])&&void 0!==d.identifier){o=d._getDetachedFromPreferences();if(d.identifier===this.identifier){for(var h=0;h<l.length;h++){var c=l[h];-1!==o.indexOf(c)&&o.splice(o.indexOf(c),1)}d._saveDetachedInPreferences(o)}else-1!==o.indexOf(this.identifier)&&(o.splice(o.indexOf(this.identifier),1),d._saveDetachedInPreferences(o))}}}else a.getGroupType()===n.WUXWindowGroupTypeEnum.GroupAsGrid&&a}else console.log("Saving the preferences of a Window that is being attached to nothing... failed")},t.prototype._locateAndRemoveWindowFromWGAsTabPreferencesArray=function(e,t,i){for(var n=0;n<i.length;n++){var o=i[n];if(-1!==o.indexOf(t)){o.splice(o.indexOf(t),1),1===o.length&&(o[0]===e.identifier?i.splice(n,1):console.log("There is a WindowGroup preferences that is composed of only one Window, but it is not the Window in question"));break}}return i},t.prototype._addWGAsTabPreferences=function(e){var t=this._getWindowGroupAsTabFromPreferences();if(-1===t.indexOf(e)){for(var i=0;i<e.length;i++){var n=e[i];n!==this.identifier&&(t=this._locateAndRemoveWindowFromWGAsTabPreferencesArray(this,n,t))}return t.push(e),t}console.log("preferences for this WindowGroup have already been saved : "+this.identifier)},t.prototype.arePreferencesRestored=function(){return this._prefRestorationState===n.WUXPreferenceRestorationStateEnum.Restored},t.prototype._readWindowPreferences=function(){if(this._prefRestorationState===n.WUXPreferenceRestorationStateEnum.NotRestored&&this._hasValidIdentifier()&&this.visibleFlag&&(this.immersiveFrame&&this.immersiveFrame.containsWindow(this)||this.elements&&this.elements.container&&this.elements.container.parentNode)){if(this._prefRestorationState=n.WUXPreferenceRestorationStateEnum.BeingRestored,this.visibleFlag){var e=this._getDimensionsFromPreferences();e&&(this._properties.height.dirty=!1,this._properties.width.dirty=!1,this.height=e.height,this.width=e.width)}var t=this._getDockAreaFromPreferences();void 0!==t&&(t===n.WUXDockAreaEnum.NoneDockArea?this.currentDockArea=n.WUXDockAreaEnum.NoneDockArea:this.immersiveFrame.dockWindow(this,t,{restoreDockedPreferences:!0}));var i=this._getMaximizedFlagFromPreferences();void 0!==i&&(this._properties.maximizedFlag.dirty=!1,this.maximizedFlag=i);var o=this.__getBestWindowToMakeWindowGroupAsTabFromPref();void 0!==o&&this.attachToWindow(o.targetWindow,n.WUXSnapAreaEnum.InsideArea,o.beforeOrAfter);var s=this._getPositionFromPreferences();if(s){var r={at:s.at,collision:s.collision,my:s.my,offsetX:s.offsetX,offsetY:s.offsetY};this.windowGroup?this.windowGroup.position=r:(this._properties.position.dirty=!1,this.position=r)}this._prefRestorationState=n.WUXPreferenceRestorationStateEnum.Restored}},t.prototype.deleteWindowPreferences=function(){for(var e=0;e<this._savedPreferencesKeys.length;e++){var t=this._savedPreferencesKeys[e];l.deleteDataFromLocalPreferences(this,v,t)}var i=this._getDetachedFromPreferences();for(e=0;e<i.length;e++){var n=i[e],o=l.getDataFromLocalPreferences(n,v,"detachedFrom");o.splice(o.indexOf(this.identifier),1),l.saveDataInLocalPreferences(n,v,"detachedFrom",o)}l.deleteDataFromLocalPreferences(this,v,"detachedFrom");var s=this._getWindowGroupAsTabFromPreferences();for(e=0;e<s.length;e++)for(var r=s[e],a=0;a<r.length;a++){var d=r[a];if(d!==this.identifier){var h=l.getDataFromLocalPreferences(d,v,"windowGroupAsTab");if(h){for(var c=0;c<h.length;c++){var u=h[c];-1!==u.indexOf(this.identifier)&&u.splice(u.indexOf(this.identifier),1),u.length<=1&&h.splice(c,1)}l.saveDataInLocalPreferences(d,v,"windowGroupAsTab",h)}}}l.deleteDataFromLocalPreferences(this,v,"windowGroupAsTab"),this.immersiveFrame&&this._updateAllWindowsPreferencesInOldDockingElement(this.currentDockArea,!1),l.deleteDataFromLocalPreferences(this,v,"dockAreaOrder")},t.prototype._showMessage=function(e,t,s,r){var a=this;if(!this.elements._messageContainer&&this.elements._contentDiv&&(this.elements._messageContainer=new i.Element("div",{class:"wux-windows-window-message-container"}),this.elements._messageContainer.hide(),this.elements._messageContainer.inject(this.elements._contentDiv)),this.elements._messageContainer){if(this._hideMessageTimeOut&&(clearTimeout(this._hideMessageTimeOut),this._hideMessageTimeOut=null),this.elements._messageIcon||(this.elements._messageIcon=new i.Element("div",{class:"wux-windows-window-message-icon"}),this.elements._messageIcon.inject(this.elements._messageContainer)),this.elements._messageIcon){switch(e){case n.WUXInformationLevelEnum.NoLevel:this.elements._messageContainer.removeAttribute("information-level"),this.elements._messageIcon.setAttribute("class","wux-windows-window-message-icon");break;case n.WUXInformationLevelEnum.Question:this.elements._messageContainer.setAttribute("information-level","question"),this.elements._messageIcon.setAttribute("class","wux-windows-window-message-icon wux-ui-3ds wux-ui-3ds-attention");break;case n.WUXInformationLevelEnum.Information:this.elements._messageContainer.setAttribute("information-level","information"),this.elements._messageIcon.setAttribute("class","wux-windows-window-message-icon wux-ui-3ds wux-ui-3ds-info");break;case n.WUXInformationLevelEnum.Warning:this.elements._messageContainer.setAttribute("information-level","warning"),this.elements._messageIcon.setAttribute("class","wux-windows-window-message-icon wux-ui-3ds wux-ui-3ds-attention");break;case n.WUXInformationLevelEnum.Error:this.elements._messageContainer.setAttribute("information-level","error"),this.elements._messageIcon.setAttribute("class","wux-windows-window-message-icon wux-ui-3ds wux-ui-3ds-error");break;case n.WUXInformationLevelEnum.Success:this.elements._messageContainer.setAttribute("information-level","success"),this.elements._messageIcon.setAttribute("class","wux-windows-window-message-icon wux-ui-3ds wux-ui-3ds-check")}e===n.WUXInformationLevelEnum.NoLevel?this.elements._messageIcon.hide():this.elements._messageIcon.show()}this.elements._messageDiv||(this.elements._messageDiv=new i.Element("div",{class:"wux-windows-window-message-text"}),this.elements._messageDiv.inject(this.elements._messageContainer)),this.elements._messageDiv.textContent=t;r||void 0===r?(this.elements._messageCloseButton||(this.elements._messageCloseButton=new i.Element("button",{type:"button",class:"wux-windows-window-message-close wux-ui-3ds wux-ui-3ds-close"}).inject(this.elements._messageContainer),this.elements._messageCloseButton.tooltipInfos={shortHelp:w.get("close")},this.elements._messageCloseButton.addEventListener(o.POINTERUP,(function(e){a._hideMessage(),e.stopPropagation()}))),this.elements._messageCloseButton.show()):this.elements._messageCloseButton&&this.elements._messageCloseButton.hide(),this.elements._messageContainer.show(),s>0&&(this._hideMessageTimeOut=setTimeout((function(){a._hideMessage()}),1e3*s))}},t.prototype._hideMessage=function(){this._hideMessageTimeOut&&(clearTimeout(this._hideMessageTimeOut),this._hideMessageTimeOut=null),this.elements._messageContainer&&this.elements._messageContainer.hide()},t}(p),D=function(e,t){var i=!1,n=void 0,o=void 0,s=this._getCompletePosition();if(t&&(this.height>=this.minHeight||void 0===this.minHeight&&this.height>=0)){var r=this._getFixedContentHeight();this.height>=r&&(s.my.indexOf(t)>-1&&(o=this._initialWindowOffset.y+this._deltaPositionY,i=!0),(s.my.indexOf("center")>-1||"left"===s.my||"right"===s.my)&&(o=this._initialWindowOffset.y+this._deltaPositionY/2,i=!0))}e&&(this.width>=this.minWidth||void 0===this.minWidth&&this.width>=0)&&(s.my.indexOf(e)>-1&&(n=this._initialWindowOffset.x+this._deltaPositionX,i=!0),(s.my.indexOf("center")>-1||"top"===s.my||"bottom"===s.my)&&(n=this._initialWindowOffset.x+this._deltaPositionX/2,i=!0));var a={};return void 0!==n&&(a.offsetX=n),void 0!==o&&(a.offsetY=o),this.modifyObjectFromUIInteraction("position",a),this.windowGroup&&this.windowGroup._onInteractiveResizeOfEmbeddedWindow(this,this._deltaPositionX,this._deltaPositionY,e,t),i},k=function(){if(this.immersiveFrame){var e=this.getContent().getBoundingClientRect().top-this.immersiveFrame.getContent().getBoundingClientRect().top,t=this.getContent().clientHeight,i=this.getContent().getBoundingClientRect().left-this.immersiveFrame.getContent().getBoundingClientRect().left,n=this.getContent().clientWidth;return{top:e,height:t,bottom:e+t,left:i,width:n,right:i+n}}};function A(e){if(this.currentDockArea!==n.WUXDockAreaEnum.NoneDockArea){this.currentDockArea!==e&&this.fire("prePlaceChange",{previousPlace:{currentDockArea:e}}),this.immersiveFrame.dockWindow(this,this.currentDockArea);var t=document.createAttribute("docked");switch(this.currentDockArea){case n.WUXDockAreaEnum.TopDockArea:t.value="top";break;case n.WUXDockAreaEnum.BottomDockArea:t.value="bottom";break;case n.WUXDockAreaEnum.LeftDockArea:t.value="left";break;case n.WUXDockAreaEnum.RightDockArea:t.value="right"}this.getContent().setAttributeNode(t),W.call(this,e)}}function W(e){this._applyResizableFlag(),this._updateFromCollapsibleState(),this._updateFromEmbeddedState(),this._updateMinWidth(),this._applyWidth(),this._applyHeight(),this._applyPosition(),this.currentDockArea!==e&&(this.fire("placeChange"),this._fireAndBroadcast("resize",{bubbles:!1}));var t=this.immersiveFrame.getDockingElement(e);t&&(!this.immersiveFrame._ActionBar_V3||e!==n.WUXDockAreaEnum.BottomDockArea&&e!==n.WUXDockAreaEnum.TopDockArea||this._moveTitleBar(!1,t),t._updateFromContainedWindows(),t._updateDockingZoneSize());var i=this.immersiveFrame.getDockingElement(this.currentDockArea);i?(i._updateFromContainedWindows(),i._updateContainedWindows()):e===n.WUXDockAreaEnum.BottomDockArea&&this._setTitleBarCenteredFlag(!1),this.immersiveFrame._manageAllPointerEventsOnDockingElements()}function E(e){for(var t=[],i=e.getEmbeddedWindows(),n=0;n<i.length;n++){var o=i[n];o&&void 0!==o.identifier&&t.push(o.identifier)}return t}function C(e,t){for(var i=0;i<t.length;i++){if(t[i]===e)return!0;if(Array.isArray(t[i]))return C(e,t[i])}}return s.addClass(b,"window"),window.WUXSnapAreaEnum=n.WUXSnapAreaEnum,window.WUXWindowGroupTypeEnum=n.WUXWindowGroupTypeEnum,window.WUXStandardButtonRoleEnum=n.WUXStandardButtonRoleEnum,window.WUXStandardButtonEnum=n.WUXStandardButtonEnum,b}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/Dialog",["require","exports","UWA/Core","DS/Core/WebUXComponents","DS/Utilities/Dom","DS/Utilities/Utils","DS/Controls/Button","DS/Controls/DropdownButton","DS/Controls/Toggle","DS/Windows/Window","DS/CoreBase/WebUXGlobalEnums","DS/Controls/typings/types"],(function(e,t,i,n,o,s,r,a,l,d,h){"use strict";var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{modalFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},checkboxInfos:{defaultValue:void 0,type:"object",category:"Behavior"},customButtonsDefinition:{defaultValue:void 0,type:"object",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.init.apply(this,t),this._savedPreferencesKeys.push("checkBoxInfoState")},t.prototype.buildView=function(){var t=this;e.prototype.buildView.call(this),this.elements.container.addClassName("wux-windows-dialog"),this.elements._footerDiv=new i.Element("div",{class:"wux-windows-dialog-footer"}),this.elements._footerDiv.inject(this.elements._mainContentDiv),this.elements._buttonsDiv=new i.Element("div",{class:"wux-windows-dialog-buttons"}),this.elements._buttonsDiv.inject(this.elements._footerDiv),this.elements._resizeZone=new i.Element("div",{class:"wux-windows-dialog-resize-zone"}),this.elements._resizeZone.inject(this.elements._footerDiv),this._applyCurrentDockArea(),o.onNodeRendered(this.getContent(),(function(){t.elements.container&&t._applyMinWidth()}))},t.prototype.destroy=function(){this._manageModalDivSiblingsInertAttribute(!1),e.prototype.destroy.call(this)},t.prototype._applyImmersiveFrame=function(t){this._manageModalDivSiblingsInertAttribute(!1),e.prototype._applyImmersiveFrame.call(this,t),!this.immersiveFrame&&!this._isBeingClosed&&this.visibleFlag&&this.elements&&this.elements.container&&!this.elements.container.parentNode&&(this.inject(document.body),this._readWindowPreferences()),this._applyModalFlag()},t.prototype._applyResizableFlag=function(t){e.prototype._applyResizableFlag.call(this,t),!0===this.resizableFlag?(this.elements._resizeZone.show(),this.elements._footerDiv.addClassName("resize-padding")):(this.elements._resizeZone.hide(),this.elements._footerDiv.removeClassName("resize-padding"))},t.prototype._applyButtons=function(t){if(e.prototype._applyButtons.call(this,t),this.buttons&&Object.keys(this.buttons).length>0)for(var i=Object.keys(this.buttons),n=0;n<i.length;n++){var o=i[n];if(o&&h.WUXStandardButtonEnum[o]){var s=this.buttons[o];if(s&&s instanceof r){s.label||(s.label=this.getDefaultButtonLabel(o)),this.recId&&!s.recId&&(s.recId=this.recId+"_"+o);var a=h.WUXStandardButtonEnum[o].role;a===h.WUXStandardButtonRoleEnum.AcceptRole||a===h.WUXStandardButtonRoleEnum.YesRole?s.emphasize="primary":s.emphasize="secondary"}}}else this.customButtonsDefinition&&this._applyCustomButtonsDefinition();0===this.elements._buttonsDiv.childNodes.length?this.elements._footerDiv.hide():this.elements._footerDiv.show(),this._applyMinWidth(),this._applyHeight()},t.prototype._applyCustomButtonsDefinition=function(e){if(this._customButtons)for(var t=0;t<this._customButtons.length;t++)this._customButtons[t].destroy();if(this._customButtons=[],this.customButtonsDefinition&&Array.isArray(this.customButtonsDefinition)&&(!this.buttons||0===Object.keys(this.buttons).length)){if(this._defaultButton=null,this._escapeButton=null,this.elements._buttonsDiv)for(;this.elements._buttonsDiv.childNodes.length>0;){if(!((n=this.elements._buttonsDiv.childNodes[0])&&n.dsModel instanceof r))break;n.remove()}for(t=0;t<this.customButtonsDefinition.length;t++){var i=this.customButtonsDefinition[t],n=void 0;n=i.secondaryActions?new a({emphasize:i.emphasize,mainAction:{label:i.label,icon:i.icon,disabled:i.disabled,onClick:i.onClick},secondaryActions:i.secondaryActions}):new r(i),this._customButtons.push(n),n.dialog=this,this.elements._buttonsDiv&&n.inject(this.elements._buttonsDiv),i.role&&(i.role===h.WUXCustomButtonRoleEnum.Validate?this._defaultButton=n:i.role===h.WUXCustomButtonRoleEnum.Escape&&(this._escapeButton=n))}0===this.elements._buttonsDiv.childNodes.length?this.elements._footerDiv.hide():this.elements._footerDiv.show(),this._applyMinWidth(),this._applyHeight()}},t.prototype.getCustomButtons=function(){if(this.customButtonsDefinition&&Array.isArray(this.customButtonsDefinition)&&(!this.buttons||0===Object.keys(this.buttons).length))return this._customButtons},t.prototype._applyCheckboxInfos=function(){if(this.elements._footerDiv.removeAttribute("has-checkbox"),this.checkboxInfos&&this.checkboxInfos.label){if(this.elements._footerDiv.setAttributeNode(document.createAttribute("has-checkbox")),this.elements._checkbox){this.elements._checkbox.visibleFlag=!0,this.elements._checkbox.label=this.checkboxInfos.label,this.elements._checkbox.checkFlag=Boolean(this.checkboxInfos.checkFlag);n=this.checkboxInfos.tooltipInfos?this.checkboxInfos.tooltipInfos:{shortHelp:this.checkboxInfos.label};this.elements._checkbox.tooltipInfos=n}else{var e=this;this.elements._checkboxDiv=new i.Element("div",{class:"wux-windows-dialog-checkbox"}),this.elements._checkboxDiv.inject(this.elements._buttonsDiv,"before");var n=this.checkboxInfos.tooltipInfos?this.checkboxInfos.tooltipInfos:{shortHelp:this.checkboxInfos.label},o=t.getCheckBoxInfoStateInPreferences(this.identifier);!1!==o&&!0!==o&&(o=this.checkboxInfos.checkFlag),this.elements._checkbox=new l({type:"checkbox",label:this.checkboxInfos.label,checkFlag:o,tooltipInfos:n}),this.checkboxInfos.checkFlag=o,this.elements._checkbox.addEventListener("change",(function(t){e.checkboxInfos.checkFlag=e.elements._checkbox.checkFlag,e.checkboxInfos.saveCheckStateInPreferences&&e._saveCheckBoxInfoStateInPreferences()})),this.elements._checkbox.inject(this.elements._checkboxDiv)}this._applyMinWidth()}else this.elements._checkbox&&this.elements._checkbox.visibleFlag&&(this.elements._checkbox.visibleFlag=!1)},t.prototype._applyMinWidth=function(t){this._computedMinWidth=u.call(this),e.prototype._applyMinWidth.call(this,t)},t.prototype._updateTitleMaxWidth=function(){var e=this.elements._titlebarButtonsDiv.clientWidth;this.elements._titleDiv.setStyle("max-width","calc(100% - "+e+"px)")},t.prototype._applyModalFlag=function(){void 0!==this.elements.container&&(!0===this.modalFlag?(this.elements.container.setAttributeNode(document.createAttribute("modal")),this._moveToAdequateZone(),this._manageModalDivSiblingsInertAttribute(),this.visibleFlag?this.elements._modalDiv.show():this.elements._modalDiv.hide()):(this.elements.container.removeAttribute("modal"),this.elements._modalDiv&&this._manageModalDivSiblingsInertAttribute(),this._moveToAdequateZone()))},t.prototype._applyVisibleFlag=function(t){if(!0===this.modalFlag){var i=this.elements._modalDiv;i&&(this._manageModalDivSiblingsInertAttribute(),!1===this.visibleFlag?i.hide():i.show())}e.prototype._applyVisibleFlag.call(this,t),!this.immersiveFrame&&!this._isBeingClosed&&this.visibleFlag&&this.elements&&this.elements.container&&!this.elements.container.parentNode&&(this.inject(document.body),this._readWindowPreferences())},t.prototype._manageModalDivSiblingsInertAttribute=function(e){var t=this,i=void 0!==e?e:this.modalFlag&&!this._isBeingClosed&&this.visibleFlag,n=this.elements._modalDiv;if(n&&n.getParent())if(n.getParent().getChildren().forEach((function(e){i&&m(e,n)?e.inert=i:e.inert=void 0})),i){if(this._mutationObserver||(this._mutationObserver=new MutationObserver((function(e,i){p(t,e)}))),this._mutationObserverParent)if(this._mutationObserverParent!==n.getParent())p(this,this._mutationObserver.takeRecords()),this._mutationObserver.disconnect();this._mutationObserver.observe(n.getParent(),{childList:!0}),this._mutationObserverParent=n.getParent()}else if(this._mutationObserver){p(this,this._mutationObserver.takeRecords()),this._mutationObserver.disconnect()}},t.prototype._applyRecId=function(t){if(e.prototype._applyRecId.call(this,t),this.buttons)for(var i=Object.keys(this.buttons),n=0;n<i.length;n++){var o=i[n],s=this.buttons[o];s&&s instanceof r&&!s.recId&&(s.recId=this.recId+"_"+o)}},t.prototype._applyProperties=function(t){var i=this.isDirty("modalFlag");e.prototype._applyProperties.call(this,t),this.isDirty("customButtonsDefinition")&&this._applyCustomButtonsDefinition(t.customButtonsDefinition),i&&this._applyModalFlag(),this.isDirty("resizableFlag")&&this._applyResizableFlag(),this.isDirty("checkboxInfos")&&this._applyCheckboxInfos()},t.prototype._applyCurrentDockArea=function(t){e.prototype._applyCurrentDockArea.call(this,t);var i=this.elements._titleBarDiv.clientHeight;this.elements._buttonsDiv.childNodes.length>0&&(i+=this.elements._footerDiv.clientHeight),0!==i&&this.elements._mainCollapsibleContainer.setStyle("height","calc(100% - "+i+"px)")},t.prototype._moveToAdequateZone=function(e){var t=this;if(!this.isBeingClosed())if(this.modalFlag){this.elements._modalDiv||(this.elements._modalDiv=new i.Element("div",{class:"wux-windows-modalDialog"}),this.elements._modalDiv.addEventListener("mousedown",(function(e){if(e.target===t.elements._modalDiv){e.preventDefault();var i=t._lastFocusedWidget,n=void 0;document.activeElement&&o.isElementInside(document.activeElement,t.getContent())?(t._unsetFocus(),n=!0,t._defaultButton&&(i=t._defaultButton.getContent())):document.activeElement&&o.isElementInside(t._lastFocusedWidget,t.content)||(i=void 0),n?requestAnimationFrame((function(){t._setFocus(i)})):t._setFocus(i)}})));s=this.elements._modalDiv;if(this.immersiveFrame)this.immersiveFrame.rootContainer?this.immersiveFrame.rootContainer.appendChild(s):this.immersiveFrame._moveModalDivToImmersiveFrame(s);else{var n=this.getContent().getParent();n&&n!==s?n.appendChild(s):document.body.appendChild(s)}this.elements.container.parentElement!==s&&s.appendChild(this.elements.container)}else{var s=this.elements._modalDiv;if(this.immersiveFrame)this.immersiveFrame._moveWindowToImmersiveFrame(this),s&&s.remove();else if(s){var r=s.getParent();r&&(r.removeChild(s),r.appendChild(this.elements.container))}else document.body.appendChild(this.getContent())}},t.prototype._getDefaultPosition=function(){var e=document.body;return this.immersiveFrame&&(e=this.immersiveFrame.getContent(),this.modalFlag&&this.immersiveFrame.rootContainer&&(e=this.immersiveFrame.rootContainer)),{my:"center",at:"center",of:this.immersiveFrame?this.immersiveFrame.getContent():document.body,constraint:e,offsetX:0,offsetY:0,collision:"fit"}},t.prototype._saveCheckBoxInfoStateInPreferences=function(){if(this.identifier){var e=this.checkboxInfos.checkFlag;this._saveDataInPreferences("checkBoxInfoState",e)}},t.getCheckBoxInfoStateInPreferences=function(e){var i=void 0;return t._isIdentifierValid(e)&&(i=s.getDataFromLocalPreferences({identifier:e},t._getWindowPrefKey(),"checkBoxInfoState")),i},t}(d),u=function(){if(this.buttons||this._customButtons){for(var e=0,t=0,i=0,n=0,o=this.buttons?Object.values(this.buttons):this._customButtons;n<o.length;n++){var s=o[n];if(s instanceof a&&(e=e+this._getCurrentTouchMode()?39:25,s=s.elements._mainButton),s instanceof r){var l=window.getComputedStyle(s.getContent())?window.getComputedStyle(s.getContent()).getPropertyValue("min-width"):"";e=e+(""===l?0:parseInt(l,10))+(i>0?10:0),i++}}var d=void 0,h=0;if(this.elements._footerDiv){var c=window.getComputedStyle(this.elements._footerDiv),u=c?c.getPropertyValue("padding-left"):"",p=c?c.getPropertyValue("padding-right"):"";d=""===u?0:parseInt(u,10),h=""===p?0:parseInt(p,10),this.checkboxInfos&&(t=80)}return e=e+d+h+t}return 0};function p(e,t){for(var i=0,n=t;i<n.length;i++){for(var o=n[i],r=o.removedNodes,a=0;a<r.length;a++){var l=r[a];l instanceof s.getDocumentWindow(l).HTMLElement&&(l.inert=void 0)}var d=o.addedNodes;for(a=0;a<d.length;a++){var h=d[a];h instanceof s.getDocumentWindow(h).HTMLElement&&m(h,e.elements._modalDiv)&&(h.inert=!0)}}}function m(e,t){if(e===t)return!1;var i=parseInt(window.getComputedStyle(e).zIndex);return!(!isNaN(i)&&i>=4e4)}return n.addClass(c,"dialog"),c}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/WindowGroup",["require","exports","DS/Core/WebUXComponents","DS/Utilities/WUXUWAUtils","DS/CoreBase/WebUXGlobalEnums","DS/Windows/Window"],(function(e,t,i,n,o,s){"use strict";var r=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=e.apply(this,t)||this;return n.extendingClassFlag,o}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){e.prototype.buildView.call(this),this.elements._titleBarDiv&&this.elements._titleBarDiv.addClassName("wux-windows-windowgroup-titlebar"),this.elements.container.addClassName("wux-windows-windowgroup"),this.elements._contentDiv&&this.elements._contentDiv.addClassName("wux-windows-windowgroup-content"),this.allowedDockAreas=o.WUXDockAreaEnum.TopDockArea|o.WUXDockAreaEnum.BottomDockArea|o.WUXDockAreaEnum.LeftDockArea|o.WUXDockAreaEnum.RightDockArea},t.prototype.destroy=function(){var t=this.getEmbeddedWindows();if(t.length>0)for(var i=0;i<t.length;i++)t[i].destroy();e.prototype.destroy.call(this)},t.prototype._applyImmersiveFrame=function(t){e.prototype._applyImmersiveFrame.call(this,t);for(var i=this.immersiveFrame,n=this.getEmbeddedWindows(),o=0;o<n.length;o++){var s=n[o];s&&(s.immersiveFrame=i)}},t.prototype._applyCurrentDockArea=function(t){e.prototype._applyCurrentDockArea.call(this,t);for(var i=this.currentDockArea,n=this.getEmbeddedWindows(),o=0;o<n.length;o++){var s=n[o];s&&(s.currentDockArea=i)}},t.prototype.getGroupType=function(){},t.prototype._updateWidthAndHeight=function(){},t.prototype._updateMinHeight=function(){},t.prototype._updateMaximizeButtonFlag=function(){},t.prototype._updateAllowMaximizeFlag=function(){},t.prototype._updateHorizontallyStretchableFlag=function(){},t.prototype._updateVerticallyStretchableFlag=function(){},t.prototype.ensureWindowVisible=function(e){},t.prototype.getWindowContentVisibleState=function(e){return e.visibleFlag},t.prototype._manageDrag=function(e,t){},t.prototype._stopDrag=function(){},t.prototype._applyHeight=function(t){e.prototype._applyHeight.call(this,t),this._updateContentHeight()},t.prototype.getFloatableState=function(){for(var e=!0,t=this.getEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n&&!(e=n.getFloatableState()))break}return e},t.prototype.getEmbeddedWindows=function(){return[]},t.prototype.getVisibleEmbeddedWindows=function(){return[]},t.prototype.getDisplayedWindows=function(){return[]},t.prototype.containsWindow=function(e){var t=!1;if(e)for(var i=this.getEmbeddedWindows(),n=i.length;n--;){if(i[n]===e){t=!0;break}}return t},t.prototype.attachWindow=function(e,t,i,n,o){if(e){if(this.containsWindow(e))return 1;var s=e.activeFlag,r=-1;if(e&&e._canBeSnapSource(t,i)&&e!==t&&(!t||this._supportsSnapArea(i)&&t._canBeSnapTarget(e,i))){if(t?r=t===this||this.containsWindow(t)?1:-1:0===this.getEmbeddedWindows().length&&(r=1),r<0)return r;var a=e.windowGroup;if(a&&a!==this&&a.detachWindow(e),e.expandedFlag=!0,(r=this._attachWindow(e,t,i,n,o))>0){if(this.getDockedFlag()){if(e.currentDockArea=this.currentDockArea,this.immersiveFrame){var l=this.immersiveFrame.getDockingElement(this.currentDockArea);l&&l._updateFromContainedWindows()}}else t||e.getDockedFlag()&&(this.currentDockArea=e.currentDockArea);this._updateVisibleState(),this._manageEmbeddedWindowsCss(),this._updateTitle(),this._updateCloseButtonFlag(),this._updateAllowedDockAreas(),e._postEditTouchMode(),this._postEditTouchMode(),this._updateMaximizeButtonFlag(),this._updateAllowMaximizeFlag(),e.visibleFlag||this._updateWindowVisibility(e),s&&(this.activeFlag=!0)}}return r}return-1},t.prototype._attachWindow=function(e,t,i,n,o){return-1},t.prototype._supportsSnapArea=function(e){return!1},t.prototype._addWindowContentToGroup=function(e,t,i,n){return-1},t.prototype.detachWindow=function(e){return this._detachWindow(e,this._isCurrentlyCalledFromUIInteraction())},t.prototype._detachWindow=function(e,t){var i=-1;if(e&&!e._isBeingDetached){if(!this.containsWindow(e))return i;i=1,e._isBeingDetached=!0;var n=this.getAbsolutePosition(),s=this.activeFlag;this.activeFlag=!1,e.getContent().hide();var r=this.getEmbeddedWindows(),a=2===r.length?r[0]===e?r[1]:r[0]:this,l=this._getNewGroupPositionAfterDetachment(e);if(this._removeWindowContentFromGroup(e,t),e.windowGroup===this&&(e.windowGroup=null),t&&e._saveWindowGroupInPreferences(a),e.isBeingClosed()||(this.immersiveFrame&&e._moveToAdequateZone({restoreDockedPreferences:this.immersiveFrame.__DockingTabsInBottomArea}),e.visibleFlag&&e.getContent().show(),e._updateFromEmbeddedState()),0===(r=this.getEmbeddedWindows()).length){var d,h=this.windowGroup;return h&&!e._isBeingClosed?(d=h.getAbsolutePosition(),i=h.attachWindow(e,this,o.WUXSnapAreaEnum.BottomArea)):this.immersiveFrame&&(this.maximizedFlag||e.maximizedFlag||this.currentDockArea===o.WUXDockAreaEnum.NoneDockArea?e._moveToAdequateZone():(this.immersiveFrame.dockWindow(e,this.currentDockArea,{restoreDockedPreferences:this.immersiveFrame.__DockingTabsInBottomArea}),this.immersiveFrame._replaceDockingZoneContent(this,e))),t&&e._interactiveDrag?this.visibleFlag=!1:this.elements&&this.elements.container&&this.destroy(),h&&h.setAbsolutePosition(d),e._isBeingDetached=!1,i}this._updateVisibleState(),this._updateCloseButtonFlag(),this._updateMaximizeButtonFlag(),this._updateAllowMaximizeFlag(),this._applyResizableFlag(),1===r.length&&((a=r[0])&&(this._detachWindow(a,t),a.maximizedFlag=this.maximizedFlag,a.currentDockArea=this.currentDockArea),e.visibleFlag&&e.getContent().show()),s&&(e.activeFlag=!0),e._applyWidth(),e._applyHeight(),this.getGroupType()===o.WUXWindowGroupTypeEnum.GroupAsTab&&e.setAbsolutePosition(n),r.length>1&&(l?this.position=l:this.setAbsolutePosition(this.getAbsolutePosition()),this._updateTitle(),this._updateAllowedDockAreas(),this._updateMovableFlag()),this._manageEmbeddedWindowsCss(),e._isBeingDetached=!1}return i},t.prototype._removeWindowContentFromGroup=function(e,t){return-1},t.prototype._getNewGroupPositionAfterDetachment=function(e){},t.prototype._canBeSnapSource=function(e,t){for(var i=!0,n=this.getEmbeddedWindows(),o=0;o<n.length;o++){var s=n[o];if(s&&!(i=s._canBeSnapSource(e,t)))break}return i},t.prototype._canBeSnapTarget=function(e,t){for(var i=!0,n=this.getEmbeddedWindows(),o=0;o<n.length;o++){var s=n[o];if(s&&!(i=s._canBeSnapTarget(e,t)))break}return i},t.prototype._fireAndBroadcast=function(t,i,n){e.prototype._fireAndBroadcast.call(this,t,i);for(var o=this._getWindowsImpactedBy(n),s=0;s<o.length;s++){var r=o[s];r&&r._fireAndBroadcast(t,i)}},t.prototype._getWindowsImpactedBy=function(e){return this.getEmbeddedWindows()},t.prototype._updateTitle=function(){for(var e="",t=this.getVisibleEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n)if(0===i?e="[":e+=", ",e+=n.title,i===t.length-1)e+="]";else if(5===i){e+=", ...]";break}}this.title=e},t.prototype._updateVisibleState=function(){for(var e=!1,t=this.getEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n&&n.visibleFlag){e=!0;break}}this.visibleFlag=e},t.prototype._updateCloseButtonFlag=function(){for(var e=!1,t=this.getEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n&&n.closeButtonFlag){e=!0;break}}this.closeButtonFlag=e},t.prototype._updateAllowedDockAreas=function(){for(var e=o.WUXDockAreaEnum.LeftDockArea+o.WUXDockAreaEnum.TopDockArea+o.WUXDockAreaEnum.RightDockArea+o.WUXDockAreaEnum.BottomDockArea,t=this.getEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n)for(var s in o.WUXDockAreaEnum){var r=o.WUXDockAreaEnum[s];if(!(n.allowedDockAreas&r)&&e&r&&0===(e-=r))break}}this.allowedDockAreas=e},t.prototype._onCloseButtonClick=function(){var e=this.getVisibleEmbeddedWindows();if(e)for(var t=e.length-1;t>=0;t--){var i=e[t];i&&i.closeButtonFlag&&(i.disabled||i.callMethodFromUIInteraction("close"))}},t.prototype._updateMovableFlag=function(){for(var e=!0,t=this.getEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n&&!n.movableFlag){e=!1;break}}this.movableFlag=e},t.prototype._updateWindowVisibility=function(e){},t.prototype._manageEmbeddedWindowsCss=function(){},t.prototype.close=function(){if(this.autoCloseFlag){var e=this.activeFlag,t=this.getEmbeddedWindows();if(t)for(var i=t.length-1;i>=0;i--){var n=t[i];n&&n.close()}(t=this.getEmbeddedWindows())&&t.length>1&&e&&(this.activeFlag=!0)}else this.fire("close")},t.prototype._saveDockAreaInPreferences=function(){for(var e=0;e<this.getEmbeddedWindows().length;e++){this.getEmbeddedWindows()[e]._saveDockAreaInPreferences()}},t.prototype._saveMaximizeInPreferences=function(){for(var e=0;e<this.getEmbeddedWindows().length;e++){this.getEmbeddedWindows()[e]._saveMaximizeInPreferences()}},t.prototype._savePositionInPreferences=function(){for(var e=0;e<this.getEmbeddedWindows().length;e++){this.getEmbeddedWindows()[e]._savePositionInPreferences()}},t.prototype._saveDimensionsInPreferences=function(){for(var e=0;e<this.getEmbeddedWindows().length;e++){this.getEmbeddedWindows()[e]._saveDimensionsInPreferences()}},t.prototype._saveDockedDimensionsInPreferences=function(){for(var e=0;e<this.getVisibleEmbeddedWindows().length;e++){this.getVisibleEmbeddedWindows()[e]._saveDockedDimensionsInPreferences()}},t.prototype._getDockedDimensionsFromPreferences=function(){for(var e={},t=this.getDisplayedWindows(),i=0;i<t.length;i++){var n=t[i]._getDockedDimensionsFromPreferences();n&&(n.width&&(!e.width||e.width<n.width)&&(e.width=n.width),n.height&&(!e.height||e.height<n.height)&&(e.height=n.height))}return e},t.prototype._getDockAreaIndexFromPreferences=function(){for(var e=this.getVisibleEmbeddedWindows(),t=0;t<e.length;t++){var i=e[t]._getDockAreaIndexFromPreferences();if(void 0!==i)return i}},t.prototype._getAcceptableWidthForEmbeddedWindowResize=function(e,t){return t},t.prototype._onInteractiveResizeOfEmbeddedWindow=function(e,t,i,n,o){},t.prototype._onStopInteractiveResizeOfEmbeddedWindow=function(e){},t.prototype._getResizeOffset=function(e,t){return 0},t.prototype._setZIndex=function(t){e.prototype._setZIndex.call(this,t);var i=this.getEmbeddedWindows();if(i.length>0)for(var n=0;n<i.length;n++)i[n]._setZIndex(t)},t}(s);return i.addClass(r,"windowgroup"),r}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/WindowGroupAsGrid",["require","exports","UWA/Core","DS/Core/WebUXComponents","DS/Utilities/WUXUWAUtils","DS/CoreBase/WebUXGlobalEnums","DS/Windows/WindowGroup"],(function(e,t,i,n,o,s,r){"use strict";var a=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return o.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(t){e.prototype._preBuildView.call(this,t),this._embeddedWindowsInColumns=[]},t.prototype.buildView=function(){e.prototype.buildView.call(this),this.elements.container.addClassName("wux-windows-windowgroupasgrid")},t.prototype._updateWindowVisibility=function(e){this._manageEmbeddedWindowsCss()},t.prototype._manageEmbeddedWindowsCss=function(){if(this._embeddedWindowsInColumns)for(var e=-1,t=0;t<this._embeddedWindowsInColumns.length;t++){var i=this._embeddedWindowsInColumns[t];if(i)for(var n=!1,o=0;o<i.length;o++){var s=i[o];s&&(!n&&s.visibleFlag?(s.getContent().setAttribute("wux-first-visible-window-in-column",""),n=!0):s.getContent().removeAttribute("wux-first-visible-window-in-column"),s.visibleFlag&&-1===e&&(e=t),t===e?s.getContent().setAttribute("wux-window-in-first-visible-column",""):s.getContent().removeAttribute("wux-window-in-first-visible-column"))}}this._manageInteriorBorders()},t.prototype.getGroupType=function(){return s.WUXWindowGroupTypeEnum.GroupAsGrid},t.prototype._attachWindow=function(e,t,i,n,o){var r=-1;if(e){t&&e.getDockedFlag()&&(e.currentDockArea=s.WUXDockAreaEnum.NoneDockArea);var a=e.getAbsolutePosition(),l=e.getContent().offsetWidth,d=e.getContent().offsetHeight,h=this._addWindowContentToGroup(e,t,i,n);if(h<0)return h;if(e.windowGroup=this,t){if(i===s.WUXSnapAreaEnum.LeftArea&&0===this._getWindowPositionInGrid(e).column)(c=Object.assign({},this.position)).offsetX-=l-1,this.position=c;else if(i===s.WUXSnapAreaEnum.TopArea&&1===this._getColumnCount()){var c;(c=Object.assign({},this.position)).offsetY-=d-1,this.position=c}}else(c=Object.assign({},a)).y-=this._getTitleBarHeight()-1,this.setAbsolutePosition(c);r=1}return r},t.prototype._supportsSnapArea=function(e){return e===s.WUXSnapAreaEnum.LeftArea||e===s.WUXSnapAreaEnum.TopArea||e===s.WUXSnapAreaEnum.RightArea||e===s.WUXSnapAreaEnum.BottomArea},t.prototype._addWindowContentToGroup=function(e,t,i,n){var o;if(t){if(!(o=this._getWindowPositionInGrid(t)))return console.warn("Hum... This should not have happened"),-1}else o={column:0,row:0};o.column<0&&(console.warn("Hum... This should not have happened: snapTargetWindowPositionInGrid.column should be positive"),o.column=0),o.row<0&&(console.warn("Hum... This should not have happened: snapTargetWindowPositionInGrid.row should be positive"),o.row=0),this._fixPosition(o,i);var r=function(e,t){switch(t){case s.WUXSnapAreaEnum.BottomArea:return{column:e.column,row:e.row+1};case s.WUXSnapAreaEnum.LeftArea:return{column:e.column-1,row:e.row};case s.WUXSnapAreaEnum.TopArea:return{column:e.column,row:e.row-1};case s.WUXSnapAreaEnum.RightArea:return{column:e.column+1,row:e.row}}return{column:0,row:0}}(o,i);this._embeddedWindowsInColumns[r.column].splice(r.row,0,e),e.remove();var a=this._getColumnDiv(r.column),l=a.getChildren();return r.row<0?e.getContent().inject(a,"top"):r.row>=l.length?e.getContent().inject(a,"bottom"):e.inject(l[r.row],"before"),1},t.prototype.replaceWindow=function(e,t){var i=0;if(e&&t&&this._embeddedWindowsInColumns){t.getContent().inject(e.getContent(),"after"),e.getContent().remove();var n=this._getWindowPositionInGrid(e);n&&(this._embeddedWindowsInColumns[n.column][n.row]=t),this._manageEmbeddedWindowsCss(),i=1}return i},t.prototype._fixPosition=function(e,t){if(e){switch(t){case s.WUXSnapAreaEnum.BottomArea:break;case s.WUXSnapAreaEnum.LeftArea:this._addEmptyColumnAt(e.column),e.column=e.column+1;break;case s.WUXSnapAreaEnum.TopArea:e.row=e.row+1;break;case s.WUXSnapAreaEnum.RightArea:this._addEmptyColumnAt(e.column+1)}this._embeddedWindowsInColumns&&this._embeddedWindowsInColumns.length<=e.column&&this._addEmptyColumnAt(e.column)}},t.prototype._addEmptyColumnAt=function(e){this._embeddedWindowsInColumns&&this._embeddedWindowsInColumns.splice(e,0,[]);var t=this._createColumnDiv(),i=this._getAllColumnsDivs();t&&i&&(e<0?t.inject(this.elements._contentDiv,"top"):e>=i.length?t.inject(this.elements._contentDiv,"bottom"):t.inject(i[e],"before"))},t.prototype._getAllColumnsDivs=function(){return this.elements&&this.elements._contentDiv?this.elements._contentDiv.children:[]},t.prototype._getColumnDiv=function(e){var t=this._getAllColumnsDivs();return t?t[e]:null},t.prototype._removeColumnDiv=function(e){var t=this._getAllColumnsDivs();if(t&&e>=0&&e<t.length){var i=t[e];i&&i.destroy()}},t.prototype._createColumnDiv=function(){var e=new i.Element("div");return e.addClassName("wux-windows-windowgroupasgrid-column"),e},t.prototype._getColumnCount=function(){return this._embeddedWindowsInColumns?this._embeddedWindowsInColumns.length:0},t.prototype._getNbWindowsInFirstColumn=function(){return this._embeddedWindowsInColumns&&this._embeddedWindowsInColumns.length>0?this._embeddedWindowsInColumns[0].length:0},t.prototype._manageInteriorBorders=function(){if(this._embeddedWindowsInColumns&&this._embeddedWindowsInColumns.length>0){var e=this._getAllColumnsDivs();if(e)for(var t=0,i=0;i<e.length;i++){var n=e[i].getBoundingClientRect().height;n>t?(i>0&&e[i-1].removeAttribute("wux-column-border-right"),e[i].setAttribute("wux-column-border-left","")):(i>0&&e[i-1].setAttribute("wux-column-border-right",""),e[i].removeAttribute("wux-column-border-left")),0===i&&e[i].setAttribute("wux-column-border-left",""),i===this._embeddedWindowsInColumns.length-1&&e[i].setAttribute("wux-column-border-right",""),t=n}}},t.prototype._removeWindowContentFromGroup=function(e,t){var i=-1;if(e){if(e.getContent().remove(),this._embeddedWindowsInColumns)for(var n=0;n<this._embeddedWindowsInColumns.length;n++){var o=this._embeddedWindowsInColumns[n];if(o)for(var s=0;s<o.length;s++)if(o[s]===e){o.splice(s,1),0===o.length&&(this._embeddedWindowsInColumns.splice(n,1),this._removeColumnDiv(n));break}}i=1}return i},t.prototype._getNewGroupPositionAfterDetachment=function(e){var t,i=this.getEmbeddedWindows().length<=2,n=!i&&0===this._getWindowPositionInGrid(e).column&&1===this._getNbWindowsInFirstColumn(),o=!i&&0===this._getWindowPositionInGrid(e).row&&1===this._getColumnCount();return n?(t=Object.assign({},this._embeddedWindowsInColumns[1][0].position)).offsetY-=this._getTitleBarHeight()-1:o&&((t=Object.assign({},this._embeddedWindowsInColumns[0][1].position)).offsetY-=this._getTitleBarHeight()-1),t},t.prototype._canBeSnapSource=function(t,i){var n=!1;switch(i){case s.WUXSnapAreaEnum.InsideArea:n=!1;break;case s.WUXSnapAreaEnum.LeftArea:case s.WUXSnapAreaEnum.RightArea:n=!0;break;case s.WUXSnapAreaEnum.TopArea:case s.WUXSnapAreaEnum.BottomArea:1==this._getColumnCount()&&(n=!0)}return n&&(n=e.prototype._canBeSnapSource.call(this,t,i)),n},t.prototype._canBeSnapTarget=function(e,t){return!1},t.prototype._attachToWindow=function(e,t,n,o){var r=-1;if(e&&t!==s.WUXSnapAreaEnum.NoneArea&&t!==s.WUXSnapAreaEnum.OutsideArea&&this._canBeSnapSource(e,t)&&e._canBeSnapTarget(this,t)){if(r=1,t===s.WUXSnapAreaEnum.InsideArea)return-1;if(l(e))for(var a=e,d=this._getColumnCount(),h=function(e){for(var t=[],n=0;n<e.length;n++)t.push(i.clone(e[n],!1));return t}(this._embeddedWindowsInColumns),c=0;c<d;c++)for(var u=h[c],p=0;p<u.length;p++){var m=u[p];p>0?t=s.WUXSnapAreaEnum.BottomArea:c>0&&(t=s.WUXSnapAreaEnum.RightArea),m._attachToWindow(a,t,n,o),a=m}else{var g=function(e){switch(e){case s.WUXSnapAreaEnum.TopArea:return s.WUXSnapAreaEnum.BottomArea;case s.WUXSnapAreaEnum.RightArea:return s.WUXSnapAreaEnum.LeftArea;case s.WUXSnapAreaEnum.BottomArea:return s.WUXSnapAreaEnum.TopArea;case s.WUXSnapAreaEnum.LeftArea:return s.WUXSnapAreaEnum.RightArea}}(t),f=this._getEmbeddedWindowToAttach(g);e._attachToWindow(f,g,n,o)}}return r},t.prototype.getEmbeddedWindows=function(){var e=[];if(this._embeddedWindowsInColumns)for(var t=0;t<this._embeddedWindowsInColumns.length;t++){var i=this._embeddedWindowsInColumns[t];if(i)for(var n=0;n<i.length;n++)e.push(i[n])}return e},t.prototype.getVisibleEmbeddedWindows=function(){var e=[];if(this._embeddedWindowsInColumns)for(var t=0;t<this._embeddedWindowsInColumns.length;t++){var i=this._embeddedWindowsInColumns[t];if(i)for(var n=0;n<i.length;n++){var o=i[n];o&&o.visibleFlag&&e.push(o)}}return e},t.prototype.getDisplayedWindows=function(){return this.getVisibleEmbeddedWindows()},t.prototype._getWindowPositionInGrid=function(e){if(this._embeddedWindowsInColumns)for(var t=0;t<this._embeddedWindowsInColumns.length;t++){var i=this._embeddedWindowsInColumns[t];if(i)for(var n=0;n<i.length;n++)if(i[n]===e)return{column:t,row:n}}},t.prototype._preEditHeight=function(e,t){return-1===t},t.prototype._applyHeight=function(e){},t.prototype._applyWidth=function(e){},t.prototype._applyCurrentDockArea=function(t){e.prototype._applyCurrentDockArea.call(this,t),this._manageInteriorBorders()},t.prototype._applyPosition=function(t){e.prototype._applyPosition.call(this,t);for(var i=0,n=this.getVisibleEmbeddedWindows();i<n.length;i++){var o=n[i];o.setAbsolutePosition(o._getOwnAbsolutePosition())}},t.prototype._getDockedDimensionsFromPreferences=function(){var e={width:0,height:0};if(this._embeddedWindowsInColumns)for(var t=0;t<this._embeddedWindowsInColumns.length;t++){var i={width:0,height:0},n=this._embeddedWindowsInColumns[t];if(n){for(var o=0;o<n.length;o++){var s=n[o];if(s){var r=s._getDockedDimensionsFromPreferences();r&&(i.width=Math.max(i.width,r.width?r.width:0),i.height+=r.height?r.height:0)}}e={width:e.width+i.width,height:Math.max(e.height,i.height)}}}return e},t.prototype._applyActiveFlag=function(){e.prototype._applyActiveFlag.call(this);var t=this.getEmbeddedWindows();if(t)for(var i=0;i<t.length;i++){var n=t[i];n&&(n.visibleFlag?n.activeFlag=this.activeFlag:n.activeFlag=!1)}},t.prototype._getEmbeddedWindowToAttach=function(e){if(this._embeddedWindowsInColumns&&this._embeddedWindowsInColumns.length>0){var t=this._embeddedWindowsInColumns[0];switch(e){case s.WUXSnapAreaEnum.TopArea:return t&&t.length>0?t[0]:null;case s.WUXSnapAreaEnum.RightArea:var i=this._embeddedWindowsInColumns[this._embeddedWindowsInColumns.length-1];return i&&i.length>0?i[0]:null;case s.WUXSnapAreaEnum.BottomArea:return t&&t.length>0?t[t.length-1]:null;case s.WUXSnapAreaEnum.LeftArea:return t&&t.length>0?t[0]:null}}return null},t.prototype._getAcceptableWidthForEmbeddedWindowResize=function(e,t){for(var i=0,n=0,o=this._getVisibleWindowsInSameColumn(e);n<o.length;n++){var s=o[n];i=Math.max(i,s.minWidth)}return t<i?i:t},t.prototype._onInteractiveResizeOfEmbeddedWindow=function(e,t,i,n,o){if(this.__initialPositionWhenResize||(this.__initialPositionWhenResize=Object.assign({},this.position)),"left"===n||"top"===o){var s=Object.assign({},this.__initialPositionWhenResize);"left"!==n||Number.isNaN(t)?s.offsetX=this.position.offsetX:s.offsetX+=t,"top"!==o||Number.isNaN(i)?s.offsetY=this.position.offsetY:s.offsetY+=i,this.position=s,this.setAbsolutePosition(this.getAbsolutePosition())}if(n&&e)for(var r=0,a=this._getVisibleWindowsInSameColumn(e);r<a.length;r++){a[r].width=e.width}this._manageInteriorBorders()},t.prototype._onStopInteractiveResizeOfEmbeddedWindow=function(e){this.__initialPositionWhenResize=void 0},t.prototype._getResizeOffset=function(e,t){switch(t){case"top":return this._getTitleBarHeight();case"right":return this._getWidthOfWindowsOnTheRight(e);case"bottom":return this._getHeightOfWindowsUnderneath(e);case"left":return 0}},t.prototype._getHeightOfWindowsUnderneath=function(e){var t=0,i=this._getWindowPositionInGrid(e);if(i&&this._embeddedWindowsInColumns&&i.column<this._embeddedWindowsInColumns.length){var n=this._embeddedWindowsInColumns[i.column];if(n)for(var o=i.row+1;o<n.length;o++){var s=n[o];s&&s.visibleFlag&&(t+=s.getContent().offsetHeight)}}return t},t.prototype._getWidthOfWindowsOnTheRight=function(e){var t=this._getWindowPositionInGrid(e),i=0,n=this._getAllColumnsDivs();if(t&&this._embeddedWindowsInColumns&&n)for(var o=t.column+1;o<this._embeddedWindowsInColumns.length;o++){var s=n[o];s&&(i+=s.offsetWidth)}return i},t.prototype._getVisibleWindowsInSameColumn=function(e){var t=this._getWindowPositionInGrid(e);if(t&&this._embeddedWindowsInColumns&&t.column<this._embeddedWindowsInColumns.length){var i=this._embeddedWindowsInColumns[t.column];if(i)return i.filter((function(e){return e&&e.visibleFlag}))}},t}(r);function l(e){return e instanceof a?e:e.windowGroup?l(e.windowGroup):void 0}return n.addClass(a,"windowgroupasgrid"),a}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/DockingElementForImmersiveFrame",["require","exports","DS/Utilities/Dom","DS/Core/WebUXComponents","DS/Windows/DockingElement","DS/CoreBase/WebUXGlobalEnums"],(function(e,t,i,n,o,s){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.buildView=function(){e.prototype.buildView.call(this),this.elements.dockingWithCollapserContainer.addClassName("wux-windows-docking-element-immersiveFrameStyle"),this.elements.dockingZoneMask.addClassName("wux-windows-docking-element-immersiveFrameStyle")},t.prototype.handleEvents=function(){e.prototype.handleEvents.call(this),l.call(this),h.call(this)},t.prototype.destroy=function(){d.call(this),e.prototype.destroy.call(this)},t.prototype.getContainedWindows=function(){for(var e=this.elements.dockingZone.getChildren(),t=[],i=0;i<e.length;i++)e[i].hasClassName("wux-windows-window")&&t.push(e[i].dsModel);return t},t.prototype.getContainedVisibleWindows=function(){for(var e=this.elements.dockingZone.getChildren(),t=[],i=0;i<e.length;i++)e[i].hasClassName("wux-windows-window")&&!0===e[i].dsModel.visibleFlag&&t.push(e[i].dsModel);return t},t.prototype.getDisplayedWindows=function(){for(var e=this.elements.dockingZone.getChildren(),t=[],i=0;i<e.length;i++)e[i].hasClassName("wux-windows-window")&&!0===e[i].dsModel.visibleFlag&&this.isContentActive(e[i])&&t.push(e[i].dsModel);return t},t.prototype.shouldDockingZoneSizeChangeWhenDockingWindow=function(e){return!!this.elements._tab||!e.maximizedFlag&&0===this.getContainedVisibleWindows().length},t.prototype._preEditDockingZoneSize=function(t,n){var o=e.prototype._preEditDockingZoneSize.call(this,t,n);if(!0===o&&!i.isCurrentlyCalledFromUIInteraction()&&0===this.getContainedWindows().length){var s=this._getDockingZoneSizeFromPreferences();if(s)return{validValue:s.size}}return o},t.prototype._applyDockingZoneSize=function(t){if(e.prototype._applyDockingZoneSize.call(this,t),void 0!==t&&this.dockingZoneSize!==t)for(var i=this.getContainedWindows(),n=0;n<i.length;n++)i[n]._fireAndBroadcast("resize",{bubbles:!1})},t.prototype._applyAlignment=function(){e.prototype._applyAlignment.call(this),this._updateContainedWindows(),this._updateFitToChildState()},t.prototype._applyCollapseDockingZoneFlag=function(){e.prototype._applyCollapseDockingZoneFlag.call(this),p.call(this)},t.prototype._applyCollapserStyle=function(){e.prototype._applyCollapserStyle.call(this),this.collapserStyle===o.COLLAPSER_STYLE.FIXED_AREA&&(this.useBordersFlag=!1,this.useBackgroundFlag=!1,this.alignment="near")},t.prototype._applyVisibleDockingZoneFlag=function(){e.prototype._applyVisibleDockingZoneFlag.call(this),p.call(this)},t.prototype._updateDockingZoneSize=function(){this.getDisplayedWindows().length>0&&this._updateContainedWindows(),e.prototype._updateDockingZoneSize.call(this)},t.prototype._updateContainedWindows=function(){this.collapserStyle!==o.COLLAPSER_STYLE.FIXED_AREA||this.side!==s.WUXDockAreaEnum.BottomDockArea&&this.side!==s.WUXDockAreaEnum.TopDockArea||u.call(this);for(var e=this.getContainedVisibleWindows(),t=0;t<e.length;t++)e[t]._updateContentHeight(),e[t]._setTitleBarCenteredFlag("center"===this.alignment),e[t].isAWindowGroup()&&(e[t]._updateMaxTabbarWidth(),e[t]._updateMinWidth())},t.prototype._updateFromContainedWindows=function(){this.collapserStyle===o.COLLAPSER_STYLE.FIXED_AREA&&c.call(this),this._updateFitToChildState();var e=this.getContainedVisibleWindows(),t=24;if(e&&e.length>0)for(var i=this.side,n=e[0]._getTitleBarHeight(),r=0;r<e.length;r++){var a=e[r];a&&(i===s.WUXDockAreaEnum.LeftDockArea||i===s.WUXDockAreaEnum.RightDockArea?t=a.minWidth>t?a.minWidth:t:i!==s.WUXDockAreaEnum.TopDockArea&&i!==s.WUXDockAreaEnum.BottomDockArea||(t=a.minHeight+n>t?a.minHeight+n:t))}this.minSize=t,this._updateCollapserSize(),this._updateLastVisibleWindow()},t.prototype._updateFitToChildState=function(){var e=!1;if("center"===this.alignment){var t=this.getDisplayedWindows();if(1===t.length){var i=t[0];e=!(i.horizontallyStretchableFlag&&(this.side==s.WUXDockAreaEnum.TopDockArea||this.side==s.WUXDockAreaEnum.BottomDockArea)||i.verticallyStretchableFlag&&(this.side==s.WUXDockAreaEnum.LeftDockArea||this.side==s.WUXDockAreaEnum.RightDockArea))}}e?this.elements.dockingZone.addClassName("wux-docking-element-fit-to-child"):this.elements.dockingZone.removeClassName("wux-docking-element-fit-to-child")},t.prototype._saveDockingZoneSizeInPreferences=function(){if(""!==this.identifier)for(var e=this.getDisplayedWindows(),t=0;t<e.length;t++)e[t]._saveDockedDimensionsInPreferences(),this.elements._tab&&this._setDockingZoneSize(e[t].getContent(),this.dockingZoneSize)},t.prototype._getDockingZoneSizeFromPreferences=function(){if(""!==this.identifier)for(var e=this.getDisplayedWindows(),t=m.call(this),i=0;i<e.length;i++){var n=e[i]._getDockedDimensionsFromPreferences();if(n&&n[t])return n[t]}},t.prototype.__shouldCollapserBeVisible=function(){return!(this.collapseDockingZoneFlag&&!a.call(this))&&e.prototype.__shouldCollapserBeVisible.call(this)},t.prototype.__hasBackground=function(){return this.side===s.WUXDockAreaEnum.TopDockArea},t.prototype.updateVisibleDockingZoneFlag=function(){this.visibleDockingZoneFlag=this.getContainedVisibleWindows().length>0},t.prototype.removeContent=function(t){e.prototype.removeContent.call(this,t),t.classList.remove("wux-windows-lastWindowInDockingElement")},t.prototype._updateLastVisibleWindow=function(){for(var e=this.getContainedVisibleWindows(),t=0;t<e.length;t++)t===e.length-1?e[t].getContent().addClassName("wux-windows-lastWindowInDockingElement"):e[t].getContent().removeClassName("wux-windows-lastWindowInDockingElement")},t}(o);function a(e){for(var t=this.elements.dockingZone.getChildren(),i=0;i<t.length;i++){if(!t[i].hasClassName("wux-windows-window"))return!0;if((!e||t[i].dsModel.getContent()!==e.getContent())&&t[i].dsModel.visibleFlag)return!0}return!1}function l(){var e=this;void 0===this._observer&&this.elements.dockingZone&&(this._observer=new MutationObserver((function(t){for(var i=0,n=t;i<n.length;i++){var o=n[i];if("childList"===o.type){var s=void 0;if(o.addedNodes.length>0)for(var r=Array.from(o.addedNodes),a=0;a<r.length;a++){if(o.addedNodes[a].classList.contains("wux-windows-window")){s=!0;break}}if(!s&&o.removedNodes.length>0)for(var l=Array.from(o.removedNodes),d=0;d<l.length;d++){if(o.removedNodes[d].classList.contains("wux-windows-window")){s=!0;break}}s&&e.updateVisibleDockingZoneFlag()}}})),this._observer.observe(this.elements.dockingZone,{childList:!0}))}function d(){this._observer&&this._observer.disconnect()}function h(){var e,t=this;i.addEventOnElement(this,this.getContent(),"dockStartResize",(function(i){if(i.dsModel===t){var n,o;switch(t.side){case s.WUXDockAreaEnum.TopDockArea:n="bottom",o="ns-resize";break;case s.WUXDockAreaEnum.BottomDockArea:n="top",o="ns-resize";break;case s.WUXDockAreaEnum.LeftDockArea:n="right",o="ew-resize";break;case s.WUXDockAreaEnum.RightDockArea:n="left",o="ew-resize"}for(var r=t.getContainedWindows(),a=0;a<r.length;a++)r[a]._fireAndBroadcast("startResize",{side:n,cursor:o}),e||(e=r[a].immersiveFrame)}})),i.addEventOnElement(this,this.getContent(),"dockIsResizing",(function(i){i.dsModel===t&&e&&e._updateAllDockingZoneSize()})),i.addEventOnElement(this,this.getContent(),"dockResize",(function(e){if(e.dsModel===t){for(var i=t.getContainedWindows(),n=0;n<i.length;n++)i[n]._fireAndBroadcast("stopResize");t._saveDockingZoneSizeInPreferences()}})),i.addEventOnElement(this,this.getContent(),"change",(function(e){if(t.elements._tab&&e.dsModel===t.elements._tab){var i=t.getDisplayedWindows();if(1===i.length){var n=m.call(t),o=i[0]._getDockedDimensionsFromPreferences();if(o&&o[n])t.dockingZoneSize=o[n];else{var s=t._getDockingZoneSize(i[0].getContent());void 0!==s&&(t.dockingZoneSize=s)}}}}))}function c(){var e="near";this.side===s.WUXDockAreaEnum.BottomDockArea&&(1===this.getDisplayedWindows().length&&(e="center"));this.alignment=e}function u(){var e=null,t=this.getDisplayedWindows();1===t.length&&(e=t[0]),e&&(e._moveTitleBar(!0,this),e._updateTitleBarWidth());for(var i=this.getContainedWindows(),n=0;n<i.length;n++){var o=i[n];o&&o!==e&&(o._moveTitleBar(!1,this),o._updateTitleBarWidth())}}function p(){for(var e=this.getContainedWindows(),t=0;t<e.length;t++)e[t]._updateContentVisibleStateChange()}function m(){return this.side===s.WUXDockAreaEnum.LeftDockArea||this.side===s.WUXDockAreaEnum.RightDockArea?"width":"height"}return n.addClass(r,"dockingElement"),r}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/WindowGroupAsTab",["require","exports","UWA/Core","DS/Core/WebUXComponents","DS/Utilities/Dom","DS/Utilities/WUXUWAUtils","DS/Core/PointerEvents","DS/CoreBase/WebUXGlobalEnums","DS/Utilities/Utils","DS/Controls/Tab","DS/Windows/WindowGroup","DS/Windows/WindowGroupAsGrid"],(function(e,t,i,n,o,s,r,a,l,d,h,c){"use strict";var u=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return s.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{currentWindows:{defaultValue:[],type:"array"}}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){e.prototype.buildView.call(this),this.elements.container.addClassName("wux-windows-windowgroupAsTab"),this.elements._tabBarContainer=new i.Element("div",{class:"wux-windows-windowgroup-tab-bar-container"}),this.elements._tabBarContainer.inject(this.elements._titleDiv,"before"),this.elements._titleDiv.hide(),this.elements._draggableZoneDiv=new i.Element("div",{class:"wux-windows-windowgroup-draggable-zone"}),this.elements._draggableZoneDiv.inject(this.elements._titleP,"before"),this._tab=new d({tabBarDOMContainer:this.elements._tabBarContainer,tabPanelContainer:this.elements._contentDiv,multiSelFlag:!0,displayStyle:["panel","wide"],showComboBoxFlag:!0,autoCloseFlag:!1,reorderFlag:!1}),this._tab.tabBar.pinFlag=!0,this._tab.tabBar.centeredFlag=!1,this._tab.tabBar.closeButtonFlag=this.closeButtonFlag},t.prototype.destroy=function(){this.currentDockArea!==a.WUXDockAreaEnum.NoneDockArea&&this.immersiveFrame&&this.immersiveFrame._removeWindowFromDockingArea(this,this.currentDockArea);var t=this.getEmbeddedWindows();if(t.length>0)for(var i=0;i<t.length;i++)t[i].destroy();else this._tab&&(this._tab.destroy(),this._tab=void 0),e.prototype.destroy.call(this)},t.prototype._postEditTouchMode=function(){e.prototype._postEditTouchMode.call(this);var t=this._getCurrentTouchMode();this._tab&&(this._tab.touchMode=t),this._updateMaxTabbarWidth()},t.prototype._createWindowGroup=function(e){var i={immersiveFrame:this.immersiveFrame,activeFlag:!1,maximizedFlag:this.maximizedFlag};return e===a.WUXWindowGroupTypeEnum.GroupAsTab?new t(i):new c(i)},t.prototype._applyCurrentWindows=function(e){if(this._tab){var t=[],n=[],o=this._tab.tabBar.pinnedList;if(o&&(n=this._tab.getIndexesFromValues(o)),null!=this.currentWindows&&0!==this.currentWindows.length){if(this.currentWindows.length>=1)for(var s=0;s<this.currentWindows.length;s++){var r=this._getIndexFromWindow(this.currentWindows[s]),l=this._tab.getPageValueFromIndex(r);if(n.length>0){for(var d=!0,h=0;h<n.length;h++)r==n[h]&&(d=!1);(d||-1!=this._tab.tabBar.value.indexOf(l))&&t.push(l)}else t.push(l)}i.equals(this._tab.value,t)||(this._tab.value=t)}if(this._updateResizableFlag(),this._updateWidthAndHeight(),this._updateMinWidth(),this._updateMinHeight(),this._updateMovableFlag(),this._tab.tabBar._slideToValue(),e)for(h=0;h<e.length;h++){var c=e[h];c&&-1==this.currentWindows.indexOf(c)&&c.windowGroup===this&&(c.activeFlag=!1)}if(this._updateCurrentWindowsActiveFlag(),this.currentDockArea!=a.WUXDockAreaEnum.NoneDockArea){var u=this.immersiveFrame?this.immersiveFrame.getDockingElement(this.currentDockArea):null;u&&(u.pointerEventsAllIfOverflow(),u._updateDockingZoneSize())}}},t.prototype._updateCurrentWindowsActiveFlag=function(){var e=this.getEmbeddedWindows();if(e)for(var t=0;t<e.length;t++){var i=e[t];i&&this.currentWindows&&-1!=this.currentWindows.indexOf(i)?i.activeFlag=this.activeFlag:i&&(i.activeFlag=!1)}},t.prototype._applyActiveFlag=function(){e.prototype._applyActiveFlag.call(this),this._updateCurrentWindowsActiveFlag()},t.prototype._applyCurrentDockArea=function(t){var i=this.currentDockArea;i===a.WUXDockAreaEnum.BottomDockArea||i===a.WUXDockAreaEnum.TopDockArea?this._setTabMultiSelLayout("horizontal"):this._setTabMultiSelLayout("vertical"),e.prototype._applyCurrentDockArea.call(this,t),this._updateWidthAndHeight(),this._updateMinWidth(),this._tab.tabBar.redrawTabBar()},t.prototype._applyMinWidth=function(t){if(e.prototype._applyMinWidth.call(this,t),this.currentDockArea===a.WUXDockAreaEnum.BottomDockArea&&this._tab&&this._tab.tabBar&&this._tab.tabBar.centeredFlag){var i=this.minWidth;void 0!==i?this.elements._mainContentDiv.setStyle("min-width",i+"px"):this.elements._mainContentDiv.setStyle("min-width","")}else this.elements._mainContentDiv.setStyle("min-width","")},t.prototype._applyWidth=function(e){null!==this.width&&(this._updateMaxWidth(),-1===this.width?(this.getContent().setStyle("width","auto"),this.elements._mainContentDiv.setStyle("width","auto"),this.elements._footerDiv&&this.elements._footerDiv.setStyle("width","calc(100% - 10px)")):void 0!==this.minWidth&&(this.width>=this.minWidth?(p.call(this,this.width),this.elements._mainContentDiv.setStyle("width",this.width+"px")):this.width=this.minWidth),e&&this.width!==e&&this._fireAndBroadcast("resize",{bubbles:!1})),this._tab&&this._tab.tabBar.redrawTabBar(),this._updateTitleBarWidth()},t.prototype._applyHeight=function(e){this._updateMaxHeight(),null!==this.height&&(-1===this.height?(this.elements._mainContentDiv.setStyle("height",""),this._updateContentHeight()):(this.height>=this.minHeight?(m.call(this,this.height),this._updateContentHeight()):this.height=this.minHeight,e&&this.height!==e&&this.fire("resize",{bubbles:!1})))},t.prototype._applyMaximizedFlag=function(t){if(e.prototype._applyMaximizedFlag.call(this,t),this.currentWindows)for(var i=0;i<this.getEmbeddedWindows().length;i++){this.getEmbeddedWindows()[i].maximizedFlag=this.maximizedFlag}this._updateTabCloseButtons()},t.prototype._applyCloseButtonFlag=function(){e.prototype._applyCloseButtonFlag.call(this),this._updateMaxTabbarWidth()},t.prototype._applyMaximizeButtonFlag=function(){e.prototype._applyMaximizeButtonFlag.call(this),this._updateMaxTabbarWidth()},t.prototype._applyAllowMaximizeFlag=function(){e.prototype._applyAllowMaximizeFlag.call(this),this._updateMaxTabbarWidth()},t.prototype._updateWidthAndHeight=function(){if(this.currentWindows.length>0)if(this._updateResizableFlag(),"horizontal"!==this._getTabMultiSelLayout()){for(var e=this.currentWindows[0].width,t=-1===this.currentWindows[0].height,i=t?parseInt(window.getComputedStyle(this.currentWindows[0].getContent()).height):this.currentWindows[0].height,n=1;n<this.currentWindows.length;n++){-1!==(a=this.currentWindows[n]).width&&(e=e>a.width?e:a.width),-1===a.height?i=i+parseInt(window.getComputedStyle(a.getContent()).height)+1:(t=!1,i=i+a.height+1)}this.width!==e?this.width=e:this._applyWidth(),t?this.height=-1:i&&this.height!==i?this.height=i:this._applyHeight()}else{var o=this.currentWindows[0].height,s=-1===this.currentWindows[0].width,r=s?parseInt(window.getComputedStyle(this.currentWindows[0].getContent()).width):this.currentWindows[0].width;for(n=1;n<this.currentWindows.length;n++){var a;!1!==(a=this.currentWindows[n]).resizableFlag&&"horizontal"!==a.resizableFlag||(o=o>a.height?o:this.currentWindows[n].height),-1===a.width?r=r+parseInt(window.getComputedStyle(a.getContent()).width)+1:(s=!1,r=r+a.width+1)}s?this.width=-1:r&&this.width!==r?this.width=r:this._applyWidth(),o&&this.height!==o?this.height=o:this._applyHeight()}},t.prototype._updateMaxTabbarWidth=function(){if(this._tab){var e=0;this.closeButtonFlag&&e++,this.maximizeButtonFlag&&this.allowMaximizeFlag&&e++;var t=24;if(this.touchMode&&(t=36),this._tab.tabBar.centeredFlag){var i="100%",n=this.immersiveFrame.getDockingElement(this.currentDockArea);n&&(i=n._getFixedAreaWidth()-t+"px"),this.elements._tabBarContainer.setStyle("max-width",i)}else this.elements._tabBarContainer.setStyle("max-width","calc(100% - "+t*(e+1)+"px)")}},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("currentWindows")&&this._applyCurrentWindows(t.currentWindows)},t.prototype.getGroupType=function(){return a.WUXWindowGroupTypeEnum.GroupAsTab},t.prototype._setTitleBarCenteredFlag=function(t){e.prototype._setTitleBarCenteredFlag.call(this,t),this._tab&&this._tab.tabBar&&(this._tab.tabBar.centeredFlag=t),this.elements._draggableZoneDiv&&(t?this.elements._draggableZoneDiv.hide():this.elements._draggableZoneDiv.show())},t.prototype._computeDropInsertionData=function(e){if(this._tab&&this._tab.tabBar){var t=-1,i="after",n=-1,o=this._tab.tabBar._getVisibleTabButtons(),s=this.elements._titleBarDiv.getBoundingClientRect().left,r=s;if(this._tab.tabBar.showComboBoxFlag&&this._tab.tabBar._tabComboBox&&this._tab.tabBar._tabComboBox.visibleFlag){var a=this._tab.tabBar._tabComboBox.getContent().getBoundingClientRect().right;if(e.x>a)return{movedWindowNewIndex:t,targetWindow:this._getWindowFromIndex(this.getEmbeddedWindows().length-1),beforeOrAfter:i,stopWindowGroupTabBarSliding:!0}}for(var l=0;l<o.length;l++){var d=this._tab.tabBar.getButtonFromValue(this._tab.getPageValueFromIndex(l)),h=d.getContent().getBoundingClientRect().left,c=d.getContent().getBoundingClientRect().right,u=0;if(!(c<=s)){if(u=h<=s?Math.abs(c-s):this._tab.tabBar.getWidthOfButton(d),e.x<r+u/2){t=l,n=l,i="before";break}if(e.x<r+u){t=l+1<o.length?l+1:l,n=l,i="after";break}r+=u}}return{movedWindowNewIndex:t,targetWindow:-1!=n?this._getWindowFromIndex(n):this._getWindowFromIndex(this.getEmbeddedWindows().length-1),beforeOrAfter:i}}},t.prototype.getCollapsibleState=function(){for(var e=0;e<this.currentWindows.length;e++)if(!this.currentWindows[e].collapsibleFlag)return!1;return this.currentDockArea!==a.WUXDockAreaEnum.TopDockArea&&this.currentDockArea!==a.WUXDockAreaEnum.BottomDockArea},t.prototype.getEmbeddedWindows=function(){var e=[];if(this._tab)for(var t=this._tab.getPageCount(),i=0;i<t;i++){var n=this._getWindowFromIndex(i);e.push(n)}return e},t.prototype.getVisibleEmbeddedWindows=function(){var e=[];if(this._tab)for(var t=this._tab.getPageCount(),i=0;i<t;i++){var n=this._getWindowFromIndex(i);n&&n.visibleFlag&&e.push(n)}return e},t.prototype.getDisplayedWindows=function(){return this.currentWindows.filter((function(e){return e.visibleFlag}))},t.prototype._attachWindow=function(e,i,n,o,s){var r=-1;if(e){if(e&&e.isAWindowGroup()&&e instanceof t){var l=e.getEmbeddedWindows();for(var d in r=1,l){r=-1===l[d]._attachToWindow(i,n,o,{isInteractiveAttachment:s})?-1:r}return r}!0!==e.resizableFlag&&"true"!==e.resizableFlag&&"vertical"!==e.resizableFlag&&"horizontal"!==e.resizableFlag||n===a.WUXSnapAreaEnum.InsideArea&&(!0!==e.resizableFlag&&"true"!==e.resizableFlag&&"horizontal"!==e.resizableFlag||(e.width=this._getMonoSelectionWidth()),!0!==e.resizableFlag&&"true"!==e.resizableFlag&&"vertical"!==e.resizableFlag||(i.currentDockArea!==a.WUXDockAreaEnum.RightDockArea&&i.currentDockArea!==a.WUXDockAreaEnum.LeftDockArea||!i.verticallyStretchableFlag)&&(-1===i.height?e.height=i.elements._mainContentDiv.clientHeight:e.height=i.height)),e.setPropertyFromUIInteraction("maximizedFlag",this.maximizedFlag),!i&&e.getDockedFlag()?(this.setPropertyFromUIInteraction("currentDockArea",e.currentDockArea),this.immersiveFrame&&!e.maximizedFlag&&this.immersiveFrame._replaceDockingZoneContent(e,this)):this.immersiveFrame&&e.getDockedFlag()&&this.immersiveFrame._removeWindowFromDockingArea(e,e.currentDockArea);var h=e.getAbsolutePosition(),c=this._addWindowContentToGroup(e,i,n,o);if(c<0)return c;e.windowGroup=this,i||this.setAbsolutePosition(h),this._updateResizableFlag(),this._updateMaximizedState(),this._updateTabCloseButtons(),this._updateCurrentWindows(),r=1}return r},t.prototype._supportsSnapArea=function(e){return e===a.WUXSnapAreaEnum.InsideArea},t.prototype._addWindowContentToGroup=function(e,t,i,n){var s=this,a=-1;if(this._tab&&e){e.getDockedFlag()&&e.immersiveFrame&&e.immersiveFrame._removeWindowFromDockingArea(e,e.currentDockArea),e.remove();var l=void 0;if(n){var d=this.getEmbeddedWindows().indexOf(t);-1!==d&&("before"===n?l=d:"after"===n&&(l=d+1))}this._tab.addTab(e.title,e.getContent(),l,!0,void 0,e.icon,e.closeButtonFlag,e.showTitleFlag||!e.icon);var h=this._tab.tabBar.getButtonFromValue(this._tab.value[0]);h&&o.addEventOnElement(this,h,r.POINTERDOWN,(function(t){e._onDragPointerDown(t),e._interactiveDrag=!0;var i=t.dsModel,n=s._getWindowFromIndex(s._tab.getPageIndexFromValue(i.value));e.addEventListener("stopWindowDrag",(function(){(e._interactiveDrag=!1,i&&n&&!s.containsWindow(n))&&(i.destroy(),0===s.getEmbeddedWindows().length&&s.destroy())}))})),a=1}return a},t.prototype._removeWindowContentFromGroup=function(e,t){var i=-1;if(e&&this._tab){var n=this.getEmbeddedWindows();t&&1!==n.length&&e._interactiveDrag?this._tab.removeTab(e.getContent(),!0):this._tab.removeTab(e.getContent(),!1),i=1}return i},t.prototype._attachToWindow=function(i,n,o,s){var r=-1;if(i&&n!==a.WUXSnapAreaEnum.NoneArea&&n!==a.WUXSnapAreaEnum.OutsideArea&&this._canBeSnapSource(i,n)&&i._canBeSnapTarget(this,n))if(r=1,n===a.WUXSnapAreaEnum.InsideArea){for(var l=this.currentWindows.slice(),d=this.getEmbeddedWindows(),h=i,c=0;c<d.length;c++){var u=d[c];if(u){var p=u._attachToWindow(h,n,0===c?o:"after",s);h=u,p<0&&(r=p)}}i instanceof t?i.currentWindows=l:i.windowGroup instanceof t&&(i.windowGroup.currentWindows=l)}else r=e.prototype._attachToWindow.call(this,i,n,o,s);return r},t.prototype._updateWindowPinnedState=function(e){if(e&&-1!==this.getEmbeddedWindows().indexOf(e)&&this._tab&&this._tab.tabBar){var t=this._tab.getPageValueFromIndex(this._getIndexFromWindow(e));this._tab.tabBar.pinTab(t)}},t.prototype._setTabMultiSelLayout=function(e){this._tab&&(this._tab.multiSelLayout=e)},t.prototype._getTabMultiSelLayout=function(){return this._tab?this._tab.multiSelLayout:"horizontal"},t.prototype._getWindowsImpactedBy=function(e){return"visibility"===e?this.getEmbeddedWindows():this.currentWindows},t.prototype._updateTitle=function(){if(e.prototype._updateTitle.call(this),this._tab)for(var t=this.getEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n){var o=this._tab.getPageValueFromIndex(this._getIndexFromWindow(n));this._tab.getOptionFromButton("label",o)!==n.title&&this._tab.setOptionFromButton("label",n.title,o),this._tab.getOptionFromButton("icon",o)!==n.icon&&this._tab.setOptionFromButton("icon",n.icon,o)}}},t.prototype._updateContentVisibleStateChange=function(){e.prototype._updateContentVisibleStateChange.call(this);for(var t=this.currentWindows,i=0;i<t.length;i++){t[i]._updateContentVisibleStateChange()}},t.prototype._updateCloseButtonFlag=function(){for(var e=!1,t=this.getEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n&&n.closeButtonFlag&&n.visibleFlag){e=!0;break}}this.closeButtonFlag=e,this.maximizedFlag&&this._updateTabCloseButtons()},t.prototype._updateTabCloseButtons=function(){for(var e=this.getEmbeddedWindows(),t=0;t<e.length;t++){var i=e[t];i&&this.maximizedFlag?this._tab.tabBar.setAllowClosableFlagOnValue(this._tab.getPageValueFromIndex(this._getIndexFromWindow(i)),i.closeButtonFlag):this._tab.tabBar.setAllowClosableFlagOnValue(this._tab.getPageValueFromIndex(this._getIndexFromWindow(i)),!1)}},t.prototype._updateMaximizeButtonFlag=function(){var e=!0;if(this.allowMaximizeFlag)for(var t=this._getCurrentAndPinnedWindows(),i=0;i<t.length;i++){var n=t[i];if(n&&(!n.maximizeButtonFlag||!n.allowMaximizeFlag)){e=!1;break}}else e=!1;this.maximizeButtonFlag=e},t.prototype._updateAllowMaximizeFlag=function(){for(var e=this.getEmbeddedWindows(),t=0;t<e.length;t++){var i=e[t];if(i&&!i.allowMaximizeFlag)return void(this.allowMaximizeFlag=!1)}this.allowMaximizeFlag=!0},t.prototype._updateMaximizedState=function(){for(var e=!1,t=this.getEmbeddedWindows(),i=0;i<t.length;i++){var n=t[i];if(n&&n.maximizedFlag){e=!0;break}}this.maximizedFlag=e},t.prototype._updateResizableFlag=function(){var e=!1,t=this.currentWindows;if(1!==t.length){for(var i="horizontal"!==this._getTabMultiSelLayout(),n=0;n<t.length;n++){var o=t[n];if(o){if(i&&(!0===o.resizableFlag||"true"===o.resizableFlag||"horizontal"===o.resizableFlag)){e="horizontal";break}if(!i&&(!0===o.resizableFlag||"true"===o.resizableFlag||"horizontal"===o.resizableFlag)){e="vertical";break}}}this.resizableFlag=e}else this.resizableFlag=this.currentWindows[0].resizableFlag},t.prototype._updateMinWidth=function(){if(this.currentWindows&&this.currentWindows.length>0&&this.immersiveFrame&&this.immersiveFrame.isInsertedInDOM()){var e=void 0,t=0;if((this.currentDockArea===a.WUXDockAreaEnum.BottomDockArea||this.currentDockArea===a.WUXDockAreaEnum.TopDockArea)&&this._tab&&this._tab.tabBar){var i=void 0;if(this._tab.tabBar.centeredFlag)i=parseInt(window.getComputedStyle(this.elements._tabBarContainer).width)+2;else{i=this._tab.tabBar.getWidthOfAllVisibleButtons(),this._tab.tabBar._applyInheritWidthToButtons();var n=parseInt(window.getComputedStyle(this.elements._titleBarDiv).width),o=parseInt(window.getComputedStyle(this.elements._tabBarContainer).width);isNaN(n)||isNaN(o)||(i=i+n-o)}if(t=i,this.immersiveFrame){var s=this.immersiveFrame.getDockingElement(this.currentDockArea)._getDockingZoneDimensions();t>s.width&&(t=s.width-1)}}for(var r=0;r<this.currentWindows.length;r++)(e=this.currentWindows[r])&&-1!=e.width&&t<e.minWidth&&(t=e.minWidth);this.minWidth=t}},t.prototype._updateMinHeight=function(){if(this.currentWindows&&this.currentWindows.length>0){for(var e=void 0,t=this.currentWindows[0].minHeight,i=0;i<this.currentWindows.length;i++)(e=this.currentWindows[i])&&t<e.minHeight&&(t=e.minHeight);this.minHeight=t}},t.prototype._getMonoSelectionWidth=function(){var e=this._getCurrentAndPinnedWindows();if(1===e.length)return-1===this.width?parseInt(window.getComputedStyle(e[0].getContent()).width):this.width;if(e.length>1){for(var t=0;t<e.length;t++){var i=e[t];if(-1!==i.width)return i.width}return parseInt(window.getComputedStyle(e[0].getContent()).width)}return 0},t.prototype._getCurrentAndPinnedWindows=function(){if(this._tab){for(var e=this._tab.value,t=[],i=this._tab.getIndexesFromValues(e),n=0;n<i.length;n++){var o=i[n];if(o>=0)(a=this._getWindowFromIndex(o))&&t.push(a)}var s=this._tab.tabBar.pinnedList;if(s){var r=this._tab.getIndexesFromValues(s);for(n=0;n<r.length;n++){var a,l=r[n];if(l>=0&&-1==i.indexOf(l))(a=this._getWindowFromIndex(l))&&t.push(a)}}return t}},t.prototype._updateCurrentWindows=function(){var e=this._getCurrentAndPinnedWindows();this._updateHorizontallyStretchableFlag(),this._updateVerticallyStretchableFlag();var t=function(e,t){for(var i=[],n=e.concat(t),o=0;o<n.length;o++){var s=n[o];-1!==t.indexOf(s)&&-1!==e.indexOf(s)||i.push(s)}return i}(this.currentWindows,e);this.currentWindows=e;for(var i=0;i<t.length;i++){t[i]._updateContentVisibleStateChange()}this._applyPosition()},t.prototype._updateHorizontallyStretchableFlag=function(){for(var e=this._getCurrentAndPinnedWindows(),t=!1,i=0;i<e.length;i++)if(e[i]&&!0===e[i].horizontallyStretchableFlag){t=!0;break}this.horizontallyStretchableFlag=t},t.prototype._updateVerticallyStretchableFlag=function(){for(var e=this._getCurrentAndPinnedWindows(),t=!1,i=0;i<e.length;i++)if(e[i]&&!0===e[i].verticallyStretchableFlag){t=!0;break}this.verticallyStretchableFlag=t},t.prototype.ensureWindowVisible=function(e){var t=this.currentWindows;null!=t&&0!==t.length&&-1===t.indexOf(e)&&(this.currentWindows=[e])},t.prototype.getWindowContentVisibleState=function(e){var t=!1,i=this.currentWindows;return null!=i&&0!==i.length&&-1!==i.indexOf(e)&&(t=!0),t&&this.expandedFlag},t.prototype._getWindowFromIndex=function(e){var t=this._tab.getPageContentFromIndex(e);return t&&t.dsModel?t.dsModel:t},t.prototype._getIndexFromWindow=function(e){return this._tab?this._tab.getIndexOf(e.getContent()):-1},t.prototype._updateWindowVisibility=function(e){var t=e.visibleFlag;if(this._tab&&this._tab._setTabVisibility(this._tab.getPageValueFromIndex(this._getIndexFromWindow(e)),t),t)t&&0===this.currentWindows.length&&(this.currentWindows=[e]);else{var i=this.currentWindows.indexOf(e);if(-1!==i&&this.currentWindows.splice(i,1),0===this.currentWindows.length)for(var n=this.getEmbeddedWindows(),o=0;o<n.length;o++){var s=n[o];if(s&&s.visibleFlag){this.currentWindows=[s];break}}}this._updateVisibleState(),this._updateTitle()},t.prototype._manageDrag=function(e,t){if(this._tab){var i=this._getIndexFromWindow(e);if(this._tab.tabBar.showComboBoxFlag&&this._tab.tabBar._tabComboBox&&this._tab.tabBar._tabComboBox.visibleFlag){if(!l.isMouseOverElement(this._tab.tabBar._buttonGroup.getContent(),t))return void this._stopTabBarSliding();var n=this.elements._titleBarDiv.getBoundingClientRect().left,o=this._tab.tabBar._buttonGroup.getContent().getBoundingClientRect().right;Math.abs(t.x-n)<=7?this._startTabBarSliding("left"):Math.abs(t.x-o)<=7?this._startTabBarSliding("right"):this._stopTabBarSliding()}var s=this._computeDropInsertionData(t);if(s.stopWindowGroupTabBarSliding&&this._stopTabBarSliding(),i!==s.movedWindowNewIndex){this._tab.tabBar._exchangeTabs(this._tab.getPageValueFromIndex(i),this._tab.getPageValueFromIndex(s.movedWindowNewIndex)),this._tab.tabBar._slideToValue();for(var r=this.getEmbeddedWindows(),a=0;a<r.length;a++)r[a]._saveWindowGroupInPreferences()}}},t.prototype.handleEvents=function(){var t=this;e.prototype.handleEvents.call(this),this._tab&&(o.addEventOnElement(this,this._tab.tabBar,"pinStateChange",(function(e){var i=t._getWindowFromIndex(t._tab.getPageIndexFromValue(e.options.value));i&&void 0!==e.options.pinnedFlag?(i._properties.pinnedFlag.value=e.options.pinnedFlag,void 0!==i.identifier&&i._savePinnedFlagInPreferences()):console.log(e)})),o.addEventOnElement(this,this._tab,"change",(function(){t._applyPosition(),t._updateCurrentWindows()})),this._tab.tabBar.onRemoveTabEvent((function(e){t._getWindowFromIndex(e.index).close()})),this._tab.tabBar.onPinTab((function(e){t._updateCurrentWindows()})),this._tab.tabBar.onUnpinTab((function(e){t._updateCurrentWindows()})),o.addEventOnElement(this,this,"move",(function(){t._tab&&t._tab.tabBar&&t._tab.tabBar._tabComboBox&&t._tab.tabBar._tabComboBox._hidePopup()})))},t.prototype._buildOrDelegateContextualMenu=function(e){var t=[];if(e&&e.infos&&e.infos.target){var i=o.firstParentWithClass(e.infos.target,"wux-controls-button"),n=i?i.dsModel:void 0,s=n?n.value:this.currentWindows&&this.currentWindows.length>0?this._getIndexFromWindow(this.currentWindows[0]):0,r=this._tab?this._getWindowFromIndex(this._tab.getPageIndexFromValue(s)):null;e.isGroupTarget=!n,r&&(t=r.onContextualEvent(e))}return t},t.prototype._getMenuToAddData=function(e,t){var i,n=!1,s=!1;if(t&&t.infos&&t.infos.target){var r=o.firstParentWithClass(t.infos.target,"wux-controls-button");i=r&&r.dsModel?r.dsModel:void 0,"close"===e?(n=i&&void 0!==i.value?void 0!==this._tab.tabBar.getButtonFromValue(i.value).elements._sideButton:this.closeButtonFlag,i||(s=!0)):"maximize"===e&&(n=this.maximizeButtonFlag)}return{canbeAdded:n,menuTarget:i,closeAll:s}},t.prototype._onCloseContextMenuAction=function(e){e?this._tab&&this._tab.tabBar._closeListener(e):this.close()},t.prototype._activateWindowForContextMenu=function(t){e.prototype._activateWindowForContextMenu.call(this,t);var i=o.firstParentWithClass(t,"wux-controls-button"),n=i?i.dsModel:void 0;n&&(n.checkFlag=!0)},t.prototype._startTabBarSliding=function(e){var t=this;this._tabBarSlidingInterval||(this._tabBarSlidingInterval=window.setInterval((function(){t._tab&&t._tab.tabBar?t._tab.tabBar._slideTabBar(e):t._stopTabBarSliding()}),900))},t.prototype._stopTabBarSliding=function(){this._tabBarSlidingInterval&&(window.clearInterval(this._tabBarSlidingInterval),delete this._tabBarSlidingInterval,this._tabBarSlidingInterval=null)},t.prototype._stopDrag=function(){this._stopTabBarSliding()},t}(h),p=function(e){if((!0===this.resizableFlag||"true"===this.resizableFlag||"horizontal"===this.resizableFlag)&&e>=this.minWidth)for(var t=this.getEmbeddedWindows(),i=0;i<t.length;i++)!0!==t[i].resizableFlag&&"true"!==t[i].resizableFlag&&"horizontal"!==t[i].resizableFlag||(t[i].width=e)},m=function(e){if((!0===this.resizableFlag||"true"===this.resizableFlag||"vertical"===this.resizableFlag)&&e>=this.minHeight)for(var t=this.getEmbeddedWindows(),i=0;i<t.length;i++)!0!==t[i].resizableFlag&&"true"!==t[i].resizableFlag&&"vertical"!==t[i].resizableFlag||(t[i].height=e)};return n.addClass(u,"windowgroupastab"),u}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/Panel",["require","exports","UWA/Core","DS/Core/WebUXComponents","DS/Windows/Window","DS/Utilities/Utils","DS/Controls/Button","DS/Controls/Expander","DS/Core/PointerEvents","DS/Utilities/Dom","DS/CoreBase/WebUXGlobalEnums","DS/Windows/WindowGroupAsTab","DS/Windows/WindowGroupAsGrid"],(function(e,t,i,n,o,s,r,a,l,d,h,c,u){"use strict";var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{collapsibleFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},snappableFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},floatableFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},headerPopupContent:{defaultValue:void 0,type:"object",category:"Behavior"},pinnedFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},showTitleFlag:{defaultValue:!0,type:"boolean",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){e.prototype.buildView.call(this),this._savedPreferencesKeys.push("pinnedFlag"),this.elements.container.addClassName("wux-windows-panel"),this.elements._titleBarDiv.addClassName("wux-windows-panel"),this.elements._buttonsDiv=new i.Element("div",{class:"wux-windows-panel-buttons"}),this.elements._buttonsDiv.inject(this.elements._mainContentDiv,"top"),this.elements._buttonsDiv.hide(),this.allowedDockAreas=h.WUXDockAreaEnum.TopDockArea|h.WUXDockAreaEnum.BottomDockArea|h.WUXDockAreaEnum.LeftDockArea|h.WUXDockAreaEnum.RightDockArea},t.prototype._applyHeaderPopupContent=function(e){var t=this,n=function(e){if(t.elements._headerPopup&&t.elements._headerPopup.elements&&!d.isElementInside(e.target,t.elements._headerPopup.elements.header)&&!d.isElementInside(e.target,t.elements._headerPopup.elements.expanderContainer)){var i=Object.keys(t.buttons).length;(void 0!==t.buttons&&i>0&&e.target.parentNode!==t.buttons.Ok.getContent()&&e.target!==t.buttons.Ok.getContent()&&e.target.parentNode!==t.buttons.Cancel.getContent()&&e.target!==t.buttons.Cancel.getContent()||0===i)&&t.elements._headerPopup.close()}},o=function(e){if(t.elements._headerPopup&&t.elements._headerPopup.elements&&!d.isElementInside(e.target,t.elements._headerPopup.elements.header)&&!d.isElementInside(e.target,t.elements._headerPopup.elements.expanderContainer)){var i=Object.keys(t.buttons).length;void 0!==t.buttons&&i>0&&e.target.parentNode!==t.buttons.Ok.getContent()&&e.target!==t.buttons.Ok.getContent()&&e.target.parentNode!==t.buttons.Cancel.getContent()&&e.target!==t.buttons.Cancel.getContent()?(t.elements._headerPopup.close(),e.target!==t.elements._titleBarDiv&&e.stopPropagation()):0===i&&(t.elements._headerPopup.close(),e.stopPropagation())}},s=function(e){t.elements._headerPopup.close()};if(this.headerPopupContent){if(this.headerPopupContent.content){this.elements._headerPopup&&(this.elements._headerPopup.hasClassName&&this.elements._headerPopup.hasClassName("wux-windows-panel-simplesuperfeature")||this.elements._headerPopup.getContent&&this.elements._headerPopup.getContent()&&this.elements._headerPopup.getContent().hasClassName("wux-windows-panel-simplesuperfeature"))&&(this.elements._headerPopup.destroy(),delete this.elements._headerPopup),this.elements._headerPopup?(this.elements._headerPopup.header=this.headerPopupContent.title,this.elements._headerPopup.body=this.headerPopupContent.content):this.elements._headerPopup=new a({header:this.headerPopupContent.title,body:this.headerPopupContent.content,style:"mode-selector"}),this.elements._buttonsDiv.removeClassName("wux-windows-panel-buttons"),this.elements._buttonsDiv.addClassName("wux-windows-panel-expander"),this.elements._mainContentDiv.style.background="",this.elements._contentDiv.style.animation="wux-unblur 0.3s forwards",this.elements._mainContentDiv.style.pointerEvents="all";var r=this.getOwnerDocument();r.removeEventListener(l.POINTERUP,n),r.removeEventListener(l.POINTERDOWN,o,!0),e&&e.content&&d.removeEventOnElement(this,e.content,"buttonclick",s),this.elements._buttonsDiv.show(),d.addEventOnElement(this,this.headerPopupContent.content,"buttonclick",s),d.addEventOnElement(this,this.elements._headerPopup,"transitionend",(function(e){e.target===t.elements._headerPopup&&e.stopPropagation()})),d.addEventOnElement(this,this.elements._headerPopup,"expand",(function(e){t.elements._mainContentDiv.style.background="rgba(255, 255, 255, 0.76)",t.elements._contentDiv.style.animation="wux-blur 0.3s forwards",t.elements._mainContentDiv.style.pointerEvents="none";var i=t.getOwnerDocument();i.addEventListener(l.POINTERUP,n),i.addEventListener(l.POINTERDOWN,o,!0)})),d.addEventOnElement(this,this.elements._headerPopup,"collapse",(function(e){t.elements._mainContentDiv.style.background="",t.elements._contentDiv.style.animation="wux-unblur 0.3s forwards",t.elements._mainContentDiv.style.pointerEvents="all";var i=t.getOwnerDocument();i.removeEventListener(l.POINTERUP,n),i.removeEventListener(l.POINTERDOWN,o,!0)})),d.addEventOnElement(this,this.elements._titleBarDiv,l.POINTERDOWN,(function(e){t.elements._headerPopup.close()}))}else this.elements._headerPopup&&!this.elements._headerPopup.hasClassName("wux-windows-panel-simplesuperfeature")&&(this.elements._headerPopup.destroy(),delete this.elements._headerPopup),this.elements._headerPopup?this.elements._headerPopup.setText(this.headerPopupContent.title):(this.elements._headerPopup=new i.Element("div",{class:"wux-windows-panel-simplesuperfeature",text:this.headerPopupContent.title}),this.elements._buttonsDiv.addClassName("wux-windows-panel-buttons"),this.elements._buttonsDiv.removeClassName("wux-windows-panel-expander"));this.elements._headerPopup.inject(this.elements._buttonsDiv)}else this.elements._headerPopup&&(this.elements._headerPopup.destroy(),delete this.elements._headerPopup);this._applyButtons()},t.prototype._superFeatureCallback=function(e,t,i,n){return i&&(this.headerPopupContent={title:e.label,content:n}),e.checkFlag=!0,t&&t(),e.label},t.prototype.buildSuperFeature=function(e){var t=this,n=!e.title,o=void 0;if(this.elements._buttonsDiv.hasChildNodes()&&this.elements._headerPopup)for(var s=0;s<this.elements._buttonsDiv.childNodes.length;s++){var l=this.elements._buttonsDiv.childNodes[s];(l.dsModel&&l.dsModel instanceof a||l.hasClassName("wux-windows-panel-simplesuperfeature"))&&(l.remove(),this.elements._headerPopup=void 0)}if(e.content){(o=new i.Element("div",{class:"wux-windows-panel-superfeature"})).setStyles({display:"flex","justify-content":"space-around"});for(s=0;s<e.content.length;s++){var d=new r({type:"radio",label:e.content[s].label,icon:e.content[s].icon,value:s,displayStyle:"lite-borders",clickMode:1,onClick:function(i){t._superFeatureCallback(i.dsModel,e.content[i.dsModel.value].onSelect,n,o)}});d.inject(o),d.getContent().setStyle("flex-grow","1"),0===s&&this._superFeatureCallback(d,e.content[0].onSelect,n,o)}}return e.content||n?this.headerPopupContent={title:e.title?e.title:e.content[0].label,content:o}:this.headerPopupContent={title:e.title},this.headerPopupContent},t.prototype.buildStandardButtons=function(){var e=new r({icon:{iconName:"check",fontIconFamily:h.WUXManagedFontIcons.Font3DS},emphasize:"secondary"});e.elements.container.addClassName("wux-windows-panel-apply");var t=new r({icon:{iconName:"wrong",fontIconFamily:h.WUXManagedFontIcons.Font3DS}});t.elements.container.addClassName("wux-windows-panel-cancel"),this.buttons={Ok:e,Cancel:t},d.addEventOnElement(this,e,l.POINTERUP,(function(e){e.stopPropagation()})),d.addEventOnElement(this,t,l.POINTERUP,(function(e){e.stopPropagation()}))},t.prototype.getCollapsibleState=function(){return this.collapsibleFlag&&this.currentDockArea!==h.WUXDockAreaEnum.TopDockArea&&this.currentDockArea!==h.WUXDockAreaEnum.BottomDockArea&&!this.maximizedFlag&&!(this.currentDockArea===h.WUXDockAreaEnum.LeftDockArea&&this.verticallyStretchableFlag)&&!(this.currentDockArea===h.WUXDockAreaEnum.RightDockArea&&this.verticallyStretchableFlag)},t.prototype.getFloatableState=function(){return this.floatableFlag},t.prototype.supportsGroupType=function(e){return e===h.WUXWindowGroupTypeEnum.GroupAsTab||this.immersiveFrame.__acceptsSnapping__&&e===h.WUXWindowGroupTypeEnum.GroupAsGrid},t.prototype._canBeSnapSource=function(e,t){var i=e&&this.snappableFlag&&e!==this||t===h.WUXSnapAreaEnum.OutsideArea||t===h.WUXSnapAreaEnum.NoneArea;if(i&&e&&(i=e.immersiveFrame===this.immersiveFrame),i&&t!==h.WUXSnapAreaEnum.OutsideArea&&t!==h.WUXSnapAreaEnum.NoneArea){var n=t===h.WUXSnapAreaEnum.InsideArea?h.WUXWindowGroupTypeEnum.GroupAsTab:h.WUXWindowGroupTypeEnum.GroupAsGrid;i=this.supportsGroupType(n)}return i&&e&&t!==h.WUXSnapAreaEnum.OutsideArea&&e.getDockedFlag()&&(i=(this.allowedDockAreas&e.currentDockArea)===e.currentDockArea),i&&e&&e.maximizedFlag&&!this.allowMaximizeFlag&&(i=!1),i},t.prototype._canBeSnapTarget=function(e,t){var i=e&&e!==this&&(t===h.WUXSnapAreaEnum.OutsideArea||this.snappableFlag);if(i&&t!==h.WUXSnapAreaEnum.OutsideArea&&t!==h.WUXSnapAreaEnum.NoneArea){var n=t===h.WUXSnapAreaEnum.InsideArea?h.WUXWindowGroupTypeEnum.GroupAsTab:h.WUXWindowGroupTypeEnum.GroupAsGrid;i=this.supportsGroupType(n)}if(i&&e&&(i=e.immersiveFrame===this.immersiveFrame),i&&this.getDockedFlag())switch(this.currentDockArea){case h.WUXDockAreaEnum.LeftDockArea:case h.WUXDockAreaEnum.RightDockArea:i=t===h.WUXSnapAreaEnum.OutsideArea||t===h.WUXSnapAreaEnum.TopArea||t===h.WUXSnapAreaEnum.BottomArea||t===h.WUXSnapAreaEnum.InsideArea;break;case h.WUXDockAreaEnum.TopDockArea:case h.WUXDockAreaEnum.BottomDockArea:i=t===h.WUXSnapAreaEnum.OutsideArea||t===h.WUXSnapAreaEnum.LeftArea||t===h.WUXSnapAreaEnum.RightArea||t===h.WUXSnapAreaEnum.InsideArea}return i},t.prototype._createWindowGroup=function(e){var t={immersiveFrame:this.immersiveFrame,activeFlag:!1,maximizedFlag:this.maximizedFlag};return e===h.WUXWindowGroupTypeEnum.GroupAsTab?new c(t):new u(t)},t.prototype._applyButtons=function(t){e.prototype._applyButtons.call(this,t),0==this.elements._buttonsDiv.childNodes.length?this.elements._buttonsDiv.hide():(this.elements._headerPopup||this.elements._buttonsDiv.addClassName("wux-windows-panel-buttons"),this.elements._buttonsDiv.show())},t.prototype._applyCollapsibleFlag=function(){this._updateFromCollapsibleState()},t.prototype._applyFloatableFlag=function(){if(!this.floatableFlag&&!this.currentDockArea){var e=h.WUXDockAreaEnum.LeftDockArea;if(!(e&this.allowedDockAreas))for(var t=0,i=s.enumKeys(h.WUXDockAreaEnum);t<i.length;t++){var n=i[t];h.WUXDockAreaEnum[n]!=h.WUXDockAreaEnum.NoneDockArea&&h.WUXDockAreaEnum[n]&this.allowedDockAreas&&(e=h.WUXDockAreaEnum[n])}this.windowGroup?this.windowGroup.currentDockArea=e:this.currentDockArea=e}},t.prototype._applyWindowGroup=function(t){e.prototype._applyWindowGroup.call(this,t),this.pinnedFlag&&this._applyPinnedFlag()},t.prototype._applyPinnedFlag=function(){this.windowGroup&&this.windowGroup instanceof c&&this.windowGroup._updateWindowPinnedState(this)},t.prototype._applyShowTitleFlag=function(){this.showTitleFlag||!this.icon||"object"==typeof this.icon&&""===this.icon.iconName?this.elements._titleP.setStyle("display",""):this.elements._titleP.setStyle("display","none"),this._updateTitleStyle()},t.prototype._applyIcon=function(t){e.prototype._applyIcon.call(this,t),this._applyShowTitleFlag(),this._updateTitleStyle()},t.prototype._applyTitle=function(t){e.prototype._applyTitle.call(this,t),this._applyShowTitleFlag(),this._updateTitleStyle()},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("headerPopupContent")&&this._applyHeaderPopupContent(),this.isDirty("floatableFlag")&&this._applyFloatableFlag(),this.isDirty("collapsibleFlag")&&this._applyCollapsibleFlag(),this.isDirty("showTitleFlag")&&this._applyShowTitleFlag()},t.prototype._applyVerticallyStretchableFlag=function(t){e.prototype._applyVerticallyStretchableFlag.call(this,t),this._applyCollapsibleFlag()},t.prototype._updateTitleStyle=function(){"none"===this.elements._titleP.style.display||""===this.title?this.elements.iconPlaceholder.addClassName("wux-windows-icon-no-title"):this.elements.iconPlaceholder.removeClassName("wux-windows-icon-no-title")},t.prototype._savePinnedFlagInPreferences=function(){var e={pinnedFlag:this.pinnedFlag};this._saveDataInPreferences("pinnedFlag",e)},t.prototype._getPinnedFlagFromPreferences=function(){return this._getDataFromPreferences("pinnedFlag")},t.prototype._readWindowPreferences=function(){e.prototype._readWindowPreferences.call(this);var t=this._getPinnedFlagFromPreferences();t&&(this.pinnedFlag=t.pinnedFlag)},t}(o);return n.addClass(p,"panel"),p}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var __awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var i,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=a(0),r.throw=a(1),r.return=a(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};define("DS/Windows/ImmersiveFrame",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Utilities/WUXUWAUtils","DS/Core/WebUXComponents","DS/CoreBase/WebUXGlobalEnums","DS/Controls/Abstract","DS/Windows/Window","DS/Windows/DockingElement","DS/Windows/DockingElementForImmersiveFrame","DS/Windows/Panel","DS/Utilities/WebUXColorEnums","i18n!DS/Windows/assets/nls/translation"],(function(e,t,i,n,o,s,r,a,l,d,h,c,u,p,m){"use strict";var g=22;function f(e,t){var i=null,o=a.WUXSnapAreaEnum.NoneArea;if(e)for(var s in this.windows){var r=this.windows[s];if(r){if(r.windowGroup&&r.windowGroup.getGroupType()===a.WUXWindowGroupTypeEnum.GroupAsTab)continue;if(r!==e){var l=r.getBoundingClientRect();if(n.rectContains(l,t)){var d=i?i._getTopWindow():void 0;r._isFakeWindowForStacking||!(!i||d.getZIndex()<r.getZIndex()||d.getDockedFlag()&&!r.getDockedFlag())||r.isAWindowGroup()&&r.getGroupType()===a.WUXWindowGroupTypeEnum.GroupAsGrid||(i=r)}}}}if(i){if(e._canBeSnapSource(i,a.WUXSnapAreaEnum.LeftArea)&&i._canBeSnapTarget(e,a.WUXSnapAreaEnum.LeftArea)){var h=i._getSnapAreaRect(a.WUXSnapAreaEnum.LeftArea);n.rectContains(h,t)&&(o=a.WUXSnapAreaEnum.LeftArea)}if(o===a.WUXSnapAreaEnum.NoneArea&&e._canBeSnapSource(i,a.WUXSnapAreaEnum.RightArea)&&i._canBeSnapTarget(e,a.WUXSnapAreaEnum.RightArea)){var c=i._getSnapAreaRect(a.WUXSnapAreaEnum.RightArea);n.rectContains(c,t)&&(o=a.WUXSnapAreaEnum.RightArea)}if(o===a.WUXSnapAreaEnum.NoneArea&&e._canBeSnapSource(i,a.WUXSnapAreaEnum.TopArea)&&i._canBeSnapTarget(e,a.WUXSnapAreaEnum.TopArea)){var u=i._getSnapAreaRect(a.WUXSnapAreaEnum.TopArea);n.rectContains(u,t)&&(o=a.WUXSnapAreaEnum.TopArea)}if(o===a.WUXSnapAreaEnum.NoneArea&&e._canBeSnapSource(i,a.WUXSnapAreaEnum.BottomArea)&&i._canBeSnapTarget(e,a.WUXSnapAreaEnum.BottomArea)){var p=i._getSnapAreaRect(a.WUXSnapAreaEnum.BottomArea);n.rectContains(p,t)&&(o=a.WUXSnapAreaEnum.BottomArea)}if(o===a.WUXSnapAreaEnum.NoneArea&&void 0===i._isFakeWindowForStacking&&e._canBeSnapSource(i,a.WUXSnapAreaEnum.InsideArea)&&i._canBeSnapTarget(e,a.WUXSnapAreaEnum.InsideArea)){var m=i._getSnapAreaRect(a.WUXSnapAreaEnum.InsideArea);n.rectContains(m,t)&&(o=a.WUXSnapAreaEnum.InsideArea)}}this._snapTargetWindow===i&&this._latestActiveSnapArea===o||(this._snapTargetWindow&&(this._snapTargetWindow.activeSnapArea=a.WUXSnapAreaEnum.NoneArea),this._snapTargetWindow=o!==a.WUXSnapAreaEnum.NoneArea?i:void 0,this._latestActiveSnapArea=o,i&&o!==a.WUXSnapAreaEnum.NoneArea&&(this._snapPointer=t,this._snapTargetWindow.activeSnapArea=o,e&&o===a.WUXSnapAreaEnum.InsideArea&&this._initStackingAsTabWindowsTimer(this._snapTargetWindow,e)))}function _(e,t){var i=null;if(e.immersiveFrame===this&&e.allowedDockAreas)for(var n=0;n<this.dockingElements.length;n++){var o=this.dockingElements[n];if(e.allowedDockAreas&o.side&&!this._snapTargetWindow&&!i){var s=y.call(this,o.side);if(t.x<s.x||t.x>=s.x+s.width||t.y<s.y||t.y>=s.y+s.height)v(o);else{if(o.collapseDockingZoneFlag&&(o.__collapseMemory=!0,o.collapseDockingZoneFlag=!1),!o.visibleDockingZoneFlag){if(0===o.getContainedVisibleWindows().length){var r=b(e,o,o.side);isNaN(r)||(o.dockingZoneSize=r)}o.visibleDockingZoneFlag=!0}o.interactiveDockAreaVisibleFlag=!0,i=o}}else o.interactiveDockAreaVisibleFlag=!1}this._activeDockingElement!==i&&(this._activeDockingElement&&v(this._activeDockingElement),this._activeDockingElement=i)}function w(e,t,i){if(this._snapTargetWindow){var n=i||this._snapTargetWindow,o=this._snapTargetWindow.activeSnapArea;e._attachToWindow(n,o,t,{isInteractiveAttachment:!0}),e.windowGroup&&(e.windowGroup.activeFlag=!0);var s=e.elements.container?e:n;s._saveWindowGroupInPreferences(),s._saveDockAreaInPreferences(),this._snapTargetWindow.activeSnapArea=a.WUXSnapAreaEnum.NoneArea,this._snapTargetWindow=null}else this._activeDockingElement&&(e.setPropertyFromUIInteraction("currentDockArea",this._activeDockingElement.side),e.currentDockArea===this._activeDockingElement.side&&(e._saveDockAreaInPreferences(),1===this._activeDockingElement.getDisplayedWindows().length&&this._activeDockingElement._saveDockingZoneSizeInPreferences()));this._activeDockingElement&&(this._activeDockingElement.interactiveDockAreaVisibleFlag=!1,this._activeDockingElement=null),e.elements.container&&e.elements.container.removeClassName("wux-windows-window-furtive")}function v(e){e&&(e.interactiveDockAreaVisibleFlag=!1,e.__collapseMemory&&(e.collapseDockingZoneFlag=!0,e.__collapseMemory=!1),e.updateVisibleDockingZoneFlag())}function y(e){var t=this.getContent().getBoundingClientRect(),i=this.getDockingElement(e).getContent().getBoundingClientRect();switch(e){case a.WUXDockAreaEnum.TopDockArea:return{x:t.left,y:i.top-g,width:t.width,height:2*g};case a.WUXDockAreaEnum.BottomDockArea:return{x:t.left,y:i.bottom-g,width:t.width,height:2*g};case a.WUXDockAreaEnum.LeftDockArea:return{x:i.left-g,y:t.top,width:2*g,height:t.height};case a.WUXDockAreaEnum.RightDockArea:return{x:i.right-g,y:t.top,width:2*g,height:t.height}}}function b(e,t,i,n){if(t.shouldDockingZoneSizeChangeWhenDockingWindow(e)){var s=t.dockingZoneSize,r=window.getComputedStyle(e.getTitleBar()),l=e._getDockedDimensionsFromPreferences(),d=i===a.WUXDockAreaEnum.LeftDockArea||i===a.WUXDockAreaEnum.RightDockArea?"width":"height";if((!o.isCurrentlyCalledFromUIInteraction()||n&&n.restoreDockedPreferences)&&l&&l[d])s=l[d];else if((!l||e.arePreferencesRestored()||e.isAWindowGroup())&&t.side===a.WUXDockAreaEnum.TopDockArea||t.side==a.WUXDockAreaEnum.BottomDockArea){e.getContent().offsetParent||-1!==e.height||e.immersiveFrame._moveWindowToImmersiveFrame(e);var h=parseInt(window.getComputedStyle(e.elements._mainContentDiv).getPropertyValue("border-bottom-width"))||0;s=-1===e.height?parseInt(window.getComputedStyle(e.getContent()).height):e.height+e._getTitleBarHeight()+h,0===parseInt(r.borderTop)&&s++,t.useBordersFlag&&s++}else if(!l||e.arePreferencesRestored()||e.isAWindowGroup()){e.getContent().offsetParent||-1!==e.width||e.immersiveFrame._moveWindowToImmersiveFrame(e),s=(-1===e.width?parseInt(window.getComputedStyle(e.getContent()).width):e.width)+1,0===parseInt(r.borderLeft)&&s++,t.useBordersFlag&&s++}return s}}var D=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return s.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{dockingElementsPriority:{defaultValue:[a.WUXDockAreaEnum.LeftDockArea,a.WUXDockAreaEnum.RightDockArea,a.WUXDockAreaEnum.TopDockArea,a.WUXDockAreaEnum.BottomDockArea],type:"array",readOnly:!0,category:"Behavior"},reactToPointerEventsFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},dockingElementsAutoExpandFlag:{defaultValue:!0,type:"boolean",category:"Behavior"}}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_privateProperties",{get:function(){return{_ActionBar_V3:{defaultValue:!1,type:"boolean",category:"Appearance",noNeedToApplyFlag:!0},__DockingTabsInBottomArea:{defaultValue:!1,type:"boolean",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype.getSnapTargetWindow=function(){return this._snapTargetWindow},t.prototype.init=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._insertedInDOM=!1,this._fakeStackedWindow=null,this._snapSourceWindow=null,this._stopDragOccured=!0,this.windows={},this.dockingElements=[],this.__acceptsSnapping__=!1,e.prototype.init.apply(this,t)},t.prototype._preBuildView=function(t){e.prototype._preBuildView.call(this,t),t&&t._ActionBar_V3&&this._properties.dockingElementsPriority&&(this._properties.dockingElementsPriority.value=[a.WUXDockAreaEnum.TopDockArea,a.WUXDockAreaEnum.BottomDockArea,a.WUXDockAreaEnum.LeftDockArea,a.WUXDockAreaEnum.RightDockArea])},t.prototype._postBuildView=function(){this.elements.container.addClassName("wux-windows-immersive-frame");for(var e=0;e<this.dockingElementsPriority.length;e++)this._addDockingZone(this.dockingElementsPriority[e],200);this.getFreeZone().addClassName("wux-windows-immersive-frame-freeZone"),this._snapTargetWindow=null,this._activeDockingElement=null,this.elements.pointerEventsDiv=new i.Element("div",{class:"wux-windows-immersive-frame-pointer-events"}).inject(this.elements.container),this.elements.pointerEventsDiv.hide();var t=this;o.onNodeRendered(this.getContent(),(function(){t._insertedInDOM=!0,t._onResizeFun&&t._onResizeFun()}))},t.prototype._applyIdentifier=function(e){this.identifier&&this.getContent().setAttribute("wux-identifier",this.identifier)},t.prototype.isInsertedInDOM=function(){return Boolean(this._insertedInDOM)},t.prototype._applyReactToPointerEventsFlag=function(e){this.reactToPointerEventsFlag?this.elements.container.removeClassName("wux-windows-immersive-frame-no-pointerevents"):this.elements.container.addClassName("wux-windows-immersive-frame-no-pointerevents")},t.prototype.dockWindow=function(e,t,i){var n;if(e._canBeDocked(t,i)){var o=this.getDockingElement(t);if(o){for(var s=this.getWindowsInDockingElement(t),r=s[0]===e&&s.length>1?s[1]:s[0],l=e._getDetachedFromPreferences(),d=1;r&&(!i||!i.ignorePreferences)&&!k(e,r,l);)d<s.length?(r=s[d],d++):r=void 0;!(i&&i.attachToOtherDockedWindow&&s.length>0&&r&&r!==e)||e.windowGroup&&r.windowGroup&&e.windowGroup===r.windowGroup||(n={targetWindow:r,beforeOrAfter:"after"});var h=e.currentDockArea;if(h!==t){e._properties.currentDockArea.value=t;var c=Object.assign({oldDockArea:h},i);e._moveToAdequateZone(c),e._applyCurrentDockArea(h)}else e._moveToAdequateZone(i);e.windowGroup&&e.currentDockArea===t||e.maximizedFlag||(o.interactiveDockAreaVisibleFlag=!1,o.updateVisibleDockingZoneFlag(),o.__onTransitionEnd(),this._isCurrentlyCalledFromUIInteraction()&&o._saveDockingZoneSizeInPreferences()),e.immersiveFrame=this,n&&e._attachToWindow(n.targetWindow,a.WUXSnapAreaEnum.InsideArea,n.beforeOrAfter,{ignorePreferences:i.ignorePreferences}),o._updateFromContainedWindows(),o._updateContainedWindows()}}return e.currentDockArea===t?1:-1},t.prototype._dockingElementWithTabs=function(e){return this.__DockingTabsInBottomArea&&e===a.WUXDockAreaEnum.BottomDockArea},t.prototype.getWindowsInDockingElement=function(e){for(var t=[],i=0,n=Object.values(this.windows);i<n.length;i++){var o=n[i];o.currentDockArea!==e||o.maximizedFlag||o.windowGroup||t.push(o)}var s=this.getDockingElement(e);return t.sort((function(e,t){return(s.getIndexFromContent(e.getContent())||0)-(s.getIndexFromContent(t.getContent())||0)})),t},t.prototype.undockWindow=function(e,t){if(e){var i=e.currentDockArea,n=this.getDockingElement(i);if(e.isBeingClosed()){var o=e.getContent().getParent();o&&o.removeChild(e.getContent())}else if(!e.windowGroup||i!==a.WUXDockAreaEnum.NoneDockArea){var s=e.getAbsolutePosition();n?this._removeWindowFromDockingArea(e,e.currentDockArea):void 0!==t&&t!==a.WUXDockAreaEnum.NoneDockArea&&this._removeWindowFromDockingArea(e,t),e.currentDockArea=a.WUXDockAreaEnum.NoneDockArea,e._moveToAdequateZone(),e.getContent().setStyle("z-index",""),e.activeFlag&&e.bringToFront(),e.setAbsolutePosition(s)}n&&(n._updateFromContainedWindows(),n._updateContainedWindows(),n.pointerEventsAllIfOverflow())}},t.prototype.getFreeZone=function(){return this.dockingElements[this.dockingElements.length-1].elements.freeZone},t.prototype.setContentInBackgroundLayer=function(e){e?(this.elements._backgroundLayerDiv||(this.elements._backgroundLayerDiv=new i.Element("div",{styles:{top:0,bottom:0,right:0,left:0,position:"absolute",width:"100%",height:"100%",pointerEvents:"all"}}),this.elements._backgroundLayerDiv.inject(this.getContent(),"top")),e.inject?e.inject(this.elements._backgroundLayerDiv):this.elements._backgroundLayerDiv.appendChild(e)):this.elements._backgroundLayerDiv&&(this.elements._backgroundLayerDiv.empty(),this.elements._backgroundLayerDiv.remove(),delete this.elements._backgroundLayerDiv)},t.prototype.setViewer=function(e){this._viewer=e,e&&this._viewerPromiseResolveCB&&(this._viewerPromiseResolveCB(this._viewer),this._viewerPromise=void 0,this._viewerPromiseResolveCB=void 0)},t.prototype.getViewer=function(){return this._viewer},t.prototype.getViewerAsync=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){return this._viewer?[2,this._viewer]:(this._viewerPromise||(e=this,this._viewerPromise=new Promise((function(t){e._viewerPromiseResolveCB=t}))),[2,this._viewerPromise])}))}))},t.prototype._moveWindowToImmersiveFrame=function(e){if(e.currentDockArea!==a.WUXDockAreaEnum.NoneDockArea){var t=this.getDockingElement(e.currentDockArea);t&&t.containsContent(e.getContent())&&t.removeContent(e.getContent())}e&&e.getContent().getParent()!==this.elements.container&&(e.inject(this.elements.container),this._ActionBar_V3&&(e.currentDockArea===a.WUXDockAreaEnum.TopDockArea||e.currentDockArea===a.WUXDockAreaEnum.BottomDockArea?e._moveTitleBar(!0,this.getDockingElement(e.currentDockArea)):e._moveTitleBar(!1,this.getDockingElement(e.currentDockArea))))},t.prototype._moveModalDivToImmersiveFrame=function(e){e.isInjected(this.elements.container)||e.inject(this.elements.container)},t.prototype.moveWindowToMaximizeZone=function(e){this._moveWindowToMaximizeZone(e)},t.prototype._moveWindowToMaximizeZone=function(e){e&&(e.currentDockArea!==a.WUXDockAreaEnum.NoneDockArea&&this._removeWindowFromDockingArea(e,e.currentDockArea),e.inject(this.getFreeZone()),!this._ActionBar_V3||e.currentDockArea!==a.WUXDockAreaEnum.TopDockArea&&e.currentDockArea!==a.WUXDockAreaEnum.BottomDockArea||e._moveTitleBar(!1,this.getDockingElement(e.currentDockArea)))},t.prototype._moveWindowToDockingArea=function(e,t,i){var n,o=this.getDockingElement(t);if(o.shouldDockingZoneSizeChangeWhenDockingWindow(e)&&(n=b(e._getTopWindow(),o,t,i)),(null==i?void 0:i.oldDockArea)&&this._removeWindowFromDockingArea(e,i.oldDockArea),e.windowGroup&&(e.windowGroup=null),!o.containsContent(e.getContent()))if(this._dockingElementWithTabs(t)){var s=this._getDockingTabProperties(e);s.isSelected=!0,i&&i.restoreDockedPreferences&&(s.index=e._getDockAreaIndexFromPreferences()),o.addContent(s,{dockingZoneSize:n})}else o.addContent(e.getContent());n&&!isNaN(n)&&(o.dockingZoneSize=n)},t.prototype._removeWindowFromDockingArea=function(e,t){var i=this.getDockingElement(t);i&&(i.removeContent(e.getContent()),i.updateVisibleDockingZoneFlag())},t.prototype._updateWindowInDockingArea=function(e){var t=this.getDockingElement(e.currentDockArea);if(t&&this._dockingElementWithTabs(e.currentDockArea)){var i=this._getDockingTabProperties(e);t.updateContent(i)}},t.prototype._addDockingZone=function(e,t){var i="";switch(e){case a.WUXDockAreaEnum.LeftDockArea:i="LeftDockArea";break;case a.WUXDockAreaEnum.RightDockArea:i="RightDockArea";break;case a.WUXDockAreaEnum.TopDockArea:i="TopDockArea";break;case a.WUXDockAreaEnum.BottomDockArea:i="BottomDockArea"}var n=(this.identifier?this.identifier:"wuxDefaultDockingElementIdentifier")+"_"+i,o=new c({identifier:n,side:e,dockingZoneSize:t,visibleDockingZoneFlag:!1,collapseDockingZoneFlag:!1,recId:this.recId?i:void 0,autoExpandFlag:this.dockingElementsAutoExpandFlag,collapserStyle:this._ActionBar_V3?h.COLLAPSER_STYLE.FIXED_AREA:h.COLLAPSER_STYLE.STANDARD});o.elements.container.addClassName("wux-immersive-frame-component"),this._ActionBar_V3||(o.useBackgroundFlag=!0),0===this.dockingElements.length?o.inject(this.elements.container):o.inject(this.dockingElements[this.dockingElements.length-1].elements.freeZone),this.dockingElements.push(o)},t.prototype._removeDockingZone=function(e){this.dockingElements.length<=e||e<0||(e!==this.dockingElements.length-1&&(0===e?this.dockingElements[e+1].inject(this.elements.container):this.dockingElements[e+1].inject(this.dockingElements[e-1].elements.freeZone)),this.dockingElements[e].hide(),this.dockingElements.splice(e,1))},t.prototype._updateAllDockingZoneSize=function(){for(var e=0;e<this.dockingElements.length;e++){var t=this.dockingElements[e];t&&t._updateDockingZoneSize()}},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("reactToPointerEventsFlag")&&this._applyReactToPointerEventsFlag(t.reactToPointerEventsFlag),this.isDirty("__DockingTabsInBottomArea")&&this._apply__DockingTabsInBottomArea()},t.prototype._apply__DockingTabsInBottomArea=function(){for(var e=this.getWindowsInDockingElement(a.WUXDockAreaEnum.BottomDockArea),t=this.getDockingElement(a.WUXDockAreaEnum.BottomDockArea),i=0;i<e.length;i++){var n=e[i]._getTopWindow();t.containsContent(n.getContent())&&t.removeContent(n.getContent())}for(i=0;i<e.length;i++){e[i]._getTopWindow()._moveToAdequateZone()}},t.prototype.addWindow=function(e){var t=this;if(e.windowGroup&&this.addWindow(e.windowGroup),!this.containsWindow(e)){if(this.windows[t._computeUniqueIdentifier(e)]=e,e.immersiveFrame=this,!e.immersiveFrame)return;e._moveToAdequateZone(),e._applyPosition(),o.addEventOnElement(e,e,"windowDrag",(function(e){t.elements.pointerEventsDiv.show();var i=e.dsModel;if(i){if(!1===i.visibleFlag)return;if((Math.abs(e.options.deltaX)>15||Math.abs(e.options.deltaY)>15)&&(i.getDockedFlag()||i.windowGroup)){var o=i.getContent().getSize();if(i.windowGroup){if(n.isMouseOverElement(i.windowGroup.elements._titleBarDiv,e.options))return void i.windowGroup._manageDrag(i,e.options);var s=i.windowGroup,r=void 0;if(2===s.getEmbeddedWindows().length)for(var l=0;l<2;l++){var d=s.getEmbeddedWindows()[l];if(d!==i){r=d;break}}i.windowGroup.activeSnapArea=a.WUXSnapAreaEnum.NoneArea,i.windowGroup._detachWindow(i,!0),t._clearStackingWindowsTimer(),t._stopDrag(),i=t._replaceFakedWindowByReallyMovedWindow(i),r?i._saveWindowGroupInPreferences(r):i._saveWindowGroupInPreferences(s)}i.getFloatableState()&&(i.currentDockArea=a.WUXDockAreaEnum.NoneDockArea,i._saveDockAreaInPreferences()),i.activeFlag=!0,i.bringToFront();var h=i.getContent().getSize();h.width===o.width&&h.height===o.height||i._ensureTitleBarUnderPointer(e.options)}i.windowGroup||(f.call(t,i,e.options),_.call(t,i,e.options),t._snapTargetWindow||t._activeDockingElement?i.elements.container.addClassName("wux-windows-window-furtive"):i.elements.container.removeClassName("wux-windows-window-furtive"))}})),o.addEventOnElement(e,e,"stopWindowDrag",(function(e){var i,n;if(t._stopDrag(),t._fakeStackedWindow&&t._snapSourceWindow.show(),t._fakeStackedWindow&&t._fakeStackedWindow.windowGroup){var o=t._fakeStackedWindow.windowGroup.getEmbeddedWindows(),s=o.indexOf(t._fakeStackedWindow);s<o.length-1?(n=o[s+1],i="before"):(n=o[s-1],i="after"),t._fakeStackedWindow.windowGroup._detachWindow(t._fakeStackedWindow),t.undockWindow(t._fakeStackedWindow),f.call(t,e.dsModel,e.options),t._fakeStackedWindow.hide()}w.call(t,e.dsModel,i,n),t._resetStackedWindowData(),t.elements.pointerEventsDiv.hide()})),o.addEventOnElement(e,e,"startResize",(function(e){t.elements.pointerEventsDiv.show(),t.elements.pointerEventsDiv.setStyle("cursor",e.options.cursor)})),o.addEventOnElement(e,e,"stopResize",(function(e){t.elements.pointerEventsDiv.hide(),t.elements.pointerEventsDiv.setStyle("cursor","default")})),o.addEventOnElement(e,e,"visibleStateChange",(function(){if(e.currentDockArea!==a.WUXDockAreaEnum.NoneDockArea&&!e.maximizedFlag){var i=t.getDockingElement(e.currentDockArea);i&&i.updateVisibleDockingZoneFlag()}})),this.fire("addWindow",{window:e})}},t.prototype.removeWindow=function(e,t){if(e){var i=!1;for(var n in this.windows){var s=this.windows[n];if(s&&s===e){i=!0,e.currentDockArea!==a.WUXDockAreaEnum.NoneDockArea&&(o.pushUserInteractionContext(),this.callMethodFromUIInteraction("undockWindow",e),o.popUserInteractionContext()),e.position.of===this.getContent()&&(e.position.of=null),e.position.constraint===this.getContent()&&(e.position.constraint=null),this.elements&&this.elements.container&&e.remove(),delete this.windows[n];var r=!0;t&&t.hasOwnProperty("resetImmersiveFrame")&&(r=t.resetImmersiveFrame),r&&(e.immersiveFrame=null);break}}i&&this.fire("removeWindow",{window:e})}},t.prototype.getDockingElement=function(e){return this.dockingElements[this.dockingElementsPriority.indexOf(e)]},t.prototype.containsWindow=function(e){var t=!1;if(e)for(var i in this.windows){var n=this.windows[i];if(n&&n===e){t=!0;break}}return t},t.prototype.setSlidingWindowGroup=function(e){this._currentSlidingWindowGroup=e},t.prototype._stopDrag=function(){this._currentSlidingWindowGroup&&this._currentSlidingWindowGroup._stopDrag()},t.prototype._computeUniqueIdentifier=function(e){for(var t=e.identifier?e.identifier:"1",i=2;void 0!==this.windows[t];)t=i.toString(),i++;return t},t.prototype._getWindowFromIdentifier=function(e){for(var t in this.windows)if(this.windows.hasOwnProperty(t)){var i=this.windows[t];if(i.identifier===e)return i}},t.prototype._onResizeFun=function(){if(this.elements.container){for(var e in this.windows){var t=this.windows[e];t&&t.visibleFlag&&(t._applyWidth(),t._applyHeight(),t._applyPosition())}this._manageAllPointerEventsOnDockingElements();for(var i=window.getComputedStyle(this.getContent()),o=parseInt(i.width)>480&&parseInt(i.height)>640,s=0,r=n.enumKeys(a.WUXDockAreaEnum);s<r.length;s++){var l=r[s],d=this.getDockingElement(a.WUXDockAreaEnum[l]);d&&(d.autoExpandFlag=o&&this.dockingElementsAutoExpandFlag,d._updateResizeHandlersSizes())}}},t.prototype._resizeFreeZoneFun=function(){this.fire("freeZoneResize")},t.prototype._touchModeChange=function(t){e.prototype._touchModeChange.call(this,t),this._manageAllPointerEventsOnDockingElements()},t.prototype.handleEvents=function(){for(var e=this,t=0;t<e.dockingElements.length;t++){(d=e.dockingElements[t])&&o.addEventOnElement(d,d,"dockResize",(function(t){e._manageAllPointerEventsOnDockingElements()}))}o.addResizeListener(this.elements.container,this._onResizeFun.bind(this)),o.addResizeListener(this.getFreeZone(),this._resizeFreeZoneFun.bind(this)),o.removeEventOnElement(this,this.elements.pointerEventsDiv,"click",(function(){e.elements.pointerEventsDiv.hide()}));for(var i=function(){e._manageAllPointerEventsOnDockingElements(),e.removeEventListener("transitionend",i)},s=function(){o.addEventOnElement(e,e,"transitionend",i)},r=0,l=n.enumKeys(a.WUXDockAreaEnum);r<l.length;r++){var d,h=l[r];(d=this.getDockingElement(a.WUXDockAreaEnum[h]))&&(o.addEventOnElement(d,d,"collapse",s),o.addEventOnElement(d,d,"expand",s))}},t.prototype.destroy=function(){if(this.elements&&this.elements.container){if(o.removeResizeListener(this.elements.container,this._onResizeFun),o.removeResizeListener(this.getFreeZone(),this._resizeFreeZoneFun),this._fakeStackedWindowSaved&&(this._fakeStackedWindowSaved.destroy(),this._fakeStackedWindowSaved=null),this.windows)for(var t=Object.keys(this.windows),i=0;i<t.length;i++)this.windows[t[i]]&&this.windows[t[i]].destroy();var n=Object.keys(this.dockingElements);for(i=n.length-1;i>=0;i--){var s=this.dockingElements[n[i]];s.destroy&&s.destroy()}e.prototype.destroy.call(this)}},t.prototype.destroyAllWindows=function(){this.destroyWindows(this.windows)},t.prototype.destroyWindows=function(e){function t(e){e.destroy&&e.destroy()}if(Array.isArray(e))for(var i=0;i<e.length;i++)t(e[i]);else for(var n=Object.keys(e).length;n>0;)t(this.windows[Object.keys(e)[0]]),n=Object.keys(e).length},t.prototype._manageAllPointerEventsOnDockingElements=function(){this.getDockingElement(a.WUXDockAreaEnum.BottomDockArea).pointerEventsAllIfOverflow(),this.getDockingElement(a.WUXDockAreaEnum.TopDockArea).pointerEventsAllIfOverflow(),this.getDockingElement(a.WUXDockAreaEnum.LeftDockArea).pointerEventsAllIfOverflow(),this.getDockingElement(a.WUXDockAreaEnum.RightDockArea).pointerEventsAllIfOverflow()},t.prototype._initStackingAsTabWindowsTimer=function(e,t){this._clearStackingWindowsTimer();var i=this;this._stopDragOccured=!1,this._stackingTimeOut=setTimeout((function(){if(i._stopDragOccured||e.activeSnapArea!==a.WUXSnapAreaEnum.InsideArea)e&&(e.activeSnapArea=a.WUXSnapAreaEnum.NoneArea);else{var n=e._computeDropInsertionData(i._snapPointer),o=i._getOrCreateFakePanelForStacking(t);i._snapSourceWindow=t,w.call(i,o,n.beforeOrAfter,n.targetWindow),t.hide(),i._fakeStackedWindow.windowGroup&&(i._fakeStackedWindow.windowGroup.activeSnapArea=a.WUXSnapAreaEnum.InsideArea)}}),400)},t.prototype._clearStackingWindowsTimer=function(){this._stackingTimeOut&&(clearTimeout(this._stackingTimeOut),this._stackingTimeOut=null)},t.prototype._getOrCreateFakePanelForStacking=function(e){var t,o,s,r;if(!this._fakeStackedWindow){if(this._fakeStackedWindow=this._fakeStackedWindowSaved,!this._fakeStackedWindow)r=new i.Element("div",{class:"wux-window-stacking-place-holder-container"}),new i.Element("div",{class:"wux-window-stacking-place-holder"}).inject(r).innerText=m.get("stackingPlaceHolder"),this._fakeStackedWindow=new u({resizableFlag:!0,immersiveFrame:this,content:r}),this._fakeStackedWindow._isFakeWindowForStacking=!0;this._fakeStackedWindowSaved||(this._fakeStackedWindowSaved=this._fakeStackedWindow)}return e.isAWindowGroup()?(t="( "+e.getEmbeddedWindows().length+" )",s="folder",o=!0):(t=e.title,o=e.showTitleFlag,s=e.icon),this._fakeStackedWindow.title=t,this._fakeStackedWindow.showTitleFlag=o,this._fakeStackedWindow.icon=s,n.setPosition(this._fakeStackedWindow,e.position),this._fakeStackedWindow.show(),this._fakeStackedWindow},t.prototype._computeFiringWindowDragEvents=function(e){var t=e;return this._fakeStackedWindow&&e!==this._fakeStackedWindow&&(t=this._fakeStackedWindow.visibleFlag?this._fakeStackedWindow:this._snapSourceWindow),t},t.prototype._replaceFakedWindowByReallyMovedWindow=function(e){return e===this._fakeStackedWindow?(this._fakeStackedWindow.hide(),n.setPosition(this._snapSourceWindow,e.position),this._snapSourceWindow.show(),this._snapSourceWindow.activeFlag=!0,this._snapSourceWindow):e},t.prototype._resetStackedWindowData=function(){this._fakeStackedWindow=null,this._snapSourceWindow=null,this._stopDragOccured=!0},t.prototype._onFocusReceived=function(){e.prototype._onFocusReceived.call(this);var t=this.getOwnerDocument().activeElement;if(t){var i=this._getContainingWindow(t);i&&i._setFocus(t)}},t.prototype._getContainingWindow=function(e){for(var t=e;t;){if(t&&t.dsModel&&t.dsModel instanceof d)return t.dsModel;t=t.parentElement}return null},t.prototype._linkToOtherImmersiveFrame=function(e){this._linkedImmersiveFrames||(this._linkedImmersiveFrames=[]),-1===this._linkedImmersiveFrames.indexOf(e)&&(this._linkedImmersiveFrames.push(e),e._linkToOtherImmersiveFrame(this))},t.prototype._replaceDockingZoneContent=function(e,t){var i=this.getDockingElement(e.currentDockArea);if(i){var n=this._getDockingTabProperties(t);i.replaceContent(e.getContent(),n)}},t.prototype._getDockingTabProperties=function(e){var t,i;if(e.isAWindowGroup()){var n=e.getVisibleEmbeddedWindows(),o=n.length;1===o?(t=n[0].icon)||(i=n[0].title):t={iconName:"folder",fontIconFamily:a.WUXManagedFontIcons.Font3DS,badges:{bottomRight:{number:{value:o,backgroundColor:p.COLORS_3DEXPERIENCE.COLOR_CORPORATE_STEEL_BLUE},className:"wux-windows-windowGroup-counter"}}}}else t=e.icon,i=e.title;return{content:e.getContent(),icon:t,label:!t&&i?i.substring(0,1):void 0,tooltipInfos:{shortHelp:i},visibleFlag:e.visibleFlag}},t}(l);function k(e,t,i){if(t.isAWindowGroup()){for(var n=t.getEmbeddedWindows(),o=0;o<n.length;o++){if(!k(e,n[o],i))return!1}return!0}return-1===i.indexOf(t.identifier)}return r.addClass(D,"immersiveFrame"),D}));__extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Windows/ImmersiveWindow",["require","exports","DS/Windows/Panel","DS/Core/WebUXComponents","DS/Utilities/Dom","DS/Core/PointerEvents","DS/CoreBase/WebUXGlobalEnums","UWA/Core"],(function(e,t,i,n,o,s,r,a){"use strict";var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.__contentPointerDown=null,t.__gripPointerDown=null,t}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{useBackgroundFlag:{defaultValue:!0,type:"boolean",category:"Appearance"},backgroundDraggableFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},decorationFlag:{defaultValue:!0,type:"boolean",category:"Appearance"},opacity:{defaultValue:void 0,type:"number",category:"Appearance"},snappableFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},collapsibleFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},useGripFlag:{defaultValue:!1,type:"boolean",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){e.prototype.buildView.call(this),this.elements.container.addClassName("wux-windows-immersive-window"),this.allowedDockAreas=r.WUXDockAreaEnum.NoneDockArea},t.prototype._applyUseBackgroundFlag=function(){this.useBackgroundFlag?(this.getContent().removeAttribute("no-background"),this.elements._titleBarDiv.removeAttribute("no-background")):(this.getContent().setAttributeNode(document.createAttribute("no-background")),this.elements._titleBarDiv.setAttributeNode(document.createAttribute("no-background")))},t.prototype._applyBackgroundDraggableFlag=function(){var e=this;this.backgroundDraggableFlag?this.__contentPointerDown||(this.__contentPointerDown=function(t){t.target===e.elements._contentDiv&&e._onDragPointerDown(t)},o.addEventOnElement(this,this.elements._contentDiv,s.POINTERDOWN,this.__contentPointerDown),this.elements._contentDiv.setAttribute("movable","")):(this.__contentPointerDown&&(o.removeEventOnElement(this,this.elements._contentDiv,s.POINTERDOWN,this.__contentPointerDown),this.__contentPointerDown=null),this.elements._contentDiv.removeAttribute("movable"))},t.prototype._applyDecorationFlag=function(){this.decorationFlag?this.getContent().removeAttribute("no-decoration"):this.getContent().setAttributeNode(document.createAttribute("no-decoration"))},t.prototype._applyOpacity=function(){void 0!==this.opacity?this.getContent().setStyle("opacity",this.opacity.toString()):this.getContent().setStyle("opacity","")},t.prototype._applyUseGripFlag=function(){var e=this;if(this.useGripFlag){if(!this.elements._gripZone){if(!this.elements.container)return;this.elements._gripZone=new a.createElement("div",{class:"wux-windows-window-grip"}),this.elements._gripZoneContent=new a.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-drag-grip"}),this.elements._gripZoneContent.inject(this.elements._gripZone),this.elements._gripZone.inject(this.elements.container,"top")}this.elements._gripZone.style.display="block",this.__gripPointerDown||(this.__gripPointerDown=function(t){t.target===e.elements._gripZone&&e._onDragPointerDown(t)},this.elements._gripZone.addEventListener(s.POINTERDOWN,this.__gripPointerDown))}else this.elements._gripZone&&(this.elements._gripZone.style.display="none"),this.__gripPointerDown&&(this.elements._gripZone.removeEventListener(s.POINTERDOWN,this.__gripPointerDown),this.__gripPointerDown=null)},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("useBackgroundFlag")&&this._applyUseBackgroundFlag(),this.isDirty("backgroundDraggableFlag")&&this._applyBackgroundDraggableFlag(),this.isDirty("decorationFlag")&&this._applyDecorationFlag(),this.isDirty("opacity")&&this._applyOpacity(),this.isDirty("useGripFlag")&&this._applyUseGripFlag()},t}(i);return n.addClass(l,"immersiveWindow"),l}));