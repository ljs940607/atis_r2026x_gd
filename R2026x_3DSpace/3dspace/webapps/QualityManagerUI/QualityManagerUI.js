define("DS/QualityManagerUI/GIVisualQualityCustomPresetDlg",["UWA/Core","DS/QualityManager/QMGIController","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ButtonGroup","DS/Controls/Expander","DS/Controls/SpinBox","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/Slider","DS/QualityManagerUI/SliderSpinBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager"],(function(e,t,i,n,l,s,o,a,r,c,p,d,h,u){"use strict";var g=!1,m=!1,y=function(e){this.options=e,this.init()};return y.prototype.init=function(){var e=this.options.frameWindow;this._webGLV6Viewer=e.getViewer(),this._immersiveFrame=e.getImmersiveFrame(),u.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var i=this;u.loadResource({resourceFile:"QualityManagerUI/QualityManager"}),u.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},(function(){i.mbdResources=this})),this.currentPresetMode=t.getCurrentPreset(),this.currentPreset="Custom",this.properties=this.buildProperties(),this.buildDialog(),this.initializedUIfromDB()},y.prototype.GetResString=function(e){var t="";return this.mbdResources&&(t=this.mbdResources.getKey({key:e})),t},y.prototype.buildProperties=function(){return{Global:{id:"Global"},Accumulation:{id:"Accumulation"},GlobalIllumination:{id:"GlobalIllumination"},FinalGathering:{id:"FinalGathering"},Caustics:{id:"Caustics"},RayOffset:{id:"RayOffset"},Shadows:{id:"Shadows"},Reflections:{id:"Reflections"},Bloom:{id:"Bloom"},DepthOfField:{id:"DepthOfField"},Downsampling:{id:"Downsampling"}}},y.prototype.buildDialog=function(){var e=this,t=UWA.createElement("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}});e.buildViewContent().inject(t);var i=new n({}),s=new n({});new n({});e.QualityManagerDialog=new l({title:"Raytracer Visual Quality",content:t,immersiveFrame:e._immersiveFrame,ResizableFlag:!0,width:700,height:400,buttons:{Ok:i,Cancel:s},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea,resizableFlag:!0})},y.prototype.buildViewContent=function(){var t=this,i=e.createElement("div",{class:"wux-container",style:{"vertical-align":"top"}});return t.buildRenderModeView().inject(i),t.buildGlobalPresetButtonView().inject(i),t.buildAccumulationView().inject(i),t.buildGlobalIlluminationView().inject(i),t.buildFinalGatheringView().inject(i),t.buildCausticsView().inject(i),t.buildRayOffsetView().inject(i),t.buildShadowsView().inject(i),t.buildReflectionsView().inject(i),t.buildBloomView().inject(i),t.buildDepthOfFieldView().inject(i),t.buildDownsamplingView().inject(i),i},y.prototype.buildRenderModeView=function(){var e=this,t=new UWA.Element("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}});return new UWA.Element("div",{class:"wux-control-inline-container",text:"Render Mode:"}).inject(t).setStyles({width:"80px"}),e.staticButton=new n({emphasize:"primary",label:"Static",value:"Static"}).inject(t),e.batchButton=new n({emphasize:"primary",label:"Batch",value:"Batch"}).inject(t),e.addEventListenerRenderMode(e.staticButton,this.properties),e.addEventListenerRenderMode(e.batchButton,this.properties),t},y.prototype.addEventListenerRenderMode=function(e,i){var n=this;e.addEventListener("buttonclick",(function(){n.currentPresetMode=e.label,t.setCurrentPreset(n.currentPresetMode),n.updateRenderButtonUI(n.currentPresetMode),n.updateGlobalPreset("Standard")}))},y.prototype.buildGlobalPresetButtonView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",width:"450px",left:"250px"});var i=e.getPresetButtons().inject(t);return new UWA.Element("br").inject(t),e.properties.Global.presetButtonGroup=i,i.addEventListener("buttonclick",(function(t){var n=i.getButtonFromValue(t.dsModel.value.toString());e.currentPreset=n.recId,e.updateGlobalPreset(e.currentPreset)})),t},y.prototype.buildAccumulationView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"});e.properties.Accumulation={};var n=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("MaxSamplePerPixelLabel").Text}).inject(i);n.setStyles({width:"290px",display:"inline-block"});var l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),s=new d({minValue:1,maxValue:1048576,initialValue:0,sliderMinValue:0,sliderMaxValue:14,sliderSoftLimitMax:14,sliderHardLimitMax:20,sliderInitialValue:0,spinSoftLimitMax:16384,spinHardLimitMax:1048576,stepValue:1,decimals:0,isExponential:1,recId:"MaxSamples"}).inject(l);s.setTooltips(this.GetResString("MaxSamplePerPixelControl").Tooltip),s.setHide("inline-block");var a=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("MinSamplePerPixelLabel").Text}).inject(i);a.setStyles({width:"290px",display:"inline-block"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var c=new d({minValue:1,maxValue:256,initialValue:0,sliderMinValue:0,sliderMaxValue:6,sliderSoftLimitMax:6,sliderHardLimitMax:8,sliderInitialValue:0,spinSoftLimitMax:64,spinHardLimitMax:256,stepValue:1,decimals:0,isExponential:1,recId:"MinSamples"}).inject(l);c.setTooltips(this.GetResString("MinSamplePerPixelControl").Tooltip),c.setHide("inline-block"),new UWA.Element("br").inject(i);var p=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("ClammpingMaxLumLabel").Text}).inject(i);p.setStyles({width:"290px"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var u=new d({minValue:.1,maxValue:100,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:.1,stepValue:1,decimals:2,isLogarithmic:1,recId:"Clamping"}).inject(l);u.setTooltips(this.GetResString("ClammpingMaxLumControl").Tooltip),new UWA.Element("br").inject(i);var g=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GaussFilterLabel").Text}).inject(i);g.setStyles({width:"300px"});var m=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),y=new r({label:"",recId:"GaussFilter"}).inject(m);y.tooltipInfos=new h({shortHelp:this.GetResString("GaussFilterControl").Tooltip}),new UWA.Element("br").inject(i),new UWA.Element("br").inject(i);var S=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("SizeLabel").Text}).inject(i);S.setStyles({width:"290px"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var w=new d({minValue:1,maxValue:6,initialValue:1,stepValue:.1,decimals:1,recId:"Size"}).inject(l);w.setTooltips(this.GetResString("SizeControl").Tooltip);var b=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CenterWeightLabel").Text}).inject(i);b.setStyles({width:"290px"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var x=new d({minValue:.1,maxValue:3,initialValue:0,stepValue:.1,decimals:1,recId:"CenterWeight"}).inject(l);x.setTooltips(this.GetResString("CenterWeightControl").Tooltip);var v=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);v.setStyle("Width","600px");new o({style:"filled-group",header:"Accumulation",body:i}).inject(v);return e.properties.Accumulation.minSamplesSliderSpinBox=c,e.properties.Accumulation.MinSamplesLabel=a,e.properties.Accumulation.clampingSliderSpinBox=u,e.properties.Accumulation.clampingLabel=p,e.properties.Accumulation.accumulationToggle=y,e.properties.Accumulation.SizeSliderSpinBox=w,e.properties.Accumulation.CenterSliderSpinBox=x,e.properties.Accumulation.gaussFilterLabel=g,e.properties.Accumulation.sizeLabel=S,e.properties.Accumulation.centerWeightLabel=b,e.properties.Accumulation.maxSamplesSliderSpinBox=s,e.properties.Accumulation.MaxSamplesLabel=n,e.addEventListenerSliderSpinBox("Accumulation",s),e.addEventListenerSliderSpinBox("Accumulation",c),e.addEventListenerSliderSpinBox("Accumulation",u),e.addEventListenerSliderSpinBox("Accumulation",w),e.addEventListenerSliderSpinBox("Accumulation",x),e.addEventListenerToggle("Accumulation",y),t},y.prototype.buildGlobalIlluminationView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"}),n=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("MaxTraceDepthLabel").Text}).inject(i);n.setStyles({width:"290px"});var l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),s=new d({minValue:1,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,spinSoftLimitMax:100,spinHardLimitMax:1e3,initialValue:1,stepValue:1,decimals:0,isLinear:1,recId:"MaxTraceDepth"}).inject(l);s.setTooltips(this.GetResString("MaxTraceDepthControl").Tooltip);var a=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GlossyThresholdLabel").Text}).inject(i);a.setStyles({width:"290px"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var p=new d({minValue:0,maxValue:1,initialValue:0,stepValue:.01,decimals:2,recId:"GlossyThreshold"}).inject(l);p.setTooltips(this.GetResString("GlossyThresholdControl").Tooltip);var u=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("RenderRefractiveShadowsLabel").Text}).inject(i);u.setStyles({width:"300px"});var g=new UWA.Element("div",{class:"wux-control-inline-container"}),m=new r({label:"",recId:"RenderRefractiveShadow"}).inject(g);m.tooltipInfos=new h({shortHelp:this.GetResString("RenderRefractiveShadowsControl").Tooltip}),g.inject(i);var y=new UWA.Element("div",{class:"wux-container"}),S=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);S.setStyle("Width","580px");new o({style:"filled-group",header:"Advanced",body:y}).inject(S);var w=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("LocationBasedImportanceSamplingLabel").Text}).inject(y);w.setStyles({width:"285px"});g=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(y);var b=new r({label:"",recId:"LocationBasedSampling"}).inject(g);b.tooltipInfos=new h({shortHelp:this.GetResString("LocationBasedImportanceSamplingControl").Tooltip}),new UWA.Element("br").inject(y),new UWA.Element("br").inject(y);var x=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("EmissiveObjectsImportanceSamplingLabel").Text}).inject(y);new UWA.Element("br").inject(x),new UWA.Element("br").inject(x);var v=new UWA.Element("div",{class:"wux-container"}).inject(x),C=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("ImportanceDistributionMethodLabel").Text}).inject(v);C.setStyles({width:"280px"});for(var f=["Equal","Propertional to Power"],I=["Equal","Propertional to Power"],A=[],E=0;E<f.length;E++)A[E]={labelItem:f[E],valueItem:I[E]};var L=new c({elementsList:A,selectedIndex:1,recId:"Distribution",enableSearchFlag:!1}).inject(v);L.getContent().style.width="130px",L.tooltipInfos=new h({shortHelp:this.GetResString("ImportanceDistributionMethodControl").Tooltip});var M=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("ImportanceSamplingFactorLabel").Text}).inject(v);M.setStyles({width:"275px"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(v);var D=new d({minValue:0,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:0,spinSoftLimitMax:20,spinHardLimitMax:1e3,stepValue:1,decimals:2,isLogarithmic:1,recId:"Factor"}).inject(l);D.setTooltips(this.GetResString("ImportanceSamplingFactorControl").Tooltip);var U=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PathTerminationStartDepthLabel").Text}).inject(y);U.setStyles({width:"280px"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(y);var B=new d({minValue:0,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,spinSoftLimitMax:32,spinHardLimitMax:1e3,initialValue:0,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathTerminationDepth"}).inject(l);B.setTooltips(this.GetResString("PathTerminationStartDepthControl").Tooltip);var T=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PhotonMapVisualizationModeLabel").Text}).inject(y);T.setStyles({width:"285px"});f=["None","Final Gathering","Caustics"],I=["None","Final Gathering","Caustics"];var j=[];for(E=0;E<f.length;E++)j[E]={labelItem:f[E],valueItem:I[E]};l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(y);var _=new c({elementsList:j,selectedIndex:2,recId:"VisualizationMode",enableSearchFlag:!1}).inject(l);_.getContent().style.width="130px",_.tooltipInfos=new h({shortHelp:this.GetResString("PhotonMapVisualizationModeControl").Tooltip});var W=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);W.setStyle("Width","600px");new o({style:"filled-group",header:"Global Illumination",body:i}).inject(W);return e.properties.GlobalIllumination={},e.properties.GlobalIllumination.traceDepthSliderSpinBox=s,e.properties.GlobalIllumination.glossyThresholdSliderSpinBox=p,e.properties.GlobalIllumination.refractiveShadowsToggle=m,e.properties.GlobalIllumination.samplingToggle=b,e.properties.GlobalIllumination.distributionComboBox=L,e.properties.GlobalIllumination.factorSliderSpinBox=D,e.properties.GlobalIllumination.pathTerminationSliderSpinBox=B,e.properties.GlobalIllumination.visualizationModeComboBox=_,e.properties.GlobalIllumination.visualizationModeLabel=T,e.properties.GlobalIllumination.maxTraceLabel=n,e.properties.GlobalIllumination.glossyLabel=a,e.properties.GlobalIllumination.refractiveLabel=u,e.properties.GlobalIllumination.samplingLabel=w,e.properties.GlobalIllumination.distributionLabel=C,e.properties.GlobalIllumination.factorLabel=M,e.properties.GlobalIllumination.pathTerminationLabel=U,e.addEventListenerSliderSpinBox("GlobalIllumination",s),e.addEventListenerSliderSpinBox("GlobalIllumination",p),e.addEventListenerToggle("GlobalIllumination",m),e.addEventListenerToggle("GlobalIllumination",b),e.addEventListenerComboBox("GlobalIllumination",L),e.addEventListenerSliderSpinBox("GlobalIllumination",D),e.addEventListenerSliderSpinBox("GlobalIllumination",B),e.addEventListenerComboBox("GlobalIllumination",_),t},y.prototype.buildFinalGatheringView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"}),n=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("EnableFinalGatheringLabel").Text}).inject(i);n.setStyles({width:"300px"});var l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),s=new r({label:"",recId:"EnableFinalGathering"}).inject(l);s.tooltipInfos=new h({shortHelp:this.GetResString("EnableFinalGatheringControl").Tooltip});var a=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PhotonNumberLabel").Text}).inject(i);a.setStyles({width:"290px"});var c=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),p=new d({minValue:1e3,maxValue:1e8,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1e7,spinHardLimitMax:1e8,stepValue:1,decimals:0,isLogarithmic:1,recId:"NoOfPhotons"}).inject(c);p.setTooltips(this.GetResString("PhotonNumberControl").Tooltip);var u=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PathDepthLabel").Text}).inject(i);u.setStyles({width:"290px"});c=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var g=new d({minValue:1,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:32,spinHardLimitMax:1e3,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathDepth"}).inject(c);g.setTooltips(this.GetResString("PathDepthControl").Tooltip);var m=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PhotonRadiusLabel").Text}).inject(i);m.setStyles({width:"290px"});c=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var y=new d({minValue:1,maxValue:1e6,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1e3,spinHardLimitMax:1e6,stepValue:1,decimals:1,isLogarithmic:1,recId:"PhotonRadius"}).inject(c);y.setTooltips(this.GetResString("PhotonRadiusControl").Tooltip);var S=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("RefineFinalGatheringMapLabel").Text}).inject(i);S.setStyles({width:"300px"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var w=new r({label:"",recId:"RefineMap"}).inject(l);w.tooltipInfos=new h({shortHelp:this.GetResString("RefineFinalGatheringMapControl").Tooltip}),new UWA.Element("br").inject(i),new UWA.Element("br").inject(i);var b=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PrecalculateIrradianceLabel").Text}).inject(i);b.setStyles({width:"300px"});l=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var x=new r({label:"",recId:"PrecalculateIrradiance"}).inject(l);x.tooltipInfos=new h({shortHelp:this.GetResString("PrecalculateIrradianceControl").Tooltip});var v=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);v.setStyle("Width","600px");new o({style:"filled-group",header:"Final Gathering",body:i}).inject(v);return e.properties.FinalGathering={},e.properties.FinalGathering.EnableFinalGatheringToggle=s,e.properties.FinalGathering.photonNoSliderSpinBox=p,e.properties.FinalGathering.pathDepthSliderSpinBox=g,e.properties.FinalGathering.photonRadiusSliderSpinBox=y,e.properties.FinalGathering.irradianceToggle=x,e.properties.FinalGathering.refineFinalGatheringToggle=w,e.properties.FinalGathering.EnableFinalGatheringLabel=n,e.properties.FinalGathering.photonNoLabel=a,e.properties.FinalGathering.pathDepthLabel=u,e.properties.FinalGathering.photonRadiusLabel=m,e.properties.FinalGathering.refineFinalGatheringLabel=S,e.properties.FinalGathering.irradianceLabel=b,e.addEventListenerToggle("FinalGathering",s),e.addEventListenerSliderSpinBox("FinalGathering",p),e.addEventListenerSliderSpinBox("FinalGathering",g),e.addEventListenerSliderSpinBox("FinalGathering",y),e.addEventListenerToggle("FinalGathering",x),e.addEventListenerToggle("FinalGathering",w),t},y.prototype.buildCausticsView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"}),n=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CausticsLabel").Text}).inject(i);n.setStyles({width:"300px"});for(var l=["None","Pathtracer","Caustics Photons"],s=["None","Pathtracer","Caustics Photons"],a=[],p=0;p<l.length;p++)a[p]={labelItem:l[p],valueItem:s[p]};var u=new c({elementsList:a,selectedIndex:1,recId:"Caustics",enableSearchFlag:!1}).inject(i);u.getContent().style.width="130px",u.tooltipInfos=new h({shortHelp:this.GetResString("CausticsControl").Tooltip});var g=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CausticPhotonNumberLabel").Text}).inject(i);g.setStyles({width:"290px"});var m=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),y=new d({minValue:1e3,maxValue:1e8,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1e7,spinHardLimitMax:1e8,stepValue:1,decimals:0,isLogarithmic:1,recId:"PhotonNumber"}).inject(m);y.setTooltips(this.GetResString("CausticPhotonNumberControl").Tooltip);var S=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CausticPathDepthLabel").Text}).inject(i);S.setStyles({width:"290px"});m=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var w=new d({minValue:1,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:32,spinHardLimitMax:1e3,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathDepth"}).inject(m);w.setTooltips(this.GetResString("CausticPathDepthControl").Tooltip);var b=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CausticRadiusLabel").Text}).inject(i);b.setStyles({width:"290px"});m=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var x=new d({minValue:.1,maxValue:1e5,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1e3,spinHardLimitMax:1e6,stepValue:1,decimals:1,isLogarithmic:1,recId:"CausticRadius"}).inject(m);x.setTooltips(this.GetResString("CausticRadiusControl").Tooltip);var v=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("RefineCausticMapLabel").Text}).inject(i);v.setStyles({width:"300px"});var C=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),f=new r({label:"",recId:"refinePhotonMap"}).inject(C);f.tooltipInfos=new h({shortHelp:this.GetResString("RefineCausticMapControl").Tooltip});var I=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);I.setStyle("Width","600px");new o({style:"filled-group",header:"Caustics",body:i}).inject(I);return e.properties.Caustics={},e.properties.Caustics.causticsComboBox=u,e.properties.Caustics.photonNoSliderSpinBox=y,e.properties.Caustics.pathDepthSliderSpinBox=w,e.properties.Caustics.photonRadiusSliderSpinBox=x,e.properties.Caustics.refineCausticToggle=f,e.properties.Caustics.causticsLabel=n,e.properties.Caustics.photonNoLabel=g,e.properties.Caustics.pathDepthLabel=S,e.properties.Caustics.photonRadiusLabel=b,e.properties.Caustics.refineCausticLabel=v,e.addEventListenerComboBox("Caustics",u),e.addEventListenerSliderSpinBox("Caustics",y),e.addEventListenerSliderSpinBox("Caustics",w),e.addEventListenerSliderSpinBox("Caustics",x),e.addEventListenerToggle("Caustics",f),t},y.prototype.buildRayOffsetView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("RayOffsetLabel").Text}).inject(i).setStyles({width:"290px"});var n=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new d({minValue:.001,maxValue:1e4,sliderMinValue:0,sliderMaxValue:100,initialValue:.01,spinSoftLimitMax:1e3,spinSoftLimitMin:.01,spinHardLimitMax:1e4,spinHardLimitMin:.001,stepValue:1,decimals:3,isLogarithmic:1,recId:"RayOffset"}).inject(n);l.setTooltips(this.GetResString("RayOffsetControl").Tooltip);var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);s.setStyle("Width","600px");var a=new o({style:"filled-group",header:"Ray Offset",body:i}).inject(s);return e.properties.RayOffset={},e.properties.RayOffset.rayOffsetSliderSpinBox=l,e.properties.RayOffset.expander=a,e.addEventListenerSliderSpinBox("RayOffset",l),t},y.prototype.buildShadowsView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIAllowGroundShadowLabel").Text}).inject(i).setStyles({width:"300px"});var n=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new r({label:"",recId:"AllowGroundShadows"}).inject(n);l.tooltipInfos=new h({shortHelp:this.GetResString("GIAllowGroundShadowControl").Tooltip});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);s.setStyle("Width","600px");var a=new o({style:"filled-group",header:"Shadows",body:i}).inject(s);return e.properties.Shadows={},e.properties.Shadows.shadowsToggle=l,e.properties.Shadows.expander=a,e.addEventListenerToggle("Shadows",l),t},y.prototype.buildReflectionsView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIAllowGroundReflLabel").Text}).inject(i).setStyles({width:"300px"});var n=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new r({label:"",recId:"AllowReflectionsOnGround"}).inject(n);l.tooltipInfos=new h({shortHelp:this.GetResString("GIAllowGroundReflControl").Tooltip});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);s.setStyle("Width","600px");var a=new o({style:"filled-group",header:"Reflections",body:i}).inject(s);return e.properties.Reflections={},e.properties.Reflections.reflectionsToggle=l,e.properties.Reflections.expander=a,e.addEventListenerToggle("Reflections",l),t},y.prototype.buildBloomView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIAllowBloomLabel").Text}).inject(i).setStyles({width:"300px"});var n=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new r({label:"",recId:"AllowBloom"}).inject(n);l.tooltipInfos=new h({shortHelp:this.GetResString("GIAllowBloomControl").Tooltip});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);s.setStyle("Width","600px");var a=new o({style:"filled-group",header:"Bloom",body:i}).inject(s);return e.properties.Bloom={},e.properties.Bloom.bloomToggle=l,e.properties.Bloom.expander=a,e.addEventListenerToggle("Bloom",l),t},y.prototype.buildDepthOfFieldView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIAllowDoFLabel").Text}).inject(i).setStyles({width:"300px"});var n=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new r({label:"",recId:"AllowDepthOfField"}).inject(n);l.tooltipInfos=new h({shortHelp:this.GetResString("GIAllowDoFControl").Tooltip});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);s.setStyle("Width","600px");var a=new o({style:"filled-group",header:"Depth Of Field",body:i}).inject(s);return e.properties.DepthOfField={},e.properties.DepthOfField.depthToggle=l,e.properties.DepthOfField.expander=a,e.addEventListenerToggle("DepthOfField",l),t},y.prototype.buildDownsamplingView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIDownsamplingFactorLabel").Text}).inject(i).setStyles({width:"290px"});var n=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new d({minValue:.4,maxValue:1,initialValue:.4,stepValue:.1,decimals:1,recId:"DownsamplingFctor"}).inject(n);l.setTooltips(this.GetResString("GIDownsamplingFactorControl").Tooltip);var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);s.setStyle("Width","600px");var a=new o({style:"filled-group",header:"Downsampling",body:i}).inject(s);return e.properties.Downsampling={},e.properties.Downsampling.downsamplingSliderSpinBox=l,e.properties.Downsampling.expander=a,e.addEventListenerSliderSpinBox("Downsampling",l),t},y.prototype.getPresetButtons=function(){var e=new s;e.addChild(new n({checkFlag:!1,value:"Standard",displayStyle:"lite-borders",emphasize:"primary",icon:i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig1.png",recId:"Standard"})),e.addChild(new n({checkFlag:!1,value:"OptimizeInterior",emphasize:"primary",displayStyle:"lite-borders",icon:i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig2.png",recId:"OptimizeInterior"})),e.addChild(new n({checkFlag:!1,value:"OptimizeCaustics",emphasize:"primary",displayStyle:"lite-borders",icon:i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig3.png",recId:"OptimizeCaustics"}));for(var t=e._getButtonList(),l=0;l<t.length;l++){t[l].getContent().tooltipInfos=new h({shortHelp:t[l].recId})}return e},y.prototype.DoUpdatePropertyCombo=function(){var e=!1;return m||g||(e=!0),e},y.prototype.addEventListenerComboBox=function(e,t){var i=this;t.addEventListener("change",(function(){var n=t.recId,l=t.currentValue;i.DoUpdatePropertyCombo()&&(!0,i.updateAttribute(e,n,l),!1),"Caustics"==n&&("None"==l||"Pathtracer"==l?(i.properties.Caustics.photonNoSliderSpinBox.setDisabled(!0),i.properties.Caustics.pathDepthSliderSpinBox.setDisabled(!0),i.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(!0),i.properties.Caustics.refineCausticToggle.disabled=!0):(i.properties.Caustics.photonNoSliderSpinBox.setDisabled(!1),i.properties.Caustics.pathDepthSliderSpinBox.setDisabled(!1),i.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(!1),i.properties.Caustics.refineCausticToggle.disabled=!1))}))},y.prototype.addEventListenerSliderSpinBox=function(e,t){var i=this;t.elements.slider.addEventListener("change",(function(e){t._createEvents()})),t.elements.spinBox.addEventListener("change",(function(n){t._createEvents();var l=t.options.recId,s=t.elements.spinBox.value;i.DoUpdatePropertyCombo()&&(!0,i.updateAttribute(e,l,s),!1)}))},y.prototype.addEventListenerToggle=function(e,t){var i=this;t.addEventListener("change",(function(){var n=t.recId,l=t.checkFlag;switch(i.DoUpdatePropertyCombo()&&(!0,i.updateAttribute(e,n,l),!1),n){case"GaussFilter":l?(i.properties.Accumulation.SizeSliderSpinBox.setDisabled(!1),i.properties.Accumulation.CenterSliderSpinBox.setDisabled(!1)):(i.properties.Accumulation.SizeSliderSpinBox.setDisabled(!0),i.properties.Accumulation.CenterSliderSpinBox.setDisabled(!0));break;case"EnableFinalGathering":l?(i.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(!1),i.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(!1),i.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(!1),i.properties.FinalGathering.refineFinalGatheringToggle.disabled=!1,i.properties.FinalGathering.irradianceToggle.disabled=!1):(i.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(!0),i.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(!0),i.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(!0),i.properties.FinalGathering.refineFinalGatheringToggle.disabled=!0,i.properties.FinalGathering.irradianceToggle.disabled=!0)}}))},y.prototype.initializedUIfromDB=function(){var e=this;g=!0,e.updateRenderButtonUI(this.currentPresetMode);t.getCurrentGlobalPreset(this.currentPresetMode);for(var i in m=!0,e.properties)"Global"!=i&&e.updatePropertyUI(i,"Custom");e.updateParameterDependencies(),m=!1,g=!1},y.prototype.updateParameterDependencies=function(){var e=this;e.properties.Accumulation.accumulationToggle.checkFlag?(e.properties.Accumulation.SizeSliderSpinBox.setDisabled(!1),e.properties.Accumulation.CenterSliderSpinBox.setDisabled(!1)):(e.properties.Accumulation.SizeSliderSpinBox.setDisabled(!0),e.properties.Accumulation.CenterSliderSpinBox.setDisabled(!0)),e.properties.FinalGathering.EnableFinalGatheringToggle.checkFlag?(e.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(!1),e.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(!1),e.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(!1),e.properties.FinalGathering.refineFinalGatheringToggle.disabled=!1,e.properties.FinalGathering.irradianceToggle.disabled=!1):(e.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(!0),e.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(!0),e.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(!0),e.properties.FinalGathering.refineFinalGatheringToggle.disabled=!0,e.properties.FinalGathering.irradianceToggle.disabled=!0),"None"==e.properties.Caustics.causticsComboBox.currentValue||"Pathtracer"==e.properties.Caustics.causticsComboBox.currentValue?(e.properties.Caustics.photonNoSliderSpinBox.setDisabled(!0),e.properties.Caustics.pathDepthSliderSpinBox.setDisabled(!0),e.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(!0),e.properties.Caustics.refineCausticToggle.disabled=!0):(e.properties.Caustics.photonNoSliderSpinBox.setDisabled(!1),e.properties.Caustics.pathDepthSliderSpinBox.setDisabled(!1),e.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(!1),e.properties.Caustics.refineCausticToggle.disabled=!1)},y.prototype.updateGlobalPreset=function(e){t.setGlobalPreset(this.currentPresetMode,e,!0),this.updatePropertyUI("Accumulation",e),this.updatePropertyUI("GlobalIllumination",e),this.updatePropertyUI("FinalGathering",e),this.updatePropertyUI("Caustics",e),this.updatePropertyUI("RayOffset",e),this.updatePropertyUI("Shadows",e),this.updatePropertyUI("Reflections",e),this.updatePropertyUI("Bloom",e),this.updatePropertyUI("DepthOfField",e),this.updatePropertyUI("Downsampling",e)},y.prototype.updatePropertyUI=function(i,n){var l=t.getPresetValue(this.currentPresetMode,n);if(!e.is(l))return!1;var s=l[i];if(!e.is(s))return!1;switch(this.updatePropertyPresetButtonUI(i,n),i){case"Accumulation":this.properties[i].maxSamplesSliderSpinBox.setValue(s.MaxSamples),this.properties[i].minSamplesSliderSpinBox.setValue(s.MinSamples),this.properties[i].clampingSliderSpinBox.setValue(s.Clamping),this.properties[i].accumulationToggle.checkFlag=s.GaussFilter,this.properties[i].SizeSliderSpinBox.setValue(s.Size),this.properties[i].CenterSliderSpinBox.setValue(s.CenterWeight);break;case"GlobalIllumination":this.properties[i].traceDepthSliderSpinBox.setValue(s.MaxTraceDepth),this.properties[i].glossyThresholdSliderSpinBox.setValue(s.GlossyThreshold),this.properties[i].refractiveShadowsToggle.checkFlag=s.RenderRefractiveShadow,this.properties[i].samplingToggle.checkFlag=s.LocationBasedSampling,this.properties[i].distributionComboBox.currentValue=s.Distribution,this.properties[i].factorSliderSpinBox.setValue(s.Factor),this.properties[i].pathTerminationSliderSpinBox.setValue(s.PathTerminationDepth),this.properties[i].visualizationModeComboBox.currentValue=s.VisualizationMode;break;case"FinalGathering":this.properties[i].EnableFinalGatheringToggle.checkFlag=s.EnableFinalGathering,this.properties[i].photonNoSliderSpinBox.setValue(s.NoOfPhotons),this.properties[i].pathDepthSliderSpinBox.setValue(s.PathDepth),this.properties[i].photonRadiusSliderSpinBox.setValue(s.PhotonRadius),this.properties[i].irradianceToggle.checkFlag=s.PrecalculateIrradiance,this.properties[i].refineFinalGatheringToggle.checkFlag=s.RefineMap;break;case"Caustics":this.properties[i].causticsComboBox.currentValue=s.Caustics,this.properties[i].photonNoSliderSpinBox.setValue(s.PhotonNumber),this.properties[i].pathDepthSliderSpinBox.setValue(s.PathDepth),this.properties[i].photonRadiusSliderSpinBox.setValue(s.CausticRadius),this.properties[i].refineCausticToggle.checkFlag=s.refinePhotonMap;break;case"RayOffset":this.properties[i].rayOffsetSliderSpinBox.setValue(s.RayOffset);break;case"Shadows":this.properties[i].shadowsToggle.checkFlag=s.AllowGroundShadows;break;case"Reflections":this.properties[i].reflectionsToggle.checkFlag=s.AllowReflectionsOnGround;break;case"Bloom":this.properties[i].bloomToggle.checkFlag=s.AllowBloom;break;case"DepthOfField":this.properties[i].depthToggle.checkFlag=s.AllowDepthOfField;break;case"Downsampling":this.properties[i].downsamplingSliderSpinBox.setValue(s.DownsamplingFctor)}},y.prototype.updateRenderButtonUI=function(e){for(var i in"Static"==e?(this.staticButton.checkFlag=!0,this.batchButton.checkFlag=!1):(this.staticButton.checkFlag=!1,this.batchButton.checkFlag=!0),t._QMSettings)this.updateUI(i,e)},y.prototype.updateUI=function(e,i){var n="inline-block";switch("RayOffset"!=e&&"AllowGroundShadows"!=e&&"AllowReflectionsOnGround"!=e&&"AllowBloom"!=e&&"AllowDepthOfField"!=e&&"DownsamplingFctor"!=e||(n="block"),t.getQMsetting(e,i)||(n="none"),e){case"MaxSamples":this.properties.Accumulation.MaxSamplesLabel.setStyles({display:n}),this.properties.Accumulation.maxSamplesSliderSpinBox.setHide(n);break;case"MinSamples":this.properties.Accumulation.MinSamplesLabel.setStyles({display:n}),this.properties.Accumulation.minSamplesSliderSpinBox.setHide(n);break;case"Clamping":this.properties.Accumulation.clampingLabel.setStyles({display:n}),this.properties.Accumulation.clampingSliderSpinBox.setHide(n);break;case"GaussFilter":this.properties.Accumulation.gaussFilterLabel.setStyles({display:n}),this.properties.Accumulation.accumulationToggle.getContent().style.display=n;break;case"Size":this.properties.Accumulation.sizeLabel.setStyles({display:n}),this.properties.Accumulation.SizeSliderSpinBox.setHide(n);break;case"CenterWeight":this.properties.Accumulation.centerWeightLabel.setStyles({display:n}),this.properties.Accumulation.CenterSliderSpinBox.setHide(n);break;case"MAxTraceDepth":this.properties.GlobalIllumination.maxTraceLabel.setStyles({display:n}),this.properties.GlobalIllumination.traceDepthSliderSpinBox.setHide(n);break;case"GlossyThreshold":this.properties.GlobalIllumination.glossyLabel.setStyles({display:n}),this.properties.GlobalIllumination.glossyThresholdSliderSpinBox.setHide(n);break;case"RenderRefractiveShadow":this.properties.GlobalIllumination.refractiveLabel.setStyles({display:n}),this.properties.GlobalIllumination.refractiveShadowsToggle.getContent().style.display=n;break;case"LocationBasedSampling":this.properties.GlobalIllumination.samplingLabel.setStyles({display:n}),this.properties.GlobalIllumination.samplingToggle.getContent().style.display=n;break;case"Distribution":this.properties.GlobalIllumination.distributionLabel.setStyles({display:n}),this.properties.GlobalIllumination.distributionComboBox.getContent().style.display=n;break;case"Factor":this.properties.GlobalIllumination.factorLabel.setStyles({display:n}),this.properties.GlobalIllumination.factorSliderSpinBox.setHide(n);break;case"PathTerminationDepth":this.properties.GlobalIllumination.pathTerminationLabel.setStyles({display:n}),this.properties.GlobalIllumination.pathTerminationSliderSpinBox.setHide(n);break;case"VisualizationMode":this.properties.GlobalIllumination.visualizationModeLabel.setStyles({display:n}),this.properties.GlobalIllumination.visualizationModeComboBox.getContent().style.display=n;break;case"EnableFinalGathering":this.properties.FinalGathering.EnableFinalGatheringLabel.setStyles({display:n}),this.properties.FinalGathering.EnableFinalGatheringToggle.getContent().style.display=n;break;case"NoOfPhotons":this.properties.FinalGathering.photonNoLabel.setStyles({display:n}),this.properties.FinalGathering.photonNoSliderSpinBox.setHide(n);break;case"PathDepth":this.properties.FinalGathering.pathDepthLabel.setStyles({display:n}),this.properties.FinalGathering.pathDepthSliderSpinBox.setHide(n);break;case"PhotonRadius":this.properties.FinalGathering.photonRadiusLabel.setStyles({display:n}),this.properties.FinalGathering.photonRadiusSliderSpinBox.setHide(n);break;case"RefineMap":this.properties.FinalGathering.refineFinalGatheringLabel.setStyles({display:n}),this.properties.FinalGathering.refineFinalGatheringToggle.getContent().style.display=n;break;case"PrecalculateIrradiance":this.properties.FinalGathering.irradianceLabel.setStyles({display:n}),this.properties.FinalGathering.irradianceToggle.getContent().style.display=n;break;case"Caustics":this.properties.Caustics.causticsLabel.setStyles({display:n}),this.properties.Caustics.causticsComboBox.getContent().style.display=n;break;case"CausticsPhotonNumber":this.properties.Caustics.photonNoLabel.setStyles({display:n}),this.properties.Caustics.photonNoSliderSpinBox.setHide(n);break;case"CausticsPathDepth":this.properties.Caustics.pathDepthLabel.setStyles({display:n}),this.properties.Caustics.pathDepthSliderSpinBox.setHide(n);break;case"CausticRadius":this.properties.Caustics.photonRadiusLabel.setStyles({display:n}),this.properties.Caustics.photonRadiusSliderSpinBox.setHide(n);break;case"CausticRefinePhotonMap":this.properties.Caustics.refineCausticLabel.setStyles({display:n}),this.properties.Caustics.refineCausticToggle.getContent().style.display=n;break;case"RayOffset":this.properties.RayOffset.expander.getContent().style.display=n;break;case"AllowGroundShadows":this.properties.Shadows.expander.getContent().style.display=n;break;case"AllowReflectionsOnGround":this.properties.Reflections.expander.getContent().style.display=n;break;case"AllowBloom":this.properties.Bloom.expander.getContent().style.display=n;break;case"AllowDepthOfField":this.properties.DepthOfField.expander.getContent().style.display=n;break;case"DownsamplingFctor":this.properties.Downsampling.expander.getContent().style.display=n}},y.prototype.updatePropertyPresetButtonUI=function(t,i){var n=this.properties[t];if(e.is(n)){var l=this.properties.Global.presetButtonGroup;if(e.is(l))if("Custom"==i)for(var s=0;s<l.getButtonCount();s++)l.getButton(s).checkFlag=!1;else l.getButtonFromValue(i).checkFlag=!0}},y.prototype.updateAttribute=function(e,i,n){t.setAttribute(this.currentPresetMode,"Custom",e,i,n),this.updatePropertyPresetButtonUI(e,"Custom")},y})),define("DS/QualityManagerUI/GIVisualQualityUIDlg",["UWA/Core","DS/QualityManager/QMGIController","DS/WebappsUtils/WebappsUtils","DS/QualityManagerUI/GIVisualQualityCustomPresetDlg","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ComboBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager"],(function(e,t,i,n,l,s,o,a,r){"use strict";var c=!1,p=function(e){this.options=e,this.init()};return p.prototype.init=function(){var e=this.options.frameWindow;this._webGLV6Viewer=e.getViewer(),this._immersiveFrame=e.getImmersiveFrame(),this.currentPresetMode=t.getCurrentPreset(),"undefined"!=typeof widget?r.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang"):r.DEFAULT_LANGUAGE="en";var i=this;r.loadResource({resourceFile:"QualityManagerUI/QualityManager"}),r.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},(function(){i.mbdResources=this})),this.properties={},this.buildDialog(),this.initializedUIfromDB()},p.prototype.initializedUIfromDB=function(){c=!0;var e=t.getCurrentGlobalPreset("Static");this.properties.Static.staticComboBox.currentValue=e,e=t.getCurrentGlobalPreset("Batch"),this.properties.Batch.batchComboBox.currentValue=e,c=!1},p.prototype.buildDialog=function(){var e=this,i=UWA.createElement("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}});e.buildViewContent().inject(i),e.GIVisualQualityUIDlg=new s({title:"Raytracer Visual Quality",content:i,immersiveFrame:e._immersiveFrame,ResizableFlag:!0,width:270,height:80,allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea}),e.GIVisualQualityUIDlg.addEventListener("close",(function(){t.commitToDB()}))},p.prototype.buildViewContent=function(){for(var e=this,t=UWA.createElement("div",{class:"wux-container"}),i=["Standard","Optimize Interior","Optimize Caustics","Custom"],n=["Standard","OptimizeInterior","OptimizeCaustics","Custom"],l=[],s=0;s<i.length;s++)l[s]={labelItem:i[s],valueItem:n[s]};return e.buildStaticView(l).inject(t),e.buildBatchView(l).inject(t),e.buildCustomizeButtonView().inject(t),t},p.prototype.buildStaticView=function(e){var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"200px"}),new UWA.Element("div",{class:"wux-control-inline-container",text:"Static:"}).inject(t).setStyles({width:"40px"});var i=new o({elementsList:e,selectedIndex:1,recId:"Static",enableSearchFlag:!1}).inject(t);return i.getContent().style.width="70%",this.properties.Static={},this.properties.Static.staticComboBox=i,this.addEventListenerComboBox(i),t},p.prototype.buildBatchView=function(e){var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"200px"}),new UWA.Element("div",{class:"wux-control-inline-container",text:"Batch:"}).inject(t).setStyles({width:"40px"});var i=new o({elementsList:e,selectedIndex:1,recId:"Batch",enableSearchFlag:!1}).inject(t);return i.getContent().style.width="70%",this.properties.Batch={},this.properties.Batch.batchComboBox=i,this.addEventListenerComboBox(i),t},p.prototype.buildCustomizeButtonView=function(){var e=this,s=UWA.createElement("div",{class:"wux-container"});s.setStyles({position:"absolute",width:"0px",left:"225px",top:"20px"});var o=new l({recId:"customizeButton",displayStyle:"lite",icon:i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorSettings.png"}).inject(s),r=this.options;return o.getContent().tooltipInfos=new a({shortHelp:"Customize"}),o.addEventListener("buttonclick",(function(){e.GIVisualQualityUIDlg.hide();var i=new n(r);i.currentPreset="Custom",i.QualityManagerDialog.addEventListener("close",(function(){t.restoreFromDB(),i.QualityManagerDialog.close(),e.GIVisualQualityUIDlg.show()})),i.QualityManagerDialog.buttons.Ok.addEventListener("click",(function(){"Linked"==this.currentPresetMode?(t.setGlobalPresetOnDB("Static","Custom",!1),t.setGlobalPresetOnDB("Dynamic","Custom",!1),e.properties.Static.staticComboBox.currentValue="Custom",e.properties.Dynamic.dynamicComboBox.currentValue="Custom"):(e.currentPresetMode=i.currentPresetMode,t.setGlobalPresetOnDB(e.currentPresetMode,"Custom",!1),"Static"==e.currentPresetMode?e.properties.Static.staticComboBox.currentValue="Custom":e.properties.Batch.batchComboBox.currentValue="Custom"),t.commitToDB(),i.QualityManagerDialog.close(),e.GIVisualQualityUIDlg.show()})),i.QualityManagerDialog.buttons.Cancel.addEventListener("click",(function(){t.restoreFromDB(),i.QualityManagerDialog.close(),e.GIVisualQualityUIDlg.show()}))})),s},p.prototype.addEventListenerComboBox=function(e){var i=this;e.addEventListener("change",(function(){if(!c){var n=e.recId;t.setCurrentPreset(n),i.currentPresetMode=n;var l=e.currentValue;i.updateGlobalPreset(n,l)}}))},p.prototype.updateGlobalPreset=function(e,i){t.setGlobalPreset(e,i,!1)},p})),define("DS/QualityManagerUI/QMUIAdvancedPresetSelectionDlg",["UWA/Core","DS/QualityManager/QMController","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ButtonGroup","DS/Controls/SpinBox","DS/Controls/Toggle","DS/Controls/ComboBox","DS/QualityManagerUI/SliderSpinBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager","DS/Utilities/TouchUtils","DS/Visualization/ThreeJS_DS","i18n!DS/QualityManagerUI/assets/nls/translation"],(function(e,t,i,n,l,s,o,a,r,c,p,d,h,u,g){"use strict";var m=function(e){this.listenables={Static:[],Dynamic:[]},this.uiInitialization=!1,this.globalPrestButtonInteraction=!1,this.propertyPresetButtonInteraction=!1,this.attribElementInteraction=!1,this._doNotValidate=!1,this.extraPresets=[];let n=new Set;for(let e=0;e<t.getImportedPresets().length;e++)n.add(t.getImportedPresets()[e]);for(let e=0;e<t.getLocalPresets().length;e++)n.add(t.getLocalPresets()[e]);const l=this;n.forEach(((e,t,i)=>{l.extraPresets.push(e)})),this._toHide=[],this.options=e,this.options.initCB=this.options.initCB||function(e){},this.options.closeCB=this.options.closeCB||function(e){},this.init(),this.batching=void 0,this.localCache=void 0,this.localCacheSize=void 0,this._updatingAttribute=!1;i.getWebappsBaseUrl();if(window.widget)window.widget.getUrl(),window.widget.getValue("title")};return m.prototype.init=function(){this.STATIC_STRING="_MODE_STATIC",this.DYNAMIC_STRING="_MODE_DYNAMIC",this.RenderMode_Static_Str="Static",this.RenderMode_Dynamic_Str="Dynamic",this.touch=h.getTouchMode(),this._webGLV6Viewer=this.options.viewer,this._effectSettings=this._webGLV6Viewer._viewerEffectSettings,this.useMobile=!!this._webGLV6Viewer&&this._webGLV6Viewer.mobile,this._immersiveFrame=this.options.immersiveFrame,"undefined"!=typeof widget?d.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang"):d.DEFAULT_LANGUAGE="en";var e=this;d.loadResource({resourceFile:"QualityManagerUI/QualityManager"}),d.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},(function(){e.mbdResources=this,e.updateUILabelTooltip()})),this.properties=this.buildProperties(),this.propertiesGlobal=this.buildGlobalProperties(),this.propertiesStatic=this.buildProperties(),this.propertiesDynamic=this.buildProperties(),this.labelElements={},this.staticHelpElements={},this.dynamicHelpElements={},this.buildDialog(),this.initializedUIfromDB(),this.mbdResources&&this.updateUI()},m.prototype.buildProperties=function(){return{AntiAliasing:{id:"AntiAliasing"},PixelCulling:{id:"PixelCulling"},LOD:{id:"LOD"},Transparency:{id:"Transparency"},Shadows:{id:"Shadows"},Reflections:{id:"Reflections"},Refractions:{id:"Refractions"},AmbientOcclusion:{id:"AmbientOcclusion"},DepthBufferOptions:{id:"DepthBufferOptions"},Material:{id:"Material"},Downsampling:{id:"Downsampling"},SectionCapping:{id:"SectionCapping"}}},m.prototype.buildGlobalProperties=function(){return{Global:{id:"Global"}}},m.prototype.buildDialog=function(){var e=this,t=UWA.createElement("div",{class:"wux-control-inline-container"});t.setStyle("vertical-align","top"),t.setStyles({width:"630px"}),e.buildViewContent().inject(t);for(var i=0;i<this._toHide.length;i++)this._toHide[i].hide();var s=new n;s.getContent().id="OKButton";var o=new n;o.getContent().id="CancelButton";new n({});e.QualityManagerDialog=new l({title:"Visual Quality",content:t,immersiveFrame:e._immersiveFrame,position:{of:e._immersiveFrame.getFreeZone()},identifier:"WebVisuAdvancedVisualQuality-"+e._immersiveFrame.identifier,buttons:{Ok:s,Cancel:o},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea,resizableFlag:!0}),this.touch&&(e.QualityManagerDialog.getContent().touchMode=!0),e.QualityManagerDialog.getContent().id="Visual Quality",e.options.initCB(this),e.QualityManagerDialog.addEventListener("close",(function(){e._validate(),e.options.closeCB(e)})),e.QualityManagerDialog.buttons.Ok.addEventListener("click",(function(){e.validate()})),e.QualityManagerDialog.buttons.Cancel.addEventListener("click",(function(){e.invalidate()})),document.addEventListener("touchChange",this.onTouchChange.bind(this))},m.prototype.onTouchChange=function(e){h.getTouchMode(),h.applyTouch(this.QualityManagerDialog.content,!1)},m.prototype._validate=function(){this._doNotValidate||(this._doNotValidate=!0,void 0!==this.batching&&t.setBatching(this.batching),void 0!==this.localCache&&t.setLocalCache(this.localCache),void 0!==this.localCacheSize&&t.setLocalCacheSizeOnDB(this.localCacheSize),void 0!==this.ldhOpt1&&t.setLDHOpt1ExtendMemory(this.ldhOpt1),void 0!==this.ldhOpt2&&t.setLDHOpt2SSB(this.ldhOpt2),void 0!==this.ldhOpt3&&t.setLDHOpt3Compression(this.ldhOpt3),t.commitToDB())},m.prototype.validate=function(){this._validate(),this.QualityManagerDialog.close()},m.prototype.invalidate=function(){t.restoreFromDB(),this.QualityManagerDialog.close()},m.prototype.buildViewContent=function(){var e=this,t=UWA.createElement("div",{class:"wux-container"});return t.setStyle("vertical-align","top"),e.buildRenderModeView().inject(t),e.buildAntiAliasingView().inject(t),e.buildPixelcullingView().inject(t),e.buildLODView().inject(t),e.buildTransparencyView().inject(t),e.buildShadowView().inject(t),e.buildReflectionsView().inject(t),e.buildRefractionsView().inject(t),e.buildAmbientOcclusionView().inject(t),e.buildDepthBufferView().inject(t),e.buildMaterialView().inject(t),e.buildDownsamplingView().inject(t),e.buildSectionCappingView().inject(t),e._webGLV6Viewer._getOOCManager()&&e.buildLargeAssemblyView(e._webGLV6Viewer._getOOCManager().isElasticCloud()).inject(t),t},m.prototype.updateUILabelTooltip=function(){this.QMUIPresetSelectionDlg&&this.updateUI()},m.prototype.updateUI=function(){var e=this,t=e.GetResString("VisualQuality");for(var i in null!=t&&""!==t&&(e.QualityManagerDialog.title=e.GetLabel(t)),e.labelElements){var n=e.GetResString(i);null!=n&&""!==n&&(e.labelElements[i].textContent=e.GetLabel(n),i!==this.RenderMode_Static_Str&&i!==this.RenderMode_Dynamic_Str||e.DetermineLabelLength(n))}for(var i in e.staticHelpElements){var l=e.GetResString(i);null!=l&&""!==l&&("CullMinPixelSizeControl"===i||"DownsamplingControl"===i||"LODControl"===i?e.staticHelpElements[i].elements.spinBox.tooltipInfos.shortHelp=e.GetHelp(l):e.staticHelpElements[i].tooltipInfos.shortHelp=e.GetHelp(l))}for(var i in e.dynamicHelpElements){var s=e.GetResString(i);null!=s&&""!==s&&("CullMinPixelSizeControl"===i||"DownsamplingControl"===i||"LODControl"===i?e.dynamicHelpElements[i].elements.spinBox.tooltipInfos.shortHelp=e.GetHelp(s):e.dynamicHelpElements[i].tooltipInfos.shortHelp=e.GetHelp(s))}},m.prototype.GetResString=function(e){var t="";return this.mbdResources&&(t=this.mbdResources.getKey({key:e})),t},m.prototype.GetLabel=function(e){var t="";return void 0!==e.Text&&(t=e.Text),t},m.prototype.GetHelp=function(e){var t="";return void 0!==e.Tooltip&&(t=e.Tooltip),t},m.prototype.DetermineLabelLength=function(e){var t,i=this,n=(t=e.Text).length;t!=this.RenderMode_Static_Str&&t!=this.RenderMode_Dynamic_Str&&(n>0&&n<6?(i.staticLabel.style.width="30px",i.staticCombo.getContent().style.width="26%",i.dynamicLabel.style.width="30px",i.dynamicCombo.getContent().style.width="26%"):n>=6&&n<=9?(i.staticLabel.style.width="50px",i.staticCombo.getContent().style.width="22%",i.dynamicLabel.style.width="65px",i.dynamicCombo.getContent().style.width="20%"):n>9&&n<=12&&(i.staticLabel.style.width="90px",i.staticCombo.getContent().style.width="15%",i.dynamicLabel.style.width="90px",i.dynamicCombo.getContent().style.width="15%"))},m.prototype.buildRenderModeView=function(){var e=this,t=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"});return l.setStyles({position:"relative",display:"inline-block",width:"400px",left:"230px",height:"32px"}),e.staticLabel=new UWA.Element("label",{class:"wux-control-inline-container",text:"Static"}).inject(l),e.staticLabel.style.width="40px",e.staticLabel.style.color="#42a2da",e.staticLabel.style.fontWeight="bold",e.staticCombo=e.getPresetCombo().inject(l),e.staticCombo.getContent().id="Static",e.staticCombo.getContent().style.width="30%",e.staticCombo.tooltipInfos=new p({shortHelp:"Change all parameters to selected preset."}),e.linkButton=new n({displayStyle:"lite",icon:t+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png"}).inject(l),e.linkButton.getContent().setStyles({margin:"0px 5px 0px 5px"}),e.linkButton.tooltipInfos=new p({shortHelp:this.GetResString("LinkControl").Tooltip}),e.linkButton.getContent().id="Link",e.dynamicLabel=new UWA.Element("div",{class:"wux-control-inline-container",text:"Dynamic"}).inject(l),e.dynamicLabel.style.width="52px",e.dynamicLabel.style.color="#42a2da",e.dynamicLabel.style.fontWeight="bold",e.dynamicCombo=e.getPresetCombo().inject(l),e.dynamicCombo.getContent().id="Dynamic",e.dynamicCombo.getContent().style.width="30%",e.dynamicCombo.tooltipInfos=new p({shortHelp:"Change all parameters to selected preset."}),this.touch&&(l.setStyles({width:"800px",left:"320px",height:"46px"}),e.staticLabel.style.width="60px",e.staticCombo.getContent().style.width="180px",e.dynamicLabel.style.width="75px",e.dynamicCombo.getContent().style.width="180px"),e.addEventListenerGlobalPreset(e.staticCombo),e.addEventListenerGlobalPreset(e.dynamicCombo),e.addEventListenerLinkButton(e.linkButton,e.dynamicCombo),e.propertiesGlobal.Global={},e.propertiesGlobal.Global.staticCombo=e.staticCombo,e.propertiesGlobal.Global.dynamicCombo=e.dynamicCombo,e.labelElements[this.RenderMode_Static_Str]=e.staticLabel,e.labelElements[this.RenderMode_Dynamic_Str]=e.dynamicLabel,e.staticHelpElements.StaticMode=e.staticCombo,e.dynamicHelpElements.DynamicMode=e.dynamicCombo,l},m.prototype.addEventListenerGlobalPreset=function(e){var t=this;e.addEventListener("change",(function(){var i=e.getContent().id,n=e.value;t.attribElementInteraction||t.propertyPresetButtonInteraction||t.uiInitialization||(t.globalPrestButtonInteraction=!0,t.updateGlobalPreset(i,n),t.globalPrestButtonInteraction=!1)}))},m.prototype.updateGlobalPreset=function(e,i){var n=null;for(var l in e===this.RenderMode_Static_Str?n=this.propertiesStatic:e===this.RenderMode_Dynamic_Str&&(n=this.propertiesDynamic),t.setGlobalPreset(e,i,!1),n)"Global"!=l&&this.updatePropertyUI(l,i,e)},m.prototype.addEventListenerLinkButton=function(e,n){var l=this;e.addEventListener("buttonclick",(function(){n.disabled?(t.setLinkedPresetStatus(!1),n.disabled=!1,e.icon=i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png",l.EnableDisableDynamicControls(e,n)):(t.setLinkedPresetStatus(!0),n.disabled=!0,e.icon=i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png",l.EnableDisableDynamicControls(e,n))}))},m.prototype.buildAntiAliasingView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"}).inject(t),s=[g.PostProcessElements.NoAA,g.PostProcessElements.FXAA,g.PostProcessElements.SMAA,g.PostProcessElements.TAA,g.PostProcessElements.Iterative],o=["NoAA","FXAA","SMAA","TAA","Iterative"],a=new UWA.Element("label",{class:"wux-control-inline-container",text:"Anti-aliasing"}).inject(l);a.style.color="#3d3d3d",a.style.fontWeight="bold",a.setStyles({width:"205px"}),a.setStyle("vertical-align","top");for(var c=[],d=0;d<s.length;d++)c[d]={labelItem:s[d],valueItem:o[d]};var h=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1}).inject(l);if(h.getContent().style.width="27%",h.getContent().style.verticalAlign="top",h.getContent().id="AntiAliasing"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Anti-aliasing is refined when the viewpoint is idle and nothing changes in the scene."}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(l);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(l);var u=[];for(d=0;d<s.length-1;d++)u[d]={labelItem:s[d],valueItem:o[d]};var m=new r({elementsList:u,selectedIndex:1,enableSearchFlag:!1}).inject(l);return m.getContent().style.width="27%",m.getContent().style.verticalAlign="top",m.getContent().id="AntiAliasing"+this.DYNAMIC_STRING,m.tooltipInfos=new p({shortHelp:"Anti-aliasing is refined when the viewpoint is idle and nothing changes in the scene."}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),a.setStyles({width:"270px"}),h.getContent().style.width="260px",m.getContent().style.width="260px"),e.propertiesStatic.AntiAliasing={},e.propertiesStatic.AntiAliasing.postProcCombo=h,e.propertiesDynamic.AntiAliasing={},e.propertiesDynamic.AntiAliasing.postProcCombo=m,e.addEventListenerComboBox("AntiAliasing",h,this.RenderMode_Static_Str),e.addEventListenerComboBox("AntiAliasing",m,this.RenderMode_Dynamic_Str),e.labelElements.PostProcessAALabel=a,e.staticHelpElements.PostProcessAAControl=h,e.dynamicHelpElements.PostProcessAAControl=m,this._effectSettings._isNotAvailableSetting("AntiAliasing")&&(this._toHide.push(l),this._toHide.push(t)),t},m.prototype.buildPixelcullingView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"}).inject(t),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Pixel culling"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"198px"}),s.setStyle("vertical-align","top");var o=new c({minValue:0,maxValue:400,stepValue:.5,initialValue:8,decimals:1}).inject(l);if(o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.elements.slider.getContent().style.width="99px",o.elements.slider.getContent().style.height="20px",o.elements.spinBox.getContent().style.minWidth="60px",o.elements.spinBox.getContent().style.width="60px",o.elements.spinBox.getContent().style.verticalAlign="bottom",o.getContent().id="PixelCulling"+this.STATIC_STRING,o.setTooltips("Adds or removes display quality for objects.Even if you do not want to remove geometry, it is often useful to remove details you do not need to see. Set a low value if you want to see all the details, or a high value to remove details."),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(l);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(l);var a=new c({minValue:0,maxValue:400,stepValue:.5,initialValue:8,decimals:1}).inject(l);return a.getContent().style.display="inline-block",a.getContent().style.verticalAlign="top",a.elements.slider.getContent().style.width="99px",a.elements.slider.getContent().style.height="20px",a.elements.spinBox.getContent().style.minWidth="60px",a.elements.spinBox.getContent().style.width="60px",a.elements.spinBox.getContent().style.verticalAlign="bottom",a.getContent().id="PixelCulling"+this.DYNAMIC_STRING,a.setTooltips("Adds or removes display quality for objects.Even if you do not want to remove geometry, it is often useful to remove details you do not need to see. Set a low value if you want to see all the details, or a high value to remove details."),this.touch&&(t.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),o.elements.spinBox.getContent().style.width="145px",o.elements.slider.getContent().style.width="105px",o.elements.slider.getContent().style.height="40px",a.elements.spinBox.getContent().style.width="145px",a.elements.slider.getContent().style.width="105px",a.elements.slider.getContent().style.height="40px"),e.propertiesStatic.PixelCulling={},e.propertiesStatic.PixelCulling.pixelCullingSpinBox=o,e.propertiesDynamic.PixelCulling={},e.propertiesDynamic.PixelCulling.pixelCullingSpinBox=a,e.addEventListenerSpinBox("PixelCulling",o,this.RenderMode_Static_Str),e.addEventListenerSpinBox("PixelCulling",a,this.RenderMode_Dynamic_Str),e.labelElements.CullMinPixelSizeLabel=s,e.staticHelpElements.CullMinPixelSizeControl=o,e.dynamicHelpElements.CullMinPixelSizeControl=a,this._effectSettings._isNotAvailableSetting("PixelCulling")&&(this._toHide.push(l),this._toHide.push(t)),t},m.prototype.buildLODView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"}).inject(t),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"LOD"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"198px"}),s.setStyle("vertical-align","top");var o=new c({minValue:0,maxValue:400,stepValue:.1,initialValue:8,decimals:1}).inject(l);if(o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.elements.slider.getContent().style.width="99px",o.elements.slider.getContent().style.height="20px",o.elements.spinBox.getContent().style.minWidth="60px",o.elements.spinBox.getContent().style.width="60px",o.elements.spinBox.getContent().style.verticalAlign="bottom",o.getContent().id="LOD"+this.STATIC_STRING,o.setTooltips("Adds or removes display quality for objects.Even if you do not want to remove geometry, it is often useful to remove details you do not need to see. Set a low value if you want to see all the details, or a high value to remove details."),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(l);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(l);var a=new c({minValue:0,maxValue:400,stepValue:.1,initialValue:8,decimals:1}).inject(l);return a.getContent().style.display="inline-block",a.getContent().style.verticalAlign="top",a.elements.slider.getContent().style.width="99px",a.elements.slider.getContent().style.height="20px",a.elements.spinBox.getContent().style.minWidth="60px",a.elements.spinBox.getContent().style.width="60px",a.elements.spinBox.getContent().style.verticalAlign="bottom",a.getContent().id="LOD"+this.DYNAMIC_STRING,a.setTooltips("Adds or removes display quality for objects.Even if you do not want to remove geometry, it is often useful to remove details you do not need to see. Set a low value if you want to see all the details, or a high value to remove details."),this.touch&&(t.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),o.elements.spinBox.getContent().style.width="145px",o.elements.slider.getContent().style.width="105px",o.elements.slider.getContent().style.height="40px",a.elements.spinBox.getContent().style.width="145px",a.elements.slider.getContent().style.width="105px",a.elements.slider.getContent().style.height="40px"),e.propertiesStatic.LOD={},e.propertiesStatic.LOD.LODSpinBox=o,e.propertiesDynamic.LOD={},e.propertiesDynamic.LOD.LODSpinBox=a,e.addEventListenerSpinBox("LOD",o,this.RenderMode_Static_Str),e.addEventListenerSpinBox("LOD",a,this.RenderMode_Dynamic_Str),e.labelElements.LODLabel=s,e.staticHelpElements.LODControl=o,e.dynamicHelpElements.LODControl=a,this._effectSettings._isNotAvailableSetting("LOD")&&(this._toHide.push(l),this._toHide.push(t)),t},m.prototype.buildTransparencyView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"}).inject(t),s=[g.TransparencyElements.AlphaBlending,g.TransparencyElements.WeightedAverage],o=["AlphaBlending","WeightedAverage"];e._webGLV6Viewer._use_webgpu&&(s.push(g.TransparencyElements.OrderIndependent),o.push("PerPixelLinkedList"));for(var a=[],c=0;c<s.length;c++)a[c]={labelItem:s[c],valueItem:o[c]};var d=new UWA.Element("label",{class:"wux-control-inline-container",text:"Transparency"}).inject(l);d.style.color="#3d3d3d",d.style.fontWeight="bold",d.setStyles({width:"205px"}),d.setStyle("vertical-align","top");var h=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(l);if(h.getContent().style.width="27%",h.getContent().style.verticalAlign="top",h.getContent().id="Transparency"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Default (Alpha Blending Without Sort), Low(Alpha Blending), Medium(Alpha Blending), High(Order Independent Transparency)"}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(l);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(l);var u=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(l);return u.getContent().style.width="27%",u.getContent().style.verticalAlign="top",u.getContent().id="Transparency"+this.DYNAMIC_STRING,u.tooltipInfos=new p({shortHelp:"Default (Alpha Blending Without Sort), Low(Alpha Blending), Medium(Alpha Blending), High(Order Independent Transparency)"}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),d.setStyles({width:"270px"}),h.getContent().style.width="260px",u.getContent().style.width="260px"),e.propertiesStatic.Transparency={},e.propertiesStatic.Transparency.transparencyCombo=h,e.propertiesDynamic.Transparency={},e.propertiesDynamic.Transparency.transparencyCombo=u,e.addEventListenerComboBox("Transparency",h,this.RenderMode_Static_Str),e.addEventListenerComboBox("Transparency",u,this.RenderMode_Dynamic_Str),e.labelElements.TranspModeLabel=d,e.staticHelpElements.TranspModeControl=h,e.dynamicHelpElements.TranspModeControl=u,this._effectSettings._isNotAvailableSetting("Transparency")&&(this._toHide.push(l),this._toHide.push(t)),t},m.prototype.buildShadowView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"600px",display:"inline-block"});for(var l=i.getWebappsBaseUrl(),s=[g.Elements.Low,g.Elements.Medium,g.Elements.High,g.Elements.Ultra,g.Elements.Default,g.Elements.Custom].concat(this.extraPresets),o=["Low","Medium","High","Ultra","Default","Custom"].concat(this.extraPresets),c=[],d=0;d<s.length;d++)c[d]={labelItem:s[d],valueItem:o[d]};var h=new UWA.createElement("div",{class:"wux-container"}).inject(t);h.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),h.setStyle("vertical-align","top");var u=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite"}).inject(h);u.getContent().style.verticalAlign="top",u.getContent().id="ExpanderButtonShadows";var m=new UWA.Element("label",{class:"wux-control-inline-container",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},text:"Shadows"}).inject(h);m.style.color="#3d3d3d",m.style.fontWeight="bold",m.setStyles({width:"204px"}),m.setStyles({marginTop:"8px"}),m.setStyles({marginLeft:"12px"}),m.setStyle("vertical-align","top");var y=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});if(y.getContent().style.width="27%",y.getContent().style.verticalAlign="top",y.getContent().style.marginTop="5px",y.getContent().id="Shadows"+this.STATIC_STRING,y.tooltipInfos=new p({shortHelp:"Change Shadows properties to selected preset(Low/Medium/High/Ultra)"}),y.inject(h),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(h);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(h);var S=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});S.getContent().style.width="27%",S.getContent().style.verticalAlign="top",S.getContent().style.marginTop="5px",S.getContent().id="Shadows"+this.DYNAMIC_STRING,S.tooltipInfos=new p({shortHelp:"Change Shadows properties to selected preset(Low/Medium/High/Ultra)"}),S.inject(h);var w=new UWA.Element("div",{class:"wux-container"}).inject(t);w.setStyles({position:"relative",display:"inline-block",width:"600px"}),w.setStyles({display:"none"});var b=new UWA.Element("div",{class:"wux-container"}).inject(w);if(b.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var x=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Ground shadows"}).inject(b);x.setStyles({position:"relative"}),x.style.color="#3d3d3d",x.setStyles({width:"235px"}),x.setStyle("vertical-align","top");var v=new a({type:"switch",label:""}).inject(b);if(v.getContent().style.width="21.9%",v.getContent().style.display="inline-block",v.getContent().style.verticalAlign="top",v.getContent().id="AllowGroundShadows"+this.STATIC_STRING,v.tooltipInfos=new p({shortHelp:"Permit ground shadow computation whenever it is not costly."}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var C=new a({type:"switch",label:""}).inject(b);C.getContent().style.width="21.9%",C.getContent().style.display="inline-block",C.getContent().style.verticalAlign="top",C.getContent().id="AllowGroundShadows"+this.DYNAMIC_STRING,C.tooltipInfos=new p({shortHelp:"Permit ground shadow computation whenever it is not costly."});var f=new UWA.Element("div",{class:"wux-container"}).inject(w);if(f.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f);var I=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Inter-object shadows"}).inject(f);I.setStyles({position:"relative"}),I.style.color="#3d3d3d",I.setStyles({width:"235px"}),I.setStyle("vertical-align","top");var A=new a({type:"switch",label:""}).inject(f);if(A.getContent().style.width="21.9%",A.getContent().style.display="inline-block",A.getContent().style.verticalAlign="top",A.getContent().id="AllowInterObjectShadows"+this.STATIC_STRING,A.tooltipInfos=new p({shortHelp:"Activate/deactivate inter-object shadow."}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f);var E=new a({type:"switch",label:""}).inject(f);E.getContent().style.width="21.9%",E.getContent().style.display="inline-block",E.getContent().style.verticalAlign="top",E.getContent().id="AllowInterObjectShadows"+this.DYNAMIC_STRING,E.tooltipInfos=new p({shortHelp:"Activate/deactivate inter-object shadow."});var L=new UWA.Element("div",{class:"wux-container"}).inject(w);if(L.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(L);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(L);var M=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Transparent-object shadows"}).inject(L);M.setStyles({position:"relative"}),M.style.color="#3d3d3d",M.setStyles({width:"235px"}),M.setStyle("vertical-align","top");var D=new a({type:"switch",label:""}).inject(L);if(D.getContent().style.width="21.9%",D.getContent().style.display="inline-block",D.getContent().style.verticalAlign="top",D.getContent().id="AllowTransparentObjectShadows"+this.STATIC_STRING,D.tooltipInfos=new p({shortHelp:"Activate/deactivate transparent-object shadow."}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(L),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(L);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(L),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(L);var U=new a({type:"switch",label:""}).inject(L);U.getContent().style.width="21.9%",U.getContent().style.display="inline-block",U.getContent().style.verticalAlign="top",U.getContent().id="AllowTransparentObjectShadows"+this.DYNAMIC_STRING,U.tooltipInfos=new p({shortHelp:"Activate/deactivate transparent-object shadow."});var B=[g.FilteringElements.PCFOptimized,g.FilteringElements.ESM,g.FilteringElements.Poisson],T=["PCFOptimized","ESM","poisson"],j=new UWA.Element("div",{class:"wux-container"}).inject(w);if(j.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(j);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(j);var _=new UWA.Element("label",{class:"wux-control-inline-container",text:"Filtering to use"}).inject(j);_.setStyles({position:"relative"}),_.style.color="#3d3d3d",_.setStyles({width:"235px"}),_.setStyle("vertical-align","top");for(c=[],d=0;d<B.length;d++)c[d]={labelItem:B[d],valueItem:T[d]};var W=new r({elementsList:c,selectedIndex:2,enableSearchFlag:!1}).inject(j);if(W.getContent().style.width="21.9%",W.getContent().style.verticalAlign="top",W.getContent().id="ShadowFilter"+this.STATIC_STRING,W.tooltipInfos=new p({shortHelp:"PCF-optimized (Percentage Closer Filtering), ESM(Exponential shadow map), Poisson()"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(j),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(j);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(j),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(j);var R=new r({elementsList:c,selectedIndex:2,enableSearchFlag:!1}).inject(j);R.getContent().style.width="21.9%",R.getContent().style.verticalAlign="top",R.getContent().id="ShadowFilter"+this.DYNAMIC_STRING,R.tooltipInfos=new p({shortHelp:"PCF-optimized (Percentage Closer Filtering), ESM(Exponential shadow map), Poisson()"});B=[g.Elements.Low,g.Elements.Medium,g.Elements.High],T=["Low","Medium","High"];var V=new UWA.Element("div",{class:"wux-container"}).inject(w);if(V.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(V);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(V);var G=new UWA.Element("label",{class:"wux-control-inline-container",text:"Filtering quality"}).inject(V);G.setStyles({position:"relative"}),G.style.color="#3d3d3d",G.setStyles({width:"235px"}),G.setStyle("vertical-align","top");for(c=[],d=0;d<B.length;d++)c[d]={labelItem:B[d],valueItem:T[d]};var F=new r({elementsList:c,selectedIndex:2,enableSearchFlag:!1}).inject(V);if(F.getContent().style.width="21.9%",F.getContent().style.verticalAlign="top",F.getContent().id="ShadowQuality"+this.STATIC_STRING,F.tooltipInfos=new p({shortHelp:"Filtering quality"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(V),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(V);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(V),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(V);var k=new r({elementsList:c,selectedIndex:2,enableSearchFlag:!1}).inject(V);k.getContent().style.width="21.9%",k.getContent().style.verticalAlign="top",k.getContent().id="ShadowQuality"+this.DYNAMIC_STRING,k.tooltipInfos=new p({shortHelp:"Filtering quality"}),u.addEventListener("click",(function(){"none"==w.style.display?(u.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},w.setStyles({display:"inline-block"})):(u.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},w.setStyles({display:"none"}))})),this.touch&&(h.setStyles({width:"950px",height:"46px"}),m.setStyles({width:"267px"}),y.getContent().style.width="260px",S.getContent().style.width="260px",w.setStyles({width:"950px"}),b.setStyles({height:"46px"}),x.setStyles({width:"294px"}),v.getContent().style.width="220px",C.getContent().style.width="220px",f.setStyles({height:"46px"}),I.setStyles({width:"294px"}),A.getContent().style.width="220px",E.getContent().style.width="220px",L.setStyles({height:"46px"}),M.setStyles({width:"294px"}),D.getContent().style.width="220px",U.getContent().style.width="220px",j.setStyles({height:"46px"}),_.setStyles({width:"294px"}),W.getContent().style.width="220px",R.getContent().style.width="220px",V.setStyles({height:"46px"}),G.setStyles({width:"294px"}),F.getContent().style.width="220px",k.getContent().style.width="220px"),e.propertiesStatic.Shadows={},e.propertiesStatic.Shadows.presetCombo=y,e.propertiesStatic.Shadows.groundShadowsToggle=v,e.propertiesStatic.Shadows.interObjectShadowsToggle=A,e.propertiesStatic.Shadows.transObjectShadowsToggle=D,e.propertiesStatic.Shadows.filteringTypeCombo=W,e.propertiesStatic.Shadows.filteringQualityCombo=F,e.propertiesDynamic.Shadows={},e.propertiesDynamic.Shadows.presetCombo=S,e.propertiesDynamic.Shadows.groundShadowsToggle=C,e.propertiesDynamic.Shadows.interObjectShadowsToggle=E,e.propertiesDynamic.Shadows.transObjectShadowsToggle=U,e.propertiesDynamic.Shadows.filteringTypeCombo=R,e.propertiesDynamic.Shadows.filteringQualityCombo=k,e.addEventListenerPropertyPreset("Shadows",y,this.RenderMode_Static_Str),e.addEventListenerPropertyPreset("Shadows",S,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Shadows",v,this.RenderMode_Static_Str),e.addEventListenerToggle("Shadows",C,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Shadows",A,this.RenderMode_Static_Str),e.addEventListenerToggle("Shadows",E,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Shadows",D,this.RenderMode_Static_Str),e.addEventListenerToggle("Shadows",U,this.RenderMode_Dynamic_Str),e.addEventListenerComboBox("Shadows",W,this.RenderMode_Static_Str),e.addEventListenerComboBox("Shadows",R,this.RenderMode_Dynamic_Str),e.addEventListenerComboBox("Shadows",F,this.RenderMode_Static_Str),e.addEventListenerComboBox("Shadows",k,this.RenderMode_Dynamic_Str),e.labelElements.ShadowsLabel=m,e.labelElements.AllowGroundShadowLabel=x,e.labelElements.AllowInterObjShadowLabel=I,e.labelElements.AllowTransObjShadowLabel=M,e.labelElements.ShadowFilteringLabel=_,e.labelElements.ShadowFilteringQualityLabel=G,e.staticHelpElements.ShadowsControl=y,e.staticHelpElements.AllowGroundShadowControl=v,e.staticHelpElements.AllowInterObjShadowControl=A,e.staticHelpElements.AllowTransObjShadowControl=D,e.staticHelpElements.ShadowFilteringControl=W,e.staticHelpElements.ShadowFilteringQualityControl=F,e.dynamicHelpElements.ShadowsControl=S,e.dynamicHelpElements.AllowGroundShadowControl=C,e.dynamicHelpElements.AllowInterObjShadowControl=E,e.dynamicHelpElements.AllowTransObjShadowControl=U,e.dynamicHelpElements.ShadowFilteringControl=R,e.dynamicHelpElements.ShadowFilteringQualityControl=k;let P=0;return(this._effectSettings._isNotAvailableSetting("InterObjectShadows")||this._effectSettings._isNotAvailableSetting("AllowInterObjectShadows"))&&(this._toHide.push(V),this._toHide.push(j),this._toHide.push(f),P++),(this._effectSettings._isNotAvailableSetting("GroundShadows")||this._effectSettings._isNotAvailableSetting("AllowGroundShadows"))&&(this._toHide.push(b),P++),(this._effectSettings._isNotAvailableSetting("TransparentObjectShadows")||this._effectSettings._isNotAvailableSetting("AllowTransparentObjectShadows"))&&(this._toHide.push(L),P++),3===P&&this._toHide.push(t),t},m.prototype.buildReflectionsView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"600px",display:"inline-block"});for(var l=i.getWebappsBaseUrl(),s=[g.Elements.Low,g.Elements.Medium,g.Elements.High,g.Elements.Ultra,g.Elements.Default,g.Elements.Custom].concat(this.extraPresets),o=["Low","Medium","High","Ultra","Default","Custom"].concat(this.extraPresets),c=[],d=0;d<s.length;d++)c[d]={labelItem:s[d],valueItem:o[d]};var h=new UWA.Element("div",{class:"wux-container"}).inject(t);h.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),h.setStyle("vertical-align","top");var u=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite",type:"standard"}).inject(h);u.getContent().style.verticalAlign="top",u.getContent().id="ExpanderButtonReflections";var m=new UWA.Element("label",{class:"wux-control-inline-container",text:"Reflections"}).inject(h);m.style.color="#3d3d3d",m.style.fontWeight="bold",m.setStyles({width:"204px"}),m.setStyles({marginTop:"8px"}),m.setStyles({marginLeft:"12px"}),m.setStyle("vertical-align","top");var y=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});if(y.getContent().style.width="27%",y.getContent().style.verticalAlign="top",y.getContent().style.marginTop="5px",y.getContent().id="Reflections"+this.STATIC_STRING,y.tooltipInfos=new p({shortHelp:"Change Reflections properties to selected preset(Low/Medium/High/Ultra)"}),y.inject(h),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(h);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(h);var S=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});S.getContent().style.width="27%",S.getContent().style.verticalAlign="top",S.getContent().style.marginTop="5px",S.getContent().id="Reflections"+this.DYNAMIC_STRING,S.tooltipInfos=new p({shortHelp:"Change Reflections properties to selected preset(Low/Medium/High/Ultra)"}),S.inject(h);var w=new UWA.Element("div",{class:"wux-container"}).inject(t);w.setStyles({position:"relative",display:"inline-block",width:"600px"}),w.setStyles({display:"none"});var b=new UWA.Element("div",{class:"wux-container"}).inject(w);if(b.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var x=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Reflections on ground"}).inject(b);x.setStyles({position:"relative"}),x.style.color="#3d3d3d",x.setStyles({width:"235px"}),x.setStyle("vertical-align","top");var v=new a({type:"switch",label:""}).inject(b);if(v.getContent().style.width="21.9%",v.getContent().style.display="inline-block",v.getContent().style.verticalAlign="top",v.getContent().id="AllowGroundReflection"+this.STATIC_STRING,v.tooltipInfos=new p({shortHelp:"Allow the Reflection on ground effect. But if the ambiance does not activate this effect, the quality manager will not force it. The model is reflected on the ground."}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var C=new a({type:"switch",label:""}).inject(b);C.getContent().style.width="21.9%",C.getContent().style.display="inline-block",C.getContent().style.verticalAlign="top",C.getContent().id="AllowGroundReflection"+this.DYNAMIC_STRING,C.tooltipInfos=new p({shortHelp:"Allow the Reflection on ground effect. But if the ambiance does not activate this effect, the quality manager will not force it. The model is reflected on the ground."});var f=new UWA.Element("div",{class:"wux-container"}).inject(w);if(f.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f);var I=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Reflections between objects"}).inject(f);I.setStyles({position:"relative"}),I.style.color="#3d3d3d",I.setStyles({width:"235px"}),I.setStyle("vertical-align","top");var A=new a({type:"switch",label:""}).inject(f);if(A.getContent().style.width="21.9%",A.getContent().style.display="inline-block",A.getContent().style.verticalAlign="top",A.getContent().id="AllowInterObjectReflections"+this.STATIC_STRING,A.tooltipInfos=new p({shortHelp:"Glossy materials can reflect other objects in the scene."}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f);var E=new a({type:"switch",label:""}).inject(f);E.getContent().style.width="21.9%",E.getContent().style.display="inline-block",E.getContent().style.verticalAlign="top",E.getContent().id="AllowInterObjectReflections"+this.DYNAMIC_STRING,E.tooltipInfos=new p({shortHelp:"Glossy materials can reflect other objects in the scene."});this.touch;u.addEventListener("click",(function(){"none"==w.style.display?(w.setStyles({display:"inline-block"}),u.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS}):(w.setStyles({display:"none"}),u.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS})})),this.touch&&(h.setStyles({width:"950px",height:"46px"}),m.setStyles({width:"267px"}),y.getContent().style.width="260px",S.getContent().style.width="260px",w.setStyles({width:"950px"}),b.setStyles({height:"46px"}),x.setStyles({width:"294px"}),v.getContent().style.width="220px",C.getContent().style.width="220px",f.setStyles({height:"46px"}),I.setStyles({width:"294px"}),A.getContent().style.width="220px",E.getContent().style.width="220px"),e.propertiesStatic.Reflections={},e.propertiesStatic.Reflections.presetCombo=y,e.propertiesStatic.Reflections.reflectionsToggle=v,e.propertiesStatic.Reflections.interObjectReflectionsToggle=A,e.propertiesDynamic.Reflections={},e.propertiesDynamic.Reflections.presetCombo=S,e.propertiesDynamic.Reflections.reflectionsToggle=C,e.propertiesDynamic.Reflections.interObjectReflectionsToggle=E,e.addEventListenerPropertyPreset("Reflections",y,this.RenderMode_Static_Str),e.addEventListenerPropertyPreset("Reflections",S,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Reflections",v,this.RenderMode_Static_Str),e.addEventListenerToggle("Reflections",C,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Reflections",A,this.RenderMode_Static_Str),e.addEventListenerToggle("Reflections",E,this.RenderMode_Dynamic_Str),e.labelElements.ReflectionsLabel=m,e.labelElements.GroundReflModeLabel=x,e.labelElements.InterObjReflectionsLabel=I,e.staticHelpElements.ReflectionsControl=y,e.staticHelpElements.GroundReflModeControl=v,e.staticHelpElements.InterObjReflectionsControl=A,e.dynamicHelpElements.ReflectionsControl=S,e.dynamicHelpElements.GroundReflModeControl=C,e.dynamicHelpElements.InterObjReflectionsControl=E;var L=0;return(this._effectSettings._isNotAvailableSetting("InterObjectReflections")||this._effectSettings._isNotAvailableSetting("AllowInterObjectReflections"))&&(this._toHide.push(f),L++),(this._effectSettings._isNotAvailableSetting("GroundReflection")||this._effectSettings._isNotAvailableSetting("AllowGroundReflection"))&&(this._toHide.push(b),L++),2===L&&this._toHide.push(t),t},m.prototype.buildRefractionsView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"600px",display:"inline-block"});for(var l=i.getWebappsBaseUrl(),s=[g.Elements.Low,g.Elements.Medium,g.Elements.High,g.Elements.Ultra,g.Elements.Default,g.Elements.Custom].concat(this.extraPresets),o=["Low","Medium","High","Ultra","Default","Custom"].concat(this.extraPresets),c=[],d=0;d<s.length;d++)c[d]={labelItem:s[d],valueItem:o[d]};var h=new UWA.Element("div",{class:"wux-container"}).inject(t);h.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),h.setStyle("vertical-align","top");var u=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite",type:"standard"}).inject(h);u.getContent().style.verticalAlign="top",u.getContent().id="ExpanderButtonRefractions";var m=new UWA.Element("label",{class:"wux-control-inline-container",text:"Refractions"}).inject(h);m.style.color="#3d3d3d",m.style.fontWeight="bold",m.setStyles({width:"204px"}),m.setStyles({marginTop:"8px"}),m.setStyles({marginLeft:"12px"}),m.setStyle("vertical-align","top");var y=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});if(y.getContent().style.width="27%",y.getContent().style.verticalAlign="top",y.getContent().style.marginTop="5px",y.getContent().id="Refractions"+this.STATIC_STRING,y.tooltipInfos=new p({shortHelp:"Change Refractions properties to selected preset(Low/Medium/High/Ultra)"}),y.inject(h),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(h);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(h);var S=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});S.getContent().style.width="27%",S.getContent().style.verticalAlign="top",S.getContent().style.marginTop="5px",S.getContent().id="Refractions"+this.DYNAMIC_STRING,S.tooltipInfos=new p({shortHelp:"Change Refractions properties to selected preset(Low/Medium/High/Ultra)"}),S.inject(h);var w=new UWA.Element("div",{class:"wux-container"}).inject(t);w.setStyles({position:"relative",display:"inline-block",width:"600px"}),w.setStyles({display:"none"});var b=new UWA.Element("div",{class:"wux-container"}).inject(w);if(b.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var x=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Refractions between objects"}).inject(b);x.setStyles({position:"relative"}),x.style.color="#3d3d3d",x.setStyles({width:"235px"}),x.setStyle("vertical-align","top");var v=new a({type:"switch",label:""}).inject(b);if(v.getContent().style.width="21.9%",v.getContent().style.display="inline-block",v.getContent().style.verticalAlign="top",v.getContent().id="AllowInterObjectRefractions"+this.STATIC_STRING,v.tooltipInfos=new p({shortHelp:"Transparent materials can refract other objects in the scene."}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var C=new a({type:"switch",label:""}).inject(b);C.getContent().style.width="21.9%",C.getContent().style.display="inline-block",C.getContent().style.verticalAlign="top",C.getContent().id="AllowInterObjectRefractions"+this.DYNAMIC_STRING,C.tooltipInfos=new p({shortHelp:"Transparent materials can refract other objects in the scene."});this.touch;return u.addEventListener("click",(function(){"none"==w.style.display?(w.setStyles({display:"inline-block"}),u.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS}):(w.setStyles({display:"none"}),u.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS})})),this.touch&&(h.setStyles({width:"950px",height:"46px"}),m.setStyles({width:"267px"}),y.getContent().style.width="260px",S.getContent().style.width="260px",w.setStyles({width:"950px"}),b.setStyles({height:"46px"}),x.setStyles({width:"294px"}),v.getContent().style.width="220px",C.getContent().style.width="220px"),e.propertiesStatic.Refractions={},e.propertiesStatic.Refractions.presetCombo=y,e.propertiesStatic.Refractions.interObjectRefractionsToggle=v,e.propertiesDynamic.Refractions={},e.propertiesDynamic.Refractions.presetCombo=S,e.propertiesDynamic.Refractions.interObjectRefractionsToggle=C,e.addEventListenerPropertyPreset("Refractions",y,this.RenderMode_Static_Str),e.addEventListenerPropertyPreset("Refractions",S,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Refractions",v,this.RenderMode_Static_Str),e.addEventListenerToggle("Refractions",C,this.RenderMode_Dynamic_Str),e.labelElements.RefractionsLabel=m,e.labelElements.InterObjRefractionsLabel=x,e.staticHelpElements.RefractionsControl=y,e.staticHelpElements.InterObjRefractionsControl=v,e.dynamicHelpElements.RefractionsControl=S,e.dynamicHelpElements.InterObjRefractionsControl=C,this._effectSettings._isNotAvailableSetting("InterObjectRefractions")&&(this._toHide.push(t),this._toHide.push(h)),t},m.prototype.buildAmbientOcclusionView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px",left:"23px",verticalAlign:"top"});for(var n=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"}).inject(t),s=[g.SSAOElements.None,g.SSAOElements.Low,g.SSAOElements.Medium,g.SSAOElements.High],o=[0,8,16,32],a=[],c=0;c<s.length;c++)a[c]={labelItem:s[c],valueItem:o[c]};var d=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Ambient occlusion"}).inject(l);d.style.color="#3d3d3d",d.style.fontWeight="bold",d.setStyles({width:"205px"}),d.setStyle("vertical-align","top");var h=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(l);if(h.getContent().style.width="27%",h.getContent().style.verticalAlign="top",h.getContent().id="AmbientOcclusionNbSamples"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Allow the Ambient Occlusion to be activated on the viewer. But if the ambiance does not activate this effect, the quality manager will not force it. The number of samples defines the quality of the Ambient Occlusion.The more the better."}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(l);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(l);var u=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(l);return u.getContent().style.width="27%",u.getContent().style.verticalAlign="top",u.getContent().id="AmbientOcclusionNbSamples"+this.DYNAMIC_STRING,u.tooltipInfos=new p({shortHelp:"Allow the Ambient Occlusion to be activated on the viewer. But if the ambiance does not activate this effect, the quality manager will not force it. The number of samples defines the quality of the Ambient Occlusion.The more the better."}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),d.setStyles({width:"270px"}),h.getContent().style.width="260px",u.getContent().style.width="260px"),e.propertiesStatic.AmbientOcclusion={},e.propertiesStatic.AmbientOcclusion.SSAOCombo=h,e.propertiesDynamic.AmbientOcclusion={},e.propertiesDynamic.AmbientOcclusion.SSAOCombo=u,e.addEventListenerComboBox("AmbientOcclusion",h,this.RenderMode_Static_Str),e.addEventListenerComboBox("AmbientOcclusion",u,this.RenderMode_Dynamic_Str),e.labelElements.OcclusionLabel=d,e.staticHelpElements.SSAOSettingControl=h,e.dynamicHelpElements.SSAOSettingControl=u,this._effectSettings._isNotAvailableSetting("AmbientOcclusion")&&(this._toHide.push(t),this._toHide.push(l)),t},m.prototype.buildDepthBufferView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"}).inject(t),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Depth Flickering Reduction"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"205px"}),s.setStyle("vertical-align","top");var o=new a({type:"switch",label:""}).inject(l);if(o.getContent().style.width="27%",o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.getContent().id="DepthFlickeringReduction"+this.STATIC_STRING,o.tooltipInfos=new p({shortHelp:"Reduces Flickering effect of overlapping surfaces"}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(l);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(l);var r=new a({type:"switch",label:""}).inject(l);return r.getContent().style.width="27%",r.getContent().style.display="inline-block",r.getContent().style.verticalAlign="top",r.getContent().id="DepthFlickeringReduction"+this.DYNAMIC_STRING,r.tooltipInfos=new p({shortHelp:"Reduces Flickering effect of overlapping surfaces"}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),o.getContent().style.width="260px",r.getContent().style.width="260px"),e.propertiesStatic.DepthBufferOptions={},e.propertiesStatic.DepthBufferOptions.depthToggle=o,e.propertiesDynamic.DepthBufferOptions={},e.propertiesDynamic.DepthBufferOptions.depthToggle=r,e.addEventListenerToggle("DepthBufferOptions",o,this.RenderMode_Static_Str),e.addEventListenerToggle("DepthBufferOptions",r,this.RenderMode_Dynamic_Str),e.labelElements.AllowDepthBufferLabel=s,e.staticHelpElements.AllowDepthBufferControl=o,e.dynamicHelpElements.AllowDepthBufferControl=r,this._effectSettings._isNotAvailableSetting("DepthFlickeringReduction")&&(this._toHide.push(t),this._toHide.push(l)),t},m.prototype.buildBatchingView=function(){var e=this,n=UWA.Element("div",{class:"wux-container"});n.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});i.getWebappsBaseUrl();var l=new UWA.Element("div",{class:"wux-container"}).inject(n),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Large assembly download boost"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"205px"}),s.setStyle("vertical-align","top");var o=new a({type:"switch",label:"",checkFlag:t.getBatching()}).inject(l);return o.getContent().style.width="27%",o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.getContent().id="BatchingFlickeringReduction"+this.STATIC_STRING,o.tooltipInfos=new p({shortHelp:"Large assembly download boost (page refresh needed)"}),this.touch&&(n.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),o.getContent().style.width="260px"),e.addEventListenerBatchingToggle("Batching",o),e.labelElements.Batching=s,e.staticHelpElements.Batching=o,n},m.prototype.buildLocalCacheView=function(){var e=this,n=UWA.Element("div",{class:"wux-container"});n.setStyles({position:"relative",left:"23px",width:"500px",verticalAlign:"top"});i.getWebappsBaseUrl();var l=new UWA.Element("div",{class:"wux-container"}).inject(n);l.setStyles({minHeight:"32px"});var s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Enable navigation cache"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"205px",minHeight:"32px"}),s.setStyle("vertical-align","top");var r=new a({type:"switch",label:"",checkFlag:t.getLocalCache()}).inject(l);r.getContent().style.width="27%",r.getContent().style.display="inline-block",r.getContent().style.verticalAlign="top",r.getContent().id="LocalCacheFlickeringReduction"+this.STATIC_STRING,r.tooltipInfos=new p({shortHelp:"Activate models local cache."}),this.touch&&(n.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),r.getContent().style.width="260px"),e.addEventListenerLocalCacheToggle("LocalCache",r),e.labelElements.LocalCache=s,e.staticHelpElements.LocalCache=r;var c=new UWA.Element("div",{class:"wux-container"}).inject(n);c.setStyles({minHeight:"32px"});var d=new UWA.Element("label",{class:"wux-control-inline-container",text:"Navigation cache max size (MB)"}).inject(c);d.style.color="#3d3d3d",d.style.fontWeight="bold",d.setStyles({width:"205px"}),d.style.verticalAlign="top";var h=new o({minValue:0,maxValue:2048,stepValue:1,value:t.getLocalCacheSize(!1),decimals:0}).inject(c);return h.getContent().style.width="60px",h.getContent().style.verticalAlign="top",h.getContent().id="LocalCacheSizeFlickeringReduction"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Local cache maximum size."}),this.touch&&(n.setStyles({width:"950px",height:"46px"}),d.setStyles({width:"270px"}),localCacheSizeStaticToggle.getContent().style.width="260px"),e.addEventListenerLocalCacheSize("LocalCache",h),e.labelElements.LocalCacheSize=d,e.staticHelpElements.LocalCacheSize=h,n},m.prototype.buildSectionCappingView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px",left:"23px",verticalAlign:"top"});for(var n=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"}).inject(t),s=[g.SectionCappingElements.Off,g.SectionCappingElements.Auto,g.SectionCappingElements.On],o=[u.EffectState.Disabled,u.EffectState.Auto,u.EffectState.Enabled],a=[],c=0;c<s.length;c++)a[c]={labelItem:s[c],valueItem:o[c]};var d=new UWA.Element("label",{class:"wux-control-inline-container",text:"Section Capping"}).inject(l);d.style.color="#3d3d3d",d.style.fontWeight="bold",d.setStyles({width:"205px"}),d.setStyle("vertical-align","top");var h=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(l);if(h.getContent().style.width="27%",h.getContent().style.verticalAlign="top",h.getContent().id="SectionCapping"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Enable or disable section capping. Section capping can have a huge impact on performances on big assemblies."}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(l);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(l);var m=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(l);return m.getContent().style.width="27%",m.getContent().style.verticalAlign="top",m.getContent().id="SectionCapping"+this.DYNAMIC_STRING,m.tooltipInfos=new p({shortHelp:"Enable or disable section capping. Section capping can have a huge impact on performances on big assemblies."}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),d.setStyles({width:"270px"}),h.getContent().style.width="260px",m.getContent().style.width="260px"),e.propertiesStatic.SectionCapping={},e.propertiesStatic.SectionCapping.SectionCappingCombo=h,e.propertiesDynamic.SectionCapping={},e.propertiesDynamic.SectionCapping.SectionCappingCombo=m,e.addEventListenerComboBox("SectionCapping",h,this.RenderMode_Static_Str),e.addEventListenerComboBox("SectionCapping",m,this.RenderMode_Dynamic_Str),e.labelElements.SectionCappingLabel=d,e.staticHelpElements.SectionCappingSettingControl=h,e.dynamicHelpElements.SectionCappingSettingControl=m,this._effectSettings._isNotAvailableSetting("SectionCapping")&&(this._toHide.push(t),this._toHide.push(l)),t},m.prototype.buildLargeAssemblyView=function(e){var i=new UWA.Element("div",{class:"wux-container"});i.setStyles({width:"600px",display:"inline-block"});var l=new UWA.createElement("div",{class:"wux-container"}).inject(i);l.setStyles({position:"relative",display:"inline-block",width:"600px",minHeight:"32px"}),l.setStyle("vertical-align","top");var s=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite"}).inject(l);s.getContent().style.verticalAlign="top",s.getContent().id="ExpanderButtonLargeAssembly";var o=new UWA.Element("label",{class:"wux-control-inline-container",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},text:"Large Assembly"}).inject(l);o.style.color="#3d3d3d",o.style.fontWeight="bold",o.setStyles({width:"204px"}),o.setStyles({marginTop:"8px"}),o.setStyles({marginLeft:"12px"}),o.setStyle("vertical-align","top"),this.labelElements.LargeAssemblyLabel=o,s.addEventListener("click",(function(){"none"==a.style.display?(s.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},a.setStyles({display:"inline-block"})):(s.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},a.setStyles({display:"none"}))}));var a=new UWA.Element("div",{class:"wux-container"}).inject(i);if(a.setStyles({position:"relative",display:"inline-block",width:"600px"}),a.setStyles({display:"none"}),t.activateLocalCache?this.buildLocalCacheView().inject(a):this.buildBatchingView().inject(a),e){this.buildLDHOpt1ExtendMemoryToggleView().inject(a),this.buildLDHOpt2SSBToggleView().inject(a),this.buildLDHOpt3CompressionToggleView().inject(a)}return i},m.prototype.buildLDHOpt1ExtendMemoryToggleView=function(){var e=this,n=UWA.Element("div",{class:"wux-container"});n.setStyles({position:"relative",left:"23px",width:"500px",minHeight:"32px",verticalAlign:"top"});i.getWebappsBaseUrl();var l=new UWA.Element("div",{class:"wux-container"}).inject(n),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Activate large assembly mode 1"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"205px"}),s.setStyle("vertical-align","top");var o=new a({type:"switch",label:"",checkFlag:t.getLDHOpt1ExtendMemory()}).inject(l);return o.getContent().style.width="27%",o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.getContent().id="LDHOpt1ExtendMemoryFlickeringReduction"+this.STATIC_STRING,o.tooltipInfos=new p({shortHelp:"Activate models local cache."}),this.touch&&(n.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),o.getContent().style.width="260px"),e.addEventListenerLDHOpt1ExtendMemoryToggle("LDHOpt1ExtendMemory",o),e.labelElements.LDHOpt1ExtendMemory=s,e.staticHelpElements.LDHOpt1ExtendMemory=o,n},m.prototype.buildLDHOpt2SSBToggleView=function(){var e=this,n=UWA.Element("div",{class:"wux-container"});n.setStyles({position:"relative",left:"23px",width:"500px",minHeight:"32px",verticalAlign:"top"});i.getWebappsBaseUrl();var l=new UWA.Element("div",{class:"wux-container"}).inject(n),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Activate large assembly mode 2"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"205px"}),s.setStyle("vertical-align","top");var o=new a({type:"switch",label:"",checkFlag:t.getLDHOpt2SSB()}).inject(l);return o.getContent().style.width="27%",o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.getContent().id="LDHOpt2SSBFlickeringReduction"+this.STATIC_STRING,o.tooltipInfos=new p({shortHelp:"Activate models local cache."}),this.touch&&(n.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),o.getContent().style.width="260px"),e.addEventListenerLDHOpt2SSBToggle("LDHOpt2SSB",o),e.labelElements.LDHOpt2SSB=s,e.staticHelpElements.LDHOpt2SSB=o,n},m.prototype.buildLDHOpt3CompressionToggleView=function(){var e=this,n=UWA.Element("div",{class:"wux-container"});n.setStyles({position:"relative",left:"23px",width:"500px",minHeight:"32px",verticalAlign:"top"});i.getWebappsBaseUrl();var l=new UWA.Element("div",{class:"wux-container"}).inject(n),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Activate large assembly mode 3"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"205px"}),s.setStyle("vertical-align","top");var o=new a({type:"switch",label:"",checkFlag:t.getLDHOpt3Compression()}).inject(l);return o.getContent().style.width="27%",o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.getContent().id="LDHOpt3CompressionFlickeringReduction"+this.STATIC_STRING,o.tooltipInfos=new p({shortHelp:"Activate models local cache."}),this.touch&&(n.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),o.getContent().style.width="260px"),e.addEventListenerLDHOpt3CompressionToggle("LDHOpt3Compression",o),e.labelElements.LDHOpt3Compression=s,e.staticHelpElements.LDHOpt3Compression=o,n},m.prototype.buildMaterialView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"600px",display:"inline-block"});for(var l=i.getWebappsBaseUrl(),s=[g.Elements.Low,g.Elements.Medium,g.Elements.High,g.Elements.Ultra,g.Elements.Default,g.Elements.Custom].concat(this.extraPresets),o=["Low","Medium","High","Ultra","Default","Custom".concat(this.extraPresets)],a=[],c=0;c<s.length;c++)a[c]={labelItem:s[c],valueItem:o[c]};var d=new UWA.Element("div",{class:"wux-container"}).inject(t);d.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),d.setStyle("vertical-align","top");var h=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite",type:"standard"}).inject(d);h.getContent().style.verticalAlign="top",h.getContent().id="ExpanderButtonMaterial";var u=new UWA.Element("label",{class:"wux-control-inline-container",text:"Material"}).inject(d);u.style.color="#3d3d3d",u.style.fontWeight="bold",u.setStyles({width:"204px"}),u.setStyles({marginTop:"8px"}),u.setStyles({marginLeft:"12px"}),u.setStyle("vertical-align","top");var m=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1});if(m.getContent().style.width="27%",m.getContent().style.verticalAlign="top",m.getContent().style.marginTop="5px",m.getContent().id="Material"+this.STATIC_STRING,m.tooltipInfos=new p({shortHelp:"Change Material properties to selected preset(Low/Medium/High/Ultra)"}),m.inject(d),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(d);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(d);var y=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1});y.getContent().style.width="27%",y.getContent().style.verticalAlign="top",y.getContent().style.marginTop="5px",y.getContent().id="Material"+this.DYNAMIC_STRING,y.tooltipInfos=new p({shortHelp:"Change Materials properties to selected preset(Low/Medium/High/Ultra)"}),y.inject(d);var S=new UWA.Element("div",{class:"wux-container"}).inject(t);S.setStyles({position:"relative",display:"inline-block",width:"600px"}),S.setStyles({display:"none"});var w=[g.Elements.Low,g.Elements.Medium,g.Elements.High,g.Elements.Ultra],b=["Low","Medium","High","Ultra"],x=new UWA.Element("div",{class:"wux-container"}).inject(S);if(x.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(x);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(x);var v=new UWA.Element("label",{class:"wux-control-inline-container",text:"Metallic Flakes Quality"}).inject(x);v.setStyles({position:"relative"}),v.style.color="#3d3d3d",v.setStyles({width:"235px"}),v.setStyle("vertical-align","top");for(a=[],c=0;c<w.length;c++)a[c]={labelItem:w[c],valueItem:b[c]};var C=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(x);if(C.getContent().style.width="21.9%",C.getContent().style.verticalAlign="top",C.getContent().id="FlakesQuality"+this.STATIC_STRING,C.tooltipInfos=new p({shortHelp:""}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(x),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(x);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(x),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(x);var f=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(x);f.getContent().style.width="21.9%",f.getContent().style.verticalAlign="top",f.getContent().id="FlakesQuality"+this.DYNAMIC_STRING,f.tooltipInfos=new p({shortHelp:""});w=[g.Elements.Low,g.Elements.High],b=["Low","High"];var I=new UWA.Element("div",{class:"wux-container"}).inject(S);if(I.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(I);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(I);var A=new UWA.Element("label",{class:"wux-control-inline-container",text:"Default Material Quality"}).inject(I);A.setStyles({position:"relative"}),A.style.color="#3d3d3d",A.setStyles({width:"235px"}),A.setStyle("vertical-align","top");for(a=[],c=0;c<w.length;c++)a[c]={labelItem:w[c],valueItem:b[c]};var E=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(I);if(E.getContent().style.width="21.9%",E.getContent().style.verticalAlign="top",E.getContent().id="DefaultMaterialQuality"+this.STATIC_STRING,E.tooltipInfos=new p({shortHelp:""}),this.touch)new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(I),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(I);else new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(I),new UWA.Element("img",{src:l+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(I);var L=new r({elementsList:a,selectedIndex:1,enableSearchFlag:!1}).inject(I);L.getContent().style.width="21.9%",L.getContent().style.verticalAlign="top",L.getContent().id="DefaultMaterialQuality"+this.DYNAMIC_STRING,L.tooltipInfos=new p({shortHelp:""});this.touch;h.addEventListener("click",(function(){"none"==S.style.display?(S.setStyles({display:"inline-block"}),h.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS}):(t.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),S.setStyles({display:"none"}),h.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS})})),this.touch&&(d.setStyles({width:"950px",height:"46px"}),u.setStyles({width:"267px"}),m.getContent().style.width="260px",y.getContent().style.width="260px",S.setStyles({width:"950px"}),x.setStyles({height:"46px"}),v.setStyles({width:"294px"}),C.getContent().style.width="220px",f.getContent().style.width="220px",I.setStyles({height:"46px"}),A.setStyles({width:"294px"}),E.getContent().style.width="220px",L.getContent().style.width="220px"),e.propertiesStatic.Material={},e.propertiesStatic.Material.presetCombo=m,e.propertiesStatic.Material.flakesQualityCombo=C,e.propertiesStatic.Material.defaultMaterialQualityCombo=E,e.propertiesDynamic.Material={},e.propertiesDynamic.Material.presetCombo=y,e.propertiesDynamic.Material.flakesQualityCombo=f,e.propertiesDynamic.Material.defaultMaterialQualityCombo=L,e.addEventListenerPropertyPreset("Material",m,this.RenderMode_Static_Str),e.addEventListenerPropertyPreset("Material",y,this.RenderMode_Dynamic_Str),e.addEventListenerComboBox("Material",C,this.RenderMode_Static_Str),e.addEventListenerComboBox("Material",f,this.RenderMode_Dynamic_Str),e.addEventListenerComboBox("Material",E,this.RenderMode_Static_Str),E.addEventListener("change",(function(){var e=E.currentValue;L.currentValue=e})),e.labelElements.MaterialLabel=u,e.labelElements.FlakesQualityLabel=v,e.labelElements.DefaultMaterialQualityLabel=A,e.staticHelpElements.MaterialControl=m,e.staticHelpElements.FlakesQualityControl=C,e.staticHelpElements.DefaultMaterialQualityControl=E,e.dynamicHelpElements.MaterialControl=y,e.dynamicHelpElements.FlakesQualityControl=f,e.dynamicHelpElements.DefaultMaterialQualityControl=L;var M=0;return this._effectSettings._isNotAvailableSetting("FlakesQuality")&&(this._toHide.push(x),M++),this._effectSettings._isNotAvailableSetting("DefaultMaterialQuality")&&(this._toHide.push(I),M++),2===M&&this._toHide.push(t),t},m.prototype.buildDownsamplingView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),l=new UWA.Element("div",{class:"wux-container"}).inject(t),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Downsampling Factor"}).inject(l);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"198px"}),s.setStyle("vertical-align","top");var o=new c({minValue:.4,maxValue:1,decimals:1,stepValue:.1,initialValue:1}).inject(l);if(o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.elements.slider.getContent().style.width="99px",o.elements.slider.getContent().style.height="20px",o.elements.spinBox.getContent().style.minWidth="60px",o.elements.spinBox.getContent().style.width="60px",o.elements.spinBox.getContent().style.verticalAlign="bottom",o.getContent().id="Downsampling"+this.STATIC_STRING,o.setTooltips(""),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(l);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(l);var a=new c({minValue:.4,maxValue:1,decimals:1,stepValue:.1,initialValue:1}).inject(l);return a.getContent().style.display="inline-block",a.getContent().style.verticalAlign="top",a.elements.slider.getContent().style.width="99px",a.elements.slider.getContent().style.height="20px",a.elements.spinBox.getContent().style.minWidth="60px",a.elements.spinBox.getContent().style.width="60px",a.elements.spinBox.getContent().style.verticalAlign="bottom",a.getContent().id="Downsampling"+this.DYNAMIC_STRING,a.setTooltips(""),this.touch&&(t.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),o.elements.spinBox.getContent().style.width="145px",o.elements.slider.getContent().style.width="105px",o.elements.slider.getContent().style.height="40px",a.elements.spinBox.getContent().style.width="145px",a.elements.slider.getContent().style.width="105px",a.elements.slider.getContent().style.height="40px"),e.propertiesStatic.Downsampling={},e.propertiesStatic.Downsampling.downsamplingSpinBox=o,e.propertiesDynamic.Downsampling={},e.propertiesDynamic.Downsampling.downsamplingSpinBox=a,e.addEventListenerSpinBox("Downsampling",o,this.RenderMode_Static_Str),o.elements.spinBox.addEventListener("change",(function(e){o._createEvents();var t=o.elements.spinBox.value;a.setValue(t)})),e.labelElements.DownsamplingLabel=s,e.staticHelpElements.DownsamplingControl=o,e.dynamicHelpElements.DownsamplingControl=a,this._effectSettings._isNotAvailableSetting("Downsampling")&&(this._toHide.push(l),this._toHide.push(t)),t},m.prototype.getPresetCombo=function(){for(var e=[g.Elements.Low,g.Elements.Medium,g.Elements.High,g.Elements.Ultra,g.Elements.Default,g.Elements.Custom].concat(this.extraPresets),t=["Low","Medium","High","Ultra","Default","Custom"].concat(this.extraPresets),i=[],n=0;n<e.length;n++)i[n]={labelItem:e[n],valueItem:t[n]};var l=new r({elementsList:i,selectedIndex:1,enableSearchFlag:!1});return l.getContent().id="CustomPreset",l},m.prototype.addEventListenerComboBox=function(e,t,i){var n=this;this.listenables[i].push(t),t.addEventListener("change",(function(){var l=t.getContent().id.toString(),s=l.indexOf("_MODE_"),o=l.substring(0,s),a=t.currentValue;n.DoUpdatePropertyCombo()&&(n.attribElementInteraction=!0,n.updateAttribute(e,o,a,i),n.attribElementInteraction=!1)}))},m.prototype.addEventListenerSpinBox=function(e,t,i){var n=this;t.elements.slider.addEventListener("change",(function(e){t._createEvents()})),this.listenables[i].push(t.elements.spinBox),t.elements.spinBox.addEventListener("change",(function(l){t._createEvents();var s=t.getContent().id.toString(),o=s.indexOf("_MODE_"),a=s.substring(0,o),r=t.elements.spinBox.value;n.DoUpdatePropertyCombo()&&(n.attribElementInteraction=!0,n.updateAttribute(e,a,r,i),n.attribElementInteraction=!1)}))},m.prototype.addEventListenerToggle=function(e,t,i){var n=this;this.listenables[i].push(t),t.addEventListener("change",(function(){var l=t.getContent().id.toString(),s=l.indexOf("_MODE_"),o=l.substring(0,s),a=t.checkFlag;if("AllowInterObjectShadows"===o)i==n.RenderMode_Static_Str?(n.propertiesStatic.Shadows.filteringTypeCombo.disabled=!a,n.propertiesStatic.Shadows.filteringQualityCombo.disabled=!a):(n.propertiesDynamic.Shadows.filteringTypeCombo.disabled=!a,n.propertiesDynamic.Shadows.filteringQualityCombo.disabled=!a);n.DoUpdatePropertyCombo()&&(n.attribElementInteraction=!0,n.updateAttribute(e,o,a,i),n.attribElementInteraction=!1)}))},m.prototype.addEventListenerBatchingToggle=function(e,t){var i=this;t.addEventListener("change",(function(){var e=t.checkFlag;i.updateBatching(e)}))},m.prototype.addEventListenerLocalCacheToggle=function(e,t){var i=this;t.addEventListener("change",(function(){var e=t.checkFlag;i.updateLocalCache(e)}))},m.prototype.addEventListenerLDHOpt1ExtendMemoryToggle=function(e,t){var i=this;t.addEventListener("change",(function(){var e=t.checkFlag;i.updateLDHOpt1ExtendMemory(e)}))},m.prototype.addEventListenerLDHOpt2SSBToggle=function(e,t){var i=this;t.addEventListener("change",(function(){var e=t.checkFlag;i.updateLDHOpt2SSB(e)}))},m.prototype.addEventListenerLDHOpt3CompressionToggle=function(e,t){var i=this;t.addEventListener("change",(function(){var e=t.checkFlag;i.updateLDHOpt3Compression(e)}))},m.prototype.addEventListenerLocalCacheSize=function(e,t){var i=this;t.addEventListener("change",(function(e){var n=t.value;i.updateLocalCacheSize(n)}))},m.prototype.updateBatching=function(e){this.batching=!!e},m.prototype.updateLocalCache=function(e){this.localCache=!!e},m.prototype.updateLDHOpt1ExtendMemory=function(e){this.ldhOpt1=!!e},m.prototype.updateLDHOpt2SSB=function(e){this.ldhOpt2=!!e},m.prototype.updateLDHOpt3Compression=function(e){this.ldhOpt3=!!e},m.prototype.updateLocalCacheSize=function(e){this.localCacheSize=e},m.prototype.EnableDisableDynamicControls=function(e,t){var i=this;t.disabled?(i.propertiesDynamic.AntiAliasing.postProcCombo.disabled=!0,i.propertiesDynamic.PixelCulling.pixelCullingSpinBox.setDisabled(!0),i.propertiesDynamic.LOD.LODSpinBox.setDisabled(!0),i.propertiesDynamic.Transparency.transparencyCombo.disabled=!0,i.propertiesDynamic.Shadows.presetCombo.disabled=!0,i.propertiesDynamic.Shadows.groundShadowsToggle.disabled=!0,i.propertiesDynamic.Shadows.interObjectShadowsToggle.disabled=!0,i.propertiesDynamic.Shadows.transObjectShadowsToggle.disabled=!0,i.propertiesDynamic.Shadows.filteringTypeCombo.disabled=!0,i.propertiesDynamic.Shadows.filteringQualityCombo.disabled=!0,i.propertiesDynamic.Reflections.presetCombo.disabled=!0,i.propertiesDynamic.Reflections.reflectionsToggle.disabled=!0,i.propertiesDynamic.Reflections.interObjectReflectionsToggle.disabled=!0,i.propertiesDynamic.Refractions.presetCombo.disabled=!0,i.propertiesDynamic.Refractions.interObjectRefractionsToggle.disabled=!0,i.propertiesDynamic.AmbientOcclusion.SSAOCombo.disabled=!0,i.propertiesDynamic.SectionCapping.SectionCappingCombo.disabled=!0,i.propertiesDynamic.DepthBufferOptions.depthToggle.disabled=!0,i.propertiesDynamic.Material.presetCombo.disabled=!0,i.propertiesDynamic.Material.flakesQualityCombo.disabled=!0,i.propertiesDynamic.Material.defaultMaterialQualityCombo.disabled=!0,i.propertiesDynamic.Downsampling.downsamplingSpinBox.setDisabled(!0)):(i.propertiesDynamic.AntiAliasing.postProcCombo.disabled=!1,i.propertiesDynamic.PixelCulling.pixelCullingSpinBox.setDisabled(!1),i.propertiesDynamic.LOD.LODSpinBox.setDisabled(!1),i.propertiesDynamic.Transparency.transparencyCombo.disabled=!1,i.propertiesDynamic.Shadows.presetCombo.disabled=!1,i.propertiesDynamic.Shadows.groundShadowsToggle.disabled=!1,i.propertiesDynamic.Shadows.interObjectShadowsToggle.disabled=!1,i.propertiesDynamic.Shadows.transObjectShadowsToggle.disabled=!1,i.updateParameterDependencies(),i.propertiesDynamic.Reflections.presetCombo.disabled=!1,i.propertiesDynamic.Reflections.reflectionsToggle.disabled=!1,i.propertiesDynamic.Reflections.interObjectReflectionsToggle.disabled=!1,i.propertiesDynamic.Refractions.presetCombo.disabled=!1,i.propertiesDynamic.Refractions.interObjectRefractionsToggle.disabled=!1,i.propertiesDynamic.AmbientOcclusion.SSAOCombo.disabled=!1,i.propertiesDynamic.SectionCapping.SectionCappingCombo.disabled=!1,i.propertiesDynamic.DepthBufferOptions.depthToggle.disabled=!1,i.propertiesDynamic.Material.presetCombo.disabled=!1,i.propertiesDynamic.Material.flakesQualityCombo.disabled=!1,i.propertiesDynamic.Material.defaultMaterialQualityCombo.disabled=!0,i.propertiesDynamic.Downsampling.downsamplingSpinBox.setDisabled(!0))},m.prototype.initializedUIfromDB=function(){var e=this;e.uiInitialization=!0;var i=t.getCurrentGlobalPreset(this.RenderMode_Static_Str),n=t.getCurrentGlobalPreset(this.RenderMode_Dynamic_Str);for(var l in e.globalPrestButtonInteraction=!0,e.updateGlobalPresetUI(i,e.RenderMode_Static_Str),e.updateGlobalPresetUI(n,e.RenderMode_Dynamic_Str),e.globalPrestButtonInteraction=!1,e.propertyPresetButtonInteraction=!0,e.propertiesStatic)"Global"!=l&&e.updatePropertyUI(l,i,this.RenderMode_Static_Str);for(var l in e.propertiesDynamic)"Global"!=l&&e.updatePropertyUI(l,n,this.RenderMode_Dynamic_Str);e.propertyPresetButtonInteraction=!1,e.uiInitialization=!1,this.updateParameterDependencies()},m.prototype.updateParameterDependencies=function(){var e=this;e.propertiesStatic.Shadows.filteringTypeCombo.disabled=!e.propertiesStatic.Shadows.interObjectShadowsToggle.checkFlag,e.propertiesDynamic.Shadows.filteringTypeCombo.disabled=!e.propertiesDynamic.Shadows.interObjectShadowsToggle.checkFlag,e.propertiesStatic.Shadows.filteringQualityCombo.disabled=!e.propertiesStatic.Shadows.interObjectShadowsToggle.checkFlag,e.propertiesDynamic.Shadows.filteringQualityCombo.disabled=!e.propertiesDynamic.Shadows.interObjectShadowsToggle.checkFlag},m.prototype.DoUpdatePropertyCombo=function(){var e=!1;return this.globalPrestButtonInteraction||this.propertyPresetButtonInteraction||this.uiInitialization||(e=!0),e},m.prototype.DoUpdatePresetButtonGroup=function(){var e=!1;return this.attribElementInteraction||this.globalPrestButtonInteraction||this.uiInitialization||(e=!0),e},m.prototype.addEventListenerPropertyPreset=function(e,t,i){var n=this;t.addEventListener("change",(function(){var l=t.currentValue;n.DoUpdatePresetButtonGroup()&&(n.propertyPresetButtonInteraction=!0,n.globalPrestButtonInteraction=!0,n.updateProperty(e,l,i),n.updateGlobalPresetUI("Custom",i),n.globalPrestButtonInteraction=!1,n.propertyPresetButtonInteraction=!1)}))},m.prototype.updateProperty=function(e,i,n){t.setProperty(n,i,e),this.updatePropertyUI(e,i,n)},m.prototype.updatePropertyUI=function(i,n,l,s=!1){var o=t.getPresetValue(l,n);if(!e.is(o))return!1;var a=o[i];if(!e.is(a))return!1;if("Custom"==n&&(n=a.Preset),this.updatePropertyPresetUI(i,n,l),!s){var r=null;switch(l===this.RenderMode_Static_Str?r=this.propertiesStatic:l===this.RenderMode_Dynamic_Str&&(r=this.propertiesDynamic),i){case"AntiAliasing":r[i].postProcCombo.currentValue=a.AntiAliasing;break;case"PixelCulling":r[i].pixelCullingSpinBox.setValue(a.PixelCulling);break;case"LOD":r[i].LODSpinBox.setValue(a.LOD);break;case"Transparency":{let e=a.Transparency;"PerPixelLinkedList"!==e||this._webGLV6Viewer._use_webgpu||(e="WeightedAverage"),r[i].transparencyCombo.currentValue=e;break}case"Shadows":r[i].filteringTypeCombo.currentValue=a.ShadowFilter,r[i].filteringQualityCombo.currentValue=a.ShadowQuality,r[i].groundShadowsToggle.checkFlag=a.AllowGroundShadows,r[i].interObjectShadowsToggle.checkFlag=a.AllowInterObjectShadows,r[i].transObjectShadowsToggle.checkFlag=a.AllowTransparentObjectShadows;break;case"Reflections":r[i].reflectionsToggle.checkFlag=a.AllowGroundReflection,r[i].interObjectReflectionsToggle.checkFlag=a.AllowInterObjectReflections;break;case"Refractions":r[i].interObjectRefractionsToggle.checkFlag=a.AllowInterObjectRefractions;break;case"AmbientOcclusion":r[i].SSAOCombo.currentValue=a.AmbientOcclusionNbSamples;break;case"SectionCapping":r[i].SectionCappingCombo.currentValue=a.SectionCapping;break;case"DepthBufferOptions":r[i].depthToggle.checkFlag=a.DepthFlickeringReduction;break;case"Material":if(r[i].flakesQualityCombo.currentValue=a.FlakesQuality,l===this.RenderMode_Dynamic_Str)break;this.propertiesStatic[i].defaultMaterialQualityCombo.currentValue=a.DefaultMaterialQuality;break;case"Downsampling":if(l===this.RenderMode_Dynamic_Str)break;this.propertiesStatic[i].downsamplingSpinBox.setValue(a.Downsampling)}}},m.prototype.updatePropertyPresetUI=function(t,i,n){if("Shadows"===t.toString()||"Reflections"===t.toString()||"Refractions"===t.toString()||"Material"===t.toString()){var l=null;n===this.RenderMode_Static_Str?l=this.propertiesStatic:n===this.RenderMode_Dynamic_Str&&(l=this.propertiesDynamic);var s=l[t];if(e.is(s)){var o=s.presetCombo;e.is(o)&&(o.currentValue=i)}}},m.prototype.updateAttribute=function(e,i,n,l){if(t.setAttribute(l,"Custom",e,i,n),this.updatePropertyUI(e,"Custom",l,!0),this.updateGlobalPresetUI("Custom",l),!this._updatingAttribute){this._updatingAttribute=!0;for(var s=0;s<this.listenables[l].length;s++){var o=this.listenables[l][s];o.fire?o.fire("change"):o.dispatchEvent(new Event("change"))}this._updatingAttribute=!1}},m.prototype.updateGlobalPresetUI=function(e,i){var n=null;i===this.RenderMode_Static_Str?n=this.propertiesGlobal.Global.staticCombo:i===this.RenderMode_Dynamic_Str&&(n=this.propertiesGlobal.Global.dynamicCombo),t.setGlobalPresetOnDB(i,e,!1),n.currentValue=e},m})),define("DS/QualityManagerUI/QMUIPresetSelectionDlg",["UWA/Core","DS/QualityManager/QMController","DS/QualityManagerUI/QMUIAdvancedPresetSelectionDlg","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ComboBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager","DS/Utilities/TouchUtils","DS/Controls/Label","i18n!DS/QualityManagerUI/assets/nls/translation"],(function(e,t,i,n,l,s,o,a,r,c,p,d){"use strict";var h=!1,u=function(e){this.options=e,this.options.initCB=this.options.initCB||function(e){},this.options.closeCB=this.options.closeCB||function(e){},this.options.swapStartCB=this.options.swapStartCB||function(){},this.options.swapEndCB=this.options.swapEndCB||function(){},this._doNotValidate=!1,this.init()};return u.prototype.init=function(){this._webGLV6Viewer=this.options.viewer,this._immersiveFrame=this.options.immersiveFrame,this.touch=c.getTouchMode(),this._mobile=this._webGLV6Viewer.mobile,this.notAvailable=!1,"undefined"!=typeof widget?r.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang"):r.DEFAULT_LANGUAGE="en";const e=this;r.loadResource({resourceFile:"QualityManagerUI/QualityManager"}),r.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},(function(){e.mbdResources=this,e.updateUILabelTooltip()})),this.extraPresets=[];let i=new Set;for(let e=0;e<t.getImportedPresets().length;e++)i.add(t.getImportedPresets()[e]);for(let e=0;e<t.getLocalPresets().length;e++)i.add(t.getLocalPresets()[e]);i.forEach(((t,i,n)=>{e.extraPresets.push(t)})),this.properties={},this.labelElements={},this.helpElements={},this.notAvailable?this.buildNotAvailableDialog():this._mobile?(this.buildMobileDialog(),this.initializedUIfromDB()):(this.buildDialog(),this.initializedUIfromDB()),this.mbdResources&&this.updateUI()},u.prototype.updateUILabelTooltip=function(){this.QMUIPresetSelectionDlg&&this.updateUI()},u.prototype.updateUI=function(){var e=this,t=e.GetResString("VisualQuality");if(null!=t&&""!==t&&(e.QMUIPresetSelectionDlg.title=e.GetLabel(t)),!this.notAvailable){for(var i in e.labelElements){var n=e.GetResString(i);null!=n&&""!==n&&(e.labelElements[i].textContent=e.GetLabel(n))}for(var i in e.helpElements){var l=e.GetResString(i);null!=l&&""!==l&&(e.helpElements[i].tooltipInfos.shortHelp=e.GetHelp(l))}}},u.prototype.GetResString=function(e){var t="";return this.mbdResources&&(t=this.mbdResources.getKey({key:e})),t},u.prototype.GetLabel=function(e){var t="";return void 0!==e.Text&&(t=e.Text),t},u.prototype.GetHelp=function(e){var t="";return void 0!==e.Tooltip&&(t=e.Tooltip),t},u.prototype.buildMobileDialog=function(){var e=this,t=UWA.createElement("div",{class:"wux-container",style:{"vertical-align":"top"}});e.buildMobileViewContent().inject(t);var i=new l;i.getContent().id="OKButton";var n=new l;n.getContent().id="CancelButton",e.QMUIPresetSelectionDlg=new s({title:"Visual Quality",content:t,immersiveFrame:e._immersiveFrame,closeButtonFlag:!e._mobile,ResizableFlag:!1,position:{of:e._immersiveFrame.getFreeZone()},identifier:"WebVisuVisualQuality-"+e._immersiveFrame.identifier,buttons:{Ok:i,Cancel:n},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea}),e.QMUIPresetSelectionDlg.getContent().id="RasterizerVisualQuality",this.touch&&(e.QMUIPresetSelectionDlg.touchMode=!0),e.options.initCB(this),e.QMUIPresetSelectionDlg.addEventListener("close",(function(){e._validate(),e.options.closeCB(e)})),e.QMUIPresetSelectionDlg.buttons.Ok.addEventListener("click",(function(){e.validate()})),e.QMUIPresetSelectionDlg.buttons.Cancel.addEventListener("click",(function(){e.invalidate()}))},u.prototype.buildNotAvailableDialog=function(){var e=this,i=UWA.createElement("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}});i.setText(d.MobileMessage);var n=new l;n.getContent().id="OKButton",e.QMUIPresetSelectionDlg=new s({title:"Visual Quality",content:i,immersiveFrame:e._immersiveFrame,ResizableFlag:!1,width:320,position:{of:e._immersiveFrame.getFreeZone()},identifier:"WebVisuVisualQuality-"+e._immersiveFrame.identifier,buttons:{Ok:n},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea}),e.options.initCB(this),e.QMUIPresetSelectionDlg.addEventListener("close",(function(){t.commitToDB(),e.options.closeCB(e)})),e.QMUIPresetSelectionDlg.buttons.Ok.addEventListener("click",(function(){e.invalidate()}))},u.prototype.buildDialog=function(){var e=this,t=UWA.createElement("div",{class:"wux-container",style:{"vertical-align":"top"}}),i=new l;i.getContent().id="OKButton";var n=new l;n.getContent().id="CancelButton",e.buildViewContent().inject(t),e.QMUIPresetSelectionDlg=new s({title:"Visual Quality",content:t,immersiveFrame:e._immersiveFrame,ResizableFlag:!1,width:320,position:{of:e._immersiveFrame.getFreeZone()},identifier:"WebVisuVisualQuality-"+e._immersiveFrame.identifier,buttons:{Ok:i,Cancel:n},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea}),e.QMUIPresetSelectionDlg.getContent().id="RasterizerVisualQuality",this.touch&&(e.QMUIPresetSelectionDlg.touchMode=!0),e.options.initCB(this),e.QMUIPresetSelectionDlg.addEventListener("close",(function(){e._validate(),e.options.closeCB(e)})),e.QMUIPresetSelectionDlg.buttons.Ok.addEventListener("click",(function(){e.validate()})),e.QMUIPresetSelectionDlg.buttons.Cancel.addEventListener("click",(function(){e.invalidate()}))},u.prototype._validate=function(){this._doNotValidate||(this._doNotValidate=!0,t.commitToDB())},u.prototype.validate=function(){this._validate(),this.QMUIPresetSelectionDlg.close()},u.prototype.invalidate=function(){t.restoreFromDB(),this.QMUIPresetSelectionDlg.close()},u.prototype.buildMobileViewContent=function(){for(var e=this,i=UWA.createElement("div",{class:"wux-container"}),n=[d.Elements.Low,d.Elements.Medium,d.Elements.High,d.Elements.Ultra,d.Elements.Default].concat(this.extraPresets),s=["Low","Medium","High","Ultra","Default"].concat(this.extraPresets),r=[],c=0;c<n.length;c++)r[c]={labelItem:n[c],valueItem:s[c]};var h="Static mode",u=e.GetResString("StaticModeLabel");null!=u&&""!==u&&(h=e.GetLabel(u));var g=new p({value:h,maxDisplayLength:25}).inject(i);g.getContent().style.background="transparent",g.getContent().style.fontWeight="bold";var m=new o({elementsList:r,selectedIndex:4,touchMode:!0,enableSearchFlag:!1}).inject(i);m.getContent().id="Static",m.getContent().style.width="90%",m.tooltipInfos=new a({shortHelp:"Change all parameters to selected preset."}),e.labelElements.StaticModeLabel=g,e.helpElements.StaticMode=m,this.properties.Static={},this.properties.Static.staticComboBox=m,this.addEventListenerComboBox(m),new UWA.Element("br").inject(i),this.buttonIconUnlinked={iconName:"link-off",fontIconFamily:WUXManagedFontIcons.Font3DS},this.buttonIconLinked={iconName:"link",fontIconFamily:WUXManagedFontIcons.Font3DS},this.buttonLabelLinked="Linked",this.buttonLabelUnLinked="Unlinked";var y=e.GetResString("Link");null!=y&&""!==y&&(this.buttonLabelLinked=e.GetLabel(y));var S=e.GetResString("Unlink");null!=S&&""!==S&&(this.buttonLabelUnLinked=e.GetLabel(S)),new UWA.Element("br").inject(i),e.linkButton=new l({displayStyle:"normal",label:e.buttonLabelUnLinked,showLabelFlag:!0,icon:e.buttonIconUnlinked,type:"check"}).inject(i),e.linkButton.getContent().id="Link",e.linkButton.tooltipInfos=new a({shortHelp:"Link / Unlink static and dynamic preset."}),e.helpElements.LinkControl=e.linkButton,new UWA.Element("br").inject(i);var w="Dynamic mode",b=e.GetResString("DynamicModeLabel");null!=b&&""!==b&&(w=e.GetLabel(b));var x=new p({value:w,maxDisplayLength:25}).inject(i);x.getContent().style.background="transparent",x.getContent().style.fontWeight="bold";var v=new o({elementsList:r,selectedIndex:4,touchMode:!0,enableSearchFlag:!1,disabled:!1}).inject(i);return v.getContent().id="Dynamic",v.getContent().style.width="90%",v.tooltipInfos=new a({shortHelp:"Change all parameters to selected preset."}),e.labelElements.DynamicModeLabel=x,e.helpElements.DynamicMode=v,this.properties.Dynamic={},this.properties.Dynamic.dynamicComboBox=v,this.addEventListenerComboBox(v),e.linkButton.addEventListener("buttonclick",(function(){v.disabled?(t.setLinkedPresetStatus(!1),e.linkButton.icon=e.buttonIconUnlinked,e.linkButton.label=e.buttonLabelUnLinked,v.disabled=!1):(t.setLinkedPresetStatus(!0),e.linkButton.icon=e.buttonIconLinked,e.linkButton.label=e.buttonLabelLinked,v.disabled=!0)})),i},u.prototype.buildViewContent=function(){for(var e=this,t=UWA.createElement("div",{class:"wux-container"}),i=[d.Elements.Low,d.Elements.Medium,d.Elements.High,d.Elements.Ultra,d.Elements.Default,d.Elements.Custom].concat(this.extraPresets),n=["Low","Medium","High","Ultra","Default","Custom"].concat(this.extraPresets),l=[],s=0;s<i.length;s++)l[s]={labelItem:i[s],valueItem:n[s]};var o=UWA.createElement("div",{class:"wux-container"}).inject(t);o.setStyles({display:"grid","grid-template-columns":"auto fit-content(100%)","grid-template-rows":"auto auto auto","grid-column-gap":"5px","grid-row-gap":"14px"}),e.buildStaticView(l).inject(UWA.createElement("div",{class:"wux-container"}).inject(o)),e.buildDynamicView(l).inject(UWA.createElement("div",{class:"wux-container"}).inject(o));var a=UWA.createElement("div",{class:"wux-container"}).inject(o);return a.setStyles({display:"flex","grid-column":"2/3","grid-row":"1/3"}),e.buildLinkButtonView().inject(a),(a=UWA.createElement("div",{class:"wux-container"}).inject(o)).setStyles({display:"flex","grid-column":"1/3","grid-row":"3/4"}),this._mobile&&"true"!==localStorage.getItem("__WEBVISU_MOBILE_QM_WITH_ADVANCED__")||e.buildCustomizeButtonView().inject(a),t},u.prototype.buildLinkButtonView=function(){var e=this,i=UWA.createElement("div",{class:"wux-container"});i.setStyles({display:"flex",width:"20px"});var s=new UWA.Element("div",{class:"wux-container"}).inject(i);s.setStyles({"margin-top":"auto","margin-bottom":"auto"});new l({disabled:!1,displayStyle:"lite",icon:n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinkLines.png"}).inject(s);var o=new UWA.Element("div",{class:"wux-container"}).inject(i);o.setStyles({position:"relative",left:"-20px","margin-top":"auto","margin-bottom":"auto"}),e.linkButton=new l({disabled:!1,displayStyle:"lite",icon:n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png"}).inject(o),e.linkButton.getContent().id="Link",e.linkButton.tooltipInfos=new a({shortHelp:"Link / Unlink static and dynamic preset."}),e.helpElements.LinkControl=e.linkButton;var r=this.properties.Dynamic.dynamicComboBox;return e.linkButton.addEventListener("buttonclick",(function(){r.disabled?(t.setLinkedPresetStatus(!1),e.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png",r.disabled=!1):(t.setLinkedPresetStatus(!0),e.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png",r.disabled=!0)})),i},u.prototype.buildCustomizeButtonView=function(){var e=this,t=UWA.createElement("div",{class:"wux-container"});t.setStyles({width:"100%"});var s=new l({label:d.AdvancedSettings,icon:{iconName:"cog",fontIconSize:"1x",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(t);s.getContent().style.width="100%",s.getContent().id="ButtonAdvancedSettings",s.tooltipInfos=new a({shortHelp:"Click to edit custom preset (static and dynamic mode)"}),e.helpElements.AdvancedSettings=s;var o=this.options,r=this.properties.Dynamic.dynamicComboBox;return s.addEventListener("click",(function(){e._doNotValidate=!0,e.options.swapStartCB(),e.QMUIPresetSelectionDlg.close();var t=new i(o);r.disabled?(t.dynamicCombo.disabled=!0,t.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png",t.EnableDisableDynamicControls(t.linkButton,t.dynamicCombo)):(t.dynamicCombo.disabled=!1,t.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png",t.EnableDisableDynamicControls(t.linkButton,t.dynamicCombo)),e.options.swapEndCB()})),t},u.prototype.buildStaticView=function(e){var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({"justify-content":"space-between",display:"flex"});var i=new UWA.Element("div",{class:"wux-control-inline-container",text:"Static mode"}).inject(t);i.setStyles({"margin-bottom":"auto","margin-top":"auto"});var n=new o({elementsList:e,selectedIndex:4,enableSearchFlag:!1}).inject(t);return n.getContent().id="Static",n.tooltipInfos=new a({shortHelp:"Change all parameters to selected preset."}),this.labelElements.StaticModeLabel=i,this.helpElements.StaticMode=n,this.properties.Static={},this.properties.Static.staticComboBox=n,this.addEventListenerComboBox(n),t},u.prototype.buildDynamicView=function(e){var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({"justify-content":"space-between",display:"flex"});var i=new UWA.Element("div",{class:"wux-control-inline-container",text:"Dynamic mode"}).inject(t);i.setStyles({"margin-bottom":"auto","margin-top":"auto"});var n=new o({elementsList:e,selectedIndex:4,enableSearchFlag:!1,disabled:!1}).inject(t);return n.getContent().id="Dynamic",n.tooltipInfos=new a({shortHelp:"Change all parameters to selected preset."}),this.labelElements.DynamicModeLabel=i,this.helpElements.DynamicMode=n,this.properties.Dynamic={},this.properties.Dynamic.dynamicComboBox=n,this.addEventListenerComboBox(n),t},u.prototype.addEventListenerComboBox=function(e){e.addEventListener("change",(function(){if(!h){var i=e.getContent().id,n=e.currentValue;t.setGlobalPreset(i,n,!1)}}))},u.prototype.initializedUIfromDB=function(){var e=this;h=!0;var i=t.getCurrentGlobalPreset("Static");this.properties.Static.staticComboBox.currentValue=i;var l=t.getCurrentGlobalPreset("Dynamic");this.properties.Dynamic.dynamicComboBox.currentValue=l;var s=this.properties.Dynamic.dynamicComboBox;t.getLinkedPresetStatus()&&(s.disabled=!0,e._mobile?(e.linkButton.icon=e.buttonIconLinked,e.linkButton.label=e.buttonLabelLinked,e.linkButton.checkFlag=!0):e.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png"),h=!1},u})),define("DS/QualityManagerUI/SliderSpinBox",["UWA/Core","DS/Controls/Slider","DS/Controls/SpinBox","DS/Controls/TooltipModel","UWA/Controls/Abstract"],(function(e,t,i,n){"use strict";return e.Controls.Abstract.extend({init:function(e){this._parent(e),this.recId=e.recId||null,this.isExponential=e.isExponential||!1,this.isLogarithmic=e.isLogarithmic||!1,this.isLinear=e.isLinear||!1,this.minValue=e.minValue,this.spinBoxMaxValue=e.maxValue,this.sliderMaxValue=this.spinBoxMaxValue,this.initialValue=e.initialValue,this.spinBoxStepValue=e.stepValue,this.sliderStepValue=this.spinBoxStepValue,this._value=this.initialValue,this.sliderMinValue=this.minValue,this.sliderInitialValue=this.initialValue,this.decimals=e.decimals,(this.isLogarithmic||this.isExponential||this.isLinear)&&(this.sliderMaxValue=e.sliderMaxValue,this.sliderMinValue=e.sliderMinValue,this.sliderInitialValue=e.sliderInitialValue),this.spinSoftLimitMax=e.spinSoftLimitMax||this.spinBoxMaxValue,this.spinSoftLimitMin=e.spinSoftLimitMin||this.minValue,this.spinHardLimitMax=e.spinHardLimitMax||this.spinBoxMaxValue,this.spinHardLimitMin=e.spinHardLimitMin||this.minValue,this.sliderSoftLimitMax=e.sliderSoftLimitMax||null,this.sliderSoftLimitMin=e.sliderSoftLimitMin||null,this.sliderHardLimitMax=e.sliderHardLimitMax||null,this.sliderHardLimitMin=e.sliderHardLimitMin||null,this.minv=this.spinSoftLimitMin,this.maxv=this.spinSoftLimitMax,this.scale=(Math.log(this.spinSoftLimitMax)-Math.log(this.spinSoftLimitMax))/(this.sliderMaxValue-this.sliderMinValue),this.step=(this.spinSoftLimitMax-this.spinSoftLimitMin)/(this.sliderMaxValue-this.sliderMinValue),this.iPixels=100,this.b=this._optimizeBVal(this.spinSoftLimitMin,this.spinSoftLimitMax,this.spinBoxStepValue,this.iPixels),this.UserEdited=!1,this._createLayout()},setValue:function(e){if(void 0!==e&&!(e<this.minValue||e>this.spinBoxMaxValue))if(this._value=e,this.isExponential||this.isLogarithmic||this.isLinear){if(this.elements.spinBox.value=e,this.isExponential){var t=Math.round(Math.log2(e));this.value=Math.pow(2,t),this.elements.slider.value=t}else if(this.isLogarithmic){var i=Math.round(this.iPixels*((Math.log(e+this.b)-Math.log(this.minv+this.b))/(Math.log(this.maxv+this.b)-Math.log(this.minv+this.b))));this.value=e,this.elements.slider.value=i,this.elements.spinBox.value=e}else if(this.isLinear){var n=Math.round(this.sliderMinValue+(e-this.minValue)/this.step);this.value=(n-this.sliderMinValue)*this.step+this.minValue,this.elements.slider.value=n,this.elements.spinBox.value=e}}else this.elements.spinBox.value=e,this.elements.slider.value=e},getValue:function(){return this._value},setDisabled:function(e){this.elements.spinBox.disabled=e,this.elements.slider.disabled=e},setTooltips:function(e){var t=new n({shortHelp:e});this.elements.spinBox.tooltipInfos=t},setHide:function(e){this.elements.spinBox.getContent().style.display=e,this.elements.slider.getContent().style.display=e,this.elements.slider.getContent().style.height="10px"},_createLayout:function(){this.elements.container=e.createElement("div",{Class:"dx-slider-spinbox-container"});var n=e.Element("div",{class:"wux-container"}),l=new e.Element("div",{class:"wux-control-inline-container"}).inject(n);this.elements.slider=new t({minValue:this.sliderMinValue,maxValue:this.sliderMaxValue,stepValue:this.sliderStepValue,value:this.sliderInitialValue}).inject(l),this.elements.slider.getContent().style.width="100px",this.elements.slider.getContent().style.height="10px",this.slider=this.elements.slider;var s=new e.Element("div",{class:"wux-control-inline-container"}).inject(n);this.elements.spinBox=new i({minValue:this.minValue,maxValue:this.spinBoxMaxValue,stepValue:this.spinBoxStepValue,value:this.initialValue,decimals:this.decimals}).inject(s),this.elements.spinBox.getContent().style.width="100px",n.inject(this.elements.container)},_createEvents:function(){var e=this;e.elements.slider.addEventListener("change",(function(t){var i=t.dsModel.value;if(e.options.isExponential){if(i=Math.pow(2,i),e.value===i)return}else if(e.options.isLogarithmic){if(i>=0&&i<1&&"PathTerminationDepth"==e.recId)return e.elements.slider.value=0,void(e.elements.spinBox.value=0);if(1==i&&"PathTerminationDepth"==e.recId)return e.elements.slider.value=1,void(e.elements.spinBox.value=1);if(i=Math.exp((Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))*i*.01+Math.log(e.minv+e.b))-e.b,e.value===i.toFixed())return}else if(e.options.isLinear&&(i=(t.dsModel.value-e.sliderMinValue)*e.step+e.minValue,e.value===i))return;e.value!==i&&(e.value=i,e.setSpinBox=!0,e.elements.spinBox.value=i)})),e.elements.spinBox.addEventListener("change",(function(t){var i=t.dsModel.value,n=Math.round(Math.log2(i));if(e.options.isExponential){if(e.value===i)return;i<e.spinHardLimitMax&&i>e.spinSoftLimitMax?e.elements.slider.maxValue=e.sliderHardLimitMax:e.elements.slider.maxValue=e.sliderSoftLimitMax,i!=t.dsModel.valueToCommit?(n=i>=t.dsModel.valueToCommit?Math.ceil(Math.log2(i)):Math.floor(Math.log2(i)),i=Math.pow(2,n),e.value=i,e.elements.spinBox.value=i):(n=Math.round(Math.log2(i)),i=Math.pow(2,n),e.value=i,e.elements.spinBox.value=i),e.elements.slider.value=e._actualValueToSliderValue(n)}else if(e.options.isLogarithmic){if(i>=0&&i<1&&"PathTerminationDepth"==e.recId)return e.elements.spinBox.value=0,void(e.elements.slider.value=0);i!=t.dsModel.valueToCommit?e.UserEdited=!1:e.UserEdited=!0;var l=i.toFixed();e.UserEdited?l<=e.spinHardLimitMax&&l>e.spinSoftLimitMax||i>=e.spinHardLimitMin&&i<e.spinSoftLimitMin?(e.minv=e.spinHardLimitMin,e.b=e._optimizeBVal(e.spinHardLimitMin,e.spinHardLimitMax,e.spinBoxStepValue,e.iPixels),e.maxv=e.spinHardLimitMax):(e.minv=e.spinSoftLimitMin,e.b=e._optimizeBVal(e.spinSoftLimitMin,e.spinSoftLimitMax,e.spinBoxStepValue,e.iPixels),e.maxv=e.spinSoftLimitMax):e.UserEdited=!1;var s=Math.round(e.iPixels*((Math.log(i+e.b)-Math.log(e.minv+e.b))/(Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))));if(e.value=Math.exp((Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))*s*.01+Math.log(e.minv+e.b))-e.b,e.value===i)return;e.elements.slider.value=s}else if(e.options.isLinear){i!=t.dsModel.valueToCommit?e.UserEdited=!1:e.UserEdited=!0,e.UserEdited&&(i<=e.spinHardLimitMax&&i>e.spinSoftLimitMax||i>=e.spinHardLimitMin&&i<e.spinSoftLimitMin?(e.minValue=e.spinHardLimitMin,e.step=(e.spinHardLimitMax-e.spinHardLimitMin)/(e.sliderMaxValue-e.sliderMinValue)):(e.minValue=e.spinSoftLimitMin,e.step=(e.spinSoftLimitMax-e.spinSoftLimitMin)/(e.sliderMaxValue-e.sliderMinValue)));var o=Math.round(e.sliderMinValue+(t.dsModel.valueToCommit-e.minValue)/e.step);if(e.value=(o-e.sliderMinValue)*e.step+e.minValue,e.value===i)return;e.elements.slider.value=o}else{if(e.value=i,e.value===i)return;e.elements.slider.value=e._actualValueToSliderValue(e.value)}}))},_optimizeBVal:function(e,t,i,n){for(var l=e,s=t,o=.5*(l+s),a=(Math.log(e+i+l),Math.log(e+l),Math.log(t+l),Math.log(e+l),Math.log(e+i+s),Math.log(e+s),Math.log(t+s),Math.log(e+s),n*(Math.log(e+i+o)-Math.log(e+o))/(Math.log(t+o)-Math.log(e+o))),r=0;r<20;r++)a<1?(s=o,a):(l=o,a),o=.5*(l+s),a=n*(Math.log(l+i+o)-Math.log(l+o))/(Math.log(s+o)-Math.log(l+o));return o},_sliderValueToActualValue:function(e){return e},_actualValueToSliderValue:function(e){return e}})}));