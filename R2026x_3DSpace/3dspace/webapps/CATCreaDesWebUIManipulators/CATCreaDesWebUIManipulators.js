define("DS/CATCreaDesWebUIManipulators/CATCrDWebEventsRouter",["UWA/Core","DS/CoreEvents/Events","DS/VisuEvents/EventsManager"],(function(e,t,n){function a(){var e,t,a,r,o=this,i=[],s=[],l=!1,c=0,u=function(e,n){var a;i.sort((function(e,t){var n=e.getPriority();return t.getPriority()-n}));var r=t.pick(n,"rep",!0);if(0!==r.path.length&&!1!==UWA.typeOf(r.position)){r.position.clone();var o=r.path;if(void 0!==o[0]){var s=o[0].getLength(),l=1;for(l=0;l<s;l++){var c=o[0].getElement(l);if(!1!==UWA.typeOf(c)){var u=c.name,p=0;for(p=0;p<i.length;p++){var v=i[p];if(!1!==UWA.typeOf(v)&&u===v._name&&!0===v.isListeningToEvent(e)){a=v;break}}if(!1!==UWA.typeOf(a))break}}}}var C;p=0;if(!1!==UWA.typeOf(a))C=a;else if(i.length>0){var d=i[i.length-1];0===d.getPriority()&&!0===d.isListeningToEvent(e)&&(C=d)}return C},p=function(e,t,n){!1!==UWA.typeOf(e)&&e.dispatchEvent(n,t)},v=function(e){UWA.Event.stop(e),l=!0;var n=new THREEDS.Core.Vector2(0,0),o=e.gesture.getEvents();n=t.getMousePosition(o[0].lastPosition),r=u("CATCrDWeb:beginManipulate",n),!1!==UWA.typeOf(r)?(a.setControlActive(!1),p(r,n,"CATCrDWeb:beginManipulate")):l=!1},C=function(e){UWA.Event.stop(e);var n=new THREEDS.Core.Vector2(0,0),o=e.gesture.getEvents();n=t.getMousePosition(o[0].lastPosition),1==l&&(l=!1,!1!==UWA.typeOf(r)&&p(r,n,"CATCrDWeb:endManipulate")),r=null,a.setControlActive(!0)},d=function(e){UWA.Event.stop(e);var n=new THREEDS.Core.Vector2(0,0),a=e.gesture.getEvents();n=t.getMousePosition(a[0].lastPosition),1==l?!1!==UWA.typeOf(r)&&p(r,n,"CATCrDWeb:manipulate"):(r=u("CATCrDWeb:move",n),!1!==UWA.typeOf(r)&&p(r,n,"CATCrDWeb:move"))},b=function(e){UWA.Event.stop(e);var n=new THREEDS.Core.Vector2(0,0),a=e.gesture.getEvents();n=t.getMousePosition(a[0].lastPosition);var r=u("CATCrDWeb:dblClick",n);!1!==UWA.typeOf(r)&&p(r,n,"CATCrDWeb:dblClick")};o.setFrmWindow=function(n){(e=n).getViewpoint().canvas,t=e._3dViewer,a=e.getViewpoint()},o.getViewpoint=function(){return a},o.getViewer=function(){return t},o.appendManipulator=function(e){return 0===i.length&&!1!==UWA.typeOf(t)&&(n.addEvent(t.canvas,"onLeftMouseDown",v),n.addEvent(t.canvas,"onLeftMouseUp",C),n.addEvent(t.canvas,"onLeftDoubleClick",b),n.addEvent(t.canvas,"onMouseMove",d),n.addEvent(t.canvas,"onTouch",v),n.addEvent(t.canvas,"onSwipe",d),n.addEvent(t.canvas,"onRelease",C),n.addEvent(t.canvas,"onDoubleTap",b)),c++,e.setId(c),i.push(e),c},o.removeManipulator=function(e){var a=0,r=!1;for(a=0;a<i.length;a++)if(i[a]===e){r=!0;break}!0===r&&i.splice(a,1),0===i.length&&(n.removeEvent(t.canvas,"onLeftMouseDown",v),n.removeEvent(t.canvas,"onLeftMouseUp",C),n.removeEvent(t.canvas,"onLeftDoubleClick",b),n.removeEvent(t.canvas,"onMouseMove",d),n.removeEvent(t.canvas,"onTouch",v),n.removeEvent(t.canvas,"onSwipe",d),n.removeEvent(t.canvas,"onRelease",C),n.removeEvent(t.canvas,"onDoubleTap",b))},o.activateManip=function(e){var a;if(void 0!==e){var r=s.length,o=0;for(o=0;o<r&&void 0===a;o++){e===(l=s[0]).getId()&&(0===i.length&&!1!==UWA.typeOf(t)&&(n.addEvent(t.canvas,"onLeftMouseDown",v),n.addEvent(t.canvas,"onLeftMouseUp",C),n.addEvent(t.canvas,"onLeftDoubleClick",b),n.addEvent(t.canvas,"onMouseMove",d),n.addEvent(t.canvas,"onTouch",v),n.addEvent(t.canvas,"onSwipe",d),n.addEvent(t.canvas,"onRelease",C),n.addEvent(t.canvas,"onDoubleTap",b)),i.push(l),s.splice(o,1),a=l)}}else if(s.length>0){var l=s[0];s.splice(0,1),this.appendManipulator(l),l.activate(),a=l}return a},o.deactivateManip=function(e){void 0!==e&&(s.push(e),this.removeManipulator(e))},o.getManip=function(e){var t,n=0;for(n=0;n<s.length;n++){(a=s[n]).getId()===e&&(t=a)}for(n=0;n<i.length;n++){var a;(a=i[n]).getId()===e&&(t=a)}return t}}var r;return UWA.namespace("DS/CATCreaDesWebUIManipulators/CATCrDWebEventsRouter",(function(){return!1===UWA.typeOf(r)&&(r=new a),r}))})),define("DS/CATCreaDesWebUIManipulators/CATCrDWebManipulatorBase",["UWA/Core","DS/CoreEvents/Events"],(function(e,t){"use strict";function n(e,t){var n=[],a=-1;this._name=e;var r=-1;this.beginManipulateEvent=new CustomEvent("CATCrDWeb:ManipBeginManipulate",{detail:{source:this},bubbles:!1,cancelable:!1});this.manipulateEvent=new CustomEvent("CATCrDWeb:ManipManipulate",{detail:{source:this},bubbles:!1,cancelable:!1});this.endManipulateEvent=new CustomEvent("CATCrDWeb:ManipEndManipulate",{detail:{source:this},bubbles:!1,cancelable:!1}),this.setPriority=function(e){a=e},this.getPriority=function(){return a},this.setId=function(e){r=e},this.getId=function(){return r},this.appendEvent=function(e){n.push(e)},this.cleanEvents=function(e){n.length=0},this.isListeningToEvent=function(e){var t=0,a=!1;if(!1!==UWA.typeOf(e))for(t=0;t<n.length;t++){var r=n[t];if(!1!==UWA.typeOf(r)&&r===e){a=!0;break}}return a},this._webGLV6Viewer=t,this.dispatchEvent=function(e,t){switch(e){case"CATCrDWeb:beginManipulate":this.beginManipulate(t);break;case"CATCrDWeb:manipulate":this.manipulate(t);break;case"CATCrDWeb:endManipulate":this.endManipulate(t);break;case"CATCrDWeb:dblClick":this.edit(t);break;case"CATCrDWeb:move":this.move(t)}}}return n.prototype.beginManipulate=function(e){t.publish({event:"CATCrDWeb:ManipBeginManipulate",data:this})},n.prototype.manipulate=function(e){t.publish({event:"CATCrDWeb:ManipManipulate",data:this})},n.prototype.endManipulate=function(e){t.publish({event:"CATCrDWeb:ManipEndManipulate",data:this})},n.prototype.move=function(e){t.publish({event:"CATCrDWeb:Move",data:this})},n.prototype.edit=function(e){},UWA.namespace("DS/CATCreaDesWebUIManipulators/CATCrDWebManipulatorBase",n)})),define("DS/CATCreaDesWebUIManipulators/CATCrDWebPencilManipulator",["UWA/Core","DS/CoreEvents/Events","DS/CATCreaDesWebUIManipulators/CATCrDWebEventsRouter","DS/CATCreaDesWebUIManipulators/CATCrDWebManipulatorBase","DS/CATCreaDesWebUIServices/CATCrDSettings","DS/CATCreaDesWebUIServices/CATCrDWebUIServices","DS/CATCreaDesWebUIServices/CATCrDStrokeInterpreter","DS/CATCreaDesWebUIServices/CATCrDCircle","DS/Visualization/Node3D","DS/Visualization/ThreeJS_DS"],(function(e,t,n,a,r,o,i,s,l,c){"use strict";function u(e,u){var p,v=this,C=u._3dViewer;a.call(v,e,C);var d,b,y,g,h,f,M,m,D,w,A,V,T,W,P,E,S,x=0,z=0,U=!1,L=!1,k=!1;v.setPriority(0),v.appendEvent("CATCrDWeb:beginManipulate"),v.appendEvent("CATCrDWeb:manipulate"),v.appendEvent("CATCrDWeb:endManipulate");var I=new n;!1!==UWA.typeOf(I)&&I.appendManipulator(v);var O=new r;p=O.getSettingsColor(),x=O.getSettingsPencilOpacity(),z=O.getSettingsPencilThickness(),L=O.getSymmetryMode(),w=O.getSettingsSymmetryPlane(),A=O.getSettingsSymmetryPlanePosition(),k=O.getPrimitivesMode(),U=-1,b=[],y=[],g=[],h=[],d=O.getSettingsDrawingPlane(),f=new l("pencilPreviewNode"),D=o.createPencilMaterial(p,x),V=t.subscribe({event:"/CATCrD_Thickness_Changed/"},(function(e){z=O.getSettingsPencilThickness()})),T=t.subscribe({event:"/CATCrD_Opacity_Changed/"},(function(e){x=O.getSettingsPencilOpacity(),D.uniforms.Opacity.value=x,UWA.log("opacity : "+x)})),W=t.subscribe({event:"/CATCrD_Color_Changed/"},(function(e){p=O.getSettingsColor(),D.uniforms.Color.value=p})),P=t.subscribe({event:"/CATCrD_Primitives_Changed/"},(function(e){k=O.getPrimitivesMode()})),E=t.subscribe({event:"/CATCrD_Symmetry_Changed/"},(function(e){L=O.getSymmetryMode()})),S=t.subscribe({event:"/CATCrD_SymmetryPlane_Changed/"},(function(e){w=O.getSettingsSymmetryPlane(),A=O.getSettingsSymmetryPlanePosition()}));var _=v._webGLV6Viewer.getRootNode();_.add(f),v.clean=function(){var e=new n;!1!==UWA.typeOf(e)&&e.removeManipulator(v),v.cleanEvents(),_.remove(f),t.unsubscribe(V),t.unsubscribe(T),t.unsubscribe(W),t.unsubscribe(P),t.unsubscribe(E),t.unsubscribe(S)},v.getPoints=function(){return b},v.getNormals=function(){return y},v.getPointsSym=function(){return h};var R=function(){!1!==UWA.typeOf(M)&&(f.remove(M),M=null),!1!==UWA.typeOf(m)&&(f.remove(m),m=null)};v.beginManipulate=function(e){a.prototype.beginManipulate.call(v,e),b.length=0,y.length=0,g.length=0,h.length=0},v.manipulate=function(e){a.prototype.manipulate.call(v,e);var t,n,r=v._webGLV6Viewer.getRootNode();R();var i=v._webGLV6Viewer.pick(e,"mesh",!0),s=i.path;if(-1===U)if(U=0,0!==s.length)U=1;else for(var l=r.getChildByName("LoadedCGR");!1!==UWA.typeOf(l);){l.name="LoadedCGRNoPick",l.children[0].children[0].setPickable(CATXMLV6.NOPICKABLE),l=r.getChildByName("LoadedCGR")}if(0===s.length&&0===U?(t=i.ray.intersectPlane(d),n=d.normal.clone()):0!==s.length&&!1!==UWA.typeOf(i.normal)&&1===U&&(t=i.position.clone(),n=i.normal.clone()),!1!==UWA.typeOf(t)&&(b.length<1||t.distanceToSquared(b[b.length-1])>.0225*z*z)&&(b.push(t),y.push(n),g.push(e),1==L&&!1!==UWA.typeOf(w))){var c=t.clone().sub(A),u=c.clone().projectOnPlane(w.normal).sub(c).multiplyScalar(2);c.add(u),c.add(A),h.push(c)}b.length>1&&(M=o.createPencilGP(b,y,z,D),f.add(M),v._webGLV6Viewer.render()),1==L&&h.length>1&&(m=o.createPencilGP(h,y,z,D),f.add(m),v._webGLV6Viewer.render())},v.endManipulate=function(e){var t=v._webGLV6Viewer.getRootNode();if(R(),0==U)for(var n=t.getChildByName("LoadedCGRNoPick");!1!==UWA.typeOf(n);){n.name="LoadedCGR",n.children[0].children[0].setPickable(CATXMLV6.PICKABLE),n=t.getChildByName("LoadedCGRNoPick")}if(U=-1,!0===k&&b.length>=2){var r,o,l=(new i).GetResultShape(g);if(1==l)o=[],(r=[]).push((new c.Vector3).copy(b[0])),r.push((new c.Vector3).copy(b[b.length-1])),o.push((new c.Vector3).copy(y[0])),o.push((new c.Vector3).copy(y[y.length-1])),b=r;else if(2==l){var u=new s;u.calculateFromPoints(b,d);var p=c.Math.degToRad(5),C=Math.floor(2*Math.PI/p+.5),f=0,M=2*Math.PI,m=2*Math.PI,D=u.getParam(u._FirstLimit,.001,0,m);0!=D[0]&&(f=D[1],0!=(D=u.getParam(u._SecondLimit,.001,0,m))[0]&&(M=D[D[0]]),M>f?20>(C=Math.floor((M-f)/p+.5))&&(C=20,p=Math.floor((M-f)/(C+1)+.5)):(C=Math.floor((2*Math.PI-f)/p+.5),C+=Math.floor(M/p+.5),20>(C-=1)&&(C=20,p=Math.floor((2*Math.PI-f+M)/(C+1)+.5)))),r=new Array,o=new Array;for(var V=0;V<C;V++)r.push((new c.Vector3).copy(u.evaluate(f))),o.push(d.normal),f+=p;r.push((new c.Vector3).copy(u.evaluate(M))),o.push(d.normal),b=r,y=o}if(-1!=l&&1==L){var T,W;h.length=0;for(var P=0;P<b.length;P++)W=(T=b[P].clone().sub(A)).clone().projectOnPlane(w.normal).sub(T).multiplyScalar(2),T.add(W),T.add(A),h.push(T)}}a.prototype.endManipulate.call(v,e)}}return u.prototype=new a,UWA.namespace("DS/CATCreaDesWebUIManipulators/CATCrDWebPencilManipulator",u)})),define("DS/CATCreaDesWebUIManipulators/CATCrDWebPlaneManipulator",["UWA/Core","DS/Mesh/MeshUtils","DS/Visualization/ThreeJS_DS","DS/Visualization/SceneGraphFactory","DS/Visualization/Node3D","DS/CATCreaDesWebUIServices/CATCrDShaders","DS/CATCreaDesWebUIManipulators/CATCrDWebEventsRouter","DS/CATCreaDesWebUIManipulators/CATCrDWebManipulatorBase","DS/CATCreaDesWebUIServices/CATCrDWebUIServices","DS/CATCreaDesWebUIServices/CATCrDWebMathServices","DS/CATCreaDesWebUIServices/CATCrDGrid"].concat(window.dependencies),(function(e,t,n,a,r,o,i,s,l,c,u){function p(o,u,p,v){var C=this,d=v._3dViewer;s.call(C,o,d);var b,y,g=d,h=new n.Vector3(0,0,0),f=new n.Vector3(1,0,0),M=new n.Vector3(0,1,0),m=new n.Vector3(0,0,1),D=50,w=!1,A=-1,V=new THREEDS.Core.Vector2(0,0),T=g.getViewpoints()[0].getCamera(),W=p.clone();D=l.convertPixelsLengthToMm(T,W,Math.min(.25*window.innerHeight,.25*window.innerWidth));C.getNormal=function(){return m},C.getPosition=function(){return h},C.setVisibility=function(e){w=e,y.setVisibility(w),P(e),g.render()};var P=function(e){1==e?b.setPickable(t.PICKABLE):b.setPickable(t.NOPICKABLE)},E=function(e){var t=m.angleTo(e);if(Math.abs(t)>.001&&Math.abs(Math.PI-t)>.001){var a=m.cross(e),r=new n.Matrix4;a.normalize(),r.makeRotationAxis(a,t),y.applyMatrix(r),f.applyMatrix4(r),M.applyMatrix4(r),f.normalize(),M.normalize(),m=e.clone(),h.applyMatrix4(r)}},S=function(e){h=e.clone(),e.x=e.x-.5*D*(f.x+M.x),e.y=e.y-.5*D*(f.y+M.y),e.z=e.z-.5*D*(f.z+M.z),y.getMatrix().setPosition(e),y._updateMatrix()},x=(P=function(e){1==e?b.setPickable(t.PICKABLE):b.setPickable(t.NOPICKABLE)},function(e){return e.distanceToSquared(h)<D?5:z(e)}),z=function(e){var t=200,a=new n.Vector3;a.x=h.x-.5*D*(f.x-M.x),a.y=h.y-.5*D*(f.y-M.y),a.z=h.z-.5*D*(f.z-M.z);var r=new n.Vector3;r.x=h.x+.5*D*(f.x+M.x),r.y=h.y+.5*D*(f.y+M.y),r.z=h.z+.5*D*(f.z+M.z);var o=new n.Vector3;o.x=h.x+.5*D*(f.x-M.x),o.y=h.y+.5*D*(f.y-M.y),o.z=h.z+.5*D*(f.z-M.z);var i=new n.Vector3;i.x=h.x-.5*D*(f.x+M.x),i.y=h.y-.5*D*(f.y+M.y),i.z=h.z-.5*D*(f.z+M.z),(new n.Vector3).subVectors(r,a),(new n.Vector3).subVectors(o,r),(new n.Vector3).subVectors(i,o),(new n.Vector3).subVectors(a,i),(c=new n.Vector3).subVectors(e,a),(s=new n.Vector3).subVectors(e,r);var s,l,c,u,p=c.dot(s);return p<0&&c.length()<t&&s.length()<t?1:((s=new n.Vector3).subVectors(e,r),(l=new n.Vector3).subVectors(e,o),(p=s.dot(l))<0&&s.length()<t&&l.length()<t?2:((l=new n.Vector3).subVectors(e,o),(u=new n.Vector3).subVectors(e,i),(p=l.dot(u))<0&&l.length()<t&&u.length()<t?3:((c=new n.Vector3).subVectors(e,a),(u=new n.Vector3).subVectors(e,i),(p=c.dot(u))<0&&c.length()<t&&u.length()<t?4:-1)))};function U(e){var t=l.getScreenPlane(g);!function(e,t){var a=new n.Vector3(e.x-t.x,e.y-t.y,e.z-t.z),r=a.dot(m);a.x=r*m.x,a.y=r*m.y,a.z=r*m.z,a.normalize();var o=new n.Matrix4;o.makeTranslation(Math.abs(r)*a.x,Math.abs(r)*a.y,Math.abs(r)*a.z),y.applyMatrix(o),g.render(),h.x=h.x+Math.abs(r)*a.x,h.y=h.y+Math.abs(r)*a.y,h.z=h.z+Math.abs(r)*a.z}(l.get3DPosition(g,e,t),l.get3DPosition(g,V,t)),V=e}function L(e){var t=l.getScreenPlane(g);!function(e,t,a){var r=new n.Vector3;r.subVectors(t,h);var o=new n.Vector3;o.subVectors(e,h);var i=new n.Vector3;i.x=h.x-.5*D*(f.x-M.x),i.y=h.y-.5*D*(f.y-M.y),i.z=h.z-.5*D*(f.z-M.z);var s=new n.Vector3;s.x=h.x+.5*D*(f.x+M.x),s.y=h.y+.5*D*(f.y+M.y),s.z=h.z+.5*D*(f.z+M.z);var l=new n.Vector3;l.x=h.x+.5*D*(f.x-M.x),l.y=h.y+.5*D*(f.y-M.y),l.z=h.z+.5*D*(f.z-M.z);var c=new n.Vector3;c.x=h.x-.5*D*(f.x+M.x),c.y=h.y-.5*D*(f.y+M.y),c.z=h.z-.5*D*(f.z+M.z);var u=new n.Vector3,p=new n.Vector3;p=h.clone(),1==a?u.subVectors(s,i):2==a?u.subVectors(l,s):3==a?u.subVectors(c,l):4==a&&u.subVectors(i,c);var v=r.angleTo(o);new n.Vector3(t.x-e.x,t.y-e.y,t.z-e.z).dot(m)>0&&(v*=-1);var C=(new n.Matrix4).makeTranslation(-p.x,-p.y,-p.z),d=(new n.Matrix4).makeTranslation(p.x,p.y,p.z),b=new n.Matrix4;u.normalize(),b.makeRotationAxis(u,v),y.applyMatrix(C),y.applyMatrix(b),f.applyMatrix4(b),M.applyMatrix4(b),y.applyMatrix(d),f.normalize(),M.normalize(),m.crossVectors(f,M),m.normalize(),g.render()}(l.get3DPosition(g,e,t),l.get3DPosition(g,V,t),A),V=e}C.clean=function(){var t=C._webGLV6Viewer.getRootNode(),n=new i;!1!==e.typeOf(n)&&n.removeManipulator(C),C.cleanEvents(),t.remove(y),g.render()},C.beginManipulate=function(t){s.prototype.beginManipulate.call(C,t),V=t;var n=g.pick(t,"rep",!0);if(!1!==e.typeOf(n.path)&&!1!==e.typeOf(n.normal)&&!1!==e.typeOf(n.position)){var a=n.normal.clone(),r=n.position.clone(),o=n.path;if(void 0!==o[0]){var i=o[0].getLength(),c=1;for(c=0;c<i;c++){var u=o[0].getElement(c);if(!1!==e.typeOf(u)&&"myPolyline"===u.name){E(a),S(r);break}if(!1!==e.typeOf(u)&&"myPolyline"!==u.name){A=x(r);break}}g.render()}}else{var p=l.getScreenPlane(g);r=l.get3DPosition(g,t,p);A=x(r)}},C.manipulate=function(e){s.prototype.manipulate.call(C);var t=C._webGLV6Viewer.getRootNode();5==A&&U(e),1!=A&&2!=A&&3!=A&&4!=A||L(e),l.updateCutByPlane(t,!0,h,m),g.render()},C.endManipulate=function(e){s.prototype.endManipulate.call(C,e),A=-1},C.edit=function(e){s.prototype.edit.call(C,e);var t=C._webGLV6Viewer.getRootNode(),a=h.clone(),r=c.getClosestCanonicalDir(m);E(r),S(a),function(){var e=new n.Vector3(1,0,0),t=new n.Vector3(0,1,0),a=new n.Vector3(0,0,1),r=f.angleTo(e),o=f.angleTo(t),i=f.angleTo(a),s=M.angleTo(e),l=M.angleTo(t),c=M.angleTo(a),u=Math.min(Math.abs(r),Math.abs(o),Math.abs(i),Math.abs(s),Math.abs(l),Math.abs(c));if(u>.001){var p=new n.Vector3;u==r?(p.crossVectors(e,f),p.dot(m)<0&&(u*=-1)):u==o?(p.crossVectors(t,f),t.dot(m)<0&&(u*=-1)):u==i?(p.crossVectors(a,f),p.dot(m)<0&&(u*=-1)):u==s?(p.crossVectors(e,M),p.dot(m)<0&&(u*=-1)):u==l?(p.crossVectors(t,M),p.dot(m)<0&&(u*=-1)):u==c&&(p.crossVectors(a,M),p.dot(m)<0&&(u*=-1));var v=h.clone(),C=m.clone(),d=(new n.Matrix4).makeTranslation(-v.x,-v.y,-v.z),b=(new n.Matrix4).makeTranslation(v.x,v.y,v.z),g=new n.Matrix4;C.normalize(),g.makeRotationAxis(C,-u),y.applyMatrix(d),y.applyMatrix(g),f.applyMatrix4(g),M.applyMatrix4(g),y.applyMatrix(b),f.normalize(),M.normalize(),m.crossVectors(f,M),m.normalize()}}(),l.updateCutByPlane(t,!0,h,m),g.render()},C.setPriority(1),C.appendEvent("CATCrDWeb:beginManipulate"),C.appendEvent("CATCrDWeb:manipulate"),C.appendEvent("CATCrDWeb:endManipulate"),C.appendEvent("CATCrDWeb:dblClick");var k=new i;!1!==e.typeOf(k)&&k.appendManipulator(C);var I=new n.Vector3,O=new n.Vector3;I=p.clone(),O=u.normal.clone(),function(o){var i=C._webGLV6Viewer.getRootNode();0!=e.typeOf(o)&&(D=o),(b=a.createRectangleNode({width:D,height:D,fill:!0,color:16711680})).name=C._name,b.setPickable(t.PICKABLE),(y=new r).add(b);var s=new n.Vector3;s.x=h.x-.5*D*(f.x+M.x),s.y=h.y-.5*D*(f.y+M.y),s.z=h.z-.5*D*(f.z+M.z),y.getMatrix().setPosition(s),y._updateMatrix();new n.Color;y.material=new n.MeshBasicMaterial({color:11513775}),y.material.line=new n.LineBasicMaterial({color:0,linewidth:1,opacity:1}),y.material.side=n.DoubleSide,y.material.depthWrite=!1,y.material.opacity=.1,y.material.transparent=!0,y.material.force=!0,i.add(y),f.normalize(),M.normalize(),m.crossVectors(f,M),m.normalize(),g.render()}(D),E(O),S(I);var _=C._webGLV6Viewer.getRootNode();l.updateCutByPlane(_,!0,h,m),g.render()}return p.prototype=new s,e.namespace("DS/CATCreaDesWebUIManipulators/CATCrDWebPlaneManipulator",p)}));