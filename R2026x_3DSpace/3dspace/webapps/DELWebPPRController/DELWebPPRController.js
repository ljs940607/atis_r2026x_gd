define("DS/DELWebPPRController/columnviews/BuildUp",["DS/DELWebComponentManager/DELWebComponentManager","i18n!DS/DELWebPPRController/assets/nls/DELWebPPR.json","css!DS/DELWebPPRController/assets/css/PPR2DStructure.css"],(function(e,t){"use strict";return{dataIndex:"buildUp",sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,displayType:"BuildUp",editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",alignment:"center",visibleFlag:!0,disabled:!0,width:30,height:"40px",pinned:"right",getCellTooltip:function(e,n){var o=n.nodeModel;return-1===n.rowID?{shortHelp:t.get("PROCESS.BuildUp.description"),updateModel:!1}:o.getAttributeValue("buildUp")===o.ENUM_BUILDUP.LOADING?{shortHelp:t.get("PROCESS.BuildUp.Loading.description"),updateModel:!1}:{shortHelp:"",updateModel:!1}},getCellClassName:function(e,t){var n="";return 0===t.rowID&&(n="del-buildup"),n},getCellSemantics:function(t,n){var o=n.nodeModel,i={};switch(o.getAttributeValue("buildUp")){case o.ENUM_BUILDUP.ACTIVATE:i.icon=e.getComponent("Utils").getAssetsUrl("DELWebPPRController","icons/22/I_DELProductBuildUp_ON.png");break;case o.ENUM_BUILDUP.DEACTIVATE:i.icon=e.getComponent("Utils").getAssetsUrl("DELWebPPRController","icons/22/I_DELProductBuildUp_OFF.png");break;case o.ENUM_BUILDUP.LOADING:i.icon={iconName:"reload wux-ui-3ds-spin",fontIconFamily:1}}return i}}})),define("DS/DELWebPPRController/columnviews/Relation",["UWA/Core"],(function(e){"use strict";return e.clone({width:"150px",height:"40px",typeRepresentation:"url",getCellValue:function(t,n){let o=t.split("."),i=o[0]?o[0]:null,a=o[1]?o[1]:null,r=[],l=n&&n.nodeModel&&n.nodeModel.getRelations?n.nodeModel.getRelations():{};return l&&e.is(l[i],"array")&&l[i].forEach((e=>{if(e.link===a){let t=e.data.label+" "+e.data.revision;r.push({icon:{iconPath:e.data.icon,iconSize:{width:"22px",height:"22px"}},label:t})}})),r}})})),define("DS/DELWebPPRController/ProcessToolbarConfig",["DS/DELWebComponentManager/DELWebComponentManager","i18n!DS/DELWebPPRController/assets/nls/DELWebPPR.json"],(function(e,t){"use strict";return{getToolbarDefination:function(n){let o={entries:[{id:"PERTView",dataElements:{typeRepresentation:"PERTview",value:!1,onNodeUpdate:{module:"DS/DELWebPPRController/ToolbarHandler",func:"onNodeUpdate",argument:{identifier:"PERTView"}},position:"far",category:"1"}},{id:"SwitchMode",dataElements:{typeRepresentation:"switchMode",value:!UWA.is(n.SwitchMode)||n.SwitchMode,onNodeUpdate:{module:"DS/DELWebPPRController/ToolbarHandler",func:"onNodeUpdate",argument:{identifier:"SwitchMode"}},disabled:!0,position:"far",category:"2"}}],typeRepresentations:{switchMode:{stdTemplate:"toggleIcon",semantics:{possibleValues:[{value:"true",icon:{iconPath:e.getComponent("Utils").getAssetsUrl("DELWebPPRController","icons/22/I_DELSwitchToProductBuildUp.png")},tooltip:{shortHelp:t.get("Toolbar.SwitchToProductBuildUp.ToolTip.shortHelp")}},{value:"false",icon:{iconPath:e.getComponent("Utils").getAssetsUrl("DELWebPPRController","icons/22/I_DELSwitchToWKIView.png")},tooltip:{shortHelp:t.get("Toolbar.SwitchToWKIView.ToolTip.shortHelp")}}]}},PERTview:{stdTemplate:"toggleIcon",semantics:{possibleValues:[{value:"true",icon:{iconPath:e.getComponent("Utils").getAssetsUrl("DELWebPPRController","icons/32/I_DEL_ProductFlow.png"),className:"del-toolbarcommand-active"},tooltip:{shortHelp:t.get("Toolbar.PERTView.ToolTip")}},{value:"false",icon:{iconPath:e.getComponent("Utils").getAssetsUrl("DELWebPPRController","icons/32/I_DEL_ProductFlow.png")},tooltip:{shortHelp:t.get("Toolbar.PERTView.ToolTip")}}]}}}};return JSON.stringify(o)}}})),define("DS/DELWebPPRController/ToolbarHandler",["DS/DELWebComponentManager/DELWebComponentManager"],(function(e){"use strict";let t={onNodeUpdate:function(t){let n,o=t.context.nodeModel,i=o.getAttributeValue("data");!0!==o.options.disabled&&(n={data:{previousValue:o.previousValue,value:i},origin:"DELWebPPRToolbar"},e.getComponent("ModelEvents").publish({event:`on${t.identifier}Change`,data:n}),i!==o.previousValue&&(o.previousValue=i))}};return t})),define("DS/DELWebPPRController/ToolbarController",["UWA/Class","DS/DELWebComponentManager/DELWebComponentManager","css!DS/DELWebPPRController/assets/css/toolbar.css"],(function(e,t){"use strict";return e.extend({init:function(){this._eventTokens=[],this.toolbar=null,this._parent()},_subscribeEvents:function(e){let n=t.getComponent("ModelEvents");e&&e.forEach((e=>{this._eventTokens.push(n.subscribe(e.eventName,e.callback))}))},_unsubscribeEvents:function(){let e=t.getComponent("ModelEvents");this._eventTokens.forEach((t=>{e.unsubscribe(t)})),this._eventTokens=[]},buildToolbar:function(e,n,o){this._subscribeEvents(o),this.toolbar=t.getComponent(e).setToolbar(n)},getValue:function(e){let t,n=this.toolbar.getNodeModelByID(e);return n&&(t=n.getAttributeValue("data")),t},isEnabled:function(e){let t=!1,n=this.toolbar.getNodeModelByID(e);return n&&(t=!n.options.disabled),t},destroyToolbar:function(){this._unsubscribeEvents(),this.toolbar&&(this.toolbar.destroy(),this.toolbar=null)}})})),define("DS/DELWebPPRController/columnviews/PositionMatrix",["DS/Handlebars/Handlebars","text!DS/DELWebPPRController/assets/templates/positionMatrixTooltip.html","i18n!DS/DELWebPPRController/assets/nls/DELWebPPR.json","css!DS/DELWebPPRController/assets/css/positionmatrix.css"],(function(e,t,n){"use strict";var o=e.compile(t);return{editableFlag:!0,typeRepresentation:"functionIcon",alignment:"center",getCellSemantics:function(e,t){return{icon:t.nodeModel.options.grid[e]?{iconName:"part-position wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"}:""}},getCellTooltip:function(e,t){var i,a,r,l,s,c,d;return-1===t.rowID?i={shortHelp:n.get("PositionMatrix.description"),updateModel:!1}:t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]&&(a=(r=t.nodeModel.options.grid[e])?(l=6,c=r.split(","),d={className:s,x1:Number(c[0]).toFixed(l).toString(10).substring(0,l+3),x2:Number(c[1]).toFixed(l).toString(10).substring(0,l+3),x3:Number(c[2]).toFixed(l).toString(10).substring(0,l+3),y1:Number(c[3]).toFixed(l).toString(10).substring(0,l+3),y2:Number(c[4]).toFixed(l).toString(10).substring(0,l+3),y3:Number(c[5]).toFixed(l).toString(10).substring(0,l+3),z1:Number(c[6]).toFixed(l).toString(10).substring(0,l+3),z2:Number(c[7]).toFixed(l).toString(10).substring(0,l+3),z3:Number(c[8]).toFixed(l).toString(10).substring(0,l+3),t1:Number(c[9]).toFixed(l).toString(10).substring(0,l+3),t2:Number(c[10]).toFixed(l).toString(10).substring(0,l+3),t3:Number(c[11]).toFixed(l).toString(10).substring(0,l+3)},o(d)):"<span>"+r+"</span>",i={title:n.get("PositionMatrix.Title"),shortHelp:a,allowUnsafeHTMLShortHelp:!0,wrapThreshold:315,updateModel:!1}),i},width:"100px",height:"40px"}})),define("DS/DELWebPPRController/columnviews/Requirement",["DS/DELWebComponentManager/DELWebComponentManager","i18n!DS/DELWebPPRController/assets/nls/DELWebPPR.json"],(function(e,t){"use strict";return{height:"40px",editionPolicy:"EditionInPlace",editableFlag:!0,alignment:"center",typeRepresentation:"functionIcon",getCellSemantics:function(t,n){var o,i=n.nodeModel;switch(i.getAttributeValue(t)){case i.ENUM_REQUIREMENT.LOAD:o=e.getComponent("Utils").getAssetsUrl("DELWebPPRNavigator","icons/22/I_DELLoadFTA.png");break;case i.ENUM_REQUIREMENT.REMOVE:o=e.getComponent("Utils").getAssetsUrl("DELWebPPRNavigator","icons/22/I_DELRemoveFTA.png")}return{icon:o}},getCellTooltip:function(e,n){var o,i=n&&n.nodeModel&&UWA.is(n.nodeModel.getAttributeValue(e))?n.nodeModel.getAttributeValue(e):null;return-1===n.rowID?o={shortHelp:t.get("MBOM.Requirement.description"),updateModel:!1}:UWA.is(i)&&(o={shortHelp:i===n.nodeModel.ENUM_REQUIREMENT.LOAD?t.get("MBOM.LoadRequirement.tooltip"):t.get("MBOM.RemoveRequirement.tooltip"),updateModel:!1}),o}}})),define("DS/DELWebPPRController/DELWebPPRModel",["UWA/Core","DS/DELWebComponentManager/DELWebComponentManager","DS/DELWebComponentManager/DELWebTypesUtil","text!DS/DELWebPPRController/assets/json/ProcessExpandConfig.json","text!DS/DELWebPPRController/assets/json/Webservices.json"],(function(e,t,n,o,i){"use strict";return function(){var a="resourceid",r="ds6w:label",l="ds6w:status",s="ds6w:type",c="ds6wg:revision",d="icon",u="Path",g="ds6w:globalType",p="ds6w:Instance",f="VPMRepInstance",m="IPML.IconName",h="from",b="to",P=null,C=function(){return t.getComponent("Utils").get3DSpaceUrl()},E=function(e,t,n){var o=n.split(".");"reference"===o[1]?e.push(o[0]):"instance"===o[1]&&t.push(o[0])},v=function(n){var i,a=JSON.parse(o),r=a.payload,l=a.references,s=a.instances;return r.id=n.id?n.id:"",e.is(n.ColumnConfig)&&(n.ColumnConfig.Label&&l.forEach((function(e){E(r.dynamicMask["dsprcs:"+e],[],n.ColumnConfig.Label.dataIndex)})),e.is(n.ColumnConfig.Columns,"array")&&n.ColumnConfig.Columns.forEach((function(e){l.forEach((function(t){E(r.dynamicMask["dsprcs:"+t],[],e.dataIndex)})),s.forEach((function(t){E([],r.dynamicMask["dsprcs:"+t],e.dataIndex)}))}))),n.filter&&(r.config_filter=t.getComponent("Utils").getValue(n.filter,"config_filter"),(i=t.getComponent("Utils").getValue(n.filter,"config_filter_id"))&&(r.config_filter_id=i.physical_id)),n.mfgItemId&&(r.parameters.mfgItemId=n.mfgItemId),r},S=function(t){let n=[],o=[],i=function(t){let n;t&&t.length>0&&(n=e.is(t[0],"string")?[t]:t,o=o.concat(n.map((e=>({physical_id_path:e})))))};return(t=t||{}).filter&&n.push(t.filter),i(t.pathFilter),i(t.predecessors),o.length>0&&n.push({prefix_filter:{prefix_path:o}}),0===n.length&&n.push({all:1}),{and:{filters:n}}},D=function(n){return new e.Promise((function(o,i){let a=t.getComponent("Utils");a.markStart("v2Expand"),a.executeRequestPromise(C()+"/cvservlet/progressiveexpand/v2?output_format=cvjson",{method:"POST",payload:n}).then((function(t){t&&e.is(t.errors,"array")&&t.errors.length>0?i(t.errors):(a.markEnd("v2Expand","V2 Expand completed in"),o(t))})).fail((function(e){i(e)}))}))};return{getProcessExpandData:function(n){var o,i=t.getComponent("Utils");return n&&n.id?(i.markStart("processExpand"),o=new e.Promise((function(e,t){i.executeRequestPromise(C()+"/resources/v1/modeler/dsprcs/invoke/dsprcs:expand",{method:"POST",payload:v(n)}).then((function(t){i.markEnd("processExpand","Advanced process expand completed in"),e(t)})).fail(t)}))):o=e.Promise.reject("Invalid Input Provided"),o},getExpandData:function(o){var i,v=t.getComponent("Utils");return o&&o.id?(v.markStart("pprV2Expand"),i=new e.Promise((function(t,i){D(function(t){var n={batch:{expands:[{label:"PPRExpand",root:{physical_id:t.id},filter:S(t)}]},outputs:{select_object:["physicalid","ds6w:type","ds6w:globalType","IPML.IconName"],select_relation:["physicalid","ds6w:type","ds6w:globalType"],format:"entity_relation_occurrence",hits:{predefined_computation:["icons"]}}};return t.ColumnConfig&&(t.ColumnConfig.Label&&E(n.outputs.select_object,n.outputs.select_relation,t.ColumnConfig.Label.dataIndex),e.is(t.ColumnConfig.Columns,"array")&&t.ColumnConfig.Columns.forEach((function(e){E(n.outputs.select_object,n.outputs.select_relation,e.dataIndex)}))),t.model&&Object.keys(t.model).forEach((function(e){t.model[e]&&(n.batch.expands[0][e]=t.model[e])})),n}(o)).then((function(i){t(function(t,o){var i={references:{},instances:{},paths:[]},v=[],S=[],D=o.ColumnConfig,R=!(!o.pprType||o.pprType!==n.PPRTYPES.RESOURCE),M=function(e){return{label:e.label,icon:e.icons[0],revision:e.grid[c+".reference"]}};return D.Label&&E(S,v,D.Label.dataIndex),e.is(D.Columns,"array")&&D.Columns.forEach((function(e){E(S,v,e.dataIndex)})),e.is(t,"array")&&t.forEach((t=>{if(t[u])i.paths.push(t[u]);else if(t[g]===p||t[s]===f){if(i.instances[t[a]]={instanceId:t[a],instanceType:t[s],grid:{}},t[h]&&t[b]&&i.references[t[h]]&&i.references[t[b]]){let n=i.references[t[h]],o=i.references[t[b]];e.is(n[b],"array")||(n[b]=[]),n[b].push({link:t[s],data:M(o)}),e.is(o[h],"array")||(o[h]=[]),o[h].push({link:t[s],data:M(n)})}v.forEach((e=>{i.instances[t[a]].grid[e+".instance"]=t[e]?t[e]:""}))}else i.references[t[a]]={referenceId:t[a],label:t[r],grid:{hideShow3D:1},type:t[s],icons:R?[(n=t[m],null===P&&(P=C()+"/snresources/images/icons/small/"),n?P+n+".png":"")]:[t[d]]},S.forEach((function(e){i.references[t[a]].grid[e+".reference"]=e===l?t[e]?t[e].split(".")[1]:"":t[e]}));var n})),i}(i.results,o)),v.markEnd("pprV2Expand","PPR Model expand completed in")})).fail(i)}))):i=e.Promise.reject("Invalid Input Provided"),i},getItemPathsHavingRequirement:async function(e){let n,o=t.getComponent("Utils"),a=JSON.parse(i).getItemPathsHavingRequirement,r={},l=[];return a.payload.batch.expands[0].root.physical_id=e.id,n=await o.executeRequestPromise(o.get3DSpaceUrl()+a.url,a),n.results.forEach((e=>{if(e.Path){let t=e.Path.slice(0,-2);r[t]||(r[t]=!0,l.push(t))}})),l}}}})),define("DS/DELWebPPRController/columnviews/Responsible",["i18n!DS/DELWebPPRController/assets/nls/DELWebPPR.json"],(function(e){"use strict";return{kind:"user",minWidth:200,height:"40px",editableFlag:!1,typeRepresentation:"user",customisation:{exportable:{lock:!1,value:!0}},getCellTooltip:function(t,n){let o;return-1===n.rowID?o={shortHelp:e.get("Owner.description"),updateModel:!1}:n&&n.nodeModel&&n.nodeModel.options&&n.nodeModel.options.grid&&n.nodeModel.options.grid[t]&&(o={shortHelp:n.nodeModel.getReferenceValue(t)}),o},getCellValue:function(e,t){if(t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]){return{icon:{iconName:"topbar-user",fontIconFamily:1},label:t.nodeModel?t.nodeModel.options.grid[e]:""}}return""},getCellValueForExport:function(e,t){return t&&t.nodeModel?t.nodeModel.options.grid[e]:""}}})),define("DS/DELWebPPRController/DELWebPPRItemModel",["UWA/Core","UWA/Class","DS/TreeModel/TreeDocument","DS/DELWebPPRNavigator/DELWebPPRNode","DS/DELWebComponentManager/DELWebComponentManager"],(function(e,t,n,o,i){"use strict";return t.extend({init:function(){var e=this;this._model=new n,this._model.onPostExpand((function(t){var n=t.data.nodeModel;n&&(e._computePreSelect(e._getNodes(n,"isPreSelected"),!0),e._computeHighlight(e._getNodes(n,"isHighlighted"),!0))})),this._model.onPostCollapse((function(t){var n=t.data.nodeModel;n&&(e._computePreSelect(e._getNodes(n,"isPreSelected"),!0),e._computeHighlight(e._getNodes(n,"isHighlighted"),!0))}))},getBadgeOptions:function(e){let t;switch(e){case"filter":t={bottomRight:{iconName:"filter",fontIconSize:"1x",className:"dgv-badge"}};break;case"hasFTA":t={bottomRight:{iconPath:i.getComponent("Utils").getAssetsUrl("DELWebPPRController","icons/22/I_DELLoadFTA.png"),iconSize:{height:"12px",width:"12px"}}}}return t},_getNodes:function(e,t){return e.search({match:function(e){if(e.nodeModel.getAttributeValue(t))return!0}})},_createRoot:function(e,t,n){var i;return e&&t&&(i=new o(t[e])).updateOptions({badges:n?this.getBadgeOptions("filter"):null,filter:n}),i},_getNode:function(t,n,o){var i,a,r=[],l=null;if(t)for(r.push(t);r.length>0;){if(!(n!==(i=r.pop()).getReferenceId()||o&&o!==i.getInstanceId())){l=i;break}if(!(e.is(n)||o&&o!==i.getInstanceId())){l=i;break}a=i.getChildren(!0),Array.isArray(a)&&r.push(...a)}return l},_getChildNode:function(e,t,n){let o,i;return e&&(i=e.getChildren(),i&&(o=i.find((function(e){return t===e.getReferenceId()&&(!n||n===e.getInstanceId())})))),o},_createTree:function(t,n,a){var r=this,l=i.getComponent("Utils"),s=function(i){var a,l=t;for(let t=2,s=i.length;t<s;t+=2){let s=i[t],c=i[t-1],d=r._getChildNode(l,s,c);if(d)l=d;else{if(e.is(n.typesToExclude,"array")&&(-1!==n.typesToExclude.indexOf(n.references[s].type)||-1!==n.typesToExclude.indexOf(n.instances[c].instanceType)))break;a=new o(e.clone(e.extend(n.references[s],n.instances[c],!0))),l.addChild(a),l=a}}};n&&Array.isArray(n.paths)&&n.references&&n.instances&&l.processInChunk(n.paths,200,200,(function(e,t){e.forEach(s),t&&a()}))},getNodeFromPath:function(t){var n,o,i=this._model.getRoots();return e.is(t,"array")&&t.length>0&&i.length>0&&(n=i.find((function(e){return e&&e.options.referenceId===t[0]})),t.forEach(((e,i)=>{if(i>0&&i%2==0){if(!(o=this._getNode(n,e,t[i-1])))return;n=o}}))),n},getNodeFromPathV2:function(t,n=!1){let o,i,a=this._model.getRoots();if(e.is(t,"array")&&t.length>0&&a.length>0){o=a.find((function(e){return e&&e.getReferenceId()===t[0]})),i=o;for(let e=2;e<t.length;e+=2){if(!i||!i.hasChildren()){!1===n&&(i=null);break}i=i.getChildren().find((n=>n.getReferenceId()===t[e]&&n.getInstanceId()===t[e-1]))}}return i},_computePreSelect:function(e,t){e.forEach((function(e){for(var n=e,o=t;n;)n.isVisible()?(o!==n.isPreSelected()&&(o?n.preSelect():n.unPreSelect()),n.isRoot()?n=null:(n=n.getParent(),o&&(o=!o))):(!o&&n.isPreSelected()&&n.unPreSelect(),n=n.getParent())}))},_computeHighlight:function(e,t){e.forEach((function(e){for(var n=e,o=t;n;)n.isVisible()?(o!==n.isHighlighted()&&(o?n.highlight():n.unhighlight()),n.isRoot()?n=null:(n=n.getParent(),o&&(o=!o))):(!o&&n.isHighlighted()&&n.unhighlight(),n=n.getParent())}))},_getParentNodes:function(e){var t,n=[];if(e)for(t=e;t;)n.unshift(t),t=t.isRoot()?null:t.getParent();return n},loadData:function(t){var n,o=this;t&&e.is(t.paths,"array")&&t.paths.length>0&&(n=this._createRoot(t.id,t.references,t.filter),this._model.prepareUpdate(),this._model.addRoot(n),this._createTree(n,t,(function(){o._model.pushUpdate(),t.onComplete()})))},getModel:function(){return this._model},getRoots:function(){return this._model&&e.is(this._model.getRoots(),"array")?this._model.getRoots():[]},getSelectedPaths:function(){return this._model.getSelectedNodes().map((function(e){return e.getRirPath()}))},preSelect:function(e,t){var n=this.getNodeFromPath(e);n&&(t?n.setAttribute("isPreSelected",!0):n.removeAttribute("isPreSelected"),this._computePreSelect([n],t))},getPathFromId:function(e,t){var n=this._getNode(this._model.getRoots()?this._model.getRoots()[0]:{},e,t);return n?n.getRirPath():[]},getNodeFromID:function(e,t){return this._getNode(this._model.getRoots()?this._model.getRoots()[0]:{},e,t)},highlight:function(e,t){var n=this.getNodeFromPath(e);n&&(t?n.setAttribute("isHighlighted",!0):n.removeAttribute("isHighlighted"),this._computeHighlight([n],t))},removeRoot:function(e){let t=this.getNodeFromPath([e]);if(t)return this.getModel().removeRoot(t)},empty:function(){this._model.empty()},updateOptions:function(e,t){this._model.prepareUpdate(),e.forEach((e=>{let n=this.getNodeFromPathV2(e);n&&n.updateOptions(t)})),this._model.pushUpdate()}})})),define("DS/DELWebPPRController/columnviews/ConfigurationColumns",[],(function(){"use strict";const e="string",t="configLoading";return{Effectivity:{dataIndex:"Effectivity",width:"auto",minWidth:"100",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},VariantEffectivity:{dataIndex:"VariantEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},EvolutionEffectivity:{dataIndex:"EvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},CurrentEvolutionEffectivity:{dataIndex:"CurrentEvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},ProjectedEvolutionEffectivity:{dataIndex:"ProjectedEvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},ConfigurationContext:{dataIndex:"ConfigurationContext",width:"auto",minWidth:"150",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},getCellTypeRepresentation:function(n){var o,i=t;return UWA.owns(n,"nodeModel")&&(o=n.nodeModel,UWA.is(o)&&(i=UWA.is(n.cellModel,"string")&&0===n.cellModel.length?!!UWA.is(o.options.areCfgColumnsFilled,"boolean")&&o.options.areCfgColumnsFilled?e:t:e)),i},hasCellValue:function(){return!0},getCellValue:function(e,t){var n,o=null;return UWA.owns(t,"nodeModel")&&(n=t.nodeModel.options.grid[e],o=UWA.is(n,"string")?n.trim():n),UWA.is(o)?o:""}}})),define("DS/DELWebPPRController/DELWebDictionaryService",["DS/Logger/Logger","DS/DELWebComponentManager/DELWebComponentManager"],(function(e,t){"use strict";return function(){var n=e.getLogger("DELWebDictionaryService"),o={attributes:[],dimenstions:[]};const i={initialize:function(e){var i=t.getComponent("Utils");return new UWA.Promise(((t,n)=>{e&&e.length>0?i.executeRequestPromise(`${i.get3DSpaceUrl()}/resources/dictionary/properties`,{method:"POST",payload:e}).then(t).catch(n):n("No attributes found")})).then((function(e){return o.attributes=e,e})).then((function(e){var t=[];return e&&e.length>0&&e.forEach((e=>{e&&e.info&&e.info.forEach((e=>{let n=e?e.Magnitude:null;n&&function(e){t.includes(e)||t.push(e)}(n)}))})),t})).then((function(e){let t=UWA.Promise.resolve();return e&&e.length>0&&(t=i.executeRequestPromise(`${i.get3DSpaceUrl()}/resources/dictionary/dimensions?${function(e){return`$filter=dimensionName+eq+${e.join(",")}`}(e)}`,{method:"GET"})),t})).then((function(e){o.dimensions=e?e.results:[]})).fail((e=>{n.debug(e),n.error("Failed to fetch dictionary attributes/dimension due to ",e.toString())}))},getAttributes:function(){var e=o&&o.attributes?o.attributes:[];return 0===e.length&&n.warn("Initialize dictionary service before user/attributes not found"),e},getAttributeInfo:function(e,t){let n,o=i.getAttributes().find((t=>t.type===e));return o&&o.info&&(n=o.info.find((e=>e.Name===t))),n},getAuthorizedValues:function(e){let t=[];return e&&"Yes"===e.HasRangeDefined&&(t=e.AuthorizedValues),t},getDimension:function(e){var t;return o&&o.dimensions&&(t=o.dimensions.find((t=>t.Name===e))),t},getUnit:function(e,t){let n,o=i.getDimension(e);return o&&(t=t||o.MKSUnit,n=o.Units?o.Units.find((e=>e.Name===t)):null),n},empty:function(){o={attributes:[],dimensions:[]}}};return i}})),define("DS/DELWebPPRController/DELWebPPRProcessModel",["UWA/Core","DS/TreeModel/TreeDocument","DS/DELWebPPRNavigator/DELWebPPRNode","DS/Logger/Logger","DS/DELWebPPRController/DELWebPPRItemModel","text!DS/DELWebPPRController/assets/json/ProcessExpandConfig.json"],(function(e,t,n,o,i,a){"use strict";var r=JSON.parse(a),l=r.ENUMS,s=r.occurrences,c=r.references,d=r.instances,u=r.buildUpNotRequiredForTypes;return i.extend({init:function(){this._parent(),this._logger=o.getLogger("DELWebPPRProcessModel")},_createProcessTree:function(t){var o,i,a=[],r=[],{response:g,filter:p}=t||{},f=g.member[0],m=e.is(t.installPath,"array")&&t.installPath.length>0?t.installPath:null,h=m?m[m.length-1]:"",b=m?m.slice(0,-1):[],P=function(e){return m&&Array.isArray(e)&&e.length>0&&h===e[0]&&(e=b.concat(e)),e},C=function(e){var t=e.id?e.id:"",n={grid:{buildUp:-1===u.indexOf(e[l.Type])?0:""},referenceId:t,label:e[l.Title]?e[l.Title]:"",type:e[l.Type]?e[l.Type]:"",icons:e[l.Icon]?[e[l.Icon]]:[]};return Object.keys(e).forEach((t=>{-1!==a.indexOf(t)&&(n.grid[t+".reference"]=e[t])})),function(e,t){t.consumedMfgItems=[],t.consumedCapableResource=[],e[l.ItemSpecification]&&e[l.ItemSpecification].totalItems>0&&e[l.ItemSpecification].member.forEach((function(e){t.consumedMfgItems.push(P([e.itemRef]))})),e[l.CapableResources]&&e[l.CapableResources].totalItems>0&&e[l.CapableResources].member.forEach((function(e){t.consumedCapableResource.push(e.resource?e.resource:"")})),e[l.PrimaryCapableResource]&&e[l.PrimaryCapableResource].totalItems>0&&e[l.PrimaryCapableResource].member.forEach((function(e){t.consumedCapableResource.push(e.resource?e.resource:"")})),e[l.SecondaryCapableResource]&&e[l.SecondaryCapableResource].totalItems>0&&e[l.SecondaryCapableResource].member.forEach((function(e){t.consumedCapableResource.push(e.resource?e.resource:"")}))}(e,n),n},E=function(t){var n={path:t.id?t.id.split("/"):[],grid:{}};return d.forEach((function(o){t[l[o]]&&e.extend(n,function(e){var t={grid:{},instanceId:e.id,instanceType:e.type};return Object.keys(e).forEach((n=>{-1!==r.indexOf(n)&&(t.grid[n+".instance"]=e[n])})),t}(t[l[o]]),!0)})),c.forEach((function(o){t[l[o]]&&e.extend(n,C(t[l[o]]),!0)})),t[l.ItemSpecificationOcc]&&t[l.ItemSpecificationOcc].totalItems>0&&(n.consumedMfgItems=[],t[l.ItemSpecificationOcc].member.forEach((function(e){n.consumedMfgItems.push(P(e.itemOcc))}))),n},v=function(e,t,n){var o=n.split(".");"reference"===o[1]?e.push(o[0]):"instance"===o[1]&&t.push(o[0])},S=t&&t.compOptions?t.compOptions:null;e.is(S)&&(S.ColumnConfig.Label&&v(a,r,S.ColumnConfig.Label.dataIndex),e.is(S.ColumnConfig.Columns,"array")&&S.ColumnConfig.Columns.forEach((function(e){v(a,r,e.dataIndex)}))),f?((o=C(f)).grid.buildUp=-1,i=new n(e.merge(o,{badges:p?this.getBadgeOptions("filter"):null})),this._model.addRoot(i),this._model.prepareUpdate(),function e(t,o){var i=function(o){var i=E(o),a=new n(i);t.addChild(a),e(a,o)};o[l.MfgProcess]&&o[l.MfgProcess][l.MfgOperationOcc]&&o[l.MfgProcess][l.MfgOperationOcc].totalItems>0&&o[l.MfgProcess][l.MfgOperationOcc][l.Member].forEach((e=>{i(e)})),s.forEach((function(e){o[l[e]]&&o[l[e]].totalItems>0&&o[l[e]][l.Member].forEach((e=>{i(e)}))}))}(i,f),this._model.pushUpdate()):this._logger.error("Process data not found")},loadData:function(e){this._createProcessTree(e)}})})),define("DS/DELWebPPRController/DELWebCfgColumnManager",["UWA/Core","UWA/Class","UWA/Class/Promise","DS/Logger/Logger","DS/DELWebPPRController/columnviews/ConfigurationColumns"],(function(e,t,n,o,i){"use strict";var a=t.extend({checkCfgColumnsAvailability:function(){const e=["DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityColumns","DS/CfgWebAppEffectivityUX/scripts/CfgConfigurationContextColumn"];var t=this;return t._additionalColumnsAMD=[],new n((function(o,i){require(e,(function(){var e=[];Array.prototype.slice.call(arguments).forEach((o=>{e.push(new n((function(e){o.isAdditionalColumnsAvailable((function(n){!0===n&&t._additionalColumnsAMD.push(o),e()}))})))})),n.all(e).then(o).fail(i)}))}))},updateAttributes:function(t){var i=this,a=[],r=t.collectionView,l=[],s={pids:[],relids:[],pairs:{}},c=[];this._treeDocument=r.getTreeDocument(),e.is(this._additionalColumnsAMD,"array")&&this._additionalColumnsAMD.length>0&&this._areCfgColumnsVisible(r)&&t.startNodeIndex>=0&&t.endNodeIndex>=0&&e.is(r.model,"array")&&(a=r.model.slice(t.startNodeIndex,t.endNodeIndex+1)).length>0&&(l=a.filter((t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled)))).length>0&&(this._updateCfgColumnsFilledFlag(l,!1),l.forEach((e=>{e.getReferenceId()&&-1===s.pids.indexOf(e.getReferenceId())&&s.pids.push(e.getReferenceId()),e.getInstanceId()&&s.relids.push(e.getInstanceId())})),this._additionalColumnsAMD.forEach((t=>{c.push(new n((function(n){t.updateAttributes(s,(function(t){var o=e.is(t,"string")?JSON.parse(t):t;n(o)}))})))})),n.all(c).then((function(t){var n=t.reduce(((t,n)=>e.extend(t,n,!0)),{});i._updateCfgColAttributes(n,l),i._updateCfgColumnsFilledFlag(l,!0)})).fail((function(e){o.error("Failed to get configuration columns info : ",e)})))},getCfgColumnsConfig:function(){var e=[],t={};return this._additionalColumnsAMD.forEach((t=>{e.push(...t.getManagedColumnNames())})),e.forEach((e=>{i[e]&&(t[e]=i[e],t[e].getCellTypeRepresentation=i.getCellTypeRepresentation,t[e].hasCellValue=i.hasCellValue,t[e].getCellValue=i.getCellValue)})),t},_areCfgColumnsVisible:function(e){var t=[];return this._additionalColumnsAMD.forEach((e=>{t.push(...e.getManagedColumnNames())})),t.some((function(t){return e.getColumnOrGroup(t)&&!0===e.getColumnOrGroup(t).visibleFlag}))},_updateCfgColumnsFilledFlag:function(e,t){if(this._treeDocument){this._treeDocument.prepareUpdate();for(let n of e)n.updateOptions({areCfgColumnsFilled:t});this._treeDocument.pushUpdate()}},_updateCfgColAttributes:function(t,n){var o=this,i=function(e){o._treeDocument&&(o._treeDocument.prepareUpdate(),Object.keys(e).forEach((t=>{var o;(o=t,n.filter((e=>((e,t)=>e===t.getReferenceId())(o,e)||((e,t)=>!t.isRoot()&&e===t.getInstanceId())(o,e)))).forEach((n=>{n.updateOptions({grid:e[t]})}))})),o._treeDocument.pushUpdate())};e.is(t.pids,"object")&&i(t.pids),e.is(t.relids,"object")&&i(t.relids)}});return a})),define("DS/DELWebPPRController/ProcessToolbarController",["DS/DELWebComponentManager/DELWebTypesUtil","DS/DELWebComponentManager/DELWebComponentManager","DS/DELWebPPRController/ToolbarController","DS/DELWebPPRController/ProcessToolbarConfig","DS/DELWebCommonControls/DELWebPanel","DS/ApplicationFrame/FrameWindowsManager","DS/DELPPWProductFlowFacet/facets/ProductFlowSequenceFacet","text!DS/DELWebPPRController/assets/json/ModesConfig.json","i18n!DS/DELWebPPRController/assets/nls/DELWebPPR.json"],((e,t,n,o,i,a,r,l,s)=>{"use strict";const c="defaultViewerMode",d="roots",u="mode",g="PERTView",p="SwitchMode",f="WorkInstructions",m="ProcessToolbarController",h="BuildUp",b="Graphics",P="setMode",C={true:f,false:h};let E=JSON.parse(l);return n.extend({init:function(n){let o=this,l=function(e){return e&&e.origin!==name&&UWA.is(e.data)},c=function(){let t=n.getPPRPanels(),i=function(n){if(t[e.PPRTYPES.MBOM].visibleFlag||t[e.PPRTYPES.MBOM].show(),t[e.PPRTYPES.RESOURCE].visibleFlag||t[e.PPRTYPES.RESOURCE].show(),UWA.is(n,"boolean")){let o=t[e.PPRTYPES.MBOM].immersiveFrame.getDockingElement(t[e.PPRTYPES.MBOM].currentDockArea);o&&(o.collapseDockingZoneFlag=n)}};o.isEnabled(p)?!0===o.getValue(p)?(t[e.PPRTYPES.MBOM].hide(),t[e.PPRTYPES.RESOURCE].hide()):i(!0):i()},u=function(e,t){l(t)&&(o.toolbar.updateNodeModel(p,{disabled:!e}),o._onModeChange(),c())};this._eventHandlers=[{eventName:{event:"onBuildUpActivated"},callback:u.bind(this,!0)},{eventName:{event:"onBuildUpDeactivated"},callback:u.bind(this,!1)},{eventName:{event:"onSwitchModeChange"},callback:function(e){let n=t.getComponent("ModelEvents");if(o._onModeChange(),l(e)&&e.data.value!==e.data.previousValue){let t={data:{mode:C[e.data.value]},origin:m};c(),n.publish({event:P,data:t})}}},{eventName:{event:"onPERTViewChange"},callback:function(c){let u,p=n.getPPRPanels();if(l(c))if(u=p[e.PPRTYPES.PROCESS].immersiveFrame.getDockingElement(p[e.PPRTYPES.PROCESS].currentDockArea),u&&(u.collapseDockingZoneFlag=c.data.value),c.data.value){let e,n=UWA.createElement("div",{class:"del-pertview-container"}),l=t.getComponent("SessionModel").get(d);p[g]=new i({identifier:g,domId:g,title:s.get("PROCESS.PERTView.title"),immersiveFrame:a.getFrameWindow().getImmersiveFrame(),content:n,resizableFlag:!0,verticallyStretchableFlag:!0,horizontallyStretchableFlag:!0,width:300,height:300}),e=new r({}),e.inject(n),e.updateFacet({objectId:l[0].id,filterQuery:l[0].withFilter?t.getComponent("Utils").getValue(l[0].filter,"config_filter"):null}),p[g].addEventListener("close",(function(){delete p[g],o.toolbar.updateNodeModel(g,{grid:{data:!1}})}))}else p[g]&&(p[g].destroy(),delete p[g])}}],this._parent()},getCurrentActiveMode:function(){let e;return e=this.isEnabled(p)?this.isWorkInstructionsEnabled()?f:h:b,e},_onModeChange:function(){let e=this.getCurrentActiveMode(),n=E[e];t.getComponent("SessionModel").set(u,e),n&&Object.keys(n).forEach((function(e){if(t.isInitialized(e)){let o=t.getComponent(e),i=n[e].columns;i&&Object.keys(i).forEach((function(e){o.updateColumn(e,i[e])})),!0===n[e].reset3DVisibility&&o.reset3DVisibility();let a=n[e].contextualMenu;a&&o.updateContextualMenu(a)}}))},buildToolbar:function(){this._parent(e.PPRTYPES.PROCESS,o.getToolbarDefination({[p]:widget.getValue(c)===f}),this._eventHandlers),this._onModeChange()},isWorkInstructionsEnabled:function(){return this.isEnabled(p)&&!0===this.getValue(p)}})})),define("DS/DELWebPPRController/DELWebColumnManager",["UWA/Core","UWA/Class","DS/DELWebPPRController/DELWebCfgColumnManager","DS/DELWebPPRController/DELWebDictionaryService","DS/DELWebPPRController/columnviews/PositionMatrix","DS/DELWebPPRController/columnviews/Responsible","DS/DELWebPPRController/columnviews/BuildUp","DS/DELWebPPRController/columnviews/Requirement","DS/DELWebPPRController/columnviews/Relation","UWA/Class/Promise","text!DS/DELWebPPRController/assets/json/AttributeColumnMapping.json","css!DS/DELWebPPRController/assets/css/maturity.css"],(function(e,t,n,o,i,a,r,l,s,c,d){"use strict";const u="dicoType",g="Type",p={Title:{dataIndex:"tree",pinned:"left",editionPolicy:"EditionOnOver",width:"250px",height:"40px",getCellKPIColor:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options.grid.biColor)return e.nodeModel.options.grid.biColor}},Requirement:l,InstanceLabel:{icon:"flow-cascade",typeRepresentation:"string",width:"150px",height:"40px"},PositionMatrix:i,Revision:{typeRepresentation:"string",width:"60px",height:"40px",alignment:"center"},Description:{typeRepresentation:"string",width:"100px",height:"40px",alignment:"center"},Owner:a,Maturity:{kind:"string",width:80,height:"40px",editableFlag:!1,typeRepresentation:"tag",className:"lc-maturity-state",alignment:"center",customisation:{exportable:{lock:!1,value:!0}},ds6w:"ds6w:status",visibleFlag:!0,getCellClassName:function(e,t){return t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]}},HideShow3D:{dataIndex:"hideShow3D",sortableFlag:!1,alignment:"center",width:30,height:"40px",pinned:"right"},BuildUp:r,Menu:{width:"45px",completed:!0,dataIndex:"ContextualMenuColumn",typeRepresentation:"chevronMenuIcon",pinned:"right",editableFlag:!1,sortableFlag:!1,groupableFlag:!1,resizableFlag:!1,selectableFlag:!1,printableFlag:!1,alignment:"center",getCellValue:function(){return{}}},Scope:s,ResultingProduct:s};var f={typeRepresentation:"string",alignment:"left"},m=t.extend(n,{name:"ColumnManager",init:function(){this.dictionaryService=new o,this.attributeConfig=JSON.parse(d)},destroy:function(){this.empty(),this.dictionaryService=this.attributeConfig=null},createColumnConfiguration:function(e){var t,n,o=this;return e=e||{},c.all([this.checkCfgColumnsAvailability(),this.dictionaryService.initialize((t=e.columnConfig,n={},(Array.isArray(t)?t.map((e=>e.Columns)):[]).forEach((e=>{e.forEach((e=>{let t=e.dataIndex||"",i=o.getAttributeName(t);n[e[u]]?n[e[u]].push(i):n[e[u]]=[i]}))})),Object.keys(n).map((e=>({type:e,attributes:n[e]})))))]).then((function(){return Object.assign(p,o.getCfgColumnsConfig()),c.resolve()}))},getColumnConfiguration:function(e){return e&&p[e.name]?Object.assign({},p[e.name],e.columnProperties?e.columnProperties:{}):this.getColumnConfig(e)},empty:function(){this.dictionaryService.empty()},getAttributeName:function(e){return e?e.split(".").slice(0,-1).join("."):null},getColumnConfig:function(e){let t,n=this,o=e?this.dictionaryService.getAttributeInfo(e.dicoType,this.getAttributeName(e.dataIndex)):null,i=e&&e.columnProperties?e.columnProperties:{};return o&&o[g]&&(t=f,t=Object.assign({},t,this.attributeConfig[o[g]],{text:o.NLS},i),t.semantics=Object.assign({},function(e){let t,o,i={},a=function(e){Object.assign(i,e)};return e&&(t=n.dictionaryService.getUnit(e.Magnitude),o=n.dictionaryService.getAuthorizedValues(e),t&&a({units:t.NLSName}),o&&o.length>0&&a({possibleValues:o.map(((e,t)=>({value:t+1,label:e.NLS})))})),i}(o),t.semantics)),t}});return e.namespace("DS/DELWebPPRController/DELWebColumnManager",m)})),define("DS/DELWebPPRController/DELWebPPRController",["UWA/Core","UWA/Class/Promise","DS/DELWebComponentManager/DELWebComponentManager","DS/DELWebComponentManager/DELWebTypesUtil","DS/DELWebPPRController/DELWebPPRModel","DS/DELWebPPRController/DELWebPPRItemModel","DS/DELWebPPRController/DELWebPPRProcessModel","DS/DELWebPPRController/ProcessToolbarController","DS/Logger/Logger","DS/DELWebPPRController/DELWebColumnManager","DS/ApplicationFrame/CommandsManager","DS/Utilities/Dom","DS/DELWebComponentManager/XSOManager","DS/DELWebCommonControls/DELWebPanel","DS/ApplicationFrame/FrameWindowsManager","DS/Utilities/TouchUtils","DS/DELWebComponentManager/DELWebLinkManager","i18n!DS/DELWebPPRController/assets/nls/DELWebPPR"],(function(e,t,n,o,i,a,r,l,s,c,d,u,g,p,f,m,h,b){"use strict";return function(P){const C="DELWebPPRController",E="roots",v={value:!1,set state(e){this.value=e}},S=1;var D={configLoading:{stdTemplate:"functionIcon",semantics:{className:"relationRefresh",icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:1}}}},R=["expandAll","collapseAll","reframe","showAll","showOnly","information","openWith"],M="scopedMfg",y="resource",T="dsprcs:MfgProcessOcc",I="dsprcs:CapableResources";const L="buildUp",U="Requirement",A=1,W=0,N=2;var w,x,F,O,_,k,V,B,H,Y,j,z="2DStructure",q="roots",X="mode",G={},Q=0,J=s.getLogger("DELWebPPRController"),$=new a,K=new a,Z=new a,ee=new r,te=new i,ne=!0,oe=new c,ie={},ae={},re=function(e){e&&Object.values(o.PPRTYPES).forEach((t=>{let o=n.isInitialized(t)?n.getComponent(t):null;e({name:t,component:o})}))},le=function(t){var o,i=P.get(t)?P.get(t).options:{},a=[];return i&&i.ColumnConfig&&(i.ColumnConfig.Label&&a.push(e.clone(i.ColumnConfig.Label)),e.is(i.ColumnConfig.Columns,"array")&&i.ColumnConfig.Columns.forEach((function(t){a.push(e.clone(t))})),i.ColumnConfig.showHideShow3D&&a.push({name:"HideShow3D",icon:n.getComponent("Utils").getAssetsUrl("DELWeb3DOpersReviewApp","icons/32/I_3DColumn.png")}),i.ColumnConfig.activateBuildUp&&a.push({name:"BuildUp",icon:n.getComponent("Utils").getAssetsUrl("DELWeb3DOpersReviewApp","icons/32/I_3DColumn.png")}),i.ColumnConfig.showMenu&&a.push({name:"Menu"})),o=[],a.forEach((function(i){var a,r,l=i.name,s=!0;e.is(i.availableForPPRTypes,"array")&&(r=i.availableForPPRTypes,s=(n.getComponent("SessionModel").get(E)||[]).some((t=>e.is(r.find((e=>e===t.pprType)))))),s&&(a=oe.getColumnConfiguration(i)),a&&(a.text=a.text?a.text:b.get(t+"."+l),a.description=b.get(t+"."+l+".description")?b.get(t+"."+l+".description"):"",a.dataIndex||(a.dataIndex=i.dataIndex),i.dicoType&&(a.dicoType=i.dicoType),i.icon&&(a.icon=i.icon),a.getCellClassName?a.getCellClassName=a.getCellClassName.bind(null,i.dataIndex):a.getCellClassName=function(e,t){var n="";return t.nodeModel&&!0===t.nodeModel.options.isBeingCut&&(n="del-ppr-component-dgv-cutNode"),n}.bind(null,i.dataIndex),a.getCellSemantics&&(a.getCellSemantics=a.getCellSemantics.bind(null,i.dataIndex)),a.getCellTooltip&&(a.getCellTooltip=a.getCellTooltip.bind(null,i.dataIndex)),a.getCellValue&&(a.getCellValue=a.getCellValue.bind(null,i.dataIndex)),a.getCellValueForExport&&(a.getCellValueForExport=a.getCellValueForExport.bind(null,i.dataIndex)),o.push(a))})),o},se=()=>d.getCommandCheckHeader("ToggleDataGridView"),ce=function(t){return t&&t.origin!==C&&e.is(t.data)},de=function(e,t){var o={data:t,origin:C};n.getComponent("ModelEvents").publish({event:e,data:o})},ue=function(t){ce(t)&&e.is(t.data.node)&&de("onReframe",{path:t.data.node.getRirPath()})},ge=function(t,o=!0){var i,a=[],r=[],l=n.getComponent("SessionModel");if(ce(t)&&e.is(t.data.node)){let e=t.data.node,n=e.getRirPath();l.get(E).forEach((function(e){e.id!==n[n.length-1]?(a.push(e),r.push(e.pprType)):i=e.pprType})),l.set(E,a),-1===r.indexOf(i)&&(ae[i].destroy(),delete ae[i],delete ie[i]),o&&de("onRemoveRoots",{items:[{id:e.getReferenceId()}]})}},pe=function(t){var o,i;if(ce(t)&&e.is(t.data.node)){let e=i===A||i===N?"ShowNode":"HideNode";n.getComponent("Utils").trackChanges({category:"HideShow",action:e,label:e,dims:{pd1:t.origin}}),i=(o=t.data.node).getAttributeValue("hideShow3D"),de(i===A||i===N?"onShow":"onHide",{path:o.getRirPath()})}},fe=function(e,t){var o,i;if(e&&((o=e.getAttributeValue(L))===e.ENUM_BUILDUP.ACTIVATE||o===e.ENUM_BUILDUP.DEACTIVATE)){let a=o===e.ENUM_BUILDUP.ACTIVATE?"DeactivateBuildup":"ActivateBuildup";n.getComponent("Utils").trackChanges({category:"Buildup",action:a,label:a,dims:{pd1:n.getComponent("SessionModel").get(X),pd2:widget.getValue("usePublishedContent")?"True":"False"}}),i=o===e.ENUM_BUILDUP.ACTIVATE?e.ENUM_BUILDUP.DEACTIVATE:e.ENUM_BUILDUP.ACTIVATE,H&&H.setAttribute(L,e.ENUM_BUILDUP.DEACTIVATE),e.setAttribute(L,i),function(e,t){(!H||H.getRirPath().toString()!==e.getRirPath().toString()&&t)&&(H=e)}(e,i),t&&t(e)}},me=function(t,n,i=!1){let a=[],r=O[o.PPRTYPES.MBOM].getModel(),l=function t(o){e.is(function(e){return e.getAttributeValue(U)}(o))&&(a.push(o.getRirPath()),o.setAttribute(U,"onLoadFTA"===n?o.ENUM_REQUIREMENT.REMOVE:o.ENUM_REQUIREMENT.LOAD)),o.hasChildren()&&i&&o.getChildren().forEach(t)};ce(t)&&(r.prepareUpdate(),l(t.data.node),r.pushUpdate(),de(n,{path:a}))},he=function(t){if(ce(t)){let n=t.data;if(n.dataIndex===L&&0!==n.cell.rowID&&fe(n.cell.nodeModel,(function(e){de(e.getAttributeValue(L)?"activateBuildup":"deactivateBuildup",{path:e.getRirPath()})})),n.dataIndex===U&&n.cell.rowID>-1){let t=n.cell.nodeModel,o=t.getAttributeValue(U);e.is(o)&&me({data:{node:t}},o===t.ENUM_REQUIREMENT.LOAD?"onLoadFTA":"onRemoveFTA")}}},be=function(){let t,n;return{updateState:function(i){e.is(i.isProcessLoaded,"boolean")&&(t=i.isProcessLoaded),e.is(i.is2DStructureLoaded,"boolean")&&(n=i.is2DStructureLoaded),e.is(t,"boolean")&&n&&(!function(e){var t,n=ee.getModel();n&&(t=n.getRoots())&&t.length>0&&t.forEach((t=>{t.updateOptions({grid:e})}))}({[L]:t?"":-1}),function(e){x.publishEvent(o.PPRTYPES.PROCESS,"updateColumn",{dataIndex:L,options:e})}(i&&i.eventparams?i.eventparams:{visibleFlag:t,disabled:!t}),t=n=null)},reset:function(){t=n=null}}}(),Pe=function(e){ce(e)&&be.updateState({isProcessLoaded:!0})},Ce=function(e){ce(e)&&be.updateState({isProcessLoaded:!1})},Ee=function(e){var t;ce(e)&&(t=n.getComponent("SessionModel").get(E))&&1===t.length&&t[0].pprType===o.PPRTYPES.PROCESS&&be.updateState({isProcessLoaded:e.data.isRefreshed})},ve=function(e){if(ce(e)){v.state=!0,Q=0;let t=O.PROCESS.getNodeFromPath(e.data.path);t&&t.getAttributeValue(L)===t.ENUM_BUILDUP.DEACTIVATE&&fe(t)}},Se=function(e){if(ce(e)){v.state=!1;let t=O.PROCESS.getNodeFromPath(e.data.path);t&&t.getAttributeValue(L)===t.ENUM_BUILDUP.ACTIVATE&&fe(t)}},De=function(e){let t,o,i=function(e){let t=n.getComponent("Utils");t.removeNotification(null,"warning"),t.displayNotification({level:"warning",message:b.get(e)})};ce(e)&&!h.isLinked()&&(t=n.getComponent("SessionModel"),de("deactivateBuildup",e.data),3===Q?(be.updateState({isProcessLoaded:!1,is2DStructureLoaded:!0}),i("BuildupFailed.Error.Message"),Q=0):(o=t.get(q)[0],be.updateState({isProcessLoaded:!1,is2DStructureLoaded:!0,eventparams:{disabled:!0}}),de("initializeBuildup",o),i("BuildupActivate.Retry.Message"),o.buildupFailedOperation=e.data,Q++,t.set(q,[o])))},Re=function(e){let t;ce(e)&&(t=n.getComponent("SessionModel").get(q)[0].buildupFailedOperation,be.updateState({isProcessLoaded:!0,is2DStructureLoaded:!0}),de("activateBuildup",t))},Me=function(e){ce(e)&&be.updateState({isProcessLoaded:!1,is2DStructureLoaded:!0})},ye=function(e){ce(e)&&oe.updateAttributes(e.data)},Te=function(t){ce(t)&&e.is(t.data.nodesToShow,"array")&&de("onShow",{path:t.data.nodesToShow.map((e=>e.getRirPath()))})},Ie=function(t){ce(t)&&(Object.keys(O).forEach((o=>{if(t.origin!==o){let i=n.getComponent(o).getColumnIndex("hideShow3D");e.is(i,"number")&&i>-1&&(t.data.nodesToHide=t.data.nodesToHide.concat(O[o].getRoots()))}})),e.is(t.data.nodesToShow,"array")&&de("onShow",{path:t.data.nodesToShow.map((e=>e.getRirPath()))}),e.is(t.data.nodesToHide,"array")&&de("onHide",{path:t.data.nodesToHide.map((e=>e.getRirPath()))}))},Le=function(t,o){return new e.Promise((function(e,i){ae[t]=new p(function(e,t){let o=se(),i={identifier:e+"View",domId:e+"View",icon:{iconPath:n.getComponent("Utils").getAssetsUrl("DELWeb3DOpersReviewApp","icons/22/"+G[e].icon),iconSize:{height:m.getTouchMode()?"22px":"16px",width:m.getTouchMode()?"22px":"16px"}},immersiveFrame:f.getFrameWindow().getImmersiveFrame(),currentDockArea:WUXDockAreaEnum[G[e].dockArea],visibleFlag:!o||o.getState(),resizableFlag:!0,horizontallyStretchableFlag:!0,verticallyStretchableFlag:!0,closeButtonFlag:!1,width:400,height:400,ensureHeightDefinitionOnHierarchy:!0,progressBarOptions:{enable:!0,infiniteFlag:!0,displayStyle:"lite",emphasize:"info"}};return Object.assign(i,t)}(t,o));let a={container:ae[t].getContentContainer(),treeDocument:O[t].getModel(),columns:le(t),contextualMenu:P.get(t).options.contextualMenu?P.get(t).options.contextualMenu:[]};n.initialize(t,{...a,...o}).then((function(){n.getComponent(t).registerTypeRepresentations(D),x.subscribeEvents(t),e()})).fail(i)}))},Ue=function(e){return e?e.occurrence&&e.occurrence.length>0?e.occurrence[0]:e.id:null},Ae=function(e,t){J.error(t),ae[e]&&ae[e].displayProgressBar(!1),n.getComponent("Utils").displayNotification({level:"error",message:b.get(`Error.${e}.Failed.Message`)})},We=function(t){var i,a,r=n.getComponent("Utils");return r.markStart("processTree"),F||(F=new l(w)),F.destroyToolbar(),F.buildToolbar(),t&&t.id?(ae[o.PPRTYPES.PROCESS].displayProgressBar(!0),i=te.getProcessExpandData({id:Ue(t),ColumnConfig:G[o.PPRTYPES.PROCESS].ColumnConfig,filter:t.filter,mfgItemId:t[M]?t[M].id:null}).then((function(n){let i=function t(n,o,i){let a,r;if(n.member){let l=n.member.findIndex((e=>o.includes(e.id)));l>=0&&(i.totalItems=1,i.member=[],e.extend(i.member,[n.member[l]],!0),a=n.member[l][T],r=i.member[0][T],a&&t(a,o,r))}},a=t[M]?t[M].occurrence:null;if(t.occurrence&&t.occurrence.length>0){let e={};i(n,t.occurrence.join("/"),e),n=e}var l;(l=n)&&l.member[0]&&t[y]&&(l.member[0][I]={totalItems:1,member:[{resource:t[y].id}]}),ee.loadData({response:n,filter:t.filter,installPath:a,compOptions:G[o.PPRTYPES.PROCESS]}),ae[o.PPRTYPES.PROCESS].displayProgressBar(!1),r.markEnd("processTree","Process Tree created in")})).fail((function(e){Ae(o.PPRTYPES.PROCESS,e)}))):(a="Invalid input to load Process structure",J.error(a),i=e.Promise.reject(a)),i},Ne=function(t,o){var i,a,r=G[t],l=n.getComponent("Utils"),s=[];return o?(i=e.is(o,"array")?o:[o],l.markStart("load2DStructure"),i.forEach((function(n){let i=Ue(n);i?(ae[t]&&ae[t].displayProgressBar(!0),O[t].removeRoot(i),s.push(te.getExpandData({id:i,model:r.model,ColumnConfig:r.ColumnConfig,filter:n.filter,pathFilter:n.occurrence,predecessors:n.predecessors,pprType:n.pprType}).then((function(n){let i=Object.assign(n,o,{id:Ue(o)},r.treeOptions);return new e.Promise((function(e){i.onComplete=function(){l.markEnd("load2DStructure","Tree structure created in"),ae[t]&&ae[t].displayProgressBar(!1),e()},O[t].loadData(i)}))})).fail((function(e){Ae(t,e)})))):J.warn("Failed to load data in "+t+" as root is not found")})),a=e.Promise.all(s)):J.warn("no object to load"),a||e.Promise.resolve()},we=function(){var t=g.getHSO().get(),n=[];e.is(t,"array")&&t.forEach((e=>{e.getReferenceType&&o.isWKIType(e.getReferenceType())&&(ee.highlight(e.getRirPath(),!1),n.push(e))})),n.forEach((function(e){g.getHSO().remove(e)}))},xe=function(t){var n;ce(t)&&(n=t.data,[ee,$,K,Z].forEach((e=>{e.getModel().unselectAll()})),we(),n&&e.is(n.textualInstructionPIds,"array")&&n.textualInstructionPIds.forEach((e=>{var t=ee.getNodeFromID(null,e);t&&(g.getHSO().add(t),ee.highlight(t.getRirPath(),!0))})))},Fe=function(e,t){ce(t)&&([ee,$,K,Z].forEach((e=>{e.getModel().unselectAll()})),[$,K,Z].forEach((n=>{n.highlight(t.data.path[0],e.state)})),we())},Oe=function(e,t){ce(t)&&[$,K].forEach((n=>{n.preSelect(t.data.path[0],e.state)}))},_e=function(t){var n,i;if(t&&t.origin!==C)switch(t.origin){case o.PPRTYPES.MBOM:case o.PPRTYPES.PRODUCT:case o.PPRTYPES.RESOURCE:n=t.data.node,i=e.is(n)&&-1!==n.rowID&&!n.nodeModel.isSelected()?{path:n.nodeModel.getRirPath(),clear:!0}:{path:[],clear:!0},de("onPreHighlight",i)}},ke=(k=null,V=[],B=n.getComponent("ModelEvents"),{subscribeEvents:function(e){_=n.getComponent(e).getModelEvents(),k=_.subscribe({event:"onPPRHover"},_e),V.push(B.subscribe({event:"onPreHighlight"},Oe.bind(null,{state:!0}))),V.push(B.subscribe({event:"onUnPreHighlight"},Oe.bind(null,{state:!1})))},unsubscribeEvents:function(){_&&k&&_.unsubscribe(k),V.forEach((e=>{n.getComponent("ModelEvents").unsubscribe(e)})),k=null,V=[]}}),Ve=async function(e,t,n){let o;return ie[e]?o=ie[e].then((function(){return Ne(e,t)})):(ke.subscribeEvents(e),o=ie[e]=Le(e,n).then((function(){let n=Ne(e,t);return function(e,t){let n,o=t,i=Object.keys(ae).filter((n=>n!==t&&ae[n].currentDockArea===e));if(i.length>0)for(n=i.length-1;n>=0;n--)ae[i[n]].attachToWindow(ae[o],WUXSnapAreaEnum.InsideArea,"before"),o=i[n]}(WUXDockAreaEnum.LeftDockArea,e),n}))),o},Be=async function(t){let n=o.PPRTYPES.MBOM,i=P.get(n).options.contextualMenu;await Ve(n,t,{contextualMenu:[...i,"loadFTA","removeFTA","loadAllFTA","removeAllFTA"],onContextualMenu:function(t,n){let o,i=n.slice(),a=["loadFTA","removeFTA"];return t&&t.cellInfos&&-1!==t.cellInfos.rowID&&(o=t.cellInfos.nodeModel,i=n.filter((t=>!!e.is(o.getAttributeValue(U))||!a.includes(t.name)))),i}}),await async function(e){let t=O[o.PPRTYPES.MBOM],n=await te.getItemPathsHavingRequirement(e);n.length>0&&t.updateOptions(n,{grid:{Requirement:S}})}(t)},He=function(i,a){var r,l=n.getComponent("Utils");if(ce(i)&&w.is2DStructureEnabled()){let s=[],c=[];switch((r=i?i.data:{}).pprType){case o.PPRTYPES.PROCESS:l.markStart("pprProcessOpen"),Le(o.PPRTYPES.PROCESS).then((function(){c.push(We(r))})),s.push(Le(o.PPRTYPES.MBOM,{currentDockArea:WUXDockAreaEnum.RightDockArea,contextualMenu:R})),s.push(Le(o.PPRTYPES.RESOURCE,{currentDockArea:WUXDockAreaEnum.RightDockArea,contextualMenu:R})),t.all(s).then((function(){ae[o.PPRTYPES.MBOM]&&ae[o.PPRTYPES.RESOURCE]&&ae[o.PPRTYPES.MBOM].attachToWindow(ae[o.PPRTYPES.RESOURCE],WUXSnapAreaEnum.InsideArea,"before"),r[M]?c.push(Ne(o.PPRTYPES.MBOM,r[M])):n.getComponent("Utils").displayNotification({level:"warning",message:b.get("ScopedMfgNotFound.Error.Message")}),c.push(Ne(o.PPRTYPES.RESOURCE,r[y])),t.all(c).then((function(){if(be.updateState({is2DStructureLoaded:!0}),r.operation&&e.is(r.operation.occurrence,"array")&&r.operation.occurrence.length>0&&!a){let e={data:{path:r.operation.occurrence}};qe(e),ve(e)}de("onLoad2DStructureComplete",r)})).fail((function(){de("onLoad2DStructureFailed",r)})),l.markEnd("pprProcessOpen","PPR Process Opened in ")}));break;case o.PPRTYPES.MBOM:Be(r).then((function(){de("onLoad2DStructureComplete",r)})).catch((function(){de("onLoad2DStructureFailed",r)}));break;default:Ve(r.pprType,r).then((function(){de("onLoad2DStructureComplete",r)})).catch((function(){de("onLoad2DStructureFailed",r)}))}}},Ye=function(){ke.unsubscribeEvents(),[ee,K,$,Z].forEach((e=>{e.empty()})),re((e=>{x.unsubscribeEvents(e.name),e&&e.component&&e.component.clean()})),F&&F.destroyToolbar(),Object.keys(ae).forEach((e=>ae[e].destroy())),ae={},be.reset(),Q=0,ie={},v.state=!1},je=function(e){var t,i,a,r=[],l=ee.getModel().getSelectedNodes(),s=[];if(ce(e)&&e.data.node){t=e.data.node,i=t.isSelected(),we();let c=i?"Highlight":"UnHighlight";switch(n.getComponent("Utils").trackChanges({category:"CrossHighlight",action:c,label:c,dims:{pd1:e.origin}}),e.origin){case o.PPRTYPES.MBOM:case o.PPRTYPES.PRODUCT:case o.PPRTYPES.RESOURCE:i&&(ee.getModel().unselectAll(),v.value||(e.origin===o.PPRTYPES.MBOM?Z.getModel().unselectAll():$.getModel().unselectAll())),u.isCurrentlyCalledFromUIInteraction()&&de(i?"onHighlight":"onUnHighlight",{path:t.getRirPath()});break;case o.PPRTYPES.PROCESS:i&&[$,K,Z].forEach((e=>{e.getModel().unselectAll()})),(a=t.getConsumedItems()).MfgItems.length>0&&a.MfgItems.forEach((e=>{$.highlight(e,i),r.push(e)})),a.Resources.length>0&&a.Resources.forEach((e=>{var t=Z.getPathFromId(e);Z.highlight(t,i),r.push(t)})),l.forEach((e=>{e.getReferenceType&&o.isWKIType(e.getReferenceType())&&s.push(e.getInstanceId())})),F.isWorkInstructionsEnabled()&&de("highlightLinkedViews",{pid:s}),de(i?"onHighlight":"onUnHighlight",{path:r})}}},ze=function(e){let t=[];ce(e)&&(t=ae[o.PPRTYPES.PROCESS]&&F.isWorkInstructionsEnabled()?[o.PPRTYPES.PROCESS]:Object.keys(ae),t.forEach((t=>{e.data.state?ae[t].show():ae[t].hide()})))},qe=function(e){ce(e)&&e.data.path&&re((t=>{var o;t&&t.component&&O[t.name].getNodeFromPath&&(o=O[t.name].getNodeFromPath(e.data.path))&&n.getComponent(t.name).focus(o,!1,!0)}))},Xe=function(t){var o,i;ce(t)&&(i=t.data,e.is(i.tagColors,"array")&&i.tagColors.length>0&&(o=i.tagColors[0].predicate,re((e=>{var i,a=[];e&&e.component&&(((i=O[e.name].getModel())?i.getAllDescendants():[]).forEach((e=>{-1===a.indexOf(e.getReferenceId())&&a.push(e.getReferenceId())})),n.getComponent("Utils").getAttributeForIds(a,[o]).then((function(n){e.component.biColorize(t.data,n)})).fail((function(e){J.error(e)})))}))))},Ge=function(){re((e=>{e&&e.component&&e.component.biUnColorize()}))},Qe=function(e){He(e)},Je=function(){let e=se();e&&e.disable(),ne=!1,Ye()},$e=function(){let e=se(),t=n.getComponent("SessionModel").get(E);ne=!0,e&&e.enable(),t&&t.forEach((e=>{He({data:e})}))},Ke=function(t){if(ce(t)){let n=t.data||{};Object.keys(n).forEach((t=>{if(t===z)e.is(n[z].disable,"boolean")&&(n[z].disable?Je():$e())}))}},Ze=function(){!1===ne&&$e()},et=()=>{let e=se();e&&e.setState(!1)},tt=()=>{let e=se();e&&e.setState(!0)},nt=function(e){let t=n.getComponent("SessionModel").get(E),i=function(e,t){let n=e.removeRoot(t.id);n&&ge({data:{node:n}},!1)};if(ce(e)&&e.data.items&&t){let n=e.data.items;if(t.some((e=>e.pprType===o.PPRTYPES.PROCESS))){let e=t.find((e=>n.some((t=>t.id===e.id))));e&&(i(O[o.PPRTYPES.PROCESS],e),Ye())}else[o.PPRTYPES.MBOM,o.PPRTYPES.PRODUCT,o.PPRTYPES.RESOURCE].forEach((e=>{let t=O[e];t&&n.forEach(i.bind(this,t))}))}},ot=function(){var t=n.getComponent("SessionModel"),o=t.get(E);v.state=!1,e.is(o,"array")&&o.length>0&&(o.forEach((function(e){nt({data:{items:[{id:e.id}]}}),He({data:e},!0)})),t.set(E,o))},it=function(e){let t,i,a,r=n.getComponent("SessionModel"),l=r.get(E);l&&e&&e.data&&e.data.filterRootIds&&1===e.data.filterRootIds.length&&(t=!0!==e.data.empty?e.data.CVQueryV2.filter:null,i=e.data.filterRootIds[0],l.forEach((function(e){if(e.pprType===o.PPRTYPES.PROCESS){if(e.filter=t,e[M]){let n=e[M];n&&(n.filter=t)}}else e.id===i&&(e.filter=t)})),a=l.find((e=>e.pprType===o.PPRTYPES.PROCESS&&e[M].id===i||e.id===i)),a&&(nt({data:{items:[{id:a.id}]}}),r.set(E,l),He({data:a})))},at=function(e,t){if(ce(e)){let o=e.data.path,i=function(t,n){return((e.data.attributes||{})[t]||{})[n]};Object.keys(O).forEach((e=>{let a=O[e],r=a.getModel();o?(r.prepareUpdate(),o.forEach((o=>{if(!0===i(o[o.length-1],"isCustom"))return;let r=a.getNodeFromPathV2(o,!0);r&&!n.getComponent(e).isColumnDisabled("hideShow3D")&&(!0===i(r.getReferenceId(),"isPartial")||t===r.ENUM_3DVISIBILITY.ON&&r.get3DVisibility()===r.ENUM_3DVISIBILITY.PARTIAL?r.update3DVisibility(r.ENUM_3DVISIBILITY.PARTIAL):r.update3DVisibility(t),r.changeParent3DVisibility())})),r.pushUpdate()):J.warn("No path found")}))}},rt=function(e){at(e,W)},lt=function(e){at(e,A)},st=function(e){me(e,"onLoadFTA")},ct=function(e){me(e,"onRemoveFTA")},dt=function(e){me(e,"onLoadFTA",!0)},ut=function(e){me(e,"onRemoveFTA",!0)},gt=function(){var e=n.getComponent("ModelEvents"),t=[{eventName:{event:"loadData"},callback:Qe},{eventName:{event:"hide2DStructure"},callback:et},{eventName:{event:"show2DStructure"},callback:tt},{eventName:{event:"onHighlight"},callback:Fe.bind(null,{state:!0})},{eventName:{event:"onUnHighlight"},callback:Fe.bind(null,{state:!1})},{eventName:{event:"onSelectView"},callback:xe},{eventName:{event:"empty"},callback:Ye},{eventName:{event:"onRefresh"},callback:ot},{eventName:{event:"onApplyNGFilter"},callback:it},{eventName:{event:"onToggleDataGridview"},callback:ze},{eventName:{event:"onFocus"},callback:qe},{eventName:{event:"onBIColorize"},callback:Xe},{eventName:{event:"onBIUnColorize"},callback:Ge},{eventName:{event:"onBuildUpActivated"},callback:ve},{eventName:{event:"onBuildUpDeactivated"},callback:Se},{eventName:{event:"onProcessLoadCompleted"},callback:Pe},{eventName:{event:"onProcessLoadFailed"},callback:Ce},{eventName:{event:"onViewerRefreshed"},callback:Ee},{eventName:{event:"onViewerRefreshFailed"},callback:Ee},{eventName:{event:"onRemoveRoots"},callback:nt},{eventName:{event:"onHide"},callback:rt},{eventName:{event:"onShow"},callback:lt},{eventName:{event:"load2DStructure"},callback:$e},{eventName:{event:"remove2DStructure"},callback:Je},{eventName:{event:"setAppConfig"},callback:Ke},{eventName:{event:"onWidgetUnlinked"},callback:Ze},{eventName:{event:"onBuildupConnectionFailed"},callback:De},{eventName:{event:"onBuildupInitialized"},callback:Re},{eventName:{event:"onBuildupInitializationFailed"},callback:Me}],o=[];return{subscribeEvents:function(){t.forEach((function(t){o.push(e.subscribe(t.eventName,t.callback))}))},unsubscribeEvents:function(){o.forEach((t=>{e.unsubscribe(t)})),o=[]}}}();return Y=[{eventName:{event:"onShowAll"},callback:Te},{eventName:{event:"onShowOnly"},callback:Ie},{eventName:{event:"onReframe"},callback:ue},{eventName:{event:"onSelectionChange"},callback:je},{eventName:{event:"onHideShow3DStateChange"},callback:pe},{eventName:{event:"onCellClick"},callback:he},{eventName:{event:"onDelayedModelDataRequest"},callback:ye},{eventName:{event:"onRemoveRoot"},callback:ge},{eventName:{event:"onLoadFTA"},callback:st},{eventName:{event:"onRemoveFTA"},callback:ct},{eventName:{event:"onLoadAllFTA"},callback:dt},{eventName:{event:"onRemoveAllFTA"},callback:ut}],j={},x={publishEvent:function(e,t,o){n.getComponent(e).getModelEvents().publish({event:t,data:o})},subscribeEvents:function(e){var t=n.getComponent(e).getModelEvents();j[e]=[],Y.forEach((function(n){j[e].push(t.subscribe(n.eventName,n.callback))}))},unsubscribeEvents:function(t){var o=n.getComponent(t).getModelEvents();j[t]&&e.is(j[t],"array")&&(j[t].forEach((e=>{o.unsubscribe(e)})),j[t]=[])}},O={PROCESS:ee,MBOM:$,PRODUCT:K,RESOURCE:Z},Object.keys(o.PPRTYPES).forEach((e=>{G[e]=P.get(e).options})),w={initialize:async function(e){var t,n,o=e?e.map((e=>P.get(e).options.ColumnConfig)):null;try{gt.subscribeEvents(),[ee,$,K,Z].forEach((e=>{e.getModel().getXSO().onPreAdd((function(e){u.isCurrentlyCalledFromUIInteraction()&&de("onPreAddSelect",e)})),e.getModel().getXSO().onPostAdd((function(e){u.isCurrentlyCalledFromUIInteraction()&&g.getCSO().add(e)})),e.getModel().getXSO().onPostRemove((function(e){g.getCSO().remove(e)}))})),await oe.createColumnConfiguration({columnConfig:o}),de("onPPRReady")}catch(e){t="failed to initialize PPR",n=(n=e)||new Error(t),J.error(t,n.toString())}},getPPRPanels:function(){return ae},empty:async function(){Ye()},is2DStructureEnabled:function(){return!!e.is(ne,"boolean")&&ne},destroy:function(){ne=null,Object.values(o.PPRTYPES).forEach((e=>{var t=n.getComponent(e);t&&t.destroy()})),gt.unsubscribeEvents()}},w}}));