window.IPConfig=window.IPConfig?window.IPConfig:{defaultAppId:"ENOFOL3_AP",userAppId:"ENOFOL3_AP",mepreferenceRepositoryName:"BookmarkEditorRepository",default:"FolderSection_AllFolders",defaultType:"Workspace Vault",main:{Workspace:"FolderSection_AllFolders","Workspace Vault":"FolderSection_AllFolders"},iconType:"rich",sections:[{name:"Personal"},{name:"FolderSection_favorite",prefName:"FolderEditorFavoriteFolderList",icon:{module:"IPClassifyUXUtil",path:"icons/22/I_CommonIcon_Favorite_22.png"}},{name:"FolderSection_AllFolders",icon:{module:"FolderEditor",path:"icons/22/foldersectionall.png"}}],plugins:["DS/BookmarkEditor/plugins/BkPlugin","DS/FolderEditor/plugins/product/PrdPlugin"],computedColumns:["DS/FolderEditor/views/additionalColumns/FolderIsLastRevisionColumn","DS/FolderEditor/views/additionalColumns/BookmarkLocationColumn","DS/FolderEditor/views/additionalColumns/ClassificationAttributesColumn","DS/FolderEditor/views/additionalColumns/ThumbnailColumn","DS/FolderEditor/views/additionalColumns/ApprovalStatusColumn","DS/FolderEditor/views/additionalColumns/LibraryClassesColumn","DS/FolderEditor/views/additionalColumns/FavoriteTitleColumn","DS/IPClassifyUXUtil/views/additionalData/manipulationUnitColumns","DS/FolderEditor/views/additionalColumns/RelationColumns"],indexModeHelp:"ENOFol3UAPanelMap/foldereditor-c-IndexMode.htm",settingsFile:"text!DS/FolderEditor/assets/folder_settings.json",filesToPrepare:{findInTreeNls:"i18n!DS/FolderEditor/assets/nls/FolderFindInTree"},columnDefinition:"DS/IPTableMePreferences/assets/conf/ENOFOL3_IPTableMePreferences_conf.json",parameters:{treeOrdering:!0,customViews:!0,keyProbes:"FolderWidget",useDefaultRelationOrder:!0,pasteWithMove:!0},toolbarCmds:{file:"DS/BookmarkEditor/plugins/BkPlugin",method:"getToolbarCmds"},layout:{treeView:!0},preferences:["filtered-content","allow-products-expand","show-sub-folders","activateBIFilter","useIndexAccleration","autoSwitch",{name:"activateOpenWith18xFD01",debug:!0},{name:"expandSaveLimitation",debug:!0},{name:"resetCustomization",debug:!0},{name:"compactModeForLeftSidebar",debug:!0}],widgetNls:"i18n!DS/FolderEditor/assets/nls/BookmarkEditorSpecific"},define("DS/BookmarkEditor/utils/DocumentUtils",["DS/ApplicationFrame/CommandsManager","DS/WidgetServices/WidgetServices","DS/IPClassifyUXUtil/CredentialsView","DS/IPClassifyUtil/IPClassifyUtility","DS/FolderEditor/commands/FolderCommands","DS/FolderEditor/Folder_CSO","DS/FolderEditor/utils/SettingsHandler","DS/FolderEditor/utils/WidgetHandlerUtil","DS/FolderUpload/FolderUpload","DS/IPClassifyUXUtil/ActionBar/IPCommandManager"],((e,o,r,t,i,n,a,s,l,d)=>({uploadFilesInFolder:function(e,o){e&&e.getType()&&a.isTreeType(e.getType())?n.getCurrentBookmarkId()===e.getID()?i.uploadFileCmd(o):i.uploadFileCmd(o,e):console.log("  Error in FolderDnDServices.uploadFilesInFolder, dropTarget_Info is not a Folder")},uploadFoldersInFolder:async function(e,i){if(e&&e.getID()){t.sendTrackerPageEvent("FolderWidget_DnD","Folder Upload");var a=await new Promise((e=>{o.get3DSpaceUrlAsync({onComplete:e})})),c=widget.widgetDomain,u=e.getID(),p=e.label,f=widget.title.split("-"),m={fetchSecurityContext:function(){return r.getCredential()},fetchCollabSpaceDisplayName:function(){return f[0]},platformUrls:{"3DSpace":a,"3DDashboard":c,platformId:o.getTenantID()}},g=new l(m),F=d.getCommandByContext("FolderUpload");g.events.subscribe({event:"operation-complete"},(function(e){require("DS/FolderEditor/views/FolderMode").switchtoAuthoringMode();var o=n.getCurrentBookmarkId();e.parentId==o&&(s.refreshWidgetContent(),console.log("After Completion of the Command..."))})),g.events.subscribe({event:"enable-folder-upload-command-in-ui"},(function(e){F.enable()})),g.events.subscribe({event:"disable-folder-upload-command-in-ui"},(function(e){F.disable()})),g.handleDnD(u,i.dataTransfer,p)}else console.log("  Error in FolderDnDServices.uploadFilesInFolder, dropTarget_Info is not a Folder")}}))),define("DS/BookmarkEditor/plugins/BkPlugin",["DS/BookmarkEditor/utils/DocumentUtils","DS/WebappsUtils/WebappsUtils","DS/IPClassifyUtil/IPClassifyAlert","DS/IPClassifyUtil/IPClassifyUtility","DS/WidgetServices/WidgetServices","DS/FolderEditor/views/FolderGlobalActiveBookmark","DS/FolderEditor/utils/FolderEditorUtil","DS/FolderEditor/utils/ServerDataAccess","DS/FolderEditor/utils/SettingsHandler","DS/FolderEditor/utils/FolderSearch","DS/FolderEditor/Folder_CSO","DS/FolderEditor/service/FolderEditorWebService","DS/FolderEditor/utils/FolderEditorControl","DS/FolderEditor/service/FolderDnDServices","DS/FolderUpload/FolderUpload","i18n!DS/FolderEditor/assets/nls/FolderEditor"],((e,o,r,t,i,n,a,s,l,d,c,u,p,f,m,g)=>{let F=o.getWebappsAssetUrl("FolderEditor","icons/I_Bookmark_v2.png"),k=o.getWebappsAssetUrl("FolderEditor","icons/I_BookmarkInherit_v2.png"),E={message:g.msg_warning_Linked_Or_Shortcut,className:"warning"},S="Workspace Vault",C=[S,"Workspace"];function P(e){return{getPlatformUrls:function(){return e.platformUrls},getSecurityContext:function(){return widget.getValue("pad_security_ctx")}}}function D(e){return u.setFolderProperties({...e})}function v(e){var o=c.getCurrentBookmarkId(!0);!d.isSearchActive()&&o&&(s.isKindOfSync(e.type,"Workspace")||null!=e.grid.ParentBk&&e.grid.ParentBk!==o)&&(e.grid.isLinkedFolder="TRUE")}var T=function(e){for(var o=!1,r=e.dataTransfer.items,t=0;t<r.length;t++){let e=r[t].webkitGetAsEntry();if(e&&e.isDirectory){o=!0;break}}return o};function h(o,t,{dataDropped:n}){let a=!1;if(!n&&f.hasFilesInEvent(t)){if(0!=i.getTenantID().localeCompare("OnPremise"))if(T(t))e.uploadFoldersInFolder(o,t);else{var s=t.dataTransfer?t.dataTransfer.files:t.detail.files;e.uploadFilesInFolder(o,s)}else if(T(t))r.displayNotification({message:g.msg_warning_dndWindowsFoldernotsupported,className:"warning"});else{s=t.dataTransfer?t.dataTransfer.files:t.detail.files;e.uploadFilesInFolder(o,s)}a=!0}return a}function b(e,o){if(!!f.hasFilesInEvent(o))throw new Error("Not a favorite");return!1}function y(o,r,{dataDropped:t}){let n=!1;if(0!=i.getTenantID().localeCompare("OnPremise")&&f.hasFilesInEvent(r)){if(function(e){for(var o=!1,r=e.dataTransfer.items,t=0;t<r.length;t++){let e=r[t].webkitGetAsEntry();if(e&&!e.isDirectory){o=!0;break}}return o}(r))throw new Error("Only folders authorized");e.uploadFoldersInFolder(o,r),n=!0}else if(!t.data||!t.data.items||!t.data.items.every((e=>s.isKindOfsSync(e.objectType,C))))throw new Error("Not supported in Bookmarks section");return n}function I({mode:e,source:o,target:r,listOfContent:t,listOfTreeElements:i}){let n=null;if(r.id===o.id)if("CUT"!==e){if(UWA.is(t,"array")){let e=p.getContentRootNodes();for(var a=0;a<t.length;a++){let r=t[a].getID();if(e.find((e=>e.getID()===r))){n=l.buildNls(g,"msg_error_MoveInSamefolder",{typeStruct:l.getSectionSubNls(o.section,!1)});break}}}}else n=l.buildNls(g,"msg_error_MoveInSamefolder",{typeStruct:l.getSectionSubNls(o.section,!1)});else if("CUT"===e&&!l.isRootElement(o.getType(),o.section)&&i.length>0){if(UWA.is(i,"array")&&1===i.length&&i[0]===o){var s=o.getParent();s&&s.id===r.id&&(n=l.buildNls(g,"msg_error_MoveInSamefolder",{typeStruct:l.getSectionSubNls(o.section,!1)}))}}if(n)throw new Error(JSON.stringify(n));return!0}let B={ActionBar_NewFolderCmd:{safeForSession:!0,author:!1,white_click:!0,search:!1,TREE:{FavSection:!1}},ActionBar_ActiveBookmarkCmd:{TREE:!0},AddToFavorites:{ctxFavorite:!0,TREE:{types:{Workspace:!0,"Workspace Vault":!0}},CONTENT:{FavContent:!0}},FolderUpload:{search:!1,multisel:!1,check:function(){return!m.IsAnOperationOngoing()},TREE:{types:{Workspace:!0,"Workspace Vault":!0,FolderSection_AllFolders:!0,"Personal Workspace":!0}}},FolderDownload:{multisel:!1,TREE:{types:{Workspace:!0,"Workspace Vault":!0}},CONTENT:{types:{Workspace:!0,"Workspace Vault":!0}}},ActionBar_AccessRightCmd:{TREE:{PersonalBookmark:!1},CONTENT:{PersonalBookmark:!1}},ActionBar_TransferOwnership:{TREE:{PersonalBookmark:!1},CONTENT:{PersonalBookmark:!1}},MaturityHdr:{TREE:{PersonalBookmark:!1},CONTENT:{PersonalBookmark:!1}},ActionBar_ChangeOwner:{TREE:{PersonalBookmark:!1},CONTENT:{PersonalBookmark:!1}},ImportCSVBookmark:{safeForSession:!0,search:!1,TREE:{FavSection:!1}},ImportCSV:{safeForSession:!0,search:!1,TREE:{FavSection:!1}},CreateRouteHdr:{TREE:{PersonalSection:!1}},Copy:{TREE:{PersonalSection:!1}},ActionBar_ShareBookmarkLink:{TREE:{PersonalSection:!1}},DeleteHdr:{TREE:{PersonalSection:!1}},UnifiedExportCommand:{TREE:{PersonalSection:!1}},ActiveFolder:{search:!1,check:function(){return p.isActiveBookmarkActivated()},TREE:{FavSection:!1,RootSection:!1}},DownloadPublication:{multisel:!1,CONTENT:{check:function(e){return"TDP_PackagePublication"===e.options.type&&e.getInternalValue("ds6w:status")&&-1===e.getInternalValue("ds6w:status").indexOf("In Preparation")}}},GeneratePublication:{multisel:!1,CONTENT:{check:function(e){return"TDP_CollaborationPackage"===e.options.type&&e.getInternalValue("ds6w:status")&&e.getInternalValue("ds6w:status").indexOf("Released")>=0}}}};return{getToolbarCmds:function(){return new Promise((e=>{u.getToolbar().then(e).catch((o=>{strError=o.serverErr,strError&&strError.error&&r.displayNotification({message:strError.error,className:"error"}),e()}))}))},updateCmdsRules:function(e){t.concatJsonValue(e,B)},updateCmdsVariables:function(e,o,r){e?(r.treeIsPersonalSection="Personal Workspace"==o.getType(),r.treeIsPersonalBookmark=r.treeIsPersonalSection||o.isPersonal):r.oneisPersonal=!(!r.oneisPersonal&&!o.isPersonal)&&o.isPersonal},applyCmdsVariables:function(e,o,r){let t=!0;return 1===e?(!1!==t&&(!0===o.TREE.PersonalBookmark?t=r.treeIsPersonalBookmark:!1===o.TREE.PersonalBookmark&&(t=!r.treeIsPersonalBookmark)),!1!==t&&!1===o.TREE.PersonalSection&&(t=!r.treeIsPersonalSection)):2===e&&!1!==t&&!1===o.CONTENT.PersonalBookmark&&(finalValue=t=!r.oneisPersonal&&t),t},updateNodesFromRelations:function(e,o){if(o.from&&o.to&&o["bks.TreeOrder"]){let r=e.get(o.to);r&&(r.options.relationOrder=Array.isArray(o["bks.TreeOrder"])?o["bks.TreeOrder"][0]:o["bks.TreeOrder"])}},prepareDataFromIndex:function(e,o){let r=p.getContentMode(),t=s.isKindOfsSync(o.type,C);if(t&&(o.grid["ds6wg:revision"]=""),("read"==r||"search"==r)&&t&&C.includes(o.type)){let e=o.grid["ds6w:classification"]||o.grid["icon_2ddefaultthb.subtype"];if(e&&"shared"==e.toLowerCase()){var i=k;o.icons=[i],o.grid["ds6w:classification"]="Shared"}else{var n=F;o.icons=[n],o.grid["ds6w:classification"]=e&&"Personal"==e.toLowerCase()?"Personal":"Bookmark"}}v(o)},prepareDataFromDB:function(e,o){s.isKindOfsSync(o.type,C)&&(o.grid["ds6wg:revision"]=""),o.isDownloadable=o.isDownloadable,v(o)},prepareTreeData:function(e,o){var r=null;!0===o.isFavorite&&(r=o.icons.length>0?o.icons[0]:F),o.folderClassification=e.folderClassification,o.icons=r?[r]:0===o.icons.length||C.includes(o.type)?o.folderClassification&&"shared"===o.folderClassification.toLowerCase()?[k]:[F]:o.icons},completeTreeNode:function(e,o,r){(o.isPersonal||r.isPersonal||"Personal Workspace"===o.type)&&(e.isPersonal=!0)},completeNode:function(e,r,t){if("TRUE"===r.publishOnConnect){var i=o.getWebappsAssetUrl("FolderEditor","icons/folderPublishBadge.png");a.setBadge(e,"bottomRight",i)}if("TRUE"===e.getAttributeValue("isLinkedFolder")){i=o.getWebappsAssetUrl("FolderEditor","icons/I_ShortcutBookmark.png");a.setBadge(e,"bottomRight",i),e.undraggable=E}e.hasOwnProperty("isRelationsObjectGroupingNode")&&e.isRelationsObjectGroupingNode&&(e.undraggable=!0),t.isPersonal&&s.isKindOfSync(S,e.getType())&&(e.isPersonal=!0)},updateTreeNode:function(e,r){!function(e,r){let t="TRUE"===r?o.getWebappsAssetUrl("FolderEditor","icons/folderPublishBadge.png"):"";e.setBadges({bottomRight:t})}(e,r.publishOnConnect),p.isActiveBookmarkActivated()&&function(e,o){var r=p.getActiveFolder(),t=r.id,i=r.disabledId;t===o?e.setBadges({topRight:n.ICON_ACTIVE}):i===o&&e.setBadges({topRight:n.ICON_ACTIVE_DISABLED})}(_pid)},fillContentDrag:function(e,o){o.folderClassification=e.options.grid.folderClassification,o.isPersonalFolder=e.isPersonal},fillTreeDrag:function(e,o){o.folderClassification=e.options?e.options.folderClassification:void 0,o.isPersonalFolder=e.isPersonal},fillForDrop:function(e,o){var r=o.isPersonalFolder,t=o.folderClassification;e.isPersonal=r,e.folderClassification=t},updatePropertiesPanel:function(e,o){e.addFacets([{require:"DS/FolderEditor/views/additionalFacets/SpecificationsFacet",alwaysVisible:!1,supportMerge:!1,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"doc_specifications",text:g.get("Specification"),icon:"doc-log"},options:{appContext:P(o),hideAttachments:!0,readonly:!1}},{require:"DS/FolderEditor/views/additionalFacets/AttachmentsFacet",alwaysVisible:!1,supportMerge:!1,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"doc_attachments",text:g.get("Attachments"),icon:"attach"},options:{appContext:P(o),hideSpecifications:!0,readonly:!1,supportedTypes:{includedTypes:["Document","Drawing"],excludedTypes:[]}}}])},getTypesByAction:function(){let e=["Workspace Vault","Workspace"],o=[...e,"Personal Workspace"],r={dropLeftView:{genericBkWithPersonal:h,FolderSection_AllFolders:y,FolderSection_favorite:b},isDropAuthorized:{genericBkWithPersonal:()=>!0,FolderSection_favorite:()=>!0,FolderSection_AllFolders:()=>!0},moveTreeElements:{genericBkWithPersonal:u.movefolder.bind(u)},moveContent:{genericBkWithPersonal:u.movecontent.bind(u)},moveExternalObject:{genericBookmark:u.moveExternalObject.bind(u)},removeContent:{genericBkWithPersonal:u.removecontent.bind(u)},removeExternalLink:{genericBookmark:u.removeExternalLink.bind(u)},addcontent:{genericBkWithPersonal:u.addcontent.bind(u)},addExternalObject:{genericBookmark:u.addExternalObject.bind(u)},copyTreeElement:{genericBkWithPersonal:u.copyfolder.bind(u),FolderSection_AllFolders:u.copyfolder.bind(u)},checkCopyTree:{genericBkWithPersonal:u.checkCopyfolder.bind(u),FolderSection_AllFolders:u.checkCopyfolder.bind(u)},canBePasted:{genericBkWithPersonal:I,FolderSection_AllFolders:I},renameTreeElement:{genericBookmark:D}};for(let t in r){let i=r[t];i.genericBookmark&&e.forEach((e=>{i[e]=i.genericBookmark})),i.genericBkWithPersonal&&o.forEach((e=>{i[e]=i.genericBkWithPersonal}))}return r}}}));