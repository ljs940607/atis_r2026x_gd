define("DS/RTConvAPI/formatters/formatRTCResponse",[],(function(){"use strict";function t(t){return{login:t.login,first_name:t.firstName,last_name:t.lastName,username:t.login,email:t.email,uuid:t.uuid,country:t.country}}return{RTCUserToSwymUser:t,RTCConvToSwymConv:function(e){return{id:e.id||e.convId,subject_uri:e.subjectUri,uri:e.subjectUri,community_type:"dm",dm_type:e.isPrivate?"private":"group",topic:e.title,creation_date:e.dateCreation,is_hidden:e.isHidden,last_message:e.lastMsgId?{message_id:e.lastMsgId}:null,mark:e.lastMsgReadId?{message_id:e.lastMsgReadId}:null,users:e.members&&e.members.map(t)||[],updated_at:e.dateLastMsgCreate||e.lastModificationDate,position:-1!==e.favorite?e.favorite:null}}}})),define("DS/RTConvAPI/drivers/Swym_driver",["DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/PlatformAPI/PlatformAPI"],(function(t,e,s){"use strict";class n{constructor(t){this.platformId=t,this.swymUrl=null,this.csrftoken=null}static getInstance(t){return t?((!this.instance||!this.instance.platformId||t&&this.instance.platformId!==t)&&(this.instance=new n(t)),this.instance):console.error("SwymDriver needs a platformId")}getSwymUrl(){return new Promise(((t,n)=>{if(this.swymUrl)return t();e.getServicesByPlatform({services:["3DSWYM"],platforms:[this.platformId],config:{url:s.getApplicationConfiguration("app.urls.registry")}}).then((e=>{if(!e||!e[0]||!e[0].services)return n("failed to retrieve the 3DSwym url of tenant "+this.tenant);this.swymUrl=e[0].services[0].url,t(this.swymUrl)})).catch((t=>n(t)))}))}getCSRFToken(){return new Promise(((e,s)=>{if(!this.swymUrl)return s("Need Swym url to get CSRF");if(this.csrftoken)return e();const n=this.swymUrl+"/api/index/tk";t.authenticatedRequest(n,{method:"GET",proxy:"passport",onComplete(t){const n=JSON.parse(t);n&&n.result&&n.result.ServerToken?e(n.result.ServerToken):s("Failed to get CSRF from 3DPassport")},onFailure(t){s(t)}})}))}getIfExistsConversationRequest(e,s){return new Promise(((n,r)=>{if(!this.csrftoken)return r("can not request 3DSwym without CSRF token");if(!this.swymUrl)return r("can not request 3DSwym without its url");const i=`${this.swymUrl}/api/directmessages/private/?login=${e}&unhide=${s}`;t.authenticatedRequest(i,{method:"GET",proxy:"passport",type:"json",headers:{Accept:"application/json","x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t&&t.result?n(t.result):n(null)},onFailure(t,e){this.csrftoken=null,r(t)}})}))}getIfExistsSwymConversation(t,e=!0){return this.getSwymUrl().then((()=>this.getCSRFToken())).then((s=>(this.csrftoken=s||this.csrftoken,this.getIfExistsConversationRequest(t,e))))}sendCreateConversationRequest(e,s){return new Promise(((n,r)=>{if(!this.csrftoken)return r("can not request 3DSwym without CSRF token");if(!this.swymUrl)return r("can not request 3DSwym without its url");const i=this.swymUrl+"/api/directmessages";t.authenticatedRequest(i,{method:"POST",proxy:"passport",data:JSON.stringify({users:e,...s?{topic:s}:void 0}),type:"json",headers:{Accept:"application/json","Content-type":"application/json","x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t&&t.result&&t.result.id?n(t.result):r("incomplete result from 3DSwym")},onFailure(t,e){e&&e.result&&e.result.id?n(e.result):(this.csrftoken=null,r(t))}})}))}createSwymConversation(t,e){return this.getSwymUrl().then((()=>this.getCSRFToken())).then((s=>(this.csrftoken=s||this.csrftoken,this.sendCreateConversationRequest(t,e))))}getSwymConversationRequest(e){return new Promise(((s,n)=>{if(!this.csrftoken)return n("can not request 3DSwym without CSRF token");if(!this.swymUrl)return n("can not request 3DSwym without its url");const r=`${this.swymUrl}/api/directmessages/${e}`;t.authenticatedRequest(r,{method:"GET",proxy:"passport",type:"json",headers:{Accept:"application/json","x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t&&t.result?s(t.result):n("incomplete result from 3DSwym")},onFailure(t,e){this.csrftoken=null,n(t)}})}))}getSwymConversation(t){return this.getSwymUrl().then((()=>this.getCSRFToken())).then((e=>(this.csrftoken=e||this.csrftoken,this.getSwymConversationRequest(t))))}sendListConversationsRequest(e){return new Promise(((e,s)=>{if(!this.csrftoken)return s("can not request 3DSwym without CSRF token");if(!this.swymUrl)return s("can not request 3DSwym without its url");const n=this.swymUrl+"/api/directmessages/lite";t.authenticatedRequest(n,{method:"GET",proxy:"passport",type:"json",headers:{Accept:"application/json","x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t&&t.result?e(t.result):s("incomplete result from 3DSwym")},onFailure(t,e){this.csrftoken=null,s(t)}})}))}listSwymConversations(t){return this.getSwymUrl().then((()=>this.getCSRFToken())).then((t=>(this.csrftoken=t||this.csrftoken,this.sendListConversationsRequest())))}sendListSwymConvMembersRequest(e){return new Promise(((s,n)=>{if(!this.csrftoken)return n("can not request 3DSwym without CSRF token");if(!this.swymUrl)return n("can not request 3DSwym without its url");const r=this.swymUrl+"/api/community/listmembers";t.authenticatedRequest(r,{method:"POST",proxy:"passport",data:JSON.stringify({params:{as_admin:!1,community_id:e,displayTotalCount:!1,limit:9999,order_by_last_member:!1,page:1}}),type:"json",headers:{Accept:"application/json","Content-type":"application/json","x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t&&t.result?s(t.result):n("incomplete result from 3DSwym")},onFailure(t,e){this.csrftoken=null,n(t)}})}))}async listSwymConvMembers(t){await this.getSwymUrl();const e=await this.getCSRFToken();return this.csrftoken=e||this.csrftoken,this.sendListSwymConvMembersRequest(t)}sendAddMembersSwymRequest(e,s){return new Promise(((n,r)=>{if(!this.csrftoken)return r("can not request 3DSwym without CSRF token");if(!this.swymUrl)return r("can not request 3DSwym without its url");const i=this.swymUrl+"/api/directmessages/addmembers/"+e;t.authenticatedRequest(i,{method:"PATCH",proxy:"passport",data:JSON.stringify({member_ids:s}),type:"json",headers:{Accept:"application/json","Content-type":"application/json","x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t&&t.result?n(t.result):r("incomplete result from 3DSwym")},onFailure(t,e){this.csrftoken=null,r(t)}})}))}async addMembersSwym(t,e){await this.getSwymUrl();const s=await this.getCSRFToken();return this.csrftoken=s||this.csrftoken,this.sendAddMembersSwymRequest(t,e)}sendAddMediaSwymRequest(e){return new Promise(((s,n)=>{if(!this.csrftoken)return n("can not request 3DSwym without CSRF token");if(!this.swymUrl)return n("can not request 3DSwym without its url");const r=this.swymUrl+"/api/media/addmedia";t.authenticatedRequest(r,{method:"POST",proxy:"passport",data:e,type:"json",headers:{"x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t&&t.result?s(t.result):n("incomplete result from 3DSwym")},onFailure(t,e){this.csrftoken=null,n(t)}})}))}async addMediaSwym(t){await this.getSwymUrl();const e=await this.getCSRFToken();return this.csrftoken=e||this.csrftoken,this.sendAddMediaSwymRequest(t)}sendForwardSwymRequest(e,s){const n={community_uri:e,community_id:e,content_uri:e.includes("community")?e.replace(/community.*$/,`media:${s}`):s};return new Promise(((e,s)=>{if(!this.csrftoken)return s("can not request 3DSwym without CSRF token");if(!this.swymUrl)return s("can not request 3DSwym without its url");const r=this.swymUrl+"/api/media/forward";t.authenticatedRequest(r,{method:"POST",proxy:"passport",data:JSON.stringify(n),type:"json",headers:{"Content-type":"application/json","x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t?e(t.result):s("incomplete result from 3DSwym")},onFailure(t,e){this.csrftoken=null,s(t)}})}))}async forwardSwym(t,e){await this.getSwymUrl();const s=await this.getCSRFToken();return this.csrftoken=s||this.csrftoken,this.sendForwardSwymRequest(t,e)}sendGetMediaSwymRequest(e){return new Promise(((s,n)=>{if(!this.csrftoken)return n("can not request 3DSwym without CSRF token");if(!this.swymUrl)return n("can not request 3DSwym without its url");const r=this.swymUrl+"/api/media/getmedia";t.authenticatedRequest(r,{method:"POST",proxy:"passport",data:JSON.stringify({params:{detailedInfos:!0,id_media:e}}),type:"json",headers:{"Content-type":"application/json","x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t?s(t.result):n("incomplete result from 3DSwym")},onFailure(t,e){this.csrftoken=null,n(t)}})}))}async getMediaSwym(t){await this.getSwymUrl();const e=await this.getCSRFToken();return this.csrftoken=e||this.csrftoken,this.sendGetMediaSwymRequest(t)}sendEditMediaSwymRequest(e){return new Promise(((s,n)=>{if(!this.csrftoken)return n("can not request 3DSwym without CSRF token");if(!this.swymUrl)return n("can not request 3DSwym without its url");const r=this.swymUrl+"/api/media/editmedia";t.authenticatedRequest(r,{method:"POST",proxy:"passport",data:e,type:"json",headers:{"x-ds-swym-csrftoken":this.csrftoken},onComplete(t){t&&t.result?s(t.result):n("incomplete result from 3DSwym")},onFailure(t,e){this.csrftoken=null,n(t)}})}))}async editMediaSwym(t){await this.getSwymUrl();const e=await this.getCSRFToken();return this.csrftoken=e||this.csrftoken,this.sendEditMediaSwymRequest(t)}}return n})),define("DS/RTConvAPI/drivers/RTC_driver",["DS/UWPClientCode/PublicAPI","DS/RTInterface/RTInterface","DS/RTConvAPI/formatters/formatRTCResponse","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/PlatformAPI/PlatformAPI","DS/WAFData/WAFData"],(function(t,e,s,n,r,i){"use strict";class o{constructor(t){this.platformId=t,this.isRTCCallbackRegistered=!1,this.isRTCActivated=null,this.isStandAloneCollabEnabled=null,this.isStandAloneCollabForAppEnabled=null,this.TxIDLabel="RTConvAPI",this.events=["newConversation","getConversations","getConvMembers","search"],this.rtcUrl="",this.callConfig={}}static getInstance(t){return t?((!this.instance||!this.instance.platformId||t&&this.instance.platformId!==t)&&(this.instance=new o(t),this.instance.registerRTCCallback()),this.instance):console.error("RTConvAPI needs a platformId")}fetchProxified(t,e){const s=window&&window.ds&&"MOBILE"==window.ds.env?i.proxifyUrl(t,e||!1,{proxy:"passport"}):t;return fetch(s)}getRtcUrl(){return new Promise(((t,e)=>{if(this.rtcUrl)return t(this.rtcUrl);n.getServicesByPlatform({services:["3DMESSAGING"],platforms:[this.platformId],config:{url:r.getApplicationConfiguration("app.urls.registry")}}).then((s=>{if(!s||!s[0]||!s[0].services)return e("failed to retrieve the 3DMESSAGING url of tenant "+this.platformId);this.rtcUrl=s[0].services[0].url,t(this.rtcUrl)})).catch((t=>e(t)))}))}checkRTCActivation(){return new Promise(((t,e)=>{if(null!==this.isRTCActivated)return t(this.isRTCActivated);this.getRtcUrl().then((t=>this.fetchProxified(t+"/conversation/isEnabled"))).then((t=>t.json())).then((e=>("boolean"==typeof e.isEnabled&&(this.isRTCActivated=e.isEnabled),t(this.isRTCActivated)))).catch((e=>t(!!this.isRTCActivated)))}))}getCallConfig(t){return new Promise(((e,s)=>Object.hasOwn(this.callConfig,"isCollabAddUserEnabled")&&Object.hasOwn(this.callConfig,"isChangeMediaDeviceEnabled")?e(this.callConfig[t]):"isCollabAddUserEnabled"==t&&null!==this.callConfig&&this.callConfig.isCollabAddUserEnabled?e(this.callConfig.isCollabAddUserEnabled):"isChangeMediaDeviceEnabled"==t&&null!==this.callConfig&&this.callConfig.isChangeMediaDeviceEnabled?e(this.callConfig.isChangeMediaDeviceEnabled):void this.getRtcUrl().then((t=>this.fetchProxified(t+"/calls/config"))).then((t=>t.json())).then((s=>("boolean"==typeof s.isCollabAddUserEnabled&&(this.callConfig.isCollabAddUserEnabled=s.isCollabAddUserEnabled),"boolean"==typeof s.isChangeMediaDeviceEnabled&&(this.callConfig.isChangeMediaDeviceEnabled=s.isChangeMediaDeviceEnabled),e(this.callConfig[t])))).catch((t=>(console.error(t),e(!1))))))}checkStandAloneCollabActivation(){return new Promise(((t,e)=>{if(null!==this.isStandAloneCollabEnabled)return t(this.isStandAloneCollabEnabled);this.getRtcUrl().then((t=>this.fetchProxified(t+"/calls/config"))).then((t=>t.json())).then((e=>("boolean"==typeof e.isStandAloneCollabEnabled&&(this.isStandAloneCollabEnabled=e.isStandAloneCollabEnabled),t(this.isStandAloneCollabEnabled)))).catch((e=>t(!!this.isStandAloneCollabEnabled)))}))}checkStandAloneCollabForAppActivation(){return new Promise(((t,e)=>{if(null!==this.isStandAloneCollabForAppEnabled)return t(this.isStandAloneCollabForAppEnabled);this.getRtcUrl().then((t=>this.fetchProxified(t+"/calls/config"))).then((t=>t.json())).then((e=>("boolean"==typeof e.isStandAloneCollabForAppEnabled&&(this.isStandAloneCollabForAppEnabled=e.isStandAloneCollabForAppEnabled),t(this.isStandAloneCollabForAppEnabled)))).catch((e=>t(!!this.isStandAloneCollabForAppEnabled)))}))}_generateTxID(t){return Date.now()+"-r"+Math.floor(1e3*Math.random())+"-"+(t||"noAction")}static maxUsersPerCall(t){return new Promise(((e,s)=>{this.instance||o.getInstance(t),this.instance.getRtcUrl().then((t=>this.fetchProxified(t+"/calls/config"))).then((t=>t.json())).then((t=>{if("number"==typeof t.maxUsersPerCall)return e(t.maxUsersPerCall)})).catch((t=>e(15)))}))}static maxUsersPerConv(t){return new Promise(((e,s)=>{this.instance||o.getInstance(t),this.instance.getRtcUrl().then((t=>this.fetchProxified(t+"/conversation/maxUsersPerConv"))).then((t=>t.json())).then((t=>{if("number"==typeof t.maxUsersPerConv)return e(t.maxUsersPerConv)})).catch((t=>e(15)))}))}checkCallAddUserActivation(){return this.getCallConfig("isCollabAddUserEnabled")}checkCallChangeMediaDeviceFeature(){return this.getCallConfig("isChangeMediaDeviceEnabled")}static isConversationFromRTC(t){return!isNaN(Number(t))}registerRTCCallback(){return e.addCallback((t=>{const s=t.data;if(s&&s.action&&this.events.includes(s.action))return!s.error||s.error&&"newConversation"===s.action&&s.data&&s.data.id?e.triggerTxIDEvent(s.TxID,s.data,null,this.TxIDLabel):e.triggerTxIDEvent(s.TxID,null,s.error||"Error: No response data",this.TxIDLabel)}),this.platformId,null,"conversation")}async createRTConversation({logins:t,uuids:n},r){const i=this.TxIDLabel;return new Promise(((o,a)=>{e.sendAsync({action:"newConversation",data:{logins:t,uuids:n,title:r}},i).then((t=>{t&&t.conversation?o(s.RTCConvToSwymConv(t.conversation)):a("incomplete result from RTC")})).catch((t=>{a(t)}))}))}async createRTConversationHttp({logins:t,uuids:e},n){const r=this._generateTxID("newConvHttp");return new Promise(((o,a)=>{this.getRtcUrl().then((l=>{i.authenticatedRequest(l+"/conversation/create",{headers:{"Content-Type":"application/json"},method:"POST",data:JSON.stringify({uuids:e,logins:t,title:n,tenant:this.platformId,TxID:r}),onComplete(t){const e=JSON.parse(t);e&&e.conversation?o(s.RTCConvToSwymConv(e.conversation)):a("incomplete result from RTC")},onFailure(t){a(t)}})}))}))}async getRTConversation(t){const n=this.TxIDLabel;return new Promise(((r,i)=>{e.sendAsync({action:"getConversations",data:{convIds:[t]}},n).then((t=>{t&&t.conversations&&Array.isArray(t.conversations)?t.conversations.length>0?r(s.RTCConvToSwymConv(t.conversations[0])):r():i("incomplete result from RTC")})).catch((t=>{i(t)}))}))}async getRTConversationHttp(t){const e=this._generateTxID("getConvHttp");return new Promise(((n,r)=>{this.getRtcUrl().then((o=>{const a=o+"/conversation/userConversations?"+new URLSearchParams({tenant:this.platformId,convId:t,TxID:e}).toString();i.authenticatedRequest(a,{method:"GET",onComplete(t){const e=JSON.parse(t);e&&e.userConversations&&Array.isArray(e.userConversations)?e.userConversations.length>0?n(s.RTCConvToSwymConv(e.userConversations[0])):n([]):r("incomplete result from RTC")},onFailure(t){r(t)}})}))}))}async listRTConversations(t,n=!1){const r=this.TxIDLabel;return new Promise(((t,i)=>{e.sendAsync({action:"getConversations",data:{all:!0,sections:n}},r).then((e=>{e&&e.conversations&&Array.isArray(e.conversations)?e.conversations.length>0?t({conversations:e.conversations.map(s.RTCConvToSwymConv),sections:e.sections}):t({conversations:[]}):i("incomplete result from RTC")})).catch((t=>{i(t)}))}))}async listRTConversationsHttp(t=!1){const e=this._generateTxID("listConvHttp");return new Promise(((n,r)=>{this.getRtcUrl().then((o=>{const a=o+"/conversation/userConversations?"+new URLSearchParams({tenant:this.platformId,all:"true",sections:t,TxID:e}).toString();i.authenticatedRequest(a,{method:"GET",onComplete(t){const e=JSON.parse(t);e&&e.userConversations&&Array.isArray(e.userConversations)?e.userConversations.length>0?n({conversations:e.userConversations.map(s.RTCConvToSwymConv),sections:e.sections}):n({conversations:[]}):r("incomplete result from RTC")},onFailure(t){r(t)}})}))}))}async listRTConvMembers(t){return new Promise(((n,r)=>{e.sendAsync({action:"getConvMembers",data:{convId:Number(t)}},this.TxIDLabel).then((t=>{t&&t.members&&Array.isArray(t.members)?n(t.members.map(s.RTCUserToSwymUser)):r("incomplete result from RTC")})).catch((t=>{r(t)}))}))}async search(t){return new Promise(((n,r)=>{e.sendAsync({action:"search",data:{query:t}},this.TxIDLabel).then((t=>{t&&t.conversations&&Array.isArray(t.conversations)?n(t.conversations.map(s.RTCConvToSwymConv)):r("incomplete result from RTC")})).catch((t=>{r(t)}))}))}async addMembersRTConv(t,s){return new Promise(((n,r)=>{e.sendAsync({action:"newConversationUsers",data:{convId:Number(t),logins:s}},this.TxIDLabel).then((t=>{t?n(t):r("incomplete result from RTC")})).catch((t=>{r(t)}))}))}}return o})),define("DS/RTConvAPI/RTConvAPI",["DS/RTConvAPI/drivers/RTC_driver","DS/RTConvAPI/drivers/Swym_driver"],(function(t,e){"use strict";class s{constructor(s){this.platformId=s,this.MAX_NB_USERS_IN_DM=100,this.MAX_NB_USERS_IN_CALL=15,this.RTCDriver=t.getInstance(s),this.SwymDriver=e.getInstance(s)}static getInstance(t){return t?((!this.instance||!this.instance.platformId||t&&this.instance.platformId!==t)&&(this.instance=new s(t)),this.instance):console.error("RTConvAPI needs a platformId")}static maxUsersPerCall(e){return this.instance||(this.instance=s.getInstance(e)),t.maxUsersPerCall().then((t=>(this.instance.MAX_NB_USERS_IN_CALL=t,this.instance.MAX_NB_USERS_IN_CALL)))}static maxUsersPerConv(e){return this.instance||(this.instance=s.getInstance(e)),t.maxUsersPerConv().then((t=>(this.instance.MAX_NB_USERS_IN_DM=t,this.instance.MAX_NB_USERS_IN_DM)))}getConversationUrl(t){return`${this.SwymDriver.swymUrl}/dm/${t.uri||t.subject_uri}`}getConversation({logins:t,uuids:e,topic:s,dmId:n,forceRTConvHttp:r}){if(n){const t=Number(n);return isNaN(t)?this.SwymDriver.getSwymConversation(n):r?this.RTCDriver.getRTConversationHttp(t):this.RTCDriver.getRTConversation(t)}return this.createConversation({logins:t,uuids:e,topic:s,forceRTConvHttp:r})}createConversation({logins:t,uuids:e,topic:s,forceRTConvHttp:n}){return new Promise(((r,i)=>(!t||!Array.isArray(t)||!t.length>1||t.length>this.MAX_NB_USERS_IN_DM)&&(!e||!Array.isArray(e)||!e.length>1||e.length>this.MAX_NB_USERS_IN_DM)?i("logins or uuids must be an array and its length must be >1 and <"+this.MAX_NB_USERS_IN_DM):this.platformId?void this.SwymDriver.getSwymUrl().then((()=>{if(t&&Array.isArray(t)&&1===t.length)return this.SwymDriver.getIfExistsSwymConversation(t[0])})).then((i=>{i?(i.url=this.getConversationUrl(i),r(i)):this.RTCDriver.checkRTCActivation().then((r=>r?n?this.RTCDriver.createRTConversationHttp({logins:t,uuids:e},s):this.RTCDriver.createRTConversation({logins:t,uuids:e},s):this.SwymDriver.createSwymConversation(t,s))).then((t=>{t.url=this.getConversationUrl(t),r(t)}))})).catch((t=>{i(t)})):i("platformId must be defined")))}listConversations({page:t,forceRTConvHttp:e,sections:s=!1}){return new Promise(((n,r)=>{if(!this.platformId)return r("platformId must be defined");this.RTCDriver.checkRTCActivation().then((r=>{r?Promise.allSettled([e?this.RTCDriver.listRTConversationsHttp(s):this.RTCDriver.listRTConversations(t,s),this.SwymDriver.listSwymConversations(t)]).then((t=>{const e=[];for(const s of t)"fulfilled"===s.status&&(s.value.conversations?e.push(...s.value.conversations):Array.isArray(s.value)&&e.push(...s.value));const r=[];if(s){for(const e of t)"fulfilled"===e.status&&e.value.sections&&r.push(...e.value.sections);return n({conversations:e,sections:r})}n(e)})):n(this.SwymDriver.listSwymConversations(t))}))}))}listConvMembers({dmId:e}){return new Promise(((s,n)=>e?this.platformId?void s(t.isConversationFromRTC(e)?this.RTCDriver.listRTConvMembers(e):this.SwymDriver.listSwymConvMembers(e)):n("platformId must be defined"):n("dmId must be defined")))}search({query:t}){return new Promise(((e,s)=>t?this.platformId?void this.RTCDriver.checkRTCActivation().then((s=>{e(s?this.RTCDriver.search(t):[])})):s("platformId must be defined"):s("query must be defined")))}addMembers({dmId:e,logins:s}){return new Promise(((n,r)=>e?s?this.platformId?void n(t.isConversationFromRTC(e)?this.RTCDriver.addMembersRTConv(e,s):this.SwymDriver.addMembersSwym(e,s)):r("platformId must be defined"):r("logins must be defined"):r("dmId must be defined")))}}return{getConv:function({platformId:t,login:e,logins:n,uuid:r,uuids:i,topic:o,dmId:a,forceRTConvHttp:l=!1}){return s.getInstance(t).getConversation({logins:n||e?n||[e]:null,uuids:i||r?i||[r]:null,topic:o,dmId:a,forceRTConvHttp:l})},listConv:function({platformId:t,page:e,forceRTConvHttp:n=!1,sections:r=!1}){return s.getInstance(t).listConversations({page:e,forceRTConvHttp:n,sections:r})},listConvMembers:function({platformId:t,dmId:e}){return s.getInstance(t).listConvMembers({dmId:e})},search:function({platformId:t,query:e}){return s.getInstance(t).search({query:e})},addMembers:function({platformId:t,dmId:e,logins:n}){return s.getInstance(t).addMembers({dmId:e,logins:n})},getInstance:s.getInstance,maxUsersPerCall:s.maxUsersPerCall,maxUsersPerConv:s.maxUsersPerConv}}));