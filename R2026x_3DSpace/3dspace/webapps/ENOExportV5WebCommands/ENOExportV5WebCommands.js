define("DS/ENOExportV5WebCommands/utils/ExportV5connexionMngtUtil",["UWA/Core","UWA/Promise","DS/WAFData/WAFData","DS/WidgetServices/securityContextServices/SecurityContextServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","i18n!DS/ENOExportV5WebCommands/assets/nls/ExportV5Cmd"],(function(e,t,n,i,o,s){"use strict";var r=null;return{GetCurrentSecurityContext:function(){return new t((function(e,t){i.getInstance().getSecurityContext({onSuccess:function(t){let n=t.SecurityContext.replace("ctx::","");e(n)},onFailure:function(){var e={message:s.error.security_context_fail};t(e)}})}))},get3DSpaceUrl:function(){return this.getPlatformURL("3DSpace")},getPlatformId:function(){return"undefined"!=typeof widget&&widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise"},retrievePlatformUrl:function(){return new t((function(e,t){null===r?o.getPlatformServices({onComplete:function(t){r=t,e()},onFailure:function(e){t(e)}}):e()}))},getTenantInfo:function(e){for(var t={},n=0;n<r.length;n++)if(r[n].platformId===e){t=r[n];break}return t},getPlatformURL:function(e){if(!UWA.is(r,"array"))throw new Error("Platform services not initialize yet");var t=this.getPlatformId(),n=this.getTenantInfo(t);if(void 0===n[e])throw console.error("No "+e+" URL available for this tenant."),new Error("Unknown service "+e);return n[e]},SendServerRequest:function(e){var t=this,i={};i.method=e.webService.verb,t.GetCurrentSecurityContext().then((function(o){e.isSCEncoded&&(o=encodeURIComponent(o)),i.headers={Accept:"application/json","Content-Type":"application/json",SecurityContext:o},null!=e.headers&&(i.headers={...i.headers,...e.headers}),i.type="json",i.proxy="passport",i.timeout=void 0!==e.timeout?e.timeout:3e5,i.onComplete=e.callback.onComplete,i.onFailure=e.callback.onFailure;var s=e.data;i.data=JSON.stringify(s),t.retrievePlatformUrl().then((function(){var o=t.get3DSpaceUrl();n.authenticatedRequest(o+e.webService.url,i)}))})).catch((function(t){e.callback.onFailure(t)}))}}})),define("DS/ENOExportV5WebCommands/utils/ExpandV2DataUtil",["DS/Utilities/UUID","DS/PADUtils/PADContext"],(function(e,t){"use strict";const n=t.get(),i={CVQUERY:{EXPAND:{batch:{graph:{}},outputs:{select_object:["physicalid","ds6w:label","ds6w:type","ds6w:cadMaster","ds6w:xcadFileName"],select_relation:["identifier","physicalid","type"],format:"entity_relation_occurrence"}}}};var o,s,r;function a(){}function l(e){let t=[];return e.forEach((e=>{if(e.isGroupingNode){let n=e.getChildren();n.length?t=t.concat(l(n)):s=!0}else t.push(e)})),t}function d(e){let t=[],n=[];return l(e).forEach((e=>{let i=-1;if(function(e){return null==e.isGroupingNode&&e.isRoot()}(e)){let s=e.getID();i=t.indexOf(s),-1===i&&(t.push(s),n.push([[s]])),o.set(s,[s])}else{let s=e.getOccurencePath(),r=e.getRoot().getID();i=t.indexOf(r),-1===i?(t.push(r),n.push([s])):n[i]&&n[i].push(s),o.set(e.getID(),s)}})),{roots:t,paths:n}}function c(e){return e.map((e=>({physical_id_path:e})))}function u(e,t,i){let o={filter:{all:1}},s=i&&"object"==typeof i?i:n;if(s.GetFilterSpec){let n=c(t);o=s.GetFilterSpec(e,{V2:{prefixPathArray:n}})}return o.filter}return a.prototype={expandQuery:function(t,n){o=new Map,s=!1;let r=d(t),a=r.roots,l=r.paths,c=a.map(((t,o)=>function(t,n,o){let s={label:"ExpandForWebExchanges_"+e.v4(),root:{physical_id:t},filter:u(t,n,o),graph:i.CVQUERY.EXPAND.batch.graph};return s}(t,l[o],n)));return{batch:{expands:c},outputs:{select_object:i.CVQUERY.EXPAND.outputs.select_object,select_relation:i.CVQUERY.EXPAND.outputs.select_relation,format:i.CVQUERY.EXPAND.outputs.format}}},getPathMap:function(){return o},isGroupNotExpanded:function(){return s}},r||(r=new a),r})),define("DS/ENOExportV5WebCommands/commands/ExportV5PSECmd",["DS/ApplicationFrame/Command","i18n!DS/ENOExportV5WebCommands/assets/nls/ExportV5Cmd","DS/PADUtils/PADContext","DS/PADUtils/PADUtilsServices","DS/PADUtils/PADSettingsMgt","DS/Utilities/UUID","text!DS/ENOExportV5WebCommands/assets/settings.json"],(function(e,t,n,i,o,s,r){"use strict";return e.extend({_check_roots:function(){n.get().getPADTreeDocument().getRoots().length>0?this.enable():this.disable()},_check_added_roots:function(e){n.get().getPADTreeDocument();0===e.data.nb_root?this.disable():this.enable()},init:function(e){this._parent(e);var t=n.get(),i=t.options.model?t.options.model:t.getPADTreeDocument();if(this._isV2Expand=JSON.parse(r).isv2expand,UWA.Utils.Client.Platform.ios)this.disable();else{this._check_roots();var o=this._check_roots.bind(this);i.addEventListener("addChild",o),i.addEventListener("removeChild",o),this._check_roots(),t.addEvent("onRootsVisibility",this._check_roots.bind(this)),t.getPADTreeDocument().getModelEvents().subscribe({event:"onRootAdded"},this._check_added_roots.bind(this))}},execute:function(){var e=this,t=n.get(),i=t.options.model?t.options.model:t.getPADTreeDocument();require(["DS/ENOExportV5WebCommands/commands/ExportV5GenericCmd"],(function(t){var n=i.getSelectedNodes();new t({command_id:e.options.ID,render_div:".xnav_viewmain",disable_cmd:()=>e.disable(),enable_cmd:()=>e.enable(),data:{selectednodes:n,requests:null,isv2expand:e._isV2Expand}})}))}})})),define("DS/ENOExportV5WebCommands/views/_EV5CustomizeView",["css!DS/UIKIT/UIKIT","css!DS/ENOExportV5WebCommands/ENOExportV5WebCommands","i18n!DS/ENOExportV5WebCommands/assets/nls/ExportV5Cmd","text!DS/ENOExportV5WebCommands/assets/catrsc/ExportV5Locations.json","UWA/Controls/Abstract","UWA/Class/Events","UWA/Promise","DS/WAFData/WAFData","DS/PADUtils/PADUtilsServices","DS/Windows/Panel","DS/UIKIT/Modal","DS/Controls/ButtonGroup","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/LineEditor","DS/Controls/Loader","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Controls/ComboBox","DS/Controls/Expander","DS/Core/PointerEvents","DS/Notifications/NotificationsManagerViewOnScreen","DS/Notifications/NotificationsManagerUXMessages","DS/Utilities/UUID","DS/i3DXCompassServices/i3DXCompassPubSub"],(function(e,t,n,i,o,s,r,a,l,d,c,u,p,m,h,f,g,b,_,v,E,x,C,S,D){"use strict";return o.extend(s,{name:"ev5customizeview",_command_id:"",_applyOnlyToThisApp:!1,init:function(e){this._parent(e),UWA.is(e.render_div)&&(this.render_div=document.querySelector(e.render_div));var t=this;e.controller&&(this.controller=e.controller),require(["DS/ENOFloatingPanel/ENOFloatingPanel"],(function(i){t._command_id=e._command_id,t.elements.useDLNames=!1,t.model=e.model,t.elements.container=t._createContent(e.isOdt),t.elements.floatingpanel=new i({className:t.name,body:t.elements.container,footer:t._buildFooter(e.isOdt),title:n.title,overlay:!0,closable:!0,animate:!0,resizable:!0,visible:!0,events:{onClose:function(){t.controller._destroyCmd()}}}),t.elements.floatingpanel.inject(t.render_div)}))},_isLineEditorPathValid:function(){var e=this.elements.lineEditor.getContent().getChildren()[0].value;return this._isPathValid(e)},_isSelectionValid:function(){return 1==this.elements.useDLNames?-1!=this.elements.combobox.selectedIndex:this._isLineEditorPathValid()},_isPathValid:function(e){if(e){if(e=e.trim(),navigator.platform.indexOf("Win")>-1){return!!/^(?:[a-z]:|\\\\[a-z0-9_.$‚óè-]+)\\(?:[^\\\/:*?"<>|\r\n]+\\)*[^\\\/:*?"<>|\r\n]*$/.test(e.toLowerCase())}return!!/[^\0]+/.test(e)}return!1},_onPathChange:function(){this.elements.launchbutton.disabled=!this._isLineEditorPathValid()},_expandCompleted:function(){this.myLoader.off(),this._isSelectionValid()&&null!=this.elements.launchbutton&&(this.elements.launchbutton.disabled=!1)},_createContent:function(e){var t=this,o=UWA.createElement("div",{class:"ev5customizeview_content"}),s=UWA.createElement("div",{class:"ev5customizeview_body"}).inject(o);s.setAttribute("id","ev5customizeview_body");var r=UWA.createElement("h5",{content:n.option_path.label});s.appendChild(r),i=UWA.is(i,"string")?JSON.parse(i):i;var a=i.paths.length,l=i.manual,d=localStorage.getItem("ExportV5path");if(null!=e&&e&&(a=1,i.paths.push({path:d,name:"D:\\TestData"})),0===a)if(!0===l){var c="";c=d&&this._isPathValid(d)?d:i.defaultLocation,t.elements.lineEditor=new h({placeholder:n.option_path.option_text,requiredFlag:!0,value:c}),t.elements.lineEditor.addEventListener("uncommittedChange",t._onPathChange.bind(this)),s.appendChild(t.elements.lineEditor.getContent())}else t._displayNotification("error",n.error.emptyDefinedPath.title,n.error.emptyDefinedPath.subtitle),t.controller._destroyCmd();else{var u,E,x=[],C=[],S=[],D=!1,y=new g({shouldBeSelected:function(e){return"section"!==e.options.comboBoxSemantics}}),w=new b({label:n.option_path.predefined_paths,comboBoxSemantics:"section"});y.addRoot(w);var N=-1,V=1,P=0;i.paths.forEach((function(e){u=e.name,E=e.path,void 0===e.name||""===u?void 0!==e.path&&""!==E?(t._displayNotification("error",n.error.emptyPathIdentifier.title,n.error.emptyPathIdentifier.subtitle),t.controller._destroyCmd()):P++:UWA.Array.detect(x,(function(e,t){return e==u}))?(S.push(u),D=!0):t._isPathValid(E)?((u==d||E==d&&-1==N)&&(N=V),w.addChild(new b({label:u,comboBoxSemantics:"subsection"})),V++,x.push(u)):(C.push(u),D=!0)}));let o={title:"",subtitle:"",msg:""};if(0==x.length)o.title=n.error.emptyDefinedPath.title,o.subtitle=n.error.emptyDefinedPath.subtitle,o.msg=null,D=!0;else if(P>0)o.title=n.error.title,o.subtitle=null,o.msg=n.error.emptyobject,D=!0;else if(S.length>0){let e=n.replace(n.error.identifierUnicity.title,{namesList:S});o.title=e,o.subtitle=n.error.identifierUnicity.subtitle,o.msg=null}else if(C.length>0){let e=n.replace(n.error.pathInvalid.title,{namesList:C});o.title=e,o.subtitle=n.error.pathInvalid.subtitle,o.msg=null}else{var A=1;if(-1!==N&&(A=N),l){var U=new b({label:n.option_path.added_path,comboBoxSemantics:"section"});y.addRoot(U),this._isPathValid(d)&&(U.addChild(new b({label:d,comboBoxSemantics:"subsection"})),A=y.getAllDescendants().length-1)}var W=new UWA.Element("div",{class:"ev5-path-container"}).inject(s);if(y.expandAll(),t.elements.combobox=new _({elementsTree:y,selectedIndex:A}),W.appendChild(t.elements.combobox.getContent()),t.elements.useDLNames=!0,t.elements.combobox.addEventListener("change",(function(){t.elements.launchbutton.disabled=!1})),l){var O=new UWA.Element("div",{class:"expander-container"}),I=new h({placeholder:n.option_path.option_text,value:i.defaultLocation}).inject(O),L=!this._isPathValid(i.defaultLocation),M=new p({domId:"ev5-add-button",label:n.option_path.button_add,emphasize:"primary",touchMode:!0,disabled:L,allowUnsafeHTMLLabel:!1}).inject(O);I.addEventListener("uncommittedChange",(function(){t._isPathValid(I.getContent().getChildren()[0].value)?M.disabled=!1:M.disabled=!0}));var T=new v({orientation:"horizontal",height:"22px",body:O,allowUnsafeHTMLHeader:!1}).inject(W);M.addEventListener("buttonclick",(function(){y.getRoots()[1].getAllDescendants().map((e=>e.getLabel())).includes(I.value)||(y.getRoots()[1].addChild(new b({label:I.value,comboBoxSemantics:"subsection"})),y.expandAll(),t.elements.combobox.selectedIndex=t.elements.combobox.elementsTree.getAllDescendants().length-1,T.getContent().collapse)}))}}D&&(t._displayNotification("error",o.title,o.subtitle,o.msg),void 0===e&&t.controller._destroyCmd())}var F=!0;return localStorage.getItem("ExportV5copy")&&(F="false"!=localStorage.getItem("ExportV5copy")),t.elements.toggleCopy=new m({label:n.option_conflict.option_copy,checkFlag:F,allowUnsafeHTMLLabel:!1}),s.appendChild(t.elements.toggleCopy.getContent()),this.myLoader=new f({text:n.loading,showButtonFlag:!1,height:"20px",fadeDuration:100}).inject(o),this.myLoader.on(),o},_getSelectedPath:function(){if(1==this.elements.useDLNames){var e,t=this.elements.combobox.value;return this._isPathValid(t)&&(e=t),i.paths.forEach((function(n){n.name==t&&(e=n.path)})),e=e.trim()}return t=(t=this.elements.lineEditor.value).trim()},_displayNotification:function(e,t,n,i){window.notifs=C,x.setNotificationManager(window.notifs);var o={level:e,title:t,sticky:!1};void 0===n&&null===n||(o.subtitle=n),null===i&&void 0===i||(o.message=i),window.notifs.addNotif(o)},_buildFooter:function(e){var t=this,i=UWA.createElement("div",{class:"footerModal"}),o=!t._isSelectionValid()||void 0!==e||!t.controller._isExpandComplete();t.elements.launchbutton=new p({label:n.buttonExport,emphasize:"primary",touchMode:!0,disabled:o,allowUnsafeHTMLLabel:!1}),t.elements.launchbutton.addEventListener("buttonclick",(function(){t._LaunchExport()})),i.appendChild(t.elements.launchbutton.getContent());var s=new p({label:n.buttonCancel,emphasize:"secondary",touchMode:!0,allowUnsafeHTMLLabel:!1});return s.addEventListener("click",(function(){t.controller._destroyCmd()})),s.inject(i),i},_LaunchExport:function(){var e=this;e._isSelectionValid()?(document.getElementById("ev5customizeview_body").style.display="none",e.model.updatePath(e._getSelectedPath()),e.model.updateCopyOption(e.elements.toggleCopy.checkFlag),localStorage.setItem("ExportV5copy",e.elements.toggleCopy.checkFlag),this.elements.launchbutton.disabled=!0,0==e.elements.useDLNames?localStorage.setItem("ExportV5path",e.model.path):localStorage.setItem("ExportV5path",e.elements.combobox.value),this.controller._sendExportRequest()):e._displayNotification("warning",n.warning.title_path,null,n.warning.empty_path)},destroy:function(){this.elements.floatingpanel.destroy()}})})),define("DS/ENOExportV5WebCommands/commands/ExportV5BECmd",["DS/ApplicationFrame/Command","DS/PADUtils/PADContext","DS/Utilities/UUID","DS/Notifications/NotificationsManagerViewOnScreen","DS/Notifications/NotificationsManagerUXMessages","DS/ENOExportV5WebCommands/utils/ExportV5connexionMngtUtil","text!DS/ENOExportV5WebCommands/assets/settings.json","i18n!DS/ENOExportV5WebCommands/assets/nls/ExportV5Cmd"],(function(e,t,n,i,o,s,r,a){"use strict";var l=["Workspace","Workspace Vault"];const d=6e5;return e.extend({execute:function(){var e=this;let n=this.options.context;var i=n&&n.getSelectedNodes?n:t.get(),o=i.getSelectedNodes();e._isV2Expand=JSON.parse(r).isv2expand,1!=o.length||0!=Object.entries(o[0].options.grid).length?o.some((e=>l.includes(e.options.grid.type)))?e._displayNotification("warning",a.warning.title,null,a["ExportV5.Msg.InvalidInput"]):new Promise((function(t,n){var i={isSCEncoded:!0,data:{ids:o.map((e=>e.getID()))},timeout:d,webService:{url:"/resources/ENOWebExchangesWSAPI/webExchanges_services/validate?tenant="+s.getPlatformId(),verb:"POST"},callback:{onComplete:function(i){var o=UWA.is(i,"string")?JSON.parse(i):i;if(o&&0!==Object.keys(o).length)if("success"===o.status)t();else{let t=o.msg;e._displayNotification("warning",a.warning.title,null,a[t])}else e._displayNotification("error",a.error.fetchFailed.title,a.error.fetchFailed.subtitle),n(a.error.fetchFailed)},onFailure:function(t){let i={title:"",subtitle:"",message:t.message};t.msg&&a.error[t.msg]&&(i.title=a.error[t.msg].title,i.subtitle=a.error[t.msg].Subtitle,i.message=""),e._displayNotification("error",i.title,i.subtitle,i.message),n(t.message)},onTimeout:function(){e._displayNotification("error",a.error.title,a.replace(a.error.timeout,{seconds:d})),n(a.replace(a.error.timeout,{seconds:d}))}}};s.SendServerRequest(i)})).then((function(){require(["DS/ENOExportV5WebCommands/commands/ExportV5GenericCmd"],(t=>{var o=i.getSelectedNodes();new t({context:n,command_id:e.options.ID,render_div:".FolderEditor_global_container",data:{selectednodes:o,requests:null,isv2expand:e._isV2Expand}})}))}),(function(e){console.log(e)})):e._displayNotification("error",a.error.title,null,a.error.noSelection)},_displayNotification:function(e,t,n,s){window.notifs=o,i.setNotificationManager(window.notifs);var r={level:e,title:t,sticky:!1};void 0!==n&&(r.subtitle=n),null!==s&&(r.message=s),window.notifs.addNotif(r)}})})),define("DS/ENOExportV5WebCommands/helper/ExportV5GenericHelper",["DS/ENOExportV5WebCommands/utils/ExpandV2DataUtil","DS/ENOExportV5WebCommands/utils/ExportV5connexionMngtUtil","i18n!DS/ENOExportV5WebCommands/assets/nls/ExportV5Cmd"],(function(e,t,n){"use strict";const i=6e5;var o,s;function r(){}function a(e,t,o){let s;if(t)s={type:"error",title:n.error.title,msg:n.replace(n.error.timeout,{seconds:i})};else{let e;if(o.message&&o.message.indexOf("Error:")&&o.message.indexOf("ResponseCode")){let t=o.message.substring(o.message.indexOf("ResponseCode")).split('"')[1];e="500"==t?n.error.expandIssue:"400"==t?n.error.code400:"401"==t?n.error.code401:n.error.genericError}s={type:"error",title:n.error.expand_failed.title,msg:e,subtitle:n.error.expand_failed.subtitle,errmsg:null!=o.errCode?e:o.message}}e(s)}return r.prototype={expandV2:async function(s,r){return new Promise(((l,d)=>{let c=e.expandQuery(s,r);o=e.getPathMap();var u={isSCEncoded:!1,data:c,timeout:i,webService:{url:"/cvservlet/progressiveexpand/v2?output_format=cvjson&xrequestedwith=xmlhttprequest",verb:"POST"},headers:{"Accept-Language":window.widget?window.widget.lang:"en","X-Requested-With":"XMLHttpRequest"},callback:{onComplete:function(t){let i=UWA.is(t,"string")?JSON.parse(t):t;if(i.errors){let t={type:"error",title:n.error.expand_failed.title};t.msg=e.isGroupNotExpanded()?n.error.groupnotexpanded:n.error.expandIssue,d(t)}else if(e.isGroupNotExpanded()){let e={type:"error",title:n.error.expand_failed.title,msg:n.error.groupnotexpanded};d(e)}else l(i)},onFailure:function(e){a(d,!1,e)},onTimeout:function(){a(d,!0)}}};t.SendServerRequest(u)}))},validateData:async function(e,t){return new Promise(((i,s)=>{if(t.results.filter((e=>null!=e["ds6w:cadMaster"])).map((e=>({id:e.resourceid,cadmaster:e["ds6w:cadMaster"]}))).every((e=>"CATIAV5"===e.cadmaster||"3DEXPERIENCE"===e.cadmaster))){let n=[];e.forEach((e=>{if(e.isGroupingNode&&null!=e.getChildren()&&e.getChildren().length>0)for(let t=0;t<e.getChildren().length;t++){let i=e.getChildren()[t];n.push({Path:o.get(i.getID())})}else n.push({Path:o.get(e.getID())})})),i({expand_result:t,selected:n})}else{s({type:"warning",title:n.warning.title,msg:n["ExportV5.Msg.InvalidInputCADMaster"]})}}))},buildOpenPayLoad:async function(e){return new Promise(((o,s)=>{var r={isSCEncoded:!0,data:e,timeout:i,webService:{url:"/resources/ENOWebExchangesWSAPI/webExchanges_services/buildOpenPayload?xrequestedwith=xmlhttprequest",verb:"POST"},callback:{onComplete:function(e){let t=UWA.is(e,"string")?JSON.parse(e):e,i={type:"error",title:n.error.fetchFailed.title,msg:n.error.genericError};null!=t.status&&"failure"===t.status?(i.msg=null!=t.msg&&null!=n[t.msg]?n[t.msg]:n.error.genericError,s(i)):t.open_payload&&0!==t.open_payload.results.length?o(t.open_payload):s(i)},onFailure:function(e){a(s,!1,e)},onTimeout:function(){a(s,!0)}}};t.SendServerRequest(r)}))},imulateODTErrFunc:function(e,t){return new Promise((n=>{e?a(n,!0):a(n,!1,t)}))}},s||(s=new r),s})),define("DS/ENOExportV5WebCommands/commands/ExportV5GenericCmd",["UWA/Controls/Abstract","UWA/Promise","DS/Notifications/NotificationsManagerViewOnScreen","DS/Notifications/NotificationsManagerUXMessages","DS/i3DXCompassServices/i3DXCompassPubSub","i18n!DS/ENOExportV5WebCommands/assets/nls/ExportV5Cmd","DS/ENOExportV5WebCommands/helper/ExportV5GenericHelper"],(function(e,t,n,i,o,s,r){"use strict";var a,l;return e.extend({init:function(e){this._parent(e),UWA.is(e.data)&&UWA.is(e.data.selectednodes)&&0!=e.data.selectednodes.length?(this.selectednodes=e.data.selectednodes,this.requestsMessage=e.data.requests,UWA.is(e.render_div)||(this.render_div=e.render_div),this._v2ExpandAll(),this._buildModel(),this.view=this._createView()):(this._displayNotification("error",s.error.title,s.error.noSelection),this.destroy())},_buildModel:function(){this.model={path:"",bCopy:!0,updatePath:function(e){this.path=e},updateCopyOption:function(e){this.bCopy=e}}},_createView:function(){var e=this;null!=e.options.disable_cmd&&e.options.disable_cmd(),a=!1,require(["DS/ENOExportV5WebCommands/views/_EV5CustomizeView"],(function(t){var n=new t({_command_id:e.options.ID,render_div:e.options.render_div,model:e.model,controller:e});e._view=n}))},_displayNotification:function(e,t,o,s){window.notifs=i,n.setNotificationManager(window.notifs);var r={level:e,title:t,message:o,sticky:!1};null!=s&&(r.subtitle=s),window.notifs.addNotif(r)},_v2ExpandAll:async function(){var e=this;l="";try{let t=await r.expandV2(this.selectednodes,this.options.context),n=await r.validateData(this.selectednodes,t),i=await r.buildOpenPayLoad(n);e.message_batch=i,e._view._expandCompleted(),a=!0}catch(t){e._displayNotification(t.type,t.title,t.msg,t.subtitle),l=null!=t.errmsg?t.errmsg:t.msg,e._destroyCmd()}},_isExpandComplete:function(){return a},_sendExportRequest:function(){var e=this;if(a){var t={path:e.model.path,copy_if_conflict:e.model.bCopy,data:e.message_batch},n={widgetId:e._command_id,appId:"ENOEXV5_AP",fileName:"-file",fileContent:JSON.stringify(t)};o.subscribe("launchAppCallback",(function(t){if(t&&t.widgetId===e._command_id){switch(t.response){case"COMPLETE":e._displayNotification("success",s.success.title,s.success.message);break;case"no_install_compatible_online_installation":case"no_install_compatible_no_online_installation":case"mandatory_update_online_installation":e._displayNotification("info",s.info.title,s.info.custom.message,s.info.custom.subtitle);break;default:e._displayNotification("error",s.error,title,s.error.errorType.message,s.error.errorType.subtitle)}o.unsubscribe("launchAppCallback"),e._destroyCmd()}})),o.publish("launchApp",n)}else e._displayNotification("error",s.error,s.error.launchApp+l),e._destroyCmd()},_destroyCmd:function(){null!=this.options.enable_cmd&&this.options.enable_cmd(),UWA.is(this._view)&&this._view.destroy(),this.destroy()}})}));