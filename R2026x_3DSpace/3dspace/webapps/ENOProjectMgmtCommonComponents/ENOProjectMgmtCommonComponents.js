define("DS/ENOProjectMgmtCommonComponents/views/CalendarsView",["UWA/Core","DS/Controls/Calendar"],(function(e,t){"use strict";return t.extend({_uwaClassName:"CalendarsView",parentView:void 0,init:function(e,t){this.parentView=e,this._parent(t)},_redrawCalendar:function(){this._parent.apply(this),this.parentView.repaintCalendarDates()}})})),define("DS/ENOProjectMgmtCommonComponents/config/DefaultGridConfig",[],(function(){"use strict";return{_uwaClassName:"DefaultGridConfig",height:"200px",defaultColumnDef:{width:"auto",typeRepresentation:"string"},showRowIndexFlag:!1,showAlternateBackgroundFlag:!0,showSelectionCheckBoxesFlag:!0,rowSelection:"multiple",cellSelection:"none",cellPreselectionFeedback:"none",selectionStyle:"",cellActivationFeedback:"row",showModelChangesFlag:!1,columnsHeader:!0,rowHeader:!1,showOutlineFlag:!1,focusNextEditableCellOnTabFlag:!0,selectionBehavior:{selectNodeModelOnCellSelection:!0,selectOnPointerUp:!0},showBackgroundFlag:!0,columnDragEnabledFlag:!1,showRowHeaderBackgroundFlag:!1,showContextualMenuColumnFlag:!0,layoutOptions:{columnsHeader:!0,rowsHeader:!0},sortModel:[{dataIndex:"modified",sort:"desc"}]}})),define("DS/ENOProjectMgmtCommonComponents/constants/Constants",[],(function(){"use strict";return{COLLABSPACE:"collabspace",X_PREF_CREDENTIAL:"xPref_CREDENTIAL",COLLABSTORAGE:"collabstorage",X3D_PLATFORMID:"x3dPlatformId",TENANT:"tenant",CTX_PREFIX:"ctx::",SPACE_SOURCE:"3DSpace",DEFAULT:"DEFAULT",DEFAULT_OPPORTUNITY:"DEFAULT_OPPORTUNITY",CONTEXT_CHANGE:"contextChange",CONTEXT_REMOVE:"contextRemove",BOOKMARK_ROOT_ID_SET_EVENT:"ENOBookmarkEditor.contextChange",BOOKMARK_ROOT_ID_REMOVE_EVENT:"ENOBookmarkEditor.removeContext"}})),define("DS/ENOProjectMgmtCommonComponents/config/KanbanViewConfig",["UWA/Core","UWA/Class"],(function(e,t){})),define("DS/ENOProjectMgmtCommonComponents/utils/Constants",["DS/WebappsUtils/WebappsUtils"],(function(e){"use strict";return{BASE_URL:e.getWebappsBaseUrl()+"ENOProjectMgmtCommonComponents/assets/",PERSON:"Person",ADD_NODE:"Add Node",REMOVE:"remove",SET_FOCUS:"Set Focus",SUCCESS:"Success",CREATE:"Created",CLASSIFICATION_BASE_URL:"resources/v1/modeler/dslib",LIBRARY_BASE_URL:"resources/v1/modeler/dslib/dslib:Library",LIBRARY_SEARCH_URL:"resources/v1/modeler/dslib/dslib:Library/search",CLASSIFIED_ITEM_URL:"resources/v1/modeler/dslib/dslib:ClassifiedItem",EDIT:"edit",ASSIGN_TO_SELF:"assignToSelf",REMOVE_ASSIGN_TO_SELF:"removeSelfassign",COMPLETE:"complete",RE_OPEN:"re-open",DELETE:"delete",LINK:"link",RELATIONS:"relations",REMOVE_ASSIGNEE:"removeAssignee",ASSIGNEE_ATTR:"assignees",CONTEXT_ATTR:"context",MATRIX_CONFIG_ATTR:"matrixConfiguration",COMPLETE_STATE:"Complete",REVIEW_STATE:"Review",IN_WORK_STATE:"Active",DEFAULT_SOURCE:"3dspace",XPLAN_SOURCE:"3dplan",DRIVE_SOURCE:"3DDrive",XPLAN_APP_ID:"ENXPLAN_AP",XPLAN_RESOURCE_SHARING_API:"invoke/dsxplan:getResourceSharing",XPLAN_MODIFY_DATA:"dsaccess:Operation.Shareable.Modify",PROJECT:"Project",XPROJECT:"dsplan:xProject",STATE_ATTR:"state",RELATIONS_WIDGET_APP_ID:"ENORIPE_AP",COMPLETED_PREFERENCE:"completedPreference",MATURITY:"maturity",DUPLICATE:"duplicate",COLLABSPACE:"collabspace",CHANGE_OWNER:"changeOwner",EXPORT:"export",DEFINITION:"Definition",BOOKMARK_URL:"URL",CREATE_TASK:"createTask",CREATE_PHASE:"createPhase",CREATE_GATE:"createGate",CREATE_MILESTONE:"createMilestone",ADD_PASSIVE_TASK:"addPassiveTask",ADD_SUBPROJECT:"AddSubProject",COPY_LINK:"link",READER:"Project Member",LEADER:"Project Lead",VIEW_PROFILE:"ViewProfile",SHOW_MEMBERS:"ShowMembers",SEPARATOR:"SeparatorItem",REMOVE_MEMBER:"RemoveMember",MODIFY_ACCESS:"modifyAccess",PROJECT_ACCESS:"projectAccess",NEW:"New",OPEN:"Open",VIEW:"View",LIFECYCLE:"LifeCycle",COLLABORATION:"Collaboration",INFORMATION:"Information",DESTRUCTIVE:"Destructive",OPEN_PROJECT:"openProject",MARK_AS_COMPLETED:"markAsComplete",ENOGANTT:"ENOPRGA_AP",ENOTASK:"ENOTASK_AP",ENORISK:"ENORISK_AP",ENXOPPY:"ENXOPPY_AP",TYPE_FOAF_GROUP:"foaf:Group",TYPE_GROUP:["Group Proxy","Group","foaf:Group","group","group proxy"]}})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtMultiDetailsDisplayView",["UWA/Core","UWA/Promise","DS/E6WCommonUI/Views/MultiDetailsDisplayView"],(function(e,t,i){"use strict";let n=i.extend({_uwaClassName:"ProjectMgmtMultiDetailsDisplayView",_createAndAddChildView:function(e,t){if("date"!==e.type&&"uom"!==e.type||!e.canEdit||e.canEdit(t.model))return this._parent.apply(this,arguments)}});return n})),define("DS/ENOProjectMgmtCommonComponents/config/MassUpdateToolbarConfig",[],(function(){"use strict";return{fetchOptions:{fields:"name,title,modified,state,percentComplete,actualStartDate,actualFinishDate,owner,ownerInfo.name,ownerInfo.firstname,ownerInfo.lastname,modifyAccess,deleteAccess,actualDuration",includeFields:"ownerInfo"}}})),define("DS/ENOProjectMgmtCommonComponents/config/CustomGridDefaultConfig",["i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e){"use strict";return{_uwaClassName:"CustomGridDefaultConfig",customViews:[{identifier:e.PROJECT_MANAGEMENT_CUSTOM_VIEW,layoutDensity:"comfortable",isDefault:!0}]}}));let transientWidget="DS/TransientWidget/TransientWidget",groupViewerModule="DS/i3DXRDFGroupViewer/js/GroupViewer",CreateNew="DS/DocumentCreateNew/CreateNew";define("DS/ENOProjectMgmtCommonComponents/utils/CommonUtils",["UWA/Core","DS/Windows/ImmersiveFrame","DS/E6WCommonUI/Search","DS/LifecycleControls/EditPropDialog","DS/i3DXCompassServices/i3DXCompassPubSub","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Constants/Constants","DS/LifecycleCmd/MaturityCmd","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/E6WCommonUI/UIHelper",groupViewerModule,transientWidget,CreateNew,"i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","css!DS/ChangeMaturityWidget/ChangeMaturityWidget"],(function(t,i,n,o,s,a,l,r,c,d,h,u,m,g,p){"use strict";let C={"3dspace":"3DSpace"},f={getTransientWidgetInstance:function(){return m},getAlertManager:function(){return window.widget.projectMgmtAlertManager},launchProperties:function(e,t){let i=t&&t.model;var n=i&&i.serviceId,s=a.get("tenant"),l=i&&i.physicalId||e;let r={model:{objectId:l,tenant:s,source:C[n]||n}};if(n===d.XPLAN_SOURCE)r.model.sourceName=n,r.model.source="fedsearch",r.model.objectId='uri:"<'+l+'>"',r.model["ds6w:type"]=i.get("type")||i.get("dsxplan:jsType");return new o({ID:"propFor"+e}).launchProperties(r),!0},downloadFile:function(e,t){var i=document.createElement("a"),n=i.href=URL.createObjectURL(new Blob(["\ufeff"+e],{encoding:"UTF-8",type:"text/json;charset=UTF-8"}));i.setAttribute("download",t),document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),URL.revokeObjectURL(n)}),0)},uploadFiles:function(){let n=this,o=this.model;if(!(arguments[2]instanceof FileList||arguments[0]instanceof FileList))return o.add(this._config.name,...arguments);let s=arguments[2]||arguments[0],c=this._config.name;if(!o.id&&!o.get("tempId"))throw new Error(p.INVALID_OBJECT_CANNOT_UPLOAD_FILE);let d={cloneModel:o,config:this._config,csrf:l.prototype.getCSRF(),fieldName:c,onCancel:Function.prototype,onDocumentUpload:function(e){let i=e.documents.map((e=>e.id)).join(",");t.merge(n.options,{doNotFetch:!0,detailedObjects:[]}),e.documents.forEach((e=>{t.merge(e,e.dataelements),t.extend(e,{islast:e.isLatestRevision,relId:e.relateddata.files[0].relId}),delete e.dataelements,delete e.relateddata,delete e.children,n.options.detailedObjects.push(e)})),o.add(c,i,n.options)},onError:function(){require("DS/ENOProjectMgmtCommonComponents/components/CustomAlert").buildNotification({title:p.UPLOAD_FAILURE,message:e[0].errorMessage},"error")},securityContext:a.get("collabspace"),tenant:a.get("tenant"),tenantUrl:r.getUrl()},h=new i;h.reactToPointerEventsFlag=!1,h.inject(widget.body),d.immersiveFrame=h;try{new g(d).create(s)}catch(e){console.log(e)}},getSpecialCharSepartedStringFromObjects:function(e,t){let i="";t=(t||",")+" ";let n=Object.keys(e);return n&&n.length&&n.forEach((n=>{let o=e[n],s=f.getSpecialCharSepartedStringFromArray(o,t);s&&(i+=n+' "'+s+'" ')})),i},getSpecialCharSepartedStringFromArray:function(e,t){return e.length&&e.join(t).replace(/,(?!.*,)/gim," "+p.AND+" ")||""},formatRangeValuesForSelectView:function(e,i,n,o){let s,a,l,r,c=[],d=e&&e.length,h=f.pushEmptyRangeValue(o);h&&c.push(h);let u=f.pushNoneRangeValue(o);if(u&&c.push(u),d){let o=t.is(i,"function")&&i,d=t.is(n,"function")&&n;e.forEach((e=>{r=e.get,s=e.name||e.title||r&&(e.get("name")||e.get("title")),a=o&&o(e)||e[i]||r&&e.get(i),l=d&&d(e)||e[n]||r&&e.get(n),c.push({name:s||"",actualValue:a,displayValue:l})}))}return c},pushEmptyRangeValue:function(e){let i=t.clone(e||{},!1);if(i.blankRange){let e=i.blankRangeDisplayValue;return e&&(e=p.INVALID_ICON+" "+e),{actualValue:i.blankRangeActualValue||"",displayValue:e||p.NONE}}},pushNoneRangeValue:function(e){let i=t.clone(e||{},!1);if(i.noneRange)return{actualValue:i.noneRangeActualValue||"0",displayValue:i.noneRangeDisplayValue||p.NONE}},launchApp:function(e,i){let n;i&&!t.is(i,"array")&&(i=[i]),i&&i.length&&i.forEach((e=>{n=e.getTransferObject(n)})),s.publish("setX3DContent",n),s.publish("launchApp",{appId:e})},addOpenMenuItem:function(e,t,i){i||(i=(i=require("DS/ENOProjectMgmtCommonComponents/config/ViewConfigBase"))&&i.prototype);let n=i&&i.getOpenWithInfo();t&&t.get("i3dx");n&&n._appsList&&(n.set3DXContent(t.getTransferObject()).render(e),!n._getCompatibleApps().length&&t.isSpaceObject()&&e.addItem(f.getWebAppOpenMenuItem(t.id)))},getWebAppGoToLinkMenuItem:function(e){return{text:p.GO_TO_LINK,fonticon:"open",handler:function(){window.open(e)}}},getWebAppOpenMenuItem:function(e){let t=this;return{text:p.OPEN,fonticon:"open",handler:function(){window.open(t.getDPMAppURL(e))}}},getDPMAppURL:function(e){let t=a.get("3DSpace");var i=encodeURIComponent(a.get("tenant")),n=t+"/emxLogin.jsp?physicalId="+encodeURIComponent(e);return n+="&tenant="+i,n+="&x3dPlatformId="+i},getDashboardUrl:function(e,t){let i=t||a.get("appId");return a.get("3DDashboard")+"#app:"+i+"/content:ids="+encodeURIComponent(e)},getShowMembersBtn:function(e){return{text:p.SHOW_MEMBERS,name:d.SHOW_MEMBERS,fonticon:"users-group",handler:function(){f.handleGroupViewer(e)}}},handleGroupViewer:function(e){let t=a.get("tenant"),i={platformId:t,groupId:e,language:a.get("language")};if("OnPremise"===t){let e=a.get("collabspace");i.securityContext=e&&e.split("::")[1]}let n=new u(i),o=require("DS/ENOProjectMgmtCommonComponents/components/PopupCommon");this.dialog=new o({content:n.render(),title:p.GROUP_VIEWER_HEADER,minWidth:550,minHeight:550,height:550,doNotshowFooterButtons:!0}),this.dialog.createDialog()},handleViewProfile:function(e){a.get("3DSwym")?h.viewProfileHandler({memberModel:e}):this.launchProperties(e.id,{model:e})},getRelationsButton:function(e){let i=t.clone(e||{},!1).model;if(!i||!i.isPersonType())return{text:p.RELATIONS_LABEL,name:"relationsButton",fonticon:"object-related",className:i&&i.isSpaceObject()?"":"disabled",handler:function(){f.launchApp(d.RELATIONS_WIDGET_APP_ID,i)}}},getPreviewButton:function(e){let i,n=t.clone(e||{},!1),o=n.model,s=n.handler;return i={text:p.PREVIEW,fonticon:"eye",name:"preview",className:o?"":" disabled",handler:s},i},getLinkEditButton:function(e){let i,n=t.clone(e||{},!1),o=n.model,s=n.handler;return i={text:p.EDIT,fonticon:"pencil",name:"edit",className:o?"":" disabled",handler:s},i},getCopyLinkURL:function(e,t){e&&f.copyTextToClipboard(f.getDashboardUrl(e.id,t))},getconcatenatedActualDisplayValue:function(e){return e.value+"-"+(e.nls[widget.lang]||e.name)},_compare:(e,t,i)=>e[i].toLowerCase()<t[i].toLowerCase()?-1:e[i].toLowerCase()>t[i].toLowerCase()?1:0,_compareModel:(e,t,i)=>parseInt(e[i])<parseInt(t[i])?-1:parseInt(e[i])>parseInt(t[i])?1:0,sortModels:function(e,t){let i=this;e.sort(((e,n)=>i._compareModel(e,n,t)))},sort:function(e,t){let i=this;e.sort(((e,n)=>i._compare(e,n,t)))},addExistingSearch:function(e){new n("",!1,"furtive").activate(e)},loadLinksView:function(e){if(!this.linkPopupInvoked){let i=this;this.linkPopupInvoked=!0;let n=t.clone(e||{},!1);t.extend(n,{closureFunc:function(){delete i.linkPopupInvoked}}),this.loadJSDependency("DS/ENOProjectMgmtCommonComponents/views/LinkViewPopup").then((e=>{new e(n).render()}))}},getFontIconElement:function(e,i){let n=t.clone(i||{},!1);return t.createElement("div",{html:{tag:"i",class:"fonticon "+e+(n.additionalClass?" "+n.additionalClass:"")}})},easeInOutSineProjectMgmt:function(e){return-.5*(Math.cos(Math.PI*e)-1)},addMaturityCompactContainer:function(e){let i=t.clone(e||{},!1),n=i.parentView,o=i.maturityCompactContainer;new t.createElement("div",{class:"eno-compact-maturity-display"}).inject(o),delete n.maturityCmdObject,n.maturityCmdObject=new c},updateMaturityCompactView:function(e){let i=this,n=t.clone(e||{},!1).parentView,o=n&&n.getElement(".eno-compact-maturity-display");if(o){o.empty();let t=n._currentModel;if(t){let s=t.get("id");n.maturityCmdObject.executeCompactViewAsync(window.widget,o,{},s).then((function(o){n._viewCollection.getDataModelDetails({refresh:!0,fields:"none,state,percentComplete,actualDuration,actualStartDate,actualFinishDate",include:"none",doNotCache:"true"}).then((function(e){let i=t.model;i.dispatchEvent("onSaveModelComplete",[i.getAttributes()])})),i.updateMaturityCompactView(e)}))}}}};return f})),define("DS/ENOProjectMgmtCommonComponents/config/ConfigBase",["UWA/Core","UWA/Class/Model","DS/CollectionView/CollectionViewStatusBar","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Utils/FederatedSearch","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a){"use strict";let l=t.extend({_uwaClassName:"ConfigBase",setValues:Function.prototype,setColumnInfo:function(){let e=this;e.columnInfo={};let t=0;this.values.forEach((i=>{(i.children||[i]).forEach((i=>{e._setColumnInfoForField(i,t),t++}))}))},_setColumnInfoForField:function(e,t){let i;i="list"===this.type?e.dataIndex:"tab"===this.type||"facet"===this.type?e.key:e.dataIndex||e.name,this.columnInfo[i]=e,this.columnInfo[i].valueIndex=t,e.fieldDefinitionName&&(this.columnInfo[e.fieldDefinitionName]=this.columnInfo[i]),e.customContentId&&(this.customContentColumnInfo[e.dataIndex]=e,this.customContentColumnInfo[e.dataIndex].valueIndex=t)},handleCustomFieldConfigs:function(t,i,n,o){let s=this.cloneConfig(!0),a=e.clone(s.options||{},!1);if(a.initializeCustomAttributes){let e=i.get("restrictedAccess");n.initializeCustomAttributes(i.model.getCustAttrFieldDefinitionSource(),i.get("type"),s,o,void 0,e,i.model)}let l=!1,r=s.values;if(r.length)for(let n=0;n<r.length;n++){let o=!1,c=r[n],d=c.name,h=i.get(d);if(t){if(c.isCustomField){let t=c.values;o=e.is(t,"array")&&t.length<=1}!h&&c.hasOwnProperty("defaultValue")&&i.set(d,c.defaultValue)}else if(a.initializeCustomAttributes&&!i.model.has(d))o=!0;else if(c.showFieldOnlyIfValueExists&&(o=!0,h)){o=!(h instanceof e.Class.Collection||e.is(h,"array"))&&e.is(h,"object")?!Boolean(h&&Object.keys(h).length):!Boolean(h&&h.length)}o&&(l=!0,s.values.splice(n,1),n--)}return l&&s.setColumnInfo(),s},getDefaultTab:function(e){for(let t in this.values){let i=this.values[t];if(e?i.key===e:i.checkFlag)return i}},cloneConfig:function(t){if(t){let i=new this.constructor;return i._uwaClassName=i._uwaClassName+"Cloned",i.values=[],i.options=this.options,this.values.forEach((n=>{n.config?n.config=n.config.cloneConfig&&n.config.cloneConfig(t):n=e.clone(n),i.values.push(n)})),i.setColumnInfo(),i}{let t={values:[],columnInfo:{}};return this.values.forEach((i=>{t.values.push(e.clone(i)),t.columnInfo[i.dataIndex||i.name]=i})),t}},setRangeValues:function(e,t){this.values[e.valueIndex].values=t,this.values[e.valueIndex].defaultValues=t,this.values[e.valueIndex].defaultValue=t[0]?t[0].actualValue:"",this._setColumnInfoForField(e,e.valueIndex)},getPersonSearchSource:function(e){let t="";return t=n.get("3DSwym")?!e||"group"!==e.type&&"member"!==e.type?["swym","3dspace"]:["usersgroup","swym"]:["3dspace"],t},getPersonSearchSourceTypes:function(e,t){let i="";return i="swym"===e.toString()?{swym:["pno:Person"]}:"usersgroup"===e.toString()?{usersgroup:["foaf:Group"],"3dspace":["Group","Group Proxy"]}:"group"===t.type?{"3dspace":["Group","Group Proxy"]}:"member"===t.type?{"3dspace":["Person","Group","Group Proxy"]}:{"3dspace":["Person"]},i},getObjectSearchSource:function(e){let t=["3dspace","3dplan","3dportfolio"];return e&&(t=t.concat("drive")),o.filterSearchSources(t)},getPanelViewConfig:function(){return this.leftPanel||this.mainPanel},getStatusBarOptions:function(){return[{type:i.STATUS.NB_SELECTED_ROWS},{position:"far",type:i.STATUS.NB_VISIBLE_ITEMS}]},getStateHelpInfoFilter:function(e){return this.columnInfo.state&&this.columnInfo.state.helpInfoFilter||e&&e.get("policy")},getSpecificViewConfig:function(e,t){let i=this._getSpecificViewConfig(this.leftPanel,"group1",e);if(i||(i=this._getSpecificViewConfig(this.mainPanel,"group1",e)),i&&t){let e=this._getSpecificViewConfig(i,"group3",t);e&&(e.separator=!0)}return i},_getSpecificViewConfig:function(e,t,i){return e&&e.toolbarConfig[t].find((e=>e.name===i))},addAdditionalValues:Function.prototype});return l.assigneesCustomButtons=[{id:"assignToSelf",iconClass:"fonticon-user-ok",toolTip:a.ASSIGN_TO_SELF},{id:"removeSelfassign",iconClass:"fonticon-user-delete",toolTip:a.REMOVE_ASSIGN_TO_SELF}],l})),define("DS/ENOProjectMgmtCommonComponents/config/CustomAttributesConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase"],(function(e){"use strict";return e.extend({_uwaClassName:"CustomAttributesConfig",columnInfo:{},type:"basic",values:[],setup:function(e){let t=UWA.clone(e||{},!1);this.options=t,this.options.initializeCustomAttributes=!0,this.options.displayMessageWhenNoAttributeExists=!0,this.setColumnInfo()}})})),define("DS/ENOProjectMgmtCommonComponents/config/ClassificationConfig",["DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n){"use strict";let o=t.extend({_uwaClassName:"ClassificationConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"classification",values:[{readWrite:"true",name:"classificationPaths",attributeToDisplay:"name",imageAttribute:"image",singleObjectOnly:!1,label:n.CLASSIFICATION_PATHS,type:"object",toggleAttributes:!0,typeAheadCallback:e.typeAheadCallback,linkCallback:i.launchProperties,placeHolder:n.SEARCH_PLACEHOLDER_TEXT,searchSource:["3dspace"],validateSameTenant:!0,searchSourceTypes:{"3dspace":["General Class","Document Family","Export Control Class","IP Control Class","Part Family","Security Control Class"]}}]});return o._instance=o._instance||new o,o._instance})),define("DS/ENOProjectMgmtCommonComponents/config/ClassificationConfigForCreate",["DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n){"use strict";let o=t.extend({_uwaClassName:"ClassificationConfigForCreate",columnInfo:{},setup:function(){this.setColumnInfo()},type:"classification",values:[{readWrite:"true",name:"classificationPaths",attributeToDisplay:"name",imageAttribute:"image",singleObjectOnly:!1,label:n.CLASSIFICATION_PATHS,type:"object",toggleAttributes:!0,typeAheadCallback:e.typeAheadCallback,linkCallback:i.launchProperties,placeHolder:n.SEARCH_PLACEHOLDER_TEXT,searchSource:["3dspace"],validateSameTenant:!0,searchSourceTypes:{"3dspace":["General Class","Document Family","Export Control Class","IP Control Class","Part Family","Security Control Class"]}}]});return o._instance=o._instance||new o,o._instance})),define("DS/ENOProjectMgmtCommonComponents/config/CommonListConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t){"use strict";let i=e.extend({_uwaClassName:"CommonListConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"basic",values:[{text:t.TITLE,key:"title",dataIndex:"tree",fields:"title,name",icon:""}],doNotApplyNodeExpand:!0});return i._instance=i._instance||new i,i._instance})),define("DS/ENOProjectMgmtCommonComponents/config/MembersListConfig",["UWA/Core","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/DefaultGridConfig","DS/ENOProjectMgmtCommonComponents/utils/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o){"use strict";let s=t.extend({_uwaClassName:"MembersListConfig",columnInfo:{},ignoreCheckBoxSelection:!0,customContentColumnInfo:{},setup:function(){this.setColumnInfo(),this.gridConfig=this.getGridConfig()},type:"list",getGridConfig:function(){let t=e.clone(i);return t.cellDragEnabledFlag=!0,t.identifier="memberListGridView",t.showContextualMenuColumnFlag=!0,t.showRowIndexFlag=!1,t.customViews=[{identifier:o.MEMBER_VIEW,layoutDensity:"comfortable",columnsVisibleFlag:{typeicon:!1},columnsWidth:{title:"auto",organization:400,type:300,projectAccess:300,comment:300},columnsSortModel:[{dataIndex:"title",sort:"asce"}],isDefault:!0}],t.statusBarOptions=this.getStatusBarOptions(),t},getContextFields:function(){return"none,name,title,image,project,thumbnail,typeicon"},getContextIncludeFields:function(){return"none"},values:[{text:o.MEMBERS,fields:"permissions.title,permissions.name,permissions.disableMemberRow",include:"permissions",dataIndex:"tree",key:"title",minWidth:"175",maxWidth:"300",icon:""},{text:o.ORGANIZATION,fields:"permissions.organization",dataIndex:"organization"},{text:o.TYPE,fields:"permissions.nlsType,permissions.type",dataIndex:"nlsType"},{text:o.RESPONSIBILITY,fields:"permissions.projectAccess,permissions.canChangePermission",dataIndex:"projectAccess",mapFromRangeValue:!0},{text:o.COMMENT,fields:"permissions.comment",dataIndex:"comment"}],dropDownItemList:[n.LEADER,n.READER,n.SEPARATOR,n.VIEW_PROFILE,n.SHOW_MEMBERS,n.REMOVE_MEMBER]});return s._instance=s._instance||new s,s._instance})),define("DS/ENOProjectMgmtCommonComponents/config/CommonTabConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t){"use strict";return e.extend({_uwaClassName:"CommonTabConfig",columnInfo:{},type:"tab",hide:!0,setup:function(){this.setColumnInfo()},values:[{name:t.PROPERTIES,key:"properties",selected:!0,checkFlag:!0}]})})),define("DS/ENOProjectMgmtCommonComponents/components/ProgressSpinner",["UWA/Core","DS/Controls/Loader","DS/Controls/ModalContainer","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],(function(e,t,i,n,o){"use strict";let s={_isSpinnerVisible:!1,initializeProgressSpinner:function(e){this._rootContainer=e},showProgressSpinner:function(e,o){n.get("useExternalNotification")?s.showLoadingMessage(e,o):(e=e||this._rootContainer)._isSpinnerVisible||(e._isSpinnerVisible=!0,this._progressSpinner=new t({text:o}),this._progressSpinner.on(),i.createModal(e,this._progressSpinner.elements.container))},hideProgressSpinner:function(e){n.get("useExternalNotification")?s.hideLoadingMessage(e):(e=e||this._rootContainer)&&e._isSpinnerVisible&&(i.removeModal(e),delete e._isSpinnerVisible)},showLoadingMessage:function(e,t){this.setSpinnerView(e),o.showLoadingMessage(e,t)},hideLoadingMessage:function(e){(e=e||s.getSpinnerView())&&o.hideLoadingMessage(e),this.setSpinnerView()},showRowLoadingMessage:function(e,t){this.setRoWSpinnerView(e),o.showLoadingMessage(e,t)},hideRowLoadingMessage:function(e){(e=e||s.getRowSpinnerView())&&o.hideLoadingMessage(e),this.setRoWSpinnerView()},setSpinnerView:function(e){this._spinnerView=e},getSpinnerView:function(){return this._spinnerView},setRoWSpinnerView:function(e){this._roWSpinnerView=e},getRowSpinnerView:function(){return this._roWSpinnerView}};return s})),define("DS/ENOProjectMgmtCommonComponents/components/CustomAlert",["UWA/Core","UWA/Class/Listener","DS/Windows/Dialog","DS/Controls/Button","DS/Windows/ImmersiveFrame","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/ProgressSpinner","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/AppSettings"],(function(e,t,i,n,o,s,a,l,r,c,d){"use strict";let h=0,u={init:function(){return this.adjustAlertMessagePosition(),a.setNotificationManager(s),this.listener=new t,this.listener.listenTo(widget,"onResize",this.adjustAlertMessagePosition.bind(this)),this.listener.listenTo(c,{showConfirmDialog:u.confirmDialog,showNotification:u.buildNotification}),s},getNotificationsManagerViewOnScreen:function(){return a},adjustAlertMessagePosition:function(){a.slide({top:0,right:widget.body.offsetWidth/2-120});let e=this.getDialogView();e&&e.setAbsolutePosition({y:1})},buildNotification:function(e,t){let i=d.get("useExternalNotification"),n=l.getAlertManager(),o=u.getLastNotificationData(e);if(!o||!i&&o._data.message!==e.message){let o={sticky:!1,title:e.title&&e.title.htmlEncode(),subtitle:e.subtitle&&e.subtitle.htmlEncode(),message:e.message&&e.message.htmlEncode(),level:t||"success",noEscape:!0};if(n)var s=n.addNotif(o);!i&&u.disposeNotification(e.hideDelay,s)}},disposeNotification:function(e,t){let i=u.getLastNotificationData();i&&!i._fadingTimeout?setTimeout((function(){let t=i.getDiv(),n=setInterval((function(){t.style.opacity||(t.style.opacity=1),t.style.opacity>0?t.style.opacity-=.1:(clearInterval(n),u.clearNotificationMessages())}),e&&e/10||100)}),e||3e3):setTimeout((function(){u.getNotificationsManagerViewOnScreen().removeNotification(t)}),e||3e3)},getLastNotificationData:function(e){if(d.get("useExternalNotification")){let t=widget.alerter&&widget.alerter.getMessages();return l.findObject(t,"textContent",e.message)}let t=u.getNotificationsManagerViewOnScreen(),i=t._lastNotificationDisplayed||t.notifManagerViewOnScreen&&t.notifManagerViewOnScreen._lastNotificationDisplayed;return t._notifications.find((e=>e._data===i))},clearNotificationMessages:function(){let e=u.getNotificationsManagerViewOnScreen();e&&e.removeNotifications("","")},confirmDialog:function(t,n){u.immersiveFrame&&u.close();let s=t.noLabel,a=t.yesLabel,l=t.isReload,r=Array.prototype.slice.call(arguments,1),c=t.yesEventFunc&&t.yesEventFunc.bind(void 0,...r),d=t.noEventFunc&&t.noEventFunc.bind(void 0,n);u.immersiveFrame=new o({}),u.dontResetModel=t.dontResetModel,u.setParentView(t.parentView);let m=u.getDialogView();if(!m||!m.isReload){if(!m){m=new i({immersiveFrame:u.immersiveFrame,identifier:"customAlert_"+h++,title:t.title,content:e.createElement("p",{html:t.message&&t.message.htmlEncode()}),minHeight:150,minWidth:500,width:500,modalFlag:!0});let n=u.getParentView();u.immersiveFrame.inject(n&&n.container||widget.body),m.setAbsolutePosition({y:1}),u.setDialogView(m),u._registerEvents()}m.buttons=u.getFooterButtons({noLabel:s,yesLabel:a,noEventFunc:d,yesEventFunc:c,cancel:t.cancel}),m.buttons.Apply.getContent().addClassName("wux-ui-state-primary"),m.isReload=l}},_registerEvents:function(){let e=this.getDialogView();e.realClosefunc=e.close,e.close=this.close.bind(this)},getFooterButtons:function(e){let t={Discard:new n({domId:"noBtn",label:e.noLabel,onClick:this.handleFooterButtonEvents.bind(this,e.noEventFunc)}),Apply:new n({domId:"yesBtn",label:e.yesLabel,onClick:this.handleFooterButtonEvents.bind(this,e.yesEventFunc)})};return e.cancel&&(t.Cancel=new n({domId:"cancelBtn",label:e.cancel.label,onClick:this.handleFooterButtonEvents.bind(this,e.cancel.event)})),t},handleFooterButtonEvents:function(e,t){let i=t.dsModel.value;this.dontResetModel||"Apply"!==i||this.getParentView().dispatchEvent("resetModel"),e&&e(),this.close()},close:function(){let e=this.getDialogView();e&&e.realClosefunc(),this.setDialogView(),this.setParentView(),this.immersiveFrame.destroy(),delete this.immersiveFrame,r.hideRowLoadingMessage()},setDialogView:function(e){this._dialogView=e},getDialogView:function(){return this._dialogView},setParentView:function(e){this.parentView=e},getParentView:function(){return this.parentView},showSingleErrorMessageForDataObjects:function(e,t,i){if(t){let n=l.getSpecialCharSepartedStringFromObjects(e)+t+(i?' "'+i+'"':"");u.buildNotification({message:n},"error")}let n=r.getRowSpinnerView();n&&r.hideRowLoadingMessage(n)},displayMessage:function(e){let t={message:e.msg,hideDelay:e.hideDelay};u.buildNotification(t,e.msgType);let i=r.getRowSpinnerView();i&&r.hideRowLoadingMessage(i)}};return u})),define("DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel",["UWA/Core","DS/E6WCommonUI/Models/CloneModel","DS/DocumentManagement/DocumentManagement","DS/DocumentManagement/DriveDocumentManagement","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Models/RelatedDataItem","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d,h){"use strict";let u=new RegExp(/[\\"#\$@%\*,\?\\\\<>\[\]\|:;'';]/),m=/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/gi,g=/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi,p=t.extend({_uwaClassName:"ProjectMgmtCloneModel",init:function(t,i){this.saving=!1,this.localRelatedItems={},this._parent.apply(this,arguments);let n=e.clone(i||{},!1).config;if(n){let e=n.hasOwnProperty("context");t.isNew()&&!e&&n.values&&n.values.every((e=>{if(e.isContextField)return this.CONTEXT_ATTR=e.name,!1}))}let o=this;Object.keys(this.model._attributes).forEach((e=>o.listenTo(o,"onRemove:"+e,o.removeForMassUpdate.bind(o,e))))},add:function(t,i,n){let s=i,a=e.clone(n||{},!1),l=a.config,r=l&&l.preValidate,c=this.CONTEXT_ATTR||o.CONTEXT_ATTR;if(!r||this.preProcessValidation.apply(this,arguments)){if(e.is(i,"array"))switch(n.config.type){case"person":case"group":case"member":case"customView":i=i[0]}if(i&&(e.is(i,"array")||i instanceof FileList))s=this._addFile(i,a);else if(!e.is(i,"object")){if(t===c||l.setOnSync){a.refresh=!0,a.rmcType=a.model&&a.model.get("type"),s=this._addModel(t,i,a);let e=this[l.handleOnSyncFunc]||this.handleContextOnSync;return void s.addEventOnce("onSync",e.bind(this,{fieldName:t,contextOptions:a}))}s=this._addModel(t,i,a)}let o=s&&s.length||s instanceof e.Class.Model;a.changed=o,o&&this.setRelatedItemData(t,s,a)}return s},setRelatedItemData:function(e,t,i){let n=this.modificationsPending,o=i.config,s=o.validate,a=!1,l=this.get(e);l||(a=!0,l=this.model.createRelatedDataItems([],{config:o})),o.singleObjectOnly&&l.length&&(l.reset(),l.resetOperationFlags()),l.add(t),a?this.set(e,l,{validate:s,config:o}):(this.validationError=s&&this.validate(this.toJSON(),i),this.validationError&&this.dispatchEvent("onValidationFailure"),this.dispatchEvent("onChange:"+e,[this,t,i])),this.localRelatedItems[e]=l,this.modificationsPending=Boolean(i&&i.changed||n),this.dispatchEvent("onChange:modificationsPending",[this]),this.dispatchEvent("onChange",[this,i])},remove:function(t,i,n){let o,s=e.clone(n||{},!1),a=s.config,l=this.get(t);l&&l.length&&(o=i instanceof d?i:l.at(i)||l.get(i),l.remove(o),this.localRelatedItems[t]=l,this.modificationsPending=!0,this.dispatchEvent("onChange:"+t),this.dispatchEvent("onChange",[this,s]),this.dispatchEvent("onChange:modificationsPending",[this]),this.validationError=a&&a.validate&&this.validate(this.toJSON(),a),this.validationError&&this.dispatchEvent("onValidationFailure"))},removeForMassUpdate:function(e,t,i){let n=this;t.localRelatedData[e].filter((e=>"remove"===e.operation)).forEach((t=>{n.localRelatedData={},n.remove(e,t.value,i)}))},set:function(t,i,n){if(i&&i.hasOwnProperty("actualValue"))arguments[1]=i.actualValue,n&&delete n.whisper;else if(e.is(t,"object")){let e=t,i=Object.keys(t);return void(i.length&&i.forEach((t=>{this.set(t,e[t])})))}return this._parent.apply(this,arguments)},_attributesGet:function(e,t){return e?e[t]:this.get(t)},_addFile:function(e,t){let i=[],n=t.config,o=e.length;for(let t=0;t<o;t++){let n=e[t],o={title:n.name,type:n.type,lastModified:n.lastModified,lastModifiedDate:n.lastModifiedDate,image:window.URL.createObjectURL(n),file:n};i.push(s.getObjectForAdding(o.id,{attrs:o,modelConstructor:this.model.getModelConstructorBasedOnType(o.type)}))}return n&&n.singleObjectOnly&&i.length?i[0]:i},_addModel:function(e,t,i){if(!this.validateSelfObject.apply(this,arguments))return;let n=this,r=[],c=i.config,u=c.doNotFetch||i.doNotFetch,m=c.fetchSource,g=i.errObjs||{},p=t.split(","),C=p.length,f=this.get(e);for(let E=0;E<C;E++){let C,D,w=p[E],M=s.alreadyHasObjectInRelatedData(f,w);if(M&&!i.ignoreIfAlreadyExists){let e=M.displayType||M.objectType;g[e]||(g[e]=[]),g[e].push(M.displayName);continue}i.detailedObject=s.getDetailedObject(w,i.detailedObjects);let _=s.getObjectDataFromDropSearchOrTypeAhead(i);_.type===o.TYPE_FOAF_GROUP?(D=!0,_.groupURI=_.id,!i.donotDeleteId&&delete _.id):_.type===l.TYPENAMES.PERSON&&(u=!1);let S=_.id,b=_.serviceId;if(S&&S.startsWith(l.MBSE_I3DX)&&(u=!0),b!==o.DRIVE_SOURCE){let s=i.refresh,a=i.doNotCache;m||(m=b===o.XPLAN_SOURCE||"SystemModel"===_.type?"RiskContextInfo":"ObjectInfo");let l=c.fields?c.fields:"";c.fetchSourceSpecificFields&&c.fetchSourceSpecificFields[m]&&(l||(l=c.fetchSourceSpecificFields[m])),C={refresh:s,doNotCache:a,rmcType:i.rmcType,fields:l,include:c.include,fetchSource:m,serviceId:b,type:_.type,onComplete:c.customButtons&&function(){n.dispatchEvent("onChange",[n,i])},onFailure:function(){n.rollbackChanges(e,t,i)}}}let y=s.getObjectForAdding(S,{attrs:_,isNew:D,fetchOptions:!u&&C,modelConstructor:i.isRelatedDataItem?d:this.model.getModelConstructorBasedOnType(_.type)});if(!!t.contains(":")&&t.split(":")[1]==y.id&&"3DSwym"==y.get("serviceId"))return void a.buildNotification({message:h.USER_ACCESS_RIGHTS_ISSUE,hideDelay:3500},"error");r.push(y)}i.errObjs?i.errObjs=g:Object.keys(g).length&&a.showSingleErrorMessageForDataObjects(g,h.OBJECT_ALREADY_ASSOCIATED,this.get("title")||h.NEW_OBJECT);let E=r.length;return E?c&&c.singleObjectOnly&&E?r[0]:r:void 0},uploadFiles:function(e,t){for(let i=e.length-1;i>=0;i--){e[i].get("file")&&this.uploadFile(e[i],t)}},uploadFile:function(t,n){let o=this,s=e.clone(n||{},!1),a=t.get("title"),l=t.get("file"),d=s.callback,u=s.onFailure,m=a.lastIndexOf(".");if(-1!==m){let e=a.substring(m).toLowerCase();s.isImage=-1!==this.imageExtensions.indexOf(e)}if(!this.id&&!this.isNew)throw new Error(h.INVALID_OBJECT_CANNOT_UPLOAD_FILE);this._fileUploadCount=this._fileUploadCount?this._fileUploadCount+1:1,s.onComplete=function(e){o._fileUploadCount--;let i={},a=e;if(e&&e.data&&(a=e.data[0],i.id=a.id,i.hasfiles="TRUE",i.type=a.type,i.physicalId=a.id),s.isImage&&!t.FileName)i.image=window.URL.createObjectURL(l);else{let e=a.dataelements;e&&(i.image=e.image||e.typeicon)}t.set(i),d&&d(o,n)},s.onFailure=function(e,i){o._fileUploadCount--,o.remove(s.fieldName,t.id,n),u&&u(e,i,n)};let g={fileInfo:{file:l}},p={csrf:c.prototype.getCSRF(),securityContext:r.get("collabspace"),tenant:r.get("tenant"),tenantUrl:r.get("3DSpace")};if(this.isNew){let e=this.model.getCollabSpace();e&&(g.collabspace=e)}else g.relInfo={parentDirection:"From",parentId:this.id,parentRelName:s.parentRelName};e.merge(s,p),i.createDocument(g,s)},updateDocument:function(e,t,o){var s=t.get("service"),l=t.get("physicalId"),c=r.get("tenant");"3DDrive"===s&&(e=n.getNewBlobFileWithOldName(e,t));var d={id:l,fileInfo:{file:e,comments:o}};i.modifyDocument(d,{tenant:c,serviceId:s,tenantUrl:r.get("3DSpace"),onComplete:function(i,n){if("3DDrive"!==s){var o=e.name.substring(0,e.name.lastIndexOf("."));o!==t.get("title")&&t.set("title",o)}a.buildNotification({title:"Update Successful",hideDelay:3500},"success")},onFailure:function(e){a.buildNotification({title:"Update Failed",message:e.internalError,hideDelay:3500},"error")}})},isUploadingFiles:function(){return Boolean(this._fileUploadCount)},imageExtensions:[".gif",".jpg",".png",".gif",".jpeg",".3dxml",".cgr",".pdf",".bpm",".psd",".ai"],dataForRendering:function(){let e=this._parent.apply(this,arguments),t=this.get("modified"),i=this.get("originated");return t&&(e.modified=s.getIntlDateFormat(t,!0)),i&&(e.originated=s.getIntlDateFormat(i,!0)),e},cancel:function(){if(this.saving=!1,this.localAttributes={},this.localRelatedItems={},this.modificationsPending){this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]),this.dispatchEvent("onChange",[this]);let i=Object.keys(this.model._attributes);var t=i.length;for(let n=0;n<t;n++){let t=i[n],o=this.model.get(t);o instanceof e.Class.Collection&&this.resetRelatedObjectCollection(o),this.dispatchEvent("onChange:"+t)}}this.localAttributes={},this.localRelatedItems={}},resetRelatedObjectCollection:function(e){let t=e.relatedDataToAdd,i=e.relatedDataToDelete,n=t.length;for(let i=0;i<n;i++)e.remove(t[i],{silent:!0});let o=i.length;for(let t=0;t<o;t++)e.add(i[t],{silent:!0});e.resetOperationFlags()},clearLocalAttributes:function(t){t&&!e.is(t,"array")&&(t=[t]),t&&t.length&&t.forEach((e=>{delete this.localAttributes[e]}))},validate:function(e,t){var i=!0,n={fields:[],messages:{}};let o=this._options.config&&this._options.config.columnInfo;for(let s in o){let a=o[s];if(a&&(a.validate||a.required)){let o=a.name,s=this._attributesGet(e,o),l=a.customValidate?"customValidate":a.type,r=!1;switch(l){case"customValidate":r=this[a.customValidate](e,n,a);break;case"text":case"textarea":r=a.isTitleField?this.isvalidTitle(s,n,a):this.isValidString(s);break;case"startStop":let i=t.name===a.startDateAttribute||t.name===a.endDateAttribute?t:a;r=this.validateStartEndDates(e,n,i);break;case"number":r=this.isvalidNumber(s);break;case"date":r=this.isValidDate(e,n,o);break;case"object":r=this.validateObjectField(e,n,a);break;default:r=!1}r||"text"!==l&&"textarea"!==l&&"number"!==l||n.fields.push(o),i=i&&r}}return this.dispatchEvent("disableSaveButton",!i),i?this.dispatchEvent("onValidationSuccess")&&void 0:n},validateObjectField:function(e,t,i){let n,o=!0,s=i.name,a=i.required,l=i.singleObjectOnly;if(e.hasOwnProperty(s)){let i=this._attributesGet(e,s);i&&(n=l?1===i.length:i.length),a&&!n&&(o=!1,t.fields.push(s))}return o},isValidString:function(t){return Boolean(e.is(t,"string")&&t&&t.trim().length)},isValidDate:function(e,t,i){let n=!0;return this.getDateFieldValue(i,e)||(n=!1,t.fields.push(i)),n},isvalidNumber:function(e){let t=!0;return e&&isNaN(e)&&(t=!1),t},isvalidURL:function(e,t,i){let n=i.name,o=this._attributesGet(e,n),s=this.isValidString(o)&&!o.contains(" ")&&(o.match(m)||o.match(g));return!s&&t.fields.push(n),Boolean(s)},isvalidTitle:function(e,t,i){let n=i.name,o=this.isValidString(e);return u.test(e)&&(o=!1,t.messages[n]=h.TITLE_ERROR),!o&&t.fields.push(n),Boolean(o)},handleAttrsUpdateForActions:function(t,i,n){switch(e.extend(n||{},{invokeSaveEvent:!0}),t){case o.STATE_ATTR:case o.PROJECT_ACCESS:this.set(t,i),this.dispatchEvent("submitSave",[n]);break;case o.ASSIGNEE_ATTR:this.handleAssigneesUpdateOnDrop(t,i,n);break;case o.ASSIGN_TO_SELF:case o.REMOVE_ASSIGN_TO_SELF:this.handleAssigneeUpdate(o.ASSIGN_TO_SELF===t?"add":"remove",i,n);break;case o.REMOVE_ASSIGNEE:this.handleRemoveAssignees(i,n)}},validateAttrsOnDrop:function(e){let t;if(e===o.ASSIGNEE_ATTR)t=this.validateAssigneeOnDrop();return t},validateAssigneeOnDrop:function(){},updateDetailsDisplay:function(e){e&&(this.validationError=this.validate(this.toJSON())),this.dispatchEvent("resetDetailsDisplay")},validateStartEndDates:function(t,i,n){let o=!0,s=e.clone(n||{},!1),a=s.startDateAttribute,l=s.endDateAttribute,r=this._attributesGet(t,a),c=this._attributesGet(t,l);return r=r&&new Date(r.getTime&&r.getTime()||r).setHours(0,0,0,0),c=c&&new Date(c.getTime&&c.getTime()||c).setHours(0,0,0,0),r&&c&&r>c&&(o=!1,i.fields.push(s.name)),o},getDateFieldValue:function(t,i){let n=this._attributesGet(i,t);return n&&e.is(n.actualValue,"string")&&(n=n.actualValue),n},getContextModel:function(){let e=this.get(o.CONTEXT_ATTR);return e&&e.length&&e.at(0)},validateSelfObject:function(){let e=!0,t=s.removeBracketLongURI(arguments[1]);return this.id===t&&(a.buildNotification({message:h.replace(h.SAME_OBJECT_ERROR,{title:this.get("title")})},"error"),e=!1),e},preProcessValidation:function(t,i,n){let o,l,r=this,c=!0,d=e.clone(n||{},!1).config,u=d&&d.preValidate;return u&&u.length&&u.forEach((e=>{c&&(o=e.nlsMsg,l=r.get(e.name),l&&l.length&&l._alreadyHasObjectInRelatedData(s.removeBracketLongURI(i))&&(o&&a.buildNotification({message:h.replace(o,{fieldLabel:e.label})},"error"),c=!1))})),c},dispatchEventForAssignees:function(e){let t=e&&e.invokeSaveEvent,i=this.hasEvent("submitSave");t&&i&&this.dispatchEvent("submitSave",[e])},handleAssigneeUpdate:function(t,i,n){let a=this.MembersConfig.columnInfo.assignees;if(!a)return;let l=r.get("user");if("add"===t){let t=this,r=function(e){t.add(o.ASSIGNEE_ATTR,e,{config:a}),t.dispatchEventForAssignees(n)};!i||i instanceof e.Class.Model||(i="");let c=i||s.getPersonObjectInfo(l);c.getCESStamp()?r(c):c.addEventOnce("onSync",r.bind(this,c))}else if("remove"===t){let e=this.get("assignees")._alreadyHasObjectInRelatedData(l);this.remove(o.ASSIGNEE_ATTR,e,{config:a}),this.dispatchEventForAssignees(n)}},handleAssigneesUpdateOnDrop:function(e,t,i){this.setRelatedItemData(e,t,{config:this.MembersConfig.columnInfo.assignees}),this.hasEvent("submitSave")&&this.dispatchEvent("submitSave",[i])},handleRemoveAssignees:function(e,t){if(e)this.remove(o.ASSIGNEE_ATTR,e,{config:this.MembersConfig.columnInfo.assignees});else{this.get(o.ASSIGNEE_ATTR).removeAll()}this.hasEvent("submitSave")&&this.dispatchEvent("submitSave",[t])},handleContextOnSync:Function.prototype});return Object.defineProperty(p.prototype,"title",{get:function(){return this.get("title")||this.get("name")}}),Object.defineProperty(p.prototype,"isNew",{get:function(){return this.model.isNew()}}),p})),define("DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtBaseCloneModel",["DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel","DS/ENOProjectMgmtCommonComponents/utils/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n){"use strict";return t.extend({_uwaClassName:"ProjectMgmtBaseCloneModel",validate:function(e){this.dispatchEvent("disableSaveButton",!1)},handleContextOnSync:function(t,i){let o=t.fieldName,s=t.contextOptions,a=this.getNLSMessageForCreateError(i);a?e.buildNotification({title:this.isNew?n.CANNOT_CREATE:n.CHANGE_CONTEXT,message:a,hideDelay:3500},"error"):(s.changed=Boolean(!a),this.setRelatedItemData(o,i,s))},getNLSMessageForCreateError:function(e){let t,o=this.isNew,s=e.get("project");if(e.isXPlanObject()&&!s)t=n.COLLAB_SPACE_SELECT_ERROR;else if(!e.canCreate()){switch(e.type){case i.PROJECT:t=o?n.NO_DPMPROJECT_CREATE_ACCESS:n.NO_DPMPROJECT_CHANGE_CONTEXT_ACCESS;break;case i.XPROJECT:t=o?n.NO_XPROJECT_CREATE_ACCESS:n.NO_XPROJECT_CONTEXT_CHANGE_ACCESS;break;default:t=o?n.NO_CREATE_ACCESS_TT_MSG:n.NO_CHANGE_CONTEXT_ACCESS_TT_MSG}}return t}})})),define("DS/ENOProjectMgmtCommonComponents/utils/ClassificationCloneModel",["UWA/Core","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel"],(function(e,t){"use strict";let i=t.extend({_uwaClassName:"ClassificationCloneModel",set:function(){let t=arguments[1];t&&e.is(t,"object")&&(t=t.actualValue,arguments[1]=t),this._parent.apply(this,arguments),this.dispatchEvent("onChangeAttributeValue",arguments)}});return i})),define("DS/ENOProjectMgmtCommonComponents/components/PopupCommon",["UWA/Core","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/Utilities/Dom","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a){"use strict";let l=e.Class.View.extend({_uwaClassName:"PopupCommon",init:function(t){let i=e.clone(t||{},!1),n=this._getDefaultAttributes();e.extend(n,i),this.options=n,this.customHeight=i.height,this._parent.apply(this,arguments)},_getDefaultAttributes:function(){return this.immersiveFrame=new t({}),{immersiveFrame:this.immersiveFrame,minHeight:200,minWidth:500,modalFlag:!0,resizableFlag:!0,container:widget.body,height:widget.body.clientHeight,title:a.CREATE,checkboxInfos:{label:a.REPEAT,checkFlag:!1}}},handleFooterButtonEvents:function(e){let t=e.dsModel.value,i=this.getContentView();"Save"===t?(this.isSaveInvoked=!0,i&&i.save()):this.close()},close:function(t){let i=e.clone(t||{},!1),n=this.getContentView();if(this.isSaveInvoked&&this.getRepeatCheckboxValue()&&i.model){let t=i.model&&i.model.model&&i.model.model.clone(!0);i.model.model=t,t&&t.getAttributes()&&(t.unset("id"),t.unset("name"),t.unset("revision"),t.unset("tempId"),e.extend(n.options,{model:i.model,initialLoad:!1,repeat:!0})),n&&n.render(n.options)}else{n&&(n.destroy(),n.stopListening(),delete this._dialogView.contentView);let e=this.getDialogView();this.beforeCloseCallBack&&this.beforeCloseCallBack(),e&&e.realClosefunc(),this.destroy()}delete this.isSaveInvoked,!i.dontClearAlertMessages&&s.clearNotificationMessages()},getRepeatCheckboxValue:function(){let e=this.options.checkboxInfos;return Boolean(e&&e.checkFlag)},getContentView:function(){let e=this.getDialogView();return e&&e.contentView},_getDefaultFooterButtons:function(t){if(t&&t.doNotshowFooterButtons)return;let i={Save:new n({domId:"saveBtn",label:t&&t.saveButtonLabel||a.CREATE,emphasize:"primary",onClick:this.handleFooterButtonEvents.bind(this),disabled:!t.enableSaveBtn}),Cancel:new n({domId:"cancelBtn",label:a.CANCEL,emphasize:"secondary",onClick:this.handleFooterButtonEvents.bind(this)})},o=this.options.contentView;return t.additionalFooterButtons&&t.additionalFooterButtons.forEach((t=>{let s=t.type,a=t.label,l=t.onClick,r=t.disabled;e.is(l,"string")&&(l=o[l]);let c=new n({domId:s.toLowerCase()+"Btn",label:a,emphasize:"info",disabled:r,onClick:l.bind(o)}),d={};d[s]=c,e.extend(i,d)})),i},createDialog:function(){let t=this.options,n=t.contentView;this.immersiveFrame=t.immersiveFrame;let o=e.clone(t||{},!1);delete o.container;let s=new i({title:t.title,height:t.height,immersiveFrame:this.immersiveFrame,width:t.minWidth,minWidth:t.minWidth,minHeight:t.minHeight,modalFlag:t.modalFlag,onContextualEvent:Function.prototype,activateButtonsIfActionPerformed:!1,resizableFlag:t.resizableFlag,content:t.content||n.render(o),buttons:t.buttons||this._getDefaultFooterButtons(t),checkboxInfos:!t.doNotRepeat&&t.checkboxInfos});this.immersiveFrame.inject(t.container);let a=e.extendElement(window.document).getElement(".wux-windows-modalDialog");return a&&a.addClassName("eno-tabbed-dialog"),n&&(n.saveButton=s.buttons&&s.buttons.Save,n.closeDialog=this.close.bind(this)),s.contentView=n,this.setDialogView(s),this._registerEvents(),this.beforeCloseCallBack=t.beforeCloseCallBack,this},_adjustHeight:function(e){e.height=this.customHeight||widget.body.clientHeight},_registerEvents:function(){let e=this,t=this.getDialogView();t.realClosefunc=t.close,t.close=this.close.bind(this);let i=this.getContentView();i&&i.listenTo(widget,"onResize",(function(){let i=t.getAbsolutePosition();t.setAbsolutePosition({x:i.x,y:this.customHeight?i.y:1}),e._adjustHeight(t)}))},setParentView:function(e){this.parentView=e},getParentView:function(){return this.parentView},setDialogView:function(e){this._dialogView=e},getDialogView:function(){return this._dialogView},destroy:function(){this.parentView&&(this.parentView.destroy(),delete this.parentView),this._dialogView&&(this._dialogView.destroy(),delete this._dialogView),this.immersiveFrame&&(this.immersiveFrame.destroy(),delete this.immersiveFrame),this._parent()}}),r=i.prototype.handleEvents;return i.prototype.handleEvents=function(){o.addEventOnElement(this,this.elements.container,"keyup",(function(e){13===e.keyCode&&(e.actionPerformed=!0)})),r.apply(this,arguments)},l})),define("DS/ENOProjectMgmtCommonComponents/components/CustomDataGridView",["UWA/Core","UWA/Class","UWA/Drivers/Alone","DS/Utilities/Dom","DS/Windows/ImmersiveFrame","DS/DataGridView/DataGridView","DS/DataGridView/RowModelClientSide","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/config/CustomGridDefaultConfig","DS/ENOProjectMgmtCommonComponents/config/DefaultGridConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d,h){"use strict";let u=s.extend({_uwaClassName:"CustomDataGridView",options:{},init:function(t){let i=e.clone(t||{},!1);this.config=i.config,this.options=i.gridOptions,this.container=i.container,this.gridConfig=this.config.gridConfig||d,this._parent({treeDocument:i.treeDocument,columns:this.config.values,defaultColumnDef:this.gridConfig.defaultColumnDef,showRowIndexFlag:this.gridConfig.showRowIndexFlag,showAlternateBackgroundFlag:this.gridConfig.showAlternateBackgroundFlag,showSelectionCheckBoxesFlag:this.gridConfig.showSelectionCheckBoxesFlag,rowSelection:this.gridConfig.rowSelection,cellPreselectionFeedback:this.gridConfig.cellPreselectionFeedback,cellSelection:this.gridConfig.cellSelection,selectionStyle:this.gridConfig.selectionStyle,cellActivationFeedback:this.gridConfig.cellActivationFeedback,showModelChangesFlag:this.gridConfig.showModelChangesFlag,showOutlineFlag:this.gridConfig.showOutlineFlag,identifier:this.gridConfig.identifier||"ENOProjectMgmtCustomDataGridId",cellDragEnabledFlag:this.gridConfig.cellDragEnabledFlag,focusNextEditableCellOnTabFlag:this.gridConfig.focusNextEditableCellOnTabFlag,layoutOptions:this.gridConfig.layoutOptions,selectionBehavior:this.gridConfig.selectionBehavior,showBackgroundFlag:this.gridConfig.showBackgroundFlag,columnDragEnabledFlag:this.gridConfig.columnDragEnabledFlag,showRowHeaderBackgroundFlag:this.gridConfig.showRowHeaderBackgroundFlag,virtuallyLoadAllModelItems:this.gridConfig.virtuallyLoadAllModelItems,showContextualMenuColumnFlag:this.gridConfig.showContextualMenuColumnFlag}),this.handleCustomDataGridViewContent(),this.immersiveFrame=new o,this.immersiveFrame.setContentInBackgroundLayer(this.getContent()),this.immersiveFrame.reactToPointerEventsFlag=!1,this.immersiveFrame.inject(this.container)},handleCustomDataGridViewContent:function(){let t=this;if(this.config){if(this.config.getCellTooltip&&(this.getCellTooltip=this.config.getCellTooltip),this.config.registerReusableCellContent){let i=this.config.registerReusableCellContent;e.is(i,"array")||(i=[i]),i.forEach((function(e){t.registerReusableCellContent(e)}))}if(this.config.toolbarConfig){this.toolbar=i.createElement("div"),this.container.appendChild(this.toolbar),this.toolbar.className="divToolbar";let e=this.setToolbar(JSON.stringify(this.config.toolbarConfig));e.options=this.options,this.toolbar.appendChild(e.getContent())}}this.handleGridViewOptions(),this.initializeLazyLoadingEvents(),this.initializeDragAndDropEvents(),this.registerCustomViews(this.gridConfig.customViews?this.gridConfig:c)},initializeDragAndDropEvents:function(){this.onDropCell=this.handleCellDrop.bind(this),this.onDragStartCell=this.handleCellDrag.bind(this)},handleGridViewOptions:function(){let t=e.clone(this.options||{},!1);t.top&&(this.getContent().style.top=t.top),t.placeholder&&(this.placeholder=t.placeholder),t.onSortChange&&(this.onSortChange=t.onSortChange),t.lazyLoadingCallBack&&(this.lazyLoadingCallBack=t.lazyLoadingCallBack),t.onContextualEvent&&(this.onContextualEvent=t.onContextualEvent),this.gridConfig.sortModel&&(this.sortModel=this.gridConfig.sortModel),this.gridConfig.statusBarOptions&&this.buildStatusBar(this.gridConfig.statusBarOptions),t.edit&&(this.getContent().style.top="40px")},initializeLazyLoadingEvents:function(){let e=this,t=this.lazyLoadingCallBack;if(t){let i=this._getScroller(),o=function(){let i=arguments[0]&&arguments[0].parent&&arguments[0].parent.model;t(e.getLastRenderedNodeModels(),void 0,i)};this.initializeEvents(o),n.onNodeRendered(i.getContent(),o)}},initializeEvents:function(e){let t=this,i=this._getScroller(),n=function(){t.clearDropdown(),e&&e.apply(t,arguments)};i.onScrollEnd((function(){this.getPosition().y>-1&&n.apply(this,arguments)})),this.getTreeDocument().getModelEvents().subscribe({event:"PRE_EXPAND_DONE"},n),this.addEventListener("sortModelChange",n),this._onEndResize(e),widget.addEvent("onResize",this.clearDropdown)},getLastRenderedNodeModels:function(e){let t,i=[],n=this.getRowModel();if(n){let o=this.layout.getMinMaxVisibleRowIDs();for(let s=o.minRowID;s<=o.maxRowID;s++){t=n.getVisibleNodeModel(s);let o=t&&t.model;(e||o&&!o.cached)&&(t.model.cached=!0,i.push(t.model))}}return i},getViewByRowID:function(e){let t=this.layout.getDisplayedColumnsIndexes(),i=this.layout.getCellIDFromCoordinates({rowID:e,columnID:t.length&&t[0]||0}),n=this._getViewAt(i);return n&&n.elements.container.parentElement},getGridStatusBar:function(){return this.elements.statusBar},getGridStatusBarContainer:function(){let e=this.getGridStatusBar();return e&&e.elements.container},registerCustomViews:function(e){let t=this,i=e.customViews,n=widget.getValue(this.identifier)||this.getGridDefaultViews(i);this.subscribeOnceToAllCellsRendered((function(){let e=r.findObject(n,"isDefault",!0),i=t.getCustomViewsManager();i.collectionView.rowGroupingEnabledFlag=!1,i.onCustomViewsSave=t.handleCustomViewSave.bind(t),e&&i.setCustomViews(n,e.identifier,!0),widget.setValue(t.identifier,n),t._visibleColumnsNames=t.getVisibleOrderedColumnsDataIndexes()}))},getGridDefaultViews:function(t){let i={identifier:h.DEFAULT_VIEW};return t&&[i].concat(t)||[e.extend(i,{isDefault:!0})]},handleCustomViewSave:function(t,i){t.find((t=>{t.identifier===i?e.extend(t,{isDefault:!0}):delete t.isDefault})),widget.setValue(this.identifier,t);let n=this,o=this.getVisibleOrderedColumnsDataIndexes(),s=o.filter((function(e){return-1===n._visibleColumnsNames.indexOf(e)}));this._visibleColumnsNames=o;let a=s.length;a&&this.lazyLoadingCallBack&&this.lazyLoadingCallBack&&this.lazyLoadingCallBack(n.getLastRenderedNodeModels(a),s)},handleCellDrag:function(t,i){let n,o,s=i.nodeModel.options.data,a=s&&s.model;if(!a)return;let l=this.getColumnDataIndex(i);if("tree"===l)o=this.getSelectedNodesTransferObjects()||a.getTransferObject();else{let i=this.getDataIdFromEvent(t),n=a.get(l);if(n&&n instanceof e.Class.Collection){let e=i&&n.get(i);if(e){let i=this.getTarget(t),n=i.getBoundingClientRect(),s=t.clientX-n.left,a=t.clientY-n.top;t.dataTransfer.setDragImage(i,s,a),o=e.getTransferObject()}else o=a.getTransferObjectsForRelatedData(l)}}n=o&&JSON.stringify(o),n&&(t.dataTransfer.effectAllowed="copy",t.dataTransfer.setData(r.getDragDataKey(),n),t.dataTransfer.setData("text",n))},handleCellDrop:function(e,t){let i=t.nodeModel.options.data;if(!(i&&i.model))return;let n=t.nodeModel,o=this.getColumnDataIndex(t),s=this.getViewByRowID(t.rowID),a=r.getDataTransferJSON(e.dataTransfer);a&&this.dispatchEvent("onDrop:"+o,[a,o,n,s])},getSelectedNodesTransferObjects:function(){let e,t=this.getTreeDocument().getSelectedNodes();return t&&t.length&&t.forEach((t=>{e=t.options.data.model.getTransferObject(e)})),e},getColumnInfo:function(e){let t;switch(typeof e){case"string":case"number":t=this._getXSOElementFromCellID(e);break;case"object":t=(e.cellView&&e.cellView.collectionView||this).columns[e.columnID]}return t},getColumnDataIndex:function(e){let t=this.getColumnInfo(e);return t&&(t.dataIndex||t.columnDataIndex)},getSelectedColumnInfo:function(){return this._preselectedCellStableID},getTarget:function(e){return e&&e.target},getDataIdFromEvent:function(e){let t=this.getTarget(e);return t&&t.getAttribute&&t.getAttribute("data-id")},removeSelection:function(e){e&&e.isSelected()&&(this.getTreeDocument().getXSO().remove(e),e._isSelected=!1)},setPreselectedCell:function(e){return this._preselectedCellStableID=this._getXSOElementFromCellID(e),this._parent.apply(this,arguments)},cellShouldBeSelected:function(t){let i,n=event.target,o=this.getColumnInfo(t),s=o.columnDataIndex,a=o.nodeModel;switch(this.removeSelection(a),s){case"ContextualMenuColumn":return!1;case"state":if(-1!==o.rowID&&n&&!n.hasAttribute("disabled")&&n.getAttribute("has-badge"))return"contextmenu"!==event.type&&this.dispatchEvent("invokeMaturityUpdate",a),!1;break;case"assignees":i=!0;case"ownerInfo":if("contextmenu"!==event.type){let t=a&&a.model&&a.model.get(s),n=this.getDataIdFromEvent(event);if((n||!i)&&t&&t instanceof e.Class.Collection){let e=n?t.get(n):t._models&&t._models[0];e&&r.handleViewProfile(e)}}return!1}return this._parent.apply(this,arguments)},getRowModel:function(){return this._rowModel},_applySortModel:function(){let e=this._parent,t=!1;if(this.onSortChange){let i=this.getSelectedColumnInfo(),n=i&&i.columnDataIndex;if(n&&"rowHeader"!==n){let i=this.treeDocument.getNonCachedModels(n);t=i.length,t&&this.onSortChange(n,i,e.bind(this,arguments))}}!t&&e.apply(this,arguments)},getVisibleOrderedColumnsDataIndexes:function(){let e=this.layout.getVisibleOrderedLeafColumns();return e&&r.getAttributeValues(e,"dataIndex")},clearDropdown:function(){let t=e.extendElement(window.document).getElement(".wux-menu");t&&t.destroy()},destroy:function(){this.clearDropdown(),this.toolbar&&(this.toolbar.destroy(),delete this.toolbar),this.immersiveFrame&&(this.immersiveFrame.destroy(),delete this.immersiveFrame)}});return u}));let DocumentCommands="DS/DocumentCommands/ENOXDocumentCommands";define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView",["UWA/Core","DS/E6WCommonUI/Views/ObjectCardView","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/AppSettings",DocumentCommands,"i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r){"use strict";let c="links",d=["Project Management","Route","SystemModel","Workspace Vault"],h=t.extend({setup:function(){let t=this._config;if(t.addLinks){let i=t.customButtons||[];i.push({id:c,iconClass:"fonticon-link-add",toolTip:r.ADD_LINK,callback:this.handleLinksView}),e.extend(t,{customButtons:i})}("person"===t.type||i.TYPE_GROUP.includes(t.type)||"member"===t.type)&&e.extend(t,{ignoreOpenWith:!0}),this._parent.apply(this,arguments)},render:function(){let e=this._parent.apply(this,arguments);if(this._config.addLinks){let e=this.getElement("#"+c);e&&e.toggleClassName("hidden",!this.model.isNew&&!this.model.model.canModify())}return e},validateDroppedObject:function(t){let i=e.clone(t||{},!1);if(this.options&&this.options.config&&"context"===this.options.config.name&&"3dnetwork"===i.serviceId)return!1;let n=t.i3dx;return!(n&&(n.startsWith(s.MBSE_I3DX)||n.startsWith(s.MAGIC_I3DX))&&this.options&&this.options.config&&"deliverables"===this.options.config.name)&&this._parent(i)},handleLinksView:function(e){let t=this._config,i=t.name,o=this.model,s=e&&e.model;s&&s.set({modifyAccess:"TRUE"},{parse:!0}),n.loadLinksView({model:s,collection:o.get(i),callback:function(e){o.add(i,e,{config:t})}})},setDropdownMenu:function(e){e&&(e.dropdown=this.dropdownMenu)},getPropertiesButton:function(){const t=arguments[0].model,i=t.get("service"),n=t.get("type"),o=this._parent(...arguments);return["3DSpace","3DDrive"].includes(i)&&!d.includes(n)&&e.extend(o,{text:r.PREVIEW,name:"Preview",fonticon:"eye"}),o},_updateDocumentCommands:function(e){const t=e.model;var i={document:{id:t.get("physicalId"),contextId:a.get("collabspace"),serviceId:"3DSpace",envId:a.get("tenant"),index:1,data:{id:t.get("physicalId"),title:t.get("title")},type:t.get("type")||t.get("@type")},platformUrls:{"3DSpace":a.get("3DSpace"),"3DDashboard":a.get("3DDashboard")}};let n=this;i.document.filesCallback=function(t){n._actionsData=t,n.createMenuButtons(e,!0)};var o=new l;o.init(i);var s=window.enoviaServer&&window.enoviaServer.space;o.render(),(window.enoviaServer&&window.enoviaServer.space)!==s&&(window.enoviaServer.space=s)},_updateMenuForEditOperation:function(e,t){const i=this._actionsData,n=e.findIndex((e=>"documentUpdateButton"==e.id)),o=n>-1;if("Document"==t.get("type")&&o)if(i.Edit)e.splice(n,1),e.splice(1,0,i.Edit);else if(i.UndoEdit){if(i.Update){var s=e[n];!function(e){let t=e.findIndex((e=>"documentUpdateButton"===e.id));o&&e.splice(t,1)}(e),e.splice(1,0,s)}e.splice(2,0,i.UndoEdit)}},createMenuButtons:function(e,t){"Document"==e.model.type?t?(this._parent(e),this._showDropDownMenu(this.dropdownMenu)):this._updateDocumentCommands(e):this._parent(e)},getDropDownMenuItems:function(t,o){let a=e.clone(o||{},!1),l=a.model,c=l&&l.type,d=l&&l.get("i3dx");a.isUrl=i.BOOKMARK_URL===c;let h=i.TYPE_GROUP.includes(c);if(l&&!this._config.ignoreOpenWith&&!a.isUrl){let e=this.options.homeView,t=e&&e._viewConfig;this.setDropdownMenu(e),n.addOpenMenuItem(this.dropdownMenu,l,t)}let u=this._parent(t,a);const{label:m}=a.options.config;if([r.ATTACHMENTS,r.DELIVERABLES,r.AFFECTED_ITEMS].includes(m)){const e=u.findIndex((e=>"Information"===e.text));e>=0&&(u[e].className="hidden")}if(u&&u.length)if(a.isUrl){if(this.model.model&&this.model.model.canModify()){let t=e.clone(o||{},!1);e.extend(t,{handler:this.handleLinksView.bind(this,t)});const i=u.findIndex((e=>"EditURL"===e.id));i>-1&&u.splice(i,1,n.getLinkEditButton(t))}let t=l.get("linkURL");t&&(t.toLowerCase().test("^(http|https|ftp)://")||(t="http://"+t),u.splice(0,0,n.getWebAppGoToLinkMenuItem(t)))}else if(h){u=u.filter((e=>"showMembersButton"!==e.name));let e=l.get("proxyId")||l.get("groupURI");e&&u.unshift(n.getShowMembersBtn(e))}else if("3dnetwork"===l.serviceId||d&&(d.startsWith(s.MBSE_I3DX)||d.startsWith(s.MAGIC_I3DX))){for(let e=0;e<u.length;e++)if("propertiesButton"===u[e].name){u[e].className="disabled";break}}else{let e=n.getRelationsButton(o);e&&u.push(e)}return"Document"==l.type&&this._updateMenuForEditOperation(u,l),this.addHiddenClassNamesToMenuItems(u,o),u},addHiddenClassNamesToMenuItems:function(t,i){let n=this,o=e.clone(i||{},!1),s=o.model,a=o.options&&o.options.config;t.forEach((function(e){e.className=s||(n.model.isNew||n.model.modificationsPending)&&"propertiesButton"!==e.name?e.className||"":"disabled",e.className+=e.className&&e.className.contains("disabled")&&"propertiesButton"!==e.name||"remove-button"===e.name&&!a.showRemoveMenuItem&&a.singleObjectOnly?" hidden":""}))},processDropData:function(){this._options.errObjs={},this._parent.apply(this,arguments);let e=this._options.errObjs;Object.keys(e).length&&o.showSingleErrorMessageForDataObjects(e,r.OBJECT_ALREADY_ASSOCIATED,this.model.get("title")||r.NEW_OBJECT),delete this._options.errObjs}});return h})),define("DS/ENOProjectMgmtCommonComponents/config/CreateFromProfileConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o){"use strict";let s=e.extend({_uwaClassName:"CreateFromProfileConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"basic",values:[{name:"profile",readWrite:"true",attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!0,label:o.PROFILE,type:"object",required:!0,setOnSync:!0,handleOnSyncFunc:"handleOnProfileSync",sourceType:"profile",fetchSource:"riskprofiles",fields:"hasActiveTemplate",typeAheadCallback:i.typeAheadCallback,customView:n,excludeSearchTypes:{"3dspace":["Person","Security Context","Business Role"],swym:["pno:Person"]},linkCallback:t.launchProperties,placeHolder:o.SEARCH_PLACEHOLDER_TEXT,validate:!0,validateSameTenant:!0},{name:"context",readWrite:"true",attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!0,label:o.CONTEXT,type:"object",required:!0,typeAheadCallback:i.typeAheadCallback,customView:n,linkCallback:t.launchProperties,placeHolder:o.CONTEXT_SEARCH_TEXT,validate:!0,fields:"readAccess,riskCreateAccess",include:"configuration",validateSameTenant:!0,fetchSource:"RiskContextInfo",sourceType:"risk",excludeSearchTypes:{"3dspace":["Experiment","Project Baseline"],"3dplan":["dsplan:ProjectPlanningTemplate"]},additionalQuery:{"3dspace":' AND NOT [ds6w:status]:"Project Space Hold Cancel.Hold" AND NOT [ds6w:status]:"Project Space Hold Cancel.Cancel"'}}]});return s._instance=s._instance||new s,s._instance})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtGridView",["UWA/Core","UWA/Class/View","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/components/ProgressSpinner","DS/ENOProjectMgmtCommonComponents/components/CustomDataGridView","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/AppSettings","text!DS/ENOProjectMgmtCommonComponents/assets/templates/GridViewTemplate.html.handlebars","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css"],(function(e,t,i,n,o,s,a,l,r,c,d){"use strict";let h=[s.EDIT,s.DUPLICATE,s.RELATIONS,s.CREATE_TASK,s.CREATE_PHASE,s.CREATE_GATE,s.CREATE_MILESTONE,s.ADD_PASSIVE_TASK,s.ADD_SUBPROJECT,s.LINK,s.VIEW_PROFILE,s.SHOW_MEMBERS,s.REMOVE_MEMBER],u=t.extend({_uwaClassName:"ProjectMgmtGridView",init:function(t){let i=e.clone(t||{},!1);this._options=i,this._appConfig=i.appConfig,this.parentView=i.parentView,this._viewConfig=i.viewConfig,this._viewCollection=i.viewCollection,this._listConfig=i.listConfig,this._tabConfig=i.tabConfig,this._tabConfigForCreate=i.tabConfigForCreate,this._leftPanelOnly=i.leftPanelOnly,this._membersConfig=i.membersConfig,this._doNotApplyLazyLoading=i.doNotApplyLazyLoading,this._doNotShowContextualMenu=i.doNotShowContextualMenu,this._doNotSupportMassUpdate=i.doNotSupportMassUpdate,this._doNotApplyPropertyPanelInstance=i.doNotApplyPropertyPanelInstance,this._detailsView=i.detailsView||this.parentView._detailsView,this._matrixConfigCollection=i.matrixConfigCollection},reset:function(){this.dataGrid&&(this.dataGrid.destroy(),delete this.dataGrid)},render:function(){if(this.reset(),this._appContainer=e.createElement("div"),this._appContainer.setHTML(c),this._appContainer=this._appContainer.getElement(".grid-view"),this.gridViewContent=this._appContainer.getElement("#gridViewContent"),!this._doNotApplyPropertyPanelInstance){let t=e.clone(this._options||{},!1);e.extend(t,{isCreate:!1,parentView:this,handleDeletionCb:this.deleteOnCompleteCb.bind(this),context:r.get("context")}),this.detailsAndRelationships=this.parentView.getRightPanelContent()&&this.parentView.getPropertyPanelInstance(this.parentView.getRightPanelContent(),t)}return this._appContainer},loadData:function(t){let i=e.clone(t||{},!1);this.reset(),this.treeDocument&&this.treeDocument.resetTreeDocumentEvents(),this.treeDocument=this._viewCollection.getDocument(),this.treeDocument&&(i.notRisk||this.updateImpactProbabiltyConfig(i),this._ignoreCheckBoxSelection=this._listConfig.ignoreCheckBoxSelection,this.dataGrid=new o({container:this.gridViewContent,treeDocument:this.treeDocument,config:this._listConfig,gridOptions:{viewConfig:this._viewConfig,placeholder:d.NO_OBJECT_FOUND,matrixConfigCollection:this._matrixConfigCollection,onSortChange:this.fetchDataModelsForSorting.bind(this),lazyLoadingCallBack:!this._doNotApplyLazyLoading&&this.fetchLazyLoadingDataModels.bind(this),onContextualEvent:!this._doNotShowContextualMenu&&this.getGridContextualMenu.bind(this)}}),this.initializeEvents(),this.detailsAndRelationships&&this.handlePropertyPanelSelection(),this.disableMassUpdateButton())},handlePropertyPanelSelection:function(){if(this.detailsAndRelationships&&this.detailsAndRelationships.isPropertyPanelOpen()&&this._viewCollection.getDataModelsCount()){let e=this.treeDocument.getPreviousSelectedNodeModel();this.treeDocument.clearPreviousSelectedNodeInfo(),e?(this.dataGrid.removeSelection(e),e.select()):this._viewCollection.selectDataModel(0)}else this.showHideRightPanel(!1)},fetchLazyLoadingDataModels:function(e,t,i){this.fetchDataModels(e,{fetchColumnNames:t,callback:this.onCompleteLazyLoadingDataModels.bind(this),parentModel:i})},fetchDataModelsForSorting:function(e,t,i){this.fetchDataModels(t,{callback:i,fetchColumnNames:[e]})},getExcludeParams:function(){let e=this.dataGrid.layout._getColumnsVisibleFlagInPreferences(),t=[];for(let i in e)e[i]||t.push(i);return t},fetchDataModels:function(t,i){if(t.length){let n=this.dataGrid.getGridStatusBarContainer(),o=this._viewCollection.collection.clone(),s=e.clone(i||{},!1);e.extend(s,{collection:o,paramData:t,excludeParams:this.getExcludeParams(),onComplete:function(){s.callback&&(s.fetchColumnName?s.callback():s.callback.apply(this,arguments)),this.hideSpinnerView(n)}.bind(this),onFailure:this.hideSpinnerView.bind(this,n)}),o&&o.length&&(this.showSpinnerView(n,d.LOADING),this._viewCollection.fetchAdditionalDataForModels(s))}},onCompleteLazyLoadingDataModels:function(e,t){let i=new l,n=new l;e&&e.length&&e.forEach((e=>{e.fetched=!0,t&&(e.cached=!0),e.getContextModel()&&"3dnetwork"===e.getContextModel().get("serviceId")&&(i.add(e.getContextModel()),n.add(e))})),i&&i.length&&i.length>0&&this._viewCollection.getSupplierAdditionalInformation(n,i)},initializeEvents:function(){let e=this;this.treeDocument.getModelEvents().subscribe({event:"select"},(function(t){e.disableMassUpdateButton(),e.rowShouldBeSelected(t.data.virtualRowID)?a.validateModificationsPending({parentView:e.parentView,yesEventFunc:e.selectItem.bind(e),noEventFunc:e.handleRollbackSelection.bind(e)},t):e.setTaggerProxy()})),this.treeDocument.getModelEvents().subscribe({event:"unselect"},a.validateModificationsPending.bind(void 0,{parentView:this.parentView,yesEventFunc:this.unselectItem.bind(this),noEventFunc:this.handleRollbackSelection.bind(this)})),this.dataGrid.addEvent("onDrop:assignees",a.validateModificationsPending.bind(void 0,{parentView:this.parentView,yesEventFunc:this.handleDropOnColumn.bind(this)})),this.dataGrid.addEvent("invokeMaturityUpdate",a.validateModificationsPending.bind(void 0,{parentView:this.parentView,yesEventFunc:function(){e.parentView.dispatchEvent("invokeMaturityUpdate",arguments)}}))},rowShouldBeSelected:function(t){if(!e.is(t,"number")||t<0)return!1;let i=this.dataGrid.getSelectedColumnInfo();if(i&&!isNaN(i.rowID)&&this._ignoreCheckBoxSelection&&"rowHeader"===i.columnDataIndex)return void(this.getSelectedRowsLength()>1&&this._doNotSupportMassUpdate&&this.showHideRightPanel(!1));if(this.getSelectedRowsLength()>1&&!this._doNotSupportMassUpdate&&!this._ignoreCheckBoxSelection)return!0;let n=this.treeDocument.getPreviousSelectedNodeRowId(),o=this.detailsAndRelationships&&this.detailsAndRelationships._isPropertyPanelOpen;return n!==t||!o},updateImpactProbabiltyConfig:function(t){let i,n=e.clone(t||{},!1);if(n.context){let e=n.context.get("configuration");if(e&&1===e.length){let t=this._matrixConfigCollection.getMatrixConfigDefinition(e[0]);i=t&&t.get("matrix")}}this._listConfig.updateImpactProbabiltyConfig(i)},showHideRightPanel:function(e){this.detailsAndRelationships&&(this.detailsAndRelationships.reset(),this.detailsAndRelationships._isPropertyPanelOpen=e,this.parentView.showHideRightPanel(e)),this.setTaggerProxy()},setTaggerProxy:function(){let e=this.parentView.getTaggerProxy();e&&this.treeDocument&&e.handleUserTags(this.treeDocument.getSelectedNodes())},loadMassUpdate:function(){this.dataGrid.showModelMassUpdateDialog()},selectItem:function(e){if("select"===e.event){let t=e.data,i=t&&t.nodeModel;i&&(this._leftPanelOnly?this._hideLeftPanel(i):this.handleRowSelection(i))}},_hideLeftPanel:function(){this.parentView.showHideLeftPanel(!1)},deleteOnCompleteCb:function(){this._viewCollection.treeDocument.getSelectedNodes().forEach((e=>e.remove()))},handleRowSelection:function(e,t){let i=this.treeDocument.getSelectedNodes().length>1,n={selectedModels:this.treeDocument.getSelectedNodeModels()};if(!t&&i&&(n.model=e.options.data.model),this.treeDocument.previousSelectedNodeModels=this.treeDocument.getSelectedNodeModels(),this.treeDocument.previousSelectedNodeForContextMenu=e,!i||!this._doNotSupportMassUpdate){r.get("isComponent")&&this.parentView.dispatchEvent("xppClosePropertyPanel");const i=this.treeDocument.getSelectedNodeModels();if(this._detailsView){new this._detailsView({model:i[0],models:i,detailsAndRelationships:this.detailsAndRelationships,container:this.parentView.getRightPanelContent(),context:r.get("context")}).render()}else this.detailsAndRelationships&&this.detailsAndRelationships.render(n);!t&&(this.treeDocument.previousSelectedNodeInfo=e)}this.showHideRightPanel(!i||!this._doNotSupportMassUpdate)},unselectItem:function(e){this.treeDocument.getSelectedNodes().length<=0?(this.dataGrid.setActiveCell(-1),this.showHideRightPanel(!1),this.disableMassUpdateButton()):(this.handleRowSelection(e.data.nodeModel,!0),this.disableMassUpdateButton())},disableMassUpdateButton:function(e){let t=this.treeDocument.getSelectedNodes().length;this.parentView.disableMassUpdateButton(e||!t)},handleRollbackSelection:function(){this.treeDocument.previousSelectedNodeModels.length&&this.treeDocument.previousSelectedNodeModels.forEach((e=>{this.treeDocument.getTreeNodeModelById(e.id).select()}))},destroy:function(){this.reset(),this._viewCollection.destroy(),this._appContainer&&this._appContainer.destroy()},getHeight:function(){return this.height=this.height||this.parentView.getHeight(),this.height},setHeight:function(e){this.height=e,this._appContainer&&(this.gridViewContent&&this.gridViewContent.setStyle("height",this.height+"px"),this.detailsAndRelationships&&this.detailsAndRelationships.setHeight(this.parentView.height))},isHidden:function(){return this._appContainer&&this._appContainer.isHidden()},show:function(){this._appContainer&&this._appContainer.setStyle("display","block")},hide:function(){this._appContainer&&this._appContainer.hide()},handleGridViewActions:function(t,i,n){let o=e.clone(n||{},!1),a=o.rowView,l=o.treeNodeModel,r=o.isSelectedNode,c=o.cloneModelToSave,d=o.doNotCache,h=o.donotRollup;if(i===s.DELETE||i===s.REMOVE)this.detailsAndRelationships&&(this.detailsAndRelationships.currentModel||(this.detailsAndRelationships.currentModel=l.options.data),this.detailsAndRelationships.handleDeleteAction({isSelect:Boolean(r),treeNodeModel:l,operation:i,callback:this.hideSpinnerView.bind(this,a)}));else{let n={onComplete:this.hideSpinnerView.bind(this,a),onFailure:this.hideSpinnerView.bind(this,a)};c.handleAttrsUpdateForActions(i,t,n),r||c.hasEvent("submitSave")||(e.extend(n,{doNotCache:d,donotRollup:h,isSelect:Boolean(r),treeNodeModel:l}),this._viewCollection.saveDataModel(c,n))}},getPersonObjectName:function(e){let t=e.objectId;return-1===t.indexOf("iam:")?e.displayName:t.substr(t.indexOf(":")+1)},processDropData:function(t,n,o){let s,l,r=this,c=e.clone(o||{},!1),h=t.data.items,u=h.length;if(u){let e=this.hideSpinnerView.bind(this,c.rowView);if(a.validateDroppedObjects(h,this._membersConfig.columnInfo.assignees,e))return}let m=c.cloneModelToSave.validateAttrsOnDrop(n);if(m)return i.buildNotification({message:m},"error"),void this.hideSpinnerView(c.rowView);e.extend(c,{doNotCache:!0});let g={},p=[],C=[],f=c.treeNodeModel.options.data.model,E=f.get(n);for(s=0;s<u;s++){l=h[s];let e=l.objectId,t=a.alreadyHasObjectInRelatedData(E,e);if(t){let e=t.displayType||t.objectType;g[e]||(g[e]=[]),g[e].push(t.displayName);continue}let i=this.getPersonObjectName(l),n=a.getPersonObjectInfo(i,l);n.getCESStamp()?p.push(n):C.push(n)}let D=p.length,w=C.length;if(w){C[w-1].addEventOnce("onSync",(function(){r.handleGridViewActions(p.concat(C),n,c)}))}else D&&this.handleGridViewActions(p,n,c);Object.keys(g).length&&(i.showSingleErrorMessageForDataObjects(g,d.OBJECT_ALREADY_ASSOCIATED,f.get("title")),this.hideSpinnerView(c.rowView))},handleDropOnColumn:function(e,t,n,o){let s=n.options.data;if(!s.model.canModify())return void i.buildNotification({message:d.NO_MODIFY_ACCESS},"error");this.showSpinnerView(o);let a=this.detailsAndRelationships&&this.detailsAndRelationships.currentModel,l=a&&a.id===s.id?a:s;e&&this.processDropData(e,t,{rowView:o,treeNodeModel:n,cloneModelToSave:l})},getGridContextualMenu:function(e){this.treeDocument.getSelectedNodes().length>1&&this.dataGrid.unselectAll();let t=[],i=this;e&&e.collectionView&&(t=e.collectionView.buildDefaultContextualMenu(e));let n=e.cellInfos;if(n&&n.rowID>-1){let e=n.nodeModel,o=e.options.data,l=this.detailsAndRelationships&&this.detailsAndRelationships.currentModel;this.treeDocument.previousSelectedNodeForContextMenu=e;let c,d,u,m=l&&l.id===o.id,g=m?l:o;if(!o.model.fetched)return t;let p=this.dataGrid.getViewByRowID(n.rowID),C=this.dataGrid.getColumnDataIndex(n);if(C===s.ASSIGNEE_ATTR){let e=this.dataGrid.getDataIdFromEvent(event);u=o.get(C),u&&(c=u.length,d=e&&u.get(e))}let f=a.validateModificationsPending.bind(void 0,{parentView:this.parentView,yesEventFunc:function(t){g&&g.cancel();let n=t.context;!h.includes(n.name)&&i.showSpinnerView(p),i._handleGridContextMenuActions(n,{rowView:p,personModel:d,treeNodeModel:e,isSelectedNode:m,cloneModelToSave:g})}}),E=r.get("context"),D=r.getCurrentViewName();t=this._appConfig.getItems(g,{callback:f,assignModel:d,isSelectedNode:m,isAssignColumn:c,showDuplicateAndCopyLink:"scheduleView"!==D,modifyAccessOnContext:E&&"TRUE"===E.get(s.MODIFY_ACCESS),context:E,viewCollection:this._viewCollection,isContext:E&&E.id===g.model.id,dropDownItemList:this._listConfig.dropDownItemList,maturityStates:this._listConfig.columnInfo.state&&this._viewConfig.getFieldDefinitionRangeData(g.model,"state",this._listConfig.getStateHelpInfoFilter(g.model))})}return t},_handleGridContextMenuActions:function(t,n){let o=this,l=e.clone(n||{},!1),c=l.personModel,h=l.treeNodeModel,u=t.groupName||t.name;switch(u){case s.CREATE_TASK:case s.CREATE_PHASE:case s.CREATE_GATE:case s.CREATE_MILESTONE:case s.ADD_PASSIVE_TASK:case s.ADD_SUBPROJECT:o.parentView.oncreateNewDropdownSelection(u,t);break;case s.EDIT:this.dataGrid.unselectAll(),h.select();break;case s.DUPLICATE:e.extend(l,{operation:u,isSelect:Boolean(l.isSelectedNode)}),this._viewCollection.duplicateDataModels(l);break;case s.STATE_ATTR:this.handleGridViewActions(t.name,u,l);break;case s.ASSIGN_TO_SELF:this.handleAssignToSelfAction((function(e){o.handleGridViewActions(e,u,l)}));break;case s.REMOVE_ASSIGN_TO_SELF:this.handleGridViewActions(r.get("user"),u,l);break;case s.RELATIONS:a.launchApp(s.RELATIONS_WIDGET_APP_ID,h.model);break;case s.DELETE:this.handleGridViewActions("",u,l);break;case s.REMOVE_ASSIGNEE:c?this.handleGridViewActions(c,u,l):this.handleRemoveAllAssigneesAction({title:h.options.data.title,callback:this.handleGridViewActions.bind(this,"",u,l)});break;case s.REMOVE:this.handleGridViewActions("",u,l);break;case s.LINK:a.getCopyLinkURL(h.model),i.buildNotification({message:d.LINK_COPY_TO_CLIPBOARD},"success");break;case s.READER:case s.LEADER:e.extend(l,{donotRollup:!0}),this.handleGridViewActions(t.name,t.columnName,l);break;case s.REMOVE_MEMBER:this._viewCollection.handleRemoveMember({parentModel:this.parentView._currentModel,collectionAttr:this._options.COLLECTION_ATTRIBUTE,selectedNodeModels:[l.treeNodeModel],doNotShowRemoveMessage:!0,doNotShowMessageForGoverningType:!0});break;case s.SHOW_MEMBERS:a.handleGroupViewer(h.model.get("proxyId"),this.parentView.parentView.container);break;case s.VIEW_PROFILE:a.handleViewProfile(h.model)}},handleRemoveAllAssigneesAction:function(t){let n=e.clone(t||{},!1),o=n.title,s=n.callback,a={dontResetModel:!0,parentView:this.parentView,title:d.REMOVE_ALL,message:d.replace(d.DELETE_ASSIGNEE_CONFIRM_MSG,{title:o}),yesEventFunc:s,noEventFunc:this.hideSpinnerView,yesLabel:d.YES,noLabel:d.NO};i.confirmDialog(a)},handleAssignToSelfAction:function(e){let t=a.getPersonObjectInfo(r.get("user"));t.getCESStamp()?e(t):t.addEventOnce("onSync",e.bind(this,t))},showSpinnerView:function(e,t){e&&n.showRowLoadingMessage(e,t||" ")},hideSpinnerView:function(e){n.hideRowLoadingMessage(e)},getSelectedRows:function(){return this.treeDocument.getSelectedNodes()},getSelectedRowsLength:function(){return this.getSelectedRows().length}});return u})),define("DS/ENOProjectMgmtCommonComponents/components/MemberView",["DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtGridView","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Constants/Constants"],(function(e,t,i){let n=t.extend({_uwaClassName:"SpaceInfo",getUrl:function(e,t){return this.url=i.getAppUrl("modeler/pno","collabspace/"+t.space+"?select=members&select=groupmembers",!0,!0,!0),this.url}});return e.extend({_uwaClassName:"MemberView",loadDataModels:function(e){this._options=e;let t=this,i=e.onComplete;this.context=e.context,this.contextModel=new e.CloneModel(e.context),this._viewCollection.resetTreeDocument({collection:e.context.get("permissions")||new this._viewCollection.DataModels(e.context.get("permissions"))});let o={model:this.context,doNotCache:!0,collectionAttr:this._options.COLLECTION_ATTRIBUTE,useList:!0,refresh:!this._viewCollection.isDataAvailableInCollection(this.context,this._options.COLLECTION_ATTRIBUTE),onComplete:function(){t._viewCollection.collection=t.context.get(t._options.COLLECTION_ATTRIBUTE),t.onCompleteLazyLoadingDataModels(t._viewCollection.collection,!0),i&&i(e)}};this._viewCollection.getDataModelDetails(o),this.spaceInfo=new n;let s={space:t.context.get("project"),onFailure:function(e,t){}};t.spaceInfo.fetch(s)},loadData:function(e,t){let i=UWA.clone(this._options||{},!1);t&&this._viewCollection.resetTreeDocument({isNew:!0}),i.notRisk=!0,this._parent(i)},postCreateProcess:function(e){this.loadData(void 0,e)},beforeClose:function(){this.contextModel.cancel()},addMember:function(e){let t=UWA.clone(e||{},!1);t.model=this.contextModel,t.spaceInfo=this.spaceInfo,t.beforeCloseCallBack=this.beforeClose.bind(this),this.parentView.createNew(t)},disableMassUpdateButton:function(){let e,t=this.treeDocument.getSelectedNodes();for(let i of t)if("True"===i.model.get("disableMemberRow")){e=!0;break}this._parent.call(this,e)}})})),define("DS/ENOProjectMgmtCommonComponents/views/TemplatesView",["UWA/Core","DS/ENOProjectMgmtModels/Models/BaseContext","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtGridView","DS/ENOProjectMgmtCommonComponents/components/CustomAlert"],(function(e,t,i,n){"use strict";return i.extend({_uwaClassName:"TemplatesView",requiresReload:!0,init:function(t){let i=e.clone(t||{},!1);e.extend(i,{context:i.parentView._currentModel}),this.listenTo(this,"onPostContextModify",this.handleContextChangeForView),this._parent(i),this._viewCollection.matrixConfigCollection=this._matrixConfigCollection},loadDataModels:function(i){this.baseContext&&(this.baseContext.destroy(),delete this.baseContext);let n=e.clone(i||{},!1);this.actualModel=n.currentModel||this.parentView._currentModel.model,this.baseContext=new t(this.actualModel.getAttributes(),{fetchSource:n.fetchSource,sourceType:n.fieldDefinitionSource,fieldDefinitionSource:n.fieldDefinitionSource});let o=this.baseContext.get(n.templateAttribute);o&&o.length>0?this._onCompleteDataModels(n):(n.onComplete=this._onCompleteDataModels.bind(this,i),n.onFailure=this._onFailureDataModels.bind(this,i),n.initialCall=!0,this._viewCollection.getContextInfo(this.baseContext,n).then(n.onComplete,n.onFailure))},createNew:function(e){return e.context=this.baseContext,this.parentView.createNew(e)},_onCompleteDataModels:function(e){e.context=this.baseContext,this.actualModel.set(this.baseContext.getAttributes(),{parse:!0}),e.onComplete()},_onFailureDataModels:function(e,t){n.buildNotification({message:"Error Occured",title:t},"error"),e.onFailure()},setContextTitle:function(e,t){e&&e.set({title:t},{parse:!0})},handleContextChangeForView:function(){let e=this.actualModel.title,t=this._viewCollection.getDocument();if(e&&t){let i=this._viewCollection.storageDataUtil;this.setContextTitle(this.baseContext,e);let n=this.actualModel.get(this._options.templateAttribute);n&&n.length&&n.forEach((n=>{let o=n.id,s=n.get("context");this.setContextTitle(s.first(),e),this._viewCollection.updateTreeNodeModel(n,{treeNodeModel:t.getTreeNodeModelById(o)}),i.get(o)&&i.set(o,n)}))}}})})),define("DS/ENOProjectMgmtCommonComponents/views/ProfilesView",["DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtGridView"],(function(e){"use strict";return e.extend({_uwaClassName:"ProfilesView",loadDataModels:function(e){let t=this,i=e.onComplete;UWA.extend(e,{onComplete:function(){t.onCompleteLazyLoadingDataModels(t._viewCollection.collection,!0),i&&i(e)}}),this._viewCollection.getDataModels(e)},loadData:function(e){e.notRisk=!0,this.showHideRightPanel(!1),this._parent(e)},_hideLeftPanel:function(e){let t={requiresReload:!0,nlsTrend:this._nlsTrend,appConfig:this._appConfig,tabConfig:this._tabConfig,viewCollection:this._viewCollection,matrixConfigCollection:this._matrixConfigCollection,detailsAndRelationships:this._detailsAndRelationships,currentModel:e&&e.model};this.parentView.showHideLeftPanel(!1,t)}})})),define("DS/ENOProjectMgmtCommonComponents/config/AppConfig",["UWA/Core","UWA/Class","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/utils/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s){"use strict";return t.extend({_uwaClassName:"AppConfig",Highcharts:void 0,completedPreference:{values:[{label:s.NONE,value:"none",isDefault:!0},{label:s.LAST_TEN_DAYS,value:"10"},{label:s.LAST_THIRTY_DAYS,value:"30"},{label:s.LAST_SIXTY_DAYS,value:"60"},{label:s.ALL,value:"all"}],getDefault:function(){for(let e in this.values)if(this.values[e].isDefault)return this.values[e].value}},init:function(){this.setGridDropDownItems()},getUserProfileItem:function(){return i.get("3DSwym")?{name:o.VIEW_PROFILE,type:"PushItem",title:s.VIEW_PROFILE,group:o.INFORMATION,icon:"eye",value:"viewProfile",text:s.VIEW_PROFILE,label:s.VIEW_PROFILE}:{name:o.VIEW_PROFILE,type:"PushItem",title:s.PROPERTIES,group:o.INFORMATION,icon:"attributes",value:"viewProfile",text:s.PROPERTIES,label:s.PROPERTIES}},setGridDropDownItems:function(){this.gridDropDownItems={items:[{type:"PushItem",title:s.EDIT,icon:"info",group:o.EDIT,name:"edit"},{type:"PushItem",title:s.DUPLICATE,icon:"duplicate",group:o.LIFECYCLE,name:"duplicate"},{type:"SeparatorItem"},{type:"PushItem",title:s.ASSIGN_TO_SELF,icon:"user-ok",group:o.COLLABORATION,name:"assignToSelf"},{type:"PushItem",title:s.REMOVE_ASSIGN_TO_SELF,icon:"user-delete",group:o.COLLABORATION,name:"removeSelfassign"},{type:"SeparatorItem"},{type:"PushItem",title:s.RELATIONS_LABEL,icon:"object-related",group:o.INFORMATION,name:"relations"},{type:"SeparatorItem"},{type:"PushItem",title:s.DELETE,icon:"trash",group:o.DESTRUCTIVE,name:"delete"},{type:"PushItem",title:s.REMOVE,icon:"user-delete",group:o.DESTRUCTIVE,name:"removeAssignee"},{type:"PushItem",title:s.COPY_LINK,icon:"link",group:o.COLLABORATION,name:"link"}],dividerItem:{type:"SeparatorItem"},maturityStateMap:{Create:s.SAVE_AS_DRAFT,Assign:s.START,Active:s.BEGIN_WORK,Review:s.APPROVE,Complete:s.MARK_AS_COMPLETED,HelpInfo:{"Profile Risk":{Active:s.ACTIVE,Inactive:s.INACTIVE}}}}},getMaturityStateConfig:function(e,t){let i=e.value,n=i.toLowerCase()+" "+(t?"promote":"demote");return{type:"PushItem",title:e.helpinfo&&this.gridDropDownItems.maturityStateMap.HelpInfo[e.helpinfo]?this.gridDropDownItems.maturityStateMap.HelpInfo[e.helpinfo][i]:this.gridDropDownItems.maturityStateMap[i],icon:"status-change object-maturity "+n,name:i,groupName:o.STATE_ATTR,group:o.LIFECYCLE}},getMenuItemsConfigForModel:function(t,i,o){let s=e.clone(this.gridDropDownItems.items,!1);if(i&&(s=s.filter((e=>i.find((t=>t===e.name))))),t.canPromoteDemote()){let e,i=[];if(o&&o.length){let s=t.state,a=n.findIndex(o,"value",s);o.forEach(((n,o)=>{(a===o-1&&t.canPromote()||a===o+1&&t.canDemote())&&(e=this.getMaturityStateConfig(n,o>a),e&&i.push(e))}))}i.length&&s.splice(3,0,...i)}return s},getItems:function(t,i){let a=e.clone(i||{},!1),l=a.menuItems||[],r=a.callback,c=a.assignModel,d=a.isSelectedNode,h=a.isAssignColumn,u=a.doNotModifyTask,m=t.model,g=m.getActionsAttrsAccessMap(),p=!u&&g.canModify,C=g.canDelete,f=!u&&g.canToConnect,E=g.isComplete,D=n.isSelfAssigned(m),w=a.dropDownItemList,M=a.maturityStates,_=a.showDuplicateAndCopyLink,S=m.canAssign(),b=n.isLoggedInUserSelected(c);return this.getMenuItemsConfigForModel(m,w,M).forEach((t=>{let i,n;switch(delete t.className,t.groupName||t.name){case o.EDIT:n=p&&!d&&!E,i=!n;break;case o.DUPLICATE:n=_;break;case o.ASSIGN_TO_SELF:n=S&&p&&f&&!D;break;case o.REMOVE_ASSIGN_TO_SELF:n=S&&p&&(h?D&&b:D);break;case o.DELETE:n=_&&C;break;case o.REMOVE_ASSIGNEE:n=h&&p&&!b,n&&(t.title=c?s.REMOVE+' "'+c.getFullName()+'"':s.REMOVE_ALL);break;case o.RELATIONS:n=!0;break;case o.COPY_LINK:n=_;break;case o.STATE_ATTR:n=!0;break;default:n=!1}if(n){t.state=i?"disabled":"";let n=e.clone(t,!1);n.action={callback:r,context:t},l.push(n)}})),this.organizeMenuItems(l)},organizeMenuItems:function(e){let t=[],i=[],n=[],s=[],a=[],l=[],r=[],c=[],d=[];for(let h of e)switch(h.group){case o.NEW:t.push(h);break;case o.OPEN:i.push(h);break;case o.VIEW:n.push(h);break;case o.EDIT:s.push(h);break;case o.LIFECYCLE:a.push(h);break;case o.COLLABORATION:l.push(h);break;case o.INFORMATION:r.push(h);break;case o.DESTRUCTIVE:c.push(h);break;default:d.push(h)}let h={type:"SeparatorItem"};t.length&&t.push(h)&&t.push(h),i.length&&i.push(h)&&i.push(h),n.length&&n.push(h)&&n.push(h),s.length&&s.push(h)&&s.push(h),a.length&&a.push(h)&&a.push(h),l.length&&l.push(h)&&l.push(h),r.length&&r.push(h)&&r.push(h);let u=[...t,...i,...n,...s,...a,...l,...r,...c];return"SeparatorItem"===u[u.length-1].type&&u.pop(),"SeparatorItem"===u[u.length-1].type&&u.pop(),u},defaultSkeletonOptions:{rightContainerContent:void 0,centerContainerContent:void 0,leftContainerCollapsedFlag:!0,rightContainerCollapsedFlag:!0,leftContainerWidth:0,leftContainerMinWidth:0,leftContainerMaxWidth:0,rightContainerWidth:400,rightContainerMinWidth:200,rightContainerMaxWidth:500,navigationContainerVisibleFlag:!1,idCardContainerVisibleFlag:!1,statusContainerVisibleFlag:!1,identifier:"SkeletonLayout_projectMgmentHomeView"},ChartsColor:{WHITE_COLOR:"#FFFFFF",BLUE4_COLOR:"#005686",BLACK_COLOR:"#000000",GREY0_COLOR:"#F1F1F1",GREEN0_COLOR:"#6FBC4B",YELLOW0_COLOR:"#FEE000",RED1_COLOR:"#CC092F",BLUE2_COLOR:"#002596",BLUE3_COLOR:"#4EA8B7",ORANGE0_COLOR:"#FF8A2E"},ColorPalette:[{color:"#E2D5CC",UsedFlag:!1},{color:"#45299E",UsedFlag:!1},{color:"#0067D7",UsedFlag:!1},{color:"#D71F66",UsedFlag:!1},{color:"#C25400",UsedFlag:!1},{color:"#7F7F7F",UsedFlag:!1},{color:"#8DDEE4",UsedFlag:!1},{color:"#4EA8B7",UsedFlag:!1},{color:"#127277",UsedFlag:!1},{color:"#009DDB",UsedFlag:!1},{color:"#ADADAD",UsedFlag:!1},{color:"#9B2C98",UsedFlag:!1},{color:"#00AA86",UsedFlag:!1},{color:"#6D2815",UsedFlag:!1},{color:"#F564A3",UsedFlag:!1},{color:"#000000",UsedFlag:!1},{color:"#4D62BA",UsedFlag:!1},{color:"#007A4C",UsedFlag:!1},{color:"#70036b",UsedFlag:!1},{color:"#C6C68B",UsedFlag:!1},{color:"#6FBC4B",UsedFlag:!1},{color:"#FEE000",UsedFlag:!1},{color:"#CC092F",UsedFlag:!1},{color:"#002596",UsedFlag:!1},{color:"#FF8A2E",UsedFlag:!1}]})})),define("DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtHeatMapChartUtil",["UWA/Core","UWA/Class","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],(function(e,t,i){"use strict";return t.extend({_uwaClassName:"ProjectMgmtHeatMapChartUtil",emptyHeatMapInfo:void 0,heatMapChartArray:void 0,resetChartData:function(){this.heatMapChartArray=e.clone(this.heatMapChartArray||{}),this.severity=e.clone(this.severity||{})},init:function(e){this.options=e||{},this.chartConfig=this.options.chartConfig||{},this.matrixConfig=this.options.matrixConfiguration,this.isMatrixSettingVeiw=this.options.matrixSettingVeiw,this.heatMapChartArray=this.getHeatmapInfo(this.matrixConfig),this.heatMapChartArray&&this.resetChartData(),this.heatMapChartArray&&this.processHeatmapChart()},getHeatmapInfo:function(t){let n=this,o=t instanceof e.Class.Model?t.get("matrix"):t.matrix||t,s=this.parseMatrixData(o);this.severity=s.severity;let a=s.cells,l=this.getHeatMapAxisValues(s.Xaxis),r=this.getHeatMapAxisValues(s.Yaxis);l=[""].concat(l),r=r.concat(""),this.chartConfig.xAxis.title.text=s.Xaxis.displayValue,this.chartConfig.xAxis.categories=l,this.chartConfig.yAxis.title.text=s.Yaxis.displayValue,this.chartConfig.yAxis.categories=r;let c=[];a&&a.forEach((function(e){let t=e.cellId||"",o=e.Xvalue,s=e.Yvalue,a=e.riskLevel,l=e.rpn,r=o+s,d=n.isMatrixSettingVeiw?l:" ",h=i.findObject(n.severity,"actualValue",a),u=h&&h.actualValue,m=h&&h.backgroundColor,g=h&&h.textColor;c.push({cellId:t,riskLevel:u,Xvalue:o,Yvalue:s,y:1,x:Number(o),color:m,cellCount:0,matrixXY:r,dataLabels:{color:g,format:d,useHTML:!1}})})),c.sort((function(e,t){return e.matrixXY-t.matrixXY}));let d=[];return d.push({data:c}),d},getHeatMapAxisValues:function(e){let t=[],i=e.nodes;return i&&i.forEach((function(e){t.push(e.displayValue)})),t},processHeatmapChart:function(){this.chartConfig.series=this.heatMapChartArray},parseMatrixData:function(e){if(e&&!e.parsed){let t=e.Xaxis,i=e.Yaxis,n=e.severity,o=e.cells,s=this.getMatrixSeverityValues(n);return{cells:o,Xaxis:this.getMatrixAxisValues(t),Yaxis:this.getMatrixAxisValues(i),severity:s,parsed:!0}}return e},getMatrixSeverityValues:function(e){let t=[];return e&&e.length&&e.forEach(((e,n)=>{e.severityIndex=n;let o=i.getSeverityItem(e);t.push(o)})),t},getMatrixAxisValues:function(e){return{actualValue:e.name,displayValue:e.nls[widget.lang]||e.name,nodes:i.formatRangeValuesForSelectView(e.nodes,"value",i.getconcatenatedActualDisplayValue)}}})})),define("DS/ENOProjectMgmtCommonComponents/utils/PlatformManager",["UWA/Class/Events","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/constants/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l){"use strict";return e.singleton({_serviceData:[],_options:void 0,initializeServiceData:function(){let e=this;return new Promise((function(t,n){e._serviceData.length?t():i.getPlatformServices({onComplete:function(i){e.storePlatformServiceData(i),t()},onFailure:function(e){n(e)}})}))},configure:function(e){let i=this;return this._options=e,new Promise((function(e,s){i.initializeServiceData().then((function(){let s,a,l,r,c,d;window.widget?(s=window.widget.getUrl(),a=window.widget.getUrl().match(/[?&]runYourApp=([^&]*)?/),l=t.getApplicationConfiguration("app.urls.myapps"),s=s.substring(0,s.indexOf("/webapps")),r=window.widget.lang,c=widget.id,d=widget.data.appId):(s=window.enoviaServer.storageUrl,c=window.enoviaServer.widgetId,d=window.enoviaServer.viewId),l&&!a||(l=s);let h,u,m=(new Date).getTimezoneOffset(),g=t.getUser();g&&g.login&&(h=g.firstName,u=g.lastName,g=g.login);let p={url:s,language:r,timezone:m,myAppsUrl:l,user:g,firstName:h,lastName:u,isStandaloneWidget:i.isStandaloneWidget(),widgetId:c,appId:d};n.set(p),i.processStorages(i._serviceData),n.set({loggedInUser:o.getPersonObjectInfo(g)}),e()}),(function(e){s(e)}))}))},processStorages:function(){let e,t=[];if(s.sort(this._serviceData,"displayName"),this._serviceData.forEach((function(i){i[a.SPACE_SOURCE]&&(e||(e=i),t.push({label:i.displayName||i.platformId,value:i.platformId}))})),!this._options.doNotInitializePreference&&window.widget){let e,i=widget.getValue(a.COLLABSTORAGE);if(i)for(let t of this._serviceData)if(t.platformId===i||t[a.SPACE_SOURCE]===i){e=t.platformId;break}e||(e=widget.data.x3dPlatformId||t[0].value),widget.addPreference({name:a.COLLABSTORAGE,type:"list",disabled:!(t.length>1),defaultValue:e,options:t,label:l["3DEXPERIENCE_PLATFORM"]}),i!==e&&widget.setValue(a.COLLABSTORAGE,e)}this.processStorage(),n.get("3DSpace")||this.processStorageForUndefinedPlatform()},processStorageForUndefinedPlatform:function(){for(let e of this._serviceData)if(e["3DSpace"]){let t=e;n.set(a.TENANT,t.platformId),n.set(t),!this._options.doNotInitializeCollabStorage&&window.widget&&(widget.setValue(a.TENANT,t.platformId),widget.setValue(a.X3D_PLATFORMID,t.platformId));break}},processStorage:function(){let e,t;t=window.widget?this._options.doNotInitializeCollabStorage?widget.getValue("x3dPlatformId"):widget.getValue(a.COLLABSTORAGE)||widget.getValue(a.TENANT):location.href?o.getURLParameter(location.href,"tenant"):"OnPremise";for(let i of this._serviceData)if(i.platformId===t||i[a.SPACE_SOURCE]===t){e=i;break}if(!e&&!widget.getValue(a.COLLABSTORAGE)&&this._serviceData.length>0&&(e=this._serviceData[0]),!e)return this._options.doNotInitializeCollabStorage||widget.deleteValue(a.TENANT),n.unset(a.TENANT),void n.unset("platformId");!this._options.doNotInitializeCollabStorage&&window.widget&&(widget.setValue(a.TENANT,e.platformId),widget.setValue(a.X3D_PLATFORMID,e.platformId)),n.set(a.TENANT,e.platformId),n.set(e)},isStandaloneWidget:function(){return void 0!==window.widget},storePlatformServiceData:function(e){this._serviceData=e},getTenant:function(){if(this.isStandaloneWidget()){return widget.getValue(a.TENANT)}},isOnPremise:function(){return"OnPremise"===this.getTenant()}})})),define("DS/ENOProjectMgmtCommonComponents/config/ProfilesPropertiesConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t){"use strict";let i=e.extend({_uwaClassName:"ProfilesPropertiesConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"basic",values:[{label:t.TITLE,name:"title",type:"text",readWrite:"true",required:!0,fields:"title,name,description,image,typeicon,modifyAccess,deleteAccess",numberOfDisplayLines:1,numberOfEditableLines:1,removeCarriageReturns:!0,maxLength:128,validate:!0},{label:t.DESCRIPTION,name:"description",type:"text",readWrite:"true",numberOfDisplayLines:1,numberOfEditableLines:1,removeCarriageReturns:!0,maxLength:128}]});return i._instance=i._instance||new i,i._instance})),define("DS/ENOProjectMgmtCommonComponents/views/ToggleView",["UWA/Core","DS/Controls/Toggle","DS/Controls/ButtonGroup","DS/Controls/ComboBox","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","text!DS/ENOProjectMgmtCommonComponents/assets/templates/InputGroupDivTemplate.html.handlebars"],(function(e,t,i,n,o,s,a,l,r){"use strict";let c=o.compile(r);return s.extend({_uwaClassName:"ToggleView",render:function(o){this.container.empty(!0);let s=this._getData(),a=this._config,r=a.buttonType||"checkbox";this.isRadioButtonType="radio"===r,this.isSwitchButtonType="switch"===r,this.container.toggleClassName("editable",Boolean(a.readWrite&&s.canEdit));let d=e.clone(o||{},!1);if(this.inputGroupDiv=d.container,!this.inputGroupDiv){e.extend(a,{isToggleView:Boolean(r)});let t=c(a);this.container.setHTML(t),this.inputGroupDiv=this.container.getElement(".input-element")}if(this.modelValue=this.getValue(),e.is(this.modelValue,"array")&&this.model.isBulkCloneModel){let e=this._config.values.map((e=>({value:e.actualValue,label:e.displayValue})));e.length>1&&e.unshift({label:l.MULTIPLE_VALUES,value:"default"}),this.toggleButtonGroup=new n({enableSearchFlag:!1,actionOnClickFlag:!1,elementsList:e,disabled:!a.readWrite||this.isDisabled()}),this.isComboBoxType=!0}else this.isSwitchButtonType?this.toggleButtonGroup=new t({type:r,checkFlag:this.getSwitchValue(),disabled:!a.readWrite||this.isDisabled()}):(this.toggleButtonGroup=new i({type:r,disabled:!a.readWrite||this.isDisabled()}),this._createToggleBoxView());return this.toggleButtonGroup.inject(this.inputGroupDiv),this.toggleButtonGroup.addEventListener("change",this._toggleDataEntry.bind(this)),this},_toggleDataEntry:function(e){let t=[],i=e.value||e.dsModel.value;if(this.isComboBoxType)if("default"===i){let e=this;this.model.models.forEach((t=>e.normalizedSet(t,e._config,t.model.get(e._config.name))))}else this.normalizedSet(this.model,this._config,i);else if(this.isSwitchButtonType){let t=e.dsModel.checkFlag.toString().toUpperCase();this.normalizedSet(this.model,this._config,t)}else i.forEach((e=>{e=this._config.values[e],this.isRadioButtonType?t=e:t.push(e)})),this.normalizedSet(this.model,this._config,t)},getCheckedValue:function(e){return(!this.isRadioButtonType||!this.toggleButtonGroup.value.length)&&e.checked},getValue:function(){let t=this.model.get(this._config.name),i=this._config.buttonType||"checkbox";if(t||"checkbox"!=i||(t=this._config.defaultValue),t=e.is(t,"array")&&1===t.length?t[0]:t,this.isRadioButtonType)return t&&t.hasOwnProperty("actualValue")?t.actualValue:t;return e.is(t,"array")&&t.some((e=>e.hasOwnProperty("actualValue")))?a.getAttributeValues(t,"actualValue"):t},isDisabled:function(){if(this._config.doNotDisable)return!1;let t=this.model.get("modifyAccess");return t=void 0===t?"TRUE":t,e.is(t,"array")&&(t=1===t.length?t[0]:"FALSE"),!("TRUE"===t.toUpperCase())},getSwitchValue:function(){if(this.modelValue)switch(this.modelValue.toUpperCase()){case"YES":case"TRUE":return!0;default:return!1}},_createToggleBoxView:function(){let e,i=[],n=this._config.values;n&&n.length&&n.forEach(((n,o)=>{if(this.modelValue){let t=n.actualValue;e=this.isRadioButtonType?t===this.modelValue:this.modelValue.includes(t)}else e=this.getCheckedValue(n),e&&i.push(o);let s=new t({type:this.toggleButtonGroup.type,label:n.displayValue,value:o,checkFlag:Boolean(e),disabled:n.isDisabled});this.toggleButtonGroup.addChild(s)})),i.length&&this._toggleDataEntry({value:i})},destroy:function(){this.toggleButtonGroup&&(this.toggleButtonGroup.destroy(),delete this.toggleButtonGroup,delete this.isRadioButtonType)}})})),define("DS/ENOProjectMgmtCommonComponents/views/QuestionComponent",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/ENOProjectMgmtCommonComponents/views/ToggleView","text!DS/ENOProjectMgmtCommonComponents/assets/templates/QuestionComponentTemplate.html.handlebars","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s){"use strict";let a=t.compile(o);return i.extend({_uwaClassName:"QuestionComponent",tagName:"div",className:"form-group editable layout-vertical",render:function(){this.container.empty(!0),this.destroy({destroyChildrenViews:!0});let e=this._config,t=this._getData(),i=Boolean(e.readWrite&&t.canEdit);this.container.toggleClassName("editable",i);let n=this._config.dependsOn&&this.model.get(this._config.dependsOn),o=n&&n.first()&&n.first().get(this._config.name);return this._getLabel(s.TEMPLATE_QUESTIONS).inject(this.container),o&&o.length?o.forEach((e=>this._appendQuestionInView({question:e}))):this._addNoQuestionsDisplay(),this.initializeEvents(),this},initializeEvents:function(){this.listenTo(this.model,"onChange:"+this._config.dependsOn,this.render)},getToggleView:function(e){return new n(e)},_getLabel:function(t){return e.createElement("label",{text:t})},_addNoQuestionsDisplay:function(){e.createElement("span",{text:"--"}).inject(this.container)},getQuestionId:function(e){return"id_"+e.id},getQuestionCommentId:function(e){return this.getQuestionId(e)+"_comments"},getQuestionContent:function(t){let i=e.clone(t||{},!1).question,n=i.get("description");return a({questionLabel:n,commentsNLS:s.COMMENT,questionId:this.getQuestionId(i),commentId:this.getQuestionCommentId(i)})},getQuestionView:function(t,i){let n=new e.Class.View;return n.name=t,n.setContainer({tag:"div",class:"field-group",html:i}),n},getToggleViewForQuestionValues:function(t,i){let n=e.clone(i||{},!1).question,o=n.get("questions"),s=this._getToggleViewDefaultConfig();e.extend(s,{id:n.id,title:n.title,name:"questionResponse",subQuestions:o,text:n.get("description"),readWrite:!0});let a=this.getToggleView({config:s,model:n});return a.render({container:t}),a},_appendQuestionInView:function(t){let i=e.clone(t||{},!1),n=i.question,o=i.parentQuestionName,s=this.getQuestionContent(t),a=this.getQuestionView(n.title,s),l=a.getElement("#"+this.getQuestionId(n));a.valuesBtnGrp=this.getToggleViewForQuestionValues(l,t).toggleButtonGroup;let r=this.container,c="bottom";o&&(r=this.getFieldViewByName(o).getContent(),c="after"),a.render().inject(r,c),this.addChildView(a),this.listenTo(n,"onChange",this._handleQuestionResponse);let d=this;a.getElement("#"+this.getQuestionCommentId(n)).addEventListener("change",(function(e){d.normalizedSet(n,{name:"comment"},e.target.value)}))},_getDefaultValue:function(){return{displayValue:s.NO_ANSWER,actualValue:"",checked:!0}},_getToggleViewDefaultConfig:function(){return{type:"checkboxList",buttonType:"radio",values:[{displayValue:s.YES,actualValue:"TRUE"},{displayValue:s.NO,actualValue:"FALSE"},this._getDefaultValue()],toggleButtonsInGridDisplay:!0}},_handleQuestionResponse:function(e,t,i){let n=e.get("questionResponse"),o=t&&t.subQuestions,s=t&&t.title;o&&o.forEach((e=>{this._handleSubQuestionDisplay({subQuestion:e,selectedResponse:n,parentQuestionName:s})}))},_handleSubQuestionDisplay:function(t){let i=e.clone(t||{},!1),n=i.subQuestion,o=i.selectedResponse,s=i.parentQuestionName,a=n.title,l=this.getFieldViewByName(a),r=l&&l.getContent(),c=n.get("expectedResponse")===o.actualValue;if(r&&r.toggleClassName("hide",!c),c)l||this._appendQuestionInView({question:n,parentQuestionName:s});else if(n.set("comment",""),l){l.valuesBtnGrp.getButton(2).fire("click"),l.getElement("textarea").value=""}},getFieldViewByName:function(e){let t;return this._childrenViews&&this._childrenViews.length&&this._childrenViews.some((i=>i.name===e&&(t=i,!0))),t},destroy:function(t){e.clone(t||{},!1).destroyChildrenViews&&this._childrenViews&&(this._childrenViews.forEach((e=>{e.destroy()})),delete this._childrenViews),this.questionComponentDiv&&(this.questionComponentDiv.destroy(),delete this.questionComponentDiv,delete this.isRadioButtonType)}})})),define("DS/ENOProjectMgmtCommonComponents/config/LinkViewConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t){"use strict";let i=e.extend({_uwaClassName:"LinkViewConfig",columnInfo:{},hide:!0,setup:function(){this.setColumnInfo()},type:"basic",values:[{label:t.TITLE,name:"title",type:"text",readWrite:!0,required:!0,isTitleField:!0,removeCarriageReturns:!0,maxLength:128,validate:!0},{label:"URL",name:"linkURL",type:"textarea",readWrite:!0,required:!0,numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:2048,validate:!0,removeCarriageReturns:!0,customValidate:"isvalidURL"},{name:"description"}]});return i._instance=i._instance||new i,i._instance})),define("DS/ENOProjectMgmtCommonComponents/utils/PreferenceManager",["UWA/Core","UWA/Class/Events","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Collections/SecurityContexts","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/utils/PlatformManager","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/constants/Constants","DS/ENOProjectMgmtModels/Constants/Constants","DS/MePreferencesClientAPI/MePreferencesClientAPI","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d,h,u){"use strict";window.dataVersion=.3;let m={name:c.COLLABSPACE,type:"list",defaultValue:"",options:[{label:"None",value:"None"}],label:u.CREDENTIALS};return t.extend({defaultWindowedHeight:505,homeModule:void 0,homeView:void 0,parentContainer:void 0,init:function(t,i){let o=this,s=e.clone(t||{},!1);if(this.homeModule=i,this.initUtils(),!s.doNotInitializePreference&&window.widget){widget.useUIKitSelect=!0,widget.addEvents({onEdit:this.onPreferencesOpened.bind(this),endEdit:this.onPreferencesClosed.bind(this,s),onViewChange:function(){o.onViewChange()},onRefresh:this.refreshWidget.bind(this,s)});let e=top.document.getElementsByName("viewport");e&&e.length&&e[0].setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),o._initializePreference(s)}l.configure(s).then((function(){o.homeModule&&o._initializeHomeView(s);const e=[];e.push(o.getConfigurationCenterSettings(s)),e.push(o.setSpace(s)),Promise.all(e).then((function(){s.onComplete&&s.onComplete()}),(function(){r.buildNotification({message:u["3DEXPERIENCE_PLATFORM_CONFIGURATION_FAILURE"],title:u.ERROR},"error"),s.onFailure&&s.onFailure()}))}),(function(){r.buildNotification({message:u["3DEXPERIENCE_PLATFORM_CONFIGURATION_FAILURE"],title:u.ERROR},"error"),s.onFailure&&s.onFailure()})),h.readPreferences([{Repository:"Languages",PreferenceNames:["RegionalFormatLanguage","UseISO8601ForDateAndTime"]}]).then((e=>{e.repositories[0].preferences.forEach((e=>n.set(e.name,e.value)))})).catch((e=>console.log("MePreferencesClientApi Failed to load")))},initUtils:function(){i.properties.forEach((e=>!a[e]&&(a[e]=i[e])))},refreshWidget:function(){var e=window.parent.document.getElementById("frame-"+widget.id);e&&(e.src=e.src)},_initializeHomeView:function(t){let i=this,n=e.clone(t||{},!1);if(widget.data.X3DContentId){let e=JSON.parse(widget.data.X3DContentId);n.paramData=e.data.items}else widget.data.ids&&(n.paramData=[{objectId:widget.data.ids,serviceId:"3DSpace"}]);this.homeView=new i.homeModule(n),this.homeView.listenTo(widget,"onResize",(function(){i.setDimensions()})),i._initPreferencesWithConstants()},getHomeView:function(){return this.homeView},_initializePreference:function(e){e.doNotInitializePreference||(widget.addPreference({name:c.COLLABSTORAGE,type:"list",disabled:!0,options:[{label:"None",value:"None"}],label:u["3DEXPERIENCE_PLATFORM"]}),widget.addPreference(m))},_initPreferencesWithConstants:function(){let e="REFRESH_TIMEOUT";e&&(this.REFRESHTIMEOUT=1e3*parseInt(e,10)),widget.dispatchEvent("onResize")},onPreferencesOpened:function(){this._prefsWhenOpened=widget.getPreferences().reduce((function(e,t){return e[t.name]=t.value,e}),{})},onPreferencesClosed:function(e,t){t&&t.submitted&&(this.handleModicationPending(e),this._prefOpenedAndClosed=!0)},onViewChange:function(){let e=widget.getView();e.previous&&e.previous.type!==e.type&&this.setDimensions()},setDimensions:function(){let e=widget.getViewportDimensions();n.set(e),n.dispatchEvent("onChange:dimensions")},setSpace:function(t){let i=this,o=e.clone(t||{},!1);return new Promise((function(e){if(o.callback=i.setSpace.bind(i,o),!i.homeView||i.homeView.handleUnsaveForSearchAndPreferences(o))return e();{let t=!1,s=!1;if(i._prefsWhenOpened||o.refresh){for(let e in i._prefsWhenOpened)i._prefsWhenOpened[e]!==widget.getValue(e)&&(e===c.COLLABSTORAGE?(l.processStorage(),t=!0,o.doNotInitializeCollabStorage||(widget.addPreference(m),widget.setValue(c.COLLABSPACE,""),widget.setValue(c.X_PREF_CREDENTIAL,"")),n.unset(c.COLLABSPACE)):(e===c.COLLABSPACE&!o.doNotInitializeCollabStorage&&widget.setValue(c.X_PREF_CREDENTIAL,widget.getValue(e).replace(c.CTX_PREFIX,"")),n.set(e,widget.getValue(e)),s=!0),i.homeView.clearParamData());if(o.refresh&&!s)return o.showRefreshMessage=!0,i.homeView.reload(o),e()}else l.processStorage(),t=!0;if(t)i.getSecurityContexts(o).then((function(t){o.securityContextList=t;let n=i._getDefaultSecurityContext(o);return o.doNotInitializeCollabStorage||(widget.setValue(c.COLLABSPACE,n),widget.setValue(c.X_PREF_CREDENTIAL,n.replace(c.CTX_PREFIX,""))),i.setSecurityContext(n),e()}));else if(s)return i.homeView.reload(o),e()}}))},setSecurityContext:function(e,t){t&&l.processStorage(),n.set(c.COLLABSPACE,e)},_getDefaultSecurityContext:function(t){let i,o,s=e.clone(t||{},!1),l=s.securityContextList,r=!1;return s.doNotInitializeCollabStorage?n.get(c.COLLABSPACE):(o=widget.getPreference(c.COLLABSPACE),i=o.value,l=l&&l.list,i&&l&&(r=a.findObject(l,"value",i),r)?i:o.defaultValue)},getSecurityContexts:function(t){let i=this,s=e.clone(t||{},!1),a=new o;return new Promise((function(e,t){a.fetch({onComplete:function(t){let o=t.getSortedPreferences();if(o&&o.list.length){let e=o.defaultValue,t=e.replace(c.CTX_PREFIX,"");s.doNotInitializeCollabStorage?(n.set(c.X_PREF_CREDENTIAL,t),i.setSecurityContext(e)):(widget.setValue(c.X_PREF_CREDENTIAL,t),widget.addPreference({name:c.COLLABSPACE,type:"list",disabled:!1,defaultValue:e,options:o.list,label:u.CREDENTIALS}))}e(o)},onFailure:function(e,i){t(i)}})}))},getConfigurationCenterSettings:function(e){let t=this;return new Promise((function(i,o){if(!t.homeView&&!e.fetchConfigCenterSettings)return i();let a=t.homeView?._appConfig?.expresssionsSearch;if(a=e.fetchConfigCenterSettings?e.expressions:a,!a)return i();{let e=a.join(","),t=new s;t.convertToRequestData=function(e,t,i){return"$ids="+i.idList},t.url=d.getExpresssionSearchUrl(),t.fetch({idList:e,headers:{"Content-Type":d.COMTENT_TYPE_FORM_URL_ENCODED},onComplete:function(e){return a.forEach((t=>{n.set(t,e.get(t))})),i()},onFailure:function(e,t){o(t)}})}}))},handleModicationPending:function(t){r.clearNotificationMessages();let i=e.clone(t||{},!1);e.extend(i,{refresh:!0,valiateInvalidRisksContext:!0}),a.validateModificationsPending({parentView:this.homeView,isReload:!0,dontResetModel:!0,yesEventFunc:this.setSpace.bind(this,e.extend({yesEvent:!0},i)),noEventFunc:this.setSpace.bind(this,i)})},destroy:function(){n.clear(),this.homeView&&this.homeView.destroy(),this._parent()}})})),define("DS/ENOProjectMgmtCommonComponents/views/MassUpdateView",["UWA/Core","UWA/Class/View","DS/PlatformAPI/PlatformAPI","DS/LifecycleCmd/MaturityCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_TransferOwnershipCmd","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/config/MassUpdateToolbarConfig"],(function(e,t,i,n,o,s,a,l){"use strict";let r=function(){let e=this,t=n.prototype.executeCmd;n.prototype.executeCmd=function(i){let n=i&&i.controller;e.listenTo(n,"onStateChanged",e.updateTreeDocument.bind(e)),e.listenTo(n,"onError",(function(t){e.isOnErrorEventInvoked=t.dontshowsuccess})),t.apply(this,arguments),delete e.maturityPopupInvoked}},c=t.extend({_uwaClassName:"MassUpdateView",init:function(e){this.parentView=e,this.massUpdateToolbarConfig=l,r.apply(this,arguments),this.subscribeToPlatformEvents()},handleMassUpdateButtonEvents:function(e){let t=this.parentView.getViewCollection();switch(e){case s.DUPLICATE:t.duplicateDataModels({operation:e,isSelect:this.parentView._detailsAndRelationships.prototype._isPropertyPanelOpen});break;case s.MATURITY:this.handleChangeMaturity();break;case s.CHANGE_OWNER:this.handleChangeOwner();break;case s.RELATIONS:this.handleRelations();break;case s.EXPORT:t.export();break;case s.REMOVE_MEMBER:let i=this.parentView.getCurrentView();t.handleRemoveMember({parentModel:i.parentView._currentModel,collectionAttr:i._options.COLLECTION_ATTRIBUTE,doNotShowRemoveMessage:!0,doNotShowMessageForGoverningType:!0})}},handleChangeMaturity:function(e){if(delete this.isOnErrorEventInvoked,!this.maturityPopupInvoked){this.maturityPopupInvoked=!0;let t=this.getSelectedNodes(e);if(t.length){(new n).execute(t)}}},handleChangeOwner:function(){let e=this.getSelectedNodes();if(e.length){new o({context:{getSelectedNodes:()=>e},ID:"ActionBar_ChangeOwner"}).execute()}},handleRelations:function(){a.launchApp(s.RELATIONS_WIDGET_APP_ID,this.parentView.getViewCollection().treeDocument.getSelectedNodeModels())},subscribeToPlatformEvents:function(){let e=this;i.unsubscribe("ENOLC_MOVE_CMD_UPDATE"),i.subscribe("ENOLC_MOVE_CMD_UPDATE",(function(t){let i=t&&t.data,n=i&&i.paths;e.massUpdateForResultData(n)})),this.listenTo(this.parentView,"invokeMaturityUpdate",this.handleChangeMaturity)},updateTreeDocument:function(e){let t=e&&!this.isOnErrorEventInvoked&&e.data;this.massUpdateForResultData(t),this.parentView&&a.updateMaturityCompactView({parentView:this.parentView})},massUpdateForResultData:function(e){if(e){let t=[];if(e&&e.length&&e.forEach((function(e){let i=e.physicalid||e;t.push({objectId:i})})),t&&t.length){let e=this.parentView.getViewCollection(),i={collection:e.collection.clone(),paramData:t,onComplete:this.onCompleteMassUpdate.bind(this),isMassUpdate:!0,fields:this.massUpdateToolbarConfig.fetchOptions.fields,includeFields:this.massUpdateToolbarConfig.fetchOptions.includeFields};e.fetchAdditionalDataForModels(i)}}},onCompleteMassUpdate:function(){let e=this.parentView.getCurrentView();if(e){let t=e.detailsAndRelationships;t&&t.currentModel&&t.postCreateProcess()}},getSelectedNodes:function(t){t&&!e.is(t,"array")&&(t=[t]);let i=[],n=this.parentView.getViewCollection();return(t=t||n.treeDocument.getSelectedNodes())&&t.length&&t.forEach((e=>{let t=e.options.data,n=t.title,o=function(){return n};i.push({displayName:n,getLabel:o,getDisplayName:o,physicalid:t.id,getID:function(){return t.id},getType:function(){return t.get("type")},getOwner:function(){return t.get("owner")}})})),i}});return c})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtMultiObjectCardView",["DS/E6WCommonUI/Views/MultiObjectCardView","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],(function(e,t,i){"use strict";return e.extend({_uwaClassName:"ProjectMgmtMultiObjectCardView",getDropDownMenuItems:function(e,n){let o=UWA.clone(n||{},!1),s=o.model,a=s&&s.type,l=t.TYPE_GROUP.includes(a),r=this._parent(e,o);if(r&&r.length&&l){r=r.filter((e=>"showMembersButton"!==e.name));let e=s.get("proxyId")||s.get("groupURI");e&&r.unshift(i.getShowMembersBtn(e))}return r}})})),define("DS/ENOProjectMgmtCommonComponents/config/MembersConfig",["DS/ENOProjectMgmtModels/Collections/Persons","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtMultiObjectCardView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Collections/SearchObjects","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a){"use strict";return t.extend({_uwaClassName:"MembersConfig",columnInfo:{},type:"members",setup:function(){this.setValues(),this.addAdditionalValues(),this.setColumnInfo()},setValues:function(){this.values=[{readWrite:"true",name:"assignees",label:a.ASSIGNEES,attributeToDisplay:"fullNameAndUsername",imageAttribute:"image",type:"person",singleObjectOnly:!1,typeAheadCallback:e.typeAheadCallback,customView:i,multiCustomView:n,linkCallback:o.launchProperties,placeHolder:a.SEARCH_PLACEHOLDER_TEXT,excludeSearchTypes:{"3dspace":["Security Context"]},excludePendingUser:!0,validateSameTenant:!0,addMembers:!0},{readWrite:"true",name:"candidateAssignees",label:a.CANDIDATE_ASSIGNEES,attributeToDisplay:"title",imageAttribute:"image",type:"group",doNotFetch:!0,singleObjectOnly:!1,typeAheadCallback:s.typeAheadCallback,customView:i,multiCustomView:n,linkCallback:o.launchProperties,placeHolder:a.SEARCH_PLACEHOLDER_TEXT,excludePendingUser:!0,validateSameTenant:!0,addMembers:!0,excludeSearchTypes:{"3dspace":["Person","Security Context"]}},{readWrite:"true",name:"ownerInfo",label:a.OWNER,attributeToDisplay:"fullNameAndUsername",imageAttribute:"image",type:"person",singleObjectOnly:!0,typeAheadCallback:e.typeAheadCallback,customView:i,multiCustomView:n,linkCallback:o.launchProperties,placeHolder:a.SEARCH_PLACEHOLDER_TEXT,excludePendingUser:!0,validateSameTenant:!0}]},getAssigneesCustomButtons:function(){return t.assigneesCustomButtons}})})),define("DS/ENOProjectMgmtCommonComponents/config/ChatViewConfig",["UWA/Core","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i){"use strict";let n=t.extend({_uwaClassName:"ChatViewConfig",columnInfo:{},hide:!0,setup:function(){this.setColumnInfo()},type:"basic",values:[{label:"Note",name:"note",type:"text",readWrite:!1,defaultValue:"Please provide project details below. This info will be used to generate a multi-level project plan with appropriate milestones."},{label:"Project Details",name:"title",relatedFieldsToSave:["model","temperature","max_tokens","frequency_penalty","presence_penalty","messages"],type:"text",readWrite:!0,validate:!0},{label:"Start Date",name:"startDate",type:"date",readWrite:!0,validate:!0},{label:"Duration",name:"duration",type:"number",readWrite:!0,validate:!0,defaultValue:1},{label:"Duration Period",name:"durationPeriod",type:"select",readWrite:!0,values:[{actualValue:"Days",displayValue:"Days"},{actualValue:"Weeks",displayValue:"Weeks"},{actualValue:"Months",displayValue:"Months"}],defaultValue:"Months"}]});return n._instance=n._instance||new n,n._instance})),define("DS/ENOProjectMgmtCommonComponents/config/ChatCreateConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/ChatViewConfig"],(function(e,t){"use strict";let i=e.extend({_uwaClassName:"ChatCreateConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"tab",hide:!0,values:[{name:"",key:"chatPrompt",selected:!0,config:t,checkFlag:!0}]});return i._instance=i._instance||new i,i._instance})),define("DS/ENOProjectMgmtCommonComponents/views/DateCustomView",["UWA/Core","DS/Controls/DatePicker","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],(function(e,t,i,n){"use strict";let o=i.extend({setup:function(e){this.options=e,this.model=e&&e.model,this._parent.apply(this,arguments)},render:function(){let i=this;this.container.empty(!0),this.dateFieldContainer=e.createElement("div",{class:(this.model.model.canModify()&&this.options.config.readWrite||this.model.model.isNew(),"editable")}),this.dateFieldContainer.inject(this.container),this.attributeLabel=new e.Element("label",{text:this.options.config.label}),this.options.config.required&&(this.requiredLabel=new e.Element("span",{text:"*",class:"required-field-indicator"}),this.requiredLabel.inject(this.attributeLabel)),this.attributeLabel.inject(this.dateFieldContainer),this.groupStackedFields=e.createElement("div",{class:"field-group stacked-fields"}),this.groupStackedFields.inject(this.dateFieldContainer),this.groupWrapper=e.createElement("div",{class:"input-group-wrapper"}),this.groupWrapper.inject(this.groupStackedFields),this.datePickrSpanContainer=e.createElement("div",{class:"input-group"}),this.datePickrSpanContainer.inject(this.groupWrapper),this.datePickerContainer=e.createElement("span",{class:"input-element"}),this.datePickerContainer.inject(this.datePickrSpanContainer);let o=this.options.config.name;if(this.model.model.has(o)||this.model.model.isNew()){let s=this.model.get(o),a=s&&n.getIntlDateFormat(s);this.model.model.isNew()||this.options.config.readWrite?(this.datePicker=new t({value:a&&a.actualValue||void 0,allowUndefinedFlag:!a||!a.actualValue,timePickerFlag:!1}).inject(this.datePickerContainer),this.datePicker.fired=!1,this.datePicker.addEventListener("change",(function(e){i.model.set(o,e.dsModel.value)}))):(this.attributeValueLabel=new e.Element("span",{class:"read-only",text:a.displayValue||s}),this.attributeValueLabel.inject(this.datePickerContainer))}return this},destroy:function(){this.attributeLabel.destroy(),this.datePicker&&this.datePicker.destroy(),this.datePickrSpanContainer&&this.datePickrSpanContainer.destroy(),this.datePickerContainer&&this.datePickerContainer.destroy(),this.groupWrapper.destroy(),this.groupStackedFields.destroy(),this.dateFieldContainer.destroy(),this._parent.apply(this,arguments)}});return o})),define("DS/ENOProjectMgmtCommonComponents/config/CalendarDisplayListConfig",["UWA/Core","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/DefaultGridConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n){"use strict";let o=t.extend({_uwaClassName:"CalendarDisplayListConfig",columnInfo:{},ignoreCheckBoxSelection:!0,customContentColumnInfo:{},setup:function(){this.setColumnInfo()},type:"list",gridConfig:function(){let t=e.clone(i);return t.identifier="CalendarListGridView",t.columnsHeader=!0,t.showContextualMenuColumnFlag=!1,t.layoutOptions.rowsHeader=!1,t.layoutOptions.columnsHeader=!0,t}(),values:[{text:n.EXCEPTION_NAME,key:"title",dataIndex:"tree",minWidth:"150",icon:""},{text:n.EXCEPTION_TYPE,minWidth:"120",dataIndex:"exceptionType"},{text:n.NEXT_INSTANCE,minWidth:"120",dataIndex:"nextOccurrence",typeRepresentation:"date"},{text:n.FREQUENCY,minWidth:"120",dataIndex:"frequency"},{text:n.PATTERN,minWidth:"220",dataIndex:"pattern"},{text:n.EFFECTIVE_FROM,minWidth:"120",dataIndex:"startDate",alignmentValue:"center",typeRepresentation:"date"},{text:n.EFFECTIVE_TO,minWidth:"120",dataIndex:"endDate",alignmentValue:"center",typeRepresentation:"date"}]});return o._instance=o._instance||new o,o._instance})),define("DS/ENOProjectMgmtCommonComponents/config/MatrixConfigListConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t){"use strict";let i=e.extend({_uwaClassName:"MatrixConfigListConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"basic",values:[{text:t.TITLE,key:"title",dataIndex:"tree",fields:"title,name,rmcType",include:"matrix",icon:""}]});return i._instance=i._instance||new i,i._instance})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtTrendView",["UWA/Core","UWA/Class/View","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomDataGridView","DS/ENOProjectMgmtModels/Models/AppSettings","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css"],(function(e,t,i,n,o,s){"use strict";let a="#77797C";return t.extend({_uwaClassName:"ProjectMgmtTrendView",_appContainer:void 0,_viewCollection:void 0,_matrixConfigCollection:void 0,_trendConfig:void 0,_trendChartConfig:void 0,_nlsTrend:void 0,init:function(t,i){let n=this,o=e.clone(i||{},!1);this._appContainer=t,this._viewCollection=o.viewCollection,this._matrixConfigCollection=o.MatrixConfigCollection,this._trendConfig=o.trendConfig,this._nlsTrend=o.nlsTrend,this._appContainer.setHTML(o.trendTemplate),this._chartConfig=e.clone(o.trendChartConfig||{}),this.Highcharts=s.get("highcharts"),this.trendChartDiv=this._appContainer.getElement(".trend-chart"),this._riskTrendGridView=this._appContainer.getElement(".risk-trend-grid"),this.trendChartDiv.addEvent("resize",(function(){n.trendChart&&n.trendChart.reflow()})),this._chartConfig.chart.renderTo=this.trendChartDiv},render:function(){let e=this,t=this._viewCollection.getCurrentDataModel(),i=t&&t.model._sourceType;return this._viewCollection.getDataModelTrend(i).then((function(i){if(e.Highcharts){e._appContainer.getElement("#chartLabel").setHTML(e._nlsTrend);let n=e.getRiskTrendData(i),o=n.rpnData,s=n.rpnGoalData;e._chartConfig.series[0].data=o,t.isRiskTypeObject&&(1===e._chartConfig.series.length?e._chartConfig.series.push({name:e._chartConfig.goalLineLabel,data:s,color:"#6495ED"}):e._chartConfig.series[1].data=s),e.trendChart=new e.Highcharts.Chart(e._chartConfig),e.trendChart.redraw()}let n=e._viewCollection.getCurrentDataModel();e._trendConfig.setModel(n.model),e.treeDocument=e._viewCollection.createTreeDocumentForCollection(i,{config:e._trendConfig}),e.riskTrendDataGrid=new o({container:e._riskTrendGridView,treeDocument:e.treeDocument,config:e._trendConfig})})),this._appContainer},reload:function(){this.trendChart&&this.riskTrendDataGrid&&(this.trendChart.destroy(),this.trendChart=void 0,this.riskTrendDataGrid.destroy(),this.render())},setYAxisMax:function(e){e>this._chartConfig.yAxis.max&&(this._chartConfig.yAxis.max=e)},getRiskTrendData:function(e){let t=this,i=[],o=[],s="",l=this._viewCollection.getCurrentDataModel(),r=l.model.get("state");if("Complete"===r){let e=n.getFormattedDate(l.model.get("actualFinishDate"));s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}else{let e=new Date;s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}let c="Complete"===r?"fonticon-status-ok ":"fonticon-expand-right ",d=n.getFontIconElement(c,{additionalClass:"object-maturity "+r.toLowerCase()});d=d&&d.getHTML()||"";let h=Number(l.model.get("rpnValue"));this.setYAxisMax(h),i.push({x:s,y:h,marker:{symbol:"url()"},fontIcon:d}),o.push({x:s,y:Number(l.model.get("rpnValueGoal")),marker:{symbol:"url()"},fontIcon:'<i class="fonticon '+("Complete"===r?"fonticon-status-ok ":"fonticon-expand-right ")+"object-maturity "+r.toLowerCase()+' "></i> '});let u=l&&l.model.getRMCActualId(),m=u&&this._matrixConfigCollection.getMatrixConfigById(u),g=m&&m.get("matrix").severity;return e.forEach((function(e){let r=n.getFormattedDate(e.get("modified"));s=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());let c=m&&l.model.getMatrixCellInfo(m,e.get("rpnImpact"),e.get("rpnProbability")),d=n.findObject(g,"riskLevel",c&&c.riskLevel),h=Number(e.get("rpnValue"));t.setYAxisMax(h),i.push({x:s,y:h,marker:{fillColor:d&&d.backgroundColor||a,states:{hover:{fillColor:d&&d.backgroundColor||a}}}});let u=m&&l.model.getMatrixCellInfo(m,e.get("rpnImpactGoal"),e.get("rpnProbabilityGoal")),p=n.findObject(g,"riskLevel",u&&u.riskLevel);o.push({x:s,y:Number(e.get("rpnValueGoal")),marker:{fillColor:p&&p.backgroundColor||a,states:{hover:{fillColor:p&&p.backgroundColor||a}}}})})),{rpnData:i,rpnGoalData:o}},destroy:function(){this._riskTrendGridView.destroy(),this.trendChart&&this.trendChart.destroy(),this.riskTrendDataGrid&&this.riskTrendDataGrid.destroy(),this._appContainer&&this._appContainer.destroy()}})})),define("DS/ENOProjectMgmtCommonComponents/components/CommonTreeDocument",["UWA/Core","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],(function(e,t,i,n,o){"use strict";let s,a=["select","unselect","modelUpdate"],l=["/WEBAPP/undefinedPOST_ADD/","/WEBAPP/undefinedPOST_REMOVE/"],r=t.extend({_uwaClassName:"CommonTreeDocument",init:function(t){let i=e.clone(t||{},!1);this.config=i.config,this.viewCollection=i.viewCollection,this.doNotApplyNodeExpand=i.doNotApplyNodeExpand,this._parent.apply(this,arguments),i.prepareUpdate&&this.prepareUpdate(),!this.doNotApplyNodeExpand&&this.initializeEvents()},handleContextExpansionCache:function(e,t){this.viewCollection.handleContextExpansionCache(e,t)},handleExpandNodeModel:function(e){let t=this,i=e.data.nodeModel,n=i.model;this.prepareUpdate(),i.hasChildren()?(e.target.preExpandDone(),t.handleContextExpansionCache(n.id,!0)):n&&this.viewCollection.getDataModelDetails({model:n,expandCall:!0,doNotCache:!0,customParams:{level:1},onComplete:function(){e.target.preExpandDone(),t.viewCollection.updateCacheAndTaggerData(n,{doNotCache:!0,childrenTaggerUpdate:!0}),t.handleContextExpansionCache(n.id,!0)}}),t.pushUpdate()},handleCollapseNodeModel:function(e){let t=e.data.nodeModel.model;this.handleContextExpansionCache(t.id,!1)},initializeEvents:function(){this.onPreExpand(this.handleExpandNodeModel.bind(this)),this.onPreCollapse(this.handleCollapseNodeModel.bind(this))},getNodeModelsLength:function(){let e=this.getAllDescendants();return e&&e.length||0},getNodeModels:function(){return this.getNodeModelsLength()&&o.getAttributeValues(this.getAllDescendants(),"model")||[]},getNonCachedNodeModels:function(){return this.getNodeModelsLength()&&o.filterObjects(this.getAllDescendants(),"cached")||[]},getNonCachedModels:function(e){let t=this.getNonCachedNodeModels().map((e=>e.model));return t.length&&o.filterObjects(t,e,["",void 0,null])||[]},getSelectedNodeModels:function(){return this.getNodeModelsLength()&&o.getAttributeValues(this.getSelectedNodes(),"model")||[]},getNodeModelLabel:function(e,t){let i=(t=t||this.config).columnInfo;return i.tree&&e.get(i.tree.key)||e.get("name")},createTreeNodeModel:function(t,o){let s,a=e.clone(o||{},!1),l=a.expandNode||t.model.expandNode,r=a.parentNode||this;try{let o=a.isNew,c=this.viewCollection.addAsLastChild,d=a.config,h=t.get("image"),u=a.isSelect,m=a.attributes,g=!a.isFlatStructure&&t.model.hasChildren(this.viewCollection.CHILD_ATTRIBUTE),p=e.is(r.isExpanded,"function"),C=!(this.doNotApplyNodeExpand||!p)&&r.isExpanded(),f=o&&!C&&p;if(f&&Boolean(r.getChildren())&&!r.hasChildren())return void r.expand();if(s=new i({data:t,id:t.id,icons:[h],grid:m,label:this.getNodeModelLabel(t,d),children:g?[]:void 0}),a.modelCacheFieldName&&this.viewCollection.updatetreeNodeModelCache(s),s.model.cached||(s.model.cached=Boolean(o)),s.model.fetched||(s.model.fetched=Boolean(o)),a.insertBefore){let e=this.previousSelectedNodeForContextMenu||this.getSelectedNode();r.insertBefore(s,e)}else c?r.addChild(s):r.addChild(s,0);u&&s.select(),!l&&(l=n.checkNodeForExpansion(t)),l&&s.expand(),f&&r.expand()}catch(t){e.log(t)}return s},copyChildNodes:function(e,t){let i,n,o=e.getChildren();o&&o.forEach((e=>{i=e.options,n=this.createTreeNodeModel(i.data,{isSelect:!1,config:this.config,parentNode:t,attributes:i.grid}),this.copyChildNodes(e,n)}))},sort:function(){this._getRealTrueRoot().sortChildren(),this.getRoots().forEach((e=>{e.sortChildren()}))},updateSortAndExpandAll:function(){this.pushUpdate(),this.sort(),this.expandAll()},getSelectedNode:function(e){let t=this.getSelectedNodes(),i=t.length;if(i)return t[e||i-1]},selectNodeByRowId:function(t){let i;if(e.is(t,"number")&&t>-1){let e=this.getAllDescendants();i=e&&e[t]}else i=this.getSelectedNode(t);i&&(i.isSelected()&&i.unselect(),i.select())},selectNodeById:function(e){let t=this.getTreeNodeModelById(e);t&&t.select()},getTreeNodeModelById:function(e){if(this.viewCollection&&this.viewCollection.modelCache)return this.viewCollection.modelCache[e];let t=this.getAllDescendants();return e&&t&&t.find((function(t){return t.id===e}))},getRecursiveParentTreeNodeIds:function(e,t){if(t&&t.id){e.push(t.id);let i=t.getParent();i&&this.getRecursiveParentTreeNodeIds(e,i)}},getRecursiveParentIds:function(t){let i=e.clone(t||{},!1),n=i.parentIdsArray||[],o=this.getSelectedNode()||this.getTreeNodeModelById(i.parentCloneModel.id);return this.getRecursiveParentTreeNodeIds(n,o),n},getSiblingIds:function(t){let i=e.clone(t||{},!1),n=i.siblingIdsArray||[],s=this.getSelectedNode()||this.getTreeNodeModelById(i.parentCloneModel.id),a=s&&s.getBrothers();return a.length&&(n=o.getAttributeValues(a,"id")),n},getPreviousSelectedNodeInfo:function(){return this.previousSelectedNodeInfo},getPreviousSelectedNodeId:function(){let e=this.getPreviousSelectedNodeInfo();return e&&e.id},getPreviousSelectedNodeRowId:function(){let e=this.getPreviousSelectedNodeInfo();return e&&e.rowID},getPreviousSelectedNodeModel:function(){let e=this.getPreviousSelectedNodeId();return e&&this.getTreeNodeModelById(e)},clearPreviousSelectedNodeInfo:function(){this.previousSelectedNodeInfo=!1},resetPreviousSelectionNodeModel:function(){let e=this.getTreeNodeModelById(this.getPreviousSelectedNodeId());e&&e._options.data.cancel()},resetTreeDocumentEvents:function(){let e=this.getModelEvents();e&&a.forEach((t=>{e.unsubscribeAll({event:t})}));let t=this.getXSO(),i=t&&t._modelEvents;i&&l.forEach((e=>{let t=i._pubsub.topics[e],n=t.length;i._pubsub.topics[e]=t.slice(0,n-1)}))}});return Object.defineProperty(i.prototype,"id",{get:function(){return this._options.id}}),Object.defineProperty(i.prototype,"cloneModel",{get:function(){return this._options.data}}),Object.defineProperty(i.prototype,"model",{get:function(){return this._options.data&&this._options.data.model}}),Object.defineProperty(i.prototype,"config",{get:function(){return this.getTreeDocument().config}}),Object.defineProperty(i.prototype,"cached",{get:function(){return this.model&&this.model.cached}}),Object.defineProperty(r.prototype,"previousSelectedNodeInfo",{get:function(){return s},set:function(e){s=e&&{id:e.options.id,rowID:e._rowID}}}),i.prototype.getNodeModelLabel=r.prototype.getNodeModelLabel,r})),define("DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtSummaryChartsUtil",["UWA/Class","DS/ENOProjectMgmtCommonComponents/config/AppConfig","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/constants/Constants","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtHeatMapChartUtil","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/FieldsDefinition","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l){"use strict";let r,c,d,h,u=new t,m={},g={},p={},C={};return e.extend({_uwaClassName:"ProjectMgmtSummaryChartsUtil",_breakdownChartConfig:void 0,_heatMapChartConfig:void 0,_classificationChartConfig:void 0,_actionPlanChartConfig:void 0,_matrixConfigCollection:void 0,_viewCollection:void 0,_createConfig:void 0,_planConfig:void 0,parentView:void 0,_matrixDataCount:void 0,_rmcObject:void 0,_isDefaultRMC:void 0,init:function(e){this._breakdownChartConfig=e.breakdownChartConfig,this._heatMapChartConfig=e.heatMapChartConfig,this._classificationChartConfig=e.classificationChartConfig,this._actionPlanChartConfig=e.actionPlanChartConfig,this._matrixConfigCollection=e.matrixConfigCollection,this._viewCollection=e.viewCollection,this._createConfig=e.createConfig,this._planConfig=e.planConfig,this.parentView=e.parentView,r=this.getMitigationTypes(),this.resetChartData()},resetChartData:function(){this.resetRangeData(d,m),this.resetRangeData(h,g),this.resetRangeData(c,p),this.resetRangeData(r,C)},resetRangeData:function(e,t){e&&e.forEach((function(e){t[e.actualValue||e.matrixXY||e]=0}))},calculateDataBasedOnKey:function(e,t){e[t]||(e[t]=0),e[t]++},getTreeDocumentCollection:function(){let e=this._viewCollection&&this._viewCollection.getDocument();return e&&e.getChildren()},getMitigationTypes:function(){if(r=this._planConfig.columnInfo.mitigationType.values,r)return r.forEach((function(e,t){e.rangeColor=u.ColorPalette[t].color})),r},reloadClassification:function(){let e=this;c&&this.resetRangeData(c,p);let t=this.getTreeDocumentCollection(),i=t&&t.length,n=[];i&&t.forEach((function(t){let i=t.options.data;e.getClassificationData({dataInfo:i,classesArray:n})})),this.processClassificationChart(n,i),this.Highcharts&&(this.classificationChart=new this.Highcharts.Chart(this._classificationChartConfig))},getClassificationData:function(e){let t=this,i=e.dataInfo,n=e.classesArray,o=i.get("classType"),s=a.getFieldRangeItemObject(this._viewCollection.fieldDefinitionSource,"classType",o);s&&n.push({actualValue:o,displayValue:s.display,classType:"Risk"}),this.calculateDataBasedOnKey(p,o);let l=i.get("classes");l&&l.length&&l.forEach((function(e){e.get("id");let i=e.get("title");n.push({actualValue:i,classType:"Classification"}),t.calculateDataBasedOnKey(p,i)}))},getRMCDetails:function(e){let t;if(e){let i=e.get("configuration");t=i&&i.length&&1===i.length?i[0]||i.at(0):this._matrixConfigCollection._defaultConfiguration}else t=this._matrixConfigCollection._defaultConfiguration;return t},reloadMatrixConfiguration:function(){this._isDefaultRMC=!1;let e=s.get("context"),t=this.getRMCDetails(e);if(t=t&&this._matrixConfigCollection.getMatrixConfigDefinition(t.id||t),t){this._rmcObject=t;let i={chartConfig:this._heatMapChartConfig,matrixConfiguration:t},s=new o(i);d=s&&s.heatMapChartArray[0].data;let a=this._rmcObject?this._rmcObject.get("name"):"";this._isDefaultRMC=!e&&(a===n.DEFAULT||a===n.DEFAULT_OPPORTUNITY)}},getMatrixData:function(e){let t=e.dataInfo,n=e.severityArray,o=t.get("validConfiguration"),s=t.get("contextValidConfiguration");if("FALSE"===o||"FALSE"===s)return;this._matrixDataCount++;let a,l=t.get("impact")+t.get("probability");if(this._isDefaultRMC){let e=t.getMappedValue(this._matrixConfigCollection._defaultConfiguration);e&&(this.calculateDataBasedOnKey(m,e.matrixXY),a=e.severityItem)}else if(this.calculateDataBasedOnKey(m,l),e.breakdown){let e=this._matrixConfigCollection.getMatrixConfigDefinition(t.getRMCActualId()),n=t.getRiskSeverityInfo&&t.getRiskSeverityInfo(e);a=n&&i.getSeverityItem(n)}e.breakdown&&(a&&n.push(a),a&&this.calculateDataBasedOnKey(g,a.actualValue))},processChartsData:function(e){let t=this,i=UWA.clone(e||{},!1),n=this.getTreeDocumentCollection(),o=n&&n.length;this.reloadMatrixConfiguration(),i.classesArray=[];let s=[];this._matrixDataCount=0,o&&n.forEach((function(n){let o=n.options.data.model;if(o&&(i.dataInfo=o,i.severityArray=s,t.getMatrixData(i),e.classification)){t.getClassificationData(i);let e=o.get("mitigationType");C[e]++}})),i.treeDocumentCollecLength=o,this.processCharts(i)},processCharts:function(e){e.heatmap&&this.processHeatmapChart(e),e.breakdown&&this.processBreakdownChart(e.severityArray,e.treeDocumentCollecLength),e.classification&&this.processClassificationChart(e.classesArray,e.treeDocumentCollecLength),e.actionPlanBreakdown&&this.processActionPlanChart(e.treeDocumentCollecLength)},processHeatmapChart:function(e){let t=0===this._matrixDataCount;d&&(d.forEach((function(e){let i=e.matrixXY,n=m[i];n?(e.cellCount=n,e.dataLabels.format=n+" "):(e.cellCount=0,t&&(e.opacity=.5),e.dataLabels.format=" ")})),e.isComponent||(this._heatMapChartConfig.plotOptions.series.point={events:{click:function(){if(0===this.cellCount)return;let e=this.Xvalue+" * "+this.Yvalue;this.series.chart.options.onClickCallBack("ds6w:what/ds6w:heatMap",e)}}},this._heatMapChartConfig.onClickCallBack=this._chartClickCallbackFunction.bind(this)))},preProcessBreakdownChart:function(e){return h=[...new Map(e.map((e=>[e.actualValue,e]))).values()],h},processBreakdownChart:function(e){h=e&&this.preProcessBreakdownChart(e);let t=[],i=0===this._matrixDataCount;i?t.push({y:1,name:l.NO_DATA,isEmpty:!0,color:u.ChartsColor.GREY0_COLOR}):h&&h.forEach((function(e){let i=e.actualValue,n=g[i]||0;t.push({name:e.displayValue,y:n,severityIndex:e.severityIndex,color:e.backgroundColor,severityLevel:i})})),t.sort((function(e,t){return e.severityIndex-t.severityIndex})),this._breakdownChartConfig.tooltip.enabled=!i,this._breakdownChartConfig.series.isEmpty=i,this._breakdownChartConfig.title.text=this._matrixDataCount.toString(),this._breakdownChartConfig.onClickCallBack=this._chartClickCallbackFunction.bind(this),this._breakdownChartConfig.series[0].data=t},preProcessClassificationChart:function(e){let t=[];c=[...new Map(e.map((e=>[e.actualValue,e]))).values()],c.forEach((e=>{t.push(e.displayValue||e.actualValue)})),this.parentView.addChartScroller(t.length)},processClassificationChart:function(e,t){let i=0===t;this.preProcessClassificationChart(e);let n=[];i?n.push({y:0,isEmpty:!0,name:l.NO_DATA}):c.forEach((function(e){let t=p[e.actualValue];t?n.push({name:e.displayValue||e.actualValue,y:t,classType:e.classType,actualValue:e.actualValue}):n.push(null)})),this._classificationChartConfig.tooltip.enabled=!i,this._classificationChartConfig.onClickCallBack=this._chartClickCallbackFunction.bind(this),this._classificationChartConfig.series[0].data=n},processActionPlanChart:function(e){let t=[],i=0===e;i?t.push({y:1,name:l.NO_DATA,isEmpty:!0,color:u.ChartsColor.GREY0_COLOR}):r&&r.forEach((function(e){C[e.actualValue]>0&&t.push({name:e.displayValue,actualValue:e.actualValue,y:C[e.actualValue],color:e.rangeColor})})),this._actionPlanChartConfig.tooltip.enabled=!i,this._actionPlanChartConfig.series.isEmpty=i,this._actionPlanChartConfig.title.text=e.toString(),this._actionPlanChartConfig.onClickCallBack=this._chartClickCallbackFunction.bind(this),this._actionPlanChartConfig.series[0].data=t},renderCharts:function(e){this.parentView=e.parentView,this.Highcharts=e.Highcharts,this.Highcharts.setOptions({chart:{style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"16px"}},title:{style:{fontWeight:"normal",fontSize:"18px"}},legend:{itemStyle:{fontWeight:"bold"},itemHiddenStyle:{color:"#cccccc"}},xAxis:{labels:{style:{color:"#666666",fontSize:"11px"}},lineColor:"#ccd6eb"},yAxis:{labels:{style:{color:"#666666",fontSize:"11px"}}},colorAxis:{labels:{style:{color:"#666666",fontSize:"11px"}}}}),this.Highcharts&&(e.heatmap&&(this.heatMapChart=new this.Highcharts.Chart(this._heatMapChartConfig)),e.breakdown&&(this.breakdownChart=new this.Highcharts.Chart(this._breakdownChartConfig)),e.classification&&(this.classificationChart=new this.Highcharts.Chart(this._classificationChartConfig)),e.actionPlanBreakdown&&(this.actionPlanChart=new this.Highcharts.Chart(this._actionPlanChartConfig)),this.reflowCharts())},reflowCharts:function(){this.heatMapChart&&this.heatMapChart.reflow(),this.breakdownChart&&this.breakdownChart.reflow(),this.classificationChart&&this.classificationChart.reflow(),this.actionPlanChart&&this.actionPlanChart.reflow()},_chartClickCallbackFunction:function(e,t){if(this.parentView){let i=this.parentView.parentView.getTaggerProxy();i&&i.set6WFilterOptions(e,t)}},destroyCharts:function(){this.heatMapChart&&(this.heatMapChart.destroy(),delete this.heatMapChart),this.breakdownChart&&(this.breakdownChart.destroy(),delete this.breakdownChart),this.classificationChart&&(this.classificationChart.destroy(),delete this.classificationChart),this.actionPlanChart&&(this.actionPlanChart.destroy(),delete this.actionPlanChart),this.resetChartData()},enableAnimation:function(e){this._breakdownChartConfig.plotOptions.pie.animation=e,this._actionPlanChartConfig.plotOptions.pie.animation=e,this._classificationChartConfig.plotOptions.bar.animation=e}})})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtSummaryView",["UWA/Class/View","UWA/Core","UWA/Element","DS/Controls/TooltipModel","DS/ENOProjectMgmtCommonComponents/config/AppConfig","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtSummaryChartsUtil","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Models/AppSettings","DS/Controls/Button","DS/UIKIT/Scroller","text!DS/ENOProjectMgmtCommonComponents/assets/templates/summaryView.html.handlebars","text!DS/ENOProjectMgmtCommonComponents/assets/templates/summaryHeatmap.html.handlebars","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css"],(function(e,t,i,n,o,s,a,l,r,c,d,h,u,m){"use strict";return e.extend({_uwaClassName:"ProjectMgmtSummaryView",_appContainer:void 0,parentView:void 0,chartOptions:void 0,height:void 0,Highcharts:void 0,summaryChartsUtil:void 0,_breakdownChartConfig:void 0,_heatMapChartConfig:void 0,_classificationChartConfig:void 0,_actionPlanBreakdownChartConfig:void 0,_viewCollection:void 0,_createConfig:void 0,_planConfig:void 0,_governingTypeNLS:void 0,_taggerUpdated:void 0,init:function(e){this.parentView=e.parentView,this._breakdownChartConfig=e.breakdownChartConfig,this._heatMapChartConfig=e.heatMapChartConfig,this._classificationChartConfig=e.classificationChartConfig,this._actionPlanBreakdownChartConfig=e.actionPlanBreakdownChartConfig,this._matrixConfigCollection=e.matrixConfigCollection,this._viewCollection=e.viewCollection,this._createConfig=e.createConfig,this._planConfig=e.planConfig,this._governingTypeNLS=e.governingTypeNLS,this._appContainer=t.createElement("div")},_isHeatMapOnly:function(e){e.heatMap;return!(e.breakdown||e.classification||e.actionPlanBreakdown)},render:function(e){let i=t.clone(e||{},!1);this.initContainerResizeEvent(i.isComponent);let n=this._isHeatMapOnly(i);return n?this._appContainer.setHTML(u):this._appContainer.setHTML(h),n?this._appContainer.getElement("#heatmapLabel").setHTML(this._governingTypeNLS+" "+m.HEAT_MAP):(this.summaryChart=this._appContainer.getElement(".summary-chart"),this._appContainer.getElement("#heatmapLabel").setHTML(m.HEAT_MAP)),e.breakdown&&(this._appContainer.getElement("#breakdownLabel").setHTML(m.BREAKDOWN),this._breakdownChartConfig.chart.renderTo=this._appContainer.getElement("#breakdownChart")),e.classification&&(this._appContainer.getElement("#classificationLabel").setHTML(m.CLASSIFICATION),this.classificationChart=this._appContainer.getElement("#classificationChart"),this._classificationChartConfig.chart.renderTo=this.classificationChart),e.actionPlanBreakdown&&(this._appContainer.getElement("#actionPlanBreakdownLabel").setHTML(m.ACTION_PLAN),this._actionPlanBreakdownChartConfig.chart.renderTo=this._appContainer.getElement("#actionPlanBreakdownChart")),this._heatMapChartConfig.chart.renderTo=this._appContainer.getElement("#heatmapChart"),t.extend(i,{parentView:this,breakdownChartConfig:this._breakdownChartConfig,heatMapChartConfig:this._heatMapChartConfig,classificationChartConfig:this._classificationChartConfig,actionPlanChartConfig:this._actionPlanBreakdownChartConfig,matrixConfigCollection:this._matrixConfigCollection,viewCollection:this._viewCollection,createConfig:this._createConfig,planConfig:this._planConfig}),this.summaryChartsUtil=new s(i),(!i.isComponent||i.addScroller)&&this.addScroller(),this._appContainer},initContainerResizeEvent:function(e){let t=this;this._appContainer.removeEvent("resize"),this._appContainer.addEvent("resize",(function(){t.timer&&clearTimeout(t.timer),t.timer=setTimeout((function(){t._shouldWeReloadOnResize()&&(t.summaryChartsUtil&&t.summaryChartsUtil.reflowCharts(),e||t.chartScrollElement&&t.chartScrollElement.setStyle("height",t.summaryChart.getSize().height+"px")),delete t.timer}),100)}))},addScroller:function(){let e=this._appContainer.getElement("#summaryViewContent");e.setStyle("height",this.getHeight()+"px"),new d({element:e}).inject(this._appContainer.getElement("#summaryViewContainer"))},addChartScroller:function(e){let i=this._appContainer.getElement("#classificationChartContainer"),n=this.summaryChart.getSize().height||i.getSize().height;if(i&&i.empty(),this.chartScrollElement&&this.chartScrollElement.destroy(),e&&e>10){this.chartScrollElement=new t.createElement("div",{id:"chartScrollerElement"}),this.chartScrollElement.setStyle("height",n+"px"),this.classificationChart.inject(this.chartScrollElement),new d({element:this.chartScrollElement}).inject(i)}else this.classificationChart.inject(i)},reset:function(){!this.parentView.isComponent&&this.parentView.showHideRightPanel(!1),this.parentView.showMassUpdateToolbarButton(!1),this.summaryChartsUtil.destroyCharts()},loadData:function(e){this.reset(),this._containerHeight=this._appContainer.getBoundingClientRect().height,this._containerWidth=this._appContainer.getBoundingClientRect().width,this.Highcharts?this.summaryChartsUtil.enableAnimation(!1):this.Highcharts=r.get("highcharts");let t={isComponent:e.isComponent,parentView:this,heatmap:e.heatmap,breakdown:e.breakdown,classification:e.classification,actionPlanBreakdown:e.actionPlanBreakdown};this.summaryChartsUtil.processChartsData(t),t.Highcharts=this.Highcharts,this.summaryChartsUtil.renderCharts(t),this.handleInvalidCount(e.isComponent)},reloadCharts:function(e){!e.isComponent&&this.summaryChartsUtil.reloadClassification()},handleInvalidCount:function(e){let t=r.get("context"),i=this._viewCollection.getModelsCountWithInvalidConfig(),n=t&&this._viewCollection.getModelsCountWithInvalidConfigForContext();this._setInvalidCounts(i,n,"#fixInvalidRisksForHeatmap","#configurationMismatchForHeatmap","#heatmapBadge"),e||this._setInvalidCounts(i,n,"#fixInvalidRisksForBreakdown","#configurationMismatchForBreakdown","#breakdownBadge")},_setInvalidCounts:function(e,t,n,o,s){let a=this,l=i.extend(this._appContainer.getElement(s)),d=i.extend(this._appContainer.getElement(n)),h=i.extend(this._appContainer.getElement(o));if(l&&l.show(),d&&d.empty(),h&&h.empty(),e){let t=new c({label:m.FIX+" "+e+" "+m.INVALID+" "+this._governingTypeNLS,emphasize:"medium-attention"});t.inject(d),t.getContent().addEventListener("buttonclick",(function(){r.set("invalidRiskFilterisOn","set"),a.parentView.switchTab(1)}))}t?(h.set({text:t+" "+m.INVALID_CONFIGURATION+" "+this._governingTypeNLS,title:this._governingTypeNLS+" "+m.INVALID_CONFIGURATION_TOOLTIP}),l&&l.show()):l&&l.hide()},_shouldWeReloadOnResize:function(){var e=this._appContainer.getBoundingClientRect(),t=e.height>0&&e.width>0&&(this._containerHeight!==e.height||this._containerWidth!==e.width);return t&&(this._containerHeight=e.height,this._containerWidth=e.width),t},destroy:function(){this._appContainer&&this._appContainer.destroy()},getHeight:function(){return this.height=this.height?this.height:this.parentView.getHeight()-5},setHeight:function(e){if(this.height=e,this._appContainer){let e=this._appContainer.getElement("#summaryViewContent");e&&e.setStyle("height",this.height+"px")}},isHidden:function(){return this._appContainer.isHidden()},show:function(){this._appContainer&&this._appContainer.show()},hide:function(){this._appContainer&&this._appContainer.hide()}})})),define("DS/ENOProjectMgmtCommonComponents/views/MultiValueCustomView",["UWA/Core","DS/Controls/ComboBox","DS/Controls/DatePicker","DS/Controls/LineEditor","DS/Controls/SelectionChips","DS/Controls/SelectionChipsEditor","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r){"use strict";let c=a.extend({_uwaClassName:"MultiValueCustomView",setup:function(e){this.options=e,this.model=e&&e.model,this._parent.apply(this,arguments)},render:function(){let a=this;this.container.empty(!0);let c=this.model.model.isNew()||this.model.model.canModify()&&this.options.config.readWrite;if(this.multiValueContainer=e.createElement("div",{class:"editable"}),this.multiValueContainer.inject(this.container),this.attributeLabel=new e.Element("label",{text:this.options.config.label}),this.options.config.required&&(this.requiredLabel=new e.Element("span",{text:"*",class:"required-field-indicator"}),this.requiredLabel.inject(this.attributeLabel)),this.attributeLabel.inject(this.multiValueContainer),this.groupStackedFields=e.createElement("div",{class:"field-group stacked-fields"}),this.groupStackedFields.inject(this.multiValueContainer),this.groupWrapper=e.createElement("div",{class:"input-group-wrapper"}),this.groupWrapper.inject(this.groupStackedFields),this.editorContainer=e.createElement("div",{class:"input-group"}),this.editorContainer.inject(this.groupWrapper),this.editorSpan=e.createElement("span",{class:"input-element"}),this.editorSpan.inject(this.editorContainer),c&&this.options.config.selectionChipEditor)this.lineEditor=new s({placeholder:this.options.config.placeHolder}),this.lineEditor.inject(this.editorSpan);else if(c){if(this.selectionChipsContainer=e.createElement("div",{class:"input-group"}),this.selectionChipsContainer.inject(this.groupWrapper),this.selectionChipsSpan=e.createElement("span",{class:"input-element"}),this.selectionChipsSpan.inject(this.selectionChipsContainer),this.options.config.values||"checkbox"===this.options.config.type){let e=[];"checkbox"===this.options.config.type?e=[{label:r.TRUE_VALUE,value:!0},{label:r.FALSE_VALUE,value:!1}]:this.options.config.values.forEach((t=>{e.push(t.displayValue)})),this.comboBox=new t({placeholder:r.SELECT_AN_OPTION,enableSearchFlag:!1,reachablePlaceholderFlag:!0,elementsList:e}),this.comboBox.addEventListener("change",(function(e){const t="select"===a.options.config.type?a._getConfigValues(e.dsModel.label,!1):{actualValue:e.dsModel.value,displayValue:e.dsModel.label};a._addChip(t.actualValue,t.displayValue)})),this.comboBox.inject(this.editorSpan)}else"date"===this.options.config.type?(this.datePicker=new i({timePickerFlag:!1}).inject(this.editorSpan),this.datePicker.addEventListener("change",(function(e){let t=e.dsModel.value;a._addChip(t.toString())}))):("number"===this.options.config.type?this.lineEditor=new n({placeholder:r.ENTER_A_VALUE,maxLength:this.options.config.maxLength,pattern:"float"!==this.options.config.typeRepresentation?"^-?[0-9]{1,10}$":"^(?=.*\\d)[+]?\\d{1,10}(\\.\\d+)?$"}):this.lineEditor=new n({placeholder:r.ENTER_A_VALUE,maxLength:this.options.config.maxLength}),this.lineEditor.inject(this.editorSpan),this.lineEditor.addEventListener("uncommittedChange",(function(e){if(e.options.uncommittedValue&&""!==e.options.uncommittedValue){let t="number"===a.options.config.type&&"float"!=a.options.config.typeRepresentation&&(e.options.uncommittedValue>2147483647||e.options.uncommittedValue<-2147483648);a.editorSpan.toggleClassName("has-error",t)}})),this.lineEditor.addEventListener("change",(function(e){"number"===a.options.config.type&&"float"!=a.options.config.typeRepresentation&&(a.lineEditor.value>2147483647||a.lineEditor.value<-2147483648)||(a._addChip(a.lineEditor.value),a.lineEditor._giveFocus())})));this.selectionChips=new o,this.selectionChips.inject(this.selectionChipsSpan);let s=this.model.get(this.options.config.name);if(s&&s.length>0){let e=0;s.forEach((t=>{let i,n;if("date"===this.options.config.type){let e=l.getIntlDateFormat(t);i=e.displayValue,n=e.actualValue}else if("checkbox"===this.options.config.type)i=t?r.TRUE_VALUE:r.FALSE_VALUE,n=t;else if("select"===this.options.config.type){const e=this._getConfigValues(t,!0);i=e.displayValue,n=e.actualValue}else i=t.toString(),n=t;a.selectionChips.addChip({label:i,index:e,value:n}),e++}))}this.selectionChips.addEventListener("change",(function(){a._setChipValuesToModel()}))}else{let t=this.model.get(this.options.config.name);if(t&&t.length>0){let i=[],n=new e.Element("ul");n.inject(this.editorSpan),t.forEach((t=>{let o;o="date"===a.options.config.type?l.getIntlDateFormat(t).displayValue:"checkbox"===this.options.config.type?t&&r.TRUE_VALUE||r.FALSE_VALUE:t,i.push({label:o});let s=new e.Element("li");s.inject(n),new e.Element("span",{class:"read-only",text:o}).inject(s)}))}}return this},_addChip:function(e,t){this.selectionChips.addChip({label:t||e,value:e}),this._setChipValuesToModel()},_getConfigValues:function(e,t){const i=this.options.config.values.find((i=>e===(t?i.actualValue:i.displayValue)));return{actualValue:i.actualValue,displayValue:i.displayValue}},_setChipValuesToModel:function(){let e=this.selectionChips.getAllChipsOptions(),t=[];e.forEach((e=>{t.push(e.value)})),this.model.set(this.options.config.name,t)},destroy:function(){this.attributeLabel.destroy(),this.lineEditor&&this.lineEditor.destroy(),this.datePicker&&this.datePicker.destroy(),this.editorContainer.destroy(),this.selectionChipsSpan&&this.selectionChipsSpan.destroy(),this.selectionChips&&this.selectionChips.destroy(),this.selectionChipsContainer&&this.selectionChipsContainer.destroy(),this.groupWrapper.destroy(),this.groupStackedFields.destroy(),this.multiValueContainer.destroy(),this._parent.apply(this,arguments)}});return c})),define("DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtTagUtils",["DS/ENOProjectMgmtCommonComponents/utils/PlatformManager","DS/ENOProjectMgmtModels/Models/AppSettings","DS/WAFData/WAFData"],(function(e,t,i){"use strict";return{getTagInfo:function(n,o){const s=(n.isRDF?t.get("6WTags"):t.get("3DSpace"))+"/resources/6w/tags?xrequestedwith=xmlhttprequest&tenant="+e.getTenant(),a={tag:[{subject:[{uri:"pid://"+n.id}]}]};i.authenticatedRequest(s,{method:"POST",headers:{"Content-Type":"application/json"},type:"json",data:JSON.stringify(a),onComplete:function(e){var t=[];e.results&&e.data&&e.data[0].tag.forEach((e=>{var i={};i.type=e.predicate.split(":")[1],i.value=e.object.literal,t.push(i)})),o.onComplete(t)},onFailure:function(){console.log("unable to get tags")}})}}})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtTagsView",["UWA/Core","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtTagUtils","DS/E6WCommonUI/Views/DetailsDisplaySharedView"],(function(e,t,i){"use strict";return i.extend({_uwaClassName:"ProjectMgmtTagsView",requiresReload:!0,id:function(){return"UserTags_"+this.cid},setup:function(t){let i=e.clone(t||{},!1);this._parent(i)},updateUserTags:function(e){this.container.empty(!0),this.render()},_createTag:function(t){let{type:i,value:n}=t;const o=e.createElement("div");o.style.display="flex",o.style.margin="1rem";const s=e.createElement("span");s.classList.add(`wux-ui-3ds-6w-${i}`),s.classList.add("wux-ui-3ds"),s.style.marginRight="1rem";const a=e.createElement("label");return a.innerHTML=n,s.inject(o),a.inject(o),o},_renderTags:function(t,i){if(!t.length){const t=e.createElement("label");return t.innerHTML="--",void t.inject(i)}this.tagContainer=e.createElement("div"),this.tagContainer.style.display="grid",this.tagContainer.style.width="100%",this.tagContainer.style.gridTemplateColumns="repeat(auto-fill, minmax(100px, 1fr))",t.forEach((e=>{this._createTag(e).inject(this.tagContainer)})),this.tagContainer.inject(i)},render:function(){let e=this,i=this.container;t.getTagInfo(this.model,{onComplete:function(t){e.currentTags=t,t.length&&e._renderTags(t,i).bind(e)}})}})})),define("DS/ENOProjectMgmtCommonComponents/utils/MatrixConfigCloneModel",["UWA/Core","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel","DS/ENOProjectMgmtCommonComponents/constants/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s){"use strict";let a,l;return n.extend({_uwaClassName:"MatrixConfigCloneModel",add:function(t,i,n){let o=e.clone(n||{},!1);if("configuredItems"===t)return o.sourceType="matrixConfiguration",o.refresh=!0,o.rmcType=o.model.get("rmcType"),void((i=this._addModel(t,i,o))&&i.length&&i.forEach((e=>{e.addEventOnce("onSync",this.handleWhereUsedOnSync.bind(this,{fieldName:t,whereUsedOptions:o}))})));this._parent(t,i,o)},validateMatirx:function(t){let i=!0,n=!0,o={fields:[],messages:{}},a=t.title;if(a){this._isString(a)&&a.trim().length||(i=!1,o.fields.push(s.INCORRECT_TITLE))}else i=!1,o.fields.push(s.CREATE_BLANK_TITLE_ALERT);let l=t.matrix;if(l&&e.is(l,"object")&&l)if(l.Xaxis&&l.Yaxis&&l.cells&&l.severity){let e=l.severity;(e&&this._isArray(e)&&e.length)>25?(i=!1,o.fields.push(s.ERROR_RISK_LEVEL_LIMIT)):i=this._validateRiskLevelsInfo(e,o,i);let t=l.Xaxis,a=t&&t.name;a&&this._isString(a)&&a.trim().length||(i=!1,o.fields.push(s.INCORRECT_AXIS_NAME));let r=t&&t.nodes,c=r&&this._isArray(r)&&r.length;(c<3||c>5)&&(i=!1,n=!1,o.fields.push(s.ERROR_NODES_LIMIT)),n&&(i=this._validateNodeInfo(r,o,i));let d=l.Yaxis,h=d&&d.name;h&&this._isString(h)&&h.trim().length||(i=!1,o.fields.push(s.INCORRECT_AXIS_NAME));let u=d&&d.nodes,m=u&&this._isArray(u)&&u.length;n&&(m<3||m>5)&&(i=!1,n=!1,o.fields.push(s.ERROR_NODES_LIMIT)),n&&(i=this._validateNodeInfo(u,o,i));let g=l.cells,p=g&&g.length;i&&p>25&&p!==c*m?(i=!1,o.fields.push(s.INVALID_TOTAL_CELLS)):i=this._validateCellsInfo(g,o,i,c,m,e)}else i=!1,o.fields.push(s.INVALID_CONFIGURATION_FORMAT);else i=!1,o.fields.push(s.NO_CONFIGURATION);return this.dispatchEvent("disableSaveButton",!i),this.dispatchEvent("onChangeImportFile",{isValid:i,errorMessage:o.fields&&o.fields.join(". ")}),i},compareCell:function(e,t){if(e.cells.length!==t.cells.length)return!1;for(let i=0;i<e.cells.length;i++){let n=e.cells[i],o=t.cells[i];if(n.Xvalue!==o.Xvalue||n.Yvalue!==o.Yvalue)return!1}return!0},_validateRiskLevelsInfo:function(e,t,i){let n=this;return a={},e&&e.forEach((function(e,o){if(!i)return;let l=e.riskLevel;if(a[l])i=!1,t.fields.push(s.DUPLICATE_RISK_LEVEL);else{a[l]=l;let o=l&&n._isNumber(l)&&l.trim().length,r=e.name,c=e.backgroundColor,d=e.textColor,h=r&&n._isString(r)&&r.trim().length,u=c&&n._isValidColor(c),m=d&&n._isValidColor(d);(!i||o)&&h&&u&&m||(i=!1,t.fields.push(s.INCORRECT_RISK_LEVEL_VALUE))}})),i},_validateNodeInfo:function(e,t,i){let n=this;return e&&e.forEach((function(e,o){if(!i)return;let a=e.label,l=a&&n._isString(a)&&a.trim().length,r=e.value&&Number(e.value);(i&&!l||r!==o+1)&&(i=!1,t.fields.push(s.INCORRECT_NODES_VALUE))})),i},_validateCellsInfo:function(e,i,n,o,a,r){let c=this;return l={},e&&e.forEach((function(e){if(!n)return;let d=e.Xvalue,h=e.Yvalue,u=d+h;if(l[u])n=!1,i.fields.push(s.DUPLICATE_CELL_XY_VALUE);else{l[u]=u;let m=e.defaultCellId,g=void 0===m;m&&(g=m&&c._isNormalInteger(m)&&m>0&&m<=25);let p=e.riskLevel,C=p&&c._isString(p)&&p.trim().length&&Boolean(t.findObject(r,"riskLevel",p)),f=d&&c._isNormalInteger(d)&&d<=o,E=h&&c._isNormalInteger(h)&&h<=a,D=e.rpn,w=D&&Number(D)&&D>0;(!n||g)&&f&&E&&C&&w||(n=!1,i.fields.push(s.INCORRECT_CELLS_VALUE))}})),n},handleWhereUsedOnSync:function(e,t){let n,o=e.fieldName,a=e.whereUsedOptions,l=t.get("configuration"),r=l&&l.length&&l[0];if(r&&"TRUE"!==r.resolved){n='"'+(t.get("title")||t.get("name"))+'" '+s.OBJECT_ALREADY_ASSOCIATED+' "'+(r.title||r.name)+'"'}else t.isXPlanObject()&&!t.canCreate()&&(n=s.NO_RMC_ACCESS);if(n)return i.buildNotification({message:n},"error"),void(!this.model.isNew()&&!Object.keys(this.localAttributes).length&&this.dispatchEvent("disableSaveButton",!0));a.changed=Boolean(!n),this.setRelatedItemData(o,t,a)},isDefault:function(){let e=this.get("name");return e===o.DEFAULT||e===o.DEFAULT_OPPORTUNITY},_isValidColor:function(e){e=e.toLowerCase();let t=(new Option).style;t.color=e;let i=t.color===e,n=/^#[0-9A-F]{6}$/i.test(e);return Boolean(i||n)},_isNumber:function(t){return e.is(Number(t),"number")},_isString:function(t){return e.is(t,"string")},_isArray:function(t){return e.is(t,"array")},_isNormalInteger:function(e){return/^(0|[1-9]\d*)$/.test(e)}})})),define("DS/ENOProjectMgmtCommonComponents/config/LinkTabConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/LinkViewConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i){"use strict";let n=e.extend({_uwaClassName:"LinkTabConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"tab",hide:!0,values:[{name:i.PROPERTIES,key:"properties",selected:!0,config:t,checkFlag:!0}]});return n._instance=n._instance||new n,n._instance})),define("DS/ENOProjectMgmtCommonComponents/config/ProfileActionButtonConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i){"use strict";let n=e.extend({_uwaClassName:"ProfileActionButtonConfig",type:"actionButtons",columnInfo:{},setup:function(){this.setColumnInfo()},values:[{name:"delete",value:"delete",text:i.DELETE,label:i.DELETE,fonticon:"trash"}],getItems:function(e){if(!e)return;let i,n,o=[],s=e.getActionsAttrsAccessMap().canDelete;return this.values.forEach((function(e){if(e.name===t.DELETE)i=Boolean(!s);n=UWA.clone(e||{},!1),n.className=i?"disabled":"",o.push(n)})),o}});return n._instance=n._instance||new n,n._instance})),define("DS/ENOProjectMgmtCommonComponents/config/TabProfileConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/ProfilesPropertiesConfig","DS/ENOProjectMgmtCommonComponents/config/ProfileActionButtonConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n){"use strict";let o=e.extend({_uwaClassName:"TabProfileConfig",columnInfo:{},type:"tab",hide:!0,setup:function(){this.setColumnInfo()},actionButtonConfig:function(e){return!(e&&e.isCreate)&&i},values:[{name:n.PROPERTIES,key:"properties",selected:!0,fields:"title,name,description,typeicon,image,modifyAccess,deleteAccess",config:t,checkFlag:!0}]});return o._instance=o._instance||new o,o._instance})),define("DS/ENOProjectMgmtCommonComponents/config/ProjectImportViewConfig",["UWA/Core","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i){"use strict";let n=t.extend({_uwaClassName:"ProjectImportViewConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"basic",values:[{label:"Project Data",name:"title",relatedFieldsToSave:["chunks","identifier","projectUpdate"],type:"textarea",readWrite:!0,numberOfDisplayLines:1e3,numberOfEditableLines:1e3,maxLength:1e4,validate:!0}]});return n._instance=n._instance||new n,n._instance})),define("DS/ENOProjectMgmtCommonComponents/config/ProjectImportConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/ProjectImportViewConfig"],(function(e,t){"use strict";let i=e.extend({_uwaClassName:"ProjectImportConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"tab",hide:!0,values:[{name:"",key:"title",selected:!0,config:t,checkFlag:!0}]});return i._instance=i._instance||new i,i._instance})),define("DS/ENOProjectMgmtCommonComponents/views/DetailsDisplayFooter",["UWA/Class","DS/Controls/Button","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n){"use strict";return e.extend({_uwaClassName:"DetailsDisplayFooter",parentView:void 0,closeButton:void 0,saveButton:void 0,cancelButton:void 0,init:function(e,i){let o=this;this.container=e,this.parentView=i,o.saveButton=new t({domId:"saveButton",label:n.SAVE,emphasize:"primary"}).inject(this.container),o.cancelButton=new t({domId:"cancelButton",label:n.CANCEL,emphasize:"secondary"}).inject(this.container),o.closeButton=new t({domId:"closeButton",label:n.CLOSE,emphasize:"secondary"}).inject(this.container),o.initialiseSaveEventChangeListener(),o.initialiseCancelEventChangeListener(),o.initialiseCloseEventChangeListener()},initialiseSaveEventChangeListener:function(){let e=this;e.saveButton.removeEventListener("buttonclick"),e.saveButton.label=n.SAVE,e.saveButton.getContent().addEventListener("buttonclick",(function(){e.parentView.save()}))},initialiseCancelEventChangeListener:function(){let e=this;e.cancelButton.removeEventListener("buttonclick"),e.cancelButton.label=n.CANCEL,e.cancelButton.getContent().addEventListener("buttonclick",i.validateModificationsPending.bind(void 0,{dontResetModel:!0,parentView:this.parentView.parentView.parentView,yesEventFunc:this.parentView.cancelCreateOrEdit.bind(this.parentView)}))},initialiseCloseEventChangeListener:function(){let e=this;e.closeButton.removeEventListener("buttonclick"),e.closeButton.label=n.CLOSE,e.closeButton.getContent().addEventListener("buttonclick",(function(){e.parentView.hideRightPanel()}))},showSaveCancelFooter:function(e){e?this.container&&this.container.addClassName("save-needed"):(this.container&&this.container.removeClassName("save-needed"),this.saveButton.disabled=!1)},destroy:function(){this.container.classList.add("footerContainer"),this.saveButton.destroy(),this.cancelButton.destroy(),this.closeButton.destroy()}})})),define("DS/ENOProjectMgmtCommonComponents/views/MultiValueCustomViewAutoComplete",["UWA/Core","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r){"use strict";let c=n.extend({_uwaClassName:"MultiValueCustomViewAutoComplete",setup:function(t){this.options=e.clone(t||{},!1),this.model=this.options.model,this.fieldName=this.options.fieldName||"permissions",this.sourceType=this.options.sourceType||"projects",this.subLabel=this.options.subLabel||"projectAccess",this.typeRepresentation=this.options.typeRepresentation||"detailedUser",this._parent.apply(this,arguments)},render:function(t){let n=this,a=e.clone(t||{},!1),l=a.autoCompleteOptions||{};return this.spaceInfo=a.spaceInfo,this.container.empty(!0),this._buildContainers(),this.autoComplete=new i({elementsTree:function(e){return new Promise((function(t,i){let a={onFailure:function(e){o.buildNotification(e||{},"error"),i(e)},sendSecurityContext:!0};return s.typeAheadCallback(n.options.config,e,(function(e){let i=n.onSearchCallback(e);t(i)}),a)}))},allowFreeInputFlag:l.allowFreeInputFlag||!1,multiSearchMode:l.multiSearchMode||!0,minLengthBeforeSearch:l.minLengthBeforeSearch||3,keepSearchResultsFlag:l.keepSearchResultsFlag||!1,columnOptions:l.columnOptions||{autoRowHeightFlag:!0,typeRepresentation:this.typeRepresentation}}),this.autoComplete.addEventListener("change",this.autoCompleteOnChange.bind(this)),this.autoComplete.inject(this.selectionChipsSpan),this},onSearchCallback:function(e){let t=this,i=t.model.get(t.fieldName),n=[];return e&&e.length&&e.forEach((e=>{let o=e.value;if(!t._isItemAlreadyExistsInViews(o)){let s=i.get(o),l="Person"===e["ds6w:type"],r=t._getCollabspaceRoles(e,l);if(t._config.name!=a.READER||!r||!r.includes("VPLMProjectLeader")){let i={value:{label:e.label+("detailedUser"===t.typeRepresentation&&l?" ("+e.name+")":""),name:"detailedUser"===t.typeRepresentation&&(e.name||e.label),subLabel:t._getSubLabelString(s,r),sourceId:e.sourceId,image:e.image,type:e["ds6w:type"],value:o}};n.push(i)}}})),n},autoCompleteOnChange:function(){let e,t=this,i=[],n={detailedObjects:i,config:this._config,ignoreIfAlreadyExists:!0,donotDeleteId:!0,isRelatedDataItem:this._config&&this._config.isRelatedDataItem},o=this.model.get(this.fieldName);this.autoComplete.value.forEach(((n,o)=>{let s={id:n.value,sourceId:n.sourceId,sourceType:t.sourceType,login:n.name,name:n.name,type:n.type,additionalData:[{dataName:t.subLabel,dataValue:t._config.name===a.LEADER?"Project Lead":"Project Member"}],model:t.model};0===o?e=n.value:e+=","+n.value,i.push(s)})),e&&this.model.add(this.fieldName,e,n);let s=this._getAllViewValues();o.relatedDataToAdd.forEach((e=>{t._findInAllViews(s,e.id)||t.model.remove(t.fieldName,e.id,{config:t._config})}))},_getSubLabelString:function(e,t){let i=e&&this.subLabel?e.get(this.subLabel):void 0,n=i?r[i]||i:void 0,o=t.length?t.map((e=>r[e]||e)):[];return n&&!o.includes(n)&&o.unshift(n),o.join(" | ")},_getCollabspaceRoles:function(e,t){let i=[],n=t?this.spaceInfo.get("members"):this.spaceInfo.get("groupmembers");if(!n)return i;for(let o=0;o<n.length;o++){let s=n[o];if(t&&s.name===e.name||s.uri===l.removeBracketLongURI(e.value)){s.couples.forEach((e=>i.push(e.role.name)));break}}return i},_buildContainers:function(){this.model.model.isNew()||this.model.model.canModify()&&this.options.config.readWrite;this.multiValueContainer=e.createElement("div",{class:"editable"}),this.multiValueContainer.inject(this.container),this.attributeLabel=new e.Element("label",{text:this.options.config.label}),this.options.config.required&&(this.requiredLabel=new e.Element("span",{text:"*",class:"required-field-indicator"}),this.requiredLabel.inject(this.attributeLabel)),this.attributeLabel.inject(this.multiValueContainer),this.groupStackedFields=e.createElement("div",{class:"field-group stacked-fields"}),this.groupStackedFields.inject(this.multiValueContainer),this.groupWrapper=e.createElement("div",{class:"input-group-wrapper"}),this.groupWrapper.inject(this.groupStackedFields),this.editorContainer=e.createElement("div",{class:"input-group"}),this.editorContainer.inject(this.groupWrapper),this.editorSpan=e.createElement("span",{class:"input-element"}),this.editorSpan.inject(this.editorContainer),this.selectionChipsContainer=e.createElement("div",{class:"input-group"}),this.selectionChipsContainer.inject(this.groupWrapper),this.selectionChipsSpan=e.createElement("span",{class:"input-element"}),this.searchContainer=e.createElement("div",{class:"input-group"}),this.searchContainer.inject(this.groupWrapper),this.searchSpan=e.createElement("span",{class:"input-element"}),this.selectionChipsSpan.inject(this.selectionChipsContainer),this.searchSpan.inject(this.searchContainer)},_findInAllViews:function(e,t){let i=!1;for(let n=0;n<e.length&&(i=e[n].value===t,!i);n++);return i},_getAllViewValues:function(){let e=this.autoComplete.value;if(this._config.relatedViews&&this._config.relatedViews.length)for(let t=0;t<this._config.relatedViews.length;t++){let i=this._findRelatedViewConfig(this._config.relatedViews[t]),n=i&&this._parentView.getChildViewBasedOnConfig(i),o=n&&n.autoComplete.value;o&&o.length&&(e=e.concat(o))}return e},_isItemAlreadyExists:function(e,t){let i=!1;if(e.value)for(let n=0;n<e.value.length;n++){if(e.value[n].value===t){i=!0;break}}return i},_findRelatedViewConfig:function(e){for(let t=0;t<this._parentView._config.length;t++)if(this._parentView._config[t].name===e)return this._parentView._config[t]},_isItemAlreadyExistsInViews:function(e){let t=!1;if(t=this._isItemAlreadyExists(this.autoComplete,e),!t&&this._config.relatedViews&&this._config.relatedViews.length)for(let i=0;i<this._config.relatedViews.length;i++){let n=this._findRelatedViewConfig(this._config.relatedViews[i]),o=n&&this._parentView.getChildViewBasedOnConfig(n);if(t=o&&this._isItemAlreadyExists(o.autoComplete,e),t)break}return t},destroy:function(){this.attributeLabel.destroy(),this.lineEditor&&this.lineEditor.destroy(),this.datePicker&&this.datePicker.destroy(),this.editorContainer.destroy(),this.selectionChipsSpan&&this.selectionChipsSpan.destroy(),this.selectionChips&&this.selectionChips.destroy(),this.selectionChipsContainer&&this.selectionChipsContainer.destroy(),this.groupWrapper.destroy(),this.groupStackedFields.destroy(),this.multiValueContainer.destroy(),this._parent.apply(this,arguments)}});return c})),define("DS/ENOProjectMgmtCommonComponents/config/MatrixConfigActionButtonConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t){"use strict";let i=e.extend({_uwaClassName:"MatrixConfigActionButtonConfig",type:"actionButtons",columnInfo:{},setup:function(){this.setColumnInfo()},values:[{name:"export",value:"export",text:t.EXPORT,title:t.EXPORT,fonticon:"export"},{name:"delete",value:"delete",text:t.DELETE,title:t.DELETE,fonticon:"trash"}],getItems:function(e,t){if(!e)return;let i,n,o=[],s=UWA.clone(t||{},!1),a=s.isDefault,l=s.isCreateNewSelected;return this.values.forEach((function(t){switch(t.name){case"export":i=l;break;case"delete":i=a||!e.canDelete()}n=UWA.clone(t||{},!1),n.className=i?"disabled":"",o.push(n)})),o}});return i._instance=i._instance||new i,i._instance})),define("DS/ENOProjectMgmtCommonComponents/views/DetailsDisplay",["UWA/Core","UWA/Promise","DS/E6WCommonUI/Models/BulkModel","DS/E6WCommonUI/Models/BulkCloneModel","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel","DS/DocumentManagement/DocumentManagement","DS/E6WCommonUI/Views/DetailsDisplayView","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtMultiDetailsDisplayView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css"],(function(e,t,i,n,o,s,a,l,r,c,d){"use strict";let h=e.Class.View.extend({_uwaClassName:"DetailsDisplay",container:void 0,detailsDisplayView:void 0,parentView:void 0,model:void 0,customViewInitialized:!1,height:void 0,setup:function(e,t,i){this.container=e,this.parentView=t,this.height=t.getHeight(),this.model=i,i.isBulkCloneModel?this.detailsDisplayView=new l({DocumentManagement:s,homeView:this.parentView,model:i,displayMessage:c.displayMessage}):this.detailsDisplayView=new a({DocumentManagement:s,homeView:this.parentView,model:i,displayMessage:c.displayMessage}),this.listenTo(this.model,"onValidationSuccess",this.clearValidationErrors)},setConfig:function(e){this._config=e},render:function(e){if(!this._config)return;this.container.empty();let t=this._config.cloneConfig(!0);if(this.detailsDisplayView.setConfig(t.values),this.detailsDisplayView.render(e).inject(this.container),!this.model.isBulkCloneModel){let e=Object.keys(this.model.localAttributes),t=Object.keys(this.model.localRelatedItems);e.length||t.length||(delete this.model.modificationsPending,this.parentView.showSaveCancelFooter(!1))}this.handleEvents()},handleEvents:function(){this.model.removeEvent("resetDetailsDisplay"),this.listenTo(this.model,{resetDetailsDisplay:this.resetConfigAndRender})},resetModel:function(e){this.detailsDisplayView.resetModel(e)},reRender:function(){this.detailsDisplayView&&this.detailsDisplayView.render()},acceptChanges:function(e){this.resetConfigAndRender(e)},resetConfigAndRender:function(e){this.setConfig(e||this._config),this.render(),this.parentView.updateScrollPosition()},getFieldViewByName:function(){return this.detailsDisplayView&&this.detailsDisplayView.getFieldViewByName.apply(this.detailsDisplayView,arguments)},clearValidationErrors:function(){for(var e=this.container.getElements(".has-error"),t=0;t<e.length;t++)e[t].toggleClassName("has-error",!1)},destroy:function(){this.stopListening(),this.detailsDisplayView&&(this.detailsDisplayView.destroy(),delete this.detailsDisplayView)}});return h})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtDetailsAndRelationships",["UWA/Core","UWA/Class/View","DS/Controls/Tab","DS/Controls/Button","DS/Controls/TooltipModel","DS/UIKIT/Scroller","DS/UIKIT/DropdownMenu","DS/PlatformAPI/PlatformAPI","DS/ENXHistoryUX/View/HistoryFacet","DS/ENOProjectMgmtCommonComponents/views/DetailsDisplay","DS/ENOProjectMgmtCommonComponents/views/DetailsDisplayFooter","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtTrendView","DS/ENOProjectMgmtCommonComponents/views/DateCustomView","DS/ENOProjectMgmtCommonComponents/views/MultiValueCustomView","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/components/ProgressSpinner","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Utils/FederatedSearch","text!DS/ENOProjectMgmtCommonComponents/assets/templates/template_RightPanel.html.handlebars","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css"],(function(e,t,i,n,o,s,a,l,r,c,d,h,u,m,g,p,C,f,E,D,w,M){"use strict";let _,S=0,b=1,y=2,N=3,P=t.extend({_uwaClassName:"ProjectMgmtDetailsAndRelationships",init:function(t,i){let n=e.clone(i||{},!1);if(this.options=n,this.parentContainer=t,this.isCreate=n.isCreate,this.parentView=n.parentView,this._appConfig=n.appConfig,this._tabConfig=this._getTabConfig(n),this._viewCollection=n.viewCollection,this._viewConfig=n.viewConfig,this._createConfig=n.createConfig,this._matrixConfigCollection=i.matrixConfigCollection,this.context=n.context,this.parentCloneModel=n.parentCloneModel,this.editModel=n.editModel,this.handleDeletionCb=n.handleDeletionCb,this._isExternalComponent=n._isExternalComponent,this.closePanel=n.closePanel,this.relatedView={},this.scrollElements={},this.detailsDisplayBodyContainers={},this.detailsContainer=e.createElement("div",{id:"objectInfoContainer"}),this.detailsContainer.setHTML(w),this.detailsContainer=this.detailsContainer.getElement(".object-properties"),this.propertiesBodyContainer=this.detailsContainer.getElement(".object-properties-body"),!this.isRMCContext){let e=this.detailsContainer.getElement(".object-properties-list");e&&e.remove()}this.buildTabBarContainer(n),this.addActionButtonAndOperations(),this.isCreate||(this.isRMCContext||(this.clearRightPanelContent(this.parentContainer),this.detailsDisplayFooterContainer=this.detailsContainer.getElement(".object-properties-footer"),this.detailsDisplayFooter=new d(this.detailsDisplayFooterContainer,this)),this.detailsContainer.inject(this.parentContainer))},clearRightPanelContent:function(e){if(e){e.getElements(".object-properties").forEach((e=>e.remove()))}},reset:function(){this.destroyDetailsDisplayTabContent();for(let e in this.scrollElements)this.scrollElements.hasOwnProperty(e)&&this.scrollElements[e].destroy();this.scrollElements={},this._isPropertyPanelOpen=!1,this.currentModel&&this.currentModelEvents&&this.currentModel.removeEvents(this.currentModelEvents),delete this.currentTab,delete this.currentModel,delete this.currentModelEvents,delete this._isPropertyPanelOpen},getConfigForCreate:function(e){return this.getRepeatCheckboxValue()&&e?f.findObject(this._tabConfig.values,"key",e):this._tabConfig.values[0]},render:function(t){let i=this,n=e.clone(t||{},!1);this._initialLoad=!n.hasOwnProperty("initialLoad")||n.initialLoad;n.hasOwnProperty("repeat")&&n.repeat;this.showSpinnerView(this.detailsContainer,M.FETCHING),this.isCreate||this.isRMCContext||(this.clearRightPanelContent(this.parentContainer),this.detailsContainer.inject(this.parentContainer));let o=this.currentTab&&this.currentTab.key;if(this.reset(),this.isDelete)return this.detailsContainer;if(this.isCreate)this.createData(this.getConfigForCreate(o),n);else if(this.editModel){let e=this.getConfigForCreate(o);this.currentModel=new this._viewCollection.CloneModel(this.editModel,{config:e.config}),this.handleGetDataResponse()}else{this._isPropertyPanelOpen=!0,n.model&&(this.currentModel=this._viewCollection.createClonedModel(n)),this._viewCollection.getDataModelDetails(n).then((e=>i.handleGetDataResponse(e,n.selectedModels)))}return this.detailsContainer},handleDetailsDisplay:function(e,t){let i=this.showDetailsDisplay(e,void 0,t);i&&i.error?(this.parentView.showHideRightPanel(!1),g.buildNotification(i||{},"error")):(this._initialLoad&&this.handleInitialOpenPropertyPanel(),this.updateScrollPosition(),delete this._initialLoad)},handleInitialOpenPropertyPanel:function(){delete this.currentModel.modificationsPending,this.currentModel.dispatchEvent("onChange:modificationsPending"),this.isNew&&this.currentModel.dispatchEvent("onValidationSuccess")},getSelectedTabKey:function(){let e=this.ddTabBar&&this.ddTabBar.tabBar,t=e&&e.getButtonFromValue(this.ddTabBar.value);return t&&t[0].domId},processTabContentRenderView:function(){this.ddTabBar.fire("tabButtonClick")},handleGetDataResponse:function(e,t){let i=this.selectedRowsCount;if(this.selectedRowsCount=t?t.length:this._viewCollection.treeDocument&&this._viewCollection.treeDocument.getSelectedNodeModels().length,this.selectedRowsCount>1&&(this.currentModel=this._viewCollection.createClonedModel({model:this._viewCollection.createBulkModel(t)})),this.ddTabBar?(i>1!=this.selectedRowsCount>1&&(this.ddTabBar.destroy(),this.ddTabBar=void 0,this._tabConfig=void 0,this.buildTabBarContainer(this.options)),this.processTabContentRenderView(),this.options.initialTab&&(this.ddTabBar.destroy(),this.ddTabBar=void 0,this.buildTabBarContainer(this.options))):this.handleDetailsDisplay(),this.options.initialTab){const e=this._tabConfig.columnInfo[this.options.initialTab].valueIndex;if(e){let t=this.ddTabBar.tabBar.buttonGroup.getButton(e);t.clickMode=0,t.fire("click")}delete this.options.initialTab}this.hideSpinnerView(this.detailsContainer)},getDetailsDisplayDivContent:function(t){return e.createElement("div",{id:t+"Container",class:"details-display-container"})},addScroller:function(t,i,n){if(this.propertiesBodyContainer){this.scrollElements[t]=new e.createElement("div",{id:"scrollerElement"}),this.scrollElements[t].setStyle("height",this.getHeight()+"px"),i&&i.inject(this.scrollElements[t]);let o=new s({element:this.scrollElements[t],scrollbars:n&&n.doNotShowScrollers?"No":"auto"});o.elements.content.addEventListener("scroll",(()=>this.dropdown&&this.dropdown.destroy())),o.inject(this.propertiesBodyContainer),this.relatedView[t].scroller=o}},getScroller:function(e){let t=e;return this.relatedView&&this.currentTab&&(t=this.relatedView[this.currentTab.key]),t&&t.scroller},updateScrollPosition:function(){let e=this.getScroller();if(e){let t=e._previousInfos;t&&e.scrollTo(t.x.scrollPosition,t.y.scrollPosition)}},buildTabBarContainer:function(t){let n=e.clone(t||{},!1);if(this._tabConfig||(this._tabConfig=this._getTabConfig(n)),this._tabConfig.hide)return;let s=this.detailsContainer.getElement(".object-properties-tabs");this.ddTabBar=new i({id:"detailsPanelTab",displayStyle:"strip",showComboBoxFlag:!1}),this.ddTabBar.inject(s);let a=this._tabConfig.values,l=a.length;for(let e=0;e<l;e++){let t=a[e];if("classification"!==t.key||t.doNotShowTab||(t.doNotShowTab=!this._viewConfig.isLibraryInstalled()),!t.doNotShowTab){this.ddTabBar.add({isSelected:t.selected,icon:{iconName:t.font,fontIconFamily:WUXManagedFontIcons.Font3DS},tooltipInfos:new o({shortHelp:t.name}),type:"radio",checkFlag:t.checkFlag}).button.domId=t.key}}this.initializeTabEvents()},initializeTabEvents:function(){let t=this.ddTabBar.tabBar,i=t.buttonGroup,n=t.showNextButton||t._showNextButton,o=t.showPreviousButton||t._showPreviousButton;this.ddTabBar.addEventListener("dragenter",(function(t){let n=t.target.dsModel,o=n&&n.value;if(e.is(o,"number")&&o>=0){let e=i.getButton(o);e.clickMode=0,e.fire("click")}})),n&&n.addEventListener("dragenter",(function(){!n.disabled&&n.fire("click")})),o&&o.addEventListener("dragenter",(function(){!o.disabled&&o.fire("click")})),this.ddTabBar.addEventListener("tabButtonClick",this.handleTabBarActionEvents.bind(this))},handleTabBarActionEvents:function(e){let t=e.target.dsModel.value;if(t){let e=this.ddTabBar.tabBar.getButtonFromValue(t)[0].domId,i=this._tabConfig.columnInfo[e];this.currentTab=i,this.currentTabView=this.relatedView[e],"riskTrend"===e?this.relatedView[e]&&this.relatedView[e].reload():"history"===e&&this.relatedView[e]&&this.initHistoryFacet();for(let t in this.relatedView)e!==t?this.scrollElements[t].hide():this.scrollElements[t].show();let n=this.relatedView[e];n?n.resetConfigAndRender&&n.resetConfigAndRender():this.handleDetailsDisplay(i)}},_setFieldReadWrite:function(t,i){let n=this.currentTab.config.columnInfo[t];if(n){let t=this.currentModel.model[i];i=e.is(t,"function")?t.apply(this.currentModel.model):i,n.readWrite=Boolean(i)}},_setFieldDisabled:function(t,i){let n=this.currentTab.config.columnInfo[t];if(n){let t=this.currentModel.model[i];i=e.is(t,"function")?t.apply(this.currentModel.model):i,n.disable=Boolean(i)}},_setFieldHidden:function(e,t){let i=this.currentTab.config.columnInfo[e];i&&(t=i.expression&&void 0===t?"true"!==E.get(i.expression):t)&&(i.type&&(i.type="hidden"),i.buttonType&&(i.buttonType="hidden"),i.customView&&delete i.customView,i.multiCustomView&&delete i.multiCustomView,delete i.readWrite)},cancelCreateOrEdit:function(){if(this._isExternalComponent){let e=this.currentModel.get("title").toString(),t=this,i=this.save.bind(this),n={dontResetModel:!0,title:M.SAVE+` ${e}`,message:M.CANCEL_CONFIRMATION_MESSAGE,yesEventFunc:function(){i(),this.closePanel&&this.closePanel()}.bind(this),noEventFunc:function(){t.currentModel.isBulkCloneModel?t.currentModel.models.forEach((e=>{t.currentModel=e,t.currentModel.cancel()})):t.currentModel.cancel(),t.showSaveCancelFooter(!1),t.closePanel&&t.closePanel()},yesLabel:M.SAVE,noLabel:M.DONT_SAVE,cancel:{label:M.CANCEL}};g.confirmDialog(n)}else this.cancelEdit()},cancelEdit:function(){if(this.currentModel=this.currentModel||this._viewCollection.getCurrentDataModel(void 0),this.currentModel.isBulkCloneModel){let e=this.currentModel;this.currentModel.models.forEach((e=>{this.currentModel=e,this.currentModel.cancel(),delete this.currentModel})),this.currentModel=e}this.currentModel?(this.currentModel.isBulkCloneModel||(this.currentModel.cancel(),delete this.currentModel),this.resetDetailsAndRealtionshipsView()):(this.destroyDetailsDisplayTabContent(),this.showSaveCancelFooter(!1))},resetDetailsAndRealtionshipsView:function(){this._viewCollection.reselectCurrentDataModel(this.selectedRowsCount>1)},getActionButtonConfig:function(){let t=this._tabConfig.actionButtonConfig;return e.is(t,"function")?t.apply(this,[{isCreate:this.isCreate}]):t},addActionButtonAndOperations:function(){let e=this;if(this._actionButtonConfig=this.getActionButtonConfig(),!this._actionButtonConfig)return;let t=e.detailsContainer.getElement(".object-properties-actions");this.actionsButton=new n({displayStyle:"lite",domId:"actionsButton",emphasize:"secondary",icon:{iconName:"fonticon fonticon-chevron-down site-icon",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"},tooltipInfos:new o({shortHelp:M.ACTIONS}),checkFlag:!1}).inject(t),this.actionsButton.getContent().addEventListener("buttonclick",f.validateModificationsPending.bind(void 0,{dontResetModel:!0,parentView:e.parentView.parentApp,yesEventFunc:e.createActionsDropdownMenu.bind(e)}))},createActionsDropdownMenu:function(e){let t=this._actionButtonConfig.getItems(this.currentModel.model,e);this.dropdownMenu&&this.dropdownMenu.destroy(),this.dropdownMenu=new a({target:this.actionsButton.getContent(),items:t,events:{onClick:this.handleActionButtonEvents.bind(this)}}),this.dropdownMenu.show()},handleActionButtonEvents:function(e,t){let i=t.name;switch(i){case C.DELETE:case C.REMOVE:this.handleDeleteAction({operation:i});break;case C.DUPLICATE:this._viewCollection.duplicateDataModels({operation:i,isSelect:this.isPropertyPanelOpen()});break;case C.LINK:f.getCopyLinkURL(this.currentModel),g.buildNotification({message:M.LINK_COPY_TO_CLIPBOARD},"success");break;case C.COMPLETE:case C.RE_OPEN:if(this.currentModel.isBulkCloneModel){let e=this.currentModel;this.currentModel.models.forEach((e=>{this.currentModel=e,this.handleStateActionButtons(i)})),this.currentModel=e}else this.handleStateActionButtons(i)}},handleStateActionButtons:function(e){this.currentModel.cancel();let t=e===C.COMPLETE?C.COMPLETE_STATE:C.IN_WORK_STATE;this.currentModel.handleAttrsUpdateForActions(C.STATE_ATTR,t)},createData:function(t,i){let n=e.clone(i||{},!1),o=!!n.hasOwnProperty("repeat")&&n.repeat;if(n.model)this.currentModel=n.model;else{let i=n.modelIntializationOption?e.clone(n.modelIntializationOption,!1):n,o=e.clone(i.attributes||{},!1);this.context&&(i.attributes=o,i.attributes.context=this.context),this.currentModel=this._viewCollection.getNewDataModel(t.config,i)}this.CreateOrEdit(t,i),this.updateStateOfFooterButtons(!o),this.hideSpinnerView()},CreateOrEdit:function(e,t){this.handleDetailsDisplay(e,t),this.showSaveCancelFooter(!0)},modelChanged:function(e){this.showSaveCancelFooter(e)},initializeEvents:function(t){let i=e.clone(t||{},!1);this.currentModelEvents={submitSave:this.save,"onChange:modificationsPending":this._notifyChanges,disableSaveButton:this.updateStateOfFooterButtons,onChange:function(e,t){let i=t&&t.config||t;i&&this.handleTabCustomRender(i.name,e)}},Object.keys(i).length&&e.extend(this.currentModelEvents,i),this.listenTo(this.currentModel,this.currentModelEvents),this.listenTo(this.currentModel.model,"onChange:"+C.ASSIGNEE_ATTR,this.handleTabCustomRender.bind(this,C.ASSIGNEE_ATTR))},isMembersTab:function(){return Boolean("members"===this.currentTab.key&&this.currentTabView&&this.currentModel)},handleTabCustomRender:function(e){switch(e){case"members":this.isMembersTab()&&(this._membersTab=this.currentTabView),this.handleAssigneesFieldCustomBtns();break;case C.ASSIGNEE_ATTR:this.handleAssigneesFieldCustomBtns()}},handleAssigneesFieldCustomBtns:function(){if(this._membersTab&&(!this.currentModel||!this.currentModel.isBulkCloneModel)){let e,t,i=[],n=f.isSelfAssigned(this.currentModel),o=this.currentModel&&this.currentModel.model,s=o&&o.canModifyTask(this.context||E.get("context")),a=s&&(o.canModify()||this.isCreate),l=s&&(o.canToConnect()||this.isCreate);this._membersTab._config.getAssigneesCustomButtons().forEach((o=>{switch(o.id){case C.ASSIGN_TO_SELF:t="add",e=a&&l&&!n;break;case C.REMOVE_ASSIGN_TO_SELF:t="remove",e=a&&n}e&&(o.callback=this.currentModel.handleAssigneeUpdate.bind(this.currentModel,t),i.push(o))}));let r=this._membersTab._config.columnInfo.assignees;r&&(r.customButtons=i),this.currentModel&&this.currentModel.updateDetailsDisplay()}},displayTabBarAndActionButtons:function(){let e=this.detailsContainer.getElement(".object-properties-tabs");this.detailsContainer.getElement(".object-properties-actions").toggleClassName("hide",!this._actionButtonConfig),!this._actionButtonConfig&&e.toggleClassName("hide",Boolean(this._tabConfig.hide||1===this._tabConfig.values.length))},updateContextFieldReadWrite:function(t){let i,n=(t=t||this.currentTab.config)&&t.columnInfo.context;if(n&&(i=n.readWrite,i=e.is(i,"string")?Boolean(i):i),this.currentTab.checkFlag&&n&&e.is(i,"boolean")){let e=!1;if(this.isNew)e=!this.context;else{let t=this.currentModel.getContextModel();e=Boolean(!t||t.canReadAccess())}n.readWrite=e}},showDetailsDisplay:function(e,t,i){if(e||(e=this._tabConfig.getDefaultTab(t)),this.currentTab=e||this.currentTab,this.currentModel||(this.currentModel=this._viewCollection.getCurrentDataModel(void 0)),!this.currentModel)return;this.isNew=this.currentModel.isNew,this.isNew||(this._checkAccess(),this._isPropertyPanelOpen=!0),this.updateContextFieldReadWrite();let n=this.currentTab.key;switch(n){case"comments":this._addComments();break;case"relations":this._addRelation();break;case"classification":this._addClassification();break;case"history":this._addHistory();break;default:this.currentTab.isCustom?this._addCustomTabContent():this._addDetailsTabContent(void 0,i)}this.currentTabView=this.relatedView[n],this.initializeEvents(),this.displayTabBarAndActionButtons(),this.handleTabCustomRender(this.currentTab.key)},isPropertiesTab:function(){return Boolean("properties"===this.currentTab.key&&this.currentTabView&&this.currentModel)},isClassificationTab:function(){return Boolean("classification"===this.currentTab.key&&this.currentTabView&&this.currentModel)},_addDetailsTabContent:function(t,i){let n,o=!0,s=this.currentTab.key,a=this.currentTab.config,l=t||a;if(this.relatedView[s]||(n=this.getDetailsDisplayDivContent(s),this._addRelatedView(s,n,l),this.addScroller(s,n),this.detailsDisplayBodyContainers[s]=n),l){let t=l.handleCustomFieldConfigs(this.isNew,this.currentModel,this._viewConfig,{DateCustomView:u,MultiValueCustomView:m}),i=e.clone(t.options||{},!1);i.initializeCustomAttributes&&(this.currentTab.config=t),!t.values.length&&i.displayMessageWhenNoAttributeExists?(e.createElement("label",{class:"object-properties-list",html:M.NO_ATTRIBUTE_TO_DISPLAY}).inject(n),o=!1):(this.relatedView[s].setConfig(t),this.relatedView[s].resetModel(this.currentModel))}o&&this.relatedView[s].render(i)},_addRelatedView:function(e,t,i){this.relatedView[e]=new c(t,this,this.currentModel)},_addTrend:function(e,t){this.relatedView[e]=new h(t,{nlsTrend:this._nlsTrend,viewCollection:this._viewCollection,trendConfig:this._trendConfig,trendTemplate:this._trendTemplate,trendChartConfig:this._trendChartConfig,MatrixConfigCollection:this._matrixConfigCollection})},_addHistory:function(){let e=this.currentTab.key;this.relatedView[e]={},this.addScroller(e,void 0,{doNotShowScrollers:!0}),this.initHistoryFacet()},initHistoryFacet:function(){let e=this.currentModel.get("actualId")||this.currentModel.id;r.init({id:[e],facetLang:widget.lang,securityContext:E.get("collabspace")},this.scrollElements[this.currentTab.key])},_addRelation:function(){let e=this,t=this.currentTab.key;if(!this.relatedView[t]){let i=this.getDetailsDisplayDivContent(t),n=this._viewConfig.getRelationsFacetInfo();n&&require([n.require],(function(n){e.relatedView[t]=new n,e.relatedView[t].updateFacetExternal(e.currentModel.model.getModelForRelations()),e.relatedView[t].elements.container.inject(i),e.addScroller(t,i)})),this.detailsDisplayBodyContainers[t]=i}},_addComments:function(){let e=this,t=this.currentTab.key;this.relatedView[t]||f.loadJSDependency("DS/SocialToolbarVue/SocialToolbarVueUWAView").then((i=>{let n=e.getDetailsDisplayDivContent(t),o=e.currentModel.get("id"),s=e.currentModel.get("kindofTaskManagement"),a=e.currentModel.get("kindofRisk"),r=e.currentModel.get("kindofOpportunity"),c=e.currentModel.get("kindofConcept"),d=e.currentModel.get("kindofProjectSpace"),h=E.get("tenant"),u=E.get("3DSpace"),m="TRUE"===a?C.ENORISK:"TRUE"===r?C.ENXOPPY:"TRUE"===c||"TRUE"===d?C.ENOGANTT:C.ENOTASK,g="pid:"+o,p=u+"/resources/";var f={protocol:"3DXContent",version:"",source:m,data:{items:[{envId:h,serviceId:"3DSpace",objectId:o,objectType:e.currentModel.get("type")}]}};let D="/#app:"+m+"/content:X3DContentId="+encodeURIComponent(JSON.stringify(f));"TRUE"===s&&(D+="&propertyPanelTab=commentsTab");let w={platformId:h,currentUser:{login:l.getUser().login,firstName:l.getUser().firstName,lastName:l.getUser().lastName},urls:{serviceCSRF:{name:"X-DS-CSRFTOKEN"},service:p,registry:l.getApplicationConfiguration("app.urls.registry")},disableFeatures:{disableShare:!0},subjectUri:g,appForcedLinkUri:D};e.relatedView[t]=new i,e.relatedView[t].render({props:w}),e.relatedView[t].inject(n),e.addScroller(t,n),e.detailsDisplayBodyContainers[t]=n}))},_addClassification:function(){let t=this,i=this.currentTab.key;if(!this.relatedView[i]){let n=this.getDetailsDisplayDivContent(i),o="DS/ClassificationsFacet/"+(this.isCreate?"PLMNewClassificationFacet":"ClassificationFacet");f.loadJSDependency(o).then((o=>{t.relatedView[i]=new o({isBookmark:!1,isLibrary:{definitionPurpose:!0,categorizationPurpose:!0},isExternal:!0,onDestroyCallback:Function.prototype,securityContext:E.get("collabspace")}),t.relatedView[i].elements.container.inject(n),this.isCreate||t.relatedView[i].updateFacetExternal(new e.Class.Model({objectId:this.currentModel.id})),t.addScroller(i,n),t.detailsDisplayBodyContainers[i]=n}))}},_addCustomTabContent:function(){let e=this,t=this.currentTab.key;if(!this.relatedView[t]){let i=this.getDetailsDisplayDivContent(t);e.relatedView[t]=this.getCustomView(i,t),this.relatedView&&this.relatedView[t].render(),this.addScroller(t,i),this.detailsDisplayBodyContainers[t]=i}},getCustomView:Function.prototype,_notifyChanges:function(e){this.modelChanged(e&&e.modificationsPending)},updateStateOfFooterButtons:function(e){let t=this.parentView.dialog&&this.parentView.dialog.getDialogView();t?this.saveButton=t.buttons.Save:this.detailsDisplayFooter&&(this.saveButton=this.detailsDisplayFooter.saveButton),this.saveButton&&(this.saveButton.disabled=e)},destroyDetailsDisplayTabContent:function(){if(this.detailsDisplayBodyContainers)for(let e in this.detailsDisplayBodyContainers)this.relatedView[e]&&(this.relatedView[e].destroy(),delete this.relatedView[e]);this.relatedView={}},isPropertyPanelOpen:function(){return this._isPropertyPanelOpen||this.isCreate&&!this.isRMCContext},save:function(t){let i=this,n=e.clone(t||this.options||{},!1),o=this.options&&this.options.saveOptions||{};this.currentModel.saving=!0,this.currentModel.dispatchEvent("disableSaveButton",!0),this.showSpinnerView(this.detailsContainer,n.progressMessage||M.SAVING);let s=this.currentModel.isBulkCloneModel?this.currentModel.models.some((e=>e.localRelatedItems.hasOwnProperty("candidateAssignees"))):this.currentModel.localRelatedItems&&this.currentModel.localRelatedItems.hasOwnProperty("candidateAssignees"),a=n.isSelect,l=n.onFailure,r=n.onComplete,c=n.resetWidgetData,d=this.getParentView(),h=this.currentModel;a=e.is(a,"boolean")?a:this.isPropertyPanelOpen();let u;for(let e in this.relatedView)this.relatedView.hasOwnProperty(e)&&this.relatedView[e].prepareSave&&this.relatedView[e].prepareSave();if(this.isCreate){let e=i.relatedView.classification;u=e&&e.postCreation.bind(e)}let m={isNew:this.isNew,isSelect:a,isMassUpdate:this.currentModel.isBulkCloneModel,inValidRMC:this.inValidRMC,doNotCache:n.doNotCache,ignoreFieldDefinitions:this.ignoreFieldDefinitions,externalService:n.externalService,no3DSpace:n.no3DSpace,ignoreFields:n.ignoreFields,isContextModified:this.isContextModified,isCandidateAssigneeModified:s,isDateModified:n.isDateModified,isCalendarModified:n.isCalendarModified,isExternalComponent:this._isExternalComponent,isDeliverableAdded:n.isDeliverableAdded,isReferenceAdded:n.isReferenceAdded,donotShowMessage:n.donotShowMessage,donotRollup:o.donotRollup||n.donotRollup||this._isExternalComponent,rollUpNone:n.rollUpNone,doNotUpdateTreeNodeModel:n.doNotUpdateTreeNodeModel||o.doNotUpdateTreeNodeModel,operation:this.createOperation,tabConfig:this._tabConfig,tabConfigForCreate:this._tabConfigForCreate||this._tabConfig,onComplete:function(e,t){i.currentModel.saving=!1,this.currentModel.dispatchEvent("disableSaveButton",!1),i.postCreateProcess(this.isNew?b:y,d,{isSelect:a,resetWidgetData:Boolean(c),newModel:t&&t.updatedModel,currentNewModel:h}),r&&r.apply(this,arguments)}.bind(this),onFailure:function(){if(i.currentModel.saving=!1,i.currentModel.dispatchEvent("disableSaveButton",!0),i.hideSpinnerView(),!this.isNew&&!this.editModel)if(this.currentModel.isBulkCloneModel){let e=this.currentModel;this.currentModel.models&&this.currentModel.models.forEach((e=>{this.currentModel=e,i.handlePostSaveFailure(i.currentModel.model)})),this.currentModel=e}else i.handlePostSaveFailure(i.currentModel.model);l&&l.apply(this,arguments)}.bind(this),fields:n.fields||o.fields,include:n.include||o.include,customParams:n.customParams,parentCloneModel:n.parentCloneModel,classificationCallBack:u};n.doNotProcessBulkCloneModel||!this.currentModel.isBulkCloneModel?this._viewCollection.saveDataModel(this.currentModel,m):this._viewCollection.saveDataModels(this.currentModel,m)},handlePostSaveFailure:function(){this.isNew||(this.currentModel.cancel(),this.currentModel.model.set(this.currentModel.model.previousAttributes()),this.currentModel.model.resetChangedAttrs(),this.updateCurrentTabPostSave())},_closePopupDialog:function(e,t,i){this.closeDialog&&this.closeDialog({dontClearAlertMessages:t,model:i})},postCreateProcess:function(t,i,n){let o=e.clone(n||{},!1);if(N===t||S===t)i.postCreateProcess&&i.postCreateProcess();else if(b===t&&!o.donotCloseDialog||this.editModel)i.postCreateProcess(n.newModel),this._closePopupDialog(i,!0,n.currentNewModel||n.newModel);else if("addMember"===this.createOperation){this._closePopupDialog(i,!0);let e=this.parentView.getCurrentView();e&&e.postCreateProcess(!0)}else this.currentTab&&(this.options.onUpdateComplete&&this.options.onUpdateComplete(n.newModel),this.updateCurrentTabPostSave());this.hideSpinnerView(),this._isPropertyPanelOpen=o.isSelect,i.dispatchEvent&&i.dispatchEvent("updateCommonFacet",o),o.resetWidgetData&&this.reloadWidgetData(i,o)},reloadWidgetData:function(t,i){let n=e.clone(i||{},!1);this.currentModel.cancel(),E.setFilterSearchString(""),t.reload({refresh:!0,showLoadSpinner:!0,valiateInvalidRisksContext:!0,loadingMessage:n.loadMsg||""})},updateCurrentTabPostSave:function(t){let i=e.clone(t||{},!1);i.doNotUpdateCurrentTab||(this.isDPMProjectAdded?(this.parentView._rerender(),delete this.isDPMProjectAdded):(this.currentModel.cancel(),this._checkAccess(),this.currentTabView&&this.currentTabView.acceptChanges&&this.currentTabView.acceptChanges(i.updatedConfig))),this.handleInitialOpenPropertyPanel()},handleDeleteAction:function(t){let i=e.clone(t||{},!1),n=i.treeNodeModel||this.currentModel,o=(n&&n.model).title,s=i.operation===C.DELETE,a=s?M.DELETING:M.REMOVING,l=s?M.DELETE_CONFIRM_MSG:M.REMOVE_CONFIRM_MSG;this.currentModel.isBulkCloneModel&&(o="",this.currentModel.models&&this.currentModel.models.forEach((e=>o+=e.get("title")+",")),o=o.substr(0,o.length-1),i.isMassUpdate=!0),e.extend(i,{spinnerMsg:a});let r={dontResetModel:!0,title:M.DELETE+' "'+o+'"',message:M.replace(l,{title:o}),yesEventFunc:this.deleteDataObjectModel.bind(this,n,i),noEventFunc:function(){this.hideSpinnerView(),i.callback&&i.callback.apply(this,arguments)}.bind(this),yesLabel:M.YES,noLabel:M.NO};g.confirmDialog(r)},deleteDataObjectModel:function(t,i){let n=e.clone(i||{},!1);p.showProgressSpinner(this.detailsContainer,n.spinnerMsg||M.DELETING),this._viewCollection.deleteDataModel(t,n).then(this.handleDeleteOnComplete.bind(this),this.hideSpinnerView.bind(this))},handleDeleteOnComplete:function(t){let i=e.clone(t||{},!1),n=i.callback,o=this._viewCollection.getDocument(),s=this.getParentView();this.currentModel&&this.currentModel.isBulkCloneModel&&(this.isDelete=!0,this.handleDeletionCb&&this.handleDeletionCb(),this.isDelete=void 0),o&&o.getSelectedNodes().length&&i.isSelect||(this.hideRightPanel(),s&&!s.appName&&s.showHideLeftPanel(i.isRootDelete,i)),this.postCreateProcess(N,s),n&&n.apply(this,arguments)},showSpinnerView:function(e,t){p.showProgressSpinner(e||this.detailsContainer,t)},hideSpinnerView:function(e){p.hideProgressSpinner(e||this.detailsContainer)},showSaveCancelFooter:function(e){this.detailsDisplayFooter&&this.detailsDisplayFooter.showSaveCancelFooter(e)},destroy:function(){this.destroyDetailsDisplayTabContent&&this.destroyDetailsDisplayTabContent();for(let e in this.detailsDisplayBodyContainers)this.detailsDisplayBodyContainers[e]&&(this.detailsDisplayBodyContainers[e].destroy(),delete this.detailsDisplayBodyContainers[e]);this.actionButton&&this.actionButton.destroy(),this.detailsDisplayFooter&&this.detailsDisplayFooter.destroy(),this.detailsDisplayFooterContainer&&this.detailsDisplayFooterContainer.destroy(),this.detailsContainer&&this.detailsContainer.destroy()},_getTabConfig:function(e){let t,i;return i=this.currentModel&&this.currentModel.isBulkCloneModel?e.tabConfigForMassUpdate:e.tabConfig,this._setValidSearchSource(i),t=i&&i.cloneConfig&&i.cloneConfig(!0)||i,t},_setValidSearchSource:function(e){if(e&&!e.searchSourceValidated){for(let t in e.columnInfo){if(!e.columnInfo.hasOwnProperty(t))continue;let i=e.columnInfo[t];if(i.config&&i.config.columnInfo)for(let e in i.config.columnInfo){if(!i.config.columnInfo.hasOwnProperty(e))continue;let t=i.config.columnInfo[e];t.searchSource&&(t.searchSource=D.filterSearchSources(t.searchSource))}}!e.searchSourceValidated&&(e.searchSourceValidated=!0)}},getHeight:function(){return this.isNew?(this.height=this.height?this.height:this.parentView.getHeight(),this._calculateHeight()-70):(this.height=this.height?this.height:this.parentView.parentView?this.parentView.parentView.height:this.parentView.height,this._calculateHeight()+10)},_calculateHeight:function(){if(this.detailsDisplayFooterContainer){let e=this.detailsDisplayFooterContainer.clientHeight,t=this.detailsContainer.getElement(".object-properties-toolbar"),i=t&&t.clientHeight||0;return this.height-(i+e)}return this.height},setHeight:function(e){this.height=e;for(let e in this.scrollElements)this.scrollElements.hasOwnProperty(e)&&this.scrollElements[e].setStyle("height",this.getHeight()+"px")},hideRightPanel:function(){this.getParentView().showHideRightPanel(!1),this.reset()},getParentView:function(){let e=this.parentView.getCurrentView?this.parentView:this.parentView.parentView,t=e&&e.getCurrentView?e.getCurrentView():this;return t&&t.parentView},getRepeatCheckboxValue:function(){return e.is(this.parentView.getRepeatCheckboxValue,"function")&&this.parentView.getRepeatCheckboxValue()},handleRestrictedAccessFields:function(t){if(t){this.currentModel.isBulkCloneModel&&t.length&&(t=t[0]);let i=this.currentModel.isBulkCloneModel?this.currentModel.get("modifyAccess").every((e=>"TRUE"===e)):"TRUE"===this.currentModel.model.get("modifyAccess"),n=[];if(e.is(t,"array")||(n=t.split(",")),this.currentTab.config&&this.currentTab.config.values.length>0){f.filterObjects(this.currentTab.config.values,"name",n).forEach((e=>this._setFieldReadWrite(e.name,!i)))}}},_checkAccess:Function.prototype});return Object.defineProperty(P.prototype,"_isPropertyPanelOpen",{get:function(){return _},set:function(e){_=e}}),P})),define("DS/ENOProjectMgmtCommonComponents/utils/MassUpdateCloneModel",["UWA/Core","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel"],(function(e,t,i){"use strict";let n=i.extend({_uwaClassName:"MassUpdateCloneModel",isMassUpdate:!0,validate:function(e,t){let i=!0,n={fields:[],messages:{}};return this.getDateFieldValue("effectiveDate",e)||(i=!1,n.fields.push("effectiveDate")),i=i&&this.validateStartEndDates(e,n,t),this.dispatchEvent("disableSaveButton",!i),i?this.dispatchEvent("onValidationSuccess")&&void 0:n},set:function(t,i,n){return"select"===e.clone(n||{},!1).type&&(i&&e.is(i,"object")&&(i=i.actualValue),arguments[1]=i),this._parent.apply(this,arguments)},get:function(e){let i=this._parent.apply(this,arguments);if(i)switch(e){case"effectiveDate":case"actualStartDate":case"actualFinishDate":case"estimatedStartDate":case"estimatedFinishDate":i=i&&t.getIntlDateFormat(i.actualValue||i)}return i}});return n})),define("DS/ENOProjectMgmtCommonComponents/config/ProfilesListConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/DefaultGridConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i){"use strict";let n=e.extend({_uwaClassName:"ProfilesListConfig",columnInfo:{},ignoreCheckBoxSelection:!0,setup:function(){this.setColumnInfo(),this.gridConfig=UWA.clone(t),this.gridConfig.showContextualMenuColumnFlag=!1,UWA.extend(this.gridConfig.selectionBehavior,{unselectAllOnEmptyArea:!1})},type:"basic",values:[{text:i.TITLE,key:"title",dataIndex:"tree",fields:"title,name,description,image,typeicon,modifyAccess,deleteAccess",initialFields:"title,name,description,image,typeicon,modifyAccess,deleteAccess",icon:""},{text:i.NAME,dataIndex:"name"},{text:i.DESCRIPTION,dataIndex:"description"}]});return n._instance=n._instance||new n,n._instance})),define("DS/ENOProjectMgmtCommonComponents/config/HeatMapChartConfig",["DS/ENOProjectMgmtCommonComponents/config/AppConfig","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i){"use strict";let n=new e;return{_uwaClassName:"HeatMapChartConfig",goalPatternPath:"M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11",goalPatternStrokeWidth:"4",goalXAxisField:"impactGoal",goalYAxisField:"probabilityGoal",xAxisField:"impact",yAxisField:"probability",rpnIcon:"fonticon-check",goalIcon:"fonticon-status-empty",overlappingIcon:"fonticon-status-ok",goalPatternOpacityValue:"0.80",chart:{type:"column",spacingBottom:0,spacingTop:-15,spacingLeft:0,spacingRight:0,plotBackgroundColor:null,animation:{easing:t.easeInOutSineProjectMgmt}},exporting:!1,credits:!1,title:!1,xAxis:{lineWidth:0,tickLength:0,categories:void 0,title:{text:i.IMPACT,style:{fontWeight:"bold",color:n.ChartsColor.BLUE4_COLOR}},labels:{y:0},tickMarkPlacement:"off"},yAxis:{gridLineColor:"#fff",categories:void 0,width:"50px",title:{text:i.PROBABILITY,style:{fontWeight:"bold",color:n.ChartsColor.BLUE4_COLOR}},labels:{y:-13,style:{width:"110px",overflow:"hidden",textOverflow:"ellipsis"}}},tooltip:{enabled:!1},plotOptions:{series:{animation:!1,showInLegend:!1,pointPadding:0,groupPadding:0},column:{stacking:"normal",cursor:"pointer",dataLabels:{enabled:!0,style:{fontFamily:"Arial",fontSize:"15px",textOutline:"none"}}}},series:void 0}})),define("DS/ENOProjectMgmtCommonComponents/config/AddMemberConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/views/MultiValueCustomViewAutoComplete","DS/ENOProjectMgmtModels/Utils/FederatedSearch","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o){"use strict";let s=e.extend({_uwaClassName:"AddMemberConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"basic",values:[{label:o.READER,name:t.READER,placeHolder:o.USER_OR_USER_GROUP,type:"member",visibleFlag:!0,doNotFetch:!0,readWrite:!0,multiline:!1,multivalue:!0,selectionChipEditor:!0,customView:i,validate:!0,serviceName:"permissions",relatedViews:[t.LEADER],searchSource:n.filterSearchSources(["3dspace","usersgroup"]),excludeSearchTypes:{"3dspace":["Project Space"]},searchSourceTypes:{"3dspace":["Group","Group Proxy","Person"]},defaultValue:void 0,values:void 0,isRelatedDataItem:!0},{label:o.LEADER,name:t.LEADER,placeHolder:o.USER_OR_USER_GROUP,type:"member",visibleFlag:!0,doNotFetch:!0,readWrite:!0,multiline:!1,multivalue:!0,selectionChipEditor:!0,customView:i,validate:!0,serviceName:"permissions",relatedViews:[t.READER],searchSource:n.filterSearchSources(["3dspace","usersgroup"]),excludeSearchTypes:{"3dspace":["Project Space"]},searchSourceTypes:{"3dspace":["Group","Group Proxy","Person"]},defaultValue:void 0,values:void 0,isRelatedDataItem:!0}]});return s._instance=s._instance||new s,s._instance})),define("DS/ENOProjectMgmtCommonComponents/config/MembersTabConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/AddMemberConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i){"use strict";let n=e.extend({_uwaClassName:"MembersTabConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"tab",hide:!0,values:[{name:i.PROPERTIES,key:"properties",selected:!0,config:t,checkFlag:!0}]});return n._instance=n._instance||new n,n._instance})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtHeatMapCustomView",["UWA/Core","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/config/HeatMapChartConfig","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtHeatMapChartUtil","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l){"use strict";let r=t.extend({_uwaClassName:"ProjectMgmtHeatMapCustomView",options:{},riskHeatMapDiv:void 0,chartConfig:void 0,Highcharts:void 0,seriesArray:void 0,setup:function(t){let n=e.clone(t||{},!1);this.options=n,this.model=n.model,this.homeView=n.homeView,this.fieldConfig=n.config,this.chartConfig=e.clone(s||{}),this.seriesArray=this.chartConfig.series,this.Highcharts=i.get("highcharts"),this._parent.apply(this,arguments)},render:function(){let t=this;this.container.empty(!0);let i=this.fieldConfig.isMatrixSettingView;if(this.heatmapLabel=new e.createElement("label",{text:this.fieldConfig.label}).inject(this.container),this.riskHeatMapDiv=e.createElement("div",{class:"heatmap-details-panel"}).inject(this.container),this.riskHeatMapDiv.addEvent("resize",(function(){t.heatMapChart&&t.heatMapChart.reflow()})),this.chartConfig.chart.renderTo=this.riskHeatMapDiv,i){this.listenTo(this.model,"onChangeImportFile",this.handleMatrixImportFile);let e=this.chartConfig.plotOptions.series.point;e&&(e.events.click=void 0),this.chartConfig.plotOptions.column.cursor=void 0,this.chartConfig.plotOptions.column.dataLabels.style.fontSize="10px",this.renderMatrixHeatMapPreview(i)}else this.listenTo(this.model,"onChange:rpnValue",this.handleRPNHeatMap),this.listenTo(this.model,"onChange:rpnValueGoal",this.handleRPNHeatMap),this.chartConfig.xAxis.labels.enabled=!1,this.chartConfig.xAxis.title.enabled=!1,this.chartConfig.yAxis.labels.enabled=!1,this.chartConfig.yAxis.title.enabled=!1,this.initializeClickEvent(),this.renderMatrixHeatMapPreview(),this.handleRPNHeatMap();return this},renderMatrixHeatMapPreview:function(t){let i=this.model.get("rmcId"),n=i&&this.homeView._matrixConfigCollection.getMatrixConfigDefinition(i)||this.model.get("matrix");if(e.is(n,"object")){let e={chartConfig:this.chartConfig,matrixConfiguration:n,matrixSettingVeiw:t};this.heatMapChartUtil=new a(e),this.renderHeatMapChart()}else this.container.empty(!0)},initializeClickEvent:function(){let e=this;this.chartConfig.plotOptions.series.point={events:{click:function(){e.model.model.isComplete()||(e.updateFieldViewByName("impact",this.Xvalue,!0),e.updateFieldViewByName("probability",this.Yvalue))}}}},updateFieldViewByName:function(e,t,i){let o=this._parentView.getFieldViewByName(e);if(o)if(o._config.doNotResetRelatedAttrs=i,widget.useUIKitSelect){let e=o._select.elementsList,i=n.findIndex(e,"valueItem",t.toString()),s=o._select.selectedIndex!==i;o._select.selectedIndex=i,s||o._selectDataEntry()}else{let e=o.getElement("select");e.value=t,o._selectDataEntry({target:e})}},handleRPNHeatMap:function(){let e=this.chartConfig.series?this.chartConfig.series[0].data:[],t=this.chartConfig,i=t.goalPatternPath,o=t.goalPatternStrokeWidth,s=t.goalXAxisField,a=t.goalYAxisField,l=t.xAxisField,r=t.yAxisField,c=t.rpnIcon,d=t.goalIcon,h=t.overlappingIcon,u=t.goalPatternOpacityValue,m=this.model.get(l),g=this.model.get(r),p=this.model.get(s),C=this.model.get(a);m&&g&&e.forEach((function(e){let t=e.color.pattern&&e.color.pattern.color||e.color;e.Xvalue<=p&&e.Yvalue<=C?e.color={pattern:{backgroundColor:t,path:{d:i,strokeWidth:o,stroke:t},width:10,height:10,opacity:u,color:t}}:e.color=t;let s,a="";e.Xvalue===m&&e.Xvalue===p&&e.Yvalue===g&&e.Yvalue===C?s=h:e.Xvalue===m&&e.Yvalue===g?s=c:e.Xvalue===p&&e.Yvalue===C&&(s=d),s&&(e.dataLabels.useHTML=!0,a=n.getFontIconElement(s),a=a&&a.getHTML()||""),e.dataLabels.format=a})),this.renderHeatMapChart()},renderHeatMapChart:function(){let e=this;this.Highcharts&&setTimeout((function(){e.heatMapChart=new e.Highcharts.Chart(e.chartConfig)}),150)},handleMatrixImportFile:function(e){let t=e.isValid,i=e.errorMessage;t?this.render():(this.container.empty(!0),o.buildNotification({title:l.MATRIX_CONFIGURATION_ERROR,message:i,hideDelay:1e4},"warning"))}});return r})),define("DS/ENOProjectMgmtCommonComponents/components/TaggerProxy",["UWA/Core","UWA/Promise","UWA/Class/Events","UWA/Class/Listener","UWA/Class/Collection","DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOProjectMgmtModels/Collections/Tags","DS/ENOProjectMgmtModels/Models/Tag","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],(function(e,t,i,n,o,s,a,l,r,c){"use strict";let d=i.extend(n,{_uwaClassName:"TaggerProxy",collection:void 0,_matrixConfigCollection:void 0,tnProxy:void 0,tags:void 0,taggerData:void 0,init:function(t,i){let n=e.clone(i||{},!1);this.tnProxy=n.tnProxy,this.collection=t,this._matrixConfigCollection=i.matrixConfigCollection},getTagPostData:function(){let e,t=this.collection;return t&&t.length&&t.forEach((function(t){e?e+=","+t.get("id"):e=t.get("id")})),e},loadTagData:function(i){let n=this,o=e.clone(i||{},!1);return new t((function(e,t){n.tags=new a;let i=n.getTagPostData();if(!i||""===i)return n.setTNProxy(),e();n.tags.fetch({idList:i,onComplete:function(t){if(o.isSeverityExistsInTagger){let e=r.get("context");t&&t.forEach((function(t){let i=n.collection.get(t.id);i&&t.updateSeverityTag(i,e,n._matrixConfigCollection)}))}n.setTNProxy(t),e()},onFailure:function(e,i){t(i)}})}))},setTNProxy:function(e){this.register(),e&&e.length?this.drawTags(e):this.drawTags([])},drawTags:function(e){let t=this.buildTagObjectData(e);this.setTaggerData(t)},setTaggerData:function(e){this.tnProxy&&e&&(this.tnProxy.setSubjectsTags(e,"prjMgmtTagSubjects"),this.taggerData=e)},getItemId:function(e){return"pid://"+e.id},buildTagObjectData:function(e){let t={},i=this;return e.forEach((function(e){let n=i.buildItemData(e),o=i.getItemId(e);t[o]=n})),t},buildItemData:function(e){let t="_tag_implicit_",i=[];try{e.keys().forEach((function(n){if("id"===n)return;let o,s="";-1===n.indexOf(t)?o=6:(s="implicit",o=14);let a=e.get(n),l=n.substr(o),r=a.length;for(let e=0;e<r;e++){let t={object:a[e],dispValue:a[e],sixw:l,field:s};i.push(t)}}))}catch(e){console.error("loadTagDataDone"+e)}return i},updateTagObject:function(e,i,n){let o=this,s=r.get("context");return new t((function(t,a){let r=o.tags.get(e.get("id"));if(i){if(r){o.tags.remove(r);let e=o.getItemId(r);delete o.taggerData[e],o.setTaggerData(o.taggerData)}t()}else r||(r=new l(r),r.set("id",e.get("id")),o.tags.add(r)),r&&(r.updateTagger(o._matrixConfigCollection,e,n,s)&&o.updateTagData(r),o.updateTagData(r)),t()}))},updateMappedTagObjects:function(e){let t=this,i={"_tag_implicit_ds6w:what/ds6w:heatMap":"mappedMatrixXY","_tag_implicit_ds6w:why/ds6w:fulfills/ds6w:severity":"mappedSeverity"};e&&e.length&&e.forEach((function(e){let n=e.options.data.model,o=t.tags.get(n.get("id"));o&&o.updateMatrixTag(n,i,t._matrixConfigCollection)})),this.drawTags(this.tags)},updateTagData:function(e){let t=this.buildItemData(e),i=this.getItemId(e);this.taggerData[i]=t,this.subjectChangedRequired=!1,this.setTaggerData(this.taggerData)},handleFocusOnSubjects:function(e){if(this.tnProxy)if(e&&e.length){let t=[],i={};e.forEach((e=>{t.push("pid://"+e),i[e]="3DSpace"})),this.focusOnSubjects(t,!0,i)}else this.unfocus()},focusOnSubjects:function(){this.tnProxy.focusOnSubjects.apply(this.tnProxy,arguments)},unfocus:function(){this.tnProxy.unfocus.apply(this.tnProxy,arguments)},set6WFilterOptions:function(e,t){if(this.tnProxy){let i={};i[e]=[{disptext:t,object:t,type:"string",field:["implicit"]}],this.setLocalFilter(i,!0)}},setLocalFilter:function(t,i){e.is(t,"object")&&this.tnProxy&&(this.subjectChangedRequired=!0,this.tnProxy.setLocalFilter(t,i))},subjectChanged:function(e){this.collection&&!e.dontCacheFilters&&this.dispatchEvent("onSubjectChanged",[e])},register:function(){let e=this;if(this.tnProxy)this.collection&&(this.tnProxy.removeEvent("onFilterSubjectsChange"),this.tnProxy.addEvent("onFilterSubjectsChange",this.subjectChanged.bind(this)));else if(!r.get("doNotInitializeTaggerProxy")){let t=r.get("widgetId"),i=r.get("tenant"),n={widgetId:t,contextId:t?void 0:"context1",tenant:"onpremise"===i?void 0:i,filteringMode:"WithFilteringServices",colorize:!0};this.tnProxy=s.createProxy(n),this.tnProxy.addEvent("onFilterSubjectsChange",this.subjectChanged.bind(this),this.collection),window.onunload=function(){e.tnProxy&&e.tnProxy.die()}}},handleUserTags:function(t){let i;t&&(i=e.is(t,"array")?t.length&&c.getAttributeValues(t,"id"):[t]),this.handleFocusOnSubjects(i)},destroy:function(){this.tnProxy&&(this.tnProxy.die(),this.tnProxy=null)}});return d})),define("DS/ENOProjectMgmtCommonComponents/collection/ProjectMgmtViewCollection",["UWA/Core","UWA/Class/Model","UWA/Promise","DS/E6WCommonUI/Models/BulkModel","DS/E6WCommonUI/Models/BulkCloneModel","DS/TreeModel/TreeNodeModel","DS/ENOProjectMgmtModels/Models/SaveModels","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/RelatedDataItem","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Utils/StorageDataUtil","DS/ENOProjectMgmtModels/Utils/FederatedSearch","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/utils/MassUpdateCloneModel","DS/ENOProjectMgmtCommonComponents/components/TaggerProxy","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/components/CommonTreeDocument","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d,h,u,m,g,p,C,f,E,D,w,M,_){"use strict";let S=t.extend({_uwaClassName:"ProjectMgmtViewCollection",treeDocuments:{},storageDataUtil:h,setup:function(e){e&&(this.DataModels=e.DataModels,this.DataModel=e.DataModel,this.AppConfig=e.AppConfig,this.PropertiesConfig=e.PropertiesConfig,this.TabConfig=e.TabConfig,this.TabConfigForCreate=e.TabConfigForCreate,this.ListConfig=e.ListConfig,this.CloneModel=e.CloneModel,this.governingType=e.governingType,this.governingTypeNLS=e.governingTypeNLS,this.NLS=e.NLS,this.defaultDataModelAttrs=e.defaultDataModelAttrs,this.tabConfigForMassUpdate=e.tabConfigForMassUpdate,this.massUpdateCloneModel=e.massUpdateCloneModel||E,this.fieldDefinitionSource=e.fieldDefinitionSource,this.addAsLastChild=e.addAsLastChild,this.CHILD_ATTRIBUTE=e.CHILD_ATTRIBUTE)},getDocument:function(e,t){return e?(this.treeDocuments[e]&&!t||(this.treeDocuments[e]=new M({prepareUpdate:!0,viewCollection:this,config:this.ListConfig,doNotApplyNodeExpand:this.treeDocument.doNotApplyNodeExpand}),this.treeDocuments[e].copyChildNodes(this.treeDocument),this.treeDocuments[e].updateSortAndExpandAll()),this.treeDocuments[e]):this.treeDocument},resetCollection:function(e){try{this.treeDocument&&this.treeDocument.destroy()}catch(e){}this.collection&&this.collection.reset(),this.collection=e||new this.DataModels,this.treeDocument=this.createTreeDocumentForCollection(e)},resetTreeDocument:function(t){let i=this,n=e.clone(t||{},!1),o=n.view&&this.treeDocuments[n.view]||this.treeDocument;o&&o.prepareUpdate()&&o.empty(),n.collection&&(this.collection=n.collection),o=this.createTreeDocumentForCollection(this.collection,t),t&&t.addChild?(n.onComplete=function(e){t&&t.view?(i.treeDocuments[t.view]=e,t.onComplete(i.treeDocuments[t.view])):(i.treeDocument=e,t.onComplete(i.treeDocument))},this._fetchChildDetails(o,n)):n.view?i.treeDocuments[n.view]=o:i.treeDocument=o},getCurrentNode:function(e,t){let i,n=this.getDocument(t);return n&&(i=n.getSelectedNode(),!i&&(i=n.getAllDescendants()[e])),i},getPreviousSelectedNode:function(e){let t=this.getDocument(e);return t&&t.previousSelectedNodeForContextMenu},getCurrentDataModel:function(e,t){let i=this.getCurrentNode(e,t);return i&&i.options.data},getDataModelsCount:function(e){let t=this.getDocument(e);return t?t.getNodeModelsLength():this.collection?this.collection.length:0},getCollection:function(){return this.collection},getModelsCountWithInvalidConfig:function(){let e=this.treeDocument.getChildren(),t=e&&e.length&&e.filter((function(e){let t=e.options.data.model;return"FALSE"===(t.validConfiguration||t.get("validConfiguration"))}));return t&&t.length},getModelsCountWithInvalidConfigForContext:function(){let e=this.treeDocument.getChildren(),t=e&&e.length&&e.filter((function(e){let t=e.options.data.model,i=t.contextValidConfiguration||t.get("contextValidConfiguration"),n=t.validConfiguration||t.get("validConfiguration");return"FALSE"===i&&"TRUE"===n}));return t&&t.length},reselectCurrentDataModel:function(e){if(this.treeDocument&&(this.treeDocument.resetPreviousSelectionNodeModel(),!e)){let e=this.getCurrentNode();e&&this.selectDataModel(void 0,e)}},selectDataModel:function(e,t){t?(this.unselect(),t.select()):this.treeDocument.selectNodeByRowId(e)},getNewDataModel:function(t,i){let n=e.clone(i||{},!1),o=n.attributes||this.defaultDataModelAttrs,s=n.DataModel?new n.DataModel(o):new this.DataModel(o);if(n.private)for(let e in n.private)n.private.hasOwnProperty(e)&&(s[e]=n.private[e]);s.setTempId();let a={config:t,model:s,CloneModel:n.CloneModel,isMassUpdate:n.isMassUpdate,parentCloneModel:n.parentCloneModel,modelCacheFieldName:n.modelCacheFieldName};return this.createClonedModel(a)},setFieldsFromConfig:function(e,t,i,n,o){let s=t.dataIndex&&"tree"===t.dataIndex?t.key:t.dataIndex||t.name;if(o=t.serviceName||o,e.isNew()||(void 0===e.get(s)||null===e.get(s))&&!t.isCustom){if(t.defaultValue)i&&Object.keys(i).length>0?i[s]=t.defaultValue:e.set(s,t.defaultValue);else if(i&&Object.keys(i).length>0&&t.readWrite)i[s]="";else if(e.has(s)){!e.get(s)&&e.set(s,"")}}else if(n){let i=e.get(s),a=t.typeRepresentation;if(a&&(n[s]=this.getTypeRepresentationValue(a,i)),void 0===n[s])if(t.mapFromRangeValue){let e;if(e=(o=t.serviceName||o)?c.getFieldServiceColumn(this.fieldDefinitionSource,o,s):c.getFieldDefinitionColumn(this.fieldDefinitionSource,s),e){let t=e.fieldDefinitionRangeItem[i]&&e.fieldDefinitionRangeItem[i].display;n[s]=t||i}else n[s]=i}else n[s]=i}},getTypeRepresentationValue:function(t,i){let n=i;switch(t){case"string":n=i instanceof e.Class.Collection?f.getAttributeValues(i,"title")||"":i;break;case"detailedInfo":i.length&&(e.is(i,"string")||(n=[],i.forEach((e=>{n.push({label:e.title,icon:e.get("image")})}))));break;case"number":n=Number(i);break;case"progress":n=parseInt(i);break;case"array<integer>":n=i&&i.map(Number);break;case"array<boolean>":n=i&&i.map(Boolean)}return n},createModelFields:function(e,t,i,n,o){let s=t.columnInfo;for(let t in s)e.isNew()?this.setFieldsFromConfig(e,s[t]):this.setFieldsFromConfig(e,s[t],i,n,o)},getRecursiveDataModels:function(e,t,i){let n=[],o=this.collection;return o&&o.length&&o.forEach((o=>{let s=o,a=!1;i.forEach((i=>{let n=s.get(i);if(n&&n.length){f.filterObjects(n,e,t).length&&(a=!0)}})),a&&(s.expandNode=!0,n.push(s))})),n},filterDataModels:function(t,i,n){let o,s=e.clone(n||{},!1).filterFromTreeDocument,a=this.collection;if(this.searchValue=t,s){let e=this.treeDocument.getNodeModels();e.length&&(a=e)}return o=this.performFilter(a,t,i,n),this.treeDocument=this.createTreeDocumentForCollection(o||this.collection),this.treeDocument},createClonedModel:function(t){let i,a,l={},r={},c=e.clone(t||{},!1),d=c.isNew,h=c.model,u=c.service,m=c.isSelect,g=c.isMassUpdate,p=c.treeDocument,C=c.treeNodeModel,f=c.isFlatStructure;if(h){let e=c.config||p&&p.config;e&&this.createModelFields(h,e,l,r,u);let t=g?this.massUpdateCloneModel:this.CloneModel;if(h instanceof n){let e=this.getCurrentDataModel();e||(e=new this.CloneModel(h,{})),i=new o(h,e.__proto__.constructor,Function.prototype,{}),i.isBulkCloneModel=!0}else i=c.CloneModel?new c.CloneModel(h,c):new t(h,c);if(!h.isNew())for(let e in l)l.hasOwnProperty(e)&&i.set(e,l[e])}if(C)try{C.updateOptions({label:C.getNodeModelLabel(i),data:i,grid:r})}catch(t){e.log(t)}else a=p,a&&a instanceof s&&(p=a.getTreeDocument()),p&&!this.isNodeExistUnderParent(a,i.id)&&p&&p.createTreeNodeModel(i,{isNew:d,isFlatStructure:f,isSelect:m,insertBefore:c.insertBefore,attributes:r,parentNode:a,modelCacheFieldName:c.modelCacheFieldName});return i},isNodeExistUnderParent:function(e,t){if(!e)return!1;let i=e.getChildren();return Boolean(i&&i.find((e=>e.id===t)))},createBulkModel:function(e){return new n(e||this.treeDocument.getSelectedNodeModels())},getSpecificTabConfig:function(e,t){let i,n=t||{};return i=e.isMassUpdate?n.tabConfigForMassUpdate||this.tabConfigForMassUpdate:e.model.isNew()?n.tabConfigForCreate||this.TabConfigForCreate:n.tabConfig||this.TabConfig,i},resetDataModelFromClone:function(e,t){e&&(e instanceof o?e.models&&e.models.forEach((e=>this.processClonedDataModel(e,t))):this.processClonedDataModel(e,t))},processClonedDataModel:function(e,t){let i={},n=this;this.getSpecificTabConfig(e,t).values.forEach((function(t){t.config&&t.config.values.forEach((function(t){n.prepareLocalAttributesToModelAttributes(i,e,t)}))})),e.model.set(i)},setStartStopAttrInfo:function(t,i,n){let o=this;if(e.is(i,"array")){let e=[];i.forEach((t=>{e.push(o.convertDate(t.actualValue||t))})),n[t]=e}else i&&(n[t]=this.convertDate(i.actualValue||i))},setUOMAttrInfo:function(t,i,n){e.is(i,"number")?n[t]=c.getFieldRangeItemActualValue(this.fieldDefinitionSource,t,i):n[t]=i},prepareLocalAttributesToModelAttributes:function(t,i,n){let o,s=n.key,a=n.name,l=n.type,r=i.localAttributes,c=r.hasOwnProperty(a),d=r[a];if(c&&!d&&(d=n.hasOwnProperty("defaultValue")&&n.defaultValue||""),!d&&"startStop"===l){let e=n.endDateAttribute,i=r[e];null!=i&&(this.setStartStopAttrInfo(e,i,t),o=!0)}if(null!=d&&!o){if("date"===l||"startStop"===l){this.setStartStopAttrInfo(a,d,t);let e=n.endDateAttribute;e&&(d=r[e],this.setStartStopAttrInfo(e,d,t))}else if("uom"===l){this.setUOMAttrInfo(a,d,t);let e=n.unitAttribute;e&&(d=r[e],d&&this.setUOMAttrInfo(e,d,t,i))}else if("object"!==l&&"person"!==l||i.model.get(a)){let i=d;e.is(d.actualValue,"string")&&(i=d.actualValue),s?(t[s]=i,t[a]=void 0):t[a]=i}else s&&d.length?t[s]=d.at(0).get("id"):t[a]=d;n.relatedFieldsToSave&&n.relatedFieldsToSave.forEach((e=>{t[e]=i.get(e)}))}},convertDate:function(e){return e?new Date(e):e},createTreeDocumentForCollection:function(t,i){let n=this,o=e.clone(i||{},!1),s=t,a=o.config||this.ListConfig,l=o.doNotApplyNodeExpand||this.ListConfig.doNotApplyNodeExpand,r=new M({config:a,viewCollection:n,doNotApplyNodeExpand:l});return t&&o.performFilterOnTreeDocument&&(s=this.performFilter(t,o.iSearchValue,o.column,o)),s&&s.length&&s.forEach((function(e){let t={model:e,service:o.service,treeDocument:r,isNew:o.isNew};n.createClonedModel(t)})),r},performFilter:function(t,i,n,o){let s,a=e.clone(o||{},!1);if(i)if("id"===n){if(s=f.filterObjects(t,n,i),a.iterateRecursiveKeys&&a.iterateRecursiveKeys.length){let e=this.getRecursiveDataModels(n,i,a.iterateRecursiveKeys);s=s.concat(e),s=[...new Set(s)]}}else s=t.filter((function(e){let t=e.get(n);if(t&&t.toLowerCase().contains(i.toLowerCase()))return e}));return s},updateChildrenForNodeModel:function(t){let i=e.clone(t||{},!1),n=i.model,o=i.collection,s=i.childRelationsNames||n&&n.getChildRelationsNames();if(o&&(n=o.get(n.id)),s&&s.length){i.childMemberNames=s;let e=this.treeDocument.getTreeNodeModelById(n.id);this.treeDocument.prepareUpdate(),e&&this._addChildNode(n,e,i),i.isExpandNode&&e.expand(),this.treeDocument.pushUpdate()}},updateTreeDocumentForCollection:function(t,i){let n,o,s=this,a=this.treeDocument,l=e.clone(i||{},!1);t&&t.length&&t.forEach((function(e){if(n=e.id||e.physicalid,o=a.getTreeNodeModelById(n),o){let t={model:e,config:l.config,treeDocument:a,treeNodeModel:o};s.createClonedModel(t)}l.isMassUpdate&&s.updateCacheAndTaggerData(e,{forceUpdate:!0})}))},getFieldsAndIncludeParamsForDataModelDetails:function(e){let t,i=e&&e.tabConfig||this.TabConfig,n="none";return i&&i.values.forEach((function(i){!e.include&&i.include&&(t?t+=","+i.include:t=i.include),i.fields&&(n+=","+i.fields)})),{fields:n,include:t}},getDataModelDetails:function(t){let n=this,o=e.clone(t||{},!1),s=Boolean(o.initialCall),a=!o.model&&(o.treeNodeModel||this.getPreviousSelectedNode()||this.getCurrentNode(0)),r=o.model||a.options.data.model,c=[],d=Boolean(o.expandCall),h=this.TabConfig&&this.TabConfig.fetchAPIRelationships;return o.attributesToBeRetained&&o.attributesToBeRetained.forEach((t=>{let i=r.get(t);i&&(c[t]=i.clone?i.clone():e.clone(i||{},!1))})),new i((function(e,t){let i=s?o.initialFields:o.fields,u=s?o.initialInclude:o.include;if(!i&&!u)if(d||o.useList){let e=n.getFieldsAndIncludeByListConfig(o);i=e.fields,u=e.include}else{let e=n.getFieldsAndIncludeParamsForDataModelDetails(o);i=e.fields,u=e.include}r.fetch({debug:!1,method:"GET",filter:l.getSelectedFilterOption(),subFilter:l.getSelectedSubFilterOption(),owned:!o.owned||o.owned,fields:i,include:u,mask:o.mask,refresh:o.refresh,isDataAvailable:o.isDataAvailable,storageKey:o.storageKey,fetchSource:o.fetchSource,subType:o.subType,customParams:o.customParams,ignoreFieldDefinition:o.ignoreFieldDefinition,relatedDataItemFieldToRefresh:o.relatedDataItemFieldToRefresh,onComplete:function(t){if(n.handleDoNotCacheAttributes(r,o),h){let e=new g;e.add(r),n.handleFetchAPI(e,h,!0,o)}if(o.attributesToBeRetained&&o.attributesToBeRetained.forEach((e=>{let t=c[e];t&&r.set(e,t)})),a){let e={model:r,config:n.getPropertiesConfig(r),treeNodeModel:a};t=n.createClonedModel(e)}else if(d||o.collectionAttr){let e;e=o.collectionAttr?t.get(o.collectionAttr):new n.DataModels(t),n.treeDocument&&n.treeDocument.getNodeModels().length?n.updateTreeDocumentForCollection(e,o):(n.treeDocument=n.createTreeDocumentForCollection(e,{doNotApplyNodeExpand:o.doNotApplyNodeExpand}),o.collection=e),!o.collectionAttr&&n.updateChildrenForNodeModel(o),o.modelCacheFieldName&&o.refresh&&n.createTreeNodeModelCache(),o.expandAll&&n.treeDocument.expandAll(),o.onComplete&&o.onComplete.apply(this,arguments)}e(t)},onFailure:function(e,i){w.buildNotification({title:_.FETCH_FAILURE,message:f.getErrorMessage(e,i)},"error"),t()}})}))},getPropertiesConfig:function(){return this.PropertiesConfig},getDataModels:function(t){let i,n=this,o=e.clone(t||{},!1),s=o.collection||new this.DataModels,a="none",r="none",c=Boolean(o.expandCall),d=o.fetchColumnNames,h=this.ListConfig&&this.ListConfig.values,u=o.customParams,m=this.ListConfig&&this.ListConfig.fetchAPIRelationships;if(o.fieldDefinitionOnly)u={fieldDefinition:"nodata"};else if(o.paramData&&o.paramData.forEach((function(e){i?i+=","+(e.objectId||e.get("id")):i=e.objectId||e.get("id")})),o.fields||o.includeFields)a+=","+o.fields,r+=","+o.includeFields;else if(d){let e=f.filterObjects(h,"dataIndex",d);e&&e.forEach((t=>{1===e.length&&t.initialFields?o.onComplete&&o.onComplete(n.treeDocument):(t.fields&&(a+=","+t.fields),t.include&&(r+=","+t.include))}))}else{let e=this.getFieldsAndIncludeByListConfig(o);a=e.fields,r=e.include}s.fetch({debug:!1,filter:i?void 0:l.getSelectedFilterOption(),contextId:i?void 0:o.contextId,idList:i,completed:i?void 0:l.get(C.COMPLETED_PREFERENCE),fields:a,include:r,top:o.top,rmcType:o.rmcType,sourceType:o.sourceType,customParams:u,onComplete:function(e){if(m&&n.handleFetchAPI(s,m,!1,o),n.fieldDefinitionSource=s.getFieldDefinitionSource(),o.paramData&&o.paramData.length>0&&e.length<o.paramData.length){let t;o.paramData.forEach((i=>{e.get(i.objectId||i.get("id"))||(t=t?t+","+(i.displayName||i.get&&i.get("title")):i.displayName||i.get&&i.get("title")||i.objectId)})),t&&w.buildNotification({message:_.FAILED_TO_RETRIEVE_OR_ACCESS+" : "+t},"error")}o.updateCurrentTreeDocument?(n.updateTreeDocumentForCollection(e,o),o.onComplete&&o.onComplete.apply(this,arguments)):c?(o.collection=s,n.treeDocument?n.updateTreeDocumentForCollection(e,o):(n.collection=s,n.treeDocument=n.createTreeDocumentForCollection(e,{expandAll:o.expandAll,doNotApplyNodeExpand:o.doNotApplyNodeExpand})),n.updateChildrenForNodeModel(o),o.expandAll&&n.treeDocument.expandAll(),o.onComplete&&o.onComplete.apply(this,arguments)):o.fieldDefinitionOnly||(n.collection=s,n.treeDocument=n.createTreeDocumentForCollection(e,{doNotApplyNodeExpand:o.doNotApplyNodeExpand,performFilterOnTreeDocument:o.performFilterOnTreeDocument}),o.fetchChildDetails||o.addChild?n._fetchChildDetails(n.treeDocument,o):o.onComplete&&o.onComplete(n.treeDocument))},onFailure:function(e,t){w.buildNotification({title:_.FETCH_FAILURE,message:f.getErrorMessage(e,t)},"error"),o.onFailure&&o.onFailure(t)}})},getFieldsAndIncludeByListConfig:function(e){let t="none",i="none",n=this.ListConfig&&this.ListConfig.values,o=e.excludeParams,s=Boolean(e.expandCall),a=Boolean(e.initialCall);return n&&n.length&&n.forEach((function(e){if(!o||-1===o.indexOf(e.dataIndex))if(s){let n=e.expandFields,o=e.expandInclude;n&&(t+=","+n),o&&(i+=","+o)}else{let n=a?e.initialFields:e.fields,o=a?e.initialInclude:e.include;n&&(t+=","+n),o&&(i+=","+o)}})),{fields:t,include:i}},_fetchChildDetails:function(e,t){let i=[];e.prepareUpdate();let n=[...e.getChildren()];if(n&&n.length)for(;n.length;)i.push([...n.splice(0,50)]);else t.onComplete&&t.onComplete(e);this.fetchByBatch(e,0,i,t).then((function(){e.updateSortAndExpandAll(),t.onComplete&&t.onComplete(e)}),t.onFailure)},fetchByBatch:function(e,t,n,o){let s=this;return new i((function(a,l){let r=n[t];if(!(r&&r.length>0))return a();{let c=[];if(r.forEach((function(t){c.push(s._fetchModelDetails(t,e,o))})),!c.length)return l();i.all(c).then((function(){if(!(t<n.length-1))return a();t++,s.fetchByBatch(e,t,n,o).then(a,l)}),l)}}))},_fetchModelDetails:function(e,t,n){let o=this;return new i((function(t,i){n.fetchChildDetails?e.options.data.model.fetch({mask:n.mask,depth:n.depth,onComplete:function(i){o._addChildNode(i,e,n),t()},onFailure:function(e,t){w.buildNotification({title:_.FETCH_FAILURE,message:f.getErrorMessage(e,t)},"error"),i(e,t)}}):n.addChild&&(o._addChildNode(e.options.data.model,e,n),t())}))},_addChildNode:function(t,i,n){let o=this,s=e.clone(n||{},!1),a=s.isFlatStructure,l=widget&&widget.getValue("isTaggersSelected"),r=f.getAttributeValues(i.getAllDescendants(),"id");s.childMemberNames&&n.childMemberNames.forEach((function(e){let n=t.get(e);n&&(s.performFilterOnTreeDocument&&(n=o.performFilter(n,s.iSearchValue,s.column,s)),n.forEach((function(e){if(!l||!o.searchValue||-1!==o.searchValue.indexOf(e.id)&&-1===r.indexOf(e.id)){let t={model:e,isFlatStructure:a,config:o.ListConfig,treeDocument:i};o.createClonedModel(t)}})))}));let c=i.getChildren();c&&c.length&&c.forEach((function(e){let t=e.options.data;t?o._addChildNode(t.model,e,s):e.remove()}))},hasPropertyInTaggerMap:function(e){return this.fieldDefinitionSource&&Boolean(Object.keys(c.getFieldTaggerMap(this.fieldDefinitionSource)).filter((t=>new RegExp(e).test(t))).length)},processTagger:function(t){let n=this,o=e.clone(t||{},!1);return o.isSeverityExistsInTagger=this.hasPropertyInTaggerMap("severity"),new i((function(e,t){n.taggerProxy=new D(n.collection,o),n.taggerProxy.loadTagData(o).then((function(){e(n.taggerProxy)}),(function(e,i){w.buildNotification({title:_.TAGGER_ERROR,message:f.getErrorMessage(e,i)},"error"),t(e,i)}))}))},_clearCachedData:function(){this.collection&&this.collection.forEach((e=>{this.storageDataUtil.remove(e.get("id"))}))},getContextInfo:function(t,n){let o=this,s=e.clone(n||{},!1),a=t._sourceType,r=t._fetchSource||s.defaultSource,d=s.initialCall||!1,h=this.ListConfig&&this.ListConfig.values,u=s.showCompletedRisks||l.get(C.COMPLETED_PREFERENCE);return new i((function(e,i){let n=o.ListConfig.getContextFields?o.ListConfig.getContextFields():"none",s=o.ListConfig.getContextIncludeFields?o.ListConfig.getContextIncludeFields():"none";s+=a?","+a:"",h&&h.length&&h.forEach((function(e){let t=d?e.initialFields:e.fields,i=d?e.initialInclude:e.include;if(t){t.split(",").forEach((function(e){e.includes(".")?n+=","+e:n+=","+(a?a+".":"")+e}))}i&&(s+=","+i)}));let m=c.getFieldsDefinition(t.getFieldDefinitionSource());t.fetch({fetchSource:r,filter:l.getSelectedFilterOption(),subFilter:l.getSelectedSubFilterOption(),completed:u,fields:n,include:s,definition:!m||!m.fieldDefinitionColumns||void 0,fieldDefinitionSource:t.getFieldDefinitionSource(),refresh:!0,onComplete:function(){o.fieldDefinitionSource=t.getFieldDefinitionSource(),o.resetCollection(t.get(a)),e(t)},onFailure:function(e,t){return w.buildNotification({title:_.CONTEXT_SELECTION_FAILURE,message:_.FAILED_TO_RETRIEVE_OR_ACCESS},"warning"),i(e,t)}})}))},getHistory:function(){return this.getRelatedResource("history")},getDataModelTrend:function(e){return this.getRelatedResource("rpn",e)},getRelatedResource:function(e,t){let n=this;return new i((function(i,o){let s=n.getCurrentDataModel(),a=new m;a.fetch({id:s.get("id"),refresh:!0,relatedSource:e,sourceType:t,onComplete:function(){i(a)},onFailure:function(e,t){return w.buildNotification({title:_.FETCH_FAILURE,message:f.getErrorMessage(e,t)},"error"),o(e,t)}})}))},saveDataModel:function(t,i){this.resetDataModelFromClone(t,i),this.preProcessFileManagement(t,i);let n=t.model.changedAttributes();Object.keys(n).length&&(this.changedSaveAttrsSinceLastChange=e.clone(n,!1)),this.saveIfNotWaitingForAsync(t,i)},deleteDataModel:function(t,n){let o=this,s=e.clone(n||{},!1),l=this.getCurrentNode(),r=l&&t&&l.model.id===t.id,c=r?l:t,d=this.treeDocument.getSelectedNodes();s.isSelect=Boolean(r);let h=c.model;if(d.length>1){let e=new a({id:"1",selectedNodes:d,modelInstance:this.DataModel,fieldDefinitionSource:this.fieldDefinitionSource,massUpdateModel:t&&t.model});h=e}return c&&new i((function(t,i){e.extend(s,{doNotCache:!0,doNotReload:!0,donotShowMessage:!0,isDisconnectModel:!0,onComplete:function(e){o.handleDeleteDataModelOnComplete(e,c,s,t)},onFailure:function(e,t){w.buildNotification({title:_.DELETE_FAILURE,message:f.getErrorMessage(e,t)},"error"),i()}}),h=h.destroy(s)}))},deleteDataModels:function(e,t){return this.deleteDataModel(e,t)},handleDeleteDataModelOnComplete:function(t,i,n,o){let s,a=n.isSelect,l=n.isMassUpdate;a=!e.is(a,"boolean")||a;let r=i.model;if(n.modelCacheFieldName)if(i&&l)i.models.forEach((e=>{this.modelCache&&this.removeTasksFromTaskCollection(e)}));else if(n.modelsToRemoveFromCache&&n.modelsToRemoveFromCache.length&&this.modelCache){let e=n.modelsToRemoveFromCache[0];this.removeTasksFromTaskCollection(this.modelCache[e].model)}e.is(i.getNextNode,"function")&&(s=i.getNextNode(),i.remove()),!l&&a&&(s?s.select():this.treeDocument.getNodeModelsLength()&&this.selectDataModel(0)),this._updateTaggerData(r,!0);let c=r.title;if(i.isBulkCloneModel&&(c="",r.models.forEach((e=>c+=e.get("title")+",")),c=c.substr(0,c.length-1)),!n.doNotShowDeleteMessage){let e=f.getNLS(this.NLS,r.get("type"),"Type");e=e||this.governingTypeNLS,w.buildNotification({message:e+' "'+c+'" '+_.DELETED,title:""},"success")}o&&o(n)},preProcessFileManagement:function(t,i){let n=this,o=t.get("references"),s=t.get("deliverables"),a=o&&o.relatedDataToAdd,l=s&&s.relatedDataToAdd,r=a&&a.length,c=l&&l.length;if(r||c){let o=e.clone(i||{},!1);o.callback=this.saveIfNotWaitingForAsync.bind(this),o.onFailure=function(e,t){n.handleSaveFailure(e,t,i)},r&&(e.extend(o,{fieldName:"references",parentRelName:"Reference Document"}),t.uploadFiles(a,o)),c&&(e.extend(o,{fieldName:"deliverables",parentRelName:"Task Deliverable"}),t.uploadFiles(l,o))}},unselect:function(t){if(e.is(t,"number")&&t>-1){let e=this.getCurrentNode(t);e&&e.unselect()}else this.treeDocument&&this.treeDocument.unselectAll()},handleProcessSaveDataModelOnComplete:function(t,i){let n=e.clone(i||{},!1),o=!t.isBulkCloneModel&&t.get("duplicatedModels");if(e.extend(n,{isMassUpdate:this.treeDocument&&this.treeDocument.getSelectedNodeModels().length>1}),o||t.isBulkCloneModel){t.isBulkCloneModel&&(o=t.model.models);let i=this;e.extend(n,{isDuplicate:!0,donotShowMessage:!0,doNotCache:!0});let s=o.length;o.forEach(((e,t)=>{n.isSelect=t===s-1,i.performPostSave(e,n)})),n.donotShowMessage=!0,this._showMessageForGoverningType(t,n),n.onComplete&&n.onComplete.apply(i,arguments)}else this.saveClassification(t,n)},processSaveDataModel:function(t,i){let o=this,s=e.clone(i||{},!1),l=s.isNew,r=s.isDisconnectModel,c=s.collection||this.collection,d=function(i,n,a){a.parseError?(this.handleSaveFailure(n,a.parseError,s),c.dispatchEvent("onError",[n,a])):(n.info&&e.extend(s,{info:n.info}),s.updatedModel=i,o.handleProcessSaveDataModelOnComplete(t,s))},h=function(e,t,i){o.handleSaveFailure(e,t,s),c.dispatchEvent("onError",[e,i])},u="none",m="none";if(l)o.TabConfig&&o.TabConfig.values.forEach((function(e){e.fields&&(m+=","+e.fields)})),o.TabConfigForCreate&&o.TabConfigForCreate.values.forEach((function(e){e.include&&(u+=","+e.include)})),t.model instanceof a||s.callSaveDataModel?t.model.save(null,{isNew:l,fields:s.fields?i.fields:m,include:s.include?i.include:u,customParams:s.customParams,onComplete:d,onFailure:h,ignoreFieldDefinitions:s.ignoreFieldDefinitions}):c.create(t.model,{isNew:l,fields:m,include:u,customParams:s.customParams,ignoreFieldDefinitions:s.ignoreFieldDefinitions,externalService:s.externalService,no3DSpace:s.no3DSpace,ignoreFields:s.ignoreFields,onComplete:d,onFailure:h});else{if(m="modifyAccess,deleteAccess,canModify,CanDelete,RMCConnectAccess,changeOwnerAccess,modified,canSelfAssign",(s.inValidRMC||s.isContextModified)&&(m+=",rmcActual.title,rmcGoverning.title,validConfiguration",u+=",rmcActual,rmcGoverning"),s.isCandidateAssigneeModified&&(m+=",candidateAssignees.title,candidateAssignees.proxyId,candidateAssignees.nativeId",u+=",candidateAssignees"),s.isDateModified&&(m+=",constraintDate,constraintType"),s.isCalendarModified&&(m+=",dpmTaskCalendarName,tasks.dpmTaskCalendarName",u+=",tasks"),s.isDeliverableAdded&&(m+=",deliverables.islast"),s.isReferenceAdded&&(m+=",references.islast"),s.isExternalComponent&&(s.isDeliverableAdded||s.isAttachmentsAdded)&&(m+=",references.revision,deliverables.revision",u+=",deliverables,references"),s.isExternalComponent&&t.model instanceof n)return void t.models.forEach((e=>{e.model.save(null,{isDeleteOrRemove:r,fields:s.fields?i.fields:m,include:s.include?i.include:u,customParams:s.customParams,onComplete:d,onFailure:h,ignoreFieldDefinitions:s.ignoreFieldDefinitions})}));t.model.save(null,{isDeleteOrRemove:r,fields:s.fields?i.fields:m,include:s.include?i.include:u,customParams:s.customParams,onComplete:d,onFailure:h,ignoreFieldDefinitions:s.ignoreFieldDefinitions})}},saveClassification:function(e,t){let i=this,n=t.onFailure,o=t.classificationCallBack,s=function(){t.ignorePostSave||(e.cancel(),i.performPostSave(e,t),t.onComplete&&t.onComplete.apply(this,arguments))};o?o([{identifier:e.id}]).then(s,n):s.apply(this,arguments)},getAdditionalDataModels:function(e,t){let i=l.get("context"),n=t.selectedObjectIds,o=t.isDisconnectModel,s=[...i&&i.additionalDataModels||[]];if(e){!f.findObject(s,"id",e.id)&&!o&&s.push(e)}if(n){let i=e.get(t.attrName),o=f.filterObjects(i,"id",n);o&&o.length&&(s=s.concat(o||[]))}return s},performPostSave:function(t,i){let n=e.clone(i||{},!1),o=n.isNew,s=(n.isMassUpdate,t.model||t),a=(n.invokeSaveEvent,n.isDisconnectModel,n.selectedObjectIds),l=n.isMultiObj,r=this.getDocument()||n.treeDocument;if(n.parentTask){s=n.parentTask;let e=s.get("tasks");s=e&&e.at(e.length-1)}if(this.handleDoNotCacheAttributes(s,i),o&&(n.isDuplicate&&this.collection.add(t),!n.treeDocument&&this.unselect()),r&&!n.isReload&&!n.doNotUpdateTreeNodeModel){let i;this.getAdditionalDataModels(s,n).forEach((o=>{let c;i=a?-1!==a.indexOf(o.id):s.id===o.id,c=r.getTreeNodeModelById(o.id),a&&!c&&o.get("sourceId")&&(i=-1!==a.indexOf(o.get("sourceId"))),(i||c||l)&&(e.extend(n,{treeNodeModel:c}),t=this.updateTreeNodeModel(o,n))}))}o||(s.dispatchEvent("onSaveModelComplete",[s.getAttributes()]),delete this.changedSaveAttrsSinceLastChange),n.doNotUpdateTaggerData||this._updateTaggerData(t,!1),n.doNotShowMessageForGoverningType||this._showMessageForGoverningType(s,n)},_showMessageForGoverningType:function(e,t){let i=e.get("type"),n=t.isNew?_.CREATED:_.UPDATED,o=f.getNLS(this.NLS,i,"Type");o=o||this.governingTypeNLS||i,!t.donotShowMessage&&w.buildNotification({message:o+' "'+e.title+'" '+n},"success"),t.info&&w.buildNotification({message:t.info,hideDelay:2e4},"warning")},updateTreeNodeModel:function(t,i){let n=e.clone(i||{},!1),o=n.isNew||n.isAddExisting,s={isNew:o,model:t,isSelect:n.isSelect,isExpand:n.isExpand,insertBefore:n.insertBefore,treeDocument:n.treeDocument||this.treeDocument,treeNodeModel:n.treeNodeModel||!o&&this.getCurrentNode(),modelCacheFieldName:n.modelCacheFieldName};return this.createClonedModel(s)},handleSaveFailure:function(e,t,i){return!i.donotShowMessage&&w.buildNotification({title:_.SAVE_FAILURE,message:f.getErrorMessage(e,t)},"error"),i.onFailure&&i.onFailure(e,t)},saveIfNotWaitingForAsync:function(e,t){this.shouldWaitForSave(e)||this.processSaveDataModel(e,t)},shouldWaitForSave:function(e){return e.isUploadingFiles&&e.isUploadingFiles()},fetchAdditionalDataForModels:function(t){let i=e.clone(t||{},!1),n={updateCurrentTreeDocument:!0,paramData:i.paramData||this.collection,collection:i.collection||this.collection};if(e.extend(i,n),this.collection&&this.collection.length>0)return this.getDataModels(i);i.onComplete&&t.onComplete.apply(this,arguments)},saveDataModels:function(t,i){let n=this,o=e.clone(i||{},!1),s=o.operation,l=o.donotShowMessage;t&&this.resetDataModelFromClone(t,i);let r=this.treeDocument.getSelectedNodes(),c=s===C.DUPLICATE;if(!r.length&&c&&(r=[t]),r.length){let i,s,d=new a({isDuplicate:c,selectedNodes:r,modelInstance:this.DataModel,fieldDefinitionSource:this.fieldDefinitionSource,massUpdateModel:t&&t.model});if(c){let e=this.getFieldsAndIncludeParamsForDataModelDetails(o);s=e.fields,i=e.include}else i="",s="modifyAccess,deleteAccess,promoteAccess,demoteAccess,fromConnectAccess,toConnectAccess,modified";d.save(null,{fields:s,include:i,onComplete:function(i){if(t&&t.cancel(),e.extend(o,{donotShowMessage:!0}),c){e.extend(o,{isNew:!0,treeNodeModel:void 0,isDuplicate:!0,doNotCache:!0}),i.get("duplicatedModels").forEach((e=>n.performPostSave(e,o)))}else r.forEach((t=>{e.extend(o,{treeNodeModel:t}),n.performPostSave(t.options.data,o)}));!l&&w.buildNotification({message:_.MASS_UPDATE_SUCCESS},"success"),o.onComplete&&o.onComplete.apply(this,arguments)},onFailure:function(e,t){!l&&w.buildNotification({title:_.MASS_UPDATE_FAILURE,message:f.getErrorMessage(e,t)},"error"),o.onFailure&&o.onFailure.apply(this,arguments)}})}},_updateTaggerData:function(e,t){this.taggerProxy&&this.taggerProxy.updateTagObject(e.model||e,t,this.fieldDefinitionSource).then((function(){}),(function(e){w.buildNotification({title:_.TAGGER_ERROR,message:e},"error")}))},updateCacheAndTaggerData:function(t,i){if(t){let n=e.clone(i||{},!1),o=n.forceUpdate,s=n.childrenTaggerUpdate;if(this.storageDataUtil.get(t.id)&&this.handleDoNotCacheAttributes(t,n),(o||this.taggerProxy&&!this.taggerProxy.taggerData.hasOwnProperty("pid://"+t.id))&&this._updateTaggerData(t,!1),s){let e=t.getChildRelationsNames();e&&e.length&&e.forEach((e=>{let i=t.get(e);i&&i.length&&i.forEach((e=>{(o||this.taggerProxy&&!this.taggerProxy.taggerData.hasOwnProperty("pid://"+e.id))&&this._updateTaggerData(e,!1)}))}))}}},handleContextExpansionCache:function(t,i){let n=l.getContextInfo();if(n&&n.id!==t){let o=n.expansions||[],s=o.includes(t);i?!s&&o.push(t):s&&o.splice(o.indexOf(t),1),e.extend(n,{expansions:o}),l.setContextInfo(n)}},duplicateDataModels:function(t){if(!this.validateDuplicateDataModels(t))return;let i=e.clone(t||{},!1),n=i.onComplete,o=i.onFailure;e.extend(i,{donotShowMessage:!0,onComplete:function(){w.buildNotification({message:_.DUPLICATE_SUCCESS},"success"),n&&n.apply(this,arguments)},onFailure:function(e,t){w.buildNotification({title:_.DUPLICATE_FAILURE,message:f.getErrorMessage(e,t)},"error"),o&&o.apply(this,arguments)}}),this.saveDataModels(i.cloneModelToSave,i)},validateDuplicateDataModels:function(){return!0},destroy:function(){if(this.collection&&delete this.collection,this.treeDocument){try{this.treeDocument.destroy&&this.treeDocument.destroy()}catch(e){}delete this.treeDocument}},removeDataModel:function(t,n){let o=this,s=e.clone(n||{},!1),a=s.parentId,l=a&&this.getDocument().getTreeNodeModelById(a);if(l=l&&l.cloneModel,!l&&this.modelCache){let e=this.modelCache[a];e&&(l=e.cloneModel)}return l.remove(s.attrName,t),new i((function(t,i){e.extend(s,{doNotCache:!0,doNotReload:!0,donotShowMessage:!0,isDisconnectModel:!0,onComplete:function(e,i){o.handleRemoveDataModelOnComplete(e,i),t(i)},onFailure:function(e,t){w.buildNotification({title:_.REMOVE_FAILURE,message:f.getErrorMessage(e,t)},"error"),i(t)}}),o.processSaveDataModel(l,s)}))},handleRemoveDataModelOnComplete:function(t,i){let n,o=i.isSelect;o=!e.is(o,"boolean")||o;let s=i.treeNodeModel;if(i.modelCacheFieldName&&"tasks"==i.modelCacheFieldName&&i.modelsToRemoveFromCache&&i.modelsToRemoveFromCache.length&&this.modelCache&&i.modelsToRemoveFromCache.forEach((e=>{this.removeTasksFromTaskCollection(this.modelCache[e].model)})),s&&e.is(s.getNextNode,"function")&&(n=s.getNextNode(),s.remove()),s&&o&&(n?n.select():this.treeDocument.getNodeModelsLength()&&this.selectDataModel(0)),!i.doNotShowRemoveMessage){let e=f.getNLS(this.NLS,t.get("type"),"Type");e=e||this.governingTypeNLS,w.buildNotification({message:e+' "'+t.title+'" '+_.REMOVED,title:""},"success")}},handleDoNotCacheAttributes:function(t,i){let n=e.clone(i||{},!1);if(!n.doNotCache){let e=n.doNotCacheAttributes?n.doNotCacheAttributes:this.TabConfig&&this.TabConfig.doNotCacheAttributes,i={};e?(e.forEach((e=>{i[e]=t.get(e),t.unset(e,{silent:!0})})),this.storageDataUtil.set(n.storageKey||t.id,t),t.set(i,{silent:!0}),t.resetChangedAttrs()):this.storageDataUtil.set(n.storageKey||t.id,t)}},processAddExisting:function(t,i){let n=e.clone(t||{},!1),o=n.parentCloneModel,s=f.getAttributeValues(i,"id");if(!o.add(n.attrName,s.toString(),{config:{validate:!0},doNotCache:!0,detailedObjects:i}))return;o.model.has(n.attrName)||o.model.set(n.attrName,o.get(n.attrName));let a=this,l=this.getDocument().getTreeNodeModelById(o.id);this.processSaveDataModel(o,{isAddExisting:!0,donotShowMessage:!0,attrName:n.attrName,treeDocument:l,selectedObjectIds:s,include:n.include,fields:n.fields,customParams:n.customParams,onComplete:this.handleAddExistingOnComplete.bind(this,n),onFailure:function(e,t){a.handleAddExistingOnFailure(e,t,n)}})},handleAddExistingOnComplete:function(e){w.buildNotification({message:_.ADD_EXISTING_SUCCESS},"success"),e.onComplete&&e.onComplete.apply(this,arguments)},handleAddExistingOnFailure:function(e,t,i){if(w.buildNotification({title:_.ADD_EXISTING_FAILURE,message:f.getErrorMessage(e,t)},"error"),i.attrName){let e=this.currentModel.get(i.attrName);e&&e.resetOperationFlags(!0)}i.onFailure&&i.onFailure.apply(this,arguments)},getRecursiveParentIds:function(t){let i=e.clone(t||{},!1);return(i.treeDocument||this.treeDocument).getRecursiveParentIds(i)},getSiblingIds:function(t){let i=e.clone(t||{},!1);return(i.treeDocument||this.treeDocument).getSiblingIds(i)},handleRemoveMember:function(e){let t,i,n=e.selectedNodeModels||this.treeDocument.getSelectedNodes();if(n.length>1)t=_.replace(_.REMOVE_MULTI_MEMBER_CONFIRM_MSG,{parentType:e.parentModel.get("nlsType"),parentName:e.parentModel.get("title")}),i=_.REMOVE+" - "+n.length+" "+_.MEMBERS;else{let o=n[0].model,s=o.get("projectAccess")===C.READER?_.READER:_.LEADER;t=_.replace(_.REMOVE_MEMBER_CONFIRM_MSG,{title:o.get("title"),role:s,parentType:e.parentModel.get("nlsType"),parentName:e.parentModel.get("title")}),i=_.REMOVE+" - "+o.get("title")}let o={dontResetModel:!0,title:i,message:t,yesEventFunc:this.handleRemoveSelectedNodeModels.bind(this,e),yesLabel:_.REMOVE,noLabel:_.CANCEL};w.confirmDialog(o)},handleRemoveSelectedNodeModels:function(t){let n=this,o=e.clone(t||{},!1),s=o.doNotShowRemoveMessage,a=o.doNotShowMessageForGoverningType,l=o.selectedNodeModels||this.treeDocument.getSelectedNodes(),r=o.parentModel;for(let e of l)r.remove(o.collectionAttr,e.cloneModel);return new i((function(e,t){let i={selectedNodes:l,isSelect:!0,doNotCache:!0,doNotShowMessageForGoverningType:a,doNotShowRemoveMessage:s,isDisconnectModel:!0,spinnerMsg:_.REMOVING,onComplete:function(t,i){i.selectedNodes.forEach((e=>{i.treeNodeModel=e,n.handleRemoveDataModelOnComplete(e.model,i)})),e(i)},onFailure:function(e,i){w.buildNotification({title:_.REMOVE_FAILURE,message:f.getErrorMessage(e,i)},"error"),t(i)}};n.processSaveDataModel(r,i)}))},isDataAvailableInCollection:function(e,t){return e.get(t)},getSupplierAdditionalInformation:function(t,i,n){let o=this,s=e.clone(n||{},!1);i.getUrl=function(e,t){return t.headers[d.CONTENT_TYPE]=d.ACCEPT_APPLICATION_JSON,t.headers["x-requested-with"]="XMLHttpRequest",d.getSupplierCompaniesInformationURL()};let a=[];i.forEach((e=>{a.push(e.get("id"))})),i.convertToRequestData=function(e,t,i){let n={companies:a};return JSON.stringify(n)},i.parse=function(e){return e};const l=new Map;i.fetch({debug:!1,onComplete:function(e){(e&&e.first()&&e.first().get("companies")).forEach((e=>{let t=e.title+" ("+e.registrationLocation+" - "+e.registrationId+")";l.set(e.uid,t)})),t.forEach((e=>{let t=e.getContextModel(),i=t.get("id"),n=l.get(i);t.set("title",n),t.set("image",require.toUrl("DS/ENOProjectMgmtCommonComponents/assets/images/Supplier_Entities_Thumbnail.png"))})),o.updateTreeDocumentForCollection(t,s)},onFailure:function(e,t){w.buildNotification({title:_.FETCH_FAILURE,message:f.getErrorMessage(e,t)},"error")}})},createTreeNodeModelCache:function(){this.modelCache=[];let e=this.treeDocument.getAllDescendants();e&&e.forEach((e=>{this.modelCache[e.id]=e}))},updatetreeNodeModelCache:function(e){this.modelCache&&(this.modelCache[e.id]=e)},removeFromTreeNodeModelCache:function(e){let t=e.getAllDescendants();this.modelCache&&t&&t.forEach((e=>{delete this.modelCache[e.id]}))},getDetailsThroughFederatedSearch:function(t){let n=e.clone(t||{},!1),o=n.selectPredicateArray||["ds6w:label","ds6w:type","ds6w:type_value","type_icon_url","preview_url","ds6w:resourceUid","resourceid","image"],s=n.sources||["3dspace"],a=n.specific_source_parameter,r=n.ids,c="";r.forEach((function(e){e&&0===e.indexOf("uuid")&&(e='"<'+e+'>"'),c+=""===c?e:" OR "+e}));let d="[ds6w:resourceUid]:("+c+")";return new i((function(t,i){u.sendRequest({selectPredicateArray:o,sources:s,query:d,locale:l.get("language"),specific_source_parameter:a,withSynthesisAttribute:Boolean(s&&-1!==s.indexOf("swym")),onComplete:function(i){let n=(e.is(i,"string")?JSON.parse(i):i).results;t(n)},onFailure:function(e,t){w.buildNotification({title:_.FETCH_FAILURE,message:f.getErrorMessage(e,t)},"error"),i()}})}))},getModelFromModelCache:function(e){return this.modelCache&&this.modelCache[e]&&this.modelCache[e].model&&this.modelCache[e].model},handleFetchAPI:function(e,t,i,n){let o=this;if(t&&t.length>0){const s=[];t.forEach((t=>{e&&e.length&&e.forEach((e=>{let i=e.get(t);i&&i.length>0&&s.push(i)}))})),s.length>0&&o._getDetailsThroughFetchApi(e,s,i,n)}},_getDetailsThroughFetchApi:function(t,n,o,s){let a=this,r=e.clone(s||{},!1);const c=new Map;if(n.forEach((e=>{e.forEach((e=>{if("TRUE"===e.get("fetchRequired")){let t=e.get("fetchAPI"),i=c.get(t);i||(i=new g,c.set(t,i)),i.add(e)}}))})),c.size>0){const e=[];for(const[t,i]of c){let o=i.find((e=>e.has("fetchService"))),s=o&&o.get("fetchService");if(s){let o=l.get(s)+t;e.push(a._callFetchAPI(n,i,o,r))}}e.length>0&&i.all(e).then((function(){o&&t&&t.length&&t.forEach((e=>{a.handleDoNotCacheAttributes(e,r)}))}),(function(){w.buildNotification({message:_.FETCH_FAILURE,title:_.ERROR},"error")}))}},_callFetchAPI:function(e,t,n,o){return new i((function(i,o){if(!(n&&t&&t.length>0))return i();{t.getUrl=function(e,t){return t.headers[d.CONTENT_TYPE]=d.ACCEPT_APPLICATION_JSON,t.headers["x-requested-with"]="XMLHttpRequest",n};let s=t.map((e=>e.get("i3dx")||e.get("id"))),a=[...new Set(s)].map((e=>({"ds6w:i3dx":e})));t.convertToRequestData=function(e,t,i){let n={data:a};return JSON.stringify(n)},t.parse=function(e){return e.data},t.fetch({debug:!1,onComplete:function(t){let n=new Map;return t.forEach((e=>{let t=e.get("ds6w:i3dx");n.set(t,e)})),e.forEach((e=>{e.forEach((e=>{let t=e.get("i3dx")||e.get("id"),i=n.get(t);if(i){let t={title:i.get("ds6w:label"),type:i.get("ds6w:type"),image:i.get("ds6w:previewURL")||i.get("ds6w:icon"),fetchRequired:"FALSE"};t["ds6w:kind"]=i.get("ds6w:kind"),e.set(t),e.resetChangedAttrs()}}))})),i()},onFailure:function(e,t){return o()}})}}))}});return S})),define("DS/ENOProjectMgmtCommonComponents/collection/ProfilesCollection",["UWA/Core","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/constants/Constants","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel","DS/ENOProjectMgmtCommonComponents/config/ProfilesPropertiesConfig","DS/ENOProjectMgmtCommonComponents/config/ProfilesListConfig","DS/ENOProjectMgmtCommonComponents/collection/ProjectMgmtViewCollection","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/Profile","DS/ENOProjectMgmtModels/Collections/Profiles","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d){"use strict";return a.extend({_uwaClassName:"ProfilesCollection",setup:function(){let e={};e.DataModels=c,e.DataModel=r,e.PropertiesConfig=o,e.TabConfig=o,e.TabConfigForCreate=o,e.ListConfig=s,e.CloneModel=n,e.governingType=l.TYPENAMES.PROFILES,e.governingTypeNLS=d.PROFILES,this._parent(e)}})})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtFileChooserCustomView",["UWA/Core","DS/Tweakers/TweakerBlob","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o){"use strict";return i.extend({supportedFormats:["json"],buttonGroup:void 0,toggle:void 0,setup:function(e){this.options=e,this.homeView=e&&e.homeView.parentView,this._parent(e)},render:function(){return this.container.empty(!0),this.fileUploader=new t({placeholder:o.SELECT_FILE}).inject(this.container),this.fileUploader.addEventListener("change",this._fileFieldChange.bind(this)),this},_fileFieldChange:function(e){var t=this;delete t.files;var i=e.dsModel.blob;if(i)if(t.files=e.dsModel,t.fileName=t.files._blobName,t._isValidFormat(e.dsModel._blobName)){let e,s=new FileReader;s.addEventListener("load",(function(){try{let i=JSON.parse(s.result);if(t.model.model.isNew()||t.model.compareCell(t.model.get("matrix"),i.matrix)){t.model.validateMatirx(i)?t.model.set({title:i.title,matrix:i.matrix,rmcType:t.homeView._rmcType}):e=!0}else n.buildNotification({message:o.MATRIX_CONFIGURATION_FIELD_CHANGE_ERROR},"error"),e=!0}catch(i){t.jsonError(i),e=!0}e&&(t.model.cancel(),t.model.dispatchEvent("disableSaveButton",Boolean(e)),t.clearFileUploaderText())})),s.readAsText(i)}else n.buildNotification({message:o.INVALID_FILE_FORMAT},"error")},clearFileUploaderText:function(){let e=this.fileUploader.getContent(),t=e&&e.getElement(".wux-tweakers-blob-span-text");t&&t.setContent()},_isValidFormat:function(e){var t=e.lastIndexOf("."),i=(t<1?"":e.substr(t+1)).toLowerCase();return this.supportedFormats&&-1!==this.supportedFormats.indexOf(i)},jsonError:function(e){e=e.name+" : "+e.message,n.buildNotification({title:o.MATRIX_CONFIGURATION_ERROR,message:e,hideDelay:5e3},"error")}})})),define("DS/ENOProjectMgmtCommonComponents/config/MatrixSettingsViewConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/views/ToggleView","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtHeatMapCustomView","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtFileChooserCustomView","DS/ENOProjectMgmtModels/Collections/SearchObjects","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l){"use strict";let r=e.extend({_uwaClassName:"MatrixSettingsViewConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"basic",values:[{label:l.IMPORT,name:"import",readWrite:"true",buttonType:"radio",toggleConfiguration:{toggleCols:2,toggleRows:1,toggleFlow:"row"},doNotDisable:!0,values:[{displayValue:l.CREATE_NEW_LABEL,actualValue:"new"},{displayValue:l.REPLACE_EXISTING,actualValue:"replace",checked:!0}],customView:i},{name:"importFile",customView:s},{label:l.TITLE,name:"title",type:"text",fields:"title,name,owner",include:"matrix,configuredItems",numberOfDisplayLines:1,numberOfEditableLines:1,removeCarriageReturns:!0,maxLength:128,validate:!0},{label:l.HEAT_MAP,name:"matrix",customView:o,isMatrixSettingView:!0},{readWrite:"true",label:l.WHERE_USED,name:"configuredItems",attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!1,type:"object",validate:!0,fetchSource:"RiskContextInfo",typeAheadCallback:a.typeAheadCallback,customView:n,fetchSourceSpecificFields:{RiskContextInfo:"matrixConfigurationCreateAccess, riskCreateAccess"},excludeSearchTypes:{"3dspace":["Task","Task Management"]},linkCallback:t.launchProperties,placeHolder:l.OBJECT_PLACEHOLDER,validateSameTenant:!0,include:"configuration"},{label:l.COLLABORATIVE_SPACE,name:"projectTitle",type:"text",group:l.MORE},{label:l.OWNER,name:"ownerInfo",type:"person",imageAttribute:"image",attributeToDisplay:"fullNameAndUsername",customView:n,singleObjectOnly:!0,linkCallback:t.launchProperties,validateSameTenant:!0,group:l.MORE},{name:"rmcType"}]});return r._instance=r._instance||new r,r._instance})),define("DS/ENOProjectMgmtCommonComponents/config/TabMatrixConfigCreate",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/MatrixSettingsViewConfig","DS/ENOProjectMgmtCommonComponents/config/MatrixConfigActionButtonConfig"],(function(e,t,i){"use strict";let n=e.extend({_uwaClassName:"TabMatrixConfigCreate",columnInfo:{},setup:function(){this.setColumnInfo()},type:"tab",actionButtonConfig:i,hide:!0,values:[{name:"",key:"matrixCreate",selected:!0,fields:"title,name,owner,modifyAccess,deleteAccess,project,projectTitle,configuredItems.title,configuredItems.name,configuredItems.image,configuredItems.typeicon,configuredItems.thumbnail,ownerInfo.title,ownerInfo.name,ownerInfo.image,ownerInfo.firstname,ownerInfo.lastname,ownerInfo.company,rmcType",include:"matrix,configuredItems,ownerInfo",config:t,checkFlag:!0}]});return n._instance=n._instance||new n,n._instance})),define("DS/ENOProjectMgmtCommonComponents/collection/MatrixConfigCollection",["UWA/Core","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/constants/Constants","DS/ENOProjectMgmtCommonComponents/utils/MatrixConfigCloneModel","DS/ENOProjectMgmtCommonComponents/config/TabMatrixConfigCreate","DS/ENOProjectMgmtCommonComponents/config/MatrixConfigListConfig","DS/ENOProjectMgmtCommonComponents/config/MatrixSettingsViewConfig","DS/ENOProjectMgmtCommonComponents/collection/ProjectMgmtViewCollection","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/MatrixConfiguration","DS/ENOProjectMgmtModels/Collections/MatrixConfigurations","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d,h){"use strict";return l.extend({_uwaClassName:"MatrixConfigCollection",_defaultConfiguration:void 0,setup:function(){let e={};e.DataModels=d,e.DataModel=c,e.PropertiesConfig=a,e.TabConfig=o,e.TabConfigForCreate=o,e.ListConfig=s,e.CloneModel=n,e.governingType=r.TYPENAMES.MATRIX_CONFIGURATION,e.governingTypeNLS=h.MATRIX_CONFIGURATION,this._parent(e)},getMatrixConfigDefinition:function(t){if(this.collection)return t instanceof e.Class.Model?t=t._attributes:e.is(t,"string")&&(t={id:t}),this.collection.get(t.id)},getMatrixConfigById:function(e){return e&&this.getMatrixConfigDefinition(e)},getDefaultConfiguration:function(){return!this._defaultConfiguration&&this.collection&&(this._defaultConfiguration=t.findObject(this.collection,"name",i.DEFAULT),this._defaultConfiguration||(this._defaultConfiguration=t.findObject(this.collection,"name",i.DEFAULT_OPPORTUNITY))),this._defaultConfiguration},validateAndGetFirstSelectionNodeModel:function(){let e=this.treeDocument.getSelectedNode();if(e||(this.selectDataModel(0),e=this.treeDocument.getSelectedNode()),e&&0===e._getRowID())return e}})})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtDetailsView",["UWA/Core","UWA/Class/View","DS/ENOProjectMgmtCommonComponents/collection/MatrixConfigCollection","DS/ENOProjectMgmtCommonComponents/components/PopupCommon","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/components/ProgressSpinner","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/FieldsDefinition","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c){"use strict";return t.extend({_uwaClassName:"ProjectMgmtDetailsView",init:function(t){let i=e.clone(t||{},!1);this._isExternalComponent?(this.height=i.height||this.height,this.context=i.context,this.dialogOptions=i.dialogOptions||this.dialogOptions,this.isCreateOperation?this.setupCreateOptions():this.setupDisplayOptions(),window.widget&&!window.widget.projectMgmtAlertManager&&(widget.projectMgmtAlertManager=o.init())):this[i.contentView?"contentView":"detailsAndRelationships"]=i[i.contentView?"contentView":"detailsAndRelationships"]},getMatrixConfigData:function(e){this.matrixConfigCollection=new i;let t=this,n={onComplete:function(){t.matrixConfigCollection.getDefaultConfiguration()},onFailure:function(){}};this.matrixConfigCollection.getDataModels(n)},handleUnsaveForSearchAndPreferences:function(){return!1},postCreateProcess:function(e){this.options.onCompleteCreate&&this.options.onCompleteCreate(e),this.dialog.close({dontClearAlertMessages:!0})},showHideRightPanel:function(e){this.options.togglePanel&&this.options.togglePanel(e)},showHideLeftPanel:function(){},getHeight:function(){return this.height},render:function(){if(!this.options._doNotRender)if(this.isCreateOperation)this._isExternalComponent&&(this.contentView=new this.detailsAndRelationships(this.options.container,this.createOptions),this.contentView.onCompleteSave=function(){}),this.dialogOptions.contentView=this.contentView,this.dialog=new n(this.dialogOptions),this.dialog.createDialog();else if(this._isExternalComponent){let e=this,t=Boolean(r.get("tasks"))?"":"&$definition=true";l.set("useExternalNotification",!1),this.configBase.viewCollection.getDataModels({collection:this.tasks,paramData:this.models,customParams:t,onComplete:function(i){e.models=i.viewCollection.collection._models;const n=e.models[0].get("dpmParent"),o=e.createContext(n.toJSON()[0]);e.context=o,l.set("context",o),t?(s.showProgressSpinner(e.options.container,c.FETCHING),o.fetch({fields:"none",customParams:t,include:"none",onComplete:function(){s.hideProgressSpinner(e.options.container),e.detailsAndRelationships=new e.detailsAndRelationships(e.options.container,e.displayOptions),e.detailsAndRelationships.deleteDataObjectModel=e.deleteModel.bind(e),e.detailsAndRelationships.render({model:e.models[0],selectedModels:e.models,context:o,doNotCache:!0})}})):(e.detailsAndRelationships=new e.detailsAndRelationships(e.options.container,e.displayOptions),e.detailsAndRelationships.deleteDataObjectModel=e.deleteModel.bind(e),e.detailsAndRelationships.render({model:e.models[0],selectedModels:e.models,context:o,doNotCache:!0}))}})}else this.detailsAndRelationships.render({model:this.models[0],selectedModels:this.models,context:this.options.parent})},deleteModel:function(e,t){let i=this;t.onComplete=function(e){i.options.onDeleteComplete&&i.options.onDeleteComplete(e)},t.onFailure=function(e,t){o.buildNotification({title:c.DELETE_FAILURE,message:a.getErrorMessage(e,t)},"error"),i.options.onDeleteFailure&&i.options.onDeleteFailure(e,t)},e.isBulkCloneModel?e.models.forEach((e=>{e.model.destroy(t)})):e.model.destroy(t)}})})),define("DS/ENOProjectMgmtCommonComponents/views/HomeViewBase",["UWA/Core","UWA/Class/View","DS/ENOProjectMgmtCommonComponents/views/MassUpdateView","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/collection/MatrixConfigCollection","DS/ENOProjectMgmtModels/Models/BaseContext","DS/ENOProjectMgmtModels/Models/AppSettings","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css"],(function(e,t,i,n,o,s,a,l){"use strict";return t.extend({_uwaClassName:"HomeViewBase",init:function(t){let l=e.clone(t||{},!1);this._nls=l.nls,this.appName=l.appName,this._rmcType=l.rmcType,this.container=l.container,this._appConfig=l.appConfig,this._paramData=l.paramData,this._viewCollection=l.viewCollection,this._viewConfig=l.viewConfig,this._initialCall=l.initialCall,this._trendConfig=l.trendConfig,this._homeTabConfig=l.homeTabConfig,this._trendTemplate=l.trendTemplate,this.baseContextModel=l.baseContextModel||s,this._trendChartConfig=l.trendChartConfig,this._contextSourceInfo=l.contextSourceInfo,this._tabConfigForCreate=l.tabConfigForCreate,this._tabConfigForMassUpdate=l.tabConfigForMassUpdate,this._contextSelectionConfig=l.contextSelectionConfig,this._detailsAndRelationships=l.detailsAndRelationships,this._detailsView=l.detailsView,this._leftPanelContent=l.leftPanelContent,this._rightPanelContent=l.rightPanelContent,this._rightPanelContentainer=l.rightPanelContentainer,this._rightPanelDragPanel=l.rightPanelDragPanel,this.dpmToolbar=l.dpmToolbar,this.homeBodyView={},this.isComponent=a.get("isComponent"),this._matrixConfigCollection=l.matrixConfigCollection||new o,this._homeTabConfig&&this._homeTabConfig.getObjectSearchSource(),window.widget&&(widget.projectMgmtAlertManager=n.init()),this._setExteranlDetailsPanelContainer(l),l.doNotLoadMassUpdateView||this.massUpdateView||(this.massUpdateView=new i(this))},_setExteranlDetailsPanelContainer:function(e){e.detailsPanelContainer&&(this._externalRightPanelOptions={detailsPanelContainer:e.detailsPanelContainer,openDetailsPanel:e.openDetailsPanel,closeDetailsPanel:e.closeDetailsPanel})},render:function(){if(this.isComponent&&!a.isValidCollabspace())return this.selectLabel.setContent(l.UNSUPPORTED_CREDENTIAL),!1;this.loadData()},getView:function(e){return this.homeBodyView[e]},reload:function(e){this.render(e)},loadData:Function.prototype,getHeight:Function.prototype,clearParamData:Function.prototype,handleUnsaveForSearchAndPreferences:Function.prototype})})),define("DS/ENOProjectMgmtCommonComponents/views/HomeViewTabBase",["UWA/Core","DS/Controls/Tab","DS/Controls/Button","DS/Controls/TooltipModel","DS/UIKIT/DropdownMenu","DS/E6WCommonUI/Views/DetailsDisplayView","DS/DocumentManagement/DocumentManagement","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/views/HomeViewBase","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","text!DS/ENOProjectMgmtCommonComponents/assets/templates/app-skeleton-template.html.handlebars","text!DS/ENOProjectMgmtCommonComponents/assets/templates/tmpl-risk-toolbar.html.handlebars","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Constants/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d,h,u,m,g,p){"use strict";let C={group1:".ds-app-toolbar-group.ds-navigation",group2:".ds-app-toolbar-group.ds-contextual-actions",group3:".ds-app-toolbar-group.ds-filtering",group4:".ds-app-toolbar-group.ds-panel-actions"};const f=400;let E=400;const D="ds-app-panel-open",w=".ds-app-toolbar-container";return c.extend({_uwaClassName:"HomeViewTabBase",_toolbarButtons:{},_customObjects:{},reset:function(){this.ddTabBar&&(this.ddTabBar.getContent().empty(),this.ddTabBar.destroy(),delete this.ddTabBar)},initializeContainers:function(t){let i=this,n=e.clone(t||{},!1);if(n.actionToolbarContainer)this.actionToolbarContainer=n.actionToolbarContainer,this.actionToolbarContainer.empty(),this.homeToolbarContent=this.actionToolbarContainer;else if(!this.isComponent){if(this._leftPanelContent)this._myPanelMainContent=n.container;else{this.container=this.container.setHTML(h);let e=this.container.getElement(".ds-app-skeleton-navigationbar");e.hide();let t=this.container.getElement(".ds-app-skeleton-statusbar");e.hide(),t.hide(),this._myPanelMainContent=this.container.getElement(".ds-app-skeleton-main-content"),this._leftPanelContent=this.container.getElement(".ds-app-skeleton-panel.ds-app-panel-left"),this._rightPanelContentainer=this.container.getElement(".ds-app-skeleton-panel.ds-app-panel-right"),this._rightPanelContent=this._rightPanelContentainer.getElement(".ds-app-panel-content"),this._rightPanelDragPanel=this._rightPanelContentainer.getElement(".ds-app-skeleton-panel-resize-handle");let o=0,s=0;this._rightPanelDragPanel.onmousedown=function(e){s=e.clientX,window.document.onmouseup=function(e){let t=i._leftPanelContent.hasClassName(D);i._setWidthPropertiesForContainerStyle(t,!0),e.preventDefault(),window.document.onmousemove=null,window.document.onmouseup=null},window.document.onmousemove=function(e){if(o=s-e.clientX,s=e.clientX,a=i._getPanelWidth(!1),E+o<a&&E+o>f){E+=o;let e=i._leftPanelContent.hasClassName(D);i._setWidthPropertiesForContainerStyle(e,!0)}e.preventDefault()}};let a=this._getPanelWidth(!1);this._createStyleElement(a,E,n)}"right"!=n.panel&&this._homeTabConfig&&this._homeTabConfig.leftPanel?(this._leftPanelContent.addClassName(D),this.homeToolbarContent=this.container.getElement(".ds-app-panel-head")):this.homeToolbarContent=this._myPanelMainContent.getElement(".ds-app-facet-toolbar")}!this.dpmToolbar&&this.homeToolbarContent&&(this.dpmToolbar=this.homeToolbarContent.getElement(w),this.dpmToolbar||(this.homeToolbarContent.setHTML(u),this.dpmToolbar=this.homeToolbarContent.getElement(w))),this.dpmToolbar&&this._addTabBar(n)},getRightPanelContent:function(){return this._externalRightPanelOptions&&this._externalRightPanelOptions.detailsPanelContainer||this._rightPanelContent},_getPanelWidth:function(e){let t=m.get("width");return e?t-E:t},_getRightPanelWidth:function(e){let t=m.get("width")-e;return t<f?f:t},_getContainerStyleHtml:function(e,t,i){let n=e+"px";return".ds-app-layouts-skeleton { --enoAppLeftPaneWidth: "+n+";--enoAppLeftPanePosition: "+(i?0:n)+";--enoAppContentPaneWidth: "+n+";--enoAppContentPanePosition: "+(i?n:0)+";--enoAppRightPaneWidth: "+t+"px;--enoAppRightPanePosition: -"+(t+"px")+";}"},_createStyleElement:function(t,i,n){(n.styleElement||e.createElement("style",{id:"commonStyleDimensionsContainer",html:this._getContainerStyleHtml(t,i,!n||!n.isContentPanel)})).inject(this.container||n.container)},_setWidthPropertiesForContainerStyle:function(e,t){let i=this.container.getElement("#commonStyleDimensionsContainer");if(i){let n=this._getPanelWidth(t);i.setHTML(this._getContainerStyleHtml(n,this._getRightPanelWidth(n),e))}this.setHeight()},checkCreateAccess:function(e){return Boolean(e&&(e.isProgramContext()||!e.canCreate()))},showHideRightPanel:function(e,t){this._externalRightPanelOptions?e?this._externalRightPanelOptions.openDetailsPanel():this._externalRightPanelOptions.closeDetailsPanel():this._rightPanelContentainer&&this._rightPanelContentainer.toggleClassName(D,e),this._setWidthPropertiesForContainerStyle(!t,e)},showHideLeftPanel:function(e,t){if(this._leftPanelContent.toggleClassName(D,e),e){if(this.showHideRightPanel(!1),this._homeTabConfig.leftPanel.navigatoFacetOnSelection){this.contextScope.removeContext({config:this._contextSelectionConfig.columnInfo.context});let e=this._homeTabConfig.leftPanel.defaultTab;m.setSelectedViewName(e),this.homeBodyView[e]?this.disableMassUpdateButton(!1):this._loadDataModels()}}else t&&t.doNotReload||this.handleCenterPanelView(t);this._setWidthPropertiesForContainerStyle(e,!1)},setDimensions:function(){if(this._rightPanelContentainer){let e=this._leftPanelContent.hasClassName(D),t=this._rightPanelContentainer.hasClassName(D),i=m.get("width");0!=i&&(i-10<E&&(E=i-10,E<f&&(E=f)),this._setWidthPropertiesForContainerStyle(e,t))}else this.setHeight()},getHeight:function(){this.homeToolbarContainer=this.container.getElement(w);let e=this.homeToolbarContainer&&this.homeToolbarContainer.clientHeight;if(this.isComponent){return this.container.offsetHeight-e}return e?this.height-e:this.height},setHeight:function(e){this.height=e||m.get("height"),this._setHeightForViews(this.homeBodyView),this.commonFacetView&&this._setHeightForViews(this.commonFacetView.homeBodyView)},_setHeightForViews:function(e){for(let t in e)if(e.hasOwnProperty(t))if(e[t].switchViews)for(let i in e[t].switchViews)e[t].switchViews.hasOwnProperty(i)&&e[t].switchViews[i].setHeight(this.getHeight());else e[t].setHeight&&e[t].setHeight(this.getHeight())},setWidgetOptions:function(e){let t=e.defaultTab,i=e.defaultTabFilter,n=e.defaultTabSubFilter;if(m.getSelectedViewName()){if(i){!m.getSelectedFilterOption()&&m.setSelectedFilterOption(i)}if(n){!m.getSelectedSubFilterOption()&&m.setSelectedSubFilterOption(n)}}else m.setSelectedViewName(t),i&&m.setSelectedFilterOption(i),n&&m.setSelectedSubFilterOption(n)},hasParamDataExists:function(){return this._paramData&&this._paramData.length},_addTabBar:function(i){let n=e.clone(i||{},!1),o=n.facetConfig||this._homeTabConfig.getPanelViewConfig();this.hasParamDataExists()?m.setSelectedViewName(o.defaultParamDataTab):o.alwaysLoadDefault&&(m.setAlwaysLoadDefault(!0),m.setSelectedViewName(o.defaultTab)),this.setWidgetOptions(o);let s=o.toolbarConfig.group1;this.dpmToolbar||(this.dpmToolbar=this.homeToolbarContent.getElement(w));let a=this.dpmToolbar.getElement(C.group1);n.doNotRenderTabs||a&&a.empty();for(let e=0;e<s.length;e++){let i=s[e],o=this.getToolbarDivContent(i),l=i.doNotCreate;if(i.doNotCreateCheck&&(l=this[i.doNotCreateCheck](i)),("tab"===i.type||"facet"===i.type||"multiView"===i.type)&&!l&&!1!==i.visible){if(this.ddTabBar)this.createTab(this.ddTabBar,i);else{this.ddTabBar=new t({id:"prjmgmtCommonToolbarTab",displayStyle:"strip",showComboBoxFlag:!1}),n.doNotRenderTabs||(this.ddTabBar.inject(o),o.inject(a)),this.createTab(this.ddTabBar,i);let e=this.handleTabClickEvents.bind(this,{parentView:this,_config:s});i.validateModificationsPending?this.ddTabBar.addEventListener("tabButtonClick",r.validateModificationsPending.bind(this,{parentView:this,yesEventFunc:e,noEventFunc:function(e){let t=e.dsModel.buttonGroup;t&&t.selectIndex(t.previouslySelectedIndex)}})):this.ddTabBar.addEventListener("tabButtonClick",e)}a.toggleClassName("hide",1===this.ddTabBar.tabBar.getTabCount())}}},_addToolbarContentForTab:function(t){if(!this.homeToolbarContent)return;let i,n,o=e.clone(t||{},!1).config;n=o.checkToolbarItemsVisibility&&e.is(o.getAllowedToolbarItems,"function")?o.getAllowedToolbarItems(this._currentModel):o.toolbarConfig,this.dpmToolbar||(this.dpmToolbar=this.homeToolbarContent.getElement(w)),this._resetToolbar();for(let e in n){if(!n.hasOwnProperty(e))continue;let o,s=n[e],a=this.dpmToolbar.getElement(C[e]);for(let e=0;e<s.length;e++){let n=s[e];this._addToolbarGroupItem(n,i,a,o,t)}if("group3"===e){r.findObject(s,"type","cardView")&&!this.isComponent&&this.dpmToolbar.addClassName("include-filtering-input"),this._enableFilterButton(s,t.isSwitchView)}}},_addToolbarGroupItem:function(e,t,i,n,o){e.groupInContextActionToolbar?(t||(t=this.getToolbarDivContent(e,"contextualActionsContainer",!0)),n=t):n=this.getToolbarDivContent(e),"cardView"!==e.type||this.isComponent||!1===e.visible?"button"===e.type&&!1!==e.visible&&n?(this.addButton(n,e,o.contentInstance,o.isSwitchView),n.inject(i)):e.isReferenceSwitchView&&(o.isSwitchView=!0,this._addToolbarGroupItem(o.rootConfig.switchViews,t,i,n,o)):n&&!o.doNotRenderTabs&&(n.addClassName("ds-input-element"),this.addContextSelection(n),n.inject(i))},getContext:function(){return m.get("context")},_enableFilterButton:function(e,t){let i=t;i||(i=r.findObject(e,"domId","filterNewButton")),i&&this.dpmToolbar.addClassName("include-filtering")},_getSwitchView:function(e,t){let i,n=e.switchViews.dropdown.items,o=t.switchViewName||m.getSwitchViewOption(e.name);return o&&(i=r.findObject(n,"name",o)),i||(i=n[0]),i},switchTab:function(t,i){if(this.isComponent)this.dispatchEvent("switchToRisksTab");else if(this.ddTabBar){let n=e.clone(i||{},!1),o=this._homeTabConfig&&this._homeTabConfig.getPanelViewConfig(),s=o&&o.toolbarConfig.group1;s&&s.length>t&&e.extend(n,{viewName:s[t].name}),this._processTabContentRenderView(n)}},switchView:function(e,t,i){this._processTabContentRenderView({facetConfig:t,viewName:t.name,switchViewName:t.name})},getConfigFromPanel:function(e,t){let i=r.findObject(e.toolbarConfig.group1,"name",t.viewName)||r.findObject(e.toolbarConfig.group1,"relatedViewName",t.viewName);i&&(t._config=r.findObject(e.toolbarConfig.group1,"name",i.parentViewName),t._config||(t._config=i))},_findFacetConfig:function(e,t,i){if(i||(i=this._homeTabConfig||this.parentView._homeTabConfig),t||(t=i.mainPanel),t.toolbarConfig.group1&&(e._config=r.findObject(t.toolbarConfig.group1,"name",e.viewName)),!e._config&&t.toolbarConfig.group1&&t.toolbarConfig.group1.length)for(let i=0;i<t.toolbarConfig.group1.length;i++){let n=t.toolbarConfig.group1[i];if(n.switchViews&&r.findObject(n.switchViews.dropdown.items,"name",e.viewName)){e._config=n;break}}if(!e._config&&i.mainPanel.toolbarConfig.group1)for(let t=0;t<i.mainPanel.toolbarConfig.group1.length;t++){let n=i.mainPanel.toolbarConfig.group1[t];if(n.switchViews&&r.findObject(n.switchViews.dropdown.items,"name",e.viewName)){e._config=n;break}}return e._config||(e._config=r.findObject(t.toolbarConfig.group1,"name",t.defaultTab)),e._config||(e._config=t),e._config},_findConfig:function(e){let t=m.getContextInfo(),i=this._homeTabConfig||this.parentView._homeTabConfig,n=e.facetConfig||t&&i.leftPanel.navigatoFacetOnSelection&&i.mainPanel;e.viewName||(e.viewName=m.getSelectedViewName()),n?this._findFacetConfig(e,n,i):(e._config||this.getConfigFromPanel(i.leftPanel,e),e._config||(e._config=i.leftPanel.toolbarConfig.group1[0]))},_processTabContentRenderView:function(t){let i=e.clone(t||{},!1);this._findConfig(i),i.parentView||(i.parentView=this),this.handleTabClickEvents(i)},handleTabClickEvents:function(t,i){let n,o,s=e.clone(t||{},!1),a=i&&i.options,l=s.rootConfig;if(l||(s.viewName&&(s._config.name===s.viewName?l=s._config:s._config.length&&(l=r.findObject(s._config,"name",s.viewName))),!l&&s._config.length&&a&&(l=r.findObject(s._config,"name",a.value),l||(l=s._config[0]))),l||(l=s._config),"multiView"===l.type?(o=s.currentTabConfig||this._getSwitchView(l,s),m.setSelectedSwitchViewOption(l.name,o.name)):o=l,!a&&this.ddTabBar&&(this.ddTabBar.value=l.name),o.referenceConfig){let t=o.referenceConfig;e.merge(o,t)}a&&a.facetConfig&&(o.type=a.facetConfig.type,o.bodyContainer=a.facetConfig.bodyContainer),s.context=this.getContext(o);let c=o.name;if(m.setSelectedViewName(l.name),this.setWidgetOptions(o),n=this.getCurrentView(l.name),this.isComponent){if(this.homeBodyContent=s.container||s.parentView&&s.parentView.container,!this.homeBodyContent)return}else this._homeTabConfig&&this._homeTabConfig.leftPanel?this.homeBodyContent=this.container.getElement(".ds-app-panel-body"):this.homeBodyContent=this._myPanelMainContent.getElement(".ds-app-content.ds-app-facet");n?n&&o.options&&("multiView"===l.type?this.createSwitchView(n,o,s,c,l):(e.merge(s,o.options),"all"===s.loadOption?(s.onComplete=this._postContentInit.bind(this,n,o,c,!0,l,s),s.onFailure=this._onContentInitFailure.bind(this,s),n.loadDataModels(s)):this._postContentInit(n,o,c,o.alwaysRender,l,s))):this.createSwitchView(n,o,s,c,l)},createSwitchView:function(t,i,n,o,s){let a,l=!0;i.options&&(i.options.viewConfig=this._viewConfig,("CommonFacetView"!==this._uwaClassName||i.options.useMatrixCollection)&&(i.options.matrixConfigCollection=this._matrixConfigCollection)),e.extend(n,i.options),n.container=this.container,n.leftPanelContent=this._leftPanelContent,n.rightPanelContent=this._rightPanelContent,n.rightPanelContentainer=this._rightPanelContentainer,n.rightPanelDragPanel=this._rightPanelDragPanel,n.detailsPanelContainer&&!this._externalRightPanelOptions&&this._setExteranlDetailsPanelContainer(n),"multiView"===s.type?(this.homeBodyView[s.name]?t=this.homeBodyView[s.name]:(t={switchViews:{}},this.homeBodyView[s.name]=t),t.switchViews[o]?l=!1:t.switchViews[o]=new i.content(n),a=t.switchViews[o]):(a=t=new i.content(n),this.homeBodyView[s.name]=t),n.loadOption?(n.onComplete=this._postContentInit.bind(this,a,i,o,l,s,n),n.onFailure=this._onContentInitFailure.bind(this,n),a.loadDataModels(n)):this._postContentInit(a,i,o,l,s,n)},_postContentInit:function(e,t,i,n,o,s){if(n){t.alwaysRender&&this.homeBodyContent.empty();let i=e.render(s);"tab"===t.type&&s.doNotRenderTabs?i&&i.inject(this._appContainer):i&&i.inject(this.homeBodyContent)}this.dpmToolbar&&t.className?(this.lastAddedClassName&&this.dpmToolbar.removeClassName(this.lastAddedClassName),this.dpmToolbar.addClassName(t.className),this.lastAddedClassName=t.className):s.actionToolbarContainer&&(this.actionToolbarContainer=s.actionToolbarContainer,this.actionToolbarContainer.empty(),this.homeToolbarContent=this.actionToolbarContainer,this.dpmToolbar=this.homeToolbarContent.getElement(w),this.dpmToolbar||(this.homeToolbarContent.setHTML(u),this.dpmToolbar=this.homeToolbarContent.getElement(w))),"tab"===t.type?this._addToolbarContentForTab({doNotRenderTabs:s.doNotRenderTabs,config:t,contentInstance:e,rootConfig:o}):e._addToolbarContentForTab?e._addToolbarContentForTab({doNotRenderTabs:!0,config:t,rootConfig:o}):this._addToolbarContentForTab({config:t,contentInstance:e,rootConfig:o}),this.updateStateOfActionsButtons(s.context||e.baseContext,t),this._showHideTabContent(e,i,s);let a=Boolean(e.detailsAndRelationships&&e.detailsAndRelationships.isPropertyPanelOpen());"summaryView"===s.viewName&&s.isComponent||this.showHideRightPanel(a),this.hasParamDataExists()&&1===this._paramData.length&&this._viewCollection.selectDataModel(0),this.setTitle(s)},_onContentInitFailure:function(e){d.buildNotification({message:"Error Occured",title:e},"error")},_showHideTabContent:function(e,t,i){let n=m.get("invalidRiskFilterisOn");for(let e in this.homeBodyView)if(this.homeBodyView.hasOwnProperty(e)){if(t===e&&!n)continue;let o=this.homeBodyView[e];if(o.switchViews){for(let e in o.switchViews)if(o.switchViews.hasOwnProperty(e)){let s=o.switchViews[e];this._hideTabContent(s,e,t,n,i)}}else this._hideTabContent(o,e,t,n,i)}e&&(e.show(i.viewName),e.loadData(i))},_hideTabContent:function(e,t,i,n,o){if(i!==t)!this.isComponent&&e.hide(o.viewName);else if(n)switch(n){case"set":m.set("invalidRiskFilterisOn","beforeFilter"),this.filterRisksBasedOnSearch("FALSE","validConfiguration",!0);break;case"beforeFilter":m.set("invalidRiskFilterisOn","fired"),e.show(o.viewName),e.loadData(o);break;case"fired":m.unset("invalidRiskFilterisOn"),this.filterRisksBasedOnSearch()}},onCreateDropdownMenuSelection:function(e,t){if(t.config){let e=this._tabConfigForCreate.columnInfo[t.name];e&&(e.config=t.config,this._tabConfigForCreate.values=[e])}else t.customView&&this._createCustomView(this,t.customViewKey,t,!0)},addViewByFilter:function(e,t,i){this.clearParamData(),-1!==t.className.indexOf("view-by-menu")&&m.setSelectedFilterOption(t.name),-1!==t.className.indexOf("filter-menu")&&m.setSelectedSubFilterOption(t.name);let n=this.getViewCollection();n&&n.resetCollection(),this.reload({showLoadSpinner:!0,ignoreFetchDataForView:!0})},clearParamData:function(){delete this._paramData},setSelectView:function(e){let t=m.getSelectedFilterOption(),i=m.getSelectedSubFilterOption();if(e.forEach((function(e){let n="fonticon";t!==e.value&&i!==e.value||(n+=" fonticon-check"),e.fonticon=n})),!t){r.findObject(e,"name",g.ALL_ITEMS).fonticon+=" fonticon-check"}return e},getToolbarDivContent:function(t,i,n){let o="ds-app-toolbar";return new e.createElement("div",{id:i||("tab"===t.type?"projectMgmtTabbarContainer":t.name),class:n||t.separator?o+=" include-separator":o})},_resetToolbar:function(){let e=this.dpmToolbar.getElement(C.group2);e&&e.empty();let t=this.dpmToolbar.getElement(C.group3);t&&t.empty();let i=this.dpmToolbar.getElement(C.group4);i&&i.empty()},createTab:function(e,t){let i=e.add({label:t.label,showTitleFlag:!1!==t.showTitleFlag,icon:t.font?{iconName:t.font,fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"2x"}:void 0,checkFlag:t.checkFlag,value:t.name}).button;return i.domId=t.name,t.child&&(i.child=t.child),i},initializeDropdownEvents:function(e){let t=this;return e.onClick.validateModificationsPending?r.validateModificationsPending.bind(this,{parentView:this,yesEventFunc:function(i,n){t[e.onClick.functionName](i,n,e)}}):t[e.onClick.functionName]},_createCustomView:function(e,t,i,n){return!this._customObjects[t]&&i.customView&&(this._customObjects[t]=new i.customView(this)),e=this._customObjects[t]||this[t],n&&e.render(),e},initializeButtonEvents:function(e,t,i){let n=this,o=e.buttonClick;if(o){let s=e.customViewKey,a=function(){let a=n;s&&(a=n._createCustomView(a,s,e)),"contentInstance"===o.invokeObject?i[o.functionName](o.params):e.dropdown?a[o.functionName](e,t,n._toolbarButtons[t].getContent(),!0):a[o.functionName](o.params)};o.validateModificationsPending?this._toolbarButtons[e.name].getContent().addEventListener("buttonclick",r.validateModificationsPending.bind(void 0,{parentView:n,yesEventFunc:a})):n._toolbarButtons[e.name].getContent().addEventListener("buttonclick",a)}},addButton:function(e,t,o,s){let a=t.name;this._toolbarButtons[a]&&this._toolbarButtons[a].destroy();let l=t.iconName;if(s){l=t.dropdown.getSwitchViewConfig().fonticon}this._toolbarButtons[a]=new i({domId:t.domId,recId:t.customViewKey,emphasize:t.emphasize,displayStyle:t.displayStyle,icon:{iconName:l,fontIconSize:t.fontIconSize,fontIconFamily:WUXManagedFontIcons.Font3DS},tooltipInfos:new n({shortHelp:t.shortHelp})}).inject(e),t.buttonClick?this.initializeButtonEvents(t,a,o):this.addDropDownItem(t,a,this._toolbarButtons[a].getContent(),!1,s)},addDropDownItem:function(e,t,i,n,s){let a=e.dropdown;if(a){let e=a.getItems("context"===a.useModel?this.getContext():"currentModel"===a.useModel?this._viewCollection&&this._viewCollection.getCurrentDataModel():a.useModel&&this[a.useModel](),this._viewCollection,s,this.getContext());1===e.length?a.onClick.validateModificationsPending?r.validateModificationsPending({parentView:this,yesEventFunc:this[a.items[0].value].bind(this,void 0,a.items[0])}):this[a.items[0].value](void 0,a.items[0]):(a.onInitialize&&this[a.onInitialize.functionName](e),this.dropdownCollection?this.dropdownCollection[t]&&this.dropdownCollection[t].destroy():this.dropdownCollection={},a.onClick?this.dropdownCollection[t]=new o({target:this._toolbarButtons[t].getContent(),items:e,events:{onClick:this.initializeDropdownEvents(a)}}):this.dropdownCollection[t]=new o({target:i,items:e}),n&&this.dropdownCollection[t].show())}},addContextSelection:function(e){let t=this._contextSourceInfo.fieldDefinitionSource,i=t&&l.get(t);if(i&&i.length)return this.contextView&&this.contextView.destroy(),this.contextView=new s({DocumentManagement:a,model:this.contextScope,homeView:this,displayMessage:d.displayMessage}),this.contextView.resetModel(this.contextScope),this._viewCollection.fieldDefinitionSource=t,this.contextView.setConfig(this._contextSelectionConfig.values),void this.contextView.render().inject(e);t&&this.listenTo(l,"onChange:"+t,this.addContextSelection.bind(this,e))},getToolbarButton:function(e){return this._toolbarButtons[e]},showMassUpdateToolbarButton:function(e){let t=this.massUpdateView&&this.massUpdateView.massUpdateButtons,i=t&&Object.keys(t).length;for(let i in t)t.hasOwnProperty(i)&&(t[i].visibleFlag=e);let n=this.dpmToolbar&&this.dpmToolbar.getElement("#toolbarMultiObjectActions");n&&n.toggleClassName("include-separator",Boolean(i&&e))},getCurrentViewFilterValues:function(){let t,i=this._homeTabConfig.getSpecificViewConfig(m.getSelectedViewName()),n=i&&this.getToolbarButtonConfig(i.toolbarConfig,"filterNewButton");if(n){let i=n.dropdown;t=e.is(i.getFilterItems,"function")?i.getFilterItems():[...n.dropdown.items]}return t},getToolbarButtonConfig:function(e,t){let i=e&&Object.keys(e);if(i&&i.length){let i=Object.values(e).flat();return r.findObject(i,"domId",t)}},getToolbarButtonName:function(e,t){let i=this.getToolbarButtonConfig(e,t);return i&&i.name},updateStateOfActionsButtons:function(e,t){let i=t&&t.toolbarConfig;if(i){let n=this.checkCreateAccess(e,t),o=this.getToolbarButton(this.getToolbarButtonName(i,"createNewButton")),s=this.getToolbarButton(this.getToolbarButtonName(i,"settingsButton"));o&&(o.disabled=n,o.tooltipInfos.shortHelp=this.getNLSMessageForCreateBtn(e,n,t)),this.isComponent&&s&&(s.disabled=n,s.tooltipInfos.shortHelp=this.getNLSMessageForSettingsBtn(e,n,t)),this.disableMassUpdateButton(!0)}},getNLSMessageForCreateBtn:function(e,t){let i=p.replace(p.CREATE,{appName:this.appName||""});if(t){if(e.get("project"))if(this.isComponent)i=p.NO_XPROJECT_CREATE_ACCESS_XPP;else{switch(i=p.NO_CREATE_ACCESS_TT_MSG,e.type){case g.TYPENAMES.PROJECT:i+=p.NO_DPMPROJECT_CREATE_ACCESS_TT_MSG;break;case g.TYPENAMES.XPROJECT:i+=p.NO_XPROJECT_CREATE_ACCESS_TT_MSG}}else i=p.COLLAB_SPACE_SELECT_ERROR}return i},getNLSMessageForSettingsBtn:function(e,t){let i=p.MATRIX_CONFIGURATION;if(t){i=e.get("project")?p.NO_RMC_ACCESS:p.COLLAB_SPACE_SELECT_ERROR}return i},disableMassUpdateButton:function(e){let t=this.massUpdateView&&r.filterObjects(Object.values(this._toolbarButtons),"recId","massUpdateView");for(let i in t)t.hasOwnProperty(i)&&(t[i].disabled=e)},loadData:function(t){let i=e.clone(t||{},!1);this.requiresReload?(delete this.requiresReload,this.reload(i)):i.doNotRenderTabs||this.switchTab(0,i)},show:function(e){this._appContainer&&this._appContainer.show();let t=this.getCurrentView(e);t&&t.show()},hide:function(){this._appContainer&&this._appContainer.hide();let e=this.getCurrentView(viewName);if(e)for(let t in e)if(e.hasOwnProperty(t)){e[t]&&e[t].hide()}},getCurrentView:function(){let e=m.getSelectedViewName(),t=this.homeBodyView[e];if(t&&t.switchViews){let i=m.getSwitchViewOption(e);return t.switchViews[i]}return!t&&this.commonFacetView?this.commonFacetView.getCurrentView():t},getViewCollection:function(){let e=this.getCurrentView();return e&&e._viewCollection||this._viewCollection},getViewFilterButtonLabel:function(e){if(!e)return;let t=this.getCurrentViewFilterValues(),i=t&&r.findObject(t,"name",e);return i&&i.text},destroy:function(){if(this.ddTabBar&&this.ddTabBar.destroy(),this.settingsButton&&this.settingsButton.destroy(),this.massUpdateButton&&this.massUpdateButton.destroy(),this.massUpdateView&&this.massUpdateView.destroy(),this._customObjects)for(let e in this._customObjects)this._customObjects.hasOwnProperty(e)&&(this._customObjects[e].destroy(),delete this._customObjects[e])}})})),define("DS/ENOProjectMgmtCommonComponents/views/MatrixConfigDetailsAndRelationships",["UWA/Core","DS/Controls/ComboBox","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/config/TabMatrixConfigCreate","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtDetailsAndRelationships","DS/ENOProjectMgmtModels/Models/AppSettings","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l){"use strict";let r=s.extend({_uwaClassName:"MatrixConfigDetailsAndRelationships",init:function(t,i){var n=e.clone(i||{},!1);this.isRMCContext=i&&i.isRMCContext,this.contextMatrixConfiguration=n.contextMatrixConfiguration,this._matrixConfigurationCollection=n.matrixConfigCollection,e.extend(n,{hideTab:!0,tabConfig:o,viewCollection:this._matrixConfigurationCollection}),this._parent(t,n)},clearRightPanelContent:function(){!this.isRMCContext&&this._parent.apply(this,arguments)},render:function(){if(this.treeDocument=this._matrixConfigurationCollection.getDocument(),this.propertiesList=this.detailsContainer.getElement(".object-properties-list"),this.labelContainer=e.createElement("div"),this.labelContainer.inject(this.propertiesList),this.selectLabel=e.createElement("label",{id:"selectLabel",text:l.SELECT_EXISTING_CONFIGURATION}),this.selectLabel.inject(this.labelContainer),this.comboBoxContainer=e.createElement("div"),this.comboBoxContainer.inject(this.propertiesList),this.comboBox=new t({elementsTree:this.treeDocument}),this.comboBox.selectedIndex=0,this.comboBox.inject(this.comboBoxContainer),this.comboBox.addEventListener("change",this.handleChangeMatrixConfigurations.bind(this)),this._matrixConfigurationCollection.getDataModelsCount()<=0)this.isCreate=!0;else{this.contextMatrixConfiguration&&this.treeDocument.selectNodeById(this.contextMatrixConfiguration),this._matrixConfigurationCollection.getCurrentDataModel().model.unset("configuredItems")}return this._parent({refresh:!0})},_enableDisableButtons:function(e){let t=this.relatedView[this.currentTab.key].getFieldViewByName("importFile"),i=t&&t.fileUploader;i&&(i.disabled=e)},beforeClose:function(){this.resetWidgetData&&this.reloadWidgetData(this.parentView,{loadMsg:l.MATRIX_CONFIG_LOADING})},_addDetailsTabContent:function(e){let t=this._canCreate(),n=this._hasAdministrativeEditAccess(),o=this.currentModel.model.isNew(),s=n&&this.currentModel.model.canModify(),l=a.get("isComponent");if(!t&&!o&&!s||l){(e=this.currentTab.config.cloneConfig(!0)).values.splice(0,2),delete e.columnInfo.import,delete e.columnInfo.importFile;let t=i.findIndex(e.values,"name","configuredItems");t>=0&&(e.values[t].readWrite=s)}this._parent(e,!0),this.isCreate?(this.comboBox.selectedIndex=-1,this._enableDisableButtons(!1)):this._enableDisableButtons(!s)},postCreateProcess:function(e,t,i){this.isCreate&&(this.isCreate=!1,this.comboBox.selectedIndex=0),this.resetWidgetData=!0,3===e&&(this.comboBox.selectedIndex=-1,this.comboBox.selectedIndex=0),this._parent(0,this.parentView,i)},handlePostSaveFailure:function(){let e=this;this.currentModel.model.unset("configuredItems"),this._matrixConfigurationCollection.getDataModelDetails({refresh:!0}).then((function(t){e.currentModel=t}))},_canCreate:function(){return Boolean(this.parentView._viewConfig.matrixConfigCreateAccess())},_hasAdministrativeEditAccess:function(){return Boolean(this.parentView._viewConfig.administrativeEditAccess())},handleActionButtonEvents:function(e,t){if(this._parent.apply(this,arguments),"export"===t.name){this.currentModel.cancel();let e=this.currentModel.title+".json",t=JSON.stringify({title:this.currentModel.title,name:this.currentModel.get("name"),matrix:this.currentModel.get("matrix")});i.downloadFile(t,e)}},handleChangeMatrixConfigurations:function(){let e=this;if(this.comboBox.selectedIndex>=0){this.showSpinnerView(this.detailsContainer,l.FETCHING),this.isCreate=!1,this.currentModel&&this.currentModel.cancel(),this._matrixConfigurationCollection.getDataModelDetails({refresh:!0}).then((function(t){e.currentModel=t,e.showDetailsDisplay(),e.currentModel.dispatchEvent("disableSaveButton",!0),e.hideSpinnerView()}))}},createActionsDropdownMenu:function(t){let i=e.clone(t||{},!1);e.extend(i,{isDefault:this.currentModel.isDefault(),isCreateNewSelected:-1===this.comboBox.selectedIndex}),this._parent(i)},updateStateOfFooterButtons:function(){this._parent.apply(this,arguments),this.saveButton&&(this.saveButton.label=this.isNew&&!this.isMassUpdate?l.CREATE_BUTTON_LABEL:l.SAVE)},handleTabCustomRender:function(e){if("import"===e){let t=this.currentModel.get(e);if(this.isCreate="new"===t,this.propertiesList.toggleClassName("hide",this.isCreate),this.isCreate)this.comboBox.selectedIndex=-1,this.createData(this._tabConfig.values[0],{attributes:this.currentModel.localAttributes});else{let e=this._matrixConfigurationCollection.validateAndGetFirstSelectionNodeModel();e&&(e=e.options.data,this.relatedView[this.currentTab.key].resetModel(e),this.currentModel.dispatchEvent("disableSaveButton",!0))}}},destroy:function(){delete this.saveButton,this.selectLabel.destroy(),this.labelContainer.destroy(),this._viewCollection.resetTreeDocument(),this.comboBox.removeEventListener("change"),this.comboBox.destroy(),this.comboBoxContainer.destroy(),this.propertiesList.destroy(),this._parent()}});return r})),define("DS/ENOProjectMgmtCommonComponents/views/CommonFacetView",["UWA/Core","DS/Controls/Button","DS/ControlsEx/IDCard","DS/Controls/TooltipModel","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtCommonComponents/views/HomeViewTabBase","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r){"use strict";let c=a.extend({_uwaClassName:"CommonFacetView",_options:void 0,init:function(t){this._options=e.clone(t||{},!1),this.container=this._options.container,this.parentView=this._options.parentView,this._leftPanelContent=this._options.leftPanelContent,this._rightPanelContent=this._options.rightPanelContent,this._parent.apply(this,arguments),this._appConfig=this._options.appConfig,this._tabConfig=this._options.tabConfig,this._viewConfig=this._options.viewConfig,this.facetConfig=this._options.facetConfig,this._viewCollection=this._options.viewCollection,this.headerContainer=this.container.getElement(".ds-app-facet-toolbar"),this.homeBodyContent=this.container.getElement(this.facetConfig.bodyContainer)},reset:function(){this.idCard&&this.idCard.destroy(),this.detailsAndRelationships&&this.detailsAndRelationships.destroy(),this.parentView.getRightPanelContent().empty(),this._parent.apply(this,arguments)},render:function(t){let i=e.clone(this._options||{},!1);i.currentModel=t;let n=o.getSelectedViewName(),a=this.homeBodyView[n];if(!a||a.requiresReload){let e=this._findFacetConfig(i,void 0,void 0);"multiView"===e.type&&(e=this._getSwitchView(e,i)),this._viewCollection||(this._viewCollection=e.options.viewCollection),this._viewCollection&&this._viewCollection.modelCache&&delete this._viewCollection.modelCache,this._tabConfig||(this._tabConfig=e.options.tabConfig),this.reset(),i.isContentPanel=!0,this.initializeContainers(i),this._currentModel=i.currentModel||this.parentView._viewCollection.getCurrentDataModel()||this._viewCollection.getCurrentDataModel(),this.detailsAndRelationships=this.parentView.getPropertyPanelInstance(this.parentView.getRightPanelContent(),{isCreate:!1,parentView:this,viewCollection:this._viewCollection,appConfig:this._appConfig,tabConfig:this._tabConfig,viewConfig:this._viewConfig,detailsAndRelationships:e.detailsAndRelationships||i.facetConfig.detailsAndRelationships}),this.addIdCard(),s.isProjectType(this._currentModel.get("type"))&&this.parentView.dispatchEvent("setBookmarkRootIdEvent",[{dropData:this._currentModel.model.getTransferObject()}])}return e.extend(i,{parentView:this}),this._processTabContentRenderView(i),this.currentView=this.parentView.getCurrentView(),this},getToolbarSplitter:function(){return new e.createElement("div",{class:"wux-controls-toolbar-category-separator"})},addHomeButton:function(e){delete this.homeButton,this.homeButton=new t({domId:"facetHomeButton",displayStyle:"smartIcon",icon:{iconName:"home",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"},tooltipInfos:new n({shortHelp:r.HOME})}).inject(e)},addIdCardContent:function(){let t=this.idCard.getContent().getElement(".wux-controls-toolbar-containers.wux-controls-toolbar-farContainer");this.getToolbarSplitter().inject(t);let i=new e.createElement("div",{class:"wux-generated-toolbar-items wux-toolbar-items wux-toolbar-items-far"}),n=new e.createElement("div",{class:"wux-tweakers"}),o=new e.createElement("div",{class:"wux-generated-toolbar-items-tweaker"});o.inject(i),n.inject(o),this.addHomeButton(n),i.inject(t);let s=!1,a=this.facetConfig;if(a.enableMaturityCompactView&&(s=a[a.enableMaturityCompactView](this._currentModel)),s){let e=this.idCard.getContent().getElement(".wux-idcard-content");l.addMaturityCompactContainer({parentView:this,maturityCompactContainer:e})}},openPropertyPanel:function(e){this.detailsAndRelationships.render({model:e,config:this._viewCollection.getPropertiesConfig(e)}),this.showHideRightPanel(!0)},infoButtonHandler:function(){this.detailsAndRelationships.isPropertyPanelOpen()?this.dispatchEvent("closePropertyPanel"):this.handleInfoButtonAction()},handleInfoButtonAction:function(){this.dispatchEvent("closeCreationPanel"),this.dispatchEvent("closeConfigurationPanel");let t=this.getCurrentView();if(t&&e.is(t.validateInfoActionButton,"function")&&!t.validateInfoActionButton())return void this.dispatchEvent("closePropertyPanel");let i,n=!0,s=t&&t.getSelectedRowsLength&&t.getSelectedRows().at(0),a=o.getCurrentViewName();s&&"members"!=a?a&&"ganttView"===a?i=this._viewCollection&&this._viewCollection.getModelFromModelCache(s.id):(n=!1,t.handleRowSelection(s)):i=this._currentModel.model,n&&this.openPropertyPanel(i)},setTitle:function(t){let i=e.clone(t||{},!1);e.extend(i,{doNotSetCount:!0}),this.parentView.setTitle(i)},resetContextFlag:function(){let e=o.get("context");e&&delete e.dataFetched},initializeIdCardEvents:function(){let e=this;this.idCard&&this.idCard.addEventListener("infoClicked",this.infoButtonHandler.bind(this)),this.homeButton&&this.homeButton.getContent().addEventListener("buttonclick",(function(){let t=e.getTabBarConfig();e.dispatchEvent("closeCreationPanel"),e.detailsAndRelationships&&(e.detailsAndRelationships._isPropertyPanelOpen=!1),e.resetContextFlag(),o.setLastSelectedContextCache(),e.showHideLeftPanel(!0),e.setTitle(t),e.parentView.dispatchEvent("removeBookmarkRootIdEvent",[{dropData:{},success:!0}])})),this.removeEvent("updateCommonFacet"),this.removeEvent("onSelectionChange"),this.removeEvent("closePropertyPanel"),this.listenTo(this,{updateCommonFacet:this.fetchAndUpdateIDCard.bind(this),onSelectionChange:function(){this.detailsAndRelationships.isPropertyPanelOpen()&&e.handleInfoButtonAction()},closePropertyPanel:function(){this.detailsAndRelationships&&(this.detailsAndRelationships._isPropertyPanelOpen=!1),this.showHideRightPanel(!1)}}),this.detailsAndRelationships&&this.detailsAndRelationships._isPropertyPanelOpen&&this.detailsAndRelationships.render()},addIdCard:function(){delete this.homeButton,this.idCard=new i({isFoldedFlag:!0,infoVisibleFlag:!0,identifier:"ProjectMgmtCommonFacetIdCard",subTitle:this._currentModel.get("description")||" "}),this.addIdCardContent(),this.initializeIdCardEvents(),this.idCard.inject(this._getIdCardContainer()),this.fetchAndUpdateIDCard()},updateIdCard:function(){this.idCard&&(e.extend(this.idCard,{titleText:this._currentModel.title,titleIcon:this._currentModel.get("typeicon"),pictureSrc:this._currentModel.get("image"),subTitle:this._currentModel.get("description")||""}),this.setTitle(),l.updateMaturityCompactView({parentView:this}))},fetchAndUpdateIDCard:function(e){this._currentModel.get("image")?this.updateIdCard():this._viewCollection.getDataModelDetails({refresh:!0,model:this._currentModel.model}).then(this.updateIdCard.bind(this)),e&&this.currentView&&this.currentView.dispatchEvent("onPostContextModify")},getRightPanelContent:function(){return this.parentView.getRightPanelContent()},showHideRightPanel:function(e){return this.parentView.showHideRightPanel(e,!0)},showHideLeftPanel:function(e,t){return this.parentView.showHideLeftPanel(e,t)},getTaggerProxy:function(){return this.parentView.getTaggerProxy()},createNew:function(e){return this.parentView.createNew(e)},getPropertyPanelInstance:function(e,t){return this.parentView.getPropertyPanelInstance(e,t)},_getIdCardContainer:function(){return this.container.getElement(".ds-app-skeleton-idcard")},oncreateNewDropdownSelection:function(e,t,i){return this.parentView.onCreateDropdownMenuSelection(e,t,i,this.getCurrentView())},getValidSelectionModel:function(){return this.getCurrentView().getValidSelectionModel()},getTabBarConfig:function(){return this.currentView&&this.currentView.tabBarConfig},postCreateProcess:function(){this.setTitle()},getDialog:function(){return this.parentView.getDialog()},canHideTab:function(e){let t=this.parentView._viewCollection.getCurrentDataModel();return e.canHideTab(t)},destroy:function(){this.homeButton&&(this.homeButton.destroy(),delete this.homeButton),this.idCard&&(this.idCard.destroy(),delete this.idCard),this.detailsAndRelationships&&(this.detailsAndRelationships.destroy(),delete this.detailsAndRelationships),this.bodyContent&&(this.homeButton.destroy(),delete this.bodyContent);for(let e in this.homeBodyView){let t=this.homeBodyView.hasOwnProperty(e)&&this.homeBodyView[e];if(t&&t.switchViews)for(let e in t.switchViews)t.switchViews.hasOwnProperty(e)&&t.switchViews[e].destroy&&t.switchViews[e].destroy();else t&&t.destroy&&t.destroy()}}});return c})),define("DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtHomeView",["UWA/Core","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/components/PopupCommon","DS/ENOProjectMgmtCommonComponents/components/ProgressSpinner","DS/ENOProjectMgmtCommonComponents/views/CommonFacetView","DS/ENOProjectMgmtCommonComponents/views/HomeViewTabBase","DS/ENOProjectMgmtCommonComponents/views/MatrixConfigDetailsAndRelationships","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/BaseContextScope","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Utils/StorageDataUtil","DS/ENOProjectMgmtModels/Utils/DataUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css"],(function(e,t,i,n,o,s,a,l,r,c,d,h,u,m,g,p){"use strict";let C="summaryView";return l.extend({_uwaClassName:"ProjectMgmtHomeView",init:function(e){this._parent(e),this.contextScope=new d,widget.projectMgmtAlertManager=n.init(),this._initAppPreference(),this.initializeEvents(),s.initializeProgressSpinner(this._getPositionContainer(this,e))},reset:function(){this.container&&this.container.click(),delete this._options,this.dpmToolbar&&(this.dpmToolbar.empty(),this.dpmToolbar=void 0),this.homeToolbarContent&&(this.homeToolbarContent.empty(),this.homeToolbarContent=void 0);for(let e in this.homeBodyView)if(this.homeBodyView.hasOwnProperty(e)){this.homeBodyView[e].destroy(),delete this.homeBodyView[e]}this._viewCollection.resetCollection()},reload:function(t){let i=e.clone(t||{},!1),n=c.get("invalidRiskFilterisOn");i.valiateInvalidRisksContext&&n&&"fired"===n&&c.set("invalidRiskFilterisOn","set"),i.donotInitializeContainers=!0,this._options&&(i.container=this._options.container,i.isComponent=this._options.isComponent),this._parent(i)},render:function(t){let i=e.clone(t||{},!1);return i.doNotRenderTabs||i.donotInitializeContainers||this.reset(i),this._options=i,i.donotInitializeContainers?delete t.donotInitializeContainers:this.initializeContainers(t),i.refresh&&this.clearContentForRefresh(),this._loadDataModels(i),this.container},setOptions:function(e){this._options=e},_getPositionContainer:function(t,i){let n=e.clone(i||{},!1);if(!t)return;let o=t.container.classList;return o.contains("ds-app-container")||o.contains("risk-view")||o.contains("summary-card")?t.container:this._getPositionContainer(n.parentView||t.parentView)},_loadDataModels:function(t){let i=e.clone(t||{},!1);i.showLoadSpinner&&s.showProgressSpinner(this._getPositionContainer(this,i),this._nls.LOADING),this.handleParamDataObjectsInApp();let n,o=this.getContextInfo(),a=o&&o.id||c.getContextId();i.context?(n=i.context,n=this.handleContextForModel(i.context),this.stopListening(i.context,"onChange:"+u.XPROJECT_COLLAB_SPACE,this.handleContextCollabSpaceChange),this.listenTo(i.context,"onChange:"+u.XPROJECT_COLLAB_SPACE,this.handleContextCollabSpaceChange),this.context=n,this.contextScope.set("context",this.context,e.extend(i,{parentView:this,config:this._contextSelectionConfig.values[0]}))):(e.extend(i,{parentView:this,detailedObjects:[o],config:this._contextSelectionConfig.values[0]}),o?n=c.get("context"):(n=this.contextScope.get("context"),n&&(n.length&&this.contextScope.remove("context",void 0,i),n=void 0)));let l=this.onCompleteDataModels.bind(this,i),r=this.onFailureDataModels.bind(this,i);i.onComplete=l,i.onFailure=r,!this.hasParamDataExists()&&n||a?!n&&a?this._handleAddContexScope(a,i):(e.extend(i,{initialCall:this._initialCall}),this._viewCollection.getContextInfo(n,i).then(i.onComplete,i.onFailure)):(i.paramData=this._paramData,i.initialCall=this._initialCall,this._viewCollection.getDataModels(i))},_handleAddContexScope:function(i,n){let o=e.clone(n||{},!1);o.onComplete||(o.onComplete=this.onCompleteDataModels.bind(this,o)),o.onFailure||(o.onFailure=this.onFailureDataModels.bind(this,o)),o.detailedObject=g.getDetailedObject(i,o.detailedObjects),o.initialCall=this._initialCall;let s=g.getObjectDataFromDropSearchOrTypeAhead(o),a=s.id,l=g.getObjectForAdding(a,{attrs:s,modelConstructor:this.baseContextModel,sourceInfo:o.parentView&&o.parentView._contextSourceInfo||o.homeView._contextSourceInfo});this.contextScope.set(t.CONTEXT_ATTR,l,o),this._viewCollection.getContextInfo(l,o).then(o.onComplete,o.onFailure)},_loadMatrixConfigurations:function(e){let t=this,i={rmcType:t._rmcType,onComplete:function(){t._matrixConfigCollection.getDefaultConfiguration(),t._processPostCompleteDataModels(e)},onFailure:function(){}};this._matrixConfigCollection.getDataModels(i)},_processPostCompleteDataModels:function(t){let i=e.clone(t||{},!1);i.matrixConfigCollection=this._matrixConfigCollection,c.getContextInfo()&&this._homeTabConfig.leftPanel.navigatoFacetOnSelection?this.showHideLeftPanel(!this._homeTabConfig.leftPanel.navigatoFacetOnSelection):this._processTabContentRenderView(i),this.handleGetRisksResponse(i),i.showRefreshMessage&&n.buildNotification({message:p.REFRESH_SUCCESSFUL},"success")},_loadMatrixConfigurationDetails:function(){let e=this.contextScope.getConnectedRMC(),t={parentView:this,isRMCContext:!0,matrixConfigCollection:this._matrixConfigCollection,modelConstructor:r,contextMatrixConfiguration:e&&e.id},i=this.getPropertyPanelInstance(this.container,t);this.dialog=new o({title:p.MATRIX_CONFIGURATION,saveButtonLabel:p.SAVE,contentView:i,doNotRepeat:!0,beforeCloseCallBack:i.beforeClose.bind(i)}),this.dialog.createDialog()},_initAppPreference:function(){if(!this.isComponent){let e=widget.getValue("completedRisks");e?widget.deleteValue("completedRisks"):e=widget.getValue(t.COMPLETED_PREFERENCE);let i=this._appConfig.completedPreference&&this._appConfig.completedPreference.getDefault();c.set(t.COMPLETED_PREFERENCE,e||i);let n={name:t.COMPLETED_PREFERENCE,type:"list",defaultValue:i,options:this._appConfig.completedPreference&&this._appConfig.completedPreference.values,label:this._nls.SHOW_COMPLETED};widget.addPreference(n)}},initializeEvents:function(){let e=this;this.listenTo(this,"resetModel",this.resetCurrentModel),this.listenTo(c,"onChange:dimensions",this.setDimensions),this.listenTo(widget,{onSearch:function(t){e.filterRisksBasedOnSearch(t,"title",!0)},onResetSearch:this.filterRisksBasedOnSearch})},filterRisksBasedOnSearch:function(e,t,n){c.setFilterSearchString(e||""),i.validateModificationsPending({parentView:this,isReload:!0,dontResetModel:!0,yesEventFunc:this.processFilterRisks.bind(this,{yesEvent:!0,searchColAttr:t||"title",searchFilter:e,filterFromTreeDocument:n}),noEventFunc:this.processFilterRisks.bind(this,{searchColAttr:t||"title",searchFilter:e,filterFromTreeDocument:n})})},processFilterRisks:function(t){let i=e.clone(t||{},!1);if(i.callback=this.processFilterRisks.bind(this,t),!this.handleUnsaveForSearchAndPreferences(i)){let e=i.searchFilter,o=i.searchColAttr,s=i.filterFromTreeDocument;e||s||!this.taggerRiskIds||(e=this.taggerRiskIds,o="id");let a,l=this.getCurrentView(),r=c.getCurrentViewName();if(a=this.homeBodyView[r]?this:this.commonFacetView,l._options&&l._options.doNotSearchInCurrentTab)t.searchFilter&&n.buildNotification({message:p.INFO,title:p.SEARCH_NOT_SUPPRTED_IN_VIEW},"info");else{l._viewCollection.filterDataModels(e,o,{filterFromTreeDocument:s});let i=l._options&&l._options._config;a._processTabContentRenderView({_config:i}),this.setTitle(t)}}},handleContextForModel:function(e){let t=e.getTransferObject(),n=i.getObjectDataFromDropData(t.data.items[0]);return i.getObjectForAdding(n.id,{modelConstructor:this.baseContextModel,attrs:n,sourceInfo:this._contextSourceInfo})},handleContextCollabSpaceChange(e,t){let i=c.get("context"),n=i.get("project"),o=t&&t.id;if(this._options&&n!==o){delete this._options.doNotFetchDataForView,this._options.ignoreFetchDataForView=!0,i.set("project",o);for(let e in this.homeBodyView)if(this.homeBodyView.hasOwnProperty(e)){this.homeBodyView[e].destroy(),delete this.homeBodyView[e]}this.render(this._options)}},getContextInfo:function(){let e=c.getContextInfo();if(this.isParamSupportedTypeForContext()){let t=this._paramData[0];e={id:t.objectId,type:t.objectType,name:t.displayName,serviceId:t.serviceId},this.clearParamData()}return e},getAppConfig:function(){return this._appConfig||{}},clearContentForRefresh:function(){this.homeBodyView={},m.clear(),this.homeBodyContent&&this.homeBodyContent.empty()},isParamObjectsSupportedInApp:function(){let e,t,i=this.hasParamDataExists(),o=this._appConfig.supportedTypesAsParamsInAppListing;if(!i||!o)return!1;let s=[],a={};return this._paramData.forEach((i=>{e=i.objectType,o.includes(e)?s.push(i):(t=i.displayType||e,a[t]||(a[t]=[]),a[t].push(i.displayName))})),Object.keys(a).length&&n.showSingleErrorMessageForDataObjects(a,p.PARAM_DATA_NOT_SUPPORTED),this._paramData=s,Boolean(s.length)},handleGetRisksResponse:function(e){this.setTitle(e),s.hideProgressSpinner(this._getPositionContainer(this,e)),this.load6WTagger(e)},load6WTagger:function(t){let i=this,o=e.clone(t||{},!1);if(this._options.hide6WTagger)return;let s=this.taggerProxy&&this.taggerProxy.tnProxy;s&&(o.tnProxy=s),!s&&(s=o.tnProxy),!s&&this.isComponent||this._viewCollection.processTagger(o).then((function(e){i.taggerProxy=e,i.updateTaggerData(),i.listenTo(i.taggerProxy,"onSubjectChanged",(function(e){let t=Boolean(e&&(Object.keys(e.allfilters).length||Object.keys(e.localfilters).length));widget.setValue("isTaggersSelected",t),i.taggerRiskIds=[],e&&e.filteredSubjectList&&e.filteredSubjectList.length&&e.filteredSubjectList.forEach((function(e){i.taggerRiskIds.push(e.split("pid://")[1])})),i.filterRisksBasedOnTags(i.taggerRiskIds)}))}),(function(e){n.buildNotification({message:p.TAGGER_ERROR,title:e},"error")}))},filterRisksBasedOnTags:function(e,t){this._viewCollection.filterDataModels(e,"id",t),this._processTabContentRenderView(),this.setTitle(t)},getTaggerProxy:function(){return this.taggerProxy},updateTaggerData:function(){let e=this.taggerProxy;if(!c.get("context")&&e){let t=this._viewCollection&&this._viewCollection.getDocument(),i=t&&t.getChildren();e.updateMappedTagObjects(i)}},handleParamDataObjectsInApp:function(){let e,t,i=this._appConfig.supportedTypesAsParamsInAppListing;if(!this.hasParamDataExists()||!i)return!1;let o={},s=[],a=[],l=[],r=this._appConfig.supportedTypesAsParamsForContext,c=this._paramData.length;this._paramData.forEach((n=>{e=n.objectType,(n.objectType||n.displayType)&&(i.includes(e)?s.push(n):r.includes(e)?l.push(n):(t=n.displayType||e,o[t]||(o[t]=[]),o[t].push(n.displayName),a.push(n)))}));let d=!0,h=l.length;s.length?this._paramData=s:1===h&&(this._paramData=l,d=!1),d&&h&&l.forEach((e=>{t=e.displayType||e.objectType,o[t]||(o[t]=[]),o[t].push(e.displayName)})),a.length===c&&this.clearParamData(),Object.keys(a).length&&n.showSingleErrorMessageForDataObjects(o,p.PARAM_DATA_NOT_SUPPORTED)},isParamSupportedTypeForContext:function(){return this.hasParamDataExists()&&1===this._paramData.length&&this._appConfig.supportedTypesAsParamsForContext&&this._appConfig.supportedTypesAsParamsForContext.includes(this._paramData[0].objectType)},handleCenterPanelView:function(i){if(this._homeTabConfig.leftPanel){if(!i){let e=this._viewCollection.getCurrentDataModel();if(e){if(this.contextScope.set(t.CONTEXT_ATTR,e.model),this.commonFacetView)for(let e in this.commonFacetView.homeBodyView)if(this.commonFacetView.homeBodyView.hasOwnProperty(e)){this.commonFacetView.homeBodyView[e]&&(this.commonFacetView.homeBodyView[e].requiresReload=!0)}}else e=c.get("context"),this._viewCollection.resetCollection(),this._viewCollection.getCollection().push(e),this._viewCollection.resetTreeDocument(),this._viewCollection.getDocument().selectNodeByRowId(0),this.contextScope.setContextCache(e);e&&e.model&&(e.model.cached=e.model.fetched=!1)}if(!this.commonFacetView&&this._homeTabConfig.mainPanel){let t=e.clone(i||this._homeTabConfig.mainPanel.options||{},!1);e.extend(t,{parentView:this,viewConfig:this._viewConfig,container:this._myPanelMainContent,leftPanelContent:this._leftPanelContent,rightPanelContent:this._rightPanelContent,facetConfig:this._homeTabConfig.mainPanel,rightPanelContentainer:this._rightPanelContentainer,rightPanelDragPanel:this._rightPanelDragPanel}),this.commonFacetView=new a(t)}this.setContextInitialLoad(),this.commonFacetView&&this.commonFacetView.render(i&&i.currentModel)}},setContextInitialLoad:function(){let t=c.get("context");t&&e.extend(t,{initialLoad:!0})},onCompleteDataModels:function(t,i){let n=e.clone(t||{},!1),o=n.ignoreFetchDataForView||this._options.ignoreFetchDataForView;i&&i instanceof e.Class.Model&&(this.clearParamData(),this.dropdownCollection&&this.dropdownCollection.viewFilterbuttonContainer&&this.dropdownCollection.viewFilterbuttonContainer.updateItem({id:u.ALL_ITEMS,text:this._nls.ALL_CONTEXT_RISKS,label:this._nls.ALL_CONTEXT_RISKS}),"3dnetwork"===i.get("serviceId")&&i.set("image",require.toUrl("DS/ENOProjectMgmtCommonComponents/assets/images/Supplier_Entities_Thumbnail.png")));let s=c.getFilterSearchString();s&&this._viewCollection.filterDataModels(s,"title"),o?this._processPostCompleteDataModels(n):(this._options.ignoreMatrixConfiguration||this._loadMatrixConfigurations(n),this._viewConfig.isLibraryInstalled()?this.fetchAdditionalDataForModels(this._options):this._processPostCompleteDataModels(n))},fetchAdditionalDataForModels:function(t){let i=e.clone(t||{},!1),n={fields:"classes.title",includeFields:"classes",paramData:i.paramData,onComplete:this.onCompleteAdditionalDataModels.bind(this,i),onFailure:this.onFailureAdditionalDataModels.bind(this)};this._viewCollection.fetchAdditionalDataForModels(n)},onCompleteAdditionalDataModels:function(e){c.getSelectedViewName()&&c.getSelectedViewName()===this.SUMMARY_VIEW&&this.homeBodyView.summaryView&&this.homeBodyView.summaryView.reloadCharts(e),e&&e.processPostCompleteDataModels&&this._processPostCompleteDataModels(e)},onFailureAdditionalDataModels:Function.prototype,onFailureDataModels:function(e,t){if(!this.isComponent){this.contextScope.get("context")&&this.contextScope.remove("context",void 0,e)}this.handleGetRisksResponse(),t&&!t.success&&400===t.statusCode&&this.container.empty&&this.container.empty()},handleRemoveContext:function(t){let i=e.clone(t||{},!1);i.showLoadSpinner=!0,this.reload(i)},getSelectedFilterLabelsForWidgetTitle:function(){let e=this.getViewFilterButtonLabel(c.getSelectedFilterOption()),t=this.getViewFilterButtonLabel(c.getSelectedSubFilterOption());return t&&(e=e?e+" - "+t:t),e},setTitle:function(t){let i=e.clone(t||{},!1);if(i.doNotSetTitle)widget.setTitle("");else if(!this.isComponent){let e="",t=c.get("context")||i.context,n=this.hasParamDataExists()&&p.SEARCHED_LIST||"";if(!n)if(i.title)n=i.title;else{let e=t&&t.get("title")||"",i=this.getSelectedFilterLabelsForWidgetTitle();e&&(n=e),i&&(n+=(n?" - ":"")+i),c.get("invalidRiskFilterisOn")&&(n+=(n?" - ":"")+p.INVALID+" "+p.LIST)}!i.doNotSetCount&&n&&(e=" ("+this.getViewCollection().getDataModelsCount()+")"),widget.setTitle(n+e)}},createNewBasedOnSelection:function(e,t){this.createNew(t.params)},createNew:function(t,i,n){let s=e.clone(t||{},!1),a=e.extend({parentView:this,context:c.get("context"),viewCollection:s.viewCollection||this._viewCollection,matrixConfigCollection:this._matrixConfigCollection,trendConfig:this._trendConfig,trendChartConfig:this._trendChartConfig,trendTemplate:this._trendTemplate,viewConfig:this._viewConfig,nlsTrend:this._nls.RISK_TREND,appConfig:this._appConfig,tabConfig:s.tabConfigForCreate||this._tabConfigForCreate,isCreate:!0,modelConstructor:s.detailsAndRelationships,additionalFooterButtons:s.additionalFooterButtons});e.extend(a,s);let l=this.getPropertyPanelInstance(this.container,a);if(s.renderCommonComponent){s.context=c.get("context"),s?.viewCollection?.treeDocument&&(this._viewCollection.treeDocument=s.viewCollection.treeDocument),i.contentView=l,e.extend(i,{dialogOptions:{createOption:s.createOption,height:s.height,parentCloneModel:s.parentCloneModel,viewCollection:s.viewCollection,enableSaveBtn:!0,saveButtonLabel:s.saveButtonLabel||(s.isMassUpdate?p.SAVE:p.CREATE_BUTTON_LABEL),title:s.title||p.replace(p.CREATE,{appName:this.appName})}}),e.extend(s,i);let o=new t.detailsView(s);n&&n.forEach((e=>{this.listenTo(o,e.eventName,e.eventCallback)})),o.render(),this.dialog=o.dialog}else s.contentView=l,s.saveButtonLabel=s.saveButtonLabel||(s.isMassUpdate?p.SAVE:p.CREATE_BUTTON_LABEL),s.title=s.title||p.replace(p.CREATE,{appName:this.appName}),this.dialog=new o(s),this.dialog.createDialog()},getPropertyPanelInstance:function(e,t){let i=t&&t.modelConstructor||this._detailsAndRelationships;return t.context=t.context||c.get("context"),new i(e,t)},handleUnsaveForSearchAndPreferences:function(e){let t=!1,i=this.getSelectedCurrentModel();return e.yesEvent&&i&&i.modificationsPending?(this._viewCollection.saveDataModel(i,{isReload:!0,onComplete:e&&e.callback}),t=!0):i&&i.cancel(),t},destroy:function(){if(this.dropdownCollection){for(let e in this.dropdownCollection)this.dropdownCollection.hasOwnProperty(e)&&this.dropdownCollection[e].destroy();delete this.dropdownCollection}for(let e in this.homeBodyView)this.homeBodyView.hasOwnProperty(e)&&this.homeBodyView[e].destroy();this.taggerProxy&&this.taggerProxy.destroy(),this.container&&this.container.destroy(),this._leftPanelContent&&this._leftPanelContent.destroy(),this.commonFacetView&&this.commonFacetView.destroy(),this._myPanelMainContent&&this._myPanelMainContent.destroy(),this._rightPanelContent&&this._rightPanelContent.destroy()},addExisting:function(e){i.addExistingSearch(e)},postCreateProcess:function(){this.setTitle(),c.getSelectedViewName()===C&&this._processTabContentRenderView()},getGridView:function(){return this.homeBodyView[c.getSelectedViewName()]},getSelectedCurrentModel:function(){let e=this.getGridView();return e&&e.detailsAndRelationships&&e.detailsAndRelationships.currentModel},resetCurrentModel:function(){let e=this.getGridView();e&&e.detailsAndRelationships&&e.detailsAndRelationships.cancelCreateOrEdit()},isCurrentContext:function(e){let t=c.getContextInfo(),i=e&&g.removeBracketLongURI(e.id);return!(!i||!t||(t.id||t.get("id"))!==i)},getDialog:function(){return this.dialog},getRepeatCheckboxValue:function(){let e=this.getDialog();return e&&e.getRepeatCheckboxValue()},publishEventOnNewWidgetLink:function(e){e&&e.forEach((e=>{let t=this._viewCollection.getCurrentDataModel()&&this._viewCollection.getCurrentDataModel().model,i=t&&h.isProjectType(t.get("type"))&&!("TRUE"===t.get("kindofExperiment")||"TRUE"===t.get("kindofBaseline")),n=[{dropData:i&&t&&t.getTransferObject(),success:i,message:i?"":p.CONTEXT_SELECTION_ERROR}],o="";switch(e.appId){case"ENORISK_AP":case"ENXOPPY_AP":break;case"ENOFOL3_AP":case"ENOFOL4_AP":o="setBookmarkRootIdEvent"}this.dispatchEvent(o,n)}))},clearRecentContextImages:function(){let t=widget.getValue(c.get("tenant"))||{},i=t.recentContexts||[],n=!1;i.forEach((e=>{e.image&&e.image.length>256&&(e.image="",n=!0)})),n&&(e.extend(t,{recentContexts:i}),c.setTenantInfo(t))},SUMMARY_VIEW:C})})),define("DS/ENOProjectMgmtCommonComponents/components/CommonCalendar",["UWA/Core","DS/Controls/Tab","DS/ENOProjectMgmtModels/Models/Calendar","DS/ENOProjectMgmtCommonComponents/views/CalendarsView","DS/ENOProjectMgmtCommonComponents/components/CustomDataGridView","DS/ENOProjectMgmtCommonComponents/collection/ProjectMgmtViewCollection","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/config/CalendarDisplayListConfig","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","UWA/Class/Collection","UWA/Class/Model","text!DS/ENOProjectMgmtCommonComponents/assets/templates/calendar-view-template.html.handlebars","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d,h,u,m,g){"use strict";return e.Class.View.extend({_uwaClassName:"CalendarsView",_appConfig:void 0,_container:void 0,_viewCollection:void 0,_calendar:void 0,_calendarData:void 0,_currentModel:void 0,_workingExceptions:[],_nonWorkingExceptions:[],_weekendDays:[],_eventContainer:void 0,_days:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},_monthslist:{January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11},_days_small:{Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},init:function(t,n){let o=n||{};if(this._container=t,this._calendarContainer=new e.createElement("div"),this._appConfig=o.appConfig,o.calendarId)this._currentModel=new i,this._currentModel.set("id",o.calendarId);else if(o.model)if(o.model.get("exceptions")&&o.model.get("workweek"))this._currentModel=o.model;else{this._currentModel=new i,this._currentModel.id=o.model.get("id")||o.model.get("calendarId"),this._currentModel.url=o.model.url;let e={};e.id=this._currentModel.id,e.title=o.model.get("title"),e.relativePath=o.model.get("relativePath"),this._currentModel.set(e)}o&&o.viewCollection?this._viewCollection=n.viewCollection:this._viewCollection=new s({})},render:function(){let i=this;if(this._container.empty&&this._container.empty(!0),this._calendarContainer=this._calendarContainer.setHTML(m),this._calendarContainer=this._calendarContainer.getElement(".ds-app-dialog-container"),this._exceptionTabContainer=this._calendarContainer.getElement(".ds-app-calendar-gridview-container"),this._exceptionContainer=new e.createElement("div"),this._exceptionContainer.inject(this._exceptionTabContainer),this._calendarTabContainer=this._calendarContainer.getElement(".ds-app-calendar-preview-container"),this._calendarControlContainer=this._calendarTabContainer.getElement(".ds-app-calendar-preview"),this._eventListContainer=this._calendarTabContainer.getElement(".ds-app-calendar-event-list"),this._eventContainer=this._eventListContainer.getElement(".ds-app-calendar-events"),this._toolbarContainer=this._calendarContainer.getElement(".ds-app-dialog-toolbar"),!this._currentModel)return;let n={ignoreFieldDefinition:!0,model:this._currentModel,fields:"all,exceptions.nextOccurrence"};this._ddTabBar=new t({id:"commonCalendarDialogTab",displayStyle:"strip",showComboBoxFlag:!1}),this._ddTabBar.inject(this._toolbarContainer),this._createTabs();let o=this._handleTabClickEvents.bind(this);return this._ddTabBar.addEventListener("tabButtonClick",o),this._ddTabBar.fire("tabButtonClick"),this._createCalendar(),i._calendar.addEventListener("change",(function(){i._calendar.allowUndefinedFlag=!0})),i._calendar.elements.monthsCombo.addEventListener("change",(function(){i._calendar.value=void 0})),i._calendar.elements.yearsCombo.addEventListener("change",(function(){i._calendar.value=void 0})),i._calendar.elements.todayButton.addEventListener("buttonclick",(function(){i._calendar.value=[new Date]})),this._currentModel.get("exceptions")&&this._currentModel.get("workweek")?i._onPostCalendarDetailsFetch():this._viewCollection.getDataModelDetails(n).then((function(){i._onPostCalendarDetailsFetch()}),(function(){})),this._calendarContainer},_onPostCalendarDetailsFetch:function(){this._workingExceptions=[],this._nonWorkingExceptions=[],this._generatePatternForExceptions(),this.repaintCalendarDates()},_createExeptionsDefinition:function(){this._exceptionDefinitionDataGrid=new o({container:this._exceptionContainer,treeDocument:this._treeDocument,config:l})},_createCalendar:function(){this._calendar=new n(this,{value:void 0,allowMultipleValuesFlag:!0,minValue:new Date(1900,1,1),maxValue:new Date(2122,1,1)}),this._calendar.inject(this._calendarControlContainer)},_createTabs:function(){let e=this,t=[{name:g.CALENDAR,selected:!0,font:"calendar",checkFlag:!0},{name:g.EXCEPTION_DEFINITION,font:"view-list",checkFlag:!0}];t.forEach((i=>{e._ddTabBar.add({label:i.name,isSelected:i.selected,icon:{iconName:i.font,fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"2x"},checkFlag:t.checkFlag}).button}))},_handleTabClickEvents:function(e){let t=e.dsModel,i=t.value;t.previouslySelectedIndex=i[0],0===i[0]?(this._calendarTabContainer.show(),this._exceptionTabContainer.hide()):(this._calendarTabContainer.hide(),this._exceptionTabContainer.show())},_createDisplayElements:function(t,i,n){return new e.createElement(t,{class:i,text:n})},_retrieveWorkHours:function(e,t){return t.get("workweek")[e].workingHours.split(/[-,]+/)},_displayExceptionList:function(t,i,n,o){let s=this._getFirstDateInDisplayPanel(),l=this._getLastDateInDisplayPanel(),r=new e.createElement("div",{class:"ds-app-calendar-event"});if(r.inject(this._eventContainer),!o||n){if(i>=s&&i<=l){let e=a.getIntlDateFormat(i);if(this._createDisplayElements("div","ds-app-calendar-date",e.displayValue).inject(r),!n){this._createDisplayElements("div","ds-app-exception-name",t.title).inject(r)}let o=n?this._retrieveWorkHours(i.getDay(),t):t.workingHours.split(/[-,]+/),s=this._getWorkingHoursFormat(o[0].slice(0,2),o[0].slice(2,4)),l=this._getWorkingHoursFormat(o[o.length-1].slice(0,2),o[o.length-1].slice(2,4)),c=!1;if(n?"Working"===t.get("workweek")[i.getDay()].workdayType&&(c=!0):"Working"===t.exceptionType&&(c=!0),c){this._createDisplayElements("div","ds-app-exception-hours",g.WORKING_HOURS+": "+s+"-"+l).inject(r)}if(!n){this._getWeekendDays();let e="Non Working"===t.exceptionType?"non-working":"working",n=this._weekendDays[i.getDay()]?"weekend":"weekday",o="Working"===t.exceptionType?g.WORKING:g.NON_WORKING,s=this._createDisplayElements("div","ds-app-exception-type",o);s.setAttributes({"data-exception-type":e,"data-day-type":n}),s.inject(r)}}}else{this._createDisplayElements("span","empty-view-title",g.NO_CALENDAR_EXCEPTIONS_FOUND).inject(r)}},_addClassToElement:function(e,t,i,n){e.hasClassName(t)&&(n&&e.removeClassName(t),e.addClassName(i))},repaintCalendarDates:function(){if(!this._calendar)return;this._getExceptionList();let t=this._calendar.getContent().getElements(".other-date"),i=this._calendar.getContent().getElements(".days");null!==this._calendar.getContent().getElement(".today")&&i.push(this._calendar.getContent().getElement(".today")),i.push(...t);let n=e.clone(this._weekendDays),o=e.clone(this._nonWorkingExceptions),s=e.clone(this._workingExceptions),a=[],l=[];a=this._getDatesInElementValueFormat(o),l=this._getDatesInElementValueFormat(s);for(let e=0;e<i.length;e+=1){a.includes(i[e].dataset.value)&&(this._addClassToElement(i[e],"other-date","ds-app-non-working")||this._addClassToElement(i[e],"days","ds-app-non-working")||this._addClassToElement(i[e],"today","ds-app-non-working")),l.includes(i[e].dataset.value)&&a.includes(i[e].dataset.value)?this._addClassToElement(i[e],"ds-app-non-working","ds-app-working",!0):l.includes(i[e].dataset.value)&&(this._addClassToElement(i[e],"other-date","ds-app-working")||this._addClassToElement(i[e],"days","ds-app-working")||this._addClassToElement(i[e],"today","ds-app-working"));let t=i[e].dataset.value.split("/"),o=t[1]+"/"+t[0]+"/"+t[2];n[new Date(o).getDay()]&&(a.includes(i[e].dataset.value)?this._addClassToElement(i[e],"ds-app-non-working","ds-app-weekend")||this._addClassToElement(i[e],"other-date","ds-app-weekend non-working"):l.includes(i[e].dataset.value)?this._addClassToElement(i[e],"ds-app-working","ds-app-weekend")||this._addClassToElement(i[e],"other-date","ds-app-weekend working"):this._addClassToElement(i[e],"days","ds-app-weekend"))}this._workingExceptions=[],this._nonWorkingExceptions=[]},_getDailyExceptionDates:function(e,t){let i=this._getFirstDateInDisplayPanel(),n=this._getLastDateInDisplayPanel(),o=this._getDateBasedOnMMDDYYYY(new Date(Math.max(e,i))),s=this._getDateBasedOnMMDDYYYY(new Date(Math.min(t,n))),a=this._getDateBasedOnMMDDYYYY(new Date(e.getTime())),l=[];for(;a<=s;){if(o<=a&&a<=s&&a>=i&&a<=n){let e=this._getDateBasedOnMMDDYYYY(new Date(a));l.push(e)}a.setDate(a.getDate()+1)}return l},_getWeeklyExceptionDates:function(e,t,i){let n=e.split(","),o=[];return n.forEach((e=>{if(""!==e){let n=this._days_small[e],s=this._getFirstDateInDisplayPanel(),a=this._getLastDateInDisplayPanel();for(;s.getDay()!==n;)s.setDate(s.getDate()+1);for(;s<=a;)t<=s&&s<=i&&(o.push(new Date(s.getTime())),this._getDateBasedOnMMDDYYYY(new Date(s))),s.setDate(s.getDate()+7)}})),o},_getMonthlyException_TypeWeekly_Helper:function(e,t,i,n,o,s,a,l){let r,c=this._getFirstInstanceOfSelectedWeekDay(e,t),d=this._weekdaysProcessing(n,c,i),h=this._getSelectedDayOfWeekForMonthly(d,o);return"CURRENTMONTH"===l&&s<=h&&h<=a&&(r=this._getDateBasedOnMMDDYYYY(new Date(h))),"PREVIOUSMONTH"===l&&this._getFirstDateInDisplayPanel()<=h&&h<=i&&s<=h&&h<=a&&(r=this._getDateBasedOnMMDDYYYY(new Date(h))),"NEXTMONTH"===l&&this._getFirstDateInDisplayPanel()<=h&&h<=this._getLastDateInDisplayPanel()&&s<=h&&h<=a&&(r=this._getDateBasedOnMMDDYYYY(new Date(h))),r},_getMonthlyExceptionDates_DayOfWeekOfMonthType:function(e,t,i,n){let o=[],s=this._days[e],a=this._getDateBasedOnMMDDYYYY(new Date(i)),l=this._getDateBasedOnMMDDYYYY(new Date(n)),r=this._getMonthAndDateSwappedForFirstElement(".days"),c=new Date(r),d=this._getDateBasedOnMMDDYYYY(new Date(c.getFullYear(),c.getMonth(),1)),h=new Date(c.getFullYear(),c.getMonth()+1,0),u=this._getMonthlyException_TypeWeekly_Helper(s,c,h,[],t,a,l,"CURRENTMONTH");void 0!==u&&o.push(u);let m=[],g=this._getFirstDateInDisplayPanel();if(g<new Date(d)){let e=this._getDateBasedOnMMDDYYYY(this._getFirstDateOfSelectedMonth(g)),i=this._getDateBasedOnMMDDYYYY(this._getLastDateOfSelectedMonth(g)),n=this._getMonthlyException_TypeWeekly_Helper(s,e,i,m,t,a,l,"PREVIOUSMONTH");void 0!==n&&o.push(n)}let p=[],C=this._getLastDateInDisplayPanel(),f=this._getFirstDateOfSelectedMonth(C),E=this._getLastDateOfSelectedMonth(C);if(C>h){let e=this._getMonthlyException_TypeWeekly_Helper(s,f,E,p,t,a,l,"NEXTMONTH");void 0!==e&&o.push(e)}return o},_getYearlyExceptionsDates_DayOfMonthTypeHelper:function(e,t,i,n,o,s,a){let l=[];if(i.getMonth()===this._monthslist[t]&&e>=i.getDate()&&e<=n){let t=new Date(i.getMonth()+1+"/"+e+"/"+i.getFullYear()),r=this._getDateBasedOnMMDDYYYY(new Date(t));"CURRENTMONTH"===a&&o<=r&&r<=s&&l.push(new Date(t)),"PREVIOUSMONTH"===a&&o<=r&&r<=s&&r>=i&&l.push(new Date(t)),"NEXTMONTH"===a&&o<=r&&r<=s&&r<=n&&l.push(new Date(t))}return l},_getYearlyExceptionsDates_DayOfMonthType:function(e,t,i,n){let o=this._getFirstDateOfSelectedMonth(this._calendar.referenceDate),s=this._getLastDateOfSelectedMonth(o).getDate(),a=this._getYearlyExceptionsDates_DayOfMonthTypeHelper(e,t,o,s,i,n,"CURRENTMONTH"),l=this._getFirstDateInDisplayPanel(),r=new Date(l.getFullYear(),l.getMonth()+1,0).getDate();if(l<o){let o=this._getYearlyExceptionsDates_DayOfMonthTypeHelper(e,t,l,r,i,n,"PREVIOUSMONTH");a.push(...o)}let c=this._getLastDateInDisplayPanel();if(c.getMonth()!==o.getMonth()){let s=new Date(c.getFullYear(),c.getMonth(),1);if(c>o){let o=this._getYearlyExceptionsDates_DayOfMonthTypeHelper(e,t,s,c,i,n,"NEXTMONTH");a.push(...o)}}return a},_getMonthlyException_TypeDayOfMonth_Helper:function(e,t,i,n,o,s,a){let l=[];if(s.getDate()<=e&&e<=a.getDate()){s.setDate(e);let a=new Date(s);a>=n&&a<=o&&a>=t&&a<=i&&l.push(this._getDateBasedOnMMDDYYYY(new Date(a)))}return l},_getMonthlyException_TypeDayOfMonth:function(e,t,i,n,o){let s=this._getFirstDateOfSelectedMonth(this._calendar.referenceDate),a=this._getLastDateOfSelectedMonth(this._calendar.referenceDate),l=this._getMonthlyException_TypeDayOfMonth_Helper(e,t,i,n,o,s,a),r=this._getFirstDateInDisplayPanel(),c=this._getLastDateOfSelectedMonth(r);if(r.getMonth()!==s.getMonth()){let s=this._getMonthlyException_TypeDayOfMonth_Helper(e,t,i,n,o,r,c);l.push(...s)}let d=this._getLastDateInDisplayPanel(),h=this._getFirstDateOfSelectedMonth(d),u=this._getLastDateOfSelectedMonth(d);if(d.getMonth()!==s.getMonth()){let s=this._getMonthlyException_TypeDayOfMonth_Helper(e,t,i,n,o,h,u);l.push(...s)}return l},_getYearlyExceptionsDates_WeekOfMonthTypeHelper(e,t,i,n,o,s,a,l,r){let c=[],d=this._getFirstInstanceOfSelectedWeekDay(e,n),h=this._weekdaysProcessing([],d,o),u=this._getSelectedDayOfWeekForMonthly(h,t);return s<=u&&u<=a&&u>=l&&u<=r&&o.getMonth()===this._monthslist[i]&&c.push(this._getDateBasedOnMMDDYYYY(new Date(u))),c},_getYearlyExceptionsDates_WeekOfMonthType:function(e,t,i,n,o){let s=this._getFirstDateOfSelectedMonth(this._calendar.referenceDate),a=this._getFirstDateInDisplayPanel(),l=this._getLastDateInDisplayPanel(),r=this._getLastDateOfSelectedMonth(s),c=this._getYearlyExceptionsDates_WeekOfMonthTypeHelper(e,t,i,s,r,n,o,a,l);if(a<s){let s=this._getFirstDateOfSelectedMonth(a),r=this._getLastDateOfSelectedMonth(a),d=this._getYearlyExceptionsDates_WeekOfMonthTypeHelper(e,t,i,s,r,n,o,a,l);c.push(...d)}if(l>r){let s=this._getFirstDateOfSelectedMonth(l),r=this._getLastDateOfSelectedMonth(l),d=this._getYearlyExceptionsDates_WeekOfMonthTypeHelper(e,t,i,s,r,n,o,a,l);c.push(...d)}return c},_callToDisplayFilteredExceptionList:function(e,t){if(0===e.size){let e=!0;this._displayExceptionList(this._currentModel,this._getDateBasedOnMMDDYYYY(new Date),!1,e)}if(t.length>0){let i=!1;for(let n=0;n<t.length;n++)e.has(t[n])?this._displayExceptionList(e.get(t[n]),this._getDateBasedOnMMDDYYYY(new Date(t[n])),!1,i):this._displayExceptionList(this._currentModel,this._getDateBasedOnMMDDYYYY(new Date(t[n])),!0,i)}else{let t=!1;e.forEach(((e,i)=>{this._displayExceptionList(e,this._getDateBasedOnMMDDYYYY(new Date(i)),!1,t)}))}},_setSortedDatesInSelectedDatesMap:function(e,t,i){for(let e=0;e<i.length;e++){let n=this._getDateBasedOnMMDDYYYY(i._models[e].get("date")).toDateString(),o=i._models[e].get("label");t.has(n)?"Working"===o.exceptionType&&t.set(n,o):t.set(n,o)}return t},_getDatesInElementValueFormat:function(e){return e.map((e=>e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()))},_generatePatternForExceptions:function(){let e=new d;this._eventContainer.empty(),this._treeDocument=new r({dataModelSet:e}),this._currentModel.get("exceptions")&&this._currentModel.get("exceptions").forEach((t=>{let i=this._getPatternOfException(t);t.pattern=i;let n="Working"===t.exceptionType?g.WORKING:g.NON_WORKING,o="Daily"===t.frequency?g.DAILY:"Monthly"===t.frequency?g.MONTHLY:"Weekly"===t.frequency?g.WEEKLY:g.YEARLY,s=JSON.parse(JSON.stringify(t));s.exceptionType=n,s.frequency=o;let a=c.createTreeNodeDataModel(e,{label:s.title,grid:s});this._treeDocument.addChild(a),this._exceptionDefinitionDataGrid||this._createExeptionsDefinition()}))},_createUWAModelForExceptions:function(e,t){let i=new u;return i.set("label",e),i.set("date",t),i},_getExceptionList:function(){this._eventContainer.empty();let e=new h([],{comparator:"date"});this._currentModel.get("exceptions")&&0!==this._currentModel.get("exceptions").length||this._exceptionDefinitionDataGrid||this._createExeptionsDefinition(),this._currentModel.get("exceptions")&&this._currentModel.get("exceptions").forEach((t=>{let i="Working"===t.exceptionType?this._workingExceptions:this._nonWorkingExceptions,n=this._getDateBasedOnMMDDYYYY(new Date(t.startDate)),o=this._getDateBasedOnMMDDYYYY(new Date(t.endDate)),s=this._getFirstDateInDisplayPanel(),a=this._getLastDateInDisplayPanel();if("Daily"===t.frequency){this._getDailyExceptionDates(n,o).forEach((n=>{i.push(n),e.push(this._createUWAModelForExceptions(t,n))}))}else if("Weekly"===t.frequency){this._getWeeklyExceptionDates(t.daysOfWeek,n,o).forEach((n=>{i.push(n),e.push(this._createUWAModelForExceptions(t,n))}))}else if("Monthly"===t.frequency)if(""!==t.weekOfMonth){this._getMonthlyExceptionDates_DayOfWeekOfMonthType(t.dayOfWeek,t.weekOfMonth,t.startDate,t.endDate).forEach((n=>{i.push(n),e.push(this._createUWAModelForExceptions(t,n))}))}else{let l=parseInt(t.dayOfMonth);this._getMonthlyException_TypeDayOfMonth(l,s,a,n,o).forEach((n=>{i.push(n),e.push(this._createUWAModelForExceptions(t,n))}))}else if("Yearly"===t.frequency)if(""===t.weekOfMonth){t.dayOfMonth,t.monthOfYear;this._getYearlyExceptionsDates_DayOfMonthType(t.dayOfMonth,t.monthOfYear,n,o).forEach((n=>{i.push(n),e.push(this._createUWAModelForExceptions(t,n))}))}else{let s=this._days[t.dayOfWeek],a=t.monthOfYear,l=t.weekOfMonth;this._getYearlyExceptionsDates_WeekOfMonthType(s,l,a,n,o).forEach((n=>{i.push(n),e.push(this._createUWAModelForExceptions(t,n))}))}}));let t=e.sort((function(e,t){return Number(e[1].date)-Number(t[1].date)})),i=this._getMonthAndDateSwappedForElements(".selected"),n=new Map;n=this._setSortedDatesInSelectedDatesMap(i,n,t),this._callToDisplayFilteredExceptionList(n,i),n.clear(),this._getWeekendDays()},_getDateBasedOnMMDDYYYY:function(e){return new Date(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear())},_getMonthAndDateSwappedForElements:function(e){let t=this._calendar.getContent().getElements(e),i=[];for(let e=0;e<t.length;e++){let n=t[e].dataset.value.split("/"),o=n[1].replace(/\\|"/g,"")+"/"+n[0].replace(/\\|"/g,"")+"/"+n[2].replace(/\\|"/g,"");i.push(this._getDateBasedOnMMDDYYYY(new Date(o)).toDateString())}return i},_getMonthAndDateSwappedForFirstElement:function(e){let t=this._calendar.getContent().getElement(e).dataset.value.split("/");return t[1].replace(/\\|"/g,"")+"/"+t[0].replace(/\\|"/g,"")+"/"+t[2].replace(/\\|"/g,"")},_getFirstDateOfSelectedMonth:function(e){let t=this._getDateBasedOnMMDDYYYY(e),i=new Date(t.getFullYear(),t.getMonth(),1);return this._getDateBasedOnMMDDYYYY(i)},_getLastDateOfSelectedMonth:function(e){let t=this._getDateBasedOnMMDDYYYY(e),i=new Date(t.getFullYear(),t.getMonth()+1,0);return this._getDateBasedOnMMDDYYYY(i)},_weekdaysProcessing:function(e,t,i){for(;t<=i;)e.push(new Date(t.getTime())),t.setDate(t.getDate()+7);return e},_getSelectedDayOfWeekForMonthly:function(e,t){let i={first:0,second:1,third:2,fourth:3,last:e.length-1}[t.toLowerCase()];return this._getDateBasedOnMMDDYYYY(new Date(e[i]))},_getFirstInstanceOfSelectedWeekDay:function(e,t){for(;t.getDay()!==e;)t.setDate(t.getDate()+1);return t},_getPatternOfException:function(e){let t="",i={First:0,Second:1,Third:2,Fourth:3,Last:4};if("Daily"===e.frequency)t="";else if("Weekly"===e.frequency){let i="";e.daysOfWeek.split(",").forEach((e=>{if(""!==e){let t=this._days_small[e];i+=g.SHORTWEEKDAYS[t]+","}})),t=i.slice(0,i.length-1)}else"Monthly"===e.frequency?t=""!==e.weekOfMonth?g.replace(g.WEEKOFMONTH_DAYOFWEEK_OF_EVERY_MONTH,{WeekOfMonth:g.WEEKOFMONTHLIST[i[e.weekOfMonth]],DayOfWeek:g.WEEKDAYS[this._days[e.dayOfWeek]]}):g.replace(g.DAY_DAYOFMONTH_OF_EVERY_MONTH,{dayOfMonth:e.dayOfMonth}):"Yearly"===e.frequency&&(t=""===e.weekOfMonth?g.replace(g.DAY_DAYOFMONTH_MONTHOFYEAR,{DayOfWeek:e.dayOfMonth,MonthOfYear:g.MONTHS[this._monthslist[e.monthOfYear]]}):g.replace(g.WEEKOFMONTH_DAYOFWEEK_OF_MONTHOFYEAR,{WeekOfMonth:g.WEEKOFMONTHLIST[i[e.weekOfMonth]],DayOfWeek:g.WEEKDAYS[this._days[e.dayOfWeek]],MonthOfYear:g.MONTHS[this._monthslist[e.monthOfYear]]}));return t},_getLastDateInDisplayPanel:function(){let e=this._getMonthAndDateSwappedForElements(".days"),t=e[e.length-1];if(null===this._calendar.getContent().getElement(".other-date"))return this._getDateBasedOnMMDDYYYY(new Date(t));let i=this._getMonthAndDateSwappedForElements(".other-date"),n=new Date(i[i.length-1]),o=new Date(t);return this._getDateBasedOnMMDDYYYY(new Date(Math.max(n,o)))},_getFirstDateInDisplayPanel:function(){if(null===this._calendar.getContent().getElement(".other-date"))return this._getDateBasedOnMMDDYYYY(new Date(this._getMonthAndDateSwappedForFirstElement(".days")));let e=this._getDateBasedOnMMDDYYYY(new Date(this._getMonthAndDateSwappedForFirstElement(".other-date"))),t=this._getDateBasedOnMMDDYYYY(new Date(this._getMonthAndDateSwappedForFirstElement(".days")));return this._getDateBasedOnMMDDYYYY(new Date(Math.min(e,t)))},_getWorkingHoursFormat:function(e,t){let i=e,n=i>=12?"PM":"AM";return i=i%12||12,i+":"+t+" "+n},_getWeekendDays:function(){this._currentModel.get("workweek").forEach((e=>{if("Non Working"===e.workdayType){let t=this._days[e.dayOfWeek];this._weekendDays[t]=!0}}))},destroy:function(){this._calendar&&this._calendar.destroy(),this._container.empty&&this._container.empty(),this._exceptionDefinitionDataGrid&&(this._exceptionDefinitionDataGrid.destroy(),delete this._exceptionDefinitionDataGrid)}})})),define("DS/ENOProjectMgmtCommonComponents/config/ViewConfigBase",["UWA/Core","UWA/Class/View","DS/VENHighChart/UIHighCharts","DS/i3DXCompassPlatformServices/OpenWith","DS/ENORIPE_Relations/RelationsTabSettings","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Utils/FederatedSearch","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o,s,a,l,r,c,d){"use strict";let h,u,m="firstname",g=["typesForSearch"];return t.extend({_uwaClassName:"ViewConfig",_fieldDefinitionSource:void 0,_additionalFieldDefinitionSources:void 0,setup:function(e,t){let i=this;this._initializeHighcharts(),this._fieldDefinitionSource=e,this._additionalFieldDefinitionSources=t||[],l.get(e)||l.set(e,{}),this.listenTo(l,"onChange:"+e,this._updateConfigDataFromFieldDefinition.bind(this,e)),this._additionalFieldDefinitionSources.forEach((e=>{this.listenTo(l,"onChange:"+e,this._initializeRangeValues.bind(this,e))})),this.listenTo(a,"onChange:tenant",(function(){i._initializeOpenWith(),i._initializeRelationsTabSettings()}))},_initializeHighcharts:function(){i.setOptions({lang:{weekdays:d.WEEKDAYS,shortMonths:d.SHORTMONTHS,months:d.MONTHS}}),a.set("highcharts",i)},_initializeOpenWith:function(){let e=this,t=new n;t._fetchCompatibleApps((function(i){t._appsList=i,e.setOpenWithInfo(t)}))},setOpenWithInfo:function(e){h=e},getOpenWithInfo:function(){return h},_initializeRelationsTabSettings:function(){let t=this,i={isDraggable:!1,isProfilesVisible:!1,appID:a.get("appId"),isExternal:!0},n={getPlatformID:function(){return a.get("tenant")},getServiceID:function(){return r.SPACE_SOURCE}};o.isAvailable(n,i).then((function(i){e.is(i,"object")&&i.isAvailable&&i.facetInfo&&t.setRelationsFacetInfo(i.facetInfo)}))},setRelationsFacetInfo:function(e){u=e},getRelationsFacetInfo:function(){return u},getFieldDefinitionRangeData:function(e,t,i,n){let o,a,r,c=[];n&&(o=e.get(t));let d=l.getFieldRangeItems(e.getFieldDefinitionSource(),t);return i?(d.forEach((e=>{a=e.helpInfos&&e.helpInfos.hasOwnProperty(i),r=a&&e.helpInfos[i],!r||n&&o!==r.value||c.push(r)})),n&&1===c.length?c[0]:c):n?s.findObject(d,"value",o):d},setFieldDefinitionData:function(e,t){let i={fieldServiceColumns:{},fieldCompositionServiceColumns:{},fieldDefinitionColumns:t};l.setFieldsDefinition(e,i)},isLibraryInstalled:function(){let e=this._fieldDefinitionSource&&l.getFieldDefinitionColumn(this._fieldDefinitionSource,"isLibraryInstalled");return Boolean(e&&"TRUE"===e.label)},profileCreateAccess:function(e){return"TRUE"===l.getFieldRangeItemActualValue(e,"profileCreateAccess",0)},matrixConfigCreateAccess:function(){let e=this._fieldDefinitionSource&&l.getFieldDefinitionColumn(r.APPLICATIONS.MATRIX_CONFIGURATION,"matrixConfigCreateAccess");return Boolean(e&&e.fieldDefinitionRangeItem&&e.fieldDefinitionRangeItem.TRUE)},administrativeEditAccess:function(){let e=this._fieldDefinitionSource&&l.getFieldDefinitionColumn(r.APPLICATIONS.MATRIX_CONFIGURATION,"administrativeEditAccess");return Boolean(e&&e.fieldDefinitionRangeItem&&e.fieldDefinitionRangeItem.TRUE)},_updateConfigDataFromFieldDefinition:function(e,t){this._initializeRangeValues(e,t),this._initializeCustomAttributesForList(e)},_initializeCustomAttributesForList:function(e){let t=this.getConfigListToUpdateListConfig(e);t&&t.length&&t.forEach((t=>{this.initializeCustomAttributes(e,void 0,t,void 0,!0,void 0)}))},initializeCustomAttributes:function(e,t,i,n,o,s,a){let r,c;o?r=i.values.length:(r=0,i.values=[]);let d=i.typesForCustomAttributes&&i.typesForCustomAttributes.length;c=l.getFieldCustomColumns(e,d?i.typesForCustomAttributes:t,i.options&&i.options.excludeAutoDeploy,a);for(let t in c){if(!c.hasOwnProperty(t))continue;let a=c[t];if(a.custom){let l={};if(i.values.push(l),l.isCustom=!0,l.visibleFlag=!o,l.required=Boolean(a.mandatory),l[o?"text":"label"]=a.label,l[o?"dataIndex":"name"]=a.name,a.viewConfig){let e=JSON.parse(a.viewConfig);s&&s.includes(t)&&(e.readWrite=!1,a.editable=!1);let i=e.multiline,r=e.multivalue,c=e.attributeType;if(o)"string"===c&&i?l.typeRepresentation="multilineString":r?l.typeRepresentation="array<"+c+">":"date"===c?(l.typeRepresentation="datetime",r&&(l.getCellSemantics=function(e){if(e&&-1!==e.rowID&&e.nodeModel)return{allowMultipleValuesFlag:!0}})):l.typeRepresentation=c;else{let t=e.type;l.type=t,l.readWrite=Boolean(e.readWrite||a.editable),r&&n?l.customView=n.MultiValueCustomView:"date"===c&&n?l.customView=n.DateCustomView:"string"===c&&(l.removeCarriageReturns=!i&&"text"===t),l.validate=e.required,"number"===t&&(l.allowEmpty=!0),e.maxlength>0&&(l.maxLength=e.maxlength)}"real"===c&&(l.typeRepresentation="float"),l.defaultValue=e.defaultValue}else l.readWrite=Boolean(a.editable);i._setColumnInfoForField(l,r),a.range&&this._addRangeValuesToConfigs(e,a,void 0,i)}r++}},_initializeRangeValues:function(e,t){let i,n,o=t.getFieldsDefinition(e);for(let t in o)if(n=o[t],"field"===n.itemType&&n.range)this._addRangeValuesToConfigs(e,n);else if("service"===n.itemType)for(let t in n.items)i=n.items[t],"field"!==i.itemType||!i.range&&i.name!==m||this._addRangeValuesToConfigs(e,i,n.name)},_addUOMValuesToConfig:function(e,t,i,n){n.columnInfo[e].uomValues=s.getAttributeValues(t,"displayValue"),n.columnInfo[e].defaultValues=t},_addRangeValuesToConfigs:function(t,i,n,o){let s,a=this,l=[],r=i.range&&i.range.item;if(r)for(let t in r)if(r.hasOwnProperty(t)){let i={};i.displayValue=r[t].display,i.actualValue=r[t].value,i.helpInfo=r[t].helpinfo,i.helpInfos=r[t].helpInfos,(r[t].default||1===r.length)&&(s?(e.is(s,"array")||(s=[s]),s.push(r[t].value)):s=r[t].value),l.push(i)}if(o)a._processConfigValues(t,i,l,s,n,o);else{let e=this.getConfigListToUpdate(t);e&&e.length&&e.forEach((e=>{a._processConfigValues(t,i,l,s,n,e)}))}},_processConfigValues:function(e,t,i,n,o,s){let a,l,c=t.name,d=c===m,h=this.getTypesForSearchFields().includes(c);if(l=s.uomMappedkeyValues&&s.uomMappedkeyValues[t.name],c=l||t.name,a=s.columnInfo[c],a)if(l)this._addUOMValuesToConfig(c,i,n,s),t.format="uom";else{if(a.serviceName!==o)return;t.name!==r.IMPACT_ATTR&&t.name!==r.PROBABILITY_ATTR||(i=[],n=""),a.showIcon&&this.handleIconForRangeValues(i),this._setConfigValues(a,i,n),this._setConfigValues(s.values[a.valueIndex],i,n)}else(h||d)&&(a=s.columnInfo[o],a&&this.setSearchSourceForServiceObjects(e,s,a,d))},handleIconForRangeValues:function(e){e&&e.length&&e.forEach((e=>{e.fontIcon=e.actualValue}))},setConfigValuesForSingleConfig:function(e,t,i){this._setConfigValues(e,t,i)},_setConfigValues:function(e,t,i){let n=this._getFilteredValues(e,t);e.values=n,e.defaultValue=i,e.defaultValues=n},_getFilteredValues:function(e,t){if(e.helpInfoFilter){let i=[];return t.forEach((t=>{if(t.helpInfos&&t.helpInfos[e.helpInfoFilter]){let n=t.helpInfos[e.helpInfoFilter],o={};o.displayValue=n.display,o.actualValue=n.value,o.helpInfo=n.helpinfo,(n.default||1===n.length)&&(o.defaultValue=n.value),i.push(o)}})),i}return t},handleSearchSourceTypesFor3dplan:function(e,t){if(!e.searchSourceTypes||!e.searchSourceTypes[t]){let i=l.getFieldsDefinition(t),n=s.findObject(i,"name",e.name),o=n&&n.typesForSearch;if(o)!e.searchSourceTypes&&(e.searchSourceTypes={}),e.searchSourceTypes[t]=o.split(",");else{let i=e.searchSource.findIndex((e=>e===t));-1!==i&&e.searchSource.splice(i,1)}}},handleSearchSourceTypesFor3dspace:function(e,t,i){if(!t.searchSourceTypes||!t.searchSourceTypes[i]){let n;if(t.typesForSearchFieldName)n=l.getFieldDefinitionColumn(e,t.typesForSearchFieldName);else{let i=l.getFieldDefinitionColumn(e,t.fieldDefinitionName||t.name);n=i&&s.findObject(i.items,"name",this.getTypesForSearchFields())}if(!n)return;if(!t.searchSourceTypes&&(t.searchSourceTypes={}),t.searchSourceTypes[i]=[],t.typesForSearchFieldName)n.fieldDefinitionRangeItem.hasOwnProperty(t.name)&&this._getTypeSearchFieldValueFromRange(n,i,t,t.name);else for(let e in n.fieldDefinitionRangeItem)n.fieldDefinitionRangeItem.hasOwnProperty(e)&&this._getTypeSearchFieldValueFromRange(n,i,t,e)}},_getTypeSearchFieldValueFromRange:function(e,t,i,n){let o=e.fieldDefinitionRangeItem[n].display.split(",");i.searchSourceTypes[t].length?i.searchSourceTypes[t].concat(o):i.searchSourceTypes[t]=o},setSearchSourceForServiceObjects:function(e,t,i,n){if(n){let e=t.getPersonSearchSource(i);i.searchSource=c.filterSearchSources(e),i.searchSourceTypes=t.getPersonSearchSourceTypes(e,i)}else{let n=t.getObjectSearchSource(i.allowFileManagement);n&&n.length&&(i.searchSource=[...n],n.forEach((t=>{switch(t){case r.XPLAN_SOURCE:case r.PORTFOLIO_SOURCE||r.SUPPLIER_SOURCE:this.handleSearchSourceTypesFor3dplan(i,t);break;case r.DRIVE_SOURCE:i.searchSourceTypes||(i.searchSourceTypes={}),i.searchSourceTypes[t]=["DriveFile"];break;default:this.handleSearchSourceTypesFor3dspace(e,i,t)}})))}i.additionalQuery&&this.filterAdditionalQueryOnSearchSource(i)},filterAdditionalQueryOnSearchSource:function(e){let t={};e.searchSource&&e.searchSource.forEach((i=>{let n=e.additionalQuery[i];n&&(t[i]=n)})),e.additionalQuery=t},getTypesForSearchFields:function(){return g},getConfigListToUpdate:Function.prototype,getConfigListToUpdateListConfig:Function.prototype})})),define("DS/ENOProjectMgmtCommonComponents/components/CommonInitializer",["UWA/Core","UWA/Class/Events","UWA/Element","UWA/Class/Listener","DS/WidgetLink/WidgetLink","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/Utilities/TouchUtils","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtCommonComponents/constants/Constants","DS/ENOProjectMgmtCommonComponents/config/ViewConfigBase","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/utils/PreferenceManager","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css"],(function(e,t,i,n,o,s,a,l,r,c,d,h,u,m){"use strict";let g="summaryView",p="gridView",C={summary:g,risk:p};return t.extend({_preferenceManager:void 0,_homeView:void 0,_widgetLink:void 0,init:function(t){let n=e.clone(t||{},!1),o=n.isComponent;n.container||(n.container=document.querySelector("#container")),n.container=i.extend(n.container),this._homeView=n.homeView,l.set("isComponent",o),l.set("useExternalNotification",n.useExternalNotification||o),l.set("doNotInitializeTaggerProxy",n.doNotInitializeTaggerProxy||o),n.doNotInitializeCollabStorage=n.doNotInitializeCollabStorage||o,n.doNotInitializePreference=n.doNotInitializePreference||o,this._initializePlatformServices(n)},_initializePlatformServices:function(t){let i=this,n=e.clone(t||{},!1);if(n.onComplete||(n.onComplete=function(){let e=i.getHomeView();e&&(e.render(n),i.initializeEvents(n))}),n.onFailure||(n.onFailure=Function.prototype),window.widget)if(n.isComponent)this.initializeComponent(n),n.loadLinks?h.loadLinksView(n):this.initializeEvents(n);else{let e={onLoad:function(){i._preferenceManager=new u(n,i._homeView)}};widget.addEvent("onLoad",e.onLoad),s.getPlatformServices({onComplete:function(e){var t=e[0];widget.setIcon(t["3DSpace"]+"/widget/images/MyApps/iconENOVIA.png")}}),window.addEventListener("dragover",(function(e){(e=e||event).preventDefault()}),!1),window.addEventListener("drop",(function(e){(e=e||event).preventDefault()}),!1),a.setTouchMode(!0)}else this.initializeComponent(n),this.initializeEvents(n)},initializeComponent:function(e){this._options={},this._preferenceManager||(this._preferenceManager=new u(e,this._homeView)),e.securityContext&&this._preferenceManager.setSecurityContext(e.securityContext,Boolean(e.isComponent)),e.onComplete&&e.onComplete()},handleWidgetLinkEvents:function(e){this._widgetLink=o.get(widget);let t=e.getAppConfig().widgetLinkOptions,i=e.getAppConfig().subscribeToContextChange;t&&this._widgetLink&&this._widgetLink.setLinkability(t),e&&this._widgetLink.addEventListener("link",(()=>{e.publishEventOnNewWidgetLink(this._widgetLink.getLinked())})),i&&e&&(this._widgetLink.subscribe(c.CONTEXT_CHANGE,(t=>{if(t.success){let i=t.dropData.data.items[0];e._handleAddContexScope(t.dropData.id,{dropObj:i,parentView:e,config:e.contextView&&e.contextView._config&&e.contextView._config.at(0)})}else m.buildNotification({message:t.message,hideDelay:3500},"error")})),this._widgetLink.subscribe(c.CONTEXT_REMOVE,(t=>{if(t.success){e.contextScope.handleRemoveContext("context",{homeView:e,config:e.contextView._config})}})))},initializeEvents:function(t){let i=this,o={},s=this.getHomeView();this.listener=new n;let a=e.clone(t||{},!1);s?(this.handleWidgetLinkEvents(s),a.isComponent?e.extend(o,{switchToRisksTab:function(){i.dispatchEvent("switchToRisksTab")},xppClosePropertyPanel:function(){i.dispatchEvent("xppClosePropertyPanel")}}):e.extend(o,{openProjectEvent:function(e){i._widgetLink&&i._widgetLink.publish(c.CONTEXT_CHANGE,e)},deleteProjectAndRemoveContextEvent:function(e){i._widgetLink&&i._widgetLink.publish(c.CONTEXT_REMOVE,e)},setBookmarkRootIdEvent:function(e){e&&e.dropData&&e.dropData.data&&e.dropData.data.items&&e.dropData.data.items.forEach((e=>e.linkId=i._widgetLink.id)),i._widgetLink&&i._widgetLink.publish(c.BOOKMARK_ROOT_ID_SET_EVENT,e)},removeBookmarkRootIdEvent:function(e){e={dropData:{data:{items:[{linkId:i._widgetLink.id}]}}},i._widgetLink&&i._widgetLink.publish(c.BOOKMARK_ROOT_ID_REMOVE_EVENT,e)}})):(s=this,e.extend(o,{onWidgetRefresh:function(){i._options.resetWidgetData=!0,i.getHomeView().container.click()},onResize:function(){let e=i.getHomeView(),t=i.getGridView(),n=t&&t.gridViewContent;e&&n&&n.setStyle("height",e.getHeight()+"px")},rskClosePropertyPanel:function(){let e=i.getGridView();e&&e.detailsAndRelationships&&e.detailsAndRelationships.hideRightPanel()}})),this.listener.listenTo(s,o)},renderView:function(t){let i=this.getHomeView();if(!i)return;let n=e.clone(t||{},!1);e.extend(n,this._options),i.isCurrentContext(n.context)?(i.setOptions(n),i._processTabContentRenderView(n)):i.render(n),this._options&&delete this._options.resetWidgetData},getHomeView:function(){return this._preferenceManager&&this._preferenceManager.getHomeView()},getHomeBodyView:function(){let e=this.getHomeView();return e&&e.homeBodyView},getSelectedFacetViewName:function(){let e=widget.getValue("selectedProgramAndFilter"),t=e&&e.substr(1,e.length-2).split("/")[2];return C[t]},getGridView:function(){let e=this.getHomeView();return e&&e.getView(p)},getSummaryView:function(){let e=this.getHomeView();return e&&e.getView(g)},isRiskGridViewLoaded:function(){return Boolean(this.getGridView())},isRiskHeatMapViewLoaded:function(){return Boolean(this.getSummaryView())}})})),define("DS/ENOProjectMgmtCommonComponents/collection/LinkViewCollection",["UWA/Core","DS/ENOProjectMgmtCommonComponents/collection/ProjectMgmtViewCollection"],(function(e,t){"use strict";let i=t.extend({_uwaClassName:"LinkViewCollection",saveDataModel:function(e,t){if(e.isNew&&e.set("description"," "),this.doNotSave){this.resetDataModelFromClone(e,t);let i=t&&t.onComplete;i&&i.apply(this,arguments)}else this._parent.apply(this,arguments)},getIncludeAndFieldsForSave:function(){return{include:"none,"+this.fieldName,fields:"none,"+this.fieldName+".title,"+this.fieldName+".linkURL,"+this.fieldName+".description,"+this.fieldName+".image"}},processSaveDataModel:function(t,i){if(this.sourceModel){this.currentModel=t,t=this.sourceModel;let n=new this.DataModels;n.add(this.currentModel.model),t.model.set(this.fieldName,n),t.model.performCreateAndConnect=!0;let o=this.getIncludeAndFieldsForSave();i&&e.extend(i,{isNew:!1,ignoreFieldDefinitions:!0,fields:o.fields,include:o.include})}else this.doNotSave||(t.model.performCreateOrEdit=!0,i&&e.extend(i,{ignoreFieldDefinitions:!0}));this._parent(t,i)},handleProcessSaveDataModelOnComplete:function(e){if(this.currentModel){let t=e.get(this.fieldName);t&&t.length&&(t=t[0],this.currentModel.model.set(t),this.currentModel.model.unset("tempId"),this.currentModel.model.resetChangedAttrs()),arguments[0]=this.currentModel,delete this.currentModel}this._parent.apply(this,arguments)}});return i})),define("DS/ENOProjectMgmtCommonComponents/views/CalendarPopup",["UWA/Core","DS/ENOProjectMgmtCommonComponents/components/CommonCalendar","DS/ENOProjectMgmtCommonComponents/components/PopupCommon","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n){"use strict";return e.Class.View.extend({_uwaClassName:"CalendarPopup",init:function(e,t){this.parentView=e,this._options=t,this.model=t&&t.model,this._parent(t)},render:function(){let e=new t(this,this._options);this.dialog=new i({minWidth:600,contentView:e,doNotshowFooterButtons:!0,title:n.PREVIEW+" - "+(this.model?this.model.get("title"):""),height:520}),this.dialog.createDialog();let o=this.dialog.getDialogView().getContent().getElement(".wux-windows-window-maincontent.wux-element-contentbox");o&&o.addClassName("ds-app-calendar-preview-dialog")},getHeight:function(){return this.parentView.getHeight()},destroy:function(){this.dialog&&this.dialog.destroy()}})})),define("DS/ENOProjectMgmtCommonComponents/views/CalendarPopupSharedView",["UWA/Core","DS/Controls/Button","DS/ENOProjectMgmtCommonComponents/views/CalendarPopup","DS/E6WCommonUI/Views/DetailsDisplaySharedView"],(function(e,t,i,n){"use strict";let o=n.extend({_sourceModel:void 0,_calendarModel:void 0,_calendarId:void 0,setup:function(e){this.options=e||{},this._sourceModel=e.model,this.calendarId=e.calendarId,this._parent.apply(this,arguments)},render:function(){let e=this;this.container.empty(!0);let n=this._sourceModel.get("calendar");if(n&&(this._calendarModel=n.at(0)),this._calendarModel){this._calendarId=this._calendarModel.get("id"),this.calendarButton=new t({displayStyle:"icon",icon:"calendar",label:this._calendarModel.get("title")}).inject(this.container);let n={model:this._calendarModel};this.calendarButton.addEventListener("click",(function(){this._calendarPopup=new i(e,n),this._calendarPopup.render()}))}return this},getHeight:function(){this.options.homeView.getHeight()},destroy:function(){this.calendarButton&&this.calendarButton.destroy(),this._calendarPopup&&this._calendarPopup.destroy(),this._parent.apply(this,arguments)}});return o})),define("DS/ENOProjectMgmtCommonComponents/config/LinkHomeTabConfig",["DS/ENOProjectMgmtCommonComponents/config/LinkTabConfig","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel","DS/ENOProjectMgmtCommonComponents/collection/LinkViewCollection","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtDetailsAndRelationships","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/RelatedDataItem","DS/ENOProjectMgmtModels/Collections/RelatedDataItems"],(function(e,t,i,n,o,s,a){"use strict";return{constants:o,tabConfig:e,viewCollection:new i({DataModel:s,DataModels:a,CloneModel:t,defaultDataModelAttrs:{type:o.TYPENAMES.URL,policy:o.TYPENAMES.URL,serviceId:"3DSpace"}}),detailsAndRelationships:n}})),define("DS/ENOProjectMgmtCommonComponents/views/LinkViewPopup",["UWA/Core","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtCommonComponents/components/PopupCommon","DS/ENOProjectMgmtCommonComponents/config/LinkHomeTabConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],(function(e,t,i,n,o){"use strict";let s=e.Class.View.extend({_uwaClassName:"LinkViewPopup",init:function(i){let o=e.clone(i||{},!1);this.model=o.model,this.callback=o.callback,this.onFailure=o.onFailure,this.collection=o.collection,this.fieldName=o.fieldName,this.closureFunc=o.closureFunc,this.isComponent=o.isComponent,this.sourceModel=o.currentModel,this.viewCollection=n.viewCollection,t.prototype.csrfValue||this.viewCollection.getDataModels({fieldDefinitionOnly:!0,sourceType:n.constants.APPLICATIONS.LINKS}),this.isComponentditModel=this.isComponent&&this.model,this._parent(i)},render:function(){let t,s=this.model,a=!this.isComponent,l=n.viewCollection;if(this.isComponentditModel)s=new l.DataModel({id:this.model.get("id")||this.model.getIdForFederatedSearch(),title:this.model.get("title"),linkURL:this.model.get("linkURL"),description:this.model.get("description"),modifyAccess:this.model.get("canEdit").toString().toUpperCase()});else if(this.sourceModel){let e=new l.DataModel({id:this.sourceModel.get("id"),type:this.sourceModel.get("type"),modifyAccess:this.sourceModel.get("modifyAccess"),state:this.sourceModel.get("state")});e.resourceURL=this.sourceModel.model.url(),t=new l.CloneModel(e)}e.extend(l,{doNotSave:a,fieldName:this.fieldName,sourceModel:t,collection:this.collection||new l.DataModels}),this.contentView=new n.detailsAndRelationships(this.container,{parentView:this,editModel:s,onFailure:this.onFailure,tabConfig:n.tabConfig,isCreate:!s||s.isNew(),viewCollection:n.viewCollection}),this.dialog=new i({height:320,doNotRepeat:s,contentView:this.contentView,beforeCloseCallBack:this.beforeCloseCallBack.bind(this),title:s?o.EDIT_LINK:a?o.ADD_LINK:o.CREATE_NEW_LINK,saveButtonLabel:this.model?o.SAVE:a?o.ADD:o.CREATE_BUTTON_LABEL}),this.dialog.createDialog()},beforeCloseCallBack:function(){this.destroy(),this.closureFunc()},postCreateProcess:function(){let e=this.contentView.currentModel.model;this.isComponentditModel&&(this.model.set(e.getAttributes()),e=this.model),this.callback&&this.callback(e)},getDialog:function(){return this.dialog},destroy:function(){this.dialog&&(this.dialog.destroy(),delete this.dialog),this.contentView&&(this.contentView.destroy(),delete this.contentView),this._parent.apply(this,arguments)},getHeight:Function.prototype});return s}));