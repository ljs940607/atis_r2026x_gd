define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanEditUI",["UWA/Core"],(function(e){"use strict";return function(t,a,n,i,r,o,l,u){const s=Object.freeze({VALID:-1,DISPLAY_WARNING_MESSAGE_WITH_CHECKBOX:0,DISPLAY_WARNING_MESSAGE:1});let c;u&&u.isUsingInputValueKF();const d={V_RPPValue:{minAttr:"V_RPPMinControlValue",maxAttr:"V_RPPMaxControlValue"},V_RPPMinControlValue:{minAttr:"V_RPPMinValue",maxAttr:"V_RPPMaxValue"},V_RPPMaxControlValue:{minAttr:"V_RPPMinValue",maxAttr:"V_RPPMaxValue"},V_RPPMinValue:{minAttr:"V_RPPMinEoFValue",maxAttr:"V_RPPMaxEoFValue"},V_RPPMaxValue:{minAttr:"V_RPPMinEoFValue",maxAttr:"V_RPPMaxEoFValue"},V_RPPMinEoFValue:{minAttr:"V_RPPRscMinValue",maxAttr:"V_RPPRscMaxValue"},V_RPPMaxEoFValue:{minAttr:"V_RPPRscMinValue",maxAttr:"V_RPPRscMaxValue"}},f={V_RPPMinValue:{attr:"V_RPPMaxValue"},V_RPPMaxValue:{attr:"V_RPPMinValue"},V_RPPMinControlValue:{attr:"V_RPPMaxControlValue"},V_RPPMaxControlValue:{attr:"V_RPPMinControlValue"},V_RPPMinEoFValue:{attr:"V_RPPMaxEoFValue"},V_RPPMaxEoFValue:{attr:"V_RPPMinEoFValue"}};var g,P,m,V,h,v,I,p,b,R,D,C,N,y,A,M,L,E,_,S,w,x,U,T,F,O,k,W,B,z,j,H=a.getComponent("Button"),G="PLMSpecifyHowToResourcePlanCnx_Custo",K=["V_RPPMinValue","V_RPPMaxValue","V_RPPRscMinValue","V_RPPRscMaxValue","V_RPPMinControlValue","V_RPPMaxControlValue"],X=["V_RPPMinEoFValue","V_RPPMaxEoFValue"],Y="DELResourcePrmPlanSET",J="RPPSETAccordionCollapsedList",$="RPPGETAccordionCollapsedList",q=G+".RemoveCustoExtn",Q=[],Z="",ee="V_RPPCriticality";return z=function(){let e=v.get("V_RPPMagnitude"),t=`DELExtTargetValues${e}.V_PossibleValues`,a=`DELExtPrmSet${e}Value.V_PSValue`;return{extnPossibleValue:v.get(t),oldPossibleValues:v.get(a)}},j=function(){let e=!1,t=v.get("V_RPPMode"),a=v.get("V_RPPMagnitude");if("SET"===t&&("Text"===a||"Integer"===a)){const{extnPossibleValue:t,oldPossibleValues:a}=z();e=!(t||a)}return e},M=function(t,a){var n,i,l,u,d,f,m,V,h,p,b=[],R=[],D={},y="";c=!!e.is(a)&&Boolean(!a._attributes.validResourceLinkExists),n=r.getObjectAndAttributeInfos(t),C&&(i=v.get("V_RPPMagnitude"),l=v.get("V_RPPUnit"),"ArbitraryUnit"===i&&(l=r.getArbitraryUnitFromUri(l)),u=r.getNLSForUnit(i,l),d=r.getLabelForUnit(i,l),V=r.getAttributeInfo(G+"."+ee),y=r.getAuthorizedValue(V,null,v.get(ee))),n.forEach((function(a,n){var o,s=e.clone(a);switch(C&&(s.objectToBeModified=v),e.is(t[n].displayType)&&(s.displayType=t[n].displayType),h=function(){let t=v.get("V_PossibleValues");const{extnPossibleValue:a,oldPossibleValues:n}=z();t||(t=a||n),t.forEach((t=>{D.Name=t.toString(),D.NLS=t.toString(),R.push(e.clone(D))})),e.is(n)?s.value=n:e.is(a)&&Array.isArray(a)?s.value="GET"===N?1===a.length?a[0].split("|"):a:a[0]:s.value="GET"===N?[]:"",s.attributeInfo.AuthorizedValues=R},p=function(){P.buttons.Ok.disabled=!1},s.dataIndex){case"V_RPPMagnitude":C?s.readOnly=!0:s.value=i;break;case"V_PossibleValues":C&&(N=v.get("V_RPPMode"),h(),"SET"===N&&(s.attributeInfo.onChange=p)),s.attributeInfo.MultiValuated="SET"===N?"No":"Yes",s.attributeInfo.HasRangeDefined="Yes",s.attributeInfo.Protection=2,s.attributeInfo.Type=i,s.attributeInfo.MaxLength=0;break;case"V_RPPValue":s.attributeInfo.Magnitude=i,s.attributeInfo.ManipulationUnit=e.is(l)?l:"",s.attributeInfo.Type="Double",s.attributeInfo.MultiValuated="No",o=v.get(s.dataIndex),e.is(o)&&null!==o&&""!==o&&(s.value=o.split(" ")[0]);break;case"V_RPPMinValue":case"V_RPPMaxValue":case"V_RPPRscMinValue":case"V_RPPRscMaxValue":case"V_RPPMinControlValue":case"V_RPPMaxControlValue":if(s.attributeInfo.unit=e.is(u)?u:"",s.attributeInfo.Type="Double",s.attributeInfo.MultiValuated="No",C&&(f="DELExtTargetValues"+i+"."+s.dataIndex,s.value={value:e.is(v.get(f))?v.get(f):v.get(s.dataIndex),inclusive:v.get(s.dataIndex+"_Inclusive")},"string"==typeof(o=s.value.value)))if("ArbitraryUnit"===i&&e.is(o)&&null!==o&&""!==o&&o.includes(v.get("V_RPPUnit")))s.value.value=o.split(" ")[0];else if("V_RPPRscMinValue"===s.dataIndex||"V_RPPRscMaxValue"===s.dataIndex){let t=v.get("RP_Unit");"ArbitraryUnit"===i&&(t=r.getArbitraryUnitFromUri(t));let a=r.getLabelForUnit(i,t);e.is(o)&&null!==o&&""!==o&&o.includes(a)&&(s.value.value=o.split(" ")[0])}else e.is(o)&&null!==o&&""!==o&&o.includes(d)&&(s.value.value=o.split(" ")[0]);break;case"V_RPPMinEoFValue":case"V_RPPMaxEoFValue":s.attributeInfo.unit=e.is(u)?u:"",s.attributeInfo.Type="Double",s.attributeInfo.MultiValuated="No",C&&(f="ArbitraryUnit"===i?"DELRscPrmIODoubleValue."+s.dataIndex:"DELRscPrmIORangeValue_"+i+"."+s.dataIndex,s.value={value:e.is(v.get(f))?v.get(f):v.get(s.dataIndex),inclusive:v.get(s.dataIndex+"_Inclusive")},"string"==typeof(o=s.value.value)&&("ArbitraryUnit"===i&&e.is(o)&&null!==o&&""!==o&&o.includes(v.get("V_RPPUnit"))||e.is(o)&&null!==o&&""!==o&&o.includes(d))&&(s.value.value=o.split(" ")[0]));break;case"V_RPPRichText":s.attributeInfo.MultiValuated="No",s.value=v.get(s.dataIndex);break;case"V_RPPCriticality":const t=(V=r.getAttributeInfo(G+"."+ee)).AuthorizedValues.findIndex((e=>e.Name===y));m=r.getAuthorizedValueNLS(V,t),s.value=""===y?"":m}b.push(s),C&&"V_RPPRscMinValue"!==s.dataIndex&&"V_RPPRscMaxValue"!==s.dataIndex&&(s.readOnly=c)})),C&&(B=r.isValidParamId(v.toJSON())).isValid!==s.VALID&&b.forEach((e=>e.readOnly=!0)),I=b.slice();let A=[],M=!1,L=v.get("type"),E=r.getDeploymentExtnInfo(L,!0),_=L===Y?J:$,S=r.getWidgetPreferenceValue(_);if(Array.isArray(E)&&E.length>0){M=!0;let t=[];E.forEach((function(e){let a=[];e.Attributes.forEach((function(t){a.push({name:t,dicoType:e.Name})})),t.push({Attribute:r.getObjectAndAttributeInfos(a),name:e.Nls,expandedFlag:-1===S.indexOf(e.Nls)})})),t.forEach((function(t){t.Attribute.forEach((function(t){if("ReadOnly"===t.attributeInfo.UIAccess&&(t.readOnly=!0,t.attributeInfo.isReadOnly=!0),"String"===t.attributeInfo.Type&&"Yes"===t.attributeInfo.MultiValuated&&"No"===t.attributeInfo.HasRangeDefined&&(t.displayType="chips",C||(t.value=e.is(t.value)&&"NULL"!==t.value?t.value:[]),C))if(e.is(v._attributes)&&v._attributes.hasOwnProperty(t.attributeInfo.FullName)){"NULL"===v.get(t.attributeInfo.FullName)&&(t.value=[],v._attributes[t.attributeInfo.FullName]=[])}else t.value=e.is(t.value)&&"NULL"!==t.value?t.value:[]}))})),A=A.concat(t),C&&t.forEach((function(e){e.Attribute.forEach((function(e){e.objectToBeModified=v}))}))}let w=r.getCustoExtnInfo(L);if(Array.isArray(w)&&w.length>0){M=!0;let t=[],a=[];a.push({name:L===Y?"SETCustoExten":"GETCustoExten",dicoType:G}),t.push({Attribute:r.getObjectAndAttributeInfos(a),name:"Section.AddCustoExtn"}),t[0].Attribute[0].attributeInfo.onChange=T.bind(null,t[0].Attribute[0].attributeInfo);let n=[];if(C){let e=G+"."+(L===Y?"SETCustoExten":"GETCustoExten"),a=v.get(e);if(Array.isArray(a)){let e=t[0].Attribute[0].attributeInfo;a.forEach((function(t){let a=r.getAuthorizedValueIndex(e,null,t);if(a>-1){let t=r.getAuthorizedValueDB(e,a);n.push(t)}}))}}w.forEach((function(e){var a=!0;C&&n.indexOf(e.Name)>=0&&(a=!1);let i=[];e.Attributes.forEach((function(t){i.push({name:t,dicoType:e.Name})})),t.push({Attribute:r.getObjectAndAttributeInfos(i),name:e.Nls,hide:a,expandedFlag:-1===S.indexOf(e.Nls)})})),t.forEach((function(t){if(e.is(t.name)&&"Section.AddCustoExtn"!=t.name){t.Attribute.forEach((function(t){if("String"===t.attributeInfo.Type&&"Yes"===t.attributeInfo.MultiValuated&&"No"===t.attributeInfo.HasRangeDefined&&(t.displayType="chips",C||(t.value=e.is(t.value)&&"NULL"!==t.value?t.value:[]),C))if(e.is(v._attributes)&&v._attributes.hasOwnProperty(t.attributeInfo.FullName)){"NULL"===v.get(t.attributeInfo.FullName)&&(t.value=[],v._attributes[t.attributeInfo.FullName]=[])}else t.value=e.is(t.value)&&"NULL"!==t.value?t.value:[]}))}})),A=A.concat(t),C&&t.forEach((function(e){e.Attribute.forEach((function(e){e.objectToBeModified=v}))}))}let x=b.findIndex((function(e){return"V_RPPRichText"===e.dataIndex})),U=[];-1!==x&&(U=b.splice(x,1),A.unshift({name:"Section.InstructionText",Attribute:U,expandedFlag:-1===S.indexOf(o.getNLSValue("Section.InstructionText"))})),A.unshift({Attribute:b,headerAccordean:!1}),g={Section:A}},T=function(t,a,n){var i,r=n.dsModel.value;i=function(t){for(var a=[];e.is(t.nextSibling);)a.push(t.nextSibling),t=t.nextSibling;return a},i(function(e,t){var a;for(a=1;a<=t;a++)e=e.parentElement;return e}(n.dsModel.elements.container,7)).forEach((function(e){let t=e.querySelector(".wux-controls-expander-header").innerText;r.indexOf(t)>=0?e.show():e.hide()}))},A=function(){V=a.createElement("div",{class:"section-container"}),h=a.create("FormUI",{sections:g,renderTo:V,headerAccordean:!0,wkiLTHEnabledForInstruction:void 0,wkiLTHEnabledForDCPRPP:r.isNoSizeLimitEnabled()})},S=function(){var a,n,i=E(),l=i.result,u=i.message,c={},d=v.get("V_RPPUnit"),f=e.is(d)?d:"",g=v.get("V_RPPMagnitude"),m=o.getLabelForUnit(g,f);if(e.is(l)&&l){(a=_()).unit=m,a.V_RPPUnit=f,c.resourceParameterPlanPID=p,c.resourceParameterRowPID=b,c.resourcePID=w,c.resourceParameterListPID=x,c.resourceParameterPID=U,c.rppPath=R,r.isValidParamId(v.toJSON()).isValid===s.DISPLAY_WARNING_MESSAGE_WITH_CHECKBOX&&(a.RPP_ParameterIdentifier=""),P.close(),n={onComplete:function(e){Array.isArray(Q)&&Q.forEach((function(t){e.unset(t)})),Q=[]}},r.updateResourceParameterRow(c,a,n),e.is(u)&&""!==u&&null!==u&&t.warn(u)}else P.buttons.Ok.disabled=!1},y=function(t,n){t=t||{};let i=!1;i=c||j(),m=a.createElement("div",{class:"ResourceParameterRow-Dialog"}),(P=a.create("Dialog",{title:t.title,domId:"ResourceParameterRow-Dialog",content:m,resizableFlag:!0,modalFlag:!0,width:560,minWidth:290,height:500,position:{my:"center",at:"center"},buttons:{Cancel:new H({onClick:function(){P.close()}}),Ok:new H({disabled:i,emphasize:"primary",onClick:n})}})).close=function(){var t,a=document.querySelectorAll(".wux-controls-expander-header"),n=v.get("type"),i=n===Y?J:$,l=r.getDeploymentExtn(n,!0),u=r.getCustoExtn(n),s=l.concat(u),c=[];(t=s.map((function(e){return e.Nls}))).push(o.getNLSValue("Section.InstructionText")),a.forEach((function(a){var n=a.getText(),i=a.getAttribute("expanded");-1===t.indexOf(n)||e.is(i)||c.push(n)})),r.setWidgetPreferenceValue(i,c),this.destroy(),v=null,I=null,p=null,R=null,b=null,e.is(h)&&h.destroy(),e.is(m)&&m.destroy(),P=null}},E=function(){var t,a,n=h.validate(),i=function(t,a,n,i){var r=[],l={valid:!0,values:null,message:""};if(0===a.value.length)return l;if(Number.isNaN(Number(a.value)))return l.valid=!1,l.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:i}),l;if(e.is(t.inclusive)&&e.is(t.value)){if("NotSet"!==t.inclusive&&String(t.value).length>0){if(r=Number(t.value),Number.isNaN(r))return l.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),l.valid=!1,l;r=[r]}}else e.is(t)&&""!==t&&(r=Array.isArray(t)?t:[t]);return r.length>0&&(l.values=[],l.valid=r.every((function(e,t){return(e=String(e).trim()).length>0&&isNaN(e)?(l.values=null,l.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),!1):(l.values.push(Number(e)),!0)}))),l},r=function(a,n){var r,l=o.getNLSValue(G+"."+a),u=o.getNLSValue(G+"."+n),s=e.clone(t[G+"."+a]),c=e.clone(t[G+"."+n]),d={valid:!0,message:""},f=v.get("V_RPPMode");if(s=e.is(s)?s:"","NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=i(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var g=0;g<d.values.length;g++)if(r=d.values[g],"Included"===c.inclusive&&r>c.value||"Included"!==c.inclusive&&r>=c.value){"GET"===f?(d.valid="V_RPPRscMaxValue"===n,d.message=o.getNLSValue("RPPRow.GetOutofBound.Error")):(d.valid=!1,d.message=o.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u}));break}return d},l=function(a,n){var r,l=o.getNLSValue(G+"."+a),u=o.getNLSValue(G+"."+n),s=e.clone(t[G+"."+a]),c=e.clone(t[G+"."+n]),d={valid:!0,message:""};if(s=e.is(s)?s:"","NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=i(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var f=0;f<d.values.length;f++){r=d.values[f];const e=(e,t,a,n)=>"Included"===e?"greater"===n?t>a:t<a:"greater"===n?t>=a:t<=a;if("V_RPPMinValue"===a||"V_RPPMinControlValue"===a||"V_RPPMinEoFValue"===a){if(e(c.inclusive,r,c.value,"greater")){d.valid=!1,d.message=o.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}}else if(e(c.inclusive,r,c.value,"lesser")){d.valid=!1,d.message=o.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}}return d},u=function(a,n,l){var u={valid:!0};return u=function(a,n){var r,l=o.getNLSValue(G+"."+a),u=o.getNLSValue(G+"."+n),s=e.clone(t[G+"."+a]),c=e.clone(t[G+"."+n]),d={valid:!0,message:""},f=v.get("V_RPPMode");if(s=e.is(s)?s:"","NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=i(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var g=0;g<d.values.length;g++)if(r=d.values[g],"Included"===c.inclusive&&r<c.value||"Included"!==c.inclusive&&r<=c.value){"GET"===f?(d.valid="V_RPPRscMinValue"===n,d.message=o.getNLSValue("RPPRow.GetOutofBound.Error")):(d.valid=!1,d.message=o.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u}));break}return d}(a,n),u.valid&&""===u.message?u=r(a,l):u.valid&&""!==u.message&&(""===Z&&(Z=u.message),(u=r(a,l)).message=Z),u};return n.result&&(t=h.getValues(),n.result=I.every((function(i){var r,s,c=i.attributeInfo.Name,g={valid:!0};switch(c){case"V_RPPValue":r=d[c].minAttr,s=d[c].maxAttr,""===t[G+"."+r].value&&""===t[G+"."+(r="V_RPPMinValue")].value&&""===t[G+"."+(r="V_RPPMinEoFValue")].value&&(r="V_RPPRscMinValue"),""===t[G+"."+s].value&&""===t[G+"."+(s="V_RPPMaxValue")].value&&""===t[G+"."+(s="V_RPPMaxEoFValue")].value&&(s="V_RPPRscMaxValue"),g=u(c,r,s);break;case"V_RPPMinEoFValue":case"V_RPPMaxEoFValue":""===t[G+"."+c].value&&"NotSet"!==t[G+"."+c].inclusive?(g.valid=!1,a=o.getNLSValue(G+"."+c),g.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:a})):(g=l(c,f[c].attr)).valid&&(g=u(c,d[c].minAttr,d[c].maxAttr));break;case"V_RPPMinValue":case"V_RPPMaxValue":""===t[G+"."+c].value&&"NotSet"!==t[G+"."+c].inclusive?(g.valid=!1,a=o.getNLSValue(G+"."+c),g.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:a})):(g=l(c,f[c].attr)).valid&&(r=d[c].minAttr,s=d[c].maxAttr,""===t[G+"."+r].value&&(r="V_RPPRscMinValue"),""===t[G+"."+s].value&&(s="V_RPPRscMaxValue"),g=u(c,r,s));break;case"V_RPPMinControlValue":case"V_RPPMaxControlValue":""===t[G+"."+c].value&&"NotSet"!==t[G+"."+c].inclusive?(g.valid=!1,a=o.getNLSValue(G+"."+c),g.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:a})):(g=l(c,f[c].attr)).valid&&(r=d[c].minAttr,s=d[c].maxAttr,""===t[G+"."+r].value&&""===t[G+"."+(r="V_RPPMinEoFValue")].value&&(r="V_RPPRscMinValue"),""===t[G+"."+s].value&&""===t[G+"."+(s="V_RPPMaxEoFValue")].value&&(s="V_RPPRscMaxValue"),g=u(c,r,s))}return e.is(g.message)&&""!==g.message&&(n.message=g.message),g.valid}))),e.is(n.message)&&""!==n.message&&(n.result||P.errorMsg(n.message)),n},_=function(){var t,a={};t=h.getValues(),I.forEach((function(n){var i,r=n.attributeInfo.Name,o=n.attributeInfo.FullName;e.is(t[o])&&(i=t[o],K.includes(r)||X.includes(r)?(a[r]=""===i.value?"":String(i.value),a[r+"_Inclusive"]=i.inclusive):"V_PossibleValues"===r?e.is(i)&&(a[r="SET"===N?"V_RPPValue":r]=Array.isArray(i)?i:i.split(widget.getValue("separator")),a[r]=a[r].map((function(e){return String(e)})),a[r]=a[r].filter((function(e){return e.length>0}))):"V_RPPValue"===r&&e.is(i)?e.is(i)?a[r]=String(i):a[r]=null:a[r]=Array.isArray(i)?i:String(i))}));let n=v.get("type"),i=r.getDeploymentExtnAttr(n,!0);Array.isArray(i)&&i.length>0&&i.forEach((function(e){t.hasOwnProperty(e)&&(a[e]=t[e])}));let o=G+"."+(n===Y?"SETCustoExten":"GETCustoExten");if(t.hasOwnProperty(o)){let e=r.getAttributeInfo(o);a[o]=t[o].map((function(t){return r.getAuthorizedValue(e,null,t)}));let i=r.getCustoExtnAttr(n);if(Array.isArray(i)&&i.length>0&&i.forEach((function(e){let n=e.split(".")[0];a[o].indexOf(n)>=0&&t.hasOwnProperty(e)&&(a[e]=t[e])})),C){let t=v.get(o).map((function(t){return r.getAuthorizedValue(e,null,t)})),n=a[o];Array.isArray(t)&&Array.isArray(n)&&(a[q]=[],t.forEach((function(e){-1===n.indexOf(e)&&a[q].push(e)})),Q=[],a[q].forEach((function(e){i.forEach((function(t){t.split(".")[0]===e&&Q.push(t)}))})))}}return a},L=function(t){var a,r,l,u,s,c,d,f;e.is(t)&&(C=!0,v=t,a=i.getNodeModel(v.get("PID"),!0),p=e.is(t.get("resourceParamPlanPID"))?t.get("resourceParamPlanPID"):a.options.resourceParameterPID,b=v.get("PID"),w=v.get("resourceID"),x=v.get("V_ParamListPIDOnResource"),U=v.get("V_ParamPIDOnParamList"),l=n.getReferenceModel(p),u=t.get("V_RPPMode"),s=t.get("V_RPPTitle"),c="SET"===u?"ResourceParametersMgmtDialog.EditDialogSET":"ResourceParametersMgmtDialog.EditDialogGET",d={title:o.getNLSValue(c,{rppTitle:s})},f=t.get("V_RPPMagnitude"),r=l.get("type")+t.get("V_RPPMode"),"Text"!==f&&"Integer"!==f||(r+="Arr"),M(D[r].Attribute,t),A(),y(d,S),V.inject(m),F(B))},F=function(t){e.is(t)&&e.is(v)&&(v.toJSON().hasOwnProperty("RPP_ParameterIdentifier")||"ArbitraryUnit"===v.toJSON().V_RPPMagnitude)&&t.isValid!==s.VALID&&(t.isValid===s.DISPLAY_WARNING_MESSAGE_WITH_CHECKBOX?O(t.msgTobeDisplayed):k(t.msgTobeDisplayed))},O=function(e){P.errorMsg(e);let t=a.createElement("div",{class:"RPPRow-Parameter_ArbitraryUnit-Inconsistency",id:"InconsistencyRPPRow"}),n=a.createElement("span",{class:"RPPRow-Parameter_ArbitraryUnit-Inconsistency-span",text:o.getNLSValue("ResourceParameterPlanEditUI.ParameterWarningMessageCheckbox")}),i=new(a.getComponent("Toggle"))({class:"RPPRow_Inconsistency_Toggle",type:"checkbox",checkFlag:!1});W=function(e){e.dsModel.checkFlag,P.buttons.Ok.disabled=!e.dsModel.checkFlag},i.addEventListener("change",W),n.inject(t),i.inject(t),t.inject(m),t.scrollIntoView({behavior:"smooth"})},k=function(e){P.errorMsg(e);let t=a.createElement("div",{class:"RPPRow-Parameter_ArbitraryUnit-Inconsistency",id:"InconsistencyRPPRow"});P.buttons.Ok.disabled=!0,t.inject(m),t.scrollIntoView({behavior:"smooth"})},{init:function(t){var a=e.is(t)?t:{};e.is(a.editFormConfig)&&(D=a.editFormConfig),e.is(a.rppAbsPath)&&(R=a.rppAbsPath)},editResourceParameterRow:function(e,t){R=R||t,L(e)},closeDialog:function(){e.is(P)&&P.close()}}}})),define("DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectImportRowUI",["UWA/Core","text!DS/DELPPWWorkInstructionsModule/assets/json/DataCollectImportRowTLVOptions.json"],(function(e,t){"use strict";return function(a,n,i,r,o,l,u,s,c){var d,f,g,P,m,V,h,v,I,p,b,R,D=n.getComponent("Element"),C=n.getComponent("Button"),N=n.getComponent("AutoComplete"),y=n.getComponent("TreeDocument"),A=n.getComponent("TreeNodeModel"),M=null,L=null,E=null,_=null,S=[],w=[],x=new Map,U=null,T=null,F=null;return t=e.Json.decode(t),d=function(){var t;e.is(U)&&U.visibleFlag&&U.close(),t=l.getNLSValue("DataCollectImportRowUI.Panel.Title"),P(t,I),m(),U.show()},f=function(){o.emptyNodeModel(),S=[]},g=function(){U=null,T=null,F=null,U=null,o.removeEventListener(E),o.removeEventListener(_)},P=function(t,i){T=new D("div",{class:"DataCollectImportRowUI-Dialog-Container"}),(U=n.create("Dialog",{domId:"DataCollectImportRowUI-Dialog-Identifier",title:e.is(t)?t:l.getNLSValue("DataCollectImportRowUI.DefaultTitle"),identifier:"DataCollectImportRowUI-Dialog-Identifier",content:T,width:600,minWidth:300,resizableFlag:!0,modalFlag:!0,buttons:{Cancel:new C({onClick:function(){U.close()}}),Ok:new C({disabled:!0,emphasize:"primary",onClick:i})}})).close=function(){U.hide(),a.notify("showPerformanceCharacteristics",{state:!1}),f(),g()}},m=function(){var a,n,u=t;u=u||{};let s=new D("div",{class:"PerformanceCharacteristics-Toolbar-Container"});s.inject(T),(F=new D("div",{class:"DataCollectPlanImportRow-TLV-Container",id:"DataCollectImportRowDGView"})).inject(T),u=e.extend(u,{treeDocument:o.getWUXNodeModel(),treeListViewContainer:F,toolbarContainer:s},!0),r.createTreeListView(u);let c=new D("div",{class:"MfgItem-Label-Container"});c.inject(s);let d=l.getNLSValue("DataCollectImportRowUI.ManufacturedMaterial"),f=(new D("label",{text:d}).inject(c),new D("div",{class:"MfgItems-AutoComplete-Container"}));f.inject(s),a=new y({}),w.forEach((function(e){n=new A({label:i.getDisplayName(i.getReference(e)),value:e}),a.addChild(n)}));let g=new N({elementsTree:a,multiSearchMode:!0,allowFreeInputFlag:!1,selectedItems:a.getChildren()});g.inject(f),Promise.allSettled(p(g.value)).then((()=>{V()})),g.addEventListener("change",(function(e){var t;t=p(g.value),Promise.allSettled(t).then((()=>{V()}))}))},R=function(e){e.characteristics.forEach((e=>{let t=o.addNodeModel({referencePID:e.physicalid,label:e.title,grid:{DCImport_Title:e.title,DCImport_Type:l.getNLSValue("DataCollectImportRowUI.Type."+e.type),V_description:e.description,current:e.current,revision:e.revision}});x.set(t,e)}))},V=function(){o.emptyNodeModel(),o.prepareUpdate(),S.forEach((function(e){R(e)})),h(),o.pushUpdate(),E=o.addEventListener("select",v),_=o.addEventListener("unselect",v)},h=function(){var e=o.getTreeDocument(),t=o.getRootNodes();o.prepareUpdate(),t.sort((function(e,t){return e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")})).forEach((function(t,a){e.addRoot(t,a)})),o.pushUpdate()},v=function(){var e=o.getSelectedNodes();U.buttons.Ok.disabled=!(e.length>0)},I=function(){var t,n=[],r=[],s=o.getSelectedNodes();s.forEach((t=>{let a=x.get(t);"DescriptiveCharacteristic"===a.type||"MeasurementCharacteristic"===a.type&&e.is(a.dimension)&&""!==a.dimension["3DSpaceDimensionName"].trim()?n.push(a.physicalid):r.push(a.title)})),t=i.getAggregatingReferenceModelFromInstance(i.getInstance(L[L.length-2])).get("PID"),U.close(),n.length>0&&n.length>0?(u.generateDataCollectRows(n,M,L,t),r.length>0&&r.forEach((e=>{a.warn(l.getNLSValue("DataCollectImportRowUI.UnableToCreateCharac",{title:e}))}))):a.warn(l.getNLSValue("DataCollectImportRowUI.NoRowsToCreate"))},p=function(e){var t=[];return S=[],e.forEach((e=>{t.push(new Promise(((t,n)=>{u.getDataImportCollectRows(e,{onComplete:function(e){S.push(...e),t()},onFailure:function(){a.warn(l.getNLSValue("DataCollectImportRowUI.CouldntFetchRows")),n()}})})))})),t},b=function(e){var t,a=[];if(1===e.length)a=e;else for(t=0;t<e.length;t++)t%2==1&&a.push(e[t]);return a},{init:function(e){var t=[];w=[],M=e.dataCollectPID,L=e.absolutePath,t.push(e.absolutePath[0]),t.concat(b(e.absolutePath)).forEach((e=>{c.getImpactedConnections(e,!1,{relationTypes:["ProcessImplementLinkOcc","ProcessImplementLink"]}).forEach((e=>{if("ProcessImplementLinkOcc"===e.get("type")){let t=e.get("to"),a=i.getReferenceIdFromInstance(t[t.length-1]);w.includes(a)||w.push(a)}else if("ProcessImplementLink"===e.get("type")){let t=e.get("to");w.includes(t)||w.push(t)}}))})),d()},isActive:function(){return e.is(U)&&U.visibleFlag},getDataCollectPID:function(){return M}}}})),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanDialogUI",["UWA/Core","DS/DELWebInfrastructureControls/DELWebResourceParameter/DELWebResourceParameterModel","text!DS/DELPPWWorkInstructionsModule/assets/json/ResourceParamRowTLVOptions.json"],(function(e,t,a){"use strict";return function(n,i,r,o,l){var u,s,c,d,f,g,P,m,V,h,v,I=i.getComponent("Button"),p=i.getComponent("DataGridView"),b=i.getComponent("Element"),R=i.getComponent("WUXFrameWindowsManager"),D=i.getComponent("TreeDocument"),C=i.getComponent("TreeNodeModel"),N="SET",y=!1,A=[],M=new D,L=null,E=null,_={},S=e.Json.decode(a);return c=function(e){var t,a=R.getFrameWindow(n.getAppContext()).getImmersiveFrame();L=new b("div",{class:"ResourceParameterRow-Panel-Container"}),(E=i.create("Dialog",{domId:"ResourceParameterDialogUI-Dialog-Identifier",title:e.title,identifier:"ResourceParameterDialogUI-Dialog-Identifier",immersiveFrame:a,content:L,width:500,height:315,modalFlag:!0,position:{my:"center",at:"center"},resizableFlag:!0,buttons:{Cancel:new I({onClick:function(){E.close()}}),Ok:new I({disabled:!1,emphasize:"primary",onClick:function(){(t=M.getSelectedNodes()).length>0?f(t):E.close()}})}})).close=function(){E.hide(),h()}},m=function(){var t=[];y=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,t="SET"===N?A.filter((e=>"DELResourcePrmINPUT"===e.plmObjectType)):"GET"===N&&y?A.filter((e=>"DELResourcePrmOUTPUT"===e.plmObjectType)):A,M.prepareUpdate(),M.empty(),t.forEach((function(e){V(e)})),M.pushUpdate()},h=function(){M.empty(),e.is(E)&&(E.remove(),E=null),N="SET",y=!1},g=function(t){var a,n,i,r,l,u,s,c=S.DELResourceParameterRow,d=c.columnConfig.Columns.Column,f=c.toolbarOptions,g=null,V=null,h={semantics:{}},v={};t.forEach((t=>{v=e.extend(v,{[t.get("PID")]:t.get("PLMEntity.V_Name")})})),h.semantics.possibleValues=v,Object.keys(v).length>0&&(h.data=Object.keys(v)[0]),d.forEach(((e,t,a)=>{a[t].text=o.getNLSValue(e.dicoType+"."+e.dataIndex),"V_RPLName"==a[t].dataIndex&&(a[t].filterInfos={type:"string",options:{allowRegexp:!0,filterId:"set"}})})),(g=new b("div",{class:"ResourceParameterRow-Toolbar-Container"})).inject(L),(V=new b("div",{class:"ResourceParameterRow-TLV-Container",id:"ResourceParameterRowDGView"})).inject(L),a=new p({rowSelection:"multiple",treeDocument:M,cellSelection:"none",enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},columns:d}),f.entries.forEach((e=>{switch(e.id){case"resource":e.dataElements.label=o.getNLSValue("ResourceParameterCreateUI.Resources");break;case"RPPPreference":e.dataElements.label=o.getNLSValue("ResourceParameterCreateUI.Preference")}})),s=a.setToolbar(JSON.stringify(f)),g.appendChild(s.getContent()),a.getContent().inject(V),i=s.getNodeModelByID("set"),r=s.getNodeModelByID("get"),n=s.getNodeModelByID("resource"),l=s.getNodeModelByID("RPPPreference"),i.setLabel(o.getNLSValue("ResourceParameterCreateUI.Set")),r.setLabel(o.getNLSValue("ResourceParameterCreateUI.Get")),n.updateOptions({grid:h}),(u=function(t){var a=e.is(t)?t:Object.keys(v)[0];new Promise(((e,t)=>{P(a,e,t)})).then((function(e){var t,n={};for(let i in e){t=e[i];for(let e in t)t[e].resourceListID=i,t[e].resourceID=a;n={...n,...e[i]}}(A=Object.keys(n).map((e=>n[e]))).length>0&&m()}),(function(){A=[],M.empty()}))})(),r.onAttributeChange((function(t){!0===t.data.changedAttributeValue?(N="GET",y=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,l.options.grid.data=y,l.updateOptions({disabled:!1}),i.options.grid.data=!1):(l.updateOptions({disabled:!0}),i.options.grid.data=!1),i.updateOptions(),A.length>0&&m()})),i.onAttributeChange((function(t){!0===t.data.changedAttributeValue?(N="SET",y=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,l.options.grid.data=y,l.updateOptions({disabled:!0}),r.options.grid.data=!1):(l.updateOptions({disabled:!0}),r.options.grid.data=!1),r.updateOptions(),A.length>0&&m()})),n.onAttributeChange((function(e){u(e.data.changedAttributeValue)})),l.onAttributeChange((function(e){widget.addPreference({name:"toolBarGETPref",type:"hidden",defaultValue:e.data.changedAttributeValue}),m()}))},d=function(e){var t={title:o.getNLSValue("ResourceParameters.AddDialog")};c(t),g(e),E.show()},f=function(e){var t=[],a={};a.rppPath=s,e.forEach((e=>{t.push(e._options.grid)})),E.close(),r.createResourceParameterRow(u,t,a)},V=function(t){var a,n=t.parameter_type,i=e.is(t.units)?t.units:"",l="Double"===n?r.getArbitraryUnitFromUri(i):o.getNLSForUnit(n,i),u=t.minLimit,s=t.maxLimit,c=e.is(u)?"Included"===u?"≤":"<":"",d=e.is(s)?"Included"===s?"≤":"<":"";"Double"===n&&(n="ArbitraryUnit",l=o.getNLSForUnit(n,l));let f="";f="Text"===n||"Integer"===n?o.getNLSValue("DCType."+n):o.getNLSValue(n),a=new C({label:"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle",grid:{V_RPPTitle:t.V_Name,V_RPLName:t.V_RPLName,V_RPPMode:N,V_RPPMagnitude:e.is(t.parameter_type)?{labelValue:e.is(t.parameter_type)?t.parameter_type:"",label:f,getLabel:function(){return this.label},icon:{iconPath:o.getIconURLFromKey("DCMagnitude."+n),iconSize:{width:"22px",height:"22px"}}}:"",V_RPPDescription:e.is(t.V_description)?t.V_description:null,V_RPPValue:e.is(t.V_Values)?Array.isArray(t.V_Values)?null:t.V_Values:null,V_PossibleValues:Array.isArray(t.V_Values)?t.V_Values.map(String):"",V_RPPMinValue:"",V_RPPMaxValue:"",V_RPPMinControlValue:"",V_RPPRscMinValue:e.is(t.minValue)?String(t.minValue):"",V_RPPRscMaxValue:e.is(t.minValue)?String(t.minValue):"",V_RPPMaxControlValue:"",V_MinValue_disp:e.is(t.minValue)?t.minValue+" "+l+" "+c:"",V_MaxValue_disp:e.is(t.maxValue)?d+" "+t.maxValue+" "+l:"",unit:l,V_RPPUnit:i,V_RPPMinValue_Inclusive:"NotSet",V_RPPMaxValue_Inclusive:"NotSet",V_RPPMinControlValue_Inclusive:"NotSet",V_RPPMaxControlValue_Inclusive:"NotSet",V_RPPMinEoFValue:"",V_RPPMaxEoFValue:"",V_RPPMinEoFValue_Inclusive:"NotSet",V_RPPMaxEoFValue_Inclusive:"NotSet",V_ParamListPIDOnResource:t.resourceListID,V_ParamPIDOnParamList:t.physicalid,V_RPPRichText:"",resourceID:t.resourceID,...t.hasOwnProperty("DELParameterIdentifierExt.V_ParameterIdentifier")&&{RPP_ParameterIdentifier:t["DELParameterIdentifierExt.V_ParameterIdentifier"].parameterId}}}),M.addRoot(a)},v=function(e,t){for(let a in e)if(t[a])for(let n in t[a])t[a][n].V_RPLName=e[a];return t},P=function(a,i,r){var o={blnForceRefresh:!0,physicalid:a},l=[];t.getResourceParameterLists(o).then((function(t){if(e.is(t))for(let e in t)l.push({physicalid:t[e].resourceParameterList.physicalid}),_[t[e].resourceParameterList.physicalid]=t[e].resourceParameterList.V_Name})).finally((()=>{t.getResourceParametersForList({QueryList:l,blnForceRefresh:!0}).then((function(e){i(e),v(_,e)}),(e=>{n.debug(e),r()}))}))},{createResourceParameterPlanRow:function(t,a,n){e.is(t)&&e.is(n)&&(u=t.id,s=n,d(a))},close:function(){e.is(E)&&E.close()}}}})),define("DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectMgmtUI",["UWA/Core","text!DS/DELPPWWorkInstructionsModule/assets/json/DataCollectTLVOptions.json"],(function(e,t){"use strict";return function(t,a,n,i,r,o,l){var u,s,c,d,f,g,P,m,V,h,v,I=a.getComponent("Element"),p=a.getComponent("WUXFrameWindowsManager"),b="DELWkiDataCollectPlanReference",R="DELWkiDataCollectChecklistReference",D=null,C=null,N=[],y=[],A=[],M=null,L=null,E=!1,_=null,S=null,w=null,x=null;return u=function(t,a){var i,r,l=a.WKIModel,u=l.get("PLMEntity.V_Name"),c=l.get("PID"),g=!0;e.is(_)&&_.visibleFlag&&(D===t?(s(),g=!1):_.close()),y=n.findAllRIRPaths(c),N=y.find((e=>e.includes(a.instancePID))),C=c,i="DataCollectMgmtUI."+(D=t)+".Panel.Title",r=o.getNLSValue(i,{dcTitle:u}),g?(d(r),f(),_.show()):_.title=r},s=function(){r.emptyNodeModel(),A.forEach((function(e){n.removeReference(e.get("PID"),{silent:!0})})),D=null,C=null,A=[]},c=function(){e.is(_)&&(_.remove(),_=null),r.removeEventListener(M),r.removeEventListener(L)},d=function(n){var i=p.getFrameWindow(t.getAppContext()).getImmersiveFrame();S=new I("div",{class:"DataCollectPlan-Panel-Container"}),(_=a.create("Panel",{domId:"DataCollectMgmtUI-Dialog-Identifier",title:e.is(n)?n:o.getNLSValue("DataCollectMgmtUI.Panel.DefaultTitle"),identifier:"DataCollectMgmtUI-Dialog-Identifier",immersiveFrame:i,content:S,width:600,height:315,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){D===b&&t.notify("editDataCollectPlan",{state:!1}),D===R&&t.notify("editDataCollectChecklist",{state:!1}),_.hide(),s(),c()}},f=function(){(w=new I("div",{class:"DataCollectPlan-Toolbar-Container"})).inject(S),(x=new I("div",{class:"DataCollectPlan-TLV-Container",id:"DataCollectDGView"})).inject(S),i.loadDocument(r.getWUXNodeModel());let t=i.getToolBarContent();i.setToolbarActionHandler(m),e.is(t)&&t.inject(w),i.getContent().inject(x)},v=function(e){var t=l.getNodeOptions(e);t.dataCollectPID=C,r.addNodeModel(t)},g=function(){r.emptyNodeModel(),r.prepareUpdate(),A.forEach((function(e){v(e)})),P(),r.pushUpdate(),M=r.addEventListener("select",V),L=r.addEventListener("unselect",V)},P=function(){var e=r.getTreeDocument(),t=r.getRootNodes();r.prepareUpdate(),t.sort((function(e,t){return e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")})).forEach((function(t,a){e.addRoot(t,a)})),r.pushUpdate()},m=function(e){var a;switch(e){case"DCPShowPerfC":E=!0,t.notify("showPerformanceCharacteristics",{absolutePath:N,dataCollectPID:C,state:!0});break;case"DCPAddRow":t.notify("createDataCollectRow",C);break;case"DCPEditRow":a=r.getSelectedNodes()[0].getReferencePID(),t.notify("editDataCollectRow",{RIRPaths:y,selectedRowMdl:n.getReferenceModel(a)});break;case"DCPDeleteRow":case"DCCLDeleteRow":h();break;case"DCCLAddRow":t.notify("createDataCollectCheckListRow",C);break;case"DCCLEditRow":a=r.getSelectedNodes()[0].getReferencePID(),t.notify("editDataCollectCheckListRow",{RIRPaths:y,selectedRowMdl:n.getReferenceModel(a)})}},V=function(){var e=r.getSelectedNodes(),t=["DCPAddRow","DCPShowPerfC","DCCLAddRow"];1===e.length?t=t.concat(["DCPEditRow","DCPDeleteRow","DCCLEditRow","DCCLDeleteRow"]):e.length>1&&t.push("DCPDeleteRow","DCCLDeleteRow"),i.enableToolBarItems(t)},h=function(){var a=r.getSelectedNodes();e.is(a)&&a.forEach((function(a){l.deleteDataCollectRow(C,a.getReferencePID(),{onComplete:function(n){e.is(n)&&n===a.getReferencePID()?(r.removeNode(a),t.info(o.getNLSValue("DataCollectMgmtUI.DCRowDelete.Success"))):t.warn(o.getNLSValue("DataCollectMgmtUI.DCRowDelete.Failure"))},onFailure:function(){t.warn(o.getNLSValue("DataCollectMgmtUI.DCRowDelete.Failure"))}})}))},{initDCPUI:function(a){var n,i=a.WKIModel,r=i.get("type"),s=i.get("PID");e.is(r)&&e.is(r)?(l.isDataCollectCheckList(r)?n=R:l.isDataCollectPlan(r)&&(n=b),e.is(n)?(u(n,a),l.getDataCollectRows(s,y,{onComplete:function(e){A=e,g()},onFailure:function(){t.warn(o.getNLSValue("DataCollectMgmtUI.CouldntFetchRows"))}})):t.warn(o.getNLSValue("DataCollectMgmtUI.NotDataCollectType"))):t.warn(o.getNLSValue("DataCollectMgmtUI.InvalidModel"))},initDCPAttributes:function(){l.fetchDataCollectAttrInfos()},isActive:function(){return e.is(_)&&_.visibleFlag},addDataCollectRow:function(e){v(e)},deleteDataCollectRow:function(){h()},onUpdateDataCollectRow:function(e){var t,a=e.get("type"),n=e.get("PID");"PLMSpecifyHowToCollectDataCnx"===a&&e.hasChanged()&&(t=l.getNodeOptions(e),r.updateNodeOptions(n,t),e.hasChanged("V_TreeOrder")&&P())},onUpdateDataCollect:function(e){var t,a;e.get("PID")===C&&e.hasChanged("PLMEntity.V_Name")&&(t="DataCollectMgmtUI."+D+".Panel.Title",a=o.getNLSValue(t,{dcTitle:e.get("PLMEntity.V_Name")}),_.title=a)},getDataCollectPID:function(){return C},getIsPerformanceCharacteristicRow:function(){return E},setIsPerformanceCharacteristicRow:function(e){E=e},destroy:function(t){e.is(_)&&_.close()}}}})),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanMgmtUI",["UWA/Core","DS/DELWebInfrastructureControls/DELWebResourceParameter/DELWebResourceParameterModel","text!DS/DELPPWWorkInstructionsModule/assets/json/ResourceParamPlanTLVOptions.json"],(function(e,t,a){"use strict";return function(a,n,i,r,o,l,u,s,c){var d,f,g,P,m,V,h,v,I,p,b,R,D,C=n.getComponent("Element"),N=n.getComponent("WUXFrameWindowsManager"),y=null,A=null,M=[],L=null,E=null,_=null,S=null,w=null,x=null,U=!1,T="PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle";return d=function(t,a){var n,i,r=a.get("PLMEntity.V_Name"),u=a.get("PID"),s=!0;e.is(_)&&_.visibleFlag&&(y===t?(f(),s=!1):_.close()),A=u,n="ResourceParamaterPlanMgmtUI."+(y=t)+".Panel.Title",i=l.getNLSValue(n),s?(P(i),m(r),_.show()):_.title=i,L=o.addEventListener("select",I),E=o.addEventListener("unselect",I)},f=function(){o.emptyNodeModel(),i.getReferenceModel(A).state=!1,y=null,A=null,M=[]},g=function(){e.is(_)&&(_.remove(),_=null),o.removeEventListener(L),o.removeEventListener(E)},P=function(t){var i=N.getFrameWindow(a.getAppContext()).getImmersiveFrame();S=new C("div",{class:"ResourceParameterPlan-Panel-Container"}),(_=n.create("Dialog",{domId:"ResourceParameterMgmtUI-Dialog-Identifier",title:e.is(t)?t:l.getNLSValue("ResourceParametersMgmtUI.Panel.DefaultTitle"),identifier:"ResourceParameterMgmtUI-Dialog-Identifier",immersiveFrame:i,content:S,width:500,height:315,modalFlag:!1,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){_.hide(),f(),g(),a.notify("editResourceParameterPlan",{state:!1})}},v=function(e){var t;switch(e){case"RPPAddRow":a.notify("createResourceParameterRow",i.getReferenceModel(A));break;case"RPPEditRow":t=o.getSelectedNodes()[0].getReferencePID(),a.notify("editResourceParameteRow",i.getReferenceModel(t));break;case"RPPDeleteRow":R()}},m=function(t){(w=new C("div",{class:"ResourceParameterPlan-Toolbar-Container"})).inject(S),(x=new C("div",{class:"ResourceParameterPlan-TLV-Container",id:"ResourceParameterDGView"})).inject(S),r.loadDocument(o.getWUXNodeModel());let a=r.getToolBarContent();e.is(a)&&a.inject(w),r.getContent().inject(x),(p=r.getToolBarOption()).updateNodeModel("RPPTitle",{grid:{data:t}}),r.setToolbarActionHandler(v),(b=p.getNodeModelByID("RPPTitle")).onAttributeChange((function(t){var a,n;a=t.data.changedAttributeValue,(n=u.getObjectAndAttributeInfos({name:"PLMEntity.V_Name"})[0]).objectToBeModified=i.getReferenceModel(A),n.instOrRef=e.is(n.objectToBeModified)?"reference":"instance",i.updateModelAttribute(A,n,a)}))},D=function(e){var t;(t=u.getNodeOptions(e)).resourceParameterPID=A,o.addNodeModel(t)},V=function(){o.emptyNodeModel(),o.prepareUpdate(),M.forEach((function(e){D(e.toJSON())})),h(),o.pushUpdate()},h=function(){var e=o.getTreeDocument(),t=o.getRootNodes();o.prepareUpdate(),t.sort((function(e,t){return e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")})).forEach((function(t,a){e.addRoot(t,a)})),o.pushUpdate()},I=function(){var t=o.getSelectedNodes(),a=[];0===t.length?a=["RPPAddRow","RPPTitle"]:1===t.length?(a=["RPPEditRow","RPPDeleteRow","RPPTitle"],e.is(t[0].getAttributeValue(T))&&""!==t[0].getAttributeValue(T).iconPath&&(a=["RPPDeleteRow","RPPTitle"])):t.length>1&&(a=["RPPDeleteRow","RPPTitle"]),r.enableToolBarItems(a)},R=function(){var t=o.getSelectedNodes();e.is(t)&&t.forEach((function(t){u.deleteResourceParameterRows(A,t.getReferencePID(),{onComplete:function(n){e.is(n)&&n===t.getReferencePID()?(o.removeNode(t),a.info(l.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Success"))):a.warn(l.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Failure"))},onFailure:function(){a.warn(l.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Failure"))}})}))},{initAttributes:function(){u.fetchRPPAttrInfos((function(){U||(U=!0)}))},initRPPUI:function(n){var r,o,s,f,g,P=n.iRPPModel,m=n.instancePID,h=P.get("type"),v=P.get("PID"),I=[],p=["CapableResourcesStructureLink","DELAsmProcessCanUseCnx","SecondaryCandidateResourceLink"],b={resourceRefs:[],resourceParameterListIds:[],resourceParameterListObj:{}},R=[];if(e.is(h)){if(d(h,P),(r=i.findAllInstsPaths(P.get("PID")).find((e=>e.includes(m)))).length>1)for(let e=r.length-1;e>=0;e--)o=i.getInstance(r[e]),I.push(o.get("isInstanceOf")),0===e&&(f=i.getReferenceModel(o.get("isAggregatedBy")),I.push(f.id));else 1===r.length&&(s=i.getInstance(r[0]),f=i.getReferenceModel(s.get("isAggregatedBy")),I.push(f.id));I.forEach((e=>{c.getImpactedObjects(e,r,{relationTypes:p}).forEach((e=>{b.resourceRefs.push(e)}))})),b.rppPath=r,b.resourceRefs.forEach((a=>{g=new Promise(((n,i)=>{var r=a;t.getResourceParameterLists({blnForceRefresh:!0,physicalid:r}).then((function(t){e.is(t)&&(b.resourceParameterListIds=b.resourceParameterListIds.concat(Object.keys(t)),b.resourceParameterListObj[r]=Object.keys(t)),n()}))})),R.push(g)})),Promise.all(R).then((function(){u.getResourceParameterRows(v,b,{onComplete:function(e){M=e,V()},onFailure:function(){a.warn(l.getNLSValue("ResourceParametersMgmtUI.CouldntFetchRows"))}})}),(function(){b.resourceParameterListIds=[]}))}else a.warn(l.getNLSValue("ResourceParametersMgmtUI.NotResourceParameterType"))},isActive:function(){return e.is(_)&&_.visibleFlag},addResourceParameterRow:function(e){D(e)},deleteResourceParameterRow:function(){R()},onUpdateResourceParameterRow:function(e){var t,a=e.get("PID");e.hasChanged()&&(t=u.getNodeOptions(e.toJSON(),e),o.updateNodeOptions(a,t),e.hasChanged("V_TreeOrder")&&h())},onUpdateResourceParameter:function(e){var t,a,n={};e.get("PID")===A&&e.hasChanged("PLMEntity.V_Name")&&(t="ResourceParamaterPlanMgmtUI."+y+".Panel.Title",a=l.getNLSValue(t,{rppTitle:e.get("PLMEntity.V_Name")}),_.title=a,n.data=e.get("PLMEntity.V_Name"),b.updateOptions({grid:n}))},getResourceParameterPID:function(){return A},destroy:function(){e.is(_)&&_.close()}}}})),define("DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectDialogUI",["UWA/Core"],(function(e,t){"use strict";return function(t,a,n,i,r,o){var l,u,s,c,d,f,g,P,m,V,h,v,I,p,b,R,D,C,N,y,A,M,L,E,_,S,w,x,U,T,F,O,k,W,B,z,j,H,G,K=a.getComponent("Button"),X="PLMSpecifyHowToCollectDataCnx_Custo",Y="PLMSpecifyHowToCollectDataCnx",J="V_DCMagnitude",$="V_PossibleValues",q="V_ConformanceValues",Q="V_UnconformValues",Z="DELExtTargetValues",ee="DELRscPrmIODoubleValue",te=["V_MinValue","V_MinControlValue","V_MaxValue","V_MaxControlValue","V_MinEoFValue","V_MaxEoFValue"],ae="PLMSpecifyHowToCollectDataCnx_Custo.CustoExtn",ne="PLMSpecifyHowToCollectDataCnx_Custo.RemoveCustoExtn",ie="DataCollectPlanAccordionCollapsedList",re=[],oe=!1,le=!1,ue=!1,se=!1,ce=!1,de=!1,fe=!1,ge=!1,Pe=!1,me="",Ve="",he="",ve="",Ie=o.getNLSValue("DCPRPPArbitraryUnit"),pe="V_DCCriticality",be=[];return D=function(a){var n=e.clone(a.Units),i=t.getPreferenceValue(a.Name);if(e.is(i))for(let e=0;e<n.length;e++)if(n[e].Name===i){let t=n[0];n[0]=n[e],n[e]=t;break}return R=e.clone(a.Units),Array.isArray(n)&&n.length>0&&H(n),n},H=function(e){Array.isArray(e)&&e.length>0&&e.sort(((e,t)=>e.NLSName<t.NLSName?-1:e.NLSName>t.NLSName?1:0))},z=function(a,n){var i,r=e.clone(a.Units),o=[];if(e.is(n)&&n.length>0){if(i=n[0].toUpperCase(),e.is(i)){for(let e=0;e<r.length;e++)for(let t=0;t<n.length;t++)r[e].Name.toUpperCase()===n[t].toUpperCase()&&o.push(r[e]);for(let e=0;e<o.length;e++)if(o[e].Name.toUpperCase()===i){let t=o[0];o[0]=o[e],o[e]=t;break}}}else if(i=t.getPreferenceValue(a.Name),e.is(i)||(i=r[0]),e.is(i)){o=r;for(let e=0;e<o.length;e++)if(o[e].Name===i){let t=o[0];o[0]=o[e],o[e]=t;break}}return Array.isArray(o)&&o.length>0&&H(o),o},j=function(t,a){var n,i=[];if(e.is(a)&&Array.isArray(a)){var o=r.getDecodedArbitraryUnitsList(a);if(e.is(o)&&o.length>0&&(n=o[0].label,e.is(n))){for(let e=0;e<o.length;e++)i.push(o[e]);t.Units=i;for(let e=0;e<i.length;e++)if(i[e].Name===n){let t=i[0];i[0]=i[e],i[e]=t;break}}}return Array.isArray(i)&&i.length>0&&H(i),i},k=function(t){var a="";if(e.is(t)){var n=r.getAttributeInfo(X+".V_DCParameterOnto");let e=r.getAuthorizedValueIndex(n,null,t);if(e>-1)a=n.AuthorizedValues[e].uri}return a},W=function(t){var a="";if(e.is(t)){var n=r.getAttributeInfo(X+".V_DCParameterOnto");let i=-1;if(e.is(n.AuthorizedValues)&&n.AuthorizedValues.length>0)if(i=n.AuthorizedValues.findIndex((e=>e.uri===t)),i>-1)a=n.AuthorizedValues[i].NLS}return a},y=function(t,a){se=!1,ce=!1,de=!1,fe=!1,ge=!1,Pe=!1;var n,i,l,u,s,c,m,V,h,v=[],p=[],C=r.getAttributeInfo(X+".V_DCType"),N=r.getAuthorizedValue(C,a),y="",M=[],x=function(t,a){var i,r="";return"Real"===N?(I&&ge&&e.is(n)&&(i="ArbitraryUnit"===n.Name?t===ee?t:t+"Double":t+n.Name),oe?e.is(m)&&(i="ArbitraryUnit"===m.Name?t===ee?t:t+"Double":t+m.Name):e.is(n)&&(i="ArbitraryUnit"===n.Name?t===ee?t:t+"Double":t+n.Name)):e.is(N)&&(i=t+N),e.is(i)&&I&&(r=d.get(i+"."+a)),r};l=r.getObjectAndAttributeInfos(t),I&&(C=r.getAttributeInfo(X+".V_DCType"),N=r.getAuthorizedValue(C,d.get("V_DCType")),c=r.getAttributeInfo(X+"."+pe),y=r.getAuthorizedValue(c,d.get(pe))),l.forEach((function(a,l){var g,P=e.clone(a),w=!0;switch(I&&(P.objectToBeModified=d),e.is(t[l].displayType)&&(P.displayType=t[l].displayType),P.dataIndex){case"V_DCType":if(I){P.readOnly=!0;let t=r.getAttributeInfo(X+".V_DCType");if(he=r.getAuthorizedValue(t,P.objectToBeModified.get("V_DCType")),oe&&e.is(b)){let t="";t=k(b),e.is(t)&&("String"===(ve=r.getOntologyType(t))&&(ve="Text"),Pe=he!==ve)}}else{let e=(C=r.getAttributeInfo(X+".V_DCType")).AuthorizedValues.findIndex((e=>e.Name===N));u=r.getAuthorizedValueNLS(C,e),P.value=u}oe&&(P.readOnly=!0),P.attributeInfo.onChange=L.bind(null,P.attributeInfo);break;case"V_DCMagnitude":var U=r.getDimensions(),T=r.getArbitraryDimensions(),F=U.concat(T);if(oe){var O=[],W=[],H=[],G="";if(e.is(b)){if(G=k(b),O=r.getOntologyDimension(G),P.readOnly=!0,I){let t=P.objectToBeModified.get("V_DCMagnitude");e.is(G)&&t!==O&&(me=t,Ve=O,ge=!0),e.is(G)&&!ge||(P.value=t,function(t,a){if("Real"===N){if(n=t.find((function(e){return e.Name===a})),e.is(n))if(v=D(n),"ArbitraryUnit"===n.Name){let e=r.getArbitraryUnitFromUri(d.get("V_DCUnit"));i=v.find((function(t){return t.Name===e}))}else i=v.find((function(e){return e.Name===d.get("V_DCUnit")}))}else i=""}(F,t))}e.is(G)&&e.is(O)&&(ge||(W=r.getOntologyUnit(G),H=U.find((function(e){return e.Name===O.toUpperCase()})),P.attributeInfo.AuthorizedValues="ArbitraryUnit"==O||null==H&&""==H?O:H,function(t,a){if("Real"===N){if(m=t.AuthorizedValues,e.is(m)){if("ArbitraryUnit"===m){var n=[];n.Name="ArbitraryUnit",n.NLS=Ie,n.MKSUnit="",n.Units=[],M=j(n,a),m=n,t.AuthorizedValues=m}else M=z(m,a);if(I){if(se=!1,ce=!1,de=!1,"ArbitraryUnit"===m.Name){var i=r.getArbitraryUnitFromUri(d.get("V_DCUnit"));V=M.find((function(e){return e.Name===i}))}else V=M.find((function(e){return e.Name===d.get("V_DCUnit")}));e.is(V)||("ArbitraryUnit"===m.Name?""!==i&&e.is(i)?(se=!1,ce=!0):(se=!0,ce=!1):(se=!1,ce=!1,de=!0),V=""),le&&(se=!1,ce=!1,de=!1)}else V=M[0]}}else V=""}(P.attributeInfo,W),m&&(P.value=m.NLS)))}else P.readOnly=!1}else P.attributeInfo.AuthorizedValues=F,P.attributeInfo.HasRangeDefined="Yes",function(t){var a=I?d.get("V_DCMagnitude"):"LENGTH";if("Real"===N){if(n=t.find((function(e){return e.Name===a})),e.is(n))if(v=D(n),I)if(se=!1,"ArbitraryUnit"===n.Name){let t=r.getArbitraryUnitFromUri(d.get("V_DCUnit"));i=v.find((function(e){return e.Name===t})),e.is(i)||""!==t&&e.is(t)||(se=!0,ce=!1)}else i=v.find((function(e){return e.Name===d.get("V_DCUnit")}));else i=R[0];else"ArbitraryUnit"===a&&(se=!0);le&&(se=!1,ce=!1,de=!1)}else i=""}(P.attributeInfo.AuthorizedValues),n&&(P.value=n.NLS),I&&(P.readOnly=!0),P.attributeInfo.onChange=S;break;case"V_PossibleValues":fe=!1;var K={Name:"V_PossibleValues",NLS:o.getNLSValue("PLMSpecifyHowToCollectDataCnx_Custo.V_PossibleValues"),Type:"String",Protection:2,MultiValuated:"No",HasRangeDefined:"No",DefaultValue:"",MaxLength:256,Magnitude:"",ManipulationUnit:"",MultiLine:"No",UIAccess:"",HasDefault:"Yes"};if(K.AuthorizedValues=[{Name:"True,False",NLS:o.getNLSValue("DCRow.Boolean.PossibleValues.TrueFalse")},{Name:"Yes,No",NLS:o.getNLSValue("DCRow.Boolean.PossibleValues.YesNo")},{Name:"1,0",NLS:o.getNLSValue("DCRow.Boolean.PossibleValues.OneZero")}],K.DefaultValue=o.getNLSValue("DCRow.Boolean.PossibleValues.TrueFalse"),K.MultiValuated="Yes",P.displayType="chips",r.updateAttributeInfoForTextOnto(K),I&&(P.value=d.get(Z+N+"."+P.dataIndex),e.is(P.value)&&Array.isArray(P.value)&&P.value.length>0)){P.value.some((e=>e.includes("|")))&&P.value.forEach((e=>{let t=e.split("|"),a=[];t.forEach((e=>{a.push(e)})),P.value=a,be=a})),be=P.value}if("Boolean"===N){if(P.attributeInfo.onChange=E.bind(null,P.attributeInfo),P.attributeInfo.HasRangeDefined="Yes",P.displayType="",P.multiValue="true",I){let t=d.get(Z+"Text."+P.dataIndex),a=r.getPossibleValueDBEquivalentNLSForBoolean(t);e.is(a)&&"NULL"!=a&&(P.value=a)}}else if("Text"===N&&e.is(b)&&oe){var J,q=[];G=k(b);if(J=r.getOntologyStringValues(G),e.is(J)&&J.length>0){for(let e=0;e<J.length;e++)q.push({Name:J[e],NLS:J[e]});P.displayType="",P.attributeInfo.HasRangeDefined="Yes",P.multiValue="true",I||(P.value=J)}else P.displayType="chips",P.attributeInfo.HasRangeDefined="No",P.multiValue="false";if(P.attributeInfo.MultiValuated="Yes",P.attributeInfo.AuthorizedValues=q,P.attributeInfo.DefaultValue="",r.updateAttributeInfoForTextOnto(P.attributeInfo),I){let e=[];"NULL"!=P.value&&(P.value.forEach((t=>{t.split("|").forEach((t=>{e.push(t)}))})),Array.isArray(e)&&e.length>0&&Array.isArray(J)&&J.length>0&&e.forEach((e=>{if(!J.includes(e))return fe=!0,!1})),fe?(P.readOnly=!0,P.displayType="chips",P.attributeInfo.HasRangeDefined="No",P.multiValue="false"):P.readOnly=!1,P.value=e,P.attributeInfo.DefaultValue=P.value,be=e)}P.value=e.is(P.value)&&"NULL"!==P.value?P.value:[],P.attributeInfo.onChange=_.bind(null,P.attributeInfo)}else"Text"===N?(P.value=e.is(P.value)&&"NULL"!==P.value?P.value:[],P.attributeInfo.onChange=_.bind(null,P.attributeInfo)):P.value=e.is(P.value)&&"NULL"!==P.value?P.value:[];break;case"V_ConformanceValues":if("Boolean"===N){if(P.attributeInfo.HasRangeDefined="Yes",I){let e=r.getAttributeInfo(X+"."+$).AuthorizedValues,t=p.find((e=>e.dataIndex===$)).value||null,a=e.findIndex((e=>e.NLS===t));a>-1&&(P.attributeInfo.AuthorizedValues=r.getConformanceAuthValueFromIndex(a));let n=d.get(Z+"Text."+Q);P.value="NULL"!==n?r.getOppositeConfromanceValNLSFromValue(n[0]):P.attributeInfo.AuthorizedValues[0].NLS}}else if("Text"===N)if(P.attributeInfo.AuthorizedValues=[],P.attributeInfo.DefaultValue="",P.value=e.is(P.value)&&"NULL"!==P.value?P.value:[],P.attributeInfo.HasRangeDefined="Yes",P.attributeInfo.MultiValuated="Yes",!I&&e.is(b)&&oe){let t=[];for(let e=0;e<p.length;e++){let a=p[e];a.dataIndex===$&&(P.attributeInfo.AuthorizedValues=a.attributeInfo.AuthorizedValues,t=a.value)}P.value=e.is(t)&&"NULL"!==P.value?t:[]}else if(I){fe?(P.readOnly=!0,P.displayType="chips",P.attributeInfo.HasRangeDefined="No",P.multiValue="false"):P.readOnly=!1;let e=d.get(Z+N+"."+$);if("NULL"!==e){for(let t=0;t<p.length;t++){p[t].dataIndex===$&&e.forEach((e=>{let t=e.split("|");for(let e=0;e<t.length;e++){let a=t[e];P.attributeInfo.AuthorizedValues.push({Name:a,NLS:a})}}))}let t=d.get(Z+N+"."+Q);if("NULL"!==t){let a=[];e.forEach((e=>{e.split("|").forEach((e=>{t.includes(e)||a.push(e)}))})),a.length&&(P.value=a)}else P.value=e}}break;case"V_DCUnit":if(se||I&&ge)P.readOnly=!0,e.is(i)&&(P.value=i.NLSName,f=i.Name),P.attributeInfo.AuthorizedValues=v.map((function(t){var a=e.clone(t);return a.NLS=a.NLSName,a}));else if(e.is(b)&&oe?e.is(V)&&(P.value=V.NLSName,f=V.Name,P.attributeInfo.onChange=A,P.attributeInfo.AuthorizedValues=M.map((function(t){var a=e.clone(t);return a.NLS=a.NLSName,a}))):(e.is(i)&&(P.value=i.NLSName,f=i.Name),P.attributeInfo.onChange=A,P.attributeInfo.AuthorizedValues=v.map((function(t){var a=e.clone(t);return a.NLS=a.NLSName,a}))),I&&(ce||de)){let t="",a=[],n="",i=r.getDimensions(),o=r.getArbitraryDimensions();n=i.concat(o).find((function(e){if(m)return e.Name===m.Name})),n&&(a=D(n),ce?t=r.getArbitraryUnitFromUri(d.get("V_DCUnit")):de&&(t=d.get("V_DCUnit"))),e.is(t)&&""!==t&&(h=a.find((function(e){return e.Name===t})),e.is(h)&&(P.value=h.NLSName,f=h.Name))}break;case"V_Value":"Real"===N&&(se||I&&ge?(P.readOnly=!0,e.is(i)&&e.is(n)&&(P.attributeInfo.Magnitude=n.Name,P.attributeInfo.ManipulationUnit=i.Name,P.attributeInfo.pattern="^[-+]?([1-9][0-9]*)|(0)$")):I&&(ce||de)?e.is(h)&&e.is(m)&&(P.attributeInfo.Magnitude=m.Name,P.attributeInfo.ManipulationUnit=h.Name,P.attributeInfo.pattern="^[-+]?([1-9][0-9]*)|(0)$"):e.is(b)&&oe?e.is(V)&&(P.attributeInfo.Magnitude=m.Name,P.attributeInfo.ManipulationUnit=V.Name,P.attributeInfo.pattern="^[-+]?([1-9][0-9]*)|(0)$"):e.is(i)&&(P.attributeInfo.Magnitude=n.Name,P.attributeInfo.ManipulationUnit=i.Name,P.attributeInfo.pattern="^[-+]?([1-9][0-9]*)|(0)$")),P.value=x(Z,P.dataIndex);break;case"V_MinValue":case"V_MaxValue":se||I&&ge?(P.readOnly=!0,P.attributeInfo.unit=e.is(i)?i.NLSName:""):I&&(ce||de)?P.attributeInfo.unit=e.is(h)?h.NLSName:"":(P.attributeInfo.unit=e.is(i)?i.NLSName:"",e.is(b)&&oe&&(P.attributeInfo.unit=e.is(V)?V.NLSName:"")),P.attributeInfo.Type="Real"===N?"Double":"Integer",I&&(P.value={value:x(Z,P.dataIndex),inclusive:d.get(P.dataIndex+"_Inclusive")});break;case"V_MinControlValue":case"V_MaxControlValue":se||I&&ge?(P.readOnly=!0,P.attributeInfo.unit=e.is(i)?i.NLSName:""):I&&(ce||de)?P.attributeInfo.unit=e.is(h)?h.NLSName:"":(P.attributeInfo.unit=e.is(i)?i.NLSName:"",e.is(b)&&oe&&(P.attributeInfo.unit=e.is(V)?V.NLSName:"")),P.attributeInfo.Type="Real"===N?"Double":"Integer",I&&(P.value={value:x("DELExtControlLimits",P.dataIndex),inclusive:d.get(P.dataIndex+"_Inclusive")});break;case"V_MinEoFValue":case"V_MaxEoFValue":if(se||I&&ge?(P.readOnly=!0,P.attributeInfo.unit=e.is(i)?i.NLSName:""):I&&(ce||de)?P.attributeInfo.unit=e.is(h)?h.NLSName:"":(P.attributeInfo.unit=e.is(i)?i.NLSName:"",e.is(b)&&oe&&(P.attributeInfo.unit=e.is(V)?V.NLSName:"")),P.attributeInfo.Type="Double",I){let t="";t="V_MinEoFValue"===P.dataIndex?"V_MinValue":"V_MaxEoFValue"===P.dataIndex?"V_MaxValue":P.dataIndex;let a=P.objectToBeModified.get("V_DCMagnitude"),n="DELRscPrmIORangeValue_";e.is(a)&&"ArbitraryUnit"===a&&(n=ee),P.value={value:x(n,t),inclusive:d.get(P.dataIndex+"_Inclusive")}}break;case"V_DCFormula":case"V_DCPerformanceCharac":I?"Computed"===d.get("PLMSpecifyHowToCollectDataCnx.V_DCMode")&&(g=r.getNodeOptions(P.objectToBeModified),P.value=g.grid[P.dataIndex]):w=!1;break;case"V_DCParameterOnto":var te,ae,ne=!0,ie=[];if(C=r.getAttributeInfo(X+".V_DCParameterOnto"),P.attributeInfo.HasRangeDefined="Yes",P.attributeInfo.HasDefault="Yes",I)P.readOnly=!0,e.is(b)&&oe?((ae=r.getAuthorizedValueIndex(C,null,b))>-1&&(te=r.getAuthorizedValueNLS(C,ae)),P.value=te,ne=!1,w=!0):le?(w=!0,P.value=o.getNLSValue("DCParameterTypeDefault")):w=!1;else{if(ie=r.getOntologyExtnInfo(Y),e.is(ie)&&ie.length>0){if(e.is(b)&&oe&&((ae=r.getAuthorizedValueIndex(C,null,b))>-1&&(te=r.getAuthorizedValueNLS(C,ae)),P.value=te,ne=!1),ne&&e.is(C.AuthorizedValues,"array")){C.AuthorizedValues.length>0&&(ae=0,P.value=r.getAuthorizedValueNLS(C,ae))}w=!0}else w=!1;P.attributeInfo.AuthorizedValues=C.AuthorizedValues}P.attributeInfo.onChange=B.bind(null,P.attributeInfo);break;case"V_DCLabel":if(I)P.readOnly=!1,e.is(b)&&oe&&(P.readOnly=!0);else if(e.is(b)&&oe){P.readOnly=!0;let e=k(b);P.value=r.getOntologyLabel(e)}else P.readOnly=!1;break;case"V_description":if(I)P.readOnly=!1,e.is(b)&&oe&&(P.readOnly=!0);else if(e.is(b)&&oe){let t=k(b),a=r.getOntologyDescription(t);e.is(a)&&""!=a?(P.readOnly=!0,P.value=a):P.readOnly=!1}else P.readOnly=!1;break;case"V_DCCriticality":const t=(c=r.getAttributeInfo(X+"."+pe)).AuthorizedValues.findIndex((e=>e.Name===y));s=r.getAuthorizedValueNLS(c,t),P.value=""===y?"":s,I&&(se||ge||ce)&&(P.readOnly=!0)}w&&p.push(P)})),g=p.slice();let U=[],T=!1,F=r.getDeploymentExtnInfo(Y,!0),O=r.getWidgetPreferenceValue(ie);if(Array.isArray(F)&&F.length>0){T=!0;let t=[];F.forEach((function(e){let a=[];e.Attributes.forEach((function(t){a.push({name:t,dicoType:e.Name})})),t.push({Attribute:r.getObjectAndAttributeInfos(a),name:e.Nls,expandedFlag:-1===O.indexOf(e.Nls)})})),t.forEach((function(t){t.Attribute.forEach((function(t){if("ReadOnly"===t.attributeInfo.UIAccess&&(t.readOnly=!0,t.attributeInfo.isReadOnly=!0),"String"===t.attributeInfo.Type&&"Yes"===t.attributeInfo.MultiValuated&&"No"===t.attributeInfo.HasRangeDefined&&(t.displayType="chips",I||(t.value=e.is(t.value)&&"NULL"!==t.value?t.value:[]),I))if(e.is(d._attributes)&&d._attributes.hasOwnProperty(t.attributeInfo.FullName)){"NULL"===d.get(t.attributeInfo.FullName)&&(t.value=[],d._attributes[t.attributeInfo.FullName]=[])}else t.value=e.is(t.value)&&"NULL"!==t.value?t.value:[]}))})),U=U.concat(t),I&&t.forEach((function(e){e.Attribute.forEach((function(e){e.objectToBeModified=d}))}))}let W=r.getCustoExtnInfo(Y);if(Array.isArray(W)&&W.length>0){T=!0;let t=[],a=[];a.push({name:"CustoExtn",dicoType:X}),t.push({Attribute:r.getObjectAndAttributeInfos(a),name:"Section.AddCustoExtn"}),t[0].Attribute[0].attributeInfo.onChange=w.bind(null,t[0].Attribute[0].attributeInfo);let n=[];if(I){let e=d.get(ae);if(Array.isArray(e)){let a=t[0].Attribute[0].attributeInfo;e.forEach((function(e){let t=r.getAuthorizedValueIndex(a,null,e);if(t>-1){let e=r.getAuthorizedValueDB(a,t);n.push(e)}}))}}W.forEach((function(e){var a=!0;I&&n.indexOf(e.Name)>=0&&(a=!1);let i=[];e.Attributes.forEach((function(t){i.push({name:t,dicoType:e.Name})})),t.push({Attribute:r.getObjectAndAttributeInfos(i),name:e.Nls,hide:a,expandedFlag:-1===O.indexOf(e.Nls)})})),t.forEach((function(t){if(e.is(t.name)&&"Section.AddCustoExtn"!=t.name){t.Attribute.forEach((function(t){if("String"===t.attributeInfo.Type&&"Yes"===t.attributeInfo.MultiValuated&&"No"===t.attributeInfo.HasRangeDefined&&(t.displayType="chips",I||(t.value=e.is(t.value)&&"NULL"!==t.value?t.value:[]),I))if(e.is(d._attributes)&&d._attributes.hasOwnProperty(t.attributeInfo.FullName)){"NULL"===d.get(t.attributeInfo.FullName)&&(t.value=[],d._attributes[t.attributeInfo.FullName]=[])}else t.value=e.is(t.value)&&"NULL"!==t.value?t.value:[]}))}})),U=U.concat(t),I&&t.forEach((function(e){e.Attribute.forEach((function(e){e.objectToBeModified=d}))}))}let H=p.findIndex((function(e){return"V_DCRichText"===e.dataIndex})),G=[];-1!==H&&(G=p.splice(H,1),U.unshift({name:"Section.InstructionText",Attribute:G,expandedFlag:-1===O.indexOf(o.getNLSValue("Section.InstructionText"))})),U.unshift({Attribute:p,headerAccordean:!1}),P={Section:U}},A=function(t,a){if(!0===se)l.buttons.Ok.disabled=!0;else{l.buttons.Ok.disabled=!1,le||l.clearMessages(),!0===le&&!1===ue&&(l.buttons.Ok.disabled=!0);let e=l.getContent().getElementsByClassName("DCPRow-onto-parameter-Unit-delete-container");e.length>0&&e[0].remove()}var n,i,o,u,s,c=[],d={},P=!1;g.forEach((function(a){var r,l=a.dataIndex,d=a.attributeInfo.FullName;if(i=t[d],"V_DCMagnitude"===l){let t=i.selectedIndex;e.is(t)?(o=a.attributeInfo.AuthorizedValues[i.selectedIndex].Name,u=a.attributeInfo.AuthorizedValues[i.selectedIndex].Units):(o=a.attributeInfo.AuthorizedValues.Name,u=a.attributeInfo.AuthorizedValues.Units),"ArbitraryUnit"===o&&(P=!0)}"V_DCUnit"===l&&(n=f,f=a.attributeInfo.AuthorizedValues[i.selectedIndex].Name,s=a.attributeInfo.AuthorizedValues[i.selectedIndex].NLSName),"V_MinValue"!==l&&"V_MaxValue"!==l&&"V_MinControlValue"!==l&&"V_MaxControlValue"!==l&&"V_Value"!==l&&"V_MinEoFValue"!==l&&"V_MaxEoFValue"!==l||(r=["inclusiveLineEditor","UnitsLineEditorForKF","LineEditorGroupForKF"].includes(i.fieldType)?i.getInputValue():i.getValue(),e.is(r)&&""!==r&&c.push({fullName:d,value:r}),i.setUnit(s),e.is(r)&&["UnitsLineEditorForKF","LineEditorGroupForKF"].includes(i.fieldType)&&i.setValue(r))}));var m,V=!0;P&&(V=!1,function(){let a=e.clone(c);a.forEach((function(e){let t=e.value;t*=10,e.value=t})),a.forEach((function(a){let n=t[a.fullName],i=a.value;e.is(n.setValue)?n.setValue(i):n.value=i})),c.forEach((function(a){let n=t[a.fullName],i=a.value;e.is(n.setValue)?n.setValue(i):n.value=i}))}()),V&&(m=-1,Array.isArray(u)&&e.is(n)&&(m=u.findIndex((function(e){return e.Name===n}))),m>-1&&f!==n&&c.length>0&&(d={dimension:o,fromUnit:n,toUnit:f,valuesToConvert:c.map((function(e){return e.value}))},r.convertValuesBetweenUnits(d).then((function(a){var n=a.ConvertValue.split(";");c.forEach((function(a,i){var r=t[a.fullName],o=n[i];e.is(r.setValue)?r.setValue(o):r.value=o}))}))))},S=function(t,a){var n,i,r,o,l,u,s=X+".V_DCUnit",d=t[X+"."+J];for(i=0;i<g.length;i++)if("V_DCUnit"===(n=g[i]).dataIndex?(r=e.clone(n),u=i):n.dataIndex===J&&(o=n.attributeInfo.AuthorizedValues[d.selectedIndex],l=D(o)),e.is(r)&&e.is(l)){r.attributeInfo.AuthorizedValues=l.map((function(t){var a=e.clone(t);return a.NLS=a.NLSName,a})),c.updateAuthorizedList(r.attributeInfo,s),g[u]=r;break}A(t,a)},N=function(){s=a.createElement("div",{class:"section-container"}),c=a.create("FormUI",{sections:P,renderTo:s,headerAccordean:!0,wkiLTHEnabledForInstruction:void 0,wkiLTHEnabledForDCPRPP:r.isNoSizeLimitEnabled()})},T=function(){var e,t,a,n,i;x()?(t=U(),e=m,a=h,n=V,l.close(),i={onComplete:function(e){Array.isArray(re)&&re.forEach((function(t){e.unset(t)})),re=[]}},r.updateDataCollectRow(e,a,t,n,i)):l.buttons.Ok.disabled=!1,be=[]},C=function(t,n){t=t||{},u=a.createElement("div",{class:"DataCollectRow-Dialog"}),(l=a.create("Dialog",{title:t.title,domId:"DataCollectRow-Dialog",content:u,resizableFlag:!0,modalFlag:!0,width:560,minWidth:290,height:500,buttons:{Cancel:new K({onClick:function(){l.close()}}),Ok:new K({disabled:!1,emphasize:"primary",onClick:n})}})).close=function(){var t=document.querySelectorAll(".wux-controls-expander-header"),a=r.getDeploymentExtn(Y,!0),n=r.getCustoExtn(Y),i=a.concat(n),s=[],P=[];(s=i.map((function(e){return e.Nls}))).push(o.getNLSValue("Section.InstructionText")),t.forEach((function(t){var a=t.getText(),n=t.getAttribute("expanded");-1===s.indexOf(a)||e.is(n)||P.push(a)})),r.setWidgetPreferenceValue(ie,P),this.destroy(),f=null,d=null,g=null,m=null,h=null,e.is(c)&&c.destroy(),e.is(u)&&u.destroy(),l=null,oe=!1,b=null,be=[]}},x=function(){var t,n,i=c.validate(),r=function(t,a,n,i){var r=[],l={valid:!0,values:null,message:""};if(0===a.value.length)return l;if(Number.isNaN(Number(a.value)))return l.valid=!1,l.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:i}),l;if(e.is(t)&&e.is(t.inclusive)&&"NotSet"!==t.inclusive&&String(t.value).length>0){if(r=Number(t.value),Number.isNaN(r))return l.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),l.valid=!1,l;r=[r]}else!e.is(t,"object")&&t.length>0&&(r=Array.isArray(t)?t:[t]);return r.length>0&&(l.values=[],l.valid=r.every((function(e){return(e=String(e).trim()).length>0&&isNaN(e)?(l.values=null,l.message=o.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),!1):(l.values.push(Number(e)),!0)}))),l},s=function(a,n){var i,l=o.getNLSValue(X+"."+a),u=o.getNLSValue(X+"."+n),s=e.clone(t[X+"."+a]),c=e.clone(t[X+"."+n]),d={valid:!0};if("NotSet"!==c.inclusive&&e.is(c.value)&&e.is(s)&&(c.value=String(c.value).trim(),s=e.is(s,"number")?String(s):s,d=r(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var f=0;f<d.values.length;f++)if(i=d.values[f],"Included"===c.inclusive&&i<c.value||"Included"!==c.inclusive&&i<=c.value){d.valid=!1,d.message=o.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}return d},d=function(a,n){var i,l=o.getNLSValue(X+"."+a),u=o.getNLSValue(X+"."+n),s=e.clone(t[X+"."+a]),c=e.clone(t[X+"."+n]),d={valid:!0};if("NotSet"!==c.inclusive&&e.is(c.value)&&e.is(s)&&(c.value=String(c.value).trim(),s=e.is(s,"number")?String(s):s,d=r(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var f=0;f<d.values.length;f++)if(i=d.values[f],"Included"===c.inclusive&&i>c.value||"Included"!==c.inclusive&&i>=c.value){d.valid=!1,d.message=o.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}return d},f=function(e,t){var a={valid:!0};return(a=s(e,"V_MinControlValue")).valid&&(a=s(e,"V_MinValue")),a.valid&&"Integer"!==t&&(a=s(e,"V_MinEoFValue")),a.valid&&(a=d(e,"V_MaxControlValue")),a.valid&&(a=d(e,"V_MaxValue")),a.valid&&"Integer"!==t&&(a=d(e,"V_MaxEoFValue")),a};if(i.result&&(t=c.getValues(),n=t[X+".V_DCType"],e.is(g)&&(i.result=g.every((function(a){var r,l,u=a.attributeInfo.Name,c={valid:!0};switch(u){case"V_MinEoFValue":"Integer"!==n&&(c=d(u,"V_MaxEoFValue"));break;case"V_MaxEoFValue":"Integer"!==n&&(c=s(u,"V_MinEoFValue"));break;case"V_MinValue":r="V_MinEoFValue",""===t[X+"."+(l="V_MaxValue")].value&&"Integer"!==n&&(l="V_MaxEoFValue"),(c=d(u,l)).valid&&"Integer"!==n&&(c=s(u,r));break;case"V_MaxValue":l="V_MaxEoFValue",""===t[X+"."+(r="V_MinValue")].value&&"Integer"!==n&&(r="V_MinEoFValue"),(c=s(u,r)).valid&&"Integer"!==n&&(c=d(u,l));break;case"V_MinControlValue":l="V_MaxControlValue",""===t[X+"."+(r="V_MinValue")].value&&"Integer"!==n&&(r="V_MinEoFValue"),""===t[X+"."+l].value&&""===t[X+"."+(l="V_MaxValue")].value&&"Integer"!==n&&(l="V_MaxEoFValue"),(c=d(u,l)).valid&&(c=s(u,r));break;case"V_Value":c=f(u,n);break;case"V_PossibleValues":"Integer"===n&&(c=f(u,n)).valid&&(c=function(a){var n=o.getNLSValue(X+"."+a),i=e.clone(t[X+"."+a]),r={valid:!0};if(e.is(i))for(let e=0;e<i.length;e++){let t=i[e],a=Number(t);if(!Number.isInteger(a)){r.valid=!1,r.message=o.getNLSValue("DCRow.InvalidValue.Integer",{attr:n});break}}return r}(u));break;case"V_MaxControlValue":r="V_MinControlValue",""===t[X+"."+(l="V_MaxValue")].value&&"Integer"!==n&&(l="V_MaxEoFValue"),""===t[X+"."+r].value&&""===t[X+"."+(r="V_MinValue")].value&&"Integer"!==n&&(r="V_MinEoFValue"),(c=s(u,r)).valid&&(c=d(u,l))}return c.valid||(i.message=c.message),c.valid})))),!i.result&&i.message)if(!0===le){if(l.getContent().getElementsByClassName("DCPRow-onto-parameter-validation-error-Parameter-delete-container").length<=0){var P=a.createElement("div",{class:"DCPRow-onto-parameter-validation-error-Parameter-delete-container",styles:{display:"flex","align-items":"center","margin-left":"45px"}}).inject(u);a.createElement("span",{text:i.message,styles:{color:"#ea4f37","margin-right":"10px"}}).inject(P),e.is(P)&&P.scrollIntoView({behavior:"smooth"})}}else l.errorMsg(i.message);return i.result},U=function(){var t,a={};let i=(t=c.getValues())[X+".V_DCType"],l=n.getReferenceModel(m),u=r.isDataCollectCheckList(l);a.V_DCParameterIdentifier="",g.forEach((function(n){var l,s,c,d=n.attributeInfo.Name,f=n.attributeInfo.FullName;if(e.is(t[f]))if(s=t[f],te.includes(d))""!==s.value&&(a[d]=String(s.value)),a[d+"_Inclusive"]=s.inclusive;else if("V_DCParameterOnto"===d){let t=!1;if(!0===le&&!0===ue&&(t=!0),s===o.getNLSValue("DCParameterTypeDefault")&&!0===le)if(!0!==t){let t,i=n.attributeInfo.AuthorizedValues;i.length>0&&(t=i.find((e=>e.Name===s)),e.is(t)&&(a.V_DCParameterIdentifier=t.uri))}else a.V_DCParameterIdentifier="";else if(s!==o.getNLSValue("DCParameterTypeDefault")){let t,i=n.attributeInfo.AuthorizedValues;i.length>0&&(t=i.find((e=>e.Name===s)),e.is(t)&&(a.V_DCParameterIdentifier=t.uri))}else s===o.getNLSValue("DCParameterTypeDefault")&&(a.V_DCParameterIdentifier="")}else if("V_DCUnit"!==d&&"V_DCMagnitude"!==d||!e.is(s))if("V_PossibleValues"===d)if(s)if(a[d]=Array.isArray(s)?s:s.split(","),s&&("Boolean"===i||u)){let t=r.getPossibleValueInArrayFromNLSForBoolean(s);e.is(t)&&"NULL"!=t&&Array.isArray(t)?a[d]=t:a[d]=[]}else{let e=[],t=!1;s.indexOf("|")>-1&&(t=!0),t?(e=s.split("|"),a[d]=e.map((function(e){return String(e)}))):a[d]=a[d].map((function(e){return String(e)}))}else a[d]=[];else if("V_ConformanceValues"===d){if(s&&("Boolean"===i||u))a[Q]=r.getOppositeConfromanceValFromValueNLS(s);else if("Text"===i){let e=a[$];if(s){let t=[],n=[];n=Array.isArray(s)?s:s.split("|"),n=n.map((function(e){return String(e)})),e.forEach((e=>{e.split("|").forEach((e=>{n.includes(e)||t.push(e)}))})),a[Q]=t}else a[Q]=e}}else if("V_Value"===d&&s)a[d]=String(s);else{let e=!0;"V_DCParameterOnto"===d&&s===o.getNLSValue("DCParameterTypeDefault")&&(e=!1),e&&(a[d]=Array.isArray(s)?s:String(s))}else if(c=g.find((function(e){return e.dataIndex===d})),c)if("V_DCMagnitude"===d&&oe)c.attributeInfo.AuthorizedValues.NLS===s&&(a[d]=c.attributeInfo.AuthorizedValues.Name);else if(l=c.attributeInfo.AuthorizedValues.find((function(e){return e.NLSName===s||e.NLS===s})),e.is(l))if("ArbitraryUnit"===a.V_DCMagnitude){let e=r.getUriFromArbitraryUnit(l.NLSName);a[d]=e}else a[d]=l.Name}));let s=r.getDeploymentExtnAttr(Y,!0);if(Array.isArray(s)&&s.length>0&&s.forEach((function(e){t.hasOwnProperty(e)&&(a[e]=t[e])})),t.hasOwnProperty(ae)){let e=r.getAttributeInfo(ae);a[ae]=t[ae].map((function(t){return r.getAuthorizedValue(e,t)}));let n=r.getCustoExtnAttr(Y);if(Array.isArray(n)&&n.length>0&&n.forEach((function(e){let n=e.split(".")[0];a[ae].indexOf(n)>=0&&t.hasOwnProperty(e)&&(a[e]=t[e])})),I){let t=d.get(ae).map((function(t){return r.getAuthorizedValue(e,t)})),i=a[ae];Array.isArray(t)&&Array.isArray(i)&&(a[ne]=[],t.forEach((function(e){-1===i.indexOf(e)&&a[ne].push(e)})),re=[],a[ne].forEach((function(e){n.forEach((function(t){t.split(".")[0]===e&&re.push(t)}))})))}}return r.replaceNLSValueWithDB(a),a},M=function(t,c){var g,P={};e.is(t)&&(I=!0,d=t,g=i.getNodeModel(d.get("PID"),!0),m=e.is(t.get("dataCollectPlanPID"))?t.get("dataCollectPlanPID"):g.options.dataCollectPID,V=c,h=d.get("PID"),P.onComplete=function(){var i,c,d,g=n.getReferenceModel(m),P={title:o.getNLSValue("DataCollectMgmtDialog.EditDialog")};if(d=r.getAttributeInfo(X+".V_DCType"),c=r.getAuthorizedValue(d,t.get("V_DCType")),i=g.get("type")+c,y(v[i].Attribute),N(),C(P,T),s.inject(u),!0===le){l.errorMsg(o.getNLSValue("DataCollectMgmtUI.ParameterWarningMessage")),l.buttons.Ok.disabled=!0;var V=a.createElement("div",{class:"DCPRow-onto-parameter-delete-container",styles:{display:"flex","align-items":"center","margin-left":"45px"}}).inject(u);a.createElement("span",{text:o.getNLSValue("DataCollectMgmtUI.ParameterWarningMessageCheckbox"),styles:{color:"#ea4f37","margin-right":"10px"}}).inject(V);var h=a.create("Toggle",{type:"checkbox",checkFlag:!1,label:""});if(h.addEventListener("change",p),h.inject(V),V.scrollIntoView({behavior:"smooth"}),ue=!1,(""==f||!e.is(f))&&c===o.getNLSValue("DCType.Real")){l.buttons.Ok.disabled=!0;var I=a.createElement("div",{class:"DCPRow-onto-parameter-Unit-delete-container",styles:{display:"flex","align-items":"center","margin-left":"45px"}}).inject(u);a.createElement("span",{text:o.getNLSValue("DCRow.InvalidUnit.Error"),styles:{color:"#ea4f37","margin-right":"10px"}}).inject(I),e.is(I)&&I.scrollIntoView({behavior:"smooth"})}}else!0===se?l.errorMsg(o.getNLSValue("DataCollectMgmtUI.ArbitraryUnitWarningMessage")):!0===Pe?l.errorMsg(o.getNLSValue("DataCollectMgmtUI.OntologyTypeChangedWarningMessage",{ontoType:he,ontoTypeNew:ve})):!0===ge?l.errorMsg(o.getNLSValue("DataCollectMgmtUI.OntologyDimensionChangedWarningMessage",{ontoMag:me,ontoMagNew:Ve})):!0===ce?l.errorMsg(o.getNLSValue("DataCollectMgmtUI.ArbitraryUnitRemoveWarningMessage")):!0===de?l.errorMsg(o.getNLSValue("DataCollectMgmtUI.UnitRemoveWarningMessage")):!0===fe&&l.errorMsg(o.getNLSValue("DataCollectMgmtUI.PossibleValueDeleteWarningMessage"))},r.fetchDataCollectRow(m,h,V,P))},p=function(t){!0===t.dsModel.checkFlag?(ue=!0,l.buttons.Ok.disabled=!1):(ue=!1,l.buttons.Ok.disabled=!0);let a=l.getContent().getElementsByClassName("DCPRow-onto-parameter-Unit-delete-container");(""==f||!e.is(f))&&a.length>0&&(l.buttons.Ok.disabled=!0)},F=function(t){var a,i,l={title:o.getNLSValue("DataCollectMgmtDialog.AddDialog")};i=n.getReferenceModel(m),r.isDataCollectPlan(i)?a="DELWkiDataCollectPlanReferenceReal":r.isDataCollectCheckList(i)&&(a="DELWkiDataCollectChecklistReferenceBoolean"),e.is(a)&&(y(v[a].Attribute,t),N(),C(l,O),s.inject(u))},L=function(t,a,n){var i,o=n.dsModel.value,c="DELWkiDataCollectPlanReference";e.is(s)&&(s.remove(),s=null,l.clearMessages()),e.is(t)&&(i=r.getAuthorizedValueIndex(t,null,o))>-1&&(o=r.getAuthorizedValueDB(t,i)),y(v[c+=o].Attribute,o),N(),s.inject(u)},E=function(t,a,n){console.log("_onPosValChange");var i,r,l,u=X+"."+q,s=a[X+"."+$];for(i=0;i<g.length;i++){var d=g[i];if(d.dataIndex===q){r=Object.assign({},d),a[d.attributeName].selectedIndex=0;let e=t.AuthorizedValues[s.selectedIndex].Name.split(",",n.dsModel.value.length);for(let t=0;t<e.length;t++)r.attributeInfo.AuthorizedValues[t].Name=e[t],r.attributeInfo.AuthorizedValues[t].NLS=o.getNLSValue(u+"."+e[t]);l=r.attributeInfo.AuthorizedValues}if(e.is(c)&&e.is(r)&&e.is(l)){r.attributeInfo.AuthorizedValues=l.map((function(t){var a=e.clone(t);return a.NLS=a.NLS,a})),c.updateAuthorizedList(r.attributeInfo,u),g[i]=r;break}}},_=function(t,a,n){console.log("_onPosValUpdate");var i=X+"."+q,o=a[X+"."+$],l=(o.value,o.value);r.getAttributeInfo(X+".V_DCType");var u=[],s=[];if(u=a[i].value,e.is(u)||(u=[]),oe&&e.is(b)){e.is(n.options.oldValue)&&(s=n.options.oldValue);let t=k(b),a=r.getOntologyStringValues(t);e.is(a)||(s=be,be=l)}else s=be,be=l;if(e.is(l)&&Array.isArray(l)&&l.length>0){if(a[i].elementsTree=l,e.is(s)||(s=[]),e.is(s)&&Array.isArray(s)){let t=s.length,n=l.length,r=!1,o=!1;t>n?o=!0:t<n&&(r=!0);let c,d=[];r&&(c=G(l,s),e.is(c)&&e.is(u)&&Array.isArray(u)&&(0==u.length?d=u.concat(c):u.includes(c)||(d=u.concat(c)))),o&&(c=G(s,l),e.is(c)&&e.is(u)&&Array.isArray(u)&&u.length>0&&(d=u.includes(c)?u.filter((e=>e!==c)):u)),a[i].value=d}}else a[i].elementsTree=[],a[i].value=[]},G=function(e,t){const a=new Map;t.forEach((e=>{a.set(e,(a.get(e)||0)+1)}));for(const t of e){if(!a.has(t)||0===a.get(t))return t;a.set(t,a.get(t)-1)}return null},w=function(t,a,n){var i,r=n.dsModel.value;i=function(t){for(var a=[];e.is(t.nextSibling);)a.push(t.nextSibling),t=t.nextSibling;return a},i(function(e,t){var a;for(a=1;a<=t;a++)e=e.parentElement;return e}(n.dsModel.elements.container,7)).forEach((function(e){let t=e.querySelector(".wux-controls-expander-header").innerText;r.indexOf(t)>=0?e.show():e.hide()}))},O=function(){var e,t;x()?(t=U(),e=m,l.close(),r.createDataCollectRow(e,t)):l.buttons.Ok.disabled=!1,be=[]},B=function(t,a,n){var i,c=n.dsModel.value,d="DELWkiDataCollectPlanReference",f=[],g="";let P=-1;if(c!=o.getNLSValue("DCParameterTypeDefault")){var m=k(c);f=r.getOntologyUnit(m),g=r.getOntologyDimension(m);let a=r.getCustoExtnInfo(Y),n=r.getOntologyExtensionsOfParameter(m);e.is(n)&&a.forEach((function(e){let t=e.Name;n.forEach((function(e){t===e&&P++}))})),e.is(n)&&0===n.length&&(P=1),oe=!0,e.is(t)&&r.getAuthorizedValueIndex(t,null,c)>-1&&(b=c,"String"===(i=r.getOntologyType(m))&&(i="Text"))}else i="Real",b=null,oe=!1;if(e.is(s)&&(s.remove(),s=null,l.clearMessages(),l.buttons.Ok.disabled=!1),y(v[d+=i].Attribute,i),N(),s.inject(u),-1===P&&c!=o.getNLSValue("DCParameterTypeDefault")){let e=o.getNLSValue("DataCollectDialogUI.OntoExtnNotFound",{ontoparam:c});l.errorMsg(e)}if((!e.is(f)||f.length<=0)&&"ArbitraryUnit"===g){let e=o.getNLSValue("DataCollectDialogUI.ArbitraryUnitsNotDefined",{ontoparam:c});l.errorMsg(e)}},{init:function(t){var a=e.is(t)?t:{};e.is(a.editFormConfig)&&(v=a.editFormConfig)},editDataCollectRow:function(t,a){if(e.is(t)){b="",oe=!1;let a=t.get("V_DCParameterIdentifier");if(e.is(a)&&""!=a){let t=W(a);e.is(t)&&""!=t?(b=t,oe=!0,le=!1):le=!0}else le=!1}M(t,a)},createDataCollectRow:function(t,a){e.is(t)&&(I=!1,oe=!1,m=t,F(a))},closeDialog:function(){e.is(l)&&l.close()}}}})),define("DS/DELPPWWorkInstructionsModule/WorkInstructionsModule",["UWA/Core"],(function(e){"use strict";return{behaviors:["UXFactoryBehavior","WKIEditAttributeBehavior"],creator:function(t,a,n){var i;return i=function(t){var a=t.WKIModel;e.is(a)&&a.isWorkInstruction()&&n.editConfiguredAttributes(a)},{listenTo:function(){return{editWorkInstruction:i}},onStart:function(e,t){t()}}}}})),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlanModule",["UWA/Core","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanDialogUI","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanMgmtUI","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanEditUI"],(function(e,t,a,n){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","TreeListViewBehavior","WUXNodeModelBehavior","ResourceBehavior","ResourceParameterPlanBehavior","LinkBehavior","SelectionBehavior","CapableResourceLinkBehaviour","AppPreferencesBehavior"],creator:function(i,r,o,l,u,s,c,d,f,g,P){var m,V,h,v,I,p,b,R,D,C,N,y,A=new a(i,r,o,l,u,s,c,f,d),M=[],L=["CapableResourcesStructureLink","DELAsmProcessCanUseCnx","SecondaryCandidateResourceLink"];return C=function(t){(t=e.is(t,"array")?t:[t]).forEach((function(e){A.isActive()&&(c.isResourceParameterRow(e)?A.onUpdateResourceParameterRow(e):c.isResourceParameterPlan(e)&&A.onUpdateResourceParameter(e))}))},b=function(t){var a,n,i,r,l=[],u=[];if(e.is(t)){if((r=h).length>1)for(let e=r.length-1;e>=0;e--)i=o.getInstance(r[e]),l.push(i.get("isInstanceOf")),0===e&&(a=o.getReferenceModel(i.get("isAggregatedBy")),l.push(a.id));else 1===r.length&&(n=o.getInstance(r[0]),a=o.getReferenceModel(n.get("isAggregatedBy")),l.push(a.id));l.forEach((e=>{d.getImpactedObjects(e,r,{relationTypes:L}).forEach((e=>{u=M(e,u)}))})),m.createResourceParameterPlanRow(t,u,h)}},p=function(t){e.is(t)&&V.editResourceParameterRow(t,h)},I=function(e){var t,a,n,r={},l=[],u=[],c=h;if(c.length>1)for(let e=c.length-1;e>=0;e--)t=o.getInstance(c[e]),l.push(t.get("isInstanceOf")),0===e&&(n=o.getReferenceModel(t.get("isAggregatedBy")),l.push(n.id));else 1===c.length&&(a=o.getInstance(c[0]),n=o.getReferenceModel(a.get("isAggregatedBy")),l.push(n.id));l.forEach((e=>{u.push(d.getImpactedConnections(e,null,{relationTypes:L}))})),c.length>0?u.length>0?(e.rppAbsPath=c,A.initRPPUI(e),r.editFormConfig=v,r.rppAbsPath=c,V.init(r)):(i.warn(s.getNLSValue("ResourceParametertMgmtUI.InvalidLink")),i.notify("editResourceParameterPlan",{state:!1})):(i.warn(s.getNLSValue("ResourceParametertMgmtUI.InvalidStructure")),i.notify("editResourceParameterPlan",{state:!1}))},R=function(t){t=e.is(t,"array")?t:[t],u.withTransactionUpdate((function(){t.forEach((function(t){var a;a=t.toJSON(),e.is(a)&&A.isActive()&&A.addResourceParameterRow(a)})),1===t.length&&V.editResourceParameterRow(t[0],h)}))},D=function(){A.deleteResourceParameterRow()},N=function(t){var a,n;if(e.is(t)&&(e.is(t.selectedNodeIds)&&e.is(t.selectedNodeIds.length>0)&&t.selectedNodeIds.forEach((function(e){u.unSelectNode(e)})),e.is(t.changed)&&e.is(t.changed.rowId)&&(a=u.getNodeModel(t.changed.rowId),e.is(a)&&a.length>0)))for(n=0;n<a.length;n++)a[n].isRoot(!0)&&a[n].select()},y=function(t,a){let n=d.getConnection(t),i=d.getSecondaryResourceLinksInfo(n);e.is(i,"array")&&i.forEach((e=>{let t=o.getReferenceModel(e.toPID);a.push(t)}))},M=function(t,a){let n=d.getImpactedConnections(t,null,{relationTypes:L});return e.is(n,"array")&&n.forEach((n=>{let i=g.getIsPreferred(n);e.is(i)&&"TRUE"===i&&(a.push(o.getReferenceModel(t)),y(n,a))})),a},A.initAttributes(),{listenTo:function(){return{createResourceParameterRow:b,editResourceParameteRow:p,addResourceParamRef:R,deleteResourceParameterRow:D,referenceChanged:C,computeResourceParamPlan:I,chartNodeSelect:N,refreshAll:this.closeAll}},onStart:function(g,p){var b;e.is(A)||(A=new a(i,r,o,l,u,s,c,f,d)),m=new t(i,r,c,s,f),V=new n(i,r,o,u,c,s,f,P),e.is(g.editFormAttributesXML)&&(b=d.getXMLValues(g.editFormAttributesXML),v=b.convert("AttributesDescriptionList.Type","name"),c.changeDataFormatToKF(v)),e.is(g.instancePID)&&e.is(g.iRPPModel)&&(h=o.findAllInstsPaths(g.iRPPModel.get("PID")).find((e=>e.includes(g.instancePID)))),I(g),p()},onStop:function(){A=void 0,m=void 0,V=void 0},closeAll:function(){e.is(V)&&V.closeDialog(),e.is(m)&&m.close(),e.is(A)&&A.destroy()}}}}})),define("DS/DELPPWWorkInstructionsModule/DataCollectPlanModule",["UWA/Core","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectMgmtUI","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectDialogUI"],(function(e,t,a){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","TreeListViewBehavior","WUXNodeModelBehavior","ResourceBehavior","DataCollectWKIBehavior","EditAttributeBehavior","LinkBehavior","ProcessImplementBehavior"],creator:function(n,i,r,o,l,u,s,c,d,f){var g,P,m,V,h,v,I,p,b,R,D,C=new t(n,i,r,o,l,u,s,f),N=new a(n,i,r,l,s,u);return C.initDCPAttributes(),m=function(t){(t=e.is(t,"array")?t:[t]).forEach((function(e){C.isActive()&&(s.isDataCollectRow(e)?C.onUpdateDataCollectRow(e):(s.isDataCollectPlan(e)||s.isDataCollectCheckList(e))&&C.onUpdateDataCollect(e))}))},V=function(t){var a={},n=t.WKIModel;e.is(n)&&t.state&&(s.isDataCollectPlan(n)||s.isDataCollectCheckList(n)?(C.initDCPUI(t),s.changeDataFormatToKF(g),a.editFormConfig=g,N.init(a)):n.isWorkInstruction()&&c.editConfiguredAttributes(n))},h=function(t){e.is(t.selectedRowMdl)&&(!e.is(t.RIRPaths)&&e.is(t.dcpPID)&&(t.RIRPaths=r.findAllRIRPaths(t.dcpPID)),N.editDataCollectRow(t.selectedRowMdl,t.RIRPaths))},v=function(){C.deleteDataCollectRow()},I=function(){C.isActive()&&C.destroy()},p=function(e){var t;e=Array.isArray(e)?e:[e],C.isActive()&&(t=C.getDataCollectPID(),e.some((function(e){return t===e.get("PID")}))&&C.destroy())},b=function(t){var a,n;e.is(t)&&(n=r.getReferenceModel(t),P=n.get("type"),a=s.isDataCollectPlan(n)?"Real":"Boolean",N.createDataCollectRow(t,a))},R=function(t){"DELWkiDataCollectPlanReference"!==P&&!0!==C.getIsPerformanceCharacteristicRow()||(t=e.is(t,"array")?t:[t],l.withTransactionUpdate((function(){t.forEach((function(t){var a;a=t,e.is(a)&&s.isDataCollectRow(a)&&C.isActive()&&(C.addDataCollectRow(a),P=void 0)}))})))},D=function(t){var a,n;if(e.is(t)&&(e.is(t.selectedNodeIds)&&e.is(t.selectedNodeIds.length>0)&&t.selectedNodeIds.forEach((function(e){l.unSelectNode(e)})),e.is(t.changed)&&t.changed.rowId&&(a=l.getNodeModel(t.changed.rowId),e.is(a)&&a.length>0)))for(n=0;n<a.length;n++)a[n].isRoot(!0)&&a[n].select()},{listenTo:function(){return{editDataCollectPlan:V,createDataCollectRow:b,editDataCollectRow:h,deleteDataCollectRow:v,referenceChanged:m,HideAll:I,referenceRemoved:p,referenceAdded:R,chartNodeSelect:D,refreshAll:this.closeDialog}},onStart:function(t,a){var n;(t=t||{}).state&&(e.is(t.editFormAttributesXML)&&(n=d.getXMLValues(t.editFormAttributesXML),g=n.convert("AttributesDescriptionList.Type","name")),V(t),a())},onStop:function(){},closeDialog:function(){e.is(N)&&N.closeDialog(),e.is(C)&&C.destroy()}}}}})),define("DS/DELPPWWorkInstructionsModule/DataCollectChecklistModule",["UWA/Core","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectMgmtUI","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectDialogUI"],(function(e,t,a){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","TreeListViewBehavior","WUXNodeModelBehavior","ResourceBehavior","DataCollectWKIBehavior","EditAttributeBehavior","LinkBehavior","ProcessImplementBehavior","AppPreferencesBehavior"],creator:function(n,i,r,o,l,u,s,c,d,f,g){var P,m,V,h,v,I,p,b,R,D,C=new t(n,i,r,o,l,u,s,f),N=new a(n,i,r,l,s,u),y=g&&g.isUsingInputValueKF();return C.initDCPAttributes(),V=function(t){(t=e.is(t,"array")?t:[t]).forEach((function(e){C.isActive()&&(s.isDataCollectRow(e)?C.onUpdateDataCollectRow(e):(s.isDataCollectPlan(e)||s.isDataCollectCheckList(e))&&C.onUpdateDataCollect(e))}))},h=function(t){var a={},n=t.WKIModel;let i=y;e.is(n)&&t.state&&(s.isDataCollectPlan(n)||s.isDataCollectCheckList(n)?(C.initDCPUI(t),e.is(i)&&!0===i&&P.DELWkiDataCollectPlanReferenceReal&&P.DELWkiDataCollectPlanReferenceReal.Attribute.forEach((e=>{"inclusiveEditor"===e.displayType&&(e.displayType="LineEditorGroupForKF",e.type="LineEditorGroupForKF"),"UnitsSpinEditor"===e.displayType&&(e.displayType="UnitsLineEditorForKF",e.type="UnitsLineEditorForKF")})),a.editFormConfig=P,N.init(a)):n.isWorkInstruction()&&c.editConfiguredAttributes(n))},v=function(t){e.is(t.selectedRowMdl)&&(!e.is(t.RIRPaths)&&e.is(t.dcpPID)&&(t.RIRPaths=r.findAllRIRPaths(t.dcpPID)),N.editDataCollectRow(t.selectedRowMdl,t.RIRPaths))},I=function(){C.deleteDataCollectRow()},p=function(){C.isActive()&&C.destroy()},b=function(e){var t;e=Array.isArray(e)?e:[e],C.isActive()&&(t=C.getDataCollectPID(),e.some((function(e){return t===e.get("PID")}))&&C.destroy())},R=function(t){var a,n;e.is(t)&&(n=r.getReferenceModel(t),m=n.get("type"),a=s.isDataCollectPlan(n)?"Real":"Boolean",N.createDataCollectRow(t,a))},D=function(t){"DELWkiDataCollectChecklistReference"===m&&(t=e.is(t,"array")?t:[t],l.withTransactionUpdate((function(){t.forEach((function(t){var a;a=t,e.is(a)&&s.isDataCollectRow(a)&&C.isActive()&&(C.addDataCollectRow(a),m=void 0)}))})))},{listenTo:function(){return{editDataCollectChecklist:h,createDataCollectCheckListRow:R,editDataCollectCheckListRow:v,deleteDataCollectRow:I,referenceChanged:V,HideAll:p,referenceRemoved:b,referenceAdded:D,refreshAll:this.closeDialog}},onStart:function(t,a){var n;(t=t||{}).state&&(e.is(t.editFormAttributesXML)&&(n=d.getXMLValues(t.editFormAttributesXML),P=n.convert("AttributesDescriptionList.Type","name")),h(t),a())},onStop:function(){},closeDialog:function(){e.is(N)&&N.closeDialog(),e.is(C)&&C.destroy()}}}}})),define("DS/DELPPWWorkInstructionsModule/DataCollectImportModule",["UWA/Core","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectMgmtUI","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectDialogUI","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectImportRowUI"],(function(e,t,a,n){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","TreeListViewBehavior","WUXNodeModelBehavior","ResourceBehavior","DataCollectWKIBehavior","EditAttributeBehavior","LinkBehavior","ProcessImplementBehavior"],creator:function(t,a,i,r,o,l,u,s,c,d){var f=new n(t,a,i,r,o,l,u,d,c),g=function(t){e.is(t.absolutePath)&&e.is(t.dataCollectPID)&&f.init(t)};return{listenTo:function(){return{showPerformanceCharacteristics:g}},onStart:function(e,t){g(e),t()},onStop:function(){},closeDialog:function(){}}}}}));