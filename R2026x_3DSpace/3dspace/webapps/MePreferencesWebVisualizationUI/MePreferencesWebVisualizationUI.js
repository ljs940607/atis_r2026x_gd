define("DS/MePreferencesWebVisualizationUI/DefaultViewsCustomView",["css!DS/MePreferencesWebVisualizationUI/MePreferencesWebVisualizationUI.css","i18n!DS/MePreferencesWebVisualizationUI/assets/nls/MePreferencesCustomViews","DS/Controls/LineEditor","DS/Controls/Button","DS/Controls/TooltipModel","DS/Controls/Label","DS/Utilities/WebUXColorEnums"],(function(t,e,s,i,l,a,n){"use strict";const o=JSON.parse('{"front":{"sight":{"x":-1,"y":0,"z":0},"right":{"x":0,"y":1,"z":0}},"back":{"sight":{"x":1,"y":0,"z":0},"right":{"x":0,"y":-1,"z":0}},"left":{"sight":{"x":0,"y":1,"z":0},"right":{"x":1,"y":0,"z":0}},"right":{"sight":{"x":0,"y":-1,"z":0},"right":{"x":-1,"y":0,"z":0}},"top":{"sight":{"x":0,"y":0,"z":-1},"right":{"x":0,"y":1,"z":0}},"bottom":{"sight":{"x":0,"y":0,"z":1},"right":{"x":0,"y":1,"z":0}},"iso":{"sight":{"x":-0.6300367553350504,"y":-0.6300367553350503,"z":-0.45399049973954697},"right":{"x":-1,"y":1,"z":0}}}'),r=["front","back","left","right","top","bottom","iso"],h=["sight","right"],g=["x","y","z"];function m(t){if(!(t.targetId&&t.defaultJSON&&t.localWindow&&t.frameCntWindow&&t.mepOrigin))throw new Error("DefaultViewsCustomView: missing mandatory arguments");return this.elements={container:null,front:{sight:{},right:{}},back:{sight:{},right:{}},left:{sight:{},right:{}},right:{sight:{},right:{}},top:{sight:{},right:{}},bottom:{sight:{},right:{}},iso:{sight:{},right:{}}},this.options=t,this}return m.prototype.initialize=async function(){await this.__buildUX(),await this.__windowEvent()},m.prototype.setFieldWarning=function(t,e,s){let i=[];s?i.push(this.viewFields[e][s]):(i.push(this.viewFields[e][h[0]]),i.push(this.viewFields[e][h[1]]));for(let e=0;e<i.length;e++)for(let s=0;s<3;s++)t?i[e][g[s]].classList.add("invalid-value"):i[e][g[s]].classList.remove("invalid-value")},m.prototype.setLabelError=function(t,e){let s=this.viewLabels[e].children[0],i=this.viewLabels[e].children[1];t?(s.addClassName("not-visible"),i.removeClassName("not-visible")):(i.addClassName("not-visible"),s.removeClassName("not-visible"))},m.prototype.isDataValid=function(){for(let t=0;t<r.length;++t){let e=r[t];if(!this.checkVectorValidity(e))return!1}return!0},m.prototype.checkVectorValidity=function(t){let e={x:parseFloat(this.elements[t].sight.x.value),y:parseFloat(this.elements[t].sight.y.value),z:parseFloat(this.elements[t].sight.z.value)},s={x:parseFloat(this.elements[t].right.x.value),y:parseFloat(this.elements[t].right.y.value),z:parseFloat(this.elements[t].right.z.value)};if(0==e.x&&0==e.y&&0==e.z)return this.setFieldWarning(!0,t,h[0]),this.setLabelError(!0,t),!1;if(0==s.x&&0==s.y&&0==s.z)return this.setFieldWarning(!0,t,h[1]),this.setLabelError(!0,t),!1;let i=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);e.x/=i,e.y/=i,e.z/=i;let l=Math.sqrt(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=l,s.y/=l,s.z/=l;let a=e.x*s.x+e.y*s.y+e.z*s.z;return Math.abs(a)>.001?(this.setFieldWarning(!0,t),this.setLabelError(!0,t),!1):(this.setFieldWarning(!1,t),this.setLabelError(!1,t),!0)},m.prototype.__buildUX=async function(){this.elements.container=document.getElementById(this.options.targetId);const t=new UWA.Element("div",{class:"views-customization"}).inject(this.elements.container),a=new i({label:e.reset,showLabelFlag:!0,icon:{iconName:"reset",fontIconFamily:WUXManagedFontIcons.Font3DS}});a.getContent().addClassName("table-origin-label"),a.inject(t);new UWA.Element("label",{}).inject(t).innerHTML=e.sightVector;new UWA.Element("label",{}).inject(t).innerHTML=e.rightVector;const n=["X","Y","Z"];for(let s=0;s<6;++s){new UWA.Element("p",{class:"coordinate"}).inject(t).innerHTML=e[`coord${n[s%3]}`]}this.viewLabels={},this.viewFields={};for(let i=0;i<r.length;++i){let a=r[i];const n=new UWA.Element("p",{class:"view-label"}).inject(t);n.innerHTML=e.views[a],this.viewLabels[a]=n;const o=new UWA.Element("div",{class:"view-label-viewIcon"}).inject(n);new UWA.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-view-3d-"+("iso"==a?"isometric":a)}).inject(o);const m=new UWA.Element("div",{class:"view-label-alertIcon"}).inject(n);new UWA.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-attention"}).inject(m),m.tooltipInfos=new l({title:e.warningTooltipTitle,shortHelp:e.warningTooltipHelp}),m.addClassName("not-visible"),this.viewFields[a]={};for(let e=0;e<h.length;++e){let i=h[e];this.viewFields[a][i]={};for(let e=0;e<g.length;++e){let l=g[e];const n=new UWA.Element("div",{class:"lineEditor-wrapper"}).inject(t);this.viewFields[a][i][l]=n;const o=new s({value:this.options.defaultJSON[a][i][l],pattern:"^-?(0(.[0-9]+)?|1)"});o.getContent().addClassName("vector-lineEditor"),o.inject(n),this.elements[a][i][l]=o;let r=this;o.addEventListener("change",(function(){r.checkVectorValidity(a)}))}}}let m=this;a.addEventListener("buttonclick",(function(){for(let t=0;t<r.length;++t){let e=r[t];for(let t=0;t<h.length;++t){let s=h[t];for(let t=0;t<g.length;++t){let i=g[t];m.elements[e][s][i].value=o[e][s][i]}}}}))},m.prototype.__windowEvent=async function(){this.options.localWindow.addEventListener("message",(t=>{let e=t.data,s="";if(e.message&&(s=e.message),"com.ds.mep:OnOKBtnClicked_msg"===s){const t={message:"com.ds.mep:OnPrefUpdated_msg",jsonData:{}};let e=this.options.defaultJSON;this.isDataValid()&&(e={front:{sight:{x:parseFloat(this.elements.front.sight.x.value),y:parseFloat(this.elements.front.sight.y.value),z:parseFloat(this.elements.front.sight.z.value)},right:{x:parseFloat(this.elements.front.right.x.value),y:parseFloat(this.elements.front.right.y.value),z:parseFloat(this.elements.front.right.z.value)}},back:{sight:{x:parseFloat(this.elements.back.sight.x.value),y:parseFloat(this.elements.back.sight.y.value),z:parseFloat(this.elements.back.sight.z.value)},right:{x:parseFloat(this.elements.back.right.x.value),y:parseFloat(this.elements.back.right.y.value),z:parseFloat(this.elements.back.right.z.value)}},left:{sight:{x:parseFloat(this.elements.left.sight.x.value),y:parseFloat(this.elements.left.sight.y.value),z:parseFloat(this.elements.left.sight.z.value)},right:{x:parseFloat(this.elements.left.right.x.value),y:parseFloat(this.elements.left.right.y.value),z:parseFloat(this.elements.left.right.z.value)}},right:{sight:{x:parseFloat(this.elements.right.sight.x.value),y:parseFloat(this.elements.right.sight.y.value),z:parseFloat(this.elements.right.sight.z.value)},right:{x:parseFloat(this.elements.right.right.x.value),y:parseFloat(this.elements.right.right.y.value),z:parseFloat(this.elements.right.right.z.value)}},top:{sight:{x:parseFloat(this.elements.top.sight.x.value),y:parseFloat(this.elements.top.sight.y.value),z:parseFloat(this.elements.top.sight.z.value)},right:{x:parseFloat(this.elements.top.right.x.value),y:parseFloat(this.elements.top.right.y.value),z:parseFloat(this.elements.top.right.z.value)}},bottom:{sight:{x:parseFloat(this.elements.bottom.sight.x.value),y:parseFloat(this.elements.bottom.sight.y.value),z:parseFloat(this.elements.bottom.sight.z.value)},right:{x:parseFloat(this.elements.bottom.right.x.value),y:parseFloat(this.elements.bottom.right.y.value),z:parseFloat(this.elements.bottom.right.z.value)}},iso:{sight:{x:parseFloat(this.elements.iso.sight.x.value),y:parseFloat(this.elements.iso.sight.y.value),z:parseFloat(this.elements.iso.sight.z.value)},right:{x:parseFloat(this.elements.iso.right.x.value),y:parseFloat(this.elements.iso.right.y.value),z:parseFloat(this.elements.iso.right.z.value)}}}),t.jsonData=JSON.stringify(e),this.options.frameCntWindow.postMessage(t,this.options.mepOrigin)}}))},m}));