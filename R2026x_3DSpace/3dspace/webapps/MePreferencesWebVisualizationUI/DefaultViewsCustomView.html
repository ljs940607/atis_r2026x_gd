<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" />
<html>
<head>
  <!-- Application Metas -->
  <title>Default Views Table Customization</title>
  <meta name="author" content="Dassault SystÃ¨mes" />
  <meta name="brand" content="ENOVIA" />
  <meta name="autoRefresh" content="0" />
  <meta name="description" content="Default Views Table Customization" />
  <link rel="stylesheet" type="text/css" href="../Core/wux.css" />
  <link rel="stylesheet" type="text/css" href="./MePreferencesWebVisualizationUI.css" />
  <script type="text/javascript" src="../AmdLoader/AmdLoader.js"></script>
  <script type="text/javascript">
    var iframeContentWindow = null;
    var mepOrigin = null;
    var defaultJSON = null;
    var defaultViewCusto = null;
    window.addEventListener('message', e => {
      var data = e.data;
      var eventName = "";
      if (data && data.message) eventName = data.message;
      if (eventName == "com.ds.mep:CustomDialogReady_msg") {
        iframeContentWindow = e.source;
        mepOrigin = e.origin;
        defaultJSON = data.jsonData;
        let compassConfig = data.compassConfig;
        if(compassConfig.lang){
          require.config({
            locale: compassConfig.lang
          });
        }

        require(['DS/MePreferencesWebVisualizationUI/DefaultViewsCustomView'], function(DefaultViewsCustomView) {
          'use strict';
          defaultViewCusto = new DefaultViewsCustomView({
            targetId: 'mePreference-defaultViewCusto',
            defaultJSON: JSON.parse(defaultJSON),
            localWindow: window,
            frameCntWindow: iframeContentWindow,
            mepOrigin: mepOrigin
          });
          defaultViewCusto.initialize();
        });
      }
    });
  </script>
</head>
<body>
  <div id="mePreference-defaultViewCusto" class="mePreference-defaultViewCusto"></div>
</body>
</html>
