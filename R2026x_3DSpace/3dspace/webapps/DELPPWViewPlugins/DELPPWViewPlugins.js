define("DS/DELPPWViewPlugins/UXComponentsPlugin/LineEditorGroupForKF",["UWA/Core","DS/Controls/LineEditor","DS/Controls/Toggle","DS/Controls/Abstract","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWModelServices/BehaviorUtil"],(function(e,t,n,i,o,a){"use strict";var r,s,l,u,c,d,g,m,f,p,h,v,D,b="NotSet",w="Included",C={m_strFloatValueAsString:"",m_fValue:"",m_fValue_ToDisplay_eg_6dd:"",m_fValue_ToStoreInDB_eg_8dd:"",m_bIsTransformationSuccessful:!1,m_iNumberOfDecimalsToDisplay:6,m_iNumberOfDecimalsForStorageInDB:8,m_fNumberLowerRange_ToDB:1e-8,m_fNumberLowerRange_ToDisplay:1e-6,m_fNumberHigherRange:1e6,Init:function(e,t="",n="",i="",o=!1){this.m_strFloatValueAsString=e,this.m_fValue=t,this.m_fValue_ToDisplay_eg_6dd=n,this.m_fValue_ToStoreInDB_eg_8dd=i,this.m_bIsTransformationSuccessful=o},Init_UpperAndLowerLimits_MaxDigitsBeforDecimal:function(e=6,t=8,n=6){this.m_iNumberOfDecimalsToDisplay=e,this.m_iNumberOfDecimalsForStorageInDB=t,this.m_fNumberLowerRange_ToDisplay=parseFloat("1e-"+e),this.m_fNumberLowerRange_ToDB=parseFloat("1e-"+t),this.m_fNumberHigherRange=parseFloat("1e"+n)},wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation:function(e,t,n){if(Number.isNaN(t))return NaN;const i=String(t),o=e.indexOf(".");i.indexOf(".");if(-1===o)return e;return e.length-o-1>n?t.toFixed(n):e},wkiGetFloatNumber_AfterRemoveTrailingZeroes_InExponentialNotation:function(e,t,n){let i=t.toExponential(n).split("e");parseFloat(i[0]).toString();return this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2("",parseFloat(i[0]),n)+"e"+i[1]},wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v1:function(e,t,n){return parseFloat(t.toFixed(n)).toString()},wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2:function(e,t,n){return t.toFixed(n).replace(/(\.\d*?)0+$/,"$1").replace(/\.$/,"")},wkiTansformInputFloatValueInto6DDand8DDNotation:function(){const e=this.m_strFloatValueAsString;let t="",n="";const i=e.toLowerCase().includes("e");let o=parseFloat(e);isNaN(o)||o===1/0||o===-1/0?this.m_bIsTransformationSuccessful=!1:(o>=this.m_fNumberLowerRange_ToDB&&o<this.m_fNumberHigherRange?o>=this.m_fNumberLowerRange_ToDB&&o<this.m_fNumberLowerRange_ToDisplay?(t=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InExponentialNotation(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsForStorageInDB)):i?(t=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsForStorageInDB)):(t=this.wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation(e,o,this.m_iNumberOfDecimalsForStorageInDB)):o?(t=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InExponentialNotation(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InExponentialNotation(e,o,this.m_iNumberOfDecimalsForStorageInDB)):"0"===String(o)&&(i?(t=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsForStorageInDB)):(t=this.wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation(e,o,this.m_iNumberOfDecimalsForStorageInDB))),this.m_fValue_ToDisplay_eg_6dd=t,this.m_fValue_ToStoreInDB_eg_8dd=n,this.m_bIsTransformationSuccessful=!0)},wkiGetValueToDisplayAndDataBase_V0:function(e){return this.Init(e),this.Init_UpperAndLowerLimits_MaxDigitsBeforDecimal(l,c,s),this.wkiTansformInputFloatValueInto6DDand8DDNotation(),{valToDisplay:this.m_fValue_ToDisplay_eg_6dd,valueToDatabase:this.m_fValue_ToStoreInDB_eg_8dd,bTransformationStatus:this.m_bIsTransformationSuccessful}},wkiGetValueToDisplayAndDataBase:function(e){return this.Init(e),{valToDisplay:e,valueToDatabase:e,bTransformationStatus:!0}},wkiGetOnlyNumericalValueStripSignAndUnit:function(e){let t=String(e);if(e&&t&&t.length){let e=t.match(/^([+-])?(\.*\d+(\.\d+)?([eE][-+]?\d+)?)(\s*\w*.*)?$/);if(e)return{NumericalVal:e[2],SignNotation:e[1]||""}}return{NumericalVal:"",SignNotation:""}},wkiGetSignNotation:function(e){let t=String(e).match(/^([+-])?(.*\d+(\.\d+)?([eE][-+]?\d+)?)(\s*\w*)?$/);return t&&t[1]||""}};D=function(){s=6,l=JSON.parse(o.getMaxDecimalLengthForKF())||6,c=8,u=15};const y=function(){return new Intl.NumberFormat(widget.lang).formatToParts(1000.2).find((e=>"decimal"===e.type)).value}();return d=function(e){let t;return t=e&&e.includes(y)?e.replace(y,"."):e,t||""},function(t){if(e.is(t)&&t.length){let e=String(t).match(/^[+-]?[\d.]+([eE][-+]?\d*)?/);return e?e[0]:null}return null},g=function(e){let t=e.match(/^([\d.]+)[eE]([-+]?\d+)$/);if(!t)return"";let[n,i,o]=t,a=parseInt(o,10);if(0===a)return i;let r=parseFloat(i)*Math.pow(10,a);return String(r)},f=function(e){return e.replace(/^([+-]?)0+(\d+)/,"$1$2")},v=function(e){let t=e.match(/^([\d.]+)[eE]([-+]?\d+)$/);if(!t)return e;let[n,i,o]=t,a=parseInt(o,10),r=parseFloat(i),s=(r*Math.pow(10,a)).toString(),[l,u=""]=i.split("."),[c,d=""]=s.split(".");if(u.length>0){let e=l.length+u.length;s=(r*Math.pow(10,a)).toFixed(Math.max(0,e-c.length))}return s},m=function(e){D();let t=Number(e);if(isNaN(t))return e;let[n,i]=v(e).split("."),o=Number(n);if(Math.abs(o)<Number(`1e${s}`)){let e=o.toString();return i&&(e+="."+i),e}let a=t.toString().includes(".")?Math.abs(t).toString().length-2:Math.abs(t).toString().length-1;return t.toExponential(a)},function(t){let n=m(t);if(e.is(n)&&n.includes("e"))return n;let i=parseFloat(n);if(isNaN(i))return null;let[o,a=""]=n.split(".");if(Math.abs(parseInt(o,10))>=Number(`1e${s}`)){let[e,t]=i.toExponential().split("e"),n=a.length>l?l:a.length;return e=parseFloat(e).toFixed(n),`${e}e${t}`}let r=g(t);return r||n},p=function(t){let n,i=!1,o=!1,a=t.match(/^[+-]?\d/);return null===a&&(n=t.match(/^[+-]?(\d+|\.\d+)/),e.is(n)?(a=/^[+-]/.test(t)?t.charAt(0)+"0"+t.slice(1):"0"+t,o=!0):a=""),a&&(i=!0),{isStartingWithNonDigitChar:i,filteredValue:a?o?a:t:""}},h=function(e){return e?e.replace(/[.,]/,y):e},function(e,t=l){let n;const i=e.match(/^([+-]?\d+(\.\d+)?([eE][-+]?\d+)?)(\s*\w*)?$/);if(!i)return e;let[o,a,r,s,u]=i,c=Number(a);return s?n=c.toExponential(t):(r=r?r.slice(0,t+1):"",n=`${a.split(".")[0]}${r}`),u?`${n}${u}`:n},function(e){const t=e.match(/^([+-]?\d+(?:\.\d+)?(?:[eE][-+]?\d+)?)(\s*\w*)?$/);if(!t)return e;let n,[i,o,a]=t,r=Number(o);n=o.match(/[eE]/)&&r<Number(`1e${u}`)?r.toString():o;let s=o.includes(".")?u+1:u;if(n.replace(".","").length>s){let e=s-n.split(".")[0].length-(n.includes(".")?1:0);n=r.toFixed(Math.max(0,e))}return a?`${n}${a}`:n},i.inherit({name:"LineEditorGroupForKF",init:function(e){r=e||{},this._parent(r)},buildView:function(){var i=this;l=a.getMaxDecimalLengthToDisplayForKF(),c=a.getMaxDecimalLengthToDatabaseForKF(),s=a.getMaxIntegerLengthForKF();let u=C.wkiGetOnlyNumericalValueStripSignAndUnit(r.value.value),g=u.NumericalVal,m=u.SignNotation,v=C.wkiGetValueToDisplayAndDataBase(g);var D=v.valToDisplay?m+h(v.valToDisplay)+" "+r.unit:"",y=v.valToDisplay?m+h(v.valToDisplay)+" "+r.unit:"",I=v.valueToDatabase?m+v.valueToDatabase:"",S=D||"",_=r.value.inclusive,P=!e.is(_)||_===b,T=e.is(r.disabled)&&r.disabled?r.disabled:P,N=!e.is(r.disabled)||r.disabled,x=!("PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPRscMinValue"===r.name||"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPRscMaxValue"===r.name);this.elements.container.addClassName("line-editor-groupKF"),this._inclusiveInputGroup=new e.Element("div",{class:"line-editor"}),this._inclusiveCheckbox=new n({type:"checkbox",label:"",checkFlag:!P,visibleFlag:x,disabled:N}),this._inclusiveCheckbox.elements.container.addClassName("check-enabled"),this._inclusiveInput=e.extend(new t({value:!P&&e.is(S)?h(S):void 0,disabled:T,selectAllOnFocus:!0}),{updatedUnit:r.unit,valueToDisplay:y,valueToDatabase:I}),this._inclusiveInput.elements.container.addClassName("line-input"),this._includeCheckBox=new n({type:"checkbox",label:o.getNLSValue("InclusiceLineEditor.Included"),checkFlag:_===w||_===b||""===r.value,disabled:T}),this._includeCheckBox.elements.container.addClassName("check-included"),this._inclusiveCheckbox.inject(this._inclusiveInputGroup),this._inclusiveInput.inject(this._inclusiveInputGroup);this._inclusiveInput.value;this._inclusiveInput.addEventListener("focus",(function(e){if(e.dsModel.value){let t=e.dsModel.valueToDatabase;i._inclusiveInput.value=h(t)+" "+i._inclusiveInput.updatedUnit}})),this._inclusiveInput.addEventListener("blur",(function(t){if(t.dsModel.value){let e=t.dsModel.value,n=d(e),o=p(n);if(o.isStartingWithNonDigitChar){let e=f(o.filteredValue),t=C.wkiGetOnlyNumericalValueStripSignAndUnit(e),n=t.NumericalVal,a=t.SignNotation,r=C.wkiGetValueToDisplayAndDataBase(n);i._inclusiveInput.value=a+h(r.valToDisplay)+" "+i._inclusiveInput.updatedUnit,i._inclusiveInput.valueToDisplay=a+h(r.valToDisplay)+" "+i._inclusiveInput.updatedUnit,i._inclusiveInput.valueToDatabase=a+r.valueToDatabase}else i._inclusiveInput.value="",i._inclusiveInput.valueToDisplay="",i._inclusiveInput.valueToDatabase=""}else e.is(t.dsModel.value)&&(i._inclusiveInput.value="",i._inclusiveInput.valueToDisplay="",i._inclusiveInput.valueToDatabase="")})),this._includeCheckBox.inject(this._inclusiveInputGroup),this._inclusiveInputGroup.inject(this.elements.container),this._inclusiveCheckbox.addEventListener("change",(function(e){e.dsModel.checkFlag?(i._includeCheckBox.disabled=!1,i._inclusiveInput.disabled=!1):(i._inclusiveInput.value=void 0,i._inclusiveInput.valueToDisplay="",i._inclusiveInput.valueToDatabase="",i._includeCheckBox.disabled=!0,i._inclusiveInput.disabled=!0)})),this._inclusiveInput.addEventListener("input",(function(e){0==e.target.value.length&&i._includeCheckBox.checkFlag&&(i._includeCheckBox.checkFlag=!1)}))},setUnit:function(e){this._inclusiveInput.updatedUnit=e},setValue:function(e){if(this._inclusiveCheckbox.checkFlag){let t=d(e);t=String(parseFloat(t));let n=C.wkiGetOnlyNumericalValueStripSignAndUnit(t),i=n.NumericalVal,o=n.SignNotation,a=C.wkiGetValueToDisplayAndDataBase(i);this._inclusiveInput.value=o+h(a.valToDisplay)+" "+this._inclusiveInput.updatedUnit,this._inclusiveInput.valueToDisplay=o+h(a.valToDisplay)+" "+this._inclusiveInput.updatedUnit,this._inclusiveInput.valueToDatabase=o+a.valueToDatabase}},isSet:function(){return this._inclusiveCheckbox.checkFlag},getValue:function(){let t=this._inclusiveInput.value;t&&(t=this._inclusiveInput.valueToDatabase);const n=this._includeCheckBox.checkFlag,i=this._inclusiveCheckbox.checkFlag,o=e.is(t)&&null!==t&&""!==t;return{value:o?t:"",inclusive:i&&o?n?w:"Excluded":b}},getInputValue:function(){if(e.is(this._inclusiveInput.valueToDatabase)&&this._inclusiveInput.valueToDatabase.length){let e=C.wkiGetOnlyNumericalValueStripSignAndUnit(this._inclusiveInput.valueToDatabase),t=e.NumericalVal;return e.SignNotation+t}}})})),define("DS/DELPPWViewPlugins/RelationsPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWDicoServices/DicoUtils"],(function(e,t,n){"use strict";return function(i){var o,a,r=i.getLogger(),s=i.getConfig().resource.relationsColumnMappingXML,l={},u=new Set,c=!1,d=null,g={};return a=function(n){t.getXMLValues(s,(function(t){var i,o,a,r;if(t.RelationsColumnMapping.RelationsColumns&&t.RelationsColumnMapping.RelationsColumns.RelationsColumn&&(i=t.RelationsColumnMapping.RelationsColumns.RelationsColumn,Array.isArray(i)||(i=[i]),l={},i.forEach((function(t){for(l[t.name]={},(o=e.is(t.Relation)?Array.isArray(t.Relation)?t.Relation:[t.Relation]:[]).some((function(e){return"From"===e.direction}))&&u.add(t.name),a=e.is(t.LinkedObjectConstraint)?Array.isArray(t.LinkedObjectConstraint)?t.LinkedObjectConstraint:[t.LinkedObjectConstraint]:[],r=0;r<o.length;r++)l[t.name][o[r].name]=o[r],r<a.length&&(d=t.name,e.is(a[r].Attribute)?l[t.name][a[r].dicoType]=Array.isArray(a[r].Attribute)?a[r].Attribute:[a[r].Attribute]:l[t.name][a[r].dicoType]=[],c=!0)}))),t.RelationsColumnMapping.RelationsDisplayAttributes){let n,i;n=t.convert("RelationsColumnMapping.RelationsDisplayAttributes.Type","name"),i=t.convert("RelationsColumnMapping.RelationsDisplayAttributes.Relation","linkName"),g=e.merge(n,i)}n()}))},o=function(e){Promise.all([new Promise(a)]).then((function(){r.debug("RelationsPlugin initialized!"),e()}),(function(t){r.debug("Failed to load Relations Plugin. Error Description:"+t),e()}))},{name:"RelationsPlugin",onStart:function(e){o(e)},onStop:function(){l=void 0,g=void 0,u.clear()},getRelationsConfiguredOnColumn:function(t){var n=null;return e.is(t)&&e.is(l)&&(n=l[t]),n},getInverseRelationNameSet:function(){return u},isObjectConstraint:function(){return c},getConstraintRelationName:function(){return d},getRelationsColumnDisplayAttribute:function(t,n){return e.is(t)&&e.is(g)?e.is(n)&&"display_icon"===n?g[t][n]:g[t]:null},getRelationsColumnDisplayOptions:function(t){var n={};return e.is(t)&&e.is(g)&&(n=e.is(g[t])?g[t]:{},e.is(n)&&e.is(n.Attribute)?n.Attribute=Array.isArray(n.Attribute)?n.Attribute:[n.Attribute]:n.Attribute=[]),n},getAllRelationDisplayAttributes:function(){var t,i,o,a={bo:[],relation:[]};return e.is(g)&&Object.keys(g).forEach((function(r){i=n.isEntityInstance(r)?a.relation:a.bo,o=g[r],(Array.isArray(o.Attribute)?o.Attribute:[o.Attribute]).forEach((function(n){t=e.is(n.dicoType)?n.dicoType+"."+n.name:n.name,-1===i.indexOf(t)&&i.push(t)}))})),a}}}})),define("DS/DELPPWViewPlugins/ProxyPlugin",["UWA/Core","DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOFilterBIUX/FilterBIComponentProxy"],(function(e,t,n){"use strict";return function(i){var o,a,r=i.getLogger();return a=function(e,i){var a;switch(e){case o.FilterProxy:a=new n(i);break;case o.TaggerProxy:i.hasOwnProperty("filteringMode")||(i.filteringMode=t.filteringMode.FilteringOnServer),a=t.createProxy(i);break;default:r.debug("Invalid proxy. Proxy creation failed")}return a},{name:"ProxyPlugin",PROXY:o={FilterProxy:"FilterProxy",TaggerProxy:"TaggerProxy"},create:function(t,n){var o,s,l=i.getPlugins("WebServicePlugin"),u=n||{},c=null;return e.is(l)?(l=l.instance,o={appId:(s=i.getConfig().appContext).widget.data.appId,widgetId:s.widget.getId(),tenant:l.getTenant(),colorize:!0},e.merge(u,o),c=a(t,u)):r.debug("WebServicePlugin not available"),c},onStart:function(){},onStop:function(){}}}})),define("DS/DELPPWViewPlugins/RootsPlugin",["UWA/Core","UWA/Json"],(function(e,t){"use strict";return function(n){var i,o,a,r,s,l,u,c,d,g,m,f="storedRoots",p="Default",h=n.getConfig().resource.rootsMappingPath,v=["or","and","and_not"],D=new Map;return r=function(){var t=widget.getValue(f);return e.Json.isJson(t)?e.Json.decode(t):t},o=function(t,n){var i=r();e.owns(i,p)?e.owns(i[p],t)?-1===i[p][t].indexOf(n)&&i[p][t].push(n):i[p][t]=[n]:((i={})[p]={},i[p][t]=[n]),widget.setValue(f,e.Json.encode(i))},a=function(t,n){var i=-1,o=r();e.owns(o,p)&&e.owns(o[p],t)&&-1<(i=o[p][t].indexOf(n))&&(o[p][t].splice(i,1),widget.setValue(f,e.Json.encode(o)),c(n))},s=function(t){var n,i=[],o=e.is(t)&&""!==t?t:p,a=r();if(e.owns(a,o))for(n in a[o])e.owns(a[o],n)&&(i=i.concat(a[o][n]));return i},l=function(t,n){var o,a,s=[],l=e.is(n)&&""!==n?n:p;return e.is(i)&&e.is(t)&&(a=i[t],e.is(a,"array")&&(o=r(),e.is(o[l])&&(s=a.map((function(e){return o[l][e]||[]}))))),s},u=function(e,t){D.set(e,t)},c=function(e){D.delete(e)},d=function(e){return D.get(e)},g=function(t){var n,i=!1;const o=d(t);var a;return e.is(o)?(n=[],function t(i){(Array.isArray(i)?i:[i]).forEach((function(i){var o;if(Array.isArray(i))t(i);else if(e.is(i,"object"))for(o in i)Object.hasOwnProperty.call(i,o)&&v.includes(o)&&n.push(i)}))}(o.originalFilterQuery),a=n,Array.isArray(a)&&1===a.length&&(n=n[0],i=!0)):i=!0,{isCompatibleFilter:i,allFilters:n}},m=function(t){var n;let i="",o=!1;const a=d(t);var r;return e.is(a)?(n=[],function t(i){(Array.isArray(i)?i:[i]).forEach((function(i){var o;if(Array.isArray(i))t(i);else if(e.is(i,"object"))for(o in i)Object.hasOwnProperty.call(i,o)&&("config_filter"===o?n.push(i.config_filter):t(i[o]))}))}(a.originalFilterQuery),r=n,Array.isArray(r)&&1===r.length&&(i=n[0],o=!0)):o=!0,{isCompatibleFilter:o,configurationFilter:i}},{name:"RootsPlugin",onStart:function(o){require(["text!"+h],(function(a){e.is(a)?i=e.is(a,"string")?t.decode(a):a:n.getLogger().debug("roots mapping is not defined."),o()})),widget.addPreference({name:f,type:"hidden",defaultValue:{}})},onStop:function(){D.clear()},addRoot:function(t,n){e.is(t)&&o(t,n)},removeRoot:function(t,n){e.is(t)&&e.is(n)&&a(t,n)},addRootFilter:function(e,t){u(e,t)},getRootFilter:function(e){return d(e)},removeRootFilter:function(e){c(e)},getCompatibleConfigurationFilters:function(e){const t=e.map((e=>({...m(e),rootId:e})));let n=null;return(e=>e.some((e=>!e.isCompatibleFilter)))(t)||(n=t.reduce(((e,t)=>(e[t.rootId]=t.configurationFilter,e)),{})),n},getAllCompatibleFilters:function(t){const n=t.map((e=>({...g(e),rootId:e})));let i=null;return(e=>e.some((e=>!e.isCompatibleFilter)))(n)||(i=n.reduce(((t,n)=>(t[n.rootId]=e.is(n.allFilters)?e.Json.encode(n.allFilters):"",t)),{})),i},getRoots:function(t){return e.is(t)?l(t):s()},getStoreRoots:function(t,n){var i=[];return e.is(t)&&(i=e.is(n)?l(n,t):s(t)),i},isRoot:function(t){var n=!1;return e.is(t)&&(n=s().indexOf(t)>-1),n},createStore:function(t){var n=r();e.owns(n,p)&&(n[t]=n[p]),widget.setValue(f,e.Json.encode(n))},removeStore:function(t){var n;e.is(t)&&t!==p&&(n=r(),e.owns(n,t)&&(delete n[t],widget.setValue(f,e.Json.encode(n))))},getStoresList:function(){var e=r(),t=[];return Object.keys(e).forEach((function(e){e!==p&&t.push(e)})),t},removeRoots:function(t){var n=r();Object.keys(n).forEach((function(i){i===p&&e.owns(n[i],t)&&(n[i][t]=[])})),widget.setValue(f,e.Json.encode(n))}}}})),define("DS/DELPPWViewPlugins/MoreAttributesWizard",["UWA/Core","DS/DocumentManagement/DocumentManagement","DS/ZipJS2/ZipJS2","DS/Controls/FilePicker","DS/Controls/ModalContainer","DS/DELPPWModelServices/ModelUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWWebServices/WebserviceUtils"],(function(e,t,n,i,o,a,r,s){"use strict";return function(l){var u=function(t,n,i,o,a,r,s,l,u){var c,d,g,m,f,p=JSON.parse(JSON.stringify(n));return!u&&e.is(p.Config)&&(p=p.Config.Columns.Column),e.is(p,"array")?(s&&t.forEach((function(e){e.options.grid.attrIsInXML||p.push({attribute:e.options.grid.attrInfoArray,dataIndex:e.options.grid.dataIndex,dicoType:e.options.grid.attrNature,display:"true",minWidth:"50"})})),c=(c=(c='<?xml version="1.0" encoding="UTF-8"?>\n')+'<Config name="'+i+'" version="2.0" xmlns="DS_DELPPWConfiguration" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="DS_DELPPWConfiguration ../xsd/ColumnConfig.xsd" Title="'+o+'" Description="'+a+'">\n')+'<Label dataIndex="'+r.dataIndex+'" entity="'+r.entity+'" dicoType="'+r.dicoType+'"/>\n',c+="<Columns>\n",p.forEach((function(t){u?(m=t.attribute,f=t.attribute.dicoType):(m=e.is(t.Attribute)?t.Attribute:t,f=t.dicoType),g=e.is(t.display)?t.display:e.is(t.colVisibility)?t.colVisibility.display:"true",d=e.is(t.minWidth)?t.minWidth:"100",Array.isArray(m)?-1===l.indexOf(m[0].name)&&(c=c+'<Column display="'+g+'" minWidth="'+d+'">\n',m.forEach((function(e){var t;t=u?e.dataIndex:e.name,c=c+'<Attribute name="'+t+'"  entity="'+e.entity+'"  dicoType="'+e.dicoType+'"/>\n'})),c+="</Column>\n"):e.is(m.dataIndex)&&-1===l.indexOf(m.dataIndex)&&(c=c+'<Column dataIndex="'+m.dataIndex+'"  ',e.is(m.entity)&&(c=c+'entity="'+m.entity+'" '),e.is(t.displayType)&&(c=c+'displayType="'+t.displayType+'" '),e.is(t.Tooltip)&&(c=c+'Tooltip="'+t.Tooltip+'" '),c=c+'display="'+g+'" minWidth="'+d+'" ',e.is(f)?c=c+'dicoType="'+f+'"/>\n':c+="/>\n")})),c+="</Columns>\n",c+="</Config>\n\n"):c=p,c},c=function(c,d,g,m,f,p,h){var v,D,b,w,C={dataIndex:"V_Name",entity:"reference",dicoType:"PLMEntity"};const y=l.getService("ConfigService");n.configure({maxWorkers:3}),w=new n.ZipWriter(new n.BlobWriter("application/zip"),{bufferedWrite:!0}),b=y.getConfigurationPID(),h&&g.forEach((function(e){e.xml=u(null,e.xml,e.name,"UI Config","Sample configuration file delivered by DS.",C,!1,[],h)})),v=u(m,d,c.name,"UI Config","Sample configuration file delivered by DS.",C,!0,p,h),D=new File([new Blob([v],{type:"text/xml"})],c.filename,{type:"text/xml"}),w.add(D.name,new n.BlobReader(D),{password:null,onstart:function(){},onprogress:function(){}}).then((function(){!function(u,c,d,g){var m,f,p,h,v,D,b,w,C,y,I=l.getPlugins("UXComponentsPlugin"),S=I.instance.getComponent("Element"),_=I.instance.getComponent("Editor"),P=I.instance.getComponent("Dialog"),T=I.instance.getComponent("Button");D=function(){var t,n,o,a,s,l,u;return t=new S("div",{class:"dialogContent",styles:{width:"100%",height:"100%"}}),n=new S("div",{class:"divTitleContent",styles:{display:"flex",width:"100%",height:"50%"}}),new e.Element("h6",{class:"wux-textElement",text:r.getNLSValue("ViewPreferencesUI.UserPreferenceDocTitle"),styles:{width:"50%"}}).inject(n),h=new _({value:"",selectAllOnFocus:!0,visibleFlag:!0,autoCommitFlag:!0,placeholder:r.getNLSValue("FormUI.Placeholder.EnterAText"),styles:{width:"75%"}}).inject(n),n.inject(t),o=new S("div",{class:"divMultiLangContent",styles:{display:"flex",width:"100%",height:"50%"}}),new S("h6",{class:"wux-textElement",text:r.getNLSValue("ViewPreferencesUI.UserPreferenceMultiLangTitle"),styles:{width:"75%"}}).inject(o),(a=new i({attributes:{id:"ImportJsonFile",title:"Import JSON file for Multilingual parameter name support",accept:".json"},placeholder:"Select a file",className:"CustomParameterDialog json-file-input"}).inject(o)).addEventListener("change",(function(){s=a.value,(l=new FileReader).readAsText(s),l.onload=function(){u=l.result,b=JSON.parse(u)}})),o.inject(t),t},v=function(e){var t=[];return d.forEach((function(i){var o;o=new File([new Blob([i.xml],{type:"text/xml"})],i.filename,{type:"application/json"}),t.push(e.add(o.name,new n.BlobReader(o),{password:null,onstart:function(){},onprogress:function(){}}))})),t},C=function(i,o){var r,u,c=s.get3DSpaceUrl().slice(0,-1),d=s.getSecurityContext(),g=a.getWidgetTrigram()+"ParametersViewColumnConfig";l.getLogger().debug("ViewPreferencesUI.js : OnCreateDocument SecurityContext : "+d+" has been send to ENOVIA with DocumentManagement.createDocument"),t.createDocument({},{tenantUrl:c,additionalHeaders:{SecurityContext:d},csrf:{name:"ENO_CSRF_TOKEN",value:s.getCSRFToken("3DSpace")},onComplete:function(a){u=e.is(o)&&""!==o?new File([new Blob(['{"title":"'+o+'"}'],{type:"application/json"})],"meta_"+widget.lang+".json",{type:"application/json"}):new File([new Blob(['{"title":"'+a.data[0].id+'"}'],{type:"application/json"})],"meta_"+widget.lang+".json",{type:"application/json"}),i.add(u.name,new n.BlobReader(u),{password:null,onstart:function(){},onprogress:function(){}}).then((function(){var n=v(i);Promise.all(n).then((function(){i.close().then((function(n){r=new File([n],"xmlparams.zip",{type:"application/zip"}),t.addFileToDocument({id:a.data[0].id,fileInfo:{file:r}},{tenantUrl:c,additionalHeaders:{SecurityContext:d},csrf:{name:"ENO_CSRF_TOKEN",value:s.getCSRFToken("3DSpace")},onComplete:function(){l.getLogger().debug("ViewPreferencesUI.js : modifyDocument mySecurityContext : "+d),t.modifyDocument({id:a.data[0].id,title:g+"/"+a.data[0].id},{tenantUrl:c,additionalHeaders:{SecurityContext:d},csrf:{name:"ENO_CSRF_TOKEN",value:s.getCSRFToken("3DSpace")},onComplete:function(){e.is(o)&&""!==o?widget.setValue("custoParametersSet",o):widget.setValue("custoParametersSet",a.data[0].id),widget.setValue("isRestoreAutomaticOn",!0),location.reload()}})},onFailure:function(){l.getLogger().warn(self.name,"Document creation failed")}})}))}))}))},onFailure:function(){l.getLogger().warn(self.name,"Document creation failed")}})},y=function(i,o,a){var r,u,c,d,g=s.get3DSpaceUrl().slice(0,-1),m=s.getSecurityContext();u=e.is(a)&&""!==a?new File([new Blob(['{"title":"'+a+'"}'],{type:"application/json"})],"meta_"+widget.lang+".json",{type:"application/json"}):new File([new Blob(['{"title":"'+o+'"}'],{type:"application/json"})],"meta_"+widget.lang+".json",{type:"application/json"}),i.add(u.name,new n.BlobReader(u),{password:null,onstart:function(){},onprogress:function(){}}).then((function(){c={tenantUrl:g,additionalHeaders:{SecurityContext:m},csrf:{name:"ENO_CSRF_TOKEN",value:s.getCSRFToken("3DSpace")},onComplete:function(){e.is(a)&&""!==a?widget.setValue("custoParametersSet",a):widget.setValue("custoParametersSet",o),widget.setValue("isRestoreAutomaticOn",!0),location.reload()}},t.getDocuments([o],{tenantUrl:g,additionalHeaders:{SecurityContext:m},onComplete:function(e){var n=e.data[0].relateddata.files[0].id,a=v(i);Promise.all(a).then((function(){return i.close().then((function(e){r=new File([e],"xmlparams.zip",{type:"application/zip"}),d={id:o,fileInfo:{file:r}},t.deleteFile(o,n,{tenantUrl:g,additionalHeaders:{SecurityContext:m},csrf:{name:"ENO_CSRF_TOKEN",value:s.getCSRFToken("3DSpace")},onComplete:function(){t.addFileToDocument(d,c)}})}))})).catch((function(e){l.getLogger().warn(e,"Document deletion failed")}))}})}))},e.is(p)||(f=D(),(p=new P({domId:"newDialog",immersiveFrame:g.getImmersiveFrame(),modalFlag:!0,visibleFlag:!0,resizableFlag:!1,title:r.getNLSValue("ViewPreferencesUI.UserPreferencesTitle"),content:f,width:295,height:175,buttons:{Ok:new T({domId:"newDialog-Ok",className:"newDialogOk",label:"Ok",onClick:function(){var t,i=[];if(p.destroy(),p=null,f=null,o.createModal(widget.body),m=h.value,e.is(b))for(t in b)Object.hasOwnProperty.call(b,t)&&(w=new File([new Blob(['{"title":"'+b[t]+'"}'],{type:"application/json"})],"meta_"+t+".json",{type:"application/json"}),i.push(u.add(w.name,new n.BlobReader(w),{password:null,onstart:function(){},onprogress:function(){}})));e.is(c)&&""!==c?y(u,c,m):C(u,m)}}),Cancel:new T({domId:"newDialog-Cancel",className:"newDialogcancel",label:"Cancel",onClick:function(){p.close()}})}})).close=function(){p.destroy(),p=null,f=null})}(w,b,g,f)}))};return{name:"MoreAttributesWizard",processAttributesWizard:function(e,t,n,i,o,a,r){c(e,t,n,i,o,a,r)}}}})),define("DS/DELPPWViewPlugins/UXComponentsPlugin/InclusiveLineEditor",["UWA/Core","DS/Controls/SpinBox","DS/Controls/Toggle","DS/Controls/Abstract","DS/DELPPWResourceServices/ResourceUtils"],(function(e,t,n,i,o){"use strict";var a,r="NotSet",s="Included";return i.inherit({name:"InclusiveLineEditor",init:function(e){a=e||{},this._parent(a)},buildView:function(){var i=this,l=a.value.value,u=a.value.inclusive,c=!e.is(u)||u===r,d=e.is(a.disabled)&&a.disabled?a.disabled:c,g=!!e.is(a.disabled)&&(!!a.disabled&&a.disabled);i._unit="",this.elements.container.addClassName("inclusive-editor-group"),this._myInputGroup=new e.Element("div",{class:"inclusive-editor"}),this._inclusiveCheckbox=new n({type:"checkbox",label:"",checkFlag:!c,visibleFlag:!g}),this._inclusiveCheckbox.elements.container.addClassName("check-enabled"),this._inclusiveInput=new t({value:!c&&e.is(l)?Number(l):void 0,stepValue:a.step,units:a.unit,pageStepValue:1,displayStyle:"lite",disabled:d,decimals:a.decimals,typingFilter:a.typingFilter}),this._inclusiveInput.elements.container.addClassName("inclusive-input"),this._includeCheckBox=new n({type:"checkbox",label:o.getNLSValue("InclusiceLineEditor.Included"),checkFlag:u===s||u===r||""===a.value,disabled:d}),this._includeCheckBox.elements.container.addClassName("check-included"),this._inclusiveCheckbox.inject(this._myInputGroup),this._inclusiveInput.inject(this._myInputGroup),this._includeCheckBox.inject(this._myInputGroup),this._myInputGroup.inject(this.elements.container),this._inclusiveCheckbox.addEventListener("change",(function(e){e.dsModel.checkFlag?(i._includeCheckBox.disabled=!1,i._inclusiveInput.disabled=!1):(i._inclusiveInput.value=void 0,i._includeCheckBox.disabled=!0,i._inclusiveInput.disabled=!0)})),this._inclusiveInput.addEventListener("input",(function(e){0==e.target.value.length&&i._includeCheckBox.checkFlag&&(i._includeCheckBox.checkFlag=!1)}))},setUnit:function(e){this._inclusiveInput.setProperties({units:e})},setValue:function(e){this._inclusiveCheckbox.checkFlag&&this._inclusiveInput.setProperties({value:Number(e)})},isSet:function(){return this._inclusiveCheckbox.checkFlag},getValue:function(){var t=this._inclusiveInput.value,n=this._includeCheckBox.checkFlag,i=this._inclusiveCheckbox.checkFlag,o=e.is(t)&&null!==t&&""!==t;return{value:o?t:"",inclusive:i&&o?n?s:"Excluded":r}},getInputValue:function(){return this._inclusiveInput.value}})})),define("DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsEditor",["UWA/Core","DS/Controls/LineEditor","css!DS/DELPPWViewPlugins/assets/css/UnitsEditor.css"],(function(e,t){"use strict";return t.inherit({name:"UnitsEditor",buildView:function(){this.elements.container.addClassName("wux-controls-lineeditor custom-controls-unitseditor"),this._myInputGroup=new e.Element("div",{class:"input-group  unitseditor-input-group"}),this._myUnit=new e.Element("span",{class:"input-group-addon unitseditor-group-addon"}),this._myInput=new e.Element("input",{type:"text",tabindex:0,autocomplete:"off"}),this._myInput.inject(this._myInputGroup),this._myUnit.inject(this._myInputGroup),this._myInputGroup.inject(this.elements.container),this._myInput.addClassName("wux-ui-state-"+this.options.type),this._validFlag=!0,this.displayClearFieldButtonFlag&&this._layoutClearFieldButton()},setUnit:function(e){this._myUnit.setContent(e)},getUnit:function(){return this._myUnit.getText()},setInputName:function(e){this._myInput.name=e}})})),define("DS/DELPPWViewPlugins/TreeViewPlugin/CfgColumnsPlugin",["UWA/Core","UWA/Promise","text!DS/DELPPWViewPlugins/assets/json/CfgColumnsPlugin/AdditionalAMDs.json"],(function(e,t,n){"use strict";const i=function(t,n){let i={...t};return e.extend(i,n,!0),i},o=function(e,t){return e.concat(t)};return function(a){const r=JSON.parse(n);let s=new Map,l=new Map,u=null;const c=function(t,n){const i=n||null;let o=new Map;return(...n)=>{const a=e.is(i,"function")?i(...n):n[0];let r;return o.has(a)?r=o.get(a):(r=t(...n),o.set(a,r)),r}}((t=>{let n=new Map;return Object.values(t).forEach((t=>{const i=t.amdModuleId;if(e.owns(t,"commandIds")){const e=t.commandIds;if(Array.isArray(e))for(const t of e)n.has(t)?n.set(t,n.get(t).concat(i)):n.set(t,[].concat(i))}})),n})),d=function(){return Array.from(s.values())},g=function(e){let t=[];for(const n of e)s.has(n)&&t.push(s.get(n));return t},m=function(e){return e.getManagedColumnNames()},f=function(e,t){l.set(e,t)},p=function(e){var t;(t=e,Array.from(t.entries())).map((([e,t])=>{const n=m(t);return[e,n]})).forEach((([e,t])=>{for(const n of t)f(n,e)}))},h=function(n){var i;b()?n():require((i=r,Object.values(i).map((e=>e.amdModulePath))),(function(...i){const o=function(e,t){const n=Math.min(e.length,t.length);let i=[];for(let o=0;o<n;o++)i[o]=[e[o],t[o]];return i}(function(e){return Object.values(e).map((e=>e.amdModuleId))}(r),i).map((([e,n])=>((e,n)=>new t((t=>{n.isAdditionalColumnsAvailable((function(i){t({isAvailable:i,amdModuleId:e,amdModule:n})}))})))(e,n)));t.all(o).then((t=>{var i,o,a;!function(e){e.forEach((({amdModuleId:e,amdModule:t})=>{s.set(e,t)}))}(t.filter((o="isAvailable",a=!0,t=>e.equals(t[o],a))).map((i=["amdModuleId","amdModule"],t=>{let n={};for(const o of i)e.owns(t,o)&&(n[o]=t[o]);return n}))),p(s),n()}))}))},v=function(e){const t=function(e){let t=[];return e.getAdditionalColumnsUXDGV(t),t}(e);return function(e,t){const n=Math.min(e.length,t.length);let i={};for(let o=0;o<n;o++)i[e[o]]=t[o];return i}(m(e),t)},D=function(){return d().map((e=>function(e){return v(e)}(e))).reduce(i,{})},b=function(){var t=!1,n=a.getPlugins("DatabasePlugin");return e.is(n)&&e.is(n.instance)&&e.is(n.instance.isStandAlone,"function")&&(t=n.instance.isStandAlone()),t},w=function(e,n){const o=n();let a;if(Array.isArray(o)){const n=o.map((n=>{return i=n,new t((function(t){i.updateAttributes(e,(function(e){t(e)}))}));var i}));a=t.all(n).then((e=>{const n=e.reduce(i,{});return t.resolve(n)}))}else a=t.reject("getAvailableAdditionalColumnAMDsSupplier is not returning Column AMDs");return a};return{name:"CfgColumnsPlugin",onStart:function(e){h(e)},onStop:function(){},getConfigColumns:function(){return D()},updateAttributes:function(n,i=null){let o=t.resolve();return b()||(o=e.is(i,"function")?w(n,i):w(n,d)),o},getUpdatedCfgAttributesBasedOnCommand:function(n,i){let o;if(e.is(i,"string")){const e=((e,t)=>e.has(t)?e.get(t):null)(c(r),i);o=Array.isArray(e)?w(n,(()=>g(e))):t.reject("No valid Command to AMD Module Mapping")}else o=t.reject("No valid Command Name given");return o},getConfigColDataIndexSet:function(){let t;if(e.is(u))t=u;else{const e=d().map((e=>m(e))).reduce(o,[]);t=new Set(e),u=t}return t},isDataIndexAvailable:function(e){return this.getConfigColDataIndexSet().has(e)},getAdditionalColumnAMDsBasedOnDataIndices:function(e){const t=e.reduce(((e,t)=>(l.has(t)&&e.add(l.get(t)),e)),new Set);return t.size>0?g(t):[]},getColumnsFromPreferences:function(t){return function(t){const n=a.getPlugins("TreeViewPlugin");let i;if(e.is(n)){const o=n.instance.getViewColumnPreferences(t);i=e.is(o)?o.Columns.Column:[]}return i}(t)},getTypeRepresentations:function(){return d().map((e=>e.getTypeRepresentations())).reduce(i,{})}}}})),define("DS/DELPPWViewPlugins/TreeViewPlugin/LayoutPreferencesUI",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],(function(e,t){"use strict";return function(n,i,o,a,r){var s,l,u,c,d,g,m,f,p,h,v,D,b,w,C,y,I=0,S="widget-layout-block",_="button-container",P="border-selected",T="side-block",N="main-block",x=i.getComponent("Dialog"),V=i.getComponent("Button"),F=i.getComponent("Element"),L=i.getComponent("WUXDockAreaEnum"),E=Object.create(null),k=Object.create(null),A=Object.create(null),U=Object.create(null),M=n.getLayoutConfig();return e.merge(E,r.viewsInDockingZones),e.merge(k,r.viewsInFreeZone),d=function(e){var t,n,i,o=e.getRowColumnMap(),a=[];for(t=e.getRowIds().length,s=new Array(t),i=0;i<t;i++)n=o[i].length,a.push({columns:n}),s[i]=new Array(n);return a},g=function(e,t){t?e.hasClassName(P)||e.addClassName(P):e.hasClassName(P)&&e.removeClassName(P)},m=function(e,t,n){e.buttons[t].checkFlag=n,g(e.buttonContainer,n)},f=function(t,n,i,o){var a=s[t][n];e.is(a)&&m(a,i,o)},p=function(t,n,i){var o=A[t];e.is(o)&&m(o,n,i)},h=function(e,i,o){var a,r,s,l,u=[],c=function(e){var t=e.dsModel;!0===t.checkFlag?(u.some((function(e){var n=!1;return!0===e.checkFlag&&e.domId!==t.domId&&(e.checkFlag=!1,n=!0),n})),g(s,!0)):g(s,!1)};for(a=n.createBlocLayout({rows:[{columns:1}]}),s=new F("div",{class:_+" "+i}),l=0;l<o;l++)r=new V({type:"check",label:t.getNLSValue(i+".LayoutPreferencesUI."+U[i][l]),value:"button",onClick:c,domId:i+"-"+I++}),u.push(r),r.inject(s);return A[e]={buttons:u,buttonContainer:s,viewId:i},a.setColumnContent(0,0,s),a},v=function(n,i,o,a){var r,l,u,c=[],d=function(t){var n,i,o,a,r=t.dsModel;if(!0===r.checkFlag)c.some((function(e){var t=!1;return!0===e.checkFlag&&e.domId!==r.domId&&(e.checkFlag=!1,t=!0),t})),g(u,!0);else{for(n=!0,o=0;o<s.length;o++)for(a=0;a<s[o].length;a++)e.is(s[o][a])&&(i=s[o][a].buttons.every((function(e){return!1===e.checkFlag})),n=n&&i);n?r.checkFlag=!0:g(u,!1)}};for(u=new F("div",{class:_+" "+o}),l=0;l<a;l++)r=new V({type:"check",label:t.getNLSValue(o+".LayoutPreferencesUI."+U[o][l]),value:"button",onClick:d,domId:o+"-"+I++}),c.push(r),r.inject(u);s[n][i]={buttons:c,buttonContainer:u,viewId:o}},D=function(){var t,i,o,a,r,g,m,f;for(t in E)switch(o=(i=E[t]).views.length,U[t]=i.views,i.dockArea){case L.LeftDockArea:u=h(i.dockArea,t,o);break;case L.RightDockArea:c=h(i.dockArea,t,o)}for(t in g=n.getBlocLayout(),r=d(g),k)i=k[t],e.is(i.views,"array")&&i.views.length>0&&(o=i.views.length,U[t]=i.views,a=M[t],e.is(a)&&v(a.row,a.col,t,o));for(l=n.createBlocLayout({rows:r}),m=0;m<s.length;m++)for(f=0;f<s[m].length;f++)e.is(s[m][f])&&l.setColumnContent(m,f,s[m][f].buttonContainer)},b=function(){k=null,s=null,E=null,A=null,U=null},w=function(){var t,n,i,o={};for(t in E)o[t].current="",o[t].old="";for(t in k)i=k[t],e.is(i.views,"array")&&i.views.length>0&&(n=i.views[0],o[t].current=n);return o},C=function(){var t,n,i,o,r,s=function(e,t){var n,i,o=e.length;for(i=0;i<o;i++)if(e[i]===t){n=i;break}return n};for(t in a)if(a.hasOwnProperty(t)){if(n=a[t].viewType,!a[t].display)continue;!0,r=s(U[t],n),e.is(E[t])?p(E[t].dockArea,r,true):(o=k[t],e.is(o)&&e.is(o.views)&&(i=M[t],f(i.row,i.col,r,true)))}},y=function(n){var r,s,d=new F("div",{class:S}),g=function(e,t){var n;n=new F("div",{class:t}),e.inject(n),n.inject(d)};return D(),e.is(A[L.LeftDockArea])&&g(u,T),g(l,N),e.is(A[L.RightDockArea])&&g(c,T),s=i.getComponent("WUXFrameWindowsManager").getFrameWindow(o),(r=new x({domId:"LayoutPreferencesUI-Dialog",immersiveFrame:s.getImmersiveFrame(),modalFlag:!0,visibleFlag:!1,snappableFlag:!1,title:t.getNLSValue("LayoutPreferencesUI.Header"),content:d,resizableFlag:!0,buttons:{Ok:new V({className:"ok primary",label:t.getNLSValue("LayoutPreferencesUI.Ok"),emphasize:"primary",onClick:function(){e.is(n,"function")&&n(a),r.close()}}),Cancel:new V({className:"cancel",label:t.getNLSValue("LayoutPreferencesUI.Cancel"),onClick:function(){r.close()}})}})).close=function(){r.destroy(),d=null,b()},r},{name:"LayoutPreferencesUI",showDialog:function(t){var n;n=y(t),e.is(a)||(a=w()),C(),n.show()},decipherPreferencesFromButtonStates:function(){var t,n,i,o,a,r={},l=function(e){var t=U[e];r[e]="",n.forEach((function(n,i){var o,a=i,s=n.checkFlag;o=t[a],!0===s&&(r[e]=o)}))};for(t in A)i=A[t].viewId,n=A[t].buttons,l(i);for(o=0;o<s.length;o++)for(a=0;a<s[o].length;a++)e.is(s[o][a])&&(i=s[o][a].viewId,n=s[o][a].buttons,l(i));return r}}}})),define("DS/DELPPWViewPlugins/UXComponentsPlugin/PPRDataGridView",["UWA/Core","DS/PPWDataGridView/PPWDataGridView","css!DS/DELPPWViewPlugins/assets/css/DataGridView.css"],(function(e,t){"use strict";var n=function(e){return-1===e.rowID&&e.columnID>=0};return t.extend({name:"PPRDataGridView",init:function(t){t.showOutlineFlag=!0,this._parent(t),this.layout.cellHeight=e.is(t.cellHeight)?t.cellHeight:32,this.layout.columnHeaderHeight=e.is(t.columnHeaderHeight)?t.columnHeaderHeight:32},registerColumnsEnum:function(){var t=this.getTypeRepresentationFactory();this.columns.forEach((function(n){e.is(n.hasRangeDefined)&&n.hasRangeDefined&&t.registerTypeRepresentations({[n.dataIndex.replaceAll(".","")]:{stdTemplate:"comboSelector",semantics:{possibleValues:n.authorizedValues}}})}))},registerColumnTypeRepresentations:function(e){this.getTypeRepresentationFactory().registerTypeRepresentations(e)},updateNodeKPIColor:function(e){this.showNodeKPIColorFlag=e},getColumnIndexByDataIndex:function(e){return this.layout.getColumnIndex(e)},setColumnWidth:function(e,t){this.layout.setColumnWidth(e,t)},isColumnHidden:function(e){return!this.layout.getColumnVisibleState(e)},hideColumn:function(e,t){this.layout.setColumnVisibleFlag(e,!1,t)},setColumnOptions:function(t,n){-1!==t&&("string"==typeof t&&(t=this.getColumnIndexByDataIndex(t)),e.extend(this.columns[t],n))},showColumn:function(e){this.layout.setColumnVisibleFlag(e,!0)},getColumnMinWidth:function(e){return this.layout.getColumnOptionValue(e,"minWidth")},getColumnWidth:function(e){return this.layout.getColumnOptionValue(e,"width")},moveColumn:function(e,t){this.layout.moveColumn(e,t)},_requestCellContent:function(e){var t;e.isHeader=n(e),(t=e.cellView.collectionView.getColumnOrGroup(e.columnID))&&(e.dataIndex=t.dataIndex),this._parent(e)},_setTweakerForCell:function(e){this._parent(e,{touchMode:!1})},sortColumn:function(e,t){this.sortModel=[{dataIndex:e,sort:t}],this._applySortModel()},clearSort:function(){this.sortModel=[{}],this._applySortModel()},getLightCellInfosAt:function(e){var t,i=this._parent(e);return i.isHeader=n(i),(t=this.getColumnOrGroup(i.columnID))&&(i.dataIndex=t.dataIndex),i},getLayout:function(){return this.layout}})})),define("DS/DELPPWViewPlugins/KeyBindingPlugin",[],(function(){"use strict";return function(e){return function(e){},{name:"KeyBindingPlugin",createHandler:function(t){var n,i=this,o=e.getLogger();n=function(e){var n,a,r;(e=e||window.event)?(n=e.keyCode,a=e.ctrlKey||e.metaKey,r=e.shiftKey,a&&67===n?t.onCtrlC&&t.onCtrlC(e):a&&86===n?t.onCtrlV&&t.onCtrlV(e):a&&88===n?t.onCtrlX&&t.onCtrlX(e):46===n?t.onSuppr&&t.onSuppr(e):8===n?t.onBackspace&&t.onBackspace(e):a&&65===n?t.onCtrlA&&t.onCtrlA(e):r&&9===n?t.onShiftTab&&t.onShiftTab(e):9===n?t.onTab&&t.onTab(e):40===n?t.onDownArrow&&t.onDownArrow(e):38===n&&t.onUpArrow&&t.onUpArrow(e)):o.debug(i.name,"could not get event from keydown event")},(t=t||{}).domElement?t.domElement.onkeydown=n:o.debug(i.name,"No dom element given to listen key bindings on. Exiting")},onStart:function(){},onStop:function(){}}}})),define("DS/DELPPWViewPlugins/TreeViewPlugin/RootsStoreUI",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],(function(e,t){"use strict";return function(n,i,o,a){var r,s=o.getComponent("Button"),l=o.getComponent("LineEditor"),u=o.getComponent("ComboBox"),c=o.getComponent("Element"),d=function(e){return new c("div",e)},g=d({class:"ViewPreferencesUI-TabContent store-view-container"});return r=function e(){var o,r,c,m,f,p,h,v=a.getStoresList(),D=function(){-1<v.indexOf(m.value)?(p.show(),h.show()):(p.hide(),h.hide())},b=function(){var e=m.value;""!==e&&i.getMediator().notify("LoadRecentContent",{store:e}),n.buttons.Ok.fire("buttonclick")},w=function(){var t=m.value;""!==t&&a.removeStore(t),g.empty(!0),e()};o=d({class:"store-view-div"}),(c=new l({placeholder:t.getNLSValue("RootsStoreUI.Store_name.Title")}).inject(o)).getContent().addClassName("store-view-control"),c.addEventListener("uncommittedChange",(function(){""!==c._myInput.value?f.show():f.hide()})),(f=new s({label:t.getNLSValue("RootsStoreUI.Save_views.Title"),onClick:function(){var t=c.value;""!==t&&(a.createStore(t),g.empty(),e())}}).inject(o)).getContent().addClassName("store-view-btn"),f.hide(),o.inject(g),(v=a.getStoresList()).length>0&&(r=d({class:"store-view-div"}),(m=new u({elementsList:v,placeholder:t.getNLSValue("RootsStoreUI.Store_select.Placeholder"),currentValue:"Default",enableSearchFlag:!0,reachablePlaceholderFlag:!0}).inject(r)).getContent().addClassName("store-view-control"),m.addEventListener("change",D),(p=new s({label:t.getNLSValue("RootsStoreUI.Load_store.Title"),onClick:b}).inject(r)).getContent().addClassName("store-view-btn"),(h=new s({label:t.getNLSValue("RootsStoreUI.Remove_store.Title"),onClick:w}).inject(r)).getContent().addClassName("store-view-btn"),p.hide(),h.hide(),r.inject(g))},e.is(n)&&r(),{getContent:function(){return g}}}})),define("DS/DELPPWViewPlugins/SearchPlugin/SearchPlugin",["UWA/Core","UWA/Utils/InterCom","DS/PlatformAPI/PlatformAPI"],(function(e,t,n){"use strict";return function(i){var o,a,r,s,l,u,c,d="default_search_criteria",g="Selected_Objects_search",m="SearchComServer";return r=function(t,n,i){var a={};return a.title=t,a.mode="furtive",a.app_socket_id=o,a.widget_id=widget.id,a.default_with_precond=!0,a.show_precond=!1,a.source=["3dspace"],a.default_search_criteria="",a.precond="",e.is(i,"array")&&i.forEach((function(e){""!==a[d]&&(a[d]+=" OR "),a[d]+=e})),e.is(n,"array")&&(n.forEach((function(e){""!==a.precond&&(a.precond+=" OR "),a.precond+='flattenedtaxonomies:"types/'+e+'"'})),a.precond="("+a.precond+")"),a},s=function(e){var t={};t.widget_id=widget.id,a.dispatchEvent("unregisterSearchContext",t),a.dispatchEvent("RegisterContext",e),a.addListener("onCloseTransient",(function(){a.removeListener("onCloseTransient")}))},l=function(){var e={widget_id:widget.id};a.dispatchEvent("unregisterSearchContext",e),a.dispatchEvent("UnregisterContext",e),a.unsubscribeServer(m),a.removeListener(g,u),a.disconnect()},u=function(t){e.is(c)&&c(t)},{name:"SearchPlugin",onStart:function(){o="search_socket_"+(new Date).getTime(),(a=new t.Socket(o,{dispatchRetryInterval:5})).addListener(g,u),a.subscribeServer(m)},onStop:function(){l()},activate:function(t,n,i,o){var l;e.is(i)&&(i=e.is(i,"array")?i:[i]),l=r(t,i,o),e.is(n,"function")||(l.mode="default"),c=n,s(l),a.dispatchEvent("InContextSearch",l)},subscribeToSelectEvent:function(e){return n.subscribe("DS/PADUtils/PADCommandProxy/select",e)},unSubscribeToSelectEvent:function(t){e.is(t)&&n.unsubscribe(t)}}}})),define("DS/DELPPWViewPlugins/UXComponentsPlugin/ExtendedCustomDialog",["UWA/Core","DS/Windows/Dialog"],(function(e,t){"use strict";var n,i=null;return t.extend({name:"CustomDialog",init:function(e){n=e||{},this._parent(n)},_setup:function(t){this.clearMessages(),i=new e.Element("div",{class:"custom-dialog-message-container"}),new e.Element("span",{class:t.iconSpanClass}).inject(i),new e.Element("span",{class:t.textSpanClass}).inject(i).innerHTML=t.message,e.is(n.content,"string")||i.inject(n.content)},error:function(t){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-attention",textSpanClass:"custom-dialog-error-message",message:t}),e.is(n.buttons.Ok)&&(n.buttons.Ok.disabled=!0)},info:function(t){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-info",textSpanClass:"custom-dialog-info-message",message:t}),e.is(n.buttons.Ok)&&(n.buttons.Ok.disabled=!1)},warning:function(t){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert",textSpanClass:"custom-dialog-warn-message",message:t}),e.is(n.buttons.Ok)&&(n.buttons.Ok.disabled=!1)},clearMessages:function(){e.is(i)&&i.destroy()}})})),define("DS/DELPPWViewPlugins/SelectionPlugin/SelectionPlugin",["UWA/Core","UWA/Json"],(function(e,t){"use strict";return function(n){var i,o,a,r,s,l={},u=n.getConfig().resource.selectionMappingPath;return r=function(t){var i,o,r,s=[],u=[];if(!e.is(a)||!e.is(t))return s;if(i=a[t],e.is(i,"array"))for(r=0;r<i.length;r++)o=i[r],e.is(o,"string")?(u=[],e.is(l[o])&&(u=l[o].map((function(e){return e.id}))),s.push(u||[])):n.getLogger().debug("ModuleId is invalid in selection mapping. ModuleId:"+o);return s},s=function(t){var i,o,r,s=[],u=[];if(!e.is(a)||!e.is(t))return s;if(i=a[t],e.is(i,"array"))for(r=0;r<i.length;r++)o=i[r],e.is(o,"string")?(u=[],e.is(l[o])&&(u=l[o].map((function(e){return e}))),s.push(u||[])):n.getLogger().debug("ModuleId is invalid in selection mapping. ModuleId:"+o);return s},{name:"SelectionPlugin",onStart:function(r){o=Object.create(null),require(["text!"+u],(function(o){e.is(o)?(i=e.is(o,"string")?t.decode(o):o)&&(a=i.selection):n.getLogger().debug("Selection mapping is not defined."),r()}))},onStop:function(){l={},o=null},setSelection:function(t,n){e.is(t)&&(l[t]=n)},getSelections:function(t){return e.is(t)?r(t):null},getSelectionsWithPaths:function(t){return e.is(t)?s(t):null},getSelectionMapping:function(t){var n=null;return e.is(t)&&Object.prototype.hasOwnProperty.call(a,t)&&(n=a[t]),n},removeFromHighlightMap:function(e){delete o[e.toString()]},setNodeIdsToHighlight:function(e,t){o[e.toString()]=t},getNodeIdsToHighlight:function(e){return o[e.toString()]},getSelectedNodesCount:function(t){var n,i=this.getSelections(t),o=0;if(e.is(i,"array"))for(n=0;n<i.length;n++)o+=i[n].length;return o},getModuleSelections:function(t){var n=[];return e.is(l[t])&&(n=l[t]),n}}}})),define("DS/DELPPWViewPlugins/View",["UWA/Core","UWA/Controls/Abstract","UWA/Element"],(function(e,t,n){"use strict";return function(i){var o=t.extend({init:function(e){this._parent(e),this.container=new n("div",{class:e?e.class?e.class:"":"view-container"}),this.elements={},this.setup.apply(this,arguments)},setup:function(){},render:function(){return this},setContainer:function(t){var i;if(t instanceof n)this.container=t;else if("element"===(i=e.typeOf(t)))this.container=e.extendElement(t);else{if("object"!==i)throw new Error("Invalid type of container");this.container=e.createElement(t.tag,t)}},destroy:function(){this._parent()}});return o}})),define("DS/DELPPWViewPlugins/Viewer3DPlugin",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/DELPPWModelServices/CollectionUtils"],(function(e,t,n){"use strict";return function(i){const o=Object.freeze({SHOWN:1,HIDDEN:0,PARTIAL:-1,NA:null});var a,r,s,l,u,c,d,g,m,f,p,h,v,D,b,w="drop",C="remove",y="applyFilter",I="cleanAll",S="unHideAll",_="exclusiveShow",P="resetViewer",T="Highlight",N="RemoveAll",x=i.getConfig().appContext.widget.getId(),V=[],F=new Map,L=[],E="MfgItem3DViewerModule_Preferences";return g=function(){return widget.getValue(E)},m=function(e){widget.setValue(E,e)},u=function(t){return t=e.is(t,"string")?t:t.toString(),F.has(t)},c=function(t){return t=e.is(t,"string")?t:t.toString(),F.get(t)},d=function(t,n){t=e.is(t,"string")?t:t.toString(),F.set(t,n)},f=function(t){t=e.is(t,"string")?t:t.toString(),F.delete(t)},p=function(t){var n,i,o=null,a=g();return e.is(a)&&(i=a.loadedObjInfos,n=e.is(i.rootPID)&&t.indexOf(i.rootPID)>-1?i.scopedPrdPID:t),v(t)&&u(n)&&(o=c(n)),o},h=function(t,n){v(t)&&e.is(n,"number")?d(t,n):d(t,o.NA)},v=function(t){var n,i=!1,o=g();return e.is(o)&&(n=o.loadedObjInfos,(e.is(n.rootPID)&&t.indexOf(n.rootPID)>-1||e.is(n.scopedPrdPID)&&t.indexOf(n.scopedPrdPID)>-1)&&(i=!0)),i},D=function(t,n){n=e.is(n,"number")?n:o.NA,F.forEach((function(e,i){i.indexOf(t)>-1&&_seteBOMMapInfo(i,n)}))},a=function(t){var n,o=[];return n=function(){var t,n;return t=widget.getValue("x3dSharedId"),e.is(t)||(n=i.getConfig().appContext,e.is(n)&&e.is(n.widget)&&e.is(n.widget.data)&&(t=n.widget.data.app3DSharedId)),t}(),e.is(n)&&o.push(n),o.concat(t,"MFNMGA").join("/")},r=function(n,i){var o=a(n),r=i||{};e.merge(r,{originWidgetId:x}),t.publish(o,r)},function(){r(I,null)},s=function(t){var n,i,o,a,r,s,l=[];if(e.is(t.data.paths)&&e.is(t.data.attributes))for(o=t.data.paths,a=t.data.attributes,n=0;n<=o.length-1;n++){for(r=o[n],s=[],i=0;i<=r.length-1;i++)"VPMReference"===a[r[i]].type&&s.push(r[i]);l.push(s)}else l=t.data.paths;return l},l=function(e,t){var n,i=null;for(n=t.length-1;n>=0&&null===(i=e.getNodeModel(t[n],!0));n--);return i},function(t){var n,o=i.getBehavior("EBOM","WUXNodeModelBehavior"),a=t.data.paths;e.is(t.metadata)&&(e.is(t.metadata)&&e.is(t.metadata.originWidgetId)&&x===t.metadata.originWidgetId||e.is(t.metadata.fromWidget)||(0===a.length?o.getSelectedNodes().forEach((function(e){e.from3DViewer=!0,e.unselect()})):s(t).forEach((function(t){e.is(t,"array")&&(n=l(o,t),e.is(n)&&(n.from3DViewer=!0,o.selectNode(n.getID())))}))))},b=function(t,n){var o;let a=i.getPlugins("InterWidgetComPlugin");e.is(a)&&(a=a.instance,o=a.isCloud()?"DELOERC_AP":"DELOER_AP",a.isWidgetLinked(o)&&a.publishEvent("DS/DELExternalWidgetCom/"+t,n))},{name:"Viewer3DPlugin",onStart:function(){},onStop:function(){for(;V.length>0;)i.removeExternalListener(V.pop())},getPreferences:function(){return g()},updatePreferences:function(e){m(e)},add3DVisibilityState:function(t){var n=o.NA;v(t)?(e.is(c(t[0]))&&(n=o.SHOWN),d(t,n)):d(t,n)},remove3DVisibilityState:function(e){u(e)&&f(e)},get3DVisibilityState:function(e){return p(e)},update3DVisibilityState:function(t,n){e.is(n)?h(t,n):d(t,o.NA)},isAggregatingRootLoadedInViewer:function(e){return v(e)},overrideAllChildrenNodesVisibilityState:function(e,t){D(e,t)},generateInterWidgetEventName:function(e){return a(e)},drop3D:function(t,n){var i=w,o=n||{},a=e.is(o.filterQuery3d)?o.filterQuery3d:null,s=e.is(o.usePaths)?o.usePaths:null;L=t,r(i,{rootReferenceIds:t,filterQuery3d:a,usePaths:s})},remove3D:function(t,n){var o=C,a=n||{},s=!1,l={rootReferenceIds:t,usePaths:e.is(a.usePaths)?a.usePaths:null};const u=i.getService("ConfigService");if(e.is(u)){const n=u.getPreference(E);if(e.is(n)){const i=n.loadedObjInfos;e.is(i)&&(s=t.some((function(e){let t=!1;return e!==i.rootPID&&e!==i.scopedPrdPID||(t=!0),t})))}}s&&b(N,{items:[{id:t}]}),r(o,l)},apply3DFilter:function(t,n,i){var o=y,a=i||{},s=!!e.is(a.removeFilter,"boolean")&&a.removeFilter;r(o,{rootReferenceIds:t,filterQuery3d:n,removeFilter:s})},selectIn3D:function(e,t){var i,o;return i=e.map((function(e){return n.transformToRIROccurrencePath(e)})),o=!0===t?{occRIRPaths:e}:{occRIRPaths:i},b(T,{path:i,clear:!0}),o},cleanAll:function(){r(I,null)},exclusiveShow:function(e){r(_,e)},resetViewer:function(){r(P,null)},unHideAll3D:function(){r(S,null)},getRoots:function(){return L},unsubscribe:function(){t.unsubscribe("DS/PADUtils/PADCommandProxy/select")}}}})),define("DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsSpinEditor",["UWA/Core","DS/Controls/SpinBox","DS/Controls/Abstract","css!DS/DELPPWViewPlugins/assets/css/UnitsEditor.css"],(function(e,t,n){"use strict";var i;return n.inherit({name:"UnitsSpinEditor",init:function(e){i=e||{},this._parent(i)},buildView:function(){var n=i.value;this.elements.container.addClassName("wux-controls-lineeditor custom-controls-unitseditor"),this._myInputGroup=new e.Element("div",{class:"input-group unitseditor-input-group"}),this._myUnit=new e.Element("span",{class:"input-group-addon unitseditor-group-addon"}),this._myInput=new t({value:e.is(n)&&""!==n&&null!==n?Number(n):void 0,decimals:i.decimals,typingFilter:i.typingFilter,pageStepValue:i.pageStepValue,displayStyle:i.displayStyle,allowUndefinedFlag:!0}),this._myInput.inject(this._myInputGroup),this._myUnit.inject(this._myInputGroup),this._myInputGroup.inject(this.elements.container),this._myInput.elements.container.addClassName("wux-ui-state-"+this.options.type),this._validFlag=!0,this.displayClearFieldButtonFlag&&this._layoutClearFieldButton()},setUnit:function(e){this._myUnit.setContent(e)},getUnit:function(){return this._myUnit.getText()},setValue:function(t){var n=e.is(t)&&null!==t&&""!==t?Number(t):void 0;this._myInput.setProperties({value:n})},getValue:function(){var t=this._myInput.value;return e.is(t)&&null!==t&&""!==t?t:""},setInputName:function(e){this._myInput.name=e}})})),define("DS/DELPPWViewPlugins/UXComponentsPlugin/RichTextEditor",["UWA/Core","UWA/Utils","DS/CKEditor/CKEditor","DS/Controls/Abstract","DS/DELPPWResourceServices/ResourceUtils","css!DS/DELPPWViewPlugins/assets/css/RichTextEditor.css"],(function(e,t,n,i,o){"use strict";return n.plugins.add("InsertLocalImage",{icons:"timestamp",init:function(e){e.addCommand("InsertLocalImage",{exec:function(e){var t=document.createElement("input");t.type="file",t.accept="image/*",t.style.display="none",t.multiple=!1,t.onchange=function(){var t=this.files[0],n=new FileReader;n.onload=function(){var i=document.createElement("img");i.src=n.result,i.alt=t.name,e.insertHtml(i.outerHTML)},n.readAsDataURL(t)},document.getElementsByClassName("cke")[0].append(t),t.click()}}),e.ui.addButton("InsertLocalImage",{label:o.getNLSValue("RichTextEditor.Command.InsertLocalImage.Title"),command:"InsertLocalImage",toolbar:"insert",icon:o.getIconURLFromKey("ImageUpload")})}}),i.inherit({name:"RichTextEditor",_editorContainer:null,_editorOptions:null,_initialData:null,_fieldId:"",init:function(n){n=n||{},this._editorOptions=e.is(n.editorOptions)?n.editorOptions:{},this._fieldId=t.getUUID(),this._parent(n),this._initialData=null},buildView:function(){var t=this;this.elements.container.addClassName("wux-richTextEditor-mainContainer"),this._editorContainer=new e.Element("div",{class:"wux-richTextEditor-editorContainer",id:this._fieldId}),this._editorContainer.inject(this.elements.container),n.replace(this._editorContainer,e.merge(this._editorOptions,{width:"100%",height:"300px",language:widget.lang,toolbar:[{name:"document",items:["Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","-","Undo","Redo"]},{name:"editing",items:["Find","Replace"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","CopyFormatting","RemoveFormat"]},"/",{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","NumberedList","BulletedList","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["SpecialChar","Image","Table","HorizontalRule","InsertLocalImage"]},"/",{name:"styles",items:["Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]}],extraPlugins:"tableresize, InsertLocalImage",delayIfDetached:!0,delayIfDetached_interval:10})),n.on("instanceReady",(function(){var i=n.instances[t._fieldId];e.is(i)&&!e.is(t._editor)&&(t._editor=i,e.is(t._initialData)&&t._editor.setData(t._initialData),t._editor.removeMenuItem("paste"))}))},getData:function(){var t="";if(this._editor.getData().length){return t=(t=t.concat('<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><title>Html export</title></head>')).concat("<body>"),e.is(this._editor)?t=t.concat(this._editor.getData()):e.is(this._initialData)&&(t=t.concat(this._initialData)),(t=t.concat("</body></html>")).match(/(.|[\r\8000]){1,8000}/g)}return t},setData:function(e){var t,n=e.indexOf("<body>"),i=e.indexOf("</body>");n>-1&&i>-1&&(t=e.slice(n+6,i),this._editor?this._editor.setData(t):this._initialData=t)},destroy:function(){this._parent(),n.instances[self._fieldId].destory()}})})),define("DS/DELPPWViewPlugins/TreeViewPlugin/PlatformPlugin",["DS/DELPPWModelServices/BehaviorUtil"],(function(e){"use strict";return function(t){return{name:"PlatformPlugin",isNewDragNDrop:function(){return e.isNewDragNDrop()},isCloud:function(){return e.isCloud()},useRootStorage:function(){return e.useRootStorage()},isSwipeableMenuPrefDisplayed:function(){return e.isSwipeableMenuPrefDisplayed()},isNavigateOnIndexedDBPrefDisplayed:function(){return e.isNavigateOnIndexedDBPrefDisplayed()},isDialogDisplayedAtDDinCaseOfMove:function(){return e.isDialogDisplayedAtDDinCaseOfMove()},isSuppressHideShow3DColumn:function(){return e.isSuppressHideShow3DColumn()},isExpandFetchFetchEnabled:function(){return e.isExpandFetchFetchEnabled()},isCreateMBOMv2:function(){return e.isCreateMBOMv2()},isUpdateMBOMv2:function(){return e.isUpdateMBOMv2()},isBIPXPEnabled:function(){return e.isBIPXPEnabled()},isInsertButtonInInsertCmdDisplayed:function(){return e.isInsertButtonInInsertCmdDisplayed()},isDescHighlightFromEBOMEnabled:function(){return e.isDescHighlightFromEBOMEnabled()},isChangeRequiredSyncronizationEnabled:function(){return e.isChangeRequiredSyncronizationEnabled()},isResultingProductSyncronizationEnabled:function(){return e.isResultingProductSyncronizationEnabled()},isMGALoadRelationsOnDemand:function(){return e.shouldLoadRelationsOnDemand()},isUsingInputValueKF:function(){return e.isInputValueKFAllowed()},getMaxIntegerLengthForKF:function(){return e.getMaxIntegerLengthForKF()},getMaxDecimalLengthToDisplayForKF:function(){return e.getMaxDecimalLengthToDisplayForKF()},getMaxDecimalLengthToDatabaseForKF:function(){return e.getMaxDecimalLengthToDatabaseForKF()},getWKILTHOptions:function(){return e.getWKILTHOptions()},isNoSizeLimitEnabled:function(){return e.isNoSizeLimitEnabled()},isWKILTHLAEnabled:function(){return e.isWKILTHLAEnabled()},isWKILTHCheckSumValidationAllowed:function(){return e.isWKILTHCheckSumValidationAllowed()},isUsingOldCreation:function(t){return e.isUsingOldCreation(t)},getVariable:function(t,n,i){return e.getVariable(t,n,i)},isResultingProductBatchEnabled:function(){return e.isResultingProductBatchEnabled()}}}})),define("DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsLineEditorForKF",["UWA/Core","DS/Controls/LineEditor","DS/Controls/Toggle","DS/Controls/Abstract","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWModelServices/BehaviorUtil","css!DS/DELPPWViewPlugins/assets/css/UnitsEditor.css"],(function(e,t,n,i,o,a){"use strict";var r,s,l,u,c,d,g,m,f,p,h,v,D,b={m_strFloatValueAsString:"",m_fValue:"",m_fValue_ToDisplay_eg_6dd:"",m_fValue_ToStoreInDB_eg_8dd:"",m_bIsTransformationSuccessful:!1,m_iNumberOfDecimalsToDisplay:6,m_iNumberOfDecimalsForStorageInDB:8,m_fNumberLowerRange_ToDB:1e-8,m_fNumberLowerRange_ToDisplay:1e-6,m_fNumberHigherRange:1e6,Init:function(e,t="",n="",i="",o=!1){this.m_strFloatValueAsString=e,this.m_fValue=t,this.m_fValue_ToDisplay_eg_6dd=n,this.m_fValue_ToStoreInDB_eg_8dd=i,this.m_bIsTransformationSuccessful=o},Init_UpperAndLowerLimits_MaxDigitsBeforDecimal:function(e=6,t=8,n=6){this.m_iNumberOfDecimalsToDisplay=e,this.m_iNumberOfDecimalsForStorageInDB=t,this.m_fNumberLowerRange_ToDisplay=parseFloat("1e-"+e),this.m_fNumberLowerRange_ToDB=parseFloat("1e-"+t),this.m_fNumberHigherRange=parseFloat("1e"+n)},wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation:function(e,t,n){if(Number.isNaN(t))return NaN;const i=String(t),o=e.indexOf(".");i.indexOf(".");if(-1===o)return e;return e.length-o-1>n?t.toFixed(n):e},wkiGetFloatNumber_AfterRemoveTrailingZeroes_InExponentialNotation:function(e,t,n){let i=t.toExponential(n).split("e");parseFloat(i[0]).toString();return this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2("",parseFloat(i[0]),n)+"e"+i[1]},wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v1:function(e,t,n){return parseFloat(t.toFixed(n)).toString()},wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2:function(e,t,n){return t.toFixed(n).replace(/(\.\d*?)0+$/,"$1").replace(/\.$/,"")},wkiTansformInputFloatValueInto6DDand8DDNotation:function(){const e=this.m_strFloatValueAsString;let t="",n="";const i=e.toLowerCase().includes("e");let o=parseFloat(e);isNaN(o)||o===1/0||o===-1/0?this.m_bIsTransformationSuccessful=!1:(o>=this.m_fNumberLowerRange_ToDB&&o<this.m_fNumberHigherRange?o>=this.m_fNumberLowerRange_ToDB&&o<this.m_fNumberLowerRange_ToDisplay?(t=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InExponentialNotation(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsForStorageInDB)):i?(t=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsForStorageInDB)):(t=this.wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation(e,o,this.m_iNumberOfDecimalsForStorageInDB)):o?(t=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InExponentialNotation(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InExponentialNotation(e,o,this.m_iNumberOfDecimalsForStorageInDB)):"0"===String(o)&&(i?(t=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_AfterRemoveTrailingZeroes_InDecimalNotation_v2(e,o,this.m_iNumberOfDecimalsForStorageInDB)):(t=this.wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation(e,o,this.m_iNumberOfDecimalsToDisplay),n=this.wkiGetFloatNumber_WITHOUT_RemoveTrailingZeroes_InDecimalNotation(e,o,this.m_iNumberOfDecimalsForStorageInDB))),this.m_fValue_ToDisplay_eg_6dd=t,this.m_fValue_ToStoreInDB_eg_8dd=n,this.m_bIsTransformationSuccessful=!0)},wkiGetValueToDisplayAndDataBase_V0:function(e){return this.Init(e),this.Init_UpperAndLowerLimits_MaxDigitsBeforDecimal(l,c,s),this.wkiTansformInputFloatValueInto6DDand8DDNotation(),{valToDisplay:this.m_fValue_ToDisplay_eg_6dd,valueToDatabase:this.m_fValue_ToStoreInDB_eg_8dd,bTransformationStatus:this.m_bIsTransformationSuccessful}},wkiGetValueToDisplayAndDataBase:function(e){return this.Init(e),{valToDisplay:e,valueToDatabase:e,bTransformationStatus:!0}},wkiGetOnlyNumericalValueStripSignAndUnit:function(e){let t=String(e);if(e&&t&&t.length){let e=t.match(/^([+-])?(\.*\d+(\.\d+)?([eE][-+]?\d+)?)(\s*\w*.*)?$/);if(e)return{NumericalVal:e[2],SignNotation:e[1]||""}}return{NumericalVal:"",SignNotation:""}},wkiGetSignNotation:function(e){let t=String(e).match(/^([+-])?(.*\d+(\.\d+)?([eE][-+]?\d+)?)(\s*\w*)?$/);return t&&t[1]||""}};D=function(){s=6,l=JSON.parse(o.getMaxDecimalLengthForKF())||6,c=8,u=15};const w=function(){return new Intl.NumberFormat(widget.lang).formatToParts(1000.2).find((e=>"decimal"===e.type)).value}();return d=function(e){let t;return t=e&&e.includes(w)?e.replace(w,"."):e,t||""},function(t){if(e.is(t)&&t.length){let e=String(t).match(/^[+-]?[\d.]+([eE][-+]?\d*)?/);return e?e[0]:null}return null},g=function(e){let t=e.match(/^([\d.]+)[eE]([-+]?\d+)$/);if(!t)return"";let[n,i,o]=t,a=parseInt(o,10);if(0===a)return i;let r=parseFloat(i)*Math.pow(10,a);return String(r)},f=function(e){return e.replace(/^([+-]?)0+(\d+)/,"$1$2")},v=function(e){let t=e.match(/^([\d.]+)[eE]([-+]?\d+)$/);if(!t)return e;let[n,i,o]=t,a=parseInt(o,10),r=parseFloat(i),s=(r*Math.pow(10,a)).toString(),[l,u=""]=i.split("."),[c,d=""]=s.split(".");if(u.length>0){let e=l.length+u.length;s=(r*Math.pow(10,a)).toFixed(Math.max(0,e-c.length))}return s},m=function(e){D();let t=Number(e);if(isNaN(t))return e;let[n,i]=v(e).split("."),o=Number(n);if(Math.abs(o)<Number(`1e${s}`)){let e=o.toString();return i&&(e+="."+i),e}let a=t.toString().includes(".")?Math.abs(t).toString().length-2:Math.abs(t).toString().length-1;return t.toExponential(a)},function(t){let n=m(t);if(e.is(n)&&n.includes("e"))return n;let i=parseFloat(n);if(isNaN(i))return null;let[o,a=""]=n.split(".");if(Math.abs(parseInt(o,10))>=Number(`1e${s}`)){let[e,t]=i.toExponential().split("e"),n=a.length>l?l:a.length;return e=parseFloat(e).toFixed(n),`${e}e${t}`}let r=g(t);return r||n},p=function(t){let n,i=!1,o=!1,a=t.match(/^[+-]?\d/);return null===a&&(n=t.match(/^[+-]?(\d+|\.\d+)/),e.is(n)?(a=/^[+-]/.test(t)?t.charAt(0)+"0"+t.slice(1):"0"+t,o=!0):a=""),a&&(i=!0),{isStartingWithNonDigitChar:i,filteredValue:a?o?a:t:""}},h=function(e){return e?e.replace(/[.,]/,w):e},function(e,t=l){let n;const i=e.match(/^([+-]?\d+(\.\d+)?([eE][-+]?\d+)?)(\s*\w*)?$/);if(!i)return e;let[o,a,r,s,u]=i,c=Number(a);return s?n=c.toExponential(t):(r=r?r.slice(0,t+1):"",n=`${a.split(".")[0]}${r}`),u?`${n}${u}`:n},function(e){const t=e.match(/^([+-]?\d+(?:\.\d+)?(?:[eE][-+]?\d+)?)(\s*\w*)?$/);if(!t)return e;let n,[i,o,a]=t,r=Number(o);n=o.match(/[eE]/)&&r<Number(`1e${u}`)?r.toString():o;let s=o.includes(".")?u+1:u;if(n.replace(".","").length>s){let e=s-n.split(".")[0].length-(n.includes(".")?1:0);n=r.toFixed(Math.max(0,e))}return a?`${n}${a}`:n},i.inherit({name:"UnitsLineEditorForKF",init:function(e){r=e||{},this._parent(r)},buildView:function(){var i=this;l=a.getMaxDecimalLengthToDisplayForKF(),c=a.getMaxDecimalLengthToDatabaseForKF(),s=a.getMaxIntegerLengthForKF();let u=b.wkiGetOnlyNumericalValueStripSignAndUnit(r.value),g=u.NumericalVal,m=u.SignNotation,v=b.wkiGetValueToDisplayAndDataBase(g);var D=v.valToDisplay?m+h(v.valToDisplay)+" "+r.unit:"",w=v.valToDisplay?m+h(v.valToDisplay)+" "+r.unit:"",C=v.valueToDatabase?m+v.valueToDatabase:"",y=e.is(r.disabled)&&r.disabled;this.elements.container.addClassName("wux-controls-lineeditor custom-controls-unitseditor unitsline-editor-groupKF"),this._myInputGroup=new e.Element("div",{class:"input-group unitsline-editor"}),this._inclusiveCheckbox=new n({type:"checkbox",label:"",checkFlag:!1,disabled:!0}),this._inclusiveCheckbox.elements.container.style.visibility="hidden",this._myInput=e.extend(new t({value:e.is(D)&&""!==D&&null!==D?h(D):void 0,disabled:y,selectAllOnFocus:!0}),{updatedUnit:r.unit,valueToDisplay:w,valueToDatabase:C}),this._myInput.elements.container.addClassName("unitsline-input"),this._includeCheckBox=new n({type:"checkbox",label:o.getNLSValue("InclusiceLineEditor.Included"),checkFlag:!1,disabled:!0}),this._includeCheckBox.elements.container.style.visibility="hidden",this._inclusiveCheckbox.inject(this._myInputGroup),this._myInput.inject(this._myInputGroup),this._includeCheckBox.inject(this._myInputGroup),this._myInput.addEventListener("focus",(function(e){if(e.dsModel.value){let t=e.dsModel.valueToDatabase;i._myInput.value=h(t)+" "+i._myInput.updatedUnit}})),this._myInput.addEventListener("blur",(function(t){if(t.dsModel.value){let e=t.dsModel.value,n=d(e),o=p(n);if(o.isStartingWithNonDigitChar){let e=f(o.filteredValue),t=b.wkiGetOnlyNumericalValueStripSignAndUnit(e),n=t.NumericalVal,a=t.SignNotation,r=b.wkiGetValueToDisplayAndDataBase(n);i._myInput.value=a+h(r.valToDisplay)+" "+i._myInput.updatedUnit,i._myInput.valueToDisplay=a+h(r.valToDisplay)+" "+i._myInput.updatedUnit,i._myInput.valueToDatabase=a+r.valueToDatabase}else i._myInput.value="",i._myInput.valueToDisplay="",i._myInput.valueToDatabase=""}else e.is(t.dsModel.value)&&(i._myInput.value="",i._myInput.valueToDisplay="",i._myInput.valueToDatabase="")})),this._myInputGroup.inject(this.elements.container)},setUnit:function(e){this._myInput.updatedUnit=e},setValue:function(e){let t=d(e);t=String(parseFloat(t));let n=b.wkiGetOnlyNumericalValueStripSignAndUnit(t),i=n.NumericalVal,o=n.SignNotation,a=b.wkiGetValueToDisplayAndDataBase(i);this._myInput.value=o+h(a.valToDisplay)+" "+this._myInput.updatedUnit,this._myInput.valueToDisplay=o+h(a.valToDisplay)+" "+this._myInput.updatedUnit,this._myInput.valueToDatabase=o+a.valueToDatabase},getValue:function(){let e=this._myInput.value;return e&&(e=this._myInput.valueToDatabase),{value:e}},getInputValue:function(){if(e.is(this._myInput.valueToDatabase)&&this._myInput.valueToDatabase.length){let e=b.wkiGetOnlyNumericalValueStripSignAndUnit(this._myInput.valueToDatabase),t=e.NumericalVal;return e.SignNotation+t}}})})),define("DS/DELPPWViewPlugins/UXComponentsPlugin/UXComponentsPlugin",["UWA/Core","UWA/Element","UWA/Utils","DS/Windows/Panel","DS/Windows/Dialog","DS/Tree/Tree","DS/Controls/Button","DS/Controls/ButtonGroup","DS/Controls/Expander","DS/Controls/LineEditor","DS/Controls/Loader","DS/Controls/ModalContainer","DS/Controls/Tab","DS/Tree/TreeListView","DS/PPWTreeNodeModel/PPWTreeNodeModel","DS/PPWTreeDocument/PPWTreeDocument","DS/Controls/TooltipModel","DS/CoreEvents/Events","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/Controls/Editor","DS/Controls/DatePicker","DS/UIBehaviors/ContextualMenuManager","DS/ApplicationFrame/FrameWindowsManager","DS/ApplicationFrame/CommandsManager","DS/etree/syncwidget","DS/etree/syncviewsFactory","DS/Controls/ProgressBar","DS/Controls/Accordeon","DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsEditor","DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsSpinEditor","DS/DELPPWViewPlugins/UXComponentsPlugin/ExtendedCustomDialog","DS/DELPPWViewPlugins/UXComponentsPlugin/PPRDataGridView","DS/DELPPWViewPlugins/UXComponentsPlugin/RichTextEditor","DS/DELPPWViewPlugins/UXComponentsPlugin/InclusiveLineEditor","DS/DELPPWViewPlugins/UXComponentsPlugin/LineEditorGroupForKF","DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsLineEditorForKF","DS/egraph/core","DS/egraph/views","DS/egraph/iact","DS/egraph/utils","DS/DELSwimLaneChart_v2/DELSwimLaneChart","DS/TreeModel/DataModelSet","DS/Controls/Breadcrumb","DS/Controls/SelectionChipsEditor","DS/PPWDataGridView/PPWMagnitudeLineEditor","DS/PPWDataGridView/PPWMagnitudeSelectionChipsEditor","DS/Menu/Menu","DS/Tweakers/GeneratedToolbar","DS/DataGridView/DataGridViewPaginationManager","DS/CollectionView/CollectionViewStatusBar","css!egraph/views","css!DS/egraph/views_default.css","css!etree/syncviews","css!DS/etree/overviewui.css"],(function(e,t,n,i,o,a,r,s,l,u,c,d,g,m,f,p,h,v,D,b,w,C,y,I,S,_,P,T,N,x,V,F,L,E,k,A,U,M,R,O,W,B,G,j,H,X,K,$,Z,z,J,q){"use strict";return function(){return{name:"UXComponentsPlugin",getComponent:function(n){var Q;switch(n){case"WUXDockAreaEnum":Q=WUXDockAreaEnum;break;case"Element":Q=t;break;case"Panel":Q=i;break;case"Dialog":Q=o;break;case"CustomDialog":Q=L;break;case"Button":Q=r;break;case"ButtonGroup":Q=s;break;case"Expander":Q=l;break;case"LineEditor":Q=u;break;case"TooltipModel":Q=h;break;case"TreeListView":Q=m;break;case"TreeNodeModel":Q=f;break;case"TreeDocument":Q=p;break;case"DataGridView":Q=E;break;case"Tree":Q=a;break;case"WUXEvent":Q=v;break;case"Segmented":Q=e.Controls.Segmented;break;case"ContextualMenuManager":Q=I;break;case"WUXFrameWindowsManager":Q=S;break;case"WUXCommandsManager":Q=_;break;case"WUXLoader":Q=c;break;case"Toggle":Q=D;break;case"ComboBox":Q=b;break;case"AutoComplete":Q=w;break;case"Editor":Q=C;break;case"DatePicker":Q=y;break;case"ETree":Q=P;break;case"ETreeViewsFactory":Q=T;break;case"ProgressBar":Q=N;break;case"Accordeon":Q=x;break;case"UnitsEditor":Q=V;break;case"UnitsSpinEditor":Q=F;break;case"WUXTab":Q=g;break;case"EGraphCore":Q=R;break;case"EGraphViews":Q=O;break;case"EGraphIact":Q=W;break;case"EGraphUtils":Q=B;break;case"SwimLaneChart":Q=G.default;break;case"DataModelSet":Q=j;break;case"RichTextEditor":Q=k;break;case"Breadcrumb":Q=H;break;case"ModalContainer":Q=d;break;case"InclusiveLineEditor":Q=A;break;case"LineEditorGroupForKF":Q=U;break;case"UnitsLineEditorForKF":Q=M;break;case"Array":Q=null;break;case"Chips":Q=X;break;case"Menu":Q=Z;break;case"GeneratedToolbar":Q=z;break;case"MagnitudeLineEditor":Q=K;break;case"MagnitudeSelectionchipEditor":Q=$;break;case"Paginator":Q=J;break;case"PaginatorStatusBar":Q=q}return Q}}}})),define("DS/DELPPWViewPlugins/TreeViewPlugin/ViewPreferencesUI",["UWA/Core","DS/Utilities/Utils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWModelServices/BehaviorUtil","DS/DELPPWViewPlugins/TreeViewPlugin/RootsStoreUI","DS/Controls/SelectionChips"],(function(e,t,n,i,o,a){"use strict";return function(r,s,l,u,c){var d,g,m,f,p,h,v,D,b,w,C,y,I=l.getComponent("Element"),S=l.getComponent("Dialog"),_=l.getComponent("Button"),P=l.getComponent("WUXTab"),T=l.getComponent("TreeListView"),N=l.getComponent("TreeNodeModel"),x=l.getComponent("Editor"),V=l.getComponent("Toggle"),F={},L={},E=widget.getValue("isCustoParametersSetLocked");return p=function(t){g=new I("div",{class:"ViewPreferencesUI-Content"}),(d=new S({domId:"ViewPreferencesUI-Dialog",immersiveFrame:s.getImmersiveFrame(),modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,title:n.getNLSValue("ViewPreferencesUI.Header"),content:g,buttons:{Ok:new _({domId:"ViewPreferencesUI-Dialog-Ok",className:"ok primary",label:n.getNLSValue("ViewPreferencesUI.Ok"),emphasize:"primary",onClick:function(){var n=w();d.close(),e.is(t,"function")&&t(n)}}),Cancel:new _({domId:"ViewPreferencesUI-Dialog-Cancel",className:"cancel",label:n.getNLSValue("ViewPreferencesUI.Cancel"),onClick:function(){d.close()}}),Apply:new _({domId:"ViewPreferencesUI-Dialog-Apply",className:"moreAttr",label:n.getNLSValue("ViewPreferencesUI.MoreAttributes"),onClick:function(){var n=w();e.is(t,"function")&&t(n),b(d,n)},visibleFlag:!E})}})).close=function(){this.destroy(),g=null,f=null,m=null}},b=function(e,t){r.getMediator().notify("MoreAttributesWizard",{currentView:y[f._properties.value.value[0]],columnPreferences:t}),e.close()},h=function(){e.is(g)&&(f=new P({reorderFlag:!0,showComboBoxFlag:!0,pinFlag:!1,multiSelFlag:!1,editableFlag:!0,touchMode:!0,displayStyle:["strip"]})).inject(g)},v=function(i){var o,a,r,s={showVerticalLines:!0,isSortable:!1,isDraggable:!0,isEditable:!0,apiVersion:2,height:"auto",defaultCellHeight:40,performances:{resizeDebounceTimeout:200},selection:{cells:!1,canMultiSelect:!1,columnHeaders:!1},resize:{columns:!0,rows:!1},enableActiveUI:!0,enableKeyboardNavigation:!0,shouldDisplayTooltip:function(t){var i,o={longHelp:""};if(!t.isHeader)switch(t.dataIndex){case"colName":case"width":case"minWidth":o.longHelp=t.cellModel.options.value;break;case"colVisibility":i=t.cellModel.options.value,e.is(i.display,"boolean")&&(i.display?o.longHelp=n.getNLSValue("ViewPreferencesUI.ToolTip.ColumnVisible"):o.longHelp=n.getNLSValue("ViewPreferencesUI.ToolTip.ColumnHidden"))}return o},onDropCellDefault:function(e,t){var n,i,o,a,r;if(e.preventDefault(),n=this.unserializeDragAndDropEvent(e)){if(i=n.data["dswebux/x-tree.treenodemodel+number"],o=n.data["dswebux/x-tree.treenodemodel+json"],t.nodeModel._getID()===i)return;o&&o.forEach((function(e){if(a=new N(e),t.cellView){if(r=t.nodeModel,t.manager.getDocument().options.shouldAcceptDrop({parentTreeNodeModel:r,draggedTreeNodeModel:a,dropPosition:t.dropPosition})){if(t.manager.getDocument().prepareUpdate(),t.manager.getDocument().getXSO().get().forEach((function(e){e.remove()})),t.manager.getDocument().pushUpdate(),-1!==t.virtualRowID){switch(t.dropPosition){case"top":r.getParent().insertBefore(a,r);break;default:case"middle":r.getParent().addChild(a,t.virtualRowID);break;case"bottom":r.getParent().addChild(a,r.getParent().getChildren().indexOf(r)+1)}return!1}return!0}return!1}}))}}},l=function(e){var t,n=e.cellView.getContent(),i=e.cellModel.getCellContent();if(!e.isHeader)return t=new x({value:i}),n.setContent(t),t},c=t.debounce((function(e){e.nodeModel.options.grid[e.dataIndex]=e.value}),100,!0),d=t.debounce((function(e){e.nodeModel.options.grid[e.dataIndex].display=e.cellView.getOption("toggle").checkFlag}),100,!0);for(s.columns=[{dataIndex:"tree",isHidden:!0},{text:"",dataIndex:"colPosition",isEditable:!1,width:"5%",isColumnMovable:!1,onCellRequest:function(e){var t=e.cellView.getContent();if(!e.isHeader)return t.setContent(e.nodeModel.getLabel()),e.nodeModel.getLabel()}},{text:n.getNLSValue("Column.HeaderName"),dataIndex:"colName",isEditable:!1,width:"auto",isColumnMovable:!1},{text:n.getNLSValue("Column.IsVisible"),dataIndex:"colVisibility",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:function(t){var n,i=t.cellView.getContent(),o=t.cellModel.getCellContent();if(!t.isHeader)return n=new V({type:"switch",label:""}),"string"===e.typeOf(o)&&(o=e.Json.decode(o)),!0===o.display&&(n.checkFlag=!0),!0===o.mandatory&&(n.disabled=!0),i.setContent(n),i.title="",t.cellView.setOption("toggle",n),n},setValue:d},{text:n.getNLSValue("Column.Width"),dataIndex:"width",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:l,setValue:c},{text:n.getNLSValue("Column.MinWidth"),dataIndex:"minWidth",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:l,setValue:c}],a=(o=new T(s)).getDocument(),r=0;r<i.length;r++)a.addRoot(new N({label:r.toString(),grid:e.merge({colName:u.getColumnDisplayValue(i[r])},i[r])}));return o},D=function(t,s,g){var p;e.is(f)&&(m={},y=t,t.forEach((function(t){var i,o=s[t],r=v(o),l=new I("div",{class:t+"-Content ViewPreferencesUI-TabContent"}),c=new I("div",{class:"tlv-section"}),d=new I("div",{class:"grouping-chip-section"}),p=new I("div",{class:"chip-container"}),h=new I("label",{class:"chip-label",text:n.getNLSValue("ViewPreferencesUI.Group")}).inject(d);F[t]=new a({placeholder:n.getNLSValue("ViewPreferencesUI.GroupByChipPlaceholder"),identifier:"UniqueIdentifier_selectionChip"+t,acceptDrop:function(e){return console.log("options",e),!0},onDropBlank:function(n,i){let o=F[t].getAllChipsAsLabels(),a=n.dataTransfer.getData("Text"),r=JSON.parse(a);if(r){let n=r.data["dswebux/x-tree.treenodemodel+json"];if(n)for(let a=n.length-1;a>=0;a--)if(-1===o.indexOf(n[a].grid.colName)){let o={id:F[t]._items.length+t,label:e.is(n[a].grid.attribute.colName)?n[a].grid.attribute.colName:n[a].grid.colName,value:n[a].label,index:F[t]._items.length};e.is(i&&i.dropIndex)&&(o.index="right"===i.dropPosition?i.dropIndex+1:i.dropIndex),F[t].addChip(o)}}}}),F[t].inject(p),h.inject(d),p.inject(d);let D=s[t],b=[];for(let n=0;n<D.length;n++)if(D[n].group){let i={id:D[n].chipID,label:u.getColumnDisplayValue(D[n]),value:n,index:D[n].chipPosition};b[D[n].chipPosition]=i,e.is(L[t])||(L[t]=D[n].ViewUUID)}if(b.length>0){for(let e=0;e<b.length;e++)F[t].addChip(b[e]);F[t]._uuid=L[t]}m[t]=r,r.inject(c),c.inject(l),d.inject(l),(i=f.add({label:n.getNLSValue("ViewPreferencesUI."+t+".TabTitle"),content:l,index:f.getPageCount(),icon:"table",isSelected:0===f.getPageCount()})).button.elements.container.addClassName(t+"-TabButton"),e.is(g[t])&&i.button.elements.iconPlaceholder.setContent(g[t])})),f.addEventListener("change",(function(t){if(e.is(t.dsModel)&&e.is(t.dsModel.value)){let n=y[t.dsModel.value[0]],i=d.buttons.Apply;"RPPMOD"!==n&&"DCPMOD"!==n&&"DCCLMOD"!==n||!e.is(i)?i.disabled=!1:i.disabled=!0}})),i.useRootStorage()&&(p=new o(d,r,l,c),f.add({id:"store-view-block",index:f.getPageCount(),icon:n.getIconURLFromKey("StoreViews"),label:n.getNLSValue("ViewPreferencesUI.StoreView.TabTitle"),content:p.getContent()})))},C=function(t){var n={name:null,dataIndex:null,dicoType:null,entity:null};return e.is(t)&&(n=e.is(t,"array")?t.map((function(t){var n={name:null,dataIndex:null,dicoType:null,entity:null};return e.is(t)&&(n.name=e.is(t.name)?t.name:null,n.dataIndex=e.is(t.dataIndex)?t.dataIndex:null,n.dicoType=e.is(t.dicoType)?t.dicoType:null,n.entity=e.is(t.entity)?t.entity:null),n})):{name:e.is(t.name)?t.name:null,dataIndex:e.is(t.dataIndex)?t.dataIndex:null,dicoType:e.is(t.dicoType)?t.dicoType:null,entity:e.is(t.entity)?t.entity:null}),n},w=function(){var t,n,i,o={};for(t in m)if(Object.prototype.hasOwnProperty.call(m,t)){let a=[];e.is(F[t]._items,"array")&&(a=F[t]._items.map((e=>e.chipOptions.label))),o[t]=[],n=m[t],i=e.is(n)&&e.is(n.getRoots,"function")?n.getRoots():null,e.is(i,"array")&&(o[t]=i.map((function(n){var i,o=null,r=null;return e.is(n)&&e.is(n.options)&&e.is(n.options.grid)&&(r=n.options.grid,o={attribute:C(r.attribute),colVisibility:r.colVisibility,dataIndex:r.dataIndex,width:r.width,displayType:r.displayType,minWidth:r.minWidth,group:a.indexOf(u.getColumnDisplayValue(o))>-1},e.is(o.group,"boolean")&&o.group&&(i=F[t].getChipPosition(u.getColumnDisplayValue(o)),o.chipPosition=i,o.chipID=F[t]._items[i].chipOptions.id,o.chipIndex=F[t]._items[i].chipOptions.index,o.ViewUUID=F[t].getUUID())),o})))}return o},{name:"ViewPreferencesUI",buildView:function(t,n){return e.is(d)&&d.close(),p(n),h(),D(t.views,t.viewPreferences,t.viewIcons),d}}}})),define("DS/DELPPWViewPlugins/TreeViewPlugin/TreeViewPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWViewPlugins/TreeViewPlugin/ViewPreferencesUI","DS/DELPPWViewPlugins/TreeViewPlugin/LayoutPreferencesUI","DS/CoreEvents/Events"],(function(e,t,n,i,o,a){"use strict";return function(r){var s,l,u,c,d,g,m,f,p,h,v,D,b,w,C,y,I,S,_={Type:"type.reference",Reference:"referenceID.reference"},P={"type.group":"type.reference","referenceID.group":"PID.reference"},T={},N=new Set,x=new Set,V=[],F="",L=Object.create(null),E=[];return b=function(e){var t=-1;return v.some((function(n,i){var o=!1;return n.viewID===e&&(t=i,o=!0),o})),t},d=function(e){return(""!==s.getConfigurationPID()?s.getConfigurationPID()+"_":"")+e+"_ColumnPreferences"},g=function(e){return s.getPreference(d(e))},m=function(e,t){return s.setPreference(d(e),t)},f=function(){return s.getPreference("widgetLayoutStateValues")},p=function(e){s.setPreference("widgetLayoutStateValues",e)},h=function(i,o){var a,s,l,u,c,d=t.getXMLValues(o),f=g(i);if(f=e.is(f)?f:[],d=e.is(d)?e.clone(d.Config.Columns.Column):[],d=e.is(d,"array")?d:[d],u=r.getPlugins("AttributePlugin"),c=r.getPlugins("CfgColumnsPlugin"),e.is(u)&&e.is(c)){for(c=c.instance,u=u.instance,a=f.length-1;a>=0;a--){for(l=!1,s=d.length-1;s>=0;s--)if(u.getColumnInfos(d[s]).dataIndex===f[a].dataIndex){e.is(d[s].mandatory,"boolean")&&(f[a].colVisibility.mandatory=d[s].mandatory,d[s].mandatory&&(f[a].colVisibility.display=d[s].mandatory)),e.is(d[s].displayType)&&(f[a].displayType=d[s].displayType),l=!0,d.splice(s,1);break}l||f.splice(a,1)}const t=c.getConfigColDataIndexSet();d.filter((function(n){let i=!0;return e.owns(n,"displayType")&&"CFG"===n.displayType&&(t.has(n.dataIndex)||(i=!1)),i})).forEach((function(t){var i=u.getColumnInfos(t);f.push({colVisibility:{display:!e.is(t.display)||t.display,mandatory:!!e.is(t.mandatory)&&t.mandatory},dataIndex:i.dataIndex,attribute:i.attribute,width:e.is(t.width)?t.width:n.getNLSValue("ViewPreferencesUI.Auto"),minWidth:e.is(t.minWidth)?t.minWidth:"100"}),e.is(t.displayType)&&(f[f.length-1].displayType=t.displayType)})),m(i,f)}return f},D=function(){var t,o,a,s,l,u,c={views:[],viewPreferences:{},viewIcons:{}};o=r.getPlugins("AttributePlugin"),t=r.getPlugins("UXComponentsPlugin"),a=r.getPlugins("RootsPlugin"),s=r.getPlugins("DicoPlugin"),e.is(o)&&e.is(t)&&e.is(a)&&e.is(s)?(o=o.instance,t=t.instance,a=a.instance,s=s.instance,u=t.getComponent("WUXFrameWindowsManager").getFrameWindow(r.getConfig().appContext),l=new i(r,u,t,o,a,s),v.forEach((function(e){var t=g(e.viewID);c.views.push(e.viewID),c.viewPreferences[e.viewID]=t,e.viewIcon&&(c.viewIcons[e.viewID]=n.getIconElem(e.viewIcon))})),l.buildView(c,(function(t){var n,i;for(n in t)e.owns(t,n)&&(i=t[n],m(n,i));r.getMediator().notify("TreeViewPrefModified")})).show()):r.getLogger().debug("Attribute Plugin or UXComponents Plugin or Roots Plugin is not available.")},w=function(){var t,n,i,a={viewsInDockingZones:c,viewsInFreeZone:u};n=r.getPlugins("UXComponentsPlugin"),e.is(n)&&(n=n.instance,i=f(),(t=new o(l,n,r.getConfig().appContext,i,a)).showDialog((function(e){var n=t.decipherPreferencesFromButtonStates();Object.keys(n).forEach((t=>{e[t].display=!1,""!==n[t]&&(e[t].display=!0,e[t].viewType=n[t])})),p(e),r.getMediator().notify("widgetLayoutChanged")})))},C=function(t){return t&&e.is(T[t])?T[t]:[]},y=function(t,n){t&&n&&(e.is(T[t])||(T[t]=[]),T[t].push(n))},S=function(){var e,t=!1;for(e in T)if(Array.isArray(T[e])&&T[e].length>0){t=!0;break}return t},I=function(e){e&&(T[e]=[])},{name:"TreeViewPlugin",onStart:function(t){var n,i=r.getConfig(),o=[];v=[],c={},u={},s=r.getService("ConfigService"),e.is(s)||r.getLogger().debug("TreeViewPlugin initialization failed as ConfigService is not available"),l=r.getService("LayoutService"),e.is(l)||r.getLogger().debug("TreeViewPlugin initialization failed as LayoutService is not available"),V.push(r.addExternalListener("EditViewPreferencesCmd",D)),V.push(r.addExternalListener("LayoutPreferences",w)),e.is(i)&&e.is(i.ColumnManagers)&&Array.isArray(i.ColumnManagers.ColumnManagers)&&(n=function(e,t){require(i.ColumnManagers.ColumnManagers,(function(...t){E=t,e()}),(function(e){r.getLogger().debug("TreeViewPlugin initialization failed: Couldn't fetch Column Managers"),t(e)}))},o.push(new Promise(n.bind(this)))),Promise.all(o).then((function(){r.getLogger().debug("TreeViewPlugin initialization successful"),t()}),(function(){r.getLogger().debug("TreeViewPlugin initialization failed"),t()}))},onStop:function(){var e,t;for(E=[],v=null,c=null,u=null,e=0,t=V.length;e<t;e++)r.removeExternalListener(V[e]);V=[],N.clear()},getCustoColumnManagers:function(){return e.clone(E,!1)},registerViewforColumnPref:function(t){var n=!1;return e.is(t)&&(e.is(t.viewID)||e.is(t.columnConfigName))?-1===b(t.viewID)?(v.push(t),h(t.viewID,t.columnConfigName),n=!0):r.getLogger().debug(t.viewID+" Module has already registered for Column Preferences"):r.getLogger().debug(" viewID or columnConfigName has not been defined, so cannot register for  Column Preferences"),n},syncViewColumnPreferences:function(t){var n,i,o;if(e.is(t))return(n=b(t))>-1?(i=v[n],h(i.viewID,i.columnConfigName),o=this.getViewColumnPreferences(i.viewID)):r.getLogger().debug(t+" Module has already registered for Column Preferences"),o;r.getLogger().debug(" viewID has not been defined, so cannot sync Column Preferences")},getViewColumnPreferences:function(n,i){var o,a,s,l,u,c,d=r.getPlugins("AttributePlugin"),m=r.getPlugins("ResourcePlugin");if(e.is(d)&&e.is(m)){if(d=d.instance,m=m.instance,e.is(n)){if((o=b(n))>-1)a=g(n),u=v[o].columnConfigName,l=t.getXMLValues(u),s=e.is(l)?l.Config.Columns.Column:[],s=e.is(s,"array")?s:[s],a.forEach((function(t,n){s.some((function(i){var o,r=!1;return d.getColumnInfos(i).dataIndex===t.dataIndex&&(t.group&&(o={dataIndex:t.dataIndex,position:t.chipPosition}),a[n]=e.merge({isHidden:!t.colVisibility.display,width:t.width,minWidth:t.minWidth,groupingInfo:o},i),r=!0),r}))})),l.Config.Columns.Column=a;else{if(!e.is(i))return void r.getLogger().debug(n+" Module has not registered for Column Preferences");l=t.getXMLValues(i)}return e.is(l)&&(c=l.Config.Label,e.is(c)&&(L[n]=d.getLabelInfos(c))),e.is(l)?l.Config:void 0}r.getLogger().debug(" viewID has not been defined, so cannot retrieve Column Preferences")}else r.getLogger().debug("AttributePlugin or ResourcePlugin not available")},unRegisterViewforColumnPref:function(t){var n,i=!1;return e.is(t)?(n=b(t))>-1?(v.splice(n,1),i=!0):r.getLogger().debug(t+" Cannot unregister as Module is not registered for Column Preferences"):r.getLogger().debug(" viewID has not been defined, so cannot unRegister for  Column Preferences"),i},getLabelInfo:function(e){return L[e]},getViewLabelMap:function(){return L},registerViewforWidgetLayout:function(t){var n;e.is(t)&&(e.is(t.viewID)||e.is(t.viewType))?(n=t.viewID,e.is(t.dockArea)?e.is(c[n])?c[n].views.push(t.viewType):c[n]={views:[t.viewType],dockArea:t.dockArea}:e.is(u[n])?u[n].views.push(t.viewType):u[n]={views:[t.viewType]}):r.getLogger().debug("viewID or viewType has not been defined, so cannot register for Layout Preferences")},unregisterViewforWidgetLayout:function(t,n){var i,o,a,s=!1;return e.is(u[t])?i=u:e.is(c[t])&&(i=c),e.is(i)&&-1!==(a=(o=i[t]).views.indexOf(n))&&(o.views.splice(a,1),0===o.views.length&&delete i[t],s=!0),s||r.getLogger().debug('Cannot unregister as Module "'+t+'" or "'+n+'" is not registered for Layout Preferences'),s},setCurrentView:function(t,n){e.is(n)&&(e.is(t)||e.is(n.currentView))?e.is(u[t])?u[t].currentView=n.currentView:u[t]={currentView:n.currentView}:r.getLogger().debug("moduleId or currentView has not been defined, so cannot setup Module Current View")},updateViewPreferences:function(t,n,i){var o,a=g(t);Array.isArray(a)&&e.is(n)&&e.is(i)&&(o=a.detect((function(e){return e.dataIndex===n}),this),e.is(o)&&(Object.keys(i).forEach((function(e){if("visibility"===e)o.colVisibility.display=i.visibility;else r.getLogger().debug("Invalid option! No parameters to manage for the selected column!")})),m(t,a)))},getCurrentView:function(){return u},setActiveView:function(e){F=e},getActiveView:function(){return F},executeRefInstCommand:function(e,t){var n=r.getConfig().appContext,i=r.getPlugins("UXComponentsPlugin").instance.getComponent("WUXCommandsManager").getCommand(e,n);let o={displayName:t.displayName,PID:t.id,entity:t.entity,doNotDisplayCmdDialog:!0};i.execute(o)},executeCommand:function(t,n){var i,o,s,l=r.getConfig().appContext,u=r.getPlugins("UXComponentsPlugin").instance.getComponent("WUXCommandsManager"),c=u.getCommand(t,l);s=function(e){var t;return{displayName:(t=r.getPlugins("DatabasePlugin").instance.getReference(e.getReferencePID())).get("PLMEntity.V_Name"),id:t.get("PID"),revision:t.get("revision"),type:t.get("type")}},i=(n||{}).node,e.is(c)?(e.is(i)&&(o=s(i)),!0===i.fromXEN&&e.is(i.getParent()._treeDocument)?a.publish({event:"FacetCommandManager/executeCommand",data:{commandName:t,targetNode:o}}):c.execute(o)):(c=u.getCommandCheckHeader(t,l),e.is(c)&&!1===c.getState()&&(c.options.node={referencePID:i.getReferencePID(),instancePID:i.getInstancePID(),absPath:i.getAbsolutePath()},c.toggleState()))},addColumnForGrouping:function(e,t){y(e,t)},getColumnsForGrouping:function(e){return C(e)},isGroupingExist:function(){return S()},getGroupingAdditonalColumns:function(){return _},resetColumnsForGrouping:function(e){I(e)},getCollectionSpecificDataIndex:function(e){return P[e]},registerModuleForRecursiveGrouping:function(e){N.add(e)},doesModuleHaveRecursiveGrouping:function(e){return N.has(e)},unRegisterModuleForRecursiveGrouping:function(e){N.delete(e)},registerModuleColumnsAsImmutable:function(e){x.add(e)},areModuleColumnsImmutable:function(e){return x.has(e)}}}}));