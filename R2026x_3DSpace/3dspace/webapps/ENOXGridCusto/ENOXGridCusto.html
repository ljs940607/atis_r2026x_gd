<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" />
<html>

<head>

      <!-- Application Metas -->
      <title>Product Structure Explorer Table Customization</title>
      <meta name="author" content="Dassault SystÃ¨mes" />
      <meta name="brand" content="ENOVIA" />
      <meta name="autoRefresh" content="0" />
      <meta name="description" content="ENOVIA Product Structure Explorer Grid Customization" />
      <link rel="stylesheet" type="text/css" href="../Core/wux.css" />
      <link rel="stylesheet" type="text/css" href="./ENOXGridCusto.css" />
      <script type="text/javascript" src="../AmdLoader/AmdLoader.js"></script>
      <script type="text/javascript">
            var iframeContentWindow = null;
            var mepOrigin = null;
            var defaultJSON = null;
            var gridCusto = null;
            window.addEventListener('message', function(e) {
                  var data = e.data;
                  var eventName = "";
                  if (data && data.message) eventName = data.message;
                  if (eventName == "com.ds.mep:CustomDialogReady_msg") {
                        iframeContentWindow = e.source;
                        mepOrigin = e.origin;
                        defaultJSON = data.jsonData;
                        let tenantID = data.tenantID;
                        let lockState = data.lockState;
                        let compassConfig = data.compassConfig;
                        //ATE33 - IR-1373892 - Adding language parameter
                        require.config({
    	                        locale: compassConfig.lang
                        });
                        require(['DS/ENOXGridCusto/ENOXGridCusto'], function(ENOXGridCusto) {
                              'use strict';
                              gridCusto = new ENOXGridCusto({
                                    appId: 'ENOSC2D_AP',
                                    localWindow: window,
                                    frameCntWindow: iframeContentWindow,
                                    mepOrigin: mepOrigin,
                                    defaultJSON: JSON.parse(defaultJSON),
                                    targetId: 'product-explorer-gridcusto',
                                    tenantID: tenantID,
                                    lockState: lockState,
                                    compassConfig: compassConfig
                              });
                              gridCusto.initialize();
                        });
                  }
            });
      </script>
</head>

<body>
      <div id="product-explorer-gridcusto">
            <div class="gridcusto-loader-container" >
                  <span class="gridcusto-loader" />
            </div>
      </div>
</body>
</html>
