define("DS/IPClassificationAttributesUX/Utils/AlertBox",["UWA/Core","DS/UIKIT/Alert"],(function(e,t){"use strict";return{createAlertBox:function n(i){if(e.is(i,"string"))return n({message:i,fixed:!1});if(e.is(i,"object"))return n([i]);if(e.is(i,"array")){var a=i.map((function(t){let n="";if(e.is(t,"string")&&(n=t),e.is(t,"object")){n=t.message||"myNls.get(error.nls)";for(let[e,i]of Object.entries(t))n=n.replace("%"+e+"%",i);t.values&&(n=n+" <br/> "+t.values.map((e=>"&laquo; "+e+" &raquo;")).join(" - "))}return n}));let n=new t({visible:!0,autoHide:!0,hideDelay:2e3});return n.add({className:"error",message:1==a.length?a[0]:"<ol><li>"+a.join("</li><li>")+"</li></ol>"}),n}throw"Unexpected parameter type"}}})),define("DS/IPClassificationAttributesUX/Utils/AttributesUtil",["UWA/Class","DS/TreeModel/TreeNodeModel","DS/WebappsUtils/WebappsUtils"],(function(e,t,n){"use strict";return e.singleton({init:function(){this._parent({})},uppendChangestoList:function(e){if(e&&e.Name){let n=this.updatedNodes[e.Name];if(!n){var t=e.attrType.charAt(0).toUpperCase()+e.attrType.slice(1);n={Name:e.Name,Owner:"ClassificationAttributes",Nature:"Attribute",Type:"Real"==t?"Double":t},"String"==t&&(n.MaxLength="0")}e.nameNLS&&!n.NameNLS&&(n.NameNLS=e.nameNLS),n.AuthorizedValuesNLS=[],Object.keys(e.nlsRanges).length>0&&(n.AuthorizedValuesNLS=Object.values(e.nlsRanges));let i=e.authorizedValues?e.authorizedValues.split(";"):[],a=e.originalRange?e.originalRange:[];i.length>0&&(n.AuthorizedValues||(n.AuthorizedValues=[],n.HasRangeDefined="Yes"),i.forEach((function(e){var i="";if("Real"==t||"real"==t||"Double"==t||"double"==t){for(var o in a)if(Number(a[o])==Number(e)){i=a[o];break}0==i.length&&(i="add:"+e)}else i=a.includes(e)?"":"add:"+e;0==i.trim().length||n.AuthorizedValues.includes(i.trim())||n.AuthorizedValues.push(i.trim())}))),this.updatedNodes[e.Name]=n}},checkRange:function(e,t,n,i,a){var o=(n?n.split(";"):[]).map((e=>e.trim())).filter((e=>e.length>0)),s=t?t.split(";").filter((e=>!o.includes(e)&&i&&i.includes(e))):[];s.length&&(a.push({fixed:!0,nls:"attrRangeMissingValue",values:s}),o=o.concat(s));var r,l=o.filter(((e,t)=>o.indexOf(e)==t)),d=o.filter(((e,t)=>o.indexOf(e)!=t));(d.length>0&&(a.push({fixed:!0,nls:"attrRangeErrDupValue",values:d.filter(((e,t)=>d.indexOf(e)==t))}),o=l),"Integer"==e||"integer"==e)&&((r=o.filter((e=>!/^[-+]?[0-9]+$/.test(e)))).length&&a.push({fixed:!1,nls:"attrRangeErrInteger",values:r}));"Double"!=e&&"double"!=e&&"real"!=e||(r=o.filter((function(e){return!new RegExp("^[-+]?\\d+(\\.\\d+)?$").test(e)}))).length&&a.push({fixed:!1,nls:"attrRangeErrDouble",values:r});"String"!=e&&"string"!=e||(r=o.filter((e=>!/^[a-zA-Z0-9]+$/.test(e)))).length&&a.push({fixed:!1,nls:"attrRangeErrAlphanumeric",values:r});return o=(o=o.map((e=>e.trim()))).filter((e=>e.length>0)),"String"==e&&(o=o.sort()),"Integer"==e&&(o=o.sort(((e,t)=>parseInt("0"+e)-parseInt("0"+t)))),o},formatObjectToSend:function(e){return{interfaceName:"ExportInternalAttributes",attributes:e}},buildObjectToDelete:function(e){if(e&&Array.isArray(e))var t={attributes:e,appId:"ENOWSLI_AP"};return t}})})),define("DS/IPClassificationAttributesUX/dataprovider/ClassificationAttributesDataProvider",["UWA/Class","UWA/Promise","DS/IPClassifyUtil/IPClassifyUtility","DS/IPClassifyUtil/service/IPClassifyUtilWebService","DS/IPClassifyUX/utils/IPClassifyWidgetData"],(function(e,t,n,i,a){"use strict";var o={},s={};return e.singleton({init:function(){this._parent({}),this.Dimensions={},this.Predicates={},this.Dictionary={}},isGlobalAttributeTab:function(){return 1==a.getWidgetData().currentWidgetTab},upgradeClassAttributes:function(e){var t=i.upgradeClassAttributes.bind(i),n={timeout:5e5,method:"POST",data:JSON.stringify(e)};return this._sendRequest(t,n)},updateAttributeInfos:function(e){var t=i.updateAttributeInfos.bind(i),n={timeout:5e5,method:"POST",data:JSON.stringify(e)};return this._sendRequest(t,n)},reloadCache:function(){var e=i.reloadCache.bind(i);return this._sendRequest(e,{timeout:6e4,method:"GET"})},getPredicates:function(e){var n=this;if(!n.Predicates[e.tenantUrl]){n.Predicates[e.tenantUrl]={ready:t.deferred()};var a=i.getPredicates.bind(i);n._sendRequest(a,{timeout:6e4,method:"GET",mappable:!0}).then((function(t){var i={};null!=t&&(t="string"==typeof t?JSON.parse(t):t,Object.keys(t).forEach((function(e){var n={};null!=t[e].properties&&t[e].properties.forEach((function(e){var t=e.dataType,i=t.substring(t.lastIndexOf("#")+1);i=i.includes("date")?"date":i,n[i]||(n[i]=[]),n[i].push(e)})),Object.keys(n).forEach((function(e){n[e].sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}))})),i[t[e].label]=n}))),n.Predicates[e.tenantUrl].ready.resolve(i),console.info("Predicates loaded")}),(function(t){console.log("Unable to get Predicates : "),console.log(t),n.Predicates[e.tenantUrl].ready.reject(nls.get("FAILED_TO_FETCH_PREDICATES")),delete n.Predicates[e.tenantUrl]}))}return n.Predicates[e.tenantUrl].ready},getDimensions:function(e){var n=this;if(!n.Dimensions[e.tenantUrl]){n.Dimensions[e.tenantUrl]={ready:t.deferred()};var a=i.getDimensionsInfos.bind(i);n._sendRequest(a,{timeout:6e4,method:"GET"}).then((function(t){t="string"==typeof t?JSON.parse(t):t,n.Dimensions[e.tenantUrl].ready.resolve(t),console.info("Dimensions loaded")}),(function(t){console.info("Dimensions load : failed"),console.log(t),n.Dimensions[e.tenantUrl].ready.reject(nls.get("FAILED_TO_FETCH_DIMENSIONAL_ATTRIBUTES")),delete n.Dimensions[e.tenantUrl]}))}return n.Dimensions[e.tenantUrl].ready},setSavedNlsRanges:function(e,t){e?s[e]=t:s={}},getSavedNlsRanges:function(e){return s[e]?s[e]:{}},updateClassAttributes:function(e){var t=i.updateClassAttributesMql.bind(i),n={timeout:5e5,method:"POST",type:"json",data:JSON.stringify(e)};return this._sendRequest(t,n)},attributeDeleteCheck:function(e){var t=i.attributeDeleteCheck.bind(i),n={timeout:5e5,method:"POST",type:"json",data:JSON.stringify(e)};return this._sendRequest(t,n)},removeClassificationInterfaces:function(e){var t=i.removeClassificationInterfaces.bind(i),n={timeout:5e5,method:"POST",type:"json",data:JSON.stringify(e)};return this._sendRequest(t,n)},restoreSybolicNames:function(e){var t=i.restoreSybolicNames.bind(i),n={timeout:5e5,method:"POST",type:"json",package:o.package_name,data:JSON.stringify(e)};return this._sendRequest(t,n)},deleteClassAttributes:function(e){var t=i.deleteClassificationAttribute.bind(i),n={timeout:5e5,method:"POST",type:"json",package:o.package_name,data:JSON.stringify(e)};return this._sendRequest(t,n)},checkIfSymbolicNameExists:function(e){var t=i.checkIfSymbolicNameExists.bind(i),n={timeout:5e5,method:"POST",type:"json",data:JSON.stringify(e)};return this._sendRequest(t,n)},createClassificationAttributes:function(e){var t=i.createAttributes.bind(i),n={timeout:5e5,method:"POST",type:"json",package:o.package_name,data:JSON.stringify(e)};return this._sendRequest(t,n)},launchExport:function(){console.log("launchExporProcess");var e=JSON.parse(txtConf),t=i.launchExport.bind(i),n={method:"GET",type:"blob",package:e.package_name,headers:{Accept:"application/zip","Content-Type":"application/zip","Accept-Language":widget.lang}};return this._sendRequest(t,n)},launchImport:function(e){if(console.log("launchImportProcess"),e.type.match(/application\/x-zip-compressed/)){var t=i.launchImport.bind(i),n=new FormData;n.append("ClassificationAttributeszip",e,e.name);var a={method:"POST",type:"multipart/form-data",package:o.package_name,data:n,headers:{Accept:"multipart/form-data"}};return this._sendRequest(t,a)}this.userMessaging.add({className:"error",message:nls.importBadFileExtension}),AlertBox.createAlertBox({nls:"importBadFileExtension"}).inject(a.headerDiv)},massupdateAttributeInfos:function(e){if(console.log("Updating attribute info"),e.type.match(/application\/x-zip-compressed/)){var t=new FormData;t.append("ClassificationAttributeszip",e,e.name);var n=i.massupdateAttributeInfos.bind(i),a={method:"POST",type:"multipart/form-data",package:o.package_name,data:t,headers:{Accept:"multipart/form-data"}};return this._sendRequest(n,a)}this.userMessaging.add({className:"error",message:nls.importBadFileExtension}),AlertBox.createAlertBox({nls:"importBadFileExtension"}).inject(a.headerDiv)},_sendRequest:function(e,t){return new Promise((function(i,a){n.initURLSAsync().then((function(){var o={timeout:18e5,tenant:n.getTenantId(),securityContextRequired:!0,headers:{"Content-Type":"application/json"}},s=UWA.extend(o,t);t.headers&&(s.headers=UWA.extend(o.headers,t.headers)),s.onComplete=function(e){i(e)},s.onFailure=function(e,t){console.log("Request failled"),console.log(e),console.log(t);var n="";try{if("DictionaryException"in(t="string"==typeof t?JSON.parse(t):t)){const e=t.DictionaryException,{Status:i,Message:a}=e;n=i.contains("403")&&a.contains("forbidden")?nls.OperationForbiden:t.DictionaryException.Message}else n=nls.Internal_Error}catch(e){n=nls.Internal_Error}a(n)},s.onTimeout=function(e,t){a({type:"timeout",error:e,data:t})},e(s)}))}))}})})),define("DS/IPClassificationAttributesUX/Views/ClassificationAttributesCancelEdit",["UWA/Class","DS/IPClassifyUtil/IPClassifyAlert","DS/IPClassifyUXUtil/IPClassifyConfirmation","DS/IPClassifyUX/utils/IPClassifyWidgetData","DS/IPClassificationAttributesUX/dataprovider/ClassificationAttributesDataProvider","DS/IPClassificationAttributesUX/Utils/AttributesUtil"],(function(e,t,n,i,a,o){"use strict";return e.extend({name:"IPClassificationAttributes",init:function(){},cancelChanges:function(e){var t=e.context,n=t.options.views?t.options.views.datagridview:void 0;if(n){var o=n.options.dgvLayout.getLeafColumns();o&&Array.isArray(o)&&o.forEach((function(t){t.getCellEditableState=function(e){return!1},t.toggleToEdit&&!0===t.toggleToEdit&&(t.getCellTypeRepresentation=function(e){return"string"}),"AuthorizedValues"===t.dataIndex&&(t.getCellValue=function(t){if(t.nodeModel){let n=t.nodeModel.getAttributeValue("AuthorizedValues"),i=e.ClassificationAttributeUtil.getOldNodeValues()[t.nodeModel.options.grid.Name];return i&&(n=i,t.nodeModel.options.grid.AuthorizedValues=n),{label:n,func:"",module:""}}})})),n.options.dgv.treeDocument.cancelChanges(),n.options.dgv.treeDocument.setUseChangeTransactionMode(!1),n.options.dgv.getModel().updateRenderedColumn("AuthorizedValues",{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0),i.setIsEditModeEnabled(!1),e.ClassificationAttributeControl.getContent().RefreshProductStructure=!1,a.reloadCache().then((function(){e.ClassificationAttributeControl.getContent().loadContentAndSelect()}),(function(t){e.ClassificationAttributeControl.getContent().loadContentAndSelect()})),e.ClassificationAttributeUtil.emptyOldNodeValues(),e.ClassificationAttributeUtil.emptyUpdatedNodes(),e.ClassificationAttributeCommandManager.updateCommands(),e.ClassificationAttributeUtil.emptyProhibitedOperations(),a.setSavedNlsRanges(void 0,{})}}})})),define("DS/IPClassificationAttributesUX/Views/ClassificationAttributesEdit",["UWA/Class","DS/IPClassifyUtil/IPClassifyAlert","DS/IPClassifyUXUtil/IPClassifyConfirmation","DS/IPClassifyUX/utils/IPClassifyWidgetData","DS/IPClassificationAttributesUX/dataprovider/ClassificationAttributesDataProvider","DS/IPClassificationAttributesUX/Utils/AttributesUtil"],(function(e,t,n,i,a,o){"use strict";return e.extend({name:"IPClassificationAttributes",init:function(){},enableModification:function(e){e.ClassificationUtil.emptyUpdatedNodes();var t=e.context,n=t.options.views?t.options.views.datagridview:void 0;if(n){try{var a=n.options.dgv.layout.getColumnIndex("AuthorizedValues"),o=n.options.dgv.getRowModelLength();if(o)for(var s=0;s<o;s++){var r=n.options.dgv.layout.getCellIDFromCoordinates({rowID:s,columnID:a}),l=n.options.dgv.getCellInfosAt(r);l&&e.ClassificationUtil.storeOldNodeValues(l.nodeModel.options.grid.Name,l.nodeModel.getAttributeValue("AuthorizedValues"))}}catch(e){}var d=n.options.dgvLayout.getLeafColumns();d&&Array.isArray(d)&&d.forEach((function(e){e.getCellEditableState=function(t){try{if("DefaultValue"===e.dataIndex)return"TRUE"==t.nodeModel.options.grid.values.hasDefault}catch(e){console.log(e)}return!0===e.toggleToEdit},"AuthorizedValues"===e.dataIndex&&(e.getCellTypeRepresentation=function(e){return"url"},e.getCellValue=function(e){if(e.nodeModel)return e.nodeModel.options.grid.AuthorizedValues&&e.nodeModel.options.grid.AuthorizedValues.length>0?{label:e.nodeModel.getAttributeValue("AuthorizedValues"),func:"valuesClickAction",module:"DS/IPClassificationAttributesUX/Utils/EventHandler"}:{label:e.nodeModel.getAttributeValue("AuthorizedValues"),func:"",module:""}},e.setCellValue=function(e,t){if(e.nodeModel){var n={grid:{}};t.hasOwnProperty("label")&&(n.grid.AuthorizedValues=t.label),e.nodeModel.updateOptions(n)}}),"DefaultValue"===e.dataIndex&&(e.getCellTypeRepresentation=function(e){if(e.nodeModel&&e.nodeModel.options.grid.values.type){var t=e.nodeModel.options.grid.values.type;return"boolean"==t.toLowerCase()||e.nodeModel.options.grid.AuthorizedValues?"string":"date/time"==t.toLowerCase()||"timestamp"==t.toLowerCase()?"date":"real"==t.toLowerCase()?"double":e.nodeModel.options.grid.values.type.toLowerCase()}return"string"},e.getCellSemantics=function(e){if(e.nodeModel&&e.nodeModel.options.grid.values.type){if("boolean"===e.nodeModel.options.grid.values.type.toLowerCase())return{possibleValues:["false","true"]};var t=e.nodeModel.options.grid.AuthorizedValues;if(t)return{possibleValues:t.split(",")}}return{}})})),n.options.dgv.treeDocument.setUseChangeTransactionMode(!0),n.options.dgv.getModel().updateRenderedColumn("AuthorizedValues",{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0),i.setIsEditModeEnabled(!0),e.CommandManager.updateCommands()}},saveModification:function(e){if(Object.keys(e.someProhibitedOperations).length>0){var n="";return Object.keys(e.someProhibitedOperations).forEach((function(e){n=Nls[e]+"<br>"+someProhibitedOperations[e].join("<br>")})),void t.displayNotification({message:n,className:"error"})}0!=Object.keys(e.updatedNodes).length?(Object.keys(e.updatedNodes).length>=1&&e.ClassificationAttributeControl.getContent().getView().webUXLoader(!0,"Updating"),a.updateClassAttributes(o.formatObjectToSend(e.updatedNodes)).then((function(t){var n=e.context,o=n.options.views?n.options.views.datagridview:void 0;if(o){var s=o.options.dgvLayout.getLeafColumns();s&&Array.isArray(s)&&s.forEach((function(e){e.toggleToEdit&&!0===e.toggleToEdit&&(e.getCellEditableState=function(e){return!1},e.getCellTypeRepresentation=function(e){return"string"}),"AuthorizedValues"===e.dataIndex&&(e.getCellValue=function(e){if(e.nodeModel)return{label:e.nodeModel.getAttributeValue("AuthorizedValues"),url:""}})})),o.options.dgv.treeDocument.acceptChanges(),o.options.dgv.treeDocument.setUseChangeTransactionMode(!1),o.options.dgv.getModel().updateRenderedColumn("AuthorizedValues",{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0),e.ClassificationAttributeControl.getContent().RefreshProductStructure=!0,a.reloadCache().then((function(){e.ClassificationAttributeControl.getContent().loadContentAndSelect()}),(function(t){e.ClassificationAttributeControl.getContent().loadContentAndSelect()})),e.ClassificationAttributeUtil.emptyOldNodeValues(),e.ClassificationAttributeUtil.emptyUpdatedNodes(),e.ClassificationAttributeUtil.emptyProhibitedOperations(),i.setIsEditModeEnabled(!1),e.ClassificationAttributesCommandManager.updateCommands()}}),(function(e){LibraryCommands._commonError("SaveUpdatesCmd",Nls.msg_error_updateClassAttributes,e)}))):t.displayNotification({message:Nls.noAttributetoUpdate,className:"warning"})}})})),define("DS/IPClassificationAttributesUX/Views/ClassificationAttributesDelete",["UWA/Class","DS/IPClassifyUtil/IPClassifyAlert","DS/IPClassificationAttributesUX/Utils/AttributesUtil","DS/IPClassifyUXUtil/IPClassifyConfirmation","DS/IPClassificationAttributesUX/dataprovider/ClassificationAttributesDataProvider"],(function(e,t,n,i,a){"use strict";return e.extend({name:"IPClassificationAttributes",init:function(){},loadDeleteAttributesPanel:function(e){var o=[],s=e.selected_nodes;if(s.length>0){var r=[],l=[];if(s.forEach((function(e){"Attribute"===e.plmType&&("false"==e.options.grid.values.isInDico?l.push(UWA.is(e.options.label)?e.options.label:e.options.grid.Name):(o.push(e),e.getLabel=()=>e.options.grid.Name,r.push(UWA.is(e.options.grid.Name)?e.options.grid.Name:e.id)))})),0==r.length&&l.length>0)return void t.displayNotification({message:e.Nls.msg_delete_attributesNotPossibleHere+"\n"+e.Nls.msg_delete_attributesNotPossibleSuffix,className:"warning"});var d={confirmationBoxText:e.Nls.msg_singleAttributeCheckbox,titleLabel:e.Nls.title_delete+" - "+r[0],warningMessage:e.Nls.replace(e.Nls.msg_deleteMultipleAttributeWarning,{attributeName:r[0]}),moreInfo:e.Nls.msg_deleteSingleAttributeMoreInfo1+" "+e.Nls.msg_deleteSingleAttributeMoreInfo2};d.enableConfirmationBox=!0,l.length>0&&(d.moreInfo=d.moreInfo+"<br><br>"+e.Nls.msgNoteDeleteAttr),l.length,r.length>1&&(this.createDataForDGV(d,o,e.Nls),d.showDGV=!0,d.titleLabel=e.Nls.replace(e.Nls.TitleAttributesDelete,{number:r.length}),d.confirmationBoxText=e.Nls.msg_multipleAttributeCheckbox,d.warningMessage=e.Nls.msg_deleteMultipleAttributeWarning,d.moreInfo=e.Nls.msg_deleteMultipleAttributeMoreInfo1+"<br>"+e.Nls.msg_deleteMultipleAttributeMoreInfo2),i.confirmDialog(d,(function(){var t=n.buildObjectToDelete(r);a.deleteClassAttributes(t).then((function(t){e.ClassificationAttributesControl.getContent().loadContentAndSelect()}))}))}else t.displayNotification({message:Nls.msg_warning_noAttributeSelected,className:"warning"})},createDataForDGV:function(e,t,n){var i=[],a=[{dataIndex:"Tree",text:n.Name},{dataIndex:"Type",text:n.Type},{dataIndex:"Predicate",text:n.column_Predicates},{dataIndex:"Title",text:n.Title}];n.cannotBeDeleted,n.toBeDeleted;let o="nls_"+widget.lang.toUpperCase();t.forEach((function(e){var t={};t.Tree=e.options.grid.Name,t.Type=e.options.type,t.Predicate=e.options.grid.Predicates,t.Title=e.options.grid[o]?e.options.grid[o]:e.options.grid.nls_EN,i.push(t)})),e.cols=a,e.data=i}})})),define("DS/IPClassificationAttributesUX/Views/AttrRangeCreateForm",["DS/UIKIT/Modal","DS/UIKIT/Input/Text","DS/IPClassificationAttributesUX/Utils/AlertBox","DS/IPClassificationAttributesUX/Utils/AttributesUtil","i18n!DS/IPClassificationAttributesUX/assets/nls/IPClassificationAttributesUX"],(function(e,t,n,i,a){function o(e,t){var n={};return n.en=t("en",e.en,a.englishNLS),n.fr=t("fr",e.fr,a.frenchNLS),n.de=t("de",e.de,a.germanNLS),n.ja=t("ja",e.ja,a.japeneseNLS),n.ko=t("ko",e.ko,a.koreanNLS),n.ru=t("ru",e.ru,a.russianNLS),n.zh=t("zh",e.zh,a.chineseNLS),UWA.merge(n,e)}function s(e){if(!(this instanceof s))throw new TypeError("AttrRangeCreateForm constructor cannot be called as a function.");var t=this;this.options=UWA.extend({onShow:function(){},onHide:function(){},onSave:function(e){return!0},onError:function(e){}},e),this.nlsRange=e.nlsRange||{},this.editMode=e.editMode,this.searchOpen=!1,this.rangeFromDico=e.rangeFromDico,this._rangeInit=e.rangeList.map((function(e){return o({value:e},(n=>(t.nlsRange[e]||{})[n]||""))})),this._rangeEdit=this._rangeInit.map((function(e){return o(e,t.getNLSInput)}))}return s.prototype={constructor:s,getNLSRange:function(){return this._rangeEdit.reduce((function(e,t){return e[t.value]=o(t,((e,t)=>t.value)),e}),{})},getNLSInput:function(e,t,n){return UWA.createElement("input",{type:"text",class:"form-control",value:t,"data-init":t})},getTableDataElement:function(e){return UWA.createElement("td",{colspan:"1",align:"left",width:e.width})},getTableHeaderElement:function(e){var t=UWA.createElement("p",{text:e.headerName,class:""}),n=UWA.createElement("th",{colspan:"1",align:"left",width:e.width,"white-space":"nowrap",overflow:"hidden",id:e.headerId});return t.inject(n),n},getTable:function(e,n){var i=this,s=UWA.createElement("div",{class:"tableDiv"}).inject(e);s.setStyle("height","300px"),s.setStyle("overflow-x","auto");var r=UWA.createElement("table",{class:"table",id:"attrTable"}).inject(s);r.setStyle("max-width","unset"),r.setStyle("table-layout","fixed");var l=UWA.createElement("thead",{class:"attrthead",id:"attrthead"}).inject(r),d=UWA.createElement("tr").inject(l);d.setStyle("background","whitesmoke"),d.setStyle("position","sticky"),d.setStyle("top","0");var u=this.getTableHeaderElement({headerName:a.attrRangeTableHeader,width:"250px",headerId:"nameColumn"}).inject(d),c=(o({},(function(e,t,n){return i.getTableHeaderElement({headerName:n,width:"250px",headerId:"Trans"+e.toUpperCase()}).inject(d)})),UWA.createElement("tbody",{class:"attrtbody",id:"attrtbody"}).inject(r)),p=u.getElementsByTagName("p")[0];p.setStyle("cursor","pointer");var f=UWA.createElement("a",{class:"fonticon fonticon-search"});f.inject(p),f.setStyle("text-decoration","none"),f.setStyle("padding-left","5px");var g=new t({});g.inject(u),g.elements.input.setStyle("display","none");var m=[];function h(e){var t=g.getValue().toUpperCase(),n=e.getElementsByTagName("td")[0];n&&n.firstChild.value.toUpperCase().startsWith(t)?e.style.display="":e.style.display="none"}return f.onclick=function(){this.searchOpen?(g.elements.input.setStyle("display","none"),this.searchOpen=!1):(g.elements.input.setStyle("display","inline-block"),this.searchOpen=!0)},g.elements.input.onkeyup=function(){m.forEach(h)},function(e){return m.forEach((e=>e.destroy())),m=e.map((function(e,a){var s=UWA.createElement("tr").inject(c);return new t({id:"range_"+a,value:e.value}).inject(i.getTableDataElement({width:"250px"}).inject(s)).setDisabled(!0),o(e,(function(e,t){t.id="NLSValue_"+e+"_"+a,t.disabled=!n,t.inject(i.getTableDataElement({width:"250px"}).inject(s))})),h(s),s}))}},getTextRange:function(e){var n=new t({id:"rangeInput"});return n.elements.input.setStyle("margin-bottom","10px"),n.CustomValidate=function(){let t=!0;if("String"==e.attrType||"string"==e.attrType){this.getValue().split(";").forEach(((e,n)=>{e=e.trim();var i=new RegExp("^[a-zA-Z0-9]+$");e.length>0&&!i.test(e)&&(t=!1)}))}else if("Integer"==e.attrType||"integer"==e.attrType){this.getValue().split(";").forEach(((e,n)=>{e=e.trim();var i=new RegExp("^[-+]?[0-9]+$");e.length>0&&!i.test(e)&&(t=!1)}))}else if("Double"==e.attrType||"double"==e.attrType||"real"==e.attrType){this.getValue().split(";").forEach(((e,n)=>{e=e.trim();var i=new RegExp("^[-+]?\\d+(\\.\\d+)?$");e.length>0&&!i.test(e)&&(t=!1)}))}return t?this.elements.input.style.borderColor=null:this.elements.input.setStyle("border-color","#EA4F37"),t},n.onChange=function(){var t=[],n=e.onChange(this.getValue(),t),i=t.reduce(((e,t)=>e&&t.fixed),!0);this.setValue(n),this.elements.input.style.borderColor=i?null:"#EA4F37"},n},formModal:function(t){var n=UWA.createElement("div",{class:"global-div"}),i=(UWA.createElement("nav",{class:"tab tab-pills",id:"the-forms"}).inject(n),UWA.createElement("h4",{text:a.attrRangeTableTitle}).inject(n),new e({className:"fancy",visible:!0,closable:!0,header:n,body:t.form,footer:"<button type='button' id='SaveButton' class='btn btn-primary'>"+UWA.String.escapeHTML(a.attrRangeTableClose)+"</button><button type='button' id='CancelBtn' class='btn btn-default'>"+UWA.String.escapeHTML(a.attrRangeTableCancel)+"</button> ",renderTo:t.container,events:{onHide:function(){UWA.log("the Modal Closed2"),i.destroy(),t.onHide()},onShow:function(){t.onShow(),UWA.log("the Modal shown2")}}}));return t.editMode||(i.getFooter().getElement("#SaveButton").hidden=!0,i.getFooter().getElement("#CancelBtn").hidden=!0),i.getFooter().getElement("#SaveButton").addEvent("click",(function(){t.onSave()&&i.hide()})),i.getFooter().getElement("#CancelBtn").addEvent("click",(function(){t.onCancel()&&i.hide()})),i.elements.wrapper.setStyle("width","800px"),i},updateRangeList:function(e){var t=this;this._rangeEdit=e.map((function(e){var n=t._rangeInit.find((t=>t.value==e))||o({value:e},(e=>""));return t._rangeEdit.find((t=>t.value==e))||o(n,t.getNLSInput)}))},launchPanel:function(e){let t=this,a=e.editMode||this.editMode,s=e.attrName||this.options.attrName;UWA.log("add_type action");var r=UWA.createElement("div",{id:"myContent"}),l=UWA.createElement("div",{id:"got-tab-sample",class:"tab"});if(l.setStyle("justify-content","center"),l.inject(r),s){var d=UWA.createElement("h4");d.inject(l);var u=UWA.createElement("span",{class:"badge font-3dsregular badge-default",text:s});u.setStyle("padding-left","50px"),u.setStyle("padding-right","50px"),u.setStyle("padding-top","5px"),u.setStyle("padding-bottom","5px"),u.inject(d)}var c=this._rangeInit.map((e=>e.value)).join(";");function p(e,a){var o=i.checkRange(t.options.attrType,c,e,t.options.rangeFromDico,a);return a.reduce(((e,t)=>e&&t.fixed),!0)&&(t.updateRangeList(o),g(t._rangeEdit)),a.length&&(n.createAlertBox(a).inject(m.elements.header),t.options.onError(a)),o.join(";")}var f=this.getTextRange({attrType:this.options.attrType,onError:this.options.onError,onChange:p}),g=this.getTable(r,a),m=this.formModal({form:r,editMode:a,container:this.options.container,onShow:this.options.onShow,onHide:this.options.onHide,onSave:function(){var e=[],n=p(f.getValue(),e);return!!(e.reduce(((e,t)=>e&&t.fixed),!0)&&f.CustomValidate()&&t.options.onSave(n))&&(f.setValue(n),!0)},onCancel:function(){return t._rangeEdit.forEach((function(e){o(e,(function(e,t){return t.value=t.dataset.init,t}))})),f.setValue(h),t.updateRangeList(c.split(";")),g(t._rangeEdit),!0}}),h=p(this._rangeEdit.map((e=>e.value)).join(";"),[]);f.parent=m,f.setDisabled(!a),f.inject(l),f.setValue(h),g(this._rangeEdit)},enable:function(){this.editMode=!0},disable:function(){this.editMode=!1}},s})),define("DS/IPClassificationAttributesUX/Utils/EventHandler",["UWA/Class","DS/IPClassificationAttributesUX/Views/AttrRangeCreateForm","DS/IPClassifyUtil/service/IPClassifyUtilWebService","DS/IPClassificationAttributesUX/dataprovider/ClassificationAttributesDataProvider","DS/IPClassifyUX/events/IPClassifyEvents"],(function(e,t,n,i,a){"use strict";new Set,new Set;return e.singleton({init:function(){this._parent({})},setContextInHandler:function(e){e},valuesClickAction:function(e){var o=this,s=e.context.nodeModel.options.grid.values.type,r=e.context.nodeModel.options.grid.Name,l=e.context.cellModel.label;n.getAuthorizedValuesNls({attribute:r,values:l,type:s,onComplete:function(n){var o=n="string"==typeof n?JSON.parse(n):n;if(!Object.keys(i.getSavedNlsRanges(r)).length>0&&o[r]&&o[r].AuthorizedValues){var d=n[r].rangeValuesNls;i.setSavedNlsRanges(r,d)}var u=l.split(",");u=(u=u.map((e=>e.trim()))).filter((function(e){return e.length>0}));var c=new t({rangeList:u,nlsRange:i.getSavedNlsRanges(r),attrName:r,attrType:s,container:widget.body.container,rangeFromDico:o[r]&&o[r].AuthorizedValues?o[r].AuthorizedValues:[],editMode:!0,onSave:function(t){var n={};c&&c._rangeEdit&&!c._rangeEdit||c._rangeEdit.forEach((function(e){n[e.value]={en:e.en.value,fr:e.fr.value,de:e.de.value,ja:e.ja.value,ko:e.ko.value,ru:e.ru.value,zh:e.zh.value,value:e.value}})),e.context.nodeModel.options.grid.nls_EN,e.context.nodeModel.options.grid.nls_FR,e.context.nodeModel.options.grid.nls_DE,e.context.nodeModel.options.grid.nls_JA,e.context.nodeModel.options.grid.nls_KO,e.context.nodeModel.options.grid.nls_RU,e.context.nodeModel.options.grid.nls_ZH;var l=[];o[r]&&o[r].AuthorizedValues&&(l=o[r].AuthorizedValues.map((function(e){return"Double"==s||"double"==s||"real"==s?Number(e).toString():e}))),i.setSavedNlsRanges(r,n),a.getModelEvents().publish({event:"/NLSRange/updated",data:{nlsRanges:n,authorizedValues:t,Name:r,attrType:s,originalRange:l}});let d=t.split(";");e.context.nodeModel.prepareUpdate(),e.context.nodeModel.options.grid.AuthorizedValues=d.join(","),e.context.nodeModel.pushUpdate();var u=PADContext.get().options.views?PADContext.get().options.views.datagridview:void 0;return u&&u.options.dgv.updateColumnView("AuthorizedValues",{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0),!0},onHide:function(){}});c.updateRangeList(u),c.launchPanel({attrName:e.context.nodeModel.options.grid.Name})},onFailure:function(e){LibraryCommands._offProgressBar(),o.enable(),LibraryCommands._commonError("DeleteAttributes",Nls.msg_error_deleteClassAttributes,e)}})}})}));