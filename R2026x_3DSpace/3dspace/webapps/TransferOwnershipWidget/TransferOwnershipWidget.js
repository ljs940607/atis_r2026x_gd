define("DS/TransferOwnershipWidget/TOSModel/TOSPublicTransfer",["UWA/Controls/Abstract"],(function(e){"use strict";return e.extend({init:function(e){for(var t in this.contextId="",this.physicalId="",this.type="",this.title="",this.context="",this.targetSpace="",this.category="",this.isTOSPublicTransfer=!0,e)this[t]=e[t]},getPhysicalId:function(){return this.physicalId},getType:function(){return this.type},getTitle:function(){return this.title},getContext:function(){return this.context},getTargetSpace:function(){return this.targetSpace},getCategory:function(){return this.category},setPhysicalId:function(e){this.physicalId=e},setType:function(e){this.type=e},setTitle:function(e){this.title=e},setContext:function(e){this.context=e},setTargetSpace:function(e){this.targetSpace=e},setCategory:function(e){this.category=e}})})),define("DS/TransferOwnershipWidget/TransferOwnershipConstant",[],(function(){"use strict";return{TransferCollabSpace:"CollabSpace",TransferCollabSpaceSoft:"CollabSpaceSoft",TransferFull:"full",TransferPerson:"Person",CSEOrgAndProjectURLService:"/resources/pno/ownership/ctxorgcollabspace/user",CSEUserURLService:"/resources/pno/ownership/owner"}})),define("DS/TransferOwnershipWidget/TOSModel/TOSSelectedItem",["UWA/Controls/Abstract"],(function(e){"use strict";return e.extend({init:function(e){for(var t in this.physicalId="",this.urlIcon="",this.name="",this.type="",this.category="",this.isTOSSelectedItem=!0,e)this[t]=e[t]},getPhysicalId:function(){return this.physicalId},getUrlIcon:function(){return this.owner},getName:function(){return this.name},getType:function(){return this.type},getCategory:function(){return this.category}})})),define("DS/TransferOwnershipWidget/TOSModel/TOSSummaryModel",["UWA/Controls/Abstract"],(function(e){"use strict";return e.extend({init:function(e){this.PREFIX_TYPE_BUS="Class",this.PREFIX_TYPE_REL="RelationClass";for(var t in this.isTOSSummaryModel=!0,e)this[t]=e[t]},getPhysicalId:function(){return this.physicalId},getTitle:function(){return this.title},getType:function(){return this.type},getProject:function(){return this.project},getOrganization:function(){return this.organization},getOwner:function(){return this.owner},getPrefixType:function(){return this.prefixType},getOldOwner:function(){return this.old_owner},getError:function(){return this.error},getOldContext:function(){return this.oldContext},getCurrentContext:function(){return this.currentContext}})})),define("DS/TransferOwnershipWidget/component/TransferOwnershipWidget",["UWA/Core","UWA/Controls/Input","UWA/Controls/Abstract","UWA/Json","DS/DataDragAndDrop/DataDragAndDrop","DS/PlatformAPI/PlatformAPI","DS/WAFData/WAFData","DS/TransferOwnershipWidget/TransferOwnershipConstant","DS/SearchWidget/SearchWidget","DS/SearchWidget/SearchWidgetConstant","DS/ErrorWidget/ErrorWidget","DS/DataGridWidget/DataGridWidget","DS/WidgetServices/WidgetServices","DS/WidgetServices/securityContextServices/SecurityContextServices","DS/WarningWidget/WarningWidget","DS/MVAInput/searchPeopleInput/MVASearchPeopleInput","DS/TransferOwnershipWidget/TOSModel/TOSSelectedItem","DS/WidgetServices/CollabPerfTimer","DS/UIKIT/Input/Button","DS/UIKIT/Input/Select","DS/UIKIT/Spinner","DS/UIKIT/Input/ButtonGroup","DS/UIKIT/Modal","DS/UIKIT/Input/Toggle","DS/Controls/Editor","DS/UIKIT/Scroller","DS/ENOFloatingPanel/ENOFloatingPanel","DS/Controls/Toggle","DS/Controls/Label","UWA/Widget","text!DS/TransferOwnershipWidget/assets/TOSettings.json","css!DS/TransferOwnershipWidget/component/TransferOwnershipWidget.css","i18n!DS/TransferOwnershipWidget/assets/nls/TOSNls","DS/ReportingPanel/ReportingPanel","DS/ENOCollabToolsUI/tracker/ENOCollabTracker","DS/ENOCollabToolsUI/tracker/ENOCollabTrackerBackEnd"],(function(e,t,r,i,n,a,s,o,c,l,h,d,g,u,p,O,f,m,S,T,v,C,w,y,W,b,I,P,D,_,E,j,U,A,M,x){"use strict";var L=g.getProdLevel(),R="TOS_MasterContain",N="TOS_SummaryResult";UWA.i18n("TOS_SelectedItems");return r.extend({itemListHasPriority:!1,defaultOptions:{className:"",context:null,ForbiddenChar:'"#$@%*,?\\<>[]|:',showTopBar:!0,setCloseButton:!1,topClassHeight:R,transferType:o.TransferFull,launchTransfer:!0,genericTransfer:!1,serverName:"",serverUri:"",activeExpandWholeStructure:!1,activeDnD:!1,activeOptions:!1,activeAdminCheckBox:!1,activeSummaryButton:!1,activeHistoryButton:!1,activeFirstLineTable:!1,displaySoftDialog:!0,model:!0,wintop:!1,client_app_domain:null,client_app_name:null,odtMode:!1},init:function(e,t,r){this.defaultOptions.activeAdminCheckBox=widget.getBool("admin"),L=g.getProdLevel(),this.widget=e,this.parentWidget=t,this.SelectedItems=[],this.listID=[],this.currentTransfer=null,this.listOfIds=[],this.listOfCSFlag=[],this.listOfOrgFlag=[],this.listOfRespFlag=[],this.listOfError=[],this.listOfFailedIds=[],this.listOfIdsWithResult=[],this.listOfIdsWithData=JSON.parse("[]"),this.listOfOwnerWithData=JSON.parse("[]"),this.isHiddenResponsibleSearch=!0,this.isHiddenCollaborativeSpaceSearch=!0,this.isHiddenOrganizationSearch=!0,this._perfTimer=m,this._perfTimer.init("TOS"),this._perfTimer.start("CommandUIDurationChangeOwnerMove"),this.objectIds={},this._parent(r),this.setSecurityContext(r.securityContext),this.caHeader={},this.SelectedInstance=[],this.isCSE=!1,this.isNewMoveSettingON=!1,this.isValidSearchTriple=!0,this.searchSection=null,this.searchSectionOrg=null,this.searchSectionProject=null,this.searchOwnerTitle=null,this.searchSectionProject=null,this.searchProjectTitle=null,this.searchSectionOrganization=null,this.searchOrgTitle=null,this.searchWidgetOrg=null,this.searchWidgetProject=null,this.searchWidget=null,this.searchWidgetOwnerDiv=null,this.marginForOwnerToggle=null,this.currentSearchedUser="",this.currentCollabSapce="",this.currentOrg="",this.currentLoginUser="",this.currentLoginProject="",this.currentLoginOrg="",this.showMismatchButton=!1,this.listOwnerOrgToId={},this.listOwnerCSToId={},this.listCSOrgToId={},this.hideProject=!1,this.hideOrg=!1,this.changeOwnerToggle=null,this.addMsgToggle=null,this.commentBox=null,this.textArea=null,this.mismatchToggle=null,this.boutonMismatch=null,this.timeStamp=this._create_UUID(),this.mismatchLabel=null,this.listOfInvalidIds=null;U.get("TOS_Panel_Status");var i=U.get("TOS_Panel_Title"),n=U.get("TOS_Panel_Type"),a=U.get("TOS_Panel_Revision"),s=U.get("TOS_Panel_Organization"),c=U.get("TOS_Panel_CollabSpace"),l=U.get("TOS_Panel_Responsible"),h=U.get("TOS_Panel_CompletionStatus");this.cols=[{text:"ID",dataIndex:"ID",isHidden:!0},{text:"StatusToolTipColumn",dataIndex:"statusTooltip",isHidden:!0,tooltipColumn:"Status"},{text:U.TOS_STATUS,dataIndex:"Status",typeRepresentation:"icon"},{text:i,dataIndex:i},{text:n,dataIndex:n},{text:a,dataIndex:a},{text:s,dataIndex:s},{text:c,dataIndex:c},{text:l,dataIndex:l},{text:h,dataIndex:h}],this.ListOfEC=JSON.parse("[]"),this.ListOfAggrObj=JSON.parse("[]"),this.selectedItemsCS={},this.selectedItemsORG={},this.targetOrgTitle=null,this.targetCollabSpaceTitle=null,this.previousSearchedOwner="",this.options.transferType!=o.TransferCollabSpaceSoft&&this._initUI(),this._perfTimer.stop("CommandUIDurationChangeOwnerMove")},setSecurityContext:function(e){this.securityContext=e},onRefresh:function(){},_IsDisableApply:function(){if(null!=this.searchWidgetProject&&null!=this.searchWidgetOrg){if(null==this.searchWidget.getNewOwner().person&&null==this.searchWidgetProject.getNewOwner().collabSpace&&null==this.searchWidgetOrg.getNewOwner().organization)return!0;var e=!0,t=!0,r=!0;return r=!!(this.searchWidget.getNewOwner()&&this.searchWidget.getNewOwner().hasOwnProperty("person")&&this.searchWidget.getNewOwner().person&&""!=this.searchWidget.container.searchInput.elements.content.value),t=!!(this.searchWidgetProject.getNewOwner()&&this.searchWidgetProject.getNewOwner().hasOwnProperty("collabSpace")&&this.searchWidgetProject.getNewOwner().collabSpace&&""!=this.searchWidgetProject.container.searchInput.elements.content.value),e=!!(this.searchWidgetOrg.getNewOwner()&&this.searchWidgetOrg.getNewOwner().hasOwnProperty("organization")&&this.searchWidgetOrg.getNewOwner().organization&&""!=this.searchWidgetOrg.container.searchInput.elements.content.value),!(r||t||e)}return""===this.searchWidget.container.searchInput.elements.content.value||!(this.searchWidget.getNewOwner()&&this.searchWidget.getNewOwner().hasOwnProperty("person")&&this.searchWidget.getNewOwner().person)},_initUI:function(){var e=this,t=this.container=UWA.createElement("div",{name:R,class:R+" "+e.options.className,id:R,styles:{height:"100%",width:"100%",position:"relative","padding-top":"20px","padding-bottom":"20px"}});this.globalDiv=UWA.createElement("div",{class:"TOS_GlobalContain",id:"TOS_GlobalContain"}).inject(t);var r="TOS_ManageButtonDiv";1==e.options.wintop&&(r="TOS_ManageButtonDiv_WebInWin"),this.ManageButtonDiv=UWA.createElement("table",{class:r,html:{}});var i="TOS_ManageButtonRight";1==e.options.wintop&&(i="TOS_ManageButtonRight_WebInWin"),e.ManageButtonRight=UWA.createElement("td",{class:i});var n="TOS_ManageButtonLeft";1==e.options.wintop&&(n="TOS_ManageButtonLeft_WebInWin"),e.ManageButtonLeft=UWA.createElement("td",{class:n});var s=null;s=this.options.transferType==o.TransferPerson?U.get("TOS_ChangeOwner"):U.get("TOS_moveTitle");var d=null;e.boutonValid=new S({attributes:{title:UWA.i18n("")},name:"TopButtonValid",value:UWA.i18n(s),className:"default medium TOS_buttonTop primary",disabled:!0}),d=new S({attributes:{title:UWA.i18n("")},name:"TopButtonCancel",value:UWA.i18n("TOS_Cancel"),className:"default medium TOS_buttonTop"}),e.boutonValid.addEvents({onClick:function(){if(!0!==e.isNewMoveSettingON||0!=e.isValidSearchTriple)e._perfTimer.start("CommandExecutionDurationChangeOwnerMove"),u.getInstance().getSecurityContext({onSuccess:function(t){d.setValue(UWA.i18n("Close")),d.setDisabled(!0),e.boutonValid.setDisabled(!0),e._prepareTransferOwnership(t)},onFailure:function(t){e.setError(t),e._perfTimer.stop("CommandExecutionDurationChangeOwnerMove"),e._perfTimer.printTime("CommandUIDurationChangeOwnerMove"),e._perfTimer.printTime("CommandExecutionDurationChangeOwnerMove")}}),this.setDisabled(!0);else{if(null===e.mismatchLabel){var t=U.get("TOS_Prevent_Move_to_Unassigned_Credentials_Msg");e.mismatchLabel=UWA.createElement("label",{id:"label_mismatchLabel",class:"mismatchLabel",html:t}),e.mismatchLabel.inject(e.searchWidgetContainer),e.mismatchLabel.show()}else e.mismatchLabel.show();this.setDisabled(!0)}}}),d.addEvents({onClick:function(){a.publish(N,{listId:[]}),e.dispatchEvent("onCancel"),e._perfTimer.printTime("CommandUIDurationChangeOwnerMove")}}),e.boutonValid.inject(e.ManageButtonRight),0!=this.options.setCloseButton&&d.inject(e.ManageButtonRight),e.ManageButtonLeft.inject(this.ManageButtonDiv),e.ManageButtonRight.inject(this.ManageButtonDiv),!0===e.options.showTopBar&&0==e.options.wintop&&this.ManageButtonDiv.inject(e.globalDiv),this.mainDiv=UWA.createElement("div",{class:"TOS_MainContain"}).inject(e.globalDiv),e.mainInterface=UWA.createElement("div",{class:"TOS_MainInterface"}).inject(this.mainDiv).hide(),e.mainLoading=UWA.createElement("div",{class:"TOS_MainLoading"}).inject(this.mainDiv),e.mainError=UWA.createElement("div",{class:"TOS_MainError"}).inject(this.mainDiv).hide(),e.loadingArea32=new v({visible:!0,className:"large"}),e.loadingArea32.inject(e.mainLoading),2==L&&!0!==this.options.activeExpandWholeStructure||(this.expandWholeStruct=new y({type:"checkbox",value:UWA.i18n("TOS_Expand"),className:"primary TOS_ExpandAllCB"}),this.expandWholeStruct.inject(UWA.createElement("td").inject(e.mainInterface))),e.itemsArea=new UWA.createElement("span",{class:"TOS_itemsList"}),e.itemsArea.inject(e.mainInterface),this.itemListHasPriority=!0,e.table=null,e.errorOverlay=new h(widget,e.container,{className:"errorComponent_TransferOwnership"});var g=UWA.i18n("TOS_ownerTitle");e.titleTargetOwnership=UWA.createElement("h5",{class:"TOS_SelectedItemTitle",html:g}),e.titleTargetOwnership.hide(),e.searchWidgetContainer=UWA.createElement("div",{class:"TOS_searchWidgetContainer"}).inject(this.mainInterface);var p="auto",O=e.options.ForbiddenChar;l.TYPE_PERSON;1==this.options.activeFirstLineTable&&l.TYPE_FULL;var f={user:"",org:"",collabSpace:""};c.FULL;switch(1==e.isCSE&&(c.RESTRICTED,e.isCSE=!0),this.options.transferType){case o.TransferPerson:e.hideOrg=!0,e.hideProject=!0,l.TYPE_PERSON;break;case o.TransferCollabSpaceSoft:case o.TransferCollabSpace:l.TYPE_PROJECT;break;case o.TransferFull:l.TYPE_FULL}if(0==e.hideProject&&0==e.hideOrg){e.searchWidgetProject=c.getSearchWidget(c.FULL,{className:"searchProject_TransferOwnership",ForbiddenChar:O,MaxNumber:"5",MaxSize:"300",position:p,serverName:this.options.serverName,serverUri:this.options.serverUri,showEmptyCategory:!1,hint:UWA.i18n("Search Collaborative Space"),methodType:"PUT",urlService:"/resources/v1/collabServices/base/transferOwnership/canUserChangePOV_ChecksWithUserQuery/"+l.TYPE_PROJECT,type:l.TYPE_PROJECT,CSE:e.isCSE,IsMoveSearch:!0,currentUser:e.currentSearchedUser,currentOrg:e.currentOrg,currentCollabSpace:e.currentCollabSpace,webParams:{getQueryParams:function(){return f}},odtMode:this.options.odtMode,events:{onValid:function(){var t=e.searchWidgetProject.getNewOwner();if(1==e.isCSE&&e.searchWidgetOrg){var r=e.searchWidgetOrg.container.currentChoice,i=t.collabSpace.collabSpaceID;r&&(e.currentCollabSpace=i,e.currentOrg=r,e.searchWidgetOrg&&(e.searchWidgetOrg.addOptions({currentCollabSpace:e.currentCollabSpace}),e.searchWidgetProject.options.listOwnerObject.length>0&&(e.searchWidgetOrg.options.listOwnerObject=e.searchWidgetProject.options.listOwnerObject))),e.searchWidgetOrg.options.currentCollabSpace=i}u.getInstance().getSecurityContext({onSuccess:function(t){var r=e._getTransferDataForSearch(),i=l.TYPE_PROJECT;e.transferPreCheck(t,r,i)},onFailure:function(t){e.setError(t)}}),e._ManageValidButton(!0)},onUnvalid:function(){if(null!=e.searchWidgetProject){if(e.mismatchLabel&&e.mismatchLabel.hide(),!0===e.isNewMoveSettingON){var t=null,r=null;e.searchWidget&&null!=e.searchWidget.container.currentChoice&&(t=e.searchWidget.container.currentChoice),e.searchWidgetOrg&&null!=e.searchWidgetOrg.container.currentChoice&&(r=e.searchWidgetOrg.container.currentChoice);var i={};if(e.currentLoginUser=a.getUser().login+"_PRJ",null==t&&null===r){var n={CSE:!0,currentUser:e.currentLoginUser,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentOrg:"",currentCollabSpace:"",webParams:{method:"GET",getQueryParams:function(){return i}}};e.searchWidgetProject.addOptions(n)}if(null==t&&null!=r){n={CSE:!0,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentUser:e.currentLoginUser,currentOrg:r,currentCollabSpace:"",webParams:{method:"GET",getQueryParams:function(){return i}}};e.searchWidgetProject.addOptions(n)}if(null!==t&&null===r){n={CSE:!0,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentUser:t+"_PRJ",currentOrg:r,currentCollabSpace:"",webParams:{method:"GET",getQueryParams:function(){return i}}};e.searchWidgetProject.addOptions(n)}if(null!==t&&null!=r){n={CSE:!0,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentUser:t+"_PRJ",currentOrg:r,currentCollabSpace:"",webParams:{method:"GET",getQueryParams:function(){return i}}};e.searchWidgetProject.addOptions(n)}}var s=e.searchWidgetProject.container.searchInput.elements.content.value;f.collabSpace=s,null===e.searchWidgetOrg.container.currentChoice?f.org="":f.org=e.searchWidgetOrg.container.currentChoice,e.searchWidgetProject&&e.searchWidgetProject.addOptions({currentOrg:f.org}),e.searchWidget.container.currentChoice?f.user=e.searchWidget.container.currentChoice:f.user="",""==s?(e.boutonMismatch&&e.boutonMismatch.hide(),e.mismatchToggle&&e.mismatchToggle.hide(),e.searchWidget&&e.searchWidgetOrg&&(e.searchWidget.container.currentChoice||e.searchWidgetOrg.container.currentChoice)&&u.getInstance().getSecurityContext({onSuccess:function(t){var r=e._getTransferDataForSearch();e.transferPreCheck(t,r,l.TYPE_PROJECT)},onFailure:function(t){e.setError(t)}})):(e.boutonMismatch&&e.boutonMismatch.hide(),e.mismatchToggle&&e.mismatchToggle.hide()),e._IsDisableApply()?e._ManageValidButton(!1):e._ManageValidButton(!0)}},onError:function(t){e.setError(t)},onCSEListOwnerObjectFilled:function(){e.searchWidgetProject.options.listOwnerObject.length>0&&e.searchWidgetOrg&&e.searchWidgetOrg.options&&(e.searchWidgetOrg.options.listOwnerObject=[],e.searchWidgetOrg.options.listOwnerObject=e.searchWidgetProject.options.listOwnerObject)}}});var m=UWA.createElement("div",{class:"TOS_SearchSectionProject"});e.searchSectionProject=m;var T=UWA.i18n(U.get("ChangeCollab_mainTile"));e.searchCollabTitle=UWA.createElement("h5",{class:"TOS_SelectedItemTitle",html:T}).inject(e.searchWidgetContainer),e.searchWidgetProject.inject(m),m.inject(e.searchWidgetContainer),e.marginAfterSearchProj=UWA.createElement("div",{class:"TOS_marginCorrector"}).inject(this.searchWidgetContainer);var C=UWA.i18n(U.get("ChangeOrg_mainTitle"));e.searchOrgTitle=UWA.createElement("h5",{class:"TOS_SelectedItemTitle",html:C}).inject(e.searchWidgetContainer),e.searchWidgetOrg=c.getSearchWidget(c.FULL,{className:"searchOrg_TransferOwnership",ForbiddenChar:O,MaxNumber:"5",MaxSize:"300",position:p,serverName:this.options.serverName,serverUri:this.options.serverUri,showEmptyCategory:!1,hint:UWA.i18n("Search Organization"),methodType:"PUT",urlService:"/resources/v1/collabServices/base/transferOwnership/canUserChangePOV_ChecksWithUserQuery/"+l.TYPE_ORGANIZATION,type:l.TYPE_ORGANIZATION,CSE:e.isCSE,IsMoveSearch:!0,currentOrg:e.currentOrg,currentCollabSpace:e.currentCollabSpace,webParams:{getQueryParams:function(){return f},getCSSearchParam:function(){return f.collabSpace}},odtMode:this.options.odtMode,events:{onValid:function(){if(null!=e.searchWidgetOrg){var t=e.searchWidgetOrg.getNewOwner();if(1==e.isCSE){var r=e.searchWidgetProject.container.currentChoice,i=t.organization.orgID;if(e.currentOrg=i,e.searchWidgetProject&&(e.searchWidgetProject.addOptions({currentOrg:e.currentOrg}),e.searchWidgetOrg.options.listOwnerObject.length>0&&(e.searchWidgetProject.options.listOwnerObject=e.searchWidgetOrg.options.listOwnerObject)),r&&i){e.searchWidgetOrg.CSEListOfCs[i];e.searchWidgetOrg.addOptions({currentCollabSpace:r})}}u.getInstance().getSecurityContext({onSuccess:function(t){var r=e._getTransferDataForSearch();e.transferPreCheck(t,r,l.TYPE_ORGANIZATION)},onFailure:function(t){e.setError(t)}}),e._ManageValidButton(!0)}},onUnvalid:function(){if(null!=e.searchWidgetProject){if(e.mismatchLabel&&e.mismatchLabel.hide(),!0===e.isNewMoveSettingON){var t=null,r=null;e.searchWidget&&null!=e.searchWidget.container.currentChoice&&(t=e.searchWidget.container.currentChoice),e.searchWidgetProject&&null!=e.searchWidgetProject.container.currentChoice&&(r=e.searchWidgetProject.container.currentChoice),e.currentLoginUser=a.getUser().login+"_PRJ";var i={};if(null==t&&null===r){var n={CSE:!0,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentUser:e.currentLoginUser,currentOrg:"",currentCollabSpace:"",webParams:{method:"GET",getQueryParams:function(){return i}}};e.searchWidgetOrg.addOptions(n)}if(null==t&&null!=r){i={},n={CSE:!0,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentUser:e.currentLoginUser,currentOrg:"",currentCollabSpace:r,webParams:{method:"GET",getQueryParams:function(){return i}}};e.searchWidgetOrg.addOptions(n)}if(null!=t&&null==r){n={CSE:!0,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentUser:t+"_PRJ",currentOrg:"",currentCollabSpace:r,webParams:{method:"GET",getQueryParams:function(){return i}}};e.searchWidgetOrg.addOptions(n)}if(null!==t&&null!=r){n={CSE:!0,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentUser:t+"_PRJ",currentOrg:"",currentCollabSpace:r,webParams:{method:"GET",getQueryParams:function(){return i}}};e.searchWidgetOrg.addOptions(n)}}var s=e.searchWidgetOrg.container.searchInput.elements.content.value;f.org=s,e.searchWidget.container.currentChoice?f.user=e.searchWidget.container.currentChoice:f.user="",null===e.searchWidgetProject.container.currentChoice?f.collabSpace="":f.collabSpace=e.searchWidgetProject.container.currentChoice,""==s?(e.boutonMismatch&&e.boutonMismatch.hide(),e.mismatchToggle&&e.mismatchToggle.hide(),e.mismatchLabel&&e.mismatchLabel.hide(),e.searchWidget&&e.searchWidgetProject&&(e.searchWidget.container.currentChoice||e.searchWidgetProject.container.currentChoice)&&u.getInstance().getSecurityContext({onSuccess:function(t){var r=e._getTransferDataForSearch();e.transferPreCheck(t,r,l.TYPE_ORGANIZATION)},onFailure:function(t){e.setError(t)}})):(e.boutonMismatch&&e.boutonMismatch.hide(),e.mismatchToggle&&e.mismatchToggle.hide(),e.mismatchLabel&&e.mismatchLabel.hide()),e._IsDisableApply()?e._ManageValidButton(!1):e._ManageValidButton(!0)}},onError:function(t){e.setError(t)},onCSEListOwnerObjectFilled:function(){e.searchWidgetOrg.options.listOwnerObject.length>0&&(e.searchWidgetProject&&e.searchWidgetProject.options&&(e.searchWidgetProject.options.listOwnerObject=[]),e.searchWidgetProject.options.listOwnerObject=e.searchWidgetOrg.options.listOwnerObject)}}});var w=UWA.createElement("div",{class:"TOS_SearchSectionOrg"});C=UWA.i18n(U.get("ChangeOrg_mainTitle"));e.searchSectionOrganization=w,e.searchWidgetOrg.inject(w),w.inject(e.searchWidgetContainer),e.marginAfterSearchOrg=UWA.createElement("div",{class:"TOS_marginCorrector"}).inject(this.searchWidgetContainer)}var I=UWA.createElement("div",{class:"TOS_SearchSectionOwner"});e.searchSection=I;var D=U.get("TOS_ownerTitle"),_=c.FULL;if(e.options.transferType!=o.TransferPerson){var E=UWA.createElement("div",{class:"TOS_SearchSectionOwner"});E.setStyle("display","none"),e.searchWidgetOwnerDiv=E,e.changeOwnerToggle=new P({type:"checkbox",label:D,checkFlag:!1,"font-weight":"bold"}),e.changeOwnerToggle.addEventListener("buttonclick",(function(t){1==t.dsModel.checkFlag?(e.searchWidgetOwnerDiv&&e.searchWidgetOwnerDiv.setStyle("display","contents"),e.marginAfterSearchUser&&e.marginAfterSearchUser.setStyle("display","inline-block")):(e.searchWidgetOwnerDiv&&e.searchWidgetOwnerDiv.setStyle("display","none"),e.marginAfterSearchUser&&e.marginAfterSearchUser.setStyle("display","none"),!0===e.isCSE&&e.searchWidget&&e.searchWidget.container.searchInput.elements.content.value&&(e.searchWidget.container.searchInput.elements.content.value="",e.searchWidget.container.currentChoice=null,e.searchWidget.clearInput(),e.searchWidgetProject&&e.searchWidgetOrg&&(e.searchWidgetProject.getNewOwner().collabSpace&&(e.searchWidgetProject.container.currentChoice=null,e.searchWidgetProject.container.searchInput.elements.content.value="",e.searchWidgetProject.clearInput()),e.searchWidgetOrg.getNewOwner().organization&&(e.searchWidgetOrg.container.currentChoice=null,e.searchWidgetOrg.container.searchInput.elements.content.value="",e.searchWidgetOrg.clearInput())),e._ManageValidButton(!1)),e.searchWidget&&e.searchWidget.container.searchInput.elements.content.value&&(e.searchWidget.container.searchInput.elements.content.value="",e.searchWidget.container.currentChoice=null,e.searchWidget.clearInput(),e._IsDisableApply()&&e._ManageValidButton(!1),e.boutonMismatch&&e.boutonMismatch.hide(),e.mismatchToggle&&e.mismatchToggle.hide(),e.mismatchLabel&&e.mismatchLabel.hide(),e.searchWidgetProject&&e.searchWidgetOrg?(e.searchWidgetProject.container.currentChoice||e.searchWidgetOrg.container.currentChoice)&&u.getInstance().getSecurityContext({onSuccess:function(t){var r=e._getTransferDataForSearch();e.transferPreCheck(t,r,l.TYPE_PERSON)},onFailure:function(t){e.setError(t)}}):(e.boutonMismatch&&e.boutonMismatch.hide(),e.mismatchToggle&&e.mismatchToggle.hide(),e.mismatchLabel&&e.mismatchLabel.hide())))})),e.changeOwnerToggle.inject(e.searchSection)}else _=c.RESTRICTED,e.titleTargetOwnership.inject(e.searchSection),e.titleTargetOwnership.show();if(e.searchWidget=c.getSearchWidget(_,{className:"searchPeople_TransferOwnership",ForbiddenChar:O,MaxNumber:"5",MaxSize:"300",position:p,serverName:this.options.serverName,serverUri:this.options.serverUri,showEmptyCategory:!1,hint:UWA.i18n("Search Responsible"),methodType:"PUT",urlService:"/resources/v1/collabServices/base/transferOwnership/canUserChangePOV_ChecksWithUserQuery/"+l.TYPE_PERSON,type:l.TYPE_PERSON,webParams:{getQueryParams:function(){return f}},CSE:e.isCSE,IsMoveSearch:!0,currentUser:e.currentSearchedUser,currentOrg:e.currentOrg,currentCollabSpace:e.currentCollabSpace,odtMode:this.options.odtMode,events:{onValid:function(){var t,r=e.searchWidget.getNewOwner();t=this.currentChoice,u.getInstance().getSecurityContext({onSuccess:function(i){if(1==e.isCSE||!0===e.isNewMoveSettingON){e.currentSearchedUser=null==t||""==t?e.currentLoginUser:t;var n={};n.currentUser=e.currentSearchedUser,(e.searchWidgetProject||e.searchWidgetOrg)&&(e.previousSearchedOwner=e.searchWidgetProject.options.currentUser);var a=r.person.personID+"_PRJ";""!==e.previousSearchedOwner&&a!==e.previousSearchedOwner&&(e.previousSearchedOwner=r,e.searchWidgetProject&&(e.searchWidgetProject.addOptions(n),e.searchWidgetProject.CSEListOfOrg={},e.searchWidgetProject.listOwner=[],e.searchWidgetProject.container.searchInput.value="",e.searchWidgetProject.setValue(""),e.searchWidgetProject.container.currentChoice="",e.searchWidgetProject.container.currentOwner=null,e.searchWidgetProject.options.listOwnerObject=[],e.searchWidgetProject.options.currentOrg="",e.searchWidgetProject.options.currentCollabSpace=""),e.searchWidgetOrg&&(e.searchWidgetOrg.addOptions(n),e.searchWidgetOrg.listOwner=[],e.searchWidgetOrg.CSEListOfCs={},e.searchWidgetOrg.container.searchInput.value="",e.searchWidgetOrg.setValue(""),e.searchWidgetOrg.container.currentChoice="",e.searchWidgetOrg.container.currentOwner=null,e.searchWidgetOrg.options.listOwnerObject=[],e.searchWidgetOrg.options.currentCollabSpace="",e.searchWidgetOrg.options.currentOrg=""))}var s=e._getTransferDataForSearch();e.transferPreCheck(i,s,l.TYPE_PERSON)},onFailure:function(t){e.setError(t)}}),e._ManageValidButton(!0)},onUnvalid:function(){if(null!=e.searchWidgetOrg){if(e.mismatchLabel&&e.mismatchLabel.hide(),!0===e.isNewMoveSettingON){var t=null,r=null;if(e.searchWidgetProject&&null!=e.searchWidgetProject.container.currentChoice&&(r=e.searchWidgetProject.container.currentChoice),e.searchWidgetOrg&&null!=e.searchWidgetOrg.container.currentChoice&&(t=e.searchWidgetOrg.container.currentChoice),null==t&&null===r){var i={CSE:!1,autocomplete:"off",methodType:"PUT",urlService:"/resources/v1/collabServices/base/transferOwnership/canUserChangePOV_ChecksWithUserQuery/"+l.TYPE_PERSON,currentUser:"",currentOrg:"",currentCollabSpace:"",previousUser:e.previousSearchedOwner,webParams:{getQueryParams:function(){return f}}};e.searchWidget.addOptions(i)}if(null==t&&null!=r){f.collabSpace=r;i={CSE:!1,autocomplete:"off",methodType:"PUT",urlService:"/resources/v1/collabServices/base/transferOwnership/canUserChangePOV_ChecksWithUserQuery/"+l.TYPE_PERSON,currentUser:"",currentOrg:"",currentCollabSpace:r,previousUser:e.previousSearchedOwner,webParams:{getQueryParams:function(){return f}}};e.searchWidget.addOptions(i)}if(null!==t&&null==r){f.org=t;i={CSE:!1,autocomplete:"off",methodType:"PUT",urlService:"/resources/v1/collabServices/base/transferOwnership/canUserChangePOV_ChecksWithUserQuery/"+l.TYPE_PERSON,currentUser:"",currentOrg:t,currentCollabSpace:r,previousUser:e.previousSearchedOwner,webParams:{getQueryParams:function(){return f}}};e.searchWidget.addOptions(i)}if(null!==t&&null!=r){f.collabSpace=r,f.org=t;i={CSE:!1,autocomplete:"off",methodType:"PUT",urlService:"/resources/v1/collabServices/base/transferOwnership/canUserChangePOV_ChecksWithUserQuery/"+l.TYPE_PERSON,currentUser:"",currentOrg:t,currentCollabSpace:r,previousUser:e.previousSearchedOwner,webParams:{getQueryParams:function(){return f}}};e.searchWidget.addOptions(i)}}var n=e.searchWidget.container.searchInput.elements.content.value;f.user=n,null===e.searchWidgetOrg.container.currentChoice?f.org="":f.org=e.searchWidgetOrg.container.currentChoice,null===e.searchWidgetProject.container.currentChoice?f.collabSpace="":f.collabSpace=e.searchWidgetProject.container.currentChoice,""==n?(e.boutonMismatch&&e.boutonMismatch.hide(),e.mismatchToggle&&e.mismatchToggle.hide(),e.mismatchLabel&&e.mismatchLabel.hide(),e.searchWidgetProject&&e.searchWidgetOrg&&(e.searchWidgetProject.container.currentChoice||e.searchWidgetOrg.container.currentChoice)&&u.getInstance().getSecurityContext({onSuccess:function(t){var r=e._getTransferDataForSearch();e.transferPreCheck(t,r,l.TYPE_PRESON)},onFailure:function(t){e.setError(t)}})):(e.boutonMismatch&&e.boutonMismatch.hide(),e.mismatchToggle&&e.mismatchToggle.hide(),e.mismatchLabel&&e.mismatchLabel.hide()),e._IsDisableApply()?e._ManageValidButton(!1):e._ManageValidButton(!0)}else{n=e.searchWidget.container.getCurrentValue();f.user=n,e._IsDisableApply()?e._ManageValidButton(!1):e._ManageValidButton(!0)}},onError:function(t){e.setError(t)}}}),null!==e.searchWidgetOwnerDiv?(e.searchWidget.inject(e.searchWidgetOwnerDiv),e.searchWidgetOwnerDiv.inject(I)):e.searchWidget.inject(I),I.inject(e.searchWidgetContainer),e.marginAfterSearchUser=UWA.createElement("div",{class:"TOS_ownerMarginCorrector"}).inject(this.searchWidgetContainer),e.marginAfterSearchUser.setStyle("display","none"),null!==e.changeOwnerToggle&&(e.searchSection.hide(),e.searchWidgetOwnerDiv&&e.searchWidgetOwnerDiv.setStyle("display","none"),e.marginAfterSearchUser&&e.marginAfterSearchUser.setStyle("display","none")),this.options.transferType===o.TransferPerson)e.hideProject=!0,e.hideOrg=!0;var j=UWA.i18n(U.get("TOS_TitleComment"));e.options.transferType!=o.TransferPerson?(e.addMsgToggle=new P({type:"checkbox",label:j,checkFlag:!1,class:"TOS_SelectedItemTitle"}),e.addMsgToggle.domId="TOS_addMsgToggle",e.addMsgToggle.addEventListener("buttonclick",(function(t){1==t.dsModel.checkFlag?e.commentBox.show():(e.commentBox.hide(),e.textArea&&(e.textArea.value=""))})),e.addMsgToggle.inject(e.searchWidgetContainer)):(e.marginAfterSearchUser&&e.marginAfterSearchUser.setStyle("display","inline-block"),e.commentTitle=UWA.createElement("h5",{class:"TOS_SelectedItemTitle",html:j}).inject(e.searchWidgetContainer)),e.commentBox=UWA.createElement("div",{class:"TOS_CommentBox"}).inject(this.searchWidgetContainer);var A="TOS_Comment";if(e.options.transferType==o.TransferPerson&&(A="TOS_Comment_ChangeOwner"),e.textArea=new W({placeholder:UWA.i18n(U.get(A)),value:"",widthInCharNumber:63,nbRows:5,newLineMode:"enter"}),e.textArea.domId="TOS_CommentTextEditor",e.textArea.inject(e.commentBox),e.options.transferType!=o.TransferPerson&&e.commentBox.hide(),e.marginAfterAddMsg=UWA.createElement("div",{class:"TOS_marginCorrector"}).inject(this.searchWidgetContainer),this.options.transferType==o.TransferFull)UWA.createElement("Div",{class:"TOS_AdvAdminOption"}).inject(e.mainInterface);1==e.options.wintop&&e.ManageButtonDiv.inject(e.mainInterface);new b({element:e.mainInterface}).inject(e.globalDiv);this.trackerEventBeginTime=Date.now()},transferPreCheck:function(e,t,r){this.dispatchEvent("onTransferStart");var n=this,a="",s=(this.options.serverName,this.options.serverUri,this.options.launchTransfer),o=(this.caHeader,r);n._perfTimer.start("ChangeOnwerMove: transferOwnershipPreCheck"),g.get3DSpaceUrlAsync({onComplete:function(e){var r={Accept:"application/json","content-type":"application/json"};r.SecurityContext=encodeURIComponent(n.securityContext),n.caHeader&&(n.caHeader["DS-Change-Authoring-Context"]&&(r["DS-Change-Authoring-Context"]=n.caHeader["DS-Change-Authoring-Context"]),n.caHeader["DS-Configuration-Authoring-Context"]&&(r["DS-Configuration-Authoring-Context"]=n.caHeader["DS-Configuration-Authoring-Context"]));var c=n.parseDataForPreCheck(t);a=g.getRealPath("assets/transferOwnership.json",widget);var l="",h="GET",d="";2==L&&(a=e+"/resources/v1/collabServices/base/transferOwnership/transferOwnershipPreCheck?admin=true",d="passport",h="PUT",l=i.encode({requests:c}));var u={requests:c};if(n.dispatchEvent("onValidation",u),!0===s){n.displayLoadingArea(),r["Accept-Language"]=widget.lang;var p=g.getTenantID();p&&(a+="&tenant="+p),n._ManageValidButton(!0),!0===n.options.wintop&&n.ManageButtonLeft.setStyle("display","contents"),g.partitionedAuthenticatedRequest(a,{type:"json",method:h,proxy:d,headers:r,maxChunkSize:19,cancelCallback:function(){return!1},partisionedProgressLabel:U.get("TOS_Prechecking"),progressBarContext:n.ManageButtonLeft,progressBarWaitContext:n.container,chunkify:function(e,t,r){var i=[];0==e&&(e=3),i.push(r[0]),i.push(r[1]),i.push(r[2]);for(var n=e;n<e+t&&n<r.length;n++)i.push(r[n]);return i},data:l,timeout:36e5,onComplete:function(e){n._perfTimer.stop("ChangeOnwerMove: transferOwnershipPreCheck"),!0===n.options.wintop&&n.ManageButtonLeft.setStyle("display","none"),n._ManageValidButton(!0),n._preCheckResult(e,t,o)},onFailure:function(e,t,r){n._perfTimer.stop("ChangeOnwerMove: transferOwnershipPreCheck"),!0===n.options.wintop&&n.ManageButtonLeft.setStyle("display","none"),n._ManageValidButton(!0),n._onFailure(e,t,r)},onTimeout:function(e){n._onTimeout(),n._perfTimer.stop("ChangeOnwerMove: transferOwnershipPreCheck")}})}}})},_preCheckResult:function(e,t,r){var i=this,n=[],a=[],s=[],o="",c="",l=[];if(e.results.length>0)for(var h=0;h<e.results.length;h++){if(null!=e.results[h].TransferFlag&&n.push(e.results[h].TransferFlag),null!=e.results[h].ErrorList&&"success"!==e.results[h].ErrorList){var d={Error:e.results[h].ErrorList,physicalId:e.results[h].physicalId};s.push(d)}null!=e.results[h].VALIDTRIPLE&&!1===e.results[h].VALIDTRIPLE&&(-1==a.indexOf(e.results[h].physicalId)&&a.push(e.results[h].physicalId),e.results[h].user,o=e.results[h].project,c=e.results[h].org)}if(0==a.length&&(i.isValidSearchTriple=!0),a.length>0&&1==i.isNewMoveSettingON&&(i.isValidSearchTriple=!1),a.length>0&&!0===i.showMismatchButton){var g=Object.keys(i.listOfIdsWithData).length,u=a.length,p=U.get("TOS_Of"),O=U.get("TOS_Mismatch_Toggle_Label")+u+p+g+U.get("TOS_Mismatch_Toggle_Label_2");null==i.mismatchToggle&&!1===i.isNewMoveSettingON&&(i.mismatchToggle=new P({type:"checkbox",className:"LCMismatchToggle",label:O,checkFlag:!1,"font-weight":"bold"}),i.mismatchToggle.addEventListener("buttonclick",(function(e){1==e.dsModel.checkFlag?i._ManageValidButton(!0):i._ManageValidButton(!1)})),i.mismatchToggle.inject(i.searchWidgetContainer),i._ManageValidButton(!1));var f=U.get("TOS_Show_Mismatches_Btn");null==i.boutonMismatch&&!1===i.isNewMoveSettingON?(i.boutonMismatch=new S({attributes:{title:UWA.i18n("")},name:"LCMismatch",value:f,className:"LCMismatch default medium TOS_buttonTop primary",disabled:!1}),i.boutonMismatch.addEvents({onClick:function(){for(var e=0;e<a.length;e++){var t=[],r=a[e];t.push(r),t.push(U.TOS_FailStatus),t.push("Failed"),t.push(i.listOfIdsWithData[r].Title),t.push(i.listOfIdsWithData[r].typeDisplayName),t.push(i.listOfIdsWithData[r].Revision),t.push(i.listOfIdsWithData[r].OrganizationTitle),t.push(i.listOfIdsWithData[r].CollaborativeSpaceTitle),t.push(i.listOfIdsWithData[r].Responsible);var n=i.listOfIdsWithData[r].Responsible;if(i.searchWidgetOrg&&i.searchWidgetOrg.searchWidgetUI.searchInput){var s=i.searchWidgetOrg.searchWidgetUI.searchInput.getValue();c=null==s||""==s?i.listOfIdsWithData[r].OrganizationTitle:s}if(i.searchWidgetProject&&i.searchWidgetProject.searchWidgetUI.searchInput){var s=i.searchWidgetProject.searchWidgetUI.searchInput.getValue();o=null==s||""==s?i.listOfIdsWithData[r].CollaborativeSpaceTitle:s}if(i.searchWidget&&i.searchWidget.searchWidgetUI.searchInput)n=null==(s=i.searchWidget.searchWidgetUI.searchInput.getValue())||""==s?i.listOfIdsWithData[r].Responsible:s;var h=n+U.get("TOS_Mismatch_Msg")+o+"/"+c;t.push(h);var d=U.get("TOS_FailStatus");t.push(d),l.push(t)}if(A.launchReportingPanel(l,i.cols,null),0==i.options.wintop)i.dispatchEvent("onCancel");else{var g={error:!0,OKdata:"",KOdata:l,reportingPanelColumns:i.cols,listOfPids:Object.keys(i.listOfIdsWithData)};i.dispatchEvent("onLaunchReportingPanel",g)}}}),i.boutonMismatch.inject(i.ManageButtonLeft)):i.boutonMismatch&&!1===i.isNewMoveSettingON&&i.boutonMismatch.show()}else i.mismatchLabel&&(i.mismatchLabel.hide(),i._ManageValidButton(!0));i.hideLoadingArea()},parseDataForPreCheck:function(e){var t=[];return null!=e&&e.hasOwnProperty("owner")&&null!=e.owner&&e.owner.hasOwnProperty("person")&&""!=e.owner.person?t.push(e.owner.person.personID):t.push(""),null!=e&&e.hasOwnProperty("owner")&&null!=e.owner&&e.owner.hasOwnProperty("collabSpace")&&""!=e.owner.collabSpace?t.push(e.owner.collabSpace.collabSpaceID):t.push(""),null!=e&&e.hasOwnProperty("owner")&&null!=e.owner&&e.owner.hasOwnProperty("organization")&&""!=e.owner.organization?t.push(e.owner.organization.orgID):t.push(""),e.tosBusinessObject.forEach((function(e){t.push(e.id)})),e.hasOwnProperty("tosRelationObject")&&e.tosRelationObject.forEach((function(e){t.push(e.id)})),t},destroy:function(){this.searchWidget&&this.searchWidget.destroy(),this.searchWidgetProject&&this.searchWidgetProject.destroy(),this.searchWidgetOrg&&this.searchWidgetOrg.destroy(),this._parent()},actionOnMove:function(){this.searchWidget&&this.searchWidget.actionOnMove(),this.searchWidgetProject&&this.searchWidgetProject.actionOnMove(),this.searchWidgetOrg&&this.searchWidgetOrg.actionOnMove()},getcanUserChangePOV:function(e){var t=this;this.options.serverName,this.options.serverUri;t._perfTimer.start("ChangeOnwerMove: canUserChangePOV"),g.get3DSpaceUrlAsync({onComplete:function(r){var n={"content-type":"application/json",Accept:"application/json"},a=g.getRealPath("assets/summary.json",widget),s="GET",o="",c=t.parseDataForCanUserChangePOV(e);if(2==L){a=r+"/resources/v1/collabServices/base/transferOwnership/canUserChangePOV",o="passport",s="PUT";var l=i.encode({requests:c})}t.displayLoadingArea();var h=g.getTenantID();h&&(a+="?tenant="+h),!0===t.options.wintop&&t.ManageButtonLeft.setStyle("display","contents"),n["Accept-Language"]=widget.lang,n.SecurityContext=encodeURIComponent(t.securityContext),g.partitionedAuthenticatedRequest(a,{type:"json",method:s,proxy:o,headers:n,maxChunkSize:19,cancelCallback:function(){return!1},partisionedProgressLabel:U.get("TOS_CanChangeOwnership"),progressBarContext:t.ManageButtonLeft,progressBarWaitContext:t.container,symultaneousRequest:!0,data:l,timeout:36e5,onComplete:function(e){t._perfTimer.stop("ChangeOnwerMove: canUserChangePOV"),t._listcanUserChangePOV(e)},onFailure:function(e,r,i){t._perfTimer.stop("ChangeOnwerMove: canUserChangePOV"),t._onFailure(e,r,i)},onTimeout:function(e){t._perfTimer.stop("ChangeOnwerMove: canUserChangePOV"),t._onTimeout()}})}})},parseDataForCanUserChangePOV:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].physicalId);return t},parseDataFor3DNotification:function(e){for(var t=[],r=0;r<e.length;r++)console.log(e[r].cestamp),t.push({objectID:e[r].objectID,objectName:e[r].objectName,cestamp:e[r].cestamp,newOwner:e[r].newOwner,oldOwner:e[r].oldOwner,newOwnerFullName:e[r].newOwnerFullName,oldOwnerFullName:e[r].oldOwnerFullName,newCSId:e[r].newCSId,newOrgId:e[r].newOrgId,newCSTitle:e[r].newCSTitle,newOrgTitle:e[r].newOrgTitle,newComment:e[r].newComment});return t},_listcanUserChangePOV:function(e){var t=[],r=[],i=[],n=this,s=!0,c=!0,l=!0,h=0,d=0,g=0,p=0,O=0,f=0,m={};if(e.results.length>0){for(var T=0;T<e.results.length;T++){if(this.options.transferType!=o.TypePerson&&null!=e.results[T].CSTransferFlag){var v={physicalId:e.results[T].physicalId,CSTransferFlag:e.results[T].CSTransferFlag};this.listOfCSFlag.push(v),"OK"==e.results[T].CSTransferFlag&&0;var C={objectID:e.results[T].physicalId};i.push(C),"OK"==e.results[T].CSTransferFlag&&0==h?(0==this.hideProject&&null!=this.searchWidgetProject&&this.searchWidgetProject.show(),this.titleTargetOwnership.show(),s=!1,this.isHiddenCollaborativeSpaceSearch=!1,h=1):g++}if(this.options.transferType!=o.TypePerson&&null!=e.results[T].OrgTransferFlag){v={physicalId:e.results[T].physicalId,OrgTransferFlag:e.results[T].OrgTransferFlag};this.listOfOrgFlag.push(v);C={objectID:e.results[T].physicalId};r.push(C),"OK"==e.results[T].OrgTransferFlag&&0,"OK"==e.results[T].OrgTransferFlag&&0==d?(0==this.hideOrg&&null!=this.searchWidgetOrg&&this.searchWidgetOrg.show(),this.titleTargetOwnership.show(),c=!1,this.isHiddenOrganizationSearch=!1,d=1):p++}if(null!=e.results[T].RespTransferFlag){v={physicalId:e.results[T].physicalId,RespTransferFlag:e.results[T].RespTransferFlag};this.listOfRespFlag.push(v);C={objectID:e.results[T].physicalId};t.push(C),"OK"==e.results[T].RespTransferFlag&&f++,"OK"==e.results[T].RespTransferFlag?(null!==this.changeOwnerToggle&&1==this.changeOwnerToggle.checkFlag?(this.searchWidgetOwnerDiv&&this.searchWidgetOwnerDiv.setStyle("display","contents"),this.marginAfterSearchUser&&this.marginAfterSearchUser.setStyle("display","inline-block"),this.titleTargetOwnership.show()):null!==this.changeOwnerToggle&&0==this.changeOwnerToggle.checkFlag&&(this.titleTargetOwnership.hide(),this.searchWidgetOwnerDiv&&this.searchWidgetOwnerDiv.setStyle("display","none"),this.marginAfterSearchUser&&this.marginAfterSearchUser.setStyle("display","none")),l=!1,this.isHiddenResponsibleSearch=!1,1):"KO"==e.results[T].RespTransferFlag&&(this.titleTargetOwnership.hide(),l=!0,this.isHiddenResponsibleSearch=!0,O++)}if(null!=e.results[T].ErrorList){if("success"!=e.results[T].ErrorList){v={physicalId:e.results[T].physicalId,Error:e.results[T].ErrorList};this.listOfError.push(v)}m[e.results[T].physicalId]=e.results[T].ErrorList}e.results[T].hasOwnProperty("CSE")&&(this.isCSE=e.results[T].CSE),e.results[T].hasOwnProperty("MoveSettingON")&&(this.isNewMoveSettingON=e.results[T].MoveSettingON,this.options.transferType==o.TransferPerson&&(this.isNewMoveSettingON=!1)),e.results[T].hasOwnProperty("MismatchON")&&(this.showMismatchButton=e.results[T].MismatchON),e.results[T].hasOwnProperty("LifecycleCheckCommand")&&(this.LifecycleCheckCommand=e.results[T].LifecycleCheckCommand)}if(this.searchWidget&&this.searchWidget.setSelectedItemList(t),0==n.hideProject&&0==n.hideOrg&&null!=this.searchWidgetOrg&&null!=this.searchWidgetProject&&(this.searchWidgetProject.setSelectedItemList(i),this.searchWidgetOrg.setSelectedItemList(r)),l&&c&&s&&(this.textArea.disabled=!0),0==l&&0==c&&1==s&&0==n.hideProject&&0==n.hideOrg&&(this.searchWidgetProject.hiddenCS="true",this.searchWidgetOrg.hiddenOrg="false",this.searchWidget.hiddenUser="false"),0==s&&0==c&&1==l&&0==n.hideProject&&0==n.hideOrg&&(this.searchWidget.hiddenUser="true",this.searchWidgetOrg.hiddenOrg="false",this.searchWidgetProject.hiddenCS="false"),0==l&&0==s&&1==c&&0==n.hideProject&&0==n.hideOrg&&(this.searchWidgetOrg.hiddenOrg="true",this.searchWidgetProject.hiddenCS="false",this.searchWidget.hiddenUser="false"),0==l&&c&&s&&0==n.hideProject&&0==n.hideOrg&&(this.searchWidgetProject.hiddenCS="true",this.searchWidgetOrg.hiddenOrg="true",this.searchWidget.hiddenUser="false"),0==c&&l&&s&&0==n.hideProject&&0==n.hideOrg&&(this.searchWidgetProject.hiddenCS="true",this.searchWidget.hiddenUser="true",this.searchWidgetOrg.hiddenOrg="false"),0==s&&c&&l&&0==n.hideProject&&0==n.hideOrg&&(this.searchWidget.hiddenUser="true",this.searchWidgetOrg.hiddenOrg="true",this.searchWidgetProject.hiddenCS="false"),1==this.isCSE){this.currentLoginUser=a.getUser().login+"_PRJ",this.currentSearchedUser=this.currentLoginUser;var w={},y={CSE:!0,autocomplete:"off",methodType:"GET",urlService:o.CSEOrgAndProjectURLService,currentUser:this.currentSearchedUser,currentOrg:n.currentOrg,currentCollabSpace:n.currentCollabSpace,webParams:{method:"GET",getQueryParams:function(){return w}}};this.searchWidgetProject&&(this.searchWidgetProject.addOptions(y),this.searchWidgetProject.show(),this.searchWidgetProject.options.CSE=this.isCSE),this.searchWidgetOrg&&(this.searchWidgetOrg.addOptions(y),this.searchWidgetOrg.show(),this.searchWidgetOrg.options.CSE=this.isCSE),this.searchWidget&&(this.searchWidgetOwnerDiv&&this.searchWidgetOwnerDiv.setStyle("display","contents"),this.marginAfterSearchUser&&this.marginAfterSearchUser.setStyle("display","inline-block")),this.titleTargetOwnership.show(),this.isHiddenOrganizationSearch=!1,this.isHiddenCollaborativeSpaceSearch=!1,this.isHiddenResponsibleSearch=!1,this.hideLoadingArea(),this.searchWidgetProject&&(this.searchWidgetProject.options.CSE=this.isCSE),this.searchWidgetOrg&&(this.searchWidgetOrg.options.CSE=this.isCSE),this.searchWidget.options.CSE=this.isCSE}1==n.LifecycleCheckCommand&&(n.boutonLifecycleCheck=new S({attributes:{title:UWA.i18n("")},name:"TopButtonLCCheck",value:UWA.i18n("Check"),className:"default medium TOS_buttonTop ",disabled:!1}),n.boutonLifecycleCheck.addEvents({onClick:function(){u.getInstance().getSecurityContext({onSuccess:function(e){n.listDataForDebug(e)},onFailure:function(e){n.setError(e)}}),this.setDisabled(!0)}}),n.boutonLifecycleCheck.inject(n.ManageButtonRight))}var W=this.SelectedItems.length;if(!this.isCSE&&g==W&&p==W){if(f!=W){var b,I=U.get("securityDenied"),P=[],D=[];D=Object.keys(this.listOfIdsWithData);for(var _=0;_<D.length;_++){var E=[],j=D[_],M="";m[N=this.listOfIdsWithData[j].TOS_Id]&&(I="success"!=(M=m[N])?M:U.get("TOS_Panel_Denied_Policy_Message"));var x=I;E.push(N),E.push(U.TOS_FailStatus),E.push("Failed"),E.push(this.listOfIdsWithData[j].Title),E.push(this.listOfIdsWithData[j].typeDisplayName),E.push(this.listOfIdsWithData[j].Revision),E.push(n.listOfIdsWithData[N].OrganizationTitle),E.push(n.listOfIdsWithData[N].CollaborativeSpaceTitle),E.push(this.listOfIdsWithData[j].Responsible),E.push(x);var L=U.get("TOS_FailStatus");E.push(L),P.push(E)}if(A.launchReportingPanel(P,this.cols,null),0==n.options.wintop)n.dispatchEvent("onCancel");else{n.dispatchEvent("onMaskUnmask",{mask:!1,message:""});var R={error:!0,OKdata:"",KOdata:P,reportingPanelColumns:this.cols,listOfPids:Object.keys(this.listOfIdsWithData)};n.dispatchEvent("onLaunchReportingPanel",R)}return(b={}).message=U.get("TOS_Panel_Denied_Policy_Message"),void this.setError(b)}this.searchWidgetProject&&this.searchWidgetProject.container.searchInput.disable(),this.searchWidgetOrg&&this.searchWidgetOrg.container.searchInput.disable(),this.changeOwnerToggle&&(this.changeOwnerToggle.checkFlag=!0,this.changeOwnerToggle.disabled=!0),this.searchWidgetOwnerDiv&&this.searchWidgetOwnerDiv.setStyle("display","contents"),this.marginAfterSearchUser&&this.marginAfterSearchUser.setStyle("display","inline-block"),this.titleTargetOwnership.show()}if(this.isCSE||g!=W||null!=this.searchWidgetProject&&null!=this.searchWidgetProject.container.searchInput&&this.searchWidgetProject.container.searchInput.disable(),this.isCSE||p!=W||null!=this.searchWidgetOrg&&null!=this.searchOrgTitle&&this.searchWidgetOrg.container.searchInput.disable(),!this.isCSE&&O==W){if(this.options.transferType==o.TransferPerson){I=U.get("securityDenied"),P=[],D=[];D=Object.keys(this.listOfIdsWithData);for(_=0;_<D.length;_++){E=[],j=D[_],M="";m[N=this.listOfIdsWithData[j].TOS_Id]&&(I="success"!=(M=m[N])?M:U.get("TOS_Panel_Denied_Policy_Message"));x=I;E.push(N),E.push(U.TOS_FailStatus),E.push("Failed"),E.push(this.listOfIdsWithData[j].Title),E.push(this.listOfIdsWithData[j].typeDisplayName),E.push(this.listOfIdsWithData[j].Revision),E.push(n.listOfIdsWithData[N].OrganizationTitle),E.push(n.listOfIdsWithData[N].CollaborativeSpaceTitle),E.push(this.listOfIdsWithData[j].Responsible),E.push(x);L=U.get("TOS_FailStatus");E.push(L),P.push(E)}return A.launchReportingPanel(P,this.cols,null),void(0==n.options.wintop&&n.dispatchEvent("onCancel"))}this.changeOwnerToggle&&(this.changeOwnerToggle.checkFlag=!0,this.changeOwnerToggle.disabled=!0),this.searchWidget&&(this.searchWidgetOwnerDiv&&this.searchWidgetOwnerDiv.setStyle("display","contents"),this.marginAfterSearchUser&&this.marginAfterSearchUser.setStyle("display","inline-block"),this.searchWidget.container.searchInput.disable())}this.isCSE||g!=W&&p!=W&&O!=W||this.options.transferType!=o.TransferPerson&&((b={}).message=U.get("TOS_Panel_Denied_Policy_Message"),this.setError(b));if(0!==this.listOfError.length&&1!=this.isCSE){if(this.listOfError.length==this.listOfIds.length){for(P=[],_=0;_<this.listOfError.length;_++){E=[];var N=this.listOfError[_].physicalId;I=this.listOfError[_].Error,M="";m[N]&&(I="success"!=(M=m[N])?M:U.get("TOS_Panel_Denied_Policy_Message")),E.push(this.listOfError[_].physicalId),E.push(U.TOS_FailStatus),E.push("Failed"),E.push(this.listOfIdsWithData[N].Title),E.push(this.listOfIdsWithData[N].typeDisplayName),E.push(this.listOfIdsWithData[N].Revision),E.push(this.listOfIdsWithData[N].Organization),E.push(this.listOfIdsWithData[N].CollaborativeSpace),E.push(this.listOfIdsWithData[N].Responsible),E.push(I);L=U.get("TOS_FailStatus");E.push(L),P.push(E)}if(A.launchReportingPanel(P,this.cols,null),0==n.options.wintop)n.dispatchEvent("onCancel");else{R={error:!0,OKdata:"",KOdata:P,reportingPanelColumns:this.cols,listOfPids:Object.keys(this.listOfIdsWithData)};n.dispatchEvent("onLaunchReportingPanel",R)}}n.onResize(),n.hideLoadingArea()}},_setListOfIds:function(e,t){for(var r=0;r<e.length;r++)this.listOfIds.push(e[r])},_getListOfIds:function(){return this.listOfIds},_parseForGenericService:function(e){var t=[];e.length>0&&null!=e[0].owner&&(e[0].owner.hasOwnProperty("person")&&""!=e[0].owner.person&&t.push({op:"replace",path:"owner",value:e[0].owner.person.personID}),e[0].owner.hasOwnProperty("organization")&&""!=e[0].owner.organization&&t.push({op:"replace",path:"organization",value:e[0].owner.organization.orgID}),e[0].owner.hasOwnProperty("collabSpace")&&""!=e[0].owner.collabSpace&&t.push({op:"replace",path:"project",value:e[0].owner.collabSpace.collabSpaceID})),t.push({op:"replace",path:"TOSComment",value:this.textArea.value});for(var r=[],i=0;i<e.length;i++)e[i].tosBusinessObject.forEach((function(n){var a="bus";n.hasOwnProperty("category")&&(a=n.category),"Class"===a&&(a="bus");var s="",o="",c="",l="";n.hasOwnProperty("organization")&&(s=n.organization),n.hasOwnProperty("owner")&&(o=n.owner),n.hasOwnProperty("project")&&(c=n.project),n.hasOwnProperty("type")&&(l=n.type);var h={method:"PATCH",path:"model/"+a+"/"+n.id,body:t,category:a,organization:s,owner:o,project:c,type:l};e[i].options&&(h.transferParams=e[i].options),r.push(h)}));return r},_getTransferData:function(){var e=null,t=null;if(null!=this.searchWidget&&(t=i.decode(i.encode(this.searchWidget.getNewOwner()))),null!=this.searchWidgetOrg&&null!=this.searchWidgetProject){var r=i.decode(i.encode(this.searchWidgetProject.getNewOwner())),n=i.decode(i.encode(this.searchWidgetOrg.getNewOwner()));n.hasOwnProperty("organization")&&(t.organization={orgID:n.organization.orgID},n.organization.hasOwnProperty("orgTitle")&&n.organization.orgTitle&&(this.targetOrgTitle=n.organization.orgTitle)),r.hasOwnProperty("collabSpace")&&(t.collabSpace={collabSpaceID:r.collabSpace.collabSpaceID},r.collabSpace.hasOwnProperty("collabSpaceTitle")&&r.collabSpace.collabSpaceTitle&&(this.targetCollabSpaceTitle=r.collabSpace.collabSpaceTitle))}t.hasOwnProperty("person")&&(t.person.personID=t.person.personID.replace(/_PRJ$/,""));var a,s=[];a=this._getListOfIds();for(var o=0;o<a.length;o++)s.push({id:a[o].id,category:a[o].category,type:a[o].Type,organization:a[o].Organization,project:a[o].project,owner:a[o].owner});return s=this._removeDuplicateItemsToMove(s),e={tosBusinessObject:s=this._removeFailedIds(s),owner:t,options:{expandAll:!1,expandFolder:!1,expandSubFolder:!1,selectReference:!0,selectInstance:!1}},0==s.length&&(this.boutonValid.setDisabled(!0),e=""),e},_getTransferDataForSearch:function(){var e=null,t=null;if(null!=this.searchWidget&&(t=i.decode(i.encode(this.searchWidget.getNewOwner()))),null!=this.searchWidgetOrg&&null!=this.searchWidgetProject){var r=i.decode(i.encode(this.searchWidgetProject.getNewOwner())),n=i.decode(i.encode(this.searchWidgetOrg.getNewOwner()));n.hasOwnProperty("organization")&&(t.organization={orgID:n.organization.orgID}),r.hasOwnProperty("collabSpace")&&(t.collabSpace={collabSpaceID:r.collabSpace.collabSpaceID})}t.hasOwnProperty("person")&&(t.person.personID=t.person.personID.replace(/_PRJ$/,""));var a,s=[];a=this._getListOfIds();for(var o=0;o<a.length;o++)s.push({id:a[o].id,category:a[o].category});return s=this._removeDuplicateItemsToMove(s),e={tosBusinessObject:s=this._removeFailedIds(s),owner:t,options:{expandAll:!1,expandFolder:!1,expandSubFolder:!1,selectReference:!0,selectInstance:!1}},0==s.length&&(this.boutonValid.setDisabled(!0),e=""),e},_isItemInItemsToMoveList:function(e,t){for(var r=t.length,i=0;i<r;i++){var n=t[i];if(n.id==e.id&&n.category==e.category)return!0}return!1},_removeDuplicateItemsToMove:function(e){for(var t=[],r=e.length,i=0;i<r;i++){var n=e[i];this._isItemInItemsToMoveList(n,t)||t.push(n)}return t},_removeFailedIds:function(e){var t=[],r=!1,i=e.length;if(0==this.listOfFailedIds.length)return e;for(var n=0;n<i;n++){r=!1;for(var a=0;a<this.listOfFailedIds.length;a++)e[n].id==this.listOfFailedIds[a]&&(r=!0);r||t.push(e[n])}return t},_prepareTransferOwnership:function(e){var t="";null!=e&&""!=e&&e.hasOwnProperty("SecurityContext")&&(t=e.SecurityContext);var r=this._getTransferData();if(""!=r)this._transferOwnership(t,r);else{this._perfTimer.stop("CommandExecutionDurationChangeOwnerMove");this._perfTimer.printTimeShowDialogAndProcess(["CommandUIDurationChangeOwnerMove","CommandExecutionDurationChangeOwnerMove","ChangeOnwerMove: transferOwnershipPreCheck","ChangeOnwerMove: canUserChangePOV","ChangeOnwerMove: update","ChangeOwnerMove: checkData"],t)}},_commitTransferOwnership:function(e,t){this.dispatchEvent("onTransferStart");var r=this,n="",a=(this.options.serverName,this.options.serverUri,this.options.launchTransfer),s=(this.caHeader,""),c="",l="",h="",d="";t[0].hasOwnProperty("owner")&&(t[0].owner.hasOwnProperty("person")&&(s=t[0].owner.person.personFullName,d=t[0].owner.person.personID),t[0].owner.hasOwnProperty("organization")&&(c=t[0].owner.organization.orgID),t[0].owner.hasOwnProperty("collabSpace")&&(l=t[0].owner.collabSpace.collabSpaceID),h=r.textArea.value);var u=U.get("TOS_UpdatingOwnership");u=r.options.transferType==o.TransferPerson?U.get("TOS_ChangingResponsible"):t[0].owner.hasOwnProperty("organization")||t[0].owner.hasOwnProperty("collabSpace")?U.get("TOS_UpdatingOwnership"):U.get("TOS_ChangingResponsible"),r._perfTimer.start("ChangeOnwerMove: update"),g.get3DSpaceUrlAsync({onComplete:function(e){var o={Accept:"application/json","content-type":"application/json"};o.SecurityContext=encodeURIComponent(r.securityContext),r.caHeader&&(r.caHeader["DS-Change-Authoring-Context"]&&(o["DS-Change-Authoring-Context"]=r.caHeader["DS-Change-Authoring-Context"]),r.caHeader["DS-Configuration-Authoring-Context"]&&(o["DS-Configuration-Authoring-Context"]=r.caHeader["DS-Configuration-Authoring-Context"]));var p=r._parseForGenericService(t);n=g.getRealPath("assets/transferOwnership.json",widget);var O="",f="GET",m="",S="admin=true";if(null!=r.adminCheckBox&&r.adminCheckBox.isChecked()||(S=""),2==L){for(var T in n=e+"/resources/v1/collabServices/attributes/op/update?"+S,m="passport",f="PUT",p)p[T].queryParams={select:["physicalid","type","current"]};var v={withUpdatedValues:!1,requests:p},C={UXName:r.getUXNameForTracker(),isWebInWin:r.options.wintop,client_app_domain:r.options.client_app_domain,client_app_name:r.options.client_app_name};x.enrichRequestWithMetricsWebInWin(v,C),O=i.encode(v)}var w="";t.length>0&&(w=t[0].owner);var y={requests:p,owner:w};if(r.dispatchEvent("onValidation",y),!0===a){r.displayLoadingArea(),o["Accept-Language"]=widget.lang;var W=g.getTenantID();W&&(n+="&tenant="+W),!0===r.options.wintop&&r.ManageButtonLeft.setStyle("display","contents"),g.partitionedAuthenticatedRequest(n,{type:"json",method:f,proxy:m,headers:o,maxChunkSize:19,cancelCallback:function(){return!1},partisionedProgressLabel:u,progressBarContext:r.ManageButtonLeft,progressBarWaitContext:r.container,data:O,timeout:36e5,onComplete:function(e){r._perfTimer.stop("ChangeOnwerMove: update"),r._onSucceedGenericTransfer(e,s,c,l,d,h)},onFailure:function(e,t,i){r._perfTimer.stop("ChangeOnwerMove: update"),r._onFailure(e,t,i)},onTimeout:function(e){r._perfTimer.stop("ChangeOnwerMove: update"),r._onTimeout()}})}}})},_transferOwnership:function(e,t){this._goTransferOwnership(e,t)},_goTransferOwnership:function(e,t){if(!0!==this.options.genericTransfer);else{for(var r=[],i=0;i<t.tosBusinessObject.length;i++){var n=[];n.push(t.tosBusinessObject[i]),r.push({tosBusinessObject:n,owner:t.owner,options:{expandAll:t.options.expandAll,expandFolder:t.options.expandFolder,expandSubFolder:t.options.expandSubFolder,selectReference:t.options.selectReference,selectInstance:t.options.selectInstance}})}this._commitTransferOwnership(e,r)}},_onSucceedGenericTransfer:function(e,t,r,i,n,a){var s=this,o={},c=[],l={};e.results&&e.results.forEach((function(e){if(e.status>=200&&e.status<306);if(e.status>=200&&e.status<306){if(null==e.body.sameOwner){var t=!1;if(e.body&&e.body.errors)(r=e.body.errors.length)>0&&(t=e.body.errors[r-1]);l[e.body.physicalid]||(e.body.cestamp?c.push({id:e.body.physicalid,type:e.body.type,current:e.body.current,cestamp:e.body.cestamp,error:t}):c.push({id:e.body.physicalid,type:e.body.type,current:e.body.current,cestamp:"",error:t}),l[e.body.physicalid]="processed")}else if(1==e.body.sameOwner)return!1}else{var r;t={message:UWA.i18n("cannot move selection"),code:"ERROR"};if(e.body&&e.body.errors)(r=e.body.errors.length)>0&&(t=e.body.errors[r-1]);if(500==e.status&&e.body&&e.body.errors&&e.body.physicalid){var i=e.body.physicalid;if(null!=s.ListOfEC[i])return l[e.body.physicalid]||(c.push({id:e.body.physicalid,type:e.body.type,current:e.body.current,error:t}),l[e.body.physicalid]="processed"),!0;if(null!=s.ListOfAggrObj[i])return l[e.body.physicalid]||(c.push({id:e.body.physicalid,type:e.body.type,current:e.body.current,cestamp:"",error:t}),l[e.body.physicalid]="processed"),!0}null!=e.body.physicalid&&(l[e.body.physicalid]||(c.push({id:e.body.physicalid,type:e.body.type,current:e.body.current,cestamp:"",error:t}),l[e.body.physicalid]="processed"))}return!0}));Object.keys(s.ListOfEC).forEach((function(e){if(void 0===l[e]){var t={message:UWA.i18n(U.get("TOS_selectOwningProduct")),code:"ERROR"};c.push({id:e,type:"ERROR",current:e,cestamp:"",error:t})}}));Object.keys(s.ListOfAggrObj).forEach((function(e){if(void 0===l[e]){var t={message:UWA.i18n(U.get("TOS_selectOwningProduct")),code:"ERROR"};c.push({id:e,type:"ERROR",current:e,cestamp:"",error:t})}})),c.length>0&&(o.listId=c),this._transferSucceedForUpdate(o,t,r,i,n,a)},_transferSucceedForUpdate:function(e,t,r,i,n,s){var o=this;o.hideLoadingArea();var c=JSON.parse("[]"),l=[],h=[],d=[];for(x=0;x<e.listId.length;x++){var g=e.listId[x].id,p="";if(e.listId[x].hasOwnProperty("cestamp")&&(p=e.listId[x].cestamp),c[g]=x,!e.listId[x].error){d.push(p);var O={physicalid:e.listId[x].id,cestamp:p,type:e.listId[x].type,owner:n,project:i,organization:r};l.push(O)}}d.reduce(((e,t)=>(e.includes(t)||e.push(t),e)),[]);var f=[],m=[];if(e.listId&&e.listId.length>0)for(var S=0;S<e.listId.length;S++){var T=[],v=e.listId[S].id;if(void 0!==o.listOfIdsWithData[v]){if(-1!=T.indexOf(e.listId[S].id))continue;if(T.push(e.listId[S].id),e.listId[S].id,e.listId[S].error){T.push(U.TOS_FailStatus),T.push("Failed"),T.push(o.listOfIdsWithData[v].Title),T.push(o.listOfIdsWithData[v].typeDisplayName),T.push(o.listOfIdsWithData[v].Revision),T.push(o.listOfIdsWithData[v].OrganizationTitle),T.push(o.listOfIdsWithData[v].CollaborativeSpaceTitle),T.push(o.listOfIdsWithData[v].Responsible),e.listId[S].error.originalMessage&&""!=e.listId[S].error.originalMessage?T.push(e.listId[S].error.originalMessage):T.push(e.listId[S].error.message);var C=U.get("TOS_FailStatus");T.push(C),h.push(T)}else{T.push(U.TOS_SuccessStatus),T.push("Success"),T.push(o.listOfIdsWithData[v].Title),T.push(o.listOfIdsWithData[v].typeDisplayName),T.push(o.listOfIdsWithData[v].Revision),null!=o.targetOrgTitle?T.push(o.targetOrgTitle):T.push(o.listOfIdsWithData[v].OrganizationTitle),null!=o.targetCollabSpaceTitle?T.push(o.targetCollabSpaceTitle):T.push(o.listOfIdsWithData[v].CollaborativeSpaceTitle),""!=t?T.push(t):T.push(o.listOfIdsWithData[v].Responsible);C=U.get("TOS_SuccessStatus");T.push(C);p=o.timeStamp;var w="";o.targetCollabSpaceTitle&&(w=o.targetCollabSpaceTitle);var y="";o.targetOrgTitle&&(y=o.targetOrgTitle);var W,b="";b=o.listOfIdsWithData[v].Title,W=o.listOfIdsWithData[v].Revision,b&&W&&(b=b.split(W).join(""));var I={newOwner:n,oldOwner:o.listOfIdsWithData[v].owner,newOwnerFullName:t,oldOwnerFullName:o.listOfIdsWithData[v].Responsible,newCSId:i,newCSTitle:w,newOrgId:r,newOrgTitle:y,newComment:s,cestamp:p,objectID:e.listId[S].id,objectName:b};m.push(I)}f.push(T)}}var P=[],D=[],_={};require(["DS/PADUtils/PADCommandProxy","DS/PADUtils/PADContext"],(function(t,r){var i=r.get();null==i&&(i=o.options.context);var n=[],a=[],s=[];(null!=e&&void 0!==e&&Array.isArray(e.listId)&&e.listId.forEach((function(e){if(void 0!==e.error&&e.hasOwnProperty("error")){var t=null!=e.id.value?e.id.value:e.id;D.push(t),"Workspace"==e.type?n.push(t):"PRIVATE"==e.current||"#DENIED!"==e.current?s.push(t):a.push(t)}})),n.length>0)&&((c={}).modified=n,(l={}).authored=c,i.author(!0),i.onRefresh(l),(h=t.create()).destroy());if(a.length>0||s.length>0){var c,l;(c={}).modified=a,c.deleted=s,(l={}).authored=c;var h;(h=t.create()).authored({authored:!0}),h.refresh(l),h.destroy()}}));var E=Object.keys(o.listOfIdsWithData);null!=e&&void 0!==e&&Array.isArray(e.listId)&&e.listId.forEach((function(e){P.push(e.id);var a=e.id;if("PRIVATE"==e.current||"#DENIED!"==e.current)_[e.id]={id:e.id,newOwnerFullName:t,newOrganization:r,newCollabSpace:i,newOwnerId:n,error:!1,removeFromUI:!0};else if(e.hasOwnProperty("error")&&null!=e.error)if(0==e.error)_[e.id]={id:e.id,newOwnerFullName:t,newOrganization:r,newCollabSpace:i,newOwnerId:n,error:!1,removeFromUI:!1};else if(void 0!==o.listOfIdsWithData[a]&&null!==o.listOfIdsWithData[a]){var s=e.id;_[e.id]={id:s,newOwnerFullName:o.listOfIdsWithData[s].Responsible,newOrganization:o.listOfIdsWithData[s].Organization,newCollabSpace:o.listOfIdsWithData[s].CollaborativeSpace,newOwnerId:n,error:!0,removeFromUI:!1}}}));var j=Math.floor(Date.now());a.publish("DS/Object/update",{metadata:{appId:widget.id,appName:widget.name,timestamp:j,options:{force:!0}},data:{paths:P,attributes:_},version:"1.0"}),a.publish("ENOLC_MOVE_CMD_UPDATE",{metadata:{appId:widget.id,appName:widget.name,timestamp:j,options:{force:!0}},data:{paths:P,attributes:_},version:"1.0"}),o.container.setStyle("opacity","1"),this.dispatchEvent("onTransferSucceed"),o.container.setStyle("opacity","1"),this.dispatchEvent("onTransferFail");if(e.hasOwnProperty("error")){f=[];if(e.hasOwnProperty("listId"))for(var M=e.listId,x=0;x<M.length;x++){T=[];var L=M[x].id,R=o.listOfIdsWithData[L];if(null!=R){T.push(L),T.push(U.TOS_FailStatus),T.push("Failed"),T.push(o.listOfIdsWithData[L].Title),T.push(o.listOfIdsWithData[L].typeDisplayName),T.push(o.listOfIdsWithData[L].Revision),T.push(o.listOfIdsWithData[L].OrganizationTitle),T.push(o.listOfIdsWithData[L].CollaborativeSpaceTitle),T.push(o.listOfIdsWithData[L].Responsible),e.error.originalMessage&&""!=e.error.originalMessage?T.push(e.error.originalMessage):T.push(e.error.message);C=U.get("TOS_FailStatus");T.push(C),f.push(T)}}if(0==f.length){E=Object.keys(o.listOfIdsWithData);for(var F=0;F<E.length;F++){(T=[]).push(E[F]),T.push(U.TOS_FailStatus),T.push("Failed"),T.push(o.listOfIdsWithData[E[F]].Title),T.push(o.listOfIdsWithData[E[F]].typeDisplayName),T.push(o.listOfIdsWithData[E[F]].Revision),T.push(o.listOfIdsWithData[E[F]].OrganizationTitle),T.push(o.listOfIdsWithData[E[F]].CollaborativeSpaceTitle),T.push(o.listOfIdsWithData[E[F]].Responsible),e.error.originalMessage&&""!=e.error.originalMessage?T.push(e.error.originalMessage):T.push(e.error.message);C=U.get("TOS_FailStatus");T.push(C),f.push(T)}}if(A.launchReportingPanel(f,this.cols,null),1==o.options.wintop){var k=l.length,B=[];for(F=0;F<k;F++)B.push(l[F].physicalid);var z={error:!0,OKdata:l,KOdata:"",reportingPanelColumns:this.cols,listOfPids:B};o.dispatchEvent("onLaunchReportingPanel",z)}return null!=o.table&&o.table.clearAllLine(),a.publish(N,{listId:[]}),void(0==o.options.wintop?o.dispatchEvent("onCancel"):o.dispatchEvent("onLaunchReportingPanel",P))}var V="changeOwner";if(0==n.length&&(i.length>0||r.length>0)||0==n.length&&i.length>0&&r.length>0?V="Move":(n.length>0&&(i.length>0||r.length>0)||n.length>0&&0==i.length&&0==r.length)&&(V="changeOwner"),o.securityContext&&o.securityContext.trim().length>0?o.send3DNotification(o.securityContext,V,m):u.getInstance().getSecurityContext({onSuccess:function(e){o.send3DNotification(o.securityContext,V,m)},onFailure:function(e){o.setError(e)}}),A.launchReportingPanel(f,this.cols,null),null!=o.table&&o.table.clearAllLine(),a.publish(N,{listId:[]}),0==o.options.wintop)o.dispatchEvent("onCancel");else if(e.listId&&Array.isArray(e.listId)){var G=[];for(x=0;x<e.listId.length;x++)G.push(e.listId[x].id);z={error:!0,OKdata:l,KOdata:"",reportingPanelColumns:this.cols,listOfPids:G};o.dispatchEvent("onLaunchReportingPanel",z)}else{z={error:!0,OKdata:"",KOdata:f,reportingPanelColumns:this.cols,listOfPids:Object.keys(this.listOfIdsWithData)};o.dispatchEvent("onLaunchReportingPanel",z)}if(0==o.options.wintop&&o.dispatchEvent("onCancel"),o._perfTimer.stop("CommandExecutionDurationChangeOwnerMove"),o.securityContext&&o.securityContext.trim().length>0){o._perfTimer.printTimeShowDialogAndProcess(["CommandUIDurationChangeOwnerMove","CommandExecutionDurationChangeOwnerMove","ChangeOnwerMove: transferOwnershipPreCheck","ChangeOnwerMove: canUserChangePOV","ChangeOnwerMove: update","ChangeOwnerMove: checkData"],o.securityContext)}else u.getInstance().getSecurityContext({onSuccess:function(e){o._perfTimer.printTimeShowDialogAndProcess(["CommandUIDurationChangeOwnerMove","CommandExecutionDurationChangeOwnerMove","ChangeOnwerMove: transferOwnershipPreCheck","ChangeOnwerMove: canUserChangePOV","ChangeOnwerMove: update","ChangeOwnerMove: checkData"],e)},onFailure:function(e){o.setError(e),o._perfTimer.printTime("CommandUIDurationChangeOwnerMove"),o._perfTimer.printTime("CommandExecutionDurationChangeOwnerMove")}})},getTopBar:function(){return this.ManageButtonDiv},onResize:function(){this.container.getSize(),this.mainInterface.getSize();null!==this.searchSection&&(this.searchWidget&&this.searchWidget.hasOwnProperty("hiddenUser")||(this.searchSection.setStyle("width","100%"),this.searchSection.setStyle("display","block"))),null!==this.searchSectionProject&&(this.searchWidgetProject&&this.searchWidgetProject.hasOwnProperty("hiddenCS")||(this.searchSectionProject.setStyle("width","100%"),this.searchSectionProject.setStyle("display","block"))),null!==this.searchSectionOrganization&&(this.searchWidgetOrg&&this.searchWidgetOrg.hasOwnProperty("hiddenOrg")||(this.searchSectionOrganization.setStyle("width","100%"),this.searchSectionOrganization.setStyle("display","block")))},_ManageValidButton:function(e){var t=e;null==e&&(t=!1),t?this.boutonValid.setDisabled(!1):this.boutonValid.setDisabled(!0)},initData:function(e,t){u.getInstance().getSecurityContext(),this.SelectedItems=[],this._addData(e),this.caHeader=t;E.contains("1");this.trackAppContent();for(var r=[],i=[],n=0;n<e.length;n++){e[n].hasOwnProperty("organizationTitle")&&null!=e[n].organizationTitle&&null!=e[n].organizationTitle||(e[n].organizationTitle,e[n].organization),e[n].hasOwnProperty("projectTitle")&&null!=e[n].projectTitle&&null!=e[n].projectTitle||(e[n].projectTitle,e[n].project),null!=e[n].projectTitle&&null!=e[n].projectTitle||(e[n].projectTitle,e[n].project);var a={TOS_Id:e[n].physicalId,Title:e[n].name,Type:e[n].type,Revision:e[n].Revision,Organization:e[n].organization,OrganizationTitle:e[n].organizationTitle,CollaborativeSpace:e[n].project,CollaborativeSpaceTitle:e[n].projectTitle,project:e[n].project,Responsible:e[n].responsibleName,typeDisplayName:e[n].typeDisplayName,Responsible:e[n].responsibleName,owner:e[n].owner,Status:"",physicalId:e[n].physicalId};this.listOfIdsWithData[e[n].physicalId]=a;var s={id:e[n].physicalId,category:e[n].category,mainRevisionId:e[n].physicalId,TOS_Id:e[n].physicalId,Title:e[n].name,Type:e[n].type,Revision:e[n].Revision,Organization:e[n].organization,OrganizationTitle:e[n].organizationTitle,CollaborativeSpace:e[n].project,CollaborativeSpaceTitle:e[n].projectTitle,project:e[n].project,Responsible:e[n].responsibleName,typeDisplayName:e[n].typeDisplayName,Responsible:e[n].responsibleName,owner:e[n].owner,Status:""};if(1==e[n].v_IsEmbeddedComponent){var o=e[n].physicalId;this.ListOfEC[o]=!0}else if(1==e[n].aggrObj){o=e[n].physicalId;this.ListOfAggrObj[o]=!0}else(0==e[n].v_IsEmbeddedComponent||0==e[n].aggrObj)&&r.push(s);if(0==e[n].v_IsEmbeddedComponent&&0==e[n].aggrObj){o=e[n].physicalId;i.push({physicalId:o})}var c=e[n].owner,l=e[n].project,h=e[n].organization,d=c+"."+l,g=c+"."+h;if(null==this.listOwnerCSToId[d]||void 0===this.listOwnerCSToId[d]){var p=[];o=e[n].physicalId;p.push(o),this.listOwnerCSToId[d]=p}else{o=e[n].physicalId;this.listOwnerCSToId[d].push(o)}if(null==this.listOwnerOrgToId[g]||void 0===this.listOwnerOrgToId[g]){p=[],o=e[n].physicalId;p.push(o),this.listOwnerOrgToId[g]=p}else{o=e[n].physicalId;this.listOwnerOrgToId[g].push(o)}var O=l+"."+h;if(null==this.listCSOrgToId[O]||void 0===this.listCSOrgToId[O]){p=[],o=e[n].physicalId;p.push(o),this.listCSOrgToId[O]=p}else{o=e[n].physicalId;this.listCSOrgToId[O].push(o)}}if(this._setListOfIds(r),"editProperties_TransferOwnershipPopup"!=this.options.oldClassName&&this.listOfIdsWithData&&Array.isArray(this.listOfIdsWithData)){var f=Object.values(this.listOfIdsWithData);this.getcanUserChangePOV(f)}},_addData:function(e){this.hideMainErrorArea();var t=[],r=this;null!=e&&(t=e.slice()),g.removeDuplicate(t,(function(e){return e.physicalId})),t.forEach((function(e){var t=new f(e);g.arrayContains(r.SelectedItems,t,(function(e){return e.physicalId}))<0&&r.SelectedItems.push(t)})),this.displayMainLoadingArea(),this._AddSelectedItem(r.SelectedItems),this.displayMainInterfaceArea();var i=[];r.SelectedItems.forEach((function(e){i.push({objectID:e.getPhysicalId()})})),null!=this.searchWidget&&this.searchWidget.setSelectedItemList(i),this.onResize()},_AddSelectedItem:function(e){this._manageAccessList()},_manageAccessList:function(){var e=1,t="";this.SelectedItems&&this.SelectedItems.length>1?e=this.SelectedItems.length:this.SelectedItems&&1==this.SelectedItems.length&&(t=" - "+this.SelectedItems[0].name);var r="";this.options.transferType==o.TransferFull?r+=UWA.i18n("TOS_mainTile"):this.options.transferType==o.TransferPerson?r+=UWA.i18n("ChangeResp_mainTile"):this.options.transferType==o.TransferCollabSpace&&(r+=UWA.i18n("ChangeCollab_mainTile")),0==e?this.itemsArea.hide():1==e?(this.itemsArea.hide(),r+=t):(this.itemsArea.hide(),r+=" - "+e+" "+UWA.i18n("TOS_Objects")),this.dispatchEvent("onTitleChange",r)},showNotification:function(e,t){null==t&&(t=""),null!=this.errorOverlay&&this.errorOverlay.addSuccess(e,t)},showInfoNotification:function(e,t){null==t&&(t=""),null!=this.errorOverlay&&this.errorOverlay.addInfo(e,t)},setError:function(e){this.addError(e)},addError:function(e){if(null!=this.errorOverlay&&e&&e.hasOwnProperty("message")){UWA.i18n(e.message);this.errorOverlay.displayJSONError(i.encode(e))}},displayLoadingArea:function(){null!=this.loadingArea&&this.loadingArea.show()},hideLoadingArea:function(){null!=this.loadingArea&&this.loadingArea.hide()},displayMainInterfaceArea:function(){this.hideAllAreas(),null!=this.mainInterface&&this.mainInterface.show(),null!=this.boutonValid&&this.boutonValid.show()},displayMainLoadingArea:function(){this.hideAllAreas(),null!=this.mainLoading&&this.mainLoading.show()},hideMainComponent:function(){this.hideLoadingArea(),null!=this.mainInterface&&this.mainInterface.hide(),null!=this.boutonValid&&this.boutonValid.hide()},hideMainLoadingArea:function(){null!=this.mainLoading&&this.mainLoading.hide()},hideMainErrorArea:function(){null!=this.mainError&&this.mainError.hide()},hideAllAreas:function(){this.hideMainLoadingArea(),this.hideMainComponent()},addMainError:function(e){null!=this.mainError&&new UWA.createElement("div",{text:e}).inject(this.mainError)},clearAllMainError:function(){null!=this.mainError&&this.mainError.setContent("")},_createSelectedTable:function(){},_createNewLine:function(e){},_onFailure:function(e,t,r){this.dispatchEvent("onTransferFail"),this.hideLoadingArea();var n={};i.isJson(t)&&(t=i.decode(t)),null!=t&&t.hasOwnProperty("error")?n.message=t.error:n={message:UWA.i18n("UnknownError"),code:"ERROR"},this.setError(n)},_onTimeout:function(){this.dispatchEvent("onTransferFail"),this.hideLoadingArea();var e={message:UWA.i18n("ErrorTimeOut"),code:"TO"};this.setError(e)},listDataForDebug:function(e){var t=this;t._perfTimer.start("ChangeOwnerMove: checkData"),g.get3DSpaceUrlAsync({onComplete:function(e){var r={Accept:"application/json"},n=g.getRealPath("assets/transferOwnership.json",widget),a="",s="GET",o="",c=Object.values(t.listOfIdsWithData),l=t.parseDataForCanUserChangePOV(c);2==L&&(n=e+"/resources/v1/collabServices/base/transferOwnership/checkData",o="passport",s="PUT",a=i.encode({requests:l})),t.displayLoadingArea(),r["Accept-Language"]=widget.lang;var h=g.getTenantID();h&&(n+="?tenant="+h),!0===t.options.wintop&&t.ManageButtonLeft.setStyle("display","contents"),r["Accept-Language"]=widget.lang,r.SecurityContext=encodeURIComponent(t.securityContext),g.partitionedAuthenticatedRequest(n,{type:"json",method:s,proxy:o,headers:r,maxChunkSize:19,cancelCallback:function(){return!1},partisionedProgressLabel:"Getting data for check..",progressBarContext:t.ManageButtonLeft,progressBarWaitContext:t.container,symultaneousRequest:!0,data:a,timeout:36e5,onComplete:function(e){t._perfTimer.stop("ChangeOwnerMove: checkData"),t._onLifecycleDataCheckSucceed(e)},onFailure:function(e,r,i){t._perfTimer.stop("ChangeOwnerMove: checkData"),t._onFailure(e,r,i)},onTimeout:function(e){t._perfTimer.stop("ChangeOwnerMove: checkData"),t._onTimeout()}})}})},_onLifecycleDataCheckSucceed:function(e){var t=null;if(e.hasOwnProperty("success")&&!0===e.success&&e.hasOwnProperty("data")&&(t=e.data),null!=t){var r=function(e){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"}))}(JSON.stringify(t,void 0,4)),i=new _;i.body=UWA.extend(document.body);var n="<head><style>pre {outline: 1px solid #ccc; padding: 5px; margin: 5px; overflow-y:scroll; height: 100%; width: 100% } .string { color: green; } ";n+=" .number { color: darkorange; } .boolean { color: blue; } .null { color: magenta; } .key { color: red; }</style></head><body>",new I({className:"LifecycleCommandCheck_Dlg ",title:"Report",body:n+="<pre>"+r+"</pre>",overlay:!0,escapeToClose:!0,closable:!0,animate:!0,resizable:!0,maximizable:!0,autocenter:!0,visible:!0,limitParent:!0}).inject(i.body)}},trackAppContent:function(){var e=this,t={UXName:e.getUXNameForTracker(),models:e.SelectedItems};e.trackerEvent=M.createInitActionEvent(t,e.trackerEvent),M.checkAndTrackPageEvent(e.trackerEvent)},getUXNameForTracker:function(){var e="TransferOwnership";switch(this.options.transferType){case o.TransferCollabSpace:e="Change Collaborative Space";break;case o.TransferPerson:e="Change Owner";break;case o.TransferCollabSpaceSoft:e="Change Collaborative Space Soft";break;case o.TransferFull:e="Move"}return e},send3DNotification:function(e,t,r){var n=this;n._perfTimer.start("ChangeOwnerMove: send3DNotification"),g.get3DSpaceUrlAsync({onComplete:function(e){var a={Accept:"application/json"},o=g.getRealPath("assets/transferOwnership.json",widget),c="",l="PUT",h="",d=n.parseDataFor3DNotification(r);if(2==L){o=e+"/resources/lifecycle/3dnotification/notifymoveshare";o+="?command="+t+"&",h="passport",l="PUT",c=i.encode({requests:d})}n.displayLoadingArea(),a["Accept-Language"]=widget.lang;var u=g.getTenantID();u&&(o+="tenant="+u),a["Accept-Language"]=widget.lang,a.SecurityContext=encodeURIComponent(n.securityContext),s.authenticatedRequest(o,{method:l,proxy:h,type:"json",timeout:108e5,data:c,headers:a,onComplete:function(e){},onFailure:function(e,t,r){},onTimeout:function(){}})}})},_create_UUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}})})),define("DS/TransferOwnershipWidget/TransferOwnershipWidget",["DS/TransferOwnershipWidget/component/TransferOwnershipWidget"],(function(e){})),define("DS/TransferOwnershipWidget/popup/TransferOwnershipPopup",["UWA/Controls/Abstract","DS/TransferOwnershipWidget/component/TransferOwnershipWidget","DS/TransferOwnershipWidget/TransferOwnershipConstant","DS/ENOFloatingPanel/ENOFloatingPanel","DS/UIKIT/Mask","css!DS/TransferOwnershipWidget/popup/TransferOwnershipPopup.css"],(function(e,t,r,i,n){"use strict";return e.extend({defaultOptions:{className:"",context:null,ForbiddenChar:'"#$@%,?\\<>[]|:',transferType:r.TransferFull,serverName:"",serverUri:"",launchTransfer:!0,genericTransfer:!1,activeDnD:!1,activeOptions:!1,activeSummaryButton:!1,activeHistoryButton:!1,activeAdminCheckBox:!1,removeAtClose:!0,odtMode:!1},init:function(e,t,r,i){this.defaultOptions.activeAdminCheckBox=widget.getBool("admin"),this._parent(t),this.initUI(e,widget,i)},onRefresh:function(){null!=this.TOSWidget&&this.TOSWidget.onRefresh()},actionOnMove:function(){this.TOSWidget&&this.TOSWidget.actionOnMove()},destroy:function(){this.TOSWidget&&this.TOSWidget.destroy(),this._parent()},setSecurityContext:function(e){this.TOSWidget.setSecurityContext(e)},initUI:function(e,a,s){var o=this;o.widgetPere=e;var c="TOSP_PopupDial";o.options&&o.options.transferType===r.TransferPerson&&(c="TOSP_PopupDial_Change_Owner"),o.TOSWidget=new t(o.widgetPere,s,{className:"transferOwnership_innerComponent",context:o.options.context,ForbiddenChar:o.options.ForbiddenChar,setCloseButton:!0,showTopBar:!1,transferType:o.options.transferType,launchTransfer:o.options.launchTransfer,genericTransfer:o.options.genericTransfer,topClassHeight:c,serverName:this.options.serverName,serverUri:this.options.serverUri,activeDnD:this.options.activeDnD,activeOptions:this.options.activeOptions,activeSummaryButton:this.options.activeSummaryButton,activeHistoryButton:this.options.activeHistoryButton,activeAdminCheckBox:this.options.activeAdminCheckBox,oldClassName:this.options.className,securityContext:this.options.securityContext,odtMode:this.options.odtMode,persistId:"transferOwnershipDialogId",id:"transferOwnership_innerComponent",events:{onCancel:function(){o._close(),o.dispatchEvent("onCancel")},onValidation:function(e){o.dispatchEvent("onValidation",e)},onTitleChange:function(e){o.container.setTitle(e)},onMaskUnmask:function(e){if(e)if(1==e.mask){var t="";e.message&&(t=e.message),n.mask(o.container.elements.wrapper,t)}else n.unmask(o.container.elements.wrapper)}}}),o.container=new i({title:"ENOVIA",className:c+" "+this.options.className,footer:o.TOSWidget.getTopBar(),body:o.TOSWidget,overlay:!0,closable:!0,animate:!0,resizable:!0,persistId:"transferOwnershipDialogId",events:{onResizeFloating:function(){o.actionOnMove(),o.TOSWidget&&o.centerIt()},onMove:function(){o.actionOnMove()},onClose:function(){o._close()},onHide:function(){o._close()}}}),o.container.inject(e)},_changeLeft:function(e){this.__changeValue("left",e)},_changeTop:function(e){this.__changeValue("top",e)},__changeValue:function(e,t){var r="auto"===t;this.container.elements.container.setStyle(e,r?t:t+"px")},centerIt:function(){var e=this.container.elements.container;if(e){var t=this.container.elements.container.parentElement;this.parent&&(t=this.parent);var r=t.getSize(),i=e.getSize(),n=r.width/2-i.width/2,a=r.height/2-i.height/2;this._changeLeft(n),this._changeTop(a)}},show:function(e,t){this.container.show(),this.TOSWidget.initData(e,t)},close:function(){this.container.hide(),!0===this.options.removeAtClose&&this.destroy()},_close:function(){this.dispatchEvent("onClose"),this.close()}})}));