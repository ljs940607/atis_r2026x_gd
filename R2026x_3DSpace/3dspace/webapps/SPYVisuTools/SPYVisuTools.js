/*!  Copyright 2025 Dassault Systemes. All rights reserved. */
define("DS/SPYVisuTools/SPYTexturesProcessor",["UWA/Core","UWA/Class","DS/SMAMpwManagers/SMAMpwTextureMapProcessor"],(function(e,a,o){"use strict";return a.singleton({updateTextures:function(e,a,i,r,s){let n=i,t=a;if(t&&t.hasMinMax()&&(this._textureMapProcessor||(this._textureMapProcessor=new o),this._textureMapProcessor)){let a=s&&s.animationScope?s.animationScope:t.getAnimationScope(n),o=t.getGroupInfo(n);if("Model"===t.category&&"Contour"===t.plotType){n=0;let e=t.getLegend();e&&(o.localMin=e.localMin[n],o.localMax=e.localMax[n],o.groupMin=e.localMin[n],o.groupMax=e.localMax[n],a.min=e.localMin[n],a.max=e.localMax[n])}if(a&&!isNaN(a.min)&&!isNaN(a.max)&&o&&!isNaN(o.groupMin)&&!isNaN(o.groupMax)){let i=r?a.min:o.groupMin,l=r?a.max:o.groupMax,M={},c={};switch(isNaN(o.userMin)&&isNaN(o.userMax)||(c.from={min:isNaN(o.userMin)?o.localMin:o.userMin,max:isNaN(o.userMax)?o.localMax:o.userMax},c.to={min:o.localMin,max:o.localMax}),t.getRetexturingMode(n,r)){case"NEUTRAL":M.from=void 0,M.to=void 0;break;case"EXTEND":M.from={min:o.localMin,max:o.localMax},M.to={min:i,max:l};break;case"REDUCE":M.from={min:isNaN(o.userMin)?i:o.userMin,max:isNaN(o.userMax)?l:o.userMax},M.to={min:o.localMin,max:o.localMax},c=void 0}let u={node:e,childCondition:function(e){return e&&e.SPObj&&e.SPObj.supportedModes.search("ENG")>=0},frameCondition:function(e,a){let o=!s||(!s.visibleFrameOnly||e.children[a].visible),i=!s||(!s.specificFrameOnly||s.frameIndex===a);return o&&i},rangeTransformations:[M,c],precision:s&&!isNaN(s.valueDisplayPrecision)?s.valueDisplayPrecision:3};this._textureMapProcessor.applyToNode(u)}}},searchForUVTransform:function(e){return this._textureMapProcessor||(this._textureMapProcessor=new o),this._textureMapProcessor.searchForUVTransform(e)}})}));