define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Relations/RelationsColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n,r){var o,i;return o=function(e){var t={};t.node=e.nodeModel,r.executeCommand("Relations",t)},i=function(i){var a,s,l=void 0,c=this,u=this.getColumnOrGroup(i.columnID),d=i.nodeModel.getAttributeValue(u.dataIndex);return e.is(d,"array")&&d.length>0&&(s=(a=d)[0],l={icon:{iconPath:n.getIconURLFromKey(s.Icon),iconSize:{width:"22px",height:"22px"}},label:s.Value,iconName:s.Icon,func:r.areModuleColumnsImmutable(t.getId())?null:o.bind(c,i),relations:a}),l},{getCellValueForExport:function(t){var n,r,o="";return t.rowID<0?t.cellModel:(n=this.getColumnOrGroup(t.columnID),r=t.nodeModel.getAttributeValue(n.dataIndex),e.is(r,"array")&&r.forEach((function(t,n){e.is(t.Value)?o+=t.Value:o+=t.toString(),n!==r.length-1&&(o+=", ")})),o)},getCellValue:function(e){return i.call(this,e)},hasCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.options.grid;return Array.isArray(n[t.dataIndex])&&0!==n[t.dataIndex].length},getCellClassName:function(t){var n,r="";return e.is(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(t.dataIndex),r=Array.isArray(n)&&n.length>1?"relation-column-multivalued":"relation-column"),r}}}})),define("DS/DELPPWViewBehaviors_FD02/BulkTreeSearchHelper",["UWA/Core"],(function(e){"use strict";return function(t,n){var r,o,i,a,s,l,c,u;return r=function(t,n){var r,o=-1,i=t.length;for(r=0;r<i;r++)if(e.equals(t[r],n)){o=r;break}return o},o=function(e,t){var n,r,o=[],i=e.length;for(n=e.indexOf(t);n>-1&&(o.push(n),!((r=n+1)>=i));)n=e.indexOf(t,r);return o},i=function(t,n,r){var o,i,a;a=Array.isArray(r)?r:[r],e.is(t)&&(i=t[o=JSON.stringify(n)],e.is(i)?t[o]=i.concat(a):t[o]=a)},a=function(e,t){var n=[];return 1===t.length?n=n.concat(e):t.length>1&&e.forEach((function(e){var r,o,i,a,s=e;for(r=1;r<t.length;r++){for(i=s.getChildren(!0),a=!1,o=0;o<i.length;o++)if(i[o].getInstancePID()===t[r]){s=i[o],a=!0;break}if(!a)break}a&&n.push(s)})),n},s=function(t,n){var r,o,i,a,s,l=t;if(l.isVisible()){for(r=t.isRoot(!0)?0:1;r<n.length&&(s=l.getVisibleChildren(!1,!0),e.is(s)&&0!==s.length);r++)for(o=0;o<s.length;o++)if(s[o].getInstancePID()===n[r]){l=s[o];break}a=l}else{for(i=l.getParent();!i.isVisible();)i=i.getParent();a=i}return a},l=function(n){e.is(n,"function")&&t.getRoots(!0).forEach((function(e){var t,r,o=[];for(o.push(e);o.length>0;)t=o.pop(),n(t),r=t.getChildren(!0),Array.isArray(r)&&r.forEach((function(e){o.push(e)}))}))},c=function(r){var o;return o=t.getRoots(!0).map((function(e){return e.getReferencePID()})),r.map((function(t){var r,i=n.getInstance(t[0]),a=null;return e.is(i)&&(r=i.get("isAggregatedBy"),o.indexOf(r)>-1&&(a=r)),a}),[])},u=function(n){var r,a,s,u,d=Object.create(null),g=!1,f=!1;for(s=0,u=(r=c(n)).length;s<u&&(e.is(r[s])?g||(g=!0):f||(f=!0),!g||!f);s++);return g&&t.getRoots(!0).forEach((function(t){var a,s=t.getReferencePID();e.is(s)&&(a=o(r,s)).length>0&&a.forEach((function(e){i(d,n[e],t)}))})),f&&(a=r.map((function(t,r){var o=null;return e.is(t)||(o=n[r][0]),o})),l((function(t){var n,r=t.getInstancePID();e.is(r)&&(n=o(a,r)).length>0&&n.forEach((function(e){i(d,t.getAbsolutePath(),t)}))}))),d},{getNodeModels:function(t,n){var s,c,u,d,g=!e.is(n)||n,f=[],p=[],h=[],m=[],v=[],I=[],D=Object.create(null),P={found:[],notFound:[]};return(t=Array.isArray(t)?t:[t]).forEach((function(e){Array.isArray(e)?p.push(e):f.push(e)})),c=p.map((function(e){return e[0]})),l((function(t){var n,r,a,s=!1;a=t.getInstancePID(),e.is(a)&&(s=(n=f.indexOf(a))>-1,(r=o(c,a)).length>0&&r.forEach((function(e){i(D,p[e],t)}))),s||(s=(n=f.indexOf(t.getReferencePID()))>-1),s&&(v.push(f[n]),h.push(t))})),Object.keys(D).forEach((function(e){var t,n,r=JSON.parse(e);t=D[e],I.push(r),n=a(t,r),m=m.concat(n)})),g||(h.length<f.length&&(u=f.filter((function(e){return-1===v.indexOf(e)}))).length>0&&(P.notFound=P.notFound.concat(u)),m.length<p.length&&(d=p.filter((function(e){return-1===r(I,e)}))).length>0&&(P.notFound=P.notFound.concat(d))),(s=h.concat(m)).length>0&&(s=s.filter((function(e,t,n){return n.indexOf(e)===t})),P.found=s),P},getLastVisibleNodeModels:function(t){var n,r=[],a=[],u=new Set,d=Object.create(null);return t.forEach((function(e){Array.isArray(e)?a.push(e):r.push(e)})),n=c(a).filter((function(t){return e.is(t)})),l((function(t){var s,l,c,u,g=!1,f=t.getInstancePID();t.isRoot(!0)&&(c=t.getReferencePID(),e.is(c)&&(l=o(n,c)).length>0&&l.forEach((function(e){i(d,a[e],t)}))),e.is(f)&&(g=(s=r.indexOf(f))>-1),g||(g=(s=r.indexOf(t.getReferencePID()))>-1),g&&(u=[r[s]],i(d,u,t))})),u=Object.keys(d).reduce((function(e,t){var n,r=JSON.parse(t);return n=d[t],Array.isArray(n)&&n.length>0&&n.forEach((function(t){var n;n=s(t,r),e.add(n)})),e}),u),Array.from(u)},searchPathsPartially:function(e){var t,n,o,i={found:[],notFound:[]};return e.length>0&&(t=u(e),n=Object.keys(t).map((function(e){return JSON.parse(e)})),i.found=i.found.concat(n),n.length<e.length&&(o=e.filter((function(e){return-1===r(n,e)}))).length>0&&(i.notFound=i.notFound.concat(o))),i},traverseTreeListView:function(e){l(e)}}}})),define("DS/DELPPWViewBehaviors_FD02/View",[],(function(){"use strict";return{plugins:["View"],creator:function(e,t,n){return{onStart:function(e){},onStop:function(){},extend:function(e){return n.extend(e)}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MCRColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return t.singleton({name:"MCRColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return!0},getCellTypeRepresentation:function(e){var t="string";return e.isHeader?"string":("Preferred"===e.dataIndex&&(t="functionIcon"),t)},getCellClassName:function(e){return""},getCellValue:function(e){var t=e.nodeModel.options.grid;return"Preferred"===e.dataIndex?""===t[e.dataIndex]?"FALSE":"TRUE":t[e.dataIndex]},getCellSemantics:function(e){var t;return"Preferred"===e.dataIndex&&(t={icon:e.nodeModel.options.grid.Preferred}),t},setValue:function(e,t,n){},getCellEditableState:function(e){return!1}})})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/HideShow3DColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n){return{getNonModelDataIndexes:function(){return["hide_show_3D"]},hasCellValue:function(){return!0},getCellValue:function(e){return e.nodeModel.options.hideShow3D},setCellValue:function(r){var o,i,a,s=r.nodeModel,l=!1,c=t.getBehavior("Viewer3DBehavior");o=s.options.hideShow3D,e.is(o)&&(l=!o),e.is(c)?(a=e.Promise.deferred(),c.change3DVisiblity(s.isRoot(!0)?s.getReferencePID():s.getAbsolutePath(),l,a),a.promise.then((function(){s.updateOptions({hideShow3D:l})})).catch((function(e){t.log((l?"Showing":"Hiding")+" 3D failed: "+e),t.warn(n.getNLSValue("HideShow3D.error")),s.updateOptions({hideShow3D:o})}))):(i={nodeId:s.getInstancePID()||s.getReferencePID(),isVisible:l,absPath:s.getAbsolutePath()},t.notify("change3DVisibility",i),s.updateOptions({hideShow3D:l}))}}}})),define("DS/DELPPWViewBehaviors_FD02/SearchBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["SearchPlugin","ResourcePlugin","UXComponentsPlugin","WebServicePlugin"],creator:function(t,n,r,o,i,a){var s,l,c,u,d,g,f;return s=function(t,a){var s,f,p,h=i.getComponent("Button"),m=i.getComponent("LineEditor"),v=i.getComponent("Element"),I=e.is(a.title)?a.title:o.getNLSValue("Dialog.InsertInstanceCmd.Title"),D=e.is(a.placeholder)?a.placeholder:o.getNLSValue("Search.InsertInstanceCmd.Placeholder"),P=e.is(a.searchTitle)?a.searchTitle:o.getNLSValue("Search.InsertInstanceCmd.Title"),y=o.getNLSValue("InsertInstanceCmd.INSERT"),C=new v("div",{class:"search-dialog-container"}),b=new v("div",{class:"search-tree-container"}).inject(C);e.is(u)?((f=new m({placeholder:D,autoCommitFlag:!0}).inject(b)).addEventListener("change",(function(){f.value.length>0?l.buttons.Ok.disabled=!1:l.buttons.Ok.disabled=!0,e.is(l.buttons.Apply)&&(l.buttons.Apply.disabled=!0)})),"duplicate"===a.command?(y=o.getNLSValue("InsertInstanceCmd.INSERTAsCOPY"),I=o.getNLSValue("Dialog.InsertAsCopyCmd.Title"),p={Cancel:new h({onClick:function(){d()}}),Ok:new h({label:y,visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){g([s],t)}})},f.disabled=!0,f.placeholder=o.getNLSValue("Search.InsertInstanceAsCopyCmd.Placeholder")):p={Cancel:new h({onClick:function(){d()}}),Ok:new h({label:o.getNLSValue("InsertInstanceCmd.SEARCH"),icon:"search",visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){c(),d()}}),Apply:new h({label:y,visibleFlag:!0,disabled:!0,onClick:function(){var e=[];e.id=s,t([e]),d()}})},l=u.create("Dialog",{domId:"search-dialog-container",identifier:"search-dialog-container",title:I,modalFlag:!0,resizableFlag:!0,visibleFlag:!1,closable:!0,content:C,height:100,width:300,buttons:p}),r.subscribeToSelectEvent((function(t){var n,r,o,i,c=t.data;e.is(c)&&Array.isArray(c.paths)&&c.paths.length>0&&c.paths[0].length>0&&(n=c.paths[0][0],e.is(c.attributes)&&(r=c.attributes[n],e.is(r)&&(o=r.type,i=r.label,s="",f.value="",-1!==a.types.indexOf(o)?(s=n,f.value=i,"duplicate"===a.command?l.buttons.Ok.disabled=!1:l.buttons.Apply.disabled=!1):"duplicate"===a.command&&(l.buttons.Ok.disabled=!0))))})),l.close=function(){d()}):n.debug("uxFactoryBehavior is not available."),c=function(){r.activate(P,t,e.is(a.types)?a.types:null,[f.value])}},d=function(){e.is(l)&&(l.destroy(),l=void 0)},g=function(t,r){var i,s,l,c,u={},g={};l={selectedRefPIDs:t,oneDelmiaAggregationMode:n.getPreferenceValue("oneDelmiaAggregationMode")},i=function(t,r){var i;e.is(r)&&e.is(r.message,"string")?((i=o.getNLSValue(r.message,null,"Error","Title"))==="Error."+r.message+".Title"&&(i=o.getNLSValue(g.replaceType,null,"Error","Title"),n.debug(r.message)),f(u,i,null,g,c)):f(u,o.getNLSValue(g.replaceType,null,"Error","Title"),null,g,c)},s=function(e){var t;t=e.duplicatedPIDs.map((function(e){return{id:e}})),r(t),n.notify("stopProgress",u)},d(),a.webServiceRequest({url:"dsmfg/private/V0/invoke/duplicateStructure",method:"POST",headers:a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(l),onFailure:i,onTimeout:i,onCancel:i,onComplete:s}),n.notify("startProgress",u)},f=function(t,r,o,i,a){var s=i||{},l=!e.is(s.popupMessage)||s.popupMessage;e.is(o)&&e.is(o.message,"string")&&(r+="\n"+o.message),!0===l?n.warn(r,a):n.log(r,a),n.notify("stopProgress",t),e.is(s.onFailure,"function")&&s.onFailure.call(null,r)},{onStart:function(){u=n.getBehavior("UXFactoryBehavior")},onStop:function(){},activate:function(e,t,n,o){r.activate(e,t,n,o)},showSearchDialoguAndActivate:function(t,n){var r=e.is(n)?n:{};s(t,r),l.show()},onClose:function(){d()}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Relations/RelationsUtil",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i,a){var s,l,c;return c=function(t,n,r,i){var a;return!(o.getImplementLinkType()===i&&(a=o.getPathToScope(r),!e.equals(t,a)&&!e.equals(n,a)))},s=function(a,s,l,c){var u,d,g,f,p,h,m,v={},I=[],D=e.is(a,"array")?a:[a];if(u=l||s,e.is(u)){for(I=n.getImpacted(u),g=t.getBehavior("LinkBehavior"),n.getReference(u),m=0;m<I.length;m++)switch((p=I[m]).get("type")){case"DELAsmProcessCanUseCnx":g.getSecondaryRscLinksFromPrimaryLink(p).forEach((function(e){(h=e.clone()).set("from",p.get("from")),I.splice(m+1,0,h),m+=1}));break;case"SecondaryCandidateResourceLink":f=g.getConnection(p.get("from")),e.is(f)&&((h=p.clone()).set("from",f.get("from")),I.splice(m,1,h))}return D.forEach((function(a){var u;"relation"===a.split(".")[1]&&(v[a]=[],(u=r.getRelationsConfiguredOnColumn(a))&&I.forEach((function(g){var f,p,h,m,I,D,P,y,C,b,S,w,R,V,L=g.get("from"),A=g.get("to"),E=g.get("type"),N=!1,T=null,M="",B=function(t,n){var r="";return t.length>0?t.forEach((function(t){if("Relation"===n||"relation"===n){let n=g.get("type");if("ProcessImplementLinkOcc"!==n&&"ItemSpecOcc"!==n||"V_usage"!==t.name)S=e.is(g.get(t.name))?g.get(t.name):"";else{let e=o.getRoleFromModelOrComputed(g.get("PID"));S=e.nlsText}}else S=e.is(p.get(t.name))?p.get(t.name):"";""!==r&&(r+=" "),r+=S})):r=e.is(p)?p.get("V_Name")||p.get("name")||p.get("PLM_ExternalId"):i.getNLSValue("TableView.RelationsColumn.Unknown"),r},O=function(t,n){return C=e.is(t)&&e.is(t.display_icon)?t.display_icon:null,b="relation"===C?E:n};if(Array.isArray(L)&&Array.isArray(A)){if(L=(w=L)[w.length-1],A=(R=A)[R.length-1],Array.isArray(c)&&e.is(o.isImplementLinkValidForOccPath,"function")&&!o.isImplementLinkValidForOccPath(w,R,c))return}else Array.isArray(L)||!Array.isArray(A)||"ProcessImplementLink"!==E&&"ProcessImplementLinkOcc"!==E&&"ItemSpecOcc"!==E||(V=A[A.length-2],A=A[A.length-1]);if(f=l===L||s===L?A:L,m=e.is(E)?E:null,I=e.is(u[m])?u[m]:null,e.is(I)&&e.is(I.attribute_source)&&e.is(I.direction))switch(I.direction){case"To":N=l===L||s===L;break;case"From":N=l===A||s===A;break;case"Both":N=!0;break;default:N=!1,t.debug("Direction configured for "+m+" in XML is invalid.")}if(!0===N){f&&(Array.isArray(f)?p=n.getInstance(f[f.length-1]):V?(h=n.getInstance(V),p=n.getReferenceModel(f)):"ProcessImplementLink"===m&&n.isInstance(f)?(h=n.getInstance(f),p=n.getReferenceModel(h._attributes.isInstanceOf)):p=n.getReferenceModel(f));let t,o,i=I.attribute_source.split(",");for(M="",o=0;o<i.length;o++){switch(P=i[o]){case"Relation":D=m;break;case"Type":D=e.is(p)?p.get("type"):null}if(y=r.getRelationsColumnDisplayOptions(D),d=e.is(D)?u[D]:null,r.isObjectConstraint()&&a===r.getConstraintRelationName()?d&&(T=d):T=e.is(y.Attribute)?y.Attribute:[],0===o&&e.is(D)&&e.is(h)&&("Installation"===D||"Transform"===D)&&(M="("+h._attributes.PLM_ExternalID+") "),"ItemSpecOcc"===m){var F=n.getReferenceModel(p);if(e.is(F))D=F.get("V_discipline")}t=B(T,P),t="Relation"===P&&"Relation,Type"===i.toString()?"("+t+")":t,M+=t,b=O(y,D)}v[a].push({Icon:b,Value:M})}})))})),v}},l=function(r,o,i){var a,l={},u=[],d=t.getBehavior("WUXNodeModelBehavior");if(e.is(d)){if(e.is(o))return n.getImpacted(o,!1,{excludeRelationTypes:["PrimaryResourceLinkDetail","SecondaryResourceLinkDetail"]}).forEach((function(t){var g,f,p,h,m=t.get("from"),v=t.get("to"),I=t.get("type");e.is(m,"array")&&e.is(v,"array")&&e.is(i,"array")&&(m=(p=m)[p.length-1],v=(h=v)[h.length-1],!c(p,h,i,I))||(f=o===m?v:m,e.is(f)&&(g=e.is(f,"array")?n.getInstance(f[f.length-1]):n.getReference(f),a=d.getNodeInfo(g.get("PID"),!0),e.is(a)&&(e.is(a.instancePID)?l=s(r,a.referencePID,a.instancePID,i):e.is(a.referencePID)&&(l=s(r,a.referencePID,null,i)),e.is(l)&&(u[g.id]={attributes:l}))))})),u}else t.debug("nodeModelBehavior is not available to update the relation attributes.")},{fillNodeOptions:function(o,l,c,u){var d,g,f=!e.is(c)?o.referencePID:c.PID,p=s(l,f,null,u),h=n.needToQueryForConnections(f),m=r.getInverseRelationNameSet(),v=t.getPreferenceValue("navigateOnIndex"),I="Index"===v;for(g in p)if(p.hasOwnProperty(g)){if(I&&h&&m.has(g)){e.is(o.grid[g])||(o.grid[g]=[{Value:i.getNLSValue("Info.RelationsNotLoaded.Title")}]);continue}Array.isArray(o.grid[g])?(o.grid[g]=o.grid[g].filter((function(e){return e.Value!==i.getNLSValue("Info.RelationsNotLoaded.Title")})),e.is(c)&&(o.grid[g]=o.grid[g].concat(p[g]))):o.grid[g]=p[g]}if("IndexRelationsOnDemand"===v&&h)for(d in o.grid)o.grid.hasOwnProperty(d)&&"relation"===d.split(".")[1]&&(a.isMGALoadRelationsOnDemand()?o.grid[d].push({Value:"",Icon:"LinksNotFetched"}):o.grid[d].push({Value:i.getNLSValue("Info.RelationsNotLoaded.Title"),Icon:null}));return o},getRelationAttributes:function(n,o,i){var a,c,u,d,g,f,p,h,m=[],v=[],I=t.getBehavior("WUXNodeModelBehavior");if(e.is(I)){if(a=function(t){p=I.getNodeInfo(t),e.is(p,"array")&&p.forEach((function(t){e.is(t.instancePID)?(h=e.is(t.absPath,"array")?t.absPath:null,f=s(o,t.referencePID,t.instancePID,h),v[t.absPath]={attributes:f}):e.is(t.referencePID)&&(f=s(o,t.referencePID),v[t.referencePID]={attributes:f})}))},n.isConnection())a(n.get("from")),Array.isArray(n.get("to"))&&"ProcessImplementLink"===n.get("type")?a(n.get("to")[n.get("to").length-1]):a(n.get("to"));else if(g=n.changedAttributes(),e.is(g))for(c=n.get("type"),d=r.getRelationsColumnDisplayOptions(c),e.is(d)?d.Attribute.forEach((function(e){m.push(e.name)})):m[0]="V_Name",u=0;u<m.length;u++)if(g.hasOwnProperty(m[u])){v=l(o,n.get("PID"),i);break}return v}t.debug("nodeModelBehavior is not available to update the relation attributes.")}}}})),define("DS/DELPPWViewBehaviors_FD02/BI/BIBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","ImplementPlugin","DicoPlugin"],creator:function(t,n,r,o,i,a,s,l){var c,u,d,g={},f={},p=[],h=function(){return c.pprTypes.indexOf("PROCESS")>-1||c.pprTypes.indexOf("SERVICE")>-1},m=function(){return c.pprTypes.indexOf("PART")>-1||c.pprTypes.indexOf("PRODUCT")>-1},v=function(t){var r,o,i={colorCode:f.Inconsistent.colorCode,tooltip:f.Inconsistent.label,status:"Inconsistent"},s=(o=n.getBehavior("TreeListViewBehavior").getColumnsByDisplayType("BIEssentials")).length>0?o[0]:null,c={nodeOptions:{},taggerOptions:{}};if(""===t)return c={nodeOptions:null,taggerOptions:null};if(e.is(s)){if("ManufacturingItemUpdateStatus"===s&&(r=t.split(","))[r.length-1],e.is(p[t]))i=p[t];else{const e=t.split(","),n=e[e.length-1];l.getParentTypes(a.getReferenceModel(n).get("type")).includes("VPMRepReference")&&(i={colorCode:"transparent",tooltip:""})}c.nodeOptions[s]={colorCode:i.colorCode,tooltip:i.tooltip,status:i.status},c.taggerOptions={absolutePath:t,status:i.status,dispValue:i.tooltip}}return c},I=function(t){e.is(t,"array")&&t.length>0&&(t.forEach((function(t){var n,r,o,i,a=t.get("status"),s=t.get("type"),l=e.is(t.get("isRef")),c=[];"ProductsAssignmentStatus"===s?(n=(c=(i=t.get("id")).split(","))[c.length-1],r=g[a].colorCode,o=g[a].label):"MfgItemsUpdateStatus"===s&&(n=(c=(i=t.get("id")).split(","))[c.length-1],e.is(t.get("MadeFrom_UseCase_AttValue"))&&"MadeFrom_UseCase_Att_Remove"!==a&&(a=a+"."+t.get("MadeFrom_UseCase_AttValue")),r=f[a].colorCode,o=f[a].label),p[e.is(i)?i:n]={PID:n,colorCode:r,tooltip:o,type:s,occurrencePath:i,status:a,isRef:l}})),function(){var t,o=n.getBehavior("WUXNodeModelBehavior"),i=n.getBehavior("TaggerBehavior"),s=o.getAllDescendants();o&&Object.keys(p).length>0&&(o.prepareUpdate(),t={callback:function(t,n){!0===r.getBICmdState()&&t.forEach((function(e){var t=e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),n=v(t);n.nodeOptions&&e.updateOptions(n.nodeOptions),i&&n.taggerOptions&&i.addExternalTags(n.taggerOptions)})),e.is(n,"function")&&n()},globalArray:s,context:this,blockSize:100},a.getExecuteByBlockPromise(t).then((function(){o.pushUpdate(),i.displayExternalTags(),n.notify("BIDone",n.getId())})))}())},D=function(e){var t;h()?t=e.ProcessStatus:m()&&(t=e.ProductStatus),I(t)},P=function(e){(h()||m())&&I([e])},y=function(e){(h()||m())&&I([e])},C=function(){var t,r=n.getBehavior("TreeListViewBehavior"),o=n.getBehavior("WUXNodeModelBehavior"),i=n.getBehavior("TaggerBehavior"),a=r.getColumnsByDisplayType("BIEssentials"),s={};p=[],r&&o&&a&&(t=o.getAllDescendants(),a.forEach((function(n){s[n]={colorCode:"transparent",tooltip:""},e.is(t,"array")&&0<t.length&&o.withTransactionUpdate((function(){t.forEach((function(e){e.updateOptions(s)}))}))})),i&&i.removeExternalTags())},b=function(){var e=n.getBehavior("WUXNodeModelBehavior");r.getBICmdState()&&e.getSelectedNodesInfo().length>0&&r.computeBI()},S=function(e){var t=Array.isArray(e)?e:[e],n=!1;return r.isBIComputed()&&(n=t.some((function(e){return e.get("type")===u}))),n},w=function(t){var o,i=Array.isArray(t)?t:[t];!0===r.getBICmdState()&&(h()||m())&&(S(i)?h()&&r.computeBI():(o=!1===r.getBICmdState()?{silent:!0}:{},i.forEach((function(t){!function(t,o){var i,a,s,l,c,u,g,f=o||{},p=n.getBehavior("WUXNodeModelBehavior");(i=t.get("type"))===d&&e.is(p)&&(a=t.get("from"),s=t.get("to"),l=s.join(),g=r.getBIModelCollection(),h()&&(c=p.getNodeInfo(a),Array.isArray(c)&&c.forEach((function(t){var n,o,a=t.absPath.join();n=g.findWhere({id:a}),e.is(n)?n.set({pointedPaths:l,status:r.getProcessStatus(i,l)},f):(o={id:a,pointedPaths:l,status:r.getProcessStatus(i,l),type:"MfgItemsUpdateStatus"},g.add(o,f))}))),m()&&(u=p.getNodeInfo(s),Array.isArray(u)&&u.forEach((function(t){var n,o,s,l,c=t.absPath.join();n=g.findWhere({id:c}),e.is(n)?(o=n.get("implementingPIDs"),Array.isArray(o)?o.includes(a)||(s=o.concat(a),n.set({implementingPIDs:s,status:r.getProductStatus(s,i)},f)):n.set({implementingPIDs:[a],status:r.getProductStatus([a],i)},f)):(l={id:c,implementingPIDs:[a],status:r.getProductStatus([a],i),type:"ProductsAssignmentStatus"},g.add(l,f))}))))}(t,o)}))))},R=function(t){var o,i=Array.isArray(t)?t:[t];!0===r.getBICmdState()&&(h()||m())&&(S(i)?h()&&r.computeBI():(o=!1===r.getBICmdState()?{silent:!0}:{},i.forEach((function(t){!function(t,o){var i,a,s,l,c,u,g=o||{},f=n.getBehavior("WUXNodeModelBehavior");(i=t.get("type"))===d&&e.is(f)&&(a=t.get("from"),s=t.get("to"),u=r.getBIModelCollection(),h()&&(l=f.getNodeInfo(a),Array.isArray(l)&&l.forEach((function(t){var n,o=t.absPath.join();n=u.findWhere({id:o}),e.is(n)&&n.set({pointedPaths:"",status:r.getProcessStatus(i)},g)}))),m()&&(c=f.getNodeInfo(s),Array.isArray(c)&&c.forEach((function(t){var n,o,s,l=t.absPath.join();n=u.findWhere({id:l}),e.is(n)&&(o=n.get("implementingPIDs"),Array.isArray(o)&&(-1!==(s=o.indexOf(a))?(o.splice(s,1),n.set({implementingPIDs:o,status:r.getProductStatus(o,i)},g)):n.set({status:r.getProductStatus([],i)},g)))}))))}(t,o)}))))};return{listenTo:function(){return{updateBIStatus:D,addBIModel:P,changeBIModel:y,refreshCmd:b,resetBIModel:C,addConnection:w,removeConnection:R}},onStart:function(e){c=e||{},u=s.getScopeLinkType(),d=s.getImplementLinkType(),g={AssociatedWithScope:{colorCode:"#006400",label:i.getNLSValue("BI.PrdStatus.AssociatedWithScope")},NotAssigned:{colorCode:"#FFA500",label:i.getNLSValue("BI.PrdStatus.NotAssigned")},AssignedIndirectly:{colorCode:"#00008B",label:i.getNLSValue("BI.PrdStatus.AssignedIndirectly")},AssignedDirectly:{colorCode:"#ADD8E6",label:i.getNLSValue("BI.PrdStatus.AssignedDirectly")},AssignedMoreThanOnce:{colorCode:"#bd07b0",label:i.getNLSValue("BI.PrdStatus.AssignedMoreThanOnce")},NotAssignable:{colorCode:"#808080",label:i.getNLSValue("BI.PrdStatus.NotAssignable")},NotApplicable:{colorCode:"#A9A9A9",label:i.getNLSValue("BI.PrdStatus.NotApplicable")},PartiallyAssigned:{colorCode:"#8B4513",label:i.getNLSValue("BI.PrdStatus.PartiallyAssigned")}},f={NotApplicable:{colorCode:"#A9A9A9",label:i.getNLSValue("BI.MfgStatus.NotApplicable")},ScopeGood:{colorCode:"#008000",label:i.getNLSValue("BI.MfgStatus.ScopeGood")},ScopeToOldRev:{colorCode:"#7030a0",label:i.getNLSValue("BI.MfgStatus.ScopeToOldRev")},ScopeToAncestorBranch:{colorCode:"#7030a0",label:i.getNLSValue("BI.MfgStatus.ScopeToAncestorBranch")},ScopeToNew:{colorCode:"#FFA500",label:i.getNLSValue("BI.MfgStatus.ScopeToNew")},ScopeNoCorrespondingProductOccurence:{colorCode:"#FF0000",label:i.getNLSValue("BI.MfgStatus.ScopeNoCorrespondingProductOccurence")},ImplGood:{colorCode:"#008000",label:i.getNLSValue("BI.MfgStatus.ImplGood")},ImplGoodWithGoodScope:{colorCode:"#008000",label:i.getNLSValue("BI.MfgStatus.ImplGoodWithGoodScope")},ImplCandidatePrdOccWithGoodScope:{colorCode:"#0000FF",label:i.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScope")},ImplCandidatePrdOccWithGoodScopeEvolveInstance:{colorCode:"#0000FF",label:i.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScopeEvolveInstance")},ImplCandidatePrdOccWithScopeToOldRev:{colorCode:"#9370DB",label:i.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToOldRev")},ImplCandidatePrdOccWithScopeToAncestorBranch:{colorCode:"#9370DB",label:i.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToAncestorBranch")},ImplCandidatePrdOccButNotCorrespondingScope:{colorCode:"#FFA500",label:i.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccButNotCorrespondingScope")},ImplCandPrdOccToSamePrd:{colorCode:"#0000FF",label:i.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrd")},ImplCandPrdOccToSamePrdEvolveInstance:{colorCode:"#0000FF",label:i.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrdEvolveInstance")},ImplCandPrdOccToOtherRev:{colorCode:"#9370DB",label:i.getNLSValue("BI.MfgStatus.ImplCandPrdOccToOtherRev")},ImplCandPrdOccToAncestorBranch:{colorCode:"#9370DB",label:i.getNLSValue("BI.MfgStatus.ImplCandPrdOccToAncestorBranch")},ImplCandPrdOccToDiffPrd:{colorCode:"#FFA500",label:i.getNLSValue("BI.MfgStatus.ImplCandPrdOccToDiffPrd")},ImplNoCandProdOccurence:{colorCode:"#FF0000",label:i.getNLSValue("BI.MfgStatus.ImplNoCandProdOccurence")},ImplNoProductOccurence:{colorCode:"#FF0000",label:i.getNLSValue("BI.MfgStatus.ImplNoProductOccurence")},IntermediateGood:{colorCode:"#008000",label:i.getNLSValue("BI.MfgStatus.IntermediateGood")},IntermediateChildrenNotUptoDate:{colorCode:"#FFFF00",label:i.getNLSValue("BI.MfgStatus.IntermediateChildrenNotUptoDate")},Inconsistent:{colorCode:"#000000",label:i.getNLSValue("BI.MfgStatus.Inconsistent")},MadeFrom_UseCase_Att_Add:{colorCode:"#FF0000",label:i.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Add")},MadeFrom_UseCase_Att_Remove:{colorCode:"#FF0000",label:i.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Remove")},MadeFrom_UseCase_Att_Good:{colorCode:"#44ebe8",label:i.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good")},"MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom":{colorCode:"#44ebe8",label:i.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom")},"MadeFrom_UseCase_Att_Good.ManufacturingAssembly":{colorCode:"#44ebe8",label:i.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingAssembly")},"MadeFrom_UseCase_Att_Good.EngineeringMadeFrom":{colorCode:"#44ebe8",label:i.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.EngineeringMadeFrom")}}},onStop:function(){},getNodeOptions:function(t){var n={nodeOptions:{},taggerOptions:{}};return r.getBICmdState()&&e.is(t)&&(n=v(t)),n},getBICmdState:function(){return r.getBICmdState()},resetBIModelCollection:function(){return r.resetBIModelCollection()},clearPseudoBIStatus:function(){r.clearPseudoBIStatus()}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/DataGridViewManager",["UWA/Core"],(function(e){"use strict";return function(t){return{getDocument:function(){return t.getTreeDocument()},getCellID:function(e,n){return t.getLayout().getCellIDFromCoordinates({rowID:e,columnID:n})},getCellModel:function(e,n){var r=this.getCellID(e,n);return t.getCellInfosAt(r).cellModel},getCellNodeModel:function(e,n){var r=this.getCellID(e,n);return t.getCellInfosAt(r).nodeModel},getTreeNodeModelFromRowID:function(e){return t._rowModel.getVisibleNodeModel(e)},scrollToCellAt:function(e,n){var r=this.getCellID(e,n);t.scrollToCellAt(r)},getCellView:function(e,n){var r=this.getCellID(e,n);return t._getViewAt(r)},getCellContent:function(e,t){return this.getCellView(e,t).getContent()},getNumberOfRows:function(){var t=this.getDocument(),n=0;return e.is(t)&&t.getChildren(!0).forEach((function(e){n+=e.isVisible()?1:0,n+=e.getAllDescendants(!1,!0).filter((function(e){return e.isVisible()})).length})),n},getColumnIDFromDataIndex:function(e){return t.getColumnIndexByDataIndex(e)},getModelEvents:function(){return t._modelEvents},getColumns:function(){return t.columns},unselectAll:function(){t.unselectAll()},selectAll:function(){t.selectAll()},getCellClassName:function(e,t,n){return e+' .wux-layouts-datagridview-cell[cell-id="'+this.getCellID(t,n)+'"]'},empty:function(){this.getDocument().empty()},getRows:function(){return t.model},getDataGridViewModel:function(){return t.model},getRowModel:function(e){var n,r,o,i=this.getColumns(),a={};for(n=0;n<i.length;n++)"tree"===(o=i[n].dataIndex)?a[o]=this.getTreeNodeModelFromRowID(e):(r=this.getCellID(e,o),a[o]=t.getModelAt(r));return a},getColumnOptions:function(e){return t.getColumnOrGroup(e)},getColumnOptionsByPosition:function(e){var n=t.layout.getOrderedColumnsIndexes()[e];return this.getColumnOptions(n)},isColumnHidden:function(e){return!1===t.layout.getColumnVisibleState(e)||0===t.layout.getColumnWidth(e)},scrollToCellCallback:function(e,n,r){t.subscribeOnceToAllCellsRendered(r),this.scrollToCellAt(e,n)},addEventListener:function(e,n){t.addEventListener(e,n,!0)},removeEventListener:function(e,n){t.removeEventListener(e,n,!0)},getDataGridViewLayout:function(){return t.getLayout()}}}})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ConfirmationDialog",["UWA/Core","UWA/Controls/Abstract"],(function(e,t){"use strict";return function(n,r){var o,i=!(!e.is(r)||!e.is(r.check,"string")),a=t.extend({defaultOptions:{className:"confirmation-objectslist",appendObjects:!1,showColumnHeaders:!1},objectsTableBody:null,objectsTableHead:null,objectsTableFoot:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableHead=e.createElement("thead"),this.objectsTableFoot=e.createElement("tfoot"),this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableHead.inject(t),this.objectsTableBody.inject(t),this.objectsTableFoot.inject(t)},setData:function(t){var n,r,o=this,i=[],a=[],s=e.is(t)&&e.is(t.attributes,"array")?t.attributes:[],l=e.is(t)&&e.is(t.models,"array")?t.models:[];!1===o.options.appendObjects&&o.empty(),o.options.showColumnHeaders&&null!==o.objectsTableBody&&s.length>0&&(s.forEach((function(e){i.push({tag:"th",text:e})})),n=e.createElement("tr",{html:i}),o.objectsTableHead.appendChild(n)),null!==o.objectsTableBody&&l.length>0&&l.forEach((function(t){a=[],s.forEach((function(n){r=t.get(n),a.push({tag:"td",text:e.is(r)?r:""})})),a.length>0&&(n=e.createElement("tr",{html:a}),o.objectsTableBody.appendChild(n))}))},empty:function(){if(null!==this.objectsTableBody)for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return o=function(t,o,a,s,l){var c,u,d=e.createElement("div",{class:"confirmation-dialog-content-container"});e.is(o,"string")&&(o=e.createElement("span",{class:"confirmation-dialog-message",text:o})).inject(d),e.is(l)&&l.inject(d),i&&(u=n.create("Toggle",{type:"checkbox",checkFlag:!1,label:r.check})).inject(d),(c=n.create("Dialog",{title:t,domId:"ConfirmationUI-Dialog",content:d,minHeight:100,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Cancel:n.create("Button",{onClick:function(){c.close(),a.apply(null,[!1,s])}}),Ok:n.create("Button",{disabled:!1,emphasize:"primary",onClick:function(){c.close(),a.apply(null,[!0,s,e.is(u)?u.checkFlag:null])}})}})).close=function(){this.destroy(),o=null,t=null,c=null}},{show:function(t,n,i,s){var l,c,u;e.is(i)&&e.is(i.models)&&(l=i.models).length>0&&((u=new a(r)).setData(i),c=e.createElement("div",{class:"confirmation-objectList"}),u.getContent().inject(c)),o(t,n,s,l,c)}}}})),define("DS/DELPPWViewBehaviors_FD02/RefreshBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","DocumentPlugin"],creator:function(t,n,r,o,i){var a,s=function(){var t=o.getNLSValue("View."+n.getId()+".Title"),r=a.getRoots(),i=n.getBehavior("TreeListViewBehavior"),s={action:[],parameters:[]};a.emptyNodeModel(),e.is(r,"array")&&r.length>0&&(r.forEach((function(e,t){s.action[t]="addRoot",s.parameters[t]={rootReferencePID:e}})),i.processDropEffect(s).then((function(){n.notify("onRefreshedAll",[r]),n.info(o.getNLSValue("RefreshAll.Success",{view:t}))})).catch((function(){n.warn(o.getNLSValue("RefreshAll.Failure",{view:t}))})))},l=function(t){var s,l,c,u,d,g={noTimeout:!0},f=!!e.is(t.impactedChildren),p=function(t){var n=e.clone(t.impactedChildren),r=e.clone(t.impactedObjects);a.withTransactionUpdate((function(){n.forEach((function(e){a.updateNode(e,{loadChildren:!0})})),r.forEach((function(e){a.updateNode(e)}))}))};if(f)l=e.clone(t);else if((s=a.getSelectedNodesInfo().map((function(e){return e.id}))).length<1)return;n.notify("startProgress",g),f?(p(l),n.notify("stopProgress",g)):((l={impactedChildren:[],impactedObjects:[]}).impactedChildren=(c=[],u=[],d=[],s.forEach((function(t){var n=r.getReferenceModel(t);(function e(t){var n=r.getInstancesFromCollection(t);-1===c.indexOf(t)&&c.unshift(t),u=u.concat(n),n.forEach((function(t){var n,o=t.get("PID"),i=r.getReferenceModel(o);n=r.getImpacted(o,!1,{onlyInstanceRelations:!0}),d=d.concat(n),e(i.get("PID")),i.setAdditionalInfo({queriedForChildren:!1})}))})(t),r.getImpacted(t).forEach((function(e){d.push(e)})),e.is(i)&&i.removeDocumentConnections(t),n.setAdditionalInfo({queriedForDocuments:!1,queriedForChildren:!1,queriedForConnections:!1})})),r.removeInstance(u,{silent:!0}),r.removeConnection(d,{silent:!0}),n.notify("removeInstance",[u]),n.notify("removeConnection",[d]),c),r.getDescendantsFromServer(s,(function(e){p(l),f||(n.notify("addConnection",[e.connections,{loadRelatedobjectsToView:!1}]),n.notify("refreshImpacted",[l])),n.info(o.getNLSValue("RefreshSelected.Success",{view:o.getNLSValue("View."+n.getId()+".Title")})),n.notify("stopProgress",g)}),{fetchInverseRelations:!0,forceDBMode:!0,silentMode:!0}))};return{listenTo:function(){return{refreshAll:s,RefreshCmd:l,refreshImpacted:l}},onStart:function(){a=n.getBehavior("WUXNodeModelBehavior")},onStop:function(){},onRefreshSelected:l}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXManageCapableRscDragDrop",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i,a,s,l){var c,u,d=function(){return e.is(u)||(u=n.getBehavior("LinkBehavior")),u},g=function(){var t,r,o,i,a,s=null,l=n.getBehavior("ManageCapableResourcesBehaviour"),c=n.getBehavior("CapableResourceLinkBehaviour");return t=(i=(o=l.getBreadCrumb()).value[o.value.length-1]).refPID,r=i.instPID,a=c.getCapableRscStructureLinkOfAncestor(i.path),c.checkType(t,"OPERATION")&&e.is(r)&&c.checkParentType(r,"SYSTEM")&&(s=e.is(a)?a.get("to"):null),{fromRefPID:t,fromInstPID:r,resourceAreaID:s,fromSideAbsPath:i.path}},f=function(t,i){var a=[],s={};t.draggedItems.forEach((function(t){var n,r,i=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,s=i>0?t.instancePIDsArray[i-1]:null;n=i>0?o.getReferenceIdFromInstance(s):t.rootReferencePID,r=o.getReference(n),e.is(r)||a.push(n)})),a.length>0?(n.notify("startProgress",s),o.fetchRefList(a,{onComplete:function(){n.notify("stopProgress",s),e.is(i.onComplete)&&i.onComplete()},onFailure:function(){n.notify("stopProgress",s),n.warn(r.getNLSValue("ManageCapableResource.FetchReferene.Failed")),e.is(i.onFailure)&&i.onFailure()}})):e.is(i.onComplete)&&i.onComplete()},p=function(t){var n="",r=c.acceptedTypes;return e.is(t)&&(n=e.is(t.get)?t.get("PPRTYPE"):e.is(t["ds6w:type_value"])?i.getPPRType(t["ds6w:type_value"]):e.is(t,"string")?i.getPPRType(t):(t=o.getReference(t.referenceID)).get("PPRTYPE")),!e.is(r)||-1!==r.indexOf(n)},h=function(e){return e.preventDefault(),!0};return{init:function(t){var n=this;c=t||{},e.is(c.dropZone)&&(c.dropZone.addEventListener("drop",(function(e){e.preventDefault(),n.onTreeListViewDrop(e)})),c.dropZone.addEventListener("dragover",(function(e){e.preventDefault()})))},isAcceptedType:function(e){return p(e)},getDDBehavior:function(){var e=this;return{onDragStartCell:e.onDragStartCell,onDropCell:e.onDropCell.bind(this),onDropBlank:e.onDropBlank.bind(this),onDropColumnHeader:e.onDropColumnHeader.bind(this),onDragOverBlank:h,onDragOverColumnHeader:h,onDragOverCell:h,onDragEnterRowHeader:e.onDragEnterRowHeader,onDragLeaveRowHeader:e.onDragLeaveRowHeader,onDragOverRowHeader:e.onDragOverRowHeader}},onDragOverRowHeader:function(){return!1},onDragLeaveRowHeader:function(){return!1},onDragEnterRowHeader:function(){return!1},retrieveItems:function(t){var r,o,i,a,s,l=[],c="",u=["text/searchitems","text/plain","Text"];if(!e.is(t))return n.debug("ERROR: No dropped item found"),l;for(i=e.is(t.dataTransfer.types.indexOf,"function")?"indexOf":"contains",a=0;a<u.length&&""===c;a++)s=t.dataTransfer.types[i](u[a]),(e.is(s,"number")&&s>=0||e.is(s,"boolean")&&!0===s)&&(c=u[a]);if(""===c)return n.debug("ERROR: No data retrieved"),l;r=t.dataTransfer.getData(c);try{o=e.Json.decode(r)}catch(e){return l}return e.is(o)?e.is(o.data)?e.is(o.data.items,"array")?o.data.items:(n.debug("ERROR: Items is not an array"),l):(n.debug("ERROR: No data retrieved"),l):(n.debug("ERROR: Parsing returned null"),l)},onDragStartCell:function(o,i){var s,l,c,u=[],d=i.nodeModel,f=widget.data,p=a.get3DSpaceServiceName(),h=n.getBehavior("WUXNodeModelBehavior"),m=n.getBehavior("ExpandFilterBehavior"),v=n.getBehavior("ManageCapableResourcesBehaviour"),I={widgetId:widget.id,appId:t.getConfig().appId},D=g();if(!0!==v.getStepOperationUIState())return e.is(m)&&e.is(m.getFilterProxy())&&(s=m.getFilterProxy())&&s.getCtxForSharing&&(I=s.getCtxForSharing()),l={protocol:"3DXContent",version:"1.1",source:t.getConfig().appId,widgetId:widget.id,data:{items:[]},biProxyCtx:I},c={properties:[function(){return{property:"envId",value:a.getPlatformID({serviceId:p})}},function(){return{property:"serviceId",value:p}},function(){return{property:"contextId",value:[f.role,f.organization,f.collaborativeSpace].join(".")}},function(){return{property:"objectId",value:e.is(this.getReferencePID)?this.getReferencePID():null}},function(){return{property:"linkId",value:e.is(this.getLinkPID)?this.getLinkPID():null}},function(){return{property:"resourceAreaID",value:D.resourceAreaID}},function(){return{property:"objectType",value:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:e.is(this.getReferenceType)?r.getNLSValue(this.getReferenceType(),null,"Type"):null}}]},d.isSelected()||d.select(),i.cellView.collectionView.getTreeDocument().getXSO().get().forEach((function(t){e.is(h)&&!h.isFakeNodeModel(t)&&u.push(t.dump(c))})),l.data.items=u,o.dataTransfer.setData("Text",JSON.stringify(l)),o.dataTransfer.effectAllowed="copyMove",!1;n.warn("DrgDrop Not Supported")},getDragNDropInfo:function(t,n){var r,i,a,s={draggedItems:[],info:{fromWUX:!1,dropPosition:null,fromSameSource:!1},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};return e.is(t)&&e.is(t.dataTransfer)&&e.is(t.dataTransfer.getData,"function")&&(i=t.dataTransfer.getData("Text"),e.is(i,"string")&&i.length>0&&(a=JSON.parse(i),e.is(a)&&e.is(a.widgetId,"string")&&(s.info.fromSameSource=a.widgetId===widget.id))),e.is(n)&&e.is(n.nodeModel,"object")&&e.is(n.dropPosition)&&(s.info.fromWUX=!0,s.info.dropPosition=n.dropPosition,s.targetTreeNodeModel=n.nodeModel),r=this.retrieveItems(t),e.is(r,"array")&&(r.forEach((function(t){var n,r={};e.is(t)&&(r.rootReferencePID=e.is(t.objectId)?t.objectId:null,r.instancePIDsArray=e.is(t.path,"array")?o.transformRIRToAbsolutePath(t.path):null,r.name=e.is(t.displayName,"string")?t.displayName:null,r.type=e.is(t.referenceType,"string")?t.referenceType:e.is(t.objectType)?t.objectType:null,r.typeNLS=e.is(t.displayType,"string")||e.is(t.displayType)?t.displayType:null,r.securityContext=e.is(t.contextId,"string")?t.contextId:null,r.tenant=e.is(t.envId,"string")?t.envId:null,r.service=e.is(t.serviceId,"string")?t.serviceId:null,r.path=Array.isArray(t.path)?t.path:[],e.is(t.isManufacturable,"string")&&(r.isManufacturable=t.isManufacturable),e.is(r.instancePIDsArray,"array")&&r.instancePIDsArray.length>0&&(n=o.getInstance(r.instancePIDsArray[0]),e.is(n)&&(r.rootReferencePID=n.get("isAggregatedBy")))),s.draggedItems.push(r)})),e.is(s.targetTreeNodeModel)&&(e.is(s.targetTreeNodeModel.getLinkPID,"function")&&(s.targetReferencePID=s.targetTreeNodeModel.getReferencePID(),s.instPID=s.targetTreeNodeModel.getInstancePID(),s.linkPID=s.targetTreeNodeModel.getLinkPID(),s.nodeDepth=s.targetTreeNodeModel.getNodeDepth(),s.siblingsPID=s.targetTreeNodeModel.getSiblingsPID()),delete s.targetTreeNodeModel)),s},onDragEnterColumnHeader:function(){},onDragLeaveColumnHeader:function(){},onDragEnterBlank:function(){},onDragLeaveBlank:function(){},onDropCell:function(t,i){var a,s,l=[],c=[],u=this.getDragNDropInfo(t,i),h=u.siblingsPID,m=u.targetReferencePID,v=d(),I=n.getBehavior("ManageCapableResourcesBehaviour"),D=g();!0!==I.getStepOperationUIState()?"middle"===u.info.dropPosition&&f(u,{onComplete:function(){u.draggedItems.forEach((function(t){var i,d,g=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,f=g>0?t.instancePIDsArray[g-1]:null,v=g>0?o.getReferenceIdFromInstance(f):t.rootReferencePID;p({referenceID:v})?0===u.nodeDepth?(a=u.linkPID,m!==v||e.is(D.resourceAreaID)&&t.rootReferencePID===D.resourceAreaID?m===v&&D.resourceAreaID===t.rootReferencePID?g>0&&(i=o.getInstance(t.instancePIDsArray[g-1]),d={linkPID:a,instMdl:i},c.push(d)):l.push({type:"SecondaryCandidateResourceLink",fromSideRefPID:D.fromRefPID,toSideRefPID:v,fromSideInstPID:D.fromInstPID,fromSideAbsPath:D.fromSideAbsPath,connectionParams:{primaryResourceLinkPID:a}}):n.warn(r.getNLSValue("ManageCapableResource.setResourceUsage.Failure",{resource:"CapableResourcesStructureLink dose not Exist (or) Instance Under Different Resorce Area"}))):1===u.nodeDepth&&(s=u.linkPID,m!==v||e.is(D.resourceAreaID)&&t.rootReferencePID===D.resourceAreaID?m===v&&t.rootReferencePID===D.resourceAreaID&&g>0&&(i=o.getInstance(t.instancePIDsArray[g-1]),-1===h.indexOf(i.get("PID"))&&(d={linkPID:s,instMdl:i},c.push(d))):n.warn(r.getNLSValue("ManageCapableResource.setResourceUsage.Failure",{resource:"CapableResourcesStructureLink dose not Exist (or) Instance Under Different Resorce Area"}))):n.warn(r.getNLSValue("ManageCapableResource.NotAResourceType"))})),l.length>0&&v.createConnection(l),c.forEach((function(e){n.notify("updateResourceUsage",[e,!0])}))}}):n.warn("DrgDrop Not Supported")},onDropBlank:function(t,i){var a,s=this.getDragNDropInfo(t,i),l=d(),c=n.getBehavior("ManageCapableResourcesBehaviour"),u=g();a=function(t){var i=[];return t.draggedItems.forEach((function(t){var a=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,s=a>0?t.instancePIDsArray[a-1]:null,l=a>0?o.getReferenceIdFromInstance(s):t.rootReferencePID;p({referenceID:l})?i.push({type:"DELAsmProcessCanUseCnx",fromSideRefPID:u.fromRefPID,toSideRefPID:l,fromSideInstPID:u.fromInstPID,toSideInstPID:s,fromSideAbsPath:u.fromSideAbsPath,toSideRootRefPID:t.rootReferencePID}):n.warn(r.getNLSValue("ManageCapableResource.NotAResourceType"))})),i},!0!==c.getStepOperationUIState()?f(s,{onComplete:function(){var e=a(s);l.createConnection(e)}}):n.warn("DrgDrop Not Supported")},onDropColumnHeader:function(e,t){this.onDropBlank(e,t)}}}})),define("DS/DELPPWViewBehaviors_FD02/MfgProcessReplaceBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin","DicoPlugin","ImplementPlugin"],creator:function(t,n,r,o,i,a,s,l,c){var u,d,g;return u={replaceByLatest:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByLatestRevision",dialogTitle:i.getNLSValue("Dialog.ReplaceByLatest.Report")},replaceByExisting:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/WithExisting",dialogTitle:i.getNLSValue("Dialog.ReplaceByExisting.Report")},replaceByNewRevision:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByNewRevision",dialogTitle:i.getNLSValue("Dialog.ReplaceByNewRevision.Report")},replaceByNew:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/WithExisting",dialogTitle:i.getNLSValue("Dialog.ReplaceByNew.Report")}},d=function(t,r,o,a,l,c,d){var f={};n.notify("startProgress",f),new Promise((function(i,a){s.webServiceRequest({url:u[t].URL,method:"POST",headers:s.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode({instancesToReplace:r,existingRefPID:o,oneDelmiaAggregationMode:n.getPreferenceValue("oneDelmiaAggregationMode")}),onFailure:a,onTimeout:a,onCancel:a,onComplete:i})})).then((function(e){g(t,e,f,a,l,c,d)}),(function(r,o){n.notify("stopProgress",f),e.is(o)&&e.is(o.message,"string")&&n.warn(i.getNLSValue("Error."+t+".Title"),a),n.log(i.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+i.getNLSValue("failed"),a)})).catch((function(){n.notify("stopProgress",f),n.debug(i.getNLSValue("Error."+t+".Title"),a),n.log(i.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+i.getNLSValue("failed"),a)}))},g=function(t,o,s,l,c,d,g){var f,p,h,m,v,I=[],D=[],P=a.getConnectionParser();f={silentMode:!1,stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},p=o.succeeded||[],h=o.failed||[],p.forEach((function(e){e.instancesAndReferences.forEach((function(e){var t=e.attributesValue;Object.prototype.hasOwnProperty.call(t,"isInstanceOf")?(t.queriedForConnections=!0,f.stackedInstances.push(t)):(t.queriedForConnections=!0,D.push(t.PID),f.stackedReferences.push(t))})),e.connections.forEach((function(e){P.parse(e,f)})),f.deletedObjects=f.deletedObjects.concat(e.deletedObjects),I.push(e.message)})),h.forEach((function(e){I.push(e.message)})),f.onComplete=function(o){var a=n.getBehavior("UXFactoryBehavior"),g=n.getPreferenceValue("refreshBIOnAuthoring");e.is(c)&&!c||a.showMessage(u[t].dialogTitle,{messages:I,token:l}),e.is(g,"boolean")&&!0===g&&r.getBICmdState()&&r.computeBI(),n.notify("replace",{}),e.is(d,"function")&&d(o),n.notify("stopProgress",s),n.log(i.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+i.getNLSValue("completed"),l)},m=function(){a.addToCollections({stackedInstances:f.stackedInstances,silentMode:f.silentMode,onComplete:function(){a.addToCollections({stackedConnections:f.stackedConnections,stackedReferences:f.stackedReferences,deletedObjects:f.deletedObjects,silentMode:f.silentMode,onComplete:f.onComplete,onFailure:g})}})},v=function(){n.debug("Fetching getDescendantsFromServer for replaced Instances failed."),f.onComplete()},a.getDescendantsFromServer(D,m,{onFailure:v,silentMode:!0,forceDBMode:!0})},{listenTo:function(){return{}},onStart:function(e){e||{}},onStop:function(){},replace:function(t,r,s,g,f,p){var h,m=[],v=[],I=o.getSelectionsWithPaths(n.getId()).length>0?o.getSelectionsWithPaths(n.getId()):s,D=n.log(i.getNLSValue("replaceCmd.LogMessage",{replaceType:t}));if(e.is(I)&&I.length>0&&((I=I[0]).forEach((function(e){m.push(e.path.join(",")),v=v.concat(e.path.splice(0,e.path.length-1))})),h=I.every((function(e){var t=e.id;return-1===v.indexOf(t)}))),e.is(u[t]))if(m.length<1)n.warn(i.getNLSValue("Error.NoSelections.Title"),D);else if(h)if("replaceByExisting"===t){let o=a.getReference(r),s=[c.getPartialScopeLinkType()],u={relationTypes:s,onComplete:function(){var e=n.getBehavior("MfgProcessBehavior"),o=a.getReference(r);m.every((function(t){var n={child:o,targetAbsPath:t.split(",")};return!0===e.isInstPossible(n)}))?d(t,m,r,D,g,f,p):n.warn(i.getNLSValue("ModelBehavior.InsertInstance.HOP.Error",{refName:o.get("V_Name")}),D)}};e.is(o)?l.isAKindOf(o,"DELLmiHeaderOperationReference")?a.getConnectionsByModel(o,null,u):d(t,m,r,D,g,f,p):a.getDescendantsFromServer(r,u.onComplete,{gridIDs:s,silentMode:!0,forceDBMode:!0,expandLevel:0})}else d(t,m,r,D,g,f,p);else n.warn(i.getNLSValue("Error.replaceDirectOrIndirectChild.Title"),D);else n.warn(i.getNLSValue("Error.InvalidReplaceOperation.Title"),D)}}}}})),define("DS/DELPPWViewBehaviors_FD02/SetSequencingModeBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","DatabasePlugin"],creator:function(t,n,r,o,i){var a,s,l,c,u,d=r.getComponent("Button");return{name:"SetSequencingModeBehavior",listenTo:function(){return{SetSequencingMode:this.showDialog}},onStart:function(e){a=n.getBehavior("UXFactoryBehavior")},onStop:function(){},showDialog:function(t){var r,g;e.is(t,"array")||(t=[t]),1===t.length&&e.is(t[0].referencePID,"string")&&function(e){return new Promise((function(t,r){var a={},s=function(){n.notify("stopProgress",a),n.warn(o.getNLSValue("SetSequencingModeUI.RetrieveFailure")),r()};n.notify("startProgress",a),i.getSequencingMode(e,{onComplete:function(e){n.notify("stopProgress",a),u=e,c=e,t()},onFailure:s,onTimeout:s})}))}(r=t[0].referencePID).then((function(){var t,f,p,h,m;e.is(l)||(f=a.createElement("div",{class:"section-container"}),p=a.create("ButtonGroup",{type:"radio"}),h=a.create("Toggle",{type:"radio",label:o.getNLSValue("SetSequencingModeUI.Linear"),value:"Linear",checkFlag:"Linear"===c}),m=a.create("Toggle",{type:"radio",label:o.getNLSValue("SetSequencingModeUI.Advanced"),value:"Advanced",checkFlag:"Advanced"===c}),p.addChild(h),p.addChild(m),p.inject(f),p.addEventListener("change",(function(){p.value.forEach((function(e){c=e,l.buttons.Ok.disabled=c===u}))})),g=f,t=function(){var e={},t=function(){n.notify("stopProgress",e),n.warn(o.getNLSValue("SetSequencingModeUI.UpdateFailure")),l.close()};n.notify("startProgress",e),i.setSequencingMode(r,c,{onComplete:function(t){n.notify("stopProgress",e),n.info(o.getNLSValue("SetSequencingModeUI.UpdateSuccess")),l.close(),n.notify("setSequencingMode")},onFailure:t,onTimeout:t})},s=a.createElement("div",{class:"SetSequencingMode-Dialog"}),(l=a.create("Dialog",{title:o.getNLSValue("SetSequencingModeUI.Header"),domId:"SetSequencingModeUI-Dialog",content:s,resizableFlag:!0,modalFlag:!0,width:285,minWidth:185,buttons:{Cancel:new d({onClick:function(){l.close()}}),Ok:new d({disabled:!0,emphasize:"primary",onClick:function(){e.is(t,"function")&&t()}})}})).close=function(){this.destroy(),e.is(s)&&s.destroy(),l=null},g.inject(s))}))}}}}})),define("DS/DELPPWViewBehaviors_FD02/MfgItemViewer3DBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["Viewer3DPlugin","DatabasePlugin","ImplementPlugin","RootsPlugin","ResourcePlugin"],creator:function(t,n,r,o,i,a,s){var l,c,u,d,g,f,p,h,m,v,I,D,P,y,C=["PRODUCT"];return u=function(e){return"PROCESS"===o.getPPRType(e)},d=function(){return c.some((function(e){return C.indexOf(e)>-1}))},g=function(t){var n,o;e.is(l,"boolean")&&!0===l&&u(t)&&(o=i.getScopeLinksOfImplementing(t)).length>0&&(n=[o[0].get("to")],r.drop3D(n))},f=function(t){var n,r;e.is(l,"boolean")&&!0===l&&(n=i.getScopeLinksOfImplementing(t)).length>0&&(r=n[0].get("to"),v([r]))},p=function(t,o){var a,s,c,u,d;e.is(l,"boolean")&&!0===l&&(a=Array.isArray(t)?t:[t],s=i.getScopeLinkType(),u=n.getBehavior("WUXNodeModelBehavior"),e.is(u)&&(c=u.getRoots(),(d=a.filter((function(e){var t,n=s===e.get("type"),r=!1;return n&&(t=e.get("from"),r=c.indexOf(t)>-1),n&&r})).map((function(e){return e.get("to")}))).length>0&&(o?r.drop3D(d):v(d))))},h=function(e){p(e,!0)},m=function(e){p(e,!1)},v=function(t){var o;o=e.is(l,"boolean")&&!0===l?a.getRoots(n.getId())[0]:a.getRoots(n.getId())[1],0===t.reduce((function(e,t){var n,r=i.getScopeLinksOfImplemented(t);return r.length>0&&(n=r.map((function(e){return e.get("from")})),e=e.concat(n)),e}),[]).filter((function(e){return o.indexOf(e)>-1})).length&&r.remove3D(t)},I=function(t,o,i,a){var s,l=n.getBehavior("CrossHighlightBehavior");d()&&e.is(l)&&(s=l.getImpactedOfImplementing(t,o),r.change3DVisibility(s,i),a.resolve())},D=function(){var t=n.getBehavior("WUXNodeModelBehavior"),r=t.getSelectedNodesInfo(),o=this,i=[];r.forEach((function(t){var n=e.Promise.deferred();o.change3DVisiblity(0===t.absPath.length?t.id:t.absPath,!1,n),i.push(n.promise)})),e.Promise.all(i).then((function(){t.update3DNodeOptions(!1)}))},P=function(){var t=n.getBehavior("WUXNodeModelBehavior"),r=t.getSelectedNodesInfo(),o=this,i=[];r.forEach((function(t){var n=e.Promise.deferred();o.change3DVisiblity(0===t.absPath.length?t.id:t.absPath,!0,n),i.push(n.promise)})),e.Promise.all(i).then((function(){t.update3DNodeOptions(!0)}))},y=function(t){const o=n.getBehavior("CrossHighlightBehavior"),i=n.getBehavior("InterWidgetComBehavior");if(d()&&e.is(o)&&e.is(i))if(i.isWidgetLinked("DELOER_AP")){const e=Array.isArray(t.absPath)&&t.absPath.length>0?t.absPath:t.nodeId,n=o.getImpactedOfImplementing(e);r.reframeIn3DViewer(n)}else n.warn(s.getNLSValue("MfgItem3DOperationViewer.IsNotLinked"))},{listenTo:function(){return{addRootNode:g,removeRoot:f,addConnection:h,removeConnection:m,change3DVisibility:I,HideIn3D:D,ShowIn3D:P,ReframeIn3DViewer:y}},onStart:function(t){l=e.is(t.implementing)?t.implementing:null,c=t.pprTypes,t.ignoreSelectIn3DViewer&&r.unsubscribe()},select3D:function(e){d()&&r.selectIn3D(e)},unSelectAll3D:function(){r.selectIn3D([])},change3DVisiblity:function(t,r,o){var i,a=n.getBehavior("CrossHighlightBehavior");e.is(l,"boolean")&&!0===l?e.is(a)&&(i=[t,a.getImpactedOfImplementing(t),r,o],n.notify("change3DVisibility",i)):o.reject("ERROR while hiding/showing 3D")},unHideAll3D:function(){r.unHideAll3D()}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager",["UWA/Core"],(function(e){"use strict";const t=["DELFmiContQuantity_Mass.V_ContQuantity","DELFmiContQuantity_Area.V_ContQuantity","DELFmiContQuantity_Length.V_ContQuantity","DELFmiContQuantity_Volume.V_ContQuantity"],n="IsCompensation",r="DELFmiMagnitudeExt.V_DimensionType";return function(o,i,a,s,l){var c=o.getBehavior("ModelBehavior"),u=o.getBehavior("WUXNodeModelBehavior");return{getNonModelDataIndexes:function(){return[n]},getCellTypeRepresentation:function(e){return e.isHeader?"string":"boolean"},hasCellValue:function(n){var r,o,a,l=!1;if(!u.isFakeNodeModel(n.nodeModel)&&(o=this.getColumnOrGroup(n.columnID),a=i.getNodeAndColumnInfos(n.nodeModel,o),e.is(a.objectToBeModified)))for(r=0;r<t.length;r++)if(i.doesAttributeExist(a.objectToBeModified,t[r])||s.isAKindOf(a.objectToBeModified,"ProcessInstanceContinuous")&&i.isAttrApplicableForType(a.objectToBeModified,t[r])){l=!0;break}return l},getCellValue:function(n){var r,o,i=!0;if(e.is(n))for(r=0;r<t.length;r++)if(o=n.nodeModel.getAttributeValue(t[r]+".instance"),e.is(o)){i=!1;break}return i},setCellValue:function(n,u){var d,g,f,p,h,m={},v={},I={},D=s.getAttributeInfo("IsCompensation");switch(a.getReferenceModel(n.nodeModel.getReferencePID()).get(r)){case"MASS":p=t[0];break;case"AREA":p=t[1];break;case"LENGTH":p=t[2];break;case"VOLUME":p=t[3]}e.is(c)&&(u?(m.IsCompensation="TRUE",I={data:m,onComplete:function(){o.notify("editAttribute"),delete n.nodeModel.options.grid[p+".instance"],d=l.getNLSValue("TableView.SingleUpdateSuccess",{key:i.getNLS(D),value:!0}),o.info(d),o.notify("stopProgress",v)},onFailure:function(){d=l.getNLSValue("TableView.SingleUpdateFailure",{key:i.getNLS(D),value:!0}),o.warn(d),o.notify("stopProgress",v)}},o.notify("startProgress",v),h=n.nodeModel.getInstancePID(),a.updateInstance(h,I)):(g={dataIndex:p+".instance",dicoType:""},f=i.getNodeAndColumnInfos(n.nodeModel,g),u="1",h=n.nodeModel.getReferencePID(),c.updateModelAttribute(h,f,u)))}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ToolTipManager",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i,a){var s,l=function(r){n.getXMLValues(r,(function(t){!function(t){var n;if(e.is(t))for(t=Array.isArray(t)?t:[t],n=0;n<t.length;n++)s[t[n].name]=Array.isArray(t[n].Attribute)?t[n].Attribute:[t[n].Attribute]}(t.Tooltips.Tooltip)}),(function(){t.debug("Failed to get"+r+"XML configuration file")}))},c=function(t){var n,r,l,c,u,d,g="",f=o.getReference(t.nodeModel.getReferencePID()),p=e.is(t.nodeModel.getInstancePID()),h=t.cellView.collectionView.getColumnOrGroup(t.columnID).tooltipIndex;if(p&&(d=o.getInstance(t.nodeModel.getInstancePID())),e.is(h)&&(r=s[h],e.is(r)))for(n=0;n<r.length;n++)l=a.getAttributeInfoFromColumn(r[n]),u=i.getAttributeInfo(l.attributeName),("instance"!==l.objType||p)&&("instance"===l.objType&&e.is(d)?c=d.get(l.dataIndex):e.is(f)&&(c=f.get(l.dataIndex)),e.is(c)&&""!==c&&(c=e.is(u)&&a.hasMagnitude(u)?a.getMagnitudeValue(c,u)+" "+a.getNLSForUnit(u):"NULL"===c?"":c,g+=(e.is(u)?a.getNLS(u):l.attributeName)+" : "+c+"\n"));return g};return{init:function(e){s={},l(e)},getTooltipValue:function(e){return c(e)}}}})),define("DS/DELPPWViewBehaviors_FD02/SelectionBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["SelectionPlugin","DatabasePlugin"],creator:function(t,n,r,o){return{onStart:function(){},onStop:function(){},getSelections:function(){return r.getSelections(n.getId())},getModuleSelections:function(e){return r.getModuleSelections(e)},getSelectedNodesCount:function(){return r.getSelectedNodesCount(n.getId())},getSelectionsWithPaths:function(){return r.getSelectionsWithPaths(n.getId())},getSelectedRefs:function(){var t,i=[];return r.getSelections(n.getId()).forEach((function(n){n.forEach((function(n){t=o.getReference(n),e.is(t)&&i.push(t)}))})),i},getSelectedInsts:function(){var t,i=[];return r.getSelections(n.getId()).forEach((function(n){n.forEach((function(n){t=o.getInstance(n),e.is(t)&&i.push(t)}))})),i}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RPColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return function(e,t,n,r){return{name:"RPColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return 0===e.nodeModel.getAbsolutePath().length},getNonModelDataIndexes:()=>["RP_USAGE"],getCellTypeRepresentation:function(e){var t="string";return e.isHeader?"string":("Preferred"===e.dataIndex&&(t="functionIcon"),t)},getCellClassName:function(e){return""},getCellValue:function(e){return"RP_NONE"},getCellSemantics:function(e){var n=e.nodeModel._type,o={};return t.isAKindOf(n,"Drawing")?(o[r.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",o[r.getNLSValue("ResultingProduct.Overload.2D")]="2D"):(o[r.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",o[r.getNLSValue("ResultingProduct.Overload.EIN")]="EIN",o[r.getNLSValue("ResultingProduct.Overload.3D-EIN")]="3D-EIN"),{possibleValues:o,valueType:"enumCustom"}},setRPValue:function(t,o,i){var a,s,l,c=e.getBehavior("ImplementBehavior"),u=o.nodeModel.options.grid.cellInfo.rpConnectionFakeID,d=t.dataIndex,g=o.cellModel,f={},p={onFailure:function(){o.nodeModel.setAttribute(t.dataIndex,g),l=r.getNLSValue("ResultingProduct.setOverload.Failure"),e.warn(l,a),e.debug(l),e.notify("stopProgress",f)}};if(g!==i)return t?(e.notify("startProgress",f),a=e.log(r.getNLSValue("ResultingProduct.setOverload")),void c.updateDataMaterializationLinkUsage(o.nodeModel.options.grid.cellInfo.rpConnectionPID,i,p).then((function(){n.addConnection({PID:u,V_usage:i}),o.nodeModel.setAttribute(d,i),s=r.getNLSValue("ResultingProduct.setOverload.Success",{Overload:i}),e.info(s,a),e.notify("stopProgress",f)}))):void 0},getCellEditableState:function(e){return!0}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MSOColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return function(t,n,r,o,i,a){return{name:"MSOColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return!0},getCellTypeRepresentation:function(e){return e.isHeader?"string":"enumCustom"},getCellClassName:function(e){return""},getCellValue:function(t){var n=e.is(t.nodeModel)?t.nodeModel:null;if(e.is(n))return t.nodeModel.options.grid[t.dataIndex]},getCellSemantics:function(e){var t={"":"Undefined"};return t[i.getNLSValue("ManageStepOperation.StepOnly")]="StepOnly",t[i.getNLSValue("ManageStepOperation.Reserved")]="Reserved",t[i.getNLSValue("ManageStepOperation.Released")]="Released",{possibleValues:t,valueType:"enumCustom"}},setValue:function(n,o,a){var s,l,c,u,d,g=o.nodeModel.options.grid.cellInfo.rowInfo,f=e.is(g[n.dataIndex].resourceDetailPID)?g[n.dataIndex].resourceDetailPID:null,p=o.cellModel,h={},m=1===o.columnID?"PrimaryResourceLinkDetail":"SecondaryResourceLinkDetail",v={onComplete:function(e){var r="Undefined"===e.get("V_AvailabilityMode")?"":e.get("V_AvailabilityMode");o.nodeModel.setAttribute(n.dataIndex,r),g[n.dataIndex]={resourceDetailPID:e.get("PID"),availabilityMode:e.get("V_AvailabilityMode")},u=i.getNLSValue("ManageStepOperation.setAvilabilityMode.Success",{availablity:e.get("V_AvailabilityMode")}),t.info(u,c),t.notify("stopProgress",h)},onFailure:function(e){o.nodeModel.setAttribute(n.dataIndex,p),d=i.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),t.warn(d,c),t.debug(d),t.notify("stopProgress",h)},data:{}};v.data[m+".V_AvailabilityMode"]=a,e.is(f)?(t.notify("startProgress",h),c=t.log(i.getNLSValue("ManageStepOperation.setAvilabilityMode")),r.updateConnection(f,v)):(s=t.getBehavior("ManageCapableResourcesBehaviour"),e.is(g[n.dataIndex].connectionParams)&&(l=g[n.dataIndex].connectionParams,s.createRscDetailLinkBulk(l,{onComplete:function(t){e.is(t,"array")&&t.length>0&&(f=t[0].get("PID"),g[n.dataIndex]={resourceDetailPID:f,availabilityMode:t[0].get("V_AvailabilityMode")},r.updateConnection(f,v))},onFailure:function(e){o.nodeModel.setAttribute(n.dataIndex,p),d=i.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),t.warn(d),t.debug(d)}})))},getCellEditableState:function(e){return!0}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXDragDrop",["UWA/Core","UWA/Class/Promise","UWA/Utils/InterCom"],(function(e,t,n){"use strict";return function(r,o,i,a,s,l,c,u){var d,g,f,p=null,h=function(t){var n="";return e.is(t)&&(n=e.is(t.get)?t.get("PPRTYPE"):e.is(t["ds6w:type_value"])?s.getPPRType(t["ds6w:type_value"]):e.is(t,"string")?s.getPPRType(t):(t=a.getReference(t.referenceID)).get("PPRTYPE")),n},m=function(t){var n=h(t),r=d.acceptedTypes;return!e.is(r)||-1!==r.indexOf(n)},v=function(e){return a.getLastElementInstanceInfoPID(e,"isAggregatedBy")},I=function(e){return a.getLastElementInstanceInfoPID(e,"isInstanceOf")},D=function(t){var n=null;return e.is(t)&&(e.is(t.instancePIDsArray,"array")&&t.instancePIDsArray.length>0&&(n=I(t.instancePIDsArray)),n||(n=a.isValidPID(t.rootReferencePID)?t.rootReferencePID:null)),n},P=function(t){var n=null;return e.is(t)&&(n=e.is(t.targetInstancePIDsArray,"array")&&t.targetInstancePIDsArray.length>0?I(t.targetInstancePIDsArray):a.isValidPID(t.targetRootReferencePID)?t.targetRootReferencePID:null),n},y=function(t,n){var r=o.getBehavior("DropZoneViewBehavior"),i=o.getBehavior("WUXNodeModelBehavior");e.is(r)&&(r.setIcon(t),e.is(i)&&(!0!==n||i.isDocumentEmpty()||r.hide()))},C=function(t){var n={action:new Array(t.draggedItems.length),parameters:new Array(t.draggedItems.length),message:new Array(t.draggedItems.length),dragNDropInfo:t},l=o.getBehavior("DropZoneViewBehavior"),c={parameters:null,message:null},g={createLink:null,createLinkOrInstance:null,addCA:null,addRoot:null,reOrderRoot:null,reOrder:null,reParent:null},f=function(e,t){var n=Array.isArray(r.getConfig().unAuthorizedTypes)?r.getConfig().unAuthorizedTypes:[];return!(n.indexOf(s.getPPRType(e))>-1&&n.indexOf(s.getPPRType(t))>-1)},p=function(n){var r=!1;return a.isValidPID(t.draggedItems[n].rootReferencePID)&&!e.is(a.getLastElement(t.draggedItems[n].instancePIDsArray))&&(r=!0),r},I=function(e){var n=!1,r=null,o=null;return p(e)||(r=v(t.draggedItems[e].instancePIDsArray),o=v(t.targetInstancePIDsArray),a.isValidPID(r)&&a.isValidPID(o)&&r===o&&(n=!0)),n},C=function(r){var o=!1,l=e.is(t.targetInstanceSiblingPID,"array")?t.targetInstanceSiblingPID:[],c=t.draggedItems[r],u=-1,d=a.getLastElement(c.instancePIDsArray),p=null,h=!1,v=t.draggedItems[r].type,D=s.getPPRType(v);return t.info.fromSameSource&&I(r)&&m(v)&&(s.isReorderPossible(D)?f(t.targetType,v)?(-1!==(u=l.indexOf(d))&&l.splice(u,1),e.is(g.reOrder,"number")?(n.action[r]="aggregatedAction",n.parameters[r]=g.reOrder,n.message[r]=null,e.is(n.parameters[g.reOrder])&&!n.parameters[g.reOrder].isTargetIdDragged&&(n.parameters[g.reOrder].movedInstancePID.push(d),n.parameters[g.reOrder].newChildrenPID=l)):(h=function(){var n=e.is(t.draggedItems,"array")?t.draggedItems:[],r=a.getLastElement(t.targetInstancePIDsArray);return-1!==n.findIndex((function(e){return a.getLastElement(e.instancePIDsArray)===r}))}(),h?n.action[r]="aggregatedAction":(p=a.getLastElement(t.targetInstancePIDsArray),n.action[r]="reorder"),n.parameters[r]={movedInstancePID:[d],newChildrenPID:l,targetInstancePID:p,dropPosition:t.info.dropPosition,isTargetIdDragged:h},n.message[r]=null,g.reOrder=r),o=!0):(n.action[r]="error",n.parameters[r]=null,n.message[r]=i.getNLSValue("AbstractDragAndDropManager.NotAllowed")):(n.action[r]="error",n.parameters[r]=null,n.message[r]=i.getNLSValue("AbstractDragAndDropManager.ReOrderRestricted",{objectName:s.getPPRType(v)}))),o};return t.draggedItems.forEach((function(b,S){n.action[S]="error",n.parameters[S]=null,n.message[S]=null,function(o){var s=!1,l=null;return"middle"===t.info.dropPosition&&(t.targetRootReferencePID===t.draggedItems[o].rootReferencePID&&a.arrayCompare(t.draggedItems[o].instancePIDsArray,t.targetInstancePIDsArray)?(n.action[o]="error",n.parameters[o]=null,n.message[o]=i.getNLSValue("AbstractDragAndDropManager.SameObject")):f(t.targetType,t.draggedItems[o].type)?(l=u.isNewDragNDrop()&&"MFN"===r.getConfig().widgetTrigram||"SIE"===r.getConfig().widgetTrigram?"createLink":"createLinkOrInstance",c.parameters={rootReferencePID:t.draggedItems[o].rootReferencePID,referencePID:D(t.draggedItems[o]),targetReferencePID:P(t),instancePID:a.getLastElement(t.draggedItems[o].instancePIDsArray),targetRootReferencePID:t.targetRootReferencePID,targetInstancePID:a.getLastElement(t.targetInstancePIDsArray),allowMove:t.info.fromSameSource&&"middle"===t.info.dropPosition,instancePIDsArray:t.draggedItems[o].instancePIDsArray,targetInstancePIDsArray:t.targetInstancePIDsArray,path:Array.isArray(t.path)?t.path:[]},e.is(g[l],"number")?(n.action[o]="aggregatedAction",n.parameters[o]=g[l],n.message[o]=null,n.parameters[g[l]].push(c.parameters)):(n.action[o]=l,n.parameters[o]=[c.parameters],n.message[o]=null,g[l]=o),s=!0):(n.action[o]="error",n.parameters[o]=null,n.message[o]=i.getNLSValue("AbstractDragAndDropManager.NotAllowed"))),s}(S)||function(e){var r=!1;return a.isValidPID(t.targetRootReferencePID)||"Change Action"===t.draggedItems[e].type&&(n.action[e]="addChangeAction",n.parameters[e]={rootReferencePID:t.draggedItems[e].rootReferencePID},n.message[e]=null,r=!0),r}(S)||function(e){var r=!1;return a.isValidPID(t.targetRootReferencePID)||"PPRContext"===t.draggedItems[e].type&&(n.action[e]="addPPRContext",n.parameters[e]={rootReferencePID:t.draggedItems[e].rootReferencePID},n.message[e]=null,r=!0),r}(S)||function(r){var o=!1,s=a.getReferenceModel(D(t.draggedItems[r])),u=e.is(d.pprTypesWithSupportedRoot)?d.pprTypesWithSupportedRoot:[];return e.is(s)&&-1===u.indexOf(h(s))?(y(l.iconEnum.PLUS,!0),o):(a.isValidPID(t.targetRootReferencePID)?(y(l.iconEnum.DROPHERE,!0),n.action[r]="error",n.parameters[r]=null,n.message[r]=i.getNLSValue("AbstractDragAndDropManager.NotAuthorized")):(c.parameters={PIDsToAddRoot:[D(t.draggedItems[r])]},e.is(g.addRoot,"number")?(n.action[r]="aggregatedAction",n.parameters[r]=g.addRoot,n.message[r]=null,e.is(n.parameters[g.addRoot])&&n.parameters[g.addRoot].PIDsToAddRoot.push(D(t.draggedItems[r]))):(n.action[r]="addRoot",n.parameters[r]=c.parameters,n.message[r]=null,g.addRoot=r),o=!0),o)}(S)||function(e){var r=!1;return p(e)&&t.info.fromSameSource&&m(t.draggedItems[e].type)&&(n.action[e]="reorderRoots",n.parameters[e]={rootReferencePID:D(t.draggedItems[e]),targetRootReferencePID:t.targetRootReferencePID,position:t.info.dropPosition},n.message[e]=null,r=!0),r}(S)||C(S)||function(r){var o=!1,l=t.info.wuxLocalID,u=t.draggedItems[r].instancePIDsArray,d=a.getLastElement(u),p=v(t.targetInstancePIDsArray),h=e.is(t.targetInstanceSiblingPID,"array")?t.targetInstanceSiblingPID.slice(0):[],D=a.getReferenceModel(p),P=a.getReferenceModel(d),y=t.draggedItems[r].type,C=s.getPPRType(y);return t.info.fromSameSource&&"middle"!==t.info.dropPosition&&!I(r)&&a.isValidPID(p)&&m(y)&&a.isInstancePossible(D,P)&&(s.isReparentPossible(C)?f(t.targetType,y)?a.isWorkInstruction(P)?(n.action[r]="error",n.parameters[r]=null,n.message[r]=i.getNLSValue("AbstractDragAndDropManager.ReparentWorkInstruction")):("bottom"===t.info.dropPosition&&l++,h.splice(l,0,null),c.parameters={instancesPIDsToReparent:[d],formerInstancesParentPIDs:[v(u)],newParentPID:p,newParentInstancesOrder:h},e.is(g.reParent,"number")?(n.action[r]="aggregatedAction",n.parameters[r]=g.reParent,n.message[r]=null,e.is(n.parameters[g.reParent])&&(n.parameters[g.reParent].instancesPIDsToReparent.push(d),n.parameters[g.reParent].formerInstancesParentPIDs.push(c.parameters.formerInstancesParentPIDs[0]),n.parameters[g.reParent].newParentInstancesOrder.splice(l,0,null))):(n.action[r]="reparent",n.parameters[r]=c.parameters,n.message[r]=null,g.reParent=r),o=!0):(n.action[r]="error",n.parameters[r]=null,n.message[r]=i.getNLSValue("AbstractDragAndDropManager.NotAllowed")):(n.action[r]="error",n.parameters[r]=null,n.message[r]=i.getNLSValue("AbstractDragAndDropManager.MoveInstanceRestricted",{objectName:s.getPPRType(y)}))),o}(S)||o.debug("AbstractDragAndDropManager.InternalError")}),this),n},b=function(e){return e.preventDefault(),!0},S=function(e){return e.some((function(e){const t=e.object.type;return s.isReferencesHasReadOnlyType(t)}))},w=function(t){var n,r,o,i=[];if(e.is(t,"object"))return n=t.targetType,e.owns(t,"draggedItems")&&Array.isArray(t.draggedItems)&&t.draggedItems.length>0&&(i=t.draggedItems.reduce((function(t,i){return e.owns(i,"isManufacturable")&&"FALSE"===i.isManufacturable&&(r=i.type,"PROCESS"!==s.getPPRType(n)&&"SERVICE"!==s.getPPRType(n)||"PRODUCT"!==s.getPPRType(r)||(o=D(i),e.is(o)&&t.push(a.getReferenceModel(o)))),t}),[])),i},R=function(t,n){var r=o.getBehavior("UXFactoryBehavior"),a=i.getNLSValue("NON-BOM.Confirmation.Title"),s=i.getNLSValue("NON-BOM.Confirmation.Message");r.showConfirmation(a,s,{attributes:["V_Name","revision"],models:t},(function(t){e.is(t,"boolean")&&t&&n()}))};return{init:function(t){var n=this;d=t||{},e.is(d.dropZone)&&(d.dropZone.addEventListener("drop",(function(e){e.preventDefault(),n.onTreeListViewDrop(e)})),d.dropZone.addEventListener("dragover",(function(e){e.preventDefault()})))},isAcceptedType:function(e){return m(e)},getDraggedReferencePID:function(e){return D(e)},getDDBehavior:function(){var e=this;return{onDragStartCell:e.onDragStartCell,onDragStartRowHeader:e.onDragStartCell,onDragEndCell:e.onDragEndCell,onDragEnterRowHeader:e.onDragEnterRowHeader,onDragLeaveRowHeader:e.onDragLeaveRowHeader,onDragEnterColumnHeader:e.onDragEnterColumnHeader,onDragLeaveColumnHeader:e.onDragLeaveColumnHeader.bind(this),onDragEnterCell:e.onDragEnterCell,onDragLeaveCell:e.onDragLeaveCell,onDropCell:e.onDropCell.bind(this),onDropRowHeader:e.onDropCell.bind(this),onDragEnterBlank:e.onDragEnterBlank,onDragLeaveBlank:e.onDragLeaveBlank,onDropBlank:e.onDropBlank.bind(this),onDropColumnHeader:e.onDropColumnHeader.bind(this),onDragOverRowHeader:b,onDragOverCell:b,onDragOverBlank:b,onDragOverColumnHeader:b}},processRootDrop:function(n,r,s,l,c,u,g){var f,p,v=!1,I=o.getBehavior("WUXNodeModelBehavior"),D=i.getNLSValue(o.getId()),P=i.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:D}),C=i.getNLSValue("AbstractDragAndDropManager.AddRoot.Error",{view:D}),b=o.getBehavior("DropZoneViewBehavior"),S=function(t,n,a,s){var l,u,g,f={},P=n||{},S=o.getBehavior("WUXNodeModelBehavior"),w=function(){o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!0}),o.warn(C,p,"failed"),s()},R=function(t,n){var r=i.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{objectName:n,view:D});o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!0}),o.log(r,p,"completed"),null!==c?(g=o.getBehavior("ExpandFilterBehavior"),e.is(g)?g.applyFilter(c,a):(o.debug("Expand filter behavior is not available on this module"),a())):a()},V=!!e.is(P.forceDBMode,"boolean")&&P.forceDBMode;t=e.is(t,"array")?t:[t],S.prepareUpdate(),t.forEach((function(t){var n,c,g;n=t,u=e.is(I)?I.validate(n):null,e.is(u)?(e.is(b)&&y(b.iconEnum.DROPHERE,!0),f[u.param]=u.paramValue,l=i.getNLSValue(u.key,f,"ValidationError"),o.warn(l,p,"failed"),s()):e.is(I)&&m(t)?(o.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!1}),I.addNode(t,{onAddToTreeListFail:w,onAddToTreeListComplete:R,forceDBMode:V})):e.is(r)&&r&&(c=h(t),g=e.is(d.pprTypesWithSupportedViews)?d.pprTypesWithSupportedViews:[],!e.is(g)||-1!==g.indexOf(c))?(o.notify("addReference",[t]),a()):(v=!0,o.notify("addToAuxiliaryView",[t]),a())})),v&&(o.info(i.getNLSValue("AbstractDragAndDropManager.RepositionAuxView")),e.is(b)&&y(b.iconEnum.DROPHERE,!0)),S.pushUpdate()},w=function(n,r){var a,s,l,c,d=[],f=[],p=[],h={modelsFetched:[]};r=r||{},e.is(r.modelsNotRetrieved)&&(h.modelsNotRetrieved=r.modelsNotRetrieved,s=(s=i.getNLSValue("AbstractDragAndDropManager.ObjectsNotRetrieved")).replace("%n",r.modelsNotRetrieved.length),o.warn(s)),e.is(r.modelsFromForceDB)&&(f=r.modelsFromForceDB),(n=e.is(n,"array")?n:[n]).forEach((function(n){f.indexOf(n.get("PID"))>-1?(p.push(n),e.is(h.modelsFromForceDB)||(h.modelsFromForceDB=[]),h.modelsFromForceDB.push(n.get("PID"))):(a=new t((function(e,t){S(n,r,e,t)})),d.push(a)),h.modelsFetched.push(n.get("PID"))})),p.length>0&&(l=o.getBehavior("UXFactoryBehavior"),c=i.getNLSValue("AbstractDragAndDropManager.indexOrDBDialog"),s=i.getNLSValue("AbstractDragAndDropManager.RootsNotInIndex"),l.showConfirmation(c,s,{attributes:["V_Name"],models:p},(function(n){e.is(n,"boolean")&&n&&(a=new t((function(e,t){S(p,r,e,t)})),d.push(a))}))),t.all(d).then((function(){u(h)}),(function(){g(h)}))};p=o.log(P),f=a.getReferencesFromArray(n),n.length!==f.length?f=a.fetchRoot(n,{onComplete:w,onFailure:function(){o.warn(i.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),p),o.debug("Failed to fetch refernce for PID: "+n),g()},context:this,silent:!0}):w(f)},retrieveItems:function(t){var n,r,i,a,s,l=[],c="",u=["text/searchitems","text/plain","Text"];if(!e.is(t))return o.debug("ERROR: No dropped item found"),l;for(i=e.is(t.dataTransfer.types.indexOf,"function")?"indexOf":"contains",a=0;a<u.length&&""===c;a++)s=t.dataTransfer.types[i](u[a]),(e.is(s,"number")&&s>=0||e.is(s,"boolean")&&!0===s)&&(c=u[a]);if(""===c)return o.debug("ERROR: No data retrieved"),l;n=t.dataTransfer.getData(c);try{r=e.Json.decode(n)}catch(e){return l}return e.is(r)?e.is(r.data)?e.is(r.data.items,"array")?r.data.items:(o.debug("ERROR: Items is not an array"),l):(o.debug("ERROR: No data retrieved"),l):(o.debug("ERROR: Parsing returned null"),l)},onDragStartCell:function(t,n){var c,u,d,g=[],f=n.nodeModel,p=widget.data,h=l.get3DSpaceServiceName(),m=o.getBehavior("WUXNodeModelBehavior"),v=o.getBehavior("ExpandFilterBehavior"),I={widgetId:widget.id,appId:r.getConfig().appId};return e.is(v)&&e.is(v.getFilterProxy())&&(c=v.getFilterProxy())&&c.getCtxForSharing&&(I=c.getCtxForSharing()),u={protocol:"3DXContent",version:"1.1",source:r.getConfig().appId,widgetId:widget.id,data:{items:[]},biProxyCtx:I},d={properties:[function(){return{property:"envId",value:l.getPlatformID({serviceId:h})}},function(){return{property:"serviceId",value:h}},function(){return{property:"contextId",value:p.Credentials}},function(){return{property:"objectId",value:e.is(this.getReferencePID)?this.getReferencePID():null}},function(){var t=null;return{property:"objectType",value:t=e.is(this.object)&&e.is(this.object.defType)?this.object.defType:e.is(t)?t:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"secondaryObjectType",value:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:e.is(this.getReferenceType)?i.getNLSValue(this.getReferenceType(),null,"Type"):null}},function(){var t,n,r,o=[];if(e.is(this.getRIRpath))for(t=this.getRIRpath(),Array.isArray(t)&&0===t.length&&t.push(this.getReferencePID()),r=0;r<t.length;r++)n=r%2==1?a.getInstance(t[r]):a.getReference(t[r]),o.push({resourceid:t[r],type:n.get("type")});return{property:"path",value:o}},function(){var t,n=this.options.grid;return e.is(this.getReferenceType,"function")&&"PRODUCT"===s.getPPRType(this.getReferenceType())&&e.owns(n,"V_IsManufacturable.reference")&&(t=n["V_IsManufacturable.reference"]),{property:"isManufacturable",value:t}}]},f.isSelected()||f.select(),n.cellView.collectionView.getTreeDocument().getXSO().get().forEach((function(t){e.is(m)&&!m.isFakeNodeModel(t)&&g.push(t.dump(d))})),u.data.items=g,t.dataTransfer.setData("Text",JSON.stringify(u)),t.dataTransfer.effectAllowed="copyMove",!1},getDragNDropInfo:function(t,n){var r,o,i,s={draggedItems:[],info:{fromWUX:!1,dropPosition:null,fromSameSource:!1},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};return e.is(t)&&e.is(t.dataTransfer)&&e.is(t.dataTransfer.getData,"function")&&(o=t.dataTransfer.getData("Text"),e.is(o,"string")&&o.length>0&&(i=JSON.parse(o),e.is(i)&&e.is(i.widgetId,"string")&&(s.info.fromSameSource=i.widgetId===widget.id,e.is(i.data.items,"array")&&i.data.items.length>0&&(s.info.fromManageCapableResource=!!e.is(i.data.items[0].linkId))))),e.is(n)&&e.is(n.nodeModel,"object")&&e.is(n.dropPosition)&&(s.info.fromWUX=!0,s.info.dropPosition=n.dropPosition,s.targetTreeNodeModel=n.nodeModel,e.is(n.nodeModel.isDummyNode)&&(s.fromGroupingView=!0)),e.is(n)&&e.is(n.loadObjectsInOwnView)&&(s.info.loadObjectsInOwnView=n.loadObjectsInOwnView),e.is(i.biProxyCtx)&&(s.ctx={},s.ctx.biProxyCtx=i.biProxyCtx,s.ctx.objIds=[],i.data.items.forEach((function(e){s.ctx.objIds.push(e.objectId)}))),r=this.retrieveItems(t),e.is(r,"array")&&(r.forEach((function(t){var n,r={};e.is(t)&&(r.rootReferencePID=e.is(t.objectId)?t.objectId:null,r.instancePIDsArray=e.is(t.path,"array")?a.transformRIRToAbsolutePath(t.path):null,r.name=e.is(t.displayName,"string")?t.displayName:null,r.type=e.is(t.referenceType,"string")?t.referenceType:e.is(t.secondaryObjectType)?t.secondaryObjectType:t.objectType,r.typeNLS=e.is(t.displayType,"string")||e.is(t.displayType)?t.displayType:null,r.securityContext=e.is(t.contextId,"string")?t.contextId:null,r.tenant=e.is(t.envId,"string")?t.envId:null,r.service=e.is(t.serviceId,"string")?t.serviceId:null,r.path=Array.isArray(t.path)?t.path:[],e.is(t.linkId)&&(r.linkPID=t.linkId,r.resourceAreaID=t.resourceAreaID,r.referencePID=e.is(t.objectId)?t.objectId:null,delete r.rootReferencePID),e.is(t.isManufacturable,"string")&&(r.isManufacturable=t.isManufacturable),e.is(r.instancePIDsArray,"array")&&r.instancePIDsArray.length>0&&(n=a.getInstance(r.instancePIDsArray[0]),e.is(n)&&(r.rootReferencePID=n.get("isAggregatedBy")))),s.draggedItems.push(r)})),e.is(s.targetTreeNodeModel)&&(e.is(s.targetTreeNodeModel.getRootPID,"function")&&(s.targetRootReferencePID=s.targetTreeNodeModel.getRootPID(),s.targetInstancePIDsArray=s.targetTreeNodeModel.getAbsolutePath(),s.targetInstanceSiblingPID=s.targetTreeNodeModel.getSiblingsPID(),s.targetType=s.targetTreeNodeModel.getReferenceType(),s.info.wuxLocalID=s.targetTreeNodeModel._localID),delete s.targetTreeNodeModel)),s},processDropEffect:function n(r){var u=this;return new t((function(d){var g=o.getBehavior("ModelBehavior"),f=null,p=o.getBehavior("WUXNodeModelBehavior"),h=o.getBehavior("DropZoneViewBehavior"),v=o.getBehavior("GroupingViewBehavior"),I=function(n){return new t((function(t,o){var i=r.parameters[n],a=e.is(i.PIDsToAddRoot)?i.PIDsToAddRoot:i.rootReferencePID,s=e.is(r.dragNDropInfo)&&e.is(r.dragNDropInfo.ctx)?r.dragNDropInfo.ctx:null,l=e.is(r.dragNDropInfo)&&e.is(r.dragNDropInfo.info.loadObjectsInOwnView)?r.dragNDropInfo.info.loadObjectsInOwnView:null;u.processRootDrop(a,l,n,r.action.length,s,t,o)}))},D=function(n){return new t((function(t){var s=(n||[{actionIndex:null}])[0].actionIndex,l=e.is(s,"number")?r.parameters[s]:null,c=e.is(l.PIDsToAddRoot)?l.PIDsToAddRoot:l.rootReferencePID,u=a.findConnections({from:c}),d=a.getInstancesFromCollection(c),g="AUXILIARY"===o.getId(),f=[],p=[];u.forEach((function(e){f.push(e.get("to"))})),d.forEach((function(e){f.push(e.get("isInstanceOf"))})),(p=a.getReferencesFromArray(f)).length>0?(p.forEach((function(e){g?o.notify("addToAuxiliaryView",[e,{loadRelatedobjectsToView:!1}]):o.notify("addReference",[e,null,{loadRelatedobjectsToView:!1}])})),o.info(i.getNLSValue("AbstractDragAndDropManager.PPRContext.Success"))):o.warn(i.getNLSValue("AbstractDragAndDropManager.PPRContext.Empty")),e.is(h)&&y(h.iconEnum.DROPHERE,!0),t()}))},C=function(n){var r=t.reject(),a=e.is(n,"string")?n:i.getNLSValue("AbstractDragAndDropManager.InternalError");return o.warn(a),r},b=function(n){var o=e.is(r.parameters[n],"array")?r.parameters[n]:[r.parameters[n]],s=[];return o.forEach((function(r){var o=a.getReference(r.referencePID),l=new t((function(t,s){var l={onComplete:function(e){t({rootReferenceMdl:e,actionIndex:n})},onFailure:function(){s(i.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))},silent:!0};e.is(o)?t({rootReferenceMdl:o,actionIndex:n}):a.fetchRoot(r.rootReferencePID,l)}));s.push(l)})),t.all(s)},S=function(n){var r=n||[],l=[],c={},u={};return o.notify("startProgress",u),r.forEach((function(n){var r=new t((function(t,r){e.is(n.rootReferenceMdl)?a.needToQueryForChildren(n.rootReferenceMdl.get("PID"))?(s.isAKindOf(n.rootReferenceMdl,"PPRContext")&&(c={expandLevel:1,forceDBMode:!0}),a.getDescendantsFromServer(n.rootReferenceMdl.get("PID"),(function(){t(n)}),c)):t(n):r(i.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))}));l.push(r)})),t.all(l).then((function(e){return o.notify("stopProgress",u),t.resolve(e)})).catch((function(e){return o.notify("stopProgress",u),t.reject(e)}))},w=function(e){var n=e||[],o=P(r.dragNDropInfo);return n.some((function(e){var t=!1;return a.isWorkInstruction(e.rootReferenceMdl)&&a.isOperation(o)&&(t=!0),t}))?new t((function(t,n){a.needToQueryForChildren(o)?a.getDescendantsFromServer(o,(function(){t(e)}),{onFailure:n}):t(e)})):t.resolve(e)},R=function(r){return new t((function(t,o){e.is(r,"array")&&r.forEach((function(r){var s=a.getReference(r),l=function(e){var r={};m(e)?(r.action=["addRoot"],r.parameters=[{rootReferencePID:e.get("PID")}],r.message=[null]):(r.action=["error"],r.parameters=[null],r.message=[i.getNLSValue("AbstractDragAndDropManager.NotValidType")]),n.call(u,r).then(t,o)};e.is(s)?l(s):a.fetchRoot(r,{context:u,onComplete:l,onFailure:o,silent:!0})}),u)}))},V=function(n){return new t((function(t,i){var a=(n||[{actionIndex:null}])[0].actionIndex,s=e.is(a,"number")?r.parameters[a]:null;e.is(s,"array")&&s.length>0?(o.notify("CreateMultipleLinks",[s]),t()):i("AbstractDragAndDropManager.DropEffectError")}))},L=function(n){return new t((function(t){var i=(n||[{actionIndex:null}])[0].actionIndex,a=e.is(i,"number")?r.parameters[i]:null;o.notify("CreateLinkOrInstance",[a]),t()}))},A=function(n,s){var u=null;switch(n){case"addRoot":case"reorderRoots":u=I(s);break;case"addChangeAction":u=c.setCAAndGetDetails(r.parameters[s].rootReferencePID).then(R,C);break;case"addPPRContext":u=b(s).then(S).then(D).catch(C);break;case"createLink":u=b(s).then(S).then(V).then(t.resolve,C);break;case"createLinkOrInstance":u=b(s).then(S).then(w).then(L).catch(C);break;case"reorder":u=function(n){return new t((function(t,s){var c,u,d=-1,g={},f={},h=function(e){o.warn(i.getNLSValue("AbstractDragAndDropManager.ReorderFailure")),o.debug("AbstractDragAndDropManager.ReorderFailure. Error Details: "+e),o.notify("stopProgress",g),s()};o.notify("startProgress",g),d=r.parameters[n].newChildrenPID.indexOf(r.parameters[n].targetInstancePID),"bottom"===r.parameters[n].dropPosition&&d++,r.parameters[n].movedInstancePID.forEach((function(e,t){r.parameters[n].newChildrenPID.splice(d+t,0,e)})),c={listOrdered:r.parameters[n].newChildrenPID,listModifiable:r.parameters[n].movedInstancePID},u={url:"dsmfg/private/V0/invoke/persistChildrenOrder",method:"POST",onComplete:function(i){var s=[];e.is(i,"array")&&i.forEach((function(t){var n;e.is(t.PID,"string")&&e.is(t.V_TreeOrder)&&(n=a.getInstance(t.PID),a.manageLinearProductFlowsOnDeleteInstance(n),n.set("V_TreeOrder",t.V_TreeOrder),a.manageLinearProductFlowsOnCreateInstance(n))})),r.parameters[n].newChildrenPID.forEach((function(e){s.push(a.getInstance(e))})),p.prepareUpdate(),o.notify("removeInstance",[s]),o.notify("addInstance",[s]),o.notify("reorder",f),p.pushUpdate(),o.notify("stopProgress",g),t()},onFailure:h,onTimeout:h,data:e.Json.encode(c)},l.webServiceRequest(u)}))}(s);break;case"reparent":u=function(n){return new t((function(t,i){var a=e.merge({onComplete:t,onFailure:i},r.parameters[n]);e.is(g)?g.moveInstance(a):(o.debug("Model behavior is not available to reparent"),i())}))}(s);break;case"aggregatedAction":u=t.resolve();break;case"modifyAttribute":u=function(n){return new t((function(t,i){var a=e.merge({onComplete:t,onFailure:i},r.parameters[n]);e.is(v)?v.modifyAttribute(a):(o.debug("groupingViewBehavior is not available"),i())}))}(s);break;case"error":u=C(r.message[s]);break;default:u=C("AbstractDragAndDropManager.DropEffectError")}return u};return e.is(r)&&e.is(r.action,"array")&&(r.action.forEach((function(t,n){var o=function(){var o=A(t,n);return r.promises=e.is(r.promises,"array")?r.promises:[],r.promises[n]=o,o};f=e.is(f)?f.then(o,o):o()}),this),f.then(d,d)),!1}))},_computeAndProcessDropEffect:function(t){var n;e.is(t)&&(n=C(t),e.is(n)&&this.processDropEffect(n))},onTreeListViewDrop:function(t,r){var o,i,a=this.getDragNDropInfo(t,r);return e.is(a)&&(o=C(a),e.is(o)&&(this.processDropEffect(o),i=e.is(widget)&&widget.id?"padcompassSocket_"+widget.id:"padcompassSocket",null===p&&(p=new n.Socket(i)).subscribeServer("com.ds.compass",window.parent),p.dispatchEvent("onResetX3DContent",{},i))),!1},onDragEnterColumnHeader:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(e.is(f)?f.promise.then((function(){g=e.Promise.deferred(),y(t.iconEnum.PLUS,!1),f=null}),(function(){o.log("failed")})):(g=e.Promise.deferred(),y(t.iconEnum.PLUS,!1))),!0},onDragLeaveColumnHeader:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(y(t.iconEnum.DROPHERE,!0),e.is(g)&&g.resolve()),!0},onDragEnterBlank:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&(e.is(g)?g.promise.then((function(){y(t.iconEnum.PLUS,!1),g=null}),(function(){o.log("failed")})):y(t.iconEnum.PLUS,!1),f=e.Promise.deferred()),!0},onDragLeaveBlank:function(){var t=o.getBehavior("DropZoneViewBehavior");return e.is(t)&&y(t.iconEnum.DROPHERE,!0),e.is(f)&&f.resolve(),!0},onDropCell:function(t,n){var r,a,l=this,c=this.getDragNDropInfo(t,n);if(e.is(c.info.fromManageCapableResource)&&!0===c.info.fromManageCapableResource)return function(e){var t=[];e.draggedItems.forEach((function(n){e.targetRootReferencePID===n.resourceAreaID&&0===e.targetInstancePIDsArray.length&&t.push({isAggregatedBy:e.targetRootReferencePID,isInstanceOf:n.referencePID,linkPID:n.linkPID})})),o.notify("createResourceUsage",t)}(c),!0;if(e.is(n.droppedNodes)&&S(n.droppedNodes))return o.warn(i.getNLSValue("ReadOnlyTypes.Warn.Title")),!1;if(e.is(n.nodeModel)){const e=n.nodeModel.object.type;if(s.isReferencesHasReadOnlyType(e))return o.warn(i.getNLSValue("ReadOnlyTypes.Warn.Title")),!1}if(r=o.getBehavior("DropZoneViewBehavior"),e.is(n.nodeModel)&&!e.is(n.nodeModel.getReferencePID))return!1;try{return a=w(c),Array.isArray(a)&&a.length>0?(R(a,(function(){l._computeAndProcessDropEffect(c)})),!1):this.onTreeListViewDrop(t,n)}catch(t){return e.is(r)&&y(r.iconEnum.DROPHERE,!0),!0}},onDropBlank:function(t,n){var r,a,s=this,l=this.getDragNDropInfo(t,n);if(e.is(n.droppedNodes)&&S(n.droppedNodes))return o.warn(i.getNLSValue("ReadOnlyTypes.Warn.Title")),!1;r=o.getBehavior("DropZoneViewBehavior");try{return a=w(l),Array.isArray(a)&&a.length>0?(R(a,(function(){s._computeAndProcessDropEffect(l)})),!1):this.onTreeListViewDrop(t,n)}catch(t){return e.is(r)&&y(r.iconEnum.DROPHERE,!0),!0}},onDropColumnHeader:function(t,n){var r,i=o.getBehavior("DropZoneViewBehavior");try{return r=e.Json.decode(t.dataTransfer.getData("Text")),!(!e.is(r.data)||!e.is(r.data.DataGridView_Column_Options))||this.onTreeListViewDrop(t,n)}catch(t){return e.is(i)&&y(i.iconEnum.DROPHERE,!0),!0}}}}})),define("DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/GroupingDialog",["UWA/Core"],(function(e){"use strict";return function(t,n,r){var o,i;return o=function(o){var a=e.createElement("div",{class:"Message-dialog-content-container"});(i=new(r.getComponent("ComboBox"))({elementsList:["type","current","organization","owner","V_NeedDedicatedSystem","revision"],selectedIndex:0})).inject(a),n.create("Dialog",{title:"GROUPING DIALOG",content:a,minHeight:200,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Ok:n.create("Button",{onClick:function(e){var t=e.dsModel.dialog,n=i.value;t.close(),o(n)}}),Cancel:n.create("Button",{onClick:function(e){e.dsModel.dialog.close(),t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}})}}).close=function(){this.destroy(),null,t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}},{show:function(e){o(e)}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";var n=function(e){var t,n=!1;return e.isHeader||(n=(t=e.nodeModel.getAttributeValue("cellInfo"))&&t.candidateEntries&&t.candidateEntries.length>1),n};return t.singleton({name:"MILColumnManager",init:function(e){this._parent(e)},hasMILCellValue:function(e){return!0},getCellTypeRepresentation:function(e){var t;if(e.isHeader)return"string";switch(e.dataIndex){case"MIL_previous":case"MIL_manufactured":t="url";break;case"MIL_rerouting":t=n(e)?"enumString":"string";break;case"MIL_suggestion":t="enumString";break;default:t="string"}return t},getCellClassName:function(t){var n,r,o="";return e.is(t.nodeModel)&&(r=t.nodeModel.options.milStatus,"MIL_status"===t.dataIndex?(n=t.cellView.getContent(),"fail"===r?o="mil-fail-status":"success"===r?o="mil-success-status":"ignore"===r&&(o="mil-ignored-status"),""!==o&&n.hasClassName(o)&&(o="")):"MIL_manufactured"!==t.dataIndex&&"MIL_previous"!==t.dataIndex||(o="icon-text-column"),"MIL_status"!==t.dataIndex&&"success"===r&&(o+=" mil-succeeded-row"),"MIL_status"!==t.dataIndex&&"ignore"===r&&(o+=" mil-ignored-row")),o},getCellValue:function(t){var n,r,o=t.nodeModel.options.grid,i=function(e,t){return{label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}}};switch(t.dataIndex){case"MIL_previous":return n=o.cellInfo.PreviousProdIconUrl,i(o[t.dataIndex],n);case"MIL_manufactured":return n=o.cellInfo.MfgItemIconUrl,i(o[t.dataIndex],n);case"MIL_rerouting":return r=o[t.dataIndex],"object"===e.typeOf(r)&&e.is(this.isCellInEdition,"function")&&(this.isCellInEdition(t.cellID)&&(r=o[t.dataIndex].valueItem),r=o[t.dataIndex].labelItem),r;case"MIL_suggestion":return e.is(o[t.dataIndex])&&!t.isHeader&&e.is(this.isCellInEdition,"function")?this.isCellInEdition(t.cellID)?o[t.dataIndex].value:o[t.dataIndex].label:null;default:return o[t.dataIndex]}},getCellSemantics:function(e){var t,r=e.nodeModel.options,o=function(e){var t={};return e.forEach((function(e){t[e.labelItem]=e.valueItem})),t};return"MIL_rerouting"===e.dataIndex?r.grid&&r.grid.cellInfo&&n(e)&&(t={possibleValues:o(r.grid.cellInfo.candidateEntries)}):"MIL_suggestion"===e.dataIndex&&r.grid&&r.grid.cellInfo&&(t={possibleValues:o(r.grid.cellInfo.suggestionToPerformEntries)}),t},setMILValue:function(t,n,r){var o,i,a;if("MIL_suggestion"===t.dataIndex){if(!e.is(r)||""===r)return;n.nodeModel.options.grid.cellInfo.suggestionToPerformEntries.forEach((function(e){e.valueItem===r&&(a={label:e.labelItem,value:e.valueItem,tooltip:e.tooltipItem,getLabel:function(){return this.label}})})),n.nodeModel.setAttribute(t.dataIndex,a),e.is(n.nodeModel)&&e.is(n.nodeModel.options)&&(o=n.nodeModel.options,e.is(o.grid)&&(o.grid.MIL_suggestion=a,e.is(o.grid.cellInfo)&&(o=o.grid.cellInfo,e.is(o.action)&&(o.action=r))))}else if("MIL_rerouting"===t.dataIndex){if(!e.is(r)||""===r)return;n.nodeModel.options.grid.cellInfo.candidateEntries.forEach((function(e){e.valueItem===r&&(i=e)})),n.nodeModel.setAttribute(t.dataIndex,i)}},getCellEditableState:function(t){var r,o,i=!0;if(e.is(t.nodeModel)&&e.is(t.nodeModel.options))switch(o=t.nodeModel.options.milStatus,"MIL_suggestion"!==t.dataIndex||!e.is(o)||"success"!==o&&"ignore"!==o||(i=!1),t.dataIndex){case"MIL_suggestion":r=i;break;case"MIL_rerouting":r=n(t);break;default:r=!1}return r}})})),define("DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/Mutex",["UWA/Core"],(function(e){"use strict";return function(){var t=!1,n=[];return{acquire:function(){var r=e.Promise.deferred();return t?n.push(r):(t=!0,r.resolve()),r.promise},release:function(){var r=null;t&&(n.length>0?r=n.shift():t=!1),e.is(r)&&r.resolve()},destroy:function(){for(;n.length>0;)n.shift().resolve()}}}})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ImplementedRevChooserUI",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i,a,s){var l,c,u,d,g,f,p,h,m,v,I,D,P,y,C,b,S,w=r.getComponent("TooltipModel"),R=null,V=null,L=[];return v=function(){u=r.createElement("div",{class:"implementedRevChooser-dlg-container"}),S=r.createElement("div",{class:"inside-accordeon-warningMessage"}),P(),y(),C()},I=function(t){c=e.merge(t,{disabled:!0,defaultWidth:"380",defaultHeight:"350",modalFlag:!1,resizableFlag:!0}),v(),(l=r.create("Dialog",{title:o.getNLSValue(c.cmdTitle),domId:c.cmdId,content:u,identifier:c.cmdId,width:c.defaultWidth,height:c.defaultHeight,modalFlag:c.modalFlag,resizableFlag:c.resizableFlag,buttons:{Cancel:r.create("Button",{onClick:function(){l.close()}}),Ok:r.create("Button",{disabled:!e.is(c.disabled)||c.disabled,emphasize:"primary",onClick:function(){var t=n.getBehavior("WUXNodeModelBehavior").getSelectedNodes(),r={};e.is(t)&&t.length>0&&(V=t[0].getReferencePID()),r.implementingId=R,r.implementedId=V,r.implementingPaths=L,!0===c.optionsSection&&("ComboBox"===c.scopeOption&&(r.scopeCreation=g.value),e.is(c.mfgItemPrefix)&&c.mfgItemPrefix&&(r.mfgItemPrefix=p.value),e.is(f)&&(r.updateIntermediateScopedAssemblies=f.checkFlag)),c.onOKCallBack(r)}})}})).close=function(){D()}},D=function(){var t,r=n.getBehavior("WUXNodeModelBehavior"),o=n.getBehavior("TreeListViewBehavior");e.is(l)&&(e.is(h)&&r.removeEventListener(h),e.is(m)&&r.removeEventListener(m),r.emptyNodeModel(),t=o.getDataGridView(),e.is(t)&&t.remove(),l.destroy(),d=void 0,u=void 0,l=void 0),c.onCancelCallback&&c.onCancelCallback()},P=function(){var e=r.createElement("div",{}).inject(u),t=o.getNLSValue("ImplementUI.Implementing"),n=o.getNLSValue("ImplementUI.SelectImplementing");d=r.create("SelectionControl",{title:t,message:n,renderTo:e})},y=function(){var t,i,a,s=o.getNLSValue("ImplementUI.SelectImplementedRevision"),l=r.createElement("div",{class:"implementedSection-header",html:"<h5>"+s+"</h5>"}),d=r.createElement("div",{class:c.implementedRevTreeListCSSStyle}),g=n.getBehavior("WUXNodeModelBehavior"),f=n.getBehavior("TreeListViewBehavior");b=r.createElement("div",{class:"Non-BOM_Item_WarningMsg"}),l.inject(u),d.inject(u),b.inject(u),a=e.clone(c.moduleOptions),t={rowSelection:"single"},e.is(a.views)&&e.is(a.views.treeListView)&&(i=e.extend(a.views.treeListView,t),delete a.views.treeListView,a.dataGridViewOptions=i),f.createTreeListView(a),f.loadDocument(g.getWUXNodeModel()),f.getContent().inject(d)},C=function(){var t,n,i,a,s;!0===c.optionsSection&&(s=r.createElement("div",{class:"accordeon-section-container, optionsSection"}).inject(u),t=r.createElement("div",{class:"options-container"}),r.create("Accordeon",{items:[{header:o.getNLSValue("Expander.Options"),content:t,expandedFlag:!0}],style:"filled-separate"}).inject(s),e.is(c.scopeOption)&&(n=r.createElement("div",{class:"scope-option-container"}).inject(t),r.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.CreateScopeForChildren")}).inject(n),"ComboBox"===c.scopeOption&&(g=r.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:o.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"}]}).inject(n))),e.is(c.mfgItemPrefix)&&c.mfgItemPrefix&&(i=r.createElement("div",{class:"mfgItemPrefix-option-container"}).inject(t),r.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.PrefixForMfgItems")}).inject(i),i.tooltipInfos=new w({shortHelp:o.getNLSValue("ImplementUI.PrefixForMfgItems")}),p=r.create("LineEditor",{placeholder:o.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder")}).inject(i)),a=r.createElement("div",{class:"scope-option-container"}).inject(t),r.createElement("div",{class:"wux-title-textElement-long",text:o.getNLSValue("ImplementUI.UpdateIntermediateScopedAssemblies")}).inject(a),f=r.create("Toggle",{checkFlag:!1}).inject(a))},{createUI:function(e){I(e)},isVisible:function(){return!!e.is(l)&&l.visibleFlag},destroyUI:function(){e.is(l)&&l.close()},updateImplementingLabel:function(e){var t=n.getBehavior("WUXNodeModelBehavior");R=e,d.updateLabel([i.getReferenceModel(e)]),t.emptyNodeModel(),l.clearMessages()},updateImplementedRevnList:function(t,i,a,s){var u,d,g,f,p,v=!1,I=!1,D={},P={},y=n.getBehavior("WUXNodeModelBehavior"),C={};for(u=0;u<i.length;u++){if(g=(d=i[u]).PID,!v){if(t!==g)continue;v=!0}!0!==a?((P={})["V_Name.reference"]=d.V_Name,P["revision.reference"]=d.revision,D={id:g,referencePID:g,referenceType:d.type,grid:P,label:d.V_Name,revision:d.revision,icons:[o.getIconURLFromKey(d.PPRTYPE)]},e.owns(d,"V_IsManufacturable")&&(D.isManufacturable=d.V_IsManufacturable),y.addNodeModel(D),I=!0):a=!1}I?(s?(l.width="700",l.warning(o.getNLSValue("ImplementBehavior.Validation.ChildrenImpLinkDeletion"))):l.width=c.defaultWidth,h=y.addEventListener("select",(function(t){e.is(l)&&(C=t.data.nodeModel.options,e.owns(C,"isManufacturable")&&"FALSE"===C.isManufacturable&&(f=o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.NonBOMItem",{objectName:C.label+" "+C.revision})),"UpdateMfgItemStructure"===l.identifier?(p=new e.Element("div",{class:"TNRWarning"}).inject(b),r.createElement("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(p),S.setHTML(f).inject(p)):l.warning(f)),l.buttons.Ok.disabled=t.data.nodeModel.getTreeDocument().getSelectedNodes().length<1)})),m=y.addEventListener("unselect",(function(t){e.is(l)&&(b.empty(),l.clearMessages(),l.buttons.Ok.disabled=t.data.nodeModel.getTreeDocument().getSelectedNodes().length<1)}))):(l.width=c.defaultWidth,l.error(o.getNLSValue("ImplementBehavior.Validation.NoHigherRevision")))},showMessages:function(e,t){"info"===t?l.info(e):"warning"===t?l.warning(e):"error"===t?l.error(e):n.debug("type of message is invalid")},updateImplementing:function(){var e,t=[],r=s.getSelectionsWithPaths(n.getId());0!==r[1].length&&((e=r[1]).forEach((function(e){t.push(e.path)})),1===e.length&&(L=[t[0]]))}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManagerMFN",["UWA/Core","UWA/Class"],(function(e,t){"use strict";const n=(r=" ",(...e)=>e.join(r));var r;const o=function(){let e=new Map;return{generateFor:function(t){let n;return n=e.has(t)?e.get(t)+1:1,e.set(t,n),n}}},i="MIL_previous",a="MIL_rerouting",s="MIL_suggestion",l="MIL_status",c="success",u="fail",d=t=>{let n=!1;var r;return e.is(t)&&(n=!0,r=t,e.is(r,"string")&&0===r.length&&(n=!1)),n},g=t=>n=>r=>{let o=!1;if(!r.isHeader){const i=r.nodeModel;if(e.is(i)){const r=i.getAttributeValue("cellInfo");if(e.is(r)){const e=r[t];o=n(e)}}}return o},f=g("candidateEntries")((e=>Array.isArray(e)&&e.length>1)),p=g("suggestionToPerformEntries")((e=>Array.isArray(e)&&e.length>0)),h=t=>{let n=!1;const r=t.options.milStatus;return e.is(r)&&(n=r===c),n};return t.singleton({name:"MILColumnManager",init(e){this._parent(e)},hasMILCellValue:e=>!0,getCellTypeRepresentation(e){let t;if(e.isHeader)t="string";else switch(e.dataIndex){case i:t="url";break;case a:t=f(e)?"enumString":"string";break;case s:t=p(e)?"enumString":"string";break;default:t="string"}return t},getCellClassName(t){const r="",o="mil-success-status",a="mil-fail-status",s="icon-text-column",d=(e=>t=>e.cellView.getContent().hasClassName(t))(t);let g=r;if(e.is(t.nodeModel)){const e=t.nodeModel.options.milStatus,r=t.dataIndex;r===l?e===c?d(o)||(g=o):e===u&&(d(a)||(g=a)):(r===i&&(g=s),e===c&&(g=n(g,"mil-succeeded-row")))}return g},getCellValue(t){const n=(e,t)=>({label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}});let r=null;if(e.is(t.nodeModel)){const o=t.nodeModel.options.grid,l=t.dataIndex;switch(l){case i:if(e.is(o[l])&&!t.isHeader){const t=o.cellInfo;e.is(t)&&(r=n(o[l],t.PreviousProdIconUrl))}break;case a:case s:e.is(o[l])&&(t.isHeader||e.is(this.isCellInEdition,"function")&&(r=this.isCellInEdition(t.cellID)?o[l].value:o[l].label));break;default:r=o[l]}}return r},getCellSemantics(t){const r=t=>{const r=(e=>t=>{const r=e.generateFor(t);return n(t,"["+r+"]")})(new o);return t.reduce(((t,n)=>{const o=n.labelItem;if(e.owns(t,o)){t[r(o)]=n.valueItem}else t[o]=n.valueItem;return t}),{})};let i=null;if(e.is(t.nodeModel)){const n=t.nodeModel.options.grid,o=t.dataIndex;if(e.is(n)){const l=n.cellInfo;e.is(l)&&(o===a?f(t)&&(i={possibleValues:r(l.candidateEntries)}):o===s&&p(t)&&(i={possibleValues:r(l.suggestionToPerformEntries)}))}}return i},setMILValue(t,n,r){if(e.is(n.nodeModel)){let o=n.nodeModel.options.grid;const i=t.dataIndex;if(i===s){if(d(r)){let t=o.cellInfo;if(e.is(t)){const a=t.suggestionToPerformEntries.find((e=>e.valueItem===r));if(e.is(a)){const e={label:a.labelItem,value:a.valueItem,tooltip:a.tooltipItem,getLabel:function(){return this.label}};n.nodeModel.setAttribute(i,e),o[s]!==e&&(o[s]=e),t.action=r}}}}else if(i===a&&d(r)){let t=o.cellInfo;if(e.is(t)){const s=t.candidateEntries.find((e=>e.valueItem===r));if(e.is(s)){const e={label:s.labelItem,value:s.valueItem,tooltip:s.labelItem,getLabel:function(){return this.label}};n.nodeModel.setAttribute(i,e),o[a]!==e&&(o[a]=e)}if("#SELECT"===r)t.candidateId=null,t.candidateOccPath=null;else{const e=r.split(",");t.candidateId=function(e,t=null){const n=e.length;return n>0?e[n-1]:t}(e,""),t.candidateOccPath=e}}}}},getCellEditableState(t){let n;switch(t.dataIndex){case s:n=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;(h(e)||e.isExpanded()&&e.hasChildren())&&(n=!1)}return n})(t);break;case a:n=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;n=!h(e)&&f(t)}return n})(t);break;default:n=!1}return n}})})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ImplementUI",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i,a,s){var l,c,u,d,g,f,p,h,m,v,I,D,P,y,C,b,S,w,R=null,V=[],L=null,A=[],E=[],N=null,T=r.getComponent("TooltipModel"),M=null,B=null,O=null,F=null,x=null,k=null,U=null,_=null,W=[],j=[],H=[];return m=function(){var t=o.getNLSValue("ImplementUI.Implementing"),n=o.getNLSValue("ImplementUI.SelectImplementing"),i=o.getNLSValue("ImplementUI.Implemented"),a=o.getNLSValue("ImplementUI.SelectImplemented");L=r.createElement("div",{class:"ImplementUI-Container"}),N=r.createElement("div",{class:"selectionForm-Main-Container"}).inject(L),!0===l.implementingSection&&(u=r.create("SelectionControl",{title:t,message:n,renderTo:N,multiSelection:e.is(l.multiSelectionOfImplementing)?l.multiSelectionOfImplementing:null})),!0===l.implementedSection&&(c=r.create("SelectionControl",{title:i,message:a,renderTo:N,multiSelection:!e.is(l.multiSelectionOfImplemented)||l.multiSelectionOfImplemented})),!0===l.optionsSection&&(M=r.createElement("div",{class:"options-section-container"}).inject(L),y()),U=r.createElement("div",{class:"dcForm-Main-Container"}).inject(L)},v=function(t){var n,r=t.newObjType,i=t.newObjDimensionType,a=t.cmdTitle;return e.is(i)?n=o.getNLSValue(a,{dimension:o.getNLSValue(i,null,"Dimension")}):e.is(r)?(-1!==r.indexOf("/")&&(r=r.split("/")[1]),n=o.getNLSValue(a,{type:o.getNLSValue(r||"",null,"Type")})):n=o.getNLSValue(a),n},I=function(t){var o,i,a,s=null,c=null,u="PLMEntity.V_Name";l=t,m(),(R=r.create("Dialog",{title:v(l),domId:l.cmdId,content:L,resizableFlag:!0,modalFlag:l.modalFlag,buttons:{Cancel:r.create("Button",{onClick:function(){R.close()}}),Ok:r.create("Button",{disabled:!e.is(o)||o,emphasize:"primary",onClick:function(){var t,r,o={};if(e.is(k)&&!0===n.getPreferenceValue("showDialog")){if(!0!==(a=k.validate()).result)return R.error(a.message),void(R.buttons.Ok.disabled=!1);for(s=k.getValues(),e.is(l.newObjDimensionType)&&(s["DELFmiMagnitudeExt.V_DimensionType"]=l.newObjDimensionType),c=k.getSecurityContextOverride(),s[u]!==V[0][u]&&(r=s[u]),t=0;t<V.length;t++)e.merge(V[t],s);if(r)if(V.length>1)for(t=0;t<V.length;t++)V[t][u]=r+"_"+(t+1);else V[0][u]=r}else if(e.is(l.newObjType)){if(e.is(E,"array"))for(t=0;t<E.length;t++)(s={}).V_Type=l.newObjType,V[t]=s}else V=null;i=e.clone(V),o.securityContextOverride=c,o.implementingId=_,o.implementedIDs=j,o.implementedPaths=H,o.implementingPaths=W,o.newObjAttributes=i,o.isInstancePossible=e.is(l.isInstancePossible)?l.isInstancePossible:null,o.cmdAction=e.is(l.cmdAction)?l.cmdAction:null,!0===l.optionsSection&&("ComboBox"===l.scopeOption?o.scopeCreation=O.value:"Toggle"===l.scopeOption&&(o.scopeCreation=O.checkFlag),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(o.mfgItemPrefix=F.value),e.is(l.mfgItemResultReport)&&l.mfgItemResultReport&&(o.resultReportMode=x.value)),l.onOKCallBack(o)}})}})).close=function(){D()}},P=function(){e.is(p)&&p.destroy(),e.is(k)&&(k.destroy(),k=null)},D=function(){R.destroy(),P(),U=null,M=null,B=null,O=null,_=null,j=[],H=[],W=[],R=null,L=null,l.onCancelCallback&&l.onCancelCallback()},y=function(){var t;return B=r.createElement("div",{class:"Basic-Section-container"}).inject(M),t=r.create("Accordeon",{items:[{header:o.getNLSValue("Expander.Options"),content:B,expandedFlag:!0}],style:"filled-separate"}).inject(M),e.is(l.scopeOption)&&(d=r.createElement("div",{class:"scope-option-container"}).inject(B),r.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.CreateScopeForChildren")}).inject(d),d.tooltipInfos=new T({shortHelp:o.getNLSValue("ImplementUI.CreateScopeForChildren")}),"ComboBox"===l.scopeOption&&(O=r.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:o.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"},{labelItem:o.getNLSValue("ImplementUI.ScopeCreation.LeafScope"),valueItem:"Leaf"}]}).inject(d))),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(g=r.createElement("div",{class:"mfgItemPrefix-option-container"}).inject(B),r.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.PrefixForMfgItems")}).inject(g),g.tooltipInfos=new T({shortHelp:o.getNLSValue("ImplementUI.PrefixForMfgItems")}),F=r.create("LineEditor",{placeholder:o.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder")}).inject(g)),e.is(l.mfgItemResultReport)&&l.mfgItemResultReport&&(f=r.createElement("div",{class:"resultReport-option-container"}).inject(B),r.createElement("div",{class:"wux-title-textElement",text:o.getNLSValue("ImplementUI.ResultReport")}).inject(f),f.tooltipInfos=new T({shortHelp:o.getNLSValue("ImplementUI.ResultReport")}),x=r.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:o.getNLSValue("ImplementUI.ResultReport.FullReport"),valueItem:"full_report"},{labelItem:o.getNLSValue("ImplementUI.ResultReport.ErrorReportOnly"),valueItem:"erroronly_report"},{labelItem:o.getNLSValue("ImplementUI.ResultReport.NoReport"),valueItem:"no_report"}]}).inject(f)),t},b=function(e,t){R.title=v(l.cmdTitle),t.inject(L),R.clearMessages()},C=function(){j.length>0&&(!0===l.implementingSection?e.is(_)?R.buttons.Ok.disabled=!1:R.buttons.Ok.disabled=!0:R.buttons.Ok.disabled=!1)},S=function(t){var n,r,o=[];if(e.is(t,"array"))for(n=0;n<t.length;n++)r=t[n].get("V_Name"),o.push(r);return o},w=function(){var e;!0===l.checkForImplementingScope&&("ResultingProduct"===l.linkType?s.isResultingLinked(_):s.isScoped(_))&&(e=o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:h})),R.error(e))},{createUI:function(e){I(e)},isVisible:function(){return!!e.is(R)&&R.visibleFlag},destroyUI:function(){e.is(R)&&R.close()},updateImplemented:function(e){var t=[],n=[],r=[];A=e,H=[],j=[],R.clearMessages(),0!==e.length&&(e.forEach((function(e){n.push(e.id),r.push(e.path),t.push(i.getReferenceModel(e.id))})),c.updateLabel(t),E=S(t),!0===l.multiSelectionOfImplemented?(j=n,H=r):1===e.length?(j=[n[0]],H=[r[0]]):(R.buttons.Ok.disabled=!0,P()),C(),w())},getImplementedIDs:function(){return j},updateImplementing:function(t){var n=[],r=[],o=[];_=null,W=[],R.clearMessages(),0!==t.length&&(t.forEach((function(e){r.push(e.id),o.push(e.path),n.push(i.getReferenceModel(e.id))})),!1===u.updateLabel(n)?R.buttons.Ok.disabled=!0:(e.is(A,"array")&&this.updateImplemented(A),!0===l.multiSelectionOfImplementing||(1===t.length?(_=r[0],W=[o[0]],h=n[0].get("V_Name")):(R.buttons.Ok.disabled=!0,P())),C(),w()))},getImplementingID:function(){return _},showDCFormForAssign:function(t){var n;if(e.is(_)&&j.length>0)if(l.isInstancePossible=t,!0===t){if(V=[],e.is(E,"array"))for(n=0;n<E.length;n++)V.push({"PLMEntity.V_Name":E[n]});e.is(k)?k.updateToDefaultValues(V[0]):k=r.create("DataCollectionUI",{type:l.newObjType,onTypeChange:b,renderTo:U,defaultValues:V})}else P()},showDCFormForCreate:function(t){var n;if(j.length>0){if(V=[],e.is(E,"array"))for(n=0;n<E.length;n++)V.push({"PLMEntity.V_Name":E[n]});e.is(k)?k.updateToDefaultValues(V[0]):k=r.create("DataCollectionUI",{type:l.newObjType,onTypeChange:b,renderTo:U,defaultValues:V,createRoot:!!e.is(t)&&t})}},getSelectionsWithPaths:function(){var e={},t=a.getSelectionsWithPaths(n.getId());return e.selNodes=[],e.bUpdateImplemented=!1,e.bUpdateImplementing=!1,t.length<=0||(0!==t[0].length?(e.selNodes=t[0],e.bUpdateImplemented=!0,e.bUpdateImplementing=!1):0!==t[1].length&&(e.selNodes=t[1],e.bUpdateImplemented=!1,e.bUpdateImplementing=!0)),e},showErrorMultipleImplementedSelected:function(e){c.showWarningMessage(e),H=[],j=[],R.buttons.Ok.disabled=!0},showMessages:function(e,t){"info"===t?R.info(e):"warning"===t?R.warning(e):"error"===t?R.error(e):n.debug("type of message is invalid")}}}})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/SelectionControl",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i){var a,s,l,c=null,u=null,d=!1,g=r.getComponent("TooltipModel"),f=r.getComponent("Accordeon"),p=function(t){var n=e.is(t.get("V_usage"))&&"NULL"!==t.get("V_usage")&&"VPMReference"===t.get("type")?t.get("V_usage"):t.get("type"),r=new e.Element("div",{class:"TNRInfo"}),i=new e.Element("div",{class:"iconType-container"}).inject(r);return o.getIconElem(n).inject(i),new e.Element("div",{class:"SubLabelDiv",text:t.get("V_Name")}).inject(r),new e.Element("div",{class:"SubRevisionDiv",text:t.get("revision")}).inject(r),r};return{createUI:function(t){var n,r,i=new e.Element("div",{class:"accordeon-section-container"});a=new e.Element("div",{class:"inside-accordeon-warningMessage"}),s=new e.Element("div",{class:"inside-accordeon-errorMessage"}),e.is(t)&&(n=e.is(t.title)?t.title:"",r=e.is(t.message)?t.message:"",d=!!e.is(t.multiSelection)&&t.multiSelection),u=new e.Element("div",{class:"Data-selection-UI"}).inject(t.renderTo),l=function(t,n,r){var i=new e.Element("div",{class:"accordeon-section-container"}).inject(r);return new f({items:[{header:o.getNLSValue(t),content:n,expandedFlag:!0}],style:"filled-separate"}).inject(i)}(n,i,u),c=function(t,n){var r;return(r=new e.Element("div",{class:"selectionUIitems-container"})).inject(n),new e.Element("div",{class:"SubLabelDiv",styles:{padding:"0px"}}).setHTML(o.getNLSValue(t)).inject(r),n}(r,i)},updateLabel:function(t){var n,r,a,s,l,u,f,h=[],m=!1,v=new e.Element("i",{class:"wux-ui-3ds wux-ui-3ds-menu-dot wux-layouts-rowentry-moreindicator",id:"multiValueCellMoreIndicator"}),I=[];if(!e.is(t,"string")){if(e.is(t,"array")||(t=[t]),t&&c)if(h=[],!1===d&&t.length>1)s=o.getNLSValue("Error.MultipleObjectsSelected"),this.showWarningMessage(s),m=!1;else if(t.length>0)if(c.empty(),i.isReferencesHasReadOnlyType(t))s=o.getNLSValue("Error.ReadOnlyTypesNotAllowed"),this.showErrorMessage(s),m=!1;else{for(r=0;r<t.length;r++)n=p(t[r]),0===r&&n.inject(c),(a=new e.Element("div",{class:"TNRInfo"})).addContent(n.innerHTML),h.push(a),u=t[r].get("V_IsManufacturable"),e.is(u)&&"FALSE"===u&&(f=t[r].get("type"),e.is(f)&&"PRODUCT"===i.getPPRType(f)&&I.push(t[r].get("V_Name")));I.length>0&&(l=I.length>1?o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.NonBOMItems")):o.getNLSValue(o.getNLSValue("ImplementBehavior.Validation.NonBOMItem",{objectName:I[0]})),this.showWarningMessageForPrd(l)),!0===d&&t.length>1&&v.inject(c),c.tooltipInfos=new g({shortHelp:h,allowUnsafeHTMLShortHelp:!0}),m=!0}return m}c&&(c.empty(),new e.Element("div",{}).inject(c).setHTML(t).inject(c),e.is(c.tooltipInfos)&&(c.tooltipInfos=null))},showErrorMessage:function(t){var n;c.empty(),n=new e.Element("div",{class:"TNRInfo"}).inject(c),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-attention"}).inject(n),s.setHTML(t).inject(n),e.is(c.tooltipInfos)&&(c.tooltipInfos=null)},showWarningMessage:function(t){var n;c.empty(),n=new e.Element("div",{class:"TNRInfo"}).inject(c),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(n),a.setHTML(t).inject(n),e.is(c.tooltipInfos)&&(c.tooltipInfos=null)},updateAccordeon:function(e,t){l.updateItem(e,t)},showWarningMessageForPrd:function(t){var n,r;r=c.getElement(".TNRWarning"),e.is(r)?n=r:(n=new e.Element("div",{class:"TNRWarning"}).inject(c),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert "}).inject(n)),a.setHTML(t).inject(n)}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop",["UWA/Core"],(function(e){"use strict";return function(t,n){var r,o,i,a;return r=function(){return!1},o=function(e,n){var r;return r={protocol:"3DXContent",version:"1.1",source:t.getConfig().appId,widgetId:widget.id,data:{draggedRowPID:n.nodeModel.getReferencePID()}},e.dataTransfer.setData("Text",JSON.stringify(r)),e.dataTransfer.effectAllowed="move",!1},i=function(e){return e.preventDefault(),!0},a=function(r,o){var i,a,s,l,c=!1;return e.is(r.dataTransfer)&&e.is(r.dataTransfer.getData)&&(l=r.dataTransfer.getData("Text"),e.is(l)&&(l=JSON.parse(l),e.is(l.source)&&e.is(l.widgetId)&&l.source===t.getConfig().appId&&l.widgetId===widget.id&&(c=!0))),c&&e.is(o.droppedNodes)&&e.is(o.nodeModel)?(i=o.droppedNodes[0],a=o.nodeModel,i.getReferencePID()===a.getReferencePID()&&(c=!1),"top"===o.dropPosition?s=o.rowID:"bottom"===o.dropPosition&&(s=o.rowID+1),e.is(s)&&i._getRowID()!==s||(c=!1)):c=!1,c&&n.notify("moveDataCollectRow",[i.options.dataCollectPID,i.getReferencePID(),s.toString()]),!1},{init:function(e){e||{}},getDDBehavior:function(){return{onDragStartRowHeader:r,onDragRowHeader:r,onDragOverRowHeader:r,onDragEnterRowHeader:r,onDragLeaveRowHeader:r,onDragEndRowHeader:r,onDropRowHeader:r,onDragStartCell:o,onDragCell:r,onDragOverCell:i,onDragEnterCell:r,onDragLeaveCell:r,onDragEndCell:r,onDropCell:a,onDragStartBlank:r,onDragBlank:r,onDragOverBlank:r,onDragEnterBlank:r,onDragLeaveBlank:r,onDragEndBlank:r,onDropBlank:r}}}}})),define("DS/DELPPWViewBehaviors_FD02/Tagger/FilterComponentServices",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return t.extend({init:function(e){},parse:function(e){var t,n,r,o,i={};for(t in e)if(e.hasOwnProperty(t))for(r in n=e[t])n.hasOwnProperty(r)&&(o=n[r],i[r]||(i[r]={}),"date"===o.type&&(o.value=o.value.split("-").join("/").substr(0,10)),i[r][o.value]||(i[r][o.value]={type:o.type,dispValue:o.dispValue||o.value,subjects:[]}),i[r][o.value].subjects.push(t));return{ds6wTagGrouped:i,ds6wTagSummary:[]}},getFilteredSubjects:function(e,t){var n,r,o,i=[],a=[];for(r in e)if(e.hasOwnProperty(r))for(n=e[r],o=0;o<n.length;o++)t&&t[r]&&t[r][n[o].object]&&(Array.isArray(i)&&0===i.length?t[r][n[o].object].subjects.forEach((function(e){i.push(e)})):(a=[],t[r][n[o].object].subjects.forEach((function(e){a.push(e)})),0!==(a=i.filter((function(e){return-1!==a.indexOf(e)}))).length&&(i=a)));return i},findColoredPaths:function(t,n){var r,o=[],i={};if("date"===n.type)for(var a in i=t[n.predicate])i.hasOwnProperty(a)&&-1!==a.indexOf(n.object)&&e.merge(o,i[a]);else r=t[n.predicate],UWA.is(r)&&(r[n.object]?o=r[n.object].subjects:Object.values(r).length>0&&Object.values(r).forEach((e=>{e.dispValue[e.dispValue.length-1]===n.dispValue&&(o=e.subjects)})));return o},getTagsSummary:function(e){var t,n,r=[];for(t in e)if(e.hasOwnProperty(t))for(n in e[t])e[t].hasOwnProperty(n)&&r.push({sixw:t,object:n,value:n,count:e[t][n].subjects.length,type:e[t][n].type,dispValue:e[t][n].dispValue});return r}})})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Documents/DocumentsUtil",["UWA/Core"],(function(e){"use strict";return function(t,n,r){var o,i;return o=function(t,n,o){var i,a=r.getAttributesConfiguredOnDocumentColumn(o),s=t.get("dataelements"),l="";if(e.is(a))for(i=0;i<a.length;i++)e.is(s[a[i]])&&""!==s[a[i]]&&(l={title:s[a[i]],type:n});else l=s.title;return l},{fillNodeOptions:function(e,t){var r,o,a=i(e.referencePID,t);for(r in a)a.hasOwnProperty(r)&&(e.grid[r]=a[r]);if("IndexRelationsOnDemand"===widget.getValue("navigateOnIndex")&&n.needToQueryForConnections(e.referencePID))for(o in e.grid)Array.isArray(e.grid[o])&&0===e.grid[o].length&&e.grid[o].push({Value:"??",Icon:null});return e},getDocumentNodeOptions:i=function(t,n){var i,a,s,l,c={},u=r.getConnectedDocumentPIDs(t);if(Array.isArray(n)||(n=[n]),e.is(u)&&n.length>0)for(a=0;a<n.length;a++)if("document"===(s=n[a]).split(".")[1])for(c[s]=[],i=0;i<u.length;i++){const[e,,t]=u[i].split("|");l=r.getDocument(t),c[s].push(o(l,e,s))}return c}}}})),define("DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/TreeDocument",["UWA/Core","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],(function(e,t,n){"use strict";return t.extend({name:"TreeDocument",getTreeNodeModel:function(t,n){var r=null;if(n=n||{},!t)throw new Error("id is not defined");return r=this.searchTree(t),e.is(n.returnFirstOne)&&n.returnFirstOne&&(r=0<r.length?r[0]:null),r},getMatchingNodeModels:function(t){var n=[];return e.is(t,"function")&&(n=this.search({match:function(n){var r,o=n.nodeModel,i=!1;return r=t(o),e.is(r,"boolean")&&(i=r),i},useTransaction:!1})),n},getHighlightedNodes:function(){return this.search({match:function(e){return e.nodeModel.isHighlighted()},useTransaction:!1})},searchTree:function(t,n,r,o){var i;return t=Array.isArray(t)?t:[t],this.search({match:function(a){if(!e.is(a.nodeModel.getReferencePID))return!1;if(o&&!a.nodeModel.isRoot(!0))return!1;if(n&&"PID"!==n){if(n&&(i=r?".instance":".reference",t.indexOf(a.nodeModel.options.grid[n+i])>-1))return!0}else{if(t.indexOf(a.nodeModel.getInstancePID())>-1)return!0;if(t.indexOf(a.nodeModel.getReferencePID())>-1)return!0;if(t.indexOf(a.nodeModel.getLinkPID())>-1)return!0}},useTransaction:!1})},getRoots:function(t){var r=!!e.is(t,"boolean")&&t,o=this._parent();return r&&(o=o.reduce((function(e,t){var r;return t.getNodeSource()===n.NODE_SOURCE.GROUPING?(r=t.getChildren(!0),Array.isArray(r)&&(e=e.concat(r))):e.push(t),e}),[])),o},getAllDescendants:function(t){var r;return t=!!e.is(t)&&t,r=this._parent(),t&&e.is(r,"array")&&(r=r.filter((function(e){return e.getNodeSource()===n.NODE_SOURCE.MODEL}))),r}})})),define("DS/DELPPWViewBehaviors_FD02/LoadObjectBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["RootsPlugin","DatabasePlugin"],creator:function(t,n,r,o){var i;return{listenTo:function(){return{LoadRecentContent:this.loadObjectsFromRecent,LoadRelationsinViews:this.onLoadRelationsinViews}},onStart:function(e){i=e||{}},onStop:function(){},loadObjectsFromRecent:function(t){var o={action:[],parameters:[],promises:[],dragNDropInfo:{}},i=[],a=[],s=[],l={},c=n.getBehavior("TreeListViewBehavior"),u=n.getBehavior("WUXNodeModelBehavior"),d=function(){o.promises.forEach((function(t){var o=function(t){e.is(t.modelsNotRetrieved,"array")&&t.modelsNotRetrieved.forEach((function(e){r.removeRoot(n.getId(),e)}))};t.then(o,o)}))};a=e.is(t)&&e.is(t.store)?r.getStoreRoots(t.store,n.getId()):r.getRoots(n.getId()),(s=u.getRoots()).length>0&&Array.isArray(a)?a[0].forEach((function(e){-1===s.indexOf(e)&&i.push(e)})):i=Array.isArray(a)?a[0]:[],e.is(c)&&e.is(u)&&Array.isArray(i)&&i.length>0&&(o.action[0]="addRoot",o.parameters[0]={PIDsToAddRoot:i},o.dragNDropInfo.info={loadObjectsInOwnView:!0},n.notify("startProgress",l),u.prepareUpdate(),c.processDropEffect(o).then((function(){u.pushUpdate(),n.notify("stopProgress",l),n.notify("onRecentContentLoaded"),d()})).catch((function(){u.pushUpdate(),n.notify("stopProgress",l),n.debug("loadObjectsFromRecent failed"),d()})))},onLoadRelationsinViews:function(t){var r,a,s,l,c=[],u=!!e.is(t)&&t.selectConnectedObjects,d=n.getBehavior("SelectionBehavior"),g=n.getBehavior("WUXNodeModelBehavior"),f=[],p=[],h={expandLevel:0,forceDBMode:!0,silentMode:!0},m=!!e.is(i.isLoadObjectsinViews)&&i.isLoadObjectsinViews;0===(l=g.getSelectedNodes()).length&&m&&(s=(l=d.getSelections()).every((function(e){return 0===e.length})),l=!0===s?g.getAllDescendants():null),e.is(l)&&(l.forEach((function(t){e.is(t.getID())&&c.push(t.getID()),e.is(t.getInstancePID())&&c.push(t.getInstancePID())})),r=function(t){var r=t.connections,i=[],a=[],s=[],l=[],d=function(){f.length>0&&(f.forEach((e=>{var t=o.transformToRIROccurrencePath(e);t.length>1?p.push(t):l.push(t[0])})),l.forEach((e=>{p.some((t=>t.includes(e)))||p.push([e])})),n.notify("addOccurrece",[p]),u&&s.length>0&&n.notify("selectNodes",[s]))};e.is(r,"array")&&r.length>0&&(r.forEach((function(t){var n=e.is(t.get("from"))?t.get("from"):[],r=e.is(t.get("to"))?t.get("to"):[],o=function(e){e=Array.isArray(e)?e:[e],c.some((function(t){return e.includes(t)}))||(f.push(e),s.push(e[e.length-1]),e.forEach((function(e){-1===i.indexOf(e)&&i.push(e)})))};o(n),o(r)})),i.forEach((function(e){o.isReference(e)||o.isInstance(e)||a.push(e)})),a.length>0?o.getDescendantsFromServer(a,(function(){var t,n,r=[];i.forEach((function(i){t=o.getInstance(i),e.is(t)&&(n=function(e){-1!==r.indexOf(e)||o.isReference(e)||r.push(e)},n(t.get("isInstanceOf")),n(t.get("isAggregatedBy")))})),r.length>0?o.fetchRefList(r,e.merge({onComplete:function(){d()}},h)):d()}),h):d())},a=function(){n.debug("Fetching getDescendantsFromServer for Load Relations in Views failed.")},c.length>0&&o.getDescendantsFromServer(c,r,e.merge(h,{onFailure:a,fetchInverseRelations:!0})))}}}}})),define("DS/DELPPWViewBehaviors_FD02/CfgColumnsBehavior/CfgCellManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";const n="string",r="configLoading";return t.singleton({hasCellValue:()=>!0,getCellValue(t){let n=null;if(e.owns(t,"nodeModel")){const r=t.nodeModel,o=t.dataIndex,i=r.options.grid[o];n=e.is(i,"string")?i.trim():i}return e.is(n)?n:""},getCellTypeRepresentation(t){let o=r;if(e.owns(t,"nodeModel")){const a=t.nodeModel;if(e.is(a))if(i=t.cellModel,e.is(i,"string")&&0===i.length){o=!!e.is(a.options.areCfgColumnsFilled,"boolean")&&a.options.areCfgColumnsFilled?n:r}else o=n}var i;return o}})})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/MfgItemCreateReportUI",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i,a){var s,l,c="full_report",u="erroronly_report",d=a.getComponent("TreeNodeModel"),g=a.getComponent("TreeDocument"),f=a.getComponent("DataGridView"),p=r.getComponent("WUXFrameWindowsManager"),h=[{text:o.getNLSValue("MfgItemCreateReportUI.Column.ProductName"),description:o.getNLSValue("MfgItemCreateReportUI.Column.ProductName"),dataIndex:"tree",width:"40%"},{text:o.getNLSValue("MfgItemCreateReportUI.Column.Status"),description:o.getNLSValue("MfgItemCreateReportUI.Column.Status"),dataIndex:"Status",width:"10%"},{description:o.getNLSValue("MfgItemCreateReportUI.Column.isMfgRefernceCreatedOrReused"),dataIndex:"isMfgRefernceCreatedOrReused",icon:o.getIconURLFromKey("InsertCreateAssembly"),width:"10%"},{description:o.getNLSValue("MfgItemCreateReportUI.Column.isScopeLinkCreated"),dataIndex:"isScopeLinkCreated",typeRepresentation:"boolean",icon:o.getIconURLFromKey("ProductImplementLink"),width:"5%"},{description:o.getNLSValue("MfgItemCreateReportUI.Column.isInstanceCreated"),dataIndex:"isInstanceCreated",typeRepresentation:"boolean",icon:o.getIconURLFromKey("CreateInstance"),width:"5%"},{description:o.getNLSValue("MfgItemCreateReportUI.Column.isImplementLinkCreated"),dataIndex:"isImplementLinkCreated",typeRepresentation:"boolean",icon:o.getIconURLFromKey("ProductImplementLinkOcc"),width:"5%"},{text:o.getNLSValue("MfgItemCreateReportUI.Column.ErrorMessages"),description:o.getNLSValue("MfgItemCreateReportUI.Column.ErrorMessages"),dataIndex:"ErrorMessages",width:"30%"}],m=function(t){var n,r,i={longHelp:""},a=this.getColumnOrGroup(t.columnID),s=a.dataIndex,l=t.nodeModel;if(-1===t.rowID)return e.is(a.description)&&(i.longHelp=a.description),i;if(r="tree"===s?l.getLabel():l.getAttributeValue(s),e.is(r))switch(s){case"tree":case"Status":case"isMfgRefernceCreatedOrReused":case"ErrorMessages":i.longHelp=r;break;case"isScopeLinkCreated":case"isInstanceCreated":case"isImplementLinkCreated":n="MfgItemCreateReportUI."+s+(r?".Created":".NotCreated"),i.longHelp=o.getNLSValue(n)}return i};return s=function(t){var i,a,s=p.getFrameWindow(n.getAppContext()).getImmersiveFrame(),l=o.getIconURLFromKey("CreateMfgItemStructure"),c=r.createElement("div",{class:"tree-list-container"});return(i=r.create("Panel",{title:e.is(t.title)?t.title:o.getNLSValue("MfgItemCreateReportUI.Dialog.Title"),icon:e.is(l)?l:"",identifier:"createMfgItemsReportPanel",immersiveFrame:s,content:c,width:500,height:250,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){i.hide()},a=new g,new f({treeDocument:a,columns:h,getCellTooltip:m}).getContent().inject(c),{panel:i,treeDocument:a}},l=function(t,n){var r=this;r.treeDocument.prepareUpdate(),t.forEach((function(t){var n,a,s,l,g,f,p;(r.mode===c||r.mode===u&&"Success"!==t.Status)&&(g=(l=t.ProductOcc.split(","))[l.length-1],f=i.getInstance(g),a=(p=i.getReferenceModel(g)).get("V_Name")+"("+f.get("PLM_ExternalID")+")",s=p.get("V_IsManufacturable"),e.is(t.isRefernceCreated)&&(t.isRefernceCreated?t.isMfgRefernceCreatedOrReused=o.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Created"):t.isMfgRefernceCreatedOrReused=o.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Reused")),e.is(t.Status)&&("Phanthom"===t.Status&&"FALSE"===s&&(t.Status="NON-BOM"),t.Status=o.getNLSValue("MfgItemCreateReportUI.Status."+t.Status)),n=new d({label:a,grid:t}),r.treeDocument.addRoot(n))})),r.treeDocument.pushUpdate(),n()},{displayReport:function(t){var n;t=t||{},e.is(t.report,"array")&&(n=s(t),i.getExecuteByBlockPromise({callback:l,globalArray:t.report,context:{treeDocument:n.treeDocument,mode:e.is(t.mode)?t.mode:c}}).then((function(){n.treeDocument.getRoots().length>0&&n.panel.show()})))}}}})),define("DS/DELPPWViewBehaviors_FD02/CfgColumnsBehavior/ConfigIdsContainer",[],(function(){"use strict";const e=function(e,t){let n=new Set(e);for(const e of t)n.add(e);return n};class t{constructor(e,t,n){this.pidSet=e,this.relidSet=t,this.pairs=n}static empty(){return new t(new Set,new Set,{})}addPID(e){return this.pidSet.add(e),this}addRelID(e){return this.relidSet.add(e),this}addPair([e,t]){return this.pairs[e]=t,this}combine(n){const r=e(this.pidSet,n.pidSet),o=e(this.relidSet,n.relidSet),i={...this.pairs,...n.pairs};return new t(r,o,i)}getIdsObjAsPerExternalSpec(){return{pids:Array.from(this.pidSet),relids:Array.from(this.relidSet),pairs:this.pairs}}}return t})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/MessageDialog",["UWA/Core","UWA/Controls/Abstract"],(function(e,t){"use strict";return function(n,r){var o,i=t.extend({defaultOptions:{className:"Message-objectslist",showHeaderMessage:!1},objectsTableBody:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableBody.inject(t)},setData:function(t){var n,o=this,i=[],a=[];o.empty(),o.options.showHeaderMessage&&null!==o.objectsTableBody&&(i.push({tag:"th",text:t.headerMessage}),n=e.createElement("tr",{html:i}),o.objectsTableHead.appendChild(n)),null!==o.objectsTableBody&&t.messages.forEach((function(i){a=[],r.log(i,t.token),a.push({tag:"td",text:e.is(i)?i:""}),n=e.createElement("tr",{html:a}),o.objectsTableBody.appendChild(n)}))},empty:function(){if(e.is(this.objectsTableBody))for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return o=function(t,r,o){var i=e.createElement("div",{class:"Message-dialog-content-container"});e.is(r,"string")&&(r=e.createElement("span",{class:"message-dialog-message",text:r})).inject(i),e.is(o)&&o.inject(i),n.create("Dialog",{title:t,domId:"message-dialog-container",identifier:"message-dialog-container",content:i,minHeight:200,minWidth:400,modalFlag:!0,resizableFlag:!0}).close=function(){this.destroy(),null}},{show:function(t,n){var r,a;r=e.createElement("div",{class:"Message-objectList"}),(a=new i).setData(n),a.getContent().inject(r),o(t,null,r)},showWithMessage:function(t,n,r){let a=e.createElement("div",{class:"Message-objectList"}),s=new i;s.setData(r),s.getContent().inject(a),o(t,n,a)}}}})),define("DS/DELPPWViewBehaviors_FD02/ExportToCSVBehaviour",["UWA/Core"],(function(e){"use strict";return{plugins:["WebServicePlugin","UXComponentsPlugin","ResourcePlugin"],creator:function(t,n,r,o,i){var a,s,l,c,u,d,g,f=o.getComponent("Toggle"),p=o.getComponent("Button"),h=function(){return window.URL||window.webkitURL||window},m=function(e,t,n){var r,o,i,a,s,l;a=function(e,t){var n,r,o;if("string"==typeof e){for(n=new ArrayBuffer(e.length),r=new Uint8Array(n),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return new Blob([n],{type:t})}return e instanceof Blob?e:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?new Blob([e],{type:t}):null}(e,n),"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,t):(r=window.document.createElementNS("http://www.w3.org/1999/xhtml","a"),o=h().createObjectURL(a),r.href=o,r.download=t,i=new MouseEvent("click"),r.dispatchEvent(i),s=o,l=function(){"string"==typeof s?h().revokeObjectURL(s):s&&s.remove()},window.chrome?l():setTimeout(l,10))},v=function(e){var r,o;switch(t.getService("ConfigService").getPreference("csvSeparator")){case"Semicolon":r=";";break;case"Pipe":r="|";break;case"Tab":r="\t";break;default:r=","}o=e?l.getConfiguredAttributesAsCSV(c,r):l.getVisibleTableContentAsCSV(r),m(o,a+"_"+(new Date).toString().split(" ").splice(1,4).join(" ")+".csv","text/csv"),n.info(i.getNLSValue("ExportCSVCmd.SuccessMsg"))},I=function(){var t;t=function(){var t,r;!0===u?(r=new f({label:i.getNLSValue("ExportCSVCmd.ExportAllQuestion"),checkFlag:d}),e.is(g)?(t=g.create("Dialog",{domId:"ExportCSV-Dialog",modalFlag:!0,visibleFlag:!1,snappableFlag:!1,title:i.getNLSValue("ExportCSVCmd.Header"),content:r,buttons:{Ok:new p({className:"ok primary",label:i.getNLSValue("ExportCSVCmd.OK"),emphasize:"primary",onClick:function(){t.destroy(),v(r.checkFlag)}}),Cancel:new p({className:"cancel",label:i.getNLSValue("ExportCSVCmd.CANCEL"),onClick:function(){t.destroy()}})}})).show():n.debug("uxFactoryBehavior is not available.")):v(!1)},e.is(s)?r.getXMLValues(s,(function(e){c=e.convert("Config.Preferences.ExportCSV.Type","name"),u=e.Config.Preferences.ExportCSV.showOptionPanel,d=e.Config.Preferences.ExportCSV.defaultValue,t()}),(function(e){n.warn(i.getNLSValue("ExportCSVCmd.ConfigXMLFetchFailed")),n.debug("Cannot export as ExportCSVPreferences XML fetch failed ,"+e)})):n.debug("Cannot export as _exportCSVPreferencesXML path is not provided")};return{listenTo:function(){return{ExportCSVCmd:I}},onStart:function(t){s=(t=t||{}).exportCSVPreferencesXML,a=t.exportCSVFileName,l=n.getBehavior("TreeListViewBehavior"),g=n.getBehavior("UXFactoryBehavior"),e.is(l)||n.debug("ExportToCSVBehaviour initialization failed as TreeListViewBehavior is not available")},onStop:function(){s=null,l=null}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeUtil",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o){var i,a,s,l=["V_EstimatedTime","V_MeasuredTime"],c="V_TimeMode",u="V_UseGanttTimeSolver",d={EstimatedTime:l[0],MeasuredTime:l[1]};return a=function(e){return n.doesAttributeExist(e,u)&&"TRUE"===e.get(u)},s=function(e){var t,r,i;return r=o.getAttributeInfo(c),t=n.getAuthorizedValueIndex(r,null,e.get(c)),i=n.getAuthorizedValueDB(r,t),d[i]},i=function(t){var n,o=void 0;return a(t)?r.needToQueryForChildren(t)?o=0:(o=0,r.getAllChildrenFromCollection(t.get("PID")).instancesPID.forEach((function(t){var n,i,a=r.getInstance(t);i=r.getReferenceIdFromInstance(a),i=r.getReference(i),e.is(i)&&(n=s(i),o+=e.is(n)&&i.get(n)?Number(i.get(n)):0)}))):(n=s(t),o=e.is(n)?t.get(n):void 0),o},{fillNodeOptions:function(t,n){var o,a=t.referencePID;e.is(a)&&(o=r.getReference(a),e.is(o)&&"OPERATION"===o.get("PPRTYPE")&&n.forEach((function(e){e.includes(".operationTime")&&(t.grid[e]=i(o))})))},fillUpdatedNodeOptions:function(t,n,r,o){var a;(o===c||l.indexOf(o)>-1)&&(a=n.find((function(e){return e.includes(".operationTime")})),e.is(a)&&(t[a]=i(r)))}}}})),define("DS/DELPPWViewBehaviors_FD02/DropZoneViewBehavior/DropZoneViewBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin"],creator:function(t,n,r,o){var i=null,a=null,s="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",l="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-plus",c={DROPHERE:1,PLUS:2};return{onStart:function(){var e,t,s;s=o.getComponent("Element"),a=new s("div",{class:"drop-zone-container"}),(i=new s("div",{class:"dropLayer"}))&&(e=new s("div",{class:"mfndnd_invite_container"}).inject(i))?(t=new s("div",{class:"mfndnd_invite_display",draggable:!1}).inject(e),new s("i",{class:"mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",draggable:"false"}).inject(t),new s("h5",{class:"font-3dsregular",text:r.getNLSValue("DragDrop.DropHere.Title")}).inject(t),i.inject(a)):n.debug("Could not create droplayer")},onStop:function(){e.is(a)&&(a.destroy(),a=void 0)},getContent:function(){if(a)return a},hide:function(){i?i.hide():n.debug("No container")},show:function(){i?i.show():n.debug("No container")},isVisible:function(){var e=!1;return i&&(e="none"!==i.getStyle("display")),e},setIcon:function(t){var o,i,a,u;if(u=function(e,t,n){i.removeClassName(e),i.addClassName(t),a.setHTML(r.getNLSValue(n))},o=this.getContent(),e.is(o)&&(i=o.getElement(".mfndnd_invite_img"),a=o.getElement(".font-3dsregular"),e.is(i)&&e.is(a)))switch(t){case c.DROPHERE:u(l,s,"DragDrop.DropHere.Title");break;case c.PLUS:u(s,l,"DragDrop.AddObjectInContext.Title");break;default:n.debug("wrong option")}this.show()},iconEnum:c}}}})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/FormEventHelper",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i,a){var s,l=["<",">","<=",">=","===","==","!=","!==","AND","OR","&&","||","IN","MATCH"],c=function(e){return l.indexOf(e)>-1},u=function(e){return e.length>=2&&"["===e[0]&&e[e.length-2]},d=function(t){var n=!1;return e.is(s)&&void 0!==s[t]||"EMPTY_STRING"===t||"true"===String(t).toLowerCase()||"false"===String(t).toLowerCase()||"null"===String(t).toLowerCase()||"undefined"===String(t).toLowerCase()?n=!0:isNaN(Number(t))?(u(t)||t>="a"&&t<="z"||t>="A"&&t<="Z")&&(n=!0):n=!0,n},g=function(e){var t=-1;return"!"===e?t=4:"AND"===e||"&&"===e?t=3:"OR"===e||"||"===e?t=2:l.indexOf(e)>-1&&(t=1),t},f=function t(n){var r=n;return e.is(s)&&void 0!==s[n]?r=t(s[n]):"EMPTY_STRING"===n||""===n?r="":"true"===String(n).toLowerCase()?r=!0:"false"===String(n).toLowerCase()?r=!1:"null"===String(n).toLowerCase()?r=null:"undefined"===String(n).toLowerCase()?r=void 0:isNaN(Number(n))?u(n)&&(r=n.substring(1,n.length-1).split(",").map((function(e){return t(e)}))):r=Number(n),r},p=function(e){var t,n,r,o,i=[];return!!Array.isArray(e)&&(e.forEach((function(e){c(e)?(t=i[i.length-1],i.pop(),n=i[i.length-1],i.pop(),r=function(e,t,n){var r=!1;switch(t){case"<":r=e<n;break;case"<=":r=e<=n;break;case">":r=e>n;break;case">=":r=e>=n;break;case"==":r=e==n;break;case"===":r=e===n;break;case"!=":r=e!=n;break;case"!==":r=e!==n;break;case"AND":case"&&":r=e&&n;break;case"OR":case"||":r=e||n;break;case"IN":r=n.indexOf(e)>-1;break;case"MATCH":r=new RegExp(n).test(e)}return r?"TRUE":"FALSE"}(n,e,t),r=f(r),i.push(r)):d(e)&&(o=f(e),i.push(o))})),1===i.length&&i.pop())},h=function(e){var t=function(e){var t=e.split(" "),n=[],r=[];for(t.forEach((function(e){if(c(e)){for(;0!==n.length&&g(e)<=g(n[n.length-1]);)r.push(n[n.length-1]),n.pop();n.push(e)}else if(d(e))r.push(e);else if("("===e)n.push(e);else if(")"===e){for(;"("!==n[n.length-1];)r.push(n[n.length-1]),n.pop();n.pop()}}));0!==n.length;)r.push(n[n.length-1]),n.pop();return r}(e);return p(t)};return{setFieldsValue:function(e){s=e},isConditionMatch:function(e){return h(e)}}}})),define("DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/AbstractGroupingClass",[],(function(){"use strict";return function(){return{group:function(){},ungroup:function(){}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/DataCollectRowColumnManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";var n=["V_MinValue_Inclusive","V_MinControlValue_Inclusive","V_MaxValue_Inclusive","V_MaxControlValue_Inclusive"];return t.singleton({name:"DCPColumnManager",init:function(e){this._parent(e)},getCellTypeRepresentation:function(t){var n,r;if(t.isHeader)return"string";switch(e.is(t.nodeModel)&&(r=t.nodeModel.options.grid),t.dataIndex){case"V_DCRichText":case"V_DCUnit":case"V_DCTimeStampFormat":case"V_DCFormula":default:n="string";break;case"V_MinValue":case"V_MinControlValue":case"V_MaxValue":case"V_MaxControlValue":n="number";break;case"V_Value":n=e.is(r)&&e.is(r.V_DCUnit)?"number":"string";break;case"V_MinValue_Inclusive":case"V_MinControlValue_Inclusive":case"V_MaxValue_Inclusive":case"V_MaxControlValue_Inclusive":n="boolean";break;case"V_DCType":case"V_DCMagnitude":case"V_DCRequirementLink":case"V_DCResourceLink":n="url"}return n},getCellClassName:function(t){var n="";if(e.is(t.nodeModel)&&!t.isHeader)switch(t.dataIndex){case"V_DCType":case"V_DCMagnitude":case"V_DCRequirementLink":case"V_DCResourceLink":n="url";break;default:n=""}return n},getCellValue:function(t){var n,r,o,i=t.nodeModel.options.grid;switch(o=function(t){var n,r,o,i,a,s=e.is(t)?t:"";if(0===s.indexOf("<?xml")&&0<s.indexOf("<html")&&(i=s.indexOf("<body>"),a=s.indexOf("</body>"),i>-1&&a>-1)){for(s=(s=s.slice(i+6,a)).replaceAll("<br/>"," ");-1!==s.indexOf("<");)n=s.indexOf("<"),-1!==(r=s.indexOf(">",n)+1)&&(o=s.substring(n,r),s=s.replace(o,""));s=(s=(s=(s=s.replaceAll("&lt;","<")).replaceAll("&gt;",">")).replaceAll("&amp;","&")).replaceAll("&nbsp;"," ")}return s},r=function(e,t){return{label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}}},t.dataIndex){case"V_DCRichText":return o(i[t.dataIndex]);case"V_DCType":case"V_DCMagnitude":case"V_DCRequirementLink":case"V_DCResourceLink":return n=i[t.dataIndex].iconPath,r(i[t.dataIndex].label,n);default:return i[t.dataIndex]}},getCellSemantics:function(e){var t,n=e.nodeModel.options.grid;switch(e.dataIndex){case"V_MinValue":case"V_MinControlValue":case"V_MaxValue":case"V_MaxControlValue":case"V_Value":t={units:n.V_DCUnit}}return t},hasCellValue:function(t){var r=t.nodeModel.options.grid;return n.indexOf(t.dataIndex)>-1?e.is(r[t.dataIndex])&&"NotSet"!==r[t.dataIndex]:n.indexOf(t.dataIndex+"_Inclusive")>-1?e.is(r[t.dataIndex+"_Inclusive"])&&"NotSet"!==r[t.dataIndex+"_Inclusive"]:!!e.is(r[t.dataIndex])}})})),define("DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/ManageCommands",["DS/CoreEvents/Events"],(function(e){"use strict";return{showProcurementView:function(){e.publish({event:"ManageCommands/ProcurementView"})},showStructureView:function(){e.publish({event:"ManageCommands/StructuralGrouping"})}}})),define("DS/DELPPWViewBehaviors_FD02/ViewBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["TreeViewPlugin"],creator:function(t,n,r){var o;return o=function(){var e=n.getElement();r.getActiveView()!==n.getId()?e.removeClassName("focus"):e.addClassName("focus")},{listenTo:function(){return{activeViewChange:o}},onStart:function(t){var r=this,o=n.getElement();e.is(o)&&(o.onclick=function(){r.setActiveView(n.getId())})},onStop:function(){},registerViewforWidgetLayout:function(e){r.registerViewforWidgetLayout(e)},unregisterViewforWidgetLayout:function(e,t){r.unregisterViewforWidgetLayout(e,t)},setCurrentView:function(e){r.setCurrentView(n.getId(),e)},setActiveView:function(){r.setActiveView(n.getId()),n.notify("activeViewChange")},getActiveView:function(){return r.getActiveView()},setFocus:function(){var t=n.getElement();e.is(t)&&(this.getActiveView()!==n.getId()?t.removeClassName("focus"):t.addClassName("focus"))}}}}})),define("DS/DELPPWViewBehaviors_FD02/RoutingsViewer3DBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["Viewer3DPlugin","DatabasePlugin","RootsPlugin"],creator:function(t,n,r,o,i){var a,s,l,c,u,d,g,f,p,h,m,v,I,D,P="ProductImplementLink",y="ProcessImplementLink";return a=function(e){return"PRODUCT"===o.getPPRType(e)},s=function(e){return"PROCESS"===o.getPPRType(e)},l=function(e){return"SYSTEM"===o.getPPRType(e)},c=function(e){var t,n=[];return l(e)?o.getImpacted(e,null,{relationTypes:[y]}).forEach((function(e){var r=e.get("to");(t=o.getImpacted(r,null,{relationTypes:[P]})).length>0&&n.push(t[0].get("to"))})):s(e)&&(t=o.getImpacted(e,null,{relationTypes:[P]})).length>0&&n.push(t[0].get("to")),n},u=function(e){var t=[];return a(e)?o.getImpacted(e,null,{relationTypes:[P]}).forEach((function(e){var n=e.get("from");o.getImpacted(n,null,{relationTypes:[y]}).forEach((function(e){t.push(e.get("from"))}))})):s(e)&&o.getImpacted(e,null,{relationTypes:[y]}).forEach((function(e){t.push(e.get("from"))})),t},d=function(t){var r,o=!1;return e.is(t)&&(r=i.getRoots(n.getId())[0],o=(t=Array.isArray(t)?t:[t]).some((function(e){return r.indexOf(e)>-1}))),o},v=function(e){var t=[];e.forEach((function(e){var n;(n=u(e)).length>0&&d(n)||t.push(e)})),t.length>0&&r.remove3D(t)},p=function(e){var t=[];return(e=Array.isArray(e)?e:[e]).forEach((function(e){var n,r,o;y===e.get("type")?(n=e.get("from"),r=e.get("to"),d(n)&&(t=t.concat(c(r)))):P===e.get("type")&&(r=e.get("from"),o=e.get("to"),n=u(r),d(n)&&t.push(o))})),t},g=function(e){var t,n=[];l(e)?n=c(e):s(e)&&(t=u(e),d(t)&&(n=c(e))),n.length>0&&r.drop3D(n)},f=function(e){var t=[];l(e)&&(t=c(e)),t.length>0&&v(t)},h=function(e){var t;(t=p(e)).length>0&&r.drop3D(t)},m=function(e){var t;(t=p(e)).length>0&&v(t)},I=function(t){var o,i,a,s=[],l=[],c=[];t.changed.isSelected||r.selectIn3D([]),t.selectedNodeIds.length>0&&((o=(i=n.getBehavior("SelectionBehavior")).getSelectionsWithPaths()[0]).length>0?(o.forEach((e=>{e.path.length>0?s.push(e.path):e.id&&c.push(e.id)})),a=n.getBehavior("LinkBehavior"),c.length>0?c.forEach((e=>{l=l.concat(a.getConnectedObjects(e,e,{relationTypes:[y]}))})):s.length>0&&s.forEach((e=>{l=l.concat(a.getConnectedObjects(e[e.length-1],e,{relationTypes:[y,"ProcessImplementLinkOcc"]}))}))):(o=i.getSelectionsWithPaths()[1]).forEach((t=>{t.path.length>0?l.push(t.path):e.is(t.id)&&l.push(t.id)})),D(l))},D=function(e){var t=[],i=n.getBehavior("ProductAbsPathHelperBehavior"),a=[];e.forEach((function(e){var n,r;"string"==typeof e||e instanceof String?(n=e,r={relationTypes:[P]}):(n=e[e.length-1],r={relationTypes:["ProductImplementLinkOcc",P]}),o.getImpacted(n,null,r).forEach((function(n){t.push({from:e,type:n.get("type"),to:n.get("to")})}))})),t.forEach((function(e){var t;Array.isArray(e.from)?(t=i.getImplementedProductAbsPath(e.from,e.to),a.push(t||e.to)):a.push(e.to)})),r.selectIn3D(a)},{listenTo:function(){return{select:I,addRootNode:g,removeRoot:f,addConnection:h,removeConnection:m}},onStart:function(){},apply3DFilter:function(){n.debug("RoutingsViewer3DBehavior::apply3DFilter is not supported at moment")},change3DVisiblity:function(e,t,r){n.debug("RoutingsViewer3DBehavior::change3DVisiblity is not supported at moment"),r.reject("RoutingsViewer3DBehavior::change3DVisiblity is not supported at moment")}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/CoProduct/CoProductColumnManager",["UWA/Core"],(function(e){"use strict";const t=["CreateMaterial","Provide","ProcessContinuousCreateMaterial","ProcessContinuousProvide"],n="DELFmiUseCaseExt.V_UseCase";return function(r,o,i,a,s){var l=r.getBehavior("ModelBehavior"),c=r.getBehavior("WUXNodeModelBehavior");return{getCellTypeRepresentation:function(e){return e.isHeader?"string":"boolean"},hasCellValue:function(r){var s,l=this.getColumnOrGroup(r.columnID),u=!1;return c.isFakeNodeModel(r.nodeModel)||(s=o.getNodeAndColumnInfos(r.nodeModel,l),e.is(s.objectToBeModified)&&(u=!!(o.doesAttributeExist(s.objectToBeModified,n)||o.isAttrApplicableForType(s.objectToBeModified,n)&&function(e){var n,r,o=!1;for(r=i.getReferenceModelFromInstance(e),n=0;n<t.length;n++)if(a.isAKindOf(r,t[n])){o=!0;break}return o}(s.objectToBeModified)))),u},getCellValue:function(t){var r,i,s;if(e.is(t))return i=a.getAttributeInfo(n),s=e.is(i.attributeDef)?i.attributeDef:{},r=t.nodeModel.getAttributeValue(t.dataIndex),"ProducingCoProduct"===o.getAuthorizedValue(i,s,r)},setCellValue:function(t,r){var i,a;e.is(l)&&(i={dataIndex:n+".instance",dicoType:"DELFmiUseCaseExt"},a=o.getNodeAndColumnInfos(t.nodeModel,i),e.is(a)&&(r=r?"ProducingCoProduct":"EngineeringAssembly",l.updateModelAttribute(a.objectToBeModified.id,a,r)))}}}})),define("DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/AbstractTreeNodeModel",["UWA/Core","DS/TreeModel/TreeNodeModel"],(function(e,t){"use strict";var n=function(e){return e.getNodeSource()===t.NODE_SOURCE.GROUPING},r=function(n){n=n||{},this._logger=this.facade,this._referencePID=null,this._instancePID=null,this._type=null,this.options={label:"",badges:{},icons:[],grid:{},thumbnail:null,useAsyncPreExpand:!0},this.setReferencePID(n.referencePID),this.setReferenceType(n.referenceType),this.options=e.extend(this.options,n),n.instancePID&&this.setInstancePID(n.instancePID),n.linkPID&&this.setLinkPID(n.linkPID),t.call(this,this.options)};function o(e){e._getFilterInfo||(e._getFilterInfo=r.prototype._getFilterInfo.bind(e),e._getChildrenFilterInfo=r.prototype._getChildrenFilterInfo.bind(e),e._removeChildrenFilterInfo=r.prototype._removeChildrenFilterInfo.bind(e),e.filterInChild=r.prototype.filterInChild.bind(e),e.filterOutChild=r.prototype.filterOutChild.bind(e))}return(r.prototype=Object.create(t.prototype)).constructor=r,r.prototype.name="AbstractTreeNodeModel",r.prototype.addChild=function(e,r,o){var i,a,s,l,c,u,d=!0;return(i=t.prototype.addChild.call(this,e,r))&&!0!==o&&(d=!0,l=i.getAttributeValue("V_TreeOrder"),(a=i.getPreviousBrother())&&l<a.getAttributeValue("V_TreeOrder")&&(d=!1),(s=i.getNextBrother())&&l>s.getAttributeValue("V_TreeOrder")&&(d=!1),d||(c=i.getParent().getChildren().sort((function(e,t){return n(e)&&n(t)?0:n(e)?-1:n(t)?1:e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")})).map((function(e){return n(e)?"":e.getInstancePID()})),u=c.indexOf(i.getInstancePID()),i=t.prototype.addChild.call(this,i,u))),i},r.prototype.getID=function(){return this.getReferencePID()},r.prototype.setReferencePID=function(t){return e.is(t,"string")?(this._referencePID=t,this.getReferencePID()):null},r.prototype.setInstancePID=function(t){return e.is(t,"string")?(this._instancePID=t,this.getInstancePID()):null},r.prototype.setLinkPID=function(t){return e.is(t,"string")?(this._linkPID=t,this.getLinkPID()):null},r.prototype.setReferenceType=function(t){return e.is(t,"string")?(this._type=t,this.getReferenceType()):null},r.prototype.getReferencePID=function(){return this._referencePID},r.prototype.getInstancePID=function(){return this._instancePID},r.prototype.getLinkPID=function(){return this._linkPID},r.prototype.getReferenceType=function(){return this._type},r.prototype.getRootPID=function(){var t=this.getRoot(!0);return e.is(t)?t.getReferencePID():null},r.prototype.getAbsolutePath=function(){var e,t,r=this.getParents(),o=[];for(e=r.length-1;e>=0;e--)t=r[e],n(t)||o.push(t.getInstancePID());return o=o.concat([this.getInstancePID()]).slice(1)},r.prototype.getRIRpath=function(){var e,t,r,o=this.getParents(),i=[];for(r=o.length-1;r>=0;r--)e=o[r],n(e)||((t=e.getInstancePID())&&i.push(t),i.push(e.getReferencePID()));return i.length>0&&!n(this)?(i.push(this.getInstancePID()),i.push(this.getReferencePID())):n(this)||i.push(this.getReferencePID()),i},r.prototype.getChildrenPID=function(){var e=this.getChildren(!0),t=[];return Array.isArray(e)&&(t=e.map((function(e){return e.getInstancePID()}))),t},r.prototype.getSiblingsPID=function(){var t=this.getParent(),n=[];return e.is(t)&&(e.is(t.getChildrenPID)||(t.getChildrenPID=r.prototype.getChildrenPID.bind(t)),n=t.getChildrenPID()),n},r.prototype.expand=function(e){var n=e||{};return n.previousNodeState={},n.previousNodeState[this.getReferencePID()]=this.getState(),t.prototype.expand.call(this,n)},r.prototype._removeFilterInfo=function(){delete this.options._filterInfo},r.prototype._removeChildrenFilterInfo=function(){delete this.options._childrenFilterInfo},r.prototype.filterInChild=function(t){var r,o,i,a,s,l,c,u,d=this._getChildrenFilterInfo();if(d&&(r=d.childrenBeforeFiltering)&&(o=r.indexOf(t))>=0&&(i=t._getFilterInfo())&&i.parentBeforeFiltering===this){if(a=this.getChildren(!0))for(c=0;c<a.length;c++)if(s=a[c],!n(s)&&r.indexOf(s)>o){l=s;break}delete i.parentBeforeFiltering,e.is(t.options.isRootAttached)?!0===t.options.isRootAttached&&this.insertBefore(t,l):this.insertBefore(t,l),e.is(this.setState,"function")&&this.setState({state:d.expandStateBeforeFiltering}),t._removeFilterInfo(),u=d.filteredOutChildren.indexOf(t),d.filteredOutChildren.splice(u,1),0===d.filteredOutChildren.length&&this._removeChildrenFilterInfo()}},r.prototype.filterIn=function(e){var t,n,r,i=this._getFilterInfo();i&&i.parentBeforeFiltering&&(o(t=i.parentBeforeFiltering),t.filterInChild(this)),e&&(n=(r=this._getChildrenFilterInfo())&&r.childrenBeforeFiltering?r.childrenBeforeFiltering:this.getChildren(!0))&&n.forEach((function(t){t.filterIn(e)}))},r.prototype._getFilterInfo=function(e){return!this.options._filterInfo&&Boolean(e)&&(this.options._filterInfo={}),this.options._filterInfo},r.prototype._getChildrenFilterInfo=function(e){return!this.options._childrenFilterInfo&&Boolean(e)&&(this.options._childrenFilterInfo={}),this.options._childrenFilterInfo},r.prototype.filterOutChild=function(t){var n,r,o=this.getChildren(!0);if(o.indexOf(t)<0)throw"Not a child";(n=this._getChildrenFilterInfo(!0)).childrenBeforeFiltering||(n.childrenBeforeFiltering=o&&o.length>0?o.slice(0):[],r={noExpandState:"noChildren",expandingState:"expanding",partiallyExpandedState:"partiallyExpanded",collapseState:"expanded",expandState:"collapsed"},e.is(this._expandState)&&(n.expandStateBeforeFiltering=r[this._expandState])),t._getFilterInfo(!0).parentBeforeFiltering=this,e.is(this.removeChild,"function")?this.removeChild(t):this.removeRoot(t,!0,!0),e.is(this.setState,"function")&&this.setState({state:n.expandStateBeforeFiltering}),n.filteredOutChildren||(n.filteredOutChildren=[]),n.filteredOutChildren.push(t)},r.prototype.filterOut=function(){var e=this.isRoot(!0)?this.getTreeDocument():this.getParent();null!==e&&(o(e),e.filterOutChild(this))},r.prototype.isRoot=function(r){var o=!1,i=this.getParent();return o=(r=!!e.is(r,"boolean")&&r)&&i&&n(i)&&0===i.getNodeDepth()?1===this.getNodeDepth():t.prototype.isRoot.call(this),o},r.prototype.getRoot=function(r){var o,i,a;if(r=!!e.is(r,"boolean")&&r,o=t.prototype.getRoot.call(this),r&&n(o))if(null===this.getInstancePID())o=this;else for(a=(i=this.getParents()).length-1;a>=0;a--)if(!n(i[a])){o=i[a];break}return o},r.prototype.getChildren=function(o){var i;return o=!!e.is(o,"boolean")&&o,i=t.prototype.getChildren.call(this),o&&Array.isArray(i)&&(i=i.reduce((function(e,t){var i;return n(t)?(i=r.prototype.getChildren.call(t,o),Array.isArray(i)&&(e=e.concat(i))):e.push(t),e}),[])),i},r.prototype.getVisibleChildren=function(o,i){var a;return i=!!e.is(i,"boolean")&&i,a=t.prototype.getVisibleChildren.call(this,o),i&&Array.isArray(a)&&(a=a.reduce((function(e,t){var a;return n(t)?(a=r.prototype.getVisibleChildren.call(t,o,i),Array.isArray(a)&&(e=e.concat(a))):e.push(t),e}),[])),a},r.prototype.getAllDescendants=function(r,o){var i=null,a=!!e.is(o,"boolean")&&o;return e.is(r,"array")&&(r=null),i=t.prototype.getAllDescendants.call(this,r),a&&e.is(i,"array")&&i.length>0&&(i=i.filter((function(e){return!n(e)}))),i},r.NODE_SOURCE=t.NODE_SOURCE,r})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o){const i=1,a=2,s=3,l=4;var c,u,d="V_OperationTime",g=t.getBehavior("WUXNodeModelBehavior");return c=function(t){var n,o,c=a;return t.rowID>-1&&!g.isFakeNodeModel(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(d),e.is(n)?c="FetchInProgress"===n?s:i:(o=t.nodeModel.getReferenceType(),"OPERATION"===r.getPPRType(o)&&(c=l))),c},u=function(e){var n;e.rowID>-1&&!g.isFakeNodeModel(e.nodeModel)&&(n=e.nodeModel.getReferencePID(),t.notify("refreshOperationTime",[n]))},{getCellTypeRepresentation:function(e){var t,n="number";return(t=c(e))===s?n="user":t===l&&(n="functionIcon"),n},getCellValue:function(e){var n,r;return(n=c(e))===i?r=e.nodeModel.getAttributeValue(d):n===s?r={icon:{iconName:"refresh",fontIconFamily:WUXManagedFontIcons.Font3DS,className:"refresh-rotation-class"}}:n===l&&(r=o.areModuleColumnsImmutable(t.getId())?null:u.bind(this,e)),r},hasCellValue:function(e){return c(e)!==a},getCellSemantics:function(e){var t,o,a={};return(t=c(e))===i?(o=r.getAttributeInfo("DELLmiOperationReference."+d),a={units:n.getNLSForUnit(o)}):t===s?a={alignment:"center"}:t===l&&(a={icon:{iconName:"refresh",fontIconFamily:WUXManagedFontIcons.Font3DS},alignment:"center"}),a},getCellEditableState:function(){return!1},getCellValueForExport:function(e){return e.rowID<0?e.cellModel:c(e)===i?e.nodeModel.getAttributeValue(d):""}}}})),define("DS/DELPPWViewBehaviors_FD02/BI/MfgProcessBIBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin"],creator:function(t,n,r,o,i,a){var s,l,c=[],u={ItemAssignmentStatus:{Assigned_OneAdd:{colorCode:"#0000FF",label:i.getNLSValue("BI.ItemStatus.Assigned_OneAdd")},Assigned_AllAdd:{colorCode:"#CC79A7",label:i.getNLSValue("BI.ItemStatus.Assigned_AllAdd")},Assigned_AllRemove:{colorCode:"#FFFF00",label:i.getNLSValue("BI.ItemStatus.Assigned_AllRemove")},Assigned_AddNRemove:{colorCode:"#00FF00",label:i.getNLSValue("BI.ItemStatus.Assigned_AddNRemove")},Assignable:{colorCode:"#FFA500",label:i.getNLSValue("BI.ItemStatus.Assignable")},NonAssignable:{colorCode:"#A9A9A9",label:i.getNLSValue("BI.ItemStatus.NonAssignable")},Inconsistent:{colorCode:"#000000",label:i.getNLSValue("BI.ItemStatus.Inconsistent")}},SystemUpdateStatus:{UpToDate:{colorCode:"#008000",label:i.getNLSValue("BI.ProcessStatus.UpToDate")},InDirectlyImpacting:{colorCode:"#FFFF00",label:i.getNLSValue("BI.ProcessStatus.InDirectlyImpacting")},DirectlyImpacting:{colorCode:"#FF0000",label:i.getNLSValue("BI.ProcessStatus.DirectlyImpacting")},Inconsistent:{colorCode:"#000000",label:i.getNLSValue("BI.ProcessStatus.Inconsistent")}}},d=function(t){var r,o,i=(o=n.getBehavior("TreeListViewBehavior").getColumnsByDisplayType("BIEssentials")).length>0?o[0]:null,a={nodeOptions:{}};return e.is(i)&&(r={colorCode:u[l].Inconsistent.colorCode,tooltip:u[l].Inconsistent.label,status:"Inconsistent"},r=e.is(c[t])?c[t]:r,a.nodeOptions[i]={colorCode:r.colorCode,tooltip:r.tooltip,status:r.status}),a},g=function(t){var r,o;e.is(l)&&(r=t[l],o=u[l],e.is(r,"array")&&r.length>0&&(r.forEach((function(e){var t,n,r=e.get("id"),i=e.get("status");t=o[i].colorCode,n=o[i].label,c[r]={rirPath:r,colorCode:t,tooltip:n,status:i}})),function(){var t,r=n.getBehavior("WUXNodeModelBehavior"),o=r.getAllDescendants();r&&Object.keys(c).length>0&&(r.prepareUpdate(),t={callback:function(t,n){t.forEach((function(e){var t=e.getRIRpath(),n=d(t);n.nodeOptions&&e.updateOptions(n.nodeOptions)})),e.is(n,"function")&&n()},globalArray:o,context:this,blockSize:100},a.getExecuteByBlockPromise(t).then((function(){r.pushUpdate()})))}()))},f=function(){var t,r=n.getBehavior("TreeListViewBehavior"),o=n.getBehavior("WUXNodeModelBehavior"),i=r.getColumnsByDisplayType("BIEssentials"),a={};c=[],r&&o&&i&&(t=o.getAllDescendants(),i.forEach((function(n){a[n]={colorCode:"transparent",tooltip:""},e.is(t,"array")&&0<t.length&&o.withTransactionUpdate((function(){t.forEach((function(e){e.updateOptions(a)}))}))})))},p=function(){var e=n.getBehavior("WUXNodeModelBehavior");r.getBICmdState()&&e.getSelectedNodesInfo().length>0&&r.computeBI()};return{listenTo:function(){return{updateBIStatus:g,resetBIModel:f,refreshCmd:p}},onStart:function(t){s=t||{},e.is(s.biStatusType)&&(l=s.biStatusType)},onStop:function(){},getNodeOptions:function(t,n){var o={nodeOptions:{},taggerOptions:{}};return r.getBICmdState()&&e.is(n)&&(o=d(n)),o},getBICmdState:function(){return r.getBICmdState()},resetBIModelCollection:function(){return r.resetBIModelCollection()}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RWU/RWUColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o,i){const a=(s=" ",(...e)=>e.join(s));var s;const l=function(){let e=new Map;return{generateFor:function(t){let n;return n=e.has(t)?e.get(t)+1:1,e.set(t,n),n}}},c={ACTION:"RWU_Action",STATUS:"RWU_Status",REPLACE:"RWU_Replace"},u="success",d="ignored",g=t=>{let n=!1;var r;return e.is(t)&&(n=!0,r=t,e.is(r,"string")&&0===r.length&&(n=!1)),n},f=t=>n=>r=>{let o=!1;if(!r.isHeader){const i=r.nodeModel;if(e.is(i)){const r=i.getAttributeValue("cellInfo");if(e.is(r)){const e=r[t];o=n(e)}}}return o},p=f("candidateEntries")((e=>Array.isArray(e)&&e.length>1)),h=f("suggestionToPerformEntries")((e=>Array.isArray(e)&&e.length>0)),m=t=>{let n=!1;const r=t.options.rwuStatus;return e.is(r)&&(n=r===u||r===d),n};return{getNonModelDataIndexes:function(){return[c.ACTION,c.STATUS,c.REPLACE]},hasRWUCellValue:function(){return!0},getCellTypeRepresentation:function(e){let t;if(e.isHeader)t="string";else switch(e.dataIndex){case c.ACTION:t=h(e)?"enumString":null;break;case c.REPLACE:t="url";break;default:t="string"}return t},getCellClassName:function(t){var n,r="";return e.is(t.nodeModel)&&(n=t.nodeModel.options.rwuStatus,"RWU_Status"===t.dataIndex&&("fail"===n?r="rwu-fail-status":"success"===n?r="rwu-success-status":"ignored"===n&&(r="rwu-ignored-status")),"RWU_Replace"===t.dataIndex?r="url-column":"RWU_Status"!==t.dataIndex&&"success"===n&&(r+=" rwu-succeeded-row")),r},getCellValue:function(a){let s=null;const l=a.nodeModel.options.grid,u=a.dataIndex;if(e.is(a.nodeModel))switch(u){case c.ACTION:e.is(l[u])&&(a.isHeader||e.is(this.isCellInEdition,"function")&&(s=this.isCellInEdition(a.cellID)?l[u].value:l[u].label));break;case c.REPLACE:s=1===l[c.ACTION].value?{label:l[u],func:function(){!function(i,a){var s,l=t.getBehavior("SearchBehavior"),c=o.getModuleSelections(t.getId()),u=t.getBehavior("WUXNodeModelBehavior");const d=i.nodeModel._referencePID;var g=n.getReferenceModel(d),f=n.getValidChildTypes(g);l.showSearchDialoguAndActivate((function(o){c.forEach((function(i){var l=u.getNodeModel(i.id,!0);e.is(l.options.grid)&&l.options.grid.cellInfo.isLeaf&&(e.is(o,"array")&&o.length>0?(s=n.getReferenceModel(o[0]),e.is(s)?(l.options.grid[a]=s.get("V_Name"),l.options.grid[a+"PID"]=s.get("PID")):(l.options.grid[a]=o[0]["ds6w:label"],l.options.grid[a+"PID"]=o[0].id)):t.warn(r.getNLSValue("RWU.ObjectRetrievalFailure")),u.updateNode(l.options.referencePID))}))}),{title:r.getNLSValue("Dialog.ReplaceByExisting.Title"),searchTitle:r.getNLSValue("Search.ReplaceByExisting.Title"),types:f})}(a,u)},getLabel:function(){return this.label},PID:""}:6===l[c.ACTION].value&&a.nodeModel.options.isCreated?{label:l[u],func:function(){!function(e){var n=o.getModuleSelections(t.getId()),a=i.getComponent("WUXFrameWindowsManager"),s=t.getBehavior("WUXNodeModelBehavior"),l=a.getFrameWindow(t.getAppContext()).getImmersiveFrame(),c=i.getComponent("Dialog"),u=i.getComponent("Editor"),d=i.getComponent("Button"),g=i.getComponent("Element"),f=new g("div",{class:"dialogueContent",styles:{width:"100%",height:"100%",verticalAlign:"center"}}),p=new g("div",{class:"EditorElement",align:"right",styles:{width:"40%"}}).inject(f),h=new u({value:"",selectAllOnFocus:!0,visibleFlag:!0,autoCommitFlag:!0,placeholder:r.getNLSValue("FormUI.Placeholder.EnterANumber")}).inject(p),m=new c({domId:"replaceWhereUsed-setQuantity",immersiveFrame:l,modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,height:100,width:140,title:r.getNLSValue("RWU.SetQuantity"),content:f,closeButtonFlag:!0,buttons:{Ok:new d({domId:"replaceWhereUsed-Dialog-Apply",className:"ok primary",label:r.getNLSValue("MIL.PanelApplyButton"),emphasize:"primary",disabled:!1,onClick:function(){var o=h.value;o>0?n.forEach((function(t){var n=s.getNodeModel(t.id,!0);n.options.grid[e]=r.getNLSValue("RWU.Quantity",{quantity:o}),n.options.grid[e+"PID"]=o,s.updateNode(n.options.referencePID)})):t.warn(r.getNLSValue("RWU.QuantityFailure")),m.close()}}),Cancel:new d({domId:"replaceWhereUsed-Dialog-Close",className:"close",label:r.getNLSValue("MIL.PanelCloseButton"),onClick:function(){m.close()}})}});m.show()}(u)},getLabel:function(){return this.label},value:1}:"";break;default:s=l[u]}return s},getCellSemantics:function(t){const n=t=>{const n=(e=>t=>{const n=e.generateFor(t);return a(t,"["+n+"]")})(new l);return t.reduce(((t,r)=>{const o=r.labelItem;if(e.owns(t,o)){t[n(o)]=r.valueItem}else t[o]=r.valueItem;return t}),{})};let r=null;if(e.is(t.nodeModel)){const o=t.nodeModel.options.grid,i=t.dataIndex;if(e.is(o)){const a=o.cellInfo;e.is(a)&&(i===c.REROUTING?p(t)&&(r={possibleValues:n(a.candidateEntries)}):i===c.ACTION&&h(t)&&(r={possibleValues:n(a.suggestionToPerformEntries)}))}}return r},setRWUValue:function(n,r,i){const a=n.dataIndex;var s=o.getModuleSelections(t.getId()),l=t.getBehavior("WUXNodeModelBehavior");a===c.ACTION&&g(i)&&s.forEach((function(t){var n=l.getNodeModel(t.id,!0);let r=n.options.grid.cellInfo;if(e.is(r)&&r.isLeaf){const t=r.suggestionToPerformEntries.find((e=>e.valueItem===i));if(e.is(t)){const e={label:t.labelItem,value:t.valueItem,tooltip:t.tooltipItem,getLabel:function(){return this.label}};n.setAttribute(a,e),n.options.grid[c.ACTION]!==e&&(n.options.grid[c.ACTION]=e),r.action=i}}}))},getCellEditableState:function(t){const n=t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;m(e)&&(n=!1),e.isExpanded()&&e.hasChildren()&&(n=!1),t.nodeModel.options.isLeaf||(n=!1)}return n};let r;switch(t.dataIndex){case c.ACTION:r=n(t);break;case c.REROUTING:r=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;n=!m(e)&&p(t)}return n})(t);break;case c.REPLACE:r=n(t);break;default:r=!1}return r},getRWUGroupingKeyForURLColumn:function(e){var t;if(e.dataIndex===c.REPLACE)t=e.nodeModel.getAttributeValue(e.dataIndex);else t=null;return t}}}})),define("DS/DELPPWViewBehaviors_FD02/CrossHighlightBehavior/MfgProcessCrossHighlightBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin"],creator:function(t,n,r){var o,i,a,s,l,c,u,d,g,f,p,h,m,v,I,D,P,y="MfgProcessCrossHighlightBehavior";return s=function(t){var r=n.getBehavior(t);return e.is(r)||n.debug(y+" : "+t+"behavior is not available "),r},c=function(){o=Object.create(null)},l=function(e,t){o[e.toString()]=t},u=function(e){delete o[e.toString()]},d=function(){return Object.keys(o).reduce((function(e,t){return e.concat(o[t])}),[])},g=function(){var t=s("WUXNodeModelBehavior"),r=i;return r&&e.is(t)&&t.isDocumentEmpty()&&(r=!1,n.debug(y+" : Not computing crossHighlight as document is empty")),r},f=function(t,o){var i,l,c=s("LinkBehavior"),u=[];return e.is(c)&&(i=r.getPPRType(t),l=a[i],Array.isArray(l)?u=c.getConnectedObjects(t,o,{relationTypes:l}):n.debug(y+" : Couldnt _computeConnectedObjs as crossHighLightLinkTypes config is not available for "+i)),u},p=function(t,n){var r,o,i,a,s;if(t.isVisible()){if(i=t,e.is(n))for(r=1;r<n.length&&(a=!1,s=i.getVisibleChildren(!1,!0),e.is(s)&&0!==s.length);r++){for(o=0;o<s.length;o++)if(s[o].getInstancePID()===n[r]){i=s[o],a=!0;break}if(!a)break}}else for(i=t.getParent();!i.isVisible();)i=i.getParent();return i},h=function(t){var n=s("WUXNodeModelBehavior"),o=[],i={},a={};return e.is(n)&&(n.getAllDescendants().forEach((function(t){var n,r,o;n=t.getReferencePID(),t.isRoot()?o=n:(r=t.getInstancePID(),o=t.getAbsolutePath().toString()),e.is(n)&&(e.is(i[n])||(i[n]=[]),i[n].push(o)),e.is(r)&&(e.is(i[r])||(i[r]=[]),i[r].push(o)),e.is(o)&&(a[o]=t)})),t.forEach((function(t){var n,s,l;Array.isArray(t)?(n=t[0],e.is(i[n])&&i[n].forEach((function(e){o.push(p(a[e],t))})),l=r.getInstance(n),e.is(l)&&(s=l.get("isAggregatedBy"),e.is(s)&&e.is(i[s])&&i[s].forEach((function(e){0===a[e].getChildren(!0).length&&o.push(p(a[e]))})))):e.is(i[t])&&i[t].forEach((function(e){o.push(p(a[e]))}))}))),o},m=function(e){var t,n=s("WUXNodeModelBehavior");n&&Array.isArray(e)&&e.length>0&&(t=h(e)).length>0&&n.withTransactionUpdate((function(){t.forEach((function(e){e.highlight()}))}))},v=function(){var e,t=s("WUXNodeModelBehavior");t&&(e=t.getHighlightedNodes(),Array.isArray(e)&&e.length>0&&t.withTransactionUpdate((function(){e.forEach((function(e){e.unhighlight()}))})))},I=function(){c()},D=function(t){var n;g()&&e.is(t)&&((t=Array.isArray(t)?t:[t]).forEach((function(t){var n,r,o=t.nodeId,i=t.isSelected,a=t.absPath;e.is(o)&&e.is(i)&&e.is(a)&&(r=a.length>0?a:o,i?(n=f(o,a),l(r,n)):u(r))})),v(),n=d(),m(n))},P=function(t){var r,o=s("WUXNodeModelBehavior");g()&&e.is(o)&&e.is(t)&&e.is(t.sourceId)&&e.is(t.changed)&&(r=t.changed,t.sourceId!==n.getId()&&r.isSelected&&o.unSelectAll(),D(r))},{listenTo:function(){return{refreshAll:I,select:P,reComputeCrossHighlight:D,onNodeExpanded:this.reHighlightMyView,onNodeCollapsed:this.reHighlightMyView}},onStart:function(t){i=!!e.is(t.enableCrossHighlight)&&t.enableCrossHighlight,a=e.is(t.crossHighLightLinkTypes)?t.crossHighLightLinkTypes:{},c()},onStop:function(){o=null},reHighlightMyView:function(){var e;g()&&o&&Object.keys(o).length>0&&(v(),e=d(),m(e))}}}}})),define("DS/DELPPWViewBehaviors_FD02/RootsBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["RootsPlugin"],creator:function(e,t,n){return{listenTo:function(){return{ResetRootsStore:this.removeRoots}},onStart:function(){},onStop:function(){},getRoots:function(){return n.getRoots(t.getId())},isRoot:function(e){return n.isRoot(e)},getRootFilter:function(e){return n.getRootFilter(e)},getCompatibleConfigurationFilters:function(e){return n.getCompatibleConfigurationFilters(e)},removeRoots:function(){return n.removeRoots(t.getId())}}}}})),define("DS/DELPPWViewBehaviors_FD02/GraphViewBehavior/EGraphLinkFilterUI",["UWA/Core"],(function(e){"use strict";var t=!0;return function(n){var r,o,i,a=[],s=n.getBehavior("UXFactoryBehavior"),l=n.getBehavior("EGraphViewBehaviour"),c=n.getBehavior("ResourceBehavior");return{init:function(t){r=e.extend(r,t)},destroy:function(){o.destroy(),o=void 0},isActive:function(){},getDisplayLabel:function(e){var t="";switch(e){case"scope":t=c.getNLSValue("GraphViewLinksFilter.Scope");break;case"implement":t=c.getNLSValue("GraphViewLinksFilter.Implement");break;case"origin":t=c.getNLSValue("GraphViewLinksFilter.Origin");break;case"alternate":t=c.getNLSValue("GraphViewLinksFilter.Alternate");break;case"output":t=c.getNLSValue("GraphViewLinksFilter.Output");break;case"productFlow":t=c.getNLSValue("GraphViewLinksFilter.ProductFlow");break;case"capableResources":t=c.getNLSValue("GraphViewLinksFilter.CapableResources");break;case"capableResourcesStructure":t=c.getNLSValue("GraphViewLinksFilter.CapableResourcesStructureLink");break;case"secondaryCapableResources":t=c.getNLSValue("GraphViewLinksFilter.SecondaryCandidateResourceLink")}return t},loadLinkGraphUI:function(){var r,o,u,d,g,f,p,h,m,v=this,I={},D=c.getNLSValue("InsertCmd.OK"),P=s.getComponent("Modal"),y=s.getComponent("Toggle"),C=s.getComponent("ButtonGroup"),b=s.getComponent("Button");for(n.notify("startProgress",I),h=e.createElement("div"),i=new P({header:c.getNLSValue("GraphViewLinksFilter.Header"),closable:!1,className:"linksFilter_dialog_modal",footer:h}),e.is(i.elements.container)&&i.elements.container.setAttribute("id","PPR-GraphView-filter"),new b({label:D,className:"ok primary",emphasize:"primary",onClick:function(){l.removeGenericEGraphView(),l.createGenericEGraphView(),i.destroy(),i=null}}).inject(h),i.inject(widget.body),r=new C({type:"checkbox"}),m=new y({type:"switch",label:c.getNLSValue("GraphViewLinksFilter.SelectUnselectAll")+"</br>",checkFlag:t,allowUnsafeHTMLLabel:!0}),r.addChild(m),m.addEventListener("buttonclick",(function(e){!1===e.dsModel._properties.checkFlag.value?(v.setStateOfAllLinks(!1),t=!1):(v.setStateOfAllLinks(!0),t=!0)})),g=l.getSupportedTypesOfLink(),d=0;d<g.length;d++)o=(f=g._models[d]._attributes).linkType,u="<img src='"+c.getIconURLFromKey(f.img)+"'/>   "+v.getDisplayLabel(f.linkType),p=f.displayed,a[d]=new y({type:"checkbox",value:o,label:u,isMultiSelection:!0,checkFlag:p,allowUnsafeHTMLLabel:!0}),r.addChild(a[d]),a[d].addEventListener("buttonclick",(function(e){l.setLinkDisplayStatus(e.dsModel._properties.value.value,e.dsModel._properties.checkFlag.value)}));i.setBody(r),i.show(),n.notify("stopProgress",I)},setStateOfAllLinks:function(e){a.forEach((function(t){t.checkFlag=e,l.setLinkDisplayStatus(t._properties.value.value,e)}))}}}})),define("DS/DELPPWViewBehaviors_FD02/ManageCapableResourcesBehaviour/ManageCapableResourcesBehaviour",["UWA/Core"],(function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin"],creator:function(t,n,r,o,i,a,s,l,c,u,d){var g,f,p,h,m,v,I;return m=function(t,r,o,i){o=o||{},e.is(r)&&n.info(r,i),n.notify("stopProgress",t),e.is(o.onComplete,"function")&&o.onComplete.call(null,r)},v=function(t,r,o,i,a){i=i||{},e.is(o,"string")&&(r+="\n"+o),n.warn(r,a),n.debug(r),n.notify("stopProgress",t),e.is(i.onFailure,"function")&&i.onFailure.call(null,r)},I=function(e,t){var n=a.getConnection(t),o=a.getReference(n.get("to")).get("V_Name");return r.getNLSValue(e,{resource:o})},g=function(e){var t,n,o,i=[],s=e.path,l=e.id,c=function(e,t,n){e&&i.unshift({label:e.get("V_Name"),icon:{iconPath:r.getIconURLFromKey(e.get("type")),iconSize:{width:"20px",height:"20px"}},instPID:t,refPID:e.get("PID"),path:n})};if(0===s.length)c(a.getReference(l),null,[]);else for(t=s.length-1;t>=0;t--)o=s[t],c(a.getReferenceModel(o),o,s.slice(0,t+1)),0===t&&(n=a.getInstance(o),c(a.getAggregatingReferenceModelFromInstance(n),null,[]));return i},f=function(e){var t=[],n=a.getFilteredInstancesFromCollection(e);return(n=(n=n.map((function(e,t){return{position:t,data:e}}))).sort((function(e,t){var n=e.data.get("V_TreeOrder"),r=t.data.get("V_TreeOrder");return n&&r?Number(n)-Number(r):e.position-t.position}))).forEach((function(e){var n=a.getReferenceModel(e.data.id);a.isOperation(n)&&t.push({name:n.get("V_Name"),type:n.get("type"),instPID:e.data.id,icon:r.getIconURLFromKey(n.get("type")),refPID:n.get("PID")})})),t},{listenTo:function(){return{}},onStart:function(e,t){c.getViewLabelMap().MANAGECAPABLERESOURCESMOD={attributeName:"V_Name",dicoType:"PLMEntity",labelIsOnRef:!0},t()},onStop:function(){},setStepOperationUIState:function(e){h=e},getStepOperationUIState:function(){return h},getChildrenInfo:function(e){return f(e)},getBreadcrumbValue:function(e){return g(e)},setBreadCrumb:function(e){p=e},getBreadCrumb:function(){return p},isBreadCrumbLabelSameAsNewLabel:function(e){var t=!1,n=p.value;return n.length===e.length&&(t=!(t=n.some((function(t,n){return t.label!==e[n].label})))),t},getBreadCrumbLastElementRefPID:function(){var e=this.getBreadCrumb().value;return e[e.length-1].refPID},getBreadCrumbRefPIDs:function(){var e=[];return this.getBreadCrumb().value.forEach((function(t){e.push(t.refPID)})),e},isBreadCrumbLastElementHeaderOperation:function(){var e=this.getBreadCrumbLastElementRefPID(),t=a.getReference(e);return s.isAKindOf(t,"DELLmiHeaderOperationReference")},getBreadCrumbLastElementInstPID:function(){var e=this.getBreadCrumb().value;return e[e.length-1].instPID},isPrimaryCapableResourceLink:function(e){return"DELAsmProcessCanUseCnx"===a.getConnection(e).get("type")},getBreadCrumbRIRPath:function(){var e,t,n,r=[];for(e=p.value.length,t=0;t<e;t++)n=p.value[t],0===t||r.push(n.instPID),r.push(n.refPID);return r},checkType:function(e,t){return a.getReference(e).get("PPRTYPE")===t},checkParentType:function(e,t){var n=a.getInstance(e).get("isAggregatedBy");return a.getReference(n).get("PPRTYPE")===t},isUsagePossible:function(){var t=this.getBreadCrumbLastElementRefPID(),n=this.getBreadCrumbLastElementInstPID();return this.checkType(t,"OPERATION")&&e.is(n)&&this.checkParentType(n,"SYSTEM")},createResourceUsage:function(e,t){a.createInstance(e,t)},getResourceUsage:function(t){var n=a.getConnection(t).get("ResourceUsage");return e.is(n)?a.getInstance(n):null},getReferenceModel:function(e){return a.getReferenceModel(e)},getReferencePID:function(e){return a.isReference(e)?e:a.getReferenceIdFromInstance(e)},getImpacted:function(e,t,n){return a.getImpacted(e,t,n)},setPreferred:function(t,o){var i,s,c={};i={url:"dsmfg/private/V0/MfgElement/connection/setPreferred/"+t,method:"PUT",context:this,onComplete:function(r){var i,l=[];e.is(r)&&e.is(r.preferred)&&(i=a.getConnection(r.preferred).get("from"),a.getImpacted(i,!1,{relationTypes:["DELAsmProcessCanUseCnx"]}).forEach((function(e){var n=e.get("PID"),r=n===t;l.push({linkPID:n,state:r}),e.set("V_IsPreferred",r?"TRUE":"FALSE")})),n.notify("updatePreferredLink",[l])),m(c,I("ManageCapableResource.setPreferred.Success",t),o,s)},onFailure:function(){v(c,I("ManageCapableResource.setPreferred.Failure",t),o,s)}},n.notify("startProgress",c),s=n.log(r.getNLSValue("ManageCapableResource.setPreferred")),l.webServiceRequest(i)},setResourceUsage:function(t,o){var i,s,c,u={};this.isUsagePossible()&&(s=this.getBreadCrumbRIRPath(),i={url:"dsmfg/private/V0/MfgElement/connection/setResourceUsage/?rscInstance="+t.instPID+"&stepOperationRIRpath="+s+"&rscLinkPID="+t.linkPID,method:"PUT",context:this,onComplete:function(r){var i,s,l,d,g={};if(e.is(r.ResourceUsage))for(s in i=r.ResourceUsage)i.hasOwnProperty(s)&&(l=i[s],(d=a.getConnection(s)).set("ResourceUsage",l),g={linkPID:d.get("PID"),instMdl:a.getInstance(l)},n.notify("updateResourceUsage",g));m(u,I("ManageCapableResource.setResourceUsage.Success",t.linkPID),o,c)},onFailure:function(){v(u,I("ManageCapableResource.setResourceUsage.Failure",t.linkPID),o,c)}},n.notify("startProgress",u),c=n.log(r.getNLSValue("ManageCapableResource.setResourceUsage")),l.webServiceRequest(i))},fetchResourceUsages:function(t,o){var i,s,c=this,u={};e.is(t,"array")&&t.length>0?(i=t.map((function(t){return function(t){return new Promise((function(n,r){var o;o={url:"dsmfg/private/V0/MfgElement/connection/getResourceUsage?stepOperationRIRpath="+t.idFrom+"&rscLinkPID="+t.idTo,method:"GET",context:c,onComplete:function(t){var r,o,i;if(e.is(t.resourceUsage))for(o in r=t.resourceUsage)r.hasOwnProperty(o)&&(i=r[o],a.getConnection(o).set("ResourceUsage",i));n(t)},onFailure:function(){r()}},l.webServiceRequest(o)}))}(t)})),n.notify("startProgress",u),s=n.log(r.getNLSValue("ManageCapableResource.getResourceUsage")),e.Promise.allSettled(i).then((function(e){var t=[],n=0;e.forEach((function(e,r){"rejected"===e.state?n++:t.push(e.value)})),0===n?m(u,r.getNLSValue("ManageCapableResource.getResourceUsages.Success"),o,s):n===e.length?v(u,r.getNLSValue("ManageCapableResource.getResourceUsages.Failure"),null,o,s):v(u,r.getNLSValue("ManageCapableResource.getResourceUsages.PartialFailure"),null,o,s)}))):e.is(o)&&e.is(o.onComplete)&&o.onComplete.call(null)},createRscDetailLinkBulk:function(t,o){var i,s,c,u,d={},g=function(t){return new Promise((function(n,r){var i,s={connectionParams:t},c={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}};i={url:"dsmfg/private/V0/MfgElement/connection/resourceDetail/createResourceDetail",method:"POST",data:e.Json.encode(s),context:self,onComplete:function(t){var r=a.getConnectionParser();e.is(t.connections)&&t.connections.forEach((function(e){r.parse(e,c)})),a.addToCollections({stackedConnections:c.stackedConnections,onComplete:function(e){o.onComplete&&n(e.connections)}})},onFailure:function(){r()}},l.webServiceRequest(i)}))},f=[],p=[];if(e.is(t,"array")&&t.length>0){for(s=0,c=t.length;s<c;s+=5)u=t.slice(s,s+5),f.push(g(u));n.notify("startProgress",d),i=n.log(r.getNLSValue("ManageCapableResource.createResourceDetail")),e.Promise.allSettled(f).then((function(t){var n=0;t.forEach((function(e){"rejected"===e.state?n++:p=p.concat(e.value)})),0===n?(m(d,r.getNLSValue("ManageCapableResource.createResourceDetails.Success"),null,i),e.is(o)&&e.is(o.onComplete)&&o.onComplete.call(null,p)):n===t.length?v(d,r.getNLSValue("ManageCapableResource.createResourceDetails.Failure"),null,o,i):v(d,r.getNLSValue("ManageCapableResource.createResourceDetails.PartialFailure"),null,o,i)}))}else o.onComplete.call(null,p)},fetchRscDetailLinkBulk:function(t,o){var i,s,c,u,d={},g=function(t){return new Promise((function(n,r){var i,s={connectionParams:t},c={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}};i={url:"dsmfg/private/V0/MfgElement/connection/resourceDetail/getResourceDetail",method:"POST",data:e.Json.encode(s),context:self,onComplete:function(t){var r=a.getConnectionParser();e.is(t.connections)&&t.connections.forEach((function(e){r.parse(e,c)})),a.addToCollections({stackedConnections:c.stackedConnections,onComplete:function(e){o.onComplete&&n(e.connections)}})},onFailure:function(){r()}},l.webServiceRequest(i)}))},f=[],p=[];if(e.is(t,"array")&&t.length>0){for(s=0,c=t.length;s<c;s+=5)u=t.slice(s,s+5),f.push(g(u));n.notify("startProgress",d),i=n.log(r.getNLSValue("ManageCapableResource.getResourceDetail")),e.Promise.allSettled(f).then((function(t){var n=0;t.forEach((function(e){"rejected"===e.state?n++:p=p.concat(e.value)})),0===n?(m(d,null,null,i),e.is(o)&&e.is(o.onComplete)&&o.onComplete.call(null,p)):n===t.length?v(d,r.getNLSValue("ManageCapableResource.getResourceDetails.Failure"),null,o,i):v(d,r.getNLSValue("ManageCapableResource.getResourceDetails.PartialFailure"),null,o,i)}))}else o.onComplete.call(null,p)}}}}})),define("DS/DELPPWViewBehaviors_FD02/CrossHighlightBehavior/CrossHighlightLinkHelper",["UWA/Core"],(function(e){"use strict";return function(t,n,r,o){var i,a,s,l="CrossHighlightLinkHelper",c=r.getImplementLinkType();return i=function e(t,n){var r,i,a,s;if(i=o.getInstance(t).get("isInstanceOf"),0===(a=o.getInstancesFromCollection(i).map((function(e){return e.get("PID")}))).length)return[];if(s=a.filter((function(e){return-1!==n.indexOf(e)})),s.length>0)return s;for(r=0;r<a.length&&!((s=e(a[r],n)).length>0);r++);return s},a=function(e){var t,n,r,o,a,s=[],l=[];for(l.push(e[0]),t=0;t<e.length-1;t++){for(s=[],r=e[t],n=0;n<r.length;n++)-1!==l[t].indexOf(r[n])&&(a=e[t+1],o=i(r[n],a),s=s.concat(o));l.push(s)}return l.length>0?l[l.length-1]:[]},s=function(t){return o.findSomeConnection((function(n){var r=c===n.get("type"),o=e.equals(t,n.get("to"));return r&&o})).map((function(e){return e.get("from")}))},{getImplementLinks:function(e){return n?r.getImplLinksOfImplementing(e):r.getImplLinksOfImplemented(e)},isImplemented:function(e){var t,n=!1;return t=this.getImplementLinks(e),Array.isArray(t)&&t.length>0&&(n=!0),n},getParentScoped:function(t){var n,o,i,a=null;return Array.isArray(t)&&t.length>0&&(i=r.findInstanceWhoseParentIsScoped(t),e.is(i)&&(0===i.absPathIndex?o=i.instanceModel.get("isAggregatedBy"):n=t.slice(0,i.absPathIndex))),e.is(n)?a=n:e.is(o)&&(a=o),a},getScopedNodePrdAbsolutePath:function(n){var i,a,s,c,u,d=function(t){var n,r=!1;return n=o.getReferenceModel(t),e.is(n)&&"PROCESS"===n.get("PPRTYPE")&&(r=!0),r};if(Array.isArray(n)){if(0===(i=n).length)return t.debug(l,"Error: getScopedNodePrdAbsolutePath: expected reference id for root node"),null;if(!d(i[i.length-1]))return t.debug(l,"Error: getScopedNodePrdAbsolutePath: expected a Manufacturing Item"),null;if(!r.isScoped(i))return null;if(r.isUnderScope(i)){u=[],s=i.slice(0);do{if(!r.isUnderScope(s))break;if(c=r.getImplLinksOfImplementing(s),!e.is(c)||c.length>1||0===c.length){u=null;break}u=c[0].get("to").concat(u),s=this.getParentScoped(s)}while(Array.isArray(s))}else c=r.getImplLinksOfImplementing(i),u=e.is(c)&&1===c.length?c[0].get("to"):[]}else u=d(a=n)&&r.isScoped(a)?[]:null;return u},getImplementingItemInstIDs:function(t){var n,i,l,u,d,g,f,p,h=[],m=null;if(Array.isArray(t)){if(0===(n=t).length)return null;i=n.slice(0);do{l=r.getPathToScope(i),u=o.findSomeConnection((function(t){var n=c===t.get("type"),r=e.equals(l,t.get("to"));return n&&r})).map((function(e){return e.get("from")})),!e.is(m)&&n.length!==i.length&&u.length>0&&(m=u),h.unshift(u),i=this.getParentScoped(i)}while(Array.isArray(i));d=!1,e.equals(r.getPathToScope(n),n)||e.is(m)&&(d=!0),d?(g=h[h.length-1].length>0?a(h):h[h.length-1],f=s(n),p=g.concat(f)):p=h.length>0?h[h.length-1]:[]}else p=null;return p}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXGenericLinksDragDrop",["UWA/Core","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXDragDrop"],(function(e,t){"use strict";return function(e,n,r,o,i,a,s,l){var c,u=new t(e,n,r,o,i,a,s,l),d=u.init;return u.init=function(e){c=e||{},d.call(this,c)},u.onDragEndCell=function(e,t){return!1},u.onDragEnterRowHeader=function(e,t){return!1},u.onDragLeaveRowHeader=function(e,t){return!1},u.onDragEnterColumnHeader=function(e,t){return!1},u.onDragLeaveColumnHeader=function(e,t){return!1},u.onDragEnterCell=function(e,t){return!1},u.onDragLeaveCell=function(e,t){return!1},u.onDragOverCell=function(e,t){return!1},u.onDragEnterBlank=function(e,t){return!1},u.onDragLeaveBlank=function(e,t){return!1},u.onDropCell=function(e,t){return n.warn(r.getNLSValue("AbstractDragAndDropManager.NotAuthorized")),!1},u.onDropBlank=function(e,t){return n.warn(r.getNLSValue("AbstractDragAndDropManager.NotAuthorized")),!1},u}})),define("DS/DELPPWViewBehaviors_FD02/CrossHighlightBehavior/ProductAbsPathHelperBehavior",["UWA/Core","DS/DELPPWViewBehaviors_FD02/CrossHighlightBehavior/CrossHighlightLinkHelper"],(function(e,t){"use strict";return{plugins:["DatabasePlugin","ProductImplementPlugin"],creator:function(n,r,o,i){var a,s,l,c;return l=function(t,n){var r,o=n||{},i=null;return r=s.getParentScoped(t,o),e.is(r)&&(e.is(i)||(i=s.getScopedNodePrdAbsolutePath(r,o))),i},c=function(e,t,n){var r,o=null;return r=l(e,n),Array.isArray(r)&&(o=r.length>0?r.concat(t):t),o},{onStart:function(r){a=e.is(r.implementing)?r.implementing:null,s=new t(n.getLogger(),a,i,o)},getImplementedProductAbsPath:function(e,t,n){return c(e,t,n)}}}}})),define("DS/DELPPWViewBehaviors_FD02/Tagger/TaggerBehavior",["UWA/Core","UWA/Class/Promise","DS/DELPPWViewBehaviors_FD02/Tagger/FilterComponentServices"],(function(e,t,n){"use strict";return{plugins:["DatabasePlugin","WebServicePlugin","TreeViewPlugin","ProxyPlugin"],creator:function(r,o,i,a,s,l){var c,u,d=new Map,g={},f=[],p=new n({facade:o}),h=function(){f=[],g={},d.clear()},m=function(t){var n,r,o,a,s=t.absolutePath,l=t.status,c=t.dispValue,f={},p=[];if(g[u]||(g[u]={}),!(g[u]&&g[u][l]&&g[u][l].subjects.length>0&&-1!==g[u][l].subjects.indexOf(s))){if(g[u])for(o in g[u])g[u].hasOwnProperty(o)&&-1!==(a=(p=g[u][o].subjects).indexOf(s))&&(1===p.length?delete g[u][o]:g[u][o].subjects.splice(a,1));g[u][l]||(g[u][l]={},g[u][l]={type:"string",dispValue:c,subjects:[]}),g[u][l].subjects.push(s),n=d.get(s),r=i.getReference(n),e.is(r)&&(f=(f=r.getAdditionalInfo("ds6w"))||{},e.is(f)&&(f[u]={dispValue:c,type:"string",value:l},r.setAdditionalInfo({ds6w:f})))}},v=function(n,r){new t((function(t,n){var r,o,a=[],s=f.splice(0);Array.isArray(s)&&s.length>0?(s.forEach((function(t){if("add"===t.event){if(d.set(t.Path,t.PID),r=i.getReference(t.PID),!e.is(r))return void n("Model not found for PID:"+t.PID);o=r.getAdditionalInfo("ds6w"),e.is(o)||a.push(t.PID),Object.keys(t.externalTags).length>0&&t.externalTags.forEach((function(e){m(e)}))}else"remove"===t.event&&d.delete(t.Path)})),0===d.size&&(h(),n("View data empty.")),a.length>0?i.fetchMultiplePromise(a,{select_predicate:["physicalid","interface"],withSynthesisAttribute:!0,type:"entity",silent:!0}).then((function(n){n.forEach((function(t){var n=i.addReference(t.attributes,{silent:!0});e.is(t.ds6w)&&n.setAdditionalInfo({ds6w:t.ds6w})})),t()})).catch((function(){n("Failed to fetch index attributes for root PID:"+a)})):t()):n("No nodes to process tags.")})).then((function(){return new t((function(t,n){var r,o={};d.forEach((function(t,r){var a,s;a=i.getReference(t),e.is(a)?(s=a.getAdditionalInfo("ds6w"),e.is(s)&&(o[r]=s)):n("Model not found for PID:"+t)})),r=p.parse(o),g=r.ds6wTagGrouped,t()}))})).then((function(){return e.is(r,"function")&&r(),t.resolve()})).catch((function(t){e.is(r,"function")&&r()}))};return{onStart:function(e,t){t()},onStop:function(){},clear:function(){h()},getNodeUpdatePromise:function(t){var n;if(e.is(t))return Array.isArray(t)?f=f.concat(t):f.push(t),n={callback:v,globalArray:f,context:this,delay:500,blockSize:1e3},i.getExecuteByBlockPromise(n)},addExternalTags:function(e){m(e)},displayExternalTags:function(){var t;t=p.getTagsSummary(g),e.is(t)},removeExternalTags:function(){var t,n,r,a,s;(s=o.getBehavior("WUXNodeModelBehavior"))&&(e.is(g[u])&&delete g[u],t=p.getTagsSummary(g),e.is(t),n=s.getAllDescendants(),Array.isArray(n)&&0<n.length&&n.forEach((function(t){r=i.getReference(t.getReferencePID()),e.is(r)&&(a=r.getAdditionalInfo("ds6w"),e.is(a)&&e.is(a[u])&&(delete a[u],r.setAdditionalInfo({ds6w:a})))})))},setStatusCustomColors:function(t){!function(t){var n,r=[],o={};if(0!==Object.keys(t).length){for(n in t)t.hasOwnProperty(n)&&r.push({color:t[n].colorCode,type:"string",object:n});o[u]=r,e.is(o)&&c.setColorMap(o)}}(t)},onColorize:function(t){!function(t){var n=o.getBehavior("TreeListViewBehavior"),r=o.getBehavior("WUXNodeModelBehavior"),i=o.getBehavior("GraphViewBehavior");s.getActiveView()===o.getId()&&e.is(n)&&e.is(r)&&(n.manageColumn("taggerColor",{visible:!0}),e.is(i)&&i.setTaggerStatus(!0),t.tagColors.forEach((function(e){var t=p.findColoredPaths(g,e).map((function(e){return e.indexOf(",")>-1?e.split(","):e}));r.setTaggerColor(t,e)})),o.notify("TaggerColumnColorized",o.getId()))}(t)},onUnColorize:function(){var t,n;s.getActiveView()===o.getId()&&(t=o.getBehavior("TreeListViewBehavior"),n=o.getBehavior("GraphViewBehavior"),e.is(t)&&t.manageColumn("taggerColor",{visible:!1}),e.is(n)&&n.setTaggerStatus(!1),o.notify("TaggerColumnUnColorized",o.getId()))}}}}})),define("DS/DELPPWViewBehaviors_FD02/CfgColumnsBehavior/CfgColumnsBehavior",["UWA/Core","DS/DELPPWViewBehaviors_FD02/CfgColumnsBehavior/ConfigIdsContainer"],(function(e,t){"use strict";return{plugins:["CfgColumnsPlugin"],creator:function(n,r,o){let i=new Set,a=[];const s=function(){return i.size>0},l=function(e){!function(e){i=new Set(e)}(e),function(e){const t=o.getAdditionalColumnAMDsBasedOnDataIndices(e);a=t}(e)},c=function(){return a},u=function(t){return e.owns(t,"displayType")&&"CFG"===t.displayType},d=function(e){return o.isDataIndexAvailable(e.dataIndex)},g=function(t){return t.filter((t=>u(t)&&(t=>!!e.owns(t,"isHidden")&&!t.isHidden)(t)&&d(t))).map((e=>e.dataIndex))},f=function(t){if(s()){const n=r.getBehavior("WUXNodeModelBehavior");if(e.is(n)){const r=function(t){let n=[];return e.owns(t,"pids")&&(n=n.concat(Object.keys(t.pids))),e.owns(t,"relids")&&(n=n.concat(Object.keys(t.relids))),n}(t);n.updateCfgColumnsForCommandUpdates(r,t)}}},p=function(){const t=o.getColumnsFromPreferences(r.getId()),n=g(t);if(l(n),s()){const t=r.getBehavior("WUXNodeModelBehavior");e.is(t)&&t.resetConfigColumns()}};return{listenTo:function(){return{updateCfgColumns:f,TreeViewPrefModified:p}},onStart:function(){},onStop:function(){},computeVisibleConfigColDataIndices:function(e){return g(e)},setVisibleCfgColDataIndices:function(e){l(e)},getCombinedEntriesFromUpdatedAttributesObj:function(e){const t=Object.entries(e.pids),n=Object.entries(e.relids);return t.concat(n)},trimAttributesBasedOnVisibleDataIndices:function(t){return function(t,n){let r={};for(const o in n)e.owns(n,o)&&t(o)&&(r[o]=n[o]);return r}((e=>function(e){return i.has(e)}(e)),t)},isAnyCfgColumnVisible:function(){return s()},filterCFGColumnsBasedOnAvailability:function(e){let t;return t=s()?e.filter((function(e){let t;return t=!u(e)||d(e),t})):e,t},getNodeIdsObjAsPerExternalSpec:function(e){return e.reduce(((e,n)=>{const r=function(e){const n=e.getReferencePID();let r=t.empty().addPID(n);if(!e.isRoot()){const t=e.getInstancePID();r.addRelID(t).addPair([n,t])}return r}(n);return e.combine(r)}),t.empty()).getIdsObjAsPerExternalSpec()},updateAttributes:function(e){return o.updateAttributes(e,c)},getRequiredTypeRepresentations:function(){return o.getTypeRepresentations()}}}}})),define("DS/DELPPWViewBehaviors_FD02/GraphViewBehavior/GraphViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXDragDrop"],(function(e,t,n){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","SelectionPlugin","DatabasePlugin","DicoPlugin","PlatformPlugin","WebServicePlugin","TreeViewPlugin","ImplementPlugin"],creator:function(r,o,i,a,s,l,c,u,d,g,f,p){var h,m,v,I,D,P,y,C,b,S,w,R={},V=a.getComponent("ETree"),L=a.getComponent("ETreeViewsFactory"),A=V.OrientationMode.ROOT_ON_TOP,E={paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0},N={height:"auto",useAsyncPreExpand:!1,isDraggable:!0,resize:{columns:!0},selection:{unselectAllOnEmptyArea:!0,toggle:!1,cells:!1,enableListSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0};return m=function(l){var g,f,m,I,D,P,y,C,b,S,T=o.getElement();e.is(T.getElementsByClassName,"function")&&(g=T.getElementsByClassName("graphView-container")[0])?(I=(P=l||{}).graphViewOptions?e.extend(N,P.graphViewOptions,!0):N,e.is(v,"array")&&(f=new t(o,a,i,s,d,c,u,p),b=function(t){var n,r,i,a={context:this,nodes:[]};return e.is(t)&&(t.isSelected()||t.select()),r={selectedNodes:h.getModel().getXSO().get()},n=f.buildContextualMenu(v,o.getAppContext(),r),0===r.selectedNodes.length&&(i=v.indexOf("ExploreInWebApp"))>=0&&(n[i].sensitivity="disabled"),a.nodes=n,a}),m={template:['<div class="etree-sync-node" draggable="true">','\t\t<div class="etree-sync-node-widget">','\t\t\t<div class="etree-sync-node-label">','\t\t\t\t<div class="etree-sync-node-color"></div>','\t\t\t\t<div class="etree-sync-node-label-content"></div>',"\t\t\t</div>",'    \t\t<div class="etree-sync-node-caption">','      \t\t<div class="etree-sync-node-icon"></div>','      \t\t<div class="etree-sync-node-moreinfo" data-egraph-subelt="moreinfo"></div>',"    \t\t</div>","  \t</div>",'\t\t<div class="etree-sync-node-collapse-expand" data-egraph-subelt="collapse-expand">','\t\t\t<div class="etree-sync-node-collapse-expand-spinner"></div>',"  \t</div>","</div>",'<div class="etree-sync-temp-node">',"</div>",'<div class="etree-sync-group">',"</div>"].join("\n"),onmodifyDisplay:function(t){var n,r,o,i,a,l,c,d=[{dicoType:"PLMEntity",dataIndex:"V_Name.reference"}],g=e.is(R)?R:{},f=t.nodeView,p=t.nodeModel;p.options.isBeingCut?f.classList.add("is-being-cut"):f.classList.remove("is-being-cut"),c=f.querySelector(".etree-sync-node-color"),e.is(w)&&w&&e.is(p.options.taggerColor)?(f.classList.add("colorized"),c.style.backgroundColor=p.options.taggerColor):f.classList.remove("colorized"),(c=f.querySelector(".etree-sync-node-icon")).classList.remove("hidden"),p.options.icons&&p.options.icons.length>0?(c.style.backgroundImage='url("'+p.options.icons[0]+'")',c.style["background-size"]="22px 22px"):c.classList.add("hidden"),(c=f.querySelector(".etree-sync-node-moreinfo")).classList.remove("hidden"),c.classList.add("hidden"),e.is(g.Color)&&(c=f.querySelector(".etree-sync-node-widget"),r=g.Color.dataIndex,l=g.Color.colorDef,o=p.options.grid[r],e.is(o)&&e.is(l[o])&&!p.isSelected()?c.style.background=l[o].code:c.style.background=""),c=f.querySelector(".etree-sync-node-label-content"),e.is(g.Content)&&e.is(g.Content[p._type])&&(d=g.Content[p._type]),n=[],c.innerHTML="",d.forEach((function(e){o=p.options.grid[e.dataIndex],a=u.getAttributeInfo(e.dicoType+"."+e.dataIndex.split(".")[0]),i=s.getNLS(a),n.push(i+" : "+o)})),c.innerHTML=n.join("<br/>"),c.title=n.join("\n")}},P=e.extend(I,{orientation:A,contextCallback:b,fittingArea:E,nodeView:L.generateNodeView(m)}),S=function(t,n){var r=o.getBehavior("DropZoneViewBehavior"),i=o.getBehavior("WUXNodeModelBehavior");e.is(r)&&(r.setIcon(t),e.is(i)&&(!0!==n||i.isDocumentEmpty()||r.hide()))},(h=new V.SyncEGraphTree(g,P)).treeContainer.ondragenter=function(){var t=o.getBehavior("DropZoneViewBehavior");e.is(t)&&S(t.iconEnum.PLUS,!1)},h.treeContainer.ondragleave=function(){var t=o.getBehavior("DropZoneViewBehavior");e.is(t)&&S(t.iconEnum.DROPHERE,!0)},h.treeContainer.ondrop=function(){var t=o.getBehavior("DropZoneViewBehavior");e.is(t)&&S(t.iconEnum.DROPHERE,!0)},"function"==typeof T.getElementsByClassName&&T.getElementsByClassName("drop-zone-container")[0]&&(h.widget.sm.rootState.actions.insert=function(){},h.widget.sm.rootState.movePredicate=function(){return!1},C=h.container.getElementsByClassName("egraph_views_RootLayer"),e.is(C)&&C.length>=1&&(y=C[0],e.is(y)&&(D={dropZone:y,acceptedTypes:l.pprTypes},new n(r,o,i,c,u).init(D)))),h.createOverview(),h.swapOverviewVisibility()):o.debug("graph Container not defined.")},I=function(){var t;return t=f.getCurrentView(),!(!e.is(t[o.getId()].currentView)||"graphView"!==t[o.getId()].currentView)},D=function(t){g.getXMLValues(t,(function(t){var n,r,o="BOMView";if(e.is(t.Config.Preferences[o])&&(e.is(t.Config.Preferences[o].Color)&&(R.Color=t.Config.Preferences.BOMView.Color.AttributeDefinition,R.Color.colorDef=t.convert("Config.Preferences.BOMView.Color.ColorDefinition","value")),e.is(t.Config.Preferences[o].Content)))for(n in R.Content={},r=t.convert("Config.Preferences.BOMView.Content.Type","name"))Object.prototype.hasOwnProperty.call(r,n)&&(R.Content[n]=Array.isArray(r[n].Row)?r[n].Row:[r[n].Row]);y()}),(function(){o.debug("Failed to get"+t+"XML configuration file")}))},y=function(){var t=[],n={boAttrName:[],roAttrName:[],otherAttrName:[]};C(t),e.is(t,"array")&&t.forEach((function(e){var t=e.split("."),r=e,o="reference";2===t.length&&(r=t[0],o=t[1]),"reference"===o?n.boAttrName.push(r):"instance"===o?n.roAttrName.push(r):n.otherAttrName.push(r)})),c.setSelectPredicate(o.getId(),n)},C=function(t,n){var r=[];e.is(R)&&(e.is(R.Color)&&t.indexOf(R.Color.dataIndex)<0&&t.push(R.Color.dataIndex),e.is(n)?e.is(R.Content)&&e.is(R.Content[n])&&r.push(n):e.is(R.Content)&&Object.keys(R.Content).forEach((function(e){r.push(e)})),r.forEach((function(e){R.Content[e].forEach((function(e){t.indexOf(e.dataIndex)<0&&t.push(e.dataIndex)}))})))},b=function(t){var n,r,o=t.type,i={icons:"",label:"",grid:{},useAsyncPreExpand:!0},a=[];for(n in C(a,o),t)Object.prototype.hasOwnProperty.call(t,n)&&(r=t[n],e.is(r)&&"NULL"!==r&&(a&&a.indexOf(n+".reference")>=0?i.grid[n+".reference"]=t[n]:"PID"===n?i.referencePID=t[n]:"type"===n&&(i.referenceType=t[n])));return i},S=function(t,n){var r,o,i=[],a=b(t);for(r in C(i,t.type),n)Object.prototype.hasOwnProperty.call(n,r)&&(o=n[r],e.is(o)&&"NULL"!==o&&(i&&i.indexOf(r+".instance")>=0?a.grid[r+".instance"]=n[r]:"PID"===r&&(a.instancePID=n[r])));return a},{viewName:"graphView",listenTo:function(){return{Reframe:this.reframeAll,ReframeOn:this.reframeOn,ToggleOrientation:this.toggleOrientation,ToggleOverview:this.toggleOverview}},onStart:function(t,n){t=t||{},e.is(t.views)&&e.is(t.views.graphView)&&(v=t.views.graphView.contextualCommands),m({pprTypes:t.pprTypes,graphViewOptions:t.graphViewOptions}),e.is(t.views.graphView.configXML)&&D(t.views.graphView.configXML),!0===(P=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&f.registerViewforWidgetLayout({viewID:o.getId(),viewType:this.viewName}),n()},onStop:function(){h.container.remove(),h=void 0,!0===P&&f.unregisterViewforWidgetLayout(o.getId(),this.viewName)},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=b(t.toJSON())),n},getInstanceNodeOptions:function(t,n){var r;return e.is(t)&&e.is(n)&&(r=S(t.toJSON(),n.toJSON())),r},setModel:function(t){o.debug("set model on Graph View"),e.is(h)&&h.setModel(t)},getModel:function(){var t=void 0;return e.is(h)&&(t=h.getModel()),t},toggleOrientation:function(){I()&&h.swapLayoutOrientation()},toggleOverview:function(){I()&&h.swapOverviewVisibility()},reframeOn:function(){I()&&h.reframeOn()},reframeAll:function(){I()&&h.reframeAll()},setSize:function(){I()&&h.setSize()},selectArea:function(){I()&&h.selectArea()},setRootPosition:function(t){if(I())if(e.is(t,"string"))switch(t){case"left":h.setRootPosition(V.OrientationMode.ROOT_ON_LEFT);break;case"top":h.setRootPosition(V.OrientationMode.ROOT_ON_TOP);break;case"right":h.setRootPosition(V.OrientationMode.ROOT_ON_RIGHT);break;case"bottom":h.setRootPosition(V.OrientationMode.ROOT_ON_BOTTOM)}else o.debug("position should be a string")},getContent:function(){var t=void 0;return e.is(h)&&(t=h.getContent()),t},setTaggerStatus:function(e){var t;t=o.getElement().getElementsByClassName("graphView-container")[0],w=e||!1,e?t.removeClassName("unColorizeTagger"):t.addClassName("unColorizeTagger")}}}}})),define("DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXActionDragDrop",["UWA/Core","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXDragDrop"],(function(e,t){"use strict";return function(n,r,o,i,a,s,l,c){var u,d=new t(n,r,o,i,a,s,l,c),g=d.init;return d.init=function(e){u=e||{},g.call(this,e)},d.checkType=function(e){return!1!==this.isAcceptedType(e)},d.processRootDrop=function(t,n,a,s,l,c,d,g){var f,p,h,m,v,I,D,P=this,y=r.getBehavior("SelectionBehavior"),C=r.getBehavior("ModelBehavior"),b=r.getBehavior("LinkBehavior"),S=r.getBehavior("TreeListViewBehavior"),w=o.getNLSValue(r.getId()),R=o.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:w}),V=u.linkTypes[0];if(!e.is(y)||!e.is(C)||!e.is(b))return r.debug("WUXActionDragDrop: Required behaviors are missing."),void g("AbstractDragAndDropManager.InternalError");f=r.log(R),v=function(t){var n,o=r.getBehavior("WUXNodeModelBehavior");return n=e.is(o)?o.validate(t):n},D=function(t,n){var i,a,s,l={},c=e.is(S)?S.getLabelAttribute():"V_Name";P.checkType(n)?(s=v(n),e.is(s)?(l[s.param]=s.paramValue,i=o.getNLSValue(s.key,l,"ValidationError"),r.warn(i,f,"failed"),g()):(a=o.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{objectName:n.get(c),view:w}),r.log(a,f,"completed"),b.createConnection([{type:V,IDFrom:t.get("PID"),IDTo:n.get("PID"),fromSideRefPID:t.get("PID"),toSideRefPID:n.get("PID")}]),d())):(i=o.getNLSValue("AbstractDragAndDropManager.NotValidType"),r.warn(i,f,"failed"),g("AbstractDragAndDropManager.NotValidType"))},h=y.getSelections(),p=e.is(h[1],"array")?h[1][0]:null,e.is(p)?(I=C.getReferenceModel(p),(m=C.getReference(t))?I.get("PID")===m.get("PID")?(r.warn(o.getNLSValue("AbstractDragAndDropManager.SameObject"),f,"failed"),g()):D(I,m):m=i.fetchRoot(t,{onComplete:function(t){e.is(t)?(D(I,t),r.debug("WUXActionDragDrop:Succesfully fetched reference : %o",t)):(r.warn(o.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),f,"failed"),g("AbstractDragAndDropManager.RootNotInDB"))},onFailure:function(){r.debug("Failed to fetch Reference for PID: "+t),r.warn(o.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),f,"failed"),g("AbstractDragAndDropManager.RootNotInDB")},context:this,silent:!0})):(r.warn(o.getNLSValue("AbstractDragAndDropManager.NoMBOMSelected"),f,"failed"),g())},d.onTreeListViewDrop=function(t,n){var r=this,o={action:[],parameters:[]},i=r.getDragNDropInfo(t,n);e.is(i)&&e.is(i.draggedItems,"array")&&(i.draggedItems.forEach((function(e,t){o.action[t]="addRoot",o.parameters[t]={rootReferencePID:r.getDraggedReferencePID(e)}})),this.processDropEffect(o))},d.onDropBlank=function(e,t){return this.onTreeListViewDrop(e,t)},d}})),define("DS/DELPPWViewBehaviors_FD02/GraphViewBehavior/EGraphViewBehaviour",["UWA/Core","DS/DELPPWViewBehaviors_FD02/GraphViewBehavior/EGraphLinkFilterUI"],(function(e,t){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin","ImplementPlugin"],creator:function(n,r,o,i,a,s,l,c,u,d,g,f){var p,h,m,v,I,D,P,y,C,b,S,w,R,V,L,A,E,N,T,M,B,O,F,x,k,U,_,W,j,H,G,X,z,q,Q,K,Z,Y,J,$,ee,te,ne,re,oe,ie,ae,se,le,ce,ue,de,ge,fe,pe,he,me,ve,Ie,De,Pe,ye={},Ce={},be=0,Se=!1,we={},Re=new e.Class.Collection([],{}),Ve=i.getComponent("EGraphCore"),Le=i.getComponent("EGraphViews"),Ae=i.getComponent("EGraphIact"),Ee=i.getComponent("EGraphUtils"),Ne=i.getComponent("Breadcrumb"),Te=i.getComponent("ContextualMenuManager"),Me=i.getComponent("TooltipModel"),Be=i.getComponent("WUXCommandsManager"),Oe=r.getElement();return ee=function(){var e=r.getBehavior("SelectionBehavior").getSelectionsWithPaths()[0][0];return{id:e.id,path:e.path}},te=function(t){var n=s.getReferenceModel(D.id);return e.is(t)&&(t.get("isAggregatedBy")===D.id||n&&n.get("PID")===t.get("isAggregatedBy"))},ne=function(){return 1===be},b=function(){Le.SVGEdgeView.call(this)},k=function(){},V=function(t,n,r,i){var a,s,l=0;return k.prototype.onupdate=function(e){var t,n,r,o,i;t=e.cl1.c.aleft,o=e.cl1.c.atop,r=e.cl2.c.aleft,i=e.cl2.c.atop,n=.5*(t+r),e.set("path",[Ve.PathCmd.M,t,o,Ve.PathCmd.L,n,o,Ve.PathCmd.L,n,i,Ve.PathCmd.L,r,i])},b.prototype.oncreateDisplay=function(t){var n=this;Le.SVGEdgeView.prototype.oncreateDisplay.apply(this,arguments),this.display.elt.id=Math.random(),this.display.elt.textContent="official",t.mark&&(this.display.elt.setAttribute("data-link-type-nls",o.getNLSValue(t.mark.get("type"))),this.display.elt.setAttribute("data-link-from",t.mark.get("from")),this.display.elt.setAttribute("data-link-to",t.mark.get("to"))),s=Ce.Info,e.is(s,"array")?s.forEach((function(e){A(n,t,e.name,e.dicoType,l),l++})):A(n,t,s.name,s.dicoType,l)},a=new Ve.Edge,"Instance"===r?(a.set("geometry",new k),a.mark=""):(a.set("geometry",new Ve.AutoBezierGeometry),a.mark=r),a.views.main=new b("egraph_views_SVGEdgeView"),i.addEdge(t,n,a),a},L=function(e,t,n,r){var o;return(o=new Ve.Edge).set("geometry",new Ve.AutoBezierGeometry),o.views.main=new Le.SVGEdgeView(0===be?"my-first-edge-view":"my-sec-edge-view"),o.mark=n,r.addEdge(e,t,o),o},A=function(t,n,i,a,l){var c,u,d,g,h="http://www.w3.org/2000/svg",m=r.getBehavior("ProductFlowLinkBehavior"),v=0;if((c=document.createElementNS(h,"textPath")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+t.display.elt.id),c.setAttribute("startOffset","10%"),""===n.mark)c.appendChild(document.createTextNode(""));else if("type"===i){if(d=o.getNLSValue(n.mark.get(i)),"ProcessImplementLinkOcc"===n.mark.get(i)){d="("+f.getRoleFromModelOrComputed(n.mark.get("PID"))+")"+d}else"DELLmiTimeConstraintCnx"===n.mark.get(i)&&(g=s.getConnection(n.mark.get("PID")),d=m.getLinkInfo(g).NLS);c.appendChild(document.createTextNode(d)),l++}else n.mark.get(i)&&(c.appendChild(document.createTextNode(o.getNLSValue(a+"."+i)+": "+n.mark.get(i))),l++);if(t.display.text=document.createElementNS(h,"text"),e.is(n.mark)&&""!==n.mark)for(u=p.edges.first;u;u=u.next)e.is(u.mark)&&""!==u.mark&&u.mark.get("PID")!==n.mark.get("PID")&&n.cl1.c.node.PID===u.cl1.c.node.PID&&n.cl2.c.node.PID===u.cl2.c.node.PID&&v++;t.display.text.setAttribute("dy",-14*(l-1)+12*(v+1)),t.display.text.grElt=n,t.display.text.setAttribute("data-id",t.display.elt.id),Ee.classListAdd(t.display.text,"edge-text"),t.display.text.appendChild(c),""!==c.innerHTML&&t.structure.root.appendChild(t.display.text)},Pe=function(){var t=e.createElement("div",{class:"egraph_views_HTMLNodeView_Node input-node my-node"}),n=e.createElement("div",{class:"my-node-header"}),r=e.createElement("div",{class:"my-node-container"}),o=e.createElement("div",{class:"my-node-rightConnector-container"});return t.setStyles({width:"50px",height:"50px"}),t.appendChild(n),t.appendChild(r),t.appendChild(o),t},F=function(t,n,r){var i=e.is(ye.Lines)?ye.Lines.Line:[],a="";i.forEach((function(i){var s=e.is(i.Info,"array")?i.Info:[i.Info],c=new e.Element("div",{class:"my-node-line"}),u=function(e){return/^(auto|0)$|^[+-]?[0-9]+.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc|rem)$/.test(e)};s.forEach((function(r){var i,d,g,f,p=new e.Element("span",{class:"my-node-word"});i=e.is(r.dicoType)&&l.isEntityInstance(r.dicoType)?n.get(r.property):t.get(r.property),r.fontSize&&u(r.fontSize)&&(g=r.fontSize),d=r.maxWidth&&u(r.maxWidth)?r.maxWidth:100/s.length+"%",r.displayAttributeName&&(f=e.is(r.dicoType)?r.dicoType+"."+r.property:r.property,i=o.getNLSValue(f)+" : "+i),p.setText(i),p.setStyles({fontWeight:r.fontWeight,color:r.color,maxWidth:d,fontSize:g}),a+=i,a+=" ",p.inject(c)})),a+="\n",c.inject(r)})),r.tooltipInfos=new Me({shortHelp:a})},x=function(t,n,i,a,l,c,u,d){var g,f;return f=l,(g=new Ve.Node).views.main=new C,g.name=i,g.idObjet=l,g.referencePID=l,g.typeDobjet=a,g.imgType=u,e.is(d)&&(g.PID=d.get("PID"),g.referencePID=d.get("referencePID"),g.instancePID=d.get("instancePID"),g.childOccurencePath=d.get("childOccurencePath"),g.isAggregatedBy=d.get("isAggregatedBy"),f=g.referencePID+(g.instancePID?"_"+g.instancePID:"")),f=f.replace(new RegExp(",","g"),"_"),g.id="node_"+f,g.data={},g.multiset("left",t,"top",n,"width",250,"height",ne()?90:100),C.prototype.buildNodeElement=function(t){var n,i,a,l,u,d,g=null,f=null,p="",h=null;if(e.is(t))return e.is(t.referencePID)?(g=s.getReference(t.referencePID),p=o.getIconURLFromKey(g.get("type")),t.instancePID&&(f=s.getInstance(t.instancePID)),h=c.cloneNode(!0),i=e.is(t.childOccurencePath)?t.childOccurencePath:t.referencePID,h.className+=" EGraph_obj_"+g.get("PPRTYPE")+" "+i,n=ye.Image.value,ne()?(!0===n&&e.is(p,"string")&&p.length>0&&(h.childNodes[0].src=p),F(g,f,h.childNodes[1])):(a=r.getBehavior("LinkBehavior"),l=e.is(ye.Primary.Info)?ye.Primary.Info.property:null,u=e.is(l)?g.get(l):null,d=e.is(ye.Secondary.Info,"array")?ye.Secondary.Info:[ye.Secondary.Info],new e.Element("div",{class:"wux-control-inline-container"}).inject(h.childNodes[0]),!0===n&&e.is(p,"string")&&p.length>0&&(h.childNodes[0].innerHTML+='<img src="'+p+'">'),e.is(u,"string")&&u.length>0&&(h.childNodes[0].innerHTML+=u),d.forEach((function(t,n){var r,i,a,s;e.is(t)&&e.is(t.property)&&(r=e.is(t.dicoType)?t.dicoType+"."+t.property:t.property,i=o.getNLSValue(r),a=g.get(t.property),"type"===t.property&&(a=o.getNLSValue("Type."+a)),s="<div><b>"+i+"</b>: "+a+"</div>",h.childNodes[1].innerHTML+=s)})),(e.is(t.instancePID)?a.areRelationsLoaded(t.instancePID):a.areRelationsLoaded(t.referencePID))||o.getIconElem("LinksNotFetched").inject(h.childNodes[2]))):h=c.cloneNode(!0),h},g},function(t){var n;return e.is(t)&&e.is(t.views.main.display.elt)&&(n=t.views.main.display.elt),n},j=function(e,t){var n=!1;return t.forEach((function(t){(e===t.path.join()||0===t.path.length&&e===t.id)&&(n=!0)})),n},H=function(t,n){var i,a,l=[],c=n,u=t.clientPos[0],d=t.clientPos[1],g=s.getConnection(c).getAttribute("type"),f=r.getBehavior("EditAttributeBehavior");i={icon:"url("+o.getIconURLFromKey("GeneralDelete")+")",label:o.getNLSValue("LinksUI.DeleteLink"),sensitivity:"LinearProductFlowCnx"!==g?"enabled":"disabled",callback:function(){var t=s.getConnection(c);e.is(t)&&s.deleteConnection(c,{onFailure:function(){r.warn(o.getNLSValue("LinksUI.DeleteFailure"))},onComplete:function(){r.info(o.getNLSValue("LinksUI.DeleteSuccess"))},logMessage:o.getNLSValue("LinksUI.LogMessage")})}},["CapableResourcesStructureLink"].indexOf(g)>=0&&(i.sensitivity="disabled"),a={icon:"url("+o.getIconURLFromKey("EditAttribute")+")",label:o.getNLSValue("LinksUI.EditAttribute"),sensitivity:f.hasEditConfiguration(c)?"enabled":"disabled",callback:function(){f.editConfiguredAttributes(c)}},l.push(i),l.push(a),Te.show({nodes:l},[u,d])},P=function(t){var n,i,a,l=!0;Oe.getElement("#canvas"+be.toString()).addEventListener("mouseover",(function(e){e}),!1),t.addChangeListener((function(t){var c,u,d,g=[];if("edges"===t[0].path[0]&&(c=t[0].child.cl2.c,u=t[0].child.cl1.c,null!==c&&null!==u&&e.is(c.node.referencePID)&&e.is(u.node.referencePID))){if(!e.is(t[0].child.geometry)){if(c.node.PID===u.node.PID)return void r.warn(o.getNLSValue("CreateLink.SameItem"));d={allowMove:!0,instancePID:null,instancePIDsArray:[],referencePID:c.node.referencePID,rootReferencePID:null,targetInstancePID:null,targetInstancePIDsArray:[],targetReferencePID:u.node.referencePID,targetRootReferencePID:null},c.node.instancePID?(d.rootReferencePID=s.getInstance(c.node.childOccurencePath.split(",")[0]),d.rootReferencePID=e.is(d.rootReferencePID)?d.rootReferencePID.get("isAggregatedBy"):null,d.instancePIDsArray=c.node.childOccurencePath.split(","),d.instancePID=c.node.instancePID):d.rootReferencePID=c.node.referencePID,u.node.instancePID?(d.targetRootReferencePID=s.getInstance(u.node.childOccurencePath.split(",")[0]),d.targetRootReferencePID=e.is(d.targetRootReferencePID)?d.targetRootReferencePID.get("isAggregatedBy"):null,d.targetInstancePIDsArray=u.node.childOccurencePath.split(","),d.targetInstancePID=u.node.instancePID):d.targetRootReferencePID=u.node.referencePID,g.push(d),r.notify("CreateLinkOrInstance",[g])}setTimeout((function(){for(n=[],n=Oe.getElements("path"),a=0;a<n.length;a++)"official"!==n[a].innerHTML&&(i=window.getComputedStyle(n[a]),"none"===i.getPropertyValue("marker-end")&&"arrow-edge-end-marker"!==n[a].parentElement.id&&n[a].parentElement.removeChild(n[a]))}),500)}l||(l=t.some((function(e){return"selection"===e.path[0]})))})),t.addListener("update",(function(){var n,o,i,a,c,u,d,g,f,p,h=r.getBehavior("SelectionBehavior"),m=[],v=new e.Class.Collection([],{});if(l){for(l=!1,u=(c=h.getSelections())[0].concat(c[1]).concat(c[2]).concat(c[3]),d=h.getSelectionsWithPaths()[0],u.forEach((function(t){e.is(t)&&(g=s.getReferenceModel(t),e.is(g)&&v.add({ref:g}))})),n=t.selection.first;n;n=n.nextSel)n.type===Ve.Type.NODE&&(o=s.getReference(n.referencePID),n.instancePID,a=j(n.PID,d),i=n.childOccurencePath,a?v.forEach((function(e){e.get("ref").id===n.referencePID&&v.remove(e)})):p=o.get("PID"));v.forEach((function(e){m.push(e.get("ref").id)})),f={selectedNodeIds:m},e.is(p)&&(f.changed={nodeId:p,childOccurencePath:e.is(i)?i.split(","):null,isSelected:!0}),Se||r.notify("EGraphNodeSelect",f),Se=!1}}))},y=function(){var e,t,n;return(e=new Ve.EGraph).setViewOpts({addTopologicalIds:!0}),n=Oe.childNodes[0],e.addView("main",new Le.HTMLGraphView(n)),(t=new Ae.StateMachine(e,null,null,e.views.main)).rootState&&(t.rootState.doubleClickOnNode=ae,t.rootState.oncontextmenu=function(e,t){se(e,t)}),e.setZoomOpts({customMgt:!0}),t.state.onwheel=function(e,t){var r,o;t.inside&&(r=e.graphView).zoominc&&(o=n.getBoundingClientRect(),r.zoominc(.5*t.wheelDelta,t.clientPos[0]-o.x,t.clientPos[1]-o.y))},e.updateLock(),e},C=function(){Le.HTMLNodeView.call(this)},b=function(){Le.SVGEdgeView.call(this)},z=function(e){var t=[],n=[],r=[],o=[];return e.forEach((function(e){switch(e.get("Type")){case 0:o.push(e);break;case 1:t.push(e);break;case 2:n.push(e);break;case 3:r.push(e)}})),[o,t,n,r]},S=function(t){for(var n,r,o,i,a,s,l,c,u,d,g=new e.Class.Collection([],{}),f=t.where({index:0}),p=0;f.length>0;){if(r=p,o=(n=f[0]).get("index"),f.shift(),void 0===g.findWhere({ref:n})){for(;void 0!==g.findWhere({y:r,x:o});)r++;g.add({y:r,x:o,ref:n}),p=r}for(c=n.get("links"),d=0;d<c.length;d++){for(u=c[d],r=p,o=(u=t.findWhere({PID:u[0]})).get("index");void 0!==g.findWhere({y:r,x:o});)r++;if(i=g.findWhere({ref:u}),a=g.findWhere({ref:n}),void 0===i){if(i=g.add({y:r,x:o,ref:u}),p=r,s=!1,r=a.get("y")-1,i.get("x")-a.get("x")>1){for(;!1===s;)for(s=!0,r++,l=a.get("x")+1;l<i.get("x");l++)void 0!==g.findWhere({x:l,y:r})&&(s=!1);for(l=a.get("x")+1;l<i.get("x");l++)g.add({y:r,x:l,ref:null});i.set({y:r}),a.set({y:r}),p=r}f.unshift(u)}else a.set({y:r}),p=r+1}}return g},w=function(e,t,n){var r;return 40,(r=new Ve.Connector).views.main=!0===n?new Le.SVGConnView("egraph_views_SVGConnView egraph_views_mySVGConnView"):0===be?new Le.SVGConnView("egraph_views_SVGConnView egraph_views_mySVGConnView_invisible"):new Le.SVGConnView,r.multiset(["cstr","attach"],e,["cstr","offset"],40),r},R=function(e){0===be?(e.data.out=w(Ve.BorderCstr.RIGHT,0,!0),e.data.out.id="in_"+e.id,e.appendConnector(e.data.out),e.data.in1=w(Ve.BorderCstr.LEFT,0,!0),e.data.in1.id="out_"+e.id,e.appendConnector(e.data.in1),e.data.outInstance=w(Ve.BorderCstr.BOTTOM,0,!1),e.data.outInstance.id="instance_"+e.id,e.appendConnector(e.data.outInstance)):(e.data.in1=w(Ve.BorderCstr.LEFT,0,!0),e.appendConnector(e.data.in1),e.data.in2=w(Ve.BorderCstr.LEFT,0,!0),e.appendConnector(e.data.in2),e.data.out=w(Ve.BorderCstr.RIGHT,0,!0),e.appendConnector(e.data.out))},E=function(t,n){var o,i,a,l,c,u,d,g,f,p,h,m=0,v=0,I=0,D=r.getBehavior("SelectionBehavior"),P=e.Class.Model.extend({idAttribute:"PID"});p=new e.Class.Collection([],{model:P}),f=D.getSelectionsWithPaths(),g=f[0].concat(f[3]),t.forEach((function(e,t){e.forEach((function(e,n){m=e.get("X"),d=500*t+40+150*(m+v),o=125*n+40,i=e.get("V_Name"),u=e.get("PPRTYPE"),c=e.get("PID"),a=Pe(),l=e.get("TYPE"),p.add({PID:c,referencePID:e.get("referencePID"),Node:x(d,o,i,u,c,a,l,e)}),R(p.last().get("Node")),m>I&&(I=m)})),v+=I}));try{p._models.forEach((function(e){var t;n.addNode(e.get("Node")),g.forEach((function(r){h=s.getReferenceModel(r),t=0===r.path.length?h.get("PID"):r.path.join(","),e.get("Node").PID===t&&n.addToSelection(e.get("Node"))}))}))}finally{n.updateUnlock()}return p},N=function(t,n){var r,o,i,a=0,s=0,l=new e.Class.Collection([],{});t.forEach((function(t){o=t.get("ref"),e.is(o)&&(r=re(o,t.get("x"),t.get("y")),i=o.get("PID"),l.add({PID:i,Node:r}),R(l.last().get("Node")),a<150*t.get("y")&&(a=150*t.get("y")),s<450*t.get("x")&&(s=450*t.get("x")))}));try{l._models.forEach((function(e){n.addNode(e.get("Node"))}))}finally{n.updateUnlock()}return l},T=function(t,n,r){var o,i,a,l,c,u=null,d=null,g=function(t){return e.is(t,"array")&&0!==t.length},f=function(t){return v.filter((function(n){var r,o,i=n.get("Node");return e.is(i.childOccurencePath)&&(r=i.childOccurencePath.indexOf(t),o=i.childOccurencePath.slice(r)),e.is(o)&&o===t||i.referencePID===t}))},h=null,m=null,I=null,D=null,P=null,y=null,C=null;if(e.is(r)&&(C=r),c=C.get("PID"),e.is(we[c])||(we[c]={fromNodes:[],totalEdges:0}),e.is(t,"string")&&(u=(u=f(t)).filter((function(e){var t=e.get("Node").PID;return-1===we[c].fromNodes.indexOf(t)&&(we[c].fromNodes.push(t),!0)}))),e.is(n,"string")&&(d=f(n)),g(u)&&g(d))for(a=0;a<u.length;a++)for(h=u[a],e.is(h)&&(o=h.get("Node"),e.is(o)&&(I=s.getReference(o.referencePID),e.is(I)&&(P=I._attributes.PPRTYPE))),l=0;l<d.length;l++)m=d[l],e.is(m)&&(i=m.get("Node"),e.is(i)&&(D=s.getReference(i.referencePID),e.is(D)&&(y=D._attributes.PPRTYPE))),e.is(i)&&e.is(o)&&(P===y?(V(o.data.out,i.data.out,C,p),L(o.data.out,i.data.out,C,p)):o.actualLeft<i.actualLeft?(V(o.data.out,i.data.in1,C,p),L(o.data.out,i.data.in1,C,p)):(V(i.data.out,o.data.in1,C,p),L(o.data.in1,i.data.out,C,p)),we[c].totalEdges+=2)},M=function(t,n,i){var a,l,c;t.forEach((function(t){null!==t.get("isAggregatedBy")&&n.where({PID:t.get("PID")}).forEach((function(s){e.is(s)?(a=s.get("Node"),n.where({referencePID:a.isAggregatedBy}).forEach((function(t){l=t.get("Node"),e.is(a.childOccurencePath)&&(c=a.childOccurencePath.split(","),e.is(l.instancePID)?c.length>1&&c[c.length-2]===l.instancePID&&l.childOccurencePath.split(",")[0]===c[0]&&V(a.data.in1,l.data.outInstance,"Instance",i):l.referencePID===a.isAggregatedBy&&1===c.length&&V(a.data.in1,l.data.outInstance,"Instance",i))}))):r.warn(o.getNLSValue("GraphView.NodeWithPID")+t.get("PID")+o.getNLSValue("GraphView.NotExist"))})),t.get("LINKS").forEach((function(e){var t=e.get("from"),n=e.get("to"),r=e.get("type"),o=e.get("PID"),i=!0;"DELLmiTimeConstraintCnx"!==r&&"DELLmiMaterialPathCnxCust"!==r&&"LinearProductFlowCnx"!==r||(i=function(e,t,n){var r,o,i,a,l,c,u;if(c=(l=s.getConnection(n)).get("from"),u=l.get("to"),Array.isArray(c)&&(c=c.join()),Array.isArray(u)&&(u=u.join()),r=e.replace(c,""),o=t.replace(u,""),r.length>0&&o.length>0){if(r=r.split(","),o=o.split(","),i=r.length-1,r.length!==o.length)return!1;for(a=0;a<i;a++)if(r[a]!==o[a])return!1}return!0}(t,n,o)),i&&T(t,n,e)}))}))},B=function(e,t,n){var r,o,i,a;e.forEach((function(s){r=s.get("PID"),s.get("links").forEach((function(l){i=(i=t.findWhere({PID:r})).get("Node"),a=(a=t.findWhere({PID:l[0]})).get("Node"),o=e.findWhere({PID:l[0]}),s.get("loopNode")&&s.get("index")>o.get("index")?L(i.data.in1,a.data.in1,l[1],n):o.get("loopNode")?L(i.data.out,a.data.out,l[1],n):L(i.data.out,a.data.in1,l[1],n)}))}))},U=function(){var e;Z(),ne()?De().then((function(){e=X(),Y(e)})):K()},_=function(){new t(r).loadLinkGraphUI()},O=function(){var t,n=r.getElement(),i=o.getIconURLFromKey("Refresh"),a=o.getIconURLFromKey("Graph.LinksFilter"),s=e.createElement("div",{class:"canvas-gv",id:"canvas"+be.toString()}),l=e.createElement("img",{src:i,class:"GraphViewBar refresh-btn"}),c=e.createElement("img",{src:a,class:"GraphViewBar filter-btn"}),u=e.createElement("div",{class:"egraph-toobar"}),d=e.createElement("div",{class:"egraph-navigator"}),g=Oe.getElement("#canvas"+be.toString()),f=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","svg")),p=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","defs")),h=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","marker")),m=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","path"));return e.is(Oe)||(Oe=n),null!==g&&g.remove(0),f.appendChild(p),p.appendChild(h),h.appendChild(m),f.setAttribute("width","0"),f.setAttribute("height","0"),f.setAttribute("style","position:absolute;"),h.setAttribute("id","arrow-edge-end-marker"),h.setAttribute("markerWidth","10"),h.setAttribute("markerHeight","8"),h.setAttribute("refX","8"),h.setAttribute("refY","4"),h.setAttribute("orient","auto"),m.setAttribute("d","M 0 0 L 10 4 L 0 8"),m.setAttribute("fill","#777"),m.setAttribute("stroke","none"),m.setAttribute("z-index","10"),l.tooltipInfos=new Me({shortHelp:o.getNLSValue("GraphView.Refresh.Tooltip")}),l.addEvent("click",(function(){U()})),c.addEvent("click",_),s.addEvent("contextmenu",(function(t){e.Event.stop(t)})),s.setStyles({width:"100%",height:"100%","background-color":"white",position:"relatve"}),s.appendChild(f),ne()&&((t=le(D.id,D.path))&&(t.inject(d),d.inject(u)),u.inject(s)),e.is(I.showReloadAction)&&!0===I.showReloadAction&&(ne()?l.inject(u):l.inject(s)),e.is(I.showGraphViewFilter)&&!0===I.showGraphViewFilter&&c.inject(s),e.is(Oe)&&s.inject(Oe),Oe},W=function(e){var t,n,r;for(r=new Ee.BoundingRect,t=e.nodes.first;t;t=Ve.dftNext(e,t))r.update(t,t.actualLeft-300,t.actualLeft+t.actualWidth,t.actualTop,t.actualTop+t.actualHeight);r.xmax=r.xmax>800?800:r.xmax,r.ymax=r.ymax>2e3?2e3:r.ymax,n=Ee.reframeViewpoint(e.views.main.getSize(),r,{padding:15,minSize:50,horizontal:-1,vertical:-1,aliasing:0,defaultVpt:e.views.main.vpt,maxScale:1}),e.views.main.setViewpoint(n,!0)},Q=function(){return O(),Ee.inherit(C,Le.HTMLNodeView),0===be&&Ee.inherit(b,Le.SVGEdgeView),p=y()},G=function(){var t,n=[];return e.is(h)&&h.length>0?h:((t=g.getRoots(r.getId())).length>0&&(n=t[0].concat(t[1]).concat(t[2])),h=d.getEGraphDataToDisplay(n))},X=function(){var t;return e.is(D)&&e.is(D.id)&&(t=s.getReferenceModel(D.id),e.is(t)&&(h=d.getProductFlowDataToDisplay(t.id,D.path))),h},q=function(e){return S(e)},K=function(){var t,n;t=G(),we={},e.is(t)&&t.length>0&&(m=z(t),n=Q(),v=E(m,n),M(t,v,n),W(n),P(n))},Z=function(){e.is(Oe)&&e.is(Oe.childNodes[0])&&(Oe.childNodes[0].destroy(),p=void 0,h=void 0)},Y=function(t){var n,i;p=Q(),e.is(t)&&t.length>0&&((n=d.isProductFlowDataLooped(t))>0&&(i=1===n?"ProductFlowView.Loop":"ProductFlowView.MultipleLoop",r.warn(o.getNLSValue(i),undefined,"error")),Re=q(t),v=N(Re,p),B(t,v,p),W(p),P(p))},re=function(e,t,n){var r,o,i,a,s,l,c,u;return null!==e&&(c=450*t,u=150*n,o=e.get("V_Name"),i=e.get("PPRTYPE"),a=e.get("PID"),s=e.get("TYPE"),l=Oe.childNodes[0].childNodes[0].childNodes[0],(r=x(c,u,o,i,a,l,s)).childOccurencePath=e.get("childOccurencePath"),r.instancePID=e.get("instancePID"),r.PID=a),r},oe=function(e){var t,n,r,o=-1;t=d.getProductFlowGraphInstance(e,D.path),n=h.push(t),Re.forEach((function(e){e.get("y")>o&&(o=e.get("y"))})),o+=1,Re.add({y:o,x:0,ref:n}),r=re(n,0,o),R(r);try{p.addNode(r)}finally{p.updateUnlock()}},ie=function(e){var t,n=D.path.concat([e.get("PID")]).toString();for(t=p.nodes.first;t&&t.childOccurencePath!==n;t=t.next);t&&p.removeNode(t)},Ie=function(t,n){ne()&&(D.id=t,D.path=e.is(n,"string")&&n.length>0?n.split(","):n,Z(),De().then((function(){h=X(),Y(h)})))},ae=function(e){Ie(e.instancePID,e.childOccurencePath)},se=function(t,n){var i,a,s,l,c,u,d,g=n.grElt,f=[],h=n.clientPos[0],m=n.clientPos[1],v=r.getAppContext(),I=r.getBehavior("LinkBehavior"),D=function(){var t,n,r=!1;return e.is(p.selection.first)&&(t=p.selection.first.PID),e.is(p.selection.last)&&(n=p.selection.last.PID),e.is(t)&&e.is(n)&&(r=t===n),r};e.is(g)&&(g.type===Ve.Type.NODE?(e.is(g.gr.selection.first)&&g.gr.selection.first.PID!==g.PID?(p.removeFromSelection(g.gr.selection.first),p.addToSelection(g)):null===g.gr.selection.first&&p.addToSelection(g),(e.is(g.instancePID)?I.areRelationsLoaded(g.instancePID):I.areRelationsLoaded(g.referencePID))||(a="LoadRelations",s={icon:"url("+o.getIconURLFromKey(a)+")",label:o.getNLSValue("Cmd."+a+".Title"),sensitivity:"enabled",callback:function(){i=Be.getCommand(a,v),e.is(i)&&(i.beginExecute(),i.execute({sourceModuleId:r.getId()}),i.endExecute())}},f.push(s)),l="Relations",c={icon:"url("+o.getIconURLFromKey(l)+")",label:o.getNLSValue("Cmd."+l+".Title"),sensitivity:D()?"enabled":"disabled",callback:function(){i=Be.getCommandCheckHeader(l,v),e.is(i)&&!1===i.getState()&&(i.options.node={referencePID:g.referencePID,instancePID:g.instancePID,absPath:g.childOccurencePath.split(",")},i.toggleState())}},f.push(c),u="DisplayProperties",d={icon:"url("+o.getIconURLFromKey(u)+")",label:o.getNLSValue("Cmd."+u+".Title"),sensitivity:D()?"enabled":"disabled",callback:function(){i=Be.getCommandCheckHeader(u,v),e.is(i)&&!1===i.getState()&&(i.options.node={referencePID:g.referencePID,instancePID:g.instancePID,absPath:g.childOccurencePath},i.toggleState())}},f.push(d),Te.show({nodes:f},[h,m])):g.type===Ve.Type.EDGE&&e.is(g.mark.get("PID"))&&(H(n,g.mark.get("PID"),g.mark.get("from")),g.gr.selection.first=null,g.gr.selection.last=null))},le=function(t,n){var r,i,a,l,c,u=[],d=function(e,t,n){a&&u.unshift({label:a.get("V_Name"),icon:o.getIconURLFromKey(a.get("type")),id:t,childOccurencePath:n})};if(e.is(n,"string")&&(n=n.split(",")),0===n.length)d(0,(a=s.getReference(t)).get("PID"),[]);else for(c=n.length-1;c>=0;c--)l=n[c],a=s.getReferenceModel(l),d(0,l,n.slice(0,c+1)),0===c&&(i=s.getInstance(l),d(0,(a=s.getAggregatingReferenceModelFromInstance(i)).get("PID"),[]));return u.length>0&&(r=new Ne({value:u,mode:Ne.MODE.NAVIGATION})).addEventListener("selectionChange",(function(){var e=r.selectedValues[0];Ie(e.id,e.childOccurencePath)})),r},J=function(e,t,n){var r,o=[];for(n=n||!1,r=p.nodes.first;r&&(r[e]!==t||(o.push(r),n));r=r.next);return o},$=function(t,n){var r,o,i=[];for(o=p.nodes.first;o;o=o.next)o.isAggregatedBy===t&&(e.is(n)?((r=o.childOccurencePath.split(",")).pop(),(r=r.join())===n&&i.push(o)):i.push(o));return i},he=function(t){var n,r,o,i,a,l,c,u,g,f,I,D,P,y,C,b,S,w,L,A,E,N=0,T=function(e){var t;return 1===e.length&&(t=e[0]).multiset("top",t.top+125),t},M=function e(t){var n=0,r=s.getInstancesFromCollection(t);return 0===r.length?0:(r.forEach((function(t){n++,n+=e(t.get("isInstanceOf"))})),n)},B=function(){var n,r=t.get("V_Name"),o=e.is(D)?D:y,s=Pe();try{p.updateLock(),n=h.add({PID:o,X:c,Type:S,isAggregatedBy:t.get("isAggregatedBy"),childOccurencePath:D,instancePID:C,referencePID:y}),f=x(a,l,r,b,o,s,S,n),R(f),m[S].splice(i,0,n),v.add({PID:o,referencePID:y,Node:f}),p.addNode(f)}finally{p.updateUnlock()}},O=function(){B(),V(f.data.in1,P.data.outInstance,"Instance",p)};if(b=t.get("PPRTYPE"),!e.is(b)&&t.isInstance()&&(w=s.getReference(t.get("isInstanceOf")),b=w.get("PPRTYPE")),S="PRODUCT"===b&&t.isInstance()?function(){var e,n,r,o=0;for(e=0;e<m.length;e++)for(n=0;n<m[e].length;n++)if(r=m[e][n],t.get("isAggregatedBy")===r.get("referencePID"))return r.get("Type");return o}():d.getType(b),u=m[S].length,s.isReference(t))c=0,i=u,S>=1&&(N=function(e){var t,n,r=0;for(t=0;t<m[e].length;t++)(n=m[e][t]).get("X")>r&&(r=n.get("X"));return r}(S-1)),a=500*S+40+150*N,l=125*u+40,y=t.get("PID"),B();else{for(C=t.get("PID"),y=t.get("isInstanceOf"),n=0;n<m[S].length;n++)if(I=m[S][n],o=t.get("isAggregatedBy")===I.get("isAggregatedBy"),t.get("isAggregatedBy")===I.get("referencePID")||o){if(c=I.get("X"),0===(f=J("PID",I.get("PID"))).length)continue;if(f=f[0],L=$(I.get("referencePID"),I.get("childOccurencePath")).find((function(e){return e.instancePID===t.get("PID")})),e.is(L)){if(A=n,n+=M(I.get("referencePID")),e.is(i))for(r=A;r<=n;r++)E=m[S][r],T(J("PID",E.get("PID")));continue}if(o)n+=M(I.get("referencePID")),a=f?f.left:0;else{if(e.is(P))for(O(),n+=1,I=m[S][n],g=J("PID",I.get("PID")),f=T(g),r=n+1;r<m[S].length;r++)E=m[S][r],T(J("PID",E.get("PID")));c=I.get("X")+1,D=I.get("childOccurencePath"),D=e.is(D)?D+","+t.get("PID"):t.get("PID"),P=f,a=(f?f.left:0)+150}l=125*(i=n+1)+40}else!o&&e.is(i)&&(g=J("PID",I.get("PID")),f=T(g));O()}},me=function(t,n){var r,o,i=function(t,n){var r,o,i;return(i=(e.is(t,"array")?t.toString():t)===(o=e.is(n,"array")?n.toString():n))||(r=e.is(t,"array")?t:t.split(",")).length>0&&(i=r[r.length-1]===o||r.slice(1).join()===o),i};for(o=p.edges.first;o&&(r=o.next,!(e.is(o.mark,"object")&&i(o.mark.get("from"),t.get("from"))&&i(o.mark.get("to"),t.get("to"))&&(n--,o.remove(),0===n)));o=r);},ve=function(t,n){var r,o,i,a=s.getAllChildrenFromCollection(t);if(n=e.is(n)?n:"",e.is(a.instancesPID)&&(!a||0!==a.instancesPID.length))for(o=0;o<a.instancesPID.length;o++)i=n.length>0?n+","+a.instancesPID[o]:a.instancesPID[o],1===(r=J("childOccurencePath",i)).length&&(r=r[0],ve(r.referencePID,i),de(r))},ue=function(t){var n;t.get("isInstanceOf");n=t.isReference(),J(n?"referencePID":"instancePID",t.get("PID"),!0).forEach((function(t){e.is(t)&&(ve(t.referencePID,t.childOccurencePath),de(t))}))},de=function(t){var n;t.remove(),n=e.is(t.childOccurencePath)?t.childOccurencePath:t.referencePID,v.remove(n),ge(n)},ge=function(e){var t,n,r,o,i,a=!1;for(t=0;t<m.length;t++)for(n=0;n<m[t].length;n++)if(m[t][n].get("PID")===e&&(m[t].splice(n,1),a=!0),a){for(r=n;r<m[t].length;r++)i=m[t][r],1===(o=J("PID",i.get("PID"))).length&&(o=o[0]).multiset("top",o.top-125);return}},fe=function(){var e,t;for(e=p.selection.first;e;e=t)ve(e.referencePID),t=e.nextSel,Se=!0,e.remove()},pe=function(e){var t,n,r=e.changed;for(n=r.absPath.length>0?r.absPath.join(","):r.nodeId,t=p.nodes.first;t;t=t.next)if(t.PID===n||t.instancePID===n||t.childOccurencePath===n){Se=!0,r.isSelected?p.addToSelection(t):p.removeFromSelection(t);break}},ce=function(t){var n,r,o;if(e.is(p)){for(n=p.nodes.first;n&&(n.childOccurencePath.endsWith(t.get("from").toString())?r=n:n.childOccurencePath.endsWith(t.get("to").toString())&&(o=n),!r||!o);n=n.next);r&&o&&L(r.data.out,o.data.in1,t,p)}},De=function(){var t,n=r.getBehavior("LinkBehavior"),o=r.getBehavior("ModelBehavior"),i=[];return o.isNavigateOnDemand()?(i.push({id:D.id,path:D.path}),t=s.getReferenceModel(D.id),s.getInstancesFromCollection(t.get("PID")).forEach((function(e){i.push({id:e.get("PID")})})),n.getRelations(i)):e.Promise.resolve()},{viewName:"EgraphView",listenTo:function(){return{}},onStart:function(t,n){var r;t=t||{},e.is(t.displayNodeConfigXML)&&e.is(t.displayLinkConfigXML)&&(r=c.getXMLValues(t.displayNodeConfigXML),e.is(r.Config.Preferences)&&(ye=r.Config.Preferences),r=c.getXMLValues(t.displayLinkConfigXML),e.is(r.Config.Preferences)&&(Ce=r.Config.Preferences)),e.is(t.graphType)&&(be=t.graphType),I=t,n()},onStop:function(){Z()},updateLink:function(t){var n,o,i,a,l=r.getBehavior("LinkBehavior"),c=function(t){return t=e.is(t,"array")?t[t.length-1]:t,s.getInstance(t)};"SecondaryCandidateResourceLink"===t.get("type")&&(t=l.cloneSecondaryCapableRscLinkWithFromAttr(t)),ne()?(a=c(t.get("to")),i=c(t.get("from")),te(a)&&te(i)&&ce(t)):(n=t.get("from").toString(),o=t.get("to").toString(),T(n,o,t))},onChangeReference:function(e){var t,n,r,o;(e=Array.isArray(e)?e:[e]).forEach((function(e){t=e,ne()&&(l.isEntityInstance(e.get("type"))&&(n=e,t=s.getReferenceModelFromInstance(n)),v.where({PID:t.get("PID")}).forEach((function(e){e.get("PID")===t.id&&(r=e.get("Node"),n=s.getInstance(r.instancePID),(o=r.view.elts.node.getElementsByClassName("my-node-container")[0]).innerHTML="",F(t,n,o))})))}))},removeEGraphNode:function(e){0===be?ue(e):ne()&&te(e)&&ie(e)},removeLink:function t(n){var o,i,a,l=n.get("PID"),c=r.getBehavior("LinkBehavior"),u=function(t){return t=e.is(t,"array")?t[t.length-1]:t,s.getInstance(t)};"DELAsmProcessCanUseCnx"===n.get("type")&&s.getImpacted(l,!1,{relationTypes:["SecondaryCandidateResourceLink"]}).forEach((function(e){(e=e.clone()).set("from",n.get("from")),t(e)})),"SecondaryCandidateResourceLink"===n.get("type")&&(n=c.cloneSecondaryCapableRscLinkWithFromAttr(n)),0===be?(a=n.get("PID"),me(n,we[a].totalEdges),we[a]=void 0):ne()&&(i=u(n.get("to")),o=u(n.get("from")),te(i)&&te(o)&&me(n,2))},reparentInstances:function(e){var t,n=e.newInstPIDArray,r=e.movedInstPIDArray,o=this;Array.isArray(r)&&r.forEach((function(e){J("instancePID",e,!0).forEach((function(t){e===t.instancePID&&(ve(t.referencePID,t.childOccurencePath),de(t))}))})),Array.isArray(n)&&n.forEach((function(e){0===J("instancePID",e,!0).length&&(t=s.getInstance(e),o.addNodeNChildrenRecursive(t))}))},addEGraphNode:function(e){0===be?he(e):ne()&&te(e)&&oe(e)},addNodeNChildrenRecursive:function(t){var n,r=this,o=[];this.addEGraphNode(t),n=t.isReference()?t.get("PID"):t.get("isInstanceOf"),o=o.concat(s.getImpacted(n)),function t(n){var i,a;(i=s.getInstancesFromCollection(n)).sort((function(t,n){var r=t.get("V_TreeOrder"),o=n.get("V_TreeOrder");return(e.is(r)?r:0)-(e.is(o)?o:0)})),i.forEach((function(e){r.addEGraphNode(e),a=e.get("isInstanceOf"),o=(o=o.concat(s.getImpacted(e.id))).concat(s.getImpacted(a)),t(a)}))}(n),o.forEach((function(e){r.updateLink(e)}))},createGenericEGraphView:function(){var e={};r.notify("startProgress",e),K(),r.notify("stopProgress",e)},removeGenericEGraphView:function(){Z()},createProductFlowEGraphView:function(){var e,t={};r.notify("startProgress",t),D=ee(),De().then((function(){e=X(),Y(e),r.notify("stopProgress",t)}))},setLinkDisplayStatus:function(e,t){d.setLinkDisplayStatus(e,t)},getSupportedTypesOfLink:function(){return d.getCreatableTypesOfLink()},setGraphContainer:function(e){Oe=e},reload:function(){U()},hideSelectionNodes:function(){fe()},setTLVSelection:function(e){pe(e)},getCurrentEGraphView:function(){return p},getEGraphNodeByPropValue:function(e,t,n){return J(e,t,n)}}}}})),define("DS/DELPPWViewBehaviors_FD02/CrossHighlightBehavior/CrossHighlightTreeHelper",["UWA/Core","DS/DELPPWViewBehaviors_FD02/BulkTreeSearchHelper"],(function(e,t){"use strict";return function(n,r,o){var i=r.getWUXNodeModel(),a=new t(i,o);return{getNodeModels:function(e,t){return a.getNodeModels(e,t)},searchPathsPartially:function(e){return a.searchPathsPartially(e)},highlightNodes:function(e){var t;Array.isArray(e)&&e.length>0&&(t=a.getLastVisibleNodeModels(e)).length>0&&(i.prepareUpdate(),t.forEach((function(e){e.highlight()})),i.pushUpdate())},unHighlightAll:function(){var e=i.getHighlightedNodes();Array.isArray(e)&&e.length>0&&(i.prepareUpdate(),e.forEach((function(e){e.unhighlight()})),i.pushUpdate())},unSelectAll:function(){i.unselectAll()},getSelectedNodeIds:function(){return r.getSelectedNodesInfo().map((function(e){return e.absPath.length>0?e.absPath:e.id}))},fetchAllNearestDescendantsHavingImplLink:function(t){var r,o,i,s,l,c,u={nearestDescendants:[],descendantLinkMap:Object.create(null)},d=function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.forEach((function(e){l.push(e)}))};if((r=a.getNodeModels([t],!0)).found.length>0&&(o=r.found[0]),e.is(o))for(l=[],d(o);l.length>0;)s=(i=l.pop()).getAbsolutePath(),c=n.getImplementLinks(s),Array.isArray(c)&&c.length>0?(u.nearestDescendants.push(s),u.descendantLinkMap[s.toString()]=c):d(i);return u}}}})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/FormUI",["UWA/Core","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/FormEventHelper"],(function(e,t){"use strict";return function(n,r,o,i,a,s){var l,c=o.getComponent("Element"),u=o.getComponent("ComboBox"),d=o.getComponent("TreeDocument"),g=o.getComponent("TreeNodeModel"),f=o.getComponent("AutoComplete"),p=o.getComponent("LineEditor"),h=o.getComponent("Editor"),m=o.getComponent("Toggle"),v=o.getComponent("DatePicker"),I=o.getComponent("Accordeon"),D=o.getComponent("UnitsEditor"),P=o.getComponent("TooltipModel"),y=o.getComponent("RichTextEditor"),C=o.getComponent("InclusiveLineEditor"),b=o.getComponent("Chips"),S=!1,w=null,R=null,V={},L=new t,A="inline-container",E=function(t){var n=r.getPreferenceValue("separator"),o=new p({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:i.getNLSValue("FormUI.Placeholder.EnterAText")});return"Yes"===t.multiValue&&(o.placeholder=i.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:n}),o.autoCorrectFlag=!1),o.fieldType=t.fieldType,o.pattern=t.pattern,V[t.name]=o,o},N=function(t,n,r){var o,i,s,l=function(l){var c={};switch(l){case"magnitude":c.type="unitsEditor",c.value=a.getMagnitudeValue(n,r);break;case"multivalueRange":for(c.type="autoComplete",c.value=n,c.multiValue=!0,c.elementsList=[],o=0;o<r.AuthorizedValues.length;o++)s=a.getAuthorizedValueNLS(r,o),c.elementsList.push({label:s,value:a.getAuthorizedValueNLS(r,o)});r.labelMap=c.elementsList;break;case"range":for(c.type="select",c.value=a.isDate(r)?a.getFormattedDate(n):n,c.options=[],o=0;o<r.AuthorizedValues.length;o++)s=a.getAuthorizedValueNLS(r,o),c.options.push({label:s,value:a.getAuthorizedValueNLS(r,o)});break;case"multivalue":c.type="text",c.value=a.getValueAsString(n,a.getType(r),!1);break;case"date":c.type="date",c.value=e.is(n)&&"NULL"!==n&&""!==n?a.getDate(n):null,"datetime"===c.displayType&&(c.timePickerFlag=!0);break;case"multivalueDate":c.type="text",i=(i=a.getValueAsDateArray(n)).map((function(e){return a.getFormattedDate(e)})),c.value=a.getValueAsString(i,a.getType(r));break;case"boolean":c.type="checkbox",c.value="TRUE"===n;break;case"multiLine":c.type="textarea",c.value="NULL"===n?"":n,c.pattern=a.getPattern(r),c.rows="6";break;case"richTextEditor":c.type="richTextEditor",c.value="NULL"===n?"":n;break;case"inclusiveLineEditor":c.type="inclusiveLineEditor",c.value=n,c.unit=r.unit,c.step=a.isDouble(r)?.1:1;break;case"chips":c.type="chips",c.value=n;break;default:c.type="text",a.isDouble(r)||a.isInteger(r)?c.value=a.getValueAsString(n,a.getType(r),!1):c.value="NULL"===n?"":n,c.pattern=a.getPattern(r)}return e.extend(t,c)};return t=a.hasMagnitude(r)?l("magnitude"):a.isMultiValuated(r)?a.hasRangeDefined(r)?l("multivalueRange"):a.isDate(r)?l("multivalueDate"):l("multivalue"):a.hasRangeDefined(r)?l("range"):a.isBoolean(r)?l("boolean"):a.isDate(r)?l("date"):a.isMultiLine(r)?l("multiLine"):a.isString(r)&&"richTextEditor"===t.displayType?l("richTextEditor"):(a.isInteger(r)||a.isDouble(r))&&"inclusiveLineEditor"===t.displayType?l("inclusiveLineEditor"):"chips"===t.displayType?l("chips"):l("text")},T=function(t,n,r){var o=t,i=function(e){var t="",n=new Date(e);return isNaN(n.getTime())||(t=Math.floor(n.getTime()/1e3)),t.toString()};return a.isMultiValuated(n)?(o=a.getValueAsArray(t),a.isDate(n)&&(o=a.hasRangeDefined(n)?o.map((function(e){return t=e,n.labelMap.some((function(e){return t===e.label&&(r=e.value,!0)})),r;var t,r})):o.map((function(e){return i(e)})))):a.isBoolean(n)?o="true"===t?"TRUE":"FALSE":a.hasRangeDefined(n)?o=a.getAuthorizedValue(n,null,t):a.isDate(n)&&(t="NULL"!==t&&e.is(t)?t:"",o=i(t)),o},M=function(t){var n=new h({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:i.getNLSValue("FormUI.Placeholder.EnterAText")});return n.fieldType=t.fieldType,V[t.name]=n,n},B=function(e){var t=new m({type:"switch",checkFlag:e.value,value:e.value,disabled:e.disabled});return t.fieldType=e.fieldType,V[e.name]=t,t},O=function(t){var n=e.is(t)?new v(t):new v;return n.fieldType=t.fieldType,V[t.name]=n,n},F=function(t,n,r){var o,i,s,l=[],c={};if(e.is(n)&&(s=V[n],e.is(s)&&"select"===s.fieldType)){for(i=0;i<t.AuthorizedValues.length;i++)o=a.getAuthorizedValueNLS(t,i),l.push({labelItem:o,valueItem:a.getAuthorizedValueNLS(t,i)});c.elementsList=l,c.value=e.is(r)?r:s.value,s.setProperties(c)}},x=function(t,n){var r,o,i=[];for(o=0;o<t.elementsList.length;o++)i[o]={labelItem:t.elementsList[o].label,valueItem:t.elementsList[o].value};return(r=new u({elementsList:i,actionOnClickFlag:!1,enableSearchFlag:!0,value:t.value,disabled:t.disabled,generateRegexString:function(e){return e}})).fieldType=t.fieldType,V[t.name]=r,e.is(n,"function")&&r.addEventListener("change",n.bind(null,V)),r},k=function(t,n){var r,o,i;return o=new d({}),t.elementsList.forEach((function(e){i=new g({label:e.label,value:e.value}),o.addChild(i)})),r=new f({elementsTree:o,actionOnClickFlag:!1,enableSearchFlag:!1,multiSearchMode:t.multiValue}),e.is(t.value,"array")&&t.value.length>0&&(r.value=t.value),r.fieldType=t.fieldType,V[t.name]=r,e.is(n,"function")&&r.addEventListener("change",n),r},U=function(t){var n,o,a=r.getPreferenceValue("separator");return n="null"!==t.value?t.value:"",o=new D({value:n,requiredFlag:t.mandatory,disabled:t.disabled,placeholder:i.getNLSValue("FormUI.Placeholder.EnterANumber"),pattern:"^[-+e]?[0-9e]+(.[0-9e]+)?$",autoCorrectFlag:!1}),e.is(t.magnitudeText,"string")&&o.setUnit(t.magnitudeText),"Yes"===t.multiValue&&(o.placeholder=i.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:a}),o.pattern="^(([0-9])+(.[0-9]*){0,1}|)*((([0-9])*(.[0-9]*){0,1})[0-9])$",o.autoCorrectFlag=!1),o.fieldType=t.fieldType,V[t.name]=o,o},_=function(e){var t=new y;return""!==e.value&&t.setData(e.value),t.fieldType=e.fieldType,V[e.name]=t,t},W=function(e){var t=new C(e);return t.fieldType=e.fieldType,V[e.name]=t,t},j=function(t){var n=new b({value:t.value,uniqueValue:!0,disabled:t.disabled});return n.addEventListener("change",(function(t){e.is(t)&&t.stopPropagation()})),n.fieldType=t.fieldType,V[t.name]=n,n},H=function(t){var n,r,o,i={};for(r in V)Object.prototype.hasOwnProperty.call(V,r)&&(o=s.getAttributeInfo(r),e.is(r)&&!V[r].getContent().getParent().isHidden()&&("select"===V[r].fieldType?n=T(V[r].currentValue,o):"autoComplete"===V[r].fieldType?n=V[r].value?T(V[r].value.join("|"),o):T(V[r].value,o):"checkbox"===V[r].fieldType?(n=(n=V[r].checkFlag).toString(),n=T(n,o)):"date"===V[r].fieldType?n=T(V[r].value,o):"richTextEditor"===V[r].fieldType?n=V[r].getData():"inclusiveLineEditor"===V[r].fieldType?n=V[r].getValue():"chips"===V[r].fieldType?0===(n=V[r].value).length&&(n=""):n=T(V[r].valueToCommit,o),e.is(n)&&(i[r]=n)));return i},G=function(t,n){var r,o;L.setFieldsValue(H()),r=function(t){var n;if(e.is(L))return(n=t.findIndex((function(e){return L.isConditionMatch(e.condition)})))>-1?t[n]:void 0}(t),e.is(r)&&e.is(r.affectedAttributes)&&(o=r.affectedAttributes,Array.isArray(o)||(o=[o]),o.forEach((function(t){var r;e.is(V[t.fullName])&&(t.hide?V[t.fullName].getContent().getParent().hide():t.hide||(V[t.fullName].getContent().getParent().show(),e.is(t.updateAuthorizedListFrom)&&t.updateAuthorizedListFrom&&(r=s.getAttributeInfo(t.updateAuthorizedListFrom),F(r,t.fullName)),e.is(n)&&e.is(t.resetValue)&&function(e,t){var n=V[e];switch("defaultValue"===t&&(t=s.getAttributeInfo(e).DefaultValue),n.fieldType){case"checkbox":n.checkFlag=Boolean(t);break;case"select":n.selectedIndex=t;break;default:n.value=t}}(t.fullName,t.newValue)))})))},X=function(e,t){var n=e.events;Array.isArray(n)||(n=[n]),n.forEach((function(e){t.addEventListener(e.event,G.bind(null,e.conditions))}))},z=function(t,n){var r,o,i,a,s,l,c,u,d;for(e.is(t,"array")||(t=[t]),o=0;o<t.length;o++){switch(i=t[o],a=new e.Element("div",{class:"wux-field-container "+A}),new e.Element("h6",{class:"wux-textElement",text:i.label}).inject(a).tooltipInfos=new P({shortHelp:i.label}),s={name:i.name,value:i.value,mandatory:i.mandatory,disabled:i.disabled,fieldType:i.type,multiValue:i.multiValue,pattern:i.pattern},i.type){case"text":default:r=E(s);break;case"textarea":r=M(s);break;case"checkbox":r=B(s);break;case"date":l={timePickerFlag:i.timePickerFlag||!1},e.extend(s,l),r=O(s);break;case"select":l={elementsList:i.options},e.extend(s,l),r=x(s,i.attributeInfo.onChange);break;case"autoComplete":l={elementsList:i.elementsList},e.extend(s,l),r=k(s);break;case"unitsEditor":l={magnitudeText:i.magnitudeText,multiValue:i.multiValue},e.extend(s,l),r=U(s);break;case"richTextEditor":r=_(s);break;case"inclusiveLineEditor":s.unit=i.unit,s.stepValue=i.step,r=W(s);break;case"chips":r=j(s)}r.inject(a),a.inject(n),e.is(i.events)&&X(i,r)}for(o=0;o<t.length;o++)c=t[o],u=void 0,d=void 0,u=c.events,d=V[c.name].getContent().getParent().isHidden(),e.is(c.events)&&!d&&(Array.isArray(u)||(u=[u]),u.forEach((function(e){"change"===e.event&&G.call(null,e.conditions)})))},q=function(t,n){var r=i.getNLSValue(t),o=new e.Element("div",{class:"accordeon-section-container"}).inject(w);new I({items:[{header:"Wrong NLS key"!==r?r:t,content:n,expandedFlag:!0}],style:"filled-separate"}).inject(o)},Q=function(t){var n,r,o,c,u,d,g,f=[],p=i.getNLSValue(R,null,"Type");for(e.is(t,"array")||(t=[t]),r=0;r<t.length;r++){if(n=t[r],o=e.is(n.attributeName)?n.attributeName:n.dicoType+"."+n.name,c=e.is(n.attributeInfo)?n.attributeInfo:s.getAttributeInfo(o),!e.is(c))return void(S=!0);d=a.getFullName(c),u=e.is(n.defaultValue)?n.defaultValue:e.is(l&&l[d])?l[d]:"PLMEntity.V_Name"===d&&R?p:a.getDefaultValue(c),g={name:a.getFullName(c),mandatory:n.mandatory,label:a.getNLS(c),attributeInfo:c,magnitudeText:a.getNLSForUnit(c),multiValue:c.MultiValuated,disabled:n.readOnly||a.isReadOnly(c),defaultValue:u},e.is(n.value)?u=n.value:e.is(n.objectToBeModified)&&(u=n.objectToBeModified.get(n.dataIndex),e.is(u)||(u=n.objectToBeModified.get(c.FullName))),a.isDate(c)&&(g.displayType="DateTime"===n.displayType?"datetime":"date"),a.isString(c)&&e.is(n.displayType)&&"richText"===n.displayType?g.displayType="richTextEditor":(a.isInteger(c)||a.isDouble(c))&&e.is(n.displayType)&&"inclusiveEditor"===n.displayType?g.displayType="inclusiveLineEditor":e.is(n.displayType)&&"chips"===n.displayType&&(g.displayType="chips",g.valueType=c.Type),g=N(g,u,c),e.is(n.events)&&(g.events=n.events),f.push(g)}return f},K=function(t,n){var o,i,a=new c("div",{class:"section-container"});for(o in!1===n.headerAccordean?a.inject(w):t.name||(t.name=""),t)if(e.is(o))switch(o.toLowerCase()){case"name":q(t[o],a);break;case"attribute":if(i=Q(t[o]),!e.is(i))return void r.debug("attributeInfo is not available");z(i,a)}a.addEvent("resize",(function(){var t,n,r,o;o=a.getElements(".wux-field-container"),(r=a.clientWidth)<290||r>290&&"block-container"===A?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(o)&&o.forEach((function(e){e.removeClassName(t),e.addClassName(n)}))}))},Z=function(t){var n,o=t.sections;for(n in o)if(e.is(n))switch(n.toLowerCase()){case"section":e.is(o[n])&&(Array.isArray(o[n])?o[n].forEach(K):K(o[n],t));break;case"formstyle":e.is(o[n])&&("Vertical"===o[n]?A="block-container":"Horizontal"===o[n]&&(A="inline-container"))}!0===S&&(S=!1,r.debug(i.getNLSValue("InsertCmd.WarningConfiguration")))};return{createUI:function(t){t=t||{},w=new c("div",{class:"data-collection-form-UI"}),e.is(t.renderTo)?(e.is(t.type)&&(R=t.type.split("/")[1]||""),e.is(t.defaultValues)&&(l=t.defaultValues),Z(t),w.inject(t.renderTo)):r.debug("no parent container is present to inject the mainContainer")},getFormStyle:function(){return A},destroy:function(){e.is(w)&&w.destroy(),V={}},getValues:function(){return H()},validate:function(){var t,n,r,o,a={result:!0,message:null,more:null},s=[],l=[];for(t in V)e.is(V[t])&&!V[t].getContent().getParent().isHidden()&&(o=i.getNLSValue(t),!0===V[t].requiredFlag&&""===V[t].value&&(a.result=!1,s.push(o)),e.is(V[t].pattern)&&(n=new RegExp(V[t].pattern),""===(r=e.is(V[t].valueToCommit)?V[t].valueToCommit:"")||n.test(r)||(l.push(o),a.result=!1)));return a.result||(s.length>0&&l.length>0?a.message=i.getNLSValue("ModelBehavior.CreateReference.Failure.Multiple",{missingFields:s.join(","),invalidFields:l.join(",")}):s.length>0?a.message=i.getNLSValue("ModelBehavior.CreateReference.Failure.ValueMissing",{fields:s.join(",")}):l.length>0&&(a.message=i.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidValue",{fields:l.join(",")}))),a},updateToDefaultValues:function(t){var n;for(n in V)e.is(V[n])&&e.is(t[n])&&(V[n].value=t[n])},updateAuthorizedList:function(e,t){F(e,t)}}}})),define("DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/ProcurementGroupingImplementation",["DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/AbstractGroupingClass","UWA/Core"],(function(e,t){"use strict";return function(n,r,o,i){var a,s,l,c=n.getBehavior("TreeListViewBehavior"),u=n.getBehavior("WUXNodeModelBehavior"),d=(n.getBehavior("SelectionBehavior"),function(e,n){var r=function(){},o=function(){};c.loadDocument(u.getWUXNodeModel()),u.addNode(n,{onAddToTreeListFail:r,onAddToTreeListComplete:o,fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1}),t.is(e,"array")&&e.length>0?e.forEach((function(e){u.addNode(e,{onAddToTreeListFail:r,onAddToTreeListComplete:o,fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1})})):(function(e,t){var n=t;!function e(t){var r=t.getInstancePID()||t.getReferencePID();Object.keys(n).filter((function(e){return n[e].parent===r})).forEach((function(n){var r,o,i;r=n.split("|")[1],o=n.split("|")[2],(i=u.addGroupingNode(r,t,null,!0,o)).hasChildren()&&i.getChildren().forEach((function(t){e(t)}))}))}(e)}(u.getNodeModel(n.get("PID"),!0),e),u.expandAllRoots())}),g=function e(n,r,o){var i,a,s,l={};if(t.is(n))t.is(n,"array")&&0!==n.length?(n.forEach((function(e){var n=e.get(r);t.is(l[r+":"+n])?l[r+":"+n].push(e):l[r+":"+n]=[e]})),n=l):Object.keys(n).forEach((function(t){var i="";t.contains(":")&&(i=t.split(":")[0]),"root"!==t&&i!==r&&(n[t]=e(n[t],r,o))}));else for((n={}).root=o[0],i=1;i<o.length;i++)a=(s=o[i]).get(r),t.is(n[r+":"+a])?n[r+":"+a].push(s):n[r+":"+a]=[s];return n},f=function(e){var t,n=!1,r="",o=!1,i=Object.keys(e);if(e.length>0&&(n=!0),i.length>0)for(t=0;t<i.length;t++)Number.isNaN(Number.parseInt(i[t]))&&(o=!0);return n&&o||!n&&!o?r="error":n?r="array":o&&(r="json"),r},p=function(e){var t=null,n=null;return l=e,o.isReference(l)?t=o.getAllChildrenFromCollection(l):(n=o.getReferenceIdFromInstance(l),t=o.getAllChildrenFromCollection(n)),o.getReferencesFromArray(t.referencesPID)},h=function(e,t){var n;return l=e,n=p(e),s=g(s,t,n)},m=function e(n,r){var o=[];return r&&"json"===f(r)&&Object.keys(r).forEach((function(i){var a,s="";"root"!==i&&(i.contains(":")&&(s=i.split(":")[0]),s===n?"array"===f(r[i])?(o=o.concat(r[i]),delete r[i]):"json"===f(r[i])?(a=r[i],Object.keys(a).forEach((function(e){t.is(o[e])?("array"===f(a[e])&&(o[e]=o[e].concat(a[e])),Number.isNaN(Number.parseInt(e))&&(o[e]=t.merge(o[e],a[e]))):o[e]=a[e]})),delete r[i]):console.error("ProcurementGroupingImplementation : wrong structure"):o[i]=e(n,r[i]))})),Object.keys(o).length>0&&(t.is(r)&&t.is(r.root)&&(o.root=r.root),r=o),r},v=function(e,n,r,i){var a,s,l,c,u,d,g=[],f=e,p=f;o.traverseInstanceModels(f,(function(e){g.push(e)})),g.length>0&&(a=function(e,n){var r={};return e.forEach((function(e){var o=n(e);t.is(r[o])?r[o].push(e):r[o]=[e]})),r}(g,r),Object.keys(a).forEach((function(e){l=a[e][0],u=i(l).split("|")[0],d=i(l).split("|")[1],s=p+"|"+u+" ("+a[e].length+")|"+d,c=[],a[e].forEach((function(e){c.push(e.get("PID"))})),n[s]={parent:f,children:c}})))};return a=new e,t.extend(a,{group:function(e,r,i){var a;a=u.getWUXNodeModel(),t.is(a)&&a.removeRoots(),c.loadDocument(a),t.is(i)?function(e,t,n){var r={};v(e,r,t,n),d(r,o.getReferenceModel(e))}(i,e,r):n.debug("GroupingViewBehavior._groupingPID is not set")},ungroup:function(){},groupByAttribute:function(e,t){return h(e,t)},ungroupByAttribute:function(e){return m(e,s)},updateDatagrid:function(e){t.is(e)&&"MBOM"===e.sourceId&&this.group()}})}})),define("DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/TreeNodeModel",["UWA/Core","UWA/Class","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/AbstractTreeNodeModel"],(function(e,t,n){"use strict";var r=function(t){t=t||{},n.call(this,t),this.object={},this.options.grid["ds6w:type"]=this.getReferenceType(),this.object.type=this.getReferenceType(),e.is(t.defType)&&(this.object.defType=t.defType)};return(r.prototype=Object.create(n.prototype)).constructor=r,r.prototype.updateBadge=function(e){this.prepareUpdate(),this.setBadges(e),this.pushUpdate()},r.prototype.setUpdatedByODM=function(e){this.options.isUpdateODMApplied=e,this.updateBadge({bottomRight:e?"update":""})},r.prototype.setRootFiltered=function(e){this.isRoot(!0)&&(this.options.isFiltered=e),this.updateBadge({bottomRight:e?"filter":""})},r.prototype.isRootFiltered=function(){var t=!1;return this.isRoot(!0)&&e.is(this.options.isFiltered,"boolean")&&(t=this.options.isFiltered),t},r.NODE_SOURCE=n.NODE_SOURCE,r})),define("DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/WUXNodeModelBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors_FD02/BulkTreeSearchHelper","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/TreeDocument","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/TreeNodeModel","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/Mutex"],(function(e,t,n,r,o,i){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","ImplementPlugin","KeyBindingPlugin","RootsPlugin","CfgColumnsPlugin","PlatformPlugin","DicoPlugin"],creator:function(a,s,l,c,u,d,g,f,p,h,m){var v,I,D,P,y,C,b,S,w,R,V,L,A,E,N,T,M,B,O,F,x,k,U,_,W,j,H,G,X,z,q,Q,K,Z,Y,J,$,ee,te,ne,re,oe,ie,ae,se,le,ce,ue,de,ge,fe,pe,he="noChildren",me="expanding",ve="partiallyExpanded",Ie="expanded",De="collapsed",Pe={virtualColumnID:null,sortOrder:null},ye=[],Ce=0,be=new r({useAsyncPreExpand:!0,shouldAcceptDrag:function(t){return e.is(t.getReferencePID)},shouldAcceptDrop:function(t){var n=t.dropNode;return!e.is(n)||e.is(n.getReferencePID)}}),Se=new n(be,l);(v=be.getXSO())&&v.onChange((function(t){var n,r,o,i,a,l,c,d,g,f=[],p=[],h=s.getBehavior("ViewBehavior");if(!se(t)){for(l=t.getInstancePID()||t.getReferencePID(),c=t.isSelected(),d=be.getSelectedNodes(),g=t.getAbsolutePath(),r=0,o=d.length;r<o;r++)i=d[r],e.is(i)&&e.is(i.getReferencePID)&&(a=i.getInstancePID()||i.getReferencePID(),"MANAGECAPABLERESOURCESMOD"===s.getId()&&(a=i.getLinkPID()),f.push(a),p.push({id:a,path:i.getAbsolutePath()}));u.setSelection(s.getId(),p),n={sourceId:s.getId(),selectedNodeIds:f,changed:{nodeId:l,isSelected:c,absPath:g}},e.is(E)&&!0!==t.from3DViewer?E.crossHighlight(l,g,c):t.from3DViewer=null,e.is(h)&&!0===c&&h.setActiveView(),s.notify("select",n)}})),N=function(){var t,n,r=function(){};t=function(t){var n,r,o,i,a;if(t.preventDefault(),t.stopPropagation(),o=function(){var t,n=be.getRoots();e.is(n)&&(t=n[0],e.is(t)&&t.select())},n=be.getSelectedNodes())if(i=n[0])if(i.hasChildren()||i.getNextBrother())i.getNextVisibleNode().select(),i.unselect();else{if(i.isRoot(!0))return i.unselect(),void o();for(a=i.getParent();a&&!a.getNextBrother()&&!a.isRoot(!0);)a=a.getParent();if(r=a.getNextBrother())r.select(),i.unselect();else{if(!a.getPreviousBrother())return i.unselect(),void o();a.getPreviousBrother().select(),i.unselect()}}else o();else o()},n=function(t){var n,r,o=be.getSelectedNodes(),i=function(){var t,n,r;t=be.getRoots(),e.is(t,"array")&&t.length>0&&(r=(n=t[t.length-1]).getVisibleChildren(!1,!0),(e.is(r,"array")&&r.length>0?r[r.length-1]:n).select())};if(t.preventDefault(),t.stopPropagation(),o)if(n=o[0]){if(0===n._rowID)return n.unselect(),void i();r=n.getPreviousVisibleNode(),n.unselect(),r.select()}else i();else i()},g.createHandler({domElement:s.getElement(),onTab:t,onDownArrow:t,onShiftTab:n,onUpArrow:n,onCtrlA:function(e){be.selectAll(),e.preventDefault(),e.stopPropagation()},onCtrlC:r,onCtrlV:r,onCtrlX:r,onSuppr:r,onBackspace:r})},T=function(t,n){var r,o;return n=n||!1,o=function(t){var r=[],o=null;return o=be.getTreeNodeModel(t[0]),e.is(o)&&0!==o.length?("Installation"!==o[0]._type&&"Transform"!==o[0]._type||o[0]._referencePID!==t[t.length-1]||(n=!0,t=[t[0]]),1===t.length?n&&(o=o[0]):t.length>1&&(o.forEach((function(e){var n,o,i,a,s=e;for(n=1;n<t.length;n++){for(i=s.getChildren(!0),a=!1,o=0;o<i.length;o++)if(i[o].getInstancePID()===t[n]){s=i[o],a=!0;break}if(!a)break}a&&r.push(s)})),o=r.length>0?n?r[0]:r:null),o):null},Array.isArray(t)&&t.length>0?r=o(t):e.is(t,"string")?(r=be.getTreeNodeModel(t,{returnFirstOne:n}),Array.isArray(r)&&r.length<1&&(r=null)):(s.debug("nodeId is not valid."),r=null),r},M=function(e,t){return Se.getNodeModels(e,t)},B=function(e){var t,n,r=be.getRoots(!0),o=null;for(n=r.length,t=0;t<n;t++)if(r[t].getReferencePID()===e){o=r[t];break}return o},O=function(){var e=be.getRoots();return Array.isArray(e)&&e.length<=0},F=function(n,r,i,a){var l,c,u,d,g,p=s.getBehavior("TaggerBehavior"),h=s.getBehavior("BIBehavior"),m=s.getBehavior("ExpandFilterBehavior"),v=!1,D={nodeOptions:{},taggerOptions:{}};return e.is(r)?(u=""!==(g=r.getAbsolutePath().toString())?g.concat(",",n.instancePID):n.instancePID,d=r.getRIRpath().join(",")+","+n.instancePID+","+n.referencePID):(u=n.referencePID,d=n.referencePID),h&&(D=h.getNodeOptions(u,d),e.merge(n,D.nodeOptions)),c=new o(n),e.is(r)?(!0===a&&(i=Ce++,v=!0),r.addChild(c,i,v)):(be.addRoot(c),e.is(m)&&m.setTagsWithExpandSynthesis(c.getReferencePID()),!0!==O()&&(l=s.getBehavior("DropZoneViewBehavior"),e.is(l)&&l.hide()),!0===I&&f.addRoot(s.getId(),c.getID())),e.is(n.fromXEN)&&(c.stringIdentifier=n.referencePID,c.fromXEN=n.fromXEN),x(c),p&&p.getNodeUpdatePromise({PID:c.getID(),Path:c.isRoot(!0)?c.getReferencePID():c.getAbsolutePath().toString(),event:"add",externalTags:[D.taggerOptions]}).then((function(){t.resolve()})),c},x=function(t){var n=!1;e.is(t.fromXEN)&&t.fromXEN&&(n=t.fromXEN),(e.is(P)||e.is(C)||e.is(y))&&(d.getScopeLinksOfImplementing(t.getID(),n).length>0?k(t,P.badgeIcon):d.getPartialScopeLinksOfImplementing(t.getID(),n).length>0?k(t,C.badgeIcon):d.getResultingProductLinksOfImplementing(t.getID(),n).length>0&&k(t,y.badgeIcon))},ae=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)||/[/]?((\.|\.\.)*?([/]))*?(([a-zA-Z0-9_ ]+)\/)*?([a-zA-Z0-9_ ]+)\.([a-z]{2,})/.test(e)},k=function(t,n){var r=e.is(n)?c.getIconURLFromKey(n):"",o={bottomLeft:ae(r)?{iconPath:r,iconSize:{width:"16px",height:"16px"}}:""};Array.isArray(t)?t.forEach((function(e){e.updateBadge(o)})):t.updateBadge(o)},Z=function(e,t){var n,r,o=null;if(t&&(r=t.getChildren(!0),Array.isArray(r)&&r.length>0))for(n=0;n<r.length;n++)if(e===r[n].options.instancePID){o=r[n];break}return o},ue=function(t,n){var r,o,i,a=s.getBehavior("TreeListViewBehavior"),c=s.getBehavior("GraphViewBehavior");return n=n||{},r=o=a.getReferenceNodeOptions(t),e.is(c)&&(i=c.getReferenceNodeOptions(t),r.grid=e.merge(o.grid,i.grid)),e.is(n.fromXEN)&&(r.fromXEN=n.fromXEN),!n.fromXEN&&(l.needToQueryForChildren(t)||e.is(n.forceIntializeChildren)&&n.forceIntializeChildren)&&(r.children=[]),F(r)},de=function(t,n,r,o,i){var a,c,u,d,g=s.getBehavior("TreeListViewBehavior"),f=s.getBehavior("GraphViewBehavior");return i=i||{},a=r.getAbsolutePath().concat(t.get("PID")),c=u=g.getInstanceNodeOptions(n,t,a),e.is(f)&&(d=f.getInstanceNodeOptions(n,t),c.grid=e.merge(u.grid,d.grid)),(l.needToQueryForChildren(n)||e.is(i.forceIntializeChildren)&&i.forceIntializeChildren)&&(c.children=[],e.is(i.fromXEN)&&(c.fromXEN=i.fromXEN)),T(c.referencePID,!0),i.isFlatView?F(c,null,o,i.isFlatView):F(c,r,o,i.isFlatView)},_=function(t,n,r){var o,i,a,c,u,d,g,f=r||{},p=s.getBehavior("TreeListViewBehavior"),h=e.is(f.onEndAddToNodeList,"function")?f.onEndAddToNodeList:null,v=!0;if(e.is(h)&&delete f.onEndAddToNodeList,g=function(t,n){a.getRoot(!0).isRootFiltered()?J(a):l.needToQueryForChildren(t)?J(a,ve):J(a),e.is(h)&&h(t,n)},!e.is(t,"string"))return s.debug("_addToNodeModelListRecursive: invalid PID."),void g(null,null);if(e.is(p)){if(d=function(){W(a,f),g(o,a)},e.is(n))if(i=l.getInstance(t),e.is(i)){if(o=l.getReferenceModelFromInstance(i),!e.is(o)||m.isAKindOf(o,"Document"))return;a=Z(t,n),e.is(a)&&(a.getReferencePID()!==i.get("isInstanceOf")?(c=a._getLocalID(),n.removeChild(a)):(v=!1,u=p.getUpdateNodeOptions(i,a),z(t,u),U(i,a.getAbsolutePath()))),v&&(a=T(f.rootId,!0),f.rootNode=a,a=de(i,o,n,c,f))}else o=l.getReference(t);else(o=l.getReference(t))&&(e.is(f.loadRootOnly)&&f.loadRootOnly&&(f.expandLevel=0),a=T(t,!0),e.is(a)&&(a.isRoot(!0)||e.is(f.updateItem)&&!0===f.updateItem)?(u=p.getUpdateNodeOptions(o),z(t,u)):a=ue(o,f));f.loadChildren?i?d():!S&&l.needToQueryForChildren(o)?e.is(f.loadRootOnly)&&f.loadRootOnly&&!l.needToQueryForConnections(o)?d():a._expandState!=he&&(f=e.merge(f,{silentMode:!0}),J(a,me),l.getDescendantsFromServer(o.get("PID"),d,f)):!S&&e.is(f.withLinksResolved)&&f.withLinksResolved&&l.needToQueryForConnections(o)&&!0!==f.isFlatView?(J(a,me),l.findMissingLinkedObjects(o.get("PID"),d,f)):d():g(o,a)}else s.debug("treeListViewBehavior is undefined")},W=function(t,n){var r,o=n||{},i=e.is(o.filterQuery)?o.filterQuery:null,a=s.getBehavior("TreeListViewBehavior");e.is(t)&&t.removeChildren(),be.prepareUpdate(),r=l.getFilteredInstancesFromCollection(t.getReferencePID(),i),e.is(Pe)&&e.is(Pe.virtualColumnID)&&e.is(Pe.sortOrder)?a.getDataGridView().reapplySortModel():r=(r=(r=r.map((function(e,t){return{position:t,data:e}}))).sort((function(e,t){var n=e.data.get("V_TreeOrder"),r=t.data.get("V_TreeOrder");return n&&r?Number(n)-Number(r):e.position-t.position}))).map((function(e){return e.data})),r.forEach((function(e){_(e.id,t,o)})),be.pushUpdate()},$=function(e){var t,n=!1,r=e.getReferencePID();return l.needToQueryForChildren(r)||(t=l.getInstancesFromCollection(r),n=e.getChildren(!0).length===t.length),n},j=function(t){var n,r,o,i,a,u,d,g,f,p,h=null,m=!1,v={};if(u=function(){s.notify("startProgress",v),h.prepareUpdate()},d=function(t){h.preExpandDone(),h.pushUpdate(),e.is(t)&&""!==t&&J(h,t),s.notify("stopProgress",v),e.is(E)&&E.reHighlightMyView(),s.notify("onNodeExpanded")},o=function(){var t="";(!h.hasChildren()||!f||e.is(n.previousNodeState)&&n.previousNodeState[h.getReferencePID()]===ve)&&W(h,{loadChildren:!0}),h.hasChildren()||(t=he),d(t)},i=function(){s.warn(c.getNLSValue("Error.ExpandFailed.Title")),g.setAdditionalInfo({queriedForChildren:!1}),d(m?De:ve)},a=function(){s.warn(c.getNLSValue("Info.ExpandCanceled.Title")),g.setAdditionalInfo({queriedForChildren:!1}),d(m?De:ve)},e.is(t)&&e.is(t.data)&&e.is(t.data.nodeModel)){if(se(t.data.nodeModel))return void t.target.preExpandDone();if(n=t.data,h=n.nodeModel,g=l.getReference(h.getReferencePID()),e.is(g))if(u(),m=h.getRoot(!0).isRootFiltered(),S)d();else if(m)d();else{p=!!e.is(n.expandAll,"boolean")&&n.expandAll,f=!l.needToQueryForChildren(g);const t=pe(),s=new Set;t.length>0&&t.forEach((function(e){s.add(e.getReferencePID())})),"noChildren"!==h.options.expandState||h.hasChildren()?p&&s.size>0&&!s.has(g.get("PID"))||!p&&f?o():(r={ordered:!1,context:this,doNotExpand:!0,onFailure:i,onTimeout:i,onCancel:a},p&&(r.expandLevel=-1),l.getDescendantsFromServer(g.get("PID"),o,r)):h.hasChildren()||d(he)}}},H=function(){e.is(E)&&E.reHighlightMyView()},G=function(){s.notify("onNodeCollapsed")},X=function(t,n={}){if(e.is(n.label)&&t.setLabel(n.label),e.is(n.attributes))if(e.is(t._getRowID()))t.updateOptions({grid:n.attributes});else for(const[e,r]of Object.entries(n.attributes))t.options.grid[e]=r;x(t)},z=function(e,t){const n=t||{},r=Array.isArray(e)?T(e):T(e.split(","));if(Array.isArray(r)){be.prepareUpdate();for(let e of r)X(e,n);be.pushUpdate()}},q=function(e){e=e||{},be.withTransactionUpdate((function(){var t;for(t in e)Object.hasOwnProperty.call(e,t)&&z(t,{attributes:e[t]})}))},Q=function(e,t){var n;Array.isArray(e)&&e.length>0&&(n=be.searchTree(e)).length>0&&be.withTransactionUpdate((function(){n.forEach((function(e){e.removeAttribute(t)}))}))},U=function(t,n){var r,o,i,a=s.getBehavior("TreeListViewBehavior");if(be.prepareUpdate(),r=a.getRelationNodeOptions(t,n),e.is(r))for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i=r[o].attributes,e.is(i)&&z(o,{attributes:i}));be.pushUpdate()},K=function(t){var n,r,o,i,a=l.getReference(t.getReferencePID()),c=s.getBehavior("TreeListViewBehavior"),u=s.getBehavior("GraphViewBehavior");(e.is(t)||e.is(c))&&(t.isRoot(!0)?(n=o=c.getReferenceNodeOptions(a),e.is(u)&&(i=u.getReferenceNodeOptions(a),n.grid=e.merge(o.grid,i.grid))):(r=l.getInstance(t.getInstancePID()),n=o=c.getInstanceNodeOptions(a,r,t.getAbsolutePath()),e.is(u)&&(i=u.getInstanceNodeOptions(a,r),n.grid=e.merge(o.grid,i.grid))),t.updateOptions(n),x(t))},Y=function(t,n){const r=(o=n,e=>o.filter((t=>((e,t)=>e===t.getReferencePID())(e,t)||((e,t)=>!!(e=>!e.isRoot())(t)&&e===t.getInstancePID())(e,t))));var o;const i=s.getBehavior("CfgColumnsBehavior");if(e.is(i)){let e={data:[],pids:[]};be.prepareUpdate();try{i.getCombinedEntriesFromUpdatedAttributesObj(t).forEach((([t,n])=>{const o=i.trimAttributesBasedOnVisibleDataIndices(n),a=r(t);for(let e of a)X(e,{attributes:o});e.data.push(n),e.pids.push(t)})),s.notify("updateEffectivity",e)}finally{be.pushUpdate()}}},J=function(t,n){var r=n||null,o=t.getState();e.is(r)||(r=t.hasChildren()?t.isExpanded()?Ie:De:he),!0===t.fromXEN?t.setState({state:he}):r!==o&&(r===me?t._expandState="expandingState":t.setState({state:r}))},ee=function(n){return new t((function(t,r){e.is(n,"function")?setTimeout((function(){e.is(b)?b.acquire().then((function(){const o=n();e.is(o.then,"function")?o.then((function(){b.release(),t()})).catch((function(e){b.release(),r(e)})):(b.release(),r("promiseSupplier is not returning a Promise"))})):r("_mutex is not initialized")}),5):r("Given promiseSupplier is not a function")}))},te=function(n){var r=s.getBehavior("TreeListViewBehavior");r.isInverseRelationColumnPresent()&&ee((()=>new t((function(t,r){var o,i,a,c=new Set,u=[];(o=n.filter((function(t){var n=!1;return!!e.is(t.options.areInverseRelationColumnsFilled,"boolean")&&t.options.areInverseRelationColumnsFilled||(l.needToQueryForConnections(t.getReferencePID())||e.is(t.getInstancePID())&&l.needToQueryForConnections(t.getInstancePID()))&&(n=!0),n}))).length>0?(o.forEach((function(t){var n=t.getInstancePID();e.is(n)&&c.add(n),c.add(t.getReferencePID())})),c.forEach((function(e){u.push(e)})),a=M(u),(i=a.found).forEach((function(e){e.options.areInverseRelationColumnsFilled=!1})),l.getInverseConnectionsFromServer(u,{onComplete:function(){i.forEach((function(e){K(e),e.options.areInverseRelationColumnsFilled=!0})),s.notify("nodesUpdatedInAsync",s.getId()),t()},onFailure:function(e){r(e)}})):t()})))).catch((function(e){s.log("Inverse Relation Column update failed. Reason: "+e)}))},ne=function(t,n){let r,o=null,i={};const a=function(){let t;return e.is(o)?t=o:(t=n.filter((function(e){return!se(e)})),o=t),t};h.isExpandFetchFetchEnabled()&&"Index"===s.getPreferenceValue("navigateOnIndex")&&!l.isAuthoringMode()&&te(a());const c=s.getBehavior("AltSubBIBehavior");e.is(c)&&c.isCmdActive()&&c.showBIStatus(a());const u=s.getBehavior("CfgColumnsBehavior");e.is(u)&&u.isAnyCfgColumnVisible()&&re(a());const d=s.getBehavior("OperationTimeBehavior");e.is(d)&&d.isColumnVisible()&&(r=a().map((e=>e.getReferencePID())),i=e.extend(i,d.getUpdateOptionsForVisibleNodes(r),!0)),Object.keys(i).length>0&&q(i)};const we=e=>t=>{be.prepareUpdate();for(let n of t)n.updateOptions({areCfgColumnsFilled:e});return be.pushUpdate(),t};return re=function(n){const r=we(!0),o=we(!1),i=s.getBehavior("CfgColumnsBehavior");e.is(i)&&ee((()=>function(n,i){return new t(((t,a)=>{const s=i.filter((t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled)));if(s.length>0){o(s);const e=n.getNodeIdsObjAsPerExternalSpec(s);n.updateAttributes(e).then((e=>{Y(e,s),r(s),t()})).catch((function(e){a("Something failed while updating Cfg attributes in Tree: "+e)}))}else t()}))}(i,n))).catch((function(e){s.log("Updating Configuration columns failed. Reason: "+e)}))},oe=function(e){var t=T(e);Array.isArray(t)&&t.forEach(K)},ie=function(){var t;s.getBehavior("TreeListViewBehavior").has3DHideShowColumn()&&(t=be.getMatchingNodeModels((function(t){var n=t.options.hideShow3D,r=!1;return e.is(n,"boolean")&&(r=!1===n),r}))).length>0&&(be.prepareUpdate(),t.forEach((function(e){e.updateOptions({hideShow3D:!0})})),be.pushUpdate())},se=function(e){return e.getNodeSource()===o.NODE_SOURCE.GROUPING},le=function(e){return new o({label:c.getNLSValue(e),grid:{},useAsyncPreExpand:!1,referenceType:e+"Node",referencePID:e+"Node",hideShow3D:!0})},ce=function(e){const t=(e=>{const{found:t}=M([e]);return t})(e).filter((e=>!e.isRoot()));return t},L=function(e){var t=this;t.withTransactionUpdate((function(){e.forEach((e=>{t.selectNode(e)}))}))},A=function(e){var t=this;t.withTransactionUpdate((function(){e.forEach((e=>{t.unSelectNode(e)}))}))},fe=function(e,t,n){var r=l.getReference(e);n&&(Ce=0),t.addNode(r,{forceDBMode:!1,isFlatView:n,rootId:e}),n||t.expandAllRoots(),be.reapplyFilterModel()},ge=function(e){const{found:t}=M(e);return t},pe=function(){return be._xso.get()},{listenTo:function(){return{changeSortIndex:this.onChangeSortIndex,Hide:this.onHideRootNode,HideAll:this.onHideAll,visibleNodesChanged:ne,updateRelationsColumn:oe,Filter3DApplied:ie,selectNodes:L,unSelectNodes:A,updateNodes:q,unsetNodeAttr:Q}},onStart:function(t){var n=l.isNavigateOnDemand();I=!!e.is(t.registerRoots)&&t.registerRoots,D=e.is(t.withLinksResolved,"boolean")?t.withLinksResolved:!n,P=e.is(t.displayBadge)?t.displayBadge:null,y=e.is(t.displayBadgeRPL)?t.displayBadgeRPL:null,C=e.is(t.displayBadgePS)?t.displayBadgePS:null,w=be.onPreExpand(j),R=be.onPreCollapse(H),V=be.onPostCollapse(G),N(),E=s.getBehavior("CrossHighlightBehavior"),b=new i,S=!!e.is(t.noExpandServerCall,"boolean")&&t.noExpandServerCall},onStop:function(){be.empty(),e.is(R)&&(this.removeEventListener(R),R=void 0),e.is(V)&&(this.removeEventListener(V),V=void 0),this.removePreExpandListener(),b.destroy(),b=null},removePreExpandListener:function(){e.is(w)&&(this.removeEventListener(w),w=null)},validate:function(t){var n;return e.is(t)&&e.is(B(t.get("PID")))&&((n={}).key="AlreadyRoot",n.param="referenceName",n.paramValue=t.get("V_Name")),n},getNodeModel:function(e,t){return T(e,t)},getNodeInfo:function(t,n){var r,o=null,i=T(t,n);return r=function(e){return{label:e.getLabel(),referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),referenceType:e.getReferenceType(),absPath:e.getAbsolutePath()}},Array.isArray(i)?o=i.map(r):e.is(i,"object")&&(o=r(i)),o},addNodeModel:function(e,t){return F(e,t)},removeNode:function(t,n){var r=[],o=s.getBehavior("TaggerBehavior"),i=function(){var t=s.getBehavior("DropZoneViewBehavior");O()&&e.is(t)&&(t.setIcon(t.iconEnum.DROPHERE),t.show()),e.is(n,"function")&&n()};(e.is(t,"string")?be.searchTree(t):e.is(t,"array")?t:[t]).forEach((function(t){var n,i,a;e.is(o)&&(n=t.getAllDescendants(void 0,!0),e.is(n)&&(r=n.map((function(e){return{PID:e.getID(),Path:e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),event:"remove"}}))),r.push({PID:t.getID(),Path:t.isRoot(!0)?t.getReferencePID():t.getAbsolutePath().toString(),event:"remove"})),t.isRoot(!0)?(a=t.getID(),be.removeRoot(t),!0===I&&f.removeRoot(s.getId(),a),s.notify("removeRoot",a)):(i=t.getParent())&&i.removeChild(t)})),e.is(o)?o.getNodeUpdatePromise(r).then(i).catch(i):i()},removeNodes:function(e,t){var n;Array.isArray(e)?(n=be.searchTree(e),this.removeNode(n,t)):t()},hideNodes:function(t){var n,r,o=[],i={};e.is(t,"array")&&t.length>0&&(n=s.getBehavior("ExpandFilterBehavior"),e.is(n)&&n.resetFilterUI(),o=t.filter((function(t){return e.is(t)&&t.isRoot(!0)})),i={callback:this.removeNode,globalArray:o,context:this,blockSize:50},be.prepareUpdate(),be.getXSO().empty(!1),l.getExecuteByBlockPromise(i).then((function(){var t=[];be.pushUpdate(),e.is(o,"array")&&o.length>0&&(o.forEach((function(e){var n=l.getReference(e.getID());t.push(n)})),s.notify("hideRootNode",[t])),r=f.getRoots(),e.is(r,"array")&&0===r.length&&l.resetCollections()})))},onHideRootNode:function(){this.hideNodes(be.getSelectedNodes())},onHideAll:function(){this.hideNodes(be.getRoots(!0))},updateCfgColumnsForCommandUpdates:function(e,n){const r=we(!0),o=ge(e);o.length>0&&ee((()=>(Y(n,o),r(o),t.resolve()))).catch((function(e){s.log("Updating Configuration columns failed. Reason: "+e)}))},onChangeSortIndex:function(t){var n=be.getTreeNodeModel(t.get("PID"));e.is(n)&&(n.setAttribute("sortIndex",t.get("sortIndex")),n.getParent().sortChildren({isRecursive:!1,sortFunction:function(e,t){return e.options.grid.sortIndex<t.options.grid.sortIndex?-1:1}}))},isSelected:function(t){var n=T(t,!1),r=!1;return e.is(n,"array")&&(r=n.some((function(e){return e.isSelected()}))),r},isNodeAdded:function(t){var n=T(t,!0);return e.is(n)},selectNode:function(t){var n=T(t,!1);e.is(n,"array")&&n.forEach((function(e){e.isSelected()&&e.unselect(),e.select()}))},unSelectNode:function(t){var n=T(t,!1);e.is(n,"array")&&n.forEach((function(e){e.isSelected()&&e.unselect()}))},updateBadge:function(t,n){var r;Array.isArray(t)?(r=be.searchTree(t),e.is(r)&&k(r,n)):e.is(t)&&(r=T(t,!1),e.is(r)&&k(r,n))},getWUXNodeModel:function(){return be},unSelectAll:function(){be.unselectAll()},withTransactionUpdate:function(e){be.withTransactionUpdate(e)},prepareUpdate:function(){be.prepareUpdate()},pushUpdate:function(){be.pushUpdate()},getRoots:function(){return be.getRoots(!0).map((function(e){return e.getReferencePID()}))},getRootNodes:function(){return be.getRoots(!0)},getChildren:function(t){var n=T(t,!0),r=[];return e.is(n)&&(r=n.getChildrenPID()),r},getAllDescendants:function(){return be.getAllDescendants(!0)},getVisibleNodesInViewport:function(){var t,n,r,o,i=s.getBehavior("TreeListViewBehavior").getTreeListViewManager(),a=[];if(e.is(i))for(r=(n=i.getDataGridViewLayout().getMinMaxVisibleRowIDs()).minRowID,t=i.getDataGridViewModel();r<=n.maxRowID;r++)o=t[r],se(o)||a.push(o);return a},getSelectedNodes:function(){return pe()},getHighlightedNodes:function(){return be.getHighlightedNodes()},getSelectedNodesInfo:function(){return this.getSelectedNodes().map((function(e){return{id:e.getID(),absPath:e.getAbsolutePath()}}))},update3DNodeOptions:function(e){var t=this.getSelectedNodes();t.length>0&&(be.prepareUpdate(),t.forEach((function(t){t.updateOptions({hideShow3D:e})})),be.pushUpdate())},emptyNodeModel:function(){var t,n=s.getBehavior("ExpandFilterBehavior");if(e.is(n)&&n.clear(),be.prepareUpdate(),e.is(be)){const e=this.getSelectedNodes();Array.isArray(e)&&e.length>0&&be._xso.empty(),be.empty()}be.pushUpdate(),be._numberOfNodesInDocument<1&&(t=s.getBehavior("DropZoneViewBehavior"),e.is(t)&&t.show())},addEventListener:function(e,t){return be.getModelEvents().addEventListener(e,t)},removeEventListener:function(e){be.getModelEvents().unsubscribe(e)},addNode:function(t,n){var r,o,i,a,c,u=n||{},d=e.is(u.loadRootOnly,"boolean")?u.loadRootOnly:s.getPreferenceValue("loadRootOnly"),g=!e.is(u.loadChildren,"boolean")||u.loadChildren,f=!e.is(u.silentMode,"boolean")||u.silentMode,p=e.is(u.withLinksResolved,"boolean")?u.withLinksResolved:D,h=!!e.is(u.doNotExpand,"boolean")&&u.doNotExpand,m=!!e.is(u.forceDBMode,"boolean")&&u.forceDBMode,v=!!e.is(u.updateItem,"boolean")&&u.updateItem,I=e.is(u.onAddToTreeListFail,"function")?u.onAddToTreeListFail:null,P=e.is(u.onAddToTreeListComplete,"function")?u.onAddToTreeListComplete:null,y={noTimeout:!0},C=!!e.is(u.fromXEN,"boolean")&&u.fromXEN,b=!e.is(u.loadRelatedobjectsToView,"boolean")||u.loadRelatedobjectsToView;a=function(t,n){var r="";e.is(n)&&(r=n.getLabel(),g&&!n.isExpanded()&&n.expand(),K(n),s.notify("addRootNode",[n.getID(),{loadRelatedobjectsToView:b}])),s.notify("stopProgress",y),e.is(P,"function")&&P(t,r)},c=function(n){var r=be.getTreeNodeModel(t.get("PID"));s.notify("stopProgress",y),Array.isArray(r)&&r.length>0&&r.forEach((function(e){e&&e.getState()===me&&(J(e,De),e.options.children=[])})),e.is(I,"function")&&I(n)},(u=e.merge(u,{loadChildren:g,silentMode:f,withLinksResolved:p,forceDBMode:m,updateItem:v,onFailure:c,loadRootOnly:d,fromXEN:C})).isFlatView=!!e.is(u.isFlatView,"boolean")&&u.isFlatView,be.prepareUpdate(),t.isReference()?(s.notify("startProgress",y),u.onEndAddToNodeList=a,_(t.get("PID"),null,u)):t.isInstance()&&(o=l.getAggregatingReferenceModelFromInstance(t),i=l.needToQueryForChildren(o),e.is(o)&&(r=be.searchTree(o.get("PID")),e.is(r)&&r.length>0&&r.forEach((function(e){var n,r={noTimeout:!0};s.notify("startProgress",r),n=e.getState(),_(t.get("PID"),e,u),i?(J(e,ve),h=!0):n===De?$(e)||(J(e,ve),h=!0):n===ve&&(J(e,ve),h=!0),h||e.isExpanded()||e.expand(),s.notify("stopProgress",r)})))),be.pushUpdate()},addOccurences:function(t){var n,r,o=[],i={},a=[],c=[];n=function(t,n){e.is(i[t])||(i[t]=[]),i[t].push(n)},r=function(t,n){var r=t.getState();e.is(n)&&n===ve?J(t,ve):r===De&&($(t)?t.expand():J(t,ve))},t.forEach((function(e){o=o.concat(e.filter((e=>o.indexOf(e)<0)))})),be.searchTree(o).forEach((function(t){var r=t.getReferencePID(),o=t.getInstancePID();e.is(r)&&(n(r,t),a.indexOf(r)<0&&a.push(r)),e.is(o)&&c.indexOf(o)<0&&c.push(o)})),t.forEach((function(e){e.forEach((function(t,o){var u,d,g,f,p,h;0===o?(d=e[o],a.indexOf(d)<0?(f=l.getReference(d),h=ue(f,{forceIntializeChildren:!0}),J(h,ve),n(d,h),a.push(d),s.notify("addRootNode",[d])):i[d].forEach((function(e){r(e)}))):o%2!=0&&(c.indexOf(t)<0?(u=e[o-1],d=e[o+1],g=i[u],f=l.getReference(d),p=l.getInstance(t),g.forEach((function(e){var o=e.getState();h=de(p,f,e,null,{forceIntializeChildren:!0}),J(h,ve),r(e,o),n(d,h),c.push(t),a.indexOf(d)<0&&a.push(d)}))):(d=e[o+1],i[d].forEach((function(e){r(e.getParent())}))))}))}))},updateNodeODM:function(t,n){var r=T(t);n=n||{},e.is(r,"array")&&(be.prepareUpdate(),r.forEach((function(e){e.setUpdatedByODM(!0)})),be.pushUpdate())},updateNode:function(t,n){var r=T(t);n=n||{},e.is(r,"array")&&(be.prepareUpdate(),r.forEach((function(t){e.is(n.loadChildren)&&n.loadChildren&&(W(t,n),(t.isSelected()||t.isRoot(!0))&&t.expand()),K(t)})),be.pushUpdate())},updateAttributes:function(t){var n,r=s.getBehavior("TreeListViewBehavior");e.is(t)?(n=r.getUpdateNodeOptions(t),e.is(n)&&z(t.get("PID"),n),U(t)):s.debug("updateAttributes: Input model is undefined.")},updateDocAttributes:function(t){var n,r=s.getBehavior("TreeListViewBehavior");be.prepareUpdate(),n=r.getDocumentNodeOptions(t),e.is(n)&&z(t,n),be.pushUpdate()},reparent:function(t){var n,r,o,i,a,c,u,d=this,g={},f=function(e,t){return e.add(t)};e.is(t)&&(s.notify("startProgress",g),be.prepareUpdate(),i=t.formerParentsPIDArray,a=t.movedInstPIDArray,Array.isArray(i)&&(c=i.reduce(f,new Set),u=new Set,Array.isArray(a)&&(u=a.reduce(f,u)),c.forEach((function(e){var t;t=T(e),Array.isArray(t)&&t.forEach((function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.filter((function(e){return u.has(e.getInstancePID())})).forEach((function(t){e.removeChild(t)}))}))}))),n=t.newParentPID,r=t.newInstPIDArray,e.is(n,"string")&&(o=T(n),Array.isArray(o)&&(o.forEach((function(e){e.removeChildren()})),Array.isArray(r)&&r.forEach((function(t){var n=l.getInstance(t);e.is(n)&&d.addNode(n)})))),be.pushUpdate(),s.notify("stopProgress",g))},expandNode:function(e){var t=Array.isArray(e)?e:[e];t.length>1&&(t=t.filter((function(e,t,n){return e.getParents().every((function(e){return-1===n.indexOf(e)}))}))),t.forEach((function(e){e.expandAll()}))},collapseNode:function(e){var t,n;(Array.isArray(e)?e:[e]).forEach((function(e){n=e.getState(),e.hasChildren()&&n!==De&&(t=n,e.collapseAll(),t===ve&&(e.removeChildren(),J(e,ve)))}))},expandAllRoots:function(){be.getRoots(!0).forEach((function(e){e.expandAll()}))},isFilterAppliedInAnyRoot:function(){return be.getRoots(!0).some((function(e){return e.isRootFiltered()}))},filterChildren:function(t,n){var r,o=this,i=n||null,a=!!e.is(i),s=a?{filterQuery:i}:{};r=B(t),e.is(r)&&(r.setRootFiltered(a),be.withTransactionUpdate((function(){r.hasChildren()&&r.getChildren(!0).slice().forEach((function(e){o.removeNode(e)})),l.getFilteredInstancesFromCollection(r.getReferencePID(),i).forEach((function(e){o.addNode(e,s)})),a?l.needToQueryForChildren(r.getReferencePID())&&r.getState()===ve&&J(r):l.needToQueryForChildren(r.getReferencePID())&&r.getState()!==ve&&J(r,ve)})))},removeFilterFromAllRoots:function(){var t,n=this;return t=be.getRoots(!0).filter((function(e){return e.isRootFiltered()})),be.prepareUpdate(),t.forEach((function(e){e.setRootFiltered(!1)})),Se.traverseTreeListView((function(t){t.getState()===De&&(t.getChildren(!0).slice().forEach((function(e){n.removeNode(e)})),e.is(t.options.children)||(t.options.children=[])),J(t,ve)})),be.pushUpdate(),t.map((function(e){return e.getReferencePID()}))},isDocumentEmpty:function(){return O()},setTaggerColor:function(e,t){var n;Array.isArray(e)&&(n=M(e).found,Array.isArray(n)&&n.length>0&&(be.prepareUpdate(),n.forEach((function(e){e.updateOptions({color:t.color})})),be.pushUpdate()))},getMutex:function(){return b},updateNodeOptions:function(t,n){var r;(r=M(t).found).length>0&&(be.prepareUpdate(),r.forEach((function(t){var r=e.clone(n);t.updateOptions(r)})),be.pushUpdate())},setSortOptions:function(e,t){Pe.virtualColumnID=e,Pe.sortOrder=t},isFakeNodeModel:function(e){return se(e)},getGroupingNode:function(e){return le(e)},addGroupingNode:function t(n,r,i,a,u){var d,g=[],f=s.getBehavior("TreeListViewBehavior");return e.is(i)&&i.length>0?(g=i.map((function(e){var t;return t=e.isReference()?f.getReferenceNodeOptions(e):f.getInstanceNodeOptions(l.getReferenceModelFromInstance(e),e),new o(t)})),d=new o({label:c.getNLSValue(n),children:g,grid:{},useAsyncPreExpand:!1,referenceType:n+"Node",referencePID:n+"Node",hideShow3D:!1}),r.addChild(d)):e.is(a)&&a?(d=new o({label:c.getNLSValue(n),grid:{},icons:[c.getIconURLFromKey(u)]}),r.addChild(d)):(d=le(n),r.addChild(d),Object.keys(i).forEach((function(e){t(e,d,i[e])}))),d.isExpanded()||d.expand(),d},addNodeToGroupNode:function(e,t,n){var r,i;return r=s.getBehavior("TreeListViewBehavior").getReferenceNodeOptions(e),i=new o(r),t.addChild(i,n),i},getTreeDocument:function(){return be},showOverlay:function(){var t,n,r=c.getNLSValue("View.WaitMessage"),o=s.getBehavior("TreeListViewBehavior");if(e.is(o)){for(t=o.getDataGridView();ye.length>0;)ye.shift().resolve();n=e.Promise.deferred(),ye.push(n),t.displayModalLoader(r,(function(){n.promise.then((function(){t.removeModalLoader(r)}))}))}},removeOverlay:function(){1===ye.length&&ye.shift().resolve()},updateNodeState:function(e,t){J(e,t)},getWhereUsedInstanceIds:function(e){return ce(e).map((e=>e.getInstancePID()))},getWhereUsedInstanceIdsUnderParent:function(t){let n=[];const r=T(t);if(Array.isArray(r)&&r.length>0){const a=r.filter((t=>n=>e.equals(n.getAbsolutePath(),t))(t));if(1===a.length){const e=a[0];n=(i=e,i.getBrothers()).concat(e).filter((o=e.getReferencePID(),e=>e.getReferencePID()===o)).map((e=>e.getInstancePID()))}}var o,i;return n},resetConfigColumns:function(){const n=we(!1),r=(t,r)=>{const o=t.filter((t=>e.owns(t.options,"areCfgColumnsFilled")));o.length>0&&n(o),e.is(r,"function")&&r()},o=this;var i;(i=o.getAllDescendants(),new t((e=>{ee((()=>(e=>new t((t=>{const n={callback:r,globalArray:e,context:null,blockSize:100};l.getExecuteByBlockPromise(n).then((()=>{t()})).catch((()=>{t()}))})))(i))).then((function(){e()})).catch((function(t){s.log("Resetting Configuration columns failed. Reason: "+t),e()}))}))).then((function(){re(o.getVisibleNodesInViewport())}))},getFlattenNodeModel:function(t,n){var r=this;e.is(t)&&t.forEach((function(e){fe(e,r,n)}))}}}}})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/DataCollectionUI",["UWA/Core","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/FormUI","text!DS/DELPPWViewBehaviors_FD02/assets/json/TypeMapping.json"],(function(e,t,n){"use strict";return function(r,o,i,a,s,l,c){var u,d,g,f=null,p=null,h=null,m=null,v=null,I=null,D=null,P=null,y=null,C=null,b={},S=null,w=null,R=!1,V=!1,L=new e.Element("div",{class:"Form-Sections-Container"}),A=i.getComponent("ComboBox"),E=i.getComponent("Accordeon"),N=i.getComponent("TooltipModel"),T=e.Json.decode(n),M=function(t){var n;h=t.dsModel.currentValue,n=f.concat("/",h),u.type=n,C.destroy(),e.is(S)&&S.destroy(),null===w&&U(),_((function(e){W(e)})),u.onTypeChange(h,L)},B=function(t){m=t.dsModel.currentValue,C.destroy(),e.is(S)&&S.destroy(),null===w&&U(),_((function(e){W(e)}))},O=function(e){p=e.dsModel.currentValue,w.destroy(),w=null,M(e)},F=function(e){D=e.dsModel.currentValue},x=function(e){e.sort((function(e,t){return e.label.localeCompare(t.label,widget.lang,{numeric:!0})}))},k=function(t){var n,r,o=[];return n={elementsList:o=t.elementsList.map((function(e){return{labelItem:e.label,valueItem:e.value}})),actionOnClickFlag:!1,enableSearchFlag:!1},e.is(t.selected)&&(n.selectedIndex=o.findIndex((function(e){return e.valueItem===t.selected}))),(r=new A(n)).fieldType=t.fieldType,b[t.name]=r,e.is(t.onChange,"function")&&r.addEventListener("change",t.onChange),r},U=function(){var t=function(){var t,n,o,i,s,l,u,d,f,m,I,P,C,b,S,R,V={},T=[],O=[];e.is(y,"object")&&e.owns(y,h)&&(V=y[h]),C=function(t){let n={},r=[];if(e.is(V,"object")&&e.owns(V,"Type")&&(n=function(t,n){let r;return Array.isArray(t.Type)&&(r=t.Type.find((function(e){return e.name===n}))),e.is(r)?r:{}}(V,t)),e.is(n,"object")&&(e.owns(n,"visibility")&&"true"===n.visibility||!e.owns(n,"visibility")))if(P=c.getTypeInfo(t),c.isAKindOf(t,"Resource"))(e.owns(P,"isOOTB")&&"false"===P.isOOTB||e.owns(P,"Newable")&&function(e){let t=e.toUpperCase();return["NEW","ALL"].some((e=>t.includes(e)))}(P.Newable))&&r.push({value:t,label:a.getNLSValue(t,null,"Type")});else{let e=c.getTypeDicoNLSValue(t);r.push({value:t,label:""!==e||null!==e?e:a.getNLSValue(t,null,"Type")})}return r},T=T.concat(C(h)),e.is(p)&&p!==h?(T=T.concat(C(p)),I=c.getTypeHierarchy(p)):I=c.getTypeHierarchy(h),e.is(I,"array")&&I.forEach((function(e){e!==h&&(T=T.concat(C(e)))})),x(T),m=new e.Element("div",{class:"section-container"}),t=new e.Element("div",{class:"wux-field-container inline-container"}).inject(m),i=new e.Element("div",{class:"wux-field-container inline-container"}).inject(m),o=new e.Element("h6",{class:"wux-type-textElement",text:a.getNLSValue("General.Type")}).inject(t),n=k({name:"V_Type",elementsList:T,fieldType:"select",selected:h,onChange:M}),o.tooltipInfos=new N({shortHelp:a.getNLSValue("General.Type")}),n.inject(t),l=new e.Element("h6",{class:"wux-type-textElement",text:a.getNLSValue("General.Credentials")}).inject(i),s=function(){var t=r.getService("ConfigService").getSecurityContext(),n=t.getAllSC(),o=r.getConfig().isFacet&&!t.getSCFromPreferences().includes("ctx::")?"ctx::"+t.getSCFromPreferences():t.getSCFromPreferences(),i=new A({elementsList:n.map((function(e){return{labelItem:e.label,valueItem:e.value}})),actionOnClickFlag:!1,enableSearchFlag:!1,selectedIndex:n.findIndex((function(e){return e.value===o}))});return D=o,e.is(F,"function")&&i.addEventListener("change",F),i}(),l.tooltipInfos=new N({shortHelp:a.getNLSValue("General.Credentials")}),s.inject(i),["MASS","VOLUME","LENGTH","AREA"].forEach((e=>{O.push({value:e,label:a.getNLSValue(e,null,"Dimension")})})),-1===["ProcessContinuousProvide","ProcessContinuousCreateMaterial","ContinuousByProduct","DELContinuousServicePartReference"].indexOf(h)||e.is(v)||(f=new e.Element("div",{class:"wux-field-container inline-container"}).inject(m),u=new e.Element("h6",{class:"wux-type-textElement",text:a.getNLSValue("General.Magnitude")}).inject(f),d=k({name:"V_DimensionType",elementsList:O,fieldType:"select",selected:h,onChange:B}),u.tooltipInfos=new N({shortHelp:a.getNLSValue("General.Magnitude")}),d.inject(f)),b="Section.General",S=m,R=new e.Element("div",{class:"Type-Section-Container"}).inject(L),new E({items:[{header:a.getNLSValue(b)?a.getNLSValue(b):b,content:S,expandedFlag:!0}],style:"filled-separate"}).inject(R),S.addEvent("resize",(function(){var t,n,r,o;o=S.getElements(".wux-field-container"),(r=S.clientWidth)<290||r>290&&"block-container"===g?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(o)&&o.forEach((function(e){e.removeClassName(t),e.addClassName(n)}))})),w=R};e.is(y)?t():s.getXMLValues(r.getConfig().resource.ItemOOTBFiltering,(function(n){e.owns(T,o.getId())&&(y=n.convert("Config.Preferences."+T[o.getId()].section+".OOTBType","name")),t()}),(function(e){V=!0,o.debug("failed to get ItemOOTBFiltering XML. Error Desc: "+e)}))},_=function(t){var n=function(){var n,r,o=P[h]||{};if(e.owns(o,"Section")||(o.Section={},o.Section.name=a.getNLSValue("Section.Attributes"),o.Section.Attribute=[{dicoType:"PLMEntity",name:"V_Name",mandatory:!0},{dicoType:"PLMEntity",name:"V_description"}]),["ProcessContinuousProvide","ProcessContinuousCreateMaterial","ContinuousByProduct","DELContinuousServicePartReference"].indexOf(h)>=0){switch(m=e.is(v)?v:["MASS","VOLUME","LENGTH","AREA"].indexOf(m)>-1?m:"MASS"){case"LENGTH":n="DELFmiContQuantity_Length",r="DELFmiRefQuantity_Length";break;case"MASS":n="DELFmiContQuantity_Mass",r="DELFmiRefQuantity_Mass";break;case"AREA":n="DELFmiContQuantity_Area",r="DELFmiRefQuantity_Area";break;case"VOLUME":n="DELFmiContQuantity_Volume",r="DELFmiRefQuantity_Volume";break;default:n=null,r=null}o.Section.Attribute.forEach((e=>{"V_ContQuantity"===e.name?e.dicoType=n:"V_RefQuantity"===e.name&&(e.dicoType=r)})),e.is(d)&&!0===d&&(o.Section.Attribute=o.Section.Attribute.filter((function(e){return"instance"!==e.entity})))}t(o)};e.is(P)?n():s.getXMLValues(r.getConfig().resource.insertFormAttributeXML,(function(e){P=e.convert("AttributesDescriptionList.Type","name"),n()}),(function(e){R=!0,o.debug("failed to get insertFormAttribute XML. Error Desc: "+e)}))},W=function(n){C=new t(r,o,i,a,l,c),S=new e.Element("div",{class:"Form-container"}),C.createUI({sections:n,type:u.type,renderTo:S,defaultValues:I}),S.inject(L),g=C.getFormStyle()},j=function(){return R||V};return{createUI:function(t){u=t||{},e.is(u.type)&&e.is(u.renderTo)&&(R=!1,V=!1,h=u.type.split("/")[1]||"",f=u.type.split("/")[0],v=u.dimension,u.defaultValues&&(I=u.defaultValues[0]),e.is(u.createRoot)&&(d=u.createRoot),_((function(t){var n,r,o,i;e.is(u.baseTypes)&&(i=u.baseTypes.map((function(e){return{value:e,label:a.getNLSValue(e,null,"Type")}})),x(i),n=new e.Element("div",{class:"top-container inline-container"}).inject(L),r=new e.Element("h6",{class:"wux-type-textElement",text:a.getNLSValue("Base.Type")}).inject(n),o=k({name:"V_BaseType",elementsList:i,fieldType:"select",selected:u.selectedBaseType,onChange:O}),r.tooltipInfos=new N({shortHelp:a.getNLSValue("Base.Type")}),o.inject(n),p=u.selectedBaseType),U(),W(t)})),j()&&e.is(u.onFailure,"function")&&u.onFailure({invalidXML:!0}),L.inject(u.renderTo))},destroy:function(){e.is(C)&&C.destroy(),e.is(S)&&S.destroy(),e.is(L)&&L.destroy()},getValues:function(){var t,n={};return e.owns(b,"V_Type")&&(b.V_Type.currentValue?(n.V_Type=f.concat("/",b.V_Type.currentValue),n.type=h):(n.V_Type=b.V_Type,n.type=h),e.is(m)&&(n["DELFmiMagnitudeExt.V_DimensionType"]=m)),t=C.getValues(),e.extend(t,n),t},getSecurityContextOverride:function(){return D},validate:function(){return j()?{result:!1,message:a.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidXML")}:C?C.validate():{result:!0,message:null}},updateToDefaultValues:function(e){C&&C.updateToDefaultValues(e)}}}})),define("DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/UXFactoryBehavior",["UWA/Core","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/FormUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/SelectionControl","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/DataCollectionUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ImplementUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ImplementedRevChooserUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/MfgItemCreateReportUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ConfirmationDialog","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/MessageDialog"],(function(e,t,n,r,o,i,a,s,l){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","WebServicePlugin","AttributePlugin","DicoPlugin","DatabasePlugin","SelectionPlugin","ImplementPlugin","PlatformPlugin"],creator:function(c,u,d,g,f,p,h,m,v,I,D){var P=function(e,t){var n=[null].concat(t),r=d.getComponent(e);return new(Function.prototype.bind.apply(r,n))};return{onStart:function(){},onStop:function(){},getComponent:function(e){return d.getComponent(e)},showConfirmation:function(e,t,n,r,o){new s(this,o).show(e,t,n,r)},showMessage:function(e,t){new l(this,u).show(e,t)},showWithMessage:function(e,t,n){new l(this,u).showWithMessage(e,t,n)},createElement:function(){var e=Array.prototype.slice.call(arguments);return P("Element",e)},create:function(s,l){var y,C,b,S,w,R=[],V=Array.prototype.slice.call(arguments,1);switch(s){case"Panel":w=this.getComponent("WUXDockAreaEnum"),(y=new(d.getComponent("Panel"))(l)).allowedDockAreas=w.LeftDockArea|w.RightDockArea;break;case"Tree":y=new(d.getComponent("Tree"))({height:"inherit",width:"100%",apiVersion:2,selection:{toggle:!1,canMultiSelect:!1},styles:{height:"100%",width:"100%"}});break;case"Dialog":b=d.getComponent("WUXFrameWindowsManager").getFrameWindow(u.getAppContext()),C={position:{my:"center",at:"center"},immersiveFrame:c.getConfig().isFacet?c.getConfig().immersiveFrame:b.getImmersiveFrame()},e.extend(l,C),(y=new(d.getComponent("CustomDialog"))(l)).addEventListener("contextmenu",(function(e){e.preventDefault()})),e.is(y.buttons.Ok)?y.buttons.Ok._giveFocus():y.buttons.Cancel&&y.buttons.Cancel._giveFocus(),y.addEventListener("keypress",(function(e){"Enter"===e.key&&(y.buttons.Ok&&!y.buttons.Ok.disabled&&y.buttons.Ok._isFocused()?y.buttons.Ok.onClick():y.buttons.Cancel&&!y.buttons.Cancel.disabled&&y.buttons.Cancel._isFocused()&&y.buttons.Cancel.onClick())}));break;case"Filter":(Array.isArray(l.filterToolbarSections)?l.filterToolbarSections:["PROCESS","SERVICE","SYSTEM","RESOURCE","PART","PRODUCT","PARENT"]).forEach((function(e){"PARENT"===e?R.push({item:e,iconElemName:"CreateInstance",isSelected:!1}):R.push({item:e,iconElemName:e,isSelected:!0})})),S=R.reduce((function(t,n){var r=g.getNLSValue("PPRTYPE."+n.item),o=g.getIconElem(n.iconElemName),i=!!e.is(n.isSelected,"boolean")&&n.isSelected;return t[n.item]={text:r,tooltipText:r,title:o,pinned:i},t}),{}),y=new(d.getComponent("Segmented"))({multiSelect:!0,data:S});break;case"SelectionControl":(y=new n(c,u,d,g,h)).createUI(l);break;case"FormUI":(y=new t(c,u,d,g,p,h)).createUI(l);break;case"DataCollectionUI":(y=new r(c,u,d,g,f,p,h)).createUI(l);break;case"ImplementUI":(y=new o(c,u,this,g,m,v,I)).createUI(l);break;case"ImplementedRevChooserUI":(y=new i(c,u,this,g,m,D,v)).createUI(l);break;case"MfgItemCreateReportUI":(y=new a(c,u,this,g,m,d)).displayReport(l);break;default:y=P(s,V)}return y}}}}})),define("DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/StructuralGroupingImplementation",["UWA/Core","DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/AbstractGroupingClass"],(function(e,t){"use strict";return function(n,r){var o,i,a,s,l,c,u=new t,d=n.getBehavior("TreeListViewBehavior"),g=n.getBehavior("WUXNodeModelBehavior");n.getBehavior("SelectionBehavior");return o=function(e,t){var n=t;!function e(t){var o=t.getInstancePID()||t.getReferencePID();Object.keys(n).filter((function(e){return n[e].parent===o})).forEach((function(o){var i,a,s,l=n[o],c=n[o].groupingValue;s=l.children.map((function(e){return r.getInstance(e)})),i=o.split("|")[1],(a=g.addGroupingNode(i,t,s,c)).hasChildren()&&a.getChildren().forEach((function(t){e(t)}))}))}(e)},i=function(e,t){var n;d.loadDocument(g.getWUXNodeModel()),g.addNode(t,{onAddToTreeListFail:function(){},onAddToTreeListComplete:function(){},fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1}),n=g.getNodeModel(t.get("PID"),!0),o(n,e),g.expandAllRoots()},a=function(t,n){var r={};return t.forEach((function(t){var o=n(t);e.is(r[o])?r[o].push(t):r[o]=[t]})),r},l=function(e,t,n,o,i){var s,l,c,u,d,g=e,f=g,p=[];!function e(t,n){r.getInstancesFromCollection(t).forEach((function(t){n.push(t),d=r.getReferenceIdFromInstance(t.get("PID")),e(d,n)}))}(g,p),p.length>0&&(s=a(p,o),Object.keys(s).forEach((function(e){c=s[e][0],l=f+"|"+i(c)+" ("+s[e].length+")",u=[],s[e].forEach((function(e){u.push(e.get("PID"))})),t[l]={parent:n?g:undefined,children:u,groupingValue:e}})))},s=function e(t,n,o,i,s){var l,c,u,d,g,f,p=t,h=p;o||(p=r.getReferenceIdFromInstance(t),h=f=t),(u=r.getInstancesFromCollection(p)).length>0&&(l=a(u,i),Object.keys(l).forEach((function(e){d=l[e][0],c=h+"|"+s(d)+" ("+l[e].length+")",g=[],l[e].forEach((function(e){g.push(e.get("PID"))})),n[c]={parent:o?p:f,children:g,groupingValue:e}})),u.forEach((function(t){e(t.get("PID"),n,!1,i,s)})))},c=function(t,o,a){var c={},u=n.getBehavior("GroupingViewBehavior");e.is(u)&&u.isFlatView()?l(t,c,!0,o,a):s(t,c,!0,o,a),i(c,r.getReferenceModel(t))},e.extend(u,{group:function(t,r,o){var i;i=g.getWUXNodeModel(),e.is(i)&&i.removeRoots(),d.loadDocument(i),e.is(o)?c(o,t,r):n.debug("GroupingViewBehavior._groupingPID is not set")},ungroup:function(){}})}})),define("DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/GroupingViewBehavior",["UWA/Core","DS/CoreEvents/Events","DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/GroupingDialog","DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/ProcurementGroupingImplementation","DS/DELPPWViewBehaviors_FD02/GroupingViewBehavior/StructuralGroupingImplementation"],(function(e,t,n,r,o){"use strict";return{plugins:["UXComponentsPlugin","DatabasePlugin","ResourcePlugin","TreeViewPlugin","WebServicePlugin"],creator:function(i,a,s,l,c,u){var d,g,f,p,h,m,v,I,D,P,y,C,b=null,S=[],w=[],R=null,V=!1,L=["V_description.reference","V_Name","V_NeedDedicatedSystem.reference","V_TargetReleaseDate.reference"],A=function(){var t,n,r,o,i,s=a.getBehavior("WUXNodeModelBehavior"),c=a.getBehavior("TreeListViewBehavior"),d=a.getBehavior("SelectionBehavior"),g=u.getViewColumnPreferences(a.getId(),"MBOM.columnConfigPath"),f="";R=null,u.resetColumnsForGrouping(a.getId()),r=s.getWUXNodeModel(),e.is(r)&&r.removeRoots(),f+='{"label":{"filterId": "set"}',g.Columns.Column.forEach((function(e){f=f+',"'+e.dataIndex+'":{"filterId": "set"}'})),f+="}",r.setFilterModel(e.Json.decode(f)),c.loadDocument(r),n=d.getSelections(),o=e.is(n[2])?n[2].length:0,i=e.is(n[1])?n[1].length:0,o>0&&i>0||i>1?a.notify("MultipleOrNoObjectSelected","multipleObjects"):0===i?a.notify("MultipleOrNoObjectSelected","noObject"):e.is(m)&&1===i&&(t=l.getReferenceModel(m),s.addNode(t,{onAddToTreeListFail:function(){},onAddToTreeListComplete:function(){s.expandAllRoots()}}),a.notify("OneObjectSelected"))},E=function(e){"multipleObjects"===e?h.showErrorMessage(c.getNLSValue("Error.MultipleObjectsSelected")):h.showErrorMessage(c.getNLSValue("Error.NoObjectSelected"))},N=function(){h.showDatagrid()},T=function(){return e.is(R)},M=function(t,n){var r,o,i;P=n?{dataIndex:"V_Name.reference",title:c.getNLSValue("Column.Manufacturing")}:e.is(t)?t:e.is(R)?R:null,(e.is(P)||n)&&(r=function(e){var t,n,r=null;return 2===(t=e.split(".")).length&&(n=t[1],["reference","instance"].includes(n)&&(r={attributeName:t[0],modelType:n})),r}(P.dataIndex),e.is(r)&&(o=function(e){var t="reference"===r.modelType?l.getReferenceModelFromInstance(e):e;return n?t.get("PID"):t.get(r.attributeName)},i=function(t){var o,i,s="reference"===r.modelType?l.getReferenceModelFromInstance(t):t,c=r.attributeName;return"PID"!==c&&"physicalid"!==c||(c="reference"===r.modelType?"V_Name":"PLM_ExternalID"),e.is(b)||(b=a.getBehavior("ModelBehavior")),i=s.get(c),o=b.getTypeDicoNLSValue(i)||i,e.is(o)&&""!==o||(o="N/A"),n?o+"|"+s.get("type"):P.title+": "+o},v?f.group(o,i,m):p.group(o,i,m),n||(R=P),a.notify("GroupingApplied")))},B=function(e){var t=a.getBehavior("WUXNodeModelBehavior");e?(C=t.getRoots(),t.getFlattenNodeModel(t.getRoots(),e)):(t.emptyNodeModel(),t.getFlattenNodeModel(C,e)),T()&&M(null,!1)};return{listenTo:function(){return{activateProcurementGrouping:this.toggleProcurementGrouping,activateFlattenView:this.toggleFlattenView}},onStart:function(){f=new r(a,i,l,c),p=new o(a,l,c),S.push(i.addExternalListener("OneObjectSelected",N)),S.push(i.addExternalListener("MultipleOrNoObjectSelected",E)),v=!1,u.registerModuleForRecursiveGrouping(a.getId()),D=i.getPlugins("DatabasePlugin").instance,(I=a.getBehavior("WUXNodeModelBehavior").getTreeDocument()).options.shouldAcceptDrag=function(t){var n=e.is(t)?t:{},r=D.getPPRType(n.getReferencePID());return!!e.is(r)},I.options.shouldAcceptDrop=function(t){var n=e.is(t.dropNode)?t.dropNode:{},r=!1,o=D.getPPRType(n.getReferencePID());return"middle"===t.dropPosition&&(r=!e.is(o)),r}},onStop:function(){var e;for(e=0;e<S.length;e++)i.removeExternalListener(S[e]);for(S=[],e=0;e<w.length;e++)t.unsubscribe(w[e]);w=[],null,v=!1,u.resetColumnsForGrouping(a.getId()),u.unRegisterModuleForRecursiveGrouping(a.getId()),R=null},toggleProcurementGrouping:function(e){(v=e)?(B(!0),this.group(null,!0),T()&&this.group(null,!1)):(B(!1),T()&&this.group(null,!1))},toggleFlattenView:function(e){this.isFlatView(e),B(e)},showAttributeSelectionDialog:function(e){var t=a.getBehavior("UXFactoryBehavior");new n(a,t,s).show(e)},groupByAttribute:function(e,t){r.groupByAttribute(e,t)},group:function(e,t){M(e,t)},clearGrouping:function(){A(),V?this.toggleFlattenView(!0):v&&this.toggleProcurementGrouping(!0),a.notify("GroupingRemoved")},deleteFilters:function(){null,V=!1},displayView:function(e){switch(e){case"procView":f.group();break;case"structureView":p.group();break;default:A()}},setDatagridView:function(e){h=e},setGroupingPID:function(e){m=e},modifyAttribute:function(t){var n,r,o,s,u,f,p={onFailure:function(){},onSuccess:function(){B(!0===V),t.onComplete()}},h={forceDBMode:!0,onComplete:function(){b.updateModelAttribute(t[0].referencePID,s,r,p)}};if(L.indexOf(P.dataIndex)>-1)if(e.is(b)||(b=a.getBehavior("ModelBehavior")),e.is(g)||(g=a.getBehavior("WUXNodeModelBehavior")),e.is(y)||(y=i.getPlugins("AttributePlugin").instance),e.is(d)||(d=a.getBehavior("TreeListViewBehavior")),n=g.getNodeModel(t[0].target,1),r=n.grouping,o=d.getDataGridView().getColumnOrGroup(P.colId),s=y.getNodeAndColumnInfos(n,o),n=g.getNodeModel(t[0].target,1),r=n.grouping,s.objectToBeModified=b.getReferenceModel(t[0].referencePID),u=P.dataIndex.split(".")[0],V){if("V_NeedDedicatedSystem.reference"===P.dataIndex)r=y.getAuthorizedValue(s.attributeInfo,s.attributeDef,r);e.is(s.objectToBeModified.get(u))?b.updateModelAttribute(s.objectToBeModified.id,s,r,p):l.fetchRoot(s.objectToBeModified.id,h)}else g.getNodeModel(t[0].referencePID,1).getParent().getBrothers().forEach((function(e){e._id===n._id&&(f=!0)})),f?e.is(s.objectToBeModified.get(u))?b.updateModelAttribute(s.objectToBeModified.id,s,r,p):l.fetchRoot(s.objectToBeModified.id,h):a.warn(c.getNLSValue("GroupingModule.View.DndNOTPossible"));else a.warn(c.getNLSValue("GroupingModule.View.NotEditable"))},isFlatView:function(t){if(!e.is(t,"boolean"))return V;V=t}}}}}));