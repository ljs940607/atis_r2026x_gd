define("DS/DELWebOERLandingPageComp/DragAndDropPageComp",["DS/Utilities/Dom","DS/DELWebOERCommonUtils/DELWebBaseComponent","i18n!DS/DELWebOERLandingPageComp/assets/nls/LandingPage","css!DS/DELWebOERLandingPageComp/assets/css/DELWebLandingPage.css"],(function(e,t,i){"use strict";return class extends t{constructor(e){super(e),this.dropType=("del-web-dnd-/"+widget.id).toLowerCase(),this._mainDndContainer,this._dndContainer,this._overLayContainer,this._dnd={actual:null,count:0},this._dropHandlerIdentifier=e.onDrop,this._dropNotAllowedForTypes=[this.dropType],UWA.is(e.typeNotSupported,"array")&&(this._dropNotAllowedForTypes=this._dropNotAllowedForTypes.concat(e.typeNotSupported))}_deserializeDroppedData(e){var t,i,n,a,r,s,o={data:{items:[]}};for(i=UWA.is(e.dataTransfer.types.indexOf,"function")?"indexOf":"contains",t="",n=["text/searchitems","text/plain","Text"],a=0;a<n.length&&""===t;a++)r=e.dataTransfer.types[i](n[a]),(UWA.is(r,"number")&&r>=0||UWA.is(r,"boolean")&&!0===r)&&(t=n[a]);if(""!==t){s=e.dataTransfer.getData(t);try{o=JSON.parse(s)}catch(e){this.logger.error(e)}}return o}_onDragStart(e){e.dataTransfer.setData(this.dropType,!0)}_onDragEnter(t){var i,n;return t.dataTransfer&&UWA.is(t.dataTransfer.types,"array")&&t.dataTransfer.types.find((e=>this._dropNotAllowedForTypes.indexOf(e)>-1))?(this._dnd.count++,!0):(i=e.firstParentWithClass(t.target,"dropZoneGlobal"),0===this._dnd.count?(this._overLayContainer.show(),this._dndContainer.show()):i&&(n=i.querySelector(".dropZone"),this._dnd.actual!==n&&(this._dnd.actual&&this._dnd.actual.classList.remove("zoneHighlighted"),n.classList.add("zoneHighlighted"),this._dnd.actual=n)),this._dnd.count++,t.stopPropagation(),!1)}_onDragOver(t){return e.firstParentWithClass(t.target,"dropZoneGlobal")&&t.preventDefault(),t.dataTransfer&&UWA.is(t.dataTransfer.types,"array")&&t.dataTransfer.types.find((e=>this._dropNotAllowedForTypes.indexOf(e)>-1))&&(t.preventDefault(),t.dataTransfer.dropEffect="none"),t.stopPropagation(),!1}_onDragLeave(e){return this._dnd.count--,0===this._dnd.count&&(this._dndContainer.hide(),this._overLayContainer.hide()),e.target===this._dnd.actual&&(this._dnd.actual.classList.remove("zoneHighlighted"),this._dnd.actual=null),e.stopPropagation(),!1}_onDragEnd(e){return this._dnd.count=0,this._dnd.actual&&(this._dnd.actual.classList.remove("zoneHighlighted"),this._dnd.actual=null),this._dndContainer.hide(),this._overLayContainer.hide(),e.stopPropagation(),!1}_executeHandler(e={},t=!1){this._dropHandlerIdentifier&&this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:this._dropHandlerIdentifier,args:{data:e,withFilter:t}})}_onDrop(t){var i;return this._dnd.count=0,this._dndContainer.hide(),this._overLayContainer.hide(),t.stopPropagation(),t.defaultPrevented||(t.preventDefault(),this._dnd&&this._dnd.actual?(this._dnd.actual.classList.contains("dragAndDrop")?this._executeHandler(this._deserializeDroppedData(t),!1):this._dnd.actual.classList.contains("filter")&&this._executeHandler(this._deserializeDroppedData(t),!0),this._dnd.actual.classList.remove("zoneHighlighted"),this._dnd.actual=null):(i=e.firstParentWithClass(t.target,"dropZoneGlobal")).classList.contains("dragAndDrop")?this._executeHandler(this._deserializeDroppedData(t),!1):i.classList.contains("filter")&&this._executeHandler(this._deserializeDroppedData(t),!0)),!1}_initEventListners(){let e=document.querySelector(".wafr-uiframe.wux-afr-framewindow");e&&(e.addEventListener("dragstart",this._onDragStart.bind(this)),e.addEventListener("dragenter",this._onDragEnter.bind(this)),e.addEventListener("dragover",this._onDragOver.bind(this)),e.addEventListener("dragleave",this._onDragLeave.bind(this)),e.addEventListener("dragend",this._onDragEnd.bind(this)),e.addEventListener("drop",this._onDrop.bind(this)))}_removeEventListners(){let e=document.querySelector(".wafr-uiframe.wux-afr-framewindow");e&&(e.removeEventListener("dragstart",this._onDragStart.bind(this)),e.removeEventListener("dragenter",this._onDragEnter.bind(this)),e.removeEventListener("dragover",this._onDragOver.bind(this)),e.removeEventListener("dragleave",this._onDragLeave.bind(this)),e.removeEventListener("dragend",this._onDragEnd.bind(this)),e.removeEventListener("drop",this._onDrop.bind(this)))}async initialize(){var e,t,n,a,r;this._mainDndContainer=UWA.Element.create("div",{class:"del-dnd-containter"}),this._dndContainer=UWA.createElement("div",{class:"dnd-area"}).inject(this._mainDndContainer),this._overLayContainer=UWA.createElement("div",{class:"overlay-area"}).inject(this._mainDndContainer),this._overLayContainer.hide(),this._dndContainer.hide(),this._dndContainer.inject(this._mainDndContainer);let s=this.getComponentFromIdentifier(WAfrStandardComponentKey.UIFrame);for(this.uiFrame=s.getUIFrame(),s&&(this._welcomeScreenLayer=s.addLayer(this._mainDndContainer,{top:0,bottom:0,right:0,left:0,zIndex:50001,pointerEvents:"none"})),this._dnd={actual:null,count:0},this._initEventListners(),e=[{id:"dragAndDrop",icon:"drag-drop",title:i.get("DragAndDrop.Open.Title")},{id:"filter",icon:"filter-open",title:i.get("DragAndDrop.OpenWithFilter.Title")}],t=0;t<e.length;t++)n=UWA.createElement("div",{class:"dropZoneGlobal "+e[t].id,draggable:!1}),a=UWA.createElement("div",{class:"dropZone "+e[t].id,draggable:!1}).inject(n),r=UWA.createElement("div",{class:"dropIconAndText "+e[t].id}).inject(a),UWA.createElement("i",{class:"iconImg wux-ui-3ds wux-ui-3ds-4x wux-ui-3ds-"+e[t].icon}).inject(r),UWA.createElement("h5",{class:"title "+e[t].id,text:e[t].title}).inject(r),n.inject(this._dndContainer)}toggleVisibilty(e){UWA.is(e,"boolean")&&this._mainDndContainer&&(!0===e?this._mainDndContainer.show():this._mainDndContainer.hide())}async clean(){this._removeEventListners(),this._dndContainer&&(this._dndContainer.destroy(),this._dndContainer=null),this._overLayContainer&&(this._overLayContainer.destroy(),this._overLayContainer=null),await super.clean()}async destroy(){this.clean(),await super.destroy()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.toggleVisibilty=this.toggleVisibilty.bind(this),this.publicAPI}}})),define("DS/DELWebOERLandingPageComp/actions/StandardActions",["i18n!DS/DELWebOERLandingPageComp/assets/nls/LandingPage","DS/Logger/Logger"],(function(e,t){"use strict";const i={inAppsSearch:function(t){var i,n=require("UWA/Utils/InterCom"),a=require("DS/Utilities/Utils"),r={showApplyButton:!1,title:e.get("OpenContent.Title"),fts_value:t.search_criteria,search_criteria_to_display:"",default_search_criteria:t.search_criteria,mode:"furtive",default_with_precond:!0,idcard_activated:!1,advanced_search:{showByDefault:!1},tenant:"undefined"!=typeof widget&&null!==widget&&widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise"},s=Object.assign(r,t),o=new n.Socket(s.app_socket_id,{dispacthRetryInterval:0}),d=[],l=function(e){d=e.selected_objects,i=e.selected_command},c=a.debounce((function(){switch(i){case"in_app_ok":t.callback.call(null,d);break;case"in_app_apply":t.apply?t.apply.call(null,d):t.callback.call(null,d);break;default:t.cancel&&t.cancel.call(null)}o.removeListener("onCloseTransient",c),o.removeListener("InContextSearch_Response",l),o.dispatchEvent("UnregisterContext",{widget_id:s.widget_id})}),200);!0===t.debug_mode&&o.setDebugMode(!0),UWA.is(t.parent_window)?o.subscribeServer("SearchComServer",window):o.subscribeServer("SearchComServer"),o.dispatchEvent("RegisterContext",s),UWA.is(t.context_name)&&(s.context_title=t.context_name),o.dispatchEvent("InContextSearch",s),o.addListener("InContextSearch_Response",l),o.addListener("onCloseTransient",c)},searchAndOpen:async function(e,n){i.inAppsSearch({widget_id:n.executionContext.getWidgetID(),app_socket_id:n.executionContext.getWidgetID(),search_criteria:n.args&&n.args.search_criteria?n.args.search_criteria:"flattenedtaxonomies:types/DELFmiFunctionReference",callback:function(i){if(UWA.is(i)&&UWA.is(i,"array")&&i.length>0){let e={items:i.map((e=>({id:e.id,type:e["ds6w:type_value"],label:e["ds6w:label"],withFilter:!(!n.args||!UWA.is(n.args.withFilter,"boolean"))&&n.args.withFilter})))};n.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"open",data:e})}else t.error("The format of the data opened is not valid - ",i);e()}})},drop:async function(e,i){let n=i.args&&i.args.data?i.args.data:null,a=!(!i.args||!UWA.is(i.args.withFilter,"boolean"))&&i.args.withFilter;if(UWA.is(n)&&UWA.is(n.data)&&UWA.is(n.data.items,"array")&&n.data.items.length>0){let e={items:n.data.items.map((e=>({id:e.objectId,type:e.objectType,label:e.displayName,withFilter:a})))};i.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"open",data:e})}else t.error("The format of the data dropped is not valid - ",n);e()},mruOpen:async function(e,t){let i={items:[{id:t.args.id,withFilter:!!UWA.is(t.args.withFilter,"boolean")&&t.args.withFilter}]};t.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"open",data:i}),e()},toggleStatusBar:async function(e,t){if(t&&t.args&&UWA.is(t.args.state,"boolean")){t.executionContext.getComponent(WAfrStandardComponentKey.UIFrame)._privateSetStatusBarWrapperVisibility(t.args.state),window.localStorage.setItem("DELWebOERStatusBarState",t.args.state)}e()}};return i})),define("DS/DELWebOERLandingPageComp/MRUCache",["UWA/Core","UWA/Class","DS/DELWebOERCommonUtils/utils/CommonUtils"],(function(e,t,i){"use strict";const n="DELCommonUtilsServices";return t.extend({init:function(t){this.executionContext=t.executionContext||null,this._list=[];let a=i.getUserLogin(),r=this.executionContext&&this.executionContext.getComponent(n)?this.executionContext.getComponent(n).getPlatformId():null;this._key=e.is(a)&&e.is(r)?a+"/"+r+"/MRUData":"MRUData",this._parent(t)},get:function(){var e=widget.getValue(this._key);return e?JSON.parse(e):{ids:[]}},add:function(t){var i=this.get();e.is(t,"array")&&t.forEach((e=>{-1===i.ids.indexOf(e)&&i.ids.push(e)})),widget.setValue(this._key,JSON.stringify(i))},remove:function(t){var i=this.get();e.is(t,"array")&&t.forEach((e=>{var t=i.ids.indexOf(e);t>-1&&i.ids.splice(t,1)})),widget.setValue(this._key,JSON.stringify(i))},clear:function(){widget.deleteValue(this._key)}})})),define("DS/DELWebOERLandingPageComp/LandingPageComp",["UWA/Core","DS/WAfrUIComponents/mod_WelcomeScreenComponentImpl_v1","DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERLandingPageComp/MRUCache","DS/DELWebOERCommonUtils/mixins/IndexServicesMixin","DS/DELWebOERCommonUtils/utils/DictionaryUtils","i18n!DS/DELWebOERLandingPageComp/assets/nls/DELWebLandingPageMRU","text!DS/DELWebOERLandingPageComp/assets/json/Attributes.json"],(function(e,t,i,n,a,r,s,o){"use strict";const d=["thumbnail_2d"],l="DELCommonUtilsServices";class c extends t{constructor(t){super(t),i.call(this,t),this._attributes=t&&e.is(t.attributes,"array")?t.attributes:["ds6w:label"],this._constantsAttributes=JSON.parse(o),this._attributesMap=this._attributes.reduce(((e,t)=>({...e,[this._constantsAttributes[t].nlsKey]:t})),{})}async initialize(){let e=this;if(await super.initialize(),this._mruCache=new n({executionContext:this.getExecutionContext()}),await i.prototype.initialize.call(this),this.commonServicesComponent=e.getComponentFromIdentifier(l),!this.commonServicesComponent)throw new Error(`Common services component with identifier ${l} not found, please make sure ${l} component is available`);await this.setMRUData(this._mruCache.get()).fail((function(t){e.logger.debug(t),e.logger.error("Unable to show recent content"),e._mruCache.clear(),e.getNotificationManager().addNotif({level:"warning",message:s.get("RecentContentNotAvailable.Error.Message")})}))}_getMRUItems(t){let i=this,n={items:[],onHit:{simpleHit:!1,handler:"MRUOpen"},contextualMenu:{callback:function(t){return[{type:"PushItem",title:s.get("MRU.Open.Title"),fonticon:{content:"wux-ui-3ds wux-ui-3ds-open"},action:{callback:function(){i.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:"MRUOpen",args:e.merge(t,{withFilter:!1})})}}},{type:"PushItem",title:s.get("MRU.OpenWithFilter.Title"),fonticon:{content:"wux-ui-3ds wux-ui-3ds-filter-open"},action:{callback:function(){i.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent).executeHandler({id:"MRUOpen",args:e.merge(t,{withFilter:!0})})}}},{type:"PushItem",title:s.get("MRU.Remove.Title"),fonticon:{content:"wux-ui-3ds wux-ui-3ds-remove"},action:{callback:function(){i._removeMRUItem(t)}}}]}}};return new e.Promise(((a,o)=>{e.is(t.ids,"array")&&t.ids.length>0?i.getAttributeForIds(t.ids,Object.values(i._attributes),d).then((function(t){var o={[i._attributesMap.Type]:[],[i._attributesMap.MaturityState]:[]},d=function(e,t){o[e].find((e=>e.value===t))||o[e].push({value:t,source:["3DSpace"]})};e.is(t,"object")&&(Object.keys(t).forEach((function(e){t[e][i._attributesMap.Type]&&d(i._attributesMap.Type,t[e][i._attributesMap.Type]),t[e][i._attributesMap.MaturityState]&&d(i._attributesMap.MaturityState,t[e][i._attributesMap.MaturityState])})),r.getNlsOfSearchValuesBySource({nlsData:o,tenantId:i.commonServicesComponent.getPlatformId(),lang:i.commonServicesComponent.getLanguage()}).then((function(e){Object.keys(t).forEach((function(a){var r={id:a,title:t[a][i._attributesMap.Title]?t[a][i._attributesMap.Title]:"",image:t[a].preview_url,modified:t[a][i._attributesMap.ModificationDate]?new Date(t[a][i._attributesMap.ModificationDate]):"",custom:{tooltip:Object.keys(i._attributesMap).map((function(n){var r,o;switch(n){case"Type":o=t[a][i._attributesMap[n]],r={key:s.get("Tooltip."+n),value:e&&e[i._attributesMap.Type]&&e[i._attributesMap.Type][o]?e[i._attributesMap.Type][o]:""};break;case"MaturityState":o=t[a][i._attributesMap.MaturityState],r={key:s.get("Tooltip."+n),value:e&&e[i._attributesMap.MaturityState]&&e[i._attributesMap.MaturityState][o]?e[i._attributesMap.MaturityState][o]:""};break;case"ModificationDate":r={key:s.get("Tooltip."+n),value:t[a][i._attributesMap.ModificationDate]?new Date(t[a][i._attributesMap.ModificationDate]).toLocaleString():""};break;default:r={key:s.get("Tooltip."+n),value:t[a][i._attributesMap[n]]?t[a][i._attributesMap[n]]:""}}return r}))}};n.items.push(r)})),a(n)})))})).fail(o):a(n)}))}async _removeMRUItem(e){this._mruCache.remove([e&&e.id?e.id:""]),await this.setMRUData(this._mruCache.get())}setMRUData(t){var i=this;return new e.Promise((function(e,n){i._getMRUItems(t).then((function(t){i.setMRU(t),e()})).fail((function(e){i.logger.error("Failed to get MRU data ",e),n(e)}))}))}addMRUItems(t){var i=this;return new e.Promise((function(n,a){t&&e.is(t.ids,"array")&&t.ids.length>0?(i._mruCache.add(t.ids),i.setMRUData(i._mruCache.get()).then(n).fail(a)):(this.logger.warn("Invalid input, array of ids required as input"),a())}))}showWelcomeScreen(){if(!1===this.getExecutionContext().getWelcomeScreenState()){this.getComponentFromIdentifier(WAfrStandardComponentKey.UIFrame)._privateSetStatusBarWrapperVisibility(!1),super.showWelcomeScreen()}}hideWelcomeScreen(){let e=this.getComponentFromIdentifier("Viewer"),t=this.getComponentFromIdentifier(WAfrStandardComponentKey.UIFrame),i=window.localStorage.getItem("DELWebOERStatusBarState");if(e){let t=e.getStatusBar();t&&t.open()}t._privateSetStatusBarWrapperVisibility(!i||"true"===i),super.hideWelcomeScreen()}getExposedComponent(){return super.getExposedComponent(),this._publicAPI&&(this._publicAPI.addMRUItems=this.addMRUItems.bind(this),this._publicAPI.setMRUData=this.setMRUData.bind(this),this._publicAPI.showWelcomeScreen=this.showWelcomeScreen.bind(this),this._publicAPI.hideWelcomeScreen=this.hideWelcomeScreen.bind(this)),this._publicAPI}async clean(){await super.clean(),await i.prototype.clean.call(this)}async destroy(){await super.destroy,await i.prototype.destroy.call(this)}}return i.prototype.mixinProperties(c,i.prototype),i.prototype.mixinProperties(c,a),c}));