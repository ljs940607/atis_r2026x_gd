define("DS/XAppServices/XAppWelcomeScreenServices",["UWA/Class"],(function(e){"use strict";return e.singleton({callWhenWelcomeScreenViewIsReady:function(e,t){let n=function(){document.getElementsByClassName("afr-welcome-screen-title")?t():(console.log("WelcomeScreen DOM not ready, wait next tick"),requestAnimationFrame(n))};if(e){let t=e.getComponent("mod_WelcomeScreen");if(t)if("function"==typeof t.viewIsReady&&t.viewIsReady()||t._welcomeScreenView)n();else{let t=e.getComponent(WAfrStandardComponentKey.ModelEvents);if(t)return t.subscribeOnce({event:"EVT_WelcomeScreenReady"},n)}}}})})),define("DS/XAppServices/XAppDebugServices",["require","exports"],(function(e,t){"use strict";var n;return function(e){const t={},n=new Map,r=[];e.addFunction=(e,n)=>{t[e]||(t[e]=n)},e.addData=(e,t)=>{n.set(e,t)},e.addFunction("report",(()=>{let e={};e.Generated=Date();for(const[t,r]of n.entries())e[t]=r;return r.forEach((t=>{let n=t();n&&(Array.isArray(n)||(n=[n]),n.forEach((t=>{e[t.key]=t.value})))})),console.table(e),e})),e.addReportCallback=e=>{r.indexOf(e)<=0&&r.push(e)},window.widget&&(window.widget.xa=t),window.xa=t}(n||(n={})),n})),define("DS/XAppServices/XAppErrorsTracker",["UWA/Class"],(function(e){"use strict";return e.singleton({registerErrorsHandler:function(e,t,n){this._onErrorCB||(this._onErrorCB=this._onError.bind(this,e,t,n),["error","unhandledrejection"].forEach((e=>{window.addEventListener(e,this._onErrorCB)})))},unregisterErrorsHandler:function(){this._onErrorCB&&(["error","unhandledrejection"].forEach((e=>{window.removeEventListener(e,this._onErrorCB)})),this._onErrorCB=null)},_onError:function(e,t,n,r){var i={stackStr:"",errorMsgStr:"",module:"",file:"",lineNumber:void 0,columnNumber:void 0};if(r instanceof ErrorEvent?r.error?(r.error.message&&(i.errorMsgStr=r.error.message),r.error.stack&&(i.stackStr=r.error.stack)):r.message&&(i.errorMsgStr=r.message,r.stack&&(i.stackStr=r.stack)):r instanceof PromiseRejectionEvent&&(r.reason&&(r.reason&&(i.errorMsgStr=r.reason.message?r.reason.message:r.reason,r.reason.lineNumber&&(i.lineNumber=r.reason.lineNumber),r.reason.columnNumber&&(i.columnNumber=r.reason.columnNumber)),r.reason.stack&&(i.stackStr=r.reason.stack)),r.reason&&r.reason.getError&&r.reason.getError()&&(r.reason.getError().message&&(i.errorMsgStr=r.reason.getError().message),r.reason.getError().stack&&(i.stackStr=r.reason.getError().stack))),i.stackStr=i.stackStr.replace(/\n$/,""),i.stackStr)try{var o=i.stackStr.split(".js"),a=o[0].split("/");if(i.file=a.pop(),i.file&&(i.file+=".js"),i.module=a.pop(),(!i.lineNumber||!i.columnNumber)&&o.length>1){var c=o[1].split(")")[0].split(":");c.length>1&&(i.columnNumber=c.pop().split("\n")[0],i.lineNumber=c.pop())}}catch(e){console.error("XAppErrorsTracker: failed getting module, file, line or column")}if(e&&i.errorMsgStr!==this._previousErrorMsgStr&&(this._previousErrorMsgStr=i.errorMsgStr,require(["DS/XAppServices/XAppTrackers"],(function(t){t.trackErrorsJS(e,{stackStr:i.stackStr,message:i.errorMsgStr,module:i.module,file:i.file,lineNumber:i.lineNumber,columnNumber:i.columnNumber})})),i.errorMsgStr)){var s=!0;if((n||window.widget&&!widget.uwaUrl||window.location&&window.location.hostname&&(window.location.hostname.indexOf("devops")>-1||window.location.hostname.indexOf("localhost")>-1)||function(){var e={};if(window.parent&&window.parent.location&&window.parent.location.search){var t=window.parent.location.search.replace("?","").split("&");if(""!==t)for(var n=0;n<t.length;n++){var r=t[n].split("=");e[r[0]]=r.length>1?r[1]:""}}return e}().QADebug)&&(s=!1),!s){var p=i.errorMsgStr.slice(0,80)+(i.errorMsgStr.length>80?"(...)":""),d="";i.module&&i.file&&(d=i.module+"/"+i.file),i.lineNumber&&Number.isInteger(parseInt(i.lineNumber))&&(d+=" (line "+i.lineNumber+":"+i.columnNumber+")"),d&&(d+="<br><br>");var l=[{level:"error",title:"JS error",subtitle:d+=p+"<br><br><i>(this alert will not be visible in production)</i>",sticky:!0}],u=e.getComponent("NotificationsManager");u&&u.displayNotifications(l,{notExclusive:!0})}}return t&&t(i),!1}})})),define("DS/XAppServices/XAppEventsServices",["UWA/Class"],(function(e){"use strict";return e.singleton({init:function(){},events:{Application_DocumentUIActivated:"XApp/PartComponent/DocumentUIActivated",Application_DocumentUINotActivated:"XApp/PartComponent/DocumentUINotActivated",Loading_LoadDataPromises:"XApp/Loading/LoadDataPromises",Loading_ChangeLoadModeRequested:"XApp/Loading/ChangeLoadModeRequested",SpecTree_SetUIActivePath:"XGD/SpecTreeComponent/setUIActivePath",SpecTree_ChangeTreeActiveNode:"changeTreeActiveNode",SpecTree_Reframe:"SpecTree/Reframe",SpecTree_Transaction_AddSemanticNode:"VMClientTransaction/AddSemanticNode",SpecTree_Transaction_AddExistingNode:"VMClientTransaction/AddExistingNode",SpecTree_Transaction_RemoveExistingNode:"VMClientTransaction/RemoveExistingNode",SpecTree_Transaction_NotificationsEvent:"VMClientTransaction/notificationsEvent",SpecTree_ViewNodeEdit:"ViewNodeEditEvent",SpecTree_ViewNodePreActivate:"ViewNodePreActivateEvent",SpecTree_ViewNodeSelected:"ViewNodeSelectedEvent",SpecTree_ViewNodePreSelected:"ViewNodePreSelectedEvent",SpecTree_ViewNodeHideShow:"ViewNodeHideShowEvent",SpecTree_ContextualMenuClick:"SpecTree/OnRMBClick",SpecTree_BeginUIActivation:"BeginUIActivation",SpecTree_EndUIActivation:"EndUIActivation",SpecTree_ComponentActivitySwitched:"ComponentActivitySwitched",SpecTree_Rename_Success:"XApp/SpecTreeRename/Success",SpecTree_Rename_Error:"XApp/SpecTreeRename/Error",SpecTree_OccurrenceDrag:"OccurrenceDrag",SpecTree_HierarchyMove:"XApp/SpecTree/HierarchyMove",SpecTree_Reorder_Process:"ReorderCmd_Process",SpecTree_Reorder_Begin:"ReorderCmd_Begin",SpecTree_Reorder_Ended:"ReorderCmd_Ended",SpecTree_VPMOccurrence_PreExpand:"XApp/VPMOccurrence/OnPreExpand"},_getEventsManager:function(e){var t=null;return e&&(t=e.getComponent(WAfrStandardComponentKey.ModelEvents)),t},publish:function(e,t){var n=this._getEventsManager(e);n&&n.publish(t)},subscribe:function(e,t,n){var r=null,i=this._getEventsManager(e);return i&&(r=i.subscribe(t,n)),r},subscribeOnce:function(e,t,n){var r=this._getEventsManager(e);r&&r.subscribeOnce(t,n)},unsubscribeAll:function(e,t){var n=this._getEventsManager(e);n&&n.unsubscribeAll(t)},unsubscribe:function(e,t){var n=this._getEventsManager(e);n&&n.unsubscribe(t)}})})),define("DS/XAppServices/XAppTrackerServices",["UWA/Class"],(function(e){"use strict";var t=e.singleton({TrackerAPI:null,trackPageEvent:function(e,n){return new Promise((function(r){requestAnimationFrame((function(){t.getTrackerAPI().then((function(t){if(e&&n){var i=e.getSourceApp()||e.getTargetApp();if(i){var o=i.getId();if(o){n.appID=o,window.widget&&widget.getValue("x3dPlatformId")&&(n.tenant=widget.getValue("x3dPlatformId"));if(["persDim","persVal"].forEach((e=>{if(n[e])for(var t in n[e])void 0===n[e][t]||null===n[e][t]?delete n[e][t]:"persDim"===e&&n[e][t]&&n[e][t].indexOf(",")>-1&&(n[e][t]=n[e][t].replaceAll(",",";"))})),n.callback=r,t.trackPageEvent(n),window.__karma__||!0===navigator.webdriver){var a=document.createElement("div");a.className="xapp-tracker-odt-only",a.setAttribute("data-content",JSON.stringify(n)),document.body.appendChild(a)}}}}}))}))}))},getTrackerAPI:function(){return new Promise((function(e){t.TrackerAPI?e(t.TrackerAPI):window.DS&&window.DS.analytics?(t.TrackerAPI=window.DS.analytics,e(t.TrackerAPI)):require(["DS/Usage/TrackerAPI"],(function(n){t.TrackerAPI=n,e(t.TrackerAPI)}))}))},startCustomButtonsTracking:function(e,t){if(t&&(this._divsCustomButtonsTracked||(this._divsCustomButtonsTracked=new WeakMap),!this._divsCustomButtonsTracked.has(t))){let r=n.bind(this,e);this._divsCustomButtonsTracked.set(t,r);let i=!0;t.addEventListener("click",r,i)}},stopCustomButtonsTracking:function(e,t){if(t&&this._divsCustomButtonsTracked){let e=this._divsCustomButtonsTracked.get(t);if(e){let n=!0;t.removeEventListener("click",e,n),this._divsCustomButtonsTracked.delete(t)}}}});return t;function n(e,n){if(e&&n&&n.isTrusted){var r=n.target;if(r&&r.getAttribute){let n=r.parentNode,i=r.getAttribute("trackerAction");if(!i&&n&&(i=n.getAttribute("trackerAction"),i&&(r=n)),i)t.trackPageEvent(e,{eventCategory:r.getAttribute("trackerCategory"),eventAction:i,persDim:{pd1:r.getAttribute("trackerPd1")}});else if(r.classList.contains("wux-tooltip-moreHelp")&&n){let r=n.children;if(n.classList.contains("wux-controls-tooltip")&&r&&r.length){let n=r[0].textContent;n&&t.trackPageEvent(e,{eventCategory:"UserAssistance",eventAction:"MoreHelpClick",persDim:{pd1:n}})}}}}}})),define("DS/XAppServices/XAppTrackers",["UWA/Class","DS/XAppServices/XAppTrackerServices"],(function(e,t){"use strict";return e.singleton({track3DDesignMonitor:function(e){return t.trackPageEvent(e,{eventCategory:"3DDesign",eventAction:"Monitor"})},trackComputeServerConnectionEstablished:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionEstablished",eventLabel:"Connection to Compute Server has been established"})},trackComputeServerConnectionUnestablished:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionUnestablished",eventLabel:"Connection to Compute Server is unable to be established"})},trackLandingPageAppOverviewClick:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_AppOverviewClick",eventLabel:"Landing Page app overview button has been clicked"})},trackLandingPageActionButtonClick:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_ActionButtonClick",eventLabel:"Landing Page action button has been clicked",persDim:{pd1:n.buttonName}})},trackLandingPageLinkClick:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_LinkClick",eventLabel:"Landing Page link has been clicked",persDim:{pd1:n.linkName}})},trackLandingPageOnDrop:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_OnDrop",eventLabel:"A drag & drop has been done on Landing Page",persDim:{pd1:n.isDropOk}})},trackComputeServerConnectionLostMessageDisplayed:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionLostMessageDisplayed",eventLabel:"Server connection lost message has been displayed"})},trackComputeServerConnectionLost:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionLost",eventLabel:"Connection to Compute Server has been lost"})},trackWidgetTenantChanged:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_Widget",eventAction:"XApp_WidgetTenantChanged",eventLabel:"Widget tenant changed from preferences",persDim:{pd1:n.numberAvailableTenants,pd2:n.fromHomePage}})},trackWidgetPreferencesClosed:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_Widget",eventAction:"XApp_WidgetPreferencesClosed",eventLabel:"Widget preferences closed",persVal:{pv1:n.saved}})},trackWidgetRefresh:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_Widget",eventAction:"XApp_WidgetRefresh",eventLabel:"Widget refreshed from its header"})},trackModelLoadingCancelled:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_ModelLoading",eventAction:"XApp_ModelLoading_Cancelled",eventLabel:"Model load cancelled",persDim:{pd1:n.stepName,pd2:n.fromAction},persVal:{pv1:n.stepIndex,pv2:n.stepsNb,pv3:n.ellapsedTimeBeforeCancel,pv4:n.progressRate}})},trackModelLoadingTime:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_ModelLoading",eventAction:"XApp_ModelLoading_Time",eventLabel:"Duration of model loading steps",persDim:{pd1:n.fromAction,pd2:n.progressStepNameIdentifier},persVal:{pv1:n.stepDurationInSeconds,pv2:n.totalTimeInSeconds,pv3:n.isLoadingOver,pv4:n.progressStepIndex,pv5:n.progressStepsNb}})},trackLandingPageAppSwitchClick:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_AppSwitchClick",eventLabel:"Landing Page app switch button has been clicked"})},trackComputeServerConnectionLostRefreshClick:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionLostRefreshClick",eventLabel:"Refresh button clicked in connection lost notif"})},trackInactivityMessageDisplayed:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_Inactivity",eventAction:"XApp_InactivityMessageDisplayed",eventLabel:"Inactivity modal displayed"})},trackInactivityRestoreBtnClick:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_Inactivity",eventAction:"XApp_InactivityRestoreBtnClick",eventLabel:"Restore button clicked in inactivity modal"})},trackInactivityKeepSessionBtnClick:function(e){return t.trackPageEvent(e,{eventCategory:"XApp_Inactivity",eventAction:"XApp_InactivityKeepSessionBtnClick",eventLabel:"Keep session button clicked in inactivity modal"})},trackErrorsJS:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_Errors",eventAction:"XApp_Errors_JS",eventLabel:"Javascript execution error",persDim:{pd1:n.message,pd2:n.module,pd3:n.file,pd4:n.lineNumber,pd5:n.columnNumber,pd6:n.stackStr}})},trackLandingPageMRUClick:function(e,n){return t.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_MRUElementClick",eventLabel:"Landing Page MRU element has been clicked",persDim:{pd1:n.type,pd2:n.typeOrig,pd3:n.status,pd4:n.revision},persVal:{pv1:n.index}})}})}));