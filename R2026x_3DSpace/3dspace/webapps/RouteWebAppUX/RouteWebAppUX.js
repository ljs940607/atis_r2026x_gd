define("DS/RouteWebAppUX/Commands/AttachmentOpenWith",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","UWA/Class/Promise"],(function(e,t,n){"use strict";let o=function(o){let s=function(e){let t=e,n=[],o={envId:widget.getValue("x3dPlatformId"),serviceId:"3DSpace",contextId:"",objectId:a(t,"id"),objectType:a(t,"Type"),displayName:a(t,"Title"),displayType:a(t,"Type"),facetName:"realized",path:[{resourceid:a(t,"id"),type:a(t,"Type")}]};return n.push(o),{protocol:"3DXContent",version:"1.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:n}}}(o),r=new t;r.set3DXContent(s);let l=[];if(e.is(r.retrieveCompatibleApps,"function"))return new n((function(e,t){r.retrieveCompatibleApps((function(t){t.forEach((function(e){l.push(i(e,null))})),e(l)}),(function(){t(new Error("Error while getting Open with menus"))}))}))},i=function(e,t){return{id:e.text,title:e.text,icon:e.icon,type:"PushItem",multisel:!1,action:{context:t,callback:e.handler}}},a=function(e,t){let n="";return e&&e.options.grid.id&&(n=e.options.grid[t]),n};return{getOpenWithMenu:e=>o(e)}})),define("DS/RouteWebAppUX/Utilities/RouteWebAppRouteViewUtils",["i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e){"use strict";const t={icon:"thumbs-up",title:e.approve,action:"Approve",emphasize:"success"},n={icon:"thumbs-down",title:e.reject,action:"Reject",emphasize:"high-attention"},o={icon:"comment",title:e.comment,action:"Comment",emphasize:"info"},i={icon:"check",title:e.accept,action:"Accept",emphasize:"success"};return{getRouteActivityStateNLS:t=>function(t){let n,o;if(t)return t.contains("(")?(n=t.split("(")[0],o=t.split("(")[1],n=n.toLowerCase().replace(/ /g,""),e[n]+" ("+o):(t=t.toLowerCase().replace(/ /g,""),t=e[t])}(t),getRouteActivityStateIcon:e=>function(e){let t="";if(e)return e.contains("Awaiting")?t="hourglass":"Approved"==e?t="thumbs-up":"Commented"==e?t="comment":"Stopped"==e?t="stop":"Rejected"==e?t="thumbs-down":"Notified"==e?t="notification-read":"Not Started"==e?t="play-flash-off":"Abstained"==e&&(t="ignore"),t}(e),getApprovalActionIcon:e=>function(e){const a=[];return"Approve"===e?(a.push(t),a.push(n)):"Comment"===e?a.push(o):"Review"===e&&(a.push(i),a.push(n)),a}(e)}})),define("DS/RouteWebAppUX/Utilities/RouteWebAppParseJSONUtil",["UWA/Class"],(function(e){"use strict";return e.extend({createDataForRequest:function(e,t){void 0===t&&(t=widget.data.csrf);var n={dataelements:e},o=new Array;return o.push(n),{csrf:t,data:o}}})})),define("DS/RouteWebAppUX/Utilities/CopyLinkContentAppId",["text!DS/RouteWebAppUX/assets/json/ContentAppListJson.json"],(function(e){"use strict";let t;var n=JSON.parse(e);let o=function(e){var t="";return Object.entries(n).forEach((([n,o])=>{for(let i=0;i<o.length;i++)e==o[i]&&(t=n)})),t};return t={getAppId:e=>o(e),isCopyLink:e=>function(e){return""==o(e)?"false":"true"}(e)},t})),define("DS/RouteWebAppUX/RouteTracker/RouteDimension",[],(function(){"use strict";var e;return e={ROUTEMANAGEMENT_WELCOMEPANEL:{ROUTEMANAGEMENT_ACTIVITY:"routeManagementActivity"},ROUTEMANAGEMENT_TASKVIEW:{ROUTEMANAGEMENT_INITIALTASKVIEW:"routeManagementInitialTaskView",ROUTEMANAGEMENT_TASKVIEWSWITCH:"routeManagementTaskViewSwitch"},ROUTEMANAGEMENT_SUMMARY:{ROUTEMANAGEMENT_OBJECTTYPE:"routeManagementObjectType"},ROUTEMANAGEMENT_ROUTE:{ROUTEMANAGEMENT_ROUTECOMMAND:"routeManagementRouteCommand"},ROUTEMANAGEMENT_TASK:{ROUTEMANAGEMENT_TASKCOMMAND:"routeManagementTaskCommand"},ROUTEMANAGEMENT_TEMPLATE:{ROUTEMANAGEMENT_TEMPLATECOMMAND:"routeManagementTemplateCommand"}},Object.freeze(e)})),define("DS/RouteWebAppUX/Model/RouteWebAppTaskAttachmentModel",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],(function(e,t){"use strict";let n=new e;return{createModel:(e,o)=>function(e){return n.prepareUpdate(),e.forEach((function(e){var o=new t({label:e.dataelements.title,width:300,grid:{id:e.id,Title:e.dataelements.title,Name:e.dataelements.name,Maturity:e.dataelements.stateNLS,Type:e.type},icons:[e.dataelements.icon]});n.addRoot(o)})),n.pushUpdate(),n}(e),getModel:()=>n,getSelectedRowsModel:()=>WrapperDataGridView.getSelectedRowsModel(n),getContentIDs:()=>function(){if(null!=n){for(var e=n.getChildren(),t=[],o=0;o<e.length;o++)t.push(e[o]._options.grid.id);return t}}(),destroy:()=>{n=new e},deleteSelectedRows:()=>function(){var e=n.getSelectedNodes();n.prepareUpdate();for(var t=0;t<e.length;t++)n.removeRoot(e[t]);if(n.pushUpdate(),0==n.getChildren().length){var o=document.querySelector(".taskAttachments-gridView-View");o&&o.addClassName("hideView")}}()}})),define("DS/RouteWebAppUX/Commands/ApprovalMaturityCmd",[],(function(){"use strict";return{lifeCycle:e=>function(e){require(["DS/LifecycleCmd/MaturityCmd"],(function(t){let n=[],o=e.model.id;n.push({physicalid:o}),(new t).executeAsync(n).then((function(e){widget.routeWebAppMediator.publish("maturity-save",{model:e})}))}))}(e)}})),define("DS/RouteWebAppUX/Components/RouteWebAppMediator",["DS/CoreEvents/ModelEvents"],(function(e){"use strict";var t=null,n=function(){t=new e};return n.prototype.publish=function(e,n){t.publish({event:e,data:n})},n.prototype.subscribe=function(e,n){return t.subscribe({event:e},n)},n.prototype.subscribeOnce=function(e,n){return t.subscribeOnce({event:e},n)},n.prototype.unsubscribe=function(e){t.unsubscribe(e)},n.prototype.getEventBroker=function(){return t},n.prototype.destroy=function(){t.destroy()},n})),define("DS/RouteWebAppUX/RouteTracker/RouteValue",[],(function(){"use strict";return{ROUTEMANAGEMENT_SUMMARY:{ROUTEMANAGEMENT_OBJECTCOUNT:"routeManagementObjectCount"}}})),define("DS/RouteWebAppUX/Components/RouteWebAppNotifications",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],(function(e,t){"use strict";let n=null,o=function(){n=e,t.setNotificationManager(n),t.setStackingPolicy(9)};return o.prototype.handler=function(){return document.getElementById("TaskApprovalDialog")?(t.inject(document.getElementById("TaskApprovalDialog")),document.getElementById("TaskApprovalDialog").scrollIntoView()):document.getElementsByClassName("wux-notification-screen").length>0||t.inject(document.body),n},o.prototype.notifview=function(){return t},o})),define("DS/RouteWebAppUX/RouteWebAppBootstrap",["UWA/Core","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/WAFData/WAFData","DS/RouteWebAppUX/Components/RouteWebAppMediator","DS/RouteWebAppUX/Components/RouteWebAppNotifications","DS/PlatformAPI/PlatformAPI"],(function(e,t,n,o,i,a){"use strict";let s,r,l,u;const d=function(){return c(),p(),new Promise((function(e,n){let o=new Promise((function(e,n){let o=widget.getValue("x3dPlatformId");t.getServiceUrl({serviceName:"3DSpace",platformId:o,onComplete:function(t){s="string"==typeof t?t:t&&t[0]?t[0].url:"",e()},onFailure:function(){s="",n()}})})),i=new Promise((function(e,n){t.getServiceUrl({serviceName:"3DSearch",onComplete:function(t){l=t;var n=m.getTenantValue();if(null==n&&(n="OnPremise"),n&&l)for(var o=0;o<l.length;o++)if(n===l[o].platformId){r=l[o].url;break}e()},onFailure:function(e){l=[],n()}})})),a=new Promise((function(e,n){var o=widget.getValue("x3dPlatformId");t.getServiceUrl({serviceName:"3DDashboard",platformId:o,onComplete:function(t){u="string"==typeof t?t:t&&t[0]?t[0].url:"",e()},onFailure:function(){u="",n()}})}));Promise.all([o,i,a]).then((t=>{e(t)}),(e=>{n(e)}))}))},c=function(){widget.routeWebAppMediator=new o},p=function(){widget.routeWebAppNotify=new i},m={init:(e,t,n)=>d(),getRouteServiceBaseURL:()=>function(){if(s)return s+"/resources/v1/modeler/routes"}(),getTaskServiceBaseURL:()=>function(){if(s)return s+"/resources/v1/modeler/tasks"}(),getCSRFToken:()=>new Promise((function(t,o){n.authenticatedRequest(s+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){t(e)}}))})),getTenantValue:()=>widget.data.routeCredentials&&widget.data.routeCredentials.tenant?widget.data.routeCredentials.tenant:widget.getValue("x3dPlatformId"),getSecurityContextValue:()=>widget.data.routeCredentials&&widget.data.routeCredentials.securityContext?widget.data.routeCredentials.securityContext:widget.ChangeMaturityWidget?widget.ChangeMaturityWidget.options.SecurityContext:widget.getValue("xPref_CREDENTIAL")?"ctx::"+widget.getValue("xPref_CREDENTIAL"):"",get3DSpaceURL:()=>function(){if(s)return s}(),getDashboardURL:()=>function(){if(u)return u}(),getSearchUrl:()=>function(){if(r)return r}(),authenticatedRequest:(e,t)=>function(e,t){m.getTenantValue()&&(e=e+(-1===e.indexOf("?")?"?":"&")+"tenant="+m.getTenantValue()),e.includes("/bps/cspaces")||m.getSecurityContextValue()&&(e=e+(-1===e.indexOf("?")?"?":"&")+"SecurityContext="+encodeURIComponent(m.getSecurityContextValue())),n.authenticatedRequest(e,t)}(e,t),getLoginUser:()=>function(){if("undefined"!=typeof dscef&&widget.getValue("native_user_info")&&1==widget.getValue("native_user_info").isNative)return widget.getValue("native_user_info").contextUser;var e=a.getUser();return e&&e.login?e.login:void 0}(),getSyncOptions:()=>({ajax:n.authenticatedRequest})};return m})),define("DS/RouteWebAppUX/Commands/RouteWebAppRouteDocumentCommands",["DS/RouteWebAppUX/RouteWebAppBootstrap"],(function(e){"use strict";let t=function(e){let t={};if(Array.isArray(e))for(let n=0;n<e.length;n++)t.title=e[n].Title,t.type=e[n].Type,t.name=e[n].Name;return t};return{init:(n,o,i,a,s,r)=>function(n,o,i,a,s,r){let l={document:{id:o,contextId:e.getSecurityContextValue(),serviceId:"3DSpace",envId:e.getTenantValue(),index:1,data:t(a),type:"Document"},platformUrls:{"3DSpace":e.get3DSpaceURL(),"3DDashboard":e.getDashboardURL()},onComplete:function(e){r&&r(e)}};l.document.filesCallback=function(e){s(e)};let u=new n;u.init(l),u.render()}(n,o,0,a,s,r)}})),define("DS/RouteWebAppUX/Utilities/CompassDataExchange",["DS/RouteWebAppUX/RouteWebAppBootstrap","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t){"use strict";let n=function(t){return{envId:e.getTenantValue()?e.getTenantValue():"OnPremise",serviceId:"3DSpace",contextId:e.getSecurityContextValue(),objectId:t.dataelements.id,objectType:"Route",displayName:t.dataelements.name,linkedContextTitle:t.linkedContextTitle,path:[{resourceid:t.dataelements.id,type:"Route"}]}},o=function(e){if("hyperlink"==e.fromPage){for(var t=[],n=0;n<e.route.length;n++)e.route[n].dataelements.approvalTaskId&&t.push(e.route[n].dataelements.id);return 1==t.length?"Inbox Task":"Route"}return"Route"},i=function(e,t){return{protocol:"3DXContent",version:"1.1",source:widget.getValue("appId")?widget.getValue("appId"):"ENXROUT_AP",widgetId:widget.id,data:{items:t,approvalObjectType:e}}};const a=function(e){return"Awaiting your Comment"==e?"Comment":"Awaiting your Approval"==e?"Approve":"Awaiting your Review"==e?"Review":""},s=function(e){let t=e.dataelements.contentApprovalStatus,n=e.relateddata.route;if(null!=n)for(let e=0;e<n.length;e++){let o=n[e];if(o&&o.dataelements&&o.dataelements.activityState===t&&o.dataelements.approvalTaskId&&""==!o.dataelements.approvalTaskId){let e={};return e.routeId=o.dataelements.id,e.taskId=o.dataelements.approvalTaskId,null==o.dataelements.showAbstain||1==o.dataelements.showAbstain?e.showAbstain=!0:e.showAbstain=!1,e}}},r=function(e){let t=e.relateddata.process;if(null!=t)for(let e=0;e<t.length;e++){let n=t[e],o={};return o.processId=n.dataelements.processInstanceId,o}};return{getContentToLink:e=>function(e){let t=[],a=o(e);return"Inbox Task"==a?e.route.forEach((function(o){if(o.dataelements.approvalTaskId){o.linkedContextTitle=e.title;let i=n(o);i.objectId=o.dataelements.approvalTaskId,t.push(i)}})):"hyperlink"==e.fromPage?e.route.forEach((function(o){o.dataelements.activityState.indexOf("Awaiting your")>-1&&(o.linkedContextTitle=e.title,t.push(n(o)))})):e.route.forEach((function(o){o.linkedContextTitle=e.title,t.push(n(o))})),i(a,t)}(e),getContentforApprovalLink:e=>function(e){let t=o(e),a=[];return e.route.forEach((function(t){t.dataelements.activityState.indexOf("Awaiting your")>-1&&(t.linkedContextTitle=e.title,a.push(n(t)))})),i(t,a)}(e),createModel:e=>function(e){let t={model:{}},n=e.dataelements;t.model.id=e.id,t.model.name=n.name,t.model.title=n.title,t.model.type=e.type,t.model.state="In Process",t.model.current=n.current,t.model.current_NLS=n.current_NLS,t.model.Activity_State=n.contentApprovalStatus,t.model.approvalAction=a(t.model.Activity_State),t.model.contentInfoExpression=n.ContentInfoExpression;let o=s(e);o&&o.routeId&&o.taskId&&(t.model.routeId=o.routeId,t.model.taskId=o.taskId,t.model.showAbstain=o.showAbstain);let i=r(e);return i&&(t.model.processControl=!0,t.model.processId=i.processId),e.relateddata&&(t.model.route=e.relateddata.route),t}(e),getActionsBasedOnApprovalStatus:e=>function(e){return"Approve"==e?["Approve","Reject","Abstain"]:"Comment"==e?["Comment"]:"Review"==e?["Review"]:[]}(e),getApprovalAction:e=>a(e)}})),define("DS/RouteWebAppUX/Services/RouteWebAppRouteTaskServices",["UWA/Class/Promise","DS/WAFData/WAFData","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/RouteWebAppParseJSONUtil"],(function(e,t,n,o){"use strict";return{makeWSCall:(e,o,i,a,s,r,l,u)=>function(e,o,i,a,s,r,l,u){u=u||null;var d="",c=n.getSearchUrl();null!=u&&null!=u.isfederated&&1==u.isfederated&&(d=c+e),null!=u&&null!=u.acceptType&&""!=u.acceptType&&u.acceptType,null!=u&&null!=u.encodeSecurityContext&&""!=u.encodeSecurityContext&&u.encodeSecurityContext;var p=(new Date).getTime(),m=n.getTenantValue();null==m&&(m="OnPremise"),d=-1==d.indexOf("?")?d+"?tenant="+m+"&timestamp="+p:d+"&tenant="+m+"&timestamp="+p,r=r||function(){},l=l||function(){};var f={};f.method=o,f.timeout=12e7,null!=u&&null!=u.isSwymUrl&&0!=u.isSwymUrl||(f.type="json"),i&&(f.auth={passport_target:i}),s&&(f.data=s),f.headers={Accept:"application/json","Content-Type":"application/json","Accept-Language":"en"},f.onComplete=function(e){r(e)},f.onFailure=function(e,t){console.log("Error in calling url: "+d),console.log("Error Detail: "+e),console.log("Error Data: "+JSON.stringify(t)),l(e,t)},f.onTimeout=function(){console.log("Timedout for url: "+d),widget.body&&Mask.unmask(widget.body)},t.authenticatedRequest(d,f)}(e,o,i,0,s,r,l,u)}})),define("DS/RouteWebAppUX/Utilities/RouteLinkWidget",["DS/WidgetLink/WidgetLink","DS/PlatformAPI/PlatformAPI","DS/RouteWebAppUX/Utilities/CompassDataExchange","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o){"use strict";let i,a,s=function(e){a.publish("load-route-data",{dropData:e})},r=function(){return"undefined"==typeof dscef&&(a=e.get(widget)),a};return i={init:(t,n)=>function(t,n){return"undefined"==typeof dscef&&(a=e.get(t),a.setLinkability(n)),a}(t,n),checkIfLinked:()=>0!=a.getLinked().length,getWidgetLinkInstance:()=>r(),loadContent:e=>s(e),removeContent:e=>function(e){a.publish("DS/ExternalWdgtCom/RemoveRoot",{data:e})}(e),removeAllContent:()=>{a.publish("DS/ExternalWdgtCom/RemoveAll")},subscribeForRouteEvents:e=>function(e){return a=r(),a.subscribe("load-route-data",(function(n){t.publish("updateRouteContent-"+e.id,n)})),a}(e),refreshContent:e=>function(e){a.publish("refresh-route-data",e)}(e),refreshRouteOnContentSelection:e=>function(e){e.model.fromPage="summarypage-ctxCommand";let t=n.getContentToLink(e.model);s(t)}(e)},i})),define("DS/RouteWebAppUX/Utilities/Search/RouteWebAppSearchUtil",["UWA/Class","DS/UIKIT/Alert","DS/RouteWebAppUX/RouteWebAppBootstrap","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o){"use strict";let i=function(){var e="";return widget.data.routeCredentials&&widget.data.routeCredentials.securityContext?e=widget.data.routeCredentials.securityContext.split("ctx::")[1].split(".")[1]:widget.data.pad_security_ctx?e=widget.data.pad_security_ctx.split("ctx::")[1].split(".")[1]:widget.getPreference("organization")&&(e=widget.getPreference("organization").value),e};return{getRefinementToSnN:(e,t,n,i)=>function(e,t,n,i){var a={title:o[t],role:"",mode:"furtive",default_with_precond:!0,show_precond:!1,multiSel:n,idcard_activated:!1,select_result_max_idcard:!1,itemViewClickHandler:"",app_socket_id:e,widget_id:e,search_delegation:"3dsearch",default_search_criteria:"",source:["3dspace"],recent_search:{types:i},tenant:"OnPremise"};return a.global_actions=[{id:"incontextHelp",title:o["search.help"],icon:"fonticon fonticon-help",overflow:!1}],a}(e,t,n,i),getPrecondForDocumentSearch:()=>'( NOT (flattenedtaxonomies:"types/Person" OR flattenedtaxonomies:"types/Business Role" OR flattenedtaxonomies:"types/Security Context" OR flattenedtaxonomies:"types/Route" OR flattenedtaxonomies:"types/Route Template" OR flattenedtaxonomies:"types/Inbox Task"))',getPrecondForTaskMemberSearch:e=>function(e){let t={precond:'(flattenedtaxonomies:"types/Person" OR "types/Group") AND current:"active"'};if(!e.Scope)return t;if(e.ScopeMembers||(e.ScopeMembers=[""]),0==e.ScopeMembers.length&&(null!=e.ScopeMembers[0]&&null!=e.ScopeMembers[0]&&""!=e.ScopeMembers[0]||(e.ScopeMembers=[""])),"OnPremise"==n.getTenantValue())"All"==e.Scope[0]?t.precond='(flattenedtaxonomies:"types/Person" OR "types/Group") AND current:"active"':"Organization"==e.Scope[0]?t.precond='(flattenedtaxonomies:"types/Person" AND current:"active" AND member:"'+i()+'") OR (flattenedtaxonomies:"types/Group" AND current:"active")':(t.precond='(flattenedtaxonomies:"types/Person" OR "types/Group") AND current:"active"',e.ScopeMembers.length>1&&(t.resourceid_in=e.ScopeMembers));else if("All"==e.Scope[0])t.precond='([ds6w:type]:(Group) AND [ds6w:status]:(Public)) OR (flattenedtaxonomies:"types/Person" AND current:"active")';else if("Organization"==e.Scope[0])t.precond='([ds6w:type]:(Group) AND [ds6w:status]:(Public)) OR (flattenedtaxonomies:"types/Person" AND current:"active" AND member:"'+i()+'")';else{for(var o="(",a=[],s=!1,r=0;r<e.ScopeMembers.length;r++)-1!=e.ScopeMembers[r].indexOf("uuid")?(s=!0,o=o+'uri:"'+e.ScopeMembers[r]+'" OR '):a.push(e.ScopeMembers[r]);s?(o=o.substring(0,o.length-4),o+=") ",t.precond="("+o+' AND [ds6w:type]:(Group) AND [ds6w:status]:(Public)) OR (flattenedtaxonomies:"types/Person" AND current:"active")'):t.precond='((uri:"-1") AND [ds6w:type]:(Group) AND [ds6w:status]:(Public)) OR (flattenedtaxonomies:"types/Person" AND current:"active")',e.ScopeMembers.length>1&&(t.resourceid_in=a)}return t}(e),getPrecondForRouteOwnerTaskAssignment:e=>function(e){let t={};return""!=e.model.options.grid.routeOwnerUGChoice&&null!=e.model.options.grid.routeOwnerUGChoice?t.precond='(flattenedtaxonomies:"types/Person" AND userrole="'+e.model.options.grid.routeOwnerUGName+'"  AND current:"active") ':""!=e.model.options.grid.candidateAssignee&&null!=e.model.options.grid.candidateAssignee?t.precond='(flattenedtaxonomies:"types/Person" AND userrole="'+e.model.options.grid.candidateAssignee+'"  AND current:"active") ':t.precond='(flattenedtaxonomies:"types/Person" AND current:"active") ',t}(e)}})),define("DS/RouteWebAppUX/Utilities/RouteWebAppDocumentUtils",["UWA/Promise","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/DocumentManagement/DocumentManagement"],(function(e,t,n){"use strict";return{getDocumentsData:function(o){return new e((function(e,i){n.getDocuments(o,{tenant:t.getTenantValue(),securityContext:decodeURIComponent(t.getSecurityContextValue()),tenantUrl:t.get3DSpaceURL(),additionalURLParams:"$fields=indexedTypeicon",onComplete:function(t){t.success&&Array.isArray(t.data)?e(t):i()},onFailure:function(e){console.log(e),i()}})}))},getCommands:function(e,n,o,i,a){var s=this,r=t.get3DSpaceURL(),l=t.getDashboardURL(),u=[i];s.getDocumentsData(u).then((function(i){var d=new n;d.subscribe({event:"docv2-show-notification"},(function(e){widget.notify.handler().addNotif({level:e.level,title:e.title,subtitle:e.subtitle,sticky:e.sticky,allowUnsafeHTML:e.allowUnsafeHTML,message:e.message})})),d.subscribe({event:"docv2-undoedit-complete"},(function(e){s.getDocumentsData(u).then((function(t){c=t.data[0],d.publish({event:"docv2-preview-reload-toolbar",data:{nodeModel:e.nodeModel}})}))})),d.subscribe({event:"docv2-edit-complete"},(function(e){s.getDocumentsData(u).then((function(t){c=t.data[0],d.publish({event:"docv2-preview-reload-toolbar",data:{nodeModel:e.nodeModel}})}))})),d.subscribe({event:"docv2-update-complete"},(function(e){s.getDocumentsData(u).then((function(t){c=t.data[0],d.publish({event:"docv2-preview-reload-toolbar",data:{nodeModel:e.nodeModel}}),d.publish({event:"docv2-preview-reload-viewer",data:{nodeModel:e.nodeModel}})}))}));var c=i.data[0],p={fetchSecurityContext:function(){return decodeURIComponent(t.getSecurityContextValue())},getSelectedNodes:function(){return[c]},getDocumentFromNodeModel:function(e){return e},platformUrls:{"3DSpace":r,"3DDashboard":l,platformId:t.getTenantValue()},events:d},m=new o(p),f=m.commands,g={entries:[f[e.DOWNLOAD]]};"Document"==c.type&&g.entries.push(f[e.COPY_LINK]),m.getWebUXContextMenuItemsForCurrentSelection(g.entries,!1).then((e=>{a(e)}))})).catch((function(e){console.log("Error in RouteDocumentUtils "+e)}))}}})),define("DS/RouteWebAppUX/Views/Form/ENORouteAutoComplete",["DS/WUXAutoComplete/AutoComplete","DS/RouteWebAppUX/Services/RouteWebAppRouteTaskServices","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/TreeModel/BaseFilter","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o,i,a,s){var r,l;let u=function(e,o,i,a,s){var r="",l=[],u=[];e.precond&&(r=e.precond),e.resourceid_in&&(l=e.resourceid_in),e.resourceid_not_in&&(u=e.resourceid_not_in);var d;d="([ds6w:label]:(*"+o+"*) OR [ds6w:identifier]:(*"+o+"*)) AND ("+r+")";var c,p=n.getTenantValue(),m=((c={})["3dspace"]={SecurityContext:n.getSecurityContextValue()},c),f={with_indexing_date:!0,with_nls:!1,label:"yus-1515078503005",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:identifier","ds6wg:fullname","ds6w:status"],select_file:["icon","thumbnail_2d"],query:d,order_by:"asc",order_field:"ds6w:label",nresults:1e3,start:"0",source:s,tenant:p,resourceid_in:l,resourceid_not_in:u,with_synthesis:!1,with_synthesis_attribute:!1};widget&&widget.data&&widget.data.routeCredentials&&widget.data.routeCredentials.noSecurityContextForSearch||widget&&widget.data&&widget.data.noSecurityContextForSearch||(f.login=m),f=JSON.stringify(f);var g={isfederated:!0};t.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",f,i,a,g)};return ENORouteAutoComplete={drawAutoCompleteComponent:t=>function(t){r=new i;var n=new e({elementsTree:function(e){if(!t.getValidation||t.getValidation())return new Promise((function(n,s){var d=function(e){r=new i,l=a.inherit({isDataFiltered:function(e){var t=e.getAttributeValue("name"),n=e.getAttributeValue("label");if(t&&n&&this.filterModel&&this.filterModel.text){var o=this.filterModel.text.toLowerCase();return!(t.toLowerCase().indexOf(o)>-1||n.toLowerCase().indexOf(o)>-1)}return!!(n&&this.filterModel&&this.filterModel.text)&&(o=this.filterModel.text.toLowerCase(),!(n.toLowerCase().indexOf(o)>-1))},isEmpty:function(){return void 0===this.filterModel.text}}),r.getFilterManager().registerFilter("myFilterID",l),e&&e.results&&Array.isArray(e.results)&&e.results.forEach((function(e){var t=new o;e.attributes.forEach((function(e){"ds6w:type"===e.name&&(t.options.type=e.value),"resourceid"===e.name&&(t.options.value=e.value),"ds6w:label"===e.name&&(t.options.label=e.value),"ds6w:identifier"===e.name&&(t.options.name=e.value,t.options.grid={name:t.options.name}),"ds6w:status"===e.name&&(t.options.status=e.value)})),r.addRoot(t)})),n(r)},c=function(e){s(e)},p=["3dspace"];t.source&&(p=t.source);var m=t.getPrecond();m instanceof Promise?m.then((t=>{u(t,e,d,c,p)}),(e=>{e.error&&widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1})})):u(m,e,d,c,p)}))},filterCB:function(e){r.setFilterModel({value:{filterId:"myFilterID",filterModel:{text:e}}})},multiSearchMode:t.isMultiSearchMode,placeholder:t.placeHolderValue,minLengthBeforeSearch:t.minLengthToType,allowFreeInputFlag:t.isFreeInputAllowed,keepSearchResultsFlag:t.toKeepSearchResultsFlag});return n.addEventListener("change",(function(e){t.getChangeHandler&&t.getChangeHandler()})),n.getContent().querySelector(".wux-ui-state-undefined").addEventListener("keyup",(function(e,t){13===e.keyCode&&e.stopPropagation()})),n}(t)},ENORouteAutoComplete})),define("DS/RouteWebAppUX/Services/RouteWebAppCollabTaskServices",["UWA/Class/Promise","UWA/Core","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/RouteWebAppParseJSONUtil"],(function(e,t,n,o){"use strict";var i={};let a=function(t){return new e((function(e,o){t.data=void 0;var i=n.getTaskServiceBaseURL()+"/ids?$include=none,assignees,references&$fields=references.icon,revision";let a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};a.data=t,a.wait=!0,a.onComplete=function(t){e(t)},a.onFailure=function(e,t){o(t||e)},n.authenticatedRequest(i,a)}))},s=function(t){return new e((function(e,o){t.data=void 0;var i=n.getRouteServiceBaseURL()+"/ids?$include=tasks&$fields=all,!contents.maturityBlockingStates";let a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};a.data=t,a.wait=!0,a.onComplete=function(t){e(t)},a.onFailure=function(e,t){o(t||e)},n.authenticatedRequest(i,a)}))},r=function(t,o,i,a){return new e((function(e,o){var s,r="";if(null!=t.model.id){r=n.getTaskServiceBaseURL()+"/"+t.model.id,"Review"==t.model.state?(s={routeTaskReviewerComments:t.model.comments},"Accept"==t.model.taskReviewButton?s.state="Complete":"Reject"==t.model.taskReviewButton&&(s.state="Assign")):(s={routeTaskApprovalComments:t.model.comments},"saveForLater"!=t.model.taskActionButton&&("Yes"==t.model.needsOwnerReview?s.state="Review":s.state="Complete"),"Approve"!=t.model.taskActionButton&&"Reject"!=t.model.taskActionButton&&"Abstain"!=t.model.taskActionButton||(s.routeTaskApprovalAction=t.model.taskActionButton,t.model.eSignRecordId&&Array.isArray(t.model.eSignRecordId)?s.eSignRecordId=t.model.eSignRecordId[0]:s.eSignRecordId=t.model.eSignRecordId));var l={method:"PUT",type:"json",timeout:0,headers:{"Content-Type":"application/ds-json"},wait:!0},u={dataelements:s};(c=new Array).push(u);var d={csrf:a.csrf,data:c}}else{r=n.getTaskServiceBaseURL(),s=[];for(let e=0;e<t.model.tasks.length;e++){let n;if("Review"==t.model.state)n={routeTaskReviewerComments:t.model.comments},"Accept"==t.model.taskReviewButton?n.state="Complete":"Reject"==t.model.taskReviewButton&&(n.state="Assign");else if(n={routeTaskApprovalComments:t.model.comments},"saveForLater"!=t.model.taskActionButton&&(t.model.needsOwnerReviewYes.includes(t.model.tasks[e].id)?n.state="Review":n.state="Complete"),"Approve"==t.model.taskActionButton||"Reject"==t.model.taskActionButton||"Abstain"==t.model.taskActionButton)if(n.routeTaskApprovalAction=t.model.taskActionButton,t.model.eSignRecordId&&Array.isArray(t.model.eSignRecordId))if(t.model.eSignRecordId.length>1){let o=t.model.eSignRecordId;for(let i=0;i<o.length;i++)if(JSON.parse(o[i]).ReferenceId==t.model.tasks[e].id){n.eSignRecordId=JSON.parse(o[i]).eSignRecordID;break}}else n.eSignRecordId=t.model.eSignRecordId[0];else n.eSignRecordId=t.model.eSignRecordId;s.push(n)}}l={method:"PUT",type:"json",timeout:0,headers:{"Content-Type":"application/ds-json"},wait:!0},u={dataelements:s};var c=new Array;if(null==t.model.id)for(let e=0;e<t.model.tasks.length;e++)delete t.model.tasks[e].relateddata,c.push(t.model.tasks[e]),c[e].dataelements=s[e];else c.push(u);d={csrf:a.csrf,data:c};if("saveForLater"==t.model.taskActionButton&&0!=i.length)for(let e=0;e<d.data.length;e++)d.data[e].relateddata={references:i};l.data=JSON.stringify(d),l.onComplete=function(t){e(t)},l.onFailure=function(e,t){o(t||e)},n.authenticatedRequest(r,l)}))},l=function(t,o,i){return new e((function(e,a){if(0==o.length)e();else{var s="";s=null!=t.model.id?n.getTaskServiceBaseURL()+"/"+t.model.id:n.getTaskServiceBaseURL();var r={},l={method:"PUT",type:"json",timeout:0,headers:{"Content-Type":"application/ds-json"},wait:!0},u={dataelements:r},d=new Array;if(null==t.model.id)for(let e=0;e<t.model.tasks.length;e++)delete t.model.tasks[e].relateddata,d.push(t.model.tasks[e]),d[e].dataelements=r;else d.push(u);var c={csrf:i.csrf,data:d};for(let e=0;e<c.data.length;e++)c.data[e].relateddata={references:o};l.data=JSON.stringify(c),l.onComplete=function(t){e(t)},l.onFailure=function(e,t){a(t||e)},n.authenticatedRequest(s,l)}}))},u=function(a){return new e((function(e,s){var r=n.getTaskServiceBaseURL(),l=(new o).createDataForRequest({},i.csrf);for(let e=0;e<a.length;e++){var u=[],d={updateAction:"DISCONNECT",id:a[e].model.options.grid.assigneePID},c={updateAction:"CONNECT",dataelements:{name:n.getLoginUser()}};if(u.push(c),u.push(d),0==e)l.data[0].id=a[e].model.options.grid.id,l.data[0].updateAction="MODIFY",l.data[0].relateddata={assignees:u};else{let t={id:a[e].model.options.grid.id,updateAction:"MODIFY",relateddata:{assignees:u},dataelements:{}};l.data.push(t)}}l=JSON.stringify(l);var p={};(p=t.extend(p,n.getSyncOptions(),!0)).method="POST",p.type="json",p.timeout=0,p.headers={"Content-Type":"application/ds-json"},p.wait=!0,p.data=l,p.onComplete=function(t){e(t)},p.onFailure=function(e,t){s(t||e)},n.authenticatedRequest(r,p)}))};let d=function(a,s){return new e((function(e,r){let l=s.fields.taskAssigneeField.selectedItems.options.name,u=s.fields.taskAssigneeField.selectedItems.options.label,d=s.fields.taskAssigneeField.selectedItems.options.type,c=s.fields.descField.value,p=s.fields.assigneeId,m=n.getRouteServiceBaseURL();var f=(new o).createDataForRequest({},i.csrf);for(let e=0;e<a.length;e++){let t=a[e].routePropertiesInfo.id,n=a[e].model.options.grid.id;var g=[];let o={};o.id=n,o.type=a[e].model.options.grid.type,o.relId=a[e].routePropertiesInfo.model.relId;let i={reAssignComments:c,routeId:t,taskId:n,newAssigneeId:p,newAssigneeType:d,taskAssigneeName:u,taskAssigneeUserName:l,type:a[e].model.options.grid.type,isChangeAssignee:"true"};if(o.dataelements=i,g.push(o),0==e)f.data[0].id=t,f.data[0].type=a[e].routePropertiesInfo.model.Type,f.data[0].identifier=t,f.data[0].relateddata={tasks:g};else{let t={id:a[e].model.options.grid.id,type:a[e].routePropertiesInfo.model.Type,identifier:a[e].model.options.grid.id,relateddata:{tasks:g},dataelements:{}};f.data.push(t)}}f=JSON.stringify(f);var A={};(A=t.extend(A,n.getSyncOptions(),!0)).method="PUT",A.type="json",A.timeout=0,A.headers={"Content-Type":"application/ds-json"},A.wait=!0,A.data=f,A.onComplete=function(t){e(t)},A.onFailure=function(e,t){r(t||e)},n.authenticatedRequest(m,A)}))};return{fetchRouteTask:t=>function(t){return new e((function(e,o){var i=n.getTaskServiceBaseURL()+"/"+t+"?$include=none,assignees,references&$fields=references.icon,revision",a={method:"GET",type:"json",timeout:0,headers:{"Content-Type":"application/ds-json"},wait:!0,onComplete:function(t){e(t)},onFailure:function(e,t){o(t||e)}};n.authenticatedRequest(i,a)}))}(t),fetchRouteTasks:t=>function(t){let o="";for(let e=0;e<t.data.length;e++)o+=t.data[e].id,e!==t.data.length-1&&(o+=",");return new e((function(e,i){null==t&&e(),n.getCSRFToken().then((function(n){t.$ids=o,t.csrf=JSON.parse(n).csrf,e()}))})).then((function(){return a(t)}))}(t),fetchRouteAndTasks:t=>function(t){let o="";for(let e=0;e<t.data.length;e++)o+=t.data[e].id,e!==t.data.length-1&&(o+=",");return new e((function(e,i){null==t&&e(),n.getCSRFToken().then((function(n){t.$ids=o,t.csrf=JSON.parse(n).csrf,e()}))})).then((function(){return s(t)}))}(t),updateComment:(t,o,a)=>function(t,o,a){return new e((function(e,t){n.getCSRFToken().then((function(t){i.csrf=JSON.parse(t).csrf,e()}))})).then((function(){return r(t,o,a,i)}))}(t,o,a),updateTaskAttachment:(t,o)=>function(t,o){return new e((function(e,t){n.getCSRFToken().then((function(t){i.csrf=JSON.parse(t).csrf,e()}))})).then((function(){return l(t,o,i)}))}(t,o),acceptTask:t=>function(t){return new e((function(e,t){n.getCSRFToken().then((function(t){i.csrf=JSON.parse(t).csrf,e()}))})).then((function(){return u(t,i)}))}(t),getUserGroupPhysicalId:t=>function(t){return new e((function(e,o){let i=n.get3DSpaceURL()+"/resources/bps/uuids",a={method:"POST",headers:{"Content-Type":"application/json"}};a.data=JSON.stringify({phyIds:[t]}),a.onComplete=function(t){let n=JSON.parse(t);e(n)},a.onFailure=function(e,t,n){o(JSON.parse(t))},n.authenticatedRequest(i,a)}))}(t),changeAssignee:(t,o)=>function(t,o){return new e((function(e,t){n.getCSRFToken().then((function(t){i.csrf=JSON.parse(t).csrf,e()}))})).then((function(){return d(t,o)}))}(t,o)}})),define("DS/RouteWebAppUX/Controller/RouteWebAppCollabTaskServicesController",["DS/RouteWebAppUX/Services/RouteWebAppCollabTaskServices","UWA/Promise"],(function(e,t){"use strict";let n;return n={fetchRouteTask:function(n){return new t((function(t,o){e.fetchRouteTask(n).then((e=>{t(e)}),(e=>{o(e)}))}))},fetchRouteTasks:function(n){return new t((function(t,o){e.fetchRouteTasks(n).then((e=>{t(e)}),(e=>{o(e)}))}))},fetchRouteAndTasks:function(n){return new t((function(t,o){e.fetchRouteAndTasks(n).then((e=>{t(e)}),(e=>{o(e)}))}))},updateComment:function(n,o,i){return new t((function(t,a){e.updateComment(n,o,i).then((e=>{t(e)}),(e=>{a(e)}))}))},updateTaskAttachment:function(n,o){return new t((function(t,i){e.updateTaskAttachment(n,o).then((e=>{t(e)}),(e=>{i(e)}))}))},acceptTask:function(n){return new t((function(t,o){e.acceptTask(n).then((e=>{t(e)}),(e=>{o(e)}))}))},getUserGroupPhysicalId:function(n){return new t((function(t,o){e.getUserGroupPhysicalId(n).then((e=>{t(e)}),(e=>{o(e)}))}))},changeAssignee:function(n,o){return new t((function(t,i){e.changeAssignee(n,o).then((e=>{t(e)}),(e=>{i(e)}))}))}},n})),define("DS/RouteWebAppUX/Views/Loader/RouteWebAppInitiateDocumentChooser",["DS/RouteWebAppUX/Utilities/Search/RouteWebAppSearchUtil","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],(function(e,t,n,o){"use strict";let i;var a=function(e,n){for(var o=0;o<n.length;o++){var a,s=n[o];s&&(a=new t({label:s["ds6w:label"],value:s.id,name:s["ds6w:identifier"],type:s["ds6w:type"]}),"ENOTASK_AP"==widget.getValue("appId")&&a.options.icons.push(s.type_icon_url),null==i.selectedItems?i.selectedItems=a:i.selectedItems.push(a),i._applySelectedItems())}};return{init:(t,n,o)=>function(t,n,o){i=n;var s=[];null!=o&&(s=JSON.parse(JSON.stringify(o))),null!=i&&null!=i.selectedItems&&0!=i.selectedItems.length&&i.selectedItems.forEach((function(e){null==e.options.value.name&&s.push(e.options.value)}));var r=t.dsModel,l=UWA.Utils.getUUID();require(["DS/SNInfraUX/SearchCom"],(function(t){var n=t.createSocket({socket_id:l}),o=e.getRefinementToSnN(l,"addExistingAttachment",!0,["Document"]);if(o.precond=e.getPrecondForDocumentSearch(),o.resourceid_not_in=s,!UWA.is(n))throw new Error("Socket not initialized");n.dispatchEvent("RegisterContext",o),n.addListener("Selected_Objects_search",a.bind(r,"")),n.dispatchEvent("InContextSearch",o)}))}(t,n,o)}})),define("DS/RouteWebAppUX/RouteTracker/RouteValueMapping",["DS/RouteWebAppUX/RouteTracker/RouteValue"],(function(e){"use strict";var t={};return t[e.ROUTEMANAGEMENT_SUMMARY.ROUTEMANAGEMENT_OBJECTCOUNT]="pv1",t})),define("DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenuItems",["DS/RouteWebAppUX/Commands/AttachmentOpenWith","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Dropdown","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/CopyLinkContentAppId","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o,i,a,s,r){"use strict";let l=function(e,t){var n=[];return e&&n.push({name:r.deleteContent,title:r.deleteContent,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},data:null,action:{callback:function(){t()}}}),n},u=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:i.getTenantValue(),objectId:e.options.grid.id,openLink:!0}),t},d=function(e){let t=i.getSecurityContextValue();var n=[{envId:i.getTenantValue()?i.getTenantValue():"OnPremise",serviceId:"3DSpace",contextId:t,objectId:e.options.grid.id,objectType:e.options.grid.Type,displayName:e.options.grid.Title,path:[{resourceid:e.options.grid.id,type:e.options.grid.Type}]}];return{protocol:"3DXContent",version:"1.1",source:"ENXROUT_AP",widgetId:widget.id,data:{items:n}}},c=function(e,t,n){var o="";return o=null==widget.ChangeMaturityWidget?widget.getValue("xPref_CREDENTIAL")?"ctx::"+widget.getValue("xPref_CREDENTIAL"):"":i.getSecurityContextValue(),{protocol:"3DXContent",version:"1.1",source:n,widgetId:"default-widget-id",data:{items:[{envId:i.getTenantValue(),serviceId:"3DSpace",contextId:o,objectId:e.options.grid.id,objectType:t,objectTaxonomies:[t]}]}}};return{addDownloadCommand:(e,t)=>function(e,t){let n=e.Download,o={name:n.name,title:n.title,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x fonticon-"+n.fonticon},action:{callback:n.handler}};return t.push(o),t}(e,t),getOpenWithMenu:t=>function(t){let n=[];return new Promise((function(o,i){e.getOpenWithMenu(t).then((e=>{e&&e.length>0&&n.push({id:"OpenWith",type:"PushItem",title:r.openWith,icon:"export",submenu:e}),o(n)}),(e=>{o(n)}))}))}(t),deleteMenuForAttachments:(e,t)=>function(e,t){var n=!0;return e.forEach((e=>{"false"==e.canDeleteContent&&(n=!1)})),l(n,t)}(e,t),getCopyLink:(e,l)=>function(e,l){return{type:"PushItem",title:r.copyLink,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-link"},action:{callback:function(){var l=void 0;let p;1==e.length?(p=e[0].options.grid.Type,l=e[0].options.grid.Title||e[0].options.grid.Name):l="";var m=UWA.createElement("div",{styles:{display:"flex"}}),f=new t("input",{attributes:{readonly:"readonly"}});f.getContent().setStyles({display:"inline-block","border-top-right-radius":0,"border-bottom-right-radius":0}),f.inject(m);var g=new n({value:"Copy Link",className:"block",events:{onClick:function(e){if(f.setFocus(),f.elements.input.select(),f.elements.input.setSelectionRange(0,99999),document.execCommand("copy"),A.hide(),l&&""!==l){var t=r.replace(r.copyLinkSubtitle,{tag1:l});widget.notify.handler().addNotif({level:"success",title:r.copyLinkCopied,subtitle:t,sticky:!1,allowUnsafeHTML:!1})}}}});g.getContent().setStyles({display:"inline-block","border-top-left-radius":0,"border-bottom-left-radius":0,padding:"0 10px"}),g.inject(m);var A=new o({body:m,closeOnClick:!1,events:{onClickOutside:function(e){console.log("DDClickOutside")}}}),h=widget.widgetDomain;if(null==h&&(h=i.getDashboardURL()),null==h)s.getPlatformServices({platformId:"OnPremise",onComplete:function(t){let n="",o=0;for(let r of e){var i=u(r),s=a.getAppId(p);"ENOPSTR_AP"==s?i=c(r,p,s):"ENXROUT_AP"==s&&(i=d(r));let e=t["3DDashboard"]+"#app:"+s+"/content:X3DContentId="+encodeURIComponent(JSON.stringify(i));"ENOTASK_AP"==widget.getValue("appId")&&"Inbox Task"==p&&(e=t["3DDashboard"]+"#app:ENOTASK_AP/content:ids="+r.options.grid.id),0==o?(n+=e,o++):n=n+" "+e}A.hide(),A.show(),f.setFocus(),f.setValue(n),f.elements.input.select(),f.elements.input.setSelectionRange(0,99999,"backward"),g.getContent().click()}});else{let t="",n=0;for(let o of e){var b=u(o),R=a.getAppId(p);"ENOPSTR_AP"==R?b=c(o,p,R):"ENXROUT_AP"==R&&(b=d(o));let e=h+"#app:"+R+"/content:X3DContentId="+encodeURIComponent(JSON.stringify(b));"ENOTASK_AP"==widget.getValue("appId")&&"Inbox Task"==p&&(e=h+"#app:ENOTASK_AP/content:ids="+o.options.grid.id),0==n?(t+=e,n++):t=t+" "+e}A.hide(),A.show(),f.setFocus(),f.setValue(t),f.elements.input.select(),f.elements.input.setSelectionRange(0,99999,"backward"),g.getContent().click()}}}}}(e)}})),define("DS/RouteWebAppUX/Commands/RouteApprovalProcess",["DS/i3DXCompassPlatformServices/OpenWith","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/CompassDataExchange","DS/TransientWidget/TransientWidget","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o,i){"use strict";let a=function(a){var s=[];return s.push({name:i.approvalProcess,title:i.approvalProcess,type:"PushItem",icon:"route",data:null,multisel:!1,action:{callback:function(){!function(i){let a=n.getContentToLink(i),s=(new e).set3DXContent(a);var r={X3DContentId:JSON.stringify({protocol:"3DXContent",source:s._content.source,data:s._content.data,inAppMode:!0,inAppOptions:{relationSet:"AutoModeProfile",localUID:widget.id}}),x3dPlatformId:t.getTenantValue()};o.showWidget("ENXROUT_AP","",r,{mode:"transient"})}(a)}}}),s[0]};return{getOpenWithMenu:e=>a(e)}})),define("DS/RouteWebAppUX/RouteTracker/RouteValueBuilder",["DS/RouteWebAppUX/RouteTracker/RouteValueMapping"],(function(e){"use strict";function t(){this.values={}}return t.prototype.add=function(t,n){var o;return o=function(e){return"string"==typeof e&&e.length>0}(t)&&Object.keys(e).some((function(e){return e===t})),o&&"number"==typeof n&&(this.values[e[t]]=n),this},t.prototype.build=function(){return this.values},{create:function(){return new t}}})),define("DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenu",["DS/Menu/Menu","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenuItems","DS/RouteWebAppUX/Utilities/RouteWebAppDocumentUtils","DS/RouteWebAppUX/Utilities/CopyLinkContentAppId","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o,i,a){"use strict";let s,r,l,u,d=[],c=function(t,a,s,d,c,p,m){s.preventDefault(),s.stopPropagation();let f=s.target.getBoundingClientRect(),g={position:{x:f.left,y:f.top+20}},A=[],h=[],b=["Remove","Download","Preview"];A.push(t[0].options.grid),1===t.length?n.getOpenWithMenu(a).then((function(a){h=h.concat(a);var s=A[0].Type;"true"==i.isCopyLink(s)&&(h=h.concat(n.getCopyLink(t))),r?function(e,t,n,i,a){var s=[];r&&(widget.routeWebAppNotify.handler(),o.getCommands(l,u,r,t,(function(t){-1!==e.indexOf("Download")&&(s=t),i(s)}),a))}(b,d,0,(function(t){h=h.concat(t),c||(h=h.concat(n.deleteMenuForAttachments(A,p))),e.show(h,g)}),m):(c||(h=h.concat(n.deleteMenuForAttachments(A,p))),e.show(h,g))})):(c||(h=h.concat(n.deleteMenuForAttachments(A,p))),e.show(h,g))};return s={isDocumentManagementInstalled:()=>{require(["DS/DocumentCommands/DocumentCommandsV2","DS/DocumentCommands/TypeDerivativesCache","DS/DocumentCommands/Constants","DS/CoreEvents/ModelEvents"],(function(e,n,o,i){r=e;let a=["Document"];l=o,u=i,n.getTypeDerivatives(a,(function(e){d=e[a[0]]}),t.get3DSpaceURL())}),(function(e){widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:a.documentManagementNotInstalled,sticky:!1})}))},taskAttachmentContextualMenu:(e,t,n,o,i)=>function(e,t,n,o,i){let a=e.data.event,s=e.cellInfos.nodeModel?e.cellInfos.nodeModel:e.cellInfos.cellModel;if(e&&e.cellInfos&&e.cellInfos.cellModel){let e=t.getTreeDocument().getSelectedNodes(),r=e[0]._options.grid.id;c(e,s,a,r,n,o,i)}}(e,t,n,o,i)},s})),define("DS/RouteWebAppUX/Utilities/BusinessProcessActions",["DS/RouteWebAppUX/RouteWebAppBootstrap","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/WAFData/WAFData"],(function(e,t,n){"use strict";let o,i,a,s;const r=function(){return new Promise((function(e,n){var o=widget.getValue("x3dPlatformId");t.getServiceUrl({serviceName:"businessprocess",platformId:o,onComplete:function(t){a="string"==typeof t?t:t&&t[0]?t[0].url:"",e()},onFailure:function(){a="",n()}})}))},l=function(t){if(t.model.processId){!function(){if(!s)i=e.getDashboardURL(),new Promise((function(e,t){r().then((t=>{s=!0,e(t)}),(e=>{t(e)}))}))}();let d="bpa:Process",c=t.model.processId,p="Process";o=t.model.processId,l=e=>{e&&e.id&&(d="bpa:Task",c=e.id,p="Task");const t=i+"/#app:ENXBPPY_AP/content:"+encodeURI("objectType="+d+"&objectId="+c);window.open(t,"_parent")},u=e=>{console.debug("unable to load process content")},new Promise((function(e,t){n.authenticatedRequest(a+"/api/v2/runtime/tasks?processInstanceId="+o,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},onComplete:function(t){e(JSON.parse(t))},onFailure:function(e){t(e)}})})).then((e=>{let t;Array.isArray(e)&&e.length>0&&(t=e.find((e=>e.process.instanceId==o))),l(t)}),(e=>{u(e)}))}var o,l,u};return o={loadContent:e=>l(e)},o})),define("DS/RouteWebAppUX/Views/Grid/RouteWebAppTaskAttachmentsDataGridView",["DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenu","DS/RouteWebAppUX/Model/RouteWebAppTaskAttachmentModel","DS/DataGridView/DataGridViewLayout","DS/DataGridView/DataGridView","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o,i){"use strict";let a,s,r={},l=function(){t.deleteSelectedRows(),u()},u=function(){var e=document.querySelector("#approvalDialogTaskAttachments-dataGridViewContainer");!e&&s&&(e=s);let t=a.getRowModelLength();s&&(t<5?s.setStyle("height",41*t+"px"):s.setStyle("height","200px"))},d=function(t,i,s){return r={treeDocument:t,columns:i,layout:new n({rowsHeader:!1,columnsHeader:!1,rowSpacing:5,cellWidth:2}),defaultColumnDef:{widthd:"auto",typeRepresentation:"string"},virtuallyLoadAllModelItems:!0,cellDragEnabledFlag:!1,showRowBorderFlag:!0,showOutlineFlag:!0,showAlternateBackgroundFlag:!1,showContextualMenuColumnFlag:!0,onContextualEvent:function(t){t&&t.cellInfos&&e.taskAttachmentContextualMenu(t,t.cellInfos.nodeModel,!1,l,(function(e){console.log("asd")}))}},a=new o(r),a.layout.cellHeight=35,a.rowSelection="multiple",a.cellSelection="none",a.getContent().style.top="50 px",a.inject(s),s},c={build:e=>function(e){s=UWA.createElement("div",{id:"approvalDialogTaskAttachments-dataGridViewContainer",class:"approval-dialog-taskAttachments-gridView-View"});let t=[{text:i.title,dataIndex:"tree"}],n=d(e,t,s);return u(),require(["DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenu"],(function(e){e.isDocumentManagementInstalled()})),n}(e)};return c})),define("DS/RouteWebAppUX/Views/Loader/ChangeTaskAssigneeChooser",["DS/RouteWebAppUX/Utilities/Search/RouteWebAppSearchUtil","DS/TreeModel/TreeNodeModel","DS/RouteWebAppUX/RouteWebAppBootstrap","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],(function(e,t,n,o){"use strict";let i,a=function(e){var n;e&&(n=new t({label:e[0]["ds6w:label"],value:e[0].id,name:e[0]["ds6w:identifier"],type:e[0]["ds6w:type_value"]}),i.fields.taskAssigneeField.selectedItems=n)};return{launchAssigneeSearch:(t,o,s,r)=>function(t,o,s,r){var l=t.dsModel;i=s;var u=UWA.Utils.getUUID();require(["DS/SNInfraUX/SearchCom"],(function(t){var i=t.createSocket({socket_id:u}),s=["Person","User Group"],d="",c="";if(o&&"Route Template"==o.type?(d=e.getRefinementToSnN(u,"searchAssignee",!1,s),c=e.getPrecondForTaskMemberSearch(o)):"TRUE"==r.model.options.grid.routeOwnerTask&&""!=r.model.options.grid.routeOwnerTask&&null!=r.model.options.grid.routeOwnerTask||"FALSE"==r.model.options.grid.routeOwnerTask&&null!=r.model.options.grid.routeOwnerUGChoice&&""!=r.model.options.grid.routeOwnerUGChoice?(s=["Person"],d=e.getRefinementToSnN(u,"searchAssignee",!1,s),c=e.getPrecondForRouteOwnerTaskAssignment(r)):"true"==o.RestrictUserGroup&&""!=r.model.options.grid.candidateAssignee&&null!=r.model.options.grid.candidateAssignee&&"Person"==r.model.options.grid.assigneeType?(d=e.getRefinementToSnN(u,"searchAssignee",!1,s),c=e.getPrecondForRouteOwnerTaskAssignment(r)):(d=e.getRefinementToSnN(u,"searchAssignee",!1,s),c=e.getPrecondForTaskMemberSearch(o)),"OnPremise"!=n.getTenantValue()&&(d.source=["3dspace","usersgroup"]),d.precond=c.precond,d.resourceid_in=c.resourceid_in,!UWA.is(i))throw new Error("Socket not initialized");i.dispatchEvent("RegisterContext",d),i.addListener("Selected_Objects_search",a.bind(l)),i.dispatchEvent("InContextSearch",d)}))}(t,o,s,r),populateAssigneeField:(e,t)=>function(e,t){i=e,a(t)}(e,t),getPrecondForChangeAssigneeSearch:(t,n)=>function(t,n){return t&&"Route Template"==t.type?e.getPrecondForTaskMemberSearch(t):"TRUE"==n.model.options.grid.routeOwnerTask&&""!=n.model.options.grid.routeOwnerTask&&null!=n.model.options.grid.routeOwnerTask||"FALSE"==n.model.options.grid.routeOwnerTask&&null!=n.model.options.grid.routeOwnerUGChoice&&""!=n.model.options.grid.routeOwnerUGChoice||"true"==t.RestrictUserGroup&&""!=n.model.options.grid.candidateAssignee&&null!=n.model.options.grid.candidateAssignee&&"Person"==n.model.options.grid.assigneeType?e.getPrecondForRouteOwnerTaskAssignment(n):e.getPrecondForTaskMemberSearch(t)}(t,n),changeHandlerForChangeAssigneeSearch:e=>function(e){e.fields.taskAssigneeField.selectedItems&&e.fields.taskAssigneeField.selectedItems.options&&e.fields.taskAssigneeField._editor.elements.inputField.value==e.fields.taskAssigneeField.selectedItems.options.label&&(e.fields.assigneeId=e.fields.taskAssigneeField.selectedItems.options.value,"Person"==e.fields.taskAssigneeField.selectedItems.options.type?(e.fields.taskAssigneeUserName=e.fields.taskAssigneeField.selectedItems.options.name,e.fields.assigneeType=e.fields.taskAssigneeField.selectedItems.options.type):(e.fields.taskAssigneeUserName="",e.fields.assigneeType="Group"))}(e)}})),define("DS/RouteWebAppUX/Views/Form/RouteWebAppTaskViewUtil",["i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","DS/ENXESignature/Views/Dialogs/ESignatureAuthDialog","DS/Windows/ImmersiveFrame","DS/RouteWebAppUX/Model/RouteWebAppTaskAttachmentModel","DS/RouteWebAppUX/Controller/RouteWebAppCollabTaskServicesController","DS/DocumentManagement/DocumentManagement","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/RouteLinkWidget"],(function(e,t,n,o,i,a,s,r){"use strict";let l,u=function(t,n,o,a,s,r){var l=[];let u=[],f=[],g=[];var A=o.autoCompleteComponent;null!=A&&null!=A.selectedItems&&0!=A.selectedItems.length&&A.selectedItems.forEach((function(e){if(e.options.grid&&"upload"==e.options.grid.action)l.push(e.options.value);else{let t={};t.id=e.options.value,t.updateAction="CONNECT",u.push(t),f.push(e.options.value)}})),Array.isArray(t.model.data)||c(t,u,g),p(l,t.model.id).then((o=>{var l=o;if(null!=o&&0!=o.length&&o.forEach((function(e){let t={};t.id=e.data[0].id,t.updateAction="CONNECT",u.push(t)})),"saveForLater"==t.model.taskActionButton){let e;d(t,n,u,a,s,l,e,e,r)}else i.updateTaskAttachment(t,u).then((e=>{d(t,n,u,a,s,l,f,g,r)}),(t=>{widget.routeWebAppMediator.publish("approval-dialog-button-enable");var n=e.failAttachment;null!=l&&m(l),t.error?widget.routeWebAppNotify.handler().addNotif({level:"error",title:n,message:t.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:n,sticky:!1})}))}),(t=>{widget.routeWebAppMediator.publish("approval-dialog-button-enable");var n=e.failUpload;t&&t.result&&m(t.result),t.error?widget.routeWebAppNotify.handler().addNotif({level:"error",title:n,message:t.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:n,sticky:!1})}))},d=function(e,t,n,o,a,s,l,u,d){i.updateComment(e,t,n).then((n=>{let i={level:"success",subtitle:o,sticky:!1};if(widget.routeWebAppMediator.publish("approval-dialog-close"),Array.isArray(o)){if(e.model.needsOwnerReviewNo.length>0){let e={level:"success",subtitle:o[0],sticky:!0};widget.routeWebAppNotify.handler().addNotif(e)}if(e.model.needsOwnerReviewYes.length>0){let e={level:"success",subtitle:o[1],sticky:!0};widget.routeWebAppNotify.handler().addNotif(e)}}else widget.routeWebAppMediator.publish("approval-dialog-show-message",{message:i});if(null!=d)for(let e=0;e<d.length;e++)d[e].model.postSave();if("saveForLater"!=e.model.taskActionButton){e.routeId=t.id,widget.routeWebAppMediator.publish("task-action-on-save",e),r.getWidgetLinkInstance()&&r.checkIfLinked()&&r.refreshContent(e)}}),(t=>{null!=s&&m(s),null!=l&&f(l,e.model.id),null!=u&&u.length>0&&i.updateTaskAttachment(e,u),widget.routeWebAppMediator.publish("approval-dialog-button-enable"),t.error?widget.routeWebAppNotify.handler().addNotif({level:"error",title:a,subtitle:t.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:a,sticky:!1})}))},c=function(e,t,n){if(e.model.taskAttachments){let i=o.getContentIDs(),a=[];for(let t=0;t<e.model.taskAttachments.length;t++)a.push(e.model.taskAttachments[t].id);for(let e=0;e<a.length;e++)if(!i.includes(a[e])){let o={},i={};o.id=a[e],o.updateAction="DISCONNECT",t.push(o),i=JSON.parse(JSON.stringify(o)),i.updateAction="CONNECT",n.push(i)}}},p=function(e,t){var n=[],o=0;return new Promise((function(t,i){0==e.length&&t();for(var r=0;r<e.length;r++){var l={onFailure:function(e){e.result=n,i(e)},onComplete:function(e){o++,n.push(e),r==o&&t(n)}};l.tenant=s.getTenantValue(),l.securityContext=s.getSecurityContextValue(),l.tenantUrl=s.get3DSpaceURL();var u={fileName:e[r].name,fileInfo:{file:e[r]}};a.createDocument(u,l)}}))},m=function(e){var t=0;return new Promise((function(n,o){0==e.length&&n();for(var i=0;i<e.length;i++){var r={onFailure:function(e){o()},onComplete:function(e){t++,i==t&&n()}};r.tenant=s.getTenantValue(),r.securityContext=s.getSecurityContextValue(),r.tenantUrl=s.get3DSpaceURL(),a.deleteDocument(e[i].data[0].id,r)}}))},f=function(e,t){var n=0;return new Promise((function(o,i){0==e.length&&o();for(var r=0;r<e.length;r++){var l={onFailure:function(e){i()},onComplete:function(e){n++,r==n&&o()}};l.relInfo={parentId:t,parentRelName:"Reference Document",parentDirection:"from"},l.tenant=s.getTenantValue(),l.securityContext=s.getSecurityContextValue(),l.tenantUrl=s.get3DSpaceURL(),a.disconnectDocumentFromParent(e[r],l)}}))};return l={taskActionUpdate:(n,o,i)=>function(n,o,i){var a={model:{}};a.model.id=n.taskId,a.model.comments=CKEDITOR.instances.ckeditorApprovalDialog.getData(),a.model.taskActionButton=n.taskAction,a.model.needsOwnerReview=n.needsOwnerReview,a.model.taskAttachments=n.taskAttachments,a.model.esignTaskIdArray=n.esignTaskIdArray,null==a.model.id&&(a.model.ids=n.ids,a.model.tasks=n.tasks,a.model.revisions=n.revisions,a.model.needsOwnerReviewYes=n.needsOwnerReviewYes,a.model.needsOwnerReviewNo=n.needsOwnerReviewNo),"Review"==n.state&&(a.model.state=n.state,a.model.reviewersComments=n.taskComment.value,a.model.taskReviewButton=n.taskAction);var r=e.taskSave,l=e.taskSaveError;"saveForLater"!=n.taskAction&&"Review"!=n.state?null!=a.model.needsOwnerReview?"Yes"==a.model.needsOwnerReview?(r=e.taskSentForReview,l=e.taskSentForReviewError):(r=e.taskCompleted,l=e.taskCompletedError):(l=[],(r=[]).push(e.taskSentForReview),r.push(e.taskCompleted),l.push(e.taskSentForReviewError),l.push(e.taskCompletedError)):"saveForLater"!=n.taskAction&&"Review"==n.state&&(r=e.successReviewTaskPromote,l=e.failReviewTask,"Reject"==n.taskAction&&(r=e.successReviewTaskDemote));if("Approve"!=n.taskAction&&"Reject"!=n.taskAction&&"Abstain"!=n.taskAction||"True"!=o.requiresEsign)u(a,o,n,r,l,i);else{var d,c;c=s.getTenantValue();var p=n.taskAssigneeUserName,m=a.model.taskActionButton;let e;"Reject"==m&&(m="Disapprove"),e=a.model.esignTaskIdArray&&Array.isArray(a.model.esignTaskIdArray)?a.model.esignTaskIdArray.length>1?a.model.esignTaskIdArray:a.model.esignTaskIdArray[0]:a.model.id,d={eSignPolicyReference:"ESignConfigRoute",Username:p,x3dPlatformId:c,ObjectActionType:m,ObjectReference:e};var f="",g=t.init(d);g.subscribe("ESign-Dialog-Close",(function(){widget.routeWebAppMediator.publish("approval-dialog-button-enable")})),g.subscribe("ESign-Authenticated",(function(e){f=e.ESignRecordId,a.model.eSignRecordId=f,u(a,o,n,r,l,i)}))}}(n,o,i),taskUpdateComment:(e,t,n,o,i,a)=>u(e,t,n,o,i,a)},l})),define("DS/RouteWebAppUX/Views/Form/RouteTaskAttachments",["DS/WUXAutoComplete/AutoComplete","DS/UIKIT/Input/File","DS/TreeModel/TreeNodeModel","DS/RouteWebAppUX/Views/Loader/RouteWebAppInitiateDocumentChooser","DS/RouteWebAppUX/Services/RouteWebAppRouteTaskServices","DS/RouteWebAppUX/Model/RouteWebAppTaskAttachmentModel","DS/WebappsUtils/WebappsUtils","DS/RouteWebAppUX/Views/Grid/RouteWebAppTaskAttachmentsDataGridView","DS/RouteWebAppUX/RouteWebAppBootstrap","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],(function(e,t,n,o,i,a,s,r,l,u){"use strict";let d=function(e){return new t({input:!1,multiple:!0,buttonText:"",buttonClassName:"fonticon fonticon-upload",events:{onChange:function(t){for(var o=0;o<t.target.files.length;o++){var i=new n({label:t.target.files[o].name,value:t.target.files[o],grid:{action:"upload"}});i.options.value.options="","ENOTASK_AP"==widget.getValue("appId")&&i.options.icons.push(s.getWebappsAssetUrl("ENORouteMgmt","icons/16/I_Document16.png")),null==e.selectedItems?e.selectedItems=i:e.selectedItems.push(i),e._applySelectedItems()}}}})},c=function(e){var t=UWA.createElement("div",{class:"fonticon fonticon-plus",id:"attachmentSearch",title:u.addExistingAttachment});return t.addEventListener("click",(function(t){o.init(t,e.autoCompleteComponent,a.getContentIDs())})),t};return{drawListOfAttachments:(e,t)=>function(e,t){var n=new UWA.Element("div",{id:"approvalDialogTaskAttachmentsId",class:""});if(e&&e.length>0){a.destroy(),a.createModel(e),a.getModel().RouteId=t.id;let o=a.getModel();r.build(o).inject(n)}return n}(e,t),renderAttachmentField:e=>function(e){var t=new UWA.Element("div",{class:"attachmentField"});new UWA.Element("h5",{class:"attachmentHeader",text:u.attachments}).inject(t);var n=new UWA.Element("div",{class:"attachmentButton"}),o=d(e.autoCompleteComponent);o.elements.input.title=u.upload,o.inject(n),c(e).inject(n),n.inject(t),t.inject(e.formFields)}(e),getAutoComponent:t=>function(t){return new e({multiSearchMode:!0,elementsTree:function(e){return new Promise((function(n,o){var s,r=a.getContentIDs();null!=t.autoCompleteComponent&&null!=t.autoCompleteComponent.selectedItems&&0!=t.autoCompleteComponent.selectedItems.length&&t.autoCompleteComponent.selectedItems.forEach((function(e){null==e.options.value.name&&r.push(e.options.value)})),s="("+e+' AND NOT (flattenedtaxonomies:"types/Person" OR flattenedtaxonomies:"types/Business Role" OR flattenedtaxonomies:"types/Security Context" OR flattenedtaxonomies:"types/Route" OR flattenedtaxonomies:"types/Route Template" OR flattenedtaxonomies:"types/Inbox Task"))';var u=l.getTenantValue();null==u&&(u="OnPremise");var d={with_indexing_date:!0,with_nls:!1,label:"yus-1515078503005",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:responsible","ds6wg:fullname","type_icon_url"],select_file:["icon","thumbnail_2d"],query:s,order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:u,resourceid_not_in:r};d=JSON.stringify(d);var c={isfederated:!0};i.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",d,(function(e){var t=[];e&&e.results&&Array.isArray(e.results)&&e.results.forEach((function(e){var n={};e.attributes.forEach((function(e){"ds6w:what/ds6w:type"===e.name&&(n.type=e.value),"resourceid"===e.name&&(n.value=e.value),"ds6w:label"===e.name&&(n.label=e.value),"ds6w:identifier"===e.name&&(n.name=e.value),"ENOTASK_AP"==widget.getValue("appId")&&"type_icon_url"===e.name&&(n.icon=e.value)})),n.data=n,t.push(n)})),n(t)}),(function(e){o(e)}),c)}))},placeholder:u.typeToSearch,minLengthBeforeSearch:3,allowFreeInputFlag:!1})}(t)}})),define("DS/RouteWebAppUX/Views/Dialog/TaskApprovalDialog",["DS/Windows/Dialog","DS/Controls/Editor","DS/Controls/Button","DS/Windows/ImmersiveFrame","DS/RouteWebAppUX/Controller/RouteWebAppCollabTaskServicesController","DS/RouteWebAppUX/Views/Form/RouteTaskAttachments","DS/RouteWebAppUX/Views/Form/RouteWebAppTaskViewUtil","DS/RouteWebAppUX/RouteWebAppBootstrap","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o,i,a,s,r,l){"use strict";let u,d=function(e){let t=e[0].dataelements.routeTaskApprovalComments;for(let n=1;n<e.length;n++)if(""===t&&t!==e[n].dataelements.routeTaskApprovalComments)return"";return t},c=function(e){let t=e[0].dataelements.routeTaskReviewerComments;for(let n=0;n<e.length;n++)if(""===t&&t!==e[n].dataelements.routeTaskReviewerComments)return"";return t},p=function(e,t){for(let n=0;n<e.length;n++)"Yes"==e[n].dataelements.needsReview?t.needsOwnerReviewYes.push(e[n].id):t.needsOwnerReviewNo.push(e[n].id)},m=function(e){var t=[];let n;for(var o=0;o<e.length;o++){var i={};i.id=e[o],t.push(i)}return n={data:t},n},f=function(t,i,r,u){let d,c=new UWA.Element("div",{id:"TaskApprovalDialog",class:""});!function(){let e=new UWA.Element("h5",{class:"required",text:l.comments}).inject(c);UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(e),"Review"==t.state?t.taskComment=t.taskReviewComment:t.taskComment=t.taskApproveComment;t.taskCommentEditor=new UWA.Element("textarea",{name:"ckeditorApprovalDialog"}),require(["DS/CKEditor/CKEditor"],(function(e){var n=e.inline("ckeditorApprovalDialog",{floatSpaceDockedOffsetX:175,floatSpaceDockedOffsetY:0});e.config.toolbarGroups=[{name:"links"}],e.config.removeButtons="Cut,Copy,Paste,Undo,Redo,Anchor,Underline,Strike,Subscript,Superscript",e.config.removeDialogTabs="link:advanced;link:target",e.config.removePlugins="image,forms,elementspath,magicline",e.config.enterMode=e.ENTER_BR,e.config.baseFloatZIndex=5e4,e.config.uiColor="#ffffff",e.config.title="",CKEDITOR.on("instanceReady",(function(e){CKEDITOR.instances.ckeditorApprovalDialog.setData(t.taskComment)})),n.on("contentDom",(function(){var t=n.editable();t.attachListener(t,"click",(function(t){var n=new e.dom.elementPath(t.data.getTarget(),this).contains("a");n&&2!=t.data.$.button&&window.open(n.getAttribute("href"))}))})),CKEDITOR.instances.ckeditorApprovalDialog.on("change",(function(e){var t=CKEDITOR.instances.ckeditorApprovalDialog.getData().replace(/<br\s*[\/]?>/gi," ").replace(/[\n\r]/g," ").replace(/&nbsp;/g," ").replace(/\s+/g," "),n=CKEDITOR.instances.ckeditorApprovalDialog.editable().getText();""!=t.trim()&&""!=n.trim()?(d.buttons.Ok.disabled=!1,d.buttons.Apply.disabled=!1):(d.buttons.Ok.disabled=!0,d.buttons.Apply.disabled=!0)})),CKEDITOR.on("dialogDefinition",(function(e){var t=e.data.name,n=e.data.definition;"link"==t&&n.getContents("info").get("linkType").items.splice(1,3)}))})),t.taskCommentEditor.inject(c);let n=t.taskComment._myInput;null!=n&&(n.style.width="100%",n.style.resize="both",n.style.overflow="auto")}(),t.formFields=new UWA.Element("div",{id:"taskAttachmentContainer",class:"task-attachment-container"}),t.formFields.inject(c),t.autoCompleteComponent=a.getAutoComponent(t),a.renderAttachmentField(t),t.autoCompleteComponent.inject(t.formFields),new UWA.Element("div",{html:"&nbsp;"}).inject(t.formFields),null!=t.tasks&&1!=t.tasks.length||g(t,i);let p=!0;t.taskComment.value&&""!=t.taskComment.value&&(p=!1);let m=r,f=l[m],A=l[m+"Progressing"],h=0,b="";h=t.taskAttachments.length,null==t.tasks?b=t.taskTitle:1==t.tasks.length?b=t.tasks[0].dataelements.title:(h=0,b=t.taskNumber+" Tasks");let R=h<4?299+41*h:464,v=new o;function S(){d.buttons.Ok.disabled=!0,d.buttons.Apply.disabled=!0}v.inject(document.body),d=new e({modalFlag:!0,width:432,height:R,title:f+" - "+b,content:c,immersiveFrame:v,resizableFlag:!0,domId:"RouteWebAppDialogId",buttons:{Ok:new n({label:f,disabled:p,onClick:function(e){e.dsModel.label=A,S(),t.taskAction=r,s.taskActionUpdate(t,i,u),widget.routeWebAppMediator.subscribe("approval-dialog-close",(function(){e.dsModel.dialog.close()}))}}),Apply:new n({label:l.save,disabled:p,onClick:function(e){e.dsModel.label=l.SaveProgressing,S(),t.taskAction="saveForLater",s.taskActionUpdate(t,i,u),widget.routeWebAppMediator.subscribe("approval-dialog-close",(function(){e.dsModel.dialog.close()}))}}),Cancel:new n({label:l.cancel,onClick:function(e){e.dsModel.dialog.close()}})}}),widget.routeWebAppMediator.subscribe("approval-dialog-button-enable",(function(){d.buttons.Ok.disabled=!1,d.buttons.Apply.disabled=!1,d.buttons.Ok.label=f,d.buttons.Apply.label=l.save})),d.addEventListener("close",(function(){widget.routeWebAppMediator.publish("approval-commands-buttons-enable")}))},g=function(e,t){if(e.taskAttachments&&e.taskAttachments.length>0){a.drawListOfAttachments(e.taskAttachments,t).inject(e.formFields)}},A=function(e,t){return"Assigned"==e||"Assign"==e?["Approve","Reject","Abstain","Comment"].includes(t):"Review"==e&&["Accept","Reject"].includes(t)};return u={init:e=>function(e){if(Array.isArray(e)){let t=l.taskIdIncorrect,n=e[0].model.action;e[0].model.securityContext&&e[0].model.tenant&&(widget.data.routeCredentials={securityContext:e[0].model.securityContext,tenant:e[0].model.tenant});let o=[],a=[];for(let t=0;t<e.length;t++)o.includes(e[t].model.options.grid.id)||o.push(e[t].model.options.grid.id);for(let t=0;t<e.length;t++)a.includes(e[t].model.routePropertiesInfo.id)||a.push(e[t].model.routePropertiesInfo.id);let s=m(o);r.init().then((r=>{i.fetchRouteTasks(s).then((t=>{let i=JSON.parse(t),s={},r={},l=[],u=[],m=0,g="False",A=[],h=[];for(let e=0;e<i.data.length;e++)A.includes(i.data[e].id)||(A.push(i.data[e].id),h.push(i.data[e]),"True"==i.data[e].dataelements.routeTaskRequiresESign&&(g="True",l.push(i.data[e].id),u.push(i.data[e].dataelements.revision),m++));r.routeIds=a,s.esignTaskIdArray=l,r.requiresEsign=g,r.taskCount=m,s.ids=o,s.tasks=h,s.taskNumber=i.data.length,s.taskApproveComment=d(i.data),s.taskReviewComment=c(i.data),s.needsOwnerReviewYes=[],s.needsOwnerReviewNo=[],p(i.data,s),s.state=i.data[0].dataelements.state,s.taskAttachments=i.data[0].relateddata.references,s.revisions=u,s.taskAssigneeUserName=i.data[0].relateddata.assignees[0].dataelements.name,f(s,r,n,e)}),(e=>{e.error?widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:t,sticky:!1})}))}))}else{let t=e.routeId,n=e.taskId,o=e.action,a=l.taskIdIncorrect;if(e.securityContext&&e.tenant&&(widget.data.routeCredentials={securityContext:e.securityContext,tenant:e.tenant}),!t||!n||""==t||""==n)return widget.routeWebAppMediator.publish("approval-commands-buttons-enable"),void widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:a,sticky:!1});i.fetchRouteTask(n).then((e=>{var i=e.data[0];if(!A(i.dataelements.state,o))return widget.routeWebAppMediator.publish("approval-commands-buttons-enable"),void widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:l.actionNotAllowed,sticky:!1});let a={},s={};a.taskId=n,a.taskTitle=i.dataelements.title,a.taskApproveComment=i.dataelements.routeTaskApprovalComments,a.taskReviewComment=i.dataelements.routeTaskReviewerComments,a.needsOwnerReview=i.dataelements.needsReview,a.taskAssigneeUserName=i.relateddata.assignees[0].dataelements.name,a.state=i.dataelements.state,a.taskAttachments=i.relateddata.references,s.id=t,s.requiresEsign=i.dataelements.routeTaskRequiresESign,a.revision=i.dataelements.revision,f(a,s,o)}),(e=>{widget.routeWebAppMediator.publish("approval-commands-buttons-enable"),e.error?widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:a,sticky:!1})}))}}(e)},u})),define("DS/RouteWebAppUX/Utilities/CollabTasksResponseFormatter",["DS/RouteWebAppUX/RouteWebAppBootstrap","DS/PlatformAPI/PlatformAPI"],(function(e,t){"use strict";let n;return n={getCollabTaskReponse:n=>function(n){let o=n._attributes,i=n._rowObjects[0].relateddata.route[0],a="false";n.collection._allRouteTaskApprovalActions&&n.collection._allRouteTaskApprovalActions.forEach((e=>{"Abstain"==e.actualValue&&(a="true")}));let s,r=n._rowObjects[0].dataelements,l=r.userGroupMember,u=r.restrictMember,d="false";null!=l&&(s=l.split(""),s.includes(t.getUser().login)&&(d="true"));let c=e.getLoginUser()==r.routeOwner,p=n.securityContext,m={};null!=n.currentTenant&&(m=n.currentTenant);let f=["showEditTask~false","taskId~"+o.id,"canPerformTaskAction~true","isRouteOwner~"+c],g=function(e){let t=[];return e.forEach(((e,n)=>{"true"==e.split("~")[1]&&t.push(e.split("~")[0])})),t}(f);return{model:{model:{postSave:n.postMenuSave,routePropertiesInfo:{id:i.id,model:{id:i.id,Name:i.dataelements.name,Title:i.dataelements.title,state:void 0,Type:i.type,Owner:r.routeOwner,Project:r.project,ProjectTitle:r.project}},options:{label:r.title,typeicon:r.typeicon,grid:{id:o.id,type:"Inbox Task",originated:r.originated,taskRequirement:r.taskRequirement,allowDelegation:r.routeTaskDelegationAllowed,assigneeSetDueDate:r.routeTaskAssigneeSetDueDate,dateOffsetFrom:"",dueDateOffset:"",needsOwnerReview:r.needsReview,reviewersComments:r.routeTaskReviewerComments,title:r.title,comments:r.routeTaskApprovalComments,taskAction:r.routeTaskAction,taskActionNLS:r.routeTaskAction,instructions:r.routeTaskInstructions,taskDueDate:r.routeTaskDueDate,current:"Assign"==r.state?"Assigned":r.state,currentNLS:r.state,modified:r.modified,revision:r.revision,assigneeId:r.assigneeId,assigneeType:r.assigneeType,assigneePID:r.assigneePID,taskAssigneeUsername:r.taskAssigneeUsername,routeOwnerUGName:r.routeOwnerUGName,taskDetails:f,taskDetailsList:g,typeicon:r.typeicon,routeOwnerTask:r.routeOwnerTask?r.routeOwnerTask.toUpperCase():r.routeOwnerTask,routeOwnerUGChoice:o.routeOwnerUGName,isInitialTask:o.routeTaskIsInitialTask,templateTask:o.routeTemplateTask,taskEditSetting:o.routeTaskEditSettings,taskAttachments:[],routeContents:[],userGroupAction:o.routeTaskUserGroupAction,taskAcceptLink:d,userGroupInfo:"",taskSubRoutes:[],subRouteApprovalStatus:"",subRouteGridApprovalStatus:"",RouteTaskContentToReview:[],ContentToReviewIds:[],validTaskData:!0,stateNLS:r.state},data:{},id:r.id},securityContext:p,tenant:m},routePropertiesInfo:{id:i.id,model:{id:i.id,Name:i.dataelements.name,Title:i.dataelements.title,Maturity_State:void 0,state:void 0,Type:i.type,Route_Status:i.dataelements.status,organization:i.dataelements.organization,Project:r.project,ProjectTitle:r.project,ScopeMembers:i.dataelements.attrScopeMembers,routeCompletionAction:i.dataelements.autoStopOnRejection,requiresEsign:r.routeTaskRequiresESign,taskEditSetting:i.dataelements.taskEditSetting,AutoStopOnRejection:"Deferred",organizationTitle:i.dataelements.organizationTitle,showAbstain:a,restrictMember:u,relId:i.relId}}}}}(n)},n})),define("DS/RouteWebAppUX/Views/Dialog/ChangeAssignee",["DS/Windows/Dialog","DS/Controls/Editor","DS/Windows/ImmersiveFrame","DS/RouteWebAppUX/Controller/RouteWebAppCollabTaskServicesController","DS/Controls/Button","DS/RouteWebAppUX/Views/Loader/ChangeTaskAssigneeChooser","DS/RouteWebAppUX/Views/Form/ENORouteAutoComplete","DS/RouteWebAppUX/RouteWebAppBootstrap","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],(function(e,t,n,o,i,a,s,r,l){let u,d,c=function(c){let m=[];for(let e=0;e<c.length;e++)m.push(c[e].model.routePropertiesInfo.id);let f=p(m);o.fetchRouteAndTasks(f).then((p=>{let m=new n;m.inject(document.body);let f=new UWA.Element("div",{id:"assigneeWarning",class:""});u.formFields=new UWA.Element("div",{id:"changeAssigneeWarning",class:""});let g,A=JSON.parse(p);if(d=[],1==A.data.length){g=c[0].model.options.grid.title,g=l.changeAssignee+" : "+(g.length>40?g.substring(0,37)+"...":g),c[0].model.options.grid.Scope=A.data[0].attrScope,c[0].model.options.grid.attrScopeMembers=A.data[0].attrScopeMembers;for(let e=0;e<A.data[0].tasks.length;e++)A.data[0].tasks[e].id==c[0].model.options.grid.id&&(c[0].model.options.grid.routeOwnerUGChoice=A.data[0].tasks[e].routeOwnerUGChoice,c[0].model.options.grid.routeOwnerUGName=A.data[0].tasks[e].routeOwnerUGName,c[0].model.options.grid.routeOwnerUGTitle=A.data[0].tasks[e].routeOwnerUGTitle,c[0].model.options.grid.routeOwnerUGUUID=A.data[0].tasks[e].routeOwnerUGUUID,c[0].model.options.grid.candidateAssignee=A.data[0].tasks[e].candidateAssignee);A.data[0].RestrictUserGroup=A.data[0].RestrictUserGroup,A.data[0].Scope=A.data[0].attrScope,A.data[0].ScopeMembers=A.data[0].attrScopeMembers,d.push(A.data[0])}else{g=l.changeAssignee+" : "+A.data.length+" tasks";for(let e=0;e<c.length;e++){c[e].model.options.grid.attrScope=A.data[e].attrScope,c[e].model.options.grid.attrScopeMembers=A.data[e].attrScopeMembers;for(let t=0;t<A.data[e].tasks.length;t++)A.data[e].tasks[t].id==c[e].model.options.grid.id&&(c[e].model.options.grid.routeOwnerUGChoice=A.data[e].tasks[t].routeOwnerUGChoice,c[e].model.options.grid.routeOwnerUGName=A.data[e].tasks[t].routeOwnerUGName,c[e].model.options.grid.routeOwnerUGTitle=A.data[e].tasks[t].routeOwnerUGTitle,c[e].model.options.grid.routeOwnerUGUUID=A.data[e].tasks[t].routeOwnerUGUUID,c[e].model.options.grid.candidateAssignee=A.data[e].tasks[t].candidateAssignee);if(A.data[e].RestrictUserGroup=A.data[e].RestrictUserGroup,A.data[e].Scope=A.data[e].attrScope,A.data[e].ScopeMembers=A.data[e].attrScopeMembers,d.push(A.data[e]),"true"==A.data[e].RestrictUserGroup&&""!=c[e].model.options.grid.candidateAssignee&&null!=c[e].model.options.grid.candidateAssignee&&"Person"==c[e].model.options.grid.assigneeType)return void widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:l.scopeError,sticky:!0})}}u.assigneeField=new UWA.Element("div",{id:"SearchAssigneeField",class:"fonticon-chooser-display"}),u.fields={},u.formFields.inject(f);let h=new UWA.Element("h5",{class:"required",text:l.taskAssignee}).inject(u.formFields);UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(h);var b={isMultiSearchMode:!1};b.placeHolderValue=l.typeToSearch,b.minLengthToType=3,b.isFreeInputAllowed=!1,b.toKeepSearchResultsFlag=!1,"OnPremise"!=r.getTenantValue()&&(b.source=["3dspace","usersgroup"]),b.getPrecond=function(){return a.getPrecondForChangeAssigneeSearch(d[0],c[c.length-1])},b.getChangeHandler=function(){return a.changeHandlerForChangeAssigneeSearch(u)},u.fields.taskAssigneeField=s.drawAutoCompleteComponent(b),u.fields.taskAssigneeField.inject(u.assigneeField),new UWA.Element("div",{html:"&nbsp;"}).inject(u.assigneeField),u.fields.taskAssigneeChooser=new i({icon:{iconName:"search"}}),u.fields.taskAssigneeChooser.inject(u.assigneeField),u.fields.taskAssigneeChooser.getContent().addEventListener("buttonclick",(function(){if("undefined"!=typeof dscef){let e={taskProperties:u,taskGraphModel:void 0,invokeFrom:"dialog"};widget.routeMgmtMediator.publish("launch-task-assignee-search",e)}else a.launchAssigneeSearch(event,d[0],u,c[c.length-1])})),u.assigneeField.inject(u.formFields),new UWA.Element("h5",{text:l.assigneecomments}).inject(u.formFields),u.fields.descField=new t({widthInCharNumber:51,nbRows:5,newLineMode:"enter"}),u.fields.descField.inject(u.formFields),new e({modalFlag:!0,width:500,height:300,title:g,content:f,domId:"ChangeAssigneeImmersiveFrame",immersiveFrame:m,buttons:{Ok:new i({disabled:!1,onClick:function(e){var t;e.dsModel.dialog;u.fields.taskAssigneeField.selectedItems&&u.fields.taskAssigneeField.selectedItems.options&&(t=u.fields.taskAssigneeField.selectedItems.options.value);var n=c[0].model.options.grid.assigneePID;if(null!=t)if(t.contains("uuid:")&&!n.contains("uuid:"))o.getUserGroupPhysicalId(t).then((n=>{t=n.ObjIds[0],c[0].model.options.grid.assigneeId!=t?o.changeAssignee(c,u).then((t=>{e.dsModel.dialog.close(),widget.routeWebAppNotify.handler().addNotif({level:"success",subtitle:l.changeAssigneeSuccessful,sticky:!0});for(let e=0;e<c.length;e++)c[e].model.postSave()}),(e=>{if(e&&e.error&&-1!=e.error.indexOf("System Error: #5000001:")){var t=e.error.replace("System Error: #5000001:","");widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:t,sticky:!1})}else e&&e.error?widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:l.changeAssigneeError,sticky:!1})})):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:l.taskNewAssignee,sticky:!0})}),(e=>{}));else{if(n==t&&"TRUE"!=c[0].model.options.grid.routeOwnerTask)return void widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:l.taskNewAssignee,sticky:!0});o.changeAssignee(c,u).then((t=>{e.dsModel.dialog.close(),widget.routeWebAppNotify.handler().addNotif({level:"success",subtitle:l.changeAssigneeSuccessful,sticky:!0});for(let e=0;e<c.length;e++)c[e].model.postSave()}),(e=>{if(e&&e.error&&-1!=e.error.indexOf("System Error: #5000001:")){var t=e.error.replace("System Error: #5000001:","");widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:t,sticky:!1})}else e&&e.error?widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:l.changeAssigneeError,sticky:!1})}))}else widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:l.errorTaskAssignee,sticky:!0})}}),Cancel:new i({onClick:function(e){e.dsModel.dialog.close()}})}}).addEventListener("close",(function(e){try{m&&"undefined"!=typeof dscef?(m.elements.container.setStyle("height","1px"),m.elements.container.setStyle("width","1px")):m&&m.destroy()}catch(e){console.log("Error while destroying the change assignee dialog -immersive frame")}}))}),(e=>{}))},p=function(e){var t=[];let n;for(var o=0;o<e.length;o++){var i={};i.id=e[o],t.push(i)}return n={data:t},n};return{changeAssignee:e=>function(e){u={},c(e)}(e)}})),define("DS/RouteWebAppUX/Views/Menu/RouteTaskActionsCtxMenu",["DS/Menu/Menu","DS/RouteWebAppUX/Views/Dialog/TaskApprovalDialog","DS/RouteWebAppUX/Commands/RouteApprovalProcess","DS/RouteWebAppUX/Commands/ApprovalMaturityCmd","DS/RouteWebAppUX/Utilities/RouteLinkWidget","DS/RouteWebAppUX/Utilities/CompassDataExchange","DS/RouteWebAppUX/Components/RouteWebAppNotifications","DS/RouteWebAppUX/Components/RouteWebAppMediator","DS/RouteWebAppUX/Controller/RouteWebAppCollabTaskServicesController","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Views/Dialog/ChangeAssignee","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],(function(e,t,n,o,i,a,s,r,l,u,d,c){"use strict";const p={Approve:{icon:"thumbs-up",title:c.approve,color:"#57b847",className:"item-approve"},Reject:{icon:"thumbs-down",title:c.reject,color:"#ea4f37",className:"item-reject"},Abstain:{icon:"ignore",title:c.abstain,className:"item-abstain"},Comment:{icon:"comment",title:c.comment,className:"item-comment"},Accept:{icon:"check",title:c.accept,color:"#57b847",className:"item-accept"},AssignToSelf:{icon:"user-ok",title:c.assign,color:"#57b847",className:"item-assign"},ChangeAssignee:{icon:"user-change",title:c.changeAssignee,color:"#57b847",className:"user-change"}},m=function(e,t,n){return new Promise((function(o,a){let s=[];if(t&&null!=e.model&&null!=e.model.route&&0!=e.model.route.length)if(-1!==t.indexOf("Approve")?(s.push(f("Approve",e)),s.push(f("Reject",e)),1==e.model.showAbstain&&s.push(f("Abstain",e))):-1!==t.indexOf("Comment")?s.push(f("Comment",e)):-1!==t.indexOf("Review")&&(s.push(f("Accept",e)),s.push(f("Reject",e))),"idcard-ctxCommand"==e.model.fromPage&&s.push(b(e)),i.getWidgetLinkInstance()&&i.checkIfLinked())0==n&&s.push(R(e)),o(s);else{if(0==n){let t=v(e.model);s.push(h(t))}o(s)}else o(s)}))},f=function(e,n){let o="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+p[e].icon;return p[e].color&&(o+=" "+p[e].className),{name:p[e].title,title:p[e].title,type:"PushItem",fonticon:{content:o},data:null,action:{callback:function(){n.model.action=e,t.init(n.model)}}}},g=function(e,t){let n=p[e].icon;return{className:p[e].className,fonticon:n,selectable:!0,text:p[e].title,title:p[e].title,handler:A.bind(this,t,e)}};let A=function(e,n){if(e[0].model.action=n,e[0].model.securityContext&&e[0].model.tenant&&(widget.data.routeCredentials={securityContext:e[0].model.securityContext,tenant:e[0].model.tenant}),"AssignToSelf"==n)u.init().then((t=>{l.acceptTask(e).then((t=>{widget.routeWebAppNotify.handler().addNotif({level:"success",subtitle:c.acceptTaskSuccess,sticky:!1});for(let t=0;t<e.length;t++)e[t].model.postSave()}),(e=>{widget.routeWebAppNotify.handler().addNotif({level:"success",subtitle:e.error,sticky:!1})}))}));else if("ChangeAssignee"==n){let t=u.getLoginUser(),n=e[0].model.options.grid.current,o=e[0].routePropertiesInfo.model.restrictMember,i="";"organization"==o&&(i=e[0].routePropertiesInfo.model.organization);let a=!0,s=e[0].model.routePropertiesInfo.model.Owner,r=e[0].model.options.grid.routeOwnerTask;if(s!=t&&"FALSE"==e[0].model.options.grid.allowDelegation&&(a=!1,widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:c.changeAccessError,sticky:!1})),a)for(let l=1;l<e.length;l++){let u=e[l].routePropertiesInfo.model.restrictMember,d=e[l].routePropertiesInfo.model.organization;s=e[l].model.routePropertiesInfo.model.Owner;let p=e[l].model.options.grid.routeOwnerTask;if("Assigned"!=n||n!=e[l].model.options.grid.current){a=!1,widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:c.reviewStateError,sticky:!1});break}if(!a||s!=t&&"FALSE"==e[l].model.options.grid.allowDelegation){a=!1,widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:c.changeAccessError,sticky:!1});break}if(!a||o!=u||"organization"==o&&o==u&&i!=d){a=!1,widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:c.scopeError,sticky:!1});break}if(!a||p!=r){a=!1,widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:c.scopeError,sticky:!1});break}}a&&u.init().then((t=>{d.changeAssignee(e)}))}else t.init(e)};const h=function(e){return{name:e.title,title:e.title,type:e.type,fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+e.icon},data:null,action:{callback:function(){e.action.callback()}}}},b=function(e){return{name:c.maturity,title:c.maturity,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collaborative-lifecycle-management"},data:null,action:{callback:function(){o.lifeCycle(e)}}}},R=function(e){return{name:c.approvalProcess,title:c.approvalProcess,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-route"},data:null,action:{callback:function(){let t=a.getContentToLink(e.model);i.loadContent(t)}}}},v=function(e){return n.getOpenWithMenu(e)};return{renderApprovalsActionMenu:(t,n,o)=>function(t,n,o){return n?UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-chevron-down ",title:c.idCardCtxMenuTooltip,styles:{"font-size":"18px"},events:{click:function(i){let a=i.target.getBoundingClientRect(),s={position:{x:a.left,y:a.top+20}};t.model.fromPage="idcard-ctxCommand",m(t,n,o).then((t=>{e.show(t,s)}))}}}):""}(t,n,o),getApprovalActionsMenu:(e,t,n)=>m(e,t,n),getApprovalCommandMenu:e=>v(e),getCollabTaskApprovalActionsMenu:(e,t)=>function(e,t){widget.routeMgmtMediator=new r,widget.notify=new s;let n=[];return-1!==t.indexOf("Approve")?Array.isArray(e)&&(n.push(g("Approve",e)),n.push(g("Reject",e)),"true"==e[0].routePropertiesInfo.model.showAbstain&&n.push(g("Abstain",e))):-1!==t.indexOf("Comment")?Array.isArray(e)&&n.push(g("Comment",e)):-1!==t.indexOf("Review")?Array.isArray(e)&&(n.push(g("Accept",e)),n.push(g("Reject",e))):-1!==t.indexOf("AssignToSelf")?Array.isArray(e)&&n.push(g("AssignToSelf",e)):-1!==t.indexOf("ChangeAssignee")&&Array.isArray(e)&&n.push(g("ChangeAssignee",e)),n}(e,t)}})),define("DS/RouteWebAppUX/Views/RouteActivityState",["DS/RouteWebAppUX/Utilities/RouteWebAppRouteViewUtils","DS/RouteWebAppUX/Views/Menu/RouteTaskActionsCtxMenu","DS/RouteWebAppUX/Utilities/RouteLinkWidget","DS/RouteWebAppUX/Utilities/CompassDataExchange","DS/RouteWebAppUX/Utilities/BusinessProcessActions","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],(function(e,t,n,o,i,a){"use strict";const s=function(e){if(e.model.fromPage="hyperlink",n.getWidgetLinkInstance()&&n.checkIfLinked()){let t=o.getContentToLink(e.model);n.loadContent(t)}else{t.getApprovalCommandMenu(e.model).action.callback()}};let r=function(t,n,o){if(n.model.processControl){let a={icon:"flow-branch-downward",label:e.getRouteActivityStateNLS(t)};return a.func=0==o?function(e){!function(e){i.loadContent(e)}(n)}:void 0,a}{let i=e.getRouteActivityStateNLS(t),a={icon:e.getRouteActivityStateIcon(t),label:i,tooltip:n.model.contentInfoExpression};return t&&t.contains("your")&&0==o?(a.func=function(e){s(n)},a.icon+=" awaiting-tasks"):a.func=void 0,a}};return{renderActivityState:t=>function(t){let n;if(t.model.state&&"In Process"==t.model.state){n=UWA.createElement("div",{class:"activity-state-container"});let o=e.getRouteActivityStateIcon(t.model.Activity_State),i=e.getRouteActivityStateNLS(t.model.Activity_State),a="";"thumbs-up"==o||"comment"==o||"notification-read"==o?a="#008000":"thumbs-down"==o||"stop"==o?a="#ff0000":("ignore"==o||"play-flash-off"==o||"hourglass"==o&&!i.contains("your"))&&(a="#77797c");let r=UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+o,styles:{color:a}}).inject(n);if(t.model.Activity_State&&t.model.Activity_State.contains("your")){let e;if(t.model.Activity_State.contains("(")){const t=i.split("(");i=t[0],e="("+t[1]}r.addClassName("awaiting-tasks"),UWA.createElement("a",{class:"rt-activity-state",html:"&nbsp;"+i,title:i,events:{click:function(e){s(t)}},styles:{cursor:"pointer"}}).inject(n),e&&UWA.createElement("a",{class:"rt-activity-state-counter",html:"&nbsp;"+e+"&nbsp;",title:i,events:{click:function(e){s(t)}},styles:{cursor:"pointer"}}).inject(n)}else UWA.createElement("span",{class:"rt-activity-state",html:"&nbsp;"+i+"&nbsp;",title:i,styles:{color:"#77797c"}}).inject(n)}return n}(t),getRouteActivityState:(e,t,n)=>r(e,t,n)}})),define("DS/RouteWebAppUX/Views/RouteTaskActionsCmd",["DS/RouteWebAppUX/Utilities/RouteWebAppRouteViewUtils","DS/RouteWebAppUX/Views/Dialog/TaskApprovalDialog","DS/Controls/Button","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],(function(e,t,n,o){"use strict";return{renderTaskActionCommands:i=>function(i){if(i.model.state&&"In Process"==i.model.state){let a=i.model.approvalAction,s=!0,r=UWA.createElement("div",{class:"approval-action-container"}),l=e.getApprovalActionIcon(a);for(const e of l){let l=new n({displayStyle:"normal",domId:"RApprovalAction",emphasize:e.emphasize,icon:{iconName:e.icon,fontIconFamily:WUXManagedFontIcons.Font3DS}});l.inject(r),l.getContent().addEventListener("buttonclick",(function(){l.disabled=!0,i.model.action=e.action,t.init(i.model)})),widget.routeWebAppMediator.subscribe("approval-commands-buttons-enable",(function(){l.disabled=!1,s=!0})),"Comment"==a&&UWA.createElement("a",{class:"approval-action-text",html:o.comment,events:{click:function(n){1==s&&(s=!1,i.model.action=e.action,t.init(i.model))}}}).inject(r)}return r}}(i)}})),define("DS/RouteWebAppUX/RouteTracker/RouteDimensionMapping",["DS/RouteWebAppUX/RouteTracker/RouteDimension"],(function(e){"use strict";var t={};return t[e.ROUTEMANAGEMENT_WELCOMEPANEL.ROUTEMANAGEMENT_ACTIVITY]={PersonalDimention:"pd1",allowedValues:["Routes","Templates","New Route","New Template"]},t[e.ROUTEMANAGEMENT_TASKVIEW.ROUTEMANAGEMENT_INITIALTASKVIEW]={PersonalDimention:"pd1",allowedValues:["GridView","GraphView"]},t[e.ROUTEMANAGEMENT_TASKVIEW.ROUTEMANAGEMENT_TASKVIEWSWITCH]={PersonalDimention:"pd2",allowedValues:["Switch to Grid View","Switch to Graph View"]},t[e.ROUTEMANAGEMENT_SUMMARY.ROUTEMANAGEMENT_OBJECTTYPE]={PersonalDimention:"pd1",allowedValues:["Route","Template"]},t[e.ROUTEMANAGEMENT_ROUTE.ROUTEMANAGEMENT_ROUTECOMMAND]={PersonalDimention:"pd1",allowedValues:["Route - Start","Route - Save as Draft","Route - Stop","Route - Restart","Route - Resume","Route - Change Owner","Route - Delete","Route - Save as Template","Route - Properties"]},t[e.ROUTEMANAGEMENT_TASK.ROUTEMANAGEMENT_TASKCOMMAND]={PersonalDimention:"pd1",allowedValues:["Task - Approve","Task - Reject","Task - Abstain","Task - Save for later","Task - Complete","Task - Accept","Task - Mark as Complete","Task - Select Assignee","Task - Change Assignee","Task - Accept Task","Task - Create Subroute","Task - Delete Subroute","Task - Delete","Task - Approval Process"]},t[e.ROUTEMANAGEMENT_TEMPLATE.ROUTEMANAGEMENT_TEMPLATECOMMAND]={PersonalDimention:"pd1",allowedValues:["Template - Release","Template - Save as Draft","Template - Set to Draft","Template - Set to Released","Template - Set to Archived","Template - Delete","Template - New Revision","Template - Revisions","Template - Create route from template","Template - Change Owner","Template - Maturity","Template - Properties"]},Object.freeze(t)})),define("DS/RouteWebAppUX/Services/RouteWebAppApprovalStatusService",["UWA/Core","UWA/Class/Promise","DS/RouteWebAppUX/RouteWebAppBootstrap"],(function(e,t,n){"use strict";const o=function(e){return new t((function(t,o){null!=e&&null!=e.data&&0!=e.data.length||t();let i=n.getRouteServiceBaseURL()+"/contentsApprovalStatus",a={method:"POST",headers:{"Content-Type":"application/json"}};a.data=JSON.stringify(e),a.onComplete=function(e){let n=JSON.parse(e);t(n)},a.onFailure=function(e,t,n){o()},n.authenticatedRequest(i,a)}))};return{fetchApprovalStatusForContent:e=>function(e){return new t((function(t,o){null==e&&t(),n.getCSRFToken().then((function(n){e.csrf=JSON.parse(n).csrf,t()}))})).then((function(){return o(e)}))}(e),fetchRouteContentIds:e=>function(e){return new t((function(t,o){let i=n.getRouteServiceBaseURL()+"/"+e+"/contents?include=none&$fields=none",a={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){let n=JSON.parse(e);t(n)},onFailure:function(e){o(e)}};n.authenticatedRequest(i,a)}))}(e)}})),define("DS/RouteWebAppUX/Controller/RouteWebAppApprovalStatusServiceController",["DS/RouteWebAppUX/Services/RouteWebAppApprovalStatusService","UWA/Promise"],(function(e,t){"use strict";let n;return n={fetchApprovalStatusForContent:function(n){return new t((function(t,o){e.fetchApprovalStatusForContent(n).then((e=>{t(e)}),(e=>{o(e)}))}))},fetchRouteContentIds:function(n){return new t((function(t,o){e.fetchRouteContentIds(n).then((e=>{t(e)}),(e=>{o(e)}))}))}},n})),define("DS/RouteWebAppUX/RouteApprovalsIDCardUX",["DS/RouteWebAppUX/Views/RouteActivityState","DS/RouteWebAppUX/Views/Menu/RouteTaskActionsCtxMenu","DS/RouteWebAppUX/Views/RouteTaskActionsCmd","DS/RouteWebAppUX/Controller/RouteWebAppApprovalStatusServiceController","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Utilities/CompassDataExchange","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX","css!DS/RouteWebAppUX/RouteWebAppUX.css"],(function(e,t,n,o,i,a,s){"use strict";let r,l,u,d,c=[],p=!1;const m=function(o,i,s,c){c&&(p=c),r=o,l=s,u=i,widget.data.routeCredentials={securityContext:i.securityContext,tenant:i.tenant},f(i).then((i=>{if(null==i)return void("function"==typeof s&&s());if(""===i.model.Activity_State)return void("function"==typeof s&&s());d=UWA.createElement("div",{class:"route-approvals-container"}).inject(o);let r=UWA.createElement("div",{class:"route-approval-status-container"}).inject(d);if(i.model.approvalAction){n.renderTaskActionCommands(i).inject(r)}else{e.renderActivityState(i).inject(r)}let l=a.getActionsBasedOnApprovalStatus(i.model.approvalAction);t.renderApprovalsActionMenu(i,l,p).inject(d),g()}))},f=function(e){let t=[];var n={};n.id=e.id,t.push(n);let i={data:t};return new Promise((function(e,t){o.fetchApprovalStatusForContent(i).then((t=>{let n=a.createModel(t.data[0]);e(n)}),(t=>{widget.routeWebAppNotify.handler().addNotif({level:"error",subtitle:s.errorMessage,sticky:!0}),e()}))}))};const g=function(){let e=widget.routeWebAppMediator.subscribe("task-action-on-save",(function(e){A()}));c.push(e),e=widget.routeWebAppMediator.subscribe("maturity-save",(function(e){A()})),c.push(e),function(){let e=widget.routeWebAppMediator.subscribe("approval-dialog-show-message",(function(e){widget.routeWebAppNotify.handler().addNotif(e.message)}));c.push(e)}()},A=function(){h(),m(r,u,l)},h=function(){d.destroy(),c.forEach(((e,t)=>{widget.routeWebAppMediator.unsubscribe(e)}))};return{init:(e,t,n)=>{i.init().then((o=>{m(e,t,n)}))}}})),define("DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX",["DS/RouteWebAppUX/Controller/RouteWebAppApprovalStatusServiceController","DS/RouteWebAppUX/Views/RouteActivityState","DS/RouteWebAppUX/RouteWebAppBootstrap","DS/RouteWebAppUX/Views/Menu/RouteTaskActionsCtxMenu","DS/RouteWebAppUX/Utilities/CompassDataExchange","DS/RouteWebAppUX/Utilities/CollabTasksResponseFormatter","DS/RouteWebAppUX/Components/RouteWebAppNotifications","DS/RouteWebAppUX/Components/RouteWebAppMediator","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/PlatformAPI/PlatformAPI","i18n!DS/RouteWebAppUX/assets/nls/RouteWebAppUX"],(function(e,t,n,o,i,a,s,r,l,u,d,c){"use strict";var p=!1;return{getName:function(){return c.approvalStatus},getColumnApprovalStatusValue:function(o){return new Promise((function(a,s){o&&o.option&&(widget.data.routeCredentials={securityContext:o.option.securityContext,tenant:o.option.tenant},o.option.removeHyperlink&&(p=o.option.removeHyperlink),o.option=void 0),n.init().then((n=>{e.fetchApprovalStatusForContent(o).then((n=>{var o;if(widget.routeWebAppMediator.subscribe("task-action-on-save",(function(t){e.fetchRouteContentIds(t.routeId).then((t=>{if(null!=t){for(var n=[],o=0;o<t.data.length;o++){var a={};a.id=t.data[o].id,n.push(a)}var s={data:n}}e.fetchApprovalStatusForContent(s).then((e=>{var t;if(null!=e){t={};for(var n=0;n<e.data.length;n++){var o=i.createModel(e.data[n]),a=e.data[n].id;t[a]={},t[a].approvalStatus=o.model.Activity_State,t[a].approvalStatusModel=o,t[a].maturity=o.model.current,t[a].maturity_NLS=o.model.current_NLS}}d.publish("updateRouteContent-"+widget.id,t)}),(e=>{u.setNotificationManager(l),l.addNotif({level:"error",subtitle:c.errorMessage,sticky:!1})}))}),(e=>{u.setNotificationManager(l),l.addNotif({level:"error",subtitle:c.errorMessage,sticky:!1})}))})),widget.routeWebAppMediator.subscribe("approval-dialog-show-message",(function(e){widget.routeWebAppNotify.handler().addNotif(e.message)})),null!=n){o={};for(var s=0;s<n.data.length;s++){var r=i.createModel(n.data[s]),m=n.data[s].id;o[m]={},o[m].approvalStatus=t.getRouteActivityState(r.model.Activity_State,r,p),o[m].approvalStatusModel=r}}a(o)}),(e=>{u.setNotificationManager(l),l.addNotif({level:"error",subtitle:c.errorMessage,sticky:!1}),a()}))}))}))},compareApprovalStatus:function(e,t){let n,o;return n=e?e.trim():"",o=t?t.trim():"",n.localeCompare(o)},getColumnApprovalStatusMenu:function(e){e.model.fromPage="summarypage-ctxCommand";var t=i.getActionsBasedOnApprovalStatus(e.model.approvalAction);return o.getApprovalActionsMenu(e,t,p)},getCollabTasksStatusMenu:function(e){if(widget.routeWebAppNotify=new s,widget.routeWebAppMediator=new r,Array.isArray(e)){if(e.length>0){let t=[];for(let n of e)t.push(a.getCollabTaskReponse(n).model);let n,i=t[0].model.options.grid.taskAction,s=t[0].model.options.grid.current,r=t[0].model.options.grid.taskAssigneeUsername;if(n="Complete"==s?"":"Comment"!=i&&"Approve"!=i||"Review"!=s?i:"Review","Person"!=t[0].model.options.grid.assigneeType&&(n=""),""!=n)for(let e=1;e<t.length;e++){if(t[e].model.options.grid.current!=s){n="";break}if("Assigned"==s&&t[e].model.options.grid.current==s&&t[e].model.options.grid.taskAction!=i){n="";break}if("Assigned"==s&&t[e].model.options.grid.current==s&&r!=t[e].model.options.grid.taskAssigneeUsername){n="";break}}let l=[];""!=n&&(l=o.getCollabTaskApprovalActionsMenu(t,n));let u,d="false";"true"!=t[0].model.options.grid.taskAcceptLink||"Assigned"!=s||"Group"!=t[0].model.options.grid.assigneeType&&"Group Proxy"!=t[0].model.options.grid.assigneeType||(d="true");for(let e=1;e<t.length;e++)if("true"!=d||d!=t[e].model.options.grid.taskAcceptLink||"Assigned"!=t[e].model.options.grid.current||"Group"!=t[e].model.options.grid.assigneeType&&"Group Proxy"!=t[e].model.options.grid.assigneeType){d="false";break}"true"==d&&(u=o.getCollabTaskApprovalActionsMenu(t,"AssignToSelf")),null!=u&&u!=[]&&l.push(...u);let c,p=!0;"Assigned"!=t[0].model.options.grid.current&&(p=!1);for(let e=0;e<t.length;e++)if("Assigned"==t[e].model.options.grid.current){p=!0;break}return p&&(c=o.getCollabTaskApprovalActionsMenu(t,"ChangeAssignee")),null!=c&&c!=[]&&l.push(...c),l}return[]}},getApprovalStatusValue:function(e){for(const[n]of Object.entries(e))e[n].approvalStatus=t.getRouteActivityState(e[n].approvalStatus,e[n].approvalStatusModel);return e}}})),define("DS/RouteWebAppUX/RouteTracker/RouteDimensionBuilder",["DS/RouteWebAppUX/RouteTracker/RouteDimensionMapping"],(function(e){"use strict";function t(e){return"string"==typeof e&&e.length>0}function n(){this.dimensions={}}return n.prototype.add=function(n,o){var i;return i=t(n)&&Object.keys(e).some((function(e){return e===n})),t(o)&&i&&(0==e[n].allowedValues.length||e[n].allowedValues.includes(o))&&(this.dimensions[e[n].PersonalDimention]=o),this},n.prototype.build=function(){return this.dimensions},{create:function(){return new n}}})),define("DS/RouteWebAppUX/RouteTracker/RouteEventBuilder",["DS/Usage/TrackerAPI","DS/RouteWebAppUX/RouteTracker/RouteDimensionBuilder","DS/RouteWebAppUX/RouteTracker/RouteValueBuilder"],(function(e,t,n){"use strict";function o(e){this.category=e.category,this.action=e.action,this.tenant=e.tenant,this.scope="Dashboard",this.dimensionsBuilder=t.create(),this.valuesBuilder=n.create()}return o.prototype.setLabel=function(e){return this.label=e,this},o.prototype.setAppId=function(e){return"string"==typeof e&&(this.appId=e),this},o.prototype.setTenant=function(e){return"string"==typeof e&&(this.tenant=e),this},o.prototype.addDimension=function(e,t){return this.dimensionsBuilder.add(e,t),this},o.prototype.getDimensions=function(){return this.dimensionsBuilder.build()},o.prototype.getValues=function(){return this.valuesBuilder.build()},o.prototype.addPersonalValue=function(e,t){return this.valuesBuilder.add(e,t),this},o.prototype.send=function(){const t=this.dimensionsBuilder.build(),n=this.valuesBuilder.build();e.trackPageEvent({eventCategory:this.category,eventAction:this.action,eventLabel:this.label,scope:this.scope,persDim:t,appID:this.appId,persVal:n}),console.log("Cloud Probes for "+this.label+" scenario. Personal Dimensions = "+JSON.stringify(t)+" Personal Values = "+JSON.stringify(n))},{create:function(e){return new o(e)}}})),define("DS/RouteWebAppUX/RouteTracker/RouteTracker",["DS/RouteWebAppUX/RouteTracker/RouteEventBuilder"],(function(e,t){"use strict";return{createEventBuilder:function(t){return e.create(t)},Category:{USAGE:"ROUTE_CLOUD_PROBES_USAGE",PERFORMANCE:"ROUTE_CLOUD_PROBES_PERFORMANCE"},DeviceUsed:{DESKTOP:"Desktop",MOBILE:"Mobile",TAB:"Tab"},Events:{CLICK:"Click"},Availability:{TRUE:"TRUE",FALSE:"FALSE"},Labels:{ROUTEMANAGEMENT_WELCOMEPANEL:"RouteManagement WelcomePanel",ROUTEMANAGEMENT_TASKVIEW:"RouteManagement Task View",ROUTEMANAGEMENT_OBJECTCOUNT:"RouteManagement Object Count",ROUTEMANAGEMENT_ROUTECOMMAND:"RouteManagement Route Command",ROUTEMANAGEMENT_TASKCOMMAND:"RouteManagement Task Command",ROUTEMANAGEMENT_TEMPLATECOMMAND:"RouteManagement Template Command"}}})),define("DS/RouteWebAppUX/RouteTracker/RouteCloudProbeUtils",["DS/RouteWebAppUX/RouteTracker/RouteTracker","DS/RouteWebAppUX/RouteTracker/RouteDimension","DS/RouteWebAppUX/RouteTracker/RouteValue","DS/RouteWebAppUX/RouteWebAppBootstrap"],(function(e,t,n,o){"use strict";let i,a,s=function(e){switch(e.event){case"WelcomePanel":r(e);break;case"TaskView":l(e);break;case"RouteCommand":u(e);break;case"TaskCommand":d(e);break;case"TemplateCommand":c(e);break;case"ObjectCount":p(e)}},r=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_WELCOMEPANEL).setAppId(a).addDimension(t.ROUTEMANAGEMENT_WELCOMEPANEL.ROUTEMANAGEMENT_ACTIVITY,n.value).send()},l=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_TASKVIEW).setAppId(a).addDimension(t.ROUTEMANAGEMENT_TASKVIEW.ROUTEMANAGEMENT_INITIALTASKVIEW,n.initialValue).addDimension(t.ROUTEMANAGEMENT_TASKVIEW.ROUTEMANAGEMENT_TASKVIEWSWITCH,n.switchValue).send()},u=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_ROUTECOMMAND).setAppId(a).addDimension(t.ROUTEMANAGEMENT_ROUTE.ROUTEMANAGEMENT_ROUTECOMMAND,n.value).send()},d=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_TASKCOMMAND).setAppId(a).addDimension(t.ROUTEMANAGEMENT_TASK.ROUTEMANAGEMENT_TASKCOMMAND,n.value).send()},c=function(n){e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_TEMPLATECOMMAND).setAppId(a).addDimension(t.ROUTEMANAGEMENT_TEMPLATE.ROUTEMANAGEMENT_TEMPLATECOMMAND,n.value).send()},p=function(o){let s;"routes"==o.objectType?s="Route":"route_templates"==o.objectType&&(s="Template"),e.createEventBuilder({category:e.Category.USAGE,action:e.Events.CLICK,tenant:i}).setLabel(e.Labels.ROUTEMANAGEMENT_OBJECTCOUNT).setAppId(a).addDimension(t.ROUTEMANAGEMENT_SUMMARY.ROUTEMANAGEMENT_OBJECTTYPE,s).addPersonalValue(n.ROUTEMANAGEMENT_SUMMARY.ROUTEMANAGEMENT_OBJECTCOUNT,o.value).send()};return{sendRouteTrackerEvent:e=>function(e){try{i=o.getTenantValue(),a=widget.getValue("appId"),s(e)}catch(e){}}(e)}}));