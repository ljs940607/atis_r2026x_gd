define("DS/DELWKOModelPlugins/DELWKODatabasePluginCloud",["UWA/Core","UWA/Promise","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/DELWKONavigationServices/DELWKONavigateUtil","DS/DELWKODicoServices/DELWKODicoUtils","DS/DELPPWModelServices_FD02/ModelUtils","DS/DELPPWModelServices_FD02/BehaviorUtil","DS/DELPPWNavigationServices_FD02/SwitchDBModeManager","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWIRPCModel_FD02/Model/ReferenceModel"],(function(e,n,t,i,o,r,a,s,c,u){"use strict";return function(n){var c,u=[];return c=function e(n,i){var o,r,a;if(i.id!==n.id){for(o=t.getParentInstancesFromCollection(i.id),a=0;a<o.length;a++)if(r=o[a],e(n,t.getAggregatingReferenceModelFromInstance(r)))return!0;return!1}return!0},{onStart:function(){var i=this;t.setReferenceCollectionEvents({onAdd:function(e,t,i){n.getMediator().notify("addReference",[e,t,i])},onChange:function(e,t,i){n.getMediator().notify("changeReference",[e,t,i])},"onChange:sortIndex":function(e,t,i){n.getMediator().notify("changeSortIndex",[e,t,i])},onRemove:function(e,o,r){var a,s=i.getInstancesFromCollection(e.id),c=i.getParentInstancesFromCollection(e.id);for(a=0;a<c.length;a++)i.removeInstance(c[a]);for(a=0;a<s.length;a++)i.removeInstance(s[a]);t.getImpactedConnections(e.id).forEach((function(e){i.removeConnection(e.id)})),n.getMediator().notify("removeReference",[e,o,r])}}),t.setConnectionsCollectionEvents({onAdd:function(e,t,i){n.getMediator().notify("addConnection",[e,t,i])},onChange:function(e,t,i){n.getMediator().notify("changeConnection",[e,t,i])},onRemove:function(e,t,i){n.getMediator().notify("removeConnection",[e,t,i])}}),t.setInstanceCollectionEvents({onAdd:function(e,t,i){n.getMediator().notify("addInstance",[e,t,i])},onChange:function(e,t,i){n.getMediator().notify("changeInstance",[e,t,i])},onRemove:function(o,r,a){var s,c=t.getImpactedConnections(null,o.id);if(e.is(c))for(s=0;s<c.length;s++)i.removeConnection(c[s].id);n.getMediator().notify("removeInstance",[o,r,a])}}),u.push(n.addExternalListener("reset",i.resetAll))},onStop:function(){var e,i;for(t.removeCollectionEvents(),e=0,i=u.length;e<i;e++)n.removeExternalListener(u[e]);u=[]},findSomeConnection:function(e,n){return t.findSomeConnection(e,n)},findConnections:function(e){return t.findConnections(e)},getAllChildrenFromCollection:function(e){var n={referencesPID:[e],instancesPID:[]};return t.expandOnBackbone(e,n),n},getInstancesFromCollection:function(e){return t.getInstancesFromCollection(e)},getInstancesForGivenReference:function(e){return t.getInstancesForGivenReference(e)},getParentInstancesFromCollection:function(e){return t.getParentInstancesFromCollection(e)},getReference:function(e){return t.getReferenceFromCollection(e)},getAllReferences:function(){return t.getAllReferences()},getReferencesFromArray:function(e){return t.getReferencesArrayFromCollection(e)},getReferenceModelFromInstance:function(e){return t.getReferenceModelFromInstance(e)},getAggregatingReferenceModelFromInstance:function(e){return t.getAggregatingReferenceModelFromInstance(e)},getReferenceModel:function(t){var i=null,o=this.getReference(t),r=null,s=null;return e.is(o)||(i=this.getInstance(t),e.is(i)?o=this.getReferenceModelFromInstance(i):n.getLogger().debug("Failed to get reference model. No instance or reference model found for PID: "+t)),a.isMdlAccessTestEnabled()&&(e.is(i)&&(n.getLogger().debug("Manipulated instance is: "),r=i.pick("PID","PLM_ExternalID","V_TreeOrder","isAggregatedBy","isInstanceOf"),n.getLogger().debug(JSON.stringify(r,null,4))),e.is(o)&&(n.getLogger().debug("Manipulated reference is: "),s=o.pick("PID","type","V_Name","V_description"),n.getLogger().debug(JSON.stringify(s,null,4)))),o},getReferenceIdFromInstance:function(t){var i,o=null;return i=this.getInstance(t),e.is(i)?o=i.get("isInstanceOf"):n.getLogger().debug("Failed to get reference Id. No instance model found for PID: "+t),o},isReference:function(e){return t.isReference(e)},isInstance:function(e){return t.isInstance(e)},getInstance:function(e){return t.getInstanceFromCollection(e)},getConnection:function(e){return t.getConnectionFromCollection(e)},createReference:function(e,n){return t.createRef(e,n)},createWorkOrderFromProcess:function(e,n){return t.createWorkOrderFromProcessOnCloud(e,n)},getMfgItemFromWorkOrderOnCloud:function(e){return t.getMfgItemFromWorkOrderOnCloud(e)},getProductionPlanFromWorkOrder:function(e){return t.getProductionPlanFromWorkOrderOnCloud(e)},addReference:function(e,n){return t.addRef(e,n)},fetchRefList:function(e,n){return t.fetchRefList(e,n)},fetchAttributes:function(e,n){t.fetch(e,n)},fetchReferences:function(e,n){t.fetchReferences(e,n)},fetchRoot:function(e,n){i.fetchRoot(e,n)},fetchModelRoot:function(n,t){e.is(t.onComplete,"function")&&t.onComplete.call(null,n)},fetchMultiplePromise:function(e,n){return i.fetchMultiplePromise(e,n)},getProductScopedLinksFromIndex:function(e,n,t){i.getProductScopedLinksFromIndex(e,n,t)},navigateScopesFromIndex:function(e,n,t){i.navigateScopesFromIndex(e,n,t)},navigateScopesFromDB:function(e,n,t){t.onComplete=n,i.getProductScopedLinksFromDB(e,t)},navigateOnIndex:function(e,n,t){i.navigateOnIndex.navigateOnIndex(e,n,t)},getReferenceFromInstance:function(e,n,t){i.navigateOnIndex.getReferenceFromInstance(e,n,t)},updateReference:function(i,o){return o.isFacet=!!e.is(n.getConfig().isFacet)&&n.getConfig().isFacet,t.updateRef(i,o)},updateReferences:function(e,n){return t.updateRefs(e,n)},deleteReference:function(e,n){return t.deleteRef(e,n)},removeReference:function(e,n){t.removeRef(e,n)},createInstance:function(e,n){return t.createInst(e,n)},addInstance:function(e,n){return t.addInst(e,n)},fetchInstance:function(e,n){return t.fetchInst(e,n)},updateInstance:function(e,n){return t.updateInst(e,n)},updateInstances:function(e,n){return t.updateInsts(e,n)},deleteInstance:function(e,n){return t.deleteInst(e,n)},removeInstance:function(e,n){t.removeInstance(e,n)},removeConnection:function(e,n){t.removeConnection(e,n)},createConnection:function(e,n){return t.createConn(e,n)},addConnection:function(e,n){return t.addConn(e,n)},updateConnection:function(e,n){return t.updateConn(e,n)},deleteConnection:function(e,n){return t.deleteConn(e,n)},needToQueryForConnections:function(e){return t.needToQueryForConnections(null,e)},needToQueryForChildren:function(e){return t.needToQueryForChildren(e)},createExecCanUseResourceLink:function(e,n){return t.createExecCanUseResourceLink(e,n)},findMissingLinkedObjects:function(n,t,o){i.findMissingLinkedObjects(n,(function(n){e.is(t,"function")&&t.call(null,n)}),o)},getImpacted:function(n,i,o){var r,a,s,c,u,l,d=[],g=[],f=[],m=[],C=this.getInstance(n),p={};if(o=o||{},e.is(o.relationTypes)?p.relationTypes=o.relationTypes:(e.is(o.excludeRelationTypes)&&(p.excludeRelationTypes=o.excludeRelationTypes),e.is(o.excludeTimeConstraintType)&&(p.excludeTimeConstraintType=o.excludeTimeConstraintType)),e.is(C)?(a=this.getReferenceModelFromInstance(C),s=e.is(o.onlyInstanceRelations)&&o.onlyInstanceRelations?null:a.id,f=t.getImpactedConnections(s,C.id,p),m=[a.id,C.id]):(p.isRefRefOnly=!0,f=t.getImpactedConnections(n,null,p),m=[n]),d=f,e.is(i)&&!0===i){for(r=0;r<f.length;r++)c=f[r].get("from"),u=f[r].get("to"),l=e.is(c,"array")?c[c.length-1]:c,m.indexOf(l)>-1?g.push(u):g.push(c);d=g}return d},getConnectionsByModel:function(n,t,r){var a,s=e.is(n)?n.get("PPRTYPE"):e.is(t)?t.get("PPRTYPE"):null;r=r||{},a={forceDBMode:!!e.is(r.forceDBMode)&&r.forceDBMode,relationTypes:"array"===e.typeOf(r.relationTypes)?r.relationTypes:o.getAllConfiguredRelations(s,"read"),isRefRefOnly:!!e.is(r.isRefRefOnly)&&r.isRefRefOnly,silentMode:!!e.is(r.silentMode)&&r.silentMode,onComplete:e.is(r.onComplete)?r.onComplete:null,onFailure:e.is(r.onFailure)?r.onFailure:null},i.getConnectionsByModel(n,t,a)},fetchInstancesAndTheirReferences:function(e,n){return i.fetchInstancesAndTheirReferences(e,n)},addToCollections:function(e){t.addToCollections(e)},parseServerObjects:function(n,i){var o,r,a=i.stackedObjects?i.stackedObjects:{stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},s={referencePIDs:[],instancePIDs:[]},c=!e.is(i.silentOpt,"boolean")||i.silentOpt,u=this.getConnectionParser();e.is(n.instancesAndReferences)&&n.instancesAndReferences.forEach((function(e){o=e.attributesValue,Object.prototype.hasOwnProperty.call(o,"isInstanceOf")?(s.instancePIDs.push(o.PID),a.stackedInstances.push(o)):(s.referencePIDs.push(o.PID),a.stackedReferences.push(o))})),e.is(n.deletedObjects)&&n.deletedObjects.forEach((function(e){a.deletedObjects.push(e)})),e.is(n.connections)&&n.connections.forEach((function(e){u.parse(e,a)})),r=e.merge(a,{silentMode:c,onComplete:function(){e.is(i.onComplete)&&i.onComplete(s)}}),t.addToCollections(r)},getConnections:function(t){if(e.is(t)&&e.is(t.connections,"array")&&Object.keys(t.connections).length>0){t.connections.forEach((function(e){"DELAsmProcessCanUseCnx"===e.get("type")&&n.getMediator().notify("addLinkedObject",[e])}))}},getDocuments:function(t){var i,o,r=[];if(e.is(t)&&e.is(t.documents,"object")&&Object.keys(t.documents).length>0&&(o=n.getPlugins("DocumentPlugin"),e.is(o)&&(o=o.instance,e.is(t.documents,"object")))){for(i in t.documents)Object.prototype.hasOwnProperty.call(t.documents,i)&&(r=r.concat(t.documents[i]));o.getDocumentInfo(r,{onComplete:function(r){var a,s=[];for(a=0;a<r.data.length;a++)o.addDocument(r.data[a],{silent:!0});for(i in t.documents)Object.prototype.hasOwnProperty.call(t.documents,i)&&e.is(t.documents[i])&&t.documents[i].length>0&&(s.push(i),t.documents[i].forEach((function(e){o.addDocumentConnection(i,e,{silent:!0})})));n.getMediator().notify("addDocumentConnections",[s])}})}},getConnectionsFromServer:function(t,o,r){var a=r||{},s=this,c={noTimeout:!0};n.getMediator().notify("startProgress",c),i.getConnectionsFromServer(t,(function(t){e.is(o,"function")&&o.call(null,t),s.getDocuments(t),n.getMediator().notify("stopProgress",c)}),a)},getDescendantsFromServer_v2:function(n,t,o){var r=o||{},a=this;r.excludeBOTypes=["DELLmiProdSystemIOPort"],r.excludeRelationTypes=["DELLmiExecTimeConstraintRelation"],i.getDescendantsFromServer_v2(n,(function(n){var i=e.is(r.context)?r.context:null;e.is(t,"function")&&t.call(i,n),a.getDocuments(n),a.getConnections(n)}),r)},getDescendantsFromServer:function(n,t,o){var r=o||{},a=this;r.excludeBOTypes=["DELLmiProdSystemIOPort"],r.excludeRelationTypes=["DELLmiExecTimeConstraintRelation"],i.getDescendantsFromServer(n,(function(n){var i=e.is(r.context)?r.context:null;e.is(t,"function")&&t.call(i,n),a.getDocuments(n),a.getConnections(n)}),r)},getInverseConnectionsFromServer:function(e,n){i.getInverseConnectionsFromServer(e,n)},resetAll:function(){t.reset(),n.getMediator().notify("refreshAll")},resetCollections:function(e){t.reset(e)},setSelectPredicate:function(e,n){i.setSelectPredicate(e,n)},getConnectionParser:function(){return i.getConnectionParser()},getNavigateOnIndex:function(){return r.getNavigateOnIndex()},isNavigateOnDemand:function(){return r.isNavigateOnDemand()},isAuthoringMode:function(){var e=!0;return r.getNavigateOnDatabasePreference()||(e=s.isDbMode()),e},isInstancePossible:function(n,t){var i,o,a,s=!0;return e.is(t,"string")?o=t:(i=t,o=t.get("type")),-1===this.getValidChildTypes(n).indexOf(o)?s=!1:n&&i&&(c(i,n)?s=!1:"RESOURCE"!==(a=i.get("PPRTYPE"))&&"PRODUCT"!==a||(s=r.isMGALicenseAvailable())),s},getValidChildTypes:function(n){var t,i,r,a=this,s=[],c=0,u=0;return e.is(n)&&(t=n.get("type"),s=o.getValidChildTypes(t),this.isOperation(n)&&(i=n.get("PID"),this.getInstancesFromCollection(i).every((function(e){return a.isOperation(e)?(c++,r="WORKINSTRUCTION"):a.isWorkInstruction(e)&&(u++,r="OPERATION"),!0})),(c>0||u>0||this.needToQueryForChildren(n))&&(s=s.filter((function(e){return!(o.getPPRType(e)===r)}))))),s},getPPRType:function(n){var t,i=n;return e.is(n,"string")?i=this.getReferenceModel(n):e.is(n)&&n.isInstance()&&(i=this.getReference(n.get("isInstanceOf"))),e.is(i)&&(t=i.get("PPRTYPE"),e.is(t)||(t=o.getPPRType(i.get("type")))),t},isSystem:function(n){return!(!e.is(n)||"SYSTEM"!==this.getPPRType(n))},isOperation:function(n){return!(!e.is(n)||"OPERATION"!==this.getPPRType(n))},isWorkInstruction:function(n){return!(!e.is(n)||"WORKINSTRUCTION"!==this.getPPRType(n))},isProcess:function(n){return!(!e.is(n)||"PROCESS"!==this.getPPRType(n))},isResource:function(n){return!(!e.is(n)||"RESOURCE"!==this.getPPRType(n))},getWhereUsedReferences:function(e,n,t){i.getWhereUsedReferences(e,n,t)},getRootReferenceFromInstance:function(e){return t.getRootReferenceFromInstance(e)},getFilteredInstancesFromCollection:function(e,n){return t.getFilteredInstancesFromCollection(e,n)},removeFilterFromCollection:function(e,n){t.removeFilterFromCollection(e,n)},getExecuteByBlockPromise:function(e){return r.getExecuteByBlockPromise(e)},transformToRIROccurrencePath:function(e){return t.transformToRIROccurrencePath(e)},transformRIRToAbsolutePath:function(e){return t.transformRIRToAbsolutePath(e)},isValidPID:function(n){var t=!1;return e.is(n,"string")&&n.length>0&&(t=!0),t},getLastElement:function(n){var t=null;return e.is(n,"array")&&(t=n.length>0?n[n.length-1]:null),t},getLastElementInstanceInfoPID:function(n,t){var i,o=null,r=null;return i=this.getLastElement(n),this.isValidPID(i)&&(o=this.getInstance(i),e.is(o)&&(r=o.get(t),this.isValidPID(r)||(r=null))),r},arrayCompare:function(n,t){var i,o;if(!e.is(n,"array")||!e.is(t,"array"))return!1;if(n.length!==t.length)return!1;for(i=0,o=n.length;i<o;i++)if(n[i]instanceof Array&&t[i]instanceof Array){if(!this.arrayCompare(n[i],t[i]))return!1}else if(n[i]!==t[i])return!1;return!0},groupingBy:function(e,n,t){var i=new Map;return e.forEach((function(e){var o=n(e),r=t(e);i.has(o)?i.set(o,i.get(o).concat(r)):i.set(o,[].concat(r))})),i},hasConnection:function(e){return t.hasConnection(e)},traverseInstanceModels:function(e,n){t.traverseInstanceModels(e,n)},syncMaturity:function(e,n,i,o,r){t.syncMaturity(e,n,i,o,r)},getCurrentStates:function(e,n,i){t.getCurrentStates(e,n,i)},getSequencingMode:function(e,n){t.getSequencingMode(e,n)},setSequencingMode:function(e,n,i){t.setSequencingMode(e,n,i)},manageLinearProductFlowsOnCreateInstance:function(e){t.manageLinearProductFlowsOnCreateInstance(e)},manageLinearProductFlowsOnCreateInstancePID:function(e){t.manageLinearProductFlowsOnCreateInstance(t.getInstanceFromCollection(e))},manageLinearProductFlowsOnDeleteInstance:function(e){t.manageLinearProductFlowsOnDeleteInstance(e)},manageLinearProductFlowsOnDeleteInstancePID:function(e){t.manageLinearProductFlowsOnDeleteInstance(t.getInstanceFromCollection(e))},detachExtn:function(e,n){t.detachExtn(e,n)}}}})),define("DS/DELWKOModelPlugins/DELWKOViewPreferencesUI",["UWA/Core","DS/Utilities/Utils","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWModelServices_FD02/BehaviorUtil","DS/DELPPWModelServices_FD02/ModelUtils","DS/DELPPWViewPlugins_FD02/TreeViewPlugin/RootsStoreUI","DS/DELPPWViewPlugins_FD02/MoreAttributesWizard","DS/CoreEvents/Events","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DocumentManagement/DocumentManagement","i18n!DS/DELWKOModelPlugins/assets/nls/DELWKOViewPreferencesUI"],(function(e,n,t,i,o,r,a,s,c,u,l){"use strict";return function(d,g,f,m,C){var p,I,P,h,y,v,D,b,R,L,w,M,T,S=f.getComponent("Element"),E=f.getComponent("Dialog"),O=f.getComponent("Button"),x=f.getComponent("WUXTab"),F=f.getComponent("TreeListView"),V=f.getComponent("TreeNodeModel"),A=f.getComponent("Editor"),N=f.getComponent("Toggle");return y=function(n){I=new S("div",{class:"ViewPreferencesUI-Content"}),(p=new E({domId:"ViewPreferencesUI-Dialog",immersiveFrame:g.getImmersiveFrame(),modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,title:t.getNLSValue("ViewPreferencesUI.Header"),content:I,buttons:{Ok:new O({domId:"ViewPreferencesUI-Dialog-Ok",className:"ok primary",label:t.getNLSValue("ViewPreferencesUI.Ok"),emphasize:"primary",onClick:function(){var t=M();p.close(),e.is(n,"function")&&n(t)}}),Cancel:new O({domId:"ViewPreferencesUI-Dialog-Cancel",className:"cancel",label:t.getNLSValue("ViewPreferencesUI.Cancel"),onClick:function(){p.close()}}),Apply:new O({domId:"ViewPreferencesUI-Dialog-Apply",className:"moreAttr",label:t.getNLSValue("ViewPreferencesUI.MoreAttributes"),onClick:w})}})).close=function(){this.destroy(),I=null,h=null,P=null}},R=function(n,t){var i,o=[];return n.selectedAttributes.forEach((function(e){e.attrIsSelected&&!e.attrIsInXML?t.Config.Columns.Column.push({dataIndex:e.dataIndex,dicoType:e.attrNature,display:"true",minWidth:"50"}):!e.attrIsSelected&&e.attrIsInXML&&o.push(e.dataIndex)})),i=(i=(i='<?xml version="1.0" encoding="UTF-8"?>\n')+'<Config name="'+t.Config.name+'" xmlns="DS_DELPPWConfiguration" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="DS_DELPPWConfiguration ../xsd/ColumnConfig.xsd" Title="'+t.Config.Title+'" Description="'+t.Config.Description+'">\n')+'<Label dataIndex="'+t.Config.Label.dataIndex+'" dicoType="'+t.Config.Label.dicoType+'"/>\n',i+="<Columns>\n",t.Config.Columns.Column.forEach((function(n){o.includes(n.dataIndex)||(i=i+'<Column dataIndex="'+n.dataIndex+'"  ',e.is(n.dicoType)&&(i=i+'dicoType="'+n.dicoType+'" '),e.is(n.displayType)&&(i=i+'displayType="'+n.displayType+'" '),e.is(n.display)&&(i=i+'display="'+n.display+'" '),i+="/>\n")})),i+="</Columns>\n",i+="</Config>\n\n"},L=function(e,n,t,i){var r,a,s,l,d,g=!1,f=c.get3DSpaceUrl().slice(0,-1),m=c.getSecurityContext(),C=widget.getPreference("custoParametersSet"),p=o.getWidgetTrigram()+"ParametersViewColumnConfig";r=R(e,t),a=new File([new Blob([r],{type:"text/xml"})],i,{type:"text/xml"}),C.options.forEach((function(e){e.value.contains(p)&&(g=!0,s=e.value.split("/")[1])})),g?(d={id:s,fileInfo:{file:a}},l={tenantUrl:f,additionalHeaders:{SecurityContext:m},onComplete:function(){widget.setValue("custoParametersSet",p+"/"+s),location.reload()},onFailure:function(){n.destroy(),n=null}},u.getDocuments([s],{tenantUrl:f,additionalHeaders:{SecurityContext:m},onComplete:function(e){var n,t=e.data[0].relateddata.files,o=!1;t.forEach((function(e){i===e.dataelements.title&&(o=!0,n=e.id)})),o?u.deleteFile(s,n,{tenantUrl:f,onComplete:function(){u.addFileToDocument(d,l)}}):u.addFileToDocument(d,l)}})):u.createDocument({fileInfo:{file:a}},{tenantUrl:f,additionalHeaders:{SecurityContext:m},csrf:{name:"ENO_CSRF_TOKEN",value:c.getCSRFToken("3DSpace")},onComplete:function(e){u.modifyDocument({id:e.data[0].id,title:p+"/"+e.data[0].id},{tenantUrl:f,onComplete:function(){widget.setValue("custoParametersSet",p+"/"+e.data[0].id),location.reload()},onFailure:function(){n.destroy(),n=null}})},onFailure:function(){}})},w=function(){var n,i,o,r,u={modelEvents:s,settingManager:null},l=g.getImmersiveFrame().elements.container.getSize(),d=new S("div",{class:"MoreWizardContainer-Content",styles:{height:l.height-60,width:l.width-20}}),f=[],m=[];switch(T[h._properties.value.value[0]]){case"MANUFACTURING":i=c.getXMLValues("MANUFACTURING.columnConfigPath"),o="ManufacturingViewColumnConfig.xml",r=["CreateAssembly","CreateMaterial","Provide","CreateKit","Installation","Transform","Fasten","DELFmiFunctionIdentifiedInstance"];break;case"MBOM":i=c.getXMLValues("MBOM.columnConfigPath"),o="ProcessColumnConfig.xml",r=["CreateAssembly","CreateMaterial","Provide","CreateKit","Installation","Transform","Fasten","DELFmiFunctionIdentifiedInstance"];break;case"RESOURCE":i=c.getXMLValues("RESOURCE.columnConfigPath"),o="ResourceViewColumnConfig.xml",r=["Worker","ResourceArea","Transport","Conveyor","Machine","Robot","Storage","Sensor","IndustrialMachine","NCMachine","ToolDevice","Inspect","UserDefined","Organizational","ResourceManufacturingSetup","ControlDevice"];break;case"EBOM":i=c.getXMLValues("EBOM.columnConfigPath"),o="ProductPartColumnConfig.xml",r=["VPMInstance","VPMReference"];break;case"ROUTINGS":i=c.getXMLValues("ROUTINGS.columnConfigPath"),o="RoutingsViewColumnConfig.xml",r=["DELLmiWorkOrderReference"];break;case"FORMULA":i=c.getXMLValues("FORMULA.columnConfigPath"),o="FormulaViewColumnConfig.xml",r=["CreateAssembly","CreateMaterial","Provide","DELFmiFunctionIdentifiedInstance","ProcessContinuousCreateMaterial","ProcessContinuousProvide","ContinuousByProduct","DiscreteByProduct"];break;case"RECIPE":i=c.getXMLValues("RECIPE.columnConfigPath"),o="RecipeViewColumnConfig.xml",r=["DELLmiHeaderWorkPlanReference","DELLmiWorkPlanSystemInstance","DELWkiSignOffInstance","DELWkiDataCollectInstance","DELWkiInstructionInstance","DELWkiAlertInstance","DELLmiGeneralOperationInstance","DELLmiHeaderOperationInstance","DELLmiWorkPlanSystemReference","DELWkiSignOffReference","DELWkiDataCollectReference","DELWkiInstructionReference","DELWkiAlertReference","DELLmiGeneralOperationReference","DELLmiHeaderOperationReference"];break;default:return""}i.Config.Columns.Column.forEach((function(n){var t=null;e.is(n.dataIndex[0])&&e.is(n.dataIndex[1])&&(t=n.dataIndex,e.is(n.displayType)?(f.push(t),m.push(t)):m.push(t))})),n=new E({domId:"MoreWizard-Dialog",immersiveFrame:g.getImmersiveFrame(),modalFlag:!0,visibleFlag:!1,resizableFlag:!0,snappableFlag:!1,title:t.getNLSValue("ViewPreferencesUI.MoreAttributesWizardTitle"),content:d,buttons:{}}),u.modelEvents.subscribe({event:"MGA/MoreAttributesWizard/selectedAttributes"},(function(e){L(e,n,i,o)})),n.close=function(){this.destroy(),n=null},new a({container:d,dialog:n,settingManager:u.settingManager,modelEvents:u.modelEvents,selectedTypes:r,selectedExtensions:["XCADExtension","XP_VPMReference_Ext","EnterpriseExtension","TlgCast","XP_VPMRepReference_Ext","XP_VPMReference_Ext"],selectedAttributes:[],preSelectedAttributes:m,unSelectableAttributes:f})},v=function(){e.is(I)&&(h=new x({reorderFlag:!0,showComboBoxFlag:!0,pinFlag:!1,multiSelFlag:!1,editableFlag:!0,touchMode:!0,displayStyle:["strip"]})).inject(I)},D=function(i,o){var r,a,s,c={showVerticalLines:!0,isSortable:!1,isDraggable:!0,isEditable:!0,apiVersion:2,height:"auto",defaultCellHeight:40,performances:{resizeDebounceTimeout:200},selection:{cells:!1,canMultiSelect:!1,columnHeaders:!1},resize:{columns:!0,rows:!1},enableActiveUI:!0,enableKeyboardNavigation:!0,shouldDisplayTooltip:function(n){var i,o={longHelp:""};if(!n.isHeader)switch(n.dataIndex){case"colName":case"width":case"minWidth":o.longHelp=n.cellModel.options.value;break;case"colVisibility":i=n.cellModel.options.value,e.is(i.display,"boolean")&&(i.display?o.longHelp=t.getNLSValue("ViewPreferencesUI.ToolTip.ColumnVisible"):o.longHelp=t.getNLSValue("ViewPreferencesUI.ToolTip.ColumnHidden"))}return o},onDropCellDefault:function(e,n){var t,i,o,r,a;if(e.preventDefault(),t=this.unserializeDragAndDropEvent(e)){if(i=t.data["dswebux/x-tree.treenodemodel+number"],o=t.data["dswebux/x-tree.treenodemodel+json"],n.nodeModel._getID()===i)return;o&&o.forEach((function(e,t){if(r=new V(e),n.cellView){if(a=n.nodeModel,n.manager.getDocument().options.shouldAcceptDrop({parentTreeNodeModel:a,draggedTreeNodeModel:r,dropPosition:n.dropPosition})){if(n.manager.getDocument().prepareUpdate(),n.manager.getDocument().getXSO().get().forEach((function(e){e.remove()})),n.manager.getDocument().pushUpdate(),-1!==n.virtualRowID){switch(n.dropPosition){case"top":a.getParent().insertBefore(r,a);break;default:case"middle":a.getParent().addChild(r,n.virtualRowID);break;case"bottom":a.getParent().addChild(r,a.getParent().getChildren().indexOf(a)+1)}return!1}return!0}return!1}}))}}},u=function(e){var n=e.cellView.getContent();if(!e.isHeader)return n.setContent(e.nodeModel.getLabel()),e.nodeModel.getLabel()},d=function(e){var n,t=e.cellView.getContent(),i=e.cellModel.getCellContent();if(!e.isHeader)return n=new A({value:i}),t.setContent(n),n},g=n.debounce((function(e){e.nodeModel.options.grid[e.dataIndex]=e.value}),100,!0),f=function(n){var t,i=n.cellView.getContent(),o=n.cellModel.getCellContent();if(!n.isHeader)return t=new N({type:"switch",label:""}),"string"===e.typeOf(o)&&(o=e.Json.decode(o)),!0===o.display&&(t.checkFlag=!0),!0===o.mandatory&&(t.disabled=!0),i.setContent(t),i.title="",n.cellView.setOption("toggle",t),t},C=n.debounce((function(e){!0===e.cellView.getOption("toggle").checkFlag?e.nodeModel.options.grid[e.dataIndex].value="left":e.nodeModel.options.grid[e.dataIndex].value="unpinned"}),100,!0),p=n.debounce((function(e){e.nodeModel.options.grid[e.dataIndex].display=e.cellView.getOption("toggle").checkFlag}),100,!0);for(c.columns="ROUTINGS"===o?[{dataIndex:"tree",isHidden:!0},{text:"",dataIndex:"colPosition",isEditable:!1,width:"5%",isColumnMovable:!1,onCellRequest:u},{text:l.HeaderName,dataIndex:"colName",isEditable:!1,width:"auto",isColumnMovable:!1},{text:l.IsVisible,dataIndex:"colVisibility",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:f,setValue:p},{text:l.IsPinned,dataIndex:"colPinned",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:function(n){var t,i=n.cellView.getContent(),o=n.cellModel.getCellContent();if(!n.isHeader)return t=new N({type:"switch",label:""}),"string"===e.typeOf(o.value)&&"left"===o.value&&(t.checkFlag=!0),i.setContent(t),i.title="",n.cellView.setOption("toggle",t),t},setValue:C},{text:l.Width,dataIndex:"width",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:d,setValue:g},{text:l.MinWidth,dataIndex:"minWidth",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:d,setValue:g}]:[{dataIndex:"tree",isHidden:!0},{text:"",dataIndex:"colPosition",isEditable:!1,width:"5%",isColumnMovable:!1,onCellRequest:u},{text:l.HeaderName,dataIndex:"colName",isEditable:!1,width:"auto",isColumnMovable:!1},{text:l.IsVisible,dataIndex:"colVisibility",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:f,setValue:p},{text:l.Width,dataIndex:"width",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:d,setValue:g},{text:l.MinWidth,dataIndex:"minWidth",isEditable:!1,width:"20%",isColumnMovable:!1,onCellRequest:d,setValue:g}],a=(r=new F(c)).getDocument(),s=0;s<i.length;s++)a.addRoot(new V({label:s.toString(),grid:e.merge({colName:m.getColumnDisplayValue(i[s])},i[s])}));return r},b=function(n,o,a){var s;e.is(h)&&(P={},T=n,n.forEach((function(n){var i,r=o[n],s=D(r,n),c=new S("div",{class:n+"-Content ViewPreferencesUI-TabContent"});P[n]=s,c.setContent(s),(i=h.add({label:t.getNLSValue("ViewPreferencesUI."+n+".TabTitle"),content:c,index:h.getPageCount(),icon:"table",isSelected:0===h.getPageCount()})).button.elements.container.addClassName(n+"-TabButton"),e.is(a[n])&&i.button.elements.iconPlaceholder.setContent(a[n])})),i.useRootStorage()&&(s=new r(p,d,f,C),h.add({id:"store-view-block",index:h.getPageCount(),icon:t.getIconURLFromKey("StoreViews"),label:t.getNLSValue("ViewPreferencesUI.StoreView.TabTitle"),content:s.getContent()})))},M=function(){var n,t,i,o,r={};for(t in P)if(P.hasOwnProperty(t))for(r[t]=[],o=P[t].getRoots(),n=0;n<o.length;n++)i=o[n].options.grid,e.is(i.colName)&&delete i.colName,r[t].push(i);return r},{name:"ViewPreferencesUI",buildView:function(n,t){return e.is(p)&&p.close(),y(t),v(),b(n.views,n.viewPreferences,n.viewIcons),p}}}})),define("DS/DELWKOModelPlugins/DELWKODatabasePlugin",["UWA/Core","UWA/Promise","DS/DELWKOModelServices/DELWKOCollectionUtils","DS/DELWKONavigationServices/DELWKONavigateUtil","DS/DELWKODicoServices/DELWKODicoUtils","DS/DELPPWModelServices_FD02/ModelUtils","DS/DELPPWModelServices_FD02/BehaviorUtil","DS/DELPPWNavigationServices_FD02/SwitchDBModeManager","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWIRPCModel_FD02/Model/ReferenceModel"],(function(e,n,t,i,o,r,a,s,c,u){"use strict";return function(u){var l,d=[];return l=function e(n,i){var o,r,a;if(i.id!==n.id){for(o=t.getParentInstancesFromCollection(i.id),a=0;a<o.length;a++)if(r=o[a],e(n,t.getAggregatingReferenceModelFromInstance(r)))return!0;return!1}return!0},{onStart:function(){var n=this;t.setReferenceCollectionEvents({onAdd:function(e,n,t){u.getMediator().notify("addReference",[e,n,t])},onChange:function(e,n,t){u.getMediator().notify("changeReference",[e,n,t])},"onChange:sortIndex":function(e,n,t){u.getMediator().notify("changeSortIndex",[e,n,t])},onRemove:function(e,i,o){var r,a=n.getInstancesFromCollection(e.id),s=n.getParentInstancesFromCollection(e.id);for(r=0;r<s.length;r++)n.removeInstance(s[r]);for(r=0;r<a.length;r++)n.removeInstance(a[r]);t.getImpactedConnections(e.id).forEach((function(e){n.removeConnection(e.id)})),u.getMediator().notify("removeReference",[e,i,o])}}),t.setConnectionsCollectionEvents({onAdd:function(e,n,t){u.getMediator().notify("addConnection",[e,n,t])},onChange:function(e,n,t){u.getMediator().notify("changeConnection",[e,n,t])},onRemove:function(e,n,t){u.getMediator().notify("removeConnection",[e,n,t])}}),t.setInstanceCollectionEvents({onAdd:function(e,n,t){u.getMediator().notify("addInstance",[e,n,t])},onChange:function(e,n,t){u.getMediator().notify("changeInstance",[e,n,t])},onRemove:function(t,i,o){var r,a=CollectionUtils.getImpactedConnections(null,t.id);if(e.is(a))for(r=0;r<a.length;r++)n.removeConnection(a[r].id);u.getMediator().notify("removeInstance",[t,i,o])}}),d.push(u.addExternalListener("reset",n.resetAll))},onStop:function(){var e,n;for(t.removeCollectionEvents(),e=0,n=d.length;e<n;e++)u.removeExternalListener(d[e]);d=[]},findSomeConnection:function(e,n){return t.findSomeConnection(e,n)},findConnections:function(e){return t.findConnections(e)},getAllChildrenFromCollection:function(e){var n={referencesPID:[e],instancesPID:[]};return t.expandOnBackbone(e,n),n},getInstancesFromCollection:function(e){return t.getInstancesFromCollection(e)},getParentInstancesFromCollection:function(e){return t.getParentInstancesFromCollection(e)},getReference:function(e){return t.getReferenceFromCollection(e)},getAllReferences:function(){return t.getAllReferences()},getReferencesFromArray:function(e){return t.getReferencesArrayFromCollection(e)},getReferenceModelFromInstance:function(e){return t.getReferenceModelFromInstance(e)},getAggregatingReferenceModelFromInstance:function(e){return t.getAggregatingReferenceModelFromInstance(e)},getReferenceModel:function(n){var t=null,i=this.getReference(n),o=null,r=null;return e.is(i)||(t=this.getInstance(n),e.is(t)?i=this.getReferenceModelFromInstance(t):u.getLogger().debug("Failed to get reference model. No instance or reference model found for PID: "+n)),a.isMdlAccessTestEnabled()&&(e.is(t)&&(u.getLogger().debug("Manipulated instance is: "),o=t.pick("PID","PLM_ExternalID","V_TreeOrder","isAggregatedBy","isInstanceOf"),u.getLogger().debug(JSON.stringify(o,null,4))),e.is(i)&&(u.getLogger().debug("Manipulated reference is: "),r=i.pick("PID","type","V_Name","V_description"),u.getLogger().debug(JSON.stringify(r,null,4)))),i},getReferenceIdFromInstance:function(n){var t,i=null;return t=this.getInstance(n),e.is(t)?i=t.get("isInstanceOf"):u.getLogger().debug("Failed to get reference Id. No instance model found for PID: "+n),i},isReference:function(e){return t.isReference(e)},isInstance:function(e){return t.isInstance(e)},getInstance:function(e){return t.getInstanceFromCollection(e)},getConnection:function(e){return t.getConnectionFromCollection(e)},createReference:function(e,n){return t.createRef(e,n)},createWorkOrderFromProcess:function(e,n){return t.createWorkOrderFromProcess(e,n)},addReference:function(e,n){return t.addRef(e,n)},fetchRefList:function(e,n){return t.fetchRefList(e,n)},fetchAttributes:function(e,n){t.fetch(e,n)},fetchReferences:function(e,n){t.fetchReferences(e,n)},fetchRoot:function(e,n){i.fetchRoot(e,n)},fetchMultiplePromise:function(e,n){return i.fetchMultiplePromise(e,n)},getProductScopedLinksFromIndex:function(e,n,t){i.getProductScopedLinksFromIndex(e,n,t)},navigateScopesFromIndex:function(e,n,t){i.navigateScopesFromIndex(e,n,t)},navigateScopesFromDB:function(e,n,t){t.onComplete=n,i.getProductScopedLinksFromDB(e,t)},navigateOnIndex:function(e,n,t){i.navigateOnIndex.navigateOnIndex(e,n,t)},getReferenceFromInstance:function(e,n,t){i.navigateOnIndex.getReferenceFromInstance(e,n,t)},updateReference:function(n,i){return i.isFacet=!!e.is(u.getConfig().isFacet)&&u.getConfig().isFacet,t.updateRef(n,i)},updateReferences:function(e,n){return t.updateRefs(e,n)},deleteReference:function(e,n){return t.deleteRef(e,n)},removeReference:function(e,n){t.removeRef(e,n)},createInstance:function(e,n){return t.createInst(e,n)},addInstance:function(e,n){return t.addInst(e,n)},fetchInstance:function(e,n){return t.fetchInst(e,n)},updateInstance:function(e,n){return t.updateInst(e,n)},updateInstances:function(e,n){return t.updateInsts(e,n)},deleteInstance:function(e,n){return t.deleteInst(e,n)},removeInstance:function(e,n){t.removeInstance(e,n)},removeConnection:function(e,n){t.removeConnection(e,n)},createConnection:function(e,n){return t.createConn(e,n)},addConnection:function(e,n){return t.addConn(e,n)},updateConnection:function(e,n){return t.updateConn(e,n)},deleteConnection:function(e,n){return t.deleteConn(e,n)},needToQueryForConnections:function(e){return t.needToQueryForConnections(null,e)},needToQueryForChildren:function(e){return t.needToQueryForChildren(e)},findMissingLinkedObjects:function(n,t,o){i.findMissingLinkedObjects(n,(function(n){e.is(t,"function")&&t.call(null,n)}),o)},getImpacted:function(n,i,o){var r,a,s,c,u,l,d=[],g=[],f=[],m=[],C=this.getInstance(n),p={};if(o=o||{},e.is(o.relationTypes)?p.relationTypes=o.relationTypes:(e.is(o.excludeRelationTypes)&&(p.excludeRelationTypes=o.excludeRelationTypes),e.is(o.excludeTimeConstraintType)&&(p.excludeTimeConstraintType=o.excludeTimeConstraintType)),e.is(C)?(a=this.getReferenceModelFromInstance(C),s=e.is(o.onlyInstanceRelations)&&o.onlyInstanceRelations?null:a.id,f=t.getImpactedConnections(s,C.id,p),m=[a.id,C.id]):(p.isRefRefOnly=!0,f=t.getImpactedConnections(n,null,p),m=[n]),d=f,e.is(i)&&!0===i){for(r=0;r<f.length;r++)c=f[r].get("from"),u=f[r].get("to"),l=e.is(c,"array")?c[c.length-1]:c,m.indexOf(l)>-1?g.push(u):g.push(c);d=g}return d},getConnectionsByModel:function(n,t,r){var a,s=e.is(n)?n.get("PPRTYPE"):e.is(t)?t.get("PPRTYPE"):null;r=r||{},a={forceDBMode:!!e.is(r.forceDBMode)&&r.forceDBMode,relationTypes:"array"===e.typeOf(r.relationTypes)?r.relationTypes:o.getAllConfiguredRelations(s,"read"),isRefRefOnly:!!e.is(r.isRefRefOnly)&&r.isRefRefOnly,silentMode:!!e.is(r.silentMode)&&r.silentMode,onComplete:e.is(r.onComplete)?r.onComplete:null,onFailure:e.is(r.onFailure)?r.onFailure:null},i.getConnectionsByModel(n,t,a)},getAltSubContextProductPromise:function(e,n){return i.getAltSubContextProductPromise(e,n)},getMultipleAltSubContextProductsPromise:function(e){return i.getMultipleAltSubContextProductsPromise(e)},getAlternateEnggItemPromise:function(e){return i.getAlternateEnggItemPromise(e)},getEngAlternatesFromBLPromise:function(e){return i.getEngAlternatesFromBLPromise(e).then((function(e){const{altSubInfosResult:t,someErrorOccured:i}=e;return i&&u.getLogger().warn("DELWKODatabasePlugin",c.getNLSValue("AltSub.BL.SomeError")),n.resolve(t)}))},getAlternateEnggItemInfoPromise:function(n,t){var o=u.getService("ConfigService"),r=null;return e.is(o)&&(r=o.getUserId()),i.getAlternateEnggItemInfoPromise(n,t,r)},getMfgItemsFromDesignAlternatesPromise:function(e,n,t){return i.getMfgItemsFromDesignAlternatesPromise(e,n,t)},fetchInstancesAndTheirReferences:function(e,n){return i.fetchInstancesAndTheirReferences(e,n)},addToCollections:function(e){t.addToCollections(e)},parseServerObjects:function(n,i){var o,r,a=i.stackedObjects?i.stackedObjects:{stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},s={referencePIDs:[],instancePIDs:[]},c=!e.is(i.silentOpt,"boolean")||i.silentOpt,u=this.getConnectionParser();e.is(n.instancesAndReferences)&&n.instancesAndReferences.forEach((function(e){o=e.attributesValue,Object.prototype.hasOwnProperty.call(o,"isInstanceOf")?(s.instancePIDs.push(o.PID),a.stackedInstances.push(o)):(s.referencePIDs.push(o.PID),a.stackedReferences.push(o))})),e.is(n.deletedObjects)&&n.deletedObjects.forEach((function(e){a.deletedObjects.push(e)})),e.is(n.connections)&&n.connections.forEach((function(e){u.parse(e,a)})),r=e.merge(a,{silentMode:c,onComplete:function(){e.is(i.onComplete)&&i.onComplete(s)}}),t.addToCollections(r)},getConnections:function(n){if(e.is(n)&&e.is(n.connections,"array")&&Object.keys(n.connections).length>0){n.connections.forEach((function(e){"DELAsmProcessCanUseCnx"===e.get("type")&&u.getMediator().notify("addLinkedObject",[e])}))}},getDocuments:function(n){var t,i,o=[];if(e.is(n)&&e.is(n.documents,"object")&&Object.keys(n.documents).length>0&&(i=u.getPlugins("DocumentPlugin"),e.is(i)&&(i=i.instance,e.is(n.documents,"object")))){for(t in n.documents)Object.prototype.hasOwnProperty.call(n.documents,t)&&(o=o.concat(n.documents[t]));i.getDocumentInfo(o,{onComplete:function(o){var r,a=[];for(r=0;r<o.data.length;r++)i.addDocument(o.data[r],{silent:!0});for(t in n.documents)Object.prototype.hasOwnProperty.call(n.documents,t)&&e.is(n.documents[t])&&n.documents[t].length>0&&(a.push(t),n.documents[t].forEach((function(e){i.addDocumentConnection(t,e,{silent:!0})})));u.getMediator().notify("addDocumentConnections",[a])}})}},getConnectionsFromServer:function(n,t,o){var r=o||{},a=this,s={noTimeout:!0};u.getMediator().notify("startProgress",s),i.getConnectionsFromServer(n,(function(n){e.is(t,"function")&&t.call(null,n),a.getDocuments(n),u.getMediator().notify("stopProgress",s)}),r)},getDescendantsFromServer:function(n,t,o){var r=o||{},a=this;r.excludeBOTypes=["DELLmiProdSystemIOPort"],r.excludeRelationTypes=["DELLmiExecTimeConstraintRelation"],i.getDescendantsFromServer(n,(function(n){var i=e.is(r.context)?r.context:null;e.is(t,"function")&&t.call(i,n),a.getDocuments(n),a.getConnections(n)}),r)},getInverseConnectionsFromServer:function(e,n){i.getInverseConnectionsFromServer(e,n)},resetAll:function(){t.reset(),u.getMediator().notify("refreshAll")},resetCollections:function(e){t.reset(e)},setSelectPredicate:function(e,n){i.setSelectPredicate(e,n)},getConnectionParser:function(){return i.getConnectionParser()},getNavigateOnIndex:function(){return r.getNavigateOnIndex()},isNavigateOnDemand:function(){return r.isNavigateOnDemand()},isAuthoringMode:function(){var e=!0;return r.getNavigateOnDatabasePreference()||(e=s.isDbMode()),e},isInstancePossible:function(n,t){var i,o,a,s=!0;return e.is(t,"string")?o=t:(i=t,o=t.get("type")),-1===this.getValidChildTypes(n).indexOf(o)?s=!1:n&&i&&(l(i,n)?s=!1:"RESOURCE"!==(a=i.get("PPRTYPE"))&&"PRODUCT"!==a||(s=r.isMGALicenseAvailable())),s},getValidChildTypes:function(n){var t,i,r,a=this,s=[],c=0,u=0;return e.is(n)&&(t=n.get("type"),s=o.getValidChildTypes(t),this.isOperation(n)&&(i=n.get("PID"),this.getInstancesFromCollection(i).every((function(e){return a.isOperation(e)?(c++,r="WORKINSTRUCTION"):a.isWorkInstruction(e)&&(u++,r="OPERATION"),!0})),(c>0||u>0||this.needToQueryForChildren(n))&&(s=s.filter((function(e){return!(o.getPPRType(e)===r)}))))),s},getPPRType:function(n){var t,i=n;return e.is(n,"string")?i=this.getReferenceModel(n):e.is(n)&&n.isInstance()&&(i=this.getReference(n.get("isInstanceOf"))),e.is(i)&&(t=i.get("PPRTYPE"),e.is(t)||(t=o.getPPRType(i.get("type")))),t},isSystem:function(n){return!(!e.is(n)||"SYSTEM"!==this.getPPRType(n))},isOperation:function(n){return!(!e.is(n)||"OPERATION"!==this.getPPRType(n))},isWorkInstruction:function(n){return!(!e.is(n)||"WORKINSTRUCTION"!==this.getPPRType(n))},isProcess:function(n){return!(!e.is(n)||"PROCESS"!==this.getPPRType(n))},isResource:function(n){return!(!e.is(n)||"RESOURCE"!==this.getPPRType(n))},getWhereUsedReferences:function(e,n){i.getWhereUsedReferences(e,n)},getFilteredInstancesFromCollection:function(e,n){return t.getFilteredInstancesFromCollection(e,n)},removeFilterFromCollection:function(e,n){t.removeFilterFromCollection(e,n)},getExecuteByBlockPromise:function(e){return r.getExecuteByBlockPromise(e)},transformToRIROccurrencePath:function(e){return t.transformToRIROccurrencePath(e)},transformRIRToAbsolutePath:function(e){return t.transformRIRToAbsolutePath(e)},isValidPID:function(n){var t=!1;return e.is(n,"string")&&n.length>0&&(t=!0),t},getLastElement:function(n){var t=null;return e.is(n,"array")&&(t=n.length>0?n[n.length-1]:null),t},getLastElementInstanceInfoPID:function(n,t){var i,o=null,r=null;return i=this.getLastElement(n),this.isValidPID(i)&&(o=this.getInstance(i),e.is(o)&&(r=o.get(t),this.isValidPID(r)||(r=null))),r},arrayCompare:function(n,t){var i,o;if(!e.is(n,"array")||!e.is(t,"array"))return!1;if(n.length!==t.length)return!1;for(i=0,o=n.length;i<o;i++)if(n[i]instanceof Array&&t[i]instanceof Array){if(!this.arrayCompare(n[i],t[i]))return!1}else if(n[i]!==t[i])return!1;return!0},groupingBy:function(e,n,t){var i=new Map;return e.forEach((function(e){var o=n(e),r=t(e);i.has(o)?i.set(o,i.get(o).concat(r)):i.set(o,[].concat(r))})),i},hasConnection:function(e){return t.hasConnection(e)},traverseInstanceModels:function(e,n){t.traverseInstanceModels(e,n)},syncMaturity:function(e,n,i,o,r){t.syncMaturity(e,n,i,o,r)},getCurrentStates:function(e,n,i){t.getCurrentStates(e,n,i)},getSequencingMode:function(e,n){t.getSequencingMode(e,n)},setSequencingMode:function(e,n,i){t.setSequencingMode(e,n,i)},manageLinearProductFlowsOnCreateInstance:function(e){t.manageLinearProductFlowsOnCreateInstance(e)},manageLinearProductFlowsOnCreateInstancePID:function(e){t.manageLinearProductFlowsOnCreateInstance(t.getInstanceFromCollection(e))},manageLinearProductFlowsOnDeleteInstance:function(e){t.manageLinearProductFlowsOnDeleteInstance(e)},manageLinearProductFlowsOnDeleteInstancePID:function(e){t.manageLinearProductFlowsOnDeleteInstance(t.getInstanceFromCollection(e))},detachExtn:function(e,n){t.detachExtn(e,n)}}}})),define("DS/DELWKOModelPlugins/DELWKOAttributePlugin",["UWA/Core","DS/DELWKODicoServices/DELWKODicoUtils","DS/DELPPWModelServices_FD02/CollectionUtils","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWModelServices_FD02/ModelUtils"],(function(e,n,t,i,o){"use strict";return function(){var r,a,s,c,u,l,d,g,f,m,C,p,I,P,h,y,v,D,b,R,L,w,M,T,S,E,O,x,F,V,A,N,W,U,k,B=/(\d+)\/(\d+)\/(\d+)@\d+:\d+:\d+:\w+/;return r=function(n){var t="";return e.is(n)&&(t=e.is(n.Type)?n.Type:""),t},U=function(e){var n,t,i,o,r,a,s,c,u,l;return e?(n=e.split("@"),t=e,n.length>1&&(o=(i=n[0].split("/"))[0],r=i[1]-1,a=i[2],c=(s=n[1].split(":"))[0],u=s[1],l=s[2],(t=new Date).setUTCHours(c),t.setUTCMinutes(u),t.setUTCSeconds(l),t.setUTCFullYear(o),t.setUTCDate(1),t.setUTCMonth(r),t.setUTCDate(a)),t):null},k=function(n){var t,i="";return"NULL"===n?i="":(B.test(n)&&(n=U(n).toUTCString()),t=e.is(n,"number")?n:Date.parse(n),isNaN(t)||(i=new Date(t))),i},a=function(e){return"Boolean"===r(e)},s=function(e){return"Double"===r(e)},c=function(e){return"Integer"===r(e)},u=function(e){return"Date"===r(e)},l=function(e){return"String"===r(e)},d=function(n,t,i){var o=!1;return e.is(n)&&(o=e.is(n.Protection)&&1!==n.Protection&&2!==n.Protection,i||(o|=!0===n.isReadOnly||e.is(n.UIAccess)&&"ReadOnly"===n.UIAccess)),e.is(t)&&(o|=!0===t.readOnly||!1===t.visible),o},g=function(n){var t=!0;return e.is(n)&&(t=n.visible),t},m=function(n){return e.is(n)&&e.is(n.MultiValuated)&&"Yes"===n.MultiValuated},f=function(e){return u(e)&&m(e)},C=function(n){return e.is(n.MultiLine)&&"Yes"===n.MultiLine},p=function(n,t){var i=!1;return i=e.is(n)&&e.is(n.HasRangeDefined)&&"Yes"===n.HasRangeDefined,e.is(t)&&Array.isArray(t.authorizedValues)&&(i=i||t.authorizedValues.length>0),i},I=function(n){return!!e.is(n)&&(e.is(n.Magnitude)&&""!==n.Magnitude&&!p(n))},P=function(n,t,i){var o;if(e.is(t)&&Array.isArray(t.authorizedValues)&&t.authorizedValues.length>0){for(o=0;o<t.authorizedValues.length;o++)if(t.authorizedValues[o].NLS===i)return o;return 1}for(o=0;o<n.AuthorizedValues.length;o++)if(h(n,o)===i)return o},h=function(e,n){return u(e)?V(1e3*e.AuthorizedValues[n].NLS):e.AuthorizedValues[n].NLS},y=function(e,n){return n<0?null:e.AuthorizedValues[n].Name},v=function(n,t){var i,o=[];if(e.is(t)&&Array.isArray(t.authorizedValues)&&t.authorizedValues.length>0){for(i=0;i<t.authorizedValues.length;i++)o.push(t.authorizedValues[i].NLS);return o}for(i=0;i<n.AuthorizedValues.length;i++)o.push(h(n,i));return o},D=function(n,t,i){var o;if(e.is(t)&&Array.isArray(t.authorizedValues)&&t.authorizedValues.length>0){for(o=0;o<t.authorizedValues.length;o++)if(t.authorizedValues[o]===i)return c(n)?o+1:t.authorizedValues[o];return 1}for(o=0;o<n.AuthorizedValues.length;o++)if(h(n,o)===i)return c(n)?Number.isInteger(parseInt(n.AuthorizedValues[o].Name))?n.AuthorizedValues[o].Name:(o+1).toString():n.AuthorizedValues[o].Name;return i},b=function(n,t){var i=[];return Array.isArray(t)?(p(n)&&e.is(n.AuthorizedValues,"array")&&t.forEach((function(t){n.AuthorizedValues.some((function(n){return!(!e.is(n.Name,"string")||t!==n.Name)&&(i.push(n.NLS),!0)}))})),i):i},R=function(n){return e.is(n.DefaultValue)?n.DefaultValue:""},L=function(e){return I(e)?e.Magnitude:""},w=function(e){return e.FullName},M=function(n){return e.is(n.MaxLength)?n.MaxLength:0},T=function(e){var n;return c(e)?"^[-+]?([0-9]+)$":s(e)?"^([+-]?([1-9][0-9]*)|(0))([.,][0-9]+)?":(n=M(e))<=0?null:"^.{0,"+n+"}$"},S=function(n){var t="";return e.is(n)&&(t=e.is(n.NLS)?n.NLS:n.Name),t},E=function(n,t){return!!e.is(n)&&Object.prototype.hasOwnProperty.call(n._attributes,t)},O=function(n){return"array"!==e.typeOf(n)&&(n=e.is(n)&&n.length>0&&"NULL"!==n&&"null"!==n?n.split(o.getPrefSeparator()):[]),n},x=function(n){var t,i,r=[];if(Array.isArray(n))for(t=0;t<n.length;t++)i=N(n[t]),e.is(i)&&r.push(i);else if(e.is(n)&&n.length>0&&"NULL"!==n&&"null"!==n)for(n=n.split(o.getPrefSeparator()),t=0;t<n.length;t++)i=N(n[t]),e.is(i)&&r.push(i);return r},F=function(n,t,i){var r="",a=O(n),s=widget.lang,c=o.getPrefSeparator(),u=e.is(t,"string")&&"Double"===t,l=e.is(t,"string")&&"Integer"===t,d=!e.is(i,"boolean")||i,g=l?1:2;return e.is(a,"array")&&a.forEach((function(e,n){var t=null;n>0&&(r+=c),(l||u)&&d?(t=l?parseInt(e):parseFloat(e),isNaN(t)||(t=t.toLocaleString(s,{minimumSignificantDigits:g,maximumSignificantDigits:21}),r+=t)):r+=e})),r},V=function(e,n,t){var i=widget.lang,o=k(e);return isNaN(o)||""===o?"":!0===n?o.toLocaleString(i,t):o.toLocaleDateString(i,t)},N=function(e){return k(e)},A=function(n,t){var i=parseFloat(n),o=widget.locale;return i=i.toLocaleString(o),e.is(t)&&(i+=" "+t),i},W=function(t,i){var o,r,a,s=!1;return e.is(t)&&(o="string"===e.typeOf(t)?t:t.get("type"),r=n.getTypeExtnInfo(o),a=n.getAttrOfType(o),Array.isArray(a)&&a.length>0&&-1!==a.indexOf(i.split(".")[0])&&(s=!0),Array.isArray(r)&&r.length>0&&-1!==r.indexOf(i.split(".")[0])&&(s=!0)),s},{getNodeAndColumnInfos:function(i,o){var r,a,s,c,u,l,d,g,f,m={};if(c=this.getAttributeInfoFromColumn(o),i&&(a="instance"===c.objType?i.getInstancePID():i.getReferencePID()),m.attributeName=c.attributeName,m.dataIndex=c.dataIndex,m.instOrRef=c.objType,"instance"===c.objType?m.objectToBeModified=t.getInstanceFromCollection(a):m.objectToBeModified=t.getReferenceFromCollection(a),e.is(m.objectToBeModified)&&e.is(o)&&e.is(o.dicoType,"array")&&o.dicoType.length>0)for(d=o.dicoType.length,g=o.dicoType,f=0;f<d;f++)if(l=g[f]+"."+c.dataIndex,Object.keys(m.objectToBeModified._attributes).includes(l)||e.is(m.objectToBeModified.get(l))){c.attributeName=c.dataIndex=l;break}return m.attributeName=c.attributeName,m.dataIndex=c.dataIndex,m.instOrRef=c.objType,m.attributeInfo=n.getAttributeInfo(c.attributeName),e.is(m.attributeInfo)||(e.is(m.objectToBeModified)?(s=m.objectToBeModified.get("type"),r=e.is(s,"string")?m.objectToBeModified.get("type")+"."+c.dataIndex:c.dataIndex):r=c.dataIndex,m.attributeInfo=n.getAttributeInfo(r),e.is(m.attributeInfo)||(m.attributeInfo={})),e.is(m.objectToBeModified)?(m.attributeDef={},u=n.getTypeMaskInfo(m.objectToBeModified.get("type")),e.is(u)&&e.is(Object.prototype.hasOwnProperty.call(u,c.dataIndex))&&(m.attributeDef=u[c.dataIndex])):m.attributeDef={},m.attributeNLSTitle=S(m.attributeInfo),m},getAttributeInfoFromColumn:function(n){var t,i={};return e.is(n)&&e.is(n.dataIndex)&&("tree"===n.dataIndex?(i.dataIndex=n.label,i.objType=n.labelIsOnRef?"reference":"instance",i.attributeName=e.is(n.dicoType)?n.dicoType+"."+i.dataIndex:i.dataIndex):e.is(n.dicoType,"array")&&n.dicoType.length>0?(t=n.dataIndex.split("."),i.objType=t[t.length-1],i.dataIndex=t[0],i.attributeName=i.dataIndex):1===(t=n.dataIndex.split(".")).length?(i.dataIndex=t[0],i.attributeName=e.is(n.text)?n.text:e.is(n.dicoType)?n.dicoType+"."+i.dataIndex:i.dataIndex):(i.objType=t[t.length-1],2===t.length?(i.dataIndex=t[0],i.attributeName=e.is(n.dicoType)?n.dicoType+"."+i.dataIndex:i.dataIndex):3===t.length&&(i.dataIndex=t[0]+"."+t[1],i.attributeName=i.dataIndex))),i},getColumnDisplayValue:function(t){var o,r=this.getAttributeInfoFromColumn(t),a=n.getAttributeInfo(r.attributeName);return e.is(a)?o="PLMEntity.description"===a.FullName?i.getNLSValue("description"):this.getNLS(a):e.is(r.attributeName)?o="MANAGESTEPOPERATIONSUI"===t.displayType?r.attributeName:i.getNLSValue("Column."+r.attributeName):e.is(t.displayType)&&"MultiType"===t.displayType?(a=n.getAttributeInfo(t.dataIndex.substr(0,t.dataIndex.indexOf("."))),o=this.getNLS(a)):o=i.getNLSValue("Column."+r.dataIndex),o},getObjectAndAttributeInfos:function(t){var i,o=this,r=[],a=function(t){var i=n.getAttributeInfo(t.name,null),a={attributeName:t.name,dataIndex:t.name.indexOf(".")>-1?t.name.split(".")[1]:t.name,attributeNLSTitle:o.getNLS(i),attributeInfo:i,readOnly:!(!e.is(t.readOnly)||!0!==t.readOnly)};r.push(a)};if("array"!==e.typeOf(t))a(t);else for(i=0;i<t.length;i++)a(t[i]);return r},isBoolean:function(e){return a(e)},isDouble:function(e){return s(e)},isInteger:function(e){return c(e)},isDate:function(e){return u(e)},isString:function(e){return l(e)},getFormattedDate:function(e,n,t){return V(e,n,t)},getFormattedValue:function(e,n){return A(e,n)},getDate:function(e){return N(e)},isReadOnly:function(e,n,t){return d(e,n,t)},isVisible:function(e){return g(e)},isMultiValuated:function(e){return m(e)},isMultiDate:function(e){return f(e)},isMultiLine:function(e){return C(e)},hasRangeDefined:function(e,n){return p(e,n)},hasMagnitude:function(e){return I(e)},getAuthorizedValueIndex:function(e,n,t){return P(e,n,t)},getAuthorizedValueNLS:function(e,n){return h(e,n)},getAuthorizedValueDB:function(e,n){return y(e,n)},getAuthorizedValuesNLSList:function(e,n){return v(e,n)},getAuthorizedValue:function(e,n,t){return D(e,n,t)},getAuthorizedNLSvalues:function(e,n,t){return b(e,n)},getDefaultValue:function(e){return R(e)},getMagnitude:function(e){return L(e)},getFullName:function(e){return w(e)},getMaxLength:function(e){return M(e)},getPattern:function(e){return T(e)},getNLS:function(e){return S(e)},getType:function(e){return r(e)},doesAttributeExist:function(e,n){return E(e,n)},getValueAsArray:function(e,n){return O(e)},getValueAsDateArray:function(e){return x(e)},getValueAsString:function(e,n,t){return F(e,n,t)},getNLSForUnit:function(n){var t="";return e.is(n)&&I(n)&&e.is(n.ManipulationUnit,"string")&&(t=0!==n.ManipulationUnit.length?i.getNLSForUnit(n.Magnitude,n.ManipulationUnit):i.getNLSForUnit(n.Magnitude)),t},getMagnitudeValue:function(n,t,i){return I(t)&&(n=e.is(n,"array")?F(n,r(t),i):"NULL"===n?"":n),n},convertDateToStandard:function(n){var t,i,o,r,a,s,c,u=widget.lang;return n?(t=e.is(n,"date")?e.clone(n):new Date,i=n.getUTCFullYear(),(o=n.getUTCMonth()+1)<10&&(o="0"+o),(r=n.getUTCDate())<10&&(r="0"+r),(a=n.getUTCHours())<10&&(a="0"+a),(s=n.getUTCMinutes())<10&&(s="0"+s),(c=n.getUTCSeconds())<10&&(c="0"+c),t.setYear(i),t.setMonth(n.getMonth()),t.setDate(r),t.setHours(a),t.setMinutes(s),t.setSeconds(c),{value:n.toLocaleString(u),valueDB:i+"/"+o+"/"+r+"@"+a+":"+s+":"+c+":GMT"}):{value:"",valueDB:""}},getConnectionTypeWithMBOM:function(e){var n;return t.connections._models.forEach((function(t){t.id.contains(e)&&(n=t.id.split("|")[0])})),n},getDimensions:function(){return i.getDimensions()},getDimension:function(e){return i.getDimension(e)},addAttributeInfo:function(e,t){return n.addAttributeInfo(e,t)},isAttrApplicableForType:function(e,n){return W(e,n)}}}})),define("DS/DELWKOModelPlugins/DELWKODicoPlugin",["UWA/Core","DS/DELWKODicoServices/DELWKODicoUtils"],(function(e,n){"use strict";return function(t){var i={},o={};return{getNLSMaturityInfo:function(t){var i=void 0,o=n.getMaturityInfoType("states");return e.is(o)&&o.forEach((e=>{e.Name===t&&(i=e.NLS)})),i},getAttributeProperties:function(){return i},getMagnitudePreferences:function(){return o},getAttributeInfo:function(e,t){return n.getAttributeInfo(e,t)},getTypeInfo:function(e){return n.getTypeInfo(e)},getTypeMaskInfo:function(e){return n.getTypeMaskInfo(e)},getPPRType:function(e){return n.getPPRType(e)},getTypeHierarchy:function(e){return n.getTypeHierarchy(e)},getParentTypes:function(e){return n.getParentTypes(e)},getReadOnlyTypes:function(){return n.getReadOnlyTypes()},isAKindOf:function(e,t){return n.isAKindOf(e,t)},getConfiguredRelations:function(e,t,i){return n.getConfiguredRelations(e,t,i)},getConfiguredCustomRelations:function(e,t,i){return n.getConfiguredCustomRelations(e,t,i)},isRelationTypeConfigured:function(e,t,i,o){var r;return r=n.getPossibleRelations(t,i,o),Array.isArray(r)&&r.indexOf(e)>-1},getPossibleRelations:function(e,t,i){return n.getPossibleRelations(e,t,i)},getPossibleRelationTypes:function(i,o,r,a){var s,c,u=i.get("type"),l=o.get("type");if(u&&l)return s=n.getPossibleRelations(u,l,"write"),e.is(a)&&e.is(r)&&r.get("isAggregatedBy")===a.get("isAggregatedBy")||((c=s.indexOf("DELLmiMaterialPathCnxCust"))>-1&&s.splice(c,1),(c=s.indexOf("DELLmiMaterialPathCnxCust_inverse"))>-1&&s.splice(c,1),(c=s.indexOf("DELLmiTimeConstraintCnx"))>-1&&s.splice(c,1),(c=s.indexOf("DELLmiTimeConstraintCnx_inverse"))>-1&&s.splice(c,1)),s;t.getLogger().debug(" No PPRTypes on models")},isReferencesHasReadOnlyType:function(n,t){let i=!1,o=null,r=t||{};const a=this,s=function(e){let n=o.has(e);if(!n){n=a.getParentTypes(e).some((function(e){return o.has(e)}))}return n};if(Array.isArray(r.excludeReferenceTypes)&&r.excludeReferenceTypes.length>0?(o=new Set(this.getReadOnlyTypes()),r.excludeReferenceTypes.forEach((function(e){o.delete(e)}))):o=this.getReadOnlyTypes(),e.is(n,"string"))i=s(n);else if(e.is(n,"object")){const e=n.get("type");i=s(e)}else Array.isArray(n)&&(i=n.some((function(n){if(e.is(n)){const e=n.get("type");return s(e)}return!1})));return i},isLinkPossible:function(e,n,t,i){var o=this.getPossibleRelationTypes(e,n,t,i),r=this.getPossibleRelationTypes(n,e,i,t);return o.length>0||r.length>0},isEntityInstance:function(e){return n.isEntityInstance(e)},isReparentPossible:function(e){var t=n.getAcceptedPPRTypesForActions();return null===t||t.REPARENT.PPRType.includes(e)},isReorderPossible:function(e){var t=n.getAcceptedPPRTypesForActions();return null===t||t.REORDER.PPRType.includes(e)},getAcceptedBaseTypesForActions:function(){return n.getAcceptedBaseTypesForActions()}}}})),define("DS/DELWKOModelPlugins/DELWKOTreeViewPluginCloud",["UWA/Core","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELWKOModelPlugins/DELWKOViewPreferencesUI","DS/DELPPWViewPlugins_FD02/TreeViewPlugin/LayoutPreferencesUI","DS/CoreEvents/Events"],(function(e,n,t,i,o,r){"use strict";return function(a){var s,c,u,l,d,g,f,m,C,p,I,P,h,y,v,D,b,R,L,w={"revision.reference":{command:"HistoryHdr"},"current.reference":{command:"MaturityCmdCloud"},"owner.reference":{command:"ActionBar_ChangeOwner"},"organization.reference":{command:"ActionBar_ChangeOwner"},"project.reference":{command:"ActionBar_ChangeOwner"},"EnterpriseExtension.V_PartNumber.reference":{command:"SetThePartNumber",defaultValue:t.getNLSValue("Column.EnterpriseExtension.V_PartNumber.DefaultValue")}},M={Type:"referenceType.group",Reference:"referenceID.group"},T={"referenceType.group":"type.reference","referenceID.group":"PID.reference"},S={},E=new Set,O=new Set,x=[],F="",V=Object.create(null);return h=function(e){var n=-1;return I.some((function(t,i){var o=!1;return t.viewID===e&&(n=i,o=!0),o})),n},d=function(e){return(""!==s.getConfigurationPID()?s.getConfigurationPID()+"_":"")+e+"_ColumnPreferences"},g=function(e){return s.getPreference(d(e))},f=function(e,n){return s.setPreference(d(e),n)},m=function(){var n,t=null;return n=s.getPreference("widgetLayoutValues"),e.is(n)&&(t=e.Json.decode(n)),t},C=function(n){s.setPreference("widgetLayoutValues",e.Json.encode(n))},p=function(t,i){var o,r,s,c,u=n.getXMLValues(i),l=g(t);if(l=e.is(l)?l:[],u=e.is(u)?e.clone(u.Config.Columns.Column):[],u=e.is(u,"array")?u:[u],c=a.getPlugins("CfgColumnsPlugin"),e.is(c)){for(c=c.instance,o=l.length-1;o>=0;o--){for(s=!1,r=u.length-1;r>=0;r--)if(u[r].dataIndex===l[o].dataIndex){e.is(u[r].mandatory,"boolean")&&(l[o].colVisibility.mandatory=u[r].mandatory,u[r].mandatory&&(l[o].colVisibility.display=u[r].mandatory)),s=!0,u.splice(r,1);break}s||l.splice(o,1)}const n=c.getConfigColDataIndexSet();u.filter((function(t){let i=!0;return e.owns(t,"displayType")&&"CFG"===t.displayType&&(n.has(t.dataIndex)||(i=!1)),i})).forEach((function(n){l.push({colVisibility:{display:!e.is(n.display)||n.display,mandatory:!!e.is(n.mandatory)&&n.mandatory},dataIndex:n.dataIndex,dicoType:n.dicoType,width:e.is(n.width)?n.width:"auto",minWidth:e.is(n.minWidth)?n.minWidth:"100"})})),l.forEach((e=>{e.colPinned={value:"unpinned"}})),f(t,l)}return l},P=function(){var n,o,r,s,c,u={views:[],viewPreferences:{},viewIcons:{}};o=a.getPlugins("AttributePlugin"),n=a.getPlugins("UXComponentsPlugin"),r=a.getPlugins("RootsPlugin"),e.is(o)&&e.is(n)&&e.is(r)?(o=o.instance,n=n.instance,r=r.instance,c=n.getComponent("WUXFrameWindowsManager").getFrameWindow(a.getConfig().appContext),s=new i(a,c,n,o,r),I.forEach((function(e){var n=g(e.viewID);u.views.push(e.viewID),u.viewPreferences[e.viewID]=n,e.viewIcon&&(u.viewIcons[e.viewID]=t.getIconElem(e.viewIcon))})),s.buildView(u,(function(n){var t,i;for(t in n)e.owns(n,t)&&(i=n[t],f(t,i));a.getMediator().notify("TreeViewPrefModified")})).show()):a.getLogger().debug("Attribute Plugin or UXComponents Plugin or Roots Plugin is not available.")},y=function(){var n,t,i,r={viewsInDockingZones:l,viewsInFreeZone:u};t=a.getPlugins("UXComponentsPlugin"),e.is(t)&&(t=t.instance,i=m(),(n=new o(c,t,a.getConfig().appContext,i,r)).showDialog((function(){var e=n.decipherPreferencesFromButtonStates();C(e),a.getMediator().notify("widgetLayoutChanged")})))},v=function(e){return w[e]},D=function(n){return n&&e.is(S[n])?S[n]:[]},b=function(n,t){n&&t&&(e.is(S[n])||(S[n]=[]),S[n].push(t))},L=function(){var e,n=!1;for(e in S)if(Array.isArray(S[e])&&S[e].length>0){n=!0;break}return n},R=function(e){e&&(S[e]=[])},{name:"TreeViewPlugin",onStart:function(n){I=[],l={},u={},s=a.getService("ConfigService"),e.is(s)||a.getLogger().debug("TreeViewPlugin initialization failed as ConfigService is not available"),c=a.getService("LayoutService"),e.is(c)||a.getLogger().debug("TreeViewPlugin initialization failed as LayoutService is not available"),x.push(a.addExternalListener("EditViewPreferencesCmd",P)),x.push(a.addExternalListener("LayoutPreferences",y)),n()},onStop:function(){var e,n;for(I=null,l=null,u=null,e=0,n=x.length;e<n;e++)a.removeExternalListener(x[e]);x=[],E.clear()},registerViewforColumnPref:function(n){var t=!1;return e.is(n)&&(e.is(n.viewID)||e.is(n.columnConfigName))?-1===h(n.viewID)?(I.push(n),p(n.viewID,n.columnConfigName),t=!0):a.getLogger().debug(n.viewID+" Module has already registered for Column Preferences"):a.getLogger().debug(" viewID or columnConfigName has not been defined, so cannot register for  Column Preferences"),t},syncViewColumnPreferences:function(n){var t,i,o;if(e.is(n))return(t=h(n))>-1?(i=I[t],p(i.viewID,i.columnConfigName),o=this.getViewColumnPreferences(i.viewID)):a.getLogger().debug(n+" Module has already registered for Column Preferences"),o;a.getLogger().debug(" viewID has not been defined, so cannot sync Column Preferences")},getViewColumnPreferences:function(t,i){var o,r,s,c,u,l,d,f=a.getPlugins("AttributePlugin"),m=a.getPlugins("ResourcePlugin");if(e.is(f)&&e.is(m)){if(f=f.instance,m=m.instance,e.is(t)){if((o=h(t))>-1)r=g(t),u=I[o].columnConfigName,c=n.getXMLValues(u),s=e.is(c)?c.Config.Columns.Column:[],s=e.is(s,"array")?s:[s],r.forEach((function(n,t){s.some((function(i){var o=!1;return i.dataIndex===n.dataIndex&&(r[t]=e.merge({pinned:n.colPinned.value,isHidden:!n.colVisibility.display,width:n.width,minWidth:n.minWidth},i),o=!0),o}))})),c.Config.Columns.Column=r;else{if(!e.is(i))return void a.getLogger().debug(t+" Module has not registered for Column Preferences");c=n.getXMLValues(i)}return e.is(c)&&(l=c.Config.Label,e.is(l)&&(d=f.getAttributeInfoFromColumn({dataIndex:l.dataIndex}),V[t]={attributeName:d.attributeName,labelIsOnRef:"reference"===d.objType,dicoType:l.dicoType})),e.is(c)?c.Config:void 0}a.getLogger().debug(" viewID has not been defined, so cannot retrieve Column Preferences")}else a.getLogger().debug("AttributePlugin or ResourcePlugin not available")},unRegisterViewforColumnPref:function(n){var t,i=!1;return e.is(n)?(t=h(n))>-1?(I.splice(t,1),i=!0):a.getLogger().debug(n+" Cannot unregister as Module is not registered for Column Preferences"):a.getLogger().debug(" viewID has not been defined, so cannot unRegister for  Column Preferences"),i},getLabelInfo:function(e){return V[e]},getViewLabelMap:function(){return V},registerViewforWidgetLayout:function(n){var t;e.is(n)&&(e.is(n.viewID)||e.is(n.viewType))?(t=n.viewID,e.is(n.dockArea)?e.is(l[t])?l[t].views.push(n.viewType):l[t]={views:[n.viewType],dockArea:n.dockArea}:e.is(u[t])?u[t].views.push(n.viewType):u[t]={views:[n.viewType]}):a.getLogger().debug("viewID or viewType has not been defined, so cannot register for Layout Preferences")},unregisterViewforWidgetLayout:function(n,t){var i,o,r,s=!1;return e.is(u[n])?i=u:e.is(l[n])&&(i=l),e.is(i)&&-1!==(r=(o=i[n]).views.indexOf(t))&&(o.views.splice(r,1),0===o.views.length&&delete i[n],s=!0),s||a.getLogger().debug('Cannot unregister as Module "'+n+'" or "'+t+'" is not registered for Layout Preferences'),s},setCurrentView:function(n,t){e.is(t)&&(e.is(n)||e.is(t.currentView))?e.is(u[n])?u[n].currentView=t.currentView:u[n]={currentView:t.currentView}:a.getLogger().debug("moduleId or currentView has not been defined, so cannot setup Module Current View")},updateViewPreferences:function(n,t,i){var o,r=g(n);Array.isArray(r)&&e.is(t)&&e.is(i)&&(o=r.detect((function(e){return e.dataIndex===t}),this),e.is(o)&&(Object.keys(i).forEach((function(e){switch(e){case"visibility":o.colVisibility.display=i.visibility;break;case"colPinned":o.colPinned.value=i.colPinned;break;default:a.getLogger().debug("Invalid option! No parameters to manage for the selected column!")}})),f(n,r)))},getCurrentView:function(){return u},setActiveView:function(e){F=e},getActiveView:function(){return F},getURLColumnInfo:function(e){return v(e)},executeCommand_V2:function(n,t){var i,o,s,c=a.getConfig().appContext,u=a.getPlugins("UXComponentsPlugin").instance.getComponent("WUXCommandsManager"),l=u.getCommand(n,c);s=function(e){var n;return{displayName:(n=a.getPlugins("DatabasePlugin").instance.getReference(e.getReferencePID())).get("V_Name"),id:n.get("PID"),revision:n.get("revision"),type:n.get("type")}},i=(t||{}).node,e.is(l)?e.is(i)?(o=s(i),!0===i.fromXEN&&e.is(i.getParent()._treeDocument)&&r.publish({event:"FacetCommandManager/executeCommand",data:{commandName:n,targetNode:o}})):e.is(o)?l.execute(o):l.execute(t,c):(l=u.getCommandCheckHeader(n,c),e.is(l)&&!1===l.getState()&&(l.options.node={referencePID:i.getReferencePID(),instancePID:i.getInstancePID(),absPath:i.getAbsolutePath()},l.toggleState()))},executeCommand:function(n,t){var i,o,s,c=a.getConfig().appContext,u=a.getPlugins("UXComponentsPlugin").instance.getComponent("WUXCommandsManager"),l=u.getCommand(n,c);s=function(e){var n;return{displayName:(n=a.getPlugins("DatabasePlugin").instance.getReference(e.getReferencePID())).get("V_Name"),id:n.get("PID"),current:n.get("current"),revision:n.get("revision"),type:n.get("type")}},i=(t||{}).node,e.is(l)?(e.is(i)&&(o=s(i)),!0===i.fromXEN&&e.is(i.getParent()._treeDocument)?r.publish({event:"FacetCommandManager/executeCommand",data:{commandName:n,targetNode:o}}):l.isEnabled()&&l.execute(o)):(l=u.getCommandCheckHeader(n,c),e.is(l)&&!1===l.getState()&&(l.options.node={referencePID:i.getReferencePID(),instancePID:i.getInstancePID(),absPath:i.getAbsolutePath()},l.toggleState()))},addColumnForGrouping:function(e,n){b(e,n)},getColumnsForGrouping:function(e){return D(e)},isGroupingExist:function(){return L()},getGroupingAdditonalColumns:function(){return M},resetColumnsForGrouping:function(e){R(e)},getCollectionSpecificDataIndex:function(e){return T[e]},registerModuleForRecursiveGrouping:function(e){E.add(e)},doesModuleHaveRecursiveGrouping:function(e){return E.has(e)},unRegisterModuleForRecursiveGrouping:function(e){E.delete(e)},registerModuleColumnsAsImmutable:function(e){O.add(e)},areModuleColumnsImmutable:function(e){return O.has(e)}}}})),define("DS/DELWKOModelPlugins/DELWKOTreeViewPlugin",["UWA/Core","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELWKOModelPlugins/DELWKOViewPreferencesUI","DS/DELPPWViewPlugins_FD02/TreeViewPlugin/LayoutPreferencesUI","DS/CoreEvents/Events"],(function(e,n,t,i,o,r){"use strict";return function(a){var s,c,u,l,d,g,f,m,C,p,I,P,h,y,v,D,b,R,L,w={"revision.reference":{command:"HistoryHdr"},"current.reference":{command:"MaturityHdr"},"owner.reference":{command:"ActionBar_ChangeOwner"},"organization.reference":{command:"ActionBar_ChangeOwner"},"project.reference":{command:"ActionBar_ChangeOwner"},"EnterpriseExtension.V_PartNumber.reference":{command:"SetThePartNumber",defaultValue:t.getNLSValue("Column.EnterpriseExtension.V_PartNumber.DefaultValue")}},M={Type:"referenceType.group",Reference:"referenceID.group"},T={"referenceType.group":"type.reference","referenceID.group":"PID.reference"},S={},E=new Set,O=new Set,x=[],F="",V=Object.create(null);return h=function(e){var n=-1;return I.some((function(t,i){var o=!1;return t.viewID===e&&(n=i,o=!0),o})),n},d=function(e){return(""!==s.getConfigurationPID()?s.getConfigurationPID()+"_":"")+e+"_ColumnPreferences"},g=function(e){return s.getPreference(d(e))},f=function(e,n){return s.setPreference(d(e),n)},m=function(){var n,t=null;return n=s.getPreference("widgetLayoutValues"),e.is(n)&&(t=e.Json.decode(n)),t},C=function(n){s.setPreference("widgetLayoutValues",e.Json.encode(n))},p=function(t,i){var o,r,s,c,u=n.getXMLValues(i),l=g(t);if(l=e.is(l)?l:[],u=e.is(u)?e.clone(u.Config.Columns.Column):[],u=e.is(u,"array")?u:[u],c=a.getPlugins("CfgColumnsPlugin"),e.is(c)){for(c=c.instance,o=l.length-1;o>=0;o--){for(s=!1,r=u.length-1;r>=0;r--)if(u[r].dataIndex===l[o].dataIndex){e.is(u[r].mandatory,"boolean")&&(l[o].colVisibility.mandatory=u[r].mandatory,u[r].mandatory&&(l[o].colVisibility.display=u[r].mandatory)),s=!0,u.splice(r,1);break}s||l.splice(o,1)}const n=c.getConfigColDataIndexSet();u.filter((function(t){let i=!0;return e.owns(t,"displayType")&&"CFG"===t.displayType&&(n.has(t.dataIndex)||(i=!1)),i})).forEach((function(n){l.push({colVisibility:{display:!e.is(n.display)||n.display,mandatory:!!e.is(n.mandatory)&&n.mandatory},dataIndex:n.dataIndex,dicoType:n.dicoType,width:e.is(n.width)?n.width:"auto",minWidth:e.is(n.minWidth)?n.minWidth:"100"})})),l.forEach((e=>{e.colPinned={value:"unpinned"}})),f(t,l)}return l},P=function(){var n,o,r,s,c,u={views:[],viewPreferences:{},viewIcons:{}};o=a.getPlugins("AttributePlugin"),n=a.getPlugins("UXComponentsPlugin"),r=a.getPlugins("RootsPlugin"),e.is(o)&&e.is(n)&&e.is(r)?(o=o.instance,n=n.instance,r=r.instance,c=n.getComponent("WUXFrameWindowsManager").getFrameWindow(a.getConfig().appContext),s=new i(a,c,n,o,r),I.forEach((function(e){var n=g(e.viewID);u.views.push(e.viewID),u.viewPreferences[e.viewID]=n,e.viewIcon&&(u.viewIcons[e.viewID]=t.getIconElem(e.viewIcon))})),s.buildView(u,(function(n){var t,i;for(t in n)e.owns(n,t)&&(i=n[t],f(t,i));a.getMediator().notify("TreeViewPrefModified")})).show()):a.getLogger().debug("Attribute Plugin or UXComponents Plugin or Roots Plugin is not available.")},y=function(){var n,t,i,r={viewsInDockingZones:l,viewsInFreeZone:u};t=a.getPlugins("UXComponentsPlugin"),e.is(t)&&(t=t.instance,i=m(),(n=new o(c,t,a.getConfig().appContext,i,r)).showDialog((function(){var e=n.decipherPreferencesFromButtonStates();C(e),a.getMediator().notify("widgetLayoutChanged")})))},v=function(e){return w[e]},D=function(n){return n&&e.is(S[n])?S[n]:[]},b=function(n,t){n&&t&&(e.is(S[n])||(S[n]=[]),S[n].push(t))},L=function(){var e,n=!1;for(e in S)if(Array.isArray(S[e])&&S[e].length>0){n=!0;break}return n},R=function(e){e&&(S[e]=[])},{name:"TreeViewPlugin",onStart:function(n){I=[],l={},u={},s=a.getService("ConfigService"),e.is(s)||a.getLogger().debug("TreeViewPlugin initialization failed as ConfigService is not available"),c=a.getService("LayoutService"),e.is(c)||a.getLogger().debug("TreeViewPlugin initialization failed as LayoutService is not available"),x.push(a.addExternalListener("EditViewPreferencesCmd",P)),x.push(a.addExternalListener("LayoutPreferences",y)),n()},onStop:function(){var e,n;for(I=null,l=null,u=null,e=0,n=x.length;e<n;e++)a.removeExternalListener(x[e]);x=[],E.clear()},registerViewforColumnPref:function(n){var t=!1;return e.is(n)&&(e.is(n.viewID)||e.is(n.columnConfigName))?-1===h(n.viewID)?(I.push(n),p(n.viewID,n.columnConfigName),t=!0):a.getLogger().debug(n.viewID+" Module has already registered for Column Preferences"):a.getLogger().debug(" viewID or columnConfigName has not been defined, so cannot register for  Column Preferences"),t},syncViewColumnPreferences:function(n){var t,i,o;if(e.is(n))return(t=h(n))>-1?(i=I[t],p(i.viewID,i.columnConfigName),o=this.getViewColumnPreferences(i.viewID)):a.getLogger().debug(n+" Module has already registered for Column Preferences"),o;a.getLogger().debug(" viewID has not been defined, so cannot sync Column Preferences")},getViewColumnPreferences:function(t,i){var o,r,s,c,u,l,d,f=a.getPlugins("AttributePlugin"),m=a.getPlugins("ResourcePlugin");if(e.is(f)&&e.is(m)){if(f=f.instance,m=m.instance,e.is(t)){if((o=h(t))>-1)r=g(t),u=I[o].columnConfigName,c=n.getXMLValues(u),s=e.is(c)?c.Config.Columns.Column:[],s=e.is(s,"array")?s:[s],r.forEach((function(n,t){s.some((function(i){var o=!1;return i.dataIndex===n.dataIndex&&(r[t]=e.merge({pinned:n.colPinned.value,isHidden:!n.colVisibility.display,width:n.width,minWidth:n.minWidth},i),o=!0),o}))})),c.Config.Columns.Column=r;else{if(!e.is(i))return void a.getLogger().debug(t+" Module has not registered for Column Preferences");c=n.getXMLValues(i)}return e.is(c)&&(l=c.Config.Label,e.is(l)&&(d=f.getAttributeInfoFromColumn({dataIndex:l.dataIndex}),V[t]={attributeName:d.attributeName,labelIsOnRef:"reference"===d.objType,dicoType:l.dicoType})),e.is(c)?c.Config:void 0}a.getLogger().debug(" viewID has not been defined, so cannot retrieve Column Preferences")}else a.getLogger().debug("AttributePlugin or ResourcePlugin not available")},unRegisterViewforColumnPref:function(n){var t,i=!1;return e.is(n)?(t=h(n))>-1?(I.splice(t,1),i=!0):a.getLogger().debug(n+" Cannot unregister as Module is not registered for Column Preferences"):a.getLogger().debug(" viewID has not been defined, so cannot unRegister for  Column Preferences"),i},getLabelInfo:function(e){return V[e]},getViewLabelMap:function(){return V},registerViewforWidgetLayout:function(n){var t;e.is(n)&&(e.is(n.viewID)||e.is(n.viewType))?(t=n.viewID,e.is(n.dockArea)?e.is(l[t])?l[t].views.push(n.viewType):l[t]={views:[n.viewType],dockArea:n.dockArea}:e.is(u[t])?u[t].views.push(n.viewType):u[t]={views:[n.viewType]}):a.getLogger().debug("viewID or viewType has not been defined, so cannot register for Layout Preferences")},unregisterViewforWidgetLayout:function(n,t){var i,o,r,s=!1;return e.is(u[n])?i=u:e.is(l[n])&&(i=l),e.is(i)&&-1!==(r=(o=i[n]).views.indexOf(t))&&(o.views.splice(r,1),0===o.views.length&&delete i[n],s=!0),s||a.getLogger().debug('Cannot unregister as Module "'+n+'" or "'+t+'" is not registered for Layout Preferences'),s},setCurrentView:function(n,t){e.is(t)&&(e.is(n)||e.is(t.currentView))?e.is(u[n])?u[n].currentView=t.currentView:u[n]={currentView:t.currentView}:a.getLogger().debug("moduleId or currentView has not been defined, so cannot setup Module Current View")},updateViewPreferences:function(n,t,i){var o,r=g(n);Array.isArray(r)&&e.is(t)&&e.is(i)&&(o=r.detect((function(e){return e.dataIndex===t}),this),e.is(o)&&(Object.keys(i).forEach((function(e){switch(e){case"visibility":o.colVisibility.display=i.visibility;break;case"colPinned":o.colPinned.value=i.colPinned;break;default:a.getLogger().debug("Invalid option! No parameters to manage for the selected column!")}})),f(n,r)))},getCurrentView:function(){return u},setActiveView:function(e){F=e},getActiveView:function(){return F},getURLColumnInfo:function(e){return v(e)},executeCommand_V2:function(n,t){var i,o,s,c=a.getConfig().appContext,u=a.getPlugins("UXComponentsPlugin").instance.getComponent("WUXCommandsManager"),l=u.getCommand(n,c);s=function(e){var n;return{displayName:(n=a.getPlugins("DatabasePlugin").instance.getReference(e.getReferencePID())).get("V_Name"),id:n.get("PID"),revision:n.get("revision"),type:n.get("type")}},i=(t||{}).node,e.is(l)?e.is(i)?(o=s(i),!0===i.fromXEN&&e.is(i.getParent()._treeDocument)&&r.publish({event:"FacetCommandManager/executeCommand",data:{commandName:n,targetNode:o}})):e.is(o)?l.execute(o):l.execute(t,c):(l=u.getCommandCheckHeader(n,c),e.is(l)&&!1===l.getState()&&(l.options.node={referencePID:i.getReferencePID(),instancePID:i.getInstancePID(),absPath:i.getAbsolutePath()},l.toggleState()))},executeCommand:function(n,t){var i,o,s,c=a.getConfig().appContext,u=a.getPlugins("UXComponentsPlugin").instance.getComponent("WUXCommandsManager"),l=u.getCommand(n,c);s=function(e){var n;return{displayName:(n=a.getPlugins("DatabasePlugin").instance.getReference(e.getReferencePID())).get("V_Name"),id:n.get("PID"),current:n.get("current"),revision:n.get("revision"),type:n.get("type")}},i=(t||{}).node,e.is(l)?(e.is(i)&&(o=s(i)),!0===i.fromXEN&&e.is(i.getParent()._treeDocument)?r.publish({event:"FacetCommandManager/executeCommand",data:{commandName:n,targetNode:o}}):l.isEnabled()&&l.execute(o)):(l=u.getCommandCheckHeader(n,c),e.is(l)&&!1===l.getState()&&(l.options.node={referencePID:i.getReferencePID(),instancePID:i.getInstancePID(),absPath:i.getAbsolutePath()},l.toggleState()))},addColumnForGrouping:function(e,n){b(e,n)},getColumnsForGrouping:function(e){return D(e)},isGroupingExist:function(){return L()},getGroupingAdditonalColumns:function(){return M},resetColumnsForGrouping:function(e){R(e)},getCollectionSpecificDataIndex:function(e){return T[e]},registerModuleForRecursiveGrouping:function(e){E.add(e)},doesModuleHaveRecursiveGrouping:function(e){return E.has(e)},unRegisterModuleForRecursiveGrouping:function(e){E.delete(e)},registerModuleColumnsAsImmutable:function(e){O.add(e)},areModuleColumnsImmutable:function(e){return O.has(e)}}}}));