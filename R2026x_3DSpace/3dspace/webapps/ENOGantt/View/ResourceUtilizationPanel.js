define("DS/ENOGantt/View/ResourceUtilizationPanel",["UWA/Class","DS/ENOGantt/Ven/Ext","DS/ENOGantt/Ven/Bryntum","DS/ENOGantt/Data/ResourceUtilizationStore","DS/ENOGantt/View/ResourceUtilizationContextMenu","DS/ENOGantt/View/FindResource"],(function(e,t,n,o,i,a){var r=e.extend({init:function(e){new i;let n=UWA.clone(e||{},!1);this.viewCollection=n.viewCollection;var o=this;t.define("DS.ENOGantt.View.ResourceUtilizationPanel",{extend:"Gnt.panel.ResourceUtilization",xtype:"dpmresourceutilizationpanel",split:!0,numberFormat:"0.0",scrollable:!1,region:"south",text:"Assignment Panel",contextId:"",calculateAsync:!1,highlightWeekends:!1,readOnly:App.Infra.ReadOnly,plugins:t.create("Sch.plugin.TreeCellEditing",{clicksToEdit:2,id:"resourceutilizationcellediting",listeners:{beforeEdit:function(e,n,o){var i=t.ComponentQuery.query("#dpmresourceutilizationpanel")[0],a=n.record,r=a.originalAssignment.data.Type,l=a.data.ReadOnly;return"Internal"==r&&!l&&(i.setReadOnly(l),!0)},edit:function(e,n,o){if(n.originalValue!=n.value){var i=n.record,a=n.value;i.originalAssignment.set("Units",a),t.ComponentQuery.query("#dpmprojectgantt")[0].taskStore.assignmentStore.getModelById(i.originalAssignment.data.Id).set("Units",a)}},validateEdit:function(e,t,n){t.originalValue,t.value}}}),resourceStoreClass:"DS.ENOGantt.data.ResourceUtilizationStore",zoomOnTimeAxisDoubleClick:!1,lockedGridConfig:{emptyText:App.Nls["emxProgramCentral.Common.NoObjectsFound"]},closeToolText:App.Nls["emxProgramCentral.Common.Close"],headerPosition:"top",title:App.Nls["emxProgramCentral.Common.ManageResources"],tools:[{type:"close",tooltip:App.Nls["emxProgramCentral.Common.Close"],callback:function(e){e.setHidden(!0);var n=t.ComponentQuery.query("#dpmprojectgantt")[0];n.normalGrid.getCollapsed()&&n.normalGrid.setCollapsed(!1)}}],listeners:{collapse:function(e,n){var o=t.ComponentQuery.query("#dpmprojectgantt")[0];App.Infra.ExtTaskArray.length>0&&(o.taskStore.remove(App.Infra.ExtTaskArray),App.Infra.ExtTaskArray=new Array,o.taskStore.commitChanges()),e.hide()},beforeitemcontextmenu:function(e,n,o,i,a){a.stopEvent(),t.create("DS.ENOGantt.View.ResourceUtilizationContextMenu").showAt(a.getXY())}},constructor:function(){this.viewConfig.markDirty=!0,delete this.columns[0].flex,this.columns[0].resizable=!0,this.columns[0].width=200,this.columns[0].text=App.Nls["emxProgramCentral.Gantt.ResourceUtilization.Header.Name"],this.columns[0].layout="vbox",this.columns[0].sortable=!0;new a({viewCollection:o.viewCollection});this.columns[0].items=[{xtype:"dpmfindresourceview"}],this.columns[0].renderer=function(e,t,n){return n.data.Id.indexOf("resource")>=0?n.data.FullName:n.data.TaskName},this.columns.push({xtype:"numbercolumn",text:App.Nls["emxProgramCentral.Gantt.ResourceUtilization.Header.PercentAllocation"],align:"center",dataIndex:"Units",format:"0.00",editable:!0,editor:{xtype:"percentfield",minValue:10,maxValue:100,step:10}},{xtype:"numbercolumn",text:App.Nls["emxProgramCentral.Gantt.ResourceUtilization.Header.Worktime"],align:"center",dataIndex:"WorkTime",format:"0.00"}),this.callParent(arguments)}})}});return r}));