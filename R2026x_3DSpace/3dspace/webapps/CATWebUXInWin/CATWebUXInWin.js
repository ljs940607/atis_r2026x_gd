define("DS/CATWebUXInWin/CATDMUGenerateChangeActionInWin",[],(function(){"use strict";return{createPanel:function(e){require(["DS/UWPClientCode/PublicAPI","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(n,t){window.widget.setValue("securityContext","ctx::"+e.securityCtxID),window.COMPASS_CONFIG||(window.COMPASS_CONFIG={}),window.COMPASS_CONFIG.userId||(window.COMPASS_CONFIG.userId=e.login),window.COMPASS_CONFIG.lang||(window.COMPASS_CONFIG.lang=window.widget.lang),n._setUser(e.user),window.widget.id="CATDMUGenerateChangeActionInWin",new Promise((function(e,n){window.dscef.getMyAppsURL().then((function(t){window.COMPASS_CONFIG||(window.COMPASS_CONFIG={}),t?(window.COMPASS_CONFIG.myAppsBaseUrl=t,e({myAppsBaseUrl:t,userId:window.COMPASS_CONFIG.userId,lang:window.COMPASS_CONFIG.lang})):n(new Error("Issue while retrieveing the my apps url"))}))})).then((function(n){return new Promise((function(i,o){t.getPlatformServices({config:n,onComplete:function(n){window.widget.setValue("x3dPlatformId",e.platformId?e.platformId:n[0].platformId),i(n)},onFailure:o})}))})).then((function(n){require(["DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChangeActionUX/scripts/CreateCAForm"],(function(t,i){t.init(),t.clearObjects(),t.addTitle(e.data.title),t.addDescription(e.data.description),t.addContext(e.data.contexts),t.addReferential(e.data.attachments),t.addProposed(e.data.reportedAgainst),t.addSeverity&&t.addSeverity(e.data.priority),t.setTenant&&t.setTenant(e.platformId?e.platformId:n[0].platformId),t.setSecurityContext&&t.setSecurityContext(e.securityCtxID),e.data.assignees&&t.addAssignee(e.data.assignees);var o=t.getJSON();i.createCAFromActionBar(o,(function(e){window.dscef.sendString(JSON.stringify({action:"displayNotif",notifMsg:e.changeaction?"CASuccess":"CAFail"}))}),(function(){window.dscef.sendString(JSON.stringify({action:"closePanel"}))})).then((function(){i.CACreateModal.options.escapeToClose=!1,document.querySelector(".close.fonticon.fonticon-cancel")&&document.querySelector(".close.fonticon.fonticon-cancel").setStyle("display","none")}))}))}))}))}}}));