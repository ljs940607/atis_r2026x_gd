define("DS/ClassificationAttributesUX/services/PlatformServices",["require","exports","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","UWA/Core"],(function(e,t,i,a){"use strict";class s{static initializePlatformServicesIdentifiers(){i.getPlatformServices({onComplete:e=>{let t=widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise";Array.isArray(e)?this.platformServices=e.find((e=>e.platformId==t)):this.platformServices=e,console.log("Platform Services URLs initialized")},onFailure:e=>{this.platformServices=null,console.error(`Error retrieving Platform Services: ${e}`)}})}static _getPlatformServiceURL(e){let t="";return a.owns(this.platformServices,e)&&(t=this.platformServices[e]),t}static getPlatformServices(){return this.platformServices}static get3DSpaceURL(){return this._getPlatformServiceURL(s.SERVICE_3DSPACE)}static get3DSearchURL(){return this._getPlatformServiceURL(s.SERVICE_3DSEARCH)}static get3DCompassURL(){return this._getPlatformServiceURL(s.SERVICE_3DCOMPASS)}static get3DPassportURL(){return this._getPlatformServiceURL(s.SERVICE_3DPASSPORT)}static get3DDashboardURL(){return this._getPlatformServiceURL(s.SERVICE_3DDASHBOARD)}static get3DSwymServiceUrl(){return this._getPlatformServiceURL(s.SERVICE_3DSWYM)}static getPlatformId(){return this._getPlatformServiceURL(s.KEY_TENANT)}}return s.SERVICE_3DSPACE="3DSpace",s.SERVICE_3DCOMPASS="3DCompass",s.SERVICE_3DSEARCH="3DSearch",s.SERVICE_3DPASSPORT="3DPassport",s.SERVICE_3DDASHBOARD="3DDashboard",s.SERVICE_3DSWYM="3DSwym",s.KEY_TENANT="platformId",s})),define("DS/ClassificationAttributesUX/services/ClassificationAttributesWebServices",["require","exports","DS/ClassificationAttributesUX/services/PlatformServices","DS/WAFData/WAFData"],(function(e,t,i,a){"use strict";return class{static async createClassificationAttribute(e){let t={method:"POST",timeout:12e4,headers:{Accept:"application/json","content-type":"application/json"}};t.data={interfaceName:"ClassificationAttributes",attributes:[{name:e.name,type:e.type,description:e.description,indexation:e.indexation,protection:e.protection,namenls:e.namenls,sixWPredicate:e.sixWPredicate,sixWPredicate_nls:e.sixWPredicate_nls,multiValued:e.multiValued,multiLine:e.multiLine,hasAuthorizedValuesDefined:e.hasAuthorizedValuesDefined,isEditable:e.isEditable,authorizedValues:e.authorizedValues,authorizedValuesNls:e.authorizedValuesNls,hasDefault:e.hasDefault,defaultValue:e.defaultValue}]};const a=i.get3DSpaceURL()+"/resources/ClassificationAttributesService/attributes/CreateAttributes";t.data=JSON.stringify(t.data);return await this.callServiceRequest(a,t)}static callServiceRequest(e,t){return new Promise(((i,s)=>{t.onComplete=e=>{i(e)},t.onFailure=(e,t)=>{s(t)},a.authenticatedRequest(e,t)}))}}})),define("DS/ClassificationAttributesUX/AttributeCreationPanel",["require","exports","DS/Windows/Dialog","DS/Form/Form","DS/Controls/Button","DS/Windows/ImmersiveFrame","UWA/Core","DS/Controls/Tab","text!DS/ClassificationAttributesUX/assets/creationPanelRows.json","text!DS/ClassificationAttributesUX/assets/ClassificationAttributes_en.json","DS/ClassificationAttributesUX/services/ClassificationAttributesWebServices","DS/ClassificationAttributesUX/services/PlatformServices"],(function(e,t,i,a,s,r,l,o,n,u,c,d){"use strict";return class{buildskeleton(e,t,a){let l=this;d.initializePlatformServicesIdentifiers(),this.interfaceName=a,this.immersiveFrame=new r({identifier:"attributeCreationPanel"}),this.createButton=new s({label:"Create",disabled:!0,domId:"CreateAttributes",emphasize:"primary",onClick:()=>{l.createNewAttributes(),l.immersiveFrame.destroy()}}),this.closeButton=new s({label:"Close",domId:"CloseAttributeCreationPanel",onClick:()=>{l.closePopup(),l.immersiveFrame.destroy()}});let o=[this.createButton,this.closeButton],n=new i({immersiveFrame:this.immersiveFrame,identifier:"attributeCreationPanel",title:"New Classification Attribute",content:this.createDivContent(),resizableFlag:!0,autoCloseFlag:!1,visibleFlag:!0,modalFlag:!0,activeFlag:!0,width:600,height:500,customButtonsDefinition:o});n.addEventListener("close",(function(e){l.closePopup(),l.immersiveFrame.destroy()})),this.immersiveFrame.inject(e),n.show(),this.attributeBoxValue=n}createDivContent(){const e=new l.Element("div",{class:"creationMainContainer"}),t=new l.Element("div",{class:"createPanelDiv"});let i=new o({displayStyle:"strip",domId:"mainTab"});i.add({label:"Propertiess",isSelected:!0}),i.inject(t);let s=JSON.parse(u);return this.attributeCreationForm=new a({globalInformation:{text:s.dialog_header},model:this.createModel(),usePaddingFlag:!0,buttons:{Validate:this.createButton,Escape:this.closeButton}}),this.attributeCreationForm.inject(t),t.inject(e),e}createModel(){let e=JSON.parse(u),t=[{label:e.string,value:"String"},{label:e.integer,value:"Integer"},{label:e.real,value:"Real"},{label:e.boolean,value:"Boolean"},{label:e.date,value:"Date"},{label:e.double,value:"Double"}],i={type:e.type,internalName:e.internalName,"6wPredicate":e.predicate,enable6wPredicate:e.enable6wPredicate,title:e.title,behavior:e.behavior,multivalued:e.multivalued,multiline:e.multiline,authorizedValues:e.authorizedValues,hasADefaultValue:e.hasADefaultValue,defaultValue:e.defaultValue},a=JSON.parse(n);return Object.keys(a).map((e=>{const s=a[e];return"type"===e&&(s.semantics={possibleValues:t}),s.onNodeUpdate=e=>{const t=e.id,i=e.value;this.validate(t,i),"Boolean"===i?this.updateVisibility(!1):this.updateVisibility(!0)},s.label=i[e],s}))}updateVisibility(e){["behavior","multivalued","multiline","authorizedValues"].forEach((t=>{this.attributeCreationForm.updateModelItem(t,{visibleFlag:e})}))}validate(e,t){let i;this.isEditable="true",this.description="",this.indexation="Yes",this.protection="Free",function(e){e.AttributeType="attributeType",e.InternalName="internalName",e.SixWPredicateNls="sixWPredicate_nls",e.SixWPredicate="sixWPredicate",e.Namenls="namenls",e.MultiValuated="multiValued",e.MultiLine="multiLine",e.AuthorizedValues="authorizedValues",e.AuthorizedValuesNls="authorizedValuesNls",e.HasDefault="hasDefault",e.DefaultValue="defaultValue"}(i||(i={}));const a={type:i.AttributeType,internalName:i.InternalName,"6wPredicate":i.SixWPredicateNls,enable6wPredicate:i.SixWPredicate,title:i.Namenls,multivalued:i.MultiValuated,multiline:i.MultiLine,authorizedValues:i.AuthorizedValues,authorizedValuesNls:i.AuthorizedValuesNls,hasADefaultValue:i.HasDefault,defaultValue:i.DefaultValue}[e];a&&(this[a]="namenls"===a||"authorizedValues"===a||"authorizedValuesNls"===a?[t]:t),this.internalName&&this.internalName.length>0&&(this.attributeBoxValue.getCustomButtons()[0].disabled=!1)}closePopup(){console.log("closePopup"),this.attributeBoxValue.destroy()}async createNewAttributes(){const e={name:this.internalName,type:this.attributeType||"string",description:this.description,indexation:this.indexation,protection:this.protection,namenls:this.namenls||[],sixWPredicate:this.sixWPredicate||"",sixWPredicate_nls:this.sixWPredicate_nls||"",multiValued:this.multiValuated||"No",multiLine:this.multiValuated||"No",hasAuthorizedValuesDefined:this.hasAuthorizedValuesDefined||"No",isEditable:this.isEditable,authorizedValues:this.authorizedValues||[],authorizedValuesNls:this.authorizedValuesNls||[],hasDefault:this.hasDefault||"No",defaultValue:this.defaultValue||"",interfaceName:this.interfaceName};await c.createClassificationAttribute(e);this.attributeBoxValue.destroy()}}}));