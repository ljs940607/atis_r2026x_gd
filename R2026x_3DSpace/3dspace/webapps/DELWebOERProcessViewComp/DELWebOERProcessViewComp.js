define("DS/DELWebOERProcessViewComp/mixins/ProcessToolbarMixin",["UWA/Core","DS/DELWebOERCommonUtils/utils/CommonUtils"],(function(e,t){"use strict";const i="PERTView",o="SwitchMode",n="WorkInstructions",s="defaultViewerMode",a="BuildUp";return{getToolbarDefination:function(i){let o=this;return{entries:[{id:"PERTView",dataElements:{typeRepresentation:"PERTview",value:!1,onNodeUpdate:o.onPERTViewChange.bind(o),position:"far",category:"1"}},{id:"SwitchMode",dataElements:{typeRepresentation:"switchMode",value:!e.is(i.SwitchMode)||i.SwitchMode,onNodeUpdate:o.onSwitchModeChange.bind(o),disabled:!0,position:"far",category:"2"}}],typeRepresentations:{switchMode:{stdTemplate:"toggleIcon",semantics:{possibleValues:[{value:"true",icon:{iconPath:t.getAssetsUrl("DELWebOERProcessViewComp","icons/22/I_DELSwitchToProductBuildUp.png")},tooltip:{shortHelp:o._nls.get("Toolbar.SwitchToProductBuildUp.ToolTip.shortHelp")}},{value:"false",icon:{iconPath:t.getAssetsUrl("DELWebOERProcessViewComp","icons/22/I_DELSwitchToWKIView.png")},tooltip:{shortHelp:o._nls.get("Toolbar.SwitchToWKIView.ToolTip.shortHelp")}}]}},PERTview:{stdTemplate:"toggleIcon",semantics:{possibleValues:[{value:"true",icon:{iconPath:t.getAssetsUrl("DELWebOERProcessViewComp","icons/32/I_DEL_ProductFlow.png"),className:"del-toolbarcommand-active"},tooltip:{shortHelp:o._nls.get("Toolbar.PERTView.ToolTip")}},{value:"false",icon:{iconPath:t.getAssetsUrl("DELWebOERProcessViewComp","icons/32/I_DEL_ProductFlow.png")},tooltip:{shortHelp:o._nls.get("Toolbar.PERTView.ToolTip")}}]}}}}},onPERTViewChange:async function(e,t={}){await this.getCommandHandler().setCheckState({id:"DELWebOERTogglePERTViewCmd",state:t.data})},onSwitchModeChange:function(e,t={}){let i=this,o=t.data;!0===o?i.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:n}}):!1===o&&i.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:a}})},onDELWebOERPERTViewCmdClose:function(){this.getTableView().getToolbar().updateNodeModel(i,{grid:{data:!1}})},onModeChange:function(e={}){let t=e.data,i=this.getTableView()||{},n=i&&i.getToolbar?i.getToolbar():null,s={disabled:!0};if(n){switch(t){case"BuildUp":s={disabled:!1,grid:{data:!1}};break;case"WorkInstructions":s={disabled:!1,grid:{data:!0}}}n.updateNodeModel(o,s)}},buildToolbar:function(e,t){let i=this.getComponentConfig()||{};this.toolbarDiv=this.getTableView().setToolbar(t||this.getToolbarDefination({[o]:i[s]===n})),this.toolbarDiv.inject(e)},destroyToolbar:function(){this.toolbarDiv&&(this.toolbarDiv.destroy(),this.toolbarDiv=null)}}})),define("DS/DELWebOERProcessViewComp/model/DELWebOERProcessDocument",["UWA/Core","DS/DELWebOERTableViewComp/model/DELWebPPRNode","DS/Logger/Logger","DS/DELWebOERTableViewComp/model/DELWebOERItemDocument","text!DS/DELWebOERProcessViewComp/assets/json/ProcessExpandConfig.json"],(function(e,t,i,o,n){"use strict";var s=JSON.parse(n),a=s.ENUMS,r=s.occurrences,l=s.references,c=s.instances;return o.extend({init:function(e={}){if(this._parent(e),!e.executionContext)throw new Error("Execution Context is not provided, it is mandatory to provide exeuctionContext");this._executionContext=e.executionContext,this._logger=i.getLogger("DELWebOERProcessDocument")},_createProcessTree:function(i={}){var o,n,d=this._executionContext.getComponent("Store"),u=d.useDispatch(),p=[],m=[],{response:h,filter:g}=i||{},b=h.member[0],f=e.is(i.installPaths,"array")&&i.installPaths.length>0?i.installPaths:null,C=e.is(f,"array")?f.map((function(e){return{installPID:e[e.length-1],installContextPath:e.slice(0,-1)}})):[],E=function(e={}){let o=!0===i.usePublishedContent?"PublishedBuildUpNotRequiredTypes":"DynamicBuildUpNotRequiredTypes",n=s[o],r=e[a.Taxonomies],l=t.prototype.ENUM_BUILDUP.DEACTIVATE;if(r){!0===n.some((e=>r.contains(e)))&&(l=null)}return l},D=function(t){if(e.is(t,"array")&&t.length>0){let i=e.is(C,"array")?C.find((e=>e.installPID===t[0])):null;e.is(i)&&i.installContextPath&&(t=i.installContextPath.concat(t))}return t},P=function(e={}){let{id:t,from:i,to:o=[],type:n,isScope:s=!1,symbolicID:a,isPositioningID:r}=e;u(d.actions.addConnection({id:t,from:i,type:n,isScope:s,symbolicID:a,isPositioningID:r,to:o.join("/")}))},I=function(e,i){var o=e.id?e.id:"",n=e[a.Taxonomies]||"",s={grid:{buildUp:E(e),graph:i?null:t.prototype.ENUM_GRAPH_COLUMN.DEACTIVATE},referenceId:o,label:e[a.Title]?e[a.Title]:"",type:e[a.Type]?e[a.Type]:"",icons:e[a.Icon]?[e[a.Icon]]:[],isWorkplan:n.contains(a.WorkplanType)};return Object.keys(e).forEach((t=>{-1!==p.indexOf(t)&&(s.grid[t+".reference"]=e[t])})),function(e={}){u(d.actions.addReference(e))}({id:e.id,type:e[a.Type],label:e[a.Title]}),function(e,t){t.consumedMfgItems=[],t.consumedCapableResource=[],t.hasScope=!1,e[a.ItemSpecification]&&e[a.ItemSpecification].totalItems>0&&e[a.ItemSpecification].member.forEach((function(e){let i=D([e.itemRef]);t.consumedMfgItems.push(i),t.hasScope=e.isScope,P({id:e.id,from:e.composer,to:i,type:e.type,isScope:e.isScope})}));let i=function(e){P({id:e.id,type:e.type,from:"null",to:[e.resource],symbolicID:e[a.SymbolicID],isPositioningID:e[a.IsPositioningID]})};e[a.CapableResources]&&e[a.CapableResources].totalItems>0&&e[a.CapableResources].member.forEach((function(e){t.consumedCapableResource.push(e.resource?e.resource:""),i(e)})),e[a.PrimaryCapableResource]&&e[a.PrimaryCapableResource].totalItems>0&&e[a.PrimaryCapableResource].member.forEach((function(e){t.consumedCapableResource.push(e.resource?e.resource:""),i(e)})),e[a.SecondaryCapableResource]&&e[a.SecondaryCapableResource].totalItems>0&&e[a.SecondaryCapableResource].member.forEach((function(e){t.consumedCapableResource.push(e.resource?e.resource:""),i(e)}))}(e,s),s},U=function(e){var t={grid:{},instanceId:e.id,instanceType:e.type};return Object.keys(e).forEach((i=>{-1!==m.indexOf(i)&&(t.grid[i+".instance"]=e[i])})),function(e={}){u(d.actions.addInstance(e))}({id:e.id,type:e[a.Type],label:e[a.Title],from:e.from,to:e.to}),t},y=function(t){var o={path:t.id?t.id.split("/"):[],grid:{}},n=function(e){let t=!1;return i.excludeGraphOnLastOperationAndWKI&&(t=!(e[a.MfgProcessOcc]||e[a.MfgOperationOcc]||e[a.MfgProcess]&&e[a.MfgProcess][a.MfgProcessOcc]||e[a.MfgProcess]&&e[a.MfgProcess][a.MfgOperationOcc])),t}(t);return c.forEach((function(i){t[a[i]]&&e.extend(o,U(t[a[i]]),!0)})),l.forEach((function(i){t[a[i]]&&e.extend(o,I(t[a[i]],n),!0)})),t[a.ItemSpecificationOcc]&&t[a.ItemSpecificationOcc].totalItems>0&&(o.consumedMfgItems=[],t[a.ItemSpecificationOcc].member.forEach((function(e){let i=D(e.itemOcc);o.consumedMfgItems.push(i),P({id:e.id,from:t.id,to:i,type:e.type,isScope:e.isScope,symbolicID:e[a.SymbolicID]})}))),o};e.is(i.Columns,"array")&&i.Columns.forEach((function(e){!function(e,t,i){if(i){let o=i.split("."),n=o.pop();"reference"===n?e.push(o.join(".")):"instance"===n&&t.push(o.join("."))}}(p,m,e.dataIndex)})),b?((o=I(b)).grid.buildUp=-1,n=new t(e.merge(o,{badges:g?this.getBadgeOptions("filter"):null})),this._model.addRoot(n),this._model.prepareUpdate(),function e(i,o){var n=function(o){var n=y(o),s=new t(n);i.addChild(s),e(s,o)};o[a.MfgProcess]&&o[a.MfgProcess][a.MfgOperationOcc]&&o[a.MfgProcess][a.MfgOperationOcc].totalItems>0&&o[a.MfgProcess][a.MfgOperationOcc][a.Member].forEach((e=>{n(e)})),r.forEach((function(e){o[a[e]]&&o[a[e]].totalItems>0&&o[a[e]][a.Member].forEach((e=>{n(e)}))}))}(n,b),this._model.pushUpdate()):this._logger.error("Process data not found")},loadData:function(e){this._createProcessTree(e)},hasIntermediateScope:function(e){let t=this,i=!1,o=this.getNodeFromID(e);return o&&o.processDescendants({processNode:function(e={}){let o={stopProcessing:!1,shouldProcessDescendants:!0};return t.hasScope(e.nodeModel)?(i=!0,o.stopProcessing=!0):t.isWorkplan(e.nodeModel)||(o.shouldProcessDescendants=!1),o}}),i},hasScope:function(e={}){let t=!1;return e.options&&(t=e.options.hasScope),t},isWorkplan:function(e={}){let t=!1;return e.options&&(t=e.options.isWorkplan),t}})})),define("DS/DELWebOERProcessViewComp/commands/DELWebOERPERTViewCmd",["DS/DELPPWProductFlowFacet/facets/ProductFlowSequenceFacet","DS/DELWebCommonControls/DELWebPanel","DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERProcessViewComp/assets/nls/ProcessViewComp","css!DS/DELWebOERProcessViewComp/assets/css/ProcessViewComp.css"],(function(e,t,i,o){"use strict";let n;return{open:function(s,a){let r,l=a.executionContext,c=l.getComponent(WAfrStandardComponentKey.ModelEvents),d=UWA.createElement("div",{class:"del-pertview-container"}),u=l.getComponent("PROCESS").getRoots();n=new t({identifier:"pertView",domId:"pertView",title:o.get("PERTView.title"),immersiveFrame:l.getComponent(WAfrStandardComponentKey.UIFrame).getImmersiveFrame(),content:d,resizableFlag:!0,verticallyStretchableFlag:!0,horizontallyStretchableFlag:!0,width:300,height:300}),r=new e({}),r.inject(d),r.updateFacet({objectId:u[0].id,filterQuery:u[0].withFilter?i.getValue(u[0].filter,"config_filter"):null}),c.publish({event:"onDELWebOERPERTViewCmdOpen"}),n.addEventListener("close",(function(){n.destroy(),c.publish({event:"onDELWebOERPERTViewCmdClose"})})),s()},close:function(e){n&&(n.destroy(),n=null),e()}}})),define("DS/DELWebOERProcessViewComp/mixins/BuildUpColumnHandlerMixin",["DS/DELWebOERCommonUtils/utils/TrackUtils"],(function(e){"use strict";const t="buildUp";var i;return{_buildUpColumnBehavior:function(){let e,i,o=function(e){var t,i=this._model.getTreeDocument();i&&(t=i.getRoots())&&t.length>0&&t.forEach((t=>{t.updateOptions({grid:e})}))},n=function(e){let i=this.getTableView();i&&i.updateColumn(t,e)};return{updateState:function(s){let a=this.getComponentConfig()||{};UWA.is(s.isProcessLoaded,"boolean")&&(e=s.isProcessLoaded),UWA.is(s.is2DStructureLoaded,"boolean")&&(i=s.is2DStructureLoaded),UWA.is(e,"boolean")&&i&&(o.call(this,{[t]:e?a.usePublishedContent?null:0:-1}),n.call(this,s&&s.eventparams?s.eventparams:{visibleFlag:e,disabled:!e}),e=i=null)},reset:function(){e=i=null}}}(),buildColumn:{update:function(t,o){var n,s=this.getWidgetComponent();if(t&&(n=t.getAttributeValue("buildUp"),UWA.is(n))){let a=n===t.ENUM_BUILDUP.ACTIVATE?"DeactivateBuildup":"ActivateBuildup";e.trackChanges({executionContext:this.getExecutionContext(),category:"Buildup",action:a,label:a,dims:{pd1:s.getValue("defaultViewerMode"),pd2:s.getValue("usePublishedContent")?"True":"False"}}),i&&i.setAttribute("buildUp",t.ENUM_BUILDUP.DEACTIVATE),t.setAttribute("buildUp",o),function(e,t){(!i||i.getRirPath().toString()!==e.getRirPath().toString()&&t)&&(i=e)}(t,o)}},clearActivate:function(){i&&i.setAttribute("buildUp",i.ENUM_BUILDUP.DEACTIVATE)},isBuildupActivated:function(){return UWA.is(i)&&i.getAttributeValue("buildUp")===i.ENUM_BUILDUP.ACTIVATE}},onBuildUpActivated:function(e={}){let t=e.data||{},i=this.getModel().getNodeFromPath(t.path),o=this,n=function(e){o._tableView.ensureNodeModelVisible(e,!1,!0),e.getAttributeValue("buildUp")!==e.ENUM_BUILDUP.DEACTIVATE&&e.getAttributeValue("buildUp")!==e.ENUM_BUILDUP.LOADING||o.buildColumn.update.call(o,e,e.ENUM_BUILDUP.ACTIVATE)};if(i)n(i);else{let e=t&&UWA.is(t.path,"array")&&t.path[0]||"",s=this.subscribe({event:"on2DRootAdded"},(function(a){a&&a.data&&a.data.id===e&&(i=o.getModel().getNodeFromPath(t.path),i&&n(i),o.unsubscribe(s),s=null)}))}},onBuildUpDeactivated:function(e={}){let t=e.data||{},i=this.getModel().getNodeFromPath(t.path);!i||i.getAttributeValue("buildUp")!==i.ENUM_BUILDUP.ACTIVATE&&i.getAttributeValue("buildUp")!==i.ENUM_BUILDUP.LOADING||this.buildColumn.update.call(this,i,i.ENUM_BUILDUP.DEACTIVATE)},onBuildUpToggled:function(e={}){let t=e.data||{},i=this.getModel().getNodeFromPath(t.path);i&&this.buildColumn.update.call(this,i,i.ENUM_BUILDUP.LOADING)},clearBuildUpActivate:function(){this.buildColumn&&this.buildColumn.clearActivate.call(this)},updateBuildupColumn:function(e){this._buildUpColumnBehavior.updateState.call(this,e)},isBuildupActivated:function(){return this.buildColumn.isBuildupActivated()}}})),define("DS/DELWebOERProcessViewComp/actions/StandardActions",["DS/Logger/Logger"],(function(e){"use strict";const t=e.getLogger("DS/DELWebOERProcessViewComp/actions/StandardActions");return{toggleBuildUp:async function(e,i){let o,{executionContext:n}=i,s=n.getComponent(WAfrStandardComponentKey.HandlerComponent),a=n.getComponent(WAfrStandardComponentKey.ModelEvents),{node:r,activateBuildUpHandlerId:l,deactivateBuildUpHandlerId:c}=i.args||{};if(r){switch(r.getAttributeValue("buildUp")){case r.ENUM_BUILDUP.ACTIVATE:o=c;break;case r.ENUM_BUILDUP.DEACTIVATE:o=l}o&&(s.hasHandler(o)?(a.publish({event:"onBuildUpToggled",data:{data:{path:r.getRirPath()}}}),await s.executeHandler({id:o,args:{path:r.getRirPath()}})):t.warn(`${o} Handler not found, please include correct package in your app id card`))}e()},toggleGraphView:async function(e,i={}){if(i.args){let o=i.args.node;o&&async function(e,{executionContext:i,dataIndex:o,activateValue:n,deactivateValue:s,activateHandlerId:a,deactivateHandlerId:r,node:l}){if(!(e&&l&&i&&o))throw new Error("Invalid input");let c,d=i.getComponent(WAfrStandardComponentKey.HandlerComponent);if(l){switch(l.getAttributeValue(o)){case n:c=r;break;case s:c=a}d.hasHandler(c)?await d.executeHandler({id:c,args:{path:l.getRirPath()}}):t.warn(`${c} Handler not found, please include correct package in your app id card`)}e()}(e,{node:o,dataIndex:"graph",executionContext:i.executionContext,activateValue:o.ENUM_GRAPH_COLUMN.ACTIVATE,deactivateValue:o.ENUM_GRAPH_COLUMN.DEACTIVATE,...i.args})}}}})),define("DS/DELWebOERProcessViewComp/model/DELWebOERProcessViewModel",["UWA/Core","UWA/Class","DS/DELWebOERTableViewComp/model/DELWebOERTableViewModel","DS/DELWebOERProcessViewComp/model/DELWebOERProcessDocument","DS/DELWebOERCommonUtils/utils/CommonUtils","text!DS/DELWebOERProcessViewComp/assets/json/ProcessExpandConfig.json"],(function(e,t,i,o,n,s){"use strict";const a="DELCommonUtilsServices";var r=JSON.parse(s),l=r.ENUMS;r.occurrences;const c="scopedMfg",d="resource";return i.extend({init:function(e){this._parent(e)},createDocument:function(e){this._document=new o({executionContext:this.executionContext,notifySelectionToPlatform:e.notifySelectionToPlatform||null})},getCommonServices:function(){return this.executionContext.getComponent(a)},get3DSpaceUrl:function(){return this.executionContext.getComponent(a).get3DSpaceUrl()},_prepareData:function(e,t,i){if(i){let o=i.split("."),n=o.pop();"reference"===n?e.push(o.join(".")):"instance"===n&&t.push(o.join("."))}},_getProcessPayload:function(t){var i,o=this,s=Object.assign({},r.payload),a=r.references,l=r.instances;return s.id=t.id?t.id:"",e.is(t.Columns,"array")&&t.Columns.forEach((function(e){a.forEach((function(t){o._prepareData(s.dynamicMask["dsprcs:"+t],[],e.dataIndex)})),l.forEach((function(t){o._prepareData([],s.dynamicMask["dsprcs:"+t],e.dataIndex)}))})),t.filter&&(s.config_filter=n.getValue(t.filter,"config_filter"),(i=n.getValue(t.filter,"config_filter_id"))&&(s.config_filter_id=i.physical_id)),e.is(t.scopedMfg,"array")?s.parameters.mfgItemId=t.scopedMfg.map((e=>e.id)):s.parameters.mfgItemId=t.scopedMfg.id,s},getData:function(t){var i,o=this;return t&&t.id?(n.markStart("processExpand"),i=new e.Promise((function(e,i){o.webservices.executeRequestPromise(`${o.get3DSpaceUrl()}/resources/v1/modeler/dsprcs/invoke/dsprcs:expand`,{method:"POST",payload:o._getProcessPayload(t)}).then((function(t){n.markEnd("processExpand","Advanced process expand completed in"),e(t)})).fail(i)}))):i=e.Promise.reject("Invalid Input Provided"),i},loadModel:async function(t={}){let i=this,o=e.is(t[c],"array")?t[c].filter((t=>e.is(t.occurrence,"array"))).map((e=>e.occurrence)):t[c]&&e.is(t[c].occurrence,"array")?[t[c].occurrence]:[],n=function t(i,o,n){let s,a;if(i.member){let r=i.member.findIndex((e=>o.includes(e.id)));r>=0&&(n.totalItems=1,n.member=[],e.extend(n.member,[i.member[r]],!0),s=i.member[r][l.MfgProcessOcc],a=n.member[0][l.MfgProcessOcc],s&&t(s,o,a))}},s=this.getContextId(t);t.id=s;let a=await this.getData(t);if(t.occurrence&&t.occurrence.length>0){let e={};n(a,t.occurrence.join("/"),e),a=e}return function(i){let o=t[d];if(i&&i.member[0]&&o){let t=e.is(o,"array")&&o.length>0?o[0].id:o&&o.id?o.id:null;i.member[0][l.CapableResources]={totalItems:1,member:[{resource:t}]}}}(a),i._document.removeRoot(t.id),e.is(a)&&await i._document.loadData({...t,response:a,installPaths:o}),t},getLinkedRelations:function(e={}){return this.executionContext.getComponent("Store").getRelations(e)},getMfgItems:function(e={}){return this.getLinkedRelations({...e,inverse:!1})},getLinkedOperations(e={}){return this.getLinkedRelations({...e,inverse:!0})},getCapableResources:function(e={}){let t=this,i=e.path,o={path:[]};return i&&i.forEach((e=>{let i=(t.getNodeFromPathV2(e).getConsumedItems()||{}).Resources||[],n=[];i.forEach((e=>{let t=this.executionContext.getComponent("PROCESS_RESOURCE");if(t){let i=t.getPathFromId(e);n.push(i)}})),o.path.push(...n)})),o},getTextualInstructionInstances:function(e={}){let t=this,i=e.path,o=[],n=t.getCommonServices();return i&&i.forEach((e=>{let i=t.getNodeFromPathV2(e);i.getReferenceType&&n.isWKIType(i.getReferenceType())&&o.push(i.getInstanceId())})),{pid:o}},getRelations:function(e={}){let t=this.getMfgItems(e),i=this.getCapableResources(e);return{path:[...t.path,...i.path],doNotProcessDrills:!0,matchAnyPath:t.matchAnyPath}},hasIntermediateScope:function(e){return this._document.hasIntermediateScope(e)}})})),define("DS/DELWebOERProcessViewComp/ProcessViewComp",["DS/DELWebOERTableViewComp/TableViewComp","DS/DELWebOERProcessViewComp/model/DELWebOERProcessViewModel","DS/DELWebOERProcessViewComp/mixins/ProcessToolbarMixin","DS/DELWebOERProcessViewComp/mixins/BuildUpColumnHandlerMixin","DS/DELWebOERCommonUtils/mixins/IndexServicesMixin","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERTableViewComp/model/DELWebPPRNode","DS/ENOFilterBIUX/FilterBIComponentProxy","DS/DELWebViewerCommon/DELCommonUtils","css!DS/DELWebOERProcessViewComp/assets/css/ProcessViewComp.css"],(function(e,t,i,o,n,s,a,r,l){"use strict";class c extends e{constructor(e){super(e)}async initialize(){await super.initialize(),this._buildupRetryCount=0,[{eventName:{event:"onModelChange:mode"},callback:this.onModeChange},{eventName:{event:"DS/DELWebViewer/onEmpty"},callback:this.onViewerEmpty},{eventName:{event:"onDELWebOERPERTViewCmdClose"},callback:this.onDELWebOERPERTViewCmdClose},{eventName:{event:"onBuildUpActivated"},callback:this.onBuildUpActivated},{eventName:{event:"onBuildUpDeactivated"},callback:this.onBuildUpDeactivated},{eventName:{event:"onBuildUpToggled"},callback:this.onBuildUpToggled},{eventName:{event:"onProcessLoadCompleted"},callback:this.updateBuildupColumn.bind(this,{isProcessLoaded:!0})},{eventName:{event:"onProcessLoadFailed"},callback:this.updateBuildupColumn.bind(this,{isProcessLoaded:!1})},{eventName:{event:"onBuildupInitializeComplete"},callback:this._onBuildupInitialized},{eventName:{event:"onBuildupInitializeFailed"},callback:this._onBuildupInitializationFailed},{eventName:{event:"onBuildupConnectionFailed"},callback:this._onBuildupConnectionFailed},{eventName:{event:"on2DRootAdded"},callback:this.on2DRootAdded},{eventName:{event:"DS/DELGraphViewer/onActivateGraphViewStart"},callback:this.updateGraphColumn.bind(this,a.prototype.ENUM_GRAPH_COLUMN.LOADING)},{eventName:{event:"DS/DELGraphViewer/onActivateGraphViewFailed"},callback:this.updateGraphColumn.bind(this,a.prototype.ENUM_GRAPH_COLUMN.DEACTIVATE)},{eventName:{event:"DS/DELGraphViewer/onActivateGraphViewCompleted"},callback:this.updateGraphColumn.bind(this,a.prototype.ENUM_GRAPH_COLUMN.ACTIVATE)},{eventName:{event:"DS/DELGraphViewer/onDeactivateGraphViewStart"},callback:this.updateGraphColumn.bind(this,a.prototype.ENUM_GRAPH_COLUMN.LOADING)},{eventName:{event:"DS/DELGraphViewer/onDeactivateGraphViewCompleted"},callback:this.updateGraphColumn.bind(this,a.prototype.ENUM_GRAPH_COLUMN.DEACTIVATE)}].forEach((e=>{this.subscribe(e.eventName,e.callback.bind(this))}));let e=this.getComponentFromIdentifier("DELCommonUtilsServices");this._ngfUXId=this.getRegisteredIdentifier()+"_"+e.getWidgetId(),this._BIProxy=new r({tenant:e.getPlatformId(),processingMode:"appProcessing",ExpandSynthesisON:!0,colorize:!0,widgetId:e.getWidgetId(),volumeFilterAvailable:!1,selectionFilterAvailable:!1,attributeFilterAvailable:!1,NGFUXId:this._ngfUXId,appId:e.getAppId(),synthesis_priority:2,appQueryParam:this.getComponentConfig().model}),this._BIProxy.setDefaultSecurityContext(e.getCurrentSecurityContext())}updateGraphColumn(e,t={}){let i=this.getModel().getNodeFromPathV2(t.path);i&&i.setAttribute("graph",e)}onViewerEmpty(){this.clearBuildUpActivate()}_onBuildupConnectionFailed(e){let t,i=this,o=this.getComponentFromIdentifier("WidgetLinkManager"),n=this.getComponentFromIdentifier("SessionModel"),s=this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent),a=function(e){i.getNotificationManager().addNotif({level:"warning",message:i._nls.get(e)})};o.isLinked()||(s.executeHandler({id:"DELWeb3DViewerDeactivateBuildUp",args:e.data}),3===i._buildupRetryCount?(i.updateBuildupColumn({isProcessLoaded:!1,is2DStructureLoaded:!0}),a("BuildupFailed.Error.Message"),i._buildupRetryCount=0):(t=n.get("roots")[0],i.updateBuildupColumn({isProcessLoaded:!1,is2DStructureLoaded:!0,eventparams:{disabled:!0}}),s.executeHandler({id:"DELWeb3DViewerInitializeBuildUp",args:t}),a("BuildupActivate.Retry.Message"),t.buildupFailedOperation=e.data,i._buildupRetryCount++,n.set("roots",[t])))}_onBuildupInitialized(){let e,t=this.getComponentFromIdentifier("SessionModel"),i=this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);this.updateBuildupColumn({isProcessLoaded:!0,is2DStructureLoaded:!0}),e=t.get("roots")[0].buildupFailedOperation,i.executeHandler({id:"DELWeb3DViewerActivateBuildUp",args:e})}_onBuildupInitializationFailed(){this.updateBuildupColumn({isProcessLoaded:!1,is2DStructureLoaded:!0})}getNls(){return this._nls}on2DRootAdded(e){e.origin&&e.origin===this.getRegisteredIdentifier()&&this.updateBuildupColumn({is2DStructureLoaded:!0})}createModel(e){this._model=new t({executionContext:this.getExecutionContext(),enableCrossPreHighlight:e.enableCrossPreHighlight,webservices:s.bindComponentToMixin(this,n),notifySelectionToPlatform:e.notifySelectionToPlatform})}createTableView(e){super.createTableView(e);let t="boolean"!=typeof this._compConfig.enableToolbar||this._compConfig.enableToolbar,i=this._compConfig.toolbarConfiguration?this._compConfig.toolbarConfiguration:null;this.getTableView()&&t&&!this.getTableView().getToolbar()&&this.buildToolbar(e,i)}setContainer(e){super.setContainer(e)}async addRoots(e={}){await super.addRoots(e)}_resetFilterProxy(e){UWA.is(e,"array")&&e.length>0&&this._BIProxy.removeRoots(e)}async removeRoots(e){if(e&&UWA.is(e.items,"array")&&e.items.length>0){let t=e.items.map((e=>e.id));this._resetFilterProxy(t)}await super.removeRoots(e)}async empty(){let e=this.getRoots();if(!e.some((e=>!0===e.filterUpdated))){let t=e.map((e=>e.id));this._resetFilterProxy(t)}let t=this.getComponentFromIdentifier("Store"),i=t?t.useDispatch():null;await super.empty(),this.destroyToolbar(),i&&i(t.actions.removeAll())}getModel(){return this._model}highlightLinkedInstructions(e={}){let t=this.getModel(),i=e.data;if(t.clearSelection(),t.clearHighlight(),i&&UWA.is(i.textualInstructionPIds,"array")){let e=i.textualInstructionPIds.map((e=>t.getPathFromId(null,e)));t.highlight({path:e})}}highlightLinkedOperations(e={}){let t=this.getModel(),i=t.getLinkedOperations(e);if(i){let o=i.path,n=i.matchAnyPath;t.highlight({...e,path:o,matchAnyPath:n})}}processItemsToHighlight(e={}){return{...e,doNotProcessDrills:this.isBuildupActivated()}}getFilterProxy(){return this._BIProxy}getNGFUXID(){return this._ngfUXId}async clean(){await super.clean()}async destroy(){await super.destroy(),await this.empty()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.getMfgItems=this._model.getMfgItems.bind(this._model),this.publicAPI.getCapableResources=this._model.getCapableResources.bind(this._model),this.publicAPI.getTextualInstructionInstances=this._model.getTextualInstructionInstances.bind(this._model),this.publicAPI.getRelations=this._model.getRelations.bind(this._model),this.publicAPI.highlightLinkedOperations=this.highlightLinkedOperations.bind(this),this.publicAPI.processItemsToHighlight=this.processItemsToHighlight.bind(this),this.publicAPI.getFilterProxy=this.getFilterProxy.bind(this),this.publicAPI.getNGFUXID=this.getNGFUXID.bind(this),this.publicAPI}}return c.prototype.mixinProperties(c,i),c.prototype.mixinProperties(c,o),c}));