define("DS/LifecycleControls/AsyncOpProgressDlg",["UWA/Controls/Abstract","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/WebReq","DS/LifecycleServices/HTMLTemplating","text!DS/LifecycleControls/assets/html/AsyncOpProgressDlg.html","css!DS/LifecycleControls/assets/styles/AsyncOpProgressDlg"],(function(e,t,n,i,o,s,a){"use strict";return e.extend({show:async function(e){let i=UWA.extendElement(s.ElementFromTemplate(a,{},{},"",{}));e=e||{};var o=new t({});this.dialog=new n({immersiveFrame:o,title:e.title||"",resizableFlag:!1,autoCloseFlag:!1,modalFlag:e.modal||!1,content:i});let l=e.closeConfirmFn||(()=>!0);this.dialog.cancelDialog=!1,this.closeDialog=()=>{this.dialog.destroy(),o.destroy()},this.dialog.addEventListener("close",(async()=>{console.log("AsyncOpProgressDlg close event");try{await l(this.dialog.elements.container)&&(this.dialog.cancelDialog=!0,this.getResult(e.progressId,e.securityContext,e.tenant,e.timeout||-1,!1,!0))}catch(e){console.log(e)}})),o.inject(e.parent),e.zIndex&&setTimeout((()=>{this.dialog.getContent().setStyle("z-index",e.zIndex)}),100),this.message=e.parent.querySelector("#lcm-progress-message"),this.total=e.parent.querySelector("#lcm-progress-total");let r=await this.getResult(e.progressId,e.securityContext,e.tenant,e.timeout||-1);return this.closeDialog(),r.results},getResult:async function(e,t,n,s,a,l){const r=function(e){return new Promise((t=>{setTimeout(t,e)}))};let d=Date.now();for(;;){let c={id:e};l&&(c.background=!0),a&&(c.cancel=!0);let u=i.get3DSpaceWSUrl(n,"/resources/lifecycle/progress/get",null),h=await o.post(u,JSON.stringify(c),{securityContext:t});if(h.results||l)return h;if(h.message&&(this.message.innerHTML=h.message),h.totalObjects&&(this.total.innerHTML=h.totalObjects),await r(500),-1!=s&&Date.now()-d>s)throw console.log("AsyncOpProgressDlg timeout"),this.closeDialog(),{error:"timeout"};if(this.dialog.cancelDialog)throw this.dialog.cancelDialog=!1,console.log("AsyncOpProgressDlg cancel"),this.closeDialog(),{error:"cancel"}}}})})),define("DS/LifecycleControls/EditPropDialog",["UWA/Class","DS/ApplicationFrame/Command"],(function(e,t){"use strict";return t.extend({defaultIsTransient:!1,extraNotif:!1,mergeSupport:!0,init:function(e,t){this._parent(e,t),require(["DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext"]),this.editProp=null},beginExecute:function(){},_launchTransientWidget:function(e,t){var n=!1;try{window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance:window.top.performance,window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.isDebug:window.top.isDebug,n=!0}catch(e){}n&&(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.mark("end_EP_SelectionTreatment"):window.top.performance.mark("end_EP_SelectionTreatment")),n&&(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.mark("start_EP_TransientLoaded"):window.top.performance.mark("start_EP_TransientLoaded")),n&&!0===(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.isDebug:window.top.isDebug)&&console.log("Launch transient "+(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.now():window.top.performance.now())),t.isPinned="false",e.showWidget("ENOLCMT_AP","ENOVIA - Information ",t,{mode:"panel",height:800,width:650})},launchProperties:function(e){var t=!1;try{window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance:window.top.performance,window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.isDebug:window.top.isDebug,t=!0}catch(e){}t&&(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.mark("start_EP_FullTime"):window.top.performance.mark("start_EP_FullTime")),t&&(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.mark("start_ExecuteAndLoadCommand"):window.top.performance.mark("start_EP_FullTime"));let n=!0,i={infoForFacet:{},objectIdentifierFromApp:[],securityContextFromAppPreference:"",sourceAppId:""};var o,s,a,l,r,d,c,u,h,m,p=[],g=[],f=!1,v=null;let b=!1;if(null!=e.options&&(e.options,1)){if(null!=(p=e.options.arguments))for(let e=0;e<p.length;e++)void 0!==p[e].facets?g.push(p[e].facets):"true"==p[e].readOnly||"false"==p[e].readOnly?o=p[e].readOnly:void 0!==p[e].appId?s=p[e].appId:void 0!==p[e].multiselection?a=p[e].multiselection:void 0!==p[e].setCloseButton?l=p[e].setCloseButton:void 0!==p[e].setEditButton?r=p[e].setEditButton:void 0!==p[e].editMode?d=p[e].editMode:void 0!==p[e].extraNotif?c=p[e].extraNotif:void 0!==p[e].defaultFacetName?u=p[e].defaultFacetName:void 0!==p[e].infoForFacet?h=p[e].infoForFacet:void 0!==p[e].indexModeParameter?m=p[e].indexModeParameter:void 0!==p[e].disableAddExtensionButton?f=p[e].disableAddExtensionButton:void 0!==p[e].ignoreKernelAccessChecks&&(b=p[e].ignoreKernelAccessChecks);var C=e.options.infoForFacet;null!=C&&Object.keys(C).length>0&&(h=C),h&&(i.infoForFacet=h);var w=e.options.indexModeParameter;null!=w&&(m=w)}e&&"function"==typeof e.getSecurityContext&&e.getSecurityContext()&&e.getSecurityContext().SecurityContext&&(v=e.getSecurityContext().SecurityContext),v&&(i.securityContextFromAppPreference=v);var y=widget.data.appId;if(y||(y=widget.data.x3dAppId),y&&(i.sourceAppId=y),t&&widget&&"1"===widget.getValue("debug_me")){for(var x=[],S=window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.getEntriesByType("mark"):window.top.performance.getEntriesByType("mark"),D=0;D<S.length;D++){var _=S[D].name,I=_.replace("start_","").replace("end_","");_!==I&&x.push(_)}x.forEach((function(e){window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.clearMarks(e):window.top.performance.clearMarks(e)}))}var E=this,k=!1;widget&&(widget.setValue("index_mode",!1),k=widget.getValue("index_mode")),require(["DS/WidgetServices/securityContextServices/SecurityContextServices","DS/EditPropWidget/models/EditPropModelMerge","DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/utils/EditPropUtils","DS/EditPropWidget/constants/ConstantsMapping","DS/EditPropWidget/ajaxRequests/ServicesAjaxRequests","DS/WidgetServices/WidgetServices","DS/TransientWidget/TransientWidget"],(function(t,p,C,w,x,S,D,_){var I=!1;try{window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance:window.top.performance,window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.isDebug:window.top.isDebug,I=!0}catch(e){}I&&(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.mark("end_ExecuteAndLoadCommand"):window.top.performance.mark("end_ExecuteAndLoadCommand")),I&&(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.performance.mark("start_EP_SelectionTreatment"):window.top.performance.mark("end_ExecuteAndLoadCommand"));var A=E.mergeSupport,N={context:e},L=[],W=[],M=e.model;if(M&&M.objectId){let e={identifier:"",metatype:"",type:""};e.identifier=M.objectId,M.i3dx&&(e.i3dx=M.i3dx),M.type&&(e.type=M.type),M.metatype&&(e.metatype=M.metatype),i.objectIdentifierFromApp.push(e),M.tenant&&(N.tenant=M.tenant),M.source&&(N.source=M.source),W.push(new C(M))}else L=e.getSelectedNodes();if(L.length&&L.forEach((function(e){m&&(e.indexModeParameter=m);let t={identifier:"",metatype:"",type:""};var n=w.getModelFromSelectedNode(e,t);n&&(W.push(n),i.objectIdentifierFromApp.push(t))})),!N.source&&W.length>0&&W[0]instanceof C){let e=W[0].get("source");e||(e=W[0].get("sourceName")),N.source=e}if(!N.tenant&&W.length>0&&W[0]instanceof C){let e=W[0].get("tenant");e&&(N.tenant=e)}t.getInstance(N).getValidSecurityContext();var T=D.getWidgetValue("editProperties_readOnly");if(W.length>0){var P=W[0];A||(W=[P]),W=D.removeDuplicate(W,(function(e){return e.get("objectId")}));var O=E.defaultIsTransient;if("function"==typeof e.isTransient&&(O=e.isTransient()),!1!==(O=!0===O||D.isTransientWidget())||D.isWebInWinEnvironment()||D.isNatifEnvironnement())require(["DS/EditPropWidget/EditPropComponent","DS/EditPropWidget/constants/EditPropConstants"],(function(t,o){if(null==E.editProp){var s=function(){},a=D.getWidgetPreference("editProperties_editMode");if(void 0===a){var l={type:"hidden",name:"editProperties_editMode",label:"editProperties_editMode",defaultValue:false};D.addWidgetPreference(l)}a=!!a&&a.value;var r=!1;k?(r="true",a=!1):void 0!==T&&(r=T),m="true"===m||!0===m;var d=D.getWidgetBody();d=d||UWA.extend(document.body),E.editProp=new t({className:"editProp_popup_fromCmd",readOnly:r,editMode:a,context:e,displayType:o.POPUP,container:d,extraNotif:E.extraNotif,infoForFacet:h,indexModeParameter:m,securityContextFromAppPreference:v,appId:y,disableAddExtensionButton:f,USE_APP_SECURTIYCONTEXT:n,ignoreKernelAccessChecks:b,sharedInformationForFacet:i,events:{onCancel:function(){s&&(D.addWidgetResizeEvent(s),E.editProp.controller&&E.editProp.controller.skeleton&&"function"==typeof E.editProp.controller.skeleton.notifyClose&&E.editProp.controller.skeleton.notifyClose()),E.editProp=null}}}),E.editProp.show(W),D.removeWidgetResizeEvent(s)}else E.editProp.centerIt()}));else{var B=function(t){var w=window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.document.body.getElementsByClassName("preview-container")[0]:window.top.document.body.getElementsByClassName("preview-container")[0],I=!1;if(w){var A=w.getElement(".moduleContent");if(A)if(A.className.indexOf("EditPropWidget")>=0){I=!0,w.show();var N={};t&&(N.securityContext=t.SecurityContext),require(["DS/WidgetServices/commandProxy/CommandProxy"],(function(e){e.publishUpdate(W,N)}))}}if(!1===I){var L=null;W&&W.length>0&&(L=W[0]);var M=x.getServiceForModel(L),P=!(L&&!0===L.isTransient||M&&!0===M.modelNeeded),O=[];W.forEach((function(e){O.push(e.toJSON())}));N={SelectedItem:O,x3dPlatformId:S.getTenantFromModel(L),isTransient:"true",loadData:!0,asynchronousRequest:P,index_mode:D.getWidgetValue("index_mode"),parent_x3dAppId:y,securityContextFromAppPreference:v,disableAddExtensionButton:f,USE_APP_SECURTIYCONTEXT:n,ignoreKernelAccessChecks:b,sharedInformationForFacet:i};if(t&&t.SecurityContext&&(N.securityContext=t.SecurityContext),void 0!==T&&(N.readOnly=T),k&&(N.readOnly=!0),P){var B=W.length>1;if(B){var U=D.generateUniqueId();N.transactionId=U;var z=W[0],F=UWA.clone(z.getOptions());F.objectId=U;var R={};W.forEach((function(e){R[e.get("objectId")]=e}));var V=new p(F);V.setMergingModels(R),W=[V]}require(["DS/EditPropWidget/comm/DistantAjax","DS/EditPropWidget/constants/ConstantsMapping","DS/EditPropWidget/utils/EditPropIndexUtils","text!DS/EditPropWidget/assets/settings/SettingsForServices.json"],(function(t,n,i,o){o=JSON.parse(o);let s=!0,a=null;if(W&&W.length>0&&W[0]&&W[0]instanceof C&&(a=W[0]),!a||""!==a.get("i3dx")&&void 0!==a.get("i3dx")||(s=!1),!s||!a)if(m){if(W&&W.length>0&&W[0]&&W[0]instanceof C&&"function"==typeof W[0].isMergedModel&&!W[0].isMergedModel()){var l=W[0];if(l&&"businessobject"===l.get("metatype")&&l.get("type")){var r=l.get("type"),d={model:l,type:r};i.getListOfExtensions(d,(function(e){var s=[],a={isBus:!0,name:r};s.push(a);for(var d=0;d<e.length;d++)s.push(e[d]);i.getMaskAttributes(s,(function(i){var s=D.getCancelObject(),a=n.getServiceBySource("fedsearch"),r={};i.maskAttributeDetails&&(r.maskAttributeDetails=i.maskAttributeDetails),i.listOfPredicates&&(r.predicates=i.listOfPredicates),i.maskGroupInfo&&(r.maskGroupInfo=i.maskGroupInfo),i.groupAttributesInfoAsPerMask&&(r.groupAttributesInfoAsPerMask=i.groupAttributesInfoAsPerMask),i.dimensionAttributes&&(r.dimensionAttributes=i.dimensionAttributes),r.handleRequest={handle:s},r.service=a,r.listOfExtensions=e;let d=l.get("source"),c=d&&o[d.toUpperCase()],u=!1;c&&(u=c.plmParameterSupported),r.getPLMParameter=u,t.launchMainReadFromIndexService(l,r),D.isReplayedODT()&&(window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top.EPIndex_ODTData={options:r}:window.top&&(window.top.EPIndex_ODTData={options:r}))}))}))}}}else t.launchMainRead(W,N);t.getServices(N.x3dPlatformId),t.getRoles(N.x3dPlatformId);var c=n.getDefaultFacets(B,!0),u=[];c.forEach((function(e){if(e){var t=e;if(e.facet&&(t=e.facet.name),null!=g&&g.length>=1)for(let n=0;n<g.length;n++)t===g[n]&&u.push({name:t,inheritance:e.inheritance});else u.push({name:t,inheritance:e.inheritance})}}));var h=null;W&&W.length>0&&(h=W[0]);let p=!0;!h||""!==h.get("i3dx")&&void 0!==h.get("i3dx")||(p=!1),p&&h||(m?t.launchFacetsVisibilityFromIndexService(h,u,{context:e}):t.launchFacetsVisibility(h,u,{context:e},!0,y))}))}D.isChangeAvailable()?require(["DS/EditPropWidget/changeAction/passThruJS"],(function(e){e.onReady((function(e){e.get2((function(t){"function"==typeof e.changeIsSetChecker&&(e.changeIsSetChecker(t)||null!=t&&null!=t.configurationRevision)&&(N.changeControl=t),null!=o&&void 0!==o&&(N.readOnly=o),null!=s&&void 0!==s&&(N.appId=s),null!=a&&void 0!==a&&(N.multiselection=a),null!=l&&void 0!==l&&(N.setCloseButton=l),null!=r&&void 0!==r&&(N.setEditButton=r),null!=d&&void 0!==d&&(N.editMode=d),null!=c&&void 0!==c&&(N.extraNotif=c),null!=u&&void 0!==u&&(N.defaultFacetName=u),null!=h&&void 0!==h&&(N.infoForFacet=h),null!=m&&void 0!==m&&(N.indexModeParameter=m),E._launchTransientWidget(_,N)}))}))}),(function(){E._launchTransientWidget(_,N)})):E._launchTransientWidget(_,N)}};t.getValidSecurityContext({onSuccess:B,onFailure:function(){B(null)}})}}else E._setError(e,UWA.i18n("no content selected"));E.end()}))},_setError:function(e,t){if("function"==typeof e.displayNotification){var n={eventID:"error",msg:t};e.displayNotification(n)}else alert(t)},endExecute:function(){}})})),define("DS/LifecycleControls/ProgressDialog",["UWA/Controls/Abstract","UWA/Core","DS/UIKIT/Mask","css!DS/LifecycleControls/LifecycleControls"],(function(e,t,n){"use strict";return e.extend({showDelay:function(e,t,n){var i=this;this.timer=setTimeout((function(){i.timer=null,i._createProgress(e,t)}),n)},close:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.progressContainer&&(this.progressContainer.remove(),this.progressContainer=null)},_createProgress:function(e,i){this.progressContainer=t.createElement("div",{class:"lcm-progress-container"});var o=t.createElement("span",{class:"progress-icon-container"});o.inject(this.progressContainer);var s=t.createElement("div",{class:"progress-icon"});s.inject(o);var a=t.createElement("span",{class:"progress-msg"});a.innerHTML=i,a.inject(this.progressContainer),this.progressContainer.inject(e),n.mask(s,"");var l=this.progressContainer;this.progressContainer.remove=function(){e.removeChild(l)}}})})),define("DS/LifecycleControls/CommandDialogWUX",["UWA/Controls/Abstract","UWA/Core","DS/Windows/ImmersiveFrame","DS/Controls/Button","DS/Windows/Dialog","i18n!DS/LifecycleControls/assets/nls/CommandDialog","css!DS/LifecycleControls/LifecycleControls"],(function(e,t,n,i,o,s){"use strict";return e.extend({buttonStyle:{ok:1,okCancel:2,none:3,cancel:4},init:function(e){this._parent(e)},createDialog:function(e,t,i){var a=this;this._onOkHandler=t.onOk||function(){},this._onCloseHandler=t.onClose||function(){},this._fnContext=i||this,this._OKBtnText=t.OKBtnText||s.okButton,this.immersiveFrame=new n({}),this.immersiveFrame.inject(t.container);var l=t.buttonStyle||this.buttonStyle.okCancel;this.buttons=l===this.buttonStyle.none?void 0:this.createFooter(l);var r=new o({title:t.title||"Title",immersiveFrame:this.immersiveFrame,modalFlag:t.modalFlag,resizableFlag:t.resizableFlag,minWidth:t.minWidth,minHeight:t.minHeight,maximizeButtonFlag:t.maximizableFlag,maximizedFlag:t.maximizedFlag,closeButtonFlag:t.closeButtonFlag,identifier:t.identifier,content:e,buttons:this.buttons,position:{my:"center",at:"center",of:this.immersiveFrame}});return r.addEventListener("close",(function(){a._onCancel()})),r.addEventListener("keydown",(function(e){13===e.keyCode?a.disableBtnClickOnEnter=!0:27===e.keyCode&&a._onCancel()})),r.addEventListener("keyup",(function(e){13===e.keyCode&&(a.disableBtnClickOnEnter=!1)})),this.dialog=r,this.closeButton=r.elements._closeButton,r},createFooter:function(e){var t=this,n={},i=[];switch(e){case this.buttonStyle.ok:i=["Ok"];break;case this.buttonStyle.cancel:i=["Cancel"];break;default:i=["Ok","Cancel"]}return i.forEach((function(e){n[e]=t.buildButton(e)})),n},buildButton:function(e){var t,n,o=this;switch(e){case"Ok":n={id:"execute",label:this._OKBtnText,onClick:function(){o.disableBtnClickOnEnter||o._onOk()}};break;case"Cancel":n={id:"cancel",label:s.cancelButton,onClick:function(){o._onCancel()}}}return n&&(t=new i(n)),t},_onOk:function(){this.disableUI(!0),this._onOkHandler.apply(this._fnContext)},_onCancel:function(){this.disableUI(!0),this._onCloseHandler.apply(this._fnContext)},disableUI:function(e){if(this.buttons)for(var t in this.buttons){this.buttons[t].disabled=e}},getButton:function(e){if(this.buttons)return this.buttons[e]||null},disableButton:function(e,t){if(this.buttons){var n=this.buttons[e];n&&(n.disabled=t)}},destroy:function(){this.dialog&&this.dialog.destroy(),this.immersiveFrame&&this.immersiveFrame.destroy(),this._parent()}})})),define("DS/LifecycleControls/DelayedMask",["UWA/Controls/Abstract","DS/UIKIT/Mask"],(function(e,t){"use strict";return e.extend({timer:null,element:null,init:function(e,n,i){if(e){this.element=e;var o=this;this.timer=setTimeout((function(){o.timer=null,t.mask(o.element,i)}),n)}},unmask:function(){this.element&&(this.timer&&(clearTimeout(this.timer),this.timer=null),t.unmask(this.element),this.element=null)}})})),define("DS/LifecycleControls/CredentialList",["UWA/Controls/Abstract","DS/LifecycleServices/WebReq"],(function(e,t){"use strict";const n=e=>e.reduce((function(e,t){return e.concat(Array.isArray(t)?n(t):t)}),[]),i=(e,n,i,a)=>new UWA.Class.Promise(((l,r)=>{t.post("/resources/lifecycle/util/filterValidSCs",o(n,i,a),{tenant:e}).then((e=>{e.status&&"success"===e.status?l(s(e.data)):r(e.error?e.error:"/resources/lifecycle/util/filterValidSCs - failed!")})).catch(r)})),o=(e,t,n)=>{let i={Command:t,extraInfo:n||!1,SecurityContexts:e.map((e=>e.ctx))};return JSON.stringify(i)},s=e=>e.filter((e=>!(e=>{e.hasOwnProperty("secCtx")&&(e=e.secCtx);let t=e.match(/(ctx::)([^.]+)/);return t.length>2&&"VPLMAdmin"===t[2]})(e)));return{loadCredentials:e=>new UWA.Class.Promise(((i,o)=>{t.get("/resources/modeler/pno/person",{tenant:e,params:{current:"true",select:"collabspaces&select=preferredcredentials"}}).then((e=>i((e=>{let t=[];if(!UWA.is(e.collabspaces,"array"))return t;let i=[...new Set(n(e.collabspaces.map((e=>e.couples.map((e=>e.organization.name))))))].length>1;return e.collabspaces.forEach((e=>{e.couples.forEach((n=>{var o=null==n.role.nls||""==n.role.nls?n.role.name:n.role.nls,s=n.role.name,a=n.organization.name,l=n.organization.title,r=e.name,d=e.title?e.title:e.name;let c=i?d+" ● "+l+" ● "+o:d+" ● "+o,u="ctx::"+s+"."+a+"."+r;t.push({displayName:c,ctx:u})}))})),t.sort(((e,t)=>e.displayName.localeCompare(t.displayName,void 0,{numeric:!0,sensitivity:"base"})))})(e))))})),loadCredentialsFromGetdgnctx:e=>new UWA.Class.Promise(((n,i)=>{t.get("/resources/vplmte/getdgnctx",{tenant:e}).then((e=>n((e=>{let t=[];return UWA.is(e.credentials,"array")?(e.credentials.forEach((e=>{var n=e.rolename,i=e.orgname,o=e.orgtitle,s=e.prjname,a=e.prjtitle;let l=e.ctxtitle;var r=e.ctxname;let d="ctx::"+n+"."+i+"."+s;t.push({displayName:l,ctx:d,ctxName:r,orgTitle:o,prjTitle:a})})),t.sort(((e,t)=>e.prjTitle.localeCompare(t.prjTitle,void 0,{numeric:!0,sensitivity:"base"})))):t})(e))))})),filterCredentials:(e,t,n)=>i(e,t,n,!1),filterCredentialsEx:(e,t,n)=>i(e,t,n,!0),groupCredentialsByCollabSpace:e=>{let t=new Map,n=new Set;return e.forEach((e=>{var i=e.orgTitle;let o=e.prjTitle,s=e.ctx,a=e.isPrivate;t.has(o)?t.get(o).push({orgTitle:i,ctx:s,isPrivate:a}):t.set(o,[{orgTitle:i,ctx:s,isPrivate:a}]),n.add(i)})),t.isMultipleOrg=n.size>1,t}}})),define("DS/LifecycleControls/ChooseAttributes",["UWA/Class","UWA/Core","DS/UIKIT/SuperModal","i18n!DS/UIKIT/assets/nls/UIKIT","i18n!DS/LifecycleControls/assets/nls/CommandDialog","css!DS/LifecycleControls/assets/styles/LifecycleModals"],(function(e,t,n,i,o,s){"use strict";return e.singleton({init:function(){this._parent({})},showDialog:function(e){var t=this,s=e.parent,a=e.title,l=e.allAttributes,r=e.onOk,d=e.onShow,c=new n({closable:!0,className:"Lifecycle_Modals",events:{onShow:function(){null!=d&&d(t)}},renderTo:s}),u=o.okButton,h=o.cancelButton,m=this.buildDialogBody(l);if(c.dialog({body:m,title:a,buttons:[{className:"primary",value:u,action:function(e){e.hide();var n=t.getSelectedAttributes();r(n)}},{value:h,action:function(e){e.hide()}}]}),c&&c.modals&&c.modals.current&&c.modals.current.elements){var p=c.modals.current.elements.header?c.modals.current.elements.header.getElement(".close.fonticon.fonticon-cancel"):null;p&&(p.setText("×"),p.removeClassName("fonticon"),p.removeClassName("fonticon-cancel"),p.setAttributes({title:i.close})),c.modals.current.elements.closeTooltip&&c.modals.current.elements.closeTooltip.elements&&c.modals.current.elements.closeTooltip.elements.container.addClassName("hideDefaultTooltip")}},getSelectedAttributes:function(){for(var e=[],t=this.checkboxes.length,n=0;n<t;n++){var i=this.checkboxes[n];i.checked&&e.push(i.id)}return e},buildDialogBody:function(e){var n=t.createElement("div",{styles:{position:"relative",height:"100%",overflow:"auto"}}),i=e.length;this.checkboxes=[];for(var o=0;o<i;o++){(s=e[o]).isSelected&&this.addItem(n,s)}for(o=0;o<i;o++){var s;(s=e[o]).isSelected||this.addItem(n,s)}return n},addItem:function(e,n){var i=t.createElement("div",{styles:{width:"100%",overflow:"hidden"}}),o=t.createElement("input");this.checkboxes.push(o),o.type="checkbox";var s=n.name,a=n.displayName,l=n.isSelected;o.id=s,o.checked=l;var r=t.createElement("label",{styles:{"font-weight":"inherit","margin-left":"4px","margin-bottom":"5px",display:"inline-block"}});!0===n.disabled&&(o.disabled=!0),r.htmlFor=s,r.innerHTML=a,o.inject(i),r.inject(i),i.inject(e)}})})),define("DS/LifecycleControls/CredentialSelector",["DS/LifecycleServices/HTMLTemplating","DS/Controls/ComboBox","i18n!DS/LifecycleControls/assets/nls/CredentialSelector"],(function(e,t,n){"use strict";const i=(e,t,n)=>{if(e.get(t.currentLabel)){var i=e.get(t.currentLabel).map((e=>({labelItem:e.orgTitle,valueItem:e}))),o=n.label;n.elementsList=i,i.length<=1?n.disabled=!0:n.disabled=!1;var s=null;i.forEach((e=>{e.labelItem==o&&(s=e.valueItem)})),s?n.value=s:n.selectedIndex=0}};return{manageComboCollabSpaceChange:(e,t,n)=>{i(e,t,n)},manageNoCredential:({dialog:e,dialogContainer:i})=>((e,i)=>{var o=i,s=e.elements.footer.querySelector(".btn-primary");s&&(s.disabled=!0);let a=UWA.createElement("div",{class:"credselector_label credselector_collabspace_label",text:n.collaborativeSpace}),l=new t({elementsList:[{labelItem:n.noCredentials}],enableSearchFlag:!1});return l.getContent().wuxControl=l,l.getContent().addClassName("credselector_combo credselector_collabspace_combo"),l.getContent().setAttribute("id","credselector_collabspace_combo"),a.inject(o),l.inject(o),{title:n.noCredentialErrorMessageTitle,subtitle:n.noCredentialErrorMessageSubTitle,submessage:n.noCredentialErrorMessageMsg,combos:[l]}})(e,i),createCredentialComboBox:({userCredentials:o,dialog:s,dialogContainer:a,className:l,defaultCtx:r,activateOkButtonCallback:d})=>{var c=a,u=s.elements.footer.querySelector(".btn-primary");u&&(u.disabled=!0);let h=!1;o.forEach(((e,t)=>{e.length>0&&(h=!0)}));var m=[n.loadingText];if(h)m=Array.from(o.keys()).map((e=>({labelItem:e,valueItem:e})));let p=UWA.createElement("div",{class:"credselector_label credselector_collabspace_label",id:"credselector_collabspace_label",text:n.collaborativeSpace}),g=new t({elementsList:m,enableSearchFlag:!1,reachablePlaceholderFlag:!0,placeholder:n.placeHolderComboCollaborativeSpace});g.getContent().wuxControl=g,g.getContent().addClassName("credselector_combo credselector_collabspace_combo"),g.getContent().setAttribute("id","credselector_collabspace_combo"),p.addClassName(l),g.getContent().addClassName(l),p.inject(c),g.inject(c);let f=UWA.createElement("div",{class:"credselector_label credselector_organization_label",id:"credselector_organization_label",text:n.organization}),v=new t({elementsList:[n.selectACollabSpaceFirst],enableSearchFlag:!1,reachablePlaceholderFlag:!0,placeholder:n.placeHolderComboOrganization});v.getContent().wuxControl=v,v.getContent().addClassName("credselector_combo credselector_organization_combo"),v.getContent().setAttribute("id","credselector_organization_combo"),o.isMultipleOrg&&(f.addClassName(l),v.getContent().addClassName(l),f.inject(c),v.inject(c)),h&&(m.length<=1&&(g.disabled=!0,g.placeholder=null,g.reachablePlaceholderFlag=!1,g.value=m[0].valueItem,i(o,g,v),d()),o.isMultipleOrg||(v.elementsList=o.get(m[0].valueItem).map((e=>({labelItem:e.orgTitle,valueItem:e}))),v.selectedIndex=0)),e._setTouchAttribute(s.elements.body);let b=null,C=null,w=null;return r&&m.length>1&&o.forEach(((e,t)=>e.forEach((e=>{e.ctx==r&&(b=r,C=e,w=t)})))),b&&(g.value=w,i(o,g,v),v.value=C,d()),[g,v]}}})),define("DS/LifecycleControls/ResizeMonitor",["UWA/Controls/Abstract","DS/LifecycleServices/EventHandler"],(function(e,t){"use strict";var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return e.extend({addMonitor:function(e,i){if(e.resizeMonEvents=e.resizeMonEvents||[],!e.resizeMon){e.resizeMon={el:document.createElement("div"),cb:[]},e.resizeMon.cb.push(i);var o="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",s="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeMon.el.style.cssText=o,e.resizeMon.el.innerHTML='<div style="'+o+'"><div style="'+s+'"></div></div><div style="'+o+'"><div style="'+s+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeMon.el),e.resizeMon.el.offsetParent!==e&&(e.style.position="relative");var a,l,r=e.resizeMon.el.childNodes[0],d=e.resizeMon.el.childNodes[1],c=0,u=function(){r.childNodes[0].style.width="100000px",r.childNodes[0].style.height="100000px",r.scrollLeft=1e5,r.scrollTop=1e5,d.scrollLeft=1e5,d.scrollTop=1e5},h=function(){null!=e.resizeMon&&(a=e.offsetWidth,l=e.offsetHeight,c=0,u(),e.resizeMon.cb.forEach((function(e){e.call()})))},m=function(){a==e.offsetWidth&&l==e.offsetHeight||0===c&&(c=n(h))};return u(),e.resizeMonEvents.push(t(r,"scroll",m)),e.resizeMonEvents.push(t(d,"scroll",m)),{detach:function(){if(e.resizeMonEvents.forEach((function(e){e.unbind()})),e.resizeMonEvents=null,e.resizeMon){try{e.removeChild(e.resizeMon.el)}catch(e){}e.resizeMon=null}}}}e.resizeMon.cb.push(i)}})})),define("DS/LifecycleControls/RelatedObjectsControl",["UWA/Controls/Abstract","DS/PlatformAPI/PlatformAPI","DS/LifecycleServices/EventHandler","css!DS/LifecycleControls/assets/styles/RelatedObjectsControl"],(function(e,t,n){"use strict";return e.extend({platformAPISubscriptions:[],init:function(e){this._parent(e)},expandCategoryExpanders:function(){[...this.elements.container.querySelectorAll(".accordion-item > .accordion-title")].forEach((e=>{e.click()}))},load:function(){var e=this;return new UWA.Promise(((i,o)=>{require(["DS/ENORIPE_Relations/RelationsTabSettings"],(o=>{e.elements={container:UWA.createElement("div",{class:"lcm-relatedobjects-control-container"})},i();o.setProfile("PowerByCATIAV5_Relations"),this.platformAPISubscriptions.push(t.subscribe("ENORIPE_Relations_ViewReady",(function(t){e.dispatchEvent("viewReady",{uniqueIds:t}),e.expandCategoryExpanders(),e.uniqueIds=t}))),this.platformAPISubscriptions.push(t.subscribe("DS/PADUtils/PADCommandProxy/select",(e=>{if(widget&&e&&e.metadata&&widget.id===e.metadata.originWidgetId){let t=e.data.attrData.map((e=>({id:e.id,type:e.type})));this.dispatchEvent("selectionChange",{selection:t})}})));o.isAvailable({getPlatformID:function(){return"OnPremise"},getServiceID:function(){return"3DSpace"}},{isDraggable:!0,isProfilesVisible:!1,appID:"ENORIPE_ECM",isExternal:!0,noContextualMenu:!0}).then((function(){require(["DS/ENORIPE_Relations/views/RelationsTab"],(function(t){let i=new t({defaultProfile:"PowerByCATIAV5_Relations"});i.updateFacetExternal(e.options.model).then((()=>{e.selectAll=()=>{i.selectNodes(e.uniqueIds)},e.keydownHandler=new n(document,"keydown",(t=>{65===t.keyCode&&t.ctrlKey&&(e.selectAll(),t.preventDefault())}))})).catch((e=>{})),i.elements.container.inject(e.elements.container)}))})).catch((e=>{console.error("Caught RelationsTab error:",e)}))}),(e=>{o({AMDError:e})}))}))},destroy:function(){this.platformAPISubscriptions.forEach((e=>{t.unsubscribe(e)})),this.keydownHandler&&this.keydownHandler.unbind(),e.prototype.destroy.call(this)},selectAll:function(){},isAvailable:function(){return new UWA.Promise(((e,t)=>{e(!0)}))}})})),define("DS/LifecycleControls/WidgetMaximizeHandler",["UWA/Class","UWA/Controls/Abstract"],(function(e,t){"use strict";return t.extend({init:function(){if(window&&window.parent&&window.parent.document&&window.frameElement&&window.frameElement.id){var e=window.frameElement.id.replace("frame","wi");this.widget=window.parent.document.querySelector("."+e),this.widget&&(this.btnContainer=this.widget.querySelector(".moduleHeader"),this.extrabtnContainer=window.parent.document.querySelector(".topbar-extrabtn"))}this._observeButtons(),this.isMaximized=this._isWidgetMaximized(),this._updateHandlers()},maximize:function(){this._maximize();var e=this;return new UWA.Class.Promise((function(t,n){e._wait((function(){t(null)}))}))},restore:function(){this._restore();var e=this;return new UWA.Class.Promise((function(t,n){e._wait((function(){t(null)}))}))},destroy:function(){this.maximizedObserver&&(this.maximizedObserver.disconnect(),this.maximizedObserver=null)},_observeButtons:function(){if(this.btnContainer){var e=this;this.maximizedObserver=new MutationObserver((function(t){e._isWidgetMaximized()!==e.isMaximized&&(e._updateHandlers(),e.dispatchEvent("widget-maxmized-changed",e.isMaximized))})),this.maximizedObserver.observe(this.btnContainer,{attributes:!0,subtree:!0})}},_isWidgetMaximized:function(){return!!this.btnContainer&&(this.widget&&this.widget.hasClassName("ifwe-maximized")||this.btnContainer.isHidden())},_updateHandlers:function(){if(this._maximize=function(){},this._restore=function(){},this._wait=function(e){e()},this.btnContainer&&this.extrabtnContainer){var e=this._isWidgetMaximized(),t=this,n=function(e,i){if(e.gotEl||(t.btnContainer.querySelector(e.cls)||t.extrabtnContainer.querySelector(e.cls))&&(e.gotEl=!0),e.gotNewW){if(1===e.gotNewW){var o;(o=t.widget.getBoundingClientRect().width)===e.oldW?e.gotNewW=2:e.oldW=o}}else(o=t.widget.getBoundingClientRect().width)!=e.oldW&&(e.gotNewW=1,e.oldW=o);e.gotEl&&e.gotNewW&&2===e.gotNewW?(t._updateHandlers(),i()):++e.cnt<30?setTimeout(n,100,e,i):i()},i=this.widget.getBoundingClientRect().width;e?e&&(t.isMaximized=!0,this._restore=function(){var e=t.extrabtnContainer.querySelector(".fonticon-resize-fullscreen-off");e&&(e.click(),t.isMaximized=!1)},this._wait=n.bind(null,{oldW:i,cnt:0,cls:".fonticon-resize-fullscreen"})):(t.isMaximized=!1,this._maximize=function(){var e=t.btnContainer.querySelector(".fonticon-resize-fullscreen");e&&(e.click(),t.isMaximized=!0)},this._wait=n.bind(null,{oldW:i,cnt:0,cls:".fonticon-resize-fullscreen-off"}))}}})})),define("DS/LifecycleControls/NumberModal",["UWA/Controls/Abstract","DS/UIKIT/Modal","DS/Controls/Button","DS/Controls/SpinBox","css!DS/UIKIT/UIKIT","css!DS/LifecycleControls/assets/styles/NumberModal"],(function(e,t,n,i){"use strict";return e.extend({name:"numberModal",number:1,init:function(e){this._parent(e);var o=this,s=e.parentContainer||document.body,a=UWA.createElement("div",{class:this.getClassNames()}),l=new i({value:o.number,minValue:1,stepValue:1,pageStepValue:1}).inject(a);l.getContent().addClassName(this.getClassNames("_spinbox")),l.addEventListener("change",(function(e){o.number=parseInt(e.dsModel.value)}));var r=new n({icon:"check",emphasize:"success"}).inject(a);r.getContent().addClassName(this.getClassNames("_ok")),r.addEventListener("click",(function(){o.dispatchEvent("onApply",o.number),d.destroy()})),l.elements.inputField&&l.elements.inputField.addEventListener("keyup",(function(e){13===e.keyCode&&(o.dispatchEvent("onApply",o.number),d.destroy())}));var d=new t({className:this.getClassNames("_modal"),closable:!1,body:a,visible:!0});d.elements.container.addEventListener("click",(function(e){d.destroy()})),d.elements.content.addEventListener("click",(function(e){return e.preventDefault(),e.stopPropagation(),!1})),d.inject(s);var c=e.windowPos.y-90+"px";try{var u=parseInt(window.getComputedStyle(d.elements.wrapper).paddingTop),h=d.elements.wrapper.getBoundingClientRect();c=e.windowPos.y-(h.y+u)+"px"}catch(e){}d.elements.wrapper.setStyle("margin-left",e.windowPos.x+"px"),d.elements.wrapper.setStyle("margin-top",c),l.elements.inputField&&l.elements.inputField.focus()}})})),define("DS/LifecycleControls/LifecycleControls",[],(function(){return{}})),define("DS/LifecycleControls/DataGridViewContainer",["UWA/Core","UWA/Controls/Abstract","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/DataGridView/DataGridView","DS/Windows/ImmersiveFrame","DS/Controls/Expander","DS/PlatformAPI/PlatformAPI","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls","i18n!DS/LifecycleServices/assets/nls/LifecycleServicesNls","DS/ApplicationFrame/CommandsManager","DS/Controls/Button","DS/PADServices/utils/MaturityUtils","UWA/Utils/InterCom","css!DS/LifecycleControls/assets/styles/DataGridViewContainer"],(function(e,t,n,i,o,s,a,l,r,d,c,u,h,m,p){"use strict";var g=null;function f(){return null==g&&(g=r.getUser()),g}return t.extend({model:null,selection:null,dataGridView:null,defaultOptions:{idName:"dgvContainer",clickToShowDGV:!1,showNewRevision:!1,showLock:!1,showRowSelect:!1,showPreStatus:!1,showRouteStatus:!1},init:function(e,t){this._parent(e),this.selection=t,this.buildSkeleton(t)},nodeUpdate:function(e){var t=e.data.nodeModel;if(t){var n=e.data.attributes;n["new revision"]&&this.selection[t._rowID]&&(this.selection[t._rowID].proposedRevision=n["new revision"])}},modelUpdate:function(e){var t=this,n=this.model,o=this.options;n.empty();var s=[];e.forEach((function(e){if(!e.hasOwnProperty("visible")||0!=e.visible){var t={},n=e["attribute[PLMEntity.V_Name]"]?e["attribute[PLMEntity.V_Name]"]:e.name,i=e.type;e.typeDisplayName?i=e.typeDisplayName:e.displayType&&(i=e.displayType);var a=e.currentFullName?e.currentFullName:e.current,l=e.current_internal?e.current_internal:void 0,r=e.policy?e.policy:void 0,d=e.proposedRevision,c=!1;o.showNewRevision&&(e.hasOwnProperty("modifiedAttributes")&&e.modifiedAttributes.hasOwnProperty("revision")&&(d=e.modifiedAttributes.revision),e.hasOwnProperty("customRevisionAllowed")&&(c=e.customRevisionAllowed));var u=null,h=null;o.showLock&&(e.hasOwnProperty("locked")&&(u=e.locked),e.hasOwnProperty("lockedBy")&&(h=e.lockedBy));var m=void 0;o.showPreStatus&&e.hasOwnProperty("preCheckStatus")&&(m=e.preCheckStatus);var p=void 0,g=void 0;o.showRouteStatus&&(e.hasOwnProperty("routeStatus")&&(p=e.routeStatus),e.hasOwnProperty("routeId")&&(g=e.routeId)),t.id=e.physicalid,t.title=n,t.type=i,t.revision=e.revision,t.maturity=a,t.maturity_internal=l,t.imageUrl=e.imageUrl,t["new revision"]=d,t.editableRevision=c,t.locked=u,t.lockedBy=h,t.attrExclude=!1,t.policy=r,t.preCheckStatus=m,t.routeStatus=p,t.routeId=g,s.push(t)}})),n.prepareUpdate(),s.forEach((function(e){var t=[];t.push(e.imageUrl);var o=e["attribute[PLMEntity.V_Name]"]?e["attribute[PLMEntity.V_Name]"]:e.title,s=new i({label:o,grid:e,icons:t});n.addRoot(s)})),n.pushUpdate(),n.onNodeModelUpdate((function(e){t.nodeUpdate(e)}))},buildSkeleton:function(e){var t=this,o=this.options,r=new n,u={actionExclude:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"block",fontIconFamily:WUXManagedFontIcons.Font3DS}}}},h=[];e.forEach((function(e){if(!e.hasOwnProperty("visible")||0!=e.visible){var t={},n=e["attribute[PLMEntity.V_Name]"]?e["attribute[PLMEntity.V_Name]"]:e.name,i=e.type;e.typeDisplayName?i=e.typeDisplayName:e.displayType&&(i=e.displayType);var s=e.currentFullName?e.currentFullName:e.current,a=e.current_internal?e.current_internal:void 0,l=e.policy?e.policy:void 0,r=e.proposedRevision,d=!1;o.showNewRevision&&(e.hasOwnProperty("modifiedAttributes")&&e.modifiedAttributes.hasOwnProperty("revision")&&(r=e.modifiedAttributes.revision),e.hasOwnProperty("customRevisionAllowed")&&(d=e.customRevisionAllowed));var c=null,u=null;o.showLock&&(e.hasOwnProperty("locked")&&(c=e.locked),e.hasOwnProperty("lockedBy")&&(u=e.lockedBy));var m=void 0;o.showPreStatus&&e.hasOwnProperty("preCheckStatus")&&(m=e.preCheckStatus);var p=void 0;o.showRouteStatus&&(e.hasOwnProperty("routeStatus")&&(p=e.routeStatus),e.hasOwnProperty("routeId")&&(p=e.routeId)),t.id=e.physicalid,t.title=n,t.type=i,t.revision=e.revision,t.maturity=s,t.maturity_internal=a,t.imageUrl=e.imageUrl,t["new revision"]=r,t.editableRevision=d,t.locked=c,t.lockedBy=u,t.attrExclude=!1,t.policy=l,t.preCheckStatus=m,t.routeStatus=p,t.routeId=undefined,h.push(t)}})),r.prepareUpdate(),h.forEach((function(e){var t=[];t.push(e.imageUrl);var n=new i({label:e.title,grid:e,icons:t});r.addRoot(n)})),r.pushUpdate();t=this;r.onNodeModelUpdate((function(e){t.nodeUpdate(e)}));var g=[];o.showRowSelect&&g.push({icon:{iconName:"block",fontIconFamily:1},dataIndex:"attrExclude",alignmentValue:"center",description:d.exclude,visibleFlag:o.showRowSelect,width:30,sortableFlag:!0,resizableFlag:!1,editableFlag:!1,getCellTypeRepresentation:function(e){return"actionExclude"},getCellSemantics:function(e){var t=void 0;e.nodeModel&&(e.nodeModel.getReferenceValue("attrExclude")&&(t="wux-ui-3ds wux-ui-3ds-block lc_dgv_exclude"));return{icon:{iconClasses:t}}},getCellTooltip:function(e){if(e.nodeModel&&e.nodeModel.getReferenceValue("attrExclude"))return{getAllInformationCB:()=>({model:{shortHelp:d.excluded}})}}}),g.push({text:d.title,dataIndex:"tree",className:"title"}),g.push({text:d.type,dataIndex:"type",width:100,className:"type"}),g.push({text:d.revision,dataIndex:"revision",width:70,className:"revision"}),o.showNewRevision&&g.push({text:c.proposedRevision,dataIndex:"new revision",width:90,getCellEditableState:function(e){return e.nodeModel.options.grid.editableRevision},editionPolicy:"EditionInPlace",visibleFlag:o.showNewRevision,className:"newrevision"}),g.push({text:c.maturitystate,dataIndex:"maturity",width:95,typeRepresentation:"tag",className:"lc-maturity-state",getCellClassName:function(e){if(e.nodeModel){var t,n=e.nodeModel.getReferenceValue("maturity_internal");if(n||(n=e.nodeModel.getReferenceValue("maturity")),n){if(!1===n.contains(".")){let t=e.nodeModel.getReferenceValue("policy");t&&(n=t+"."+n)}t=m.getAndCreateMaturityClass(n,"wux-controls-label")}return t}}}),o.showLock&&g.push({text:c.Lock,visibleFlag:o.showLock,editableFlag:!1,dataIndex:"locked",width:60,typeRepresentation:"url",alignment:"center",getCellValue:function(e){var t,n,i=void 0;if(e.nodeModel){var o=e.nodeModel._options.grid.locked;if(void 0===o)i="";else if(!0===o){var s=(t=f(),n="",void 0!==t&&(n=t.login),n),a=function(){var e=f(),t="";return void 0!==e&&(t=e.firstName+" "+e.lastName),t}(),l=!0,r=e.nodeModel._options.grid.lockedBy;r.trim().length>0&&((l=r.toUpperCase().trim()===s.toUpperCase().trim()||!1)||(l=r.toUpperCase().trim()===a.toUpperCase().trim()||!1)),i=l?"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-key lc_dgv_lock":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-lock lc_dgv_lock_other"}else!1===o&&(i="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-lock-open lc_dgv_unlock")}return{icon:{iconClasses:i}}}}),o.showPreStatus&&g.push({text:d.precheck,visibleFlag:o.showPreStatus,editableFlag:!1,dataIndex:"preCheckStatus",width:95,typeRepresentation:"url",alignment:"center",getCellValue:function(e){var t=void 0;if(e.nodeModel){var n=e.nodeModel._options.grid.preCheckStatus;"waiting"===n?t="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-hourglass":!0===n?t="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-check lc_dgv_lock":!1===n&&(t="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-error lc_dgv_lock_other")}return{icon:{iconClasses:t}}}}),o.showRouteStatus&&g.push({text:d.routeStatus,visibleFlag:o.showRouteStatus,editableFlag:!1,dataIndex:"routeStatus",width:95,typeRepresentation:"url",alignment:"center",getCellValue:function(e){var t=void 0;if(e.nodeModel){var n=e.nodeModel._options.grid.routeStatus;"RouteCreated"===n?t="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-route-start":"Block"===n?t="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-route":!1===n&&(t="")}return{icon:{iconClasses:t}}},getCellTooltip:function(e){if(e.nodeModel){var n=e.nodeModel._options.grid.routeStatus;if("RouteCreated"===n)return{getAllInformationCB:()=>({model:{shortHelp:d.routeToBeCreated}})};if("Block"===n){let e=d.routeBlocking;return e=e.replace("&#xA;","\n"),{getAllInformationCB:()=>({model:{shortHelp:e}})}}}return t.dataGridView.getCellDefaultTooltip(e)}}),this.dataGridView=new s({treeDocument:r,columns:g}),this.options.onContextualEvent&&(this.dataGridView.onContextualEvent=this.options.onContextualEvent),this.dataGridView.getTypeRepresentationFactory().registerTypeRepresentations(JSON.stringify(u)),this.dataGridView.addEventListener("click",function(e,n){if(n&&n.nodeModel&&n.nodeModel.options.grid)switch(t.dataGridView.layout.getDataIndexFromColumnIndex(n.columnID)){case"attrExclude":if(n.nodeModel){var i=!0;n.nodeModel.getReferenceValue("attrExclude")&&(i=!1),n.nodeModel.updateOptions({grid:{attrExclude:i}})}break;case"routeStatus":var o=[],s=n.nodeModel.getReferenceValue("routeId");if(s){o.push({envId:"OnPremise",serviceId:"3DSpace",contextId:"",objectId:s,objectType:"Route",path:[{resourceid:s,type:"Route"}]});var a={items:o},l={protocol:"3DXContent",version:"2.0",source:"ENOLCMI_AP",widgetId:widget.id,data:a},r=new p.Socket("compassPageSocket");r.subscribeServer("com.ds.compass",window.parent),r.dispatchEvent("onSetX3DContent",l,"compassPageSocket");r.dispatchEvent("onLaunchApp",{appId:"ENXROUT_AP"},"compassPageSocket")}}}.bind(t)),this.dataGridView.layout.rowsHeader=!1,this.dataGridView.rowSelection="none",this.dataGridView.cellSelection="none";var v=new a;v.setContentInBackgroundLayer(this.dataGridView.getContent()),v.reactToPointerEventsFlag=!1;var b=UWA.createElement("div",{id:o.idName});if(!0===o.clickToShowDGV){b.addClassName("hasExpander");var C=e.length?56+24*e.length:80;e.length>8&&(C=200);var w=!1;let t=void 0===o.expanderText?"Objects selected":o.expanderText;var y=new l({header:t,body:v});y.elements.header.addEvent("click",(function(){if(w)document.getElementsByClassName("command_dialog")[0].style.height="auto",document.getElementsByClassName("modal-body")[0].style.height="auto",b.removeClassName("open"),w=!1;else{document.getElementsByClassName("command_dialog")[0].style.height=240+C+"px",document.getElementsByClassName("modal-body")[0].style.height=128+C+"px",b.addClassName("open"),w=!0}})),y.inject(b)}else v.inject(b);this.elements.container=b,this.model=r}})})),define("DS/LifecycleControls/InputValidation",["UWA/Controls/Abstract","DS/UIKIT/Tooltip","DS/LifecycleServices/EventHandler"],(function(e,t,n){"use strict";var i=0,o=1,s=2,a=3,l=4,r=5;function d(){if(!(this instanceof d))return new d}function c(){if(!(this instanceof c))return new c}function u(e){if(!(this instanceof u))return new u;this.min=e}function h(e){if(!(this instanceof h))return new h;this.max=e}function m(){if(!(this instanceof m))return new m}d.prototype={validate:function(e){return"string"==typeof e&&e.length>0},getErrorInfo:function(e){return"Text cannot be empty"}},c.prototype={validate:function(e){return("string"!=typeof e||0!==e.length)&&!isNaN(e)},getErrorInfo:function(e){return"Must be a number"}},u.prototype={validate:function(e){return"string"==typeof e&&e.length>=this.min},getErrorInfo:function(e){return"Must be min "+this.min+" chars"}},h.prototype={validate:function(e){return"string"==typeof e&&e.length<=this.max},getErrorInfo:function(e){return"Must be max "+this.max+" chars"}},m.prototype={validate:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},getErrorInfo:function(e){return"Must be a valid e-mail"}};var p=e.extend({init:function(e,t,n,i){this.isDebug=!1,this.element=e,this.type=t,this.customCSS=n,this.isOptional=!1,this.isValid=!0,this.customId=-1,this.validators=[],i&&(this.validators=this.validators.concat(i))},setGroupId:function(e){this.groupId=e},setOptional:function(e){this.isOptional=e},addValidators:function(e){var t;this.validators=this.validators.concat(e),((t=this.type)===o||t===s||t===a||t===l)&&this.validate()},validate:function(e){var t=this.isValid,n=!1;if(null!=e||null!=this.element){var i="",o=null!=e?e:this.element.value;return this.validators.some((function(e){if(e){var t=e.validate(o);return t||(i=e.getErrorInfo(o)),!t}}))?this.isValid=this.checkOptional(o):this.isValid=!0,t===this.isValid&&i===this.errorText||(this.errorText=i,this.updateUI(),n=!0),n}console.info("No element connected, skipping validation")},checkOptional:function(e){return!!this.isOptional&&(!e||"string"==typeof e&&0===e.length)},updateUI:function(){var e;this.element&&(this.isValid?(this.element.classList.remove("inputvalidation-validation-invalid"),this.customCSS&&this.customCSS.inputCSS&&this.element.classList.remove(this.customCSS.inputCSS),(e=this.getInfoElement(this.element,!0))&&(e.style.display="none")):(this.element.classList.add("inputvalidation-validation-invalid"),this.customCSS&&this.customCSS.inputCSS&&this.element.classList.add(this.customCSS.inputCSS),(e=this.getInfoElement(this.element,!0))&&(e.style.display="inline",this.tooltip.elements.body.innerHTML=this.errorText)))},removeValidationElementsFromHost:function(e){if(e){e.classList.remove("inputvalidation-validation-invalid"),this.customCSS&&this.customCSS.inputCSS&&e.classList.remove(this.customCSS.inputCSS);var t=this.getInfoElement(e,!1);t&&e.parentNode.removeChild(t),this.isDebug&&(e.classList.add("debug-inputvalidation-detached"),e.classList.remove("debug-inputvalidation-attached"),e.classList.remove("debug-inputvalidation-create"))}},getInfoElement:function(e,n){if(!e.parentNode)return null;var i=e.parentNode.querySelector(".inputvalidation-info-icon");return!i&&n&&((i=document.createElement("b")).classList.add("inputvalidation-info-icon"),this.customCSS&&this.customCSS.infoIconCSS&&i.classList.add(this.customCSS.infoIconCSS),this.tooltip=new t({target:UWA.extendElement(i),body:"no error yet",position:"bottom"}),this.tooltip.elements.container.classList.add("inputvalidation-tooltip"),this.customCSS&&this.customCSS.tooltipCSS&&this.tooltip.elements.container.classList.add(this.customCSS.tooltipCSS),e.parentNode.appendChild(i)),i}});return e.extend({init:function(e,t){this.validateEl=[],this.customValidators=t;var n,i,o=[];e&&(n=e,i="[data-validation]",o=Array.prototype.slice.apply(n.querySelectorAll(i))),o.forEach((function(e){var t=this._getValidators(e),n=e.getAttribute("data-validation-group"),i="string"==typeof e.getAttribute("data-validation-optional");this.addValidateElement(e,t.validators,i,n,t.type)}),this),this._updateSubmit()},setCustomCSS:function(e){this.customCSS=e},_getValidators:function(e){var t,n=[],p=e.getAttribute("data-validation").split("."),g="text"===(t=p[0])?o:"number"===t?s:"email"===t?a:"custom"===t?l:"submit"===t?r:i;if(g!==i){g===o?n.push(new d):g===s?n.push(new c):g===a&&n.push(new m);var f=+e.getAttribute("data-validation-minLength");isNaN(f)||0===f||n.push(new u(f));var v=+e.getAttribute("data-validation-maxLength");isNaN(v)||0===v||n.push(new h(v)),b&&n.push(b);var b=null;return g===l&&(b=this._getCustomValidator(this.customValidators,p[1])),b&&n.push(b),{type:g,validators:n}}},updateValidation:function(){this._updateSubmit()},addValidateElementNoUI:function(e){return this.addValidateElement(null,e,!1)},addValidateElement:function(e,t,i,o,s){var a=new p(e,s||l,this.customCSS);a.setGroupId(o),a.setOptional(i||!1),a.addValidators(t),this.validateEl.push(a),e&&(a.inputHandler=new n(e,"input",this._onInputChanged.bind(this,a))),this.isDebug&&(e.classList.remove("debug-inputvalidation-attached"),e.classList.remove("debug-inputvalidation-detached"),e.classList.add("debug-inputvalidation-create"));var r=this;return{getValidator:function(){return a},setCustomId:function(e){a.customId=e,a.element&&a.element.setAttribute("data-custom-id",e)},getElementCustomId:function(){return a.element?a.element.getAttribute("data-custom-id"):-1},removeElementCustomId:function(){a.element&&a.element.removeAttribute("data-custom-id")},attachElement:function(e){this.detach(e),a.element=e,a.inputHandler=new n(e,"input",r._onInputChanged.bind(r,a)),this.setCustomId(a.customId),a.isValid||a.updateUI(),this.isDebug&&(e.classList.add("debug-inputvalidation-attached"),e.classList.remove("debug-inputvalidation-detached"),e.classList.remove("debug-inputvalidation-create"))},detach:function(e){if(a.element){if(-1!==a.customId&&a.element){var t=this.getElementCustomId();if(a.customId!=t)return console.error("ID mismatch","data-id: "+t+" validator id: "+a.customId),a.removeValidationElementsFromHost(e),this.removeInputHandler(),void(a.element=null)}a.removeValidationElementsFromHost(a.element),this.removeInputHandler(),this.removeElementCustomId(),a.element=null}},removeInputHandler:function(){a.inputHandler&&(a.inputHandler.unbind(),a.inputHandler=null)},updateInputValidation:function(e){return!!a.validate(e)&&(r._updateSubmit(),!0)}}},addSubmitElement:function(e,t){return this.addValidateElement(e,null,!1,t,r)},isInputInvalid:function(e){return this.validateEl.filter((function(e){return e.type!==r})).some((function(t){return!1===t.isValid&&t.groupId===e}))},isInputValid:function(e){return!this.isInputInvalid(e)},_getCustomValidator:function(e,t){var n=null;if(e)for(var i=0;i<e.length;++i)if(e[i].name===t){n=e[i];break}return n},_updateSubmit:function(){this.validateEl.filter((function(e){return e.type===r})).forEach((function(e){this.isInputInvalid(e.groupId)?(e.element.disabled=!0,e.element.classList.add("inputvalidation-submit-invalid")):(e.element.disabled=!1,e.element.classList.remove("inputvalidation-submit-invalid"))}),this)},_onInputChanged:function(e){e.validate()&&this._updateSubmit()}})}));const WebUXDialogFooter={YesNo:1,OkCancel:2};Object.freeze(WebUXDialogFooter);const WebUXDialogButton={Yes:1,No:2,Ok:3,Cancel:4};Object.freeze(WebUXDialogButton),define("DS/LifecycleControls/WebUXDialog",["UWA/Controls/Abstract","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button"],(function(e,t,n,i){"use strict";return e.extend({create:function({container:e,content:i,title:o,footer:s=WebUXDialogFooter.OkCancel,zIndex:a,initialSize:l,resizeable:r=!0}){var d=new t({});let c=()=>{};if(l){let e={};i&&(e.width=window.getComputedStyle(i).width,e.height=window.getComputedStyle(i).height,i.setStyle("width",l.width+"px"),i.setStyle("height",l.height+"px")),c=t=>{setTimeout((()=>{let n=t.dsModel.elements.container.querySelector(".wux-windows-window-maincontent.wux-element-contentbox"),o=t.dsModel.elements.container.querySelector(".wux-windows-window-content.wux-element-contentbox");n.setStyle("width",l.width+"px"),o.setStyle("height",l.height+"px"),i&&(i.setStyle("width",e.width),i.setStyle("height",e.height)),c=()=>{}}),100)}}return d.addEventListener("contentVisibleStateChange",(e=>{c(e)})),this.dialog=new n({immersiveFrame:d,title:o,resizableFlag:r,content:i||"null content",activeFlag:!1,buttons:this._createButtons(s)}),a&&d.getContent().setStyle("z-index",a),d.inject(e),new UWA.Promise(((e,t)=>{this.dialog.addEventListener("close",(()=>{this.dialog.destroy(),d.destroy(),s==WebUXDialogFooter.YesNo?e(WebUXDialogFooter.No):t()})),this.addEvent("buttonClick",(n=>{n!==WebUXDialogButton.Cancel&&(t=()=>{},e(n)),this.dialog.close()}))}))},enableButton:function(e,t){this._buttons[e]&&(this._buttons[e].disabled=!t)},_createButtons:function(e){this._buttons={};let t={};return e===WebUXDialogFooter.YesNo?(t={Yes:new i({onClick:e=>{this.dispatchEvent("buttonClick",WebUXDialogButton.Yes)}}),No:new i({onClick:e=>{this.dispatchEvent("buttonClick",WebUXDialogButton.No)}})},this._buttons[WebUXDialogButton.Yes]=t.Yes,this._buttons[WebUXDialogButton.No]=t.No):e===WebUXDialogFooter.OkCancel&&(t={Ok:new i({onClick:e=>{this.dispatchEvent("buttonClick",WebUXDialogButton.Ok)}}),Cancel:new i({onClick:e=>{this.dispatchEvent("buttonClick",WebUXDialogButton.Cancel)}})},this._buttons[WebUXDialogButton.Ok]=t.Ok,this._buttons[WebUXDialogButton.Cancel]=t.Cancel),t}})})),define("DS/LifecycleControls/AssemblyTreeList",["UWA/Controls/Abstract","UWA/Core","UWA/Class/Promise","DS/Tree/TreeListView","DS/Core/PointerEvents","DS/Controls/Toggle","DS/LifecycleServices/AssemblyJson","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/ArrayFunctions"],(function(e,t,n,i,o,s,a,l,r){"use strict";return e.extend({init:function(e){e=e||{},this._parent({}),this.buildUI(),this.options=e,this.colIndexes=["revision","owner","description","modified","originated"],this.defaultWidth=[],this.defaultWidth.revision=72,this.defaultWidth.newTitle=180,this.defaultWidth.maturityNls=110,this.showCheckbox=!1,this.selectOnCheck=!1,this.postUpdateViewCalled=!1,this.enableDragAndDrop=!0,this.selectOnCheck=!1,this.treeColumnSortable=!0,this.enableListSelection=!1,this.options.updateRelatedCombos=void 0===e.updateRelatedCombos||e.updateRelatedCombos,void 0!==e&&(void 0!==e.showCheckbox&&(this.showCheckbox=e.showCheckbox),void 0!==e.selectOnCheck&&(this.selectOnCheck=e.selectOnCheck),void 0!==e.onDropCol&&(this.onDropCol=e.onDropCol),void 0!==e.allCols&&(this.colIndexes=e.allCols),void 0!==e.getTypeIcon&&(this.getTypeIconFunc=e.getTypeIcon),void 0!==e.getChildrenInTreeOrder&&(this.getChildrenInTreeOrder=e.getChildrenInTreeOrder),void 0!==e.treeColumnSortable&&(this.treeColumnSortable=e.treeColumnSortable),void 0!==e.colsSortable&&(this.colsSortable=e.colsSortable),void 0!==e.treeColumnSortable&&(this.treeColumnSortable=e.treeColumnSortable),void 0!==e.colsSortable&&(this.colsSortable=e.colsSortable),void 0!==e.enableDragAndDrop&&(this.enableDragAndDrop=e.enableDragAndDrop),void 0!==e.enableListSelection&&(this.enableListSelection=e.enableListSelection),void 0!==e.onContextualEvent&&(this.onContextualEvent=e.onContextualEvent),this.canMultiSelect=e.canMultiSelect||!1),this.options.useKeyboard&&this.installKeyboardHandlers(),this._configureDropdownCellFactory(),this.columns=this.initColumns()},disableNodesByType:function(e){for(var t=this.tree.getDocument().getAllDescendants(),n=t.length,i=0;i<n;i++){var o=t[i],s=o.options.type;-1==e.indexOf(s)&&this.disableNode(o)}},installKeyboardHandlers:function(){this.elements.container.addEventListener("keydown",(e=>{65===e.keyCode&&e.ctrlKey&&(this.getAllNodes().forEach((e=>e._treeNode.select())),e.preventDefault())}))},getNodes:function(e,t){t=[];for(var n=this.tree.getDocument().getAllDescendants(),i=n.length,o=0;o<i;o++){var s=n[o];if(e(s)){var a=this.buildAssemblyNode(s);t.push(a)}}return t},getAllNodes:function(){return this.getNodes((function(e){return!0}))},getSelectedNodes:function(){var e=this;return this.tree.getDocument().getSelectedNodes().map((function(t){return e.buildAssemblyNode(t)}))},clearSelection:function(){this.getSelectedNodes().forEach((e=>{e._treeNode.unselect()}))},getSameNodes2:function(e){return this.getNodes((function(t){return e==t.options.nodeId}))},getToggledNodes:function(){if(1!=this.showCheckbox)return[];for(var e=[],t=this.tree.getDocument().getAllDescendants(),n=t.length,i=0;i<n;i++){var o=t[i];if(o.toggled){var s=o.options.nodeId;-1==e.indexOf(s)&&e.push(s)}}return e},getDropdownSelectedIndex:function(e,t){var n=this.getSameNodes(e);if(0==n.length)return-1;var i=n[0];return this.getNodeDropdownSelectedIndex(i,t)},onSelect:function(e){this.onSelCallback=e},onUnselect:function(e){this.onUnselCallback=e},onCheck:function(e){this.onCheckCallback=e},onUncheck:function(e){this.onUncheckCallback=e},insertCol:function(e,t){this.columns.splice(e,0,t)},load:function(e,t,n){var o=this;let s=Array.isArray(e)?e:[e];this.filterDuplicates=!1,void 0!==n&&void 0!==n.filterDuplicates&&(this.filterDuplicates=n.filterDuplicates);var a,l=n?n.loadFilter:null,r=n?n.sortFn:null;let d="undefined"!==this.options?this.colIndexes:t,c=this.createNodeUIAttributes(d),u=this.createTreeListUIRoots(s,c.attributeNames,l,r);a=this.getOptions(u,c.customCols),this.tree=new i(a),this.tree.getManager().onPostUpdateView((function(){o.postUpdateViewCalled=!0,o.dispatchEvent("onPostUpdateView")})),this.tree.inject(this.elements.container),void 0!==this.options&&this.customizeColumns(t),this.elements.container.getElement(".wux-tree-treelistview").setStyle("height","100%"),this.elements.container.getElement(".wux-datagrid").setStyle("height","100%"),this.elements.container.getElement(".wux-layouts-gridengine").setStyle("height","100%"),this.elements.container.getElement(".wux-layouts-gridengine").setStyle("min-height","80px");for(var h=this.tree.getDocument().getAllDescendants(),m=h.length,p=0;p<m;p++){var g=h[p];g.onSelect((function(e){e.target;if(null!=o.onSelCallback){var t=o.buildAssemblyNode(e.target);o.onSelCallback(t)}})),g.onUnselect((function(e){e.target;if(null!=o.onUnselCallback){var t=o.buildAssemblyNode(e.target);o.onUnselCallback(t)}})),g.toggle=function(){this.toggled=!0,null!=this.checkbox&&!0!==this.checkbox.checkFlag&&this.checkbox.toggle()},g.untoggle=function(){this.toggled=!1,null!=this.checkbox&&!0===this.checkbox.checkFlag&&this.checkbox.toggle()}}n&&n.noExpandAll||this.tree.getNthRoot(0).expandAll()},insertDropdownListCol:function(e,t,n,i,o,s,a,l){s=void 0!==s?s:130;var r=void 0===a||a,d=this;this.insertCol(e,{text:n,dataIndex:t,isSortable:r,type:"string",width:s,onCellRequest:function(e){e.isHeader||d.insertDropdownListCell(t,e,i,o,l)}})},getRelatives:function(e){return{children:e.getAllDescendants(),parents:e.getParents(),instances:this.getSameNodes(e.options.nodeId)}},setDropdownSelectionIf:function(e,t,n,i){for(var o=0;o<e.length;o++){var s=e[o];if(("function"!=typeof i||i(this.getNodeDropdownSelectedIndex(s,n)))&&(this.setNodeDropdownSelectedIndex(s,n,t),void 0!==s.dropdownList)){var a=s.dropdownList[n];a.selectedIndex=t,a.previouslySelectedIndex=t}}},getNodeDropdownSelectedIndex:function(e,t,n){return void 0!==e.dropdownListSelectedIndex?e.dropdownListSelectedIndex[t]:void 0!==n?(e.dropdownListSelectedIndex={},e.dropdownListSelectedIndex[t]=n,n):0},setNodeDropdownSelectedIndex:function(e,t,n){void 0===e.dropdownListSelectedIndex&&(e.dropdownListSelectedIndex={}),e.dropdownListSelectedIndex[t]=n},onDropdownListChange:function(e){var t,n=e.target,i=n.nodeModel,o=n.dataIndex;"function"==typeof n.onChangeCallback&&n.onChangeCallback(n.previouslySelectedIndex,n.selectedIndex,i),n.previouslySelectedIndex=n.selectedIndex,t=this.options.updateRelatedCombos?this.getRelatives(i).instances:[i];var s=n.selectedIndex;this.setDropdownSelectionIf(t,s,o),i.options.grid[o]=n.options[s].innerHTML},_configureDropdownCellFactory:function(){this.defaultDropdownCellFactory=function(e,n){var i=t.createElement("select",{class:"atl-combo"+(0===e._nodeDepth?" atl-root":""),styles:{width:"100%"}});return i.onChangeCallback=n,i},this.dropdownCellFactory=this.options&&this.options.dropdownCellFactory?this.options.dropdownCellFactory:this.defaultDropdownCellFactory},insertDropdownListCell:function(e,n,i,o,s){var a=this,l=n.nodeModel,r={physicalId:l.options.physicalId,nodeId:l.options.nodeId,occId:l.options.occId},d=this.dropdownCellFactory(l,o);d.dataIndex=e,d.nodeModel=l,l.dropdownList={},l.dropdownList[e]=d,d.addEventListener("change",(function(e){a.onDropdownListChange(e)}));for(var c=i(r,l),u=c.length,h=0;h<u;h++){var m=t.createElement("option"),p="",g=!1;"object"==typeof c[h]?(p=c[h].text,g=!!c[h].disabled&&c[h].disabled):p=c[h],m.setText(p),g&&(m.disabled=!0),m.inject(d)}var f="function"==typeof s?s(r,l):0;d.selectedIndex=this.getNodeDropdownSelectedIndex(l,e,f),d.previouslySelectedIndex=d.selectedIndex,(u<=1||l.disabled)&&a.disableDropdownList(d),n.cellView.getContent().setHTML(d),null!=(m=d.options[d.selectedIndex])&&(l.options.grid[e]=d.options[d.selectedIndex].innerHTML)},disableDropdownLists:function(e){var t=e.dropdownList;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];this.disableDropdownList(i)}},disableDropdownList:function(e){null!==e&&(e.disabled=!0,e.setStyle("opacity",".2"))},enableDropdownLists:function(e){var t=e.dropdownList;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];this.enableDropdownList(i)}},enableDropdownList:function(e){null===e||e.nodeModel.hardDisabled||(e.disabled=!1,e.setStyle("opacity","1"))},buildAssemblyNode:function(e){var t=this,n=e.options,i={occId:n.occId,nodeId:n.nodeId,physicalId:n.physicalId,_treeNode:e,getParent:function(){var e=i._treeNode.getParent(),n=null;return null!=e&&null!=e.options.occId&&(n=t.buildAssemblyNode(e)),n},getChildren:function(){var e=[],n=i._treeNode.getChildren();if(null==n)return[];for(var o=n.length,s=0;s<o;s++){var a=n[s],l=t.buildAssemblyNode(a);e.push(l)}return e}};return i},customizeColumns:function(e){for(var t=this.getColumnsOptions(e),n=this.tree.options.columns.length,i=0;i<n;i++){"toggle"==(o=this.columns[i]).dataIndex||"tree"==o.dataIndex||e&&-1!=e.indexOf(o.dataIndex)||(o.isHidden=!0,t.push(o))}this.tree.loadColumns(t);for(i=0;i<n;i++){var o;(o=this.tree.options.columns[i]).isHidden?this.tree.getManager().hideColumn(o.dataIndex):this.tree.getManager().showColumn(o.dataIndex)}},getColumnsOptions:function(e){var t=[];if(this.showCheckbox){var n=this.getCol("toggle");n.isHidden=!1,t.push(n)}var i=this.getCol("tree");if(i.isHidden=!1,t.push(i),void 0!==e)for(var o=e.length,s=0;s<o;s++){var a=e[s],l=this.getCol(a);l.isHidden=!1,t.push(l)}return t},createNodeUIAttributes:function(e){var t=[];if(this.showCheckbox){this.insertToggleCol();var n=this.getCol("toggle");t.push(n)}var i=this.getCol("tree");t.push(i);var o=["physicalid","Title","type"];if(void 0!==e)for(var s=e.length,a=0;a<s;a++){var l=e[a],r=this.getCol(l);t.push(r);var d=l;"modified"==d&&(d="mod"),o.push(d)}return o.push("type_icon_url"),{attributeNames:o,customCols:t}},createTreeListUIRoots:function(e,t,n,i){var o=[];return e.forEach((e=>{var s=a.getRootOccurenceId(e),l=a.AssemblyHelper(e),r={};this.fillTreeListNode(e,l,s,t,r,n,i),o.push(r)})),o},getOptions:function(e,t){var n=this,i={apiVersion:2,columns:t,roots:e,enableDragAndDrop:this.enableDragAndDrop,allowUnsafeHTMLContent:!1,resize:{columns:!0,rows:!0},selection:{toggle:!1,enableListSelection:this.enableListSelection,canMultiSelect:this.canMultiSelect},shouldAcceptDrag:function(e){return!1},onDrop:function(e,t,i,o){return n.onDragDropColumn(e,t,i,o)},onDropColumnHeader:function(e,t){return n.onDragDropColumn2(e,t)}};return this.onContextualEvent&&(i.onContextualEvent=this.onContextualEvent),i},getColIndex:function(e,t){for(var n=e.dataIndex,i=t.length,o=0;o<i;o++){if(n==t[o].dataIndex)return o}return-1},calcAfterDropColDataIndexes:function(e,t){for(var n=[],i=t.manager.options.columns,o=this.getColIndex(e,i),s=this.getColIndex(t,i),a=i.length,l=0;l<a;l++){var r=i[l].dataIndex;"toggle"!=r&&"tree"!=r&&(l!=o&&(l==s?o<s?(n.push(r),n.push(e.dataIndex)):o>s?(n.push(e.dataIndex),n.push(r)):n.push(r):n.push(r)))}return n},onDragDropColumn:function(e,t,n,i){if("tree"==t.dataIndex||"toggle"==t.dataIndex||"tree"==n.dataIndex||"toggle"==n.dataIndex)return!1;if(null!=this.onDropCol){var o=this.calcAfterDropColDataIndexes(t,n);this.onDropCol(o)}return!0},onDragDropColumn2:function(e,t){var n=e.dataTransfer.getData("Text"),i=t.dataIndex;if("tree"==n||"toggle"==n||"tree"==i||"toggle"==i)return!1;var o=this.tree.getManager().getColumn(n)[0],s=this.tree.getManager().getColumn(i)[0],a=!1;o.options.columnID>s.options.columnID&&(a=!0);for(var l=this.tree.getManager().getColumns(),r=[],d=l.length,c=0;c<d;c++){var u=l[c],h=u.dataIndex;if(0==u.isHidden&&"tree"!=h&&"toggle"!=h){if(h==n)continue;a?(h==i&&r.push(n),r.push(h)):(r.push(h),h==i&&r.push(n))}}return this.onDropCol(r),!0},fillTreeListNode:function(e,t,n,i,o,s,a){var r=t.getNodeIdFromOccurenceId(n),d=(S=t.getNodeAttributeValues(r,i))[0],c=S[1],u=S[2],h=S[i.indexOf("type_icon_url")];null==h&&null!=this.getTypeIconFunc&&(h=this.getTypeIconFunc(u));for(var m,p={},g=S.length,f=3;f<g;f++){var v=i[f],b=S[f],C=v;"mod"==v&&(C="modified",b=l.formatDate(b,!0)),"originated"==v&&(b=l.formatDate(b,!0)),p[C]=b}p.instanceTitle=t.getInstanceTitle(n),o.label=c,o.icons=[h],o.grid=p,o.type=u,o.occId=n,o.nodeId=r,o.physicalId=d,o.assembly=e;var w=(m=this.getChildrenInTreeOrder?t.getChildOccurenceIdsTreeOrder(n,this.filterDuplicates):t.getChildOccurenceIds(n,this.filterDuplicates)).length;if(w>0){o.children=[];for(f=0;f<w;f++){var y=m[f],x=!1;if(s){var S;r=t.getNodeIdFromOccurenceId(y);s({type:(S=t.getNodeAttributeValues(r,["type"]))[0]})&&(x=!0)}if(!x){var D={};o.children.push(D),this.fillTreeListNode(e,t,y,i,D,s,a)}}a&&(o.children=o.children.sort(a))}},addColumn:function(e,t,n,i,o){var s={text:t,dataIndex:n,isSortable:o,width:i};e.push(s)},initColumns:function(){var e=[],t=l.getAttributeDisplayName("title");this.addColumn(e,t,"tree","auto",this.treeColumnSortable);for(var n=this.colIndexes.length,i=0;i<n;i++){var o=this.colIndexes[i],s=l.getAttributeDisplayName(o),a="auto";null!=this.defaultWidth[o]&&(a=this.defaultWidth[o]);var r=!0;null!=this.colsSortable&&null!=this.colsSortable[o]&&(r=this.colsSortable[o]),this.addColumn(e,s,this.colIndexes[i],a,r)}return e},buildUI:function(){this.elements.container=t.createElement("div",{class:"assemblyTreeListContainer",styles:{class:"tree_list",top:"0px",left:"0px",width:"100%",height:"100%","background-color":"white"}})},updateToggleHeader:function(){var e=this.getAllNodesCount(),t=this.getSelectedNodes();this.lastSelected!=e&&0!=this.lastSelected||this.toggleHeader.toggle(),this.lastSelected=t.length},toggleAll:function(){for(var e=this.tree.getDocument().getAllDescendants(),t=e.length,n=0;n<t;n++){var i=e[n];i.disabled||i.toggle()}},untoggleAll:function(){for(var e=this.tree.getDocument().getAllDescendants(),t=e.length,n=0;n<t;n++){var i=e[n];i.disabled||i.untoggle()}},getAllNodesCount:function(){return 10},createToggleHeader:function(){var e=this,t=new s({checkFlag:!1,mixedState:!1});return t.getContent().addEventListener(o.POINTERDOWN,(function(e){e.stopPropagation()})),t.getContent().addEventListener("focus",(function(e){e.preventDefault(),e.stopPropagation()})),t.getContent().addEventListener("change",(function(t){t.preventDefault(),t.stopPropagation(),t.dsModel.checkFlag?e.toggleAll():e.untoggleAll()})),t},getSameNodes:function(e){for(var t=[],n=this.tree.getDocument().getAllDescendants(),i=n.length,o=0;o<i;o++){var s=n[o];e==s.options.nodeId&&t.push(s)}return t},toggleSameNodes:function(e){for(var t=this.getSameNodes(e),n=t.length,i=0;i<n;i++){var o=t[i];this.selectOnCheck&&o.select(),o.toggle()}},untoggleSameNodes:function(e){for(var t=this.getSameNodes(e),n=t.length,i=0;i<n;i++){t[i].untoggle()}},onToggle:function(e){if(this.selectOnCheck&&e.select(),this.toggleSameNodes(e.options.nodeId),null!=this.onCheckCallback){var t=this.buildAssemblyNode(e);this.onCheckCallback(t)}},onUntoggle:function(e){if(this.untoggleSameNodes(e.options.nodeId),null!=this.onUncheckCallback){var t=this.buildAssemblyNode(e);this.onUncheckCallback(t)}},disableNode:function(e){e.disabled=!0,this.disableToggle(e),this.disableDropdownLists(e)},disableToggle:function(e){null!=e.checkbox&&(e.checkbox.disabled=!0)},enableNode:function(e){e.disabled=!1,this.enableToggle(e),this.enableDropdownLists(e)},enableToggle:function(e){null!=e.checkbox&&(e.checkbox.disabled=!1)},insertToggleCell:function(e){var t=this,n=e.nodeModel,i=new s({checkFlag:n.toggled,mixedState:!1});n.checkbox=i,n.disabled&&t.disableToggle(n),i.getContent().addEventListener(o.POINTERDOWN,(function(e){e.stopPropagation()})),i.addEventListener("buttonclick",(function(e){console.log("buttonclick")})),i.getContent().addEventListener("focus",(function(e){e.preventDefault(),e.stopPropagation()})),i.getContent().addEventListener("change",(function(e){n.toggled=e.dsModel.checkFlag,n.toggled?t.onToggle(n):t.onUntoggle(n)})),e.cellView.getContent().setHTML(i)},insertToggleCol:function(){var e=this;this.toggleHeader=this.createToggleHeader();var t={text:this.toggleHeader,width:30,dataIndex:"toggle",isSortable:!1,onCellRequest:function(t){t.isHeader||e.insertToggleCell(t)}};this.insertCol(0,t)},getCol:function(e){for(var t=this.columns.length,n=0;n<t;n++){var i=this.columns[n];if(i.dataIndex==e)return i}return null},selectOccurrences:function(e){for(var t=this.tree.getDocument().getAllDescendants(),n=0;n<t.length;n++){var i=t[n],o=i.options.occId;-1!=e.indexOf(o)?i.select():i.isSelected()&&i.unselect()}},onInitialUpdateView:function(){var e=this;return this._onInitialUpdateViewPromise=this._onInitialUpdateViewPromise||new t.Class.Promise((function(t,n){e.postUpdateViewCalled?t():e.addEvent("onPostUpdateView",(function(){setTimeout((function(){t()}),100)}))})),this._onInitialUpdateViewPromise}})})),define("DS/LifecycleControls/CustomizeColumns",["UWA/Class","DS/LifecycleControls/ChooseAttributes","DS/LifecycleServices/LifecycleServices","i18n!DS/LifecycleControls/assets/nls/CustomizeColumns"],(function(e,t,n,i){"use strict";return e.extend({init:function(e,t,n,i){this._parent({}),this.allColumns=n,this.defaultCols=i,this.hWidget=e,this.appId=t},getAll:function(){return this.allColumns},getAlldbKeys:function(){return this.allColumns.map((function(e){return e.dbKey}))},load:function(){var e=null;return null==(e=this.hWidget?this.hWidget.getValue(this.appId):JSON.parse(window.localStorage.getItem(this.appId)))&&(e=this.defaultCols,this.save(e)),e},save:function(e){this.hWidget?this.hWidget.setValue(this.appId,e):window.localStorage.setItem(this.appId,JSON.stringify(e))},getAttrDispName:function(e){return"newTarget"==e?i.newTarget:n.getAttributeDisplayName(e)},customizeColumns:function(e,n){for(var o=this,s=this.load(),a=[{name:"title",displayName:this.getAttrDispName("title"),isSelected:!0,disabled:!0}],l=0,r=s.length;l<r;l++){var d=this.allColumns.find((function(e){return s[l]===e.dbKey}));d&&a.push({name:d.dbKey,displayName:d.columnNLS,isSelected:!0})}var c=this.allColumns.length;for(l=0;l<c;l++)-1==s.indexOf(this.allColumns[l].dbKey)&&a.push({name:this.allColumns[l].dbKey,displayName:this.allColumns[l].columnNLS,isSelected:!1});t.showDialog({title:i.CustomizeColumns,parent:document.body,allAttributes:a,onShow:function(e){n(e)},onOk:function(t){for(var n=[],i=t.length,s=0;s<i;s++)"title"!=t[s]&&n.push(t[s]);o.save(n),e(n)}})},setParams:function(e,t,n){"string"==typeof e&&e.length&&(this.appId=e),Array.isArray(t)&&t.length&&(this.allColumns=t),Array.isArray(n)&&n.length&&(this.defaultCols=n)}})})),define("DS/LifecycleControls/AdaptiveLayout",["UWA/Controls/Abstract","DS/LifecycleControls/ResizeMonitor","DS/LifecycleServices/ArrayFunctions"],(function(e,t,n){"use strict";function i(e){var t=parseInt(e,10);return isNaN(t)?0:t}function o(e){var t={};return e.split(";").forEach((function(e){var n=e.split(":");2===n.length&&(t[n[0].trim()]=parseInt(n[1].trim(),10))})),t}var s=e.extend({init:function(e){if(this.el=e,!this.el.classList){var t=e;this.el.classList={contains:function(e){return-1!==this._getClassList().indexOf(e)},add:function(e){var t=this._getClassList();-1===t.indexOf(e)&&(t.push(e),this._updateClassList(t))},remove:function(e){var t=this._getClassList(),n=t.indexOf(e);-1!==n&&(t.splice(n,1),this._updateClassList(t))},_getClassList:function(){var e=t.getAttribute("class")||"";return e?e.trim().split(/\s+/):[]},_updateClassList:function(e){t.setAttribute("class",e.join(" "))}}}},hasClass:function(e){return this.el.classList.contains(e)},addClass:function(e){this.el.classList.add(e)},removeClass:function(e){this.el.classList.remove(e)}});return e.extend({init:function(e,n){this.cls=e,this.parentEl=n,this.queries=[],this.currentCls=[],this.queryIdCounter=2,this.currentStyle=0,this.onSizeChangedFn=null,this.onStyleChangedFn=null,this.isMain=!1,this.childGroups=[],this.resizeMon=new t,this.monitoredElements=[],this.currentCls.push(e)},query:function(e,t,n){var i={id:this.queryIdCounter++,query:o(e),cls:[],optional:n||[]};return t.forEach?i.cls=t:i.cls.push(t),this.queries.push(i),this},onSizeChanged:function(e){return"function"==typeof e&&(this.onSizeChangedFn=e),this},onStyleChanged:function(e){return"function"==typeof e&&(this.onStyleChangedFn=e),this},start:function(){return this._init(!0)},stop:function(){this.monitoredElements.forEach((function(e){null!=e&&e.detach()})),this.monitoredElements=[]},restart:function(e){e.forEach?e.forEach((function(e){this._restart(e)}),this):this._restart(e)},_restart:function(e){this.cls===e?(this._initAdaptiveElements(),this.currentStyle=0,this._sizeChanged()):this.childGroups.forEach((function(t){t.cls===e&&(t._initAdaptiveElements(),t.currentStyle=0,this._sizeChanged())}),this)},_init:function(e){if(this.isMain=e,this._initAdaptiveElements(),this.isMain){var t=this,n=this.resizeMon.addMonitor(this.parentEl,(function(){t._sizeChanged()}));this.monitoredElements.push(n)}return this.childGroups.forEach((function(e){e._initAsChild()})),this},_initAdaptiveElements:function(){this.elements=Array.prototype.slice.apply(this.parentEl.querySelectorAll("."+this.cls)).map((function(e){return{el:new s(e),restoreCls:[],removeCls:[]}}))},childGroup:function(e){return this.childGroups.push(e),this},_initAsChild:function(){this.isMain&&console.error("Ambiguous initialization"),this._init(!1)},_matchQueries:function(e,t){var n=this.queries.find((function(n){return!!(n.query["max-height"]&&t<n.query["max-height"])||(!!(n.query["min-height"]&&t>n.query["min-height"])||(!!(n.query["max-width"]&&e<n.query["max-width"])||!!(n.query["min-width"]&&e>n.query["min-width"])))})),i=n||{id:1,cls:[this.cls],optional:[]},o=!1;return this.currentStyle!==i.id&&(this._changeStyle(i),o=!0),o},_changeStyle:function(e){this.elements.forEach((function(t){t.restoreCls.forEach((function(e){t.el.addClass(e)})),t.restoreCls.length=0,t.removeCls.forEach((function(e){t.el.removeClass(e)})),t.removeCls.length=0,this.currentCls.forEach((function(e){t.el.removeClass(e)})),e.cls.forEach((function(e){t.el.addClass(e)})),e.optional.forEach((function(e){t.el.hasClass(e.from)&&(t.el.removeClass(e.from),t.restoreCls.push(e.from),t.el.addClass(e.to),t.removeCls.push(e.to))}))}),this),this.currentStyle=e.id,this.currentCls.length=0,this.currentCls.push.apply(this.currentCls,e.cls)},_sizeChanged:function(){var e=this.parentEl.offsetWidth,t=this.parentEl.offsetHeight,n=window.getComputedStyle(this.parentEl),o={width:e-(parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10)+i(n.borderLeft)+i(n.borderRight)),height:t-(parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10)+i(n.borderTop)+i(n.borderBottom))},s=this._matchQueries(o.width,o.height);if(this.childGroups.forEach((function(e){e._matchQueries(o.width,o.height)&&(s=!0)})),s&&this.onStyleChangedFn){var a=this.queries.find((function(e){return this.currentStyle===e.id}),this),l=a?a.cls[0]:this.cls;this.onStyleChangedFn.call(null,l,o)}this.onSizeChangedFn&&this.onSizeChangedFn.call(null,s,o)}})})),define("DS/LifecycleControls/RelatedObjectsDialog",["UWA/Controls/Abstract","DS/LifecycleControls/WebUXDialog","DS/LifecycleServices/EventHandler","DS/LifecycleControls/RelatedObjectsControl","i18n!DS/LifecycleControls/assets/nls/RelatedObjectsDialog"],(function(e,t,n,i,o){"use strict";return e.extend({create:function(e){let s=[],a=new t,l=new i({model:e.model,odtOptions:e.odtOptions,events:{selectionChange:e=>{s=e.selection},viewReady:e=>{a.enableButton(WebUXDialogButton.Ok,!0),this.keydownHandler=new n(document,"keydown",(e=>{if(!e.shiftKey&&!e.ctrlKey&&13===e.keyCode){let t=a._buttons[WebUXDialogButton.Ok]||{onClick:()=>{}};t.disabled||t.onClick(),e.preventDefault()}}))}}});return new UWA.Promise(((t,n)=>{l.load().then((()=>{a.create({container:e.parentContainer,content:l.getContent(),title:o.selectRelatedObjs,zIndex:5e4,initialSize:{width:500,height:200}}).then((e=>{t(s)})).catch((e=>{console.log("RelatedObjectsDialog exception: ",e),n()})).finally((()=>{l.destroy(),this.keydownHandler&&this.keydownHandler.unbind()})),a.enableButton(WebUXDialogButton.Ok,!1)})).catch((()=>{console.warn("ENORIPE_Relations not available for selecting related objects"),t([])}))}))}})})),define("DS/LifecycleControls/DlgMaximizeHandler",["UWA/Controls/Abstract","DS/LifecycleControls/WidgetMaximizeHandler"],(function(e,t){"use strict";return e.extend({init:function(e){var n=this;this.dialog=e,this.isUIVisible=!0,this.isMaximized=!1,this.widgetHandler=new t,this.widgetHandler.addEvent("widget-maxmized-changed",(function(e){n._updateHeaderButtons(e),n.dispatchEvent("widget-maxmized-changed",e)})),this._insertMinMaxButtons()},destroy:function(){this.widgetHandler.destroy(),this.widgetHandler=null},isWidgetMaximized:function(){return this.widgetHandler.isMaximized},setUIVisibility:function(e){this.isUIVisible!==e&&(this.isUIVisible=e,this._updateHeaderButtons(this.isMaximized))},_insertMinMaxButtons:function(){var e=this.dialog.elements.header.querySelector(".floatingPanel_RightButtons");if(e){var t=this;this.maxBtn=UWA.createElement("span",{class:"right-actions fonticon fonticon-resize-full ",styles:{display:this.widgetHandler.isMaximized?"none":"inline-block"},events:{click:function(){t._maximize()},touchstart:function(){t._maximize()}}}).inject(e,"top"),this.restoreBtn=UWA.createElement("span",{class:"right-actions fonticon fonticon-resize-small ",styles:{display:this.widgetHandler.isMaximized?"inline-block":"none"},events:{click:function(){t._restore()},touchstart:function(){t._restore()}}}).inject(e,"top")}},_updateHeaderButtons:function(e){this.isMaximized=e,this.isUIVisible?e?(this.maxBtn.setStyle("display","none"),this.restoreBtn.setStyle("display","inline-block")):(this.maxBtn.setStyle("display","inline-block"),this.restoreBtn.setStyle("display","none")):(this.maxBtn.setStyle("display","none"),this.restoreBtn.setStyle("display","none"))},_maximize:function(e){this._updateHeaderButtons(!0),this.restoreRect=this.dialog.elements.container.getBoundingClientRect();var t=this;this.widgetHandler.maximize().then((function(){var n=t.dialog.elements.container.parentElement.getBoundingClientRect();t.dialog._changeWidth(n.width),t.dialog._changeHeight(n.height),t.dialog._resizeContainer(),t.dialog.isMaximized=!0,t.dialog.options.resizable&&!e&&(t.dialog._showResizeContainer(!1),t.oldResizeCB=t.dialog.__showResizeContainerCB,t.dialog.__showResizeContainerCB=function(){})}))},_restore:function(){this._updateHeaderButtons(!0);var e=this;this.widgetHandler.restore().then((function(){e.restoreRect&&(e.dialog.isMaximized=!1,e.dialog.setNewSize({width:e.restoreRect.width,height:e.restoreRect.height}),e.dialog._changeLeft(e.restoreRect.left),e.dialog._changeTop(e.restoreRect.top),e.dialog.options.resizable&&(e.dialog.__showResizeContainerCB=e.oldResizeCB))}))}})})),define("DS/LifecycleControls/CommandDialog",["UWA/Controls/Abstract","UWA/Core","UWA/Element","DS/ENOFloatingPanel/ENOFloatingPanel","DS/Controls/Toggle","DS/UIKIT/Input/Button","DS/UIKIT/Mask","DS/LifecycleCmd/ImageUtil","DS/LifecycleControls/DlgMaximizeHandler","i18n!DS/LifecycleControls/assets/nls/CommandDialog","DS/ENOjquery/ENOjquery","css!DS/LifecycleControls/LifecycleControls"],(function(e,t,n,i,o,s,a,l,r,d,c){"use strict";return e.extend({buttonStyle:{ok:1,okCancel:2,none:3,cancel:4},init:function(){this._dialog=null,this._okButton=null,this._cancelButton=null,this._closeButton=null},create:function(e,n,i){var o=n||{};this._onOkHandler=o.onOk||function(){},this._onCloseHandler=o.onClose||function(){},this._enableCmdFn=o.enableCmd||null,this._fnContext=i||this,this._OKBtnText=o.OKBtnText||d.okButton,this._CancelBtnText=o.CancelBtnText||"",this._OKBtnType=o.OKBtnType||"",this._checkBox=o.checkboxWithText||null;var s=document.getElementsByClassName("floatingPanelComponent");if(s.length>0){var a=s[0];this.overlayMask=t.createElement("div",{class:"modal-overlay fade EFP_overlay in"}).inject(a,"top")}o.onCloseOverride&&(o.events||(o.events={}),o.events.onClose=o.onCloseOverride);var l=this._createFooter(o.buttonStyle||this.buttonStyle.okCancel),c=(a=void 0===o.overlay||o.overlay,this._createDialog(l,e,o.resizable||!1,o.maximizable||!1,o.closeButton,o.settingsButton||!1,o.settingsCallback||null,o.events||{},o.title,a,o.className||"",o.persistId));this.updateUI();var u=this;return o.powerMaximize&&(this.DlgMaximizeHandler=new r(c),this.DlgMaximizeHandler.addEvent("widget-maxmized-changed",(function(e){u.dispatchEvent("widget-maxmized-changed",e)}))),c},destroy:function(){this.overlayMask&&(this.overlayMask.remove(),this.overlayMask=void 0),this.DlgMaximizeHandler&&(this.DlgMaximizeHandler.destroy(),this.DlgMaximizeHandler=null),this._dialog&&(this._dialog.destroy(),this._dialog=null)},setTitle:function(e){this._dialog&&this._dialog.setTitle(e)},updateUI:function(){this._cancelButton&&this._cancelButton.setDisabled(!1),this._closeButton&&(this._closeButton.disabled=!1),this._okButton&&(this._okButton.isDisabled()&&(this._okButton.events=null),this._enableCmdFn?this._okButton.setDisabled(!this._enableCmdFn.apply(this._fnContext)):this._okButton.setDisabled(!1))},isWidgetMaximized:function(){return!!this.DlgMaximizeHandler&&this.DlgMaximizeHandler.isWidgetMaximized()},setPowermaximizeVisibility:function(e){this.DlgMaximizeHandler&&this.DlgMaximizeHandler.setUIVisibility(e)},maximize:function(e){this.DlgMaximizeHandler&&this.DlgMaximizeHandler._maximize(e)},restore:function(){this.DlgMaximizeHandler&&this.DlgMaximizeHandler._restore()},maskBody:function(e){if(this._dialog){var t=this._dialog.getBody();t&&a.mask(t,e)}},unmaskBody:function(){if(this._dialog){var e=this._dialog.getBody();e&&a.isMasked(e)&&a.unmask(e)}},_onOk:function(){this._disableUI(),this._onOkHandler.apply(this._fnContext)},_onCancel:function(){this._disableUI(),this._onCloseHandler.apply(this._fnContext),this.destroy()},_disableUI:function(e){let t=null==e||e;this._okButton&&this._okButton.setDisabled(t),this._cancelButton&&this._cancelButton.setDisabled(t),this._closeButton&&(this._closeButton.disabled=t)},_disableOK:function(){this._okButton&&this._okButton.setDisabled(!0)},_createFooter:function(e){if(e!==this.buttonStyle.none){var t=document.createElement("div"),i=null;this._checkBox&&(t=n.create("div",{styles:{display:"flex"}}),(i=n.create("div",{styles:{width:"170px"}})).className="CommandDialogButtons",t.className="CommandDialogFooter",this._checkboxWithText=new o({type:"checkbox",label:this._checkBox,checkFlag:!1}),this._checkboxWithText.elements.container.setStyle("flex","1 1 auto"),this._checkboxWithText.inject(t)),e===this.buttonStyle.ok?"delete"===this._OKBtnType?this._okButton=new s({value:this._OKBtnText,className:"primary-delete"}):this._okButton=new s({value:this._OKBtnText,className:"primary"}):e===this.buttonStyle.cancel?this._cancelButton=new s({value:d.cancelButton,className:"default"}):("delete"===this._OKBtnType?this._okButton=new s({value:this._OKBtnText,className:"primary-delete"}):this._okButton=new s({value:this._OKBtnText,className:"primary"}),this._cancelButton=new s({value:this._CancelBtnText||d.cancelButton,className:"default"}));var a=this;return this._okButton&&(this._checkBox?this._okButton.inject(i):this._okButton.inject(t),this._okButton.addEvent("onClick",(function(){a._onOk()}))),this._cancelButton&&(this._checkBox?this._cancelButton.inject(i):this._cancelButton.inject(t),this._cancelButton.addEvent("onClick",(function(){a._onCancel()}))),this._checkBox&&i.inject(t),t}},_decreaseAllzIndex:function(e){if(e&&""!==e)for(var t=c("."+e),n=0;n<t.length;n+=1){var i=c(t[n]).css("zIndex");c.isNumeric(i)&&c(t[n]).css("zIndex",i-=1)}},_setToTopzIndex:function(e){c(e).css("zIndex",40040)},_createDialog:function(e,t,n,o,s,a,l,r,d,c,u,h){var m=this;r.onClose||(r.onClose=function(){m._onCancel()}),this._decreaseAllzIndex(u),this._dialog=new i({className:"command_dialog "+u,title:d,footer:e,body:t,overlay:c,escapeToClose:s,closable:s,hasSettings:a,settingsCallback:l,animate:!0,resizable:n,maximizable:o,autocenter:!0,visible:!0,events:r,limitParent:!0,persistId:h}),this._setToTopzIndex(this._dialog.elements.container);var p=this,g=function(){p._decreaseAllzIndex(u),p._setToTopzIndex(p._dialog.elements.container)};return this._dialog.elements.content.addEventListener("touchstart",g,!0),this._dialog.elements.content.addEventListener("mousedown",g,!0),this._dialog}})}));