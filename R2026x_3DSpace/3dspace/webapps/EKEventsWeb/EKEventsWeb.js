define("DS/EKEventsWeb/HRESULT",[],(function(){"use strict";return Object.freeze({E_ABORT:2147500036,E_FAIL:2147500037,S_OK:0})})),define("DS/EKEventsWeb/EKEventsSinks",[],(function(){"use strict";function e(e,t){return"_"===e[0]||void 0===t?void 0:t}return Object.freeze({NULL:function(){},CONSOLE:function(t){switch(t["event.severity"]){case"critical":case"error":console.error(JSON.stringify(t,e));break;case"warning":console.warn(JSON.stringify(t,e));break;case"info":console.info(JSON.stringify(t,e));break;case"debug":console.debug(JSON.stringify(t,e));break;default:console.log(JSON.stringify(t,e))}}})})),define("DS/EKEventsWeb/EKCuid",["DS/ExperienceKernel/EKCuidImpl"],(function(e){"use strict";return e})),define("DS/EKEventsWeb/EKEventsSchema",[],(function(){"use strict";return function(){return{datetime:void 0,message:void 0,ts:void 0,ts_subms:void 0,collect_ts:void 0,tags:void 0,async:void 0,labels:void 0,"agent.logger.type":void 0,"agent.logger.version":void 0,"agent.logger.id":void 0,"agent.logger.architecture":void 0,"agent.shipper.type":void 0,"agent.shipper.version":void 0,"agent.shipper.id":void 0,"agent.shipper.architecture":void 0,"client.address":void 0,"client.bytes":void 0,"client.domain":void 0,"client.ip":void 0,"client.mac":void 0,"client.packets":void 0,"client.port":void 0,"server.address":void 0,"server.bytes":void 0,"server.domain":void 0,"server.ip":void 0,"server.mac":void 0,"server.packets":void 0,"server.port":void 0,"cloud.account.id":void 0,"cloud.admintenant":void 0,"cloud.cluster.id":void 0,"cloud.cluster.name":void 0,"cloud.datacenter.id":void 0,"cloud.datacenter.name":void 0,"cloud.dns.public":void 0,"cloud.endpoint":void 0,"cloud.env.id":void 0,"cloud.env.name":void 0,"cloud.instance.id":void 0,"cloud.instance.name":void 0,"cloud.instance.type":void 0,"cloud.pod.id":void 0,"cloud.pod.ip":void 0,"cloud.pod.name":void 0,"cloud.provider":void 0,"cloud.region":void 0,"container.id":void 0,"container.image":void 0,"container.name":void 0,"container.tags":void 0,"container.labels":void 0,"container.runtime":void 0,"error.type":void 0,"error.stack_trace":void 0,"event.name":void 0,"event.provider":void 0,"event.level":void 0,"event.levelcode":void 0,"event.severity":void 0,"event.rc":void 0,"event.type":void 0,"event.origin.file.line":void 0,"event.origin.file.name":void 0,"event.origin.function":void 0,"execfwschema.version":"1.0.0","file.logtype.id":void 0,"file.logtype.name":void 0,"file.path":void 0,"file.pathhash":void 0,"file.name":void 0,"host.name":void 0,"host.ip.private":void 0,"host.ip.public":void 0,"host.mac":void 0,"host.architecture":void 0,id:void 0,original:void 0,"os.architecture":void 0,"os.family":void 0,"os.fullname":void 0,"os.kernel":void 0,"os.name":void 0,"os.platform":void 0,"os.version":void 0,"process.args":void 0,"process.command_line":void 0,"process.cpu_id":void 0,"process.executable":void 0,"process.name":void 0,"process.pid":void 0,"process.ppid":void 0,"process.tid":void 0,"process.title":void 0,"service.id":void 0,"service.def":void 0,"service.name":void 0,"trace.action":void 0,"trace.duration":void 0,"trace.childof":void 0,"trace.children":void 0,"trace.end":void 0,"trace.id":void 0,"trace.name":void 0,"trace.next":void 0,"trace.previous":void 0,"trace.start":void 0,"trace.tags":void 0}}})),define("DS/EKEventsWeb/EKEventsLoglevels",[],(function(){"use strict";const e={};return["debug","info","warning","error","critical"].forEach((function(t){e[t.toUpperCase()]=t})),Object.freeze(e),e})),define("DS/EKEventsWeb/EKEventsLoglevelsUtils",["DS/EKEventsWeb/EKEventsLoglevels"],(function(e){"use strict";const t={},o=Object.values(e);return t.isAtLeast=function(e,t){const n=o.indexOf(e);return o.indexOf(t)>=n&&n>=0},t.isStrictlyEqual=function(e,t){return o.indexOf(e)===o.indexOf(t)},t})),define("DS/EKEventsWeb/EKEventsController",["DS/EKEventsWeb/EKEventsSinks","DS/EKEventsWeb/EKEventsLoglevels","DS/EKEventsWeb/EKEventsLoglevelsUtils"],(function(e,t,o){"use strict";function n(o,r,i,s,c){if(window.__EKEventsControllers.sessions.get(o))throw Error("Session name already exists.");if(this.sessionName=o,this.enabledTracepoints=[],r&&this.Enable(r),i&&"function"!=typeof i)throw Error("'sink' parameter is expected to be a callback. Ex: EKEventsController.Sinks.CONSOLE");if(this.sink=i||e.NULL,s&&"string"!=typeof s)throw Error("'loglevel' parameter is expected to be one of the Loglevels enum value. Ex: EKEventsController.Loglevels.INFO");return this.minLoglevel=s||t.INFO,this.flushPeriod=c||5e3,this.eventsBuffer=[],this.flusher=setInterval(n.prototype.Flush.bind(this),this.flushPeriod),window.__EKEventsControllers.sessions.set(o,this),this}if(void 0===window.__EKEventsControllers&&(window.__EKEventsControllers={sessions:new Map,activeControllers:[],passiveControllers:[]},addEventListener("beforeunload",(function(){window.__EKEventsControllers.sessions.forEach((function(e){e.Destroy()}))}))),n.getControllerByName=function(e){return window.__EKEventsControllers.sessions.get(e)},n.prototype.Enable=function(e){if(e instanceof Array)return e.reduce((function(e,t){return e.Enable(t)}),this);-1===e.indexOf("*")&&-1===e.indexOf(":")&&(e+="*");const t=/^[a-z_*][a-z0-9_*]*(:[a-z_*][a-z0-9_*]*)?$/;if("string"==typeof e&&t.test(e)){const t=new RegExp("^"+e.replace("*",".*")+"$");return this.enabledTracepoints.push(t),this}throw new Error(e+" is an invalid tracepoint name. Must match this regexp "+t.toString())},n.prototype.Capture=function(e){if(o.isAtLeast(this.minLoglevel,e["event.severity"]))for(let t=0;t<this.enabledTracepoints.length;++t)if(this.enabledTracepoints[t].test(e["event.provider"]+":"+e["event.name"])){this.eventsBuffer.push(e);break}},n.prototype.Flush=function(){for(let e=0;e<this.eventsBuffer.length;++e)this.sink(this.eventsBuffer[e]);return this.eventsBuffer=[],this},n.prototype.Start=function(){const e=window.__EKEventsControllers.passiveControllers.indexOf(this);return window.__EKEventsControllers.passiveControllers.splice(e,1),window.__EKEventsControllers.activeControllers.push(this),this},n.prototype.Pause=function(){const e=window.__EKEventsControllers.activeControllers.indexOf(this);return window.__EKEventsControllers.activeControllers.splice(e,1),window.__EKEventsControllers.passiveControllers.push(this),this},n.prototype.Destroy=function(){this.Pause(),clearInterval(this.flusher),this.Flush();const e=window.__EKEventsControllers.passiveControllers.indexOf(this);window.__EKEventsControllers.passiveControllers.splice(e,1),window.__EKEventsControllers.sessions.delete(this.sessionName)},n.prototype.IsTracepointEnabled=function(e,t){for(let o=0;o<this.enabledTracepoints.length;++o)if(this.enabledTracepoints[o].test(e+":"+t))return!0;return!1},n.Sinks=e,n.Loglevels=t,window.__karma__&&window.__karma__.config&&window.__karma__.config.private_json&&window.__karma__.config.private_json.EKLogsOptions)try{const t=window.__karma__.config.private_json.EKLogsOptions,o=t.sessionName||"defaultKarmaTracingSession",r=t.tracepoints||"*",i=e.CONSOLE,s=t.minLoglevel;new n(o,r,i,s,t.flushPeriod).Start()}catch(e){console.warn("An error occured when trying to parse karma private json for 'EKLogsOptions': ",e,window.__karma__.config.private_json.EKLogsOptions)}return n})),define("DS/EKEventsWeb/EKEvents",["DS/ExperienceKernel/ExperienceKernel","DS/EKEventsWeb/EKCuid","DS/EKEventsWeb/EKEventsSchema","DS/EKEventsWeb/EKEventsLoglevels","DS/EKEventsWeb/EKEventsController","DS/EKEventsWeb/HRESULT"],(function(e,t,o,n,r,i){"use strict";var s={HRESULT:i,Controller:r,Log:{},Trace:{},Metric:{}},c=new Map;function a(e,t,n,r,i,s,c,a){const d=performance.now();let l=new Date(Math.floor(performance.timeOrigin)+d).toISOString();const v=(d.toFixed(6)+"").split(".")[1];l=l.slice(0,23)+v+"Z";const u=new o;switch(u.datetime=l,u.ts=parseInt(Math.floor(performance.timeOrigin)+d),u.ts_subms=parseInt(v),u["event.type"]=r,u["event.provider"]=e,u["event.name"]=t,u["event.version"]=n,u["event.severity"]=i,typeof s){case"object":u.tags=JSON.stringify(s);break;case"string":u.tags=s}u.message=c.message,u["error.type"]=c["error.type"],u["error.stack_trace"]=c["error.stack_trace"],u["event.origin.file.name"]=c["event.origin.file.name"],u["event.origin.file.line"]=c["event.origin.file.line"],u["event.origin.function"]=c["event.origin.function"],u["trace.id"]=c["trace.id"],u["trace.action"]=c["trace.action"],u["trace.previous"]=c["trace.previous"],u["trace.childof"]=c["trace.childof"],u.async=a,u["metric.category"]=c["metric.category"],u["metric.set"]=c["metric.set"],u["metric.name"]=c["metric.name"],u["metric.value"]=c["metric.value"],u["metric.unit"]=c["metric.unit"],u["metric.period"]=c["metric.period"];for(let e=0;e<window.__EKEventsControllers.activeControllers.length;++e)window.__EKEventsControllers.activeControllers[e].Capture(u);return u}function d(e,t,o,n,r,i){if(!(window&&window.__EKEventsControllers&&window.__EKEventsControllers.activeControllers&&window.__EKEventsControllers.activeControllers.length))return;const s={};if("string"==typeof messageOrNativeErrorObject)s.message=r;else{const e=r;e.__proto__!==Error.prototype&&e.__proto__!==EvalError.prototype&&e.__proto__!==RangeError.prototype&&e.__proto__!==ReferenceError.prototype&&e.__proto__!==SyntaxError.prototype&&e.__proto__!==TypeError.prototype&&e.__proto__!==URIError.prototype||(s.message=e.message,s["error.type"]=e.name,s["error.stack_trace"]=e.stack,s["event.origin.file.name"]=e.fileName?e.fileName:void 0,s["event.origin.file.line"]=e.fileName?e.lineNumber:void 0)}a(e,t,o||1,"log",n,i,s)}function l(){return this.End=function(){},this.Child=function(){return this},this.Next=function(){return this},this}function v(e,t,o,r,i){return this.provider=e,this.operationName=t,this.operationVersion=o,this.id=r,this.End=function(e,t){return function(e,t,o,r,i,s,d=!1){const l={"trace.id":void 0,"trace.action":"trace_end",message:t+" ended",rc:"number"==typeof o?o:0};s&&(l["trace.id"]=s.currentOpId);const v=a(e,t,i,"trace",0===o?n.INFO:n.WARNING,r,l,d),u={ts:v.ts,ts_subms:v.ts_subms},p=c.get(v["trace.id"])?c.get(v["trace.id"]):null;if(p){let e,t=0,o=u.ts_subms-p.ts_subms;o<0&&(t=1),o+=1e6*t,e=u.ts-p.ts-t,e*=1e6,e+=o,v["trace.duration"]=e,c.delete(v["trace.id"])}}(this.provider,this.operationName,e,t,this.operationVersion,{currentOpId:this.id},i)},this.Child=function(e,t,o,n,r=!1){return new s.Trace.traceStart(e,t,o,n,{parentOpId:this.id,currentOpId:void 0},r)},this.Next=function(e,t,o,n,r,c){this.End(r,c);return new s.Trace.traceStart(e,t,o,n,{previousOpId:this.id,currentOpId:void 0},i)},this}return s.Log.critical=function(e,t,o,r,i){d(e,t,i,n.CRITICAL,o,r)},s.Log.error=function(e,t,o,r,i){d(e,t,i,n.ERROR,o,r)},s.Log.warning=function(e,t,o,r,i){if(!(window&&window.__EKEventsControllers&&window.__EKEventsControllers.activeControllers&&window.__EKEventsControllers.activeControllers.length))return;const s={message:o};a(e,t,i||1,"log",n.WARNING,r,s)},s.Log.info=function(e,t,o,r,i){if(!(window&&window.__EKEventsControllers&&window.__EKEventsControllers.activeControllers&&window.__EKEventsControllers.activeControllers.length))return;const s={message:o};a(e,t,i||1,"log",n.INFO,r,s)},s.Log.debug=function(e,t,o,r,i){if(!(window&&window.__EKEventsControllers&&window.__EKEventsControllers.activeControllers&&window.__EKEventsControllers.activeControllers.length))return;const s={message:o};a(e,t,i||1,"log",n.DEBUG,r,s)},s.Trace.traceStart=function(e,o,r,i,s,d=!1){if(!(window&&window.__EKEventsControllers&&window.__EKEventsControllers.activeControllers&&window.__EKEventsControllers.activeControllers.length))return new l;const u={"trace.id":s&&t.isCuid(s.currentOpId)?s.currentOpId:t(),"trace.action":"trace_start","trace.previous":void 0,"trace.childof":void 0,message:o+" started"};s&&void 0!==s.previousOpId&&(u["trace.previous"]=s.previousOpId),s&&void 0!==s.parentOpId&&(u["trace.childof"]=s.parentOpId);const p=a(e,o,i||1,"trace",n.INFO,r,u,d);return c.set(p["trace.id"],{ts:p.ts,ts_subms:p.ts_subms}),new v(p["event.provider"],p["event.name"],p["event.version"],p["trace.id"],p.async)},s.Trace.Child=function(e,t,o,n,r,i=!1){var c=e?e.getEKCurrentTraceId():void 0;return new s.Trace.traceStart(t,o,n,r,{parentOpId:c,currentOpId:void 0},i)},v.prototype.toString=function(){return this.id},v.prototype.getTraceContext=function(){var t=new e.TraceContext;return t.setEKCurrentTraceId(this.id),t},s.isTracepointEnabled=function(e,t){for(let o=0;o<window.__EKEventsControllers.activeControllers.length;++o){if(window.__EKEventsControllers.activeControllers[o].IsTracepointEnabled(e,t))return!0}return!1},s.Metric.info=function(e,t,o,r,i,s,c,d,l){if(!(window&&window.__EKEventsControllers&&window.__EKEventsControllers.activeControllers&&window.__EKEventsControllers.activeControllers.length))return;const v={"metric.category":t,"metric.set":o,"metric.name":r,"metric.value":i,"metric.unit":s,"metric.period":c};a(e,"metric_v1",l||1,"metric",n.INFO,d,v)},s}));