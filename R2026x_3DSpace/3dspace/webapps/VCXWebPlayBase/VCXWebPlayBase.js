define("DS/VCXWebPlayBase/VCXPlayManagerModifiable",["UWA/Core","DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueBoolean"],(function(e,t,a,r,i){"use strict";return t.extend({init:function(){this._parent(),this._properties=new Map},BuildProperty:function(e,t,i){return new a(new r(e,r.EBehaviorType.Singleton),new t(i))},Build:function(){this._parent();let e=[this.BuildProperty("VCXPlayManager.progressiveLoading",i,!1),this.BuildProperty("VCXPlayManager.showActionBar",i,!1),this.BuildProperty("VCXPlayManager.immersiveNav",i,!0),this.BuildProperty("VCXPlayManager.showScenePanel",i,!1),this.BuildProperty("VCXPlayManager.showPropertiesPanel",i,!1),this.BuildProperty("VCXPlayManager.showAssemblyPanel",i,!1),this.BuildProperty("VCXPlayManager.showDressupPanel",i,!1),this.BuildProperty("VCXPlayManager.showSelection",i,!1),this.BuildProperty("VCXPlayManager.showPreHighlight",i,!0),this.BuildProperty("VCXPlayManager.showPreHighlightOnlyInteractiveActor",i,!0),this.BuildProperty("VCXPlayManager.showCanvas",i,!1),this.BuildProperty("VCXPlayManager.showPlayStopButton",i,!0),this.BuildProperty("VCXPlayManager.autoPlay",i,!1),this.BuildProperty("VCXPlayManager.showBlackBorderPreview",i,!0),this.BuildProperty("VCXPlayManager.showRobot",i,!1),this.BuildProperty("VCXPlayManager.showAuthoringTooltip",i,!1)];this.BuildProperties(e)},BuildProperties:function(e){for(let t of e)this._properties.set(t.GetPropertyInfo().GetPropertyName(),t),this.OnChangeProperty(t.GetPropertyInfo().GetPropertyName(),t.GetPropertyValue())},OnChangeProperty:function(e,t,a){if(a||(a={}),a.fromChildClass);else if(this.OnChangePropertyBegin(e,t))return!0;let r=this._properties.get(e);return r?(r.SetPropertyValue(t),!0):(a.fromChildClass=!0,this._parent(e,t,a))},OnChangePropertiesEnd:function(){},GetProperty:function(e){let t=this._properties.get(e);return t?new a(t.GetPropertyInfo(),t.GetPropertyValue()):this._parent(e)},GetPropertyValue:function(e){let t=this.GetProperty(e);if(!t)throw new Error("Illegal Property");return t.GetPropertyValue().GetValue()},GetProperties:function(){var e=this._parent();for(let t of Array.from(this._properties.keys()))e.AddOrModifyProperty(this.GetProperty(t));return e}})}));var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebPlayBase/VCXPlayManager",["require","exports","DS/CoreEvents/Events","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebComponents/VCXWebComponentBaseExperience","DS/VCXWebKernelCommands/VCXCmdChangePropertiesAutokey"],(function(e,t,a,r,i,n){"use strict";r=__importDefault(r),i=__importDefault(i),n=__importDefault(n);class s extends i.default{constructor(){super(),this._oldPaperVisiblity=!1,this._oldExcludePart=!1,this._oldExcludeDressup=!1,this._isPlayMode=!1}initialize(){this._isPlayMode=!1}unInitialize(){this._eventPreAdd&&(a.unsubscribe(this._eventPreAdd),delete this._eventPreAdd)}getInitPhase(){return 1}setPlayMode(e){e!==this._isPlayMode&&(this._isPlayMode=e,this._isPlayMode?this._activatePlayMode():this._deactivatePlayMode())}_activatePlayMode(){this._activateInfraPlayMode(),this._activateGUI(),this.applyOptions()}_deactivatePlayMode(){this._deactivateInfraPlayMode(),this._deactivateGUI()}_activateInfraPlayMode(){this._experienceBase.getManager("VCXVisuManager").setUsableInteractors(!1),this._experienceBase.getManager("VCXHyperlinkManager").setActive(!0),this._experienceBase.getManager("VCXPulseManager").setActive(!0),this._experienceBase.getManager("VCXContextualContentManager")?.setEnableContextualBar(!1),this._experienceBase.getManager("VCXDressupManager").toggleVisiblityDressupGroup(["MagnetLineID","GridsID"],!1),this._experienceBase.getManager("VCXComponentPartListManager")?.SetPartListManipulation(!1),this._experienceBase.getManager("VCXSelectionManager").keepSelectableItems=!0}applyHighlights(){let e=this._experienceBase,t=e.getManager("VCXContextManager").getMainViewer(),a=e.getManager("VCXPlayManager").QueryInterface("VCXIModifiable");a.GetPropertyValue("VCXPlayManager.showSelection")||e.getManager("VCXSelectionManager").setOverrideStyle(t,!1,{colorEnabled:!1,haloEnabled:!1,outlineEnabled:!1,priority:-100}),a.GetPropertyValue("VCXPlayManager.showPreHighlight")||e.getManager("VCXSelectionManager").setOverrideStyle(t,!0,{colorEnabled:!1,haloEnabled:!1,outlineEnabled:!1,priority:-100})}_deactivateInfraPlayMode(){this._experienceBase.getManager("VCXVisuManager")?.setUsableInteractors(!0),this._experienceBase.getManager("VCXHyperlinkManager")?.setActive(!1),this._experienceBase.getManager("VCXPulseManager")?.setActive(!1),this._experienceBase.getManager("VCXComponentPartListManager")?.SetPartListManipulation(!0);const e=this._experienceBase.getManager("VCXRobotAdapter");e&&e.showReferenceAxisSystem(!0);let t=this._experienceBase.getManager("VCXContextManager").getMainViewer();this._experienceBase.getManager("VCXSelectionManager").resetOverrideStyle(t,!0),this._experienceBase.getManager("VCXSelectionManager").resetOverrideStyle(t,!1),this._experienceBase.getManager("VCXGUIManager")?.setTooltipDisplay(!0),this._experienceBase.getManager("VCXContextualContentManager")?.setEnableContextualBar(!0),this._experienceBase.getManager("VCXDressupManager").toggleVisiblityDressupGroup(["MagnetLineID","GridsID"],!0),this._experienceBase.getManager("VCXSelectionManager").keepSelectableItems=!1,this._experienceBase.getManager("VCXSelectionManager").excludeDressups=this._oldExcludeDressup,this._experienceBase.getManager("VCXSelectionManager").excludeParts=this._oldExcludePart}_activateGUI(){let e=this._experienceBase,t=e.getManager("VCXGUIManager");e.getManager("VCXPaperManager").AutoFit=!0,t.updateUsableArea(),t.SetVisibilityPlay(!0)}_deactivateGUI(){let e=this._experienceBase,t=e.getManager("VCXGUIManager"),a=e.getManager("VCXPaperManager");a.AutoFit=!0,t.updateUsableArea(),t.SetVisibilityPlay(!1),a.setPreviewModeStyle(!1),a.setPaperVisibility(this._oldPaperVisiblity)}applyOptions(){let e=this._experienceBase,t=e.getManager("VCXGUIManager"),a=e.getManager("VCXPaperManager");this._oldPaperVisiblity=a.getPaperVisibility();let r=this.GetObject().QueryInterface("VCXIModifiable");a.setPaperVisibility(r.GetPropertyValue("VCXPlayManager.showCanvas")),a.setPreviewModeStyle(r.GetPropertyValue("VCXPlayManager.showBlackBorderPreview")),this._experienceBase.getManager("VCXGUIManager").setTooltipDisplay(r.GetPropertyValue("VCXPlayManager.showAuthoringTooltip"));const i=this._experienceBase.getManager("VCXRobotAdapter");i&&i.showReferenceAxisSystem(r.GetPropertyValue("VCXPlayManager.showRobot"));let n=t?._vcxPlayCtrl;n&&n.setupPlayer();let s=e.getManager("VCXContextManager").getFrameWindow();r.GetPropertyValue("VCXPlayManager.showActionBar")||(t.preDocksHidingConfig||(t.preDocksHidingConfig={}),t.preDocksHidingConfig.actionBar=t.getGUIServices().hideActionBar(s,!0)),this._oldExcludeDressup=this._experienceBase.getManager("VCXSelectionManager").excludeDressups,this._oldExcludePart=this._experienceBase.getManager("VCXSelectionManager").excludeParts,r.GetPropertyValue("VCXPlayManager.showPreHighlightOnlyInteractiveActor")&&(this._experienceBase.getManager("VCXSelectionManager").excludeDressups=!0,this._experienceBase.getManager("VCXSelectionManager").excludeParts=!0),this.applyHighlights()}saveProperty(e,t){const a=new n.default(this._experienceBase);let i=this.GetObject().QueryInterface("VCXIModifiable"),s=i.GetProperty(e);s.SetPropertyValue(new r.default(t)),a.ChangeProperty(i,s),this._experienceBase.getManager("VCXCommandManager").Do(a)}}return Object.defineProperty(s.prototype,"componentType",{enumerable:!0,get:function(){return"VCXPlayManager"}}),s}));