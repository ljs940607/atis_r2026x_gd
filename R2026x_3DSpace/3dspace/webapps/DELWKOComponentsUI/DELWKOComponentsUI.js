define("DS/DELWKOComponentsUI/DELWKOAutoCompleteUI",["UWA/Class","UWA/Core","DS/UIKIT/Mask","DS/CoreEvents/Events","DS/WUXAutoComplete/AutoComplete","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWModelServices_FD02/BehaviorUtil","i18n!DS/DELWKOComponentsUI/assets/nls/DELWKOAutoCompleteUI"],(function(e,t,o,n,i,s,a,l,d,r,c,u){"use strict";return e.extend({_model:null,_mapObjects:new Map,_mapScoped:new Map,_mapScopedInv:new Map,_items:[],_addItem:[],_removeItem:[],_addItemSearch:[],_addNode:!0,_currentlyremovingCSO:[],_currentlyaddingCSO:[],_onchangeSelection:!1,PREDICATES:["physicalid","ds6w:label","organization","ds6w:type","ds6w:description","ds6w:state","ds6wg:revision","ds6w:identifier","PLC_BUILD_SERIAL_NUMBER","PLC_BUILD_UNIT_NUMBER","PLC_PLANNED_DATE","PLC_SHIPPED_DATE","PLC_PRODUCT_CONFIGURATION_PID","PLC_PRODUCT_CONFIGURATION","PLC_ACTUAL_BUILD_DATE","PLC_MFG_PLAN_PID","PLC_PRODUCT_PID","PLC_MFG_PLAN_NAME","PLC_PRODUCT","PLC_PRODUCT_TITLE","PLC_PRODUCT_CONFIGURATION_TITLE","PLC_MFG_PLAN_TITLE","PLC_PRODUCT_REVISION","PLC_MFG_PLAN_REVISION"],selectId:function(e){var o=this;if(t.is(e)&&""!=e){o.autoComplete.changeSelection=!0,o._items=[],o._model=new l,o._model.prepareUpdate();var n=d.getReferenceModel(e);if(t.is(n)){o.autoComplete.changeSelection=!1;var i=new a({label:n.get("V_Name"),data:n,value:t.is(n.get("id"))?n.get("id"):n.id,icons:[r.getIconURLFromKey(n.get("type"))],grid:{value:t.is(n.get("id"))?n.get("id"):n.id,label:n.get("V_Name")}});o._items.push(i),o._model.addRoot(i),o._model.pushUpdate(),o.autoComplete.elementsTree=o._model,1===o._items.length&&o._model.getXSO().add(o._items[0])}}},buildsQuery:function(e){return"flattenedtaxonomies:types/Builds AND current : Build AND plc_95_model_95_pid :"+e.id},getBuilds:function(e,o){var i=this,l="dsmfg/dsmfg:MfgItem/";"DELLmiWorkPlanSystemReference.MfgProcess"===i._options.name&&(l="dsprcs/dsprcs:MfgProcess/");var r=e.id,c=s.getHeaders(),u="resources/v1/modeler/"+l+r+"/dscfg:Configured",m={url:s.get3DSpaceUrl()+u,method:"GET",headers:c,onComplete:function(e){for(var o=new Map,l=e.member,r=l.length,u=0;u<r;u++)if(t.is(l[u])&&Object.keys(l[u]).length>0)for(var m=l[u].configurationCtxt.member,p=m.length,_=0;_<p;_++){m[_].relativePath=m[_].relativePath.replace("/resources","resources");var v=m[_].relativePath+"?$mask=dsmvpfl:ModelRootVersionMask",h={url:s.get3DSpaceUrl()+v,method:"GET",headers:c,onComplete:function(e){for(var t=e.member,s=t.length,l=0;l<s;l++){var r=t[l];if(null!=r){var c={onComplete:function(e){if(null!=(e=e.results))for(var t=e.length,i=0;i<t;i++){for(var s,l,d,r,c={},u=e[i].attributes,m=u.length,p=0;p<m;p++)"ds6w:identifier"===u[p].name&&(s=u[p].value),"ds6wg:revision"===u[p].name&&(l=u[p].value),"type_icon_url"===u[p].name&&(d=u[p].value),"resourceid"===u[p].name&&(r=u[p].value),"attribute"===u[p].format&&(c[u[p].name]=u[p].value);c.id=c.physicalid;var _=new a({label:s+" "+l,data:c,value:r,icons:[d],grid:{icons:[d],badges:{},value:r,label:s+" "+l}});o.set(r,_)}o.size>0&&n.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents",data:o})},onFailure:function(e){}};d.federatedSearch(i.PREDICATES,i.buildsQuery(r),c)}}}};c.Accept="application/json",s.webServiceRequest(h)}}};c.Accept="application/json",s.webServiceRequest(m)},onChangeSelection:function(e,n){var i=this;if(t.is(e)&&e.length>0&&t.is(i._options.url)&&""!=i._options.url){o.mask(i._options.divContent);var a=s.getHeaders(),l=i._options.url,d={url:s.get3DSpaceUrl()+l+"/search?$top=1000&$searchStr="+e,method:"GET",headers:a,onComplete:function(e){var s=[];s.push(i.getMfgProductionPlanningCnx(e)),t.Promise.all(s).then((function(e){t.is(n.onComplete)&&n.onComplete(e),o.unmask(i._options.divContent),i._onchangeSelection=!1})).catch((e=>{o.unmask(i._options.divContent),i.autoComplete._showPopup()}))},onFailure:i.onFailure.bind(i)};a.Accept="application/json",s.webServiceRequest(d)}},init:function(e,t){var o=this;o._core=e,o._model=new l,o._options=t,o._disabledValue=t.disabled,o._items=[],o.autoComplete=new i({placeholder:u.searchPlaceHolder,elementsTree:o._model,disabled:t.disabled,multiSearchMode:!1}),o.autoComplete.fieldType=t.fieldType,o.autoComplete.addEventListener("change",(function(e){})),o.autoComplete.addEventListener("keyup",(function(e){"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),o._onchangeSelection=!0,o.onChangeSelection(e.target.value))}))},onPostAdd:function(e){var t={};null!=(t=e[0])&&(t.name=this._options.name),n.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/onPostAdd",data:t})},onRemove:function(e){var t={};null!=(t=e)&&(t.name=this._options.name),n.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/onRemove",data:t})},buildAutoComplete:function(){return this.autoComplete},getMfgProductionPlanningCnx:function(e){var o=this;return new Promise((function(n,i){var l=new Map;if(null!=e){for(var d=[],c=e.member,u=c.length,m=0;m<u;m++)d.push(c[m].id);if(d.length>0){var p={label:"getMfgProductionPlanning",tenant:"",input_physical_ids:d,attributes:[],version:3,primitives:[{navigate_from_sr:{id:1}}],patterns:{mfgProductionPlanning:[{id:1}]},patternTypeFilters:{mfgProductionPlanning:{typesToReturn:["MfgProductionPlanning"]}}},_={url:s.get3DSpaceUrl()+"cvservlet/navigate?SecurityContext="+s.getSecurityContext(),data:t.Json.encode(p),method:"POST",headers:s.getHeaders({isJsonOnly:!0}),onComplete:function(i){for(var d=[],c=i.result,u=c.length,m=0;m<u;m++){var p=c[m].outputs;if(null!=p&&Object.keys(p).length>0){var _=p.mfgProductionPlanning;if(null!=_)for(var v=_.length,h=0;h<v;h++){d.push(_[h].physicalid);var g=l.get(_[h].physicalid);void 0===g&&(g=[],l.set(_[h].physicalid,g)),g.push(c[m].input_object.physicalid)}}}if(d.length>0){var C={label:"getMfgItemOrMfgProcess",tenant:"",input_physical_ids:d,attributes:[],version:3,primitives:[{navigate_to_sr:{id:1,filter:{role:["51"],semantics:["5"]}},navigate_from_rel:{id:2}}],patterns:{mfgItems:[{id:1}],mfgProcess:[{id:2}]},attributes:["ds6w:label","physicalid","type_icon_url","ds6w:type","current","type","title","revision","bo.PLMReference.V_hasConfigContext"]},f={url:s.get3DSpaceUrl()+"cvservlet/navigate?SecurityContext="+s.getSecurityContext(),data:t.Json.encode(C),method:"POST",headers:s.getHeaders({isJsonOnly:!0}),onComplete:function(t){for(var i=[],s=t.result,d=s.length,c=0;c<d;c++){var u=s[c].outputs;if(null!=u&&Object.keys(u).length>0){var m=u.mfgItems,p=u.mfgProcess;l.forEach((function(e,t){if(t===s[c].input_object.physicalid)for(var n=0;n<p.length;n++)if("RELEASED"===p[n].current&&"FALSE"===p[n]["bo.PLMReference.V_hasConfigContext"]||"TRUE"===p[n]["bo.PLMReference.V_hasConfigContext"]){var i=[];null!=o._mapScoped.get(p[n].physicalid)&&(i=o._mapScoped.get(p[n].physicalid));for(var a=0;a<m.length;a++)i.includes(m[a].physicalid)||(i.push(m[a].physicalid),o._mapObjects.set(m[a].physicalid,m[a]));o._mapScoped.set(p[n].physicalid,i)}})),o._mapScoped.forEach((function(e,t){var n=t;e.forEach((e=>{var t=[];null!=o._mapScopedInv.get(e)&&(t=o._mapScopedInv.get(e));for(var i=0;i<p.length;i++)p[i].physicalid===n&&("RELEASED"===p[i].current&&"FALSE"===p[i]["bo.PLMReference.V_hasConfigContext"]||"TRUE"===p[i]["bo.PLMReference.V_hasConfigContext"])&&(t.includes(p[i].physicalid)||(t.push(p[i].physicalid),o._mapObjects.set(p[i].physicalid,p[i])));o._mapScopedInv.set(e,t)}))}))}}for(var _=e.member,v=_.length,h=0;h<v;h++)if(o._mapScoped.get(_[h].id)||o._mapScopedInv.get(_[h].id)){var g="";null!=o._mapScoped.get(_[h].id)&&(g=r.getIconURLFromKey("Scope"));var C=new a({label:_[h].title+" "+_[h].revision,data:_[h],value:_[h].id,icons:[r.getIconURLFromKey(_[h].type)],badges:{bottomLeft:g},grid:{badges:{bottomLeft:g},value:_[h].id,label:_[h].title}});i.push(C)}n(i)}};s.webServiceRequest(f)}else n([])},onFailure:function(e){o._core.getLogger().debug(this.name,r.getNLSValue("DELWKOAutoCompleteUI.IndexError")),i()}};s.webServiceRequest(_)}else i()}}))},onFailure:function(e){t.is(e)&&t.Json.isJson(e)&&t.Json.decode(e);console.log(this.name,"Failed: %o",e),this._core.getLogger().debug(this.name,r.getNLSValue("DELWKOAutoCompleteUI.IndexError"))}})})),define("DS/DELWKOComponentsUI/DELWKOMagnitudeCombo",["UWA/Class","UWA/Core","DS/Controls/ComboBox","DS/CoreEvents/Events","DS/DELWKONavigationServices/DELWKONavigateUtil","DS/DELWKOModelServices/DELWKOCollectionUtils","DS/DELPPWIRPCModel_FD02/Model/ReferenceModel"],(function(e,t,o,n,i,s,a){"use strict";return o.extend({_items:[],init:function(e){var o=this;o._parent(e),o.addEventListener("change",o.onChange.bind(o)),n.subscribe({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onRemove"},(function(e){0===o._items.length&&(o.selectedIndex=0,o.disabled=!0)})),n.subscribe({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onPostAdd"},(function(e){if(t.is(e)&&t.is(e.options)&&t.is(e.options.data)&&!o._items.includes(e.options.data.id)){widget.getValue("MASS"),widget.getValue("LENGTH"),widget.getValue("VOLUME"),widget.getValue("AREA");o._items.push(e.options.data.id);var n={},l=s.getReferenceModel(e.options.data.id),d=null;if(t.is(l)&&(d=l.get("DELFmiMagnitudeExt.V_DimensionType")),t.is(d)&&"EACH"!=d){var r=0,c=-1;o.elementsList.forEach((e=>{e.valueItem===d&&(c=r),r++})),o.selectedIndex=c,o.disabled=!0}else{var u=o.elementsList;if(t.is(u)&&u.length>0){o.selectedIndex=0,n.select_predicate=["physicalid","bo.delfmimagnitudeext.v_dimensiontype","bo.DELMBOMLotQuantityMgtVolume.V_MaxLotQuantity","bo.DELMBOMLotQuantityMgtMass.V_MaxLotQuantity","bo.DELMBOMLotQuantityMgtArea.V_MaxLotQuantity","bo.DELMBOMLotQuantityMgtLength.V_MaxLotQuantity"],n.onComplete=function(e){if(t.is(e)&&t.is(e.attributes)){var n=new a(e.attributes);if(t.is(n)){var i=n.get("DELFmiMagnitudeExt.V_DimensionType");if(t.is(i)&&"EACH"!=i){var s=0,l=-1;o.elementsList.forEach((e=>{e.valueItem===i&&(l=s),s++})),o.selectedIndex=l,o.disabled=!0}}}},n.onFailure=function(e){};var m=e.options.data.id;i.fetchOnIndex(m,n)}}}setTimeout((function(){o._items=[]}),600)}))},onChange:function(){n.publish({event:"DS/DELWKOComponentsUI/DELWKOMagnitudeCombo/onChange",data:this.elementsList[this.selectedIndex].valueItem})}})})),define("DS/DELWKOComponentsUI/DELWKOUoMCombo",["UWA/Class","UWA/Core","DS/Controls/ComboBox","DS/CoreEvents/Events","DS/DELPPWResourceServices_FD02/ResourceUtils"],(function(e,t,o,n,i){"use strict";return o.extend({init:function(){var e=this;e._parent(),e.disabled=!0,n.subscribe({event:"DS/DELWKOComponentsUI/DELWKOMagnitudeCombo/onChange"},(function(t){e.onChange(t)}))},onChange:function(e){var o=[],n=i.getDimension(e);if(t.is(n)){var s=n.Units;t.is(s)&&s.forEach((e=>{o.push({value:e.label,label:e.NLSName})}))}t.is(o)&&o.length>0?(this.disabled=!1,this.elementsList=o):(this.elementsList=[],this.disabled=!0)}})})),define("DS/DELWKOComponentsUI/DELWKOAutoGenerateTitle",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/Controls/Toggle","DS/Controls/LineEditor","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils","i18n!DS/DELWKOComponentsUI/assets/nls/DELWKOAutoGenerateTitle"],(function(e,t,o,n,i,s,a,l){"use strict";return e.extend({init:function(){},buildUI:function(e,o){var s=this,a=t.createElement("div",{class:"AutoGenerateTitle"});return a.setStyles({display:"table-row",width:"100%"}),o.divContent=a,s._toggle=new n({type:"switch",label:l.AutoGenerate,checkFlag:!0}),s._toggle.inject(a),s._toggle.addEventListener("buttonclick",(function(e){s._control.disabled=!s._control.disabled,s._control.requiredFlag=!e.dsModel.checkFlag})),s._control=new i({requiredFlag:!o.disabled,value:t.is(o.value)?o.value:"",disabled:o.disabled}),s._control.inject(a),a}})})),define("DS/DELWKOComponentsUI/DELWKOSearchUI",["UWA/Class","UWA/Core","UWA/Utils/InterCom","DS/Controls/Button","i18n!DS/DELWKOComponentsUI/assets/nls/DELWKOAutoCompleteUI"],(function(e,t,o,n,i){"use strict";return e.extend({_type:null,init:function(e){var t=this;t._type=e.name.substring(0,e.name.indexOf(".")),t._precondition=e.precondition,t._disabled=e.disabled,this._parent(),this.socketName="search_socket"+(new Date).getTime(),this.socket=new o.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.socket.addListener("Selected_Objects_search",e.searchCallBack)},buildUI:function(){var e=this,t=new n({label:" ",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS,onClick:function(t){e.activate(i.searchTitle,[e._type],null)}},disabled:e._disabled});return t.elements.container.setStyles({display:"inline-table"}),t.addEventListener("buttonclick",(function(){e.activate(i.searchTitle,[e._type],null)})),t},getOptions:function(e,o,n){var i=this,s={};return s.title=e,s.mode="furtive",s.app_socket_id=this.socketName,s.widget_id=widget.id,s.default_with_precond=!0,s.show_precond=!1,s.source=["3dspace"],s.default_search_criteria="",s.precond="",s.multiSel=!1,s.role="",s.select_result_max_idcard=!1,t.is(n)&&n.forEach((function(e){""!==s.default_search_criteria&&(s.default_search_criteria+=" OR "),s.default_search_criteria+=e})),t.is(o)&&(o.forEach((function(e){""!==s.precond&&(s.precond+=" OR "),null!=i._precondition?s.precond+="flattenedtaxonomies:types/"+e+" "+i._precondition:s.precond+="flattenedtaxonomies:types/"+e})),s.precond="("+s.precond+")"),s},register:function(e){var t=this;e=null!==e?e:this.options(),this.socket.dispatchEvent("RegisterContext",e),this.socket.addListener("onCloseTransient",(function(){t.socket.removeListener("onCloseTransient"),t.unRegister()}))},unRegister:function(e){var t={widget_id:widget.id};this.socket.dispatchEvent("unregisterSearchContext",t),this.socket.dispatchEvent("UnregisterContext",t)},destroy:function(e){this.unRegister(),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.disconnect()},activate:function(e,t,o){var n=this.getOptions(e,t,o);this.register(n),this.socket.dispatchEvent("InContextSearch",n)}})})),define("DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/DELWKOComponentsUI/DELWKOSearchUI","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/DELPPWResourceServices_FD02/ResourceUtils"],(function(e,t,o,n,i,s,a,l){"use strict";return e.extend({_autocomplete:null,_autocompleteUI:null,_searchbutton:null,_searchbuttonUI:null,_precondition:null,_preconditionCalls:0,init:function(){},buildUI:function(e,o){var s=this,a=t.createElement("div",{class:"AutoCompleteSearchUI"});if(a.setStyles({display:"flex","align-items":"baseline","flex-flow":"row",width:"100%"}),s._precondition=o.precondition,o.divContent=a,t.is(o.impl)){var l=o.impl;s._autocomplete=new l(e,o)}else s._autocomplete=new n(e,o);return s._autocompleteUI=s._autocomplete.buildAutoComplete(),s._autocompleteUI.inject(a),t.is(o.value)&&s._autocomplete.selectId(o.value),o.searchCallBack=s.searchCallBack.bind(s),o.type=o.dicoType,s._searchbutton=new i(o),s._searchbuttonUI=s._searchbutton.buildUI(),s._searchbuttonUI.inject(a),a},getAutoComplete:function(){return this._autocomplete.autoComplete},preconditionCallBack:function(e){this._preconditionCalls>0?(this._searchbutton._precondition=this._searchbutton._precondition.replace(")",""),this._searchbutton._precondition+=" OR "):this._searchbutton._precondition+="( ",this._searchbutton._precondition+=e,this._searchbutton._precondition+=" )",this._preconditionCalls++},disableCallBack:function(e){this._autocompleteUI.disabled=e,this._searchbuttonUI.disabled=e},searchCallBack:function(e){var o=this;if(e.length>0){o._autocomplete._items=[],o._autocomplete._addItemSearch=[];var n=e[0],i=o._autocomplete._model;if(t.is(n["ds6w:label"])){var s={member:e},d=[];d.push(o._autocomplete.getMfgProductionPlanningCnx(s)),t.Promise.all(d).then((function(e){if(t.is(e)&&e.length>0)if((e=e[0]).length>0){o._autocomplete._addItemSearch[o._autocomplete._options.name]=n.id;var s=new a({label:n["ds6w:label"]+" "+n["ds6wg:revision"],data:n,value:n.id,icons:[l.getIconURLFromKey(n["ds6w:type_value"])],grid:{value:n.id,label:n["ds6w:label"]+" "+n["ds6wg:revision"]}}),d=i.getChildren();if(t.is(d)&&d.length>0){var r=-1,c=0;if(d.forEach((e=>{e.options.data.id===n.id&&(r=c),c++})),r>-1){var u=!1;i.getXSO().get().forEach((e=>{e.options.data.id===i.getChildren()[r].options.data.id&&(u=!0)})),u||(i.getXSO().add(i.getChildren()[r]),o._autocomplete._addItemSearch[o._autocomplete._options.name]=n.id)}else i.addRoot(s),i.getXSO().add(s)}else i.addRoot(s),i.getXSO().add(s)}else{var m="",p=o._autocomplete._core.getPlugins("DicoPlugin").instance,_=n["ds6w:type_value"];m=p.getParentTypes(_).includes("DELLmiWorkPlanSystemReference")||"DELLmiWorkPlanSystemReference"===_?l.getNLSValue("DELWKOAutoCompleteSearchUI.WorkPlanNotLinked",{name:n["ds6w:label"]}):l.getNLSValue("DELWKOAutoCompleteSearchUI.MfgItemNotLinked",{name:n["ds6w:label"]}),o._autocomplete._core.getLogger().warn("CREATEWKOCMDMOD",m)}}))}}}})})),define("DS/DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI",["UWA/Class","DS/UIKIT/Mask","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWWebServices_FD02/WebserviceUtils"],(function(e,t,o,n,i,s,a,l){"use strict";return o.extend({init:function(e,o){var d=this;this._parent(e,o),d._addItem=[],d._removeItem=[],d._model.getXSO().onPostAdd((function(e){d._onchangeSelection||d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d._onchangeSelection||d.onRemove(e)})),n.subscribe({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onPostAdd"},(function(e){if(void 0!==e&&0!==e.length&&e.name!==d._options.name&&!1!==d._options.listenCSOEvents&&!(UWA.is(d._addItem)&&d._addItem.length>0&&d._addItem.includes(e.options.value))){var o=!1;d._addItem.push(e.options.value);var n=Array.from(d._mapScoped.keys());if(null!=n&&n.length>0){var r=null;if(!o){n=Array.from(d._mapScopedInv.keys());for(var c=0;c<n.length&&!o;c++)n[c]===e.options.value&&(r=new Map(d._mapScopedInv),o=!0)}}if(o){d._currentlyaddingCSO[e.name]=!0;r.get(e.options.value).length;var u=-1,m=d._model.getXSO().get();if(m.length>0&&(u=r.get(e.options.value).indexOf(m[0].options.data.id))>-1&&m[0],u<0)for(var p=d._model.getChildren().length,_=0;_<p&&-1===u;_++){r.get(e.options.value).indexOf(d._model.getChildren()[_].options.data.id)>-1&&(u=_,d._model.getChildren()[u])}if(d._model&&u>=0){d._items=[];for(_=0;_<p;_++)d._items.push(d._model.getChildren()[_])}else 0===d._model.getXSO().get().length&&(d._items=[],d._model=new s,d._model.prepareUpdate(),r.get(e.options.value).forEach((e=>{var t=d._mapObjects.get(e);if(UWA.is(t)){t.title=t["ds6w:label"],t.id=t.physicalid;var o=a.getIconURLFromKey("Scope"),n=new i({label:t.title+" "+t.revision,data:t,value:t.id,icons:[a.getIconURLFromKey(t.type)],badges:{bottomLeft:o},grid:{badges:{bottomLeft:o},value:t.id,label:t.title}});d._items.push(n),d._model.addRoot(n),d._model.pushUpdate(),d.autoComplete.elementsTree=d._model}})))}else{d._items=[];var v=[];if(v.push(e.options.data),UWA.is(e.options.data)&&Object.keys(e.options.data).length>0){var h=[];h.push(d.getMfgProductionPlanningCnx({member:v})),UWA.Promise.all(h).then((function(o){t.mask(d._options.divContent);var n=d._mapScoped.get(e.options.value);UWA.is(n)||(n=d._mapScopedInv.get(e.options.value)),UWA.is(n)||(n=[]);var r=l.getHeaders({isJsonOnly:!0}),c={url:l.get3DSpaceUrl()+d._options.url+"/bulkfetch",data:UWA.Json.encode(n),method:"POST",headers:r,onComplete:function(e){d._model=new s,d._model.prepareUpdate(),e.member.forEach((e=>{var t=a.getIconURLFromKey("Scope"),o=new i({label:e.title+" "+e.revision,data:e,value:e.id,icons:[a.getIconURLFromKey(e.type)],badges:{bottomLeft:t},grid:{badges:{bottomLeft:t},value:e.id,label:e.title}});d._items.push(o),d._model.addRoot(o)})),d._model.pushUpdate(),d.autoComplete.elementsTree=d._model,t.unmask(d._options.divContent),d._model.getXSO().onPostAdd((function(e){d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d.onRemove(e)})),1===d._items.length&&(d._model.getXSO().get().includes(d._items[0])||d._model.getXSO().add(d._items[0]))}};r.Accept="application/json",l.webServiceRequest(c)}))}}setTimeout((function(){d._currentlyaddingCSO[e.name]=!1,d._addItem=[];var t=d._addItem.indexOf(e.options.value);t>-1&&d._addItem.splice(t,1),d._model.getXSO().onPostAdd((function(e){d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d.onRemove(e)})),1===d._items.length&&(d._model.getXSO().get().includes(d._items[0])||d._model.getXSO().add(d._items[0]))}),600)}})),n.subscribe({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onRemove"},(function(e){if(void 0!==e&&0!==e.length&&e.name!==d._options.name&&!1!==d._options.listenCSOEvents&&!(UWA.is(d._addItem)&&d._addItem.length>0&&d._addItem.includes(e.options.value)||UWA.is(d._removeItem)&&d._removeItem.length>0&&d._removeItem.includes(e.options.value))){var t=d._mapScoped.get(e.options.data.id);if(void 0===t&&(t=d._mapScopedInv.get(e.options.data.id)),null!=t&&t.length>0){for(var o=!1,i=d._items.length,a=0;a<i&&!o;a++)for(var l=0;l<t.length&&!o;l++)t[l]===d._items[a].options.data.id&&(o=!0);if(n.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents",data:void 0}),o){d._removeItem.push(e.options.data.id),d._model=new s,d._model.prepareUpdate();for(a=0;a<d._items.length;a++)d._model.addRoot(d._items[a]);d._model.pushUpdate(),d.autoComplete.elementsTree=d._model,d._currentlyremovingCSO[e.name]=!0}}setTimeout((function(){d._currentlyremovingCSO[e.name]=!1,d._addItem=[],d._removeItem=[];var t=d._removeItem.indexOf(e.options.value);t>-1&&d._removeItem.splice(t,1),d._model.getXSO().onPostAdd((function(e){d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d.onRemove(e)}))}),50)}}))},onPostAdd:function(e){var t=this,o={};null!=(o=e[0])&&(o.name=t._options.name),UWA.is(o)&&UWA.is(o.options.data.id)&&(t.getBuilds(o.options.data),t._addItem.push(o.options.data.id),n.publish({event:"DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI/onPostAdd",data:o}),setTimeout((function(){t._addItemSearch[t._options.name]=[]}),200))},onRemove:function(e){var t={};null!=(t=e)&&(t.name=this._options.name),UWA.is(t)&&UWA.is(t.options.data.id)&&(this._removeItem.push(t.options.data.id),n.publish({event:"DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI/onRemove",data:t}))},onChangeSelection:function(e){var t=this;t.autoComplete.changeSelection=!0;var o=new Promise((function(o,n){var i={onComplete:function(e){o(e)}};t._parent(e,i)}));UWA.Promise.all([o]).then((function(e){if(t.autoComplete.changeSelection=!1,UWA.is(e)&&e.length>0){e=e[0],t._items=[],t._model=new s,t._model.prepareUpdate();for(var o=[],n=0;n<e.length;n++)for(var i=e[n],a=i.length,l=0;l<a;l++)o.push(i[l].options.data.id),t._model.addRoot(i[l]),t._items.push(i[l]);t._model.pushUpdate(),t.autoComplete.elementsTree=t._model,t._model.getXSO().onPostAdd((function(e){t.onPostAdd(e)})),t._model.getXSO().onRemove((function(e){t.onRemove(e)})),1===t._items.length?t._model.getXSO().add(t._items[0]):t.autoComplete._showPopup()}}))}})})),define("DS/DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils"],(function(e,t,o,n,i,s,a){"use strict";return n.extend({init:function(){},buildUI:function(e,t){return t.impl=i,this._parent(e,t)}})})),define("DS/DELWKOComponentsUI/DELWKOBuildAutoCompleteUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils"],(function(e,t,o,n,i,s,a,l,d){"use strict";return s.extend({_getBuilds:!1,PREDICATES:["physicalid","ds6w:label","organization","ds6w:type","ds6w:description","ds6w:state","ds6wg:revision","ds6w:identifier","PLC_BUILD_SERIAL_NUMBER","PLC_BUILD_UNIT_NUMBER","PLC_PLANNED_DATE","PLC_SHIPPED_DATE","PLC_PRODUCT_CONFIGURATION_PID","PLC_PRODUCT_CONFIGURATION","PLC_ACTUAL_BUILD_DATE","PLC_MFG_PLAN_PID","PLC_PRODUCT_PID","PLC_MFG_PLAN_NAME","PLC_PRODUCT","PLC_PRODUCT_TITLE","PLC_PRODUCT_CONFIGURATION_TITLE","PLC_MFG_PLAN_TITLE","PLC_PRODUCT_REVISION","PLC_MFG_PLAN_REVISION"],buildsQuery:function(e){return"flattenedtaxonomies:types/Builds AND current : Build AND plc_95_model_95_pid :"+e.id},getBuilds:function(e,i){var s=this;if(!0!==s._getBuilds){var l="dsmfg/dsmfg:MfgItem/";"DELLmiWorkPlanSystemReference.MfgProcess"===i&&(l="dsprcs/dsprcs:MfgProcess/");var r=e.id,c=a.getHeaders(),u="resources/v1/modeler/"+l+r+"/dscfg:Configured",m={url:a.get3DSpaceUrl()+u,method:"GET",headers:c,onComplete:function(e){s._getBuilds=!0;for(var i=new Map,l=e.member,r=l.length,u=0;u<r;u++)if(t.is(l[u])&&Object.keys(l[u]).length>0)for(var m=l[u].configurationCtxt.member,p=m.length,_=0;_<p;_++){m[_].relativePath=m[_].relativePath.replace("/resources","resources");var v=m[_].relativePath+"?$mask=dsmvpfl:ModelRootVersionMask",h={url:a.get3DSpaceUrl()+v,method:"GET",headers:c,onComplete:function(e){for(var t=e.member,a=t.length,l=0;l<a;l++){var r=t[l];if(null!=r){var c={onComplete:function(e){if(null!=(e=e.results))for(var t=e.length,a=0;a<t;a++){for(var l,d,r,c,u=e[a].attributes,m=u.length,p=0;p<m;p++)"ds6w:identifier"===u[p].name&&(l=u[p].value),"ds6wg:revision"===u[p].name&&(d=u[p].value),"type_icon_url"===u[p].name&&(r=u[p].value),"resourceid"===u[p].name&&(c=u[p].value);var _=new n({label:l+" "+d,data:e[a],value:c,icons:[r],grid:{value:c,label:l+" "+d}});i.set(c,_)}i.size>0&&(o.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents",data:i}),s._getBuilds=!1)},onFailure:function(e){}};d.federatedSearch(s.PREDICATES,s.buildsQuery(r),c)}}}};c.Accept="application/json",a.webServiceRequest(h)}}};c.Accept="application/json",a.webServiceRequest(m)}}})})),define("DS/DELWKOComponentsUI/DELWKOBuildAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOSearchUI","DS/DELWKOComponentsUI/DELWKOBuildAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils","DS/DELPPWResourceServices_FD02/ResourceUtils"],(function(e,t,o,n,i,s,a,l,d,r,c){"use strict";return s.extend({PREDICATES:["physicalid","ds6w:label","organization","ds6w:type","ds6w:description","ds6w:state","ds6wg:revision","ds6w:identifier","PLC_BUILD_SERIAL_NUMBER","PLC_BUILD_UNIT_NUMBER","PLC_PLANNED_DATE","PLC_SHIPPED_DATE","PLC_PRODUCT_CONFIGURATION_PID","PLC_PRODUCT_CONFIGURATION","PLC_ACTUAL_BUILD_DATE","PLC_MFG_PLAN_PID","PLC_PRODUCT_PID","PLC_MFG_PLAN_NAME","PLC_PRODUCT","PLC_PRODUCT_TITLE","PLC_PRODUCT_CONFIGURATION_TITLE","PLC_MFG_PLAN_TITLE","PLC_PRODUCT_REVISION","PLC_MFG_PLAN_REVISION"],init:function(){},buildUI:function(e,n){var i=this;!0===n.populateCSOEvents&&o.subscribe({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents"},(function(e){i.populate(e)}));var s=t.createElement("div",{class:"AutoCompleteSearchUI"});return s.setStyles({display:"flex","align-items":"baseline","flex-flow":"row",width:"100%"}),i._precondition=n.precondition,n.divContent=s,i._autocomplete=new l(e,n),i._autocompleteUI=i._autocomplete.buildAutoComplete(),i._autocompleteUI.inject(s),n.searchCallBack=i.searchCallBack.bind(i),n.type=n.dicoType,i._searchbutton=new a(n),i._searchbuttonUI=i._searchbutton.buildUI(),i._searchbuttonUI.inject(s),s},searchCallBack:function(e){var o=this;if(e.length>0){o._autocomplete._items=[],o._autocomplete._addItemSearch=[];var i=e[0],s=o._autocomplete._model;if(t.is(i["ds6w:label"])){var a={member:e},l=[];l.push(o._autocomplete.getMfgProductionPlanningCnx(a)),t.Promise.all(l).then((function(e){o._autocomplete._addItemSearch[o._autocomplete._options.name]=i.id;var a=new n({label:i["ds6w:label"]+" "+i["ds6wg:revision"],data:i,value:i.id,icons:[c.getIconURLFromKey(i["ds6w:type_value"])],grid:{value:i.id,label:i["ds6w:label"]+" "+i["ds6wg:revision"]}}),l=s.getChildren();if(t.is(l)&&l.length>0){var d=-1,r=0;l.forEach((e=>{e.options.data.id===i.id&&(d=r),r++})),d>-1?s.getXSO().add(s.getChildren()[d]):(s.addRoot(a),s.getXSO().add(a))}else s.addRoot(a),s.getXSO().add(a)}))}}},preconditionCallBack:function(e){this._preconditionCalls>0?(this._searchbutton._precondition=this._searchbutton._precondition.replace(")",""),this._searchbutton._precondition+=" OR "):this._searchbutton._precondition+="( ",this._searchbutton._precondition+=e,this._searchbutton._precondition+=" )",this._preconditionCalls++},populate:function(e){var t=this._autocomplete.autoComplete.elementsTree;t.prepareUpdate(),null!=e&&e.forEach(((e,o)=>{var n=!1;t.getAllDescendants().forEach((e=>{o===e.options.value&&(n=!0)})),n||(t.addRoot(e),this.preconditionCallBack(o))})),t.pushUpdate();var o=t.getAllDescendants().length;void 0===e&&(o=0),o>0?this.disableCallBack(!1):(this._autocomplete.autoComplete.elementsTree=new i,this._autocomplete._model=this._autocomplete.autoComplete.elementsTree,this.disableCallBack(!0),this._searchbutton._precondition=this._precondition,this._preconditionCalls=0)}})})),define("DS/DELWKOComponentsUI/DELWKOProductionPlanAutoCompleteUI",["UWA/Class","UWA/Core","DS/UIKIT/Mask","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWModelServices_FD02/BehaviorUtil","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud"],(function(e,t,o,n,i,s,a,l,d,r){"use strict";return n.extend({init:function(e,t){this._items=[],this._parent(e,t)},onChangeSelection:function(e){var n=this;if(t.is(e)&&(n.autoComplete.changeSelection=!0,t.is(e)&&t.is(n._options.url)&&""!=n._options.url)){o.mask(n._options.divContent);var c=a.getHeaders(),u=n._options.url;if(u=a.get3DSpaceUrl()+u+"/search?$top=1000&$searchStr="+e,d.isCloud()){u=n._options.url,c={},u=a.getServiceUrl("orderdatamgmt")+u,n._items=[],n._model=new s,n._model.prepareUpdate();var m=r.getProductionPlan_v2();t.Promise.all([m]).then((function(t){n.autoComplete.changeSelection=!1,o.unmask(n._options.divContent),t.forEach((t=>{t.forEach((t=>{t.content.forEach((t=>{if(t.title.toUpperCase().includes(e.toUpperCase())){var o=new i({label:t.title,data:t,value:t.id,icons:[l.getIconURLFromKey("DELLmiProductionPlanReference")],grid:{value:t.id,label:t.title}});n._items.push(o),n._model.addRoot(o)}}))}))})),n._model.pushUpdate(),n.autoComplete.elementsTree=n._model,1===n._items.length?n._model.getXSO().add(n._items[0]):n.autoComplete._showPopup()}))}else{var p={url:u,method:"GET",headers:c,onComplete:function(a){n.autoComplete.changeSelection=!1,o.unmask(n._options.divContent);var r=a.member;d.isCloud()&&(r=a.content);var c=r.length;if(c>0){n._items=[],n._model=new s,n._model.prepareUpdate();for(var u=0;u<c;u++){var m=null;d.isCloud()?r[u].title.toUpperCase().includes(e.toUpperCase())&&(m=new i({label:r[u].title,data:r[u],value:r[u].id,icons:[l.getIconURLFromKey("DELLmiProductionPlanReference")],grid:{value:r[u].id,label:r[u].title}})):m=new i({label:r[u].title,data:r[u],value:r[u].id,icons:[l.getIconURLFromKey("DELLmiProductionPlanReference")],grid:{value:r[u].id,label:r[u].title}}),t.is(m)&&(n._items.push(m),n._model.addRoot(m))}n._model.pushUpdate(),n.autoComplete.elementsTree=n._model,1===c?n._model.getXSO().add(n._items[0]):n.autoComplete._showPopup()}},onFailure:n.onFailure.bind(n)};c.Accept="application/json",a.webServiceRequest(p)}}}})})),define("DS/DELWKOComponentsUI/DELWKOProductionPlanAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOSearchUI","DS/DELWKOComponentsUI/DELWKOProductionPlanAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils","DS/DELPPWModelServices_FD02/BehaviorUtil","DS/DELPPWResourceServices_FD02/ResourceUtils","css!DS/DELWKOComponentsUI/assets/css/DELWKOAutoCompleteUI.css"],(function(e,t,o,n,i,s,a,l,d,r,c){"use strict";return i.extend({buildUI:function(e,o){var n=this,i=t.createElement("div",{class:"AutoCompleteSearchUI"});return n._precondition=o.precondition,o.divContent=i,n._autocomplete=new a(e,o),n._autocompleteUI=n._autocomplete.buildAutoComplete(),n._autocompleteUI.inject(i),t.is(o.value)&&n._autocomplete.selectId(o.value),o.searchCallBack=n.searchCallBack.bind(n),o.type=o.dicoType,r.isCloud()||(n._searchbutton=new s(o),n._searchbuttonUI=n._searchbutton.buildUI(),n._searchbuttonUI.inject(i)),i},searchCallBack:function(e){if(e.length>0){var o=e[0],i=this._autocomplete._model;if(t.is(o["ds6w:label"])){var s=new n({label:o["ds6w:label"],data:o,value:o.id,icon:c.getIconURLFromKey(o["ds6w:type_value"]),grid:{value:o.id,label:o["ds6w:label"]}});i.addRoot(s),i.getXSO().add(s)}}}})})),define("DS/DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI",["UWA/Class","DS/UIKIT/Mask","DS/CoreEvents/Events","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWWebServices_FD02/WebserviceUtils"],(function(e,t,o,n,i,s,a,l){"use strict";return s.extend({init:function(e,s){var d=this;this._parent(e,s),d._addItem=[],d._removeItem=[],d._model.getXSO().onPostAdd((function(e){d._onchangeSelection||d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d._onchangeSelection||d.onRemove(e)})),o.subscribe({event:"DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI/onPostAdd"},(function(e){if(void 0!==e&&0!==e.length&&e.name!==d._options.name&&!1!==d._options.listenCSOEvents&&(!(UWA.is(d._addItemSearch[d._options.name])&&d._addItemSearch[d._options.name].length>0)||d._addItemSearch[d._options.name].includes(e.options.value))&&!(UWA.is(d._addItem)&&d._addItem.length>0&&d._addItem.includes(e.options.value))){d._addItem.push(e.options.value);var o=!1,s=Array.from(d._mapScoped.keys());if(null!=s&&s.length>0)for(var r=null,c=0;c<s.length&&!o;c++)s[c]===e.options.value&&(r=new Map(d._mapScoped),o=!0);if(o){d._currentlyaddingCSO[e.name]=!0;var u=r.get(e.options.value).length;if(u>=1){r.get(e.options.value).forEach((e=>{var t=d._mapObjects.get(e);if(UWA.is(t)){var o=d._model.getChildren().length;d._items=[];for(var n=0;n<o;n++)t.physicalid===d._model.getChildren()[n].options.data.id&&d._items.push(d._model.getChildren()[n])}})),1===u&&d._items.length>0&&!d._model.getXSO().get().includes(d._items[0])&&d._model.getXSO().add(d._items[0]);for(var m=-1,p=d._model.getChildren().length,_=0;_<p&&-1===m;_++)r.get(e.options.value).includes(d._model.getChildren()[_].options.data.id)&&(m=_);m<0&&(d._items=[],d._model=new i,d._model.prepareUpdate(),r.get(e.options.value).forEach((e=>{var t=d._mapObjects.get(e);if(UWA.is(t)){t.title=t["ds6w:label"],t.id=t.physicalid;a.getIconURLFromKey("Scope");var o=new n({label:t.title+" "+t.revision,data:t,value:t.id,icons:[a.getIconURLFromKey(t.type)],grid:{value:t.id,label:t.title}});d._items.push(o),d._model.addRoot(o),d._model.pushUpdate(),d.autoComplete.elementsTree=d._model,d._model.getXSO().onPostAdd((function(e){d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d.onRemove(e)}))}})))}}else{d._items=[];var v=[];if(v.push(e.options.data),UWA.is(e.options.data)&&Object.keys(e.options.data).length>0){var h=[];h.push(d.getMfgProductionPlanningCnx({member:v})),UWA.Promise.all(h).then((function(o){t.mask(d._options.divContent);var s=d._mapScoped.get(e.options.value);UWA.is(s)||(s=d._mapScopedInv.get(e.options.value)),UWA.is(s)||(s=[]);var r=l.getHeaders({isJsonOnly:!0}),c={url:l.get3DSpaceUrl()+d._options.url+"/bulkfetch",data:UWA.Json.encode(s),method:"POST",headers:r,onComplete:function(e){d._model=new i,d._model.prepareUpdate(),e.member.forEach((e=>{a.getIconURLFromKey("Scope");var t=new n({label:e.title+" "+e.revision,data:e,value:e.id,icons:[a.getIconURLFromKey(e.type)],grid:{value:e.id,label:e.title}});d._items.push(t),d._model.addRoot(t)})),d._model.pushUpdate(),d.autoComplete.elementsTree=d._model,t.unmask(d._options.divContent),d._model.getXSO().onPostAdd((function(e){d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d.onRemove(e)}))}};r.Accept="application/json",l.webServiceRequest(c)}))}}setTimeout((function(){d._currentlyaddingCSO[e.name]=!1,d._addItem=[];var t=d._addItem.indexOf(e.options.value);t>-1&&d._addItem.splice(t,1),d._model.getXSO().onPostAdd((function(e){d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d.onRemove(e)})),1===d._items.length&&(d._model.getXSO().get().includes(d._items[0])||d._model.getXSO().add(d._items[0]))}),600)}})),o.subscribe({event:"DELWKOComponentsUI/DELWKOMfgProcessAutoCompleteUI/onRemove"},(function(e){if(void 0!==e&&0!==e.length&&e.name!==d._options.name&&!1!==d._options.listenCSOEvents&&!(UWA.is(d._removeItem)&&d._removeItem.length>0&&d._removeItem.includes(e.options.value))&&(!(UWA.is(d._addItemSearch[d._options.name])&&d._addItemSearch[d._options.name].length>0)||d._addItemSearch[d._options.name].includes(e.options.value))&&!(UWA.is(d._addItem)&&d._addItem.length>0&&d._addItem.includes(e.options.value))){var t=d._mapScoped.get(e.options.data.id);if(void 0===t&&(t=d._mapScopedInv.get(e.options.data.id)),null!=t&&t.length>0){for(var n=!1,s=d._items.length,a=0;a<s&&!n;a++)for(var l=0;l<t.length&&!n;l++)t[l]===d._items[a].options.data.id&&(n=!0);if(o.publish({event:"DELWKOComponentsUI/DELWKOAutoCompleteUI/populateCSOEvents",data:void 0}),n){d._removeItem.push(e.options.data.id),d._model=new i,d._model.prepareUpdate();for(a=0;a<d._items.length;a++)d._model.addRoot(d._items[a]);d._model.pushUpdate(),d.autoComplete.elementsTree=d._model}else d._model=new i,d.autoComplete.elementsTree=d._model}setTimeout((function(){d._currentlyremovingCSO[e.name]=!1,d._addItem=[],d._removeItem=[];var t=d._removeItem.indexOf(e.options.value);t>-1&&d._removeItem.splice(t,1),d._model.getXSO().onPostAdd((function(e){d.onPostAdd(e)})),d._model.getXSO().onRemove((function(e){d.onRemove(e)}))}),150)}}))},onPostAdd:function(e){var t=this,n={};null!=(n=e[0])&&(n.name=t._options.name),UWA.is(n)&&UWA.is(n.options.data.id)&&(t.getBuilds(n.options.data),t._addItem.push(n.options.data.id),o.publish({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onPostAdd",data:n}),setTimeout((function(){t._addItemSearch[t._options.name]=[]}),200))},onRemove:function(e){var t={};null!=(t=e)&&(t.name=this._options.name),UWA.is(t)&&UWA.is(t.options.data.id)&&(this._removeItem.push(t.options.data.id),o.publish({event:"DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI/onRemove",data:t}))},onChangeSelection:function(e){var t=this;t.autoComplete.changeSelection=!0;var o=new Promise((function(o,n){var i={onComplete:function(e){o(e)}};t._parent(e,i)}));UWA.Promise.all([o]).then((function(e){if(t.autoComplete.changeSelection=!1,UWA.is(e)&&e.length>0){e=e[0],t._items=[],t._model=new i;for(var o=[],n=0;n<e.length;n++)for(var s=e[n],a=s.length,l=0;l<a;l++)o.push(s[l].options.data.id),t._model.addRoot(s[l]),t._items.push(s[l]);t.autoComplete.elementsTree=t._model,t._model.getXSO().onPostAdd((function(e){t.onPostAdd(e)})),t._model.getXSO().onRemove((function(e){t.onRemove(e)})),1===t._items.length?t._model.getXSO().add(t._items[0]):t.autoComplete._showPopup()}}))}})})),define("DS/DELWKOComponentsUI/DELWKOMfgItemAutoCompleteSearchUI",["UWA/Class","UWA/Core","DS/CoreEvents/Events","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOMfgItemAutoCompleteUI","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtils"],(function(e,t,o,n,i,s,a){"use strict";return n.extend({init:function(){},buildUI:function(e,t){return t.impl=i,this._parent(e,t)}})}));