var rd=Object.defineProperty;var ld=(Y,g,o)=>g in Y?rd(Y,g,{enumerable:!0,configurable:!0,writable:!0,value:o}):Y[g]=o;var ae=(Y,g,o)=>ld(Y,typeof g!="symbol"?g+"":g,o);define("DS/SwymVuePublishForm/publish-form-vue-BKQGyVzh",["require","exports","DS/SwymVuePublishForm/vue.amd","DS/SwymVuePublishForm/VUEKIT.amd"],function(Y,g,o,Ce){"use strict";const _t=o.ref("");function Go(e){_t.value=e}function Yo(){if(!_t.value)throw new Error("Registry URL is not defined");return _t.value}const bt=o.ref("");function Ct(e){bt.value=e}function B(){if(!bt.value)throw new Error("Platform ID is not defined");return bt.value}var Qo=Object.defineProperty,Xo=(e,t,n)=>t in e?Qo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t,n)=>Xo(e,typeof t!="symbol"?t+"":t,n);const Ke=["trace","debug","log","info","warn","error"];function Ko(){return typeof window>"u"?!1:window.sessionStorage.getItem("DSY_SWYM_DEBUG")||!1}function Jo(){return typeof window>"u"?!1:window.localStorage.getItem("logger-debug")||!1}function Zo(){return typeof window>"u"?!1:new URL(window.location.href).searchParams.has("debug")}function Et(e){return typeof e=="string"?Ke.includes(e)?e:e!=="false":e}function yn(e){return typeof e=="boolean"?e?0:Ke.length:Ke.indexOf(e)}class qo{constructor(){q(this,"logLevelIndex",yn(!1)),q(this,"_log",(n,...s)=>{const a=this._getScope(n),i=this.emojis[n],r=this.styles[n];this._shouldLog(n)&&console[n](`${i} %c[${a}]`,r,...s)}),q(this,"emojis",{trace:"ðŸ§µ",debug:"ðŸ› ï¸",log:"ðŸ“‹",info:"ðŸ“¢",warn:"ðŸš§",error:"ðŸ”¥"}),q(this,"styles",{trace:"",debug:"color: white; background: #3d3d3d;",log:"color: black; background: #D5E8F2;",info:"color: black; background: #EDF6EB;",warn:"background: transparent;",error:"background: transparent;"}),q(this,"_getScope",n=>`LOGGER ${n.toUpperCase().padEnd(5," ")}`),q(this,"log",this._log.bind(this,"log")),q(this,"info",this._log.bind(this,"info")),q(this,"warn",this._log.bind(this,"warn")),q(this,"debug",this._log.bind(this,"debug")),q(this,"error",this._log.bind(this,"error")),q(this,"trace",this._log.bind(this,"trace"));const t=Et(Zo())||Et(Jo())||Et(Ko());this.logLevelIndex=yn(t)}_shouldLog(t){return Ke.indexOf(t)>=this.logLevelIndex}}const N=new qo,$o="AmdLoader/AmdLoader.js",es="bust=NO_CACHE_ID";let Je;const wn=[],gn=[];async function ts(){const e={DS:"."};let t={paths:{...e}},n=Promise.resolve({});for(;wn.length;)n=n.then(wn.pop());try{t=await n}catch(s){N.error("[RequireJS] Failed to load config:",s)}return t.paths={...t.paths,...e},t.urlArgs||(t.urlArgs=es),t}async function ns(){let e=Promise.resolve(void 0);for(;gn.length;)e=e.then(gn.pop());try{await e}catch(t){N.error('[RequireJS] Failed to run "after require setup" hooks:',t)}}function os(e){if(!window.require)throw new Error("window.require is not initialiazed");window.require.config(e),N.debug("[RequireJS] Set config:",e)}async function ss(e){if(typeof window.require=="function")return;const t=document.createElement("script"),n=new Promise((s,a)=>{t.onload=s,t.onerror=a});t.src=`${e.baseUrl??""}${$o}?${e.urlArgs}`,N.debug("[RequireJS] Download AMDLoader script: ",t.src),document.head.appendChild(t),await n}async function as(){if(Je)return Je;let e,t;Je=new Promise((n,s)=>{e=n,t=s}),N.debug("[RequireJS] init");try{const n=await ts();await ss(n),await os(n),await ns(),e==null||e()}catch{t==null||t()}return Je}async function Ee(e,t=!1){return await as(),new Promise((n,s)=>{var a,i;(i=(a=t&&window.top?window.top:window).require)==null||i.call(a,e,(...r)=>n(r),s)})}async function Se(e,t=!1){return(await Ee([e],t))[0]}async function St(e,t){if(!t)return St(e,B());const n=Yo();return await(await Se("DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient")).getServicesByPlatform({platforms:Array.isArray(t)?[...t]:[t],services:e,config:{url:n}})}async function Ze(e,t){const n=await Se("DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices");function s(a){return e?!!a[e]:!0}return new Promise((a,i)=>{n.getPlatformServices({...t,onComplete(r){if(!r)return i(new Error("Platform not found"));if(Array.isArray(r)){const l=r.filter(s);return l.length?a(l):i(new Error("Platform not found"))}return s(r)?a(r):i(new Error("Platform not found"))},onFailure:i})})}async function K(e,t){var n,s,a;if(!t)return K(e,B());const i=await St([e],t);return i.length&&((a=(s=(n=i[0])==null?void 0:n.services)==null?void 0:s.find(r=>r.id.toLowerCase()===e.toLowerCase()))==null?void 0:a.url)||""}var P=(e=>(e.AIAI="AIAssistantInfra",e.ANALYTICS="3danalytics",e.COMPASS="3DCompass",e.COMMENT="3DComment",e.DASHBOARD="3DDashboard",e.DRIVE="3DDrive",e.LEAN="3dlean",e.LLMINFERENCE="LLMINFERENCE",e.MESSAGING="3DMessaging",e.ODE="OfficeDocumentEditor",e.ORGANIZATION="3DOrganization",e.PASSPORT="3DPassport",e.RTCOEDIT="RTCoedit",e.SEARCH="3DSearch",e.SOCIAL_MEDIA="SocialMedia",e.SPACE="3DSpace",e.SWYM="3DSwym",e.TAGGER="6WTAG",e.USERS_GROUP="UsersGroup",e))(P||{});class _n extends Error{constructor(n,s,a){const i=n.status||n.status===0?n.status:"",r=n.statusText||"",l=`${i} ${r}`.trim(),c=l?`status code ${l}`:"an unknown error";super(`Request failed with ${c}: ${s.method} ${s.url}`);ae(this,"response");ae(this,"request");ae(this,"options");this.name="HTTPError",this.response=n,this.request=s,this.options=a}}class bn extends Error{constructor(n){super(`Request timed out: ${n.method} ${n.url}`);ae(this,"request");this.name="TimeoutError",this.request=n}}const Re=e=>e!==null&&typeof e=="object",qe=(...e)=>{for(const t of e)if((!Re(t)||Array.isArray(t))&&t!==void 0)throw new TypeError("The `options` argument must be an object");return kt({},...e)},Cn=(e={},t={})=>{const n=new globalThis.Headers(e),s=t instanceof globalThis.Headers,a=new globalThis.Headers(t);for(const[i,r]of a.entries())s&&r==="undefined"||r===void 0?n.delete(i):n.set(i,r);return n};function $e(e,t,n){return Object.hasOwn(t,n)&&t[n]===void 0?[]:kt(e[n]??[],t[n]??[])}const En=(e={},t={})=>({beforeRequest:$e(e,t,"beforeRequest"),beforeRetry:$e(e,t,"beforeRetry"),afterResponse:$e(e,t,"afterResponse"),beforeError:$e(e,t,"beforeError")}),kt=(...e)=>{let t={},n={},s={};for(const a of e)if(Array.isArray(a))Array.isArray(t)||(t=[]),t=[...t,...a];else if(Re(a)){for(let[i,r]of Object.entries(a))Re(r)&&i in t&&(r=kt(t[i],r)),t={...t,[i]:r};Re(a.hooks)&&(s=En(s,a.hooks),t.hooks=s),Re(a.headers)&&(n=Cn(n,a.headers),t.headers=n)}return t},is=(()=>{let e=!1,t=!1;const n=typeof globalThis.ReadableStream=="function",s=typeof globalThis.Request=="function";if(n&&s)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(a){if(a instanceof Error&&a.message==="unsupported BodyInit type")return!1;throw a}return e&&!t})(),rs=typeof globalThis.AbortController=="function",ls=typeof globalThis.ReadableStream=="function",cs=typeof globalThis.FormData=="function",Sn=["get","post","put","patch","head","delete"],ds={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},At=2147483647,kn=Symbol("stop"),us={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},fs={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},ps=e=>Sn.includes(e)?e.toUpperCase():e,An={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},hs=(e={})=>{if(typeof e=="number")return{...An,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...An,...e}};async function ms(e,t,n,s){return new Promise((a,i)=>{const r=setTimeout(()=>{n&&n.abort(),i(new bn(e))},s.timeout);s.fetch(e,t).then(a).catch(i).then(()=>{clearTimeout(r)})})}async function vs(e,{signal:t}){return new Promise((n,s)=>{t&&(t.throwIfAborted(),t.addEventListener("abort",a,{once:!0}));function a(){clearTimeout(i),s(t.reason)}const i=setTimeout(()=>{t==null||t.removeEventListener("abort",a),n()},e)})}const ys=(e,t)=>{const n={};for(const s in t)!(s in fs)&&!(s in us)&&!(s in e)&&(n[s]=t[s]);return n};class et{constructor(t,n={}){ae(this,"request");ae(this,"abortController");ae(this,"_retryCount",0);ae(this,"_input");ae(this,"_options");var s,a;if(this._input=t,this._options={...n,headers:Cn(this._input.headers,n.headers),hooks:En({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},n.hooks),method:ps(n.method??this._input.method),prefixUrl:String(n.prefixUrl||""),retry:hs(n.retry),throwHttpErrors:n.throwHttpErrors!==!1,timeout:n.timeout??1e4,fetch:n.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(rs){this.abortController=new globalThis.AbortController;const i=this._options.signal??this._input.signal;i!=null&&i.aborted&&this.abortController.abort(i==null?void 0:i.reason),i==null||i.addEventListener("abort",()=>{this.abortController.abort(i.reason)}),this._options.signal=this.abortController.signal}if(is&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=((a=(s=this._options).stringifyJson)==null?void 0:a.call(s,this._options.json))??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const r="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),l=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,r);(cs&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(l,{...this.request}),this._options)}}static create(t,n){const s=new et(t,n),a=async()=>{if(typeof s._options.timeout=="number"&&s._options.timeout>At)throw new RangeError(`The \`timeout\` option cannot be greater than ${At}`);await Promise.resolve();let l=await s._fetch();for(const c of s._options.hooks.afterResponse){const f=await c(s.request,s._options,s._decorateResponse(l.clone()));f instanceof globalThis.Response&&(l=f)}if(s._decorateResponse(l),!l.ok&&s._options.throwHttpErrors){let c=new _n(l,s.request,s._options);for(const f of s._options.hooks.beforeError)c=await f(c);throw c}if(s._options.onDownloadProgress){if(typeof s._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!ls)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return s._stream(l.clone(),s._options.onDownloadProgress)}return l},r=s._options.retry.methods.includes(s.request.method.toLowerCase())?s._retry(a):a();for(const[l,c]of Object.entries(ds))r[l]=async()=>{s.request.headers.set("accept",s.request.headers.get("accept")||c);const f=await r;if(l==="json"){if(f.status===204||(await f.clone().arrayBuffer()).byteLength===0)return"";if(n.parseJson)return n.parseJson(await f.text())}return f[l]()};return r}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount>this._options.retry.limit||t instanceof bn)throw t;if(t instanceof _n){if(!this._options.retry.statusCodes.includes(t.response.status))throw t;const s=t.response.headers.get("Retry-After")??t.response.headers.get("RateLimit-Reset")??t.response.headers.get("X-RateLimit-Reset")??t.response.headers.get("X-Rate-Limit-Reset");if(s&&this._options.retry.afterStatusCodes.includes(t.response.status)){let a=Number(s)*1e3;Number.isNaN(a)?a=Date.parse(s)-Date.now():a>=Date.parse("2024-01-01")&&(a-=Date.now());const i=this._options.retry.maxRetryAfter??a;return a<i?a:i}if(t.response.status===413)throw t}const n=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,n)}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(n){const s=Math.min(this._calculateRetryDelay(n),At);if(this._retryCount<1)throw n;await vs(s,{signal:this._options.signal});for(const a of this._options.hooks.beforeRetry)if(await a({request:this.request,options:this._options,error:n,retryCount:this._retryCount})===kn)return;return this._retry(t)}}async _fetch(){for(const s of this._options.hooks.beforeRequest){const a=await s(this.request,this._options);if(a instanceof Request){this.request=a;break}if(a instanceof Response)return a}const t=ys(this.request,this._options),n=this.request;return this.request=n.clone(),this._options.timeout===!1?this._options.fetch(n,t):ms(n,t,this.abortController,this._options)}_stream(t,n){const s=Number(t.headers.get("content-length"))||0;let a=0;return t.status===204?(n&&n({percent:1,totalBytes:s,transferredBytes:a},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(i){const r=t.body.getReader();n&&n({percent:0,transferredBytes:0,totalBytes:s},new Uint8Array);async function l(){const{done:c,value:f}=await r.read();if(c){i.close();return}if(n){a+=f.byteLength;const u=s===0?0:a/s;n({percent:u,transferredBytes:a,totalBytes:s},f)}i.enqueue(f),await l()}await l()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}/*! MIT License Â© Sindre Sorhus */const Tt=e=>{const t=(n,s)=>et.create(n,qe(e,s));for(const n of Sn)t[n]=(s,a)=>et.create(s,qe(e,a,{method:n}));return t.create=n=>Tt(qe(n)),t.extend=n=>(typeof n=="function"&&(n=n(e??{})),Tt(qe(e,n))),t.stop=kn,t},ws=Tt();async function Tn(e,{redirectToPassportLogin:t}={redirectToPassportLogin:!0}){const n=await K(P.PASSPORT);if(window.location.href.startsWith(n))return;const s=new URL(`${n}/logout`),a=window.location.href;if(t){const i=new URL(`${n}/login`);i.searchParams.set("service",a),s.searchParams.set("redirect",btoa(i.toString()))}else s.searchParams.set("service",a);window.location.href=s.toString()}const Pn=["ERROR_ACCESS_FORBIDDEN_LICENSE_EXPIRED","ERROR_ACCESS_FORBIDDEN_LICENSE_FULLY_CONSUMED","ERROR_LICENSING_EXTENSION_KO","ERROR_ACCESS_NO_LICENSE","ERROR_ACCESS_FORBIDDEN_NO_LICENSE"],xn="GLOBAL_ERROR_EVENT",gs="invalid_grant",_s=400;function Oe(e,t){return async(n,s,a)=>{if(a.status!==_s)return;const i=await a.json();if(i.error!==gs)return;const{access_token:r}=await t(i.x3ds_auth_url,{handlePassportExpiredError:s.handlePassportExpiredError,headers:{"X-Request-Id":""}}).json(),l=new URL(n.url).searchParams;return l.set("ticket",r),s.json&&delete s.body,e(n.url,{...s,searchParams:l})}}const bs="invalid_client",Cs=401,Nn=async(e,t,n)=>{t.handlePassportExpiredError===!1||n.status!==Cs||(await n.json()).error!==bs||Tn()},In=403,Es="ERROR_ACCESS_FORBIDDEN_NOT_ACTIVE";async function Rn(e){var t,n;let s,a;try{const{response:i}=e,l=((t=i.headers.get("content-type"))==null?void 0:t.includes("application/json"))?await i.clone().json():null;s=(n=e.response)==null?void 0:n.status,a=l==null?void 0:l.errorcode}catch{}return{errorCode:a,errorStatus:s}}const On=async e=>{const{errorCode:t,errorStatus:n}=await Rn(e);if(n!==In||t!==Es)return e;const s=window.btoa(window.location.href).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,""),a=B(),r=`${await K(P.COMPASS,a)}/resources/AppsMngtSynchro/api/v1?service=3DSWYM&url=${s}&platform=${a}`;return window.location.href=r,e},Bn=async e=>{const{errorCode:t,errorStatus:n}=await Rn(e);return n!==In||!t||!Pn.includes(t)||window.postMessage({event:xn,payload:{code:t,status:n}}),e},ve="X-Request-ID",Dn=e=>{e.headers.has(ve)||e.headers.append(ve,crypto.randomUUID()),e.headers.get(ve)||e.headers.delete(ve)},Pt=e=>{e.headers.has(ve)&&e.headers.delete(ve)},$=ws.extend({credentials:"include",redirect:"error",headers:{"x-requested-with":"XMLHttpRequest","content-type":"application/json;charset=UTF-8"},timeout:25e3,hooks:{beforeRequest:[Dn],afterResponse:[Nn]}}),ue=new Map,xt=5e3;function Nt(e,t){return e.then(n=>(t.keepCacheOnSuccess||(t.timeMs?setTimeout(()=>{N.debug(`[decorator cache] [${t.key}] cache timeout`),ue.delete(t.key)},t.timeMs):(N.debug(`[decorator cache] [${t.key}] cache timeout`),ue.delete(t.key))),N.debug(`[decorator cache] [${t.key}] promise succeeded`),n)).catch(n=>{throw t.keepCacheOnError||(N.debug(`[decorator cache] [${t.key}] promise failed, clean the cache`),ue.delete(t.key)),n})}function Q(e,t,n=xt){if(!ue.get(e)||!n){N.debug(`[decorator cache] [${e}] cache missing, create it`);const s=Nt(t(),{key:e,timeMs:n});ue.set(e,s)}return N.debug(`[decorator cache] [${e}] cache exists`),ue.get(e)}function Mn(e,t,n=xt){const s=Nt(t(),{key:e,timeMs:n});return ue.set(e,s),Nt(s,{key:e,timeMs:n})}function tt(e,t,n=xt){return Mn(e,()=>Promise.resolve(t),n)}const Be=new Map;function It(e,t){return Q(`csrf-${e}`,()=>t("/api/session/info").json().then(n=>n.csrfToken),1)}async function Rt(e){return e.status!==403?!1:(await e.clone().json()).errorcode==="ERROR_ACCESS_FORBIDDEN_CSRF_KO"}const Vn="x-ds-iam-csrftoken";async function Ss(e,t){return(await t("/api/authenticated/user/fields")).headers.get(Vn)}async function ks(e){return e.status!==403?!1:await e.clone().text()==="The CSRF token cannot be validated"}const Un="x-ds-csrftoken";async function As(e,t){return(await t("/resources/3ddrive/v1/bos/DSROOT")).headers.get(Un)}async function Ts(e){return e.status===403}const nt={[P.PASSPORT]:{header:Vn,fetch:Ss,checkIsCsrfError:ks},[P.DRIVE]:{header:Un,fetch:As,checkIsCsrfError:Ts},[P.SPACE]:{header:"x-ds-csrftoken",fetch:void 0,checkIsCsrfError:void 0},[P.SWYM]:{header:"x-ds-swym-csrftoken",fetch:It,checkIsCsrfError:Rt},[P.COMMENT]:{header:"x-ds-swym-csrftoken",fetch:It,checkIsCsrfError:Rt},[P.SEARCH]:{header:"x-ds-swym-csrftoken",fetch:It,checkIsCsrfError:Rt}};function Ot(e,t){Be.set(e,t||sessionStorage.getItem(`${e}_csrf`)||""),t&&sessionStorage.setItem(`${e}_csrf`,t)}function Bt(e){return async(t,n)=>{const s=Be.get(e);if(!s)return;const a=nt[e].header;t.headers.set(a,s),n.headers.set(a,s)}}function Ps(e,t){if(t.status<300){const n=t.headers.get(nt[e].header);n&&Ot(e,n)}}async function xs(e,t){var n,s;try{const a=await((s=(n=nt[e]).fetch)==null?void 0:s.call(n,e,t));a&&Ot(e,a)}catch(a){N.error(`Failed to fetch CSRF for ${e}`,a)}}function ot(e,t){return async(n,s,a)=>{var i,r;if(Ps(e,a),!await((r=(i=nt[e]).checkIsCsrfError)==null?void 0:r.call(i,a)))return;await xs(e,t),s.json&&delete s.body;const{Preferences:c}=await new Promise((u,d)=>Y(["./index-DGi1a2At"],u,d)),{CommonRequest:f}=await new Promise((u,d)=>Y(["./index-DP6YFOl-"],u,d));if(c.isNativeApp()&&f.checkHasProxyPath(n.url)){const d=new URL(n.url).searchParams.get("url");if(d)return t(d,s)}return t(n,s)}}function De(e,t=""){return async(n,s)=>{const{CommonRequest:a}=await new Promise((u,d)=>Y(["./index-DP6YFOl-"],u,d)),{Preferences:i}=await new Promise((u,d)=>Y(["./index-DGi1a2At"],u,d));if(a.checkHasProxyPath(n.url))return;const r=new Request(await K(e)||t).url;if(n.url.startsWith(r))return i.isNativeApp()?await a.request(n.url,{...s,proxy:"passport"},n):void 0;const l=new URL(n.url),c=`${r}${l.pathname}${l.search}`.replace(/([^:]\/)\/+/g,"$1"),f=new Request(c,s);return i.isNativeApp()?await a.request(c,{...s,proxy:"passport"},f):f}}function Ln(e,t="i18n!DS/SwymVueComponents/assets/nls/",n){const s=o.ref({}),a=new Promise(async r=>{try{const l=await Se(`${t}${e}`);s.value=Object.assign(o.unref(s),l)}catch{N.error(`[TRANSLATION] Error loading nls ${t}${e}`)}r(s.value)});function i(r,l={}){if(!r)return"";let c=o.unref(s)[r];return Object.entries(l).forEach(([f,u])=>{c=c==null?void 0:c.replace(`{${f}}`,u)}),c||r}return{i18n:s,$i18n:i,promise:a}}const Ns={"2xs":"300px",xs:"380px",tiny:"465px",sm:"640px",md:"768px","2md":"960px",lg:"1024px",xl:"1280px","2xl":"1536px","3xl":"1920px"},Is=(()=>{const e={};for(const[t,n]of Object.entries(Ns))e[t]=Number.parseInt(n,10);return Object.freeze(e)})();function Rs(){var e;try{return(e=globalThis==null?void 0:globalThis.document)==null?void 0:e.cookie.split(";").map(t=>t.split("=")).reduce((t,[n,s])=>(t[decodeURIComponent(n==null?void 0:n.trim())]=decodeURIComponent(s==null?void 0:s.trim()),t),{})}catch{return{}}}function Os(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function Bs(){const e=navigator.userAgent.toLowerCase();return/iphone|ipad/i.test(e)||/safari/.test(e)&&!/chrome/.test(e)&&Os()}function Ds(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||Bs()}function Fn(e){return new DOMParser().parseFromString(e||"","text/html").documentElement.textContent||""}function Dt(e){return o.getCurrentScope()?(o.onScopeDispose(e),!0):!1}function ie(e){return typeof e=="function"?e():o.unref(e)}const jn=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ms=e=>e!=null,Wn=()=>{};function Vs(e,t){var n;if(typeof e=="number")return e+t;const s=((n=e.match(/^-?\d+\.?\d*/))==null?void 0:n[0])||"",a=e.slice(s.length),i=Number.parseFloat(s)+t;return Number.isNaN(i)?e:i+a}function zn(e){return o.getCurrentInstance()}function Us(...e){if(e.length!==1)return o.toRef(...e);const t=e[0];return typeof t=="function"?o.readonly(o.customRef(()=>({get:t,set:Wn}))):o.ref(t)}function Ls(e,t){zn()&&o.onBeforeUnmount(e,t)}function Fs(e,t=!0,n){zn()?o.onMounted(e,n):t?e():o.nextTick(e)}function js(e=!1,t={}){const{truthyValue:n=!0,falsyValue:s=!1}=t,a=o.isRef(e),i=o.ref(e);function r(l){if(arguments.length)return i.value=l,i.value;{const c=ie(n);return i.value=i.value===c?ie(s):c,i.value}}return a?r:[i,r]}function Mt(e,t,n){return o.watch(e,(a,i,r)=>{a&&t(a,i,r)},{...n,once:!1})}function Ws(e,t,n){let s;o.isRef(n)?s={evaluating:n}:s={};const{lazy:a=!1,evaluating:i=void 0,shallow:r=!0,onError:l=Wn}=s,c=o.ref(!a),f=r?o.shallowRef(t):o.ref(t);let u=0;return o.watchEffect(async d=>{if(!c.value)return;u++;const h=u;let v=!1;i&&Promise.resolve().then(()=>{i.value=!0});try{const m=await e(p=>{d(()=>{i&&(i.value=!1),v||p()})});h===u&&(f.value=m)}catch(m){l(m)}finally{i&&h===u&&(i.value=!1),v=!0}}),a?o.computed(()=>(c.value=!0,f.value)):f}const Me=jn?window:void 0,zs=jn?window.document:void 0;function ye(e){var t;const n=ie(e);return(t=n==null?void 0:n.$el)!=null?t:n}function Hs(){const e=o.ref(!1),t=o.getCurrentInstance();return t&&o.onMounted(()=>{e.value=!0},t),e}function Vt(e){const t=Hs();return o.computed(()=>(t.value,!!e()))}function Gs(e,t,n={}){const{window:s=Me,...a}=n;let i;const r=Vt(()=>s&&"MutationObserver"in s),l=()=>{i&&(i.disconnect(),i=void 0)},c=o.computed(()=>{const h=ie(e),v=(Array.isArray(h)?h:[h]).map(ye).filter(Ms);return new Set(v)}),f=o.watch(()=>c.value,h=>{l(),r.value&&h.size&&(i=new MutationObserver(t),h.forEach(v=>i.observe(v,a)))},{immediate:!0,flush:"post"}),u=()=>i==null?void 0:i.takeRecords(),d=()=>{f(),l()};return Dt(d),{isSupported:r,stop:d,takeRecords:u}}function Ve(e,t={}){const{window:n=Me}=t,s=Vt(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let a;const i=o.ref(!1),r=f=>{i.value=f.matches},l=()=>{a&&("removeEventListener"in a?a.removeEventListener("change",r):a.removeListener(r))},c=o.watchEffect(()=>{s.value&&(l(),a=n.matchMedia(ie(e)),"addEventListener"in a?a.addEventListener("change",r):a.addListener(r),i.value=a.matches)});return Dt(()=>{c(),l(),a=void 0}),i}function Ys(e,t={}){function n(u,d){let h=ie(e[ie(u)]);return d!=null&&(h=Vs(h,d)),typeof h=="number"&&(h=`${h}px`),h}const{window:s=Me,strategy:a="min-width"}=t;function i(u){return s?s.matchMedia(u).matches:!1}const r=u=>Ve(()=>`(min-width: ${n(u)})`,t),l=u=>Ve(()=>`(max-width: ${n(u)})`,t),c=Object.keys(e).reduce((u,d)=>(Object.defineProperty(u,d,{get:()=>a==="min-width"?r(d):l(d),enumerable:!0,configurable:!0}),u),{});function f(){const u=Object.keys(e).map(d=>[d,r(d)]);return o.computed(()=>u.filter(([,d])=>d.value).map(([d])=>d))}return Object.assign(c,{greaterOrEqual:r,smallerOrEqual:l,greater(u){return Ve(()=>`(min-width: ${n(u,.1)})`,t)},smaller(u){return Ve(()=>`(max-width: ${n(u,-.1)})`,t)},between(u,d){return Ve(()=>`(min-width: ${n(u)}) and (max-width: ${n(d,-.1)})`,t)},isGreater(u){return i(`(min-width: ${n(u,.1)})`)},isGreaterOrEqual(u){return i(`(min-width: ${n(u)})`)},isSmaller(u){return i(`(max-width: ${n(u,-.1)})`)},isSmallerOrEqual(u){return i(`(max-width: ${n(u)})`)},isInBetween(u,d){return i(`(min-width: ${n(u)}) and (max-width: ${n(d,-.1)})`)},current:f,active(){const u=f();return o.computed(()=>u.value.length===0?"":u.value.at(-1))}})}function Qs(e,t,n={}){const{window:s=Me,...a}=n;let i;const r=Vt(()=>s&&"ResizeObserver"in s),l=()=>{i&&(i.disconnect(),i=void 0)},c=o.computed(()=>{const d=ie(e);return Array.isArray(d)?d.map(h=>ye(h)):[ye(d)]}),f=o.watch(c,d=>{if(l(),r.value&&s){i=new ResizeObserver(t);for(const h of d)h&&i.observe(h,a)}},{immediate:!0,flush:"post"}),u=()=>{l(),f()};return Dt(u),{isSupported:r,stop:u}}function Xs(e,t={width:0,height:0},n={}){const{window:s=Me,box:a="content-box"}=n,i=o.computed(()=>{var d,h;return(h=(d=ye(e))==null?void 0:d.namespaceURI)==null?void 0:h.includes("svg")}),r=o.ref(t.width),l=o.ref(t.height),{stop:c}=Qs(e,([d])=>{const h=a==="border-box"?d.borderBoxSize:a==="content-box"?d.contentBoxSize:d.devicePixelContentBoxSize;if(s&&i.value){const v=ye(e);if(v){const m=v.getBoundingClientRect();r.value=m.width,l.value=m.height}}else if(h){const v=Array.isArray(h)?h:[h];r.value=v.reduce((m,{inlineSize:p})=>m+p,0),l.value=v.reduce((m,{blockSize:p})=>m+p,0)}else r.value=d.contentRect.width,l.value=d.contentRect.height},n);Fs(()=>{const d=ye(e);d&&(r.value="offsetWidth"in d?d.offsetWidth:t.width,l.value="offsetHeight"in d?d.offsetHeight:t.height)});const f=o.watch(()=>ye(e),d=>{r.value=d?t.width:0,l.value=d?t.height:0});function u(){c(),f()}return{width:r,height:l,stop:u}}function Ks(e=null,t={}){var n,s,a;const{document:i=zs,restoreOnUnmount:r=d=>d}=t,l=(n=i==null?void 0:i.title)!=null?n:"",c=Us((s=e??(i==null?void 0:i.title))!=null?s:null),f=e&&typeof e=="function";function u(d){if(!("titleTemplate"in t))return d;const h=t.titleTemplate||"%s";return typeof h=="function"?h(d):ie(h).replace(/%s/g,d)}return o.watch(c,(d,h)=>{d!==h&&i&&(i.title=u(typeof d=="string"?d:""))},{immediate:!0}),t.observe&&!t.titleTemplate&&i&&!f&&Gs((a=i.head)==null?void 0:a.querySelector("title"),()=>{i&&i.title!==c.value&&(c.value=u(i.title))},{childList:!0}),Ls(()=>{if(r){const d=r(l,c.value||"");d!=null&&i&&(i.title=d)}}),c}const Hn=o.ref(""),Js=o.ref("");Ks(Hn),o.readonly(Hn),o.readonly(Js);var Zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function we(e,t){var n,s;if(typeof t=="function")s=t(e),s!==void 0&&(e=s);else if(Array.isArray(t))for(n=0;n<t.length;n++)s=t[n](e),s!==void 0&&(e=s);return e}function qs(e,t){return e[0]==="-"&&Array.isArray(t)&&/^-\d+$/.test(e)?t.length+parseInt(e,10):e}function $s(e){return/^\d+$/.test(e)}function st(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ue(e){return Object(e)===e}function at(e){return Object.keys(e).length===0}var ea=["__proto__","prototype","constructor"],ta=function(e){return ea.indexOf(e)===-1};function it(e,t){e.indexOf("[")>=0&&(e=e.replace(/\[/g,t).replace(/]/g,""));var n=e.split(t),s=n.filter(ta);if(s.length!==n.length)throw Error("Refusing to update blacklisted property "+e);return n}var Yn=Object.prototype.hasOwnProperty;function T(e,t,n,s){if(!(this instanceof T))return new T(e,t,n,s);typeof t>"u"&&(t=!1),typeof n>"u"&&(n=!0),typeof s>"u"&&(s=!0),this.separator=e||".",this.override=t,this.useArray=n,this.useBrackets=s,this.keepArray=!1,this.cleanup=[]}var ke=new T(".",!1,!0,!0);function ee(e){return function(){return ke[e].apply(ke,arguments)}}T.prototype._fill=function(e,t,n,s){var a=e.shift();if(e.length>0){if(t[a]=t[a]||(this.useArray&&$s(e[0])?[]:{}),!Ue(t[a]))if(this.override)t[a]={};else{if(!(Ue(n)&&at(n)))throw new Error("Trying to redefine `"+a+"` which is a "+typeof t[a]);return}this._fill(e,t[a],n,s)}else{if(!this.override&&Ue(t[a])&&!at(t[a])){if(!(Ue(n)&&at(n)))throw new Error("Trying to redefine non-empty obj['"+a+"']");return}t[a]=we(n,s)}},T.prototype.object=function(e,t){var n=this;return Object.keys(e).forEach(function(s){var a=t===void 0?null:t[s],i=it(s,n.separator).join(n.separator);i.indexOf(n.separator)!==-1?(n._fill(i.split(n.separator),e,e[s],a),delete e[s]):e[s]=we(e[s],a)}),e},T.prototype.str=function(e,t,n,s){var a=it(e,this.separator).join(this.separator);return e.indexOf(this.separator)!==-1?this._fill(a.split(this.separator),n,t,s):n[e]=we(t,s),n},T.prototype.pick=function(e,t,n,s){var a,i,r,l,c;for(i=it(e,this.separator),a=0;a<i.length;a++)if(l=qs(i[a],t),t&&typeof t=="object"&&l in t){if(a===i.length-1)return n?(r=t[l],s&&Array.isArray(t)?t.splice(l,1):delete t[l],Array.isArray(t)&&(c=i.slice(0,-1).join("."),this.cleanup.indexOf(c)===-1&&this.cleanup.push(c)),r):t[l];t=t[l]}else return;return n&&Array.isArray(t)&&(t=t.filter(function(f){return f!==void 0})),t},T.prototype.delete=function(e,t){return this.remove(e,t,!0)},T.prototype.remove=function(e,t,n){var s;if(this.cleanup=[],Array.isArray(e)){for(s=0;s<e.length;s++)this.pick(e[s],t,!0,n);return n||this._cleanup(t),t}else return this.pick(e,t,!0,n)},T.prototype._cleanup=function(e){var t,n,s,a;if(this.cleanup.length){for(n=0;n<this.cleanup.length;n++)s=this.cleanup[n].split("."),a=s.splice(0,-1).join("."),t=a?this.pick(a,e):e,t=t[s[0]].filter(function(i){return i!==void 0}),this.set(this.cleanup[n],t,e);this.cleanup=[]}},T.prototype.del=T.prototype.remove,T.prototype.move=function(e,t,n,s,a){return typeof s=="function"||Array.isArray(s)?this.set(t,we(this.pick(e,n,!0),s),n,a):(a=s,this.set(t,this.pick(e,n,!0),n,a)),n},T.prototype.transfer=function(e,t,n,s,a,i){return typeof a=="function"||Array.isArray(a)?this.set(t,we(this.pick(e,n,!0),a),s,i):(i=a,this.set(t,this.pick(e,n,!0),s,i)),s},T.prototype.copy=function(e,t,n,s,a,i){return typeof a=="function"||Array.isArray(a)?this.set(t,we(JSON.parse(JSON.stringify(this.pick(e,n,!1))),a),s,i):(i=a,this.set(t,this.pick(e,n,!1),s,i)),s},T.prototype.set=function(e,t,n,s){var a,i,r,l;if(typeof t>"u")return n;for(r=it(e,this.separator),a=0;a<r.length;a++){if(l=r[a],a===r.length-1)if(s&&st(t)&&st(n[l]))for(i in t)Yn.call(t,i)&&(n[l][i]=t[i]);else if(s&&Array.isArray(n[l])&&Array.isArray(t))for(var c=0;c<t.length;c++)n[r[a]].push(t[c]);else n[l]=t;else(!Yn.call(n,l)||!st(n[l])&&!Array.isArray(n[l]))&&(/^\d+$/.test(r[a+1])?n[l]=[]:n[l]={});n=n[l]}return n},T.prototype.transform=function(e,t,n){return t=t||{},n=n||{},Object.keys(e).forEach((function(s){this.set(e[s],this.pick(s,t),n)}).bind(this)),n},T.prototype.dot=function(e,t,n){t=t||{},n=n||[];var s=Array.isArray(e);return Object.keys(e).forEach((function(a){var i=s&&this.useBrackets?"["+a+"]":a;if(Ue(e[a])&&(st(e[a])&&!at(e[a])||Array.isArray(e[a])&&!this.keepArray&&e[a].length!==0))if(s&&this.useBrackets){var r=n[n.length-1]||"";return this.dot(e[a],t,n.slice(0,-1).concat(r+i))}else return this.dot(e[a],t,n.concat(i));else s&&this.useBrackets?t[n.join(this.separator).concat("["+a+"]")]=e[a]:t[n.concat(i).join(this.separator)]=e[a]}).bind(this)),t},T.pick=ee("pick"),T.move=ee("move"),T.transfer=ee("transfer"),T.transform=ee("transform"),T.copy=ee("copy"),T.object=ee("object"),T.str=ee("str"),T.set=ee("set"),T.delete=ee("delete"),T.del=T.remove=ee("remove"),T.dot=ee("dot"),["override","overwrite"].forEach(function(e){Object.defineProperty(T,e,{get:function(){return ke.override},set:function(t){ke.override=!!t}})}),["useArray","keepArray","useBrackets"].forEach(function(e){Object.defineProperty(T,e,{get:function(){return ke[e]},set:function(t){ke[e]=t}})}),T._process=we;var na=T;const ge=Gn(na),oa=[["ds6w:resourceUid","uid"],["firstName","first_name"],["lastName","last_name"],["ut_state","user_state"]];function Ut(e={}){const t=e;return oa.forEach(([n,s])=>{ge.move(n,s,e)}),t.displayName||(t.displayName=e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.fullName||e.login||e.username||""),t}var C=(e=>(e.Post="post",e.Idea="idea",e.Question="iquestion",e.Media="media",e.Conference="conference",e.Survey="survey",e.Wedo="wedo",e.Wiki="wiki",e.WikiTree="wikitree",e.DerivedPost="derivedpost",e.DerivedIdea="derivedidea",e.Rituals="conferencetemplate",e.Streaming="meetingstreaming",e))(C||{}),Qn=(e=>(e.POST="Post",e.MEDIA="RichMedia",e.QUESTION="Question",e.WIKI="WikitreePage",e.IDEA="Idea",e.COMMUNITY="Community",e))(Qn||{}),rt=(e=>(e.Answered="Answered",e.Validated="Validated",e.NotAnswered="Unanswered",e))(rt||{}),te=(e=>(e.Published="Created",e.Commented="Commented",e.Answered="Answered",e.Revised="Updated",e.Edited="Edited",e.Ended="Ended",e.Started="Started",e.StatusChanged="Status Changed",e.Validated="Answer Validated",e))(te||{});function Xn(e,t={}){const n={communitypost:C.Post,media:C.Media,qnaquestion:C.Question,qnaanswer:C.Question,idea:C.Idea,wikitree:C.Wiki,wedo:C.Wedo,dsxplan:C.Wedo,uuid:C.Wedo,conference:C.Conference,survey:C.Survey},[s]=e.split(":").splice(-2,1);return n[s]}function sa(e,t={}){return{post:C.Post,media:C.Media,question:C.Question,iquestion:C.Question,ideation:C.Idea,idea:C.Idea}[e]}const aa=[["_community.id","community_id"],["_community.subject6wuri","community_subject_uri"],["_community.uri","community_subject_uri"],["container_uri","community_subject_uri"],["_community.community_type","community_type"],["_community.title","community_title"],["preview_original_width","preview.width"],["preview_original_height","preview.height"],["preview_media_processing_version","preview.processing_version"],["preview_media_processing_status","preview.status"],["preview_media_type","preview.type"],["media_type","preview.type"],["preview_media_file_ext","preview.media_file_ext"],["preview_fingerprint","preview.preview_fingerprint"],["thumbnail_subject6wuri","thumbnail_id"],["thumbnail_id","preview.subject_uri"],["status.id","status_id"],["status.color","status_color"],["status.title","status_title"]],ia=[["model_id","id"],["subject6wuri","subject_uri"],["publish_date","published_at"],["pubdate","published_at"],["creation_date","created_at"],["crdate","created_at"],["update","updated_at"],["modification_date","updated_at"],["moderation_date","moderated_at"],["body","description"],["question","description"],["message","description"],["container","_community"],["thumbnailsInfos","thumbnails_infos"],["views","stats_viewed"]],ra=[["preview_original_width","width"],["preview_original_height","height"],["preview_media_processing_version","processing_version"],["preview_media_processing_status","status"]],la=[["media_type","type"]];function ne(e){return e&&!e.includes("T")&&!e.endsWith("Z")&&!e.startsWith("0000")?new Date(`${e.split(" ").join("T")}Z`).toISOString():e&&e.startsWith("0000")?"":e??""}function Lt(e){return{...e,result:ca(e.result)}}function ca(e){var n;const t={...e};return ia.forEach(([s,a])=>{ge.move(s,a,t)}),aa.forEach(([s,a])=>{ge.copy(s,a,t,t)}),t.created_at=ne(t.created_at),t.updated_at=ne(t.updated_at),t.moderated_at=ne(t.moderated_at),t.published_at=ne(t.published_at),t.model=Xn(t.subject_uri,{derived_type:t.derived_type}),t.author&&(t.author=Ut(e.author)),t.published===void 0&&(t.published=!0),t.publication_state==="DRAFT"&&(t.published=!1),t.model===C.Media&&(ra.forEach(([s,a])=>{ge.move(s,a,t)}),la.forEach(([s,a])=>{ge.copy(s,a,t,t)})),((n=e._community)==null?void 0:n.community_type)==="externaldm"&&(t.community_type="dm"),!t.community_subject_uri&&t.community_id&&(t.community_subject_uri=e.community_id),["visibility","published"].forEach(s=>{Object.prototype.hasOwnProperty.call(t,s)&&typeof t[s]=="string"&&(t[s]=Number.parseInt(t[s],10))}),["published"].forEach(s=>{Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=!!t[s])}),t}var oe=(e=>(e.Published="swym:eventAction.swym_event_action_publish",e.Commented="swym:eventAction.swym_event_action_comment",e.Answered="swym:eventAction.swym_event_action_answer",e.Revised="swym:eventAction.swym_event_action_edit_wiki",e.Edited="swym:eventAction.swym_event_action_edit",e.Ended="swym:eventAction.swym_event_action_survey_closed",e.Started="swym:eventAction.swym_event_action_survey_opened",e.StatusChanged="swym:eventAction.swym_event_action_change_status",e.Validated="swym:eventAction.swym_event_action_validate",e))(oe||{});function da(e){return{[oe.Published]:te.Published,[oe.Commented]:te.Commented,[oe.Answered]:te.Answered,[oe.Revised]:te.Revised,[oe.Edited]:te.Edited,[oe.Ended]:te.Ended,[oe.Started]:te.Started,[oe.StatusChanged]:te.StatusChanged,[oe.Validated]:te.Validated}[e]||e}function Ft(e){return e.hits.map(t=>Object.fromEntries(t.metas.map(n=>[n.name,n.value])))}const ua=e=>Ft(e).map(s=>({id:s.id,subject_uri:s.ds6w_58_resourceUid||`${s.ds6w_58_containerUid}:${s.resourceid}`,created_at:ne(s.crdate),updated_at:ne(s.update)})),jt=e=>{const t=Ft(e),n=ua(e),s={posts:C.Post,media:C.Media,iquestion:C.Question,"iquestion question":C.Question,idea:C.Idea};return t.map((i,r)=>{const l=s[(i.swym_source||"").toLowerCase()]||C.Post,c={...n[r],description:"",community_type:i.community_type,moderated_at:"",stats_viewed:0,moderation_status:i.moderation_status,title:i.title||i.ds6w_58_label,enhanced_summary:i.enhanced_summary,community_id:i.community_id,community_subject_uri:i.ds6w_58_containerUid,community_title:i.ds6w_58_community,conversation_title:i.ds6w_58_datasource,preview_fingerprint:i.preview_fingerprint,thumbnail_id:i.preview_media_id,preview_media_processing_version:Number.parseInt(i.preview_media_processing_version,10),preview_media_processing_status:i.preview_media_processing_status,preview_original_width:Number.parseInt(i.preview_original_width,10),preview_original_height:Number.parseInt(i.preview_original_height,10),preview_url:i.preview_url||"",model:l,published_at:ne(i.pubdate),author:{uid:"",first_name:i.user_firstname,last_name:i.user_lastname,displayName:`${i.user_firstname} ${i.user_lastname}`,login:i.username,user_state:i.ut_state},last_contributed_at:ne(i.ds6w_58_lastcontributed_date),last_contributed_event:da(i.ds6w_58_lastcontributed_event),last_contributed_author:{uid:"",displayName:`${i.ds6w_58_lastcontributed_user_firstname} ${i.ds6w_58_lastcontributed_user_lastname}`,last_name:i.ds6w_58_lastcontributed_user_lastname,first_name:i.ds6w_58_lastcontributed_user_firstname,login:i.ds6w_58_lastcontributed_user_login},published:i.swym_58_publicationState!=="Draft"};return l===C.Media?Object.assign(c,pa(i)):l===C.Idea?Object.assign(c,fa(i)):l===C.Question&&Object.assign(c,ma(i)),c})};function fa(e){return{model:C.Idea,status_title:e.status_title,status_color:e.ideation_color}}function pa(e){return{status:e.preview_media_processing_status,width:Number.parseInt(e.preview_original_width),height:Number.parseInt(e.preview_original_height),media_type:e.media_type,type:e.media_type,file_ext:e.preview_media_file_ext}}const ha={answeredbutnotvalidated:rt.Answered,validated:rt.Validated,notanswered:rt.NotAnswered};function ma(e){return{maturity:ha[e.question_type]}}const va=[["model_id","subject_uri"],["community_intranet_access","access"],["uri","subject_uri"],["subject6wuri","subject_uri"]];function ya(e){if(va.forEach(([t,n])=>{ge.move(t,n,e)}),typeof e.access=="string"){switch(e.access){case"Public":e.access=1;break;case"Private":e.access=0;break;case"Secret":e.access=4;break;default:e.access=Number.parseInt(e.access);break}["access","extranet_access","tenant_user_status","user_access","stats_min_acl","post_min_acl","media_min_acl","ideation_min_acl","qna_min_acl","wiki_min_acl","wedo_min_acl","survey_min_acl","conference_min_acl"].forEach(t=>{t in e&&(e[t]=Number.parseInt(e[t],10))})}return e.default_type_for_creation&&(e.default_type_for_creation=sa(e.default_type_for_creation.toLowerCase())),e}function Wt(e){return e.result=ya(e.result),e}const wa=async e=>{var a;const{response:t}=e,s=((a=t.headers.get("content-type"))==null?void 0:a.includes("application/json"))?await t.clone().json():null;if(s)if(s.errorcode){const i=e;return i.errorcode=`${s.errorcode}`,i.errorid=`${s.errorid}`,i.errormsg=`${s.errormsg}`,i}else e.data=s;return e},F=$.extend({hooks:{beforeRequest:[Bt(P.SWYM),De(P.SWYM)],afterResponse:[(...e)=>ot(P.SWYM,F)(...e),(...e)=>Oe(F,$)(...e)],beforeError:[On,Bn,wa]}});function ga(){return F.get("/api/communities/lite").json()}function Kn(e,t=!1){return Q(`get-community-${e}-${t}`,()=>F.post("/api/community/get",{json:{params:{as_admin:!1,id:e,return_6wtags:t}}}).json().then(Wt).catch(n=>{throw n.data&&n.data.result&&(n.data=Wt(n.data)),n}),5e3)}function _a(e={query:"#all",select_predicate:["title","id","resourceid"],favorites:"with",my_community:!1,page:0,limit:20}){return F.post("/api/exalead/search",{json:{params:{favorite_communities:e.favorites,hidden_communities:e.hidden,select_predicate:e.select_predicate,start:e.page*e.limit,query:e.query||"#all",myCommunitiesOnly:e.my_community,with_synthesis:!1,creation_granted_for:e.creation_granted_for,contentType:"community",nresults:e.limit,anyContentType:e.anyContentType||!1}}}).json().then(t=>Ft(t).map(n=>({...n,subject_uri:n.resourceid,description:n.community_description,owner:{first_name:n.user_firstname,last_name:n.user_lastname,login:n.username,user_state:n.ut_state}})))}function ba(e){return F.post("/api/v2/ideas",{json:{container_id:e.communitySubjectUri,derived_type_id:e.derivedTypeId,title:e.title,body:e.message,publication_state:e.published?"PUBLISHED":"DRAFT"}}).json().then(t=>Lt(t)).then(t=>tt(`idea-${t.result.subject_uri}`,t))}function Ca(e){return F.post("/api/v2/posts",{json:{container_id:e.communitySubjectUri,derived_type_id:e.derivedTypeId,title:e.title,body:e.message,publication_state:e.published?"PUBLISHED":"DRAFT"}}).json().then(t=>Lt(t)).then(t=>tt(`post-${t.result.subject_uri}`,t))}function Ea(e){return F.post("/api/IquestionsQuestions/add",{json:{params:{title:e.title,community_id:e.communitySubjectUri,question:e.message,published:e.published?1:0}}}).json().then(Lt).then(t=>tt(`question-${t.result.subject_uri}`,t))}async function Sa(e){const t=e.communitySubjectUri;let n;switch(e.model){case C.Idea:n=await ba({communitySubjectUri:t,...e.data});break;case C.Question:n=await Ea({communitySubjectUri:t,...e.data});break;case C.Post:default:n=await Ca({communitySubjectUri:t,...e.data});break}return n}function Jn(e){return{community_type:"dm",is_hidden:e.isHidden,id:e==null?void 0:e.convId.toString(),subject_uri:e.subjectUri,updated_at:e.lastModificationDate,topic:e.title,users:e.members.map(t=>({login:t.login,first_name:t.firstName,last_name:t.lastName,uid:t.uuid,displayName:t.full_name||""}))}}function ka(e){var t;return{community_type:"dm",is_hidden:e.isHidden,id:((t=e.id)==null?void 0:t.toString())||"",subject_uri:e.subjectUri,updated_at:e.lastModificationDate,created_at:e==null?void 0:e.dateCreation,topic:e.title,users:e.members.map(n=>({login:n.login,first_name:n.firstName,last_name:n.lastName,uid:n.uuid,displayName:n.full_name||""}))}}function Aa(e){return{id:e.id.toString(),name:e.name,position:e.readOnly?e.readOnlyPosition:e.position,isFavorite:e.readOnly&&e.readOnlyPosition===1,isReadOnly:e.readOnly||!1,threads:e.conversations.map(t=>({threadId:t.convId.toString(),position:t.position}))}}function Ta(){return async(e,t)=>{const s=`${await K(P.PASSPORT)}/login?service=3DSIM`,{access_token:a}=await $(s,{headers:{"X-Request-Id":""}}).json(),i=new URL(e.url);return i.searchParams.append("ticket",a),new Request(i,{...t,searchParams:{...t.searchParams,ticket:a}})}}const Ae=$.extend({credentials:"omit",hooks:{beforeRequest:[Pt,De(P.MESSAGING),Ta()],afterResponse:[(...e)=>Oe(Ae,$)(...e)]}});async function Pa(e,t){return Q(`all-user-conversations-${e}-${t}`,()=>Ae.get("/conversation/userConversations",{searchParams:{tenant:t,login:e,all:!0}}).json().then(n=>n.userConversations.map(s=>Jn(s))),5e3)}async function xa(e,t){return Q(`all-user-sections-${e}-${t}`,()=>Ae.get("/conversation/userConversations",{searchParams:{tenant:t,login:e,all:!0,sections:!0}}).json().then(n=>n.sections.map(s=>Aa(s))),5e3)}async function Na(e,t){return Q(`all-fav-conversations-${e}-${t}`,()=>Ae.get("/conversation/userConversations",{searchParams:{tenant:t,login:e,favorite:!0}}).json().then(n=>n.userConversations),5e3)}async function Ia(e,t,n){return Q(`conversation-id-${n}-${t}`,()=>{const s=zt(n);return Ae.get("/conversation/userConversations",{searchParams:{tenant:t,login:e,convId:s}}).json().then(a=>Jn(a.userConversations[0]))},1e4)}async function Ra(e,t){const n=await Oa();return Ae.post("/conversation/create",{searchParams:{ticket:n},json:{logins:e,tenant:t}}).json().then(s=>ka(s.conversation))}function zt(e){var t;return typeof e=="string"&&((t=e.split(":"))==null?void 0:t.pop())||e}async function Oa(){const t=`${await K(P.PASSPORT)}/login?service=3DSIM`,{access_token:n}=await $(t,{headers:{"X-Request-Id":""}}).json();return n}const Ba=[["subject6wuri","subject_uri"],["uri","subject_uri"]];function Ht(e){return{...e,result:Da(e.result)}}function Da(e){Ba.forEach(([n,s])=>{ge.move(n,s,e)});const t=e;return t.users_login=(e.users||[]).map(Ut).map(n=>n.login),t}function Ma(){return F.get("/api/directmessages/lite").json().then(e=>(e.result.forEach(t=>{t.users.forEach(n=>Ut(n))}),e))}function Va(e){return F.get(`/api/directmessages/${e}`,{searchParams:{as_admin:!1,id:e,return_6wtags:!1}}).json().then(Ht).then(t=>t.result)}function Ua(e,t){return F.post("/api/directmessages",{json:{users:e}}).json().then(Ht).then(n=>n.result).catch(n=>{if(n.response.status===409)return Ht(n.data).result;throw new Error(n)})}function La(e){if("requestIdleCallback"in window){const t=window.requestIdleCallback(e);return()=>window.cancelIdleCallback(t)}else{const t=setTimeout(e,0);return()=>clearTimeout(t)}}function Fa(){return Q("uwp-app-properties",async()=>F.get("/uwp/api/appProperties").json().then(e=>(La(async()=>{new Promise((t,n)=>Y(["./index-DGi1a2At"],t,n)).then(async({Preferences:t,CommonEvents:n})=>{t.isNativeApp()&&Array.isArray(e)&&(e.forEach(i=>{i.propertyKey==="com.3ds.wp.passport.cors"&&(i.propertyValue="disabled")}),n.emitEventToNativeApp("SwymEvents:notifyUWPAppProperties",e));const{requirejs:s}=await new Promise((i,r)=>Y(["./index-q5l1PYw2"],i,r)),[a]=await s(["DS/UWPClientCode/PublicAPI"]);a.applicationConfigurations=e})}),e)).then(e=>Object.fromEntries(e.map(t=>[t.propertyKey,t.propertyValue]))),36e5)}async function ja(e){return(await Fa())[e]}function Gt(e){window.SWYM_URL=e.replace(/\/$/,"")}function re(){return window.SWYM_URL}function Yt(){var e;return((e=B())==null?void 0:e.toLowerCase())==="onpremise"}const Zn=new Set,Qt={},Xt={},fe=o.reactive({});function Wa(e,t){fe[e]=t!==void 0?t:!fe[e]}function za(e){return e&&/^true|false$/i.test(e)}async function Ha(e,t){const n=await ja(t);if(za(n))return n!=="false";if(n==="enabled")return!0;if(n==="undefined"||!n)return typeof fe[e]=="boolean"?fe[e]:!1;try{const{userGroup:s,getCurrentUser:a}=await Promise.resolve().then(()=>_r),i=(await a()).result;return s.isMember(i.uid,n)}catch{return!1}}async function Ga(e){if(Ya(o.unref(e)))return fe[e];let t=!0,n=!0;Zn.add(e),Object.prototype.hasOwnProperty.call(Xt,e)&&(t=await Ha(e,Xt[e])),Object.prototype.hasOwnProperty.call(Qt,e)&&(n=!!await K(Qt[e]));const s=t&&n;return Wa(e,s),s}function Ya(e){return Object.prototype.hasOwnProperty.call(Xt,e)||Object.prototype.hasOwnProperty.call(Qt,e)?Zn.has(e):!0}function Le(e){return Ga(o.unref(e)),Object.prototype.hasOwnProperty.call(fe,o.unref(e))||(fe[o.unref(e)]=!0),o.computed(()=>fe[o.unref(e)])}const qn=Le("conversation.rtc");async function Kt(e,t,n){return qn.value?await Ia(e,t,n):await Va(n)}async function Qa(e,t){return qn.value?await Ra(e,t):await Ua(e)}const Xa=Ys(Is).smaller("sm"),$n={props:{color:{type:String,default:()=>"default"}}},Ka=/^on[^a-z]/,Ja=e=>Ka.test(e),Za=(e,t)=>{const n={};for(const s in e)Ja(s)&&(n[t?s[2].toLowerCase()+s.slice(3):s]=e[s]);return n},X=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n},qa={name:"vu-icon",mixins:[$n],data:()=>({getListenersFromAttrs:Za}),props:{icon:{required:!0,type:String},withinText:{default:!0,type:Boolean}}};function $a(e,t,n,s,a,i){return o.openBlock(),o.createElementBlock("span",o.mergeProps({class:["vu-icon fonticon",[n.withinText?"fonticon-within-text":"",`fonticon-${n.icon}`,`${e.color}`]]},o.toHandlers(e.getListenersFromAttrs(e.$attrs),!0)),null,16)}const Te=X(qa,[["render",$a],["__scopeId","data-v-47557ee2"]]),Jt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n},ei={name:"vu-icon-btn",mixins:[{props:{active:{type:Boolean,default:()=>!1}}},{props:{disabled:{type:Boolean,default:()=>!1}}},$n,{props:{size:{type:String,default:()=>""}}}],components:{VuIcon:Te},props:{icon:{required:!0,type:String},disableChevronResize:{default:!1,type:Boolean},noActive:{default:!1,type:Boolean},noHover:{default:!1,type:Boolean}}};function ti(e,t,n,s,a,i){const r=o.resolveComponent("VuIcon");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["vu-icon-btn",[e.color,e.size,{active:e.active&&!n.noActive,"no-active":n.noActive,"no-hover":n.noHover,disabled:e.disabled}]]),onClickCapture:t[0]||(t[0]=l=>{this.disabled&&l.stopPropagation()})},[o.createVNode(r,{icon:n.icon,color:e.color,class:o.normalizeClass({"chevron-menu-icon":n.icon==="chevron-down"&&n.disableChevronResize,disabled:e.disabled})},null,8,["icon","color","class"])],34)}const ni=X(ei,[["render",ti],["__scopeId","data-v-683db7dc"]]);function oi(){return window?("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)):(void 0)()}var eo;(eo=Rs())!=null&&eo.swymlang;const si={name:"vu-lazy",props:{height:{type:[Number,String],default:()=>"10px"},options:{type:Object,default:()=>({})}},emits:["intersect"],data:()=>({observer:null,intersected:!1}),mounted(){"IntersectionObserver"in window?(this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&(this.intersected=!0,this.observer.disconnect(),this.$emit("intersect"))},this.options),this.observer.observe(this.$el)):(this.intersected=!0,this.$emit("intersect"))},beforeUnmount(){"IntersectionObserver"in window&&this.observer&&this.observer.disconnect(),delete this.observer}};function ai(e,t,n,s,a,i){return o.openBlock(),o.createElementBlock("div",{style:o.normalizeStyle(e.intersected?"":`min-height: ${n.height}${typeof n.height=="number"&&"px"||""}`)},[e.intersected?o.renderSlot(e.$slots,"default",{key:0}):o.renderSlot(e.$slots,"placeholder",{key:1})],4)}const to=X(si,[["render",ai]]),no=Symbol("vuDropdownMenuOverlay"),oo={name:"detachable",props:{attach:{default:()=>!1,validator:e=>{const t=typeof e;return t==="boolean"||t==="string"?!0:e.nodeType===Node.ELEMENT_NODE}},contentClass:{type:[String,Object],default:""},contentStyle:{type:[String,Object],default:()=>""}},data:()=>({hasDetached:!1,target:null}),inject:{vuDebug:{default:!0}},watch:{attach(){this.hasDetached=!1,this.initDetach()}},mounted(){this.initDetach()},methods:{initDetach(){if(this._isDestroyed||this.hasDetached||this.attach===""||this.attach===!0||this.attach==="attach")return;let e;if(this.attach?typeof this.attach=="string"?e=document.querySelector(this.attach):e=this.attach:e=document.body,!e){this.vuDebug&&console.warn(`Unable to locate target ${this.attach}`,this);return}this.vuDebug&&e.tagName.toLowerCase()!=="body"&&window.getComputedStyle(e).position!=="relative"&&console.warn(`target (${e.tagName.toLowerCase()}${e.id&&` #${e.id}`}${e.className&&` .${e.className}`}) element should have a relative position`),this.target=e,this.hasDetached=!0}}},Zt={props:{show:{type:[Boolean,Object],default:!1}},emits:["update:show"],data(){return{innerShow:!1}},watch:{show:{immediate:!0,handler(e){this.innerShow=!!e}},innerShow(e){!!e!==this.show&&this.$emit("update:show",e)}}};function ii(e){return o.getCurrentScope()?(o.onScopeDispose(e),!0):!1}function Fe(e){return typeof e=="function"?e():o.unref(e)}const ri=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const li=Object.prototype.toString,ci=e=>li.call(e)==="[object Object]",qt=()=>{};function di(e,t){function n(...s){return new Promise((a,i)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(a).catch(i)})}return n}function ui(e,t={}){let n,s,a=qt;const i=l=>{clearTimeout(l),a(),a=qt};return l=>{const c=Fe(e),f=Fe(t.maxWait);return n&&i(n),c<=0||f!==void 0&&f<=0?(s&&(i(s),s=null),Promise.resolve(l())):new Promise((u,d)=>{a=t.rejectOnCancel?d:u,f&&!s&&(s=setTimeout(()=>{n&&i(n),s=null,u(l())},f)),n=setTimeout(()=>{s&&i(s),s=null,u(l())},c)})}}function so(e,t=200,n={}){return di(ui(t,n),e)}function fi(e){var t;const n=Fe(e);return(t=n==null?void 0:n.$el)!=null?t:n}const pi=ri?window:void 0;function hi(...e){let t,n,s,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,a]=e,t=pi):[t,n,s,a]=e,!t)return qt;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const i=[],r=()=>{i.forEach(u=>u()),i.length=0},l=(u,d,h,v)=>(u.addEventListener(d,h,v),()=>u.removeEventListener(d,h,v)),c=o.watch(()=>[fi(t),Fe(a)],([u,d])=>{if(r(),!u)return;const h=ci(d)?{...d}:d;i.push(...n.flatMap(v=>s.map(m=>l(u,v,m,h))))},{immediate:!0,flush:"post"}),f=()=>{c(),r()};return ii(f),f}function ao(e,t=!0){let n=t;return Fe(e).forEach(a=>{!a.text&&!a.label&&(!a.class||!a.class.includes("divider"))&&(n=!1),a.items&&(n=ao(a.items,n))}),n}o.ref();const mi={name:"vu-dropdownmenu-items",components:{VuIcon:Te},emits:["update:responsive","update:position","click-item","update:selected"],props:{target:{type:HTMLElement,required:!1},items:{type:Array,required:!0,validator:ao},selected:{type:Array,required:!0},zIndex:{type:Number,default:1e3},responsive:{type:Boolean,default:!1},dividedResponsiveItems:{type:Boolean,default:!1},disableResponsive:{type:Boolean,default:!1}},data:()=>({stack:[],left:!1,uuid:oi,root:!1,parent:{}}),computed:{classes(){return{"open-left":this.left,"responsive-menu":this.responsive}},_items(){return this.stack[this.stack.length-1]||this.items},_parent(){return(this.stack[this.stack.length-2]||this.items).find(e=>JSON.stringify(e.items)===JSON.stringify(this._items))}},async mounted(){var s;if(this.disableResponsive)return;await this.$nextTick();const e={root:this.target,threshold:1},t=((s=this.target)==null?void 0:s.getBoundingClientRect())||{right:window.right,left:0},n=new IntersectionObserver(async([a])=>{n.unobserve(this.$el);const i=a.target.getBoundingClientRect();t.right<i.right&&!this.left?(this.left=!0,await this.$nextTick(),n.observe(this.$el)):t.left>i.left&&this.left&&(this.$emit("update:responsive",!0),this.$emit("update:position"))},e);await this.$nextTick(),n.observe(this.$el)},methods:{toggleSelected(e){const t=this.selected.slice(0);return e.selected||this.selected.includes(e)?t.splice(this.selected.indexOf(e),1):t.push(e),t},onItemClick(e){!e.disabled&&(e.selectable||e.selected||this.selected.includes(e))&&this.$emit("update:selected",this.toggleSelected(e)),this.$emit("click-item",e)},onNextItemClick(e){this.responsive&&this.stack.push(e.items)},onBackItemClick(){this.stack.pop()}}},vi={class:"dropdown-menu-wrap"},yi={key:0,class:"item item-back"},wi={class:"item-text"},gi=["onClick"],_i={class:"item-text"},bi=["onClick"],Ci={key:0,class:"item-text"};function Ei(e,t,n,s,a,i){const r=o.resolveComponent("VuIcon"),l=o.resolveComponent("vu-dropdownmenu-items",!0);return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["dropdown-menu dropdown-menu-root dropdown-root",i.classes]),style:o.normalizeStyle([{zIndex:n.zIndex}]),ref:"self"},[o.createElementVNode("ul",vi,[n.responsive&&e.stack.length?(o.openBlock(),o.createElementBlock("li",yi,[o.createVNode(r,{icon:"left-open",class:"back-item",onClick:o.withModifiers(i.onBackItemClick,["stop"])},null,8,["onClick"]),o.createElementVNode("span",wi,o.toDisplayString(i._parent.text),1)])):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(i._items,c=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[!c.class||!c.class.includes("header")&&!c.class.includes("divider")?(o.openBlock(),o.createElementBlock("li",{key:c.text||c.label,class:o.normalizeClass(["item",[{"item-submenu":c.items,selectable:!c.disabled&&c.selectable||c.selected||n.selected.includes(c),selected:c.selected||n.selected.includes(c),hidden:c.hidden,disabled:c.disabled,"hide-responsive-divider":!n.dividedResponsiveItems},c.class]]),onClick:o.withModifiers(f=>c.items&&n.responsive&&!n.dividedResponsiveItems?i.onNextItemClick(c):i.onItemClick(c),["stop"])},[o.renderSlot(e.$slots,"default",{item:c},()=>[c.fonticon?(o.openBlock(),o.createBlock(r,{key:0,icon:c.fonticon,withinText:!1},null,8,["icon"])):o.createCommentVNode("",!0),o.createElementVNode("span",_i,o.toDisplayString(c.text||c.label),1)],!0),c.items?(o.openBlock(),o.createElementBlock("div",{key:0,class:"next-icon",onClick:o.withModifiers(f=>i.onNextItemClick(c),["stop"])},[t[3]||(t[3]=o.createElementVNode("span",{class:"divider"},null,-1)),o.createVNode(r,{icon:"right-open"})],8,bi)):o.createCommentVNode("",!0),!n.responsive&&c.items?(o.openBlock(),o.createBlock(l,{key:1,target:n.target,items:c.items,selected:n.selected,"z-index":n.zIndex+1,onClickItem:i.onItemClick,"onUpdate:selected":t[0]||(t[0]=f=>e.$emit("update:selected",f)),"onUpdate:responsive":t[1]||(t[1]=f=>e.$emit("update:responsive",f)),"onUpdate:position":t[2]||(t[2]=()=>{var d;const{left:f,top:u}=(d=e.$refs.self)==null?void 0:d.getBoundingClientRect();e.$emit("update:position",{x:f,y:u})})},null,8,["target","items","selected","z-index","onClickItem"])):o.createCommentVNode("",!0)],10,gi)):(o.openBlock(),o.createElementBlock("li",{key:c.text||c.label||e.uuid(),class:o.normalizeClass(c.class)},[c.class!=="divider"?(o.openBlock(),o.createElementBlock("span",Ci,o.toDisplayString(c.text||c.label),1)):o.createCommentVNode("",!0)],2))],64))),256))])],6)}const io=X(mi,[["render",Ei],["__scopeId","data-v-242e08d8"]]),ro=["top","top-right","bottom-right","bottom","bottom-left","top-left"],lo=({intersectionRatio:e,elementRect:t,targetRect:n})=>e<1&&(t.top<n.top||t.bottom>n.bottom),co=(e,t,n,s)=>{if(s.length===1){const a=s[0];return a.includes("top")?a.replace("top","bottom"):a.replace("bottom","top")}else s.length>1&&s.push(...ro);return t},Si=function(t,n){let s,a;return function(...r){const l=this,c=+new Date;s&&c<s+n?(clearTimeout(a),a=setTimeout(()=>{s=c,t.apply(l,r)},n)):(s=c,t.apply(l,r))}},uo=(e,t,n,s={width:0,x:0,y:0},{scrollTop:a=0,scrollLeft:i=0}={},r=!1,l={left:2,right:2,top:0,bottom:0},c={x:0,y:0})=>{let f=t.y-s.y+a+(c.y||0),u=t.x-s.x+i+(c.x||0);isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),/-right/.test(e)?u+=t.width-n.width:/^(top|bottom)$/.test(e)&&(u+=t.width/2-n.width/2),/^bottom/.test(e)?f+=t.height:/^(left|right)(-top|-bottom)?$/.test(e)?(u-=n.width,/^(right|right-\w{3,6})$/.test(e)&&(u+=t.width+n.width),/(-top|-bottom)/.test(e)?/-bottom/.test(e)&&(f+=t.height-n.height):f+=t.height/2-n.height/2):f-=n.height;let d=0,h=0;const v=t.width/2;if(r){const m=l.left,p=s.width-n.width-l.right,w=Math.max(m,Math.min(u,p));d=u-w,u=w}return{left:u,top:f,shiftX:d,shiftY:h,offset:v}},ki={name:"vu-tooltip",mixins:[Zt],data:()=>({setPosition:uo}),props:{type:{type:String,default:()=>"tooltip"},side:{type:String,default:()=>"top"},arrow:{type:Boolean,default:!0},text:{type:String,default:()=>""},animated:{type:Boolean,default:!0},contentClass:{type:String,required:!1,default:""},prerender:{type:Boolean,required:!1}}},Ai=["innerHTML"];function Ti(e,t,n,s,a,i){return o.openBlock(),o.createElementBlock("div",{ref:"content",class:o.normalizeClass([`${n.side} ${n.type} ${n.type}-root`,{"without-arrow":!n.arrow},{prerender:n.prerender}])},[o.createVNode(o.Transition,{name:n.animated?"fade":""},{default:o.withCtx(()=>[e.show?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass([`${n.type}-wrapper`])},[o.renderSlot(e.$slots,"arrow",{side:n.side},()=>[n.arrow?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(`${n.type}-arrow`)},null,2)):o.createCommentVNode("",!0)],!0),o.renderSlot(e.$slots,"title",{side:n.side},void 0,!0),o.createElementVNode("div",{ref:"body",class:o.normalizeClass(`${n.type}-body`)},[n.text?(o.openBlock(),o.createElementBlock("span",{key:0,innerHTML:n.text},null,8,Ai)):o.renderSlot(e.$slots,"default",{key:1,side:n.side},void 0,!0)],2)],2)):o.createCommentVNode("",!0)]),_:3},8,["name"])],2)}const Pi=X(ki,[["render",Ti],["__scopeId","data-v-0ffdf690"]]),xi=["top","top-right","right-bottom","right","right-top","bottom-right","bottom","bottom-left","left-top","left","left-bottom","top-left"],Ni={name:"vu-popover",mixins:[Zt,oo],expose:["updatePosition","toggle"],emits:["unpositionable"],components:{VuTooltip:Pi},props:{type:{type:String,default:"popover"},side:{type:String,default:"bottom"},arrow:{type:Boolean,default:!1},shift:{type:Boolean,default:!1},offsets:{type:Object,default:void 0},animated:{type:Boolean,default:!0},overlay:{type:Boolean,default:!1},click:{type:Boolean,default:!0},hover:{type:Boolean,default:!1},hoverImmediate:{type:Boolean,default:!1},hoverDelay:{type:Number,default:500},title:{type:String,default:()=>""},persistent:{type:Boolean,default:!1},positions:{type:Array,required:!1,default:()=>xi},getNextPosition:{type:Function,required:!1,default:(e,t,n,s)=>{const a=n.indexOf(e),i=n[(a+1)%n.length];return s.includes(i)?t:i}},checkPosition:{type:Function,required:!1,default:({intersectionRatio:e})=>e<1},syncWidth:{type:Boolean,default:!1},ignoreEscapeKey:{type:Boolean,default:!1},ignoreClickOutside:{type:Boolean,default:!1}},data:()=>({open:!1,width:0,resizeObs:null,debounce(){},useDebounceFn:so,intersectionObs:null,setPositionBound:null,shifted:!1,positioned:!1,fadeTimeout:void 0,positionAttempts:[],scrollableAncestors:[],innerSide:"",keyboardListener(){}}),watch:{innerShow:{immediate:!0,async handler(e){e?(this.fadeTimeout&&(this.fadeTimeout=void 0),await new Promise(t=>setTimeout(t,10)),this.positioned=!1,this.open=!0,this.positionAttempts=[],await this.$nextTick(),this.setPositionBound(),this.intersectionObs.observe(this.$refs.tooltip.$el),this.resizeObs||(this.resizeObs=new ResizeObserver(async()=>{this.setPositionBound(!0)})),this.listenScrolls()):(this.$refs.tooltip&&(this.intersectionObs.unobserve(this.$refs.tooltip.$el),this.resizeObs.disconnect()),this.stopScrollListening(),this.animated?this.fadeTimeout=setTimeout(()=>{this.open=!1},500):this.open=!1)}},innerSide:{handler(){this.updatePosition()}},attach(){this.innerShow&&this.updatePosition()},open:{handler(e){this.target&&(e&&!this.ignoreEscapeKey?this.keyboardListener=hi(this.target,"keydown",t=>{t.code==="Escape"&&(this.innerShow=!1)}):this.keyboardListener())}},hover:{immediate:!0,handler(){this.attachHover()}},hoverImmediate(){this.attachHover()},hoverDelay(){this.attachHover()}},created(){this.setPositionBound=Si(this.setPosition.bind(this),1)},async mounted(){await this.$nextTick();let e=0;const t=5;for(;e<t&&this.$refs.activator===void 0&&this.$refs.tooltip===void 0;)e++,await this.$nextTick();const{target:n,positionAttempts:s}=this;this.intersectionObs=new IntersectionObserver(([{boundingClientRect:a,rootBounds:i,intersectionRatio:r,intersectionRect:l}])=>{if(this.$refs.tooltip&&this.intersectionObs.unobserve(this.$refs.tooltip.$el),this.checkPosition({intersectionRatio:r,elementRect:a,targetRect:i,intersectionRect:l,positionAttempts:s})){const c=this.getNextPosition(this.innerSide||this.side,this.side,this.positions,this.positionAttempts);if(this.positionAttempts.length>this.positions.length){this.$emit("unpositionable"),this.positioned=!0,this.positionAttempts=[];return}this.innerSide=c,this.positionAttempts.push(this.innerSide)}else this.positioned=!0,this.positionAttempts=[],this.resizeObs.observe(this.$refs.tooltip.$el),this.resizeObs.observe(this.target)},{root:n!==document.body?n:void 0})},beforeUnmount(){try{this.innerShow=!1,this.stopScrollListening(),this.intersectionObs.disconnect(),this.resizeObs.disconnect()}catch{}},methods:{listenScrolls(){const e=[];let t=this.$refs.activator.parentElement;for(;t&&(this.target.contains(t)||t===this.target);){const{overflow:n}=window.getComputedStyle(t),s=n.split(" ");["auto","scroll"].some(a=>s.includes(a))&&e.push(t),t=t.parentElement}this.scrollableAncestors=e,this.scrollableAncestors.forEach(n=>n.addEventListener("scroll",this.setPositionBound))},stopScrollListening(){this.scrollableAncestors.forEach(e=>e.removeEventListener("scroll",this.setPositionBound))},updatePosition(){var e;this.setPositionBound(),this.intersectionObs.observe((e=this.$refs.tooltip)==null?void 0:e.$el)},async setPosition(e){var l;e&&await this.$nextTick();let t=this.$refs.activator.getBoundingClientRect();const n=(l=this.$refs.tooltip)==null?void 0:l.$el;if(!n)return;let s=n.getBoundingClientRect();this.syncWidth&&s.width!==t.width&&(this.width=t.width,await this.$nextTick(),t=this.$refs.activator.getBoundingClientRect(),s=this.$refs.tooltip.$el.getBoundingClientRect());const a=this.target.getBoundingClientRect(),i=this.offsets&&this.offsets[this.innerSide||this.side]||{};this.positionAttempts.push(this.innerSide||this.side);const r=uo(this.innerSide||this.side,t,s,a,this.target,this.shift,{left:0,right:0},i);this.shifted=r.shiftX,n.style.top=`${r.top}px`,n.style.left=`${r.left}px`,this.overlay&&(this.$refs.overlay.style.top=`${this.target===document.body?document.scrollingElement.scrollTop:this.target.scrollTop}px`)},onClickOutside(e,t=!1){if(this.ignoreClickOutside||!this.innerShow)return;const{target:n}=e;t&&e.preventDefault(),!(this.$refs.tooltip&&(n===this.$refs.tooltip.$el||this.$refs.tooltip.$el.contains(n)))&&(this.innerShow=!1)},onHover(e){this.debounce(e).then(t=>{this.openedByClick||(t==="mouseenter"?this.innerShow=!0:(this.innerShow=!1,this.openedByClick=!1))}).catch(()=>{})},attachHover(){this.hover&&!this.hoverImmediate?this.debounce=so(({type:e})=>e,this.hoverDelay,{rejectOnCancel:!0}):this.debounce=function(){}},onClick(){this.toggle(),this.hover&&this.innerShow?this.openedByClick=!0:this.openedByClick=!1},toggle(e=void 0){e!==void 0?this.innerShow=e:this.innerShow=!this.innerShow}}};function Ii(e,t,n,s,a,i){const r=o.resolveComponent("VuTooltip"),l=o.resolveDirective("click-outside");return o.openBlock(),o.createElementBlock(o.Fragment,null,[o.withDirectives((o.openBlock(),o.createElementBlock("span",o.mergeProps({ref:"activator",class:"vu-popover__activator"},e.$attrs,{onClick:t[0]||(t[0]=c=>n.click&&i.onClick(!0)),onContextmenu:t[1]||(t[1]=o.withModifiers(()=>{},["prevent","stop"])),onMouseenter:t[2]||(t[2]=c=>n.hover&&i.onHover(c)),onMouseleave:t[3]||(t[3]=c=>n.hover&&i.onHover(c))}),[o.renderSlot(e.$slots,"default",{},void 0,!0)],16)),[[l,{handler:i.onClickOutside,innerShow:e.innerShow}]]),e.open||n.persistent?o.withDirectives((o.openBlock(),o.createBlock(o.Teleport,{key:0,to:e.target},[o.createVNode(o.Transition,{name:n.animated?"fade":""},{default:o.withCtx(()=>[e.innerShow&&n.overlay?(o.openBlock(),o.createElementBlock("div",{key:0,ref:"overlay",class:"mask popover-mask",onWheel:t[4]||(t[4]=o.withModifiers((...c)=>i.onClickOutside&&i.onClickOutside(...c),["prevent"])),onTouchstart:t[5]||(t[5]=c=>i.onClickOutside(c,!0))},null,544)):o.createCommentVNode("",!0)]),_:1},8,["name"]),o.createVNode(o.Transition,{appear:"",name:n.animated?"fade":""},{default:o.withCtx(()=>[o.withDirectives(o.createVNode(r,{ref:"tooltip",arrow:n.arrow,prerender:!e.positioned,type:n.type,show:!0,side:e.innerSide||n.side,class:o.normalizeClass(e.contentClass),style:o.normalizeStyle([e.width?`width: ${e.width}px`:{},e.contentStyle]),"onUpdate:show":t[6]||(t[6]=c=>e.open=!1),onMouseenter:t[7]||(t[7]=c=>n.hover&&i.onHover(c)),onMouseleave:t[8]||(t[8]=c=>n.hover&&i.onHover(c))},{arrow:o.withCtx(({side:c})=>[o.renderSlot(e.$slots,"arrow",{side:e.innerSide||c,shift:e.shifted},void 0,!0)]),title:o.withCtx(({side:c})=>[o.renderSlot(e.$slots,"title",{side:e.innerSide||c},()=>[n.title?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[o.createTextVNode(o.toDisplayString(n.title),1)],64)):o.createCommentVNode("",!0)],!0)]),default:o.withCtx(()=>[o.renderSlot(e.$slots,"body",{},void 0,!0)]),_:3},8,["arrow","prerender","type","side","class","style"]),[[o.vShow,e.innerShow||e.show]])]),_:3},8,["name"])],8,["to"])),[[o.vShow,e.open]]):o.createCommentVNode("",!0)],64)}const fo=X(Ni,[["render",Ii],["__scopeId","data-v-bbd834b9"]]);function po(e,t=!0){let n=t;return e.forEach(s=>{!s.text&&!s.label&&(!s.class||!s.class.includes("divider"))&&(n=!1),s.items&&(n=po(s.items,n))}),n}const ho=Object.assign({components:{VuDropdownmenuItems:io,VuPopover:fo},name:"vu-dropdownmenu",mixins:[Zt,oo],emits:["close","click-item"],props:{value:{type:Array,default:()=>[]},items:{type:Array,required:!0,validator:po},dividedResponsiveItems:{type:Boolean,default:!1},position:{type:String,required:!1,default:"bottom-left"},arrow:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1},zIndex:{type:Number,default:()=>1e3},responsive:{type:Boolean,default:!1},shift:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},positions:{type:Array,required:!1,default:()=>ro},getNextPosition:{type:Function,required:!1,default:co},checkPosition:{type:Function,required:!1,default:lo},ignoreEscapeKey:{type:Boolean,default:!1},ignoreClickOutside:{type:Boolean,default:!1}},data:()=>({innerResponsive:!1}),computed:{isResponsive:{get(){return this.innerResponsive||this.responsive},set(e){this.innerResponsive=e}}},watch:{async items(){this.innerShow&&(await this.$nextTick(),this.$refs.popover.updatePosition())}},methods:{handleClick(e){e.handler&&e.handler(e),this.$emit("click-item",e),this.updateShow(!1)},updateShow(e){e?this.isResponsive=!1:this.closeOnClick&&(this.innerShow=!1,this.$emit("close"))}}},{setup(e){const t=o.inject(no,!1);return(n,s)=>(o.openBlock(),o.createBlock(fo,{ref:"popover",show:n.innerShow,"onUpdate:show":[s[1]||(s[1]=a=>n.innerShow=a),n.updateShow],shift:e.shift||e.responsive,type:"dropdownmenu popover",attach:n.target,side:e.position,overlay:e.overlay||o.unref(t),animated:!1,"check-position":o.unref(lo),"get-next-position":o.unref(co),"ignore-click-outside":e.ignoreClickOutside,arrow:!1,ignoreEscapeKey:e.ignoreEscapeKey},{body:o.withCtx(()=>[o.createVNode(io,{responsive:n.isResponsive,"onUpdate:responsive":s[0]||(s[0]=a=>n.isResponsive=a),"divided-responsive-items":e.dividedResponsiveItems,target:n.target,items:e.items,selected:e.value,onClickItem:n.handleClick},null,8,["responsive","divided-responsive-items","target","items","selected","onClickItem"])]),default:o.withCtx(()=>[o.renderSlot(n.$slots,"default",{active:n.innerShow})]),_:3},8,["show","shift","attach","side","overlay","check-position","get-next-position","ignore-click-outside","ignoreEscapeKey","onUpdate:show"]))}});let lt=class W{static removeDotSegments(t){const n=[];function s(a){a==="/.."?n.pop():n.push(a)}return t.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^/]*/g,s),n.join("").replace(/^\//,t.charAt(0)==="/"?"/":"")}static buildUrl(t,n){const s=window.location&&window.location.protocol?window.location.protocol:"http:";if(t=String(t),n=String(n),!W.isAbsoluteUrl(t))throw new Error("First argument should be a absolute url.");t.substring(0,2)==="//"&&(t=s+t);let a,i,r="";const l=String(t).split("://"),c=l[0],f=l[1],u=f.split("/"),d=u[0];if(n.substring(0,2)==="//")t=c+":"+n;else if(n.split("://").length>1)t=n;else if(n.substring(0,1)==="/")t=c+"://"+d+n;else{for(a=1,i=u.length-1;a<i;a++)r+="/"+u[a];t=c+"://"+d+W.removeDotSegments(r+"/"+n)}return t}static parseUrl(t){const n=["source","subprotocol","protocol","authority","user","password","domain","port","path","directoryPath","fileName","query","anchor"],s=new RegExp("^(?:(?:(?:([^#.:]+):)?([^#.:]+):)?//)?((?:([^:/]+)(?::([^/]*?))?@)?([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?");let a;const i=s.exec(t),r={};for(a=0;a<n.length;a++)r[n[a]]=i[a]||"";return r.subprotocol&&(r.source=r.source.substr(r.subprotocol.length+1)),r.port||(r.port=r.protocol==="https"?"443":"80"),r.directoryPath&&r.directoryPath.length>0&&(r.directoryPath=r.directoryPath.replace(/\/?$/,"/")),r.domain=r.domain.toLocaleLowerCase(),r.protocol=r.protocol.toLocaleLowerCase(),r}static composeUrl(t){let n="";return t.protocol&&(n=t.protocol+"://",t.subprotocol&&(n=t.subprotocol+":"+n)),t.domain?(n+=t.domain,t.port&&(t.protocol!=="http"||parseInt(t.port,10)!==80)&&(t.protocol!=="https"||parseInt(t.port,10)!==443)&&(n+=":"+t.port)):t.authority&&(n+=t.authority),t.path&&(n+=t.path),t.query&&(n+="?"+t.query),t.anchor&&(n+="#"+t.anchor),n}static matchUrl(t,n){let s,a,i=!1;const r=W.isAbsoluteUrl(t),l=W.isAbsoluteUrl(n);return!r&&!l?i=!0:(r?l||(n=W.buildUrl(t,n)):t=W.buildUrl(n,t),s=W.parseUrl(t),a=W.parseUrl(n),i=["domain","protocol","port"].every(function(c){return s[c]===a[c]||c==="protocol"&&(s[c]===""||a[c]==="")})),i}static isAbsoluteUrl(t){return/^((https?|ftp|file):)?\/\//.test(t)}static toQueryString(t,n){let s,a,i,r;if(W.is(t,"string"))r=t;else if(W.is(t.toQueryString,"function"))r=t.toQueryString();else{r=[];for(s in t)t.hasOwnProperty(s)&&(a=t[s],n&&(s=n+"["+W.capitalize(s)+"]"),W.is(a)&&(W.is(a,"object")||W.is(a,"array")?i=W.toQueryString(a,s):W.is(a,"function")||(i=W.encodeUrl(s)+"="+W.encodeUrl(a))),i&&r.push(i),i=void 0);r=r.join("&")}return r}static is(t,n){return t&&n?typeof t===n:t?typeof t<"u":!1}static encodeUrl(t){return encodeURIComponent(t).replace(/\./g,"%2e")}static capitalize(t,n="-"){const s=t.split(n);for(let a=0;a<s.length;a++)s[a]=s[a][0].toUpperCase()+s[a].substr(1);return s.join(n)}};function se(e,t,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(u){try{f(s.next(u))}catch(d){r(d)}}function c(u){try{f(s.throw(u))}catch(d){r(d)}}function f(u){u.done?i(u.value):a(u.value).then(l,c)}f((s=s.apply(e,t||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;class Ri{constructor(){return this.appSettings=null,this}setAppPreferences(t){this.appSettings=t}allowODECreationFeature(){return this.appSettings&&this.appSettings.allowODECreationFeature?this.appSettings.allowODECreationFeature:!1}allowODEViewerFeature(){return this.appSettings&&this.appSettings.allowODEViewerFeature?this.appSettings.allowODEViewerFeature:!1}allowODECollabFeature(){return this.appSettings&&this.appSettings.allowODECollabFeature?this.appSettings.allowODECollabFeature:!1}activateNativeWindowBar(){return this.appSettings&&this.appSettings.activateNativeWindowBar?this.appSettings.activateNativeWindowBar:!1}hasMultiWindowsSupport(){return this.appSettings&&this.appSettings.hasMultiWindowsSupport?this.appSettings.hasMultiWindowsSupport:!1}disableTopbarLogout(){return this.appSettings&&this.appSettings.disableTopbarLogout?this.appSettings.disableTopbarLogout:!1}}const mo=new Ri,ct=5*1e3;class dt{constructor(){this.set=(t,n)=>new Promise((s,a)=>{const i=setTimeout(()=>{n===void 0?s(null):a(n),this.clear(i)},t);this.ids.push(i)}),this.wrap=(t,n,s)=>Promise.race([t,this.set(n,s)]),this.clear=(...t)=>{this.ids=this.ids.filter(n=>t.includes(n)?(clearTimeout(n),!1):!0)},this.ids=[]}}const ut=(e,t,n)=>new Promise((s,a)=>{(!window||!window.nsWebViewInterface)&&a("No webview interface found!"),window.nsWebViewInterface.emit(e,n),window.nsWebViewInterface.once(t,i=>{s(i)})});class pe{constructor(){return this}static emitEventToNativeApp(t,n){try{window&&window.electron&&window.electron.ipcRenderer?window.electron.ipcRenderer.send(t,n):window&&window.nsWebViewInterface&&window.nsWebViewInterface.emit(t,n)}catch(s){console.log(`Failed with reason: ${s}`)}}static invokeEventToNativeApp(t,n){return se(this,void 0,void 0,function*(){if(window&&window.electron&&window.electron.ipcRenderer)return yield window.electron.ipcRenderer.invoke(t,n);throw new Error("Method not supported!")})}static listenEventFromNativeApp(t,n){try{window&&window.electron&&window.electron.ipcRenderer?window.electron.ipcRenderer.on(t,(s,a)=>n(a)):window&&window.nsWebViewInterface&&window.nsWebViewInterface.on(t,s=>n(s))}catch(s){console.log(`Failed with reason: ${s}`)}}static listenOnceEventFromNativeApp(t,n){try{window&&window.electron&&window.electron.ipcRenderer?window.electron.ipcRenderer.once(t,(s,a)=>n(a)):window&&window.nsWebViewInterface&&window.nsWebViewInterface.once(t,s=>n(s))}catch(s){console.log(`Failed with reason: ${s}`)}}static getAppPreferences(){return se(this,void 0,void 0,function*(){let t=null;try{if(window&&window.electron)t=yield window.electron.getAppPreferences();else if(window&&window.nsWebViewInterface){const n=new dt;try{const s=yield n.wrap(ut("PreferencesReq:getAppPreferences","PreferencesRes:getAppPreferences",{}),ct,"Fetch timeout!");return Promise.resolve(s)}catch(s){return console.log(`Failed with reason: ${s}`),n.clear(...n.ids),Promise.reject(s)}}}catch(n){return Promise.reject(n)}return Promise.resolve(t)})}static getSelectedPlatform(){return se(this,void 0,void 0,function*(){let t=null;try{if(window&&window.electron)t=yield window.electron.getPairedPlatform();else if(window&&window.nsWebViewInterface){const n=new dt;try{const s=yield n.wrap(ut("PreferencesReq:getSelectedPlatform","PreferencesRes:getSelectedPlatform",{}),ct,"Fetch timeout!");return Promise.resolve(s)}catch(s){return console.log(`Failed with reason: ${s}`),n.clear(...n.ids),Promise.reject(s)}}}catch(n){return Promise.reject(n)}return Promise.resolve(t)})}static getTrackerData(){return se(this,void 0,void 0,function*(){let t={};try{if(window&&window.electron)t=yield window.electron.getTrackerData();else if(window&&window.nsWebViewInterface){const n=new dt;try{const s=yield n.wrap(ut("PreferencesReq:getTrackerData","PreferencesRes:getTrackerData",{}),ct,"Fetch timeout!");return Promise.resolve(s)}catch(s){return console.log(`Failed with reason: ${s}`),n.clear(...n.ids),Promise.reject(s)}}}catch(n){return Promise.reject(n)}return Promise.resolve(t)})}static getGDPRPreferences(){return se(this,void 0,void 0,function*(){let t={};try{if(window&&window.electron)t=yield window.electron.getGDPRPreferences();else if(window&&window.nsWebViewInterface){const n=new dt;try{const s=yield n.wrap(ut("PreferencesReq:getGDPRPreferences","PreferencesRes:getGDPRPreferences",{}),ct,"Fetch timeout!");return Promise.resolve(s)}catch(s){return console.log(`Failed with reason: ${s}`),n.clear(...n.ids),Promise.reject(s)}}}catch(n){return Promise.reject(n)}return Promise.resolve(t)})}}class J{constructor(){}static setAppProperties(t){t&&(t.appVersion&&typeof t.appVersion<"u"&&(this._appVersion=t.appVersion),this._appProperties=t)}static getAppProperties(){return this._appProperties}static setAppPreferences(t){mo.setAppPreferences(t)}static isNativeApp(){return window&&typeof window.electron<"u"?!0:!!(window&&window.nsWebViewInterface)}static isMobileApp(){return window&&window.nsWebViewInterface}static isDesktopApp(){return window&&window.electron}static isNativeSameDomain(t){return window&&window.location&&window.location.hostname===t.hostname}static getNativeAppRequireConfig(){if(this.isNativeApp())return window&&window.nsWAP&&window.nsWAP.appVersion&&typeof window.nsWAP.appVersion<"u"&&(this._appVersion=window.nsWAP.appVersion),{dsEnv:{env:"MOBILE"},proxies:{ajax:`${window.location.origin}/_api/proxy/ajax`,passport:`${window.location.origin}/_api/proxy/passport`},requirePaths:{WAP:`${window.location.origin}/wap/${this._appVersion}`,WAP2:`${window.location.origin}/WapInterface/${this._appVersion}`}}}static getAppPairingPlatform(){return se(this,void 0,void 0,function*(){return pe.getSelectedPlatform()})}static getTrackerData(){return se(this,void 0,void 0,function*(){return pe.getTrackerData()})}static getGDPRPreferences(){return se(this,void 0,void 0,function*(){return pe.getGDPRPreferences()})}static intializeNativeAppPreferences(){return se(this,void 0,void 0,function*(){try{const t=yield pe.getAppPreferences();t&&(this.setAppProperties(t.appProperties),this.setAppPreferences(t.appFeatureActivation)),console.log("intializeNativeAppPreferences",t)}catch(t){console.log("intializeNativeAppPreferences error",t)}return Promise.resolve()})}}J._appVersion="1.0";class vo{constructor(){}static emitEventToNativeApp(t,n){pe.emitEventToNativeApp(t,n)}static listenEventFromNativeApp(t,n){pe.listenEventFromNativeApp(t,n)}static listenOnceEventFromNativeApp(t,n){pe.listenOnceEventFromNativeApp(t,n)}static invokeEventToNativeApp(t,n){return pe.invokeEventToNativeApp(t,n)}}vo.EVENTS={ON_APP_FOREGROUND:"onAppForeground",ON_ENTER_FULLSCREEN:"onEnterFullScreen",ON_LEAVE_FULLSCREEN:"onLeaveFullScreen",NOTIFY_APP_DOWNLOAD_URL:"SwymEvents:notifyDownloadURL",NOTIFY_APP_UPDATE_INSTALL:"SwymEvents:notifyAppUpdateInstall",NOTIFY_APP_PWA_UPDATE_WAITING:"SwymEvents:notifyAppUpdatePWAWaiting",NOTIFY_REALTIME_MESSAGE:"SwymEvents:notifyRealtimeMessage",NOTIFY_APP_SWYM_INIT_END:"onInitializationEnd",NOTIFY_APP_UWP_PROPERTIES:"SwymEvents:notifyUWPAppProperties",NOTIFY_APP_TOPFRAME_INIT:"SwymEvents:notifyTopFrameInit",ON_APP_MULTIWINDOWS:"onAppMultiWindows",NOTIFY_MULTIWINDOW_ADD:"multi-window:add",NOTIFY_MULTIWINDOW_DELETE:"multi-window:delete",NOTIFY_MULTIWINDOW_FOCUS:"multi-window:focus"};let $t=class Ie{constructor(){}static get proxies(){const t=J.getNativeAppRequireConfig();if(t&&t.proxies)return t.proxies;const n=window.UWA&&window.UWA.hosts||{},a=n.exposition+"/proxy/",i=n.proxies||{};return Object.assign(Object.assign({},i),{ajax:a+"ajax",resolve:a+"resolve",xml:a+"xml",spreadsheet:a+"spreadsheet",soap:a+"soap",feed:a+"feed",icon:a+"icon",richIcon:a+"richIcon",rss:a+"feed"})}static normalizeRequestHeaders(t){const n={};return t.headers.forEach((s,a)=>{n[a]=s}),n}static checkHasProxyPath(t){if(J.isNativeApp()){const n=J.getNativeAppRequireConfig();if(n&&n.proxies){for(const s in n.proxies)if(t.startsWith(n.proxies[s]))return!0}}return!1}static async request(t,n,s){if(!t)throw new Error("Bad or missing url argument.");if(!J.isNativeApp()||lt.matchUrl(t,window.location))return s;n=n||{};let a;const i=window.location,r="ajax",l=n;l.headers&&!l.normalizedHeaders&&(l.normalizedHeaders=Ie.normalizeRequestHeaders(s)),l.proxy?t=Ie.proxifyUrl(t,l):lt.matchUrl(t,i)===!1&&Ie.allowCrossOriginRequest===!1&&(t=Ie.proxifyUrl(t,Object.assign(Object.assign({},l),{proxy:r})));const c=["GET","HEAD"].includes(s.method)?void 0:await s.blob();return l.body=c,a=new Request(t,l),a}static proxifyUrl(t,n){if(!t)throw new Error("Bad or missing url argument.");let s;const a=[],i=n.proxy,r=lt.toQueryString,l=Ie.proxies;if(i&&l[i]){if(!J.isNativeApp()||lt.matchUrl(t,window.location)||(s=l[i],t.indexOf(s)===0))return t;if(t.startsWith("https://")&&t.indexOf(":443")>-1&&(t=t.replace(":443","")),n.body&&n.method&&n.method.toUpperCase()==="GET"&&(t+=(t.indexOf("?")>-1?"&":"?")+r(n.body),console.log("DEBUG test proxification handle get",t)),typeof n.proxy=="object"&&a.push(r(n.proxy)),n.normalizedHeaders?a.push(r(n.normalizedHeaders,"headers")):n.headers&&a.push(r(n.headers,"headers")),n.method&&a.push(r({method:n.method})),a.push(r({url:t})),t=s+"?"+a.join("&"),t.length>4096)throw console.log("Error proxify url too long",t),new Error("Proxified url is more than 4096 characters, that is the limit for most of the browsers.")}else throw new Error("Invalid proxy");return t}};$t.allowCrossOriginRequest=!1;function Oi(e,t){try{return $t.proxifyUrl(e,{proxy:"passport",...t})}catch(n){return N.error(e,n),e}}var Z=(e=>(e.TINY="tiny",e.SMALL="small",e.SMALLDIUM="smalldium",e.SMEDIUM="smedium",e.MEDIUM="medium",e.NORMAL="normal",e.BIG="big",e.BIGGER="bigger",e.BLARGE="blarge",e.LARGE="large",e))(Z||{});const Bi={key:1,class:"user-picture"},Di=["src"];Z.MEDIUM;const Mi=["onClick"],Vi={class:"flex flex-col justify-center items-center w-full gap-1"},Ui={key:0,class:"text-xs text-grey-6 cursor-pointer leading-tight text-ellipsis max-w-full overflow-hidden text-center line-clamp-1"},Li=2,Fi=o.defineComponent({__name:"m-icon-list",props:{icons:{},hideText:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},leftAlign:{type:Boolean}},setup(e){const t=e,n=o.toRef(t,"icons"),s=o.computed(()=>t.compact||Xa.value),a=Number.MAX_SAFE_INTEGER,i=o.computed(()=>s.value?38:64),{i18n:r}=Ln("core"),l=o.ref(n.value.find(p=>p.active));o.watch(()=>t.icons,()=>{l.value=n.value.find(p=>p.active)});const c=o.useTemplateRef("container"),{width:f}=Xs(c),u=o.computed(()=>{if(n.value.length===1)return 1;const p=Math.min(n.value.length,Math.floor(f.value/i.value)),w=n.value.length-p;let _=p;return w&&(_=Math.max(0,p-1)),Math.min(a,_<Li?0:_)}),d=o.computed(()=>l.value&&n.value.indexOf(l.value)>=u.value?n.value.slice(u.value?u.value-1:0).filter(w=>l.value!==w):n.value.slice(u.value)),h=o.computed(()=>{const p=n.value.slice(0,u.value);return l.value&&!p.find(w=>{var _;return w.fonticon===((_=l.value)==null?void 0:_.fonticon)})&&(p.pop(),p.push(l.value)),p});function v(p){var w,_;((w=l.value)==null?void 0:w.fonticon)===p.fonticon?(p.active=!1,l.value=void 0):(p.active=!0,l.value=p),(_=p.handler)==null||_.call(p,p)}const m=o.computed(()=>d.value.map(p=>({fonticon:`${p.fonticon} ${p.color}`,text:p.text,handler(){v(p)}})));return(p,w)=>{const _=o.resolveDirective("tooltip");return o.openBlock(),o.createElementBlock("div",{ref:"container",class:o.normalizeClass(["flex flex-row overflow-hidden grow items-center",{"justify-end":!p.leftAlign,"justify-start":p.leftAlign}])},[o.createVNode(o.TransitionGroup,{name:"scale"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(h.value,S=>{var x;return o.openBlock(),o.createElementBlock("div",{key:S.fonticon,class:o.normalizeClass(["!no-underline rounded-full icon-list-item cursor-pointer flex justify-center items-center text-lg",[S.className,{"w-[64px] h-[64px] max-w-[64px] max-h-[64px]":!s.value,"w-[38px] h-[38px] max-w-[38px] max-h-[38px]":s.value,selected:((x=l.value)==null?void 0:x.fonticon)===S.fonticon}]]),onClick:V=>v(S)},[o.createElementVNode("div",Vi,[o.withDirectives(o.createVNode(Te,{active:l.value?l.value.fonticon===S.fonticon:!1,color:`rounded-full p-2 transition-all duration-500
            ${l.value?l.value.fonticon!==S.fonticon?S.color:`text-white ${S.bgcolor}`:S.color}`,icon:`${S.fonticon} text-lg`},null,8,["active","color","icon"]),[[_,p.hideText?S.text:void 0]]),p.hideText?o.createCommentVNode("",!0):(o.openBlock(),o.createElementBlock("span",{key:0,class:o.normalizeClass(["text-xs leading-tight text-ellipsis max-w-full overflow-hidden text-center line-clamp-1",`${l.value?l.value.fonticon!==S.fonticon?"text-grey-6":"text-grey-8":"text-grey-6"}`])},o.toDisplayString(S.text),3))])],10,Mi)}),128))]),_:1}),m.value.length?(o.openBlock(),o.createBlock(ho,{key:0,items:m.value,position:"bottom-right"},{default:o.withCtx(()=>[o.createElementVNode("div",{class:o.normalizeClass(["flex flex-col justify-center items-center gap-1",{"w-[64px]":!s.value,"w-[38px]":s.value}])},[o.createVNode(Te,{color:"rounded-full p-2 fonticon-clickable",icon:"menu-dot text-lg"}),p.hideText?o.createCommentVNode("",!0):(o.openBlock(),o.createElementBlock("span",Ui,o.toDisplayString(o.unref(r).more),1))],2)]),_:1},8,["items"])):o.createCommentVNode("",!0)],2)}}}),ji={class:"flex flex-col gap-2.5"},Wi={class:"flex flex-col grow gap-2"},zi=o.defineComponent({__name:"container-tile-placeholder",props:{n:{type:Number,default:1}},setup(e){const t=crypto.randomUUID();function n(s,a){return Math.floor(Math.random()*(a-s+1)+s)}return(s,a)=>(o.openBlock(),o.createElementBlock("div",ji,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.n,i=>(o.openBlock(),o.createElementBlock("div",{id:"thread-tile-placeholder",key:`placeholder-tile-${o.unref(t)}-${i}`,class:"flex items-center gap-2 px-1.5"},[a[1]||(a[1]=o.createElementVNode("div",{class:"h-[38px] w-[50px] rounded","data-placeholder":""},null,-1)),o.createElementVNode("div",Wi,[a[0]||(a[0]=o.createElementVNode("div",{class:"h-2 grow","data-placeholder":""},null,-1)),o.createElementVNode("div",{class:"h-2","data-placeholder":"",style:o.normalizeStyle(`width: ${n(20,80)}%`)},null,4)])]))),128))]))}}),Hi={class:"media-thumbnail-view-container h-full w-[50px]"},Gi={class:"info-section flex flex-col"},Yi={key:0},Qi=["innerHTML"],Xi={key:0,ref:"actionMenu",class:"tile-action-menu"},Ki={key:0,class:"fonticon fonticon-record"},Ji={key:1,class:"w-2"},ft=Jt(o.defineComponent({__name:"container-tile",props:{icon:{default:""},colorIcon:{default:""},name:{default:""},unread:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},dropdownOptions:{default:()=>[]},transparent:{type:Boolean,default:!1},optionsVisible:{type:Boolean,default:!1},backgroundColor:{type:Boolean,default:!1},displayTitleAsHtml:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=e,s=t,a=o.inject(no),i=o.useTemplateRef("container"),[r,l]=js(!1);function c(){var d,h;(h=(d=i.value)==null?void 0:d.scrollIntoViewIfNeeded)==null||h.call(d,{behavior:"smooth"})}Mt(()=>n.selected,c);const f=o.useTemplateRef("actionMenu");function u(d){var h;(h=f.value)!=null&&h.contains(d.target)||s("click")}return o.onMounted(()=>{n.selected&&c()}),(d,h)=>{const v=o.resolveDirective("tooltip");return o.openBlock(),o.createElementBlock("div",{ref:"container",class:o.normalizeClass(["thread-view rounded-md",[{"menu-is-open":o.unref(r),selected:d.selected,"with-unread-content font-bold":d.unread,"bg-transparent":n.transparent,"border-solid border border-grey-4 bg-grey-1":!n.transparent,"options-visible":d.optionsVisible}]]),onClick:u},[o.createElementVNode("div",Hi,[o.createVNode(to,{class:"h-full"},{default:o.withCtx(()=>[o.renderSlot(d.$slots,"image",{},()=>[o.createElementVNode("div",{class:o.normalizeClass(["h-full flex items-center rounded justify-center",[{"bg-grey-4":n.backgroundColor}]])},[d.icon?(o.openBlock(),o.createBlock(Te,{key:0,class:"text-2xl",color:n.colorIcon,icon:d.icon},null,8,["color","icon"])):o.createCommentVNode("",!0)],2)],!0)]),_:3})]),o.createElementVNode("div",Gi,[o.renderSlot(d.$slots,"title",{},()=>[d.name?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(["line-clamp-2 title",[{"font-bold":d.unread,"!line-clamp-1":!!d.$slots.description}]])},[d.displayTitleAsHtml?(o.openBlock(),o.createElementBlock("span",{key:1,innerHTML:d.name},null,8,Qi)):(o.openBlock(),o.createElementBlock("span",Yi,o.toDisplayString(o.unref(Fn)(d.name)),1))],2)):o.createCommentVNode("",!0)],!0),o.renderSlot(d.$slots,"description",{},void 0,!0)]),d.unread||d.dropdownOptions.length?(o.openBlock(),o.createElementBlock("div",Xi,[d.unread?(o.openBlock(),o.createElementBlock("span",Ki)):o.createCommentVNode("",!0),!o.unref(Ds)()&&d.dropdownOptions.length>1?(o.openBlock(),o.createBlock(ho,{key:1,attach:o.unref(a)?!1:".left-panel-container .vu-scroll-container__inner",items:d.dropdownOptions,position:"bottom-right",onClick:o.unref(l),onClose:o.unref(l)},{default:o.withCtx(()=>h[1]||(h[1]=[o.createElementVNode("span",{class:"fonticon fonticon-clickable fonticon-chevron-down chevron-menu-icon"},null,-1)])),_:1},8,["attach","items","onClick","onClose"])):d.dropdownOptions.length===1?o.withDirectives((o.openBlock(),o.createElementBlock("span",{key:2,class:o.normalizeClass(`fonticon fonticon-clickable fonticon-${d.dropdownOptions[0].fonticon}`),onClick:h[0]||(h[0]=o.withModifiers(m=>d.dropdownOptions[0].handler&&d.dropdownOptions[0].handler(d.dropdownOptions[0]),["stop"]))},null,2)),[[v,d.dropdownOptions[0].text]]):o.createCommentVNode("",!0)],512)):(o.openBlock(),o.createElementBlock("span",Ji))],2)}}}),[["__scopeId","data-v-e0ad6f8b"]]),Zi={key:0,class:"count-badge"},qi=Jt(o.defineComponent({__name:"circle-counter",props:{count:{}},setup(e){const t=e;return(n,s)=>n.count?(o.openBlock(),o.createElementBlock("div",Zi,o.toDisplayString(t.count<99?t.count:"+99"),1)):o.createCommentVNode("",!0)}}),[["__scopeId","data-v-79ff29ce"]]),$i={class:"threads-section"},er={class:"flex"},tr={class:"flex gap-2 items-center"},nr={key:0,class:"flex items-center justify-center w-[38px] h-[26px]"},or={key:1,id:"threads-section-body",class:"item-list-body grid"},sr={key:0,class:"threads-no-result"},ar={class:"drop-zone-placeholder"},ir={key:1,class:"threads-no-result"},rr={id:"no-result-message"},yo=Jt(o.defineComponent({__name:"left-panel-section",props:o.mergeModels({threadSectionName:{},hideSectionHeader:{type:Boolean},threads:{},loading:{type:Boolean},searchedValue:{},canDnd:{type:Boolean},addYourThreadMessage:{default:""},emptyListMessage:{default:""},noResultMessage:{default:""},hasUnreadThread:{type:Boolean},isFilteredUnread:{type:Boolean},countUnreadThreadMessage:{default:0},nbPlaceholderWhileLoading:{default:3},enableExpandAndCollapse:{type:Boolean},isSelected:{type:Boolean}},{isExpanded:{default:!0},isExpandedModifiers:{}}),emits:o.mergeModels(["addNewThread"],["update:isExpanded"]),setup(e,{emit:t}){const n=e,s=t,a=o.useModel(e,"isExpanded");return(i,r)=>(o.openBlock(),o.createElementBlock("div",$i,[i.hideSectionHeader?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"header",{key:0},()=>[o.createElementVNode("div",{id:"threads-section-header",class:o.normalizeClass(["flex justify-between h-[38px] gap-2 items-center",{selected:n.isSelected,"cursor-pointer":i.enableExpandAndCollapse}]),onClick:r[0]||(r[0]=l=>i.enableExpandAndCollapse?a.value=!a.value:null)},[o.createElementVNode("div",er,[i.enableExpandAndCollapse?(o.openBlock(),o.createBlock(ni,{key:0,class:"!text-3xs expanded-icon",icon:a.value?"expand-down":"expand-right"},null,8,["icon"])):o.createCommentVNode("",!0),o.createElementVNode("div",tr,[o.createElementVNode("h5",{id:"title",class:o.normalizeClass(["text-lg sm:text-md text-grey-8 m-0 line-clamp-1 break-words text-ellipsis",{"pl-1.5":!i.enableExpandAndCollapse}])},o.toDisplayString(n.threadSectionName),3),o.renderSlot(i.$slots,"postSectionTitle",{},void 0,!0)])]),n.hasUnreadThread||n.isFilteredUnread?(o.openBlock(),o.createElementBlock("div",nr,[o.createVNode(qi,{count:i.countUnreadThreadMessage},null,8,["count"])])):o.createCommentVNode("",!0)],2)],!0),a.value?(o.openBlock(),o.createElementBlock("div",or,[n.loading?(o.openBlock(),o.createBlock(zi,{key:0,n:n.nbPlaceholderWhileLoading},null,8,["n"])):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(n.threads,(l,c)=>(o.openBlock(),o.createBlock(to,{key:l.subject_uri,height:"50px",style:o.normalizeStyle(l.position?{order:l.position}:{})},{default:o.withCtx(()=>[o.renderSlot(i.$slots,"threadTile",{index:c,list:n.threads,thread:l},void 0,!0)]),_:2},1032,["style"]))),128)),o.renderSlot(i.$slots,"sectionDnd",{},void 0,!0)])):o.createCommentVNode("",!0),!n.threads.length&&!n.loading&&a.value?(o.openBlock(),o.createElementBlock(o.Fragment,{key:2},[n.searchedValue?(o.openBlock(),o.createElementBlock("div",sr,[r[2]||(r[2]=o.createElementVNode("span",{class:"fonticon fonticon-search"},null,-1)),o.createElementVNode("span",null,o.toDisplayString(n.noResultMessage),1)])):o.renderSlot(i.$slots,"more",{key:1},()=>[n.canDnd?(o.openBlock(),o.createElementBlock("div",{key:0,class:"drop-zone-default !border-grey-4 !text-grey-6 cursor-pointer",onClick:r[1]||(r[1]=l=>s("addNewThread"))},[r[3]||(r[3]=o.createElementVNode("span",{class:"fonticon fonticon-plus text-xl"},null,-1)),o.createElementVNode("span",ar,o.toDisplayString(n.addYourThreadMessage),1)])):(o.openBlock(),o.createElementBlock("div",ir,[r[4]||(r[4]=o.createElementVNode("span",{class:"fonticon fonticon-chat mr-1"},null,-1)),o.createElementVNode("span",rr,o.toDisplayString(n.emptyListMessage),1)]))],!0)],64)):o.createCommentVNode("",!0)]))}}),[["__scopeId","data-v-960ccda6"]]),lr={class:"thread-picker_view-container"},cr={class:"tab-picker-tabs"},dr={class:"tab tab-picker-tabs-navigation"},ur=["onClick"],fr=o.defineComponent({__name:"tab-picker",props:o.mergeModels({items:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=o.useModel(e,"modelValue");return(n,s)=>(o.openBlock(),o.createElementBlock("div",lr,[o.createElementVNode("div",cr,[o.createElementVNode("nav",dr,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(n.items,a=>(o.openBlock(),o.createElementBlock("a",{key:a.label,class:o.normalizeClass(["tab-item",{active:t.value===a}]),onClick:i=>t.value=a},[o.createVNode(Te,{icon:a.fonticon},null,8,["icon"]),o.createTextVNode(" "+o.toDisplayString(a.label),1)],10,ur))),128))])])]))}}),pr={class:"w-full"},wo=o.defineComponent({__name:"destination-tile",props:{selectedThread:{},hideOption:{type:Boolean}},emits:["update:selected-thread"],setup(e,{emit:t}){const n=t;return(s,a)=>(o.openBlock(),o.createElementBlock("div",pr,[o.createVNode(o.unref(ft),{class:"bg-grey-2 border-solid","dropdown-options":[{fonticon:"times",handler:()=>{n("update:selected-thread",{})}}],name:s.selectedThread.label,"options-visible":!s.hideOption,onClick:a[0]||(a[0]=i=>n("update:selected-thread",{}))},{image:o.withCtx(()=>[o.renderSlot(s.$slots,"tileImage",{selectedThread:s.selectedThread})]),_:3},8,["dropdown-options","name","options-visible"])]))}});function le(e,t="i18n!DS/SwymVuePublishForm/assets/nls/"){const n=o.ref({}),s=new Promise(async i=>{try{const[r]=await Ee([`${t}${e}`]);n.value=Object.assign(o.unref(n),r)}catch{}i(n.value)});function a(i,r={}){if(!i)return"";let l=o.unref(n)[i];return Object.entries(r).forEach(([c,f])=>{l=l==null?void 0:l.replace(`{${c}}`,f)}),l||i}return{i18n:n,$i18n:a,promise:s}}const hr={class:"thread-selector-wrapper grid grid-cols-1 grid-rows-[auto_minmax(0,1fr)] gap-1 w-full pt-[0.875rem]"},mr={class:"flew flex-cols gap-5"},vr={class:"relative search-thread-container"},yr={key:0},wr={key:1,class:"no-thread-found"},go=X(o.defineComponent({__name:"threads-section",props:o.mergeModels({sectionList:{},sourceType:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{$i18n:t}=le("content-type-selector"),n=o.useModel(e,"modelValue");return(s,a)=>{const i=o.resolveComponent("vu-input"),r=o.resolveComponent("vu-icon"),l=o.resolveComponent("vu-scroller");return o.openBlock(),o.createElementBlock("div",hr,[o.createElementVNode("div",mr,[o.createElementVNode("div",vr,[o.createVNode(i,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=c=>n.value=c),class:"select-thread-input !pr-10",placeholder:s.sourceType==="Community"?o.unref(t)("placeholderSearchCommunity"):o.unref(t)("placeholderSearchConversation")},null,8,["modelValue","placeholder"]),o.createVNode(r,{class:"absolute right-0 top-0 w-9 flex items-center justify-center text-large !text-grey-5",icon:"search"})])]),s.sectionList.length>0?(o.openBlock(),o.createElementBlock("div",yr,[o.createVNode(l,{class:"thread-list-scroller pt-1"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(s.sectionList,c=>(o.openBlock(),o.createElementBlock("div",{key:c.id},[o.createVNode(o.unref(yo),{class:"visible-other-threads-container","empty-list-message":o.unref(t)("EmptyList"),"has-unread-thread":!1,"is-filtered-unread":!1,"nb-placeholder-while-loading":3,"no-result-message":o.unref(t)("NoResult"),"thread-section-name":c.isFavorite?o.unref(t)("Favorites"):c.name,threads:c.threads},{threadTile:o.withCtx(({thread:f})=>[o.renderSlot(s.$slots,"sectionThread",{item:c,thread:f},void 0,!0)]),_:2},1032,["empty-list-message","no-result-message","thread-section-name","threads"])]))),128))]),_:3})])):(o.openBlock(),o.createElementBlock("div",wr,[o.createElementVNode("span",null,o.toDisplayString(s.sourceType==="conversation"?o.unref(t)("NoConversationFound"):o.unref(t)("NoCommunityFound")),1)]))])}}}),[["__scopeId","data-v-50333166"]]);function gr(e){var t;return{id:e.uri,category:e.category,name:e.name,position:e.read_only?e.read_only_position:e.position,isFavorite:e.read_only&&e.read_only_position===0,isReadOnly:e.read_only||!1,threads:((t=e.items)==null?void 0:t.map(n=>({threadId:zt(n.subject_uri),position:n.position})))||[]}}const en=$.extend({hooks:{beforeRequest:[Bt(P.COMMENT),De(P.COMMENT)],afterResponse:[(...e)=>ot(P.COMMENT,en)(...e),(...e)=>Oe(en,$)(...e)]}});function _o(e){return en.get(`/api/v2/sections/${e}`).json().then(t=>t.result.map(gr))}function je(){return Q("current-user",()=>F.get("/api/user/getcurrent").json(),6e4)}function bo({query:e,communityUri:t,limit:n=5,page:s=0,locale:a="en"}){return Q(`search-user-${t?`${t}-`:""}${e}`,()=>F.post("/api/user/search",{json:{params:{query:e,community_id:t,limit:n,start:s,locale:a}}}).json(),6e4)}const _r=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser:je,searchUser:bo},Symbol.toStringTag,{value:"Module"})),pt=o.reactive(new Map);function Co({type:e,threadMap:t}){const n=o.reactive(new Map);function s(){pt.clear(),n.clear()}async function a(){var l;let r;if(e.value==="community")r=await _o(e.value);else if(e.value==="externaldm"){const c=(l=(await je()).result)==null?void 0:l.login;r=await xa(c,B())}else if(e.value==="dm")r=await _o("conversation");else return[];pt.set(e.value,new Map(r.map(c=>[c.id,c])))}const i=o.computed(()=>{n.clear();const r=pt.get(e.value);return r?[...r.values()].map(l=>({...l,threads:l.threads.map(c=>{n.set(c.threadId,c);const f=t==null?void 0:t.value.get(c.threadId);if(f)return{...f,position:c.position}}).filter(c=>!!c)})).sort((l,c)=>l.position>c.position?1:c.position>l.position?-1:0):[]});return{sections:pt,sectionsList:i,sectionedThreads:n,fetchSections:a,resetData:s}}class O{static removeDotSegments(t){var n=[];function s(a){a==="/.."?n.pop():n.push(a)}return t.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^/]*/g,s),n.join("").replace(/^\//,t.charAt(0)==="/"?"/":"")}static buildUrl(t,n){var s=window.location&&window.location.protocol?window.location.protocol:"http:";if(t=String(t),n=String(n),!O.isAbsoluteUrl(t))throw new Error("First argument should be a absolute url.");t.substring(0,2)==="//"&&(t=s+t);var a,i,r=String(t).split("://"),l=r[0],c=r[1],f=c.split("/"),u=f[0],d="";if(n.substring(0,2)==="//")t=l+":"+n;else if(n.split("://").length>1)t=n;else if(n.substring(0,1)==="/")t=l+"://"+u+n;else{for(a=1,i=f.length-1;a<i;a++)d+="/"+f[a];t=l+"://"+u+O.removeDotSegments(d+"/"+n)}return t}static parseUrl(t){var n=["source","subprotocol","protocol","authority","user","password","domain","port","path","directoryPath","fileName","query","anchor"],s=new RegExp("^(?:(?:(?:([^#.:]+):)?([^#.:]+):)?//)?((?:([^:/]+)(?::([^/]*?))?@)?([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?"),a,i=s.exec(t),r={};for(a=0;a<n.length;a++)r[n[a]]=i[a]||"";return r.subprotocol&&(r.source=r.source.substr(r.subprotocol.length+1)),r.port||(r.port=r.protocol==="https"?"443":"80"),r.directoryPath&&r.directoryPath.length>0&&(r.directoryPath=r.directoryPath.replace(/\/?$/,"/")),r.domain=r.domain.toLocaleLowerCase(),r.protocol=r.protocol.toLocaleLowerCase(),r}static composeUrl(t){var n="";return t.protocol&&(n=t.protocol+"://",t.subprotocol&&(n=t.subprotocol+":"+n)),t.domain?(n+=t.domain,t.port&&(t.protocol!=="http"||parseInt(t.port,10)!==80)&&(t.protocol!=="https"||parseInt(t.port,10)!==443)&&(n+=":"+t.port)):t.authority&&(n+=t.authority),t.path&&(n+=t.path),t.query&&(n+="?"+t.query),t.anchor&&(n+="#"+t.anchor),n}static matchUrl(t,n){var s,a,i=!1,r=O.isAbsoluteUrl(t),l=O.isAbsoluteUrl(n);return!r&&!l?i=!0:(r?l||(n=O.buildUrl(t,n)):t=O.buildUrl(n,t),s=O.parseUrl(t),a=O.parseUrl(n),i=["domain","protocol","port"].every(function(c){return s[c]===a[c]||c==="protocol"&&(s[c]===""||a[c]==="")})),i}static isAbsoluteUrl(t){var n=/^((https?|ftp|file):)?\/\//;return n.test(t)}static toQueryString(t,n){var s,a,i,r;if(O.is(t,"string"))r=t;else if(O.is(t.toQueryString,"function"))r=t.toQueryString();else{r=[];for(s in t)t.hasOwnProperty(s)&&(a=t[s],n&&(s=n+"["+O.capitalize(s)+"]"),O.is(a)&&(O.is(a,"object")||O.is(a,"array")?i=O.toQueryString(a,s):O.is(a,"function")||(i=O.encodeUrl(s)+"="+O.encodeUrl(a))),i&&r.push(i),i=void 0);r=r.join("&")}return r}static is(t,n){return t&&n?typeof t===n:t?typeof t<"u":!1}static encodeUrl(t){return encodeURIComponent(t).replace(/\./g,"%2e")}static capitalize(t,n="-"){const s=t.split(n);for(let a=0;a<s.length;a++)s[a]=s[a][0].toUpperCase()+s[a].substr(1);return s.join(n)}}class he{constructor(){}static get proxies(){const t=J.getNativeAppRequireConfig();if(t&&t.proxies)return t.proxies;const n=window.UWA&&window.UWA.hosts||{},a=n.exposition+"/proxy/",i=n.proxies||{};return Object.assign(Object.assign({},i),{ajax:a+"ajax",resolve:a+"resolve",xml:a+"xml",spreadsheet:a+"spreadsheet",soap:a+"soap",feed:a+"feed",icon:a+"icon",richIcon:a+"richIcon",rss:a+"feed"})}static normalizeRequestHeaders(t){let n={};return t.headers.forEach((s,a)=>{n[a]=s}),n}static checkHasProxyPath(t){if(J.isNativeApp()){const n=J.getNativeAppRequireConfig();if(n&&n.proxies){for(const s in n.proxies)if(t.startsWith(n.proxies[s]))return!0}}return!1}static request(t,n,s){return se(this,void 0,void 0,function*(){if(!t)throw new Error("Bad or missing url argument.");if(!J.isNativeApp()||O.matchUrl(t,window.location))return s;n=n||{};var a,i=window.location,r="ajax",l=n;l.headers&&!l.normalizedHeaders&&(l.normalizedHeaders=he.normalizeRequestHeaders(s)),l.proxy?t=he.proxifyUrl(t,l):O.matchUrl(t,i)===!1&&he.allowCrossOriginRequest===!1&&(t=he.proxifyUrl(t,Object.assign(Object.assign({},l),{proxy:r})));const c=["GET","HEAD"].includes(s.method)?void 0:yield s.blob();return l.body=c,a=new Request(t,l),a})}static proxifyUrl(t,n){if(!t)throw new Error("Bad or missing url argument.");var s,a=[],i=n.proxy,r=O.toQueryString,l=he.proxies;if(i&&l[i]){if(!J.isNativeApp()||O.matchUrl(t,window.location)||(s=l[i],t.indexOf(s)===0))return t;if(t.startsWith("https://")&&t.indexOf(":443")>-1&&(t=t.replace(":443","")),n.body&&n.method&&n.method.toUpperCase()==="GET"&&(t+=(t.indexOf("?")>-1?"&":"?")+r(n.body),console.log("DEBUG test proxification handle get",t)),typeof n.proxy=="object"&&a.push(r(n.proxy)),n.normalizedHeaders?a.push(r(n.normalizedHeaders,"headers")):n.headers&&a.push(r(n.headers,"headers")),n.method&&a.push(r({method:n.method})),a.push(r({url:t})),t=s+"?"+a.join("&"),t.length>4096)throw console.log("Error proxify url too long",t),new Error("Proxified url is more than 4096 characters, that is the limit for most of the browsers.")}else throw new Error("Invalid proxy");return t}}he.allowCrossOriginRequest=!1;function Pe(e,t){try{return he.proxifyUrl(e,{proxy:"passport",...t})}catch(n){return console.error(e,n),e}}const br=["src"],Eo=o.defineComponent({__name:"media-thumbnail",props:{id:{},model:{},size:{default:"s"},navigation:{type:Boolean,default:!1},fingerprint:{default:""}},setup(e){const t=e;function n(){const s=t.model;let a=`${re()}/api/media/streammedia/model/${s}/model_id/${t.id}/type/thumb/key/${t.size}_thumb`;return t.fingerprint&&(a=`${a}/update/${t.fingerprint}`),Pe(a)}return(s,a)=>(o.openBlock(),o.createElementBlock("img",{class:"max-h-full max-w-full",src:n()},null,8,br))}}),tn=1e3,Cr="last-conversation-section-id",Er="last-community-section-id";function Sr(e){return o.getCurrentScope()?(o.onScopeDispose(e),!0):!1}function _e(e){return typeof e=="function"?e():o.unref(e)}const j=_e,kr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ar=e=>typeof e<"u",We=()=>{};function So(e,t){function n(...s){return new Promise((a,i)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(a).catch(i)})}return n}function Tr(e,t={}){let n,s,a=We;const i=l=>{clearTimeout(l),a(),a=We};return l=>{const c=_e(e),f=_e(t.maxWait);return n&&i(n),c<=0||f!==void 0&&f<=0?(s&&(i(s),s=null),Promise.resolve(l())):new Promise((u,d)=>{a=t.rejectOnCancel?d:u,f&&!s&&(s=setTimeout(()=>{n&&i(n),s=null,u(l())},f)),n=setTimeout(()=>{s&&i(s),s=null,u(l())},c)})}}function Pr(...e){let t=0,n,s=!0,a=We,i,r,l,c,f;!o.isRef(e[0])&&typeof e[0]=="object"?{delay:r,trailing:l=!0,leading:c=!0,rejectOnCancel:f=!1}=e[0]:[r,l=!0,c=!0,f=!1]=e;const u=()=>{n&&(clearTimeout(n),n=void 0,a(),a=We)};return h=>{const v=_e(r),m=Date.now()-t,p=()=>i=h();return u(),v<=0?(t=Date.now(),p()):(m>v&&(c||!s)?(t=Date.now(),p()):l&&(i=new Promise((w,_)=>{a=f?_:w,n=setTimeout(()=>{t=Date.now(),s=!0,w(p()),u()},Math.max(0,v-m))})),!c&&!n&&(n=setTimeout(()=>s=!0,v)),s=!1,i)}}function xr(e,t){var n;if(typeof e=="number")return e+t;const s=((n=e.match(/^-?\d+\.?\d*/))==null?void 0:n[0])||"",a=e.slice(s.length),i=Number.parseFloat(s)+t;return Number.isNaN(i)?e:i+a}function Nr(e){return o.getCurrentInstance()}function Ir(...e){if(e.length!==1)return o.toRef(...e);const t=e[0];return typeof t=="function"?o.readonly(o.customRef(()=>({get:t,set:We}))):o.ref(t)}const xe=Ir;function Rr(e,t=200,n={}){return So(Tr(t,n),e)}function Or(e,t=200,n={}){const s=o.ref(e.value),a=Rr(()=>{s.value=e.value},t,n);return o.watch(e,()=>a()),s}function ko(e,t=200,n=!1,s=!0,a=!1){return So(Pr(t,n,s,a),e)}function Br(e,t=200,n=!0,s=!0){if(t<=0)return e;const a=o.ref(e.value),i=ko(()=>{a.value=e.value},t,n,s);return o.watch(e,()=>i()),a}function Ao(e,t){Nr()&&o.onBeforeUnmount(e,t)}function Dr(e=0,t={}){let n=o.unref(e);const s=o.ref(e),{max:a=Number.POSITIVE_INFINITY,min:i=Number.NEGATIVE_INFINITY}=t,r=(d=1)=>s.value=Math.max(Math.min(a,s.value+d),i),l=(d=1)=>s.value=Math.min(Math.max(i,s.value-d),a),c=()=>s.value,f=d=>s.value=Math.max(i,Math.min(a,d));return{count:s,inc:r,dec:l,get:c,set:f,reset:(d=n)=>(n=d,f(d))}}function To(e,t,n){return o.watch(e,(a,i,r)=>{a&&t(a,i,r)},{...n,once:!1})}const Po=kr?window:void 0;function Mr(){const e=o.ref(!1),t=o.getCurrentInstance();return t&&o.onMounted(()=>{e.value=!0},t),e}function Vr(e){const t=Mr();return o.computed(()=>(t.value,!!e()))}function ze(e,t={}){const{window:n=Po}=t,s=Vr(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let a;const i=o.ref(!1),r=f=>{i.value=f.matches},l=()=>{a&&("removeEventListener"in a?a.removeEventListener("change",r):a.removeListener(r))},c=o.watchEffect(()=>{s.value&&(l(),a=n.matchMedia(_e(e)),"addEventListener"in a?a.addEventListener("change",r):a.addListener(r),i.value=a.matches)});return Sr(()=>{c(),l(),a=void 0}),i}function Ur(e,t={}){function n(u,d){let h=_e(e[_e(u)]);return d!=null&&(h=xr(h,d)),typeof h=="number"&&(h=`${h}px`),h}const{window:s=Po,strategy:a="min-width"}=t;function i(u){return s?s.matchMedia(u).matches:!1}const r=u=>ze(()=>`(min-width: ${n(u)})`,t),l=u=>ze(()=>`(max-width: ${n(u)})`,t),c=Object.keys(e).reduce((u,d)=>(Object.defineProperty(u,d,{get:()=>a==="min-width"?r(d):l(d),enumerable:!0,configurable:!0}),u),{});function f(){const u=Object.keys(e).map(d=>[d,r(d)]);return o.computed(()=>u.filter(([,d])=>d.value).map(([d])=>d))}return Object.assign(c,{greaterOrEqual:r,smallerOrEqual:l,greater(u){return ze(()=>`(min-width: ${n(u,.1)})`,t)},smaller(u){return ze(()=>`(max-width: ${n(u,-.1)})`,t)},between(u,d){return ze(()=>`(min-width: ${n(u)}) and (max-width: ${n(d,-.1)})`,t)},isGreater(u){return i(`(min-width: ${n(u,.1)})`)},isGreaterOrEqual(u){return i(`(min-width: ${n(u)})`)},isSmaller(u){return i(`(max-width: ${n(u,-.1)})`)},isSmallerOrEqual(u){return i(`(max-width: ${n(u)})`)},isInBetween(u,d){return i(`(min-width: ${n(u)}) and (max-width: ${n(d,-.1)})`)},current:f,active(){const u=f();return o.computed(()=>u.value.length===0?"":u.value.at(-1))}})}function Lr(e){return JSON.parse(JSON.stringify(e))}function Fr(e,t,n,s={}){var a,i,r;const{clone:l=!1,passive:c=!1,eventName:f,deep:u=!1,defaultValue:d,shouldEmit:h}=s,v=o.getCurrentInstance(),m=n||(v==null?void 0:v.emit)||((a=v==null?void 0:v.$emit)==null?void 0:a.bind(v))||((r=(i=v==null?void 0:v.proxy)==null?void 0:i.$emit)==null?void 0:r.bind(v==null?void 0:v.proxy));let p=f;p=p||`update:${t.toString()}`;const w=x=>l?typeof l=="function"?l(x):Lr(x):x,_=()=>Ar(e[t])?w(e[t]):d,S=x=>{h?h(x)&&m(p,x):m(p,x)};if(c){const x=_(),V=o.ref(x);let D=!1;return o.watch(()=>e[t],k=>{D||(D=!0,V.value=w(k),o.nextTick(()=>D=!1))}),o.watch(V,k=>{!D&&(k!==e[t]||u)&&S(k)},{deep:u}),V}else return o.computed({get(){return _()},set(x){S(x)}})}const jr={key:0},Wr={key:1},zr=X(o.defineComponent({__name:"community-selector",props:{selectedCommunity:{},selectedTenantId:{},hideThreadSelector:{type:Boolean}},emits:["update:selected-community"],setup(e,{emit:t}){const n=e,s=t,{$i18n:a}=le("content-type-selector"),i=o.ref(""),r=o.ref(!1),l=o.ref([]),c=o.ref([]),f=o.reactive(new Map),u=o.ref("community"),d=o.ref(),h=o.computed(()=>a("Communities")),v=o.computed(()=>{const k=[...f.values()];return i.value.length?k.filter(A=>c.value.includes(A.subject_uri)).sort((A,M)=>A.title>M.title?1:-1):k.filter(A=>{var M;return A.is_hidden===!1||!((M=d.value)!=null&&M.has(A.subject_uri))}).sort((A,M)=>A.title>M.title?1:-1)}),m=o.computed(()=>new Map(v.value.map(k=>[k.id,k]))),{sectionsList:p,sectionedThreads:w,fetchSections:_,resetData:S}=Co({type:u,threadMap:m});o.watch(()=>n.selectedTenantId,async()=>{f.clear(),S(),i.value="",_().then(D)},{immediate:!0});const x=o.computed(()=>(v.value||[]).filter(k=>!w.get(k.id)&&!k.is_hidden)),V=o.computed(()=>({name:h.value,position:p.value.length+1,id:Er,isExpanded:!0,threads:x.value,isReadOnly:!0}));o.watch([p,V],()=>{l.value=[...p.value,V.value],l.value=l.value.filter(k=>k.threads.length>0)},{immediate:!0});async function D(){try{r.value=!0,(await ga()).result.forEach(A=>{const M=f.get(A.subject_uri)||{};f.set(A.subject_uri,Object.assign(M,A))})}catch{}r.value=!1}return Ao(o.watch(Or(i,tn),async k=>{if(k.length){const A=await _a({favorites:"with",hidden:"with",query:k,my_community:!0,select_predicate:void 0,page:0,limit:100});c.value=A.map(M=>M.subject_uri)}},{immediate:!0})),(k,A)=>{const M=o.resolveDirective("mask");return!k.selectedCommunity||!k.selectedCommunity.value?(o.openBlock(),o.createElementBlock("div",jr,[o.withDirectives((o.openBlock(),o.createBlock(go,{modelValue:o.unref(i),"onUpdate:modelValue":A[0]||(A[0]=U=>o.isRef(i)?i.value=U:null),"section-list":o.unref(l),"source-type":"Community"},{sectionThread:o.withCtx(({thread:U})=>[(o.openBlock(),o.createBlock(o.unref(ft),{key:U.subject_uri,class:"border-t border-grey-4 !rounded-none community-tile",name:U.title,transparent:"",onClick:me=>s("update:selected-community",{value:U.subject_uri,label:U.title})},{image:o.withCtx(()=>[o.createVNode(Eo,{id:U.id,class:"rounded",model:"community"},null,8,["id"])]),_:2},1032,["name","onClick"]))]),_:1},8,["modelValue","section-list"])),[[M,o.unref(r)]])])):(o.openBlock(),o.createElementBlock("div",Wr,[o.createVNode(wo,{"hide-option":k.hideThreadSelector,"selected-thread":k.selectedCommunity,"onUpdate:selectedThread":A[1]||(A[1]=U=>s("update:selected-community",U))},{tileImage:o.withCtx(({selectedThread:U})=>[o.createVNode(Eo,{id:U.id,class:"rounded",model:"community"},null,8,["id"])]),_:1},8,["hide-option","selected-thread"])]))}}}),[["__scopeId","data-v-370f38c7"]]),Hr={text:"Posts",singular:"Post",model:C.Post,fonticon:"newspaper",color:"text-color-post",bgcolor:"bg-color-post",bordercolor:"border-color-post",canDraft:!0,canExportAsPdf:!0,order:1,autosave:{creation:!0,edition:!0},backend:{is_enabled_token:"post_is_enabled",min_acl_token:"post_min_acl",default_type_for_creation:"Post"}},Gr={text:"Media",singular:"Media",model:C.Media,fonticon:"picture",color:"text-color-media",bgcolor:"bg-color-media",bordercolor:"border-color-media",canDraft:!0,order:2,autosave:{},backend:{is_enabled_token:"media_is_enabled",min_acl_token:"media_min_acl",default_type_for_creation:"Media"}},Yr={text:"Ideas",singular:"Idea",model:C.Idea,fonticon:"lamp",color:"text-color-idea",bgcolor:"bg-color-idea",bordercolor:"border-color-idea",canDraft:!0,canExportAsPdf:!0,order:3,autosave:{creation:!0,edition:!0},backend:{is_enabled_token:"ideation_is_enabled",min_acl_token:"ideation_min_acl",default_type_for_creation:"Idea"}},Qr={text:"Questions",singular:"Question",model:C.Question,fonticon:"comment-question",color:"text-color-question",bgcolor:"bg-color-question",bordercolor:"border-color-question",canDraft:!0,canExportAsPdf:!0,order:4,autosave:{creation:!0,edition:!0},backend:{is_enabled_token:"qna_is_enabled",min_acl_token:"qna_min_acl",default_type_for_creation:"Question"}},Xr={POST:Hr,MEDIA:Gr,IDEA:Yr,QUESTION:Qr};function nn(){const{$i18n:e}=le("content-types"),t=Object.fromEntries(Object.values(Xr).map(s=>[s.singular.toUpperCase(),o.computed(()=>({...s,text:e(s.text),singular:e(s.singular),create:e(`create${s.singular}`)}))])),n=s=>Object.values(t).find(a=>a.value.model===s);return{POST:t.POST,MEDIA:t.MEDIA,IDEA:t.IDEA,QUESTION:t.QUESTION,getContentType:n}}function Kr(e){const t=nn(),n=o.computed(()=>[t.POST.value,t.MEDIA.value,t.IDEA.value,t.QUESTION.value]);return{contents:o.computed(()=>{const a=j(e);if(!a||!a.user_access)return[];const i=[...n.value];return(!a.qna_is_enabled||a.qna_min_acl>a.user_access)&&i.splice(i.indexOf(t.QUESTION.value),1),(!a.ideation_is_enabled||a.ideation_min_acl>a.user_access)&&i.splice(i.indexOf(t.IDEA.value),1),(!a.post_is_enabled||a.post_min_acl>a.user_access)&&i.splice(i.indexOf(t.POST.value),1),(!Le("community.creation.media").value||!a.media_is_enabled||a.media_min_acl>a.user_access)&&i.splice(i.indexOf(t.MEDIA.value),1),i.sort((r,l)=>r.order===l.order?0:r.order>l.order?1:-1)}),allAvailableContentTypes:n}}function Jr(){const e=nn();return{contents:o.computed(()=>[e.POST.value,e.MEDIA.value,e.IDEA.value])}}function Zr(){const e=nn(),t=o.ref(!0),n=o.computed(()=>[e.POST.value,e.MEDIA.value]);return{contents:o.computed(()=>{const a=[...n.value];return Le("conversation.creation.post").value||a.splice(a.indexOf(e.POST.value),1),a.sort((i,r)=>i.order===r.order?0:i.order>r.order?1:-1)}),isUserAtLeastAuthor:t,allAvailableContentTypes:n}}const qr={key:0},$r={class:"pt-2 mb-0"},el={key:1,class:"flex community-access-error"},tl=X(o.defineComponent({__name:"content-type-selector",props:{threadId:{},contentType:{},createConvoFlag:{type:Boolean},isPersonalSpace:{type:Boolean},currentUser:{},platformId:{},isConversationSelected:{type:Boolean},availableContentTypes:{}},emits:["update:contentType","noType"],setup(e,{emit:t}){const n=e,s=t,a=o.ref(),i=o.ref(),r=o.ref(!1),l=Jr(),c=Zr(),f=Kr(a);o.onMounted(async()=>{r.value=!0,n.isConversationSelected&&!n.createConvoFlag?i.value=await Kt(n.currentUser,n.platformId,n.threadId):!n.isConversationSelected&&!n.isPersonalSpace&&(a.value=(await Kn(n.threadId)).result),r.value=!1});const u=m=>n.contentType===m,{$i18n:d}=le("content-types"),h=o.computed(()=>{let m=[];return n.isPersonalSpace?m=l.contents.value:i.value||n.createConvoFlag?m=c.contents.value:m=f.contents.value,m.length?m.map(p=>p.singular.includes("_")&&p.text.includes("_")?{...p,singular:p.singular.split("_")[2],text:p.text.split("_")[2],className:"w-[3em] max-w-[3em]"}:p):[]}),v=o.computed(()=>{let m=h.value;return n.availableContentTypes&&n.availableContentTypes.length>0&&(m=m.filter(p=>{var w;return(w=n.availableContentTypes)==null?void 0:w.includes(p.model)})),m.map(p=>({...p,active:u(p.model),handler:()=>s("update:contentType",p.model)}))});return o.watch(v,()=>{var m;v.value.find(p=>p.model===n.contentType)||s("update:contentType",(m=v.value[0])==null?void 0:m.model)}),Ao(o.watchEffect(()=>{var m,p;if(((m=v.value)==null?void 0:m.length)===1){const w=v.value[0];s("update:contentType",w.model)}((p=v.value)==null?void 0:p.length)>0?s("noType",!1):s("noType",!0)})),(m,p)=>{var S;const w=o.resolveComponent("vu-message"),_=o.resolveDirective("mask");return o.withDirectives((o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["content-type-selector-container",{"h-10":o.unref(r)}])},[(S=o.unref(v))!=null&&S.length&&!o.unref(r)?(o.openBlock(),o.createElementBlock("div",qr,[o.createElementVNode("h5",$r,o.toDisplayString(o.unref(d)("Type")),1),o.createVNode(o.unref(Fi),{class:"content-type-selector-icons h-24 gap-2",icons:o.unref(v),"left-align":""},null,8,["icons"])])):o.unref(r)?o.createCommentVNode("",!0):(o.openBlock(),o.createElementBlock("div",el,[o.createVNode(w,{class:"max-w-full",closable:!1,color:"error",icon:"true",show:""},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(d)("CannotPublishError")),1)]),_:1})]))],2)),[[_,o.unref(r)]])}}}),[["__scopeId","data-v-b8d8a220"]]),nl={"2xs":"300px",xs:"380px",tiny:"465px",sm:"640px",md:"768px","2md":"960px",lg:"1024px",xl:"1280px","2xl":"1536px"},ol=(()=>{const e={};for(const[t,n]of Object.entries(nl))e[t]=Number.parseInt(n,10);return Object.freeze(e)})(),sl=["src"],xo=o.defineComponent({__name:"media-user",props:{login:{default:void 0},hashKey:{default:void 0},hidePresence:{type:Boolean},mode:{default:""},fingerprint:{default:void 0}},setup(e){const t=e,n=o.toRef(t,"login"),s=o.toRef(t,"hashKey"),a=re(),i={tiny:"tiny",medium:"medium",compact:"small",small:"smedium",big:"big","2xl":"bigger","3xl":"blarge","":"medium"},r={tiny:"tiny",medium:"medium",compact:"small",small:"smalldium",big:"big","2xl":"bigger","3xl":"blarge","":"medium"};function l(){let m="/api/user/getpicture/";return n.value?m+=`login/${n.value}`:s.value&&(m+=`hash_key/${s.value}`),t.fingerprint&&(m+=`/fingerprint/${t.fingerprint}`),Pe(`${a}${m}`)}const c=Ur(ol).smaller("md"),f=o.computed(()=>c.value?r:i),u=o.ref(),d=o.shallowRef(),h=To(u,async m=>{var p;if(t.hidePresence||!n.value)return h();try{const[w,_]=await Ee(["DS/RTVueUserPresenceAPI/RTVueUserPresenceAPI","vuejs"]),S=_.extend(w);d.value=new S({propsData:{login:n.value,tenant:B(),swymUrl:a}}),d.value.$mount(),(p=m.parentElement)==null||p.replaceChild(d.value.$el,m),d.value.$el.classList.add(f.value[t.mode])}catch{}}),v=To(n,m=>{d.value&&(d.value.login=m)});return o.onBeforeUnmount(()=>{h(),v(),d.value&&d.value.$destroy()}),(m,p)=>(o.openBlock(),o.createElementBlock("img",{ref_key:"elRef",ref:u,class:"max-w-full max-h-full",src:l()},null,8,sl))}}),He=X(o.defineComponent({__name:"user-picture",props:{hidePresence:{type:Boolean},mode:{},userFullName:{},disableRichUserTooltip:{type:Boolean},disableUserLinkNavigation:{type:Boolean},userHashKey:{},userLogin:{}},emits:["close"],setup(e,{emit:t}){const n=o.inject("disableUserTooltipAndLinkNavigation",void 0);return(s,a)=>s.disableUserLinkNavigation||o.unref(n)?(o.openBlock(),o.createBlock(xo,{key:0,class:o.normalizeClass(["user-picture w-full h-full rounded-full aspect-square",[s.mode]]),fingerprint:s.fingerprint,hash_key:s.userHashKey,"hide-presence":s.hidePresence,login:s.userLogin,mode:s.mode},null,8,["class","fingerprint","hash_key","hide-presence","login","mode"])):o.createCommentVNode("",!0)}}),[["__scopeId","data-v-85f89fd8"]]),al={key:0,class:"grid grid-cols-2 grid-rows-2 overflow-hidden h-full w-full px-1.5"},il={class:"flex justify-center items-center"},rl={class:"h-2lg rounded-full self-center"},ll={key:0},cl={key:1},dl={class:"flex justify-center items-center"},ul={class:"h-2lg rounded-full self-center"},fl={key:2,class:"flex justify-center items-center"},pl={class:"h-2lg rounded-full self-center"},hl={key:3,class:"flex justify-center items-center"},ml={class:"h-2lg rounded-full self-center"},vl={key:4,class:"flex justify-center items-center"},yl={class:"h-2lg bg-grey-3 text-grey-7 rounded-full text-3xs overflow-hidden aspect-square flex items-center justify-center font-bold"},wl={key:1,class:"flex h-full justify-center"},gl={class:"w-8xl"},on=o.defineComponent({__name:"thread-tile-conversation-thumbnail",props:{thread:{},hidePresence:{type:Boolean},currentUser:{}},setup(e){const t=e,n=o.computed(()=>{if(t.thread.users.length===1)return t.thread.users;const s=t.thread.users.filter(a=>a.login!==t.currentUser);return s.length>4?s.slice(0,3):s.slice(0,4)});return(s,a)=>o.unref(n).length>1?(o.openBlock(),o.createElementBlock("div",al,[o.createElementVNode("div",il,[o.createElementVNode("div",rl,[o.createVNode(He,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"tiny","user-login":o.unref(n)[0].login},null,8,["hide-presence","user-login"])])]),o.unref(n).length===2?(o.openBlock(),o.createElementBlock("div",ll)):o.createCommentVNode("",!0),o.unref(n).length===2?(o.openBlock(),o.createElementBlock("div",cl)):o.createCommentVNode("",!0),o.createElementVNode("div",dl,[o.createElementVNode("div",ul,[o.createVNode(He,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"tiny","user-login":o.unref(n)[1].login},null,8,["hide-presence","user-login"])])]),o.unref(n)[2]?(o.openBlock(),o.createElementBlock("div",fl,[o.createElementVNode("div",pl,[o.createVNode(He,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"tiny","user-login":o.unref(n)[2].login},null,8,["hide-presence","user-login"])])])):o.createCommentVNode("",!0),o.unref(n)[3]?(o.openBlock(),o.createElementBlock("div",hl,[o.createElementVNode("div",ml,[o.createVNode(He,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"tiny","user-login":o.unref(n)[3].login},null,8,["hide-presence","user-login"])])])):o.createCommentVNode("",!0),s.thread.users.length>5?(o.openBlock(),o.createElementBlock("div",vl,[o.createElementVNode("span",yl," +"+o.toDisplayString(s.thread.users.length-4),1)])):o.createCommentVNode("",!0)])):(o.openBlock(),o.createElementBlock("div",wl,[o.createElementVNode("div",gl,[o.createVNode(He,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"medium","user-login":o.unref(n)[0].login},null,8,["hide-presence","user-login"])])]))}}),H=$.extend({hooks:{beforeRequest:[Pt,De(P.SEARCH)],afterResponse:[(...e)=>ot(P.SEARCH,H)(...e),(...e)=>Oe(H,$)(...e)]}}),_l=10,bl=200;function No({fetch:e,merge:t,resolve:n,options:s}){let a=[],i;const r=async()=>{if(N.debug(`[decorator mutualizer] process batch request for ${a.length} request`,a),i&&clearTimeout(i),i=void 0,!a.length)return;const l=a.slice();a=[];const c=await e(t(l.map(f=>f[0])));l.forEach(f=>n([c,f]))};return s!=null&&s.sendBeforeUnload&&window.addEventListener("beforeunload",r),l=>new Promise((c,f)=>{s!=null&&s.sanitizer&&(N.debug("[decorator mutualizer] sanitize bucket",a),a=s==null?void 0:s.sanitizer(a,[l,c,f])),a.push([l,c,f]),a.length===((s==null?void 0:s.limit)??_l)?r():i||(i=setTimeout(r,(s==null?void 0:s.throttle)??bl))})}function Io(e){const t=[];return e.results&&e.results.forEach(n=>{const s={convUri:"",type:"",label:""};n.attributes.forEach(a=>{switch(a.name){case"resourceid":s.convUri=a.value;break;case"ds6w:what/ds6w:type":case"ds6w:type":s.type=a.value;break;case"ds6w:label":s.label=a.value;break}}),t.push(s)}),t}var Ro=(e=>(e.DM="swym:DirectMessage",e.COMMUNITY="swym:Community",e.PERSONALSPACE="swym:PersonalSpace",e))(Ro||{});function sn(e,t){const n=[];return e.results?(t?e.results.forEach(s=>{n.push(El(s.attributes))}):e.results.forEach(s=>{n.push(Cl(s.attributes))}),n):[]}function Oo(e){const t=[];return e.results?(e.results.forEach(n=>{t.push(Sl(n.attributes))}),t):[]}function Cl(e){const t={resource_id:"",type_icon_url:"",full_name:"",login:"",contentType:"",source_id:"",format:"",id:""};return e.forEach(n=>{switch(n.name){case"resourceid":t.resource_id=n.value,t.login=Ge(n.value);break;case"type_icon_url":t.type_icon_url=n.value;break;case"ds6w:label":t.full_name=n.value,t.id=`@${n.value}`;break;case"ds6w:type":t.contentType=Ge(n.value);break;case"sourceid":t.source_id=n.value,t.format=n.format;break;case"ds6w:resourceUid":t.uid=n.value;break}}),t}function El(e){const t={resource_id:"",type_icon_url:"",full_name:"",login:"",contentType:"",source_id:"",format:"",id:""};return e.forEach(n=>{switch(n.name){case"resourceid":t.resource_id=n.value,t.login=Ge(n.value);break;case"type_icon_url":t.type_icon_url=n.value;break;case"ds6w:label":t.full_name=n.value,t.id=t.contentType==="DirectMessage"?(t.resource_id||"").split(":")[4]:`@${n.value}`;break;case"ds6w:type":t.contentType=Ge(n.value);break;case"sourceid":t.source_id=n.value,t.format=n.format;break;case"ds6w:resourceUid":t.uid=n.value;break}}),t}function Sl(e){const t={resource_id:"",type_icon_url:"",full_name:"",login:"",contentType:"",source_id:"",format:"",id:""};return e.forEach(n=>{switch(n.name){case"resourceid":t.resource_id=n.value;break;case"type_icon_url":t.type_icon_url=n.value;break;case"ds6w:label":t.full_name=n.value,t.id=t.contentType==="DirectMessage"?(t.resource_id||"").split(":")[4]:`@${n.value}`;break;case"ds6w:type":t.contentType=Ge(n.value);break;case"sourceid":t.source_id=n.value,t.format=n.format;break;case"login":t.login=n.value;break;case"ds6w:resourceUid":t.uid=n.value;break}}),t}function Ge(e){return e.split(":")[1]}function kl(e){const t="swym:DirectMessage",n="userConversations";return[`([ds6w:type]:"${t}" AND `,(e||"").trim().split(" ").map(s=>`([ds6w:label]:(${s}) OR ${n}: (${s}))`).join(" AND "),")"].join("")}async function Al(e){const t=B(),n=["swym"];Yt()||n.push("3dmessaging");const s=await H.post("/search",{json:{query:kl(e==null?void 0:e.text),select_predicate:["ds6w:type","ds6w:label","resourceid"],tenant:t,nresults:100,order_field:"ds6w:modified",order_by:"desc",label:`conversation-search-${new Date().getTime()}`,with_synthesis:!1,source:n}}).json();return{data:Io(s)}}async function Tl(e){const t=B(),n=["swym"],s=await Q(`search-user-info-login-${e.text}-${e.userLogin}`,()=>H.post("/search",{json:{nresults:10,query:'[ds6w:type]:("pno:Person")',source:n,specific_source_parameter:{swym:{additional_query:` AND personOrGroup:(${e.text})`,agoraMode:!0}},select_predicate:["ds6w:label","ds6w:type","login"],label:`SocialUserMention-${e.userLogin}-${new Date().getTime()}`,locale:"en",start:0,with_synthesis:!1,with_synthesis_attribute:!1,tenant:t}}).json(),2*60*1e3);return{total:s.infos.nhits,data:Oo(s)}}const Pl={async getUserInfo(e){const t=B(),n=["swym"];e.usersGroup&&n.push("usersgroup");const s=await Q(`search-user-info-${e.text}-${e.userLogin}`,()=>H.post("/search",{json:{nresults:20,query:'[ds6w:type]:("foaf:Group" OR "pno:Person")',source:n,specific_source_parameter:{usersgroup:{additional_query:`AND [ds6w:label]:(${e.text.trim()}*)`},swym:{additional_query:` AND personOrGroup:(${e.text})`,agoraMode:!0}},select_predicate:["ds6w:label","ds6w:type"],label:`SocialUserMention-${e.userLogin}-${new Date().getTime()}`,locale:"en",start:0,with_synthesis:!1,with_synthesis_attribute:!1,tenant:t}}).json(),6e4);return{total:s.infos.nhits,data:sn(s)}},getUserInfoWithLogin:No({fetch:Tl,merge:e=>{const t=new Set(e.map(s=>s.text)),n=Array.from(t).map(s=>`"${s}"`).join(" OR ");return{...e.pop(),text:n}},resolve([e,[t,n]]){n(e)},options:{throttle:300,limit:10}}),async getUsersWithResourceId(e){const t=B(),n=["swym"];e.usersGroup&&n.push("usersgroup");const s=await H.post("/search",{json:{nresults:20,query:'[ds6w:type]:("foaf:Group" OR "pno:Person")',source:n,order_by:"desc",order_field:"relevance",specific_source_parameter:{usersgroup:{additional_query:`AND ([ds6w:label]:(${e.text.trim()}*) OR [ds6w:label]:"${e.text.trim()}")`},swym:{additional_query:` AND personOrGroup:(${e.text})`,agoraMode:!0}},select_predicate:["ds6w:label","ds6w:type","ds6w:resourceUid"],label:`3DSwym-${e.userLogin}-${new Date().getTime()}`,locale:"en",start:0,with_synthesis:!1,with_synthesis_attribute:!1,tenant:t}}).json();return{total:s.infos.nhits,data:sn(s)}},async getUsersAndConversations(e){const t=B(),n=await H.post("/search",{json:{query:`([ds6w:type]:"swym:DirectMessage" AND (${e.text}) AND (NOT dm_type:private)) OR ((topicConversations:(${e.text})) AND (dm_type:private)) OR (personOrGroup:(${e.text}))`,select_predicate:["ds6w:type","ds6w:label","title","id","resourceid"],tenant:t,nresults:50,reset:!0,label:`3DSwym-${e.userLogin}-${new Date().getTime()}`,with_synthesis:!1,with_synthesis_attribute:!1,source:["swym"]}}).json();return{data:sn(n,!0)}},async getConversations(e){const t=B(),n=await H.post("/search",{json:{query:`([ds6w:type]:"swym:DirectMessage" AND (${e.text}))`,select_predicate:["ds6w:type","ds6w:label","resourceid"],tenant:t,nresults:30,order_by:"desc",label:`conversation-search-${new Date().getTime()}`,with_synthesis:!1,source:["swym","3dmessaging"]}}).json();return{data:Io(n)}},async getUsersAndConversationsWithLogin(e){const t=B(),n=await H.post("/search",{json:{query:`([ds6w:type]:"swym:DirectMessage" AND (${e.text}) AND (NOT dm_type:private)) OR ((topicConversations:(${e.text})) AND (dm_type:private)) OR (personOrGroup:(${e.text}))`,select_predicate:["ds6w:type","ds6w:label","title","id","resourceid","login"],tenant:t,nresults:50,reset:!0,label:`3DSwym-${e.userLogin}-${new Date().getTime()}`,with_synthesis:!1,with_synthesis_attribute:!1,source:["swym"]}}).json();return{data:Oo(n)}},async getMediaFromFedSearch(e){const t=B();return(await H.post("/search",{json:{with_indexing_date:!0,with_synthesis:!0,with_nls:!1,label:"3DSearch-skd1",locale:"en",with_synthesis_hierarchical:!0,query:e,refine:{},order_by:"desc",order_field:"relevance",nresults:40,start:"0",source:["swym","3dspace","drive","dashboard"],tenant:t}}).json()).results},async getUserGroup(e){const t=B(),s=(await H.post("/search",{json:{with_synthesis:!1,with_nls:!1,label:e,with_synthesis_hierarchical:!1,query:`[ds6w:type]:"foaf:Group" AND [ds6w:label]:"${e}"`,source:["usersgroup"],tenant:t}}).json()).results;return Array.isArray(s)?s.some(a=>a&&a.attributes&&a.attributes.some(i=>i.name==="ds6w:label"&&i.value===e)):!1},async isUserGroupMember(e,t){let n="";e.includes("iam")?n=`<http://iam.3ds.com/${e.split("iam:")[1]}>`:n=`<uuid:${e}>`;const s=B(),i=(await H.post("/search",{json:{with_synthesis:!1,with_nls:!1,label:"3Dswym-usergroup-search-member",select_predicate:["foaf:member"],with_synthesis_hierarchical:!1,query:`[ds6w:type]:"foaf:Group" AND [ds6w:label]:"${t}"`,source:["usersgroup"],tenant:s}}).json()).results;return Array.isArray(i)?i.some(r=>r&&r.attributes&&r.attributes.some(l=>l.name==="foaf:member"&&l.value===n)):!1},async getContentsFromFedSearch(e,t,n=0){const s=B();return(await H.post("/search",{json:{with_synthesis:!1,with_nls:!1,with_synthesis_hierarchical:!1,label:`3DSearch-${e}-${t}`,query:`((${t}) AND [ds6w:containerUid]: ("${e}"))`,order_by:"desc",order_field:"ds6w:created",nresults:50+n*50,start:0+n*50,source:["swym"],tenant:s}}).json()).results},async getContentByResource(e){const t=B();return Q(`content-type-${e}`,()=>H.post("/search",{json:{with_synthesis:!1,with_nls:!1,select_predicate:["ds6w:type"],with_synthesis_hierarchical:!1,label:`3DSearch-swym-container-type-${e}`,query:`[ds6w:resourceUid]: "${e}"`,order_by:"desc",order_field:"ds6w:created",source:["swym","3dmessaging"],tenant:t}}).json())}};function Bo(e){return new Date(e.updated_at||0).getTime()}function xl(e,t,n,s){const a=xe(e),i=xe(s),r=o.ref([]),l=o.computed(()=>{let p=a.value.slice();return j(n)?p=p.filter(w=>r.value.includes(w.subject_uri)).sort((w,_)=>{var k,A;const S=w.users.length<=2,x=_.users.length<=2;if(S<x)return 1;if(S>x)return-1;const V=((k=r.value)==null?void 0:k.indexOf(w.subject_uri))||0,D=((A=r.value)==null?void 0:A.indexOf(_.subject_uri))||0;return V<D?-1:V===D?0:1}):p=p.filter(w=>w.is_hidden===!1).sort((w,_)=>{const S=Bo(w),x=Bo(_);return S<x?1:S===x?0:-1}),p});o.watch(xe(n),async p=>{p.length>0?r.value=(await Al({text:p,userLogin:i.value})).data.filter(w=>w.type===Ro.DM).map(w=>w.convUri):r.value=[]},{immediate:!0});const c=xe(t),f=o.computed(()=>l.value.filter(p=>c.value.find(w=>p.subject_uri===w.subjectUri))),u=o.computed(()=>f.value.length===0?l.value:l.value.filter(p=>{var w;return!((w=c.value)!=null&&w.find(_=>p.subject_uri===_.subjectUri))}));function d(){const p=l.value.filter(_=>{var S;return((S=_.users)==null?void 0:S.length)===2}),w=new Set;for(const _ of p)w.add(_.users[0].login),w.add(_.users[1].login);return w.add(i.value),[...w]}const h=o.ref([]);function v(p){const w=d();return p.filter(_=>!w.includes(_.login))}async function m(p){try{if(p.length>2){const{result:w}=await bo({query:p,limit:30,page:0}),_=v(w);h.value=_.map(S=>({...S,subject_uri:S.uid||S.hash_key||S.login}))}else h.value=[]}catch(w){N.error(w)}}return o.watch(xe(n),m),{suggestedUsersOnSearch:h,conversationsListFilteredAndSorted:l,favoriteConversationsFilteredAndSorted:f,notfavoriteConversationsFilteredAndSorted:u}}const an=1e4,Do=2**31-1,Nl={key:0},Il={key:1},Rl={key:0},Ol={key:1},Bl={class:"fixed ml-20 top-0 !z-[5000] flex flex-col w-[calc(100%-10px)]"},Dl={class:"absolute"},Ml=X(o.defineComponent({__name:"conversation-selector",props:{disabled:{type:Boolean},selectedConversation:{},platformId:{},hideThreadSelector:{type:Boolean}},emits:["update:selected-conversation"],setup(e,{emit:t}){const n=e,s=t,{$i18n:a}=le("content-type-selector"),i=o.ref(""),r=Br(i,tn,!0),l=o.ref(""),c=o.ref([]),f=o.ref([]),u=o.ref(!1),d=Le("conversation.rtc"),h=o.ref([]);async function v(){var E;u.value=!0,l.value=(E=(await je()).result)==null?void 0:E.login;try{d.value?(c.value=await Pa(l.value,n.platformId),f.value=await Na(l.value,n.platformId)):c.value=await(await Ma()).result}catch(z){N.log(z)}u.value=!1}const{conversationsListFilteredAndSorted:m,suggestedUsersOnSearch:p}=xl(c,f,r,l),w=o.computed(()=>new Map(m.value.map(E=>[E.id.toString(),E]))),_=o.computed(()=>d.value?"externaldm":"dm"),{sectionsList:S,sectionedThreads:x,fetchSections:V,resetData:D}=Co({type:_,threadMap:w});o.onMounted(()=>{v()}),o.watch(()=>n.platformId,async()=>{c.value=[],i.value="",D(),Promise.all([V(),v()])},{immediate:!0});const k=o.computed(()=>(m.value||[]).filter(E=>!x.get(E.id.toString()))),A=o.computed(()=>a("MyConversations")),M=o.computed(()=>({name:A.value,position:S.value.length+1,id:Cr,threads:k.value,isReadOnly:!0}));o.watch([S,M],()=>{h.value=[...S.value,M.value],h.value=h.value.filter(E=>E.threads.length>0)},{immediate:!0});async function U(E){n.disabled||s("update:selected-conversation",E)}function me(E){return E!=null&&E.topic?E.topic:(((E==null?void 0:E.users.length)===1?E==null?void 0:E.users:E==null?void 0:E.users.filter(de=>de.login!==l.value))||[]).map(de=>`${de.first_name} ${de.last_name}`).join(", ")}const ce=o.ref({show:void 0,color:"error",timeout:an});return(E,z)=>{const de=o.resolveComponent("vu-message"),mt=o.resolveDirective("mask");return o.openBlock(),o.createElementBlock(o.Fragment,null,[!E.selectedConversation||!E.selectedConversation.value?(o.openBlock(),o.createElementBlock("div",Nl,[o.withDirectives((o.openBlock(),o.createBlock(go,{modelValue:o.unref(i),"onUpdate:modelValue":z[0]||(z[0]=R=>o.isRef(i)?i.value=R:null),"section-list":o.unref(h),"selected-thread":E.selectedConversation,"source-type":"conversation"},{sectionThread:o.withCtx(({thread:R})=>[o.createVNode(o.unref(ft),{class:"border-t border-grey-4 !rounded-none fav-conversation-tile",name:me(R),transparent:"",onClick:un=>U({value:R.subject_uri,label:me(R),conversation:R})},{image:o.withCtx(()=>[o.createVNode(on,{"current-user":o.unref(l),thread:R},null,8,["current-user","thread"])]),_:2},1032,["name","onClick"])]),_:1},8,["modelValue","section-list","selected-thread"])),[[mt,o.unref(u)]]),o.unref(i)&&o.unref(p).length?(o.openBlock(),o.createBlock(o.unref(yo),{key:0,class:"suggested-threads-container","thread-section-name":o.unref(a)("SuggestedConversations"),threads:o.unref(p)},{threadTile:o.withCtx(({thread:R})=>[o.createVNode(o.unref(ft),{class:"border-t border-grey-4 !rounded-none",name:`${R.first_name} ${R.last_name}`,transparent:"",onClick:un=>U({value:R.login,label:`${R.first_name} ${R.last_name}`,login:R.login})},{image:o.withCtx(()=>[o.createVNode(on,{"current-user":o.unref(l),thread:{users:[R]}},null,8,["current-user","thread"])]),_:2},1032,["name","onClick"])]),_:1},8,["thread-section-name","threads"])):o.createCommentVNode("",!0)])):(o.openBlock(),o.createElementBlock("div",Il,[o.createVNode(wo,{"selected-thread":E.selectedConversation,"hide-option":E.hideThreadSelector,"onUpdate:selectedThread":U},{tileImage:o.withCtx(({selectedThread:R})=>[R.login?(o.openBlock(),o.createElementBlock("div",Rl,[o.createVNode(xo,{login:R.login},null,8,["login"])])):o.createCommentVNode("",!0),R.conversation?(o.openBlock(),o.createElementBlock("div",Ol,[o.createVNode(on,{"current-user":o.unref(l),"hide-presence":"",thread:R.conversation},null,8,["current-user","thread"])])):o.createCommentVNode("",!0)]),_:1},8,["selected-thread","hide-option"])])),o.createElementVNode("div",Bl,[o.createElementVNode("div",Dl,[o.createVNode(de,{show:o.unref(ce).show,"onUpdate:show":z[1]||(z[1]=R=>o.unref(ce).show=R),class:"custom-message",color:o.unref(ce).color,icon:"true",timeout:o.unref(ce).timeout},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(a)("ConversationSearchIssue")),1)]),_:1},8,["show","color","timeout"])])])],64)}}}),[["__scopeId","data-v-858be260"]]),Vl={key:0,class:"platform-selector"},Ul={class:"text-grey-7"},Ll=o.defineComponent({__name:"m-platform-selector",props:{platforms:{},platformId:{}},emits:["update:selected-platformId","onTenantChangeFailure"],setup(e,{emit:t}){const n=e,s=t,{$i18n:a}=le("publish-form"),i=o.ref([]),r=o.ref(""),l=o.ref(n.platformId),c=o.ref([]);async function f(){if(n.platforms)n.platforms.forEach(h=>{if(!h.id||!h.label||!h.url)throw new Error("Each platform must contain the properties id, label and url");return n.platforms});else try{const h=await Ze(P.SWYM,{platformId:n.platformId,public:!0});c.value.push({value:h.platformId,label:h.displayName})}catch(h){N.log(h)}finally{Ze(P.SWYM,{public:!0}).then(h=>h.map(v=>({value:v.platformId,label:v.displayName}))).then(h=>{h.forEach(v=>{v.value!==n.platformId&&c.value.push(v)})})}}o.onMounted(async()=>{var h;await d(n.platformId||B(),!0),(h=i.value)==null||h.push(re()),await f()});async function u(h,v){var p;Ct(h),l.value=h;const m=await K(P.SWYM,h);r.value=m,Gt(m),(p=i.value)==null||p.push(m),v||s("update:selected-platformId",h)}async function d(h,v=!1){var m;try{await u(h,v)}catch(p){N.error(p);const w=(m=i.value)==null?void 0:m.pop();s("onTenantChangeFailure",{old:r.value,new:w})}}return(h,v)=>{const m=o.resolveComponent("vu-select");return c.value&&c.value.length>1?(o.openBlock(),o.createElementBlock("div",Vl,[o.createElementVNode("label",Ul,o.toDisplayString(o.unref(a)("Platform")),1),o.createVNode(m,{modelValue:l.value,"onUpdate:modelValue":[v[0]||(v[0]=p=>l.value=p),d],options:c.value,placeholder:o.unref(a)("SelectPlatform")},null,8,["modelValue","options","placeholder"])])):o.createCommentVNode("",!0)}}});var I=(e=>(e.Community="Community",e.Conversation="Conversation",e.PersonalSpace="Personal Space",e))(I||{});const Fl=o.defineComponent({__name:"thread-picker",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const{$i18n:t}=le("publish-form"),n=o.reactive([{label:o.computed(()=>t("Communities")),value:I.Community,fonticon:"users-alt"},{label:o.computed(()=>t("Conversation")),value:I.Conversation,fonticon:"chat"},{label:o.computed(()=>t("PersonalSpace")),value:I.PersonalSpace,fonticon:"user-feather"}]),s=o.useModel(e,"modelValue"),a=o.computed({get(){return n.find(i=>i.value===s.value)},set(i){s.value=i.value}});return(i,r)=>(o.openBlock(),o.createBlock(o.unref(fr),{modelValue:o.unref(a),"onUpdate:modelValue":r[0]||(r[0]=l=>o.isRef(a)?a.value=l:null),items:o.unref(n)},null,8,["modelValue","items"]))}});function jl(e){let t=e;Yt()&&(t.includes("resources/AppsMngtRegistry")?t=e:t=`${e}/resources/AppsMngtRegistry`.replace(/([^:]\/)\/+/g,"$1")),Go(t)}async function Wl(){try{const e=await Se("DS/PlatformAPI/PlatformAPI");let t=e.getApplicationConfiguration("app.urls.registry");return!t&&Yt()&&(t=e.getApplicationConfiguration("app.urls.myapps")),t?jl(t):N.warn("Fail to fetch Registry URL."),t}catch(e){throw N.error(e),new Error("Fail to fetch AMD module(s).")}}function zl(e,t,n){const s=re(),a=e.result.community_subject_uri,i=e.result.subject_uri;let r="";t===I.Conversation?r=s.concat(`/dm/${a}`):t===I.Community?r=s.concat(`/community/${a}`):t===I.PersonalSpace&&(r=s.concat("/me/personal-space"));const l=new URL(r);return n===C.Media?l.searchParams.append("media",i):l.searchParams.append("content",i),l.href}function Hl(e,t){return e!=null&&e.topic?e.topic:(((e==null?void 0:e.users.length)===1?e==null?void 0:e.users:e==null?void 0:e.users.filter(s=>s.login!==t))||[]).map(s=>`${s.first_name} ${s.last_name}`).join(", ")}function Gl({base64Image:e,title:t}){let n,s,a;if(e instanceof File)a=e;else if(typeof e=="string"){if(n=e.split(","),s=null,n[0]==="data:image/png;base64"?s=`${t}.png`:n[0]==="data:image/jpeg;base64"?s=`${t}.jpeg`:n[0]==="data:application/vndopenxmlformats-officedocumentwordprocessingmldocument;base64"?s=`${t}.docx`:n[0]==="data:image/vnd.openxmlformats-officedocument.presentationml.presentation;base64"?s=`${t}.pptx`:n[0]==="data:image/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64"&&(s=`${t}.xlsx`),s){const i={type:n[0]};i["Content-Transfer-Encoding"]="base64",a=new Blob([n[1]],i)}}else e instanceof Blob&&(a=e,s=`${t}.jpeg`);return{mediaFile:a,fileName:s}}var Mo=(e=>(e[e.small=320]="small",e[e.medium=640]="medium",e[e.large=960]="large",e[e.M1=520]="M1",e[e.L1=960]="L1",e[e.XL1=1920]="XL1",e[e.XXL1=3840]="XXL1",e))(Mo||{});function Vo(e,t,n){return e==="processed"&&t>0&&n>0}function Yl(e,t){return Math.max(e,t)}function Uo(e){return e===3840?"xxl1":e===1920?"xl1":e===960?"l1":"m1"}function Ql(e,t){const n=Yl(e,t);return n<=520?["o1"]:n<=960?["m1","o1"]:n<=1920?["m1","l1","o1"]:n<=3840?["m1","l1","xl1","o1"]:["m1","l1","xl1","xxl1"]}function Xl(e,t,n){const s=Ql(e,t);return n?s.includes(Uo(n))?Uo(n):s.pop():s.shift()}function Kl(e=320){return e===640?"m":[960,1920,960,520].includes(e)?"l":"s"}function Jl(e,t,n,s,a,i,r="",l){const c=o.computed(()=>Vo(j(a),j(t),j(n))?Xl(j(t),j(n),j(l)):Kl(j(l))),f=o.computed(()=>{const u=j(r)?`/update/${j(r)}`:"",d=`${j(i)}/api/media/streammedia/id/${j(e)}/type/`;return j(a)!=="processed"?Pe(`${d}thumb/key/l_thumb${u}`):Vo(j(a),j(t),j(n))?Pe(`${d}picture/key/${j(c)}${u}`):Pe(`${d}thumb/key/${j(c)}_thumb${u}`)});return{config:c,url:f}}async function Lo(e,t){return{...e,result:await Zl(e.result)}}async function Zl(e,t){var s,a,i,r,l,c,f,u,d,h,v,m,p,w,_,S,x,V,D,k;const n={id:e.id,media_id:e.id,title:e.title,preview_fingerprint:e.preview_fingerprint,preview:{subject_uri:e.subject6wuri,preview_fingerprint:e.preview_fingerprint,width:e.width,height:e.height,processing_version:e.processing_version,status:e.status},width:e.width,height:e.height,processing_version:e.processing_version,status:e.status,preview_media_processing_status:e.preview_media_processing_status||e.status,type:e.media_type,model:C.Media,subject_uri:e.subject6wuri,author:e.author,stats_viewed:e.stats_viewed,community_title:(s=e==null?void 0:e._community)==null?void 0:s.title,community_id:(a=e==null?void 0:e._community)==null?void 0:a.id,community_subject_uri:[...e.subject6wuri.split(":").splice(0,3),"community",(i=e==null?void 0:e._community)==null?void 0:i.id].join(":"),community_type:(r=e==null?void 0:e._community)==null?void 0:r.community_type,created_at:ne(e.crdate),updated_at:ne(e.update),download_authorization:e.download_original_file==="1",download_original_file_url:(l=e.play)==null?void 0:l.download_original_url.transient_url_as_attachment,transient_original_file_url:(c=e.play)==null?void 0:c.download_original_url.transient_url,delete_authorization:(f=e==null?void 0:e._acl)==null?void 0:f.delete.access,forward_authorization:(u=e==null?void 0:e._acl)==null?void 0:u.forward.access,edit_authorization:(d=e==null?void 0:e._acl)==null?void 0:d.update.access,media_file_ext:e==null?void 0:e.media_file_ext,stream:((h=e.play)==null?void 0:h.av_streams)||((v=e.play)==null?void 0:v["3d_streams"])||((m=e.play)==null?void 0:m["2d_streams"])||((p=e.play)==null?void 0:p.doc_streams),view_stream:(w=e.play)==null?void 0:w.view,play:e.play,subtitles:(_=e.play)==null?void 0:_.subtitles,chapters:(S=e.play)==null?void 0:S.chapters,original_name:e==null?void 0:e.orig_name,canBeDisplayedODE:!1,ratio:e==null?void 0:e.ratio,size:e==null?void 0:e.size,related_posts:e==null?void 0:e.related_posts,wake_up_url:(x=e==null?void 0:e.play)==null?void 0:x.wake_up_url,is_illustration:e==null?void 0:e.is_illustration,_acl:e==null?void 0:e._acl,reprocessable:e==null?void 0:e.reprocessable,published:e.published==="1",oldParsing:e,description:e==null?void 0:e.description,enhanced_summary:e==null?void 0:e.enhanced_summary,thumbnail_time:e!=null&&e.thumbnail_time?timeToMilliseconds(e.thumbnail_time):void 0,preview_thumbnails:((V=e==null?void 0:e.preview)==null?void 0:V.thumbnails)||[]};if(n.community_type==="externaldm"&&(n.community_type="dm"),e.media_file_ext||(n.media_file_ext=(D=e.play)==null?void 0:D.original_file_extension),!n.media_file_ext&&e.orig_name){const A=e.orig_name&&e.orig_name.split(".").pop();n.media_file_ext=A}return["docx","doc","ppt","pptx","xls","xlsx"].includes(n.media_file_ext)&&(n.canBeDisplayedODE=!0),!((k=e.play)!=null&&k.download_original_url.transient_url)&&n.stream&&n.stream.forEach(A=>{A.transient_url&&(n.transient_original_file_url=A.transient_url)}),n}const Fo=432e5;async function ql(e){const t=new FormData;t.append("is_illustration",e.is_illustration?"true":"false"),t.append("community_id",e.subject_uri),t.append("title",e.title),t.append("userFile",e.file,e.title),e.base64&&t.append("base64_encoded","1"),t.append("published",e.published?"1":"0"),e.description&&t.append("description",e.description);const n=await Se("DS/WAFData/WAFData"),s=await new Promise((a,i)=>{var l;const r=n.authenticatedRequest(`${re()}/api/media/addmedia`,{responseType:"json",headers:{"x-ds-swym-csrftoken":Be.get(P.SWYM)},type:"json",method:"POST",data:t,timeout:Fo,onUploadProgress:c=>{const f=Math.round(c.loaded*100/c.total);e.onProgress&&typeof e.onProgress=="function"&&e.onProgress(f)},onComplete:c=>{var f;(f=e.abortSignal)==null||f.removeEventListener("abort",r.cancel),a(c)},onFailure(c,f){var d;const u=new Error(c);u.response=f,(d=e.abortSignal)==null||d.removeEventListener("abort",r.cancel),i(u)},onCancel(){var c,f;(c=e.abortSignal)==null||c.removeEventListener("abort",r.cancel),i((f=e.abortSignal)==null?void 0:f.reason)}});(l=e.abortSignal)==null||l.addEventListener("abort",r.cancel)});return await Lo(s)}async function $l(e){return ql(e)}async function ec(e){const t=new FormData;e.title&&t.append("title",e.title),e.description&&t.append("description",e.description||""),e.published!==void 0&&t.append("published",e.published?"1":"0"),e.userFile&&t.append("userFile",e.userFile,e.userFile.name),e.authorizeDownload!==void 0&&t.append("download_original_file",e.authorizeDownload?"1":"0"),e.thumbnail_time_ms!==void 0&&t.append("thumbnail_time_ms",e.thumbnail_time_ms.toString()),t.append("is_illustration",e.is_illustration?"true":"false"),t.append("community_id",e.subject_uri),t.append("id_media",e.id_media);const[n]=await Ee(["DS/WAFData/WAFData"]),s=await new Promise((a,i)=>{n.authenticatedRequest(`${re()}/api/media/editmedia`,{responseType:"json",headers:{"x-ds-swym-csrftoken":Be.get(P.SWYM)},type:"json",method:"POST",data:t,timeout:Fo,onComplete:a,onFailure(r,l){const c=new Error(r);c.response=l,i(c)}})});return Lo(s)}function tc(e){return e.split(":").pop()}const Ye={Media:{Swym:{Content:"/api/media/listallmedia",ContentV2:e=>`/api/v2/communities/${tc(e)}/media`,Duplicate:"/api/media/duplicate"},Exalead:{Content:"/api/exalead/search"}},Post:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/whatsnew"},Swym:{Content:"/api/feed/whatsnew",ContentV2:e=>`/api/v2/communities/${e}/posts`}},Conference:{Swym:{Content:"/api/feed/whatsnew"},Exalead:{Content:"/api/exalead/whatsnew"}},Survey:{Swym:{Content:"/api/feed/whatsnew"},Exalead:{Content:"/api/exalead/whatsnew"}},Question:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/whatsnew"},Swym:{Content:"/api/feed/whatsnew"}},Wiki:{Swym:{Content:"/api/feed/whatsnew"},Exalead:{Content:"/api/exalead/whatsnew"}},Wedo:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/whatsnew"},Swym:{Content:"/api/feed/whatsnew"}},Idea:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/whatsnew"},Swym:{Content:"/api/feed/whatsnew",ContentV2:e=>`/api/v2/communities/${e}/ideas`,Statuses:e=>`/api/v2/communities/${e}/ideas/statuses`}},Draft:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/search"},Swym:{Content:"/api/v2/user/contributions"}},MeActivity:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/search"},Swym:{Content:"/api/v2/user/activity"}},Contribution:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/search"},Swym:{Content:"/api/v2/user/contributions"}},Network:{Swym:{Content:"/api/network/getnetworkactivity"}},ContentReader:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/search"}},Rituals:{Exalead:{Content:"/api/exalead/whatsnew"}}};function nc(){return F.post("/api/personalspace",{body:""}).json().then(Wt)}function rn(e,t){return typeof e=="function"?e(t):e}function oc(){const e=[C.Post,C.Media,C.Idea,C.Question],t={[C.Post]:Ye.Post.Swym.Content,[C.Question]:Ye.Question.Swym.Content,[C.Media]:Ye.Media.Swym.Content,[C.Idea]:Ye.Idea.Swym.Content},n=[C.DerivedPost,C.DerivedIdea];return e.reduce((a,i)=>(a[i]=sc({contentType:i,api:t[i],openApi:n.includes(i)}),a),{})}function sc({contentType:e,api:t,openApi:n}){return{async count(s){return{total:(await F.post(rn(t,s.community_id),{json:{params:{...e?{content_type:[e]}:{},...s}}}).json()).nmatch,data:[]}},async getAll(s){if(n){const i=await F.get(rn(t,s.community_id),{searchParams:{...s.derivedTypeId?{derived_type_id:s.derivedTypeId}:{},page:s.page.toString(),limit:s.limit.toString()}}).json();return{total:Number.parseInt(i.nb_result||"0")||0,data:jt(i).result}}const a=await F.post(rn(t,s.community_id),{json:{params:{...e?{content_type:e}:{},...s}}}).json();return{total:Number.parseInt(a.nb_result||"0")||0,data:jt(a).result}}}}oc();function jo(e){const t=e.indexOf("@");return e.indexOf(" ")===-1&&/^[^a-z]*$/.test(e)?t>-1?e:`@${e}`:`@${e.substring(t+1).split(" ").filter(a=>a).map(a=>a[0]).map(a=>a.toUpperCase()).join("")}`}var ln=(e=>(e.WIDGET="widget",e.EXTERNAL="external",e.INTERNAL="internal",e.YOUTUBE="youtube",e))(ln||{}),Wo=(e=>(e.THUMBNAIL="thumbnail",e.TILE="tile",e.TITLE="title",e.LINK="link",e))(Wo||{});function ac(e){const t=document.createElement("div");return t.innerHTML=e,t}function ht(e,t){for(;e.childNodes.length>0;)t.appendChild(e.childNodes[0])}function ic(e){var n;let t;return e.tagName==="IMG"?t=e.getAttribute("data-media-id"):t=(n=e.querySelector("img"))==null?void 0:n.getAttribute("data-media-id"),t&&t!=="undefined"?t:""}function rc(e){return e.classList.contains("image_resized")?"small":"large"}function lc(e){return e.classList.contains("image-style-align-center")?"center":e.classList.contains("image-style-align-left")?"left":e.classList.contains("image-style-align-right")?"right":e.tagName==="IMG"?"inline":"center"}function cc(e,t){const n=document.createElement("div");n.className="responsive-table";const s=e.getElementsByTagName("table")[0];t.width?s.style.width=t.width:s.style.width||(s.style.width="100%");const a=e.querySelector(":scope > figcaption");if(a){const i=document.createElement("caption");i.innerHTML=a.innerHTML,a.remove(),s.prepend(i)}return s.setAttribute("align",e.style.float||"center"),ht(e,n),n}function dc(e,t,n,s){var c;const a=document.createElement("figure"),i=document.createElement("a"),r=document.createElement("img");r.setAttribute("src",""),t&&r.setAttribute("data-media-id",t),!t&&e.getAttribute("src")&&r.setAttribute("src",e.getAttribute("src"));const l=(c=e.querySelector(":scope > a"))==null?void 0:c.getAttribute("href");if(l&&i.setAttribute("href",l),(e.getAttribute("data-content-thumbnail")||e.querySelector("img[data-content-thumbnail]"))&&r.setAttribute("data-content-thumbnail","true"),e.querySelector("figcaption"))return a.setAttribute("data-position",s),a.setAttribute("data-size",n),l?(i.appendChild(r),a.appendChild(i)):a.appendChild(r),a.appendChild(e.querySelector("figcaption")),a;{r.setAttribute("data-position",s),r.setAttribute("data-size",n);let f=r;return l&&(i.append(r),f=i),f}}function uc(e){const t=document.createElement("span");return t.className=`marker ${e.className}`,ht(e,t),t}function fc(e){const t=document.createElement("pre"),n=e.querySelector("code");return ht(n||e,t),t}function pc(e){const t=document.createElement("a");t.classList.add("sum-tag-link","sm-link"),t.setAttribute("data-login",e.dataset.login),t.setAttribute("data-content-type",e.dataset.contentType),t.setAttribute("data-type",e.dataset.type);const n=e.dataset.fullName,s=e.dataset.originalText;return t.innerHTML=jo(n||s||e.innerHTML),t}function hc(e){const t=document.createElement("a");return t.classList.add("sum-tag-link","sm-link"),t.setAttribute("data-users-group-uri",e.dataset.usersGroupUri),t.setAttribute("data-content-type",e.dataset.contentType),t.setAttribute("data-type",e.dataset.type),t.innerHTML=e.innerHTML,t}function mc(e){const t=document.createElement("a");return t.classList.add("s6m-tag-link","sm-link"),t.setAttribute("data-predicate",e.dataset.predicate),t.setAttribute("data-tag-value",e.dataset.tagValue),t.setAttribute("data-type",e.dataset.type),t.setAttribute("contenteditable","false"),t.innerHTML=e.innerHTML,t}function vc(e){const t=e.style;return e.replaceWith(cc(e,t))}function zo(e){const t=rc(e),n=lc(e),s=ic(e);return e.replaceWith(dc(e,s.split(":").pop(),t,n))}function yc(e){e.replaceWith(uc(e))}function wc(e){e.replaceWith(fc(e))}function gc(e){e.replaceWith(pc(e))}function _c(e){e.replaceWith(hc(e))}function bc(e){e.replaceWith(mc(e))}function Cc(e){try{const t=e.getAttribute("data-metas"),n=t?JSON.parse(t):void 0,s=e.getAttribute("data-url"),a=e.getAttribute("data-prefs"),r=e.className.includes("title-preview"),l=e.querySelector(".external-preview-link-image"),c=l&&l.src||(n==null?void 0:n.image)||"",f=e.querySelector(r?".external-preview-link-text":".external-preview-link-heading"),u=f&&f.textContent||"",d=e.querySelector(".external-preview-link-description"),h=d&&d.textContent||(n==null?void 0:n.description)||"",v=c.includes("thumb-link"),m=e.querySelector(".external-preview-link-content");m==null||m.remove();const p=document.createElement("a");return p.classList.add("preview-link"),r&&p.classList.add("title-preview"),p.href=s,p.setAttribute("data-title",u),p.setAttribute("data-desc",h),p.setAttribute("data-img",v?"":c),p.setAttribute("data-prefs",a),p.innerHTML="&nbsp;",e.replaceWith(p)}catch{N.error("Incorrect metadata")}}function Ec(e){const t=e.getAttribute("data-url")||"#",n=document.createElement("a");return n.classList.add("preview-link"),n.href=t,n.innerHTML="&nbsp;",e.replaceWith(n)}function Sc(e){const t=e.querySelector(".preference-container")||e,n=t==null?void 0:t.getAttribute("data-prefs"),s=t==null?void 0:t.getAttribute("data-source");if((t==null?void 0:t.getAttribute("data-type"))===ln.WIDGET){const i=document.createElement("a");return i.classList.add("preview-link"),i.setAttribute("data-prefs",n),i.setAttribute("data-source",s),i.setAttribute("data-type",ln.WIDGET),e.replaceWith(i)}}function kc(e){e.tagName==="FIGURE"&&e.className==="table"&&vc(e),e.tagName==="FIGURE"&&e.className!=="table"&&zo(e),e.tagName==="IMG"&&zo(e),e.tagName==="MARK"&&yc(e),e.tagName==="PRE"&&wc(e),e.tagName==="SPAN"&&e.hasAttribute("data-login")&&gc(e),e.tagName==="SPAN"&&e.hasAttribute("data-users-group-uri")&&_c(e),e.tagName==="SPAN"&&e.hasAttribute("data-predicate")&&bc(e),e.tagName==="DIV"&&e.className.includes("external-preview-link")&&Cc(e),e.tagName==="IFRAME"&&e.className.includes("youtube-preview-link")&&Ec(e),e.tagName==="DIV"&&e.className.includes("widget-preview-container")&&Sc(e)}function Ac(e){const t=ac(e);return t.querySelectorAll(`
    pre, 
    figure, 
    img, 
    mark, 
    div.external-preview-link, 
    div.internal-preview-link, 
    iframe.youtube-preview-link,
    div.widget-preview-container,
    span[data-login],
    span[data-users-group-uri],
    span.s6m-tag-link.sm-link[data-predicate],
    a[data-type]
  `).forEach(kc),t}function Tc(e){return Ac(e).innerHTML}function Pc(e){return{reversedHtml:o.computed(()=>Tc(e.value))}}const xc=255,Nc="Cancel share";var cn=(e=>(e.JSNOTIF_NOTIF_TYPE="jsnotif",e.JSEVENT_NOTIF_TYPE="jsevent",e.DSCEF="dscef",e))(cn||{}),dn=(e=>(e.PLATFORM_CHANGE_AUTOMATIC="automatic",e.PLATFORM_CHANGE_MANUAL="manual",e))(dn||{});const Ic={key:0,class:"pfc_pfc-main"},Rc={class:"py-2"},Oc={key:4},Bc={key:0},Dc={class:"description-container"},Mc={class:"heading text-black"},Vc={key:1,class:"flex gap-1 items-baseline"},Uc={class:"text-grey-6 mt-1"},Lc={class:"base64-image-container"},Fc=["src"],jc={class:"publish-form-footer"},Wc=X(o.defineComponent({__name:"publish-form",props:{mode:{default:"automatic"},notifType:{},platformId:{},platformChange:{},forcePlatform:{type:Boolean,default:!1},platforms:{},title:{},description:{},contentTitle:{},contentDescription:{},availableContentTypes:{},hideThreadDataSelectors:{type:Boolean,default:!1},allowDraft:{type:Boolean,default:!0},threadType:{default:"community"},threadId:{},base64image:{},base64imageExtension:{default:"jpg"},forceThreadId:{type:Boolean},onCancel:{},onContentCreated:{}},emits:["cancelShare","startUpload","contentCreatedSuccess","tenantChangeFailure","platformChange","update:notifType-value"],setup(e,{expose:t,emit:n}){const s=e,a=n,i=o.ref({label:"",value:""}),r=o.ref(I.Community),l=o.computed(()=>i.value.value),c=o.ref(C.Post),f=o.ref(null),u=o.ref(s.title||""),d=o.ref(s.contentTitle||""),h=o.ref(s.contentDescription||""),v=o.ref(s.description||""),m=o.ref(s.platformId||""),p=o.ref(!1),w=o.ref(!1),_=o.ref(!0),S=o.ref(),x=o.ref(s.platformChange),V=o.ref(re()),D=o.ref(!1),k=o.ref(s.mode),A=o.ref(!1),M=o.ref(""),U=o.ref(s.base64image),me=o.ref(),ce=o.ref("true"),{$i18n:E}=le("publish-form");let z="";o.onBeforeMount(async()=>{if(s.platformId){Ct(s.platformId);const y=await K(P.SWYM,s.platformId);Gt(y)}else if(window.widget){const y=await Ze(P.SWYM);Ct(y[0].platformId);const b=await K(P.SWYM,y[0].platformId);Gt(b)}});const de=o.shallowRef(),mt=o.shallowRef();o.onMounted(async()=>{var y;window.setTopView=function(b){de.value=o.defineAsyncComponent(async()=>({template:`<div>${b}</div>`}))},window.setBottomView=function(b){mt.value=o.defineAsyncComponent(async()=>({template:`<div>${b}</div>`}))},w.value=!0,Wl(),m.value=B(),M.value=(y=(await je()).result)==null?void 0:y.login,await Kc(),w.value=!1});const R=o.defineAsyncComponent(()=>new Promise((y,b)=>Y(["./ckeditor-wrapper-DRL8FVu_"],y,b)));function un(y){d.value=y}function zc(y){h.value=y}function Hc(y){U.value=y}function Gc(y){u.value=y}function Yc(y){v.value=y}function Qc(y){return y==="titleInput"?d.value:h.value}function Xc(y){const b=document.querySelector(".pfc_pfc-main");return b==null?void 0:b.querySelector(y)}t({setContentTitle:un,setContentDescription:zc,setBase64image:Hc,setImageTitle:Gc,setMediadescription:Yc,getValue:Qc,getElement:Xc});async function Kc(){if(s.forcePlatform&&s.platformId===void 0)throw new Error("If the platform list option is set to true, a platformId option must be provided.");if(s.hideThreadDataSelectors&&s.threadType&&!s.threadId)throw new Error("If hideThreadDataSelectors is set to true, a threadType and a threadId option must be provided");if(s.mode==="base64"&&(k.value="automatic",console.warn("PublishFormView: base64 mode is deprecated, please don't define it or use 'automatic' instead")),s.notifType?S.value=s.notifType:s.mode==="catia"?S.value=cn.DSCEF:S.value=cn.JSEVENT_NOTIF_TYPE,a("update:notifType-value",S.value),s.mode==="catia"?x.value=dn.PLATFORM_CHANGE_MANUAL:x.value=dn.PLATFORM_CHANGE_AUTOMATIC,U.value&&!s.title)throw new Error("PublishFormView: title must be defined if base64image is set");if(s.hideThreadDataSelectors&&!s.threadType&&!s.threadId)throw new Error("If HideThreadDataSelector is true, Threadtype and ThreadId must be provided.");if(s.platforms&&s.platforms.forEach(y=>{if(!y.value||!y.label)throw new Error("Each platform must contain the properties value and label")}),s.threadId)try{const y=await Kn(s.threadId);y&&(i.value.value=y.result.subject_uri,i.value.label=y.result.title)}catch{const y=await Kt(M.value,m.value,s.threadId);if(y)i.value.value=y.subject_uri,i.value.label=Hl(y,M.value),i.value.conversation=y;else throw new Error("thread id not found")}s.availableContentTypes&&(typeof s.availableContentTypes=="string"?me.value=s.availableContentTypes.split(","):me.value=s.availableContentTypes,c.value=me.value.at(0)),s.threadType==="community"?r.value=I.Community:s.threadType==="dm"?r.value=I.Conversation:r.value=I.PersonalSpace}async function Jc(y){i.value.value="",m.value=y,V.value=re(),a("platformChange",JSON.stringify({platform_instance:V.value}))}function Zc(y){a("tenantChangeFailure",y)}function vt(){d.value="",h.value=""}function qc(y){i.value.value="",vt(),y===I.PersonalSpace&&td(),be(!0)}function be(y){_.value=y}function $c(y){y.value||vt(),i.value=y,l.value?be(!i.value):be(!!i.value)}async function ed(y){y.value||vt(),i.value=y,l.value?be(!i.value):be(!!i.value),p.value=!!(y.value&&!y.conversation)}async function td(){try{const y=await nc();i.value.value=y.result.subject_uri,i.value.label=y.result.title,be(!1)}catch(y){N.error(y),Ce.message.create({text:E("personalSpaceError"),color:"error"})}}const{reversedHtml:fn}=Pc(h);function nd(y){c.value=y}function od(y){be(y)}async function sd(y,b){const L={base64Image:y,title:s.title,extension:s.base64imageExtension},Ne=Gl(L);u.value=Ne.fileName||"";const pn=await $l({subject_uri:i.value.value,file:Ne.mediaFile,title:u.value,is_illustration:!0,published:!b,base64:!0,description:v.value}),{id:gt,width:hn,height:Qe,processing_version:mn,status:vn,preview_fingerprint:Xe}=pn.result,{url:G}=Jl(gt,hn,Qe,mn,vn,V.value,Xe,Mo.L1);return{srcUrl:G.value,mediaId:gt}}function Ho(y){var b,L;if(D.value=y.isSaveDraft,z=fn.value,(L=(b=f.value)==null?void 0:b.validate)!=null&&L.call(b))ad(y.isSaveDraft);else return Ce.message.create({text:E("TitleIsEmpty"),color:"error",timeout:Do})}async function ad(y){if(A.value=!0,p.value&&M.value){const b=[l.value,M.value];try{const L=await Qa(b,m.value);i.value.value=L.subject_uri}catch(L){return N.log(L),Ce.message.create({text:E("CreateConversationFailed"),color:"error",timeout:Do})}}if(k.value!=="automatic")a("startUpload",JSON.stringify({platform_instance:V.value,platformId:m.value.toLowerCase(),community_id:i.value.value,isDraft:y,platformUrl:V.value,threadId:i.value.value,threadTitle:i.value.label,threadType:s.threadType,contentType:c.value}));else if(U.value&&s.base64imageExtension&&k.value==="automatic"){const{srcUrl:b,mediaId:L}=await sd(U.value,y);z+=`<p><img data-media-id="${L}" src="${b}"}></p>`,c.value===C.Media?await wt(L):await wt()}else await wt()}function yt(y){return r.value===I.PersonalSpace?E("PersonalSpace"):r.value===I.Conversation?i.value.label:y}async function wt(y){try{let b,L;switch(r.value){case I.Conversation:L="dm";break;case I.PersonalSpace:L="personalspace";break;default:L="community"}if(y&&c.value===C.Media)z=fn.value,b=await ec({id_media:y||"",title:d.value,is_illustration:!ce.value,published:!D.value,subject_uri:i.value.value,description:z});else{const Ne={message:z,title:d.value,published:!D.value};b=await Sa({model:c.value,communitySubjectUri:i.value.value,data:Ne})}k.value!=="automatic"?a("contentCreatedSuccess",JSON.stringify({success:!0,containerId:b.result.community_id,containerType:L,contentSubjectURI:b.result.community_subject_uri,contentId:b.result.id,contentUrl:zl(b,r.value,c.value)})):s.onContentCreated?(Ce.message.create({text:D.value?E("Adraftofyourcontentwascreated",{communityTitle:yt(b.result.community_title)}):E("Yourcontenthasbeenpublishedin",{communityTitle:yt(b.result.community_title)}),color:"success",timeout:an}),s.onContentCreated()):Ce.message.create({text:D.value?E("Adraftofyourcontentwascreated",{communityTitle:yt(b.result.community_title)}):E("Yourcontenthasbeenpublishedin",{communityTitle:yt(b.result.community_title)}),color:"success",timeout:an})}catch{k.value!=="automatic"?a("contentCreatedSuccess",JSON.stringify({success:!1,message:E("Errorcannotsaveyourcontent")})):Ce.message.create({text:E("Errorcannotsaveyourcontent"),color:"error"})}A.value=!1}window.createContent=async function(y){z=fn.value,z=`${z}<p><img data-source="swym" data-media-id="${y}" width="320"></p>`,await wt(y)},window.resetForm=vt;function id(){var y;(y=s.onCancel)==null||y.call(s),a("cancelShare",Nc)}return(y,b)=>{const L=o.resolveComponent("vu-input"),Ne=o.resolveComponent("vu-checkbox"),pn=o.resolveComponent("vu-icon"),gt=o.resolveComponent("vu-form"),hn=o.resolveComponent("vu-scroller"),Qe=o.resolveComponent("vu-btn"),mn=o.resolveComponent("vu-message-container"),vn=o.resolveDirective("tooltip"),Xe=o.resolveDirective("mask");return o.openBlock(),o.createElementBlock(o.Fragment,null,[o.unref(w)?o.createCommentVNode("",!0):o.withDirectives((o.openBlock(),o.createElementBlock("div",Ic,[o.renderSlot(y.$slots,"topView",{},()=>[o.createVNode(o.unref(de))],!0),o.createVNode(hn,{class:"px-3"},{default:o.withCtx(()=>[y.forcePlatform?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(Ll,{key:0,"platform-id":o.unref(m),platforms:y.platforms,onOnTenantChangeFailure:Zc,"onUpdate:selectedPlatformId":Jc},null,8,["platform-id","platforms"])),o.createElementVNode("h5",Rc,o.toDisplayString(o.unref(E)("Destination")),1),!o.unref(i).value||o.unref(r)===o.unref(I).PersonalSpace?(o.openBlock(),o.createBlock(Fl,{key:1,modelValue:o.unref(r),"onUpdate:modelValue":[b[0]||(b[0]=G=>o.isRef(r)?r.value=G:null),b[1]||(b[1]=G=>qc(G))]},null,8,["modelValue"])):o.createCommentVNode("",!0),o.unref(r)===o.unref(I).Community?(o.openBlock(),o.createBlock(zr,{key:2,"hide-thread-selector":y.hideThreadDataSelectors,"selected-community":o.unref(i),"selected-tenant-id":o.unref(m),"onUpdate:selectedCommunity":$c},null,8,["hide-thread-selector","selected-community","selected-tenant-id"])):o.createCommentVNode("",!0),o.unref(r)===o.unref(I).Conversation?(o.openBlock(),o.createBlock(Ml,{key:3,"hide-thread-selector":y.hideThreadDataSelectors,"platform-id":o.unref(m),"selected-conversation":o.unref(i),"onUpdate:selectedConversation":ed},null,8,["hide-thread-selector","platform-id","selected-conversation"])):o.createCommentVNode("",!0),o.unref(l)||o.unref(r)===o.unref(I).PersonalSpace?(o.openBlock(),o.createElementBlock("div",Oc,[o.createVNode(tl,{"content-type":o.unref(c),"onUpdate:contentType":[b[2]||(b[2]=G=>o.isRef(c)?c.value=G:null),nd],"available-content-types":o.unref(me),"create-convo-flag":o.unref(p),"current-user":o.unref(M),"is-conversation-selected":o.unref(r)===o.unref(I).Conversation,"is-personal-space":o.unref(r)===o.unref(I).PersonalSpace,"platform-id":o.unref(m),"thread-id":o.unref(l),onNoType:od},null,8,["content-type","available-content-types","create-convo-flag","current-user","is-conversation-selected","is-personal-space","platform-id","thread-id"])])):o.createCommentVNode("",!0),!o.unref(_)&&(o.unref(l)||o.unref(r)===o.unref(I).PersonalSpace)?(o.openBlock(),o.createBlock(gt,{key:5,ref_key:"creationForm",ref:f,onKeyup:b[6]||(b[6]=o.withKeys(o.withModifiers(()=>{},["stop"]),["enter"]))},{default:o.withCtx(()=>[o.unref(l)||o.unref(r)===o.unref(I).PersonalSpace?(o.openBlock(),o.createElementBlock("div",Bc,[o.createVNode(L,{modelValue:o.unref(d),"onUpdate:modelValue":b[3]||(b[3]=G=>o.isRef(d)?d.value=G:null),label:o.unref(E)("Title"),maxlength:o.unref(xc),required:""},null,8,["modelValue","label","maxlength"]),o.createElementVNode("div",Dc,[o.createElementVNode("label",Mc,o.toDisplayString(o.unref(E)("Description")),1),o.createVNode(o.unref(R),{modelValue:o.unref(h),"onUpdate:modelValue":b[4]||(b[4]=G=>o.isRef(h)?h.value=G:null),"community-uri":o.unref(l),"max-line":6,"min-line":4,mode:"SIMPLE",outlined:""},null,8,["modelValue","community-uri"])])])):o.createCommentVNode("",!0),o.unref(r)===o.unref(I).Community&&o.unref(c)===o.unref(C).Media?(o.openBlock(),o.createElementBlock("div",Vc,[o.createVNode(Ne,{modelValue:o.unref(ce),"onUpdate:modelValue":b[5]||(b[5]=G=>o.isRef(ce)?ce.value=G:null),options:[{label:o.unref(E)("DisplayOnFeed"),value:"true"}]},null,8,["modelValue","options"]),o.withDirectives(o.createVNode(pn,{class:"fonticon-clickable",color:"",icon:"help-circled"},null,512),[[vn,o.unref(E)("IfSelectedTheMediaWillBeDisplayedOnTheWhatsNew",{0:"<b>",1:"</b>"}),void 0,{top:!0}]])])):o.createCommentVNode("",!0),o.createElementVNode("p",Uc,o.toDisplayString(o.unref(E)("PublishNote")),1)]),_:1},512)):o.createCommentVNode("",!0),o.createElementVNode("div",Lc,[y.base64image?(o.openBlock(),o.createElementBlock("img",{key:0,src:y.base64image,width:"100%"},null,8,Fc)):o.createCommentVNode("",!0)]),o.renderSlot(y.$slots,"footer",{},()=>[o.createVNode(o.unref(mt))],!0)]),_:3}),o.createElementVNode("div",jc,[o.withDirectives((o.openBlock(),o.createBlock(Qe,{class:"bg-blue-2 publish-btn",color:"primary",disabled:o.unref(_),onClick:b[7]||(b[7]=()=>Ho({isSaveDraft:!1}))},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(E)("Publish")),1)]),_:1},8,["disabled"])),[[Xe,o.unref(A)&&!o.unref(D)]]),o.withDirectives((o.openBlock(),o.createBlock(Qe,{class:"save-as-draft-btn",disabled:o.unref(_),onClick:b[8]||(b[8]=()=>Ho({isSaveDraft:!0}))},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(E)("SaveDraft")),1)]),_:1},8,["disabled"])),[[Xe,o.unref(A)&&o.unref(D)]]),o.createVNode(Qe,{onClick:b[9]||(b[9]=G=>id())},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(E)("Cancel")),1)]),_:1})])])),[[Xe,o.unref(A)]]),o.createVNode(mn,{class:"!z-[5000]"})],64)}}}),[["__scopeId","data-v-0bbb4dcb"]]);g.API=Ye,g.AppFeaturePreference=mo,g.CACHE=ue,g.CSRF=Be,g.CommonEvents=vo,g.CommonRequest=$t,g.EXALEAD_SEARCH_DEBOUNCE=tn,g.GLOBAL_ERROR_EVENT=xn,g.GLOBAL_ERROR_LIST_403=Pn,g.I3dxDomain=Qn,g.IContentModel=C,g.Preferences=J,g.PublishFormVue=Wc,g.SERVICE=P,g.SearchService=Pl,g.URLPreviewUI=Wo,g.XRequestIdHeader=ve,g._export_sfc=X,g.addRequestId=Dn,g.cacheDecorator=Q,g.commonjsGlobal=Zs,g.contentsParser=jt,g.dsFetch=$,g.getAllPlatformsAvailable=Ze,g.getContentModelFromSubjectUri=Xn,g.getConversationById=Kt,g.getCurrentUser=je,g.getDefaultExportFromCjs=Gn,g.getIdFromSubjectUri=zt,g.getInitialsFromName=jo,g.getPlatformId=B,g.getServiceUrl=K,g.getServicesUrl=St,g.getSwymUrl=re,g.handleCsrfError=ot,g.handleInactiveUser=On,g.handleLicenseError=Bn,g.initCsrfFromTokenOrSessionStorage=Ot,g.logger=N,g.logout=Tn,g.mutualizerDecorator=No,g.networkFirstAndCacheDecorator=Mn,g.passportAuth=Nn,g.proxifyUrl=Pe,g.removeRequestId=Pt,g.requirejs=Ee,g.requirejsOne=Se,g.resolveRef=xe,g.serviceProxy=De,g.servicesAuth=Oe,g.setCsrfOnHeader=Bt,g.swymFetch=F,g.unescapeHTML=Fn,g.updateCache=tt,g.useCounter=Dr,g.useFeatureManager=Le,g.useThrottleFn=ko,g.useTranslations=Ln,g.useTranslations$1=le,g.useVModel=Fr});
//# sourceMappingURL=publish-form-vue-BKQGyVzh.js.map
