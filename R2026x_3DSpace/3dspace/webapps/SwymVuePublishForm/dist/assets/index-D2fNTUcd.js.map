{"version":3,"file":"index-D2fNTUcd.js","sources":["../../../../../../../node_modules/@ds/swymkit/node_modules/@3ds/common-request-proxification/src/lib/common-utils.js","../../../../../../../node_modules/@ds/swymkit/node_modules/@3ds/common-request-proxification/src/lib/common-request-proxification.js"],"sourcesContent":["class CommonUtils {\n    static removeDotSegments(input) {\n        const output = [];\n        function handleDotSegments(p) {\n            if (p === '/..') {\n                output.pop();\n            }\n            else {\n                output.push(p);\n            }\n        }\n        input.replace(/^(\\.\\.?(\\/|$))+/, '')\n            .replace(/\\/(\\.(\\/|$))+/g, '/')\n            .replace(/\\/\\.\\.$/, '/../')\n            .replace(/\\/?[^/]*/g, handleDotSegments);\n        return output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\n    }\n    /**\n     * Build an url from linkHref param in same context than widgetUrl param.\n     *\n     * @example\n     * CommonUtils.Utils.buildUrl(\"http://example.org/mywidget.html\", \"/index.html\");\n     * // will return \"http://example.org/index.html\"\n     *\n     * @param {String} url - A full absolute url (e.g \"http://example.org\")\n     * @param {String} href - Another url or simple file path (e.g. \"/index.html\")\n     * @return {String} A new url related to widgetUrl url absolute value.\n     *\n     * @alias CommonUtils.Utils.buildUrl\n     */\n    static buildUrl(url, href) {\n        const defaultScheme = (window.location && window.location.protocol ? window.location.protocol : 'http:');\n        // Cast to string to handle window.location for example.\n        url = String(url);\n        href = String(href);\n        if (!CommonUtils.isAbsoluteUrl(url)) {\n            throw new Error('First argument should be a absolute url.');\n        }\n        // protocol less support\n        if (url.substring(0, 2) === '//') {\n            url = defaultScheme + url;\n        }\n        let i, l, path = '';\n        const splitScheme = String(url).split('://'), scheme = splitScheme[0], resource = splitScheme[1], splitDirectory = resource.split('/'), domain = splitDirectory[0];\n        // protocol less\n        if (href.substring(0, 2) === '//') {\n            url = scheme + ':' + href;\n            // complete\n        }\n        else if (href.split('://').length > 1) {\n            url = href;\n            // absolute\n        }\n        else if (href.substring(0, 1) === '/') {\n            url = scheme + '://' + domain + href;\n            // relative\n        }\n        else {\n            for (i = 1, l = splitDirectory.length - 1; i < l; i++) {\n                path += '/' + splitDirectory[i];\n            }\n            url = scheme + '://' + domain + CommonUtils.removeDotSegments(path + '/' + href);\n        }\n        return url;\n    }\n    /**\n     * Parse an Url to extract uri parts (protocol, domain, ...). The URL should include the protocol (http://).\n     *\n     * @example\n     * CommonUtils.Utils.parseUrl(\"http://me@example.com:80\");\n     * // will return {\"source\":\"http://me@example.com:80\",\"protocol\":\"http\",\"authority\":\"me@example.com:80\",\"domain\":\"me@example.com\",\"port\":\"80\",...}\n     *\n     * @param {String} sourceUri - A valid url (e.g. \"http://netvibes.com\")\n     * @return {Object} Object with following properties: source, protocol, authority, domain, port, path, directoryPath, fileName, query, anchor.\n     *\n     * @alias CommonUtils.Utils.parseUrl\n     */\n    static parseUrl(sourceUri) {\n        const uriPartNames = ['source', 'subprotocol', 'protocol', 'authority', 'user', 'password', 'domain', 'port', 'path', 'directoryPath', 'fileName', 'query', 'anchor'], uriPartRegExp = new RegExp(\"^\" +\n            \"(?:(?:(?:([^#.:]+):)?([^#.:]+):)?//)?\" + // subprotocol / protocol\n            \"((?:([^:/]+)(?::([^/]*?))?@)?\" + // authority (user / password /\n            \"([^:/?#]*)(?::(\\\\d*))?)?\" + // domain / port)\n            \"((/(?:[^?#](?![^?#/]*\\\\.[^?#/.]+(?:[\\\\?#]|$)))*/?)?([^?#/]*))?\" + // path (directoryPath / fileName)\n            \"(?:\\\\?([^#]*))?\" + // query\n            \"(?:#(.*))?\" // anchor\n        );\n        let i;\n        const uriParts = uriPartRegExp.exec(sourceUri), uri = {};\n        for (i = 0; i < uriPartNames.length; i++) {\n            uri[uriPartNames[i]] = (uriParts[i] || '');\n        }\n        // Remove subprotocol from source\n        if (uri.subprotocol) {\n            uri.source = uri.source.substr(uri.subprotocol.length + 1);\n        }\n        // Default port (as String)\n        if (!uri.port) {\n            uri.port = uri.protocol === 'https' ? '443' : '80';\n        }\n        // Always end directoryPath with a trailing backslash if a path was present in the source URI\n        // Note that a trailing backslash is NOT automatically inserted within or appended to the \"path\" key\n        if (uri.directoryPath && uri.directoryPath.length > 0) {\n            uri.directoryPath = uri.directoryPath.replace(/\\/?$/, \"/\");\n        }\n        // DNS RFCs says hostnames are case insensitive\n        uri.domain = uri.domain.toLocaleLowerCase();\n        uri.protocol = uri.protocol.toLocaleLowerCase();\n        return uri;\n    }\n    /**\n     * Build an Url to from uri parts (protocol, domain, ...).\n     *\n     * @example\n     * CommonUtils.composeUrl({\n     *    protocol: \"https\",\n     *    subprotocol: \"feed\",\n     *    authority: \"example.org:8080\",\n     *    domain: \"example.org\",\n     *    port: \"8080\",\n     *    path: \"/mypath/mywidget.html\",\n     *    directoryPath: \"/mypath/\",\n     *    fileName: \"mywidget.html\",\n     *    query: \"lorem=ipsum&hello=world\",\n     *    anchor: \"sit\"\n     * });\n     * // will return \"feed:https://example.org:8080/mypath/mywidget.html?lorem=ipsum&hello=world#sit\"\n     *\n     *\n     * @param {String} parts - An object with following properties: source, protocol, authority, domain, port, path, directoryPath, fileName, query, anchor\n     * @return {String} A valid url (e.g. \"http://netvibes.com\").\n     *\n     * @alias CommonUtils.composeUrl\n     */\n    static composeUrl(parts) {\n        let result = '';\n        if (parts.protocol) {\n            result = parts.protocol + '://';\n            if (parts.subprotocol) {\n                result = parts.subprotocol + ':' + result;\n            }\n        }\n        if (parts.domain) {\n            result += parts.domain;\n            if (parts.port &&\n                (parts.protocol !== 'http' || parseInt(parts.port, 10) !== 80) &&\n                (parts.protocol !== 'https' || parseInt(parts.port, 10) !== 443)) {\n                result += ':' + parts.port;\n            }\n        }\n        else if (parts.authority) {\n            result += parts.authority;\n        }\n        if (parts.path) {\n            result += parts.path;\n        }\n        if (parts.query) {\n            result += '?' + parts.query;\n        }\n        if (parts.anchor) {\n            result += '#' + parts.anchor;\n        }\n        return result;\n    }\n    /**\n     * Compare two url to check if their domain, protocol and port match.\n     *\n     * @example\n     * // Following will return `true`\n     * CommonUtils.Utils.matchUrl('http://example.com/mypath/index.html', '/mypath/index.html');\n     * CommonUtils.Utils.matchUrl('http://example.com/mypath/index.html', 'mypath/index.html');\n     * CommonUtils.Utils.matchUrl('http://example.com/mypath/index.html', 'http://example.com/index.html');\n     *\n     * // Following will return `false`\n     * CommonUtils.Utils.matchUrl('http://example.com/mypath/index.html', 'http://example.org/mypath/index.html');\n     * CommonUtils.Utils.matchUrl('http://example.com/mypath/index.html', 'https://example.com/mypath/index.html');\n     *\n     * @param {String} originaUrl - First url to compare\n     * @param {String} requestUrl - Second url to compare\n     * @return {Boolean} `true` if urls match else `false`.\n     *\n     * @alias CommonUtils.Utils.matchUrl\n     */\n    static matchUrl(originaUrl, requestUrl) {\n        let originalUrlParts, requestUrlParts, matchUrl = false;\n        const originalIsAbsolute = CommonUtils.isAbsoluteUrl(originaUrl), requestIsAbsolute = CommonUtils.isAbsoluteUrl(requestUrl);\n        // If both are relative then match\n        if (!originalIsAbsolute && !requestIsAbsolute) {\n            matchUrl = true;\n            // Else process check\n        }\n        else {\n            // If one url is not relative fix it using buildUrl.\n            // like that we support \"/apps/index.html\" and \"apps/index.html\".\n            if (!originalIsAbsolute) {\n                originaUrl = CommonUtils.buildUrl(requestUrl, originaUrl);\n            }\n            else if (!requestIsAbsolute) {\n                requestUrl = CommonUtils.buildUrl(originaUrl, requestUrl);\n            }\n            originalUrlParts = CommonUtils.parseUrl(originaUrl);\n            requestUrlParts = CommonUtils.parseUrl(requestUrl);\n            matchUrl = ['domain', 'protocol', 'port'].every(function (name) {\n                // Pure match\n                return originalUrlParts[name] === requestUrlParts[name] ||\n                    // Protocol less match\n                    (name === 'protocol' && (originalUrlParts[name] === '' || requestUrlParts[name] === ''));\n            });\n        }\n        return matchUrl;\n    }\n    /**\n     * Test if an URL is absolute.\n     *\n     * @example\n     * CommonUtils.Utils.isAbsoluteUrl('http://foo.com');\n     * // will return true\n     *\n     * CommonUtils.Utils.isAbsoluteUrl('/foo');\n     * // will return false\n     *\n     * @param {String} url - the url to check\n     * @return {Boolean} `true` if the URL is absolute.\n     *\n     * @alias CommonUtils.Utils.isAbsoluteUrl\n     */\n    static isAbsoluteUrl(url) {\n        const re = /^((https?|ftp|file):)?\\/\\//;\n        return re.test(url);\n    }\n    /**\n     * Encode an Object to a url string.\n     *\n     * @example\n     * CommonUtils.Utils.toQueryString({\n     *    example: 1,\n     *    array: ['hello', 'world'],\n     *    object: {key: 'value'}\n     * });\n     * // will return \"example=1&array[0]=hello&array[1]=world\"\n     *\n     * CommonUtils.Utils.toQueryString({\n     *    toQueryString: function () {\n     *        return 'hello'\n     *    }\n     * });\n     * // will return \"hello\"\n     *\n     * @param {Object} myObject - Object to encode\n     * @param {Object} base - Sub object to encode\n     * @return {String} Encoded string.\n     *\n     * @alias CommonUtils.Utils.toQueryString\n     */\n    static toQueryString(myObject, base) {\n        let key, value, result, queryString;\n        if (CommonUtils.is(myObject, 'string')) {\n            queryString = myObject;\n        }\n        else if (CommonUtils.is(myObject.toQueryString, 'function')) {\n            queryString = myObject.toQueryString();\n        }\n        else {\n            queryString = [];\n            for (key in myObject) {\n                if (myObject.hasOwnProperty(key)) {\n                    value = myObject[key];\n                    if (base) {\n                        key = base + '[' + CommonUtils.capitalize(key) + ']';\n                    }\n                    if (CommonUtils.is(value)) {\n                        if (CommonUtils.is(value, 'object') || CommonUtils.is(value, 'array')) {\n                            result = CommonUtils.toQueryString(value, key);\n                        }\n                        else if (!CommonUtils.is(value, 'function')) {\n                            result = CommonUtils.encodeUrl(key) + '=' + CommonUtils.encodeUrl(value);\n                        }\n                    }\n                    if (result) {\n                        queryString.push(result);\n                    }\n                    // Reset buffer\n                    result = undefined;\n                }\n            }\n            queryString = queryString.join('&');\n        }\n        return queryString;\n    }\n    static is(object, type) {\n        // console.log(\"DEBUG check object\", typeof object, type)\n        if (object && type)\n            return typeof object === type;\n        else if (object)\n            return typeof object !== 'undefined';\n        else\n            return false;\n    }\n    /**\n     * Simple encodeURIComponent wrapper to escape \".\" to \"%2e\" also.\n     *\n     * @example\n     * CommonUtils.Utils.encodeUrl(\"hello?/e;&.\");\n     * // will return \"hello%3F%2Fe%3B%26%2e\"\n     *\n     * @param {String} str - String to encode\n     * @return {String} Encoded string.\n     *\n     * @alias CommonUtils.Utils.encodeUrl\n     */\n    static encodeUrl(str) {\n        return encodeURIComponent(str).replace(/\\./g, '%2e');\n    }\n    static capitalize(str, delimiter = '-') {\n        const words = str.split(delimiter);\n        for (let i = 0; i < words.length; i++) {\n            words[i] = words[i][0].toUpperCase() + words[i].substr(1);\n        }\n        return words.join(delimiter);\n    }\n}\nexport default CommonUtils;\n//# sourceMappingURL=common-utils.js.map","import CommonUtils from \"./common-utils\";\nimport { Preferences } from \"@3ds/common-preferences\";\nclass CommonRequest {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    constructor() { }\n    /**\n     * UWA Proxy urls indexed by types.\n     */\n    static get proxies() {\n        // Native app proxies\n        const nativeProxies = Preferences.getNativeAppRequireConfig();\n        if (nativeProxies && nativeProxies.proxies) {\n            return nativeProxies.proxies;\n        }\n        // UWA proxies\n        const hosts = window.UWA && window.UWA.hosts || {};\n        const exposition = hosts.exposition;\n        const expositionProxy = exposition + '/proxy/';\n        const _proxies = hosts.proxies || {};\n        // console.log('DEBUG common-request proxies', _proxies)\n        return Object.assign(Object.assign({}, _proxies), {\n            ajax: expositionProxy + 'ajax',\n            resolve: expositionProxy + 'resolve',\n            xml: expositionProxy + 'xml',\n            spreadsheet: expositionProxy + 'spreadsheet',\n            soap: expositionProxy + 'soap',\n            feed: expositionProxy + 'feed',\n            icon: expositionProxy + 'icon',\n            richIcon: expositionProxy + 'richIcon',\n            rss: expositionProxy + 'feed' // Deprecated alias support\n        });\n    }\n    static normalizeRequestHeaders(request) {\n        const strHeaders = {}; // HTP1: need to filter headers (ref. WP)\n        request.headers.forEach((header, key) => {\n            // console.log(\"DEBUG proxifyRequest check header\", header)\n            strHeaders[key] = header;\n        });\n        return strHeaders;\n    }\n    static checkHasProxyPath(url) {\n        // Check native app proxies\n        if (Preferences.isNativeApp()) {\n            const nativeProxies = Preferences.getNativeAppRequireConfig();\n            if (nativeProxies && nativeProxies.proxies) {\n                for (const proxy in nativeProxies.proxies) {\n                    if (url.startsWith(nativeProxies.proxies[proxy]))\n                        return true;\n                }\n            }\n        }\n        return false;\n    }\n    /**\n     * This method is used to create a Request that can be proxified to do CORS requests.\n     * It supports the 2 proxy options:\n     *      - ajax (for non-authenticated request)\n     *      - passport (for authenticated request)\n     * It allows to create a proxified Request that use these proxies.\n     *\n     * __Specific proxy options__:\n     *\n     * You can pass specific options into an object that have the same name than the used proxy\n     * to configure proxy behavior, see Proxy Examples bellow for detailed usage.\n     *\n     * | Proxy       |  Description                                |\n     * | ------------| --------------------------------------------|\n     * | `ajax`      | cors request without authenticated session  |\n     * | `passport`  | authenticated session request               |\n     *\n     *\n     * @param {String}  url - the URL of the data source\n     * @param {Object}  options - NormalizedOptions header object\n     * @param {String}  [options.method=GET] - GET, POST (in uppercase!)\n     * @param {Object}  [options.body={}] - GET or POST params as object\n     * @param {String}  [options.proxy=false] - ajax, passport\n     * @param {Object}  [options.headers] - Headers object.\n     * @param {Request} originRequest - Original request.\n     *\n     * @return {Request} A request that is proxified or not\n     * If the options.proxy is set && the proxification condition is satisfied, a new request will be created with a proxified URL.\n     * Otherwise, the original request will be return.\n     *\n     * @alias CommonRequest.request\n     */\n    static async request(url, options, originRequest) {\n        // First argument is required.\n        if (!url) {\n            throw new Error('Bad or missing url argument.');\n        }\n        // If not on native app or on same domain then do not proxify url\n        if (!Preferences.isNativeApp() || CommonUtils.matchUrl(url, window.location))\n            return originRequest;\n        // Second argument is and object anyway\n        options = options || {};\n        let request;\n        // Default Options/Values\n        const originalUrl = url, currentUrl = window.location, defaultProxy = 'ajax', requestOptions = options;\n        if (requestOptions.headers && !requestOptions.normalizedHeaders) {\n            requestOptions.normalizedHeaders = CommonRequest.normalizeRequestHeaders(originRequest);\n        }\n        // console.log('DEBUG test proxification originalUrl', originalUrl)\n        // Check if proxy is requested and available then proxify url\n        if (requestOptions.proxy) {\n            url = CommonRequest.proxifyUrl(url, requestOptions);\n        }\n        else if (CommonUtils.matchUrl(url, currentUrl) === false && CommonRequest.allowCrossOriginRequest === false) {\n            // Force defaultProxy usage\n            url = CommonRequest.proxifyUrl(url, Object.assign(Object.assign({}, requestOptions), { proxy: defaultProxy }));\n        }\n        // console.log('DEBUG test proxification proxifyUrl final', url)\n        // Clone original request\n        const body = ['GET', 'HEAD'].includes(originRequest.method) ? undefined : await originRequest.blob();\n        requestOptions.body = body;\n        // eslint-disable-next-line prefer-const\n        request = new Request(url, requestOptions);\n        return request;\n    }\n    /**\n     * Proxify an URL using UWA proxy.\n     *\n     * @param {String} url - url to proxify\n     * @param {String} options - some options from <request> options parameter\n     * @return {String} full url to proxy with proxified options (header, data) has parameter.\n     *\n     * @alias CommonRequest.proxifyUrl\n     */\n    static proxifyUrl(url, options) {\n        if (!url) {\n            throw new Error('Bad or missing url argument.');\n        }\n        let proxyUrl;\n        // Alias\n        const params = [], proxy = options.proxy, toQueryString = CommonUtils.toQueryString, proxies = CommonRequest.proxies;\n        // Add Proxy params\n        if (proxy && proxies[proxy]) {\n            // If not on native app && same domain then do not proxify url\n            if (!Preferences.isNativeApp() || CommonUtils.matchUrl(url, window.location))\n                return url;\n            // Proxify Url\n            proxyUrl = proxies[proxy];\n            // console.log('DEBUG test proxification found proxyUrl', proxyUrl)\n            // Avoid double proxy\n            if (url.indexOf(proxyUrl) === 0) {\n                return url;\n            }\n            // Omit port in url, e.g. 443\n            if (url.startsWith('https://') && url.indexOf(':443') > -1) {\n                url = url.replace(':443', '');\n            }\n            // Handle GET data for proxies by updating url\n            if (options.body && options.method && options.method.toUpperCase() === 'GET') {\n                // Add separator\n                url += (url.indexOf('?') > -1 ? '&' : '?') + toQueryString(options.body);\n                console.log('DEBUG test proxification handle get', url);\n            }\n            // Add proxy options param if proxy is object\n            if (typeof options.proxy === 'object') {\n                params.push(toQueryString(options.proxy));\n            }\n            // Forward headers throw get param only in proxy mode\n            if (options.normalizedHeaders) {\n                params.push(toQueryString(options.normalizedHeaders, 'headers'));\n            }\n            else if (options.headers) {\n                params.push(toQueryString(options.headers, 'headers'));\n            }\n            // Add method params\n            if (options.method) {\n                params.push(toQueryString({\n                    method: options.method\n                }));\n            }\n            // Add proxified url as param\n            params.push(toQueryString({\n                url: url\n            }));\n            url = proxyUrl + '?' + params.join('&');\n            // Avoid Url limit overflow\n            if (url.length > 4096) {\n                console.log(\"Error proxify url too long\", url);\n                throw new Error('Proxified url is more than 4096 characters, that is the limit for most of the browsers.');\n            }\n        }\n        else {\n            throw new Error('Invalid proxy');\n        }\n        return url;\n    }\n}\n/**\n * Allow Cross Origin Request for Cross domain Ajax Request.\n */\nCommonRequest.allowCrossOriginRequest = false;\nexport default CommonRequest;\n//# sourceMappingURL=common-request-proxification.js.map"],"names":["CommonUtils","input","output","handleDotSegments","p","url","href","defaultScheme","i","l","path","splitScheme","scheme","resource","splitDirectory","domain","sourceUri","uriPartNames","uriPartRegExp","uriParts","uri","parts","result","originaUrl","requestUrl","originalUrlParts","requestUrlParts","matchUrl","originalIsAbsolute","requestIsAbsolute","name","myObject","base","key","value","queryString","object","type","str","delimiter","words","CommonRequest","nativeProxies","Preferences","hosts","expositionProxy","_proxies","request","strHeaders","header","proxy","options","originRequest","currentUrl","defaultProxy","requestOptions","body","proxyUrl","params","toQueryString","proxies"],"mappings":"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","x_google_ignoreList":[0,1]}