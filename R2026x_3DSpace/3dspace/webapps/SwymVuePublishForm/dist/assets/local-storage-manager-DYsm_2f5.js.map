{"version":3,"file":"local-storage-manager-DYsm_2f5.js","sources":["../../../../../../../src/src/vendors/swym/utils/local-storage-manager.ts"],"sourcesContent":["import { getPlatformId } from '@ds/swymkit/stores'\nimport type { MaybeRefOrGetter } from '@vueuse/shared'\nimport type { Ref } from 'vue'\n\nconst PREFIX = window.widget ? '3DSWYM' : '3DSWYMV3'\nconst SEPARATOR = '-'\nlet USER_ID = ''\n\ninterface LSMOptions {\n  separator?: string\n  prefix?: string\n}\n\nexport function setupUserIdForLocalStorageManager(userId: string) {\n  USER_ID = userId\n}\n\n/**\n * Get the prefixed key\n * @param key localstorage key\n * @param options.tenant Set true to use the tenant in the key\n * @param options.separator Set a custom separator, default \"-\"\n * @param options.prefix Set a custom prefix, default \"3DSWYMV3\"\n * @param options.widget Set the widget to use the widget id in the key\n * @returns prefixed key\n */\nexport function buildPrefixedKey(key: string, options?: LSMOptions): string {\n  const separator = options?.separator || SEPARATOR\n  const prefix = options?.prefix ? PREFIX + separator + options.prefix : PREFIX\n  const fullKey = [prefix, getPlatformId(), USER_ID]\n\n  if (window.widget?.id)\n    fullKey.push(window.widget.id)\n\n  fullKey.push(key)\n\n  return fullKey.join(separator)\n}\n\nexport function useLocalStorageManager<T>(key: string, value: MaybeRefOrGetter<T>, options?: LSMOptions): Ref<T> {\n  const prefix = buildPrefixedKey(key, options)\n  return useLocalStorage<T>(prefix, value, {\n    serializer: {\n      read: (v: any) => (v && v !== 'undefined') ? JSON.parse(v) : null,\n      write: (v: any) => JSON.stringify(v),\n    },\n  }) as Ref<T>\n}\n"],"names":["setupUserIdForLocalStorageManager","userId"],"mappings":"oCAaO,SAASA,EAAkCC,EAAgB,CAElE"}