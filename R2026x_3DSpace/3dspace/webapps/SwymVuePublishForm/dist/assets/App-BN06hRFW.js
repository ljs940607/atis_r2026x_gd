const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.SWYM_DIST_PATH + "assets/ckeditor-wrapper-Mhc6eNgU.css"])))=>i.map(i=>d[i]);
import{r as $,w as z,ab as _t,u as d,l as oe,a6 as et,t as Ie,b as gt,d as Sn,$ as Gt,a0 as Yt,c as x,v as wt,O as xn,W as ye,a1 as Ke,a9 as be,aa as se,ac as Qt,ad as Ue,ae as Z,af as $e,ag as kn,ah as Kt,ai as Jt,aj as bt,o as v,B as w,k as An,I as Os,G as X,g as E,A as V,h as B,K as tt,z as A,J as Ee,C as L,n as I,L as ae,M as Re,e as R,f as D,E as Dt,x as Ce,y as re,D as fn,H as Pe,T as Ms,i as Xt,ak as le,j as Q,al as ht,am as nt,an as J,V as Ns,p as mt,q as $t,ao as Ds,ap as En,a as Ct,aq as qe,ar as Us,as as Te,at as Zt,au as Ut,av as Lt,aw as jt,ax as en,ay as Ls,az as Pn,Y as js,aA as It,U as Rs,aB as Bs}from"./appStandalone-C5Q9Mp7v.js";import{message as De}from"./VUEKIT-Cc5I_EyB.js";import{CommonRequest as Vs}from"./index-D2fNTUcd.js";import{getCurrentUser as tn,searchUser as Fs}from"./users-Di-8Btlh.js";import{useTranslations as qs}from"./index-DLbXXPVV.js";function Ws(){var e;try{return(e=globalThis==null?void 0:globalThis.document)==null?void 0:e.cookie.split(";").map(t=>t.split("=")).reduce((t,[n,s])=>(t[decodeURIComponent(n==null?void 0:n.trim())]=decodeURIComponent(s==null?void 0:s.trim()),t),{})}catch{return{}}}var pn;(pn=Ws())!=null&&pn.swymlang;function zs(e){return Gt()?(Yt(e),!0):!1}function Oe(e){return typeof e=="function"?e():d(e)}const K=Oe,Hs=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Gs=e=>typeof e<"u",Je=()=>{};function In(e,t){function n(...s){return new Promise((i,o)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(i).catch(o)})}return n}function Ys(e,t={}){let n,s,i=Je;const o=a=>{clearTimeout(a),i(),i=Je};return a=>{const l=Oe(e),f=Oe(t.maxWait);return n&&o(n),l<=0||f!==void 0&&f<=0?(s&&(o(s),s=null),Promise.resolve(a())):new Promise((c,u)=>{i=t.rejectOnCancel?u:c,f&&!s&&(s=setTimeout(()=>{n&&o(n),s=null,c(a())},f)),n=setTimeout(()=>{s&&o(s),s=null,c(a())},l)})}}function Qs(...e){let t=0,n,s=!0,i=Je,o,r,a,l,f;!oe(e[0])&&typeof e[0]=="object"?{delay:r,trailing:a=!0,leading:l=!0,rejectOnCancel:f=!1}=e[0]:[r,a=!0,l=!0,f=!1]=e;const c=()=>{n&&(clearTimeout(n),n=void 0,i(),i=Je)};return h=>{const y=Oe(r),m=Date.now()-t,p=()=>o=h();return c(),y<=0?(t=Date.now(),p()):(m>y&&(l||!s)?(t=Date.now(),p()):a&&(o=new Promise((_,b)=>{i=f?b:_,n=setTimeout(()=>{t=Date.now(),s=!0,_(p()),c()},Math.max(0,y-m))})),!l&&!n&&(n=setTimeout(()=>s=!0,y)),s=!1,o)}}function Ks(e,t){var n;if(typeof e=="number")return e+t;const s=((n=e.match(/^-?\d+\.?\d*/))==null?void 0:n[0])||"",i=e.slice(s.length),o=Number.parseFloat(s)+t;return Number.isNaN(o)?e:o+i}function Js(e){return et()}function Xs(...e){if(e.length!==1)return Ie(...e);const t=e[0];return typeof t=="function"?gt(Sn(()=>({get:t,set:Je}))):$(t)}const We=Xs;function Zs(e,t=200,n={}){return In(Ys(t,n),e)}function ei(e,t=200,n={}){const s=$(e.value),i=Zs(()=>{s.value=e.value},t,n);return z(e,()=>i()),s}function ti(e,t=200,n=!1,s=!0,i=!1){return In(Qs(t,n,s,i),e)}function ni(e,t=200,n=!0,s=!0){if(t<=0)return e;const i=$(e.value),o=ti(()=>{i.value=e.value},t,n,s);return z(e,()=>o()),i}function On(e,t){Js()&&_t(e,t)}function Ou(e=0,t={}){let n=d(e);const s=$(e),{max:i=Number.POSITIVE_INFINITY,min:o=Number.NEGATIVE_INFINITY}=t,r=(u=1)=>s.value=Math.max(Math.min(i,s.value+u),o),a=(u=1)=>s.value=Math.min(Math.max(o,s.value-u),i),l=()=>s.value,f=u=>s.value=Math.max(o,Math.min(i,u));return{count:s,inc:r,dec:a,get:l,set:f,reset:(u=n)=>(n=u,f(u))}}function hn(e,t,n){return z(e,(i,o,r)=>{i&&t(i,o,r)},{...n,once:!1})}const Mn=Hs?window:void 0;function si(){const e=$(!1),t=et();return t&&ye(()=>{e.value=!0},t),e}function ii(e){const t=si();return x(()=>(t.value,!!e()))}function ze(e,t={}){const{window:n=Mn}=t,s=ii(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let i;const o=$(!1),r=f=>{o.value=f.matches},a=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",r):i.removeListener(r))},l=wt(()=>{s.value&&(a(),i=n.matchMedia(Oe(e)),"addEventListener"in i?i.addEventListener("change",r):i.addListener(r),o.value=i.matches)});return zs(()=>{l(),a(),i=void 0}),o}function oi(e,t={}){function n(c,u){let h=Oe(e[Oe(c)]);return u!=null&&(h=Ks(h,u)),typeof h=="number"&&(h=`${h}px`),h}const{window:s=Mn,strategy:i="min-width"}=t;function o(c){return s?s.matchMedia(c).matches:!1}const r=c=>ze(()=>`(min-width: ${n(c)})`,t),a=c=>ze(()=>`(max-width: ${n(c)})`,t),l=Object.keys(e).reduce((c,u)=>(Object.defineProperty(c,u,{get:()=>i==="min-width"?r(u):a(u),enumerable:!0,configurable:!0}),c),{});function f(){const c=Object.keys(e).map(u=>[u,r(u)]);return x(()=>c.filter(([,u])=>u.value).map(([u])=>u))}return Object.assign(l,{greaterOrEqual:r,smallerOrEqual:a,greater(c){return ze(()=>`(min-width: ${n(c,.1)})`,t)},smaller(c){return ze(()=>`(max-width: ${n(c,-.1)})`,t)},between(c,u){return ze(()=>`(min-width: ${n(c)}) and (max-width: ${n(u,-.1)})`,t)},isGreater(c){return o(`(min-width: ${n(c,.1)})`)},isGreaterOrEqual(c){return o(`(min-width: ${n(c)})`)},isSmaller(c){return o(`(max-width: ${n(c,-.1)})`)},isSmallerOrEqual(c){return o(`(max-width: ${n(c)})`)},isInBetween(c,u){return o(`(min-width: ${n(c)}) and (max-width: ${n(u,-.1)})`)},current:f,active(){const c=f();return x(()=>c.value.length===0?"":c.value.at(-1))}})}function ri(e){return JSON.parse(JSON.stringify(e))}function Mu(e,t,n,s={}){var i,o,r;const{clone:a=!1,passive:l=!1,eventName:f,deep:c=!1,defaultValue:u,shouldEmit:h}=s,y=et(),m=n||(y==null?void 0:y.emit)||((i=y==null?void 0:y.$emit)==null?void 0:i.bind(y))||((r=(o=y==null?void 0:y.proxy)==null?void 0:o.$emit)==null?void 0:r.bind(y==null?void 0:y.proxy));let p=f;p=p||`update:${t.toString()}`;const _=P=>a?typeof a=="function"?a(P):ri(P):P,b=()=>Gs(e[t])?_(e[t]):u,C=P=>{h?h(P)&&m(p,P):m(p,P)};if(l){const P=b(),H=$(P);let q=!1;return z(()=>e[t],O=>{q||(q=!0,H.value=_(O),xn(()=>q=!1))}),z(H,O=>{!q&&(O!==e[t]||c)&&C(O)},{deep:c}),H}else return x({get(){return b()},set(P){C(P)}})}const ai="380px",li="465px",ui="640px",ci="768px",di="1024px",fi="1280px",pi={"2xs":"300px",xs:ai,tiny:li,sm:ui,md:ci,"2md":"960px",lg:di,xl:fi,"2xl":"1536px","3xl":"1920px"},hi=(()=>{const e={};for(const[t,n]of Object.entries(pi))e[t]=Number.parseInt(n,10);return Object.freeze(e)})();function mi(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function vi(){const e=navigator.userAgent.toLowerCase();return/iphone|ipad/i.test(e)||/safari/.test(e)&&!/chrome/.test(e)&&mi()}function yi(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||vi()}function _i(e){return new DOMParser().parseFromString(e||"","text/html").documentElement.textContent||""}function nn(e){return Gt()?(Yt(e),!0):!1}function ve(e){return typeof e=="function"?e():d(e)}const Nn=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const gi=e=>e!=null,Dn=()=>{};function wi(e,t){var n;if(typeof e=="number")return e+t;const s=((n=e.match(/^-?\d+\.?\d*/))==null?void 0:n[0])||"",i=e.slice(s.length),o=Number.parseFloat(s)+t;return Number.isNaN(o)?e:o+i}function Un(e){return et()}function bi(...e){if(e.length!==1)return Ie(...e);const t=e[0];return typeof t=="function"?gt(Sn(()=>({get:t,set:Dn}))):$(t)}function $i(e,t){Un()&&_t(e,t)}function Ci(e,t=!0,n){Un()?ye(e,n):t?e():xn(e)}function Ti(e=!1,t={}){const{truthyValue:n=!0,falsyValue:s=!1}=t,i=oe(e),o=$(e);function r(a){if(arguments.length)return o.value=a,o.value;{const l=ve(n);return o.value=o.value===l?ve(s):l,o.value}}return i?r:[o,r]}function Rt(e,t,n){return z(e,(i,o,r)=>{i&&t(i,o,r)},{...n,once:!1})}function Si(e,t,n){let s;oe(n)?s={evaluating:n}:s={};const{lazy:i=!1,evaluating:o=void 0,shallow:r=!0,onError:a=Dn}=s,l=$(!i),f=r?Ke(t):$(t);let c=0;return wt(async u=>{if(!l.value)return;c++;const h=c;let y=!1;o&&Promise.resolve().then(()=>{o.value=!0});try{const m=await e(p=>{u(()=>{o&&(o.value=!1),y||p()})});h===c&&(f.value=m)}catch(m){a(m)}finally{o&&h===c&&(o.value=!1),y=!0}}),i?x(()=>(l.value=!0,f.value)):f}const st=Nn?window:void 0,xi=Nn?window.document:void 0;function ke(e){var t;const n=ve(e);return(t=n==null?void 0:n.$el)!=null?t:n}function ki(){const e=$(!1),t=et();return t&&ye(()=>{e.value=!0},t),e}function sn(e){const t=ki();return x(()=>(t.value,!!e()))}function Ai(e,t,n={}){const{window:s=st,...i}=n;let o;const r=sn(()=>s&&"MutationObserver"in s),a=()=>{o&&(o.disconnect(),o=void 0)},l=x(()=>{const h=ve(e),y=(Array.isArray(h)?h:[h]).map(ke).filter(gi);return new Set(y)}),f=z(()=>l.value,h=>{a(),r.value&&h.size&&(o=new MutationObserver(t),h.forEach(y=>o.observe(y,i)))},{immediate:!0,flush:"post"}),c=()=>o==null?void 0:o.takeRecords(),u=()=>{f(),a()};return nn(u),{isSupported:r,stop:u,takeRecords:c}}function He(e,t={}){const{window:n=st}=t,s=sn(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let i;const o=$(!1),r=f=>{o.value=f.matches},a=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",r):i.removeListener(r))},l=wt(()=>{s.value&&(a(),i=n.matchMedia(ve(e)),"addEventListener"in i?i.addEventListener("change",r):i.addListener(r),o.value=i.matches)});return nn(()=>{l(),a(),i=void 0}),o}function Ei(e,t={}){function n(c,u){let h=ve(e[ve(c)]);return u!=null&&(h=wi(h,u)),typeof h=="number"&&(h=`${h}px`),h}const{window:s=st,strategy:i="min-width"}=t;function o(c){return s?s.matchMedia(c).matches:!1}const r=c=>He(()=>`(min-width: ${n(c)})`,t),a=c=>He(()=>`(max-width: ${n(c)})`,t),l=Object.keys(e).reduce((c,u)=>(Object.defineProperty(c,u,{get:()=>i==="min-width"?r(u):a(u),enumerable:!0,configurable:!0}),c),{});function f(){const c=Object.keys(e).map(u=>[u,r(u)]);return x(()=>c.filter(([,u])=>u.value).map(([u])=>u))}return Object.assign(l,{greaterOrEqual:r,smallerOrEqual:a,greater(c){return He(()=>`(min-width: ${n(c,.1)})`,t)},smaller(c){return He(()=>`(max-width: ${n(c,-.1)})`,t)},between(c,u){return He(()=>`(min-width: ${n(c)}) and (max-width: ${n(u,-.1)})`,t)},isGreater(c){return o(`(min-width: ${n(c,.1)})`)},isGreaterOrEqual(c){return o(`(min-width: ${n(c)})`)},isSmaller(c){return o(`(max-width: ${n(c,-.1)})`)},isSmallerOrEqual(c){return o(`(max-width: ${n(c)})`)},isInBetween(c,u){return o(`(min-width: ${n(c)}) and (max-width: ${n(u,-.1)})`)},current:f,active(){const c=f();return x(()=>c.value.length===0?"":c.value.at(-1))}})}function Pi(e,t,n={}){const{window:s=st,...i}=n;let o;const r=sn(()=>s&&"ResizeObserver"in s),a=()=>{o&&(o.disconnect(),o=void 0)},l=x(()=>{const u=ve(e);return Array.isArray(u)?u.map(h=>ke(h)):[ke(u)]}),f=z(l,u=>{if(a(),r.value&&s){o=new ResizeObserver(t);for(const h of u)h&&o.observe(h,i)}},{immediate:!0,flush:"post"}),c=()=>{a(),f()};return nn(c),{isSupported:r,stop:c}}function Ii(e,t={width:0,height:0},n={}){const{window:s=st,box:i="content-box"}=n,o=x(()=>{var u,h;return(h=(u=ke(e))==null?void 0:u.namespaceURI)==null?void 0:h.includes("svg")}),r=$(t.width),a=$(t.height),{stop:l}=Pi(e,([u])=>{const h=i==="border-box"?u.borderBoxSize:i==="content-box"?u.contentBoxSize:u.devicePixelContentBoxSize;if(s&&o.value){const y=ke(e);if(y){const m=y.getBoundingClientRect();r.value=m.width,a.value=m.height}}else if(h){const y=Array.isArray(h)?h:[h];r.value=y.reduce((m,{inlineSize:p})=>m+p,0),a.value=y.reduce((m,{blockSize:p})=>m+p,0)}else r.value=u.contentRect.width,a.value=u.contentRect.height},n);Ci(()=>{const u=ke(e);u&&(r.value="offsetWidth"in u?u.offsetWidth:t.width,a.value="offsetHeight"in u?u.offsetHeight:t.height)});const f=z(()=>ke(e),u=>{r.value=u?t.width:0,a.value=u?t.height:0});function c(){l(),f()}return{width:r,height:a,stop:c}}function Oi(e=null,t={}){var n,s,i;const{document:o=xi,restoreOnUnmount:r=u=>u}=t,a=(n=o==null?void 0:o.title)!=null?n:"",l=bi((s=e??(o==null?void 0:o.title))!=null?s:null),f=e&&typeof e=="function";function c(u){if(!("titleTemplate"in t))return u;const h=t.titleTemplate||"%s";return typeof h=="function"?h(u):ve(h).replace(/%s/g,u)}return z(l,(u,h)=>{u!==h&&o&&(o.title=c(typeof u=="string"?u:""))},{immediate:!0}),t.observe&&!t.titleTemplate&&o&&!f&&Ai((i=o.head)==null?void 0:i.querySelector("title"),()=>{o&&o.title!==l.value&&(l.value=c(o.title))},{childList:!0}),$i(()=>{if(r){const u=r(a,l.value||"");u!=null&&o&&(o.title=u)}}),l}const Ln=$(""),Mi=$("");Oi(Ln);gt(Ln);gt(Mi);var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ni(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Du(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}),n}function Me(e,t){var n,s;if(typeof t=="function")s=t(e),s!==void 0&&(e=s);else if(Array.isArray(t))for(n=0;n<t.length;n++)s=t[n](e),s!==void 0&&(e=s);return e}function Di(e,t){return e[0]==="-"&&Array.isArray(t)&&/^-\d+$/.test(e)?t.length+parseInt(e,10):e}function Ui(e){return/^\d+$/.test(e)}function dt(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ye(e){return Object(e)===e}function ft(e){return Object.keys(e).length===0}var Li=["__proto__","prototype","constructor"],ji=function(e){return Li.indexOf(e)===-1};function Tt(e,t){e.indexOf("[")>=0&&(e=e.replace(/\[/g,t).replace(/]/g,""));var n=e.split(t),s=n.filter(ji);if(s.length!==n.length)throw Error("Refusing to update blacklisted property "+e);return n}var mn=Object.prototype.hasOwnProperty;function N(e,t,n,s){if(!(this instanceof N))return new N(e,t,n,s);typeof t>"u"&&(t=!1),typeof n>"u"&&(n=!0),typeof s>"u"&&(s=!0),this.separator=e||".",this.override=t,this.useArray=n,this.useBrackets=s,this.keepArray=!1,this.cleanup=[]}var Le=new N(".",!1,!0,!0);function ce(e){return function(){return Le[e].apply(Le,arguments)}}N.prototype._fill=function(e,t,n,s){var i=e.shift();if(e.length>0){if(t[i]=t[i]||(this.useArray&&Ui(e[0])?[]:{}),!Ye(t[i]))if(this.override)t[i]={};else{if(!(Ye(n)&&ft(n)))throw new Error("Trying to redefine `"+i+"` which is a "+typeof t[i]);return}this._fill(e,t[i],n,s)}else{if(!this.override&&Ye(t[i])&&!ft(t[i])){if(!(Ye(n)&&ft(n)))throw new Error("Trying to redefine non-empty obj['"+i+"']");return}t[i]=Me(n,s)}};N.prototype.object=function(e,t){var n=this;return Object.keys(e).forEach(function(s){var i=t===void 0?null:t[s],o=Tt(s,n.separator).join(n.separator);o.indexOf(n.separator)!==-1?(n._fill(o.split(n.separator),e,e[s],i),delete e[s]):e[s]=Me(e[s],i)}),e};N.prototype.str=function(e,t,n,s){var i=Tt(e,this.separator).join(this.separator);return e.indexOf(this.separator)!==-1?this._fill(i.split(this.separator),n,t,s):n[e]=Me(t,s),n};N.prototype.pick=function(e,t,n,s){var i,o,r,a,l;for(o=Tt(e,this.separator),i=0;i<o.length;i++)if(a=Di(o[i],t),t&&typeof t=="object"&&a in t){if(i===o.length-1)return n?(r=t[a],s&&Array.isArray(t)?t.splice(a,1):delete t[a],Array.isArray(t)&&(l=o.slice(0,-1).join("."),this.cleanup.indexOf(l)===-1&&this.cleanup.push(l)),r):t[a];t=t[a]}else return;return n&&Array.isArray(t)&&(t=t.filter(function(f){return f!==void 0})),t};N.prototype.delete=function(e,t){return this.remove(e,t,!0)};N.prototype.remove=function(e,t,n){var s;if(this.cleanup=[],Array.isArray(e)){for(s=0;s<e.length;s++)this.pick(e[s],t,!0,n);return n||this._cleanup(t),t}else return this.pick(e,t,!0,n)};N.prototype._cleanup=function(e){var t,n,s,i;if(this.cleanup.length){for(n=0;n<this.cleanup.length;n++)s=this.cleanup[n].split("."),i=s.splice(0,-1).join("."),t=i?this.pick(i,e):e,t=t[s[0]].filter(function(o){return o!==void 0}),this.set(this.cleanup[n],t,e);this.cleanup=[]}};N.prototype.del=N.prototype.remove;N.prototype.move=function(e,t,n,s,i){return typeof s=="function"||Array.isArray(s)?this.set(t,Me(this.pick(e,n,!0),s),n,i):(i=s,this.set(t,this.pick(e,n,!0),n,i)),n};N.prototype.transfer=function(e,t,n,s,i,o){return typeof i=="function"||Array.isArray(i)?this.set(t,Me(this.pick(e,n,!0),i),s,o):(o=i,this.set(t,this.pick(e,n,!0),s,o)),s};N.prototype.copy=function(e,t,n,s,i,o){return typeof i=="function"||Array.isArray(i)?this.set(t,Me(JSON.parse(JSON.stringify(this.pick(e,n,!1))),i),s,o):(o=i,this.set(t,this.pick(e,n,!1),s,o)),s};N.prototype.set=function(e,t,n,s){var i,o,r,a;if(typeof t>"u")return n;for(r=Tt(e,this.separator),i=0;i<r.length;i++){if(a=r[i],i===r.length-1)if(s&&dt(t)&&dt(n[a]))for(o in t)mn.call(t,o)&&(n[a][o]=t[o]);else if(s&&Array.isArray(n[a])&&Array.isArray(t))for(var l=0;l<t.length;l++)n[r[i]].push(t[l]);else n[a]=t;else(!mn.call(n,a)||!dt(n[a])&&!Array.isArray(n[a]))&&(/^\d+$/.test(r[i+1])?n[a]=[]:n[a]={});n=n[a]}return n};N.prototype.transform=function(e,t,n){return t=t||{},n=n||{},Object.keys(e).forEach((function(s){this.set(e[s],this.pick(s,t),n)}).bind(this)),n};N.prototype.dot=function(e,t,n){t=t||{},n=n||[];var s=Array.isArray(e);return Object.keys(e).forEach((function(i){var o=s&&this.useBrackets?"["+i+"]":i;if(Ye(e[i])&&(dt(e[i])&&!ft(e[i])||Array.isArray(e[i])&&!this.keepArray&&e[i].length!==0))if(s&&this.useBrackets){var r=n[n.length-1]||"";return this.dot(e[i],t,n.slice(0,-1).concat(r+o))}else return this.dot(e[i],t,n.concat(o));else s&&this.useBrackets?t[n.join(this.separator).concat("["+i+"]")]=e[i]:t[n.concat(o).join(this.separator)]=e[i]}).bind(this)),t};N.pick=ce("pick");N.move=ce("move");N.transfer=ce("transfer");N.transform=ce("transform");N.copy=ce("copy");N.object=ce("object");N.str=ce("str");N.set=ce("set");N.delete=ce("delete");N.del=N.remove=ce("remove");N.dot=ce("dot");["override","overwrite"].forEach(function(e){Object.defineProperty(N,e,{get:function(){return Le.override},set:function(t){Le.override=!!t}})});["useArray","keepArray","useBrackets"].forEach(function(e){Object.defineProperty(N,e,{get:function(){return Le[e]},set:function(t){Le[e]=t}})});N._process=Me;var Ri=N;const Ae=Ni(Ri),Bi=[["ds6w:resourceUid","uid"],["firstName","first_name"],["lastName","last_name"],["ut_state","user_state"]];function on(e={}){const t=e;return Bi.forEach(([n,s])=>{Ae.move(n,s,e)}),t.displayName||(t.displayName=e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.fullName||e.login||e.username||""),t}var S=(e=>(e.Post="post",e.Idea="idea",e.Question="iquestion",e.Media="media",e.Conference="conference",e.Survey="survey",e.Wedo="wedo",e.Wiki="wiki",e.WikiTree="wikitree",e.DerivedPost="derivedpost",e.DerivedIdea="derivedidea",e.Rituals="conferencetemplate",e.Streaming="meetingstreaming",e))(S||{}),Vi=(e=>(e.POST="Post",e.MEDIA="RichMedia",e.QUESTION="Question",e.WIKI="WikitreePage",e.IDEA="Idea",e.COMMUNITY="Community",e))(Vi||{}),pt=(e=>(e.Answered="Answered",e.Validated="Validated",e.NotAnswered="Unanswered",e))(pt||{}),de=(e=>(e.Published="Created",e.Commented="Commented",e.Answered="Answered",e.Revised="Updated",e.Edited="Edited",e.Ended="Ended",e.Started="Started",e.StatusChanged="Status Changed",e.Validated="Answer Validated",e))(de||{});function Fi(e,t={}){const n={communitypost:S.Post,media:S.Media,qnaquestion:S.Question,qnaanswer:S.Question,idea:S.Idea,wikitree:S.Wiki,wedo:S.Wedo,dsxplan:S.Wedo,uuid:S.Wedo,conference:S.Conference,survey:S.Survey},[s]=e.split(":").splice(-2,1);return n[s]}function qi(e,t={}){return{post:S.Post,media:S.Media,question:S.Question,iquestion:S.Question,ideation:S.Idea,idea:S.Idea}[e]}const Wi=[["_community.id","community_id"],["_community.subject6wuri","community_subject_uri"],["_community.uri","community_subject_uri"],["container_uri","community_subject_uri"],["_community.community_type","community_type"],["_community.title","community_title"],["preview_original_width","preview.width"],["preview_original_height","preview.height"],["preview_media_processing_version","preview.processing_version"],["preview_media_processing_status","preview.status"],["preview_media_type","preview.type"],["media_type","preview.type"],["preview_media_file_ext","preview.media_file_ext"],["preview_fingerprint","preview.preview_fingerprint"],["thumbnail_subject6wuri","thumbnail_id"],["thumbnail_id","preview.subject_uri"],["status.id","status_id"],["status.color","status_color"],["status.title","status_title"]],zi=[["model_id","id"],["subject6wuri","subject_uri"],["publish_date","published_at"],["pubdate","published_at"],["creation_date","created_at"],["crdate","created_at"],["update","updated_at"],["modification_date","updated_at"],["moderation_date","moderated_at"],["body","description"],["question","description"],["message","description"],["container","_community"],["thumbnailsInfos","thumbnails_infos"],["views","stats_viewed"]],Hi=[["preview_original_width","width"],["preview_original_height","height"],["preview_media_processing_version","processing_version"],["preview_media_processing_status","status"]],Gi=[["media_type","type"]];function pe(e){return e&&!e.includes("T")&&!e.endsWith("Z")&&!e.startsWith("0000")?new Date(`${e.split(" ").join("T")}Z`).toISOString():e&&e.startsWith("0000")?"":e??""}function rn(e){return{...e,result:Yi(e.result)}}function Yi(e){var n;const t={...e};return zi.forEach(([s,i])=>{Ae.move(s,i,t)}),Wi.forEach(([s,i])=>{Ae.copy(s,i,t,t)}),t.created_at=pe(t.created_at),t.updated_at=pe(t.updated_at),t.moderated_at=pe(t.moderated_at),t.published_at=pe(t.published_at),t.model=Fi(t.subject_uri,{derived_type:t.derived_type}),t.author&&(t.author=on(e.author)),t.published===void 0&&(t.published=!0),t.publication_state==="DRAFT"&&(t.published=!1),t.model===S.Media&&(Hi.forEach(([s,i])=>{Ae.move(s,i,t)}),Gi.forEach(([s,i])=>{Ae.copy(s,i,t,t)})),((n=e._community)==null?void 0:n.community_type)==="externaldm"&&(t.community_type="dm"),!t.community_subject_uri&&t.community_id&&(t.community_subject_uri=e.community_id),["visibility","published"].forEach(s=>{Object.prototype.hasOwnProperty.call(t,s)&&typeof t[s]=="string"&&(t[s]=Number.parseInt(t[s],10))}),["published"].forEach(s=>{Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=!!t[s])}),t}var fe=(e=>(e.Published="swym:eventAction.swym_event_action_publish",e.Commented="swym:eventAction.swym_event_action_comment",e.Answered="swym:eventAction.swym_event_action_answer",e.Revised="swym:eventAction.swym_event_action_edit_wiki",e.Edited="swym:eventAction.swym_event_action_edit",e.Ended="swym:eventAction.swym_event_action_survey_closed",e.Started="swym:eventAction.swym_event_action_survey_opened",e.StatusChanged="swym:eventAction.swym_event_action_change_status",e.Validated="swym:eventAction.swym_event_action_validate",e))(fe||{});function Qi(e){return{[fe.Published]:de.Published,[fe.Commented]:de.Commented,[fe.Answered]:de.Answered,[fe.Revised]:de.Revised,[fe.Edited]:de.Edited,[fe.Ended]:de.Ended,[fe.Started]:de.Started,[fe.StatusChanged]:de.StatusChanged,[fe.Validated]:de.Validated}[e]||e}function an(e){return e.hits.map(t=>Object.fromEntries(t.metas.map(n=>[n.name,n.value])))}const Ki=e=>an(e).map(s=>({id:s.id,subject_uri:s.ds6w_58_resourceUid||`${s.ds6w_58_containerUid}:${s.resourceid}`,created_at:pe(s.crdate),updated_at:pe(s.update)})),vn=e=>{const t=an(e),n=Ki(e),s={posts:S.Post,media:S.Media,iquestion:S.Question,"iquestion question":S.Question,idea:S.Idea};return t.map((o,r)=>{const a=s[(o.swym_source||"").toLowerCase()]||S.Post,l={...n[r],description:"",community_type:o.community_type,moderated_at:"",stats_viewed:0,moderation_status:o.moderation_status,title:o.title||o.ds6w_58_label,enhanced_summary:o.enhanced_summary,community_id:o.community_id,community_subject_uri:o.ds6w_58_containerUid,community_title:o.ds6w_58_community,conversation_title:o.ds6w_58_datasource,preview_fingerprint:o.preview_fingerprint,thumbnail_id:o.preview_media_id,preview_media_processing_version:Number.parseInt(o.preview_media_processing_version,10),preview_media_processing_status:o.preview_media_processing_status,preview_original_width:Number.parseInt(o.preview_original_width,10),preview_original_height:Number.parseInt(o.preview_original_height,10),preview_url:o.preview_url||"",model:a,published_at:pe(o.pubdate),author:{uid:"",first_name:o.user_firstname,last_name:o.user_lastname,displayName:`${o.user_firstname} ${o.user_lastname}`,login:o.username,user_state:o.ut_state},last_contributed_at:pe(o.ds6w_58_lastcontributed_date),last_contributed_event:Qi(o.ds6w_58_lastcontributed_event),last_contributed_author:{uid:"",displayName:`${o.ds6w_58_lastcontributed_user_firstname} ${o.ds6w_58_lastcontributed_user_lastname}`,last_name:o.ds6w_58_lastcontributed_user_lastname,first_name:o.ds6w_58_lastcontributed_user_firstname,login:o.ds6w_58_lastcontributed_user_login},published:o.swym_58_publicationState!=="Draft"};return a===S.Media?Object.assign(l,Xi(o)):a===S.Idea?Object.assign(l,Ji(o)):a===S.Question&&Object.assign(l,eo(o)),l})};function Ji(e){return{model:S.Idea,status_title:e.status_title,status_color:e.ideation_color}}function Xi(e){return{status:e.preview_media_processing_status,width:Number.parseInt(e.preview_original_width),height:Number.parseInt(e.preview_original_height),media_type:e.media_type,type:e.media_type,file_ext:e.preview_media_file_ext}}const Zi={answeredbutnotvalidated:pt.Answered,validated:pt.Validated,notanswered:pt.NotAnswered};function eo(e){return{maturity:Zi[e.question_type]}}const to=[["model_id","subject_uri"],["community_intranet_access","access"],["uri","subject_uri"],["subject6wuri","subject_uri"]];function no(e){if(to.forEach(([t,n])=>{Ae.move(t,n,e)}),typeof e.access=="string"){switch(e.access){case"Public":e.access=1;break;case"Private":e.access=0;break;case"Secret":e.access=4;break;default:e.access=Number.parseInt(e.access);break}["access","extranet_access","tenant_user_status","user_access","stats_min_acl","post_min_acl","media_min_acl","ideation_min_acl","qna_min_acl","wiki_min_acl","wedo_min_acl","survey_min_acl","conference_min_acl"].forEach(t=>{t in e&&(e[t]=Number.parseInt(e[t],10))})}return e.default_type_for_creation&&(e.default_type_for_creation=qi(e.default_type_for_creation.toLowerCase())),e}function Bt(e){return e.result=no(e.result),e}function so(){return se.get("/api/communities/lite").json()}function jn(e,t=!1){return be(`get-community-${e}-${t}`,()=>se.post("/api/community/get",{json:{params:{as_admin:!1,id:e,return_6wtags:t}}}).json().then(Bt).catch(n=>{throw n.data&&n.data.result&&(n.data=Bt(n.data)),n}),5e3)}function io(e={query:"#all",select_predicate:["title","id","resourceid"],favorites:"with",my_community:!1,page:0,limit:20}){return se.post("/api/exalead/search",{json:{params:{favorite_communities:e.favorites,hidden_communities:e.hidden,select_predicate:e.select_predicate,start:e.page*e.limit,query:e.query||"#all",myCommunitiesOnly:e.my_community,with_synthesis:!1,creation_granted_for:e.creation_granted_for,contentType:"community",nresults:e.limit,anyContentType:e.anyContentType||!1}}}).json().then(t=>an(t).map(n=>({...n,subject_uri:n.resourceid,description:n.community_description,owner:{first_name:n.user_firstname,last_name:n.user_lastname,login:n.username,user_state:n.ut_state}})))}function oo(e){return se.post("/api/v2/ideas",{json:{container_id:e.communitySubjectUri,derived_type_id:e.derivedTypeId,title:e.title,body:e.message,publication_state:e.published?"PUBLISHED":"DRAFT"}}).json().then(t=>rn(t)).then(t=>Qt(`idea-${t.result.subject_uri}`,t))}function ro(e){return se.post("/api/v2/posts",{json:{container_id:e.communitySubjectUri,derived_type_id:e.derivedTypeId,title:e.title,body:e.message,publication_state:e.published?"PUBLISHED":"DRAFT"}}).json().then(t=>rn(t)).then(t=>Qt(`post-${t.result.subject_uri}`,t))}function ao(e){return se.post("/api/IquestionsQuestions/add",{json:{params:{title:e.title,community_id:e.communitySubjectUri,question:e.message,published:e.published?1:0}}}).json().then(rn).then(t=>Qt(`question-${t.result.subject_uri}`,t))}async function lo(e){const t=e.communitySubjectUri;let n;switch(e.model){case S.Idea:n=await oo({communitySubjectUri:t,...e.data});break;case S.Question:n=await ao({communitySubjectUri:t,...e.data});break;case S.Post:default:n=await ro({communitySubjectUri:t,...e.data});break}return n}function Rn(e){return{community_type:"dm",is_hidden:e.isHidden,id:e==null?void 0:e.convId.toString(),subject_uri:e.subjectUri,updated_at:e.lastModificationDate,topic:e.title,users:e.members.map(t=>({login:t.login,first_name:t.firstName,last_name:t.lastName,uid:t.uuid,displayName:t.full_name||""}))}}function uo(e){var t;return{community_type:"dm",is_hidden:e.isHidden,id:((t=e.id)==null?void 0:t.toString())||"",subject_uri:e.subjectUri,updated_at:e.lastModificationDate,created_at:e==null?void 0:e.dateCreation,topic:e.title,users:e.members.map(n=>({login:n.login,first_name:n.firstName,last_name:n.lastName,uid:n.uuid,displayName:n.full_name||""}))}}function co(e){return{id:e.id.toString(),name:e.name,position:e.readOnly?e.readOnlyPosition:e.position,isFavorite:e.readOnly&&e.readOnlyPosition===1,isReadOnly:e.readOnly||!1,threads:e.conversations.map(t=>({threadId:t.convId.toString(),position:t.position}))}}function fo(){return async(e,t)=>{const s=`${await Ue(Z.PASSPORT)}/login?service=3DSIM`,{access_token:i}=await $e(s,{headers:{"X-Request-Id":""}}).json(),o=new URL(e.url);return o.searchParams.append("ticket",i),new Request(o,{...t,searchParams:{...t.searchParams,ticket:i}})}}const Be=$e.extend({credentials:"omit",hooks:{beforeRequest:[kn,Kt(Z.MESSAGING),fo()],afterResponse:[(...e)=>Jt(Be,$e)(...e)]}});async function po(e,t){return be(`all-user-conversations-${e}-${t}`,()=>Be.get("/conversation/userConversations",{searchParams:{tenant:t,login:e,all:!0}}).json().then(n=>n.userConversations.map(s=>Rn(s))),5e3)}async function ho(e,t){return be(`all-user-sections-${e}-${t}`,()=>Be.get("/conversation/userConversations",{searchParams:{tenant:t,login:e,all:!0,sections:!0}}).json().then(n=>n.sections.map(s=>co(s))),5e3)}async function mo(e,t){return be(`all-fav-conversations-${e}-${t}`,()=>Be.get("/conversation/userConversations",{searchParams:{tenant:t,login:e,favorite:!0}}).json().then(n=>n.userConversations),5e3)}async function vo(e,t,n){return be(`conversation-id-${n}-${t}`,()=>{const s=Bn(n);return Be.get("/conversation/userConversations",{searchParams:{tenant:t,login:e,convId:s}}).json().then(i=>Rn(i.userConversations[0]))},1e4)}async function yo(e,t){const n=await _o();return Be.post("/conversation/create",{searchParams:{ticket:n},json:{logins:e,tenant:t}}).json().then(s=>uo(s.conversation))}function Bn(e){var t;return typeof e=="string"&&((t=e.split(":"))==null?void 0:t.pop())||e}async function _o(){const t=`${await Ue(Z.PASSPORT)}/login?service=3DSIM`,{access_token:n}=await $e(t,{headers:{"X-Request-Id":""}}).json();return n}const go=[["subject6wuri","subject_uri"],["uri","subject_uri"]];function Vt(e){return{...e,result:wo(e.result)}}function wo(e){go.forEach(([n,s])=>{Ae.move(n,s,e)});const t=e;return t.users_login=(e.users||[]).map(on).map(n=>n.login),t}function bo(){return se.get("/api/directmessages/lite").json().then(e=>(e.result.forEach(t=>{t.users.forEach(n=>on(n))}),e))}function $o(e){return se.get(`/api/directmessages/${e}`,{searchParams:{as_admin:!1,id:e,return_6wtags:!1}}).json().then(Vt).then(t=>t.result)}function Co(e,t){return se.post("/api/directmessages",{json:{users:e}}).json().then(Vt).then(n=>n.result).catch(n=>{if(n.response.status===409)return Vt(n.data).result;throw new Error(n)})}const Vn=bt("conversation.rtc");async function Fn(e,t,n){return Vn.value?await vo(e,t,n):await $o(n)}async function To(e,t){return Vn.value?await yo(e,t):await Co(e)}const So=Ei(hi).smaller("sm"),qn={props:{color:{type:String,default:()=>"default"}}},xo=/^on[^a-z]/,ko=e=>xo.test(e),Ao=(e,t)=>{const n={};for(const s in e)ko(s)&&(n[t?s[2].toLowerCase()+s.slice(3):s]=e[s]);return n},ue=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},Eo={name:"vu-icon",mixins:[qn],data:()=>({getListenersFromAttrs:Ao}),props:{icon:{required:!0,type:String},withinText:{default:!0,type:Boolean}}};function Po(e,t,n,s,i,o){return v(),w("span",An({class:["vu-icon fonticon",[n.withinText?"fonticon-within-text":"",`fonticon-${n.icon}`,`${e.color}`]]},Os(e.getListenersFromAttrs(e.$attrs),!0)),null,16)}const je=ue(Eo,[["render",Po],["__scopeId","data-v-47557ee2"]]),ln=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},Io={props:{active:{type:Boolean,default:()=>!1}}},Oo={props:{disabled:{type:Boolean,default:()=>!1}}},Mo={props:{size:{type:String,default:()=>""}}},No={name:"vu-icon-btn",mixins:[Io,Oo,qn,Mo],components:{VuIcon:je},props:{icon:{required:!0,type:String},disableChevronResize:{default:!1,type:Boolean},noActive:{default:!1,type:Boolean},noHover:{default:!1,type:Boolean}}};function Do(e,t,n,s,i,o){const r=X("VuIcon");return v(),w("div",{class:V(["vu-icon-btn",[e.color,e.size,{active:e.active&&!n.noActive,"no-active":n.noActive,"no-hover":n.noHover,disabled:e.disabled}]]),onClickCapture:t[0]||(t[0]=a=>{this.disabled&&a.stopPropagation()})},[E(r,{icon:n.icon,color:e.color,class:V({"chevron-menu-icon":n.icon==="chevron-down"&&n.disableChevronResize,disabled:e.disabled})},null,8,["icon","color","class"])],34)}const Uo=ue(No,[["render",Do],["__scopeId","data-v-683db7dc"]]);function Lo(){return window?("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)):(void 0)()}const jo={name:"vu-lazy",props:{height:{type:[Number,String],default:()=>"10px"},options:{type:Object,default:()=>({})}},emits:["intersect"],data:()=>({observer:null,intersected:!1}),mounted(){"IntersectionObserver"in window?(this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&(this.intersected=!0,this.observer.disconnect(),this.$emit("intersect"))},this.options),this.observer.observe(this.$el)):(this.intersected=!0,this.$emit("intersect"))},beforeUnmount(){"IntersectionObserver"in window&&this.observer&&this.observer.disconnect(),delete this.observer}};function Ro(e,t,n,s,i,o){return v(),w("div",{style:tt(e.intersected?"":`min-height: ${n.height}${typeof n.height=="number"&&"px"||""}`)},[e.intersected?B(e.$slots,"default",{key:0}):B(e.$slots,"placeholder",{key:1})],4)}const Wn=ue(jo,[["render",Ro]]),zn=Symbol("vuDropdownMenuOverlay"),Bo=e=>{const t=typeof e;return t==="boolean"||t==="string"?!0:e.nodeType===Node.ELEMENT_NODE},Hn={name:"detachable",props:{attach:{default:()=>!1,validator:Bo},contentClass:{type:[String,Object],default:""},contentStyle:{type:[String,Object],default:()=>""}},data:()=>({hasDetached:!1,target:null}),inject:{vuDebug:{default:!0}},watch:{attach(){this.hasDetached=!1,this.initDetach()}},mounted(){this.initDetach()},methods:{initDetach(){if(this._isDestroyed||this.hasDetached||this.attach===""||this.attach===!0||this.attach==="attach")return;let e;if(this.attach?typeof this.attach=="string"?e=document.querySelector(this.attach):e=this.attach:e=document.body,!e){this.vuDebug&&console.warn(`Unable to locate target ${this.attach}`,this);return}this.vuDebug&&e.tagName.toLowerCase()!=="body"&&window.getComputedStyle(e).position!=="relative"&&console.warn(`target (${e.tagName.toLowerCase()}${e.id&&` #${e.id}`}${e.className&&` .${e.className}`}) element should have a relative position`),this.target=e,this.hasDetached=!0}}},un={props:{show:{type:[Boolean,Object],default:!1}},emits:["update:show"],data(){return{innerShow:!1}},watch:{show:{immediate:!0,handler(e){this.innerShow=!!e}},innerShow(e){!!e!==this.show&&this.$emit("update:show",e)}}};function Vo(e){return Gt()?(Yt(e),!0):!1}function Xe(e){return typeof e=="function"?e():d(e)}const Fo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const qo=Object.prototype.toString,Wo=e=>qo.call(e)==="[object Object]",Ft=()=>{};function zo(e,t){function n(...s){return new Promise((i,o)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(i).catch(o)})}return n}function Ho(e,t={}){let n,s,i=Ft;const o=a=>{clearTimeout(a),i(),i=Ft};return a=>{const l=Xe(e),f=Xe(t.maxWait);return n&&o(n),l<=0||f!==void 0&&f<=0?(s&&(o(s),s=null),Promise.resolve(a())):new Promise((c,u)=>{i=t.rejectOnCancel?u:c,f&&!s&&(s=setTimeout(()=>{n&&o(n),s=null,c(a())},f)),n=setTimeout(()=>{s&&o(s),s=null,c(a())},l)})}}function yn(e,t=200,n={}){return zo(Ho(t,n),e)}function Go(e){var t;const n=Xe(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Yo=Fo?window:void 0;function Qo(...e){let t,n,s,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,i]=e,t=Yo):[t,n,s,i]=e,!t)return Ft;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],r=()=>{o.forEach(c=>c()),o.length=0},a=(c,u,h,y)=>(c.addEventListener(u,h,y),()=>c.removeEventListener(u,h,y)),l=z(()=>[Go(t),Xe(i)],([c,u])=>{if(r(),!c)return;const h=Wo(u)?{...u}:u;o.push(...n.flatMap(y=>s.map(m=>a(c,y,m,h))))},{immediate:!0,flush:"post"}),f=()=>{l(),r()};return Vo(f),f}function Gn(e,t=!0){let n=t;return Xe(e).forEach(i=>{!i.text&&!i.label&&(!i.class||!i.class.includes("divider"))&&(n=!1),i.items&&(n=Gn(i.items,n))}),n}$();const Ko={name:"vu-dropdownmenu-items",components:{VuIcon:je},emits:["update:responsive","update:position","click-item","update:selected"],props:{target:{type:HTMLElement,required:!1},items:{type:Array,required:!0,validator:Gn},selected:{type:Array,required:!0},zIndex:{type:Number,default:1e3},responsive:{type:Boolean,default:!1},dividedResponsiveItems:{type:Boolean,default:!1},disableResponsive:{type:Boolean,default:!1}},data:()=>({stack:[],left:!1,uuid:Lo,root:!1,parent:{}}),computed:{classes(){return{"open-left":this.left,"responsive-menu":this.responsive}},_items(){return this.stack[this.stack.length-1]||this.items},_parent(){return(this.stack[this.stack.length-2]||this.items).find(e=>JSON.stringify(e.items)===JSON.stringify(this._items))}},async mounted(){var s;if(this.disableResponsive)return;await this.$nextTick();const e={root:this.target,threshold:1},t=((s=this.target)==null?void 0:s.getBoundingClientRect())||{right:window.right,left:0},n=new IntersectionObserver(async([i])=>{n.unobserve(this.$el);const o=i.target.getBoundingClientRect();t.right<o.right&&!this.left?(this.left=!0,await this.$nextTick(),n.observe(this.$el)):t.left>o.left&&this.left&&(this.$emit("update:responsive",!0),this.$emit("update:position"))},e);await this.$nextTick(),n.observe(this.$el)},methods:{toggleSelected(e){const t=this.selected.slice(0);return e.selected||this.selected.includes(e)?t.splice(this.selected.indexOf(e),1):t.push(e),t},onItemClick(e){!e.disabled&&(e.selectable||e.selected||this.selected.includes(e))&&this.$emit("update:selected",this.toggleSelected(e)),this.$emit("click-item",e)},onNextItemClick(e){this.responsive&&this.stack.push(e.items)},onBackItemClick(){this.stack.pop()}}},Jo={class:"dropdown-menu-wrap"},Xo={key:0,class:"item item-back"},Zo={class:"item-text"},er=["onClick"],tr={class:"item-text"},nr=["onClick"],sr={key:0,class:"item-text"};function ir(e,t,n,s,i,o){const r=X("VuIcon"),a=X("vu-dropdownmenu-items",!0);return v(),w("div",{class:V(["dropdown-menu dropdown-menu-root dropdown-root",o.classes]),style:tt([{zIndex:n.zIndex}]),ref:"self"},[A("ul",Jo,[n.responsive&&e.stack.length?(v(),w("li",Xo,[E(r,{icon:"left-open",class:"back-item",onClick:Ee(o.onBackItemClick,["stop"])},null,8,["onClick"]),A("span",Zo,L(o._parent.text),1)])):I("",!0),(v(!0),w(ae,null,Re(o._items,l=>(v(),w(ae,null,[!l.class||!l.class.includes("header")&&!l.class.includes("divider")?(v(),w("li",{key:l.text||l.label,class:V(["item",[{"item-submenu":l.items,selectable:!l.disabled&&l.selectable||l.selected||n.selected.includes(l),selected:l.selected||n.selected.includes(l),hidden:l.hidden,disabled:l.disabled,"hide-responsive-divider":!n.dividedResponsiveItems},l.class]]),onClick:Ee(f=>l.items&&n.responsive&&!n.dividedResponsiveItems?o.onNextItemClick(l):o.onItemClick(l),["stop"])},[B(e.$slots,"default",{item:l},()=>[l.fonticon?(v(),R(r,{key:0,icon:l.fonticon,withinText:!1},null,8,["icon"])):I("",!0),A("span",tr,L(l.text||l.label),1)],!0),l.items?(v(),w("div",{key:0,class:"next-icon",onClick:Ee(f=>o.onNextItemClick(l),["stop"])},[t[3]||(t[3]=A("span",{class:"divider"},null,-1)),E(r,{icon:"right-open"})],8,nr)):I("",!0),!n.responsive&&l.items?(v(),R(a,{key:1,target:n.target,items:l.items,selected:n.selected,"z-index":n.zIndex+1,onClickItem:o.onItemClick,"onUpdate:selected":t[0]||(t[0]=f=>e.$emit("update:selected",f)),"onUpdate:responsive":t[1]||(t[1]=f=>e.$emit("update:responsive",f)),"onUpdate:position":t[2]||(t[2]=()=>{var u;const{left:f,top:c}=(u=e.$refs.self)==null?void 0:u.getBoundingClientRect();e.$emit("update:position",{x:f,y:c})})},null,8,["target","items","selected","z-index","onClickItem"])):I("",!0)],10,er)):(v(),w("li",{key:l.text||l.label||e.uuid(),class:V(l.class)},[l.class!=="divider"?(v(),w("span",sr,L(l.text||l.label),1)):I("",!0)],2))],64))),256))])],6)}const Yn=ue(Ko,[["render",ir],["__scopeId","data-v-242e08d8"]]),Qn=["top","top-right","bottom-right","bottom","bottom-left","top-left"],Kn=({intersectionRatio:e,elementRect:t,targetRect:n})=>e<1&&(t.top<n.top||t.bottom>n.bottom),Jn=(e,t,n,s)=>{if(s.length===1){const i=s[0];return i.includes("top")?i.replace("top","bottom"):i.replace("bottom","top")}else s.length>1&&s.push(...Qn);return t},or=function(t,n){let s,i;return function(...r){const a=this,l=+new Date;s&&l<s+n?(clearTimeout(i),i=setTimeout(()=>{s=l,t.apply(a,r)},n)):(s=l,t.apply(a,r))}},Xn=(e,t,n,s={width:0,x:0,y:0},{scrollTop:i=0,scrollLeft:o=0}={},r=!1,a={left:2,right:2,top:0,bottom:0},l={x:0,y:0})=>{let f=t.y-s.y+i+(l.y||0),c=t.x-s.x+o+(l.x||0);isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),/-right/.test(e)?c+=t.width-n.width:/^(top|bottom)$/.test(e)&&(c+=t.width/2-n.width/2),/^bottom/.test(e)?f+=t.height:/^(left|right)(-top|-bottom)?$/.test(e)?(c-=n.width,/^(right|right-\w{3,6})$/.test(e)&&(c+=t.width+n.width),/(-top|-bottom)/.test(e)?/-bottom/.test(e)&&(f+=t.height-n.height):f+=t.height/2-n.height/2):f-=n.height;let u=0,h=0;const y=t.width/2;if(r){const m=a.left,p=s.width-n.width-a.right,_=Math.max(m,Math.min(c,p));u=c-_,c=_}return{left:c,top:f,shiftX:u,shiftY:h,offset:y}},rr={name:"vu-tooltip",mixins:[un],data:()=>({setPosition:Xn}),props:{type:{type:String,default:()=>"tooltip"},side:{type:String,default:()=>"top"},arrow:{type:Boolean,default:!0},text:{type:String,default:()=>""},animated:{type:Boolean,default:!0},contentClass:{type:String,required:!1,default:""},prerender:{type:Boolean,required:!1}}},ar=["innerHTML"];function lr(e,t,n,s,i,o){return v(),w("div",{ref:"content",class:V([`${n.side} ${n.type} ${n.type}-root`,{"without-arrow":!n.arrow},{prerender:n.prerender}])},[E(Dt,{name:n.animated?"fade":""},{default:D(()=>[e.show?(v(),w("div",{key:0,class:V([`${n.type}-wrapper`])},[B(e.$slots,"arrow",{side:n.side},()=>[n.arrow?(v(),w("div",{key:0,class:V(`${n.type}-arrow`)},null,2)):I("",!0)],!0),B(e.$slots,"title",{side:n.side},void 0,!0),A("div",{ref:"body",class:V(`${n.type}-body`)},[n.text?(v(),w("span",{key:0,innerHTML:n.text},null,8,ar)):B(e.$slots,"default",{key:1,side:n.side},void 0,!0)],2)],2)):I("",!0)]),_:3},8,["name"])],2)}const ur=ue(rr,[["render",lr],["__scopeId","data-v-0ffdf690"]]),cr=["top","top-right","right-bottom","right","right-top","bottom-right","bottom","bottom-left","left-top","left","left-bottom","top-left"],dr=(e,t,n,s)=>{const i=n.indexOf(e),o=n[(i+1)%n.length];return s.includes(o)?t:o},fr=({intersectionRatio:e})=>e<1,pr={name:"vu-popover",mixins:[un,Hn],expose:["updatePosition","toggle"],emits:["unpositionable"],components:{VuTooltip:ur},props:{type:{type:String,default:"popover"},side:{type:String,default:"bottom"},arrow:{type:Boolean,default:!1},shift:{type:Boolean,default:!1},offsets:{type:Object,default:void 0},animated:{type:Boolean,default:!0},overlay:{type:Boolean,default:!1},click:{type:Boolean,default:!0},hover:{type:Boolean,default:!1},hoverImmediate:{type:Boolean,default:!1},hoverDelay:{type:Number,default:500},title:{type:String,default:()=>""},persistent:{type:Boolean,default:!1},positions:{type:Array,required:!1,default:()=>cr},getNextPosition:{type:Function,required:!1,default:dr},checkPosition:{type:Function,required:!1,default:fr},syncWidth:{type:Boolean,default:!1},ignoreEscapeKey:{type:Boolean,default:!1},ignoreClickOutside:{type:Boolean,default:!1}},data:()=>({open:!1,width:0,resizeObs:null,debounce(){},useDebounceFn:yn,intersectionObs:null,setPositionBound:null,shifted:!1,positioned:!1,fadeTimeout:void 0,positionAttempts:[],scrollableAncestors:[],innerSide:"",keyboardListener(){}}),watch:{innerShow:{immediate:!0,async handler(e){e?(this.fadeTimeout&&(this.fadeTimeout=void 0),await new Promise(t=>setTimeout(t,10)),this.positioned=!1,this.open=!0,this.positionAttempts=[],await this.$nextTick(),this.setPositionBound(),this.intersectionObs.observe(this.$refs.tooltip.$el),this.resizeObs||(this.resizeObs=new ResizeObserver(async()=>{this.setPositionBound(!0)})),this.listenScrolls()):(this.$refs.tooltip&&(this.intersectionObs.unobserve(this.$refs.tooltip.$el),this.resizeObs.disconnect()),this.stopScrollListening(),this.animated?this.fadeTimeout=setTimeout(()=>{this.open=!1},500):this.open=!1)}},innerSide:{handler(){this.updatePosition()}},attach(){this.innerShow&&this.updatePosition()},open:{handler(e){this.target&&(e&&!this.ignoreEscapeKey?this.keyboardListener=Qo(this.target,"keydown",t=>{t.code==="Escape"&&(this.innerShow=!1)}):this.keyboardListener())}},hover:{immediate:!0,handler(){this.attachHover()}},hoverImmediate(){this.attachHover()},hoverDelay(){this.attachHover()}},created(){this.setPositionBound=or(this.setPosition.bind(this),1)},async mounted(){await this.$nextTick();let e=0;const t=5;for(;e<t&&this.$refs.activator===void 0&&this.$refs.tooltip===void 0;)e++,await this.$nextTick();const{target:n,positionAttempts:s}=this;this.intersectionObs=new IntersectionObserver(([{boundingClientRect:i,rootBounds:o,intersectionRatio:r,intersectionRect:a}])=>{if(this.$refs.tooltip&&this.intersectionObs.unobserve(this.$refs.tooltip.$el),this.checkPosition({intersectionRatio:r,elementRect:i,targetRect:o,intersectionRect:a,positionAttempts:s})){const l=this.getNextPosition(this.innerSide||this.side,this.side,this.positions,this.positionAttempts);if(this.positionAttempts.length>this.positions.length){this.$emit("unpositionable"),this.positioned=!0,this.positionAttempts=[];return}this.innerSide=l,this.positionAttempts.push(this.innerSide)}else this.positioned=!0,this.positionAttempts=[],this.resizeObs.observe(this.$refs.tooltip.$el),this.resizeObs.observe(this.target)},{root:n!==document.body?n:void 0})},beforeUnmount(){try{this.innerShow=!1,this.stopScrollListening(),this.intersectionObs.disconnect(),this.resizeObs.disconnect()}catch{}},methods:{listenScrolls(){const e=[];let t=this.$refs.activator.parentElement;for(;t&&(this.target.contains(t)||t===this.target);){const{overflow:n}=window.getComputedStyle(t),s=n.split(" ");["auto","scroll"].some(i=>s.includes(i))&&e.push(t),t=t.parentElement}this.scrollableAncestors=e,this.scrollableAncestors.forEach(n=>n.addEventListener("scroll",this.setPositionBound))},stopScrollListening(){this.scrollableAncestors.forEach(e=>e.removeEventListener("scroll",this.setPositionBound))},updatePosition(){var e;this.setPositionBound(),this.intersectionObs.observe((e=this.$refs.tooltip)==null?void 0:e.$el)},async setPosition(e){var a;e&&await this.$nextTick();let t=this.$refs.activator.getBoundingClientRect();const n=(a=this.$refs.tooltip)==null?void 0:a.$el;if(!n)return;let s=n.getBoundingClientRect();this.syncWidth&&s.width!==t.width&&(this.width=t.width,await this.$nextTick(),t=this.$refs.activator.getBoundingClientRect(),s=this.$refs.tooltip.$el.getBoundingClientRect());const i=this.target.getBoundingClientRect(),o=this.offsets&&this.offsets[this.innerSide||this.side]||{};this.positionAttempts.push(this.innerSide||this.side);const r=Xn(this.innerSide||this.side,t,s,i,this.target,this.shift,{left:0,right:0},o);this.shifted=r.shiftX,n.style.top=`${r.top}px`,n.style.left=`${r.left}px`,this.overlay&&(this.$refs.overlay.style.top=`${this.target===document.body?document.scrollingElement.scrollTop:this.target.scrollTop}px`)},onClickOutside(e,t=!1){if(this.ignoreClickOutside||!this.innerShow)return;const{target:n}=e;t&&e.preventDefault(),!(this.$refs.tooltip&&(n===this.$refs.tooltip.$el||this.$refs.tooltip.$el.contains(n)))&&(this.innerShow=!1)},onHover(e){this.debounce(e).then(t=>{this.openedByClick||(t==="mouseenter"?this.innerShow=!0:(this.innerShow=!1,this.openedByClick=!1))}).catch(()=>{})},attachHover(){this.hover&&!this.hoverImmediate?this.debounce=yn(({type:e})=>e,this.hoverDelay,{rejectOnCancel:!0}):this.debounce=function(){}},onClick(){this.toggle(),this.hover&&this.innerShow?this.openedByClick=!0:this.openedByClick=!1},toggle(e=void 0){e!==void 0?this.innerShow=e:this.innerShow=!this.innerShow}}};function hr(e,t,n,s,i,o){const r=X("VuTooltip"),a=Ce("click-outside");return v(),w(ae,null,[re((v(),w("span",An({ref:"activator",class:"vu-popover__activator"},e.$attrs,{onClick:t[0]||(t[0]=l=>n.click&&o.onClick(!0)),onContextmenu:t[1]||(t[1]=Ee(()=>{},["prevent","stop"])),onMouseenter:t[2]||(t[2]=l=>n.hover&&o.onHover(l)),onMouseleave:t[3]||(t[3]=l=>n.hover&&o.onHover(l))}),[B(e.$slots,"default",{},void 0,!0)],16)),[[a,{handler:o.onClickOutside,innerShow:e.innerShow}]]),e.open||n.persistent?re((v(),R(Ms,{key:0,to:e.target},[E(Dt,{name:n.animated?"fade":""},{default:D(()=>[e.innerShow&&n.overlay?(v(),w("div",{key:0,ref:"overlay",class:"mask popover-mask",onWheel:t[4]||(t[4]=Ee((...l)=>o.onClickOutside&&o.onClickOutside(...l),["prevent"])),onTouchstart:t[5]||(t[5]=l=>o.onClickOutside(l,!0))},null,544)):I("",!0)]),_:1},8,["name"]),E(Dt,{appear:"",name:n.animated?"fade":""},{default:D(()=>[re(E(r,{ref:"tooltip",arrow:n.arrow,prerender:!e.positioned,type:n.type,show:!0,side:e.innerSide||n.side,class:V(e.contentClass),style:tt([e.width?`width: ${e.width}px`:{},e.contentStyle]),"onUpdate:show":t[6]||(t[6]=l=>e.open=!1),onMouseenter:t[7]||(t[7]=l=>n.hover&&o.onHover(l)),onMouseleave:t[8]||(t[8]=l=>n.hover&&o.onHover(l))},{arrow:D(({side:l})=>[B(e.$slots,"arrow",{side:e.innerSide||l,shift:e.shifted},void 0,!0)]),title:D(({side:l})=>[B(e.$slots,"title",{side:e.innerSide||l},()=>[n.title?(v(),w(ae,{key:0},[Pe(L(n.title),1)],64)):I("",!0)],!0)]),default:D(()=>[B(e.$slots,"body",{},void 0,!0)]),_:3},8,["arrow","prerender","type","side","class","style"]),[[fn,e.innerShow||e.show]])]),_:3},8,["name"])],8,["to"])),[[fn,e.open]]):I("",!0)],64)}const Zn=ue(pr,[["render",hr],["__scopeId","data-v-bbd834b9"]]);function es(e,t=!0){let n=t;return e.forEach(s=>{!s.text&&!s.label&&(!s.class||!s.class.includes("divider"))&&(n=!1),s.items&&(n=es(s.items,n))}),n}const mr={components:{VuDropdownmenuItems:Yn,VuPopover:Zn},name:"vu-dropdownmenu",mixins:[un,Hn],emits:["close","click-item"],props:{value:{type:Array,default:()=>[]},items:{type:Array,required:!0,validator:es},dividedResponsiveItems:{type:Boolean,default:!1},position:{type:String,required:!1,default:"bottom-left"},arrow:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1},zIndex:{type:Number,default:()=>1e3},responsive:{type:Boolean,default:!1},shift:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},positions:{type:Array,required:!1,default:()=>Qn},getNextPosition:{type:Function,required:!1,default:Jn},checkPosition:{type:Function,required:!1,default:Kn},ignoreEscapeKey:{type:Boolean,default:!1},ignoreClickOutside:{type:Boolean,default:!1}},data:()=>({innerResponsive:!1}),computed:{isResponsive:{get(){return this.innerResponsive||this.responsive},set(e){this.innerResponsive=e}}},watch:{async items(){this.innerShow&&(await this.$nextTick(),this.$refs.popover.updatePosition())}},methods:{handleClick(e){e.handler&&e.handler(e),this.$emit("click-item",e),this.updateShow(!1)},updateShow(e){e?this.isResponsive=!1:this.closeOnClick&&(this.innerShow=!1,this.$emit("close"))}}},ts=Object.assign(mr,{setup(e){const t=Xt(zn,!1);return(n,s)=>(v(),R(Zn,{ref:"popover",show:n.innerShow,"onUpdate:show":[s[1]||(s[1]=i=>n.innerShow=i),n.updateShow],shift:e.shift||e.responsive,type:"dropdownmenu popover",attach:n.target,side:e.position,overlay:e.overlay||d(t),animated:!1,"check-position":d(Kn),"get-next-position":d(Jn),"ignore-click-outside":e.ignoreClickOutside,arrow:!1,ignoreEscapeKey:e.ignoreEscapeKey},{body:D(()=>[E(Yn,{responsive:n.isResponsive,"onUpdate:responsive":s[0]||(s[0]=i=>n.isResponsive=i),"divided-responsive-items":e.dividedResponsiveItems,target:n.target,items:e.items,selected:e.value,onClickItem:n.handleClick},null,8,["responsive","divided-responsive-items","target","items","selected","onClickItem"])]),default:D(()=>[B(n.$slots,"default",{active:n.innerShow})]),_:3},8,["show","shift","attach","side","overlay","check-position","get-next-position","ignore-click-outside","ignoreEscapeKey","onUpdate:show"]))}});function vr(e,t){try{return Vs.proxifyUrl(e,{proxy:"passport",...t})}catch(n){return le.error(e,n),e}}var ie=(e=>(e.TINY="tiny",e.SMALL="small",e.SMALLDIUM="smalldium",e.SMEDIUM="smedium",e.MEDIUM="medium",e.NORMAL="normal",e.BIG="big",e.BIGGER="bigger",e.BLARGE="blarge",e.LARGE="large",e))(ie||{});const yr={key:1,class:"user-picture"},_r=["src"];ie.MEDIUM;const gr=["onClick"],wr={class:"flex flex-col justify-center items-center w-full gap-1"},br={key:0,class:"text-xs text-grey-6 cursor-pointer leading-tight text-ellipsis max-w-full overflow-hidden text-center line-clamp-1"},$r=2,Cr=Q({__name:"m-icon-list",props:{icons:{},hideText:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},leftAlign:{type:Boolean}},setup(e){const t=e,n=Ie(t,"icons"),s=x(()=>t.compact||So.value),i=Number.MAX_SAFE_INTEGER,o=x(()=>s.value?38:64),{i18n:r}=qs("core"),a=$(n.value.find(p=>p.active));z(()=>t.icons,()=>{a.value=n.value.find(p=>p.active)});const l=ht("container"),{width:f}=Ii(l),c=x(()=>{if(n.value.length===1)return 1;const p=Math.min(n.value.length,Math.floor(f.value/o.value)),_=n.value.length-p;let b=p;return _&&(b=Math.max(0,p-1)),Math.min(i,b<$r?0:b)}),u=x(()=>a.value&&n.value.indexOf(a.value)>=c.value?n.value.slice(c.value?c.value-1:0).filter(_=>a.value!==_):n.value.slice(c.value)),h=x(()=>{const p=n.value.slice(0,c.value);return a.value&&!p.find(_=>{var b;return _.fonticon===((b=a.value)==null?void 0:b.fonticon)})&&(p.pop(),p.push(a.value)),p});function y(p){var _,b;((_=a.value)==null?void 0:_.fonticon)===p.fonticon?(p.active=!1,a.value=void 0):(p.active=!0,a.value=p),(b=p.handler)==null||b.call(p,p)}const m=x(()=>u.value.map(p=>({fonticon:`${p.fonticon} ${p.color}`,text:p.text,handler(){y(p)}})));return(p,_)=>{const b=Ce("tooltip");return v(),w("div",{ref:"container",class:V(["flex flex-row overflow-hidden grow items-center",{"justify-end":!p.leftAlign,"justify-start":p.leftAlign}])},[E(Ns,{name:"scale"},{default:D(()=>[(v(!0),w(ae,null,Re(h.value,C=>{var P;return v(),w("div",{key:C.fonticon,class:V(["!no-underline rounded-full icon-list-item cursor-pointer flex justify-center items-center text-lg",[C.className,{"w-[64px] h-[64px] max-w-[64px] max-h-[64px]":!s.value,"w-[38px] h-[38px] max-w-[38px] max-h-[38px]":s.value,selected:((P=a.value)==null?void 0:P.fonticon)===C.fonticon}]]),onClick:H=>y(C)},[A("div",wr,[re(E(je,{active:a.value?a.value.fonticon===C.fonticon:!1,color:`rounded-full p-2 transition-all duration-500
            ${a.value?a.value.fonticon!==C.fonticon?C.color:`text-white ${C.bgcolor}`:C.color}`,icon:`${C.fonticon} text-lg`},null,8,["active","color","icon"]),[[b,p.hideText?C.text:void 0]]),p.hideText?I("",!0):(v(),w("span",{key:0,class:V(["text-xs leading-tight text-ellipsis max-w-full overflow-hidden text-center line-clamp-1",`${a.value?a.value.fonticon!==C.fonticon?"text-grey-6":"text-grey-8":"text-grey-6"}`])},L(C.text),3))])],10,gr)}),128))]),_:1}),m.value.length?(v(),R(ts,{key:0,items:m.value,position:"bottom-right"},{default:D(()=>[A("div",{class:V(["flex flex-col justify-center items-center gap-1",{"w-[64px]":!s.value,"w-[38px]":s.value}])},[E(je,{color:"rounded-full p-2 fonticon-clickable",icon:"menu-dot text-lg"}),p.hideText?I("",!0):(v(),w("span",br,L(d(r).more),1))],2)]),_:1},8,["items"])):I("",!0)],2)}}}),Tr={class:"flex flex-col gap-2.5"},Sr={class:"flex flex-col grow gap-2"},xr=Q({__name:"container-tile-placeholder",props:{n:{type:Number,default:1}},setup(e){const t=crypto.randomUUID();function n(s,i){return Math.floor(Math.random()*(i-s+1)+s)}return(s,i)=>(v(),w("div",Tr,[(v(!0),w(ae,null,Re(e.n,o=>(v(),w("div",{id:"thread-tile-placeholder",key:`placeholder-tile-${d(t)}-${o}`,class:"flex items-center gap-2 px-1.5"},[i[1]||(i[1]=A("div",{class:"h-[38px] w-[50px] rounded","data-placeholder":""},null,-1)),A("div",Sr,[i[0]||(i[0]=A("div",{class:"h-2 grow","data-placeholder":""},null,-1)),A("div",{class:"h-2","data-placeholder":"",style:tt(`width: ${n(20,80)}%`)},null,4)])]))),128))]))}}),kr={class:"media-thumbnail-view-container h-full w-[50px]"},Ar={class:"info-section flex flex-col"},Er={key:0},Pr=["innerHTML"],Ir={key:0,ref:"actionMenu",class:"tile-action-menu"},Or={key:0,class:"fonticon fonticon-record"},Mr={key:1,class:"w-2"},Nr=Q({__name:"container-tile",props:{icon:{default:""},colorIcon:{default:""},name:{default:""},unread:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},dropdownOptions:{default:()=>[]},transparent:{type:Boolean,default:!1},optionsVisible:{type:Boolean,default:!1},backgroundColor:{type:Boolean,default:!1},displayTitleAsHtml:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=e,s=t,i=Xt(zn),o=ht("container"),[r,a]=Ti(!1);function l(){var u,h;(h=(u=o.value)==null?void 0:u.scrollIntoViewIfNeeded)==null||h.call(u,{behavior:"smooth"})}Rt(()=>n.selected,l);const f=ht("actionMenu");function c(u){var h;(h=f.value)!=null&&h.contains(u.target)||s("click")}return ye(()=>{n.selected&&l()}),(u,h)=>{const y=Ce("tooltip");return v(),w("div",{ref:"container",class:V(["thread-view rounded-md",[{"menu-is-open":d(r),selected:u.selected,"with-unread-content font-bold":u.unread,"bg-transparent":n.transparent,"border-solid border border-grey-4 bg-grey-1":!n.transparent,"options-visible":u.optionsVisible}]]),onClick:c},[A("div",kr,[E(Wn,{class:"h-full"},{default:D(()=>[B(u.$slots,"image",{},()=>[A("div",{class:V(["h-full flex items-center rounded justify-center",[{"bg-grey-4":n.backgroundColor}]])},[u.icon?(v(),R(je,{key:0,class:"text-2xl",color:n.colorIcon,icon:u.icon},null,8,["color","icon"])):I("",!0)],2)],!0)]),_:3})]),A("div",Ar,[B(u.$slots,"title",{},()=>[u.name?(v(),w("div",{key:0,class:V(["line-clamp-2 title",[{"font-bold":u.unread,"!line-clamp-1":!!u.$slots.description}]])},[u.displayTitleAsHtml?(v(),w("span",{key:1,innerHTML:u.name},null,8,Pr)):(v(),w("span",Er,L(d(_i)(u.name)),1))],2)):I("",!0)],!0),B(u.$slots,"description",{},void 0,!0)]),u.unread||u.dropdownOptions.length?(v(),w("div",Ir,[u.unread?(v(),w("span",Or)):I("",!0),!d(yi)()&&u.dropdownOptions.length>1?(v(),R(ts,{key:1,attach:d(i)?!1:".left-panel-container .vu-scroll-container__inner",items:u.dropdownOptions,position:"bottom-right",onClick:d(a),onClose:d(a)},{default:D(()=>h[1]||(h[1]=[A("span",{class:"fonticon fonticon-clickable fonticon-chevron-down chevron-menu-icon"},null,-1)])),_:1},8,["attach","items","onClick","onClose"])):u.dropdownOptions.length===1?re((v(),w("span",{key:2,class:V(`fonticon fonticon-clickable fonticon-${u.dropdownOptions[0].fonticon}`),onClick:h[0]||(h[0]=Ee(m=>u.dropdownOptions[0].handler&&u.dropdownOptions[0].handler(u.dropdownOptions[0]),["stop"]))},null,2)),[[y,u.dropdownOptions[0].text]]):I("",!0)],512)):(v(),w("span",Mr))],2)}}}),vt=ln(Nr,[["__scopeId","data-v-e0ad6f8b"]]),Dr={key:0,class:"count-badge"},Ur=Q({__name:"circle-counter",props:{count:{}},setup(e){const t=e;return(n,s)=>n.count?(v(),w("div",Dr,L(t.count<99?t.count:"+99"),1)):I("",!0)}}),Lr=ln(Ur,[["__scopeId","data-v-79ff29ce"]]),jr={class:"threads-section"},Rr={class:"flex"},Br={class:"flex gap-2 items-center"},Vr={key:0,class:"flex items-center justify-center w-[38px] h-[26px]"},Fr={key:1,id:"threads-section-body",class:"item-list-body grid"},qr={key:0,class:"threads-no-result"},Wr={class:"drop-zone-placeholder"},zr={key:1,class:"threads-no-result"},Hr={id:"no-result-message"},Gr=Q({__name:"left-panel-section",props:mt({threadSectionName:{},hideSectionHeader:{type:Boolean},threads:{},loading:{type:Boolean},searchedValue:{},canDnd:{type:Boolean},addYourThreadMessage:{default:""},emptyListMessage:{default:""},noResultMessage:{default:""},hasUnreadThread:{type:Boolean},isFilteredUnread:{type:Boolean},countUnreadThreadMessage:{default:0},nbPlaceholderWhileLoading:{default:3},enableExpandAndCollapse:{type:Boolean},isSelected:{type:Boolean}},{isExpanded:{default:!0},isExpandedModifiers:{}}),emits:mt(["addNewThread"],["update:isExpanded"]),setup(e,{emit:t}){const n=e,s=t,i=$t(e,"isExpanded");return(o,r)=>(v(),w("div",jr,[o.hideSectionHeader?I("",!0):B(o.$slots,"header",{key:0},()=>[A("div",{id:"threads-section-header",class:V(["flex justify-between h-[38px] gap-2 items-center",{selected:n.isSelected,"cursor-pointer":o.enableExpandAndCollapse}]),onClick:r[0]||(r[0]=a=>o.enableExpandAndCollapse?i.value=!i.value:null)},[A("div",Rr,[o.enableExpandAndCollapse?(v(),R(Uo,{key:0,class:"!text-3xs expanded-icon",icon:i.value?"expand-down":"expand-right"},null,8,["icon"])):I("",!0),A("div",Br,[A("h5",{id:"title",class:V(["text-lg sm:text-md text-grey-8 m-0 line-clamp-1 break-words text-ellipsis",{"pl-1.5":!o.enableExpandAndCollapse}])},L(n.threadSectionName),3),B(o.$slots,"postSectionTitle",{},void 0,!0)])]),n.hasUnreadThread||n.isFilteredUnread?(v(),w("div",Vr,[E(Lr,{count:o.countUnreadThreadMessage},null,8,["count"])])):I("",!0)],2)],!0),i.value?(v(),w("div",Fr,[n.loading?(v(),R(xr,{key:0,n:n.nbPlaceholderWhileLoading},null,8,["n"])):(v(!0),w(ae,{key:1},Re(n.threads,(a,l)=>(v(),R(Wn,{key:a.subject_uri,height:"50px",style:tt(a.position?{order:a.position}:{})},{default:D(()=>[B(o.$slots,"threadTile",{index:l,list:n.threads,thread:a},void 0,!0)]),_:2},1032,["style"]))),128)),B(o.$slots,"sectionDnd",{},void 0,!0)])):I("",!0),!n.threads.length&&!n.loading&&i.value?(v(),w(ae,{key:2},[n.searchedValue?(v(),w("div",qr,[r[2]||(r[2]=A("span",{class:"fonticon fonticon-search"},null,-1)),A("span",null,L(n.noResultMessage),1)])):B(o.$slots,"more",{key:1},()=>[n.canDnd?(v(),w("div",{key:0,class:"drop-zone-default !border-grey-4 !text-grey-6 cursor-pointer",onClick:r[1]||(r[1]=a=>s("addNewThread"))},[r[3]||(r[3]=A("span",{class:"fonticon fonticon-plus text-xl"},null,-1)),A("span",Wr,L(n.addYourThreadMessage),1)])):(v(),w("div",zr,[r[4]||(r[4]=A("span",{class:"fonticon fonticon-chat mr-1"},null,-1)),A("span",Hr,L(n.emptyListMessage),1)]))],!0)],64)):I("",!0)]))}}),ns=ln(Gr,[["__scopeId","data-v-960ccda6"]]),Yr={class:"thread-picker_view-container"},Qr={class:"tab-picker-tabs"},Kr={class:"tab tab-picker-tabs-navigation"},Jr=["onClick"],Xr=Q({__name:"tab-picker",props:mt({items:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=$t(e,"modelValue");return(n,s)=>(v(),w("div",Yr,[A("div",Qr,[A("nav",Kr,[(v(!0),w(ae,null,Re(n.items,i=>(v(),w("a",{key:i.label,class:V(["tab-item",{active:t.value===i}]),onClick:o=>t.value=i},[E(je,{icon:i.fonticon},null,8,["icon"]),Pe(" "+L(i.label),1)],10,Jr))),128))])])]))}}),Zr={class:"w-full"},ss=Q({__name:"destination-tile",props:{selectedThread:{},hideOption:{type:Boolean}},emits:["update:selected-thread"],setup(e,{emit:t}){const n=t;return(s,i)=>(v(),w("div",Zr,[E(d(vt),{class:"bg-grey-2 border-solid","dropdown-options":[{fonticon:"times",handler:()=>{n("update:selected-thread",{})}}],name:s.selectedThread.label,"options-visible":!s.hideOption,onClick:i[0]||(i[0]=o=>n("update:selected-thread",{}))},{image:D(()=>[B(s.$slots,"tileImage",{selectedThread:s.selectedThread})]),_:3},8,["dropdown-options","name","options-visible"])]))}});function Se(e,t="i18n!DS/SwymVuePublishForm/assets/nls/"){const n=$({}),s=new Promise(async o=>{try{const[r]=await nt([`${t}${e}`]);n.value=Object.assign(d(n),r)}catch{}o(n.value)});function i(o,r={}){if(!o)return"";let a=d(n)[o];return Object.entries(r).forEach(([l,f])=>{a=a==null?void 0:a.replace(`{${l}}`,f)}),a||o}return{i18n:n,$i18n:i,promise:s}}const ea={class:"thread-selector-wrapper grid grid-cols-1 grid-rows-[auto_minmax(0,1fr)] gap-1 w-full pt-[0.875rem]"},ta={class:"flew flex-cols gap-5"},na={class:"relative search-thread-container"},sa={key:0},ia={key:1,class:"no-thread-found"},oa=Q({__name:"threads-section",props:mt({sectionList:{},sourceType:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{$i18n:t}=Se("content-type-selector"),n=$t(e,"modelValue");return(s,i)=>{const o=X("vu-input"),r=X("vu-icon"),a=X("vu-scroller");return v(),w("div",ea,[A("div",ta,[A("div",na,[E(o,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=l=>n.value=l),class:"select-thread-input !pr-10",placeholder:s.sourceType==="Community"?d(t)("placeholderSearchCommunity"):d(t)("placeholderSearchConversation")},null,8,["modelValue","placeholder"]),E(r,{class:"absolute right-0 top-0 w-9 flex items-center justify-center text-large !text-grey-5",icon:"search"})])]),s.sectionList.length>0?(v(),w("div",sa,[E(a,{class:"thread-list-scroller pt-1"},{default:D(()=>[(v(!0),w(ae,null,Re(s.sectionList,l=>(v(),w("div",{key:l.id},[E(d(ns),{class:"visible-other-threads-container","empty-list-message":d(t)("EmptyList"),"has-unread-thread":!1,"is-filtered-unread":!1,"nb-placeholder-while-loading":3,"no-result-message":d(t)("NoResult"),"thread-section-name":l.isFavorite?d(t)("Favorites"):l.name,threads:l.threads},{threadTile:D(({thread:f})=>[B(s.$slots,"sectionThread",{item:l,thread:f},void 0,!0)]),_:2},1032,["empty-list-message","no-result-message","thread-section-name","threads"])]))),128))]),_:3})])):(v(),w("div",ia,[A("span",null,L(s.sourceType==="conversation"?d(t)("NoConversationFound"):d(t)("NoCommunityFound")),1)]))])}}}),is=ue(oa,[["__scopeId","data-v-50333166"]]);function ra(e){var t;return{id:e.uri,category:e.category,name:e.name,position:e.read_only?e.read_only_position:e.position,isFavorite:e.read_only&&e.read_only_position===0,isReadOnly:e.read_only||!1,threads:((t=e.items)==null?void 0:t.map(n=>({threadId:Bn(n.subject_uri),position:n.position})))||[]}}const qt=$e.extend({hooks:{beforeRequest:[Ds(Z.COMMENT),Kt(Z.COMMENT)],afterResponse:[(...e)=>En(Z.COMMENT,qt)(...e),(...e)=>Jt(qt,$e)(...e)]}});function _n(e){return qt.get(`/api/v2/sections/${e}`).json().then(t=>t.result.map(ra))}const ut=Ct(new Map);function os({type:e,threadMap:t}){const n=Ct(new Map);function s(){ut.clear(),n.clear()}async function i(){var a;let r;if(e.value==="community")r=await _n(e.value);else if(e.value==="externaldm"){const l=(a=(await tn()).result)==null?void 0:a.login;r=await ho(l,J())}else if(e.value==="dm")r=await _n("conversation");else return[];ut.set(e.value,new Map(r.map(l=>[l.id,l])))}const o=x(()=>{n.clear();const r=ut.get(e.value);return r?[...r.values()].map(a=>({...a,threads:a.threads.map(l=>{n.set(l.threadId,l);const f=t==null?void 0:t.value.get(l.threadId);if(f)return{...f,position:l.position}}).filter(l=>!!l)})).sort((a,l)=>a.position>l.position?1:l.position>a.position?-1:0):[]});return{sections:ut,sectionsList:o,sectionedThreads:n,fetchSections:i,resetData:s}}class F{static removeDotSegments(t){var n=[];function s(i){i==="/.."?n.pop():n.push(i)}return t.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^/]*/g,s),n.join("").replace(/^\//,t.charAt(0)==="/"?"/":"")}static buildUrl(t,n){var s=window.location&&window.location.protocol?window.location.protocol:"http:";if(t=String(t),n=String(n),!F.isAbsoluteUrl(t))throw new Error("First argument should be a absolute url.");t.substring(0,2)==="//"&&(t=s+t);var i,o,r=String(t).split("://"),a=r[0],l=r[1],f=l.split("/"),c=f[0],u="";if(n.substring(0,2)==="//")t=a+":"+n;else if(n.split("://").length>1)t=n;else if(n.substring(0,1)==="/")t=a+"://"+c+n;else{for(i=1,o=f.length-1;i<o;i++)u+="/"+f[i];t=a+"://"+c+F.removeDotSegments(u+"/"+n)}return t}static parseUrl(t){var n=["source","subprotocol","protocol","authority","user","password","domain","port","path","directoryPath","fileName","query","anchor"],s=new RegExp("^(?:(?:(?:([^#.:]+):)?([^#.:]+):)?//)?((?:([^:/]+)(?::([^/]*?))?@)?([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?"),i,o=s.exec(t),r={};for(i=0;i<n.length;i++)r[n[i]]=o[i]||"";return r.subprotocol&&(r.source=r.source.substr(r.subprotocol.length+1)),r.port||(r.port=r.protocol==="https"?"443":"80"),r.directoryPath&&r.directoryPath.length>0&&(r.directoryPath=r.directoryPath.replace(/\/?$/,"/")),r.domain=r.domain.toLocaleLowerCase(),r.protocol=r.protocol.toLocaleLowerCase(),r}static composeUrl(t){var n="";return t.protocol&&(n=t.protocol+"://",t.subprotocol&&(n=t.subprotocol+":"+n)),t.domain?(n+=t.domain,t.port&&(t.protocol!=="http"||parseInt(t.port,10)!==80)&&(t.protocol!=="https"||parseInt(t.port,10)!==443)&&(n+=":"+t.port)):t.authority&&(n+=t.authority),t.path&&(n+=t.path),t.query&&(n+="?"+t.query),t.anchor&&(n+="#"+t.anchor),n}static matchUrl(t,n){var s,i,o=!1,r=F.isAbsoluteUrl(t),a=F.isAbsoluteUrl(n);return!r&&!a?o=!0:(r?a||(n=F.buildUrl(t,n)):t=F.buildUrl(n,t),s=F.parseUrl(t),i=F.parseUrl(n),o=["domain","protocol","port"].every(function(l){return s[l]===i[l]||l==="protocol"&&(s[l]===""||i[l]==="")})),o}static isAbsoluteUrl(t){var n=/^((https?|ftp|file):)?\/\//;return n.test(t)}static toQueryString(t,n){var s,i,o,r;if(F.is(t,"string"))r=t;else if(F.is(t.toQueryString,"function"))r=t.toQueryString();else{r=[];for(s in t)t.hasOwnProperty(s)&&(i=t[s],n&&(s=n+"["+F.capitalize(s)+"]"),F.is(i)&&(F.is(i,"object")||F.is(i,"array")?o=F.toQueryString(i,s):F.is(i,"function")||(o=F.encodeUrl(s)+"="+F.encodeUrl(i))),o&&r.push(o),o=void 0);r=r.join("&")}return r}static is(t,n){return t&&n?typeof t===n:t?typeof t<"u":!1}static encodeUrl(t){return encodeURIComponent(t).replace(/\./g,"%2e")}static capitalize(t,n="-"){const s=t.split(n);for(let i=0;i<s.length;i++)s[i]=s[i][0].toUpperCase()+s[i].substr(1);return s.join(n)}}class ge{constructor(){}static get proxies(){const t=qe.getNativeAppRequireConfig();if(t&&t.proxies)return t.proxies;const n=window.UWA&&window.UWA.hosts||{},i=n.exposition+"/proxy/",o=n.proxies||{};return Object.assign(Object.assign({},o),{ajax:i+"ajax",resolve:i+"resolve",xml:i+"xml",spreadsheet:i+"spreadsheet",soap:i+"soap",feed:i+"feed",icon:i+"icon",richIcon:i+"richIcon",rss:i+"feed"})}static normalizeRequestHeaders(t){let n={};return t.headers.forEach((s,i)=>{n[i]=s}),n}static checkHasProxyPath(t){if(qe.isNativeApp()){const n=qe.getNativeAppRequireConfig();if(n&&n.proxies){for(const s in n.proxies)if(t.startsWith(n.proxies[s]))return!0}}return!1}static request(t,n,s){return Us(this,void 0,void 0,function*(){if(!t)throw new Error("Bad or missing url argument.");if(!qe.isNativeApp()||F.matchUrl(t,window.location))return s;n=n||{};var i,o=window.location,r="ajax",a=n;a.headers&&!a.normalizedHeaders&&(a.normalizedHeaders=ge.normalizeRequestHeaders(s)),a.proxy?t=ge.proxifyUrl(t,a):F.matchUrl(t,o)===!1&&ge.allowCrossOriginRequest===!1&&(t=ge.proxifyUrl(t,Object.assign(Object.assign({},a),{proxy:r})));const l=["GET","HEAD"].includes(s.method)?void 0:yield s.blob();return a.body=l,i=new Request(t,a),i})}static proxifyUrl(t,n){if(!t)throw new Error("Bad or missing url argument.");var s,i=[],o=n.proxy,r=F.toQueryString,a=ge.proxies;if(o&&a[o]){if(!qe.isNativeApp()||F.matchUrl(t,window.location)||(s=a[o],t.indexOf(s)===0))return t;if(t.startsWith("https://")&&t.indexOf(":443")>-1&&(t=t.replace(":443","")),n.body&&n.method&&n.method.toUpperCase()==="GET"&&(t+=(t.indexOf("?")>-1?"&":"?")+r(n.body),console.log("DEBUG test proxification handle get",t)),typeof n.proxy=="object"&&i.push(r(n.proxy)),n.normalizedHeaders?i.push(r(n.normalizedHeaders,"headers")):n.headers&&i.push(r(n.headers,"headers")),n.method&&i.push(r({method:n.method})),i.push(r({url:t})),t=s+"?"+i.join("&"),t.length>4096)throw console.log("Error proxify url too long",t),new Error("Proxified url is more than 4096 characters, that is the limit for most of the browsers.")}else throw new Error("Invalid proxy");return t}}ge.allowCrossOriginRequest=!1;function Qe(e,t){try{return ge.proxifyUrl(e,{proxy:"passport",...t})}catch(n){return console.error(e,n),e}}const aa=["src"],gn=Q({__name:"media-thumbnail",props:{id:{},model:{},size:{default:"s"},navigation:{type:Boolean,default:!1},fingerprint:{default:""}},setup(e){const t=e;function n(){const s=t.model;let i=`${Te()}/api/media/streammedia/model/${s}/model_id/${t.id}/type/thumb/key/${t.size}_thumb`;return t.fingerprint&&(i=`${i}/update/${t.fingerprint}`),Qe(i)}return(s,i)=>(v(),w("img",{class:"max-h-full max-w-full",src:n()},null,8,aa))}}),rs=1e3,la="last-conversation-section-id",ua="last-community-section-id",ca={key:0},da={key:1},fa=Q({__name:"community-selector",props:{selectedCommunity:{},selectedTenantId:{},hideThreadSelector:{type:Boolean}},emits:["update:selected-community"],setup(e,{emit:t}){const n=e,s=t,{$i18n:i}=Se("content-type-selector"),o=$(""),r=$(!1),a=$([]),l=$([]),f=Ct(new Map),c=$("community"),u=$(),h=x(()=>i("Communities")),y=x(()=>{const O=[...f.values()];return o.value.length?O.filter(M=>l.value.includes(M.subject_uri)).sort((M,W)=>M.title>W.title?1:-1):O.filter(M=>{var W;return M.is_hidden===!1||!((W=u.value)!=null&&W.has(M.subject_uri))}).sort((M,W)=>M.title>W.title?1:-1)}),m=x(()=>new Map(y.value.map(O=>[O.id,O]))),{sectionsList:p,sectionedThreads:_,fetchSections:b,resetData:C}=os({type:c,threadMap:m});z(()=>n.selectedTenantId,async()=>{f.clear(),C(),o.value="",b().then(q)},{immediate:!0});const P=x(()=>(y.value||[]).filter(O=>!_.get(O.id)&&!O.is_hidden)),H=x(()=>({name:h.value,position:p.value.length+1,id:ua,isExpanded:!0,threads:P.value,isReadOnly:!0}));z([p,H],()=>{a.value=[...p.value,H.value],a.value=a.value.filter(O=>O.threads.length>0)},{immediate:!0});async function q(){try{r.value=!0,(await so()).result.forEach(M=>{const W=f.get(M.subject_uri)||{};f.set(M.subject_uri,Object.assign(W,M))})}catch{}r.value=!1}return On(z(ei(o,rs),async O=>{if(O.length){const M=await io({favorites:"with",hidden:"with",query:O,my_community:!0,select_predicate:void 0,page:0,limit:100});l.value=M.map(W=>W.subject_uri)}},{immediate:!0})),(O,M)=>{const W=Ce("mask");return!O.selectedCommunity||!O.selectedCommunity.value?(v(),w("div",ca,[re((v(),R(is,{modelValue:d(o),"onUpdate:modelValue":M[0]||(M[0]=G=>oe(o)?o.value=G:null),"section-list":d(a),"source-type":"Community"},{sectionThread:D(({thread:G})=>[(v(),R(d(vt),{key:G.subject_uri,class:"border-t border-grey-4 !rounded-none community-tile",name:G.title,transparent:"",onClick:_e=>s("update:selected-community",{value:G.subject_uri,label:G.title})},{image:D(()=>[E(gn,{id:G.id,class:"rounded",model:"community"},null,8,["id"])]),_:2},1032,["name","onClick"]))]),_:1},8,["modelValue","section-list"])),[[W,d(r)]])])):(v(),w("div",da,[E(ss,{"hide-option":O.hideThreadSelector,"selected-thread":O.selectedCommunity,"onUpdate:selectedThread":M[1]||(M[1]=G=>s("update:selected-community",G))},{tileImage:D(({selectedThread:G})=>[E(gn,{id:G.id,class:"rounded",model:"community"},null,8,["id"])]),_:1},8,["hide-option","selected-thread"])]))}}}),pa=ue(fa,[["__scopeId","data-v-370f38c7"]]),ha={text:"Posts",singular:"Post",model:S.Post,fonticon:"newspaper",color:"text-color-post",bgcolor:"bg-color-post",bordercolor:"border-color-post",canDraft:!0,canExportAsPdf:!0,order:1,autosave:{creation:!0,edition:!0},backend:{is_enabled_token:"post_is_enabled",min_acl_token:"post_min_acl",default_type_for_creation:"Post"}},ma={text:"Media",singular:"Media",model:S.Media,fonticon:"picture",color:"text-color-media",bgcolor:"bg-color-media",bordercolor:"border-color-media",canDraft:!0,order:2,autosave:{},backend:{is_enabled_token:"media_is_enabled",min_acl_token:"media_min_acl",default_type_for_creation:"Media"}},va={text:"Ideas",singular:"Idea",model:S.Idea,fonticon:"lamp",color:"text-color-idea",bgcolor:"bg-color-idea",bordercolor:"border-color-idea",canDraft:!0,canExportAsPdf:!0,order:3,autosave:{creation:!0,edition:!0},backend:{is_enabled_token:"ideation_is_enabled",min_acl_token:"ideation_min_acl",default_type_for_creation:"Idea"}},ya={text:"Questions",singular:"Question",model:S.Question,fonticon:"comment-question",color:"text-color-question",bgcolor:"bg-color-question",bordercolor:"border-color-question",canDraft:!0,canExportAsPdf:!0,order:4,autosave:{creation:!0,edition:!0},backend:{is_enabled_token:"qna_is_enabled",min_acl_token:"qna_min_acl",default_type_for_creation:"Question"}},_a={POST:ha,MEDIA:ma,IDEA:va,QUESTION:ya};function cn(){const{$i18n:e}=Se("content-types"),t=Object.fromEntries(Object.values(_a).map(s=>[s.singular.toUpperCase(),x(()=>({...s,text:e(s.text),singular:e(s.singular),create:e(`create${s.singular}`)}))])),n=s=>Object.values(t).find(i=>i.value.model===s);return{POST:t.POST,MEDIA:t.MEDIA,IDEA:t.IDEA,QUESTION:t.QUESTION,getContentType:n}}function ga(e){const t=cn(),n=x(()=>[t.POST.value,t.MEDIA.value,t.IDEA.value,t.QUESTION.value]);return{contents:x(()=>{const i=K(e);if(!i||!i.user_access)return[];const o=[...n.value];return(!i.qna_is_enabled||i.qna_min_acl>i.user_access)&&o.splice(o.indexOf(t.QUESTION.value),1),(!i.ideation_is_enabled||i.ideation_min_acl>i.user_access)&&o.splice(o.indexOf(t.IDEA.value),1),(!i.post_is_enabled||i.post_min_acl>i.user_access)&&o.splice(o.indexOf(t.POST.value),1),(!bt("community.creation.media").value||!i.media_is_enabled||i.media_min_acl>i.user_access)&&o.splice(o.indexOf(t.MEDIA.value),1),o.sort((r,a)=>r.order===a.order?0:r.order>a.order?1:-1)}),allAvailableContentTypes:n}}function wa(){const e=cn();return{contents:x(()=>[e.POST.value,e.MEDIA.value,e.IDEA.value])}}function ba(){const e=cn(),t=$(!0),n=x(()=>[e.POST.value,e.MEDIA.value]);return{contents:x(()=>{const i=[...n.value];return bt("conversation.creation.post").value||i.splice(i.indexOf(e.POST.value),1),i.sort((o,r)=>o.order===r.order?0:o.order>r.order?1:-1)}),isUserAtLeastAuthor:t,allAvailableContentTypes:n}}const $a={key:0},Ca={class:"pt-2 mb-0"},Ta={key:1,class:"flex community-access-error"},Sa=Q({__name:"content-type-selector",props:{threadId:{},contentType:{},createConvoFlag:{type:Boolean},isPersonalSpace:{type:Boolean},currentUser:{},platformId:{},isConversationSelected:{type:Boolean},availableContentTypes:{}},emits:["update:contentType","noType"],setup(e,{emit:t}){const n=e,s=t,i=$(),o=$(),r=$(!1),a=wa(),l=ba(),f=ga(i);ye(async()=>{r.value=!0,n.isConversationSelected&&!n.createConvoFlag?o.value=await Fn(n.currentUser,n.platformId,n.threadId):!n.isConversationSelected&&!n.isPersonalSpace&&(i.value=(await jn(n.threadId)).result),r.value=!1});const c=m=>n.contentType===m,{$i18n:u}=Se("content-types"),h=x(()=>{let m=[];return n.isPersonalSpace?m=a.contents.value:o.value||n.createConvoFlag?m=l.contents.value:m=f.contents.value,m.length?m.map(p=>p.singular.includes("_")&&p.text.includes("_")?{...p,singular:p.singular.split("_")[2],text:p.text.split("_")[2],className:"w-[3em] max-w-[3em]"}:p):[]}),y=x(()=>{let m=h.value;return n.availableContentTypes&&n.availableContentTypes.length>0&&(m=m.filter(p=>{var _;return(_=n.availableContentTypes)==null?void 0:_.includes(p.model)})),m.map(p=>({...p,active:c(p.model),handler:()=>s("update:contentType",p.model)}))});return z(y,()=>{var m;y.value.find(p=>p.model===n.contentType)||s("update:contentType",(m=y.value[0])==null?void 0:m.model)}),On(wt(()=>{var m,p;if(((m=y.value)==null?void 0:m.length)===1){const _=y.value[0];s("update:contentType",_.model)}((p=y.value)==null?void 0:p.length)>0?s("noType",!1):s("noType",!0)})),(m,p)=>{var C;const _=X("vu-message"),b=Ce("mask");return re((v(),w("div",{class:V(["content-type-selector-container",{"h-10":d(r)}])},[(C=d(y))!=null&&C.length&&!d(r)?(v(),w("div",$a,[A("h5",Ca,L(d(u)("Type")),1),E(d(Cr),{class:"content-type-selector-icons h-24 gap-2",icons:d(y),"left-align":""},null,8,["icons"])])):d(r)?I("",!0):(v(),w("div",Ta,[E(_,{class:"max-w-full",closable:!1,color:"error",icon:"true",show:""},{default:D(()=>[Pe(L(d(u)("CannotPublishError")),1)]),_:1})]))],2)),[[b,d(r)]])}}}),xa=ue(Sa,[["__scopeId","data-v-b8d8a220"]]),ka="380px",Aa="465px",Ea="640px",Pa="768px",Ia="1024px",Oa="1280px",Ma={"2xs":"300px",xs:ka,tiny:Aa,sm:Ea,md:Pa,"2md":"960px",lg:Ia,xl:Oa,"2xl":"1536px"},Na=(()=>{const e={};for(const[t,n]of Object.entries(Ma))e[t]=Number.parseInt(n,10);return Object.freeze(e)})(),Da=["src"],as=Q({__name:"media-user",props:{login:{default:void 0},hashKey:{default:void 0},hidePresence:{type:Boolean},mode:{default:""},fingerprint:{default:void 0}},setup(e){const t=e,n=Ie(t,"login"),s=Ie(t,"hashKey"),i=Te(),o={tiny:"tiny",medium:"medium",compact:"small",small:"smedium",big:"big","2xl":"bigger","3xl":"blarge","":"medium"},r={tiny:"tiny",medium:"medium",compact:"small",small:"smalldium",big:"big","2xl":"bigger","3xl":"blarge","":"medium"};function a(){let m="/api/user/getpicture/";return n.value?m+=`login/${n.value}`:s.value&&(m+=`hash_key/${s.value}`),t.fingerprint&&(m+=`/fingerprint/${t.fingerprint}`),Qe(`${i}${m}`)}const l=oi(Na).smaller("md"),f=x(()=>l.value?r:o),c=$(),u=Ke(),h=hn(c,async m=>{var p;if(t.hidePresence||!n.value)return h();try{const[_,b]=await nt(["DS/RTVueUserPresenceAPI/RTVueUserPresenceAPI","vuejs"]),C=b.extend(_);u.value=new C({propsData:{login:n.value,tenant:J(),swymUrl:i}}),u.value.$mount(),(p=m.parentElement)==null||p.replaceChild(u.value.$el,m),u.value.$el.classList.add(f.value[t.mode])}catch{}}),y=hn(n,m=>{u.value&&(u.value.login=m)});return _t(()=>{h(),y(),u.value&&u.value.$destroy()}),(m,p)=>(v(),w("img",{ref_key:"elRef",ref:c,class:"max-w-full max-h-full",src:a()},null,8,Da))}}),Ua=Q({__name:"user-picture",props:{hidePresence:{type:Boolean},mode:{},userFullName:{},disableRichUserTooltip:{type:Boolean},disableUserLinkNavigation:{type:Boolean},userHashKey:{},userLogin:{}},emits:["close"],setup(e,{emit:t}){const n=Xt("disableUserTooltipAndLinkNavigation",void 0);return(s,i)=>s.disableUserLinkNavigation||d(n)?(v(),R(as,{key:0,class:V(["user-picture w-full h-full rounded-full aspect-square",[s.mode]]),fingerprint:s.fingerprint,hash_key:s.userHashKey,"hide-presence":s.hidePresence,login:s.userLogin,mode:s.mode},null,8,["class","fingerprint","hash_key","hide-presence","login","mode"])):I("",!0)}}),Ge=ue(Ua,[["__scopeId","data-v-85f89fd8"]]),La={key:0,class:"grid grid-cols-2 grid-rows-2 overflow-hidden h-full w-full px-1.5"},ja={class:"flex justify-center items-center"},Ra={class:"h-2lg rounded-full self-center"},Ba={key:0},Va={key:1},Fa={class:"flex justify-center items-center"},qa={class:"h-2lg rounded-full self-center"},Wa={key:2,class:"flex justify-center items-center"},za={class:"h-2lg rounded-full self-center"},Ha={key:3,class:"flex justify-center items-center"},Ga={class:"h-2lg rounded-full self-center"},Ya={key:4,class:"flex justify-center items-center"},Qa={class:"h-2lg bg-grey-3 text-grey-7 rounded-full text-3xs overflow-hidden aspect-square flex items-center justify-center font-bold"},Ka={key:1,class:"flex h-full justify-center"},Ja={class:"w-8xl"},Ot=Q({__name:"thread-tile-conversation-thumbnail",props:{thread:{},hidePresence:{type:Boolean},currentUser:{}},setup(e){const t=e,n=x(()=>{if(t.thread.users.length===1)return t.thread.users;const s=t.thread.users.filter(i=>i.login!==t.currentUser);return s.length>4?s.slice(0,3):s.slice(0,4)});return(s,i)=>d(n).length>1?(v(),w("div",La,[A("div",ja,[A("div",Ra,[E(Ge,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"tiny","user-login":d(n)[0].login},null,8,["hide-presence","user-login"])])]),d(n).length===2?(v(),w("div",Ba)):I("",!0),d(n).length===2?(v(),w("div",Va)):I("",!0),A("div",Fa,[A("div",qa,[E(Ge,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"tiny","user-login":d(n)[1].login},null,8,["hide-presence","user-login"])])]),d(n)[2]?(v(),w("div",Wa,[A("div",za,[E(Ge,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"tiny","user-login":d(n)[2].login},null,8,["hide-presence","user-login"])])])):I("",!0),d(n)[3]?(v(),w("div",Ha,[A("div",Ga,[E(Ge,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"tiny","user-login":d(n)[3].login},null,8,["hide-presence","user-login"])])])):I("",!0),s.thread.users.length>5?(v(),w("div",Ya,[A("span",Qa," +"+L(s.thread.users.length-4),1)])):I("",!0)])):(v(),w("div",Ka,[A("div",Ja,[E(Ge,{"disable-rich-user-tooltip":"","disable-user-link-navigation":"","hide-presence":s.hidePresence,mode:"medium","user-login":d(n)[0].login},null,8,["hide-presence","user-login"])])]))}}),ne=$e.extend({hooks:{beforeRequest:[kn,Kt(Z.SEARCH)],afterResponse:[(...e)=>En(Z.SEARCH,ne)(...e),(...e)=>Jt(ne,$e)(...e)]}}),Xa=10,Za=200;function el({fetch:e,merge:t,resolve:n,options:s}){let i=[],o;const r=async()=>{if(le.debug(`[decorator mutualizer] process batch request for ${i.length} request`,i),o&&clearTimeout(o),o=void 0,!i.length)return;const a=i.slice();i=[];const l=await e(t(a.map(f=>f[0])));a.forEach(f=>n([l,f]))};return s!=null&&s.sendBeforeUnload&&window.addEventListener("beforeunload",r),a=>new Promise((l,f)=>{s!=null&&s.sanitizer&&(le.debug("[decorator mutualizer] sanitize bucket",i),i=s==null?void 0:s.sanitizer(i,[a,l,f])),i.push([a,l,f]),i.length===((s==null?void 0:s.limit)??Xa)?r():o||(o=setTimeout(r,(s==null?void 0:s.throttle)??Za))})}function ls(e){const t=[];return e.results&&e.results.forEach(n=>{const s={convUri:"",type:"",label:""};n.attributes.forEach(i=>{switch(i.name){case"resourceid":s.convUri=i.value;break;case"ds6w:what/ds6w:type":case"ds6w:type":s.type=i.value;break;case"ds6w:label":s.label=i.value;break}}),t.push(s)}),t}var us=(e=>(e.DM="swym:DirectMessage",e.COMMUNITY="swym:Community",e.PERSONALSPACE="swym:PersonalSpace",e))(us||{});function Mt(e,t){const n=[];return e.results?(t?e.results.forEach(s=>{n.push(nl(s.attributes))}):e.results.forEach(s=>{n.push(tl(s.attributes))}),n):[]}function cs(e){const t=[];return e.results?(e.results.forEach(n=>{t.push(sl(n.attributes))}),t):[]}function tl(e){const t={resource_id:"",type_icon_url:"",full_name:"",login:"",contentType:"",source_id:"",format:"",id:""};return e.forEach(n=>{switch(n.name){case"resourceid":t.resource_id=n.value,t.login=Ze(n.value);break;case"type_icon_url":t.type_icon_url=n.value;break;case"ds6w:label":t.full_name=n.value,t.id=`@${n.value}`;break;case"ds6w:type":t.contentType=Ze(n.value);break;case"sourceid":t.source_id=n.value,t.format=n.format;break;case"ds6w:resourceUid":t.uid=n.value;break}}),t}function nl(e){const t={resource_id:"",type_icon_url:"",full_name:"",login:"",contentType:"",source_id:"",format:"",id:""};return e.forEach(n=>{switch(n.name){case"resourceid":t.resource_id=n.value,t.login=Ze(n.value);break;case"type_icon_url":t.type_icon_url=n.value;break;case"ds6w:label":t.full_name=n.value,t.id=t.contentType==="DirectMessage"?(t.resource_id||"").split(":")[4]:`@${n.value}`;break;case"ds6w:type":t.contentType=Ze(n.value);break;case"sourceid":t.source_id=n.value,t.format=n.format;break;case"ds6w:resourceUid":t.uid=n.value;break}}),t}function sl(e){const t={resource_id:"",type_icon_url:"",full_name:"",login:"",contentType:"",source_id:"",format:"",id:""};return e.forEach(n=>{switch(n.name){case"resourceid":t.resource_id=n.value;break;case"type_icon_url":t.type_icon_url=n.value;break;case"ds6w:label":t.full_name=n.value,t.id=t.contentType==="DirectMessage"?(t.resource_id||"").split(":")[4]:`@${n.value}`;break;case"ds6w:type":t.contentType=Ze(n.value);break;case"sourceid":t.source_id=n.value,t.format=n.format;break;case"login":t.login=n.value;break;case"ds6w:resourceUid":t.uid=n.value;break}}),t}function Ze(e){return e.split(":")[1]}function il(e){const t="swym:DirectMessage",n="userConversations";return[`([ds6w:type]:"${t}" AND `,(e||"").trim().split(" ").map(s=>`([ds6w:label]:(${s}) OR ${n}: (${s}))`).join(" AND "),")"].join("")}async function ol(e){const t=J(),n=["swym"];Zt()||n.push("3dmessaging");const s=await ne.post("/search",{json:{query:il(e==null?void 0:e.text),select_predicate:["ds6w:type","ds6w:label","resourceid"],tenant:t,nresults:100,order_field:"ds6w:modified",order_by:"desc",label:`conversation-search-${new Date().getTime()}`,with_synthesis:!1,source:n}}).json();return{data:ls(s)}}async function rl(e){const t=J(),n=["swym"],s=await be(`search-user-info-login-${e.text}-${e.userLogin}`,()=>ne.post("/search",{json:{nresults:10,query:'[ds6w:type]:("pno:Person")',source:n,specific_source_parameter:{swym:{additional_query:` AND personOrGroup:(${e.text})`,agoraMode:!0}},select_predicate:["ds6w:label","ds6w:type","login"],label:`SocialUserMention-${e.userLogin}-${new Date().getTime()}`,locale:"en",start:0,with_synthesis:!1,with_synthesis_attribute:!1,tenant:t}}).json(),2*60*1e3);return{total:s.infos.nhits,data:cs(s)}}const Uu={async getUserInfo(e){const t=J(),n=["swym"];e.usersGroup&&n.push("usersgroup");const s=await be(`search-user-info-${e.text}-${e.userLogin}`,()=>ne.post("/search",{json:{nresults:20,query:'[ds6w:type]:("foaf:Group" OR "pno:Person")',source:n,specific_source_parameter:{usersgroup:{additional_query:`AND [ds6w:label]:(${e.text.trim()}*)`},swym:{additional_query:` AND personOrGroup:(${e.text})`,agoraMode:!0}},select_predicate:["ds6w:label","ds6w:type"],label:`SocialUserMention-${e.userLogin}-${new Date().getTime()}`,locale:"en",start:0,with_synthesis:!1,with_synthesis_attribute:!1,tenant:t}}).json(),6e4);return{total:s.infos.nhits,data:Mt(s)}},getUserInfoWithLogin:el({fetch:rl,merge:e=>{const t=new Set(e.map(s=>s.text)),n=Array.from(t).map(s=>`"${s}"`).join(" OR ");return{...e.pop(),text:n}},resolve([e,[t,n]]){n(e)},options:{throttle:300,limit:10}}),async getUsersWithResourceId(e){const t=J(),n=["swym"];e.usersGroup&&n.push("usersgroup");const s=await ne.post("/search",{json:{nresults:20,query:'[ds6w:type]:("foaf:Group" OR "pno:Person")',source:n,order_by:"desc",order_field:"relevance",specific_source_parameter:{usersgroup:{additional_query:`AND ([ds6w:label]:(${e.text.trim()}*) OR [ds6w:label]:"${e.text.trim()}")`},swym:{additional_query:` AND personOrGroup:(${e.text})`,agoraMode:!0}},select_predicate:["ds6w:label","ds6w:type","ds6w:resourceUid"],label:`3DSwym-${e.userLogin}-${new Date().getTime()}`,locale:"en",start:0,with_synthesis:!1,with_synthesis_attribute:!1,tenant:t}}).json();return{total:s.infos.nhits,data:Mt(s)}},async getUsersAndConversations(e){const t=J(),n=await ne.post("/search",{json:{query:`([ds6w:type]:"swym:DirectMessage" AND (${e.text}) AND (NOT dm_type:private)) OR ((topicConversations:(${e.text})) AND (dm_type:private)) OR (personOrGroup:(${e.text}))`,select_predicate:["ds6w:type","ds6w:label","title","id","resourceid"],tenant:t,nresults:50,reset:!0,label:`3DSwym-${e.userLogin}-${new Date().getTime()}`,with_synthesis:!1,with_synthesis_attribute:!1,source:["swym"]}}).json();return{data:Mt(n,!0)}},async getConversations(e){const t=J(),n=await ne.post("/search",{json:{query:`([ds6w:type]:"swym:DirectMessage" AND (${e.text}))`,select_predicate:["ds6w:type","ds6w:label","resourceid"],tenant:t,nresults:30,order_by:"desc",label:`conversation-search-${new Date().getTime()}`,with_synthesis:!1,source:["swym","3dmessaging"]}}).json();return{data:ls(n)}},async getUsersAndConversationsWithLogin(e){const t=J(),n=await ne.post("/search",{json:{query:`([ds6w:type]:"swym:DirectMessage" AND (${e.text}) AND (NOT dm_type:private)) OR ((topicConversations:(${e.text})) AND (dm_type:private)) OR (personOrGroup:(${e.text}))`,select_predicate:["ds6w:type","ds6w:label","title","id","resourceid","login"],tenant:t,nresults:50,reset:!0,label:`3DSwym-${e.userLogin}-${new Date().getTime()}`,with_synthesis:!1,with_synthesis_attribute:!1,source:["swym"]}}).json();return{data:cs(n)}},async getMediaFromFedSearch(e){const t=J();return(await ne.post("/search",{json:{with_indexing_date:!0,with_synthesis:!0,with_nls:!1,label:"3DSearch-skd1",locale:"en",with_synthesis_hierarchical:!0,query:e,refine:{},order_by:"desc",order_field:"relevance",nresults:40,start:"0",source:["swym","3dspace","drive","dashboard"],tenant:t}}).json()).results},async getUserGroup(e){const t=J(),s=(await ne.post("/search",{json:{with_synthesis:!1,with_nls:!1,label:e,with_synthesis_hierarchical:!1,query:`[ds6w:type]:"foaf:Group" AND [ds6w:label]:"${e}"`,source:["usersgroup"],tenant:t}}).json()).results;return Array.isArray(s)?s.some(i=>i&&i.attributes&&i.attributes.some(o=>o.name==="ds6w:label"&&o.value===e)):!1},async isUserGroupMember(e,t){let n="";e.includes("iam")?n=`<http://iam.3ds.com/${e.split("iam:")[1]}>`:n=`<uuid:${e}>`;const s=J(),o=(await ne.post("/search",{json:{with_synthesis:!1,with_nls:!1,label:"3Dswym-usergroup-search-member",select_predicate:["foaf:member"],with_synthesis_hierarchical:!1,query:`[ds6w:type]:"foaf:Group" AND [ds6w:label]:"${t}"`,source:["usersgroup"],tenant:s}}).json()).results;return Array.isArray(o)?o.some(r=>r&&r.attributes&&r.attributes.some(a=>a.name==="foaf:member"&&a.value===n)):!1},async getContentsFromFedSearch(e,t,n=0){const s=J();return(await ne.post("/search",{json:{with_synthesis:!1,with_nls:!1,with_synthesis_hierarchical:!1,label:`3DSearch-${e}-${t}`,query:`((${t}) AND [ds6w:containerUid]: ("${e}"))`,order_by:"desc",order_field:"ds6w:created",nresults:50+n*50,start:0+n*50,source:["swym"],tenant:s}}).json()).results},async getContentByResource(e){const t=J();return be(`content-type-${e}`,()=>ne.post("/search",{json:{with_synthesis:!1,with_nls:!1,select_predicate:["ds6w:type"],with_synthesis_hierarchical:!1,label:`3DSearch-swym-container-type-${e}`,query:`[ds6w:resourceUid]: "${e}"`,order_by:"desc",order_field:"ds6w:created",source:["swym","3dmessaging"],tenant:t}}).json())}};function wn(e){return new Date(e.updated_at||0).getTime()}function al(e,t,n,s){const i=We(e),o=We(s),r=$([]),a=x(()=>{let p=i.value.slice();return K(n)?p=p.filter(_=>r.value.includes(_.subject_uri)).sort((_,b)=>{var O,M;const C=_.users.length<=2,P=b.users.length<=2;if(C<P)return 1;if(C>P)return-1;const H=((O=r.value)==null?void 0:O.indexOf(_.subject_uri))||0,q=((M=r.value)==null?void 0:M.indexOf(b.subject_uri))||0;return H<q?-1:H===q?0:1}):p=p.filter(_=>_.is_hidden===!1).sort((_,b)=>{const C=wn(_),P=wn(b);return C<P?1:C===P?0:-1}),p});z(We(n),async p=>{p.length>0?r.value=(await ol({text:p,userLogin:o.value})).data.filter(_=>_.type===us.DM).map(_=>_.convUri):r.value=[]},{immediate:!0});const l=We(t),f=x(()=>a.value.filter(p=>l.value.find(_=>p.subject_uri===_.subjectUri))),c=x(()=>f.value.length===0?a.value:a.value.filter(p=>{var _;return!((_=l.value)!=null&&_.find(b=>p.subject_uri===b.subjectUri))}));function u(){const p=a.value.filter(b=>{var C;return((C=b.users)==null?void 0:C.length)===2}),_=new Set;for(const b of p)_.add(b.users[0].login),_.add(b.users[1].login);return _.add(o.value),[..._]}const h=$([]);function y(p){const _=u();return p.filter(b=>!_.includes(b.login))}async function m(p){try{if(p.length>2){const{result:_}=await Fs({query:p,limit:30,page:0}),b=y(_);h.value=b.map(C=>({...C,subject_uri:C.uid||C.hash_key||C.login}))}else h.value=[]}catch(_){le.error(_)}}return z(We(n),m),{suggestedUsersOnSearch:h,conversationsListFilteredAndSorted:a,favoriteConversationsFilteredAndSorted:f,notfavoriteConversationsFilteredAndSorted:c}}const Wt=1e4,ll=2**31-1,bn=ll,ul={key:0},cl={key:1},dl={key:0},fl={key:1},pl={class:"fixed ml-20 top-0 !z-[5000] flex flex-col w-[calc(100%-10px)]"},hl={class:"absolute"},ml=Q({__name:"conversation-selector",props:{disabled:{type:Boolean},selectedConversation:{},platformId:{},hideThreadSelector:{type:Boolean}},emits:["update:selected-conversation"],setup(e,{emit:t}){const n=e,s=t,{$i18n:i}=Se("content-type-selector"),o=$(""),r=ni(o,rs,!0),a=$(""),l=$([]),f=$([]),c=$(!1),u=bt("conversation.rtc"),h=$([]);async function y(){var k;c.value=!0,a.value=(k=(await tn()).result)==null?void 0:k.login;try{u.value?(l.value=await po(a.value,n.platformId),f.value=await mo(a.value,n.platformId)):l.value=await(await bo()).result}catch(ee){le.log(ee)}c.value=!1}const{conversationsListFilteredAndSorted:m,suggestedUsersOnSearch:p}=al(l,f,r,a),_=x(()=>new Map(m.value.map(k=>[k.id.toString(),k]))),b=x(()=>u.value?"externaldm":"dm"),{sectionsList:C,sectionedThreads:P,fetchSections:H,resetData:q}=os({type:b,threadMap:_});ye(()=>{y()}),z(()=>n.platformId,async()=>{l.value=[],o.value="",q(),Promise.all([H(),y()])},{immediate:!0});const O=x(()=>(m.value||[]).filter(k=>!P.get(k.id.toString()))),M=x(()=>i("MyConversations")),W=x(()=>({name:M.value,position:C.value.length+1,id:la,threads:O.value,isReadOnly:!0}));z([C,W],()=>{h.value=[...C.value,W.value],h.value=h.value.filter(k=>k.threads.length>0)},{immediate:!0});async function G(k){n.disabled||s("update:selected-conversation",k)}function _e(k){return k!=null&&k.topic?k.topic:(((k==null?void 0:k.users.length)===1?k==null?void 0:k.users:k==null?void 0:k.users.filter(me=>me.login!==a.value))||[]).map(me=>`${me.first_name} ${me.last_name}`).join(", ")}const he=$({show:void 0,color:"error",timeout:Wt});return(k,ee)=>{const me=X("vu-message"),it=Ce("mask");return v(),w(ae,null,[!k.selectedConversation||!k.selectedConversation.value?(v(),w("div",ul,[re((v(),R(is,{modelValue:d(o),"onUpdate:modelValue":ee[0]||(ee[0]=j=>oe(o)?o.value=j:null),"section-list":d(h),"selected-thread":k.selectedConversation,"source-type":"conversation"},{sectionThread:D(({thread:j})=>[E(d(vt),{class:"border-t border-grey-4 !rounded-none fav-conversation-tile",name:_e(j),transparent:"",onClick:St=>G({value:j.subject_uri,label:_e(j),conversation:j})},{image:D(()=>[E(Ot,{"current-user":d(a),thread:j},null,8,["current-user","thread"])]),_:2},1032,["name","onClick"])]),_:1},8,["modelValue","section-list","selected-thread"])),[[it,d(c)]]),d(o)&&d(p).length?(v(),R(d(ns),{key:0,class:"suggested-threads-container","thread-section-name":d(i)("SuggestedConversations"),threads:d(p)},{threadTile:D(({thread:j})=>[E(d(vt),{class:"border-t border-grey-4 !rounded-none",name:`${j.first_name} ${j.last_name}`,transparent:"",onClick:St=>G({value:j.login,label:`${j.first_name} ${j.last_name}`,login:j.login})},{image:D(()=>[E(Ot,{"current-user":d(a),thread:{users:[j]}},null,8,["current-user","thread"])]),_:2},1032,["name","onClick"])]),_:1},8,["thread-section-name","threads"])):I("",!0)])):(v(),w("div",cl,[E(ss,{"selected-thread":k.selectedConversation,"hide-option":k.hideThreadSelector,"onUpdate:selectedThread":G},{tileImage:D(({selectedThread:j})=>[j.login?(v(),w("div",dl,[E(as,{login:j.login},null,8,["login"])])):I("",!0),j.conversation?(v(),w("div",fl,[E(Ot,{"current-user":d(a),"hide-presence":"",thread:j.conversation},null,8,["current-user","thread"])])):I("",!0)]),_:1},8,["selected-thread","hide-option"])])),A("div",pl,[A("div",hl,[E(me,{show:d(he).show,"onUpdate:show":ee[1]||(ee[1]=j=>d(he).show=j),class:"custom-message",color:d(he).color,icon:"true",timeout:d(he).timeout},{default:D(()=>[Pe(L(d(i)("ConversationSearchIssue")),1)]),_:1},8,["show","color","timeout"])])])],64)}}}),vl=ue(ml,[["__scopeId","data-v-858be260"]]),yl={key:0,class:"platform-selector"},_l={class:"text-grey-7"},gl=Q({__name:"m-platform-selector",props:{platforms:{},platformId:{}},emits:["update:selected-platformId","onTenantChangeFailure"],setup(e,{emit:t}){const n=e,s=t,{$i18n:i}=Se("publish-form"),o=$([]),r=$(""),a=$(n.platformId),l=$([]);async function f(){if(n.platforms)n.platforms.forEach(h=>{if(!h.id||!h.label||!h.url)throw new Error("Each platform must contain the properties id, label and url");return n.platforms});else try{const h=await Ut(Z.SWYM,{platformId:n.platformId,public:!0});l.value.push({value:h.platformId,label:h.displayName})}catch(h){le.log(h)}finally{Ut(Z.SWYM,{public:!0}).then(h=>h.map(y=>({value:y.platformId,label:y.displayName}))).then(h=>{h.forEach(y=>{y.value!==n.platformId&&l.value.push(y)})})}}ye(async()=>{var h;await u(n.platformId||J(),!0),(h=o.value)==null||h.push(Te()),await f()});async function c(h,y){var p;Lt(h),a.value=h;const m=await Ue(Z.SWYM,h);r.value=m,jt(m),(p=o.value)==null||p.push(m),y||s("update:selected-platformId",h)}async function u(h,y=!1){var m;try{await c(h,y)}catch(p){le.error(p);const _=(m=o.value)==null?void 0:m.pop();s("onTenantChangeFailure",{old:r.value,new:_})}}return(h,y)=>{const m=X("vu-select");return l.value&&l.value.length>1?(v(),w("div",yl,[A("label",_l,L(d(i)("Platform")),1),E(m,{modelValue:a.value,"onUpdate:modelValue":[y[0]||(y[0]=p=>a.value=p),u],options:l.value,placeholder:d(i)("SelectPlatform")},null,8,["modelValue","options","placeholder"])])):I("",!0)}}});var U=(e=>(e.Community="Community",e.Conversation="Conversation",e.PersonalSpace="Personal Space",e))(U||{});const wl=Q({__name:"thread-picker",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const{$i18n:t}=Se("publish-form"),n=Ct([{label:x(()=>t("Communities")),value:U.Community,fonticon:"users-alt"},{label:x(()=>t("Conversation")),value:U.Conversation,fonticon:"chat"},{label:x(()=>t("PersonalSpace")),value:U.PersonalSpace,fonticon:"user-feather"}]),s=$t(e,"modelValue"),i=x({get(){return n.find(o=>o.value===s.value)},set(o){s.value=o.value}});return(o,r)=>(v(),R(d(Xr),{modelValue:d(i),"onUpdate:modelValue":r[0]||(r[0]=a=>oe(i)?i.value=a:null),items:d(n)},null,8,["modelValue","items"]))}});function bl(e){let t=e;Zt()&&(t.includes("resources/AppsMngtRegistry")?t=e:t=`${e}/resources/AppsMngtRegistry`.replace(/([^:]\/)\/+/g,"$1")),Ls(t)}async function $l(){try{const e=await en("DS/PlatformAPI/PlatformAPI");let t=e.getApplicationConfiguration("app.urls.registry");return!t&&Zt()&&(t=e.getApplicationConfiguration("app.urls.myapps")),t?bl(t):le.warn("Fail to fetch Registry URL."),t}catch(e){throw le.error(e),new Error("Fail to fetch AMD module(s).")}}function Cl(e,t,n){const s=Te(),i=e.result.community_subject_uri,o=e.result.subject_uri;let r="";t===U.Conversation?r=s.concat(`/dm/${i}`):t===U.Community?r=s.concat(`/community/${i}`):t===U.PersonalSpace&&(r=s.concat("/me/personal-space"));const a=new URL(r);return n===S.Media?a.searchParams.append("media",o):a.searchParams.append("content",o),a.href}function Tl(e,t){return e!=null&&e.topic?e.topic:(((e==null?void 0:e.users.length)===1?e==null?void 0:e.users:e==null?void 0:e.users.filter(s=>s.login!==t))||[]).map(s=>`${s.first_name} ${s.last_name}`).join(", ")}function Sl({base64Image:e,title:t}){let n,s,i;if(e instanceof File)i=e;else if(typeof e=="string"){if(n=e.split(","),s=null,n[0]==="data:image/png;base64"?s=`${t}.png`:n[0]==="data:image/jpeg;base64"?s=`${t}.jpeg`:n[0]==="data:application/vndopenxmlformats-officedocumentwordprocessingmldocument;base64"?s=`${t}.docx`:n[0]==="data:image/vnd.openxmlformats-officedocument.presentationml.presentation;base64"?s=`${t}.pptx`:n[0]==="data:image/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64"&&(s=`${t}.xlsx`),s){const o={type:n[0]};o["Content-Transfer-Encoding"]="base64",i=new Blob([n[1]],o)}}else e instanceof Blob&&(i=e,s=`${t}.jpeg`);return{mediaFile:i,fileName:s}}var ds=(e=>(e[e.small=320]="small",e[e.medium=640]="medium",e[e.large=960]="large",e[e.M1=520]="M1",e[e.L1=960]="L1",e[e.XL1=1920]="XL1",e[e.XXL1=3840]="XXL1",e))(ds||{});function $n(e,t,n){return e==="processed"&&t>0&&n>0}function xl(e,t){return Math.max(e,t)}function Cn(e){return e===3840?"xxl1":e===1920?"xl1":e===960?"l1":"m1"}function kl(e,t){const n=xl(e,t);return n<=520?["o1"]:n<=960?["m1","o1"]:n<=1920?["m1","l1","o1"]:n<=3840?["m1","l1","xl1","o1"]:["m1","l1","xl1","xxl1"]}function Al(e,t,n){const s=kl(e,t);return n?s.includes(Cn(n))?Cn(n):s.pop():s.shift()}function El(e=320){return e===640?"m":[960,1920,960,520].includes(e)?"l":"s"}function Pl(e,t,n,s,i,o,r="",a){const l=x(()=>$n(K(i),K(t),K(n))?Al(K(t),K(n),K(a)):El(K(a))),f=x(()=>{const c=K(r)?`/update/${K(r)}`:"",u=`${K(o)}/api/media/streammedia/id/${K(e)}/type/`;return K(i)!=="processed"?Qe(`${u}thumb/key/l_thumb${c}`):$n(K(i),K(t),K(n))?Qe(`${u}picture/key/${K(l)}${c}`):Qe(`${u}thumb/key/${K(l)}_thumb${c}`)});return{config:l,url:f}}async function fs(e,t){return{...e,result:await Il(e.result)}}async function Il(e,t){var s,i,o,r,a,l,f,c,u,h,y,m,p,_,b,C,P,H,q,O;const n={id:e.id,media_id:e.id,title:e.title,preview_fingerprint:e.preview_fingerprint,preview:{subject_uri:e.subject6wuri,preview_fingerprint:e.preview_fingerprint,width:e.width,height:e.height,processing_version:e.processing_version,status:e.status},width:e.width,height:e.height,processing_version:e.processing_version,status:e.status,preview_media_processing_status:e.preview_media_processing_status||e.status,type:e.media_type,model:S.Media,subject_uri:e.subject6wuri,author:e.author,stats_viewed:e.stats_viewed,community_title:(s=e==null?void 0:e._community)==null?void 0:s.title,community_id:(i=e==null?void 0:e._community)==null?void 0:i.id,community_subject_uri:[...e.subject6wuri.split(":").splice(0,3),"community",(o=e==null?void 0:e._community)==null?void 0:o.id].join(":"),community_type:(r=e==null?void 0:e._community)==null?void 0:r.community_type,created_at:pe(e.crdate),updated_at:pe(e.update),download_authorization:e.download_original_file==="1",download_original_file_url:(a=e.play)==null?void 0:a.download_original_url.transient_url_as_attachment,transient_original_file_url:(l=e.play)==null?void 0:l.download_original_url.transient_url,delete_authorization:(f=e==null?void 0:e._acl)==null?void 0:f.delete.access,forward_authorization:(c=e==null?void 0:e._acl)==null?void 0:c.forward.access,edit_authorization:(u=e==null?void 0:e._acl)==null?void 0:u.update.access,media_file_ext:e==null?void 0:e.media_file_ext,stream:((h=e.play)==null?void 0:h.av_streams)||((y=e.play)==null?void 0:y["3d_streams"])||((m=e.play)==null?void 0:m["2d_streams"])||((p=e.play)==null?void 0:p.doc_streams),view_stream:(_=e.play)==null?void 0:_.view,play:e.play,subtitles:(b=e.play)==null?void 0:b.subtitles,chapters:(C=e.play)==null?void 0:C.chapters,original_name:e==null?void 0:e.orig_name,canBeDisplayedODE:!1,ratio:e==null?void 0:e.ratio,size:e==null?void 0:e.size,related_posts:e==null?void 0:e.related_posts,wake_up_url:(P=e==null?void 0:e.play)==null?void 0:P.wake_up_url,is_illustration:e==null?void 0:e.is_illustration,_acl:e==null?void 0:e._acl,reprocessable:e==null?void 0:e.reprocessable,published:e.published==="1",oldParsing:e,description:e==null?void 0:e.description,enhanced_summary:e==null?void 0:e.enhanced_summary,thumbnail_time:e!=null&&e.thumbnail_time?timeToMilliseconds(e.thumbnail_time):void 0,preview_thumbnails:((H=e==null?void 0:e.preview)==null?void 0:H.thumbnails)||[]};if(n.community_type==="externaldm"&&(n.community_type="dm"),e.media_file_ext||(n.media_file_ext=(q=e.play)==null?void 0:q.original_file_extension),!n.media_file_ext&&e.orig_name){const M=e.orig_name&&e.orig_name.split(".").pop();n.media_file_ext=M}return["docx","doc","ppt","pptx","xls","xlsx"].includes(n.media_file_ext)&&(n.canBeDisplayedODE=!0),!((O=e.play)!=null&&O.download_original_url.transient_url)&&n.stream&&n.stream.forEach(M=>{M.transient_url&&(n.transient_original_file_url=M.transient_url)}),n}const ps=432e5;async function Ol(e){const t=new FormData;t.append("is_illustration",e.is_illustration?"true":"false"),t.append("community_id",e.subject_uri),t.append("title",e.title),t.append("userFile",e.file,e.title),e.base64&&t.append("base64_encoded","1"),t.append("published",e.published?"1":"0"),e.description&&t.append("description",e.description);const n=await en("DS/WAFData/WAFData"),s=await new Promise((i,o)=>{var a;const r=n.authenticatedRequest(`${Te()}/api/media/addmedia`,{responseType:"json",headers:{"x-ds-swym-csrftoken":Pn.get(Z.SWYM)},type:"json",method:"POST",data:t,timeout:ps,onUploadProgress:l=>{const f=Math.round(l.loaded*100/l.total);e.onProgress&&typeof e.onProgress=="function"&&e.onProgress(f)},onComplete:l=>{var f;(f=e.abortSignal)==null||f.removeEventListener("abort",r.cancel),i(l)},onFailure(l,f){var u;const c=new Error(l);c.response=f,(u=e.abortSignal)==null||u.removeEventListener("abort",r.cancel),o(c)},onCancel(){var l,f;(l=e.abortSignal)==null||l.removeEventListener("abort",r.cancel),o((f=e.abortSignal)==null?void 0:f.reason)}});(a=e.abortSignal)==null||a.addEventListener("abort",r.cancel)});return await fs(s)}async function Ml(e){return Ol(e)}async function Nl(e){const t=new FormData;e.title&&t.append("title",e.title),e.description&&t.append("description",e.description||""),e.published!==void 0&&t.append("published",e.published?"1":"0"),e.userFile&&t.append("userFile",e.userFile,e.userFile.name),e.authorizeDownload!==void 0&&t.append("download_original_file",e.authorizeDownload?"1":"0"),e.thumbnail_time_ms!==void 0&&t.append("thumbnail_time_ms",e.thumbnail_time_ms.toString()),t.append("is_illustration",e.is_illustration?"true":"false"),t.append("community_id",e.subject_uri),t.append("id_media",e.id_media);const[n]=await nt(["DS/WAFData/WAFData"]),s=await new Promise((i,o)=>{n.authenticatedRequest(`${Te()}/api/media/editmedia`,{responseType:"json",headers:{"x-ds-swym-csrftoken":Pn.get(Z.SWYM)},type:"json",method:"POST",data:t,timeout:ps,onComplete:i,onFailure(r,a){const l=new Error(r);l.response=a,o(l)}})});return fs(s)}function Dl(e){return e.split(":").pop()}const ct={Media:{Swym:{Content:"/api/media/listallmedia",ContentV2:e=>`/api/v2/communities/${Dl(e)}/media`,Duplicate:"/api/media/duplicate"},Exalead:{Content:"/api/exalead/search"}},Post:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/whatsnew"},Swym:{Content:"/api/feed/whatsnew",ContentV2:e=>`/api/v2/communities/${e}/posts`}},Conference:{Swym:{Content:"/api/feed/whatsnew"},Exalead:{Content:"/api/exalead/whatsnew"}},Survey:{Swym:{Content:"/api/feed/whatsnew"},Exalead:{Content:"/api/exalead/whatsnew"}},Question:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/whatsnew"},Swym:{Content:"/api/feed/whatsnew"}},Wiki:{Swym:{Content:"/api/feed/whatsnew"},Exalead:{Content:"/api/exalead/whatsnew"}},Wedo:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/whatsnew"},Swym:{Content:"/api/feed/whatsnew"}},Idea:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/whatsnew"},Swym:{Content:"/api/feed/whatsnew",ContentV2:e=>`/api/v2/communities/${e}/ideas`,Statuses:e=>`/api/v2/communities/${e}/ideas/statuses`}},Draft:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/search"},Swym:{Content:"/api/v2/user/contributions"}},MeActivity:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/search"},Swym:{Content:"/api/v2/user/activity"}},Contribution:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/search"},Swym:{Content:"/api/v2/user/contributions"}},Network:{Swym:{Content:"/api/network/getnetworkactivity"}},ContentReader:{Exalead:{Count:"/api/exalead/searchstats",Content:"/api/exalead/search"}},Rituals:{Exalead:{Content:"/api/exalead/whatsnew"}}};function Ul(){return se.post("/api/personalspace",{body:""}).json().then(Bt)}function Nt(e,t){return typeof e=="function"?e(t):e}function Ll(){const e=[S.Post,S.Media,S.Idea,S.Question],t={[S.Post]:ct.Post.Swym.Content,[S.Question]:ct.Question.Swym.Content,[S.Media]:ct.Media.Swym.Content,[S.Idea]:ct.Idea.Swym.Content},n=[S.DerivedPost,S.DerivedIdea];return e.reduce((i,o)=>(i[o]=jl({contentType:o,api:t[o],openApi:n.includes(o)}),i),{})}function jl({contentType:e,api:t,openApi:n}){return{async count(s){return{total:(await se.post(Nt(t,s.community_id),{json:{params:{...e?{content_type:[e]}:{},...s}}}).json()).nmatch,data:[]}},async getAll(s){if(n){const o=await se.get(Nt(t,s.community_id),{searchParams:{...s.derivedTypeId?{derived_type_id:s.derivedTypeId}:{},page:s.page.toString(),limit:s.limit.toString()}}).json();return{total:Number.parseInt(o.nb_result||"0")||0,data:vn(o).result}}const i=await se.post(Nt(t,s.community_id),{json:{params:{...e?{content_type:e}:{},...s}}}).json();return{total:Number.parseInt(i.nb_result||"0")||0,data:vn(i).result}}}}Ll();function Rl(e){const t=e.indexOf("@");return e.indexOf(" ")===-1&&/^[^a-z]*$/.test(e)?t>-1?e:`@${e}`:`@${e.substring(t+1).split(" ").filter(i=>i).map(i=>i[0]).map(i=>i.toUpperCase()).join("")}`}var zt=(e=>(e.WIDGET="widget",e.EXTERNAL="external",e.INTERNAL="internal",e.YOUTUBE="youtube",e))(zt||{}),Bl=(e=>(e.THUMBNAIL="thumbnail",e.TILE="tile",e.TITLE="title",e.LINK="link",e))(Bl||{});function Vl(e){const t=document.createElement("div");return t.innerHTML=e,t}function yt(e,t){for(;e.childNodes.length>0;)t.appendChild(e.childNodes[0])}function Fl(e){var n;let t;return e.tagName==="IMG"?t=e.getAttribute("data-media-id"):t=(n=e.querySelector("img"))==null?void 0:n.getAttribute("data-media-id"),t&&t!=="undefined"?t:""}function ql(e){return e.classList.contains("image_resized")?"small":"large"}function Wl(e){return e.classList.contains("image-style-align-center")?"center":e.classList.contains("image-style-align-left")?"left":e.classList.contains("image-style-align-right")?"right":e.tagName==="IMG"?"inline":"center"}function zl(e,t){const n=document.createElement("div");n.className="responsive-table";const s=e.getElementsByTagName("table")[0];t.width?s.style.width=t.width:s.style.width||(s.style.width="100%");const i=e.querySelector(":scope > figcaption");if(i){const o=document.createElement("caption");o.innerHTML=i.innerHTML,i.remove(),s.prepend(o)}return s.setAttribute("align",e.style.float||"center"),yt(e,n),n}function Hl(e,t,n,s){var l;const i=document.createElement("figure"),o=document.createElement("a"),r=document.createElement("img");r.setAttribute("src",""),t&&r.setAttribute("data-media-id",t),!t&&e.getAttribute("src")&&r.setAttribute("src",e.getAttribute("src"));const a=(l=e.querySelector(":scope > a"))==null?void 0:l.getAttribute("href");if(a&&o.setAttribute("href",a),(e.getAttribute("data-content-thumbnail")||e.querySelector("img[data-content-thumbnail]"))&&r.setAttribute("data-content-thumbnail","true"),e.querySelector("figcaption"))return i.setAttribute("data-position",s),i.setAttribute("data-size",n),a?(o.appendChild(r),i.appendChild(o)):i.appendChild(r),i.appendChild(e.querySelector("figcaption")),i;{r.setAttribute("data-position",s),r.setAttribute("data-size",n);let f=r;return a&&(o.append(r),f=o),f}}function Gl(e){const t=document.createElement("span");return t.className=`marker ${e.className}`,yt(e,t),t}function Yl(e){const t=document.createElement("pre"),n=e.querySelector("code");return yt(n||e,t),t}function Ql(e){const t=document.createElement("a");t.classList.add("sum-tag-link","sm-link"),t.setAttribute("data-login",e.dataset.login),t.setAttribute("data-content-type",e.dataset.contentType),t.setAttribute("data-type",e.dataset.type);const n=e.dataset.fullName,s=e.dataset.originalText;return t.innerHTML=Rl(n||s||e.innerHTML),t}function Kl(e){const t=document.createElement("a");return t.classList.add("sum-tag-link","sm-link"),t.setAttribute("data-users-group-uri",e.dataset.usersGroupUri),t.setAttribute("data-content-type",e.dataset.contentType),t.setAttribute("data-type",e.dataset.type),t.innerHTML=e.innerHTML,t}function Jl(e){const t=document.createElement("a");return t.classList.add("s6m-tag-link","sm-link"),t.setAttribute("data-predicate",e.dataset.predicate),t.setAttribute("data-tag-value",e.dataset.tagValue),t.setAttribute("data-type",e.dataset.type),t.setAttribute("contenteditable","false"),t.innerHTML=e.innerHTML,t}function Xl(e){const t=e.style;return e.replaceWith(zl(e,t))}function Tn(e){const t=ql(e),n=Wl(e),s=Fl(e);return e.replaceWith(Hl(e,s.split(":").pop(),t,n))}function Zl(e){e.replaceWith(Gl(e))}function eu(e){e.replaceWith(Yl(e))}function tu(e){e.replaceWith(Ql(e))}function nu(e){e.replaceWith(Kl(e))}function su(e){e.replaceWith(Jl(e))}function iu(e){try{const t=e.getAttribute("data-metas"),n=t?JSON.parse(t):void 0,s=e.getAttribute("data-url"),i=e.getAttribute("data-prefs"),r=e.className.includes("title-preview"),a=e.querySelector(".external-preview-link-image"),l=a&&a.src||(n==null?void 0:n.image)||"",f=e.querySelector(r?".external-preview-link-text":".external-preview-link-heading"),c=f&&f.textContent||"",u=e.querySelector(".external-preview-link-description"),h=u&&u.textContent||(n==null?void 0:n.description)||"",y=l.includes("thumb-link"),m=e.querySelector(".external-preview-link-content");m==null||m.remove();const p=document.createElement("a");return p.classList.add("preview-link"),r&&p.classList.add("title-preview"),p.href=s,p.setAttribute("data-title",c),p.setAttribute("data-desc",h),p.setAttribute("data-img",y?"":l),p.setAttribute("data-prefs",i),p.innerHTML="&nbsp;",e.replaceWith(p)}catch{le.error("Incorrect metadata")}}function ou(e){const t=e.getAttribute("data-url")||"#",n=document.createElement("a");return n.classList.add("preview-link"),n.href=t,n.innerHTML="&nbsp;",e.replaceWith(n)}function ru(e){const t=e.querySelector(".preference-container")||e,n=t==null?void 0:t.getAttribute("data-prefs"),s=t==null?void 0:t.getAttribute("data-source");if((t==null?void 0:t.getAttribute("data-type"))===zt.WIDGET){const o=document.createElement("a");return o.classList.add("preview-link"),o.setAttribute("data-prefs",n),o.setAttribute("data-source",s),o.setAttribute("data-type",zt.WIDGET),e.replaceWith(o)}}function au(e){e.tagName==="FIGURE"&&e.className==="table"&&Xl(e),e.tagName==="FIGURE"&&e.className!=="table"&&Tn(e),e.tagName==="IMG"&&Tn(e),e.tagName==="MARK"&&Zl(e),e.tagName==="PRE"&&eu(e),e.tagName==="SPAN"&&e.hasAttribute("data-login")&&tu(e),e.tagName==="SPAN"&&e.hasAttribute("data-users-group-uri")&&nu(e),e.tagName==="SPAN"&&e.hasAttribute("data-predicate")&&su(e),e.tagName==="DIV"&&e.className.includes("external-preview-link")&&iu(e),e.tagName==="IFRAME"&&e.className.includes("youtube-preview-link")&&ou(e),e.tagName==="DIV"&&e.className.includes("widget-preview-container")&&ru(e)}function lu(e){const t=Vl(e);return t.querySelectorAll(`
    pre, 
    figure, 
    img, 
    mark, 
    div.external-preview-link, 
    div.internal-preview-link, 
    iframe.youtube-preview-link,
    div.widget-preview-container,
    span[data-login],
    span[data-users-group-uri],
    span.s6m-tag-link.sm-link[data-predicate],
    a[data-type]
  `).forEach(au),t}function uu(e){return lu(e).innerHTML}function cu(e){return{reversedHtml:x(()=>uu(e.value))}}const du=255,fu="Cancel share";var we=(e=>(e.JSNOTIF_NOTIF_TYPE="jsnotif",e.JSEVENT_NOTIF_TYPE="jsevent",e.DSCEF="dscef",e))(we||{}),Ht=(e=>(e.PLATFORM_CHANGE_AUTOMATIC="automatic",e.PLATFORM_CHANGE_MANUAL="manual",e))(Ht||{});const pu={key:0,class:"pfc_pfc-main"},hu={class:"py-2"},mu={key:4},vu={key:0},yu={class:"description-container"},_u={class:"heading text-black"},gu={key:1,class:"flex gap-1 items-baseline"},wu={class:"text-grey-6 mt-1"},bu={class:"base64-image-container"},$u=["src"],Cu={class:"publish-form-footer"},Tu=Q({__name:"publish-form",props:{mode:{default:"automatic"},notifType:{},platformId:{},platformChange:{},forcePlatform:{type:Boolean,default:!1},platforms:{},title:{},description:{},contentTitle:{},contentDescription:{},availableContentTypes:{},hideThreadDataSelectors:{type:Boolean,default:!1},allowDraft:{type:Boolean,default:!0},threadType:{default:"community"},threadId:{},base64image:{},base64imageExtension:{default:"jpg"},forceThreadId:{type:Boolean},onCancel:{},onContentCreated:{}},emits:["cancelShare","startUpload","contentCreatedSuccess","tenantChangeFailure","platformChange","update:notifType-value"],setup(e,{expose:t,emit:n}){const s=e,i=n,o=$({label:"",value:""}),r=$(U.Community),a=x(()=>o.value.value),l=$(S.Post),f=$(null),c=$(s.title||""),u=$(s.contentTitle||""),h=$(s.contentDescription||""),y=$(s.description||""),m=$(s.platformId||""),p=$(!1),_=$(!1),b=$(!0),C=$(),P=$(s.platformChange),H=$(Te()),q=$(!1),O=$(s.mode),M=$(!1),W=$(""),G=$(s.base64image),_e=$(),he=$("true"),{$i18n:k}=Se("publish-form");let ee="";js(async()=>{if(s.platformId){Lt(s.platformId);const g=await Ue(Z.SWYM,s.platformId);jt(g)}else if(window.widget){const g=await Ut(Z.SWYM);Lt(g[0].platformId);const T=await Ue(Z.SWYM,g[0].platformId);jt(T)}});const me=Ke(),it=Ke();ye(async()=>{var g;window.setTopView=function(T){me.value=It(async()=>({template:`<div>${T}</div>`}))},window.setBottomView=function(T){it.value=It(async()=>({template:`<div>${T}</div>`}))},_.value=!0,$l(),m.value=J(),W.value=(g=(await tn()).result)==null?void 0:g.login,await ws(),_.value=!1});const j=It(()=>Bs(()=>import("./ckeditor-wrapper-CKD5A-9s.js"),__vite__mapDeps([0]),import.meta.url));function St(g){u.value=g}function hs(g){h.value=g}function ms(g){G.value=g}function vs(g){c.value=g}function ys(g){y.value=g}function _s(g){return g==="titleInput"?u.value:h.value}function gs(g){const T=document.querySelector(".pfc_pfc-main");return T==null?void 0:T.querySelector(g)}t({setContentTitle:St,setContentDescription:hs,setBase64image:ms,setImageTitle:vs,setMediadescription:ys,getValue:_s,getElement:gs});async function ws(){if(s.forcePlatform&&s.platformId===void 0)throw new Error("If the platform list option is set to true, a platformId option must be provided.");if(s.hideThreadDataSelectors&&s.threadType&&!s.threadId)throw new Error("If hideThreadDataSelectors is set to true, a threadType and a threadId option must be provided");if(s.mode==="base64"&&(O.value="automatic",console.warn("PublishFormView: base64 mode is deprecated, please don't define it or use 'automatic' instead")),s.notifType?C.value=s.notifType:s.mode==="catia"?C.value=we.DSCEF:C.value=we.JSEVENT_NOTIF_TYPE,i("update:notifType-value",C.value),s.mode==="catia"?P.value=Ht.PLATFORM_CHANGE_MANUAL:P.value=Ht.PLATFORM_CHANGE_AUTOMATIC,G.value&&!s.title)throw new Error("PublishFormView: title must be defined if base64image is set");if(s.hideThreadDataSelectors&&!s.threadType&&!s.threadId)throw new Error("If HideThreadDataSelector is true, Threadtype and ThreadId must be provided.");if(s.platforms&&s.platforms.forEach(g=>{if(!g.value||!g.label)throw new Error("Each platform must contain the properties value and label")}),s.threadId)try{const g=await jn(s.threadId);g&&(o.value.value=g.result.subject_uri,o.value.label=g.result.title)}catch{const g=await Fn(W.value,m.value,s.threadId);if(g)o.value.value=g.subject_uri,o.value.label=Tl(g,W.value),o.value.conversation=g;else throw new Error("thread id not found")}s.availableContentTypes&&(typeof s.availableContentTypes=="string"?_e.value=s.availableContentTypes.split(","):_e.value=s.availableContentTypes,l.value=_e.value.at(0)),s.threadType==="community"?r.value=U.Community:s.threadType==="dm"?r.value=U.Conversation:r.value=U.PersonalSpace}async function bs(g){o.value.value="",m.value=g,H.value=Te(),i("platformChange",JSON.stringify({platform_instance:H.value}))}function $s(g){i("tenantChangeFailure",g)}function ot(){u.value="",h.value=""}function Cs(g){o.value.value="",ot(),g===U.PersonalSpace&&xs(),xe(!0)}function xe(g){b.value=g}function Ts(g){g.value||ot(),o.value=g,a.value?xe(!o.value):xe(!!o.value)}async function Ss(g){g.value||ot(),o.value=g,a.value?xe(!o.value):xe(!!o.value),p.value=!!(g.value&&!g.conversation)}async function xs(){try{const g=await Ul();o.value.value=g.result.subject_uri,o.value.label=g.result.title,xe(!1)}catch(g){le.error(g),De.create({text:k("personalSpaceError"),color:"error"})}}const{reversedHtml:xt}=cu(h);function ks(g){l.value=g}function As(g){xe(g)}async function Es(g,T){const Y={base64Image:g,title:s.title,extension:s.base64imageExtension},Ne=Sl(Y);c.value=Ne.fileName||"";const kt=await Ml({subject_uri:o.value.value,file:Ne.mediaFile,title:c.value,is_illustration:!0,published:!T,base64:!0,description:y.value}),{id:lt,width:At,height:Ve,processing_version:Et,status:Pt,preview_fingerprint:Fe}=kt.result,{url:te}=Pl(lt,At,Ve,Et,Pt,H.value,Fe,ds.L1);return{srcUrl:te.value,mediaId:lt}}function dn(g){var T,Y;if(q.value=g.isSaveDraft,ee=xt.value,(Y=(T=f.value)==null?void 0:T.validate)!=null&&Y.call(T))Ps(g.isSaveDraft);else return De.create({text:k("TitleIsEmpty"),color:"error",timeout:bn})}async function Ps(g){if(M.value=!0,p.value&&W.value){const T=[a.value,W.value];try{const Y=await To(T,m.value);o.value.value=Y.subject_uri}catch(Y){return le.log(Y),De.create({text:k("CreateConversationFailed"),color:"error",timeout:bn})}}if(O.value!=="automatic")i("startUpload",JSON.stringify({platform_instance:H.value,platformId:m.value.toLowerCase(),community_id:o.value.value,isDraft:g,platformUrl:H.value,threadId:o.value.value,threadTitle:o.value.label,threadType:s.threadType,contentType:l.value}));else if(G.value&&s.base64imageExtension&&O.value==="automatic"){const{srcUrl:T,mediaId:Y}=await Es(G.value,g);ee+=`<p><img data-media-id="${Y}" src="${T}"}></p>`,l.value===S.Media?await at(Y):await at()}else await at()}function rt(g){return r.value===U.PersonalSpace?k("PersonalSpace"):r.value===U.Conversation?o.value.label:g}async function at(g){try{let T,Y;switch(r.value){case U.Conversation:Y="dm";break;case U.PersonalSpace:Y="personalspace";break;default:Y="community"}if(g&&l.value===S.Media)ee=xt.value,T=await Nl({id_media:g||"",title:u.value,is_illustration:!he.value,published:!q.value,subject_uri:o.value.value,description:ee});else{const Ne={message:ee,title:u.value,published:!q.value};T=await lo({model:l.value,communitySubjectUri:o.value.value,data:Ne})}O.value!=="automatic"?i("contentCreatedSuccess",JSON.stringify({success:!0,containerId:T.result.community_id,containerType:Y,contentSubjectURI:T.result.community_subject_uri,contentId:T.result.id,contentUrl:Cl(T,r.value,l.value)})):s.onContentCreated?(De.create({text:q.value?k("Adraftofyourcontentwascreated",{communityTitle:rt(T.result.community_title)}):k("Yourcontenthasbeenpublishedin",{communityTitle:rt(T.result.community_title)}),color:"success",timeout:Wt}),s.onContentCreated()):De.create({text:q.value?k("Adraftofyourcontentwascreated",{communityTitle:rt(T.result.community_title)}):k("Yourcontenthasbeenpublishedin",{communityTitle:rt(T.result.community_title)}),color:"success",timeout:Wt})}catch{O.value!=="automatic"?i("contentCreatedSuccess",JSON.stringify({success:!1,message:k("Errorcannotsaveyourcontent")})):De.create({text:k("Errorcannotsaveyourcontent"),color:"error"})}M.value=!1}window.createContent=async function(g){ee=xt.value,ee=`${ee}<p><img data-source="swym" data-media-id="${g}" width="320"></p>`,await at(g)},window.resetForm=ot;function Is(){var g;(g=s.onCancel)==null||g.call(s),i("cancelShare",fu)}return(g,T)=>{const Y=X("vu-input"),Ne=X("vu-checkbox"),kt=X("vu-icon"),lt=X("vu-form"),At=X("vu-scroller"),Ve=X("vu-btn"),Et=X("vu-message-container"),Pt=Ce("tooltip"),Fe=Ce("mask");return v(),w(ae,null,[d(_)?I("",!0):re((v(),w("div",pu,[B(g.$slots,"topView",{},()=>[E(d(me))],!0),E(At,{class:"px-3"},{default:D(()=>[g.forcePlatform?I("",!0):(v(),R(gl,{key:0,"platform-id":d(m),platforms:g.platforms,onOnTenantChangeFailure:$s,"onUpdate:selectedPlatformId":bs},null,8,["platform-id","platforms"])),A("h5",hu,L(d(k)("Destination")),1),!d(o).value||d(r)===d(U).PersonalSpace?(v(),R(wl,{key:1,modelValue:d(r),"onUpdate:modelValue":[T[0]||(T[0]=te=>oe(r)?r.value=te:null),T[1]||(T[1]=te=>Cs(te))]},null,8,["modelValue"])):I("",!0),d(r)===d(U).Community?(v(),R(pa,{key:2,"hide-thread-selector":g.hideThreadDataSelectors,"selected-community":d(o),"selected-tenant-id":d(m),"onUpdate:selectedCommunity":Ts},null,8,["hide-thread-selector","selected-community","selected-tenant-id"])):I("",!0),d(r)===d(U).Conversation?(v(),R(vl,{key:3,"hide-thread-selector":g.hideThreadDataSelectors,"platform-id":d(m),"selected-conversation":d(o),"onUpdate:selectedConversation":Ss},null,8,["hide-thread-selector","platform-id","selected-conversation"])):I("",!0),d(a)||d(r)===d(U).PersonalSpace?(v(),w("div",mu,[E(xa,{"content-type":d(l),"onUpdate:contentType":[T[2]||(T[2]=te=>oe(l)?l.value=te:null),ks],"available-content-types":d(_e),"create-convo-flag":d(p),"current-user":d(W),"is-conversation-selected":d(r)===d(U).Conversation,"is-personal-space":d(r)===d(U).PersonalSpace,"platform-id":d(m),"thread-id":d(a),onNoType:As},null,8,["content-type","available-content-types","create-convo-flag","current-user","is-conversation-selected","is-personal-space","platform-id","thread-id"])])):I("",!0),!d(b)&&(d(a)||d(r)===d(U).PersonalSpace)?(v(),R(lt,{key:5,ref_key:"creationForm",ref:f,onKeyup:T[6]||(T[6]=Rs(Ee(()=>{},["stop"]),["enter"]))},{default:D(()=>[d(a)||d(r)===d(U).PersonalSpace?(v(),w("div",vu,[E(Y,{modelValue:d(u),"onUpdate:modelValue":T[3]||(T[3]=te=>oe(u)?u.value=te:null),label:d(k)("Title"),maxlength:d(du),required:""},null,8,["modelValue","label","maxlength"]),A("div",yu,[A("label",_u,L(d(k)("Description")),1),E(d(j),{modelValue:d(h),"onUpdate:modelValue":T[4]||(T[4]=te=>oe(h)?h.value=te:null),"community-uri":d(a),"max-line":6,"min-line":4,mode:"SIMPLE",outlined:""},null,8,["modelValue","community-uri"])])])):I("",!0),d(r)===d(U).Community&&d(l)===d(S).Media?(v(),w("div",gu,[E(Ne,{modelValue:d(he),"onUpdate:modelValue":T[5]||(T[5]=te=>oe(he)?he.value=te:null),options:[{label:d(k)("DisplayOnFeed"),value:"true"}]},null,8,["modelValue","options"]),re(E(kt,{class:"fonticon-clickable",color:"",icon:"help-circled"},null,512),[[Pt,d(k)("IfSelectedTheMediaWillBeDisplayedOnTheWhatsNew",{0:"<b>",1:"</b>"}),void 0,{top:!0}]])])):I("",!0),A("p",wu,L(d(k)("PublishNote")),1)]),_:1},512)):I("",!0),A("div",bu,[g.base64image?(v(),w("img",{key:0,src:g.base64image,width:"100%"},null,8,$u)):I("",!0)]),B(g.$slots,"footer",{},()=>[E(d(it))],!0)]),_:3}),A("div",Cu,[re((v(),R(Ve,{class:"bg-blue-2 publish-btn",color:"primary",disabled:d(b),onClick:T[7]||(T[7]=()=>dn({isSaveDraft:!1}))},{default:D(()=>[Pe(L(d(k)("Publish")),1)]),_:1},8,["disabled"])),[[Fe,d(M)&&!d(q)]]),re((v(),R(Ve,{class:"save-as-draft-btn",disabled:d(b),onClick:T[8]||(T[8]=()=>dn({isSaveDraft:!0}))},{default:D(()=>[Pe(L(d(k)("SaveDraft")),1)]),_:1},8,["disabled"])),[[Fe,d(M)&&d(q)]]),E(Ve,{onClick:T[9]||(T[9]=te=>Is())},{default:D(()=>[Pe(L(d(k)("Cancel")),1)]),_:1})])])),[[Fe,d(M)]]),E(Et,{class:"!z-[5000]"})],64)}}}),Su=ue(Tu,[["__scopeId","data-v-0bbb4dcb"]]),xu=Q({__name:"App",setup(e){const t=$(),n=$();ye(()=>{en("css!DS/UIKIT/UIKIT"),nt(["UWA/Class/View","UWA/Element"]).then(([p,_])=>{const b=p.extend({createContent(C){var P;(P=window.createContent)==null||P.call(window,C)},getControl(C){return{getValue(){var P;return(P=n.value)==null?void 0:P.getValue(C)}}},getElement(C){var P;return _.extend((P=n.value)==null?void 0:P.getElement(C))}});window.publishView=new b}).then(()=>{setTimeout(()=>{window.publishView.dispatchEvent("onRefresh")},1e3)})});const s=new URLSearchParams(window.location.search),i=Object.fromEntries(s.entries()),o=i.mode,r=i.notifType,a=i.platformChange,l=i.platformId,f=i.threadType,c=i.threadId,u=i.forcePlatform,h=i.hideThreadDataSelectors,y=i.availableContentTypes;function m(p,_){var b;if(r===we.JSNOTIF_NOTIF_TYPE||t.value===we.JSNOTIF_NOTIF_TYPE||t.value===we.DSCEF)if(r===we.JSNOTIF_NOTIF_TYPE||t.value===we.JSNOTIF_NOTIF_TYPE){const C=document.createElement("textarea"),P=document.createElement("form");C.setAttribute("name",p),C.appendChild(document.createTextNode(_)),P.setAttribute("method","POST"),P.setAttribute("action","jsnotif://"),P.appendChild(C),document.documentElement.appendChild(P),P.submit(),(b=P.parentNode)==null||b.removeChild(P)}else window.dscef.sendString(`${p}=${_}`);window.publishView&&window.publishView.dispatchEvent(p,_)}return(p,_)=>(v(),R(Su,{ref_key:"publishFormRef",ref:n,"notif-type-value":d(t),"onUpdate:notifTypeValue":_[0]||(_[0]=b=>oe(t)?t.value=b:null),"force-platform":d(u)==="true","hide-thread-data-selectors":d(h)==="true",mode:d(o)||"catia","notif-type":d(r),"platform-change":d(a),"platform-id":d(l),"thread-id":d(c),"thread-type":d(f),"available-content-types":d(y),onCancelShare:_[1]||(_[1]=b=>m("CancelShare",b)),onContentCreatedSuccess:_[2]||(_[2]=b=>m("ContentCreated",b)),onPlatformChange:_[3]||(_[3]=b=>m("PlatformChange",b)),onStartUpload:_[4]||(_[4]=b=>m("StartUpload",b)),onTenantChangeFailure:_[5]||(_[5]=b=>m("TenantChangeFailure",b))},null,8,["notif-type-value","force-platform","hide-thread-data-selectors","mode","notif-type","platform-change","platform-id","thread-id","thread-type","available-content-types"]))}}),Lu=Object.freeze(Object.defineProperty({__proto__:null,default:xu},Symbol.toStringTag,{value:"Module"}));export{ct as A,rs as E,S as I,Uu as S,Bl as U,ue as _,Du as a,Bn as b,Nu as c,vn as d,Fi as e,Vi as f,Ni as g,_i as h,Fn as i,Rl as j,ti as k,Ou as l,el as m,Mu as n,Lu as o,Qe as p,We as r,Se as u};
//# sourceMappingURL=App-BN06hRFW.js.map
