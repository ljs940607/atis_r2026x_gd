define("DS/i3DxMdSimulationWeb/i3DxMSRFileTree",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/Venfflate/fflate"],(function(e,t,r,o){"use strict";let s=t.singleton({getFileTreeDownloadURL:async function(e,t,o,n,a,l){var f;if(l&&l.length>0){let t="";for(const e of l)t+="name="+e+"&";f=e+"/resources/v1/modeler/dsmsrprotected/dsmsr:Simulation/"+o+"/dsmsr:Result/"+n+"/files/"+a+"/DownloadURL?"+t}else f=e+"/resources/v1/modeler/dsmsrprotected/dsmsr:Simulation/"+o+"/dsmsr:Result/"+n+"/files/"+a+"/DownloadURL";var c=[],u={cors:!0,method:"GET",async:!1,headers:{SecurityContext:encodeURIComponent(t)},onComplete:function(e){c=s.fetchURL(e)},onFailure:function(e){console.error("get downloadurl error = "+e)}};return r.authenticatedRequest(f,u),c},fetchURL:async function(e){console.log(e);var t=JSON.parse(e),r=[];try{if(t.offsetArray)for(const n of t.offsetArray){let a={};if(206!==(e=await fetch(t.url,{headers:{Range:`bytes=${n.startOffset}-${n.endOffset}`}})).status)return console.error("Failed to fetch partial content",e.status),null;{var s=await e.arrayBuffer();const t=new Uint8Array(s),l=o.decompressSync(t);a.buffer=l,a.name=n.filename,r.push(a)}}else{if(200!=(e=await fetch(t.url)).status)return console.error("Failed to fetch url",e.status),null;{let t={};t.buffer=await e.arrayBuffer(),r.push(t)}}}catch(e){console.error("Error fetching the content:",e)}return r}});return s}));