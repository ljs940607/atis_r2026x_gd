define("DS/DELPPWIRPCModel/Model/AbstractIRPCModel",["UWA/Core","UWA/Date","UWA/Class/Model","UWA/Class/Debug","DS/DELPPWModelServices/ModelUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWLoggerModel/LoggerUtils","DS/DELPPWModelServices/Navigation/IndexedDBUtils"],(function(e,t,i,n,o,s,r,c){"use strict";var l=i.extend(n,{idAttribute:"PID",_modelEvents:{},_attributesDef:{},init:function(t,i){(i=i||{}).parse=!0,e.is(i.dictionary)&&(this.dictionary=i.dictionary),this._parent(t,i)},destroy:function(t){return c.removeModel(this),this._parent(e.merge({type:"json"},t))},setup:function(){this._parent.apply(this,arguments)},setAdditionalInfo:function(t){var i,n,o=t;e.is(o)&&e.is(this._additionalInfo)&&(e.is(this._additionalInfo.directConnectionsFetched)&&e.is(this._additionalInfo.inverseConnectionsFetched)&&(Object.prototype.hasOwnProperty.call(o,"queriedForConnections")?Object.prototype.hasOwnProperty.call(o,"directConnectionsFetched")||Object.prototype.hasOwnProperty.call(o,"inverseConnectionsFetched")||(o.directConnectionsFetched=o.queriedForConnections,o.inverseConnectionsFetched=o.queriedForConnections):(Object.prototype.hasOwnProperty.call(o,"directConnectionsFetched")||Object.prototype.hasOwnProperty.call(o,"inverseConnectionsFetched"))&&(i=e.is(o.directConnectionsFetched,"boolean")?o.directConnectionsFetched:this._additionalInfo.directConnectionsFetched,n=e.is(o.inverseConnectionsFetched,"boolean")?o.inverseConnectionsFetched:this._additionalInfo.inverseConnectionsFetched,o.queriedForConnections=i&&n)),e.extend(this._additionalInfo,o))},getAdditionalInfo:function(t){if(t&&e.is(this._additionalInfo)&&e.is(this._additionalInfo[t]))return e.result(this._additionalInfo,t)},sync:function(i,n,l){var a,d,u,h,f,P,C,p=this,I=t.now(),g=p._parent,m=l.onComplete,v=l.onFailure,y=l.onTimeout,D=!!e.is(l.forceRefresh)&&l.forceRefresh,M="START - "+i+" request",b=" / Time: "+new t(I).toISOString(),R="END - "+i+" request";if(a=e.is(n.id)?M+" on "+n.id+b:M+b,r.debug(a),e.is(l)&&e.is(l.logMessage)&&r.debug("AbstractIRPCModel",l.logMessage),l.onComplete=function(i,o){var s=!0,u={code:500,message:"",status:"External Server error",type:""};e.is(i)&&e.is(i.type)&&("Generic Error"!==i.type&&"BL Error"!==i.type||(s=!1,u.message=i.message,u.type=i.type)),s?(d=t.now(),C=" / Duration: "+(d-I)+" ms",a=e.is(n.id)?R+" on "+n.id+C:R+C,r.debug(a),e.is(l)&&(e.is(m)&&(m.call(null,i,o),c.storeModel(p)),e.is(l.logMessage)&&r.debug("AbstractIRPCModel success",l.logMessage))):l.onFailure.call(null,u,i,o)},l.onFailure=function(t,n,o){a="FAILURE during "+i+": "+e.Json.encode(t),r.debug(a),e.is(n)||(n=t),e.is(l)&&(e.is(v)&&v.call(null,n,o),e.is(l.logMessage)&&r.debug("AbstractIRPCModel failed",l.logMessage))},l.onTimeout=function(t,n,o){a="TIMEOUT during "+i+": "+e.Json.encode(t),r.debug(a),e.is(l)&&(e.is(y)&&y.call(null,n,o),e.is(l.logMessage)&&r.debug("AbstractIRPCModel timedout",l.logMessage))},P=o.getTimeoutPreference(),e.is(P)&&(l.timeout=P),l.ajax=function(t,i){var n=i||{},o={url:t||"NOURL",data:e.is(n.data)?n.data:"",headers:e.is(n.headers)?n.headers:"",method:e.is(n.method)?n.method:"GET",type:e.is(n.type)?n.type:null,onComplete:e.is(n.onComplete)?n.onComplete:null,onFailure:e.is(n.onFailure)?n.onFailure:null,onTimeout:e.is(n.onTimeout)?n.onTimeout:n.onFailure};return s.webServiceRequest(o),o},o.isStandAlone()||"read"!==i||!o.getNavigateOnIndexedDB()||D)return p._parent.call(p,i,n,l);h=function(e){u=e._attributesDef,this.set(e),this.setAdditionalInfo({queriedForChildren:!1}),this.setAdditionalInfo({queriedForConnections:!1}),l.onComplete({attributesValue:this._attributes,attributesDef:u})}.bind(this),f=function(){return g.call(p,i,n,l)}.bind(this),c.getModel(n,h,f)},parse:function(t){var i,n;if(t)return e.is(this.collection)&&e.is(this.collection.dictionary)?i=this.collection.dictionary:e.is(this.dictionary)&&(i=this.dictionary),n=e.is(t.attributesValue)?this.setTypeAndPPRTYPE(t.attributesValue):this.setTypeAndPPRTYPE(t),Object.keys(n).forEach((function(t){var o,s,r=!1,c=/^\+?[1-9]\d*$/.test(n[t])&&!Array.isArray(n[t]);e.is(i)&&(o=i.getAttributeInfo(t)),o&&o.AuthorizedValues&&((s=o.AuthorizedValues).forEach((function(e){e.Name===n[t]&&(n[t]=e.NLS,r=!0)})),!r&&c&&(n[t]=s[Number.parseInt(n[t])-1].NLS))})),"ORGANIZATION"!==n.PPRTYPE||Object.hasOwnProperty.call(n,"PLMEntity.V_Name")||(Object.hasOwnProperty.call(n,n.type+".Title")&&"NULL"!==n[n.type+".Title"]?n["PLMEntity.V_Name"]=n[n.type+".Title"]:Object.hasOwnProperty.call(n,"name")&&(n["PLMEntity.V_Name"]=n.name)),n},setTypeAndPPRTYPE:function(t){var i,n,o,s;return e.is(this.collection)&&e.is(this.collection.dictionary)?i=this.collection.dictionary:e.is(this.dictionary)&&(i=this.dictionary),"VPMReference"!==t.type&&"ErgoHuman"!==t.type&&""!==t.type||(t.defType=t.type,s=function(t){if(e.is(i)&&i.isAKindOf(t,"Resource"))return t},o=(Array.isArray(t.interface)?t.interface:[t.interface]).find(s),e.is(o)?(t.type=o,delete t.interface):e.is(t.V_discipline)&&t.V_discipline.length>0&&"NULL"!==t.V_discipline&&(t.baseType=t.type,t.type=t.V_discipline)),t.type&&e.is(i)&&(n=i.getPPRType(t.type))&&(t.PPRTYPE=n),t},isReference:function(){return!(this.isInstance()||this.isConnection())},isInstance:function(){return this.has("isInstanceOf")},isConnection:function(){return this.has("to")&&this.has("from")}});return l})),define("DS/DELPPWIRPCModel/Collections/AbstractIRPCCollection",["UWA/Core","UWA/Utils","UWA/Date","UWA/Class/Collection","UWA/Class/Debug","DS/DELPPWModelServices/ModelUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWLoggerModel/LoggerUtils"],(function(e,t,i,n,o,s,r,c){"use strict";var l=n.extend(o,{comparator:"PID",dictionary:null,_modelChangeListeners:null,setup:function(t,i){return i=i||{},e.is(i.dictionary)&&(this.dictionary=i.dictionary),this._modelChangeListeners={},this._parent.apply(this,arguments)},parse:function(t){var i=this,n=function(t){e.is(t.attributesValue)&&(t[i.model.prototype.idAttribute]=t.attributesValue[i.model.prototype.idAttribute])};return Array.isArray(t)?t.forEach((function(e){n(e)})):n(t),t},subscribeToModelChanges:function(e){var i=t.getUUID();return this._modelChangeListeners[i]=e,i},unSubscribeToModelChanges:function(t){e.is(this._modelChangeListeners[t])&&delete this._modelChangeListeners[t]},publishModelChanges:function(t){var i=this;if(e.is(this._modelChangeListeners)){Object.keys(this._modelChangeListeners).forEach((n=>{e.is(i._modelChangeListeners[n],"function")&&i._modelChangeListeners[n](t)}))}},sync:function(t,n,o){var l,a,d,u=this._parent,h=o.onComplete,f=o.onFailure,P=o.onTimeout,C=i.now(),p="START - "+t+" request",I=" / Time: "+new i(C).toISOString(),g="END - "+t+" request",m=e.is(n.id)?p+" on "+n.id+I:p+I;m=e.is(n.id)?p+" on "+n.id+I:p+I,c.debug(m),e.is(o)&&e.is(o.logMessage)&&c.debug("AbstractIRPCCollection",o.logMessage),a=s.getTimeoutPreference(),e.is(a)&&(o.timeout=a),o.onComplete=function(t,s){var r=!0,a={code:500,message:"",status:"External Server error",type:""};e.is(t)&&e.is(t.type,"string")&&("Generic Error"!==t.type&&"BL Error"!==t.type||(r=!1,a.message=t.message,a.type=t.type)),r?(l=i.now(),d=" / Duration: "+(l-C)+" ms",m=e.is(n.id)?g+" on "+n.id+d:g+d,c.debug(m),e.is(o)&&(e.is(t,"array")&&t.forEach((function(t){e.is(t.attributesValue)&&(t.PID=t.attributesValue.PID)})),e.is(h,"function")&&h.call(null,t,s),e.is(o.logMessage)&&c.debug("AbstractIRPCModel success",o.logMessage))):o.onFailure.call(null,a,t,s)},o.onFailure=function(i,n,s){m="FAILURE during "+t+": "+e.Json.encode(i),c.debug(m),e.is(n)||(n=i),e.is(o)&&(e.is(f)&&f.call(null,n,s),e.is(o.logMessage)&&c.debug("AbstractIRPCCollection failed",o.logMessage))},o.onTimeout=function(i,n,s){m="TIMEOUT during "+t+": "+e.Json.encode(i),c.debug(m),e.is(o)&&(e.is(P)&&P.call(null,n,s),e.is(o.logMessage)&&c.debug("AbstractIRPCCollection timedout",o.logMessage))},o.ajax=function(t,i){var n=i||{},s={url:t||"NOURL",data:e.is(n.data)?n.data:"",headers:e.is(n.headers)?n.headers:"",method:e.is(n.method)?n.method:"GET",type:e.is(n.type)?n.type:null,onComplete:e.is(n.onComplete)?n.onComplete:null,onFailure:e.is(n.onFailure)?n.onFailure:null,onTimeout:e.is(n.onTimeout)?n.onTimeout:n.onFailure,options:o};return r.webServiceRequest(s),s},u.call(this,t,n,o)}});return l})),define("DS/DELPPWIRPCModel/Model/BIModel",["DS/DELPPWIRPCModel/Model/AbstractIRPCModel"],(function(e){"use strict";return e.extend({name:"BIModel",idAttribute:"id"})})),define("DS/DELPPWIRPCModel/Collections/BIModelCollection",["DS/DELPPWIRPCModel/Collections/AbstractIRPCCollection","DS/DELPPWIRPCModel/Model/BIModel"],(function(e,t){"use strict";return e.extend({name:"BIModelCollection",model:t,comparator:"id"})})),define("DS/DELPPWIRPCModel/Model/InstanceModel",["UWA/Core","DS/DELPPWIRPCModel/Model/AbstractIRPCModel","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWModelServices/Navigation/IndexedDBUtils","DS/DELPPWModelParsers/ConnectionParser"],(function(e,t,i,n,o){"use strict";var s=t.extend({name:"InstanceModel",_logger:null,urlRoot:function(){return i.getWebServicesURL()+"/instance"},defaultAdditionalInfo:{queriedForConnections:!1,directConnectionsFetched:!1,inverseConnectionsFetched:!1},setup:function(t,n){this._parent.apply(this,arguments),this._additionalInfo||(this._additionalInfo=e.clone(this.defaultAdditionalInfo)),e.is(i.instanceModelSetup)&&i.instanceModelSetup(this,n)},parse:function(t,s){var r,c,l,a={},d=this._parent.apply(this,arguments),u={};if(d){if(this._additionalInfo||(this._additionalInfo=e.clone(this.defaultAdditionalInfo)),e.is(s)&&e.is(s.request)&&e.is(s.request.method,"string")&&"POST"===s.request.method&&this.setAdditionalInfo({queriedForConnections:!0,directConnectionsFetched:!0,inverseConnectionsFetched:!0}),e.is(t.queriedForConnections)&&(u.queriedForConnections=t.queriedForConnections,delete t.queriedForConnections),e.is(t.directConnectionsFetched)&&(u.directConnectionsFetched=t.directConnectionsFetched,delete t.directConnectionsFetched),e.is(t.inverseConnectionsFetched)&&(u.inverseConnectionsFetched=t.inverseConnectionsFetched,delete t.inverseConnectionsFetched),e.is(t.filterQuery)&&(u.filterQuery=t.filterQuery,delete t.filterQuery),Object.keys(u).length>0&&this.setAdditionalInfo(u),e.is(i.referenceModelParse))i.referenceModelParse(this,d,s);else if(e.is(s.request)&&e.is(s.request.method,"string")&&"POST"===s.request.method){for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&(c.contains("to.")&&(a[c.substring(c.indexOf("to.")+3)]=t[c]),"connections"===c&&t.connections.forEach((function(e){o.parse(e)})));Object.keys(a).length>0&&(l=this.collection.referenceCollection.add(a,{silent:!0}))&&(l.setAdditionalInfo({queriedForChildren:!0,queriedForConnections:!0}),n.storeModel(l))}return e.is(this.collection)&&e.is(d)&&e.is(d.PID)&&e.is(d.isAggregatedBy)&&e.is(d.isInstanceOf)&&(this.collection.addChildInfo(d.isAggregatedBy,d.PID),this.collection.addRefInfo(d.isInstanceOf,d.PID)),e.is(d)&&e.is(this.collection)&&(r={instances:{}},e.is(this.collection.get(d.PID))?r.instances.update=[d]:r.instances.add=[d],this.collection.publishModelChanges(r)),d}}});return s})),define("DS/DELPPWIRPCModel/Collections/InstanceCollection",["UWA/Core","DS/DELPPWIRPCModel/Collections/AbstractIRPCCollection","DS/DELPPWIRPCModel/Model/InstanceModel","DS/DELPPWWebServices/WebserviceUtils"],(function(e,t,i,n){"use strict";var o=t.extend({name:"InstanceCollection",model:i,childInfoCache:{},refInfoCache:{},comparator:null,setup:function(){return this.childInfoCache={},this.refInfoCache={},this._parent.apply(this,arguments)},url:function(){return n.getWebServicesURL()+"/instance"},remove:function(t,i){var n=this,o=[];if((Array.isArray(t)?t:[t]).forEach((function(t){var i;e.is(t)&&(i=e.is(t.has)?t:n.get(t)),e.is(i)&&(i.has("isAggregatedBy")&&i.has("isInstanceOf")&&i.has("PID")&&(n.removeChildInfo(i.get("isAggregatedBy"),i.get("PID")),n.removeRefInfo(i.get("isInstanceOf"),i.get("PID"))),o.push(i.toJSON()))})),o.length>0){let e={instances:{remove:o}};this.publishModelChanges(e)}return this._parent.call(this,t,i)},reset:function(e,t){return this.childInfoCache={},this.refInfoCache={},this._parent.call(this,e,t)},getChildren:function(t){var i=[];return e.is(t)&&e.is(this.childInfoCache[t])&&(i=this._getInstances(this.childInfoCache[t])),i},getInstancesForGivenReference:function(t){var i=[];return e.is(t)&&e.is(this.refInfoCache[t])&&(i=this._getInstances(this.refInfoCache[t])),i},_getInstances:function(t){var i=this,n=[];return Array.isArray(t)&&t.forEach((function(t){var o=i.get(t);e.is(o)&&n.push(o)})),n},addChildInfo:function(e,t){this._addToCache.call(this.childInfoCache,e,t)},addRefInfo:function(e,t){this._addToCache.call(this.refInfoCache,e,t)},_addToCache:function(t,i){e.is(this[t])||(this[t]=[]),this[t].indexOf(i)<0&&this[t].push(i)},removeChildInfo:function(e,t){this._removeFromCache.call(this.childInfoCache,e,t)},removeRefInfo:function(e,t){this._removeFromCache.call(this.refInfoCache,e,t)},_removeFromCache:function(t,i){var n=-1;e.is(this[t])&&(n=this[t].indexOf(i))>-1&&this[t].splice(n,1)}});return o})),define("DS/DELPPWIRPCModel/Model/ReferenceModel",["UWA/Core","DS/DELPPWIRPCModel/Model/AbstractIRPCModel","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWIndexServices/IndexParser"],(function(e,t,i,n){"use strict";var o=t.extend({name:"ReferenceModel",idAttribute:"PID",urlRoot:function(){return i.getWebServicesURL()+"/reference"},defaultAdditionalInfo:{queriedForDocuments:!1,queriedForChildren:!1,queriedForConnections:!1,directConnectionsFetched:!1,inverseConnectionsFetched:!1},setup:function(t,n){this._parent.apply(this,arguments),this._additionalInfo||(this._additionalInfo=e.clone(this.defaultAdditionalInfo)),e.is(i.referenceModelSetup)&&i.referenceModelSetup(this,n)},isSystem:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="SYSTEM"===i||"OPERATION"===i),t},isWorkInstruction:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="WORKINSTRUCTION"===i),t},isProcess:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="PROCESS"===i),t},isService:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="SERVICE"===i),t},isConstruction:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="CONSTRUCTION"===i),t},isResource:function(){var t,i=this.get("PPRTYPE");return e.is(i)&&(t="RESOURCE"===i),t},isPart:function(){var t=!1,i=this.get("PPRTYPE");return e.is(i)&&"PART"===i&&(t=!0),t},isProduct:function(){var t=!1,i=this.get("PPRTYPE");return e.is(i)&&"PRODUCT"===i&&(t=!0),t},is3DShape:function(){var t=!1,i=this.get("type");return e.is(i)&&"3DShape"===i&&(t=!0),t},isDrawing:function(){var t=!1,i=this.get("type");return e.is(i)&&"Drawing"===i&&(t=!0),t},isOrganization:function(){var t=!1,i=this.get("PPRTYPE");return e.is(i)&&"ORGANIZATION"===i&&(t=!0),t},isContinuous:function(){var t=!1;return e.is(this.collection.dictionary)&&(t=["DELFmiFunctionPPRContinuousReference","ProcessContinuousCreateMaterial","ProcessContinuousProvide","DELContinuousServicePartReference","ContinuousByProduct","ProcessContinuousProvide","MBOMContinuousInProcessItem","MBOMContinuousPhaseReference"].some((function(e){var t=this.collection.dictionary.isAKindOf(e);return t}))),t},parse:function(t,o){var s,r,c=this._parent.apply(this,arguments),l={};if(c)return this._additionalInfo||(this._additionalInfo=e.clone(this.defaultAdditionalInfo)),e.is(i.referenceModelParse)&&i.referenceModelParse(this,c,o),e.is(o)&&e.is(o.request)&&e.is(o.request.method,"string")&&"POST"===o.request.method&&this.setAdditionalInfo({queriedForChildren:!0,queriedForConnections:!0,directConnectionsFetched:!0,inverseConnectionsFetched:!0,queriedForDocuments:!0}),e.is(t.queriedForChildren)&&(l.queriedForChildren=t.queriedForChildren,delete t.queriedForChildren),e.is(t.queriedForConnections)&&(l.queriedForConnections=t.queriedForConnections,delete t.queriedForConnections),e.is(t.directConnectionsFetched)&&(l.directConnectionsFetched=t.directConnectionsFetched,delete t.directConnectionsFetched),e.is(t.inverseConnectionsFetched)&&(l.inverseConnectionsFetched=t.inverseConnectionsFetched,delete t.inverseConnectionsFetched),e.is(t.queriedForDocuments)&&(l.queriedForDocuments=t.queriedForDocuments,delete t.queriedForDocuments),e.is(t.ds6w)&&(l.ds6w=t.ds6w,delete t.ds6w),Object.keys(l).length>0&&this.setAdditionalInfo(l),!c.PID&&e.is(c._results)&&(r=n.translatePredicateToAttribute(c,{type:"entity",fromExpandService:c._results}),c=e.merge(c,r)),e.is(c)&&e.is(this.collection)&&(s={references:{}},e.is(this.collection.get(c.PID))?s.references.update=[c]:s.references.add=[c],this.collection.publishModelChanges(s)),c}});return o})),define("DS/DELPPWIRPCModel/Collections/ReferenceCollection",["UWA/Core","DS/DELPPWIRPCModel/Collections/AbstractIRPCCollection","DS/DELPPWIRPCModel/Model/ReferenceModel","DS/DELPPWWebServices/WebserviceUtils"],(function(e,t,i,n){"use strict";var o=t.extend({name:"ReferenceCollection",comparator:"PID",model:i,_collectionEvents:{},setup:function(){return this._parent.apply(this,arguments)},url:function(){return n.getWebServicesURL()+"/reference"},remove:function(t,i){var n=this,o=[];if((Array.isArray(t)?t:[t]).forEach((function(t){var i;e.is(t)&&(i=e.is(t.has)?t:n.get(t),e.is(i)&&o.push(i.toJSON()))})),o.length>0){let e={references:{remove:o}};this.publishModelChanges(e)}return this._parent.call(this,t,i)}});return o})),define("DS/DELPPWIRPCModel/Model/ConnectionModel",["UWA/Core","DS/DELPPWIRPCModel/Model/AbstractIRPCModel","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWModelParsers/ConnectionParser"],(function(e,t,i,n){"use strict";var o=t.extend({name:"ConnectionModel",defaults:{},getAttribute:function(e){var t=this.get(e);return"to"!==e&&"from"!==e||(t=Array.isArray(t)?t[t.length-1]:t),t},setup:function(t,n){e.is(i.connectionModelSetup)&&i.connectionModelSetup(this,n)},parse:function(t,i){var o,s,r,c,l,a;return t=e.is(t)&&e.is(t.connections)?n.parseAuthoringResponse(t,i):this._parent.apply(this,arguments),e.is(t)&&e.is(t.PID)&&e.is(this.collection)&&(this.collection.get(t.PID)||-1===t.PID.indexOf("ProductImplementLinkOcc|")&&-1===t.PID.indexOf("ProductImplementLink|")||(s=this.collection.findWhere({from:t.from,type:t.type}))&&this.collection.remove(s),e.is(t.from)&&e.is(t.to)&&(r=Array.isArray(t.from)?t.from.slice(-1)[0]:t.from,c=Array.isArray(t.to)?t.to.slice(-1)[0]:t.to,l=this.getAttribute("from"),e.is(l)&&r!==l&&this.collection.removeImpactInfo(l,t.PID),a=this.getAttribute("to"),e.is(a)&&c!==a&&this.collection.removeImpactInfo(a,t.PID),this.collection.addImpactInfo(r,t.PID),this.collection.addImpactInfo(c,t.PID))),e.is(t)&&e.is(this.collection)&&(o={connections:{}},e.is(this.collection.get(t.PID))?o.connections.update=[t]:o.connections.add=[t],this.collection.publishModelChanges(o)),t},destroy:function(){var t,o;return arguments[0]&&!e.is(i.connectionModelSetup)&&(o=arguments[0].onComplete,t=function(t,i){n.parseAuthoringResponse(i),e.is(o)&&o.apply(this,arguments)},arguments[0]=e.merge({onComplete:t},arguments[0])),this._parent.apply(this,arguments)}});return o})),define("DS/DELPPWIRPCModel/Collections/ConnectionCollection",["UWA/Core","DS/DELPPWIRPCModel/Collections/AbstractIRPCCollection","DS/DELPPWIRPCModel/Model/ConnectionModel","DS/DELPPWWebServices/WebserviceUtils"],(function(e,t,i,n){"use strict";var o=t.extend({name:"ConnectionCollection",model:i,url:function(){var e=n.getWebServicesURL();return this._isER?e+="/erconnection":e+="/connection",e},setup:function(t){var i;return e.is(t)&&(i=t.isER,e.is(i,"boolean")&&(this._isER=i)),this.impactedInfo={},this._parent.apply(this,arguments)},useERObjects:function(t){e.is(t,"boolean")&&(this._isER=t)},isER:function(){return this._isER},remove:function(t,i){var n=this,o=[];if((Array.isArray(t)?t:[t]).forEach((function(t){var i;e.is(t)&&(i=e.is(t.has)?t:n.get(t),e.is(i)&&(i.has("from")&&i.has("to")&&i.has("PID")&&(n.removeImpactInfo(i.getAttribute("from"),i.getAttribute("PID")),n.removeImpactInfo(i.getAttribute("to"),i.getAttribute("PID"))),o.push(i.toJSON())))})),o.length>0){let e={connections:{remove:o}};this.publishModelChanges(e)}return this._parent.call(this,t,i)},reset:function(e,t){return this.impactedInfo={},this._parent.call(this,e,t)},getImpactedConnections:function(t,i,n){var o,s,r=this,c=[];return e.is(t)&&e.is(this.impactedInfo[t])&&this.impactedInfo[t].forEach((function(t){s=r.get(t),e.is(s)&&c.push(s)})),i&&e.is(this._byId)&&0===c.length&&(this.referenceCollection._models.forEach((function(e){"VPMReference"===e.get("type")&&(o=e.id)})),s=this.get(n[0]+"|"+t+"|"+o),e.is(s)&&c.push(s)),c},addImpactInfo:function(t,i){e.is(this.impactedInfo[t])||(this.impactedInfo[t]=[]),this.impactedInfo[t].indexOf(i)<0&&this.impactedInfo[t].push(i)},removeImpactInfo:function(t,i){var n;e.is(this.impactedInfo[t])&&(n=this.impactedInfo[t].indexOf(i))>-1&&this.impactedInfo[t].splice(n,1)}});return o}));