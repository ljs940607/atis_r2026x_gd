define("DS/MPFSupportChat/SupportChat",["css!DS/MPFSupportChat/MPFSupportChat"],(()=>{"use strict";const t=Object.freeze({en:"en",fr:"fr",de:"de",es:"es",it:"it",ja:"jp",ko:"ko","pt-BR":"pt-BR",zh:"zh"});class s{constructor(t={}){this.authorizedPaths=t.authorizedPaths||[/.*/],this.deniedPaths=t.deniedPaths||[],this.isProduction=!1!==t.isProduction,window.setInterval(this._updateVisibility.bind(this),600)}addAuthorizedPaths(t={}){(t.authorizedPaths||[]).forEach((t=>{const s=t.toString();this.authorizedPaths.some((t=>t.toString()===s))||this.authorizedPaths.push(t)}))}addDeniedPaths(t={}){(t.deniedPaths||[]).forEach((t=>{const s=t.toString();this.deniedPaths.some((t=>t.toString()===s))||this.deniedPaths.push(t)}))}async init(){try{window.ATGSvcs={eeid:"200106306779",CFG:{"-eeSPA":1}},await this._addCss(),await this._addMainScript(),await Promise.all([this._addOtherScript("/rnt/rnw/javascript/vs/1/vsapi.js"),this._addOtherScript("/vs/1/vsopts.js")]),window.ATGSvcs.start()}catch(t){console.error(t)}}_getBaseUrl(){return`3ds-${t[dsLang]||"en"}.widget.custhelp.com`}_addMainScript(){return new Promise(((t,s)=>{const e=document.createElement("script");e.type="text/javascript",e.src="//static.atgsvcs.com/js/atgsvcs.js",e.onload=t,e.onerror=s,this._injectScriptFirst(e)}))}_addOtherScript(t){return new Promise(((s,e)=>{const i=document.createElement("script");i.type="text/javascript";const a=this._getBaseUrl();i.src=`//${a}${t}`,i.defer=i.async=!0,i.onload=s,i.onerror=e,this._injectScriptFirst(i)}))}_addCss(){return new Promise(((t,s)=>{const e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=this.isProduction?"https://www.3ds.com/statics/thirdparty/chat/1/assets/css/clicktochat.css":"https://statics-qal.itvpc.3ds.com/statics/thirdparty/chat/1/assets/css/clicktochat.css",e.onload=t,e.onerror=s,document.head.appendChild(e)}))}_injectScriptFirst(t){const s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}_isVisible(t){return this.authorizedPaths.some((s=>t.match(s)))&&!this.deniedPaths.some((s=>t.match(s)))}_updateVisibility(){const t=window.location.pathname;if(t!==this.lastPath){this.lastPath=t;const s=document.getElementById("ds-proactivechat-container2");s?this._isVisible(t)?s.classList.remove("mpf-hidden"):s.classList.add("mpf-hidden"):this.lastPath=void 0}}}let e;return Object.freeze({Class:s,run:async function(t){return e?e.addAuthorizedPaths(t):(e=new s(t),await e.init()),e}})}));