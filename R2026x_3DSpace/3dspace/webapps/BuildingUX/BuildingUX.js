/*!  COPYRIGHT DASSAULT SYSTEMES 2023   */
define("DS/BuildingUX/utils/PlatformURL",["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(t){"use strict";var e=null;function i(){return"object"==typeof i.instance?i.instance:(i.instance=this,this)}return i.prototype.initialize=async function(){return new Promise((function(i,n){null===e?t.getPlatformServices({onComplete:function(t){e=t,i()},onFailure:function(t){n(t)}}):i()}))},i.prototype.getPlatformId=function(){return"undefined"!=typeof widget&&null!==widget&&widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise"},i.prototype.getTenantInfo=function(t){for(var i={},n=0;n<e.length;n++)if(e[n].platformId===t){i=e[n];break}return i},i.prototype.getPlatformURL=function(t){if(!1===Array.isArray(e))throw new Error("Platform services not initialize yet");var i=this.getPlatformId(),n=this.getTenantInfo(i);return void 0===n[t]?(console.error("No "+t+" URL available for the tenant ["+i+"]"),null):n[t]},new i})),define("DS/BuildingUX/utils/AppUtils",["DS/PlatformAPI/PlatformAPI","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],(function(t,e,i){"use strict";var n=null,s=null;function o(){return"object"==typeof o.instance?o.instance:(o.instance=this,this)}return o.prototype.getLang=function(){return"undefined"!=typeof widget?widget.lang:"en"},o.prototype.displayNotif=function(t){null===n&&(n=e,i.setNotificationManager(n),i.setStackingPolicy(5));t=UWA.extend({level:"info",sticky:!1},t),n.addNotif(t)},o.prototype.loadAMD=async function(t){return new Promise((e=>{require([t],(t=>{e(t)}))}))},o.prototype.getAppId=function(){if("undefined"!=typeof widget&&null!==widget)return widget.getValue("x3dAppId")?widget.getValue("x3dAppId"):widget.getValue("appId")},o.prototype.getUser=function(){return null==s&&(s=t.getUser()),s},o.prototype.getUserLogin=function(){var t=this.getUser(),e="";return void 0!==t&&(e=t.login),e},o.prototype.getRequestLabel=function(){return this.getUserLogin()+"-"+this.getAppId()+"-"+Date.now()},o.prototype.getSecurityContext=function(){if("undefined"!=typeof widget&&null!==widget)return widget.getValue("xPref_CREDENTIAL")},new o})),define("DS/BuildingUX/utils/FormViewUtils",["DS/WebappsUtils/WebappsUtils"],(function(t){"use strict";const e=new Map,i=["CATIAV5","SOLIDWORKS","NX","CREO","SOLIDEDGE","ALTIUM","INVENTOR","AUTOCAD","CAAUPSAPP","CADENCEALLEGRO","3DEXPERIENCE","EPLAN","SURPAC","CADENCEPULSE","XPEDITIONEDM","ZUKENDSCR","ICAD"];for(var n=0;n<i.length;n++)e.set(i[n],t.getWebappsAssetUrl("BuildingUX","icons/cadmasters/I_CADMaster"+i[n]+".png"));class s{constructor(){return"object"==typeof s.instance?s.instance:(s.instance=this,this)}}return s.prototype.getCADMaster=function(t){return{typeRep:"image",label:t["ds6w:cadMaster"],url:e.get(t["ds6w:cadMaster"])}},new s})),define("DS/BuildingUX/utils/DictionaryMgt",["i18n!DS/BuildingUX/assets/nls/BuildingUX","DS/SearchDictionaryAccess/SearchDictionaryAccessAPI","DS/BuildingUX/utils/PlatformURL","DS/BuildingUX/utils/AppUtils"],(function(t,e,i,n){"use strict";const s="R2019x";function o(){return"object"==typeof o.instance?o.instance:(o.instance=this,this.__mapAttNameNLS={},this)}return o.prototype.getAttNameNLS=function(t){return this.__mapAttNameNLS[t]?this.__mapAttNameNLS[t].label:void 0},o.prototype.retrieveDS6WNLS=function(t){return new Promise((async(e,o)=>{let r=await n.loadAMD("DS/FedDictionaryAccess/FedDictionaryAccessAPI");var a={tenantId:i.getPlatformId(),lang:n.getLang(),apiVersion:s,onComplete:t=>{for(let e=0;e<t.length;e++)this.__mapAttNameNLS[t[e].curi]=t[e];e(this.__mapAttNameNLS)},onFailure:()=>{console.warn("SearchDictionaryAccessAPI.get6wResourcesInfo  == FAILURE"),e(this.__mapAttNameNLS)}};r.getResourcesInfo(t.join(","),a)}))},o.prototype.updateProperties=function(t,o){return new Promise(((r,a)=>{var l={};let c=Object.keys(t);for(let e=0;e<c.length;e++)l[c[e]]=[{value:t[c[e]],source:[o]}];e.getNlsOfSearchValuesBySource(l,{tenantId:i.getPlatformId(),lang:n.getLang(),apiVersion:s,onComplete:function(e){for(let i=0;i<c.length;i++)e[c[i]]&&e[c[i]][t[c[i]]]&&(t[c[i]+"-original"]=t[c[i]],t[c[i]]=e[c[i]][t[c[i]]]);r([])},onFailure:function(e){r(t)}})}))},o.prototype.getPropertiesForClass=async function(t){const e=t.classURIs.split("\n");var i=[];for(let t=0;t<e.length;t+=100){const n=e.slice(t,t+100);try{let t=await this.__splittedPropertiesForClass(n.join("\n"));t&&(i=i.concat(t))}catch(t){console.warn("Cannot retrieve information from "+n)}}return i},o.prototype.__splittedPropertiesForClass=async function(t){return new Promise((async function(e,o){(await n.loadAMD("DS/FedDictionaryAccess/FedDictionaryAccessAPI")).getPropertiesForClass(t,{tenantId:i.getPlatformId(),lang:n.getLang(),apiVersion:s,onComplete:function(t){var i="string"==typeof t?JSON.parse(t):t;e(i)},onFailure:function(t){console.warn("FedDictionaryAccessAPI.getPropertiesForClass failed"),o()}})}))},new o})),define("DS/BuildingUX/routes/NetvibesWS",["DS/BuildingUX/utils/AppUtils","DS/BuildingUX/utils/PlatformURL"],(function(t,e){"use strict";function i(){}return i.prototype.fetchInfos=async function(i){await e.initialize();let n="fetch-"+t.getRequestLabel();i.labelPrefix&&(n=i.labelPrefix+n);let s="";var o=Object.assign({label:n,locale:t.getLang(),tenant:e.getPlatformId(),unescape_slashes_in_attribute_values:!0},i);!0===o.shatteredSGI&&(delete o.shatteredSGI,s="&redirectQueryToSGI=true",o.shatteredFetch=!0);var r=e.getPlatformURL("3DSpace")+"/cvservlet/fetch/v2?tenant="+e.getPlatformId()+s,a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":t.getLang()},data:JSON.stringify(o)},l=t.getSecurityContext();return l&&(r+="&SecurityContext="+l),this.executeRequest(r,a)},i})),define("DS/BuildingUX/routes/WSAccess",["DS/WAFData/WAFData","DS/BuildingUX/utils/AppUtils","DS/BuildingUX/utils/PlatformURL","DS/BuildingUX/routes/NetvibesWS"],(function(t,e,i,n){"use strict";function s(){return"object"==typeof s.instance?s.instance:(s.instance=this,this)}function o(t){return"string"==typeof t&&"{"===t.charAt(0)?JSON.parse(t):t}return s.prototype=Object.assign(s.prototype,n.prototype),s.prototype.__executeRequest=function(e,i,n,s){return!0===s?t.request(e,i):t.authenticatedRequest(e,i)},s.prototype.executeRequest=async function(t,e,i,n){return new Promise(((s,r)=>{e.onComplete=function(t){var e={success:!0};t&&(e=o(t)),s(e)},e.onFailure=function(t,e){e&&(e=o(e)),r(e)},e.onTimeout=function(t,e){e&&(e=o(e)),r(e)},this.__executeRequest(t,e,i,n)}))},s.prototype.retrieveDimensions=async function(){await i.initialize();var t=i.getPlatformURL("3DSpace")+"/resources/dictionary/dimensions?tenant="+i.getPlatformId(),n={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":e.getLang()}};return this.executeRequest(t,n)},s.prototype.fetchI3dx=async function(t){await i.initialize();var n={data:[]};for(let e=0;e<t.i3dx.length;e++)n.data.push({"ds6w:i3dx":t.i3dx[e]});var s=i.getPlatformURL("3DSpace")+"/resources/ConstructionFeat/v1/i3dx/fetch?tenant="+i.getPlatformId(),o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":e.getLang()},data:JSON.stringify(n)};return this.executeRequest(s,o)},new s})),define("DS/BuildingUX/ConstructionUX",["css!DS/BuildingUX/BuildingUX.css","i18n!DS/BuildingUX/assets/nls/BuildingUX","text!DS/BuildingUX/assets/conf/defaultMask.json","DS/BuildingUX/utils/DictionaryMgt","DS/BuildingUX/utils/PlatformURL","DS/BuildingUX/utils/FormViewUtils","DS/BuildingUX/routes/WSAccess","DS/Utilities/Dom","DS/Form/Form","DS/BuildingUX/utils/AppUtils"],(function(t,e,i,n,s,o,r,a,l,c){"use strict";const u=JSON.parse(i);class d{constructor(t){this.options=t||{},this.options=Object.assign({dict:{},att:{},dim:null},this.options),this.elements={},this.elements.container=a.createElement("div",{class:"construction-ux"});let e=sessionStorage.getItem("CONSTRUCTION_PROP_CLASS"),i=sessionStorage.getItem("CONSTRUCTION_PROP_ATT");null!==e&&(this.options.dict=JSON.parse(e),this.options.att=JSON.parse(i));let n=sessionStorage.getItem("CONSTRUCTION_PROP_DIM");null!==n&&(this.options.dim=JSON.parse(n))}}return d.prototype.getContent=function(){return this.elements.container},d.prototype.update=async function(t){let i;if(this.elements.container.innerHTML="",this.options.showLoader(),await this.__retrieveDimensions(),t.i3dx){i=t.i3dx.split("!")[0].split(":")[1]}if("ConstructionFeat"!==i)c.displayNotif({level:"error",message:e.error.wrongDomain});else{let e=await this.__retrieveRscIdFromi3dx(t.i3dx);if(void 0!==e&&(t.resourceid=e,this.options.node=await this.__retrieveCoreFromId(t.resourceid),void 0!==this.options.node)){let t=await this.__retrieveAvailableAtt(),e=await this.__retrieveAttrValue(t);this.options.node=Object.assign(e,this.options.node),await this.__buildForm()}}this.options.hideLoader()},d.prototype.__retrieveRscIdFromi3dx=async function(t){let i,n=await r.fetchI3dx({i3dx:[t]});return 1===n.data.length&&n.data[0]["ds6w:i3dx"]===t?i=n.data[0]["ds6w:identifier"]:c.displayNotif({level:"error",message:e.error.unknownI3dx}),i},d.prototype.__retrieveCoreFromId=async function(t){let i,n=await r.fetchInfos({physicalid:[t],select_predicate:["ds6w:type","interface","ds6w:i3dx"],select_file:[],shatteredSGI:t.length>32});if(n.results&&1===n.results.length){n=n.results[0],i={type:"",exts:[]};for(let t=0;t<n.attributes.length;t++){switch(n.attributes[t].name){case"ds6w:i3dx":i.i3dx=n.attributes[t].value;break;case"ds6w:type":i.type=n.attributes[t].value;break;case"interface":-1===i.exts.indexOf(n.attributes[t].value)&&i.exts.push(n.attributes[t].value);break;default:i[n.attributes[t].name]=n.attributes[t].value}i[n.attributes[t].name]=n.attributes[t].value}}else c.displayNotif({level:"error",message:e.error.unknownI3dx});return i},d.prototype.__retrieveAvailableAtt=async function(){let t=[],e=[];if(void 0===this.options.dict["ds6wg:"+this.options.node.type]&&t.push(this.options.node.type),e.push("ds6wg:"+this.options.node.type),this.options.node.exts.forEach((i=>{void 0===this.options.dict["ds6wg:"+i]&&t.push(i),e.push("ds6wg:"+i)})),t.length>0){(await n.getPropertiesForClass({classURIs:t.join("\n")})).forEach((t=>{this.options.dict[t.classInfo.curi]=[];for(let e=0;e<t.properties.length;e++){let i=t.properties[e];-1===u.attrToIgnore.indexOf(i.curi)&&(-1===this.options.dict[t.classInfo.curi].indexOf(i.curi)&&this.options.dict[t.classInfo.curi].push(i.curi),void 0===this.options.att[i.curi]&&(this.options.att[i.curi]=i,this.options.att[i.curi].definedIn=[]),-1===this.options.att[i.curi].definedIn.indexOf(t.classInfo.curi)&&this.options.att[i.curi].definedIn.push(t.classInfo.curi))}})),sessionStorage.setItem("CONSTRUCTION_PROP_CLASS",JSON.stringify(this.options.dict)),sessionStorage.setItem("CONSTRUCTION_PROP_ATT",JSON.stringify(this.options.att))}let i=[];return e.forEach((t=>{i=i.concat(this.options.dict[t])})),-1!==i.indexOf("ds6w:responsible")&&-1===i.indexOf("owner")&&i.push("owner"),i=[...new Set(i)],i},d.prototype.__retrieveAttrValue=async function(t){let e,i=await r.fetchInfos({physicalid:[this.options.node.resourceid],select_predicate:t,select_file:["icon","thumbnail_2d"],shatteredSGI:this.options.node.resourceid.length>32});if(i.results&&1===i.results.length){i=i.results[0],e={};for(let t=0;t<i.attributes.length;t++)e[i.attributes[t].name]=i.attributes[t].value}return await n.updateProperties(e,"3DSpace"),e},d.prototype.__buildForm=async function(){let t={usePaddingFlag:!1,model:[]},i=[],s={},o=[];this.options.node.exts.forEach((t=>{s["ds6wg:"+t]=[],o.push("ds6wg:"+t)})),await n.retrieveDS6WNLS(["ds6wg:"+this.options.node.type].concat(o));let r=Object.keys(this.options.node);for(let t=0;t<r.length;t++)if(this.options.att[r[t]]){let e=this.__buildFormNode(r[t],this.options.node);-1!==this.options.att[r[t]].definedIn.indexOf("ds6wg:"+this.options.node.type)?i.push(e):1!==this.options.att[r[t]].definedIn.length?console.warn("Att ["+this.options.att[r[t]].curi+"] defined in several extensions ["+JSON.stringify(this.options.att[r[t]].definedIn)+"]"):s[this.options.att[r[t]].definedIn[0]].push(e)}let a=u.mask[this.options.node.type]?u.mask[this.options.node.type]:u.mask.default,c=[];for(let t=0;t<a.length;t++){let e=i.find((e=>e.id===a[t]));e&&(c.push(e),i=i.filter((e=>e.id!==a[t])))}c=c.concat(i),0===this.options.node.exts.length?t.model=c:(t.model.push({id:"constructionGlobal",label:e.construction.attrGlobal,style:"expander",children:c}),this.options.node.exts.forEach((e=>{let i="ds6wg:"+e;if(s[i].length){let o=this.options.dict[i],r={};o.forEach((t=>{r[this.options.att[t].label]=t}));let a=Object.keys(r);a.sort();let l={};s[i].forEach((t=>{l[t.id]=t}));let c=[];for(let t of a)if(l[r[t]])c.push(l[r[t]]);else{let e=this.__buildFormNode(r[t]);c.push(e)}t.model.push({id:e,label:n.getAttNameNLS(i),style:"expander",children:c})}}))),this.elements.form=new l(t),this.elements.form.getContent().addClassName("eno-form"),this.elements.container.innerHTML="",this.elements.container.appendChild(this.elements.form.getContent())},d.prototype.__getUserIcon=function(t){var e=s.getPlatformURL("3DSwym");let i;if(e){i={iconPath:"url("+(e+"/api/user/getpicture/login/"+t)+")",className:"eno-owner-icon owner-url"}}else i={iconName:"topbar-user",fontIconFamily:1,className:"eno-owner-icon owner-font"};return i},d.prototype.__retrieveDimensions=async function(){if(null===this.options.dim){this.options.dim={};let t=await r.retrieveDimensions();if(t&&t.results){for(let e=0;e<t.results.length;e++){let i=t.results[e];this.options.dim[i.Name]=i}sessionStorage.setItem("CONSTRUCTION_PROP_DIM",JSON.stringify(this.options.dim))}}},d.prototype.__buildFormNode=function(t,e){let i="string";switch(this.options.att[t].dataType){case"http://www.w3.org/2001/XMLSchema#dateTime":i="datetime";break;case"http://www.w3.org/2001/XMLSchema#boolean":i="boolean";break;case"http://www.w3.org/2001/XMLSchema#real":i="float";break;case"http://www.w3.org/2001/XMLSchema#integer":i="integer"}let s=e?e[t]:void 0;if(s){switch(i){case"datetime":s=new Date(s);break;case"boolean":s="TRUE"===s.toUpperCase();break;case"float":let e=parseFloat(s);isNaN(e)?console.warn("Att["+this.options.att[t].curi+"] value ["+s+"] is not a float"):s=e;break;case"integer":let i=parseInt(s);isNaN(i)?console.warn("Att["+this.options.att[t].curi+"] value ["+s+"] is not an integer"):s=i}switch(this.options.att[t].curi){case"ds6w:responsible":i="user",s={icon:this.__getUserIcon(e.owner),label:e[t]};break;case"ds6w:type":i="user";let r=n.getAttNameNLS("ds6wg:"+e[t])||e[t]+"_NoNLS";s={icon:{iconPath:e.type_icon_url},label:r};break;case"ds6w:cadMaster":let a=o.getCADMaster(e);i=a.typeRep,s={iconPath:a.url,iconSize:{height:"22px"}}}}let r={id:this.options.att[t].curi,label:this.options.att[t].label,typeRepresentation:i,value:s,readOnly:!0};if(""!==this.options.att[t].dimension&&this.options.dim[this.options.att[t].dimension]){let e=this.options.dim[this.options.att[t].dimension],i={};for(let t=0;t<e.Units.length;t++){let n=e.Units[t];i[n.Name]={label:n.NLSName,ratio:1}}r.typeRepresentation="magnitude",r.semantics={displayOptions:{tolerance:!1,supportedUnits:{magnitude:i},unit:{magnitude:e.MKSUnit}}}}return r},d})),define("DS/BuildingUX/ConstructionFacet",["css!DS/BuildingUX/BuildingUX.css","UWA/Core","DS/BuildingUX/ConstructionUX","UWA/Controls/Abstract","UWA/Class"],(function(t,e,i,n,s){"use strict";var o=require("DS/EditPropWidget/facets/Common/FacetsBase");return s.extend(n,o,{__constructionUX:null,init:function(t){this._parent(t),null===this.__constructionUX&&(this.elements.container=e.createElement("div",{class:"constructionFacet"}),this.__constructionUX=new i({showLoader:this.showLoader.bind(this),hideLoader:this.hideLoader.bind(this)}),this.elements.container.appendChild(this.__constructionUX.getContent()))},updateFacet:function(){var t=this.getModel();if(t){let e=t.get("i3dx");e&&this.__constructionUX.update({i3dx:e})}},destroyComponent:function(){},onRefresh:function(){this.updateFacet()}})})),define("DS/BuildingUX/ConstructionCustomAttrUX",["css!DS/BuildingUX/BuildingUX.css","i18n!DS/BuildingUX/assets/nls/BuildingUX","DS/BuildingUX/routes/WSAccess","DS/Utilities/Dom","DS/Form/Form","DS/BuildingUX/utils/AppUtils"],(function(t,e,i,n,s,o){"use strict";class r{constructor(t){this.options=t||{},this.options=Object.assign({att:{},node:{},dim:null},this.options),this.elements={},this.elements.container=n.createElement("div",{class:"construction-custom-attributes-ux"});let e=sessionStorage.getItem("CONSTRUCTION_PROP_DIM");null!==e&&(this.options.dim=JSON.parse(e))}}return r.prototype.getContent=function(){return this.elements.container},r.prototype.update=async function(t){let i;if(this.elements.container.innerHTML="",await this.__retrieveDimensions(),this.options.showLoader(),t.i3dx){i=t.i3dx.split("!")[0].split(":")[1]}if("ConstructionFeat"!==i)o.displayNotif({level:"error",message:e.error.wrongDomain});else{let e=await this.__retrieveRscIdFromi3dx(t.i3dx);if(void 0!==e){t.resourceid=e;let i=await this.__retrieveCustomAttrValue(t.resourceid);void 0===this.options.node[t.resourceid]&&(this.options.node[t.resourceid]={}),this.options.node[t.resourceid]=i,await this.__buildCustomAttrForm(t.resourceid)}}this.options.hideLoader()},r.prototype.__retrieveRscIdFromi3dx=async function(t){let n,s=await i.fetchI3dx({i3dx:[t]});return 1===s.data.length&&s.data[0]["ds6w:i3dx"]===t?n=s.data[0]["ds6w:identifier"]:o.displayNotif({level:"error",message:e.error.unknownI3dx}),n},r.prototype.__retrieveCustomAttrValue=async function(t){let e=await i.fetchInfos({physicalid:[t],select_predicate:["CustomAttributesJSON"],select_file:["icon","thumbnail_2d"],shatteredSGI:t.length>32}),n={};if(e.results&&1===e.results.length){e=e.results[0];let t=e.attributes.find((t=>"CustomAttributesJSON"===t.name));if(void 0!==t)try{n.CustomAttributesJSON=JSON.parse(t.value)}catch(t){n.CustomAttributesJSON=[]}else n.CustomAttributesJSON=[]}return n},r.prototype.__buildCustomAttrForm=async function(t){let i={usePaddingFlag:!1,model:[]},n={text:e.customAttributes.noAttributes,emphasize:"info"},o={},r=this.options.node[t].CustomAttributesJSON;if(void 0!==r&&r.length){r.forEach((t=>{void 0===o[t.name]&&(o[t.name]=[]);for(const[e,i]of Object.entries(t.attributes)){const n={name:e,value:i.value,dimension:i.dim,type:i.type.toLowerCase()};let s=this.__buildCustomAttrFormNode(t.name,n);o[t.name].push(s)}}));let t=Object.keys(o);if(t.sort(),0===t.length)i.globalInformation=n;else for(const[t,e]of Object.entries(o))if(e.length){let n=[...e].map((t=>t.id));n.sort();let s=[];n.forEach((t=>{let i=e.find((e=>e.id===t));i&&s.push(i)})),i.model.push({id:t,label:t,style:"expander",children:s})}}else i.globalInformation=n;this.elements.form=new s(i),this.elements.form.getContent().addClassName("eno-form"),this.elements.container.innerHTML="",this.elements.container.appendChild(this.elements.form.getContent())},r.prototype.__buildCustomAttrFormNode=function(t,e){let i=void 0!==e.type&&""!==e.type?e.type:"string",n=void 0!==e.value?e.value:"",s=void 0!==e.dimension?e.dimension:"",o=void 0!==e.name?e.name:"";switch("real"===i&&(i="float"),i){case"datetime":n=new Date(n);break;case"boolean":n="TRUE"===n.toUpperCase();break;case"float":let t=parseFloat(n);isNaN(t)?console.warn("Att["+o+"] value ["+n+"] is not a float"):n=t;break;case"integer":let e=parseInt(n);isNaN(e)?console.warn("Att["+o+"] value ["+n+"] is not an integer"):n=e;break;default:if("string"!==i)if(""!==s&&this.options.dim[s]){let t=parseFloat(n);isNaN(t)?console.warn("Att["+o+"] value ["+n+"] is not a float"):n=t}else i="string"}let r={id:t+"_"+o,label:o,typeRepresentation:i,value:n,readOnly:!0};if(""!==s&&this.options.dim[s]){let t=this.options.dim[s],e={};for(let i=0;i<t.Units.length;i++){let n=t.Units[i];e[n.Name]={label:n.NLSName,ratio:1}}r.typeRepresentation="magnitude",r.semantics={displayOptions:{tolerance:!1,supportedUnits:{magnitude:e},unit:{magnitude:t.MKSUnit}}}}return r},r.prototype.__retrieveDimensions=async function(){if(null===this.options.dim){this.options.dim={};let t=await i.retrieveDimensions();if(t&&t.results){for(let e=0;e<t.results.length;e++){let i=t.results[e];this.options.dim[i.Name]=i}sessionStorage.setItem("CONSTRUCTION_PROP_DIM",JSON.stringify(this.options.dim))}}},r})),define("DS/BuildingUX/ConstructionCustomAttrFacet",["css!DS/BuildingUX/BuildingUX.css","UWA/Core","DS/BuildingUX/ConstructionCustomAttrUX","UWA/Controls/Abstract","UWA/Class"],(function(t,e,i,n,s){"use strict";var o=require("DS/EditPropWidget/facets/Common/FacetsBase");return s.extend(n,o,{__constructionCustomAttrUX:null,init:function(t){this._parent(t),null===this.__constructionCustomAttrUX&&(this.elements.container=e.createElement("div",{class:"ConstructionCustomAttrFacet"}),this.__constructionCustomAttrUX=new i({showLoader:this.showLoader.bind(this),hideLoader:this.hideLoader.bind(this)}),this.elements.container.appendChild(this.__constructionCustomAttrUX.getContent()))},updateFacet:function(){var t=this.getModel();if(t){let e=t.get("i3dx");e&&this.__constructionCustomAttrUX.update({i3dx:e})}},destroyComponent:function(){},onRefresh:function(){this.updateFacet()}})}));