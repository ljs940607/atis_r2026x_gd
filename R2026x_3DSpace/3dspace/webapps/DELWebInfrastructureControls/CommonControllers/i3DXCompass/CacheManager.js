define("DS/DELWebInfrastructureControls/CommonControllers/i3DXCompass/CacheManager",["UWA/Core","UWA/Class","DS/DELWebInfrastructureControls/CommonControllers/i3DXCompass/Utils","DS/DELWebInfrastructureControls/CommonControllers/i3DXCompass/Storage","DS/DELWebInfrastructureControls/CommonControllers/i3DXCompass/Object"],(function(t,e,n,r){"use strict";var s,o,l=new r({adapter:"Object",database:"3DCompass"});return e.singleton({setup:function(t,e){s=t,t||(l=null),o=e},setRequestCache:function(t,e){this.setCache(t.url+JSON.stringify(t.data),e)},getRequestCache:function(t){return this.getCache(t.url+JSON.stringify(t.data))},setCache:function(t,e,r){if(l)try{r?(e.cachedChecksum=this._getKeyUID(t+r),l.set(n.getCheckSum(t),e)):l.set(this._getKeyUID(t),e)}catch(t){l=null}},getCache:function(t,e,r){var s=null;if(e||(e=864e5),"dsrtv:"===self.location.protocol&&(e=null,r=null),l)try{r?(s=l.get(n.getCheckSum(t),e))&&s.cachedChecksum!==this._getKeyUID(t+r)&&(s=null):s=l.get(this._getKeyUID(t),e)}catch(t){l=null}return s},_getKeyUID:function(t){var e=n.getCheckSum(t+o+s+"420.1.0");if("dsrtv:"===self.location.protocol){var r=t.split("/");r.length>0&&(e=r[r.length-1])}return e},_getUser:function(){return s}})}));