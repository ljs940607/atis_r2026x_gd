window.define&&define("DS/DELWebInfrastructureControls/CommonControllers/confirmationDialog",["DS/DELWebInfrastructureControls/UWAUtils","DS/Windows/Dialog","DS/Controls/Button","i18n!DS/DELWebInfrastructureControls/assets/nls/DELWebInfrastructureControls"],(function(e,t,i,n){"use strict";var s=t.inherit({name:"ConfirmationDialog",contentVisibleState:!1,publishedProperties:{title:{defaultValue:n.get("Confirm"),type:"string",category:"Appearance"},modalFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},autoCloseFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},resizableFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},activateButtonsIfActionPerformed:{defaultValue:!1,type:"boolean",category:"Behavior"}},init:function(e){e?this.options=Object.assign(this.options||{},e):this.options||(this.options={}),this._parent.apply(this,arguments)},destroy:function(){this._parent.apply(this,arguments),this._closeCallback&&this._closeCallback(),!this._createDlg&&this.options&&this.options._createDlg&&(this._createDlg=this.options._createDlg),this._createDlg&&!this._createDialogDestroyed&&(this._createDialogDestroyed=!0,this._createDlg.destroy())},_postBuildView:function(){this.elements.container.addClassName("confirm_dlg_webUX"),this.elements._modalDiv||(this.elements._modalDiv=this.elements.container.getParent(".wux-windows-modalDialog")),this.elements._modalDiv.addClassName("wux-ui-animation-flipable"),this.elements.container.addClassName("wux-ui-animation-flip-out"),this._parent();var t=this;if(!this.immersiveFrame)if(this.options.immersiveFrame)this.immersiveFrame=this.options.immersiveFrame;else{var s=window.document.getElementsByClassName("wux-windows-immersive-frame");if(s&&s.length)for(var a=0;!this.immersiveFrame&&a<s.length;++a)s[a]&&s[a].dsModel&&(this.immersiveFrame=s[a].dsModel)}this.elements.container.addClassName(this.name+"-dlg"),this.elements.mainDiv=e.createElement("div",{class:this.name+"-maindiv"}).inject(this.elements._contentDiv||this.elements.container),this.buttons={Ok:new i({label:n.get("Confirm"),onClick:function(){t.buttons.Ok.elements.button.addClassName("loading"),t.buttons.Ok.disabled=!0,t.options.onConfirm()}}),Cancel:new i({onClick:function(){t.hideDialog(),t.showCreateDialog()}})},this.elements.mainDiv.innerHTML="<div>"+n.get("Confirm?")+"</div>",this._initEventHandlers()},hideDialog:function(){this.elements.container&&this.elements.container.addClassName("wux-ui-animation-flip-out").removeClassName("wux-ui-animation-flip-in")},showCreateDialog:function(e){!this._createDlg&&this.options._createDlg&&(this._createDlg=this.options._createDlg),this._createDlg.showDialog(e)},showDialog:function(e){this.elements.container&&this.elements.container.removeClassName("wux-ui-animation-flip-out").addClassName("wux-ui-animation-flip-in");var t=e&&e.confirmationMesssage?e.confirmationMesssage:n.get("Confirm?");this.elements.mainDiv.innerHTML="<div>"+t+"</div>"},_initEventHandlers:function(){var e=this;this.addEventListener("close",(function(){e.hideDialog(),e.showCreateDialog()}))}});return s}));