define("DS/DELWebInfrastructureControls/DELWebAddExtensionsWebServices",["UWA/Core","DS/WAFData/WAFData","DS/EditPropExtensions/WebServices/WebServices","DS/DELWebInfrastructureControls/DELWebAjaxModel","i18n!DS/EditPropExtensions/assets/nls/AddExtensionsNLS"],(function(e,t,r,s,n){"use strict";r.constructor.prototype.addInterfaces&&!r.constructor.prototype._addInterfaces&&(r.constructor.prototype._addInterfaces=r.constructor.prototype.addInterfaces,r.constructor.prototype.addInterfaces=function(e,t,n,o,a,c,i){r._addInterfaces(e,t,n,o,a,(function(){c(),s.publishEvent("DELWebAddExtensionsWebServices.addInterfaces",n)}),(function(e){i(e),s.publishEvent("DELWebAddExtensionsWebServices.addInterfaces.error",{data:n,message:e})}))}),r.constructor.prototype.removeInterfaces&&!r.constructor.prototype._removeInterfaces&&(r.constructor.prototype._removeInterfaces=r.constructor.prototype.removeInterfaces,r.constructor.prototype.removeInterfaces=function(e,t,n,o,a,c,i){r._removeInterfaces(e,t,n,o,a,(function(){c(),s.publishEvent("DELWebAddExtensionsWebServices.removeInterfaces",n)}),(function(e){i(e),s.publishEvent("DELWebAddExtensionsWebServices.removeInterfaces.error",{data:n,message:e})}))});var o={};return Object.assign(o,r,{getClassInterfaces:function(s,n,o,a,c,i,u,l){e.log("getClassInterfaces");var f={classes:"VPMReference"};"bus"===c?f={classes:a}:"connection"===c&&(f={relationclass:a});var p={Accept:"application/json","Content-Type":"application/json","Accept-Language":window.widget.lang};s&&(p.SecurityContext=s.SecurityContext);!this.get3DSpaceWSUrl&&r.get3DSpaceWSUrl&&(this.get3DSpaceWSUrl=r.get3DSpaceWSUrl);var g=this.get3DSpaceWSUrl(this.tenant,o,"/resources/dictionary/interfaces","displayAttributes=true&noDeprecated=true&noAbstract=true");t.authenticatedRequest(g,{method:"POST",headers:p,timeout:864e5,data:JSON.stringify(f),type:"json",onComplete:function(t){if(e.log("getClassInterfaces:onComplete"),l&&l.interfaces&&l.interfaces.length&&t&&t.results&&t.results.length&&t.results[0].interfaces&&t.results[0].interfaces.length)for(var r=0;r<t.results.length;++r)if(t.results[r].interfaces){var s=t.results[r].interfaces;t.results[r].interfaces=[];for(var n=0;n<s.length;++n){var o=s[n];o&&o.name&&l.interfaces.indexOf(o.name)>=0&&(e.each(o.attributes,(function(e,t){t.rangeNls&&!t.rangesNls&&(t.rangesNls=t.rangeNls),!t.rangeNls&&t.rangesNls&&(t.rangeNls=t.rangesNls)})),t.results[r].interfaces.push(o))}}i(t)},onFailure:function(e){this.onFailureCallback(u,e)},onTimeout:function(){u("timeout")}})},getObjectInterfaces:function(s,n,o,a,c,i,u,l){e.log("getObjectInterfaces");var f={objects:a},p="/resources/dictionary/object/interfaces";"bus"===c?(f={objects:a},p="/resources/dictionary/object/interfaces"):"connection"===c&&(f={connections:a},p="/resources/dictionary/relation/interfaces");var g={Accept:"application/json","Content-Type":"application/json","Accept-Language":window.widget.lang};if(s)for(s.SecurityContext?g.SecurityContext=s.SecurityContext:"string"==typeof s&&(g.SecurityContext=s);g.SecurityContext&&e.String.contains(g.SecurityContext,"ctx::");)g.SecurityContext=g.SecurityContext.replace("ctx::","");!this.get3DSpaceWSUrl&&r.get3DSpaceWSUrl&&(this.get3DSpaceWSUrl=r.get3DSpaceWSUrl);var d=this.get3DSpaceWSUrl(this.tenant,o,p,"isRoleChecked=true");t.authenticatedRequest(d,{method:"POST",headers:g,timeout:864e5,data:JSON.stringify(f),type:"json",onComplete:function(t){if(e.log("getObjectInterfaces:onComplete"),l&&l.interfaces&&l.interfaces.length&&t&&t.results&&t.results.length&&t.results[0].interfaces&&t.results[0].interfaces.length)for(var r=0;r<t.results.length;++r)if(t.results[r].interfaces){var s=t.results[r].interfaces;t.results[r].interfaces=[];for(var n=0;n<s.length;++n){var o=s[n];o&&o.name&&l.interfaces.indexOf(o.name)>=0&&t.results[r].interfaces.push(o)}}i(t)},onFailure:function(e){this.onFailureCallback(u,e)},onTimeout:function(){e.log("timeout")}})},onFailureCallback:function(t,r){e.log("fail"),e.log(this);var s=t;r&&"object"==typeof r?(r.error&&r.error.Message?s=r.error.Message:r.message&&(s=r.message),e.log(r)):"object"==typeof t&&(t.message.startsWith("NetworkError:")?s=t.message.endsWith('return ResponseCode with value "0"')?n.noConnection:t.message.endsWith('return ResponseCode with value "401"')||t.message.endsWith('return ResponseCode with value "403"')?n.webServiceUnauthorized:n.webServiceError:"null"===t&&(s=n.webServiceError)),t(s,r)}}),o}));