define("DS/DELWebInfrastructureControls/DELWebDocFacet",["UWA/Core","UWA/Controls/Abstract","UWA/Class","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOXAttachmentsUX/AttachmentsPane"],(function(t,e,n,a,c){"use strict";return n.extend(e,a,{_docList:null,init:function(t){this._parent(t),t.platformUrls&&!t.platformUrls.platformId&&(t.platformUrls.platformId=window.widget.data.x3dPlatformId||"OnPremise"),this.platformUrls=t.platformUrls,this.collabSpace=t.collabSpace,this._initUI()},_initUI:function(){this.elements.container=t.createElement("div",{class:"relatedDocumentsv2"}),this.attachmentsPane=null},updateFacet:function(){var t=this,e=function(e){if(e)if(null===t.attachmentsPane){var n={parentObject:{parentId:e},connectorOptions:{fetchSecurityContext:function(){return t.collabSpace||window.widget.getValue("pad_security_ctx")||window.widget.getValue("collabSpace")},platformUrls:t.platformUrls||null}};t.attachmentsPane=new c(n),t.attachmentsPane.inject(t.elements.container)}else{if(!e)return;var a={parentId:e};t.attachmentsPane&&(t.attachmentsPane.show(),t.attachmentsPane.options.parentObject.parentId!==e&&t.attachmentsPane.setParentObject(a))}},n=this.getModel();n?"relationship"===n.get("metatype")?this.getOccurrence().addEventOnce("onChange:properties",(function(){var n=t.getModel();e(n.get("objectId"))})):e(n.get("objectId")):e()},onRefresh:function(){this.updateFacet()}})}));