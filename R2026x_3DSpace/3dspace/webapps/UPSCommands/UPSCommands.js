/*!  COPYRIGHT DASSAULT SYSTEMES 2016   */
define("DS/UPSCommands/commands/UPSAuthCmdCutCopyPaste",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/AppContext","DS/AuthGenericCommands/AuthGenericCmdUtils","DS/AuthGenericCommands/AuthGenericCmdWSAccess","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],(function(e,t,n,a,o,i,s){"use strict";var r=[{modeler:"Unknown type is not yet supported for reparent service",user:i.reparent_failed_unsupported_type_child_unknown},{modeler:"Input parameters are not valid",user:i.ERR_008},{modeler:"Error  from  [moveProductInstance]  Id  [Cannot paste an instance under a terminal reference]",user:s.reparent_failed_target_3DPart},{modeler:"Target for reparent service is invalid",user:s.reparent_failed_target_invalid},{modeler:"cannot be cast to com.dassault_systemes.vplm.modeler.entity.PLMxReferenceEntity",user:i.insert_unsupported_unkowntype_parent,type:s.type_PhysicalProduct},{modeler:"You don't have the required license for this command.",user:i.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"Reparent disabled if parent reference has config modeler",user:s.reparent_failed_parent_config},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"Invalid input parameter source/isInstanceOf",user:s.ERR_IR_820293},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}];return e.extend(t,{defaultOptions:{modeler:"product",version:"1.0",bAllOrNothing:!0,chunkSize:30},_getResourceId:function(e){return Array.isArray(e)&&0!==e.length?e[e.length-1]:""},_getRelationId:function(e){return!Array.isArray(e)||e.length<2?"":e[e.length-2]},_getPathInstance:function(e){for(var t=[],n=e.slice();Array.isArray(n)&&n.length>2;)t.unshift(this._getRelationId(n)),n.length=n.length-2;return t},init:function(e){e.context&&n.setContext(e.context),this._parent(e,{mode:"exclusive",isAsynchronous:!1})},execute:function(e){var t=this,o=e.data.ordering;t.existingChildren={};var r=[],d=e.data.parents.length;console.log("nTarget =",d);for(var l=0;l<d;l++){var u=e.data.parents[l],c=n.getNodesById(t._getResourceId(u))[0];console.log("Target["+l+"] is",n.getName(c));var m={isInstanceOf:t._getResourceId(u),pathArray:u,node:c};o&&(m.order=o);var p=[],h=n.getChildren(c);h&&h.length>0&&h.forEach((function(e){var t=n.getInstance(e);t&&p.push(t)})),t.existingChildren[m.isInstanceOf]=p,r.push(m)}var f=[],v=[];let C=[];var g=e.data.children.length;for(console.log("nSource =",g),l=0;l<g;l++){u=e.data.children[l];var S=t._getResourceId(u),A=n.getNodesById(S)[0];let a=n.getName(A);console.log("Source["+l+"] is");var R=t._getPathInstance(u),y={isInstanceOf:S,instance:t._getRelationId(u)};R.length>0&&(y.pathArray=R),f.push(y),v.push(S),C.push(a)}for(l=0;l<d;l++){var _=r[l].isInstanceOf;A=n.getNodesById(_)[0];let t=n.getName(A);if(!a.canInstantiate(_,v,s.operationAborted_Cycle,t,C,i.insert_unsupported_itself))return void(e.onFailure&&e.onFailure())}for(var D=[],P=0;P<d;P++)for(var U=P===d-1?e.mode:"CopyPaste",E=0;E<g;E++){var N={target:r[P],source:f[E]};"CutPaste"===U&&(N.mode=U),D.push(N)}var O={chunkSize:e.data.chunkSize||t.defaultOptions.chunkSize,requests:D,cbOnProgress:function(e,t,n){console.log("reparentMassOperations.cbOnProgress",t)},cbOnComplete:function(t,a){var o=[],i=[];if(t.getAnswers().forEach((function(e){var a=e.answer;"success"===a.status?(n.author(!0),t.getClientTaskData()?o.push({hasParent:a.hasParent,resourceid:a.childIsInstanceOf,relationid:a.childInstance,instanceName:a.instanceName,originalRelationid:e.request.source.instance,clientTaskData:t.getClientTaskData()}):o.push({hasParent:a.hasParent,resourceid:a.childIsInstanceOf,relationid:a.childInstance,instanceName:a.instanceName,originalRelationid:e.request.source.instance})):i.push(a)})),o.length>0&&e.onSuccess&&(console.log("reparentMassOperations.cbOnComplete done, start refresh onSuccess (",o.length,")"),console.timeEnd("ccp-ws"),e.onSuccess(o)),i.length>0&&e.onFailure){console.log("reparentMassOperations.cbOnComplete done, start refresh onFailure"),console.timeEnd("ccp-ws");const t=i[0].messages[0].split("\n");n.displayNotification({title:t[0],subtitle:null!=t[1]?t[1]:"",msg:null!=t[2]?t[2]:"",eventID:"error"}),e.onFailure({})}}};console.log("reparentMassOperations need to process",D.length,"operation(s)"),console.time("ccp-ws");t._reparentMassOperations(O,e)},_optimize:function(e){for(var t=[],n=e.length,a={},o=0,i=0;i<n;i++){a[l=(d=e[i]).target.isInstanceOf]?a[l].count++:(a[l]={count:1,cacheId:o++},d.target.pathArray&&(a[l].pathArray=d.target.pathArray),this.existingChildren[l].length>0&&(a[l].children=this.existingChildren[l]),d.target.order&&(a[l].order=d.target.order))}var s={};for(var r in a)s[r]={isInstanceOf:r},a[r].pathArray&&(s[r].pathArray=a[r].pathArray),a[r].children&&(s[r].children=a[r].children),a[r].order&&(s[r].order=a[r].order),a[r].count>1&&(s[r].cacheId=a[r].cacheId);for(i=0;i<n;i++){r=(d=e[i]).target.isInstanceOf,d.source.isInstanceOf;var d,l={};void 0===a[r].used?(l=s[r],a[r].used=!0):l={cacheId:s[r].cacheId};var u={target:l,source:d.source};d.mode&&(u.mode=d.mode),t.push(u)}return t},_reparentMassOperations:function(e,t){var i=this,d=e,l="CutPaste"===t.mode?s.reparent_failed:s.insert_existing_failed;return d.cbOnProcess=function(e,t){console.log("reparentMassOperations.cbOnProcess: size=",t.length),t=i._optimize(t),console.log(t);var s=!1;void 0===(s=n.inheritParentLockStatusToChild())&&(s=!1),o.reparent({data:{version:i.defaultOptions.version,bAllOrNothing:i.defaultOptions.bAllOrNothing,lockConnectionAsParent:s,operations:t},modeler:i.defaultOptions.modeler,timeout:6e4,onComplete:function(o){if("success"===(o="string"==typeof o?JSON.parse(o):o).status){o.clientTaskData&&e.addClientTaskData(o.clientTaskData);for(var s=0,d=t.length;s<d;s++){var u=t[s],c=(v=o.results[s]).hasParent;i.existingChildren[c].push(v.childInstance),v.status="success",e.setAnswer(u,v)}}if("failure"===o.status){var m;void 0!==o.messages&&(m=a.buildErrorMessage(o.messages,{remapErrors:r}));var p=l+"\n"+m,h=t[0].target.pathArray;let i=n.getNodesById(t[0].source.isInstanceOf),c=n.getNodesById(t[0].target.isInstanceOf),C={"{child}":n.getName(i[0]),"{parent}":n.getName(c[0]),"{parent_object_title}":n.getName(c[0])};var f=[p=p.replace(/{child}|{parent}|{parent_object_title}/gi,(function(e){return C[e]}))];for(s=0,d=t.length;s<d;s++){u=t[s];var v={status:"failure",messages:f,targets:h};e.setAnswer(u,v)}e.cancel()}},onFailure:function(o,i){console.log("reparentMassOperations.onFailure");var s=void 0;try{var d=JSON.parse(i);d||(d=i),s=a.buildErrorMessage(d.messages,{remapErrors:r})}catch(e){s=o.message}var u=l+"\n"+s,c=t[0].target.pathArray;let m=n.getNodesById(t[0].source.isInstanceOf),p=n.getNodesById(t[0].target.isInstanceOf),h={"{child}":n.getName(m[0]),"{parent}":n.getName(p[0]),"{parent_object_title}":n.getName(p[0])},f=[u=u.replace(/{child}|{parent}|{parent_object_title}/gi,(function(e){return h[e]}))];for(var v=0,C=t.length;v<C;v++){var g=t[v],S={status:"failure",messages:f,targets:c};e.setAnswer(g,S)}e.cancel()}})},new o.MassChunkedRequests(d)}})})),define("DS/UPSCommands/commands/UPSAuthCmdAvailability",["UWA/Class","DS/PADUtils/PADContext","DS/Selection/CSOManager","DS/Utilities/Utils","DS/PADServices/utils/GlobalModelEvents"],(function(e,t,n,a,o){"use strict";const i="pad_component",s="ENO3DView",r="always",d="monoSelection",l="multiSelection",u="empty_no_authoring_or_multiSelection";var c=!0,m=["UPSAuthInsertExistingProductOrPart","UPSAuthUnparent","UPSAuthReplaceByExisting"];return e.extend({init:function(e){var r=this;r._parent(e),r._tokens={};var d=t.get();if(d){"function"==typeof d.getEditMode&&(c=d.getEditMode(),d.addEvent("editModeModified",r._check_onUpdateAuthoring.bind(r))),r.defaultOptions._check_onAdd=a.debounce(r._check_onAdd,200),r.defaultOptions._check_onRemove=a.debounce(r._check_onRemove,200),r.defaultOptions._check_onGroupNodes=a.debounce(r._check_onGroupNodes,200);var l=d.name;if(l===i){r._check_onAdd();var u=d.getPADTreeDocument().getXSO();r._tokens.onAdd2D=u.onPostAdd(r.defaultOptions._check_onAdd.bind(r)),r._tokens.onAdd2D=u.onPostRemove(r.defaultOptions._check_onRemove.bind(r)),r._tokens.onGroupNodes=d.getPADTreeDocument().getModelEvents().subscribe({event:"groupNodes"},(function(){r.defaultOptions._check_onGroupNodes(r,this)})),r._tokens.onGroupNodes=o.subscribe({event:"ENX2DApp/Model/bsd/apply"},(function(){r.defaultOptions._check_onGroupNodes(r,this)})),r._tokens.onGroupNodes=o.subscribe({event:"ENX2DApp/Model/bsd/apply/fail"},(function(){r.defaultOptions._check_onGroupNodes(r,this)}))}l===s&&(r._check_onAdd(),r._tokens.onAdd3D=n.onPostAdd(r.defaultOptions._check_onAdd.bind(r)),r._tokens.onRemove3D=n.onPostRemove(r.defaultOptions._check_onRemove.bind(r)))}var m=this._destroy;this._destroy=function(){void 0!==r._tokens&&(r._tokens.onAdd3D&&(n.unsubscribe(r._tokens.onAdd3D),r._tokens.onAdd3D=void 0),r._tokens.onRemove3D&&(n.unsubscribe(r._tokens.onRemove3D),r._tokens.onRemove3D=void 0)),m.call(r)}},_check_onAdd:function(){var e=this,n=void 0,a=this.defaultOptions.availability;if(a){var o=e._getSelectionCount(),i=!0;if(a===u&&0===o&&(i=!1),i&&!c)return void e._enableCommand(!1);a===r||a===u?n=!0:a===d?n=1===o:a===l&&(n=o>=1)}n&&this.defaultOptions.fnCmdAvailability?e.defaultOptions.fnCmdAvailability((function(a){n=a,t.get().name==s&&m.includes(e.getId())?e._enableCommand(!t.get()._controller.hasReadOnlyRootSelection()&&n):e._enableCommand(n)})):e._enableCommand(n)},_check_onRemove:function(){var e=this,n=void 0,a=this.defaultOptions.availability;if(a){var o=e._getSelectionCount(),i=!0;if(a===u&&0===o&&(i=!1),i&&!c)return void e._enableCommand(!1);a===r||a===u?n=!0:a===d?n=1===o:a===l&&(n=o>=1)}if(t.get().name==s&&m.includes(e.getId())&&t.get()._controller.hasReadOnlyRootSelection())return!1;n&&this.defaultOptions.fnCmdAvailability?e.defaultOptions.fnCmdAvailability((function(t){n=t,e._enableCommand(n)})):e._enableCommand(n)},_check_onUpdateAuthoring:function(e){c=e;var t=this,n=void 0,a=this.defaultOptions.availability;if(a){var o=t._getSelectionCount(),i=!0;if(a===u&&0===o&&(i=!1),i&&!c)return void t._enableCommand(!1);a===r||a===u?n=!0:a===d?n=1===o:a===l&&(n=o>=1)}n&&this.defaultOptions.fnCmdAvailability?this.defaultOptions.fnCmdAvailability((function(e){t._enableCommand(e)})):t._enableCommand(n)},_check_onGroupNodes:function(e,t){if(e.defaultOptions.groupNodesUnavailability){var n=void 0,a=e.defaultOptions.availability;if(a){var o=e._getSelectionCount(),i=!0;if(a===u&&0===o&&(i=!1),i&&!c)return void e._enableCommand(!1);a===r||a===u?n=!0:a===d?n=1===o:a===l&&(n=o>=1)}n&&e.defaultOptions.fnCmdAvailability?e.defaultOptions.fnCmdAvailability((function(t){e._enableCommand(t)})):e._enableCommand(n)}},_getSelectionCount:function(){var e=t.get();if(e&&e.name){if(e.name===i)return e.getPADTreeDocument().getXSO().get().length;if(e.name===s)return n.get().length}return-1},_enableCommand:function(e){!0===e?this.enable():this.disable()},_destroy:function(){this._parent()}})})),define("DS/UPSCommands/UPSCmdUtils",["DS/AuthGenericCommands/AuthGenericCmdWSAccess","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","DS/AuthGenericCommands/AppContext"],(function(e,t,n){"use strict";var a={},o={},i={};function s(e,t){var n=t.commandName,o=i[n];if(void 0!==o[e])return o[e];if(void 0!==a[e]){if(null===a[e])return null;for(var s=a[e],r=s.length,d=0;d<r;d++){if(!0===o[s[d]])return o[e]=!0,!0}return o[e]=!1,!1}}function r(e){for(var t={},n=e.length,i=0;i<n;i++)for(var r=e[i],d=(a[r],o[r]),l=d.length,u=0;u<l;u++){var c=d[u],m=c.params,p=m.commandName;if(null!==t[p]){void 0===t[p]?t[p]={params:m,supported:c.supported}:t[p].supported.push(c.supported);var h=s(r,m);!0===h?t[p].supported.push(r):!1===h&&(m.onComplete(c.supported),t[p]=null)}}for(var f in t)if(null!==t[f]){var v=t[f].supported.filter((function(e,t,n){return n.indexOf(e)===t}));t[f].params.onComplete(v)}e.forEach((function(e){o[e]=void 0}))}return{isTypesAuthorized:function(t){var n=t.commandName;if(!i[n]){i[n]={};var d=i[n];if(t.supported)for(var l in t.supported)d[l]=t.supported[l]}for(var u=[],c=[],m=t.types,p=m.length,h=0;h<p;h++){switch(s(C=m[h],t)){case!0:-1===u.indexOf(C)&&u.push(C);break;case!1:break;case null:void 0===o[C]&&(o[C]=[]),o[C].push({params:t,supported:u});break;default:c.push(C)}}var f=c.length;if(0!==f){var v=[];for(h=0;h<f;h++){var C=c[h],g=!1;void 0===a[C]?(v.push(C),a[C]=null,g=!0):null===a[C]?g=!0:s(C,t)&&u.push(C),!0===g&&(void 0===o[C]&&(o[C]=[]),o[C].push({params:t,supported:u}))}0!==v.length?e.getTypesHierarchy({modeler:"product",data:{types:v},onComplete:function(e){(e="string"==typeof e?JSON.parse(e):e).types_hierarchies.forEach((function(e){var t=e.type,n=e.hierarchy;a[t]=n})),r(v)},onFailure:function(e){r(v)}}):t.onComplete(u)}else t.onComplete(u)},isChildrenTypesAuthorized:function(t){var n=t.commandName;if(!i[n]){i[n]={};var d=i[n];if(t.supported)for(var l in t.supportedChildrenTypes)d[l]=t.supportedChildrenTypes[l]}for(var u=[],c=[],m=t.types,p=m.length,h=0;h<p;h++){var f=m[h];switch(t.supportedChildrenTypes[f]){case!0:-1===u.indexOf(f)&&u.push(f);break;case!1:break;case null:void 0===o[f]&&(o[f]=[]),o[f].push({params:t,supported:u});break;default:c.push(f)}}var v=c.length;if(0!==v){var C=[];for(h=0;h<v;h++){f=c[h];var g=!1;void 0===a[f]?(C.push(f),a[f]=null,g=!0):null===a[f]?g=!0:s(f,t)&&u.push(f),!0===g&&(void 0===o[f]&&(o[f]=[]),o[f].push({params:t,supported:u}))}0!==C.length?e.getTypesHierarchy({modeler:"product",data:{types:C},onComplete:function(e){(e="string"==typeof e?JSON.parse(e):e).types_hierarchies.forEach((function(e){var t=e.type,n=e.hierarchy;a[t]=n})),r(C)},onFailure:function(e){r(C)}}):t.onComplete(u)}else t.onComplete(u)},move3D:function(a){var o=!1;void 0===(o=n.inheritParentLockStatusToChild())&&(o=!1);var i={version:"1.0",bAllOrNothing:!0,lockConnectionAsParent:o,instances:a.instances};e.move3D({data:i,modeler:"product",timeout:12e4,onComplete:function(e){if(a.onComplete){var n=UWA.is(e,"string")?JSON.parse(e):e;"Embedded Component not supported"===n.message&&(n.message=t.authoring_failed_EC),a.onComplete(n)}},onFailure:function(e,n){if(a.onFailure){try{if((i=UWA.is(n,"string")?JSON.parse(n):n).messages&&i.messages.length>0)for(var o=0;o<i.messages.length;o++)"Embedded Component not supported"===i.messages[o]&&(i.messages[o]=t.authoring_failed_EC)}catch(t){var i={messages:[e.message]}}a.onFailure(i)}}})},getTypeHierarchyWSCache:function(){return a}}})),define("DS/UPSCommands/commands/UPSAuthCmdRevisionUpdate",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdRevisionUpdate","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1},l={VPMReference:!0,VPMRepReference:!1,"3DShape":!0,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdRevisionUpdate",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",commandName:s.UPSAuthRevisionUpdate,reportTitle:s.UPSAuthRevisionUpdate_report,commandMode:"TreeList",options:{webInWin:!1,visibleColumn:{IsModified:!0,Title:!0,Revision:!0,Maturity:!0,Type:!0,Responsible:!0,Candidate:!0,ReplaceAction:!0,ExpectedRevision:!0,ExpectedMaturity:!0},EnableByRevision:!0,EnableBubbleup:!0,EnableAutoBubbleup:!0,EnableCompare:!0,EnableFliter:!0},remapErrors:[{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();if(n.length>0){var a=[];n.forEach((function(e){var t=o.getType(e);-1==a.indexOf(t)&&a.push(t)})),i.isTypesAuthorized({commandName:this.className,supported:d,types:a,onComplete:function(n){n.length&&(t=!0),e(t)}})}else e(t)},isValidSelection:function(e,t){o._myContext&&"webInWin"==o._myContext.myContext&&(l={VPMReference:!0,VPMRepReference:!0,"3DShape":!0,Drawing:!0});for(var n=[],a=0;a<e.length;a++){var s=o.getAllDescendants(e[a]);if(s&&s.length)for(var r=0;r<e.length;r++)if(a!==r){var u=e[r];-1!==s.indexOf(u)&&(n.push(u),e.splice(r,1),r=0,a=0)}}var c=[];e.forEach((function(e){c.push(o.getType(e));var t=o.getAllDescendants(e);t&&t.length>0&&t.forEach((function(e){c.push(o.getType(e))}))})),c=c.filter((function(e,t,n){return n.indexOf(e)===t})),i.isChildrenTypesAuthorized({commandName:"UPSAuthCmdRevisionUpdatechildren",supported:d,supportedChildrenTypes:l,types:c,onComplete:function(a){var s={valid:[],validChildrenIDs:[],validDrawingKindChildrenIDs:[],valid3DShapeKindChildrenIDs:[],invalid:[],status:!0},r=i.getTypeHierarchyWSCache();e.forEach((function(e){if(-1!==a.indexOf(o.getType(e))){var t=o.getAllDescendants(e);if(t&&t.length>0){var n=0;t.forEach((function(e){-1!==a.indexOf(o.getType(e))&&(n++,s.validChildrenIDs.push(o.getReference(e)),"3DShape"===o.getType(e)||"webInWin"==o._myContext.myContext&&"3DShape"===e.IsKindOf||r[o.getType(e)]&&-1!==r[o.getType(e)].indexOf("3DShape")?s.valid3DShapeKindChildrenIDs.push(o.getReference(e)):("Drawing"===o.getType(e)||"webInWin"==o._myContext.myContext&&"Drawing"===e.IsKindOf||r[o.getType(e)]&&-1!==r[o.getType(e)].indexOf("Drawing"))&&s.validDrawingKindChildrenIDs.push(o.getReference(e)))})),n>0?s.valid.push(e):(s.invalid.push({node:e,why:"ROOT_NO_CHILD"}),s.status=!1)}else s.invalid.push({node:e,why:"ROOT_NO_CHILD"}),s.status=!1}else s.invalid.push({node:e,why:"BADTYPE"}),s.status=!1})),n.forEach((function(e){s.invalid.push({node:e,why:"CYCLE"}),s.status=!1})),t(s)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdInsertNewDeformedFrom",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdInsertNewDeformedFrom","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1},l={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdInsertNewDeformedFrom",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"empty_no_authoring_or_multiSelection",chunkSize:10,reportTitle:r.insert_deformed_reportTitle,chooser:{precondFilter:'flattenedtaxonomies:"types/VPMReference" AND flattenedtaxonomies:"interfaces/PrdDeformableExtension"',precondFilterAddRoot:'flattenedtaxonomies:"types/VPMReference" AND flattenedtaxonomies:"interfaces/PrdDeformableExtension"',source:["3dspace"],multiSel:!0,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Input parameters are not valid",user:s.ERR_007},{modeler:"Embedded Component not supported",user:r.authoring_failed_EC},{modeler:"ERR_FUN092398",user:r.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:r.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();n.length>0?this.isValidParentSelection(n,(function(n){t=n.status,e(t)})):e(t=!0)},isValidParentSelection:function(e,t){var n=[];e.forEach((function(e){n.push(o.getType(e))})),i.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})},isValidChildrenSelection:function(e,t){var n=[];e.forEach((function(e){n.push(e["ds6w:type_value"])})),i.isTypesAuthorized({commandName:this.className+"_Children",supported:l,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdReplaceByDuplicate",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReplaceByDuplicate","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceByDuplicate",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",commandName:s.UPSAuthReplaceByDuplicate,reportTitle:s.UPSAuthInsertDuplicate_report,chooser:{precondFilter:'(flattenedtaxonomies:"types/VPMReference")',precondFilterDrawing:'(flattenedtaxonomies:"types/Drawing" AND [ds6w:composed]:FALSE)',source:["3dspace"],multiSel:!1,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Error from [ProductOperations : replaceReference] Id [Instance duplication failed] : Error from [PLMxKRefInstanceTemplate : checkAggregationBusinessRules] Id [Instance Aggregation forbidden [S_OK/False]]",user:s.replace_V6_under_V5},{modeler:"Input parameters are not valid",user:r.ERR_007},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1;if(i.isThereARootSelected())e(t);else{var n=i.getSelectedNodes();if(n.length>0){for(let a=0;a<n.length;a++){const o=n[a];if(i._is2DContext()&&i.getParent(o)&&!0===i.getParent(o).isRelationsObjectNode)return void e(t)}var a=[];n.forEach((function(e){a.push(i.getType(e))})),-1===a.indexOf("VPMReference")||-1===a.indexOf("Drawing")&&-1===a.indexOf("3DShape")?o.isTypesAuthorized({commandName:this.className,supported:d,types:a,onComplete:function(t){var o=!0;n.forEach((function(n,i){-1!==t.indexOf(a[i])||e(o=!1)})),e(o)}}):e(t)}else e(t)}},isValidSelection:function(e,t){var n=[];e.forEach((function(e){n.push(i.getType(e))})),o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdReplaceByRevision",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdRevisionUpdate","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!0,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceByRevision",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",commandName:s.UPSAuthReplaceByRevision,reportTitle:s.UPSAuthReplaceByRevision_report,commandMode:"FlatList",options:{webInWin:!1,visibleColumn:{IsModified:!0,Title:!0,Revision:!0,Maturity:!0,Type:!0,Responsible:!0,Candidate:!0,ReplaceAction:!0,ExpectedRevision:!0,ExpectedMaturity:!0},EnableByRevision:!0,EnableBubbleup:!1,EnableAutoBubbleup:!1,EnableCompare:!0,EnableFliter:!0},remapErrors:[{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1;if(i.isThereARootSelected())e(t);else{var n=i.getSelectedNodes();if(n.length>0){for(let a=0;a<n.length;a++){const o=n[a];if(i._is2DContext()&&i.getParent(o)&&!0===i.getParent(o).isRelationsObjectNode)return void e(t)}var a=n[n.length-1],s=i.getType(a);o.isTypesAuthorized({commandName:this.className,supported:d,types:[s],onComplete:function(n){t=-1!==n.indexOf(s),e(t)}})}else e(t)}},isValidSelection:function(e,t){var n=[],a=[],s=i.getSelectedRoots();e.forEach((function(e){if(-1===s.indexOf(e))n.push(e);else{var t=i.getName(e);a.push({node:e,why:"ROOT",name:t})}})),i.getParentWithChild(n).forEach((function(e){var t=e.child,o=n.indexOf(t);if(o>-1){n.splice(o,1);var s=i.getName(t);a.push({node:t,why:"CHILD",name:s,parent:e.parent})}}));var r=[];n.forEach((function(e){r.push(i.getType(e))})),o.isTypesAuthorized({commandName:this.className,supported:d,types:r,onComplete:function(e){var s={valid:[],validDrawingKindChildrenIDs:[],valid3DShapeKindChildrenIDs:[],invalid:[],status:!0},d=[],l=o.getTypeHierarchyWSCache();n.forEach((function(t,o){if(i._myContext&&"webInWin"==i._myContext.myContext)d.push(t),"3DShape"===i.getType(t)||l[i.getType(t)]&&-1!==l[i.getType(t)].indexOf("3DShape")?s.valid3DShapeKindChildrenIDs.push(i.getReference(t)):("Drawing"===i.getType(t)||l[i.getType(t)]&&-1!==l[i.getType(t)].indexOf("Drawing"))&&s.validDrawingKindChildrenIDs.push(i.getReference(t));else if(-1!==e.indexOf(r[o]))d.push(t),"3DShape"===i.getType(t)||l[i.getType(t)]&&-1!==l[i.getType(t)].indexOf("3DShape")?s.valid3DShapeKindChildrenIDs.push(i.getReference(t)):("Drawing"===i.getType(t)||l[i.getType(t)]&&-1!==l[i.getType(t)].indexOf("Drawing"))&&s.validDrawingKindChildrenIDs.push(i.getReference(t));else if(n.indexOf(t)>-1){var u=i.getName(t);a.push({node:t,why:"BADTYPE",name:u})}})),s.valid=d,s.invalid=a,s.status=0===a.length,t(s)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdReorder",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReorder","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReorder",modeler:"product",version:"1.0",availability:"monoSelection",groupNodesUnavailability:!0,remapErrors:[{modeler:"Error  from  [PLMCoreAccess : convertM1IDinPLMID]  Id  [Error while converting Ids: Unable to solve all ids]",user:r.ERR_006},{modeler:"Input parameters are not valid",user:r.ERR_006},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();if(n.length>0){var a=o.getType(n[0]);i.isTypesAuthorized({commandName:this.className,supported:d,types:[a],onComplete:function(n){(t=-1!==n.indexOf(a))&&(t=!o.isParentOfGroupingNode(o.getSelectedNodes()[0])),e(t)}})}else e(t)},isValidParentSelection:function(e,t){var n=o.getType(e);i.isTypesAuthorized({commandName:this.className,supported:d,types:[n],onComplete:function(a){var o={valid:[],invalid:[],status:null};-1!==a.indexOf(n)?(o.valid.push(e),o.status=!0):(o.invalid.push(e),o.status=!1),t(o)}})},isChildrenOrderable:function(e,t){var n=[],a=[];e.forEach((function(e){var t=o.getType(e);n.push(t),-1===a.indexOf(t)&&a.push(t)})),i.isTypesAuthorized({commandName:this.className,supported:d,types:a,onComplete:function(a){var o={valid:[],invalid:[],status:[]};e.forEach((function(e,t){-1!==a.indexOf(n[t])?(o.valid.push(e),o.status.push(!0)):(o.invalid.push(e),o.status.push(!1))})),t(o)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdInsertExistingProductOrPart",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdInsertExisting","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1},l={VPMReference:!0,VPMRepReference:!0,"3DShape":!0,Drawing:!0},u={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdInsertExisting",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"empty_no_authoring_or_multiSelection",chunkSize:10,reportTitle:r.insert_reportTitle,chooser:{precondFilter:'(flattenedtaxonomies:"types/VPMReference" OR (flattenedtaxonomies:"types/VPMRepReference" AND [ds6w:composed]:FALSE))',precondFilterAddRoot:'(flattenedtaxonomies:"types/VPMReference" OR (flattenedtaxonomies:"types/VPMRepReference" AND [ds6w:composed]:FALSE))',source:["3dspace"],multiSel:!0,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Input parameters are not valid",user:s.ERR_007},{modeler:"Embedded Component not supported",user:r.authoring_failed_EC},{modeler:"ERR_FUN092398",user:r.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:r.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();n.length>0?this.isValidParentSelection(n,(function(n){t=n.status,e(t)})):e(t=!0)},isValidParentSelection:function(e,t){var n=[];e.forEach((function(e){n.push(o.getType(e))})),i.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})},isValidChildrenSelection:function(e,t){var n=[];e.forEach((function(e){n.push(e["ds6w:type_value"])})),i.isTypesAuthorized({commandName:this.className+"_Children",supported:l,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})},isValidRootSelection:function(e,t){var n=[];e.forEach((function(e){n.push(e["ds6w:type_value"])})),i.isTypesAuthorized({commandName:this.className+"_AddRoot",supported:u,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdUpdateRevOnEntireStructure",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdUpdateRevOnEntireStructure","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!0,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"AuthGenericCmdUpdateRevOnEntireStructure",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",commandName:s.UPSAuthCmdUpdateRevOnEntireStructure,confirmationTitle:s.UPSAuthCmdUpdateRevOnEntireStructure_confirmation,reportTitle:s.UPSAuthCmdUpdateRevOnEntireStructure_report,remapErrors:[{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1,n=i.getSelectedNodes()[0],a=i.getType(n);o.isTypesAuthorized({commandName:this.className,supported:d,types:[a],onComplete:function(n){t=-1!==n.indexOf(a),e(t)}})},isValidSelection:function(e,t){for(var n=[],a=0;a<e.length;a++){var s=i.getAllDescendants(e[a]);if(s&&s.length)for(var r=0;r<e.length;r++)if(a!==r){var l=e[r];-1!==s.indexOf(l)&&(n.push(l),e.splice(r,1),r=0,a=0)}}var u=[];e.forEach((function(e){u.push(i.getType(e))})),o.isTypesAuthorized({commandName:this.className,supported:d,types:u,onComplete:function(n){var a={valid:[],invalid:[],status:!0},o=[];e.forEach((function(e,t){-1!==n.indexOf(u[t])?-1===o.indexOf(e.options.resourceid)&&(a.valid.push(e),o.push(e.options.resourceid)):(a.invalid.push({node:e,why:"BADTYPE"}),a.status=!1)})),t(a)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdReplaceProductConfiguration",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReplaceProductConfiguration","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceProductConfiguration",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",reportTitle:s.UPSAuthCmdReplaceByConfiguration_report,chooser:{precondFilter:'(flattenedtaxonomies:"types/VPMReference")',source:["3dspace"],multiSel:!1,advanced_search:{ups:!0}},remapErrors:[{modeler:"Error from [ProductOperations : replaceReference] Id [Instance duplication failed] : Error from [PLMxKRefInstanceTemplate : checkAggregationBusinessRules] Id [Instance Aggregation forbidden [S_OK/False]]",user:s.replace_V6_under_V5},{modeler:"Input parameters are not valid",user:r.ERR_007},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1;if(i.isThereARootSelected())e(t);else{var n=i.getSelectedNodes();if(n.length>0){for(let a=0;a<n.length;a++){const o=n[a];if(i._is2DContext()&&i.getParent(o)&&!0===i.getParent(o).isRelationsObjectNode)return void e(t)}var a=[];n.forEach((function(e){a.push(i.getType(e))})),o.isTypesAuthorized({commandName:this.className,supported:d,types:a,onComplete:function(t){var o=!0;n.forEach((function(n,i){-1!==t.indexOf(a[i])||e(o=!1)})),e(o)}})}else e(t)}},isValidSelection:function(e,t){var n=[];e.forEach((function(e){n.push(i.getType(e))})),o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})},isValidReplacer:function(e,t){var n=e["ds6w:type_value"];o.isTypesAuthorized({commandName:this.className,supported:d,types:[n],onComplete:function(e){var a=-1!==e.indexOf(n);t(a)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdUnparent",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdUnparent","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!0,"3DShape":!0,Drawing:!0,CATProduct:!0,CATPart:!0,CATShape:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdUnparent",modeler:"product",version:"1.0",availability:"multiSelection",bAllOrNothing:!1,chunkSize:30,commandName:s.UPSAuthDetach,reportTitle:s.UPSAuthDetach_report,remapErrors:[{modeler:"Error  from  [PLMCoreAccess : convertM1IDinPLMID]  Id  [Error while converting Ids: Unable to solve all ids]",user:r.ERR_008},{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1;if(o.isThereARootSelected())e(!1);else{var n=o.getSelectedNodes();if(n.length>0){for(let a=0;a<n.length;a++){const i=n[a];if(o._is2DContext()&&o.getParent(i)&&!0===o.getParent(i).isRelationsObjectNode)return void e(t)}var a=n[n.length-1],s=o.getType(a);i.isTypesAuthorized({commandName:this.className,supported:d,types:[s],onComplete:function(n){t=-1!==n.indexOf(s),e(t)}})}else e(t)}},isValidSelection:function(e,t){var n=[];e.forEach((function(e){n.push(o.getType(e))})),i.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdReplaceByLatestRevision",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReplaceByLatestRevision","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!0,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceByLatestRevision",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",commandName:s.UPSAuthReplaceByLatestRevision,reportTitle:s.UPSAuthReplaceByLatestRevision_report,remapErrors:[{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1;if(i.isThereARootSelected())e(t);else{var n=i.getSelectedNodes();if(n.length>0){for(let a=0;a<n.length;a++){const o=n[a];if(i._is2DContext()&&i.getParent(o)&&!0===i.getParent(o).isRelationsObjectNode)return void e(t)}var a=n[n.length-1],s=i.getType(a);o.isTypesAuthorized({commandName:this.className,supported:d,types:[s],onComplete:function(n){t=-1!==n.indexOf(s),e(t)}})}else e(t)}},isValidSelection:function(e,t){var n=[];e.forEach((function(e){n.push(i.getType(e))})),o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdInsertProductConfiguration",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdInsertProductConfiguration","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1},l={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdInsertProductConfiguration",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",chunkSize:50,chooser:{precondFilter:'flattenedtaxonomies:"types/VPMReference"',source:["3dspace"],multiSel:!1,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Input parameters are not valid",user:s.ERR_007},{modeler:"Embedded Component not supported",user:r.authoring_failed_EC},{modeler:"ERR_FUN092398",user:r.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:r.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();n.length>0?this.isValidParentSelection(n,(function(n){t=n.status,e(t)})):e(t)},isValidParentSelection:function(e,t){var n=[];e.forEach((function(e){n.push(o.getType(e))})),i.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})},isValidChildrenSelection:function(e,t){var n=[];e.forEach((function(e){n.push(e["ds6w:type_value"])})),i.isTypesAuthorized({commandName:this.className+"_Children",supported:l,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdInsertDuplicate",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdInsertDuplicate","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1},l={VPMReference:!0,VPMRepReference:!0,"3DShape":!0,Drawing:!0},u={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdInsertDuplicate",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"empty_no_authoring_or_multiSelection",chunkSize:10,commandName:r.UPSAuthInsertDuplicate,reportTitle:r.UPSAuthInsertDuplicate_report,chooser:{precondFilter:'(flattenedtaxonomies:"types/VPMReference" OR (flattenedtaxonomies:"types/VPMRepReference" AND [ds6w:composed]:FALSE))',precondFilterAddRoot:'(flattenedtaxonomies:"types/VPMReference" OR (flattenedtaxonomies:"types/VPMRepReference" AND [ds6w:composed]:FALSE))',source:["3dspace"],multiSel:!0,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Input parameters are not valid",user:s.ERR_007},{modeler:"Embedded Component not supported",user:r.authoring_failed_EC},{modeler:"ERR_FUN092398",user:r.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:r.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();n.length>0?this.isValidParentSelection(n,(function(n){t=n.status,e(t)})):e(t=!0)},isValidParentSelection:function(e,t){var n=[];e.forEach((function(e){n.push(o.getType(e))})),i.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})},isValidChildrenSelection:function(e,t){var n=[];e.forEach((function(e){n.push(e["ds6w:type_value"])})),i.isTypesAuthorized({commandName:this.className+"_Children",supported:l,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})},isValidRootSelection:function(e,t){var n=[];e.forEach((function(e){n.push(e["ds6w:type_value"])})),i.isTypesAuthorized({commandName:this.className+"_AddRoot",supported:u,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})}}})})),define("DS/UPSCommands/commands/UPSAuthCmdReplaceByExisting",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReplaceByExisting","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],(function(e,t,n,a,o,i,s,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!0,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceByExisting",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",reportTitle:s.UPSAuthCmdReplaceByExisting_report,chooser:{precondFilter:'(flattenedtaxonomies:"types/VPMReference")',precondFilterDrawing:'(flattenedtaxonomies:"types/Drawing" AND [ds6w:composed]:FALSE)',precondFilter3DShape:'(flattenedtaxonomies:"types/3DShape" AND [ds6w:composed]:FALSE)',source:["3dspace"],multiSel:!1,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Error from [ProductOperations : replaceReference] Id [Instance duplication failed] : Error from [PLMxKRefInstanceTemplate : checkAggregationBusinessRules] Id [Instance Aggregation forbidden [S_OK/False]]",user:s.replace_V6_under_V5},{modeler:"Input parameters are not valid",user:r.ERR_007},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:s.authoring_failed_EC},{modeler:"ERR_FUN092398",user:s.ERR_FUN092398},{modeler:"VDRPContext is mandatory in operations involving VDRP types",user:s.ER_IR_1364462}],fnCmdAvailability:function(e){var t=!1;if(i.isThereARootSelected())e(t);else{var n=i.getSelectedNodes();if(n.length>0){for(let a=0;a<n.length;a++){const o=n[a];if(i._is2DContext()&&i.getParent(o)&&!0===i.getParent(o).isRelationsObjectNode)return void e(t)}var a=[];n.forEach((function(e){a.push(i.getType(e))})),-1!==a.indexOf("VPMReference")&&(-1!==a.indexOf("Drawing")||-1!==a.indexOf("3DShape"))||-1!==a.indexOf("Drawing")&&-1!==a.indexOf("3DShape")?e(t):o.isTypesAuthorized({commandName:this.className,supported:d,types:a,onComplete:function(t){var o=!0;n.forEach((function(n,i){-1!==t.indexOf(a[i])||e(o=!1)})),e(o)}})}else e(t)}},isValidSelection:function(e,t){var n=[];e.forEach((function(e){n.push(i.getType(e))})),o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach((function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)})),t(o)}})},isValidReplacer:function(e,t){var n=e["ds6w:type_value"];o.isTypesAuthorized({commandName:this.className,supported:d,types:[n],onComplete:function(e){var a=-1!==e.indexOf(n);t(a)}})}}})}));