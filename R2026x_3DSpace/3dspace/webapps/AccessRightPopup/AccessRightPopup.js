define("DS/AccessRightPopup/AccessRightPopup",["UWA/Controls/Abstract","DS/AccessRightWidget/AccessRightWidget","DS/ENOFloatingPanel/ENOFloatingPanel","DS/WidgetServices/WidgetServices","i18n!DS/AccessRightWidget/assets/nls/langAR","css!DS/AccessRightPopup/AccessRightPopup.css"],(function(e,t,i,n,s){"use strict";return e.extend({defaultOptions:{className:"",ForbiddenChar:'"#$@%,?\\<>[]|:',readOnly:"auto",displayWarningForAutoRO:!1,serverName:"",serverUri:"",removeAtClose:!1},init:function(e,t,i){this._parent(i),this.selItems=[],this.initUI(e,t)},onRefresh:function(){null!=this.ARWidget&&this.ARWidget.onRefresh()},onResize:function(){null!=this.ARWidget&&this.ARWidget.onResize()},initUI:function(e,n){var s=this;s.ARWidget=new t(e,n,{className:"accessRight_innerComponent",ForbiddenChar:s.options.ForbiddenChar,readOnly:s.options.readOnly,showTopBar:!1,topClassHeight:"ARP_PopupDial",activeMultisel:!0,serverName:this.options.serverName,serverUri:this.options.serverUri,events:{onCancel:function(){s.close()},onTitleChange:function(e){s.container.setTitle(e),s.container.elements.body.setStyle("padding-top","2px"),s.container.elements.body.setStyle("padding-bottom","2px"),s.container.elements.body.setStyle("padding-left","6px"),s.container.elements.body.setStyle("padding-right","6px")}}}),s.container=new i({title:"ENOVIA",className:"ARP_PopupDial "+this.options.className,footer:s.ARWidget.getTopBar(),body:s.ARWidget,overlay:!0,closable:!0,animate:!0,autocenter:!0,resizable:!0,limitParent:!0,events:{onResizeFloating:function(){s.ARWidget&&s.onResize()},onClose:function(){s.close()}}}),s.container.inject(n);var o=n.offsetHeight>550?550:n.offsetHeight;s.container.setNewSize({height:o})},show:function(e){var t=[],i=this;null!=e&&(t=e.slice()),t.forEach((function(e){n.arrayContains(i.selItems,e,(function(e){return e.physicalId}))<0&&i.selItems.push(e)})),null!=e&&Array.isArray(e)&&(1==e.length?i.container.setTitle(s.get("AR_mainTile")+" - "+e[0].name):i.container.setTitle(s.get("AR_mainTile")+" - "+i.selItems.length+" "+s.get("AR_Objects"))),i.container.show(),i.container.elements.body.setStyle("height","79.9%"),i.ARWidget.initData(e)},close:function(){this.container.hide(),!0===this.options.removeAtClose&&(this.container.destroy(),this.ARWidget.destroy()),this.dispatchEvent("onClose")}})}));