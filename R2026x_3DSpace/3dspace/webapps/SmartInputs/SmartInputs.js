define("DS/SmartInputs/Base",["UWA/Core","UWA/Event","UWA/Controls/Abstract","DS/Core/Core","DS/CoreEvents/ModelEvents"],(function(t,e,n,s,i){"use strict";function a(t){var e=String(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?Number(e[2]):0)):0}return n.extend({defaultOptions:{label:null,constraints:null,value:[],units:"mm",size:"small"},init:function(t){this._parent(t),this._modelEvents=new i,this._buildLeftView(),this._buildInternalView&&this._buildInternalView(),this._buildRightView(),this._proxifyEvents(),this.setValue(this.options.value,!0)},_buildLeftView:function(){this.elements.container=new t.Element("div",{class:"wux-ui-stack-h wux-smartinputs-base wux-ui-size-"+this.options.size+" "+this._smartInputClass,styles:{display:this.options.label&&""!==this.options.label?"block":"inline-block"}})},_addElement:function(e,n){var s=this,i=new t.Element("div",{class:"wux-smartinputs-slider-container",html:e,styles:n}).inject(this.elements.container);return e.addEvent("change",(function(){if(s.updateModel){var t=s.updateModel.call(s);s.setValue(t,!0)}else s.setValue(this.getValue("float"),!0)})),i},_buildRightView:function(){this.elements.unit=new t.Element("div",{class:"wux-smartinputs-units",html:this.options.units}).inject(this.elements.container)},_proxifyEvents:function(){this.addEvent("change",(function(){this.updateView&&this.updateView()}))},_getValue:function(t){switch(t){case"string":return this._value.toString();case"integer":return parseInt(this.getValue("string"),10);case"float":var e=a(this.options.constraints.stepValue);return parseFloat(parseFloat(this.getValue("string")).toFixed(e));default:return this._value}},getValue:function(t){return this._getValue(t)},constraintValue:function(){var t=this,e=[];this.getValue().forEach((function(n,s){e.push(t._constraintValue(n,s))}))},getConstraints:function(t){var e=[];return this.options.constraints&&(this.options.constraints instanceof Array?e=this.options.constraints:e.push(this.options.constraints)),void 0!==t?e[t]:e},_constraintValue:function(t,e){var n=this.getConstraints(e);if(n){void 0!==n.maxValue&&null!==n.maxValue&&t>n.maxValue&&(t=n.maxValue),void 0!==n.minValue&&null!==n.minValue&&t<n.minValue&&(t=n.minValue);var s=Math.round(t/n.stepValue)*n.stepValue,i=a(n.stepValue);this._value[e]=parseFloat(s).toFixed(i)}return this._value[e]},_subscribe:function(t,e){return this._modelEvents.subscribe({event:t},e)},addEvent:function(t,e){return this._subscribe(t,e)},addEventListener:function(t,e){return this._subscribe(t,e)},setValue:function(t,e){var n=this;if(void 0===e&&(e=!0),t instanceof Array)this._value=t;else{var s=[];s.push(t),this._value=s}this.constraintValue(),void 0!==this._value.length&&1===this._value.length&&(this._value=this._value[0]),this.updateView&&this.updateView(),e&&n._modelEvents.publish({context:n,event:"change",data:n})}})})),define("DS/SmartInputs/Number",["UWA/Core","UWA/Event","UWA/Controls/Abstract","DS/Core/Core","DS/CoreEvents/ModelEvents","DS/SmartInputs/Base","DS/Controls/Gauge","DS/Core/PointerEvents"],(function(t,e,n,s,i,a,o,l){"use strict";return a.extend({defaultOptions:{label:null,constraints:{minValue:null,maxValue:null,stepValue:1},value:0,graduations:2,units:"mm"},_smartInputClass:"wux-smartinputs-number",init:function(t){console.debug("[DS/SmartInputs/Number] Component is deprecated. Migrate to 'DS/Controls/SpinBox' or 'DS/Controls/Slider'."),this._parent(t)},_buildInternalView:function(){var e=this;this.elements.sliderContainer=new t.Element("div",{class:"wux-smartinputs-slider-container",styles:{display:this.options.label?"block":"inline-block"}});var n=this.getConstraints(0);this.elements.slider=new o({snap:0,value:this.options.value[0]||this.options.value,minValue:n.minValue,maxValue:n.maxValue,stepValue:n.stepValue,graduations:this.options.graduations,showCursorLabel:!1,graduationsLabel:!0,dynamicGraduations:!1,dynamicGaugeColor:!1}).inject(this.elements.sliderContainer),this.elements.slider.addEvent("change",(function(){e.setValue(this.getValue())})),this.options.label&&(this.elements.label=new t.Element("div",{class:"wux-smartinputs-slider-container-label",html:this.options.label}).inject(this.elements.container)),this.elements.inputContainer=new t.Element("div",{class:"wux-smartinputs-field-container"}).inject(this.elements.container),this.elements.spinnerContainer=new t.Element("div",{class:"wux-smartinputs-spinner",styles:{marginLeft:-2}}).inject(this.elements.container);var s,i,a=this.options.value[0]||this.options.value;this.options.constraints&&(a=(this.options.constraints.maxValue?this.options.constraints.maxValue:a)+(this.options.constraints.stepValue?this.options.constraints.stepValue:1)),this.elements.inputField=new t.Element("input",{class:"wux-smartinputs-field",type:"text",styles:{marginLeft:this.options.label?50:0,width:6*(a.toString().length+1)},events:{change:function(t){var n=parseFloat(this.value);e.setValue(n)},mousewheel:function(n){t.Event.wheelDelta(event)>0?e.increment():e.decrement()}}}).inject(this.elements.inputContainer),this.elements.up=new t.Element("div",{html:"&#9652;",class:"wux-smartinputs-spinner-button","data-inc":"up",events:{mouseout:function(t){clearInterval(s)}}}).inject(this.elements.spinnerContainer),document.addEventListener(l.POINTERUP,(function(t){t.stopPropagation(),clearTimeout(i),clearInterval(s)})),this.elements.up.addEvent(l.POINTERUP,(function(t){t.stopPropagation(),clearTimeout(i),clearInterval(s),e.increment()})),this.elements.up.addEvent(l.POINTERDOWN,(function(t){t.stopPropagation(),i=setTimeout((function(){s=setInterval((function(){e.increment()}),100)}),100)})),this.elements.down=new t.Element("div",{html:"&#9662;",class:"wux-smartinputs-spinner-button","data-inc":"down"}).inject(this.elements.spinnerContainer),this.elements.down.addEvent(l.POINTERUP,(function(t){t.stopPropagation(),clearInterval(s)})),this.elements.down.addEvent(l.POINTERDOWN,(function(t){t.stopPropagation(),s=setInterval((function(){e.decrement()}),100)}))},increment:function(){var t=this.getConstraints(0);this.setValue(this.getValue("float")+t.stepValue)},decrement:function(){var t=this.getConstraints(0);this.setValue(this.getValue("float")-t.stepValue)},updateView:function(){if(this.elements.inputField){var t=(e=this.options.constraints.stepValue,(n=String(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(n[1]?n[1].length:0)-(n[2]?Number(n[2]):0)):0);this.elements.inputField.value=this.getValue("float").toFixed(t)}var e,n;this.elements.slider&&this.elements.slider.setValue(this.getValue("float"),!1)}})})),define("DS/SmartInputs/VectorN",["UWA/Core","UWA/Event","UWA/Controls/Abstract","DS/Core/Core","DS/SmartInputs/Base","DS/SmartInputs/Number"],(function(t,e,n,s,i,a){"use strict";return i.extend({defaultOptions:{label:null,constraints:{minValue:-1e3,maxValue:1e3,stepValue:1},value:0,graduations:2,units:"mm"},_smartInputClass:"wux-smartinputs-VectorN",init:function(t,e,n){this._numberOfComponents=e,this._type=n,this._parent(t),this._internalValue=[]},_buildInternalView:function(){this.elements.vectorComponents=[];for(var t=0;t<this._numberOfComponents;t++){var e=this.getConstraints(t)||this.getConstraints(0),n=new a({value:this.options.value[t],constraints:e,graduations:this.options.graduations,units:""});this.elements.vectorComponents.push(n),this._addElement(n)}},updateView:function(){for(var t=0;t<this._numberOfComponents;t++)this.elements.vectorComponents[t].setValue(this.getValue()[t],!1)},updateModel:function(){for(var t=[],e=0;e<this._numberOfComponents;e++)t.push(this.elements.vectorComponents[e].getValue("float"));return t}})})),define("DS/SmartInputs/Vector3",["UWA/Core","UWA/Event","UWA/Controls/Abstract","DS/Core/Core","DS/SmartInputs/VectorN"],(function(t,e,n,s,i){"use strict";return i.extend({defaultOptions:{label:null,minValue:0,maxValue:360,value:[0,0,0],stepValue:.1,graduations:2,units:"mm",view:"simple"},_smartInputClass:"wux-smartinputs-Vector3",init:function(t){console.debug("[DS/SmartInputs/Number] Component is deprecated. Migrate to 'DS/Controls/SpinBox' or 'DS/Controls/Slider'."),this._parent(t,3)}})}));