var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebDressupServices/ViewerUtils",["require","exports","DS/VCXWebVisualization/VCXVisuManager","DS/Visualization/WebGLV6Viewer","DS/Visualization/Viewpoint"],(function(e,t,r,i,n){"use strict";i=__importDefault(i),n=__importDefault(n);return class{static createViewer(e,t,a,o){let g=e.getManager("VCXContextManager").getRootNode();var s=r.getViewerOptions();s.div=t,s.planeV2=o.planeV2;let l=new i.default(s);l.setIdPathMatcher(o.getIdPathMatcher());let d=new n.default({viewer:l,angle:45});l.setHighlight(!1),l.addViewpoint(d),l.displayPoints(!0),l.setReferenceAxisSystem(!1);var p=l.getRobot();p&&p.setVisibility(!1),l.setOIT(!0);var u=e.getManager("VCXDressupManager")?.QueryInterface("W3AISGNodeHolder")?.getSGNode();u&&l.addNode(u),l.addNode(g),l.getSceneGraphOverrideSetManager().pushSceneGraphOverrideSet(e.getManager("VCXContextManager").getSharedSceneGraphOverrideSet());var V=o.currentViewpoint;d.setProjectionType(V.getProjectionType()),d.setPixelCulling(V.camera.pixelCulling),d.getControl().setRotationRolling(!1),d.setAngle(V.getAngle()),d.setEyePosition(V.getEyePosition().clone()),d.setTarget(V.getTarget().clone()),d.setUpDirection(V.getUpDirection().clone()),e.getManager("VCXContextManager").addViewer(a,l);let c=e.getManager("VCXContextManager").getActiveViewport();if(!c)return;let h=c.QueryInterface("VCXIModifiable");if(h){var f=h.GetProperties();h._forceRefresh=!0,f.onEachProperty((function(e,t){h&&h.OnChangeProperty(e,t.GetPropertyValue())})),h.OnChangePropertiesEnd();var C=h.QueryInterface("W3AISGNodeHolder");return C&&C.setSGNodeDirty(!0),h._forceRefresh=!1,h.GetObject().setLightingMode(h.GetPropertyValue("Render.Lighting.Override"),h.GetPropertyValue("Render.Lighting.Mode"),h.GetPropertyValue("Render.Lighting.Intensity"),h.GetPropertyValue("Render.Lighting.Static")),l}}static disposeViewer(e,t,r){for(;r.getRootNode().getChildren().length;)r.getRootNode().removeChild(r.getRootNode().getChildren()[0]);r.removeViewpoint(0),r.dispose(),e.getManager("VCXContextManager")?.removeViewer(t)}}}));