define("DS/DMUBaseWebValidation/EXPValHighlight",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D"],(function(e,t){"use strict";return e.extend({init:function(i,n){this._parent(i,n);var s=this;this.addParameters([{name:"sPresentationSlideID",type:"string",JSONname:""},{name:"sRating",type:"string",JSONname:""},{name:"sRepRefMarkupID",type:"string",JSONname:""},{name:"lChangeActionIDs",type:"listStrings",JSONname:"",defaultValue:[]},{name:"lIssuesIDs",type:"listStrings",JSONname:"",defaultValue:[]},{name:"lTasksIDs",type:"listStrings",JSONname:"",defaultValue:[]},{name:"lAssociatedChecks",type:"listStrings",JSONname:"",defaultValue:[]},{name:"creationTime",type:"string",JSONname:""}]),this.setValType("DMUValidationExposedPresentation");var r=new t("Highlight");r.getDMUType=this.getType,r.getOwner=function(){return s},this.setNode(r),this.getRating=function(){return s.getAttribute("sRating")},this.setRating=function(e){s.setAttribute("sRating",e)},this.setFromJson=function(t){e.prototype.setFromJson.call(s,t),t&&(s.setAttribute("sPresentationSlideID",t.slideId),s.setAttribute("lAssociatedChecks",t.associatedCheck?t.associatedCheck:[]),s.setAttribute("sRating",t.rating),s.setAttribute("lChangeActionIDs",t.ChangeAction?t.ChangeAction:[]),s.setAttribute("lIssuesIDs",t.Issue?t.Issue:[]),s.setAttribute("lTasksIDs",t.Task?t.Task:[]),s.setAttribute("sRepRefMarkupID",t.repRefMarkupId),s.setAttribute("creationTime",t.creationTime))},this.getHighlightObject=function(){return{slideId:s.getAttribute("sPresentationSlideID"),associatedCheck:s.getAttribute("lAssociatedChecks"),description:s.getAttribute("sDescription"),rating:s.getAttribute("sRating"),changeAction:s.getAttribute("lChangeActionIDs"),issues:s.getAttribute("lIssuesIDs"),tasks:s.getAttribute("lTasksIDs"),repRefMarkupId:s.getAttribute("sRepRefMarkupID"),creationTime:s.getAttribute("creationTime"),name:s.getName(),id:s.getPlmID(),type:s.getValType()}},this.getAssociatedCheck=function(){return s.getAttribute("lAssociatedChecks")},this.addAssociatedCheck=function(e){let t=s.getAttribute("lAssociatedChecks");t&&e&&t.push(e),s.setAttribute("lAssociatedChecks",t)},this.removeAssociatedCheck=function(e){let t=s.getAttribute("lAssociatedChecks");if(t&&e){var i=t.indexOf(e);-1!==i&&t.splice(i,1),s.setAttribute("lAssociatedChecks",t)}},this.getPresentationSlideID=function(){return s.getAttribute("sPresentationSlideID")},this.setsPresentationSlideID=function(e){s.setAttribute("sPresentationSlideID",e)}}})})),define("DS/DMUBaseWebValidation/EXPValMarkup",["DS/DMUBaseWebValidation/EXPValObject"],(function(e){"use strict";var t=e.extend({init:function(i,n){this._parent(i,n);let s=this,r=!1;this.addParameters([{name:"oMarkupContent",type:"objectDefinition",JSONname:""},{name:"lChildren",type:"listObjects",JSONname:"",defaultValue:[]},{name:"fTreeOrder",type:"float",JSONname:"",defaultValue:0},{name:"sInstPlmId",type:"string",JSONname:"",defaultValue:""},{name:"bWebMarkup",type:"boolean",JSONname:"",defaultValue:!1},{name:"bNoStream",type:"boolean",JSONname:"",defaultValue:!1},{name:"lCommentsStatus",type:"listObjects",JSONname:"",defaultValue:[]}]),this.getTreeOrder=function(){return s.getAttribute("fTreeOrder")};let a=this.setReadOnly;this.setReadOnly=function(e){a(e);let t=s.getAttribute("oMarkupContent");t&&t.setReadOnly(e),s.getRepRef()&&s.getRepRef().setReadOnly(e);let i=s.getAttribute("lChildren");i&&i.length&&i.forEach((t=>{t.setReadOnly(e)}))},this.setFromJson=function(t){e.prototype.setFromJson.call(s,t),s.setAttribute("fTreeOrder",t.treeOrder),s.setInstancePlmID(t.instanceId),t.commentStatus&&s.setCommentsStatusList(JSON.parse(t.commentStatus)),t.children&&s.setChildren(t.children),s.setAttribute("bWebMarkup",t.webMarkup&&"true"===t.webMarkup),s.setAttribute("bNoStream",t.nostream&&"true"===t.nostream)},this.sortReplies=function(){let e=s.getAttribute("lChildren");if(e){e.sort((function(e,t){return e.getTreeOrder()-t.getTreeOrder()}));for(var t=0;t<e.length;t++)e[t].sortReplies();s.setAttribute("lChildren",e)}},this.getMarkupContent=function(){return s.getAttribute("oMarkupContent")},this.setMarkupContent=function(e){s.setAttribute("oMarkupContent",e)},this.removeMarkupContent=function(){s.getAttribute("oMarkupContent")&&(r=!0,s.getAttribute("oMarkupContent").remove()),s.setAttribute("oMarkupContent",null)},this.isBeingRemoved=function(){return r},this.isLoaded=function(){return null!==s.getAttribute("oMarkupContent")},this.getChildren=function(){return s.getAttribute("lChildren")},this.setChildren=function(e){for(var t=0;t<e.length;t++)s.addChild(e[t])},this.addChild=function(e){if("Markup"===e.type||"ReviewMarkup"===e.type||"Reply"===e.type){var i=new t(s.getViewer(),s);i.setFromJson(e);let n=s.getAttribute("lChildren");n||(n=[]),n.push(i),s.setAttribute("lChildren",n)}},this.removeChild=function(e){let t=s.getAttribute("lChildren");if(t){for(var i=t.length-1;i>=0;i--)t[i].getName()===e&&(t[i].remove&&t[i].remove(),t.splice(i,1));s.setAttribute("lChildren",t)}},this.getRepRef=function(){let e=s.getValType(),t=s.getAttribute("lChildren");if(("Markup"===e||"Reply"===e)&&t)for(var i=0;i<t.length;i++)if("ReviewMarkup"===t[i].getValType())return t[i];return null},this.getParentRepRef=function(){var e=s.getParent();if(e)return e.getParent()&&"ReviewMarkup"===s.getValType()?e.getParent().getRepRef():"Reply"===s.getValType()?e.getRepRef():void 0},this.getReplies=function(){let e=[],t=s.getValType(),i=s.getAttribute("lChildren");if(i&&("Markup"===t||"Reply"===t))for(var n=0;n<i.length;n++)"Reply"===i[n].getValType()&&e.push(i[n]);return e},this.removeReply=function(e){let t=s.getAttribute("lChildren");if(t){for(var i=t.length-1;i>=0;i--)if(t[i].getPlmID()===e){t[i].remove(),t.splice(i,1);break}s.setAttribute("lChildren",t)}},this.getInstancePlmID=function(){return s.getAttribute("sInstPlmId")},this.setInstancePlmID=function(e){s.setAttribute("sInstPlmId",e)},this.isWebMarkup=function(){return"ReviewMarkup"===s.getValType()?Boolean(s.getAttribute("bWebMarkup")):s.getRepRef()?Boolean(s.getRepRef().getAttribute("bWebMarkup")):void 0},this.hasStream=function(){return"ReviewMarkup"===s.getValType()?!Boolean(s.getAttribute("bNoStream")):s.getRepRef()?!Boolean(s.getRepRef().getAttribute("bNoStream")):void 0},this.getCommentsStatusList=function(){return s.getAttribute("lCommentsStatus")},this.setCommentsStatusList=function(e){return s.setAttribute("lCommentsStatus",e)},this.getCommentStatus=function(e){let t=s.getAttribute("lCommentsStatus");for(let i=0;i<t.length;i++)if(t[i].id===e)return t[i].status}}});return t})),define("DS/DMUBaseWebValidation/EXPValMembers",["DS/DMUBaseWebValidation/EXPValObject"],(function(e){"use strict";return e.extend({init:function(t,i){this._parent(t,i);let n=this,s=null;this.addParameters([{name:"sJsonMembers",type:"string",JSONname:"",defaultValue:[]}]),this.setFromJson=function(t){e.prototype.setFromJson.call(n,t),t._sJsonMembers?n.addMembers(t._sJsonMembers):t.members&&n.addMembers(t.members)},this.addMembers=function(e){s=e,n.setAttribute("sJsonMembers",s)},this.getCoordinators=function(){return n.getMembersByRole("coordinator")},this.addCoordinators=function(e){e.forEach((e=>{n.addCoordinator(e)}))},this.removeCoordinators=function(e){e.forEach((e=>{n.removeCoordinator(e)}))},this.addCoordinator=function(e){n.addMemberRole(e,"coordinator")},this.removeCoordinator=function(e){n.removeMemberRole(e,"coordinator")},this.getAssignees=function(){return n.getMembersByRole("assignee")},this.addAssignees=function(e){e.forEach((e=>{n.addAssignee(e)}))},this.removeAssignees=function(e){e.forEach((e=>{n.removeAssignee(e)}))},this.addAssignee=function(e){n.addMemberRole(e,"assignee")},this.removeAssignee=function(e){n.removeMemberRole(e,"assignee")},this.getContributors=function(){return n.getMembersByRole("contributor")},this.addContributors=function(e){e.forEach((e=>{n.addContributor(e)}))},this.removeContributors=function(e){e.forEach((e=>{n.removeContributor(e)}))},this.addContributor=function(e){n.addMemberRole(e,"contributor")},this.removeContributor=function(e){n.removeMemberRole(e,"contributor")},this.getInformedUsers=function(){return n.getMembersByRole("informeduser")},this.addInformedUsers=function(e){e.forEach((e=>{n.addInformedUser(e)}))},this.removeInformedUsers=function(e){e.forEach((e=>{n.removeInformedUser(e)}))},this.addInformedUser=function(e){n.addMemberRole(e,"informeduser")},this.removeInformedUser=function(e){n.removeMemberRole(e,"informeduser")},this.getMembersByRole=function(e){s=n.getAttribute("sJsonMembers");let t=[];for(let i in s)if(s.hasOwnProperty(i)){let r=s[i];r.roles.includes(e)&&t.push(n.formatMember(i,r))}return t},this.setMemberContribution=function(e){s=n.getAttribute("sJsonMembers");for(let t in s)if(s.hasOwnProperty(t)){let i=s[t];if(i.contribution!==e.sContribution&&i.id===e.pId){i.contribution=e.sContribution;break}}n.setAttribute("sJsonMembers",s)},this.addMemberRole=function(e,t){let i=e.user;if(s)s[i]&&!s[i].roles.includes(t)?s[i].roles.push(t):s[i]={type:e.type,memberId:e.memberId,id:e.id,contribution:e.contribution,roles:[t]},n.setAttribute("sJsonMembers",s);else{s={};const i=e.user;s[i]?s[i].roles.includes(t)||s[i].roles.push(t):s[i]={type:e.type,memberId:e.memberId,id:e.id,contribution:e.contribution,roles:[t]},n.setAttribute("sJsonMembers",s)}},this.removeMemberRole=function(e,t){let i=e.user;if(s&&s[i]){if(s[i].roles.length>1){let e=s[i].roles.indexOf(t);-1!==e&&s[i].roles.splice(e,1),s[i].roles.some((e=>"assignee"===e))||s[i].roles.some((e=>"contributor"===e))||"assignee"!==t&&"contributor"!==t||(s[i].contribution="NotStarted")}else delete s[i];n.setAttribute("sJsonMembers",s)}},this.formatMember=function(e,t){return{user:e,type:t.type,memberId:t.memberId,id:t.id,contribution:t.contribution}}}})})),define("DS/DMUBaseWebValidation/EXPValParticipants",["DS/DMUBaseWebValidation/EXPValObject"],(function(e){"use strict";return e.extend({init:function(t,i){this._parent(t,i);let n=this;this.addParameters([{name:"lJsonMembers",type:"listStrings",JSONname:"",defaultValue:[]}]),this.setFromJson=function(t){e.prototype.setFromJson.call(n,t),t.Members&&n.setJsonMembers(t.Members)},this.getJsonMembers=function(){return n.getAttribute("lJsonMembers")},this.setJsonMembers=function(e){for(var t=0;t<e.length;t++)this.addJsonMember(e[t])},this.addJsonMember=function(e){if(e&&e.name){let t=n.getAttribute("lJsonMembers");t||(t=[]),t.push(e.name)}},this.removeJsonMember=function(e){let t=n.getAttribute("lJsonMembers");if(t){for(var i=t.length-1;i>=0;i--)t[i].name===e&&t.splice(i,1);n.setAttribute("lJsonMembers",t)}}}})})),define("DS/DMUBaseWebValidation/EXPValObject",["DS/DMUBaseExperience/EXPObject"],(function(e){"use strict";return e.extend({init:function(e,t){this._parent(e,t),this.addParameters([{name:"sPlmID",type:"string",JSONname:""},{name:"sValType",type:"string",JSONname:""},{name:"sName",type:"string",JSONname:""},{name:"sOwner",type:"string",JSONname:""},{name:"sDescription",type:"string",JSONname:""}]);let i=this;this.getType=function(){return i.getAttribute("sValType")},this.getValType=function(){return i.getAttribute("sValType")},this.setValType=function(e){i.setAttribute("sValType",e)},this.getPlmID=function(){return i.getAttribute("sPlmID")},this.setPlmID=function(e){i.setAttribute("sPlmID",e)},this.getParentID=function(){return i.getParent().getPlmID()},this.getName=function(){return i.getAttribute("sName")},this.setName=function(e){i.setAttribute("sName",e)},this.getOwner=function(){return i.getAttribute("sOwner")},this.setOwner=function(e){i.setAttribute("sOwner",e)},this.getDescription=function(){return i.getAttribute("sDescription")},this.setDescription=function(e){i.setAttribute("sDescription",e)}},setFromJson:function(e){this.setPlmID(e.id),this.setValType(e.type),e.name&&this.setName(e.name),e.owner&&this.setOwner(e.owner),e.description&&this.setDescription(e.description)}})})),define("DS/DMUBaseWebValidation/EXPValCheck",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D"],(function(e,t){"use strict";return e.extend({init:function(i,n){this._parent(i,n);var s=this;this.addParameters([{name:"lJsonRequirements",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lJsonHighlights",type:"listObjects",JSONname:"",defaultValue:[]},{name:"sStatus",type:"string",JSONname:""},{name:"creationTime",type:"string",JSONname:""}]),this.setValType("DMUValidationCheck");let r=new t("Check");r.getDMUType=this.getType,r.getOwner=function(){return s},this.setNode(r),this.getStatus=function(){return s.getAttribute("sStatus")},this.setStatus=function(e){s.setAttribute("sStatus",e)},this.setFromJson=function(t){if(e.prototype.setFromJson.call(s,t),s.setAttribute("sStatus",t.state),s.setAttribute("sDescription",t.description),s.setAttribute("creationTime",t.creationTime),t.children){let e;for(let i=0;i<t.children.length;i++)e=t.children[i],"Requirement"===e.type?s.addJsonRequirement(e):"DMUValidationExposedPresentation"===e.type&&s.addJsonHighlight(e)}},this.getCheckObject=function(){return{name:s.getName(),description:s.getAttribute("sDescription"),requirements:s.getAttribute("lJsonRequirements"),status:s.getAttribute("sStatus"),creationTime:s.getAttribute("creationTime"),id:s.getPlmID()}},this.getJsonRequirements=function(){return s.getAttribute("lJsonRequirements")},this.addJsonRequirement=function(t){if(t){let i=new e(s.getViewer(),s);i.setFromJson(t);let n=s.getAttribute("lJsonRequirements");n||(n=[]),n.push(i),s.setAttribute("lJsonRequirements",n)}},this.removeJsonRequirement=function(e){let t=s.getAttribute("lJsonRequirements");for(let i=t.length-1;i>=0;i--)t[i].getPlmID()===e&&(t[i].remove(),t.splice(i,1));s.setAttribute("lJsonRequirements",t)}}})})),define("DS/DMUBaseWebValidation/EXPValValidated",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D"],(function(e,t){"use strict";return e.extend({init:function(i,n){this._parent(i,n);let s=this;this.addParameters([{name:"lPathElements",type:"listObjects",JSONname:"",defaultValue:[]},{name:"oChangeActionNode",type:"objectDefinition",JSONname:"",defaultValue:[]}]),this.setFromJson=function(i){e.prototype.setFromJson.call(this,i),i.validatedObjects&&s.setPathElements(i.validatedObjects);let n=new t("Change Action");s.setAttribute("oChangeActionNode",n)},this.getPathElements=function(){return s.getAttribute("lPathElements")},this.getValidatedInstanceNames=function(){let e=[],t=s.getAttribute("lPathElements");if(!t)return e;for(let i=0;i<t.length;i++)"Change Action"!==t[i].referenceType&&(1===t[i].pathElement.length?e.push(t[i].referenceName):e.push(t[i].instanceName));return e},this.getChangeActionNode=function(){return s.getAttribute("oChangeActionNode")},this.getChangeActionName=function(){let e,t=s.getAttribute("lPathElements");if(!t)return e;for(let i=0;i<t.length;i++)1===t[i].pathElement.length&&"Change Action"===t[i].referenceType&&(e=t[i].referenceName);return e},this.setPathElements=function(e){for(var t=0;t<e.length;t++)s.addPathElement(e[t])},this.addPathElement=function(e){if(e){let t=s.getAttribute("lPathElements");t||(t=[]),t.push({instanceName:e.instanceName,referenceName:e.referenceName,pathElement:e.PathElements,referenceType:e.referenceType}),s.setAttribute("lPathElements",t)}},this.removePathElement=function(e,t){let i=s.getAttribute("lPathElements");if(i){for(var n=i.length-1;n>=0;n--)(i[n].pathElement.equals(e)||i[n].pathElement.equals(t))&&i.splice(n,1);s.setAttribute("lPathElements",i)}}}})})),define("DS/DMUBaseWebValidation/EXPValContext",["DS/DMUBaseWebValidation/EXPValObject"],(function(e){"use strict";return e.extend({init:function(t,i){this._parent(t,i);let n=this;this.addParameters([{name:"lJsonContexts",type:"listObjects",JSONname:"",defaultValue:[]}]),this.setFromJson=function(t){e.prototype.setFromJson.call(n,t),t.contexts&&n.setJsonContexts(t.contexts)},this.getJsonContextIDs=function(){let e=[],t=n.getAttribute("lJsonContexts");if(t)for(let i=0;i<t.length;i++)e.push(t[i].id);return e},this.getJsonContextNames=function(){var e=[],t=n.getAttribute("lJsonContexts");if(t)for(let i=0;i<t.length;i++)e.push(t[i].name);return e},this.getJsonContextTypes=function(){var e=[],t=n.getAttribute("lJsonContexts");if(t)for(let i=0;i<t.length;i++)e.push(t[i].type);return e},this.getJsonContexts=function(){return n.getAttribute("lJsonContexts")},this.setJsonContexts=function(e){if(e)for(let t=0;t<e.length;t++)n.addJsonContext(e[t])},this.addJsonContext=function(e){if(e){let t=n.getAttribute("lJsonContexts");t||(t=[]),t.push({id:e.id,type:e.type,name:e.name,usage:e.usage,loadedR2VInfo:e.loadedR2VInfo,subContext:e.subContext}),n.setAttribute("lJsonContexts",t)}},this.removeJsonContext=function(e){let t=n.getAttribute("lJsonContexts");if(t&&t.length){for(let i=t.length-1;i>=0;i--)t[i].id===e&&t.splice(i,1);n.setAttribute("lJsonContexts",t)}},this.getMainContext=function(){let e=null,t=n.getAttribute("lJsonContexts");if(t&&t.length)for(let i=0;i<t.length;i++)if(!t[i].subContext){e=t[i];break}return e},this.getMainContextID=function(){let e,t=n.getMainContext();return t&&(e=t.id),e},this.getMainContextType=function(){let e,t=n.getMainContext();return t&&(e=t.type),e},this.getMainContextName=function(){let e,t=n.getMainContext();return t&&(e=t.name),e},this.getSubContext=function(){let e=null,t=n.getAttribute("lJsonContexts");if(t&&t.length)for(let i=0;i<t.length;i++)if(t[i].subContext){e=t[i];break}return e},this.getSubContextID=function(){let e,t=n.getSubContext();return t&&(e=t.id),e},this.getSubContextType=function(){let e,t=n.getSubContext();return t&&(e=t.type),e},this.getSubContextName=function(){let e,t=n.getSubContext();return t&&(e=t.name),e}}})})),define("DS/DMUBaseWebValidation/EXPValHighlights",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D"],(function(e,t){"use strict";return e.extend({init:function(e,i){this._parent(e,i);var n=this;this.setValType("Highlights");var s=new t("Highlights");s.getDMUType=this.getType,s.getOwner=function(){return n},this.setNode(s),this._issueCreationType="issue",this.getIssueCreationType=function(){return this._issueCreationType},this.setIssueCreationType=function(e){e&&(this._issueCreationType=e)}}})})),define("DS/DMUBaseWebValidation/EXPValChecks",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D"],(function(e,t){"use strict";return e.extend({init:function(e,i){this._parent(e,i);var n=this;this.setValType("Checks");let s=new t("Checks");s.getDMUType=this.getType,s.getOwner=function(){return n},this.setNode(s)}})})),define("DS/DMUBaseWebValidation/EXPValValidation",["DS/DMUBaseWebValidation/EXPValObject","DS/DMUBaseWebValidation/EXPValMarkup","DS/DMUBaseWebValidation/EXPValValidated","DS/DMUBaseWebValidation/EXPValParticipants","DS/DMUBaseWebValidation/EXPValCheck","DS/DMUBaseWebValidation/EXPValMembers","DS/DMUBaseWebValidation/EXPValChecks","DS/DMUBaseWebValidation/EXPValHighlights","DS/DMUBaseWebValidation/EXPValContext","DS/Visualization/Node3D"],(function(e,t,i,n,s,r,a,o,u,l){"use strict";return e.extend({init:function(c,d){this._parent(c,d);let h=this;this.addParameters([{name:"sContextType",type:"string",JSONname:""},{name:"sStatus",type:"string",JSONname:""},{name:"sModifyAccess",type:"boolean",JSONname:"",defaultValue:!1},{name:"sRestrictedEdition",type:"boolean",JSONname:"",defaultValue:!1},{name:"oValidated",type:"objectDefinition",JSONname:""},{name:"oContext",type:"objectDefinition",JSONname:""},{name:"oParticipants",type:"objectDefinition",JSONname:""},{name:"oMembers",type:"objectDefinition",JSONname:""},{name:"lChecks",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lMarkups",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lHighlights",type:"listObjects",JSONname:"",defaultValue:[]},{name:"sSlideForPreview",type:"string",JSONname:""}]);let g=null,f=null,m=!1,b=new l("Validation");b.getDMUType=h.getValType,this.setNode(b);let p=new a(c,h),M=new o(c,h);b.addChild(p.getNode()),b.addChild(M.getNode()),this.getStatus=function(){return h.getAttribute("sStatus")},this.setStatus=function(e){"InProgress"===e?h.setStatus("inProgress"):"Failed"===e?h.setStatus("failed"):"Passed"===e?h.setStatus("passed"):h.setAttribute("sStatus",e)},this.getModifyAccessFlag=function(){return h.getAttribute("sModifyAccess")},this.setModifyAccessFlag=function(e){h.setAttribute("sModifyAccess",e)},this.getRestrictedEditionFlag=function(){return h.getAttribute("sRestrictedEdition")},this.setRestrictedEditionFlag=function(e){h.setAttribute("sRestrictedEdition",e)},this.getCurrentState=function(){return f},this.setCurrentState=function(e){f=e};let A=this.setReadOnly;this.setReadOnly=function(e){A(e);let t=h.getAttribute("lMarkups");t&&t.length&&t.forEach((t=>{t.setReadOnly(e)}));let i=h.getAttribute("lHighlights");i&&i.length&&i.forEach((t=>{t.setReadOnly(e)}));let n=h.getAttribute("lChecks");n&&n.length&&n.forEach((t=>{t.setReadOnly(e)}))},this._parentRemove=this.remove,this.remove=function(){h.setCurrentMarkup(null),g=null,f=null,h._parentRemove()},this.updateVisibleMarkups=()=>{let e=h.getParent();if(m)e.setVisibleMarkups(h.getMarkups().map((e=>("ReviewMarkup"===e.getValType()?e:e.getRepRef()).getMarkupContent())).filter(Boolean));else{let t=g&&("ReviewMarkup"===g.getValType()?g:g.getRepRef());e.setVisibleMarkups(t&&t.getMarkupContent()?[t.getMarkupContent()]:[])}e.refreshNode()},this.setFromJson=function(t){switch(e.prototype.setFromJson.call(h,t),t.contextType){case"1":h.setContextType("Product");break;case"2":h.setContextType("Simulation");break;case"3":h.setContextType("Image");break;case"4":h.setContextType("RFL");break;case"5":h.setContextType("PPR");break;case"6":h.setContextType("Shape");break;default:h.setContextType("")}h.setCurrentState(t.currentState),h.setStatus(t.status),h.setModifyAccessFlag("false"!==t.modifyAccess),h.setRestrictedEditionFlag(t.restrictedEdition),h.setSlideForPreview(t.slideForPreview),t.members&&h.setMembers(t)},this.getContextType=function(){return h.getAttribute("sContextType")},this.setContextType=function(e){h.setAttribute("sContextType",e)},this.getParticipants=function(){return h.getAttribute("oParticipants")},this.setParticipants=function(e){e instanceof n&&h.setAttribute("oParticipants",e)},this.removeParticipants=function(){h.getAttribute("oParticipants")&&h.getAttribute("oParticipants").remove(),h.setAttribute("oParticipants",null)},this.addValidatedNode=e=>{let t=new l("Validated");t.getDocInfo=()=>e.docInfo,b.addChild(t)},this.removeValidatedNode=e=>{this.getNode().getChildren().forEach((t=>{"Validated"===t.name&&t.getDocInfo().validatedPaths[0]===e&&b.removeChild(t)}))},this.getValidated=function(){return h.getAttribute("oValidated")},this.setValidated=function(e){e instanceof i&&h.setAttribute("oValidated",e)},this.removeValidated=function(){h.getAttribute("oValidated")&&h.getAttribute("oValidated").remove(),h.setAttribute("oValidated",null)},this.getContext=function(){return h.getAttribute("oContext")},this.setContext=function(e){e instanceof u&&h.setAttribute("oContext",e)},this.removeContext=function(){h.getAttribute("oContext")&&h.getAttribute("oContext").remove(),h.setAttribute("oContext",null)},this.getValidationMembers=function(){return h.getAttribute("oMembers")},this.addValidationMembers=function(e){if(e instanceof r){let t=h.getAttribute("oMembers");t||(t=[]),t.push(e),h.setAttribute("oMembers",t)}},this.removeValidationMembers=function(){h.getAttribute("oMembers")&&h.getAttribute("oMembers").remove(),h.setAttribute("oMembers",null)},this.getChecks=function(){return h.getAttribute("lChecks")},this.getChecksData=function(){var e=[],t=h.getAttribute("lChecks");if(!t)return;let i,n=0;for(var s=0;s<t.length;s++)e.push(t[s].getCheckObject()),t[s].getCheckObject().creationTime&&n++;return i=n===t.length?e.sort(((e,t)=>{if(e.creationTime&&t.creationTime)return e.creationTime=e.creationTime.replace("@"," "),e.creationTime=e.creationTime.replace(":GMT"," GMT"),t.creationTime=t.creationTime.replace("@"," "),t.creationTime=t.creationTime.replace(":GMT"," GMT"),new Date(e.creationTime)<new Date(t.creationTime)?-1:new Date(e.creationTime)>new Date(t.creationTime)?1:0})):e,i},this.addCheck=function(e){if(e instanceof s){let t=h.getAttribute("lChecks");t||(t=[]),t.push(e),h.setAttribute("lChecks",t),p.getNode().addChild(e.getNode())}},this.removeCheck=function(e){let t=h.getAttribute("lChecks");if(t){for(let i=t.length-1;i>=0;i--)t[i].getPlmID()===e&&(p.getNode().removeChild(t[i].getNode()),t[i].remove(),t.splice(i,1));h.setAttribute("lChecks",t)}},this.getMarkups=function(){return h.getAttribute("lMarkups")},this.addMarkup=function(e){if(e instanceof t){let t=h.getAttribute("lMarkups");t||(t=[]),t.push(e),h.setAttribute("lMarkups",t)}},this.removeMarkup=function(e){let t=h.getAttribute("lMarkups");if(t){for(var i=t.length-1;i>=0;i--)if(t[i].getPlmID()===e){t[i].remove(),t.splice(i,1);break}h.setAttribute("lMarkups",t),h.updateVisibleMarkups()}},this.reorderMarkups=function(e){let t=h.getAttribute("lMarkups");t&&(e.forEach((function(e){let i=t.findIndex((t=>t.getRepRef().getPlmID()===e)),n=t.splice(i,1)[0];t.push(n)})),h.setAttribute("lMarkups",t),h.fireEvent("onDMUValidationMarkupsReordered",{orderedMarkupIDs:e}))},this.sortMarkups=function(){let e=h.getAttribute("lMarkups");if(e){e.sort((function(e,t){return e.getTreeOrder()-t.getTreeOrder()}));for(var t=0;t<e.length;t++)e[t].sortReplies();h.setAttribute("lMarkups",e)}},this.getFirstLevelRepRefs=function(){let e=[],t=h.getAttribute("lMarkups");for(var i=0;i<t.length;i++)e.push(t[i].getRepRef());return e},this.getAllRepRefs=function(){let e=[],t=function(e,i){var n=e.getRepRef();n&&i.push(n);for(var s=e.getReplies(),r=0;r<s.length;r++)t(s[r],i)},i=h.getAttribute("lMarkups");if(!i)return e;for(let n=0;n<i.length;n++)t(i[n],e);return e},this.getLoadedRepRefs=function(){for(var e=h.getAllRepRefs(),t=0;t<e.length;)e[t].isLoaded()?t++:e.splice(t,1);return e},this.getNextRepRef=function(e){for(var t=h.getAllRepRefs(),i=0;i<t.length;i++)if(t[i].getPlmID()===e)return i<t.length-1?t[i+1]:t[0]},this.getPreviousRepRef=function(e){for(var t=h.getAllRepRefs(),i=0;i<t.length;i++)if(t[i].getPlmID()===e)return i>0?t[i-1]:t[t.length-1]},this.getRepRef=function(e){for(var t=h.getAllRepRefs(),i=0;i<t.length;i++)if(t[i].getPlmID()===e)return t[i]},this.getHighlights=function(){return h.getAttribute("lHighlights")},this.getHighlightsData=function(){let e=[],t=h.getAttribute("lHighlights");if(!t)return e;let i,n=0;for(var s=0;s<t.length;s++)e.push(t[s].getHighlightObject()),t[s].getHighlightObject().creationTime&&n++;return i=n===t.length?e.sort(((e,t)=>{if(e.creationTime&&t.creationTime)return e.creationTime=e.creationTime.replace("@"," "),e.creationTime=e.creationTime.replace(":GMT"," GMT"),t.creationTime=t.creationTime.replace("@"," "),t.creationTime=t.creationTime.replace(":GMT"," GMT"),new Date(e.creationTime)<new Date(t.creationTime)?-1:new Date(e.creationTime)>new Date(t.creationTime)?1:0})):e,i},this.addHighlight=function(t){let i=h.getAttribute("lHighlights");t instanceof e&&(i||(i=[]),i.push(t),M.getNode().addChild(t.getNode()),h.setAttribute("lHighlights",i))},this.removeHighlight=function(e){let t=h.getAttribute("lHighlights");if(t){for(var i=t.length-1;i>=0;i--)t[i].getPlmID()===e&&(M.getNode().removeChild(t[i].getNode()),t[i].remove(),t.splice(i,1));h.setAttribute("lHighlights",t)}},this.enableMultipleMarkupVisibility=e=>{m!==e&&(h.getParent().enableMultipleMarkupVisibility(e),m=e,h.updateVisibleMarkups())},this.setCurrentMarkup=function(e){if(g!==e){var t=h.getParent();if(t){var i=null;if(e&&(i="ReviewMarkup"!==e.getValType()?e:e.getParent()),i){if(!g||i.getPlmID()!==g.getPlmID()){var n="ReviewMarkup"===i.getValType()?i:i.getRepRef();n.getMarkupContent()&&(g=i,t.setCurrentSessionMarkup(n?n.getMarkupContent():null),t.refreshNode())}}else g&&(t.setCurrentSessionMarkup(null),g=null,t.refreshNode())}}},this.getCurrentMarkup=function(){return g},this.setSlideForPreview=function(e){h.setAttribute("sSlideForPreview",e)},this.getSlideForPreview=function(){var e=null,t=h.getAttribute("sSlideForPreview");return t&&""!==t&&(e=JSON.parse(t)),e},this.getMembers=function(){return h.getAttribute("oMembers")},this.setMembers=function(e){let t=new r(c,h);e&&t.setFromJson(e),h.setAttribute("oMembers",t)}}})})),define("DS/DMUBaseWebValidation/EXPValImporter",["UWA/Class","DS/DMUBaseWebValidation/EXPValValidation","DS/DMUBaseWebValidation/EXPValMarkup","DS/DMUBaseWebValidation/EXPValValidated","DS/DMUBaseWebValidation/EXPValParticipants","DS/DMUBaseWebValidation/EXPValCheck","DS/DMUBaseWebValidation/EXPValContext","DS/DMUBaseWebValidation/EXPValHighlight"],(function(e,t,i,n,s,r,a,o){"use strict";return e.extend({init:function(e){this.importValidationFromJSON=function(u,l){var c=null;if(u&&"DMUValidationValidation"===u.type&&u.children){c=new t(e.viewer.getViewer(),e.DMUExperience),e.DMUExperience.setValidation(c),c.setFromJson(u);for(var d=0;d<u.children.length;d++){var h=u.children[d],g=null;switch(h.type){case"Markup":g=new i(e.viewer.getViewer(),c),c.addMarkup(g);break;case"DMUValidationValidated":g=new n(e.viewer.getViewer(),c),c.setValidated(g);break;case"DMUValidationParticipants":g=new s(e.viewer.getViewer(),c),c.setParticipants(g);break;case"DMUValidationCheck":(g=new r(e.viewer.getViewer(),c)).setEditable(l),c.addCheck(g);break;case"DMUValidationContext":g=new a(e.viewer.getViewer(),c),c.setContext(g);break;case"DMUValidationExposedPresentation":(g=new o(e.viewer.getViewer(),c)).setEditable(l),c.addHighlight(g)}g&&g.setFromJson(h)}c.sortMarkups(),c.setReadOnly(e.DMUExperience.isReadOnly()),c.fireEvent("onDMUObjectInitialized",{dmuObject:c,editionMode:l})}return c}}})}));