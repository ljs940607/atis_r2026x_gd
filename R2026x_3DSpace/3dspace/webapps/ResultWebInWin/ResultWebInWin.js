define("DS/ResultWebInWin/BroadcastWebInWinProxyManager",["UWA/Class","UWA/Core","UWA/Event","DS/SNInfraUX/Logger"],(function(e,t,i,n){"use strict";return e.extend(i,{init:function(){this._snTabManager=null,this._parent()},setup:function(e){this._snTabManager=e&&e.snTabManager,this._BroadcastChannel&&this._BroadcastChannel.close(),this._BroadcastChannel&&delete this._BroadcastChannel,this._BroadcastChannel=new BroadcastChannel("WebInWinProxyManager"),this._parent(e)},destroy:function(){t.is(this._BroadcastChannel)&&this._BroadcastChannel.close(),t.is(this._BroadcastChannel)&&delete this._BroadcastChannel,this._BroadcastChannel=null,this._snTabManager=null,this._parent()},postMessage:function(e){t.is(this._BroadcastChannel)&&this._BroadcastChannel.postMessage(e)},listenBroadcast:function(){t.is(this._BroadcastChannel)&&(this._BroadcastChannel.onmessage=e=>{if(t.is(e)&&t.is(e.data)){n.log("DS/ResultWebInWin/BroadcastWebInWinProxyManager onmessage",e.data);const{type:t="",proxyId:i="",contextId:a=""}=e.data}})}})})),define("DS/ResultWebInWin/ResultWebInWinAction",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events","DS/SNInfraUX/SearchCom"],(function(e,t,i,n,a){"use strict";return t.singleton(n,i,{myWebInWinActionSocket:null,executeAction:function(t,i){e.log("Execute action: "+i);var n,s=0;if(e.is(this.myWebInWinActionSocket)||(this.myWebInWinActionSocket=a.createSocket({socket_id:"search_WebInWinAction_"+Math.floor(1e5*Math.random()+1)})),!e.is(i))throw new Error("No options given to executeAction method !");var r=!1;e.is(i,"array")&&(r=!0);var o=!1;if(e.is(t,"array")&&(o=!0),!0===o){if(!e.is(t[0]))throw new Error("No selectedModels given to executeAction method !");if(!e.is(t.action_id))throw new Error("No selectedModels.action_id given to executeAction method !");var c=t.length;for(n={action:t.action_id,objectIds:[]},s=0;s<c;s++){if(!e.is(t[s].id))throw new Error("No selectedModels.id given to executeAction method !");n.objectIds.push(t[s].id)}}else if(!1===r){if(!e.is(t))throw new Error("No selectedModels given to executeAction method !");if(!e.is(t.action_id))throw new Error("No selectedModels.action_id given to executeAction method !");(n={action:t.action_id,objectIds:[]}).objectIds.push(t.id)}else{if(!e.is(i[0]))throw new Error("No options given to executeAction method !");if(!e.is(i[0].action_id))throw new Error("No options.action_id given to executeAction method !");for(n={action:i[0].action_id,objectIds:[]},s=0;s<i.length;s++){if(!e.is(i[s].action_id))throw new Error("No options.action_id given to executeAction method !");if(!e.is(i[s].object_id))throw new Error("No options.object_id given to executeAction method !");n.objectIds.push(i[s].object_id)}}this.myWebInWinActionSocket.dispatchEvent("onDispatchToWin",{notif_name:"onCtxMenuClick",notif_parameters:JSON.stringify(n)},"search_web_in_win")}})})),window.onload=function(){-1===window.location.search.indexOf("no_jsnotif=true")&&sendNotificationWebInWin("PageLoaded","done"),window.parent.postMessage("search_web_in_win_ready","*"),require(["UWA/Core","UWA/Drivers/Alone","i18n!DS/SNResultUX/assets/nls/SNResultUX.json"],(function(e,t,i){var n=window.document.getElementById("temp-search-msg-span");if(e.is(n)){var a=e.extendElement(n);e.is(a)&&a.setHTML(i.get("webinwin_search_loading"))}}))},define("DS/ResultWebInWin/ResultWebInWin",["UWA/Drivers/Alone","UWA/Core","UWA/Class/Debug","UWA/Controls/Abstract","UWA/Class/Listener","UWA/Element","UWA/Event","DS/MessageBus/MessageBus","DS/SNResultUX/SNTabbedResultMgt","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchPreferences","DS/SNInfraUX/SearchCom","DS/SNInfraUX/utils/WildcardMgr","DS/SNResultUX/utils/SearchServices","DS/SNInfraUX/PredefinedQueries","DS/SNInfraUX/SWFiltering","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SecurityContextManager","DS/SNInfraUX/SearchRevisionDelegator","DS/ResultWebInWin/BroadcastWebInWinProxyManager","i18n!DS/SNResultUX/assets/nls/SNResultUX.json","text!DS/SNResultUX/assets/WebInWin_settings.json"],(function(e,t,i,n,a,s,r,o,c,d,l,h,g,_,u,p,v,f,S,m,b,I,w){"use strict";return n.extend(i,a,{name:"DS_ResultWebInWin_ResultWebInWin",_searchResult:null,_searchcom_socket:null,_listAccelerator:{},snTabManager:null,_widget_id:null,_socket_id:"search_web_in_win",_searchcontent_id:"",_timeOut:0,_BroadcastWebInWinProxyManager:null,init:function(e){var i=this;this.setDebugMode(l.getDebugMode()),this._widget_id="web_in_win",s.addEvent.call(document,"keydown",(function(e){var t=r.whichKey(e),i=r.getElement(e)?r.getElement(e).getTagName():"unknown";"backspace"!==t&&"alt+left"!==t||-1!==["input","select"].indexOf(i)||r.stop(e)})),s.addEvent.call(document,"contextmenu",(function(e){dscef&&(0===dscef.getEnv("CATCEF_DEVTOOLS").length&&e.preventDefault())})),l.initialize(JSON.parse(w)),m.initialize("OnPremise");var n=l.getOption("OneSearch");t.is(n)&&!0===n&&l.setCompactMode(!1),i._searchcom_socket=g.createSocket({socket_id:this._socket_id}),i._searchcom_socket.addListener("onDispatchToWin",i._dispathTowin.bind(i)),i._searchcontent_id=e.searchcontent;var a=t.extendElement(document.body).getElement("."+i._searchcontent_id);if(!0===f.is6WInWebInWinActive()){a.addClassName("embeddedTaggerWebInWin");let e={snTabManager:i.snTabManager};i._BroadcastWebInWinProxyManager=new b,i._BroadcastWebInWinProxyManager.setup(e),i._BroadcastWebInWinProxyManager.listenBroadcast()}let h={widget_id:this._widget_id,resources:e.federated_source,updateTitle:function(e){i._dispathTowin({notif_name:"UpdatePanelTitle",notif_parameters:{panel_title:e}})},css_view_class:"maximized"};t.is(i._BroadcastWebInWinProxyManager)&&(h.getBroadcastWebInWinProxyManager=function(){return i._BroadcastWebInWinProxyManager}),i.snTabManager=new c(h),a.setContent(i.snTabManager);var _={css_view_class:"maximized",in_apps_search:e.in_apps_search?e.in_apps_search:null,events:{onReady:function(){t.extendElement(document.body).getElement(".onesearch_recentcontent");i._dispathTowin({notif_name:"Init",notif_parameters:"done"});var n=window.document.getElementById("temp-search-msg");if(t.is(n)){var a=t.extendElement(n);t.is(a)&&n.destroy()}e.events&&e.events.onReady&&e.events.onReady.call(null)}}};_.source=e.source,i.snTabManager.addTab({tabTitle:I.get("newTabTitle"),search_ux_options:_}),window.addEventListener("resize",(function(){var e=this;i._timeOut=750,d.log("window.addEventListener _timeOut: ",i._timeOut),d.log("window.addEventListener window.innerWidth: ",window.innerWidth),d.log("window.addEventListener window.innerHeight: ",window.innerHeight),setTimeout((function(){e.mySearchWebinWin&&e.mySearchWebinWin._searchcom_socket&&e.mySearchWebinWin._searchcom_socket.dispatchEvent("widgetResize"),d.log("setTimeout 500 widgetResize window.innerWidth: ",window.innerWidth),d.log("setTimeout 500 window.addEventListener window.innerHeight: ",window.innerHeight)}),500)})),this.ressources=e.federated_source,o.subscribe({channel:this._widget_id,topic:"beforeSearchReload",callback:function(){i.log("treating beforeSearchReload event"),i.destroy()}}),o.subscribe({channel:f.TAGGERPROXY_CONTEXTID_WEB_IN_WIN,topic:"WebInWinTaggerProxy_die",callback:function(e){i.log("treating WebInWinTaggerProxy_die event"),i._dispathTowin(e)}}),i._searchcom_socket.addListener("Last_Tag_Filter",(function(e){t.is(i._reSearchQuery)&&(i._reSearchQuery.last_tag_filter=e)}))},destroy:function(){this.log("inside ResultWebInWin destroy"),t.is(this.snTabManager)&&this.snTabManager.destroy(),this.snTabManager=null,t.is(this._BroadcastWebInWinProxyManager)&&this._BroadcastWebInWinProxyManager.destroy(),t.is(this._BroadcastWebInWinProxyManager)&&delete this._BroadcastWebInWinProxyManager,this._BroadcastWebInWinProxyManager=null;try{null!==this._searchcom_socket&&this.searchcom_socket.disconnect(),this._searchcom_socket=null}catch(e){console.warn("Exception raised",JSON.stringify(e))}},search:function(e){let i=h.getItem("search_double_click_open");t.is(i)&&window.hasOwnProperty("sendNotificationWebInWin")&&t.is(sendNotificationWebInWin,"function")&&sendNotificationWebInWin("doubleclickopen",i);var n=this;void 0!==this.in_apps_search&&(e.in_apps_search=this.in_apps_search),setTimeout((function(){n._timeOut=0,t.is(e.value,"string")&&e.value.indexOf(":")>0?p.fetchPQsFromServer(n.ressources).then((function(){n.searchAsyncPQ(e)})):n.searchAsyncPQ(e)}),n._timeOut)},searchAsyncPQ:function(e){this.log("ResultWebInWin search");var i=this.snTabManager.getActiveTab();if(t.is(i._snResultMgt)){let c=function(){i._snResultMgt._taggerProxy.clearLocalFilter(),i._snResultMgt._taggerProxy.clearLocalGrouping&&i._snResultMgt._taggerProxy.clearLocalGrouping(),i._snResultMgt.getCollection()._resetState(),i._snResultMgt.getCollection().reset()};i._snResultMgt._taggerProxy&&this.nextIsNewSearch&&""!==e.value?(c(),t.is(e)&&(e.donotshowlastsearch=!0),t.is(e)&&t.is(e.adv_search)&&e.adv_search&&(this.nextIsNewSearch=!1),this.nextIsNewSearch=!1):"#myContent"===e.value&&c(),!e.value||"?"!==e.value&&"6WEmbeddedTagger"!==e.value||i._snResultMgt._taggerProxy.setTags();var n=e.value,a=e.search_mode;if(t.is(i._snResultMgt.options)&&t.is(i._snResultMgt.options.search_options)&&t.is(i._snResultMgt.options.search_options.search_mode)&&"recent"===i._snResultMgt.options.search_options.search_mode&&t.is(i._snResultMgt.options.search_options.adv_search)&&!1===i._snResultMgt.options.search_options.adv_search?a="recent":e.value=_.manageWildcardAddtion(e.value),e.value=f.replacePQsWithCVPrefixes(e.value),v.clear(),"*?*"===e.value||"?"===e.value)i._snResultMgt.onSearchPQ({search_criteria:e.value,adv_search:e.adv_search,search_mode:a,originalSearchCriteria:n});else if(t.is(e)&&"6WEmbeddedTagger"===e.value&&t.is(e.embeddedtaggerState)){let t={state:e.embeddedtaggerState,onComplete:function(e){o.publish({channel:"SearchTrackerApi",topic:"hit",data:{category:"LifeLikeSearch",action:"searchBetaOnNativeApp",persDim:{pd1:e?"disabled":"enabled"}}}),sendNotificationWebInWin("6WEmbeddedTaggerPreference",e)},onFailure:function(){sendNotificationWebInWin("6WEmbeddedTaggerPreferenceClose")}};f.clickOnSearchBETA(t)}else{var s,r=!1;if(t.is(i._snResultMgt)&&t.is(i._snResultMgt._taggerProxy)&&(s=i._snResultMgt._taggerProxy.getCurrentFilter()),t.is(i._snResultMgt)&&t.is(i._snResultMgt._taggerProxy)&&t.is(s)&&t.is(s.allfilters)&&0!==Object.keys(s.allfilters).length&&(r=!0),e.adv_search&&r&&(!e.adv_search||i._snResultMgt._adv_search)||t.is(e.appCriteria,"string")&&e.appCriteria.length>0&&(e.value+=" AND "+e.appCriteria),e.adv_search&&"#advancedSearch"===e.value&&!r){let e=t.is(this.snTabManager.options)&&t.is(this.snTabManager.options.widget_id)?this.snTabManager.options.widget_id:"web_in_win";return i._snResultMgt.showAdvancedSearch({widgetId:e}),void i.setIcon(i.getTabView().getTabIcon())}e.adv_search&&r||(t.is(e.last_search)&&!0===e.last_search&&t.is(this._reSearchQuery)?(i.setOption("panelTitle",this._reSearchQuery.panelTitle),i.setTitle(this._reSearchQuery.value),i.onSearch({search_criteria:this._reSearchQuery.value,panelTitle:this._reSearchQuery.panelTitle,refine:this._reSearchQuery.last_tag_filter,adv_search:e.adv_search,search_mode:a,originalSearchCriteria:n,applicativeTitle:e.applicativeTitle,applicativeTitleWithResults:e.applicativeTitleWithResults})):i.onSearch({search_criteria:e.value,adv_search:e.adv_search,search_mode:a,originalSearchCriteria:n,applicativeTitle:e.applicativeTitle,applicativeTitleWithResults:e.applicativeTitleWithResults,isTitleOnly:i._snResultMgt._search_in_title}),""!==e.value&&"#myContent"!==e.value&&"#favoriteSearches"!==e.value&&(this._reSearchQuery={value:e.value,panelTitle:i.options.panelTitle,last_tag_filter:{}}))}}},activateInContextSearch:function(e){var i=this;if(t.is(this.snTabManager)){if(!t.is(l.getOption("tabbed_ui_support_level"))){var n=this.snTabManager.getActiveTab();t.is(n)?this.listenToOnce(n,"onTabActivated",(function(){i.refresh(n.getTabID())})):d.log("ERROR : no active tab found !!")}t.is(e.app_socket_id,"string")||(e.app_socket_id=this._socket_id);var a=this.snTabManager.addTab({tabTitle:t.is(e)&&t.is(e.title,"string")?e.title:"",search_ux_options:{widget_id:this._widget_id,resources:this.ressources,css_view_class:"maximized",in_apps_search:e,events:{onReady:function(){var e=this.getOption("in_apps_search");if(t.is(e,"object")){var n=e.app_socket_id;t.is(n)&&"socket_id_#saved_search_edit#"===n?(i._searchcom_socket.dispatchEvent("InContextInit","done",n),sendNotificationWebInWin("IncontextSearch_FavEdit","true")):t.is(l.getOption("tabbed_ui_support_level"))?i._dispathTowin({notif_name:"InContextInit",notif_parameters:"done"}):this.dispatchEvent("onRealInContextInit")}}}}});t.is(l.getOption("tabbed_ui_support_level"))||("socket_id_#saved_search_edit#"!==e.app_socket_id&&sendNotificationWebInWin("openTagger","OK"),this._realInContextInitDone=!1,this.listenToOnce(a.elements.container,"onRealInContextInit",(function(){i._realInContextInitDone=!0,t.is(i._inContextCriteria)&&i.inContextSearch(i._inContextCriteria)}))),"socket_id_#saved_search_edit#"===e.app_socket_id&&"furtive"!==e.mode||(this.snTabManager.hideTabBar(),!0===f.is6WInWebInWinActive()&&t.is(e)&&t.is(e.savedSearch)&&!0===e.savedSearch&&sendNotificationWebInWin("openTagger","OK"))}},deactivateInContextSearch:function(e){if(t.is(this.snTabManager)){var i=this.snTabManager.getActiveTab();if(t.is(i)){var n=i.getTabID();this.snTabManager.removeTab(n)}this.snTabManager.showTabBar()}this._realInContextInitDone=void 0,this._inContextCriteria=void 0,this.in_apps_search=null,!0===f.is6WInWebInWinActive()&&t.is(e)&&t.is(e.action_id)&&"edit_saved_search"===e.action_id&&sendNotificationWebInWin("closeTagger","OK"),t.is(e)&&t.is(e.action_id)&&"edit_saved_search"===e.action_id&&sendNotificationWebInWin("IncontextSearch_FavEdit","false")},inContextSearch:function(e){if(!1===this._realInContextInitDone)this._inContextCriteria=e;else{var i=this;t.is(e.searchString,"string")&&e.searchString.indexOf(":")>0?p.fetchPQsFromServer(this.ressources).then((function(){i.inContextSearchAsyncPQ(e)})):this.inContextSearchAsyncPQ(e)}},inContextSearchAsyncPQ:function(e){this.log("ResultWebInWin inContextSearch");var i=this.snTabManager.getActiveTab();if(t.is(i._snResultMgt)){if(!t.is(e,"object"))throw new Error("E_INVALIDARG: bad arguments ==> criteria for inContextSearch is not an object!");var n=i._snResultMgt.getOption("in_apps_search");if(!t.is(n,"object"))throw new Error("E_INVALIDARG: no in_apps_search options found !");var a=n.precond,s=n.source;if(e.adv_search=!1,e.advanced_criteria="",t.is(e.searchString,"string")){if(e.searchString===f.SearchTypeEnum.ADVANCED_SEARCH){e.adv_search=!0,e.advanced_criteria="";let n=t.is(this.snTabManager.options)&&t.is(this.snTabManager.options.widget_id)?this.snTabManager.options.widget_id:"web_in_win";return void i._snResultMgt.showAdvancedSearch({widgetId:n})}var r=p.isAPQSearch(e.searchString);t.is(e.originalSearchCriteria)||(e.originalSearchCriteria=e.searchString),e.searchString=_.manageWildcardAddtion(e.searchString),e.searchString=f.replacePQsWithCVPrefixes(e.searchString),!t.is(r)&&e.searchString.length>0&&"#favoriteSearches"!==e.searchString&&(t.is(a,"string")&&a.length>0?!0===e.adv_search?e.searchString="#advancedSearch":e.searchString+=" AND "+a:t.is(e.applicativeCriteria,"string")&&e.applicativeCriteria.length>0&&(e.searchString+=" AND "+e.applicativeCriteria))}else{if(!t.is(a,"string")||a.length<=0)throw new Error("invalid in_apps_search options, no in_apps_search.precond found !");e.searchString=n.precond,e.originalSearchCriteria=""}var o={search_criteria:e.searchString,adv_search:e.adv_search,advanced_criteria:e.advanced_criteria,search_mode:"index",originalSearchCriteria:e.originalSearchCriteria,search_criteria_to_display:n.displayValue,tag_filter:e.tag_filter,source:s,search_name:e.search_name,resetLocalFilter:!0};i._snResultMgt.onSearch(o)}},refresh:function(e){var i=this.snTabManager._getTabView(e);t.is(i)&&i.onRefresh()},getSuggestions:function(e){var t=this;this.ressources.getSuggestions(e,(function(e){var i=(e=e||[]).map((function(e){return{label:e.entry,command:query.replace(/^\s+|\s+$/g,"").replace(/[A-Za-z\1-9\_\u00C0-\u017F]+$/,e.entry),icon:"lightbulb"}}));t._dispathTowin({notif_name:"UpdateSuggests",notif_parameters:{serverSuggests:i}})}))},setCtxMenu:function(e,i,n){var a=this,s=void 0,o=!0,c=-1;t.is(n,"object")?(s=n.tabID,o=n.doNotDisplay,t.is(n.somethingSelected)&&(c=n.somethingSelected)):1!==n&&(o=!1,c=1);var d=this.snTabManager._getTabView(s),h=t.is(i)&&t.is(i.actions)&&t.is(i.actions.length)?i.actions.length:0,g=l.getOption("max_item_for_contextualPanel"),_=0;let u=d.getCollection();t.is(u.totalCount)&&u.totalCount;let p=[],v="OnPremise";if(h>0){for(let e of i.actions)p.push(u.get(e.id));v=p[0].getPlatformID()}let S=f.hasTaggerSubjectURI(p,v);if(f.isFUNActive("FUN075064")){for(1===h&&"V_LocationWithoutSelectedObject"===i.actions[0].id&&1,_=0;_<h;_++){if(h>g&&(i.actions[_].actions=[]),S){var m={availabilityMode:" Normal=YES CommandSet=YES Editability=NO SmallScale=YES LargeScale=YES",id:l.getOption("command_id.add_tag"),image:"Search_Add_Tag",multisel:!0,sourcejs:"DS/SNResultUX/utils/AddTag_ActionHandler",title:I.get("add_tag.add_tag_header")};i.actions[_].actions.unshift(m)}if(!0!==d.getSNSkeleton().getPreviewStatus()){var b={availabilityMode:" Normal=YES CommandSet=YES Editability=NO SmallScale=YES LargeScale=YES",id:"new_preview",image:"I_SearchPreview",multisel:!0,sourcejs:"DS/SNResultUX/utils/Select_ActionHandler",title:I.get("previewTitle")};i.actions[_].actions.unshift(b)}}}if(!t.is(e)||!t.is(e.actions))throw new Error("E_INVALIDARG: bad jsonCtxMenu.actions given to setCtxMenu method !");if(!o)if(h<=g){var w={SavedSearch:!0},W={},T=function(e){if(t.is(e)&&t.is(e.actions,"array")){var i=[];if(!t.is(u))return i;for(var n=0;n<e.actions.length;n++){var a=u.get(e.actions[n].id);t.is(a)&&t.is(w[a.get("ds6w:type_value")])&&(i.push(a),W[e.actions[n].id]=e.actions[n].actions)}return i}}(i);t.is(T,"array")&&T.length>0?require(["DS/SNResultUX/utils/SearchLocalActions"],(function(e){e._isSelectionFromSameSource(T).then((function(n){n.data.applicativeInfo={incontextMode:t.is(d.getOption("in_apps_search")),clientAppInfo:f.identifyClientInfo(d.getSNSkeleton().getOption("addinMode"))},n.onComplete=function(e){if("success"===e.status){for(_=0;_<e.actions.length;_++){var n=e.actions[_].id;t.is(W.hasOwnProperty(n))&&e.actions[_].actions.forEach((function(e){W[n].push(e)}))}a._searchcom_socket.dispatchEvent("onSetCtxMenuForItemViewOptions",{actions_data:i,somethingSelected:c},d.getSNSkeleton().getSocketID(!0))}else a._searchcom_socket.dispatchEvent("onSetCtxMenuForItemViewOptions",{actions_data:i,somethingSelected:c},d.getSNSkeleton().getSocketID(!0))},n.onFailure=function(){a._searchcom_socket.dispatchEvent("onSetCtxMenuForItemViewOptions",{actions_data:i,somethingSelected:c},d.getSNSkeleton().getSocketID(!0))},e.getActions(n)}),(function(){a._searchcom_socket.dispatchEvent("onSetCtxMenuForItemViewOptions",{actions_data:i,somethingSelected:c},d.getSNSkeleton().getSocketID(!0))}))})):this._searchcom_socket.dispatchEvent("onSetCtxMenuForItemViewOptions",{actions_data:i,somethingSelected:c},d.getSNSkeleton().getSocketID(!0))}else this._searchcom_socket.dispatchEvent("onSetCtxMenuForItemViewOptions",{actions_data:i,somethingSelected:c},d.getSNSkeleton().getSocketID(!0));a._listAccelerator={};var C=e.actions,M=C.length;for(_=0;_<M;_++)for(var x=C[_].actions,y=0,E=x.length;y<E;y++){var R=x[y];t.is(R.accelerator)&&R.accelerator.length>0&&(a._listAccelerator[R.accelerator.replace(/\+/g,"")]=R.id)}Object.keys(a._listAccelerator).length>0&&(document.onkeydown=function(e){var i="",n=window.event?event:e;if(n.ctrlKey&&n.shiftKey?i+="CtrlShift":n.ctrlKey?i+="Ctrl":n.altKey?i+="Alt":n.shiftKey?i+="Shift":n.metaKey&&(i+="Meta"),13===n.keyCode?i+="Enter":32===n.keyCode?i+="Space":46===n.keyCode?i+="Del":i+=String.fromCharCode(n.keyCode).toUpperCase(),t.is(a._listAccelerator[i],"string"))sendNotificationWebInWin("acceleratorEvt",'{ "action":"'+a._listAccelerator[i]+'"}');else if("CtrlP"===i){var s=t.extendElement(document.body).getElements(".fonticon-print");if(t.is(s)){var o=s[0].getParent();if(t.is(o)){var c=o.getParent();t.is(c)&&r.dispatchEvent(c,"click")}}}})},setSessionResults:function(e){var i=void 0,n=void 0;if(t.is(e,"object"))if(t.is(e.sessionResponse)){i=e.tabID;try{n=JSON.parse(e.sessionResponse)}catch(e){n=void 0}}else n=e;var a=this.snTabManager._getTabView(i);this._searchcom_socket.dispatchEvent("onSetSessionResponse",n,a.getCollection().getSocketID())},_getTaggerProxySocketId:function(e){return"webinwinproxy_socket_"+this._widget_id+"_"+e},addFilterChangeListener:function(e){if(this.log("-> ResultWebInWin.addFilterChangeListener"),!t.is(e,"object")||!t.is(e.data)||!t.is(e.event_id))throw this.log("Error, expect to have parameters.data or parameters.event_id arg!!!"),new Error("No parameters.data or parameters.event_id given to addFilterChangeListener method !");this._searchcom_socket.dispatchEvent(e.event_id,e.data,this._getTaggerProxySocketId(e.proxyId))},colorize:function(e){if(this.log("-> ResultWebInWin.colorize"),!t.is(e,"object")||!t.is(e.data)||!t.is(e.event_id))throw new Error("No parameters.data or parameters.event_id given to colorize method !");this._searchcom_socket.dispatchEvent(e.event_id,e.data,this._getTaggerProxySocketId(e.proxyId))},unColorize:function(e){if(this.log("-> ResultWebInWin.unColorize"),!t.is(e,"object")||/*!UWACore.is(parameters.data) || */!t.is(e.event_id))throw new Error("No parameters.event_id given to unColorize method !");this._searchcom_socket.dispatchEvent(e.event_id,e.data,this._getTaggerProxySocketId(e.proxyId))},addCriteriaChangeListener:function(e){if(this.log("-> ResultWebInWin.addCriteriaChangeListener"),!t.is(e,"object")||!t.is(e.data)||!t.is(e.event_id))throw this.log("Error, expect to have parameters.data or parameters.event_id arg!!!"),new Error("No parameters.data or parameters.event_id given to addCriteriaChangeListener method !");this._searchcom_socket.dispatchEvent(e.event_id,e.data,this._getTaggerProxySocketId(e.proxyId))},addCriteriaModifiedListener:function(e){if(this.log("-> ResultWebInWin.addCriteriaModifiedListener"),!t.is(e,"object")||!t.is(e.data)||!t.is(e.event_id))throw this.log("Error, expect to have parameters.data or parameters.event_id arg!!!"),new Error("No parameters.data or parameters.event_id given to addCriteriaModifiedListener method !");this._searchcom_socket.dispatchEvent(e.event_id,e.data,this._getTaggerProxySocketId(e.proxyId))},addPLMUpdateListener:function(e){if(this.log("-> ResultWebInWin.addPLMUpdateListener"),!t.is(e,"object")||!t.is(e.data)||!t.is(e.event_id))throw this.log("Error, expect to have parameters.data or parameters.event_id arg!!!"),new Error("No parameters.data or parameters.event_id given to addPLMUpdateListener method !");this._searchcom_socket.dispatchEvent(e.event_id,e.data,this._getTaggerProxySocketId(e.proxyId))},addRequestSuggestsListener:function(e){if(this.log("-> ResultWebInWin.addRequestSuggestsListener"),!t.is(e,"object")||!t.is(e.data)||!t.is(e.event_id))throw this.log("Error, expect to have parameters.data or parameters.event_id arg!!!"),new Error("No parameters.data or parameters.event_id given to addRequestSuggestsListener method !");this._searchcom_socket.dispatchEvent(e.event_id,e.data,this._getTaggerProxySocketId(e.proxyId))},onFilterChange:function(e){if(this.log("-> ResultWebInWin.onFilterChange"),!t.is(e)||!t.is(e.data))throw this.log("Error, expect to have parameters.data arg !!!"),new Error("No parameters.data given to onFilterChange method !");this._searchcom_socket.dispatchEvent("onFilterChange",e.data,this._getTaggerProxySocketId(e.proxyId))},onLoadMoreTags:function(e){if(this.log("-> ResultWebInWin.onLoadMoreTags"),!t.is(e)||!t.is(e.data))throw this.log("Error, expect to have parameters.data arg !!!"),new Error("No parameters.data given to onFilterChange method !");this._searchcom_socket.dispatchEvent("onLoadMoreTags",e.data,this._getTaggerProxySocketId(e.proxyId))},_internalFilterChangeListener:function(e){if(this.log("-> ResultWebInWin._internalFilterChangeListener"),!t.is(e)||!t.is(e.data))throw this.log("Error, expect to have parameters.data arg !!!"),new Error("No parameters.data given to _internalFilterChangeListener method !");this._searchcom_socket.dispatchEvent("_internalFilterChangeListener",e.data,this._getTaggerProxySocketId(e.proxyId))},onGroupingChange:function(e){if(this.log("-> ResultWebInWin.onGroupingChange"),!t.is(e)||!t.is(e.data))throw this.log("Error, expect to have parameters.data arg !!!"),new Error("No parameters.data given to onGroupingChange method !");this._searchcom_socket.dispatchEvent("onGroupingChange",e.data,this._getTaggerProxySocketId(e.proxyId))},onCriteriaSelect:function(e){if(this.log("-> ResultWebInWin.onCriteriaSelect"),!t.is(e)||!t.is(e.data))throw this.log("Error, expect to have parameters.data arg !!!"),new Error("No parameters.data given to onCriteriaSelect method !");this._searchcom_socket.dispatchEvent("onCriteriaSelect",e.data,this._getTaggerProxySocketId(e.proxyId))},addVisibilityChangeListener:function(e){if(this.log("-> ResultWebInWin.addVisibilityChangeListener"),!t.is(e,"object")||!t.is(e.data)||!t.is(e.event_id))throw this.log("Error, expect to have parameters.data or parameters.event_id arg!!!"),new Error("No parameters.data or parameters.event_id given to addFilterChangeListener method !");this._searchcom_socket.dispatchEvent(e.event_id,e.data,this._getTaggerProxySocketId(e.proxyId))},_dispathTowin:function(e){if(!t.is(e,"object")||!t.is(e.notif_name)||void 0===e.notif_parameters)throw this.log("E_INVALIDARG, expect to have parameters.notif_name arg & parameters.notif_parameters in _dispathTowin !!!"),new Error("No parameters.notif_name arg & parameters.notif_parameters given to _dispathTowin method !");this.log("ResultWebInWin._dispathTowin for "+e.notif_name);var i=t.is(e.notif_parameters,"string")?e.notif_parameters:JSON.stringify(e.notif_parameters);!0===l.getOption("no_jsnotif")?this.log("JSNOTIF deactivated for "+e.notif_name):sendNotificationWebInWin(e.notif_name,i)},resetMultisel:function(){o.publish({channel:this.snTabManager._getTabView().getSNSkeleton().getOption("messagingChannel"),topic:"onResetMultisel",data:{}})},clearWebInWinCSO:function(){o.publish({channel:this.snTabManager._getTabView().getSNSkeleton().getOption("messagingChannel"),topic:"onclearWebInWinCSO",data:{}})},updateMultisel:function(e){this._searchcom_socket.dispatchEvent("onUpdateMultisel",e,this.snTabManager._getTabView().getSNSkeleton().getSocketID())},componentToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},rgbToHex:function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},SetShadingValues:function(e,i){if(d.log("ResultWebInWin SetShadingValues"),!t.is(e))throw new Error("E_INVALIDARG: bad jsonRGBTData given to SetRGBTValues method !");this._unsetShadingValues(i);for(var n=e.length,a=[],s=0;s<n;s++){var r=e[s],o={criteria:function(e){var t=!1;return e.id===this.id&&(t=!0),t},color:this.rgbToHex(r.r,r.g,r.b),id:r.id};a.push(o)}this.snTabManager._getTabView(i).setShadings(a)},_unsetShadingValues:function(e){d.log("ResultWebInWin UnSetShadingValues"),this.snTabManager._getTabView(e).setShadings([{color:"initial",criteria:function(){return!0}}])},UnSetShadingValues:function(e){this._unsetShadingValues(e);var i=this.snTabManager.getActiveTab();if(t.is(i)){var n=i.getTabID(),a=this.snTabManager._getAllTabs();if(t.is(a,"array"))for(var s=0;s<a.length;s++){var r=a[s].get("tab");r.getTabID()!==n&&r.updateOnActivate({unsetShading:!0})}}},clearTaggerLocalFilters:function(){var e=this.snTabManager.getActiveTab();t.is(e._snResultMgt)&&(t.is(e._snResultMgt._search_tag_filter,"object")&&(e._snResultMgt._search_tag_filter={}),t.is(e._snResultMgt._taggerProxy)&&(e._snResultMgt._taggerProxy.clearLocalFilter(),e._snResultMgt._taggerProxy.clearLocalGrouping&&e._snResultMgt._taggerProxy.clearLocalGrouping()))},logout:function(){this._searchcom_socket.dispatchEvent("onLogout")},setVisibility:function(e){if(d.log("visiblility:",e),0===e){this.nextIsNewSearch=!0;var i=this.snTabManager.getActiveTab();if(i._snResultMgt&&i._snResultMgt.getCollection(),i._snResultMgt&&i._snResultMgt.getCollection()&&i._snResultMgt.getCollection().service_parameters){var n=0,a=null;do{(a=i._snResultMgt.getSNSkeleton()._skeleton.getViewAt(n))&&a.contentsViews&&a.contentsViews[a.currentViewId]&&a.contentsViews[a.currentViewId].nestedView&&a.contentsViews[a.currentViewId].nestedView.view&&t.is(a.contentsViews[a.currentViewId].nestedView.view.initComponentState,"function")&&a.contentsViews[a.currentViewId].nestedView.view.initComponentState({dataIndex:i._snResultMgt.getCollection().service_parameters.order_field,sort:i._snResultMgt.getCollection().service_parameters.order_by}),n++}while(t.is(a))}var s=this.snTabManager._getTabView();if(t.is(s)){var r=s.getOption("in_apps_search");t.is(r,"object")&&t.is(r.app_socket_id)&&"socket_id_#saved_search_edit#"===r.app_socket_id&&deactivateInContextSearch()}}},setSecurityContext:function(e){S.setSecurityContext(e)},_getSearchView:function(){return this.snTabManager._getTabView()},setTaggerVisibility:function(e){u.isTaggerVisibleFlag(e)},setTaggerDisplayStatus:function(e){let i=e;u.setTaggerDisplayStatus(e);let n=t.extendElement(document.body).getElement("."+this._searchcontent_id);t.is(n)&&!0===f.is6WInWebInWinActive()&&(n.removeClassName("taggerVisible"),i?(n.addClassName("taggerVisible"),l.options&&l.options.search_settings&&(l.options.search_settings.taggerClosed=!1)):l.options&&l.options.search_settings&&(l.options.search_settings.taggerClosed=!0));let a=this.snTabManager.getActiveTab();t.is(a._snResultMgt)&&a._snResultMgt._manageEmbeddedTaggerView(e)},resetCollection:function(){let e=this.snTabManager.getActiveTab();if(e._snResultMgt&&e._snResultMgt.getCollection()){let i=e._snResultMgt.getCollection();t.is(i)&&(i._resetState(),i.reset(),i.initTreeDocument())}},ODTFunction:function(e){let i=!0;if(!t.is(e.functionName))throw"E_INVALIDARG: bad jsonArg.functionName given to ODTFunction method !";if(!t.is(e.functionArg))throw"E_INVALIDARG: bad jsonArg.functionArg given to ODTFunction method !";var n=e.functionName,a=e.functionArg;console.log(a);let s,r=this,o=r.snTabManager.getActiveTab();if(t.is(o._snResultMgt)){let e=o._snResultMgt.getCollection();t.is(e)&&(s=e.getTreeDocument())}if(!t.is(s))throw"E_INVALIDARG: bad treeDocument given to ODTFunction method !";require(["DS/SNWebInWinPO/ResultWebInWinFunctions"],(function(e){e.initMembers({activeTab:o,treeDocument:s,ResultWebInWin:r,snTabManager:r.snTabManager}),i=e[n](a),!0===i&&setTimeout((function(){sendNotificationWebInWin("EndODTAsync","OK")}),1e3)}))}})}));