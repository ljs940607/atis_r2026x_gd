define("DS/WebDocumentVisualizationUI/WebDocumentBookmark",["require","exports","DS/VisuEvents/EventsManager","UWA/Core","DS/Utilities/TouchUtils","css!./WebDocumentVisualizationUI.css"],(function(e,t,n,i,o){"use strict";return class{constructor(e){let t,s,r,l,a,d=this,c=e.bookmarkData;function u(t){d.setHighlight(!0),e.onClickCB&&e.onClickCB({target:c,data:t,div:d})}function m(){r&&(r.removeEventListener("transitionend",m),r.setStyle("display","none"))}function h(){t&&r&&l&&(t.hasAttribute("expanded")?(r.addEventListener("transitionend",m),t.removeAttribute("expanded"),l.removeClassName("wux-ui-3ds-expand-down"),l.addClassName("wux-ui-3ds-expand-right")):(r.setStyle("display",""),window.requestAnimationFrame((()=>{t&&l&&(t.setAttribute("expanded",""),l.removeClassName("wux-ui-3ds-expand-right"),l.addClassName("wux-ui-3ds-expand-down"))}))),e.onExpandCB&&e.onExpandCB())}t=i.createElement("div",{class:"WebDocBookmarkMainDiv"});let p=i.createElement("div",{class:"WebDocBookmarkHeaderDiv"}).inject(t),g=c.items&&c.items.length>0;if(s=i.createElement("div",{class:"WebDocBookmarkExpanderDiv",styles:{visibility:g?"inherit":"hidden"}}).inject(p),o.getTouchMode()&&s&&s.addClassName("touchMode"),g&&n.addEvent(s,"onPrimaryPointerClick",h),r=i.createElement("div",{class:"WebDocBookmarkContentDiv",styles:{display:"none"}}).inject(t),l=i.createElement("i",{class:"wux-ui-3ds wux-ui-3ds-expand-right"}).inject(s),c.iconUrl){let e=i.createElement("img",{class:"WebDocBookmarkIcon",src:c.iconUrl,events:{error:function(){p&&e&&p.removeChild(e)}}}).inject(p)}a=i.createElement("div",{class:"WebDocBookmarkTitleDiv",text:c.title,styles:{"font-size":e.fontSize,"font-weight":c.bold?"bold":"normal","font-style":c.italic?"italic":"normal"}}).inject(p),e.onClickCB&&n.addEvent(a,"onPrimaryPointerClick",u),this.getBookmarkDiv=function(){return t},this.getContentDiv=function(){return r},this.isExpanded=function(){return!!t&&t.hasAttribute("expanded")},this.setExpanded=function(n){g&&t&&r&&l&&(!n&&t.hasAttribute("expanded")?(r.addEventListener("transitionend",m),t.removeAttribute("expanded"),l.removeClassName("wux-ui-3ds-expand-down"),l.addClassName("wux-ui-3ds-expand-right")):n&&!t.hasAttribute("expanded")&&(r.setStyle("display",""),window.requestAnimationFrame((()=>{t&&l&&(t.setAttribute("expanded",""),l.removeClassName("wux-ui-3ds-expand-right"),l.addClassName("wux-ui-3ds-expand-down"))}))),e.onExpandCB&&e.onExpandCB())},this.setHighlight=function(e){e&&t&&!t.hasClassName("WebDocBookmarkHighlighted")?t.addClassName("WebDocBookmarkHighlighted"):!e&&t&&t.hasClassName("WebDocBookmarkHighlighted")&&t.removeClassName("WebDocBookmarkHighlighted")},this.remove=function(){e.onClickCB&&n.removeEvent(a,"onPrimaryPointerClick",u),g&&n.removeEvent(a,"onPrimaryPointerClick",h),t&&t.remove(),s=t=r=l=null}}}})),define("DS/WebDocumentVisualizationUI/WebDocumentScroller",["require","exports","UWA/Controls/ThemedScroller","UWA/Core"],(function(e,t,n,i){"use strict";return class{constructor({uiFrame:e}){let t=i.createElement("div",{class:"DMUDocumentVerticalScrollerDiv"}),o=(new n).inject(e);o.getInnerElement().setContent(t),o.getInnerElement().parentNode.setStyles({position:"absolute",top:"0px",bottom:"0px",right:"0px",width:"15px",float:"right"});let s=i.createElement("div",{class:"DMUDocumentHorizontalScrollerDiv",styles:{height:"1px"}}),r=(new n).inject(e);r.getInnerElement().setContent(s),r.getInnerElement().parentNode.setStyles({position:"absolute",left:"0px",right:"0px",bottom:"0px",height:"15px",float:"bottom"});let l=new Set,a=!1;function d(){a?a=!1:l.forEach((e=>{o&&o.getInnerElement()&&e({scrollTop:o.getInnerElement().scrollTop,scrollLeft:r.getInnerElement().scrollLeft})}))}o.getInnerElement().addEventListener("scroll",d),r.getInnerElement().addEventListener("scroll",d),this.setContentSize=({height:e,width:n})=>{t&&t.setStyle("height",e+"px"),s&&s.setStyle("width",n+"px")},this.setOffset=({left:e,right:t,bottom:n})=>{o&&o.getInnerElement()&&o.getInnerElement().parentNode.setStyles({right:t+"px"}),r&&r.getInnerElement()&&r.getInnerElement().parentNode.setStyles({bottom:n+"px",left:e+"px",right:t+"px"})},this.updateScroll=({left:e,top:t})=>{o&&o.getInnerElement()&&(a=!0,o.getInnerElement().scrollTop=t),r&&r.getInnerElement()&&(a=!0,r.getInnerElement().scrollLeft=e)},this.onScroll=e=>{l.add(e)},this.destroy=()=>{o&&(o.getInnerElement()&&o.getInnerElement().removeEventListener("scroll",d),o.destroy()),r&&(r.getInnerElement()&&r.getInnerElement().removeEventListener("scroll",d),r.destroy()),l.clear(),o=t=null}}}})),define("DS/WebDocumentVisualizationUI/WebDocumentBookmarksPanel",["require","exports","DS/CATWebUXComponents/CATWebUXSectionHeader","UWA/Controls/ThemedScroller","UWA/Core","DS/CoreEvents/ModelEvents","DS/Utilities/TouchUtils","DS/WebDocumentVisualizationUI/WebDocumentBookmark","i18n!DS/WebDocumentVisualizationUI/assets/nls/WebDocumentVisualizationUI"],(function(e,t,n,i,o,s,r,l,a){"use strict";return class{constructor(){let e,t,d,c,u,m,h=this,p=new s;const g=r.getTouchMode()?18:14,f=r.getTouchMode()?16:12;function v(e,t){return p.publish({event:e,data:t})}function x(e){m&&m!==e.div&&m.setHighlight(!1),m=e.div,v("onBookmarkSelected",e)}function b(){v("onBookmarkExpanded",{})}function E(e,t,n,i){e&&e.length&&t&&i&&(n=Math.max(n,f),e.forEach((function(e){const o=e.items?[]:void 0;let s=new l({bookmarkData:e,fontSize:n,onClickCB:x,onExpandCB:()=>{if(o&&!o.length){let t=s.getContentDiv();t&&E(e.items,t,n-1,o)}b()}}),r={view:s,pointedPage:e.pointedPage||0,pointedPosition:e.pointedPosition,pointedId:e.pointedId,items:o};i.push(r);let a=s.getBookmarkDiv();a&&t.appendChild(a)})))}function k(e,t,n){if(!e||!t)return;let i;for(let o=0;o<e.length;o++)if(e[o].pointedPage<t)i=e[o];else{if(e[o].pointedPage!==t)break;if(!e[o].pointedPosition||e[o].pointedPosition.y>n)i=e[o];else{if(e[o].pointedPosition&&Math.abs(e[o].pointedPosition.y-n)<=1e-4)return e[o];if(e[o].pointedPosition&&e[o].pointedPosition.y<n)break}}return i}function C(e){let t=u;for(;t&&t.length;)t.forEach((function(t){t.view.setExpanded(e)})),t=t.reduce((function(e,t){return e.concat(t.items||[])}),[]);b()}function D(e,t){return e?e.findIndex((function(e){if(e.pointedId===t)return!0;return(e.items?D(e.items,t):-1)>=0})):-1}this.buildPanel=function(s){h.cleanPanel(),e||(e=o.createElement("div",{id:"WebDocumentBookmarksPanelMainDiv"})),e.setStyles({height:"100%"});let r=o.createElement("div",{class:"WebDocumentBookmarksPanelSectionMainDiv"}).inject(e);r.setStyles({height:"100%"});let l=s.filter((function(e){return e.items.length}));d=new n({draggable:!1,sectionLabel:a.bookmarksPanel.title,quickAccessBtnList:l.length?[{id:"ExpandAllButton",type:"toggle",initialFontIcon:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-expand-all",alternativeFontIcon:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collapse-all",title:a.bookmarksPanel.expandOrCollapseAll,cb:C}]:[]}),r.appendChild(d.getContent());return c=o.createElement("div",{id:"WebDocumentBookmarksPanelMainContainer",styles:{"background-color":"white",padding:"5px"}}),t=(new i).inject(r),t.getInnerElement().setContent(c),t.getContent().setStyle("height","calc(100% - 40px)"),u||(u=[]),E(s,c,g,u),1===u.length&&u[0].view.setExpanded(!0),u.sort((function(e,t){return e.pointedPage<t.pointedPage?-1:e.pointedPage>t.pointedPage?1:e.pointedPosition?t.pointedPosition?e.pointedPosition.y>t.pointedPosition.y?-1:e.pointedPosition.y<t.pointedPosition.y?1:0:1:-1})),e},this.highlightBookmark=function(e){var t,n;if(!e||!u)return;let i,o;if(e.pageNumber&&e.yCoordinate)for(o=k(u,e.pageNumber,e.yCoordinate);o&&(i=o,o.view.isExpanded()&&(null===(t=o.items)||void 0===t?void 0:t.length));)o=k(o.items,e.pageNumber,e.yCoordinate);else if(e.elementId){let t=D(u,e.elementId);for(t>=0&&(o=u[t]);o&&t>=0&&(i=o,o.view.isExpanded()&&(null===(n=o.items)||void 0===n?void 0:n.length));)t=D(o.items,e.elementId),t>=0&&(o=o.items[t])}i?(m&&m.setHighlight(!1),i.view.setHighlight(!0),m=i.view):m&&(m.setHighlight(!1),m=null)},this.subscribe=function(e,t){return e&&t?p.subscribe({event:e},t):""},this.unsubscribe=function(e){null!=e&&p.unsubscribe(e)},this.cleanPanel=function(){if(e){for(m&&m.setHighlight(!1),u&&u.forEach((function(e){e.view.remove()}));e.firstChild;)e.removeChild(e.firstChild);d&&d.clear(),t&&t.destroy(),u=d=t=e=m=null}}}}}));