define("DS/DELPPWProcessReplaceModule/MfgProcessReplaceModule",["UWA/Core","DS/DELPPWInsertCmdModule/InsertUI"],(function(e,t){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","LinkBehavior","ResourceBehavior","SelectionBehavior","SearchBehavior","MfgProcessReplaceBehavior","MfgProcessBehavior","WUXNodeModelBehavior","TreeListViewBehavior","ReplaceWhereUsedBehavior"],creator:function(n,i,o,r,a,s,c,l,u,g,d,f){var R,h,p,y,v,B={},M=null,S=function(){var t,n=s.getSelectedInsts(),i=!1;return Array.isArray(n)&&n.length>0&&(t=o.getAggregatingReferenceModelFromInstance(n[0]),e.is(t)&&(t.isSystem()||t.isWorkInstruction()||t.isResource())&&(i=!0)),i};return v=function(t,n){e.is(n.newRef)&&l.replace("replaceByNew",n.newRef.id)},function(e,t){t.onComplete=v,t.silent=!0,o.createRefOrInst(e,null,t)},R=function(){S()&&r.getRelations().then((function(e){e.isRelationsLoaded&&l.replace("replaceByLatest")}))},p=function(){S()&&r.getRelations().then((function(e){e.isRelationsLoaded&&l.replace("replaceByNewRevision")}))},h=function(){var t,n,i,u,g=s.getSelectedInsts();S()&&(t=function(t){e.is(t,"array")&&t.length>0&&l.replace("replaceByExisting",t[0].id)},r.getRelations().then((function(e){var r,s,l;e.isRelationsLoaded&&1===g.length&&(n=g[0],l=(i=o.getReferenceModelFromInstance(n)).get("PPRTYPE"),u=o.getAggregatingReferenceModelFromInstance(n),r=o.getValidChildTypes(u),"OPERATION"!==l&&"SYSTEM"!==l||((s=o.getTypeHierarchy(i.get("type"))).unshift(i.get("type")),r=r.filter((function(e){return s.indexOf(e)>-1}))),c.showSearchDialoguAndActivate(t,{title:a.getNLSValue("Dialog.ReplaceByExisting.Title"),searchTitle:a.getNLSValue("Search.ReplaceByExisting.Title"),types:r}))})))},y=function(){S()&&r.getRelations().then((function(e){e.isRelationsLoaded&&l.replace("replaceByNew")}))},{listenTo:function(){return{ReplaceByLatestRevision:R,ReplaceByExisting:h,ReplaceByNewRevision:p,ReplaceByNewReference:y,refreshAll:this.closeDialog}},onStart:function(r,s){B=e.extend(B,r),e.is(B.insertFormAttributeXML)||(n.debug("Insert Module loading failed : insertFormAttributeXML option is undefined"),s()),M=new t(n,i,a,o),s()},onStop:function(){M.isActive()&&M.destroyUI(),M=void 0},closeDialog:function(){e.is(M)&&M.destroyUI()}}}}}));