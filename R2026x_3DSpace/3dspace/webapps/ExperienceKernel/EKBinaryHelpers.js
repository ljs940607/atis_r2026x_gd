define("DS/ExperienceKernel/EKBinaryHelpers",[],(function(){"use strict";var r={BinaryWriter:function(r){this.arrayBuffer=new ArrayBuffer(r||0),this.dataView=new DataView(this.arrayBuffer),this.offset=0}},t=function(r,t){if(r.arrayBuffer.byteLength<r.offset+t){var e=r.arrayBuffer.byteLength+r.arrayBuffer.byteLength/2;e<r.offset+t&&(e=r.offset+t),e=Math.ceil(e);var i=new Uint8Array(e);i.set(new Uint8Array(r.arrayBuffer)),r.arrayBuffer=i.buffer,r.dataView=new DataView(r.arrayBuffer)}};function e(r,t){return r instanceof t?r:r.buffer instanceof ArrayBuffer?new t(r.buffer,r.byteOffset,r.byteLength/t.BYTES_PER_ELEMENT):new t(r)}r.BinaryWriter.prototype.tell=function(){return this.offset},r.BinaryWriter.prototype.seek=function(r){return this.arrayBuffer.byteLength>=r&&(this.offset=r+0),this},r.BinaryWriter.prototype.writeInt8=function(r){return t(this,1),this.dataView.setInt8(this.offset,r),this.offset++,this},r.BinaryWriter.prototype.writeUint8=function(r){return t(this,1),this.dataView.setUint8(this.offset,r),this.offset++,this},r.BinaryWriter.prototype.writeInt16=function(r){return t(this,2),this.dataView.setInt16(this.offset,r,!0),this.offset+=2,this},r.BinaryWriter.prototype.writeUint16=function(r){return t(this,2),this.dataView.setUint16(this.offset,r,!0),this.offset+=2,this},r.BinaryWriter.prototype.writeInt32=function(r){return t(this,4),this.dataView.setInt32(this.offset,r,!0),this.offset+=4,this},r.BinaryWriter.prototype.writeUint32=function(r){return t(this,4),this.dataView.setUint32(this.offset,r,!0),this.offset+=4,this},r.BinaryWriter.prototype.writeInt64=function(r){return t(this,8),this.dataView.setBigInt64(this.offset,BigInt(r),!0),this.offset+=8,this},r.BinaryWriter.prototype.writeUint64=function(r){return t(this,8),t(this,8),this.dataView.setBigUint64(this.offset,BigInt(r),!0),this.offset+=8,this},r.BinaryWriter.prototype.writeFloat=function(r){return t(this,4),this.dataView.setFloat32(this.offset,r,!0),this.offset+=4,this},r.BinaryWriter.prototype.writeDouble=function(r){return t(this,8),this.dataView.setFloat64(this.offset,r,!0),this.offset+=8,this},r.BinaryWriter.prototype.writeChar=function(r){return t(this,1),this.dataView.setInt8(this.offset,r.charCodeAt(0)),this.offset++,this},r.BinaryWriter.prototype.writeBool=function(r){return t(this,1),this.dataView.setUint8(this.offset,r?1:0),this.offset++,this},r.BinaryWriter.prototype.writeNodeId=function(r){return r.isConnected()&&(this.writeString(r.impl.nodeImpl.hypervisorUuid),this.writeString(r.impl.nodeImpl.pool),this.writeInt32(r.impl.ws.name.hypervisorId),this.writeInt32(r.impl.ws.name.id)),this},r.BinaryWriter.prototype.writeString=function(r){r=r||"";var e=unescape(encodeURIComponent(r));return t(this,e.length+4),this.writeUint32(e.length),this.writeStringInternal(e),this},r.BinaryWriter.prototype.writeStringInternal=function(r){t(this,r.length);for(var e=0;e<r.length;++e)this.dataView.setUint8(this.offset,r.charCodeAt(e)),this.offset++;return this},r.BinaryWriter.prototype.writeStrings=function(r){r=r||[];for(var t=0;t<r.length;++t)this.writeString(r[t]);return this},r.BinaryWriter.prototype.writeBoolArray=function(r){return this.writeUint8Array(r)},r.BinaryWriter.prototype.writeUint8Array=function(r){return r=e(r,Uint8Array),t(this,r.byteLength),new Uint8Array(this.arrayBuffer).set(r,this.offset),this.offset+=r.byteLength,this},r.BinaryWriter.prototype.writeInt8Array=function(r){return r=e(r,Int8Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeUint16Array=function(r){return r=e(r,Uint16Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeInt16Array=function(r){return r=e(r,Int16Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeUint32Array=function(r){return r=e(r,Uint32Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeInt32Array=function(r){return r=e(r,Int32Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeUint64Array=function(r){if(!(r instanceof BigInt64Array||r instanceof BigUint64Array))for(let t=0;t<r.length;++t){if("bigint"!=typeof r[t]){const e=new Array(r.length);for(t=0;t<r.length;++t)e[t]=BigInt(r[t]);r=e;break}}return r=e(r,BigUint64Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeInt64Array=function(r){if(!(r instanceof BigInt64Array||r instanceof BigUint64Array))for(let t=0;t<r.length;++t){if("bigint"!=typeof r[t]){const e=new Array(r.length);for(t=0;t<r.length;++t)e[t]=BigInt(r[t]);r=e;break}}return r=e(r,BigInt64Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeFloatArray=function(r){return r=e(r,Float32Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeDoubleArray=function(r){return r=e(r,Float64Array),this.writeUint8Array(r)},r.BinaryWriter.prototype.writeArrayBuffer=function(r){return this.writeUint8Array(r)},r.BinaryWriter.prototype.writeKeys=function(r,t){this.writeUint32(t.port),this.writeString(t.hostname),this.writeUint64(r.length);for(var e=0;e<r.length;++e)void 0===r[e].get?(this.writeUint32(r[e].low),this.writeUint32(r[e].high)):this.writeUint64(r[e].get())},r.BinaryWriter.prototype.createArrayBuffer=function(){var r=this.arrayBuffer;return this.offset!==this.arrayBuffer.byteLength&&(r=this.arrayBuffer.slice(0,this.offset)),this.arrayBuffer=new ArrayBuffer(0),this.dataView=new DataView(this.arrayBuffer),this.offset=0,r},r.BinaryReader=function(r){r instanceof ArrayBuffer?this.dataView=new DataView(r):r instanceof DataView&&(this.dataView=r),this.offset=0},r.BinaryReader.prototype.remains=function(){return this.offset<this.dataView.byteLength},r.BinaryReader.prototype.getSize=function(){return this.dataView.byteLength},r.BinaryReader.prototype.tell=function(){return this.offset},r.BinaryReader.prototype.seek=function(r){return this.offset=r+0,this};var i=function(r){try{return r()}catch(r){}};r.BinaryReader.prototype.readBool=function(){var r=this;return i((function(){var t=r.dataView.getUint8(r.offset);return r.offset++,0!==t}))},r.BinaryReader.prototype.readInt8=function(){var r=this;return i((function(){var t=r.dataView.getInt8(r.offset);return r.offset++,t}))},r.BinaryReader.prototype.readUint8=function(){var r=this;return i((function(){var t=r.dataView.getUint8(r.offset);return r.offset++,t}))},r.BinaryReader.prototype.readInt16=function(){var r=this;return i((function(){var t=r.dataView.getInt16(r.offset,!0);return r.offset+=2,t}))},r.BinaryReader.prototype.readUint16=function(){var r=this;return i((function(){var t=r.dataView.getUint16(r.offset,!0);return r.offset+=2,t}))},r.BinaryReader.prototype.readInt32=function(){var r=this;return i((function(){var t=r.dataView.getInt32(r.offset,!0);return r.offset+=4,t}))},r.BinaryReader.prototype.readUint32=function(){var r=this;return i((function(){var t=r.dataView.getUint32(r.offset,!0);return r.offset+=4,t+0}))},r.BinaryReader.prototype.readInt64=function(){const r=this.readInt64AsBigInt();if("bigint"==typeof r)return Number(r)},r.BinaryReader.prototype.readUint64=function(){const r=this.readUint64AsBigInt();if("bigint"==typeof r)return Number(r)},r.BinaryReader.prototype.readInt64AsBigInt=function(){var r=this;return i((function(){const t=r.dataView.getBigInt64(r.offset,!0);return r.offset+=8,t}))},r.BinaryReader.prototype.readUint64AsBigInt=function(){var r=this;return i((function(){const t=r.dataView.getBigUint64(r.offset,!0);return r.offset+=8,t}))},r.BinaryReader.prototype.readFloat=function(){var r=this;return i((function(){var t=r.dataView.getFloat32(r.offset,!0);return r.offset+=4,t}))},r.BinaryReader.prototype.readDouble=function(){var r=this;return i((function(){var t=r.dataView.getFloat64(r.offset,!0);return r.offset+=8,t}))},r.BinaryReader.prototype.readChar=function(){var r=this;return i((function(){var t=r.dataView.getInt8(r.offset);return r.offset++,String.fromCharCode(t)}))},r.BinaryReader.prototype.readString=function(r){var t=this;return i((function(){"number"!=typeof r&&(r=t.dataView.getUint32(t.offset,!0),t.offset+=4);for(var e="",i=0;i<r;++i)e+=String.fromCharCode(t.dataView.getUint8(t.offset)),t.offset++;return decodeURIComponent(escape(e))}))},r.BinaryReader.prototype.readStrings=function(r){for(var t=[],e=0;e<r;++e)t.push(this.readString());return t},r.BinaryReader.prototype.readArrayBuffer=function(r){var t=this;return i((function(){var e;if(r>0){var i=t.dataView.byteOffset+t.offset;e=t.dataView.buffer.slice(i,i+r),t.offset+=r}else e=new ArrayBuffer(0);return e}))},r.BinaryReader.prototype.readDataView=function(r){var t=this;return i((function(){var e;return r>0?(e=new DataView(t.dataView.buffer,t.dataView.byteOffset+t.offset,r),t.offset+=r):e=new DataView(new ArrayBuffer(0)),e}))},r.BinaryReader.prototype.readTypedArray=function(r,t){var e=this;return i((function(){var i,n=t.BYTES_PER_ELEMENT*r;if(n>0){var a=e.dataView.byteOffset+e.offset;if(a%t.BYTES_PER_ELEMENT!=0){var y=e.dataView.buffer.slice(a,a+n);i=new t(y)}else i=new t(e.dataView.buffer,a,r);e.offset+=n}else i=new t(new ArrayBuffer(0));return i}))},r.BinaryReader.prototype.readBoolArray=function(r){return this.readTypedArray(r,Uint8Array)},r.BinaryReader.prototype.readUint8Array=function(r){return this.readTypedArray(r,Uint8Array)},r.BinaryReader.prototype.readInt8Array=function(r){return this.readTypedArray(r,Int8Array)},r.BinaryReader.prototype.readUint16Array=function(r){return this.readTypedArray(r,Uint16Array)},r.BinaryReader.prototype.readInt16Array=function(r){return this.readTypedArray(r,Int16Array)},r.BinaryReader.prototype.readUint32Array=function(r){return this.readTypedArray(r,Uint32Array)},r.BinaryReader.prototype.readInt32Array=function(r){return this.readTypedArray(r,Int32Array)},r.BinaryReader.prototype.readUint64Array=function(r){return this.readTypedArray(r,BigUint64Array)},r.BinaryReader.prototype.readInt64Array=function(r){return this.readTypedArray(r,BigInt64Array)},r.BinaryReader.prototype.readFloatArray=function(r){return this.readTypedArray(r,Float32Array)},r.BinaryReader.prototype.readDoubleArray=function(r){return this.readTypedArray(r,Float64Array)},r.BinaryReader.prototype.readKeys=function(r,t){var e=this.offset;this.readUint32(),this.readString();var i=this.readUint64(),n=this.offset-e+8*i,a=this.dataView.byteOffset+e,y=this.dataView.buffer.slice(a,a+n);this.offset=e+n,r.readKeys(y,t)},r.BinaryReader.prototype.readNodeId=function(r){var t=this.readString(),e=this.readString(),i=this.readInt32(),n=this.readInt32();return r.impl.unserializeNodeId(r,t,e,i,n)};var n=Object.freeze({booleanType:0,int8Type:1,uint8Type:2,int16Type:3,uint16Type:4,int32Type:5,uint32Type:6,int64Type:7,uint64Type:8,floatType:9,doubleType:10,stringType:11,stringsType:12,booleanArrayType:13,int8ArrayType:14,uint8ArrayType:15,int16ArrayType:16,uint16ArrayType:17,int32ArrayType:18,uint32ArrayType:19,int64ArrayType:20,uint64ArrayType:21,floatArrayType:22,doubleArrayType:23,binaryType:24});r.TypedBinaryWriter=function(t){this.writer=new r.BinaryWriter(t),this.writer.writeUint16(16980),this.writer.writeUint16(1)};var a={writeBool:n.booleanType,writeInt8:n.int8Type,writeUint8:n.uint8Type,writeInt16:n.int16Type,writeUint16:n.uint16Type,writeInt32:n.int32Type,writeUint32:n.uint32Type,writeInt64:n.int64Type,writeUint64:n.uint64Type,writeFloat:n.floatType,writeDouble:n.doubleType,writeString:n.stringType,writeStrings:n.stringsType,writeBoolArray:n.booleanArrayType,writeInt8Array:n.int8ArrayType,writeUint8Array:n.uint8ArrayType,writeInt16Array:n.int16ArrayType,writeUint16Array:n.uint16ArrayType,writeInt32Array:n.int32ArrayType,writeUint32Array:n.uint32ArrayType,writeInt64Array:n.int64ArrayType,writeUint64Array:n.uint64ArrayType,writeFloatArray:n.floatArrayType,writeDoubleArray:n.doubleArrayType,writeArrayBuffer:n.binaryType};function y(t){return function(e,i){this.writer.writeString(e);var y=a[t];if(this.writer.writeUint8(y),y>=n.stringsType){var o=void 0!==i.length?i.length:i.byteLength||0;this.writer.writeUint64(o)}return r.BinaryWriter.prototype[t].call(this.writer,i),this}}for(var o in a)a.hasOwnProperty(o)&&(r.TypedBinaryWriter.prototype[o]=y(o));function f(r){return function(){var t=this.readUint64();return r.call(this,t)}}r.TypedBinaryWriter.prototype.createArrayBuffer=function(){return this.writer.createArrayBuffer()},r.TypedBinaryReader=function(r){this.arrayBuffer=r};var s={};return s[n.booleanType]={read:r.BinaryReader.prototype.readBool,type:"bool"},s[n.int8Type]={read:r.BinaryReader.prototype.readInt8,type:"int8"},s[n.uint8Type]={read:r.BinaryReader.prototype.readUint8,type:"uint8"},s[n.int16Type]={read:r.BinaryReader.prototype.readInt16,type:"int16"},s[n.uint16Type]={read:r.BinaryReader.prototype.readUint16,type:"uint16"},s[n.int32Type]={read:r.BinaryReader.prototype.readInt32,type:"int32"},s[n.uint32Type]={read:r.BinaryReader.prototype.readUint32,type:"uint32"},s[n.int64Type]={read:r.BinaryReader.prototype.readInt64,type:"int64"},s[n.uint64Type]={read:r.BinaryReader.prototype.readUint64,type:"uint64"},s[n.floatType]={read:r.BinaryReader.prototype.readFloat,type:"float"},s[n.doubleType]={read:r.BinaryReader.prototype.readDouble,type:"double"},s[n.stringType]={read:r.BinaryReader.prototype.readString,type:"string"},s[n.stringsType]={read:f(r.BinaryReader.prototype.readStrings),type:"strings"},s[n.booleanArrayType]={read:f(r.BinaryReader.prototype.readBoolArray),type:"boolArray"},s[n.uint8ArrayType]={read:f(r.BinaryReader.prototype.readUint8Array),type:"uint8Array"},s[n.int8ArrayType]={read:f(r.BinaryReader.prototype.readInt8Array),type:"int8Array"},s[n.uint16ArrayType]={read:f(r.BinaryReader.prototype.readUint16Array),type:"uint16Array"},s[n.int16ArrayType]={read:f(r.BinaryReader.prototype.readInt16Array),type:"int16Array"},s[n.uint32ArrayType]={read:f(r.BinaryReader.prototype.readUint32Array),type:"uint32Array"},s[n.int32ArrayType]={read:f(r.BinaryReader.prototype.readInt32Array),type:"int32Array"},s[n.uint64ArrayType]={read:f(r.BinaryReader.prototype.readUint64Array),type:"uint64Array"},s[n.int64ArrayType]={read:f(r.BinaryReader.prototype.readInt64Array),type:"int64Array"},s[n.floatArrayType]={read:f(r.BinaryReader.prototype.readFloatArray),type:"floatArray"},s[n.doubleArrayType]={read:f(r.BinaryReader.prototype.readDoubleArray),type:"doubleArray"},s[n.binaryType]={read:f(r.BinaryReader.prototype.readArrayBuffer),type:"arrayBuffer"},r.TypedBinaryReader.prototype.apply=function(t){var e=new r.BinaryReader(this.arrayBuffer);if(16980!==e.readUint16()||1!==e.readUint16())return!1;for(var i=e.getSize();e.tell()<i;){var n=e.readString(),a=s[e.readUint8()],y=a?a.read.apply(e):void 0;if(void 0===y||!t.visit(n,y,a.type))return!1}return!0},r}));