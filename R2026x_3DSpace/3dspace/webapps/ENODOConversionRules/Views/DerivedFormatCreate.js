define("DS/ENODOConversionRules/Views/DerivedFormatCreate",["UWA/Class/View","DS/Handlebars/Handlebars","DS/UIKIT/Input/Select","DS/UIKIT/Form","DS/UIKIT/SuperModal","DS/ENODOConversionRules/Models/DerivedFormatRule","DS/ENODOConversionRules/Views/ParamListView","text!DS/ENODOConversionRules/assets/templates/edfm.formatparams.html","text!DS/ENODOConversionRules/assets/templates/edfm.form.html","DS/ENODerivedFormatEssentials/Utils/DerivedFormatUtil","DS/ENO6WPlugins/jQuery","DS/ENO6WPlugins/jQueryUI","DS/Controls/TooltipModel","DS/Controls/Toggle","DS/WUXAutoComplete/AutoComplete","DS/ENODOConversionRules/Collections/UserTreeDocument"],(function(e,t,n,a,r,o,i,l,d,s,c,m,u,f,g,v){var p,y,h,D,E,I,b,S,w;return e.extend({className:"derivedformatformview",viewMe:this,disableFields:!1,_myTreeDocument:null,id:function(){return"derivedformatformview"},setup:function(e){var t=this;t.selection=e.selection,t.superModal=new r,t._myTreeDocument=new v({key:"person"}),t.superModal.dialog({closable:!0,body:t.getForm(),title:t.selection?derivedformatmanagementinfra.getNLSData().label.editRuleTitle:derivedformatmanagementinfra.getNLSData().label.createRuleTitle}),t.addforceUpdateCheckbox(),t.setupEvent()},setupEvent:function(){var e=this;viewMe=this,p.getDocument().getElementById("derivedformatfield-converter").addEventListener("change",e.resetConverterForms.bind(null,e)),p.getDocument().getElementById("derivedformatfield-connector").addEventListener("change",e.resetFormFields.bind(null,e)),p.getDocument().getElementById("derivedformatfield-event").addEventListener("change",e.switchEventField.bind(null,e)),p.getDocument().getElementById("derivedformatfield-source").addEventListener("change",e.switchSourceFormat.bind(null,e)),p.getDocument().getElementById("derivedformatfield-target").addEventListener("change",e.switchTargetFormat.bind(null,e)),p.getDocument().getElementById("btnActionSubmit").addEventListener("click",e.save.bind(null,e)),p.getDocument().getElementById("btnActionCancel").addEventListener("click",e.cancel.bind(null,e)),e.switchEventField(),e.switchTargetFormat(e)},populateData:function(e,t){for(var n in e.innerText=null,t){var a=new Option(t[n].label,t[n].value);t[n].selected&&(a.selected=!0),e.add(a)}},populateSourceData:function(e,t){for(var n in e.innerText=null,t){var a=new Option(t[n].label,t[n].value);t[n].selected&&(a.selected=!0),t[n].partExtension&&(a.dataset.partextension=t[n].partExtension),t[n].subType&&(a.dataset.subtype=t[n].subType),a.dataset.type=t[n].type,e.add(a)}},populateEventData:function(e,t){for(var n in e.innerText=null,t){var a=new Option(t[n].label,t[n].value);a.lifecycle=t[n].lifecycle,e.add(a)}},refresh:function(){},addforceUpdateCheckbox:function(){var e=p.getDocument().getElementById("derivedformatfield-forceupdate-container");(D=new f({type:"checkbox",label:derivedformatmanagementinfra.getNLSData().label.forceUpdate,id:"derivedformatfield-forceupdate",touchMode:!0})).inject(e)},forceToDFC:function(e,t){if("true"==localStorage.getItem("DFM.forceToDfc")){var n=p.getDocument().getElementById("derivedformatfield-forcetodfc-container");(b=new f({type:"checkbox",label:derivedformatmanagementinfra.getNLSData().label.forceToDfc,id:"derivedformatfield-forcetodfc",touchMode:!0})).inject(n);var a=p.getDocument().getElementById("derivedformatfield-forcetodfc-tooltip");(S=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-info" style="font-size: 13px; height: 13px"></span>'}).inject(a)).tooltipInfos=new u({shortHelp:derivedformatmanagementinfra.getNLSData().label.forceToDfcTooltip}),b.addEventListener("buttonclick",(function(){console.log("Force to DFC -- ",b.checkFlag),b.checkFlag?(e.dynamicAutoComplete._editor.disabled=!0,e.dynamicAutoComplete.placeholder="DerivedFormatConverter"):(e.dynamicAutoComplete._editor.disabled=!1,e.dynamicAutoComplete._editor.value="",e.selection&&(e.removeConvUser=!0),e.dynamicAutoComplete.placeholder=derivedformatmanagementinfra.getNLSData().label.conversionUserPlaceholder)}))}},getForm:function(){(D=this).selection&&(w=structuredClone(D.selection._attributes),D.selection.get("convUserLabel")&&D._myTreeDocument.addUser(D.selection.get("convUserLabel"),D.selection.get("convUser"))),y=new i({selection:D.selection,parameters:D.selection?D.selection.get("parameters"):{}});var e,n,a,r,o,s,c,m,u,f,g,v,h;t.compile(l);p=UWA.createElement("div",{id:"divCreateDerivedFormatFormContainer"}),D.selection&&(D.disableFields=!0,e=D.selection.get("converter"),n=D.selection.get("category"),a=D.selection.get("source"),r=D.selection.get("target"),o=D.selection.get("event"),s=D.selection.get("inputStreamId"),c=D.selection.get("outputStreamId"),m=D.selection.get("partExtension"),u=D.selection.get("exchangeFormat"),f=D.selection.get("subType"),g=D.selection.get("sourceType"),v=D.selection.get("forceUpdate"),h=D.selection.get("convUserLabel"));var D,E=t.compile(d),I=(D=this).getConverters();e||(e=I.find((e=>e.selected)).value);var b=D.getConnectors(e);n||(n=b.find((e=>e.selected)).value);var S=D.getSourceFormats(e,n);a||(a=S.find((e=>e.selected)).value,g=S.find((e=>e.selected)).type,m=S.find((e=>e.selected)).partExtension,f=S.find((e=>e.selected)).subType);var C=D.getEvents(e,n);o||(o=C.find((e=>e.selected)).value);var F=D.getTargetFormats(e,n,a,g);if(r||(r=F.find((e=>e.selected)).value),!s||!c||!u){var A=D.getStreamIds(e,n,a,g,r);s=A.inputStreamId,c=A.outputStreamId,u=A.exchangeFormat}return p.setHTML(E({labels:derivedformatmanagementinfra.getNLSData().label,buttons:derivedformatmanagementinfra.getNLSData().button,converters:I,connectors:b,events:D.getEvents(e,n),activation:D.getActivation(e,n,o),states:D.getStates(e,n,a),sources:S,sourceFormat:a,targets:F,disableFields:D.disableFields,inputStreamId:D.inputStreamId,outputStreamId:D.outputStreamId,partExtension:m,exchangeFormat:u,subType:f,sourceType:g,forceUpdate:v,conversionUser:h})),p.getElementsByClassName("derivedformatfield-formatparams")[0].append(y.getContent()),p},switchEventField:function(e){var t=p.getDocument().getElementById("derivedformatfield-event"),n=p.getDocument().getElementById("derivedformatfield-activation"),a=p.getDocument().getElementById("derivedformatfield-outputStreamId").value,r=t.selectedOptions[0].value;if((r||a)&&("checkin"==r||"onXCADSave"==r||"linkable"==a||"authoringvisu"==a?(D.checkFlag=!1,D.disabled=!0):D.disabled=!1),this.selection&&1==this.selection.get("forceUpdate")&&(D.checkFlag=!0),t&&t.selectedOptions[0]){var o=t.selectedOptions[0];"yes"==o.lifecycle||"yes"==o.getAttribute("lifecycle")?p.getDocument().getElementById("derivedformatfield-state-container").style.display="block":p.getDocument().getElementById("derivedformatfield-state-container").style.display="none";var i=viewMe.getActivation("","",o.value);viewMe.populateData(n,i),viewMe.fieldActivationTest(i,n)}},cancel:function(e){e.superModal.modals.current.hide()},switchSourceFormat:function(e){var t=p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0].value,n=p.getDocument().getElementById("derivedformatfield-connector").selectedOptions[0].value,a=p.getDocument().getElementById("derivedformatfield-source").selectedOptions[0].value,r=p.getDocument().getElementById("derivedformatfield-source").selectedOptions[0].dataset.type;p.getDocument().getElementById("derivedformatfield-sourceFormat").value=a;var o=p.getDocument().getElementById("derivedformatfield-target"),i=viewMe.getTargetFormats(t,n,a,r);if(viewMe.populateData(o,i),viewMe.fieldActivationTest(i,o),"3DEXPERIENCE"==t&&"SOLIDWORKS"==n){var l=p.getDocument().getElementById("derivedformatfield-event"),d=viewMe.getEvents(t,n,a);viewMe.populateEventData(l,d),viewMe.switchEventField()}var s=p.getDocument().getElementById("derivedformatfield-state"),c=viewMe.getStates(t,n,a);viewMe.populateData(s,c),viewMe.switchTargetFormat(e)},resetConverterForms:function(){var e=p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0].value,t=p.getDocument().getElementById("derivedformatfield-connector"),n=viewMe.getConnectors(e);viewMe.populateData(t,n),viewMe.fieldActivationTest(n,t),viewMe.resetFormFields()},fieldActivationTest:function(e,t){1==e.length?t.disabled=!0:0==viewMe.disableFields&&(t.disabled=!1)},resetFormFields:function(){var e=p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0].value,t=p.getDocument().getElementById("derivedformatfield-connector").selectedOptions[0].value,n=p.getDocument().getElementById("derivedformatfield-event"),a=p.getDocument().getElementById("derivedformatfield-state"),r=p.getDocument().getElementById("derivedformatfield-source"),o=(p.getDocument().getElementById("derivedformatfield-target"),viewMe.getEvents(e,t));viewMe.populateEventData(n,o);var i=viewMe.getStates(e,t);viewMe.populateData(a,i);var l=viewMe.getSourceFormats(e,t);viewMe.populateSourceData(r,l),viewMe.fieldActivationTest(o,n),viewMe.fieldActivationTest(i,a),viewMe.fieldActivationTest(l,r),viewMe.switchSourceFormat(this),viewMe.switchEventField()},switchTargetFormat:function(e){var t,n,a,r,o,l,d=p.getDocument().getElementById("derivedformatfield-conversionuser-container"),s=p.getDocument().getElementById("dfm-derivedformatform-autoCompleteContainer"),c=p.getDocument().getElementById("derivedformatfield-forcetodfc-container"),m=p.getDocument().getElementById("derivedformatfield-forcetodfc-tooltip"),f=p.getDocument().getElementById("derivedformatfield-inputStreamId"),v=p.getDocument().getElementById("derivedformatfield-outputStreamId"),w=p.getDocument().getElementById("derivedformatfield-exchangeFormat"),C=p.getDocument().getElementById("derivedformatfield-converter"),F=p.getDocument().getElementById("derivedformatfield-connector"),A=p.getDocument().getElementById("derivedformatfield-source"),B=p.getDocument().getElementById("derivedformatfield-target");b&&(b=void 0),C&&(n=C.selectedOptions[0].value),F&&(a=F.selectedOptions[0].value),A&&(r=A.selectedOptions[0].value,o=A.selectedOptions[0].dataset.type),B&&(t=B.selectedOptions[0].value,l=B.selectedIndex+1);var T=viewMe.getStreamIds(n,a,r,o,t,l);if(f&&(f.value=T.inputStreamId),v&&(v.value=T.outputStreamId),w&&(w.value=T.exchangeFormat),s.childNodes.length>=1&&s.removeChild(s.children[0]),c.childNodes.length>=1&&(c.removeChild(c.children[0]),m.removeChild(m.children[0])),h&&h.destroy(),E&&E.destroy(),S&&S.destroy(),I&&I.destroy(),"OnPremise"!==widget.getValue("x3dPlatformId")&&2==w.value&&"3DEXPERIENCE"==n){d.style.display="block",e._myTreeDocument&&!e.selection&&e._myTreeDocument.empty(),e.dynamicAutoComplete=new g({elementsTree:e._myTreeDocument,multiSearchMode:!1,allowFreeInputFlag:!1,value:e.selection?e.selection.get("convUser"):"",placeholder:derivedformatmanagementinfra.getNLSData().label.conversionUserPlaceholder,minLengthBeforeSearch:2}),e.dynamicAutoComplete.inject(s),e.forceToDFC(e,t),e.selection&&b&&e.selection.get("convUser")&&("DerivedFormatConverter"==e.selection.get("convUser")?(b.checkFlag=!0,e.dynamicAutoComplete._editor.disabled=!0):(b.checkFlag=!1,b.disabled=!0)),e.dynamicAutoComplete.addEventListener("uncommittedChange",e.unCommittedChange.bind(null,e)),e.dynamicAutoComplete.addEventListener("change",e.change.bind(null,e));var x=p.getDocument().getElementById("conversionuser-tooltip-container");(I=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-info" style="font-size: 13px; height: 13px"></span>'}).inject(x)).tooltipInfos=new u({shortHelp:derivedformatmanagementinfra.getNLSData().label.conversionUserTooltipForm})}else d.style.display="none";y=new i({selection:e.selection,parameters:e.selection?e.selection.get("parameters"):{},derivedForm:p,outputStreamId:T.outputStreamId,inputStreamId:T.inputStreamId,selectedIndex:l});var M=p.getDocument().getElementById("derivedformatfield-event"),L=p.getDocument().getElementById("derivedformatfield-outputStreamId").value,O=M.selectedOptions[0].value;if((O||L)&&("checkin"==O||"onXCADSave"==O||"linkable"==L||"authoringvisu"==L?(D.checkFlag=!1,D.disabled=!0):D.disabled=!1),"authoring"!==f.value){var U=p.getDocument().getElementById("derivedformatfield-warning-icon");h=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-attention" style="font-size: 19px; height: 32px"></span>'}).inject(U);var N=f.value.toLowerCase(),k=o.toLowerCase();(P=derivedformatmanagementinfra.getNLSData().label[N+k])&&(P=P.replace("%1",t)),h.tooltipInfos=new u({shortHelp:P})}if("OnPremise"!==widget.getValue("x3dPlatformId")&&("OfficeDocumentConverter"==C.value||"3DEXPERIENCE"===a&&"step"===("CATPart"===t||t.toLowerCase()))){U=p.getDocument().getElementById("derivedformatfield-warning-icon");h=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-tokens" style="font-size: 19px; height: 32px"></span>'}).inject(U);var P=derivedformatmanagementinfra.getNLSData().label.creditConsumptionMsg;h.tooltipInfos=new u({shortHelp:P})}if(C&&F&&A&&B&&!B.disabled&&"3DEXPERIENCE"==C.value&&"SOLIDWORKS"==F.value&&"SLDPRT"==A.value&&"ExactGeometry"==B.value){p.getDocument().getElementById("edfm-derivedformatparamview-param-warning-row").style.display="";var R=p.getDocument().getElementById("edfm-derivedformatparamview-param-warning");UWA.createElement("span",{class:"edfm-derivedformatparamview-param-warning-msg",html:derivedformatmanagementinfra.getNLSData().label.polyhedralFalseWarning,styles:{}}).inject(R)}var _=p.getDocument().getElementById("derivedformatfield-forceupdate-tooltip");(E=UWA.createElement("span",{html:'<span class="fonticon fonticon-1x fonticon-info" style="font-size: 13px; height: 13px"></span>'}).inject(_)).tooltipInfos=new u({shortHelp:derivedformatmanagementinfra.getNLSData().label.forceUpdateExplain})},unCommittedChange:function(e,t){if(null!=t.target)var n=t.target.dsModel.getValueToCommit();else n=t;n.length>1&&e._myTreeDocument.x3dsearch(n)},change:function(e){if(e.dynamicAutoComplete.selectedItems){if(e.dynamicAutoComplete.selectedItems.options.id){var t=UWA.clone(e.dynamicAutoComplete.selectedItems.options);e.person=t,b&&(b.checkFlag=!1,b.disabled=!0)}}else e.removeConvUser=!0,b&&(b.checkFlag=!1,b.disabled=!1)},save:function(e){var t,n=e.getData(),a={};e.selection?((a=e.selection).set(n),t=a._previousAttributes):a=new o(n),a.get("deployed")&&!a.hasChanged()||(a.get("deployed")&&a.hasChanged()||"updated"==a.get("action")?a.set("action","updated"):a.set("action","created"));var r=e.isDuplicateRule(e,a);r&&a.isNew()?(a.set(t),e.superModal.modals.current.hide(),s.alert().add({className:"warning",message:derivedformatmanagementinfra.getNLSData().label.ruleExists})):!r&&n&&a.isValid()?(e.collection.add(a),e.superModal.modals.current.hide()):a.isNew()||(r&&e.selection?a.set(w):a.set(t),e.cancel(e),s.alert().add({className:"warning",message:derivedformatmanagementinfra.getNLSData().label.ruleExists}))},isDuplicateRule:function(e,t){var n=e.collection._models;for(var a in refModelAttr=t._attributes,n)if(modelAttr=n[a]._attributes,t.cid!=n[a].cid&&refModelAttr.converter===modelAttr.converter&&refModelAttr.source===modelAttr.source&&refModelAttr.target===modelAttr.target&&refModelAttr.outputStreamId===modelAttr.outputStreamId&&refModelAttr.event===modelAttr.event&&refModelAttr.category===modelAttr.category&&e.checkPartExtension(modelAttr,refModelAttr)&&e.checkSubType(modelAttr,refModelAttr)&&e.checkState(modelAttr,refModelAttr)&&e.checkParameters(modelAttr.parameters,refModelAttr.parameters))return console.log(),!0;return!1},checkPartExtension:(e,t)=>!e.partExtension||t.partExtension&&t.partExtension===e.partExtension,checkSubType:(e,t)=>!e.subType||t.subType&&t.subType===e.subType,checkState:function(e,t){return!e.state||t.state&&t.state===e.state},checkParameters:function(e,t){if(0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e.AdditionalFeatures&&t.AdditionalFeatures)return!0;if(Object.keys(e).length!==Object.keys(t).length)return!1;var n;if(Object.keys(e).length>0)for(var a in e)if(val=e[a],(n=t[a])!==val||void 0===n&&""==n)return!1;return!0},getData:function(){var e={};e.converter=p.getDocument().getElementById("derivedformatfield-converter").value,e.category=p.getDocument().getElementById("derivedformatfield-connector").value;var t=p.getDocument().getElementById("derivedformatfield-event").options.selectedIndex;if(e.event=p.getDocument().getElementById("derivedformatfield-event").value,e.forceUpdate=D.checkFlag,e.eventToDisplay=p.getDocument().getElementById("derivedformatfield-event").options[t]?p.getDocument().getElementById("derivedformatfield-event").options[t].innerHTML:"",e.activation=p.getDocument().getElementById("derivedformatfield-activation").value,"PROMOTE"==e.event||"promote"==e.event){var n=p.getDocument().getElementById("derivedformatfield-state").options.selectedIndex;e.state=p.getDocument().getElementById("derivedformatfield-state").value,e.stateToDisplay=p.getDocument().getElementById("derivedformatfield-state").options[n].innerHTML}else e.state="",e.stateToDisplay="";var a=p.getDocument().getElementById("derivedformatfield-source").options.selectedIndex;return e.source=p.getDocument().getElementById("derivedformatfield-source").value,e.sourceToDisplay=p.getDocument().getElementById("derivedformatfield-source").options[a].innerHTML,e.partExtension=p.getDocument().getElementById("derivedformatfield-source").options[a].dataset.partextension,e.subType=p.getDocument().getElementById("derivedformatfield-source").options[a].dataset.subtype,e.sourceType=p.getDocument().getElementById("derivedformatfield-source").options[a].dataset.type,e.target=p.getDocument().getElementById("derivedformatfield-target").value,e.updateOnly=!1,e.inputStreamId=p.getDocument().getElementById("derivedformatfield-inputStreamId").value,e.exchangeFormat=parseInt(p.getDocument().getElementById("derivedformatfield-exchangeFormat").value),e.outputStreamId=p.getDocument().getElementById("derivedformatfield-outputStreamId").value,this.person&&this.person.uuid?(e.convUser=this.person.uuid,e.convUserLabel=this.person.label):b&&b.checkFlag?e.convUser=e.convUserLabel="DerivedFormatConverter":this.removeConvUser?(e.convUser="",e.convUserLabel=""):this.selection&&(e.convUser=this.selection.get("convUser"),e.convUserLabel=this.selection.get("convUserLabel")),e.parameters=y.getData(),e},getConverters:function(){var e=derivedformatmanagementinfra.getInfraCollection(),t=new Array,n=e._models[0]._attributes.name;this.selection&&(n=this.selection.get("converter"));let a=derivedformatmanagementinfra.getNLSData().label.synchronous?derivedformatmanagementinfra.getNLSData().label.synchronous:"Synchronous, at save",r=derivedformatmanagementinfra.getNLSData().label.asynchronous?derivedformatmanagementinfra.getNLSData().label.asynchronous:"Asynchronous";return e.forEach((function(e,o){var i=!0===e.get("synchronous")||"true"===e.get("synchronous")?a:r;t.push({label:e.get("name")+" ("+i+")",value:e.get("name"),selected:e.get("name")==n})})),t.sort((function(e,t){var n=e.label.toUpperCase(),a=t.label.toUpperCase();return n<a?-1:n>a?1:0})),t},getConnectors:function(e){var t=derivedformatmanagementinfra.getInfraCollection().find((function(t,n){return t.get("name")==e})),n=new Array,a=t.get("connectors"),r=a[0].name;return this.selection&&(r=this.selection.get("category")),a.forEach((function(e,t){n.push({label:e.name,value:e.name,selected:e.name==r})})),n.sort((function(e,t){var n=e.label.toUpperCase(),a=t.label.toUpperCase();return n<a?-1:n>a?1:0})),n},getEvents:function(e,t,n){var a=new Array,r=derivedformatmanagementinfra.getInfraCollection().find((function(t,n){return t.get("name")==e}));if(r){var o=r.get("connectors").find((function(e,n){return e.name==t}));if(o&&o.actions){var i,l=(i="SLDASM"==n?o.actions.filter((e=>"ondemand"==e.name||"promote"==e.name)):o.actions)[0].name;this.selection&&(l=this.selection.get("event")),i.forEach((function(e,t){a.push({label:e.value,value:e.name,selected:e.name==l,lifecycle:"lifecycle"==e.maturityGraph?"yes":"no"})}))}}return a},getActivation:function(e,t,n){var a=new Array,r=derivedformatmanagementinfra.getInfraCollection();!e&&p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0]&&(e=p.getDocument().getElementById("derivedformatfield-converter").selectedOptions[0].value),!t&&p.getDocument().getElementById("derivedformatfield-connector").selectedOptions[0]&&(t=p.getDocument().getElementById("derivedformatfield-connector").selectedOptions[0].value);var o=r.find((function(t,n){return t.get("name")==e}));if(o){var i=o.get("connectors").find((function(e,n){return e.name==t}));if(i&&i.actions){var l=i.actions.find((function(e,t){return e.name==n}));if(l){var d=l.activation.split("|"),s=d[0];this.selection&&(s=this.selection.get("activation")),d.forEach((function(e,t){a.push({label:derivedformatmanagementinfra.getNLSData().label[e],value:e,selected:e==s})}))}}}return a},getStates:function(e,t,n){var a=this,r=new Array,o=derivedformatmanagementinfra.getInfraCollection().find((function(t,n){return t.get("name")==e}));if(o){var i=o.get("connectors").find((function(e,n){return e.name==t}));if(i&&i.actions){var l=i.actions,d=UWA.Array.detect(l,(function(e){return"PROMOTE"==e.name||"promote"==e.name}));if(d){var s=a.getSourceFormats(e,t).find((function(e,t){return e.value==n}));if(s){var c=null;if(s.type.includes("Part")||s.type.includes("SEComponent")?c=d.states.Part:s.type.includes("Drawing")?c=d.states.Drawing:s.type.includes("Document")?c=d.states.Document:s.type.includes("VPMReference")&&(c=d.states.VPMReference),c){var m=c[0];a.selection&&(m=a.selection.get("state")),c.forEach((function(e,t){r.push({label:e.value,value:e.name,selected:e.name==m})}))}}}}}return r},getTargetFormats:function(e,t,n,a){var r=new Array,o=derivedformatmanagementinfra.getInfraCollection().find((function(t,n){return t.get("name")==e}));if(o){var i=o.get("connectors").find((function(e,n){return e.name==t}));if(i){var l=i.supportedformats.find((function(e,t){return e.source.name==n&&e.source.type==a}));if(l){var d=l.targets[0].target;this.selection&&(d=this.selection.get("target"));var s=!1;l.targets.forEach((function(t,n){var a=t.target,o=a;derivedformatmanagementinfra.getNLSData()[e]&&derivedformatmanagementinfra.getNLSData()[e].target[a]&&(o=derivedformatmanagementinfra.getNLSData()[e].target[a]),s||a!=d?r.push({label:o,value:a,selected:!1}):(r.push({label:o,value:a,selected:!0}),s=!0)}))}}}return r},getStreamIds:function(e,t,n,a,r,o){var i=this,l={},d=derivedformatmanagementinfra.getInfraCollection().find((function(t,n){return t.get("name")==e}));if(d){var s=d.get("connectors").find((function(e,n){return e.name==t}));if(s){var c=s.supportedformats.find((function(e,t){return e.source.name==n&&e.source.type==a}));if(c&&c.targets)for(var m=0;m<c.targets.length;m++){var u=c.targets[m],f=c.targets.filter((function(e){return e.target==r}));if(f.length>1&&o){if(!i.selection){var g=o-1;u=c.targets[g];l.inputStreamId=u.inputStreamId,l.outputStreamId=u.outputStreamId,l.exchangeFormat=u.exchangeFormat;break}l.inputStreamId=i.selection.get("inputStreamId"),l.outputStreamId=i.selection.get("outputStreamId"),l.exchangeFormat=i.selection.get("exchangeFormat")}else u.target==r&&(l.inputStreamId=u.inputStreamId,l.outputStreamId=u.outputStreamId,l.exchangeFormat=u.exchangeFormat)}}}return l},getSourceFormats:function(e,t){var n=this,a=derivedformatmanagementinfra.getInfraCollection().find((function(t,n){return t.get("name")==e})),r=new Array;if(a){var o,i,l,d=a.get("connectors").find((function(e,n){return e.name==t}));if(d)n.selection?(o=n.selection.get("sourceType"),i=n.selection.get("source"),n.selection.get("partExtension"),l=n.selection.get("subType")):(o=d.supportedformats[0].source.type,i=d.supportedformats[0].source.name,d.supportedformats[0].source.partExtension,l=d.supportedformats[0].source.subtype),d.supportedformats.forEach((function(e,t){var n="";n=e.source.subtype?e.source.subtypeValue?e.source.subtypeValue:e.source.subtype:derivedformatmanagementinfra.getNLSData().label[e.source.type.toLowerCase()]?derivedformatmanagementinfra.getNLSData().label[e.source.type.toLowerCase()]:e.source.type;var a=e.source.name==i&&e.source.type==o;l&&(a=a&&e.source.subtype==l),r.push({label:n,value:e.source.name,type:e.source.type,selected:a,partExtension:e.source.partExtension,subType:e.source.subtype})}))}return r},getParamListView:function(){return y}})}));