self.define&&define("DS/DELPPWProcessValidationModule/DELWebProcessValidationModel",["DS/DELWebInfrastructureControls/UWAUtils","UWA/Class","UWA/Promise","DS/DELWebInfrastructureControls/DELWebIndexAuthoringMgmt","DS/DELWebInfrastructureControls/DELWebAjaxModel","DS/DELPPWProcessValidationModule/DELWebProcessValidationModelCV","text!DS/DELPPWProcessModelPlugins/assets/RolesOnImplementLink.json","undefined"!=typeof window?"i18n!DS/DELWebInfrastructureControls/assets/nls/DELWebInfrastructureControls":""],(function(e,r,t,n,s,c,a,i){"use strict";var o={},l=self.Configuration&&self.Configuration.webroot?self.Configuration.webroot:null;l&&s&&s.setupWebRoot&&(l=s.setupWebRoot()),i||(i={get:function(e){return e}});var u=r.singleton({init:function(){o=s.getCacheObject()},getAllProcessValidation:function(r){return new t((function(t,n){r&&!e.Object.isEmptyObject(r)||t({})}))},getAllWorkPlans:function(r){var a=u;return new t((function(t,l){if(r){var u="*";u=r.search_str?"*"+r.search_str+"*":r.name?"*"+r.name+"*":"*";var d={R:Math.random(),class_name:r.class_name?r.class_name:"DELLmiProductionWorkplanSystem/DELLmiWorkPlanSystemReference",Extensions:r.Extensions?r.Extensions:"",Depth:0,Minimum:"Minimum"in r?r.Minimum:"true",SkipCheckingResource:!0,ClearServerCache:!!r.blnForceRefresh&&r.blnForceRefresh,search_str:u};r.OXID&&(d.OXID=r.OXID),r.PLM_ExternalID&&(d.PLM_ExternalID=r.PLM_ExternalID),r.physicalid&&(d.physicalid=r.physicalid),r.searchByAttribute&&(d.searchByAttribute=r.searchByAttribute),d.Minimum&&"string"==typeof d.Minimum&&"false"!==d.Minimum.toLowerCase()&&"true"!==d.Minimum.toLowerCase()&&(d.Minimum=[d.Minimum]),d.Minimum instanceof Array&&(d.Minimum=JSON.stringify(d.Minimum)),r&&r.startindex>=0&&r.endindex>=0&&(d.startindex=r.startindex,d.endindex=r.endindex),!c||!c.getAllWorkPlans||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()?s.getServiceUrl({serviceName:"3DSpace"}).then((function(n){var c=n+"/resources/DELWebInfrastructureLite/v0/referenceFinder?getAllWorkPlans",o=e.extend({},d,!0);if(d.physicalid)o.target_physicalid=d.physicalid;else if(d.QueryList){var u=[];e.each(d.QueryList,(function(e,r){r&&(r.physicalid?u.push({physicalid:r.physicalid}):u.push(r))})),o.target_QueryList=JSON.stringify(u)}d.blnIncludeDescendants&&(o.getAllDescendants=!0,d.V_discipline&&(o.disciplineFilter=d.V_discipline)),s.callAuthenticatedRequest(c,"json","GET",o).then((function(n){var s=n,c="DELLmiWorkPlanSystemReference";if(s&&e.Object.isPlainObject(s)&&!s[c]&&d.class_name){var o=d.class_name.split("/");c=o[o.length-1]}if(s&&e.Object.isPlainObject(s)&&s[c]){var u=[],p=null;if(e.each(s[c],(function(){(p=this).name=p.name||p.V_Name||p.PLM_ExternalID||p.id,u.push(p)})),d.class_name)t(u);else{var m=e.extend({class_name:"DELLmiProductionHeaderWorkplan/DELLmiHeaderWorkPlanReference"},r,!0);a.getAllWorkPlans(m,(function(e){e&&e.length&&(u=(u=u.concat(e)).filter((function(e,r,t){for(var n=!0,s=0;n&&s<r;++s)Foe.Model.Asset.checkEquality(t[s],e)&&(n=s===r);return n}))),t(u)}),l)}}else l&&l(new Error(i.get("Error getting {0} list",{0:i.get("Work Plan")})))}),l)}),l):s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?c.getAllWorkPlans(r,a.getAllWorkPlans).then(t,l):(r.blnCachedOk=!1,a.getAllWorkPlans(r).then(t,l))}),l)}else l("Invalid input parameters!")}))},getWorkPlan:function(r){var a=u;return new t((function(t,l){if(r&&r.workplan&&e.Object.isPlainObject(r.workplan)&&(r.workplan.physicalid||r.workplan.id))if(!c||!c.getWorkPlan||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()){var u=r.workplan;s._getSecurityContext().then((function(r){s.getServiceUrl({serviceName:"3DSpace"}).then((function(r){var n=null;u&&u.physicalid&&(n=u.physicalid);var c=r+"/resources/v1/modeler/dsprcs/dsprcs:MfgProcess/"+n;return s.useFixtures()?c=r+"/resources/v1/modeler/dsprcs/dsprcs:MfgProcess/?getWorkPlan":c+="?$mask=dsprcs:MfgProcessMask.Details",s.callAuthenticatedRequest(c,"json","GET",null).then((function(r){if(r){var n=r;if("string"==typeof r&&(n=JSON.parse(r)),n&&n.member&&n.member.length>0){e.each(n.member,(function(e,r){var n={};if(s.useFixtures()){var c=Math.random().toString();n.id=c.substr(c.indexOf(".")+1),n.physicalid=n.id}t&&t(r)}))}else{var c="";c=n.ERROR?i.get("Unable to get {0}!",{0:i.get("Resource")})+"\n"+n.ERROR:i.get("Unable to get {0}!",{0:i.get("Changeover Operation")}),error(c),steal.dev.log("DELWebProcessValidationModel::_getWorkPlan_PublicAPI - no workplanData.member.length!")}}else l(new Error("invalid response from Public API"))}),(function(e){l(new Error((e.message||e)+" \nFailed to fetch work plan"))}),l)}),l)}))}else s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?c.getWorkPlan(r,a.getWorkPlan).then(t,l):(r.blnCachedOk=!1,a.getWorkPlan(r).then(t,l))}),l);else l("invalid work plan")}))},getAllDescendantsForWorkplan:function(e){var r=u;return new t((function(t,a){if(e){if(c&&c.getAllDescendantsForWorkplan&&(!o||!o.platform_services||!("Search"in o.platform_services)||o.platform_services.Search)&&!1!==e.blnCachedOk&&!e.blnForceRefresh&&n.isIndex()){if(!o.platform_services||!("Search"in o.platform_services))return void s.getServiceUrl({serviceName:"3DSearch"}).then((function(n){o.platform_services||(o.platform_services={}),o.platform_services.Search=n||!1,o.platform_services.Search?c.getAllDescendantsForWorkplan(e,r.getAllDescendantsForWorkplan).then(t,a):r.getAllDescendantsForWorkplan(e).then(t,a)}),a);if(o.platform_services.Search)return void c.getAllDescendantsForWorkplan(e,r.getAllDescendantsForWorkplan).then(t,a)}s.getTree(e).then(t,a)}else a("Invalid input parameters!")}))},getAllHeaderOperationsForWorkplan:function(r){var n=u;return new t((function(t,s){r?(r.Depth||(r.Depth=1),r.class_name||(r.class_name="DELLmiHeaderOperationReference"),n.getAllDescendantsForWorkplan(r).then((function(n){var c={};if(e.each(n,(function(t,n){return n.physicalid===r.physicalid&&(c=n),e.Object.isEmptyObject(c)})),e.Object.isEmptyObject(c))s(new Error("Unable to locate root workplan"));else{var a={};e.each(c.children||[],(function(e,r){var t=n[r.OXID||r.physicalid],s=n[t.ReferenceOXID||t.ReferencePhysicalid];([s.plmObjectTypeInternal,s.plmBaseObjectType,s.plmObjectType,s.type].indexOf("DELLmiHeaderOperationReference")>=0||s.taxonomies&&s.taxonomies.indexOf("/DELLmiHeaderOperationReference")>0)&&(a[s.physicalid]=s)})),t(a)}}),s)):s("Invalid input parameters!")}))},isOperation:function(r){var t=!1;return r&&e.each(["plmObjectTypeInternal","plmObjectType","plmBaseObjectType","type","OXID"],(function(e,n){return!(t=(r[n]||"").toLowerCase().indexOf("operation")>=0&&(r[n]||"").toLowerCase().indexOf("dellmi")>=0)})),t},isHeaderOperation:function(r){var t=u.isOperation(r);return t&&e.each(["taxonomies","plmObjectTypeInternal","plmObjectType","plmBaseObjectType","type","OXID"],(function(e,n){return!(t=(r[n]||"").toLowerCase().indexOf("dellmiheaderoperationreference")>=0)})),t},getAllTimeConstraints:function(r){var a=u;return new t((function(t,i){r&&(r.id||r.physicalid)?!c||!c.getAllTimeConstraints||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()?s.getServiceUrl({serviceName:"3DSpace"}).then((function(n){var c=r.physicalid||r.id,o=n+"/resources/v1/modeler/dsprcs/dsprcs:MfgProcess/";a.isOperation(r)&&(o=n+"/resources/v1/modeler/dsprcs/dsprcs:MfgOperation/"),o+=c+"/dsprcs:TimeConstraint",s.callAuthenticatedRequest(o,"json","GET",null).then((function(r){var n=[];r&&!e.Object.isEmptyObject(r)&&("string"==typeof r&&(r=JSON.parse(r)),r&&r.member&&r.member.length>0&&(n=r.member)),t(n)}),i)}),i):s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?c.getAllTimeConstraints(r,a.getAllTimeConstraints).then(t,i):(r.blnCachedOk=!1,a.getAllTimeConstraints(r).then(t,i))}),i):i(new Error("invalid id"))}))},getProducedItemsForMfgProcess:function(r,i){var l=u;return i||(i="itemRef"),new t((function(t,u){if(r&&(r.id||r.physicalid||r.workplan)&&(!r.workplan||e.Object.isPlainObject(r.workplan)&&(r.workplan.physicalid||r.workplan.id)))if(!c||!c.getProducedItemsForMfgProcess||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()){var d=r.workplan||r.reference||r;s._getSecurityContext().then((function(r){s.getServiceUrl({serviceName:"3DSpace"}).then((function(r){var n=r+"/resources/delmia/param/configuration/getParameters?domainID=DigitalManufacturing&familyID=OOTBRolesLayoutView&paramID=OOTBRolesLayoutTreeListView&argID=OOTBRolesLayoutTreeListViewArg";s.callAuthenticatedRequest(n,"json","GET",null).then((function(n){var c={};if(n){a&&"string"==typeof a&&(a=JSON.parse(a));var o=[];e.each(a.Roles||[],(function(e,r){o=o.concat(r)})),e.each(n,(function(e,r){r&&r.rolecusto&&r.roleootb&&o.indexOf(r.rolecusto)<0&&(c[r.rolecusto]=r.roleootb)}))}var p=null;d&&d.physicalid&&(p=d.physicalid);var m=r+"/resources/v1/modeler/dsprcs/dsprcs:MfgProcess/";l.isOperation(d)&&(m=r+"/resources/v1/modeler/dsprcs/dsprcs:MfgOperation/"),m+=p+"/dsprcs:ItemSpecification",s.callAuthenticatedRequest(m,"json","GET",null).then((function(r){var n=[];if(r&&!e.Object.isEmptyObject(r)){var s=r;"string"==typeof r&&(s=JSON.parse(r)),s&&s.member&&s.member.length>0&&e.each(s.member,(function(e,r){r&&r[i]&&(r.usage&&c[r.usage]&&(r.usageCusto=r.usage,r.usage=c[r.usage]),(r[i].identifier||Array.isArray(r[i])&&r[i].length)&&n.push(r))}))}t(n)}),u)}),u)}),u)}),u)}else s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?"itemRef"!==i?c.getImplementedItemsForMfgProcess?c.getImplementedItemsForMfgProcess(r,l.getImplementedItemsForMfgProcess).then(t,u):(r.blnCachedOk=!1,l.getProducedItemsForMfgProcess(r,i).then(t,u)):c.getProducedItemsForMfgProcess(r,i,l.getProducedItemsForMfgProcess).then(t,u):(r.blnCachedOk=!1,l.getProducedItemsForMfgProcess(r,i).then(t,u))}),u);else u(new Error("invalid id"))}))},getImplementedItemsForMfgProcess:function(e){return u.getProducedItemsForMfgProcess(e,"itemOcc")},getProducedItem:function(r){var a=u;return new t((function(t,i){r&&(r.id||r.physicalid)?(r.Minimum&&Array.isArray(r.Minimum)&&(r.Minimum=r.Minimum.concat(["V_Name","description","current","project","originated","modified","revision","owner","organization","cestamp"]).filter((function(e,r,t){return t.indexOf(e)===r}))),!c||!c.getProducedItem||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()?s.getReference(r).then((function(r){var n={};if(r&&r.length){var s=r[0];n=Object.assign(s,{id:s.physicalid,type:s.plmObjectTypeInternal,title:s.V_Name,state:s.current,collabspace:s.project,created:s.originated});e.each(["modified","created"],(function(e,r){if(n[r]&&n[r].indexOf("@")>0){var t=function(e){var r;isNaN(e)?(e.indexOf("@")>0&&(e=(e=e.replace("@"," ")).substr(0,e.lastIndexOf(":"))+" "+e.substr(e.lastIndexOf(":")+1)),r=new Date(e).getTime()):r=1e3*e;var t=new Date;return t.setTime(r),t}(n[r]);n[r]=t.toLocaleString()}}))}t(n)}),i):s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?c.getProducedItem(r,a.getProducedItem).then(t,i):(r.blnCachedOk=!1,a.getProducedItem(r).then(t,i))}),i)):i(new Error("invalid id"))}))},_getProducedItem_publicAPI:function(r){return new t((function(t,n){if(r&&(r.id||r.physicalid)){s._getSecurityContext().then((function(c){s.getServiceUrl({serviceName:"3DSpace"}).then((function(a){var i=a+"/resources/v1/modeler/dsmfg/dsmfg:MfgItem/"+(r.id||r.physicalid);i=i+"?SecurityContext="+encodeURIComponent(c),s.callAuthenticatedRequest(i,"json","GET",null).then((function(r){if(r){var s=r;if("string"==typeof r&&(s=JSON.parse(r)),s&&s.member&&s.member.length>0){e.each(s.member,(function(e,r){t(r)}))}else n(new Error("Unable to locate producedItemDataObject"))}else n(new Error("Unable to locate getDataComplete"))}),n)}),n)}))}else n(new Error("invalid id"))}))},getProducedItemInstance:function(r){var a=u;return new t((function(t,i){r&&(r.id||r.physicalid)?r.ParentPhysicalid||r.relativePath?!c||!c.getProducedItemInstance||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()?s.getServiceUrl({serviceName:"3DSpace"}).then((function(n){var c=n;r.relativePath?c+=r.relativePath:c+="/resources/v1/modeler/dsmfg/dsmfg:MfgItem/"+r.ParentPhysicalid+"/dsmfg:MfgItemInstance/"+(r.id||r.physicalid),s.callAuthenticatedRequest(c,"json","GET",null).then((function(r){if(r){var n=r;if("string"==typeof r&&(n=JSON.parse(r)),n&&n.member&&n.member.length>0){e.each(n.member,(function(e,r){t(r)}))}else i(new Error("Unable to locate producedItemInstance"))}else i(new Error("Unable to locate getDataComplete"))}),i)}),i):s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?c.getProducedItemInstance(r,a.getProducedItemInstance).then(t,i):(r.blnCachedOk=!1,a.getProducedItemInstance(r).then(t,i))}),i):i("invalid parent id"):i(new Error("invalid id"))}))},getResource:function(r){var a=u;return new t((function(t,i){r&&r.physicalid?!c||!c.getResource||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()?s.getServiceUrl({serviceName:"3DSpace"}).then((function(n){var c=n+"/resources/v1/modeler/dsrsc/dsrsc:Resource/"+(r.id||r.physicalid);r.source&&r.relativePath&&(c=r.source+r.relativePath);s._getSecurityContext().then((function(r){var n={SecurityContext:r};s.callAuthenticatedRequest(c,"json","GET",null,null,n).then((function(r){if(r&&r.member&&r.member.length){var n=null;e.each(r.member,(function(e,r){var t=Object.assign({physicalid:r.id||r.identifier,V_discipline:r.resourceType},r);return t&&t.physicalid&&(n=t),!n})),t(n)}else i(new Error("Failed to fetch resource"))}),(function(e){i(new Error((e.message||e)+" \nFailed to fetch resource"))}),i)}))}),i):s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?c.getResource(r,a.getResource).then(t,i):(r.blnCachedOk=!1,a.getResource(r).then(t,i))}),i):i("Invalid input parameters!")}))},getPrimaryCapableResources:function(r){var a=u;return new t((function(t,i){r&&r.physicalid?!c||!c.getPrimaryCapableResources||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()?s.getServiceUrl({serviceName:"3DSpace"}).then((function(n){s._getSecurityContext().then((function(c){var a=n+"/resources/v1/modeler/dsprcs/dsprcs:MfgOperation/"+(r.id||r.physicalid)+"/dsprcs:PrimaryCapableResource";((r.plmObjectTypeInternal||r.plmObjectType).toLowerCase().indexOf("workplan")>=0||(r.plmObjectTypeInternal||r.plmObjectType).toLowerCase().indexOf("system")>=0)&&(a=n+"/resources/v1/modeler/dsprcs/dsprcs:MfgProcess/"+(r.id||r.physicalid)+"/dsprcs:PrimaryCapableResource");var o={SecurityContext:c};s.callAuthenticatedRequest(a,"json","GET",null,null,o).then((function(n){var s={};n&&n.member&&e.each(n.member,(function(e,t){if(t&&t.resource&&t.resource.identifier){var n=Object.assign({physicalid:t.resource.identifier,plmBaseObjectType:t.resource.type},t.resource);r.blnIncludeConnection&&(n.connection=t),n&&n.physicalid&&(s[n.physicalid]=n)}})),t(s)}),i)}))}),i):s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?c.getPrimaryCapableResources(r,a.getPrimaryCapableResources).then(t,i):(r.blnCachedOk=!1,a.getPrimaryCapableResources(r).then(t,i))}),i):i("Invalid input parameters!")}))},getSecondaryCapableResources:function(r){var a=u;return new t((function(t,i){r&&r.physicalid?!c||!c.getSecondaryCapableResources||o&&o.platform_services&&"Search"in o.platform_services&&!o.platform_services.Search||!1===r.blnCachedOk||r.blnForceRefresh||!n.isIndex()?s.getServiceUrl({serviceName:"3DSpace"}).then((function(n){s._getSecurityContext().then((function(c){var a=n+"/resources/v1/modeler/dsprcs/dsprcs:MfgOperation/"+(r.id||r.physicalid)+"/dsprcs:SecondaryCapableResource";a=a+"?SecurityContext="+encodeURIComponent(c),s.callAuthenticatedRequest(a,"json","GET",null).then((function(r){var n={};r&&r.member&&e.each(r.member,(function(e,r){if(r&&r.resource&&r.resource.identifier){var t=Object.assign({physicalid:r.resource.identifier,plmBaseObjectType:r.resource.type},r.resource);t&&t.physicalid&&(n[t.physicalid]=t)}})),t(n)}),i)}))}),i):s.getServiceUrl({serviceName:"3DSearch"}).then((function(e){o||(o={}),o.platform_services||(o.platform_services={}),o.platform_services.Search=e||!1,o.platform_services.Search?c.getSecondaryCapableResources(r,a.getSecondaryCapableResources).then(t,i):(r.blnCachedOk=!1,a.getSecondaryCapableResources(r).then(t,i))}),i):i("Invalid input parameters!")}))},updatePlatformServicesCache:function(e){var r=s.getCacheObject();return o||(o=r||{}),o.platform_services||(o.platform_services=r&&r.platform_services?r.platform_services:{}),e&&(o.platform_services=Object.assign(o.platform_services,e)),o.platform_services},setCacheObject:function(r){r&&e.Object.isPlainObject(r)&&(o=r,c&&c.setCacheObject&&c.setCacheObject(r))},getCacheObject:function(){return o},_cacheOperationObject:function(e,r){return c._cacheOperationObject(e,r)},_cacheWorkplanObject:function(e,r){return c._cacheWorkplanObject(e,r)},cacheValidationResults:function(r){return new t((function(t,n){r&&r.workplanID&&r.producedItemID?r.resultsToCache||e.Object.isEmptyObject(r.resultsToCache)?("string"!=typeof r.resultsToCache&&(r.resultsToCache=JSON.stringify(r.resultsToCache)),o.cachedResults||(o.cachedResults={}),o.cachedResults[r.workplanID+","+r.producedItemID]=JSON.parse(r.resultsToCache),s.getServiceUrl({serviceName:"3DSpace"}).then((function(e){s._getSecurityContext().then((function(c){var a=e+"/resources/DELJRoutingRestWebServices/v0/validation/cachedResults";a=a+"?SecurityContext="+encodeURIComponent(c);var i={};s.callAuthenticatedRequest(a,"json","PUT",r).then((function(e){i={},e&&e.resultsCached&&(i[r.workplanID+","+r.producedItemID]=JSON.parse(r.resultsToCache),o.cachedResults[r.workplanID+","+r.producedItemID]=JSON.parse(r.resultsToCache)),t(i[r.workplanID+","+r.producedItemID])}),n)}))}),n)):n("Nothing to save!"):n("Invalid input parameters!")}))},getCachedResults:function(r){return new t((function(t,n){r&&r.workplanID&&r.producedItemID?o&&o.cachedResults&&o.cachedResults[r.workplanID+","+r.producedItemID]&&!e.Object.isEmptyObject(o.cachedResults[r.workplanID+","+r.producedItemID])?t(o.cachedResults[r.workplanID+","+r.producedItemID]):s.getServiceUrl({serviceName:"3DSpace"}).then((function(e){s._getSecurityContext().then((function(c){var a=e+"/resources/DELJRoutingRestWebServices/v0/validation/cachedResults";a=a+"?SecurityContext="+encodeURIComponent(c);var i={};s.callAuthenticatedRequest(a,"json","GET",r).then((function(e){i={},e&&e.cachedResults&&(i[r.workplanID+","+r.producedItemID]=e.cachedResults,o.cachedResults||(o.cachedResults={}),o.cachedResults[r.workplanID+","+r.producedItemID]=e.cachedResults),t(i[r.workplanID+","+r.producedItemID])}),n)}))}),n):n("Invalid input parameters!")}))}});return u}));