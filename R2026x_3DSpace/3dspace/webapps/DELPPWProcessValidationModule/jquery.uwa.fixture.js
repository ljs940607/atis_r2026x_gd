if(window.require&&window.define){var objRequireParams={};window.Configuration&&window.Configuration.webappsDir&&(objRequireParams.baseUrl=window.Configuration.webappsDir),require(objRequireParams,["DS/DELWebInfrastructureControls/UWAUtils","DS/WAFData/WAFData"],(function(e,t){if(t.request&&!t._oldRequest&&(window.Configuration&&window.Configuration.useFixtures||window.widget.getUrl().indexOf("useFixtures=1")>0)){var r=window.$,i=window.can,n=window.steal;!r&&window.jQuery&&(r=window.$=window.jQuery);var o=function(t){n&&n.dev&&n.dev.log?n.dev.log.call(n.dev,t):e.log(t)},u=function(e){n&&n.dev&&n.dev.warn?n.dev.warn.call(n.dev,e):(window.console&&window.console.warn?window.console.warn:o)(e)};t._oldRequest=t.request,t.request=function(n,o){var a=!0;if(n&&n.indexOf(location.origin)<0&&n.indexOf("://")>0){var s=n.indexOf("://"),l=n.substr(0,n.indexOf("/",s+3));n.indexOf("/3DSpace")>0?(s=n.indexOf("/3DSpace"),l=n.substr(0,n.indexOf("/",s+3)),n=n.replace(l,Foe.Model.Session.webroot)):n=n.replace(l,location.origin)}if(n&&n.indexOf("SecurityContext=")>0){s=n.indexOf("SecurityContext=");var d=n.indexOf("&",s+1);if(d>0){var f=n.substring(s,d+1);n=n.replace(f,"")}else n=n.substr(0,s)}var c={url:n,type:o.method||"GET"},w=[],x=function(){return!1};if(i&&i.fixture&&i.fixture.overwrites&&i.fixture.overwrites.length&&(w=i.fixture.overwrites,x=i.fixture._similar),t._fixtureData&&t._fixtureData.overwrites&&(w=w.concat(t._fixtureData.overwrites),x=function(r,i,n){return n?e.Object.same(r,i,{fixture:null}):e.Object.subset(r,i,t._fixtureData._compare)}),e.each(w,(function(e,t){return(a=!x(c,t))?t.type.toLowerCase()===c.type.toLowerCase()&&c.url&&t.url&&0===c.url.indexOf(t.url)&&(a=!1,t.originalURL=c.url,c=t):c=t,a})),a)return"passport"===o.proxy&&t._oldAuthenticatedRequest?t._oldAuthenticatedRequest.call(this,n,o):t._oldRequest.call(this,n,o);if(c.fixture){if(c.originalURL&&(o.originalURL=c.originalURL),!o.dataType&&o.type&&(o.dataType=o.type),!o.complete&&o.onComplete&&(o.complete=function(t,r){if("success"===r||"OK"===r){var i=t.responseText||t.responseJSON;if(o.dataType&&"json"===o.dataType&&"string"==typeof i)try{i=JSON.parse(t.responseText)}catch(e){u("jquery.uwa.fixture.js::complete - unknown json, error = "+e.toString()),e.stack&&u(e.stack)}var n={},a=null;t.getAllResponseHeaders?a=t.getAllResponseHeaders():t.xhr&&t.xhr.getAllResponseHeaders&&(a=t.xhr.getAllResponseHeaders()),a&&"string"==typeof a&&e.each(a.split("\n"),(function(e,t){if(t&&t.length){var r=t.split(":");r.length>2&&(r[1]=t.substr(t.indexOf(":")+1),r.length=2),2===r.length?n[r[0].trim()]=r[1].trim():u("jquery.uwa.fixture.js::complete - unknown header format = "+t)}})),o.onComplete(i,n)}}),!o.error&&o.onFailure&&(o.error=function(e,t,r){callbacks=o,"timeout"===r&&o.onTimeout?o.onTimeout():o.onFailure(new Error(r),null,{},!0,callbacks)}),r&&r.ajax){var p=r.ajax(c.url,o);return{cancel:function(){p.aborted=!0,p.abort()},xhr:p}}if("function"==typeof c.fixture)c.fixture(o,o.success,o.headers);else if(t._oldRequest)return"string"==typeof c.fixture?t._oldRequest(c.fixture,o):t._oldRequest(c.url,o)}return null},t.authenticatedRequest&&!t._oldAuthenticatedRequest&&(t._oldAuthenticatedRequest=t.authenticatedRequest,t.authenticatedRequest=t.request)}define("DS/DELWebInfrastructure/jquery.uwa.fixture",[],(function(){return{}}))}))}