define("DS/DELPPWProcessValidationModule/worker/rule02_HeaderOperationTitle",[],(function(){"use strict";return function(){var e={};self.onmessage=function(a){if(a&&a.data)switch(a.data.type){case"config":if(a.data.config&&(e=Object.assign(e,a.data.config),(a.data.config.sec_context||a.data.config.security_ctx)&&(self.sec_context=a.data.config.sec_context||a.data.config.security_ctx),a.data.config.COMPASS_CONFIG&&(self.COMPASS_CONFIG=Object.clone?Object.clone(a.data.config.COMPASS_CONFIG):a.data.config.COMPASS_CONFIG),a.data.config.require_config)){if(a.data.config.require_config.baseUrl)importScripts(a.data.config.require_config.baseUrl+"/AmdLoader/AmdLoader.js");else{const e=(self.location+"").replace(/\/[^/]+$/,"/").replace(/:444\/$/,"");var n=null;e.indexOf("blob:")>-1&&(n=e.replace(/^blob:/,"")),importScripts(n+"/3DSpace/webapps/AmdLoader/AmdLoader.js")}self.require&&self.require.config(a.data.config.require_config)}break;case"start":a.data.options&&a.data.options.workplan&&a.data.options.workplan.physicalid&&t(a.data.options);break;default:self.postMessage({type:"error",msg:"Invalid event type = "+a.data.type})}else self.postMessage({type:"error",msg:"Invalid event data"})};var t=function(t){var a={rule02_HeaderOperationTitle:{result:"pass"}};self.require(["DS/DELPPWProcessValidationModule/DELWebProcessValidationModel","DS/DELWebInfrastructureControls/DELWebIndexAuthoringMgmt"],(function(n,i){UWA.log("Inside rule 2 require"),e&&(e.objAllServices&&n.updatePlatformServicesCache(e.objAllServices),e.navigateOn&&("Database"===e.navigateOn?i.setDatabase():i.setIndex()));var s=a.rule02_HeaderOperationTitle,r=t.workplan;n.getAllDescendantsForWorkplan({physicalid:r.physicalid||r.id,Depth:1}).then((function(e){if(UWA.log("workplanDescendantsReturn: "),UWA.log(e),e&&!UWA.Object.isEmptyObject(e)){var i=new RegExp("^\\d+$"),r={};UWA.each(e,(function(a,o){if(o&&o.ParentPhysicalid&&o.ParentPhysicalid===t.workplan.physicalid){var c=o.PLM_ExternalID||o.name||"",l=null,d=null,p={physicalid:o.ReferencePhysicalid,OXID:o.ReferenceOXID};if(p.OXID&&e[p.OXID]?p=e[p.OXID]:p.physicalid&&e[p.physicalid]?p=e[p.physicalid]:UWA.each(e,(function(e,t){return p.OXID&&t.OXID===p.OXID||p.physicalid&&t.physicalid===p.physicalid?(p=t,!1):void 0})),p&&!n.isHeaderOperation(p))return;if(i.test(c)?r[c]?(l={short:"Header Operation Instance Title must be unique."},s.messages&&s.messages[l.short]||(d={long:"Header Operation Instance Title must be unique in the whole Workplan.",fixes:["Rename the instance of the Header Operation to be unique within the context of the Workplan.","Remove the Operation from the Workplan"]})):c.toString().length>20&&(l={short:"Header Operation Instance Title is too long."},s.messages&&s.messages[l.short]||(d={long:"Header Operation Instance Title length must less or equal to 20 digits.",fixes:["Rename the instance of the Header Operation to be be less than or equal to 20 digits.","Remove the Operation from the Workplan"]})):(l={short:"Header Operation Instance Title must be an integer."},s.messages&&s.messages[l.short]||(d={long:"Header Operation Instance Title must be integer: must contain only 0, 1, 2, 3, 4, 5, 6, 7, 8, 9.",fixes:["Rename the instance of the Header Operation to an integer.","Remove the Operation from the Workplan"]})),l){s.result="warning",l.operation={physicalid:o.ReferencePhysicalid,OXID:o.ReferenceOXID},l.operationInstance=o;var f=function(t,a){(a.ReferencePhysicalid||a.ReferenceOXID)&&(e[a.ReferencePhysicalid]?t.operation=e[a.ReferencePhysicalid]:a.ReferenceOXID&&e[a.ReferenceOXID]?t.operation=e[a.ReferenceOXID]:UWA.each(e,(function(e,n){return!n||n.physicalid!==a.ReferencePhysicalid&&n.OXID!==a.ReferenceOXID||(t.operation=n,!1)})))};if(f(l,o),s.issues||(s.issues=[]),s.issues.push(l),"Header Operation Instance Title must be unique."===l.short&&r[c]&&!r[c].duplicateInstanceTitle){var u=Object.assign({},l);u.operation={physicalid:r[c].ReferencePhysicalid,OXID:r[c].ReferenceOXID},u.operationInstance=r[c],f(u,u.operationInstance),s.issues.push(u),r[c].duplicateInstanceTitle=!0}d&&(s.messages||(s.messages={}),s.messages[l.short]=d)}r[c]=o}})),self.postMessage({type:"complete",result:a})}else self.postMessage({type:"complete",result:a})}),(function(e){self.postMessage({type:"error",msg:"Error",objError:e})}))}))}}}));