define("DS/DELPPWProcessValidationModule/worker/rule10_HeaderOperationPrimaryResource",[],(function(){"use strict";return function(){var e={};self.onmessage=function(r){if(r&&r.data)switch(r.data.type){case"config":if(r.data.config&&(e=Object.assign(e,r.data.config),(r.data.config.sec_context||r.data.config.security_ctx)&&(self.sec_context=r.data.config.sec_context||r.data.config.security_ctx),r.data.config.COMPASS_CONFIG&&(self.COMPASS_CONFIG=Object.clone?Object.clone(r.data.config.COMPASS_CONFIG):r.data.config.COMPASS_CONFIG),r.data.config.require_config)){if(r.data.config.require_config.baseUrl)importScripts(r.data.config.require_config.baseUrl+"/AmdLoader/AmdLoader.js");else{const e=(self.location+"").replace(/\/[^/]+$/,"/").replace(/:444\/$/,"");var t=null;e.indexOf("blob:")>-1&&(t=e.replace(/^blob:/,"")),importScripts(t+"/3DSpace/webapps/AmdLoader/AmdLoader.js")}self.require&&self.require.config(r.data.config.require_config)}break;case"start":r.data.options&&r.data.options.workplan&&r.data.options.workplan.physicalid&&a(r.data.options);break;default:self.postMessage({type:"error",msg:"Invalid event type = "+r.data.type})}else self.postMessage({type:"error",msg:"Invalid event data"})};var a=function(a){var r={rule10_HeaderOperationPrimaryResource:{result:"pass"}};self.require(["DS/DELWebInfrastructureControls/UWAUtils","DS/DELPPWProcessValidationModule/DELWebProcessValidationModel","DS/DELWebInfrastructureControls/DELWebIndexAuthoringMgmt"],(function(t,s,o){t.log("Inside rule10_HeaderOperationPrimaryResource require"),e&&(e.objAllServices&&s.updatePlatformServicesCache(e.objAllServices),e.navigateOn&&("Database"===e.navigateOn?o.setDatabase():o.setIndex()));var i=a.workplan;s.getAllHeaderOperationsForWorkplan({physicalid:i.physicalid||i.id}).then((function(e){if(t.log("workplanDescendantsReturn: "),t.log(e),e&&!t.Object.isEmptyObject(e)){var a=r.rule10_HeaderOperationPrimaryResource,o=[];t.each(e,(function(e,r){o.push(new Promise((function(e,o){s.getPrimaryCapableResources(r).then((function(s){s&&!t.Object.isEmptyObject(s)||(a.result="warning",a.messages||(a.messages={}),a.messages["Every Header Operation must have at least one Primary Resource defined."]||(a.messages["Every Header Operation must have at least one Primary Resource defined."]={long:"For every Header Operation that exists below a Work Plan, that Header Operation must have at least one Primary Resource defined.",fixes:["Add a Primary Resource to the Header Operation.","Remove the Header Operation from the Work Plan."]}),a.issues||(a.issues=[]),a.issues.push({short:"Every Header Operation must have at least one Primary Resource defined.",operation:r})),e(s)}),o)})))})),Promise.all(o).then((function(){self.postMessage({type:"complete",result:r})}),(function(e){self.postMessage({type:"error",msg:"Unable to retrieve primary resources for child header operations",objError:e})}))}else self.postMessage({type:"complete",result:r})}),(function(e){self.postMessage({type:"error",msg:"Unable to retrieve child header operations",objError:e})}))}))}}}));