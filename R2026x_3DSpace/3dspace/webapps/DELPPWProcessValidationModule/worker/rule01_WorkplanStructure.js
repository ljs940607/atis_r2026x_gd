define("DS/DELPPWProcessValidationModule/worker/rule01_WorkplanStructure",[],(function(){"use strict";return function(){var e="Child of Workplan is not a Header Operation.",r="Child of a General Operation is an Operation.",t={};self.onmessage=function(e){switch(e.data.type){case"config":if(e.data.config&&(t=Object.assign(t,e.data.config),(e.data.config.sec_context||e.data.config.security_ctx)&&(self.sec_context=e.data.config.sec_context||e.data.config.security_ctx),e.data.config.COMPASS_CONFIG&&(self.COMPASS_CONFIG=Object.clone?Object.clone(e.data.config.COMPASS_CONFIG):e.data.config.COMPASS_CONFIG),e.data.config.require_config)){if(e.data.config.require_config.baseUrl)importScripts(e.data.config.require_config.baseUrl+"/AmdLoader/AmdLoader.js");else{const e=(self.location+"").replace(/\/[^/]+$/,"/").replace(/:444\/$/,"");var r=null;e.indexOf("blob:")>-1&&(r=e.replace(/^blob:/,"")),importScripts(r+"/3DSpace/webapps/AmdLoader/AmdLoader.js")}self.require&&self.require.config(e.data.config.require_config)}break;case"start":e.data.options&&e.data.options.workplan&&e.data.options.workplan.physicalid&&a(e.data.options)}};var a=function(a){var n={rule01_WorkplanStructure:{}};self.require(["DS/DELWebInfrastructureControls/UWAUtils","DS/DELPPWProcessValidationModule/DELWebProcessValidationModel","DS/DELWebInfrastructureControls/DELWebIndexAuthoringMgmt"],(function(o,i,s){o.log("Inside rule 1 require"),t&&(t.objAllServices&&i.updatePlatformServicesCache(t.objAllServices),t.navigateOn&&("Database"===t.navigateOn?s.setDatabase():s.setIndex())),i.getAllDescendantsForWorkplan({Depth:4,physicalid:a.workplan.physicalid,Minimum:'["V_Name","interfaces","taxonomies"]',COMPASS_CONFIG:self.COMPASS_CONFIG}).then((function(t){var s={};if(o.each(t,(function(e,r){r.physicalid===a.workplan.physicalid&&(s=r)})),o.Object.isEmptyObject(s));else{var c=s.children||[];c&&c.length>0&&o.each(c,(function(r,a){var s=a.OXID,c=t[s].ReferenceOXID,l=t[c];if(!i.isHeaderOperation(l)){o.Object.isEmptyObject(n.rule01_WorkplanStructure)&&(n.rule01_WorkplanStructure.result="blocking",n.rule01_WorkplanStructure.messages={},n.rule01_WorkplanStructure.issues=[]),n.rule01_WorkplanStructure.messages[e]||(n.rule01_WorkplanStructure.messages[e]={long:"Any child of a workplan must be a Header Operation.",fixes:["Remove the child that is not a header operation."]});var u={short:e,operation:l};n.rule01_WorkplanStructure.issues.push(u)}}))}o.each(t,(function(e,a){a.taxonomies&&a.taxonomies.contains("DELLmiGeneralOperationReference")&&a.children&&o.each(a.children,(function(e,a){var i=a.OXID,s=(a=t[i]).ReferenceOXID,c=t[s];if(c.taxonomies&&c.taxonomies.contains("DELLmiOperationPPRReference")){o.Object.isEmptyObject(n.rule01_WorkplanStructure)&&(n.rule01_WorkplanStructure.result="blocking",n.rule01_WorkplanStructure.messages={},n.rule01_WorkplanStructure.issues=[]),n.rule01_WorkplanStructure.messages[r]||(n.rule01_WorkplanStructure.messages[r]={long:"Any operation can not be a child of a General Operation.",fixes:["Remove the child that is under the General Operation."]});var l={short:r,operation:c};n.rule01_WorkplanStructure.issues.push(l)}}))})),o.Object.isEmptyObject(n.rule01_WorkplanStructure)&&(n.rule01_WorkplanStructure.result="pass"),o.log("rule 1 complete: "+n),self.postMessage({type:"complete",result:n})}),(function(e){}))}))}}}));