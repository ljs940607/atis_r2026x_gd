define("DS/StudioResourceModelWeb/interfaces/CATI3DXPictureResourceAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],(function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXPictureResourceAsset",required:{getPicture:function(){},getPictureSizeInPixel:function(){},_updatePicture:function(){}},optional:{}})})),define("DS/StudioResourceModelWeb/extensions/CATE3DXKeyframerResourceAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events"],(function(e,t,s,i){"use strict";return t.extend(s,i,{init:function(){},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",(()=>{this._clearKey(),this.dispatchEvent("KEY_CHANGED")}))},Dispose:function(){this._clearKey()},_clearKey:function(){delete this._key,delete this._keyPromise},getKey:function(){return this._key?e.Promise.resolve(this._key):(this._keyPromise||(this._keyPromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then((t=>"string"!=typeof t?e.Promise.reject(new Error("Asset is not a string")):(this._key=t,delete this._keyPromise,this._key))).catch((t=>(delete this._keyPromise,e.Promise.reject(t))))),this._keyPromise)}})})),define("DS/StudioResourceModelWeb/extensions/CATE3DXPictureResourceAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events","DS/CAT3DExpModel/XCTExpUint8ArrayAsset"],(function(e,t,s,i,n){"use strict";return t.extend(s,i,{init:function(){},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",(()=>{this._clearPicture(),this.dispatchEvent("PICTURE_CHANGED")}))},Dispose:function(){this._clearPicture()},_clearPicture:function(){delete this._picture,this._pictureBlobURL&&(URL.revokeObjectURL(this._pictureBlobURL),delete this._pictureBlobURL),delete this._picturePromise},getPicture:function(){return this._picture?e.Promise.resolve(this._picture):(this._picturePromise||(this._picturePromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then((t=>t instanceof n?(this._pictureBlobURL=t.getBlobUrl(),this._picture=new Image,this._picture.src=this._pictureBlobURL,delete this._picturePromise,this._picture):e.Promise.reject(new Error("Cant retrieve picture asset for object "+this.GetObject().GetID())))).catch((t=>(delete this._picturePromise,e.Promise.reject(t))))),this._picturePromise)},getPictureSizeInPixel:async function(){const e=await this.getPicture();return{w:e.width,h:e.height}},_updatePicture:function(e){this._clearPicture(),this._pictureBlobURL=e,this._picture=new Image,this._picture.src=this._pictureBlobURL}})})),define("DS/StudioResourceModelWeb/extensions/CATE3DXSoundResourceAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events","DS/CAT3DExpModel/XCTExpUint8ArrayAsset"],(function(e,t,s,i,n){"use strict";return t.extend(s,i,{init:function(){this._fileSoundName="",this._fileSoundExtension=""},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",(()=>{this._clearSound(),this.dispatchEvent("SOUND_CHANGED")}))},Dispose:function(){this._clearSound()},_clearSound:function(){delete this._sound,this._soundBlobURL&&(URL.revokeObjectURL(this._soundBlobURL),delete this._soundBlobURL),this._fileSoundName&&delete this._fileSoundName,this._fileSoundExtension&&delete this._fileSoundExtension,delete this._soundPromise},getSound:function(){return this._sound?e.Promise.resolve(this._sound):(this._soundPromise||(this._soundPromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then((t=>{if(!(t instanceof n))return e.Promise.reject(new Error("Cant retrieve sound asset for object "+this.GetObject().GetID()));const s=t.getName();for(const e in this._typeExtMap)s.endsWith(e)&&(this._fileSoundName=s,this._fileSoundExtension=this._typeExtMap[e]);return this._soundBlobURL=t.getBlobUrl(),this._sound=new Audio(this._soundBlobURL),delete this._soundPromise,this._sound})).catch((t=>(delete this._soundPromise,e.Promise.reject(t))))),this._soundPromise)},getName:function(){return this._fileSoundName},getExtension:function(){return this._fileSoundExtension},_typeExtMap:{".wav":"wav",".ogg":"ogg",".mp3":"mp3"},_updateSound:function(e){this._clearSound(),this._soundBlobURL=e,this._sound=new Audio(this._soundBlobURL)}})})),define("DS/StudioResourceModelWeb/interfaces/CATI3DXKeyframerResourceAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],(function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXKeyframerResourceAsset",required:{getKey:function(){}},optional:{}})})),define("DS/StudioResourceModelWeb/interfaces/CATI3DXSoundResourceAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],(function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXSoundResourceAsset",required:{getSound:function(){},getExtension:function(){},getName:function(){},_updateSound:function(){}},optional:{}})})),define("DS/StudioResourceModelWeb/extensions/CATE3DXURLResourceAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events"],(function(e,t,s,i){"use strict";return t.extend(s,i,{init:function(){},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",(()=>{this._clearUrl(),this.dispatchEvent("URL_CHANGED")}))},Dispose:function(){this._clearUrl()},_clearUrl:function(){delete this._url,delete this._urlPromise},getURL:function(){return this._url?e.Promise.resolve(this._url):(this._urlPromise||(this._urlPromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then((t=>"string"!=typeof t?e.Promise.reject(new Error("Asset is not a string")):(this._url=t,delete this._urlPromise,this._url))).catch((t=>(delete this._urlPromise,e.Promise.reject(t))))),this._urlPromise)}})})),define("DS/StudioResourceModelWeb/interfaces/CATI3DXURLResourceAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],(function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXURLResourceAsset",required:{getURL:function(){}},optional:{}})}));