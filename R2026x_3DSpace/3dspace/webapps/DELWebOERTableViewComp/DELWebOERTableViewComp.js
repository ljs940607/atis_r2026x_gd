define("DS/DELWebOERTableViewComp/actions/StandardActions",["DS/DELWebOERCommonUtils/utils/TrackUtils","DS/Logger/Logger"],(function(e,t){"use strict";const n="ro.DELFmiUseCaseExt.V_UseCase.instance",i="hideShowOutOfScopedItems",o=1,r=2,a="Requirement",s={hideShow:async function(n,i){var a=i.args.hideIn3DHandlerId,s=i.args.showIn3DHandlerId,l=i.args.node,d=i.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(d.hasHandler(a)&&d.hasHandler(s)){let t=l.getAttributeValue("hideShow3D"),n={path:l.getRirPath()},c=t===o||t===r?a:s;await d.executeHandler({id:c,args:n});let u=t===o||t===r?"ShowNode":"HideNode";e.trackChanges({category:"HideShow",action:u,label:u,dims:{pd1:i.args.origin},executionContext:i.executionContext})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");n()},togglePartFabrication:async function(e,o){let r,{executionContext:a}=o,s=a.getComponent(WAfrStandardComponentKey.HandlerComponent),{node:l,hideMaterialId:d,showMaterialId:c}=o.args||{};if(l&&l.getAttributeValue(n)){switch(l.getAttributeValue(i)){case l.ENUM_PARTFABRICATION.SHOW:r=d;break;case l.ENUM_PARTFABRICATION.HIDE:r=c}r&&(s.hasHandler(r)?await s.executeHandler({id:r,args:{path:l.getRirPath()}}):t.warn(`${r} Handler not found, please include correct package in your app id card`))}e()},showHideAllMaterials:async function(e,o){let r=o.args.selectedNodes,a=o.args.showMaterialId?o.args.showMaterialId:o.args.hideMaterialId,s=o.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(UWA.is(r,"array")&&o.args.treeDocument)if(s.hasHandler(a)){let e=[],t=o.args.treeDocument,l=function(e){let t=e.getAttributeValue(n);return!(!t||""===t)},d=function t(n){l(n)&&(e.push(n.getRirPath()),n.setAttribute(i,o.args.showMaterialId?n.ENUM_PARTFABRICATION.HIDE:n.ENUM_PARTFABRICATION.SHOW)),n.hasChildren()&&n.getChildren().forEach(t)};t.prepareUpdate(),r.forEach((e=>{e.isRoot()&&d(e)})),t.pushUpdate(),await s.executeHandler({id:a,args:{path:e}})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");else t.error("Invalid input, require treedocument and selectedNodes in handler arguement");e()},showHideMaterials:async function(e,o){let r=o.args.selectedNodes,a=o.args.showMaterialId?o.args.showMaterialId:o.args.hideMaterialId,s=o.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(UWA.is(r,"array"))if(s.hasHandler(a)){let e=[];r.forEach((t=>{t.getAttributeValue(n)&&""!==t.getAttributeValue(n)&&(e.push(t.getRirPath()),t.setAttribute(i,o.args.showMaterialId?t.ENUM_PARTFABRICATION.HIDE:t.ENUM_PARTFABRICATION.SHOW))})),await s.executeHandler({id:a,args:{path:e}})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");else t.error("Invalid input, require treedocument and node in handler arguement");e()},expandAll:async function(e,n){UWA.is(n.args.selectedNodes,"array")?n.args.selectedNodes.forEach((e=>e.expandAll())):t.error("Invalid input, require selectedNodes in argurement"),e()},collapseAll:async function(e,n){UWA.is(n.args.selectedNodes,"array")?n.args.selectedNodes.forEach((e=>e.collapseAll())):t.error("Invalid input, require selectedNodes in argurement"),e()},reframe:async function(e,n){let i=n.args.reframeIn3DHandlerId,o=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);UWA.is(n.args.selectedNodes,"array")?o.hasHandler(i)?await o.executeHandler({id:i,args:{path:n.args.selectedNodes.map((e=>e.getRirPath()))}}):t.error("Handlers are not valid, please make sure right handlers are provided in config"):t.error("Invalid input, require selectedNodes in arguement"),e()},find:function(e,t){t.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"onFind",data:t}),e()},_collectHiddenChildrenNodesToShow:function(e,t){var n=e.getAll3DHiddenChildren();t=UWA.is(t,"array")?t:[],e.getAttributeValue("hideShow3D")!==e.ENUM_3DVISIBILITY.ON&&t.push(e),n.hidden.forEach((e=>{t.push(e)})),n.partialHidden.forEach((e=>{t.push(e)}))},showOnly:async function(e,n){var i=n.args.selectedNodes,o=n.args.hideIn3DHandlerId,r=n.args.showIn3DHandlerId,a=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent),l=n.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents);if(a.hasHandler(o)&&a.hasHandler(r)){let e=[],t=[],n=new Set,d=new Set,c=function e(t,n,i){t&&UWA.is(t.getBrothers(),"array")&&t.getBrothers().length>0&&t.getBrothers().forEach((e=>{i.push(e)})),t.isRoot()||(n.push(t.getParent()),e(t.getParent(),n,i))};i.forEach((n=>{t.push(n),c(n,t,e),s._collectHiddenChildrenNodesToShow(n,t)})),t.length>0&&t.forEach((e=>d.add(e.getRirPath().toString()))),e.length>0&&e.forEach((e=>n.add(e.getRirPath().toString()))),n=n.difference(d),await a.executeHandler({id:r,args:{path:Array.from(d).map((e=>e.split(",")))}}),await a.executeHandler({id:o,args:{path:Array.from(n).map((e=>e.split(",")))}}),l.publish({event:"onShowOnly",data:{data:{path:i.map((e=>e.getRirPath()))}}})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");e()},showAll:async function(e,n){let i=n.args.selectedNodes,o=n.args.showIn3DHandlerId,r=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent),a=n.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents);if(r.hasHandler(o))if(UWA.is(i,"array")){let e=[];i.forEach((t=>s._collectHiddenChildrenNodesToShow(t,e))),await r.executeHandler({id:o,args:{path:e.map((e=>e.getRirPath()))}}),a.publish({event:"onShowAll",data:{data:{path:i.map((e=>e.getRirPath()))}}})}else t.error("Invalid input, require node in handler arguement");else t.error("Handlers are not valid, please make sure right handlers are provided in config");e()},removeRoot:async function(e,n){let i=n.args.selectedNodes,o=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);o.hasHandler("DELWebOERRemoveRoots")?o.executeHandler({id:"DELWebOERRemoveRoots",args:{items:i.map((e=>({id:e.getReferenceId()})))}}):t.error("Invalid input, require treedocument and node in handler arguement"),e()},toggleFTA:async function(e,n){let i=n.args.loadFTAIn3DHandlerId,o=n.args.removeFTAIn3DHandlerId,r=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(n.args.node&&n.args.treeDocument)if(r.hasHandler(i)&&r.hasHandler(o)){let e=n.args.node,t=e.getAttributeValue(a);if(UWA.is(t)){e.setAttribute(a,t===e.ENUM_REQUIREMENT.LOAD?e.ENUM_REQUIREMENT.REMOVE:e.ENUM_REQUIREMENT.LOAD);let n=t===e.ENUM_REQUIREMENT.LOAD?i:o;await r.executeHandler({id:n,args:{path:e.getRirPath()}})}}else t.error("Handlers are not valid, please make sure right handlers are provided in config");else t.error("Invalid input, require treedocument and node in handler arguement");e()},loadFTA:async function(e,n){let i=n.args.selectedNodes,o=n.args.loadFTAIn3DHandlerId,r=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(UWA.is(i,"array"))if(r.hasHandler(o)){let e=[];i.forEach((t=>{UWA.is(t.getAttributeValue(a))&&(e.push(t.getRirPath()),t.setAttribute(a,t.ENUM_REQUIREMENT.REMOVE))})),await r.executeHandler({id:o,args:{path:e}})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");else t.error("Invalid input, require treedocument and node in handler arguement");e()},removeFTA:async function(e,n){let i=n.args.selectedNodes,o=n.args.removeFTAIn3DHandlerId,r=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(UWA.is(i,"array"))if(r.hasHandler(o)){let e=[];i.forEach((t=>{UWA.is(t.getAttributeValue(a))&&(e.push(t.getRirPath()),t.setAttribute(a,t.ENUM_REQUIREMENT.LOAD))})),await r.executeHandler({id:o,args:{path:e}})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");else t.error("Invalid input, require treedocument and node in handler arguement");e()},loadAllFTA:async function(e,n){let i=n.args.selectedNodes,o=n.args.loadFTAIn3DHandlerId,r=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(UWA.is(i,"array")&&n.args.treeDocument)if(r.hasHandler(o)){let e=[],t=n.args.treeDocument,s=function(e){return e.getAttributeValue(a)},l=function t(n){UWA.is(s(n))&&(e.push(n.getRirPath()),n.setAttribute(a,n.ENUM_REQUIREMENT.REMOVE)),n.hasChildren()&&n.getChildren().forEach(t)};t.prepareUpdate(),i.forEach((e=>{e.isRoot()&&l(e)})),t.pushUpdate(),await r.executeHandler({id:o,args:{path:e}})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");else t.error("Invalid input, require treedocument and selectedNodes in handler arguement");e()},removeAllFTA:async function(e,n){let i=n.args.selectedNodes,o=n.args.removeFTAIn3DHandlerId,r=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(UWA.is(i,"array")&&n.args.treeDocument)if(r.hasHandler(o)){let e=[],t=n.args.treeDocument,s=function(e){return e.getAttributeValue(a)},l=function t(n){UWA.is(s(n))&&(e.push(n.getRirPath()),n.setAttribute(a,n.ENUM_REQUIREMENT.LOAD)),n.hasChildren()&&n.getChildren().forEach(t)};t.prepareUpdate(),i.forEach((e=>{e.isRoot()&&l(e)})),t.pushUpdate(),await r.executeHandler({id:o,args:{path:e}})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");else t.error("Invalid input, require treedocument and selectedNodes in handler arguement");e()},biColorize:async function(e,n){let i=n.executionContext,o=n.args.treeDocument,r=n.args.data;if(o&&r&&UWA.is(r.tagColors,"array")&&r.tagColors.length>0){let e=r.tagColors[0].predicate,t=o.getAllDescendants()||[],n=[];if(t.length>0){t.forEach((e=>{-1===n.indexOf(e.getReferenceId())&&n.push(e.getReferenceId())}));let a,s=await i.getComponent("DELCommonUtilsServices").getAttributeForIds(n,[e]),l=function(e){var t={predicateKind:"",colorMap:{map:{},predicate:void 0}};return UWA.is(e.tagColors,"array")&&e.tagColors.length>0&&(t.predicateKind=e.tagColors[0].type,e.tagColors.forEach((function(e){var n,i;void 0===t.colorMap.predicate&&(i=(n=e.predicate.split("/"))[n.length-1],t.colorMap.predicate=i),t.colorMap.map[e.object]=e.color}))),t},d=function(e,t,n){var i,o,r,a,s,l="#00000000",d=[];if("date"===e&&UWA.is(n,"string"))for(s=new Date(n),d.push([s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2),("0"+s.getDate()).slice(-2)].join("/")),d.push([s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2)].join("/")),d.push(s.getFullYear().toString()),o=!0,i=0,r=d.length;i<r&&o;i++)void 0!==t.map[d[i]]&&(o=!1,l=t.map[d[i]]);else"boolean"===e&&"boolean"==typeof n?(a=n?"TRUE":"FALSE",l=t.map[a]):void 0!==t.map[n]&&(l=t.map[n]);return l};a=l(r),o.withTransactionUpdate((function(){t.forEach((e=>{var t=s[e.getReferenceId()],n=t&&t[a.colorMap.predicate]?t[a.colorMap.predicate]:null,i=d(a.predicateKind,a.colorMap,n);e.updateOptions({isBeingCut:"#00000000"===i,grid:{biColor:i}})}))}))}}else t.error("Invalid input, require treedocument and data in handler arguement");e()},biUnColorize:async function(e,n){let i=n.args.treeDocument;UWA.is(i)?i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.updateOptions({isBeingCut:!1,grid:{biColor:"#00000000"}})}))})):t.error("Invalid input, require treedocument handler arguement"),e()}};return s})),define("DS/DELWebOERTableViewComp/column/views/BuildUp",["DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json","css!DS/DELWebOERTableViewComp/assets/css/PPR2DStructure.css"],(function(e,t){"use strict";return{dataIndex:"buildUp",sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,displayType:"BuildUp",editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",alignment:"center",visibleFlag:!0,disabled:!0,width:30,height:"40px",pinned:"right",icon:{iconPath:e.getAssetsUrl("DELWebOERTableViewComp","icons/32/I_3DColumn.png"),className:"del-oer-column-header-icon"},getCellTooltip:function(e,n){var i,o=n.nodeModel,r=function(e){return{title:t.get(`BuildUp.${e}.title.description`),shortHelp:t.get(`BuildUp.${e}.short.description`),longHelp:t.get(`BuildUp.${e}.long.description`),updateModel:!1}};if(-1===n.rowID)i={shortHelp:t.get("BuildUp.description"),updateModel:!1};else switch(o.getAttributeValue("buildUp")){case o.ENUM_BUILDUP.LOADING:i=r("Loading");break;case o.ENUM_BUILDUP.DEACTIVATE:i=r("Deactivate");break;case o.ENUM_BUILDUP.ACTIVATE:i=r("Activate")}return i},getCellClassName:function(e,t){var n="";return 0===t.rowID&&(n="del-buildup"),n},getCellSemantics:function(t,n){var i=n.nodeModel,o={};switch(i.getAttributeValue("buildUp")){case i.ENUM_BUILDUP.ACTIVATE:o.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELProductBuildUp_ON.png");break;case i.ENUM_BUILDUP.DEACTIVATE:o.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELProductBuildUp_OFF.png");break;case i.ENUM_BUILDUP.LOADING:o.icon={iconName:"reload wux-ui-3ds-spin",fontIconFamily:1}}return o}}})),define("DS/DELWebOERTableViewComp/column/views/Responsible",["i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json"],(function(e){"use strict";return{kind:"user",minWidth:200,height:"40px",editableFlag:!1,typeRepresentation:"user",customisation:{exportable:{lock:!1,value:!0}},getCellTooltip:function(t,n){let i;return-1===n.rowID?i={shortHelp:e.get("Owner.description"),updateModel:!1}:n&&n.nodeModel&&n.nodeModel.options&&n.nodeModel.options.grid&&n.nodeModel.options.grid[t]&&(i={shortHelp:n.nodeModel.getReferenceValue(t)}),i},getCellValue:function(e,t){if(t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]){return{icon:{iconName:"topbar-user",fontIconFamily:1},label:t.nodeModel?t.nodeModel.options.grid[e]:""}}return""},getCellValueForExport:function(e,t){return t&&t.nodeModel?t.nodeModel.options.grid[e]:""}}})),define("DS/DELWebOERTableViewComp/utils/Utils",["UWA/Promise","DS/i3DXCompassPlatformServices/OpenWith","DS/PADUtils/PADTypesMgt","DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR"],(function(e,t,n,i,o){"use strict";var r={openWithApps:function(a){return new e((function(e){let s=new t,l=r.get3DXContent(a);n.retrieveHierarchy([a.node.getReferenceType()],(function(t){l.data.items[0].objectTaxonomies=t[a.node.getReferenceType()],s.set3DXContent(l,!0),s.retrieveCompatibleApps((function(t){var n=[],r=[];t.forEach((function(e){r.push({type:"PushItem",title:e.text,fonticon:e.fonticon&&e.fonticon.length>0?{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+e.fonticon,family:WUXManagedFontIcons.Font3DS}:void 0,icon:e.icon?e.icon:"",action:{callback:e.handler}})})),n={type:"PushItem",icon:{iconPath:i.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_OpenWith.png"),fontIconFamily:1},title:o.get("ContextualMenu.OpenWith")},r.length>0&&(n.submenu=r.length>0?r:[]),e(n)}))}))}))},get3DXContent:function(e){let t=e.executionContext.getComponent("DELCommonUtilsServices"),n=e&&UWA.is(e.selectedNodes,"array")&&e.selectedNodes.length>0?e.selectedNodes:e.node?[e.node]:[];return{protocol:"3DXContent",version:"1.1",source:t.getAppId(),widgetId:t.getWidgetId(),data:{items:n.map((e=>({envId:t.getPlatformId(),serviceId:"3DSpace",contextId:t.getCurrentSecurityContext(),objectId:e?e.getReferenceId():"",objectType:e?e.getReferenceType():"",displayName:e?e.getLabel():"",path:e?e.getRirPath().map((e=>({resourceid:e}))):null})))}}}};return r})),define("DS/DELWebOERTableViewComp/model/DELWebDictionaryModel",["DS/Logger/Logger"],(function(e){"use strict";return function(t){let n={attributes:[],dimensions:[]},i=t.executionContext;return{fetchAttributesAndDimension:function(t){var o=i.getComponent("DELCommonUtilsServices");return new UWA.Promise(((e,n)=>{t&&t.length>0?o.executeRequestPromise(`${o.get3DSpaceUrl()}/resources/dictionary/properties`,{method:"POST",payload:t}).then(e).catch(n):n("No attributes found")})).then((function(e){return UWA.is(e,"array")&&e.forEach((e=>{let t=!1;n.attributes.forEach((n=>{n.type===e.type&&(t=!0,n.info=n.info.concat(e.info))})),!1===t&&n.attributes.push(e)})),e})).then((function(e){var t=[];return e&&e.length>0&&e.forEach((e=>{e&&e.info&&e.info.forEach((e=>{let n=e?e.Magnitude:null;var i;n&&(i=n,t.includes(i)||t.push(i))}))})),t})).then((function(e){let t=UWA.Promise.resolve();return e&&e.length>0&&(t=o.executeRequestPromise(`${o.get3DSpaceUrl()}/resources/dictionary/dimensions?${function(e){return`$filter=dimensionName+eq+${e.join(",")}`}(e)}`,{method:"GET"})),t})).then((function(e){n.dimensions=e?n.dimensions.concat(e.results):[]})).fail((t=>{e.debug(t),e.error("Failed to fetch dictionary attributes/dimension due to ",t.toString())}))},getAttributes:function(){var t=n&&n.attributes?n.attributes:[];return 0===t.length&&e.warn("Initialize dictionary service before user/attributes not found"),t},getAttributeInfo:function(e,t){let n,i=this.getAttributes().find((t=>t.type===e));return i&&i.info&&(n=i.info.find((e=>e.Name===t))),n},getAuthorizedValues:function(e){let t=[];return e&&"Yes"===e.HasRangeDefined&&(t=e.AuthorizedValues),t},getDimension:function(e){var t;return n&&n.dimensions&&(t=n.dimensions.find((t=>t.Name===e))),t},getUnit:function(e,t){let n,i=this.getDimension(e);return i&&(t=t||i.MKSUnit,n=i.Units?i.Units.find((e=>e.Name===t)):null),n},empty:function(){n={attributes:[],dimensions:[]}},hasRangeDefined:function(e,t){var n=!1;return n=UWA.is(e)&&UWA.is(e.HasRangeDefined)&&"Yes"===e.HasRangeDefined,UWA.is(t)&&Array.isArray(t.authorizedValues)&&(n=n||t.authorizedValues.length>0),n},isMultiValuated:function(e){return UWA.is(e)&&UWA.is(e.MultiValuated)&&"Yes"===e.MultiValuated},hasMagnitude:function(e){if(UWA.is(e))return UWA.is(e.Magnitude)&&""!==e.Magnitude&&!this.hasRangeDefined(e)},_getType:function(e){var t="";return UWA.is(e)&&(t=UWA.is(e.Type)?e.Type:""),t},isInteger:function(e){return"Integer"===this._getType(e)},isDouble:function(e){return"Double"===this._getType(e)},isBoolean:function(e){return"Boolean"===this._getType(e)},isDate:function(e){return"Date"===this._getType(e)},isString:function(e){return"String"===this._getType(e)}}}})),define("DS/DELWebOERTableViewComp/column/views/ConfigurationColumns",[],(function(){"use strict";const e="string",t="configLoading";return{Effectivity:{dataIndex:"Effectivity",width:"auto",minWidth:"100",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},VariantEffectivity:{dataIndex:"VariantEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},EvolutionEffectivity:{dataIndex:"EvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},CurrentEvolutionEffectivity:{dataIndex:"CurrentEvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},ProjectedEvolutionEffectivity:{dataIndex:"ProjectedEvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},ConfigurationContext:{dataIndex:"ConfigurationContext",width:"auto",minWidth:"150",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},getCellTypeRepresentation:function(n){var i,o=t;return UWA.owns(n,"nodeModel")&&(i=n.nodeModel,UWA.is(i)&&(o=UWA.is(n.cellModel,"string")&&0===n.cellModel.length?!!UWA.is(i.options.areCfgColumnsFilled,"boolean")&&i.options.areCfgColumnsFilled?e:t:e)),o},hasCellValue:function(){return!0},getCellValue:function(e,t){var n,i=null;return UWA.owns(t,"nodeModel")&&(n=t.nodeModel.options.grid[e],i=UWA.is(n,"string")?n.trim():n),UWA.is(i)?i:""}}})),define("DS/DELWebOERTableViewComp/column/views/PositionMatrix",["DS/Handlebars/Handlebars","text!DS/DELWebOERTableViewComp/assets/templates/positionMatrixTooltip.html","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json","css!DS/DELWebOERTableViewComp/assets/css/positionmatrix.css"],(function(e,t,n){"use strict";var i=e.compile(t);return{editableFlag:!0,typeRepresentation:"functionIcon",alignment:"center",getCellSemantics:function(e,t){return{icon:t.nodeModel.options.grid[e]?{iconName:"part-position wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"}:""}},getCellTooltip:function(e,t){var o,r,a,s,l,d,c;return-1===t.rowID?o={shortHelp:n.get("PositionMatrix.description"),updateModel:!1}:t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]&&(r=(a=t.nodeModel.options.grid[e])?(s=6,d=a.split(","),c={className:l,x1:Number(d[0]).toFixed(s).toString(10).substring(0,s+3),x2:Number(d[1]).toFixed(s).toString(10).substring(0,s+3),x3:Number(d[2]).toFixed(s).toString(10).substring(0,s+3),y1:Number(d[3]).toFixed(s).toString(10).substring(0,s+3),y2:Number(d[4]).toFixed(s).toString(10).substring(0,s+3),y3:Number(d[5]).toFixed(s).toString(10).substring(0,s+3),z1:Number(d[6]).toFixed(s).toString(10).substring(0,s+3),z2:Number(d[7]).toFixed(s).toString(10).substring(0,s+3),z3:Number(d[8]).toFixed(s).toString(10).substring(0,s+3),t1:Number(d[9]).toFixed(s).toString(10).substring(0,s+3),t2:Number(d[10]).toFixed(s).toString(10).substring(0,s+3),t3:Number(d[11]).toFixed(s).toString(10).substring(0,s+3)},i(c)):"<span>"+a+"</span>",o={title:n.get("PositionMatrix.Title"),shortHelp:r,allowUnsafeHTMLShortHelp:!0,wrapThreshold:315,updateModel:!1}),o},width:"100px",height:"40px"}})),define("DS/DELWebOERTableViewComp/column/views/Requirement",["DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json"],(function(e,t){"use strict";return{height:"40px",editionPolicy:"EditionInPlace",editableFlag:!0,alignment:"center",typeRepresentation:"functionIcon",getCellSemantics:function(t,n){var i,o=n.nodeModel;switch(o.getAttributeValue(t)){case o.ENUM_REQUIREMENT.LOAD:i=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELLoadFTA.png");break;case o.ENUM_REQUIREMENT.REMOVE:i=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELRemoveFTA.png")}return{icon:i}},getCellTooltip:function(e,n){var i,o=n&&n.nodeModel&&UWA.is(n.nodeModel.getAttributeValue(e))?n.nodeModel.getAttributeValue(e):null;return-1===n.rowID?i={shortHelp:t.get("Requirement.description"),updateModel:!1}:UWA.is(o)&&(i={shortHelp:o===n.nodeModel.ENUM_REQUIREMENT.LOAD?t.get("LoadRequirement.tooltip"):t.get("RemoveRequirement.tooltip"),updateModel:!1}),i}}})),define("DS/DELWebOERTableViewComp/column/views/GraphView",["DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json","css!DS/DELWebOERTableViewComp/assets/css/PPR2DStructure.css"],(function(e,t){"use strict";return{dataIndex:"graph",sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,displayType:"Graph",editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",alignment:"center",visibleFlag:!0,width:30,height:"40px",pinned:"right",icon:{iconPath:e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DEL_PERT_View_Column.png"),className:"del-oer-column-header-icon"},getCellTooltip:function(e,n){var i,o=n.nodeModel,r=function(e){return{title:t.get(`Graph.${e}.title.description`),shortHelp:t.get(`Graph.${e}.short.description`),longHelp:t.get(`Graph.${e}.long.description`),updateModel:!1}};if(-1===n.rowID)i={shortHelp:t.get("Graph.description"),updateModel:!1};else switch(o.getAttributeValue(e)){case o.ENUM_BUILDUP.LOADING:i=r("Loading");break;case o.ENUM_BUILDUP.DEACTIVATE:i=r("Deactivate");break;case o.ENUM_BUILDUP.ACTIVATE:i=r("Activate")}return i},getCellClassName:function(e,t){return"del-spinner"},getCellSemantics:function(t,n){var i=n.nodeModel,o={};switch(i.getAttributeValue(t)){case i.ENUM_GRAPH_COLUMN.ACTIVATE:o.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DEL_PERT_View_ON.png");break;case i.ENUM_GRAPH_COLUMN.DEACTIVATE:o.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DEL_PERT_View_OFF.png");break;case i.ENUM_GRAPH_COLUMN.LOADING:o.icon={iconName:"reload wux-ui-3ds-spin",fontIconFamily:1}}return o}}})),define("DS/DELWebOERTableViewComp/model/SelectionManager",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","DS/Selection/XSO","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/utils/XSOManager"],(function(e,t,n,i,o,r){"use strict";return t.extend({init:function(e){let t=this;this.enableCrossPreHighlight=e.enableCrossPreHighlight,this._hso=new i({eventChannel:"DELOER/",useUniqueID:!0,getElementID:function(e={}){return e.getId()}}),this.getTreeDocument().addModelEventListener("highlight",(function(e={}){var n=e.target;n&&t._hso.add(n)})),this.getTreeDocument().addModelEventListener("unhighlight",(function(e={}){var n=e.target;n&&(n.removeAttribute("isHighlighted"),t._hso.remove(n))}));let n=function(e){let t=this,n=function(e=[],t){return e.filter((e=>e.getAttributeValue(t)))};e.data.nodeModel&&(t.enableCrossPreHighlight&&t._computePreSelect(n(t.getPSOManager().get(),"isPreSelected"),!0),t._computeHighlight(n(t._hso.get(),"isHighlighted"),!0))};this.getTreeDocument().onPostExpand(n.bind(this)),this.getTreeDocument().onPostCollapse(n.bind(this)),this.getTreeDocument().getXSO().onPostAdd((function(e){t._notifySelectionToPlatform(),r.getCSO().add(e)})),this.getTreeDocument().getXSO().onPostRemove((function(e){t._notifySelectionToPlatform(),r.getCSO().remove(e)}))},_notifySelectionToPlatform(){let e=this.executionContext.getComponent("DELCommonUtilsServices");n.publish("DS/PADUtils/PADCommandProxy/select",{metadata:{timestamp:Date.now(),appid:e.getAppId(),xappid:e.getAppId(),originWidgetId:e.getWidgetId(),ignoreFromSameWidgetId:!0},data:{paths:this.getSelectedPaths()}})},_computePreSelect:function(e,t){e.forEach((function(e){for(var n=e,i=t;n;)n.isVisible()?(i!==n.isPreSelected()&&(i?n.preSelect():n.unPreSelect()),n.isRoot()?n=null:(n=n.getParent(),i&&(i=!i))):(!i&&n.isPreSelected()&&n.unPreSelect(),n=n.getParent())}))},_computeHighlight:function(e,t){e.forEach((function(e){for(var n=e,i=t;n;)n.isVisible()?(i!==n.isHighlighted()&&(i?n.highlight():n.unhighlight()),n.isRoot()?n=null:(n=n.getParent(),i&&(i=!i))):(!i&&n.isHighlighted()&&n.unhighlight(),n=n.getParent())}))},_changeHighlight:function({path:e,highlight:t}){let n=this.getNodeFromPath(e);n&&(t?(n.setAttribute("isHighlighted",!0),n.highlight()):(n.removeAttribute("isHighlighted"),n.unhighlight()),this._computeHighlight([n],t))},_getInputPaths:function(e={}){let t=e.path,n=[];return t&&(n=o.isArrayOfArray(t)?t:[t]),n},highlight:function(e={}){let t=this._getInputPaths(e)||[];e.clear&&this.clearHighlight(),t.forEach((e=>{this._changeHighlight({path:e,highlight:!0})}))},unhighlight:function(e={}){(this._getInputPaths(e)||[]).forEach((e=>{this._changeHighlight({path:e,highlight:!1})}))},getPSOManager:function(){return this.getTreeDocument().getPXSO()},_changePreSelect:function(e={}){let{path:t,preSelect:n}=e,i=this.getNodeFromPath(t);i&&(!1!==n&&i.isPreSelected()===n||(n?(i.setAttribute("isPreSelected",!0),i.preSelect()):(i.removeAttribute("isPreSelected"),i.unPreSelect()),this._computePreSelect([i],n)))},preHighlight:function(e={}){(this._getInputPaths(e)||[]).forEach((e=>{this._changePreSelect({path:e,preSelect:!0})}))},unPreHighlight:function(e={}){(this._getInputPaths(e)||[]).forEach((e=>{this._changePreSelect({path:e,preSelect:!1})}))},getSelectionManager:function(){return this.getTreeDocument().getXSO()},getSelectedPaths:function(){return this.getTreeDocument().getSelectedNodes().map((function(e){return e.getRirPath()}))},clearHighlight:function(){this._hso.get().forEach((e=>{e.unhighlight()}))},clearSelection:function(){this.getTreeDocument().unselectAll()}})})),define("DS/DELWebOERTableViewComp/model/DELWebPPRNode",["DS/TreeModel/TreeNodeModel"],(function(e){"use strict";let t=0;var n=function(n){n=n||{},this._referenceId=null,this._instanceId=null,this._type=null,this._instanceType=null,this.counterId=t++,this.setReferenceId(n.referenceId),this.setReferenceType(n.type),this.setInstanceType(n.instanceType),this.options=n,n.instanceId&&this.setInstanceId(n.instanceId),e.apply(this,arguments)};return(n.prototype=Object.create(e.prototype)).constructor=n,n.prototype.getId=function(){return this.counterId},n.prototype.setReferenceId=function(e){return UWA.is(e,"string")?(this._referenceId=e,this.getReferenceId()):null},n.prototype.setInstanceId=function(e){return UWA.is(e,"string")?(this._instanceId=e,this.getInstanceId()):null},n.prototype.setReferenceType=function(e){return UWA.is(e,"string")?(this._type=e,this.getReferenceType()):null},n.prototype.setInstanceType=function(e){return UWA.is(e,"string")?(this._instanceType=e,this.getInstanceType()):null},n.prototype.getReferenceId=function(){return this._referenceId},n.prototype.getInstanceId=function(){return this._instanceId},n.prototype.getReferenceType=function(){return this._type},n.prototype.getInstanceType=function(){return this._instanceType},n.prototype.getTitle=function(){return this.options.label},n.prototype.get3DHiddenChildren=function(){var e={hidden:[],partialHidden:[]},t=this.getChildren();return t&&t.forEach((function(t){var n=t.getAttributeValue("hideShow3D");n===t.ENUM_3DVISIBILITY.OFF?e.hidden.push(t):n===t.ENUM_3DVISIBILITY.PARTIAL&&e.partialHidden.push(t)})),e},n.prototype.getShownMaterials=function(){var e=[],t=this.getAllDescendants();return t&&t.forEach((function(t){t.getAttributeValue("hideShowOutOfScopedItems")===t.ENUM_PARTFABRICATION.SHOW&&e.push(t)})),e},n.prototype.getAll3DHiddenChildren=function(){var e=[],t=[];return function e(t,n,i){var o=t.get3DHiddenChildren();o.hidden.forEach((t=>{n.push(t),e(t,n,i)})),o.partialHidden.forEach((t=>{i.push(t),e(t,n,i)}))}(this,e,t),{hidden:e,partialHidden:t}},n.prototype.get3DVisibility=function(){var e=this.getChildren()||[],t=this.get3DHiddenChildren();this.ENUM_3DVISIBILITY.ON;return t.hidden.length===e.length?this.ENUM_3DVISIBILITY.OFF:0===t.hidden.length&&0===t.partialHidden.length?this.ENUM_3DVISIBILITY.ON:this.ENUM_3DVISIBILITY.PARTIAL},n.prototype.changeParent3DVisibility=function(){var e;if(!this.isRoot())for(e=this.getParent();e;)e.getUserHiddenState()?e=null:(e.setAttribute("hideShow3D",e.get3DVisibility()),e=e.isRoot()?null:e.getParent())},n.prototype.update3DVisibility=function(e){switch(e){case this.ENUM_3DVISIBILITY.ON:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.ON),this.setUserHiddenState(!1);break;case this.ENUM_3DVISIBILITY.OFF:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.OFF),this.setUserHiddenState(!0);break;case this.ENUM_3DVISIBILITY.PARTIAL:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.PARTIAL),this.setUserHiddenState(!1)}},n.prototype.getRirPath=function(){for(var e=this,t=[];e;){if(e.isRoot()){t=[e.options.referenceId].concat(t);break}t=[e.options.instanceId,e.options.referenceId].concat(t),e=e.getParent()}return t},n.prototype.getRelations=function(){return{to:UWA.is(this.options.to,"array")?this.options.to:[],from:UWA.is(this.options.from,"array")?this.options.from:[]}},n.prototype.setUserHiddenState=function(e){this.options.hiddenStateSet=e},n.prototype.getUserHiddenState=function(){return!0===this.options.hiddenStateSet},n.prototype.isLeaf=function(){var e=this.getChildren();return!e||0===e.length},n.prototype.getConsumedItems=function(){var e={MfgItems:[],Resources:[]};return this.options.consumedMfgItems&&(e.MfgItems=UWA.clone(this.options.consumedMfgItems)),this.options.consumedCapableResource&&(e.Resources=UWA.clone(this.options.consumedCapableResource)),e},n.prototype.getNodeType=function(){return"Node2D"},n.prototype.isInstance=function(){return!1},Object.defineProperty(n.prototype,"ENUM_3DVISIBILITY",{value:Object.freeze({ON:1,OFF:0,PARTIAL:2}),writable:!1,configurable:!1}),Object.defineProperty(n.prototype,"ENUM_BUILDUP",{value:Object.freeze({ACTIVATE:1,DEACTIVATE:0,LOADING:-1}),writable:!1,configurable:!1}),Object.defineProperty(n.prototype,"ENUM_PARTFABRICATION",{value:Object.freeze({SHOW:1,HIDE:0}),writable:!1,configurable:!1}),Object.defineProperty(n.prototype,"ENUM_GRAPH_COLUMN",{value:Object.freeze({ACTIVATE:1,DEACTIVATE:0,LOADING:-1}),writable:!1,configurable:!1}),Object.defineProperty(n.prototype,"ENUM_REQUIREMENT",{value:Object.freeze({LOAD:1,REMOVE:0}),writable:!1,configurable:!1}),n})),define("DS/DELWebOERTableViewComp/column/views/PartFabrication",["DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json","css!DS/DELWebOERTableViewComp/assets/css/PPR2DStructure.css"],(function(e,t){"use strict";const n=["ManufacturingMadeFrom","EngineeringMadeFrom","ManufacturingAssembly"];return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",alignment:"center",height:"40px",getCellTooltip:function(e,i){var o,r=i.nodeModel,a=function(e,n){return{title:t.get(`PartFabrication.${e}.title.description`)+": "+n,shortHelp:t.get(`PartFabrication.${e}.short.description`),longHelp:t.get(`PartFabrication.${e}.long.description`),updateModel:!1}};if(-1===i.rowID)o={shortHelp:t.get("PartFabrication.description"),updateModel:!1};else{let t=i.nodeModel.options.grid[e];if(-1!==n.indexOf(t))switch(r.getAttributeValue("hideShowOutOfScopedItems")){case r.ENUM_PARTFABRICATION.SHOW:o=a("Hide",t);break;case r.ENUM_PARTFABRICATION.HIDE:o=a("Show",t)}}return o},getCellClassName:function(e,t){var n="";return 0===t.rowID&&(n="del-partfabrication"),n},getCellSemantics:function(t,i){var o=i.nodeModel,r={icon:""},a=i.nodeModel.options.grid[t];if(-1!==n.indexOf(a))switch(o.getAttributeValue("hideShowOutOfScopedItems")){case o.ENUM_PARTFABRICATION.SHOW:r.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DEL_Remove_Material.png");break;case o.ENUM_PARTFABRICATION.HIDE:r.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DEL_Show_Material.png")}return r}}})),define("DS/DELWebOERTableViewComp/column/views/Relation",["UWA/Core"],(function(e){"use strict";return e.clone({width:"150px",height:"40px",typeRepresentation:"url",getCellValue:function(t,n){let i=t.split("."),o=i[0]?i[0]:null,r=i[1]?i[1]:null,a=[],s=n&&n.nodeModel&&n.nodeModel.getRelations?n.nodeModel.getRelations():{};return s&&e.is(s[o],"array")&&s[o].forEach((e=>{if(e.link===r){let t=e.data.label+" "+e.data.revision;a.push({icon:{iconPath:e.data.icon,iconSize:{width:"22px",height:"22px"}},label:t})}})),a}})})),define("DS/DELWebOERTableViewComp/view/DELWebOERDataGridView",["DS/DELWebCommonControls/DELWebDataGridView","DS/DELWebOERTableViewComp/utils/Utils","text!DS/DELWebOERTableViewComp/assets/json/DataGridViewOptions.json","css!DS/DELWebOERTableViewComp/assets/css/datagridview.css"],(function(e,t,n){"use strict";return function(i){let o,r=JSON.parse(n);return i=i||{},Object.assign(i,r.dataGridViewOptions),i.onContextualMenu&&(i.onContextualEvent=async function(e){var t=[];return e&&e.collectionView&&(t=(t=e.collectionView.buildDefaultContextualMenu(e)).concat(await i.onContextualMenu(e))),t}),o=new e(i),i.container&&o.getContent().inject(i.container),o.onDragStartCell=function(e,n){let r=o.getTreeDocument()&&o.getTreeDocument().getSelectedNodes?o.getTreeDocument().getSelectedNodes():[];r=r.length>0?r:[n.nodeModel];let a=t.get3DXContent({selectedNodes:r,executionContext:i.executionContext});return e.dataTransfer.setData("Text",JSON.stringify(a)),!1},i.onSelect&&o.getNodesXSO().onChange((function(e){i.onSelect(e)})),i.onHover&&o.addEventListener("mouseover",i.onHover),i.onClick&&o.addEventListener("click",(function(e,t){i.onClick(e,t)})),{displayProgressBar:function(e){o.displayProgressBar(e)},ensureNodeModelVisible:function(){o.ensureNodeModelVisible.apply(o,arguments)},setToolbar:function(e){var t,n;return e="object"==typeof e?e:JSON.parse(e),(n=UWA.createElement("div")).className="divToolbar",n.setAttribute("id","divToolbar"),(t=o.setToolbar(e)).inject(n),t.show(),o.getContent().style.top="50px",n},getToolbar:function(){return o.getToolbar()},destroy:function(){o.destroy()},updateColumn:function(e,t){o&&e&&t&&o.layout.setColumnOrGroupProperties(e,t)},isColumnDisabled:function(e){return o.layout.getColumnDisabled(e)},getColumnIndex:function(e){return o.layout.getColumnIndex(e)},registerTypeRepresentations:function(e){o.getTypeRepresentationFactory().registerTypeRepresentations(e)},getDataGridView:function(){return o}}}})),define("DS/DELWebOERTableViewComp/model/DELWebOERItemDocument",["UWA/Core","UWA/Class","DS/DELWebOERCommonUtils/tree/DELWebGenericTreeDocument","DS/DELWebOERTableViewComp/model/DELWebPPRNode","DS/DELWebOERCommonUtils/utils/CommonUtils"],(function(e,t,n,i,o){"use strict";var r=n.default;return t.extend({init:function(e){this._model=new r(e)},getBadgeOptions:function(e){let t;switch(e){case"filter":t={bottomRight:{iconName:"filter",fontIconSize:"1x",className:"dgv-badge"}};break;case"hasFTA":t={bottomRight:{iconPath:o.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELLoadFTA.png"),iconSize:{height:"12px",width:"12px"}}}}return t},_getNodes:function(e,t){return e.search({match:function(e){if(e.nodeModel.getAttributeValue(t))return!0}})},_getNodesFromMatchingId:function(e,t,n){return e.search({match:function(e){let i=e.nodeModel;return!(!t||i.getReferenceId()!==t||n)||(i.getReferenceId()===t&&n===i.getInstanceId()||void 0)}})},getAllPathsFromId:function(e,t){let n=this._getNodesFromMatchingId(this._model,e,t),i=[];return n&&(i=n.map((e=>e.getRirPath()))),i},_createRoot:function(e,t,n){var o;return e&&t&&(o=new i(t[e])).updateOptions({badges:n?this.getBadgeOptions("filter"):null,filter:n}),o},_getNode:function(t,n,i){var o,r,a=[],s=null;if(t)for(a.push(t);a.length>0;){if(!(n!==(o=a.pop()).getReferenceId()||i&&i!==o.getInstanceId())){s=o;break}if(!(e.is(n)||i&&i!==o.getInstanceId())){s=o;break}r=o.getChildren(!0),Array.isArray(r)&&a.push(...r)}return s},_getChildNode:function(e,t,n){let i,o;return e&&(o=e.getChildren(),o&&(i=o.find((function(e){return t===e.getReferenceId()&&(!n||n===e.getInstanceId())})))),i},_createTree:function(t,n,r){var a=this,s=function(o){var r,s=t;for(let t=2,l=o.length;t<l;t+=2){let l=o[t],d=o[t-1],c=a._getChildNode(s,l,d);if(c)s=c;else{if(n.treeOptions&&e.is(n.treeOptions.connectionTypes,"array")&&(-1!==n.treeOptions.connectionTypes.indexOf(n.references[l].type)||-1!==n.treeOptions.connectionTypes.indexOf(n.instances[d].instanceType)))break;r=new i(e.clone(e.extend(n.references[l],n.instances[d],!0))),s.addChild(r),s=r}}};n&&Array.isArray(n.paths)&&n.references&&n.instances&&o.processInChunk(n.paths,200,200,(function(e,t){e.forEach(s),t&&r()}))},getNodeFromPath:function(t){var n,i,o=this._model.getRoots();return e.is(t,"array")&&t.length>0&&o.length>0&&(n=o.find((function(e){return e&&e.options.referenceId===t[0]})),t.forEach(((e,o)=>{if(o>0&&o%2==0){if(!(i=this._getNode(n,e,t[o-1])))return;n=i}}))),n},getNodeFromPathV2:function(t,n=!1){let i,o,r=this._model.getRoots();if(e.is(t,"array")&&t.length>0&&r.length>0){i=r.find((function(e){return e&&e.getReferenceId()===t[0]})),o=i;for(let e=2;e<t.length;e+=2){if(!o||!o.hasChildren()){!1===n&&(o=null);break}o=o.getChildren().find((n=>n.getReferenceId()===t[e]&&n.getInstanceId()===t[e-1]))}}return o},_getParentNodes:function(e){var t,n=[];if(e)for(t=e;t;)n.unshift(t),t=t.isRoot()?null:t.getParent();return n},loadData:function(t){var n,i=this;if(t&&e.is(t.paths,"array")&&t.paths.length>0){n=this._model.getRoots().find((e=>e.getReferenceId()===t.id)),this._model.prepareUpdate(),n||(n=this._createRoot(t.id,t.references,t.filter),this._model.addRoot(n)),this._createTree(n,t,(function(){i._model.pushUpdate(),t.onComplete()}))}},getTreeDocument:function(){return this._model},getRoots:function(){return this._model&&e.is(this._model.getRoots(),"array")?this._model.getRoots():[]},getPathFromId:function(e,t){var n=this._getNode(this._model.getRoots()?this._model.getRoots()[0]:{},e,t);return n?n.getRirPath():[]},getNodeFromID:function(e,t){return this._getNode(this._model.getRoots()?this._model.getRoots()[0]:{},e,t)},removeRoot:function(e){let t=this.getNodeFromPath([e]);if(t)return this.getTreeDocument().removeRoot(t)},empty:function(){this._model.empty()},updateOptions:function(e,t){this._model.prepareUpdate(),e.forEach((e=>{let n=this.getNodeFromPathV2(e);n&&n.updateOptions(t)})),this._model.pushUpdate()}})})),define("DS/DELWebOERTableViewComp/column/DELWebCfgColumnManager",["UWA/Core","UWA/Class","UWA/Class/Promise","DS/DELWebOERTableViewComp/column/views/ConfigurationColumns"],(function(e,t,n,i){"use strict";var o={checkCfgColumnsAvailability:function(){const e=["DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityColumns","DS/CfgWebAppEffectivityUX/scripts/CfgConfigurationContextColumn"];var t=this;return t._additionalColumnsAMD=[],new n((function(i,o){require(e,(function(){var e=[];Array.prototype.slice.call(arguments).forEach((i=>{e.push(new n((function(e){i.isAdditionalColumnsAvailable((function(n){!0===n&&t._additionalColumnsAMD.push(i),e()}))})))})),n.all(e).then(i).fail(o)}))}))},updateAttributes:function(t){var i=this,o=[],r=t.collectionView,a=[],s={pids:[],relids:[],pairs:{}},l=[];this._treeDocument=r.getTreeDocument(),e.is(this._additionalColumnsAMD,"array")&&this._additionalColumnsAMD.length>0&&this._areCfgColumnsVisible(r)&&t.startNodeIndex>=0&&t.endNodeIndex>=0&&e.is(r.model,"array")&&(o=r.model.slice(t.startNodeIndex,t.endNodeIndex+1)).length>0&&(a=o.filter((t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled)))).length>0&&(this._updateCfgColumnsFilledFlag(a,!1),a.forEach((e=>{e.getReferenceId()&&-1===s.pids.indexOf(e.getReferenceId())&&s.pids.push(e.getReferenceId()),e.getInstanceId()&&s.relids.push(e.getInstanceId())})),this._additionalColumnsAMD.forEach((t=>{l.push(new n((function(n){t.updateAttributes(s,(function(t){var i=e.is(t,"string")?JSON.parse(t):t;n(i)}))})))})),n.all(l).then((function(t){var n=t.reduce(((t,n)=>e.extend(t,n,!0)),{});i._updateCfgColAttributes(n,a),i._updateCfgColumnsFilledFlag(a,!0)})).fail((function(e){i.logger.error("Failed to get configuration columns info : ",e)})))},getCfgColumnsConfig:function(){var e=[],t={};return this._additionalColumnsAMD.forEach((t=>{e.push(...t.getManagedColumnNames())})),e.forEach((e=>{i[e]&&(t[e]=i[e],t[e].getCellTypeRepresentation=i.getCellTypeRepresentation,t[e].hasCellValue=i.hasCellValue,t[e].getCellValue=i.getCellValue)})),t},_areCfgColumnsVisible:function(e){var t=[];return this._additionalColumnsAMD.forEach((e=>{t.push(...e.getManagedColumnNames())})),t.some((function(t){return e.getColumnOrGroup(t)&&!0===e.getColumnOrGroup(t).visibleFlag}))},_updateCfgColumnsFilledFlag:function(e,t){if(this._treeDocument){this._treeDocument.prepareUpdate();for(let n of e)n.updateOptions({areCfgColumnsFilled:t});this._treeDocument.pushUpdate()}},_updateCfgColAttributes:function(t,n){var i=this,o=function(e){i._treeDocument&&(i._treeDocument.prepareUpdate(),Object.keys(e).forEach((t=>{var i;(i=t,n.filter((e=>((e,t)=>e===t.getReferenceId())(i,e)||((e,t)=>!t.isRoot()&&e===t.getInstanceId())(i,e)))).forEach((n=>{n.updateOptions({grid:e[t]})}))})),i._treeDocument.pushUpdate())};e.is(t.pids,"object")&&o(t.pids),e.is(t.relids,"object")&&o(t.relids)}};return o})),define("DS/DELWebOERTableViewComp/model/DELWebOERTableViewModel",["UWA/Core","UWA/Class","DS/DELWebOERTableViewComp/model/DELWebOERItemDocument","text!DS/DELWebOERTableViewComp/assets/json/ServicePayloads.json"],(function(e,t,n,i){"use strict";const o="resourceid",r="ds6w:label",a="ds6w:status",s="ds6w:type",l="ds6wg:revision",d="icon",c="Path",u="ds6w:globalType",g="ds6w:Instance",h="VPMRepInstance",p="IPML.IconName",m="from",f="to",b="Requirement",C=1,E="DELCommonUtilsServices";return t.extend({init:function(e){if(this.executionContext=e.executionContext,this.PPRTYPES=this.executionContext.getComponent(E).PPRTYPES,!e.webservices)throw new Error("webservices not found");this.webservices=e.webservices,this.createDocument(e),this._parent(e)},createDocument:function(e){this._document=new n(e)},getContextId:function(e){return e?e.occurrence&&e.occurrence.length>0?e.occurrence[0]:e.id:null},addInstance:function(e){},addReference:function(e){},addConnection:function(e){},getData:async function(t){let n,D=this,I=JSON.parse(i),y=I.expandV2,A=function(e){let t=D.executionContext.getComponent(E).get3DSpaceUrl()+"/snresources/images/icons/small/";return e?t+e+".png":""},_=function(e,t,n){if(n){let i=n.split("."),o=i.pop();"reference"===o?e.push(i.join(".")):"instance"===o&&t.push(i.join("."))}};!function(n){n.batch.expands[0].root.physical_id=t.id,n.batch.expands[0].filter=function(){let n=[],i=[],o=function(t){let n;t&&t.length>0&&(n=e.is(t[0],"string")?[t]:t,i=i.concat(n.map((e=>({physical_id_path:e})))))},r=t||{};return r.filter&&n.push(r.filter),o(r.occurrence),o(r.predecessors),i.length>0&&n.push({prefix_filter:{prefix_path:i}}),0===n.length&&n.push({all:1}),{and:{filters:n}}}(),e.is(t.Columns,"array")&&t.Columns.forEach((function(e){_(n.outputs.select_object,n.outputs.select_relation,e.dataIndex)})),t.model&&Object.keys(t.model).forEach((function(e){t.model[e]&&(n.batch.expands[0][e]=t.model[e])}))}(y),n=await D.webservices.getProgressiveExpand(y);let R=[];if(e.is(t.Columns)){if(t.Columns.find((e=>e.dataIndex===b))){let e=I.getItemPathsHavingRequirement,n={};e.batch.expands[0].root.physical_id=t.id,(await D.executionContext.getComponent(E).getProgressiveExpand(e)).results.forEach((e=>{if(e.Path){let t=e.Path.slice(0,-2);n[t]||(n[t]=!0,R.push(t))}}))}}let w=function(n){var i={references:{},instances:{},paths:[]},b=[],C=[],E=!(!t.pprType||t.pprType!==D.PPRTYPES.RESOURCE),I=function(e){return{label:e.label,icon:e.icons[0],revision:e.grid[l+".reference"]}};return e.is(t.Columns,"array")&&t.Columns.forEach((function(e){_(C,b,e.dataIndex)})),e.is(n,"array")&&n.forEach((n=>{if(n[c])i.paths.push(n[c]);else if(n[u]===g||n[s]===h){if(D.addInstance(n),i.instances[n[o]]={instanceId:n[o],instanceType:n[s],grid:{}},function(n){let i=!1;return t&&t.treeOptions&&e.is(t.treeOptions.connectionTypes,"array")&&(i=t.treeOptions.connectionTypes.includes(n)),i}(n[s])&&n[m]&&n[f]&&i.references[n[m]]&&i.references[n[f]]){let t=i.references[n[m]],o=i.references[n[f]];e.is(t[f],"array")||(t[f]=[]),t[f].push({link:n[s],data:I(o)}),e.is(o[m],"array")||(o[m]=[]),o[m].push({link:n[s],data:I(t)})}b.forEach((e=>{i.instances[n[o]].grid[e+".instance"]=n[e]?n[e]:""}))}else i.references[n[o]]={referenceId:n[o],label:n[r],grid:{hideShow3D:1,hideShowOutOfScopedItems:0},type:n[s],icons:E?[A(n[p])]:[n[d]]},D.addReference(n),C.forEach((function(e){i.references[n[o]].grid[e+".reference"]=e===a?n[e]?n[e].split(".")[1]:"":n[e]}))})),i}(n.results);return R.length>0&&w&&w.references&&R.forEach((e=>{let t=e[e.length-1];w.references[t]&&w.references[t].grid||(w.references[t]={},w.references[t].grid={}),w.references[t].grid[b]=C})),w},loadModel:async function(t){let n=this,i=this.getContextId(t);t.id=i;let o=await this.getData(t);return await new e.Promise((function(r){o.onComplete=function(){r()};let a=n._document.getRoots();a.some((e=>e.some)),!t||e.is(t.occurrence,"array")&&a.some((e=>e.getReferenceId()===i))||n._document.removeRoot(t.id),o&&e.is(o.paths,"array")&&o.paths.length>0&&n._document.loadData(Object.assign(o,t))})),t},getTreeDocument:function(){return this._document.getTreeDocument()},removeRoot:function(e){this._document.removeRoot(e)},empty:function(){this.webservices.abortAllRequests(),this._document.empty()},update3DVisibility:function(e,t){let n=e.path,i=function(t,n){return((e.attributes||{})[t]||{})[n]},o=this._document.getTreeDocument();n&&(o.prepareUpdate(),n.forEach((e=>{if(!0===i(e[e.length-1],"isCustom"))return;let n=this._document.getNodeFromPathV2(e,!0);n&&(!0===i(n.getReferenceId(),"isPartial")||t===n.ENUM_3DVISIBILITY.ON&&n.get3DVisibility()===n.ENUM_3DVISIBILITY.PARTIAL?n.update3DVisibility(n.ENUM_3DVISIBILITY.PARTIAL):n.update3DVisibility(t),n.changeParent3DVisibility())})),o.pushUpdate())},updateNode:function(t){let n=t&&e.is(t.path,"array")&&t.path.length>0?e.is(t.path[0],"array")?t.path:[t.path]:[];n.length>0&&t.value&&n.forEach((e=>{let n=this._document.getNodeFromPathV2(e,!0);n&&(n.updateOptions({grid:t.value}),t.notifyModel&&n.notifyModelUpdate())}))},getNodeFromPath:function(e){return this._document.getNodeFromPathV2(e,!0)},getNodeFromPathV2:function(e,t){return this._document.getNodeFromPathV2(e,t)},getPathFromId:function(e,t){return this._document.getPathFromId(e,t)},reset3DVisibility(){var t,n=[],i=this.getTreeDocument();i&&(t=i.getRoots(),e.is(t,"array")&&(i.prepareUpdate(),t.forEach((e=>{let t=e.getAll3DHiddenChildren();n.push(e),(n=(n=n.concat(t.hidden)).concat(t.partialHidden)).forEach((e=>{e.update3DVisibility(e.ENUM_3DVISIBILITY.ON)})),n=[]})),i.pushUpdate()))},resetPartFab(){var t,n=[],i=this.getTreeDocument();i&&(t=i.getRoots(),e.is(t,"array")&&(i.prepareUpdate(),t.forEach((e=>{let t=e.getShownMaterials();n.push(e),(n=n.concat(t)).forEach((e=>{e.updateOptions({grid:{hideShowOutOfScopedItems:0}})})),n=[]})),i.pushUpdate()))},getSelectedNodes:function(){return this._document.getTreeDocument().getSelectedNodes()},getAllPathsFromId:function(e,t){return this._document.getAllPathsFromId(e,t)},getSelectionManager:function(){return this._document.getTreeDocument().getSelectionManager()},getSelectedPaths:function(){return this._document.getTreeDocument().getSelectedPaths()},clearSelection:function(){return this._document.getTreeDocument().clearSelection()},highlight:function(e){return this._document.getTreeDocument().highlight(e)},unhighlight:function(e){return this._document.getTreeDocument().unhighlight(e)},clearHighlight:function(){return this._document.getTreeDocument().clearHighlight()},getPSOManager:function(){return this._document.getTreeDocument().getPSOManager()},preHighlight:function(e){return this._document.getTreeDocument().preHighlight(e)},unPreHighlight:function(e){return this._document.getTreeDocument().unPreHighlight(e)}})})),define("DS/DELWebOERTableViewComp/column/DELWebColumnManager",["UWA/Core","UWA/Class","UWA/Class/Promise","DS/DELWebOERTableViewComp/column/DELWebCfgColumnManager","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERTableViewComp/column/views/PositionMatrix","DS/DELWebOERTableViewComp/column/views/Responsible","DS/DELWebOERTableViewComp/column/views/BuildUp","DS/DELWebOERTableViewComp/column/views/Requirement","DS/DELWebOERTableViewComp/column/views/Relation","DS/DELWebOERTableViewComp/column/views/GraphView","DS/DELWebOERTableViewComp/column/views/PartFabrication","text!DS/DELWebOERTableViewComp/assets/json/AttributeColumnMapping.json","css!DS/DELWebOERTableViewComp/assets/css/maturity.css"],(function(e,t,n,i,o,r,a,s,l,d,c,u,g){"use strict";const h="dicoType",p="dicoAttributeName",m="dataIndex",f="Type",b={Title:{dataIndex:"tree",editionPolicy:"EditionOnOver",width:"250px",height:"40px",getCellKPIColor:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options.grid.biColor)return e.nodeModel.options.grid.biColor}},Requirement:l,InstanceLabel:{icon:"flow-cascade",typeRepresentation:"string",width:"150px",height:"40px"},PositionMatrix:r,Revision:{typeRepresentation:"string",width:"60px",height:"40px",alignment:"center"},Description:{typeRepresentation:"string",width:"100px",height:"40px",alignment:"center"},Owner:a,Maturity:{kind:"string",width:80,height:"40px",editableFlag:!1,typeRepresentation:"tag",className:"lc-maturity-state",alignment:"center",customisation:{exportable:{lock:!1,value:!0}},ds6w:"ds6w:status",visibleFlag:!0,getCellClassName:function(e,t){return t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]}},PartFabrication:u,HideShow3D:{dataIndex:"hideShow3D",sortableFlag:!1,alignment:"center",width:30,height:"40px",pinned:"right",icon:o.getAssetsUrl("DELWebOERTableViewComp","icons/32/I_3DColumn.png"),editableFlag:!0,groupableFlag:!1,editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",getCellSemantics:function(e,t){var n,i=t&&t.nodeModel?t.nodeModel:null;if(i)switch(i.getAttributeValue("hideShow3D")){case i.ENUM_3DVISIBILITY.OFF:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-off pad_eye_off wux-ui-3ds-lg";break;case i.ENUM_3DVISIBILITY.ON:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye pad_eye wux-ui-3ds-lg";break;case i.ENUM_3DVISIBILITY.PARTIAL:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-partial pad_eye_partial wux-ui-3ds-lg"}return{icon:{iconClasses:n}}}},BuildUp:s,Menu:{width:"45px",completed:!0,dataIndex:"ContextualMenuColumn",typeRepresentation:"chevronMenuIcon",pinned:"right",editableFlag:!1,sortableFlag:!1,groupableFlag:!1,resizableFlag:!1,selectableFlag:!1,printableFlag:!1,alignment:"center",getCellValue:function(){return{}}},Scope:d,ResultingProduct:d,Graph:c};var C={typeRepresentation:"string",alignment:"left"},E={attributeConfig:JSON.parse(g),destroy:function(){this.attributeConfig=null},_prepareColumnsConfig:function(t){var n=this,i=[],o=n._getNls();return e.is(t,"array")&&t.forEach((function(e){var t;(t=n.getColumnConfiguration(e))&&(t.text=t.text?o.get(t.text):"",t.description=t.description?o.get(t.description):"",t.dataIndex||(t.dataIndex=e.dataIndex),e.dicoType&&(t.dicoType=e.dicoType),e.dicoAttributeName&&(t.dicoAttributeName=e.dicoAttributeName),e.icon&&(t.icon=e.icon),t.getCellClassName?t.getCellClassName=t.getCellClassName.bind(null,e.dataIndex):t.getCellClassName=function(e,t){var n="";return t.nodeModel&&!0===t.nodeModel.options.isBeingCut&&(n="del-ppr-component-dgv-cutNode"),n}.bind(null,e.dataIndex),t.getCellSemantics&&(t.getCellSemantics=t.getCellSemantics.bind(null,e.dataIndex)),t.getCellTooltip&&(t.getCellTooltip=t.getCellTooltip.bind(null,e.dataIndex)),t.getCellValue&&(t.getCellValue=t.getCellValue.bind(null,e.dataIndex)),t.getCellValueForExport&&(t.getCellValueForExport=t.getCellValueForExport.bind(null,e.dataIndex)),e.callbacks&&(t.callbacks=e.callbacks),i.push(t))})),i},createColumnConfiguration:function(t){var i,o,r=this;return t=t||{},n.all([this.checkCfgColumnsAvailability(),this._dictionaryModel.fetchAttributesAndDimension((i=t.Columns,o={},i.forEach((t=>{let n=t[m]||"",i=t[p]?t[p]:r.getAttributeName(n);t[h]&&e.is(i)&&(o[t[h]]?o[t[h]].push(i):o[t[h]]=[i])})),Object.keys(o).map((e=>({type:e,attributes:o[e]})))))]).then((function(){Object.assign(b,r.getCfgColumnsConfig());let i=[];return e.is(t.Columns,"array")&&t.Columns.forEach((function(t){(function(e){if(!e)return!0;let t=r.getExecutionContext().getContext()||{};return Object.keys(e).some((n=>t[n]===e[n]))})(t.when)&&i.push(e.clone(t))})),n.resolve(r._prepareColumnsConfig(i))}))},getColumnConfiguration:function(e){return e&&b[e.name]?Object.assign({},b[e.name],e.columnProperties?e.columnProperties:{}):this.getColumnConfig(e)},getAttributeName:function(e){return e?e.split(".").slice(0,-1).join("."):null},getColumnConfig:function(t){let n,i=t[p]?t[p]:this.getAttributeName(t[m]);if(t&&e.is(t.dicoType)&&i){let o=this,r=this._dictionaryModel.getAttributeInfo(t.dicoType,i),a=t&&t.columnProperties?t.columnProperties:{},s=function(t){var n=!1,i=!1,r=!1,a=!1,s=!1,l=!1,d=!1;return e.is(t)&&(a=o._dictionaryModel.hasRangeDefined(t),l=o._dictionaryModel.isMultiValuated(t),d=o._dictionaryModel.hasMagnitude(t),i=o._dictionaryModel.isInteger(t),r=o._dictionaryModel.isDouble(t),s=o._dictionaryModel.isBoolean(t),n=o._dictionaryModel.isDate(t)),{hasRange:a,isMultivalued:l,hasMagnitude:d,isInteger:i,isDouble:r,isBoolean:s,isDate:n}},l=function(e){var t={},n=function(e){Object.assign(t,e)};const{hasMagnitude:i,isMultivalued:r,isInteger:a,isDouble:l}=s(e);let d=o._dictionaryModel.getAuthorizedValues(e);if(i){let t=o._dictionaryModel.getUnit(e.Magnitude);t&&n({units:t.NLSName})}if(d&&d.length>0&!r){let e=(e,t)=>e.map(((e,n)=>({value:t?n+1:e.Name,label:e.NLS})));n({possibleValues:e(d,a)})}return t};n={...t,...a,...C},r&&r[f]?(n=Object.assign({},n,this.attributeConfig[r[f]],{text:r.NLS}),n.getCellSemantics=function(t,n,i){if(i&&i.nodeModel&&e.is(i.nodeModel.getAttributeValue(n)))return t}.bind(null,Object.assign({},l(r),n.semantics))):e.is(n.text)||(n.text=t.dicoType+"."+i)}return n},createColumnsForAttributes:async function(t){let n=this,i=[],o=function(e){let t,n=e.attribute.split(".");return 2===n.length&&(t={type:n[0],attribute:n[1]}),t};return e.is(t,"array")&&(await this._dictionaryModel.fetchAttributesAndDimension(function(e){let t={};return e.forEach((e=>{let n=o(e);n&&n.type&&n.attribute&&(t[n.type]?t[n.type].push(n.attribute):t[n.type]=[n.attribute])})),Object.keys(t).map((e=>({type:e,attributes:t[e]})))}(t)),t.forEach((t=>{let r={},a=e.is(t.isBusinessObject,"boolean")?!0===t.isBusinessObject?".reference":".instance":".reference",s=o(t);r.dicoType=s.type,r.dicoAttributeName=s.attribute,e.is(t.indexAttribute)?r.dataIndex=t.indexAttribute+a:n.logger.error("Index attribute not available for Attribute ",t.attribute),i.push(r)}))),this._prepareColumnsConfig(i)}};return Object.assign(E,i),E})),define("DS/DELWebOERTableViewComp/TableViewComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebCommonControls/DELWebPanel","DS/DELWebOERTableViewComp/column/DELWebColumnManager","DS/DELWebOERCommonUtils/mixins/RootActionHandlerExtMixin","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/mixins/IndexServicesMixin","DS/DELWebOERTableViewComp/model/DELWebOERTableViewModel","DS/DELWebOERTableViewComp/model/DELWebDictionaryModel","DS/DELWebOERTableViewComp/view/DELWebOERDataGridView","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/DELWebOERTableViewComp/utils/Utils","DS/Utilities/TouchUtils"],(function(e,t,n,i,o,r,a,s,l,d,c,u){"use strict";const g="root",h="intermediate",p="leaf",m="all",f=1,b=0;class C extends e{constructor(e){if(super(e),!e.appConfigPath||!e.nlsAMDPath)throw new Error("Invalid input, appConfigPath and nlsAMDPath is mandatory");this.configModulePath=e.appConfigPath,this.nlsAMDPath=e.nlsAMDPath,this._columns=[],this._contextuMenuOptions=[],this.rootsLoaded=[],this._container=null}async initialize(){await super.initialize(),this._subscribeEvents(),this._compConfig=await this.loadJson(this.configModulePath),this._nls=await this.loadNLS(this.nlsAMDPath),this._contextualMenu=UWA.is(this._compConfig.contextualMenu,"array")?this._compConfig.contextualMenu:[],this._dictionaryModel||(this._dictionaryModel=new s({executionContext:this.getExecutionContext()})),UWA.is(this._columns,"array")&&0===this._columns.length&&(this._columns=await this.createColumnConfiguration(this._compConfig)),this._model||this.createModel(this._compConfig)}async createPanel(e={}){let n=this,i=this.getUIFrameComponent(),r=this.getRegisteredIdentifier()+"View";var a=Object.assign({},{identifier:r,domId:r,immersiveFrame:i.getImmersiveFrame(),currentDockArea:WUXDockAreaEnum.RightDockArea,visibleFlag:!0,resizableFlag:!0,horizontallyStretchableFlag:!0,verticallyStretchableFlag:!0,closeButtonFlag:!1,width:400,height:400,minWidth:250,ensureHeightDefinitionOnHierarchy:!0},e);if(a.icon=e.icon?e&&e.icon&&e.icon.moduleName&&e.icon.path?{iconPath:o.getAssetsUrl(e.icon.moduleName,e.icon.path),iconSize:{height:u.getTouchMode()?"22px":"16px",width:u.getTouchMode()?"22px":"16px"}}:e.icon:"",a.title){let e=n._getNls();a.title=e.get(a.title)}this.panel=new t(a),a.attachToOtherDockedWindow&&this.panel.immersiveFrame.dockWindow(this.panel,a.currentDockArea,{attachToOtherDockedWindow:!0}),this.setContainer(this.panel.getContentContainer())}createModel(e={}){this._model=new a({executionContext:this.getExecutionContext(),enableCrossPreHighlight:e.enableCrossPreHighlight,webservices:o.bindComponentToMixin(this,r),notifySelectionToPlatform:!1!==e.notifySelectionToPlatform||e.notifySelectionToPlatform})}_subscribeEvents(){let e=this;[{eventName:{event:"onModelChange:roots"},callback:this.onRootsChange},{eventName:{event:"onRefresh"},callback:this.refresh},{eventName:{event:"DS/DELWebViewer/onHideNode"},callback:this._onHide},{eventName:{event:"DS/DELWebViewer/onShowNode"},callback:this._onShow},{eventName:{event:"onFocus"},callback:this._onFocus},{eventName:{event:"onBIColorize"},callback:this._onBIColorize},{eventName:{event:"onBIUnColorize"},callback:this._onBIUnColorize},{eventName:{event:"onApplyNGFilter"},callback:this._onApplyFilter},{eventName:{event:"onShowOnly"},callback:this._onShowOnly},{eventName:{event:"onFind"},callback:this._onFind},{eventName:{event:"onShowMaterialComplete"},callback:e=>this._toggleMaterialComplete(e,!0)},{eventName:{event:"onHideMaterialComplete"},callback:e=>this._toggleMaterialComplete(e,!1)}].forEach((t=>{e.eventTokens.push(e.subscribe(t.eventName,t.callback.bind(e)))}))}_toggleMaterialComplete(e,t=!0){const n=t?1:0;this._model.updateNode(Object.assign(e.data,{value:{hideShowOutOfScopedItems:n},notifyModel:!0}))}_onFind(e){if(this._tableView&&e.args&&e.args.origin===this.getRegisteredIdentifier()){let t=this;require(["DS/DELWebUXControls/FindDialog"],(function(n){t._findDialog&&(t._findDialog.destroy(),t._findDialog=null);let i=e.args.selectedNodes||[],o=e.args.findInColumns,r=e.args.infos&&e.args.infos.position?e.args.infos.position:{x:0,y:0},a=t._tableView.getDataGridView(),s=!1,l=function(){let e=a.getMatchingFindCurrentNodeModel();e&&!0!==e.isSelected()&&e.select(!0)};a.getNodeModelToProcessForFind=function(){return function(){let e=[],t=new Set,n=function(n){n&&n.getId&&!t.has(n.getId())&&(e.push(n),t.add(n.getId()))};return UWA.is(i,"array")&&i.forEach((e=>{n(e);let t=e.getParents();UWA.is(t,"array")&&t.length>0&&t.forEach(n);let i=e.getAllDescendants();UWA.is(i,"array")&&i.length>0&&i.forEach(n)})),e}()},t._findDialog=new n({autoCloseFlag:!0,findWidgetOptions:{relatedWidget:a,inputValidationThreshold:1,onFindRequest:function(e,n){s=t._findDialog.getAutoSelectRowOfCurrentMatchingElement(),a.onFindRequest(e,(function(e){!0===s&&l(),n(e)}))},onFindNextResult:function(e,t){a.onFindNextResult(e,(function(e){!0===s&&l(),t(e)}))},onFindPreviousResult:function(e,t){a.onFindPreviousResult(e,(function(e){!0===s&&l(),t(e)}))},onFindAutoSelect:function(e,t){let n={opts:{}};if(n.opts=Object.assign({},e),n.actionCompleted=t,n.opts&&n.opts.autoSelect&&(n.opts.autoSelect.modified&&a.unselectAll(),n.opts.autoSelect.value)){let e=a.getMatchingFindNodeModelArray();a.getTreeDocument().getXSO().add(e)}n&&n.actionCompleted&&n.actionCompleted()},getFindableAttributes:function(){return UWA.is(o,"array")&&o.length>0?o.map((e=>t._nls.get(e))):a.getFindableAttributes()}},renderTo:t._container,position:r}),function(){if(UWA.is(i,"array")){let e;e=i.length>1?t._nls.get("FindDialog.TitleMultipleNodes",{title:i[0].getTitle(),count:i.length-1}):1===i.length?t._nls.get("FindDialog.Title1Node",{title:i[0].getTitle()}):t._nls.get("FindDialog.Title"),t._findDialog.setTitle(e)}}()}))}}_onShow(e){this._tableView&&!this._tableView.isColumnDisabled("hideShow3D")&&this._model.update3DVisibility(e.data,f)}_onHide(e){this._tableView&&!this._tableView.isColumnDisabled("hideShow3D")&&this._model.update3DVisibility(e.data,b)}_onFocus(e){if(this._tableView&&e.data.path){let t=this._model.getNodeFromPath(e.data.path);t&&this._tableView.ensureNodeModelVisible(t,!1,!0,.5)}}async _onShowOnly(e={}){let t=this;if(this._tableView&&e.data&&UWA.is(e.data.path,"array")){let n,i=this.getModel(),o=t._getColumnConfiguration("hideShow3D");o&&o.callbacks&&o.callbacks.onClick&&o.callbacks.onClick.args&&o.callbacks.onClick.args.hideIn3DHandlerId&&(n=o.callbacks.onClick.args.hideIn3DHandlerId),e.data.path.forEach((async function(e){!i.getNodeFromPath(e)&&n&&await t.executeCommand({handlerId:n,args:{path:i.getTreeDocument().getRoots().map((e=>e.getRirPath()))}})}))}}_getColumnConfiguration(e){return this._columns.find((t=>t.dataIndex===e))}_onBIColorize(e){if(e&&e.data){let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);t.hasHandler("DELWebOERTableViewCompBIColorize")&&t.executeHandler({id:"DELWebOERTableViewCompBIColorize",args:{data:e.data,treeDocument:this._model.getTreeDocument()}})}}_onBIUnColorize(e){let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);t.hasHandler("DELWebOERTableViewCompBIUnColorize")&&t.executeHandler({id:"DELWebOERTableViewCompBIUnColorize",args:{data:e.data,treeDocument:this._model.getTreeDocument()}})}async _onApplyFilter(e){let t,n,i,o=this,r=this.getRoots();r&&e&&e.data&&e.data.filterRootIds&&1===e.data.filterRootIds.length&&(t=!0!==e.data.empty?e.data.CVQueryV2.filter:null,n=e.data.filterRootIds[0],i=r.find((e=>e.id===n)),i&&(i.filter=t,await o.removeRoots({items:[i]}),await o.addRoots({items:[i]})))}async refresh(){this._model.empty(),await this.addRoots({items:this.getRoots()})}getRoots(){return this.rootsLoaded}async addRoots(e){var t=this;if(e&&UWA.is(e.items,"array"))if(t._createView(),this._tableView){this._tableView.displayProgressBar(!0),o.markStart("load2DStructure");let n=[];e.items.forEach((e=>{this._compConfig.authorizedPPRTypes.includes(e.pprType)&&(n.push(t._model.loadModel(Object.assign({},e,this._compConfig))),this.rootsLoaded.find((t=>t.id===e.id))||this.rootsLoaded.push(e))})),await Promise.allSettled(n).then((function(n){n.length>0&&n.forEach((n=>{if("fulfilled"===n.status){let i=e.items.find((e=>e.id===n.value.id));t.publish({event:"on2DRootAdded",data:{data:i}})}else if("rejected"===n.status){t.logger.error(n.reason),t.publish({event:"on2DRootAddFailed",data:{}}),t.getNotificationManager().addNotif({level:"error",message:t._nls.get("Error.AddRoots.Message")})}}))})),t._tableView.displayProgressBar(!1),o.markEnd("load2DStructure",t.getRegisteredIdentifier()+" Tree structure created in : ")}else this.logger.warn("Container not available to render Table view, use setContainer api to create Table View");else this.logger.error("Invalid input , please check the API documentation and pass all the required information")}async removeRoots(e){var t=this;e&&UWA.is(e.items,"array")&&e.items.forEach((e=>{t._model.removeRoot(e.id),t.rootsLoaded=t.rootsLoaded.filter((t=>!(e.id===t.id))),0===t.rootsLoaded.length&&t._compConfig&&t._compConfig.tableView&&t._compConfig.tableView.destroyTableViewOnAllRootsRemoved&&this._destroyView()}))}setContainer(e){this._container=e}removeContainer(){this._container=null}empty(){this._model.empty(),this._destroyView(),this.rootsLoaded=[]}async clean(){await super.clean()}async destroy(){await super.destroy(),this.empty(),this.panel&&(this.panel.destroy(),delete this.panel),n.destroy()}async setColumnsForAttibutes(e){let t=await this.createColumnsForAttributes(e);this._columns=this._columns.concat(t),this._compConfig.Columns=this._compConfig.Columns.concat(t)}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.addRoots=this.addRoots.bind(this),this.publicAPI.removeRoots=this.removeRoots.bind(this),this.publicAPI.getRoots=this.getRoots.bind(this),this.publicAPI.empty=this.empty.bind(this),this.publicAPI.setContainer=this.setContainer.bind(this),this.publicAPI.setOptions=this.setOptions.bind(this),this.publicAPI.getPathFromId=this._model.getPathFromId.bind(this._model),this.publicAPI.getSelectionManager=this._model.getSelectionManager.bind(this._model),this.publicAPI.getSelectedPaths=this._model.getSelectedPaths.bind(this._model),this.publicAPI.clearSelection=this._model.clearSelection.bind(this._model),this.publicAPI.highlight=this._model.highlight.bind(this._model),this.publicAPI.unhighlight=this._model.unhighlight.bind(this._model),this.publicAPI.clearHighlight=this._model.clearHighlight.bind(this._model),this.publicAPI.getPSOManager=this._model.getPSOManager.bind(this._model),this.publicAPI.preHighlight=this._model.preHighlight.bind(this._model),this.publicAPI.unPreHighlight=this._model.unPreHighlight.bind(this._model),this.publicAPI.removeContainer=this.removeContainer.bind(this),this.publicAPI.getPanel=this.getPanel.bind(this),this.publicAPI.setColumnsForAttibutes=this.setColumnsForAttibutes.bind(this),this.publicAPI}_createView(){this._compConfig&&!0===this._compConfig.panel&&(this.panel||this.createPanel(this._compConfig.panelOptions)),this.createTableView(this._container)}_destroyView(){this._tableView&&(this._tableView.destroy(),this._tableView=null),this.panel&&(this.panel.destroy(),delete this.panel),this._findDialog&&(this._findDialog.destroy(),this._findDialog=null)}createTableView(e){var t=this;UWA.is(e)?this._tableView||(this._tableView=new l({identifier:t.getRegisteredIdentifier(),treeDocument:this._model.getTreeDocument(),columns:this._columns,container:e,executionContext:t.getExecutionContext(),onContextualMenu:t._onContextualMenu.bind(t),onDelayedModelDataRequest:function(e){t.updateAttributes(e)},onClick:function(e,n){let i=t.getRegisteredIdentifier();if(n||t.publish({event:"onClickOnEmptyArea"}),UWA.is(n)&&-1!==n.rowID&&e.dsModel.layout&&!0!==e.dsModel.layout.getColumnDisabled(n.columnID)){let o=e.dsModel.layout.getDataIndexFromColumnIndex(n.columnID),r=(t._columns.find((e=>e.dataIndex===o))||{}).callbacks;r&&r.onClick&&r.onClick.handlerId&&t.executeCommand({handlerId:r.onClick.handlerId,args:{cell:n,node:n.nodeModel,treeDocument:t._model.getTreeDocument(),origin:i,...r.onClick.args}})}}}),this._compConfig&&this._compConfig.tableView&&this._compConfig.tableView.registerTypeRepresentations&&this._tableView.registerTypeRepresentations(this._compConfig.tableView.registerTypeRepresentations)):this.logger.warn("Container not available to render table view, container is mandatory to create table view. Use setContainer API to set container")}updateContextualMenu(e){this._contextuMenuOptions=UWA.is(e,"array")?e:[]}async _onContextualMenu(e){let t=this.getExecutionContext().getComponent(WAfrStandardComponentKey.UIComponent).getContextualUIComponentManager(),n=[],i=this;if(e&&e.cellInfos&&-1!==e.cellInfos.rowID){if(this._contextualMenu.forEach((e=>{let i;switch(e.type){case"WAfrDefaultHandlerItem":i=t.buildDefaultHandlerContextMenuItem(e.handlerId),Object.assign(i,e);break;case"WAfrCheckHandlerItem":i=t.buildCheckHandlerContextMenuItem(e.handlerId),Object.assign(i,e);break;default:i=e}i.type="PushItem",n=n.concat(UWA.is(i,"array")?i:[i])})),n=n.filter((function(t){var n=e.cellInfos.nodeModel;return(!t.availableOn||!t.availableOn.position||(!!t.availableOn.position.includes(m)||(n.isRoot()?t.availableOn.position.includes(g):n.isLeaf()?t.availableOn.position.includes(p):t.availableOn.position.includes(h))))&&(!t.availableOn||!t.availableOn.column||-1!==t.availableOn.column.values.indexOf(n.getAttributeValue(t.availableOn.column.name)))})).map((function(t){return UWA.is(i._contextuMenuOptions,"array")&&i._contextuMenuOptions.length>0&&i._contextuMenuOptions.forEach((e=>{t.handlerId===e.handlerId&&Object.assign(t,e)})),Object.assign(t,{action:{callback:function(){d.trackChanges({category:"ContextualMenu2DStructure",action:t.handlerId,label:t.handlerId,dims:{pd1:i.getRegisteredIdentifier()},executionContext:i.getExecutionContext()}),i.executeCommand({handlerId:t.handlerId,args:{node:e.cellInfos.nodeModel,treeDocument:i._model.getTreeDocument(),origin:i.getRegisteredIdentifier(),selectedNodes:i._model.getSelectedNodes(),...t.args,...e}})}}})})),n.find((e=>"OpenWith"===e.identifier))){let t=await c.openWithApps({node:e.cellInfos.nodeModel,selectedNodes:i._model.getSelectedNodes(),executionContext:i.getExecutionContext()});n=n.map((e=>("OpenWith"===e.identifier&&(e=t),e)))}}return n}_getNls(){return this._nls}getTableView(){return this._tableView}getModel(){return this._model}getPanel(){return this.panel?this.panel:null}setOptions(e={}){let t=this;Object.keys(e).forEach((n=>{t._compConfig||(t._compConfig={}),t._compConfig[n]=e[n]}))}getComponentConfig(){return this._compConfig}}return C.prototype.mixinProperties(C,n),C.prototype.mixinProperties(C,i),C.prototype.mixinProperties(C,r),C}));