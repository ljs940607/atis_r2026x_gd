define("DS/W3DLegal/W3DLegal",["UWA/Core","UWA/Element","UWA/Utils","UWA/Utils/Client","UWA/Event","UWA/Class/View","DS/WAFData/WAFData","DS/UIKIT/Input/Toggle","DS/UIKIT/Input/Button","DS/UIKIT/Modal","DS/UIKIT/SuperModal","DS/UIKIT/DropdownMenu","DS/TopBarProxy/TopBarProxy","i18n!DS/W3DLegal/assets/nls/W3DLegal","css!DS/W3DLegal/W3DLegal"],(function(e,t,n,o,a,i,l,s,c,r,d,p,u,f){"use strict";var m={superModal:null,messages:Object.create(null),elements:{},viewportWidth:0,init:function(t){m.elements.container=e.createElement("div",{class:"alert-legal"}).inject(t),m.intResizeEvent()},intResizeEvent:function(){t.addEvent.call(window,"resize",m.updatePositions)},removeResizeEvent:function(){t.removeEvent.call(window,"resize",m.updatePositions)},notify:function(e,t){var n=k._legal,o=m.superModal;o||(o=new d({className:"legal-notifier"}),m.superModal=o),n.grantModal&&n.grantModal.hide(),o.alert(t||e,(function(){n.grantModal&&n.grantModal.show()}))},createBottomMessage:function(t){var n,o,a,i,l=m,s=t.msg,c=l.messages,r=t||{},d=Object.keys(c).length,p=l.elements.container,u=t.envId;if(!c[u])return(n=e.createElement("div",{class:"alert-legal-message",text:s,styles:{zIndex:d}})).inject(p),i={id:u=t.envId,element:n},c[u]=i,(o=e.createElement("span",{class:"fonticon fonticon-cancel-circled icon-close"})).inject(n,"bottom"),o.addEvent("click",l.onMessageClose.bind(null,i,r)),e.is(r.onInfo,"function")&&((a=e.createElement("span",{class:"fonticon fonticon-info-circled icon-info"})).inject(n,"top"),a.addEvent("click",l.onMessageInfo.bind(null,i,r))),l.updatePositions({force:!0}),i},removeMessage:function(e){var t=m,n=t.messages;t.messages[e.id].element.destroy(),delete n[e.id],t.updatePositions({force:!0})},onMessageInfo:function(t,n){e.is(n.onInfo,"function")&&n.onInfo(n)},onMessageClose:function(t,n){m.removeMessage(t),e.is(n.onClose,"function")&&n.onClose(n)},updatePositions:function(e){var t=m,n=t.messages,o=e||{},a=Object.keys(n),i=window.innerWidth||document.documentElement.clientWidth,l=0;(t.viewportWidth!==i||o.force)&&(a.forEach((function(e){var t=n[e].element;t.setStyle("bottom",Math.round(l)),l+=t.getDimensions().outerHeight})),t.viewportWidth=i)}},g={checkoutticket:"/resources/AppsMngt/environment/checkoutticket",failurePage:"/resources/AppsMngt/uploadfile/message?error=true",eServiceError:"/enovia/eServiceError.jsp",init:function(e){g.initUrls(e.myAppsUrl)},initUrls:function(t){g.myAppsBaseUrl=t&&"string"===e.typeOf(t)?t:""},buildCheckoutForm:function(t,n){var o=e.createElement("form",{method:"POST",action:n.fcsUrl,enctype:"application/x-www-form-urlencoded",style:{display:"none"}});return e.createElement("input",{type:"hidden",value:g.myAppsBaseUrl+g.failurePage,name:"__fcs__failurePage",id:"__fcs__failurePage"}).inject(o),e.createElement("input",{type:"hidden",value:n.fcsJobTicket,name:"__fcs__jobTicket",id:"__fcs__jobTicket"}).inject(o),e.createElement("input",{type:"hidden",value:t,name:"file_0_name",id:"file_0_name"}).inject(o),o},doCheckout:function(e){var t=e.type||"";switch(t.toLowerCase()){case"tou":t="tos";break;case"cookie":t="cookies";break;case"legalinfo":t="legalInfos"}var a={envid:e.envid,file:e.file},i=e.file,l=e&&e.ressourceType;t&&(a.type=t),"url"===l?window.open(e.file,"_blank"):g.doRequest(g.myAppsBaseUrl+g.checkoutticket,a,{onComplete:function(e){var t=window&&window.ds&&window.ds.env&&"MOBILE"===window.ds.env;if(o.Platform.android&&!t){var a=g.buildCheckoutForm(i,e);a.inject(document.body),a.submit(),n.setImmediate(a.destroy)}else{var l=n.toQueryString({__fcs__failurePage:g.myAppsBaseUrl+g.failurePage,__fcs__jobTicket:e.fcsJobTicket,file_0_name:i,__fcs__attachment:!0});window.location=e.fcsUrl+"?"+l}}})},doRequest:function(t,o,a){var i={Accept:"application/json","Accept-Language":k._legal.language};o=(o=n.toQueryString(o)).length>0?"?"+o:"",l.authenticatedRequest(t+o,{timeout:15e3,method:"GET",type:"json",headers:i,data:undefined,cache:-1,onComplete:function(t){v.isResultValid(t)?e.is(a.onComplete,"function")&&a.onComplete(t):(m.notify(f.errorMsg),e.is(a.onFailure,"function")&&a.onFailure(t))},onFailure:function(t){"function"==typeof a.onFailure?a.onFailure(t):e.log(t.error?t.error:t)}})}},h=i.extend({tagName:"footer",className:"w3dfooter",elements:null,items:null,domEvents:{"click .list-itm-wrap":"onItemClick"},setup:function(e){this.items=e.items,this._parent(e)},render:function(){var t=this,n={},o=t.getContent(),a=e.createElement;return o=t.getContent(),n.list=a("ul",{class:t.className+"-list"}).inject(o),t.items.forEach((function(e){t._buildItem(e).inject(n.list)})),n.toggler=a("span",{class:t.className+"-toggler fonticon fonticon-2x",events:{click:function(){t.container.toggleClassName("full")}}}).inject(o).hide(),t.elements=n,t.container.addEvent("resize",t._updateTogglerVisibility.bind(t)),t},_updateTogglerVisibility:function(){if(this.container.clientWidth!==this._previousContainerWidth){var e=this.elements.list,t=parseInt(window.getComputedStyle(this.container).minHeight),n=this.elements.toggler;e.scrollHeight>t?n.show():n.hide(),this._previousContainerWidth=this.container.clientWidth}},_buildItem:function(t){var n,o=e.createElement,a=o("li",{class:this.className+"-list-itm",name:t.name}),i={class:"list-itm-wrap",text:t.text};return t.html&&(i.html=t.html),n=o("span",i).inject(a),e.merge(t,{clickable:!0}),t.clickable&&a.addClassName("clickable"),t.icon&&o("div",{class:"fonticon "+t.icon}).inject(n),a},onItemClick:function(e){var t=a.getElement(e);this.dispatchEvent("onClick",[this,e,t.parentElement])},destroy:function(){this._parent()}}),v={_baseURL:"",APPS_MNGT:"/resources/AppsMngt/",GET_LEGAL:"user/startup",SET_LEGAL:"user/setlegal",isResultValid:function(t){var n,o=!1;return t&&(t.code&&"0"!==t.code||t.error||t.status?(n=t.message&&""!==t.message?t.message:t.error&&t.error.type?t.error.type:t.error?t.error:t.status?t.status:t,e.log(n)):o=!0),o},init:function(t){var n=t.myAppsUrl||"";e.is(n,"string")&&(v._baseURL=n.replace(/\/$/g,""))},fetchUserLegal:function(t){var n=v._baseURL+v.APPS_MNGT+v.GET_LEGAL,o=t.params?e.Utils.toQueryString(t.params):"";l.authenticatedRequest(o?n+"?"+o:n,{timeout:11e3,method:"GET",type:"json",cache:-1,headers:{Accept:"application/json","Accept-Language":k._legal.language},onComplete:t.onComplete,onFailure:t.onFailure})},setUserLegal:function(e,t){var n=t||{},o=v._baseURL+v.APPS_MNGT+v.SET_LEGAL+(n.isCookie?"/cookie":"");l.getCompassCSRFToken(v._baseURL+v.APPS_MNGT).then((function(t){l.authenticatedRequest(o,{method:"POST",type:"json",headers:{"X-DS-CSRFTOKEN":t},data:{envids:e.join(",")},onComplete:n.onComplete,onFailure:n.onFailure,cache:-1})}))}},y=e.Class.extend({chineseTenantRegex:/aph7|apc2/i,nonAcceptedTerms:null,nonAcceptedCookies:null,acceptedTerms:null,allEnvs:null,acceptedCbList:[],grantModal:null,grants:[],isAccessValid:!1,myAppsBaseUrl:null,aboutHandler:null,footerEventHandler:null,dropdownEventHandler:null,isReady:!1,language:null,COOKIE_KEY:"swymlang",config:null,acceptedTou:null,acceptedDp:null,acceptedCookies:null,legalInfos:null,swymTenants:null,elements:{},dsCn:"达索析统（上海）信息技术有限公司",icpReordal:"沪ICP备14051708号",cnMinistry:"http://www.beian.miit.gov.cn",defaultOptions:{onAccept:function(){},onFailure:function(){},renderFooter:!0,footerContainer:document.body,onAboutClick:null,legal:null,swym:null,tenantId:null,myAppsBaseUrl:""},filterEnvironments:function(e){var t=this,n=[],o=[],a=[],i=[],l=[],s=[],c=[],r=[],d=[],p=!1;return e.forEach((function(e){var u,m,g,h=e.cookie,v=t.isValid(e.tos),y=t.isValid(e.dp);u={id:e.id,tou:e.tos,name:e.displayName,type:f.termsOfUse,env:e},m={id:e.id,dp:e.dp,name:e.displayName,type:f.dataPrivacy,env:e},v&&(t.isValidNotAccepted(e.tos,e.acceptedTOS)?l.push(u):i.push(u)),y&&(t.isValidNotAccepted(e.dp,e.acceptedDP)?s.push(m):a.push(m)),(v||y)&&(e.accepted&&e.acceptedDP&&e.acceptedTOS?n.push(e):(!e.acceptedDP&&y||!e.acceptedTOS&&v)&&o.push(e)),e.footerDisplay&&(p=!0),h&&h.message&&(g={id:e.id,cookie:e.cookie.file,name:e.displayName,message:e.cookie.message,type:"Cookie",env:e},h.accepted?r.push(g):c.push(g)),e.legalInfo&&d.push({id:e.id,legalInfo:e.legalInfo,name:e.displayName,type:f.legalInfo,env:e})})),{acceptedTerms:n,nonAcceptedTerms:o,acceptedTou:i,nonAcceptedTou:l,acceptedDp:a,nonAcceptedDp:s,acceptedCookies:r,nonAcceptedCookies:c,legalInfos:d,envDisplayFooter:p}},mergeTos:function(e,t){var n=e.concat(t);return n.forEach((function(e){return-1!==t.indexOf(e)&&(e.acceptedDP=!!e.dp,e.acceptedTOS=!!e.tos),e.tos||e.dp})),n},isValidNotAccepted:function(e,t){return this.isValid(e)&&!t},isValid:function(t){return t&&e.is(t,"string")},buildTermsToAccept:function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.buildEnvToAccept(e))})),n},buildEnvToAccept:function(t){var n=this,o=e.createElement("div",{class:"w3dlegal-env",html:'<div class="w3dlegal-env-title" name="'+t.id+'">'+t.displayName+'</div><div class="w3dlegal-env-msg"><p></p><div class="w3dlegal-env-links"></div></div>'}),a=o.getElement(".w3dlegal-env-links"),i=o.getElement(".w3dlegal-env-msg"),l=new s({type:"checkbox",checked:!1,value:"",label:"",className:"w3dlegal-toggle primary",name:t.displayName,events:{onChange:n.updateAcceptButtonState.bind(n)}});return e.is(t.message,"string")&&i.getElement("p").appendText(t.message),n.isValidNotAccepted(t.tos,t.acceptedTOS)&&n.buildLink(t,!0).inject(a),n.isValidNotAccepted(t.dp,t.acceptedDP)&&n.buildLink(t).inject(a),l.elements.container.inject(i,"before"),n.grants.push(l),o},buildLink:function(t,n){var o=this,a=t,i=!!n,l=e.createElement("span",{class:"w3dlegal-link-ctn",html:'<span class="fonticon fonticon-doc-text"></span><a class="w3dlegal-link">'+(n?f.termsOfUse:f.dataPrivacy)+"</a>"});return l.addEvent("click",(function(){o.checkOut.doCheckout({envid:a.id,type:i?"tos":"dp",file:i?a.tos:a.dp})})),l},acceptHandler:function(){var e=this;0===e.getNonValid().length?(e.acceptButton.disable(),e.sendTos()):e.notifier.notify(f.warning,f.notValid)},isTenantTypePresent:function(e,t){return t.some((function(t){return t&&t.url&&t.url.test(e)}))},onReceivedTos:function(t,n){var o,a,i=this,l=i.filterEnvironments(t);i.allEnvs=t,e.extend(i,l),i.swymTenants=n,i.nonAcceptedTerms=i.nonAcceptedTerms.filter((e=>e.id===i.tenantId)),i.nonAcceptedTerms.length?(a=new r({header:"<h4>"+f.legalNotice+"</h4>",body:i.buildTermsToAccept(i.nonAcceptedTerms),closable:!1,escapeToClose:!1,className:"w3dlegal-modal",renderTo:document.body}),(o=new c({value:f.okBtn,className:"primary",events:{onClick:i.acceptHandler.bind(i)}})).inject(a.getFooter()),i.grantModal=a,i.acceptButton=o,i.updateAcceptButtonState(),a.show()):i.onAcceptedTerms()},getNonValid:function(){return this.grants.filter((function(e){return!e.isChecked()}))},updateAcceptButtonState:function(){this.getNonValid().length?this.acceptButton.disable():this.acceptButton.enable()},sendTos:function(){var t=this;t.platformAccess.setUserLegal(t.nonAcceptedTerms.map((function(e){return e.id})),{onComplete:function(n){if(e.is(n.code)&&"0"===n.code.toString()){t.isAccessValid=!0,t.grantModal.hide(),t.onAcceptedTerms();try{require([["DS","Dashboard","UserPlatformAccess"].join("/")],(function(e){e.clearStartupCache()}))}catch(e){}}else!function(){this.notifier.notify(f.error,f.errorMsg),e.log("Legal: Could not set user grants.")}()},onFailure:function(){t.acceptButton.enable(),t.notifier.notify(f.error,f.errorMsg),e.log("Legal: Could not set user grants.")}})},onAcceptedTerms:function(){var t=this;t.acceptedTerms=t.mergeTos(t.acceptedTerms,t.nonAcceptedTerms),t.nonAcceptedTerms=[],t.acceptedTou=t.acceptedTou.concat(t.nonAcceptedTou),t.nonAcceptedTou=[],t.acceptedDp=t.acceptedDp.concat(t.nonAcceptedDp),t.nonAcceptedDp=[],t.acceptedCookies=t.acceptedCookies.concat(t.nonAcceptedCookies),t.callAcceptedCbs(),t.onAccept.call(null,{legal:e.clone(t.allEnvs),isFooterRendered:t.renderFooter&&t.envDisplayFooter&&t.footerContainer}),t.isReady=!0,t.renderHelpLegal=!(!t.acceptedTou.length&&!t.acceptedDp.length),t.renderHelpLegal&&t.addHelpMenuLegal(),t.renderFooter&&t.displayFooter(),t.acceptButton&&t.acceptButton.destroy(),t.grantModal&&t.grantModal.destroy(),t.displayCookies(t.nonAcceptedCookies),t.grantModal=null,t.acceptButton=null},callAcceptedCbs:function(){var e,t,n=this;for(e=0,t=n.acceptedCbList.length;e<t;e++)n.acceptedCbList[e].call(null,n.acceptedTerms)},initUrls:function(e){var t=this;t.myAppsBaseUrl=e.replace(/\/$/g,""),t.checkOut.init({myAppsUrl:t.myAppsBaseUrl}),t.platformAccess.init({myAppsUrl:t.myAppsBaseUrl})},fetchAcceptedTerms:function(e){var t=this;t.acceptedTerms?e.call(null,t.acceptedTerms):t.acceptedCbList.push(e)},displayCookies:function(e){var t=this,n=t.checkOut,o=t.platformAccess;function a(e){var n=e.cookie;n.accepted||o.setUserLegal([e.envId],{isCookie:!0,onComplete:function(){n.accepted=!0;var e=t.nonAcceptedCookies.indexOf(n);t.nonAcceptedCookies.splice(e,1)}})}function i(e){var t=e||{},o=t.cookie;o&&o.cookie&&t.envId&&n.doCheckout({envid:t.envId,type:"cookie",file:o.cookie})}e.forEach((function(e){t.notifier.createBottomMessage({msg:e.message,envId:e.id,cookie:e,onClose:a,onInfo:e.cookie?i:null})}))},displayFooter:function(t,n){var o,a=this;if((t=t||a.footerContainer)&&a.envDisplayFooter)return a.footer&&a.footer.destroy(),o=a.getFilteredLegalInfos((function(e){return e.env&&e.env.footerDisplay})),a.footer=a.buildFooter(e.merge(o,{aboutHandler:a.aboutHandler})),a.footer.inject(t,n)},buildFooter:function(t){var n,o=this,a=e.merge(t||{},{acceptedTou:[],acceptedDp:[],acceptedCookies:[],legalInfos:[],aboutHandler:null,others:[]});return(n=new h({items:o.getFooterItems(a).concat(a.others),legalInfo:a,events:{onClick:o.footerEventHandler}})).render(),o.dropdownEventHandler=o.footerEventHandler.bind(o,n),o.buildDropdowns(n,a),n},addHelpMenuLegal:function(){var e=this.getFilteredLegalInfos((function(e){return e}));this.addHelpMenuLegalElements(e)},addHelpMenuLegalElements:function(e){var t,n,o=this,a=[],i={legalInfos:{label:"legalInfo",nlsLabel:"legalInfo",order:1},acceptedTou:{label:"tou",nlsLabel:"termsOfUse",order:2},acceptedDp:{label:"dp",nlsLabel:"dataPrivacy",order:3},acceptedCookies:{label:"cookie",nlsLabel:"cookies",order:4},others:{order:5}};function l(e,t){var n,o=i[e].label;"cookie"!==(n={file:t[o],envid:t.id,type:o,ressourceType:t.env&&t.env.ressourceType}).type.toLowerCase()||n.file?n&&g.doCheckout(n):this.displayCookies([t])}o.topBarProxyInstance=o.topBarProxyInstance||new u({id:"helpMenu"}),Object.keys(e).sort((function(e,t){return i[e].order<i[t].order?-1:1})).forEach((function(s){t=e[s]||[],n=i[s].nlsLabel,"others"===s&&t.length>0?a.push({label:t[0].text,submenu:[{label:t[1].text,onExecute:function(){window.open(t[1].link)}}]}):1===t.length?a.push({label:f[n],onExecute:l.bind(o,s,t[0])}):t.length>1&&a.push({label:f[n],submenu:t.map((function(e){return{label:e.type&&"cookie"!==e.type.toLowerCase()?e.type+" - "+e.name:e.name,onExecute:l.bind(o,s,e)}}))})})),o.topBarProxyInstance.empty(),o.topBarProxyInstance.addContent({help:a})},buildDropdowns:function(e,t){var n=this,o="top left",a="legal-dropdown",i="{name}",l="[name="+i+"] .list-itm-wrap",s={onClick:n.dropdownEventHandler},c=t.acceptedTou,r=t.acceptedDp,d=t.acceptedCookies,u=t.legalInfos,f=1050,m=e.getContent();c.length>1&&(n.touDropdown=new p({position:o,className:a,items:n.getDropdownItems(c),target:m.getElement(l.replace(i,"tou")),zindex:f,events:s})),r.length>1&&(n.dpDropdown=new p({position:o,className:a,items:n.getDropdownItems(r),target:m.getElement(l.replace(i,"dp")),zindex:f,events:s})),d.length>1&&(n.cookieDropdown=new p({position:o,className:a,items:n.getDropdownItems(d),target:m.getElement(l.replace(i,"cookies")),zindex:f,events:s})),u.length>1&&(n.legalInfosDropdown=new p({position:o,className:a,items:n.getDropdownItems(u),target:m.getElement(l.replace(i,"legalinfo")),zindex:f,events:s}))},onFooterItemClick:function(t,n,o){var a,i,l=this,s=l.checkOut,c=t.options.legalInfo;if(e.is(o,"element"))switch(o.getAttribute("name")){case"tou":if(c.acceptedTou.length>1)return;i={file:(a=c.acceptedTou[0]).tou,envid:a.id,type:"tou",ressourceType:a.env&&a.env.ressourceType};break;case"dp":if(c.acceptedDp.length>1)return;i={file:(a=c.acceptedDp[0]).dp,envid:a.id,type:"dp",ressourceType:a.env&&a.env.ressourceType};break;case"cookies":if(c.acceptedCookies.length>1)return;i={file:(a=c.acceptedCookies[0]).cookie,envid:a.id,type:"cookie",ressourceType:a.env&&a.env.ressourceType};break;case"about":l.aboutHandler&&l.aboutHandler();break;case"legalinfo":if(c.legalInfos.length>1)return;i={file:(a=c.legalInfos[0]).legalInfo,envid:a.id,type:"legalinfo",ressourceType:a.env&&a.env.ressourceType}}else o.id&&o.icon&&(i={file:o.file,envid:o.envid,type:o.type,ressourceType:o.ref&&o.ref.env&&o.ref.env.ressourceType});i&&i.type&&"cookie"===i.type.toLowerCase()&&!i.file?l.displayCookies([a||o.ref]):i&&s.doCheckout(i)},getFilteredLegalInfos:function(t){var n=this,o=[];return n.isTenantTypePresent(n.chineseTenantRegex,n.swymTenants)&&(o=[{text:n.dsCn,name:"dsCn",clickable:!1},{html:'<a target="_blank" href='+n.cnMinistry+">"+n.icpReordal+"</>",name:"icpReordal",text:n.icpReordal,link:n.cnMinistry,env:{footerDisplay:!0}}]),e.clone({acceptedTou:n.acceptedTou.filter(t),acceptedDp:n.acceptedDp.filter(t),acceptedCookies:n.acceptedCookies.filter(t),legalInfos:n.legalInfos.filter(t),others:o.filter(t)})},getFooterItems:function(e){var t=[],n="fonticon-down-open",o=e.legalInfos.length,a=e.acceptedTou.length,i=e.acceptedDp.length,l=e.acceptedCookies.length;return o>=1&&t.push({text:f.legalInfo+" ",name:"legalinfo",icon:o>1?n:null}),e.aboutHandler&&t.push({text:f.about3DExp+" ",name:"about",handler:this.aboutHandler}),a>=1&&t.push({text:f.termsOfUse+" ",name:"tou",icon:a>1?n:null}),i>=1&&t.push({text:f.dataPrivacy+" ",name:"dp",icon:i>1?n:null}),l>=1&&t.push({text:f.cookies+" ",name:"cookies",icon:l>1?n:null}),t},getDropdownItems:function(e){return e.map((function(e){return{text:e.type&&"cookie"!==e.type.toLowerCase()?e.type+" - "+e.name:e.name,icon:"fonticon fonticon-doc-text",ref:e,type:e.type,file:e.tou||e.dp||e.cookie||e.legalInfo,envid:e.id}}))},getCurrentLanguage:function(){var e,t,n=this.COOKIE_KEY,a=[];return e=null,t=document.cookie.split(";"),(a=t.filter((function(e){return e.toLowerCase().indexOf(n.toLowerCase())>=0}))).length>0&&(e=a[0].split("=")[1]),e||window.dsLang||o.Locale.lang},init:function(t){var n=this,o=e.merge(t||{},n.defaultOptions);n.checkOut=g,n.platformAccess=v,n.notifier=m,n.language=n.getCurrentLanguage(),n.initUrls(o.myAppsBaseUrl),n.onAccept=o.onAccept,n.onFailure=o.onFailure,n.renderFooter=o.renderFooter,n.footerContainer=o.footerContainer,n.aboutHandler=o.onAboutClick,n.swymTenants=o.swym,n.tenantId=o.tenantId||o.legalTenantId||"OnPremise",n.footerEventHandler=n.onFooterItemClick.bind(n),n.notifier.init(document.body),Array.isArray(o.legal)&&Array.isArray(o.swym)?n.onReceivedTos(o.legal,o.swym):n.platformAccess.fetchUserLegal({params:o.tenantId?{platform:o.tenantId}:null,onComplete:function(e){n.platformAccess.isResultValid(e)?n.onReceivedTos(e.legal,e.swym):(n.notifier.notify(f.errorMsg),n.onFailure())},onFailure:function(){e.log("Legal: Startup parameters could not be fetched"),n.onFailure()}})}}),k={_legal:null,init:function(t){var n=this;n._legal?e.log("Legal: bad parameters for Legal module initialization"):(n._legal=y.singleton({uninitializedCalls:"throw"}),n._legal.init(t))},isAccessValid:function(){return!!this._legal.isAccessValid},displayFooter:function(){var e=this._legal;return e.isReady&&e.displayFooter.apply(e,arguments)},fetchAcceptedTerms:function(){return this._legal.fetchAcceptedTerms()}};return k}));