define("DS/DELWebComponentManager/DELWebComponentManager",["DS/Logger/Logger","text!DS/DELWebComponentManager/assets/json/StandardComponents.json"],(function(e,t){"use strict";const n=JSON.parse(t);var i;return i||(i=new function(){var t={},i=e.getLogger("DELWebComponentManager"),o=function(e){return 0===Object.keys(e).length},r={create:async function(e={}){let i=function(e){return new UWA.Promise(((t,n)=>{let i=[],s=[];if(!0===o(e))return n("No Components are defined");for(let t in e)Object.hasOwnProperty.call(e,t)&&(i.push(e[t].code),s.push(t));require(i,(function(...n){n.forEach(((t,n)=>{let i=s[n],o=new t(i,e[i].options||{});r.register(i,o)})),t()}))}))};await Promise.all([async function(){let e=[],s={};Object.keys(n).forEach((e=>{t[e]||(s[e]=n[e])})),!1===o(s)&&(await i(s),Object.keys(s).forEach((t=>{e.push(r.initialize(t))})),await Promise.all(e))}(),i(e.Components)])},initialize:function(e,t){return e?r.getComponent(e).initialize(t).then((()=>{r.setInitialized(e,!0)})):UWA.Promise.reject("input is not valid, component name is not provided")},unInitialize:function(e){return e?r.getComponent(e).clean().then((()=>{r.setInitialized(e,!1)})):UWA.Promise.reject("input is not valid, component name is not provided")},remove:async function(e){await r.getComponent(e).destroy(),r.unregister(e)},register:function(e,n,o=!1){t[e]&&i.warn("component is already registered, old component will be replaced"),t[e]={instance:n,initialized:o}},setInitialized:function(e,n){UWA.is(t[e])&&UWA.is(n,"boolean")?t[e].initialized=n:i.warn(`component ${e} is not registered`)},getComponent:function(e){return t[e]?t[e].instance:null},isInitialized:function(e){return!!t[e]&&t[e].initialized},unregister:function(e){t[e]?delete t[e]:i.warn(`component ${e} is not registered`)},dispose:function(){t={}}};return r}),i})),define("DS/DELWebComponentManager/DELWebComponent",["UWA/Core"],(function(e){"use strict";var t=function(e,t){this.name=e,this.options=t};return t.prototype.initialize=function(){return e.Promise.resolve()},t.prototype.clean=function(){return e.Promise.resolve()},t.prototype.destroy=function(){return e.Promise.resolve()},t})),define("DS/DELWebComponentManager/XSOManager",["UWA/Core","UWA/Class","DS/Logger/Logger","DS/Selection/XSO","DS/DELWeb3DUtils/DELOERNodeUtils","DS/DELWebComponentManager/DELWebComponentManager","DS/PlatformAPI/PlatformAPI"],(function(e,t,n,i,o,r,s){"use strict";let a=n.getLogger("DS/DELWebComponentManager/XSOManager");var g=function(e){return{eventChannel:`DELOER/${e}`,useUniqueID:!0,getElementID:function(e={}){let t;return e.getId?t=e.getId():e.pathElement&&e.pathElement.getUID?t=e.pathElement.getUID():a.debug("Not a valid selection object, selection object should either be a node or path element"),t}}},u=new i(g("CSO")),l=new i(g("HSO")),p=new i(g("PSO")),d=t.singleton({init:function(e){this._parent(e)},getCSO:function(){return u},getHSO:function(){return l},getPSO:function(){return p}}),c=function(){let e=[];e=(u.get()||[]).map(o.getRirPath);let t=function(e){let t=r.getComponent("Utils");return{metadata:{timestamp:Date.now(),appid:t.getSharedAppId(),xappid:t.getAppId(),originWidgetId:t.getWidgetId(),ignoreFromSameWidgetId:!0},data:e}}({paths:e});s.publish("DS/PADUtils/PADCommandProxy/select",t),s.publish("DS/ENO/select",t)};return u.onPostAdd(c),u.onPostRemove(c),d})),define("DS/DELWebComponentManager/DELWebModel",["UWA/Class/Model","DS/Logger/Logger","DS/DELWebComponentManager/DELWebComponent","DS/DELWebComponentManager/DELWebComponentManager"],(function(e,t,n,i){"use strict";let o=e.extend({validate:function(){}});function r(e,i){n.call(this,e,i),this.logger=t.getLogger("DS/DELWebComponentManager/DELWebModel")}return r.prototype=Object.create(n.prototype),r.prototype.initialize=async function(){this._model=new o,this._modelEvents=i.getComponent("ModelEvents"),this._model.addEvent("onChange",(e=>{let t=e.changedAttributes();Object.keys(t).forEach((e=>{let n=`onModelChange:${e}`,i={data:t[e],origin:this.name};this.logger.log(`publish event ${n} with params`,i),this._modelEvents.publish({event:n,data:i})})),this.logger.log("publish onModelChange for attributes ",t),this._modelEvents.publish({event:"onModelChange",data:{data:t,origin:this.name}})}))},r.prototype.set=function(...e){return this._model.set.apply(this._model,e)},r.prototype.get=function(e){return this._model.get(e)},r.prototype.clean=async function(){this._model.clear(),this._model.removeEvent("onChange")},r.prototype.destroy=async function(){this.clear(),this._model=null},r})),define("DS/DELWebComponentManager/DELWebLinkManager",["DS/Logger/Logger","DS/ENOXInterWdgCom/LinkManager","DS/DELWebComponentManager/DELWebComponentManager"],(function(e,t,n){"use strict";const i="link",o="unlink",r="onGetAppStatus",s="onWidgetLinked",a="onWidgetUnlinked";function g(){this._logger=e.getLogger("DS/DELWebComponentManager/DELWebLinkManager"),this._widgetLink=null,this._attemptedCustomSubscriptions=new Map,this._eventsConfig,this._matchingFeatures=[],this._widgetsToUnlink=[],this._appReady=!1}let u;return g.prototype.initializeWidgetLink=function(t,n,r){const s=parent.require;return this._eventsConfig=r,new Promise((r=>{window.__karma__?(e.warn("We are in karma test environment, thus preventing the use of WidgetLink."),r()):s(["DS/WidgetLink/WidgetLink"],(e=>{this._widgetLink=e.get(t),t&&(this._widgetLink.setLinkability(n),this._setMatchingFeatures(this._widgetLink.getLinked()),this._widgetLink=e.get(t),t.link=this._widgetLink),this._appReady=!1,this._widgetLink.addEventListener(i,this._onLink.bind(this)),this._widgetLink.addEventListener(o,this._onUnLink.bind(this)),this._setUpLinkEvents(),r()}))}))},g.prototype._subscribeToModelEvents=function(){const e=[{eventName:"onAppReady",callback:this._onAppReady.bind(this)},{eventName:"getAppStatus",callback:this._onGetAppStatus.bind(this)}];let t=n.getComponent("ModelEvents");e.forEach((e=>{t.subscribe({event:e.eventName},e.callback)}))},g.prototype._publish=function(e,t){n.getComponent("ModelEvents").publish({event:e,data:{data:t},origin:this.name})},g.prototype._onAppReady=function(){this._appReady=!0,this._notifyUnLink(),this._notifyLink()},g.prototype._onGetAppStatus=function(){this._publish(r,{status:this._appReady})},g.prototype._setUpLinkEvents=function(){var e,t=this,i=n.getComponent("Utils"),o=t._eventsConfig.eventsPrefix,r=t._eventsConfig.eventsToSubscribe,s=t._eventsConfig.eventsToPublish,a=e=>{let t;return e&&(t=e.charAt(0).toLowerCase()+e.slice(1)),t};e=n.getComponent("ModelEvents");for(let n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.subscribe(o+n,(s=>{t._logger.debug(`Widget Link Event ${o+n} invoked with params`,s);let g=r[n].internalEvent?r[n].internalEvent:a(n);i.trackChanges({category:"LinkabilityEvents",action:n,label:n}),e.publish({event:g,data:{data:s,origin:this.name}})}));for(let n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.subscribe({event:n},(function(e){if(e){let i=s[n].externalEvent?r[n].externalEvent:n;t._logger.debug(`Widget Link Event ${o+n} published with params`,e.data),t.publish(o+i,e.data)}}));this._subscribeToModelEvents()},g.prototype._getFeature=function(e,t){let n,i,o;return t&&(n=t.split("/"),i=n[n.length-1],o=e[i].feature),o},g.prototype._setMatchingFeatures=function(e){let t=[];e&&e.forEach((e=>{t=[...t,...e.matchLinkability().matchingFeatures]})),this._logger.debug(`Widget Linked with matching features ${t}`),this._matchingFeatures=t},g.prototype._notify=function(e,t){let i=n.getComponent("ModelEvents");!0===this._appReady&&e.forEach((e=>{i.publish({event:t,data:{data:e,origin:this.name}})}))},g.prototype._notifyLink=function(){let e=this._widgetLink.getLinked();e.forEach((e=>{this.setSourceWidgetId(e.id)})),this._notify(e,s)},g.prototype._notifyUnLink=function(){this.setSourceWidgetId(n.getComponent("Utils").getWidgetId()),this._notify(this._widgetsToUnlink,a),this._widgetsToUnlink=[]},g.prototype._onLink=function(e){this._logger.debug("Widget Linked - ",e.link.id,e.link.appId,e.link.isLinked()),n.getComponent("Utils").trackChanges({category:"LinkApp",action:"LinkApp",label:"LinkApp",dims:{pd1:e.link.appId}}),this._setMatchingFeatures(this._widgetLink.getLinked()),this._subscribeAfterLink(),this._notifyLink()},g.prototype._onUnLink=function(e){let t=e.link;this._logger.debug("Widget Linked - ",e.link.id,e.link.appId,e.link.isLinked()),t&&(this._setMatchingFeatures(this._widgetLink.getLinked()),this._subscribeAfterLink(),this._widgetsToUnlink.push(t),this._notifyUnLink())},g.prototype._subscribeAfterLink=function(){for(const[e,t]of this._attemptedCustomSubscriptions)this.unsubscribe(e),this.subscribe(e,t)},g.prototype.subscribe=function(e,t){if(this._widgetLink){let n=this._getFeature(this._eventsConfig.eventsToSubscribe,e);if(this._attemptedCustomSubscriptions.set(e,t),this._matchingFeatures.includes(n))return this._logger.debug(`Subscribe Widget Link ${e} of feature ${n} in widget ${widget.id}`),this._widgetLink.subscribe(e,t)}},g.prototype.unsubscribe=function(e){if(this._widgetLink)return this._widgetLink.unsubscribe(e)},g.prototype.publish=function(e,t){if(this._widgetLink&&this._widgetLink.getLinked().length>0){let n=this._getFeature(this._eventsConfig.eventsToPublish,e);this._matchingFeatures.includes(n)&&(this._logger.debug(`Publish Widget Link ${e} of feature ${n} in widget ${widget.id}`),this._widgetLink.publish(e,t))}},g.prototype.setSourceWidgetId=function(e){t.setSourceWidgetId(e)},g.prototype.getSourceWidgetId=function(){return t.getSourceWidgetId()},g.prototype.isLinked=function(){let e,t=!1;return this._widgetLink&&(e=this._widgetLink.getLinked(),t=!!(e&&e.length>0)),t},u||(u=new g)})),define("DS/DELWebComponentManager/DELWebTypesUtil",["DS/DELWebComponentManager/DELWebComponentManager","DS/Logger/Logger"],(function(e,t){"use strict";const n=Object.freeze({PROCESS:"PROCESS",RESOURCE:"RESOURCE",PRODUCT:"PRODUCT",MBOM:"MBOM"}),i=Object.freeze({DELLmiPPRSystemReference:n.PROCESS,DELFmiFunctionReference:n.MBOM,"interfaces/Resource":n.RESOURCE,VPMReference:n.PRODUCT,DELLmiHeaderWorkPlanReference:n.PROCESS}),o=["DELWkiInstructionReference","DELWkiSignOffReference","DELWkiAlertReference","DELWkiDataCollectPlanReference","DELWkiDataCollectChecklistReference","DELWkiDataCollectReference"],r="taxonomies";return{PPRTYPES:n,getPPRType:function(e){var t;if(e){e=UWA.is(e,"array")?e.join("/"):e;for(const n of Object.keys(i))if(e.contains(n)){t=i[n];break}}return t},getTaxonomies:function(n){return e.getComponent("Utils").getAttributeForIds(n,[r]).then((function(e){var t={};if(e)for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]&&UWA.is(e[n][r],"array")?e[n][r].join("/"):e[n][r]);return t})).fail((function(e){t.debug(e),t.error("Error occurred while fetching taxonomies for id ",n)}))},isWKIType:function(e){return o.indexOf(e)>-1}}}));