define("DS/MPFAddressModel/AddressDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],(function(e,t){"use strict";return t.extend({init:function(e){this._parent(e,"/mdpeoplecompany/postal-addresses")},urlGet:function(e){return this._parent(e,{expand:["country"]})}})})),define("DS/MPFAddressModel/AddressModel",["DS/MPFModel/MPFModel","DS/MPFModel/ModelValidator","DS/MPFUtils/StringUtils","i18n!DS/MPFAddressModel/assets/nls/AddressModel"],((e,t,r,s)=>{"use strict";const o=Object.freeze({LINE0:"addressLine0",LINE1:"addressLine1",LINE2:"addressLine2",LINE3:"addressLine3",LINE4:"addressLine4",CITY:"city",COUNTY:"county",STATE:"state",POSTAL_CODE:"postalCode",COUNTRY:"country",IS_SHIP_TO:"isShipTo",IS_BILL_TO:"isBillTo",PHONE_NUMBER:"phoneNumber",GST_ID:"gstId",SPECIAL_ECONOMIC_ZONE:"specialEconomicZone"}),n=Object.freeze({[o.LINE1]:"",[o.LINE2]:"",[o.LINE3]:"",[o.LINE4]:"",[o.CITY]:"",[o.COUNTY]:"",[o.STATE]:"",[o.POSTAL_CODE]:"",[o.COUNTRY]:"DEFAULT",[o.IS_SHIP_TO]:"",[o.IS_BILL_TO]:""}),d=e.extend({setup(e,r){this.constraints=r.constraints||null,this.isCompanyAddress=!0===r.isCompanyAddress,this._parent(e,r),this.validator=new t({model:this,keyAttribute:o.COUNTRY})},defaults:n,parse(e){const t=e.country;return"object"==typeof t?e.country=t["Country Code (3 Letter)"]:"string"==typeof t&&(e.country=t.split("/").pop()),e.postalCode=e.zipcode,delete e.zipcode,e},toJSON(e){const t=this._parent(e);return t.zipcode=t.postalCode,delete t.postalCode,delete t.parentResourceId,t},validate(e){let o=this.validator.validate(e);if(e&&"JPN"===this.getCountry()){let n;"string"==typeof e?n=[e]:Array.isArray(e)?n=e:"object"==typeof e&&(n=Object.keys(e));for(const e of n){const n=this.get(e);n&&r.hasJapaneseChar(n)&&(o||(o=[]),o.push({field:e,errorType:t.ErrorTypes.INVALID,message:s.get("japaneseCharsNotSupportedError")}))}}return o},isEmpty(){const e=this.omit();return 0===Object.keys(e).filter((t=>{const r=e[t],s=void 0!==r,n=null!==r,d=""!==r,i=!(t===o.COUNTRY&&"DEFAULT"===r);return s&&n&&d&&i})).length},isShipTo(){return"TRUE"===this.get(o.IS_SHIP_TO)},isBillTo(){return"TRUE"===this.get(o.IS_BILL_TO)},getLine1(){return this.get(o.LINE1)},getLine2(){return this.get(o.LINE2)},getLine3(){return this.get(o.LINE3)},getLine4(){return this.get(o.LINE4)},getCity(){return this.get(o.CITY)},getCounty(){return this.get(o.COUNTY)},getState(){return this.get(o.STATE)},getPostalCode(){return this.get(o.POSTAL_CODE)},getCountry(){return this.get(o.COUNTRY)},hasCountry(){const e=this.getCountry();return e&&e!==n[o.COUNTRY]}});return d.Fields=Object.freeze(o),d})),define("DS/MPFAddressModel/AddressSaveError",[],(function(){"use strict";function e(t,r,s){var o=new Error(t,r,s);return Object.setPrototypeOf(o,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(o,e),o}return e.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,Error):e.__proto__=Error,e})),define("DS/MPFAddressModel/PersonAddressDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],(function(e,t){"use strict";return t.extend({init:function(e,t){this._parent(e,"/mdpeople/people/{0}/postal-addresses",t)},buildPath:function(t){return e.String.format(this.resourcePath,t.parentResourceId)},urlPut:t.delegate,doPut:t.delegate})})),define("DS/MPFAddressModel/PublicAddressDataProxy",["DS/MPFError/NotImplementedError","DS/MPFDataProxy/DataProxy"],(function(e,t){"use strict";return t.extend({init:function(e){this._parent(e,"/mdpeoplecompany/public/postal-addresses")},urlPost:e.emit,urlPut:e.emit,urlDelete:e.emit,urlPatch:e.emit,doPost:e.emit,doPut:e.emit,doDelete:e.emit,doPatch:e.emit})})),define("DS/MPFAddressModel/MeAddressDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],(function(e,t){"use strict";return t.extend({init:function(e,t){this._parent(e,"/me/postal-addresses",t)},urlDelete:t.delegate,doDelete:t.delegate})})),define("DS/MPFAddressModel/CompanyAddressDataProxy",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFAddressModel/AddressDataProxy"],(function(e,t,r){"use strict";return t.extend({init:function(e,t){this._parent(e,"/mdpeoplecompany/companies/{0}/postal-addresses",t)},buildPath:function(t){const r=t.parentResourceId||t.collection.parentResourceId;return e.format(this.resourcePath,r)},urlGet:function(e){return this._parent(e,{expand:["country"]})},urlPut:t.delegate,urlPatch:t.delegate,urlDelete:t.delegate,doDelete:t.delegate})})),define("DS/MPFAddressModel/AddressCollection",["DS/MPFModel/MPFCollection","DS/MPFAddressModel/AddressModel"],(function(e,t){"use strict";return e.extend({model:t,setup:function(e,t){this.constraints=t.constraints||null,this._parent(e,t)},create:function(e,t){return(t=t||{}).constraints=this.constraints,e.parentResourceId=this.companyId,this._parent(e,t)},hasBillingAddresses:function(){return this.some((function(e){return e.isBillTo()}))},getBillingAddresses:function(e={}){return this.filter((function(t){return t.isBillTo()&&(!e.country||t.getCountry()===e.country)&&(!e.omitNew||!t.isNew())}))}})})),define("DS/MPFAddressModel/ShopAddressDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFAddressModel/AddressDataProxy","DS/MPFError/NotImplementedError"],(function(e,t,r,s){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/shops/{0}/postal-addresses?expand=country",new r(e))},urlGet:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId||t.collection.parentResourceId))},urlPost:function(t){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId||t.collection.parentResourceId))},urlDelete:s.emit,urlPut:s.emit})})),define("DS/MPFAddressModel/AddressFactory",["UWA/Core","UWA/Promise","DS/MPFModelFactory/Factory","DS/MPFAddressModel/AddressModel","DS/MPFAddressModel/AddressCollection","DS/MPFAddressConstraintsModel/AddressConstraintsCollection","DS/MPFAddressModel/AddressDataProxy","DS/MPFAddressModel/CompanyAddressDataProxy","DS/MPFAddressConstraintsModel/AddressConstraintsDataProxy","DS/MPFAddressModel/MeAddressDataProxy","DS/MPFAddressModel/PersonAddressDataProxy","DS/MPFAddressModel/ShopAddressDataProxy","DS/MPFAddressModel/PublicAddressDataProxy"],(function(e,t,r,s,o,n,d,i,a,c,u,l,P){"use strict";const h=Object.freeze({COMPANY:"company",ME:"me",PERSON:"person",SHOP:"shop",ADDRESS:"address",CONSTRAINTS:"constraints",PUBLIC:"public"}),S=r.extend({init:function(e,t){t=t||{},this._parent(e,t),this.addressesConstraints=t.constraints||new n([],{dataProxy:this.getDataProxy(h.CONSTRAINTS)})},whenReady:function(){return this.addressesConstraints.size()>0?t.resolve(this.addressesConstraints):this.addressesConstraints.fetchPromise()},getConstraints:function(){return this.addressesConstraints},createModel:function(e,t,r){return e=e||h.ADDRESS,(r=r||{}).constraints=this.addressesConstraints,this._parent(s,e,t,r)},createCollection:function(e,t,r){return e=e||h.ADDRESS,(r=r||{}).modelDataProxy=this.getDataProxy(h.ADDRESS),r.constraints=this.addressesConstraints,this._parent(o,e,t,r)},getDataProxy:function(e){let t=null;return e===h.COMPANY||"companyAddress"===e?(this.dataProxies[h.COMPANY]=this.dataProxies[h.COMPANY]||new i(this.connector,this.getDataProxy("address")),t=this.dataProxies[h.COMPANY]):e===h.ADDRESS?(this.dataProxies[h.ADDRESS]=this.dataProxies[h.ADDRESS]||new d(this.connector),t=this.dataProxies[h.ADDRESS]):e===h.CONSTRAINTS?(this.dataProxies[h.CONSTRAINTS]=this.dataProxies[h.CONSTRAINTS]||new a(this.connector),t=this.dataProxies[h.CONSTRAINTS]):e===h.ME?(this.dataProxies[h.ME]=this.dataProxies[h.ME]||new c(this.connector,this.getDataProxy("address")),t=this.dataProxies[h.ME]):e===h.PERSON?(this.dataProxies[h.PERSON]=this.dataProxies[h.PERSON]||new u(this.connector,this.getDataProxy("address")),t=this.dataProxies[h.PERSON]):e===h.SHOP?(this.dataProxies[h.SHOP]=this.dataProxies[h.SHOP]||new l(this.connector),t=this.dataProxies[h.SHOP]):e===h.PUBLIC&&(this.dataProxies[h.PUBLIC]=this.dataProxies[h.PUBLIC]||new P(this.connector),t=this.dataProxies[h.PUBLIC]),t}});return S.Types=Object.freeze(h),S}));