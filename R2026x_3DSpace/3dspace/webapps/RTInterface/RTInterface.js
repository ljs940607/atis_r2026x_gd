function murmurhash3_32_gc(e,n){var t,c,r,o,a,i,s,l;for(t=3&e.length,c=e.length-t,r=n,a=3432918353,i=461845907,l=0;l<c;)s=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,r=27492+(65535&(o=5*(65535&(r=(r^=s=(65535&(s=(s=(65535&s)*a+(((s>>>16)*a&65535)<<16)&4294967295)<<15|s>>>17))*i+(((s>>>16)*i&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(s=0,t){case 3:s^=(255&e.charCodeAt(l+2))<<16;case 2:s^=(255&e.charCodeAt(l+1))<<8;case 1:r^=s=(65535&(s=(s=(65535&(s^=255&e.charCodeAt(l)))*a+(((s>>>16)*a&65535)<<16)&4294967295)<<15|s>>>17))*i+(((s>>>16)*i&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}define("DS/RTInterface/murmurhash3_gc",[],(function(){return murmurhash3_32_gc})),define("DS/RTInterface/drivers/PAPI_driver",["DS/PlatformAPI/PlatformAPI","DS/RTProxyDriver/RTLogger","DS/RTInterface/murmurhash3_gc"],(function(e,n,t){"use strict";const c="towidgetim.ds.com";function r(e){try{return Array.isArray(e)?JSON.stringify(e.filter((e=>e)).map((e=>r(e))).sort()):"object"==typeof e&&null!==e?Object.keys(e).sort().map((n=>"TxID"!=n&&e[n]&&"RTInterface"!=n?`${n}:${r(e[n])}`:null)).filter((e=>e)).join("|"):t(e)}catch(e){return console.error(e)}}return{connected:!1,nextConnectIsReconnect:!1,lastDisconnectTime:0,lastReconnectTime:0,cache:[],onReconnect:[],onFirstReconnect:[],onConnect:[],onDisconnect:[],tenant:null,init:function(){e.subscribe(c,(e=>{switch(n.RTInterface("event received - event:"+e&&e.evenement),e.evenement){case"CONNECTED":if(this.connected=!0,this.lastConnectTime=Date.now(),this.flushCache(),this.nextConnectIsReconnect){if(this.onReconnect.length>0)for(const e of this.onReconnect)e(this.lastDisconnectTime);this.nextConnectIsReconnect=!1,this.lastReconnectTime=Date.now()}else if(this.onFirstReconnect.length>0)for(const e of this.onFirstReconnect)e(this.lastDisconnectTime);if(this.onConnect.length>0)for(const e of this.onConnect)e(this.lastDisconnectTime);break;case"DISCONNECTED":if(this.connected=!1,this.nextConnectIsReconnect=!0,this.lastDisconnectTime=Date.now(),this.onDisconnect.length>0)for(const e of this.onDisconnect)e(this.lastConnectTime)}})),e.publish("fromwidgetim.ds.com",{evenement:"GETLOGINOKDATA"})},isConnected:function(){return this.connected},getTenant:function(){return this.tenant||(this.tenant=e.getTenant()),this.tenant},addCallbacks:function(t,r,o,a){const i=o||(r?function(e){return"towidget."+e.toLowerCase()+".im.ds.com"}(r):c);return e.subscribe(i,(function(e){if(!e)return console.error("[RTInterface] addCallbacks - error: no data received from server");if(n.RTInterface("data received on channel: "+i),n.RTInterface(e),!a||e.evenement==a)for(let n of t)n(e)})),!0},addReconnectCallback:function(e){return this.onReconnect.push(e),!0},addDisconnectCallback:function(e){return this.onDisconnect.push(e),!0},addFirstConnectCallback:function(e){return this.onFirstReconnect.push(e),!0},addConnectCallback:function(e){return this.onConnect.push(e),!0},send:function(t,c){n.RTInterface("data to send - action: "+t.action),t.tenant=t.tenant||this.getTenant(),n.RTInterface(t);const o=c||"toRTC.im.ds.com";if(this.isConnected())e.publish(o,t);else{if(t&&t.data&&t.data.RTInterface&&t.data.RTInterface.preventDuplication){const e=r(t),n=e&&this.cache.find((n=>n.hash==e));if(e){if(n)return console.warn("RTInterface prevents sending twice the same event while disconnected."),n;this.cache.push({data:t,channel:o,hash:e})}else console.error("RTInterface failed to create checkum, then bypass preventDuplication."),t.RTInterface.preventDuplication=!1}else this.cache.push({data:t,channel:o});e.publish("reliveWebsocket.im.ds.com")}return t},flushCache:function(){if(0==this.cache.length)return n.RTInterface("cache is empty");for(;this.cache.length>0;){if(!this.isConnected())return n.RTInterface("connection lost, unable to continue flushing cache");let t=this.cache.shift();n.RTInterface("flushing cache - data to send - action: "+t.data.action),n.RTInterface(t.data),e.publish(t.channel,t.data)}this.tenant=null}}})),define("DS/RTInterface/index",["DS/RTInterface/drivers/PAPI_driver","DS/RTProxyDriver/RTLogger"],(function(e,n){"use strict";n.addLevel("RTInterface","magenta"),n.RTInterface("load");const t="missing callbacks or platformId or channel",c="callback is not a function",r="missing data";return{_init:function(){n.RTInterface("driver init"),e.init()},isConnected:function(){return e.isConnected()},addCallback:function(e,t,c,r){return n.RTInterface("addCallback"),this.addCallbacks([e],t,c,r)},addCallbacks:function(r,o,a,i){if(n.RTInterface("addCallbacks - platformId: "+o),!r||!Array.isArray(r)||!r.length)return console.error("[RTInterface] addCallbacks - error: "+t),{error:t};for(let e of r)if("function"!=typeof e)return console.error("[RTInterface] addCallbacks - error: "+c),{error:c};return e.addCallbacks(r,o,a,i)},addReconnectCallback:function(n){return n&&"function"==typeof n?e.addReconnectCallback(n):(console.error("[RTInterface] addReconnectCallback - error: "+c),{error:c})},addFirstConnectCallback:function(n){return n&&"function"==typeof n?e.addFirstConnectCallback(n):(console.error("[RTInterface] addFirstConnectCallback - error: "+c),{error:c})},addDisconnectCallback:function(n){return n&&"function"==typeof n?e.addDisconnectCallback(n):(console.error("[RTInterface] addDisconnectCallback - error: "+c),{error:c})},addConnectCallback:function(n){return n&&"function"==typeof n?e.addConnectCallback(n):(console.error("[RTInterface] addConnectCallback - error: "+c),{error:c})},_generateTxID:e=>Date.now()+"-r"+Math.floor(1e3*Math.random())+"-"+(e||"noAction"),send:function(t,c){return n.RTInterface("send - data: "+t),t?(t.TxID=this._generateTxID(t.action),e.send(t,c),t):(console.error("[RTInterface] send - error: "+r),{error:r})},_getTxIDEventName:(e,n)=>n?`TxID-${e}-${n}`:`TxID-${e}`,_listenTxIDEvent:function(e,n,t){const c=this._getTxIDEventName(e,n),r=(e,n)=>{document.removeEventListener(c,e),clearTimeout(n)};return new Promise((function(e,n){let o;const a=setTimeout((()=>{r(o,a),n(new Error("RTInterface_requestTimeout"))}),t||1e4);o=t=>{r(o,a),t.detail&&t.detail.error?n(t.detail.error):e(t.detail)},document.addEventListener(c,o)}))},sendAsync:function(e,n,t,c){const r=this.send(e,t);return this._listenTxIDEvent(r.TxID,n,c)},triggerTxIDEvent:function(e,n,t,c){const r=new CustomEvent(this._getTxIDEventName(e,c),{detail:t?{error:t}:n});document.dispatchEvent(r)}}})),define("DS/RTInterface/RTInterface",["DS/RTInterface/index"],(function(e){"use strict";return document.RTInterface||(e._init(),document.RTInterface=e),document.RTInterface}));