var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebExperienceBase/VCXComponentOccurrenceExperience",["require","exports","DS/VCXWebComponents/VCXWebComponentOccurrence"],(function(e,t,r){"use strict";r=__importDefault(r);class i extends r.default{constructor(){super(),this._tooltip="$(##Actor.Name)",this._hyperlinkID=-1,this._eFreeze=0}set tooltip(e){this._tooltip=e}get tooltip(){return this._tooltip}set hyperlinkID(e){this._hyperlinkID=e}get hyperlinkID(){return this._hyperlinkID}set eFreeze(e){this._eFreeze=e}get eFreeze(){return this._eFreeze}}return Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentOccurrenceExperience"}}),i})),define("DS/VCXWebExperienceBase/VCXWebBaseKernelTools",[],(function(){"use strict";Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null===this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return!1;for(var n=0|t,o=Math.max(n>=0?n:i-Math.abs(n),0);o<i;){if(r[o]===e)return!0;o++}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)})})),define("DS/VCXWebExperienceBase/VCXSceneGraphOverridesServices",["DS/SceneGraphOverrides/SceneGraphOverrideSet","DS/Visualization/IdPath"],(function(e,t){"use strict";return{createAndPushSceneGraphOverrideSet:function(t,r,i){var n=null;if(i||(i=t.getManager("VCXContextManager").getRootNode()),i&&(r||(r=t.getManager("VCXContextManager").getMainViewer()),r)){var o=r.getSceneGraphOverrideSetManager();let t;window.widget&&widget.enopadViewer&&(t="rootBag"),n=new e(i,t),o.pushSceneGraphOverrideSet(n)}return n},removeSceneGraphOverrideSet:function(e,t,r){var i=!1;if(!e||!t)return i;if(r);else r=e.getManager("VCXContextManager").getMainViewer();r&&(r.getSceneGraphOverrideSetManager().removeSceneGraphOverrideSet(t),i=!0);return i},getSceneGraphOverride:function(e,r,i){var n=null;if(e)if(r){const i=new t(["rootBag",...r]),o=e.getOverridesFromIdPath(i);(n=o&&o[0])||(n=e.createIdPathOverride(i))}else(n=e.getUniqueOverrideFromPathElement(i))||(n=e.createOverride(i));return n}}})),define("DS/VCXWebExperienceBase/VCXBaseDictionary",[],(function(){"use strict";var e={VCXComponentOccurrenceExt:{VCXIModifiable:"DS/VCXWebModifiablesImpl/VCXModifiableOccurrence",VCXIContextualContent:"DS/VCXWebKernel/VCXContextualContentOccurenceExt",VCXIModifiableFormatPainter:"DS/VCXWebExperienceBase/VCXModifiableOccurrenceExt"},VCXComponentOccurrenceExperience:{VCXIContextualContent:"DS/VCXWebKernel/VCXContextualContentOccurenceExperience"},VCXWebComponentOccurrence:{VCXIModifiable:"DS/VCXWebModifiablesImpl/VCXModifiableOccurrence",VCXIModifiableView:"DS/VCXWebModifiablesImpl/VCXModifiableViewOccurrence",VCXIVisibility:"DS/VCXWebVisibilityImpl/VCXVisibilityOccurrence",VCXIModelNavigable:"DS/WebApplicationBase/VCXAModelNavigable",W3AISGNodeHolder:"DS/WebApplicationBase/W3AASGNodeHolder"},VCXScenario:{VCXIModifiable:"DS/VCXWebModifiablesImpl/VCXModifiableScenario",VCXIModifiableView:"DS/VCXWebModifiablesImpl/VCXModifiableViewScenario",VCXIReadiness:"DS/WebApplicationBase/VCXAReadiness"},VCXScenarioSequence:{VCXIModifiable:"DS/VCXWebSequenceManager/VCXModifiableSequence",VCXIModifiableView:"DS/VCXWebModifiables/VCXModifiableView",VCXISensible:"DS/VCXWebComposer/VCXASensible"},VCXContextManager:{W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXAnalyticsTrackerBaseManager:{W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXScenarioManager:{VCXIModifiable:"DS/VCXWebScenarioManager/VCXModifiableScenarioManager",VCXIModifiableView:"DS/VCXWebModifiables/VCXModifiableView",W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXSequenceManager:{W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXDocManager:{VCXIModifiable:"DS/VCXWebModifiablesImpl/VCXModifiableDocManager",VCXIModifiableView:"DS/VCXWebModifiables/VCXModifiableView",W3AIManager:"DS/WebApplicationBase/W3AAManager",VCXIReadiness:"DS/WebApplicationBase/VCXAReadiness"},VCXCommandManager:{VCXIModifiable:"DS/VCXWebModifiablesImpl/VCXModifiableCommandManager",VCXIModifiableView:"DS/VCXWebModifiables/VCXModifiableView",W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXMetaPropertyManager:{W3AIManager:"DS/WebApplicationBase/W3AAManager",VCXIModifiable:"DS/VCXWebModifiables/VCXMetaPropertyManagerModifiable"},VCXLinkedPropertyManager:{W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXUnitManager:{VCXIModifiable:"DS/VCXWebUnits/VCXUnitManagerModifiable",VCXIModifiableView:"DS/VCXWebModifiables/VCXModifiableView",W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXModelChangeListener:{W3AIManager:"DS/WebApplicationBase/W3AAManager"},VCXPlayManager:{W3AIManager:"DS/WebApplicationBase/W3AAManager",VCXIModifiable:"DS/VCXWebPlayBase/VCXPlayManagerModifiable"}},t={VCXIModifiable:"DS/VCXWebModifiables/VCXIModifiable",VCXIModifiableView:"DS/VCXWebModifiables/VCXIModifiableView",VCXIVisibility:"DS/VCXWebVisibility/VCXIVisibility",W3AISGNodeHolder:"DS/WebApplicationBase/W3AISGNodeHolder",W3AIManager:"DS/WebApplicationBase/W3AIManager",VCXIModelNavigable:"DS/WebApplicationBase/VCXIModelNavigable",VCXIContextualContent:"DS/VCXWebKernel/VCXIContextualContent",VCXIModifiableFormatPainter:"DS/VCXWebModifiables/VCXIModifiableFormatPainter",VCXIReadiness:"DS/WebApplicationBase/VCXIReadiness"},r={VCXScenario:"DS/VCXKeyFramer/VCXScenario",VCXScenarioSequence:"DS/VCXWebSequenceManager/VCXScenarioSequence",VCXWebComponentOccurrence:"DS/VCXWebComponents/VCXWebComponentOccurrence",VCXDocManager:"DS/VCXWebDocManager/VCXDocManager",VCXScenarioManager:"DS/VCXWebScenarioManager/VCXScenarioManager",VCXSequenceManager:"DS/VCXWebSequenceManager/VCXSequenceManager",VCXCommandManager:"DS/VCXWebKernelCommands/VCXCommandManager",VCXContextManager:"DS/VCXWebExperienceBase/VCXContextManager",VCXAnalyticsTrackerBaseManager:"DS/VCXWebKernelTools/VCXAnalyticsTrackerBaseManager",VCXMetaPropertyManager:"DS/VCXWebModifiables/VCXMetaPropertyManager",VCXLinkedPropertyManager:"DS/VCXWebModifiables/VCXLinkedPropertyManager",VCXUnitManager:"DS/VCXWebUnits/VCXUnitManager",VCXModelChangeListener:"DS/VCXWebModifiables/VCXModelChangeListener",VCXPlayManager:"DS/VCXWebPlayBase/VCXPlayManager"};return{GetDictionary:function(){return{interfaces:t,components:r,extensions:e}}}})),define("DS/VCXWebExperienceBase/VCXPathElementTools",["UWA/Class","DS/Visualization/PathElement"],(function(e,t){"use strict";return e.singleton({getMesh3dPathElements:function(e,r){var i=[];if(!e.externalPath||!e.externalPath.length)return i;"Mesh3D"===e.getLastElement().getNodeType()&&i.push(e);for(var n=new t,o=0;o<e.externalPath.length;++o)n.addElement(e.externalPath[o]);var a=n.getLastElement();for(o=0;o<a.children.length;++o){for(var s=!0,l=0;l<r.length;++l)if(r[l]===a.children[o].productType){s=!1;break}if(s){var c=n.clone();c.addElement(a.children[o]);var p=this.getMesh3dPathElements(c,r);p&&p.length&&(i=i.concat(p))}}return i},getLeafNameOfPathElement:function(e){if(!e)return"";var t=e.externalPath.length-1;if(t<0)return"";do{var r=e.externalPath[t].getName();if(r&&""!==r)return r;t-=1}while(t>0);return""},buildPathElement:function(e,t){if(!e)return null;for(var r=[],i=t;i&&e.getLastElement()&&i.id!==e.getLastElement().id;)r.push(i),i=i.parents[0];for(var n=e.clone(),o=r.length-1;o>=0;--o)n.addElement(r[o]);return n}})})),define("DS/VCXWebExperienceBase/VCXComponentCreationHelper",["require","exports"],(function(e,t){"use strict";return class{static async CreateComponent(e,t,r,i=!1){if(e.getManager("VCXCAT3DXModelManager")&&e.getManager("VCXContextManager").getContextFromName("Cat3DXIntegration")&&!i){var n=e.getManager("VCXContextManager").getRootComponent();if(!n)throw new Error("Missing father experience!");try{return e.getManager("VCXEWSManager")?.GetCAT3DXModel().CreateActor(t,r,n)}catch(t){if(console.warn("Your component creation failed, add it to the .feat / domain..."),!e.odt)throw t;console.warn("It's working only on ODT context with a fallback with the local factory !!!")}}let o=e.Factory?.BuildComponent(t);if(!o)throw new Error("Error while creating component with local factory");return o}}})),define("DS/VCXWebExperienceBase/VCXModifiableViewOccurrenceExperience",["DS/VCXWebModifiablesImpl/VCXModifiableViewOccurrence","DS/VCXWebProperties/VCXPropertyGroup","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],(function(e,t,r){"use strict";return e.extend({init:function(){this._parent()},getPropertyGroups:function(e){e||(e={}),this._parent(e);var i=this.getGroupPropertiesOrders();e["Group.Actions"]||(e["Group.Actions"]=new t({groupID:"Group.Actions"}),e["Group.Actions"].i18nGroup=r),e["Group.Actions"].setPropertiesOrder(i["Group.Actions"]),e["Group.Actions"].priority=50,e["Group.Actions"].addProperty({propertyName:"Actor.Hyperlink",i18n:r});var n=this.GetObject().QueryInterface("VCXIPulseBehavior");return n&&n.getPropertyGroups(e),e},getGroupPropertiesOrders:function(){var e={"Group.Actions":["Actor.Hyperlink"]},t=this.GetObject().QueryInterface("VCXIPulseBehavior");t&&(e["Group.Effect"]=t.getGroupPropertiesOrders());var r=this._parent()||{};for(const t in e)r[t]=e[t];return r}})})),require(["DS/VCXWebExperienceBase/VCXWebBaseKernelTools"],(function(e){})),define("DS/VCXWebExperienceBase/VCXExperienceBase",["DS/WebApplicationBase/WebApplicationBase","DS/VCXWebExperienceBase/VCXBaseDictionary","DS/VCXWebIO/VCXUUIDServices"],(function(e,t,r){"use strict";var i=e.extend({init:function(){this._parent(),this._id=-1,this._parentBase=null,this._childrenBase={},this._childrenBase.idx=0,this._childrenBase.active=null,this._childrenBase.all=[],this._helperLifecycle=null,this.experienceID=this.GenerateUUID()},InterClean:function(){this.CleanManagers(0)},CleanManagers:function(e){const t=this._ManagerSet&&this._ManagerSet._ManagerSet&&Object.keys(this._ManagerSet._ManagerSet);for(let r=0;r<t.length;r++)this._ManagerSet._ManagerSet[t[r]].GetObject().GetExpBaseMode()!==e&&(this._ManagerSet.removeManager(t[r],!0),this.ComponentsMap.RemoveComponent(t[r]+"ID"))},SetFactoryFromParent:function(e){this._parentBase&&this._parentBase.Factory&&(e?(this._parentBase.Factory.experienceBaseToStore=this,this.Factory=this._parentBase.Factory,this.ExtensionServerTable=this._parentBase.ExtensionServerTable):this._parentBase.Factory.experienceBaseToStore=null)},SetHelperLifecycle:function(e){this._helperLifecycle=e},AddEventHelperLifecycle:function(e,t,r){this._helperLifecycle?this._helperLifecycle.addNewEvent(e,t,r):console.warn("[DEBUG MODE] No helper class is found")},AddExperienceBaseChild:function(e){e._id=this._childrenBase.idx,this._childrenBase.idx++,this._childrenBase.all.push(e)},RemoveExperienceBaseChild:function(e){const t=e._id;t>=0&&t<this._childrenBase.idx&&(this._childrenBase.all[t]=null)},GetActiveChild:function(){return this._childrenBase&&this._childrenBase.active?this._childrenBase.active:null},CheckNoChildYet:function(){return 0===this._childrenBase.idx},GenerateUUID:function(){return r.generateUUID()},BuildAddManagers:function(e){const t=Object.keys(e);let i,n,o=[];for(let a=0;a<t.length;a++){if(n=e[t[a]],i=n.hasOwnProperty("name")?this.Factory.BuildComponent(n.name):this.Factory.BuildComponent(t[a]),!i){console.error("Can't create manager "+t[a]);continue}i.SetID(t[a]+"ID"),n.hasOwnProperty("persistency")?i.SetPersistency(n.persistency):i.SetPersistency(1),n.hasOwnProperty("override")&&this._ManagerSet.getManager(n.override)&&this._ManagerSet.removeManager(n.override),n.hasOwnProperty("mode")?i.SetExpBaseMode(n.mode):i.SetExpBaseMode(1);r.generateUUID();n.hasOwnProperty("initPhase")?this._ManagerSet.addManager(t[a],i,n.initPhase):this._ManagerSet.addManager(t[a],i),o.push(i)}for(let e of o)this.ComponentsMap.AddComponent(e);return o},AddDictionaries:async function(e){await this.AddDictionaryDescription(t.GetDictionary()),e&&(e._experienceBase=this,e.addDictionaries&&await e.addDictionaries())},initializePhaseZero:async function(e,t){t&&await this.AddDictionaries(e);let r={VCXCommandManager:{persistency:1,mode:2},VCXContextManager:{persistency:1,mode:2}};return this.BuildAddManagers(r),this._bModifiablesAdvancedProperties=!1,0},initializePhaseOne:async function(e){return this.BuildAddManagers({VCXCommandManager:{persistency:1,mode:2},VCXScenarioManager:{persistency:1},VCXDocManager:{persistency:1},VCXMetaPropertyManager:{persistency:1},VCXContextManager:{persistency:1,mode:2},VCXLinkedPropertyManager:{persistency:1},VCXModelChangeListener:{persistency:1},VCXSequenceManager:{persistency:1,mode:1},VCXUnitManager:{persistency:1,mode:1}}),this._bModifiablesAdvancedProperties=!1,0},initializeDefault:async function(e){await this.AddDictionaries(e);return this.BuildAddManagers({VCXCommandManager:{persistency:1},VCXScenarioManager:{persistency:1},VCXDocManager:{persistency:1},VCXContextManager:{persistency:1,mode:2},VCXMetaPropertyManager:{persistency:1},VCXLinkedPropertyManager:{persistency:1},VCXUnitManager:{persistency:1,mode:0},VCXModelChangeListener:{persistency:1},VCXSequenceManager:{persistency:1}}),this._bModifiablesAdvancedProperties=!1,0},initialize:async function(e,t){e.supportWebApplicationBase?this._parentBase?await this.initializePhaseOne(e):await this.initializePhaseZero(e,t):await this.initializeDefault(e)},Clean:function(){this._parent(),this._helperLifecycle&&this._helperLifecycle.unInitialize&&this._helperLifecycle.unInitialize()},getManager:function(e){if(this._ManagerSet){let t=this._ManagerSet&&this._ManagerSet.getManager(e);if(t)return t;if(this._parentBase&&(t=this._parentBase._ManagerSet&&this._parentBase._ManagerSet.getManager(e),t))return t;if(this._childrenBase.active&&(t=this._childrenBase.active._ManagerSet&&this._childrenBase.active._ManagerSet.getManager(e),t))return t}return null}});return Object.defineProperty(i.prototype,"ModifiablesAdvancedProperties",{enumerable:!0,get:function(){return this._bModifiablesAdvancedProperties},set:function(e){this._bModifiablesAdvancedProperties=e}}),Object.defineProperty(i.prototype,"isValid",{enumerable:!0,get:function(){return this._ManagerSet&&this._ManagerSet._loopReady}}),i})),define("DS/VCXWebExperienceBase/VCXModifiableOccurrenceExperience",["DS/VCXWebModifiablesImpl/VCXModifiableOccurrence","DS/VCXWebVisu/VCXModifiablesAccess","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueHyperlinkId","DS/VCXWebProperties/VCXPropertyValueEnum","DS/WebComponentModeler/WebComponentBase","i18n!DS/VCXWebExperienceBase/assets/nls/VCXWebExperienceBase"],(function(e,t,r,i,n,o,a,s,l,c){"use strict";return e.extend({init:function(){this._parent(),this._requestedHyperlinkID=-1},OnChangeProperty:function(e,t,r){if(r||(r={}),r.fromChildClass);else if(this.OnChangePropertyBegin(e,t))return!0;const i=this.GetObject();if(i._isVolatileListeningToProperties&&i.IsKindOf("VCXVolatileComponentOccurrenceComposer")&&i.GetPersistency()===l.EPersistencyType.notPersistent&&!i.isRegisteredToPersistent()){let r=this.GetProperty(e);r.GetPropertyInfo().IsPersistent()&&!r.GetPropertyValue().IsEqualTo(t)&&i.registerToPersistent()}switch(e){case"Actor.Hyperlink":var n=t.GetValue();return void 0!==n&&(this._requestedHyperlinkID=n),!0;case"Actor.ToolTip":var o=t.GetValue();return i.tooltip!==o&&(i.tooltip=o),!0;case"Actor.Freeze":var a=t.GetValue();return void 0!==a&&(i.eFreeze=a),!0;default:var s=!1,c=i.QueryInterface("VCXIPulseBehavior");return c&&(s=c.OnChangeProperty(e,t,r)),!!s||(r.fromChildClass=!0,this._parent(e,t,r))}return!1},OnChangePropertiesEnd:function(){let e=this.GetObject();if(e.hyperlinkID!==this._requestedHyperlinkID){e.hyperlinkID=this._requestedHyperlinkID;var t=e._experienceBase.getManager("VCXHyperlinkManager");t&&(e.hyperlinkID>=0?t.RegisterInteractableObject(this.GetObject()):t.UnRegisterInteractableObject(this.GetObject()))}return this._parent()},GetProperty:function(e){var l="._ComputedText",p=null;if("Actor.Hyperlink"===e){var d=this.GetObject(),u=new a;u.SetValue(d.hyperlinkID),(M=new i(e,0,!0,c)).SetGroupId("Group.Actions"),p=new r(M,u)}else if("Actor.ToolTip"===e){d=this.GetObject();(V=new o).SetValue(d.tooltip),(p=new r(new i(e,0,!0,c),V)).GetPropertyInfo().IsVisible()&&p.GetPropertyInfo().SetVisible(!1)}else if(e.endsWith(l)){var h=e.substring(0,e.length-14),C=this.GetProperty(h),g="";if(C){var f=C.GetPropertyValue().ToString();f&&(g=t.ValuateLinkedProperties(f,this.GetObject()._experienceBase,this.GetObject().GetID(),this.GetObject().GetID(),null))}var V=new o(g),M=new i(h,1,!1);p=new r(M,V)}else if("Actor.Freeze"===e){d=this.GetObject();var y=new s;y.SetValue(d.eFreeze);var S=new n(e,1,!1,c);S.AddOrModifyChoice(0,"Freeze.NoFreeze"),S.AddOrModifyChoice(1,"Freeze.Freeze"),S.AddOrModifyChoice(2,"Freeze.FreezeInPlay"),p=new r(S,y)}else{var m=this.GetObject().QueryInterface("VCXIPulseBehavior");m&&(p=m.GetProperty(e))}return p||(p=this._parent(e)),p},GetProperties:function(e){var t=this._parent();t.AddOrModifyProperty(this.GetProperty("Actor.ToolTip")),t.AddOrModifyProperty(this.GetProperty("Actor.Hyperlink"));var r=this.GetObject().QueryInterface("VCXIPulseBehavior");return r&&r.GetProperties(t),t}})}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebExperienceBase/VCXContextManager",["require","exports","DS/SceneGraphOverrides/SceneGraphOverrideSet","DS/Visualization/IdPath","DS/VCXWebComponents/VCXWebComponentBaseExperience","DS/CoreEvents/Events","DS/Visualization/PathElement","DS/Visualization/Node3D","DS/WebappsUtils/WebappsUtils"],(function(e,t,r,i,n,o,a,s,l){"use strict";n=__importDefault(n),o=__importDefault(o),a=__importDefault(a),s=__importDefault(s),l=__importDefault(l);class c extends n.default{constructor(){super(),this.viewers=[],this.traverseGraphMustBePerformed=!1,this._Events={},this._activeCamera=null,this._useEnopadLoader=!1,this._pRootPathElement=null,this._cRootComponent=null,this.odtPerfo=!1,this.partHasMoved=!1,this._supportedFeatures={},this._contexts={},this.useTraverseGraph=!1,this._trapSelectionPick=null,this._trapSelectionPrePick=null,this.setSupported("Debug",!1),this.setSupported("DisplayUI",!0),this.setSupported("DisplayUIAssemblyPanel",!0),this.setSupported("DisplayUIDressupsPanel",!0),this.setSupported("DisplayUIScenariosPanel",!0),this.setSupported("DisplayUIPropertiesPanel",!0),this.setSupported("DisplayUIPlay",!1),this.setSupported("SceneControlV2",!1),this.setSupported("VCXMaterialPanel",!1),this.setSupported("VCXAmbiencePanel",!1),this.setSupported("Paper",!0),this.setSupported("PaperControlV2",!1),this.setSupported("PropertyPanelV2",!0),this.setSupported("CameraDisplay",!0),this.setSupported("EnvironmentDisplay",!0),this.setSupported("ViewpointCamera",!1),this.setSupported("Produce&Share",!1),this.setSupported("Paths",!1),this.setSupported("RotateAroundPoint",!1),this.setSupported("DisplayPaperCtrlBtns",!0),this.setSupported("FrameUnboxing",!1),this.setSupported("PropAndScnPanelExpandOverride",!1),this.setSupported("ScenarioPanelExpand",!0),this.setSupported("PropertiesPanelExpand",!0),this.setSupported("VCXNewFrame",!1),this.setSupported("VCXOldFrame",!1),this.setSupported("EWS_NewCache",!1),this._rootInfos={componentType:"VCXWebComponentOccurrence",productType:"Reference3D",name:"Experience",id:"VCX_Root"},this._applicationMode=c.EApplicationMode.FILE,this.InitApplicationMode()}initialize(){this._nRootNode=null,this._nPartsNode=null,this.viewers=[]}postInitialize(){let e=this.getMainViewer();e&&("boolean"!=typeof this._trapSelectionPick&&e.picking&&(this._trapSelectionPick=Boolean(e.picking.trapSelection)),"boolean"!=typeof this._trapSelectionPrePick&&e.pPicking&&(this._trapSelectionPrePick=Boolean(e.pPicking.trapSelection))),this.InitEventListeners(),this.traverseGraphMustBePerformed=!0}getUpdatePriority(){return-8}unInitialize(){if(this._SharedSceneGraphOverrideSet){let e=this.getMainViewer();if(e){e.getSceneGraphOverrideSetManager().removeSceneGraphOverrideSet(this._SharedSceneGraphOverrideSet)}window.widget&&window.widget.enopadViewer||e?.clearScene(),this._SharedSceneGraphOverrideSet=null}if(this.UnInitEventListeners(),this._nRootNode){if(!window.widget||!window.widget.enopadViewer){let e=this._experienceBase.getManager("VCXContextManager").getMainViewer();e?.removeNode(this._nRootNode)}this._nRootNode=null,this._nPartsNode=null,this._pRootPathElement=null,this._activeCamera=null}if(this._cRootComponent){let e=this._cRootComponent.QueryInterface("VCXIModelNavigable");e&&e.clear(),this._cRootComponent=null}this._trapSelectionPick=null,this._trapSelectionPrePick=null}setContextFromName(e,t){this._contexts||(this._contexts={}),this._contexts[e]=void 0===t||t}getContextFromName(e){return this._contexts?!!this._contexts.hasOwnProperty(e)&&this._contexts[e]:(console.warn("[Context Manager] No context is stored in the context manager."),!1)}getUrlVars(e){return c.getUrlVars(e)}getMainURL(){return c.getMainURL()}setPlayerMode(){this.setContextFromName("PlayerMode")}getPlayerMode(){return this._contexts.PlayerMode}setTrapSelectionRequirements(e){e&&("boolean"==typeof e.pick&&(this._trapSelectionPick=e.pick),"boolean"==typeof e.prePick&&(this._trapSelectionPrePick=e.prePick))}getTrapSelectionRequirements(){return{pick:this._trapSelectionPick,prePick:this._trapSelectionPrePick}}setExperienceIn3DPlay(){this.setContextFromName("ExperienceIn3DPlay")}getExperienceIn3DPlay(){return this._contexts.ExperienceIn3DPlay}setExperienceInConnectedPlayer(){this.setContextFromName("ExperienceInConnectedPlayer")}getExperienceInConnectedPlayer(){return this._contexts.ExperienceInConnectedPlayer}getIfStanAlonePlayerIsInDevMode(){let e=!1;return!this.getExperienceInConnectedPlayer()&&this.getExperienceIn3DPlay()&&"true"===localStorage.getItem("DS_Composer_Player_Standalone_DevMode")&&(e=!0),e}InitEventListeners(){this._Events.VCX_PROPERTIES_CHANGED=o.default.subscribe({event:"VCX_PROPERTIES_CHANGED"},(e=>{this.renderAll()})),this._Events.VCX_MODIFIABLE_CHANGED=o.default.subscribe({event:"VCX_MODIFIABLE_CHANGED"},(()=>{this.renderAll({updateInfinitePlane:!0})}));let e=()=>{this._experienceBase.getManager("VCXVisuManager").hideDecorations("Transition",this.getMainViewer()),this.applyToViewers((function(e){e.setGroundShadowAutomaticUpdate(!1)}))},t=()=>{this.applyToViewers((function(e){e.setGroundShadowAutomaticUpdate(!0)})),this._experienceBase.getManager("VCXVisuManager").showDecorations("Transition",this.getMainViewer()),this.renderAll({updateInfinitePlane:!0})};this._Events.VCX_BEGIN_TRANSITION=o.default.subscribe({event:"VCX_BEGIN_TRANSITION"},e),this._Events.VCX_START_PLAY=o.default.subscribe({event:"VCX_START_PLAY"},e),this._Events.VCX_END_TRANSITION=o.default.subscribe({event:"VCX_END_TRANSITION"},t),this._Events.VCX_STOP_PLAY=o.default.subscribe({event:"VCX_STOP_PLAY"},t),this._Events.VCX_PAUSE_PLAY=o.default.subscribe({event:"VCX_PAUSE_PLAY"},t)}UnInitEventListeners(){for(let e of Object.keys(this._Events))o.default.unsubscribe(this._Events[e]);this._Events={}}setFrameWindow(e){void 0===this.frameWindow&&(this.frameWindow=e);let t=this.getMainViewer();t&&this.addViewer(c.MAIN_VIEWER_ID,t)}getFrameWindow(){return this.frameWindow}getContext(){return this.getFrameWindow()&&this.getFrameWindow().options&&this.getFrameWindow().options.context}getUIFrame(){return this.getFrameWindow().getUIFrame()}getViewers(){return this.viewers}addViewer(e,t){t.viewerID=e,this.viewers.push(t),o.default.publish({event:"VCX_VIEWER_ADDED",data:{viewer:t}})}removeViewer(e){for(let t=0;t<this.viewers.length;t++)if(this.viewers[t].viewerID===e)return o.default.publish({event:"VCX_VIEWER_BEFORE_REMOVED",data:{viewer:this.viewers[t]}}),void this.viewers.splice(t,1)}getViewerById(e){return this.viewers.find((t=>t.viewerID===e))}applyToViewers(e,t=!1){if(e)for(let r=0;r<this.viewers.length;r++)this.viewers[r]._isDigger?(t||this._experienceBase.ComponentsMap.GetComponentFromID(this.viewers[r]._isDigger))&&e(this.viewers[r]):e(this.viewers[r])}getMainViewer(){return this.frameWindow?this.frameWindow.getViewer():null}setActiveCamera(e){this._activeCamera=e}getActiveCamera(){if(this._activeCamera)return this._activeCamera;let e=this._experienceBase.ComponentsMap.GetComponentFromType("CXPCameraActor_Spec");if(e&&e.length>0)return this._activeCamera=e[0],e[0];let t=this._experienceBase.ComponentsMap.GetComponentFromType("VCXWebComponentCamera");return t&&t.length>0?(this._activeCamera=t[0],t[0]):null}getActiveViewport(){return this._experienceBase.ComponentsMap.GetComponentFromType("VCXViewport_Spec")[0]??null}getActiveGround(){return this._experienceBase.ComponentsMap.GetComponentFromType("VCXComponentGround")[0]??null}setEnopadLoaderUsed(e){this._useEnopadLoader=e}isEnopadLoaderUsed(){return window.widget&&window.widget.enopadViewer&&this._useEnopadLoader}getActivePartList(){return this._experienceBase.ComponentsMap.GetComponentFromType("VCXPartList_Spec")[0]??null}getActiveBOM(){return this._experienceBase.ComponentsMap.GetComponentFromType("VCXBOM_Spec")[0]??null}getActionBar(){return this.frameWindow.getActionBar()}setRootNode(e){if(!this._nRootNode||!e||this._nRootNode.id!==e.id){if(this._nRootNode=e,this._SharedSceneGraphOverrideSet){let e=this.getMainViewer();if(e){e.getSceneGraphOverrideSetManager().removeSceneGraphOverrideSet(this._SharedSceneGraphOverrideSet)}this._SharedSceneGraphOverrideSet=null}if(this.getRootComponent()){let e=this.getRootComponent()?.QueryInterface("W3AISGNodeHolder");e&&(this._pRootPathElement=new a.default([this._nRootNode]),e.setPathElement(this._pRootPathElement))}}}getRootComponent(){if(!this._cRootComponent){let e="VCX_Root",t=this.getRootComponentType();if(this._cRootComponent=this._experienceBase.Factory?.BuildComponent(t)??null,this._cRootComponent){let t;this._cRootComponent.SetPersistency(0),this._cRootComponent.SetID(e),t=this._cRootComponent.QueryInterface("VCXIModelNavigable"),t.setWorkingRoot(t),this._experienceBase.ComponentsMap.AddComponent(this._cRootComponent),o.default.publish({event:"VCX_ROOT_COMPONENT_CREATED",data:{RootComponent:this._cRootComponent}}),this.getRootNode()}}return this._cRootComponent}getRootComponentName(){let e=null,t=this.getRootComponent();if(!t)return e;let r=t.QueryInterface("VCXIModelNavigable")?.getChildren();if(!r)return null;for(let i=0;i<r.length;++i){let r=t.QueryInterface("VCXIModelNavigable")?.getChildren()[i];if(!r)continue;let n=r.QueryInterface("VCXIModifiable");if(!n)continue;let o=n.GetProperty("Actor.AssetID");if(!o)continue;let a=o.GetPropertyValue().Value;if(a&&a.lastIndexOf(".")>0){let t=a.lastIndexOf(".");e=a.substr(0,t);break}}return e}getRootComponentType(){return this._rootInfos.componentType}getRootNode(){if(!this._nRootNode){let e=new s.default;e.productType=this._rootInfos.productType,e.name=this._rootInfos.name,e.VCX_ROOT_ID=this._rootInfos.id,this.getMainViewer()?.addNode(e),this.setRootNode(e)}return this._nRootNode}getRootPathElement(){return this._pRootPathElement||this.getRootNode(),this._pRootPathElement}_extractModuleFromUrl(e){return e.split("/")[0]}_loadCssRessource(e,t){let r=document.getElementsByTagName("head")[0],i=r.getElementsByTagName("link"),n=null;for(let t=0;t<i.length;t++)if(n=i[t],n.href.includes(e)){n.disabled=!1;let[e,t]=n.href.split("?"),r=new URLSearchParams(t||"");return r.set("v",(new Date).getTime().toString()),void(n.href=`${e}?${r.toString()}`)}n=document.createElement("link"),n.type="text/css",n.rel="stylesheet",n.href=void 0!==t?l.default.getWebappsBaseUrl()+e:e,r.appendChild(n)}loadCssFile(e,t){let r=this._extractModuleFromUrl(e);this._loadCssRessource(e,t);let i=r+"/"+r+".css";i!==e&&this._loadCssRessource(i,t)}unloadCssFile(e){let t=this._extractModuleFromUrl(e);this._unloadCssRessource(e);let r=t+"/"+t+".css";r!==e&&this._unloadCssRessource(r)}_unloadCssRessource(e){let t=document.getElementsByTagName("head")[0].getElementsByTagName("link");for(let r=0;r<t.length;r++){let i=t[r];if(i.href.search(e)>-1)return void(i.disabled=!0)}}renderAll(e){this.applyToViewers((function(t){t.render(e)}))}setAllViewerSensitive(e){let t=this._experienceBase.getManager("VCXPaperManager");const r=this.getMainViewer();r?.setManipulators({activated:e,preActivate:e}),r?.currentViewpoint.setControlActive({viewpoint:e,picking:e}),t&&(t.Lock=!e)}getSharedSceneGraphOverrideSet(){if(!this._SharedSceneGraphOverrideSet){let e=this.getRootNode(),t=this.getMainViewer();if(e&&t){let i;this.isEnopadLoaderUsed()&&(i="rootBag"),this._SharedSceneGraphOverrideSet=new r(e,i),this._SharedSceneGraphOverrideSet.name="SharedPropertiesOverrideSet",t.getSceneGraphOverrideSetManager().pushSceneGraphOverrideSet(this._SharedSceneGraphOverrideSet)}}return this._SharedSceneGraphOverrideSet}getSharedSceneGraphOverride(e,t,r=!1){let n;if(e){let o=this.getSharedSceneGraphOverrideSet();if(o)if(e&&e.ids){let a;if(e.ids&&e.ids.length>2){const t=[...e.ids];r||t.pop(),a=new i(t)}else a=e;const s=o.getOverridesFromIdPath(a);n=s&&s[0],n||void 0!==t&&!t||(n=o.createIdPathOverride(a))}else n=o.getUniqueOverrideFromPathElement(e),n||void 0!==t&&!t||(n=o.createOverride(e))}return n}update(e){if(this.traverseGraphMustBePerformed&&this.useTraverseGraph){let e=this.getRootComponent();e&&e.TraverseGraph&&(e.TraverseGraph(null,null,null,0),this.traverseGraphMustBePerformed=!1),this.odtPerfo||this.renderAll()}this.odtPerfo&&this.renderAll()}postUpdate(){this.partHasMoved=!1}zoomFitAll(){this.applyToViewers((function(e){e.currentViewpoint.reframe(void 0,0)}))}setRootOptions(e){let t={componentType:!0,productType:!0,name:!0,id:!0};for(let r in e)e.hasOwnProperty(r)&&t[r]&&(this._rootInfos[r]=e[r])}CheckInputFile(e,t){let r={supported:!0};if(this.getContextFromName("Cat3DXIntegration")){let i=this.GetApplicationMode();e||0===i?e&&0===i&&(r.supported=!1,r.message="Feature not supported: open file from collabspace (file mode)."):t&&this.isSupported("Import3DXML")&&"3dxml"===t[0]||(r.supported=!1,r.message="Feature not supported: open file from disk.")}else e&&(r.supported=!1,r.message="Feature not supported: open file from collabspace (file mode).");return r}CheckInputExtension(e){let t={supported:!0},r=this.getContextFromName("ProdHighMode"),i=this.getContextFromName("PlayerMode"),n=this.getContextFromName("ExperienceIn3DPlay");return"smgxml"!==e&&"smg"!==e&&"smgs"!==e&&"smggeom"!==e&&"3dxml"!==e&&"json"!==e&&"exprd"!==e||r||i||n||(t.supported=!1,t.message="Extension not supported in CityIllustration."),"tga"===e&&(t.supported=!1,t.message="Feature not supported: creation of 2D panel with TGA image"),t}isSupported(e){let t=c.isForceSupported(e);return null!==t?t:this._supportedFeatures[e]??!1}setSupported(e,t){this._supportedFeatures[e]=void 0===t||t}getCat3DXIntegration(){return this.getContextFromName("Cat3DXIntegration")}SetApplicationMode(e){this._applicationMode=e}GetApplicationMode(){return null===this._applicationMode&&console.warn("Application mode is missing."),this._applicationMode}getUseResourcesManager(){let e=this.getUrlVars("resManager");return void 0===e||"false"!==e||(console.log("! ========== WARNING : Resources Manager desactivated ======== !"),console.log("! ========== WARNING : Resources Manager desactivated ======== !"),console.log("! ========== WARNING : Resources Manager desactivated ======== !"),!1)}InitApplicationMode(){localStorage.setItem("EWS_AuthoringV2","true");let e=this.getUrlVars("file");!window.widget||window.widget&&window.widget.isLocalMode||e?this.SetApplicationMode(c.EApplicationMode.FILE):this.SetApplicationMode(c.EApplicationMode.EMS)}IsLocalMode(){return this.GetApplicationMode()===c.EApplicationMode.FILE}IsWAFR(){return c.IsWAFR()}static IsWAFR(){return window.widget&&!!window.widget.data.afrAppId&&!!window.widget.body.querySelector(".wafr-uiframe")}static getMainURL(){let e={};window.location.href.replace(c.regexUrlVar,((t,r,i)=>{e[r]=decodeURIComponent(i)}));let t="";return e.widgetDomain?t=e.widgetDomain:e.uwaUrl&&(t=e.uwaUrl),t||(t=window.location.href),t}static getUrlVars(e){let t={};return c.getMainURL().replace(c.regexUrlVar,((e,r,i)=>{t[r]=i})),e?t[e]:t}static isForceSupported(e){let t=c.getUrlVars("_ForceSupportedFeature_");if(t){if("1"===c.getUrlVars(e)||"true"===c.getUrlVars(e))return!0;if("0"===c.getUrlVars(e)||"false"===c.getUrlVars(e))return!1}return t=localStorage.getItem(e),"1"===t||"true"===t||"0"!==t&&"false"!==t&&null}}return c.MAIN_VIEWER_ID="MainViewer",c.regexUrlVar=/[?&]+([^=&]+)=([^&]*)/gi,function(e){let t;!function(e){e[e.FILE=0]="FILE",e[e.EMS=1]="EMS"}(t=e.EApplicationMode||(e.EApplicationMode={}))}(c||(c={})),Object.defineProperty(c.prototype,"componentType",{enumerable:!0,get:()=>"VCXContextManager"}),c})),define("DS/VCXWebExperienceBase/VCXOverridesChangeServices",["DS/Visualization/ThreeJS_DS","DS/VCXWebExperienceBase/VCXPathElementTools","DS/VCXWebExperienceBase/VCXSceneGraphOverridesServices"],(function(e,t,r){"use strict";return{Ghost:function(e,i,n,o,a,s){var l=!1;let c;if(c=i?[i]:t.getMesh3dPathElements(n,["Instance3D"]),!c)return!1;void 0===o&&(o=!0),o&&void 0===a&&(a=.1),void 0===s&&(s=2);for(var p=0;p<c.length;++p){var d=r.getSceneGraphOverride(e,i,c[p]);d&&(l=!0,o&&d.setOpacity(a,!0),1===s?d.setPickability("PICKABLE"):2===s&&d.setPickability("IGNORED"))}return l},UnGhost:function(e,i,n){let o;if(o=i?[i]:t.getMesh3dPathElements(n,["Instance3D"]),!o)return!1;for(var a=0;a<o.length;++a){var s=r.getSceneGraphOverride(e,i,o[a]);s&&e.deleteOverride(s)}}}})),define("DS/VCXWebExperienceBase/VCXModifiableOccurrenceExt",["DS/VCXWebExperienceBase/VCXModifiableOccurrenceExperience","DS/VCXWebComponents/VCXWebComponentOccurrence","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueFloat","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueBoolean","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],(function(e,t,r,i,n,o,a,s,l,c){"use strict";return e.extend({OnChangeProperty:function(e,t,r){if(r||(r={}),r.fromChildClass);else if(this.OnChangePropertyBegin(e,t))return!0;switch(e){case"Actor.LayerOpacity":this.GetObject().layerOpacity=t.GetValue();break;case"Actor.Rendering":this.GetObject().renderingMode=t.GetValue();break;case"Actor.Priority":this.GetObject().priority=t.GetValue();break;default:return r.fromChildClass=!0,this._parent(e,t,r)}return!0},OnChangePropertiesEnd:function(){var e=this.GetObject();if(e.getDirtyFlag(t.FDirty.Priority)){var r=e._experienceBase.getManager("VCXVisuManager");r&&r.dirtifyRenderPriority()}return this._parent()},GetProperty:function(e){var s=null;if("Actor.LayerOpacity"===e){var l=this.GetObject().layerOpacity,p=new a;p.SetValue(l),(C=new i(e,0,!0,c)).SetBounds(0,1,.1),C.SetGroupId("Group.CustomRendering"),s=new r(C,p)}else if("Actor.Rendering"===e){var d=this.GetObject()._experienceBase.getManager("VCXContextManager"),u=this.GetObject().renderingMode,h=new o;h.SetValue(u),(C=new n(e,0,!0,c)).AddOrModifyChoice(t.ERenderingMode.Smooth,"Actor.Rendering.Smooth"),C.AddOrModifyChoice(t.ERenderingMode.SmoothOutline,"Actor.Rendering.SmoothOutline"),d.isSupported("VCXEnopadSupport")||(C.AddOrModifyChoice(t.ERenderingMode.Technical,"Actor.Rendering.Technical"),C.AddOrModifyChoice(t.ERenderingMode.FlatTechnical,"Actor.Rendering.FlatTechnical")),C.AddOrModifyChoice(t.ERenderingMode.Silhouette,"Actor.Rendering.Silhouette"),C.SetGroupId("Group.CustomRendering"),s=new r(C,h)}else if("Actor.Priority"===e){var C,g=this.GetObject().priority,f=new o;f.SetValue(g),(C=new n(e,0,!0,c)).AddOrModifyChoice(0,"Actor.Priority.VeryLow"),C.AddOrModifyChoice(1,"Actor.Priority.Low"),C.AddOrModifyChoice(2,"Actor.Priority.Normal"),C.AddOrModifyChoice(3,"Actor.Priority.High"),C.AddOrModifyChoice(4,"Actor.Priority.VeryHigh"),C.SetGroupId("Group.CustomRendering"),s=new r(C,f)}else s=this._parent(e);return s},GetProperties:function(e){var t=this._parent();return t.AddOrModifyProperty(this.GetProperty("Actor.LayerOpacity")),t.AddOrModifyProperty(this.GetProperty("Actor.Rendering")),t.AddOrModifyProperty(this.GetProperty("Actor.Priority")),t},getFormatPainterCompatibilityClass:function(){return this.GetObject().componentType},getPropertiesFormatPainter:function(){var e=this.GetProperties(),t=[];if(e)for(var r in e._map)"Actor.Position"!=r&&"Actor.Name"!=r&&"Actor.Name.ReferenceTitle"!=r&&t.push(r);return t},RequestModification:function(e,t){if(e){const n=e.GetPropertyInfo().GetPropertyName();if("Actor.Name"===n&&""===e.GetPropertyValue().GetValue().trim()){var r=this.GetProperty("Actor.Name"),i=new s;let n=this.GetProperty("Actor.Name.ReferenceTitle").GetPropertyValue().GetValue(),o=this.GetProperty("Actor.Name.InstanceTitle").GetPropertyValue().GetValue();return""===o.trim()?i.Value=n:i.Value=n+" ("+o+")",r.SetPropertyValue(i),t.AddOrModifyProperty(this.GetHashing(),r),this._parent(e,t)}if("Actor.Color"===n){if((r=this.GetProperty("Actor.Color.Defined"))&&!1===r.GetPropertyValue().Value)(i=new l).Value=!0,r.SetPropertyValue(i);return t.AddOrModifyProperty(this.GetHashing(),r),t.AddOrModifyProperty(this.GetHashing(),e),this._parent(e,t)}if("Actor.Opacity"===n){if((r=this.GetProperty("Actor.Opacity.Defined"))&&!1===r.GetPropertyValue().Value)(i=new l).Value=!0,r.SetPropertyValue(i);return t.AddOrModifyProperty(this.GetHashing(),r),t.AddOrModifyProperty(this.GetHashing(),e),this._parent(e,t)}}return this._parent(e,t)}})})),define("DS/VCXWebExperienceBase/VCXModifiableViewOccurrenceExt",["DS/VCXWebExperienceBase/VCXModifiableViewOccurrenceExperience","DS/VCXWebProperties/VCXPropertyGroup","DS/VCXWebComponents/VCXWebComponentOccurrence","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],(function(e,t,r,i){"use strict";return e.extend({getPropertyGroups:function(e){e||(e={}),this._parent(e);var n=this.getGroupPropertiesOrders();e["Group.CustomRendering"]||(e["Group.CustomRendering"]=new t({groupID:"Group.CustomRendering"}),e["Group.CustomRendering"].i18nGroup=i),e["Group.CustomRendering"].setPropertiesOrder(n["Group.CustomRendering"]),e["Group.CustomRendering"].priority=60;var o={};o[r.ERenderingMode.Smooth]="Actor.Rendering.Smooth",o[r.ERenderingMode.SmoothOutline]="Actor.Rendering.SmoothOutline",o[r.ERenderingMode.Technical]="Actor.Rendering.Technical",o[r.ERenderingMode.FlatTechnical]="Actor.Rendering.FlatTechnical",o[r.ERenderingMode.Silhouette]="Actor.Rendering.Silhouette",e["Group.CustomRendering"].addProperties([{propertyName:"Actor.LayerOpacity",i18n:i},{propertyName:"Actor.Rendering",i18n:i,mapChoiceEnum:o},{propertyName:"Actor.Priority",i18n:i,mapChoiceEnum:{0:"Actor.Priority.VeryLow",1:"Actor.Priority.Low",2:"Actor.Priority.Normal",3:"Actor.Priority.High",4:"Actor.Priority.VeryHigh"}}])},getGroupPropertiesOrders:function(){var e=this._parent()||{};return UWA.extend(e,{"Group.CustomRendering":["Actor.Rendering","Actor.Priority","Actor.LayerOpacity"]}),e},getCollapsedGroupsNames:function(){return this._parent().concat(["Group.CustomRendering"])}})}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebExperienceBase/VCXComponentOccurrenceExt",["require","exports","DS/VCXWebVisu/VCXVisuTools","DS/VCXWebExperienceBase/VCXComponentOccurrenceExperience","DS/VCXWebComponents/VCXWebComponentOccurrence","DS/Visualization/ThreeJS_DS"],(function(e,t,r,i,n,o){"use strict";r=__importDefault(r),i=__importDefault(i),n=__importDefault(n),o=__importDefault(o);class a extends i.default{constructor(){super(),this._renderingMode=0,this._layerOpacity=.5,this._priority=2,this._localMaterial=null,this._globalMaterial=null,this.localColorIsDefined=null}descriptionDump(){var e=function(e){return e&&{name:e.name,type:e.getType&&e.getType(),subType:e.getSubType&&e.getSubType()}},t=function(e){return e&&{faceMode:e._faceMode,mask:e._renderMode&&e._renderMode._mask,outlineWidth:e._renderMode&&e._renderMode._outlineWidth,renderLineMask:e._renderMode&&e._renderMode._useRenderLineMask,renderFaceMask:e._renderMode&&e._renderMode._useRenderFaceMask,renderPointMask:e._renderMode&&e._renderMode._useRenderPointMask}},i=this._experienceBase.getManager("VCXContextManager"),n=i&&i.getMainViewer(),o=r.default.buildGraphicPropertiesStructure(this,null,n,{getAll:!0});return o[0].objectName=o[0].object.name,delete o[0].object,delete o[0].pathElement,o[0].cad&&o[0].cad.Material&&(o[0].cad.Material=e(o[0].cad.Material)),o[0].visible&&o[0].visible.Material&&(o[0].visible.Material=e(o[0].visible.Material)),o[0].override&&o[0].override.Material&&(o[0].override.Material=e(o[0].override.Material)),o[0].cad&&o[0].cad.RenderStyle&&(o[0].cad.RenderStyle=t(o[0].cad.RenderStyle)),o[0].visible&&o[0].visible.RenderStyle&&(o[0].visible.RenderStyle=t(o[0].visible.RenderStyle)),o[0].override&&o[0].override.RenderStyle&&(o[0].override.RenderStyle=t(o[0].override.RenderStyle)),o[0]}set layerOpacity(e){this._layerOpacity!==e&&(this._layerOpacity=e,this._dirtyMask|=n.default.FDirty.LayerOpacity)}get layerOpacity(){return this._layerOpacity}set renderingMode(e){this._renderingMode!==e&&(this._renderingMode=e,this._dirtyMask|=n.default.FDirty.RenderingMode|n.default.FDirty.Priority)}get renderingMode(){return this._renderingMode}set priority(e){this._priority!==e&&(this._priority=e,this._dirtyMask|=n.default.FDirty.Priority)}get priority(){return this._priority}set localMaterial(e){this._localMaterial=e,this._dirtyMask|=n.default.FDirty.Material|n.default.FDirty.Color|n.default.FDirty.Alpha}get localMaterial(){return this._localMaterial}get globalMaterial(){return this._globalMaterial}getWorldPosition(){const e=this.QueryInterface("W3AISGNodeHolder");if(e){const t=this._experienceBase.getManager("VCXContextManager")?.getMainViewer();return e.getPathElement().getWorldMatrix(t)}return new o.default.Matrix4}getParentWorldPosition(){const e=this.QueryInterface("VCXIModelNavigable")?.getParent()?.GetObject();if(e)return e.getWorldPosition?e.getWorldPosition():new o.default.Matrix4;{const e=this.QueryInterface("W3AISGNodeHolder");if(e&&e.getPathElement()&&e.getPathElement().getParentPath()){const t=this._experienceBase.getManager("VCXContextManager")?.getMainViewer();return e.getPathElement().getParentPath().getWorldMatrix(t)}return new o.default.Matrix4}}}return n.default.addDirtyFlags(["LayerOpacity","RenderingMode","Priority","Material"]),Object.defineProperty(a.prototype,"componentType",{enumerable:!0,get:function(){return"VCXComponentOccurrenceExt"}}),a}));