define("DS/WAfrUIStandardComponents/mod_TreeModel",[],(function(){"use strict";class e{constructor(e){this._model=e,this._idx=e._private._childrenOrder.length-1}next(){-1!==this._idx&&(--this._idx,-1===this._idx&&(this._model=null))}isValid(){return this._model&&-1!=this._idx}get(){if(!this.isValid())throw new Error("This iterator is invalid.");let e=this._model._private._childrenOrder[this._idx];return this._model.getChild(e)}}class t{constructor(e){this._model=e,this._idx=0,0===e._private._childrenOrder.length&&(this._idx=-1)}next(){-1!==this._idx&&(++this._idx,this._model._private._childrenOrder.length<=this._idx&&(this._idx=-1,this._model=null))}isValid(){return this._model&&-1!=this._idx}get(){let e=this._model._private._childrenOrder[this._idx];return this._model.getChild(e)}}class n{constructor(e){if(this._private=Object.create(null),this._private._children={},this._private._childrenOrder=[],!e.identifier)throw new Error("data must have an identifier property");this._private._data=e}getId(){return this._private._data?this._private._data.identifier:null}getData(){return this._private._data}addChild(e){let t=new n(e);return this._private._children[e.identifier]=t,this._private._childrenOrder.push(t.getId()),t}addChildNode(e){if(!(e instanceof n))throw new Error("childNode must be a TreeModel");let t=e.getId();if(!t)throw new Error("id must be defined and not empty");this._private._children[t]=e,this._private._childrenOrder.push(t)}getChild(e){return this._private._children[e]}getForwardIterator(){return new t(this)}getBackwardIterator(){return new e(this)}reorder(e){let t=!0;const n=this._private._childrenOrder;let r=0;for(;r<e.length;)n.includes(e[r])?++r:e.splice(r,1);return t&&(n.length===e.length?this._private._childrenOrder=e:t=!1),t}}return{TreeModel:n}})),define("DS/WAfrUIStandardComponents/UIFrame",["UWA/Core","UWA/Element","DS/WAfrUtils/mod_PromiseUtils","DS/WAfrUtils/Logger"],(function(e,t,n,r){"use strict";const o=n.promisifiedRequire;function i(e,t,...n){const r=e.getLayout();if(r){const e=r.getApi();if(e&&void 0!==e[t])return e[t](...n);throw new Error(`The API ${t} is not exposed on this layout`)}throw new Error("No layout associated to the UIFrame")}var a=function(t){var n={hasStatusBar:!1,layoutModule:"DS/WAfrUIStandardComponents/WAfrImmersiveFrameLayout",stdUIFrameConf:void 0};this.options=e.clone(e.extend(n,t)),this.elements={},this._previousLayoutModule=null,this._layout=null};return a.prototype._setHasStatusBar=function(e){this.options.hasStatusBar=e},a.prototype._setLayoutModule=function(e){if(!e)throw new Error("Invalid layoutModule");this._previousLayoutModule=this.options.layoutModule,this.options.layoutModule=e,r.log(`[UIFrame] _setLayoutModule. New layout: ${e||"None"}, Previous layout: ${this._previousLayoutModule?this._previousLayoutModule:"None"}`)},a.prototype._setStdUIFrameConf=function(e){this.options.stdUIFrameConf=e},a.prototype._buildView=async function(){const e=await o(this.options.layoutModule);if(!e)throw new Error(`Impossible to retrieve the Layout Module ${this.options.layoutModule}`);const t=new e;this._layout=t;let n=!1;this.options.stdUIFrameConf&&void 0!==this.options.stdUIFrameConf._specialAuthorizationDockingTabsInBottomArea&&(n=this.options.stdUIFrameConf._specialAuthorizationDockingTabsInBottomArea);const i=this.getExecutionContext();if(!i)throw new Error("Impossible to retrieve the associated ExecutionContext.");const a=await t.create({hasStatusBar:this.options.hasStatusBar,preferenceIdentifier:i.getSourceApp()&&i.getSourceApp().getId()?i.getSourceApp().getId():i.getId(),_specialAuthorizationDockingTabsInBottomArea:n});r.log("[UIFrame] layout view created",a);const s=i.getUiContainer();this.elements.container=a,s.appendChild(a)},a.prototype._updateView=async function(){let e=!1;this.options.stdUIFrameConf&&void 0!==this.options.stdUIFrameConf._specialAuthorizationDockingTabsInBottomArea&&(e=this.options.stdUIFrameConf._specialAuthorizationDockingTabsInBottomArea),await this._layout.update({hasStatusBar:this.options.hasStatusBar,_specialAuthorizationDockingTabsInBottomArea:e}),r.log("[UIFrame] layout view updated")},a.prototype._destroyView=async function(){const e=this.elements.container;e&&e.remove(),await this._layout.destroy(),r.log("[UIFrame] layout view destroyed")},a.prototype.initialize=async function(){var e;if(!this.getExecutionContext())throw new Error("Execution context cannot be null here");this.elements.container?(e=this,Boolean(e._previousLayoutModule===e.options.layoutModule)?await this._updateView():(await this._destroyView(),await this._buildView())):await this._buildView()},a.prototype.getLayout=function(){return this._layout},a.prototype.getUIFrame=function(){return i(this,"getUiFrame")},a.prototype.getViewerLayout=function(){return i(this,"getViewerFrame")},a.prototype.getContainer=function(){return this.elements.container},a.prototype.getImmersiveFrame=function(){return i(this,"getImmersiveFrame")},a.prototype.isStatusBarDisplayed=function(){return this.options.hasStatusBar},a.prototype.addLayer=function(e,t){return i(this,"addLayer",e,t)},a.prototype.getExposedComponentCtor=function(){var e=function(){},t=this;return e.prototype.getLayout=()=>{const e=t.getLayout();let n=null;return e&&(n=e.getApi()),n},e.prototype.getImmersiveFrame=function(){return t.getImmersiveFrame()},e.prototype.getUIFrame=function(){return t.getUIFrame()},e.prototype.getViewerLayout=function(){return t.getViewerLayout()},e.prototype.isStatusBarDisplayed=function(){return t.isStatusBarDisplayed()},e.prototype.addLayer=function(e,n){return t.addLayer(e,n)},e.prototype.addRootClassName=function(e){t.elements.container.addClassName(e)},e.prototype._privateGetStatusBarWrapper=()=>i(this,"_privateGetStatusBarWrapper"),e.prototype._privateSetStatusBarWrapperVisibility=a.prototype._privateSetStatusBarWrapperVisibility.bind(this),e},a.prototype._privateSetStatusBarWrapperVisibility=function(e){return i(this,"_privateSetStatusBarWrapperVisibility",e)},a.prototype.destroy=async function(){this.getLayout()&&await this._destroyView(),this._layout=null},a.DEFAULT_COMPONENT_NAME="AFR_UIFrameManager",a})),define("DS/WAfrUIStandardComponents/WAfrWidgetProxy",[],(function(){"use strict";function e(){return new Error("The function is not defined outside a Widget scope.")}var t=function(e){this.data={},this.bus={},this.metas={},this.title="",this.modelEvents=e,this.subscribeMap=new Map};return t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data[e]},t.prototype.setValues=function(e){var t={};for(var n in this.data)t[n]=this.data[n];for(var n in e)t[n]=e[n];this.data=t},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.addEvent=function(e,t,n,r){const o=this.modelEvents.subscribe({event:e},t),i={name:e,listener:t};this.subscribeMap.set(o,i)},t.prototype.removeEvent=function(e,t,n,r){e&&t?this.subscribeMap.forEach(((n,r)=>{n.listener&&n.listener===t&&n.name===e&&this.modelEvents.unsubscribe(r)})):this.modelEvents.unsubscribeAll({event:e})},t.prototype.addEventOnce=function(e,t,n,r){this.modelEvents.subscribeOnce({event:e},t)},t.prototype.dispatchEvent=function(e,t,n){let r={};r.event=e,r.data=t,this.modelEvents.publish(r)},t.prototype.deleteValue=function(e){delete this.data[e]},t.prototype.getValues=function(){return this.data},t.prototype.getId=function(){return this.id},t.prototype.setIcon=function(e){this.icon=e},t.prototype.setMetas=function(e){this.metas=e},t.prototype.isApplicationInWidget=function(){return!1},t.prototype.initPreferences=e,t.prototype.hasPreference=e,t.prototype.hasPreferences=e,t.prototype.setPreferences=e,t.prototype.mergePreferences=e,t.prototype.getPreferences=e,t.prototype.addPreference=e,t.prototype.getPreference=e,t.prototype.setBrand=e,t.prototype.getTitleHeader=e,t.prototype.setTitleHeader=e,t.prototype.getLanguage=e,t.prototype.setDir=e,t.prototype.getView=e,t.prototype.getAvailableViews=e,t.prototype.getUrl=e,t.prototype.setOptions=e,t.prototype.setCounter=e,t.prototype.getViewportDimensions=e,t.prototype.setPlugins=e,t.prototype.initPlugins=e,t})),define("DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities",[],(function(){"use strict";function e(e,t){t.getId=e.getId.bind(e),t.isAvailable=e.isAvailable.bind(e),t.onAvailabilityEvent=e.onAvailabilityEvent.bind(e),t.removeAvailabilityEventSubscription=e.removeAvailabilityEventSubscription.bind(e),t.getI18n=e.getI18n.bind(e),t.getAccelerator=e.getAccelerator.bind(e),t.isExecutable=e.isExecutable.bind(e),t.onIsEnabledChangeEvent=e.onIsEnabledChangeEvent.bind(e),t.removeIsEnabledChangeEventSubscription=e.removeIsEnabledChangeEventSubscription.bind(e),t.registerFunctionalTestScripterStep=function(){}}function t(t,n){e(t,n),n.getIcon=t.getIcon.bind(t),n.onIconChangedEvent=t.onIconChangedEvent.bind(t),n.removeIconChangedEventSubscription=t.removeIconChangedEventSubscription.bind(t),n.execute=t.execute.bind(t),n.onLifeCycleEvent=t.onLifeCycleEvent.bind(t),n.removeLifeCycleEventSubscription=t.removeLifeCycleEventSubscription.bind(t),n.onI18nChangedEvent=t.onI18nChangedEvent.bind(t),n.removeI18nEventSubscription=t.removeI18nEventSubscription.bind(t)}class n{}function r(e){var r=new n;return t(e,r),r}function o(t){var o=new n;return function(t,n){e(t,n),n.onStateEvent=t.onStateEvent.bind(t),n.getState=t.getState.bind(t),n.setState=t.setState.bind(t);var o=t.getCheckHandler(),i=t.getUncheckHandler();n.onCheckHandler=o?r(o):null,n.onUncheckHandler=i?r(i):null,n.removeStateEventSubscription=t.removeStateEventSubscription.bind(t),n.accept=function(e){return e.visitCheckHandler(n)}}(t,o),o}return{createActionHandlerProxy:function(e){var r=new n;return function(e,n){t(e,n),n.accept=function(e){return e.visitActionHandler(n)}}(e,r),r},createCommandHandlerProxy:function(e){var r=new n;return function(e,n){t(e,n),n.getState=e.getState.bind(e),n.accept=function(e){return e.visitCommandHandler(n)}}(e,r),r},createCheckHandlerProxy:o,createRadioHandlerProxy:function(t){var r=new n;return function(t,n){e(t,n);for(var r=t.getElements(),i=r.length,a=0,s=[];a<i;++a)s.push(o(r[a]));n.items=s,n.isUnselectAuthorized=t.isUnselectAuthorized.bind(t),n.getSelectedItem=function(){var e=t.getSelectedItem(),n=null;return e&&(n=o(e)),n},n.getSelectedItemId=t.getSelectedItemId.bind(t),n.getRadioItemState=t.getRadioItemState.bind(t),n.setRadioItemState=t.setRadioItemState.bind(t),n.onItemStateEvent=t.onItemStateEvent.bind(t),n.removeItemStateEventSubscription=t.removeItemStateEventSubscription.bind(t)}(t,r),r}}})),define("DS/WAfrUIStandardComponents/NotificationManager",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],(function(e,t){"use strict";var n=function(){t.setNotificationManager(e)};return n.prototype.notifyError=function(e){if(e){var t={level:"error",title:e.title,message:e.message,sticky:!1};this.addNotif(t)}},n.prototype.notifySuccess=function(e){var t={level:"success",title:e.title,message:e.message,sticky:!1};this.addNotif(t)},n.prototype.addNotif=function(t){e.addNotif(t)},n.prototype.createExposedComponent=function(){return{notifyError:this.notifyError.bind(this),notifySuccess:this.notifySuccess.bind(this),addNotif:this.addNotif.bind(this)}},n})),define("DS/WAfrUIStandardComponents/WAfrImmersiveFrameLayout",["UWA/Core","UWA/Element","DS/WAfrLayouts/WAfrLayout","DS/WAfrUtils/mod_PromiseUtils","DS/Utilities/TouchUtils","DS/Utilities/Css","DS/Controls/LayerSet"],(function(e,t,n,r,o,i,a){"use strict";const s=r.promisifiedRequire;function d(e){o.getTouchMode()?e.addClassName("wafr-uiframe-touch"):e.removeClassName("wafr-uiframe-touch")}return class extends n{constructor(){super("LAYOUT_IMMERSIVE_FRAME"),this._private=Object.create(null),this._private.views=null,this._private.subscriptions=[]}async create(t){if(this._private.views)throw new Error("Calling twice createView is not authorized.");if(!t)throw new Error("Missing options.");if(!t.preferenceIdentifier)throw new Error("Missing preference identifier.");const n=t.preferenceIdentifier,r=Object.create(null);this._private.views=r,r.container=e.Element.create("div",{class:"wafr-uiframe wux-afr-framewindow wux-ui-ambiance-light"}),t&&t.hasStatusBar&&r.container.addClassName("wafr-uiframe-statusbar"),d(r.container);const o={element:document,eventName:"touchChange",callback:function(){d(r.container)}};this._private.subscriptions.push(o),o.element.addEventListener(o.eventName,o.callback),r.viewerFrame=e.Element.create("div",{styles:{width:"100%",height:"100%"}}),r.uiFrame=e.Element.create("div",{class:"wux-afr-framewindow-uiframe",dataType:"UI-Frame"}),r.uiFrame3d=e.Element.create("div",{class:"wux-afr-framewindow-uiframe",dataType:"UI-Frame-3D"}),r.layerSet=new a,r.layerSet.inject(r.container),r.layerSet.addLayer(r.viewerFrame).setAttribute("data-type","viewer"),r.layerSet.addLayer(r.uiFrame3d,{top:0,bottom:0,left:0,right:0,pointerEvents:"none"}).setAttribute("data-type","ui-frame-3d"),r.layerSet.addLayer(r.uiFrame,{top:0,bottom:0,left:0,right:0,pointerEvents:"none",overflow:"auto"}).setAttribute("data-type","ui-frame-2d"),setTimeout((()=>{this._private.views&&this._private.views.container&&this._private.views.container.addClassName("wux-ui-at-screen")}),0);const p=await s("DS/Windows/ImmersiveFrame");return r.immersiveFrame=new p({identifier:n,_ActionBar_V3:!0,dockingElementsPriority:[WUXDockAreaEnum.TopDockArea,WUXDockAreaEnum.BottomDockArea,WUXDockAreaEnum.LeftDockArea,WUXDockAreaEnum.RightDockArea]}),r.immersiveFrame.inject(r.uiFrame),r.immersiveFrame.__DockingTabsInBottomArea=t._specialAuthorizationDockingTabsInBottomArea,i.disableSelection(r.container),i.disableSelection(r.uiFrame),r.statusBarWrapper=new e.Element("div",{class:"wafr-statusbar-wrapper"}),r.statusBarWrapper.classList.add("wafr-statusbar-wrapper"),r.statusBarWrapper.inject(r.container),Promise.resolve(r.container)}async update(e){if(!e)throw new Error("Missing options");this._private.views.immersiveFrame.__DockingTabsInBottomArea=e._specialAuthorizationDockingTabsInBottomArea,e.hasStatusBar?this._private.views.container.addClassName("wafr-uiframe-statusbar"):this._private.views.container.removeClassName("wafr-uiframe-statusbar")}async destroy(){const e=this._private.subscriptions;for(const t of e)t.element.removeEventListener(t.eventName,t.callback);return this._private.views&&(this._private.views.immersiveFrame.destroy(),this._private.views.container.destroy()),delete this._private,Promise.resolve()}getApi(){let e=super.getApi();return e={...e,addLayer:this.addLayer.bind(this),getImmersiveFrame:this.getImmersiveFrame.bind(this),getUiFrame:this.getUiFrame.bind(this),getViewerFrame:this.getViewerFrame.bind(this),_privateGetStatusBarWrapper:this._privateGetStatusBarWrapper.bind(this),_privateSetStatusBarWrapperVisibility:this._privateSetStatusBarWrapperVisibility.bind(this)},e}addLayer(e,t){return this._private.views.layerSet.addLayer(e,t)}getImmersiveFrame(){let e=null;return this._private.views&&(e=this._private.views.immersiveFrame),e}getUiFrame(){let e=null;return this._private.views&&(e=this._private.views.uiFrame),e}getViewerFrame(){let e=null;return this._private.views&&(e=this._private.views.viewerFrame),e}_privateGetStatusBarWrapper(){let e=null;return this._private.views&&(e=this._private.views.statusBarWrapper),e}_privateSetStatusBarWrapperVisibility(e){if(null==e||"boolean"!=typeof e)throw new Error("Invalid value");if(!this._private.views.container.hasClassName("wafr-uiframe-statusbar"))throw new Error("Impossible to change the status bar visibility on an UIFrame which does not contain a status bar.");e?this._private.views.container.removeClassName("wafr-statusbar-wrapper-hidden"):this._private.views.container.addClassName("wafr-statusbar-wrapper-hidden")}}})),define("DS/WAfrUIStandardComponents/mod_UIFrameInterpreter",["DS/WAfrUIStandardComponents/UIFrame","DS/WAfrUtils/Logger"],(function(e,t){"use strict";class n{constructor(){this._layoutModule=null}async interpret(n,r){this._executionContext=r;const o=n.UIModel,i=r.getComponent(e.DEFAULT_COMPONENT_NAME);o&&i&&(o.layout&&o.layout.module?this._layoutModule=o.layout.module:this._layoutModule="DS/WAfrUIStandardComponents/WAfrImmersiveFrameLayout",t.log(`[UIFrameInterpreter] Layout module: ${this._layoutModule}`))}commit(){if(this._layoutModule){const t=this._executionContext.getComponent(e.DEFAULT_COMPONENT_NAME);if(!t)throw new Error("Impossible to retrieve the UIFrame component");t._setLayoutModule(this._layoutModule)}}}return{generateInterpreter:function(){return Promise.resolve(new n)}}})),define("DS/WAfrUIStandardComponents/mod_WidgetProxyComponent",["DS/WAfrContainerAsWidget/ContainerViewProxy","DS/WAfrUIStandardComponents/WAfrWidgetProxy"],(function(e,t){"use strict";var n=Object.create(null);n.DEFAULT_COMPONENT_NAME="AFR_WidgetProxyComponent";return n.WidgetProxyComponent=class{constructor(){this._private={}}initialize(){let n;const r=this.getExecutionContext();if(r){const t=r.getContainerView();if(!t)throw new Error("Error while creating the ContainerViewProxy. No container view retrieved");n=new e(t)}else n=new e;if(n.isApplicationInWidget())this.widgetProxy=n;else{let e=r.getComponent("AFR_ModelEvents");this.widgetProxy=new t(e)}return Promise.resolve()}clean(){return Promise.resolve()}destroy(){return Promise.resolve()}createExposedComponent(){const e=this,t=new Error("[WAfr- WidgetProxyComponent] WidgetProxy attribute is not defined");return{setValue:function(n,r){return e.widgetProxy?e.widgetProxy.setValue(n,r):t},getValue:function(n){return e.widgetProxy?e.widgetProxy.getValue(n):t},setValues:function(n){return e.widgetProxy?e.widgetProxy.setValues(n):t},getValues:function(){return e.widgetProxy?e.widgetProxy.getValues():t},getTitle:function(){return e.widgetProxy?e.widgetProxy.getTitle():t},setTitle:function(n){return e.widgetProxy?e.widgetProxy.setTitle(n):t},addEvent:function(n,r,o,i){return e.widgetProxy?e.widgetProxy.addEvent(n,r,o,i):t},addEventOnce:function(n,r,o,i){return e.widgetProxy?e.widgetProxy.addEventOnce(n,r,o,i):t},dispatchEvent:function(n,r,o){return e.widgetProxy?e.widgetProxy.dispatchEvent(n,r,o):t},deleteValue:function(n){return e.widgetProxy?e.widgetProxy.deleteValue(n):t},getId:function(){return e.widgetProxy?e.widgetProxy.getId():t},setIcon:function(n){return e.widgetProxy?e.widgetProxy.setIcon(n):t},setMetas:function(n){return e.widgetProxy?e.widgetProxy.setMetas(n):t},removeEvent:function(n,r,o,i){return e.widgetProxy?e.widgetProxy.removeEvent(n,r,o,i):t},initPreferences:function(){return e.widgetProxy?e.widgetProxy.initPreferences():t},hasPreference:function(n){return e.widgetProxy?e.widgetProxy.hasPreference(n):t},hasPreferences:function(){return e.widgetProxy?e.widgetProxy.hasPreferences():t},setPreferences:function(n){return e.widgetProxy?e.widgetProxy.setPreferences(n):t},mergePreferences:function(n){return e.widgetProxy?e.widgetProxy.mergePreferences(n):t},getPreferences:function(){return e.widgetProxy?e.widgetProxy.getPreferences():t},addPreference:function(n){return e.widgetProxy?e.widgetProxy.addPreference(n):t},getPreference:function(n){return e.widgetProxy?e.widgetProxy.getPreference(n):t},setBrand:function(n){return e.widgetProxy?e.widgetProxy.setBrand(n):t},getTitleHeader:function(){return e.widgetProxy?e.widgetProxy.getTitleHeader():t},setTitleHeader:function(n){return e.widgetProxy?e.widgetProxy.setTitleHeader(n):t},getLanguage:function(){return e.widgetProxy?e.widgetProxy.getLanguage():t},setDir:function(n){return e.widgetProxy?e.widgetProxy.setDir(n):t},getView:function(){return e.widgetProxy?e.widgetProxy.getView():t},getAvailableViews:function(){return e.widgetProxy?e.widgetProxy.getAvailableViews():t},getUrl:function(){return e.widgetProxy?e.widgetProxy.getUrl():t},setOptions:function(n){return e.widgetProxy?e.widgetProxy.setOptions(n):t},setCounter:function(n,r){return e.widgetProxy?e.widgetProxy.setCounter(n,r):t},getViewportDimensions:function(){return e.widgetProxy?e.widgetProxy.getViewportDimensions():t},setPlugins:function(n){return e.widgetProxy?e.widgetProxy.setPlugins(n):t},initPlugins:function(){return e.widgetProxy?e.widgetProxy.initPlugin():t},isApplicationInWidget:function(){return e.widgetProxy?e.widgetProxy.isApplicationInWidget():t}}}},n})),define("DS/WAfrUIStandardComponents/mod_UIComponent",["DS/WAfrUIStandardComponents/UIFrame","DS/Utilities/TouchUtils","DS/WAfrUIModelManagers/MainUIComponentManager","DS/WAfrUIModelManagers/ContextualUIComponentManager","DS/WAfrHandlers/mod_HandlerComponent","DS/WAfrTweakers/TweakerHandlerGenerateMethods","DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities"],(function(e,t,n,r,o,i,a){"use strict";var s={DEFAULT_COMPONENT_NAME:"Afr_UIComponent"},d=a.createActionHandlerProxy,p=a.createCommandHandlerProxy,c=a.createCheckHandlerProxy,u=a.createRadioHandlerProxy;return s.UIComponent=function(){this._properties={},this._properties.components={panels:[]},this._properties._mainComponentAvailability=!0,this._properties._mainUIComponentManager=new n,this._properties._contextualUIComponentManager=new r},s.UIComponent.prototype.createDefaultHandlerRepresentation=function(e){var n=null;if(e||e.id){var r=this.getExecutionContext();if(r){var a=r.getComponent(o.DEFAULT_COMPONENT_NAME);if(a){var s=a.getLeafHandlerMaps(),c=null,u=null,l=s.actionHandlers[e.id];if(l?(c="actionHandler",u=d(l)):(l=s.commandHandlers[e.id])&&(c="commandHandler",u=p(l)),u&&e.representationType&&"WelcomeScreenButton"===e.representationType)return function(e,t){return new Promise(((e,t)=>{require(["DS/WelcomeScreenView/WelcomeScreenButtonController"],(t=>e(t)),t)})).then((n=>{let r,o=function(e){return r.controller.subscribe({event:"REMOVE_CUSTOM_CONTENT"},e)},i=function(e){r.controller.unsubscribe(e)};return r=t.hasCustomContent?{id:t.id,hasCustomContent:!0,i18n:e.getI18n(),icon:e.getIcon().hasOwnProperty("fonticon")?e.getIcon().fonticon:"",controller:new n({onAction:t=>new Promise(((t,n)=>{e.execute({args:{viewCallback:t,subscribeToCancelCustomContentFunction:o,unsubscribeToCancelCustomContentFunction:i}})}))})}:{id:t.id,i18n:e.getI18n(),icon:e.getIcon().hasOwnProperty("fonticon")?e.getIcon().fonticon:"",controller:new n({onAction:t=>(e.execute(),Promise.resolve())})},Promise.resolve(r)}))}(u,e);if(u&&e.representationType&&"AfrHomePage"===e.representationType)return function(e,t){return new Promise(((e,t)=>{require(["DS/AfrHomePageV3/mod_AfrHomePageControllers"],(t=>e(t)),t)})).then((n=>{const r=n.HomePageButtonController;if(!t.id)throw new Error("[mod_UIComponent] Missing id");const o=t.id;if(!e.getI18n()||!e.getI18n().title)throw new Error("[mod_UIComponent] Missing Handler title");const i=e.getI18n().title,a=t.emphasize;if(!e.getIcon()||!e.getIcon().fonticon)throw new Error("[mod_UIComponent] Missing Handler icon");return{id:o,title:i,emphasize:a,icon:e.getIcon().fonticon,controller:new r({onAction:()=>e.execute()})}}))}(u,e);if(u&&c){let r=i[c]({value:u,typePath:c,touchMode:t.getTouchMode(),handlerTrigger:e.handlerTrigger});n=Promise.resolve(r).then((function(e){return Promise.resolve(e.getContent())}))}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.prototype.createCheckHandlerRepresentation=function(e){var n=null;if(e||e.id){var r=this.getExecutionContext();if(r){var a=r.getComponent(o.DEFAULT_COMPONENT_NAME);if(a){var s=a.getCheckHandlerMap()[e.id];if(s){var d=c(s);let r=i.checkHandlerButton({value:d,typePath:"checkHandlerButton",touchMode:t.getTouchMode(),origin:e.origin});n=Promise.resolve(r).then((function(e){return Promise.resolve(e.getContent())}))}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.prototype.createRadioHandlerRepresentation=function(e){var n=null,r={default:"radioHandler",singleButton:"radioHandlerLoopButton"};if(e||e.id){var a=r.default;if(e.representationType&&(r.hasOwnProperty(e.representationType)?a=r[e.representationType]:n=Promise.reject(new Error("The specified representation type does not exist."))),null===n){var s=this.getExecutionContext();if(s){var d=s.getComponent(o.DEFAULT_COMPONENT_NAME);if(d){var p=d.getRadioHandlerMap()[e.id];if(p){var c=u(p);let r=i[a]({value:c,typePath:a,touchMode:t.getTouchMode(),origin:e.origin});n=Promise.resolve(r).then((function(e){return Promise.resolve(e.getContent())}))}else n=Promise.reject(new Error("Impossible to generate the view for "+e.id))}else n=Promise.reject(new Error("Handler Component not found."))}else n=Promise.reject(new Error("Execution Context not found."))}}else n=Promise.reject(new Error("Wrong parameters."));return n},s.UIComponent.DEFAULT_COMPONENT_NAME=s.DEFAULT_COMPONENT_NAME,s.UIComponent.prototype.createExposedComponent=function(){return{deactivateMainComponent:this.deactivateMainComponent.bind(this),activateMainComponent:this.activateMainComponent.bind(this),hideMainComponent:this.hideMainComponent.bind(this),showMainComponent:this.showMainComponent.bind(this),getContextualUIComponentManager:this.getContextualUIComponentManager.bind(this),activateSection:this.activateSection.bind(this),getActiveSections:this.getActiveSections.bind(this),pinSection:this.pinSection.bind(this),unpinSection:this.unpinSection.bind(this),isSectionPinnedByUser:this.isSectionPinnedByUser.bind(this),createDefaultHandlerRepresentation:this.createDefaultHandlerRepresentation.bind(this),createCheckHandlerRepresentation:this.createCheckHandlerRepresentation.bind(this),createRadioHandlerRepresentation:this.createRadioHandlerRepresentation.bind(this),showMainComponentLabels:this.showMainComponentLabels.bind(this),hideMainComponentLabels:this.hideMainComponentLabels.bind(this)}},s.UIComponent.prototype.destroy=function(){return Promise.resolve()},s.UIComponent.prototype.initialize=function(){var n=[];this._properties._mainUIComponentManager.setContext({executionContext:this.getExecutionContext(),UIComponent:this.getExecutionContext().getComponent(this._private._identifier),UIFrame:this.getExecutionContext().getComponent(e.DEFAULT_COMPONENT_NAME)}),this._properties._mainComponentAvailability&&n.push(this._properties._mainUIComponentManager.generate({touchMode:t.getTouchMode()}));var r=this.getExecutionContext();return this._properties._contextualUIComponentManager.setContext({executionContext:r,UIComponent:void 0===r?void 0:r.getComponent(this._private._identifier),UIFrame:void 0===r?void 0:r.getComponent(e.DEFAULT_COMPONENT_NAME),Viewer:void 0===r||void 0===r.getApplicationComponent("Viewer")?void 0:r.getApplicationComponent("Viewer").get3DViewer()}),Promise.all(n)},s.UIComponent.prototype.configure=function(){return Promise.resolve()},s.UIComponent.prototype.clean=function(){var t=this;if(t._properties.flatModel=void 0,t._properties.tagList=void 0,t._properties._mainComponentAvailability=!0,t._properties._mainUIComponentManager.clean(),t._properties._contextualUIComponentManager.dispose(),t._properties.components&&t._properties.components.panels&&t._properties.components.panels.length){var n,r=t.getExecutionContext().getComponent(e.DEFAULT_COMPONENT_NAME);if(r&&(n=r.getImmersiveFrame()),n)for(var o,i;0!==t._properties.components.panels.length||void 0!==t._properties.components.panels[0];)i=t._properties.components.panels[0],t._properties.components.panels.splice(0,1),(o=i.windowGroup)&&(n.removeWindow(o),o.destroy()),i&&(n.removeWindow(i),i.destroy())}return Promise.resolve()},s.UIComponent.prototype.setGlobalFlatModel=function(e){this._properties.flatModel=e.model},s.UIComponent.prototype.setTagList=function(e){this._properties.tagList=e.tab},s.UIComponent.prototype.deactivateMainComponent=function(){this._properties._mainComponentAvailability=!1,this.hideMainComponent()},s.UIComponent.prototype.activateMainComponent=function(){this._properties._mainComponentAvailability=!0},s.UIComponent.prototype.activateSection=function(e){var t=this;void 0!==t&&void 0!==t._properties&&void 0!==t._properties._mainUIComponentManager&&(Array.isArray(e)?t._properties._mainUIComponentManager.activateSections(e):t._properties._mainUIComponentManager.activateSection(e))},s.UIComponent.prototype.getActiveSections=function(){var e=this;return void 0!==e&&void 0!==e._properties&&void 0!==e._properties._mainUIComponentManager?e._properties._mainUIComponentManager.getActiveSections():null},s.UIComponent.prototype.pinSection=function(e){var t=this;if(void 0!==t&&void 0!==t._properties&&void 0!==t._properties._mainUIComponentManager)return t._properties._mainUIComponentManager.pinSection(e)},s.UIComponent.prototype.unpinSection=function(e){var t=this;if(void 0!==t&&void 0!==t._properties&&void 0!==t._properties._mainUIComponentManager)return t._properties._mainUIComponentManager.unpinSection(e)},s.UIComponent.prototype.isSectionPinnedByUser=function(e){var t=this;if(void 0!==t&&void 0!==t._properties&&void 0!==t._properties._mainUIComponentManager)return t._properties._mainUIComponentManager.isSectionPinnedByUser(e)},s.UIComponent.prototype.hideMainComponent=function(){var e=this;void 0!==e&&void 0!==e._properties&&void 0!==e._properties._mainUIComponentManager&&e._properties._mainUIComponentManager.hide()},s.UIComponent.prototype.showMainComponent=function(){var e=this;if(void 0!==e&&void 0!==e._properties&&void 0!==e._properties._mainUIComponentManager)return e._properties._mainUIComponentManager.show()},s.UIComponent.prototype.setMainComponentActivatedCategory=function(e){var t=this;void 0!==t&&void 0!==t._properties&&void 0!==t._properties._mainUIComponentManager&&t._properties._mainUIComponentManager.setActivatedCategory(e)},s.UIComponent.prototype.setMainComponentCategoriesOrder=function(e){var t=this;void 0!==t&&void 0!==t._properties&&void 0!==t._properties._mainUIComponentManager&&t._properties._mainUIComponentManager.setCategoriesOrder(e)},s.UIComponent.prototype.getContextualUIComponentManager=function(){return this._properties._contextualUIComponentManager},s.UIComponent.prototype.setCategories=function(e){this._properties.categories=e},s.UIComponent.prototype.getCategories=function(){return this._properties.categories},s.UIComponent.prototype.showMainComponentLabels=function(){var e=this;void 0!==e&&void 0!==e._properties&&void 0!==e._properties._mainUIComponentManager&&e._properties._mainUIComponentManager.showMainComponentLabels()},s.UIComponent.prototype.hideMainComponentLabels=function(){var e=this;void 0!==e&&void 0!==e._properties&&void 0!==e._properties._mainUIComponentManager&&e._properties._mainUIComponentManager.hideMainComponentLabels()},s})),define("DS/WAfrUIStandardComponents/mod_UIInterpreter",["DS/WAfrUIStandardComponents/mod_UIComponent","DS/WAfrHandlers/mod_HandlerComponent","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/WAfrUIStandardComponents/mod_HandlerProxyUtilities","DS/WAfrUIStandardComponents/UIFrame","DS/WAfrUtils/mod_PromiseUtils","DS/WAfrUtils/mod_ConcatenationUtils"],(function(e,t,n,r,o,i,a,s){"use strict";var d=o.createActionHandlerProxy,p=o.createCommandHandlerProxy,c=o.createCheckHandlerProxy,u=o.createRadioHandlerProxy;const l=a.promisifiedRequire,m=s.getConfigurationFor,h=s.hasConfigurationFor;function g(e,t){if(!e||!t)throw new Error("Missing parameters.");t.handlerList&&t.handlerList.forEach((function(t){for(var n in t)e._tagList.indexOf(n)<0&&e._tagList.push(n)}))}function f(e,t){if(!e||!t)throw new Error("Missing parameters.");t.handlerList.forEach((function(t){var r,o,i={tagList:e._tagList,elem:t};e._treeDocument.addChild((o=new n({label:(r=i).elem.identifier,icon:"",grid:{label:r.elem.identifier,type:null,tweaker:null},useAsyncPreExpand:!1}),r.tagList.forEach((function(e){o.options.grid[e]=r.elem[e]})),o))}))}function v(e,t){if(!e||!t)throw new Error("Missing parameters.");void 0===e._categories&&(e._categories={});let n=0;const r=t.categories.length;let o=null;for(;n<r;++n)o=t.categories[n],e._categories[o.identifier]=o}let y=!1;const _=localStorage.getItem("DEBUG_AFR_I18N");null!==_&&("string"==typeof _&&"true"===_||"boolean"==typeof _&&_)&&(console.warn("[DEBUG] DS/WAfrUIStandardComponents/mod_UIInterpreter: I18N Debug mode activated.","\n[DEBUG] DO NOT USE IN PRODUCTION.",'\n[DEBUG] Be sure to activate "Verbose" level in the DevTools to see all logs.'),y=!0);const C="font-weight:bold;",w="color:#368EC4;",I="color:#EA4F37;";function U(e,t,n){let r=Promise.resolve();if("string"==typeof e)if(void 0===n||n.includes(t))r=l("i18n!"+e);else{y&&console.debug(`%c[mod_UIInterpreter~getI18nFromPath][I18N]%c üè≥Ô∏èü©π Fallback I18n (runtime) for%c ${e}%c to %cen%c. Requested%c ${t}%c but filtered by%c [${n?n.join(", "):"en"}]`,`${C} ${w}`,`${w}`,`${C} ${w}`,`${w}`,`${C} ${w}`,`${w}`,`${C} ${w}`,`${w}`,`${C} ${w}`);const o="text!"+e+"_en.json";r=l(o).then((t=>{try{return JSON.parse(t)}catch(t){const n=new Error(`Internal Error. ${e} content is not a valid JSON.`);return y&&console.debug(`%c[mod_UIInterpreter~getI18nFromPath][I18N]%c üè≥Ô∏è‚ùå Error computing I18n for%c ${o}%c. The content is not a valid JSON]`,`${C} ${I}`,`${I}`,`${C} ${I}`,`${I}`),Promise.reject(n)}}))}else r=Promise.reject(new Error("path is not a string"));return r}class P{constructor(){this._treeDocument=void 0,this._uiComponent=void 0,this._tagList=[]}_fetchI18nData(e,t){let n=Promise.resolve();const r=m(e,"i18n");if(!r||r&&"runtime"===r){if(y&&console.debug("%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏è i18n title for UIModel categories are resolved dynamically at runtime.",`${C} ${w}`,`${w}`),e&&e.UIModel&&e.UIModel.categories){let r=e.UIModel,o=[];const i=r.categories.length;let a=null;const s=e&&e.internationalization?e.internationalization:void 0;for(let e=0;e<i;++e)a=r.categories[e],a&&a.internationalization&&a.internationalization.path?(y&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏èüîé Compute I18n (runtime) for%c ${a.identifier}%c in%c ${t}%c filtered with the following array%c [${s?s.join(", "):"en"}]`,`${C} ${w}`,`${w}`,`${C} ${w}`,`${w}`,`${C} ${w}`,`${w}`,`${C} ${w}`),o.push(U(a.internationalization.path,t,s))):o.push(Promise.reject(new Error(`Category ${a.identifier} doesn't have a path property set for internationalization. Check the wafrapp file definition.`)));n=Promise.allSettled(o).then((e=>{if(r.categories.length===e.length)for(let t=0;t<e.length;++t){const n=e[t];let o=r.categories[t];if("fulfilled"===n.status){const e=n.value,t=o.identifier+".Title";y&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏è‚úîÔ∏è Retrieved I18n for%c ${o.identifier}%c.`,`${C} ${w}`,`${w}`,`${C} ${w}`,`${w}`,e),o.internationalization.title=e[t]}else y&&console.debug(`%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏è‚ùå Error computing I18n for%c ${o.identifier}%c. Identifier of the category will be used as a fallback instead of the title.`,`${C} ${I}`,`${I}`,`${C} ${I}`,`${I}`),y&&console.debug(n.reason)}}))}}else y&&console.debug("%c[mod_UIInterpreter~_fetchI18nData][I18N]%c üè≥Ô∏è i18n title for UIModel categories are retrieved from buildtime data.",`${C} ${w}`,`${w}`);return n}interpret(t,n,o){let a=Promise.resolve();if(void 0===t||void 0===n)return a;this._executionContext=n;var s=e.DEFAULT_COMPONENT_NAME;this._uiComponent=n.getComponent(s);var d=t.UIModel;const p=window.widget?window.widget.lang:"en";return y&&console.debug(`%c[mod_UIInterpreter.interpret][I18N]%c üè≥Ô∏è Environment current lang:%c ${p}`,`${C} ${w}`,`${w}`,`${C} ${w}`),a=this._fetchI18nData(t,p),a.then((()=>{this._treeDocument=new r,this._treeDocument.options.shouldBeSelected=function(e){return!1},d&&d.handlerList&&(g(this,d),f(this,d),void 0!==d.mainComponent&&(this._mainComponentAvailability=d.mainComponent.mainComponentAvailability,this._mainComponentDefaultCategory=d.mainComponent.defaultActivatedCategory,this._mainComponentCategoriesOrder=d.mainComponent.categoriesOrder),d.categories&&v(this,d));var e=n.getComponent(i.DEFAULT_COMPONENT_NAME);if(!e)return Promise.reject(new Error("Cannot find the UIFrame component"));var o=!1;d&&d.statusComponent&&d.statusComponent._specialAuthorization&&(o=!0),e._setHasStatusBar(o),h(t,"UIFrame")?e._setStdUIFrameConf(m(t,"UIFrame")):e._setStdUIFrameConf(void 0)}))}_addFTScripterRecorderFunc(e,t){}commit(){var e=this,n=t.DEFAULT_COMPONENT_NAME;e._handlerComponent=e._executionContext.getComponent(n);var r=e._handlerComponent._private._chkHdlrMap,o=e._handlerComponent._private._radioHdlrMap,i=e._handlerComponent.getLeafHandlerMaps(),a=i.actionHandlers,s=i.commandHandlers,l=!1;if(!this._handlerComponent)throw new Error("HandlerComponent not found");var m=this._treeDocument.getChildren();return this._treeDocument.prepareUpdate(),m.forEach((function(t){var n=t.options.grid.identifier,i="";const m=t.options.grid.category;if(a.hasOwnProperty(n)){i=void 0!==t.options.grid.set?"commandFlyout":"actionHandler",Array.isArray(t.options.grid.category)&&t.options.grid.category.includes("WAfrFront")&&(l=!0);let r=d(a[n]);e._addFTScripterRecorderFunc(r,m),t.updateOptions({grid:{type:i,typeView:"actionHandler",handler:r}})}else if(s.hasOwnProperty(n)){i=void 0!==t.options.grid.set?"commandFlyout":"commandHandler",Array.isArray(t.options.grid.category)&&t.options.grid.category.includes("WAfrFront")&&(l=!0);let r=p(s[n]);e._addFTScripterRecorderFunc(r,m),t.updateOptions({grid:{type:i,typeView:"commandHandler",handler:r}})}else if(r.hasOwnProperty(n)){i=void 0!==t.options.grid.set?"commandFlyout":"checkHandlerButton",Array.isArray(t.options.grid.category)&&t.options.grid.category.includes("WAfrFront")&&(l=!0);let o=c(r[n]);e._addFTScripterRecorderFunc(o,m),t.updateOptions({grid:{type:i,typeView:"checkHandlerButton",handler:o}})}else if(o.hasOwnProperty(n)){i=void 0!==t.options.grid.set?"commandFlyout":"radioHandler",Array.isArray(t.options.grid.category)&&t.options.grid.category.includes("WAfrFront")&&(l=!0);let r="radioHandler";void 0!==t.options.grid.typeRepresentation&&(r=t.options.grid.typeRepresentation,i=r);let a=u(o[n]);e._addFTScripterRecorderFunc(a,m),t.updateOptions({grid:{type:i,typeView:r,handler:a}})}})),e._treeDocument.pushUpdate(),e._uiComponent.setTagList({tab:e._tagList}),e._uiComponent.setGlobalFlatModel({model:e._treeDocument}),!1===e._mainComponentAvailability&&e._uiComponent.deactivateMainComponent(),e._uiComponent._isMABAvailable=l,e._uiComponent.setMainComponentCategoriesOrder(e._mainComponentCategoriesOrder),e._uiComponent.setCategories(e._categories),Promise.resolve()}enrich(e,t){if(!e||!t)throw new Error("Missing parameters");const n=e.UIModel;let r=Promise.resolve();return n&&n.handlerList&&(g(this,n),f(this,n),void 0!==n.mainComponent&&Array.isArray(n.mainComponent.categoriesOrder)&&(void 0===this._mainComponentCategoriesOrder?this._mainComponentCategoriesOrder=n.mainComponent.categoriesOrder:this._mainComponentCategoriesOrder=this._mainComponentCategoriesOrder.concat(n.mainComponent.categoriesOrder)),n.categories&&v(this,n),r=this.commit()),r}}var b={generateInterpreter:function(e,t){let n;return n=void 0!==t?new Promise(((e,n)=>{if(!t.a2x)return e(new P);require(["DS/WAfrA2XUIStandardComponents/mod_A2XUIInterpreter"],(t=>{const r=t.A2XUIInterpreter;return r?e(new r):n("Impossible to find the UI interpreter constructor.")}),n)})):Promise.resolve(new P),n}};return b.DefaultUIInterpreter=P,b}));