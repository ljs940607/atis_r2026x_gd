define("DS/VCXWebStyles/VCXModifiableStyle",["DS/VCXWebProperties/VCXPropertySet","DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],(function(e,t,i,r,o,a){"use strict";return t.extend({init:function(){this._parent()},OnChangeProperty:function(e,t,i){if(i||(i={}),i.fromChildClass);else if(this.OnChangePropertyBegin(e,t))return!0;if("Actor.Name"===e)this.GetObject().SetName(t.Value);else{var r=this.GetObject().GetPropertySet().GetProperty(e);if(!r)return i.fromChildClass=!0,this._parent(e,t,i);r.SetPropertyValue(t.Clone()),this.GetObject().GetPropertySet().AddOrModifyProperty(r)}return!0},OnChangePropertiesEnd:function(){},GetProperty:function(e){var t;if("Actor.Name"===e){var l=new i,s=this.GetObject().GetName();l.SetValue(s);var n=new o(e,o.EBehaviorType.Singleton,!0,a);t=new r(n,l)}else t=(t=this.GetObject().GetPropertySet().GetProperty(e))?t.Clone():this._parent(e);return t},GetProperties:function(){var e=this._parent();return e.AddOrModifyProperty(this.GetProperty("Actor.Name")),e.Merge(this.GetObject().GetPropertySet()),e}})}));var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebStyles/VCXComponentStyle",["require","exports","DS/Visualization/ThreeJS_DS","DS/WebComponentModeler/WebComponentBase","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebIO/VCXCanvasServices","DS/VCXWebProperties/VCXColor"],(function(e,t,i,r,o,a,l,s,n,y,c){"use strict";y=__importDefault(y),c=__importDefault(c);class h extends r{constructor(){super(...arguments),this.propSet=new l,this.name="Style Name",this.origin=h.EOriginType.custom}GetName(){return this.name}SetName(e){this.name=e}SetPropertySet(e){this.propSet=e.Clone()}GetPropertySet(){return this.propSet}GetPropertyMapToSave(){const e=this._experienceBase.getManager("VCXStylesManager"),t=new s;let i=0;t.SetValueAtIndex(i++,new n("1.0.0")),t.SetValueAtIndex(i++,new n(this.GetName())),t.SetValueAtIndex(i++,new n(this.GetID())),t.SetValueAtIndex(i++,new n(e.GetForType(this)));const r=new s;t.SetValueAtIndex(i++,r);const o=this.QueryInterface("VCXIModifiable").GetProperties(!0),a=[];o.GetListPropertyNames(a);let l=0;return a.forEach((e=>{if("Actor.Name"===e)return;const t=new s;r.SetValueAtIndex(l++,t),t.SetValueAtIndex(0,new n(e)),t.SetValueAtIndex(1,o.GetProperty(e).GetPropertyValue())})),t}static BuildFromPropertyMapToLoad(e,t){let i=1;const r=e.GetValueAtIndex(i++).GetValue(),s=e.GetValueAtIndex(i++).GetValue(),n=e.GetValueAtIndex(i++).GetValue(),y=e.GetValueAtIndex(i++).GetValue(),c=new l;return y.forEach((e=>{const t=e.GetValueAtIndex(0).GetValue(),i=e.GetValueAtIndex(1),r=new o(new a(t,a.EBehaviorType.Singleton),i);c.AddOrModifyProperty(r)})),t.CreateStyleFromPropertySet(c,n,s,r)}GetOrigin(){return this.origin}SetOrigin(e){this.origin=e}_GetProperty(e){const t=this.GetPropertySet();for(let i=0;i<e.length;i++){const r=t.GetProperty(e[i])&&t.GetProperty(e[i]).GetPropertyValue();if(void 0!==r)return r}}_GetPropertyValue(e){const t=this._GetProperty(e);return t&&t.GetValue()}SetShadow(e,t,i){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,t&&(e.shadowColor="rgba(61, 61, 61, 0.4)",e.shadowBlur=i>30?3:2,e.shadowOffsetX=i>30?2:1,e.shadowOffsetY=i>30?2:1)}Get2DCalloutShapeInfo(e,t){return{x:e>30?16:8,y:e>30?2:1,width:e>30?12:10,height:e>30?12:10,cornerRadius:e>30?4:3,shape:this._GetPropertyValue(["Collab.Body.Shape"]),font:(e>30?7:6)+"px "+t}}Get2DLabelShapeInfo(e,t){return{x:e>30?8:4,y:e>30?2:1,width:e>30?21:16,height:e>30?12:10,cornerRadius:e>30?4:3,shape:this._GetPropertyValue(["Collab.Body.Shape"]),font:(e>30?7:6)+"px "+t}}Get2DPanelShapeInfo(e,t){return{x:e>30?2:1,y:e>30?6:5,width:e>30?26:18,height:e>30?16:11,cornerRadius:e>30?4:3,shape:this._GetPropertyValue(["Collab.Body.Shape"]),font:(e>30?9:7)+"px "+t}}Get2DImagePanelShapeInfo(e,t){return{x:e>30?2:1,y:e>30?2:1,width:e-2*(e>30?2:1),height:e-2*(e>30?2:1),cornerRadius:0,shape:this._GetPropertyValue(["Collab.Body.Shape"]),font:(e>30?9:7)+"px "+t}}DrawPath(e,t){e.beginPath();let i=t.pop();for(e.moveTo(i?.x,i?.y);i=t.pop();)e.lineTo(i?.x,i?.y)}DrawSectionShapePath(e,t){const r=t>30?2:1,o=t>30?t-3:t-1,a=t>30?8:7,l=t>30?3:2,s=t>30?23:17,n=t>30?t-3:t-1,y=[];y.push(new i.Vector2(r,a)),y.push(new i.Vector2(o,l)),y.push(new i.Vector2(o,s)),y.push(new i.Vector2(r,n)),y.push(new i.Vector2(r,a)),this.DrawPath(e,y)}DrawArrowShapePath(e,t){const r=.15*t,o=.25*t,a=.25*t,l=.5*t-2,s=l-a,n=.5*-t+1,y=n+a,c=.5*-r,h=-o,p=o,d=.5*r,u=[];u.push(new i.Vector2(0,c)),this._GetPropertyValue(["Arrow.Head.ShowMode"])?(u.push(new i.Vector2(s,c)),u.push(new i.Vector2(s,h)),u.push(new i.Vector2(l,0)),u.push(new i.Vector2(s,p)),u.push(new i.Vector2(s,d))):(u.push(new i.Vector2(l,c)),u.push(new i.Vector2(l,d))),u.push(new i.Vector2(0,d)),this._GetPropertyValue(["Arrow.Head.2.ShowMode"])?(u.push(new i.Vector2(y,d)),u.push(new i.Vector2(y,p)),u.push(new i.Vector2(n,0)),u.push(new i.Vector2(y,h)),u.push(new i.Vector2(y,c))):(u.push(new i.Vector2(n,d)),u.push(new i.Vector2(n,c))),u.push(new i.Vector2(0,c));const S=Math.cos(-.25*Math.PI),C=Math.sin(-.25*Math.PI);u.forEach((e=>{const i=e.x*S-e.y*C+.5*t,r=e.x*C+e.y*S+.5*t;e.x=i,e.y=r})),this.DrawPath(e,u)}GetThumbnail(e,t,i){let r=!0,o=this._GetPropertyValue(["Collab.Background.Color","Arrow.Body.Color","Actor.Color"]),a=this._GetPropertyValue(["Collab.Background.Color.Opacity","Arrow.Body.Color.Opacity","Actor.Color.Opacity","Actor.Opacity"]),l=this._GetPropertyValue(["Collab.Background.Color","Arrow.Body.2.Color","Actor.Color"]),s=this._GetPropertyValue(["Collab.Background.Color.Opacity","Arrow.Body.2.Color.Opacity","Actor.Color.Opacity","Actor.Opacity"]),n=!0,p=this._GetPropertyValue(["Collab.Border.Line.Color","Collab.Body.Line.Color"]),d=this._GetPropertyValue(["Collab.Border.Line.Color.Opacity","Collab.Body.Line.Color.Opacity"]),u=this._GetPropertyValue(["Collab.Border.Line.Width","Collab.Body.Line.Width"]),S=this._GetPropertyValue(["Collab.Text.Show"]),C=this._GetPropertyValue(["Collab.Text.Color"]),b=this._GetPropertyValue(["Collab.Text.Color.Opacity"]),f=this._GetProperty(["Collab.Text.Font"])?.GetFamily()?.Value,m=this._GetPropertyValue(["Collab.Attach.Show"]),g=this._GetPropertyValue(["Collab.Attach.Line.Color","Collab.Body.Line.Color","Actor.Color"]),V=this._GetPropertyValue(["Collab.Attach.Line.Color.Opacity","Collab.Body.Line.Color.Opacity","Actor.Color.Opacity","Actor.Opacity"]),_=this._GetPropertyValue(["Collab.Attach.Line.Type","Collab.Body.Line.Type"]),P=this._GetPropertyValue(["Collab.Image.Show"]);switch(e){case"VCXLabel_Spec":case"VCXMeasurement_Spec":case"VCXCallout_Spec":case"VCXPanel_Spec":case"VCXPanel_Spec.1":n=this._GetPropertyValue(["Collab.Border.Show"]),r=this._GetPropertyValue(["Collab.Background.Show"]);break;case"VCXCircle_Spec":r=this._GetPropertyValue(["Circle.Background.Type"]),s=1===this._GetPropertyValue(["Circle.Background.Type"])?0:1;break;case"VCXPolyline_Spec":case"VCXRedLine_Spec":case"VCXAssociativePath_Spec":r=!1,m=!0,n=!1;break;case"VCXSection_Spec":P=!1,r=this._GetPropertyValue(["Section.Plane.Enable"]),n=r,p=o,d=1}const I=(e,t)=>e+Math.round(255*Math.min(Math.max(void 0===t?1:t,0),1)).toString(16).padStart(2,"0").toUpperCase(),D=t,G=t,X=document.createElement("canvas");X.width=t,X.height=t;const x=X.getContext("2d");if(!x)return null;let M={x:t>30?3:2,y:t>30?3:2,width:t>30?t-6:t-4,height:t>30?t-6:t-4,cornerRadius:0,shape:h.EBodyShape.Circle,font:(t>30?8:6)+"px "+f};switch(e){case"VCXLabel_Spec":case"VCXMeasurement_Spec":M=this.Get2DLabelShapeInfo(t,f);break;case"VCXCallout_Spec":M=this.Get2DCalloutShapeInfo(t,f);break;case"VCXPanel_Spec":M=this.Get2DPanelShapeInfo(t,f);break;case"VCXPanel_Spec.1":M=this.Get2DImagePanelShapeInfo(t,f);break;case"VCXHotspot_Spec":M.shape=this._GetPropertyValue(["Collab.Body.Shape"])}if("VCXSection_Spec"===e){const e=this._experienceBase.getManager("VCXStylesManager").GetPlaceHolderSectionIcon();e&&x.drawImage(e,0,0,32,32,0,0,t,t)}if(x.globalAlpha=1,x.lineWidth=2,x.globalAlpha=1,g&&void 0!==V&&0!==V){x.save();let i=[];switch(_){case 1:i=[4,2];break;case 2:i=[6,2];break;case 3:i=[8,2,2,2];break;case 4:i=[8,2];break;case 5:i=[2,2];break;case 6:i=[10,2]}switch(x.setLineDash(i),x.strokeStyle="#"+g.getHexString(),x.fillStyle="#"+g.getHexString(),void 0!==V&&1!==V&&(x.globalAlpha=V),this.SetShadow(x,!0,t),e){case"VCXLabel_Spec":case"VCXCallout_Spec":case"VCXPanel_Spec":case"VCXPanel_Spec.1":if(m){const e=t>30?3:2,i=t>30?28:19;x.beginPath(),x.arc(e,i,t>30?2.5:2,0,2*Math.PI),x.fill(),x.beginPath(),30===this._GetPropertyValue(["Collab.Attach.LeadType"])?(x.moveTo(M.x,M.y+M.height),x.lineTo(M.x+M.width,M.y+M.height),x.moveTo(M.x,M.y+M.height)):10===this._GetPropertyValue(["Collab.Attach.LeadType"])?x.moveTo(M.x+.5*M.width-3,M.y+.5*M.height+3):40===this._GetPropertyValue(["Collab.Attach.LeadType"])?x.moveTo(M.x,M.y+.5*M.height):x.moveTo(M.x+.5*M.width,M.y+M.height),x.lineTo(e,i),x.stroke()}break;case"VCXMeasurement_Spec":const e=t>30?3:2,i=t>30?20:15,r=t>30?28:19,o=t>30?28:19;x.beginPath(),x.arc(e,i,t>30?2.5:2,0,2*Math.PI),x.arc(r,o,t>30?2.5:2,0,2*Math.PI),x.fill(),x.beginPath(),x.moveTo(M.x,M.y+.5*M.height),x.lineTo(e,M.y+.5*M.height),x.lineTo(e,i),x.moveTo(r,M.y+.5*M.height),x.lineTo(r,o),x.stroke(),x.beginPath(),x.lineWidth=1,x.globalAlpha=1,x.strokeStyle="#"+(new c.default).SetRGBA(0,0,0,1).getHexString(),x.setLineDash([3,3]),x.moveTo(e,i),x.lineTo(r,o),x.stroke();break;case"VCXPolyline_Spec":this.SetShadow(x,!1,t),x.beginPath(),x.moveTo(M.x,M.y+M.height),x.lineTo(M.x+M.width,M.y),x.stroke();break;case"VCXAssociativePath_Spec":this.SetShadow(x,!1,t),x.beginPath(),x.moveTo(M.x,M.y+M.height),x.lineTo(M.x+.1*M.width,M.y+.2*M.height),x.lineTo(M.x+.9*M.width,M.y+.8*M.height),x.lineTo(M.x+M.width,M.y),x.stroke();break;case"VCXRedLine_Spec":this.SetShadow(x,!1,t),x.beginPath(),x.moveTo(M.x,M.y+.5*M.height),x.bezierCurveTo(.3*M.width,1.75*M.height,.4*M.width,.4*-M.height,M.x+M.width,M.y+.3*M.height),x.stroke()}x.restore()}let w=!1;if(x.globalAlpha=1,x.lineWidth=1,r&&o&&l&&(a||s)){let i;if("VCXCircle_Spec"===e)i=x.createRadialGradient(.5*D,.5*D,.5*D-1,.5*D,.5*D,Math.floor(Math.max((1-.01*this._GetPropertyValue(["Circle.Thickness"]))*D*.5-1,0)));else i=x.createLinearGradient(.5*D+.3*D,.5*G-.3*G,.5*D-.3*D,.5*G+.3*G);let r="#"+o.getHexString();void 0!==a&&1!==a&&(r=I(r,a),x.globalAlpha=a);let n="#"+l.getHexString();switch(void 0!==s&&1!==s&&(n=I(n,s)),i.addColorStop(0,r),i.addColorStop(1,n),x.fillStyle=i,this.SetShadow(x,!w,t),w=!0,e){case"VCXLabel_Spec":case"VCXMeasurement_Spec":case"VCXCallout_Spec":case"VCXPanel_Spec":case"VCXPanel_Spec.1":default:y.default.drawShapePath(x,M,h.EBodyShape);break;case"VCXArrow_Spec":this.DrawArrowShapePath(x,t);break;case"VCXSection_Spec":this.DrawSectionShapePath(x,t);break;case"VCXHotspot_Spec":const e={...M},i=.01*this._GetPropertyValue(["Hotspot.Radius.Inner"]);e.width*=i,e.height*=i,e.x=M.x+.5*M.width-.5*e.width,e.y=M.y+.5*M.height-.5*e.height,e.shape=this._GetPropertyValue(["Collab.Body.Shape.Inner"]),y.default.drawShapePath(x,e,h.EBodyShape)}x.fill()}if(P){x.save(),x.globalAlpha=1,x.lineWidth=1,this.SetShadow(x,!w,t),w=!0;let i=!1;switch(e){case"VCXLabel_Spec":case"VCXMeasurement_Spec":case"VCXCallout_Spec":case"VCXPanel_Spec":case"VCXPanel_Spec.1":default:y.default.drawShapePath(x,M,h.EBodyShape),i=!0;break;case"VCXArrow_Spec":this.DrawArrowShapePath(x,t)}if(i){x.clip();const e=this._experienceBase.getManager("VCXStylesManager").GetPlaceHolderIcon();e&&x.drawImage(e,0,0,234,234,t>30?3:2,t>30?3:2,t-(t>30?6:4),t-(t>30?6:4))}x.restore()}if(x.globalAlpha=1,n&&p&&void 0!==d&&0!==d){switch(x.lineWidth=u<5?1:u>=10?3:2,x.strokeStyle="#"+p.getHexString(),void 0!==d&&1!==d&&(x.globalAlpha=d),this.SetShadow(x,!w,t),w=!0,e){case"VCXLabel_Spec":case"VCXMeasurement_Spec":case"VCXCallout_Spec":case"VCXPanel_Spec":case"VCXPanel_Spec.1":default:y.default.drawShapePath(x,M,h.EBodyShape);break;case"VCXArrow_Spec":this.DrawArrowShapePath(x,t);break;case"VCXSection_Spec":this.DrawSectionShapePath(x,t);break;case"VCXHotspot_Spec":this.SetShadow(x,!0,t),y.default.drawShapePath(x,M,h.EBodyShape)}x.stroke()}if(x.lineWidth=1,x.globalAlpha=1,S&&C&&void 0!==b&&0!==b){this.SetShadow(x,!w,t),w=!0,x.fillStyle="#"+C.getHexString(),void 0!==b&&1!==b&&(x.globalAlpha=b),x.textAlign="center",x.textBaseline="middle";let i="Abc";"VCXCallout_Spec"===e?i="12":"VCXMeasurement_Spec"===e&&(i="1mm"),x.font=M.font,x.fillText(i,M.x+.5*M.width,M.y+.5*M.height)}return this.SetShadow(x,!1,t),X.toDataURL()}get componentType(){return"VCXComponentStyle"}}return function(e){let t,i;!function(e){e[e.application=0]="application",e[e.admin=1]="admin",e[e.custom=2]="custom"}(t=e.EOriginType||(e.EOriginType={})),function(e){e[e.None=0]="None",e[e.Rectangle=10]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Square=20]="Square",e[e.RoundedSquare=2]="RoundedSquare",e[e.Ellipse=4]="Ellipse",e[e.Circle=3]="Circle",e[e.Rhombus=5]="Rhombus",e[e.RemoveBorder=6]="RemoveBorder",e[e.User=7]="User",e[e.CircumscribedCircle=8]="CircumscribedCircle"}(i=e.EBodyShape||(e.EBodyShape={}))}(h||(h={})),h})),define("DS/VCXWebStyles/VCXIStylesHolder",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("DS/VCXWebStyles/VCXModifiableStylesManager",["DS/VCXWebStyles/VCXComponentStyle","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],(function(e,t,i,r,o,a,l,s){"use strict";return i.extend({init:function(){this._parent()},OnChangeProperty:function(t,i,r){if(r||(r={}),r.fromChildClass);else if(this.OnChangePropertyBegin(t,i))return!0;return"Actor.Custom.Styles"===t?i.GetValue().forEach((t=>{e.BuildFromPropertyMapToLoad(t,this.GetObject())})):"Actor.Custom.Styles.Favorites"===t&&i.GetValue().forEach((e=>{this.GetObject().SetFavorite(e.GetValueAtIndex(0).GetValue(),e.GetValueAtIndex(1).GetValue())})),!0},OnChangePropertiesEnd:function(){},GetProperty:function(t){let i;if("Actor.Custom.Styles"===t){const o=new l(t,l.EBehaviorType.Singleton,!0,s),n=new r;let y=0;for(const t in this.GetObject()._styles){const i=this.GetObject()._styles[t];i.GetOrigin()===e.EOriginType.custom&&n.SetValueAtIndex(y++,i.GetPropertyMapToSave())}i=new a(o,n)}else if("Actor.Custom.Styles.Favorites"===t){const e=new l(t,l.EBehaviorType.Singleton,!0,s),n=new r;let y=0;for(const e in this.GetObject()._stylesFavorites){const t=this.GetObject()._stylesFavorites[e],i=new r;i.SetValueAtIndex(0,new o(e)),i.SetValueAtIndex(1,new o(t)),n.SetValueAtIndex(y++,i)}i=new a(e,n)}return i},GetProperties:function(){var e=this._parent();return e.AddOrModifyProperty(this.GetProperty("Actor.Custom.Styles")),e.AddOrModifyProperty(this.GetProperty("Actor.Custom.Styles.Favorites")),e}})}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebStyles/VCXStylesManager",["require","exports","DS/WebappsUtils/WebappsUtils","DS/CoreEvents/Events","DS/VCXWebExperienceLoader/VCXExperienceLoaderBase","DS/VCXWebComponents/VCXWebComponentBaseExperience","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebStyles/VCXComponentStyle","DS/VCXWebIO/VCXCanvasServices","DS/VCXWebKernelCommands/VCXCmdChangeNeutralProperties","DS/VCXWebKernelCommands/VCXCmdChangePropertiesAutokey","DS/VCXWebKernelCommands/VCXCmdChangeLinkedProperties","DS/VCXWebKernelCommands/VCXCmdChangeKeys","DS/VCXWebIO/VCXFileServices"],(function(e,t,i,r,o,a,l,s,n,y,c,h,p,d,u,S,C){"use strict";a=__importDefault(a),h=__importDefault(h),p=__importDefault(p),d=__importDefault(d),u=__importDefault(u),S=__importDefault(S),C=__importDefault(C);class b extends a.default{constructor(){super(...arguments),this.stylesForType={},this._stylesID={},this._stylesfiles={},this._styles={},this._stylesIntegerID={},this._stylesVisibility={},this._stylesFavorites={},this._stylesNextIntegerID=1,this._isInitialized=!0,this._numberOfFilesToLoad=0,this._numberOfFilesLoaded=0,this._masterfilevar=null,this._moduleName="",this._placeHolderIcon=null,this._placeHolderSectionIcon=null}initialize(){return this.stylesForType={},this._stylesID={},this._stylesfiles={},this._styles={},this._stylesIntegerID={},this._stylesVisibility={},this._stylesFavorites={},this._stylesNextIntegerID=1,this._isInitialized=!0,this._numberOfFilesToLoad=0,this._numberOfFilesLoaded=0,this._masterfilevar=null,this.LoadStyles(this._moduleName)}unInitialize(){this._isInitialized=!1,this._styles={}}async postInitialize(){this._placeHolderIcon=await h.default.loadImage(i.getWebappsAssetUrl("VCXWebStyles","icons/I_VCX_StylePlaceHolder.png")),this._placeHolderSectionIcon=await h.default.loadImage(i.getWebappsAssetUrl("VCXWebStyles","icons/I_VCX_StyleCutObject.png"))}SetModuleName(e){this._moduleName=e}GetModuleName(){return this._moduleName}GetPlaceHolderIcon(){return this._placeHolderIcon}GetPlaceHolderSectionIcon(){return this._placeHolderSectionIcon}ParseMasterFiles(e){var t=[];this._masterfilevar=e;for(var i=0;i<e.styles.length;i++){var r=e.styles[i];if(r.x){for(var o=0;o<r.x.length;o++){var a=r.x[o];this._numberOfFilesToLoad++,t.push(this.LoadStyle(this._moduleName,"styles/"+a+".json",a))}for(var l=0;l<r.y.length;l++){var s=r.y[l];this._numberOfFilesToLoad++,t.push(this.LoadStyle(this._moduleName,"styles/"+s+".json",s))}}if(r.list)for(var n=0;n<r.list.length;n++){var y=r.list[n];this._numberOfFilesToLoad++,t.push(this.LoadStyle(this._moduleName,"styles/"+y+".json",y))}}return Promise.all(t)}async LoadStyles(e){if(!this._moduleName)return;var t=i.getWebappsAssetUrl(e,"styles/styles_list.json");const r=await C.default.PBlobURLToJSONText(t);return this.ParseMasterFiles(r)}async LoadStyle(e,t,r){var o=i.getWebappsAssetUrl(e,t);return this.LoadStyleURL(o,r)}async LoadStyleURL(e,t){var i=t;const r=await C.default.PBlobURLToBlob(e,""),o=await C.default.PBlobToFileVar(r);var a=i;if(this._isInitialized&&(this._stylesID[a]=o.objectID,this._stylesfiles[a]=this.BuildStyle(o),o.visible?this._stylesVisibility[o.objectID]=!0:this._stylesVisibility[o.objectID]=!1,this._numberOfFilesLoaded++,this._numberOfFilesLoaded===this._numberOfFilesToLoad)){this.stylesForType={};const e=this._masterfilevar;for(var l=0;l<e.styles.length;l++){var s=e.styles[l];const t=s.type;if(this.stylesForType[t]=[],s.x)for(var n=0;n<s.x.length;n++)for(var y=s.x[n],h=0;h<s.y.length;h++){var p=s.y[h],d=this._stylesfiles[y],u=this._stylesfiles[p];(f=d.Clone()).Merge(u);var S=this._stylesID[y]+"."+this._stylesID[p];const e=this.BuildStyleFromPropertySet(f,S,y+" "+p);e&&e.SetOrigin(c.EOriginType.application),this.stylesForType[t].push(S)}if(s.list)for(var b=0;b<s.list.length;b++){a=s.list[b];var f=(d=this._stylesfiles[a]).Clone();S=this._stylesID[a];const e=this.BuildStyleFromPropertySet(f,S,a);e&&e.SetOrigin(c.EOriginType.application),this.stylesForType[t].push(S)}}}}GetStylesForType(e){const t=this.stylesForType[e],i=[];return t&&t.forEach((e=>{if(this._stylesVisibility[e]){const t=this.GetStyleFromSTRId(e);i.push({idx:e,style:t})}})),i.sort(((e,t)=>e.style.GetOrigin()>t.style.GetOrigin()?-1:e.style.GetOrigin()<t.style.GetOrigin()?1:e.idx<t.idx?-1:e.idx>t.idx?1:0))}BuildStyle(e){var t=new o;return t.InitLoader(this._experienceBase),t.LoadPropSet(e.properties)}createContentCommandsPanel(e,t){let i={};const r=e.QueryInterface("VCXIStylesHolder").getStyleType(),o=this.GetStylesForType(r);return o.forEach((e=>{const o=e.idx,a=this.GetStyleIDAndTranslatedName(o,r,t,32,this.GetFavorite(r)===o);let l={type:"button"};l.name=o,l.cmdId={id:"VCXDressupChangeStyleCmd",args:{styleID:o,_styleID:o}},l.iconPath=a.thumbnail,i[l.name]=l})),i}GetStyleIDAndTranslatedName(e,t,i,r,o){const a=this._stylesIntegerID[e];if(void 0===a)return{id:null,name:""};let l,s=e;return 0===this._styles[a].origin?(s=i&&i[e]||this._styles[a].name||e,l=o?"brush-ok":"brush"):(s=this._styles[a].name||e,l=o?"user-ok":"user"),{id:a,style:this._styles[a],name:s,iconName:l,visible:this._stylesVisibility[e],thumbnail:r&&this._styles[a].GetThumbnail(t,r,o)}}SetStyleName(e,t){const i=this._stylesIntegerID[e];return 0!==this._styles[i].origin&&(this._styles[i].name=t,!0)}DeleteStyle(e){this.UnSubscribeAll(e);const t=this._stylesIntegerID[e],i=this._experienceBase.getManager("VCXScenarioManager"),r=new p.default(this._experienceBase);let o=0;const a=new S.default(this._experienceBase);let l=0;i.SearchAllValuesForOneProperty({propertyName:"Modifiable.StyleID",oldValue:e},(e=>{this._styles[t].GetPropertySet().onEachProperty(((t,i)=>{const s=e.modifiable.GetObject()?.QueryInterface("VCXIStylesHolder");s&&(s.GetStyleExclusion&&s.GetStyleExclusion().includes(t)||(e&&"Neutrals"===e.type&&(r.ChangeProperty(e.modifiable,t,i.GetPropertyValue()),o++),e&&"Track"===e.type&&(a.ChangeKey(e.Scenario,e.modifiable,t,e.Frame,i.GetPropertyValue(),e.Easing),l++)))})),e&&"Neutrals"===e.type&&(r.ChangeProperty(e.modifiable,"Modifiable.StyleID",new n("")),r.ChangeProperty(e.modifiable,"Modifiable.Style.Exclusion",new y),o++),e&&"Track"===e.type&&(a.ChangeKey(e.Scenario,e.modifiable,"Modifiable.StyleID",e.Frame,new n(""),e.Easing),a.ChangeKey(e.Scenario,e.modifiable,"Modifiable.Style.Exclusion",e.Frame,new y,e.Easing),l++)}));const s=this._experienceBase.getManager("VCXCommandManager");o&&this._experienceBase.getManager("VCXCommandManager").Push(r),l&&this._experienceBase.getManager("VCXCommandManager").Push(a);let c=!1;0!==this._styles[t].origin&&(delete this._styles[t],delete this._stylesIntegerID[e],delete this._stylesVisibility[e],c=!0);const h=this.QueryInterface("VCXIModifiable"),d=new p.default(this._experienceBase);return h&&d.CaptureNeutralProperties(h),s.Push(d),c}GetStyleIDFromSTRId(e){return this._stylesIntegerID[e]}GetStyleFromSTRId(e){const t=this._stylesIntegerID[e];return(t&&this._styles[t])??null}BuildStyleFromPropertySet(e,t,i,r){if(e.onEachProperty(((e,t)=>{t.GetPropertyInfo().SetBehaviorType(l.EBehaviorType.Singleton)})),r||(r=this._experienceBase?.Factory?.BuildComponent("VCXComponentStyle"),r&&(r.SetPersistency(2),r.SetID(t),r.SetName(i),this._experienceBase.ComponentsMap.AddComponent(r),this._styles[this._stylesNextIntegerID]=r,this._stylesIntegerID[r.GetID()]=this._stylesNextIntegerID,this._stylesNextIntegerID++)),!r)return null;r.SetPropertySet(e);var o=r.QueryInterface("VCXIModifiable");if(!o)return null;var a=new d.default(this._experienceBase);return e.onEachProperty(((e,t)=>{a.ChangeProperty(o,t)})),this._experienceBase.getManager("VCXCommandManager").Do(a),r}FindStyleName(e){let t,i=0,r=!1;for(;!r;){r=!0,i++,t=e+" - New Style("+i+")";for(const e in this._styles){this._styles[e].name===t&&(r=!1)}}return t}GetForType(e){for(const t in this.stylesForType)if(this.stylesForType[t].indexOf(e.GetID())>=0)return t;return null}CreateStyleFromPropertySet(e,t,i,o){const a=this.BuildStyleFromPropertySet(e,i,o);if(!a)return null;this.stylesForType[t]||(this.stylesForType[t]=[]),this.stylesForType[t].indexOf(a.GetID())<0&&this.stylesForType[t].push(a.GetID()),this._stylesVisibility[a.GetID()]=!0;const l=[];return l.push(a),r.publish({event:"VCX_STYLE_ADDED",data:l}),a}CreateStyle(e,t,i){for(var r=new s,o=0;o<e.length;o++)r.AddOrModifyProperty(t.GetProperty(e[o]));const a=t.QueryInterface("VCXIStylesHolder").getStyleType(),l=this.CreateStyleFromPropertySet(r,a,"",i),n=this._experienceBase.getManager("VCXCommandManager"),y=this.QueryInterface("VCXIModifiable"),c=new p.default(this._experienceBase);return y&&c.CaptureNeutralProperties(y),n.Push(c),l}UpdateStyle(e,t,i){for(var o=new s,a=0;a<e.length;a++)o.AddOrModifyProperty(t.GetProperty(e[a]));const l=this._stylesIntegerID[i],n=this._styles[l];this.BuildStyleFromPropertySet(o,"","",n);const y=[];y.push(n),r.publish({event:"VCX_STYLE_UPDATED",data:y});this._experienceBase.getManager("VCXScenarioManager").SearchForImpactedProperty("Modifiable.StyleID",(e=>{const t=e?.property?.GetPropertyValue()?.GetValue();t===n.GetID()&&e?.scenario?.SetDocDirty(!0)}));const c=this._experienceBase.getManager("VCXCommandManager"),h=this.QueryInterface("VCXIModifiable"),d=new p.default(this._experienceBase);return h&&d.CaptureNeutralProperties(h),c.Push(d),n}SetFavorite(e,t){this._stylesFavorites[e]=t;const i=this._experienceBase.getManager("VCXCommandManager"),r=this.QueryInterface("VCXIModifiable"),o=new p.default(this._experienceBase);r&&o.CaptureNeutralProperties(r),i.Push(o)}GetFavorite(e){return this._stylesFavorites[e]}Subscribe(e,t){const i=this._stylesIntegerID[t],r=this._styles[i];if(r){const i=new u.default(this._experienceBase);return r.GetPropertySet().onEachProperty(((r,o)=>{const a=e.QueryInterface("VCXIStylesHolder");a.GetStyleExclusion&&a.GetStyleExclusion().includes(r)||i.AddLink(t,r,e.GetObject().GetID(),r,null)})),this._experienceBase.getManager("VCXCommandManager").Do(i),!0}return!1}UnSubscribe(e,t){var i=this._stylesIntegerID[t],r=this._styles[i];if(r){var o=this._experienceBase.getManager("VCXCommandManager"),a=new u.default(this._experienceBase);r.GetPropertySet().onEachProperty(((i,r)=>{a.RemoveLink(t,i,e.GetObject().GetID(),i)})),o.Do(a)}}UnSubscribeAll(e){const t=this._experienceBase.getManager("VCXLinkedPropertyManager").GetLinksFromInComponentID(e),i=this._experienceBase.getManager("VCXCommandManager");if(t){var r=new u.default(this._experienceBase);t.forEach((e=>{r.RemoveLink(e.inID,e.inProp,e.outID,e.outProp)})),i.Do(r)}}get componentType(){return"VCXStylesManager"}}return b}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebStyles/VCXStylesModifiableServices",["require","exports","DS/VCXWebStyles/VCXComponentStyle","DS/VCXWebKernelCommands/VCXCmdChangePropertiesAutokey"],(function(e,t,i,r){"use strict";r=__importDefault(r);class o{static emptyExclusionList(e){const t=e.GetObject()._experienceBase,i=o.checkStyleContext(e),a=t.getManager("VCXCommandManager"),l=t.getManager("VCXStylesManager"),s=new r.default(t),n=i.modifiable.GetProperty("Modifiable.Style.Exclusion");n.GetPropertyValue().Value=[],n.SetPropertyValue(n.GetPropertyValue()),s.ChangeProperty(i.modifiable,n),a.Push(s),l.Subscribe(i.modifiable,i.styleID)}static checkStyleContext(e){const t=e.GetObject()._experienceBase,r=e.QueryInterface("VCXIModifiable"),o=t.getManager("VCXStylesManager"),a=r.GetProperty("Modifiable.StyleID").GetPropertyValue().GetValue(),l=r.QueryInterface("VCXIStylesHolder"),s=l.getStyleType(),n=a&&o.GetStyleFromSTRId(a),y=s&&o.GetFavorite(s),c={styleName:n&&n.name,styleID:a,style:n,modifiable:r,favorite:y,styleType:s,isFavorite:y===a,createAvailable:!1,updateAvailable:!1,restoreAvailable:!1,favoriteAvailable:!1,renameAvailable:!1,deleteAvailable:!1};return(l.GetStyleExclusion&&l.GetStyleExclusion().length>0||!a)&&(c.createAvailable=!0),a&&n&&n.GetOrigin()!==i.EOriginType.application&&l.GetStyleExclusion&&l.GetStyleExclusion().length>0&&(c.updateAvailable=!0),a&&l.GetStyleExclusion&&l.GetStyleExclusion().length>0&&(c.restoreAvailable=!0),!a||l.GetStyleExclusion&&l.GetStyleExclusion().length>0||(c.favoriteAvailable=!0),!n||n.GetOrigin()===i.EOriginType.application||l.GetStyleExclusion&&l.GetStyleExclusion().length>0||(c.renameAvailable=!0,c.deleteAvailable=!0),c}static createStyle(e,t){const i=e.GetObject()._experienceBase,o=i.getManager("VCXStylesManager"),a=i.getManager("VCXCommandManager"),l=this.checkStyleContext(e),s=e.QueryInterface("VCXIModifiableFormatPainter");if(!s)return;const n=s.getPropertiesFormatPainter(),y=o.CreateStyle(n,l.modifiable,t),c=new r.default(i),h=l.modifiable.GetProperty("Modifiable.StyleID");h.SetPropertyValue(h.GetPropertyValue().SetValue(y.GetID())),c.ChangeProperty(l.modifiable,h),this.emptyExclusionList(e),a.Push(c)}static updateStyle(e){const t=e.GetObject()._experienceBase.getManager("VCXStylesManager"),i=this.checkStyleContext(e),r=e.QueryInterface("VCXIModifiableFormatPainter");if(!r)return;const o=r.getPropertiesFormatPainter();t.UpdateStyle(o,i.modifiable,i.styleID),this.emptyExclusionList(e)}}return o}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebStyles/VCXAStylesHolder",["require","exports","DS/CoreEvents/Events","DS/ApplicationFrame/CommandsManager","DS/WebappsUtils/WebappsUtils","UWA/Core","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebStyles/VCXStylesModifiableServices","i18n!DS/VCXWebStyles/assets/nls/VCXWebStyles","DS/Controls/LineEditor","DS/Windows/Dialog","DS/CoreBase/WebUXGlobalEnums","DS/VCXWebKernelCommands/VCXCmdChangeLinkedProperties","DS/VCXWebComponents/WebExtensionBaseExperience"],(function(e,t,i,r,o,a,l,s,n,y,c,h,p,d,u,S,C,b,f,m){"use strict";f=__importDefault(f),m=__importDefault(m);class g extends m.default{constructor(){super(...arguments),this._styleID="",this._styleExclusion=[],this._InCriticalSectionOnChangePropertyStyle=!1}GetProperty(e,t){let i,r;if("Modifiable.Style.Exclusion"===e){const t=new y;let o=0;this.GetStyleExclusion().forEach((e=>{t.SetValueAtIndex(o++,new c(e))})),r=new s(e,s.EBehaviorType.NotAnimable,!0,u),r.SetVisible(!1),i=new l(r,t)}else if("Modifiable.StyleID"===e){const t=new c;t.SetValue(this._styleID||""),r=new s(e,s.EBehaviorType.NotAnimable,!0,u),r.SetVisible(!1),i=new l(r,t)}else if("Modifiable.Style"===e){this._iconList={list:{}};if(!this.GetObject())return i;if("VCXComponentStyle"!==this.getStyleType()){const a=this.buildStylesEnumInfo(t);var o=new h;r=new p(e,s.EBehaviorType.NotAnimable,!1,u);let n=0;for(let e in a?.list)r.AddOrModifyChoice(e,a?.list[e].name),n++;o.SetValue(a?.selectedIndex),0===n&&r.SetVisible(!1),i=new l(r,o)}}return i}SetStyle(e){if(!this._InCriticalSectionOnChangePropertyStyle){this._InCriticalSectionOnChangePropertyStyle=!0;var t=this.GetObject();if(!t)return!1;if("VCXComponentStyle"!==t.GetType()){var i=t._experienceBase.getManager("VCXStylesManager");return i?e!=this._styleID&&(i.UnSubscribe(this,this._styleID),(i.Subscribe(this,e)||""===e)&&(this._styleID=e)):this._styleID="",this._InCriticalSectionOnChangePropertyStyle=!1,!0}this._InCriticalSectionOnChangePropertyStyle=!1}return!1}OnChangeProperty(e,t){switch(e){case"Modifiable.StyleID":var i=t.GetValue();return this.SetStyle(i);case"Modifiable.Style.Exclusion":const e=[];return t.GetValue().forEach((t=>{e.push(t.GetValue())})),this.SetStyleExclusion(e),!0;case"Modifiable.Style":return!0}return!1}GetProperties(e,t){e.AddOrModifyProperty(this.GetProperty("Modifiable.StyleID",t)),e.AddOrModifyProperty(this.GetProperty("Modifiable.Style",t)),e.AddOrModifyProperty(this.GetProperty("Modifiable.Style.Exclusion",t))}RequestModification(e,t){if(e){const i=this.GetObject(),r=i?._experienceBase,o=r?.getManager("VCXStylesManager"),a=e?.GetPropertyInfo()?.GetPropertyName(),n=r?.getManager("VCXScenarioManager").ModifiableServer;t.Iterate(((i,h)=>{const p=n?.GetModifiableFromHashing(i),d=p&&p.GetObject();if(!(a&&r&&o&&d))return!0;if(d.GetID()!==this.GetObject().GetID())return!0;if("Modifiable.Style"===a||"Modifiable.StyleSTRId"===a){let r="";if("Modifiable.Style"===a){let a=e.GetPropertyValue().GetValue();if(5===a)return this._editedPropertySet?(t.AddOrModifyPropertySet(i,this._editedPropertySet),!0):(t.AddOrModifyPropertySet(i,h),!0);if(10===a){if(r="",this._noStylePropertySet)h=this._noStylePropertySet;else if(this._styleID){const e=o.GetStyleFromSTRId(this._styleID)?.GetPropertySet();e&&e.onEachProperty(((e,t)=>{this.GetStyleExclusion().includes(e)||h.AddOrModifyProperty(t)}))}}else{const e=d?.QueryInterface("VCXIStylesHolder")?.getStyleType(),t=e&&o.GetStylesForType(e);r=t&&t[a-20]&&t[a-20].idx}}else"Modifiable.StyleSTRId"===a&&(r=e.GetPropertyValue().GetValue());const n=new y,p=new s("Modifiable.Style.Exclusion",s.EBehaviorType.NotAnimable,!0,u),C=new l(p,n);h.AddOrModifyProperty(C),(S=new c).SetValue(r);const b=new s("Modifiable.StyleID",s.EBehaviorType.NotAnimable,!0,u),f=new l(b,S);return h.AddOrModifyProperty(f),"Modifiable.Style"===a&&h.RemoveProperty(a),t.AddOrModifyPropertySet(i,h),!0}if(h.AddOrModifyProperty(e),this._styleID){if(!o._stylesVisibility[this._styleID]){const e=o.GetStyleFromSTRId(this._styleID)?.GetPropertySet();e&&e.onEachProperty(((e,t)=>{this.GetStyleExclusion().includes(e)||h.AddOrModifyProperty(t)}));var S=new c;const r=new s("Modifiable.StyleID",s.EBehaviorType.NotAnimable,!0,u),a=new l(r,S);h.AddOrModifyProperty(a);const n=new y,p=new s("Modifiable.Style.Exclusion",s.EBehaviorType.NotAnimable,!0,u),d=new l(p,n);return h.AddOrModifyProperty(d),t.AddOrModifyPropertySet(i,h),!0}const e=[...this.GetStyleExclusion()];let a=!1;const n=r.getManager("VCXLinkedPropertyManager");if(h?.onEachProperty((t=>{if(n?.IsLinkedAndNotInFollow(d.GetID(),t)){let i=!1;e&&e.every((e=>(e===t&&(i=!0),!i))),i||(e.push(t),a=!0)}})),a){const t=new y;let i=0;e.forEach((e=>{t.SetValueAtIndex(i++,new c(e))}));const r=new s("Modifiable.Style.Exclusion",s.EBehaviorType.NotAnimable,!0,u),o=new l(r,t);h.AddOrModifyProperty(o)}}return t.AddOrModifyPropertySet(i,h),!0}))}return null}GetStyleExclusion(){return this._styleExclusion}SetStyleExclusion(e){const t=this.GetObject();if(!t)return;const i=t._experienceBase;if(i.getManager("VCXStylesManager").GetStyleFromSTRId(this._styleID)){const r=i.getManager("VCXCommandManager"),o=new f.default(i);this._styleExclusion.forEach((i=>{e.indexOf(i)<0&&o.AddLink(this._styleID,i,t.GetID(),i,null)})),e.forEach((e=>{this._styleExclusion.indexOf(e)<0&&o.RemoveLink(this._styleID,e,t.GetID(),e)})),r.Do(o)}this._styleExclusion=e}getPropertyGroups(e){const t=this.GetObject();if(!t)return e;const i=this.getStyleType(),r=t._experienceBase.getManager("VCXStylesManager");r&&(r.GetStylesForType(i).length&&e["Group.Essentials"].addProperty({propertyName:"Modifiable.Style",i18n:u}));return e}buildStylesEnumInfo(e){this._iconList={list:{}};const t=this.GetObject();if(t){if(t._experienceBase){var i=t._experienceBase.getManager("VCXStylesManager");if(i){let t=0;const l=this.QueryInterface("VCXIModifiable");let s=!1;if(l&&this._styleID&&this.GetStyleExclusion&&this.GetStyleExclusion().length>0){const t=i.GetStyleIDAndTranslatedName(this._styleID,this.getStyleType(),e,22);t.name=u.get("Style.Edited.Name",{originalName:t.name}),s=!0,this._iconList.list[5]={name:t.name,iconPath:o.getWebappsAssetUrl("VCXWebStyles","icons/22/VCX_Palette.png")},this._editedPropertySet=new n,this._editedPropertySet.AddOrModifyProperty(l.GetProperty("Modifiable.StyleID").Clone()),this._editedPropertySet.AddOrModifyProperty(l.GetProperty("Modifiable.Style.Exclusion").Clone()),this.GetStyleExclusion().forEach((e=>{this._editedPropertySet?.AddOrModifyProperty(l.GetProperty(e)?.Clone())}))}this._iconList.list[10]={name:u["Style.NoStyle"],iconPath:o.getWebappsAssetUrl("VCXWebStyles","icons/22/VCX_None.png")};const y=i.GetStyleFromSTRId(this._styleID)?.GetPropertySet();this._styleID&&l?(this._noStylePropertySet=new n,y&&y.onEachProperty(((e,t)=>{this.GetStyleExclusion().includes(e)?this._noStylePropertySet?.AddOrModifyProperty(l.GetProperty(e).Clone()):this._noStylePropertySet?.AddOrModifyProperty(t)}))):delete this._noStylePropertySet;const c=this.getStyleType(),h=i.GetStylesForType(c);if(h)for(var r=0;r<h.length;r++){var a=h[r].idx;const l=i.GetStyleIDAndTranslatedName(a,this.getStyleType(),e,22,i.GetFavorite(c)===a);i.GetFavorite(c)===a&&(l.name+=" ");const s=l.thumbnail;this._iconList.list[r+20]=s?{name:l.name,iconPath:s}:{name:l.name,iconPath:o.getWebappsAssetUrl("VCXWebStyles","icons/22/VCX_Palette.png")},this._styleID===a&&(t=r+20)}this._iconList.selectedIndex=s?5:t}}return this._iconList}}getStyleIcon(e,t){const i=r.getCommands().Default||r.getCommands().Context;for(let t in i){const r=i[t].getArguments&&i[t].getArguments();if((r&&r.length>0&&r[0].styleID)===e){const e=this.QueryInterface("VCXIContextualContent"),i={};if(e?.appendContent(i,[this.GetObject()],null),i?.StylesList?.content)for(let e in i.StylesList.content)if(i.StylesList.content[e].cmdId===t)return o.getWebappsAssetUrl(i.StylesList.content[e].iconFolder,i.StylesList.content[e].icon)}}}getAdditionalPropertySettings(e,t){const r=this.GetObject();if(!r)return e;const o=r._experienceBase.getManager("VCXStylesManager");if(o){const l=d.checkStyleContext(this);this._pushAdditionalPropertyButton(e,"Modifiable.Style",{functionCB:e=>{if(!d.checkStyleContext(this).createAvailable)return;const t=o.FindStyleName(this.getDefaultName());let i=r._experienceBase.getManager("VCXContextManager").getFrameWindow().getImmersiveFrame();const l=new a.Element("div",{class:"VCXDialogContainer"});new a.Element("div",{class:"VCXDialogDescription",html:u["Style.CreateNewStyle.html"]}).inject(l);const s=new a.Element("div",{class:"VCXDialogInput"}).inject(l);new a.Element("span",{class:"VCXDialogLabel",html:u["Style.CreateNewStyle.Title"]}).inject(s);const n=new S({placeholder:u["Style.CreateNewStyle.PlaceHolder"],value:t,sizeInCharNumber:40,requiredFlag:!0,selectAllOnFocus:!0,maxLength:40}).inject(s),y=new C({touchMode:!0,immersiveFrame:i,modalFlag:!0,title:u["Style.CreateNewStyle.Dialog.Title"],content:l,customButtonsDefinition:[{label:u["Style.CreateNewStyle.Dialog.OK"],emphasize:"primary",onClick:()=>{d.createStyle(this,n.value||t),y.close()},role:b.WUXCustomButtonRoleEnum.Validate},{label:u["Style.CreateNewStyle.Dialog.Cancel"],onClick:()=>{y.close()},role:b.WUXCustomButtonRoleEnum.Escape}]})},type:"createStyle",iconName:"plus",tooltip:u["Style.CreateNewStyle.Button.Tooltip"],location:20,data:{object:r},buttonDisabled:!l.createAvailable,available:!l.renameAvailable}),this._pushAdditionalPropertyButton(e,"Modifiable.Style",{functionCB:e=>{const t=d.checkStyleContext(this);t.favoriteAvailable&&(o.SetFavorite(t.styleType,t.styleID),i.publish({event:"VCX_PROPERTIES_CHANGED"}))},type:"favoriteOn",iconName:"favorite-off",tooltip:u["Style.SetAsFavorite.Tooltip"],location:10,data:{object:r},available:!l.isFavorite&&l.favoriteAvailable}),this._pushAdditionalPropertyButton(e,"Modifiable.Style",{type:"favoriteOff",iconName:"favorite-on",location:10,data:{object:r},available:l.isFavorite&&l.favoriteAvailable}),this._pushAdditionalPropertyButton(e,"Modifiable.Style",{functionCB:e=>{if(d.checkStyleContext(this).updateAvailable)if(o._updateConfirmed)d.updateStyle(this);else{let e=r._experienceBase.getManager("VCXContextManager").getFrameWindow().getImmersiveFrame();const t=new C({touchMode:!0,title:u["Style.UpdateStyle.Dialog.Title"],modalFlag:!0,content:new a.Element("div",{html:u["Style.UpdateStyle.html"]}),immersiveFrame:e,recId:"UpdateStyleDialog",resizableFlag:!0,customButtonsDefinition:[{label:u["Style.UpdateStyle.Dialog.OK"],emphasize:"primary",onClick:()=>{o._updateConfirmed=t.checkboxInfos?.checkFlag,d.updateStyle(this),t.close(),i.publish({event:"VCX_PROPERTIES_CHANGED"})},role:b.WUXCustomButtonRoleEnum.Validate},{label:u["Style.UpdateStyle.Dialog.Cancel"],onClick:()=>{t.close()},role:b.WUXCustomButtonRoleEnum.Escape}],checkboxInfos:{label:u["Style.UpdateStyle.Dialog.DoNotShowAgain"],checkFlag:!0}})}},type:"updateStyle",iconName:"update",tooltip:u["Style.UpdateStyle.Button.Tooltip"],location:30,data:{object:r},available:!l.renameAvailable&&!l.favoriteAvailable,buttonDisabled:!l.updateAvailable});const s=()=>({functionCB:e=>{const t=d.checkStyleContext(this);if(!t.renameAvailable)return;const l=t&&t.styleID,s=t.styleName;let n=r._experienceBase.getManager("VCXContextManager").getFrameWindow().getImmersiveFrame();const y=new a.Element("div",{class:"VCXDialogContainer"});new a.Element("div",{class:"VCXDialogDescription",html:u["Style.RenameStyle.html"]}).inject(y);const c=new a.Element("div",{class:"VCXDialogInput"}).inject(y);new a.Element("span",{class:"VCXDialogLabel",html:u["Style.RenameStyle.Title"]}).inject(c);const h=new S({placeholder:u["Style.RenameStyle.PlaceHolder"],value:s,sizeInCharNumber:40,selectAllOnFocus:!0,maxLength:20}).inject(c),p=new C({touchMode:!0,immersiveFrame:n,modalFlag:!0,title:u["Style.RenameStyle.Dialog.Title"],content:y,customButtonsDefinition:[{label:u["Style.RenameStyle.Dialog.OK"],emphasize:"primary",onClick:()=>{o.SetStyleName(l,h.value||s),p.close(),i.publish({event:"VCX_PROPERTIES_CHANGED"})},role:b.WUXCustomButtonRoleEnum.Validate},{label:u["Style.RenameStyle.Dialog.Cancel"],onClick:()=>{p.close()},role:b.WUXCustomButtonRoleEnum.Escape}]})},type:"renameStyle",iconName:"rename",label:u["Style.RenameStyle.Button.Label"],tooltip:u["Style.RenameStyle.Button.Tooltip"],location:40,data:{object:r},available:l.renameAvailable}),n=()=>({functionCB:e=>{const t=d.checkStyleContext(this);if(!t||!t.deleteAvailable)return;const l=t.styleID;let s=r._experienceBase.getManager("VCXContextManager").getFrameWindow().getImmersiveFrame();const n=new C({touchMode:!0,title:u["Style.DeleteStyle.Dialog.Title"],modalFlag:!0,content:new a.Element("div",{html:u["Style.DeleteStyle.html"]}),immersiveFrame:s,recId:"DeleteStyleDialog",resizableFlag:!0,customButtonsDefinition:[{label:u["Style.DeleteStyle.Dialog.OK"],emphasize:"primary",onClick:()=>{o.DeleteStyle(l),n.close(),i.publish({event:"VCX_PROPERTIES_CHANGED"})},role:b.WUXCustomButtonRoleEnum.Validate},{label:u["Style.DeleteStyle.Dialog.Cancel"],onClick:()=>{n.close()},role:b.WUXCustomButtonRoleEnum.Escape}]})},type:"deleteStyle",iconName:"trash",label:u["Style.DeleteStyle.Button.Label"],tooltip:u["Style.DeleteStyle.Button.Tooltip"],location:50,data:{object:r},available:l.deleteAvailable});l.renameAvailable&&l.deleteAvailable?this._pushAdditionalPropertyButton(e,"Modifiable.Style",{available:l.renameAvailable&&l.deleteAvailable,type:"Contextual",data:[s(),n()]}):(l.renameAvailable&&this._pushAdditionalPropertyButton(e,"Modifiable.Style",s()),l.deleteAvailable&&this._pushAdditionalPropertyButton(e,"Modifiable.Style",n())),e["Modifiable.Style"]||(e["Modifiable.Style"]={}),e["Modifiable.Style"].enumInfo=this.buildStylesEnumInfo(t)?.list,e["Modifiable.Style"].displayInHeader=!0}return e}_pushAdditionalPropertyButton(e,t,i){e[t]||(e[t]={}),e[t].buttons||(e[t].buttons=[]),e[t].buttons.push(i)}getStyleType(){return this.GetObject()?.GetType()}getDefaultName(){return this.QueryInterface("VCXIDressup")?.getDefaultName()}}return g}));