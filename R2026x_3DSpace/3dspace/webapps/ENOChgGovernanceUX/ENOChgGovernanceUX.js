define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCreateChangeRequest",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require"],(function(e,t,i,n,o,a,s){return{launchCreateChangeRequestDialog:function(r){console.log("launchCreateChangeRequestDialog ............................");let l=i.getUserPreference(n.keys.createKeys.CR_DEF_TYPE),d={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_REQUEST_FORM,type:"Change Request",silentMode:!1,overlay:!0,options:{typeName:"Change Request",preferedType:l,select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){r&&(r.isClickProcessing=!1);var t=document.getElementsByClassName("moduleWrapper")[0];null==t&&"undefined"==t||a.mask(t);let o=e.result[0].identifier,l={};l.context=o,l.type="ChangeRequest";let d=s("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),c=s("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil");d.launchPropertyPanelContext(l),c.displayObjectInfoInsideIDcard(o,!0);let p={};p[n.keys.createKeys.CR_DEF_TYPE]=e.result[0].type,i.saveUserPreference(p)},onFailure:function(e){console.log("onFailure..............."+e),r&&(r.isClickProcessing=!1)},onCancel:function(e){r&&(r.isClickProcessing=!1)}}};var c={commandInfo:{type:"Change Request",facet:"Start a New Activity",action:"CR>Start a New Activity>New Change Request"}};s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:c}),(new e).CreateNew(d)}}})),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddRelatedScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveRelatedScope,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t})),define("DS/ENOChgGovernanceUX/scripts/model/facets/issue/ChgIssueDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";let u=p.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),g=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"CO_Issue",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",u)},loadIssueData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let o=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var a=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:o,grid:e,customTooltip:a,icons:[e.icon],thumbnail:e.thumbnail,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.parentCRId;e.forEach((e=>{var a=e.id,s=e.type?e.type:"",d=e.serviceId?e.serviceId:"3DSpace",p={resolvedBy:[]};p.physicalId=a,p.resolvedBy.push({physicalId:o,envId:"OnPremise",objectType:s,serviceId:d});let u=document.getElementById("outer-CO-issue-grid-div");"undefined"!=u&&null!=u&&c.mask(u),r.updateExistingIssue(a,p).then((function(e){r.getIssueDetails(a).then((function(n){let o=n.body;l.processedChangeRequestNewIssueList(o).then((function(n){g.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e)})),c.unmask(u)}))}),(function(e){c.unmask(u),n(e)}))}))}))},removeExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.parentCRId;e.forEach((e=>{var s=e.id,l={resolvedBy:[]};l.physicalId=s,l.resolvedBy.push({physicalId:o});let p=document.getElementById("outer-issue-grid-div");"undefined"!=p&&null!=p&&c.mask(p),r.removeExistingIssue(s,l).then((function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);d.success(a.CHG_GOV_Issue_Remove_Success),c.unmask(p)}),(function(e){c.unmask(p),n()}))}))}))},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map((i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}}))},UWA.is(n,"array")&&n.forEach((function(e){var t=e.color,i=e.id;o(t,i)}))},disableColorizeView:function(e,t){t.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return g})),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/group/ChgChangeGroupModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet"],(function(e,t,i,n){"use strict";return e.extend({init:function(){},createTreeDocument:function(){return new t({})},loadData:function(e,t,i){e.prepareUpdate();for(var n=t.groups,o=0;o<n.length;o++){var a=this.createNode(n[o].title,n[o].id);i&&n[o].id==i.id||e.addRoot(a)}e.pushUpdate()},createNode:function(e,t){return new i({label:e,value:t})}})})),define("DS/ENOChgGovernanceUX/scripts/model/ChgCODataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],(function(e,t,i,n,o,a,s,r,l){"use strict";var d=r.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new n,i=new t({id:"coSummary",dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",d)},loadIndexedChangeOrders:function(e,t){var o=e,a=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var r=this.createCustomNameField(t[s]);t[s].co_name=r;var l=this.createCustomSeverity(t[s]);t[s].sev=l;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var c=this.createCustomOwnerField(t[s]);t[s].co_Owner=c;var p=this.getStatusBarIcons(t[s]),u=this.statusbarIconsTooltips(t[s]),g=this.getSubLevel(t[s]),h=this.getDescription(t[s]);t[s].maturityWithBadge=t[s].maturityNLS;for(var m=this.createCustomTooltip(t[s]),C=!1,f=o.getChildren(),v=0;v<f.length;v++){f[v].options.grid.id==t[s].id&&(C=!0)}if(!C){var D=i.createTreeNodeDataModel(a,{label:t[s].title,subLabel:g,description:h,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:p,statusbarIconsTooltips:u,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(D)}}e.pushUpdate()},loadChangeOrderData:function(e,t){var a=e,s=new n;e.prepareUpdate();for(var r=0;r<t.length;r++){var l=this.createCustomNameField(t[r],"NonIndex");t[r].co_name=l;var d=this.createCustomSeverity(t[r]);t[r].sev=d;var c=this.createCustomChangeCoordinatorField(t[r]);t[r].co_Coordinator=c;var p=this.createCustomOwnerField(t[r]);t[r].co_Owner=p;var u=this.getStatusBarIcons(t[r],"NonIndex"),g=this.statusbarIconsTooltips(t[r],"NonIndex"),h=this.getSubLevel(t[r]),m=this.getDescription(t[r]);t[r].maturityWithBadge=t[r].maturityNLS;for(var C=this.createCustomTooltip(t[r]),f=!1,v=(o.getGlobalVariable().existingCOIds,f=!1,a.getChildren()),D=0;D<v.length;D++){v[D].options.grid.id==t[r].id&&(f=!0)}if(!f){var I=i.createTreeNodeDataModel(s,{label:t[r].title,subLabel:h,description:m,grid:t[r],icons:[t[r].iconURL],thumbnail:t[r].thumbnail,statusbarIcons:u,statusbarIconsTooltips:g,customTooltip:C,contextualMenu:["Copy1","Move1"]});e.addChild(I,0)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"coSummaryNotEmpty"}),e.unselectAll();var o=new n,a=this.createCustomNameField(t[0]);t[0].co_name=a;var s=this.createCustomSeverity(t[0]);t[0].sev=s;var r=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=r;var l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;var d=this.getStatusBarIcons(t[0]),c=this.statusbarIconsTooltips(t[0]),p=this.getSubLevel(t[0]),u=this.getDescription(t[0]),g=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(o,{label:t[0].title,subLabel:p,description:u,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:g});e.addChild(h,0),e.getXSO().add(h)},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_TOOLTIP_NEW_ORDER});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var l=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(a);var d=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),d.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{var l=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(i);var d=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),d.inject(t)}return t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomMaturity:function(e){var t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");var i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){var i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){var i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(a.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(a.CHG_TOOLTIP_NEW_ORDER),i},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){return e.name+" | "+e.ownerFullName},getDescription:function(e){return e.maturityNLS},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map((t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}}))},UWA.is(i,"array")&&i.forEach((function(e){var t=e.color,i=e.id;n(t,i)}))},disableColorizeView:function(){this.treeDocument.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s){return{ChangeDetailsHandler:function(e){t.publish("ECM_GOV_RealizedDGV_ChangeDetails:"+(widget?widget.id:""),{action:e.action})},findRealizedChanges:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Search Realized Changes"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_RealizedDGV_FIND:"+(widget?widget.id:""))},ignoreRealizedChange:function(e){var i={};n.getGlobalVariable().isNative&&(i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Realized Changes>Ignore Realized Changes(Desktop App)"}),i.commandInfo={type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Ignore Realized Changes"},s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:""))},moveMenuHandler:function(e){var i={};"New"===e.mode?n.getGlobalVariable().isNative?i.commandInfo={type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>Move>New Change Action(Desktop App)"}:i.commandInfo={type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Move>New Change Action"}:n.getGlobalVariable().isNative?i.commandInfo={type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>Move>Existing Change Action(Desktop App)"}:i.commandInfo={type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Move>Existing Change Action"},s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:e.mode})},downloadRealizedChange:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Download"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_Realized_Download:"+(widget?widget.id:""))},launchCustomColumnManager:function(e){i.launchCustomViewManager(e.custom_view_options)},refreshRealizedDGV:function(e){t.publish("ECM_GOV_RealizedDGV_REFRESH:"+(widget?widget.id:""),{filter:"selected"===e.menu[0].state?"TRACKED":"selected"===e.menu[1].state?"MOVED":"IGNORED"})},filterViewHandler:function(e){if("TRACKED"===e.filter){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Tracked View"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"change-action-realized"}}},tooltip:a.CHG_GOV_Realized_Tracked}),e.context.nodeModel.options.grid.data.menu[0].state="selected",e.context.nodeModel.options.grid.data.menu[1].state="unselected",e.context.nodeModel.options.grid.data.menu[2].state="unselected",e.context.nodeModel.options.grid.data.menu[3]&&(e.context.nodeModel.options.grid.data.menu[3].state="unselected")}else if("MOVED"===e.filter){i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Moved View"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"move-to"}}},tooltip:a.CHG_GOV_Realized_Moved}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="selected",e.context.nodeModel.options.grid.data.menu[2].state="unselected",e.context.nodeModel.options.grid.data.menu[3]&&(e.context.nodeModel.options.grid.data.menu[3].state="unselected")}else if("IGNORED"===e.filter){i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Ignored View"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"ignore"}}},tooltip:a.CHG_GOV_Realized_Ignored}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="unselected",e.context.nodeModel.options.grid.data.menu[2].state="selected",e.context.nodeModel.options.grid.data.menu[3]&&(e.context.nodeModel.options.grid.data.menu[3].state="unselected")}else"GROUPED"===e.filter&&(e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"select-all-checkboxes"}}},tooltip:a.CHG_GOV_Realized_Grouped_MF}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="unselected",e.context.nodeModel.options.grid.data.menu[2].state="unselected",e.context.nodeModel.options.grid.data.menu[3]&&(e.context.nodeModel.options.grid.data.menu[3].state="selected"));t.publish("ECM_GOV_RealizedDGV_FILTER:"+(widget?widget.id:""),{filter:e.filter})},expandCollapseHandler:function(e){if("EXPAND"===e.action){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Expand All"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"flow-tree-expand-down"}}},tooltip:a.CHG_GOV_Expanded_All}),e.context.nodeModel.options.grid.data.menu[0].state="selected",e.context.nodeModel.options.grid.data.menu[1].state="unselected"}else if("COLLAPSE"===e.action){i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Collapse All"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"flow-tree-expand-up"}}},tooltip:a.CHG_GOV_Collapsed_All}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="selected"}t.publish("ECM_GOV_RealizedDGV_EXPAND_COLLAPSE:"+(widget?widget.id:""),{action:e.action})},switchViewHandler:function(e){"DGV"===e.type?(e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:a.CHG_TOOLTIP_GRID_VIEW}),e.context.nodeModel.options.grid.data.menu[0].state="selected",e.context.nodeModel.options.grid.data.menu[1].state="unselected",t.publish("ECM_GOV_RealizedDGV_I_ON:"+(widget?widget.id:""))):"LTLV"===e.type&&(e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"view-big-tile"}}},tooltip:a.CHG_TOOLTIP_LARGE_TILE_VIEW}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="selected",!0===n.getGlobalVariable().is3DSpace?t.publish("ECM_GOV_Realized_LTV_ON_3DSpace"):t.publish("ECM_GOV_Realized_LTV_ON:"+(widget?widget.id:"")))}}})),define("DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalVariable",["UWA/Class","DS/Windows/ImmersiveFrame"],(function(e,t){"use strict";var i=new t({});return e.singleton({getImmersiveFrame:function(){return i}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsCreateIA",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","require","DS/PlatformAPI/PlatformAPI"],(function(e,t,i,n,o,a,s,r,l,d){return{launchAffectedItemsCreateNewIADialog:function({contextCRId:r},d,c){console.log("launchCreateChangeIADialog ............................");let p=i.getUserPreference(n.keys.createKeys.IA_DEF_TYPE),u={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ANALYSIS_FORM,type:"Change Analysis",silentMode:!1,overlay:!0,options:{typeName:"Change Analysis",preferedType:p,select:[],parentPIDs:[r]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isLibrary:!0}}],events:{onSuccess:function(e){document.getElementsByClassName("moduleWrapper")[0];try{let t=l("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var r=e.result[0];r.isKindOfType="Change Analysis",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:r,View:"Impact Analysis"})}catch(e){console.log(e)}l("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil").filterView("activeIA"),t.TriggerCustomeUpdate="false";let p={};p[n.keys.createKeys.IA_DEF_TYPE]=e.result[0].type;let u=[],g=[];var h=[];for(let e of d)h.push({id:e.options.grid.id,service:e.options.grid.serviceName,type:e.options.grid.type,environment:t.getGlobalVariable().tenant});g.push({id:e.result[0].identifier}),u.push({impactAnalysisIds:g,objectIdToSend:h,updateAction:"CONNECT"}),console.log(u),0!=g.length&&0!=h.length&&a.connecteIAwithAffactedItem(u).then((function(e){!0===e.success&&e.data.length==e.items&&s.success(o.CHG_GOV_Affected_Item_Objects_Processed_Success_Analysis_Basis_New_CA);let t=0;for(let i of d){for(let n of e.data)n&&n.affectedItemIds&&n.affectedItemIds.includes(i.options.grid.id)&&t++;let n=i.options.grid.countImpactAnalysis+t;i.updateOptions({grid:{countImpactAnalysis:n}}),t=0}t=0,c.publish({event:"update_AnalysisBasis_count_IA_grid",data:e.data})})),i.saveUserPreference(p)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};var g={commandInfo:{type:"Impact Analysis",facet:"Affected Items",action:"CR>Affected Items>Add to New Impact Analysis"}};l("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:g}),(new e).CreateNew(u)}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbar",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/WebappsUtils/WebappsUtils"],(function(e,t,i,n,o){let a=Object.create(null);return a.getFlowdownURCToolbarDefinition=function(e){let a=[{id:"cmd_find",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"find",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Find,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"findFDRealizedChanges"}}},{id:"massUpdate",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:n.CHG_GOV_AffectedItems_Toolbar_MassUpdate,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"massUpdateHandler"}}},{id:"expand_collapse_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"flow-tree-expand-down",fontIconFamily:1},tooltip:n.CHG_GOV_Expanded_All,value:{menu:[{type:"CheckItem",title:n.CHG_GOV_Expand_All,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-flow-tree-expand-down"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"expandCollapseHandler",argument:{action:"EXPAND"}},tooltip:n.CHG_GOV_Expand_All},{type:"CheckItem",title:n.CHG_GOV_Collapse_All,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-flow-tree-expand-up"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"expandCollapseHandler",argument:{action:"COLLAPSE"}},tooltip:n.CHG_GOV_Collapse_All}]}},position:"far",category:"commands"},{id:"cmd_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:n.ECM_GOV_CUSTOM_COL,position:"far",category:"configuration_commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:e.custom_view_options}}}}];return t.getGlobalVariable().isNative?a.push({id:"change_details_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"object-instance-select wux-ui-3ds",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Change_Details,value:{menu:[{type:"PushItem",title:i.ECM_CA_Command_Explore,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToVPMNavigator.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"Explore"}}},{type:"PushItem",title:i.ECM_CA_Command_ExploreWith,submenu:[{type:"PushItem",title:i.ECM_CA_Command_ExploreSys,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_ExploreInRFLPNavigator.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreInRFLP"}}},{type:"PushItem",title:i.ECM_CA_Command_ExploreMfg,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToPPRNavigatorWithParent.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreInPPR"}}},{type:"PushItem",title:i.ECM_CA_Command_ExploreParents,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_GetParents.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreParents"}}},{type:"PushItem",title:i.ECM_CA_Command_ExploreMSB,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToPPRNavigatorWithParent.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreInMSB"}}},{type:"PushItem",title:i.ECM_CA_Command_ExploreContext,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_FindInContext.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreinContext"}}}],action:{callback:()=>eventNotificationsFunction("PushItem2 Callback")}},{type:"PushItem",title:i.ECM_CA_Command_Open,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenDB.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"Open"}}},{type:"PushItem",title:i.ECM_CA_Command_OpenAdv,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenAdvDB.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"OpenAdv"}}},{type:"PushItem",title:i.ECM_CA_Command_OpenRO,icon:o.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenInReadOnly.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"OpenReadOnly"}}},{type:"PushItem",title:n.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"onRelations"}}}]}},position:"far",category:"commands"}):a.push({id:"change_details_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"object-instance-select wux-ui-3ds",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Change_Details,value:{menu:[{type:"PushItem",title:n.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"onRelations"}}}]}},position:"far",category:"commands"}),{entries:a}},a})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],(function(e,t){var i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"PushItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"PushItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){var n=i.accessBits;const o="true"==(n=t.processAccessBitIA(n)).AddAssignee,a=(n.RemoveAssignee,"true"==n.createActivities);return{entries:[{id:"addTask",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"task-add",fontIconFamily:1,className:i&&i.isRoutePresent?"addTaskIcon task-present":"addTaskIcon"},tooltip:e.CHG_Contributors_Toolbar_AddTask,position:"far",visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",func:"addActivityHandler"}}},{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Contributors_Toolbar_AddContributor,position:"far",visibleFlag:o,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Contributors_Toolbar_RemoveContributor,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",func:"removeHandler"}}}]}},i})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView",["DS/ENOChangeActionUX/scripts/Views/CARealizedView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/PlatformAPI/PlatformAPI"],(function(e,t,i,n,o,a,s){"use strict";return{createRealizedChangesView:function(n){var r={};let l=o.getUserPreference(a.keys.viewKeys.REALIZED_DEF_VIEW);console.log(l),r=UWA.merge(r,n),this._modelEvents=r.contextDetails._modelEvents,this.id=r.id;var d="pid:"+r.id;let c=r.contextDetails.title;var p="";let u="";r.targetclassName=r.target.className,t.getChangeActionUserAccess(r.id).then((function(t){p=t.data[0],p=i.processAccessBitCA(p),u={caModel:{id:d,name:r.contextDetails.name,title:c,description:r.contextDetails.description,severity:r.contextDetails.severity,maturity:r.contextDetails.maturity,invokedFrom:"gov",isSelected:r.isSelected,get:function(e){return"userAccess"==e?p:"id"==e?d:"synopsis"===e?c:void 0},fetch:function(e){console.log("dummy fetch called...!"),e.onComplete(),s.publish("load-dependency"+widget.id,d)}},init_options:r};let n=r.target;(new(new e(u).buildRealizedView())).container=n}))}}})),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgSearchConfigServcies"],(function(e,t,i,n){"use strict";return{reviewerType:{typeOfReviewer:"",labelSelected:!1},fetchMembersList:function(e){var n=this,o=(e.categoryId,e.contextUser),a=e.text?e.text.trim():"",s=e.searchQuery,r=e.supportType,l=new Promise((function(e,l){void 0===s&&(s=n.constructQueryString(o,a,r));var d=n.constructInputJson(s),c={isfederated:!0};i.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",d,(function(i){var o=[];if(i&&i.results&&Array.isArray(i.results)){var a=i.results,s="OnPremise"===t.getGlobalVariable().tenant;a.forEach((function(e){var t=e.attributes,i=n.processRouteSelected(t,s);o.push(i)}))}e(o)}),(function(e){l(e)}),c)}));return l},constructQueryString:function(e,i,n){var o=this;t.getGlobalVariable().ECM_SearchRouteTemplateEnforcementForCA,t.getGlobalVariable().ECM_EnableRouteTemplateEnforcementForCA,n||(n=this.supportType);let a="",s=n?n.map((e=>e.toLowerCase())):this.supportType.map((e=>e.toLowerCase()));switch(!0){case s.includes("person")&&s.includes("group"):a="OnPremise"===t.getGlobalVariable().tenant?'((([ds6w:type]:"Person" AND [ds6w:identifier]:("*'+i+'*")) OR ([ds6w:type]:"Person" AND [ds6wg:fullname]:("*'+i+'*")) OR ([ds6w:type]:"Person" AND [firstname]:("*'+i+'*")) OR ([ds6w:type]:"Person" AND [lastname]:("*'+i+'*"))) AND policycurrent:"Person.Active") OR ((([ds6w:type]:"Group" AND [ds6w:label]:("*'+i+'*"))) AND current:"Active")':'((([ds6w:type]:"Person" AND [ds6w:identifier]:("*'+i+'*")) OR ([ds6w:type]:"Person" AND [ds6wg:fullname]:("*'+i+'*"))) AND policycurrent:"Person.Active") OR ([ds6w:type]:"foaf:Group" AND [ds6w:label]:(\'*'+i+"*'))";break;case s.includes("routetemplate")&&"Person"===o.reviewerType.typeOfReviewer:a=o.getQueryParameterForRouteTemplate(e)+' OR ([ds6w:type]:"Person" AND [ds6w:identifier]:"*'+i+'*" OR [ds6w:type]:"Person" AND [ds6wg:fullname]:"*'+i+'*" AND policycurrent:"Person.Active")';break;case s.includes("routetemplate")&&s.includes("person"):a=o.getQueryParameterForRouteTemplate(e,i)+' OR ([ds6w:type]:"Person" AND [ds6w:identifier]:"*'+i+'*" OR [ds6w:type]:"Person" AND [ds6wg:fullname]:"*'+i+'*" AND policycurrent:"Person.Active")';break;case s.includes("person")||"Person"===o.reviewerType.typeOfReviewer:a='((([ds6w:type]:"Person" AND [ds6w:identifier]:("*'+i+'*")) OR ([ds6w:type]:"Person" AND [ds6wg:fullname]:("*'+i+'*")) OR ([ds6w:type]:"Person" AND [firstname]:("*'+i+'*")) OR ([ds6w:type]:"Person" AND [lastname]:("*'+i+'*"))) AND policycurrent:"Person.Active")';break;case s.includes("group"):a='(flattenedtaxonomies:"types/Group" AND current:"active")';break;case s.includes("routetemplate"):a=o.getQueryParameterForRouteTemplate(e,i)}return a},constructInputJson:function(e){let i={"3dspace":{SecurityContext:t.getGlobalVariable().getSecurityContext()}};var n={with_indexing_date:!0,with_nls:!1,label:"yus-1515078503005",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:responsible","ds6wg:fullname"],select_file:["icon","thumbnail_2d"],query:e,order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:t.getGlobalVariable().tenant,login:i};return JSON.stringify(n)},processRouteSelected:function(e,t){var i={};return e.forEach((function(e){switch(e.name){case"ds6w:what/ds6w:type":i.type=t?e.value:e.value.includes("foaf")?e.value.slice(5):e.value;break;case"resourceid":i.id=e.value;break;case"ds6w:identifier":i.identifier=e.value;break;case"ds6w:label":i.name=e.value,"Person"===i.type&&"ds6wg:fullname"===e.name&&(i.name=e.value);break;case"ds6wg:fullname":"Person"===i.type&&(i.name=e.value)}})),i},getQueryParameterForRouteTemplate:function(e,t){return t?'((flattenedtaxonomies:"types/Route Template" AND [ds6w:label]:(*'+t+'*) OR flattenedtaxonomies:"types/Route Template" AND [ds6w:identifier]:(*'+t+'*))  AND  (route_95_base_95_purpose:"Approval" OR (route_95_base_95_purpose:"Standard" AND bo_46_route_46_template_46_isstandard:"true")) AND (route_95_template_95_availability: "Enterprise" OR route_95_template_95_availability: "'+e+'" ) AND policycurrent:"Route Template.Active"AND route_95_completion_95_action:"Promote Connected Object" AND latestrevision:"TRUE")':'(flattenedtaxonomies:"types/Route Template" AND (route_95_base_95_purpose:"Approval" OR (route_95_base_95_purpose:"Standard" AND bo_46_route_46_template_46_isstandard:"true")) AND (route_95_template_95_availability: "Enterprise" OR route_95_template_95_availability: "'+e+'" ) AND policycurrent:"Route Template.Active"AND route_95_completion_95_action:"Promote Connected Object" AND latestrevision:"TRUE")'},getAvatarDetails:function(e){var t={},i="",n=[[7,139,250],[249,87,83],[111,188,75],[158,132,106],[170,75,178],[26,153,123],[245,100,163],[255,138,46]],o=e.split(" "),a=o[0].charAt(0),s=o[o.length-1];s&&(i=s.charAt(0));var r=a+i,l=Math.ceil((a.charCodeAt(0)+i.charCodeAt(0))%n.length),d="rgb("+n[l][0]+","+n[l][1]+","+n[l][2]+")";return t.name=e,t.avatarStr=r,t.avatarColor=d,t},getMembersByObjectType:function(e,t){var n="";if("ChangeRequest"===t)n="changerequest";else if("ChangeOrder"===t)n="changeorder";else if("ChangeAction"===t)n="changeaction";else{if("InvestigationRequest"!==t)return Promise.reject("Unsupported object type");n="investigationRequest"}var o=`/resources/v1/chguxservices/${n}/${e}/membersByRole`;return new Promise((function(e,t){i.makeWSCallWithCSRF(o,"GET","enovia","application/json","",(function(t){e(t)}),t,!1)}))},updateMembers:function(e,t,n){return new Promise((function(o,a){var s="";switch(e){case"ChangeRequest":s="changerequest";break;case"ChangeAction":s="changeaction";break;case"ChangeOrder":s="changeorder";break;case"InvestigationRequest":s="investigationRequest";break;default:return void a("Invalid objectType")}var r=`/resources/v1/chguxservices/${s}/${t}/members`,l=JSON.stringify(n);i.makeWSCallWithCSRF(r,"PUT","enovia","application/json",l,(function(e){o(e)}),a,!1)}))},processMembersList:function(e){let t=[],i=e.data;if(void 0!==i&&i.length>0)for(let e=0;e<i.length;e++){let n={};for(const t in i[e])if(Array.isArray(i[e][t])){let o=i[e][t].map((e=>({id:e.id,type:e.type,fullName:e.name,userId:e.userid,thumbnail:i.previewicon,icon:i.icon,title:e.title||"",roles:e.roles})));n[t]=o}t.push(n)}return t},buildQueryStringForSearch:function(e,i,n,o){if(!i||!Array.isArray(i)||0===i.length)return"";var a=!1,s=!1;"true"===t.getGlobalVariable().ECM_SearchRouteTemplateEnforcementForCA&&(a=!0),"true"===t.getGlobalVariable().ECM_EnableRouteTemplateEnforcementForCA&&(s=!0);let r=i.map((e=>e.toLowerCase()));var l="";if(r.includes("person")&&(l+='flattenedtaxonomies:"types/Person" AND policycurrent:"Person.Active"'),r.includes("group")){l.length>0&&(l+=" OR "),l+="OnPremise"===t.getGlobalVariable().tenant?'(flattenedtaxonomies:"types/Group" AND current:"active")':"([ds6w:type]:(Group))"}return r.includes("routetemplate")&&(l.length>0&&(l+=" OR "),l+=this.getQueryParameterForRouteTemplate(e)),"ChangeAction"==o&&a&&s&&(l=this.getQueryParameterForRouteTemplate(e)),n&&n.extendedQuery&&(l.length>0&&(l+=" AND "),l+=n.extendedQuery),l},buildQueryForType:function(e,t,i){switch(t.toLowerCase()){case"person":return'flattenedtaxonomies:"types/Person" AND policycurrent:"Person.Active"';case"group":return'flattenedtaxonomies:"types/Group" AND current:"active"';case"routetemplate":return'(flattenedtaxonomies:"types/Route Template" AND (route_95_base_95_purpose:"Approval" OR (route_95_base_95_purpose:"Standard" AND bo_46_route_46_template_46_isstandard:"true")) AND (route_95_template_95_availability: "Enterprise" OR route_95_template_95_availability: "'+e+'" ) AND policycurrent:"Route Template.Active" AND route_95_completion_95_action:"Promote Connected Object" AND latestrevision:"TRUE")';default:return""}},buildAppendedQueries:function(e,t,i){let n="";for(const o of t){const t=this.buildQueryForType(e,o,i);t&&(n&&(n+=" OR "),n+=t)}return n}}})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeAction/ChgChangeActionDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";let u=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadCAData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let o=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var a=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:o,grid:e,customTooltip:a,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addNewChildren:function(e){if("Change Action"==e.type){var t=document.getElementById("outer-CA-grid-div");"undefined"!=t&&null!=t&&p.mask(t),r.getNewCADetails(e.objectID).then((function(e){var i=l.processChangeActionInContext(e).processData;console.log(i),d.getUserFullName(i[0].owner).then((function(e){i[0].ownerFullName=e.userDisplayName.userInfo[i[0].owner].userDisplayName,require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],(function(e){e.addNodesInLayout(i),p.unmask(t)}))}))}),(function(e){p.unmask(t)}))}},addExistingChildren:function(e){var t=[];this.parentCRId&&(t=this.parentCRId);var i=document.getElementById("outer-CA-grid-div");"undefined"!=i&&null!=i&&p.mask(i),r.addExistingChangeActionImpactAnalysis(t,e).then((async function(e){var t=await l.processedCAList(e);require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],(function(e){e.addNodesInLayout(t),e.modelEvents.publish({event:"CA-Creation-Update",data:{}}),p.unmask(i)}))}),(function(e){p.unmask(i)}))},removeChildren:function(e){var t=e.getSelectedNodes(),i=document.getElementById("outer-CA-grid-div");if("undefined"!=i&&null!=i&&p.mask(i),t.length){let l="Change Action";var n;n=this.parentCRId;for(var o=[],s=0;s<t.length;s++)o.push({id:t[s].options.grid.id,type:t[s].options.grid.type});r.removeInCRChangeActionView(n,l,o).then((function(n){for(var o=0;o<t.length;o++)e.removeRoot(t[o]);0==e.getChildren().length&&e._modelEvents.publish({event:"treeEmpty"}),p.unmask(i),c.success(a.CHG_GOV_ChangeOrchestration_Toolbar_Remove_Success),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],(function(e){e.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"remove"}})}))}),(function(e){p.unmask(i)}))}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},removeExistingChildren:function(e){},addNodesInLayoutModel:function(e,t){let i,n=u.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(n);else for(let t=n.length-1;t>=0;t--){i=0;for(let o=0;o<e.getRoots().length;o++)e.getRoots()[o].options.grid.id==n[t].options.grid.id&&i++;0==i&&e.addRoot(n[t],0)}e.pushUpdate()}});return u})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s){"use strict";var r=n.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e),this.options=e,this.treeDocument=null},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",r)},resetModel:function(){this.treeDocument.empty()},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){this.treeDocument=new t({id:"ChgCAResolutionItemTreeDoc",useAsyncPreExpand:!0})},emptyTreeDocument:function(){this.treeDocument.empty()},updateTreeDocument:function(e){this.treeDocument.prepareUpdate();for(var t=0;t<e.length;t++)this.treeDocument.addRoot(this.createTreeNode(e[t]));this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},createTreeNode:function(e){return this.getResolutionTreeNode(e)},getResolutionTreeNode:function(e){return e.maturityWithBadge=e.maturityNLS,new i({id:e.id,label:e.title,title:e.title,name:e.name,revision:e.revision,type:e.type,typeNLS:e.typeNLS,maturity:e.maturity,maturityNLS:e.maturityNLS,description:e.description,organization:e.organization,organizationNLS:e.organizationNLS,collabspace:e.collabspace,collabspaceNLS:e.collabspaceNLS,isLastRevision:e.isLastRevision,icons:[e.icon],thumbnail:e.previewIcon,change:e.change,change_details:e.change_details,proposedPID:e.proposedPID,proposedStatus:e.proposedStatus,reasonForChange:e.proposedWhy,activityIcon:e.activityIcon,subLabel:e.type+" | "+e.revision+" | "+e.name,grid:e,useAsyncPreExpand:!0})},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})}})})),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI"],(function(e,t,i,n,o,a){"use strict";return{hideFacet:function(e){for(var i=0;i<e.elements.container._lFacets.length;i++){var n=e.elements.container._lFacets[i];n.facet.name!=t.FACET_PROPERTIES&&(n.alwaysVisible=!1)}},addAllFacet:function(i,n){var o=[];if(o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/applicability/ChgApplicabilityfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Applicability",icon:"evolution-effectivity",text:e.CHG_GOV_Header_Applicability},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/dependency/ChgDependencyfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Dependency",icon:"dependencies",text:e.CHG_GOV_Header_Dependency},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CO_RelatedScope",icon:"object-related-cog",text:e.CHG_GOV_Header_RelatedScope},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssuefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Issue",icon:"issue-type",text:e.CHG_GOV_Header_Issue},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRRelatedScopefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CR_RelatedScope",icon:"object-related-cog",text:e.CHG_GOV_Header_RelatedScope},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/decision/ChgDecisionfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Decision",icon:"legal-ok",text:e.CHG_GOV_Header_Decision},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactBasis",icon:"change-request-alert",text:e.CHG_GOV_DataGrid_Column_ImpactBasis},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactItem",icon:"change-request-impacted-items",text:e.CHG_GOV_DataGrid_Column_ImpactedItem},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ChangeAction",icon:"change-action",text:e.CHG_GOV_DataGrid_Column_IA_CA},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_Assignee",icon:"users",text:e.CHG_GOV_DataGrid_Column_Contributors},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CA_Context",icon:"3d-object",text:e.CHG_GOV_Header_Contexts},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Attachment",icon:"attach",text:e.CHG_GOV_Header_Attachments},options:{}}),i.addFacets(o),n&&n[0]&&n[0].isViaHeader){require(["DS/ENORIPE_Relations/RelationsTabSettings"],(function(e){o.push(t.FACET_RELATIONS),o.push(t.FACET_SWYMCOMMENTS),o.push(t.FACET_GENERALHISTORY),i.addFacets(o),e.setProfile("Change_Traceability")}),(function(e){console.warn("Cannot load "+e.requireModules),o.push(t.FACET_SWYMCOMMENTS),o.push(t.FACET_GENERALHISTORY),i.addFacets(o)}))}else o.push(t.FACET_RELATIONS),o.push(t.FACET_SWYMCOMMENTS),o.push(t.FACET_GENERALHISTORY),i.addFacets(o)},getUpdateIMpactAnalysisFacet:function(e){var t=this;return new Promise((function(s,r){1==e.length?n.getImpactAnalysisUserAccess(e[0].physicalId).then((function(t){var n=t.data[0].dataelements;n=o.processAccessBitIA(n),e[0].accessBits=n;var r={id:t.data[0].id,type:t.data[0].type,accessBits:n};i.getGlobalVariable().IAAccessBitsData={widgetID:widget.id,iaID:t.data[0].id,type:t.data[0].type,accessBits:n},a.publish("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",r),s(r)})):s(t.getImpactAnalysisFacets(e))}))},getImpactAnalysisFacets:function(t){return[{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactBasis",icon:"change-request-alert",text:e.CHG_GOV_DataGrid_Column_ImpactBasis},options:{data:t},actions:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",func:"onTabClickAction"}},{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactItem",icon:"change-request-impacted-items",text:e.CHG_GOV_DataGrid_Column_ImpactedItem},options:{data:t}},{require:"DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Attachment",icon:"attach",text:e.CHG_GOV_Header_Attachments},options:{}},{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_Assignee",icon:"users",text:e.CHG_GOV_DataGrid_Column_Contributors},options:{data:t}}]},updateFacetOnSelection:function(e,t,i){null==e?this.hideFacet(i):"ChangeOrder"==e?this.getChangeOrderTab(t,i):"ChangeAction"==e?this.getChangeActionTab(t,i):"ChangeRequest"==e?this.getChangeRequestTab(t,i):"ChangeAnalysis"==e?this.getImpactAnalysisTab(t,i):"InvestigationRequest"==e?this.getInvestigationRequestTab(t,i):"Disposition"==e?this.getDispositionTab(t,i):this.getDefaultTab(t,i)},getDefaultTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"history"==n.facet.name&&(n.alwaysVisible=!0)}},getChangeRequestTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CR_RelatedScope"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0),"history"==n.facet.name&&(n.alwaysVisible=!0)}},getChangeOrderTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Dependency"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CO_RelatedScope"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0),"history"==n.facet.name&&(n.alwaysVisible=!0)}},getChangeActionTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Dependency"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CA_Context"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0),"history"==n.facet.name&&(n.alwaysVisible=!0)}},getImpactAnalysisTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"IA_ImpactBasis"==n.facet.name&&(n.alwaysVisible=!0),"IA_ImpactItem"==n.facet.name&&(n.alwaysVisible=!0),"IA_Assignee"==n.facet.name&&(n.alwaysVisible=!0),"IA_ChangeAction"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"history"==n.facet.name&&(n.alwaysVisible=!0)}},getInvestigationRequestTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"history"==n.facet.name&&(n.alwaysVisible=!0)}},getDispositionTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"history"==n.facet.name&&(n.alwaysVisible=!0)}}}})),define("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceSlideIn",["UWA/Class/View","UWA/Core"],(function(e,t){"use strict";return e.extend({init:function(e,t,i){this.slideinContainer=e,this.parentContainer=t,this.content=i,this._parent.call(this)},setup:function(){this.layoutResizer=new UWA.createElement("div",{id:"layout-resizer-div",class:"layout-resizer"})},render:function(){return this},buildSlideIn:function(){const e=UWA.createElement("div",{id:"slideInContent"});this.getHeaderCommand().inject(e),this.getBody().inject(e),e.inject(this.slideinContainer),e.set({events:{touchmove:function(e){e.stopPropagation()}}}),this._handlerKeyUp=function(e){27==e.which&&that.hideSlideIn()},UWA.extendElement(document).addEvent("keyup",this._handlerKeyUp)},getHeaderCommand:function(){const e=UWA.createElement("div",{id:"slideInHeaderCommand",styles:{padding:"2px 14px",position:"absolute","z-index":"1",right:"0px"}});return UWA.createElement("span",{class:"close fonticon fonticon-cancel cursorPointer",title:"Close"}).inject(e).addEvent("click",this.onCloseButtonClick.bind(this)),e},onCloseButtonClick:function(){this.hideSlideIn()},getBody:function(){const e=UWA.createElement("div",{id:"slideInBody"});return"string"==typeof this.content?e.innerHTML=this.content:this.content instanceof HTMLElement?e.appendChild(this.content):void 0!==this.content.render&&this.content.render().inject(e),e},showSlideIn:function(){if(UWA.is(this.slideinContainer)){this.resizerContainer&&(this.resizerContainer.style.display="block");window.matchMedia("(max-width: 768px)").matches?(this.slideinContainer.style.width="100%",this.resizerContainer&&(this.resizerContainer.style.right="100%")):(this.slideinContainer.style.width="600px",this.resizerContainer&&(this.resizerContainer.style.right="600px"),this.slideinContainer.style.minWidth="250px",this.slideinContainer.style.borderLeftWidth="1px")}},hideSlideIn:function(){if(UWA.is(this.slideinContainer)){this.slideinContainer.style.width="0",this.slideinContainer.style.minWidth="0",this.resizerContainer&&(this.resizerContainer.style.right="0px",this.resizerContainer.style.display="none"),this.slideinContainer.style.borderLeftWidth="0";this.parentContainer.setStyle("width","calc( 100% - 0px )"),this.destroy()}},destroy:function(){}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t){let i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCA,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"filterView",argument:{filter:"activeCA"}},tooltip:e.CHG_Filter_ActiveCA_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"filterView",argument:{filter:"inactiveCA"}},tooltip:e.CHG_Filter_InactiveCA_Def}]},i.writetoolbarDefination=function(i){let n={entries:[{id:"duplicateCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",fontIconFamily:WUXManagedFontIcons.Font3DS},position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"duplicateChangeAction"},tooltip:e.CHG_GOV_Change_Action_Duplicate,disabled:!0}},{id:"ca_summary_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:i.custom_view_options}}}},{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};var o={id:"creategroup",className:"menuCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"group-add",fontIconFamily:1},position:"far",tooltip:e.CHG_TOOLTIP_CREATE_GROUP,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"assignGroupToCAs"}},category:"View"};let a="true";return"false"==t.getGlobalVariable().isFullLicence&&(a="false"),"true"===t.getGlobalVariable().CHG_CHANGE_GROUP&&"true"==a&&n.entries.unshift(o),n},i})),define("DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices"],(function(e,t,i,n){"use strict";return{createCustomNameField:function(t){var n=new e.Element("div",{});e.createElement("span",{html:t.name}).inject(n);var o=new e.Element("div",{class:"iconsDiv"});if("true"==t.onHold){var a=new e.Element("div",{class:"gridIconContainer",title:i.CHG_GOV_TOOLTIP_HOLD});e.createElement("div",{class:"fonticon fonticon-pause"}).inject(a),a.inject(o)}return o.inject(n),n.outerHTML},createCustomSeverity:function(t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==t.severity?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==t.severity&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new e.Element("div",{}),o=new e.Element("div",{class:"gridIconContainer"});e.createElement("div",{class:i}).inject(o);var a=e.createElement("span",{html:t.severityNLS});return o.inject(n),a.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(i){var o=new e.Element("div",{class:"members"});if(""!=i.changeCoordinatorFullName){var a=new e.Element("div",{class:"assignee"}),s="/api/user/getpicture/login/"+i.changeCoordinator+"/format/normal",r=t.getGlobalVariable().computeSwymUrl(s),l="";if(t.getGlobalVariable().isSwymInstalled)l=e.createElement("img",{class:"userIcon",src:r});else{var d=n.getAvatarDetails(i.changeCoordinatorFullName);(l=e.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(a);var c=e.createElement("span",{class:"userName",html:i.changeCoordinatorFullName});a.inject(o),c.inject(o)}return o.outerHTML},createCustomOwnerField:function(i){var o="/api/user/getpicture/login/"+i.owner+"/format/normal",a=t.getGlobalVariable().computeSwymUrl(o),s=new e.Element("div",{class:"members"}),r=new e.Element("div",{class:"assignee"}),l="";if(t.getGlobalVariable().isSwymInstalled)l=e.createElement("img",{class:"userIcon",src:a});else{var d=n.getAvatarDetails(i.ownerFullName);(l=e.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=e.createElement("span",{class:"userName",html:i.ownerFullName});return r.inject(s),c.inject(s),s.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),"true"==e.onHold&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),"true"==e.onHold&&t.push(i.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return i.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+i.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+i.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+i.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+i.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS}}})),define("DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig",[],(function(){"use strict";var e={LEFT_PANEL_SIZE_EXPANDED:300,LEFT_PANEL_SIZE_COLLAPSED:40,MOBILE_CUTOFF:500,TABLET_CUTOFF:768,MOBILE_BREAKPOINT:500,PATH_HOME:"/home",PATH_LANDING_PAGE:"LandingPage",PATH_CO_INFO:"COInfo",PATH_CO_DETAILS:"CODetails",PATH_CA_INFO:"CAInfo",PATH_CA_DETAILS:"CADetails",PATH_CR_INFO:"CRInfo",PATH_CR_DETAILS:"CRDetails",PATH_IR_INFO:"IRInfo",PATH_IR_DETAILS:"IRDetails",PATH_CR_ORCHESTRATION_LEVEL1:"CROrchestrationL1",PATH_CR_ORCHESTRATION_LEVEL2:"CROrchestrationL2",PATH_CR_ORCHESTRATION_LEVEL3:"CROrchestrationL3",PATH_CO_ORCHESTRATION_LEVEL1:"COOrchestrationL1",PATH_CO_ORCHESTRATION_LEVEL2:"COOrchestrationL2",PATH_CO_ORCHESTRATION_LEVEL3:"COOrchestrationL3",PATH_NEW_CHANGE_ORDER:"NewChangeOrder",PATH_NEW_CHANGE_REQUEST:"NewChangeRequest",PATH_NEW_INVESTIGATION_REQUEST:"NewInvestigationRequest",PATH_NEW_CHANGE_ACTION:"NewChangeAction",PATH_OPEN_CHANGE_ORDER:"OpenChangeOrder",PATH_OPEN_CHANGE_REQUEST:"OpenChangeRequest",PATH_RECENTY_OPENED:"RecentlyOpened",PATH_MY_CHANGE_ORDERS:"MyChangeOrders",PATH_MY_CHANGE_REQUESTS:"MyChangeRequests",PATH_MY_INVESTIGATION_REQUESTS:"MyInvestigationRequests",PATH_MY_CHANGE_ACTIONS:"MyChangeActions",PATH_CO_IDCard:"Change Order ID Card",ROUTE_HOME:"home",ROUTE_LANDING_PAGE:"home.LandingPage",ROUTE_CO_INFO:"home.COInfo",ROUTE_CR_INFO:"home.CRInfo",ROUTE_CA_INFO:"home.CAInfo",ROUTE_IR_INFO:"home.IRInfo",ROUTE_CO_DETAILS:"home.COInfo.CODetails",ROUTE_CR_DETAILS:"home.CRInfo.CRDetails",ROUTE_CA_DETAILS:"home.CAInfo.CADetails",ROUTE_IR_DETAILS:"home.IRInfo.IRDetails",ROUTE_CR_ORCHESTRATION_LEVEL1:"home.CRInfo.CRDetails.OrchestrationL1",ROUTE_CR_ORCHESTRATION_LEVEL2:"home.CRInfo.CRDetails.OrchestrationL1.OrchestrationL2",ROUTE_CR_ORCHESTRATION_LEVEL3:"home.CRInfo.CRDetails.OrchestrationL1.OrchestrationL2.OrchestrationL3",ROUTE_CO_ORCHESTRATION_LEVEL1:"home.COInfo.CODetails.OrchestrationL1",ROUTE_CO_ORCHESTRATION_LEVEL2:"home.COInfo.CODetails.OrchestrationL1.OrchestrationL2",ROUTE_CO_ORCHESTRATION_LEVEL3:"home.COInfo.CODetails.OrchestrationL1.OrchestrationL2.OrchestrationL3",ROUTE_CR_DETAILS_LEVEL3PLUS:"home.CRInfo.CRDetails.OrchestrationL3plus",ROUTE_CO_DETAILS_LEVEL3PLUS:"home.COInfo.CODetails.OrchestrationL3plus",ROUTE_RECENTY_OPENED:"home.RecentlyOpened",ROUTE_MY_CHANGE_ORDERS:"home.MyChangeOrders",ROUTE_MY_CHANGE_REQUESTS:"home.MyChangeRequests",ROUTE_MY_INVESTIGATION_REQUESTS:"home.MyInvestigationRequests",ROUTE_MY_CHANGE_ACTIONS:"home.MyChangeActions"};return e})),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm",["UWA/Class/View","i18n!DS/ENOChangeActionUX/assets/nls/ChangeAction","css!DS/ENOChangeActionUX/ENOChangeActionUX","UWA/Core","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Form","UWA/Class/Model","DS/UIKIT/Scroller","DS/PlatformAPI/PlatformAPI","DS/ENOChgRouter5/scripts/ChgRouter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Windows/ImmersiveFrame","DS/Windows/Dialog"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";var h=e.extend({slideinProposedContainer:void 0,slideinPropertiesContainer:void 0,triptychMain:void 0,mainContainer:void 0,form:void 0,buildSlideIn:function(e){this.form=e},getDialogTitle:function(e){return this.form.getHeading()},buildAddMemberDialog:function(e){let t=e.options.frameHeight;this.form=e,e.slideInReference=this;var i=UWA.createElement("div",{id:"chgAddMemberMainContainer",class:"chgAddMemberMainContainer"}),n=UWA.createElement("div",{id:"chgAddMemberChildContainer",class:"chgAddMemberChildContainer"});let o=this.showAddMemberDialog(i,t);e.addMemberPanelImmerSiveFrame=o,this.getBody().inject(n),this.getFooter().inject(n),n.inject(i),document.getElementsByClassName("wux-windows-window-content")[0].style.overflow="hidden"},showAddMemberDialog:function(e,t){console.log("Hi");var i=new u({identifier:"ADD_MEMBER_PANEl"});i.reactToPointerEventsFlag=!1;new g({immersiveFrame:i,title:this.form.getHeading(),content:e,height:t||247,width:759,resizableFlag:!0,modalFlag:!0,identifier:"ADD_MEMBER_PANEl",closeButtonFlag:!1});return i.inject(widget.body),h.addMemberImmersiveFrame=i,i},getBody:function(){var e=UWA.createElement("div",{id:"chgAddMemberSlideinBody",class:"chgAddMemberSlideinBody"});return this.form.getBody().inject(e),e},getFooter:function(){var e=this,t=this.form.getFooter();return new a({value:p.CHG_GOV_Button_Cancel,className:"default"}).inject(t).addEvent("onClick",(function(){e.cancelHandler()})),UWA.createElement("div",{id:"chgAddMemberSlideinFooter",class:"chgAddMemberSlideinFooter",html:t})},cancelHandler:function(){this.form.addMemberPanelImmerSiveFrame.remove()}});return h})),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter",["UWA/Class","UWA/Class/Promise","UWA/Core","DS/PlatformAPI/PlatformAPI"],(function(e,t,i,n){"use strict";return{_initializationPromiseBIFilter:null,_isBIFilterInitialized:!1,_biFilter:null,_currentView:"",_inputDocument:null,_isBIFilterActivated:!1,initializeBIFilter:function(e){var t=this;t._inputDocument=e,t._cleanBIFilterProxy(),t._initializationPromiseBIFilter=t._createBIFilterProxy(),t._isBIFilterActivated=!0},cleanPathTag:function(){if(!0===this._isBIFilterInitialized){this._biFilter.setPathTags({nodes:[],paths:[]})}},_createBIFilterProxy:function(){var e=this;return new t((function(t,i){require(["DS/ENOFilterBIUX/FilterBIComponentProxy","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(n,o){var a=widget.id,s={tenant:o.getGlobalVariable().tenant,processingMode:"appProcessing",colorize:!0,widgetId:a,appId:widget.getValue("appId"),isWebInWin:o.getGlobalVariable().isNative,platformServices:o.getGlobalVariable().tenantMappings};1==o.getGlobalVariable().is3DSpace&&(s.contextId="context1");try{e._biFilter=new n(s),e._biFilter.addEvent("fetchFilterBIColorizeEvent",e._onFilterBIColorize,e),e._biFilter.addEvent("FilterBIUnColorize",e._onFilterBIUnColorize,e),e._biFilter.addEvent("fetchFilterBIFilteringEvent",e._onFilterBIFilteringEvent,e)}catch(e){i(new Error("The BIFilter proxy could not be initialized: "+e))}e._isBIFilterInitialized=!0,t()}))}))},focusOnSubjects:function(e){var t=this._biFilter;if(t&&t._biFilter){if(0===e.length)return void t._biFilter.unfocus();for(var i={},n=[],o=0;o<e.length;o++)i[e[o].options.physicalId]="3DSpace",n.push("pid://"+e[o].options.physicalId);t._biFilter.myTagProxy.focusOnSubjects(n,!0,i)}},_onSetPathTags:function(e,t){var i;if((i=this)._inputDocument=t,!1!==(i=this)._isBIFilterInitialized){var n={nodes:[],paths:[]};if(e&&e.data)e.data.roots.map((e=>{let t=e.options.grid.id;n.nodes.push(t)}));i._biFilter.setTagsWithFetchSynthesis(n.nodes,(function(){widget.dispatchEvent("onSetPathTags")}))}else i._initializationPromiseBIFilter.then((function(){i._onSetPathTags(e,t)}))},_onSetPathTagsForProposedRealized:function(e,t){var i;(i=this)._inputDocument=t,!1!==(i=this)._isBIFilterInitialized?i._biFilter.setTagsWithFetchSynthesis(e,(function(){widget.dispatchEvent("onSetPathTags")})):i._initializationPromiseBIFilter.then((function(){i._biFilter.setTagsWithFetchSynthesis(e,(function(){widget.dispatchEvent("onSetPathTags")}))}))},_cleanBIFilterProxy:function(){var e=this;e._biFilter&&e._biFilter.cleanProxy&&e._biFilter.cleanProxy()},_activate:function(){this._biFilter&&this._biFilter.cleanProxy&&this._biFilter.activate()},_deactivate:function(){this._biFilter&&this._biFilter.cleanProxy&&this._biFilter.deactivate()},_taggerWebInWinEvent:function(e){this._biFilter&&this._biFilter.taggerWebInWinEvent&&this._biFilter.taggerWebInWinEvent(e)},_onFilterBIFilteringEvent:function(e){n.publish(`${this._inputDocument.options.id} of ${widget.id}`,e),e&&i.is(e.localfilters,"object")&&Object.keys(e.localfilters).length>0?widget.setValue("pathTags",e.localfilters):widget.deleteValue("pathTags")},_onFilterBIColorize:function(e,t,i){n.publish(`${this._inputDocument.options.id} colorize ${widget.id}`,e)},_onFilterBIUnColorize:function(e){n.publish(`${this._inputDocument.options.id} uncolorize ${widget.id}`,e)}}})),define("DS/ENOChgGovernanceUX/scripts/view/facets/applicability/ChgApplicabilityfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a){"use strict";var s=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"applicability-container"}))},updateFacet:function(){var e=this;o.mask(this.elements.container),require(["DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView"],(function(t){if(e.elements&&e.elements.container){var i=e.getModel();if(!i)return!1;if(1==i.isMergedModel())return;var n={model:i,container:e.elements.container};e.elements.container.setContent(""),new t(n).build(),o.unmask(e.elements.container)}}))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return s})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(t){let i=t.accessBits;const n=!(!i||"true"!==i.AddImpactBasis);!i||i.RemoveImpactBasis,!i||i.AddImpactedItems;return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_AddImpactBasis,position:"far",visibleFlag:n,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"addExistingHandler"}}},{id:"changeAssessment",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_ChangeAssessment,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"changeAssessmentHandler"}}},{id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:"Mass Update",position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"massUpdateHandler"}}},{id:"addImpactedItem",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"change-request-impacted-items",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_AddImpactedItem,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"addImpactedItemHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"removeHandler"}}},{id:"impactBasis_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t})),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable",["DS/DataDragAndDrop/DataDragAndDrop","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o){"use strict";var a={makeDroppable:function(n,s){e.droppable(n,{drop:function(e,r,l){if(l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault(),l.dataTransfer&&l.dataTransfer.dropEffect&&(l.dataTransfer.dropEffect="copy"),UWA.is(e)&&""!=e){var d=JSON.parse(e),c=i.checkTenantInforamation(d);if(0!=c.TenantInfoMissing.length)t.error(o.CHG_GOV_Pref_PlatformMissing_Error);else if(0!=c.DiffTenantData.length)t.error(o.CHG_GOV_Pref_PlatformDoesNotMatch_Error);else{d=i.removeDuplicatesToBeDroppedObjects(d);var p=i.filterBasedOnServiceId(d);if(p.incorrectServiceInfo&&Array.isArray(p.incorrectServiceInfo)&&p.incorrectServiceInfo.length>0){var u=o.CHG_GOV_WARN_DROP_SKIPPED+"<br/>";for(var g in p.incorrectServiceInfo)u+=p.incorrectServiceInfo[g]+"<br/>";t.warn(u,"false")}a.ExecuteDrop(d,s)}}else t.error(o.CHG_GOV_Drop_Not_Supported);n.style.borderWidth="0px"},over:function(){arguments[0].setStyles({borderStyle:"solid",borderColor:"#368ec4",borderWidth:"1px"})},leave:function(){arguments[0].setStyle("borderWidth","0px")}})},ExecuteDrop:function(e,i){if(e){var n=e.data.items;UWA.is(n)&&UWA.is(n.length)&&n.length>0&&i(n)}else t.error(o.CHG_GOV_Drop_Not_Supported)}};return a})),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovExpandInputTextBox",["UWA/Core","DS/Controls/Abstract","DS/Controls/LineEditor","DS/Controls/Button","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o){"use strict";var a=null,s=function(){null!=a&&(a.that.lineEditor._myInput.setStyle("width","auto"),a.that.createList.inject(a.that.dropdown),a.that.lineEditor.inject(a.that.createCAContainer,"top"),a.remove(),a=null)},r=t.inherit({name:"ExpandInput",_preBuildView:function(){this.elements.container=new UWA.Element("div",{class:"container-expandInput wux-tweakers",id:"quickCreateContainer"}),this.createCAContainer=new UWA.Element("div",{class:"hideBox transition"}),this.lineEditor=new i({placeholder:o.CHG_GOV_CREATE_NEW_PLACEHOLDER,sizeInCharNumber:25,selectAllOnFocus:!0,displayClearFieldButtonFlag:!0}),this.lineEditor.inject(this.createCAContainer),this.lineEditor.getContent().addClassName("prevent-ios-zoom-in"),this.dropdown=new UWA.Element("div",{class:"createCAdropdown"}),this.createList=new UWA.Element("ul",{class:"createUL"});new UWA.Element("li",{class:"createLI"});this.dropdownParent=new UWA.Element("div",{class:"dropdownParent"});new UWA.Element("span",{class:"item-icon fonticon fonticon-doc cursorPointer"}),UWA.createElement("span",{class:"item-text",html:o.CHG_CreateCA,title:o.CHG_CreateCA,id:"idCreateCA"});this.createList.addEvents({click:function(){console.log("CO title entered.."),s()}}),this.cancelBtn=new n({label:"Cancel",emphasize:"primary",domId:"expandInput_cancel_btn"}),this.cancelBtn.getContent().addClassName("expandInput_cancel_btn"),this.createCAContainer.inject(this.elements.container);var e={icon:{}};e.icon.iconName="plus",e.icon.fontIconFamily=1,e.tooltip="YOLO";this.createCAContainer,this.lineEditor;this.plusBtn=new n(e),this.plusBtn.getContent().addClassName("wux-tweakers-multirep-button").addClassName("wux-tweaker-function").addClassName("wux-ui-style-icon"),this.plusBtn.inject(this.elements.container),this._parent(),this.isMultiSelection=!1;this.cancelBtn.addEventListener("click",(function(){s()})),this.createList.addEventListener("click",(function(){s()})),document.getElementById("zPlaneid")&&document.getElementById("zPlaneid").addEventListener("mouseup",(function(e){if(s(),e.target.hasClassName("prevent-ios-zoom-in")||e.target.getParent().hasClassName("prevent-ios-zoom-in"));else if(e.target.getParent().hasClassName("icon-blue"));else{var t=document.querySelectorAll("#quickCreateContainer")[0];t&&(t.getChildren()[0].removeClassName("showBox"),t.getChildren()[1].removeClassName("icon-blue"))}})),a=null},toggleDisplayLineEditor:function(){console.log(arguments,this)},getModalInputBox:function(e){return null==a&&(a=UWA.createElement("div",{class:"input_FloatingDiv",id:"input_FloatingDiv"}),this.lineEditor.remove(),this.createList.remove(),a.addContent(this.lineEditor),a.addContent(this.createList),a.addContent(this.cancelBtn),a.that=this,a.that.lineEditor._myInput.setStyle("width","100%"),e.top&&a.setStyle("top",e.top),e.left&&(e.left+164>widget.body.getBoundingClientRect().width?(a.setStyle("left",0),a.setStyle("width","100%")):a.setStyle("left",e.left)),a.addEventListener("click",(function(e){e.stopPropagation()}))),a},removeModalInputBox:function(){s()}});return r})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgVersionExplorerLoader",["DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","UWA/Widget"],(function(e,t,i,n){"use strict";return{VersionExplorerLoaderFactory:function(o,a,s,r,l,d,c){let p=i.getGlobalVariable().tenant,u=i.getGlobalVariable().baseURL,g=i.getGlobalVariable().getSecurityContext();const h=UWA.createElement("div",{styles:{height:"100%"}});h.inject(s),this.widget=new n;const m=d.value=new e({versionGraphContainer:h,widget:window.widget,pruningState:!1,showViewIcon:!1,unselectAllOnEmptyArea:!1,customizeColumnHash:c?c.customizeColumnHash:{},customizeColumnAttributeHash:c?c.customizeColumnAttributeHash:{},customizeToolbarHash:c.customizeToolbarHash?c.customizeToolbarHash:{}}),C=[{"3DSpace":u,platformId:p}];t.setOption("platform_services",C),m.setMultiSelectionMode(),m.setCheckVersionExternalFunction("ENOXVersionExplorerWhereUsed",(function(e){return!0})),m.setCheckVersionExternalFunction("ENOXVersionExplorerOpenWith",(function(e){return!0})),m.setCheckVersionExternalFunction("ENOXVersionExplorerPruneAncestors",(function(e){return!1})),m.setCheckVersionExternalFunction("ENOXVersionExplorerPruneDescendants",(function(e){return!1})),m.setCheckVersionExternalFunction("ENOXVersionExplorerOpenVersion",(function(e){return!1})),m.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:o,securityContext:g,tenantId:p,context:null,dataModelType:5,onComplete:function(){a()}})}}})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],(function(e,t,i,n,o,a,s,r,l){"use strict";var d=r.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",d)},loadIndexedChangeRequests:function(e,t){var o=e,a=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var r=this.createCustomNameField(t[s]);t[s].co_name=r;var l=this.createCustomSeverity(t[s]);t[s].sev=l;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var c=this.createCustomOwnerField(t[s]);t[s].co_Owner=c;var p=this.getStatusBarIcons(t[s]),u=this.statusbarIconsTooltips(t[s]),g=this.getSubLevel(t[s]),h=this.getDescription(t[s]);t[s].maturityWithBadge=t[s].maturityNLS;for(var m=this.createCustomTooltip(t[s]),C=!1,f=o.getChildren(),v=0;v<f.length;v++){f[v].options.grid.id==t[s].id&&(C=!0)}if(!C){var D=i.createTreeNodeDataModel(a,{label:t[s].title,subLabel:g,description:h,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:p,statusbarIconsTooltips:u,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(D)}}e.pushUpdate()},loadChangeRequestData:function(e,t){var a=e;let s=new n;e.prepareUpdate();for(let n=0;n<t.length;n++){let c=this.createCustomNameField(t[n],"NonIndex");t[n].co_name=c;let p=this.createCustomSeverity(t[n]);t[n].sev=p;let u=this.createCustomChangeCoordinatorField(t[n]);t[n].co_Coordinator=u;let g=this.createCustomOwnerField(t[n]);t[n].co_Owner=g;let h=this.getStatusBarIcons(t[n],"NonIndex"),m=this.statusbarIconsTooltips(t[n],"NonIndex"),C=this.getSubLevel(t[n]),f=this.getDescription(t[n]);t[n].maturityWithBadge=t[n].maturityNLS;let v=this.createCustomTooltip(t[n]);for(var r=!1,l=(o.getGlobalVariable().existingCRIds,r=!1,a.getChildren()),d=0;d<l.length;d++){l[d].options.grid.id==t[n].id&&(r=!0)}if(!r){let o=i.createTreeNodeDataModel(s,{label:t[n].title,subLabel:C,description:f,grid:t[n],icons:[t[n].iconURL],thumbnail:t[n].thumbnail,statusbarIcons:h,statusbarIconsTooltips:m,customTooltip:v,contextualMenu:["Copy1","Move1"]});e.addChild(o)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"crSummaryNotEmpty"}),e.unselectAll();let o=new n,a=this.createCustomNameField(t[0]);t[0].co_name=a;let s=this.createCustomSeverity(t[0]);t[0].sev=s;let r=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=r;let l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;let d=this.getStatusBarIcons(t[0]),c=this.statusbarIconsTooltips(t[0]),p=this.getSubLevel(t[0]),u=this.getDescription(t[0]),g=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(o,{label:t[0].title,subLabel:p,description:u,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:g});e.getXSO().add(h),e.addChild(h,0)},createCustomNameField:function(e,t){let i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);let n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(e),e.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_TOOLTIP_NEW_REQUEST});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){let t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){let i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{let t=s.getAvatarDetails(e.changeCoordinatorFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(i);let l=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),l.inject(t)}return t.outerHTML},createCustomSeverity:function(e){let t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);let o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomMaturity:function(e){let t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");let i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){let i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){let i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(a.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(a.CHG_TOOLTIP_NEW_REQUEST),i},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){let t="";return t=e.name+" | "+e.ownerFullName,t},getDescription:function(e){let t="";return t=e.maturityNLS,t},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map((t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}}))},UWA.is(i,"array")&&i.forEach((function(e){var t=e.color,i=e.id;n(t,i)}))},disableColorizeView:function(){this.treeDocument.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgImpactAnalysisOnCreateCA",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],(function(e,t,i,n,o,a){return{createNewChangeActionInContext:function(e){let t=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action";let s=e.parentID,r={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:t,select:[],parentPIDs:[s]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],(function(i){i.ChgChangeActionDataGridModel.addNewChildren(t);try{let t=a("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var n=e.result[0];n.isKindOfType="Change Action",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:n,View:"Impact Analysis"})}catch(e){console.log(e)}i.modelEvents.publish({event:"CA-Creation-Update",data:{}})}))},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new n).CreateNew(r)}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],(function(e,t){let i=Object.create(null);return i.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddCA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"AddNewChangeAction"},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddCA},{type:"PushItem",title:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"addExistingHandler"},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddExisting}]},i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){var n=i.accessBits;const o="true"==(n=t.processAccessBitIA(n)).ManageImplementingChanges;return{entries:[{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"plus",fontIconFamily:1},value:this.createData},position:"far",visibleFlag:o,category:"Create"},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_Remove,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"removeHandlerCR"}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_DeleteCA,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"removeHandler"}}},{id:"custom_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"custom",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:i.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},i})),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/context/ChgCAcontextDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u){"use strict";let g=e.extend({init:function(e){this.parentCAId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadContextData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=null,n=this.createCustomOwnerField(e);e.chgObjOwner=n;let o=e.thumbnail,a=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName;void 0!==e.currentNLS&&null!==e.currentNLS?(e.current=e.current,e.maturityWithBadge=e.currentNLS,t=e.currentNLS):(e.current=e.maturity?e.maturity:"",e.maturityWithBadge=e.maturityNLS?e.maturityNLS:"",t=e.maturityNLS?e.maturityNLS:"");var s=this.getCustomTooltip(e);return new i({label:e.title,subLabel:a,description:t,grid:e,customTooltip:s,icons:[e.icon],thumbnail:o,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.currentNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.parentCAId;let s=document.getElementById("outer-context-grid-div");"undefined"!=s&&null!=s&&u.mask(s),r.updateExistingCAContext(o,e).then((async function(e){t.treeDocument&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"});var n={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(n=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var r=await l.processCAContextItems(e);g.prototype.addNodesInLayoutModel(t.treeDocument,r),i(e),"undefined"!=s&&null!=s&&u.unmask(s);var h={contextid:o,length:e.data.length};if(p.publish("context:update",h),n&&n.length>0){var m=new Map,C=n.length;for(let e=0;e<n.length;e+=50){let i=[];i=C<50?n.slice(e,e+C):n.slice(e,e+50);for(var f=[],v=new Map,D=i,I=0;I<D.length;I++){var w=D[I];f.push(w.id),v.set(w.id,w)}var _=[];if(f.length>0){var b=l.commonPredicatedForFedSearch(),S=await l.callFederatedSearch(f,b);if(S&&S.results&&S.results.length>0)_=await l.processCAContextItemsFederatedSearch(S,v)}g.prototype.addNodesInLayoutModel(t.treeDocument,_),m=new Map([...m,...v]),C-=50}if(m&&m.size>0){p.publish("updateIndexingIconForHideOrShowInContextItem",{});var y=await c.recent();if(y&&y.results&&y.results.length>0){var E=l.filterNonIndexedDataNew(y,m);m.size!=E.length&&d.warn(a.CHG_GOV_Not_Accessable_Data);var O=[];E.length>0&&(O=await l.processInformationForRecentCAContext(E)),g.prototype.addNodesInLayoutModel(t.treeDocument,O)}}}}),(function(e){u.unmask(s),n(e)}))}))},removeExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.parentCAId,s=document.getElementById("outer-context-grid-div");"undefined"!=s&&null!=s&&u.mask(s),r.updateExistingCAContext(o,e).then((function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var r={contextid:o,length:t.treeDocument.getAllDescendants().length};p.publish("context:update",r)}d.success(a.CHG_GOV_context_Remove_Success),u.unmask(s)}),(function(e){u.unmask(s),n()}))}))},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.getXSO().add(i[t]),e.addRoot(i[t],0);e.pushUpdate()}});return g})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e){let t=Object.create(null);return t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"removeHandler"}}}]}},t})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";let h=g.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"CR_RelatedScope",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadRelatedScopeData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.previewicon,o=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName,a=e.currentNLS||e.maturityNLS?e.currentNLS||e.maturityNLS:"";e.maturityWithBadge=e.currentNLS||e.maturityNLS?e.currentNLS||e.maturityNLS:"";var s=this.getCustomTooltip(e);return new i({label:e.title,subLabel:o,description:a,grid:e,customTooltip:s,icons:[e.icon],thumbnail:n,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.maturityNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.parentCRId;var s=!0;let g=document.getElementById("outer-relatedScope-grid-div");"undefined"!=g&&null!=g&&u.mask(g),r.updateExistingRelatedScope(o,e).then((async function(e){var i={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(i=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var n=await l.processedChangeRequestRelatedScope(e);if(m.prototype.addNodesInLayoutModel(t.treeDocument,n),"undefined"!=g&&null!=g&&u.unmask(g),i&&i.length>0){s=!1;var r=new Map,h=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=h<50?i.slice(e,e+h):i.slice(e,e+50);for(var C=[],f=new Map,v=n,D=0;D<v.length;D++){var I=v[D];C.push(I.id),f.set(I.id,I)}var w=[];if(C.length>0){var _=l.commonPredicatedForFedSearch(),b=await l.callFederatedSearch(C,_);if(b&&b.results&&b.results.length>0)w=await l.processReportedAgainstFederatedSearch(b,f)}m.prototype.addNodesInLayoutModel(t.treeDocument,w),r=new Map([...r,...f]),h-=50}if(r&&r.size>0){p.publish("updateIndexingIconForHideOrShowInCRReportedAgainst",{});var S=await c.recent();if(S&&S.results&&S.results.length>0){var y=l.filterNonIndexedDataNew(S,r);r.size!=y.length&&d.warn(a.CHG_GOV_Not_Accessable_Data);var E=[];y.length>0&&(E=await l.processInformationForRecentReportedAgainst(y)),m.prototype.addNodesInLayoutModel(t.treeDocument,E)}var O=e.data.length,G={contextid:o,length:E.length+O};p.publish("relatedScope:update",G)}}let N=[];if(e&&(N=e.data),t.treeDocument&&t.treeDocument.getAllDescendants()&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),s){G={contextid:o,length:e.data.length};p.publish("relatedScope:update",G)}}),(function(e){u.unmask(g),n(e)}))}))},removeExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.parentCRId,s=document.getElementById("outer-relatedScope-grid-div");"undefined"!=s&&null!=s&&u.mask(s),r.removeExistingRelatedScope(o,e).then((function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var r={contextid:o,length:t.treeDocument.getAllDescendants().length};p.publish("relatedScope:update",r)}d.success(a.CHG_GOV_relatedScope_Remove_Success),u.unmask(s)}),(function(e){u.unmask(s),n()}))}))},addNodesInLayoutModel:function(e,t){let i=m.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map((i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}}))},UWA.is(n,"array")&&n.forEach((function(e){var t=e.color,i=e.id;o(t,i)}))},disableColorizeView:function(e,t){t.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return m})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s){"use strict";var r=n.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e),this.options=e,this.treeDocument=null},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",r)},resetModel:function(){this.treeDocument.empty()},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){this.treeDocument=new t({id:"ChgCAProposedChangesTreeDoc",useAsyncPreExpand:!0})},emptyTreeDocument:function(){this.treeDocument.empty()},updateTreeDocument:function(e,t){this.treeDocument.prepareUpdate();for(var i=0;i<e.length;i++){var n=e[i];if("true"==n.containsChangeRequired){for(var o=n.id,a=void 0,s=this.treeDocument.getAllDescendants(),r=0;r<s.length;r++)if(s[r].options.id==o){a=s[r];break}a||(a=this.createTreeNode(e[i],t),this.treeDocument.addRoot(a));var l=n.activity,d=this;l.forEach((function(e){"ChangeRequired"==e.proposedOperation&&e.instanceDetails&&a.addChild(d.createTreeNode_ForInstance(e,t,o))}))}else this.treeDocument.addRoot(this.createTreeNode(e[i],t))}this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},createTreeNode_ForInstance:function(e,t,n){var o=e.instanceDetails[0].referenceDetails[0],a=e.instanceDetails[0],s=this.createCustomNameField(o);return o.chgObjName=s,o.change_details=this.getChangeDetails(e),o.computedActivityWhy=e.computedActivityWhy,o.resolvedBy=this.getResolvedByDetails(e),o.flowdownFrom=this.getFlowdownFromDetails(e),o.flowdownFor=this.getFlowdownForDetails(e),o.change=this.getChange(e),o.activityIcon=this.getProposedActivityIconName(e),o.proposedStatus=this.getProposedStatus(e),o.maturityWithBadge=o.maturityNLS,o.evolutionPrefix=o.evolutionPrefix?o.evolutionPrefix:"",o.addProposedAccess=t.AddProposed,o.removeProposedAccess=t.DeleteProposed,o.proposedPID=e.proposedPID,o.reasonForChange=e.proposedWhy,o.title_instance=a.title,o.instanceId=a.id,o.serviceName=a.service,o.instanceType=a.type,o.computedOperation=e.computedOperation,o.parent_referenceId=n,new i({id:o.id,label:o.title,title:o.title,title_instance:a.title,serviceName:a.service,instanceId:a.id,name:o.name,revision:o.revision,type:o.type,typeNLS:o.typeNLS,maturity:o.maturity,maturityNLS:o.maturityNLS,description:o.description,organization:o.organization,organizationNLS:o.organizationNLS,collabspace:o.collabspace,collabspaceNLS:o.collabspaceNLS,isLastRevision:o.isLastRevision,icons:[o.icon],thumbnail:o.previewIcon,change:o.change,change_details:o.change_details,proposedPID:o.proposedPID,proposedStatus:o.proposedStatus,reasonForChange:o.proposedWhy,activityIcon:o.activityIcon,subLabel:o.type+" | "+o.revision+" | "+o.name,grid:o,useAsyncPreExpand:!0,parent_referenceId:o.parent_referenceId})},createTreeNode:function(e,t){return this.getProposedTreeNode(e,t)},getProposedTreeNode:function(e,t){var n=this.createCustomNameField(e);return e.chgObjName=n,e.change_details=this.getChangeDetails(e),e.resolvedBy=this.getResolvedByDetails(e),e.flowdownFrom=this.getFlowdownFromDetails(e),e.flowdownFor=this.getFlowdownForDetails(e),e.change=this.getChange(e),e.activityIcon=this.getProposedActivityIconName(e),e.proposedStatus=this.getProposedStatus(e),e.maturityWithBadge=e.maturityNLS,e.evolutionPrefix=e.evolutionPrefix?e.evolutionPrefix:"",e.addProposedAccess=t.AddProposed,e.removeProposedAccess=t.DeleteProposed,new i({id:e.id,label:e.title,title:e.title,name:e.name,revision:e.revision,type:e.type,typeNLS:e.typeNLS,maturity:e.maturity,maturityNLS:e.maturityNLS,description:e.description,organization:e.organization,organizationNLS:e.organizationNLS,collabspace:e.collabspace,collabspaceNLS:e.collabspaceNLS,isLastRevision:e.isLastRevision,icons:[e.icon],thumbnail:e.previewIcon,change:e.change,change_details:e.change_details,proposedPID:e.proposedPID,proposedStatus:e.proposedStatus,reasonForChange:e.proposedWhy,activityIcon:e.activityIcon,subLabel:e.type+" | "+e.revision+" | "+e.name,grid:e,useAsyncPreExpand:!0})},createCustomNameField:function(e){var t=new UWA.Element("div",{class:"wux-tweakers-string"}),i=UWA.createElement("span",{html:e.name});i.style.setProperty("text-overflow","ellipsis"),i.inject(t);var n=new UWA.Element("div",{class:"iconsDiv"});if("false"==e.isLastRevision){var o=new UWA.Element("div",{class:"gridIconContainer",title:s.CHG_GOV_Proposed_Higher_Revision_Exists});UWA.createElement("a",{class:"fonticon fonticon-flow-branch-list",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}}).inject(o),o.inject(n)}return n.inject(t),t.outerHTML},getChange:function(e){return s["CHG_GOV_Proposed_Activity_"+e.computedOperation]?s["CHG_GOV_Proposed_Activity_"+e.computedOperation]:""},getChangeDetails:function(e){var t="";e.computedOperation=e.proposedOperation,e.targetState="",e.activity&&e.activity.length>0&&e.activity.forEach((function(i){"ChangeStatus"==i.proposedOperation&&(e.computedOperation="ChangeStatus",e.targetState=i.targetState),"ChangeRequired"!=i.proposedOperation&&i.proposedWhy&&""!=i.proposedWhy.trim()&&(""!=t&&(t+="\n"),t+=i.proposedWhy)})),"ChangeRequired"==e.proposedOperation&&(t=e.proposedDescription?e.proposedDescription:""),e.computedActivityWhy=t;var i=this.getPrefix(e);return""!=i&&(i+="\n"),i+=t},getFlowdownForDetails:function(e){var t="";if(e.fdFor&&e.fdFor.length>0){let o=UWA.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});if(1==e.fdFor.length){var i=[{tag:"img",src:e.fdFor[0].icon,styles:{"padding-left":"5px"}},{tag:"span",text:e.fdFor[0].title,styles:{"padding-left":"5px"}},{tag:"span",text:e.fdFor[0].revision,class:"proposed_fdFor_revision",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}}];i.push({tag:"span",class:"proposed_fdFor_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}),o.setContent(i)}else{var n=UWA.createElement("a",{class:"proposed_fdFor_multiple",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}});n.innerText=e.fdFor.length,n.inject(o)}t=o.outerHTML}return t},getFlowdownFromDetails:function(e){var t="";if(e.fdFrom&&e.fdFrom.length>0){let o=UWA.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});if(1==e.fdFrom.length){var i=[{tag:"img",src:e.fdFrom[0].icon,styles:{"padding-left":"5px"}},{tag:"span",text:e.fdFrom[0].title,styles:{"padding-left":"5px"}}];i.push({tag:"span",class:"proposed_fdFrom_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}),o.setContent(i)}else{var n=UWA.createElement("a",{class:"proposed_fdFrom_multiple",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}});n.innerText=e.fdFrom.length,n.inject(o)}t=o.outerHTML}return t},getResolvedByDetails:function(e){var t="";if(e.resolution&&e.resolution.length>0){let r=UWA.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});if(1==e.resolution.length){var i,n=[{tag:"img",src:e.resolution[0].icon,styles:{"padding-left":"5px"}},{tag:"span",text:e.resolution[0].title,styles:{"padding-left":"5px"}},{tag:"span",text:e.resolution[0].revision,class:"proposed_resolution_revision",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}}];n.push({tag:"span",class:"proposed_resolution_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}),r.setContent(n)}else{var o=UWA.createElement("a",{class:"proposed_resolution_multiple",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}});o.innerText=e.resolution.length,o.inject(r)}for(var a=0;a<e.resolution.length;a++)if((i=e.resolution[a].maturity?e.resolution[a].maturity:e.resolution[a].status)&&-1==i.indexOf("RELEASED")&&-1==i.indexOf("Release")){r.addContent({tag:"span",class:"wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-attention wux-ui-3ds wux-ui-3ds-lg",title:s.CHG_GOV_Proposed_Resolution_Warning,styles:{"font-size":"1.2em",color:"#e87b00"}});break}t=r.outerHTML}return t},getPrefix:function(e){var t="";if(e&&e.computedOperation)switch(e.computedOperation){case"None":case"NewVersion":case"NewMinorVersion":case"ChangeRequired":t="";break;case"NewEvolution":t=e.evolutionPrefix&&""!=e.evolutionPrefix?s.CHG_GOV_Proposed_Grammar_Prefix+": "+e.evolutionPrefix:"";break;case"ChangeStatus":t=s.CHG_GOV_Proposed_Grammar_MaturityState+": "+s["CHG_GOV_Proposed_Target_State_"+e.targetState]}return t},getProposedActivityIconName:function(e){var t="";if(e&&e.computedOperation)switch(e.computedOperation){case"None":t="pencil wux-ui-3ds";break;case"NewEvolution":t="flow-branch-add wux-ui-3ds";break;case"NewVersion":case"NewMinorVersion":t="flow-line-add wux-ui-3ds";break;case"ChangeStatus":t="collaborative-lifecycle-management";break;case"ChangeRequired":t="change wux-ui-3ds"}return t},getProposedStatus:function(e){var t="";if(e&&e.proposedStatus)switch(e.proposedStatus){case"Not Started":default:t="notStartedKey";break;case"Started":t="startedKey";break;case"Partial":t="partialKey";break;case"Complete":t="completedKey";break;case"Rejected":t="rejectedKey"}return t},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})}})})),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant",[],(function(){"use strict";var e={_KEY:"xchange-app",_VIEWS_PREFERENCES:"xchange-views-preferences",_MY_CHANGE_ORDERS:"xchange-my-change-orders",_RECENTLY_OPENED:"xchange-recently-opened",_CHANGE_ORDERS_DETAILS:"xchange-change-orders-details",_CHANGE_REQUESTS_DETAILS:"xchange-change-requests-details",_CHANGE_ACTIONS_DETAILS:"xchange-change-actions-details",_INVESTIGATION_REQUESTS_DETAILS:"xchange-investigation-requests-details",_LIST_VIEW:"xchange-list-view",_TAB:"tab",_OBJECTIDs:"objectIDs",_COTAB:"cotab",_CRTAB:"crtab",_FILTERVIEW:"filterview",_MODEL:"model",_ID_CARD:"id-card",_ORCHESTRATION_LEVEL1:"orchestration-level1",_ORCHESTRATION_LEVEL2:"orchestration-level2",_ORCHESTRATION_LEVEL3:"orchestration-level3",_LAST_ROUTE:"last-route",_FILTERS:"filters",_SELECTIONS:"selections",_DATE_FORMAT:"%m/%d/%Y , %I:%M:%S %p"};return e})),define("DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgDataService","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgDataProcess","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","DS/PlatformAPI/PlatformAPI","require"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"attachment-mainContainer"}))},updateFacet:function(){var e=this;a.mask(this.elements.container),require(["DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView"],(function(t){var i=e.getModel(),o=i.get("objectId");1!=i.isMergedModel()&&n.getObjectTypeInformation(o).then((function(i){if("Change Order"==i)n.getChangeOrderUserAccess(o).then((function(n){var o=n.data[0].dataelements;if(o=s.processAccessBitCO(o),e.elements&&e.elements.container){var r=e.getModel();if(!r)return!1;e.elements.container.setContent("");var l={id:r.get("objectId"),target:e.elements.container,parentType:i};t.create(l,"false"==o.AddReferential),a.unmask(e.elements.container)}}));else if("Change Request"==i)n.getChangeRequestUserAccess(o).then((function(n){var o=n.data[0].dataelements;if(e.elements&&e.elements.container){var s=e.getModel();if(!s)return!1;e.elements.container.setContent("");var r={id:s.get("objectId"),target:e.elements.container,parentType:i};t.create(r,"false"==o.AddReferential),a.unmask(e.elements.container)}}));else if("Change Action"==i){d("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").getUserAccess("pid:"+o).then((function(n){var o=n.userAccess;if(e.elements&&e.elements.container){var s=e.getModel();if(!s)return!1;e.elements.container.setContent("");var r={id:s.get("objectId"),target:e.elements.container,parentType:i};t.create(r,"false"==o.AddReferential),a.unmask(e.elements.container)}}))}else""==i&&n.getImpactAnalysisUserAccess(o).then((function(n){var o=n.data[0].dataelements;if(e.elements&&e.elements.container){var s=e.getModel();if(!s)return!1;e.elements.container.setContent("");var r={id:s.get("objectId"),target:e.elements.container,parentType:i};t.create(r,"false"==o.ManageAttachments),a.unmask(e.elements.container)}}))}))}))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return c})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t){let i=Object.create(null);return i.createData={menu:[{type:"PushItem",title:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_OrchestrateChangeActions,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"_OrchestrateChangeActions"},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_OrchestrateChangeActions},{id:"newcaImpcatedItem",type:"PushItem",title:t.CHG_GOV_ImpactedItem_Toolbar_Add_New_ChangeAction,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"addNewChangeAction"},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_New_ChangeAction},{type:"PushItem",title:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_ChangeAction,state:"disabled",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"addExistingChangeAction"},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_ChangeAction}]},i.viewData={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"changeImpactView",argument:{view:"GridView"}},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"changeImpactView",argument:{view:"TileView"}},tooltip:t.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){const n="true"===i.accessBits.AddImpactedItems,o=(i.accessBits.RemoveImpactedItems,"true"===i.accessBits.ManageImplementingChanges);let a={entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_AddImpactedItem,position:"far",visibleFlag:n,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"addExistingHandler"}}},{id:"changeAssessment",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:t.CHG_GOV_ImpactBasis_Toolbar_ChangeAssessment,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"changeAssessmentHandler"}}},{id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:"Mass Update",position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"massUpdateHandler"}}},{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"change-action",fontIconFamily:1},value:this.createData,tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_OrchestrateChangeActions_Drop_Down},position:"far",disabled:!1,visibleFlag:o},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:t.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"removeHandler"}}},{id:"ia_impacts_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:t.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:i.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};return e.getGlobalVariable().is3DSpace&&(a.entries[3].dataElements.value.menu=a.entries[3].dataElements.value.menu.filter((e=>"newcaImpcatedItem"!=e.id))),a},i})),define("DS/ENOChgGovernanceUX/scripts/util/DocumentUtils",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/DocumentManagement/DocumentManagement","DS/ENOChgServices/scripts/services/ChgInfraService"],(function(e,t,i){"use strict";var n={init:function(){},preview:function(e){this._loadCommands(e,"Preview")},edit:function(e){this._loadCommands(e,"Edit")},undoEdit:function(e){this._loadCommands(e,"UndoEdit")},update:function(e){this._loadCommands(e,"Update")},download:function(e){this._loadCommands(e,"Download")},_loadCommands:function(t,n){require(["DS/DocumentCommands/ENOXDocumentCommands","DS/DocumentCommands/DocumentCommandsV2","DS/DocumentManagement/DocumentManagement","DS/CoreEvents/ModelEvents"],(function(o,a,s,r){let l=e.getGlobalVariable();var d=decodeURIComponent(l.getSecurityContext()),c=l.tenant,p=l.get3DSpaceURL(),u=t;"Download"!==n&&"Preview"!==n||s.getDocuments(u,{tenant:c,securityContext:d,tenantUrl:p,onComplete:function(e){if(e.success){if(!Array.isArray(e.data))return;var t=new r;t.subscribe({event:"docv2-show-notification"},(function(e){e&&i.showNotification(e.level,e.title,e.subtitle,e.message,e.sticky)})),new a({fetchSecurityContext:function(){return decodeURIComponent(l.getSecurityContext())},getSelectedNodes:function(){return e.data},getDocumentFromNodeModel:function(e){return e},platformUrls:{"3DSpace":p},events:t}).commands[n].execute()}},onFailure:function(e){console.log(e)}})}))},getDocuments:function(i){let n=e.getGlobalVariable();var o=decodeURIComponent(n.getSecurityContext()),a=n.tenant,s=n.get3DSpaceURL();return UWA.is(i,"array")?new Promise((function(e,n){t.getDocuments(i,{getVersions:!1,additionalURLParams:"$fields=isDocumentType",tenantUrl:s,tenant:a,securityContext:o,onComplete:function(t){e(t.data)},onFailure:n})})):Promise.reject()}};return n})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r){var l={onCompleteCallback:function(e){console.log("................................");var t=i.processChangeActionInContext(e).processData;console.log(t),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],(function(e){e.addNodesInLayout(t)}))},onFailureCallback:function(){console.log("ERROR : FAILED CREATE CA")},createNewChange:function(){e.prototype.execute(l.onCompleteCallback)},createNewChangeOrderInContext:function(e){let t=e.parentID;console.log("launchCreateChangeOrderDialog ............................");let i=o.getUserPreference(a.keys.createKeys.CO_DEF_TYPE),l={context:{service:"3DSpace",tenant:n.getGlobalVariable().tenant,header:{SecurityContext:n.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:i,select:[],parentPIDs:[t]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Order"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],(function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)}));let i={};i[a.keys.createKeys.CO_DEF_TYPE]=e.result[0].type,o.saveUserPreference(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new s).CreateNew(l)},createNewChangeActionInContext:function(e){let t=e.parentID;console.log("createNewChangeActionInContext ............................");let i=o.getUserPreference(a.keys.createKeys.CA_DEF_TYPE),l={context:{service:"3DSpace",tenant:n.getGlobalVariable().tenant,header:{SecurityContext:n.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:i,select:[],parentPIDs:[t]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],(function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)}));let i={};i[a.keys.createKeys.CA_DEF_TYPE]=e.result[0].type,o.saveUserPreference(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new s).CreateNew(l)},createChangeRequestInContext:function(e){let t=e.parentID,i=[];e.selectedIDs&&(i=e.selectedIDs),console.log("launchCreateChangeRequestDialog ............................");let l=o.getUserPreference(a.keys.createKeys.CR_DEF_TYPE),d={context:{service:"3DSpace",tenant:n.getGlobalVariable().tenant,header:{SecurityContext:n.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_GOV_Welcome_Activity_New_Change_Request,type:"Change Request",silentMode:!1,overlay:!0,options:{typeName:"Change Request",preferedType:l,select:[],parentPIDs:[t],selectedIDs:i},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(t){let i={objectID:t.result[0].identifier,type:"Change Request"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],(function(t){t.ChgOrchestrationDataGridModel.addNewChildren(i),e.postComplete&&e.postComplete()}));let n={};n[a.keys.createKeys.CR_DEF_TYPE]=t.result[0].type,o.saveUserPreference(n)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new s).CreateNew(d)}};return l})),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(t){return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_AddIssue,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"addExistingHandler"}}},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_RemoveIssue,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"removeHandler"}}},{id:"cmd_issue_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,disabled:!1,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"issueDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesFilterModel",["UWA/Core"],(function(e){"use strict";return{getFilterModel:function(){return{tree:{filterId:"stringRegexp",filterModel:""},title_instance:{filterId:"stringRegexp",filterModel:""},typeNLS:{filterId:"set",filterModel:[]},name:{filterId:"stringRegexp",filterModel:""},revision:{filterId:"set",filterModel:[]},maturityWithBadge:{filterId:"set",filterModel:[]},reasonForChange:{filterId:"stringRegexp",filterModel:""},change:{filterId:"set",filterModel:[]},change_details:{filterId:"stringRegexp",filterModel:""},moved_to:{filterId:"stringRegexp",filterModel:""}}}}})),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/ChgCADataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],(function(e,t,i,n,o,a,s,r,l){"use strict";var d=r.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",d)},loadIndexedChangeActions:function(e,t){var o=e,a=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var r=this.createCustomNameField(t[s]);t[s].co_name=r;var l=this.createCustomSeverity(t[s]);t[s].sev=l;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var c=this.createCustomOwnerField(t[s]);t[s].co_Owner=c;var p=this.getStatusBarIcons(t[s]),u=this.statusbarIconsTooltips(t[s]),g=this.getSubLevel(t[s]),h=this.getDescription(t[s]);t[s].maturityWithBadge=t[s].maturityNLS;for(var m=this.createCustomTooltip(t[s]),C=!1,f=o.getChildren(),v=0;v<f.length;v++){f[v].options.grid.id==t[s].id&&(C=!0)}if(!C){var D=i.createTreeNodeDataModel(a,{label:t[s].title,subLabel:g,description:h,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:p,statusbarIconsTooltips:u,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(D)}}e.pushUpdate()},loadChangeActionData:function(e,t,a){var s=e;let r=new n;e.prepareUpdate();for(let n=0;n<t.length;n++){let p=this.createCustomNameField(t[n],"NonIndex");t[n].co_name=p;let u=this.createCustomSeverity(t[n]);t[n].sev=u;let g=this.createCustomChangeCoordinatorField(t[n]);t[n].co_Coordinator=g;let h=this.createCustomOwnerField(t[n]);t[n].co_Owner=h;let m=this.getStatusBarIcons(t[n],"NonIndex"),C=this.statusbarIconsTooltips(t[n],"NonIndex"),f=this.getSubLevel(t[n]),v=this.getDescription(t[n]);t[n].maturityWithBadge=t[n].maturityNLS;let D=this.createCustomTooltip(t[n]);for(var l=!1,d=(o.getGlobalVariable().existingCRIds,l=!1,s.getChildren()),c=0;c<d.length;c++){d[c].options.grid.id==t[n].id&&(l=!0)}if(!l){let o=i.createTreeNodeDataModel(r,{label:t[n].title,subLabel:f,description:v,grid:t[n],icons:[t[n].iconURL],thumbnail:t[n].thumbnail,statusbarIcons:m,statusbarIconsTooltips:C,customTooltip:D,contextualMenu:["Copy1","Move1"]});"true"==a?e.addChild(o,0):e.addChild(o)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"caSummaryNotEmpty"}),e.unselectAll();let o=new n,a=this.createCustomNameField(t[0]);t[0].co_name=a;let s=this.createCustomSeverity(t[0]);t[0].sev=s;let r=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=r;let l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;let d=this.getStatusBarIcons(t[0]),c=this.statusbarIconsTooltips(t[0]),p=this.getSubLevel(t[0]),u=this.getDescription(t[0]),g=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(o,{label:t[0].title,subLabel:p,description:u,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:g});e.getXSO().add(h),e.addChild(h,0)},createCustomNameField:function(e,t){let i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);let n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(e),e.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_TOOLTIP_NEW_ACTION});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){let t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){let i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{let t=s.getAvatarDetails(e.changeCoordinatorFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(i);let l=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),l.inject(t)}return t.outerHTML},createCustomSeverity:function(e){let t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);let o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomMaturity:function(e){let t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");let i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){let i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){let i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(a.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(a.CHG_TOOLTIP_NEW_ACTION),i},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){let t="";return t=e.name+" | "+e.ownerFullName,t},getDescription:function(e){let t="";return t=e.maturityNLS,t},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map((t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}}))},UWA.is(i,"array")&&i.forEach((function(e){var t=e.color,i=e.id;n(t,i)}))},disableColorizeView:function(){this.treeDocument.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s){return{findProposedChanges:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Search Proposed Changes"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_FIND:"+(widget?widget.id:""))},addProposedChange:function(e){var i={};s.getGlobalVariable().isNative?i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>PLM>Add Proposed Changes(Desktop App)"}:i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Add Proposed Changes"},a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_ADD:"+(widget?widget.id:""))},defineProposedChange:function(e){var i={};s.getGlobalVariable().isNative&&(i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>Define Proposed Changes(Desktop App)"}),i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Define Proposed Changes"},a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_DEFINE:"+(widget?widget.id:""))},addProposedViaAssessment:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Change Assessment"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_ADD_ASSESSMENT:"+(widget?widget.id:""))},massUpdateHandler:function(e){var i={};s.getGlobalVariable().isNative?i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>Edit Proposed Change(Desktop App)"}:i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Edit Proposed Change"},a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_EDIT:"+(widget?widget.id:""))},downloadProposedChange:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Download Proposed Change"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_Proposed_Download:"+(widget?widget.id:""))},removeProposedChange:function(e){var i={};s.getGlobalVariable().isNative?i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>Remove Proposed Change(Desktop App)"}:i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Remove Proposed Change"},a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_Proposed_Remove:"+(widget?widget.id:""))},launchCustomColumnManager:function(e){},switchViewHandler:function(e){"DGV"===e.type||"LTV"===e.type&&t.publish("ECM_GOV_ProposedDGV_OFF:"+(widget?widget.id:""))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbar",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i){let n=Object.create(null);return n.switchViewMenu={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"switchViewHandler",argument:{type:"DGV"}},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_LARGE_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-big-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"switchViewHandler",argument:{type:"LTV"}},tooltip:t.CHG_TOOLTIP_LARGE_TILE_VIEW}]},n.getProposedChangesToolbarDefinition=function(e){this.switchViewMenu.menu[0].state="selected",this.switchViewMenu.menu[1].state="unselected";let n=!1,o=i.getGlobalVariable();return n=!(!o.isNative||1!=o.Enable_TileView_Native)||widget.getPreference("tileViewPreference").value,{entries:[{id:"findProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"find",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Find,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"findProposedChanges"}}},{id:"addProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Add,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"addProposedChange"}}},{id:"defineProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"attributes-add",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Define,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"defineProposedChange"}}},{id:"changeAssessmentProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_ChangeAssessment,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"addProposedViaAssessment"}}},{id:"editProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Edit,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"massUpdateHandler"}}},{id:"downloadProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"download",fontIconFamily:1},tooltip:t.CHG_GOV_Download,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"downloadProposedChange"}}},{id:"removeProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Remove,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"removeProposedChange"}}},{id:"pc_facet_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:t.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:e.custom_view_options}}}},{id:"switch_view_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"view-list",fontIconFamily:1},tooltip:t.CHG_TOOLTIP_GRID_VIEW,value:this.switchViewMenu,visibleFlag:n},position:"far",category:"view"}]}},n})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbarHandler",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o){return{findFDRealizedChanges:function(e){t.publish("ECM_GOV_FlowdownURC_FIND:"+(widget?widget.id:""))},ChangeDetailsHandler:function(e){t.publish("ECM_GOV_FlowdownDGV_ChangeDetails:"+(widget?widget.id:""),{action:e.action})},massUpdateHandler:function(e){t.publish("ECM_GOV_FlowdownDGV_EDIT:"+(widget?widget.id:""))},expandCollapseHandler:function(e){"EXPAND"===e.action?(e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"flow-tree-expand-down"}}},tooltip:o.CHG_GOV_Expanded_All}),e.context.nodeModel.options.grid.data.menu[0].state="selected",e.context.nodeModel.options.grid.data.menu[1].state="unselected"):"COLLAPSE"===e.action&&(e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"flow-tree-expand-up"}}},tooltip:o.CHG_GOV_Collapsed_All}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="selected"),t.publish("ECM_GOV_FlowdownURC_EXPAND_COLLAPSE:"+(widget?widget.id:""),{action:e.action})}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddRelatedScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"addExistingHandler"}}},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveRelatedScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t})),define("DS/ENOChgGovernanceUX/scripts/components/decisionView/ChgDecisionView",["DS/ENXDecisionMgmt/View/Facets/DecisionTab","DS/ENXDecisionMgmt/View/RightSlideIn/DecisionPropPanelView","DS/ENXDecisionMgmt/Controller/DecisionBootstrap","DS/CoreEvents/ModelEvents","DS/UIKIT/Mask","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s,r){"use strict";return{createDecisionView:function(n){let l=n.target;null!=widget.decisionEvent&&(widget.decisionEvent.unsubscribe("decision-create-click"),widget.decisionEvent.unsubscribe("decision-preview-click"),widget.decisionEvent.unsubscribe("decision-create-close-click"),widget.decisionEvent.unsubscribe("decision-preview-close-click"));let d=r.getGlobalVariable(),c=d.tenant,p=d.get3DSpaceURL(),u=d.swymURL,g=d.getSecurityContext(),h={id:n.id,securityContext:g,tenant:c};e.init(h,l).then((function(e){i.set3DSpaceURL(p),i.setSwymUrl(u),i.setCollabSpaceTenant(g,c);let n,r,d=UWA.createElement("div",{id:"chg-Decision-container",styles:{height:"540px","min-width":"540px"}}),h=new t(d);widget.decisionEvent.subscribe("decision-create-click",(function(e){h.init(e,"decisionCreate","true")})),widget.decisionEvent.subscribe("decision-preview-click",(function(e){h.init(e,"decision"),n=new s,r=new a({titleBarVisibleFlag:!1,closeButtonFlag:!1,resizableFlag:!0,modalFlag:!0,content:d,immersiveFrame:n}),n.inject(widget.body);var t=document.querySelector(".id-card-detailed-info-section-decision");t&&(t.style.position="relative");var i=document.querySelector(".wux-windows-window-content");i&&(i.style.overflow="hidden")})),widget.decisionEvent.subscribe("decision-preview-close-click",(function(e){null!=r&&(r.visibleFlag=!1,r.destroy()),null!=n&&n.destroy()})),widget.decisionEvent.subscribe("decision-create-close-click",(function(e){null!=r&&(r.visibleFlag=!1,r.destroy()),null!=n&&n.destroy()})),o.unmask(l)}),(function(e){reject(e)}))}}})),define("DS/ENOChgGovernanceUX/scripts/view/facets/dependency/ChgDependencyfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChangeActionUX/scripts/Models/CADependencyModel","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l){"use strict";var d=t.extend({init:function(){this._parent.apply(this,arguments),this.caDependencyModel=new r,this.elements.container||(this.elements.container=e.createElement("div",{id:"dependency-mainContainer"}))},updateFacet:function(){var e=this;o.mask(this.elements.container),require(["DS/ENOChangeActionUX/scripts/Views/CADependenciesGridView"],(function(t){var i=e.getModel(),n=i.get("objectId");1!=i.isMergedModel()&&(a.publish("load-dependency"+widget.id,"pid:"+n),a.subscribe("dependency:update:View"+widget.id,(function(i){if(e.elements&&e.elements.container){if(null!=document.getElementById("co-dependency"))document.getElementById("co-dependency").destroy();var n=UWA.createElement("div",{id:"co-dependency"}),r=e.getModel();if(!r)return!1;var l=r.get("objectId"),d="pid:"+l,c={};c.id=d,c.widgetId=widget.id,c.widgetTitle=widget.title,s.getObjectTypeInformation(l).then((function(i){if("Change Action"==i)s.getChangeActionUserAccess(l).then((function(s){c.showFlowdown=s.data[0].FlowdownFrom,null!=document.getElementById("dependency-mainContainer")&&(document.getElementById("dependency-mainContainer").innerHTML=""),(r=new t(c)).container=n,r.render(i),n.inject(e.elements.container),o.unmask(e.elements.container),a.unsubscribe("dependency:update:View"+widget.id)}));else{c.showFlowdown=!1;var r=new t(c);if(null==document.getElementById("dependency-mainContainer")){var d=e.elements.container;document.body.appendChild(d)}document.getElementById("dependency-mainContainer").innerHTML="",r.container=n,r.render(i),n.inject(e.elements.container),o.unmask(e.elements.container),a.unsubscribe("dependency:update:View"+widget.id)}}))}})))}))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return d})),define("DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig",["UWA/Class","DS/TreeModel/BaseFilter"],(function(e,t){"use strict";return e.extend({init:function(){this.trigramNameFilter=t.inherit({isDataFiltered:function(e){var t=e.options.name,i=e.options.identifier,n=e.options.id;return void 0===i&&void 0!==n&&-1!==n.indexOf("uuid")&&(i=n),this.filterModel&&this.filterModel.text&&t&&i?!(-1!==t.toLowerCase().indexOf(this.filterModel.text.toLowerCase())||-1!==i.toLowerCase().indexOf(this.filterModel.text.toLowerCase())):!this.filterModel||""!==this.filterModel.text},isEmpty:function(){return void 0===this.filterModel.text}})},getTrigramNameFilter:function(){return UWA.clone(this.trigramNameFilter)}})})),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper",["DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeOwnerCmd","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess"],(function(e,t,i,n,o){return{launchTransferDialog:function(e){this.enableTransferCommand(e)},enableTransferCommand:function(t){var i={_selectedItems:[],getSelectedNodes:function(){return this._selectedItems},addSelection:function(e,t){this._selectedItems=[];var i=this;UWA.is(e,"array")?e.forEach((function(e){i._selectedItems.push(e)})):i._selectedItems.push(e)},getReference:function(e){return getID()},getParent:function(e){return e.getParent()},getType:function(e){return getType()},getName:function(e){return getLabel()},securityContext:{SecurityContext:n.getGlobalVariable().getSecurityContext(),tenant:n.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},o=[];for(let e=0;e<t.length;e++){var a=UWA.extend(t[e],{getID:function(){return null!=t[e].serviceBasedObjId?t[e].serviceBasedObjId:t[e].id},getLabel:function(){return t[e].name},getOwner:function(){return t[e].owner},getType:function(){return t[e].type},getDisplayName:function(){return t[e].name},object:{revision:"-"}});o.push(a)}i.addSelection(o),new e({context:i,ID:"ActionBar_ChangeOwner"}).begin()},launchTransferDialogForDisposition:function(e){this.enableTransferCommandForDisposition(e)},enableTransferCommandForDisposition:function(t){var i={_selectedItems:[],getSelectedNodes:function(){return this._selectedItems},addSelection:function(e,t){this._selectedItems=[];var i=this;UWA.is(e,"array")?e.forEach((function(e){i._selectedItems.push(e)})):i._selectedItems.push(e)},getReference:function(e){return getID()},getParent:function(e){return e.getParent()},getType:function(e){return getType()},getName:function(e){return getLabel()},securityContext:{SecurityContext:n.getGlobalVariable().getSecurityContext(),tenant:n.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},o=[];for(let e=0;e<t.length;e++){var a=UWA.extend(t[e],{getID:function(){return t[e][0].dispostionId,t[e][0].dispostionId},getLabel:function(){return t[e][0].name?t[e][0].name:t[e][0].dispositionName},getOwner:function(){return t[e][0].dispositionOwner},getType:function(){return"disposition"},getDisplayName:function(){return t[e][0].dispositionName},object:{revision:"-"}});o.push(a)}i.addSelection(o),new e({context:i,ID:"ActionBar_ChangeOwner"}).begin()}}})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t){let i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefination=function(t){return{entries:[{id:"cr_summary_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},i})),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationCreateChange",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s){var r={onCompleteCallback:function(e){console.log("................................");var i=t.processChangeActionInContext(e).processData;console.log(i),require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],(function(e){e.addNodesInLayout(i)}))},onFailureCallback:function(){console.log("ERROR : FAILED CREATE CA")},createNewChange:function(){e.prototype.execute(r.onCompleteCallback)},createNewChangeOrderInContext:function(e){let t=e.parentID;console.log("launchCreateChangeOrderDialog ............................");let r=n.getUserPreference(o.keys.createKeys.CO_DEF_TYPE),l={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:s.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:r,select:[],parentPIDs:[t]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Order"};require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],(function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)}));let i={};i[o.keys.createKeys.CO_DEF_TYPE]=e.result[0].type,n.saveUserPreference(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new a).CreateNew(l)},createNewChangeActionInContext:function(e){let t=n.getUserPreference(o.keys.createKeys.CA_DEF_TYPE);let r=e.parentID,l={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:s.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:t,select:[],parentPIDs:[r]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],(function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)}));let i={};i[o.keys.createKeys.CA_DEF_TYPE]=e.result[0].type,n.saveUserPreference(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new a).CreateNew(l)}};return r})),define("DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView",["UWA/Class/View","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i){"use strict";return e.extend({container:"",setup:function(){},build:function(){UWA.is(this.container)&&this.getBody().inject(this.container)},getBody:function(){var e=UWA.createElement("div",{id:"applicability-body"}),t=new(this._createView_Applicability());return t.container=e,t.model=this.model,t.render(),e},_createView_Applicability:function(){return e.extend({tagName:"div",className:"generic-detail6",render:function(){var e=this.container,i=new UWA.Element("div");i.setAttributes({id:"FacetDivForApplicabilityContext"}),i.setStyles({height:"100%"}),e.addContent(i);var n,o=model.get("objectId");n=t.getGlobalVariable().isNative?"Native":t.getGlobalVariable().is3DSpace?"3DSpace":"Dashboard",require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],(function(e){var a={mode:"Applicability",objectid:o,parent:i,environment:n};a.tenant=t.getGlobalVariable().tenant;e.create(a);"3DSpace"==n&&(enoviaServerFilterWidget.fixForSearchInOpener=!0)}))}})}})})),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesServices",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","DS/EditPropWidget/models/EditPropModel","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o){"use strict";return t.singleton({init:function(e){},getSecurityContext:function(){return{SecurityContext:o.getGlobalVariable().mySecurityContext}},getpropOptions:function(e){var t=this,i=[e.FACET_PROPERTIES];return{typeOfDisplay:e.ALL,selectionType:e.NO_SELECTION,readOnly:!1,extraNotif:!0,editMode:!1,facets:i,context:{getSecurityContext:function(){return t.getSecurityContext()}}}},getPropModel:function(e){var t=[];if(e instanceof Array)for(var a=0;a<e.length;a++){var s=new n({metatype:e[a].metatype,objectId:e[a].grid&&e[a].grid.serviceBasedObjId?e[a].grid.serviceBasedObjId:e[a].physicalId,source:o.getGlobalVariable().serviceName,tenant:o.getGlobalVariable().tenant});s.addEvent("onSave",(function(e){i.publish("CO-Properties-Update",this)})),""!=s._attributes.objectId&&t.push(s)}return t}})})),define("DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/dispositions/chgIRDispositionAffectedItemsModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s){"use strict";var r=n.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e),this.options=e,this.treeDocument=null},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",r)},resetModel:function(){this.treeDocument.empty()},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){this.treeDocument=new t({id:"ChgIRDispostionAffectedItemsTreeDoc",useAsyncPreExpand:!0})},emptyTreeDocument:function(){this.treeDocument.empty()},updateTreeDocument:function(e){this.treeDocument.prepareUpdate();for(var t=0;t<e.length;t++)this.treeDocument.addRoot(this.createTreeNode(e[t]));this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},createTreeNode:function(e){return this.getResolutionTreeNode(e)},getResolutionTreeNode:function(e){return e.maturityWithBadge=e.maturityNLS,e.serviceBasedObjId=e.id,e.collabspace=e.collabspace?e.collabspace:e.project,e.collabspaceNLS=e.collabspaceNLS?e.collabspaceNLS:e.project,new i({id:e.id,label:e.title,title:e.title,name:e.name,revision:e.revision,type:e.type,typeNLS:e.typeNLS,maturity:e.maturity,maturityNLS:e.maturityNLS,description:e.description,organization:e.organization,organizationNLS:e.organizationNLS,collabspace:e.collabspace,collabspaceNLS:e.collabspaceNLS,isLastRevision:e.isLastRevision,icons:[e.icon],thumbnail:e.previewIcon,change:e.change,change_details:e.change_details,subLabel:e.type+" | "+e.revision+" | "+e.name,grid:e,useAsyncPreExpand:!0,serviceBasedObjId:e.id})},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgSlideinForm",["UWA/Class/Promise","UWA/Class/View","UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgRouter5/scripts/ChgRouter","DS/UIKIT/Input/Button","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s){"use strict";return t.extend({slideinProposedContainer:void 0,slideinPropertiesContainer:void 0,triptychMain:void 0,form:void 0,setup:function(e){var t=this,n=o.getDependency("xChangeApp");o.getDependency("applicationChannel").subscribe({event:"triptych-panel-hidden"},(function(e){"right"===e&&t.hideSlideIn()}));for(var a=n.infoPanel.childNodes,s=0;s<a.length;s++){var r=a[s].className;i.is(r)&&"secondmainContainer-sidepanel"===r.trim()?this.slideinProposedContainer=a[s]:i.is(r)&&"EditProp_MasterContain editProp_all"===r.trim()&&(this.slideinPropertiesContainer=a[s])}this.triptychMain=i.extendElement(document.body).getElement(".triptych-main")},buildSlideIn:function(e){this.form=e},showSlideIn:function(){this.slideinProposedContainer.style.display="block",this.slideinPropertiesContainer.style.display="none",this.triptychMain.style.opacity=".5",this.triptychMain.style.pointerEvents="none",o.getDependency("applicationChannel").publish({event:"triptych-show-panel",data:"right"})},hideSlideIn:function(){this.triptychMain.style.opacity="1",this.triptychMain.style.pointerEvents="inherit"},buildSlideIn:function(e){if(i.is(this.slideinProposedContainer)){this.slideinProposedContainer.empty(),this.form=e,e.slideInReference=this;var t=i.createElement("div",{id:"chgSlideinForm",class:"chgSlideinForm"});this.getHeader().inject(t),this.getBody().inject(t),this.getFooter().inject(t),t.inject(this.slideinProposedContainer)}},getHeader:function(){var e=this.form.getHeading();return i.createElement("div",{id:"chgSlideinHeader",class:"chgSlideinHeader",html:e})},getBody:function(){var e=i.createElement("div",{id:"chgSlideinBody",class:"chgSlideinBody"});return this.form.getBody().inject(e),e},getFooter:function(){var e=this,t=this.form.getFooter();return new a({value:s.CHG_GOV_Button_Cancel,className:"default"}).inject(t).addEvent("onClick",(function(){e.cancelHandler()})),i.createElement("div",{id:"chgSlideinFooter",class:"chgSlideinFooter",html:t})},cancelHandler:function(){o.getDependency("applicationChannel").publish({event:"triptych-hide-panel",data:"right"})}})})),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderMenuSubscriber",["DS/ENOChgServices/scripts/components/ChgCommonDailog","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/SuperModal","DS/ENOChgServices/scripts/services/ChgNativeInitService","require"],(function(e,t,i,n,o,a,s,r,l,d){return{init:function(e){this._modelForIdCard=e,this._subscribeToModelEvents()},_subscribeToModelEvents:function(){var n=this;n.modelEvents=n._modelForIdCard.get("modelEvents"),n.modelEvents.subscribe({event:"chg-idcard-dropdown-menu-action"},(function(o){if(console.log("in model event subscribe: chg-idcard-dropdown-menu-action"),o.id){var a={};switch(o.id){case"chgHold":a={chgPhysicalId:n._modelForIdCard.id,chgType:n._modelForIdCard.get("isKindOfType"),btnId:o.id,boxTitle:o.text,subTitle:t.CHG_CO_Hold_SubTitle,txtPlaceHolder:t.CHG_CO_Hold_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgResume":a={chgPhysicalId:n._modelForIdCard.id,chgType:n._modelForIdCard.get("isKindOfType"),btnId:o.id,boxTitle:o.text,subTitle:t.CHG_CO_Resume_SubTitle,txtPlaceHolder:t.CHG_CO_Resume_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgCancel":a={chgPhysicalId:n._modelForIdCard.id,chgType:n._modelForIdCard.get("isKindOfType"),btnId:o.id,boxTitle:o.text,subTitle:t.CHG_CO_Cancel_SubTitle,txtPlaceHolder:t.CHG_CO_Cancel_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgDuplicateCA":let e={btnId:o.id,chgPhysicalId:n._modelForIdCard.id};DoneCallback(e);break;case"chgDuplicateCR":let s={btnId:o.id,chgPhysicalId:n._modelForIdCard.id,chgType:n._modelForIdCard._attributes.type,chgPolicy:n._modelForIdCard._attributes.policy,chgTitle:n._modelForIdCard._attributes.title};DoneCallback(s);break;case"chgCAWorkUnder":let r={btnId:o.id,chgPhysicalId:n._modelForIdCard.id};DoneCallback(r);break;case"chgBOMSync":let l={btnId:o.id,chgPhysicalId:n._modelForIdCard.id};DoneCallback(l);break;case"chgRequestClarification":case"chgProvideClarification":i.warn("Implementation Pending","false")}"chgCAWorkUnder"!=o.id&&"chgBOMSync"!=o.id&&"chgDuplicateCA"!=o.id&&"chgDuplicateCR"!=o.id&&"chgRequestClarification"!=o.id&&"chgProvideClarification"!=o.id&&e.launchInfoDailog(a)}})),DoneCallback=function(n){var a=n.btnId,c=n.chgType;if(a){switch(a){case"chgHold":"ChangeOrder"==c?o.handleContextMenuClickHold(n).then((function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))})):"ChangeRequest"==c?o.handleContextMenuClickHoldForCR(n).then((function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))})):"ChangeAction"==c&&o.handleContextMenuClickHoldForCA(n).then((function(e){l.takeOffFromWorkUnder(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))}));break;case"chgResume":"ChangeOrder"==c?o.handleContextMenuClickResume(n).then((function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))})):"ChangeRequest"==c?o.handleContextMenuClickResumeForCR(n).then((function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))})):"ChangeAction"==c&&o.handleContextMenuClickResumeForCA(n).then((function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))}));break;case"chgCancel":"ChangeOrder"==c?o.handleContextMenuClickCancel(n).then((function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))})):"ChangeRequest"==c?o.handleContextMenuClickCancelForCR(n).then((function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))})):"ChangeAction"==c?o.handleContextMenuClickCancelForCA(n).then((function(e){l.takeOffFromWorkUnder(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))})):"InvestigationRequest"==c&&i.warn("Implementation Pending","false");break;case"chgCAWorkUnder":console.log("Work under menu clicked...!"),o.handleContextMenuClickWorkUnder(n).then((function(e){s.publish("change-action-work-under",e)}));break;case"chgBOMSync":o.handleContextMenuClickBOMSyncForCA(n).then((function(e){var i,n=new r({closable:!0,renderTo:widget.body}),o="";e&&"true"===e.OPERATION_STATUS?o=t.ECM_CA_EBOMSync_Successful:e&&"false"===e.OPERATION_STATUS&&(o=t.ECM_CA_EBOMSync_Failure),i="<p>\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--h6></h6--\x3e\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>"+o+"</li>\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t\t</p>",n.dialog({body:i,title:t.ECM_CA_Action_EBOMSync_CollabStatus,buttons:[{className:"primary",value:t.ECM_CA_Collab_Dialog_Done,action:function(e){e.hide()}}]})}));break;case"chgDuplicateCA":var p={commandInfo:{type:"Change Action",facet:"IDCardHeader",action:"CA>IDCardHeader>Duplicate CA"}};d("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:p}),o.duplicateChangeActionCA(n.chgPhysicalId).then((function(e){i.success(t.CHG_GOV_Change_Action_Duplicate_Message+e.data[1].id)}));break;case"chgDuplicateCR":p={commandInfo:{type:"Change Request",facet:"IDCardHeader",action:"CR>IDCardHeader>Duplicate CR"}};d("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:p});let e=[],a={id:n.chgPhysicalId,type:n.chgType,policy:n.chgPolicy,title:n.chgTitle};e.push(a),o.duplicateChangeRequestCR(e).then((function(e){if(e.data[0]["warn report"]){const a=e.data[0]["warn report"];for(var n="",o=0;o<a.length;o++)n=n+a[o].message+"<br/>";i.warn(t.CHG_GOV_Change_Request_Duplicate_Message+e.data[0].name+"<br/>"+t.CHG_GOV_Error_Duplicate_Message+"<br/>"+n)}else i.success(t.CHG_GOV_Change_Request_Duplicate_Message+e.data[0].name)}));break;case"chgRequestClarification":case"chgProvideClarification":break;default:console.log("Match not found")}"chgBOMSync"!=a&&"chgDuplicateCA"!=a&&e.closeDialog()}},CancelCallback=function(t){e.closeDialog(t)}}}})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","require","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService"],(function(e,t,i,n,o,a,s,r,l){"use strict";return{getChangeImpactsContextualMenu:function(e,t){return new Promise((function(i,s){let d=a("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),c=t.cellInfos.columnID,p=t.cellInfos.nodeModel.options.grid.impactType;if(10===c&&"Resolution Item"===p){const a=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().map((e=>e.options.grid.proposedID));let s={objectId:t.cellInfos.nodeModel.options.grid.proposedID,objectType:t.cellInfos.nodeModel.options.grid.proposedType,displayName:t.cellInfos.nodeModel.options.grid.proposedName,displayType:t.cellInfos.nodeModel.options.grid.proposedType},l=[];var u=r.getGlobalVariable();(h={}).objectID=t.cellInfos.nodeModel.options.grid.proposedID;const c={};c.selectedNodeIDs=a;var g=[];const p=o.openWith(s);g.push(p),Promise.all(g).then((t=>{t[0]&&l.push(t[0]),u.isNative&&(l.push(o.getExploreMenu(e,h)),l.push(o.getExploreWithMenu(e,h)),l.push(o.getOpenMenu(e,h)),l.push(o.getOpenAdvMenu(e,h)),l.push(o.getOpenROMenu(e,h))),l.push(n.createPropertyPushItem(a)),l.push(d.getRelationalExplorerMenu(c)),i(l)}))}else{let a=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const s=a.map((e=>e.options.grid.id));let c={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.ChgGovDG_name,displayType:t.cellInfos.nodeModel.options.grid.type},p=[];var h;u=r.getGlobalVariable();(h={}).objectID=t.cellInfos.nodeModel.options.grid.id;g=[];const m=o.openWith(c);o.getOpenMenu(e,t);g.push(m);const C={};C.selectedNodeIDs=s,Promise.all(g).then((t=>{t[0]&&p.push(t[0]),u.isNative&&"Change Action"==c.displayType&&p.push(o.getOpenCAMenu(e,h)),p.push(n.createPropertyPushItem(s)),p.push(d.getRelationalExplorerMenu(C)),p.push(l.getCopyLink(a)),i(p)}))}}))}}})),define("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e){var t=Object.create(null);return t.toolbar=null,t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCO,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"filterView",argument:{filter:"activeCO"}},tooltip:e.CHG_Filter_ActiveCO_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCO,action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"filterView",argument:{filter:"inactiveCO"}},tooltip:e.CHG_Filter_InactiveCO_Def}]},t.writetoolbarDefination=function(t){return{entries:[{id:"co_summary_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t){return{getMenuInstance:function(e){let i=Object.create(null);return i.moveMenu={menu:[{type:"CheckItem",title:t.CHG_GOV_Realized_Move_New,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"moveMenuHandler",argument:{mode:"New"}},tooltip:t.CHG_GOV_Realized_Move_New},{type:"CheckItem",title:t.CHG_GOV_Realized_Move_Existing,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-insert"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"moveMenuHandler",argument:{mode:"Existing"}},tooltip:t.CHG_GOV_Realized_Move_Existing}]},i.filterMenu={menu:[{type:"CheckItem",title:t.CHG_GOV_Realized_Tracked_SF,state:"TRACKED"===e.filter?"selected":"",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-change-action-realized"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"filterViewHandler",argument:{filter:"TRACKED"}},tooltip:t.CHG_GOV_Realized_Tracked},{type:"CheckItem",title:t.CHG_GOV_Realized_Moved_SF,state:"MOVED"===e.filter?"selected":"",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-move-to"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"filterViewHandler",argument:{filter:"MOVED"}},tooltip:t.CHG_GOV_Realized_Moved},{type:"CheckItem",title:t.CHG_GOV_Realized_Ignored_SF,state:"IGNORED"===e.filter?"selected":"",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-ignore"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"filterViewHandler",argument:{filter:"IGNORED"}},tooltip:t.CHG_GOV_Realized_Ignored},{type:"CheckItem",title:t.CHG_GOV_Realized_Grouped_SF,state:"GROUPED"===e.filter?"selected":"",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-select-all-checkboxes"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"filterViewHandler",argument:{filter:"GROUPED"}},tooltip:t.CHG_GOV_Realized_Grouped}]},i.expandCollapseMenu={menu:[{type:"CheckItem",title:t.CHG_GOV_Expand_All,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-flow-tree-expand-down"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"expandCollapseHandler",argument:{action:"EXPAND"}},tooltip:t.CHG_GOV_Expand_All},{type:"CheckItem",title:t.CHG_GOV_Collapse_All,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-flow-tree-expand-up"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"expandCollapseHandler",argument:{action:"COLLAPSE"}},tooltip:t.CHG_GOV_Collapse_All}]},i.switchViewMenu={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"switchViewHandler",argument:{type:"DGV"}},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_LARGE_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-big-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"switchViewHandler",argument:{type:"LTLV"}},tooltip:t.CHG_TOOLTIP_LARGE_TILE_VIEW}]},i}}})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgErrors","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u){"use strict";var g=d.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),h=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"crImpactAnalysis",useAsyncPreExpand:!0});return e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",g)},loadImpactAnalysisData:async function(e,t){e.prepareUpdate();var n=await this.createTreeDocumentNodeModel(t);e.addRoot(n),n.length>1&&"true"==o.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&"Cancelled"!=n[0].options.grid.maturity&&(o.getGlobalVariable().total_ia_row=new i({label:a.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:a.CHG_GOV_IA_LastColumn_label}}),e.addRoot(o.getGlobalVariable().total_ia_row)),e.pushUpdate()},createTreeDocumentNodeModel:async function(e){var t=[];let i=[];"true"==o.getGlobalVariable().ECMEnableChangeAnalysisActivity_InWork&&await p.getColumnApprovalStatusValue(l.createPayloadApprovalStatusValue(e)).then((function(e){e&&i.push(e)}));for(var n=0;n<e.length;n++){var a=this.createTreeNode(e[n],i);t.push(a)}return t},createTreeNode:function(e,t){let n=this.createCustomOwnerField(e);e.chgObjOwner=n,t&&e&&t[0]&&t[0][e.id]&&(e.ApprovalStatus=t[0][e.id].approvalStatus,e.approvalStatusModel=t[0][e.id].approvalStatusModel);var a=this.createCustomNameField(e);e.ia_name=a;var s,r=e.name+" | "+e.ownerFullName,l=e.maturityNLS,d=this.getStatusBarIcons(e),c=this.statusbarIconsTooltips(e);s=o.getGlobalVariable().is3DSpace?UWA.String.escapeHTML(e.title):e.title,e.refinement=this.createCustomRefinementField(e.refinement);var p=this.getCustomTooltip(e);return new i({label:s,subLabel:r,description:l,grid:e,icons:[e.icon],thumbnail:e.thumbnail,contextualMenu:["dummy placeholder"],customTooltip:p,statusbarIcons:d,statusbarIconsTooltips:c,useAsyncPreExpand:!0})},getStatusBarIcons:function(e){var t=[];return"Cancelled"==e.maturity&&t.push("block"),t},statusbarIconsTooltips:function(e){var t=[];return"Cancelled"==e.maturity&&t.push(e.cancelComment),t},createCustomNameField:function(e){var t=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(t);var i=new UWA.Element("div",{class:"iconsDiv"});if("Cancelled"==e.maturity){var n=new UWA.Element("div",{class:"gridIconContainer",title:e.cancelComment});UWA.createElement("div",{class:"fonticon fonticon-block"}).inject(n),n.inject(i)}if(e.Dispatch_From_ParentCR&&e.Dispatch_From_ParentCR.length>0&&e.Dispatch_To&&e.Dispatch_To.length>0){var o=UWA.createElement("div",{class:"fonticon fonticon-graph-egraph",styles:{color:"grey"}}),a=UWA.createElement("div",{class:"fonticon fonticon-up",styles:{color:"grey"}}),s=UWA.createElement("div",{class:"fonticon fonticon-down",styles:{color:"grey",marginLeft:"-5px"}});o.inject(i),a.inject(i),s.inject(i)}else if(e.Dispatch_From_ParentCR&&e.Dispatch_From_ParentCR.length>0){o=UWA.createElement("div",{class:"fonticon fonticon-graph-egraph",styles:{color:"grey"}}),a=UWA.createElement("div",{class:"fonticon fonticon-up",styles:{color:"grey"}});o.inject(i),a.inject(i)}else if(e.Dispatch_To&&e.Dispatch_To.length>0){o=UWA.createElement("div",{class:"fonticon fonticon-graph-egraph",styles:{color:"grey"}}),s=UWA.createElement("div",{class:"fonticon fonticon-down",styles:{color:"grey"}});o.inject(i),s.inject(i)}return i.inject(t),t.outerHTML},createCustomRefinementField:function(e){var t=new UWA.Element("div",{class:"cr-ia-refinement-val"});return(e=UWA.createElement("a",{html:e})).inject(t),t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var l=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(a);var d=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),d.inject(n),n.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},removeNodeInModelFromId:function(e){this.treeDocument.prepareUpdate();for(var t=this.treeDocument.getAllDescendants(),i=0;i<t.length;i++)t[i].options.grid.id===e&&t[i].remove();this.treeDocument.pushUpdate()},addNodeInModelFromId:function(e){const t=this;let n=!1;0==this.treeDocument.getChildren().length&&this.treeDocument._modelEvents.publish({event:"treeNotEmpty"});const s=this.contextDetails.id;r.getImpactAnalysisFromId(e).then((e=>{let r=l.processCRImpactAnalysis(e,s);var d=h.prototype.createTreeDocumentNodeModel(r);if(t.treeDocument.prepareUpdate(),0==t.treeDocument.getRoots().length)t.treeDocument.addRoot(d);else for(var p=d.length-1;p>=0;p--)t.treeDocument.addRoot(d[p],0);t.treeDocument.pushUpdate();for(let e of t.treeDocument.getAllDescendants())if("ia_Total"===e.options.grid.id){n=!0;break}!1===n&&"true"==o.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&"Cancelled"!=d[0].options.grid.maturity&&t.treeDocument.addRoot(new i({label:a.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:a.CHG_GOV_IA_LastColumn_label}})),c.warn(a.CHG_CUSTOM_COLUMN_WARN_IA,!0)}))},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map((i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}}))},UWA.is(n,"array")&&n.forEach((function(e){var t=e.color,i=e.id;o(t,i)}))},disableColorizeView:function(e,t){t.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return h})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemReportViewToolbar",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t){let i=Object.create(null);return i.viewData={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeImpactView",argument:{view:"GridView"}},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeImpactView",argument:{view:"TileView"}},tooltip:t.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(e){let t={entries:[{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]};return JSON.stringify(t)},i})),define("DS/ENOChgGovernanceUX/scripts/model/facets/relatedScope/ChgRelatedScopeDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";let h=g.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadRelatedScopeData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.previewicon,o=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName,a=e.currentNLS||e.maturityNLS?e.currentNLS||e.maturityNLS:"";e.maturityWithBadge=e.maturityNLS||e.currentNLS;var s=this.getCustomTooltip(e);return new i({label:e.title,subLabel:o,description:a,grid:e,customTooltip:s,icons:[e.icon],thumbnail:n,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.maturityNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.parentCRId;var s=!0;let g=document.getElementById("outer-CO-relatedScope-grid-div");"undefined"!=g&&null!=g&&u.mask(g),r.updateExistingCORelatedScope(o,e).then((async function(e){var i={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(i=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var n=await l.processedChangeRequestRelatedScope(e);if(m.prototype.addNodesInLayoutModel(t.treeDocument,n),"undefined"!=g&&null!=g&&u.unmask(g),i&&i.length>0){s=!1;var r=new Map,h=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=h<50?i.slice(e,e+h):i.slice(e,e+50);for(var C=[],f=new Map,v=n,D=0;D<v.length;D++){var I=v[D];C.push(I.id),f.set(I.id,I)}var w=[];if(C.length>0){var _=l.commonPredicatedForFedSearch(),b=await l.callFederatedSearch(C,_);if(b&&b.results&&b.results.length>0)w=await l.processReportedAgainstFederatedSearch(b,f)}m.prototype.addNodesInLayoutModel(t.treeDocument,w),r=new Map([...r,...f]),h-=50}if(r&&r.size>0){p.publish("updateIndexingIconForHideOrShowInCOReportedAgainst",{});var S=await c.recent();if(S&&S.results&&S.results.length>0){var y=l.filterNonIndexedDataNew(S,r);r.size!=y.length&&d.warn(a.CHG_GOV_Not_Accessable_Data);var E=[];y.length>0&&(E=await l.processInformationForRecentReportedAgainst(y)),m.prototype.addNodesInLayoutModel(t.treeDocument,E)}var O=e.data.length,G={contextid:o,length:E.length+O};p.publish("relatedScope:update",G)}}if(t.treeDocument&&t.treeDocument.getAllDescendants()&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),s){G={contextid:o,length:e.data.length};p.publish("relatedScope:update",G)}}),(function(e){u.unmask(g),n(e)}))}))},removeExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.parentCRId,s=document.getElementById("outer-CO-relatedScope-grid-div");"undefined"!=s&&null!=s&&u.mask(s),r.removeExistingCORelatedScope(o,e).then((function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var r={contextid:o,length:t.treeDocument.getAllDescendants().length};p.publish("relatedScope:update",r)}d.success(a.CHG_GOV_relatedScope_Remove_Success),u.unmask(s)}),(function(e){u.unmask(s),n()}))}))},addNodesInLayoutModel:function(e,t){let i=m.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map((i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}}))},UWA.is(n,"array")&&n.forEach((function(e){var t=e.color,i=e.id;o(t,i)}))},disableColorizeView:function(e,t){t.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return m})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCFilterModel",["UWA/Core"],(function(e){"use strict";return{getFilterModel:function(){return{tree:{filterId:"stringRegexp",filterModel:""},title_instance:{filterId:"stringRegexp",filterModel:""},typeNLS:{filterId:"set",filterModel:[]},name:{filterId:"stringRegexp",filterModel:""},revision:{filterId:"set",filterModel:[]},maturityWithBadge:{filterId:"set",filterModel:[]},reasonForChange:{filterId:"stringRegexp",filterModel:""},change:{filterId:"set",filterModel:[]},change_details:{filterId:"stringRegexp",filterModel:""}}}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridReportViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeCRView",argument:{view:"GridView"}},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeCRView",argument:{view:"TileView"}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(e){return{entries:[{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t})),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete",["UWA/Core","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/UIKIT/Mask","require"],(function(e,t,i,n,o,a,s){"use strict";return{deleteNodes:function(s,r,l,d,c){for(var p=n.CHG_GOV_Delete_Info_Content+"<br><br>",u=[],g=0;g<s.length;g++){var h=s[g];p+=e.String.escapeHTML(h.nodeTitle)+" ("+h.nodeName+")<br>";var m={physicalid:h.physicalid};u.push(m)}var C=function(e){if(e.report&&e.report.length>0){for(var t=[],o="",s=0;s<e.report.length;s++){t.push(e.report[s].physicalids);var c=e.report;o+=c[s].displaytype+" "+c[s].name+": "+c[s].error+"<br>"}i.error(n.CHG_GOV_Operation_Partially_Failed+"<br>"+o)}if(e.data&&e.data.length>0){var p=[];for(s=0;s<e.data.length;s++)p.push(e.data[s].id);l(p,d),e.report&&0==e.report.length&&i.success(n.CHG_GOV_ChangeOrchestration_Toolbar_Delete_Success)}else if(e.results&&e.results.length>0){for(p=[],s=0;s<e.results.length;s++)p.push(e.results[s].physicalid);l(p,d),e.report&&0==e.report.length&&i.success(n.CHG_GOV_ChangeOrchestration_Toolbar_Delete_Success)}else i.warn(n.CHG_GOV_ChangeOrchestration_Toolbar_Delete_Failure);"undefined"!=r&&null!=r&&a.unmask(r)},f=[{label:n.CHG_GOV_OK_Button_Label,handler:function(){"undefined"!=r&&null!=r&&a.mask(r),"ImpactAnalysis"===c?t.deleteImpactAnalysis(s[0].parentCRId,u).then((function(e){C(e)}),(function(e){return a.unmask(r),Promise.reject(e)})):t.deleteObjectStructure(u).then((function(e){C(e)}),(function(e){return a.unmask(r),Promise.reject(e)})),o.closeDialog()},className:"primary"},{label:n.CHG_GOV_CANCEL_Button_Label,handler:function(){o.closeDialog()},className:"default"}],v={title:n.CHG_GOV_Delete_Info_Title,content:p,buttonArray:f};o.launchInfoDailog(v)}}})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/contributors/ChgCRContributorsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";let c=e.extend({init:function(e,t){this.parentCRId=e,this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadContributor:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t="";e.icon,e.roleList;"Person"==e.type?(t=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):"Group"==e.type||"Group Proxy"==e.type?(t=this.getUserGroupImageDiv(e,!0)).addClassName("chg-member-profile-picture"):t=e.thumbnail;let n=new i({label:e.personFullName,description:d.CHG_Add_Member_Assignee,grid:e,icons:[e.icon],thumbnail:t});return"Group"!=e.type&&"Group Proxy"!=e.type||(n.options.label=e.title),n},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.name+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=a.getAvatarDetails(e.personFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(s);let l=UWA.createElement("span",{class:"userName",html:e.personFullName});return s.inject(n),l.inject(n),n.outerHTML},getPersonImageDiv:function(e,t){null==e.name&&(e.name=e.userid);var i="/api/user/getpicture/login/"+e.name+"/format/normal";i=o.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),s="";if(o.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{var r=a.getAvatarDetails(e.personFullName);s=UWA.createElement("div",{html:r.avatarStr}),1==t?(s.addClassName("chg-member-profile-picture"),s.addClassName("chg-team-profile-text")):s.addClassName("avatarIcon"),s.style.setProperty("background",r.avatarColor)}return s.inject(n),n},getUserGroupImageDiv:function(e,t){var i=new UWA.Element("div",{}),n="";return n=UWA.createElement("img",{class:"userIcon",src:e.icon}),1==t?(n.addClassName("chg-member-profile-picture"),n.addClassName("chg-team-profile-text")):n.addClassName("avatarIcon"),n.inject(i),i},addExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.impactAnalysisId,a=t.parentCRId,l=document.getElementById("outer-contributor-grid-div");"undefined"!=l&&null!=l&&r.mask(l),s.updateExistingContributors(a,o,e).then((function(e){let n=[];e&&(n=e.data),c.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e),r.unmask(l)}),(function(e){r.unmask(l),n(e)}))}))},addNodesInLayoutModel:function(e,t){let i=c.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate(),e.getRoots().length>0&&e._modelEvents.publish({event:"treeNotEmpty"})},removeExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.impactAnalysisId,a=t.parentCRId,c=document.getElementById("outer-contributor-grid-div");"undefined"!=c&&null!=c&&r.mask(c),s.updateExistingContributors(a,o,e).then((function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);0==t.treeDocument.getRoots().length&&t.treeDocument._modelEvents.publish({event:"treeEmpty"}),l.success(d.CHG_Contributors_Toolbar_RemoveContributor_suceess),r.unmask(c)}),(function(e){r.unmask(c),n()}))}))}});return c})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCreateChangeAction",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require"],(function(e,t,i,n,o,a,s){return{launchCreateChangeActionDialog:function(r){console.log("launchCreateChangeActionDialog ............................");let l=i.getUserPreference(n.keys.createKeys.CA_DEF_TYPE),d={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:l,select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){r&&(r.isClickProcessing=!1);var t=document.getElementsByClassName("moduleWrapper")[0];null==t&&"undefined"==t||a.mask(t);let o=e.result[0].identifier,l={};l.context=o,l.type="ChangeAction";let d=s("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),c=s("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil");d.launchPropertyPanelContext(l),c.displayObjectInfoInsideIDcard(o,!0);let p={};p[n.keys.createKeys.CA_DEF_TYPE]=e.result[0].type,i.saveUserPreference(p)},onFailure:function(e){r&&(r.isClickProcessing=!1),console.log("onFailure..............."+e)},onCancel:function(e){r&&(r.isClickProcessing=!1)}}};var c={commandInfo:{type:"Change Action",facet:"Start a New Activity",action:"CA>Start a New Activity>New Change Action"}};s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:c}),(new e).CreateNew(d)}}})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";let h=d.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e,t){this.parentCRId=e,this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"crImpactBasis",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadImpactBasisData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName;var a=e.maturityNLS||e.currentNLS?e.maturityNLS||e.currentNLS:"";e.maturityWithBadge=e.maturityNLS||e.currentNLS?e.maturityNLS||e.currentNLS:"";var s,r=this.getCustomTooltip(e);return s=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:s,subLabel:n,description:a,grid:e,icons:[e.icon],thumbnail:e.previewicon,contextualMenu:["dummy placeholder"],useAsyncPreExpand:!0,customTooltip:r})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.currentNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.impactAnalysisId,s=t.parentCRId;let d=document.getElementById("outer-impactBasis-grid-div");"undefined"!=d&&null!=d&&g.mask(d),r.updateExistingImpactBasis(s,o,e).then((async function(e){var n=void 0,o={},s={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(o=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(s=e.data[0].mapping),e.data.splice(0,1));var r=await p.processIAAnalysisBasis(e);if(t.treeDocument&&t.treeDocument.getAllDescendants()&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),m.prototype.addNodesInLayoutModel(t.treeDocument,r),"undefined"!=d&&null!=d&&g.unmask(d),s.length>0&&(n=await m.prototype.i3dxInformationFilteringAndCalling(o,s,t.treeDocument)),o&&o.length>0){var h=new Map,C=o.length;for(let i=0;i<o.length;i+=50){let n=[];n=C<50?o.slice(i,i+C):o.slice(i,i+50);for(var f=[],v=new Map,D=n,I=0;I<D.length;I++){var w=D[I];f.push(w.id),v.set(w.id,w)}var _=[];if(f.length>0){var b=p.commonPredicatedForFedSearch(),S=await p.callFederatedSearch(f,b);S&&S.results&&S.results.length>0&&(_=await p.processIAAnalysisBasisFederatedSearch(S,v))}m.prototype.addNodesInLayoutModel(t.treeDocument,_),h=new Map([...h,...v]),C-=50,e.data=[...e.data,..._]}if(h&&h.size>0){u.publish("updateIndexingIconForHideOrShowInImpactBasis",{});var y=await c.recent();if(y&&y.results&&y.results.length>0){var E=p.filterNonIndexedDataNew(y,h);h.size!=E.length&&l.warn(a.CHG_GOV_Not_Accessable_Data);var O=await p.processInformationForRecentIAImpactBasis(E);let i=[];O&&(i=O);let n=[];for(let e of i)e.reasonForChange="",n.push(e);t.treeDocument&&t.treeDocument.getAllDescendants()&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),t.addNodesInLayoutModel(t.treeDocument,n),e.data=[...e.data,...n]}}}n&&n.length>0&&(e.data=[...e.data,...n]),i(e),"undefined"!=d&&null!=d&&g.unmask(d)}),(function(e){g.unmask(d),n(e)}))}))},removeExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.impactAnalysisId,s=t.parentCRId,d=document.getElementById("outer-impactBasis-grid-div");"undefined"!=d&&null!=d&&g.mask(d),r.updateExistingImpactBasis(s,o,e).then((function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);l.success(a.CHG_GOV_ImpactBasis_Remove_Success),g.unmask(d)}),(function(e){g.unmask(d),n()}))}))},addNodesInLayoutModel:function(e,t){let i=m.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},i3dxInformationFilteringAndCalling:async function(e,t,i){var n=i;let a=t.length;var s=o.getGlobalVariable().tenant,r=[],l=o.getGlobalVariable().tenantMappings.find((e=>e.platformId===s));for(let i=0;i<a;i++){let o=t[i],a=o.uris,s=a.length,C=o.ServiceInfo,f=o.RelativePath,v=l[C];if(null==v||null==f)continue;let D=v+f;for(let t=0;t<a.length;t+=50){var d=[],u=new Map;let i=[];i=s<50?a.slice(t,t+s):a.slice(t,t+50);for(let t=0;t<i.length;t++){const n=i[t],o=e.findIndex((e=>e.id===n));if(-1!==o){const t=e.splice(o,1)[0];d.push(t),u.set(t.id,t)}}try{var g=await c.fetchbyService({ids:i,url:D});console.log("Result of is "+g);var h=await p.processIAAnalysisBasisWithi3dxItems(g,u);console.log("Node information with NLS value"+h),await m.prototype.addNodesInLayoutModel(n,h),r=r.concat(h)}catch(e){console.log(e)}console.log("The sliced array is "+i),s-=50}console.log("The modeler information is "+d),console.log("The modeler information is "+u)}return r},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map((i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}}))},UWA.is(n,"array")&&n.forEach((function(e){var t=e.color,i=e.id;o(t,i)}))},disableColorizeView:function(e,t){t.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return m})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgCreateInvestigationRequest",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require"],(function(e,t,i,n,o,a,s){return{launchCreateInvestigationRequestDialog:function(r){console.log("launchCreateInvestigationRequestDialog ............................");let l={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_GOV_Welcome_Activity_New_Investigation_Request,type:"Investigation Request",silentMode:!1,overlay:!0,options:{typeName:"Investigation Request",preferedType:"Investigation Request",select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){r&&(r.isClickProcessing=!1);var t=document.getElementsByClassName("moduleWrapper")[0];null==t&&"undefined"==t||a.mask(t);let o=e.result[0].identifier,l={};l.context=o,l.type="InvestigationRequest";let d=s("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),c=s("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil");d.launchPropertyPanelContext(l),c.displayObjectInfoInsideIDcard(o,!0);let p={};p[n.keys.createKeys.IR_DEF_TYPE]=e.result[0].type,i.saveUserPreference(p)},onFailure:function(e){console.log("onFailure..............."+e),r&&(r.isClickProcessing=!1)},onCancel:function(e){r&&(r.isClickProcessing=!1)}}};var d={commandInfo:{type:"Investigation Request",facet:"Start a New Activity",action:"IR>Start a New Activity>New Investigation Request"}};s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:d}),(new e).CreateNew(l)}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t){let i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCR,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"filterView",argument:{filter:"activeCR"}},tooltip:e.CHG_Filter_ActiveCR_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCR,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"filterView",argument:{filter:"inactiveCR"}},tooltip:e.CHG_Filter_InactiveCR_Def}]},i.writetoolbarDefination=function(t){return{entries:[{id:"duplicateCR",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",fontIconFamily:WUXManagedFontIcons.Font3DS},position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"duplicateChangeRequest"},tooltip:e.CHG_GOV_Change_Request_Duplicate,disabled:!0}},{id:"cr_summary_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},i})),define("DS/ENOChgGovernanceUX/scripts/view/facets/decision/ChgDecisionfacet",["UWA/Core","DS/ENOChgGovernanceUX/scripts/components/decisionView/ChgDecisionView","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r){"use strict";var l=i.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"DecisionContainer",class:"decisions-facet-container chg-decisions-facet-container"}))},updateFacet:function(){var e=this;a.mask(this.elements.container);var i=e.getModel();if(!i||""==i.get("objectId"))return a.unmask(this.elements.container),!1;e.elements.container.setContent("");var n={id:i.get("objectId"),target:e.elements.container};t.createDecisionView(n)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return l})),define("DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate",["DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i){"use strict";return{handlePropertiesOnUpdate:function(n,o){var a=n.getAllDescendants();if(a)for(var s=o.objectId,r=0;r<a.length;r++){if(a[r].options.grid.id==s){if(o&&o["PLMEntity.V_Name"]?a[r].options.grid.title=o["PLMEntity.V_Name"].value:o&&o.Synopsis?a[r].options.grid.title=o.Synopsis.value:o&&!o.Title?a[r].options.grid.title=o.label:o&&o.Title&&(a[r].options.grid.title=o.Title.value),o&&o.owner&&(a[r].options.grid.owner=o.owner.valueDB,a[r].options.grid.ownerFullName=o.owner.value.split("\n")[0]),o&&o.Severity&&(a[r].options.grid.severity=o.Severity.value,a[r].options.grid.severityNLS=o.Severity.valueDB),t.getGlobalVariable().is3DSpace)var l='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+s+"\"'>"+a[r].options.grid.title+"</a>";else l=a[r].options.grid.title;var d=o.name?o.name.value:"";a[r].options.grid.description=o.description?o.description.value:"";var c=a[r].options.grid.ecm_change_on_hold,p=d+" | "+a[r].options.grid.ownerFullName,u={};u.name=d,u.title=a[r].options.grid.title,u.ecm_change_on_hold=c,u.severity=a[r].options.grid.severity,u.severityNLS=a[r].options.grid.severityNLS,u.owner=a[r].options.grid.owner,u.ownerFullName=a[r].options.grid.ownerFullName,u.maturityNLS=a[r].options.grid.maturityNLS,a[r].options.grid.sev=e.createCustomSeverity(u),a[r].options.grid.estimatedStartDate=o["Estimated Start Date"]&&o["Estimated Start Date"].value?o["Estimated Start Date"].value:i.CHG_NOT_VALID_VALUE,a[r].options.grid.estimatedEndDate=o["Estimated Completion Date"]&&o["Estimated Completion Date"].value?o["Estimated Completion Date"].value:i.CHG_NOT_VALID_VALUE,a[r].options.grid["ds6w:plannedStartParametric"]=o["Estimated Start Date"]&&o["Estimated Start Date"].value,a[r].options.grid["ds6w:dueDateParametric"]=o["Estimated Completion Date"]&&o["Estimated Completion Date"].value;var g=e.createCustomOwnerField(u);o.type&&(a[r].options.grid.co_Owner=g);var h=e.getStatusBarIcons(u),m=e.statusbarIconsTooltips(u),C=e.getCustomTooltip(u);a[r].updateOptions({label:l,grid:a[r].options.grid,customTooltip:C,statusbarIcons:h,statusbarIconsTooltips:m,subLabel:p})}}}}})),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",["UWA/Core","DS/Tweakers/TweakerBase","DS/Utilities/Dom","DS/Utilities/Utils","DS/Core/PointerEvents","DS/Utilities/KeyboardUtils","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovExpandInputTextBox"],(function(e,t,i,n,o,a,s){"use strict";var r=t.inherit({name:"TweakerExpandInput",publishedProperties:{displayStyle:{defaultValue:"TextBox",type:"string"},value:{defaultValue:"",type:"string",advancedSetter:!0},valueType:{defaultValue:"string",type:"string"}},computeTweakerContentLength:function(){return this._getCurrentTouchMode()?19:14},_upgradeValue:function(e){return"1"===e||1===e||"true"===e||!0===e||"0"!==e&&0!==e&&"false"!==e&&!1!==e&&"undefined"}}),l=function(e,i){t.prototype.baseViewModule.call(this,e,i)};n.applyMixin(l,t.prototype.baseViewModule);var d=function(e,t){l.call(this,e,t)};return n.applyMixin(d,l),d.prototype.buildView=function(){var e=this._options.viewOptions||{};e.escapeHTML=this._tweaker.escapeHTML,e.touchMode=this._tweaker._getCurrentTouchMode(),e.disabled=this._tweaker.readOnly,e.selectAllOnFocus=!0,e.fireOnlyFromUIInteractionFlag=!0,e.autoCommitFlag=!0;var t=new s(e);this._view=t,this.setValue(this._tweaker.value)},d.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._view;n.addEventListener("buttonclick",(function(e){if(e.stopPropagation(),document.getElementsByClassName("toolbar-co-div")[0].getBoundingClientRect().width>500)n.createCAContainer.hasClassName("showBox")?(n.createCAContainer.removeClassName("openBox"),n.createCAContainer.removeClassName("showBox"),n.plusBtn.getContent().removeClassName("icon-blue")):(n.createCAContainer.addClassName("showBox"),setTimeout((function(){n.createCAContainer.addClassName("openBox")}),20),n.lineEditor._myInput.focus(),n.plusBtn.getContent().addClassName("icon-blue"));else{n.plusBtn.getContent().removeClassName("icon-blue"),n.createCAContainer.style.display="none";var i={};i.top=t.getContent().getBoundingClientRect().bottom,i.left=t.getContent().getBoundingClientRect().right,i.zIndex=40003,document.body.addContent(n.getModalInputBox(i)),n.lineEditor._myInput.focus()}})),n&&t&&(i.addEventOnElement(t,n,"focus",(function(e){e.stopPropagation()})),i.addEventOnElement(t,n,"blur",(function(e){e.stopPropagation(),t.onPostEdit()})),i.addEventOnElement(t,n,"uncommittedChange",(function(e){e.stopPropagation(),t.onPreEdit()})),i.addEventOnElement(t,n.dropdown,"click",(function(e){e.stopPropagation(),n.createCAContainer.style.setProperty("display","none"),n.plusBtn.getContent().removeClassName("icon-blue"),n.createCAContainer.removeClassName("showBox")})),i.addEventOnElement(t,n.lineEditor,"keydown",(function(e){e.stopPropagation(),e.keyCode===a.ESCAPE&&t.onCancelEdit(),e.keyCode===a.ENTER&&(n.value=n.lineEditor.value,t.keyDownEventCallback&&t.keyDownEventCallback(e,t,n.lineEditor),n.removeModalInputBox())})),i.addEventOnElement(t,n,"change",(function(i){i.stopPropagation();var o=n.value,a=void 0;a=null==o?o:function(e,t){switch(e){case"integer":var i=parseInt(t,10);return isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"number":return i=parseFloat(t),isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"boolean":return null!==/true/i.exec(t)||"1"===t;case"string":return t?t.toString():"";case"object":return JSON.parse(t);default:return t}}(t.valueType,o),e.setTweakerValue(a)})))},d.prototype.setValue=function(e){var t,i,n=this._tweaker,o=this._view;o&&n&&(o.value=null==e?e:(t=n.valueType,"string"==typeof(i=e)?i:"object"===t?JSON.stringify(i):"integer"!==t&&"number"!==t||!(Number.isNan&&!0===Number.isNaN(i)||void 0!==isNaN&&!0===isNaN(i))?"integer"===t||"number"===t?i.toString():i:"NaN"))},r.prototype.baseViewModule=l,r.prototype.VIEW_MODULES={TextBox:{classObject:d},readOnly:{classObject:d}},r.prototype.registerViewModule=function(e,t){},r.prototype.registerkeyDownCallback=function(e){this.keyDownEventCallback=e},r})),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager",["DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant"],(function(e){"use strict";var t=function(){};return t._KEY=e._KEY,t._LAST_ROUTE=e._LAST_ROUTE,t._MY_CHANGE_ORDERS=e._MY_CHANGE_ORDERS,t._RECENTLY_OPENED=e._RECENTLY_OPENED,t.prototype.initWidgetViewPreferences=function(){if(!widget.getValue(t._KEY)){widget.setValue(t._KEY,JSON.stringify({"xchange-app":{model:{"id-card":{},"orchestration-level1":{},"orchestration-level2":{},"orchestration-level3":{}},"last-route":{},"xchange-views-preferences":{"info-panel":{"info-open":"","info-context":"","info-width":""},"xchange-my-change-orders":{"xchange-list-view":{view:"",filterview:"",sort:{},search:"",selections:[],filters:{},tagFilter:{}}},"xchange-change-orders-details":{tab:""},"xchange-change-requests-details":{tab:""},"xchange-change-actions-details":{tab:""},"xchange-investigation-requests-details":{tab:""},"xchange-recently-opened":{objectIDs:""}}}}))}},t.prototype.updateWidgetViewPreferences=function(e,i){if(this.isPath(e,!1)){var n=JSON.parse(widget.getValue(t._KEY)),o=JSON.parse(JSON.stringify(e));widget.setValue(t._KEY,JSON.stringify(this.recursiveSearch(n,o,i,!0)))}},t.prototype.recursiveSearch=function(e,t,i,n){return n&&2==t.length?e[t[0]][t[1]]=i:2==t.length?e[t[1]]=i:(n||t.shift(),this.recursiveSearch(e[t[0]],t,i,!1)),e},t.prototype.isPath=function(e,i){try{var n=widget.getValue(t._KEY);if(n){if(Array.isArray(e)){for(var o=JSON.parse(n),a=0;a<e.length;a++){if(void 0===o[e[a]]&&""!=o[e[a]])return console.log("xChangeWidgetPreferencesManager isPath() path doesn't exist"),!!i&&void 0;o=o[e[a]]}return!i||o}return console.log("xChangeWidgetPreferencesManager isPath() parameter 1 is not a Array"),!!i&&void 0}return console.log("xChangeWidgetPreferencesManager isPath() widgetPreferences not initialize"),!!i&&void 0}catch(e){return console.error(e),!!i&&void 0}},t.prototype.getValue=function(e){return this.isPath(e,!0)},t})),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel",["DS/Utilities/Utils","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/constants/EditPropConstants","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesServices","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s){"use strict";function r(){var e=o.getpropOptions(i);this._informationPanel=new t(e)}return r.prototype.start=function(e){if(this.setState(e.objectInfo),e.facets&&Array.isArray(e.facets)){this._informationPanel.addFacets(e.facets);var t=[];e.facets.includes(i.FACET_RELATIONS)||t.push(i.FACET_RELATIONS),t.length>0&&this._informationPanel.removeFacets(t)}if(this._informationPanel.initDatas(this.getPropertyModels()),e.container)this._informationPanel.elements.container.inject(e.container);else{var n=document.querySelectorAll(".gov-triptych-wrapper");let e=document.querySelector(".secondmainContainer-sidepanel");if(e||(e=new UWA.Element("div",{class:"secondmainContainer-sidepanel"})),n){if(n[1].children.length>0)for(var o=n[1].children,a=0;a<o.length;a++)o[0].destroy();this._informationPanel.elements.container.inject(n[1]),e.inject(n[1])}else this._informationPanel.elements.container.inject(widget.body),e.inject(widget.body)}this.reRender=function(){let e,t=this.getSate();Array.isArray(t)&&t.length>0&&UWA.is(t[0].facetSelect)&&(e=t[0].facetSelect),this._informationPanel.initDatas(this.getPropertyModels(),e),this._informationPanel.elements.container.onResize()}},r.prototype.setState=function(e,t){var n=this;if(this._currentSelection=Array.isArray(e)?e:[],0!=e.length){var o=e[0].type;e[0].facetSelect;a.addAllFacet(n._informationPanel,e),a.hideFacet(n._informationPanel),a.updateFacetOnSelection(o,n._currentSelection,n._informationPanel),UWA.is(this._informationPanel.controller.skeleton.currentFacetName)&&this._informationPanel.controller.skeleton.currentFacetName===i.FACET_PROPERTIES&&("ChangeOrder"==o&&"false"==s.getGlobalVariable().isFullLicence&&"false"==s.getGlobalVariable().isDerivativeLicense?this._informationPanel.setReadonlyStatus(!0):"ChangeAction"==o&&this._informationPanel.setReadonlyStatus(!1)),"ChangeAnalysis"===o?a.getUpdateIMpactAnalysisFacet(e).then((function(e){t&&n.reRender()})):t&&this.reRender()}else t&&this.reRender()},r.prototype.changeSequence=function(e){for(var t=0;t<this._informationPanel.elements.container._lFacets.length;t++){var i=this._informationPanel.elements.container._lFacets[t];if(i.facet.name===e){for(var n=t;n<this._informationPanel.elements.container._lFacets.length-1;n++)this._informationPanel.elements.container._lFacets[n]=this._informationPanel.elements.container._lFacets[n+1];this._informationPanel.elements.container._lFacets[this._informationPanel.elements.container._lFacets.length-1]=i}}},r.prototype.getSate=function(){return this._currentSelection},r.prototype.getPropertyModels=function(){return o.getPropModel(this.getSate())},r.prototype.resizePropertiesPanel=function(){this._informationPanel.onResize()},r})),define("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",["DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceSlideIn","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o){"use strict";let a={slideinview:"",slideInContainer:"",parentContainer:"",modelEvents:null,setContainersForSlideIn:({contextDetails:t,infoPanelContainer:i,target:o,modelEvents:s})=>{a.slideInContainer=i,a.parentContainer=o;let r=UWA.createElement("div",{id:"emptyInitInfoPanel",styles:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},html:n.CHG_GOV_Empty_InfoPanel3DSpace_PlaceHolder});a.slideinview=new e(a.slideInContainer,a.parentContainer,r),a.slideinview.buildSlideIn(),a.modelEvents=s,s.subscribe({event:"update-property-panel-data"},(function(e){if(e.context&&e.context.getTreeDocument()&&e.context.getTreeDocument().getSelectedNodes().length>0){a.slideinview.content="";let t=e.context.getTreeDocument().getSelectedNodes(),i=a.createJsonForInfoPanel(t);a.launchPropertyPanel(i)}else{let t={physicalId:e.PhysicalID,metatype:"businessobject",type:e.type,modelEvents:a.modelEvents},i=[];i.push(t),a.launchPropertyPanel(i)}})),s.publish({event:"update-property-panel-data",data:{PhysicalID:t.id,type:t.isKindOfType}})},createSlidein:()=>{a.slideinview.showSlideIn()},launchPropertyPanel:e=>{if(a.propertyCmp){o.getGlobalVariable().lastSelectedInfoType!=e[0].type&&(i.hideFacet(a.propertyCmp._informationPanel),o.getGlobalVariable().lastSelectedInfoType=e[0].type);var n=e;a.propertyCmp.setState(n,!0)}else{var s={objectInfo:e,container:a.slideInContainer.getElement("#slideInBody")},r=new t;r.start(s),a.propertyCmp=r,o.getGlobalVariable().lastSelectedInfoType=e[0].type}},createJsonForInfoPanel:function(e){let t=[];for(let i=0;i<e.length;i++){let n={physicalId:e[i].options.grid.id,metatype:"businessobject",type:e[i].options.grid.isKindOfType,modelEvents:a.modelEvents};t.push(n)}return t}};return a})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.viewData={menu:[{type:"CheckItem",title:e.CHG_GOV_Change_Impacts_IR_Tab_DirectView,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbarHandler",func:"switchViewHandler",argument:{type:"directDGV"}},tooltip:e.CHG_GOV_Change_Impacts_IR_Tab_DirectView},{type:"CheckItem",title:e.CHG_GOV_Change_Impacts_IR_Tab_RolledUpView,action:{module:"DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbarHandler",func:"switchViewHandler",argument:{type:"RolledUpDGV"}},tooltip:e.CHG_GOV_Change_Impacts_IR_Tab_RolledUpView}]},n.writetoolbarDefinition=function(t){var i=[];return i.push({id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:e.CHG_GOV_Change_Impacts_IR_Tab_Toolbar_MassEdit,position:"far",visibleFlag:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"massUpdateHandlerIR"}}}),i.push({id:"cmd_AI_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}}),i.push({id:"view",dataElements:{typeRepresentation:"changeImpactsFilterDropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.viewData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"}),{entries:i}},n})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeRequest,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"createChangeRequestInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeRequest},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"createChangeOrderInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"addExistingHandler"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){"false"===t.getGlobalVariable().isFullLicence&&"false"===t.getGlobalVariable().isDerivativeLicense&&this.createData.menu.splice(1,1);var o={entries:[{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"plus",fontIconFamily:1},value:this.createData},position:"far",category:"Create"},{id:"MergeCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"merge",fontIconFamily:1},tooltip:e.CHG_TOOLTIP_MERGE_CA,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"mergeChangeAction"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"removeHandler"}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"deleteHandler"}}},{id:"cmd_CO_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n);o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveIA,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"filterActiveView"},tooltip:e.CHG_Filter_ActiveIA_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveIA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"filterInActiveView"},tooltip:e.CHG_Filter_InactiveIA_Def},{type:"CheckItem",title:e.CHG_Filter_RolledUpIA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"filterRolledUpView"},tooltip:e.CHG_Filter_RolledUpIA_Def}]},n.writetoolbarDefinition=function(n){let o=!0;o=!(!n.contextDetails.accessBits||"true"!=n.contextDetails.accessBits.ManageChangeAnalysis);var a={entries:[{id:"IADispatchMenu",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"graph-egraph-down",fontIconFamily:1},visibleFlag:!1,value:{menu:[{type:"PushItem",title:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchToNew,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"dispatchToNewSubCRDialog",argument:{contextCRId:n.contextDetails.id}},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchToNewSubCR},{type:"PushItem",title:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchToExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"dispatchToExistingSubCRDialog",argument:{contextCRId:n.contextDetails.id}},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchToExistingSubCR}]}},position:"far",tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchMenu},{id:"refine",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"tree-revision-update",fontIconFamily:1},tooltip:e.CHG_GOV_Refine_ImpactAnalysis,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"refineImpactAnalysis",argument:{contextCRId:n.contextDetails.id}}}},{id:"duplicate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",fontIconFamily:WUXManagedFontIcons.Font3DS},tooltip:e.CHG_GOV_Duplicate_ImpactAnalysis,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"duplicateImpactAnalysis",argument:{contextCRId:n.contextDetails.id}}}},{id:"cancel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"block",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_CancelImpactAnalysis,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"cancelHandler",argument:{contextCRId:n.contextDetails.id}}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"deleteHandler"}}},{id:"impactedItems",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"change-request-impacted-items",fontIconFamily:1},tooltip:e.ECM_CR_IA_IMPACTED_ITEMS,position:"far",visibleFlag:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"impactsHandler"}}},{id:"ia_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"filter",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().CHG_ADD_IA_FROM_PARENT_CR&&1==t.getGlobalVariable().CHG_ADD_IA_FROM_PARENT_CR){var s={id:"IAMenu",visibleFlag:!1,dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"change-request-chart-line-bar",fontIconFamily:1},value:{menu:[{type:"PushItem",title:e.CHG_GOV_ImpactAnalysis_Toolbar_NewImpactAnalysis,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate",func:"launchCreateChangeIADialog",argument:{contextCRId:n.contextDetails.id}},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_NewImpactAnalysis},{type:"PushItem",title:e.CHG_GOV_ImpactAnalysis_Toolbar_AddIAFromParent,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"addIAFromParentCRDialog",argument:{contextCRId:n.contextDetails.id}},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_AddIAFromParent}]}},position:"far",tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_IAMenu};a.entries.unshift(s)}else{var r={id:"newImpactAnalysis",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_NewImpactAnalysis,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate",func:"launchCreateChangeIADialog",argument:{contextCRId:n.contextDetails.id}}}};a.entries.unshift(r)}return t.getGlobalVariable().is3DSpace&&(i.setContainersForSlideIn(n),"ChangeAnalysis"==n.contextDetails.isKindOfType&&(a.entries=a.entries.filter((e=>"delete"!=e.id&&"IAMenu"!=e.id)))),a},n})),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"createChangeOrderInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeAction,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"createChangeActionInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeAction},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"addExistingHandler"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var o={entries:[{id:"create",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"plus",fontIconFamily:1},value:this.createData},position:"far",category:"Create"},{id:"MergeCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"merge",fontIconFamily:1},tooltip:e.CHG_TOOLTIP_MERGE_CA,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"mergeChangeAction"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"removeHandler"}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"deleteHandler"}}},{id:"cmd_co_co_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n);o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ImpactBasis_Toolbar_OrchestrateImpactAnalysis,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"_orchestrateImpactAnalysis"},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_OrchestrateImpactAnalysis},{id:"newIAAffectedItem",type:"PushItem",title:e.CHG_GOV_AffactedItem_Toolbar_AddImpactAnalysis,state:"disabled",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"createImpactAnalysisInContext"},tooltip:e.CHG_GOV_AffactedItem_Toolbar_AddImpactAnalysis},{type:"PushItem",title:e.CHG_GOV_AffactedItem_Toolbar_Add_Existing_ImpactAnalysis,state:"disabled",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"addExistingImpactAnalysisInContext"},tooltip:e.CHG_GOV_AffactedItem_Toolbar_Add_Existing_ImpactAnalysis}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var o={entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Toolbar_AddExisting,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"addExistingHandler"}}},{id:"changeAssessment",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_ChangeAssessment,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"changeAssessmentHandler"}}},{id:"massUpdate",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Toolbar_MassUpdate,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"massUpdateHandler"}}},{id:"moveToCR",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"exchange wux-ui-3ds",fontIconFamily:1},tooltip:e.CHG_GOV_AffactedItem_Toolbar_Move_AffactedItem_To_CR,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"moveAffactedItemToOtherCR"}}},{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"change-request-chart-line-bar wux-ui-3ds",fontIconFamily:1},value:this.createData},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Create,position:"far"},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"removeHandler"}}},{id:"cmd_AffectedItem_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n),o.entries=o.entries.filter((e=>"changeAssessment"!=e.id)),o.entries[3].dataElements.value.menu=o.entries[3].dataElements.value.menu.filter((e=>"newIAAffectedItem"!=e.id));o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.filterData={menu:[{type:"CheckItem",title:e.CHG_ChangeImpacts_Filter_ActiveChange,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler",func:"filterActiveView"},tooltip:e.CHG_ChangeImpacts_Filter_ActiveChange},{type:"CheckItem",title:e.CHG_ChangeImpacts_Filter_InActiveChange,action:{module:"DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler",func:"filterInActiveView"},tooltip:e.CHG_ChangeImpacts_Filter_InActiveChange}]},n.writetoolbarDefination=function(t){return{entries:[{id:"cmd_AI_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"filter",dataElements:{typeRepresentation:"changeImpactsFilterDropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"}]}},n})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedForm",["UWA/Controls/Abstract","DS/ENOjquery/ENOjquery","DS/UIKIT/Input/Button","DS/Controls/LineEditor","DS/Controls/Editor","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","UWA/Core","DS/UIKIT/Mask","DS/ENOChgRouter5/scripts/ChgRouter","DS/Controls/Button","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/BaseFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Utilities/Dom","DS/ENOChgServices/scripts/services/ChgDataProcess","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S){"use strict";return e.extend({init:function(e){this.options=e,this.selectedObject=void 0,this.modelForAutocomplete=void 0,this.options.model?1==this.options.model.length?(this.mode="edit",this.selectedObject=this.options.model[0]):this.options.model.length>1&&(this.mode="massEdit",this.selectedObject=this.options.model):this.mode="add",this.buttons={add:null,addAnother:null,save:null},this.formField={proposed:null,change:null,reasonForChange:null,changeDetails:null,targetState:null,prefix:null,details:null,status:null},this.fieldElement={proposed:null,change:null,reasonForChange:null,targetState:null,prefix:null,details:null,status:null},this.elementsList=[{label:_.CHG_GOV_Proposed_Activity_None,icon:"pencil",value:"None"},{label:_.CHG_GOV_Proposed_Activity_ChangeStatus,icon:"collaborative-lifecycle-management",value:"ChangeStatus"},{label:_.CHG_GOV_Proposed_Activity_NewEvolution,icon:"flow-branch-add",value:"NewEvolution"},{label:_.CHG_GOV_Proposed_Activity_NewVersion,icon:"flow-line-add",value:"NewVersion"},{label:_.CHG_GOV_Proposed_Activity_NewMinorVersion,icon:"flow-line-add",value:"NewMinorVersion"}],this.targetStateElementsList=[{label:_.CHG_GOV_Proposed_Target_State_Release,value:"Release"},{label:_.CHG_GOV_Proposed_Target_State_Obsolete,value:"Obsolete"},{label:_.CHG_GOV_Proposed_Target_State_Restore,value:"Restore"}],this.statusElementsList=[{label:_.CHG_GOV_Proposed_ProposalStatus_NotStarted,value:"notStartedKey"},{label:_.CHG_GOV_Proposed_ProposalStatus_Started,value:"startedKey"},{label:_.CHG_GOV_Proposed_ProposalStatus_Partial,value:"partialKey"},{label:_.CHG_GOV_Proposed_ProposalStatus_Complete,value:"completedKey"},{label:_.CHG_GOV_Proposed_ProposalStatus_Rejected,value:"rejectedKey"}],this.subscribeToPlatformEvents(),this._dnd={actual:null,count:0}},subscribeToPlatformEvents:function(){var e=this;p.unsubscribe("ECM_GOV_Proposed_Search_Native:"+(widget?widget.id:"")),p.subscribe("ECM_GOV_Proposed_Search_Native:"+(widget?widget.id:""),(function(t){var i=t.split("~")[0].split(",");i[0].contains("uuid:")?v.warn(_.CHG_GOV_OrchestrateCA_Unsupported_Message):e.fieldElement.proposed.value={icon:"",id:i[0],label:i[2],maturity:"",name:i[1],owner:"",revision:i[3],sourceid:"3DSpace",subIcon:"",subLabel:"",type:i[4]}}))},getHeading:function(){return"add"==this.mode?_.CHG_GOV_Proposed_Define_Title:"edit"==this.mode?_.CHG_GOV_Proposed_Edit_Title:"massEdit"==this.mode?_.CHG_GOV_Proposed_MassUpdate_Title:void 0},getNameLabelFilter:function(){var e=w.inherit({isDataFiltered:function(e){var t=e.options.value.name,i=e.options.value.label,n=this.filterModel;if(n&&""===n.text)return!1;if(n&&n.text&&(t||i)){var o=n.text.split("*"),a=!0,s=!0;return o.forEach((function(e,n){a&&t&&-1==t.toLowerCase().indexOf(e.toLowerCase())&&(a=!1),s&&i&&-1==i.toLowerCase().indexOf(e.toLowerCase())&&(s=!1)})),!(a||s)}return!0},isEmpty:function(){return void 0===this.filterModel.text}});return UWA.clone(e)},parseSearchResultForAutoComplete:function(e){var t=this,i=t.modelForAutocomplete=new D;t.modelForAutocomplete.getFilterManager().registerFilter("nameLabelFilter",t.getNameLabelFilter()),i.prepareUpdate();const n=/^[0-9a-fA-F]{32}$/;return e.forEach((function(e){var t=e.attributes,o={value:{label:"",icon:"",subLabel:"",subIcon:"",serviceBasedObjId:"",i3dx:"",id:"",type:"",maturity:"",owner:"",name:"",sourceid:"",revision:""}};t.forEach((function(e){if("resourceid"==e.name)o.value.serviceBasedObjId=e.value;else if("ds6w:i3dx"==e.name)o.value.i3dx=e.value;else if("ds6w:what/ds6w:type"==e.name)o.value.type=e.value;else if("ds6w:what/ds6w:status"==e.name)o.value.maturity=e.value;else if("ds6w:who/ds6w:responsible"==e.name)o.value.owner=e.value;else if("ds6w:label"==e.name)o.value.label=e.value;else if("name"==e.name)o.value.name=e.value;else if("preview_url"==e.name)o.value.icon=e.value;else if("type_icon_url"==e.name)o.value.subIcon=e.value;else if("sourceid"==e.name){var t=e.value;t=t&&t.includes(":")?t.split(":")[0]:t,o.value.sourceid=t}else"ds6wg:revision"==e.name&&(o.value.revision=e.value)})),o.value.subLabel=o.value.name+" "+o.value.revision;var a="";a="3DSPACE"==o.value.sourceid.toUpperCase()&&n.test(o.value.serviceBasedObjId)?o.value.serviceBasedObjId:o.value.i3dx,o.value.id=a;var s=new I({value:o.value});i.addChild(s)})),i.pushUpdate(),i},suggestionForProposed:function(e){var i=this;return new Promise((function(n,o){e=e.replace(/(^[*\s]+)|([*\s]+$)/g,"");var a=l.getGlobalVariable().proposedSearchType,s="";if("false"==l.getGlobalVariable().CHG_EnableNonChangeGovernedToCA){"string"==typeof a&&a.length>0&&(a=a.split(",")),"string"==typeof s&&s.length>0&&(s=s.split(","));var d="(";s&&s.length>0?(t.each(s,(function(e,t){d+=0!==e?" OR ":"NOT(",d+='[ds6w:type]:"'+t.trim()+'"'})),d+=")"):t.each(a,(function(e,t){0!==e&&(d+=" OR "),d+='[ds6w:type]:"'+t.trim()+'"'})),e="(([ds6w:label]:(*"+e+"*)) OR ([ds6w:identifier]:(*"+e+"*))) AND "+(d+=")")}else e="(([ds6w:label]:(*"+e+"*)) OR ([ds6w:identifier]:(*"+e+"*)))";var c={with_indexing_date:!0,with_nls:!1,label:"search proposed",locale:"en",select_predicate:["name","ds6w:label","ds6w:type","ds6wg:revision","ds6w:identifier","ds6w:responsible","ds6w:i3dx"],select_file:["icon","thumbnail_2d"],query:e,order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:l.getGlobalVariable().tenant,login:{"3dspace":{SecurityContext:l.getGlobalVariable().getSecurityContext()}}};c=JSON.stringify(c);var p={isfederated:!0};r.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",c,(function(e){var t=[];e.results&&(t=i.parseSearchResultForAutoComplete.bind(i,e.results)),n(t)}),(function(e){e.type="error",o(e)}),p)}))},fetchAllowedOperation:async function(e,t){return await d.fetchAllowedOperation(e,t).catch((e=>{console.error(e),v.error(_.CHG_GOV_GET_PROPOSED_OPERATION_FAIL)}))},proposedSelectionProcessing:async function(){var e=this,t=e.fieldElement.proposed.selectedItems;if(t){var i=[],n="";"edit"==e.mode&&e.selectedObject&&!Array.isArray(e.selectedObject)&&(n=e.selectedObject.proposedOperation);var o=t.options.value.sourceid,a={id:t.options.value.id,service:o&&o.includes(":")?o.split(":")[0]:o,type:t.options.value.type,environment:l.getGlobalVariable().tenant,proposedOperationOrg:n,isInstance:t.options.value.isInstance};i.push(a);var s,r,d=await e.fetchAllowedOperation(e.options.caID,i),c=d.data[0].default,p=d.data[0].allowed,u=!1,g=!1;if(c=c.filter((e=>"Error"!=e.operationName)),p=p.filter((e=>"Error"!=e.operationName)),0!=c.length&&0!=p.length||v.warn(_.CHG_GOV_Proposed_No_Allowed_Operation),"add"==e.mode&&c.length>0){var h=c[0];"None"==h.operationName&&!h.activityName||"None"==h.operationName&&h.activityName&&"Modify"==h.activityName?s="None":"None"==h.operationName&&h.activityName&&"ChangeStatus"==h.activityName?(s="ChangeStatus",r=h.targetState,u=!0):"None"==h.operationName&&h.activityName&&"ChangeRequired"==h.activityName?s="ChangeRequired":"NewEvolution"==h.operationName?(s="NewEvolution",g=!0):"NewVersion"==h.operationName?s="NewVersion":"NewMinorVersion"==h.operationName&&(s="NewMinorVersion")}else"ChangeStatus"==(s=e.selectedObject.computedOperation)?(r=e.selectedObject.targetState,u=!0):"NewEvolution"==s&&(g=!0);var m=[],C=[],f=!1,D=!1,I=!1,w=0,b=0,S=0,y=-1;p.forEach((function(e,t){var i={label:"",icon:"",value:""},n={label:"",value:""};!f&&("None"==e.operationName&&!e.activityName||"None"==e.operationName&&e.activityName&&"Modify"==e.activityName)?(f=!0,i.label=_.CHG_GOV_Proposed_Activity_None,i.icon="pencil",i.value="None",m.push(i),y++):"None"==e.operationName&&e.activityName&&"ChangeStatus"==e.activityName?(D||(D=!0,i.label=_.CHG_GOV_Proposed_Activity_ChangeStatus,i.icon="collaborative-lifecycle-management",i.value="ChangeStatus",m.push(i),y++),"Release"==e.targetState?(n.label=_.CHG_GOV_Proposed_Target_State_Release,n.value="Release"):"Obsolete"==e.targetState?(n.label=_.CHG_GOV_Proposed_Target_State_Obsolete,n.value="Obsolete"):"Restore"==e.targetState&&(n.label=_.CHG_GOV_Proposed_Target_State_Restore,n.value="Restore"),r==n.value&&(b=S),C.push(n),S++):!I&&"None"==e.operationName&&e.activityName&&"ChangeRequired"==e.activityName?(I=!0,i.label=_.CHG_GOV_Proposed_Activity_ChangeRequired,i.icon="change",i.value="ChangeRequired",m.push(i),y++):"NewEvolution"==e.operationName?(i.label=_.CHG_GOV_Proposed_Activity_NewEvolution,i.icon="flow-branch-add",i.value="NewEvolution",m.push(i),y++):"NewVersion"==e.operationName?(i.label=_.CHG_GOV_Proposed_Activity_NewVersion,i.icon="flow-line-add",i.value="NewVersion",m.push(i),y++):"NewMinorVersion"==e.operationName&&(i.label=_.CHG_GOV_Proposed_Activity_NewMinorVersion,i.icon="flow-line-add",i.value="NewMinorVersion",m.push(i),y++),s==i.value&&(w=y)})),e.formField.reasonForChange.show(),e.fieldElement.change.elementsList=m,e.fieldElement.change.selectedIndex=w,e.fieldElement.targetState.elementsList=C,e.formField.change.show(),e.formField.changeDetails.show(),e.formField.details.show(),u&&(e.fieldElement.targetState.selectedIndex=b,e.formField.targetState.show()),g&&e.formField.prefix.show(),e.enableAddButtons()}else e.clearForm()},updateForOperation:function(){var e=this;"ChangeStatus"==e.fieldElement.change.value?(e.formField.prefix.hide(),e.formField.targetState.show()):"NewEvolution"==e.fieldElement.change.value?(e.formField.prefix.show(),e.formField.targetState.hide()):(e.formField.prefix.hide(),e.formField.targetState.hide())},searchProposedHandler:function(e){if(l.getGlobalVariable().isNative){f.DispatchEventToWin("Add_Proposed","NewProposedChange")}else{let n={condition:"searchProposed",extendedQuery:""};const o=C.activateSearch();l.getGlobalVariable().is3DSpace&&o.socket.subscribeServer("SearchComServer",getTopWindow());var t=l.getGlobalVariable().proposedSearchType,i=!1;"false"==l.getGlobalVariable().CHG_EnableNonChangeGovernedToCA?i=!0:t=!1,C.search(_.CHG_GOV_Proposed_Search,t,e.OnSearchProposedComplete.bind(e),"proposedChange",o,void 0,void 0,n,void 0,"",i)}},OnSearchProposedComplete:function(e){this.fieldElement.proposed.value={icon:e[0][4],id:e[0][8]?e[0][8]:e[0][0],label:e[0][5],maturity:"",name:e[0][1],owner:"",revision:e[0][6],sourceid:e[0][7]&&e[0][7].includes(":")?e[0][7].split(":")[0]:e[0][7],subIcon:e[0][4],subLabel:"",type:e[0][2]}},getBody:function(){var e=this;this.formBody=UWA.createElement("div",{id:"proposedFormBody",class:"proposedFormBody"});var t={id:"",label:"",required:!1,fieldElement:void 0};t.id="proposed",t.label=_.CHG_GOV_Proposed_ProposedItem,t.required=!0;var i=[],r=e.fieldElement.proposed=new s({elementsTree:function(t){return e.suggestionForProposed(t)},placeholder:_.CHG_GOV_Proposed_Proposed_Placeholder,multiSearchMode:!1,minLengthBeforeSearch:3,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,filterCB:function(t){e.modelForAutocomplete&&e.modelForAutocomplete.setFilterModel({value:{filterId:"nameLabelFilter",filterModel:{text:t}}})},columnOptions:{autoRowHeightFlag:!0,typeRepresentation:"detailedInfo"}});r.addEventListener("change",(function(){e.proposedSelectionProcessing()}));var d=new m({displayStyle:"lite",label:"Search Proposed Change",tooltipInfos:{title:_.CHG_IR_AddMember_Search_Tooltip},icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1});if(d.getContent().setStyle("margin-left","10px"),d.addEventListener("buttonclick",(function(){e.searchProposedHandler(e)})),i.push(r),"add"==this.mode?i.push(d):"edit"==this.mode&&(e.fieldElement.proposed.value={icon:this.selectedObject.icon,id:this.selectedObject.instanceId?this.selectedObject.instanceId:this.selectedObject.id,label:this.selectedObject.title_instance?this.selectedObject.title_instance:this.selectedObject.title,maturity:this.selectedObject.maturityNLS,name:this.selectedObject.name,owner:this.selectedObject.ownerFullName,revision:this.selectedObject.revision,sourceid:this.selectedObject.serviceName,subIcon:this.selectedObject.icon,subLabel:"",type:this.selectedObject.instanceType?this.selectedObject.instanceType:this.selectedObject.type,isInstance:!!this.selectedObject.instanceId},e.fieldElement.proposed.disabled=!0),t.fieldElement=i,(e.formField.proposed=e.getFormField(t)).inject(this.formBody),t.id="reasonForChange",t.label=_.CHG_GOV_Proposed_ReasonForChange,t.required=!1,t.fieldElement=e.fieldElement.reasonForChange=new o({value:this.selectedObject&&this.selectedObject.reasonForChange?this.selectedObject.reasonForChange:"",nbRows:4,requiredFlag:!1,resizableFlag:"vertical",placeholder:_.CHG_GOV_Proposed_ReasonForChange_Placeholder,newLineMode:"enter"}),(e.formField.reasonForChange=e.getFormField(t)).inject(this.formBody),"massEdit"==this.mode&&this.elementsList.unshift({label:_.CHG_GOV_Proposed_NoChange,value:"noChange"}),t.id="change",t.label=_.CHG_GOV_Proposed_Change,t.required=!0,t.fieldElement=e.fieldElement.change=new a({elementsList:this.elementsList,requiredFlag:!0,enableSearchFlag:!1}),e.fieldElement.change.addEventListener("change",e.updateForOperation.bind(e)),(e.formField.change=e.getFormField(t)).inject(this.formBody),t.id="changeDetails",t.label=_.CHG_GOV_Proposed_ChangeDetails,t.required=!1,t.fieldElement=void 0,(e.formField.changeDetails=e.getFormField(t)).inject(this.formBody),t.id="targetState",t.label=_.CHG_GOV_Proposed_TargetState,t.required=!0,t.fieldElement=e.fieldElement.targetState=new a({elementsList:this.targetStateElementsList,requiredFlag:!0,enableSearchFlag:!1}),(e.formField.targetState=e.getFormField(t)).inject(this.formBody),t.id="prefix",t.label=_.CHG_GOV_Proposed_Prefix,t.required=!1,t.fieldElement=e.fieldElement.prefix=new n({value:this.selectedObject&&this.selectedObject.evolutionPrefix?this.selectedObject.evolutionPrefix:"",requiredFlag:!1,placeholder:_.CHG_GOV_Proposed_Prefix_Placeholder}),t.fieldElement.getContent().setStyle("width","100%"),(e.formField.prefix=e.getFormField(t)).inject(this.formBody),t.id="details",t.label=_.CHG_GOV_Proposed_Details,t.required=!1,t.fieldElement=e.fieldElement.details=new o({value:this.selectedObject&&this.selectedObject.computedActivityWhy?this.selectedObject.computedActivityWhy:"",nbRows:4,requiredFlag:!1,resizableFlag:"vertical",placeholder:_.CHG_GOV_Proposed_Details_Placeholder,newLineMode:"enter"}),(e.formField.details=e.getFormField(t)).inject(this.formBody),"edit"==this.mode||"massEdit"==this.mode){var p=0;"massEdit"==this.mode?this.statusElementsList.unshift({label:_.CHG_GOV_Proposed_NoChange,value:"noChangeKey"}):this.statusElementsList.forEach((function(t,i){t.value==e.selectedObject.proposedStatus&&(p=i)})),t.id="status",t.label=_.CHG_GOV_Proposed_ProposalStatus,t.required=!1,t.fieldElement=e.fieldElement.status=new a({elementsList:this.statusElementsList,requiredFlag:!1,enableSearchFlag:!1}),e.fieldElement.status.selectedIndex=p,(e.formField.status=e.getFormField(t)).inject(this.formBody)}if("massEdit"==this.mode?(e.formField.proposed.hide(),e.formField.targetState.hide(),e.formField.prefix.hide()):(e.formField.reasonForChange.hide(),e.formField.change.hide(),e.formField.changeDetails.hide(),e.formField.targetState.hide(),e.formField.prefix.hide(),e.formField.details.hide()),l.getGlobalVariable().isNative||"true"!=l.getGlobalVariable().ECM_EnableChangeControlGranularity)return"add"==this.mode&&c.makeDroppable(this.formBody,this.dropHandler.bind(this)),this.formBody;this.dropzones=UWA.createElement("div",{styles:{position:"absolute","z-index":5e4,"align-items":"center","margin-top":"10px","margin-bottom":"10px"},class:"chg-proposedForm-dropzones"});for(var u=[{id:"referenceDrop",icon:"drag-drop",title:_.CHG_GOV_Proposed_Add_Reference},{id:"instanceDrop",icon:"drag-drop",title:_.CHG_GOV_Proposed_Add_Instance}],g=0;g<u.length;g++){var h=UWA.createElement("div",{class:"proposedForm-dgv-dropZoneGlobal "+u[g].id,draggable:!1}),C=UWA.createElement("div",{class:"proposedForm-dgv-dropZone "+u[g].id,draggable:!1}).inject(h),f=UWA.createElement("div",{class:"proposedForm-dgv-dropIconAndText "+u[g].id}).inject(C);UWA.createElement("i",{class:"proposedForm-dgv_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-"+u[g].icon}).inject(f),UWA.createElement("h3",{class:"proposedForm-dgv_txt "+u[g].id,text:u[g].title}).inject(f),h.inject(this.dropzones)}var v=UWA.createElement("div",{styles:{width:"100%",position:"relative"},class:"chg-proposedForm-droppable"});return this.dropzones.inject(v),this.formBody.inject(v),this.dropzones.hide(),"add"==this.mode&&(l.getGlobalVariable().isNative||"true"!=l.getGlobalVariable().ECM_EnableChangeControlGranularity||this._addDropEvent(v)),v},getFormField:function(e){var t=UWA.createElement("div",{id:"formField"+e.id,class:"formField"}),i=UWA.createElement("div",{id:"fieldLabel"+e.id,class:"fieldLabel"}).inject(t);UWA.createElement("span",{id:"fieldText"+e.id,text:e.label,class:"fieldText"}).inject(i);if(e.required)UWA.createElement("span",{id:"fieldRequired"+e.id,text:"*",class:"fieldRequired"}).inject(i);if(e.fieldElement){var n=UWA.createElement("div",{id:"fieldElement"+e.id,class:"fieldElement"}).inject(t);Array.isArray(e.fieldElement)?(e.fieldElement.forEach((function(e){e.inject(n)})),n.setStyle("display","flex")):e.fieldElement.inject(n)}return t},getFooter:function(){var e=this,t=UWA.createElement("div",{id:"proposedFormFooter"}),n=e.buttons.add=new i({value:_.CHG_GOV_Proposed_Button_Add,className:"primary"});n.addEvent("onClick",(function(){e.createHandler()}));var o=e.buttons.addAnother=new i({value:_.CHG_GOV_Proposed_Button_AddAnother,className:"default"});o.addEvent("onClick",(function(){e.createAnotherHandler()}));var a=e.buttons.save=new i({value:_.CHG_GOV_Proposed_Button_Save,className:"primary"});return a.addEvent("onClick",(function(){e.saveHandler()})),"add"==this.mode?(n.inject(t),o.inject(t)):a.inject(t),e.disableAddButtons(),t},_addDropEvent:function(e){var t=this,i=0;let n=t.dropzones;e.addEventListener("drop",(function(i){e.removeClassName("dragenter"),t.formBody.style.opacity="1",n.hide(),t._dnd.count=0,i.stopPropagation();var o=i.dataTransfer.getData(i.dataTransfer.types[0]),a={};if(UWA.is(o)&&""!=o){a=JSON.parse(o);var s=C.checkTenantInforamation(a);if(0!=s.TenantInfoMissing.length)v.error(NLSKeys.CHG_GOV_Pref_PlatformMissing_Error);else if(0!=s.DiffTenantData.length)v.error(NLSKeys.CHG_GOV_Pref_PlatformDoesNotMatch_Error);else{a=C.removeDuplicatesToBeDroppedObjects(a);var r=C.filterBasedOnServiceId(a);if(r.incorrectServiceInfo&&Array.isArray(r.incorrectServiceInfo)&&r.incorrectServiceInfo.length>0){var l=NLSKeys.CHG_GOV_WARN_DROP_SKIPPED+"<br/>";for(var d in r.incorrectServiceInfo)l+=r.incorrectServiceInfo[d]+"<br/>";v.warn(l,"false")}}}i.defaultPrevented||(i.preventDefault(),t._dnd.actual.classList.contains("referenceDrop")?t.dropHandler(a.data.items):t._dnd.actual.classList.contains("instanceDrop")&&t.dropHandler_Instance(a.data.items))})),document.addEventListener("dragover",(function(e){e.preventDefault()})),e.addEventListener("dragenter",(function(o){0===t._dnd.count&&(t.formBody.style.opacity="0.4",e.addClassName("dragenter"),n.show(),n.addClassName("dropzone-flex"));var a=b.firstParentWithClass(o.target,"proposedForm-dgv-dropZoneGlobal");if(a){var s=a.querySelector(".proposedForm-dgv-dropZone");t._dnd.actual!==s&&(t._dnd.actual&&t._dnd.actual.classList.remove("zoneHighlighted"),s.classList.add("zoneHighlighted"),t._dnd.actual=s)}t._dnd.count++,i++,o.stopPropagation()})),e.addEventListener("mouseenter",(function(){e.hasClassName("dragenter")&&i++})),e.addEventListener("mouseleave",(function(){e.hasClassName("dragenter")&&--i<=0&&e.removeClassName("dragenter")})),e.addEventListener("dragleave",function(o){t._dnd.count--,0===t._dnd.count&&(t.formBody.style.opacity="1",e.removeClassName("dragenter"),n.hide()),o.target===t._dnd.actual&&(t._dnd.actual.classList.remove("zoneHighlighted"),t._dnd.actual=null),0===--i&&(e.removeClassName("dragenter"),n.hide()),o.stopPropagation()}.bind(t))},dropHandler_Instance:async function(e){var t=e[0].path;if(t.length<=1)v.error(_.CHG_GOV_Proposed_Add_Instance_Error);else{let r=t[t.length-2].resourceid,l=e[0].serviceId;if(l=l&&l.includes(":")?l.split(":")[0]:l,("3DSPACE"!=l.toUpperCase()||r&&r.contains(":"))&&!t[t.length-2].i3dx)v.warn(_.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped"),console.log("Service: "+l+" objectId:"+r+"i3dx:"+t[t.length-2].i3dx);else{var i="";const r=/^[0-9a-fA-F]{32}$/;i="3DSPACE"==e[0].serviceId.toUpperCase()&&r.test(t[t.length-2].resourceid)?t[t.length-2].resourceid:t[t.length-2].i3dx;var n=t[t.length-3].resourceid,o=S.commonPredicatedForFedSearch(),a=await S.callCV2FetchAPI([i],o);if(a&&a.results&&a.results.length>0)var s=a.results[0].attributes.filter((e=>"ds6w:label"===e.name)).map((e=>e.value))[0];else v.warn(_.CHG_GOV_ADD_PROPOSED_KO);this.fieldElement.proposed.value={id:i,label:s,maturity:"",name:s,owner:"",revision:"",sourceid:e[0].serviceId&&e[0].serviceId.includes(":")?e[0].serviceId.split(":")[0]:e[0].serviceId,subLabel:"",type:t[t.length-2].type,isInstance:"true",referenceId:n}}}},dropHandler:function(e){let t=e[0].objectId,i=e[0].serviceId;if(i=i&&i.includes(":")?i.split(":")[0]:i,("3DSPACE"!=i.toUpperCase()||t&&t.contains(":"))&&!e[0].i3dx)v.warn(_.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped"),console.log("Service: "+i+" objectId:"+t+"i3dx:"+e[0].i3dx);else{var n="";const t=/^[0-9a-fA-F]{32}$/;n="3DSPACE"==e[0].serviceId.toUpperCase()&&t.test(e[0].objectId)?e[0].objectId:e[0].i3dx,this.fieldElement.proposed.value={id:n,label:e[0].displayName,maturity:"",name:e[0].displayName,owner:"",revision:"",sourceid:e[0].serviceId&&e[0].serviceId.includes(":")?e[0].serviceId.split(":")[0]:e[0].serviceId,subLabel:"",type:e[0].objectType}}},enableAddButtons:function(){this.buttons.add.enable(),this.buttons.addAnother.enable()},disableAddButtons:function(){this.buttons.add.disable(),this.buttons.addAnother.disable()},getFormDataForAdd:function(){var e=this,t=e.fieldElement.proposed.selectedItems;return[{updateAction:"CONNECT",id:t.options.value.id,type:t.options.value.type,service:t.options.value.sourceid,change:e.fieldElement.change.value,reasonForChange:e.fieldElement.reasonForChange.value,details:e.fieldElement.details.value,targetState:e.fieldElement.targetState.value,prefix:e.fieldElement.prefix.value,isInstance:t.options.value.isInstance,referenceId:t.options.value.referenceId}]},getFormDataForEdit:function(){var e,t,i=this,n=[],o=[];return Array.isArray(i.selectedObject)?o=i.selectedObject:o.push(i.selectedObject),"startedKey"==i.fieldElement.status.value?t="Started":"notStartedKey"==i.fieldElement.status.value?t="Not Started":"partialKey"==i.fieldElement.status.value?t="Partial":"completedKey"==i.fieldElement.status.value?t="Complete":"rejectedKey"==i.fieldElement.status.value?t="Rejected":"noChangeKey"==i.fieldElement.status.value&&(t="noChange"),o.forEach((function(o){e={updateAction:"MODIFY",id:o.instanceId?o.instanceId:o.id,type:o.instanceType?o.instanceType:o.type,service:o.serviceName,proposedOperationOrg:o.proposedOperation,computedOperationOrg:o.computedOperation,targetStateOrg:o.targetState?o.targetState:"",prefixOrg:o.evolutionPrefix?o.evolutionPrefix:"",proposedOperation:i.fieldElement.change.value,reasonForChange:i.fieldElement.reasonForChange.value,details:i.fieldElement.details.value,targetState:i.fieldElement.targetState.value?i.fieldElement.targetState.value:"",prefix:i.fieldElement.prefix.value,proposedStatus:t,parent_referenceId:o.parent_referenceId?o.parent_referenceId:""},n.push(e)})),n},createHandler:function(){var e=this.getFormDataForAdd();this.validateForm(e)&&(h.getDependency("applicationChannel").publish({event:"triptych-hide-panel",data:"right"}),p.publish("ECM_GOV_Proposed_Add:"+(widget?widget.id:""),e))},createAnotherHandler:function(){var e=this,t=e.getFormDataForAdd();e.validateForm(t)&&(p.publish("ECM_GOV_Proposed_Add:"+(widget?widget.id:""),t),e.clearForm())},saveHandler:function(){var e=this,t=e.getFormDataForEdit(),i=t;(t.length>1&&(i=e.removeInstanceObjectsForMassUpdate(t)).length!=t.length&&v.warn(_.CHG_GOV_Proposed_Mass_Update_Instance_Error),i&&i.length>0)&&(e.validateForm(i)&&(h.getDependency("applicationChannel").publish({event:"triptych-hide-panel",data:"right"}),p.publish("ECM_GOV_Proposed_Edit:"+(widget?widget.id:""),i)))},removeInstanceObjectsForMassUpdate:function(e){var t=[];return e.forEach((function(e){"ChangeRequired"!=e.proposedOperationOrg&&t.push(e)})),t},validateForm:function(e){return e&&e.length>0?!(e[0]&&!e[0].change&&"add"==this.mode)||(v.error(_.CHG_GOV_Proposed_Mandatory_Change),!1):(console.log("Something is wrong"),!1)},clearForm:function(){var e=this;e.fieldElement.proposed.selectedItems=void 0,e.fieldElement.change.elementsList=[],e.fieldElement.reasonForChange.value="",e.fieldElement.targetState.elementsList=[],e.fieldElement.prefix.value="",e.fieldElement.details.value="",e.formField.reasonForChange.hide(),e.formField.change.hide(),e.formField.changeDetails.hide(),e.formField.details.hide(),e.formField.targetState.hide(),e.formField.prefix.hide(),e.disableAddButtons()}})})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var o={entries:[{id:"cmd_AI_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n),o.entries=o.entries.filter((e=>"changeAssessment"!=e.id));o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n})),define("DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper",["DS/Core/PointerEvents","DS/Utilities/TouchUtils","DS/ENOXWelcomePanel/js/ENOXWelcomePanel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s){"use strict";var r=function(){};return r.prototype.init=function(e,t,o){this._applicationChannel=e;var r=[];0==s.getGlobalVariable().isNative&&(r.push({id:n.PATH_RECENTY_OPENED,text:a.CHG_GOV_Welcome_Activity_Recent,fonticon:"clock",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_Recent,category:"View"}),r.push({id:n.PATH_OPEN_CHANGE_ORDER,text:a.CHG_GOV_Welcome_Activity_Open_Change_Orders,fonticon:"open",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_Open_Change_Orders,category:"View"}),"true"==s.getGlobalVariable().CHG_INVESTIGATION_REQUEST&&r.push({id:n.PATH_MY_INVESTIGATION_REQUESTS,text:a.CHG_GOV_Welcome_Activity_My_Investigation_Requests,fonticon:"investigation-request",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_My_Investigation_Requests,category:"View"}),r.push({id:n.PATH_MY_CHANGE_REQUESTS,text:a.CHG_GOV_Welcome_Activity_My_Change_Requests,fonticon:"change-request",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_My_Change_Requests,category:"View"}),r.push({id:n.PATH_MY_CHANGE_ORDERS,text:a.CHG_GOV_Welcome_Activity_My_Change_Orders,fonticon:"change-order",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_My_Change_Orders,category:"View"})),r.push({id:n.PATH_MY_CHANGE_ACTIONS,text:a.CHG_GOV_Welcome_Activity_My_Change_Actions,fonticon:"change-action",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_My_Change_Actions,category:"View"});var l=[];"true"==s.getGlobalVariable().CHG_INVESTIGATION_REQUEST&&l.push({id:n.PATH_NEW_INVESTIGATION_REQUEST,text:a.CHG_GOV_Welcome_Activity_New_Investigation_Request,fonticon:"investigation-request-add",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_New_Investigation_Request,category:"View"}),0==s.getGlobalVariable().isNative&&(l.push({id:n.PATH_NEW_CHANGE_REQUEST,text:a.CHG_GOV_Welcome_Activity_New_Change_Request,fonticon:"change-request-add",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_New_Change_Request,category:"View"}),("true"===s.getGlobalVariable().isFullLicence&&!1===s.getGlobalVariable().isNative||"true"===s.getGlobalVariable().isDerivativeLicense&&!1===s.getGlobalVariable().isNative)&&l.push({id:n.PATH_NEW_CHANGE_ORDER,text:a.CHG_GOV_Welcome_Activity_New_Change_Order,fonticon:"change-order-add",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_New_Change_Order,category:"View"})),l.push({id:n.PATH_NEW_CHANGE_ACTION,text:a.CHG_GOV_Welcome_Activity_New_Change_Action,fonticon:"change-action-add",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_New_Change_Action,category:"View"});var d=[{id:"appHeader",title:a.CHG_GOV_Welcome_Activity_AppHeader,actions:[{id:"appInfo",text:a.CHG_GOV_Welcome_Activity_AppIntro,fonticon:"dummy",className:"chg-welcome-panel-appInfo"}]},{id:"quick_access",title:a.CHG_GOV_Welcome_Activity_QuickAccess,actions:r},{id:"start_activities",title:a.CHG_GOV_Welcome_Activity_StartActivities,actions:l}];("ENOWCHA_AP"==widget.getValue("appId")||s.getGlobalVariable().isNative)&&(d[0].title=a.CHG_EXE_Welcome_Activity_AppHeader),new i({collapsed:!1,title:"chgGov",notifications:[],activities:d,parentContainer:o,modelEvents:e}).render(),this._subscribeToEvents()},r.prototype._subscribeToEvents=function(){var i=this;this._applicationChannel.subscribe({event:"welcome-panel-action-selected"},(function(i){if(i&&"home"===i.id?o.navigate(n.ROUTE_LANDING_PAGE):i&&i.id===n.PATH_MY_CHANGE_ORDERS?o.navigate(n.ROUTE_MY_CHANGE_ORDERS,{data:"from welcomepanel"}):i&&i.id===n.PATH_RECENTY_OPENED?o.navigate(n.ROUTE_RECENTY_OPENED,{data:"from welcomepanel"}):i&&i.id===n.PATH_MY_CHANGE_REQUESTS?o.navigate(n.ROUTE_MY_CHANGE_REQUESTS,{data:"from welcomepanel"}):i&&i.id===n.PATH_MY_INVESTIGATION_REQUESTS?o.navigate(n.ROUTE_MY_INVESTIGATION_REQUESTS,{data:"from welcomepanel"}):i&&i.id===n.PATH_MY_CHANGE_ACTIONS&&o.navigate(n.ROUTE_MY_CHANGE_ACTIONS,{data:"from welcomepanel"}),t.getTouchMode()){var a=new MouseEvent(e.POINTERDOWN,{bubbles:!1});document.dispatchEvent(a)}})),this._applicationChannel.subscribe({event:"welcome-panel-select-action"},(function(e){e&&e.id===n.PATH_MY_CHANGE_ORDERS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_ORDERS,label:a.CHG_GOV_Welcome_Activity_My_Change_Orders}}):e&&e.id===n.PATH_RECENTY_OPENED?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_RECENTY_OPENED,label:a.CHG_GOV_Welcome_Activity_Recent}}):e&&e.id===n.PATH_MY_CHANGE_REQUESTS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_REQUESTS,label:a.CHG_GOV_Welcome_Activity_My_Change_Requests}}):e&&e.id===n.PATH_MY_CHANGE_ACTIONS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_ACTIONS,label:a.CHG_GOV_Welcome_Activity_My_Change_Actions}}):e&&e.id===n.PATH_MY_INVESTIGATION_REQUESTS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_INVESTIGATION_REQUESTS,label:a.CHG_GOV_Welcome_Activity_My_Investigation_Requests}}):e&&(e.id,n.PATH_CO_IDCard)}))},r})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar"],(function(e,t){"use strict";var i=Object.create(null);i.getColumns=function(){},i.changeView=function(n){if("GridView"==n);else if("TileView"==n){this.currentView="Tile";var o=t.toolbar.getNodeModelByID("view");o&&"view-small-tile"!=o.options.grid.semantics.icon.iconName&&o.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW});var a=document.querySelector(".toolbar-contributor-grid-div .wux-ui-3ds-view-small-tile");if(a){a.addClassName("currentView");var s=document.querySelector(".contributortileView");s&&(s.removeClassName("hideView"),s.addClassName("showView"))}}return i}})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabGridCol",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/TreeModel/TreeDocument","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbar"],(function(e,t,i,n,o,a){"use strict";let s=Object.create(null);return s.getColumns=function(){var a=t("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");let s=[];return s.push(a.getColumnDefinition({dataIndex:"title"})),s.push(a.getColumnDefinition({dataIndex:"typeNLS"})),s.push(a.getColumnDefinition({dataIndex:"co_name"})),s.push(a.getColumnDefinition({dataIndex:"maturityWithBadge"})),s.push(a.getColumnDefinition({dataIndex:"severityNLS"})),s.push(a.getColumnDefinition({dataIndex:"businessStateName"})),s.push(a.getColumnDefinition({dataIndex:"ownerFullName"})),s.push(a.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),s.push({dataIndex:"Disposition",text:e.CHG_GOV_Disposition_Type,children:[a.getColumnDefinition({dataIndex:"dispositionName"}),{text:e.CHG_IR_Affected_Items_Disposition_Revision,dataIndex:"dispositionRevision",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"65",filterId:"stringRegexp",filterModel:""},a.getColumnDefinition({dataIndex:"dispositionType",massUpdateAllowedFlag:!0}),{dataIndex:"dispositionOwner",text:e.CHG_IR_Affected_Items_Disposition_Owner,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel)if(i.getGlobalVariable().isSwymInstalled){if(e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]){var t="/api/user/getpicture/login/"+e.nodeModel.options.grid.dispositionInformation[0].dispositionOwner+"/format/normal";return{icon:t=i.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}}}else if(e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0])return{label:e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},{dataIndex:"dispositionMaturity",ds6wIndexMapping:"ds6w:status",text:e.CHG_GOV_DataGrid_Column_Maturity,typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel&&e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]&&e.nodeModel.options.grid.dispositionInformation[0].dispostionId){var t="Draft"==e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState?"Open":e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState;return t=e.nodeModel.options.grid.dispositionInformation[0].dispositionPolicy+"."+t,a.getAndCreateMaturityClass(t,"wux-controls-label")}}},{dataIndex:"ApprovalStatus",text:n.getName(),visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],compareFunction:function(e,t){return n.compareApprovalStatus(e,t)},getCellValue:function(e){if(e.nodeModel&&e.nodeModel.options.grid.ApprovalStatus)return{icon:e.nodeModel.options.grid.ApprovalStatus.icon,label:e.nodeModel.options.grid.ApprovalStatus.label,func:e.nodeModel.options.grid.ApprovalStatus.func}}},{dataIndex:"approvers",text:e.CHG_GOV_Members_DataGrid_Approver,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],minLengthBeforeSearch:3,massUpdateAllowedFlag:!0,semantics:{possibleValues:async function(e){if(e.length<3)return void console.log("type atleast 3 charcters");let t=new o;try{let i=await a.getApproversSuggestionsUpdate(e,["person","routetemplate"],void 0,t);return console.log("Approvers List:",i),i}catch(e){return console.error("Error fetching approvers:",e),[]}},allowMultipleValuesFlag:!0}},a.getColumnDefinition({dataIndex:"dispositionResolvedBy",massUpdateAllowedFlag:!0})]}),i.getGlobalVariable().is3DSpace&&(s[0].allowUnsafeHTMLContent=!0,s[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),s},s.changeView=function(t){if("RolledUpView"==t)this.currentView="RolledUp",(i=a.toolbar.getNodeModelByID("view"))&&"view-list"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_GOV_Change_Impacts_IR_Tab_RolledUpView}),i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected",(n=document.querySelector(".content-dispositions-grid-div"))&&(n.removeClassName("hideView"),n.removeClassName("nonVisible"),n.addClassName("showView")),(o=document.querySelector(".dispositionsTileView"))&&(o.removeClassName("showView"),o.addClassName("hideView"));else if("TileView"==t){var i,n,o;this.currentView="Tile",(i=a.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),i.options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected",(n=document.querySelector(".content-dispositions-grid-div"))&&(n.removeClassName("showView"),n.addClassName("hideView")),(o=document.querySelector(".dispositionsTileView"))&&(o.removeClassName("hideView"),o.addClassName("showView"))}},s})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("contributorEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("contributorEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.writetoolbarDefinition=function(n){var o={entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Toolbar_ReportedItem,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",func:"addExistingHandler"}}},{id:"manageScope",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"target",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Toolbar_ManageScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",func:"manageScopeHandler"}}},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",func:"removeHandler"}}},{id:"cmd_AI_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n),o.entries=o.entries.filter((e=>"changeAssessment"!=e.id));o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}if("false"===n.contextDetails.access.accessBits["Manage Introduced In"]&&"false"===n.contextDetails.access.accessBits["Manage Fixed In"]){const e=o.entries.findIndex((e=>"manageScope"===e.id));o.entries.splice(e,1)}if("false"===n.contextDetails.access.accessBits["Manage Reported Against"]){const e=o.entries.findIndex((e=>"addExisting"===e.id));o.entries.splice(e,1);const t=o.entries.findIndex((e=>"remove"===e.id));o.entries.splice(t,1)}return o},n})),define("DS/ENOChgGovernanceUX/scripts/components/applicationTopBar/ChgGovApplicationTopBarWrapper",["DS/ENOXPageToolBar/js/PageToolBar","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOXBreadcrumb/js/Breadcrumb","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/PlatformAPI/PlatformAPI"],(function(e,t,i,n,o,a,s,r){"use strict";var l=function(){};return l.prototype.init=function(o,s,r){this.xModelRouter=s,this._applicationChannel=o,this._isReadyToNavigate=!0,this._breadcrumbLink=[];var l={withInformationButton:!0,withWelcomePanelButton:!0,modelEvents:this._applicationChannel,parentContainer:r},d=new e(l);d.render().inject(r);var c=d.getBodyContent();this._tileContent=UWA.createElement("div",{styles:{display:"none",padding:"6px 0",fontSize:"14px"},html:a.CHG_GOV_Welcome_Activity_Recent}),this._tileContent.inject(c),this._title={id:t.ROUTE_HOME,label:"Home"},this._breadcrumb=new i({rootID:"home",toolTip:!0,toolTipText:a.CHG_GOV_LABEL_HOME,rootIcon:"home",modelEvents:this._applicationChannel}),this._breadcrumb.render().inject(c),this._pathModel=[n._KEY,n._VIEWS_PREFERENCES],this._subscribeToEvents()},l.prototype._subscribeToEvents=function(){var e=this;this._applicationChannel.subscribe({event:"welcome-panel-collapse"},(function(){e._applicationChannel.publish({event:"triptych-set-size",data:{size:t.LEFT_PANEL_SIZE_COLLAPSED,side:"left"}}),e._applicationChannel.publish({event:"triptych-show-panel",data:"left"})})),this._applicationChannel.subscribe({event:"welcome-panel-expand"},(function(){e._applicationChannel.publish({event:"triptych-set-size",data:{size:t.LEFT_PANEL_SIZE_EXPANDED,side:"left"}}),e._applicationChannel.publish({event:"triptych-show-panel",data:"left"})})),this._applicationChannel.subscribe({event:"information-panel-close"},(function(){e._applicationChannel.publish({event:"triptych-hide-panel",data:"right"})})),this._applicationChannel.subscribe({event:"triptych-hide-panel"},(function(e){"right"==e&&r.publish(`PropHeaderDeActivated:${widget.id}`)})),this._applicationChannel.subscribe({event:"information-panel-open"},(function(){e._applicationChannel.publish({event:"triptych-show-panel",data:"right"}),e._applicationChannel.publish({event:"information-panel-visible",data:null})})),this._applicationChannel.subscribe({event:"triptych-panel-hidden"},(function(t){"right"===t&&e._applicationChannel.publish({event:"information-panel-hidden",data:null})})),this._applicationChannel.subscribe({event:"breadcrumb-hide"},(function(){e._breadcrumb.hide()})),this._applicationChannel.subscribe({event:"topbar-show-title"},(function(t){t&&(e._title.id=t.id,e._title.label=t.label,e._tileContent.setContent(t.label)),e._breadcrumb.hide(),e._tileContent.show()})),this._applicationChannel.subscribe({event:"topbar-hide-title"},(function(){e._tileContent.hide(),e._breadcrumb.show()})),this._applicationChannel.subscribe({event:"update-ready-to-navigation-flag"},(function(t){e._isReadyToNavigate=t})),this._applicationChannel.subscribe({event:"breadcrumb-link-added"},(function(i){var n=e._breadcrumb.collection.findWhere({linkID:i.linkID});if(n._attributes.linkID!==t.ROUTE_CO_DETAILS){var o=e._breadcrumbLink.filter((function(e){return e.linkID===n._attributes.linkID})).length>0;n&&!o&&(e._breadcrumbLink.push(n._attributes),console.log("Last link added in Breadcrumb List"))}})),this._applicationChannel.subscribe({event:"breadcrumb-link-removed"},(function(t){var i=e._breadcrumbLink.find((function(e){if(e.linkID===t.linkID)return e}));if(console.log("Link remove"),i&&e._breadcrumbLink){e._breadcrumbLink.indexOf(i);e._breadcrumbLink=e._breadcrumbLink.splice(i,1),console.log("Link removed from Breadcrumb List")}})),this._applicationChannel.subscribe({event:"breadcrumb-reseted"},(function(t){if(!e._isReadyToNavigate){var i=0;for(i=0;i<e._breadcrumbLink.length;i++)e._applicationChannel.publish({event:"breadcrumb-add-link",data:e._breadcrumbLink[i]}),e._breadcrumbLink.shift()}})),this._applicationChannel.subscribe({event:"breadcrumb-link-clicked"},(function(i){if(e._applicationChannel.publish({event:"triptych-hide-panel",data:"right"}),e._isReadyToNavigate){if("home"===(s=i.linkID.replace(/-/g,"."))){var n=e._title.id||t.ROUTE_HOME;e._breadcrumbLink=[],e.xModelRouter.navigate(n,{})}else{var o=null,a=0;for(a=0;a<e._breadcrumb.collection.length;a+=1)if(e._breadcrumb.collection.at(a).id===i.linkID){o=e._breadcrumb.collection.at(a).get("additionalData");break}!1,e._breadcrumbLink.pop(),o?e.xModelRouter.navigate(s,o):e.xModelRouter.navigate(s)}}else{var s;if("home"!=(s=i.linkID.replace(/-/g,"."))){var r=e._breadcrumbLink[e._breadcrumbLink.length-1];r.linkID!=i.linkID&&e._applicationChannel.publish({event:"breadcrumb-add-link",data:r})}e._applicationChannel.publish({event:"warning-dialog-create",data:i})}}))},l})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbarHandler",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbar","DS/PlatformAPI/PlatformAPI"],(function(e,t,i,n){return{switchViewHandler:function(e){try{const t=i.toolbar.getNodeModelByID("view");if(!t)return void console.error("View icon not found");const o="ECM_GOV_ChangeImpacts_DirectDGV",a="ECM_GOV_ChangeImpacts_RolledUp_DGV",s=widget?widget.id:null;"directDGV"===e.type?(console.log("Switching to Direct View"),n.publish(o,{widgetId:s}),t.options.grid&&t.options.grid.data&&t.options.grid.data.menu?(t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected"):console.error("Menu data not found or invalid")):"RolledUpDGV"===e.type&&(console.log("Switching to Rolled Up View"),n.publish(a,{widgetId:s}),t.options.grid&&t.options.grid.data&&t.options.grid.data.menu?(t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected"):console.error("Menu data not found or invalid"))}catch(e){console.error("Error in switchViewHandler:",e)}},clearSelection:function(){const e=i.toolbar.getNodeModelByID("view");e&&e.options.grid&&e.options.grid.data&&e.options.grid.data.menu?(e.options.grid.data.menu[0].state="selected",e.options.grid.data.menu[1].state="unselected"):console.error("Menu data not found or invalid")}}})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsGridCol",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridViewToolbar"],(function(e,t,i){"use strict";let n=Object.create(null);return n.getColumns=function(){var i=t("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");let n=[];return n.push({text:e.CHG_GOV_DataGrid_Column_ChangeImpacts,dataIndex:"impactTypeNLS",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,typeRepresentation:"url",filterId:"set",filterModel:[],getCellClassName:function(e){return e&&e.nodeModel?"change-applicability":null},getCellValue:function(e){if(e.nodeModel)return"Applicability"==e.nodeModel.getAttributeValue("impactType")&&"SIGMA"==e.nodeModel.getAttributeValue("applicabilityIcon")?{label:e.nodeModel.getAttributeValue("impactTypeNLS"),icon:"math-summation wux-ui-3ds"}:"Applicability"==e.nodeModel.getAttributeValue("impactType")&&"DELTA"==e.nodeModel.getAttributeValue("applicabilityIcon")?{label:e.nodeModel.getAttributeValue("impactTypeNLS"),icon:"at-risk-status wux-ui-3ds"}:{label:e.nodeModel.getAttributeValue("impactTypeNLS")}}}),n.push(i.getColumnDefinition({dataIndex:"title"})),n.push(i.getColumnDefinition({dataIndex:"typeNLS"})),n.push(i.getColumnDefinition({dataIndex:"co_name"})),n.push(i.getColumnDefinition({dataIndex:"maturityWithBadge"})),n.push(i.getColumnDefinition({dataIndex:"severityNLS"})),n.push({text:e.CHG_CA_Column_Change_Impacts_Applicability,dataIndex:"applicability",width:150,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellValue:function(e){if("Applicability"==e.nodeModel.getAttributeValue("impactType"))return e.nodeModel.getAttributeValue("applicability")}}),n.push(i.getColumnDefinition({dataIndex:"ownerFullName"})),n.push({dataIndex:"change",text:e.CHG_CA_Column_Change_Impacts_Change,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!0,allowUnsafeHTMLContent:!0}),n.push({text:e.CHG_GOV_DataGrid_Column_Status,dataIndex:"status",editableFlag:!1,filterId:"set",filterModel:[]}),n.push({text:e.CHG_GOV_DataGrid_Column_ProposedChange,dataIndex:"proposedChange",minWidth:250,maxWidth:350,allowUnsafeHTMLContent:!0}),n},n.filterView=function(e,t){var n=i.toolbar.getNodeModelByID("filter"),o="selected"===n.options.grid.data.menu[0].state,a="selected"===n.options.grid.data.menu[1].state;"activeChange"===(e=e&&e.filterView?e.filterView:"activeChange")?(this.currentFilterView="activeChange",o&&a?n.options.grid.data.menu[0].state="unselected":a?(n.options.grid.data.menu[1].state="selected",n.options.grid.data.menu[0].state="selected"):(n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected")):"inactiveChange"===e&&(this.currentFilterView="inactiveChange",o&&!a?(n.options.grid.data.menu[1].state="selected",n.options.grid.data.menu[0].state="selected"):a&&o?n.options.grid.data.menu[1].state="unselected":(n.options.grid.data.menu[1].state="selected",n.options.grid.data.menu[0].state="unselected"));let s=["selected"===n.options.grid.data.menu[0].state?"activeChange":null,"selected"===n.options.grid.data.menu[1].state?"inactiveChange":null].filter(Boolean),r=2===s.length?"both":s[0]||"activeChange";setTimeout((function(){require(["DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler"],(function(e){e.changeImpactsModel.empty();var t={filterView:r};e.filterByStateRefresh(t)}))}),100)},n.filterInactiveIAView=function(){that.filterView("inactiveChange")},n})),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionAutoComplete",["UWA/Core","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/model/changeAction/group/ChgChangeGroupModel","DS/ENOChgServices/scripts/services/ChgDataService","i18n!DS/ENOChangeActionUX/assets/nls/ChangeAction","require"],(function(e,t,i,n,o,a,s,r){"use strict";return{selection:null,myAutoComplete:null,autoCompleteModel:null,selectedItemsValue:[],loadAutoComplete:function(e,t){var i=this;if(i.autoCompleteModel=(new o).createTreeDocument(),i.createAutoComplete(i.autoCompleteModel),this.myAutoComplete.inject(e),t){var n=(new o).createNode(t.title,t.id);this.myAutoComplete.value=t.title,i.autoCompleteModel.addRoot(n,0),n.select()}window.myAutoComplete=this.myAutoComplete,a.getListOfGroups().then((function(e){var n=e;(new o).loadData(i.autoCompleteModel,n,t)}),(function(e){return Promise.reject(e)}))},createAutoComplete:function(e,i){var n=this;n.selection=null,this.myAutoComplete=new t({multiSearchMode:!1,elementsTree:e,placeholder:s.ECM_CA_AUTOCOMPLETE_PLACEHOLDER,customFilterMessage:s.ECM_CA_OPTIONS_PLACEHOLDER}),this.myAutoComplete.addEventListener("change",(function(e){var t=null;if(e.dsModel.selectedItems)t=e.dsModel.selectedItems.options;n.selection=t}))},getSelection:function(){return this.selection}}})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","require","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridViewToolbar","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/Controls/Loader","DS/UIKIT/Input/Button"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b){"use strict";return e.extend({init:function(e){this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:u.getGlobalVariable().get3DSpaceURL(),securityContext:u.getGlobalVariable().getSecurityContext(),isNative:u.getGlobalVariable().isNative},dataForAnalysis:null};this._modelEvents=null,this._toolbar=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o,this.dgView=void 0},loadCustomColumns:function(e){let t=I.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(t){let e=JSON.parse(t);e&&w.restoreCustomViews(e,this.options.custom_view_options)}},render:function(){var e=this;let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");var o=this.processColumns();if(this.options.treeDocument&&this.options.target){var s={treeDocument:this.options.treeDocument,columns:o,cellSelection:"none",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:m.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"ChangeImpactsDGV",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!0,useWidgetPreferencesFlag:!0,onContextualEvent:function(t){let i=[];if(t&&t.collectionView&&t.cellInfos){t.cellInfos.columnID;if(t.cellInfos.rowID>-1)return C.getChangeImpactsContextualMenu(e,t).then((function(e){return e}));t.collectionView.columns.length,t.cellInfos.columnID;i=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},onDragStartRowHeader:function(e,t){g.readyDragContent(e,t)},onDragStartCell:function(e,t){g.readyDragContent(e,t)}};s=UWA.merge(s,this.options),this.dgView=new t(s),this.dgView.getCustomViewsManager().onCustomViewsSave=function(t,n){i.onCustomViewsSave(t,n,e.options.custom_view_options)};let r={expandInput:{stdTemplate:"expandInputtemplate"}},d={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};this.dgView.getTypeRepresentationFactory().registerTypeTemplates(d),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(r),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations({changeImpactsFilterDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),D.toolbar=this.dgView.setToolbar(D.writetoolbarDefination(this.options)),this.toolbar=D.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(d),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(r),this.dgView.buildStatusBar([{type:n.STATUS.NB_ITEMS},{type:n.STATUS.NB_SELECTED_ROWS}]),this.dgView.getTreeDocument().getXSO().onAdd((function(e){})),this.dgView.getTreeDocument().getXSO().onRemove((function(e){})),this.dgView.addEventListener(a.POINTERHIT,(function(t,i){e.onItemClick(t,i)}));var l=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-change-impacts-div"});this.toolbar.inject(l);let c=UWA.createElement("div",{class:"showGridView"});this.chgGridViewContainer=UWA.createElement("div",{id:"outer-changeImpacts-grid-div",class:"outer-changeImpacts-grid-div"});let p=UWA.createElement("div",{class:"footer-changeImpactsTab-grid-div"}),u=UWA.createElement("div",{class:"buttons-changeImpactsTab-grid-div"});new b({value:m.CHG_GOV_Button_Close}).inject(u).addEvent("onClick",(function(){e.closeButtonHandler(e.options.immersiveFrame)})),u.inject(p),this.chgGridViewContainer.addContent(l),this.chgGridViewContainer.addContent(c),this.chgGridViewContainer.addContent(p),this.dgView.inject(c),this.chgGridViewContainer.inject(this.options.target),c.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.dgView,this.options.custom_view_options.ootb_columns=[...o],this.options.custom_view_options.dgvDiv=c,this.options.custom_view_options.dataForAnalysis=this.options.option,this.loader=(new _).inject(this.options.target);let h=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];i.registerCustomEventsOnDGV(h,this.dgView,this.options.custom_view_options)}},closeButtonHandler:function(e){e.remove()},processColumns:function(){return this.options.columns},onItemClick:function(e,t){let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");if(1==e.multipleHitCount)if(this._modelEvents.publish({event:"ChgChangeImpacts_DGV_onClick",data:t.nodeModel,context:t.nodeModel}),t&&10===t.columnID){if("proposed_detail_obj_revision"===e.target.className){let e={};e.id=t.nodeModel.options.grid.proposedID,e.type=t.nodeModel.options.grid.proposedType,e.title=t.nodeModel.options.grid.proposedTitle,e.name=t.nodeModel.options.grid.proposedName,i.launchVersionExplorer(e)}else if(e.target.className.contains("proposed_detail_obj_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};f.buildAndDisplayContextualMenu(e.target,t)}}else if(t&&4==t.columnID){var n={};n.cellInfos=t,i.executeMaturity(n)}2==e.multipleHitCount&&(this._modelEvents.publish({event:"ChgGov_DGV_onDbClick",data:t.nodeModel,context:t.nodeModel}),t.nodeModel.select(!0))},showSpinner:function(){console.log("show spinner"),v.mask(this.options.target)},hideSpinner:function(){console.log("hide spinner"),v.unmask(this.options.target)},reapplySortModel:function(){this.dgView.reapplySortModel()}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbar",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarMenu","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/WebappsUtils/WebappsUtils"],(function(e,t,i,n,o,a){let s=Object.create(null);return s.getRealizedChangesToolbarDefinition=function(s){let r=t.getMenuInstance(s);e.is(s.groupCAFeature)&&!1===s.groupCAFeature&&r.filterMenu.menu.splice(3,1);let l=!1,d=i.getGlobalVariable();l=!(!d.isNative||1!=d.Enable_TileView_Native)||widget.getPreference("tileViewPreference").value;let c=[{id:"cmd_5_find",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"find",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Find,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"findRealizedChanges"}}},{id:"cmd_4_ignore",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"ignore",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Ignore,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ignoreRealizedChange"}}},{id:"move_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"move-to",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Move,value:r.moveMenu},position:"far",category:"commands"},{id:"cmd_2_download",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"download",fontIconFamily:1},tooltip:n.CHG_GOV_Download,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"downloadRealizedChange"}}},{id:"cmd_1_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:n.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:s.custom_view_options}}}}];return i.getGlobalVariable().isNative?c.push({id:"change_details_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"object-instance-select wux-ui-3ds",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Change_Details,value:{menu:[{type:"PushItem",title:o.ECM_CA_Command_Explore,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToVPMNavigator.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"Explore"}}},{type:"PushItem",title:o.ECM_CA_Command_ExploreWith,submenu:[{type:"PushItem",title:o.ECM_CA_Command_ExploreSys,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_ExploreInRFLPNavigator.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreInRFLP"}}},{type:"PushItem",title:o.ECM_CA_Command_ExploreMfg,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToPPRNavigatorWithParent.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreInPPR"}}},{type:"PushItem",title:o.ECM_CA_Command_ExploreParents,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_GetParents.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreParents"}}},{type:"PushItem",title:o.ECM_CA_Command_ExploreMSB,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToPPRNavigatorWithParent.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreInMSB"}}},{type:"PushItem",title:o.ECM_CA_Command_ExploreContext,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_FindInContext.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"ExploreinContext"}}}],action:{callback:()=>eventNotificationsFunction("PushItem2 Callback")}},{type:"PushItem",title:o.ECM_CA_Command_Open,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenDB.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"Open"}}},{type:"PushItem",title:o.ECM_CA_Command_OpenAdv,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenAdvDB.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"OpenAdv"}}},{type:"PushItem",title:o.ECM_CA_Command_OpenRO,icon:a.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenInReadOnly.png"),action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"OpenReadOnly"}}},{type:"PushItem",title:n.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"onRelations"}}}]}},position:"far",category:"commands"}):c.push({id:"change_details_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"object-instance-select wux-ui-3ds",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Change_Details,value:{menu:[{type:"PushItem",title:n.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ChangeDetailsHandler",argument:{action:"onRelations"}}}]}},position:"far",category:"commands"}),"true"==i.getGlobalVariable().CHG_CA_REALIZED_REFRESH&&c.push({id:"cmd_0_refresh",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"refresh",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_View_Refresh,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"refreshRealizedDGV",argument:{menu:r.filterMenu.menu}}}}),c.push({id:"filter_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"TRACKED"===s.filter?"change-action-realized":"MOVED"===s.filter?"move-to":"IGNORED"===s.filter?"ignore":"select-all-checkboxes",fontIconFamily:1},tooltip:"TRACKED"===s.filter?n.CHG_GOV_Realized_Tracked:"MOVED"===s.filter?n.CHG_GOV_Realized_Moved:"IGNORED"===s.filter?n.CHG_GOV_Realized_Ignored:n.CHG_GOV_Realized_Grouped,value:r.filterMenu},position:"far",category:"view"},{id:"expand_collapse_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"flow-tree-expand-down",fontIconFamily:1},tooltip:n.CHG_GOV_Expanded_All,value:r.expandCollapseMenu},position:"far",category:"view"},{id:"switch_view_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"view-list",fontIconFamily:1},tooltip:n.CHG_TOOLTIP_GRID_VIEW,value:r.switchViewMenu,visibleFlag:l},position:"far",category:"view"}),{entries:c}},s})),define("DS/ENOChgGovernanceUX/scripts/model/recents/ChgCORecentsTreeModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/TreeModel/BaseFilter","require"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=l.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){this.treeDocument=null},setModelEvents:function(e){this._modelEvents=e},getModelEvents:function(){return this._modelEvents},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(e){var i=new n;this.setModelEvents(e);var o=new t({id:"RecentsSummary",dataModelSet:i});return this.setTreeDocument(o),o},loadRecentChangeOrderData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=r.createCustomNameField(e);e.chgObjName=t;var n=r.createCustomSeverity(e);e.sev=n;var o=r.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=o;var a=r.createCustomOwnerField(e);e.chgObjOwner=a;var s=e.name+" | "+e.ownerFullName,l=e.maturityNLS,d=r.getStatusBarIcons(e),c=r.statusbarIconsTooltips(e),p=r.getCustomTooltip(e);return new i({label:e.title,subLabel:s,description:l,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:p,useAsyncPreExpand:!0})},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",c)}})})),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup",["UWA/Core","DS/ENOChgServices/scripts/components/ChgCommonSelectDailog","DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionAutoComplete","DS/ENOChgServices/scripts/services/ChgDataService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","require"],(function(e,t,i,n,o,a,s,r){"use strict";return{createGroup:function(e){var r=null,l=[{label:o.CHG_Button_Done,handler:function(){var r=i.getSelection();if(null!=r&&null!=r&&""!=r.label){null!=(u=document.getElementById("outer-ca-div"))&&null!=u&&s.mask(u);var l=r.label,d=r.value;if("createGroupFromIdCard"==e.facetName){var c="";let t="pid:"+e.model.id,i=e.model._attributes.attributes.find((e=>"Group"==e.command));if(i.valueActual)c=i.valueActual;var p={title:l,changeactions:[t],oldGroupId:c,availbleGroupId:d};if(""==c&&-1==d.indexOf("pid:"))n.createGroupForChangeAction(p).then((function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,a.publish("ca-IDCard-on-change-group",{id:i,group:n})}),(function(e){return Promise.reject(e)}));else if(""==l||null==l)n.removeGroupFromCA(p).then((function(t){let i=e.model.id,n={id:""};n.title=o.CHG_Header_Unassigned,a.publish("ca-IDCard-on-change-group",{id:i,group:n})}),(function(e){return Promise.reject(e)}));else if(""!=l&&""!=c&&-1==d.indexOf("pid:"))n.removeGroupFromCA(p).then((function(t){n.createGroupForChangeAction(p).then((function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,a.publish("ca-IDCard-on-change-group",{id:i,group:n})}),(function(e){return Promise.reject(e)}))}),(function(e){return Promise.reject(e)}));else if(""!=l&&""!=c&&d.indexOf("pid:")>-1){if(c!=d)n.removeGroupFromCA(p).then((function(t){n.updateGroupToAddCA(p).then((function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,a.publish("ca-IDCard-on-change-group",{id:i,group:n})}),(function(e){return Promise.reject(e)}))}),(function(e){return Promise.reject(e)}));else(u=document.getElementById("outer-ca-div"))&&s.unmask(u)}else""!=l&&""==c&&d.indexOf("pid:")>-1&&n.updateGroupToAddCA(p).then((function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,a.publish("ca-IDCard-on-change-group",{id:i,group:n})}),(function(e){return Promise.reject(e)}))}else if("createGroupFromSummary"==e.facetName){c=e.oldGroupId,p={title:l,changeactions:e.ChangeActionList,oldGroupId:c,availbleGroupId:d};if(""==c&&d.indexOf("pid:")>-1)n.updateGroupToAddCA(p).then((function(e){p.groupId=e.id,a.publish("CA-Group-Update",p)}),(function(e){return Promise.reject(e)}));else if(""==l||null==l)n.removeGroupFromCA(p).then((function(e){a.publish("CA-Group-Update",p)}),(function(e){return Promise.reject(e)}));else if(""==c&&-1==d.indexOf("pid:"))n.createGroupForChangeAction(p).then((function(e){p.groupId=e.id,a.publish("CA-Group-Update",p)}),(function(e){return Promise.reject(e)}));else if(""!=c&&d.indexOf("pid:")>-1){var u;if(c!=d)n.removeGroupFromCA(p).then((function(e){n.updateGroupToAddCA(p).then((function(e){p.groupId=e.id,a.publish("CA-Group-Update",p)}),(function(e){return Promise.reject(e)}))}),(function(e){return Promise.reject(e)}));else(u=document.getElementById("outer-ca-div"))&&s.unmask(u)}else""!=l&&""!=c&&-1==d.indexOf("pid:")&&n.removeGroupFromCA(p).then((function(e){n.createGroupForChangeAction(p).then((function(e){p.groupId=e.id,a.publish("CA-Group-Update",p)}),(function(e){return Promise.reject(e)}))}),(function(e){return Promise.reject(e)}))}t.closeDialog()}else{let i=e.model._attributes.attributes.find((e=>"Group"==e.command));if("createGroupFromIdCard"==e.facetName&&i.valueActual){let s="";i.valueActual&&(s=i.valueActual);p={title:l,changeactions:["pid:"+e.model.id],oldGroupId:s};n.removeGroupFromCA(p).then((function(t){let i=e.model.id,n={id:""};n.title=o.CHG_Header_Unassigned,a.publish("ca-IDCard-on-change-group",{id:i,group:n})}),(function(e){return Promise.reject(e)})),t.closeDialog()}else if("createGroupFromSummary"==e.facetName&&e.oldGroupId){c=e.oldGroupId,p={title:l,changeactions:e.ChangeActionList,oldGroupId:c};n.removeGroupFromCA(p).then((function(e){a.publish("CA-Group-Update",p)}),(function(e){return Promise.reject(e)})),t.closeDialog()}}},className:"primary"},{label:o.CHG_Button_Cancel,handler:function(){t.closeDialog()},className:"default"}],d={title:o.CHG_GROUP_DIALOG_TITLE,content:"<div id='caAutoCDivPop'></div>",buttonArray:l,target:widget.body};t.launchInfoDailog(d);var c=document.querySelector("#caAutoCDivPop");if("createGroupFromIdCard"==e.facetName){r=void 0;let t=e.model._attributes.attributes.find((e=>"Group"==e.command));t.valueActual&&(r={id:t.valueActual,title:t.valueDisplay})}else if("createGroupFromSummary"==e.facetName){r=void 0;""!=e.oldGroupId&&(r={id:e.oldGroupId,title:e.oldGroupTitle})}i.loadAutoComplete(c,r)}}})),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovLocalStorage",["DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant"],(function(e){"use strict";var t={init:function(e){var n;(t._LOCALSTORAGE_USER_ID=e,window.localStorage.getItem(t._LOCALSTORAGE_KEY))?((n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)))[t._LOCALSTORAGE_KEY].hasOwnProperty(t._LOCALSTORAGE_USER_ID)?n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=Object.assign(i,n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]):n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=i,window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(n))):((n={})[t._LOCALSTORAGE_KEY]={},n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=i,window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(n)))},destroy:function(){window.localStorage.removeItem(t._LOCALSTORAGE_KEY)},isPath:function(e,i){try{if(window.localStorage.getItem(t._LOCALSTORAGE_KEY)){if(Array.isArray(e)){for(var n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)),o=0;o<e.length;o++){if(!n[e[o]]&&""!=n[e[o]])return console.log("ChgGovLocalStorage getItem() path doesn't exist"),!!i&&void 0;n=n[e[o]]}return!i||n}return console.log("ChgGovLocalStorage getItem() argument is not a Array"),!!i&&void 0}return console.log("ChgGovLocalStorage getItem() LocalStorage not initialize"),!!i&&void 0}catch(e){return console.error(e),!!i&&void 0}},getValue:function(e){return this.isPath(e,!0)},setValue:function(e,i){if(this.isPath(e,!1)){var n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)),o=JSON.parse(JSON.stringify(e));window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(this.recursiveSearch(n,o,i,!0)))}},recursiveSearch:function(e,t,i,n){return 2==t.length?e[t[1]]=i:(n||t.shift(),this.recursiveSearch(e[t[0]],t,i,!1)),e}};t._LOCALSTORAGE_KEY=e._KEY,t._LOCALSTORAGE_VIEWS_PREFERENCES=e._VIEWS_PREFERENCES,t._LOCALSTORAGE_MY_CHANGE_ORDERS=e._MY_CHANGE_ORDERS,t._LOCALSTORAGE_CHANGE_ORDERS_DETAILS=e._CHANGE_ORDERS_DETAILS,t._LOCALSTORAGE_RECENTLY_OPENED=e._RECENTLY_OPENED;var i={"xchange-views-preferences":{"info-panel":{"info-open":"","info-context":"","info-width":""},"xchange-my-change-orders":{"xchange-list-view":{view:"",filterview:"",sort:{},search:"",selections:[],filters:{},tagFilter:{}}},"xchange-change-orders-details":{tab:""},"xchange-change-requests-details":{tab:""},"xchange-change-actions-details":{tab:""},"xchange-investigation-requests-details":{tab:""},"xchange-recently-opened":{objectIDs:""}}};return t})),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager",["UWA/Class","DS/ENOChgGovernanceUX/scripts/util/ChgGovLocalStorage","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o){"use strict";return e.singleton({init:function(){var e=o.getGlobalVariable();this.contextUser=e.contextUser},initialize:function(e,n,o){this._withLocalStorage=e,this._withWidgetPreferences=n,this._withUserPreferences=o,e&&t.init(this.contextUser),n&&i.prototype.initWidgetViewPreferences()},setUserId:function(e){this.userID=e},isWidgetPreferencePath:function(e){return!!this._withWidgetPreferences&&i.prototype.isPath(e,!1)},updatePreference:function(e,n){this._withWidgetPreferences&&i.prototype.updateWidgetViewPreferences(e,n),this._withLocalStorage&&(e.splice(1,0,this.userID),t.setValue(e,n)),this._withUserPreferences},updateTab:function(e,t){this.updatePreference(e.concat([n._TAB]),t)},updateFilter:function(e,t){this.updatePreference(e.concat([n._LIST_VIEW,n._FILTERVIEW]),t)},updateRecents:function(e,t){this.updatePreference(e.concat([n._OBJECTIDs]),t)},getPreference:function(e){return console.log("XChangeApplicationPreferencesLanager -getPreference : "+e),this._withWidgetPreferences&&null!=this.getWidgetPreferenceValue(e)&&this.getWidgetPreferenceValue(e)?this.getWidgetPreferenceValue(e):this._withLocalStorage?(e.splice(1,0,this.userID),this.getLocalStorageValue(e)):void 0},getTab:function(e){return this.getPreference(e.concat([n._TAB]))},getFilter:function(e){return this.getPreference(e.concat([n._LIST_VIEW,n._FILTERVIEW]))},getRecents:function(e){return this.getPreference(e.concat([n._OBJECTIDs]))},setRouteInfo:function(e){if(this._withWidgetPreferences){var t=[n._KEY,n._LAST_ROUTE],o={name:e&&e.name?e.name:void 0,params:e&&e.params?e.params:void 0};i.prototype.updateWidgetViewPreferences(t,o),console.log(JSON.parse(widget.getValue("xchange-app"))),console.log("")}},getRouteInfo:function(){if(this._withWidgetPreferences){var e=[n._KEY,n._LAST_ROUTE];return this.getWidgetPreferenceValue(e)}return{name:void 0,params:{}}},getLocalStorageValue:function(e){return t.getValue(e)},getWidgetPreferenceValue:function(e){return i.prototype.getValue(e)}})})),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgInfraService","DS/UIKIT/Mask","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u=Object.create(null);return u.getTabs=function(e,t){this._pathChangeOrdersDetails=[l._KEY,l._VIEWS_PREFERENCES,l._CHANGE_ORDERS_DETAILS];var i=r.getTab(this._pathChangeOrdersDetails);let n="ChangeOrchestration";return n=""==i?"ChangeOrchestration":i,console.log(i),[this.getChangeOrchestrationTab(e,t,n),this.getMembersTab(e,t,n),this.getApprovalsTab(e,t,n)]},u.createHeaderFieldsJSON=function(t){return new Promise((function(i,n){let o={"ds6w:project":[t.model.collabspace],"ds6w:organizationResponsible":[t.model.organization]};d.getNLSValuesPromise(o).then((function(n){let o=n["ds6w:organizationResponsible"][t.model.organization],a=n["ds6w:project"][t.model.collabspace];var s={id:t.model.id,name:t.model.name,revision:t.model.revision,type:t.model.type,title:t.model.title,thumbnail:t.model.thumbnail,iconURL:t.model.iconURL,minified:!1,onHold:t.model.onHold,isKindOfType:t.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Dependency","Attachments"],["orgnaization","RelatedScope"]],mapping:{owner:{fieldNLS:e.CHG_GOV_DataGrid_Column_Owner,valueActual:t.model.owner,valueDisplay:t.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},collabSpace:{fieldNLS:e.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:t.model.collabspace,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},maturity:{fieldNLS:e.CHG_GOV_DataGrid_Column_Maturity,valueActual:t.model.maturity,valueDisplay:t.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:e.CHG_GOV_DataGrid_Column_Organization,valueActual:t.model.organization,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},Applicability:{fieldNLS:e.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Dependency:{fieldNLS:e.CHG_GOV_Header_Dependency,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:e.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},RelatedScope:{fieldNLS:e.CHG_GOV_Header_RelatedScope,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0}}},freeSpaces:[{type:"text",data:t.model.description}],menuItems:[{id:"chgHold",text:e.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:e.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:e.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"}]};i(s)}))}))},u.displayObjectInfoInsideIDcard=function(e,t=!1){var a=this;n.getChangeOrderInfo(e).then((function(e){var n=o.processedChangeOrderDetail(e);if(t)try{let t=p("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var r=e.data[0].dataelements;r.type=e.data[0].type,r.isKindOfType="Change Order",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:r})}catch(e){console.log(e)}var l={model:n[0]};a.createHeaderFieldsJSON(l).then((function(e){var t={model:e};i.navigate(s.ROUTE_CO_DETAILS,{id:e.id,name:e.name,title:e.title,nodeModel:t,mode:"outsideCall"},{reload:!0})}))}),(function(e){var t=document.getElementsByClassName("moduleWrapper")[0];return t&&c.isMasked(t)&&c.unmask(t),Promise.reject(e)}))},u.getChangeOrderModelForIDCard=function(e){return new Promise((function(t,i){n.getChangeOrderInfo(e).then((function(e){var i={model:o.processedChangeOrderDetail(e)[0]};t(i)}))}))},u.getChangeOrchestrationTab=(t,i,n)=>{let o=!1;return"ChangeOrchestration"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_ChangeOrchestration,isSelected:o,index:0,value:"coOrchestration",content:t.createOrchestrationTab(i),icon:{iconName:"flow-tree-ordered",fontIconFamily:WUXManagedFontIcons.Font3DS}}},u.getMembersTab=(t,i,n)=>{let o=!1;return"Members"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Members,isSelected:o,value:"coMembers",index:1,content:t.createMembersTab(i),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}},u.getApprovalsTab=(t,i,n)=>{let o=!1;return"Approvals"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Approvals,isSelected:o,value:"coApprovals",index:2,content:t.createApprovalsTab(i,n),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}},u})),define("DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder",["DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil","DS/ENOChgServices/scripts/components/ChgCommonCreateDialog","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENONewWidget/ENONewLauncher","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p){var u={onCompleteCallback:function(e){let t=e.data[0].id,a={};a.context=t,a.type="ChangeOrder",p("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").launchPropertyPanelContext(a),r.getGlobalVariable().existingCOIds.push(t),o.displayObjectInfoInsideIDcard(t),n.publish("load-dependency"+widget.id,"pid:"+t);var s=document.getElementById("outer-co-div");i.unmask(s)},onFailureCallback:function(){var e=document.getElementById("outer-co-div");i.unmask(e),console.log("ERROR : FAILED CREATE CO")},createChangeOrder:function(e){let t=l.getUserPreference(d.keys.createKeys.CO_DEF_TYPE),n={context:{service:"3DSpace",tenant:r.getGlobalVariable().tenant,header:{SecurityContext:r.getGlobalVariable().getSecurityContext()}},labelTopBar:s.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:t,select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(t){e&&(e.isClickProcessing=!1);var n=document.getElementsByClassName("moduleWrapper")[0];null==n&&"undefined"==n||i.mask(n);let o=t.result[0].identifier,a={};a.context=o,a.type="ChangeOrder";let s=p("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),r=p("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil");s.launchPropertyPanelContext(a),r.displayObjectInfoInsideIDcard(o,!0);let c={};c[d.keys.createKeys.CO_DEF_TYPE]=t.result[0].type,l.saveUserPreference(c)},onFailure:function(t){console.log("onFailure..............."+t),e&&(e.isClickProcessing=!1)},onCancel:function(t){e&&(e.isClickProcessing=!1)}}};var o={commandInfo:{type:"Change Order",facet:"Start a New Activity",action:"CO>Start a New Activity>New Change Order"}};p("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:o}),(new c).CreateNew(n)},processChangeOrder:function(e){var i=e.titleText,n={data:[{dataelements:{description:e.DescText,policy:"Fast track Change",title:i}}]};t.createChangeOrder(JSON.stringify(n),u.onCompleteCallback,u.onFailureCallback)},createBlankChangeOrder:function(e,n,o){var a=o.value;if(void 0!==window.__karma__&&(a="ODT_CA"),null!=a&&""!=a.trim()){var s=document.getElementById("outer-co-div");null==s&&"undefined"==s||i.mask(s);var r={data:[{dataelements:{description:a,policy:"Fast track Change",title:a}}]};t.createChangeOrder(JSON.stringify(r),u.onCompleteCallback,u.onFailureCallback)}o.value=""}};return u})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.writetoolbarDefinition=function(i){var n=[];return"true"==t.getGlobalVariable().CHG_ChangeImpact_IR_MassUpdate&&n.push({id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:e.CHG_GOV_Change_Impacts_IR_Tab_Toolbar_MassEdit,position:"far",visibleFlag:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"massUpdateHandlerManageScope"}}}),{entries:n}},n})),define("DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil",["DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant"],(function(e,t,i){"use strict";return{createProbesData:function(n,o){var a={};let s="",r="",l="";var d=t.getRouteInfo("ChgGovPreferenceConstant._LAST_ROUTE");if("home.CRInfo.CRDetails"===d.name){let r=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_REQUESTS_DETAILS];s=t.getTab(r),a.commandInfo={},a.commandInfo.type="Change Request",s&&"crAffectedItems"===s?(a.commandInfo.facet="Affected Items","Download"===n?a.commandInfo.action="CR>Affected Items>RMB>Download":"Preview"===n?a.commandInfo.action="CR>Affected Items>RMB>Preview":"Information"===n?a.commandInfo.action="CR>Affected Items>RMB>Information":"Maturity"===n?a.commandInfo.action="CR>Affected Items>RMB>Maturity":"OpenWith"===n&&(a.commandInfo.action="CR>Affected Items>RMB>OpenWith>"+o)):s&&"crAssessment"===s?(a.commandInfo.facet="Impact Analysis","Information"===n?a.commandInfo.action="CR>Impact Analysis>RMB>Information":"Maturity"===n?a.commandInfo.action="CR>Impact Analysis>RMB>Maturity":"Copy Link"===n&&(a.commandInfo.action="CR>Impact Analysis>RMB>Copy Link")):s&&"crOrchestration"===s&&(a.commandInfo.facet="Change Orchestration","Information"===n?a.commandInfo.action="CR>Change Orchestration>RMB>Information":"Maturity"===n?a.commandInfo.action="CR>Change Orchestration>RMB>Maturity":"Copy Link"===n?a.commandInfo.action="CR>Change Orchestration>RMB>Copy Link":"OpenWith"===n&&(a.commandInfo.action="CR>Change Orchestration>RMB>OpenWith>"+o)),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:a})}else if("home.COInfo.CODetails"===d.name){let s=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_ORDERS_DETAILS];r=t.getTab(s),a.commandInfo={},a.commandInfo.type="Change Order",r&&"ChangeOrchestration"===r&&(a.commandInfo.facet="Change Orchestration","Information"===n?a.commandInfo.action="CO>Change Orchestration>RMB>Information":"Maturity"===n?a.commandInfo.action="CO>Change Orchestration>RMB>Maturity":"Copy Link"===n?a.commandInfo.action="CO>Change Orchestration>RMB>Copy Link":"OpenWith"===n&&(a.commandInfo.action="CO>Change Orchestration>RMB>OpenWith>"+o)),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:a})}else if("home.CAInfo.CADetails"===d.name){let s=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_ACTIONS_DETAILS];l=t.getTab(s),a.commandInfo={},a.commandInfo.type="Change Action",l&&"RealizedChange"===l&&(a.commandInfo.facet="Realized Changes","Information"===n?a.commandInfo.action="CA>Realized Changes>DGV>RMB>Information":"OpenWith"===n?a.commandInfo.action="CA>Realized Changes>DGV>RMB>OpenWith>"+o:"Relations"===n&&(a.commandInfo.action="CA>Realized Changes>DGV>RMB>Relations")),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:a})}}}})),define("DS/ENOChgGovernanceUX/scripts/router/ChgGovRouterConfig",["DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a){return{initialize:function(){e.initialize(t.ROUTE_HOME,t.PATH_HOME),[{name:t.ROUTE_RECENTY_OPENED,path:"/"+t.PATH_RECENTY_OPENED},{name:t.ROUTE_MY_CHANGE_ORDERS,path:"/"+t.PATH_MY_CHANGE_ORDERS},{name:t.ROUTE_MY_CHANGE_ACTIONS,path:"/"+t.PATH_MY_CHANGE_ACTIONS},{name:t.ROUTE_CO_INFO,path:"/"+t.PATH_CO_INFO},{name:t.ROUTE_CO_DETAILS,path:"/"+t.PATH_CO_DETAILS},{name:t.ROUTE_MY_CHANGE_REQUESTS,path:"/"+t.PATH_MY_CHANGE_REQUESTS},{name:t.ROUTE_MY_INVESTIGATION_REQUESTS,path:"/"+t.PATH_MY_INVESTIGATION_REQUESTS},{name:t.ROUTE_CR_INFO,path:"/"+t.PATH_CR_INFO},{name:t.ROUTE_CR_DETAILS,path:"/"+t.PATH_CR_DETAILS},{name:t.ROUTE_CA_INFO,path:"/"+t.PATH_CA_INFO},{name:t.ROUTE_CA_DETAILS,path:"/"+t.PATH_CA_DETAILS},{name:t.ROUTE_IR_INFO,path:"/"+t.PATH_IR_INFO},{name:t.ROUTE_IR_DETAILS,path:"/"+t.PATH_IR_DETAILS},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL1,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL1},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL2,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL2},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL3,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL3},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL1,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL1},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL2,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL2},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL3,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL3},{name:t.ROUTE_CR_DETAILS_LEVEL3PLUS,path:"/"+t.ROUTE_CR_DETAILS_LEVEL3PLUS},{name:t.ROUTE_CO_DETAILS_LEVEL3PLUS,path:"/"+t.ROUTE_CO_DETAILS_LEVEL3PLUS}].forEach((function(t){e.addRoute(t)}));var n={};for(var s in n[t.ROUTE_HOME]={activate:function(){if(1==a.getGlobalVariable().isNative){var i={name:t.ROUTE_MY_CHANGE_ACTIONS,params:{}};o.setRouteInfo(i);var n=e.getDependency("xChangeApp");(s=e.getDependency("applicationChannel")).publish({event:"information-panel-close",data:null}),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_ACTIONS}}),n.clearContent(),n._initChangeActionContent(),n.initializePropertyPanelwithEmptyData()}else{n=e.getDependency("xChangeApp");var s=e.getDependency("applicationChannel");i={name:t.ROUTE_RECENTY_OPENED,params:{}};o.setRouteInfo(i),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_RECENTY_OPENED}}),n._initRecentContent(),n.initializePropertyPanelwithEmptyData()}},deactivate:function(){var t=e.getDependency("xChangeApp");e.getDependency("applicationChannel");t.clearContent(),data.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_RECENTY_OPENED]={activate:function(i){var n={name:t.ROUTE_RECENTY_OPENED,params:{}};o.setRouteInfo(n);var a=e.getDependency("xChangeApp");e.getDependency("applicationChannel").publish({event:"welcome-panel-select-action",data:{id:t.PATH_RECENTY_OPENED}}),a.clearContent(),a._initRecentContent(),a.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_MY_CHANGE_ORDERS]={activate:function(i){applicationChannelLocal=e.getDependency("applicationChannel");var n=e.getDependency("xChangeApp");e.getDependency("applicationChannel").publish({event:"information-panel-close",data:null}),n.clearContent(),n.loadingMyChangeOrders(),n.initializePropertyPanelwithEmptyData();var a={name:t.ROUTE_MY_CHANGE_ORDERS};o.setRouteInfo(a)},deactivate:function(){e.getDependency("xChangeApp"),e.getDependency("applicationChannel")}},n[t.ROUTE_MY_CHANGE_ACTIONS]={activate:function(i){var n={name:t.ROUTE_MY_CHANGE_ACTIONS,params:{}};o.setRouteInfo(n);var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");s.publish({event:"information-panel-close",data:null}),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_ACTIONS}}),a.clearContent(),a._initChangeActionContent(),a.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_MY_CHANGE_REQUESTS]={activate:function(i){var n={name:t.ROUTE_MY_CHANGE_REQUESTS,params:{}};o.setRouteInfo(n);var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");s.publish({event:"information-panel-close",data:null}),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_REQUESTS}}),a.clearContent(),a._initChangeRequestContent(),a.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_MY_INVESTIGATION_REQUESTS]={activate:function(i){var n={name:t.ROUTE_MY_INVESTIGATION_REQUESTS,params:{}};o.setRouteInfo(n);var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");s.publish({event:"information-panel-close",data:null}),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_INVESTIGATION_REQUESTS}}),a.clearContent(),a._initChangeInvestigationRequestContent(),a.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_CO_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CO_INFO;var a,s=(a={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,r={linkID:t.ROUTE_CO_DETAILS,linkText:s,additionalData:a};o.publish({event:"breadcrumb-add-link",data:r})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CO_DETAILS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var p=d.name,u={linkID:t.ROUTE_CO_DETAILS,linkText:p,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_INFO}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_INFO}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(e){}},n[t.ROUTE_CR_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CR_INFO;var a,s=(a={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,r={linkID:t.ROUTE_CR_DETAILS,linkText:s,additionalData:a};o.publish({event:"breadcrumb-add-link",data:r})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CR_DETAILS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeRequestId:d.id,changeRequestName:d.name,changeRequestVersion:d.version,changeRequestName:d.modelName},o.setRouteInfo(c);var p={linkID:t.ROUTE_CR_DETAILS,linkText:r.name,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(e){}},n[t.ROUTE_CA_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CA_INFO;var a,s=(a={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,r={linkID:t.ROUTE_CA_DETAILS,linkText:s,additionalData:a};o.publish({event:"breadcrumb-add-link",data:r})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CA_DETAILS]={activate:function(i){var n=e.getDependency("xChangeApp"),a=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh),n.clearContent(),n.showIDCard(i.params.nodeModel,i.params.mode);var s,r={name:t.ROUTE_CA_DETAILS};s={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},r.params={changeRequestId:s.id,changeRequestName:s.name,changeRequestVersion:s.version,changeRequestName:s.modelName},o.setRouteInfo(r);var l=s.name,d={linkID:t.ROUTE_CA_INFO,linkText:l,additionalData:s};a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_DETAILS}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_INFO}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_DETAILS}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_INFO}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),a.publish({event:"breadcrumb-add-link",data:d})},deactivate:function(e){}},n[t.ROUTE_IR_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_IR_INFO;var a,s=(a={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,r={linkID:t.ROUTE_IR_DETAILS,linkText:s,additionalData:a};o.publish({event:"breadcrumb-add-link",data:r})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_IR_DETAILS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),n.params.nodeModel.model.isOriginalKindOf="Investigation Report",a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_IR_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeRequestId:d.id,changeRequestName:d.name,changeRequestVersion:d.version,changeRequestName:d.modelName},o.setRouteInfo(c);var p={linkID:t.ROUTE_IR_DETAILS,linkText:r.name,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_IR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_IR_INFO}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(e){}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL1]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level1Node;n.params.nodeModel.level1Node.name?r.name=n.params.nodeModel.level1Node.name:r.name=n.params.name,"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level&&(a.clearContent(),a.openIDCard(r.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL1];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_ORCHESTRATION_LEVEL1};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var p=d.name,u={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL1,linkText:p,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(i){if(i.name==t.ROUTE_CR_DETAILS){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeRequestId:n.id,changeRequestName:n.name,changeRequestVersion:n.version,changeRequestName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL2]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level2Node;n.params.nodeModel.level2Node.name?r.name=n.params.nodeModel.level2Node.name:r.name=n.params.name,a.deactivateWP(n.params.isRefresh),"level3"!=n.params.nodeModel.level&&(a.clearContent(),a.openIDCard(r.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL2];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_ORCHESTRATION_LEVEL2};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var p=d.name,u={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL2,linkText:p,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(i){if(i.name==t.ROUTE_CR_ORCHESTRATION_LEVEL1){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL3]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level3Node;n.params.nodeModel.level3Node.name?r.name=n.params.nodeModel.level3Node.name:r.name=n.params.name,a.deactivateWP(n.params.isRefresh),a.clearContent(),a.openIDCard(r.id);let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL3];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_ORCHESTRATION_LEVEL3};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var p=d.name,u={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL3,linkText:p,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL3}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(i){if(i.name==t.ROUTE_CR_ORCHESTRATION_LEVEL2){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL1]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level1Node;n.params.nodeModel.level1Node.name?r.name=n.params.nodeModel.level1Node.name:r.name=n.params.name,"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level&&(a.clearContent(),a.openIDCard(r.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL1];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_ORCHESTRATION_LEVEL1};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var p=d.name,u={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL1,linkText:p,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(i){if(i.name==t.ROUTE_CO_DETAILS){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL2]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level2Node;n.params.nodeModel.level2Node.name?r.name=n.params.nodeModel.level2Node.name:r.name=n.params.name,a.deactivateWP(n.params.isRefresh),"level3"!=n.params.nodeModel.level&&(a.clearContent(),a.openIDCard(r.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL2];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_ORCHESTRATION_LEVEL2};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var p=d.name,u={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL2,linkText:p,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(i){if(i.name==t.ROUTE_CO_ORCHESTRATION_LEVEL1){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL3]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level3Node;n.params.nodeModel.level3Node.name?r.name=n.params.nodeModel.level3Node.name:r.name=n.params.name,a.deactivateWP(n.params.isRefresh),a.clearContent(),a.openIDCard(r.id);let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL3];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_ORCHESTRATION_LEVEL3};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var p=d.name,u={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL3,linkText:p,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL3}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(i){if(i.name==t.ROUTE_CO_ORCHESTRATION_LEVEL2){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CR_DETAILS_LEVEL3PLUS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeRequestId:d.id,changeRequestName:d.name,changeRequestVersion:d.version,changeRequestName:d.modelName},o.setRouteInfo(c);var p={linkID:t.ROUTE_CR_DETAILS,linkText:r.name,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(e){}},n[t.ROUTE_CO_DETAILS_LEVEL3PLUS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var p=d.name,u={linkID:t.ROUTE_CO_DETAILS,linkText:p,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_INFO}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_INFO}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(e){}},n)n.hasOwnProperty(s)&&e.addRouteMethods(s,n[s])}}})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabRolledUpDGCol",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/TreeModel/TreeDocument","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbar"],(function(e,t,i,n,o,a){"use strict";let s=Object.create(null);return s.getColumns=function(){var a=t("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");let s=[];return s.push(a.getColumnDefinition({dataIndex:"title"})),s.push(a.getColumnDefinition({dataIndex:"typeNLS"})),s.push(a.getColumnDefinition({dataIndex:"co_name"})),s.push({dataIndex:"affectedItems",text:e.CHG_GOV_Change_Impacts_IR_Tab_RolledUp_AffectedItems,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!0,filterId:"stringRegexp",filterModel:"",allowUnsafeHTMLContent:!0}),s.push(a.getColumnDefinition({dataIndex:"maturityWithBadge"})),s.push(a.getColumnDefinition({dataIndex:"severityNLS"})),s.push(a.getColumnDefinition({dataIndex:"businessStateName"})),s.push(a.getColumnDefinition({dataIndex:"ownerFullName"})),s.push(a.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),s.push({dataIndex:"Disposition",text:e.CHG_GOV_Disposition_Type,children:[a.getColumnDefinition({dataIndex:"dispositionName"}),{text:e.CHG_IR_Affected_Items_Disposition_Revision,dataIndex:"dispositionRevision",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"65",filterId:"stringRegexp",filterModel:""},a.getColumnDefinition({dataIndex:"dispositionType",massUpdateAllowedFlag:!0}),{dataIndex:"dispositionOwner",text:e.CHG_IR_Affected_Items_Disposition_Owner,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel)if(i.getGlobalVariable().isSwymInstalled){if(e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]){var t="/api/user/getpicture/login/"+e.nodeModel.options.grid.dispositionInformation[0].dispositionOwner+"/format/normal";return{icon:t=i.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}}}else if(e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0])return{label:e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},{dataIndex:"dispositionMaturity",ds6wIndexMapping:"ds6w:status",text:e.CHG_GOV_DataGrid_Column_Maturity,typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel&&e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]&&e.nodeModel.options.grid.dispositionInformation[0].dispostionId){var t="Draft"==e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState?"Open":e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState;return t=e.nodeModel.options.grid.dispositionInformation[0].dispositionPolicy+"."+t,a.getAndCreateMaturityClass(t,"wux-controls-label")}}},{dataIndex:"ApprovalStatus",text:n.getName(),visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],compareFunction:function(e,t){return n.compareApprovalStatus(e,t)},getCellValue:function(e){if(e.nodeModel&&e.nodeModel.options.grid.ApprovalStatus)return{icon:e.nodeModel.options.grid.ApprovalStatus.icon,label:e.nodeModel.options.grid.ApprovalStatus.label,func:e.nodeModel.options.grid.ApprovalStatus.func}}},{dataIndex:"approvers",text:e.CHG_GOV_Members_DataGrid_Approver,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],massUpdateAllowedFlag:!0,semantics:{possibleValues:async function(e){if(e.length<3)return void console.log("type atleast 3 charcters");let t=new o;try{let i=await a.getApproversSuggestionsUpdate(e,["person","routetemplate"],void 0,t);return console.log("Approvers List:",i),i}catch(e){return console.error("Error fetching approvers:",e),[]}},allowMultipleValuesFlag:!0},minLengthBeforeSearch:3},a.getColumnDefinition({dataIndex:"dispositionResolvedBy",massUpdateAllowedFlag:!0})]}),i.getGlobalVariable().is3DSpace&&(s[0].allowUnsafeHTMLContent=!0,s[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),s},s.changeView=function(t){if("RolledUpView"==t)this.currentView="RolledUp",(i=a.toolbar.getNodeModelByID("view"))&&"view-list"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_GOV_Change_Impacts_IR_Tab_RolledUpView}),i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected",(n=document.querySelector(".content-dispositions-grid-div"))&&(n.removeClassName("hideView"),n.removeClassName("nonVisible"),n.addClassName("showView")),(o=document.querySelector(".dispositionsTileView"))&&(o.removeClassName("showView"),o.addClassName("hideView"));else if("TileView"==t){var i,n,o;this.currentView="Tile",(i=a.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),i.options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected",(n=document.querySelector(".content-dispositions-grid-div"))&&(n.removeClassName("showView"),n.addClassName("hideView")),(o=document.querySelector(".dispositionsTileView"))&&(o.removeClassName("hideView"),o.addClassName("showView"))}},s})),define("DS/ENOChgGovernanceUX/scripts/components/triptych/ChgGovTriptychWrapper",["DS/ENOXTriptych/js/ENOXTriptych","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i){"use strict";var n=function(){};return n.prototype.init=function(i,n,o,a,s){this._left=document.createElement("div"),this._left.classList.add("gov-triptych-wrapper"),this._main=document.createElement("div"),this._main.classList.add("gov-triptych-wrapper"),this._right=document.createElement("div"),this._right.classList.add("gov-triptych-wrapper"),this._applicationChannel=i,this._triptych=new e;var r=widget.body.offsetWidth<550?"close":"open",l={left:{resizable:!1,originalSize:t.LEFT_PANEL_SIZE_EXPANDED,originalState:r,overMobile:!0,withClose:!1},right:{resizable:!0,minWidth:250,originalSize:400,originalState:"close",overMobile:!0},borderLeft:!0,container:n,withtransition:!0,modelEvents:this._applicationChannel};this._triptych.init(l,this._left,this._main,this._right)},n.prototype.inject=function(e){this._triptych.inject(e)},n.prototype._getTriptych=function(){return this._triptych},n.prototype.getLeftPanelContainer=function(){return this._left},n.prototype.getLeftPanelContainerTriptych=function(){return this._triptych._leftPanelContent},n.prototype.getRightPanelContainer=function(){return this._right},n.prototype.getMainPanelContainer=function(){return this._main},n})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","DS/Tweakers/GeneratedToolbar","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";return e.extend({init:function(e){this._parent(e);this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),this.subscribeToModelEvents(e.treeDocument),0==e.treeDocument.getRoots().length?e.treeDocument._modelEvents.publish({event:"treeEmpty"}):e.treeDocument._modelEvents.publish({event:"treeNotEmpty"})},render:function(){try{var e={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.tileView=new o(e);try{new c}catch(e){console.log(e)}var t=u.prototype.createTreeDocument(a.writetoolbarDefinition(this.options)),i=new u({items:t,direction:"horizontal"});a.toolbar=i,this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates({expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}}),this.toolbar.typeRepresentationFactory.registerTypeRepresentations({expandInput:{stdTemplate:"expandInputtemplate"}});var n=this;this.tileView.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]),this.tileView.getTreeDocument().getXSO().onAdd((function(e){let t;e.getTreeDocument()&&(t=e.getTreeDocument().getSelectedNodes().length),n._modelEvents.publish({event:"cr-impact-analysis-contributor-object-selection-update",data:{count:t,accessBits:n.options.accessBits}})})),this.tileView.getTreeDocument().getXSO().onRemove((function(e){0==e.getTreeDocument().getSelectedNodes().length&&n._modelEvents.publish({event:"cr-impact-analysis-contributor-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})})),document.getElementById("outer-contributor-grid-div")&&document.getElementById("outer-contributor-grid-div").destroy(),this.membersDatagridView=UWA.createElement("div",{id:"outer-contributor-grid-div",class:"outer-contributor-grid-div",styles:{width:"100%",height:"100%",display:"block"}});var s=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-contributor-grid-div"});this.toolbar.inject(s);var r=UWA.createElement("div",{class:"content-contributor-tile-div contributortileView"}),p=UWA.createElement("div",{class:"hideView",id:"contributorEmptyTileViewDiv"});UWA.createElement("div",{html:d.CHG_GOV_Contributors_DataGrid_PlaceHolder}).inject(p),this.tileView.inject(r),this.membersDatagridView.addContent(s),p.inject(r),r.inject(this.membersDatagridView)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"treeEmpty"},(function(e){s.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){s.hideEmptyView()}))},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/components/zApplicationFrame/ChgGovzApplicationFrame",["DS/CoreEvents/ModelEvents","DS/Core/Core","DS/ENOChgGovernanceUX/scripts/components/triptych/ChgGovTriptychWrapper","DS/ENOChgGovernanceUX/scripts/components/applicationTopBar/ChgGovApplicationTopBarWrapper","DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/UIKIT/UIKIT.css","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l){"use strict";var d=function(){};return d.prototype._init=function(e,t,i,n){this._applicationChannel=e,this._router=t,this._leftContent=i,this._middleContent=n,this._pathModel=[a._KEY,a._VIEWS_PREFERENCES],this._initDom()},d.prototype._initDom=function(){var e=document.querySelector("#zPlaneid");e&&e.destroy(),this._content=UWA.createElement("div",{id:"zPlaneid"}),this._content.classList.add("z-panel"),this._topbar=UWA.createElement("div",{id:"ztoolbar",styles:{}}),this._topbar.classList.add("z-topbar"),this._mainContainer=document.createElement("div"),this._mainContainer.classList.add("z-content"),this._content.appendChild(this._mainContainer),this._pageToolBarComponent=new n,this._pageToolBarComponent.init(this._applicationChannel,this._router,this._topbar),this._triptychWrapper=new i,this._triptychWrapper.init(this._applicationChannel,this._mainContainer),this._middleContainer=document.createElement("div"),this._middleContainer.classList.add("z-content-wrapper"),this._middleContainer.appendChild(this._topbar),this._applicationContent=document.createElement("div"),this._applicationContent.classList.add("cogov-content-wrapper"),this._middleContainer.appendChild(this._applicationContent),this._middleContent&&this._middleContent._container&&this._applicationContent.appendChild(this._middleContent._container),this._applicationChannel.publish({event:"triptych-set-content",data:{side:"middle",content:this._middleContainer}}),this._subscribeEvents();this.__mobileBreakpoint=this._triptychWrapper._triptych.__mobileBreakpoint},d.prototype._subscribeEvents=function(){var e=this;this._listSubscription=[],(e=this)._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-show-panel"},(function(t){e._content.clientWidth<e.__mobileBreakpoint&&(e._topbar.classList.add("hide"),e._mainContainer.classList.add("full-height"))}))),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-panel-hide-started"},(function(t){e._content.clientWidth<e.__mobileBreakpoint&&(e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height")),e._applicationChannel.publish({event:"model-conflict-panel-closed"});var i=document.querySelector("#taskViewPanelClose");i&&i.click();var n=document.querySelectorAll(".gov-triptych-wrapper");e.infoDialog=n;var o=n[1].childNodes;if("right"===t)for(var a=0;a<o.length;a++){var s=o[a].getAttribute("name");UWA.is(s)&&"EditProp_MasterContain"===s?o[a].style.display="block":o[a].style.display="none"}}))),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-entering-mobile"},(function(){e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height"),e._applicationChannel.publish({event:"triptych-hide-panel",data:"left"})}))),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-resized"},(function(e){if("right"===e.side)e.width}))),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-leaving-mobile"},(function(){e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height")}))),e._listSubscription.push(e._applicationChannel.subscribe({event:"welcome-panel-action-selected"},(function(t){e._content.clientWidth<e.__mobileBreakpoint&&e._applicationChannel.publish({event:"triptych-hide-panel",data:"left"})}))),r.unsubscribe(`PropHeaderActivated:${widget.id}`),r.subscribe(`PropHeaderActivated:${widget.id}`,(function(t){if(console.log(`PropHeaderActivated:${widget.id}`),console.log(t.currentFacet),"true"==l.getGlobalVariable().slidePanelTagger);else{e.infoDialog[1].classList.add("taggerSectionActivate"),l.getGlobalVariable().slidePanelTagger="true",["social","properties","relations","CO_Applicability","CO_Attachment","Applicability","Attachment","CA_Flowdown","IA_Assignee"].includes(t.currentFacet)?"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.ChgCRlayoutModel),t._cleanBIFilterProxy()})):"IA_ImpactBasis"==t.currentFacet?r.publish(`crImpactBasis:${widget.id}`):"IA_ImpactItem"==t.currentFacet?r.publish(`IA_ImpactItem:${widget.id}`):"Issue"==t.currentFacet?r.publish(`Issue:${widget.id}`):"CR_RelatedScope"==t.currentFacet?r.publish(`CR_RelatedScope:${widget.id}`):"CO_RelatedScope"==t.currentFacet?r.publish(`CO_RelatedScope:${widget.id}`):"CA_Context"==t.currentFacet&&r.publish(`CA_Context:${widget.id}`)}})),r.unsubscribe(`Applicability:${widget.id}`),r.subscribe(`Applicability:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`Attachment:${widget.id}`),r.subscribe(`Attachment:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`CA_Flowdown:${widget.id}`),r.subscribe(`CA_Flowdown:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`IA_Assignee:${widget.id}`),r.subscribe(`IA_Assignee:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`CO_Applicability:${widget.id}`),r.subscribe(`CO_Applicability:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`properties:${widget.id}`),r.subscribe(`properties:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`CO_Attachment:${widget.id}`),r.subscribe(`CO_Attachment:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`relations:${widget.id}`),r.subscribe(`relations:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`social:${widget.id}`),r.subscribe(`social:${widget.id}`,(function(t){e.doCleanProxy()})),r.unsubscribe(`PropHeaderDeActivated:${widget.id}`),r.subscribe(`PropHeaderDeActivated:${widget.id}`,(function(){console.log(`PropHeaderActivated:${widget.id}`),e.infoDialog[1].classList.remove("taggerSectionActivate"),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/PlatformAPI/PlatformAPI"],(function(t,i,n,o){t._initializationPromiseBIFilter||t.initializeBIFilter(e.ChgCRlayoutModel),t._cleanBIFilterProxy();let a=n.getRouteInfo();if(a.name.includes("CRDetails")){let t=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_REQUESTS_DETAILS],a=n.getTab(t),s=e.getPublishKeyForCRTab(a);o.publish(`${s}:${widget.id}`,{})}else if(a.name.includes("CODetails")){let t=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_ORDERS_DETAILS],a=n.getTab(t),s=e.getPublishKeyForCOTab(a);o.publish(`${s}:${widget.id}`,{})}})),l.getGlobalVariable().slidePanelTagger="false"}))},d.prototype.inject=function(e){e.appendChild(this._content)},d.prototype.destroy=function(){this._content=null},d.prototype.getPublishKeyForCRTab=function(e){let t="";return t="crAssessment"==e?"crImpactAnalysis":e,t},d.prototype.getPublishKeyForCOTab=function(e){let t="";return t="ChangeOrchestration"==e?"coOrchestration":e,t},d.prototype.doCleanProxy=function(){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.ChgCRlayoutModel),e._cleanBIFilterProxy()}))},d})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/contributors/ChgCRContributorsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m){"use strict";var C={createMembersView:function(t,i){i=i[0];var o=this,s={};(s=UWA.merge(s,i)).target=t,this.ChgCRContributorsDataGridModel=new n(s.grid.parentCRId,s.grid.id),this.modelEvents=s.modelEvents,this.subscribeToModelEvents(s.treeDocument),s.treeDocument=this.ChgCRContributorsDataGridModel.createTreeDocument();a.getImpactAnalysisFacet(s.grid.id,"contributors").then((i=>{this.ChgCRContributorsDataGridModel.loadContributor(s.treeDocument,i.data[0].contributors),this.ChgCRContributorTreeModel=s.treeDocument,g.makeDroppable(s.target,o.dropHandler),this.treeDocument=s.treeDocument,s.isRoutePresent=!!(i&&i.data[0]&&i.data[0].activeRoutes&&i.data[0].activeRoutes.length&&i.data[0].activeRoutes.length>0);var n=new e(s);this.membersDataGridView=n,c.unmask(t)}))},subscribeToModelEvents:function(e){this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-contributor-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-contributor-object-selection-update"},(function(e){C.handleObjectSelectionUpdate(e)}))},changeView:function(e){i.changeView("GridView")},dropHandler(e){for(var t=[],i=[],n=[],a={data:{}},s=0;s<e.length;s++){var r=e[s].serviceId.toLowerCase();"Group"==e[s].objectType||"foaf:Group"==e[s].objectType?t.push({id:e[s].objectId,name:e[s].displayName,updateAction:"CONNECT",type:e[s].objectType}):"3dswym"==r&&"pno:Person"==e[s].objectType?i.push(e[s].objectId.replace("iam:","")):("3dspace"==r||r.includes("3dspace"))&&n.push(e[s])}0!=n.length?(a.data.items=n,o.getObjectAdditionalInfo(a).then((function(e){for(var i=0;i<e.length;i++)t.push({id:e[i].pid,name:e[i].objectName,updateAction:"CONNECT",type:e[i].type});C.addExistingChildrenHandler(t)}),(function(e){console.log("Failed in getting response")}))):0!=i.length?o.getAdditionSwymPersonInfo(i).then((function(e){for(var n=0;n<i.length;n++){var o=e.additionObjectInfo[i[n]];t.push({id:o.pid,name:o.objectName,updateAction:"CONNECT",type:o.type})}C.addExistingChildrenHandler(t)}),(function(e){console.log("Failed in getting response")})):C.addExistingChildrenHandler(t)},addExistingChildrenHandler:function(e){C.ChgCRContributorsDataGridModel.addExistingChildren(e).then((function(e){C.modelEvents.publish({event:"update-contributor",data:{operation:"CONNECT",context:e.data}})}),(function(e){}))},addExistingHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Members",action:"IA>Members>Add Assignees"}};if(m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),u.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=Person&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var t=function(i){if(i.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,C.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",t)}else console.log("inside EVENT")};window.addEventListener("storage",t)}else{let e=C.ChgCRContributorsDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingIAAssignee",extendedQuery:C.createExcludeListForSearch(e)};const i=o.activateSearch();o.search(p.CHG_Contributors_Toolbar_AddContributor,"Person",C.OnSearchComplete,"Contributors",i,void 0,"userGroupForIA",t)}},addActivityHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Members",action:"IA>Members>Add Task"}};m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=C.ChgCRContributorsDataGridModel,i=t.impactAnalysisId,n=t.parentCRId;var o=document.querySelector(".addTaskIcon"),r=document.getElementById("outer-contributor-grid-div");o.classList.contains("task-present")?C.showTaskRegenerationConfirmationDialog(r,o,i,n):(c.mask(r),a.updateActivities(i,n).then((e=>{e.data[0].routeIds.length>0&&(o.classList.add("task-present"),s.success(p.CHG_Contributors_Toolbar_CreateTasks_success),h.publish("updateIAGrid"+(widget?widget.id:""),{}),c.unmask(r))})).catch((e=>{console.error("Error creating tasks:",e),c.unmask(r)})))},showTaskRegenerationConfirmationDialog:function(e,t,i,n){var o=new r({});o.inject(e),new l({immersiveFrame:o,title:p.CHG_GOV_Impact_Analysis_Contributors_Task_Regeneration_DialogBox_Title,content:p.CHG_GOV_Impact_Analysis_Contributors_Task_Regeneration_DialogBox_Message,modelFlag:!0,width:500,buttons:{No:new d({onClick:function(e){o.destroy()}}),Yes:new d({onClick:function(r){o.destroy(),c.mask(e),a.updateActivities(i,n).then((i=>{i.data[0].routeIds.length>0&&(t.classList.add("task-present"),s.success(p.CHG_Contributors_Toolbar_RegenerateTasks_success),h.publish("updateIAGrid"+(widget?widget.id:""),{}),c.unmask(e))})).catch((t=>{console.error("Error regenerating tasks:",t),c.unmask(e)}))}})}}).addEventListener("close",(function(e){o&&o.destroy()}))},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++){if("Person"==e[i][2])var n={id:e[i][0],name:e[i][1],updateAction:"CONNECT",type:e[i][2]};else n={id:e[i][0],name:e[i][5],updateAction:"CONNECT",type:e[i][2]};t.push(n)}t.length&&C.ChgCRContributorsDataGridModel.addExistingChildren(t).then((function(e){C.modelEvents.publish({event:"update-contributor",data:{operation:"CONNECT",context:e.data}})}),(function(e){}))},removeHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Members",action:"IA>Members>Remove Assignees"}};m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("deleting nodeModel");const t=C.treeDocument.getSelectedNodes();if(t.length>0){let e=[];for(var i=0;i<t.length;i++)e.push({id:t[i].options.grid.id,name:t[i].options.grid.name,updateAction:"DISCONNECT",type:t[i].options.grid.type}),null==e[i].name&&(e[i].name=t[i].options.grid.userid,null==e[i].name&&(e[i].name=t[i].options.grid.label),null==e[i].name&&(e[i].name="Random"));C.ChgCRContributorsDataGridModel.removeExistingChildren(e).then((function(e){C.modelEvents.publish({event:"update-contributor",data:{operation:"DISCONNECT",context:e}})}),(function(e){}))}else s.error(p.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){e.count>0&&"true"===e.accessBits.RemoveAssignee?C.membersDataGridView.toolbar.updateNodeModel("remove",{visibleFlag:!0}):C.membersDataGridView.toolbar.updateNodeModel("remove",{visibleFlag:!1})},changeView:function(e){i.changeView("GridView")}};return C})),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovInit",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events","DS/ENOChangeActionUX/scripts/Services/ChgChangeActionServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){return t.extend(i,n,{init:function(e){s.initialize(),this._options=e,console.log(e),this.initPreference()},loadInfraForGovWidget:function(){return that=this,new Promise((function(e,t){that.populateChgGovPreferences().then((function(t){l.getCSRFToken().then((function(t){o.getExpressionValue().then((function(t){e()}))}))}))}))},loadGovWidget:function(e){let t=a.getGlobalVariable().contextUser,i=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;if(r.getUserFullName(t).then((function(e){let t=a.getGlobalVariable().contextUser,i=e.userDisplayName.userInfo[t].userDisplayName;a.getGlobalVariable().contextUserFullName=i})),null!==i||1==a.getGlobalVariable().isNative){let t=null;if(UWA.is(i)){let e=i.data;if(null!==e&&e.items.length>0){let i=e.items[e.items.length-1];t=i.objectId}}else 1==a.getGlobalVariable().isNative&&(t=this._options.information.pid);if(UWA.is(t)&&""!=t)d.getObjectTypeInformation(t).then((function(i){if("Change Order"==i){e({type:"IDCard",extData:{parentType:"Change Order",objectId:t}})}else if("Change Request"==i){e({type:"IDCard",extData:{parentType:"Change Request",objectId:t}})}else if("Change Action"==i){e({type:"IDCard",extData:{parentType:"Change Action",objectId:t}})}else if("Investigation Request"==i){e({type:"IDCard",extData:{parentType:"Investigation Request",objectId:t}})}else{g.error(u.CHG_Notice_ObjectNotAccesible),e({type:"COLoadSummary",options:{}})}}),(function(e){return console.log("widget initilization failed"),Promise.reject(e)}));else{e({type:"COLoadSummary",options:{}})}}else{e({type:"COLoadSummary",options:{}})}require(["DS/MSFDocumentManagement/WidgetIntegration"],(function(e){widget.MSFDocumentClient&&(widget.MSFDocumentClient=e,widget.MSFDocumentClient.ConnectWidgetWithMSF())})),"true"===a.getGlobalVariable().CHG_APPROVAL_COLUMN&&require(["DS/RouteWebAppUX/Utilities/RouteLinkWidget"],(function(e){e.init(widget,{appIds:["ENXROUT_AP"],open:!1}),e.subscribeForRouteEvents(widget)}))},initPreference:function(){var e=!0,t=a.getGlobalVariable().contextUser;p.setUserId(t),p.initialize(e,true,false)},populateChgGovPreferences:function(){var e=this;return new Promise((function(t,i){var n=[],o=e.populateRecentlyOpenedPreferences();n.push(o);var a=e.populateDueDatePreferences();n.push(a),Promise.all(n).then((function(e){t("success")})),e.populateTileViewPreferences()}))},populateTileViewPreferences:function(){console.log("Initialising perefrences for tile view");let e={name:"tileViewPreference",type:"boolean",label:u.CHG_GOV_Preferences_For_TilView_Proposed_And_Realized,defaultValue:"false"};var t={};widget.addPreference(e),t.tileViewPreference=e;return console.log(!1),!0!==widget.getPreference("tileViewPreference").value||localStorage.getItem("messageShown")||(g.warn(u.CHG_GOV_Preferences_For_TilView_Proposed_And_Realized_Warning),localStorage.setItem("messageShown","true")),t},populateRecentlyOpenedPreferences:function(){var e={name:"recentlyOpenedCount",type:"list",label:u.CHG_GOV_Preferences_Recently_Opened,options:[],defaultValue:"5"};return new Promise((function(t,i){e.options.push({value:"1",label:"1"}),e.options.push({value:"2",label:"2"}),e.options.push({value:"3",label:"3"}),e.options.push({value:"4",label:"4"}),e.options.push({value:"5",label:"5"});var n={};widget.addPreference(e),n.NamePreference=e,t(n)}))},populateDueDatePreferences:function(){var e={name:"dueDateApproach",type:"list",label:u.CHG_GOV_Preferences_Due_Date,options:[],defaultValue:2};return new Promise((function(t,i){for(let t=1;t<100;t++)e.options.push({value:t,label:t});var n={};widget.addPreference(e),n.NamePreference=e,t(n)}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"relatedScope-container"}))},updateFacet:function(){var e=this;o.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var i={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};s.getObjectTypeInformation(i.id).then((function(t){if("Change Order"==t)if(a.accessBit){var n=e.elements.container;a.createRelatedScopeView(n,i),o.unmask(e.elements.container)}else s.getChangeOrderUserAccess(i.id).then((function(t){var n=t.data[0].dataelements;n=d.processAccessBitCO(n),a.accessBit="true"==n.ManageReportedAgainst;var s=e.elements.container;a.createRelatedScopeView(s,i),o.unmask(e.elements.container)}))}))}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return c})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRRelatedScopefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/PlatformAPI/PlatformAPI","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout"],(function(e,t,i,n,o,a,s,r,l){"use strict";var d=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"relatedScope-CR-container"}))},updateFacet:function(){var e=this,t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};i.getObjectTypeInformation(n.id).then((function(t){if("Change Request"==t)if(l.accessBit){var o=e.elements.container;l.createRelatedScopeView(o,n)}else i.getChangeRequestUserAccess(n.id).then((function(t){var i=t.data[0].dataelements;l.accessBit="true"==i.ManageReportedAgainst;var o=e.elements.container;l.createRelatedScopeView(o,n)}))}))}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return d})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"context-CA-container"}))},updateFacet:function(){var e=this;a.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId")};i.getObjectTypeInformation(n.id).then((function(t){if("Change Action"==t){let t=n.id;i.getChangeActionUserAccess(t).then((function(e){e.data[0].id,e.data[0]}));var o=e.elements.container;d.createContextView(o,n),a.unmask(e.elements.container)}}))}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return c})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s){"use strict";var r=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"contributor-mainContainer",styles:{width:"100%",height:"100%",display:"block"}}))},updateFacet:function(){if(this.elements.container.empty(),o.mask(this.elements.container),1==model.isMergedModel())return;let e=n.getSelectedNodes();e.length&&(this.options.data[0].grid=e[0].options.grid,this.options.data[0].accessBits=e[0].options.accessBits,a.getGlobalVariable().IAAccessBitsData&&a.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&a.getGlobalVariable().IAAccessBitsData.iaID===e[0].options.grid.id&&(this.options.data[0].accessBits=a.getGlobalVariable().IAAccessBitsData.accessBits),i.createMembersView(this.elements.container,this.options.data))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return r})),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssuefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r){"use strict";var l=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"issue-CO-container"}))},updateFacet:function(){var e=this,t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var i={id:t.get("objectId"),type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};a.getObjectTypeInformation(i.id).then((function(t){if("Change Request"==t||"Change Order"==t||"Change Action"==t||"Investigation Request"==t){"Change Action"==t?i.type="ChangeAction":"Change Order"==t?i.type="ChangeOrder":"Change Request"==t?i.type="ChangeRequest":"Investigation Request"==t&&(i.type="InvestigationRequest");var n=e.elements.container;o.createIssueView(n,i)}}))}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return l})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s){"use strict";let r=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"changeAction-mainContainer"}))},updateFacet:function(){var e=this,t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;this.elements.container.empty();var s={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};o.getObjectTypeInformation(s.id).then((function(t){if("Change Analysis"==t||""==t){var o=e.elements.container;let t=n.getSelectedNodes();s.accessBits=t[0].options.accessBits,a.getGlobalVariable().IAAccessBitsData&&a.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&a.getGlobalVariable().IAAccessBitsData.iaID===t[0].options.grid.id&&(s.accessBits=a.getGlobalVariable().IAAccessBitsData.accessBits),s.attributes=n.contextDetails.attributes,i.createCAView(o,s)}}))}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return r})),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber",["DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView"],(function(e,t){"use strict";var i={globalRegisterationObj:{},addObserver:function(e,t,n){if(i.globalRegisterationObj[t]){for(var o=!1,a=0;a<i.globalRegisterationObj[t].length;a++)if(i.globalRegisterationObj[t][a].observerID==e){i.globalRegisterationObj[t][a].callback=n,o=!0;break}o||i.globalRegisterationObj[t].push({observerID:e,callback:n})}else i.globalRegisterationObj[t]=[],i.globalRegisterationObj[t].push({observerID:e,callback:n})},removeObserver:function(e,t){for(var n=0;n<i.globalRegisterationObj[e].length;n++)i.globalRegisterationObj[e][n].observerID==t&&i.globalRegisterationObj[e].splice(n,1)},notify(e,t){var n=i.globalRegisterationObj[e];if(n)for(var o=0;o<n.length;o++)try{n[o].callback(t)}catch(e){console.log(e)}}};return e.subscribe("CO-Properties-Update",(function(e){i.notify("CO-Properties-Update",e)})),e.subscribe("ENOLC_MOVE_CMD_UPDATE",(function(e){console.log("globally new transfer data "+e),i.notify("ENOLC_MOVE_CMD_UPDATE",e)})),e.subscribe("CA-Group-Update",(function(e){console.log("Firing notification for CA Group Update "+e),i.notify("CA-Group-Update",e)})),e.subscribe("CO-AccessBit-Update",(function(e){i.notify("CO-AccessBit-Update",e)})),e.subscribe("Chg-Gov-Recents-PendingIndexed-DeletedIds",(function(e){i.notify("Chg-Gov-Recents-PendingIndexed-DeletedIds",e)})),e.subscribe("Chg-Gov-Recents-RecentlyOpened-DeletedIds",(function(e){i.notify("Chg-Gov-Recents-RecentlyOpened-DeletedIds",e)})),e.subscribe("ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",(function(e){i.notify("ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",e)})),e.subscribe("ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",(function(e){i.notify("ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",e)})),e.subscribe("Lifecycle.Modification",(function(e){i.notify("Lifecycle.Modification",e)})),e.subscribe("Attachment-AccessBit-Update",(function(e){i.notify("Attachment-AccessBit-Update",e)})),e.subscribe("co-update-attachment-complete",(function(e){i.notify("co-update-attachment-complete",e)})),e.subscribe("update-impact-anlysis-grid",(function(e){i.notify("update-impact-anlysis-grid",e)})),e.subscribe("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",(function(e){i.notify("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",e)})),e.subscribe("Change-Maturity-Update",(function(e){i.notify("Change-Maturity-Update",e)})),e.subscribe("ENORIPE-InApp-"+widget.id+"ChgCRImpactBasisDataGridLayout/onOK",(function(e){i.notify("ENORIPE-InApp-"+widget.id+"ChgCRImpactBasisDataGridLayout/onOK",e)})),e.subscribe("applicability:update:notification",(function(e){i.notify("applicability:update:notification",e)})),i})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/Controls/ComboBox","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u={createApprovalsView:function(e){this.id=e.id,this.target=e.target;var t=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=t&&null!=t&&r.mask(t),e.contextDetails&&e.contextDetails.maturity&&"In Approval"==e.contextDetails.maturity?u.getRouteContentForApprovalState(e):u.getRouteContent(e)},getRouteContent:function(e){let i=d.getGlobalVariable().tenant,n=d.getGlobalVariable().getSecurityContext();t.getRouteBasedOnContentId(e.id).then((function(t){console.log(t);var a=t.data.length,l=u.checkResponse(t.data),d=e.target;if(a>0){var c={id:l.id,renderType:"container",tenant:i,securityContext:n},p=document.getElementById("viewTaskContainerExternal"),g=document.getElementById("InitiateTaskPropertiesBody");null!=p&&p.remove(),null!=g&&g.remove(),o.init(c,d),u.checkRouteSubscribe(e);var h=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(h)}else{null!=(p=document.getElementById("viewTaskContainerExternal"))&&p.remove();var m=document.getElementById("tileViewDiv");null!=m&&m.remove();var C=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),f=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(f),f.inject(C),C.inject(d);h=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(h)}}),(function(e){return Promise.reject(e)}))},getRouteContentForApprovalState:function(e){let n=d.getGlobalVariable().tenant,a=d.getGlobalVariable().getSecurityContext();var c=i.getDependency("applicationChannel");t.getAllApprovalRouteIterations(e.id).then((function(t){console.log(t);var i=t.data.length;let d=[],p=[];var g,h=e.target;if(i>0&&(p=u.checkCycleInfo(t)),i>0&&p.length>0){var m=document.getElementById("viewTaskContainerExternal"),C=document.getElementById("InitiateTaskPropertiesBody");null!=m&&m.remove(),null!=C&&C.remove(),g=e.targetHeader,p=u.checkCycleInfo(t);let i=p.length;for(var f=0;f<i;f++)d.push(s.CHG_GOV_Approval_TaskView_Cycle+p[f].cycle);console.log(p),document.getElementsByClassName("tabContainer wux-controls-tab-container wux-controls-tab-strip")[0].appendChild(e.targetHeader);var v=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader),D=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader);if(i>1)if(p[i-1].routeID){let e={id:p[i-1].routeID,renderType:"container",tenant:n,securityContext:a};var I=new l({elementsList:d,enableSearchFlag:!1,value:s.CHG_GOV_Approval_TaskView_Cycle+p[i-1].cycle}).inject(v),w=new UWA.Element("span",{text:p[i-1].routeName+" "+p[i-1].revision}).inject(D);o.init(e,h)}else{I=new l({elementsList:d,enableSearchFlag:!1,value:s.CHG_GOV_Approval_TaskView_Cycle+p[i-1].cycle}).inject(v),w=new UWA.Element("span",{text:""}).inject(D);u.checkNoApprovalInProgress(e)}else if(p[0].routeID){let e={id:p[0].routeID,renderType:"container",tenant:n,securityContext:a};new UWA.Element("span",{text:s.CHG_GOV_Approval_TaskView_Cycle+p[0].cycle+" | "+p[0].routeName+" "+p[0].revision}).inject(v),o.init(e,h)}else new UWA.Element("span",{text:s.CHG_GOV_Approval_TaskView_Cycle+p[0].cycle}).inject(v),u.checkNoApprovalInProgress(e);i>1&&I.addEventListener("change",(function(){null!=d&&d.remove();for(var t=e.target,r=0;r<i;r++){let i=s.CHG_GOV_Approval_TaskView_Cycle+p[r].cycle;if("yes"==p[r].inserted&&i==I.value)w.textContent="",u.checkNoApprovalInProgress(e);else if(i==I.value){var l=document.getElementById("tileViewDiv");null!=l&&l.remove(),w.textContent=p[r].routeName+" "+p[r].revision;let i={id:p[r].routeID,renderType:"container",tenant:n,securityContext:a};var d=document.getElementById("viewTaskContainerExternal");null!=d&&d.remove();t=e.target;widget.routeMgmtMediator=void 0,c.publish({event:"information-panel-close",data:null}),o.init(i,t),u.checkRouteSubscribe(e)}}})),u.checkRouteSubscribe(e);var _=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(_)}else{null!=(m=document.getElementById("viewTaskContainerExternal"))&&m.remove();var b=document.getElementById("tileViewDiv");null!=b&&b.remove();var S=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});c.publish({event:"information-panel-close",data:null});var y=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(y),y.inject(S),g&&S.inject(g),S.inject(h);_=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(_)}}),(function(e){return Promise.reject(e)}))},checkRouteSubscribe:function(o){var s=UWA.createElement("div",{id:"chg-Task-container",styles:{height:"inherit"}}),r=i.getDependency("xChangeApp"),l=i.getDependency("applicationChannel"),c=r.infoPanel.childNodes;let p=new e(s);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",(function(e){p.init(e,"taskActionMode");for(var t=0;t<c.length;t++){var i=c[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(c[t].empty(),s.inject(c[t]),c[t].style.display="block"):c[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})})),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",(function(e){p.init(e,"taskEditMode");for(var t=0;t<c.length;t++){var i=c[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(c[t].empty(),s.inject(c[t]),c[t].style.display="block"):c[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})})),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",(function(e){l.publish({event:"information-panel-close",data:null})})),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",(function(e){})),widget.routeMgmtMediator.subscribe("task-action-on-save",(function(e){var s="";s=null==e.model.taskActionButton?e.model.taskReviewButton:e.model.taskActionButton;var r=o.id;if("Approve"===s||"Reject"===s||"Abstain"===s||"promote"===s||"demote"===s||"Complete"===s){t.getChangeRequestUserAccess(r).then((function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0]};a.publish("CO-AccessBit-Update",t),a.publish("idcard-header-update"+widget.id,t),a.publish("idcard-header-update-maturity"),n("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}));let e=i.getDependency("applicationChannel");e.publish({event:"triptych-hide-panel",data:"right"}),e.publish({event:"information-panel-close",data:null})}else"saveForLater"===s&&l.publish({event:"information-panel-close",data:null})})),widget.routeMgmtMediator.subscribe("launch-task-assignee-search",(function(e){if(console.log("launch-task-assignee-search Event"),d.getGlobalVariable().isNative){taskProperties=e.taskProperties,taskGraphModel=e.taskGraphModel,invokeFrom=e.invokeFrom,routeInfo=e.routeInfo;ChgNativeInitService.DispatchEventToWin("CHG_Search_Task_Assignee","Task_Assignee")}})),widget.routeMgmtMediator.subscribe("launch-add-attachment-search",(function(e){if(console.log("launch-add-attachment-search Event"),d.getGlobalVariable().isNative){taskProperties=e.taskProperties,taskGraphModel=e.alreadyAttachedDocs;ChgNativeInitService.DispatchEventToWin("CHG_ADD_ATTACHMENT_SEARCH","Add_Attachment_Search")}}))},checkNoApprovalInProgress:function(e){var t=e.target,n=e.targetHeader,o=i.getDependency("applicationChannel"),a=document.getElementById("viewTaskContainerExternal");null!=a&&a.remove();var l=document.getElementById("tileViewDiv");null!=l&&l.remove();var d=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});o.publish({event:"information-panel-close",data:null});var c=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_Cycle_TaskView_PlaceHolder}).inject(c),c.inject(d),n&&d.inject(n),d.inject(t);var p=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(p)},checkCycleInfo:function(e){var t=e.data.length;let i=[],n=[];for(var o=0;o<t;o++)-1!=e.data[o].cycle&&0!=e.data[o].cycle&&n.push(e.data[o]);if(n.length>0){let e=parseInt(n[0].cycle)-0;for(o=0;o<n.length;o++){if(parseInt(n[o].cycle)-o!=e)for(;e<parseInt(n[o].cycle)-o;)console.log(o+e+" "),i.push({cycle:o+e,inserted:"yes"}),e++;-1==n[o].cycle&&0==n[o].cycle||i.push({cycle:n[o].cycle,revision:n[o].revision,routeName:n[o].title,routeID:n[o].id,inserted:"no"})}}return i},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var o=0;o<e.length;o++){let a=e[o];if(!a||!a.dataelements||"FALSE"!=a.dataelements.isLatestRevision){if("Started"==a.dataelements.routeStatus)return a;if("Not Started"==a.dataelements.routeStatus)return a;"Stopped"==a.dataelements.routeStatus?t=null==t?a:n(t,a):"Finished"==a.dataelements.routeStatus&&(i=null==i?a:n(i,a))}}return null!=t?t:i},clearTags:function(){c._cleanBIFilterProxy()},globalSubscribeForGovCRApprovalsView:function(){p.addObserver("ChgGovCRApprovalsView","Change-Maturity-Update",u.handleMaturityUpdate),a.unsubscribe(`crApprovals:${widget.id}`),a.subscribe(`crApprovals:${widget.id}`,(function(e){console.log(e),i.getDependency("applicationChannel").publish({event:"update_object_select",data:{node:model,contextID:e.contextDetails.id,contextType:e.contextDetails.isKindOfType,isNodeAdded:!1}})}))},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===u.id){let t={};t.id=u.id,t.target=u.target,t.contextDetails&&(t.contextDetails.maturity=e.valueActual),u.createApprovalsView(t)}}};return u.globalSubscribeForGovCRApprovalsView(),u})),define("DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/Controls/ComboBox","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u={createApprovalsView:function(e){this.id=e.id,this.target=e.target;var t=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=t&&null!=t&&r.mask(t),e.contextDetails&&e.contextDetails.maturity&&"In Approval"==e.contextDetails.maturity?u.getRouteContentForApprovalState(e):u.getRouteContent(e)},getRouteContent:function(e){let i=d.getGlobalVariable().tenant,n=d.getGlobalVariable().getSecurityContext();t.getRouteBasedOnContentId(e.id).then((function(t){console.log(t);var a=t.data.length,l=u.checkResponse(t.data),d=e.target;if(a>0){var c={id:l.id,renderType:"container",tenant:i,securityContext:n},p=document.getElementById("viewTaskContainerExternal"),g=document.getElementById("InitiateTaskPropertiesBody");null!=p&&p.remove(),null!=g&&g.remove(),o.init(c,d),u.checkRouteSubscribe(e);var h=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(h)}else{null!=(p=document.getElementById("viewTaskContainerExternal"))&&p.remove();var m=document.getElementById("tileViewDiv");null!=m&&m.remove();var C=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),f=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(f),f.inject(C),C.inject(d);h=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(h)}}),(function(e){return Promise.reject(e)}))},getRouteContentForApprovalState:function(e){let n=d.getGlobalVariable().tenant,a=d.getGlobalVariable().getSecurityContext();var c=i.getDependency("applicationChannel");t.getAllApprovalRouteIterations(e.id).then((function(t){console.log(t);var i=t.data.length;let d=[],p=[];var g,h=e.target;if(i>0&&(p=u.checkCycleInfo(t)),i>0&&p.length>0){var m=document.getElementById("viewTaskContainerExternal"),C=document.getElementById("InitiateTaskPropertiesBody");null!=m&&m.remove(),null!=C&&C.remove(),g=e.targetHeader,p=u.checkCycleInfo(t);let i=p.length;for(var f=0;f<i;f++)d.push(s.CHG_GOV_Approval_TaskView_Cycle+p[f].cycle);console.log(p),document.getElementsByClassName("tabContainer wux-controls-tab-container wux-controls-tab-strip")[0].appendChild(e.targetHeader);var v=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader),D=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader);if(i>1)if(p[i-1].routeID){let e={id:p[i-1].routeID,renderType:"container",tenant:n,securityContext:a};var I=new l({elementsList:d,enableSearchFlag:!1,value:s.CHG_GOV_Approval_TaskView_Cycle+p[i-1].cycle}).inject(v),w=new UWA.Element("span",{text:p[i-1].routeName+" "+p[i-1].revision}).inject(D);o.init(e,h)}else{I=new l({elementsList:d,enableSearchFlag:!1,value:s.CHG_GOV_Approval_TaskView_Cycle+p[i-1].cycle}).inject(v),w=new UWA.Element("span",{text:""}).inject(D);u.checkNoApprovalInProgress(e)}else if(p[0].routeID){let e={id:p[0].routeID,renderType:"container",tenant:n,securityContext:a};new UWA.Element("span",{text:s.CHG_GOV_Approval_TaskView_Cycle+p[0].cycle+" | "+p[0].routeName+" "+p[0].revision}).inject(v),o.init(e,h)}else new UWA.Element("span",{text:s.CHG_GOV_Approval_TaskView_Cycle+p[0].cycle}).inject(v),u.checkNoApprovalInProgress(e);i>1&&I.addEventListener("change",(function(){null!=d&&d.remove();for(var t=e.target,r=0;r<i;r++){let i=s.CHG_GOV_Approval_TaskView_Cycle+p[r].cycle;if("yes"==p[r].inserted&&i==I.value)w.textContent="",u.checkNoApprovalInProgress(e);else if(i==I.value){var l=document.getElementById("tileViewDiv");null!=l&&l.remove(),w.textContent=p[r].routeName+" "+p[r].revision;let i={id:p[r].routeID,renderType:"container",tenant:n,securityContext:a};var d=document.getElementById("viewTaskContainerExternal");null!=d&&d.remove();t=e.target;widget.routeMgmtMediator=void 0,c.publish({event:"information-panel-close",data:null}),o.init(i,t),u.checkRouteSubscribe(e)}}})),u.checkRouteSubscribe(e);var _=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(_)}else{null!=(m=document.getElementById("viewTaskContainerExternal"))&&m.remove();var b=document.getElementById("tileViewDiv");null!=b&&b.remove();var S=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});c.publish({event:"information-panel-close",data:null});var y=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(y),y.inject(S),g&&S.inject(g),S.inject(h);_=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(_)}}),(function(e){return Promise.reject(e)}))},checkNoApprovalInProgress:function(e){var t=e.target,n=e.targetHeader,o=i.getDependency("applicationChannel"),a=document.getElementById("viewTaskContainerExternal");null!=a&&a.remove();var l=document.getElementById("tileViewDiv");null!=l&&l.remove();var d=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});o.publish({event:"information-panel-close",data:null});var c=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_Cycle_TaskView_PlaceHolder}).inject(c),c.inject(d),n&&d.inject(n),d.inject(t);var p=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(p)},checkRouteSubscribe:function(o){var s=UWA.createElement("div",{id:"chg-Task-container",styles:{height:"inherit"}}),r=i.getDependency("xChangeApp"),l=i.getDependency("applicationChannel"),c=r.infoPanel.childNodes;let p=new e(s);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",(function(e){p.init(e,"taskActionMode");for(var t=0;t<c.length;t++){var i=c[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(c[t].empty(),s.inject(c[t]),c[t].style.display="block"):c[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})})),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",(function(e){p.init(e,"taskEditMode");for(var t=0;t<c.length;t++){var i=c[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(c[t].empty(),s.inject(c[t]),c[t].style.display="block"):c[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})})),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",(function(e){})),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",(function(e){})),widget.routeMgmtMediator.subscribe("task-action-on-save",(function(e){var s="";s=null==e.model.taskActionButton?e.model.taskReviewButton:e.model.taskActionButton;var r=o.id;if("Approve"===s||"Reject"===s||"Abstain"===s||"promote"===s||"demote"===s||"Complete"===s){t.getChangeOrderUserAccess(r).then((function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0]};a.publish("CO-AccessBit-Update",t),a.publish("idcard-header-update"+widget.id,t),a.publish("idcard-header-update-maturity"),n("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}));let e=i.getDependency("applicationChannel");e.publish({event:"triptych-hide-panel",data:"right"}),e.publish({event:"information-panel-close",data:null})}else"saveForLater"===s&&l.publish({event:"information-panel-close",data:null})})),widget.routeMgmtMediator.subscribe("launch-task-assignee-search",(function(e){if(console.log("launch-task-assignee-search Event"),d.getGlobalVariable().isNative){taskProperties=e.taskProperties,taskGraphModel=e.taskGraphModel,invokeFrom=e.invokeFrom,routeInfo=e.routeInfo;ChgNativeInitService.DispatchEventToWin("CHG_Search_Task_Assignee","Task_Assignee")}})),widget.routeMgmtMediator.subscribe("launch-add-attachment-search",(function(e){if(console.log("launch-add-attachment-search Event"),d.getGlobalVariable().isNative){taskProperties=e.taskProperties,taskGraphModel=e.alreadyAttachedDocs;ChgNativeInitService.DispatchEventToWin("CHG_ADD_ATTACHMENT_SEARCH","Add_Attachment_Search")}}))},checkCycleInfo:function(e){var t=e.data.length;let i=[],n=[];for(var o=0;o<t;o++)-1!=e.data[o].cycle&&0!=e.data[o].cycle&&n.push(e.data[o]);if(n.length>0){let e=parseInt(n[0].cycle)-0;for(o=0;o<n.length;o++){if(parseInt(n[o].cycle)-o!=e)for(;e<parseInt(n[o].cycle)-o;)console.log(o+e+" "),i.push({cycle:o+e,inserted:"yes"}),e++;-1==n[o].cycle&&0==n[o].cycle||i.push({cycle:n[o].cycle,revision:n[o].revision,routeName:n[o].title,routeID:n[o].id,inserted:"no"})}}return i},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var o=0;o<e.length;o++){let a=e[o];if("Started"==a.dataelements.routeStatus)return a;if("Not Started"==a.dataelements.routeStatus)return a;"Stopped"==a.dataelements.routeStatus?t=null==t?a:n(t,a):"Finished"==a.dataelements.routeStatus&&(i=null==i?a:n(i,a))}return null!=t?t:i},globalSubscribeForGovApprovalsView:function(){p.addObserver("ChgGovApprovalsView","Change-Maturity-Update",u.handleMaturityUpdate),a.unsubscribe(`coApprovals:${widget.id}`),a.subscribe(`coApprovals:${widget.id}`,(function(e){console.log(e),i.getDependency("applicationChannel").publish({event:"update_object_select",data:{node:model,contextID:e.contextDetails.id,contextType:e.contextDetails.isKindOfType,isNodeAdded:!1}})}))},clearTags:function(){c._cleanBIFilterProxy()},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===u.id){let t={};t.id=u.id,t.target=u.target,t.contextDetails.maturity=e.valueActual,u.createApprovalsView(t)}}};return u.globalSubscribeForGovApprovalsView(),u})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENORouteMgmt/Views/Form/TaskViewUtil","DS/ENORouteMgmt/Views/Loader/ChangeTaskAssigneeChooser","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/Controls/ComboBox","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENORouteMgmt/Views/Loader/InitiateDocumentChooser","DS/TreeModel/TreeNodeModel"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";let f,v,D,I;var w={createApprovalsView:function(e){this.id=e.id,this.target=e.target;var t=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=t&&null!=t&&d.mask(t),e.contextDetails&&e.contextDetails.maturity&&"In Approval"==e.contextDetails.maturity?w.getRouteContentForApprovalState(e):w.getRouteContent(e)},getRouteContent:function(e){let t=p.getGlobalVariable().tenant,i=p.getGlobalVariable().getSecurityContext();n.getRouteBasedOnContentId(e.id).then((function(n){console.log(n);var o=n.data.length,a=w.checkResponse(n.data),r=e.target;if(o>0){var c={id:a.id,renderType:"container",tenant:t,securityContext:i},p=document.getElementById("viewTaskContainerExternal"),u=document.getElementById("InitiateTaskPropertiesBody");null!=p&&p.remove(),null!=u&&u.remove(),s.init(c,r),w.checkRouteSubscribe(e);var g=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(g)}else{null!=(p=document.getElementById("viewTaskContainerExternal"))&&p.remove();var h=document.getElementById("tileViewDiv");null!=h&&h.remove();var m=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),C=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:l.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(C),C.inject(m),m.inject(r);g=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(g)}}),(function(e){return Promise.reject(e)}))},getRouteContentForApprovalState:function(e){let t=p.getGlobalVariable().tenant,i=p.getGlobalVariable().getSecurityContext();var a=o.getDependency("applicationChannel");n.getAllApprovalRouteIterations(e.id).then((function(n){console.log(n);var o=n.data.length;let r=[],p=[];var u,g=e.target;if(o>0&&(p=w.checkCycleInfo(n)),o>0&&p.length>0){var h=document.getElementById("viewTaskContainerExternal"),m=document.getElementById("InitiateTaskPropertiesBody");null!=h&&h.remove(),null!=m&&m.remove(),u=e.targetHeader,p=w.checkCycleInfo(n);let o=p.length;for(var C=0;C<o;C++)r.push(l.CHG_GOV_Approval_TaskView_Cycle+p[C].cycle);console.log(p),document.getElementsByClassName("tabContainer wux-controls-tab-container wux-controls-tab-strip")[0].appendChild(e.targetHeader);var f=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader),v=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader);if(o>1)if(p[o-1].routeID){let e={id:p[o-1].routeID,renderType:"container",tenant:t,securityContext:i};var D=new c({elementsList:r,enableSearchFlag:!1,value:l.CHG_GOV_Approval_TaskView_Cycle+p[o-1].cycle}).inject(f),I=new UWA.Element("span",{text:p[o-1].routeName+" "+p[o-1].revision}).inject(v);s.init(e,g)}else{D=new c({elementsList:r,enableSearchFlag:!1,value:l.CHG_GOV_Approval_TaskView_Cycle+p[o-1].cycle}).inject(f),I=new UWA.Element("span",{text:""}).inject(v);w.checkNoApprovalInProgress(e)}else if(p[0].routeID){let e={id:p[0].routeID,renderType:"container",tenant:t,securityContext:i};new UWA.Element("span",{text:l.CHG_GOV_Approval_TaskView_Cycle+p[0].cycle+" | "+p[0].routeName+" "+p[0].revision}).inject(f),s.init(e,g)}else new UWA.Element("span",{text:l.CHG_GOV_Approval_TaskView_Cycle+p[0].cycle}).inject(f),w.checkNoApprovalInProgress(e);o>1&&D.addEventListener("change",(function(){null!=c&&c.remove();for(var n=e.target,r=0;r<o;r++){let o=l.CHG_GOV_Approval_TaskView_Cycle+p[r].cycle;if("yes"==p[r].inserted&&o==D.value)I.textContent="",w.checkNoApprovalInProgress(e);else if(o==D.value){var d=document.getElementById("tileViewDiv");null!=d&&d.remove(),I.textContent=p[r].routeName+" "+p[r].revision;let o={id:p[r].routeID,renderType:"container",tenant:t,securityContext:i};var c=document.getElementById("viewTaskContainerExternal");null!=c&&c.remove();n=e.target;widget.routeMgmtMediator=void 0,a.publish({event:"information-panel-close",data:null}),s.init(o,n),w.checkRouteSubscribe(e)}}})),w.checkRouteSubscribe(e);var _=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(_)}else{null!=(h=document.getElementById("viewTaskContainerExternal"))&&h.remove();var b=document.getElementById("tileViewDiv");null!=b&&b.remove();var S=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});a.publish({event:"information-panel-close",data:null});var y=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:l.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(y),y.inject(S),u&&S.inject(u),S.inject(g);_=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(_)}}),(function(e){return Promise.reject(e)}))},checkNoApprovalInProgress:function(e){var t=e.target,i=e.targetHeader,n=o.getDependency("applicationChannel"),a=document.getElementById("viewTaskContainerExternal");null!=a&&a.remove();var s=document.getElementById("tileViewDiv");null!=s&&s.remove();var r=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});n.publish({event:"information-panel-close",data:null});var c=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:l.CHG_GOV_Approval_Cycle_TaskView_PlaceHolder}).inject(c),c.inject(r),i&&r.inject(i),r.inject(t);var p=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(p)},checkRouteSubscribe:function(t){var i=UWA.createElement("div",{id:"chg-Task-container",styles:{height:"inherit"}}),s=o.getDependency("xChangeApp"),l=o.getDependency("applicationChannel"),d=s.infoPanel.childNodes;let c=new e(i);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",(function(e){c.init(e,"taskActionMode");for(var t=0;t<d.length;t++){var n=d[t].className;UWA.is(n)&&"secondmainContainer-sidepanel"===n?(d[t].empty(),i.inject(d[t]),d[t].style.display="block"):d[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})})),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",(function(e){c.init(e,"taskEditMode");for(var t=0;t<d.length;t++){var n=d[t].className;UWA.is(n)&&"secondmainContainer-sidepanel"===n?(d[t].empty(),i.inject(d[t]),d[t].style.display="block"):d[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})})),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",(function(e){l.publish({event:"information-panel-close",data:null})})),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",(function(e){})),widget.routeMgmtMediator.subscribe("task-action-on-save",(function(e){var i="";i=null==e.model.taskActionButton?e.taskActionButtonsValue:e.model.taskActionButton;var s=t.id;if("Approve"===i||"Reject"===i||"Abstain"===i||"promote"===i||"demote"===i||"Complete"===i){n.getChangeActionUserAccess(s).then((function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0]};r.publish("CO-AccessBit-Update",t),r.publish("idcard-header-update"+widget.id,t),r.publish("idcard-header-update-maturity"),a("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}));let e=o.getDependency("applicationChannel");e.publish({event:"triptych-hide-panel",data:"right"}),e.publish({event:"information-panel-close",data:null})}})),widget.routeMgmtMediator.subscribe("launch-task-assignee-search",(function(e){if(console.log("launch-task-assignee-search Event"),p.getGlobalVariable().isNative){f=e.taskProperties,v=e.taskGraphModel,I=e.invokeFrom,D=e.routeInfo;g.DispatchEventToWin("CHG_Search_Task_Assignee","Task_Assignee")}})),widget.routeMgmtMediator.subscribe("launch-add-attachment-search",(function(e){if(console.log("launch-add-attachment-search Event"),p.getGlobalVariable().isNative){f=e.taskProperties,v=e.alreadyAttachedDocs;g.DispatchEventToWin("CHG_ADD_ATTACHMENT_SEARCH","Add_Attachment_Search")}}))},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var o=0;o<e.length;o++){let a=e[o];if("Started"==a.dataelements.routeStatus)return a;if("Not Started"==a.dataelements.routeStatus)return a;"Stopped"==a.dataelements.routeStatus?t=null==t?a:n(t,a):"Finished"==a.dataelements.routeStatus&&(i=null==i?a:n(i,a))}return null!=t?t:i},checkCycleInfo:function(e){var t=e.data.length;let i=[],n=[];for(var o=0;o<t;o++)-1!=e.data[o].cycle&&0!=e.data[o].cycle&&n.push(e.data[o]);if(n.length>0){let e=parseInt(n[0].cycle)-0;for(o=0;o<n.length;o++){if(parseInt(n[o].cycle)-o!=e)for(;e<parseInt(n[o].cycle)-o;)console.log(o+e+" "),i.push({cycle:o+e,inserted:"yes"}),e++;-1==n[o].cycle&&0==n[o].cycle||i.push({cycle:n[o].cycle,revision:n[o].revision,routeName:n[o].title,routeID:n[o].id,inserted:"no"})}}return i},clearTags:function(){u._cleanBIFilterProxy()},globalSubscribeForGovCAApprovalsView:function(){h.addObserver("ChgCAApprovalsView","Change-Maturity-Update",w.handleMaturityUpdate),r.unsubscribe(`caApprovals:${widget.id}`),r.subscribe(`caApprovals:${widget.id}`,(function(e){console.log(e),o.getDependency("applicationChannel").publish({event:"update_object_select",data:{node:model,contextID:e.contextDetails.id,contextType:e.contextDetails.isKindOfType,isNodeAdded:!1}})}))},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===w.id){let t={};t.id=w.id,t.target=w.target,t.contextDetails&&(t.contextDetails.maturity=e.valueActual),w.createApprovalsView(t)}},OnSearchComplete:function(e){let o=e.split(","),a=[];a.push(o[0]),n.getObjectInfo(a,["name","type","identifier","label","title"]).then((function(e){let n=e[0],o=[],a={};a="Person"==n.type?{id:n.id,"ds6w:label":n.dataelements.fullname,"ds6w:identifier":n.dataelements.name,"ds6w:type_value":n.type,"ds6w:type":n.type}:{id:n.id,"ds6w:label":n.dataelements.title,"ds6w:identifier":n.dataelements.name,"ds6w:type_value":n.type,"ds6w:type":n.type},o.push(a),"form"==I?t.populateAssigneeField(f,v,D,o):"dialog"==I&&i.populateAssigneeField(f,o)}))},OnSearchCompleteForAttachment:function(e){let t=e.split(","),i=[],o=[];o.push(t),n.getObjectInfo(o,["name","type","identifier","label","title"]).then((function(e){for(var n=0;n<t.length;n++){let t=e[n],o={};o={id:t.id,"ds6w:label":t.dataelements.title,"ds6w:identifier":t.dataelements.name,"ds6w:type_value":t.type,"ds6w:type":t.type},i.push(o)}m.populateAddExisiting(f,i)}))}};return w.globalSubscribeForGovCAApprovalsView(),w})),define("DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/WebappsUtils/WebappsUtils","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS"],(function(e,t,i,n,o,a,s,r,l,d,c){"use strict";var p={create:function(e,t){var i=this;i.id=e.id,i.selectedModel={},i.nodeModel=e.nodeModel;for(var n=s.getGlobalVariable(),o=n.referentialsSearchForbiddenType.split(","),a=(n.referentialsSearchType.split(","),n.tenantMappings),r=[],l=0;l<a.length;l++)n.tenant==a[l].platformId&&(r=a[l]);var d={parentObject:{parentId:e.id},connectorOptions:{fetchSecurityContext:function(){return n.getSecurityContext()},platformUrls:r},supportedTypes:{excludedTypes:o,includedTypes:["*"]},isPopup:!1};"Change Action"==e.parentType&&(d.parentObject.relationName="Related Item"),d.readonly=t,require(["DS/ENOXAttachmentsUX/AttachmentsPane"],(function(t){i.attachmentsPane=new t(d),i.modelEvents=i.nodeModel&&"InvestigationRequest"==i.nodeModel.isKindOfType?e.channel:i.attachmentsPane.modelEvents,i.subscribeToEvents(),i.attachmentsPane.inject(e.target)}))},subscribeToEvents:function(){var e=this;e.attachmentsPane.modelEvents.subscribe({event:"attach-attachment-complete"},(function(t){console.log("attached.....!");var i=t.document.dataelements;i.id=t.document.id;var n={attached:[]};n.attached.push(i);t={id:e.id,referentials:n,operation:"CONNECT"};a.publish("co-update-attachment-complete",t)})),e.attachmentsPane.modelEvents.subscribe({event:"upload-attachment-complete"},(function(t){console.log("uploaded.....!");var i={};let n=t.parentObject.parentId;e.id=n,i.attached=[];for(var o=0;o<t.documents.length;o++){var s=t.documents[o].dataelements;s.id=t.documents[o].id,i.attached.push(s)}t={id:e.id,referentials:i,operation:"CONNECT"};a.publish("co-update-attachment-complete",t)})),e.attachmentsPane.modelEvents.subscribe({event:"detach-attachment-complete"},(function(t){console.log("detached.....!");var i=t.id,n={detached:[]};n.detached.push(i);t={id:e.id,referentials:n,operation:"DISCONNECT"};a.publish("co-update-attachment-complete",t)})),s.getGlobalVariable().is3DSpace&&e.modelEvents.subscribe({event:"context-menu-requested"},(function(t){if(console.log("context-menu-requested.....!"),t.contextMenu.getItem("Relations")){t.contextMenu.removeItem("Relations");var i={type:"PushItem",title:"Relations",text:"Relations",id:"Relations",fonticon:"object-related",handler:function(t){var i=e.attachmentsPane.getSelection();l.openRelationalExplorer(i)}};t.contextMenu.addItem(i)}})),s.getGlobalVariable().is3DSpace&&e.modelEvents.subscribe({event:"user-clicks-attach"},(function(t){const i="wdg_"+(new Date).getTime();var n="../common/emxFullSearch.jsp?field=TYPES!="+s.getGlobalVariable().referentialsSearchForbiddenType+"&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+i;showChooser(n,850,630);var o=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(i)>-1){let t=JSON.parse(localStorage.searchedObjectDetails);delete t.uniqueKey;let i=[];Object.values(t).forEach((e=>{i.push(e[0])})),e.attachmentsPane.attachAttachments(i),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",o)}else console.log("inside EVENT")};window.addEventListener("storage",o)})),s.getGlobalVariable().isNative&&(e.modelEvents.subscribe({event:"user-clicks-attach"},(function(e){r.DispatchEventToWin("CHG_Add_Attachment","Attachment")})),e.modelEvents.subscribe({event:"context-menu-requested"},(function(e){var t=e.data[0].id;p.contextMenu=e.contextMenu,r.DispatchEventToWin("Referential_ContextMenu",t),console.log("context-menu-requested.....!");let i=e.contextMenu.items.filter((e=>"Open With"===e.text));i.length>0&&e.contextMenu.removeItem(i[0].name),r.DispatchEventToWin("Attachment_ContextMenu",t)}))),e.attachmentsPane.modelEvents.subscribe({event:"selection-add"},(function(t){t.getTreeDocument().getSelectedNodes()&&t.getTreeDocument().getSelectedNodes().length>0&&t.getTreeDocument().getSelectedNodes().forEach((e=>{e.options.grid.id||(e.options.grid.id=e.options.data.id)})),e.selectedModel=t,e.modelEvents.publish({event:"update_object_select",data:{node:t,contextID:t.options.data.id,contextType:t.options.data.type,isNodeAdded:!0}})})),e.attachmentsPane.modelEvents.subscribe({event:"selection-remove"},(function(t){t.getTreeDocument().getSelectedNodes()&&t.getTreeDocument().getSelectedNodes().length>0?(t.getTreeDocument().getSelectedNodes().forEach((e=>{e.options.grid.id||(e.options.grid.id=e.options.data.id)})),e.selectedModel=t,e.modelEvents.publish({event:"update_object_select",data:{node:t,contextID:t.options.data.id,contextType:t.options.data.type,isNodeAdded:!0}})):e.nodeModel?(e.selectedModel=e.nodeModel,e.modelEvents.publish({event:"update_object_select",data:{isNodeAdded:!1}})):(e.selectedModel=e.nodeModel,e.modelEvents.publish({event:"update_object_select",data:{node:t,contextID:t.options.data.id,contextType:t.options.data.type,isNodeAdded:!1}}))})),a.unsubscribe(`irAttachments:${widget.id}`),a.subscribe(`irAttachments:${widget.id}`,(function(){e.selectedModel?e.modelEvents.publish({event:"update_object_select",data:{node:e.selectedModel,contextID:e.selectedModel.options?e.selectedModel.options.data.id:e.selectedModel.id,contextType:e.selectedModel.options?e.selectedModel.options.data.type:e.selectedModel.isKindOfType,isNodeAdded:!1}}):e.modelEvents.publish({event:"update_object_select",data:{node:e.nodeModel,contextID:e.nodeModel.id,contextType:e.nodeModel.isKindOfType,isNodeAdded:!1}})}))},OnSearchComplete:function(e){for(var t=e.split(","),i=[],n=0;n<t.length;n++)i.push(t[n]);p.attachmentsPane.attachAttachments(i)},DisplayContextMenu:function(e){console.log("ChgAttachmentView: DisplayContextMenu.....!");for(var t=0;t<e.length;t++)p.contextMenu.addItem(e[t])},getExploreWithMenu:function(e,t){var i=[];return i.push({type:"PushItem",title:c.ECM_CA_Command_ExploreSys,text:c.ECM_CA_Command_ExploreSys,id:c.ECM_CA_Command_ExploreSys,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_ExploreInRFLPNavigator.png"),handler:function(e){var i=t.objectID;r.DispatchEventToWin("ExploreInRFLP",i)}}),i.push({type:"PushItem",title:c.ECM_CA_Command_ExploreMfg,text:c.ECM_CA_Command_ExploreMfg,id:c.ECM_CA_Command_ExploreMfg,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToPPRNavigatorWithParent.png"),handler:function(e){var i=t.objectID;r.DispatchEventToWin("ExploreInPPR",i)}}),i.push({type:"PushItem",title:c.ECM_CA_Command_ExploreParents,text:c.ECM_CA_Command_ExploreParents,id:c.ECM_CA_Command_ExploreParents,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_GetParents.png"),handler:function(e){var i=t.objectID;r.DispatchEventToWin("ExploreParents",i)}}),i.push({type:"PushItem",title:c.ECM_CA_Command_ExploreMSB,text:c.ECM_CA_Command_ExploreMSB,id:c.ECM_CA_Command_ExploreMSB,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_SendToPPRNavigatorWithParent.png"),handler:function(e){var i=t.instanceID?t.instanceID:t.objectID;r.DispatchEventToWin("ExploreInMSB",i)}}),i.push({type:"PushItem",title:c.ECM_CA_Command_ExploreContext,text:c.ECM_CA_Command_ExploreContext,id:c.ECM_CA_Command_ExploreContext,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_FindInContext.png"),handler:function(e){var i=t.instanceID?t.instanceID:t.objectID;r.DispatchEventToWin("ExploreinContext",i)}}),{type:"PushItem",title:c.ECM_CA_Command_ExploreWith,text:c.ECM_CA_Command_ExploreWith,id:c.ECM_CA_Command_ExploreWith,submenu:i}},getOpenMenu:function(e,t){return{type:"PushItem",title:c.ECM_CA_Command_Open,text:c.ECM_CA_Command_Open,id:c.ECM_CA_Command_Open,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenDB.png"),handler:function(e){var i=t.objectID;r.DispatchEventToWin("Open",i)}}},getOpenAdvMenu:function(e,t){return{type:"PushItem",title:c.ECM_CA_Command_OpenAdv,text:c.ECM_CA_Command_OpenAdv,id:c.ECM_CA_Command_OpenAdv,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenAdvDB.png"),handler:function(e){var i=t.objectID;r.DispatchEventToWin("OpenAdv",i)}}},getOpenROMenu:function(e,t){return{type:"PushItem",title:c.ECM_CA_Command_OpenRO,text:c.ECM_CA_Command_OpenRO,id:c.ECM_CA_Command_OpenRO,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenInReadOnly.png"),handler:function(e){var i=t.objectID;r.DispatchEventToWin("OpenReadOnly",i)}}},getOpenCAMenu:function(e,t){return{type:"PushItem",title:c.ECM_CA_Command_OpenCA,text:c.ECM_CA_Command_OpenCA,id:c.ECM_CA_Command_OpenCA,icon:d.getWebappsAssetUrl("ENOChangeActionUX","images/I_OpenDB.png"),handler:function(e){var i=t.objectID;r.DispatchEventToWin("OpenCA",i)}}}};return p})),define("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil",["DS/ENOChgServices/scripts/services/ChgDataService","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/dispositions/chgIRDispositionAffectedItemsModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionAffectedItemsView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionAffectedItemsUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/Windows/Dialog","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";let f=Object.create(null);return f.removeDisposition=function(o,a,s,r){return{type:"PushItem",title:i.CHG_GOV_Investigation_Request_Remove_Disposition,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(i){n("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");for(var r=[],l=0;l<a.length;l++)r.push({id:a[l]});if("ItemView"==s.context)var d=s.cellInfos.nodeModel.options.grid.id;e.removeDisposition(o,r).then((async function(e){if(e&&e.data&&e.data[0]&&"RemovedDispositionSuccessful"==e.data[0].id){let a=r[0].id;var i="removeDisposition";if(e.data[0].doSourceDisposition){let n=await f.enrichDispositionInfo(e.data[0].doSourceDisposition);t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:o,affectedItemId:a,dispInfo:n,action:i}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:o,affectedItemId:a,dispInfo:n,action:i}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{investigationRequestId:d,action:i}),i="update",t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:o,dispInfo:n,action:i})}else t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:o,affectedItemId:a,action:i}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:o,affectedItemId:a,action:i}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{investigationRequestId:d,action:i}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:o,action:i});let s=n("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout");s&&s.treeDocument&&s.treeDocument.getAllDescendants().length<2&&require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsTileViewLayout"],(function(e){e.showEmptyView()}))}else console.log("some error is there changes")}))}}}},f.removeResolvedBy=function(o){return{type:"PushItem",title:i.CHG_GOV_Investigation_Request_Remove_ResolvedBy,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(i){n("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");for(var a=[],s=0;s<o.resolvedByIds.length;s++)a.push({id:o.resolvedByIds[s]});var r=o.node.options.grid.dispositionInformation[0].dispostionId;e.removeResolvedBy(r,a).then((async function(e){if("RemovedResolvedBySuccessful"==e.data[0].id){let i=await f.enrichDispositionInfo(e.data[0].doTargetDisposition),n="update";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:i,action:n}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:i,action:n}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:i,action:n}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:i,action:n})}else console.log("some error is there in resolved by")}))}}}},f.reviseDisposition=function(n){return{type:"PushItem",title:i.CHG_GOV_Investigation_Request_Revise_Disposition,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-line-add"},action:{callback:function(o){var a=n.node.options.grid.dispositionInformation[0].dispostionId;e.reviseDisposition(a,[]).then((async function(e){let n=await f.enrichDispositionInfo(e.data[0].doTargetDisposition),o="update";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:n,action:o}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:n,action:o}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:n,action:o}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:n,action:o}),e&&e.data&&e.data[0]&&e.data[0].doTargetDisposition&&e.data[0].doTargetDisposition[0]&&e.data[0].doTargetDisposition[0].dispositionName&&C.success(i.CHG_GOV_Investigation_Request_Revision_Created+e.data[0].doTargetDisposition[0].dispositionName+i.CHG_GOV_Investigation_Request_Revision_Creation_Done)}))}}}},f.replaceDisposition=function(n,o,a,s){return{type:"PushItem",title:i.CHG_GOV_Investigation_Request_ReplaceByNew_Disposition,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},action:{callback:function(i){for(var s=[],r=0;r<a.length;r++)s.push({id:a[r],dispositionId:o});e.replaceDisposition(n,s).then((async function(e){let i="",o=s[0].id,a=s[0].dispositionId,r=await f.enrichDispositionInfo(e.data[0].doTargetDisposition);if(i="createDisposition",t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{investigationRequestId:n,affectedItemId:o,dispInfo:r,action:i}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{investigationRequestId:n,dispInfo:r,action:i}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{affectedItemId:o,dispInfo:r,action:i}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{investigationRequestId:n,dispInfo:r,action:i}),e.data[0].doSourceDisposition){let n=await f.enrichDispositionInfo(e.data[0].doSourceDisposition);i="update",t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:n,action:i})}else i="removeDisposition",t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:a,action:i})}))}}}},f.replaceByExistingDisposition=function(e,t){return{type:"PushItem",title:i.CHG_GOV_Investigation_Request_ReplaceByExisting_Disposition,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-down-right"},action:{callback:function(i){var n={grid:t.cellInfos.nodeModel.options.grid,investigationRequestId:e,affectedItemId:t.cellInfos.nodeModel.options.productID,functionality:"ReplaceByExistingDisposition",primaryImpactedBy:t.cellInfos.nodeModel.getParent().options.grid.id};f.addExistingDispositionHandler(n)}}}},f.createDisposition=async function(i,o){n("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");console.log("Into subscribe");var a=[],s={};i&&i.productID?s.id=i.productID:s.id=i.model.id,a[0]=s,n("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout").treeDocument.getAllDescendants().length<1&&require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsTileViewLayout"],(function(e){e.hideEmptyView()}));try{e.createDispositionFromIR(i.InvestigationRequestId,a).then((async function(e){if(e.data[0].doTargetDisposition){let n=await f.enrichDispositionInfo(e.data[0].doTargetDisposition),o="createDisposition",a=e.data[0].AffectedItemId,s=i.InvestigationRequestId;t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{investigationRequestId:s,affectedItemId:a,dispInfo:n,action:o}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{investigationRequestId:s,dispInfo:n,action:o}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{investigationRequestId:s,dispInfo:n,action:o}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{affectedItemId:a,dispInfo:n,action:o})}}))}catch(e){console.error("Error:",e)}},f.createDispositionThroughVerticalAssessment=function(i){let n=i.InvestigationRequestId;var o=[],a={parentImpactedBy:i.parentImpactedById,verticalAssessmentImpactedBy:i.verticalAssessmentImpactedBy?i.verticalAssessmentImpactedBy:i.model.id,verticalAssessmentObjType:i.verticalAssessmentObjType?i.verticalAssessmentObjType:i.model.type,verticalAssessmentObjService:"3DSpace"};o[0]=a;try{e.createDispositionThroughVerticalAssessment(n,o).then((async function(e){if(e.data[0].doTargetDisposition){let a=await f.enrichDispositionInfo(e.data[0].doTargetDisposition),s="createDisposition",r=o[0].verticalAssessmentImpactedBy;t.publish("updateDispositionGrid"+(widget?widget.id:""),{investigationRequestId:n,dispInfo:a,action:s}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{investigationRequestId:n,dispInfo:a,action:s}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{affectedItemId:r,dispInfo:a,action:s}),s="createUpdateAffectedUsage";let l={affectedItemId:r,nodeModel:i.model,investigationRequestId:n};t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{affectedUsageInfo:l,dispInfo:a,action:s})}}))}catch(e){console.error("Error:",e)}},f.getDispositionTransferMenu=function(e){return{type:"PushItem",title:i.CHG_GOV_Investigation_Request_Move_Disposition,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid.dispositionInformation);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialogForDisposition(n)}))}}}},f.changeDispositionType=async function(i){const n=i.nodeModel.options.grid,o=n.dispositionInformation;if(o&&o[0]&&o[0].dispostionId){const i=n.dispositionType,a=o[0].dispostionId,s=[{dispositionType:i}];try{e.changeDispositionType(a,s).then((async function(e){if(e.data&&e.data[0]&&e.data[0].doTargetDisposition){let i=await f.enrichDispositionInfo(e.data[0].doTargetDisposition),n="update";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:i,action:n}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:i,action:n}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:i,action:n}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:a,dispInfo:i,action:n})}}))}catch(e){console.error("Error changing disposition type:",e)}}else i.nodeModel.updateOptions({grid:{dispositionType:void 0}})},f.createResolvedByInDispositionIR=function(e){var t={isClickProcessing:!0};console.log("launchCreateChangeActionDialog ............................");let n={context:{service:"3DSpace",tenant:a.getGlobalVariable().tenant,header:{SecurityContext:a.getGlobalVariable().getSecurityContext()}},labelTopBar:i.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferredType:"Change Action",select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:async function(t){f.addAsResolvedByInDispositionProcessing(t,e)},onFailure:function(e){t&&(t.isClickProcessing=!1),console.log("onFailure..............."+e)},onCancel:function(e){t&&(t.isClickProcessing=!1)}}};(new o).CreateNew(n)},f.addAsResolvedByInDispositionProcessing=async function(e,i){n("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");var o={data:[]};o.data.push({id:e.result[0].identifier,type:e.result[0].type,service:a.getGlobalVariable().serviceName});let s=i.node,r=s.options.grid.dispositionInformation[0].dispostionId;const l=await f.callResolvedByInDisposition(o,s,r);let d=await f.enrichDispositionInfo(l.data[0].doTargetDisposition),c="update";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:d,action:c}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:d,action:c}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:d,action:c}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:d,action:c})},f.callResolvedByInDisposition=async function(t,i,n){let o;n?o=n:i.getSelectedNodes()[0].options.grid.dispositionInformation[0].dispostionId&&(o=i.getSelectedNodes()[0].options.grid.dispositionInformation[0].dispostionId);const a=[{id:t.data[0].id,service:"3DSpace",type:t.data[0].type}];return await e.createResolvedByFromIR(o,a)},f.addExistingResolvedByHandler=function(e){let t=n("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices");console.log("Handler for adding existing resolved by "),f.options=e||void 0;let i={condition:"addExistingAffectedItem",extendedQuery:'AND NOT [ds6w:status]:"Cancelled.Cancelled" AND NOT [ds6w:onHold]:"TRUE"'};const o=t.activateSearch(!1);a.getGlobalVariable().is3DSpace&&o.socket.subscribeServer("SearchComServer",getTopWindow()),t.search("Add Existing ResolvedBy","Change Action,Change Order,Change Request,Task",f.OnSearchResolvedByComplete,"AddExistingResolvedBy",o,void 0,void 0,i)},f.OnSearchResolvedByComplete=async function(e){n("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");let i={data:[{id:e[0][0],type:e[0][2],service:e[0][7]}]},o=n("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"),a=o.options.node,s=a.options.grid.dispositionInformation[0].dispostionId;const r=await o.callResolvedByInDisposition(i,a,s);let l=await o.enrichDispositionInfo(r.data[0].doTargetDisposition),d="update";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:s,dispInfo:l,action:d}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:s,dispInfo:l,action:d}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:s,dispInfo:l,action:d}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:s,dispInfo:l,action:d})},f.transferDisposition=async function(i){let n=[];n.push({dispositionIds:i.dispositionIdsArray});let o=await e.getDispositionInfo(i.contextId,n),a=await f.enrichDispositionInfo(o.data[0].doTargetDisposition),s=a[0].dispostionId,r="update";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:s,dispInfo:a,action:r}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:s,dispInfo:a,action:r}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:s,dispInfo:a,action:r}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:s,dispInfo:a,action:r})},f.updateDispositionInfo=async function(e,t){let i=n("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");var o="",s="";let r=null;var l=t[0];e.options.grid.dispositionInformation=[],e.options.grid.dispositionInformation=t;var d=l.dispositionType;if(d&&(r="DOCUMENT"==d?"documentKey":"NO_FIX"==d?"notFixKey":"FIX"==d?"fixKey":"NOT_IMPACTED"==d?"notImpactedTypeKey":"noneKey"),l.ResolvedByInformation&&l.ResolvedByInformation.length>0){let e=l.ResolvedByInformation[0];o=e.resolvedByName,s=e.resolvedByIcon}l.ApprovalStatus&&0===Object.keys(l.ApprovalStatus).length&&(l.ApprovalStatus.func=void 0,l.ApprovalStatus.icon=void 0,l.ApprovalStatus.label=void 0,l.ApprovalStatus.tooltip=void 0);var c={grid:{dispositionName:"Disposition"!=e.options.grid.policy?i.dispositionNameMethod(l.dispostionIcon,l.dispositionName):i.dispositionNameMethodWOMenu(l.dispostionIcon,l.dispositionName),dispositionRevision:l.dispositionRevision,dispositionType:r,dispositionOwner:l.dispositionOwnerFullName,dispositionMaturity:l.dispositionCurrentStateNLS,approvers:l.approvers&&l.approvers.length>0?i.addApproversUserIconMethod(l.approvers):"true"==a.getGlobalVariable().isFullLicence&&"true"==l.dispositionAccessBits[0]["Manage Approver"]?i.addApproversDefaultMethod():"",ApprovalStatus:l.ApprovalStatus,approvalStatusModel:l.approvalStatusModel,dispositionResolvedBy:""!=o?i.resolvedByNameMethod("",o,s):"true"==a.getGlobalVariable().isFullLicence&&"true"==l.dispositionAccessBits[0]["Manage Resolved By"]?i.resolvedByDefaultForDispostion():"",affectedItemsLabel:l.AffectedItemInformation&&l.AffectedItemInformation.length>0?i.getAffectedItemsMethod(l):i.getDefaultAffectedItemsMethod(),AffectedItemInformation:"Disposition"==e.options.grid.policy?l.AffectedItemInformation:[]}};e.updateOptions(c)},f.enrichDispositionInfo=async function(e){for(var t={data:e},i=await l.getColumnApprovalStatusValue(s.createPayloadApprovalStatusValue(t)),n=0;n<e.length;n++){let t="",l="";var o=[],a=[],r=e[n];if(r.policy=r.dispositionPolicy,i&&i[r.dispostionId]&&(t=i[r.dispostionId].approvalStatus,l=i[r.dispostionId].approvalStatusModel),r.ApprovalStatus=t,r.approvalStatusModel=l,r.resolvedByInformation&&r.resolvedByInformation[0]&&r.resolvedByInformation[0].indexResolvedBy&&r.resolvedByInformation[0].indexResolvedBy.length>0)r.resolvedByInformation[0].indexResolvedBy.map((e=>{a.push(e)}));else if(r.resolvedByInformation&&r.resolvedByInformation[0]&&r.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&r.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy.length>0){let e=await s.resolvedByInformationForCrossServiceAndRecents(r.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy);r.resolvedByInformation=[],r.resolvedByInformation.push({non3DSpaceNonIndexedDataForResolvedBy:e}),e.map((e=>{a.push(e)}))}if(r.ResolvedByInformation=a,r.AffectedItemInformation&&r.AffectedItemInformation[0]&&r.AffectedItemInformation[0].indexAffectedItem&&r.AffectedItemInformation[0].indexAffectedItem.length>0)r.AffectedItemInformation[0].indexAffectedItem.map((e=>{o.push(e)}));else if(r.AffectedItemInformation&&r.AffectedItemInformation[0]&&r.AffectedItemInformation[0].non3DSpaceNonIndexedAffectedItem&&r.AffectedItemInformation[0].non3DSpaceNonIndexedAffectedItem.length>0){(await s.affectedItemsInformationInformationForCrossServiceAndRecents(r.AffectedItemInformation[0].non3DSpaceNonIndexedAffectedItem)).map((e=>{o.push(e)}))}r.AffectedItemInformation=o}return e},f.displayAffectedDGV=async function(e,t){var o=new d;o.createTreeDocument();try{var a={data:e.AffectedItemInformation},r=await s.processIRAffectedItems(a),l=new UWA.Element("div",{styles:{height:"100%"}}),u=(new g({title:i.CHG_GOV_Home_Tab_AffectedItems,content:l,height:360,width:550,resizableFlag:!0,modalFlag:!1,identifier:"WebUX_PANEL_ECM_ITEMS"}),{target:l,proposedParam:{id:e.id,type:i.CHG_GOV_Disposition_Type,proposedOperation:"none",removeProposedAccess:"false"}}),h=new c(u);h.render(),h.prepareUpdateView(),o.updateTreeDocument(r),h.setTreeDocument(o.getTreeDocument()),0===o.getTreeDocument().getAllDescendants().length?h.updateDGVForEmptyView():h.updateDGVForNonEmptyView();var m=s.getDefaultFilter(p.getColumns());o.getTreeDocument().setFilterModel(m),h.pushUpdateView(),n("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").hideLoader(t,h.loader)}catch(e){console.error(e),C.error(i.CHG_GOV_GET_RESOLUTION_FAIL),n("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").hideLoader(t,h.loader)}},f.getManageApprovers=function(e){return{id:"ManageApprovers",type:"PushItem",title:i.CHG_GOV_Disposition_ManageApprovers,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-user-pencil"},action:{callback:function(t){n("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout").addApproverHandler(e)}}}},f.dragAndDropResolvedBy=async function(e){if(UWA.is(e.data)&&""!=e.data){var i=JSON.parse(e.data);let s=e.node;var n=s.options.grid.dispositionInformation[0].dispostionId,o={data:[]};if("resolvedByNotPresent"==i.data.items[0].resolvedByInformation)return;if(i.data.items[0].resolvedByInformation){var a=i.data.items[0].resolvedByInformation;if(a[0]&&a[0].indexResolvedBy&&a[0].indexResolvedBy[0])o.data.push({id:a[0].indexResolvedBy[0].resolvedById,type:a[0].indexResolvedBy[0].resolvedByType,service:i.data.items[0].serviceId});else{if(!(a[0]&&a[0].non3DSpaceNonIndexedDataForResolvedBy&&a[0].non3DSpaceNonIndexedDataForResolvedBy[0]))return;o.data.push({id:a[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById,type:a[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedByType,service:i.data.items[0].serviceId})}}else o.data.push({id:i.data.items[0].objectId,type:i.data.items[0].objectType,service:i.data.items[0].serviceId});const r=await f.callResolvedByInDisposition(o,s,n);let l=await f.enrichDispositionInfo(r.data[0].doTargetDisposition),d="update";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:l,action:d}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:l,action:d}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:l,action:d}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:l,action:d})}},f.addExistingDispositionHandler=function(e){const t=m.activateSearch(!1);a.getGlobalVariable().is3DSpace&&t.socket.subscribeServer("SearchComServer",getTopWindow()),m.search("Add Existing Disposition","Disposition",f.OnSearchAddDispositionComplete.bind(this,e),"AddExistingDisposition",t,void 0,void 0,{condition:"AddExistingDisposition",extendedQuery:' AND ((([ds6w:status]:"Disposition.Open") OR ([ds6w:status]:"Disposition.In Work")) AND (([ds6w:isLastrevision]:"true")))'})},f.OnSearchAddDispositionComplete=async function(i,n){let o=i.affectedItemId?i.affectedItemId:i.grid.id,a=i.investigationRequestId,s=i.grid.isAffectedUsages;var r=[];1!=i.grid.isAffectedUsages&&"true"!=i.grid.isAffectedUsages||"ManageScope"!=i.context?r.push({affectedItemId:o,sourceDispositionId:i.grid.dispositionInformation&&i.grid.dispositionInformation[0]?i.grid.dispositionInformation[0].dispostionId:"",targetDispositionId:n[0][0],functionality:i.functionality}):r.push({affectedItemId:o,affectedItemType:i.grid.type,affectedItemService:"3DSpace",sourceDispositionId:i.grid.dispositionInformation&&i.grid.dispositionInformation[0]?i.grid.dispositionInformation[0].dispostionId:"",targetDispositionId:n[0][0],functionality:i.functionality,isAffectedUsages:i.grid.isAffectedUsages,primaryImpactedBy:i.primaryImpactedBy});let l=await e.updateDisposition(a,r);if(!(l.data&&l.data[0]&&l.data[0].doTargetDisposition&&l.data[0].doTargetDisposition[0]&&l.data[0].doTargetDisposition[0].dispostionId))return;let d=await f.enrichDispositionInfo(l.data[0].doTargetDisposition),c=i.grid.dispositionInformation&&i.grid.dispositionInformation[0]?i.grid.dispositionInformation[0].dispostionId:"",p=l.data[0].doTargetDisposition[0].dispostionId?l.data[0].doTargetDisposition[0].dispostionId:l.data[0].doTargetDisposition[0].dispositionInformation.dispostionId;if(1!=s&&"true"!=s||"ManageScope"!=i.context){let e="replaceDisposition";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{affectedItemId:o,investigationRequestId:a,dispInfo:d,action:e})}else{let e="createUpdateAffectedUsage",n={affectedItemId:o,nodeModel:i.grid};t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{affectedUsageInfo:n,dispInfo:d,action:e})}let u="replaceDisposition";t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{affectedItemId:o,dispInfo:d,action:u}),u="update",t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:p,dispInfo:d,action:u}),"AddExistingDisposition"==i.functionality?t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{investigationRequestId:a,dispInfo:d,action:u}):"ReplaceByExistingDisposition"==i.functionality&&(u="update",t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:c,dispInfo:d,action:u}),l.data[0].doSourceDisposition&&l.data[0].doSourceDisposition.length>0?(d=await f.enrichDispositionInfo(l.data[0].doSourceDisposition),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:c,dispInfo:d,action:u})):(u="remove",t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:c,dispInfo:d,action:u})))},f.dragAndDropDisposition=async function(i){if(UWA.is(i.data)&&""!=i.data){let l=i.node,d=l.options.affectedItemId?l.options.affectedItemId:l.options.productID?l.options.productID:l.options.grid.id,c=i.investigationRequestId,p=l.options.grid.isAffectedUsages;var n=JSON.parse(i.data),o=n.data.items[0]&&n.data.items[0].dispositionInformation&&n.data.items[0].dispositionInformation[0]?n.data.items[0].dispositionInformation[0].dispostionId:n.data.items[0]&&n.data.items[0].objectId?n.data.items[0].objectId:void 0,a=l.options.grid.dispositionInformation&&l.options.grid.dispositionInformation[0]?l.options.grid.dispositionInformation[0].dispostionId:void 0;if(null==o)return;var s=[],r=a?"ReplaceByExistingDisposition":"AddExistingDisposition";1!=p&&"true"!=p||"ManageScope"!=i.context?s.push({affectedItemId:d,sourceDispositionId:a,targetDispositionId:o,functionality:r}):s.push({affectedItemId:d,affectedItemType:l.options.grid.type,affectedItemService:"3DSpace",sourceDispositionId:a,targetDispositionId:o,functionality:r,isAffectedUsages:l.options.grid.isAffectedUsages,primaryImpactedBy:l.getParent().options.grid.id});let u=await e.updateDisposition(c,s);if(!(u.data&&u.data[0]&&u.data[0].doTargetDisposition&&u.data[0].doTargetDisposition[0]&&u.data[0].doTargetDisposition[0].dispostionId))return;let g=await f.enrichDispositionInfo(u.data[0].doTargetDisposition),h=a,m=u.data[0].doTargetDisposition[0].dispostionId?u.data[0].doTargetDisposition[0].dispostionId:u.data[0].doTargetDisposition[0].dispositionInformation.dispostionId;if(1!=p&&"true"!=p||"ManageScope"!=i.context){let e="replaceDisposition";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{affectedItemId:d,investigationRequestId:c,dispInfo:g,action:e})}else{let e="createUpdateAffectedUsage",i={affectedItemId:d,nodeModel:l.options.grid};t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{affectedUsageInfo:i,dispInfo:g,action:e})}let C="replaceDisposition";t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{affectedItemId:d,dispInfo:g,action:C}),C="update",t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:m,dispInfo:g,action:C}),"AddExistingDisposition"==s[0].functionality?t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{investigationRequestId:c,dispInfo:g,action:C}):"ReplaceByExistingDisposition"==s[0].functionality&&(C="update",t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:h,dispInfo:g,action:C}),u.data[0].doSourceDisposition&&u.data[0].doSourceDisposition.length>0?(g=await f.enrichDispositionInfo(u.data[0].doSourceDisposition),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:h,dispInfo:g,action:C})):(C="remove",t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:h,dispInfo:g,action:C})))}},f.refreshFlag=!1,f.getHandleForDispostionMaturity=async function(i){let n=[];if(i&&i.dispositionId&&n.push(i.dispositionId),n.length>0){let o=[];o.push({dispositionIds:n});let a=await e.getDispositionInfo(i.contextId,o),s=await f.enrichDispositionInfo(a.data[0].doTargetDisposition),r=s[0].dispostionId,l=s[0].dispositionCurrentState,d="update";t.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:s,action:d}),t.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:s,action:d}),t.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:s,action:d}),t.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:r,dispInfo:s,action:d}),l&&"Complete"===l&&(f.refreshFlag=!0,t.publish("idcard-header-update-substatematurity",{}))}},f.informationForAnalytics=function(e,t){var i={};null!=e||(e="Affected Items"),i.commandInfo={type:"Disposition",facet:e,action:"Disposition>"+e+">"+t},r.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i})},f})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler",["DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsGridCol","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess","require","DS/Controls/Tab","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDataGridView","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabGridCol","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabRolledUpDGLayout","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDataGridModel","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabRolledUpDGView","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabRolledUpDGModel","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabRolledUpDGCol","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbarHandler"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_){"use strict";var b={getSelectedNodes:function(){return b.chgGovDataGridView.options.treeDocument.getSelectedNodes()},getObjectLabel:function(e){return e?e.slice(0,50)+(e.length>50?"... ":" "):""},globalSubscribeChangeImpactsSummary:function(){null!=D&&null!=D.addObserver&&D.addObserver("ChgChangeImpactsHandler","Lifecycle.Modification",b.handleForMaturityUpdate),u.unsubscribe("ECM_GOV_ChangeImpactsIR_EDIT:"+(widget?widget.id:"")),u.subscribe("ECM_GOV_ChangeImpactsIR_EDIT:"+(widget?widget.id:""),(function(e){let t=b.chgGovDataGridView.options.treeDocument.getSelectedNodes(),i=b.chgGovDataGridView.options.treeDocument,n=[];t.forEach((function(e){var t=e.options.grid;n.push(t)})),g.massUpdateHandlerForDisposition(i)}))},handleForMaturityUpdate:function(e){let t=l("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),i=!1;if(e){let n=b.chgGovDataGridView.options.treeDocument.getSelectedNodes();n.length<1&&(n=b.changeImpactsModel.getSelectedNodes(),n.length>0&&(i=!0)),t.getHandleForMaturityUpdate(JSON.parse(e),n),1==i&&u.publish("idcard-header-update-maturity")}},getUniqueItems:function(e,t){var i=[],n=[];return e.forEach((function(e){"Realized Change"===e["Impact Type"]?(n=n.concat(e.realizedChangesDetailsArray),i.push(e)):i.findIndex((t=>t["Impact Type"]==e["Impact Type"]&&t.id==e.id&&t.Status==e.Status))<=-1&&i.push(e)})),n.length>0&&(i.realizedChangeDetailsArray=n),i},getInterfacesData:function(e){var t=void 0,i=new Array;for(let n=0;n<e.length;n++){e[n].interface&&(t=new Set(e[n].interface)),e[n].classes&&(i=[...i,...r.getProposedClassifiedInterfaces(e[n].classes)]);let o=[];t&&(o=Array.from(t),o=o.filter((e=>""!==e)));let a=[];i&&i.length>0&&(a=i.filter((e=>""!==e.name))),e[n].interfaces=o,e[n].classes=a}return e},launchImpactsView:async function(i,n){const a=i.objectID,r=i.objectType,l=i.serviceId;let c=i.label,p=i.modalTitle?i.modalTitle:s.CHG_Change_Impact_Command_Label;c=this.getObjectLabel(c);let g=i.objectRevision?i.objectRevision:"";b.changeImpactsContent=new UWA.Element("div",{styles:{height:"100%",width:"100%"}}),b.IRImpactsContent=new UWA.Element("div",{styles:{height:"100%",width:"100%"}});var h=new t({identifier:"WebUX_IMF_ECM_IMPACTS"}),m=new UWA.Element("div",{class:"dialogBoxTabs"}),C=new d({displayStyle:"strip"});C.inject(m),C.add({label:s.CHG_GOV_Change_Impacts_IR_Tab,content:b.IRImpactsContent,icon:{iconName:"investigation-request",fontIconFamily:WUXManagedFontIcons.Font3DS}}),C.add({label:s.CHG_GOV_Change_Impacts_Change_Tab,content:b.changeImpactsContent,icon:{iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change",fontIconFamily:WUXManagedFontIcons.Font3DS}});var f=w.getUserPreference(I.keys.viewKeysForIR.CI_VIEW);C.value="Change"==f?[1]:[0];var v="Change"==f?"Change":"Investigation",D=new e({immersiveFrame:h,title:c?p+": "+c+g:s.CHG_Change_Impact_Command_Label,content:m,height:360,width:900,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_IMPACTS"});h.inject(widget.body),D.addEventListener("keydown",(function(e){27==e.which&&h.remove()})),D.addEventListener("tabButtonClick",(function(e){console.log("event"),v=1==e.options.value?"Change":"Investigation";let t={};t[I.keys.viewKeysForIR.CI_VIEW]=v,w.saveUserPreference(t)}));var S={columns:o.getColumns(),physicalId:a,option:i,immersiveFrame:h};try{await this.loadChangeImpactsData(S,a,r,l,b.changeImpactsContent),await this.loadIRImpactsData(S,a,r,l,b.IRImpactsContent,n);widget&&widget.id;const e="ECM_GOV_ChangeImpacts_DirectDGV",t="ECM_GOV_ChangeImpacts_RolledUp_DGV";u.unsubscribe(e),u.unsubscribe(t),u.subscribe(e,(async e=>{try{await this.loadIRImpactsData(S,a,r,l,b.IRImpactsContent,n)}catch(e){console.error("Error loading IR Impacts data for Direct View:",e)}})),u.subscribe(t,(async e=>{try{await b.loadIRImpactsRolledUpData(S,a,r,l,b.IRImpactsContent,n)}catch(e){console.error("Error loading IR Impacts data for Rolled Up View:",e)}}))}catch(e){console.error("Error during initial data loading or event subscription:",e)}try{_.clearSelection()}catch(e){console.error("Error clearing selection:")}},loadChangeImpactsData:async function(e,t,s,d,c){console.log("Inside Change Tab"),b.id=t,e.columns=o.getColumns(),e.target=c;var p=new a;b.model=p,e.columns=[...e.columns],e.treeDocument=p.createTreeDocument(),b.changeImpactsModel=e.treeDocument;let u=e.treeDocument;p.registerCustomFilter(),b.chgGovDataGridView=new i(e),b.changempactsTabView=b.chgGovDataGridView,b.chgGovDataGridView.render(),b.chgGovDataGridView.showSpinner();const g=await n.getChangeImpacts(t,s,d),h=await r.getNLSForProcessedList("ChangeImpacts",g.data[0].changeImpactsInformation);var m=h.map((e=>e.policy)).filter((function(e,t,i){return t==i.indexOf(e)}));const C=await n.getStatesAttributes(m);l("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").addCSSMaturityClasses(m,"wux-controls-label",C);const f=l("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridViewToolbar");f.filterData.menu[0].state="selected",f.filterData.menu[1].state="unselected",e.filterView={filterView:"activeChange"},b.processdResponse=h;let v=await this.filterByState(e.filterView);var D=this.getUniqueItems(v,t);await p.loadChangeImpactsData(u,D,t);var I=r.getDefaultFilter(e.columns);u.setFilterModel(I),b.chgGovDataGridView.loadCustomColumns(),b.chgGovDataGridView.hideSpinner()},loadIRImpactsData:async function(e,t,i,o,a,s){console.log("Inside Investigation Direct Tab"),e.columns=p.getColumns(),e.target=a;var d=new h;e.columns=[...e.columns],e.treeDocument=d.createTreeDocument();let g=e.treeDocument;d.registerCustomFilter(),e.contextAccess=s,b.chgGovDataGridView=new c(e),b.chgGovDataGridView.render(),b.chgGovDataGridView.showSpinner();const m=await n.getImpactedIRDetails(t,i,o),C=await r.getNLSForProcessedList("ChangeImpacts",m.data[0].changeImpactsInformation),f=Array.isArray(C)?C:[C];var v=f.map((e=>e.policy)).filter((function(e,t,i){return t==i.indexOf(e)}));const D=await n.getStatesAttributes(v);l("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").addCSSMaturityClasses(v,"wux-controls-label",D),await d.loadImpactedIrData(g,f,s,t),u.publish("change-impacts-object-selection-update"+(widget?widget.id:""),{count:d.getTreeDocument().getAllDescendants().length});var I=r.getDefaultFilter(e.columns);g.setFilterModel(I),b.chgGovDataGridView.loadCustomColumns(),b.chgGovDataGridView.hideSpinner()},loadIRImpactsRolledUpData:async function(e,t,i,o,a,s){console.log("Inside Investigation RolledUp Tab"),e.columns=f.getColumns(),e.target=a,e.contextAccess=s;let d=new C;e.treeDocument=d.createTreeDocument();let c=e.treeDocument;d.registerCustomFilter(),b.chgGovDataGridView=new m(e),b.chgGovDataGridView.render(),b.chgGovDataGridView.showSpinner();const p=await n.getImpactedRolledUpIRs(t,i,o),g=await r.getNLSForProcessedList("ChangeImpacts",p.data[0].changeImpactsInformation),h=Array.isArray(g)?g:[g],v=h.map((e=>e.policy)).filter(((e,t,i)=>t===i.indexOf(e))),D=await n.getStatesAttributes(v);l("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").addCSSMaturityClasses(v,"wux-controls-label",D),await d.loadIRImpactsRolledUpData(c,h,s,t),u.publish("change-impactsRolledUp-object-selection-update"+(widget?widget.id:""),{count:d.getTreeDocument().getAllDescendants().length});const I=r.getDefaultFilter(e.columns);c.setFilterModel(I),b.chgGovDataGridView.loadCustomColumns(),b.chgGovDataGridView.hideSpinner()},handleObjectSelectionUpdate:function(e){e.count>0?b.chgGovDataGridView.toolbar.updateNodeModel("massUpdate",{visibleFlag:!0}):b.chgGovDataGridView.toolbar.updateNodeModel("massUpdate",{visibleFlag:!1})},filterActiveView:async function(){console.log("calling filter view...");let e=t&&t.action&&t.action.flag||"";var t={filterView:"activeChange"};o.filterView(t,e)},filterInActiveView:async function(){console.log("calling filter view...");let e=t&&t.action&&t.action.flag||"";var t={filterView:"inactiveChange"};o.filterView(t,e)},filterByState:function(e){let t=this.processdResponse;return"activeChange"===e.filterView?t.filter((e=>!e.current.toLowerCase().includes("complete")&&!e.current.toLowerCase().includes("cancelled"))):"inactiveChange"===e.filterView?t.filter((e=>e.current.toLowerCase().includes("complete")||e.current.toLowerCase().includes("cancelled"))):t},filterByStateRefresh:async function(e){b.changempactsTabView.showSpinner();let t,i=this.processdResponse;t="activeChange"===e.filterView?i.filter((e=>!e.current.toLowerCase().includes("complete")&&!e.current.toLowerCase().includes("cancelled"))):"inactiveChange"===e.filterView?i.filter((e=>e.current.toLowerCase().includes("complete")||e.current.toLowerCase().includes("cancelled"))):i;let n=this.getUniqueItems(t,b.id);await b.model.loadChangeImpactsData(b.changeImpactsModel,n,b.id),b.changempactsTabView.hideSpinner()}};return b.globalSubscribeChangeImpactsSummary(),b})),define("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOXVersionExplorerController/VersionExplorerController","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/LifecycleServices/LifecycleServicesSettings","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/ModalContainer","require","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/Utilities/Utils","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/TreeModel/TreeNodeModel","DS/PlatformAPI/PlatformAPI"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O){"use strict";let G=Object.create(null);return G.getRemoveMenu=function(e,t){return{type:"PushItem",title:r.CHG_GOV_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(i){let n=e.collectionView.treeDocument.getSelectedNodes().map((e=>e.options.grid.id));"FD_Proposed"==t?O.publish("FDDGV_REMOVE_PROPOSED:"+(widget?widget.id:""),n):"FD_Resolution"==t&&O.publish("FDDGV_REMOVE_RESOLUTION:"+(widget?widget.id:""),n)}}}},G.getNativeContextualMenu=async function(t,i,o){let a=[];e.is(o)&&a.push(G.getRemoveMenu(i,o));let s=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),r=!1;if(s.length>1&&(r=!0),r){let e=[];s.forEach((function(t){e.push(t.options.grid.id)}));let o={};return o.objectID=e,a.push(n.getExploreMenu(null,o)),a.push(n.getExploreWithMenu(null,o)),a.push(n.getOpenMenu(null,o)),a.push(n.getOpenAdvMenu(null,o)),a.push(n.getOpenROMenu(null,o)),(await this.getCommonMenu(t,i)).forEach((e=>{a.push(e)})),a}var l={};return l.objectID=i.cellInfos.nodeModel.options.grid.id,a.push(n.getExploreMenu(null,l)),a.push(n.getExploreWithMenu(null,l)),a.push(n.getOpenMenu(null,l)),a.push(n.getOpenAdvMenu(null,l)),a.push(n.getOpenROMenu(null,l)),(await this.getCommonMenu(t,i)).forEach((e=>{a.push(e)})),a},G.getDashboardContextualMenu=async function(t,i,n){let o=[];e.is(n)&&o.push(G.getRemoveMenu(i,n));let a=!1;if(i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(a=!0),!a){let n=await this.getOpenWithMenu(i);return e.is(n)&&o.push(n),(await this.getCommonMenu(t,i)).forEach((e=>{o.push(e)})),o}return(await this.getCommonMenu(t,i)).forEach((e=>{o.push(e)})),o},G.getOpenWithMenu=async function(e){let t={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,facetName:"SelectedProposedDGV"},i={facetName:"SelectedProposedDGV",selectedItem:t};return n.setSelectedItem(i),await n.openWith(t)},G.getCommonMenu=async function(e,t){let n=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=!1;n.length>1&&(o=!0);var a=[],s="";if(o?n.forEach((function(e){a.push(e.options.grid.id)})):s=t.cellInfos.nodeModel.options.grid.id,o){var r=[];const t={};t.selectedNodeIDs=a,r.push(G.getRelationalExplorerMenu(t));let n=!1;return e.sourceType&&"LEGACY_3DSPACE"!=e.sourceType&&(n=!0),r.push(i.createPropertyPushItem(a,n)),r}var l=[];const d={};d.selectedNodeIDs=[s],l.push(G.getRelationalExplorerMenu(d));let c=!1;return e.sourceType&&"LEGACY_3DSPACE"!=e.sourceType&&(c=!0),l.push(i.createPropertyPushItem([s],c)),l},G.getColumnDefinition=function(t){if(t&&t.dataIndex){var i=this;switch(t.dataIndex){case"titleTree":return{dataIndex:"tree",ds6wIndexMapping:"ds6w:label",text:r.CHG_GOV_DataGrid_Column_Title,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!e.is(t.alwaysVisibleFlag)||t.alwaysVisibleFlag,pinned:"left",width:e.is(t.width)?t.width:200,filterId:"stringRegexp",filterModel:""};case"title":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:label",text:r.CHG_GOV_DataGrid_Column_Title,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!e.is(t.alwaysVisibleFlag)||t.alwaysVisibleFlag,width:e.is(t.width)?t.width:200,typeRepresentation:"url",filterId:"stringRegexp",filterModel:"",getCellValue:function(e){if(e.nodeModel)return{icon:e.nodeModel.getAttributeValue("icon"),label:e.nodeModel.getAttributeValue("title")}}};case"name":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:identifier",text:r.CHG_GOV_DataGrid_Column_Name,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!!e.is(t.allowUnsafeHTMLContent)&&t.allowUnsafeHTMLContent,width:e.is(t.width)?t.width:150,filterId:"stringRegexp",filterModel:""};case"chgObjName":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:identifier",text:r.CHG_GOV_DataGrid_Column_Name,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!e.is(t.allowUnsafeHTMLContent)||t.allowUnsafeHTMLContent,width:e.is(t.width)?t.width:150,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}};case"co_name":return{dataIndex:t.dataIndex,text:r.CHG_GOV_DataGrid_Column_Name,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!e.is(t.allowUnsafeHTMLContent)||t.allowUnsafeHTMLContent,width:e.is(t.width)?t.width:150,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}};case"typeNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:type",text:r.CHG_GOV_DataGrid_Column_Type,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"set",filterModel:[]};case"revision":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:revision",text:r.CHG_GOV_DataGrid_Column_Revision,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,width:65,filterId:"set",filterModel:[]};case"maturityNLS":case"currentNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:status",text:r.CHG_GOV_DataGrid_Column_Maturity,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[]};case"maturityWithBadge":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:status",text:r.CHG_GOV_DataGrid_Column_Maturity,typeRepresentation:"tag",className:"lc-maturity-state",visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel){var t,n=e.nodeModel.options.grid.maturity||e.nodeModel.options.grid.current;if(n){if(!1===n.contains("."))n=e.nodeModel.getReferenceValue("policy")+"."+n;t=i.getAndCreateMaturityClass(n,"wux-controls-label")}return t}}};case"collabspaceNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:project",text:r.CHG_GOV_DataGrid_Column_CollabSpace,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"set",filterModel:[]};case"dispositionName":return{text:r.CHG_IR_Affected_Items_Disposition_Name,dataIndex:t.dataIndex,editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:""};case"dispositionType":return{text:r.CHG_IR_Affected_Items_Disposition_Type,dataIndex:t.dataIndex,editableFlag:!0,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",editionPolicy:"EditionOnOver",typeRepresentation:"typeForDisposition",getCellEditableState:function(e){return!(!e.nodeModel.options.grid.dispositionInformation||!e.nodeModel.options.grid.dispositionInformation[0]||"true"!=e.nodeModel.options.grid.dispositionInformation[0].dispositionAccessBits[0].Edit)}};case"dispositionResolvedBy":return{text:r.CHG_IR_Affected_Items_Disposition_ResolvedBy,dataIndex:"dispositionResolvedBy",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"220",filterId:"stringRegexp",filterModel:""};case"organizationNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:organizationResponsible",text:r.CHG_GOV_DataGrid_Column_Organization,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,sortableFlag:!e.is(t.sortableFlag)||t.sortableFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"set",filterModel:[]};case"reasonForChange":return{dataIndex:t.dataIndex,text:r.Chg_GOV_Reason_For_Change,editableFlag:!e.is(t.editableFlag)||t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,typeRepresentation:"editor",editionPolicy:"EditionOnOver",massUpdateAllowedFlag:!e.is(t.massUpdateAllowedFlag)||t.massUpdateAllowedFlag,filterId:"stringRegexp",filterModel:""};case"applicabilityNLS":return{dataIndex:t.dataIndex,text:r.CHG_GOV_DataGrid_Column_Applicability,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"stringRegexp",filterModel:""};case"modificationDate":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:modified",text:r.CHG_GOV_DataGrid_Column_ModificationDate,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterModel:"",compareFunction:function(e,t,i,n,o){const a=new Date(i.options.grid.modificationDate),s=new Date(n.options.grid.modificationDate);return isNaN(a.getTime())||isNaN(s.getTime())||a.getTime()===s.getTime()?0:a.getTime()<s.getTime()?-1:1}};case"creationDate":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:created",text:r.CHG_GOV_DataGrid_Column_CreationDate,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterModel:"",compareFunction:function(e,t,i,n,o){const a=new Date(i.options.grid.creationDate),s=new Date(n.options.grid.creationDate);return isNaN(a.getTime())||isNaN(s.getTime())||a.getTime()===s.getTime()?0:a.getTime()<s.getTime()?-1:1}};case"ApprovalStatus":return{dataIndex:t.dataIndex,text:c.getName(),typeRepresentation:"user",editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,compareFunction:function(e,t){return c.compareApprovalStatus(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("ApprovalStatus"))return{icon:e.nodeModel.getAttributeValue("ApprovalStatus").icon,label:e.nodeModel.getAttributeValue("ApprovalStatus").label,func:e.nodeModel.getAttributeValue("ApprovalStatus").func}}};case"approvalStatusModel":return{dataIndex:t.dataIndex,text:r.CHG_GOV_Approval_Status_Model,typeRepresentation:"user",editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag};case"severityNLS":return{dataIndex:t.dataIndex,text:r.CHG_GOV_DataGrid_Column_Severity,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,typeRepresentation:"url",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){var t=e.nodeModel.getAttributeValue("severity");let i,n;return"Low"==t?(i="level-low",n="success"):"Medium"==t?(i="level-medium",n="warning"):"High"==t&&(i="level-high",n="error"),{icon:i,label:e.nodeModel.getAttributeValue("severityNLS"),emphasize:n}}},getCellClassName:function(e){return e&&e.nodeModel?"change-sev":null},compareFunction:function(e,t,i,n,o){return"undefined"!=i.options.grid.severityGrade&&"undefined"!=n.options.grid.severityGrade?i.options.grid.severityGrade==n.options.grid.severityGrade?0:i.options.grid.severityGrade<n.options.grid.severityGrade?-1:1:0},getCellGroupingKey:function(e){return e.nodeModel.options.grid.severityNLS}};case"ownerFullName":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:responsible",text:r.CHG_GOV_DataGrid_Column_Owner,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){if(s.getGlobalVariable().isSwymInstalled){var t="/api/user/getpicture/login/"+e.nodeModel.getAttributeValue("owner")+"/format/normal";return{icon:t=s.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.getAttributeValue("ownerFullName")}}return{label:e.nodeModel.getAttributeValue("ownerFullName")}}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}};case"changeCoordinatorFullName":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:changeCoordinator",text:r.CHG_GOV_DataGrid_Column_ChangeCoordinator,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){if(s.getGlobalVariable().isSwymInstalled){var t="/api/user/getpicture/login/"+e.nodeModel.getAttributeValue("changeCoordinator")+"/format/normal";return{icon:t=s.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.getAttributeValue("changeCoordinatorFullName")}}return{label:e.nodeModel.getAttributeValue("changeCoordinatorFullName")}}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.changeCoordinatorFullName}};case"approvers":return{dataIndex:t.dataIndex,text:r.CHG_GOV_Members_DataGrid_Approver,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellTooltip:function(e){if(e.nodeModel)return{shortHelp:void 0}}};case"businessStateName":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:maturitySubstate",text:r.CHG_IR_Maturity_Substate,typeRepresentation:"tag",editableFlag:!1,className:"lc-maturity-state",visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"set",filterModel:[],width:100,getCellValue:function(e){if(e.nodeModel&&e.nodeModel.options.grid.businessStateName)var t=r["CHG_IR_SUBSTATE_"+e.nodeModel.options.grid.businessStateName.replace(" ","")];return t},getCellClassName:function(e){if(e.nodeModel){var t,n=e.nodeModel.options.grid.maturity||e.nodeModel.options.grid.current;if(n){if(!1===n.contains("."))n=e.nodeModel.getReferenceValue("policy")+"."+n;t=i.getAndCreateMaturityClass(n,"wux-controls-label")}return t}}}}}},G.onCustomViewsSave=function(e,t,i){let n={currentCustomViewIdentifier:t,customViews:i.dgvHandle.getCustomViewsManager().getCustomViews()};w.saveUserPreference({[i.dgvHandle.identifier]:JSON.stringify(n)}),a.applyCustomAttributes(e,t,i)},G.registerCustomEventsOnDGV=function(t,i,n){if(Array.isArray(t)&&i){let o=i;for(let s=0;s<t.length;s++)i.addEventListener(t[s],_.debounce((function(i){let r=o.identifier,l=o.getCustomViewsManager().getCurrentCustomViewIdentifier();l=l||"Default View";let d=!1,c={columnWidthChange:void 0,columnVisibleStateChange:void 0};switch(t[s]){case"sortModelChange":o.getCustomViewsManager().getCustomView(l).sortModel=i.dsModel.sortModel,d=!0;break;case"columnOrderChange":break;case"columnWidthChange":e.is(i.options.columnID)?(c.columnWidthChange=i.options.columnID,a.processCustomViews(o.getCustomViewsManager().getCustomViews(),l,n,c),d=!0):e.is(i.options.columnIDs)&&(a.processSizeAllColumnsToFitCustomData(o.getCustomViewsManager().getCustomViews(),l,n,i.options.columnIDs),d=!0);break;case"columnVisibleStateChange":e.is(i.options.columnID)&&(c.columnVisibleStateChange=i.options.columnID,a.processCustomViews(o.getCustomViewsManager().getCustomViews(),l,n,c),d=!0);break;default:console.log(t[s])}if(!0===d){let e={currentCustomViewIdentifier:l,customViews:o.getCustomViewsManager().getCustomViews()};w.saveUserPreference({[r]:JSON.stringify(e)})}})))}},G.showLoader=function(e,t){h.createModal(e,t.elements.container),t.on(r.CHG_GOV_Loader)},G.hideLoader=function(e,t){t.off(),h.removeModal(e)},G.massUpdateHandlerIR=function(){O.publish("ECM_GOV_ChangeImpactsIR_EDIT:"+(widget?widget.id:""))},G.launchCustomColumnManager=function(e){if(a.launchCustomViewManager(e.custom_view_options),e.custom_view_options.dgvHandle._properties.identifier.value){let i=m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var t={};if("CARealizedChangesDGV_TRACKED"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Action",facet:"Realized Changes TRACKED",action:"CA>Realized Changes>Configure Table View"};else if("CARealizedChangesDGV_MOVED"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Action",facet:"Realized Changes MOVED",action:"CA>Realized Changes>Configure Table View"};else if("CARealizedChangesDGV_IGNORED"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Action",facet:"Realized Changes IGNORED",action:"CA>Realized Changes>Configure Table View"};else if("CAProposedChangesDGV"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>Configure Table View"};else if("chgCASummaryGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Action",facet:"My Change Actions",action:"CA>My Change Actions>Configure Table View"};else if("chgCOSummaryGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Order",facet:"My Change Orders",action:"CO>My Change Orders>Configure Table View"};else if("chgCRSummaryGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Request",facet:"My Change Requests",action:"CR>My Change Requests>Configure Table View"};else if("chgIRSummaryGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Investigation Request",facet:"My Investigation Requests",action:"IR>My Investigation Requests>Configure Table View"};else if("chgCRImpactAnalysisGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Request",facet:"Impact Analysis",action:"CR>Impact Analysis>Configure Table View"};else if("chgOrchestrationGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Configure Table View"};else if("chgCROrchestrationGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)t.commandInfo={type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Configure Table View"};else if("ChangeImpactsDGV"===e.custom_view_options.dgvHandle._properties.identifier.value||"ChangeImpactsIRDGV"===e.custom_view_options.dgvHandle._properties.identifier.value||"ChangeImpactsIRRolledUpDGV"===e.custom_view_options.dgvHandle._properties.identifier.value){let i=e.custom_view_options.dataForAnalysis.changeType,n=e.custom_view_options.dataForAnalysis.facet,o=e.custom_view_options.dataForAnalysis.action;t.commandInfo={type:i,facet:n,action:o+">Configure Table View"}}else"chgCRAffectedItemsGrid"===e.custom_view_options.dgvHandle._properties.identifier.value?t.commandInfo={type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Configure Table View"}:"chgIRAffectedItemsGrid"===e.custom_view_options.dgvHandle._properties.identifier.value?t.commandInfo={type:"Investigation Request",facet:"Affected Items",action:"IR>Affected Items>Configure Table View"}:"chgCRImpactBasisGrid"===e.custom_view_options.dgvHandle._properties.identifier.value?t.commandInfo={type:"Change Request",facet:"Analysis Basis",action:"CR>IA>Analysis Basis>Configure Table View"}:"chgCRImpactedItemGrid"===e.custom_view_options.dgvHandle._properties.identifier.value?t.commandInfo={type:"Change Request",facet:"Impacts",action:"CR>IA>Impacts>Configure Table View"}:"chgIRDispositionsGrid"===e.custom_view_options.dgvHandle._properties.identifier.value?t.commandInfo={type:"Investigation Request",facet:"Dispositions",action:"IR>Dispositions>Configure Table View"}:"CAFlowdownURCDGV"===e.custom_view_options.dgvHandle._properties.identifier.value&&(t.commandInfo={type:"Change Action",facet:"Flowdown Realized Changes",action:"CA>Flowdown>Configure Table View"});i.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t})}},G.launchVersionExplorer=function(t){var i=e.createElement("div",{styles:{height:"100%"}}),n=new d({versionGraphContainer:i}),o=[{"3DSpace":s.getGlobalVariable().baseURL,platformId:s.getGlobalVariable().tenant}];p.setOption("platform_services",o),n.setSingleSelectionMode(),n.setCheckVersionExternalFunction("ENOXVersionExplorerOpenVersion",(function(e){return!1})),n.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:t.id,securityContext:s.getGlobalVariable().getSecurityContext(),tenantId:s.getGlobalVariable().tenant,type:t.type,context:null,onComplete:function(){}});var a=new u({identifier:"WebUX_IMF_ECM_VERSION_EXP"});new g({immersiveFrame:a,title:(t.title_prefix?t.title_prefix:r.CHG_GOV_VE_Revisions)+" : "+t.name,content:i,height:360,width:620,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_VERSION_EXP"});a.inject(widget.body)},G.getRelationalExplorerMenu=function(e){var t=e.selectedNodeIDs;return{type:"PushItem",title:r.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil"],(function(e){e.createProbesData("Relations")})),s.getGlobalVariable().isNative?l.DispatchEventToWin("onRelations",t):require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){e.openRelationalExplorer(t)}))}}}},G.getMaturityMenu=function(e,t,i){var n=this;return{type:"PushItem",title:r.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(o){n.executeMaturity(e,t,i)}}}},G.executeMaturity=function(e,t,i){require(["DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil"],(function(e){e.createProbesData("Maturity")}));var n={securityContext:{SecurityContext:s.getGlobalVariable().getSecurityContext(),tenant:s.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},o=[];if(e)for(var a=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),r=0;r<a.length;r++)"ia_Total"!=a[r].options.grid.id&&(null==a[r].options.grid.serviceBasedObjId?o.push({physicalid:a[r].options.grid["@id"]||a[r].options.grid.id}):o.push({physicalid:a[r].options.grid.serviceBasedObjId}));else t&&(Array.isArray(t)?t.forEach((e=>{o.push({physicalid:e})})):""!=t&&o.push({physicalid:t}));new C({context:n,ID:"MaturityHdr"}).executeAsync(o).then((function(){i&&i()}))},G.executeMaturityForDisposition=function(e,t,i){require(["DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil"],(function(e){e.createProbesData("Maturity")}));var n={securityContext:{SecurityContext:s.getGlobalVariable().getSecurityContext(),tenant:s.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},o=[];let a=e.cellInfos.nodeModel.options.grid.dispositionInformation[0].dispositionId;e.cellInfos.nodeModel.options.grid.dispositionId||a?o.push({physicalid:a||e.cellInfos.nodeModel.options.grid.dispositionId}):o.push({physicalid:e.cellInfos.nodeModel.options.grid.dispositionInformation[0].dispostionId}),new C({context:n,ID:"MaturityHdr"}).executeAsync(o).then((function(){if(i){let n={contextId:t,dispositionId:e.cellInfos.nodeModel.options.grid.dispositionInformation[0].dispostionId};i(n)}}))},G.getHandleForMaturityUpdate=async function(e,t){var i={};if(t&&t.length){for(const t of e.Refresh.modified)t.maturity=t.policy+"."+t.state,i["ds6w:status"]=[t.maturity];if(e&&e.Refresh&&Array.isArray(e.Refresh.modified)){const a=await f.getNLSValuesPromise(i);if(a)for(const i of e.Refresh.modified)for(const e of t)if(i.physicalid===e.options.grid.serviceBasedObjId||i.physicalid===e.options.grid.id){var n={title:e.options.grid.title,name:e.options.grid.name,severityNLS:e.options.grid.severityNLS,ownerFullName:e.options.grid.ownerFullName,maturityNLS:a["ds6w:status"][i.maturity],currentNLS:a["ds6w:status"][i.maturity]},o=G.getCustomTooltip(n);e.updateOptions({description:a["ds6w:status"][i.maturity],grid:{maturity:i.state,maturityNLS:a["ds6w:status"][i.maturity],maturityWithBadge:a["ds6w:status"][i.maturity],current:i.state,currentNLS:a["ds6w:status"][i.maturity]},customTooltip:o})}}}},G.getCustomTooltip=function(e){return void 0!==e.currentNLS?r.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+r.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+r.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+r.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+r.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:r.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+r.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+r.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+r.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+r.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},G.cleanStatusForCSS=function(e){return e.replace(/(\.| )/g,"-")},G.createCSSClass=function(e,t,i){if(null===document.getElementById(e)){var n=document.createElement("style");n.type="text/css",n.id=e;let o=i||"."+e;n.innerHTML=o+t,document.getElementsByTagName("head")[0].appendChild(n)}},G.getAndCreateMaturityClass=function(e,t,i){return"lc-status-"+this.cleanStatusForCSS(e)+(t?"-withClass":"")},G.addCSSMaturityClasses=function(e,t,i){var n=this,o={};if(void 0===e)return;let a=i.policies;for(let e=0;a&&e<a.length;e++){o[a[e].policyName]=a[e].states}for(let i=0;i<e.length;i++){let a=e[i];if(o[a]){let e=o[a];for(let i=0;i<e.length;i++){let o=e[i].activeColor,s="{color:"+("#FFFFFF"===o?"#000000":"#FFFFFF")+" ; background-color:"+o+"; cursor:pointer;}",r=n.cleanStatusForCSS(e[i].stateSysName),l="lc-status-"+n.cleanStatusForCSS(a)+"-"+r+(t?"-withClass":""),d="."+l+(t?" ."+t:"");n.createCSSClass(l,s,d)}}}},G.download=function(e){var t=[];v.getDocuments(e).then((function(i){i.forEach((function(e){"TRUE"===e.dataelements.isDocumentType&&t.push(e.id)})),t.length<e.length&&D.warn(r.CHG_GOV_Download_Skipped),v.download(t)}))},G.readyDragContentForDisposition=function(e,t){var i=[],n=t.nodeModel.options.grid.ref_details?t.nodeModel.options.grid.ref_details.id:t.nodeModel.options.grid.serviceBasedObjId?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.id;n.contains("pid:")&&(n=n.replace("pid:",""));var o={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",serviceId:t.nodeModel.options.grid.serviceName?t.nodeModel.options.grid.serviceName:"3DSpace",contextId:s.getGlobalVariable().getSecurityContext(),dispositionInformation:t.nodeModel.options.grid.dispositionInformation};i.push(o);var a={protocol:"3DXContent",version:"2.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:i}};s.getGlobalVariable().isNative?a.source="ENONCHA_AP":a.source||(a.source="X3DCSMA_AP"),e.dataTransfer.setData("Text",JSON.stringify(a)),e.dataTransfer.effectAllowed="all"},G.readyDragContentForResolvedBy=function(e,t){var i=[],n=t.nodeModel.options.grid.ref_details?t.nodeModel.options.grid.ref_details.id:t.nodeModel.options.grid.serviceBasedObjId?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.id,o=t.nodeModel.options.grid;n.contains("pid:")&&(n=n.replace("pid:",""));var a={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",serviceId:t.nodeModel.options.grid.serviceName?t.nodeModel.options.grid.serviceName:"3DSpace",contextId:s.getGlobalVariable().getSecurityContext(),resolvedByInformation:o.dispositionInformation&&o.dispositionInformation[0]&&o.dispositionInformation[0].resolvedByInformation?o.dispositionInformation[0].resolvedByInformation:o.resolvedByInformation?o.resolvedByInformation:"resolvedByNotPresent"};i.push(a);var r={protocol:"3DXContent",version:"2.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:i}};s.getGlobalVariable().isNative?r.source="ENONCHA_AP":r.source||(r.source="X3DCSMA_AP"),e.dataTransfer.setData("Text",JSON.stringify(r)),e.dataTransfer.effectAllowed="all"},G.defaultDispositionNameValue=function(t){var i=new e.Element("div");if("true"===s.getGlobalVariable().isFullLicence&&t&&"true"===t.accessBits["Manage Disposition"]){var n=new e.Element("div",{class:"chgIRAffectedCreateNewDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",left:0,top:0}}),o=new e.Element("div",{class:"chgIRAffectedAddExistingDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",left:"33.33%",top:0}}),a=new e.Element("div",{class:"chgIRAffectedDragAndDropDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",right:0,top:0}});n.inject(i),o.inject(i),a.inject(i),n.addContent({tag:"span",class:"chgIRAffectedCreateNewDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-plus wux-ui-3ds wux-ui-3ds-lg",title:r.CHG_GOV_Investigation_Request_Create_Disposition,styles:{"font-size":"1.2em",cursor:"pointer"}}),o.addContent({tag:"span",class:"chgIRAffectedAddExistingDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-down-right wux-ui-3ds wux-ui-3ds-lg",title:r.CHG_GOV_Investigation_Request_Add_Existing_Disposition,styles:{"font-size":"1.2em",cursor:"pointer"}}),a.addContent({tag:"span",class:"chgIRAffectedAddExistingDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-drag-drop wux-ui-3ds wux-ui-3ds-lg",title:r.CHG_GOV_Investigation_Request_Drag_And_Drop_Disposition,styles:{"font-size":"1.2em",right:0}})}return i.outerHTML},G.resolvedByDefaultForDispostion=function(){var t=new e.Element("div"),i=new e.Element("div",{class:"chgIRAffectedCreateNewCAResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",left:0,top:0}}),n=new e.Element("div",{class:"chgIRAffectedCreateAddExistingCAResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",left:"33.33%",top:0}}),o=new e.Element("div",{class:"chgIRAffectedAddExistingCADragAndDropResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",right:0,top:0}});return i.inject(t),n.inject(t),o.inject(t),i.addContent({tag:"span",class:"chgIRAffectedCreateNewCAResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-plus wux-ui-3ds wux-ui-3ds-lg",title:r.CHG_GOV_Investigation_Request_Create_Resolved_By,styles:{"font-size":"1.2em",cursor:"pointer"}}),n.addContent({tag:"span",class:"chgIRAffectedCreateAddExistingCAResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-down-right wux-ui-3ds wux-ui-3ds-lg",title:r.CHG_GOV_Investigation_Request_Add_Existing_ResolvedBy,styles:{"font-size":"1.2em",cursor:"pointer"}}),o.addContent({tag:"span",class:"chgIRAffectedAddExistingCADragAndDropResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-drag-drop wux-ui-3ds wux-ui-3ds-lg",title:r.CHG_GOV_Investigation_Request_Drag_And_Drop_ResolvedBy,styles:{"font-size":"1.2em",right:0}}),t.outerHTML},G.dispositionNameMethod=function(t,i){let n=e.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});var o=[{tag:"img",allowUnsafeHTMLContent:!0,src:t,styles:{"padding-left":"5px"}},{tag:"span",text:i,styles:{"padding-left":"5px"}},{tag:"span",class:"disposition_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}];return n.setContent(o),n.outerHTML},G.dispositionNameMethodWOMenu=function(t,i){let n=e.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});var o=[{tag:"img",allowUnsafeHTMLContent:!0,src:t,styles:{"padding-left":"5px"}},{tag:"span",text:i,styles:{"padding-left":"5px"}}];return n.setContent(o),n.outerHTML},G.getDefaultAffectedItemsMethod=function(){var t=e.createElement("div"),i=e.createElement("div",{class:"chgIRDispositionAddApprover",styles:{width:"33.3%",height:"100%",position:"absolute",left:"12px",top:0}});return t.appendChild(i),t.outerHTML},G.getAffectedItemsMethod=function(t){var i="";if(t.AffectedItemInformation&&t.AffectedItemInformation.length>0){let a=e.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});if(1==t.AffectedItemInformation.length){var n=[{tag:"img",allowUnsafeHTMLContent:!0,src:t.AffectedItemInformation[0].icon,styles:{"padding-left":"5px"}},{tag:"span",text:t.AffectedItemInformation[0].title+" "+t.AffectedItemInformation[0].revision,styles:{"padding-left":"5px"}},{tag:"span",class:"affectedItem_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}];a.addContent(n)}else{var o=e.createElement("a",{class:"proposed_resolution_multiple",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}});o.innerText=t.AffectedItemInformation.length,o.inject(a)}i=a.outerHTML}return i},G.resolvedByNameMethod=function(t,i,n){let o=e.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});var a=[{tag:"img",allowUnsafeHTMLContent:!0,src:n,styles:{"padding-left":"5px"}},{tag:"span",text:i,styles:{"padding-left":"5px"}},{tag:"span",class:"resolvedby_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}];return o.setContent(a),o.outerHTML},G.fetchMaturityStateCSS=async function(e){var t=e.map((e=>e.policy)).filter((function(e,t,i){return t==i.indexOf(e)}));let i=await I.getStatesAttributes(t);G.addCSSMaturityClasses(t,"wux-controls-label",i)},G.createApproversListElement=function(t){var i=e.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});if(1==t.users.length)this.getUserImageElement(i,t.users[0],!0);else if(t.users.length>1)for(var n=0;n<t.users.length;n++)this.getUserImageElement(i,t.users[n]);return i},G.getUserImageElement=function(t,i,n){var o;if(i.type&&"Route Template"==i.type){var a=s.getGlobalVariable().computeUrl("/snresources/images/icons/small/iconSmallRouteTemplate.png");o=e.createElement("img",{src:a,styles:{"margin-left":"3px"}})}else if(""!=(a=this.getUserImage(i)))(o=e.createElement("img",{src:a,styles:{"border-radius":"50%",width:"22px","min-width":"22px",height:"22px","min-height":"22px","vertical-align":"middle","margin-left":"3px"}})).addEventListener("click",(function(){}));else{var r=void 0!==i.name?i.name:i,l=this.getAvatarDetails(r);o=e.createElement("span",{styles:{background:l.avatarColor,"border-radius":"50%",width:"22px","min-width":"22px",height:"22px","min-height":"22px","text-align":"center","vertical-align":"middle","margin-left":"3px",color:"#FFFFFF","font-family":"3ds","font-size":"11px"},html:l.avatarStr})}if(o.inject(t),n){let n=new e.createElement("a",{class:"wux-tweakers-string-label",styles:{color:"inherit","text-decoration":"none","padding-left":"7px"}});i.type&&"Route Template"==i.type?n.innerText=i.title:n.innerText=i.name,n.inject(t)}},G.getUserImage=function(e,t){if(t&&"mini"===t.format&&"/format/mini",s.getGlobalVariable().isSwymInstalled){var i="/api/user/getpicture/login/"+e.userid+"/format/normal";return s.getGlobalVariable().computeSwymUrl(i)}return""},G.getAvatarDetails=function(e){var t={},i="",n=[[7,139,250],[249,87,83],[111,188,75],[158,132,106],[170,75,178],[26,153,123],[245,100,163],[255,138,46]],o=e.split(" "),a=o[0].charAt(0),s=o[o.length-1];s&&(i=s.charAt(0));var r=a+i,l=Math.ceil((a.charCodeAt(0)+i.charCodeAt(0))%n.length),d="rgb("+n[l][0]+","+n[l][1]+","+n[l][2]+")";return t.name=e,t.avatarStr=r,t.avatarColor=d,t},G.getChangeImpacts=function(e,t){return{id:"ChangeImpacts",type:"PushItem",title:r.CHG_Change_Impact_Command_Label,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(i){S.launchImpactsView(e,t)}}}},G.addApproversDefaultMethod=function(){var t=e.createElement("div"),i=e.createElement("div",{class:"chgIRDispositionAddApprover",styles:{width:"33.3%",height:"100%",position:"absolute",left:"12px",top:0}}),n=e.createElement("span",{class:"chgIRDispositionAddApproverwux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-user-add wux-ui-3ds wux-ui-3ds-lg",title:r.CHG_GOV_Disposition_AddApprovers,styles:{"font-size":"1.2em",cursor:"pointer",color:"#77797c"}});return i.appendChild(n),t.appendChild(i),t.outerHTML},G.addApproversUserIconMethod=function(t){var i=this.createApproversListElement({users:t});let n=this.updateApproversTooltip(t);return new e.Element("div",{html:i,title:n||""}).outerHTML},G.getUpdatedApprovalStatusColumn=async function(e,t){let i=[];if(e&&e.Refresh&&Array.isArray(e.Refresh.modified))for(const t of e.Refresh.modified)t&&t.physicalid&&i.push({id:t.physicalid});if(i.length>0){var n=await c.getColumnApprovalStatusValue(o.createPayloadApprovalStatusValue(i));if(n)for(const e of t){var a=e.options.grid.id;if(n[a]){var s={grid:{ApprovalStatus:n[a].approvalStatus,approvalStatusModel:n[a].approvalStatusModel}};e.updateOptions(s)}}}},G.getBusinessStateForSummaryGrid=async function(t,i){return new Promise((async(n,o)=>{var a=(await I.getStatesAttributes(["Investigation Request"])).policies[0].states,s="";a.map((e=>{e.stateSysName==t&&(s=e.activeColor,e.inactiveColor)}));var l=e.createElement("div"),d=e.createElement("div",{class:"chgIRBusinessState",styles:{width:"33.3%",height:"100%",position:"inherit",left:"90px",top:0}}),c=e.createElement("span",{text:r["CHG_IR_SUBSTATE_"+i.replace(" ","")],title:r["CHG_IR_SUBSTATE_"+i.replace(" ","")],styles:{"background-color":s,color:"white","border-radius":"5px","word-wrap":"break-word","white-space":"nowrap","text-overflow":"ellipsis",padding:"0px 3px","font-family":"Arial",display:"inline-table","font-weight":"bold"}});d.appendChild(c),l.appendChild(d),n(l)}))},G.updateApproversTooltip=function(e){let t="";if(Array.isArray(e))for(let i=0;i<e.length;i++){const n=e[i];""!==t&&(t+="\n"),n.type&&"Route Template"==n.type?t+=n.title+" ("+n.name+")":n.type&&"Person"==n.type&&(t+=n.name+" ("+n.userid+")")}return t},G.getApproversSuggestions=async function(e,t,i,n,o){try{const a={contextUser:s.getGlobalVariable().contextUser,text:e,supportType:t,searchQuery:i};let l=await y.fetchMembersList(a);l.length>999&&D.warn(r.CHG_Add_Member_Warning),n.empty(),n.prepareUpdate();const d=o?new Set(o.map((e=>e.id))):new Set;for(let e=0;e<l.length;e++){const t=l[e].id;if(d.has(t))continue;let i;"person"===l[e].type.toLowerCase()?i=`${l[e].name}(${l[e].identifier.toUpperCase()})`:"group"!==l[e].type.toLowerCase()&&"route template"!==l[e].type.toLowerCase()||(i=l[e].name);let o=new E({label:l[e].name,value:{label:i,subLabel:l[e].personRole,name:l[e].name,identifier:l[e].identifier,type:l[e].type,id:l[e].id}});n.addRoot(o)}return n.pushUpdate(),n}catch(e){throw console.error("Error in getApproversSuggestions:",e),e}},G.getApproversSuggestionsUpdate=async function(e,t,i,n,o){try{const a={contextUser:s.getGlobalVariable().contextUser,text:e,supportType:t,searchQuery:i};let l=await y.fetchMembersList(a);l.length>999&&D.warn(r.CHG_Add_Member_Warning),n.empty(),n.prepareUpdate();const d=o?new Set(o.map((e=>e.id))):new Set;for(let e=0;e<l.length;e++){const t=l[e].id;if(d.has(t))continue;let i;"person"===l[e].type.toLowerCase()?i=`${l[e].name}(${l[e].identifier})`:"group"!==l[e].type.toLowerCase()&&"route template"!==l[e].type.toLowerCase()||(i=l[e].name);let o=new E({label:l[e].name,value:{label:i,subLabel:l[e].personRole,name:l[e].name,identifier:l[e].identifier,type:l[e].type,id:l[e].id}});n.addRoot(o)}return n.pushUpdate(),n}catch(e){throw console.error("Error in getApproversSuggestions:",e),e}},G.debouncingHandler=function(e,t){let i;return function(...n){clearTimeout(i),i=setTimeout((()=>{e(...n)}),t)}},G.loadCustomColumns=function(e){let t=w.getUserPreference(e.dgvHandle.identifier);if(t){let i=JSON.parse(t);i&&a.restoreCustomViews(i,e)}},G.processXMLExpressionforApplicability=function(e,t){var i={},n="",o="",a="",s=!1,l=!1;if(""===e)s=!0;else if(""!=e){var d=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression");if(d.length>0){var c=[],p=d[0].getElementsByTagName("Context");if(p.length>0)for(var u=0;u<p.length;u++){var g=p[u];if(g)"false"===(m=g.textContent)&&(c.push(m),l=!0)}else{var h=d[0].getElementsByTagName("XGraph");for(u=0;u<h.length;u++){var m,C=h[u];if(C)"false"===(m=C.textContent)&&(c.push(m),l=!0)}}}}return l||s?l?(n="Partial",o=r.CHG_GOV_Proposed_ProposalStatus_Partial,a=t,{title:r.CHG_GOV_APPLICABILITY_EXPRESSION,shortHelp:a}):s&&(n="No",o=r.CHG_GOV_VALUE_NO,a=r.CHG_GOV_VALUE_NO):t.includes("###")?(n="Yes",o=r.CHG_GOV_Header_Unknown,a=r.CHG_GOV_Tooltip_Unkown):(n="Yes",o=r.CHG_GOV_VALUE_YES,a=t,{title:r.CHG_GOV_APPLICABILITY_EXPRESSION,shortHelp:a}),i.attributes={Applicability:{valueActual:n,valueDisplay:o,showLoader:!1,valueTooltip:a}},i},G.handleForApplicabilityUpdateEvent=function(e,t){if((G.getNestedValueFromPathString(t)&&G.getNestedValueFromPathString(e,"[0].options.grid.id")||G.getNestedValueFromPathString(e,"[0]._options.grid.id"))&&t.content.id==(e[0]._options.grid.id||e[0].options.grid.id)){let i="";if(null!=t.content.applicability_DisplayValue){i=String(t.content.applicability_DisplayValue).replace(/\n/g," , ")}if(e&&e.length)for(const t of e)t.updateOptions({grid:{applicabilityNLS:i}})}},G.getNestedValueFromPathString=function(e,t){if(!e)return;if(!t||"string"!=typeof t||""===t.trim())return e;const i=t.match(/[^.\[\]]+/g);return i?i.reduce(((e,t)=>e?.[t]),e):void 0},G})),define("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b){"use strict";var S=Object.create(null);return S.getColumns=function(){let e=[];return e.push(_.getColumnDefinition({dataIndex:"titleTree"})),e.push(_.getColumnDefinition({dataIndex:"co_name"})),e.push(_.getColumnDefinition({dataIndex:"maturityWithBadge"})),"true"===i.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(_.getColumnDefinition({dataIndex:"ApprovalStatus"})),e.push(_.getColumnDefinition({dataIndex:"severityNLS"})),e.push(_.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(_.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(_.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(_.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(_.getColumnDefinition({dataIndex:"applicabilityNLS"})),e.push(_.getColumnDefinition({dataIndex:"modificationDate"})),e.push(_.getColumnDefinition({dataIndex:"creationDate"})),e},S.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:i.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},S.showNotification=function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=f,v.setNotificationManager(window.notifs)),a?v.inject(a):v.elements.container.isInjected()||v.inject(),window.notifs.addNotif(r)},S.getRelationalExplorerMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[];for(let e=0;e<t.length;e++){let i=t[e].options.grid.id;o.push(i)}e.openRelationalExplorer(n||o)}))}}}},S.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<t.length;e++)n.push(t[e].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},S.getDeleteMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){let e=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),t=[];for(let i=0;i<e.length;i++){let n=e[i],o={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(o)}let o=require("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout");a.deleteNodes(t,n,o.removeDataFromGrid)}}}},S.changeView=function(i){if(widget.body.getDimensions().width<=n.MOBILE_CUTOFF?o.updateCASummaryViewMobile(i):o.updateCASummaryViewDesktop(i),"GridView"==i){this.currentView="Grid";let i=t.toolbar.getNodeModelByID("view");i&&"view-list"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";let n=document.querySelector(".crgridView");n&&(n.removeClassName("hideView"),n.removeClassName("nonVisible"),n.addClassName("showView"));let o=document.querySelector(".crtileView");o&&(o.removeClassName("showView"),o.addClassName("hideView"))}else if("TileView"==i){this.currentView="Tile";let i=t.toolbar.getNodeModelByID("view");i&&"view-small-tile"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),i.options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected";let n=document.querySelector(".crgridView");n&&(n.removeClassName("showView"),n.addClassName("hideView"));let o=document.querySelector(".crtileView");o&&(o.removeClassName("hideView"),o.addClassName("showView"))}},S.createCustomSeverity=function(e,t){let i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);let a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},S.createCustomOwner=function(e,t){let n="/api/user/getpicture/login/"+t+"/format/normal",o=i.getGlobalVariable().computeSwymUrl(n),a=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{let e=s.getAvatarDetails(t);l=UWA.createElement("div",{html:e.avatarStr,class:"avatarIcon"}),l.style.setProperty("background",e.avatarColor)}l.inject(r);let d=UWA.createElement("span",{class:"userName",html:t});return r.inject(a),d.inject(a),a.outerHTML},S.createHeaderFieldsJSON=function(t){return new Promise((function(i,n){let o={"ds6w:project":[t.model.collabspace],"ds6w:organizationResponsible":[t.model.organization]};u.getNLSValuesPromise(o).then((function(n){let o=n["ds6w:organizationResponsible"][t.model.organization],a=n["ds6w:project"][t.model.collabspace],s={id:t.model.id,name:t.model.name,revision:t.model.revision,type:t.model.type,policy:t.model.policy,title:t.model.title,thumbnail:t.model.thumbnail,iconURL:t.model.iconURL,minified:!1,onHold:t.model.onHold,isKindOfType:t.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Attachments","RelatedScope"],["orgnaization"]],mapping:{owner:{fieldNLS:e.CHG_GOV_DataGrid_Column_Owner,valueActual:t.model.owner,valueDisplay:t.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},collabSpace:{fieldNLS:e.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:t.model.collabspace,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},maturity:{fieldNLS:e.CHG_GOV_DataGrid_Column_Maturity,valueActual:t.model.maturity,valueDisplay:t.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:e.CHG_GOV_DataGrid_Column_Organization,valueActual:t.model.organization,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},Applicability:{fieldNLS:e.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:e.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0},RelatedScope:{fieldNLS:e.CHG_GOV_Header_RelatedScope,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0}}},freeSpaces:[{type:"text",data:t.model.description}],menuItems:[{id:"chgHold",text:e.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:e.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:e.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"},{id:"chgDuplicateCR",text:e.CHG_GOV_Change_Request_Duplicate_Header_Dropdown,fonticon:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",accessBit:"Duplicate"}]};i(s)}))}))},S.getCRTabs=function(e,t,i){this._pathRequestsDetails=[l._KEY,l._VIEWS_PREFERENCES,l._CHANGE_REQUESTS_DETAILS];var n=r.getTab(this._pathRequestsDetails);let o="crAffectedItems";o=""==n?"crAffectedItems":n,console.log(n);let a=this.getCRMembersTab(e,t,o),s=this.getCRAssessmentTab(e,t,o,i);return[this.getCRAffectedItemsTab(e,t,o,i),s,this.getCRChangeOrchestrationTab(e,t,o,i),a,this.getCRApprovalsTab(e,t,o)]},S.getCRAssessmentTab=(t,i,n,o)=>{let a=!1;return"crAssessment"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_Assessment,isSelected:a,index:1,value:"crAssessment",content:t.createCRAssessmentTab(i,o),icon:{iconName:"change-request-chart-line-bar",fontIconFamily:WUXManagedFontIcons.Font3DS}}},S.getCRAffectedItemsTab=(t,i,n,o)=>{let a=!1;return"crAffectedItems"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_AffectedItems,isSelected:a,value:"crAffectedItems",index:0,content:t.createCRAffectedItemsTab(i,o),icon:{iconName:"change-request-attention",fontIconFamily:WUXManagedFontIcons.Font3DS}}},S.getCRApprovalsTab=(t,i,n)=>{let o=!1;return"crApprovals"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Approvals,isSelected:o,value:"crApprovals",index:4,content:t.createCRApprovalsTab(i,n),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}},S.getCRMembersTab=(t,i,n)=>{let o=!1;return"crMembers"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Members,isSelected:o,value:"crMembers",index:3,content:t.createCRMembersTab(i),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}},S.getCRChangeOrchestrationTab=(t,i,n,o)=>{let a=!1;return"crOrchestration"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_ChangeOrchestration,isSelected:a,value:"crChangeOrchestration",index:2,content:t.createCROrchestrationTab(i,o),icon:{iconName:"flow-tree-ordered",fontIconFamily:WUXManagedFontIcons.Font3DS}}},S.displayObjectInfoInsideIDcard=function(e,t=!1){var i=this;d.getChangeRequestInfo(e).then((function(e){c.processedCRSummaryList(e).then((function(o){var a={model:o[0]};i.createHeaderFieldsJSON(a).then((function(i){var a={model:i};if(t)try{let t=b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");(i=o[0]).dueDate=e.data[0].dueDate,i.isKindOfType="Change Request",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:i})}catch(e){console.log(e)}p.navigate(n.ROUTE_CR_DETAILS,{id:i.id,name:i.name,title:i.title,nodeModel:a,mode:"outsideCall"},{reload:!0})}))}))}),(function(e){var t=document.getElementsByClassName("moduleWrapper")[0];return t&&w.isMasked(t)&&w.unmask(t),Promise.reject(e)}))},S.getChangeRequestModelForIDCard=function(e){return new Promise((function(t,i){d.getChangeRequestInfo(e).then((function(e){c.processedCRSummaryList(e).then((function(e){var i={model:e[0]};t(i)}))}))}))},S.filterView=function(e){if("activeCR"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCR"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},S})),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n){"use strict";var o=Object.create(null);return o.getColumns=function(){var t=[{text:e.CHG_GOV_Members_DataGrid_column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.fullName}},{text:e.CHG_GOV_Members_DataGrid_column_Name,dataIndex:"username",editableFlag:!1}];return t.push({dataIndex:"ContextualMenuColumn"}),t},o.makeUpdateMemberJson=function(e,t,i,n,o,a){var s={data:[]};function r(t,i,n){var o={updateAction:e,role:t,user:i,list:n};s.data.push(o)}function l(t,i,n){var o={updateAction:e,dataelements:{role:t,user:i,list:n}};s.data.push(o)}switch(a){case"Change Action":case"ChangeAction":""!==t.person&&("string"!=typeof t.person?t.person.forEach((e=>r("contributor",e,""))):r("contributor",t.person,"")),""!==t.group&&("string"!=typeof t.group?t.group.forEach((e=>r("contributor","",e))):r("contributor","",t.group)),""!=i&&i.person&&""!=i.person&&("string"!=typeof i.person?i.person.forEach((e=>r("approver",e,""))):r("approver",i.person,"")),""!=i&&i.routetemplate&&""!=i.routetemplate&&r("approver","",i.routetemplate),""!==n.person&&("string"!=typeof n.person?n.person.forEach((e=>r("follower",e,""))):r("follower",n.person,"")),""!==n.group&&("string"!=typeof n.group?n.group.forEach((e=>r("follower","",e))):r("follower","",n.group));break;case"Change Request":case"ChangeRequest":""!=o.person&&r("Coordinator",o.person,""),""!==o.group&&("string"!=typeof o.group?o.group.forEach((e=>r("Coordinator","",e))):r("Coordinator","",o.group)),i.person&&""!==i.person&&("string"!=typeof i.person?i.person.forEach((e=>r("approver",e,""))):r("approver",i.person,"")),""!=i.routetemplate&&r("approver","",i.routetemplate),""!==n.person&&("string"!=typeof n.person?n.person.forEach((e=>r("follower",e,""))):r("follower",n.person,"")),""!==n.group&&("string"!=typeof n.group?n.group.forEach((e=>r("follower","",e))):r("follower","",n.group)),""!==t.person&&("string"!=typeof t.person?t.person.forEach((e=>r("contributor",e,""))):r("contributor",t.person,"")),""!==t.group&&("string"!=typeof t.group?t.group.forEach((e=>r("contributor","",e))):r("contributor","",t.group));break;case"InvestigationRequest":""!=o.person&&r("Coordinator",o.person,""),""!=i&&""!=i.person&&("string"!=typeof i.person?i.person.forEach((e=>r("approver",e,""))):r("approver",i.person,"")),""!=i&&""!=i.routetemplate&&r("Approver","",i.routeTemplate),""!==n.person&&("string"!=typeof n.person?n.person.forEach((e=>r("follower",e,""))):r("follower",n.person,"")),""!==n.group&&("string"!=typeof n.group?n.group.forEach((e=>r("follower","",e))):r("follower","",n.group)),""!==t.person&&("string"!=typeof t.person?t.person.forEach((e=>r("contributor",e,""))):r("contributor",t.person,"")),""!==t.group&&("string"!=typeof t.group?t.group.forEach((e=>r("contributor","",e))):r("contributor","",t.group));break;case"Change Order":case"ChangeOrder":""!=o.person&&l("Coordinator",o.person,""),""!=i&&""!=i.routetemplate&&l("approver","",i.routetemplate),""!==n.person&&("string"!=typeof n.person?n.person.forEach((e=>l("follower",e,""))):l("follower",n.person,"")),""!==n.group&&("string"!=typeof n.group?n.group.forEach((e=>l("follower","",e))):l("follower","",n.group)),""!==t.person&&("string"!=typeof t.person?t.person.forEach((e=>l("contributor",e,""))):l("contributor",t.person,"")),""!==t.group&&("string"!=typeof t.group?t.group.forEach((e=>l("contributor","",e))):l("contributor","",t.group));break;case"Disposition":""!=i&&""!=i.person&&("string"!=typeof i.person?i.person.forEach((e=>r("approver",e,""))):r("approver",i.person,"")),""!=i.routetemplate&&r("approver","",i.routetemplate);break;default:console.error("Unsupported object type:",a)}return s},o.getRoleNLSValue=function(t){let i="";switch(t){case"Owner":case"owner":i=e.CHG_GOV_Members_DataGrid_Owner;break;case"originator":i=e.CHG_GOV_Members_DataGrid_Originator;break;case"Coordinator":case"coordinator":case"Change Coordinators":i=e.CHG_GOV_Members_DataGrid_ChangeCoordinators;break;case"changeCoordinator":i=e.CHG_GOV_DataGrid_Column_ChangeCoordinator;break;case"contributor":case"Assignees":case"assignee":i=e.CHG_GOV_Members_DataGrid_Assignee;break;case"approver":i=e.CHG_GOV_Members_DataGrid_Approver;break;case"Follower":case"follower":case"Informed Users":i=e.CHG_GOV_Members_DataGrid_InformedUser;break;default:console.log("NLS is not defined for : "+t)}return i},o.getRoleWithoutNLS=function(t){let i="";switch(t){case"Owner":i=e.CHG_GOV_Members_DataGrid_owner;break;case"Assignees":i=e.CHG_GOV_Members_DataGrid_contributor;break;case"Informed Users":i=e.CHG_GOV_Members_DataGrid_follower;break;case"Coordinator":case"Change Coordinators":i=e.CHG_GOV_Members_DataGrid_coordinator;break;case"Approvers":i=e.CHG_GOV_Members_DataGrid_approver;break;default:console.log("NLS is not defined for : "+t)}return i},o})),define("DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";return{getDownloadMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(){n.createProbesData("Download"),o.download(e)}}}},getPreviewMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x fonticon-eye"},action:{callback:function(){n.createProbesData("Preview"),i.preview(e)}}}}}})),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil",["DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/PlatformAPI/PlatformAPI","DS/ENOChangeActionUX/scripts/CAPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Dropdown","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/LifecycleCmd/MaturityCmd","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgMembersServices","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S){"use strict";var y=Object.create(null);return y.getColumns=function(){let e=[];return e.push(_.getColumnDefinition({dataIndex:"titleTree"})),e.push(_.getColumnDefinition({dataIndex:"co_name"})),e.push(_.getColumnDefinition({dataIndex:"maturityWithBadge"})),"true"===r.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(_.getColumnDefinition({dataIndex:"ApprovalStatus"})),e.push(_.getColumnDefinition({dataIndex:"severityNLS"})),e.push(_.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(_.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(_.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(_.getColumnDefinition({dataIndex:"applicabilityNLS"})),e.push(_.getColumnDefinition({dataIndex:"modificationDate"})),e.push(_.getColumnDefinition({dataIndex:"creationDate"})),e},y.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:r.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},y.showNotification=function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=D,I.setNotificationManager(window.notifs)),a?I.inject(a):I.elements.container.isInjected()||I.inject(),window.notifs.addNotif(r)},y.createHeaderFieldsJSON=function(e){var t=new Promise((function(t,i){let o={"ds6w:project":[e.model.collabspace],"ds6w:organizationResponsible":[e.model.organization]};n.getNLSValuesPromise(o).then((function(i){let n=i["ds6w:organizationResponsible"][e.model.organization],o=i["ds6w:project"][e.model.collabspace],a=[];var s={id:e.model.id,name:e.model.name,revision:e.model.revision,type:e.model.type,title:e.model.title,description:e.model.description,severity:e.model.severity,maturity:e.model.maturity,thumbnail:e.model.thumbnail,iconURL:e.model.iconURL,minified:!1,onHold:e.model.onHold,isKindOfType:e.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Dependency","Attachments"],["orgnaization","Flowdown","isGoverned"]],mapping:{owner:{fieldNLS:m.CHG_GOV_DataGrid_Column_Owner,valueActual:e.model.owner,valueDisplay:e.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},collabSpace:{fieldNLS:m.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:e.model.collabspace,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},maturity:{fieldNLS:m.CHG_GOV_DataGrid_Column_Maturity,valueActual:e.model.maturity,valueDisplay:e.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:m.CHG_GOV_DataGrid_Column_Organization,valueActual:e.model.organization,valueDisplay:n,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},Applicability:{fieldNLS:m.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Dependency:{fieldNLS:m.CHG_GOV_Header_Dependency,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:m.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Flowdown:{fieldNLS:m.CHG_GOV_Header_Flowdown,valueActual:"Unassigned",valueDisplay:"Unassigned",showLoader:!0,displayWhenMinified:!0,editable:!1},isGoverned:{fieldNLS:m.CHG_GOV_Header_isGoverned,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Group:{fieldNLS:m.CHG_GOV_Header_Group,valueActual:void 0,valueDisplay:"Unassigned",showLoader:!0,displayWhenMinified:!0,accessBit:"AddToGroup"}}},freeSpaces:[{type:"text",data:e.model.description}],menuItems:[{id:"chgBOMSync",text:m.ECM_CA_EBOM_Sync_Action,fonticon:"fonticon fonticon-change-action-sync",accessBit:"Synchronization"},{id:"chgHold",text:m.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:m.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:m.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"},{id:"chgDuplicateCA",text:m.CHG_GOV_Change_Action_Duplicate_Header_Dropdown,fonticon:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",accessBit:"Duplicate"}]};"true"==r.getGlobalVariable().CHG_CHANGE_GROUP&&a.push("Group"),s.attributes.layout.push(a);let l={id:"chgCAWorkUnder",text:m.CHG_GOV_Header_Menu_WorkUnder,fonticon:"fonticon fonticon-hardhat",accessBit:"WorkUnder"};(r.getGlobalVariable().isNative||r.getGlobalVariable().isPoweredBy)&&(s.menuItems.push(l),g.unsubscribe("change-action-work-under"),g.subscribe("change-action-work-under",(function(e){y.publishEventToWebnWinForWorkUnder(e)}))),t(s)}))}));return t},y.getMaturityMenu=function(e){return{type:"PushItem",title:m.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=[],a=0;a<i.length;a++)n.push(i[a].options.grid),o.push({physicalid:i[a].options.grid["@id"]||i[a].options.grid.id});new w({context:n,ID:"MaturityHdr"}).executeAsync(o)}}}},y.publishEventToWebnWinForWorkUnder=function(e){let t=e.changeaction;if(t&&t.editability)if("allowed"===t.editability.work_under){let e="Work_Under",n="TRUE";if(r.getGlobalVariable().isPoweredBy){var i=t.attributes.find((e=>"attribute_Synopsis"===e.name));let e=i&&i.value?i.value:"",n=t.name,o=t.description,a=t.id;if(t.attributes){let i=t.attributes;UWA.is(i)&&i.forEach((function(t){"attribute_Synopsis"===t.name&&(e=t.value)}))}let s={operation:"Work_Under",operationVersion:"1.0",content:{id:a.replace("pid:",""),name:n,title:e,description:o}};g.publish("webinwin:web:notification",JSON.stringify(s))}else d.DispatchEventToWin(e,n)}else s.error(m.CHG_GOV_Action_WorkUnder_Forbidden)},y.getTabs=function(e,t){this._pathChangeActionsDetails=[p._KEY,p._VIEWS_PREFERENCES,p._CHANGE_ACTIONS_DETAILS];var i=u.getTab(this._pathChangeActionsDetails);let n="ProposedChange";n=null==i||""==i?"ProposedChange":i,console.log(i);let o=this.getProposedChangeTab(e,t,n),a=null;UWA.is(t.flowdownRequired)&&"true"===t.flowdownRequired&&(a=this.getFlowdownTab(e,t,n));let s=this.getRealizedChangeTab(e,t,n);var r=[this.getMembersNewTab(e,t,n),a,o,s,this.getApprovalsTab(e,t,n)];return(UWA.is(t.flowdownRequired)&&"false"===t.flowdownRequired||!UWA.is(t.flowdownRequired))&&r.splice(1,1),r},y.getMembersNewTab=(e,t,i)=>{let n=!1;return"Members"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_Members,isSelected:n,value:"caMembers",index:0,content:e.createMembersNewTab(t),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}},y.getFlowdownTab=(e,t,i)=>{let n=!1;return"Flowdown"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_Flowdown,isSelected:n,index:1,value:"caFlowdown",content:e.createFlowdownTab(t),icon:{iconName:"flow-down",fontIconFamily:WUXManagedFontIcons.Font3DS}}},y.getProposedChangeTab=(e,t,i)=>{let n=!1;return"ProposedChange"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_ProposedChanges,isSelected:n,index:2,value:"caProposedChange",content:e.createProposedChangeTab(t),icon:{iconName:"change-action-proposed",fontIconFamily:WUXManagedFontIcons.Font3DS}}},y.getRealizedChangeTab=(e,t,i)=>{let n=!1;return"RealizedChange"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_RealizedChanges,isSelected:n,index:3,value:"caRealizedChange",content:e.createRealizedChangeTab(t),icon:{iconName:"change-action-realized",fontIconFamily:WUXManagedFontIcons.Font3DS}}},y.getApprovalsTab=(e,t,i)=>{let n=!1;return"Approvals"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_Approvals,isSelected:n,value:"caApprovals",index:4,content:e.createApprovalsTab(t,i),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}},y.displayObjectInfoInsideIDcard=function(t,n=!1){var s=this;o.getChangeActionInfo(t).then((function(e){var t=a.processChangeActionDetails(e);let o={model:t[0]};s.createHeaderFieldsJSON(o).then((function(e){var o={model:e};if(n)try{let i=S("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");(e=t[0]).isKindOfType="Change Action",i.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:e})}catch(e){console.log(e)}(i.navigate(c.ROUTE_CA_DETAILS,{id:e.id,name:e.name,title:e.title,nodeModel:o,mode:"outsideCall"},{reload:!0}),r.getGlobalVariable().isNative)&&(window.history.replaceState("",e.title,r.getGlobalVariable().nativeURL),"true"!=r.getGlobalVariable().CHG_NATIVE_BREADCRUMB&&i.getDependency("applicationChannel").publish({event:"breadcrumb-hide"}))}))}),(function(t){var i=document.getElementsByClassName("moduleWrapper")[0];i&&e.isMasked(i)&&e.unmask(i)}))},y.getChangeActionModelForIDCard=function(e){return new Promise((function(t,i){o.getChangeActionInfo(e).then((function(e){var i={model:a.processChangeActionDetails(e)[0]};t(i)}))}))},y.changeView=function(e){if(widget.body.getDimensions().width<=c.MOBILE_CUTOFF?h.updateCASummaryViewMobile(e):h.updateCASummaryViewDesktop(e),"GridView"==e){this.currentView="Grid";let e=t.toolbar.getNodeModelByID("view");e&&"view-list"!=e.options.grid.semantics.icon.iconName&&e.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:m.CHG_TOOLTIP_GRID_VIEW}),e.options.grid.data.menu[0].state="selected",e.options.grid.data.menu[1].state="unselected";let i=document.querySelector(".cagridView");i&&(i.removeClassName("hideView"),i.removeClassName("nonVisible"),i.addClassName("showView"));let n=document.querySelector(".catileView");n&&(n.removeClassName("showView"),n.addClassName("hideView"))}else if("TileView"==e){this.currentView="Tile";let e=t.toolbar.getNodeModelByID("view");e&&"view-small-tile"!=e.options.grid.semantics.icon.iconName&&e.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:m.CHG_TOOLTIP_TILE_VIEW}),e.options.grid.data.menu[0].state="unselected",e.options.grid.data.menu[1].state="selected";let i=document.querySelector(".cagridView");i&&(i.removeClassName("showView"),i.addClassName("hideView"));let n=document.querySelector(".catileView");n&&(n.removeClassName("hideView"),n.addClassName("showView"))}},y.getDeleteMenu=function(e,t,i){return{type:"PushItem",title:m.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){let e=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let t=0;t<e.length;t++){let i=e[t],o={physicalid:i.options.grid.id,nodeName:i.options.grid.name,nodeTitle:i.options.grid.title};n.push(o)}let o=require("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout");l.deleteNodes(n,i,o.removeDataFromGrid)}}}},y.getTransferMenu=function(e,t){return{type:"PushItem",title:m.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){let i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<i.length;e++)n.push(i[e].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},y.getRelationalExplorerMenu=function(e,t){return{type:"PushItem",title:m.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){let i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<i.length;e++){let t=i[e].options.grid.id;n.push(t)}e.openRelationalExplorer(n)}))}}}},y.createCustomOwner=function(e,t){let i="/api/user/getpicture/login/"+t+"/format/normal",n=r.getGlobalVariable().computeSwymUrl(i),o=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),s="";if(r.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:n});else{let e=b.getAvatarDetails(t);s=UWA.createElement("div",{html:e.avatarStr,class:"avatarIcon"}),s.style.setProperty("background",e.avatarColor)}s.inject(a);let l=UWA.createElement("span",{class:"userName",html:t});return a.inject(o),l.inject(o),o.outerHTML},y.filterView=function(e){if("activeCA"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCA"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},y})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar","DS/Controls/Popup","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/Menu/ContextualMenu","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/Handlebars/Handlebars4","text!DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridProposedCAPopoverTemplate.html","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgInfraService"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u){"use strict";let g=Object.create(null);return g.getColumns=function(i,n){let o=!0;(i&&"false"===i.AddImpactedItems&&"false"===i.RemoveImpactedItems||n)&&(o=!1);let a=[];return a.push(c.getColumnDefinition({dataIndex:"titleTree"})),a.push(c.getColumnDefinition({dataIndex:"typeNLS"})),a.push(c.getColumnDefinition({dataIndex:"name"})),a.push(c.getColumnDefinition({dataIndex:"revision"})),a.push(c.getColumnDefinition({dataIndex:"reasonForChange",editableFlag:o,massUpdateAllowedFlag:o})),a.push(c.getColumnDefinition({dataIndex:"maturityWithBadge"})),a.push(c.getColumnDefinition({dataIndex:"ownerFullName"})),a.push({text:e.CHG_GOV_DataGrid_Column_ProposedCA,dataIndex:"proposedChangeAction",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!0,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){let t=e.nodeModel.options.grid.proposedChangeActionsData;if(!t)return"";switch(t.length){case 0:return"none";case 1:return t[0].title;default:return t.length}}}),a.push({text:e.CHG_COUMN_IMPACT,dataIndex:"impact",editableFlag:!n&&o,typeRepresentation:"impact",editionPolicy:"EditionOnOver",massUpdateAllowedFlag:!0,filterId:"set",filterModel:[]}),t.getGlobalVariable().is3DSpace&&(a[0].allowUnsafeHTMLContent=!0,a[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),a},g.changeView=function(t,i){if("GridView"==t)this.currentView="Grid",(n=i.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-impactedItem-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-impactedItem-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==t){var n,o,a;this.currentView="Tile",(n=i.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-impactedItem-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-impactedItem-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},g.getProposedColumnBasedOnData=function(e){if(e.length>1){let t=new UWA.createElement("a",{class:"proposedChangeActionsCount"});return t.innerText=e.length,t.outerHTML}if(1==e.length){var t=UWA.createElement("div",{class:"proposedChangeActionField"}),i=UWA.createElement("span",{class:"proposedChangeActionTitle",html:" "+e[0].title+" ("+e[0].name+")"}),n=e[0].icon;return UWA.createElement("img",{src:n}).inject(t),i.inject(t),t.outerHTML}},g.getRMBProposedChangeColumn=function(e){return new Promise((function(t,i){let n=[],o=null;e.forEach((e=>{n.push(e.id),o={objectId:e.id,objectType:e.type,displayName:e.name,displayType:e.typeNLS,facetName:"impactedItem"}}));let a=[];var s=[];const l=r.openWith(o);s.push(l);const d={};d.selectedNodeIDs=n,Promise.all(s).then((i=>{i[0]&&a.push(i[0]),a.push(p.createPropertyPushItem(n)),a.push(c.getRelationalExplorerMenu(d)),a.push(u.getCopyLink(e)),t(a)}))}))},g.getPopupProposedChangeColumn=function(e,t){let i=g.getPopupContentProposedChangeColumn(t.options.grid.proposedChangeActionsData);var n=new o({target:e,trigger:"click",constraint:widget.body,className:"wux-controls-abstract wux-controls-popup impactedItemProposedChangePopup"});n.setBody(i),t.options.grid.proposedChangeActionsData.forEach(((e,t)=>{s.addEventListener(n.elements.container.getElementsByClassName("impactedItem-proposedChange-popup-table-tr")[t],{callback:function(e){if(e.data.listener.getAttribute("data-changeId")){let t=[],i={id:e.data.listener.getAttribute("data-changeId"),type:e.data.listener.getAttribute("data-changeType"),name:e.data.listener.getAttribute("data-changeName"),typeNLS:e.data.listener.getAttribute("data-changeTypeNLS")};return t.push(i),g.getRMBProposedChangeColumn(t).then((function(e){return e}))}return[]}})}))},g.getPopupContentProposedChangeColumn=function(t){return l.compile(d)({changes:t,heading:e.CHG_GOV_DataGrid_Column_ProposedCA_Popup_Heading})},g})),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm",["UWA/Controls/Abstract","DS/UIKIT/Input/Button","DS/WUXAutoComplete/AutoComplete","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Button","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgServices/scripts/services/ChgErrors","require","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u){"use strict";var g=e.extend({init:function(e){this.options=e,this.buttons={add:null,addAnother:null},this.formField={},this.fieldElement={}},getHeading:function(){const e=this.options;let t=e.objectTitle?e.objectTitle:"";const i=this.getObjectLabel(t),n=e.title||"Add Member";return i?`${n} - ${i}`:n},getObjectLabel:function(e){return e?`${e.slice(0,50)}${e.length>50?"... ":" "}`:""},getBody:function(){var e=this;console.log("inside component");var t=UWA.createElement("div",{id:"addMemberBody",class:"addMemberBody"}),a=e.options.fields;return g.teamlayoutModel=e.options.teamlayoutModel,g.type=e.options.type,a.forEach((function(a){var s=[];let r=a.model;var l=e.fieldElement[a.id]=new i({elementsTree:function(t){return e.getMembersModel(t,a.supportType,a.searchQuery,r,a.id)},placeholder:e.getPlaceholderValue(a),minLengthBeforeSearch:3,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,disabled:null!=a.disabled&&a.disabled,visibleFlag:null==a.visibleFlag||a.visibleFlag,multiSearchMode:null==a.multiSearchMode||a.multiSearchMode,columnOptions:{autoRowHeightFlag:!0,typeRepresentation:"detailedUser"},filterCB:function(t){l.selectedItems&&l.selectedItems.length>0?"Route Template"===l.selectedItems[0].options.type?e.filterApproverAutoCompleteByType(a.supportType,t,!0,r,a.filterId):"Person"===l.selectedItems[0].options.type&&e.filterApproverAutoCompleteByType(a.supportType,t,!1,r,a.filterId):r.setFilterModel({value:{filterId:a.filterId,filterModel:{text:t}}})},getChipInfo:function(e){let t=this.getDefaultChipInfo(e).label;return"Person"===e.options.type||"Route Template"===e.options.type?{label:`${e.options.label} (${e.options.identifier})`}:{label:t}}});l.value=e.getPrefilledData(a.autoCompleteValue),a.autoComplete=l,g.elementsTree=l.elementsTree,l.addEventListener("change",(function(){e.addChangeEventListener()}));var c=new o({displayStyle:"lite",label:"Search "+a.label,tooltipInfos:{title:n.CHG_IR_AddMember_Search_Tooltip},icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1,disabled:null!=a.disabled&&a.disabled});c.getContent().setStyle("margin-left","12px").setStyle("margin-right","10px"),c.addEventListener("buttonclick",(function(){e.searchMembersHandler(a,e)}));e.fieldElement[a.id].supportType=[].concat(a.supportType||[]),s.push(l),s.push(c);var u=e.formField[a.id]=e.getFormField({id:a.id,label:a.label,fieldElement:s});u.inject(t),p.makeDroppable(u,(function(){d.error(n.CHG_GOV_Add_Members_Drag_Drop_Error,"true")}))})),t},getPrefilledData:function(e){let t=[];if(e&&e.length>0)for(const i of e)i.label="Route Template"===i.type?i.title:i.name,i.identifier=i.userid,t.push(i);return t},getPlaceholderValue:function(e){let t=n.CHG_Add_Member_Type_To_Search;return e.autoCompleteValue&&(t=""),t},dropHandler:function(e,t){var i={data:{}};i.data.items=t,console.log("Inside the handler");let n=t[0].objectId,o=t[0].serviceId;o=o&&o.includes(":")?o.split(":")[0]:o,("3DSPACE"!=o.toUpperCase()||n&&n.contains(":"))&&!t[0].i3dx?(d.warn(NLS.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped"),console.log("Service: "+o+" objectId:"+n+"i3dx:"+t[0].i3dx)):this.ExecuteDropForAddMemberPanel(i,e.id,e.autoComplete)},getMembersModel:async function(e,t,i,o,a){try{if(!e&&e.length<3)return void console.log("please type atleast 3 letters");o.getSelectedNodes();const c={contextUser:r.getGlobalVariable().contextUser,text:e,supportType:t,searchQuery:i},p={changeCoordinator:"coordinator",coordinator:"coordinator",assignee:"contributor"};let h={};g.teamlayoutModel.getAllDescendants().forEach((e=>{const t=e.options.grid;t.isRoot&&!0===t.isRoot||(h[t.id]=t.roles||[])}));let m=await l.fetchMembersList(c);m.length>999&&d.warn(n.CHG_Add_Member_Warning),o.empty(),o.prepareUpdate(),m.sort(((e,t)=>e.name.localeCompare(t.name)));for(let e=0;e<m.length;e++){const t=m[e].id;let i,n;const r=p[a]||a;if(m[e].personRole="",h.hasOwnProperty(t)&&h[t]){m[e].personRole=h[t];if(h[t].some((e=>e.toLowerCase()===r.toLowerCase())))continue}let l=[];"person"===m[e].type.toLowerCase()?(h[t]&&h[t].length>0&&h[t].forEach((e=>{l.push(u.getRoleNLSValue(e))})),i=`${m[e].name}`,n=`(${m[e].identifier.toLowerCase()}) ${l.join(", ")}`):"route template"===m[e].type.toLowerCase()?(i=m[e].name,n=`(${m[e].identifier})`):"group"===m[e].type.toLowerCase()&&(i=m[e].name);let d=new s({label:m[e].name,value:{label:i,subLabel:n},name:m[e].name,identifier:m[e].identifier,type:m[e].type,id:m[e].id});o.addRoot(d)}return o.pushUpdate(),o}catch(e){throw console.error("Error in getMembersModel:",e),e}},getFormField:function(e){var t=UWA.createElement("div",{id:"memberFormField"+e.id,class:"memberFormField",style:"margin-bottom: 5px;"}),i=UWA.createElement("div",{id:"memberFieldLabel"+e.id,class:"memberFieldLabel"}).inject(t);UWA.createElement("span",{id:"memberFieldText"+e.id,text:e.label,class:"memberFieldText"}).inject(i);if(e.fieldElement){var n=UWA.createElement("div",{id:"memberFieldElement"+e.id,class:"memberFieldElement"}).inject(t);Array.isArray(e.fieldElement)?(e.fieldElement.forEach((function(e){e.inject(n)})),n.setStyle("display","flex")):e.fieldElement.inject(n)}return t},getFooter:function(){var e=this,i=UWA.createElement("div",{id:"addMemberFormFooter"});return(e.buttons.add=new t({value:e.options.primaryButtonName?e.options.primaryButtonName:n.CHG_Add_Member_Add,className:"primary"}).inject(i)).addEvent("onClick",(function(){e.addMemberHandler()})),e.disableAddButtons(),e.addChangeEventListener(),i},enableAddButtons:function(){this.buttons.add.enable()},disableAddButtons:function(){this.buttons.add.disable()},isUserAlreadyAdded:function(e,t){let i=g.teamlayoutModel;for(let n of i.getAllDescendants())if(n.options.grid.role===t&&n.options.children&&n.options.children.length>0)for(let t of n.options.children)if(t._options.grid.id===e.pid)return!0;return!1},ExecuteDropForAddMemberPanel:function(e,t,i){try{i||(i=g.roleToSearchInfo.autoComplete);const n=[];if(e&&e.data&&e.data.items){const o=e.data.items;if(UWA.is(o)&&UWA.is(o.length)&&o.length>0){const{object3DSpacePIDArr:e,objectSwymPersonIDArr:a,objectUserUUIDArr:s}=this.getSeparateArrays(o);e.length||a.length||s.length?(this.handle3DSpaceObjects(e,i,n,t),this.handleSwymPersonObjects(a,i,n,t),this.handleUserUUIDObjects(s,i,n,t)):d.error(NLS.ECM_CA_Drop_Not_Supported)}}else console.log("NLS.ECM_CA_Drop_Not_Supported")}catch(e){console.error("An error occurred in ExecuteDropForAddMemberPanel:",e)}},getSeparateArrays:function(e){const t=[],i=[],n=[];for(const o of e)if(o.objectId){const e=o&&o.serviceId?o.serviceId.toLowerCase():void 0;null==e||e.includes("3dspace")?t.push(o.objectId):e.includes("3dswym")&&"pno:Person"===o.objectType?i.push(o.objectId.replace("iam:","")):e.includes("usersgroup")&&n.push(o)}return{object3DSpacePIDArr:t,objectSwymPersonIDArr:i,objectUserUUIDArr:n}},handle3DSpaceObjects:async function(e,t,i,n){let o=c("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices");try{const a=await o.getAdditionObjectInfo(e);for(const o of e){const e=a.additionObjectInfo[o];this.handleObject(e,t,i,n)}}catch(e){return console.log("Failed in getting person id"),Promise.reject(e)}},handleSwymPersonObjects:async function(e,t,i,n){let o=c("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices");try{const a=await o.getAdditionSwymPersonInfo(e);for(const o of e){const e=a.additionObjectInfo[o];this.handleObject(e,t,i,n)}}catch(e){return console.log("Failed in getting person id"),Promise.reject(e)}},handleUserUUIDObjects:function(e,t,i,n){for(const o of e){const e=this.createTempObjectForUserUUID(o);this.handleObject(e,t,i,n)}},handleObject:function(e,t,i,o){const a=o.toLowerCase();if(this.isUserAlreadyAdded(e,"assignee"===a?"Assignees":"approver"===a?"Approvers":"coordinator"===a||"change coordinator"===a?"Change Coordinators":"Informed Users"))console.log("This member is already added"),d.info(n.CHG_GOV_Members_AlreadyAdded,"true");else{const n=this.createNodeForPersonOrGroup(e);i.push(n),Array.isArray(t.selectedItem)?t.selectedItems=t.selectedItems.concat(i):t.selectedItems=i,t._applySelectedItems()}},createTempObjectForUserUUID:function(e){return{type:e.objectType,fullName:e.displayName,objectName:e.objectId,pid:e.objectId}},createNodeForPersonOrGroup:function(e){if("Person"===e.type)return new s({label:e.fullName,value:e.objectName,name:e.fullName,type:e.type,id:e.pid,identifier:e.objectName});if("Group"===e.type||"foaf:Group"===e.type)return new s({label:e.objectTitle?e.objectTitle:e.fullName,value:e.objectName,name:e.fullName,type:e.type,id:e.pid});if(e.type&&("Route Template"===e.type||"Route"===e.type)){l.reviewerType.typeOfReviewer;return new s({label:e.objectTitle,value:e.objectName,name:e.objectTitle,type:e.type,id:e.pid,identifier:e.objectName})}console.log("Show error message...!")},addMemberHandler:function(){const e=this;e.addMemberPanelImmerSiveFrame.remove();const t={};for(const i in e.fieldElement){t[i]={};const n=e.fieldElement[i];n.supportType.forEach((e=>{t[i][e]=[]}));const o=n.supportType.includes("routetemplate");if(n.selectedItems)if(Array.isArray(n.selectedItems))n.selectedItems.forEach((e=>{let a=r.getGlobalVariable().tenant,s=(e.options.type||e.options.value.type).toLowerCase();if("OnPremise"!=a&&"foaf:group"===s&&(s="group"),n.supportType.includes(s)){const n="group"===s?"id":"identifier",o=e.options[n]||e.options.value[n];t[i][s].push(o)}else if(o&&"route template"===s){Array.isArray(t[i].routetemplate)||(t[i].routetemplate=[]);const n=e.options.id||e.options.value.id;t[i].routetemplate.push(n)}}));else{let e=(n.selectedItems.options.type||n.selectedItems.options.value.type).toLowerCase();if("OnPremise"!=r.getGlobalVariable().tenant&&"foaf:group"===e&&(e="group"),n.supportType.includes(e)){const o="group"===e?"id":"identifier",a=n.selectedItems.options[o]||n.selectedItems.options.value[o];t[i][e].push(a)}else o&&"route template"===e&&(t[i].routetemplate=n.selectedItems.options.id)}}let i=e.options.type;e.options.addMemberSubmitHandler(t,i)},searchMembersHandler:function(e){g.roleToSearchInfo=e;let t=e.supportType;console.log("Inside search Handler");var i=e.id;let n="";switch(i){case"coordinator":case"changeCoordinator":n="Change Coordinator";break;case"Assignees":case"assignee":n="Assignee";break;case"Informed Users":case"follower":n="Follower";break;case"Approvers":case"approver":n="Approver";break;default:return void console.log("Unknown category: "+i)}this.searchMembers(n,i,t)},searchMembers:function(e,t,i){g.searchCategoty=e;let n=c("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),o=!1;if("InvestigationRequest"==g.type&&(o=!0),r.getGlobalVariable().isNative){"Approver"==e&&(e="reviewer");let t=c("DS/ENOChgServices/scripts/services/ChgNativeInitService"),i="CHG_Add_Member",n={categoryId:e.toLowerCase(),reviewerType:l.reviewerType.typeOfReviewer},o=JSON.stringify(n);t.DispatchEventToWin(i,o)}else{var a=n.activateSearch("Person","TransferOwnership");n.search(t,i,g.prototype.OnSearchComplete,"Contributors",a,void 0,void 0,void 0,void 0,void 0,void 0,g.type)}},OnSearchComplete:function(e){var t=[];if(g.approverFlag=!0,r.getGlobalVariable().isNative){let t=e.split(","),n=[];for(var i=0;i<t.length;i++)n.push(t[i]);let o=[];for(let e=0;e<t.length;e++)o.push(n[e].split(","));e=o}for(var n=0;n<e.length;n++)t.push({objectId:e[n][0],identifier:e[n][1],objectType:e[n][2],displayType:e[n][3],displayName:e[n][5],serviceId:e[n][7]});var o={data:{}};o.data.items=t,g.prototype.ExecuteDropForAddMemberPanel(o,g.searchCategoty)},addChangeEventListener:function(){var e=this;for(const i in e.fieldElement){var t=e.fieldElement[i];t?t.addEventListener("change",(function(){var t=!1;for(const n in e.fieldElement){var i=e.fieldElement[n];if(!Array.isArray(i.selectedItems)&&null!=i.selectedItems){t=!0;break}if((i.selectedItems||[]).length>0){t=!0;break}}t?(e.enableAddButtons(),console.log("Add button enabled.")):(e.disableAddButtons(),console.log("Add button disabled."))})):console.log("Field",i,"does not exist.")}},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,g.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForChangeCoordinatorField:function(e){var t={data:{}};t.data.items=e,g.ExecuteDropForAddMemberPanel(t,"Change Coordinator")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,g.ExecuteDropForAddMemberPanel(t,"Follower")},ExecuteDropForAssigneeField:function(e){var t={data:{}};t.data.items=e,g.ExecuteDropForAddMemberPanel(t,"Assignee")},filterApproverAutoCompleteByType:function(e,t,i,n,o){var a=[];"Both"==e?(a.push("Route Template"),a.push("Person")):a.push(e),!0===i?"Route Template"===e&&n.setFilterModel({type:{filterId:"set",filterModel:[null]}}):n.setFilterModel({type:{filterId:"set",filterModel:a},value:{filterId:o,filterModel:{text:t}}})}});return g})),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/LifecycleCmd/MaturityCmd","DS/Controls/ProgressBar","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";var D=Object.create(null);return D.getColumns=function(){let e=[];return e.push(C.getColumnDefinition({dataIndex:"titleTree"})),e.push(C.getColumnDefinition({dataIndex:"co_name"})),e.push(C.getColumnDefinition({dataIndex:"maturityWithBadge"})),"true"===i.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(C.getColumnDefinition({dataIndex:"ApprovalStatus"})),e.push(C.getColumnDefinition({dataIndex:"severityNLS"})),e.push(C.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(C.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(C.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(C.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(C.getColumnDefinition({dataIndex:"applicabilityNLS"})),e.push(C.getColumnDefinition({dataIndex:"modificationDate"})),e.push(C.getColumnDefinition({dataIndex:"creationDate"})),e},D.getRelationalExplorerMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){var t={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>RMB>Relations"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){for(var t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<t.length;o++){var a=t[o].options.grid.id;n.push(a)}e.openRelationalExplorer(n)}))}}}},D.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){var t={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>RMB>Move"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});for(var n=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(o)}))}}}},D.getDeleteMenu=function(t,i,n,o){return{type:"PushItem",title:e.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>RMB>Delete"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});for(var t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),s=[],r=0;r<t.length;r++){var l=t[r],d={physicalid:l.options.grid.id,nodeName:l.options.grid.name,nodeTitle:l.options.grid.title};s.push(d)}a.deleteNodes(s,n,o)}}}},D.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:i.getGlobalVariable().tenant,objectId:e.id,openLink:!0}),t},D.showNotification=function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=u,g.setNotificationManager(window.notifs)),a?g.inject(a):g.elements.container.isInjected()||g.inject(),window.notifs.addNotif(r)},D.changeView=function(i){if(widget.body.getDimensions().width<=n.MOBILE_CUTOFF?o.updateCASummaryViewMobile(i):o.updateCASummaryViewDesktop(i),"GridView"==i)this.currentView="Grid",(a=t.toolbar.getNodeModelByID("view"))&&"view-list"!=a.options.grid.semantics.icon.iconName&&a.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),a.options.grid.data.menu[0].state="selected",a.options.grid.data.menu[1].state="unselected",(s=document.querySelector(".cogridView"))&&(s.removeClassName("hideView"),s.removeClassName("nonVisible"),s.addClassName("showView")),(r=document.querySelector(".cotileView"))&&(r.removeClassName("showView"),r.addClassName("hideView"));else if("TileView"==i){var a,s,r;this.currentView="Tile",(a=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=a.options.grid.semantics.icon.iconName&&a.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),a.options.grid.data.menu[0].state="unselected",a.options.grid.data.menu[1].state="selected",(s=document.querySelector(".cogridView"))&&(s.removeClassName("showView"),s.addClassName("hideView")),(r=document.querySelector(".cotileView"))&&(r.removeClassName("hideView"),r.addClassName("showView"))}},D.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);var a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},D.createCustomOwner=function(e,t){var n="/api/user/getpicture/login/"+t+"/format/normal",o=i.getGlobalVariable().computeSwymUrl(n),a=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{var d=s.getAvatarDetails(t);(l=UWA.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=UWA.createElement("span",{class:"userName",html:t});return r.inject(a),c.inject(a),a.outerHTML},D.filterView=function(e){if("activeCO"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCO"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},D})),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w){"use strict";var _={getDataToBuildAddMemberPanel:function(e){_.teamlayoutModel=e.model,_.options=e,_.modelForApprover=new u,this.filterByTrigramHandler()},setDataForAddMember:function(e){var t=this,n=[];return n.push({label:m.CHG_GOV_Members_DataGrid_Approver,id:"approver",model:_.modelForApprover,getListOfUsers:t.getMembersListForApprover,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Approver",customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","routetemplate"],autoCompleteValue:_.options.approversList?_.options.approversList:""}),{title:m.CHG_GOV_Disposition_ManageApprovers,objectTitle:_.objectTitle,target:_.options.target,fields:n,addMemberSubmitHandler:t.addmember,searchFromModelAndUniqAndAdd:a.searchFromModelAndUniqAndAdd,teamlayoutModel:_.teamlayoutModel,makeDroppable:i.makeDroppable,type:"Disposition",primaryButtonName:t.setAddButtonName()}},launchAddMemberPanel:function(){var i={commandInfo:{type:"Investigation Request",facet:"Members",action:"Disposition>Approvers>AddApprovers"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});var n=_.setDataForAddMember();if(n.frameHeight="147",null==_.options.dispositionID)console.log("No Disposition Exists"),d.warn("create disposition to add approvers");else{var o=new e(n);(new t).buildAddMemberDialog(o)}},setAddButtonName:function(){let e=m.CHG_Add_Member_Add;return _.options.approversList&&_.options.approversList.length>0&&(e=m.CHG_Add_Member_UpdateButton),e},filterByTrigramHandler:function(){_.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new h).getTrigramNameFilter())},dragAndDropHandler:function(){var e=_.options.target.querySelector("#memberFieldElementchangeCoordinator");i.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForChangeCoordinatorField:function(e){return e},updateApproversCellForDisposition:function(e){console.log("update aapprivers handler");let t=e.nodeModel._options.grid.approvers,i=e.nodeModel._options.grid.dispositionInformation[0].approvers;console.log("approvers",t);const n={approver:{person:[],routetemplate:[]}};t.forEach((e=>{const t=(e.type||e.value.type).toLowerCase(),i=e.userid?"userid":"identifier",o=e[i]||e.value[i];"person"===t||"group"===t?n.approver[t].push(o):"route template"===t&&n.approver.routetemplate.push(e.id)}));let o=e.nodeModel._options.grid.dispositionInformation[0].dispositionId;this.addmember(n,"Disposition",o,i)},addmember:async function(e,t,i,n){let a=_.options?_.options.model.getSelectedNodes():void 0;n&&_.options&&_.options.approversList&&(_.options.approversList=n);let s=_.options?_.options.approversList:n;s||(console.warn("Approvers list is undefined or empty."),s=[]);let r=e.approver?e.approver:"";i=_.options?_.options.dispositionID:i;var l="";let d,c,p;if(s){const e=(await _.findRemovedPerson(s,r)).approver;e&&(e.person.length>0||e.routetemplate.length>0)&&(l=v.makeUpdateMemberJson("DISCONNECT","",e,"","",t),p=e,d=await o.updateDispositionApprovers(i,l),c=d.data),!r||0==r.person.length&&0==r.routetemplate.length||(l=v.makeUpdateMemberJson("CONNECT","",r,"","",t),d=await o.updateDispositionApprovers(i,l),c=d.data)}else l=v.makeUpdateMemberJson("CONNECT","",r,"","",t),d=await o.updateDispositionApprovers(i,l),c=d.data,require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],(function(e){e&&e.handleDispositionMaturityEvent(a)}));await _.updateApproversColumn(a,c,r,s,p);var u=i,g="";if(a[0].options.grid.dispositionInformation[0].AffectedItemInformation)g=a[0].options.grid.dispositionInformation;else{var h=[];h.push({dispositionIds:[u]});let e=await o.getDispositionInfo(_.options.id,h);g=await w.enrichDispositionInfo(e.data[0].doTargetDisposition)}let m="update";I.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:u,dispInfo:g,action:m}),I.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:u,dispInfo:g,action:m}),I.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:u,dispInfo:g,action:m}),I.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:u,dispInfo:g,action:m})},findRemovedPerson:async function(e,t){let i=[];const n=t.person||[],o=t.routetemplate||[];e.forEach((e=>{const t=e.type?e.type.toLowerCase():"",a="route template"===t?e.id:e.userid;("route template"===t?o.includes(a):n.includes(a))||("person"===t?i.push({userid:e.userid,type:e.type}):"route template"===t&&i.push({id:e.id,type:e.type}))}));const a=i.filter((e=>"person"===(e.type?e.type.toLowerCase():""))).map((e=>e.userid)),s=i.filter((e=>"route template"===(e.type?e.type.toLowerCase():""))).map((e=>e.id));return{approver:{person:a,routetemplate:s},actionType:a.length>0||s.length>0?"DISCONNECT":"CONNECT"}},getUniqueList:function(e,t){let i=[],n=e.map((e=>e.userid));for(let e=0;e<t.length;e++){let o=t[e];n.includes(o)||i.includes(o)||i.push(o)}return i},removeDuplicates:function(e){return e.filter(((e,t,i)=>t===i.findIndex((t=>t.userid===e.userid))))},updateApproversColumn:function(e,t,i,n,o){e&&e.length&&t&&(n?this.updateExistingApprovers(e,t,n,o):this.updateCombinedApprovers(e,t))},updateExistingApprovers:async function(e,t,i,n){if(t&&0!==t.length){const o=i.filter((e=>{const t=e.type?e.type.toLowerCase():"";if(n){if("person"===t)return!n.person.includes(e.userid);if("route template"===t)return!n.routetemplate.includes(e.id)}return!0})),a=t.filter((e=>{const t=e.type?e.type.toLowerCase():"";if(n){if("person"===t)return!n.person.includes(e.userid);if("route template"===t)return!n.routetemplate.includes(e.id)}return!0})),s=o.concat(a),r=this.removeDuplicates(s),l=D.addApproversUserIconMethod(r);for(const t of e)t.updateOptions({grid:{approvers:l}});const d=e[0]._options.grid.dispositionInformation[0];d.approvers=(d.approvers,r)}else{const i=await D.addApproversDefaultMethod();for(const t of e)t.updateOptions({grid:{approvers:i}});e[0]._options.grid.dispositionInformation[0].approvers=t}},updateCombinedApprovers:function(e,t){let i=t;e[0]._options.grid.dispositionInformation[0]&&e[0]._options.grid.dispositionInformation[0].approvers&&(i=[...e[0]._options.grid.dispositionInformation[0].approversList,...t]);const n=Array.from(new Set(i.map((e=>e.userid)))).map((e=>i.find((t=>t.userid===e))));for(const t of e){const e=D.addApproversUserIconMethod(n);t.updateOptions({grid:{approvers:e}})}if(e[0]._options.grid.dispositionInformation[0])e[0]._options.grid.dispositionInformation[0].approvers=n;else{[].push([]),e[0]._options.grid.dispositionInformation=[{}],e[0]._options.grid.dispositionInformation[0].approvers=n}}};return _})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgPropertiesServices","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D){"use strict";var I={showRMBMenuOnGrid:async function(e,t,i){let o=[];try{"true"==s.getGlobalVariable().CHG_APPROVAL_COLUMN&&t.cellInfos.nodeModel.options.grid.approvalStatusModel&&await v.getColumnApprovalStatusMenu(t.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){o.push(e)}))}catch(e){console.error(e)}var a=new Promise((function(i,a){var r="false",l=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();l.length>1&&(r="true");var d=[];const c=l.map((e=>e.options.grid.id));d.push(n.createPropertyPushItem(c)),d.push(I.getRelationalExplorerMenu(t));var p={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(p);var u=C("DS/ENOChgServices/scripts/services/ChgDataService"),g=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),h=C("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"),v=null,D=g.openWith(p),w=t.cellInfos.nodeModel.options.grid.isKindOfChangeAction,_=t.cellInfos.nodeModel.options.grid.isKindOfChangeRequest,b=[],S=document.getElementById("outer-co-div");"false"==r&&b.push(D),"false"==r&&(v=1==w?g.getUserAccess("pid:"+t.cellInfos.nodeModel.options.grid.id):1==_?u.getChangeRequestUserAccess(t.cellInfos.nodeModel.options.grid.id):u.getChangeOrderUserAccess(t.cellInfos.nodeModel.options.grid.id),b.push(v)),Promise.all(b).then((function(n){if(n[0]&&d.push(n[0]),d.push(f.getMaturityMenu(t)),"false"==r&&d.push(m.getCopyLink(l)),"false"==r&&1==w){if(n[1]&&"true"==n[1].userAccess.Transfer&&d.push(I.getTransferMenu(t)),n[1]&&"true"==n[1].userAccess.Delete&&d.push(I.getDeleteMenu(e,t,S,h.removeDeletedNodesUsingIDs)),"true"==s.getGlobalVariable().CHG_APPROVAL_COLUMN&&o.length>0)for(let e=0;e<o[0].length;e++)d.push(o[0][e])}else if("false"==r){if(n[1]&&"true"==n[1].data[0].dataelements.TransferOwnership&&d.push(I.getTransferMenu(t)),n[1]&&"true"==n[1].data[0].dataelements.Delete&&d.push(I.getDeleteMenu(e,t,S,h.removeDeletedNodesUsingIDs)),"true"==s.getGlobalVariable().CHG_APPROVAL_COLUMN&&o.length>0)for(let e=0;e<o[0].length;e++)d.push(o[0][e])}else d.push(I.getTransferMenu(t)),d.push(I.getDeleteMenu(e,t,S,h.removeDeletedNodesUsingIDs));i(d)}))}));return a},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:o.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>RMB>Relations"}};D.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++){var a=i[o].options.grid.id;n.push(a)}t.openRelationalExplorer(n)}))}}}},getTransferMenu:function(e){return{type:"PushItem",title:o.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>RMB>Move"}};D.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(o)}))}}}},getDeleteMenu:function(e,t,n,a){return{type:"PushItem",title:o.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){var o={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>RMB>Delete"}};D.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:o});for(var s=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),r=[],l=0;l<s.length;l++){var d=s[l],c={physicalid:d.options.grid.id,nodeName:d.options.grid.name,nodeTitle:d.options.grid.title};r.push(c)}i.deleteNodes(r,n,a,e)}}}}};return I})),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],(function(e,t,i,n,o,a,s,r,l,d,c){"use strict";var p={showRMBMenuOnGrid:async function(e,t,a){let d=[];try{"true"==o.getGlobalVariable().CHG_APPROVAL_COLUMN&&t.cellInfos.nodeModel.options.grid.approvalStatusModel&&await c.getColumnApprovalStatusMenu(t.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){d.push(e)}))}catch(e){console.error(e)}var p=new Promise((function(c,p){var u="false",g=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const h=g.map((e=>e.options.grid.id));g.length>1&&(u="true");var m=[];m.push(n.createPropertyPushItem(h)),m.push(i.getRelationalExplorerMenu(e,t));var C={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(C);var f=l("DS/ENOChgServices/scripts/services/ChgDataService"),v=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),D=l("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),I=null,w=v.openWith(C),_=t.cellInfos.nodeModel.options.grid.isKindOfChangeAction,b=[],S=document.getElementById("outer-co-div");"false"==u&&(b.push(w),I=1==_?v.getUserAccess("pid:"+t.cellInfos.nodeModel.options.grid.id):f.getChangeOrderUserAccess(t.cellInfos.nodeModel.options.grid.id),b.push(I));let y=null;if(a){var E=l("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout");y=E.removeDeletedNodesUsingIDs}else{var O=l("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout");y=O.removeDataFromGrid}Promise.all(b).then((function(n){if(n[0]&&m.push(n[0]),"false"==u&&1==_){var a=n[1].userAccess;if(a=s.processAccessBitCO(a),(n[1]&&"true"==a.Promote||"true"==a.Demote)&&m.push(D.getMaturityMenu(t)),m.push(r.getCopyLink(g)),n[1]&&"true"==a.Transfer&&m.push(i.getTransferMenu(e,t)),n[1]&&"true"==a.Delete&&m.push(i.getDeleteMenu(e,t,S,y)),"true"==o.getGlobalVariable().CHG_APPROVAL_COLUMN&&d.length>0)for(let e=0;e<d[0].length;e++)m.push(d[0][e])}else if("false"==u){a=n[1].data[0].dataelements;if(a=s.processAccessBitCO(a),(n[1]&&"true"==a.Promote||"true"==a.Demote)&&m.push(D.getMaturityMenu(t)),m.push(r.getCopyLink(g)),n[1]&&"true"==a.TransferOwnership&&m.push(i.getTransferMenu(e,t)),n[1]&&"true"==a.Delete&&m.push(i.getDeleteMenu(e,t,S,y)),"true"==o.getGlobalVariable().CHG_APPROVAL_COLUMN&&d.length>0)for(let e=0;e<d[0].length;e++)m.push(d[0][e])}else"true"==o.getGlobalVariable().isFullLicence&&m.push(D.getMaturityMenu(t)),m.push(r.getCopyLink(g)),m.push(i.getTransferMenu(e,t)),"true"==o.getGlobalVariable().isFullLicence&&m.push(i.getDeleteMenu(e,t,S,y));c(m)}))}));return p},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:changeCoordinator","ds6w:organizationResponsible","ds6w:modified","ds6w:created"];for(let t of n)e.delete(t);return e.forEach(((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)})),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:s.getGetCellValueFunction(i,t)}}};return p})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgPropertiesServices","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/Utilities/DateUtils"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=Object.create(null);function p(e){var t=new Date(e);return d.formatDateToString(t,{datePrecision:"day",dateStyle:"medium",timePrecision:"min"})}function u(e,t){return e>t?1:e==t?0:e<t?-1:void 0}return c.getColumns=function(){var t=[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",ds6wIndexMapping:"ds6w:label",editableFlag:!1,alwaysVisibleFlag:!0,allowUnsafeHTMLContent:!1,pinned:"left",width:150,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"ia_name",ds6wIndexMapping:"ds6w:identifier",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellGroupingKey:function(e){return e.nodeModel.options.grid.Name},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"ownerFullName",ds6wIndexMapping:"ds6w:responsible",editableFlag:!1,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){if(i.getGlobalVariable().isSwymInstalled){var t="/api/user/getpicture/login/"+e.nodeModel.getAttributeValue("owner")+"/format/normal";return{icon:t=i.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.getAttributeValue("ownerFullName")}}return{label:e.nodeModel.getAttributeValue("ownerFullName")}}},getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",ds6wIndexMapping:"ds6w:status",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],typeRepresentation:"tag",className:"lc-maturity-state",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute";if(e.nodeModel){var t,i=e.nodeModel.options.grid.maturity;if(i){if(!1===i.contains("."))i=e.nodeModel.getReferenceValue("policy")+"."+i;t=l.getAndCreateMaturityClass(i,"wux-controls-label")}return t}},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("maturityNLS")}},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_IA_Column_Refinement,dataIndex:"refinement",editableFlag:!1,visibleFlag:!0,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("refinement")}},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From,dataIndex:"dispFrom",editableFlag:!1,visibleFlag:!0,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("dispFrom")}},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_Title,dataIndex:"dispFromTitle",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("dispFromTitle")}},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_DataGrid_Column_ImpactBasis,dataIndex:"countImpactBasis",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countImpactBasis")},setCellValue:function(e,t){}},{text:e.CHG_GOV_DataGrid_Column_ImpactedItem,dataIndex:"countImpactedItems",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countImpactedItems")}},{text:e.CHG_GOV_IA_Column_Disp_From_Due_Date,dataIndex:"abstractChangeAnalysisDueDate",ds6wIndexMapping:"ds6w:dueDateParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if("Aggregation"!=e.nodeModel.options.grid.title&&e.nodeModel.options.grid.dueDate!=e.nodeModel.options.grid.title)return function(e){var t="";if(""!=e.nodeModel.options.grid.dueDate&&e.nodeModel.options.grid.dueDate!=s.CHG_NOT_VALID_VALUE){var i=parseInt(widget.getPreference("dueDateApproach").value+1,10),n="",o=new Date;o.setHours(0,0,0,0);var a=new Date(e.nodeModel.options.grid.dueDate),r=e.nodeModel.options.grid.dueDate;a.setHours(0,0,0,0),n=""===(n=Math.ceil(Math.abs(a-o)/864e5)<=i&&a>=o?"dueDateApproach":"")&&a<o?"overdue":n;var l=" "+a.toLocaleString("default",{month:"short"})+" "+a.getDate()+", "+a.getFullYear();UWA.is(n,"string")&&""!==n&&"In Work"==e.nodeModel.options.grid.maturity?"dueDateApproach"===n?t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"fonticon fonticon-clock",styles:{color:"orange"}},{tag:"span",html:p(r)}]}):"overdue"===n&&(t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"fonticon fonticon-attention",styles:{color:"red"}},{tag:"span",html:p(r)}]})):t=UWA.createElement("div",{class:"target-approaching-overdue",html:p(r)})}else{l="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:l})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_EstimatedStartDate,dataIndex:"estimatedStartDate",ds6wIndexMapping:"ds6w:plannedStartParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if("Aggregation"!=e.nodeModel.options.grid.title&&e.nodeModel.options.grid.estimatedStartDate!=e.nodeModel.options.grid.title)return function(e){var t="";if(""!=e.nodeModel.options.grid.estimatedStartDate&&e.nodeModel.options.grid.estimatedStartDate!=s.CHG_NOT_VALID_VALUE){var i=parseInt(widget.getPreference("dueDateApproach").value+1,10),n="",o=new Date;o.setHours(0,0,0,0);var a=new Date(e.nodeModel.options.grid.estimatedStartDate);a.setHours(0,0,0,0);var r=e.nodeModel.options.grid.estimatedStartDate;n=""===(n=Math.ceil(Math.abs(a-o)/864e5)<=i&&a>=o?"dueDateApproach":"")&&a<o?"overdue":n;var l=" "+a.toLocaleString("default",{month:"short"})+" "+a.getDate()+", "+a.getFullYear();UWA.is(n,"string")&&""!==n&&"Draft"==e.nodeModel.options.grid.maturity?"dueDateApproach"===n?t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"fonticon fonticon-clock",styles:{color:"orange"}},{tag:"span",html:p(r)}]}):"overdue"===n&&(t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"fonticon fonticon-attention",styles:{color:"red"}},{tag:"span",html:p(r)}]})):t=UWA.createElement("div",{class:"target-approaching-overdue",html:p(r)})}else{l="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:l})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_EstimatedCompletionDate,dataIndex:"estimatedEndDate",ds6wIndexMapping:"ds6w:plannedEndParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if("Aggregation"!=e.nodeModel.options.grid.title&&e.nodeModel.options.grid.estimatedEndDate!=e.nodeModel.options.grid.title)return function(e){var t="";if(""!=e.nodeModel.options.grid.estimatedEndDate&&e.nodeModel.options.grid.estimatedEndDate!=s.CHG_NOT_VALID_VALUE){parseInt(widget.getPreference("dueDateApproach").value+1,10);var i="",n=new Date(e.nodeModel.options.grid.estimatedEndDate),o=new Date(e.nodeModel.options.grid.dueDate),a=e.nodeModel.options.grid.estimatedEndDate;o.setHours(0,0,0,0),n.setHours(0,0,0,0),i=""===i&&n>o?"overdue":i;var r=" "+n.toLocaleString("default",{month:"short"})+" "+n.getDate()+", "+n.getFullYear();t=UWA.is(i,"string")&&""!==i&&"In Work"==e.nodeModel.options.grid.maturity?UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"overdue"===i?"fonticon fonticon-attention":"",styles:{color:"red"}},{tag:"span",html:p(a)}]}):UWA.createElement("div",{class:"target-approaching-overdue",html:p(a)})}else{r="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:r})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_CompletionDateActual,dataIndex:"completionDateActual",ds6wIndexMapping:"ds6w:actualEndParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if(e.nodeModel.options.grid.completionDateActual&&e.nodeModel.options.grid.completionDateActual!=e.nodeModel.options.grid.title)return function(e){var t="";if("Complete"==e.nodeModel.options.grid.maturity&&""!=e.nodeModel.options.grid.completionDateActual&&e.nodeModel.options.grid.completionDateActual!=s.CHG_NOT_VALID_VALUE){(new Date).setHours(0,0,0,0);var i="",n=new Date(e.nodeModel.options.grid.completionDateActual),o=e.nodeModel.options.grid.completionDateActual;if(""!=e.nodeModel.options.grid.dueDate&&e.nodeModel.options.grid.dueDate!=s.CHG_NOT_VALID_VALUE){var a=new Date(e.nodeModel.options.grid.dueDate);a.setHours(0,0,0,0),n.setHours(0,0,0,0),i=""===i&&n>a?"overdue":i}var r=" "+n.toLocaleString("default",{month:"short"})+" "+n.getDate()+", "+n.getFullYear();t=UWA.is(i,"string")&&""!==i&&"Complete"==e.nodeModel.options.grid.maturity?UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"overdue"===i?"fonticon fonticon-attention":"",styles:{color:"red"}},{tag:"span",html:p(o)}]}):UWA.createElement("div",{class:"target-approaching-overdue",html:p(o)})}else{r="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:r})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_StartDateActual,dataIndex:"startDateActual",ds6wIndexMapping:"ds6w:actualStartParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if(e.nodeModel.options.grid.startDateActual&&e.nodeModel.options.grid.startDateActual!=e.nodeModel.options.grid.title)return function(e){var t="";if(""!=e.nodeModel.options.grid.startDateActual&&e.nodeModel.options.grid.startDateActual!=s.CHG_NOT_VALID_VALUE){var i=new Date(e.nodeModel.options.grid.startDateActual),n=e.nodeModel.options.grid.startDateActual;i.setHours(0,0,0,0);var o=" "+i.toLocaleString("default",{month:"short"})+" "+i.getDate()+", "+i.getFullYear();e.nodeModel.options.grid.startDateActual&&(t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{tag:"span",html:p(n)}]}))}else{o="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:o})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)}},{text:e.CHG_GOV_DataGrid_Column_Attachment,dataIndex:"countAttachment",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countAttachment")}}];if("true"==i.getGlobalVariable().ECMEnableChangeAnalysisActivity_InWork){var n=l.getColumnDefinition({dataIndex:"ApprovalStatus"});n.getCellClassName=function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},t.splice(6,0,n)}i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title});let o=[{dataIndex:"attribute",text:e.CHG_IA_COLUMN_GROUP_ATTRIBURES,children:[{text:e.CHG_GOV_DataGrid_Column_Benefit_Impact,dataIndex:"benefitImpact",editableFlag:!1,filterId:"number",filterModel:"",typeRepresentation:"integer",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter((e=>"false"!=e.options.grid.benefitImpactValid&&"Cancelled"!=e.options.grid.maturity));let n=0,o=0,a=0;for(var i=0;i<t.length;i++)isNaN(t[i].options.grid.benefitImpact)||(n+=t[i].options.grid.benefitImpact,a++);return o=Math.round(n/a),o}return e.nodeModel.getAttributeValue("benefitImpact")}},{text:e.CHG_GOV_DataGrid_Column_Cost_Impact,dataIndex:"costImpact",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter((e=>"false"!=e.options.grid.costImpactValid&&"Cancelled"!=e.options.grid.maturity));let n=0,o=0,a=0;for(var i=0;i<t.length;i++)isNaN(t[i].options.grid.costImpact)||(n+=t[i].options.grid.costImpact,a++);return o=Math.round(n/a),o}return e.nodeModel.getAttributeValue("costImpact")}},{text:e.CHG_GOV_DataGrid_Column_Validation_Effort,dataIndex:"validationEffort",editableFlag:!1,filterId:"number",filterModel:"",typeRepresentation:"string",allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter((e=>"false"!=e.options.grid.validationEffortValid&&"Cancelled"!=e.options.grid.maturity));var i=0;let o=0,a=0;for(var n=0;n<t.length;n++)isNaN(t[n].options.grid.validationEffort)||(i+=parseFloat(t[n].options.grid.validationEffort),a++);return o=i/a,`&#x2211;  ${i} | x&#772; ${o} `}return e.nodeModel.getAttributeValue("validationEffort")}},{text:e.CHG_GOV_DataGrid_Column_Risk_Impact,dataIndex:"riskImpact",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter((e=>"false"!=e.options.grid.riskImpactValid&&"Cancelled"!=e.options.grid.maturity));let n=0,o=0,a=0;for(var i=0;i<t.length;i++)isNaN(t[i].options.grid.riskImpact)||(n+=t[i].options.grid.riskImpact,a++);return o=Math.round(n/a),o}return e.nodeModel.getAttributeValue("riskImpact")}},{text:e.CHG_GOV_DataGrid_Column_Implementation_Effort,dataIndex:"implementationEffort",editableFlag:!1,typeRepresentation:"string",filterId:"number",filterModel:"",allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&u(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter((e=>"false"!=e.options.grid.implementationEffortValid&&"Cancelled"!=e.options.grid.maturity));var i=0;let o=0,a=0;for(var n=0;n<t.length;n++)isNaN(t[n].options.grid.implementationEffort)||(i+=parseFloat(t[n].options.grid.implementationEffort),a++);return o=i/a,`&#x2211; ${i} |  x&#772; ${o}`}return e.nodeModel.getAttributeValue("implementationEffort")}}]}];return"true"==i.getGlobalVariable().ECMEnableDefaultChangeAnalysis&&(o[0].children[0].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Benefit Impact",o[0].children[1].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Cost Impact",o[0].children[2].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Validation Effort",o[0].children[3].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Risk Impact",o[0].children[4].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Implementation Effort",t=[...t,...o]),t},c.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-impactAnalysis-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".impactAnalysisTileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-impactAnalysis-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".impactAnalysisTileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},c.getRMBForChangeRequest=function(e,t){return new Promise(((i,n)=>{let s=[],d={objectId:e.id,objectType:e.type,displayName:e.name,displayType:e.typeNLS},c=[];c.push(e.id),s.push(a.createPropertyPushItem(c)),s.push(r.getRelationalExplorerMenu(void 0,t,c)),s.push(l.getMaturityMenu(void 0,e.id)),o.openWith(d).then((e=>{s.splice(2,0,e),i(s)}))}))},c.createCustomOwner=function(e,t){var o="/api/user/getpicture/login/"+t+"/format/normal",a=i.getGlobalVariable().computeSwymUrl(o),s=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:a});else{var d=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=UWA.createElement("span",{class:"userName",html:t});return r.inject(s),c.inject(s),s.outerHTML},c.filterView=function(e,i){if("activeIA"==e)this.currentFilterView="activeIA",(n=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",n.options.grid.data.menu[2].state="unselected",setTimeout((function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],(function(e){e.ChgCRImpactAnalysisTreeModel.empty();e.refreshGrid({filterView:"activeIA"})}))}),100);else if("inactiveIA"==e){this.currentFilterView="inactiveIA",(n=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",n.options.grid.data.menu[2].state="unselected",setTimeout((function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],(function(e){e.ChgCRImpactAnalysisTreeModel.empty();e.refreshGrid({filterView:"inactiveIA"})}))}),100)}else if("rolledUpIA"==e){var n;this.currentFilterView="rolledUpIA",(n=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="unselected",n.options.grid.data.menu[2].state="selected",setTimeout((function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],(function(e){e.ChgCRImpactAnalysisTreeModel.empty();e.refreshGrid({filterView:"rollecdUpIA"})}))}),100)}},c.filterInactiveIAView=function(){that.filterView("inactiveIA")},c})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesUtil",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityColumns","DS/CfgWebAppEffectivityUX/scripts/CfgConfigurationContextColumn"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";return{getColumns:function(t){return[i.getColumnDefinition({dataIndex:"titleTree",width:260}),{dataIndex:"title_instance",ds6wIndexMapping:"ds6w:label",text:l.CHG_GOV_DataGrid_Column_Title,icon:"flow-cascade",width:200,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!0},i.getColumnDefinition({dataIndex:"typeNLS"}),i.getColumnDefinition({dataIndex:"name"}),i.getColumnDefinition({dataIndex:"revision"}),i.getColumnDefinition({dataIndex:"maturityWithBadge",width:80}),{dataIndex:"reasonForChange",text:l.Chg_GOV_Reason_For_Change,editableFlag:!0,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"editor",editionPolicy:"EditionOnOver",getCellEditableState:function(t){let i=!0;return t&&t.nodeModel&&(!1!==t.nodeModel.getAttributeValue("isReasonForChangeEditable")&&e.is(t.nodeModel.getAttributeValue("activity_id"))&&"TRUE"!==t.nodeModel.getAttributeValue("isTransferred")&&"TRUE"!==t.nodeModel.getAttributeValue("isIgnored")||(i=!1)),i}},{dataIndex:"change",text:l.CHG_GOV_Realized_Changes,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"url",width:65,getCellValue:function(e){if(e.nodeModel)return{icon:e.nodeModel.getAttributeValue("activity_icon")}}},{dataIndex:"change_details",text:l.CHG_GOV_Realized_Change_Details,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0},{dataIndex:"moved_to_ca",text:l.CHG_GOV_Realized_Moved_TO,editableFlag:!1,width:150,visibleFlag:"MOVED"===t,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0},{dataIndex:"reasonForMove",text:l.CHG_GOV_Realized_Reason_For_Move,editableFlag:!1,visibleFlag:"MOVED"===t,alwaysVisibleFlag:!1,sortableFlag:!1}]},getEffectivityCustomColumns:function(){var e=[];return m.isAdditionalColumnsAvailable((function(t){if(!0===t){m._columnDataIndex.forEach((t=>{e.push(m._columnDefDGV[t])}))}})),C.isAdditionalColumnsAvailable((function(t){if(!0===t){C._columnDataIndex.forEach((t=>{e.push(C._columnDefDGV[t])}))}})),e},getBeforeNativeContextualMenu:function(e,t,i){let n=[];var o=this;let a,r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),l=[],d=[],c={cellInfos:{nodeModel:{}}};r.forEach((function(e){c.cellInfos.nodeModel=e,a=o.fetchReleventIdsforBeforeCommands(c),l.push(a.activityReferenceID),d.push(a.activityInstanceID?a.activityInstanceID:a.activityReferenceID),"false"===a.authoringCommandsAvailable&&!1}));let p=l,u=d;var g={};return g.instanceID=u,g.objectID=p,n.push(s.getExploreMenu(null,g)),n.push(s.getExploreWithMenu(null,g)),n.push(s.getOpenMenu(null,g)),{type:"PushItem",title:"BeforeNativeContextualMenu",submenu:n}},getNativeContextualMenu:async function(e,t,i){let n=[];var o=this;let a,r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),l=!1;r.length>1&&(l=!0);let d=[],c=[];if(l){let l={cellInfos:{nodeModel:{}}};r.forEach((function(e){l.cellInfos.nodeModel=e,a=o.fetchReleventIds(l),d.push(a.activityReferenceID),c.push(a.activityInstanceID?a.activityInstanceID:a.activityReferenceID),"false"===a.authoringCommandsAvailable&&(i=!1)}));let u=d;return(p={}).instanceID=c,p.objectID=u,p.objectType=e.objectType,n.push(s.getExploreMenu(null,p)),n.push(s.getExploreWithMenu(null,p)),n.push(s.getOpenMenu(null,p)),n.push(s.getOpenAdvMenu(null,p)),n.push(s.getOpenROMenu(null,p)),(await this.getCommonMenu(e,t,i)).forEach((e=>{n.push(e)})),n}{a=o.fetchReleventIds(t);let r=a.activityReferenceID,l=a.activityInstanceID;var p;return(p={}).instanceID=l,p.objectID=r,9!==t.cellInfos.columnID&&(n.push(s.getExploreMenu(null,p)),n.push(s.getExploreWithMenu(null,p)),n.push(s.getOpenMenu(null,p)),n.push(s.getOpenAdvMenu(null,p)),n.push(s.getOpenROMenu(null,p))),(await this.getCommonMenu(e,t,i)).forEach((e=>{n.push(e)})),n}},getDashboardContextualMenu:async function(t,i,n,o,a){let r=[],d=!1;if(i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(d=!0),!d){let d,c=await this.getOpenWithMenu(i);e.is(c)&&r.push(c),(await this.getCommonMenu(t,i,n,o,a)).forEach((e=>{r.push(e)})),d=this.fetchReleventIds(i);let p=d.activityReferenceID,u=d.previousReferenceID,g={type:"PushItem",title:l.CHG_GOV_Realized_Compare_Previous,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-part-compare"},action:{callback:function(e){var t=[];p&&t.push(p),u&&t.push(u),s.openCompareApp(t)}}};return 9!==i.cellInfos.columnID&&r.push(g),r}return(await this.getCommonMenu(t,i,n,o,a)).forEach((e=>{r.push(e)})),r},getOpenWithMenu:async function(e){let t,i=!1;if(g.getGlobalVariable().is3DSpace&&!window.x3DPlatformServices&&!window.COMPASS_CONFIG){const e=getTopWindow().document.createElement("div");e.id="hiddenDivForCompassInNewWindow",e.style.display="none",getTopWindow().document.body.appendChild(e),window.COMPASS_CONFIG={myAppsBaseUrl:g.getGlobalVariable().baseURL,userId:"",lang:navigator.language,compassTarget:e.id}}if(e.cellInfos.columnID&&9===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.moved_to_ca_details)t={objectId:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.id,objectType:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.type,displayName:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.title,displayType:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.typeNLS};else if(e.cellInfos.columnID&&8===e.cellInfos.columnID&&(e.cellInfos.nodeModel.options.grid.before_ref_details||e.cellInfos.nodeModel.options.grid.before_details))e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?t={objectId:e.cellInfos.nodeModel.options.grid.before_ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(t="Configured Removal"==e.cellInfos.nodeModel.options.grid.change?{objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0]}:{objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0]});else{e.cellInfos.nodeModel.options.grid.isInstanceOperation&&"TRUE"==e.cellInfos.nodeModel.options.grid.isInstanceOperation&&(i=!0),!i&&e.cellInfos.nodeModel.options.grid.where_details&&e.cellInfos.nodeModel.options.grid.where_details.id?t={objectId:e.cellInfos.nodeModel.options.grid.where_details.id,objectType:e.cellInfos.nodeModel.options.grid.where_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"}:e.cellInfos.nodeModel.options.grid.ref_details&&e.cellInfos.nodeModel.options.grid.ref_details.id?t={objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"}:i&&e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(t={objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"});var n={facetName:"RealizedDGV",selectedItem:t};s.setSelectedItem(n)}return await s.openWith(t)},fetchReleventIdsforBeforeCommands:function(e){let t={};if(e.options.grid.before_ref_details||e.options.grid.before_details){let i,n;e.options.grid.before_ref_details&&e.options.grid.before_ref_details.id?(i=e.options.grid.before_ref_details.id,n=e.options.grid.before_details.id):e.options.grid.before_details&&e.options.grid.before_details.id&&(i=e.options.grid.before_details.id),t.activityReferenceID=i,t.activityInstanceID=n}return t},fetchReleventIds:function(e){let t,i,n,o,a,s,r,l=!1;e.cellInfos.columnID&&9===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.moved_to_ca_details?(t=e.cellInfos.nodeModel.options.grid.moved_to_ca_details.id,r=!1):e.cellInfos.columnID&&8===e.cellInfos.columnID&&(e.cellInfos.nodeModel.options.grid.before_ref_details||e.cellInfos.nodeModel.options.grid.before_details)?(e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(t=e.cellInfos.nodeModel.options.grid.before_ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&("Configured Removal"==e.cellInfos.nodeModel.options.grid.change?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):t=e.cellInfos.nodeModel.options.grid.before_details.id),r=!1):(e.cellInfos.nodeModel.options.grid.isInstanceOperation&&"TRUE"==e.cellInfos.nodeModel.options.grid.isInstanceOperation&&(l=!0),l?e.cellInfos.nodeModel.options.grid.after_details&&e.cellInfos.nodeModel.options.grid.after_details.id?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.after_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&(n=e.cellInfos.nodeModel.options.grid.before_details.id)):e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(e.cellInfos.nodeModel.options.grid.ref_details?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):t=e.cellInfos.nodeModel.options.grid.before_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,s=e.cellInfos.nodeModel.options.grid.revision):(t=e.cellInfos.nodeModel.options.grid.where_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,s=e.cellInfos.nodeModel.options.grid.revision,e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(n=e.cellInfos.nodeModel.options.grid.before_details.id)));let d={};return d.activityReferenceID=t,d.activityInstanceID=i,d.previousReferenceID=n,d.previousInstanceID=o,d.activityLabel=a,d.activityRev=s,d.isInstanceOperation=l,d.authoringCommandsAvailable=r,d},getCommonMenu:async function(e,t,n,o,s){var p=this;let u,g=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),m=!1;g.length>1&&(m=!0);let C=[],f=[];if(m){let e={cellInfos:{nodeModel:{}}};g.forEach((function(t){e.cellInfos.nodeModel=t,u=p.fetchReleventIds(e),C.push(u.activityReferenceID),f.push(u.activityInstanceID?u.activityInstanceID:u.activityReferenceID),"false"===u.authoringCommandsAvailable&&(n=!1)}))}else u=p.fetchReleventIds(t);if(m){let t=C;var v=[];if(!0===n){if(1==o){let e={type:"PushItem",title:l.CHG_GOV_Realized_Ignore_Cmd,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-ignore"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Ignore"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:""))}}};v.push(e)}if(1==s){let e={type:"PushItem",title:l.CHG_GOV_Realized_Move_Cmd,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},submenu:[{type:"PushItem",title:l.CHG_GOV_Realized_Move_New,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Move>New Change Action"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:"New"})}}},{type:"PushItem",title:l.CHG_GOV_Realized_Move_Existing,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-insert"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Move>Existing Change Action"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:"Existing"})}}}]};v.push(e)}}const c={};c.selectedNodeIDs=t,v.push(i.getRelationalExplorerMenu(c));let p={type:"PushItem",title:l.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Download"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),d.download(t)}}},u={type:"PushItem",title:l.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye"},action:{callback:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Preview"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),d.preview(t)}}};await d.getDocuments(t);v.push(p),v.push(u);let g=!1;return e.sourceType&&"LEGACY_3DSPACE"!=e.sourceType&&(g=!0),v.push(a.createPropertyPushItem(f,g)),v}let D=u.activityReferenceID,I=u.activityInstanceID,w=(u.previousReferenceID,u.previousInstanceID,u.activityLabel,u.activityRev);u.isInstanceOperation;v=[];if(!0===(n=null!=u.authoringCommandsAvailable?u.authoringCommandsAvailable:n)){if(1==o){let e={type:"PushItem",title:l.CHG_GOV_Realized_Ignore_Cmd,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-ignore"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Ignore"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:""))}}};v.push(e)}if(1==s){let e={type:"PushItem",title:l.CHG_GOV_Realized_Move_Cmd,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},submenu:[{type:"PushItem",title:l.CHG_GOV_Realized_Move_New,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Move>New Change Action"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:"New"})}}},{type:"PushItem",title:l.CHG_GOV_Realized_Move_Existing,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-insert"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Move>Existing Change Action"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:"Existing"})}}}]};v.push(e)}}const _={};_.selectedNodeIDs=I&&void 0===D?[I]:[D],v.push(i.getRelationalExplorerMenu(_));t.cellInfos.nodeModel.options.grid.operation&&t.cellInfos.nodeModel.options.grid.operation.trim();let b=l.CHG_Change_Impact_Command_Label;"TRUE"===t.cellInfos.nodeModel.options.grid.isInstanceOperation&&(b=l.CHG_Change_Impact_Instance_Command_Label);let S={type:"PushItem",title:b,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Change Impacts"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});let n=t.cellInfos.nodeModel.options.grid.title;let o={};o.objectID=I||D,o.label=n,o.objectRevision=w,o.objectType=t.cellInfos.nodeModel.options.grid.type,o.serviceId="3DSpace",o.modalTitle=b,c.launchImpactsView(o)}}};t.cellInfos.columnID&&9===t.cellInfos.columnID&&t.cellInfos.nodeModel.options.grid.moved_to_ca_details||v.push(S);let y={type:"PushItem",title:l.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Download"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),d.download([D])}}},E={type:"PushItem",title:l.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Preview"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),d.preview([D])}}},O=await d.getDocuments([D]);O&&O[0]&&O[0].dataelements&&"TRUE"===O[0].dataelements.isDocumentType&&(v.push(y),v.push(E));let G=!1;return e.sourceType&&"LEGACY_3DSPACE"!=e.sourceType&&(G=!0),v.push(a.createPropertyPushItem([e.id],G)),v}}})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],(function(e,t,i,n,o,a){"use strict";var s=Object.create(null);return s.getColumns=function(){var t=[];return t.push(o.getColumnDefinition({dataIndex:"titleTree"})),t.push(o.getColumnDefinition({dataIndex:"typeNLS"})),t.push(o.getColumnDefinition({dataIndex:"name"})),t.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),t.push(o.getColumnDefinition({dataIndex:"revision"})),t.push(o.getColumnDefinition({dataIndex:"collabspaceNLS"})),t.push(o.getColumnDefinition({dataIndex:"organizationNLS"})),t.push({text:e.CHG_IR_Affected_Items_Affected_As,dataIndex:"affectedAsIRNLS",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"141",filterId:"stringRegexp",filterModel:""},{text:e.CHG_IR_Affected_Items_Introduced_In,dataIndex:"introducedIn",editableFlag:!1,allowUnsafeHTMLContent:!0,visibleFlag:!1,alwaysVisibleFlag:!1,width:"150",filterId:"stringRegexp",filterModel:""},{text:e.CHG_IR_Affected_Items_Fixed_In,dataIndex:"fixedIn",editableFlag:!1,allowUnsafeHTMLContent:!0,visibleFlag:!1,alwaysVisibleFlag:!1,width:"150",filterId:"stringRegexp",filterModel:""},{dataIndex:"Disposition",text:e.CHG_IR_Affected_Items_Disposition,children:[o.getColumnDefinition({dataIndex:"dispositionName"}),{text:e.CHG_IR_Affected_Items_Disposition_Revision,dataIndex:"dispositionRevision",editableFlag:!1,allowUnsafeHTMLContent:!0,width:65,filterId:"stringRegexp",filterModel:""},o.getColumnDefinition({dataIndex:"dispositionType"}),{dataIndex:"dispositionOwner",text:e.CHG_IR_Affected_Items_Disposition_Owner,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel)if(n.getGlobalVariable().isSwymInstalled){if(e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]){var t="/api/user/getpicture/login/"+e.nodeModel.options.grid.dispositionInformation[0].dispositionOwner+"/format/normal";return{icon:t=n.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}}}else if(e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0])return{label:e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},{dataIndex:"dispositionMaturity",ds6wIndexMapping:"ds6w:status",text:e.CHG_IR_Affected_Items_Disposition_Maturity,typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel&&e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]&&e.nodeModel.options.grid.dispositionInformation[0].dispostionId){var t=e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState;return t=e.nodeModel.options.grid.dispositionInformation[0].dispositionPolicy+"."+t,o.getAndCreateMaturityClass(t,"wux-controls-label")}}},{dataIndex:"ApprovalStatus",text:a.getName(),editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],compareFunction:function(e,t){return a.compareApprovalStatus(e,t)},getCellValue:function(e){if(e.nodeModel&&e.nodeModel.options.grid.ApprovalStatus)return{icon:e.nodeModel.options.grid.ApprovalStatus.icon,label:e.nodeModel.options.grid.ApprovalStatus.label,func:e.nodeModel.options.grid.ApprovalStatus.func}}},o.getColumnDefinition({dataIndex:"approvers"}),o.getColumnDefinition({dataIndex:"dispositionResolvedBy"})]}),n.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),t},s})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){let e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-context-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-context-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-context-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-context-tile-div"))&&(a.removeClassName("hideView"),a.removeClassName("nonVisible"),a.addClassName("showView"))}},a})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){let e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),"true"===i.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(o.getColumnDefinition({dataIndex:"ApprovalStatus"})),e.push(o.getColumnDefinition({dataIndex:"severityNLS"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(o.getColumnDefinition({dataIndex:"applicabilityNLS"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-CA-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-CA-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-CA-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-CA-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","require","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u){"use strict";var g={showRMBMenuOnGrid:function(e,t){return new Promise((function(t,i){const a=[];let l=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),d=[],c=[],p=[],u=l.length>1;l.forEach((e=>{d.push(e.options.grid.id),c.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!==e.options.grid.sourceType&&p.push(e.options.grid.serviceBasedObjId)}));const h=r("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),m=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),C=r("DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu"),f=e.cellInfos.nodeModel.options.grid.id,v=e.cellInfos.nodeModel.options.grid.type,D=e.cellInfos.nodeModel.options.grid.name,I=e.cellInfos.nodeModel.options.grid.displayType,w=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,_=[v];e.cellInfos.nodeModel.options.grid.kind&&""!==e.cellInfos.nodeModel.options.grid.kind&&_.concat(e.cellInfos.nodeModel.options.grid.kind);const b={objectId:void 0!==w?w:f,objectType:v,objectTaxonomies:_,displayName:D,displayType:I,facetName:"dependency"},S=(e.cellInfos.nodeModel.options.grid.title,h.openWith(b));o.getGlobalVariable().ECM_EnableChangeImpactsEnforcementForCR;let y=[];y.selectedNodeIDs=d,u?(p.length>0&&(a.push(n.createPropertyPushItem(p)),a.push(m.getRelationalExplorerMenu(y)),a.push(m.getMaturityMenu(void 0,p)),a.push(g.getTransferMenu(e)),a.push(C.getDownloadMenu(p)),1===p.length&&a.push(C.getPreviewMenu(p))),t(a)):(p.length>0&&a.push(n.createPropertyPushItem(p)),a.push(m.getRelationalExplorerMenu(y)),S.then((i=>{i&&a.push(i),p.length>0&&(a.push(m.getMaturityMenu(e)),a.push(g.getTransferMenu(e))),s.getDocuments(p).then((function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(a.push(C.getDownloadMenu(p)),a.push(C.getPreviewMenu(p))),t(a)})).catch((e=>{console.log(e),t(a)}))})))}))},showRMBMenuOnGridForDispositionCell:async function(e,t,i){let a=[];const s=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");try{e.cellInfos.nodeModel.options.grid.dispositionInformation[0];e.cellInfos.nodeModel.options.grid.approvalStatusModel&&await p.getColumnApprovalStatusMenu(e.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){a.push(e)}))}catch(e){console.error(e)}return new Promise((function(r,l){const d=[];let p=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),u={model:e.cellInfos.nodeModel.getTreeDocument(),dispositionID:p[0]._options.grid.dispositionInformation?p[0]._options.grid.dispositionInformation[0].dispostionId:p[0]._options.grid.dispositionInformation[0].dispositionId,approversList:p[0]._options.grid.dispositionInformation?p[0]._options.grid.dispositionInformation[0].approvers:""},h=e.cellInfos.nodeModel.options.grid.dispositionInformation[0],m=h.dispositionId?h.dispositionId:h.dispostionId;if(m){let l=[e.cellInfos.nodeModel.options.productID],p=[m],C=[];C.selectedNodeIDs=p,d.push(n.createPropertyPushItem(p)),d.push(s.getRelationalExplorerMenu(C));let f={node:e.cellInfos.nodeModel,selectedNodeIds:p[0],arrayOFaffectedItems:l,funcationality:"reviseDisposition"};"true"==o.getGlobalVariable().isFullLicence&&h&&"true"==h.dispositionAccessBits[0].Refine&&d.push(c.reviseDisposition(f)),"true"==o.getGlobalVariable().isFullLicence&&h&&"true"==h.dispositionAccessBits[0].Replace&&(d.push(c.replaceDisposition(t,p[0],l,e)),d.push(c.replaceByExistingDisposition(t,e))),"true"==o.getGlobalVariable().isFullLicence&&h&&"true"==h.dispositionAccessBits[0].Remove&&d.push(c.removeDisposition(p[0],l,e,i)),h&&"true"==h.dispositionAccessBits[0].Move&&d.push(c.getDispositionTransferMenu(e)),"true"==o.getGlobalVariable().isFullLicence&&h&&"true"==h.dispositionAccessBits[0]["Manage Approver"]&&d.push(g.getManageApprovers(u)),a.length>0&&a[0].forEach((e=>{d.push(e)})),r(d)}else r(d)}))},showRMBMenuOnGridForResolvedByCell:function(e){const t=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");return new Promise((function(i,a){const s=[];let l=e.cellInfos.nodeModel.options.grid.dispositionInformation?e.cellInfos.nodeModel.options.grid.dispositionInformation[0]:"";if(l&&l.resolvedByInformation&&l.resolvedByInformation[0]){let a;if(l.resolvedByInformation[0].indexResolvedBy&&l.resolvedByInformation[0].indexResolvedBy[0]?a=l.resolvedByInformation[0].indexResolvedBy[0]:l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]&&(a=l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]),a){let d=r("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),p=(l.dispositionId?l.dispositionId:l.dispostionId,a.resolvedById),u=a.resolvedByName,g=a.resolvedByType,h=[p],m=[];m.selectedNodeIDs=h,s.push(n.createPropertyPushItem(h)),s.push(t.getRelationalExplorerMenu(m));let C={node:e.cellInfos.nodeModel,resolvedByIds:h,funcationality:"removeResolvedBy"};"true"==o.getGlobalVariable().isFullLicence&&l&&"true"==l.dispositionAccessBits[0]["Manage Resolved By"]&&s.push(c.removeResolvedBy(C));let f={objectId:p,objectType:g,displayName:u,displayType:g},v=[d.openWith(f)];Promise.all(v).then((function(e){e[0]&&s.push(e[0]),i(s)}))}else i(s)}else i(s)}))},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Move"}};d.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)"CSD"!=n[a].options.grid.sourceType&&o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(o)}))}}}},getManageApprovers:function(e){return{id:"ManageApprovers",type:"PushItem",title:t.CHG_GOV_Disposition_ManageApprovers,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-user-pencil"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"IR>Affected Items>RMB>ManageApprovers"}};d.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),r("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout").addApproverHandler(e)}}}}};return g})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(e){let t=!1;void 0!==e&&"true"===e.AddImpactBasis&&"true"===e.RemoveImpactBasis&&(t=!0);let n=[];return n.push(o.getColumnDefinition({dataIndex:"titleTree"})),n.push(o.getColumnDefinition({dataIndex:"typeNLS"})),n.push(o.getColumnDefinition({dataIndex:"name"})),n.push(o.getColumnDefinition({dataIndex:"revision"})),n.push(o.getColumnDefinition({dataIndex:"reasonForChange",editableFlag:t,massUpdateAllowedFlag:t})),n.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),n.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),i.getGlobalVariable().is3DSpace&&(n[0].allowUnsafeHTMLContent=!0,n[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),n},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-impactBasis-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-impactBasis-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-impactBasis-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-impactBasis-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"revision"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-relatedScope-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-relatedScope-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-relatedScope-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-relatedScope-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemUtil",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u){"use strict";return{getColumns:function(){return[t.getColumnDefinition({dataIndex:"titleTree"}),t.getColumnDefinition({dataIndex:"typeNLS"}),t.getColumnDefinition({dataIndex:"name"}),t.getColumnDefinition({dataIndex:"revision"}),t.getColumnDefinition({dataIndex:"maturityWithBadge"}),t.getColumnDefinition({dataIndex:"collabspaceNLS"}),t.getColumnDefinition({dataIndex:"organizationNLS"})]},getNativeContextualMenu:async function(e,t){let i=[];var n={objectID:[]};return e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().forEach((e=>{n.objectID.push(e.options.grid.id)})),i.push(o.getExploreMenu(null,n)),i.push(o.getExploreWithMenu(null,n)),i.push(o.getOpenMenu(null,n)),i.push(o.getOpenAdvMenu(null,n)),i.push(o.getOpenROMenu(null,n)),(await this.getCommonMenu(e,t)).forEach((e=>{i.push(e)})),i},getDashboardContextualMenu:async function(e,t){let i=[],n=!1;if(e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(n=!0),!n){let t=await this.getOpenWithMenu(e);t&&i.push(t)}return(await this.getCommonMenu(e,t)).forEach((e=>{i.push(e)})),i},getOpenWithMenu:async function(e){let t,i;if(r.getGlobalVariable().is3DSpace&&!window.x3DPlatformServices&&!window.COMPASS_CONFIG){const e=getTopWindow().document.createElement("div");e.id="hiddenDivForCompassInNewWindow",e.style.display="none",getTopWindow().document.body.appendChild(e),window.COMPASS_CONFIG={myAppsBaseUrl:r.getGlobalVariable().baseURL,userId:"",lang:navigator.language,compassTarget:e.id}}if(e.cellInfos.nodeModel.options.grid.id&&e.cellInfos.nodeModel.options.grid.id){let a=e.cellInfos.nodeModel.options.grid.id,s=e.cellInfos.nodeModel.options.grid.type,r=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,l=[];l.push(s),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(l=l.concat(e.cellInfos.nodeModel.options.grid.kind)),i={objectId:r||a,objectType:s,objectTaxonomies:l,facetName:"ResolutionDGV"};var n={facetName:"ResolutionDGV",selectedItem:i};o.setSelectedItem(n),t=await o.openWith(i)}return t},getCommonMenu:async function(e,i){var n=[];let o=e.cellInfos.nodeModel.options.grid.id,s=e.cellInfos.nodeModel.options.grid.title,r=e.cellInfos.nodeModel.options.grid.revision,g=(e.cellInfos.nodeModel.options.grid.serviceBasedObjId,!1);e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(g=!0);let h=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),m=[],C=[],f=[];h.forEach((e=>{m.push(e.options.grid.id),C.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&f.push(e.options.grid.serviceBasedObjId)}));const v={};if(v.selectedNodeIDs=C,n.push(t.getRelationalExplorerMenu(v)),!g){let t={type:"PushItem",title:u.CHG_Change_Impact_Command_Label,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){let i={};i.objectID=o,i.label=s,i.objectRevision=r,i.objectType=e.cellInfos.nodeModel.options.grid.type,i.serviceId=e.cellInfos.nodeModel.options.grid.serviceName,d.launchImpactsView(i)}}};n.push(t)}let D,I={type:"PushItem",title:u.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(e){f.length>0?t.download(f):p.warn(u.CHG_GOV_Download_Skipped)}}},w={type:"PushItem",title:u.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye"},action:{callback:function(e){f.length>0?a.preview(f):p.warn(u.CHG_GOV_Download_Skipped)}}};if(1==C.length&&(D=await a.getDocuments(f)),(g||D&&D[0]&&D[0].dataelements&&"TRUE"===D[0].dataelements.isDocumentType)&&(n.push(I),n.push(w)),n.push(l.createPropertyPushItem(C)),"true"==i.removeProposedAccess){let t={type:"PushItem",title:u.CHG_GOV_Proposed_RemoveResolution,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(t){var n={id:i.id,type:i.type,proposedOperation:i.proposedOperation,updateAction:"DISCONNECT"},o=[];e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().forEach((function(e){o.push({id:e.options.grid.id,service:e.options.grid.serviceName,type:e.options.grid.type})})),n.resolution=o;var a=[n];c.publish("ECM_GOV_ProposedDGV_RemoveResolution:"+(widget?widget.id:""),a)}}};n.push(t)}return n}}})),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"revision"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-CO-relatedScope-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-CO-relatedScope-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-CO-relatedScope-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-CO-relatedScope-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionAffectedItemsUtil",["DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],(function(e,t,i,n,o,a,s,r){"use strict";var l=Object.create(null);return l.getColumns=function(){let t=[];return e=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),t.push(e.getColumnDefinition({dataIndex:"titleTree"})),t.push(e.getColumnDefinition({dataIndex:"typeNLS"})),t.push(e.getColumnDefinition({dataIndex:"name"})),t.push(e.getColumnDefinition({dataIndex:"revision"})),t.push(e.getColumnDefinition({dataIndex:"maturityWithBadge"})),t.push(e.getColumnDefinition({dataIndex:"collabspaceNLS"})),t.push(e.getColumnDefinition({dataIndex:"organizationNLS"})),t},l.getNativeContextualMenu=async function(e,i){let n=[];var o={objectID:[]};return e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().forEach((e=>{o.objectID.push(e.options.grid.id)})),n.push(t.getExploreMenu(null,o)),n.push(t.getExploreWithMenu(null,o)),n.push(t.getOpenMenu(null,o)),n.push(t.getOpenAdvMenu(null,o)),n.push(t.getOpenROMenu(null,o)),(await this.getCommonMenu(e,i)).forEach((e=>{n.push(e)})),n},l.getDashboardContextualMenu=async function(e,t){let i=[],n=!1;if(e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(n=!0),!n){let t=await this.getOpenWithMenu(e);t&&i.push(t)}return(await this.getCommonMenu(e,t)).forEach((e=>{i.push(e)})),i},l.getOpenWithMenu=async function(e){let i,o;if(n.getGlobalVariable().is3DSpace&&!window.x3DPlatformServices&&!window.COMPASS_CONFIG){const e=getTopWindow().document.createElement("div");e.id="hiddenDivForCompassInNewWindow",e.style.display="none",getTopWindow().document.body.appendChild(e),window.COMPASS_CONFIG={myAppsBaseUrl:n.getGlobalVariable().baseURL,userId:"",lang:navigator.language,compassTarget:e.id}}if(e.cellInfos.nodeModel.options.grid.id&&e.cellInfos.nodeModel.options.grid.id){let n=e.cellInfos.nodeModel.options.grid.id,s=e.cellInfos.nodeModel.options.grid.type,r=[];r.push(s),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(r=r.concat(e.cellInfos.nodeModel.options.grid.kind)),o={objectId:n,objectType:s,objectTaxonomies:r,facetName:"AffectedDGV"};var a={facetName:"AffectedDGV",selectedItem:o};t.setSelectedItem(a),i=await t.openWith(o)}return i},l.getCommonMenu=async function(t,i){var n=[];t.cellInfos.nodeModel.options.grid.id,t.cellInfos.nodeModel.options.grid.title,t.cellInfos.nodeModel.options.grid.revision,t.cellInfos.nodeModel.options.grid.serviceBasedObjId;let a=!1;t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(a=!0);let s=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),l=[],d=[],c=[];s.forEach((e=>{l.push(e.options.grid.id),d.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&c.push(e.options.grid.serviceBasedObjId)}));const p={};return p.selectedNodeIDs=d,e=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),n.push(e.getRelationalExplorerMenu(p)),n.push(o.createPropertyPushItem(d)),n},l})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridCol",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/TreeDocument"],(function(e,t,i,n,o,a){"use strict";var s=Object.create(null);return s.getColumns=function(){var n=[];return n.push(t.getColumnDefinition({dataIndex:"titleTree"})),n.push(t.getColumnDefinition({dataIndex:"name"})),n.push(t.getColumnDefinition({dataIndex:"revision"})),n.push(t.getColumnDefinition({dataIndex:"maturityWithBadge"})),n.push({text:o.CHG_IR_Affected_Items_Affected_As,dataIndex:"affectedAsIRNLS",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"141",filterId:"stringRegexp",filterModel:""},{dataIndex:"Disposition",text:o.CHG_IR_Affected_Items_Disposition,children:[t.getColumnDefinition({dataIndex:"dispositionName"}),{text:o.CHG_IR_Affected_Items_Disposition_Revision,dataIndex:"dispositionRevision",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"65",filterId:"stringRegexp",filterModel:""},t.getColumnDefinition({dataIndex:"dispositionType"}),{dataIndex:"dispositionOwner",text:o.CHG_IR_Affected_Items_Disposition_Owner,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(t){if(t.nodeModel)if(e.getGlobalVariable().isSwymInstalled){if(t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0]){var i="/api/user/getpicture/login/"+t.nodeModel.options.grid.dispositionInformation[0].dispositionOwner+"/format/normal";return{icon:i=e.getGlobalVariable().computeSwymUrl(i),label:t.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}}}else if(t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0])return{label:t.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},{dataIndex:"dispositionMaturity",ds6wIndexMapping:"ds6w:status",text:o.CHG_IR_Affected_Items_Disposition_Maturity,typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel&&e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]&&e.nodeModel.options.grid.dispositionInformation[0].dispostionId){var i=e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState;return i=e.nodeModel.options.grid.dispositionInformation[0].dispositionPolicy+"."+i,t.getAndCreateMaturityClass(i,"wux-controls-label")}}},{dataIndex:"ApprovalStatus",text:i.getName(),visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],compareFunction:function(e,t){return i.compareApprovalStatus(e,t)},getCellValue:function(e){if(e.nodeModel&&e.nodeModel.options.grid.ApprovalStatus)return{icon:e.nodeModel.options.grid.ApprovalStatus.icon,label:e.nodeModel.options.grid.ApprovalStatus.label,func:e.nodeModel.options.grid.ApprovalStatus.func}}},{dataIndex:"approvers",text:o.CHG_GOV_Members_DataGrid_Approver,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],massUpdateAllowedFlag:!0,semantics:{possibleValues:async function(e){let i=new a;try{let n=await t.getApproversSuggestionsUpdate(e,["person","routetemplate"],void 0,i);return console.log("Approvers List:",n),n}catch(e){return console.error("Error fetching approvers:",e),[]}},allowMultipleValuesFlag:!0},minLengthBeforeSearch:3},t.getColumnDefinition({dataIndex:"dispositionResolvedBy"})]}),e.getGlobalVariable().is3DSpace&&(n[0].allowUnsafeHTMLContent=!0,n[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),n},s})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n){"use strict";var o=Object.create(null);return o.getColumns=function(){var t=[];return t.push(n.getColumnDefinition({dataIndex:"titleTree"})),t.push(n.getColumnDefinition({dataIndex:"typeNLS"})),t.push(n.getColumnDefinition({dataIndex:"name"})),t.push(n.getColumnDefinition({dataIndex:"revision"})),t.push(n.getColumnDefinition({dataIndex:"maturityWithBadge"})),t.push(n.getColumnDefinition({dataIndex:"collabspaceNLS"})),t.push(n.getColumnDefinition({dataIndex:"organizationNLS"})),t.push(n.getColumnDefinition({dataIndex:"reasonForChange",editableFlag:!0})),t.push({text:e.CHG_GOV_DataGrid_Column_ImpactAnalysis,dataIndex:"countImpactAnalysis",editableFlag:!1,typeRepresentation:"url",filterId:"number",filterModel:"",getCellValue:function(e){if(e.nodeModel){return{label:e.nodeModel.getAttributeValue("countImpactAnalysis")}}}}),t.push(n.getColumnDefinition({dataIndex:"ownerFullName"})),i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),t},o.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-affectedItems-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".affectedItemsTileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-affectedItems-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".affectedItemsTileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},o})),define("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";return e.extend({init:function(e){this._parent(e),this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}},this._modelEvents=null,"undefined"!=e&&"undefined"!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.coDatagridView=""},loadCustomColumns:function(){let e=f.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){var e=this.processColumns(),t=this,g={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCOSummaryGrid",useWidgetPreferencesFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(t,e).then((function(e){return e}));e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){s.readyDragContent(e,t)},onDragStartCell:function(e,t){s.readyDragContent(e,t)}};g=UWA.merge(g,this.options),this.coDatagrid=new n(g),this.coDatagrid.cellSelection="none",this.coDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,i){C.onCustomViewsSave(e,i,t.options.custom_view_options)},this.coTilesView=new u({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){s.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(t,e).then((function(e){return e}))}};this.coTilesView.onContextualEvent=m;var f={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:l.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:l.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},v={expandInput:{stdTemplate:"expandInputtemplate"}},D={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.coDatagrid.getTypeRepresentationFactory().registerTypeTemplates(D),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}}),a.toolbar=this.coDatagrid.setToolbar(a.writetoolbarDefination(this.options)),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(D),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(v),(t=this).toolbar.addEventListener("onReady",(function(e){var i=t.toolbar.getNodeModelByID("addNewBlankCAId");i&&i._associatedView.registerkeyDownCallback(p.createBlankChangeOrder)})),this.coDatagrid.addEventListener("allCellsRendered",(function(){t.coDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+t.coDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.coTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+t.coTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+t.coTilesView.getTreeDocument().getSelectedNodes().length}}])})),t.coDatagrid.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),t.coDatagrid.getTreeDocument().getXSO().onAdd((function(e){t.coDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}),t.coTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}),t._modelEvents.publish({event:"co-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})})),t.coDatagrid.getTreeDocument().getXSO().onRemove((function(e){t.coDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.coTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?t._modelEvents.publish({event:"co-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):t._modelEvents.publish({event:"co-DataGrid-on-unselect",data:{model:e,context:e},context:e})})),t.coTilesView.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=C.debouncingHandler((function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount)i.nodeModel.select(!0),t._modelEvents.publish({event:"co-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel});else if(i&&2==i.columnID){var n={};n.cellInfos=i,C.executeMaturity(n)}}),500),this.coDatagridView=UWA.createElement("div",{id:"outer-co-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-co-div"});var I=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-co-div"});this.toolbar.inject(I);var w=UWA.createElement("div",{class:"content-co-div cogridView showView"}),_=UWA.createElement("div",{class:"cotileView hideView"}),b=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_DataGrid_PlaceHolder}).inject(b),this.coDatagrid.inject(w),this.coTilesView.inject(_),b.inject(_),this.coDatagridView.addContent(I),this.coDatagridView.addContent(w),this.coDatagridView.addContent(_),this.coDatagridView.inject(this.options.target),this.coDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.subscribe({event:"co-DataGrid-on-search"},(function(e){if("false"==h.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.coDatagrid.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"co-DataGrid-on-reset-search"},(function(e){var i=t.coDatagrid.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.options.custom_view_options.dgvHandle=this.coDatagrid,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=w,this.loader=(new o).inject(this.options.target);let S=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];C.registerCustomEventsOnDGV(S,this.coDatagrid,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.coDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){m("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout").loadingViewPreference()}}})})),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){let e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-CO-issue-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-CO-issue-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-CO-issue-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-CO-issue-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n){"use strict";var o=Object.create(null);return o.getColumns=function(){var t=[];return t.push(n.getColumnDefinition({dataIndex:"dispositionName"})),t.push({text:e.CHG_IR_Affected_Items_Disposition_Revision,dataIndex:"dispositionRevision",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"65",filterId:"stringRegexp",filterModel:""}),t.push(n.getColumnDefinition({dataIndex:"dispositionType"})),t.push({dataIndex:"dispositionOwner",text:e.CHG_IR_Affected_Items_Disposition_Owner,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel)if(i.getGlobalVariable().isSwymInstalled){if(e.nodeModel.options.grid&&e.nodeModel.options.grid.dispositionInformation[0]){var t="/api/user/getpicture/login/"+e.nodeModel.options.grid.dispositionInformation[0].dispositionOwner+"/format/normal";return{icon:t=i.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}}}else if(e.nodeModel.options.grid&&e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName)return{label:e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.dispositionInformation[0].dispositionInformation[0].dispositionOwnerFullName}}),t.push({dataIndex:"affectedItemsLabel",text:e.CHG_GOV_Home_Tab_AffectedItems,editableFlag:!1,allowUnsafeHTMLContent:!0,width:"220",filterId:"stringRegexp",filterModel:""}),t.push({dataIndex:"dispositionMaturity",ds6wIndexMapping:"ds6w:status",text:e.CHG_GOV_DataGrid_Column_Maturity,typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel&&e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]&&e.nodeModel.options.grid.dispositionInformation[0].dispostionId){var t=e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState;return t=e.nodeModel.options.grid.dispositionInformation[0].dispositionPolicy+"."+t,n.getAndCreateMaturityClass(t,"wux-controls-label")}}}),t.push(n.getColumnDefinition({dataIndex:"ApprovalStatus"})),t.push(n.getColumnDefinition({dataIndex:"approvers"})),t.push(n.getColumnDefinition({dataIndex:"dispositionResolvedBy"})),i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),t},o.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-dispositions-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".dispositionsTileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-dispositions-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".dispositionsTileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},o})),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";var a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"chgObjName"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),"true"===i.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(o.getColumnDefinition({dataIndex:"ApprovalStatus"})),e.push(o.getColumnDefinition({dataIndex:"severityNLS"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(o.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(o.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(o.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(o.getColumnDefinition({dataIndex:"applicabilityNLS"})),e[2].compareFunction=function(e,t,i,n,o){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0},i.getGlobalVariable().is3DSpace&&(e[0].allowUnsafeHTMLContent=!0,e[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-orchestration-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".orchestrationtileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-orchestration-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".orchestrationtileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);var a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},a.createCustomOwner=function(e,t){var o="/api/user/getpicture/login/"+t+"/format/normal",a=i.getGlobalVariable().computeSwymUrl(o),s=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:a});else{var d=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=UWA.createElement("span",{class:"userName",html:t});return r.inject(s),c.inject(s),s.outerHTML},a})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o){"use strict";var a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"chgObjName"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),"true"===i.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(o.getColumnDefinition({dataIndex:"ApprovalStatus"})),e.push(o.getColumnDefinition({dataIndex:"severityNLS"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(o.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(o.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(o.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(o.getColumnDefinition({dataIndex:"applicabilityNLS"})),e[2].compareFunction=function(e,t,i,n,o){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0},i.getGlobalVariable().is3DSpace&&(e[0].allowUnsafeHTMLContent=!0,e[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-orchestration-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".orchestrationtileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-orchestration-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".orchestrationtileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);var a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},a.createCustomOwner=function(e,t){var o="/api/user/getpicture/login/"+t+"/format/normal",a=i.getGlobalVariable().computeSwymUrl(o),s=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:a});else{var d=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=UWA.createElement("span",{class:"userName",html:t});return r.inject(s),c.inject(s),s.outerHTML},a})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesModel",["UWA/Core","UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgErrors","DS/TreeModel/BaseFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u=c.inherit({publishedProperties:{},isDataFiltered:function(e){var t;if(t=e.options.grid,this.filterModel&&this.filterModel.allowedIDs){var i=this.filterModel.allowedIDs;return!(t.where_details&&t.where_details.id&&i.includes(t.where_details.id))&&(!(t.ref_details&&t.ref_details.id&&i.includes(t.ref_details.id))&&!(t.after_details&&t.after_details.id&&i.includes(t.after_details.id)))}return!1},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return t.extend({init:function(e){e||(e={}),this._parent(e),this.options=e,this.treeDocument=null},resetModel:function(){this.treeDocument.empty()},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},setFilterModel:function(e){this.treeDocument.setFilterModel(e)},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",u)},createTreeDocument:function(){this.treeDocument=new i({id:"ChgCARealizedChangesTreeDoc",useAsyncPreExpand:!0}),this.treeDocument.onNodeModelUpdate((function(t){var i=t.data.nodeModel;if(i&&(t.data.attributes.reasonForChange||""==t.data.attributes.reasonForChange)){if(!e.is(i.options.grid.activity_id))return d.error(p.CHG_GOV_PUT_REALIZED_DESC_DISABLED),void(i.options.grid.reasonForChange="");o.publish("ECM_GOV_RealizedDGV_DESC_MODIFIED:"+(widget?widget.id:""),{activity_id:i.options.grid.activity_id,activity_description:t.data.attributes.reasonForChange})}}))},emptyTreeDocument:function(){this.treeDocument.empty()},updateTreeDocument:function(e){this.treeDocument.prepareUpdate();for(var t=0;t<e.length;t++){let i=this.createTreeNode(e[t]);this.treeDocument.addRoot(i)}this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},createTreeNode:function(e){var t=this,i=t.getRealizedTreeNode(e);return e.activities.forEach((e=>{let n=t.getRealizedTreeNode(e);"TRUE"===i.options.grid.isRefConfigured?(i.options.grid.moved_to_ca="",i.options.grid.reasonForMove="",i.options.grid.moved_to_ca_details=""):"FALSE"===i.options.grid.isRefConfigured&&(i.options.grid.moved_to_ca=n.options.grid.moved_to_ca,i.options.grid.reasonForMove=n.options.grid.reasonForMove,i.options.grid.moved_to_ca_details=n.options.grid.moved_to_ca_details,n.options.grid.moved_to_ca="",n.options.grid.reasonForMove="",n.options.grid.moved_to_ca_details=void 0),i.addChild(n)})),i},getRealizedTreeNode:function(e){return e.change=this.getChangeDescription(e),e.change_details=this.getChangeDetails(e),e.moved_to_ca=this.getMovedToCADetails(e),e.reasonForMove=this.getReasonForMoveDescription(e),e.isReasonForChangeEditable=this.options.isReasonForChangeEditable,new n({label:e.title,subLabel:e.type+" | "+e.revision+" | "+e.name,grid:e,icons:[e.icon,e.configured_icon],thumbnail:e.thumbnail,useAsyncPreExpand:!0})},getChangeDescription:function(e){let t=e.operation;return(t.startsWith("ChangeStatus#")||t.startsWith("FileAdded#")||t.startsWith("FileModified#")||t.startsWith("FileRemoved#"))&&(t=t.split("#")[0]),"TRUE"===e.isInstanceOperation?p["CHG_GOV_Realized_Activity_"+t+"_Usage"]:p["CHG_GOV_Realized_Activity_"+t]},getChangeDetails:function(t){var i=this,n="";if(0===t.sub_operations.length&&"NonPrimeRoot"===t.operation)n=p.CHG_GOV_Realized_Activity_NonPrimeRoot;else if("DOCUMENT_UPDATE"==t.operation)n=p.CHG_GOV_Realized_Activity_DOCUMENT_UPDATE;else if("DOCUMENT_CREATE_UPDATE"==t.operation)n=p.CHG_GOV_Realized_Activity_Create;else{let o=e.createElement("div",{class:"realized_op_main_div",styles:{display:"flex","align-items":"center","justify-content":"flex-start",overflow:"hidden","text-overflow":"ellipsis"}});for(let e=0;e<t.sub_operations.length;e++){let n=t.sub_operations[e],a=null;if(n.startsWith("ChangeStatus#"))a=i.getChangeStatusHTMLObject(n,t);else if(n.startsWith("FileAdded#")||n.startsWith("FileModified#")||n.startsWith("FileRemoved#"))a=i.getFileDetailHTMLObject(n,t);else switch(n){case"Create":case"Modify":case"Add":case"EditVariant":case"Cut":case"ConfiguredDelete":case"ConfiguredMove":case"Extend":case"Move":case"TransferOwnership":case"ChangeResponsible":case"AddAlternate":case"AltSubFor":case"AddSubstitute":case"SubstitutionContextAdded":case"SubtitutionContextRemoved":case"AltQualified":case"AltObsolete":a=i.getOperationDescHTMLObject(n,t);break;case"AddInFamily":a=t.before_details?i.getPreviousGrammarHTMLObject(n,t):i.getOperationDescHTMLObject(n,t);break;case"NewEvolution":case"Clone":case"NewMinorVersion":case"NewVersion":case"Replace":case"ConfiguredReplace":case"ConfiguredEditVariant":case"EvolveInstance":a=i.getPreviousGrammarHTMLObject(n,t)}a&&e<t.sub_operations.length-1&&a.addContent([{tag:"span",text:", "}]),a&&a.inject(o)}n=o.outerHTML}return n},getMovedToCADetails:function(t){let i=e.createElement("div",{class:"realized_op_moved_to_ca",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return i.setContent([{tag:"img",src:t.moved_to_ca_details?t.moved_to_ca_details.icon:"",styles:{"padding-left":"5px"}},{tag:"span",class:"realized_op_moved_to_ca_label",text:t.moved_to_ca_details?t.moved_to_ca_details.title:"",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer",width:20,height:20,"padding-left":"5px"}}]),t.moved_to_ca_details&&i.setAttributes({id:t.moved_to_ca_details.id,type:t.moved_to_ca_details.type,name:t.moved_to_ca_details.name}),i.outerHTML},getReasonForMoveDescription:function(e){let t="";return e.reasonForMove&&""!=e.reasonForMove&&(t=p["CHG_GOV_Realized_Activity_Moved_"+e.reasonForMove]),t},getOperationDescHTMLObject:function(t,i){let n=e.createElement("div",{class:"realized_op_desc",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return n.setContent([{tag:"span",text:"TRUE"===i.isInstanceOperation?p["CHG_GOV_Realized_Activity_"+t+"_Usage"]:p["CHG_GOV_Realized_Activity_"+t]}]),n},getPreviousGrammarHTMLObject:function(t,i){let n=e.createElement("div",{class:"realized_op_prefix",styles:{overflow:"hidden","text-overflow":"ellipsis"}});n.setContent([{tag:"span",text:p["CHG_GOV_Realized_Activity_"+t+"_Prefix"]+" :"}]);try{n.addContent([{tag:"img",src:i.before_ref_details?i.before_ref_details.dataelements.icon:i.before_details.dataelements.icon,styles:{"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_label",text:i.before_ref_details?i.before_ref_details.dataelements["ds6w:label"]:i.before_details.dataelements["ds6w:label"],styles:{"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_revision",text:i.before_ref_details?i.before_ref_details.dataelements["ds6wg:revision"]:i.before_details.dataelements["ds6wg:revision"],styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer",width:20,height:20,"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}]),i.before_ref_details?(n.addContent([{tag:"span",text:"( "+i.before_details.dataelements["ds6w:label"]+" )",styles:{"padding-left":"5px"}}]),n.setAttributes({id:i.before_ref_details.id,type:i.before_ref_details.dataelements["ds6w:type"],name:i.before_ref_details.dataelements["ds6w:identifier"]})):n.setAttributes({id:i.before_details.id,type:i.before_details.dataelements["ds6w:type"],name:i.before_details.dataelements["ds6w:identifier"]})}catch(e){console.log(e),o.publish("Realized_ObjectNotFound:"+(widget?widget.id:""),e)}return n},getChangeStatusHTMLObject:function(t,i){let n=t.split("#"),o=e.createElement("div",{class:"realized_op_suffix",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return o.setContent([{tag:"span",text:p["CHG_GOV_Realized_Activity_"+n[0]+"_Suffix"]+" : "+n[1].replace("_"," ")}]),o},getFileDetailHTMLObject:function(t,i){let n=t.split("#"),o=e.createElement("div",{class:"realized_op_suffix",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return o.setContent([{tag:"span",text:p["CHG_GOV_Realized_Activity_"+n[0]+"_Suffix"]+": "+n[1].replace(/<\?>/g," ")}]),o},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},setReasonForChangeEditAccess:function(e){this.options.isReasonForChangeEditable=e}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil"],(function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout"],(function(e){e.crGridView.crDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout((function(){t.changeView("TileView")}),100)}))},showEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesUtil",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h){"use strict";return{getColumns:function(e){var t=[i.getColumnDefinition({dataIndex:"titleTree"}),{dataIndex:"title_instance",ds6wIndexMapping:"ds6w:label",text:g.CHG_GOV_DataGrid_Column_Title,icon:"flow-cascade",width:200,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!0},i.getColumnDefinition({dataIndex:"typeNLS"}),i.getColumnDefinition({dataIndex:"chgObjName"}),i.getColumnDefinition({dataIndex:"revision"}),i.getColumnDefinition({dataIndex:"maturityWithBadge",width:80}),i.getColumnDefinition({dataIndex:"collabspaceNLS"}),i.getColumnDefinition({dataIndex:"organizationNLS"}),{dataIndex:"reasonForChange",text:g.Chg_GOV_Reason_For_Change,visibleFlag:!0,alwaysVisibleFlag:!0,typeRepresentation:"editor",editionPolicy:"EditionOnOver",filterId:"stringRegexp",filterModel:"",editableFlag:!0,getCellEditableState:function(e){let t=!0;return e&&e.nodeModel&&("completedKey"!=e.nodeModel.getAttributeValue("proposedStatus")&&"false"!=e.nodeModel.getAttributeValue("addProposedAccess")||(t=!1)),t}},{dataIndex:"change",text:g.CHG_GOV_Proposed_Changes,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"url",width:75,filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel)return{icon:e.nodeModel.getAttributeValue("activityIcon")}},getCellTooltip:function(e){if(e.nodeModel)return{shortHelp:e.nodeModel.getAttributeValue("change")}}},{dataIndex:"change_details",text:g.CHG_GOV_Realized_Change_Details,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,filterId:"stringRegexp",filterModel:"",getCellTooltip:function(e){if(e.nodeModel)return{shortHelp:e.nodeModel.getAttributeValue("change_details")}}},{dataIndex:"proposedStatus",text:g.CHG_GOV_Proposed_ProposalStatus,editableFlag:!0,visibleFlag:!0,alwaysVisibleFlag:!1,editionPolicy:"EditionOnOver",typeRepresentation:"proposedStatus",filterId:"set",filterModel:[]},{dataIndex:"resolvedBy",text:g.CHG_GOV_Proposed_ResolvedBy,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""}];return e&&e.flowdownRequired&&"true"==e.flowdownRequired&&(t.push({dataIndex:"flowdownFrom",text:g.CHG_GOV_Flowdown_From,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""}),t.push({dataIndex:"flowdownFor",text:g.CHG_GOV_Flowdown_For,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""})),t},getNativeContextualMenu:async function(e){let t=[];var i={objectID:[]},n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();return 1==n.length&&null!=e.cellInfos.columnID&&11===e.cellInfos.columnID&&1==e.cellInfos.nodeModel.options.grid.resolution.length?i.objectID.push(e.cellInfos.nodeModel.options.grid.resolution[0].id):n.forEach((e=>{i.objectID.push(e.options.grid.id)})),t.push(a.getExploreMenu(null,i)),t.push(a.getExploreWithMenu(null,i)),t.push(a.getOpenMenu(null,i)),t.push(a.getOpenAdvMenu(null,i)),t.push(a.getOpenROMenu(null,i)),(await this.getCommonMenu(e)).forEach((e=>{t.push(e)})),t},getDashboardContextualMenu:async function(e){let t=[],i=!1;if(e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(i=!0),!i){let i=await this.getOpenWithMenu(e);i&&t.push(i)}return(await this.getCommonMenu(e)).forEach((e=>{t.push(e)})),t},getOpenWithMenu:async function(e){let t,i;if(l.getGlobalVariable().is3DSpace&&!window.x3DPlatformServices&&!window.COMPASS_CONFIG){const e=getTopWindow().document.createElement("div");e.id="hiddenDivForCompassInNewWindow",e.style.display="none",getTopWindow().document.body.appendChild(e),window.COMPASS_CONFIG={myAppsBaseUrl:l.getGlobalVariable().baseURL,userId:"",lang:navigator.language,compassTarget:e.id}}if(null!=e.cellInfos.columnID&&11===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.resolution&&1==e.cellInfos.nodeModel.options.grid.resolution.length){let o=e.cellInfos.nodeModel.options.grid.resolution[0].id,s=e.cellInfos.nodeModel.options.grid.resolution[0].type,r=e.cellInfos.nodeModel.options.grid.resolution[0].serviceBasedObjId,l=[];l.push(s),e.cellInfos.nodeModel.options.grid.resolution[0].kind&&""!=e.cellInfos.nodeModel.options.grid.resolution[0].kind&&(l=l.concat(e.cellInfos.nodeModel.options.grid.resolution[0].kind)),i={objectId:r||o,objectType:s,objectTaxonomies:l};var n={selectedItem:i};t=await a.openWith(i)}else if(null!=e.cellInfos.columnID&&12===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFrom&&1==e.cellInfos.nodeModel.options.grid.fdFrom.length){let o=e.cellInfos.nodeModel.options.grid.fdFrom[0].id,s=e.cellInfos.nodeModel.options.grid.fdFrom[0].type,r=e.cellInfos.nodeModel.options.grid.fdFrom[0].serviceBasedObjId,l=[];l.push(s),e.cellInfos.nodeModel.options.grid.fdFrom[0].kind&&""!=e.cellInfos.nodeModel.options.grid.fdFrom[0].kind&&(l=l.concat(e.cellInfos.nodeModel.options.grid.fdFrom[0].kind)),i={objectId:r||o,objectType:s,objectTaxonomies:l};n={selectedItem:i};t=await a.openWith(i)}else if(null!=e.cellInfos.columnID&&13===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFor&&1==e.cellInfos.nodeModel.options.grid.fdFor.length){let o=e.cellInfos.nodeModel.options.grid.fdFor[0].id,s=e.cellInfos.nodeModel.options.grid.fdFor[0].type,r=e.cellInfos.nodeModel.options.grid.fdFor[0].serviceBasedObjId,l=[];l.push(s),e.cellInfos.nodeModel.options.grid.fdFor[0].kind&&""!=e.cellInfos.nodeModel.options.grid.fdFor[0].kind&&(l=l.concat(e.cellInfos.nodeModel.options.grid.fdFor[0].kind)),i={objectId:r||o,objectType:s,objectTaxonomies:l};n={selectedItem:i};t=await a.openWith(i)}else{let o=e.cellInfos.nodeModel.options.grid.id,s=e.cellInfos.nodeModel.options.grid.type,r=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,l=[];l.push(s),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(l=l.concat(e.cellInfos.nodeModel.options.grid.kind)),i={objectId:r||o,objectType:s,objectTaxonomies:l,facetName:"ProposedDGV"};n={facetName:"ProposedDGV",selectedItem:i};a.setSelectedItem(n),t=await a.openWith(i)}return t},getCommonMenu:async function(e){var t=[];let n=e.cellInfos.nodeModel.options.grid.id,o=e.cellInfos.nodeModel.options.grid.title,a=e.cellInfos.nodeModel.options.grid.revision,r=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,l=!1,m=!1;null!=e.cellInfos.columnID&&12===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.resolution&&1==e.cellInfos.nodeModel.options.grid.resolution.length?(m=!0,n=e.cellInfos.nodeModel.options.grid.resolution[0].id,o=e.cellInfos.nodeModel.options.grid.resolution[0].title,a=e.cellInfos.nodeModel.options.grid.resolution[0].revision,r=e.cellInfos.nodeModel.options.grid.resolution[0].serviceBasedObjId):null!=e.cellInfos.columnID&&13===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFrom&&1==e.cellInfos.nodeModel.options.grid.fdFrom.length?(n=e.cellInfos.nodeModel.options.grid.fdFrom[0].id,o=e.cellInfos.nodeModel.options.grid.fdFrom[0].title,a=e.cellInfos.nodeModel.options.grid.fdFrom[0].revision,r=e.cellInfos.nodeModel.options.grid.fdFrom[0].serviceBasedObjId):null!=e.cellInfos.columnID&&14===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFor&&1==e.cellInfos.nodeModel.options.grid.fdFor.length&&(n=e.cellInfos.nodeModel.options.grid.fdFor[0].id,o=e.cellInfos.nodeModel.options.grid.fdFor[0].title,a=e.cellInfos.nodeModel.options.grid.fdFor[0].revision,r=e.cellInfos.nodeModel.options.grid.fdFor[0].serviceBasedObjId),e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(l=!0);let C=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),f=[],v=[],D=[],I=[],w=!1;if(C.forEach((e=>{f.push(e.options.grid.id),v.push(e.options.grid.serviceBasedObjId),e.options.grid.instanceId?(I.push(e.options.grid.instanceId),w=!0):I.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&D.push(e.options.grid.serviceBasedObjId)})),!(m||null==e.cellInfos.columnID||12==e.cellInfos.columnID&&12===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFrom&&1==e.cellInfos.nodeModel.options.grid.fdFrom.length||13==e.cellInfos.columnID&&13===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFor&&1==e.cellInfos.nodeModel.options.grid.fdFor.length||"true"!=e.cellInfos.nodeModel.options.grid.addProposedAccess)){let e={type:"PushItem",title:g.CHG_GOV_Proposed_Edit,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-pencil"},action:{callback:function(e){p.publish("ECM_GOV_ProposedDGV_EDIT:"+(widget?widget.id:""))}}};t.push(e);let i={type:"PushItem",title:g.CHG_GOV_Proposed_ChangeAssessment,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-component"},action:{callback:function(e){p.publish("ECM_GOV_ProposedDGV_ADD_ASSESSMENT:"+(widget?widget.id:""))}}};t.push(i)}if(!(l||m||null==e.cellInfos.columnID||12==e.cellInfos.columnID&&12===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFrom&&1==e.cellInfos.nodeModel.options.grid.fdFrom.length||13==e.cellInfos.columnID&&13===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFor&&1==e.cellInfos.nodeModel.options.grid.fdFor.length||"None"!=e.cellInfos.nodeModel.options.grid.computedOperation||"completedKey"==e.cellInfos.nodeModel.options.grid.proposedStatus||"true"!=e.cellInfos.nodeModel.options.grid.addProposedAccess)){let i=[];if("LEGACY_3DSPACE"==e.cellInfos.nodeModel.options.grid.sourceType&&i.push({type:"PushItem",title:g.CHG_GOV_Proposed_ResolutionVersion,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch-list"},action:{callback:function(t){var i={id:"NEW_MIB"==e.cellInfos.nodeModel.options.grid.sourceType?e.cellInfos.nodeModel.options.grid.serviceBasedObjId:e.cellInfos.nodeModel.options.grid.id,type:e.cellInfos.nodeModel.options.grid.type,proposedOperation:e.cellInfos.nodeModel.options.grid.proposedOperation,action:"addResolution"};var n={commandInfo:{type:"Change Action",facet:"Proposed Change",action:"CA>Proposed Change>RMB>Resolved By>Identify From Versions"}};h("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),p.publish("ECM_GOV_ProposedDGV_LaunchVersionExplorer:"+(widget?widget.id:""),i)}}}),0==w){i.push({type:"PushItem",title:g.CHG_GOV_Proposed_ResolutionSearch,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-search"},action:{callback:function(t){var i={id:e.cellInfos.nodeModel.options.grid.id,type:e.cellInfos.nodeModel.options.grid.type,proposedOperation:e.cellInfos.nodeModel.options.grid.proposedOperation};p.publish("ECM_GOV_ProposedDGV_SearchResolution:"+(widget?widget.id:""),i)}}});let n={type:"PushItem",title:g.CHG_GOV_Proposed_Resolution,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-target-add"},submenu:i};t.push(n)}}const _={};if(m||null!=e.cellInfos.columnID&&(12===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFrom&&1==e.cellInfos.nodeModel.options.grid.fdFrom.length||13===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFor&&1==e.cellInfos.nodeModel.options.grid.fdFor.length)?_.selectedNodeIDs=[r]:_.selectedNodeIDs=v,t.push(i.getRelationalExplorerMenu(_)),!(l||null==e.cellInfos.columnID||12==e.cellInfos.columnID&&12===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFrom&&1==e.cellInfos.nodeModel.options.grid.fdFrom.length||13==e.cellInfos.columnID&&13===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFor&&1==e.cellInfos.nodeModel.options.grid.fdFor.length)){let i={type:"PushItem",title:g.CHG_Change_Impact_Command_Label,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){let i={};i.objectID=e.cellInfos.nodeModel.options.grid.instanceId?e.cellInfos.nodeModel.options.grid.instanceId:n,i.objectType=e.cellInfos.nodeModel.options.grid.instanceId?"VPMInstance":e.cellInfos.nodeModel.options.grid.type,i.label=e.cellInfos.nodeModel.options.grid.title_instance?e.cellInfos.nodeModel.options.grid.title_instance:o,i.objectRevision=a,i.serviceId=e.cellInfos.nodeModel.options.grid.serviceName;var s={commandInfo:{type:"Change Action",facet:"Proposed Change",action:"CA>Proposed Change>RMB>Change Impacts"}};h("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:s}),c.launchImpactsView(i)}}};t.push(i)}let b,S={type:"PushItem",title:g.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(e){D.length>0?i.download(D):u.warn(g.CHG_GOV_Download_Skipped)}}},y={type:"PushItem",title:g.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye"},action:{callback:function(e){D.length>0?s.preview(D):u.warn(g.CHG_GOV_Download_Skipped)}}};if(1==v.length&&(b=await s.getDocuments(D)),(l||b&&b[0]&&b[0].dataelements&&"TRUE"===b[0].dataelements.isDocumentType)&&(t.push(S),t.push(y)),m||null!=e.cellInfos.columnID&&(12===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFrom&&1==e.cellInfos.nodeModel.options.grid.fdFrom.length||13===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFor&&1==e.cellInfos.nodeModel.options.grid.fdFor.length)?t.push(d.createPropertyPushItem([r])):t.push(d.createPropertyPushItem(I)),m&&"true"==e.cellInfos.nodeModel.options.grid.addProposedAccess){let i={type:"PushItem",title:g.CHG_GOV_Proposed_RemoveResolution,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(t){var i={id:e.cellInfos.nodeModel.options.grid.id,type:e.cellInfos.nodeModel.options.grid.type,proposedOperation:e.cellInfos.nodeModel.options.grid.proposedOperation,updateAction:"DISCONNECT"},n=[];n.push({id:e.cellInfos.nodeModel.options.grid.resolution[0].id,service:e.cellInfos.nodeModel.options.grid.resolution[0].serviceName,type:e.cellInfos.nodeModel.options.grid.resolution[0].type}),i.resolution=n;var o=[i];p.publish("ECM_GOV_ProposedDGV_RemoveResolution:"+(widget?widget.id:""),o)}}};t.push(i)}if(!(m||null==e.cellInfos.columnID||12==e.cellInfos.columnID&&12===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFrom&&1==e.cellInfos.nodeModel.options.grid.fdFrom.length||13==e.cellInfos.columnID&&13===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.fdFor&&1==e.cellInfos.nodeModel.options.grid.fdFor.length||"true"!=e.cellInfos.nodeModel.options.grid.removeProposedAccess)){let e={type:"PushItem",title:g.CHG_GOV_Proposed_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(e){p.publish("ECM_GOV_Proposed_Remove:"+(widget?widget.id:""))}}};t.push(e)}return t}}})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactedItem/ChgCRImpacedItemDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h){"use strict";var m=h.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e,t){this.parentCRId=e,Array.isArray(t)?this.impactAnalysisIds=t:this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"IA_ImpactItem",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},loadImpactedItem:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){e[i].impactedItem&&"IMPACTED"!=e[i].impactedItem?e[i].impact="notImpactedKey":e[i].impact="impactedKey",e[i].reasonForChange||(e[i].reasonForChange="");let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName;var a=e.maturityNLS||e.currentNLS?e.maturityNLS||e.currentNLS:"";e.maturityWithBadge=e.maturityNLS||e.currentNLS?e.maturityNLS||e.currentNLS:"";var s,r=this.getCustomTooltip(e);return s=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:s,subLabel:n,description:a,grid:e,icons:[e.icon],thumbnail:e.previewicon,contextualMenu:["dummy placeholder"],useAsyncPreExpand:!0,customTooltip:r})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.currentNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.impactAnalysisId,s=t.parentCRId,l=document.getElementById("outer-impactedItem-grid-div");"undefined"!=l&&null!=l&&g.mask(l),r.updateExistingImpactItem(s,o,e).then((async function(e){var n={},o={},s=void 0;e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(n=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(o=e.data[0].mapping),e.data.splice(0,1));var r=await p.processIAImpacts(e);if(t.addNodesInLayoutModel(t.treeDocument,r),g.unmask(l),o.length>0&&(s=await t.i3dxInformationFilteringAndCalling(n,o,t.treeDocument)),n&&n.length>0){var h=new Map,m=n.length,C=125;for(let i=0;i<n.length;i+=C){let o=[];o=m<C?n.slice(i,i+m):n.slice(i,i+C);for(var f=[],v=new Map,D=o,I=0;I<D.length;I++){var w=D[I];f.push(w.id),v.set(w.id,w)}var _=[];if(f.length>0){var b=p.commonPredicatedForFedSearch(),S=await p.callFederatedSearch(f,b);S&&S.results&&S.results.length>0&&(_=await p.processIAImpactsFederatedSearch(S,v))}t.addNodesInLayoutModel(t.treeDocument,_),h=new Map([...h,...v]),m-=C,e.data=[...e.data,..._]}if(h&&h.size>0){u.publish("updateIndexingIconForHideOrShowInImpacts",{});var y=await c.recent();if(y&&y.results&&y.results.length>0){var E=p.filterNonIndexedDataNew(y,h);h.size!=E.length&&d.warn(a.CHG_GOV_Not_Accessable_Data);var O=await p.processInformationForRecentIAImpactBasis(E);let i=[];O&&(i=O);let n=[];for(let e of i)e.reasonForChange="",e.impactedItem="IMPACTED",n.push(e);t.addNodesInLayoutModel(t.treeDocument,n),e.data=[...e.data,...n]}}}s&&s.length>0&&(e.data=[...e.data,...s]),i(e),g.unmask(l)}),(function(e){g.unmask(l),n(e)}))}))},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});let i=this.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate();let n=[];i.forEach((e=>n.push({id:e.options.grid.id}))),this.addCAInfoForImpactedItems(n,this.impactAnalysisId)},removeChildren:function(e){let t=this;return new Promise((function(i,n){let o=t.impactAnalysisId,s=t.parentCRId,l=t.treeDocument.getSelectedNodes();l.length?r.updateExistingImpactItem(s,o,e).then((function(e){for(let e=0;e<l.length;e++)t.treeDocument.removeRoot(l[e]);0==t.treeDocument.getChildren().length&&t.treeDocument._modelEvents.publish({event:"treeEmpty"}),i(l),d.success(a.CHG_GOV_ImpactItem_Remove_Success)}),(function(e){g.unmask(outerDiv),n()})):d.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)}))},addCAInfoForImpactedItems:function(e,t){var i=this;r.getCAInfoImpactedItems(e,t).then((e=>{i.mergeProposedCA(e.data)}),(e=>{}))},mergeProposedCA:function(e){let t=this.getTreeDocument().getAllDescendants();for(let i=0;i<e.length;i++)for(let n=0;n<t.length;n++)if(e[i].id==t[n].options.grid.id){let o=l.getProposedColumnBasedOnData(e[i].proposedChangeActions);t[n].updateOptions({grid:{proposedChangeActionsData:e[i].proposedChangeActions,proposedChangeAction:o}})}},i3dxInformationFilteringAndCalling:async function(e,t,i){var n=i;let a=t.length;var s=o.getGlobalVariable().tenant,r=[],l=o.getGlobalVariable().tenantMappings.find((e=>e.platformId===s));for(let i=0;i<a;i++){let o=t[i],a=o.uris,s=a.length,m=o.ServiceInfo,C=o.RelativePath,f=l[m];if(null==f||null==C)continue;let v=f+C;for(let t=0;t<a.length;t+=50){var d=[],u=new Map;let i=[];i=s<50?a.slice(t,t+s):a.slice(t,t+50);for(let t=0;t<i.length;t++){const n=i[t],o=e.findIndex((e=>e.id===n));if(-1!==o){const t=e.splice(o,1)[0];d.push(t),u.set(t.id,t)}}try{var g=await c.fetchbyService({ids:i,url:v});console.log("Result of is "+g);var h=await p.processIAImpactsWithi3dxItems(g,u);console.log("Node information with NLS value"+h),await this.addNodesInLayoutModel(n,h),r=r.concat(h)}catch(e){console.log(e)}console.log("The sliced array is "+i),s-=50}console.log("The modeler information is "+d),console.log("The modeler information is "+u)}return r},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map((i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}}))},UWA.is(n,"array")&&n.forEach((function(e){var t=e.color,i=e.id;o(t,i)}))},disableColorizeView:function(e,t){t.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D){"use strict";var I={columnMap:null,attrMap:[],showRMBMenuOnGrid:function(e,t,i){var a=new Promise((async function(i,a){const s=[];let r=!1;const l=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();l.length>1&&(r=!0);const d=l.map((e=>e.options.grid.id)),c=(l.map((e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title}))),C("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout")),p=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),u=C("DS/ENOChgServices/scripts/services/ChgDataService"),g=t.cellInfos.nodeModel.options.grid.id,h=t.cellInfos.nodeModel.options.grid.type,v=t.cellInfos.nodeModel.options.grid.name,w=t.cellInfos.nodeModel.options.grid.displayType,_=c.ChgCRImpactAnalysisDataGridModel.contextDetails.access.accessBits.ManageChangeAnalysis,b={objectId:g,objectType:h,displayName:v,displayType:w,facetName:"dependency"},S=p.openWith(b);let y=[];if("true"==o.getGlobalVariable().ECMEnableChangeAnalysisActivity_InWork)try{t.cellInfos.nodeModel.options.grid.approvalStatusModel&&await D.getColumnApprovalStatusMenu(t.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){y.push(e)}))}catch(e){console.error(e)}if(r)s.push(n.createPropertyPushItem(d)),s.push(I.getRelationalExplorerMenu(d)),S.then((n=>{n&&s.push(n),s.push(I.getTransferMenu(t)),s.push(f.getMaturityMenu(t)),s.push(m.getCopyLink(l,e.options.contextDetails.id)),"true"==_&&s.push(I.getDeleteMenu(t,e.options.target,c.removeDeletedNodesUsingIDs,void 0,"ImpactAnalysis")),i(s)}));else{s.push(n.createPropertyPushItem(d)),s.push(I.getRelationalExplorerMenu(d));const o=[];o.push(S);const a=u.getImpactAnalysisUserAccess(t.cellInfos.nodeModel.options.grid.id);o.push(a),y.length>0&&y[0].forEach((e=>{s.push(e)})),Promise.all(o).then((n=>{n[0]&&s.push(n[0]);const o=n[1].data[0].dataelements;"true"===o.TransferOwnership&&s.push(I.getTransferMenu(t)),"true"!==o.Promote&&"true"!==o.Demote||s.push(f.getMaturityMenu(t)),s.push(m.getCopyLink(l,e.options.contextDetails.id)),"true"==_&&s.push(I.getDeleteMenu(t,e.options.target,c.removeDeletedNodesUsingIDs,void 0,"ImpactAnalysis")),i(s)}))}}));return a},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Impact Analysis",action:"CR>Impact Analysis>RMB>Move"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(o)}))}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Impact Analysis",action:"CR>Impact Analysis>RMB>Relations"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){t.openRelationalExplorer(e)}))}}}},getDeleteMenu:function(e,i,n,o,a){return{type:"PushItem",title:t.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){var t={commandInfo:{type:"Change Request",facet:"Impact Analysis",action:"CR>Impact Analysis>RMB>Delete"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});for(var s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),r=[],d=0;d<s.length;d++){var c=s[d],p={physicalid:c.options.grid.id,nodeName:c.options.grid.name,nodeTitle:c.options.grid.title,parentCRId:c.options.grid.parentCRId};r.push(p)}l.deleteNodes(r,i,n,o,a)}}}}};return I})),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAttributeSubscriber",["DS/LifecycleCmd/MaturityCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeOwnerCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_TransferOwnershipCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeCSCmd","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChangeActionUX/scripts/Views/CADependenciesGridView","UWA/Core","DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView","DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){var D={init:function(e){this._maturityInEdit=!1,this._modelForIdCard=e,this._subscribeToPlatformEvents(),this._subscribeToModelEvents(),this.attachmentView=u},_subscribeToPlatformEvents:function(){var e=this;D.platformEventsSubscribed||(a.subscribe("ENOLC_MOVE_CMD_UPDATE",(function(e){console.log("new transfer data"+e),v("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()})),a.subscribe("CO-Properties-Update",(function(t){if(e._modelForIdCard.id===t.objectId){var i={};let n=e._modelForIdCard.get("isKindOfType");i.id=e._modelForIdCard.id,i.attributes={},t.owner.valueDB!=e._modelForIdCard.get("owner")&&(i.attributes.owner={valueActual:t.owner.valueDB,valueDisplay:t.owner.value}),"ChangeAction"==n?t.Synopsis.value!=e._modelForIdCard.get("title")&&(i.title=t.Synopsis.value):t.Title.value!=e._modelForIdCard.get("title")&&(i.title=t.Title.value),t.description.value!=e._modelForIdCard.get("freezones")[0]&&(i.freezones=[t.description.value]),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i})}}))),D.platformEventsSubscribed=!0},_subscribeToModelEvents:function(){var e=this;e.modelEvents=e._modelForIdCard.get("modelEvents");var t=c.getDependency("xChangeApp");e.modelEvents.subscribe({event:"idcard-attributes-clicked"},(function(i){if(console.log("idcard-attributes-clicked: modelEvents"),UWA.is(i.index,"number")){var n=e._modelForIdCard.get("attributes"),o=n[i.index].command;if(void 0!==n[i.index].editable&&n[i.index].editable)switch(o){case"owner":e.handleChangeOwner(e._modelForIdCard);break;case"collabSpace":e.handleChangeCollabSpace(e._modelForIdCard);break;case"orgnaization":e.handleChangeOrganization(e._modelForIdCard);break;case"maturity":break;case"Applicability":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Applicability"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Dependency":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Dependency"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Attachments":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Attachment"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"RelatedScope":let o={context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType")};"ChangeRequest"==e._modelForIdCard.get("isKindOfType")?o.facetSelect="CR_RelatedScope":o.facetSelect="CO_RelatedScope",t._applicationChannel.publish({event:"update-property-panel-contextdata",data:o}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"isGoverned":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"relations",isViaHeader:!0}}),t._applicationChannel.publish({event:"information-panel-open",data:{isViaHeader:!0}});break;case"Group":e.handleGroupCreate(e._modelForIdCard);break;case"AffectedItems":a.publish("openIRAffectedItemsTab",{});break;case"irAttachments":a.publish("openIRAttachmentsTab",{});break;case"Issues":a.publish("openIRIssuesTab",{});break;default:var s={};s.id=e._modelForIdCard.id,n[i.index].callback(s)}}})),e.modelEvents.subscribe({event:"maturity-updated"},(function(t){console.log("maturity-updated: modelEvents"+t);var i=e._modelForIdCard.id;if("Change Order"==e._modelForIdCard.get("type"))h.getChangeOrderUserAccess(i).then((function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0].dataelements};a.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i}),v("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}));else if("Change Request"==e._modelForIdCard.get("type"))h.getChangeRequestUserAccess(i).then((function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0].dataelements};a.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i}),v("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}));else if("ChangeAction"==e._modelForIdCard.get("isKindOfType")){h.getChangeActionUserAccess(i).then((function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0]};a.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i}),v("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}));var n=t.valueActual;if(d.getGlobalVariable().isNative){n&&""!=n&&["Approved","Complete","Prepare","Cancelled","In Approval"].indexOf(n)>-1&&C.takeOffFromWorkUnder()}}else"Investigation Request"==e._modelForIdCard.get("type")&&h.getInvestigationRequestUserAccess(i).then((function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0].dataelements};a.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i}),v("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}))}))},handleChangeOwner:function(e){var t=this.getTransferObject(e);new i({context:t,ID:"ActionBar_ChangeOwner"}).begin()},handleChangeCollabSpace:function(e){var i=this.getTransferObject(e);new t({context:i,ID:"ActionBar_ChangeCS"}).begin()},handleChangeOrganization:function(e){var i=this.getTransferObject(e);new t({context:i,ID:"ActionBar_ChangeOrg"}).begin()},handleChangeIsGoverned:function(e){console.log("Is governed clicked...!");let t=[];t.push(e.id),d.getGlobalVariable().isNative?C.DispatchEventToWin("onRelations",t):require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){e.openRelationalExplorer(t)}))},handleGroupCreate:function(e){console.log("Usr group clicked...!");let t={facetName:"createGroupFromIdCard",model:e};g.createGroup(t)},handleChangeMaturity:function(t){var i=this.getTransferObject(t);new e({context:i,ID:"MaturityHeader"}).executeAsync({physicalid:t.id}).then((function(){console.log("Maturity Updated!!!")}),(function(){console.log("Maturity Update failed!!!")}))},getTransferObject:function(e){var t={_selectedItems:[],getSelectedNodes:function(){return this._selectedItems},addSelection:function(e,t){this._selectedItems=[];var i=this;UWA.is(e,"array")?e.forEach((function(e){i._selectedItems.push(e)})):i._selectedItems.push(e)},getReference:function(e){return getID()},getParent:function(e){return e.getParent()},getType:function(e){return getType()},getName:function(e){return getLabel()},securityContext:{SecurityContext:d.getGlobalVariable().getSecurityContext(),tenant:d.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},i=UWA.extend(e,{getID:function(){return e.get("id")},getLabel:function(){return e.get("name")},getOwner:function(){return e.get("owner")},getType:function(){return e.get("type")},getDisplayName:function(){return e.get("name")},object:{revision:e.get("version")}});return t.addSelection(i),t},handleChangedependency:function(e){var t=c.getDependency("xChangeApp"),i=c.getDependency("applicationChannel"),n=t.infoPanel,a=new UWA.Element("div",{id:"dependency-mainContainer"}),r=UWA.createElement("div",{id:"co-dependency"}),l=new UWA.Element("div",{class:"dependency-header",title:o.CHG_GOV_CO_DEPENDENCY_VIEW});UWA.createElement("h5",{text:o.CHG_GOV_CO_DEPENDENCY_VIEW}).inject(l),l.inject(a),r.inject(a);var d={facetName:"dependency",PhysicalID:this._modelForIdCard.id,model:e}.PhysicalID;d="pid:"+d;var p={};p.id=d,p.widgetId=widget.id,p.widgetTitle=widget.title,p.showFlowdown=!1;var u=new s(p);u.container=r,this.facetView=u;for(var g=n.childNodes,h=0;h<g.length;h++){var m=g[h].className;UWA.is(m)&&"secondmainContainer-sidepanel"===m?g[h].style.display="block":g[h].style.display="none"}u.render(),g[1].empty(),a.inject(g[1]),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})},handleChangeApplicability:function(e){var t=c.getDependency("xChangeApp"),i=c.getDependency("applicationChannel"),n=t.infoPanel;new l({model:e,container:n}).build(),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})},handleChangeAttachments:function(e){var t=c.getDependency("xChangeApp"),i=c.getDependency("applicationChannel"),n=t.infoPanel.childNodes,a=new UWA.Element("div",{id:"attachment-mainContainer"}),s=new UWA.Element("div",{class:"attachment-header",title:o.CHG_GOV_Header_Attachments});UWA.createElement("h5",{text:o.CHG_GOV_Header_Attachments}).inject(s),s.inject(a);for(var r=0;r<n.length;r++){var l=n[r].className;UWA.is(l)&&"secondmainContainer-sidepanel"===l?n[r].style.display="block":n[r].style.display="none"}var d={id:this._modelForIdCard.id,target:a};this.attachmentView.create(d);n[1].empty(),a.inject(n[1]),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})}};return D})),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCRAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f){"use strict";var v={getDataToBuildAddMemberPanel:function(e){var t=this;v.teamlayoutModel=e.model,v.id=e.id,v.objectTitle=e.title,v.options=e,v.modelForChangeCoordinator=new l,v.modelForAssignee=new l,v.modelForApprover=new l,v.modelForFollower=new l,t.filterByTrigramHandler(),v.accessBitAssignee=t.getAccessBitBoolean(v.options.accessBits.ManageAssignees),v.accessBitApprover=t.getAccessBitBoolean(v.options.accessBits.ManageRouteTemplates),v.accessBitFollower=t.getAccessBitBoolean(v.options.accessBits.ManageFollowers),v.accessBitCoordinator=t.generateAccessBitForCoordinator()},getAccessBitBoolean:function(e){const t=!/^(true|1)$/i.test(e);return console.log("accessBit",e),t},generateAccessBitForCoordinator:function(){const e=v.options.accessBits,t=e.SwapCoordinator,i=e.SetCoordinator;return void 0!==t&&!0===t?this.getAccessBitBoolean(t):void 0!==i&&!0===i?this.getAccessBitBoolean(i):void 0},setDataForAddMember:function(t){var i=[];return i.push({label:p.CHG_GOV_DataGrid_Column_ChangeCoordinator,id:"changeCoordinator",model:v.modelForChangeCoordinator,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_CCO",placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,disabled:v.accessBitSwapCoordinator,multiSearchMode:!1,supportType:["person","group"]}),i.push({label:p.CHG_GOV_Members_DataGrid_Assignee,id:"assignee",model:v.modelForAssignee,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Assignee",placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"],disabled:v.accessBitAssignee}),i.push({label:p.CHG_GOV_Members_DataGrid_Approver,id:"approver",model:v.modelForApprover,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Approver",customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!1,supportType:["routetemplate"],disabled:v.accessBitApprover}),i.push({label:p.CHG_GOV_Members_DataGrid_InformedUser,id:"follower",model:v.modelForFollower,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Follower",placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"],disabled:v.accessBitFollower}),{title:p.CHG_Member_AddMember_Title,objectTitle:v.objectTitle,target:v.options.target,fields:i,addMemberSubmitHandler:this.addmember,searchFromModelAndUniqAndAdd:n.searchFromModelAndUniqAndAdd,teamlayoutModel:v.teamlayoutModel,makeDroppable:e.makeDroppable,type:"ChangeRequest"}},setApproversDiv:function(){v.approverDivDisable=!1,v.approversSupportType=["person","routetemplate"],"Route Template"===C.reviewerType.typeOfReviewer&&0==v.accessBitApprover?v.approverDivDisable=!0:"Person"===C.reviewerType.typeOfReviewer&&(v.approversSupportType=["person"],v.approverDivDisable=v.accessBitApprover)},launchAddMemberPanel:function(){var e={commandInfo:{type:"Change Request",facet:"Members",action:"CR>Members>Add Member"}};m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=v.setDataForAddMember(),i=new g(t);(new h).buildAddMemberDialog(i)},addmember:async function(e,t){let i=e.assignee,o=e.approver?e.approver:"",a=e.changeCoordinator,s=e.follower;var r=f.makeUpdateMemberJson("CONNECT",i,o,s,a,t),l=v.id;try{for(var d=await C.updateMembers(t,l,r),c=n.processedChangeRequestMemberList(d),p=await new Promise(((e,t)=>{require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(t){e(t)}))})),u=p.membersTreeModel.getAllDescendants(),g=[],h=0;h<c.length;h++){var m=c[h];if("Route Template"!=m.type){"Coordinator"==m.role&&(f.isChangeCoordinatorConnected=!0,p.isChangeCoordinatorExists=!0);for(var D=m.id,I=!1,w=0;w<u.length;w++)if(D==u[w].options.grid.id){I=!0;break}if(1==I){p.membersTreeModel.prepareUpdate();var _=u[w].options.grid.role,b="";if(m.role.includes(",")){var S=m.role.split(",");for(let e=0;e<S.length;e++)b+=", "+f.getRoleNLSValue(S[e].trim()),u[w].options.grid.roles.push(S[e].trim())}else b=", "+f.getRoleNLSValue(m.role),u[w].options.grid.roles.push(m.role);var y=u[w].options.grid.role,E=","+m.role;u[w].options.grid.roleList=_.concat(b),u[w].options.grid.role=y.concat(E),g.push(u[w].options.grid),p.membersTreeModel.pushUpdate()}else g.push(m)}else g.push(m),f.isRouteTemplateConnected=!0}g.length>0&&p.addNodesInLayout(g)}catch(e){console.error(e)}},filterByTrigramHandler:function(){v.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new c).getTrigramNameFilter()),v.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new c).getTrigramNameFilter()),v.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new c).getTrigramNameFilter()),v.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new c).getTrigramNameFilter())},dragAndDropHandler:function(){var t=v.options.target.querySelector("#memberFieldElementchangeCoordinator");e.makeDroppable(t,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForChangeCoordinatorField:function(e){return e}};return v})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("contextEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("contextEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("impactBasisEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactBasisEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e)},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",c)},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.Title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.Name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.Severity+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.Owner+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.State},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(i),i.outerHTML}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView2",["UWA/Core","UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Menu/ContextualMenu","DS/Controls/Find","DS/Controls/Label","DS/Controls/TooltipModel","DS/Controls/Loader","DS/Utilities/Utils","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b){"use strict";return t.extend({init:function(e){var t=this;this._parent(e),this.options=e,this.realizedDGV=null,this.realizedTilesView=null,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:w.getGlobalVariable().get3DSpaceURL(),securityContext:w.getGlobalVariable().getSecurityContext(),isNative:w.getGlobalVariable().isNative}};var i=this.options.contextDetails._modelEvents;i&&i.publish&&widget.addEvents({onSearch:function(e){i.publish({event:"canew-realized-DataGrid-on-search",data:{query:e},context:t})},onResetSearch:function(e){i.publish({event:"canew-realized-DataGrid-on-reset-search",data:{query:e},context:t})}})},render:function(){if(this.options.target){let t=this,n=C.getEffectivityCustomColumns(),c=C.getColumns(this.options.filter);n.length>0&&n.forEach((e=>{c.push(e)}));let p={treeDocument:null,columns:c,allowUnsafeHTMLContent:!1,showModelChangesFlag:!1,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:b.CHG_GOV_DataGrid_PlaceHolder_Fetch_RealizedChange,identifier:this.options.dgvid,useWidgetPreferencesFlag:!0,showContextualMenuColumnFlag:!0,useWidgetPreferencesFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1){let i=null;return i=e.cellInfos.columnID&&9===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.moved_to_ca_details?{id:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.id,objectId:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.id,objectType:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.type,displayName:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.title,displayType:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.typeNLS}:e.cellInfos.columnID&&8===e.cellInfos.columnID?e.cellInfos.nodeModel.options.grid.before_ref_details?{id:e.cellInfos.nodeModel.options.grid.before_details.id,objectId:e.cellInfos.nodeModel.options.grid.before_ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0],displayName:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:identifier"][0],displayType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.before_details?{id:e.cellInfos.nodeModel.options.grid.before_details.id,objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0],displayName:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:identifier"][0],displayType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.ref_details?{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.type,displayName:e.cellInfos.nodeModel.options.grid.ref_details.name,displayType:e.cellInfos.nodeModel.options.grid.ref_details.typeNLS}:{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.typeNLS}:e.cellInfos.nodeModel.options.grid.ref_details?{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.type,displayName:e.cellInfos.nodeModel.options.grid.ref_details.name,displayType:e.cellInfos.nodeModel.options.grid.ref_details.typeNLS}:{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.typeNLS},w.getGlobalVariable().isNative?C.getNativeContextualMenu(i,e,t.authoringCommandsAvailable):C.getDashboardContextualMenu(i,e,t.authoringCommandsAvailable,t.ignoreFlag,t.moveFlag)}e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!0,insertRow:!1})}return i},onDragStartRowHeader:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,D.readyDragContent(e,i)},onDragStartCell:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,D.readyDragContent(e,i)},getCellTooltip:function(e){if(e.nodeModel){var i=e.nodeModel.getAttributeValue("operation"),n="";if(8!==e.columnID||"DOCUMENT_UPDATE"!=i&&"DOCUMENT_CREATE_UPDATE"!=i)return 7===e.columnID?{shortHelp:e.nodeModel.getAttributeValue("change")}:t.realizedDGV.getCellDefaultTooltip(e);var o=e.nodeModel.getAttributeValue("sub_operations");for(let e=0;e<o.length;e++){let t=o[e];if(t.indexOf("#")>-1){let e=t.split("#");n=n+b["CHG_GOV_Realized_Activity_"+e[0]+"_Suffix"]+": "+e[1].replace(/<\?>/g," ")+"\n"}else n=n+b["CHG_GOV_Realized_Activity_"+t]+"\n"}return{shortHelp:n}}}};p=e.merge(p,this.options),this.realizedDGV=new i(p),this.realizedDGV.setToolbar(m.getRealizedChangesToolbarDefinition(this.options)),this.realizedDGV.getCustomViewsManager().onCustomViewsSave=function(e,i){f.onCustomViewsSave(e,i,t.options.custom_view_options)},this.realizedDGV.columnDefinitionUpdated=!1,this.realizedDGV.registerReusableCellContent({id:"realizedRevColId",buildContent:function(){return new e.createElement("div",{class:"realizedRevCol",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px",height:20}})}}),this.realizedDGV.registerReusableCellContent({id:"realizedEmptyColId",buildContent:function(){return new e.createElement("div",{class:"realizedEmptyCol",styles:{"padding-left":"5px",width:20,height:20}})}}),c[4].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.realizedDGV.reuseCellContent("realizedRevColId");i.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.realizedDGV.reuseCellContent("realizedEmptyColId"))},this.findWidget=new s({displayMatchCaseToggle:!1,relatedWidget:this.realizedDGV,onFindRequest:this.realizedDGV.setFindStr,onFindPreviousResult:this.realizedDGV.goToPreviousMatchingCell,onFindNextResult:this.realizedDGV.goToNextMatchingCell,onFindClose:this.realizedDGV.onFindClose}),this.mainContainer=e.createElement("div",{id:"realized-main-container",styles:{width:"100%",height:"100%",display:"inline-block"}}),this.headerDiv=e.createElement("div",{id:"realized-header-div",styles:{}}),this.headerLabelDiv=e.createElement("div",{id:"realized-header-label-div"}),this.labelDiv=e.createElement("div",{id:"realized-label-div",text:b.CHG_GOV_Realized_Tracked_MF+" (0) "}),this.labelDiv.tooltipInfos=new l({title:b.CHG_GOV_Realized_Tracked+" (0) ",position:"left"}),this.indexInfoDiv=e.createElement("div",{id:"realized-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new r({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new l({title:b.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.labelDiv.inject(this.headerLabelDiv),this.indexInfoDiv.inject(this.headerLabelDiv),this.headerLabelDiv.inject(this.headerDiv),this.findViewDiv=e.createElement("div",{id:"realized-find-view-div"}),this.findWidget.inject(this.findViewDiv),this.findViewDiv.inject(this.headerDiv),this.toolbarDiv=e.createElement("div",{id:"realized-toolbar-div",styles:{minWidth:"250px"}}),this.realizedDGV.getToolbar().inject(this.toolbarDiv),this.toolbarDiv.inject(this.headerDiv),this.realizedDGVDiv=e.createElement("div",{id:"realized-dgv-div",styles:{width:"100%",height:"calc( 100% - 32px )",position:"relative"}}),this.realizedDGV.inject(this.realizedDGVDiv),this.mainContainer.addContent(this.headerDiv),this.mainContainer.addContent(this.realizedDGVDiv),this.mainContainer.inject(this.options.target),this.options.custom_view_options.dgvHandle=this.realizedDGV,this.options.custom_view_options.ootb_columns=[...c],this.options.custom_view_options.dgvDiv=this.mainContainer,this.findWidget.hide(),this.realizedDGV.addEventListener("allCellsRendered",(function(){t.realizedDGV.buildStatusBar([{type:o.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:b.CHG_GOV_StatusBar_TotalItems+(null==t.realizedDGV.getTreeDocument()?0:t.realizedDGV.getTreeDocument().getAllDescendants().length)}},{type:o.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:b.CHG_GOV_StatusBar_SelectedItems+(null==t.realizedDGV.getTreeDocument()?0:t.realizedDGV.getTreeDocument().getSelectedNodes().length)}}])})),this.realizedDGV.addEventListener(u.POINTERHIT,(function(e,i){if(1==e.multipleHitCount)if(i&&4===i.columnID)"realizedRevCol"===e.target.className&&f.launchVersionExplorer({id:"TRUE"===i.nodeModel.options.grid.isInstanceOperation?i.nodeModel.options.grid.ref_details.id:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.type,name:i.nodeModel.options.grid.name});else if(i&&8===i.columnID){if("realized_op_previous_obj_revision"===e.target.className)f.launchVersionExplorer({id:e.target.parentElement.getAttribute("id"),type:e.target.parentElement.getAttribute("type"),name:e.target.parentElement.getAttribute("name")});else if(e.target.className.contains("realized_op_previous_obj_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};a.buildAndDisplayContextualMenu(e.target,t)}}else i&&9===i.columnID&&"realized_op_moved_to_ca_label"===e.target.className&&g.publish("launch_change_action"+(widget?widget.id:""),{id:i.nodeModel.options.grid.moved_to_ca_details.id});else if(2==e.multipleHitCount&&(i.nodeModel.select(!0),t.options.applicationChannel.publish({event:"update-property-panel-data",data:{context:i.nodeModel,PhysicalID:i.nodeModel.options.grid.ref_details?i.nodeModel.options.grid.ref_details.id:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.ref_details?i.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0]:i.nodeModel.options.grid.type}}),i&&6!==i.columnID))if(w.getGlobalVariable().is3DSpace){_("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else t.options.applicationChannel.publish({event:"information-panel-open",data:null})})),this.globalSubscribeForRealizedGridView(),this.loader=(new d).inject(this.options.target);let h=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];f.registerCustomEventsOnDGV(h,this.realizedDGV,this.options.custom_view_options)}},globalSubscribeForRealizedGridView:function(){var e=this;this.options&&this.options.contextDetails&&this.options.contextDetails._modelEvents&&this.options.contextDetails._modelEvents.unsubscribe&&(this.options.contextDetails._modelEvents.unsubscribe({event:"canew-realized-DataGrid-on-search"}),this.options.contextDetails._modelEvents.subscribe({event:"canew-realized-DataGrid-on-search"},(function(t){if("false"==w.getGlobalVariable().slidePanelTagger){var i=t.query;if(i){var n=0,o=e.realizedDGV.getTreeDocument();o.withTransactionUpdate((function(){o.getAllDescendants().forEach((function(e){var t=0;e.options.grid.title&&(e.options.grid.title.toUpperCase().contains(i.toUpperCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase()))||e._parentNode&&e._parentNode._options&&e._parentNode._options.grid&&e._parentNode._options.grid.title&&e._parentNode._options.grid.name&&(e._parentNode._options.grid.title.toUpperCase().contains(i.toUpperCase())||e._parentNode._options.grid.name.toLowerCase().contains(i.toLowerCase()))?(n++,e.show()):e.__children&&e.__children.length>0?e.__children.forEach((function(o){o.options&&o.options.grid&&o.options.grid.title&&o.options.grid.name&&(o.options.grid.name.toLowerCase().contains(i.toLowerCase())||o.options.grid.title.toUpperCase().contains(i.toUpperCase()))?(n++,t++,e.show()):0==t&&e.hide()})):e.hide()}))})),0==n&&(this.realizedDGV.placeholder=b.CHG_GOV_DataGrid_PlaceHolder_No_RealizedChange)}}})),this.options.contextDetails._modelEvents.subscribe({event:"canew-realized-DataGrid-on-reset-search"},(function(t){var i=e.realizedDGV.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})))},loadCustomColumns:function(){let e=I.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},registerDGVTreeDocEvents:function(){var e=this;this.realizedDGV.getTreeDocument().getXSO().onAdd((function(t){e.realizedDGV.getToolbar().updateNodeModel("cmd_2_download",{visibleFlag:!0}),e.realizedDGV.getTreeDocument().getSelectedNodes().some((function(e){return(void 0!==e.options.grid.before_details||void 0!==e.options.grid.before_ref_details)&&"Remove Usage"!==e.options.grid.change&&"Configured Removal"!==e.options.grid.change}))&&e.realizedDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!0}),!0===e.authoringCommandsAvailable&&e.options.access.RealizedReject&&"true"==e.options.access.RealizedReject?e.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!0}):e.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!1}),!0===e.authoringCommandsAvailable&&e.options.access.MoveRealizedChange&&"true"==e.options.access.MoveRealizedChange?e.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!0}):e.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!1}),e.realizedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:b.CHG_GOV_StatusBar_SelectedItems+e.realizedDGV.getTreeDocument().getSelectedNodes().length}}),e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType,isNodeAdded:!0}})})),this.realizedDGV.getTreeDocument().getXSO().onRemove((function(t){e.realizedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:b.CHG_GOV_StatusBar_SelectedItems+t.getTreeDocument().getSelectedNodes().length}}),0==t.getTreeDocument().getSelectedNodes().length?(1==this.authoringCommandsAvailable&&this.realizedDGV.treeDocument.getSelectedNodes().length>0?e.toolbarDiv.setStyles({minWidth:"250px"}):e.toolbarDiv.setStyles({minWidth:"155px"}),e.realizedDGV.getToolbar().updateNodeModel("cmd_2_download",{visibleFlag:!1}),e.realizedDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!1}),e.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!1}),e.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!1}),e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType,isNodeAdded:!1}})):(e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType}}),e.realizedDGV.getTreeDocument().getSelectedNodes().some((function(e){return(void 0!==e.options.grid.before_details||void 0!==e.options.grid.before_ref_details)&&"Remove Usage"!==e.options.grid.change&&"Configured Removal"!==e.options.grid.change}))?e.realizedDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!0}):e.realizedDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!1}))}))},prepareUpdateView:function(){this.realizedDGV.prepareUpdateView()},pushUpdateView:function(){this.realizedDGV.pushUpdateView()},setTreeDocument:function(e){this.realizedDGV.treeDocument&&this.realizedDGV.treeDocument.empty(),this.realizedDGV.treeDocument=e,this.registerDGVTreeDocEvents()},selectNodesInDGV:function(e){var t;this.realizedDGV.treeDocument.unselectAll();var i=this.realizedDGV.treeDocument.getAllDescendants(),n=i.length;e.forEach((e=>{for(var o,a=e.split("|")[0],s=e.split("|")[1],r=0,l=0;l<n;l++){if(i[l].options.grid.id===a){i[l].select(),t=this.realizedDGV.layout.getCellsFromNodeModel(i[l])[0],r=1;break}i[l].options.grid.id===s&&(o=i[l])}!r&&o&&(o.select(),t=this.realizedDGV.layout.getCellsFromNodeModel(o)[0])})),t&&this.realizedDGV.scrollToCellAt({cellID:t})},expandCollapseNodesInDGV:function(e){"EXPAND"===e?this.realizedDGV.treeDocument.expandAll():"COLLAPSE"===e&&this.realizedDGV.treeDocument.collapseAll()},toggleFindViewInDGV:function(e){1==this.authoringCommandsAvailable&&this.realizedDGV.treeDocument.getSelectedNodes().length>0?this.toolbarDiv.setStyles({minWidth:"250px"}):this.toolbarDiv.setStyles({minWidth:"155px"}),!1===this.findWidget.visibleFlag?(this.findWidget.show(),this.findWidget.focus()):!0===this.findWidget.visibleFlag&&this.findWidget.hide()},updateDGVForEmptyView:function(e,t){this.realizedDGV.getToolbar().updateNodeModel("cmd_5_find",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("cmd_2_download",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("expand_collapse_menu",{visibleFlag:!1}),this.realizedDGV.placeholder=b.CHG_GOV_DataGrid_PlaceHolder_No_RealizedChange,"TRACKED"===e?(this.labelDiv.setText(b.CHG_GOV_Realized_Tracked_MF+" ("+t+") "),this.labelDiv.tooltipInfos.title=b.CHG_GOV_Realized_Tracked+" ("+t+") "):"MOVED"===e?(this.labelDiv.setText(b.CHG_GOV_Realized_Moved_MF+" ("+t+") "),this.labelDiv.tooltipInfos.title=b.CHG_GOV_Realized_Moved+" ("+t+") "):"IGNORED"===e&&(this.labelDiv.setText(b.CHG_GOV_Realized_Ignored_MF+" ("+t+") "),this.labelDiv.tooltipInfos.title=b.CHG_GOV_Realized_Ignored+" ("+t+") "),this.indexInfoDiv.hide()},updateDGVForNonEmptyView:function(){this.realizedDGV.getToolbar().updateNodeModel("cmd_5_find",{visibleFlag:!0}),this.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("cmd_2_download",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("expand_collapse_menu",{visibleFlag:!0}),this.realizedDGV.placeholder=b.CHG_GOV_DataGrid_PlaceHolder_Fetch_RealizedChange,this.labelDiv.show(),this.indexInfoDiv.hide()},updateDGVForIndexInfoView:function(){this.indexInfoDiv.show()},updateDGVForTrackedView:function(e,t,i){this.labelDiv.setText(b.CHG_GOV_Realized_Tracked_MF+" ("+e.count+") "),this.labelDiv.tooltipInfos.title=b.CHG_GOV_Realized_Tracked+" ("+e.count+") ","false"==t&&"false"==i?this.authoringCommandsAvailable=!1:"false"==t&&"true"==i?(this.authoringCommandsAvailable=!0,this.ignoreFlag=!0,this.moveFlag=!1):"true"==t&&"false"==i?(this.authoringCommandsAvailable=!0,this.moveFlag=!0,this.ignoreFlag=!1):this.authoringCommandsAvailable=!0,this.moveFlag=!0,this.ignoreFlag=!0},updateDGVForMovedView:function(e){this.labelDiv.setText(b.CHG_GOV_Realized_Moved_MF+" ("+e.count+") "),this.labelDiv.tooltipInfos.title=b.CHG_GOV_Realized_Moved+" ("+e.count+") ",this.authoringCommandsAvailable=!1},updateDGVForIgnoredView:function(e){this.labelDiv.setText(b.CHG_GOV_Realized_Ignored_MF+" ("+e.count+") "),this.labelDiv.tooltipInfos.title=b.CHG_GOV_Realized_Ignored+" ("+e.count+") ",this.authoringCommandsAvailable=!1},updateDGVForGroupedView:function(e){this.labelDiv.setText(b.CHG_GOV_Realized_Grouped_SMF+" ("+e.count+") "),this.labelDiv.tooltipInfos.title=b.CHG_GOV_Realized_Grouped_MF+" ("+e.count+") ",this.authoringCommandsAvailable=!1},updateTaggerFilter:function(){var e=this;"false"==w.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(),t._cleanBIFilterProxy(),t.cleanPathTag();var i=new Set;e.realizedDGV.treeDocument.getAllDescendants().forEach((e=>{var t=e.options.grid;if("FALSE"==t.isInstanceOperation&&t.where_details&&t.where_details.id){var n=t.where_details.id;i.add(n)}else if("TRUE"==t.isInstanceOperation){if(t.ref_details&&t.ref_details.id){var o=t.ref_details.id;i.add(o)}if(t.after_details&&t.after_details.id){var a=t.after_details.id;i.add(a)}}}));var n=[];i.forEach((e=>n.push(e)));t._onSetPathTagsForProposedRealized(n,{options:{id:"caRealizedChangesDGV"}})}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesController",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView2","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesFilterModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","UWA/Class/Model","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/CACommonIgnore","DS/ENOChangeActionUX/scripts/Views/CATransferRealizedForm","DS/ENOChangeActionUX/scripts/Views/CASlideInTransferRealizedView","DS/ENOChgServices/scripts/services/ChgNativeInitService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";return e.Class.extend({init:function(e){this._parent(e),this.options=e,this.options.groupCAFeature=!1,"true"===e.contextDetails.isCAGrouped&&(this.options.groupCAFeature=!0),this.subscribeToPlatformEvents(),this.realizedChangesView=null},createRealizedChangesView:async function(){this.options.target.setStyles({position:"relative"}),this.loadRealizedChangesData("TRACKED")},loadRealizedChangesData:async function(t){this.options.target.empty(),this.options.dgvid="CARealizedChangesDGV_"+t,this.options.filter=t,this.realizedChangesView=new i(this.options),await this.realizedChangesView.render(),s.showLoader(this.options.target,this.realizedChangesView.loader),this.realiedChangesModel&&this.realiedChangesModel.resetModel(),this.realiedChangesModel=new n,this.realiedChangesModel.createTreeDocument();let a=await l.getTimestamp(),r=d.processTimestampData(a),p=await l.getCARealizedChanges(this.options.contextDetails.id,t,r).catch((e=>{console.error(e),c.error(v.CHG_GOV_GET_REALIZED_FAIL),s.hideLoader(this.options.target,this.realizedChangesView.loader)})),g=await l.getChangeActionUserAccess(this.options.contextDetails.id).catch((e=>{console.error(e),c.error(v.CHG_GOV_GET_REALIZED_ACCESS_FAIL),s.hideLoader(this.options.target,this.realizedChangesView.loader)}));if(1==g.success&&200==g.statusCode&&(this.options.access=g.data[0],g.data[0].EditRealizedDescription&&"true"===g.data[0].EditRealizedDescription?this.realiedChangesModel.setReasonForChangeEditAccess(!0):this.realiedChangesModel.setReasonForChangeEditAccess(!1)),1==p.success&&200==p.statusCode)try{let i=d.getRecentRealizedIds(p.data),n=await d.getRecentData(i),a=d.getPoliciesFromFedResponse(p.data),r=await l.getStatesAttributes(a);s.addCSSMaturityClasses(a,"wux-controls-label",r),this.realizedChangesView.prepareUpdateView();const m=["Effectivity","VariantEffectivity","CurrentEvolutionEffectivity","ProjectedEvolutionEffectivity","ConfigurationContext","RevisionMaster","RevisionMode"],C=this.realizedChangesView.realizedDGV._customViewsManager._columnModel._columns,f=m.some((e=>{const t=C.find((t=>t.dataIndex===e));return t&&!0===t.visibleFlag}));var h=await d.processCARealizedChangesData(p.data,n,f).catch((e=>{console.error(e),c.error(v.CHG_GOV_PARSE_REALIZED_KO),s.hideLoader(this.options.target,this.realizedChangesView.loader)}));if(this.realiedChangesModel.updateTreeDocument(h.realized_changes),this.realiedChangesModel.setFilterModel(o.getFilterModel()),this.realiedChangesModel.registerCustomFilter(),this.realizedChangesView.setTreeDocument(this.realiedChangesModel.getTreeDocument()),this.options.isSelected){this.realizedChangesView.updateTaggerFilter();let e=u.getCurrentModel();e.userAccess=this.options.contextDetails.userAccess,u.setCurrModel(e),u.setCallbacksForOpenWith("RealizedDGV")}if(0===this.realiedChangesModel.getTreeDocument().getAllDescendants().length)this.realizedChangesView.updateDGVForEmptyView(t,h.rc_count);else{this.realizedChangesView.updateDGVForNonEmptyView();let e={count:h.rc_count};switch(t){case"TRACKED":if(1==p.success&&200==p.statusCode){let t=g.data[0].MoveRealizedChange,i=g.data[0].RealizedReject;t&&i&&this.realizedChangesView.updateDGVForTrackedView(e,t,i)}else this.realizedChangesView.updateDGVForTrackedView(e);break;case"MOVED":this.realizedChangesView.updateDGVForMovedView(e);break;case"IGNORED":this.realizedChangesView.updateDGVForIgnoredView(e);break;case"GROUPED":this.realizedChangesView.updateDGVForGroupedView(e)}}this.realizedChangesView.pushUpdateView(),s.hideLoader(this.options.target,this.realizedChangesView.loader),!1!==h.AllIndexed&&!1!==h.AllOK||this.realizedChangesView.updateDGVForIndexInfoView(),e.is(this.options.target.children)&&2===this.options.target.children.length&&this.options.target.children[1].destroy(),this.realizedChangesView.loadCustomColumns()}catch(e){c.error(v.CHG_GOV_ADD_REALIZED_KO),s.hideLoader(this.options.target,this.realizedChangesView.loader)}else c.error(v.CHG_GOV_GET_REALIZED_RESPONSE_KO),s.hideLoader(this.options.target,this.realizedChangesView.loader)},subscribeToPlatformEvents:function(){var i=this;t.unsubscribe("Realized_ObjectNotFound:"+(widget?widget.id:"")),t.subscribe("Realized_ObjectNotFound:"+(widget?widget.id:""),(function(e){i.realizedChangesView.updateDGVForIndexInfoView()})),t.unsubscribe("ECM_GOV_RealizedDGV_ChangeDetails:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_ChangeDetails:"+(widget?widget.id:""),(function(e){const t=i.realiedChangesModel.getTreeDocument().getSelectedNodes();if(t.length>0){let i,n=[],o=[];t.forEach((function(e){i=a.fetchReleventIdsforBeforeCommands(e),void 0===i.activityReferenceID&&void 0===i.activityInstanceID||(n.push(i.activityReferenceID),o.push(i.activityInstanceID?i.activityInstanceID:i.activityReferenceID))}));let s,r=n,l=o;s=("ExploreInMSB"===e.action||"ExploreinContext"===e.action)&&l||r,p.getGlobalVariable().isNative?f.DispatchEventToWin(e.action,s):require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){e.openRelationalExplorer(s)}))}})),t.unsubscribe("ECM_GOV_RealizedDGV_REFRESH:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_REFRESH:"+(widget?widget.id:""),(function(e){i.loadRealizedChangesData(e.filter)})),t.unsubscribe("CrossHighlighting:"+(widget?widget.id:"")),t.subscribe("CrossHighlighting:"+(widget?widget.id:""),(function(t){if(e.is(t))if(t.indexOf(",")>-1){var n=t.split(",");i.realizedChangesView.selectNodesInDGV(n)}else i.realizedChangesView.selectNodesInDGV([t])})),t.unsubscribe("ECM_GOV_RealizedDGV_DESC_MODIFIED:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_DESC_MODIFIED:"+(widget?widget.id:""),(async function(e){await l.updateRealizedActivityDescription(i.options.contextDetails.id,e.activity_id,e.activity_description).catch((e=>{console.error(e),c.error(v.CHG_GOV_PUT_REALIZED_DESC_FAIL)}))})),t.unsubscribe("ECM_GOV_RealizedDGV_FILTER:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_FILTER:"+(widget?widget.id:""),(function(e){i.loadRealizedChangesData(e.filter)})),t.unsubscribe("ECM_GOV_RealizedDGV_EXPAND_COLLAPSE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_EXPAND_COLLAPSE:"+(widget?widget.id:""),(function(e){i.realizedChangesView.expandCollapseNodesInDGV(e.action)})),t.unsubscribe("ECM_GOV_RealizedDGV_FIND:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_FIND:"+(widget?widget.id:""),(function(e){i.realizedChangesView.toggleFindViewInDGV(e)})),t.unsubscribe("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:""),(function(e){const t=i.realiedChangesModel.getTreeDocument().getSelectedNodes().map((e=>"pid:"+e.options.grid.id));var n={originChangeActionId:"pid:"+i.options.contextDetails.id,idsToReject:t};h.ignoreNodes(n,widget.body,(function(e){g.unmask(widget.body),"success"===e.status&&(p.getGlobalVariable().arrOid=[],i.loadRealizedChangesData("TRACKED"),c.success(v.CHG_GOV_Realized_Ignore_Success))}),(function(e,t){g.unmask(widget.body),t&&t.errorMessage?c.error(t.errorMessage):c.error(v.CHG_GOV_Realized_Ignore_ERR_MSG)}))})),t.unsubscribe("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),(function(e){const t=i.realiedChangesModel.getTreeDocument().getSelectedNodes().map((e=>"pid:"+e.options.grid.id));if(t.length>0){var n={ids:t,contextCAId:"pid:"+i.options.contextDetails.id,Mode:e.mode,Entity:"ChangeAction",RealizedTransferBit:i.options.access.RealizedTransfer,callback:function(){p.getGlobalVariable().arrOid=[],i.loadRealizedChangesData("TRACKED")}},o=new m(n),a=new C({invokedFrom:"gov"});a.buildSlideIn(o),a.showSlideIn()}})),t.unsubscribe("ECM_GOV_Realized_Download:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Realized_Download:"+(widget?widget.id:""),(function(e){let t=i.realiedChangesModel.getTreeDocument().getSelectedNodes().map((e=>e.options.grid.ref_details?e.options.grid.ref_details.id:e.options.grid.id));s.download(t)})),t.unsubscribe(`caRealizedChangesDGV:${widget.id}`),t.subscribe(`caRealizedChangesDGV:${widget.id}`,(function(){if(i.realizedChangesView.updateTaggerFilter(),Object.keys(i.realizedChangesView.realizedDGV.getTreeDocument().getXSO()._items).length>0){let e=i.realizedChangesView.realizedDGV.getTreeDocument().getXSO()._items;for(let t in e)i.options.applicationChannel.publish({event:"update_object_select",data:{node:e[t],contextID:i.options.contextDetails.id,contextType:i.options.contextDetails.isKindOfType,isNodeAdded:!0}})}else i.options.applicationChannel.publish({event:"update_object_select",data:{node:i.realiedChangesModel.treeDocument._getTrueRoot(),contextID:i.options.contextDetails.id,contextType:i.options.contextDetails.isKindOfType,isNodeAdded:!1}})})),t.unsubscribe(`caRealizedChangesDGV of ${widget.id}`),t.subscribe(`caRealizedChangesDGV of ${widget.id}`,(function(e){i.realiedChangesModel.filterView(e)}))}})})),define("DS/ENOChgGovernanceUX/scripts/model/investigationRequest/ChgIRDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=r.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",c)},loadIndexedInvestigationRequest:async function(e,t){var o=e,a=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var r=this.createCustomNameField(t[s]);t[s].co_name=r;var l=this.createCustomSeverity(t[s]);t[s].sev=l;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var c=this.createCustomOwnerField(t[s]);t[s].co_Owner=c;var p=this.getStatusBarIcons(t[s]),u=this.statusbarIconsTooltips(t[s]),g=this.getSubLevel(t[s]),h=this.getDescription(t[s]);t[s].maturityWithBadge=t[s].maturityNLS,t[s].businessStateName=t[s].businessState;for(var m=this.createCustomTooltip(t[s]),C=!1,f=o.getChildren(),v=0;v<f.length;v++){f[v].options.grid.id==t[s].id&&(C=!0)}if(!C){var D=i.createTreeNodeDataModel(a,{label:t[s].title,subLabel:g,description:h,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:p,statusbarIconsTooltips:u,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(D)}}e.pushUpdate()},loadInvestigationRequestData:async function(e,t){var a=e;let s=new n;e.prepareUpdate();for(let n=0;n<t.length;n++){let c=this.createCustomNameField(t[n],"NonIndex");t[n].co_name=c;let p=this.createCustomSeverity(t[n]);t[n].sev=p;let u=this.createCustomChangeCoordinatorField(t[n]);t[n].co_Coordinator=u;let g=this.createCustomOwnerField(t[n]);t[n].co_Owner=g;let h=this.getStatusBarIcons(t[n],"NonIndex"),m=this.statusbarIconsTooltips(t[n],"NonIndex"),C=this.getSubLevel(t[n]),f=this.getDescription(t[n]);t[n].businessStateName=t[n].businessState,t[n].maturityWithBadge=t[n].maturityNLS;let v=this.createCustomTooltip(t[n]);for(var r=!1,l=(o.getGlobalVariable().existingCRIds,r=!1,a.getChildren()),d=0;d<l.length;d++){l[d].options.grid.id==t[n].id&&(r=!0)}if(!r){let o=i.createTreeNodeDataModel(s,{label:t[n].title,subLabel:C,description:f,grid:t[n],icons:[t[n].iconURL],thumbnail:t[n].thumbnail,statusbarIcons:h,statusbarIconsTooltips:m,customTooltip:v,contextualMenu:["Copy1","Move1"]});e.addChild(o)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"crSummaryNotEmpty"}),e.unselectAll();let o=new n,a=this.createCustomNameField(t[0]);t[0].co_name=a;let s=this.createCustomSeverity(t[0]);t[0].sev=s;let r=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=r;let l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;let d=this.getStatusBarIcons(t[0]),c=this.statusbarIconsTooltips(t[0]),p=this.getSubLevel(t[0]),u=this.getDescription(t[0]),g=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(o,{label:t[0].title,subLabel:p,description:u,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:g});e.getXSO().add(h),e.addChild(h,0)},createCustomNameField:function(e,t){let i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);let n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(e),e.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_TOOLTIP_NEW_INVESTIGATION});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){let t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){let i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{let t=s.getAvatarDetails(e.changeCoordinatorFullName);r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),r.style.setProperty("background",t.avatarColor)}r.inject(i);let l=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),l.inject(t)}return t.outerHTML},createCustomSeverity:function(e){let t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);let o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomMaturity:function(e){let t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");let i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){let i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){let i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(a.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(a.CHG_TOOLTIP_NEW_INVESTIGATION),i},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){let t="";return t=e.name+" | "+e.ownerFullName,t},getDescription:function(e){let t="";return t=e.maturityNLS,t},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map((t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}}))},UWA.is(i,"array")&&i.forEach((function(e){var t=e.color,i=e.id;n(t,i)}))},disableColorizeView:function(){this.treeDocument.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u={showRMBMenuOnGrid:function(e){return new Promise((function(t,i){const o=[];let a=!1,c=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),p=[],g=[],h=[];c.forEach((e=>{p.push(e.options.grid.id),g.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&h.push(e.options.grid.serviceBasedObjId)})),c.length>1&&(a=!0);c.map((e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})));const m=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),C=e.cellInfos.nodeModel.options.grid.id,f=e.cellInfos.nodeModel.options.grid.type,v=e.cellInfos.nodeModel.options.grid.name,D=e.cellInfos.nodeModel.options.grid.displayType,I=e.cellInfos.nodeModel.options.grid.serviceBasedObjId;let w=[];w.push(f),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(w=w.concat(e.cellInfos.nodeModel.options.grid.kind));const _={objectId:null!=I?I:C,objectType:f,objectTaxonomies:w,displayName:v,displayType:D,facetName:"dependency"},b=m.openWith(_);let S={};S.objectID=C,S.objectTitle=v,S.objectType=f,S.serviceId="3DSpace",S.label=e.cellInfos.nodeModel.options.grid.title,S.changeType="Change Request",S.facet="Impacted Items",S.action="CR>Change Impacts",a?(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(u.getRelationalExplorerMenu(g)),h.length>0&&(o.push(d.getMaturityMenu(void 0,h)),o.push(u.getTransferMenu(e)),o.push(r.getDownloadMenu(h)),!h.length>1&&o.push(r.getPreviewMenu(h))),t(o)):(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(u.getRelationalExplorerMenu(g)),b.then((i=>{i&&o.push(i),h.length>0&&(o.push(d.getMaturityMenu(e)),o.push(u.getTransferMenu(e))),o.push(u.getChangeImpacts(S)),s.getDocuments(h).then((function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(o.push(r.getDownloadMenu(h)),o.push(r.getPreviewMenu(h))),t(o)})).catch((e=>{console.log(e),t(o)}))})))}))},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)"LEGACY_3DSPACE"==i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){t.openRelationalExplorer(e)}))}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_Change_Impact_Command_Label,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Impacted Items",action:"CR>Impacted Items>RMB>Change Impacts"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}}};return u})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemReportViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:v.getGlobalVariable().get3DSpaceURL(),securityContext:v.getGlobalVariable().getSecurityContext(),isNative:v.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),C.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").removeClassName("minified-header-height"))}))},loadCustomColumns:function(){let e=D.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&I.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){let e=this.processColumns(),t=this,p={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactedItemGrid",useWidgetPreferencesFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return"proposedChangeAction"===e.collectionView.columns[e.cellInfos.columnID].dataIndex&&e.cellInfos.nodeModel.options.grid.proposedChangeActionsData&&1==e.cellInfos.nodeModel.options.grid.proposedChangeActionsData.length?h.getRMBProposedChangeColumn(e.cellInfos.nodeModel.options.grid.proposedChangeActionsData).then((e=>e)):m.showRMBMenuOnGrid(e);e.cellInfos.rowID<0&&(t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1}))}return t},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};p=UWA.merge(p,this.options);let C={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new n(p),this.chgGridView.addEventListener("click",(function(e,t){void 0!==t&&-1!==t.rowID&&("proposedChangeAction"===e.dsModel.layout.getDataIndexFromColumnIndex(t.columnID)&&t.nodeModel.options.grid.proposedChangeActionsData&&t.nodeModel.options.grid.proposedChangeActionsData.length>1&&h.getPopupProposedChangeColumn(e.target,t.nodeModel))})),this.chgGridView.cellSelection="none",this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},(function(e){var i=e.query;if("true"==v.getGlobalVariable().slidePanelTagger&&i){var n=t.chgGridView.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}})),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},(function(e){var i=t.chgGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),t.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){f.onCustomViewsSave(e,i,t.options.custom_view_options)},this.tileView=new a(C),t.chgGridView.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&5==t.columnID){var i={};i.cellInfos=t,f.executeMaturity(i)}};let D={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return m.showRMBMenuOnGrid(e).then((function(e){return e}))}};this.tileView.onContextualEvent=D;let I={impact:{stdTemplate:"enumCombo",semantics:{possibleValues:{impactedKey:c.CHG_Impacted_Value,notImpactedKey:c.CHG_NotImpacted_Value},valueType:"enumValueToProperty"}}};this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations(I),this.chgGridView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),t.chgGridView.getTreeDocument().getXSO().onAdd((function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-impact-analysis-impactedItem-object-selection-update",data:{count:i,accessBits:t.options.accessBits}});let n=w("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),o={contextId:e.options.grid.id,contextType:e.options.grid.isKindOfType,isNodeAdded:!0,node:e};n.notifySelection(o)})),t.chgGridView.getTreeDocument().getXSO().onRemove((function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-impact-analysis-impactedItem-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}});let i=w("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),n={contextId:e.options.grid.id,contextType:e.options.grid.isKindOfType,isNodeAdded:!0,node:e};i.notifySelection(n)})),this.options.target.getElement("div#outer-impactedItem-grid-div")&&this.options.target.getElement("div#outer-impactedItem-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactedItem-grid-div",class:"outer-impactedItem-grid-div"});let _=UWA.createElement("div",{class:"toolbar-impactedItem-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"impactedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new u({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new g({title:c.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(_),this.options.isReadOnly?this.chgGridView.setToolbar(r.writetoolbarDefinition(this.options)):this.chgGridView.setToolbar(s.writetoolbarDefinition(this.options)),this.chgGridView.getToolbar().getContent().inject(_);let b=UWA.createElement("div",{class:"content-impactedItem-grid-div expanded-header-height"}),S=UWA.createElement("div",{styles:{height:"100%"},class:"content-impactedItem-tile-div ImpactedItemTileView expanded-header-height"}),y=UWA.createElement("div",{class:"hideView",id:"impactedItemEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(y),this.chgGridView.inject(b),this.tileView.inject(S),y.inject(S),this.chgGridViewContainer.addContent(_),this.chgGridViewContainer.addContent(b),this.chgGridViewContainer.addContent(S),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=b;f.registerCustomEventsOnDGV(["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"],this.chgGridView,this.options.custom_view_options),this.loader=(new o).inject(this.options.target)},getToolbar:function(){return this.chgGridView.getToolbar()},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u={showRMBMenuOnGrid:function(e){return new Promise((function(t,i){const o=[];let a=!1;const c=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();let p=[],g=[],h=[];c.forEach((e=>{p.push(e.options.grid.id),g.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&h.push(e.options.grid.serviceBasedObjId)})),c.length>1&&(a=!0);const m=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),C=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,f=e.cellInfos.nodeModel.options.grid.id,v=e.cellInfos.nodeModel.options.grid.type,D=e.cellInfos.nodeModel.options.grid.name,I=e.cellInfos.nodeModel.options.grid.displayType;let w=[];w.push(v),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(w=w.concat(e.cellInfos.nodeModel.options.grid.kind));const _={objectId:C,objectType:v,objectTaxonomies:w,displayName:D,displayType:I,facetName:"dependency"};let b={};b.objectID=f,b.objectTitle=D,b.objectType=v,b.serviceId="3DSpace",b.label=e.cellInfos.nodeModel.options.grid.title,b.changeType="Change Request",b.facet="Analysis Basis",b.action="CR>Change Impacts";const S=m.openWith(_);a?(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(u.getRelationalExplorerMenu(g)),h.length>0&&(o.push(d.getMaturityMenu(void 0,h)),o.push(u.getTransferMenu(e)),o.push(r.getDownloadMenu(h)),!h.length>1&&o.push(r.getPreviewMenu(h))),t(o)):(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(u.getRelationalExplorerMenu(g)),S.then((i=>{i&&o.push(i),h.length>0&&(o.push(d.getMaturityMenu(void 0,h)),o.push(u.getTransferMenu(e))),o.push(u.getChangeImpacts(b)),s.getDocuments(h).then((function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(o.push(r.getDownloadMenu(h)),o.push(r.getPreviewMenu(h))),t(o)})).catch((e=>{console.log(e),t(o)}))})))}))},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)i[o].options.grid.sourceType&&"CSD"!=i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){t.openRelationalExplorer(e)}))}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_Change_Impact_Command_Label,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Analysis Basis",action:"CR>Analysis Basis>RMB>Change Impacts"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}}};return u})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRRelatedScopeGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r){"use strict";var l={showRMBMenuOnGrid:function(e){return new Promise((function(t,i){const o=[];let a=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();let c=[],p=[],u=[];d.forEach((e=>{c.push(e.options.grid.id),p.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&u.push(e.options.grid.serviceBasedObjId)})),d.length>1&&(a=!0);const g=s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),h=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,m=e.cellInfos.nodeModel.options.grid.type,C=e.cellInfos.nodeModel.options.grid.name,f=e.cellInfos.nodeModel.options.grid.displayType;let v=[];v.push(m),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(v=v.concat(e.cellInfos.nodeModel.options.grid.kind));const D={objectId:h,objectType:m,objectTaxonomies:v,displayName:C,displayType:f,facetName:"dependency"},I=g.openWith(D);a?(u.length>0&&o.push(n.createPropertyPushItem(u)),o.push(l.getRelationalExplorerMenu(p)),u.length>0&&(o.push(r.getMaturityMenu(void 0,u)),o.push(l.getTransferMenu(e))),t(o)):(u.length>0&&o.push(n.createPropertyPushItem(u)),o.push(l.getRelationalExplorerMenu(p)),I.then((i=>{i&&o.push(i),u.length>0&&(o.push(r.getMaturityMenu(void 0,u)),o.push(l.getTransferMenu(e))),t(o)})))}))},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)i[o].options.grid.sourceType&&"CSD"!=i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){t.openRelationalExplorer(e)}))}}}}};return l})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("changeActionEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("changeActionEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabRolledUpDGLayout",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","DS/TreeModel/TreeDocument","require","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbar","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/Controls/Loader","DS/UIKIT/Input/Button","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabGridCol","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O,G,N){"use strict";var A={changeView:function(e){setTimeout((function(){G.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))},massUpdateHandlerForDisposition:function(e){let t;function i(e,i){clearTimeout(t),t=setTimeout(e,i)}let n=l("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var o,a={};let s=!0,r="";e.getAllDescendants();a.commandInfo={type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Mass Update"},n.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:a});let d=l("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler"),c=d.chgGovDataGridView.dgView.layout._leafColumns;for(let e of c)"approvers"!=e.dataIndex&&"dispositionType"!=e.dataIndex||(e.editableFlag=!0),"approvers"==e.dataIndex&&(e.typeRepresentation="user");d.chgGovDataGridView.dgView.showModelMassUpdateDialog();let p=document.getElementsByClassName("wux-windows-window-header-close"),u=document.getElementsByClassName("wux-controls-abstract wux-windows-window wux-windows-dialog wux-ui-is-rendered wux-windows-window-vertically-resizable wux-windows-window-horizontally-resizable");p&&p[p.length-1].remove(),u.length>1&&u[u.length-1].setStyle("z-index","40000"),s=!1;const g=[];d.chgGovDataGridView.options.treeDocument.getAllDescendants().forEach(((e,t)=>{const i=e._options.grid.id,n=e._options.grid.dispositionInformation;i&&n&&g.push({id:i,oldDispositionInformation:n})})),console.log("Old disposition information stored as an array:",g);for(let e of c)"approvers"!=e.dataIndex&&"dispositionType"!=e.dataIndex||(e.editableFlag=!1),"approvers"==e.dataIndex&&delete e.typeRepresentation;let h=document.getElementsByClassName("wux-windows-window-mask-content");h&&h.length>1&&I.mask(h[h.length-2]);let m=d.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Ok.elements.button,C=d.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Apply.elements.button,f=d.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Close.elements.button;const v=function(){i((()=>{r="OK";var e=document.getElementsByClassName("wux-controls-abstract wux-controls-toggle wux-controls-radio");o=e&&e[e.length-1].getChildren()[0].hasClassName("wux-controls-radio-on"),A.updateMassValue(o,r,g),r="";let t=document.getElementsByClassName("wux-windows-window-mask-content");t&&t.length>1&&I.unmask(t[t.length-2])}),300)};m.hasAttribute("data-listener-added")||(m.addEventListener("click",v),m.setAttribute("data-listener-added","true"));const D=function(){i((()=>{C.dsModel.disabled=!0,m.dsModel.disabled=!0,r="APPLY";var e=document.getElementsByClassName("wux-controls-abstract wux-controls-toggle wux-controls-radio");o=e&&e[1].getChildren()[0].hasClassName("wux-controls-radio-on"),A.updateMassValue(o,r,g),r="";let t=document.getElementsByClassName("wux-windows-window-mask-content");t&&t.length>1&&I.unmask(t[t.length-2])}),300)};C.hasAttribute("data-listener-added")||(C.addEventListener("click",D),C.setAttribute("data-listener-added","true")),f.addEventListener("click",(function(){h&&h.length>1&&I.unmask(h[h.length-2])}))},updateMassValue:async function(e,t,i){let n,o,a,d,c,u,g=[],h=[],m=[],C=[],v=[],D=new r,w=l("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler");if(c=e?w.chgGovDataGridView.options.treeDocument.getAllDescendants():w.chgGovDataGridView.options.treeDocument.getSelectedNodes(),document.getElementsByClassName("wux-tweakers-aggregate-view-inline wux-tweakers-string-label").length>0&&(n=document.getElementsByClassName("wux-tweakers-aggregate-view-inline wux-tweakers-string-label"),o=n[n.length-1].getText(),""!=o)){var _=l("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");var b=(await _.getApproversSuggestionsUpdate(o.split(" ")[0],["person","routetemplate"],void 0,D)).getAllDescendants();for(let e of b)"Route Template"==e.options.value.type&&C.push(e);for(let e of c)e.options.grid.dispositionInformation&&!e.options.grid.dispositionInformation[0].approvers.length&&v.push(e);let e=o.split("|");console.log(e);for(let t of e)if(""!=t)if(!t.includes("(")&&C.length>0&&v)for(let e of C)e.options.value.name!=t.split(" ")[0]&&e.options.value.name!=t.split(" ")[1]||(a=e.options.value.id,d={list:a,role:"approver",updateAction:"CONNECT",user:""},g.push(d));else a=t.split("(")[1].split(")")[0],d={list:"",role:"approver",updateAction:"CONNECT",user:a},h.push(d)}if(g.length>0&&h.length>0||g.length>1){if(p.error(f.CHG_GOV_Disposition_MassUpdate_Error),w.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Apply.elements.button.dsModel.disabled=!1,w.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Ok.elements.button.dsModel.disabled=!1,"OK"==t){let e=document.getElementsByClassName("wux-windows-window-mask-content");e&&e.length>1&&I.unmask(e[e.length-2])}}else{for(let e of c)e.options.grid.dispositionInformation&&e.options.grid.dispositionInformation.length>0&&"true"==e.options.grid.dispositionInformation[0].dispositionAccessBits[0].Edit&&("Open"==e.options.grid.dispositionInformation[0].dispositionCurrentState||"Draft"==e.options.grid.dispositionInformation[0].dispositionCurrentState||"In Work"==e.options.grid.dispositionInformation[0].dispositionCurrentState)&&(e.options.grid.dispositionType&&"documentKey"==e.options.grid.dispositionType?u="documentKey":e.options.grid.dispositionType&&"fixKey"==e.options.grid.dispositionType?u="fixKey":e.options.grid.dispositionType&&"notFixKey"==e.options.grid.dispositionType?u="notFixKey":e.options.grid.dispositionType&&"notImpactedTypeKey"==e.options.grid.dispositionType?u="notImpactedTypeKey":e.options.grid.dispositionType&&"noneKey"==e.options.grid.dispositionType&&(u="noneKey"),h.length>0&&e.options.grid.dispositionInformation[0].approvers.length>=0&&(0==e.options.grid.dispositionInformation[0].approvers.length||"Route Template"!=e.options.grid.dispositionInformation[0].approvers[0].type)?(d={id:e.options.grid.dispositionInformation[0].id,dispositionType:u,approvers:h},m.push(d)):g.length>0&&e.options.grid.dispositionInformation[0].approvers.length>0&&"Person"==e.options.grid.dispositionInformation[0].approvers[0].type?p.warn(f.CHG_GOV_Disposition_MassUpdate_Warn):g.length>0&&e.options.grid.dispositionInformation[0].approvers.length<1?(d={id:e.options.grid.dispositionInformation[0].id,dispositionType:u,approvers:g},m.push(d)):(h.length<1&&g.length<1&&e.options.grid.dispositionType||m.length!=c.length)&&(d={id:e.options.grid.dispositionInformation[0].id,dispositionType:u},m.push(d)));if(m.length<1){if(p.warn(f.CHG_GOV_Disposition_MassUpdate_Warn),w.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Apply.elements.button.dsModel.disabled=!1,w.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Ok.elements.button.dsModel.disabled=!1,"OK"==t){let e=document.getElementsByClassName("wux-windows-window-mask-content");e&&e.length>1&&I.unmask(e[e.length-2])}}else m.length!=c.length&&p.warn(f.CHG_GOV_Disposition_MassUpdate_Warn),m.length>0?O.massUpdateOnChangeImpacts(m).then((async e=>{if(e&&e.success){console.log("Backend update successful. Proceeding with UX update.");const i=await N.enrichDispositionInfo(e.data[0].doTargetDisposition),n="update";s.publish("updateDisposition"+(widget?widget.id:""),{dispInfo:i,action:n,buttonFlag:t})}})).catch((async n=>{console.error("mass update failed");const o="update";if(e)for(const e in i){const n=i[e],a=await N.enrichDispositionInfo(n.oldDispositionInformation);s.publish("updateDisposition"+(widget?widget.id:""),{dispInfo:a,action:o,buttonFlag:t})}else{const e=Object.values(i)[0],n=await N.enrichDispositionInfo(e.oldDispositionInformation);s.publish("updateDisposition"+(widget?widget.id:""),{dispInfo:n,action:o,buttonFlag:t})}})).finally((()=>{const e=w.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Apply.elements.button,t=w.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Ok.elements.button;e.dsModel.disabled=!1,t.dsModel.disabled=!1;const i=document.getElementsByClassName("wux-windows-window-mask-content");i&&i.length>1&&I.unmask(i[i.length-2])})):console.log("No data provided for update. Backend call skipped.")}},createDispositionForImpactedIRView:function(e){console.log("Into suscribe");var t=[],i={id:e.model.id};t[0]=i,O.createDispositionFromIR(e.InvestigationRequestId,t).then((async function(e){console.log("Successful");let t=ChgIRAffectedItemsDataGridLayout.treeDocument.getAllDescendants().length;for(let o=0;o<t;o++){var i=ChgIRAffectedItemsDataGridLayout.treeDocument.getAllDescendants()[o];if(i.options.grid.id==e.data[0].AffectedItemId){var n={dispositionInformation:[]};n.dispositionInformation.push(e.data[0]);let t=e.data[0].dispositionType,o=null,a=e.data[0].dispositionRevision,s=e.data[0].dispositionOwner,r=e.data[0].dispositionOwnerFullName;t&&(o="DOCUMENT"==t?"documentKey":"NO_FIX"==t?"notFixKey":"FIX"==t?"fixKey":"NOT_IMPACTED"==t?"notImpactedTypeKey":"noneKey"),i.options.grid.dispositionInformation=[],i.options.grid.dispositionInformation[0]={dispostionId:e.data[0].id,dispositionName:e.data[0].dispositionName,dispositionCurrentState:e.data[0].dispositionCurrentState,dispositionPolicy:e.data[0].dispositionPolicy,dispositionType:t,dispositionRevision:a,dispositionOwner:s,dispositionOwnerFullName:r},i.updateOptions({grid:{dispositionName:ChgDataGridUtil.dispositionNameMethod("",n.dispositionInformation[0].dispositionName),dispositionMaturity:e.data[0].dispositionCurrentStateNLS,dispositionType:o,dispositionRevision:a,dispositionOwner:r}});break}}}))}};return A})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],(function(e){e.modelEvents.publish({event:"remove_aggregation_row_datagrid",data:{treeDocument:e.treeDocument}}),e.chgCRImpactAnalysisView.chgGridView.groupRows({dataIndexesToGroup:[]}),setTimeout((function(){t.changeView("TileView")}),100)}))},showEmptyView:function(){var e=document.getElementById("impactAnalysisEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactAnalysisEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionDataGridView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","require","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionToolbar","DS/Controls/Label","DS/Controls/TooltipModel","DS/UIKIT/Input/Button","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgVersionExplorerLoader","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O){"use strict";return e.extend({vEObject:{},getVEObject:function(){return this.vEObject.value},init:function(e){this._parent(e);this._modelEvents=null,this._toolbar=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o,this.dgView=void 0},render:async function(e,i){var o=this;if(this.options.treeDocument&&this.options.target){var r={treeDocument:this.options.treeDocument,columns:this.options.columns,cellSelection:"none",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,placeholder:m.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"dgViewFor_AffectedRevision",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!1,onDragStartRowHeader:function(e,t){g.readyDragContent(e,t)},onDragStartCell:function(e,t){g.readyDragContent(e,t)},onDelayedModelDataRequest:function(e){let t=(n=e.collectionView).getCustomViewsManager().getCustomViews(),i=n.getCustomViewsManager()._currentCustomViewIdentifier;t.map((e=>{if(e.identifier==i){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);u.getGlobalVariable().customeViewCOList=e}}}));var n=e.collectionView;let o=[],a=[],s=u.getGlobalVariable().customeViewCOList;if(-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let t=e.startNodeIndex;t<=e.endNodeIndex;t++){o.push(n.model[t].options.grid.id),a.push(n.model[t]);for(let e=0;e<s.length;e++)n.model[t].setAttribute(s[e],void 0)}h.updateAsynAttributeColumn(s,o,a)}}};r=UWA.merge(r,this.options),this.dgView=new t(r),this.dgView.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map((e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);u.getGlobalVariable().customeViewCOList=e}}}))},s.unsubscribe("ChgGov_delayed_columns_model_updated"+widget.id),s.subscribe("ChgGov_delayed_columns_model_updated"+widget.id,(function(e){o.dgView.prepareUpdateView(),o.dgView.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0)})),I.toolbar=this.dgView.setToolbar(I.writetoolbarDefinition()),this.toolbar=I.toolbar,this.dgView.buildStatusBar([{type:n.STATUS.NB_ITEMS},{type:n.STATUS.NB_SELECTED_ROWS}]),this.dgView.getTreeDocument().getXSO().onAdd((function(e){})),this.dgView.getTreeDocument().getXSO().onRemove((function(e){})),this.dgView.addEventListener(a.POINTERHIT,(function(e,t){o.onItemClick(e,t)})),document.getElementById("outer-manageScopeAffectedRevision-grid-div")&&document.getElementById("outer-manageScopeAffectedRevision-grid-div").destroy(),this.dgViewContainer=UWA.createElement("div",{id:"outer-manageScopeAffectedRevision-grid-div",class:"outer-manageScopeAffectedRevision-grid-div"}),this.dgViewDiv=UWA.createElement("div",{class:"content-manageScopeAffectedRevision-grid-div"});let d=UWA.createElement("div",{class:"footer-manageScopeAffectedRevision-grid-div"}),c=UWA.createElement("div",{class:"buttons-manageScopeAffectedRevision-grid-div"});new b({value:m.CHG_GOV_Button_Close,className:"primary"}).inject(c).addEvent("onClick",(function(){o.closeHandler(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))}));var l=document.getElementsByClassName("wux-ui-3ds-close")[0];l&&l.addEventListener("click",(function(){o.closeHandler(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))})),c.inject(d),this.windowOfImpactData=await y.getWindowOfImpact(e),this.scopeAnalysisId=e,this.options.callBackFunction=()=>this.callbacksFromVersionGraph(i),this.loadVersionGraph(),this.dgViewContainer.addContent(this.dgViewDiv),this.dgViewContainer.addContent(d),this.dgViewContainer.inject(this.options.target),this.dgViewContainer.setStyle("width",this.options.target.offsetWidth)}},closeHandler:function(){r("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler").manageScopePanel.close()},getReportedObject:function(e){for(var t=this.options.selectedNodeData,i=0;i<e.length;i++){var n=e[i];if(n.options.grid.id==t.options.grid.id)return n}},loadVersionGraph:function(){this.dgViewDiv.innerHTML="";let{customizeColumnHash:e,customizeColumnAttributeHash:t}=this.customColumnDef();S.VersionExplorerLoaderFactory(this.options.physicalId,this.options.callBackFunction,this.dgViewDiv,{id:""},"",this.vEObject,{customizeColumnHash:e,customizeColumnAttributeHash:t,customizeToolbarHash:{}})},computeWindowOfImpact:function(e,t){var i=e.data[0].impactedItems,n=e.data[0].introducedInIds,o=e.data[0].fixedInIds,a=this;n&&n.length>0&&(i=i.filter((e=>!n.some((t=>t===e))))),o&&o.length>0&&(i=i.filter((e=>!o.some((t=>t===e))))),this.reportedObject&&(i=i.filter((function(e){return e!==a.reportedObject.options.grid.id})));for(var s=0;s<t.length;s++)n.includes(t[s].options.grid.id)?(t[s].updateOptions({grid:{affectedAs:m.CHG_IR_Affected_Items_Introduced_In}}),t[s].__LISTVIEWCOPY__&&t[s].__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:m.CHG_IR_Affected_Items_Introduced_In}})):o.includes(t[s].options.grid.id)?(t[s].updateOptions({grid:{affectedAs:m.CHG_IR_Affected_Items_Fixed}}),t[s].__LISTVIEWCOPY__&&t[s].__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:m.CHG_IR_Affected_Items_Fixed}})):i.includes(t[s].options.grid.id)?(t[s].updateOptions({grid:{affectedAs:m.CHG_IR_Affected_Items_Affected}}),t[s].__LISTVIEWCOPY__&&t[s].__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:m.CHG_IR_Affected_Items_Affected}})):t[s].options.grid.id!=this.reportedObject.options.grid.id?(t[s].updateOptions({grid:{affectedAs:""}}),t[s].__LISTVIEWCOPY__&&t[s].__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:""}})):(t[s].updateOptions({grid:{affectedAs:m.CHG_IR_Affected_Items_Reported}}),t[s].__LISTVIEWCOPY__&&t[s].__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:m.CHG_IR_Affected_Items_Reported}}))},getMainBranch:function(e){for(var t,i=e.getTreeDocument().getAllBranches(),n=0;n<i.length;n++){t=i[n].nodeList;for(var o=0;o<t.length;o++)if(this.reportedObject.options.grid.id===t[o].options.grid.id)return t}},isSelectedNodeInMainBranch:function(e,t){for(var i=0;i<e.length;i++)if(e[i].options.grid.id===t.options.grid.id)return!0;return!1},getExisitingFixedInNode:function(e){for(var t=0;t<e.length;t++)if(e[t].options.grid.affectedAs==m.CHG_IR_Affected_Items_Fixed)return e[t]},getCurrentBranch:function(e){for(var t,i=e.getTreeDocument().getAllBranches(),n=0;n<i.length;n++){t=i[n].nodeList;for(var o=0;o<t.length;o++)if(e.options.grid.id===t[o].options.grid.id)return t}},checkIfBranchIsAffected:function(e){for(var t=0;t<e.length;t++)if(e[t].options.grid.affectedAs==m.CHG_IR_Affected_Items_Affected||e[t].options.grid.affectedAs==m.CHG_IR_Affected_Items_Fixed||e[t].options.grid.affectedAs==m.CHG_IR_Affected_Items_Introduced_In)return!0;return!1},getCurrentBranchFixedInNode:function(e){for(var t=void 0,i=0;i<e.length;i++)if(e[i].options.grid.affectedAs==m.CHG_IR_Affected_Items_Fixed){t=e[i];break}return t},getCurrentBranchIntroducedInNode:function(e){for(var t=void 0,i=0;i<e.length;i++)if(e[i].options.grid.affectedAs==m.CHG_IR_Affected_Items_Introduced_In){t=e[i];break}return t},getAllFixedInNodes:function(){for(var e=[],t=this.getVEObject().getObjects(),i=0;i<t.length;i++)t[i].options.grid.affectedAs==m.CHG_IR_Affected_Items_Fixed&&e.push(t.options.grid.id)},callbacksFromVersionGraph:function(e){this.fromOnCellRequest=!1;var t=void 0,i=void 0;let n=this.getVEObject().getObjects();this.reportedObject=this.getReportedObject(n),this.computeWindowOfImpact(this.windowOfImpactData,n),this.getVEObject().subscribeEvent("select",(async n=>{var o=n.data.nodeModel;if(!this.fromOnCellRequest){var a={target:document.querySelector("#ChangeImpactParentDiv")};this.showSpinner(a);var s=this.getMainBranch(o);if(this.isSelectedNodeInMainBranch(s,o))if(!0,o.options.grid.revision>this.reportedObject.options.grid.revision){t=this.getExisitingFixedInNode(s);let i=o.getAllDescendants()[0];if(i)this.fixedInNode=i;else if("Evaluate"==e.contextDetails.model.businessState){var r=!0;this.fixedInNode=o}else this.fixedInNode={}}else i=this.getCurrentBranchIntroducedInNode(s),this.introducedInNode=o;else{var l=this.getCurrentBranch(o);if(this.checkIfBranchIsAffected(l)){var d=this.getCurrentBranchIntroducedInNode(l);if(this.getCurrentBranchFixedInNode(l)||d&&o.options.grid.revision>d.options.grid.revision){let e=o.getAllDescendants()[0];this.fixedInNode=e||{},t=this.getCurrentBranchFixedInNode(l)}else this.introducedInNode=o,i=d}else this.introducedInNode=o}var c=E.processWindowOfImpact(this.introducedInNode,this.fixedInNode,t,i,r);if("true"===u.getGlobalVariable().isFullLicence&&"true"===e.contextDetails.access.accessBits["Manage Fixed In"]&&"true"===e.contextDetails.access.accessBits["Manage Introduced In"]){this.windowOfImpactData=await y.updateWindowOfImpact(this.scopeAnalysisId,c);var p=this.getVEObject().getObjects();this.computeWindowOfImpact(this.windowOfImpactData,p)}this.introducedInNode=void 0,this.fixedInNode=void 0,t=void 0,i=void 0;a={target:document.querySelector("#ChangeImpactParentDiv")};this.hideSpinner(a)}this.fromOnCellRequest=!1})),this.getVEObject().subscribeEvent("unselect",(async t=>{var o=t.data.nodeModel;if(!this.fromOnCellRequest){var a={target:document.querySelector("#ChangeImpactParentDiv")};if(this.showSpinner(a),o.options.grid.affectedAs===m.CHG_IR_Affected_Items_Reported)O.warn(m.CHG_GOV_ManageScope_Reported_Selection_Warning),this.fromOnCellRequest=!0,o.select(),o.__LISTVIEWCOPY__&&o.__LISTVIEWCOPY__.select();else{var s=this.getMainBranch(o),r=!1;if(this.isSelectedNodeInMainBranch(s,o))if(r=!0,o.options.grid.revision>this.reportedObject.options.grid.revision){var l=this.getExisitingFixedInNode(s);this.fixedInNode=o}else{let e=o.getChildren()[0];e.options.grid.revision!=this.reportedObject.options.grid.revision?this.introducedInNode=e:e.options.grid.revision==this.reportedObject.options.grid.revision&&(this.introducedInNode={}),i=this.getCurrentBranchIntroducedInNode(s)}else{var d=this.getCurrentBranch(o);r=this.checkIfBranchIsAffected(d);var c=this.getCurrentBranchIntroducedInNode(d);if(r)if(o.options.grid.affectedAs==m.CHG_IR_Affected_Items_Introduced_In){let e=o.getAllDescendants()[0];this.introducedInNode=e||{},i=c}else this.fixedInNode=o,l=this.getCurrentBranchFixedInNode(d)}var p=E.processWindowOfImpact(this.introducedInNode,this.fixedInNode,l,i);"true"===u.getGlobalVariable().isFullLicence&&"true"===e.contextDetails.access.accessBits["Manage Fixed In"]&&"true"===e.contextDetails.access.accessBits["Manage Introduced In"]&&(this.windowOfImpactData=await y.updateWindowOfImpact(this.scopeAnalysisId,p),0==this.windowOfImpactData.data.length?(this.options.target.empty(),this.render(this.scopeAnalysisId,this.options)):this.computeWindowOfImpact(this.windowOfImpactData,n)),this.introducedInNode=void 0,this.fixedInNode=void 0,l=void 0}a={target:document.querySelector("#ChangeImpactParentDiv")};this.hideSpinner(a)}this.fromOnCellRequest=!1}))},onItemClick:function(e,t){1==e.multipleHitCount&&this._modelEvents.publish({event:"ChgManageScopeAffectedRevision_DGV_onClick",data:t.nodeModel,context:t.nodeModel}),2==e.multipleHitCount&&(this._modelEvents.publish({event:"ChgGov_DGV_onDbClick",data:t.nodeModel,context:t.nodeModel}),t.nodeModel.select(!0))},showSpinner:function(e){D.mask(e.target?e.target:this.options.target)},hideSpinner:function(e){D.unmask(e.target?e.target:this.options.target)},reapplySortModel:function(){this.dgView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}},customColumnDef:function(){let e={},t={};return e.Disposition={columnDefFunction:e=>{e.insertDefaultColumns([{text:m.CHG_IR_Affected_Items_Affected_As,dataIndex:"affectedAs",insertAfterIndex:"description",isDraggable:!1,isHidden:!1,alwaysOn:!0,onCellRequest:e=>{var t=this.windowOfImpactData.data[0].impactedItems,i=this.windowOfImpactData.data[0].introducedInIds,n=this.windowOfImpactData.data[0].fixedInIds,o=this;i&&i.length>0&&(t=t.filter((e=>!i.some((t=>t===e))))),n&&n.length>0&&(t=t.filter((e=>!n.some((t=>t===e))))),this.reportedObject&&(t=t.filter((function(e){return e!==o.reportedObject.options.grid.id})));var a=e.cellView.getContent();n.includes(e.nodeModel.options.grid.id)?(a.setContent(m.CHG_IR_Affected_Items_Fixed),this.fromOnCellRequest=!0,e.nodeModel.unselect()):i.includes(e.nodeModel.options.grid.id)?(a.setContent(m.CHG_IR_Affected_Items_Introduced_In),this.fromOnCellRequest=!0,e.nodeModel.select()):this.reportedObject.options.grid.id==e.nodeModel.options.grid.id?(a.setContent(m.CHG_IR_Affected_Items_Reported),this.fromOnCellRequest=!0,e.nodeModel.select()):t.includes(e.nodeModel.options.grid.id)?(a.setContent(m.CHG_IR_Affected_Items_Affected),this.fromOnCellRequest=!0,e.nodeModel.select()):(a.setContent(""),this.fromOnCellRequest=!0,e.nodeModel.unselect()),this.fromOnCellRequest=!1}}])}},t.Disposition=!0,{customizeColumnHash:e,customizeColumnAttributeHash:t}}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],(function(e,t,i,n){"use strict";return{changeView:function(e){try{i.getGlobalVariable().is3DSpace&&n(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout"],(function(e){let t=e.treeDocument.getAllDescendants();for(var i of(e.treeDocument.prepareUpdate(),t))i.updateOptions({label:i.options.grid.title});e.treeDocument.pushUpdate()}))}catch(e){console.log(e)}setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("impactedItemEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactedItemEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D){"use strict";return e.extend({init:function(e){this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:D.getGlobalVariable().get3DSpaceURL(),securityContext:D.getGlobalVariable().getSecurityContext(),isNative:D.getGlobalVariable().isNative}};let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),u.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").removeClassName("minified-header-height"))}))},loadCustomColumns:function(){let e=f.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){let e=this.processColumns(),t=this,a={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return p.showRMBMenuOnGrid(e).then((function(e){return e}));t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};a=UWA.merge(a,this.options);let u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new n(a),this.chgGridView.cellSelection="none",this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){m.onCustomViewsSave(e,i,t.options.custom_view_options)},this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},(function(e){if("true"==D.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.chgGridView.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},(function(e){var i=t.chgGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new s(u),t.chgGridView.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&5==t.columnID){var i={};i.cellInfos=t,m.executeMaturity(i)}};let f={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return p.showRMBMenuOnGrid(e).then((function(e){return e}))}};this.tileView.onContextualEvent=f;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),r.toolbar=this.chgGridView.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar,this.chgGridView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),this.chgGridView.getTreeDocument().getXSO().onAdd((function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-impact-analysis-basis-object-selection-update",data:{count:i,accessBits:t.options.accessBits}});let n=C("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),o={contextId:e.options.grid.id,contextType:e.options.grid.isKindOfType,isNodeAdded:!0,node:e};n.notifySelection(o)})),this.chgGridView.getTreeDocument().getXSO().onRemove((function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-impact-analysis-basis-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}});let i=C("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),n={contextId:e.options.grid.id,contextType:e.options.grid.isKindOfType,isNodeAdded:!0,node:e};i.notifySelection(n)})),document.getElementById("outer-impactBasis-grid-div")&&document.getElementById("outer-impactBasis-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactBasis-grid-div",class:"outer-impactBasis-grid-div"});let v=UWA.createElement("div",{class:"toolbar-impactBasis-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"impactBasis-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new g({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new h({title:c.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(v),this.toolbar.inject(v);let I=UWA.createElement("div",{class:"content-impactBasis-grid-div expanded-header-height"}),w=UWA.createElement("div",{styles:{height:"100%"},class:"content-impactBasis-tile-div ImpactBasisTileView expanded-header-height"}),_=UWA.createElement("div",{class:"hideView",id:"impactBasisEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(_),this.chgGridView.inject(I),this.tileView.inject(w),_.inject(w),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.addContent(I),this.chgGridViewContainer.addContent(w),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=I;m.registerCustomEventsOnDGV(["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"],this.chgGridView,this.options.custom_view_options),this.loader=(new o).inject(this.options.target)},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f){"use strict";let v={createImpactBasisView:async function(t,s,r){var g=this;t.setStyles({position:"relative"}),s=s[0];let h={};this.contextId=s.physicalId,h=UWA.merge(h,s),h.target=t,h.columns=i.getColumns(s.accessBits),this.ChgCRImpactBasisDataGridModel=new n(h.grid.parentCRId,h.grid.id),this.modelEvents=h.modelEvents,d.makeDroppable(h.target,g.dropHandler),this.treeDocument=h.treeDocument=this.ChgCRImpactBasisDataGridModel.createTreeDocument(),g.ChgCRImpactBasisTreeModel=h.treeDocument,g.ChgCRImpactBasisTreeModel=h.treeDocument,g.ChgCRImpactBasisDataGridModel.registerCustomFilter(),this.subscribeToModelEvents(h.treeDocument),this.options=h,this.chgCRIImpactBasisView=new e(h),m.showLoader(h.target,this.chgCRIImpactBasisView.loader);v.changeView(),await p.getImpactAnalysisFacet(h.grid.id,"impactBasis").then((async e=>{var t={},i={};e.data[0]&&e.data[0].impactBasis&&e.data[0].impactBasis[0]&&e.data[0].impactBasis[0].non3DSpaceNonIndexedData&&(t=e.data[0].impactBasis[0].non3DSpaceNonIndexedData,e.data[0].impactBasis[0].mapping&&(i=e.data[0].impactBasis[0].mapping),e.data[0].impactBasis.splice(0,1));var n=await u.processIAAnalysisBasisForGet(e.data[0].impactBasis);if(g.ChgCRImpactBasisDataGridModel.loadImpactBasisData(h.treeDocument,n),m.fetchMaturityStateCSS(n),m.hideLoader(h.target,g.chgCRIImpactBasisView.loader),i.length>0&&await g.ChgCRImpactBasisDataGridModel.i3dxInformationFilteringAndCalling(t,i,h.treeDocument),t&&t.length>0){var s=new Map,r=t.length,d=125;for(let e=0;e<t.length;e+=d){let i=[];i=r<d?t.slice(e,e+r):t.slice(e,e+d);for(var p=[],C=new Map,f=i,D=0;D<f.length;D++){var I=f[D];p.push(I.id),C.set(I.id,I)}var w=[];if(p.length>0){var _=u.commonPredicatedForFedSearch(),b=await u.callFederatedSearch(p,_);b&&b.results&&b.results.length>0&&(w=await u.processIAAnalysisBasisFederatedSearch(b,C))}g.ChgCRImpactBasisDataGridModel.loadImpactBasisData(h.treeDocument,w),s=new Map([...s,...C]),r-=d}if(s&&s.size>0){g.chgCRIImpactBasisView.indexInfoDiv.show();var S=await c.recent();if(S&&S.results&&S.results.length>0){var y=u.filterNonIndexedDataNew(S,s);s.size!=y.length&&a.warn(o.CHG_GOV_Not_Accessable_Data);var E=await u.processInformationForRecentIAImpactBasis(y);m.fetchMaturityStateCSS(E),g.ChgCRImpactBasisDataGridModel.loadImpactBasisData(h.treeDocument,E)}}}else g.chgCRIImpactBasisView.indexInfoDiv.hide();var O=u.getDefaultFilter(h.columns);h.treeDocument.setFilterModel(O),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(g.ChgCRImpactBasisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:g.ChgCRImpactBasisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,g.ChgCRImpactBasisTreeModel)})),0==h.treeDocument.getChildren().length?h.treeDocument._modelEvents.publish({event:"treeEmpty"}):h.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),v.changeView(),g.chgCRIImpactBasisView.chgGridView.addEventListener("postEdit",(function(e,t){v.updateReasonForChangeValue(t)})),m.hideLoader(h.target,g.chgCRIImpactBasisView.loader)})),g.chgCRIImpactBasisView.loadCustomColumns()},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),p.updateImpactBasisReasonForChangeValue(i,v.contextId).then((e=>{console.log("updated on backend")}))}},massUpdateHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Analysis Basis",action:"IA>Analysis Basis>Mass Update"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),v.chgCRIImpactBasisView.chgGridView.showModelMassUpdateDialog();let t=v.chgCRIImpactBasisView.chgGridView._modelMassUpdateDialog.buttons.Ok.elements.button,i=v.chgCRIImpactBasisView.chgGridView._modelMassUpdateDialog.buttons.Apply.elements.button;t.addEventListener("click",(function(){v.updateMassValue()})),i.addEventListener("click",(function(){v.updateMassValue()}))},updateMassValue:function(){let e=v.ChgCRImpactBasisDataGridModel.treeDocument.getAllDescendants(),t=[];for(let i of e){let e={id:i.options.grid.id,reasonForChange:i.options.grid.reasonForChange};t.push(e)}p.updateImpactBasisReasonForChangeValue(t,v.contextId).then((e=>{console.log("updated on backend")}))},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);v.ChgCRImpactBasisDataGridModel.treeDocument;var t=[];t=c.parseObjectInformation(e);var i=[];let n=v.ChgCRImpactBasisDataGridModel.getTreeDocument().getAllDescendants();for(let e=0;e<n.length;e++)i.push({id:n[e].options.grid.id});(t=t.filter((e=>!i.some((t=>e.id===t.id))))).length>0?v.ChgCRImpactBasisDataGridModel.addExistingChildren(t).then((function(e){v.modelEvents.publish({event:"update-impact-basis",data:{operation:"CONNECT",context:e.data}})}),(function(e){})):a.warn(o.CHG_GOV_NODE_PRESENT_WARN_ANALYSIS_ITEM)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()})),h.unsubscribe(`IA_ImpactBasis:${widget.id}`),h.subscribe(`IA_ImpactBasis:${widget.id}`,(function(e){"true"==l.getGlobalVariable().slidePanelTagger&&(console.log("facetswitch....."),console.log(e),require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRImpactBasisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRImpactBasisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRImpactBasisTreeModel)})))})),h.unsubscribe(`${e.options.id} of ${widget.id}`),h.subscribe(`${e.options.id} of ${widget.id}`,(function(t){v.ChgCRImpactBasisDataGridModel.filterView(t,e)})),h.unsubscribe(`${e.options.id} colorize ${widget.id}`),h.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){v.ChgCRImpactBasisDataGridModel.enableColorizeView(t,e)})),h.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),h.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){v.ChgCRImpactBasisDataGridModel.disableColorizeView(t,e)})),h.unsubscribe("updateIndexingIconForHideOrShowInImpactBasis"),h.subscribe("updateIndexingIconForHideOrShowInImpactBasis",(function(e){i.chgCRIImpactBasisView.indexInfoDiv.show()})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-basis-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-basis-object-selection-update"},(function(e){v.handleObjectSelectionUpdate(e)}))},addExistingHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Analysis Basis",action:"IA>Analysis Basis>Add Analysis Basis"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=v.ChgCRImpactBasisDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingImpactedItems",extendedQuery:v.createExcludeListForSearch(t)};const n=r.activateSearch();l.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),r.search(o.CHG_GOV_ImpactBasis_Toolbar_AddImpactBasis,"",v.OnSearchComplete,"impactBasis",n,void 0,void 0,i)},createExcludeListForSearch:function(e){let t=[];for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[],n=v.treeDocument.getAllDescendants().map((e=>e.options.grid.id));for(var s=!1,r=0;r<e.length;r++)n.includes(e[r][0])?s=!0:i.push({id:e[r][8]&&null!=e[r][8]?e[r][8]:e[r][0],type:e[r][2],updateAction:"CONNECT",service:e[r][7]&&e[r][7].includes(":")?e[r][7].split(":")[0]:e[r][7],environment:l.getGlobalVariable().tenant});s&&a.warn(o.CHG_GOV_NODE_PRESENT_WARN_ANALYSIS_ITEM,!0),i.length&&(t.hideEmptyView(),v.ChgCRImpactBasisDataGridModel.addExistingChildren(i).then((function(e){v.modelEvents.publish({event:"update-impact-basis",data:{operation:"CONNECT",context:e.data}})}),(function(e){})))},removeHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Analysis Basis",action:"IA>Analysis Basis>Remove"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=v.treeDocument.getSelectedNodes();if(t.length>0){let e=[];for(var i=0;i<t.length;i++)e.push({id:t[i].options.grid.id,type:t[i].options.grid.type,updateAction:"DISCONNECT"});v.ChgCRImpactBasisDataGridModel.removeExistingChildren(e).then((function(e){v.modelEvents.publish({event:"update-impact-basis",data:{operation:"DISCONNECT",context:e}})}),(function(e){}))}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects);let n={ImpactAnalysis:v.ChgCRImpactBasisDataGridModel.impactAnalysisId,selectedAnalysisBasis:v.ChgCRImpactBasisDataGridModel.treeDocument.getSelectedNodes()};v.modelEvents.publish({event:"remove_AnalysisBasis_count_AI_grid",data:n})},addImpactedItemHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Analysis Basis",action:"IA>Analysis Basis>Add as Impact"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=v.treeDocument.getSelectedNodes();if(t.length>0){let e=[];t.forEach((t=>e.push({id:t.options.grid.id,type:t.options.grid.type,updateAction:"CONNECT",service:t.options.grid.serviceName,environment:l.getGlobalVariable().tenant})));let i=f("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout"),n=[];if(i&&i.ChgCRImpacedItemDataGridModel&&i.ChgCRImpacedItemDataGridModel.treeDocument){let e=i.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants().length;for(let t=0;t<e;t++)n.push(i.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants()[t].options.grid)}let s=e.filter((e=>!n.some((t=>e.id===t.id))));const r=v.ChgCRImpactBasisDataGridModel.impactAnalysisId,d=v.ChgCRImpactBasisDataGridModel.parentCRId;s.length>0?p.updateExistingImpactItem(d,r,s).then((async function(e){if(a.success(o.CHG_GOV_ImpactBasis_Add_ImpactedItems_Success),i.ChgCRImpacedItemDataGridModel&&i.ChgCRImpacedItemDataGridModel.impactAnalysisId==v.ChgCRImpactBasisDataGridModel.impactAnalysisId){var n={},s={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(n=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(s=e.data[0].mapping),e.data.splice(0,1));var r=await u.processIAImpacts(e);if(i.ChgCRImpacedItemDataGridModel.addNodesInLayoutModel(i.ChgCRImpacedItemDataGridModel.treeDocument,r),s.length>0)await i.ChgCRImpacedItemDataGridModel.i3dxInformationFilteringAndCalling(n,s,i.ChgCRImpacedItemDataGridModel.treeDocument);if(n&&n.length>0){var l=new Map,d=n.length,p=125;for(let e=0;e<n.length;e+=p){let t=[];t=d<p?n.slice(e,e+d):n.slice(e,e+p);for(var g=[],m=new Map,C=t,f=0;f<C.length;f++){var D=C[f];g.push(D.id),m.set(D.id,D)}var I=[];if(g.length>0){var w=u.commonPredicatedForFedSearch(),_=await u.callFederatedSearch(g,w);_&&_.results&&_.results.length>0&&(I=await u.processIAImpactsFederatedSearch(_,m))}i.ChgCRImpacedItemDataGridModel.addNodesInLayoutModel(i.ChgCRImpacedItemDataGridModel.treeDocument,I),l=new Map([...l,...m]),d-=p}if(l&&l.size>0){h.publish("updateIndexingIconForHideOrShowInImpacts",{});var b=await c.recent();if(b&&b.results&&b.results.length>0){var S=u.filterNonIndexedDataNew(b,l);l.size!=S.length&&a.warn(o.CHG_GOV_Not_Accessable_Data);var y=await u.processInformationForRecentIAImpactBasis(S);let e=[];y&&(e=y);let t=[];for(let i of e)i.reasonForChange="",i.impactedItem="IMPACTED",t.push(i);i.ChgCRImpacedItemDataGridModel.addNodesInLayoutModel(i.ChgCRImpacedItemDataGridModel.treeDocument,t)}}}}v.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:t}})})):a.warn(o.CHG_GOV_NODE_PRESENT_WARN_IMPACTED_ITEM)}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){e.count>0?("true"===e.accessBits.RemoveImpactBasis&&v.chgCRIImpactBasisView.toolbar.updateNodeModel("remove",{visibleFlag:!0}),"true"===e.accessBits.AddImpactedItems&&v.chgCRIImpactBasisView.toolbar.updateNodeModel("addImpactedItem",{visibleFlag:!0}),v.chgCRIImpactBasisView.toolbar.updateNodeModel("changeAssessment",{visibleFlag:!0}),"true"===e.accessBits.AddImpactBasis&&v.chgCRIImpactBasisView.toolbar.updateNodeModel("massUpdate",{visibleFlag:!0})):(v.chgCRIImpactBasisView.toolbar.updateNodeModel("remove",{visibleFlag:!1}),v.chgCRIImpactBasisView.toolbar.updateNodeModel("addImpactedItem",{visibleFlag:!1}),v.chgCRIImpactBasisView.toolbar.updateNodeModel("massUpdate",{visibleFlag:!1}),v.chgCRIImpactBasisView.toolbar.updateNodeModel("changeAssessment",{visibleFlag:!1}))},handleForMaturityUpdate:function(e){if(e){let t=v.ChgCRImpactBasisDataGridModel.treeDocument.getSelectedNodes();m.getHandleForMaturityUpdate(JSON.parse(e),t)}},globalSubscribeForCRImpactBasisView:function(){s.addObserver("ChgCRImpactBasisDataGridLayout","CO-Properties-Update",v.handlePropertiesUpdateForImpactBasis),s.addObserver("ChgCRImpactBasisDataGridLayout","Lifecycle.Modification",v.handleForMaturityUpdate),s.addObserver("ChgCRImpactBasisDataGridLayout","ENORIPE-InApp-"+widget.id+"ChgCRImpactBasisDataGridLayout/onOK",v.handleChangeAssessmentOK)},handlePropertiesUpdateForImpactBasis:function(e){var t=v.ChgCRImpactBasisTreeModel;t&&C.handlePropertiesOnUpdate(t,e)},changeAssessmentHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Change Assessment"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=v.treeDocument.getSelectedNodes();if(t&&t.length>0){let e=[];t.forEach((t=>{e.push(t.options.grid.serviceBasedObjId)}));const i=widget.id+"ChgCRImpactBasisDataGridLayout";r.launchTransientWidget(i,e,"ENORIPE_AP")}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleChangeAssessmentOK:function(e){if(e.length){var t=!1;for(let i=0;i<e.length;i++)e[i].id.includes("uuid:")?(t=!0,e.splice(i,1),i--):(e[i].updateAction="CONNECT",e[i].service="3DSpace");t&&a.error(o.CHG_GOV_Relation_Cross_Service_NotSupported_Error),e.length&&v.ChgCRImpactBasisDataGridModel.addExistingChildren(e)}}};return v.globalSubscribeForCRImpactBasisView(),v})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/UIKIT/Mask"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";var h=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e){this._parent(e)},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.Title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.Name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.Severity+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.Owner+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.State},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(i),i.outerHTML},loadImpactedIrData:async function(e,t,i,n){e.prepareUpdate();var a=await this.createTreeDocumentNodeModel(t,i,n);if(e.addRoot(a),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&g.isMasked(e)&&g.unmask(e)}},createTreeDocumentNodeModel:async function(e,t,i){var n=[];let o=[];await u.getColumnApprovalStatusValue(p.createPayloadApprovalStatusValue(e)).then((function(e){e&&o.push(e)}));for(var a=0;a<e.length;a++){var s=await this.createTreeNode(e[a],t,i,o);n.push(s)}return n},createTreeNode:async function(e,t,n,a){let s=c("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),r=`${e.name} | ${e.typeNLS}`,l=e.currentNLS;var d;e.maturityWithBadge=e.currentNLS,e.businessStateName=e.businessState,e.co_name=e.name,e.ownerFullName=e.owner_fullname[0],a&&e.dispositionInformation&&a[0][e.dispositionInformation[0].dispostionId]&&(e.ApprovalStatus=a[0][e.dispositionInformation[0].dispostionId].approvalStatus,e.approvalStatusModel=a[0][e.dispositionInformation[0].dispostionId].approvalStatusModel);var u=this.getCustomTooltip(e);d=o.getGlobalVariable().is3DSpace?`<a onclick='findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId=${e.id}">${UWA.String.escapeHTML(e.title)}</a>`:e.title;let g=e.dispositionInformation?e.dispositionInformation[0]:"";if(g?g.dispostionId:""){e.dispositionMaturity=g.dispositionCurrentStateNLS,e.dispositionIcon=g.dispositionIcon?g.dispositionIcon:g.dispostionIcon,e.dispositionName=s.dispositionNameMethod(e.dispositionIcon,g.dispositionName);var h=g.dispositionAccessBits[0]["Manage Approver"],m=g.dispositionAccessBits[0]["Manage Resolved By"];g.approvers&&g.approvers.length>0?e.approvers=s.addApproversUserIconMethod(g.approvers):"true"===o.getGlobalVariable().isFullLicence&&"true"===h&&(e.approvers=s.addApproversDefaultMethod());let t=g.dispositionType;if(t&&(e.dispositionType="DOCUMENT"==t?"documentKey":"NO_FIX"==t?"notFixKey":"FIX"==t?"fixKey":"NOT_IMPACTED"==t?"notImpactedTypeKey":"noneKey"),e.dispositionRevision=g.dispositionRevision,g.resolvedByInformation&&g.resolvedByInformation[0]){var C=g.resolvedByInformation[0];if(C.indexResolvedBy&&C.indexResolvedBy.length>0){let t=C.indexResolvedBy[0].resolvedByName||"",i=C.indexResolvedBy[0].resolvedByIcon||"";e.dispositionResolvedBy=s.resolvedByNameMethod("",t,i)}else if(C.non3DSpaceNonIndexedDataForResolvedBy&&C.non3DSpaceNonIndexedDataForResolvedBy.length>0){let t=await p.resolvedByInformationForCrossServiceAndRecents(C.non3DSpaceNonIndexedDataForResolvedBy),i=t[0]&&t[0].resolvedByName||"",n=t[0]&&t[0].resolvedByIcon||"";e.dispositionResolvedBy=s.resolvedByNameMethod("",i,n),e.dispositionInformation.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy=t}else"true"===o.getGlobalVariable().isFullLicence&&"true"===m&&(e.dispositionResolvedBy=s.resolvedByDefaultForDispostion())}else"true"===o.getGlobalVariable().isFullLicence&&"true"===m&&(e.dispositionResolvedBy=s.resolvedByDefaultForDispostion())}else{let t={};t.accessBits=e.accessBits?e.accessBits[0]:void 0,e.dispositionName=s.defaultDispositionNameValue(t)}return new i({label:d,subLabel:r,description:l,productID:n,grid:e,icons:[e.icon],thumbnail:e.thumbnail,customTooltip:u,children:[],contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getAutoCompleteForApprovers:function(){}});return m})),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l){"use strict";var d={showRMBMenuOnGrid:function(e){return new Promise((function(t,i){const o=[];let a=!1;const s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();s.length>1&&(a=!0);const c=s.map((e=>e.options.grid.id)),p=(s.map((e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title}))),l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),u={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},g={};g.selectedNodeIDs=c;const h=p.openWith(u);a?(o.push(n.createPropertyPushItem(c)),o.push(r.getRelationalExplorerMenu(g)),o.push(r.getMaturityMenu(e)),o.push(d.getTransferMenu(e)),t(o)):(o.push(n.createPropertyPushItem(c)),o.push(r.getRelationalExplorerMenu(g)),h.then((i=>{i&&o.push(i),o.push(r.getMaturityMenu(e)),o.push(d.getTransferMenu(e)),t(o)})))}))},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}}};return d})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesModel"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e)},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",u)},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.Title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.Name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.Severity+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.Owner+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.State},getNLSForChangeImpactsColumn:function(e){if(e&&e["Impact Type"]&&""!=e["Impact Type"]){if("Proposed Change"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Proposed_Change;if("Realized Change"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Realized_Change;if("Resolution Item"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Resolution_Item;if("Affected Item"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Affected_Item;if("Applicability"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Applicability;if("Impact Basis"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Impact_Basis;if("Impacted Item"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Impacted_Item}return""},getNLSForStatusColumn:function(e){if(e&&e.Status&&""!=e.Status){if("Not Started"===e.Status)return a.CHG_CA_Column_Status_Not_Started;if("Started"===e.Status)return a.CHG_CA_Column_Status_Started;if("Ignored"===e.Status)return a.CHG_CA_Column_Status_Ignored;if("Rejected"===e.Status)return a.CHG_CA_Column_Status_Rejected;if("Complete"===e.Status)return a.CHG_CA_Column_Status_Complete;if("Partial"===e.Status)return a.CHG_CA_Column_Status_Partial}return""},setApplicabilityData:async function(e){try{if("Change Action"==e.type){const t=await l.getApplicabilityDataForCA(e.changeId);if(t.changeaction&&t.changeaction.applicability){return t.changeaction.applicability.expressionTXT}}else{const t=await l.getApplicabilityData(e.changeId);if(t.applicability){return t.applicability.display}}}catch(e){throw e}},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(i),i.outerHTML},getProposedDetailHTMLObject:function(e){let t=UWA.createElement("div",{class:"proposedDetail_div"});return"Resolution Item"===e["Impact Type"]&&t.setContent([{tag:"img",allowUnsafeHTMLContent:!0,src:e.proposedDetails[0].icon,styles:{"padding-left":"5px"}},{tag:"span",allowUnsafeHTMLContent:!0,class:"proposed_detail_previous_obj_label",text:e.proposedDetails[0].title,styles:{"padding-left":"5px"}},{tag:"span",class:"proposed_detail_obj_revision",allowUnsafeHTMLContent:!0,text:e.proposedDetails[0].revision,styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer",width:20,height:20,"padding-left":"5px"}},{tag:"span",allowUnsafeHTMLContent:!0,class:"proposed_detail_obj_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}]),t.outerHTML},getParsedPrposedOperation:function(e){let t={};if("Proposed Change"===e["Impact Type"]){let i=e.changeActivity||"",n=e.change||"",o=i.split(" "),a=n.split(" ");t.changeActivityOperation=o[0],t.changeDetailOperation=a[0]}else"Realized Change"===e["Impact Type"]&&(t=e.realizedChangesDetailsArray[0].operation);return t},getReasonForChange:function(e){return"Proposed Change"===e["Impact Type"]?e.proposedWhy:"Realized Change"===e["Impact Type"]?e.realizedChangesDetailsArray[0].realizedWhy:""},getOperationForProposed:function(e,t){return"ChangeStatus"==t.changeActivityOperation?e.computedOperation="ChangeStatus":"ChangeRequired"==t.changeActivityOperation?e.computedOperation="ChangeRequired":e.computedOperation=t.changeDetailOperation,a["CHG_GOV_Proposed_Activity_"+e.computedOperation]?a["CHG_GOV_Proposed_Activity_"+e.computedOperation]:""},getOperationForRealized:function(e,t,i){var n=this;let o=[],s=[];var r=[];let l;for(let d=0;d<e.length;d++)if("Realized Change"==e[d]["Impact Type"]){for(let r=0;r<i.length;r++){const c=i[r];if(t===c.wherePID){if(c.afterPID&&c.wherePID!==c.afterPID&&!s.includes("Structure Modification")){let e=a.CHG_GOV_Realized_Activity_NonPrimeRoot;s.push(e)}if(c.beforePID&&c.wherePID!==c.beforePID){if(!s.includes("Structure Modification")){let e=a.CHG_GOV_Realized_Activity_NonPrimeRoot;s.push(e)}}else if(c.afterPID&&c.wherePID===c.afterPID){let t=n.getOperationForParentObject(c.operation);l=n.getOperationForParentObject(e[d].realizedChangesDetailsArray[0].operation),o.push(t)}}else if(t!==c.wherePID)if(t===c.afterPID){let t=n.getOperationDescObject(c.operation);l=n.getOperationDescObject(e[d].realizedChangesDetailsArray[0].operation),o.push(t)}else if(t===c.beforePID){let t=n.getOperationDescObject(c.operation);l=n.getOperationDescObject(e[d].realizedChangesDetailsArray[0].operation),o.push(t)}}if(o.length>0){for(let t=0;t<o.length;t++)if(l===o[t]){-1===r.findIndex((t=>t["Impact Type"]===e[d]["Impact Type"]&&t.id===e[d].id))&&(e[d].changeOperation=o[t],r.push(e[d]))}}else if(o.length<=0&&s.length>0){-1===r.findIndex((t=>t["Impact Type"]===e[d]["Impact Type"]&&t.id===e[d].id))&&(e[d].changeOperation=s[0],r.push(e[d]))}}else if("Proposed Change"===e[d]["Impact Type"]){let t=n.getParsedPrposedOperation(e[d]),i=n.getOperationForProposed(e[d],t);e[d].changeOperation=i,r.push(e[d])}else r.push(e[d]);return r},getOpeartionChangeStatusObject:function(e){let t=e.split("#"),i=t[1].split("."),n=i[i.length-1];return a["CHG_GOV_Realized_Activity_"+t[0]+"_Suffix"]+" : "+n},getOperationForParentObject:function(e){var t=this;let i=[],n="";return e.split(" ").forEach((function(e){console.log(e),console.log("CHG_GOV_Realized_Activity_"+e),e.includes("#")?(n=t.getOpeartionChangeStatusObject(e),i.push(n)):(n=a["CHG_GOV_Realized_Activity_"+e],i.push(n))})),i.join(", ")},getOperationDescObject:function(e){let t=e.split(" "),i=[];return t.forEach((function(e){let t=a["CHG_GOV_Realized_Activity_"+e+"_Usage"];i.push(t)})),i.join(", ")},loadChangeImpactsData:async function(e,t,o){var a=this,s=new n;e.prepareUpdate();let r=a.getOperationForRealized(t,o,t.realizedChangeDetailsArray);for(var l=0;l<r.length;l++){var d=await a.setApplicabilityData(r[l]),c=a.createCustomNameField(r[l]);r[l].name=c;var p=a.getNLSForStatusColumn(r[l]),u=a.getNLSForChangeImpactsColumn(r[l]),g=a.createCustomTooltip(r[l]),h=a.getProposedDetailHTMLObject(r[l]);a.getParsedPrposedOperation(r[l]);let t=a.getReasonForChange(r[l]),n=r[l].changeOperation;var m=i.createTreeNodeDataModel(s,{label:r[l].title,customTooltip:g,grid:{id:r[l].id,impactType:r[l]["Impact Type"],impactTypeNLS:u,status:p,maturity:r[l].current,maturityWithBadge:r[l].currentNLS,policy:r[l].policy,policyNLS:r[l].policyNLS,description:r[l].description,icon:r[l].icon,previewicon:r[l].previewicon,co_name:r[l].name,organization:r[l].organization,owner:r[l].owner,ownerFullName:r[l].ownerFullName,project:r[l].project,revision:r[l].revision,severity:r[l].severity,severityNLS:r[l].severityNLS,severityGrade:"High"==r[l].severity?2:"Medium"==r[l].severity?1:0,title:r[l].title,type:r[l].type,typeNLS:r[l].typeNLS,proposedChange:h,proposedID:r[l].proposedDetails[0].id,proposedName:r[l].proposedDetails[0].name,proposedTitle:r[l].proposedDetails[0].title,proposedType:r[l].proposedDetails[0].type,proposedTypeNLS:r[l].proposedDetails[0].typeNLS,proposedRevision:r[l].proposedDetails[0].revision,proposedOrganization:r[l].proposedDetails[0].organization,proposedProject:r[l].proposedDetails[0].project,proposedOwner:r[l].proposedDetails[0].owner,proposedOwnerFullName:r[l].proposedDetails[0].ownerFullName,proposedTypeIcon:r[l].proposedDetails[0].icon,Action:"",applicability:d,applicabilityIcon:r[l].Applicability,change:n,reasonForChange:t,interfaces:r[l].interfaces,classes:r[l].classes}});e.addChild(m)}e.pushUpdate()}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownUtil",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h){"use strict";return{getURCColumns:function(t){var n=this;return n.options=t,n.accessBits=t.contextDetails.userAccess,[i.getColumnDefinition({dataIndex:"titleTree",width:260}),{dataIndex:"title_instance",ds6wIndexMapping:"ds6w:label",text:l.CHG_GOV_DataGrid_Column_Title,icon:"flow-cascade",width:200,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!0,filterId:"stringRegexp",filterModel:""},i.getColumnDefinition({dataIndex:"typeNLS"}),i.getColumnDefinition({dataIndex:"chgObjName"}),i.getColumnDefinition({dataIndex:"revision"}),i.getColumnDefinition({dataIndex:"maturityWithBadge",width:80}),{dataIndex:"change",text:l.CHG_GOV_Realized_Changes,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"url",width:65,getCellValue:function(e){if(e.nodeModel)return{icon:e.nodeModel.getAttributeValue("activity_icon")}},getCellTooltip:function(e){if(e.nodeModel)return{shortHelp:e.nodeModel.getAttributeValue("change")}}},{dataIndex:"change_details",text:l.CHG_GOV_Realized_Change_Details,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0},{dataIndex:"selected_proposed",text:l.CHG_GOV_Selected_Proposed,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""},{dataIndex:"selected_resolution",text:l.CHG_GOV_Selected_Resolution,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""},{dataIndex:"flowdown_status",text:l.CHG_GOV_Flowdown_Status,width:150,editableFlag:!(!n.accessBits.FlowdownTo||"true"!=n.accessBits.FlowdownTo),visibleFlag:!0,alwaysVisibleFlag:!1,editionPolicy:"EditionOnOver",typeRepresentation:"flowdown_status",massUpdateAllowedFlag:!(!n.accessBits.FlowdownTo||"true"!=n.accessBits.FlowdownTo),filterId:"set",filterModel:[],getCellEditableState:function(t){let i=!(!n.accessBits.FlowdownTo||"true"!=n.accessBits.FlowdownTo);return t&&t.nodeModel&&i&&(e.is(t.nodeModel.getAttributeValue("activity_id"))||(i=!1)),i}}]},getNativeContextualMenu:async function(e,t,i){let n=[];var o=this;let a,r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),l=!1;r.length>1&&(l=!0);let d=[],c=[];if(l){let l={cellInfos:{nodeModel:{}}};r.forEach((function(e){l.cellInfos.nodeModel=e,a=o.fetchReleventIds(l),d.push(a.activityReferenceID),c.push(a.activityInstanceID?a.activityInstanceID:a.activityReferenceID),"false"===a.authoringCommandsAvailable&&(i=!1)}));let u=d;return(p={}).instanceID=c,p.objectID=u,p.objectType=e.objectType,n.push(s.getExploreMenu(null,p)),n.push(s.getExploreWithMenu(null,p)),n.push(s.getOpenMenu(null,p)),n.push(s.getOpenAdvMenu(null,p)),n.push(s.getOpenROMenu(null,p)),(await this.getCommonMenu(e,t,i)).forEach((e=>{n.push(e)})),n}{a=o.fetchReleventIds(t);let r=a.activityReferenceID,l=a.activityInstanceID;var p;return(p={}).instanceID=l,p.objectID=r,9!==t.cellInfos.columnID&&(n.push(s.getExploreMenu(null,p)),n.push(s.getExploreWithMenu(null,p)),n.push(s.getOpenMenu(null,p)),n.push(s.getOpenAdvMenu(null,p)),n.push(s.getOpenROMenu(null,p))),(await this.getCommonMenu(e,t,i)).forEach((e=>{n.push(e)})),n}},getDashboardContextualMenu:async function(t,i,n){let o=[],a=!1;if(i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(a=!0),!a){if(i.cellInfos.columnID&&8===i.cellInfos.columnID&&i.cellInfos.nodeModel.options.grid.selected_proposed_items&&i.cellInfos.nodeModel.options.grid.selected_proposed_items.length>1||9===i.cellInfos.columnID&&i.cellInfos.nodeModel.options.grid.selected_resolution_items&&i.cellInfos.nodeModel.options.grid.selected_resolution_items.length>1)return;let a=await this.getOpenWithMenu(i);return e.is(a)&&o.push(a),(await this.getCommonMenu(t,i,n)).forEach((e=>{o.push(e)})),o}return(await this.getCommonMenu(t,i,n)).forEach((e=>{o.push(e)})),o},getOpenWithMenu:async function(e){let t,i=!1;if(e.cellInfos.columnID&&8==e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.selected_proposed_items&&1==e.cellInfos.nodeModel.options.grid.selected_proposed_items.length)t={objectId:e.cellInfos.nodeModel.options.grid.selected_proposed_items[0].id,objectType:e.cellInfos.nodeModel.options.grid.selected_proposed_items[0].type,displayName:e.cellInfos.nodeModel.options.grid.selected_proposed_items[0].title,displayType:e.cellInfos.nodeModel.options.grid.selected_proposed_items[0].typeNLS};else if(e.cellInfos.columnID&&9===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.selected_resolution_items&&1==e.cellInfos.nodeModel.options.grid.selected_resolution_items.length)t={objectId:e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].refId?e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].refId:e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].id,objectType:e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].type,displayName:e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].title,displayType:e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].typeNLS};else if(e.cellInfos.columnID&&7==e.cellInfos.columnID&&(e.cellInfos.nodeModel.options.grid.before_ref_details||e.cellInfos.nodeModel.options.grid.before_details))e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?t={objectId:e.cellInfos.nodeModel.options.grid.before_ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(t="Configured Removal"==e.cellInfos.nodeModel.options.grid.change?{objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0]}:{objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0]});else{e.cellInfos.nodeModel.options.grid.isInstanceOperation&&"TRUE"==e.cellInfos.nodeModel.options.grid.isInstanceOperation&&(i=!0),!i&&e.cellInfos.nodeModel.options.grid.where_details&&e.cellInfos.nodeModel.options.grid.where_details.id?t={objectId:e.cellInfos.nodeModel.options.grid.where_details.id,objectType:e.cellInfos.nodeModel.options.grid.where_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"}:e.cellInfos.nodeModel.options.grid.ref_details&&e.cellInfos.nodeModel.options.grid.ref_details.id?t={objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"}:i&&e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(t={objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"});var n={facetName:"RealizedDGV",selectedItem:t};s.setSelectedItem(n)}return await s.openWith(t)},fetchReleventIds:function(e){let t,i,n,o,a,s,r,l=!1;e.cellInfos.columnID&&8==e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.selected_proposed_items&&1==e.cellInfos.nodeModel.options.grid.selected_proposed_items.length?t=e.cellInfos.nodeModel.options.grid.selected_proposed_items[0].id:e.cellInfos.columnID&&9==e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.selected_resolution_items&&1==e.cellInfos.nodeModel.options.grid.selected_resolution_items.length?t=e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].refId?e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].refId:e.cellInfos.nodeModel.options.grid.selected_resolution_items[0].id:e.cellInfos.columnID&&7===e.cellInfos.columnID&&(e.cellInfos.nodeModel.options.grid.before_ref_details||e.cellInfos.nodeModel.options.grid.before_details)?(e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(t=e.cellInfos.nodeModel.options.grid.before_ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&("Configured Removal"==e.cellInfos.nodeModel.options.grid.change?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):t=e.cellInfos.nodeModel.options.grid.before_details.id),r=!1):(e.cellInfos.nodeModel.options.grid.isInstanceOperation&&"TRUE"==e.cellInfos.nodeModel.options.grid.isInstanceOperation&&(l=!0),l?e.cellInfos.nodeModel.options.grid.after_details&&e.cellInfos.nodeModel.options.grid.after_details.id?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.after_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&(n=e.cellInfos.nodeModel.options.grid.before_details.id)):e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(e.cellInfos.nodeModel.options.grid.ref_details?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):t=e.cellInfos.nodeModel.options.grid.before_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,s=e.cellInfos.nodeModel.options.grid.revision):(t=e.cellInfos.nodeModel.options.grid.where_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,s=e.cellInfos.nodeModel.options.grid.revision,e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(n=e.cellInfos.nodeModel.options.grid.before_details.id)));let d={};return d.activityReferenceID=t,d.activityInstanceID=i,d.previousReferenceID=n,d.previousInstanceID=o,d.activityLabel=a,d.activityRev=s,d.isInstanceOperation=l,d.authoringCommandsAvailable=r,d},getCommonMenu:async function(e,t,n){var o=this;let s,d=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),c=!1;d.length>1&&(c=!0);let p=[],u=[];if(c){let e={cellInfos:{nodeModel:{}}};d.forEach((function(t){e.cellInfos.nodeModel=t,s=o.fetchReleventIds(e),p.push(s.activityReferenceID),u.push(s.activityInstanceID?s.activityInstanceID:s.activityReferenceID),"false"===s.authoringCommandsAvailable&&(n=!1)}))}else s=o.fetchReleventIds(t);if(c){let t=p;var g=[];const n={};n.selectedNodeIDs=t,g.push(i.getRelationalExplorerMenu(n));let o=!1;return e.sourceType&&"LEGACY_3DSPACE"!=e.sourceType&&(o=!0),g.push(a.createPropertyPushItem(u,o)),g}let m=s.activityReferenceID,C=s.activityInstanceID,f=s.previousReferenceID;s.previousInstanceID,s.activityLabel,s.activityRev,s.isInstanceOperation;n=null!=s.authoringCommandsAvailable?s.authoringCommandsAvailable:n;g=[];const v={};v.selectedNodeIDs=C&&void 0===m?[C]:[m],v.selectedNodeTitle=t.cellInfos.nodeModel.options.grid.title,v.selectedNodeRevision=void 0===t.cellInfos.nodeModel.options.grid.revision?"":t.cellInfos.nodeModel.options.grid.revision;let D={};if(D.selectedNodeIDs=v.selectedNodeIDs,f&&(D.selectedNodeIDs=[f]),!0===n&&t.cellInfos.nodeModel.options.grid.activity_id&&(8!=t.cellInfos.columnID||8==t.cellInfos.columnID&&!(t.cellInfos.nodeModel.options.grid.selected_proposed_items&&t.cellInfos.nodeModel.options.grid.selected_proposed_items.length>0))&&(9!=t.cellInfos.columnID||9==t.cellInfos.columnID&&!(t.cellInfos.nodeModel.options.grid.selected_resolution_items&&t.cellInfos.nodeModel.options.grid.selected_resolution_items.length>0))){let e={type:"PushItem",title:l.CHG_GOV_Sel_Proposed_Rel,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Flowdown",action:"CA>Flowdown>Select Proposed from Relations"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("FDDGV_ADD_PROPOSED_FROM_RELATIONS:"+(widget?widget.id:""),D)}}},t={type:"PushItem",title:l.CHG_GOV_Sel_Proposed_Search,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-search"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Flowdown",action:"CA>Flowdown>Select Proposed with Search"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("FDDGV_ADD_PROPOSED_WITH_SEARCH:"+(widget?widget.id:""),v)}}},i={type:"PushItem",title:l.CHG_GOV_Sel_Resolution_Rel,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Flowdown",action:"CA>Flowdown>Add Resolution from Relations"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("FDDGV_ADD_RESOLUTION_FROM_RELATIONS:"+(widget?widget.id:""),v)}}},n={type:"PushItem",title:l.CHG_GOV_Sel_Resolution_Search,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-search"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Flowdown",action:"CA>Flowdown>Add Resolution with Search"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("FDDGV_ADD_RESOLUTION_WITH_SEARCH:"+(widget?widget.id:""),v)}}};g.push(e),g.push(t),g.push(i),g.push(n)}var I;g.push(i.getRelationalExplorerMenu(v)),I=t.cellInfos.columnID&&8==t.cellInfos.columnID&&t.cellInfos.nodeModel.options.grid.selected_proposed_items&&1==t.cellInfos.nodeModel.options.grid.selected_proposed_items.length?t.cellInfos.nodeModel.options.grid.selected_proposed_items[0].id:t.cellInfos.columnID&&9===t.cellInfos.columnID&&t.cellInfos.nodeModel.options.grid.selected_resolution_items&&1==t.cellInfos.nodeModel.options.grid.selected_resolution_items.length?t.cellInfos.nodeModel.options.grid.selected_resolution_items[0].id:e.id;let w=!1;if(e.sourceType&&"LEGACY_3DSPACE"!=e.sourceType&&(w=!0),g.push(a.createPropertyPushItem([I],w)),!0===n&&t.cellInfos.columnID&&8==t.cellInfos.columnID&&t.cellInfos.nodeModel.options.grid.selected_proposed_items&&1==t.cellInfos.nodeModel.options.grid.selected_proposed_items.length){let e={type:"PushItem",title:l.CHG_GOV_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(e){let i=t.cellInfos.nodeModel.options.grid.selected_proposed_items.map((e=>e.id));r.publish("FDDGV_REMOVE_PROPOSED:"+(widget?widget.id:""),i)}}};g.push(e)}if(!0===n&&t.cellInfos.columnID&&9==t.cellInfos.columnID&&t.cellInfos.nodeModel.options.grid.selected_resolution_items&&1==t.cellInfos.nodeModel.options.grid.selected_resolution_items.length){let e={type:"PushItem",title:l.CHG_GOV_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(e){let i=t.cellInfos.nodeModel.options.grid.selected_resolution_items.map((e=>e.id));r.publish("FDDGV_REMOVE_RESOLUTION:"+(widget?widget.id:""),i)}}};g.push(e)}return g}}})),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueView",["DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m){"use strict";return n.extend({init:function(e){this._parent(e);let t=this;this.options=e,this.options.custom_view_options={settings:{url:i.getGlobalVariable().get3DSpaceURL(),securityContext:i.getGlobalVariable().getSecurityContext(),isNative:i.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o,this.issueGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),h.subscribe("idcard-header-minified",(function(e){e.value?(t.chgGridViewContainer.getElement(".content-CO-issue-grid-div").removeClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-CO-issue-grid-div").addClassName("minified-header-height"),t.chgGridViewContainer.getElement(".content-CO-issue-tile-div").removeClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-CO-issue-tile-div").addClassName("minified-header-height")):(t.chgGridViewContainer.getElement(".content-CO-issue-grid-div").addClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-CO-issue-grid-div").removeClassName("minified-header-height"),t.chgGridViewContainer.getElement(".content-CO-issue-tile-div").addClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-CO-issue-tile-div").removeClassName("minified-header-height"))}));var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"chg-issue-DataGrid-on-search",data:{query:e},context:t})},onResetSearch:function(e){n.publish({event:"chg-issue-DataGrid-on-reset-search",data:{query:e},context:t})}})},render:function(){try{let e=this.processColumns(),t=this,n={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,placeholder:u.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCOIssueGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return g.showRMBMenuOnGrid(e).then((function(e){return e}));t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){c.readyDragContent(e,t)},onDragStartCell:function(e,t){c.readyDragContent(e,t)}};n=UWA.merge(n,this.options);let o={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.issueGridView=new s(n),this.issueGridView.cellSelection="none",this.issueGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){m.onCustomViewsSave(e,i,t.options.custom_view_options)},this._modelEvents.unsubscribe({event:"chg-issue-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"chg-issue-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"chg-issue-DataGrid-on-search"},(function(e){if("true"==i.getGlobalVariable().slidePanelTagger||t.options.type.contains("Investigation")){var n=e.query;if(n){var o=t.issueGridView.getTreeDocument();o.withTransactionUpdate((function(){o.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(n.toLowerCase())||e.options.grid.name.toLowerCase().contains(n.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"chg-issue-DataGrid-on-reset-search"},(function(e){var i=t.issueGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new l(o),t.issueGridView.getTreeDocument().getXSO().onAdd((function(e){let i;if(t.issueGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),"InvestigationRequest"==t.options.type){var n=t.issueGridView.getTreeDocument().getXSO().isIn(e);h.publish("ir-issue-object-selection-update",{count:e.getTreeDocument().getSelectedNodes().length}),t.onSelectionChange(t._modelEvents,e,e.options.grid.id,e.options.grid.type,n)}else t._modelEvents.publish({event:"co-issue-object-selection-update",data:{count:i}})})),t.issueGridView.getTreeDocument().getXSO().onRemove((function(e){if(t.issueGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),"InvestigationRequest"==t.options.type){var i=t.issueGridView.getTreeDocument().getXSO().isIn(e);t.onSelectionChange(t._modelEvents,e,e.options.grid.id,e.options.grid.type,i)}0==e.getTreeDocument().getSelectedNodes().length&&("InvestigationRequest"==t.options.type?(h.publish("ir-issue-object-selection-update",{count:e.getTreeDocument().getSelectedNodes().length}),t.onSelectionChange(t._modelEvents,t.options.treeDocument._getTrueRoot(),t.id,t.options.contextDetails.isKindOfType,!1)):t._modelEvents.publish({event:"co-issue-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}}))}));let C={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return g.showRMBMenuOnGrid(e).then((function(e){return e}))}};this.tileView.onContextualEvent=C;let f={issueDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};t.issueGridView.addEventListener(a.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&3===t.columnID){var i={};i.cellInfos=t,m.executeMaturity(i)}},this.issueGridView.getTypeRepresentationFactory().registerTypeRepresentations(f),d.toolbar=this.issueGridView.setToolbar(d.writetoolbarDefinition(this.options)),this.toolbar=d.toolbar,this.issueGridView.addEventListener("allCellsRendered",(function(){t.issueGridView.buildStatusBar([{type:p.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.issueGridView.getTreeDocument().getAllDescendants().length}},{type:p.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:p.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:p.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])})),document.getElementById("outer-CO-issue-grid-div")&&document.getElementById("outer-CO-issue-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CO-issue-grid-div",class:"outer-CO-issue-grid-div"});let v=UWA.createElement("div",{class:"toolbar-CO-issue-grid-div"});this.toolbar.inject(v);let D=UWA.createElement("div",{class:"content-CO-issue-grid-div expanded-header-height"}),I=UWA.createElement("div",{styles:{height:"100%"},class:"content-CO-issue-tile-div IssueTileView expanded-header-height"}),w=UWA.createElement("div",{class:"hideView",id:"COissueEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(w),this.issueGridView.inject(D),this.tileView.inject(I),w.inject(I),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.addContent(D),this.chgGridViewContainer.addContent(I),this.options.custom_view_options.dgvHandle=this.issueGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=D,this.loader=(new r).inject(this.options.target)}catch(e){}},loadCustomColumns:function(){let i=t.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(i){let t=JSON.parse(i);t&&e.restoreCustomViews(t,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.issueGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}})}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgImpactAnalysisServices","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil","DS/UIKIT/Mask","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_){"use strict";var b=e.extend({init:function(e){this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative,aggregationRowRequired:!0,aggregationRowID:"ia_Total",aggregationRowClass:"iaTotalAttribute"}};var i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),g.unsubscribe("idcard-header-minified"),g.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").removeClassName("minified-header-height"))}))},loadCustomColumns:function(){let e=w.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&_.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){var e=this.processColumns(),t=this,u={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,placeholder:p.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactAnalysisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i="",n=null;if(e&&e.cellInfos&&e.cellInfos.columnID&&(5===e.cellInfos.columnID||6===e.cellInfos.columnID)){if(""!=(i=arguments[0].infos.target.getAttribute("id")))return 5!=e.cellInfos.columnID&&6!=e.cellInfos.columnID||e.cellInfos.nodeModel.options.grid.Dispatch_From.forEach((function(e){e.Id!=i||(n={id:e.Id,type:e.Type,name:e.Name,typeNLS:e.Type})})),null==n?null:f.getRMBForChangeRequest(n,e).then((function(e){return e}))}else if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1&&"ia_Total"!=e.cellInfos.nodeModel.options.grid.id)return c.showRMBMenuOnGrid(t,e,!0).then((function(e){return e}));e.collectionView.columns.length,e.cellInfos.columnID;return e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)},getCellTooltip:function(e){if(5!==e.columnID&&6!==e.columnID||"__item__"!=e.cellView.cellType){if(1===e.columnID&&"__item__"==e.cellView.cellType){i="";if(e.nodeModel.options.grid.Dispatch_To&&e.nodeModel.options.grid.Dispatch_To.length>0&&e.nodeModel.options.grid.Dispatch_From_ParentCR&&e.nodeModel.options.grid.Dispatch_From_ParentCR.length>0)i=p.CHG_GOV_DISPATCH_FROM_AND_TO;else if(e.nodeModel.options.grid.Dispatch_To&&e.nodeModel.options.grid.Dispatch_To.length>0)i=p.CHG_GOV_DISPATCH_TO;else{if(!(e.nodeModel.options.grid.Dispatch_From_ParentCR&&e.nodeModel.options.grid.Dispatch_From_ParentCR.length>0))return t.chgGridView.getCellDefaultTooltip(e);i=p.CHG_GOV_DISPATCH_FROM}return{shortHelp:i,updateModel:!1}}return t.chgGridView.getCellDefaultTooltip(e)}var i="",n=(new DOMParser).parseFromString(e.cellModel,"text/html").getElementsByTagName("a");if(n)for(let e of n)i+=e.innerHTML,i+="\n";return{shortHelp:i,updateModel:!1}}};u=UWA.merge(u,this.options);var g={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.chgGridView=new o(u),this.chgGridView.cellSelection="none",this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){I.onCustomViewsSave(e,i,t.options.custom_view_options)},this.options.treeDocument.onNodeModelUpdate((function(e){h.getGlobalVariable().total_ia_row&&t.chgGridView.updateRenderedRow(h.getGlobalVariable().total_ia_row._getRowID(),{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1})})),this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},(function(e){if("false"==h.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.chgGridView.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},(function(e){var i=t.chgGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new s(g);var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(t,e,!0).then((function(e){return e}))}};this.tileView.onContextualEvent=m;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}});this.options.contextDetails.id;r.toolbar=this.chgGridView.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",(function(){t.chgGridView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}]);var e=document.getElementById("outer-impactAnalysis-grid-div");"undefined"!=e&&null!=e&&v.unmask(e)})),t.chgGridView.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)}));var C=t.chgGridView.getTreeDocument().getXSO(),D=i.debounce((function(e){e&&e.length&&(e=e[0]);var i=t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+0}}));var o=C.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)}),5);C.onPostAdd(D),C.onPostRemove(D),t.tileView.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=I.debouncingHandler((function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid&&"ia_Total"!=i.nodeModel.options.grid.id){if(1==e.multipleHitCount){var n={};4===i.columnID?n={ia_id:i.nodeModel.options.grid.id,ia_name:i.nodeModel.options.grid.name,ia_type:i.nodeModel.options.grid.type,column_id:i.columnID}:5!==i.columnID&&6!==i.columnID||(n={ia_id:i.nodeModel.options.grid.id,cr_ids:i.nodeModel.options.grid.Dispatch_From,column_id:i.columnID}),t._modelEvents.publish({event:"IA-DataGrid-on-click",data:n,context:i.nodeModel})}if(2==e.multipleHitCount&&(i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"IA-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel})),i&&3==i.columnID){var o={};o.cellInfos=i,I.executeMaturity(o)}}}),500),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactAnalysis-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-impactAnalysis-grid-div"});var w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-impactAnalysis-grid-div"});this.toolbar.inject(w);var _=UWA.createElement("div",{class:"content-impactAnalysis-grid-div expanded-header-height"}),b=UWA.createElement("div",{class:"content-impactAnalysis-tile-div impactAnalysisTileView expanded-header-height"}),S=UWA.createElement("div",{class:"hideView",id:"impactAnalysisEmptyTileViewDiv"});UWA.createElement("div",{html:p.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(S),this.chgGridView.inject(_),this.tileView.inject(b),S.inject(b),this.chgGridViewContainer.addContent(w),this.chgGridViewContainer.addContent(_),this.chgGridViewContainer.addContent(b),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=_,this.loader=(new a).inject(this.options.target);I.registerCustomEventsOnDGV(["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"],this.chgGridView,this.options.custom_view_options)},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"cr-impact-analysis-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"cr-impact-analysis-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}});return b})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRRelatedScopeGridContextualMenu","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.relatedScopeDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),p.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").removeClassName("minified-header-height"))}));var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"cr-relatedScope-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"cr-relatedScope-DataGrid-on-reset-search",data:{query:e},context:i})}})},render:function(){try{let e=this.processColumns(),t=this,a={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return h.showRMBMenuOnGrid(e).then((function(e){return e}));t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};a=UWA.merge(a,this.options);let p={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.relatedScopeDataGridView=new n(a),this.relatedScopeDataGridView.cellSelection="none",this._modelEvents.unsubscribe({event:"cr-relatedScope-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"cr-relatedScope-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"cr-relatedScope-DataGrid-on-search"},(function(e){if("true"==C.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.relatedScopeDataGridView.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"cr-relatedScope-DataGrid-on-reset-search"},(function(e){var i=t.relatedScopeDataGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new s(p),t.relatedScopeDataGridView.getTreeDocument().getXSO().onAdd((function(e){let i;t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-related-scope-object-selection-update",data:{count:i}})})),t.relatedScopeDataGridView.getTreeDocument().getXSO().onRemove((function(e){t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-related-scope-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}));let f={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return h.showRMBMenuOnGrid(e).then((function(e){return e}))}};this.tileView.onContextualEvent=f;let v={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.relatedScopeDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(v),r.toolbar=this.relatedScopeDataGridView.setToolbar(r.writetoolbarDefinition()),this.toolbar=r.toolbar,this.relatedScopeDataGridView.addEventListener("allCellsRendered",(function(){t.relatedScopeDataGridView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])})),this.relatedScopeDataGridView.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&4==t.columnID){var i={};i.cellInfos=t,m.executeMaturity(i)}},document.getElementById("outer-relatedScope-grid-div")&&document.getElementById("outer-relatedScope-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-relatedScope-grid-div",class:"outer-relatedScope-grid-div"});let D=UWA.createElement("div",{class:"toolbar-relatedScope-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"affectedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new u({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new g({title:c.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(D),this.toolbar.inject(D);let I=UWA.createElement("div",{class:"content-relatedScope-grid-div expanded-header-height"}),w=UWA.createElement("div",{styles:{height:"100%"},class:"content-relatedScope-tile-div relatedScopeTileView expanded-header-height"}),_=UWA.createElement("div",{class:"hideView",id:"relatedScopeEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(_),this.relatedScopeDataGridView.inject(I),this.tileView.inject(w),_.inject(w),this.chgGridViewContainer.addContent(D),this.chgGridViewContainer.addContent(I),this.chgGridViewContainer.addContent(w),this.loader=(new o).inject(this.options.target)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.relatedScopeDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/Controls/Label","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","DS/Controls/ComboBox","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D){"use strict";var I=m.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),w=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=this,i=new t({id:"craffectedItems",useAsyncPreExpand:!0});return i.onPreExpand((async function(t){if(console.log(e),console.log("Into the treeDocument"),t.data.nodeModel.options.grid.scopeAnalysisId){var i=t.data.nodeModel.options.grid,n=i.id;let M=!0;var o=await r.getAffectedItemsOnExpand(i.scopeAnalysisId,M),s={};if(o.data[0]&&o.data[0].non3DSpaceNonIndexedData&&(s=o.data[0].non3DSpaceNonIndexedData,o.data[0].mapping&&o.data[0].mapping,s=s.filter((e=>e.id!=n)),o.data.splice(0,1)),o.data.length>0){var d=await l.processIRAffectedItems(o),u=d.findIndex((e=>e.id==n));d.splice(u,1);var h=await w.prototype.createTreeDocumentNodeModel(d,e.contextDetails.access);if(t.target.hasChildren())for(var m=!1,C=t.target.getChildren(),f=0;f<h.length;f++){m=!1;for(var v=0;v<C.length;v++)if(C[v].options.grid.id==h[f].options.grid.id){m=!0;break}m||t.target.addChild(h[v])}else t.target.addChild(h)}if(s&&s.length>0){var D=new Map,I=s.length;for(let e=0;e<s.length;e+=50){let i=[];i=I<50?s.slice(e,e+I):s.slice(e,e+50);var _=[],b=new Map,S=i;for(f=0;f<S.length;f++){var y=S[f];_.push(y.id),b.set(y.id,y)}var E=[];if(_.length>0){var O=l.commonPredicatedForFedSearch(),G=await l.callFederatedSearch(_,O);if(G&&G.results&&G.results.length>0)E=await l.processIRAffectedItemsFederatedSearch(G,b)}if(E.length>0){let e=await w.prototype.createTreeDocumentNodeModel(E);if(t.target.hasChildren())for(m=!1,C=t.target.getChildren(),f=0;f<e.length;f++){m=!1;for(v=0;v<C.length;v++)if(C[v].options.grid.id==e[f].options.grid.id){m=!0;break}m||t.target.addChild(e[v])}else t.target.addChild(e)}D=new Map([...D,...b]),I-=50}if(D&&D.size>0){g.publish("updateIndexingIconForHideOrShowInAffectedItem",{});var N=await p.recent();if(N&&N.results&&N.results.length>0){var A=l.filterNonIndexedDataNew(N,D);D.size!=A.length&&c.warn(a.CHG_GOV_Not_Accessable_Data);var V=[];if(A.length>0&&(V=await l.processInformationForRecentIRAffected(A)),V.length>0){let i=await w.prototype.createTreeDocumentNodeModel(V,e.contextDetails.access);if(t.target.hasChildren())for(m=!1,C=t.target.getChildren(),f=0;f<i.length;f++){m=!1;for(v=0;v<C.length;v++)if(C[v].options.grid.id==i[f].options.grid.id){m=!0;break}m||t.target.addChild(i[f])}else t.target.addChild(i)}}}}}t.target.preExpandDone()})),i.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",I)},loadAffectedItemsData:async function(e,t,i){e.prepareUpdate();var n=await this.createTreeDocumentNodeModel(t,i);if(e.addRoot(n),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&h.isMasked(e)&&h.unmask(e)}},createTreeDocumentNodeModel:async function(e,t){for(var i=[],n=0;n<e.length;n++){var o=await this.createTreeNode(e[n],t);i.push(o)}return i},createTreeNode:async function(e,t){let n=e.name+" | "+e.typeNLS;var a,s=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var r=this.getCustomTooltip(e);if(a=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,e.dispositionInformation&&e.dispositionInformation[0]&&e.dispositionInformation[0].dispostionId){var d=e.dispositionInformation[0].dispositionAccessBits[0]["Manage Approver"],c=e.dispositionInformation[0].dispositionAccessBits[0]["Manage Resolved By"];e.dispositionMaturity=e.dispositionInformation[0].dispositionCurrentStateNLS,e.dispositionName=v.dispositionNameMethod(e.dispositionInformation[0].dispostionIcon,e.dispositionInformation[0].dispositionName),e.dispositionInformation[0].approvers&&e.dispositionInformation[0].approvers.length>0?e.approvers=v.addApproversUserIconMethod(e.dispositionInformation[0].approvers):"true"===o.getGlobalVariable().isFullLicence&&"true"===d&&(e.approvers=v.addApproversDefaultMethod());let t=e.dispositionInformation[0].dispositionType;if(t&&(e.dispositionType="DOCUMENT"==t?"documentKey":"NO_FIX"==t?"notFixKey":"FIX"==t?"fixKey":"NOT_IMPACTED"==t?"notImpactedTypeKey":"noneKey"),e.dispositionRevision=e.dispositionInformation[0].dispositionRevision,e.dispositionInformation[0]&&e.dispositionInformation[0].resolvedByInformation&&e.dispositionInformation[0].resolvedByInformation[0]&&(e.dispositionInformation[0].resolvedByInformation[0].indexResolvedBy&&e.dispositionInformation[0].resolvedByInformation[0].indexResolvedBy.length>0||e.dispositionInformation[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&e.dispositionInformation[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy.length>0)){var p=e.dispositionInformation[0].resolvedByInformation[0];if(p.indexResolvedBy&&p.indexResolvedBy.length>0){let t=p.indexResolvedBy[0].resolvedByName?p.indexResolvedBy[0].resolvedByName:"",i=p.indexResolvedBy[0].resolvedByIcon?p.indexResolvedBy[0].resolvedByIcon:"";e.dispositionResolvedBy=v.resolvedByNameMethod("",t,i)}else p.non3DSpaceNonIndexedDataForResolvedBy&&p.non3DSpaceNonIndexedDataForResolvedBy.length>0&&await l.resolvedByInformationForCrossServiceAndRecents(p.non3DSpaceNonIndexedDataForResolvedBy).then((function(t){let i=t[0]&&t[0].resolvedByName?t[0].resolvedByName:"",n=t[0]&&t[0].resolvedByIcon?t[0].resolvedByIcon:"";e.dispositionResolvedBy=v.resolvedByNameMethod("",i,n),e.dispositionInformation[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy=t}))}else"true"===o.getGlobalVariable().isFullLicence&&"true"===c&&(e.dispositionResolvedBy=v.resolvedByDefaultForDispostion())}else e.dispositionName=v.defaultDispositionNameValue(t);let u=[e.icon];return!e.isAffectedUsages||"true"!=e.isAffectedUsages&&1!=e.isAffectedUsages||u.unshift("where-used"),new i({label:a,subLabel:n,description:s,grid:e,icons:u,thumbnail:e.thumbnail,customTooltip:r,children:e.affectedAsIR&&"Reported"==e.affectedAsIR?[]:null,contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:async function(e){var t=this,i=this.contextID,n=document.getElementById("outer-affectedItems-grid-div");"undefined"!=n&&null!=n&&h.mask(n),await r.addExistingInIRAffectedItems(i,e).then((async function(e){console.log("AffectedItems list: "+e);var i={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data.splice(0,1));var o=await l.processIRAffectedItems(e);if(w.prototype.addNodesInLayoutModel(t.treeDocument,o,t.contextDetails.access),"undefined"!=n&&null!=n&&h.unmask(n),t.treeDocument&&t.treeDocument.getAllDescendants().length<1){let e=D("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout");if(e.processMembersList)for(var s=0;s<e.processMembersList.length;s++)(e.processMembersList[s].Coordinator||e.isChangeCoordinatorExists)&&(e.refreshFlag=!0,g.publish("idcard-header-update-substatematurity",{}))}if(i&&i.length>0){var r=new Map,d=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=d<50?i.slice(e,e+d):i.slice(e,e+50);var u=[],m=new Map,C=n;for(s=0;s<C.length;s++){var f=C[s];u.push(f.id),m.set(f.id,f)}var v=[];if(u.length>0){var I=l.commonPredicatedForFedSearch(),_=await l.callFederatedSearch(u,I);if(_&&_.results&&_.results.length>0)v=await l.processIRAffectedItemsFederatedSearch(_,m)}w.prototype.addNodesInLayoutModel(t.treeDocument,v,t.contextDetails.access),r=new Map([...r,...m]),d-=50}if(r&&r.size>0){g.publish("updateIndexingIconForHideOrShowInAffectedItem",{});var b=await p.recent();if(b&&b.results&&b.results.length>0){var S=l.filterNonIndexedDataNew(b,r);r.size!=S.length&&c.warn(a.CHG_GOV_Not_Accessable_Data);var y=[];S.length>0&&(y=await l.processInformationForRecentIRAffected(S)),w.prototype.addNodesInLayoutModel(t.treeDocument,y,t.contextDetails.access)}}}"undefined"!=n&&null!=n&&h.unmask(n)}),(function(e){h.unmask(n)}))},addNodesInLayoutModel:async function(e,t,i){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var n=await w.prototype.createTreeDocumentNodeModel(t,i);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(n);else for(var o=n.length-1;o>=0;o--)e.addRoot(n[o],0);e.pushUpdate()},removeChildren:function(){var e=this,t=[...this.treeDocument.getSelectedNodes()];if(this.treeDocument.unselectAll(),t.length){for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,updateAction:"DISCONNECT",isAffectedUsages:t[n].options.grid.isAffectedUsages?t[n].options.grid.isAffectedUsages:"false",scopeAnalysisId:t[n].options.grid.scopeAnalysisId?t[n].options.grid.scopeAnalysisId:"false"});var s=this.contextID;r.removeIRAffectedItems(s,i).then((function([i,n]){if(null!=n)for(let e=0;e<t.length;e++){let i=!1;for(let o=0;o<n.length;o++)if(t[e].options.grid.id==n[o]){t.splice(e,1),i=!0;break}1==i&&e--}for(var s=0;s<t.length;s++)e.treeDocument.removeRoot(t[s]);if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&h.isMasked(e)&&h.unmask(e)}if(0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"}),(null==n||0==n.length)&&(c.success(a.CHG_GOV_AffectedItems_Remove),e.treeDocument.getAllDescendants().length<1)){D("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout").refreshFlag=!0,g.publish("idcard-header-update-substatematurity",{})}}),(function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&h.isMasked(e)&&h.unmask(e)}}))}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map((t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}}))},UWA.is(i,"array")&&i.forEach((function(e){var t=e.color,i=e.id;n(t,i)}))},disableColorizeView:function(){this.treeDocument.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return w})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionAffectedItemsView",["UWA/Core","UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/CollectionViewStatusBar","DS/Controls/Loader","DS/Core/PointerEvents","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionAffectedItemsUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";return t.extend({init:function(e){this._parent(e),this.options=e,this.affectedDGV=null},render:function(){if(this.options.target){let t=this,u={treeDocument:null,columns:s.getColumns(),allowUnsafeHTMLContent:!1,showModelChangesFlag:!1,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_DataGrid_PlaceHolder_Fetch_Affected,identifier:"IRDispositionAffectedItemsDGV",showContextualMenuColumnFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.getGlobalVariable().isNative?s.getNativeContextualMenu(e,t.options.proposedParam):s.getDashboardContextualMenu(e,t.options.proposedParam);e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!0})}return i},onDragStartRowHeader:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,r.readyDragContent(e,i)},onDragStartCell:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,r.readyDragContent(e,i)}};u=e.merge(u,this.options),this.affectedDGV=new i(u),this.affectedDGV.cellSelection="none",this.affectedDGV.columnDefinitionUpdated=!1,this.affectedDGV.registerReusableCellContent({id:"RevColId",buildContent:function(){return new e.Element("div",{class:"RevColId",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}})}}),this.affectedDGV.registerReusableCellContent({id:"revEmptyColId",buildContent:function(){return new e.Element("div",{styles:{"padding-left":"5px"}})}}),this.affectedDGV.columns[3].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.affectedDGV.reuseCellContent("RevColId");i.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.affectedDGV.reuseCellContent("revEmptyColId"))},this.affectedDGV.addEventListener("allCellsRendered",(function(){t.affectedDGV.buildStatusBar([{type:n.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+(null==t.affectedDGV.getTreeDocument()?0:t.affectedDGV.getTreeDocument().getAllDescendants().length)}},{type:n.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+(null==t.affectedDGV.getTreeDocument()?0:t.affectedDGV.getTreeDocument().getSelectedNodes().length)}}])})),this.affectedDGV.addEventListener(a.POINTERHIT,(function(e,t){if(1==e.multipleHitCount&&t&&3===t.columnID&&"RevColId"===e.target.className){p("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.sourceType?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,name:t.nodeModel.options.grid.name})}})),this.mainContainer=e.createElement("div",{id:"affected-main-container",styles:{width:"100%",height:"100%",display:"inline-block"}}),this.affectedDGVDiv=e.createElement("div",{id:"affected-dgv-div",styles:{}}),this.affectedDGV.inject(this.affectedDGVDiv),this.mainContainer.addContent(this.affectedDGVDiv),this.mainContainer.inject(this.options.target),this.loader=(new o).inject(this.options.target),d.unsubscribe("ECM_GOV_ProposedDGV_RemoveResolutionPopup:"+(widget?widget.id:"")),d.subscribe("ECM_GOV_ProposedDGV_RemoveResolutionPopup:"+(widget?widget.id:""),(function(e){t.removeResolutionRow(e)}))}},removeResolutionRow:function(e){var t=this;e.forEach((function(e){let i=t.affectedDGV.getTreeDocument().getRoots().find((t=>t.getAttributeValue("id")===e.id));t.affectedDGV.getTreeDocument().removeRoot(i)})),0==t.affectedDGV.getTreeDocument().getRoots().length&&t.updateDGVForEmptyView()},registerDGVTreeDocEvents:function(){var e=this;this.affectedDGV.getTreeDocument().getXSO().onAdd((function(t){e.affectedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.affectedDGV.getTreeDocument().getSelectedNodes().length}})})),this.affectedDGV.getTreeDocument().getXSO().onRemove((function(t){e.affectedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.getTreeDocument().getSelectedNodes().length}})}))},prepareUpdateView:function(){this.affectedDGV.prepareUpdateView()},pushUpdateView:function(){this.affectedDGV.pushUpdateView()},setTreeDocument:function(e){this.affectedDGV.treeDocument=e,this.registerDGVTreeDocEvents()},updateDGVForEmptyView:function(){this.affectedDGV.placeholder=c.CHG_GOV_DataGrid_PlaceHolder_No_Resolution},updateDGVForNonEmptyView:function(){this.affectedDGV.placeholder=c.CHG_GOV_DataGrid_PlaceHolder_Fetch_Resolution},updateDGVForIndexInfoView:function(){this.indexInfoDiv.show()}})})),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("COissueEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("COissueEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueView","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/issue/ChgIssueDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";let D={createIssueView:function(t,o,a){var s=this;t.setStyles({position:"relative"}),D.contextType=o.type;let r={};this.chgCRImpactBasisView="",r=UWA.merge(r,o),r.target=t,r.columns=i.getColumns(),this.ChgIssueDataGridModel=new n(r.id),r.modelEvents="InvestigationRequest"==r.type?a:r.modelEvents,this.modelEvents=r.modelEvents?r.modelEvents:a,s.treeDocument=r.treeDocument=s.ChgIssueDataGridModel.createTreeDocument(),s.ChgIssueTreeModel=r.treeDocument,u.makeDroppable(r.target,s.dropHandler),s.ChgIssueDataGridModel.registerCustomFilter(),s.chgIssueView=new e(r),C.showLoader(r.target,s.chgIssueView.loader),this.subscribeToModelEvents(r.treeDocument),c.getIssue(o).then((function(e){console.log("ImpactAnalysis list: "+e);var t=p.processedChangeRequestIssueList(e,o.id);s.chgIssueDataGridModel=new n(o.id);var i=e.data;C.fetchMaturityStateCSS(i),s.chgIssueDataGridModel.loadIssueData(r.treeDocument,t);var a=p.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(a),"true"!=l.getGlobalVariable().slidePanelTagger&&"InvestigationRequest"!=o.type||require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(s.ChgIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:s.ChgIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,s.ChgIssueTreeModel)})),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),D.changeView(),s.chgIssueView.loadCustomColumns(),C.hideLoader(r.target,s.chgIssueView.loader)}),(function(e){return C.hideLoader(r.target,s.chgIssueView.loader),Promise.reject(e)}))},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);D.ChgIssueDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType?e[i].objectType:"",updateAction:"CONNECT",serviceId:e[i].serviceId?e[i].serviceId:"3DSpace"});D.ChgIssueDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()})),m.unsubscribe(`Issue:${widget.id}`),m.subscribe(`Issue:${widget.id}`,(function(e){if("true"!=l.getGlobalVariable().slidePanelTagger&&"InvestigationRequest"!=i.contextType||require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgIssueTreeModel)})),i.chgIssueView.options.contextDetails)if(Object.keys(i.chgIssueView.options.treeDocument.getXSO()._items).length>0){let e=i.chgIssueView.options.treeDocument.getXSO()._items;for(let t in e)i.chgIssueView.onSelectionChange(i.chgIssueView._modelEvents,e[t],e[t].options.grid.id,e[t].options.grid.type,!0)}else i.chgIssueView.onSelectionChange(i.chgIssueView._modelEvents,i.chgIssueView.options.treeDocument._getTrueRoot(),i.chgIssueView.id,i.chgIssueView.options.contextDetails.isKindOfType,!1)})),m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,(function(t){D.ChgIssueDataGridModel.filterView(t,e)})),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){D.ChgIssueDataGridModel.enableColorizeView(t,e)})),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){D.ChgIssueDataGridModel.disableColorizeView(t,e)})),m.unsubscribe("ir-issue-object-selection-update"),m.subscribe("ir-issue-object-selection-update",(function(e){D.handleObjectSelectionUpdate(e)})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-issue-object-selection-update")]||this.modelEvents.subscribe({event:"co-issue-object-selection-update"},(function(e){D.handleObjectSelectionUpdate(e)}))},addExistingHandler:function(){let e=v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var t={};"ChangeRequest"===D.contextType?t.commandInfo={type:"Change Request",facet:"Issue",action:"CR>Issue>Add Issue"}:"ChangeOrder"===D.contextType?t.commandInfo={type:"Change Order",facet:"Issue",action:"CO>Issue>Add Issue"}:"ChangeAction"===D.contextType?t.commandInfo={type:"Change Action",facet:"Issue",action:"CA>Issue>Add Issue"}:"InvestigationRequest"===D.contextType&&(t.commandInfo={type:"Investigation Request",facet:"Issue",action:"IR>Issue>Add Issue"}),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});let i=D.ChgIssueDataGridModel.treeDocument.getAllDescendants(),n={condition:"addExistingIssue",extendedQuery:D.createExcludeListForSearch(i)};if(l.getGlobalVariable().isNative){let e="CHG_Add_Existing_Issue";JSON.stringify(n);h.DispatchEventToWin(e,"")}else if(l.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();var a="../common/emxFullSearch.jsp?field=TYPES=Issue&txtExcludeOIDs="+i.map((e=>e.options.grid.id)).toString()+"&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e;showChooser(a,850,630);var s=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,D.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",s)}else console.log("inside EVENT")};window.addEventListener("storage",s)}else{const e=r.activateSearch("","Issue");r.search(o.CHG_GOV_Issue,"Issue",D.OnSearchComplete,"Issue",e,void 0,void 0,n)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){if(l.getGlobalVariable().isNative){for(var i=e.split(","),n=[],o=0;o<i.length;o++)n.push({id:i[o]});n.length&&(t.hideEmptyView(),D.ChgIssueDataGridModel.addExistingChildren(n))}else{let i=[];for(o=0;o<e.length;o++)i.push({id:e[o][0]});i.length&&(t.hideEmptyView(),D.ChgIssueDataGridModel.addExistingChildren(i))}},removeHandler:function(){let e=v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var i={};"ChangeRequest"===D.contextType?i.commandInfo={type:"Change Request",facet:"Issue",action:"CR>Issue>Remove"}:"ChangeOrder"===D.contextType?i.commandInfo={type:"Change Order",facet:"Issue",action:"CO>Issue>Remove"}:"ChangeAction"===D.contextType?i.commandInfo={type:"Change Action",facet:"Issue",action:"CA>Issue>Remove"}:"InvestigationRequest"===D.contextType&&(i.commandInfo={type:"Investigation Request",facet:"Issue",action:"IR>Issue>Remove"}),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});const n=D.treeDocument.getSelectedNodes();if(n.length>0){let e=[];for(var s=0;s<n.length;s++)e.push({id:n[s].options.grid.id});D.ChgIssueDataGridModel.removeExistingChildren(e).then((function(e){0==D.treeDocument.getAllDescendants().length&&t.showEmptyView()}),(function(e){}))}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){0===e.count?D.chgIssueView.toolbar.updateNodeModel("remove",{visibleFlag:!1}):D.chgIssueView.toolbar.updateNodeModel("remove",{visibleFlag:!0})},globalSubscribeForChgIssueDataGridLayout:function(){s.addObserver("ChgIssueDataGridLayout","Lifecycle.Modification",D.handleForMaturityUpdate),s.addObserver("ChgIssueDataGridLayout","CO-Properties-Update",D.handlePropertiesUpdateForChgIssue)},handleForMaturityUpdate:function(e){if(e){let t=D.treeDocument.getSelectedNodes();C.getHandleForMaturityUpdate(JSON.parse(e),t)}},handlePropertiesUpdateForChgIssue:function(e){var t=D.ChgIssueTreeModel;t&&f.handlePropertiesOnUpdate(t,e)}};return D.globalSubscribeForChgIssueDataGridLayout(),D})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCModel",["UWA/Core","UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgErrors","DS/TreeModel/BaseFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u=c.inherit({publishedProperties:{},isDataFiltered:function(e){var t;if(t=e.options.grid,this.filterModel&&this.filterModel.allowedIDs){var i=this.filterModel.allowedIDs;return!(t.where_details&&t.where_details.id&&i.includes(t.where_details.id))&&(!(t.ref_details&&t.ref_details.id&&i.includes(t.ref_details.id))&&!(t.after_details&&t.after_details.id&&i.includes(t.after_details.id)))}return!1},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return t.extend({init:function(e){e||(e={}),this._parent(e),this.options=e,this.treeDocument=null},resetModel:function(){this.treeDocument.empty()},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},setFilterModel:function(){this.treeDocument.setFilterModel(this.getFilterModel())},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",u)},createTreeDocument:function(){this.treeDocument=new i({id:"ChgCAFlowdownRCTreeDoc",useAsyncPreExpand:!0}),this.treeDocument.onNodeModelUpdate((function(t){var i=t.data.nodeModel;if(i&&(t.data.attributes.reasonForChange||""==t.data.attributes.reasonForChange)){if(!e.is(i.options.grid.activity_id))return d.error(p.CHG_GOV_PUT_REALIZED_DESC_DISABLED),void(i.options.grid.reasonForChange="");o.publish("ECM_GOV_RealizedDGV_DESC_MODIFIED:"+(widget?widget.id:""),{activity_id:i.options.grid.activity_id,activity_description:t.data.attributes.reasonForChange})}}))},emptyTreeDocument:function(){this.treeDocument.empty()},updateTreeDocument:function(e){this.treeDocument.prepareUpdate();for(var t=0;t<e.length;t++){let i=this.createTreeNode(e[t]);this.treeDocument.addRoot(i)}this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},createTreeNode:function(e){var t=this,i=t.getRealizedTreeNode(e);return e.activities.forEach((e=>{let n=t.getRealizedTreeNode(e);i.addChild(n)})),i},getRealizedTreeNode:function(t){t.change=this.getChangeDescription(t),t.change_details=this.getChangeDetails(t);var i=this.createCustomNameField(t);return t.chgObjName=i,e.is(t.activity_id)&&""!=t.activity_id?e.is(t.flowdown_status)&&""!=t.flowdown_status||(t.flowdown_status=p.CHG_GOV_AnalysisPending):t.flowdown_status="",t.selected_proposed_items=t.selected_proposed_items,t.selected_proposed=this.getSelectedProposed(t),t.selected_resolution_items=t.selected_resolution_items,t.selected_resolution=this.getSelectedResolution(t),new n({label:t.title,subLabel:t.type+" | "+t.revision+" | "+t.name,grid:t,icons:[t.icon,t.configured_icon],thumbnail:t.thumbnail,useAsyncPreExpand:!0})},createCustomNameField:function(t){var i=new e.Element("div",{class:"wux-tweakers-string"}),n=e.createElement("span",{html:t.name});return n.style.setProperty("text-overflow","ellipsis"),n.inject(i),"TRUE"==t.isUpstreamUpdated&&i.addContent({tag:"span",class:"wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-attention wux-ui-3ds wux-ui-3ds-lg",title:p.CHG_GOV_Flowdown_Async_Warning,styles:{"font-size":"1.2em",color:"#e87b00"}}),i.outerHTML},getSelectedProposed:function(t){var i="";if(t.activity_id&&""!=t.activity_id&&t.selected_proposed_items&&t.selected_proposed_items.length>0){let a=e.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});if(1==t.selected_proposed_items.length){var n=[{tag:"img",src:t.selected_proposed_items[0].icon,styles:{"padding-left":"5px"}},{tag:"span",text:t.selected_proposed_items[0].title,styles:{"padding-left":"5px"}},{tag:"span",text:t.selected_proposed_items[0].revision,class:"selected_proposed_revision",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}}];n.push({tag:"span",class:"selected_proposed_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}),a.setContent(n)}else{var o=e.createElement("a",{class:"selected_proposed_multiple",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}});o.innerText=t.selected_proposed_items.length,o.inject(a)}i=a.outerHTML}return i},getSelectedResolution:function(t){var i="";if(t.activity_id&&""!=t.activity_id&&t.selected_resolution_items&&t.selected_resolution_items.length>0){let a=e.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});if(1==t.selected_resolution_items.length){var n=[{tag:"img",src:t.selected_resolution_items[0].icon,styles:{"padding-left":"5px"}},{tag:"span",text:t.selected_resolution_items[0].title,styles:{"padding-left":"5px"}},{tag:"span",text:t.selected_resolution_items[0].refId&&""!=t.selected_resolution_items[0].refId?"":t.selected_resolution_items[0].revision,class:"selected_resolution_revision",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}}];n.push({tag:"span",class:"selected_resolution_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}),a.setContent(n)}else{var o=e.createElement("a",{class:"selected_resolution_multiple",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}});o.innerText=t.selected_resolution_items.length,o.inject(a)}i=a.outerHTML}return i},getChangeDescription:function(e){let t=e.operation;return t.startsWith("ChangeStatus#")&&(t=t.split("#")[0]),"TRUE"===e.isInstanceOperation?p["CHG_GOV_Realized_Activity_"+t+"_Usage"]:p["CHG_GOV_Realized_Activity_"+t]},getChangeDetails:function(t){var i=this,n="";if(0===t.sub_operations.length&&"NonPrimeRoot"===t.operation)n=p.CHG_GOV_Realized_Activity_NonPrimeRoot;else{let o=e.createElement("div",{class:"realized_op_main_div",styles:{display:"flex","align-items":"center","justify-content":"flex-start",overflow:"hidden","text-overflow":"ellipsis"}});for(let e=0;e<t.sub_operations.length;e++){let n=t.sub_operations[e],a=null;if(n.startsWith("ChangeStatus#"))a=i.getChangeStatusHTMLObject(n,t);else switch(n){case"Create":case"Modify":case"Add":case"EditVariant":case"Cut":case"ConfiguredDelete":case"ConfiguredMove":case"Extend":case"Move":case"TransferOwnership":case"ChangeResponsible":case"AddAlternate":case"AltSubFor":case"AddSubstitute":case"SubstitutionContextAdded":case"SubtitutionContextRemoved":case"AltQualified":case"AltObsolete":a=i.getOperationDescHTMLObject(n,t);break;case"AddInFamily":a=t.before_details?i.getPreviousGrammarHTMLObject(n,t):i.getOperationDescHTMLObject(n,t);break;case"NewEvolution":case"Clone":case"NewMinorVersion":case"NewVersion":case"Replace":case"ConfiguredReplace":case"ConfiguredEditVariant":case"EvolveInstance":a=i.getPreviousGrammarHTMLObject(n,t)}a&&e<t.sub_operations.length-1&&a.addContent([{tag:"span",text:", "}]),a&&a.inject(o)}n=o.outerHTML}return n},getOperationDescHTMLObject:function(t,i){let n=e.createElement("div",{class:"realized_op_desc",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return n.setContent([{tag:"span",text:"TRUE"===i.isInstanceOperation?p["CHG_GOV_Realized_Activity_"+t+"_Usage"]:p["CHG_GOV_Realized_Activity_"+t]}]),n},getPreviousGrammarHTMLObject:function(t,i){let n=e.createElement("div",{class:"realized_op_prefix",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return n.setContent([{tag:"span",text:p["CHG_GOV_Realized_Activity_"+t+"_Prefix"]+" :"},{tag:"img",src:i.before_ref_details?i.before_ref_details.dataelements.icon:i.before_details.dataelements.icon,styles:{"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_label",text:i.before_ref_details?i.before_ref_details.dataelements["ds6w:label"]:i.before_details.dataelements["ds6w:label"],styles:{"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_revision",text:i.before_ref_details?i.before_ref_details.dataelements["ds6wg:revision"]:i.before_details.dataelements["ds6wg:revision"],styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer",width:20,height:20,"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}]),i.before_ref_details?(n.addContent([{tag:"span",text:"( "+i.before_details.dataelements["ds6w:label"]+" )",styles:{"padding-left":"5px"}}]),n.setAttributes({id:i.before_ref_details.id,type:i.before_ref_details.dataelements["ds6w:type"],name:i.before_ref_details.dataelements["ds6w:identifier"]})):n.setAttributes({id:i.before_details.id,type:i.before_details.dataelements["ds6w:type"],name:i.before_details.dataelements["ds6w:identifier"]}),n},getChangeStatusHTMLObject:function(t,i){let n=t.split("#"),o=e.createElement("div",{class:"realized_op_suffix",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return o.setContent([{tag:"span",text:p["CHG_GOV_Realized_Activity_"+n[0]+"_Suffix"]+" : "+n[1].replace("_"," ")}]),o},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},getFilterModel:function(){return{tree:{filterId:"stringRegexp",filterModel:""},title_instance:{filterId:"stringRegexp",filterModel:""},typeNLS:{filterId:"set",filterModel:[]},name:{filterId:"stringRegexp",filterModel:""},revision:{filterId:"set",filterModel:[]},maturityWithBadge:{filterId:"set",filterModel:[]},change:{filterId:"set",filterModel:[]},change_details:{filterId:"stringRegexp",filterModel:""},selected_proposed:{filterId:"stringRegexp",filterModel:""},flowdown_status:{filterId:"set",filterModel:[]}}}})})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgDataService"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h){"use strict";var m={showRMBMenuOnGrid:async function(e,t){return new Promise((function(i,a){const c=[];let p=!1,u=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),g=[],h=[],C=[];u.forEach((e=>{g.push(e.options.grid.id),h.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&C.push(e.options.grid.serviceBasedObjId)})),u.length>1&&(p=!0);const f=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),v=e.cellInfos.nodeModel.options.grid.id,D=e.cellInfos.nodeModel.options.grid.type,I=e.cellInfos.nodeModel.options.grid.name,w=e.cellInfos.nodeModel.options.grid.displayType,_=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,b=e.cellInfos.nodeModel.options.grid.revision,S=[];S.push(D),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&S.concat(e.cellInfos.nodeModel.options.grid.kind);const y={objectId:null!=_?_:v,objectType:D,objectTaxonomies:S,displayName:I,displayType:w,facetName:"dependency"};let E={};E.objectID=v,E.objectTitle=I,E.objectType=D,E.serviceId="3DSpace",E.label=e.cellInfos.nodeModel.options.grid.title,E.changeType="Investigation Request",E.facet="Affected Items",E.action="IR>Change Impacts",E.objectRevision=b;const O=f.openWith(y);let G={};G.objectID=v,G.objectTitle=I;o.getGlobalVariable().ECM_EnableChangeImpactsEnforcementForCR,p?(C.length>0&&c.push(n.createPropertyPushItem(C)),c.push(m.getRelationalExplorerMenu(h)),C.length>0&&(c.push(r.getDownloadMenu(C)),!C.length>1&&c.push(r.getPreviewMenu(C))),i(c)):(C.length>0&&c.push(n.createPropertyPushItem(C)),c.push(m.getRelationalExplorerMenu(h)),O.then((e=>{e&&c.push(e),C.length,c.push(d.getChangeImpacts(E,t)),s.getDocuments(C).then((function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(c.push(r.getDownloadMenu(C)),c.push(r.getPreviewMenu(C))),i(c)})).catch((e=>{console.log(e),i(c)}))})))}))},showRMBMenuOnGridForDispositionCell:async function(e,t,i){let a=[],s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();try{e.cellInfos.nodeModel.options.grid.dispositionInformation[0];e.cellInfos.nodeModel.options.grid.approvalStatusModel&&await g.getColumnApprovalStatusMenu(e.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){a.push(e)}))}catch(e){console.error(e)}let r={model:e.cellInfos.nodeModel.getTreeDocument(),dispositionID:s[0]._options.grid.dispositionInformation?s[0]._options.grid.dispositionInformation[0].dispostionId:void 0,approversList:s[0]._options.grid.dispositionInformation?s[0]._options.grid.dispositionInformation[0].approvers:""};var l=new Promise((function(s,l){const d=[];let c,p=e.cellInfos.nodeModel.options.grid.dispositionInformation;if(p&&p[0]&&p[0].dispostionId){let l=e.cellInfos.nodeModel.options.grid.id,g=[];g.push(l),c=p[0].dispostionId;let h=[];h.push(c),d.push(n.createPropertyPushItem(h)),d.push(m.getRelationalExplorerMenu(h));let C={node:e.cellInfos.nodeModel,selectedNodeIds:h[0],arrayOFaffectedItems:g,funcationality:"reviseDisposition"};if("true"===o.getGlobalVariable().isFullLicence&&("true"===p[0].dispositionAccessBits[0].Refine&&d.push(u.reviseDisposition(C)),"true"===p[0].dispositionAccessBits[0].Replace&&(d.push(u.replaceDisposition(t,h[0],g,e)),d.push(u.replaceByExistingDisposition(t,e))),"true"===p[0].dispositionAccessBits[0].Remove&&d.push(u.removeDisposition(h[0],g,e,i))),"true"===p[0].dispositionAccessBits[0]["Transfer Ownership"]&&"true"===p[0].dispositionAccessBits[0].Move&&d.push(u.getDispositionTransferMenu(e)),"true"===o.getGlobalVariable().isFullLicence&&"true"===p[0].dispositionAccessBits[0]["Manage Approver"]&&d.push(m.getManageApprovers(r)),a.length>0)for(let e=0;e<a[0].length;e++)d.push(a[0][e]);s(d)}else s(d)}));return l},showRMBMenuOnGridForResolvedByCell:function(e){return new Promise((function(t,i){const a=[];let s=e.cellInfos.nodeModel.options.grid.dispositionInformation;if(s&&s[0]&&s[0].resolvedByInformation&&s[0].resolvedByInformation[0]){let i;if(s[0].resolvedByInformation[0].indexResolvedBy&&s[0].resolvedByInformation[0].indexResolvedBy[0]?i=s[0].resolvedByInformation[0].indexResolvedBy[0]:s[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&s[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]&&(i=s[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]),null!=i){let r=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),d=(s[0].dispostionId,i.resolvedById),c=i.resolvedByName,p=i.resolvedByType,g=[];g.push(d),a.push(n.createPropertyPushItem(g)),a.push(m.getRelationalExplorerMenu(g));let h={node:e.cellInfos.nodeModel,resolvedByIds:g,funcationality:"removeResolvedBy"};"true"==o.getGlobalVariable().isFullLicence&&s&&"true"===s[0].dispositionAccessBits[0]["Manage Resolved By"]&&a.push(u.removeResolvedBy(h));let C={objectId:d,objectType:p,displayName:c,displayType:p},f=[],v=r.openWith(C);f.push(v),Promise.all(f).then((function(e){console.log(e),e[0]&&a.push(e[0]),t(a)}))}else t(a)}else t(a)}))},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Relations"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){t.openRelationalExplorer(e)}))}}}},getManageApprovers:function(e){return{id:"ManageApprovers",type:"PushItem",title:t.CHG_GOV_Disposition_ManageApprovers,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-user-pencil"},action:{callback:function(t){var i={commandInfo:{type:"Investigation Request",facet:"DispositionCellRMB",action:"IR>DispositionCellRMB>Manage Approvers"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),l("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout").addApproverHandler(e)}}}}};return m})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil"],(function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout"],(function(e){e.caGridView.caDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout((function(){t.changeView("TileView")}),100)}))},showEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDataGridView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","require","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabContextualMenu","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbar","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/Controls/Loader","DS/UIKIT/Input/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataProcess"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O,G,N,A,V,M,T,R,U){"use strict";return e.extend({init:function(e){this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:u.getGlobalVariable().get3DSpaceURL(),securityContext:u.getGlobalVariable().getSecurityContext(),isNative:u.getGlobalVariable().isNative},dataForAnalysis:null};this._modelEvents=null,this._toolbar=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o,this.dgView=void 0},loadCustomColumns:function(e){let t=w.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(t){let e=JSON.parse(t);e&&_.restoreCustomViews(e,this.options.custom_view_options)}},render:function(){var e=this;let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");var o=this.processColumns();if(this.options.treeDocument&&this.options.target){var l={treeDocument:this.options.treeDocument,columns:o,cellSelection:"none",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:m.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"ChangeImpactsIRDGV",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!0,useWidgetPreferencesFlag:!0,onContextualEvent:function(t){var i=[];if(t.context="ItemView",t&&t.collectionView&&t.cellInfos){if(t.cellInfos.rowID>=0&&8==t.cellInfos.columnID){let i=t.cellInfos.nodeModel._options.grid.changeId?t.cellInfos.nodeModel._options.grid.changeId:e.id;return f.showRMBMenuOnGridForDispositionCell(t,i,e.options.contextAccess).then((function(e){return e}))}if(t.cellInfos.rowID>=0&&15==t.cellInfos.columnID)return f.showRMBMenuOnGridForResolvedByCell(t).then((function(e){return e}));if(t.cellInfos.rowID>=0)return f.showRMBMenuOnGrid(t,e.options.contextAccesss).then((function(e){return e}));i=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},onDragStartRowHeader:function(e,t){g.readyDragContent(e,t)},onDragStartCell:function(e,t){t.draggedNodes&&1==t.draggedNodes.length&&15==t.columnID&&i.readyDragContentForResolvedBy(e,t),t.draggedNodes&&1==t.draggedNodes.length&&8==t.columnID?i.readyDragContentForDisposition(e,t):g.readyDragContent(e,t)}};l=UWA.merge(l,this.options),this.dgView=new t(l),this.dgView.getCustomViewsManager().onCustomViewsSave=function(t,n){i.onCustomViewsSave(t,n,e.options.custom_view_options)},this.dgView.registerReusableCellContent({id:"RevColId",buildContent:function(){return new UWA.Element("div",{class:"RevColId",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}})}}),this.dgView.registerReusableCellContent({id:"revEmptyColId",buildContent:function(){return new UWA.Element("div",{styles:{"padding-left":"5px"}})}}),this.options.columns[8].children[1].onCellRequest=function(t){if(t.nodeModel.getAttributeValue("dispositionRevision")&&""!==t.nodeModel.getAttributeValue("dispositionRevision")){var i=e.dgView.reuseCellContent("RevColId");i.setContent(t.nodeModel.getAttributeValue("dispositionRevision")),t.cellView.setReusableContent(i)}else t.cellView.setReusableContent(e.dgView.reuseCellContent("revEmptyColId"))},this.subscribeToModelEvents(this.options.treeDocument),s.unsubscribe("updateRouteContent-"+widget.id),s.subscribe("updateRouteContent-"+widget.id,(async function(t){e.dgView.prepareUpdateView(),e.dgView.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0),t="string"==typeof t?JSON.parse(t):t,t=G.getApprovalStatusValue(t);var i=e.dgView.treeDocument.getSelectedNodes()[0];let n=i.options.grid.dispositionInformation[0].dispostionId,o=await M.getDispositionInfo(i.options.grid.id,[{dispositionIds:[n]}]),a=await T.enrichDispositionInfo(o.data[0].doTargetDisposition),r="update";s.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:a,action:r}),s.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:a,action:r}),s.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:a,action:r}),s.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:a,action:r})}));let c={expandInput:{stdTemplate:"expandInputtemplate"}},p={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}},u={typeForDisposition:{stdTemplate:"enumCombo",semantics:{possibleValues:{documentKey:m.CHG_GOV_Investigation_Request_Disposition_Type_Documentation,fixKey:m.CHG_GOV_Investigation_Request_Disposition_Type_Fix,notFixKey:m.CHG_GOV_Investigation_Request_Disposition_Type_No_Fix,notImpactedTypeKey:m.CHG_GOV_Investigation_Request_Disposition_Type_Not_Impacted,noneKey:m.CHG_GOV_Investigation_Request_Disposition_Type_None},valueType:"enumValueToProperty"}}},h={dispositionResolvedBy:{semantics:{possibleValues:i.resolvedByDefaultForDispostion()}}},C={async fetchApproversList(e,t){let n=new E;try{return await i.getApproversSuggestions(e,["person","routetemplate"],void 0,n,t)}catch(e){return console.error("Error fetching approvers:",e),[]}}},v={approvers:{stdTemplate:"enumCombo",semantics:{possibleValues:async function(e){let t=cellInfos.nodeModel._options.grid.approvers;return await C.fetchApproversList(e,t)}}}};this.dgView.getTypeRepresentationFactory().registerTypeTemplates(p),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(c),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(u),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(h),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(v),I.toolbar=this.dgView.setToolbar(I.writetoolbarDefinition(this.options)),this.toolbar=I.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(p),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(c),this.dgView.buildStatusBar([{type:n.STATUS.NB_ITEMS},{type:n.STATUS.NB_SELECTED_ROWS}]),this.dgView.addEventListener(a.POINTERHIT,(function(t,i){e.onItemClick(t,i)})),this.dgView.addEventListener("postEdit",(function(e,t){require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){e.changeDispositionType(t)}))})),this.dgView.addEventListener("postEdit",(function(e,t){if(14==t.columnID){r("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler").updateApproversCellForDisposition(t)}})),R.makeDroppable(this.options.target,e.dropHandler),this.dgView.onDropCell=async function(e,t){if(8==t.columnID||15==t.columnID)if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.dataTransfer&&e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="copy"),8==t.columnID)if(t.cellModel.contains("chgIRAffectedDragAndDropDisposition")){var i=e.dataTransfer.getData("text");if(t.nodeModel.options&&t.nodeModel.options.grid){let e=t.nodeModel.options.grid.changeId,n={node:t.nodeModel,data:i,investigationRequestId:e,functionality:"dragAndDropDisposition"};T.dragAndDropDisposition(n)}else N.warn(m.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else N.warn(m.CHG_GOV_Investigation_Request_Disposition_Already_There);else if(t.cellModel.contains("chgIRAffectedAddExistingCADragAndDropResolvedby")){i=e.dataTransfer.getData("text"),JSON.parse(i);if(t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0]&&t.nodeModel.options.grid.dispositionInformation[0].dispostionId){let e={node:t.nodeModel,data:i,functionality:"dragAndDropResolvedBy"};T.dragAndDropResolvedBy(e)}else N.warn(m.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else N.warn(m.CHG_GOV_Investigation_Request_Disposition_ResolvedBy_Already_There);return!0},document.getElementById("outer-changeImpactsIRTab-grid-div")&&document.getElementById("outer-changeImpactsIRTab-grid-div").destroy(),this.changeImpactsIRTabDgViewContainer=UWA.createElement("div",{id:"outer-changeImpactsIRTab-grid-div",class:"outer-changeImpactsIRTab-grid-div"});var d=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-changeImpactsIRTab-grid-div"});this.toolbar.inject(d);let D=UWA.createElement("div",{class:"content-changeImpactsIRTab-grid-div"}),w=UWA.createElement("div",{class:"footer-changeImpactsIRTab-grid-div"}),_=UWA.createElement("div",{class:"buttons-changeImpactsIRTab-grid-div"});new S({value:m.CHG_GOV_Button_Close}).inject(_).addEvent("onClick",(function(){e.closeButtonHandler(e.options.immersiveFrame)})),_.inject(w),this.dgView.inject(D),this.changeImpactsIRTabDgViewContainer.addContent(d),this.changeImpactsIRTabDgViewContainer.addContent(D),this.changeImpactsIRTabDgViewContainer.addContent(w),this.changeImpactsIRTabDgViewContainer.inject(this.options.target),this.changeImpactsIRTabDgViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.dgView,this.options.custom_view_options.ootb_columns=[...o],this.options.custom_view_options.dgvDiv=D,this.options.custom_view_options.dataForAnalysis=this.options.option,this.loader=(new b).inject(this.options.target);let y=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];i.registerCustomEventsOnDGV(y,this.dgView,this.options.custom_view_options)}},dropHandler(e){},subscribeToModelEvents:function(e){var t=this;s.unsubscribe("updateChangeImpactsGrid"+(widget?widget.id:"")),s.subscribe("updateChangeImpactsGrid"+(widget?widget.id:""),(async function(e){if("update"==e.action&&e.dispositionId){if(e.dispInfo&&e.dispInfo[0].ApprovalStatus&&null!=e.dispInfo[0].ApprovalStatus.icon){var i={data:e.dispInfo},n=await G.getColumnApprovalStatusValue(U.createPayloadApprovalStatusValue(i));n&&n[e.dispInfo[0].dispostionId]&&(e.dispInfo[0].ApprovalStatus=n[e.dispInfo[0].dispostionId].approvalStatus,e.dispInfo[0].approvalStatusModel=n[e.dispInfo[0].dispostionId].approvalStatusModel)}if(e.dispInfo[0].resolvedByInformation&&e.dispInfo[0].resolvedByInformation[0]&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById){let t=e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById;var o=(await g.recent()).results,a=[],s={resolvedById:t};for(let e=0;e<o.length;e++){let i=o[e].attributes.filter((e=>"resourceid"==e.name)).map((e=>e.value));if(i&&1==i.length&&t===i[0]){var l={};l.nonIndexedData=o[e].attributes,l.nonIndexedModelerData=s,a.push(l)}}var d=await U.processInformationForRecentResolvedByDisposition(a);e.dispInfo[0].resolvedByInformation=[],e.dispInfo[0].resolvedByInformation.push({non3DSpaceNonIndexedDataForResolvedBy:d})}t.options.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid.dispositionInformation&&t.options.grid.dispositionInformation[0]&&t.options.grid.dispositionInformation[0].dispostionId==e.dispositionId&&T.updateDispositionInfo(t,e.dispInfo)}))}else if("update"==e.action&&e.investigationRequestId){t.options.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid&&t.options.grid.id==e.investigationRequestId&&T.updateDispositionInfo(t,e.dispInfo)}))}else if("createDisposition"==e.action){t.options.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid&&t.options.grid.id==e.investigationRequestId&&T.updateDispositionInfo(t,e.dispInfo)}))}else if("removeDisposition"==e.action){let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");t.options.treeDocument.getAllDescendants().forEach((async n=>{if(n.options.grid&&n.options.grid.id==e.investigationRequestId){let e={};e.accessBits=n.options.grid.accessBits?n.options.grid.accessBits[0]:t.options.contextAccess,n.updateOptions({grid:{dispositionName:i.defaultDispositionNameValue(e),dispositionResolvedBy:void 0,dispositionType:void 0,dispositionMaturity:void 0,ApprovalStatus:void 0,approvalStatusModel:void 0,approvers:void 0,dispositionInformation:void 0,dispositionRevision:void 0}})}}))}})),s.unsubscribe("change-impacts-object-selection-update"+(widget?widget.id:"")),s.subscribe("change-impacts-object-selection-update"+(widget?widget.id:""),(function(e){r("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler").handleObjectSelectionUpdate(e)}))},closeButtonHandler:function(e){e.remove()},processColumns:function(){return this.options.columns},onItemClick:function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount)console.log("AffectedItem_OnItemClcik"),t.nodeModel.select(!0),that._modelEvents.publish({event:"update-property-panel-data",data:{context:t.nodeModel}}),that._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel});else if(1==e.multipleHitCount)if(t&&8==t.columnID){if(e.target.className.contains("chgIRAffectedCreateNewDisposition")){var i={commandInfo:{type:"Investigation Request",facet:"Change Impacts",action:"IR>Change Impacts>Direct>Create Disposition"}};A.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),console.log("New disposition called");var n={model:t.nodeModel.options.grid,InvestigationRequestId:t.nodeModel.options.grid.changeId,context:t.nodeModel,productID:t.nodeModel.options.productID};require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){e.createDisposition(n,t.nodeModel.getTreeDocument())}))}else if(e.target.className.contains("chgIRAffectedAddExistingDisposition")){console.log("Add existing called");i={commandInfo:{type:"Investigation Request",facet:"Change Impacts",action:"IR>Change Impacts>Direct>Add Existing Disposition"}};A.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});n={grid:t.nodeModel.options.grid,investigationRequestId:t.nodeModel.options.grid.changeId,affectedItemId:t.nodeModel.options.productID,functionality:"AddExistingDisposition"};T.addExistingDispositionHandler(n)}else if(e.target.className.contains("disposition_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};v.buildAndDisplayContextualMenu(e.target,t)}}else if(t&&12==t.columnID){var o={};o.cellInfos=t;let e=o.cellInfos.nodeModel.options.grid.dispositionInformation,i=o.cellInfos.nodeModel.options.grid.id;if(e&&e[0]&&e[0].dispostionId&&e[0].dispositionAccessBits&&("true"==e[0].dispositionAccessBits[0].Promote||"true"==e[0].dispositionAccessBits[0].Demote)){r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").executeMaturityForDisposition(o,i,T.getHandleForDispostionMaturity)}}else if(t&&15==t.columnID){if(console.log("Create Change Action Called"),null==t.nodeModel.options.grid.dispositionInformation||""==t.nodeModel.options.grid.dispositionInformation)N.warn(m.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else if(e.target.className.contains("chgIRAffectedCreateNewCAResolvedby"))if(console.log("New CA resolved by create called"),null==t.nodeModel.options.grid.dispositionInformation||""==t.nodeModel.options.grid.dispositionInformation)N.warn(m.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else{i={commandInfo:{type:"Investigation Request",facet:"Change Impacts",action:"IR>Change Impacts>Direct>ResolvedBy>Create Change Action"}};A.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){t.nodeModel.options.grid.dispositionInformation[0].dispositionId;let i={node:t.nodeModel.getTreeDocument().getSelectedNodes()[0],invstigationRequestId:t.nodeModel.options.grid.id,funcationality:"addResolvedBy"};e.createResolvedByInDispositionIR(i)}))}else if(e.target.className.contains("chgIRAffectedCreateAddExistingCAResolvedby")){console.log("Add existing called ResolvedBy ");i={commandInfo:{type:"Investigation Request",facet:"Change Impacts",action:"IR>Change Impacts>Direct>ResolvedBy>Add Existing Change Action or Task"}};A.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){let i={node:t.nodeModel.getTreeDocument().getSelectedNodes()[0],invstigationRequestId:t.nodeModel.options.grid.id,funcationality:"addExistingResolvedBy"};e.addExistingResolvedByHandler(i)}))}else if(e.target.className.contains("resolvedby_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};v.buildAndDisplayContextualMenu(e.target,t)}}else if(t&&9===t.columnID){if("RevColId"===e.target.className){r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").launchVersionExplorer({id:t.nodeModel.options.grid.dispositionInformation[0].dispostionId,type:m.CHG_GOV_AffectedItems_Disposition,name:t.nodeModel.options.grid.dispositionInformation[0].dispositionName})}}else t&&14==t.columnID&&e.target.className.contains("chgIRDispositionAddApprover")&&require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],(function(e){if(t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0])var i=t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0].dispostionId?t.nodeModel.options.grid.dispositionInformation[0].dispostionId:t.nodeModel.options.grid.dispositionInformation[0].dispositionId;let n={id:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,model:t.nodeModel.getTreeDocument(),objectTitle:t.nodeModel.options.grid.title,dispositionID:i};e.addApproverHandler(n)}))},showSpinner:function(){console.log("show spinner"),D.mask(this.options.target)},hideSpinner:function(){console.log("hide spinner"),D.unmask(this.options.target)},reapplySortModel:function(){this.dgView.reapplySortModel()}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],(function(e,t,i,n){"use strict";return{changeView:function(e){try{i.getGlobalVariable().is3DSpace&&n(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],(function(e){let t=e.treeDocument.getAllDescendants();for(var i of(e.treeDocument.prepareUpdate(),t))i.updateOptions({label:i.options.grid.title});e.treeDocument.pushUpdate()}))}catch(e){console.log(e)}setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l){return{launchCreateChangeIADialog:l.debouncingHandler((function({contextCRId:a}){console.log("launchCreateChangeIADialog ............................");let r=i.getUserPreference(n.keys.createKeys.IA_DEF_TYPE),l={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ANALYSIS_FORM,type:"Change Analysis",silentMode:!1,overlay:!0,options:{typeName:"Change Analysis",preferedType:r,select:[],parentPIDs:[a]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isLibrary:!0}}],events:{onSuccess:function(e){document.getElementsByClassName("moduleWrapper")[0];try{let t=s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var o=e.result[0];o.isKindOfType="Change Analysis",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:o,View:"Impact Analysis"})}catch(e){console.log(e)}s("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil").filterView("activeIA"),t.TriggerCustomeUpdate="false";let a={};a[n.keys.createKeys.IA_DEF_TYPE]=e.result[0].type,i.saveUserPreference(a)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};var d={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>New Impact Analysis"}};s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:d}),(new e).CreateNew(l)}),500)}})),define("DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsContextualMenu",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f){"use strict";var v={showRMBMenuOnGrid:function(e,t,i){return new Promise((function(n,o){var s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const r=s.map((e=>e.options.grid.id));var l=!1;s.length>1&&(l=!0);var d=[];d.push(a.createPropertyPushItem(r)),d.push(v.getRelationalExplorerMenu(e));var c=C("DS/ENOChgServices/scripts/services/ChgDataService"),p=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),u={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},D=p.openWith(u),I=null,w=[];w.push(D),l||("ChangeRequest"==s[0].options.grid.isKindOfType?(I=c.getChangeRequestUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(I)):"ChangeOrder"==s[0].options.grid.isKindOfType?(I=c.getChangeOrderUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(I)):"InvestigationRequest"==s[0].options.grid.isKindOfType?(I=c.getInvestigationRequestUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(I)):(I=c.getChangeActionUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(I))),Promise.all(w).then((function(o){if(o[0]&&d.push(o[0]),l){for(var a=0;a<s.length;a++){var r=!1;if("InvestigationRequest"==s[a].options.grid.isKindOfType)r=!0}"true"==g.getGlobalVariable().isFullLicence&&1!=r&&d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),d.push(v.getTransferMenu(e)),"true"==g.getGlobalVariable().isFullLicence&&d.push(v.getDeleteMenu(e,t,i))}else{if("ChangeOrder"==s[0].options.grid.isKindOfType){var c=o[1].data[0].dataelements;c=h.processAccessBitCO(c),(o[1]&&"true"==c.Promote||"true"==c.Demote)&&d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),o[1]&&"true"==c.TransferOwnership&&d.push(v.getTransferMenu(e)),"true"==c.Delete&&d.push(v.getDeleteMenu(e,t,i))}"ChangeRequest"==s[0].options.grid.isKindOfType&&(d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),o[1]&&"true"==o[1].data[0].dataelements.TransferOwnership&&d.push(v.getTransferMenu(e)),"true"==o[1].data[0].dataelements.Delete&&d.push(v.getDeleteMenu(e,t,i))),"ChangeAction"==s[0].options.grid.isKindOfType&&(d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),o[1]&&o[1].data[0]&&("true"==o[1].data[0].Transfer&&d.push(v.getTransferMenu(e)),"true"==o[1].data[0].Delete&&d.push(v.getDeleteMenu(e,t,i)))),"InvestigationRequest"==s[0].options.grid.isKindOfType&&(d.push(m.getCopyLink(s)),o[1]&&o[1].data[0]&&(o[1]&&"true"==o[1].data[0].dataelements["Transfer Ownership"]&&d.push(v.getTransferMenu(e)),"true"==o[1].data[0].dataelements.Delete&&d.push(v.getDeleteMenu(e,t,i))))}n(d)}))}))},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:s.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++){var a=i[o].options.grid.id;n.push(a)}t.openRelationalExplorer(n)}))}}}},getTransferMenu:function(e){return{type:"PushItem",title:s.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},getDeleteMenu:function(e,t,i){return{type:"PushItem",title:s.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){for(var o=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],s=0;s<o.length;s++){var r=o[s],l={physicalid:r.options.grid.id,nodeName:r.options.grid.name,nodeTitle:r.options.grid.title};a.push(l)}n.deleteNodes(a,t,i)}}}}};return v})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Menu/ContextualMenu","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this.options=e,this.options.custom_view_options={settings:{url:d.getGlobalVariable().get3DSpaceURL(),securityContext:d.getGlobalVariable().getSecurityContext(),isNative:d.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t;var n=this._modelEvents;this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),v.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("minified-header-height"))})),widget.addEvents({onSearch:function(e){n.publish({event:"ir-aff-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"ir-aff-DataGrid-on-reset-search",data:{query:e},context:i})}})},render:function(){try{var e=this.processColumns(),t=this,c={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgIRAffectedItemsGrid",showContextualMenuColumnFlag:!0,useWidgetPreferencesFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>=0&&10==e.cellInfos.columnID)return f.showRMBMenuOnGridForDispositionCell(e,t.id,t.options.contextDetails.access).then((function(e){return e}));if(e.cellInfos.rowID>=0&&17==e.cellInfos.columnID)return f.showRMBMenuOnGridForResolvedByCell(e).then((function(e){return e}));if(e.cellInfos.rowID>=0)return f.showRMBMenuOnGrid(e,t.options.contextDetails.access).then((function(e){return e}));i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){t.draggedNodes&&1==t.draggedNodes.length&&10==t.columnID?D.readyDragContentForDisposition(e,t):t.draggedNodes&&1==t.draggedNodes.length&&17==t.columnID?D.readyDragContentForResolvedBy(e,t):l.readyDragContent(e,t)}};c=UWA.merge(c,this.options),this.chgGridView=new o(c),this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){D.onCustomViewsSave(e,i,t.options.custom_view_options)},this.chgGridView.cellSelection="none";let S=this.chgGridView;this._modelEvents.publish({event:"hideEmpty-datagrid",data:S}),this._modelEvents.unsubscribe({event:"ir-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"ir-aff-DataGrid-on-search"},(function(e){if("false"==d.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.chgGridView.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"ir-aff-DataGrid-on-reset-search"},(function(e){var i=t.chgGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))}));let y={typeForDisposition:{stdTemplate:"enumCombo",semantics:{possibleValues:{documentKey:g.CHG_GOV_Investigation_Request_Disposition_Type_Documentation,fixKey:g.CHG_GOV_Investigation_Request_Disposition_Type_Fix,notFixKey:g.CHG_GOV_Investigation_Request_Disposition_Type_No_Fix,notImpactedTypeKey:g.CHG_GOV_Investigation_Request_Disposition_Type_Not_Impacted,noneKey:g.CHG_GOV_Investigation_Request_Disposition_Type_None},valueType:"enumValueToProperty"}}};this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations(y),r.toolbar=this.chgGridView.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",(function(){t.chgGridView.buildStatusBar([{type:u.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:g.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:u.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:g.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}])})),this.chgGridView.registerReusableCellContent({id:"RevColId",buildContent:function(){return new UWA.Element("div",{class:"RevColId",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}})}}),this.chgGridView.registerReusableCellContent({id:"revEmptyColId",buildContent:function(){return new UWA.Element("div",{styles:{"padding-left":"5px"}})}}),e[8].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("introducedIn")&&""!==e.nodeModel.getAttributeValue("introducedIn")){var i=t.chgGridView.reuseCellContent("RevColId");i.setContent(e.nodeModel.getAttributeValue("introducedIn")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.chgGridView.reuseCellContent("revEmptyColId"))},e[9].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("fixedIn")&&""!==e.nodeModel.getAttributeValue("fixedIn")){var i=t.chgGridView.reuseCellContent("RevColId");i.setContent(e.nodeModel.getAttributeValue("fixedIn")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.chgGridView.reuseCellContent("revEmptyColId"))},e[4].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.chgGridView.reuseCellContent("RevColId");i.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.chgGridView.reuseCellContent("revEmptyColId"))},e[10].children[1].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("dispositionRevision")&&""!==e.nodeModel.getAttributeValue("dispositionRevision")){var i=t.chgGridView.reuseCellContent("RevColId");i.setContent(e.nodeModel.getAttributeValue("dispositionRevision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.chgGridView.reuseCellContent("revEmptyColId"))},t.chgGridView.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.chgGridView.onDropCell=function(e,t){if(17==t.columnID||10==t.columnID)if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.dataTransfer&&e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="copy"),10==t.columnID)if(t.cellModel.contains("chgIRAffectedDragAndDropDisposition")){var i=e.dataTransfer.getData("text");t.nodeModel.options&&t.nodeModel.options.grid?require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],(function(e){let n={node:t.nodeModel,data:i,investigationRequestId:e.ChgIRAffectedItemsDataGridModel.contextID,functionality:"dragAndDropDisposition"};w.dragAndDropDisposition(n)})):s.warn(g.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else s.warn(g.CHG_GOV_Investigation_Request_Disposition_Already_There);else if(t.cellModel.contains("chgIRAffectedAddExistingCADragAndDropResolvedby")){i=e.dataTransfer.getData("text");if(t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0]&&t.nodeModel.options.grid.dispositionInformation[0].dispostionId){let e={node:t.nodeModel,data:i,functionality:"dragAndDropResolvedBy"};w.dragAndDropResolvedBy(e)}else s.warn(g.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else s.warn(g.CHG_GOV_Investigation_Request_Disposition_ResolvedBy_Already_There);return!0};var p=t.chgGridView.getTreeDocument().getXSO(),v=i.debounce((function(e){e&&e.length&&(e=e[0]);var i=t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount");e.getTreeDocument()?i.updateOptions({grid:{data:g.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}):i.updateOptions({grid:{data:g.CHG_GOV_StatusBar_SelectedItems+0}});var n=p.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,n)}),5);p.onPostAdd(v),p.onPostRemove(v),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount)console.log("AffectedItem_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel});else if(1==e.multipleHitCount)if(i&&10==i.columnID){if(e.target.className.contains("chgIRAffectedCreateNewDisposition")){var n={commandInfo:{type:"Investigation Request",facet:"Affected Items",action:"IR>Affected Items>Create Disposition"}};I.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n});var o={model:i.nodeModel.options.grid,InvestigationRequestId:this.options.id,context:i.nodeModel};require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){e.createDisposition(o)}))}else if(e.target.className.contains("chgIRAffectedAddExistingDisposition")){n={commandInfo:{type:"Investigation Request",facet:"Affected Items",action:"IR>Affected Items>Add Existing Disposition"}};I.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n});o={grid:i.nodeModel.options.grid,investigationRequestId:this.options.id,functionality:"AddExistingDisposition"};w.addExistingDispositionHandler(o)}else if(e.target.className.contains("disposition_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};h.buildAndDisplayContextualMenu(e.target,t)}}else if(i&&14==i.columnID){var a={};a.cellInfos=i;let e=a.cellInfos.nodeModel.options.grid.dispositionInformation,t=this.options.contextDetails.id;e&&e[0]&&e[0].dispostionId&&e[0].dispositionAccessBits&&("true"===e[0].dispositionAccessBits[0].Promote||"true"===e[0].dispositionAccessBits[0].Demote)&&D.executeMaturityForDisposition(a,t,w.getHandleForDispostionMaturity)}else if(i&&17==i.columnID){if(console.log("Create Change Action Called"),null==i.nodeModel.options.grid.dispositionInformation||""==i.nodeModel.options.grid.dispositionInformation)s.warn(g.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else if(e.target.className.contains("chgIRAffectedCreateNewCAResolvedby"))if(console.log("New CA resolved by create called"),null==i.nodeModel.options.grid.dispositionInformation||""==i.nodeModel.options.grid.dispositionInformation)s.warn(g.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else{n={commandInfo:{type:"Investigation Request",facet:"Affected Items",action:"IR>Affected Items>ResolvedBy>Create Change Action"}};I.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],(function(e){let i={node:t.options.treeDocument.getSelectedNodes()[0],invstigationRequestId:t.options.id,funcationality:"addResolvedBy"};w.createResolvedByInDispositionIR(i)}))}else if(e.target.className.contains("chgIRAffectedCreateAddExistingCAResolvedby")){n={commandInfo:{type:"Investigation Request",facet:"Affected Items",action:"IR>Affected Items>ResolvedBy>Add Existing Change Action or Task"}};I.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],(function(e){let i={node:t.options.treeDocument.getSelectedNodes()[0],invstigationRequestId:t.options.id,funcationality:"addExistingResolvedBy"};w.addExistingResolvedByHandler(i)}))}else if(e.target.className.contains("resolvedby_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};h.buildAndDisplayContextualMenu(e.target,t)}}else if(i&&16==i.columnID){if(e.target.className.contains("chgIRDispositionAddApprover")){e.target.getOffsets().x,e.target.getOffsets().y;require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],(function(e){let n={id:t.options.contextDetails.id,type:t.options.contextDetails.isKindOfType,model:t.options.treeDocument,objectTitle:t.options.contextDetails.title,dispositionID:i.nodeModel._options.grid.dispositionInformation?i.nodeModel._options.grid.dispositionInformation[0].dispostionId:void 0};e.addApproverHandler(n)}))}}else!i||4!==i.columnID&&8!==i.columnID&&9!==i.columnID&&11!==i.columnID||"RevColId"===e.target.className&&(11===i.columnID?D.launchVersionExplorer({id:"NEW_MIB"==i.nodeModel.options.grid.sourceType?i.nodeModel.options.grid.serviceBasedObjId:i.nodeModel.options.grid.dispositionInformation[0].dispostionId,type:g.CHG_GOV_AffectedItems_Disposition,name:i.nodeModel.options.grid.dispositionInformation[0].dispositionName}):D.launchVersionExplorer({id:"NEW_MIB"==i.nodeModel.options.grid.sourceType?i.nodeModel.options.grid.serviceBasedObjId:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.type,name:i.nodeModel.options.grid.name}))},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-affectedItems-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-affectedItems-grid-div"});var _=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-affectedItems-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"affectedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new m({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new C({title:g.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(_),this.toolbar.inject(_);var b=UWA.createElement("div",{class:"content-affectedItems-grid-div expanded-header-height"});this.chgGridView.inject(b),this.chgGridViewContainer.addContent(_),this.chgGridViewContainer.addContent(b),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=b,this.loader=(new a).inject(this.options.target)}catch(e){console.log(e)}},loadCustomColumns:function(){let e=c.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&p.restoreCustomViews(t,this.options.custom_view_options)}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"ir-affected-item-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"ir-affected-item-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridContextualMenu",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgInfraService","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";let h={showRMBMenuOnGrid:async function(e){let n=[];try{"true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.cellInfos.nodeModel.options.grid.approvalStatusModel&&await p.getColumnApprovalStatusMenu(e.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){n.push(e)}))}catch(e){console.error(e)}return new Promise((function(o,a){let s=[],r=!1,l=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();l.length>1&&(r=!0);let d=l.map((e=>e.options.grid.id));s.push(i.createPropertyPushItem(d)),s.push(h.getRelationalExplorerMenu(e));const p=u("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),m=e.cellInfos.nodeModel.options.grid.id;let C={objectId:m,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"changeAction"},f=p.openWith(C),v=null;v=p.getUserAccess("pid:"+m);let D=[];r||(D.push(f),D.push(v)),Promise.all(D).then((i=>{if(i[0]&&s.push(i[0]),!r&&i[1]){let o=i[1].userAccess;if("true"!=o.Promote&&"true"!=o.Demote||s.push(g.getMaturityMenu(e)),"true"==o.Transfer&&s.push(h.getTransferMenu(e)),"true"==t.getGlobalVariable().CHG_APPROVAL_COLUMN&&n.length>0)for(let e=0;e<n[0].length;e++)s.push(n[0][e])}s.push(c.getCopyLink(l)),o(s)}))}))},getTransferMenu:function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},getRelationalExplorerMenu:function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++){var a=i[o].options.grid.id;n.push(a)}e.openRelationalExplorer(n)}))}}}}};return h})),define("DS/ENOChgGovernanceUX/scripts/view/recents/recentlyOpened/ChgRecentlyOpenedView",["UWA/Class/View","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/model/recents/ChgCORecentsTreeModel","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Core/PointerEvents","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsContextualMenu","DS/CoreEvents/ModelEvents","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";var D=e.extend({init:function(e){console.log("init ChgRecentlyOpenedView"),this._parent(e),this._modelEvents=new d,this.subscribeToModelEvents(),this.render(e)},subscribeToModelEvents:function(e){this._modelEvents.subscribe({event:"recentlyOpenedTreeEmpty"},(function(e){D.prototype.recentlyOpenedTreeEmpty()})),this._modelEvents.subscribe({event:"recentlyOpenedTreeNotEmpty"},(function(e){D.prototype.recentlyOpenedTreeNotEmpty()}))},render:function(e){var o=this;o.recentModel=new n,e.treeDocument=o.recentModel.createTreeDocument(this._modelEvents),D.prototype.ChgCORecentsTreeModel=e.treeDocument,o.recentModel.registerCustomFilter(),o.createRecentlyOpenedView(e);let a=f("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").getRecents();if(null!=a&&""!=a){let f=JSON.parse(a);var s,r,l,d,c=[],p=[],u=[],g=[],h=[],C=[],v=[],I=[],w=[],_=[],b=[],S=[];if(f.forEach((function(e,t){var i=JSON.parse(e);"ChangeOrder"==i.type?(w.push(i),s=i.type):"ChangeRequest"==i.type?(_.push(i),r=i.type):"ChangeAction"==i.type?(b.push(i),l=i.type):"InvestigationRequest"==i.type&&(S.push(i),d=i.type)})),w.length>0){var y=[];w.forEach((function(e,t){y.push(e.id)}));var E=y.join(","),O=t.getChangeOrderInfo(E,!0);c.push(O)}if(_.length>0){y=[];_.forEach((function(e,t){y.push(e.id)}));E=y.join(",");var G=t.getChangeRequestInfo(E);c.push(G)}if(b.length>0){y=[];b.forEach((function(e,t){y.push(e.id)}));E=y.join(",");var N=t.getChangeActionInfo(E);c.push(N)}if(S.length>0){y=[];S.forEach((function(e,t){y.push(e.id)}));E=y.join(",");var A=t.getInvestigationRequestInfo(E);c.push(A)}Promise.all(c).then((function(t){if(w.length>0){var a=t[0];if(w.length>a.data.length){!0;for(var c=0;c<a.data.length;c++)p.push(JSON.stringify({id:a.data[c].id,type:s}))}a.data.length?(h=i.processChangeOrderRecentList(a,s),o._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}if(_.length>0){var m=t[1];if(0==w.length&&(m=t[0]),_.length>m.data.length){!0;for(c=0;c<m.data.length;c++)u.push(JSON.stringify({id:m.data[c].id,type:r}))}m.data.length?(C=i.processChangeOrderRecentList(m,r),o._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}if(b.length>0){var f=t[2];if(0!=w.length&&0!=_.length||(f=t[1]),0==w.length&&0==_.length&&(f=t[0]),b.length>f.data.length){!0;for(c=0;c<f.data.length;c++)g.push(JSON.stringify({id:f.data[c].id,type:l}))}f.data.length?(v=i.processChangeOrderRecentList(f,l),o._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):_.length>0&&w.length>0&&0==m.data.length&&0==a.data.length&&o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}if(S.length>0){var D=t[t.length-1];D.data.length?(I=i.processChangeOrderRecentList(D,d),o._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):_.length>0&&w.length>0&&b.length&&0==m.data.length&&0==a.data.length&&0==f.data.length&&o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}return(new n).loadRecentChangeOrderData(e.treeDocument,h.concat(C,v,I)),require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(o.ChgCORecentsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:o.ChgCORecentsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,o.ChgCORecentsTreeModel)})),t}),(function(e){console.log("co/cr Ids Info failure")})).then((function(e){}));let D=o.ChgCORecentsTreeModel;m.unsubscribe(`${D.options.id} of ${widget.id}`),m.subscribe(`${D.options.id} of ${widget.id}`,(function(e){o.recentModel.filterView(e)}))}else o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"});D.prototype.ChgCORecentsTreeModel.getXSO().onAdd((function(t){e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})})),D.prototype.ChgCORecentsTreeModel.getXSO().onRemove((function(t){0==t.getTreeDocument().getSelectedNodes().length?e._applicationChannel.publish({event:"recent-DataGrid-on-unselect-all",data:{model:t.options.grid,context:t,type:t.options.grid.isKindOfType,load:!1},context:t}):e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})}))},createRecentlyOpenedView:function(e){var t=this,i={model:e.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],useDragAndDrop:!0,onDragStartCell:function(e,t){C.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}};this.tileView=new o(i);var n=e.target,a=UWA.createElement("div",{id:"recentlyOpenedCOEmptyTileViewDiv",class:"hideViewRecentlyOpenedCO"}),d=UWA.createElement("div",{id:"recentlyOpenedCOPopulatedTileViewDiv",class:"hideViewRecentlyOpenedCO"}),c=UWA.createElement("div",{class:"recentlyOpenedCOEmptyTileViewText"}),g=r.CHG_GOV_Recents_Recently_Opened_Empty_View;c.inject(a),c.innerText=g,this.tileView.inject(d),d.inject(n),a.inject(n);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel){var i=document.getElementsByClassName("firstROChildDiv")[0];return l.showRMBMenuOnGrid(e,i,t.removeDeletedNodesUsingIDsAdaptor).then((function(e){return e}))}}};this.tileView.onContextualEvent=h,this.tileView.addEventListener(s.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount){var i={};let e;i.model=t.nodeModel.options.grid,e="ChangeRequest"==i.model.isKindOfType?p.ROUTE_CR_DETAILS:"ChangeAction"==i.model.isKindOfType?p.ROUTE_CA_DETAILS:"InvestigationRequest"==i.model.isKindOfType?p.ROUTE_IR_DETAILS:p.ROUTE_CO_DETAILS,u.navigate(e,{id:i.model.id,name:i.model.name,title:i.model.title,nodeModel:i}),m.publish("load-dependency"+widget.id,"pid:"+i.model.id)}}},startWithNewCOHandler:function(e,t){console.log("inside startWithNewCOHandler")},removeDeletedNodesUsingIDsAdaptor:function(e){var t=e;e.deletedIDs&&(t=e.deletedIDs),e.source||m.publish("Chg-Gov-Recents-RecentlyOpened-DeletedIds",{source:"ChgRecentlyOpenedView",deletedIDs:t}),D.prototype.removeDeletedNodesUsingIDs(t)},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];D.prototype.ChgCORecentsTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==D.prototype.ChgCORecentsTreeModel.getChildren().length&&D.prototype.recentlyOpenedTreeEmpty()},handleMoveUpdate:function(e){console.log("inside handleMoveUpdate");for(var t=D.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.data.paths,n=0;n<t.length;n++)for(var o=0;o<i.length;o++)if(i[o]==t[n].options.grid.id){var a,s,r,l,d,c,p,u=t[n].options.grid.id;if(s=(a=e.data.attributes[u]).newCollabSpace,r=a.newOrganization,l=a.newOwnerFullName,(d=a.newOwnerId)&&l){c=t[n].options.grid.name+" | "+l;var g={title:t[n].options.grid.title,name:t[n].options.grid.name,severityNLS:t[n].options.grid.severityNLS,ownerFullName:l,maturityNLS:t[n].options.grid.maturityNLS};p=h.getCustomTooltip(g),t[n].options.grid.owner=d,t[n].options.grid.ownerFullName=l,t[n].updateOptions({grid:t[n].options.grid,customTooltip:p,subLabel:c})}r&&(t[n].options.grid.organization=r,t[n].updateOptions({grid:t[n].options.grid})),s&&(t[n].options.grid.collabspace=s,t[n].updateOptions({grid:t[n].options.grid}))}},handlePropertiesUpdate:function(e){console.log("inside handlePropertiesUpdate");for(var t=D.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.objectId,n=0;n<t.length;n++){if(t[n].options.grid.id==i){var o=e.Title?e.Title.value:e.label,a=e.name.value,s=e.description.value,r=e.owner.value,l=e.owner.valueDB,d=e.Severity.valueDB,c=e.Severity.value,p=t[n].options.grid.ecm_change_on_hold,u=a+" | "+r,g={};g.name=a,g.title=o,g.ecm_change_on_hold=p,g.severity=d,g.severityNLS=c,g.owner=l,g.ownerFullName=r,g.maturityNLS=t[n].options.grid.maturityNLS;var m=h.createCustomSeverity(g),C=h.getStatusBarIcons(g),f=h.statusbarIconsTooltips(g),v=h.getCustomTooltip(g);t[n].options.grid.title=o,t[n].options.grid.description=s,t[n].options.grid.ownerFullName=r,t[n].options.grid.owner=l,t[n].options.grid.severity=d,t[n].options.grid.sev=m,t[n].options.grid.severityNLS=c,t[n].updateOptions({label:o,grid:t[n].options.grid,customTooltip:v,statusbarIcons:C,statusbarIconsTooltips:f,subLabel:u})}}},globalSubscribeForRecentlyOpenedView:function(){g.addObserver("ChgRecentlyOpenedView","ENOLC_MOVE_CMD_UPDATE",this.handleMoveUpdate),g.addObserver("ChgRecentlyOpenedView","CO-Properties-Update",this.handlePropertiesUpdate),g.addObserver("ChgRecentlyOpenedView","Chg-Gov-Recents-PendingIndexed-DeletedIds",this.removeDeletedNodesUsingIDsAdaptor),g.addObserver("ChgRecentlyOpenedView","Lifecycle.Modification",this.handleForMaturityUpdate)},recentlyOpenedTreeEmpty:function(){var e=document.getElementById("recentlyOpenedCOEmptyTileViewDiv");e&&e.removeClassName("hideViewRecentlyOpenedCO");var t=document.getElementById("recentlyOpenedCOPopulatedTileViewDiv");t&&t.addClassName("hideViewRecentlyOpenedCO")},recentlyOpenedTreeNotEmpty:function(){var e=document.getElementById("recentlyOpenedCOEmptyTileViewDiv");e&&e.addClassName("hideViewRecentlyOpenedCO");var t=document.getElementById("recentlyOpenedCOPopulatedTileViewDiv");t&&t.removeClassName("hideViewRecentlyOpenedCO")},handleForMaturityUpdate:function(e){if(e){let t=D.prototype.ChgCORecentsTreeModel.getSelectedNodes();v.getHandleForMaturityUpdate(JSON.parse(e),t)}}});return D})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridContextualMenu","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:g.getGlobalVariable().get3DSpaceURL(),securityContext:g.getGlobalVariable().getSecurityContext(),isNative:g.getGlobalVariable().isNative}},this.CAGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),p.unsubscribe("idcard-header-minified"),p.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-CA-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-CA-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").removeClassName("minified-header-height"))}))},render:function(){let e=this.processColumns(),t=this,l={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRChangeActionGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return r.showRMBMenuOnGrid(e);t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t}};l=UWA.merge(l,this.options);let p={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.CAGridView=new n(l),this.CAGridView.cellSelection="none",this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},(function(e){if("true"==g.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.CAGridView.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},(function(e){var i=t.CAGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new a(p);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return r.showRMBMenuOnGrid(e)}};this.tileView.onContextualEvent=h,t.CAGridView.getTreeDocument().getXSO().onAdd((function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-CA-object-selection-update",data:{count:i,accessBits:t.options.accessBits}});let n=C("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),o={contextId:e.options.grid.id,contextType:e.options.grid.isKindOfType,isNodeAdded:!0,node:e};n.notifySelection(o)})),t.CAGridView.getTreeDocument().getXSO().onRemove((function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-CA-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}});let i=C("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),n={contextId:e.options.grid.id,contextType:e.options.grid.isKindOfType,isNodeAdded:!1,node:e};i.notifySelection(n)}));this.CAGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),s.toolbar=this.CAGridView.setToolbar(s.writetoolbarDefinition(this.options)),this.toolbar=s.toolbar,this.CAGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){u.onCustomViewsSave(e,i,t.options.custom_view_options)},this.CAGridView.columnDefinitionUpdated=!1,this.CAGridView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),document.getElementById("outer-CA-grid-div")&&document.getElementById("outer-CA-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CA-grid-div",class:"outer-CA-grid-div"});let m=UWA.createElement("div",{class:"toolbar-CA-grid-div"});this.toolbar.inject(m);let f=UWA.createElement("div",{class:"content-CA-grid-div expanded-header-height"}),v=UWA.createElement("div",{styles:{height:"100%"},class:"content-CA-tile-div IssueTileView expanded-header-height"}),D=UWA.createElement("div",{class:"hideView",id:"changeActionEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(D),this.CAGridView.inject(f),this.tileView.inject(v),this.CAGridView.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.tileView.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),D.inject(v),this.chgGridViewContainer.addContent(m),this.chgGridViewContainer.addContent(f),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.CAGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=this.gridViewDiv,this.loader=(new o).inject(this.options.target);u.registerCustomEventsOnDGV(["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"],this.CAGridView,this.options.custom_view_options)},loadCustomColumns:function(){let e=h.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&m.restoreCustomViews(t,this.options.custom_view_options)}},onItemClick:function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount){t.nodeModel.select(!0);let e=t.nodeModel.getPath().length;this._modelEvents.publish({event:"IA-CA-Facet-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid,pathlength:e},context:t.nodeModel})}else if(t&&3===t.columnID){var i={};i.cellInfos=t,u.executeMaturity(i)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.CAGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeAction/ChgChangeActionDataGridModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgImpactAnalysisOnCreateCA","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b){"use strict";let S={createCAView:function(t,o){var a=this;t.setStyles({position:"relative"});let s={};this.ChgChangeActionView="",s=UWA.merge(s,o),s.target=t,s.columns=i.getColumns(),this.ChgChangeActionDataGridModel=new n(s.id),this.copyOption=o,this.modelEvents=s.modelEvents,this.treeDocument=s.treeDocument=this.ChgChangeActionDataGridModel.createTreeDocument(),a.ChgCRChangeActionTreeModel=s.treeDocument,h.makeDroppable(s.target,a.dropHandler),this.subscribeToModelEvents(s.treeDocument),a.ChgChangeActionView=new e(s),D.showLoader(s.target,a.ChgChangeActionView.loader),p.getConnectedCA(o.id).then((function(e){u.processedCAList(e,o.id).then((function(e){D.fetchMaturityStateCSS(e),a.ChgChangeActionDataGridModel=new n(o.id),a.ChgChangeActionDataGridModel.loadCAData(s.treeDocument,e);var t=u.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(t),0==s.treeDocument.getChildren().length?s.treeDocument._modelEvents.publish({event:"treeEmpty"}):s.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),S.changeView(),D.hideLoader(s.target,a.ChgChangeActionView.loader)}))}),(function(e){return D.hideLoader(s.target,a.ChgChangeActionView.loader),Promise.reject(e)}))},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"treeEmpty"},(function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()})),m.unsubscribe("updateRouteContent-"+widget.id),m.subscribe("updateRouteContent-"+widget.id,(function(e){if("true"==d.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=_.getApprovalStatusValue(e);var t=S.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach((e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS,maturityWithBadge:n.maturity_NLS}})}))}})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("IA-CA-Facet-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"IA-CA-Facet-DataGrid-on-dblclick"},(function(e){if("ChangeAction"==e.model.isKindOfType){let t;t=v.ROUTE_CR_ORCHESTRATION_LEVEL1,f.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:{level:"level1",model:e.model,level1Node:{id:e.model.id,title:e.model.title}}})}})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-CA-object-selection-update")]||this.modelEvents.subscribe({event:"cr-CA-object-selection-update"},(function(e){S.handleObjectSelectionUpdate(e)})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CA-Creation-Update")]||this.modelEvents.subscribe({event:"CA-Creation-Update"},(function(e){S.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"Add"}})})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CA-Creation-Update-ImpactedItem")]||this.modelEvents.subscribe({event:"CA-Creation-Update-ImpactedItem"},(function(e){if(S.copyOption&&S.copyOption.id){let e=S.copyOption.id;p.getConnectedCA(e).then((async function(t){var i=await u.processedCAList(t,e);S.addNodesInLayout(i)}),(function(e){return Promise.reject(e)}))}}))},dropHandler(e){for(var t=0;t<e.length;t++)if(e.length>0&&"Change Action"!=e[t].objectType)return void s.error(e[t].objectType+" "+e[t].displayName+" "+a.CHG_GOV_IA_Other_Than_CA_DragNDrop);var i=[];for(t=0;t<e.length;t++)i.push({id:e[t].objectId,type:e[t].objectType});S.ChgChangeActionDataGridModel.addExistingChildren(i)},AddNewChangeAction:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Change Action",action:"IA>Change Action>New Change Action"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});S.ChgChangeActionDataGridModel;let t={parentID:S.ChgChangeActionView.id};o.createNewChangeActionInContext(t)},addExistingHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Change Action",action:"IA>Change Action>Add Existing"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t,i="Approved";S.copyOption.grid?i=S.copyOption.grid.maturity:S.copyOption.attributes&&(i=S.copyOption.attributes.mapping.maturity.valueActual),t="Approved"===i?' AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND ((NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"Prepare") OR (NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"In Work"))':' AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"Prepare")';let n={condition:"addExistingCROrchestration",extendedQuery:t};var o=S.treeDocument;if(0===o.getSelectedNodes().length||1===o.getSelectedNodes().length)if(d.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();let t;t="Approved"===i?"../common/emxFullSearch.jsp?field=TYPES=type_ChangeAction:ECM_CHG_ON_HOLD!=TRUE:CURRENT!=policy_Cancelled.state_Cancelled:CURRENT=policy_ChangeAction.state_Prepare,policy_ChangeAction.state_InWork&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e:"../common/emxFullSearch.jsp?field=TYPES=type_ChangeAction:ECM_CHG_ON_HOLD!=TRUE:CURRENT!=policy_Cancelled.state_Cancelled:CURRENT=policy_ChangeAction.state_Prepare&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,showChooser(t,850,630);var r=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,S.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",r)}else console.log("inside EVENT")};window.addEventListener("storage",r)}else{var c=l.activateSearch();l.search("Add Existing","Change Action",S.OnSearchComplete,"changeActionView",c,void 0,void 0,n)}else o.getSelectedNodes().length&&o.getSelectedNodes().length>0?s.error(a.CHG_GOV_ChangeRequest_IA_Toolbar_SubCA):s.error(a.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed)},OnSearchComplete:function(e){let t=S.ChgChangeActionDataGridModel;for(var i=[],n=0;n<e.length;n++)i.push({id:e[n][0],type:e[n][2]});i.length&&t.addExistingChildren(i)},removeHandlerCR:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Change Action",action:"IA>Change Action>Remove"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=S.treeDocument.getSelectedNodes().length&&S.ChgChangeActionDataGridModel.removeChildren(S.treeDocument)},addNodesInLayout:function(e){S.ChgChangeActionDataGridModel.addNodesInLayoutModel(this.treeDocument,e)},removeHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Change Action",action:"IA>Change Action>Delete"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("deleteHandler!");var t=S.treeDocument.getSelectedNodes();if(t.length){for(var i=[],n=0;n<t.length;n++){var o=t[n],a={physicalid:o.options.grid.id,nodeName:o.options.grid.name,nodeTitle:o.options.grid.title};i.push(a)}var s=document.getElementById("outer-CA-grid-div");g.deleteNodes(i,s,S.removeDeletedNodesUsingIDs)}},removeDeletedNodesUsingIDs:function(e){S.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"delete"}});for(var t=0;t<e.length;t++){var i=e[t];S.treeDocument.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==S.treeDocument.getChildren().length&&S.treeDocument._modelEvents.publish({event:"treeEmpty"})},handleObjectSelectionUpdate:function(e){e.count>0&&"true"===e.accessBits.ManageImplementingChanges?(S.ChgChangeActionView.toolbar.updateNodeModel("remove",{visibleFlag:!0}),S.ChgChangeActionView.toolbar.updateNodeModel("delete",{visibleFlag:!0})):(S.ChgChangeActionView.toolbar.updateNodeModel("remove",{visibleFlag:!1}),S.ChgChangeActionView.toolbar.updateNodeModel("delete",{visibleFlag:!1}))},globalSubscribeForCRChangeActionView:function(){r.addObserver("ChgChangeActionDataGridLayout","CO-Properties-Update",S.handlePropertiesUpdateForChangeAction),r.addObserver("ChgChangeActionDataGridLayout","Lifecycle.Modification",S.handleForMaturityUpdate)},handlePropertiesUpdateForChangeAction:function(e){var t=S.ChgCRChangeActionTreeModel;t&&w.handlePropertiesOnUpdate(t,e)},handleForMaturityUpdate:async function(e){if(e){let o=S.treeDocument.getSelectedNodes(),a=JSON.parse(e);D.getHandleForMaturityUpdate(a,o);let s=[];if(a&&a.Refresh&&Array.isArray(a.Refresh.modified))for(const e of a.Refresh.modified)e&&e.physicalid&&s.push({id:e.physicalid});if(s.length>0){var t=await _.getColumnApprovalStatusValue(u.createPayloadApprovalStatusValue(s));if(t){S.treeDocument.prepareUpdate();for(const e of o){var i=e.options.grid.id;if(t[i]){var n={grid:{ApprovalStatus:t[i].approvalStatus,approvalStatusModel:t[i].approvalStatusModel}};e.updateOptions(n)}}S.treeDocument.pushUpdate()}}}}};return S.globalSubscribeForCRChangeActionView(),S})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemCreateNewCA",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],(function(e,t,i,n,o,a,s,r,l){return{createNewChangeActionInImpactedItemContext:function(e,d){let c=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action";let p=e.parentID,u={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:c,select:[],parentPIDs:[p]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){try{let s=l("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var i=e.result[0];if(i.isKindOfType="Change Action",s.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:i,View:"Impact Analysis"}),d.length>0){const e=[],s=[];for(let t of d)e.push(t.options.grid.id),s.push({id:t.options.grid.id,service:t.options.grid.serviceName,type:t.options.grid.type});const c=[];c.push(i.identifier);let u=[];for(let e of c){let t={id:e,proposedInformation:s,updateAction:"CONNECT"};u.push(t)}let g=p;0!=c.length&&0!=s.length&&o.connecteCAwithImpactedItem(u,g).then((function(i){let o=i.data[0].connectedProposedIds;if(0!=i.data[0].errorReport.length){var s=i.data[0].errorReport,r=[];for(var l in s)r+=s[l]+"<br/>";a.warn(r,"false")}r=[];let c=i.data;for(let i of c){i.id;let a=i.proposedIds,s=t.processChangeAction(i);for(let t of a)if(e.includes(t))for(let e of d)if(0!=o.length&&o.includes(e.options.grid.id)&&e.options.grid.id==t){e.options.grid.proposedChangeActionsData.push(s);let t=n.getProposedColumnBasedOnData(e.options.grid.proposedChangeActionsData);e.updateOptions({grid:{proposedChangeAction:t}})}}}));l("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout").modelEvents.publish({event:"CA-Creation-Update",data:{}}),a.success(r.CHG_GOV_ImpactedItem_Toolbar_Add_New_ChangeAction_Product_Success)}else a.success(r.CHG_GOV_ImpactedItem_Toolbar_Add_New_ChangeAction_Success)}catch(e){console.log(e)}},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new s).CreateNew(u)}}})),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridModel",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";var f=g.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),v=n.extend({init:function(e){this.contextID=e.id,this.objectType=e.isKindOfType,"InvestigationRequest"==e.isKindOfType&&(this.businessSubstateIR=e.model.businessState?e.model.businessState:e.model.attributes.mapping.maturitySubstate.valueActual)},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new o({useAsyncPreExpand:!0,shouldBeSelected:function(e){return 1!=e.options.grid.isRoot}});return this.setTreeDocument(e),e},getRolesAllowed:function(e){return"ChangeAction"===e?["owner","contributor","approver","follower"]:"ChangeRequest"===e||"ChangeOrder"===e?["owner","changeCoordinator","contributor","approver","follower"]:["owner","coordinator","contributor","follower"]},loadMembersData:function(e,t,i){var n=this;console.log("loggin load data"),e.prepareUpdate(),p.reviewerType.typeOfReviewer="",c.isChangeCoordinatorConnected=!1,n.getRolesAllowed(i).forEach((function(t){var i=c.getRoleNLSValue(t);let o=t;var a=n.createRootNode(i,o);e.addRoot(a),n.loadRoleData(a,[],i)}));for(var o=0;o<t.length;o++){var a=t[o];for(var s in a){var r=c.getRoleNLSValue(s),l=e.getRoots().find((function(e){return r&&e._options.label.includes(r)}));l&&n.loadRoleData(l,a[s],r)}}e.getChildren().sort((function(e,t){return e.options.order-t.options.order})),e.pushUpdate(),console.log("loggin load data DONE"),console.log(e.getAllDescendants());let u=document.getElementById("caMembers");u&&d.isMasked(u)&&d.unmask(u)},createRootNode:function(e,t){return new a({label:e.charAt(0).toUpperCase()+e.slice(1)+" (0)",icons:[{iconName:"user"}],grid:{isRoot:!0,role:e,nonNLSRole:t},order:{owner:1,coordinator:2,changeCoordinator:2,contributor:3,approver:4,follower:5}[t]||999})},loadRoleData:function(e,t,i){var n=this.createTreeDocumentNodeModel(t,i);e.addChild(n),e.setLabel(i.charAt(0).toUpperCase()+i.slice(1)+" ("+n.length+")"),e.expandAll()},createTreeDocumentNodeModel:function(e,t){for(var i=[],n=0;n<e.length;n++){var o=this.createTreeNode(e[n],t);i.push(o)}return i},createTreeNode:function(e,t){"Route Template"==e.type?e.username=e.fullName:e.username=e.userId?e.userId:"","Approvers"==t&&(p.reviewerType.typeOfReviewer=e.type),e.role=t,e.id=e.id,e.icon=e.icon;return new a({grid:e})},createCustomPersonNameField:function(e){var t="",i=e.options.grid;t="person"===i.type?i.fullName+" ("+i.user+")":i.fullName;var n=new UWA.Element("div",{class:"members "+e.getParent().options.grid.role,title:t});n.setStyles({whiteSpace:"nowrap"});var o="";(o="Group"===i.type?UWA.createElement("span",{class:"user-group wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-users-group",html:i.title}):this.getPersonImageDiv(i)).addClassName("assignee");let a="";return a="Route Template"==i.type?this.getRouteTemplateImageDiv(i):"Group"==i.type?UWA.createElement("span",{class:"userName"}):UWA.createElement("span",{class:"userName",html:i.fullName}),o.inject(n),a.inject(n),n},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.userId+"/format/normal";i=r.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),o="";if(r.getGlobalVariable().isSwymInstalled)o=UWA.createElement("img",{class:"userIcon",src:i});else{var a=m.getAvatarDetails(e.fullName);o=UWA.createElement("div",{html:a.avatarStr}),1==t?(o.addClassName("chg-member-profile-picture"),o.addClassName("chg-team-profile-text")):o.addClassName("avatarIcon"),o.style.setProperty("background",a.avatarColor)}return o.inject(n),n},getRouteTemplateImageDiv:function(e){return UWA.createElement("span",{class:"userName",html:e.title})},createTreeDocumentNodeModelForNewMember:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i],e[i].role);t.push(n)}return t},addNodesInLayoutModel:function(e,t){e.prepareUpdate(),this.updateTreeDocument(t,e),e.pushUpdate()},updateTreeDocument:function(e,t){for(var i=0;i<e.length;i++)for(var n=e[i],o=Array.isArray(n.roles)?n.roles:[n.roles],a=0;a<o.length;a++){var s=o[a],r=c.getRoleNLSValue(s),l=t.getRoots().find((function(e){return e._options.label.includes(r)}));if(l){var d=v.prototype.createTreeDocumentNodeModelForNewMember([n]);if(!this.isNodeAlreadyExists(l,d[0])){let e;if(e=l.options.grid.nonNLSRole.toLowerCase(),e.includes("coordinator")){let e=l.getChildren();l.removeChildren(e)}l.addChild(d),l.setLabel(r+" ("+l.getNumberOfChildren()+")"),l.expandAll()}}}},isNodeAlreadyExists:function(e,t){for(var i=e.getAllDescendants(),n=0;n<i.length;n++){if(i[n].options.grid.id===t.options.grid.id)return!0}return!1},updateCountOnContextualAction:function(e,t){this.treeDocument.getChildren().forEach((e=>{var i=e.getAttributeValue("role"),n=c.getRoleWithoutNLS(i),o=i.split(",").filter((e=>""!==e.trim())).length;if(n&&n.includes(t)){var a=e.options.label.replace(/\(\d+\)/,"("+o+")");console.log(a),e.setLabel(a),e.expandAll()}})),e.expandAll()},setFilterModel:function(e){this.treeDocument.setFilterModel(e)},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("string",f)},getFilterModel:function(){return{label:{filterId:"string",filterModel:[]},username:{filterId:"set",filterModel:""}}},removeChildren:async function(e,t){try{const i=this,n=i.contextID,o=this.objectType,a=i.treeDocument,s=i.treeDocument.getSelectedNodes();if(0===s.length)return;const r=await v.prototype.createPostData(s,o,n,e,t);await v.prototype.processAndSendPostData(r,o,n,s,a,e,t)}catch(e){console.log(e.error);const t=document.getElementById("caMembers");t&&d.isMasked(t)&&d.unmask(t)}},createPostData:async function(t,i,n,o,a){const s={person:[],group:[]},r={person:[],routetemplate:""},l={person:[],group:[]},d={person:[],group:[]};for(const i of t){const t=i.options.grid,n=i._parentNode.getLabel();t.roles=t.roles&&t.roles.length>0?t.roles:[c.getRoleWithoutNLS(t.roleList)];let p=[...t.roles];p.includes("owner")&&(console.error("Error: You cannot remove the 'owner' role."),h.warn(e.CHG_Warn_Member_Remove_Owner_Coordinator),p=p.filter((e=>"owner"!==e)));for(const i of p){if(n.toLowerCase().includes("coordinator")&&i.includes("Coordinator")&&a&&"Define"!=a||i.includes("Coordinator")&&a&&"Define"!=a)console.log("coordinator can not be removed "),h.warn(e.CHG_Warn_Member_Remove_Owner_Coordinator),c.isChangeCoordinatorConnected=!1;else if(i.includes("Coordinator")&&"Define"==a)d.person=t.userId?t.userId:t.userid;else if(i.toLowerCase().includes("coordinator")){const i=t.userId?t.userId:t.userid;"Person"!==t.type||d.person.includes(i)||"true"!==o?"Group"===t.type?d.group.push(t.id):h.warn(e.CHG_Warn_Member_Remove_Owner_Coordinator):d.person.push(i)}if(i.includes("contributor")){const e=t.userId?t.userId:t.userid;"Person"!==t.type||s.person.includes(e)?"Group"===t.type&&s.group.push(t.id):s.person.push(e),c.isChangeCoordinatorConnected=!1}if(i.includes("approver")){const e=t.userId?t.userId:t.userid;"Person"!==t.type||r.person.includes(e)?"Route Template"===t.type&&(r.routetemplate=t.id):r.person.push(e)}if(i.includes("follower")){const e=t.userId?t.userId:t.userid;"Person"!==t.type||l.person.includes(e)?"Group"===t.type&&l.group.push(t.id):l.person.push(e)}}}if(r.person.length>0||""!==r.routetemplate||l.person.length>0||l.group.length>0||s.person.length>0||s.group.length>0||d.person.length||d.group.length>0)return c.makeUpdateMemberJson("DISCONNECT",s,r,l,d,i)},processAndSendPostData:async function(e,t,i,n,o,a,s){if(e.data.length<0)return;const r=await p.updateMembers(t,i,e);if(console.log("Response from updateMembers:",r),r.success)for(const e of n)try{const i=e.options.grid.roles,n=e.options.grid.username;console.log("Processing selectedNode:",e),console.log("Roles:",i),console.log("UserName:",n);let r=o.getRoots(),d=!1;for(const o of r){var l=o.options.grid.nonNLSRole.toLowerCase(),u=C("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout");for(const r of i){const i=o.getAllDescendants();for(let g of i)if(g.options.grid.id===e.options.grid.id){console.log(`Found ${n} in parent node: ${l}`);const i=e.options.grid.roles||[],h=i.includes("owner"),m=i.includes("approver"),C=i.includes("Coordinator");if("owner"===l&&h)console.log(`Not removing ${n} from owner parent node: ${l}`);else if(C&&"true"===a)console.log(`Removing ${n} from coordinator parent node: ${l}`),"owner"===l?console.log(`Skipping removal for ${n} because they are an Owner in the parent node: ${l}`):(o.removeChild(g),"changecoordinator"==l&&(l="Coordinator"),e.options.grid.roles=e.options.grid.roles.filter((e=>e!==l)),d=!0);else if(C&&"InvestigationRequest"==t&&"Define"==s){o.removeChild(g),"coordinator"==l&&(l="Coordinator"),e.options.grid.roles=e.options.grid.roles.filter((e=>e!==l)),d=!0;let t={isChangeCoordinatorExists:!0};u.handleInvestigationMaturityUpdate(t)}else if(!C||"changecoordinator"!=l&&"coordinator"!=l)if("owner"===l)console.log(`Skipping removal for ${n} because they are an Owner in the parent node: ${l}`);else{console.log(`Removing ${n} from parent node: ${l}`),o.removeChild(g),m&&(p.reviewerType.typeOfReviewer="");c.getRoleNLSValue(r);let t=c.getRoleNLSValue(l);e&&e.options&&e.options.grid&&Array.isArray(e.options.grid.roles)&&(e.options.grid.roles=e.options.grid.roles.filter((e=>e!==l))),e&&e.options&&e.options.grid&&e.options.grid.roleList&&(e.options.grid.roleList=e.options.grid.roleList.split(",").reduce(((e,i)=>(i!==t&&e.push(i),e)),[]).join(",")),d=!0}else console.log(`Not removing ${n} from coordinator parent node because accessBit is false: ${l}`);break}}}}catch(e){console.error("Error",e)}else console.error("Error response:",r.error);const g=document.getElementById("caMembers");g&&d.isMasked(g)&&d.unmask(g)}});return v})),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("COrelatedScopeEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("COrelatedScopeEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfodialog"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this.options=e,this.model=e.model,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:m.getGlobalVariable().get3DSpaceURL(),securityContext:m.getGlobalVariable().getSecurityContext(),isNative:m.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgOrchestrationGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgOrchestrationGridView.inject(this.options.target),this.chgOrchestrationGridView.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",(function(e){e.value?(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("minified-header-height")):(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("minified-header-height"))}));var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"co-orc-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"co-orc-DataGrid-on-reset-search",data:{query:e},context:i})}})},loadCustomColumns:function(){let e=v.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&D.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){try{var e=this.processColumns(),t=this,u={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,identifier:"chgOrchestrationGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return p.showRMBMenuOnGrid(t,e,!0).then((function(e){return e}));e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};u=UWA.merge(u,this.options);var g={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.chgOrchestrationGrid=new o(u),this.chgOrchestrationGrid.cellSelection="none",this.chgOrchestrationGrid.getCustomViewsManager().onCustomViewsSave=function(e,i){f.onCustomViewsSave(e,i,t.options.custom_view_options)},this.tileView=new s(g);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return p.showRMBMenuOnGrid(t,e,!0).then((function(e){return e}))}};this.tileView.onContextualEvent=h;this.chgOrchestrationGrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),r.toolbar=this.chgOrchestrationGrid.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar;t=this;this.chgOrchestrationGrid.addEventListener("allCellsRendered",(function(){t.chgOrchestrationGrid.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.chgOrchestrationGrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])})),t.chgOrchestrationGrid.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.chgOrchestrationGrid.onDropCell=function(e,i){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var n=e.dataTransfer.getData("text"),o=(n=JSON.parse(n)).data.items,a=m.getGlobalVariable().subTypes,s=[];let r=[];for(let e of o)a.includes(e.objectType)?r.push(e):s.push(e.objectId);if(i.nodeModel.options.grid.isKindOfChangeAction)I.error(c.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{s.length>0&&I.warn(c.CHG_GOV_ChangeOrchestration_Unsupported_Message);for(var l=[],d=i.nodeModel.options.grid.id,p=0;p<r.length;p++)l.push({id:r[p].objectId,type:r[p].objectType});if(0!=l.length){var u=[{label:c.CHG_GOV_OK_Button_Label,handler:function(){t.model.addExistingChildren(l,d),w.closeDialog()},className:"primary"},{label:c.CHG_GOV_CANCEL_Button_Label,handler:function(){w.closeDialog()},className:"default"}],g=i.nodeModel.options.grid.name,h=i.nodeModel.options.grid.title;if(m.getGlobalVariable().is3DSpace&&null!=window.parent.currentBC.label){g=window.parent.currentBC.label;var C=c.CHG_GOV_ChangeOrchestration_Drop_Content+"("+g+")<br>"+c.CHG_GOV_ChangeOrchestration_Drop_Confirmation}else C=c.CHG_GOV_ChangeOrchestration_Drop_Content+h+"("+g+")<br>"+c.CHG_GOV_ChangeOrchestration_Drop_Confirmation;var f={title:c.CHG_GOV_ChangeOrchestration_Drop_Info_Title,content:C,buttonArray:u};w.launchInfoDailog(f)}}};var C=t.chgOrchestrationGrid.getTreeDocument().getXSO(),v=i.debounce((function(e){e&&e.length&&(e=e[0]);var i=t.chgOrchestrationGrid.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+0}}));var o=C.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)}),5);C.onPostAdd(v),C.onPostRemove(v),t.tileView.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount){console.log("COOrchestration_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}});let e=i.nodeModel.getPath().length,n={},o={};e>1&&(n.id=i.nodeModel.getParent().options.grid.id,n.title=i.nodeModel.getParent().options.grid.title,n.name=i.nodeModel.getParent().options.grid.name),e>2&&(o.id=i.nodeModel.getParent().getParent().options.grid.id,o.title=i.nodeModel.getParent().getParent().options.grid.title,o.name=i.nodeModel.getParent().getParent().options.grid.name),t._modelEvents.publish({event:"COOrchestration-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid,pathlength:e,parentModel:n,gradParentModel:o},context:i.nodeModel})}else if(i&&2==i.columnID){var n={};n.cellInfos=i,f.executeMaturity(n)}},this._modelEvents.unsubscribe({event:"co-orc-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"co-orc-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"co-orc-DataGrid-on-search"},(function(e){if("false"==m.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.chgOrchestrationGrid.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){var t=0;e.options.grid.title&&(e.options.grid.title.toUpperCase().contains(i.toUpperCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase()))?e.show():e.__children&&e.__children.length>0?e.__children.forEach((function(n){n.options&&n.options.grid&&n.options.grid.title&&n.options.grid.name&&(n.options.grid.name.toLowerCase().contains(i.toLowerCase())||n.options.grid.title.toUpperCase().contains(i.toUpperCase()))?(t++,e.show()):n.__children&&n.__children.length>0?n.__children.forEach((function(n){n.options&&n.options.grid&&n.options.grid.title&&n.options.grid.name&&(n.options.grid.name.toLowerCase().contains(i.toLowerCase())||n.options.grid.title.toUpperCase().contains(i.toUpperCase()))?(t++,e.show()):0==t&&e.hide()})):0==t&&e.hide()})):e.hide()}))}))}}})),this._modelEvents.subscribe({event:"co-orc-DataGrid-on-reset-search"},(function(e){var i=t.chgOrchestrationGrid.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.chgOrchestrationGridView=UWA.createElement("div",{id:"outer-orchestration-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-orchestration-grid-div"});var D=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-orchestration-grid-div"});this.toolbar.inject(D);var _=UWA.createElement("div",{class:"content-orchestration-grid-div expanded-header-height"}),b=UWA.createElement("div",{class:"content-orchestration-tile-div orchestrationtileView expanded-header-height"}),S=UWA.createElement("div",{class:"hideView",id:"orchestrationEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(S),this.chgOrchestrationGrid.inject(_),this.tileView.inject(b),S.inject(b),this.chgOrchestrationGridView.addContent(D),this.chgOrchestrationGridView.addContent(_),this.chgOrchestrationGridView.addContent(b),this.options.custom_view_options.dgvHandle=this.chgOrchestrationGrid,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=_,this.loader=(new a).inject(this.options.target);let y=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];f.registerCustomEventsOnDGV(y,this.chgOrchestrationGrid,this.options.custom_view_options)}catch(e){}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"co-orchestration-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"co-orchestration-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgOrchestrationGrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],(function(e,t,i,n){"use strict";return{changeView:function(e){try{i.getGlobalVariable().is3DSpace&&n(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],(function(e){let t=e.treeDocument.getAllDescendants();for(var i of(e.treeDocument.prepareUpdate(),t))i.updateOptions({label:i.options.grid.title});e.treeDocument.pushUpdate()}))}catch(e){console.log(e)}setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/model/facets/changeOrchestration/ChgOrchestrationDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h){"use strict";var m=u.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),C=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"coOrchestration",useAsyncPreExpand:!0});return e.onPreExpand((function(e){var t=e.target.options.grid.id;console.log("call for children"+e.target),t&&r.getChangeOrchestration(t).then((function(t){l.processedChangeOrchestrationSummaryList(t).then((function(t){var i=C.prototype.createTreeDocumentNodeModel(t);if(e.target.hasChildren())for(var n=!1,o=e.target.getChildren(),a=0;a<i.length;a++){n=!1;for(var s=0;s<o.length;s++)if(o[s].options.grid.id==i[a].options.grid.id){n=!0;break}n||e.target.addChild(i[s])}else e.target.addChild(i);e.target.preExpandDone()})),require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],(function(e){e.orchestrationGridView.loadCustomColumns()}))}),(function(e){return Promise.reject(e)}))})),e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},loadChangeOrchestrationData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&p.isMasked(e)&&p.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomNameField(e);e.chgObjName=t;var n=this.createCustomSeverity(e);e.sev=n;var a=this.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=a;var s=this.createCustomOwnerField(e);e.chgObjOwner=s;var r=e.name+" | "+e.ownerFullName,l=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var d,c=this.getStatusBarIcons(e),p=this.statusbarIconsTooltips(e),u=this.getCustomTooltip(e);return d=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:d,subLabel:r,description:l,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:c,statusbarIconsTooltips:p,customTooltip:u,useAsyncPreExpand:!0})},createCustomNameField:function(e){var t=new UWA.Element("div",{class:"wux-tweakers-string"}),i=UWA.createElement("span",{html:e.name});i.style.setProperty("text-overflow","ellipsis"),i.inject(t);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(t),t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{var l=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(i);var d=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),d.inject(t)}return t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var l=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(a);var d=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),d.inject(n),n.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),"TRUE"==e.ecm_change_on_hold&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),"TRUE"==e.ecm_change_on_hold&&t.push(a.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},addNewChildren:function(e){var t=this;if(this.treeDocument.getSelectedNodes().length>1)c.error(a.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{this.treeDocument.getSelectedNodes().length?this.treeDocument.getSelectedNodes()[0].options.grid.id:this.contextID;var i=document.getElementById("outer-orchestration-grid-div");"undefined"!=i&&null!=i&&p.mask(i),"Change Order"==e.type?r.getChangeOrderInfo(e.objectID).then((function(e){l.processedChangeOrchestrationSummaryList(e).then((function(e){h.fetchMaturityStateCSS(e),C.prototype.addNodesInLayoutModel(t.treeDocument,e,!0),p.unmask(i)}))}),(function(e){p.unmask(i)})):"Change Action"==e.type&&r.getNewCADetails(e.objectID).then((function(e){var t=l.processChangeActionInContext(e).processData;h.fetchMaturityStateCSS(t),console.log(t),require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],(function(e){e.addNodesInLayout(t),p.unmask(i)}))}),(function(e){p.unmask(i)}))}},addExistingChildren:function(e,t){var i,n=this;i=t||(this.treeDocument.getSelectedNodes().length?this.treeDocument.getSelectedNodes()[0].options.grid.id:this.contextID);var o=document.getElementById("outer-orchestration-grid-div");"undefined"!=o&&null!=o&&p.mask(o),r.addExistingChangeOrchestration(i,e).then((function(e){l.processedChangeOrchestrationSummaryList(e).then((function(e){C.prototype.addNodesInLayoutModel(n.treeDocument,e,!1,t),p.unmask(o)}))}),(function(e){p.unmask(o)}))},addNodesInLayoutModel:function(e,t,i=!1,n){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var o,a,s=C.prototype.createTreeDocumentNodeModel(t);if(n){o=!1;for(let t of e.getAllDescendants())if(t.options.grid.id==n){a=t;break}}else e.getSelectedNodes().length?(o=!1,a=e.getSelectedNodes()[0]):o=!0;if(o){if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(s);else for(var r=s.length-1;r>=0;r--)e.addRoot(s[r],0);if(e.pushUpdate(),i)try{let e=g("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var l=t[0];e.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:l,View:"Change Orchestration"})}catch(e){console.log(e)}}else if(null==a.getChildren())e.addRoot(s,0);else{if(a.prepareUpdate(),0==a.getChildren().length)a.addChild(s);else for(r=s.length-1;r>=0;r--)a.addChild(s[r],0);a.pushUpdate(),a.isExpanded()||a.expand()}},removeChildren:function(){var e=this,t=e.treeDocument.getSelectedNodes();if(t.length){var i,n,s=t[0].getParent().options.grid.id;void 0===s?(i=e.contextID,n=!0):(i=s,n=!1);var l=[];l.push({id:t[0].options.grid.id,type:t[0].options.grid.type});for(var d=1;d<t.length;d++){if(s!==t[d].getParent().options.grid.id){if(c.error(a.CHG_GOV_ChangeOrchestration_Toolbar_Invalid_Selection),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&p.isMasked(e)&&p.unmask(e)}return}l.push({id:t[d].options.grid.id,type:t[d].options.grid.type})}r.removeChangeOrchestration(i,l).then((function(i){if(n){for(var s=0;s<t.length;s++)e.treeDocument.removeRoot(t[s]);0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"})}else{var r=t[0].getParent();r.prepareUpdate();for(s=0;s<t.length;s++)r.removeChild(t[s]);r.pushUpdate()}if(o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&p.isMasked(e)&&p.unmask(e)}c.success(a.CHG_GOV_ChangeOrchestration_Toolbar_Remove_Success)}),(function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&p.isMasked(e)&&p.unmask(e)}}))}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map((i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}}))},UWA.is(n,"array")&&n.forEach((function(e){var t=e.color,i=e.id;o(t,i)}))},disableColorizeView:function(e,t){t.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return C})),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridView","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/changeOrchestration/ChgOrchestrationDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E){"use strict";var O={contextId:null,treeDocument:null,accessBit:null,createChangeOrchestrationView:function(t,o){var r=this;t.target.setStyles({position:"relative"}),r.contextId=t.id,r.contextDetails=t.contextDetails,r.target=t.target;var l=t.contextDetails.access,d={};d=UWA.merge(d,t),u.makeDroppable(d.target,r.dropHandler),d.modelEvents=o,this.modelEvents=o,d.columns=i.getColumns(),r.ChgOrchestrationDataGridModel=new n(d.id,d.contextDetails),d.model=r.ChgOrchestrationDataGridModel,r.treeDocument=d.treeDocument=r.ChgOrchestrationDataGridModel.createTreeDocument(),r.ChgOrchestrationDataGridModel.registerCustomFilter(),r.subscribeToModelEvents(d.treeDocument),r.ChgOrchestrationTreeModel=d.treeDocument;var c=new e(d);r.orchestrationGridView=c,S.showLoader(d.target,r.orchestrationGridView.loader);let p=r.orchestrationGridView.chgOrchestrationGrid;w.publish("CO-AccessBit-Update",l),a.getChangeOrchestration(t.id).then((function(e){s.processedChangeOrchestrationSummaryList(e).then((function(e){if(r.chgOrchestrationDataGridModel=new n(t.id),0==e.length){if(v.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&D.isMasked(e)&&D.unmask(e)}else S.hideLoader(d.target,r.orchestrationGridView.loader);r.modelEvents.publish({event:"showEmpty-datagrid",data:p})}S.fetchMaturityStateCSS(e),r.chgOrchestrationDataGridModel.loadChangeOrchestrationData(d.treeDocument,e);var i=s.getDefaultFilter(d.columns);d.treeDocument.setFilterModel(i),r.orchestrationGridView.loadCustomColumns(),d.isSelected&&"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgOrchestrationTreeModel)})),0==d.treeDocument.getChildren().length?d.treeDocument._modelEvents.publish({event:"treeEmpty"}):d.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),O.changeView(),S.hideLoader(d.target,r.orchestrationGridView.loader)}))}),(function(e){if(v.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&D.isMasked(e)&&D.unmask(e)}else S.hideLoader(d.target,r.orchestrationGridView.loader);return Promise.reject(e)}))},dropHandler(e){console.log("dropHandler called"+e);var t=O.ChgOrchestrationDataGridModel.treeDocument,i=v.getGlobalVariable().subTypes;O.draggedObj=[];for(let t of e)i.includes(t.objectType)||O.draggedObj.push(t.objectId);if(t.getSelectedNodes().length>1)l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else if(1==t.getSelectedNodes().length&&t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else if(e.length==O.draggedObj.length)l.error(r.CHG_GOV_Drop_Not_Supported);else{var n=[];let i=[];for(var o=0;o<e.length;o++)O.draggedObj.includes(e[o].objectId)||i.push(e[o]);for(o=0;o<i.length;o++)n.push({id:i[o].objectId,type:i[o].objectType});if(0!=n.length||0!=O.draggedObj.length){var s,d,c=[{label:r.CHG_GOV_OK_Button_Label,handler:function(){if(n.length&&O.ChgOrchestrationDataGridModel.addExistingChildren(n),O.draggedObj.length){let e=[],i="",n={orchestrateItemIds:O.draggedObj,dispatchMethodKind:"ORGANIZATIONANDCOLLABSPACE"};e.push(n),i=0===t.getSelectedNodes().length?O.ChgOrchestrationDataGridModel.contextDetails.id:t.getSelectedNodes()[0].options.grid.id,a.orchestrateChangeOrder(e,i).then((function(e){if(!0===e.success)if(0===t.getSelectedNodes().length){_("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}else t.getSelectedNodes()[0].expand()}))}g.closeDialog()},className:"primary"},{label:r.CHG_GOV_CANCEL_Button_Label,handler:function(){g.closeDialog()},className:"default"}];if(0===t.getSelectedNodes().length?(s=O.ChgOrchestrationDataGridModel.contextDetails.name,d=O.ChgOrchestrationDataGridModel.contextDetails.title):(s=t.getSelectedNodes()[0].options.grid.name,d=t.getSelectedNodes()[0].options.grid.title),v.getGlobalVariable().is3DSpace&&null!=window.parent.currentBC.label){s=window.parent.currentBC.label;var p=r.CHG_GOV_ChangeOrchestration_Drop_Content+"("+s+")<br>"+r.CHG_GOV_ChangeOrchestration_Drop_Confirmation}else p=r.CHG_GOV_ChangeOrchestration_Drop_Content+d+"("+s+")<br>"+r.CHG_GOV_ChangeOrchestration_Drop_Confirmation;var u={title:r.CHG_GOV_ChangeOrchestration_Drop_Info_Title,content:p,buttonArray:c};g.launchInfoDailog(u)}}},refreshLayout:function(e){var t=this.ChgOrchestrationTreeModel;(new n).updateNodeIndexed(t,e)},addNodesInLayout:function(e){O.ChgOrchestrationDataGridModel.addNodesInLayoutModel(this.ChgOrchestrationTreeModel,e,!0)},refreshGrid:function(e,t,i,n){},changeView:function(e){i.changeView("GridView")},mergeChangeAction:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Merge Action"}};_("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=O.treeDocument.getSelectedNodes();O.treeDocument.unselectAll();const i=[];for(let e of t)i.push(e.options.grid.id);let n=[],o={changeActionIds:i};n.push(o),a.mergeChangeAction(n).then((function(e){a.getNewCADetails(e.data[0].id).then((function(e){var i=s.processChangeActionInContext(e).processData;O.addNodesInLayout(i);for(let e of t)e.updateOptions({grid:{maturityNLS:"Canceled",maturityWithBadge:"Canceled"}})}))}))},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){t.hideEmptyView()})),w.unsubscribe(`${e.options.id}:${widget.id}`),w.subscribe(`${e.options.id}:${widget.id}`,(function(){"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgOrchestrationTreeModel)}))})),w.unsubscribe(`${e.options.id} of ${widget.id}`),w.subscribe(`${e.options.id} of ${widget.id}`,(function(t){O.chgOrchestrationDataGridModel.filterView(t,e)})),w.unsubscribe(`${e.options.id} colorize ${widget.id}`),w.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){O.chgOrchestrationDataGridModel.enableColorizeView(t,e)})),w.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),w.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){O.chgOrchestrationDataGridModel.disableColorizeView(t,e)})),w.unsubscribe("updateRouteContent-"+widget.id),w.subscribe("updateRouteContent-"+widget.id,(function(e){if("true"==v.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=y.getApprovalStatusValue(e);var t=O.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach((e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS?n.maturity_NLS:n.maturityNLS,maturityWithBadge:n.maturity_NLS?n.maturity_NLS:n.maturityNLS}})}));w.publish("idcard-header-update-maturity")}})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("COOrchestration-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"COOrchestration-DataGrid-on-dblclick"},(function(e){if(v.getGlobalVariable().is3DSpace){_("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else if("ChangeOrder"==e.model.isKindOfType||"ChangeRequest"==e.model.isKindOfType||"ChangeAction"==e.model.isKindOfType){let t,i={level:"root"},n=!1,o=C.getRouter().getState().name;o.includes(m.ROUTE_CO_DETAILS)?o==m.ROUTE_CO_DETAILS||o==m.ROUTE_CO_DETAILS_LEVEL3PLUS?1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL1,i.level1Node={id:e.model.id,title:e.model.title},i.level="level1"):2==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level1Node=e.parentModel,i.level="level2"):3==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level1Node=e.gradParentModel,i.level="level3"):n=!0:o==m.ROUTE_CO_ORCHESTRATION_LEVEL1?1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):2==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level="level3"):n=!0:o==m.ROUTE_CO_ORCHESTRATION_LEVEL2&&(1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0):o.includes(m.ROUTE_CR_DETAILS)&&(o==m.ROUTE_CR_ORCHESTRATION_LEVEL1?1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):2==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level="level3"):n=!0:o==m.ROUTE_CR_ORCHESTRATION_LEVEL2&&1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0),1!=n&&o!=m.ROUTE_CO_ORCHESTRATION_LEVEL3||(t=e.model&&"ChangeOrder"==e.model.isKindOfType?m.ROUTE_CO_DETAILS_LEVEL3PLUS:e.model&&"ChangeAction"==e.model.isKindOfType?m.ROUTE_CA_DETAILS:m.ROUTE_CR_DETAILS,i=e,i.level="root"),C.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:i})}else O.modelEvents.publish({event:"information-panel-open",data:null})})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-orchestration-object-selection-update")]||this.modelEvents.subscribe({event:"co-orchestration-object-selection-update"},(function(e){O.handleObjectSelectionUpdate(e)})),w.subscribe(`coOrchestration:${widget.id}`,(function(){if(Object.keys(i.orchestrationGridView.options.treeDocument.getXSO()._items).length>0){let e=i.orchestrationGridView.options.treeDocument.getXSO()._items;for(let t in e)i.orchestrationGridView.onSelectionChange(i.orchestrationGridView._modelEvents,e[t],i.orchestrationGridView.id,i.orchestrationGridView.options.contextDetails.isKindOfType,!0)}else i.orchestrationGridView.onSelectionChange(i.orchestrationGridView._modelEvents,i.orchestrationGridView.options.treeDocument._getTrueRoot(),i.orchestrationGridView.id,i.orchestrationGridView.options.contextDetails.isKindOfType,!1)}))},createChangeActionInContext:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>New Change Action"}};_("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=O.ChgOrchestrationTreeModel;if(t.getSelectedNodes().length)if(t.getSelectedNodes().length>1||t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)t.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let e={parentID:t.getSelectedNodes()[0].options.grid.id};d.createNewChangeActionInContext(e)}else{let e={parentID:O.contextId};d.createNewChangeActionInContext(e)}},createChangeOrderInContext:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>New Change Order"}};_("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=O.ChgOrchestrationTreeModel;if(t.getSelectedNodes().length)if(t.getSelectedNodes().length>1||t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)t.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let e={parentID:t.getSelectedNodes()[0].options.grid.id};d.createNewChangeOrderInContext(e)}else{let e={parentID:O.contextId};d.createNewChangeOrderInContext(e)}},addExistingHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Add Existing"}};_("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t={condition:"addExistingOrchestration",extendedQuery:'AND (NOT ecm_95_ca_95_has_95_governing_95_co:"TRUE") AND ( NOT ecm_95_co_95_has_95_governing_95_co:"TRUE") AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold") AND (current:"Prepare" OR current:"In Work") NOT (physicalid:'+O.contextId+")"};var i=O.ChgOrchestrationTreeModel;if(0===i.getSelectedNodes().length||1===i.getSelectedNodes().length&&!i.getSelectedNodes()[0].options.grid.isKindOfChangeAction)if(v.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();var n=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,O.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n),showChooser("../common/emxFullSearch.jsp?field=TYPES=Change Action,Change Order&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630)}else{var a=o.activateSearch();o.search("Add Existing","Change Action, Change Order",O.OnSearchComplete,"changeOrchestration",a,void 0,void 0,t)}else i.getSelectedNodes().length&&i.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed)},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][0],type:e[i][2]});t.length&&O.ChgOrchestrationDataGridModel.addExistingChildren(t)},removeHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Remove"}};if(_("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes().length)if(v.getGlobalVariable().is3DSpace){let e=document.getElementById("coOrchestrationFullViewContainer");e&&D.mask(e)}else{let e=document.getElementById("coOrchestration");e&&D.mask(e)}O.ChgOrchestrationDataGridModel.removeChildren()},deleteHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Delete"}};_("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();if(t.length){for(var i=[],n=0;n<t.length;n++){var o=t[n],a={physicalid:o.options.grid.id,nodeName:o.options.grid.name,nodeTitle:o.options.grid.title};i.push(a)}var s=document.getElementById("outer-orchestration-grid-div");p.deleteNodes(i,s,O.removeDeletedNodesUsingIDs)}},globalSubscribeForCOOrchestrationView:function(){h.addObserver("ChgOrchestrationDataGridLayout","ENOLC_MOVE_CMD_UPDATE",O.handleCOOrchestrationViewTransfer),h.addObserver("ChgOrchestrationDataGridLayout","CO-AccessBit-Update",O.handleAccessBitUpdate),h.addObserver("ChgOrchestrationDataGridLayout","CO-Properties-Update",O.handlePropertiesUpdate),h.addObserver("ChgOrchestrationDataGridLayout","Lifecycle.Modification",O.handleForMaturityUpdate),h.addObserver("ChgOrchestrationDataGridLayout","applicability:update:notification",O.handleForApplicabilityUpdate)},handlePropertiesUpdate:function(e){var t=O.ChgOrchestrationTreeModel;t&&E.handlePropertiesOnUpdate(t,e)},handleCOOrchestrationViewTransfer:function(e){var t,n,o=O.ChgOrchestrationTreeModel.getAllDescendants(),a=[];Object.keys(e.data.attributes).forEach((function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)}));for(var s=0;s<a.length;s++){t=a[s];for(var r=0;r<o.length;r++){if(o[r].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;o[r].options.grid.owner=l;var d=t.newOwnerFullName}if(t.newOrganization){var c=t.newOrganization;o[r].options.grid.orgnaizationNLS=c}if(t.newCollabSpace){var p=t.newCollabSpace;o[r].options.grid.collabspaceNLS=p}""==t.newOwnerId?(l=o[r].options.grid.owner,d=o[r].options.grid.ownerFullName,n=i.createCustomOwner(l,d)):n=i.createCustomOwner(l,d);var u=o[r].options.grid.name,g={};g.name=u,g.title=o[r].options.grid.title,g.severity=o[r].options.grid.severity,g.severityNLS=o[r].options.grid.severityNLS,g.ownerFullName=d,g.maturityNLS=o[r].options.grid.maturityNLS;var h=O.ChgOrchestrationDataGridModel.getCustomTooltip(g),m=u+" | "+d;o[r].updateOptions({label:o[r].options.grid.title,grid:{collabspaceNLS:o[r].options.grid.collabspaceNLS,organizationNLS:o[r].options.grid.organizationNLS,owner:o[r].options.grid.ownerFullName,chgObjOwner:n},customTooltip:h,subLabel:m})}}}},handleAccessBitUpdate:function(e){e.id==O.contextId&&("false"==e.accessBits.ManageGovernedChanges?(O.accessBit=!1,O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!1})):(O.accessBit=!0,O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!0})))},handleObjectSelectionUpdate:function(e){e.count>1?O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{disabled:!1}):O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{disabled:!0}),0===e.count?(O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{disabled:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{disabled:!0})):(O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{disabled:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{disabled:!1}))},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];O.ChgOrchestrationTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==O.ChgOrchestrationTreeModel.getChildren().length&&O.ChgOrchestrationTreeModel._modelEvents.publish({event:"treeEmpty"})},handleForMaturityUpdate:function(e){if(e){let t=JSON.parse(e),i=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();S.getHandleForMaturityUpdate(t,i),O.treeDocument.prepareUpdate(),S.getUpdatedApprovalStatusColumn(t,i).then((function(){O.treeDocument.pushUpdate()}))}},handleForApplicabilityUpdate:async function(e){if(e&&O.ChgOrchestrationDataGridModel){let t=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes(),i=JSON.parse(e);S.handleForApplicabilityUpdateEvent(t,i),O.treeDocument.prepareUpdate(),O.treeDocument.pushUpdate()}}};return O.globalSubscribeForCOOrchestrationView(),O})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgDataProcess"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u){"use strict";return{showRMBMenuOnGridForAffectedItemsCell:async function(e){let t=[];return new Promise((function(n,o){const a=[];let l=!1,d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),c=[],p=[],u=[];d.forEach((e=>{c.push(e.options.grid.AffectedItemInformation[0].id),p.push(e.options.grid.AffectedItemInformation[0].serviceBasedObjId),e.options.grid.AffectedItemInformation[0].sourceType&&"CSD"!=e.options.grid.AffectedItemInformation[0].sourceType&&u.push(e.options.grid.AffectedItemInformation[0].id)})),d.length>1&&(l=!0);const g=s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),h=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].id,m=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].type,C=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].name,f=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].displayType,v=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].serviceBasedObjId,D=[];D.push(m),e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].kind&&""!=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].kind&&D.concat(e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].kind);const I={objectId:null!=v?v:h,objectType:m,objectTaxonomies:D,displayName:C,displayType:f,facetName:"dependency"};let w={};w.objectID=h,w.objectTitle=C,w.objectType=m,w.serviceId="3DSpace",w.label=e.cellInfos.nodeModel.options.grid.title,w.changeType="Investigation Request",w.facet="Affected Items",w.action="IR>Change Impacts";const _=g.openWith(I);let b={};if(b.objectID=h,b.objectTitle=C,l){u.length>0&&a.push(i.createPropertyPushItem(u));let e={};e.selectedNodeIDs=u,a.push(r.getRelationalExplorerMenu(e)),u.length,n(a)}else{u.length>0&&a.push(i.createPropertyPushItem(u));let e={};e.selectedNodeIDs=u,a.push(r.getRelationalExplorerMenu(e)),_.then((e=>{if(e&&a.push(e),t.length>0)for(let e=0;e<t[0].length;e++)a.push(t[0][e]);n(a)}))}}))},showRMBMenuOnGridForDispositionCell:async function(e,t){let o=[];var a=!1;try{e.cellInfos.nodeModel.options.grid;e.cellInfos.nodeModel.options.grid.approvalStatusModel&&await p.getColumnApprovalStatusMenu(e.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){o.push(e)}))}catch(e){console.error(e)}let s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),l=[];s.forEach((e=>{l.push(e.options.grid.dispositionId)})),s.length>1&&(a=!0);var d=new Promise((function(t,s){const d=[];let p,u=e.cellInfos.nodeModel.options.grid,g={model:e.cellInfos.nodeModel.getTreeDocument(),dispositionID:u.dispositionId,approversList:e.cellInfos.nodeModel.options.grid.dispositionInformation?e.cellInfos.nodeModel.options.grid.dispositionInformation[0].approvers:[]};if(u.dispositionId){p=u.dispositionId;let s=[];if(s.push(p),1==a){if(l.length>0){let e={};e.selectedNodeIDs=l,d.push(i.createPropertyPushItem(l)),d.push(r.getRelationalExplorerMenu(e))}}else{let t={};t.selectedNodeIDs=s,d.push(i.createPropertyPushItem(s)),d.push(r.getRelationalExplorerMenu(t)),"true"===u.dispositionAccessBits[0]["Transfer Ownership"]&&"true"===u.dispositionAccessBits[0].Move&&d.push(c.getDispositionTransferMenu(e)),"true"===n.getGlobalVariable().isFullLicence&&"true"===u.dispositionInformation[0].dispositionAccessBits[0]["Manage Approver"]&&d.push(c.getManageApprovers(g))}if(o.length>0)for(let e=0;e<o[0].length;e++)d.push(o[0][e]);t(d)}else t(d)}));return d},showRMBMenuOnGridForResolvedByCell:function(e){return new Promise((function(t,o){const a=[];let l=e.cellInfos.nodeModel.options.grid.dispositionInformation[0];if(l.resolvedByInformation&&l.resolvedByInformation[0]){let o;if(l.resolvedByInformation[0].indexResolvedBy&&l.resolvedByInformation[0].indexResolvedBy[0])if(o=l.resolvedByInformation[0].indexResolvedBy[0],null!=o){let d=s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),p=(l.dispositionId?l.dispositionId:l.dispostionId,o.resolvedById),u=o.resolvedByName,g=o.resolvedByType,h=[];h.push(p);let m={};m.selectedNodeIDs=h,a.push(i.createPropertyPushItem(h)),a.push(r.getRelationalExplorerMenu(m));let C={node:e.cellInfos.nodeModel,resolvedByIds:h,funcationality:"removeResolvedBy"};"true"==n.getGlobalVariable().isFullLicence&&l&&"true"===l.dispositionAccessBits[0]["Manage Resolved By"]&&a.push(c.removeResolvedBy(C));let f={objectId:p,objectType:g,displayName:u,displayType:g},v=[],D=d.openWith(f);v.push(D),Promise.all(v).then((function(e){console.log(e),e[0]&&a.push(e[0]),t(a)}))}else t(a);else(l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]||l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0])&&(l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy=(l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy,l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy),u.resolvedByInformationForCrossServiceAndRecents(l.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy).then((function(o){if(null!=o){let d=s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),p=(l.dispositionId,o[0].resolvedById),u=o[0].resolvedByName,g=o[0].resolvedByType,h=[];h.push(p);let m={};m.selectedNodeIDs=h,a.push(i.createPropertyPushItem(h)),a.push(r.getRelationalExplorerMenu(m));let C={node:e.cellInfos.nodeModel,resolvedByIds:h,funcationality:"removeResolvedBy"};"true"==n.getGlobalVariable().isFullLicence&&l&&"true"===l.dispositionAccessBits[0]["Manage Resolved By"]&&a.push(c.removeResolvedBy(C));let f={objectId:p,objectType:g,displayName:u,displayType:g},v=[],D=d.openWith(f);v.push(D),Promise.all(v).then((function(e){console.log(e),e[0]&&a.push(e[0]),t(a)}))}else t(a)})))}else t(a)}))}}})),define("DS/ENOChgGovernanceUX/scripts/components/tab/ChgGovernanceTab",["UWA/Core","DS/CoreEvents/ModelEvents","DS/Controls/Tab","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u){"use strict";return{createGovTab:function(t,n){for(var o=new i({displayStyle:"strip"}),g=0;g<n.tabs.length;g++)"crApprovals"!=n.tabs[g].value&&"caApprovals"!=n.tabs[g].value&&"coApprovals"!=n.tabs[g].value&&1==n.tabs[g].isSelected&&n.targetHeader&&n.targetHeader.setStyle("display","none");o.addEventListener("tabButtonClick",(function(e){this._pathChangeOrdersDetails=[s._KEY,s._VIEWS_PREFERENCES,s._CHANGE_ORDERS_DETAILS],"coOrchestration"==e.options.value?(a.updateTab(this._pathChangeOrdersDetails,"ChangeOrchestration"),n.targetHeader.setStyle("display","none"),c.publish(`coOrchestration:${widget.id}`,{})):"coMembers"==e.options.value?(a.updateTab(this._pathChangeOrdersDetails,"Members"),n.targetHeader.setStyle("display","none"),c.publish(`coMembers:${widget.id}`,{})):"coApprovals"==e.options.value?(a.updateTab(this._pathChangeOrdersDetails,"Approvals"),n.targetHeader.setStyle("display","inline-block"),c.publish(`coApprovals:${widget.id}`,n),r.clearTags()):a.updateTab(this._pathChangeOrdersDetails,"ChangeOrchestration")})),o.addEventListener("tabButtonClick",(function(e){this._pathChangeRequestsDetails=[s._KEY,s._VIEWS_PREFERENCES,s._CHANGE_REQUESTS_DETAILS],"crChangeOrchestration"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crOrchestration"),n.targetHeader.setStyle("display","none"),c.publish(`crOrchestration:${widget.id}`,{})):"crMembers"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crMembers"),n.targetHeader.setStyle("display","none"),c.publish(`crMembers:${widget.id}`,{})):"crAffectedItems"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crAffectedItems"),n.targetHeader.setStyle("display","none"),c.publish(`crAffectedItems:${widget.id}`,{})):"crAssessment"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crAssessment"),n.targetHeader.setStyle("display","none"),c.publish(`crImpactAnalysis:${widget.id}`,{})):"crApprovals"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crApprovals"),c.publish(`crApprovals:${widget.id}`,n),l.clearTags(),n.targetHeader.setStyle("display","inline-block")):a.updateTab(this._pathChangeRequestsDetails,"crOrchestration")})),o.addEventListener("tabButtonClick",(function(t){if(this._pathChangeActionsDetails=[s._KEY,s._VIEWS_PREFERENCES,s._CHANGE_ACTIONS_DETAILS],"caProposedChange"==t.options.value){a.updateTab(this._pathChangeActionsDetails,"ProposedChange"),n.targetHeader.setStyle("display","none");let t=p.getUserPreference(u.keys.viewKeys.PROPOSED_DEF_VIEW);e.is(t)&&"DGV"===t?c.publish(`caProposedChangesDGV:${widget.id}`,{}):c.publish(`caProposedChanges:${widget.id}`,{})}else if("caFlowdown"==t.options.value)a.updateTab(this._pathChangeActionsDetails,"Flowdown"),c.publish(`caFlowdownRCDGV:${widget.id}`,{});else if("caRealizedChange"==t.options.value){a.updateTab(this._pathChangeActionsDetails,"RealizedChange"),n.targetHeader.setStyle("display","none");let t=p.getUserPreference(u.keys.viewKeys.REALIZED_DEF_VIEW);e.is(t)&&"DGV"===t?c.publish(`caRealizedChangesDGV:${widget.id}`,{}):c.publish(`caRealizedChanges:${widget.id}`,{})}else"caMembers"==t.options.value?(a.updateTab(this._pathChangeActionsDetails,"Members"),n.targetHeader.setStyle("display","none"),c.publish(`caMembers:${widget.id}`,{})):"caApprovals"==t.options.value?(a.updateTab(this._pathChangeActionsDetails,"Approvals"),n.targetHeader.setStyle("display","inline-block"),c.publish(`caApprovals:${widget.id}`,n),d.clearTags()):a.updateTab(this._pathChangeActionsDetails,"ProposedChange")})),o.addEventListener("tabButtonClick",(function(e){this._pathInvestigationRequestsDetails=[s._KEY,s._VIEWS_PREFERENCES,s._INVESTIGATION_REQUESTS_DETAILS],"irAffectedItems"==e.options.value?(a.updateTab(this._pathInvestigationRequestsDetails,"irAffectedItems"),c.publish(`irAffectedItems:${widget.id}`,{})):"irMembers"==e.options.value?(a.updateTab(this._pathInvestigationRequestsDetails,"irMembers"),c.publish(`irMembers:${widget.id}`,{})):"irDispositions"==e.options.value?(a.updateTab(this._pathInvestigationRequestsDetails,"irDispositions"),c.publish(`irDispositions:${widget.id}`,{})):"irAttachments"==e.options.value?(a.updateTab(this._pathInvestigationRequestsDetails,"irAttachments"),c.publish(`irAttachments:${widget.id}`,{})):"irIssues"==e.options.value?(a.updateTab(this._pathInvestigationRequestsDetails,"irIssues"),c.publish(`Issue:${widget.id}`,{})):a.updateTab(this._pathInvestigationRequestsDetails,"irAffectedItems")})),n.tabs.forEach((function(e){o.add(e)})),Array.isArray(o.value)&&0==o.value.length&&(o.value=["caMembers"]),c.unsubscribe("ECM_GOV_Flowdown_ON:"+(widget?widget.id:"")),c.subscribe("ECM_GOV_Flowdown_ON:"+(widget?widget.id:""),(function(e){let t=[s._KEY,s._VIEWS_PREFERENCES,s._CHANGE_ACTIONS_DETAILS];o.value=["caFlowdown"],a.updateTab(t,"Flowdown")})),c.subscribe("openIRAttachmentsTab",(function(e){let t=[s._KEY,s._VIEWS_PREFERENCES,s._INVESTIGATION_REQUESTS_DETAILS];o.value=["irAttachments"],a.updateTab(t,"irAttachments"),c.publish(`irAttachments:${widget.id}`,{})})),c.subscribe("openIRAffectedItemsTab",(function(e){let t=[s._KEY,s._VIEWS_PREFERENCES,s._INVESTIGATION_REQUESTS_DETAILS];o.value=["irAffectedItems"],a.updateTab(t,"irAffectedItems"),c.publish(`irAffectedItems:${widget.id}`,{})})),c.subscribe("openIRIssuesTab",(function(e){let t=[s._KEY,s._VIEWS_PREFERENCES,s._INVESTIGATION_REQUESTS_DETAILS];o.value=["irIssues"],a.updateTab(t,"irIssues"),c.publish(`irIssues:${widget.id}`,{})})),o.inject(t)}}})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsView",["DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/Menu/ContextualMenu","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b){"use strict";return n.extend({init:function(e){this._parent(e);var t=this;this.options=e,this.options.custom_view_options={settings:{url:i.getGlobalVariable().get3DSpaceURL(),securityContext:i.getGlobalVariable().getSecurityContext(),isNative:i.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o;var n=this._modelEvents;this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),v.subscribe("idcard-header-minified",(function(e){e.value?(t.chgGridViewContainer.getElement(".content-dispositions-grid-div").removeClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-grid-div").addClassName("minified-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-tile-div").removeClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-tile-div").addClassName("minified-header-height")):(t.chgGridViewContainer.getElement(".content-dispositions-grid-div").addClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-grid-div").removeClassName("minified-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-tile-div").addClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-tile-div").removeClassName("minified-header-height"))})),widget.addEvents({onSearch:function(e){n.publish({event:"ir-disp-DataGrid-on-search",data:{query:e},context:t})},onResetSearch:function(e){n.publish({event:"ir-disp-DataGrid-on-reset-search",data:{query:e},context:t})}})},render:function(){try{var e=this.processColumns(),t=this,n={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,placeholder:h.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgIRDispositionsGrid",showContextualMenuColumnFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>=0&&0==e.cellInfos.columnID)return f.showRMBMenuOnGridForDispositionCell(e,t.id).then((function(e){return e}));if(e.cellInfos.rowID>=0&&8==e.cellInfos.columnID)return f.showRMBMenuOnGridForResolvedByCell(e).then((function(e){return e}));if(e.cellInfos.rowID>=0&&4==e.cellInfos.columnID)return f.showRMBMenuOnGridForAffectedItemsCell(e).then((function(e){return e}));if(e.cellInfos.rowID>=0)return f.showRMBMenuOnGridForDispositionCell(e).then((function(e){return e}));i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){u.readyDragContent(e,t)},onDragStartCell:function(e,t){t.draggedNodes&&1==t.draggedNodes.length&&8==t.columnID?D.readyDragContentForResolvedBy(e,t):u.readyDragContent(e,t)}};n=UWA.merge(n,this.options);var o={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new r(n),this.chgGridView.cellSelection="none",this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){D.onCustomViewsSave(e,i,t.options.custom_view_options)},this.options.treeDocument.onNodeModelUpdate((function(e){i.getGlobalVariable().total_ia_row&&t.chgGridView.updateRenderedRow(i.getGlobalVariable().total_ia_row._getRowID(),{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1})})),this._modelEvents.unsubscribe({event:"ir-disp-DataGrid-on-search"}),this._modelEvents.subscribe({event:"ir-disp-DataGrid-on-search"},(function(e){if("false"==i.getGlobalVariable().slidePanelTagger){var n=e.query;if(n){var o=t.chgGridView.getTreeDocument();o.withTransactionUpdate((function(){o.getAllDescendants().forEach((function(e){var t=e.options.grid.name.toLowerCase().contains(n.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}))}))}}})),this._modelEvents.subscribe({event:"ir-disp-DataGrid-on-reset-search"},(function(e){var i=t.chgGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new c(o);var v={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return f.showRMBMenuOnGridForDispositionCell(e).then((function(e){return e}))}};this.tileView.onContextualEvent=v;let N={typeForDisposition:{stdTemplate:"enumCombo",semantics:{possibleValues:{documentKey:h.CHG_GOV_Investigation_Request_Disposition_Type_Documentation,fixKey:h.CHG_GOV_Investigation_Request_Disposition_Type_Fix,notFixKey:h.CHG_GOV_Investigation_Request_Disposition_Type_No_Fix,notImpactedTypeKey:h.CHG_GOV_Investigation_Request_Disposition_Type_Not_Impacted,noneKey:h.CHG_GOV_Investigation_Request_Disposition_Type_None},valueType:"enumValueToProperty"}}};this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations(N),p.toolbar=this.chgGridView.setToolbar(p.writetoolbarDefinition(this.options)),this.toolbar=p.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",(function(){t.chgGridView.buildStatusBar([{type:g.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:h.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:g.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:h.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:g.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:h.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:g.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:h.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])})),this.chgGridView.registerReusableCellContent({id:"RevColId",buildContent:function(){return new UWA.Element("div",{class:"RevColId",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}})}}),this.chgGridView.registerReusableCellContent({id:"revEmptyColId",buildContent:function(){return new UWA.Element("div",{styles:{"padding-left":"5px"}})}}),e[1].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("dispositionRevision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.chgGridView.reuseCellContent("RevColId");i.setContent(e.nodeModel.getAttributeValue("dispositionRevision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.chgGridView.reuseCellContent("revEmptyColId"))},t.chgGridView.addEventListener(s.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.chgGridView.onDropCell=function(e,t){if(8==t.columnID)if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.dataTransfer&&e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="copy"),t.cellModel.contains("chgIRAffectedAddExistingCADragAndDropResolvedby")){var i=e.dataTransfer.getData("text");if(t.nodeModel.options.grid&&t.nodeModel.options.grid.dispositionId){let e={node:t.nodeModel,data:i,functionality:"dragAndDropResolvedBy"};_.dragAndDropResolvedBy(e)}else d.warn(h.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else d.warn(h.CHG_GOV_Investigation_Request_Disposition_ResolvedBy_Already_There);return!0};var b=t.chgGridView.getTreeDocument().getXSO(),S=a.debounce((function(e){e&&e.length&&(e=e[0]);var i=t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:h.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:h.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:h.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:h.CHG_GOV_StatusBar_SelectedItems+0}}));var o=b.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)}),5);b.onPostAdd(S),b.onPostRemove(S),t.tileView.addEventListener(s.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount)console.log("AffectedItem_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel});else if(1==e.multipleHitCount)if(i&&5==i.columnID){var n={};n.cellInfos=i;let e=n.cellInfos.nodeModel.options.grid.dispositionInformation,t=this.options.contextDetails.id;e&&e[0]&&e[0].dispostionId&&e[0].dispositionAccessBits&&("true"===e[0].dispositionAccessBits[0].Promote||"true"===e[0].dispositionAccessBits[0].Demote)&&D.executeMaturityForDisposition(n,t,_.getHandleForDispostionMaturity)}else if(i&&8==i.columnID){if(console.log("Create Change Action Called"),null==i.nodeModel.options.grid||""==i.nodeModel.options.grid.id)d.warn(h.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else if(e.target.className.contains("chgIRAffectedCreateNewCAResolvedby"))if(console.log("New CA resolved by create called"),null==i.nodeModel.options.grid.dispositionId||""==i.nodeModel.options.grid.dispositionId)d.warn(h.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else{var o={commandInfo:{type:"Investigation Request",facet:"Disposition",action:"IR>Disposition>ResolvedBy>Create Change Action"}};w.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:o});let e={node:t.options.treeDocument.getSelectedNodes()[0],invstigationRequestId:t.options.id,funcationality:"addResolvedBy"};_.createResolvedByInDispositionIR(e)}else if(e.target.className.contains("chgIRAffectedCreateAddExistingCAResolvedby")){o={commandInfo:{type:"Investigation Request",facet:"Disposition",action:"IR>Disposition>ResolvedBy>Add Existing Change Action or Task"}};w.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:o}),console.log("Add existing called ResolvedBy ");let e={node:t.options.treeDocument.getSelectedNodes()[0],invstigationRequestId:t.options.id,funcationality:"addExistingResolvedBy"};_.addExistingResolvedByHandler(e)}else if(e.target.className.contains("resolvedby_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};I.buildAndDisplayContextualMenu(e.target,t)}}else if(i&&7==i.columnID){if(e.target.className.contains("chgIRDispositionAddApprover")){e.target.getOffsets().x,e.target.getOffsets().y;require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout"],(function(e){let n={id:t.options.contextDetails.id,type:t.options.contextDetails.isKindOfType,model:t.options.treeDocument,objectTitle:t.options.contextDetails.title,dispositionID:i.nodeModel._options.grid.dispositionId?i.nodeModel._options.grid.dispositionId:void 0};e.addApproverHandler(n)}))}}else if(i&&4==i.columnID){if(e.target.className.contains("affectedItem_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};I.buildAndDisplayContextualMenu(e.target,t)}else if("proposed_resolution_multiple"===e.target.className){var a=i.nodeModel.options.grid;_.displayAffectedDGV(a,this.options.target)}}else i&&1===i.columnID&&"RevColId"===e.target.className&&D.launchVersionExplorer({id:"NEW_MIB"==i.nodeModel.options.grid.sourceType?i.nodeModel.options.grid.serviceBasedObjId:i.nodeModel.options.grid.dispositionId,type:h.CHG_GOV_AffectedItems_Disposition,name:i.nodeModel.options.grid.name})},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-dispositions-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-dispositions-grid-div"});var y=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-dispositions-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"disposition-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new m({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new C({title:h.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(y),this.toolbar.inject(y);var E=UWA.createElement("div",{class:"content-dispositions-grid-div expanded-header-height"}),O=UWA.createElement("div",{class:"content-dispositions-tile-div dispositionsTileView expanded-header-height"}),G=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:h.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(G),this.chgGridView.inject(E),this.tileView.inject(O),G.inject(O),this.chgGridViewContainer.addContent(y),this.chgGridViewContainer.addContent(E),this.chgGridViewContainer.addContent(O),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=E,this.loader=(new l).inject(this.options.target)}catch(e){console.log(e)}},loadCustomColumns:function(){let i=t.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(i){let t=JSON.parse(i);t&&e.restoreCustomViews(t,this.options.custom_view_options)}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"ir-disposition-item-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"ir-disposition-item-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/view/ChgIDCardHeaderBuilder",["UWA/Class/View","UWA/Core","DS/Handlebars/Handlebars","DS/ResizeSensor/js/ResizeSensor","DS/UIKIT/DropdownMenu","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/IDCardHeaderMain.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/AttributesPartial.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/MinifiedAttributesPartial.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/AttributeSectionPartial.html","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChangeIDCard","DS/PlatformAPI/PlatformAPI","DS/Controls/Loader","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ChangeMaturityWidget/ChangeMaturityWidget","DS/Controls/TooltipModel","DS/ENOChgRouter5/scripts/ChgRouter","css!DS/ChangeMaturityWidget/ChangeMaturityWidget","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/components/ChgCommonDailog","DS/UIKIT/Iconbar","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S){"use strict";var y=e.extend({name:"chg-id-card",className:function(){return this.getClassNames("-container")},domEvents:{"click .toggle-minified-icon":"toggleMinified","click .attribute-value":"_triggerClickOnAttributeEvent"},init:function(e){console.log("inside init ChgIDCardHeaderBuilder");this._parent.call(this,e)},setup:function(){var e=this;e.container&&(e.container.empty(),e.container.destroy()),e.modelEvents=e.model.get("modelEvents"),e.modelEventsTokens=[],e._subscribeToModelEvents(),e._subscribeToPlatformEvents();var t=e._parseAttributes(e.model.get("attributes"),e.model.get("attributesLayout"));e.templateOptions={withHomeButton:void 0!==e.model.get("withHomeButton")&&e.model.get("withHomeButton"),withExpandCollapseButton:void 0!==e.model.get("withExpandCollapseButton")&&e.model.get("withExpandCollapseButton"),withActionsButton:void 0===e.model.get("withActionsButton")||e.model.get("withActionsButton"),withInformationButton:void 0!==e.model.get("withInformationButton")&&e.model.get("withInformationButton"),withToggleMinifiedButton:void 0!==e.model.get("withToggleMinifiedButton")&&e.model.get("withToggleMinifiedButton"),showBackButton:void 0!==e.model.get("showBackButton")&&e.model.get("showBackButton"),thumbnail:e.model.get("thumbnail"),smallIcon:e.model.get("thumbnail"),title:e.model.get("title"),version:"-"!=e.model.get("version")?e.model.get("version"):"",attributes:t,dropdown:void 0!==e.model.get("dropdown")&&e.model.get("dropdown"),freezones:e.model.get("freezones"),minified:e.model.get("minified"),nls:d.templateNLS},void 0===e.model.get("customEvents")&&e.model.set("customEvents",{}),e.modelOnChangeListener=function(e){},e.model.addEvent("onChange",e.modelOnChangeListener)},render:function(){var e=this,t=i.compile(a);i.compile(s),i.compile(r);i.registerPartial("Attributes",s),i.registerPartial("MinifiedAttributes",r),i.registerPartial("AttributeSection",l),e.container.setHTML(t(e.templateOptions)),e.addLoaderInAttributes(e.templateOptions.attributes),e.addCustomTooltipsInAttributes(e.templateOptions.attributes),e.templateOptions.withHomeButton||e.templateOptions.withExpandCollapseButton||e.templateOptions.showBackButton||(e.container.addClassName("no-sidebar-buttons"),e.container.getElement(".sidebar-buttons").addClassName("hidden")),e.templateOptions.withActionsButton&&e.templateOptions.dropdown&&(e.templateOptions.dropdown.target=e.container.getElement(".actions-menu-icon"),e.templateOptions.dropdown.items.length?(e.container.getElement(".actions-menu-icon").removeClassName("hidden"),e.templateOptions.dropdownElement=new o(e.templateOptions.dropdown)):e.container.getElement(".actions-menu-icon").addClassName("hidden"));var n=e.model.get("freezones");void 0!==n&&n.length>0&&n.forEach((function(t,i){var n=e.container.getElement(".free-zone-"+i);if("string"==typeof t){var o=D.escapeHTML(t);n.innerHTML=o,""!=t&&(n.tooltipInfos=new m({title:v.CHG_Common_Dialog_Description,longHelp:t,mouseRelativePosition:!1,allowUnsafeHTMLLongHelp:!1,position:"left",moreHelpCB:function(){C.getDependency("xChangeApp")._applicationChannel.publish({event:"information-panel-open",data:null})}}))}else t instanceof HTMLElement?n.appendChild(t):void 0!==t.render&&t.render().inject(n)})),e.requestID=window.requestAnimationFrame((function(){e.resize()})),e.templateOptions.minified&&e.container.addClassName("minified");var d=e.getMaturityContainer();return e.createMaturitySpan(d),e},addLoaderInAttributes:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){var o,a,s,r=i[n];if(r.showLoader)if(r.displayWhenMinified?(o=this.container.getElements("#"+r.command)[0].getElementsByClassName("attribute-value")[0].firstChild,a=this.container.getElements("#"+r.command)[1].getElementsByClassName("attribute-value")[0].firstChild):a=this.container.getElements("#"+r.command)[0].getElementsByClassName("attribute-value")[0].firstChild,(s=new p).height="15",s.inject(a),s.on(),o)(s=new p).height="15",s.inject(o),s.on()}},addCustomTooltipsInAttributes:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){i[n].valueCustomTooltip}},createMaturitySpan:function(e,t){var i=this;if(!i.maturityCmd||"true"==t){i.stateDiv=UWA.createElement("div",{styles:{overflow:"hidden",height:"100%"},class:"maturity-container",id:i.model.get("isKindOfType")+"Maturity"});var n={securityContext:{SecurityContext:g.getGlobalVariable().getSecurityContext(),tenant:g.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}};i.maturityCmd&&"true"!=t||(i.maturityCmd=new u),i.maturityCmd.executeCompactViewAsync(widget,i.stateDiv,n,i.model.id).then((function(){var t=i.maturityCmd.changeMaturityWidget.currentState,n=i.maturityCmd.changeMaturityWidget.current,o={valueDisplay:t,valueActual:n};i.model.set("currentState",o),console.log("Maturity  updated"),i.modelEvents.publish({event:"maturity-updated",data:o});let a={valueDisplay:t,valueActual:n,id:i.model.id};c.publish("Change-Maturity-Update",a),i.createMaturitySpan(e,"true")}))}if(e){i.model.get("accessBits");if(i.model.get("onHold")){var o="["+v.CHG_GOV_DataGrid_Column_Maturity_Hold+"]";e.innerText=i.model.get("currentState").valueDisplay+" "+o,e.classList.remove("type-hyperlink")}else if(e.innerText="",i.stateDiv.inject(e),e.classList.add("type-hyperlink"),this.container.hasClassName("minified"))if("Complete"===i.model.get("currentState").valueActual&&"ChangeOrder"!=i.model.get("isKindOfType")){const e=i.container.getElement(".attributes-section-when-minified-container > .attribute-section#maturity .wrapper");null!=e&&(e.style.paddingTop="10px")}else if("Implemented"===i.model.get("currentState").valueActual&&"ChangeOrder"===i.model.get("isKindOfType")){const e=i.container.getElement(".attributes-section-when-minified-container > .attribute-section#maturity .wrapper");null!=e&&(e.style.paddingTop="10px")}else if("InvestigationRequest"===i.model.get("isKindOfType")){const e=i.container.getElement(".attributes-section-when-minified-container > .attribute-section#maturity .wrapper");null!=e&&(e.style.paddingTop="10px")}}if("InvestigationRequest"===i.model.get("isKindOfType")){let e=S("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"),t=S("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil");console.log(t),1!=e.refreshFlag&&1!=t.refreshFlag||!i.model._attributes.id?i.createMaturitySubstateSpan(this.container.getElementsByClassName("attribute-section")[1]):_.getInvestigationRequestInfo(i.model._attributes.id).then((function(n){let o=n.data[0].allowedTransitionList[0].transitionStates;1==e.refreshFlag?(i.createMaturitySubstateSpanForRefresh(o,e.refreshFlag),e.refreshFlag=!1):(i.createMaturitySubstateSpanForRefresh(o,t.refreshFlag),t.refreshFlag=!1)}))}},createMaturitySubstateSpanForRefresh:async function(e,t){var i=[],n=this,o=!1;let a;if(e&&e.length<1&&"true"==n.model._attributes.accessBits.Promote&&(a=!0),e&&e.length>0){o=!0;a=!1,e.map((e=>{var t={chgPhysicalId:n.model._attributes.id,chgType:n.model._attributes.isKindOfType,btnId:e,boxTitle:v.CHG_IR_Substate_Dialog_Box_Title,subTitle:v.CHG_IR_Substate_Dialog_Box_SubTitle,txtPlaceHolder:v.CHG_IR_Substate_Dialog_Box_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};i.push({text:v["CHG_IR_SUBSTATE_Transition_"+e.replace(" ","")],options:t})}))}DoneCallback=function(e){var t=e.btnId;e.chgType;if(t){console.log("btnId",t);var i=[];i.push({transitionState:e.btnId,comment:e.userComment}),_.changeBusinessState(e.chgPhysicalId,i).then((function(e){I.closeDialog(t),S("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}))}},CancelCallback=function(e){I.closeDialog(e)},this.iconDropDown=new w({items:[{fonticon:"chevron-down",text:v.CHG_IR_Substate_Dropdown_Tooltip,content:{type:"dropdownmenu",options:{items:i,events:{onClick:function(e,t){I.launchInfoDailog(t.options)}}}}}]}),this.iconbarContainer=UWA.createElement("div",{class:"InvestigationRequestBusinessState"}),this.spanContainer=await b.getBusinessStateForSummaryGrid(this.model._attributes.currentState.valueActual,this.model._attributes.currentBusinessState),this.iconbarHourglassPlaceholder=UWA.createElement("div",{class:"wux-button-icon-placeholder",title:v.CHG_IR_Substate_Hourglass_Tooltip}),this.iconbarHourglass=UWA.createElement("div",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-hourglass wux-ui-3ds-lg",styles:{color:"#77797c","padding-bottom":"2px"}}),this.iconbarHourglass.inject(this.iconbarHourglassPlaceholder),t&&this.container.getElements("#maturitySubstate")[1].getElementsByClassName("InvestigationRequestBusinessState")[0].remove(),this.templateOptions.minified&&0==this.container.getElements("#maturitySubstate")[0].getElementsByClassName("InvestigationRequestBusinessState").length?(this.iconDropDown.inject(this.iconbarContainer),this.container.getElements("#maturitySubstate")[0].getElementsByClassName("attribute-value")[0].style.display="inline-flex",this.container.getElements("#maturitySubstate")[0].getElementsByClassName("attribute-value")[0].firstChild.remove(),this.spanContainer.getElement("span").style.padding="1px 5px",this.spanContainer.getElement("span").style.display="inline",this.spanContainer.inject(this.container.getElements("#maturitySubstate")[0].getElementsByClassName("attribute-value")[0])):0==this.container.getElements("#maturitySubstate")[1].getElementsByClassName("InvestigationRequestBusinessState").length&&(o&&this.iconDropDown.inject(this.iconbarContainer),a&&this.iconbarHourglassPlaceholder.inject(this.iconbarContainer),this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0].style.display="inline-flex",this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0].firstChild.remove(),this.spanContainer.inject(this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0]),o?this.iconbarContainer.inject(this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0]):a&&(this.iconbarContainer.setStyles({top:"0px"}),this.iconbarContainer.inject(this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0])))},createMaturitySubstateSpan:async function(){var e=[],t=this,i=!1;let n;if(t.model._attributes.transitionStates&&t.model._attributes.transitionStates.length<1&&"true"==t.model._attributes.accessBits.Promote&&(n=!0),t.model._attributes.transitionStates&&t.model._attributes.transitionStates.length>0){i=!0;n=!1,t.model._attributes.transitionStates.map((i=>{var n={chgPhysicalId:t.model._attributes.id,chgType:t.model._attributes.isKindOfType,btnId:i,boxTitle:v.CHG_IR_Substate_Dialog_Box_Title,subTitle:v.CHG_IR_Substate_Dialog_Box_SubTitle,txtPlaceHolder:v.CHG_IR_Substate_Dialog_Box_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};e.push({text:v["CHG_IR_SUBSTATE_Transition_"+i.replace(" ","")],options:n})}))}DoneCallback=function(e){var t=e.btnId;e.chgType;if(t){console.log("btnId",t);var i=[];i.push({transitionState:e.btnId,comment:e.userComment}),_.changeBusinessState(e.chgPhysicalId,i).then((function(e){I.closeDialog(t),S("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}))}},CancelCallback=function(e){I.closeDialog(e)},this.iconDropDown=new w({items:[{fonticon:"chevron-down",text:v.CHG_IR_Substate_Dropdown_Tooltip,content:{type:"dropdownmenu",options:{items:e,events:{onClick:function(e,t){I.launchInfoDailog(t.options)}}}}}]}),this.iconbarContainer=UWA.createElement("div",{class:"InvestigationRequestBusinessState"}),this.spanContainer=await b.getBusinessStateForSummaryGrid(this.model._attributes.currentState.valueActual,this.model._attributes.currentBusinessState),this.iconbarHourglassPlaceholder=UWA.createElement("div",{class:"wux-button-icon-placeholder",title:v.CHG_IR_Substate_Hourglass_Tooltip}),this.iconbarHourglass=UWA.createElement("div",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-hourglass wux-ui-3ds-lg",styles:{color:"#77797c","padding-bottom":"2px"}}),this.iconbarHourglass.inject(this.iconbarHourglassPlaceholder),this.templateOptions.minified&&0==this.container.getElements("#maturitySubstate")[0].getElementsByClassName("InvestigationRequestBusinessState").length?(this.iconDropDown.inject(this.iconbarContainer),this.container.getElements("#maturitySubstate")[0].getElementsByClassName("attribute-value")[0].style.display="inline-flex",this.container.getElements("#maturitySubstate")[0].getElementsByClassName("attribute-value")[0].firstChild.remove(),this.spanContainer.getElement("span").style.padding="1px 5px",this.spanContainer.getElement("span").style.display="inline",this.spanContainer.inject(this.container.getElements("#maturitySubstate")[0].getElementsByClassName("attribute-value")[0])):0==this.container.getElements("#maturitySubstate")[1].getElementsByClassName("InvestigationRequestBusinessState").length&&(i&&this.iconDropDown.inject(this.iconbarContainer),n&&this.iconbarHourglassPlaceholder.inject(this.iconbarContainer),this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0].style.display="inline-flex",this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0].firstChild.remove(),this.spanContainer.inject(this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0]),i?this.iconbarContainer.inject(this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0]):n&&(this.iconbarContainer.setStyles({top:"0px"}),this.iconbarContainer.inject(this.container.getElements("#maturitySubstate")[1].getElementsByClassName("attribute-value")[0])))},createNewAttributes:function(e){for(var t=this.model.get("attributes"),i=this.model.get("accessBits"),n=0;n<t.length;n++){var o=(l=t[n]).accessBit;if(o){var a=i[o];l.editable="false"!=a}}for(var s=e.attributes,r=0;r<t.length;r++){var l=t[r];for(var c in s)c==l.command&&(null!=s[c].editable&&(l.editable=s[c].editable),null!=s[c].displayWhenMinified&&(l.displayWhenMinified=s[c].displayWhenMinified),null!=s[c].fieldNLS&&(l.name=s[c].fieldNLS),null!=s[c].valueActual&&(l.valueActual=s[c].valueActual),null!=s[c].valueDisplay&&(l.valueDisplay=s[c].valueDisplay,l.valueTooltip=s[c].valueDisplay),null!=s[c].valueTooltip&&(l.valueTooltip=s[c].valueTooltip),null!=s[c].valueCustomTooltip&&(l.valueTooltip="",l.valueCustomTooltip=s[c].valueCustomTooltip),1==s[c].showLoader?(l.valueDisplay="",l.valueActual="",l.valueDisplay="",l.valueTooltip=d.loading):0==s[c].showLoader&&(l.showLoader=!1))}return t},createNewMenu:function(){var e=[],t=[],i=this.model.get("accessBits");this.templateOptions.dropdown.items.concat(this.templateOptions.dropdown.hiddenItems).forEach((function(n,o){"true"==i[n.accessBit]?e.unshift(n):t.push(n)})),this.templateOptions.dropdown.items=e,this.templateOptions.dropdown.hiddenItems=t},reRenderHeaderNonAttributeFields(e){var t=this;e.title&&(t.container.getElement(".name").innerHTML=e.title,t.container.getElement(".name").title=e.title),e.freezones&&e.freezones.constructor===Array&&e.freezones.forEach((function(e,i){var n=t.container.getElement(".free-zone-"+i);"string"==typeof e?n.innerHTML=e:e instanceof HTMLElement?n.appendChild(e):void 0!==e.render&&e.render().inject(n)}))},reRenderHeaderAttributes:function(e){var t=this;t.templateOptions.attributes=t._parseAttributes(e,t.model.get("attributesLayout"));var n=i.compile(s),o=i.compile(r);t.container.getElement(".attributes-placeholder").innerHTML=n({attributes:t.templateOptions.attributes}),t.container.getElement(".attributes-section-when-minified-container").innerHTML=o({attributes:t.templateOptions.attributes}),t.addLoaderInAttributes(t.templateOptions.attributes),t.addCustomTooltipsInAttributes(t.templateOptions.attributes);var a=t.getMaturityContainer();t.createMaturitySpan(a),t.resize()},getMaturityContainer:function(){for(var e,t,i=!0,n=this.templateOptions.attributes,o=0;o<n.length;o++)for(var a=n[o],s=0;s<a.length;s++){var r=a[s];"maturity"==r.command&&(i=r.displayWhenMinified)}return i?(e=this.container.getElements("#maturity")[0].getElementsByClassName("attribute-value")[0].firstChild,t=this.container.getElements("#maturity")[1].getElementsByClassName("attribute-value")[0].firstChild):t=this.container.getElements("#maturity")[0].getElementsByClassName("attribute-value")[0].firstChild,this.templateOptions.minified?e:t},reRenderHeaderMenu:function(){this.templateOptions.dropdownElement&&this.templateOptions.dropdownElement.destroy(),0==this.templateOptions.dropdown.items.length?this.container.getElement(".actions-menu-icon").addClassName("hidden"):(this.container.getElement(".actions-menu-icon").removeClassName("hidden"),this.templateOptions.dropdownElement=new o(this.templateOptions.dropdown))},attachResizeSensor:function(){var e=this;e.resizeSensor=new n(e.container,(function(){e.resize()})),e.container.getElements(".attributes-placeholder .attribute-section").forEach((function(e){var t=e.getElement(".attribute-value");t.style.width=e.offsetWidth-e.getElement(".attribute-name").offsetWidth-21+"px",t.style.overflow="hidden",t.style.textOverflow="ellipsis"}))},resize:function(){var e=this,t=e.container.offsetWidth;e.container.hasClassName("minified")&&e._checkMinifiedAttributesOverflow();e.container.offsetWidth;var i=e.container.getElement('.attribute-columns[data-column-index="0"]'),n=e.container.getElement('.attribute-columns[data-column-index="1"]'),o=e.container.getElement('.attribute-columns[data-column-index="2"]'),a=e.container.getElement('.attribute-columns[data-column-index="3"]'),s=e.container.getElement(".image-placeholder"),r=e.container.getElement(".free-zone-0"),l=0;s&&(s.hasClassName("hidden")?(s.removeClassName("hidden"),l=s.offsetWidth,s.addClassName("hidden")):l=s.offsetWidth),t-20<i.offsetWidth+l?(e.container.addClassName("no-image-placeholder"),s.addClassName("hidden")):(e.container.removeClassName("no-image-placeholder"),s.removeClassName("hidden"));var d=0;n&&(n.hasClassName("hidden")?(n.removeClassName("hidden"),d=n.offsetWidth,n.addClassName("hidden")):d=n.offsetWidth),null!=n&&(t-40<i.offsetWidth+s.offsetWidth+d?n.addClassName("hidden"):n.removeClassName("hidden"));var c=0;o&&(o.hasClassName("hidden")?(o.removeClassName("hidden"),c=o.offsetWidth,o.addClassName("hidden")):c=o.offsetWidth),null!=o&&(t-60<i.offsetWidth+s.offsetWidth+n.offsetWidth+c?o.addClassName("hidden"):o.removeClassName("hidden"));var p=0;a&&(a.hasClassName("hidden")?(a.removeClassName("hidden"),p=a.offsetWidth,a.addClassName("hidden")):p=a.offsetWidth),null!=a&&(t-100<i.offsetWidth+s.offsetWidth+n.offsetWidth+c+p?a.addClassName("hidden"):a.removeClassName("hidden"));null!=a?0==a.offsetWidth||t-200<i.offsetWidth+s.offsetWidth+n.offsetWidth+c+450?r.addClassName("hidden"):r.removeClassName("hidden"):t-80<i.offsetWidth+s.offsetWidth+n.offsetWidth+c+450?r.addClassName("hidden"):r.removeClassName("hidden")},minify:function(){if(this.templateOptions.minified=!0,!this.container.hasClassName("minified")){this.container.addClassName("minified"),this.modelEvents.publish({event:"idcard-minified"}),console.log("idcard-minified");var e=this.getMaturityContainer();this.createMaturitySpan(e)}},expand:function(){if(this.templateOptions.minified=!1,this.container.hasClassName("minified")){this.container.removeClassName("minified"),this.modelEvents.publish({event:"idcard-expanded"});var e=this.getMaturityContainer();this.createMaturitySpan(e)}},toggleMinified:function(){var e=this.container.querySelector(".toggle-minified-icon"),t=this.container.hasClassName("minified");if(t){const t=this.container.getElement(".attributes-section-when-minified-container > .attribute-section#maturity .wrapper");null!=t&&(t.style.paddingTop="0px"),this.expand(),null!==e&&(e.classList.remove("fonticon-expand-down"),e.classList.add("fonticon-expand-up"),e.title=d.templateNLS.collapse)}else this.minify(),null!==e&&(e.classList.remove("fonticon-expand-up"),e.classList.add("fonticon-expand-down"),e.title=d.templateNLS.expand);var i=!t;console.log("idcard-header-minified"+i),i?(widget.getElement(".outerContainerTabDiv").removeClassName("expanded-header-height"),widget.getElement(".outerContainerTabDiv").addClassName("minified-header-height")):(widget.getElement(".outerContainerTabDiv").addClassName("expanded-header-height"),widget.getElement(".outerContainerTabDiv").removeClassName("minified-header-height"))},_checkMinifiedAttributesOverflow:function(){for(var e=this.container.getElement(".attributes-section-when-minified-container"),t=e.getElements(".attribute-section"),i=0;i<t.length;i++)t[i].removeClassName("hidden");if(!(e.scrollWidth<=e.offsetWidth))for(var n=0,o=0;o<t.length;o++)(n+=t[o].offsetWidth)>e.offsetWidth&&t[o].addClassName("hidden")},_triggerClickOnAttributeEvent:function(e){var t={index:parseInt(e._uwaTarget.parentElement.getAttribute("data-attribute-index"),10),attributeName:e._uwaTarget.parentElement.querySelector(".attribute-name").innerHTML};this.modelEvents.publish({event:"idcard-attributes-clicked",data:t})},_parseAttributes:function(e,t){var i=[],n=0;return void 0!==e&&(i.push(e.slice(0,t[0])),t[1]&&i.push(e.slice(t[0],t[0]+t[1])),t[2]&&i.push(e.slice(t[0]+t[1],t[0]+t[1]+t[2])),t[3]&&i.push(e.slice(t[0]+t[1]+t[2],t[0]+t[1]+t[2]+t[3])),i.forEach((function(e){e.forEach((function(e){e.index=n++}))}))),i},idCardHeaderUpdate:function(e){var t=this;if(console.log("idcard-header-update modelEvents"),e.accessBits&&(this.model.set("accessBits",e.accessBits),t.createNewMenu(),t.reRenderHeaderMenu()),e.attributes||e.accessBits){var i=t.createNewAttributes(e);t.reRenderHeaderAttributes(i),e.attributes&&e.attributes.owner&&t.model.set("owner",e.attributes.owner.valueActual)}var n=!1;if(e.title&&(t.model.set("title",e.title),n=!0),e.freezones&&e.freezones.constructor===Array&&e.freezones[0]){var o=t.model.get("freezones");o[0]=e.freezones[0].data,t.model.set("freezones",o),n=!0}n&&t.reRenderHeaderNonAttributeFields(e)}});return y.prototype._subscribeToPlatformEvents=function(){var e=this;c.unsubscribe("idcard-header-update"+widget.id),c.subscribe("idcard-header-update"+widget.id,(function(t){e.idCardHeaderUpdate(t)})),c.unsubscribe("idcard-header-update-maturity"),c.subscribe("idcard-header-update-maturity",(function(){if(console.log("====subscribe--idcard-header-update-maturity---"),e&&e.maturityCmd&&e.maturityCmd.changeMaturityWidget&&e.maturityCmd.changeMaturityWidget.current&&e.maturityCmd.changeMaturityWidget.target&&"In Work"==e.maturityCmd.changeMaturityWidget.current&&"In Approval"==e.maturityCmd.changeMaturityWidget.target&&e.model&&e.model._attributes&&e.model._attributes.isKindOfType&&"ChangeOrder"==e.model._attributes.isKindOfType){S("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}var t=e.getMaturityContainer();e.createMaturitySpan(t,"true")})),c.unsubscribe("idcard-header-update-substatematurity"),c.subscribe("idcard-header-update-substatematurity",(function(t){console.log("====subscribe--idcard-header-update-substatematurity---"),console.log(t);var i=e.getMaturityContainer();e.createMaturitySpan(i,"true")})),y.prototype.platformEventsSubscribed=!0},y.prototype._subscribeToModelEvents=function(){var e=this;e.model.get("modelEvents").subscribe({event:"idcard-header-update"+widget.id},(function(t){e.idCardHeaderUpdate(t)})),e.model.get("modelEvents").subscribe({event:"idcard-header-update-maturity"},(function(){var t=e.getMaturityContainer();e.createMaturitySpan(t,"true")}))},y})),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgIRAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D){"use strict";var I={getDataToBuildAddMemberPanel:function(e){var t=this;I.teamlayoutModel=e.model,I.id=e.id,I.objectTitle=e.objectTitle,I.options=e,I.modelForChangeCoordinator=new u,I.modelForAssignee=new u,I.modelForApprover=new u,I.modelForFollower=new u,t.filterByTrigramHandler(),I.accessBitAssignee=t.getAccessBitBoolean(I.options.accessBits["Manage Assignee"]),I.accessBitCoordinator=t.getAccessBitBoolean(I.options.accessBits["Manage Coordinator"]),I.accessBitFollower=t.getAccessBitBoolean(I.options.accessBits["Manage Follower"])},getAccessBitBoolean:function(e){const t=!/^(true|1)$/i.test(e);return console.log("accessBit",e),t},setDataForAddMember:function(e){var t=[];return t.push({label:C.CHG_GOV_Members_DataGrid_IR_Coordinator,id:"coordinator",model:I.modelForChangeCoordinator,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_CCO",placeholder:C.CHG_Add_Member_Type_To_Search,customFilterMessage:C.CHG_No_Search_found,disabled:I.accessBitCoordinator,multiSearchMode:!1,supportType:["person"]}),t.push({label:C.CHG_GOV_Members_DataGrid_Assignee,id:"assignee",model:I.modelForAssignee,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Assignee",placeholder:C.CHG_Add_Member_Type_To_Search,customFilterMessage:C.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"],disabled:I.accessBitAssignee}),t.push({label:C.CHG_GOV_Members_DataGrid_InformedUser,id:"follower",model:I.modelForFollower,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Follower",placeholder:C.CHG_Add_Member_Type_To_Search,customFilterMessage:C.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"],disabled:I.accessBitFollower}),{title:C.CHG_Member_AddMember_Title,objectTitle:I.objectTitle,target:I.options.target,fields:t,addMemberSubmitHandler:this.addmember,searchFromModelAndUniqAndAdd:a.searchFromModelAndUniqAndAdd,teamlayoutModel:I.teamlayoutModel,makeDroppable:i.makeDroppable,type:"InvestigationRequest"}},launchAddMemberPanel:function(){var i={commandInfo:{type:"Investigation Request",facet:"Members",action:"IR>Members>Add Member"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),I.changecordinatorDivDisable=!1,1==D.isChangeCoordinatorConnected&&(I.changecordinatorDivDisable=!0);var n=I.setDataForAddMember(),o=new e(n);(new t).buildAddMemberDialog(o)},filterByTrigramHandler:function(){I.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new m).getTrigramNameFilter()),I.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new m).getTrigramNameFilter()),I.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new m).getTrigramNameFilter()),I.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new m).getTrigramNameFilter())},dragAndDropHandler:function(){var e=I.options.target.querySelector("#memberFieldElementchangeCoordinator");i.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForChangeCoordinatorField:function(e){return e},addmember:async function(e,t){let i=e.assignee,n=e.approver?e.approver:"",o=e.coordinator,s=e.follower;var r=D.makeUpdateMemberJson("CONNECT",i,n,s,o,t),l=I.id;try{for(var d=await v.updateMembers(t,l,r),c=a.processedChangeRequestMemberList(d),p=await new Promise(((e,t)=>{require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(t){e(t)}))})),u=p.membersTreeModel.getChildren(),g=[],m=0;m<c.length;m++){var C=c[m];if("Route Template"!=C.type){if("Coordinator"==C.role){D.isChangeCoordinatorConnected=!0,p.isChangeCoordinatorExists=!0,f("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout").treeDocument.getAllDescendants().length>0&&(p.refreshFlag=!0,h.publish("idcard-header-update-substatematurity",{}))}for(var w=C.id,_=!1,b=0;b<u.length;b++)if(w==u[b].options.grid.id){_=!0;break}if(1==_){p.membersTreeModel.prepareUpdate();var S=u[b].options.description,y="";if(C.role.includes(",")){var E=C.role.split(",");for(let e=0;e<E.length;e++)y+=", "+D.getRoleNLSValue(E[e].trim()),u[b].options.grid.roles.push(E[e].trim())}else y=", "+D.getRoleNLSValue(C.role),u[b].options.grid.roles.push(C.role);var O=u[b].options.grid.role,G=","+C.role;u[b].options.description=u[b].options.grid.roleList=S.concat(y),u[b].options.grid.role=O.concat(G),p.membersTreeModel.pushUpdate()}else g.push(C)}else g.push(C),D.isRouteTemplateConnected=!0}g.length>0&&p.addNodesInLayout(g)}catch(e){console.error(e)}}};return I})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabRolledUpDGView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","require","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabContextualMenu","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabDGVToolbar","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/Controls/Loader","DS/UIKIT/Input/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataProcess"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O,G,N,A,V,M,T,R,U){"use strict";return e.extend({init:function(e){this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:u.getGlobalVariable().get3DSpaceURL(),securityContext:u.getGlobalVariable().getSecurityContext(),isNative:u.getGlobalVariable().isNative},dataForAnalysis:null};this._modelEvents=null,this._toolbar=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o,this.dgView=void 0},loadCustomColumns:function(e){let t=w.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(t){let e=JSON.parse(t);e&&_.restoreCustomViews(e,this.options.custom_view_options)}},render:function(){var e=this;let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");var o=this.processColumns();if(this.options.treeDocument&&this.options.target){var l={treeDocument:this.options.treeDocument,columns:o,cellSelection:"none",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:m.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"ChangeImpactsIRRolledUpDGV",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!0,useWidgetPreferencesFlag:!0,onContextualEvent:function(t){var i=[];if(t.context="ItemView",t&&t.collectionView&&t.cellInfos){if(t.cellInfos.rowID>=0&&9==t.cellInfos.columnID){let i=t.cellInfos.nodeModel._options.grid.changeId?t.cellInfos.nodeModel._options.grid.changeId:e.id;return f.showRMBMenuOnGridForDispositionCell(t,i,e.options.contextAccess).then((function(e){return e}))}if(t.cellInfos.rowID>=0&&16==t.cellInfos.columnID)return f.showRMBMenuOnGridForResolvedByCell(t).then((function(e){return e}));if(t.cellInfos.rowID>=0)return f.showRMBMenuOnGrid(t,e.options.contextAccesss).then((function(e){return e}));i=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},onDragStartRowHeader:function(e,t){g.readyDragContent(e,t)},onDragStartCell:function(e,t){t.draggedNodes&&1==t.draggedNodes.length&&16==t.columnID?i.readyDragContentForResolvedBy(e,t):t.draggedNodes&&1==t.draggedNodes.length&&9==t.columnID?i.readyDragContentForDisposition(e,t):g.readyDragContent(e,t)}};l=UWA.merge(l,this.options),this.dgView=new t(l),this.dgView.getCustomViewsManager().onCustomViewsSave=function(t,n){i.onCustomViewsSave(t,n,e.options.custom_view_options)},this.dgView.registerReusableCellContent({id:"RevColId",buildContent:function(){return new UWA.Element("div",{class:"RevColId",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}})}}),this.dgView.registerReusableCellContent({id:"revEmptyColId",buildContent:function(){return new UWA.Element("div",{styles:{"padding-left":"5px"}})}}),this.options.columns[9].children[1].onCellRequest=function(t){if(t.nodeModel.getAttributeValue("dispositionRevision")&&""!==t.nodeModel.getAttributeValue("dispositionRevision")){var i=e.dgView.reuseCellContent("RevColId");i.setContent(t.nodeModel.getAttributeValue("dispositionRevision")),t.cellView.setReusableContent(i)}else t.cellView.setReusableContent(e.dgView.reuseCellContent("revEmptyColId"))},this.subscribeToModelEvents(this.options.treeDocument),s.unsubscribe("updateRouteContent-"+widget.id),s.subscribe("updateRouteContent-"+widget.id,(async function(t){e.dgView.prepareUpdateView(),e.dgView.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0),t="string"==typeof t?JSON.parse(t):t,t=G.getApprovalStatusValue(t);var i=e.dgView.treeDocument.getSelectedNodes()[0];let n=i.options.grid.dispositionInformation[0].dispostionId,o=await M.getDispositionInfo(i.options.grid.id,[{dispositionIds:[n]}]),a=await T.enrichDispositionInfo(o.data[0].doTargetDisposition),r="update";s.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:a,action:r}),s.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:a,action:r}),s.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:a,action:r}),s.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:n,dispInfo:a,action:r})}));let c={expandInput:{stdTemplate:"expandInputtemplate"}},p={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}},u={typeForDisposition:{stdTemplate:"enumCombo",semantics:{possibleValues:{documentKey:m.CHG_GOV_Investigation_Request_Disposition_Type_Documentation,fixKey:m.CHG_GOV_Investigation_Request_Disposition_Type_Fix,notFixKey:m.CHG_GOV_Investigation_Request_Disposition_Type_No_Fix,notImpactedTypeKey:m.CHG_GOV_Investigation_Request_Disposition_Type_Not_Impacted,noneKey:m.CHG_GOV_Investigation_Request_Disposition_Type_None},valueType:"enumValueToProperty"}}},h={dispositionResolvedBy:{semantics:{possibleValues:i.resolvedByDefaultForDispostion()}}},C={async fetchApproversList(e,t){let n=new E;try{return await i.getApproversSuggestions(e,["person","routetemplate"],void 0,n,t)}catch(e){return console.error("Error fetching approvers:",e),[]}}},v={approvers:{stdTemplate:"enumCombo",semantics:{possibleValues:async function(e){let t=cellInfos.nodeModel._options.grid.approvers;return await C.fetchApproversList(e,t)}}}};this.dgView.getTypeRepresentationFactory().registerTypeTemplates(p),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(c),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(u),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(h),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(v),I.toolbar=this.dgView.setToolbar(I.writetoolbarDefinition(this.options)),this.toolbar=I.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(p),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(c),this.dgView.buildStatusBar([{type:n.STATUS.NB_ITEMS},{type:n.STATUS.NB_SELECTED_ROWS}]),this.dgView.getTreeDocument().getXSO().onAdd((function(e){})),this.dgView.addEventListener(a.POINTERHIT,(function(t,i){e.onItemClick(t,i)})),this.dgView.addEventListener("postEdit",(function(e,t){require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){e.changeDispositionType(t)}))})),this.dgView.addEventListener("postEdit",(function(e,t){if(14==t.columnID){r("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler").updateApproversCellForDisposition(t)}})),R.makeDroppable(this.options.target,e.dropHandler),this.dgView.onDropCell=async function(e,t){if(9==t.columnID||16==t.columnID)if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.dataTransfer&&e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="copy"),9==t.columnID)if(t.cellModel.contains("chgIRAffectedDragAndDropDisposition")){var i=e.dataTransfer.getData("text");if(t.nodeModel.options&&t.nodeModel.options.grid){let e=t.nodeModel.options.grid.changeId,n={node:t.nodeModel,data:i,investigationRequestId:e,functionality:"dragAndDropDisposition"};T.dragAndDropDisposition(n)}else N.warn(m.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else N.warn(m.CHG_GOV_Investigation_Request_Disposition_Already_There);else if(t.cellModel.contains("chgIRAffectedAddExistingCADragAndDropResolvedby")){i=e.dataTransfer.getData("text"),JSON.parse(i);if(t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0]&&t.nodeModel.options.grid.dispositionInformation[0].dispostionId){let e={node:t.nodeModel,data:i,functionality:"dragAndDropResolvedBy"};T.dragAndDropResolvedBy(e)}else N.warn(m.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else N.warn(m.CHG_GOV_Investigation_Request_Disposition_ResolvedBy_Already_There);return!0},document.getElementById("outer-changeImpactsIRTab-grid-div")&&document.getElementById("outer-changeImpactsIRTab-grid-div").destroy(),this.changeImpactsIRTabDgViewContainer=UWA.createElement("div",{id:"outer-changeImpactsIRTab-grid-div",class:"outer-changeImpactsIRTab-grid-div"});var d=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-changeImpactsIRTab-grid-div"});this.toolbar.inject(d);let D=UWA.createElement("div",{class:"content-changeImpactsIRTab-grid-div"}),w=UWA.createElement("div",{class:"footer-changeImpactsIRTab-grid-div"}),_=UWA.createElement("div",{class:"buttons-changeImpactsIRTab-grid-div"});new S({value:m.CHG_GOV_Button_Close}).inject(_).addEvent("onClick",(function(){e.closeButtonHandler(e.options.immersiveFrame)})),_.inject(w),this.dgView.inject(D),this.changeImpactsIRTabDgViewContainer.addContent(d),this.changeImpactsIRTabDgViewContainer.addContent(D),this.changeImpactsIRTabDgViewContainer.addContent(w),this.changeImpactsIRTabDgViewContainer.inject(this.options.target),this.changeImpactsIRTabDgViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.dgView,this.options.custom_view_options.ootb_columns=[...o],this.options.custom_view_options.dgvDiv=D,this.options.custom_view_options.dataForAnalysis=this.options.option,this.loader=(new b).inject(this.options.target);let y=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];i.registerCustomEventsOnDGV(y,this.dgView,this.options.custom_view_options)}},dropHandler(e){},subscribeToModelEvents:function(e){var t=this;s.unsubscribe("updateChangeImpactsGrid"+(widget?widget.id:"")),s.subscribe("updateChangeImpactsGrid"+(widget?widget.id:""),(async function(e){if("update"==e.action&&e.dispositionId){if(e.dispInfo&&e.dispInfo[0].ApprovalStatus&&null!=e.dispInfo[0].ApprovalStatus.icon){var i={data:e.dispInfo},n=await G.getColumnApprovalStatusValue(U.createPayloadApprovalStatusValue(i));n&&n[e.dispInfo[0].dispostionId]&&(e.dispInfo[0].ApprovalStatus=n[e.dispInfo[0].dispostionId].approvalStatus,e.dispInfo[0].approvalStatusModel=n[e.dispInfo[0].dispostionId].approvalStatusModel)}if(e.dispInfo[0].resolvedByInformation&&e.dispInfo[0].resolvedByInformation[0]&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById){let t=e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById;var o=(await g.recent()).results,a=[],s={resolvedById:t};for(let e=0;e<o.length;e++){let i=o[e].attributes.filter((e=>"resourceid"==e.name)).map((e=>e.value));if(i&&1==i.length&&t===i[0]){var l={};l.nonIndexedData=o[e].attributes,l.nonIndexedModelerData=s,a.push(l)}}var d=await U.processInformationForRecentResolvedByDisposition(a);e.dispInfo[0].resolvedByInformation=[],e.dispInfo[0].resolvedByInformation.push({non3DSpaceNonIndexedDataForResolvedBy:d})}t.options.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid&&t.options.grid.dispositionInformation[0]&&t.options.grid.dispositionInformation[0].dispostionId==e.dispositionId&&T.updateDispositionInfo(t,e.dispInfo)}))}else if("update"==e.action&&e.investigationRequestId){t.options.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid&&t.options.grid.id==e.investigationRequestId&&T.updateDispositionInfo(t,e.dispInfo)}))}else if("createDisposition"==e.action){t.options.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid&&t.options.grid.id==e.investigationRequestId&&T.updateDispositionInfo(t,e.dispInfo)}))}else if("removeDisposition"==e.action){let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");t.options.treeDocument.getAllDescendants().forEach((async n=>{if(n.options.grid&&n.options.grid.id==e.investigationRequestId){let e={};e.accessBits=n.options.grid.accessBits?n.options.grid.accessBits[0]:t.options.contextAccess,n.updateOptions({grid:{dispositionName:i.defaultDispositionNameValue(e),dispositionResolvedBy:void 0,dispositionType:void 0,dispositionMaturity:void 0,ApprovalStatus:void 0,approvalStatusModel:void 0,approvers:void 0,dispositionInformation:void 0,dispositionRevision:void 0}})}}))}})),s.unsubscribe("change-impactsRolledUp-object-selection-update"+(widget?widget.id:"")),s.subscribe("change-impactsRolledUp-object-selection-update"+(widget?widget.id:""),(function(e){r("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler").handleObjectSelectionUpdate(e)}))},closeButtonHandler:function(e){e.remove()},processColumns:function(){return this.options.columns},onItemClick:function(e,t){let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount)console.log("AffectedItem_OnItemClcik"),t.nodeModel.select(!0),that._modelEvents.publish({event:"update-property-panel-data",data:{context:t.nodeModel}}),that._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel});else if(1==e.multipleHitCount)if(t&&3==t.columnID){if("affected_item_detail_obj_revision"===e.target.className){const e=t.nodeModel.options.grid.impactedByItemInformation.slice(-1)[0];let n={};n.id=e.id,n.type=e.type,n.title=e.title,n.name=e.name,i.launchVersionExplorer(n)}}else if(t&&9==t.columnID){if(e.target.className.contains("chgIRAffectedCreateNewDisposition")){var n={commandInfo:{type:"Investigation Request",facet:"Change Impacts",action:"IR>Change Impacts>Rolled-up>Create Disposition"}};A.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),console.log("New disposition called");const e=t.nodeModel.options.grid.impactedByItemInformation,i=t.nodeModel.options.grid.occurencePathArray;let a={model:t.nodeModel.options.grid,InvestigationRequestId:t.nodeModel.options.grid.changeId,context:t.nodeModel,productID:t.nodeModel.options.productID},s=e[0].title+" "+e[0].revision;if(a.productID===e[0].id&&1==e.length||s==i[0])require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){e.createDisposition(a,t.nodeModel.getTreeDocument())}));else{var o={parentImpactedById:e[e.length-1].id,verticalAssessmentImpactedBy:e[0].id,verticalAssessmentObjType:e[0].type,verticalAssessmentObjService:"3DSpace",InvestigationRequestId:t.nodeModel.options.grid.changeId};require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){e.createDispositionThroughVerticalAssessment(o,t.nodeModel.getTreeDocument())}))}}else if(e.target.className.contains("chgIRAffectedAddExistingDisposition")){console.log("Add existing called");n={commandInfo:{type:"Investigation Request",facet:"Change Impacts",action:"IR>Change Impacts>Rolled-up>Add Existing Disposition"}};A.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n});var a={grid:t.nodeModel.options.grid,investigationRequestId:t.nodeModel.options.grid.changeId,affectedItemId:t.nodeModel.options.productID,functionality:"AddExistingDisposition"};T.addExistingDispositionHandler(a)}else if(e.target.className.contains("disposition_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};v.buildAndDisplayContextualMenu(e.target,t)}}else if(t&&13==t.columnID){var s={};s.cellInfos=t;let e=s.cellInfos.nodeModel.options.grid.dispositionInformation,n=s.cellInfos.nodeModel.options.grid.id;e&&e[0]&&e[0].dispostionId&&e[0].dispositionAccessBits&&("true"==e[0].dispositionAccessBits[0].Promote||"true"==e[0].dispositionAccessBits[0].Demote)&&i.executeMaturityForDisposition(s,n,T.getHandleForDispostionMaturity)}else if(t&&16==t.columnID){if(console.log("Create Change Action Called"),null==t.nodeModel.options.grid.dispositionInformation||""==t.nodeModel.options.grid.dispositionInformation)N.warn(m.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else if(e.target.className.contains("chgIRAffectedCreateNewCAResolvedby"))if(console.log("New CA resolved by create called"),null==t.nodeModel.options.grid.dispositionInformation||""==t.nodeModel.options.grid.dispositionInformation)N.warn(m.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else{n={commandInfo:{type:"Investigation Request",facet:"Change Impacts",action:"IR>Change Impacts>Rolled-up>ResolvedBy>Create Change Action"}};A.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){t.nodeModel.options.grid.dispositionInformation[0].dispositionId;let i={node:t.nodeModel.getTreeDocument().getSelectedNodes()[0],invstigationRequestId:t.nodeModel.options.grid.id,funcationality:"addResolvedBy"};e.createResolvedByInDispositionIR(i)}))}else if(e.target.className.contains("chgIRAffectedCreateAddExistingCAResolvedby")){console.log("Add existing called ResolvedBy ");n={commandInfo:{type:"Investigation Request",facet:"Change Impacts",action:"IR>Change Impacts>Rolled-up>ResolvedBy>Add Existing Change Action or Task"}};A.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),require(["DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e){let i={node:t.nodeModel.getTreeDocument().getSelectedNodes()[0],invstigationRequestId:t.nodeModel.options.grid.id,funcationality:"addExistingResolvedBy"};e.addExistingResolvedByHandler(i)}))}else if(e.target.className.contains("resolvedby_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};v.buildAndDisplayContextualMenu(e.target,t)}}else if(t&&10===t.columnID){if("RevColId"===e.target.className){r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").launchVersionExplorer({id:t.nodeModel.options.grid.dispositionInformation[0].dispostionId,type:m.CHG_GOV_AffectedItems_Disposition,name:t.nodeModel.options.grid.dispositionInformation[0].dispositionName})}}else t&&15==t.columnID&&e.target.className.contains("chgIRDispositionAddApprover")&&require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],(function(e){if(t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0])var i=t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0].dispostionId?t.nodeModel.options.grid.dispositionInformation[0].dispostionId:t.nodeModel.options.grid.dispositionInformation[0].dispositionId;let n={id:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,model:t.nodeModel.getTreeDocument(),objectTitle:t.nodeModel.options.grid.title,dispositionID:i};e.addApproverHandler(n)}))},showSpinner:function(){console.log("show spinner"),D.mask(this.options.target)},hideSpinner:function(){console.log("hide spinner"),D.unmask(this.options.target)},reapplySortModel:function(){this.dgView.reapplySortModel()}})})),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAdaptor",["UWA/Class","UWA/Class/Model","DS/CoreEvents/ModelEvents","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/view/ChgIDCardHeaderBuilder","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAttributeSubscriber","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderMenuSubscriber","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChangeIDCard","DS/PlatformAPI/PlatformAPI"],(function(e,t,i,n,o,a,s,r,l){return{createIDCardHeader:function(e,t,i){var s=this.prepareIdCardData(t,i);this._idCardHeaderBuilder=new n({model:s}),o.init(s),a.init(s),e.empty(),e.setAttribute("draggable","true"),e.setAttribute("droppable","true");var r=this.prepareDragData(t),l=s.get("smallIcon"),d=new Image;d.src=l,this._idCardHeaderBuilder.render().inject(e),this._idCardHeaderBuilder.attachResizeSensor(),e.addEventListener("dragstart",(function(e){console.log("inside drag"+r),e.dataTransfer.setData("Text",r),e.dataTransfer.setDragImage(d,0,0),e.dataTransfer.effectAllowed="copy"}))},prepareDragData:function(e){var t={protocol:"3DXContent",version:"1.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:[]}},i=[],n={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",serviceId:"3DSpace",objectId:e.id,objectType:e.type,displayName:e.title};return i.push(n),t.data.items=i,JSON.stringify(t)},prepareIdCardData:function(e,n){var o=this;if(null!=e&&void 0!==e.attributes){for(var a,s,l=[],d=e.attributes,c=[],p=d.layout,u=[],g=0;g<p.length;g++){var h=p[g];c.push(h.length);for(var m=0;m<h.length;m++){var C=h[m],f=d.mapping[C];if(f){var v=f.showLoader?"":f.valueDisplay,D=f.showLoader?"":f.valueActual,I=f.showLoader?r.loading:"maturity"===C||f.showCustomTooltip?"":f.valueTitle?f.valueTitle:f.valueDisplay,w=f.displayWhenMinified,_=f.editable,b=f.accessBit;l.push({name:f.fieldNLS,valueDisplay:v,valueActual:D,valueTooltip:I,displayWhenMinified:w,showLoader:f.showLoader,editable:_,command:C,accessBit:b}),"maturity"===C&&(a={valueDisplay:v,valueActual:D,editable:_}),"maturitySubstate"==C&&(u=f.transitionStates,s=v)}}}o.modelEventForIdCard=new i;var S=d.mapping.owner.valueActual?d.mapping.owner.valueActual:"",y=e.id?e.id:"",E=e.name?e.name:"",O=e.type?e.type:"",G=e.policy?e.policy:"",N=e.title?e.title:e.name,A=e.revision?e.revision:"",V=e.thumbnail?e.thumbnail:"",M=e.iconURL?e.iconURL:"",T=!!e.minified&&e.minified,R="true"==e.onHold,U=e.isKindOfType?e.isKindOfType:"",x="";e.freeSpaces[0]&&e.freeSpaces[0].data&&(x=e.freeSpaces[0].data);var P={items:e.menuItems,hiddenItems:[],events:{onClick:function(e,t){console.log("Publish idcard-dropdown-menu-action : "+t.id),o.modelEventForIdCard.publish({event:"chg-idcard-dropdown-menu-action",data:t})}}},F={id:y,withToggleMinifiedButton:!0,withActionsButton:!0,minified:T,type:O,policy:G,title:N,owner:S,version:A,currentState:a,thumbnail:V,smallIcon:M,modelEvents:o.modelEventForIdCard,dropdown:P,freezones:[x],attributes:l,attributesLayout:c,onHold:R,accessBits:n.accessBits,name:E,isKindOfType:U,transitionStates:u,currentBusinessState:s||""};return o.updateDataBasedOnAccessBit(F,n.accessBits),new t(F)}console.log("[ChgIDCardHeaderAdaptor:prepareIdCardData] Error!!! Incorrect/null data!!!")},updateDataBasedOnAccessBit:function(e,t){var i=[],n=[];e.dropdown.items.forEach((function(e,o){"true"==t[e.accessBit]?i.push(e):n.push(e)})),e.dropdown.items=i,e.dropdown.hiddenItems=n,e.attributes.forEach((function(e,i){var n=e.accessBit;n&&("false"==t[n]&&(e.editable=!1))}))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfodialog","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this.options=e,this.model=e.model,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:C.getGlobalVariable().get3DSpaceURL(),securityContext:C.getGlobalVariable().getSecurityContext(),isNative:C.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t;var n=this._modelEvents;this.chgOrchestrationGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgOrchestrationGridView.inject(this.options.target),this.chgOrchestrationGridView.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",(function(e){e.value?(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("minified-header-height")):(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("minified-header-height"))})),widget.addEvents({onSearch:function(e){n.publish({event:"cr-orc-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"cr-orc-DataGrid-on-reset-search",data:{query:e},context:i})}})},loadCustomColumns:function(){let e=v.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&m.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){try{var e=this.processColumns(),t=this,u={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgCROrchestrationGrid",useWidgetPreferencesFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(t,e,t.options.target).then((function(e){return e}));e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};u=UWA.merge(u,this.options);var g={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.chgOrchestrationGrid=new o(u),this.chgOrchestrationGrid.cellSelection="none",this.chgOrchestrationGrid.getCustomViewsManager().onCustomViewsSave=function(e,i){f.onCustomViewsSave(e,i,t.options.custom_view_options)},this.chgOrchestrationGrid.columnDefinitionUpdated=!1,this.tileView=new s(g);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(t,e,!0).then((function(e){return e}))}};this.tileView.onContextualEvent=h;this.chgOrchestrationGrid.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),r.toolbar=this.chgOrchestrationGrid.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar;t=this;this.chgOrchestrationGrid.addEventListener("allCellsRendered",(function(){t.chgOrchestrationGrid.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_TotalItems+t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_SelectedItems+t.chgOrchestrationGrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])})),t.chgOrchestrationGrid.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.chgOrchestrationGrid.onDropCell=function(e,i){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var n=e.dataTransfer.getData("text"),o=(n=JSON.parse(n)).data.items,a=[],s=C.getGlobalVariable().changeOrderSubTypes;for(let{label:e}of s)a.push(e);let r=[],l=[];for(let e of o)a.includes(e.objectType)?l.push({id:e.objectId,type:e.objectType}):r.push(e);if(i.nodeModel.options.grid.isKindOfChangeAction)D.error(p.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else if(r.length>0&&D.warn(p.CHG_GOV_ChangeOrchestration_Unsupported_Message),l.length>0){var d={id:i.nodeModel.options.grid.id,targetType:i.nodeModel.options.grid.isKindOfChangeRequest?"Change Request":"Change Order"},c=[{label:p.CHG_GOV_OK_Button_Label,handler:function(){t.model.addExistingChildren(l,d),I.closeDialog()},className:"primary"},{label:p.CHG_GOV_CANCEL_Button_Label,handler:function(){I.closeDialog()},className:"default"}],u=i.nodeModel.options.grid.name,g=i.nodeModel.options.grid.title;if(C.getGlobalVariable().is3DSpace&&null!=window.parent.currentBC.label){u=window.parent.currentBC.label;var h=p.CHG_GOV_ChangeOrchestration_Drop_Content+"("+u+")<br>"+p.CHG_GOV_ChangeOrchestration_Drop_Confirmation}else h=p.CHG_GOV_ChangeOrchestration_Drop_Content+g+"("+u+")<br>"+p.CHG_GOV_ChangeOrchestration_Drop_Confirmation;var m={title:p.CHG_GOV_ChangeOrchestration_Drop_Info_Title,content:h,buttonArray:c};I.launchInfoDailog(m)}};var m=t.chgOrchestrationGrid.getTreeDocument().getXSO(),v=i.debounce((function(e){e&&e.length&&(e=e[0]);var i=t.chgOrchestrationGrid.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+0}}));var o=m.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)}),5);m.onPostAdd(v),m.onPostRemove(v),t.tileView.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount){console.log("CROrchestration_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}});let e=i.nodeModel.getPath().length,n={},o={};e>1&&(n.id=i.nodeModel.getParent().options.grid.id,n.title=i.nodeModel.getParent().options.grid.title,n.name=i.nodeModel.getParent().options.grid.name),e>2&&(o.id=i.nodeModel.getParent().getParent().options.grid.id,o.title=i.nodeModel.getParent().getParent().options.grid.title,o.name=i.nodeModel.getParent().getParent().options.grid.name),t._modelEvents.publish({event:"CROrchestration-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid,pathlength:e,parentModel:n,gradParentModel:o},context:i.nodeModel})}else if(i&&2===i.columnID){var n={};n.cellInfos=i,f.executeMaturity(n)}},this._modelEvents.unsubscribe({event:"cr-orc-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"cr-orc-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"cr-orc-DataGrid-on-search"},(function(e){if("false"==C.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.chgOrchestrationGrid.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){var t=0;e.options.grid.title&&(e.options.grid.title.toUpperCase().contains(i.toUpperCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase()))?e.show():e.__children&&e.__children.length>0?e.__children.forEach((function(n){n.options&&n.options.grid&&n.options.grid.title&&n.options.grid.name&&(n.options.grid.name.toLowerCase().contains(i.toLowerCase())||n.options.grid.title.toUpperCase().contains(i.toUpperCase()))?(t++,e.show()):n.__children&&n.__children.length>0?n.__children.forEach((function(n){n.options&&n.options.grid&&n.options.grid.title&&n.options.grid.name&&(n.options.grid.name.toLowerCase().contains(i.toLowerCase())||n.options.grid.title.toUpperCase().contains(i.toUpperCase()))?(t++,e.show()):0==t&&e.hide()})):0==t&&e.hide()})):e.hide()}))}))}}})),this._modelEvents.subscribe({event:"cr-orc-DataGrid-on-reset-search"},(function(e){var i=t.chgOrchestrationGrid.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.chgOrchestrationGridView=UWA.createElement("div",{id:"outer-orchestration-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-orchestration-grid-div"});var w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-orchestration-grid-div"});this.toolbar.inject(w);var _=UWA.createElement("div",{class:"content-orchestration-grid-div expanded-header-height"}),b=UWA.createElement("div",{class:"content-orchestration-tile-div orchestrationtileView expanded-header-height"}),S=UWA.createElement("div",{class:"hideView",id:"orchestrationEmptyTileViewDiv"});UWA.createElement("div",{html:p.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(S),this.chgOrchestrationGrid.inject(_),this.tileView.inject(b),S.inject(b),this.chgOrchestrationGridView.addContent(w),this.chgOrchestrationGridView.addContent(_),this.chgOrchestrationGridView.addContent(b),this.options.custom_view_options.dgvHandle=this.chgOrchestrationGrid,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=_,this.loader=(new a).inject(this.options.target);let y=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];f.registerCustomEventsOnDGV(y,this.chgOrchestrationGrid,this.options.custom_view_options)}catch(e){}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"cr-orchestration-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"cr-orchestration-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgOrchestrationGrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/components/dgv/ChgDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l){"use strict";return e.extend({init:function(e){this._parent(e)},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},setFilterModel:function(){this.treeDocument.setFilterModel(this.getFilterModel())},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},updateTreeDocument:function(e){this.treeDocument.prepareUpdate();for(var t=0;t<e.length;t++){let n=new i({label:e[t].title,subLabel:e[t].type+" | "+e[t].revision+" | "+e[t].name,grid:e[t],icons:[e[t].icon],thumbnail:e[t].thumbnail,useAsyncPreExpand:!0});this.treeDocument.addRoot(n)}this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},getFilterModel:function(){return{tree:{filterId:"stringRegexp",filterModel:""},title_instance:{filterId:"stringRegexp",filterModel:""},typeNLS:{filterId:"set",filterModel:[]},name:{filterId:"stringRegexp",filterModel:""},revision:{filterId:"set",filterModel:[]},maturityWithBadge:{filterId:"set",filterModel:[]}}}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil"],(function(e,t){"use strict";return{changeView:function(e){setTimeout((function(){t.changeView("TileView")}),100)},showEmptyView:function(){var e=document.getElementById("relatedScopeEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("relatedScopeEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/components/dgv/ChgDataGridView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/components/dgv/ChgDataGridModel","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/PlatformAPI/PlatformAPI","DS/Core/PointerEvents","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";return e.extend({init:function(e,t){this._parent(e),this.model=new n,this.model.createTreeDocument(),this.model.updateTreeDocument(t),this.model.setFilterModel(),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:c.getGlobalVariable().get3DSpaceURL(),securityContext:c.getGlobalVariable().getSecurityContext(),isNative:c.getGlobalVariable().isNative}}},removeNodes:function(e){let t=this.model.getTreeDocument().getAllDescendants();this.dataGridView.prepareUpdateView();for(let i=0;i<e.length;i++){let n=t.filter((t=>t.options.grid.id===e[i].id));this.model.getTreeDocument().removeRoot(n[0])}this.dataGridView.pushUpdateView()},render:function(){var e=this.getColumns(),n=this,a={treeDocument:this.model.getTreeDocument(),columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:this.options.dgvid?this.options.dgvid:"dgvid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!0,useWidgetPreferencesFlag:!0,onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1){let t={id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.typeNLS,sourceType:""};return c.getGlobalVariable().isNative?o.getNativeContextualMenu(t,e,n.options.remove_req):o.getDashboardContextualMenu(t,e,n.options.remove_req)}e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!0,insertRow:!1})}return t},onDragStartRowHeader:function(e,t){d.readyDragContent(e,t)},onDragStartCell:function(e,t){d.readyDragContent(e,t)}};a=UWA.merge(a,this.options),this.dataGridView=new t(a),this.dataGridView.setToolbar(this.getToolbarDefinition()),this.dataGridView.getCustomViewsManager().onCustomViewsSave=function(e,t){o.onCustomViewsSave(e,t,n.options.custom_view_options)},this.dataGridView.addEventListener(l.POINTERHIT,(function(e,t){1==e.multipleHitCount&&t&&3===t.columnID&&"RevCol"===e.target.className&&o.launchVersionExplorer({id:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,name:t.nodeModel.options.grid.name})})),this.dataGridView.addEventListener("allCellsRendered",(function(){n.dataGridView.buildStatusBar([{type:i.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_TotalItems+n.dataGridView.getTreeDocument().getAllDescendants().length}},{type:i.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_SelectedItems+n.dataGridView.getTreeDocument().getSelectedNodes().length}}])})),this.dataGridView.registerReusableCellContent({id:"RevColId",buildContent:function(){return new UWA.createElement("div",{class:"RevCol",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px",width:20,height:20}})}}),this.dataGridView.registerReusableCellContent({id:"EmptyColId",buildContent:function(){return new UWA.createElement("div",{class:"EmptyCol",styles:{"padding-left":"5px",width:20,height:20}})}}),e[3].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var t=n.dataGridView.reuseCellContent("RevColId");t.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(t)}else e.cellView.setReusableContent(n.dataGridView.reuseCellContent("EmptyColId"))},this.dataGridView.getTreeDocument().getXSO().onAdd((function(e){n.dataGridView.elements.statusBar&&n.dataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+n.dataGridView.getTreeDocument().getSelectedNodes().length}})})),n.dataGridView.getTreeDocument().getXSO().onRemove((function(e){n.dataGridView.elements.statusBar&&n.dataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})})),this.mainDiv=UWA.createElement("div",{id:"outer-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-grid-div"}),this.toolbarDiv=UWA.createElement("div",{styles:{width:"100%",height:"32px",display:"flex",alignItems:"center",justifyContent:"flex-end"},class:"toolbar-grid-div"}),this.dataGridView.getToolbar().inject(this.toolbarDiv),this.gridViewDiv=UWA.createElement("div",{class:"content-grid-div",styles:{height:"calc(100% - 32px)",width:"100%",position:"relative"}}),this.dataGridView.inject(this.gridViewDiv),this.mainDiv.addContent(this.toolbarDiv),this.mainDiv.addContent(this.gridViewDiv),this.mainDiv.inject(this.options.dgvTarget),this.options.custom_view_options.dgvHandle=this.dataGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=this.mainDiv;o.registerCustomEventsOnDGV(["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"],this.dataGridView,this.options.custom_view_options),this.loadCustomColumns()},loadCustomColumns:function(){let e=s.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&a.restoreCustomViews(t,this.options.custom_view_options)}},getColumns:function(){let e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree",width:200})),e.push(o.getColumnDefinition({dataIndex:"typeNLS",width:120,visibleFlag:!0})),e.push(o.getColumnDefinition({dataIndex:"name",width:150})),e.push(o.getColumnDefinition({dataIndex:"revision",width:65})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge",width:100})),e},getToolbarDefinition:function(){return{entries:[{id:"custom_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:p.ECM_GOV_CUSTOM_COL,position:"far",category:"custom",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:this.options.custom_view_options}}}}]}},reapplySortModel:function(){this.dataGridView.reapplySortModel()}})})),define("DS/ENOChgGovernanceUX/scripts/util/ChgComponentUtils",["UWA/Core","DS/ENOChgGovernanceUX/scripts/components/dgv/ChgDataGridView","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a){"use strict";let s=Object.create(null);return s.launchDGV=function(i,a){a.dgvTarget=new e.createElement("div",{styles:{height:"100%",width:"100%"}});var s=new t(a,i);s.render();let r=new n({identifier:"WebUX_IMF_ECM_CDGV"});new o({immersiveFrame:r,title:a.title,content:a.dgvTarget,height:360,width:660,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_CPANEL",styles:{padding:0}});return r.inject(a.target),a.dgvTarget.parentElement.setStyle("padding",0),s},s})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionGridCols",["DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t){"use strict";let i=Object.create(null);return i.getColumns=function(){let i=[];return i.push({text:"",dataIndex:"bi_color",width:10,isSortable:!1,isDraggable:!1,isEditable:!1,alwaysOn:!0}),i.push({text:t.CHG_GOV_DataGrid_Column_Graph,dataIndex:"__GRAPH__",width:160,style:{overflow:"scroll"},isSortable:!0,isDraggable:!1,isEditable:!1,alwaysOn:!0}),i.push(e.getColumnDefinition({dataIndex:"title"})),i.push({text:t.CHG_GOV_DataGrid_Column_Revision,dataIndex:"revision",width:85,isSortable:!0,isDraggable:!1,isEditable:!1}),i.push(e.getColumnDefinition({dataIndex:"maturityWithBadge"})),i.push({text:t.CHG_GOV_DataGrid_Column_CreationDate,dataIndex:"creationDate",width:"auto",isSortable:!0,isDraggable:!1,isEditable:!1}),i},i})),define("DS/ENOChgGovernanceUX/scripts/util/ChgIDCardHeaderEventsUtility",["UWA/Class","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDependencyServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChangeActionUX/scripts/Models/CADependencyModel","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r){var l=e.singleton({init:function(){this._platformEventsSubscribed=!1,l.subscribeToEvents(),this.dependencyModel=new a,o.addObserver("ChgIDCardHeaderEventsUtility","CO-AccessBit-Update",this.handleAccessBitUpdate)},handleAccessBitUpdate:function(e){l.isChangeAction=!1,e.id==l.id&&("ChangeAction"==e.type?(l.isChangeAction=!0,l.showAttachementDataForCA(l.id),l.publishEvents(l.id),l.showApplicabilityDataForCA(l.id),l.showIsGovernedDataForCA(l.id),l.showChangeGroupDataForCA(l.id)):l.showAttachementData(l.id),"ChangeRequest"==e.type&&(l.showRelatedScopeCR(l.id),l.showApplicabilityData(l.id)),"ChangeOrder"==e.type&&(l.showRelatedScopeCO(l.id),l.showApplicabilityData(l.id),l.showChangeRequestData(l.id),l.publishEvents(l.id)))},setId:function(e){this.id=e},getId:function(){return this.id},attachmentCount:0,isChangeAction:!1,updateAttachmentCount:function(){this.Count,this.getCount=function(){return this.Count||0},this.setCount=function(e,t){t?l.attachmentCount--:l.attachmentCount++}},publishEvents:function(e){t.publish("load-dependency"+widget.id,"pid:"+e)},subscribeToEvents:function(){this._platformEventsSubscribed||(t.subscribe("dependency:data:ready"+widget.id,(function(e){if(e==l.id&&i.changeActionDependenciesLoaded){var n="No",o=r.CHG_GOV_VALUE_NO;i.changeActionDependencyModel.get("upstreamDependencyObjects").dependencyLinks.length+i.changeActionDependencyModel.get("downstreamDependencyObjects").dependencyLinks.length>0&&(n="Yes",o=r.CHG_GOV_VALUE_YES);var a={};if(a.attributes={Dependency:{valueActual:n,valueDisplay:o,showLoader:!1}},1==l.isChangeAction){let e=i.changeActionDependencyModel.get("flowdownDependencyCount")?i.changeActionDependencyModel.get("flowdownDependencyCount"):0;a.attributes.Flowdown={valueActual:e,valueDisplay:e,showLoader:!1}}t.publish("idcard-header-update"+widget.id,a)}})),t.subscribe("applicability:update:notification",(function(e){var i=JSON.parse(e);if(i.content.id==l.id){var n,o=i.content.applicability_DisplayValue,a=i.content.applicability_XML;n=s.processXMLExpressionforApplicability(a,o),t.publish("idcard-header-update"+widget.id,n)}})),t.subscribe("ca-IDCard-on-change-group",(function(e){if(console.log(e),e.id==l.id){let n=e.group.title,o=e.group.id;var i={};i.attributes={Group:{valueActual:o,valueDisplay:n,showLoader:!1}},t.publish("idcard-header-update"+widget.id,i)}})),t.subscribe("co-update-attachment-complete",(function(e){if(e.id==l.id){l.updateAttachmentCount();var i="0",n="0";null!=e.referentials.attached?(l.setCount(e.referentials.attached.length),i=l.attachmentCount,n=l.attachmentCount):null!=e.referentials.detached&&(l.setCount(e.referentials.detached.length,!0),0==l.attachmentCount?(i="No",n=r.CHG_GOV_VALUE_NO):(i=l.attachmentCount,n=l.attachmentCount));var o={};o.attributes={Attachments:{valueActual:i,valueDisplay:n,showLoader:!1}},t.publish("idcard-header-update"+widget.id,o)}})),t.subscribe("relatedScope:update",(function(e){if(e.contextid==l.id){var i="No",n=r.CHG_GOV_VALUE_NO;e.length>0?(i="Yes",n=r.CHG_GOV_VALUE_YES):(i="No",n=r.CHG_GOV_VALUE_NO);var o={};o.attributes={RelatedScope:{valueActual:i,valueDisplay:n,showLoader:!1,valueTooltip:""}},t.publish("idcard-header-update"+widget.id,o)}})),this._platformEventsSubscribed=!0)},showApplicabilityData:function(e){n.getApplicabilityData(e).then((function(e){if(e.applicability){var i,n=e.applicability.display,o=e.applicability.xml;i=s.processXMLExpressionforApplicability(o,n),t.publish("idcard-header-update"+widget.id,i)}}),(function(e){var i={};return i.attributes={Applicability:{valueActual:valueActual,valueDisplay:r.CHG_GOV_Header_Unknown,showLoader:!1,valueTooltip:r.CHG_GOV_Tooltip_Unkown}},t.publish("idcard-header-update"+widget.id,i),Promise.reject(e)}))},showApplicabilityDataForCA:function(e){n.getApplicabilityDataForCA(e).then((function(e){if(e.changeaction&&e.changeaction.applicability){let n=e.changeaction.applicability;var i;i=s.processXMLExpressionforApplicability(n.expressionXML,n.expressionTXT),t.publish("idcard-header-update"+widget.id,i)}}),(function(e){return Promise.reject(e)}))},showChangeRequestData:function(e){var i="Unassigned",o=r.CHG_GOV_VALUE_UNASSIGNED;n.getCOChangeRequestData(e).then((function(e){e.data&&e.data[0]&&e.data[0].dataelements&&e.data[0].dataelements.title&&(i=e.data[0].dataelements.title,o=e.data[0].dataelements.title);var n={};n.attributes={Governing_Change_Request:{valueActual:i,valueDisplay:o,showLoader:!1}},t.publish("idcard-header-update"+widget.id,n)}),(function(e){return Promise.reject(e)}))},showAttachementDataForCA:function(e){l.showAttachementData(e,"Related Item")},showAttachementData:function(e,i){let o="No",a=r.CHG_GOV_VALUE_NO;n.getAttachementData(e,i).then((function(e){e.data&&0!=e.data.length&&(o=e.data.length,a=e.data.length,l.attachmentCount=e.data.length);var i={};i.attributes={Attachments:{valueActual:o,valueDisplay:a,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update"+widget.id,i)}),(function(e){return Promise.reject(e)}))},showRelatedScopeCR:function(e){let i="No",o=r.CHG_GOV_VALUE_NO;n.getCRRelatedScope(e).then((function(e){e.data&&0!=e.data.length&&(i="Yes",o=r.CHG_GOV_VALUE_YES);var n={};n.attributes={RelatedScope:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update"+widget.id,n)}),(function(e){return Promise.reject(e)}))},showRelatedScopeCO:function(e){let i="No",o=r.CHG_GOV_VALUE_NO;n.getCORelatedScope(e).then((function(e){e.data&&0!=e.data.length&&(i="Yes",o=r.CHG_GOV_VALUE_YES);var n={};n.attributes={RelatedScope:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update"+widget.id,n)}),(function(e){return Promise.reject(e)}))},showIsGovernedDataForCA:function(e){let i="No",o=r.CHG_GOV_VALUE_NO,a=r.CHG_GOV_VALUE_NO;var s={};n.getGovernedDataForCA(e).then((function(e){e.data&&e.data[0]&&e.data[0].isGoverned&&"true"==e.data[0].isGoverned&&(i="Yes"),"Yes"==i&&(o=r.CHG_GOV_VALUE_YES,a=r.CHG_GOV_VALUE_YES),s.attributes={isGoverned:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,s)}),(function(e){return Promise.reject(e)}))},showChangeGroupDataForCA:function(e){let i,o=r.CHG_GOV_VALUE_UNASSIGNED,a=r.CHG_GOV_VALUE_UNASSIGNED;var s={};n.getChangeGroupData(e).then((function(e){e.changeaction&&e.changeaction.group?(i=e.changeaction.group.id,o=e.changeaction.group.title,n.getChangeActionForGroup(i).then((function(e){var n=r.Group_CA_Tooltip_Info;n+="\n";for(var l=e.changeactions,d=0;d<l.length;d++){n+=l[d].title+" ("+l[d].name+")",d!=l.length-1&&(n+="\n")}a=n,s.attributes={Group:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,s)}),(function(e){return Promise.reject(e)}))):(s.attributes={Group:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,s))}),(function(e){return Promise.reject(e)}))},makePropertyViewVisible:function(e){for(var t=e.childNodes,i=0;i<t.length;i++){var n=t[i].getAttribute("name");UWA.is(n)&&"EditProp_MasterContain"===n?t[i].style.display="block":t[i].style.display="none"}}});return l})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";let f={createRelatedScopeView:function(t,s){var r=this;t&&t.setStyles({position:"relative"});let g={};g=UWA.merge(g,s),g.target=t,g.columns=i.getColumns(),this.ChgCRrelatedScopeDataGridModel=new n(g.id),this.id=g.id,this.modelEvents=g.modelEvents,r.treeDocument=g.treeDocument=r.ChgCRrelatedScopeDataGridModel.createTreeDocument(),r.ChgCRrelatedScopeTreeModel=g.treeDocument,r.ChgCRrelatedScopeDataGridModel.registerCustomFilter(),r.relatedScopeView=new e(g),h.showLoader(g.target,r.relatedScopeView.loader),f.changeView(),this.subscribeToModelEvents(g.treeDocument),u.makeDroppable(g.target,r.dropHandler),c.getCRRelatedScope(s.id).then((async function(e){var t={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(t=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var i=await p.processedChangeRequestRelatedScope(e);if(r.chgCRrelatedScopeDataGridModel=new n(s.id),h.fetchMaturityStateCSS(i),r.chgCRrelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,i),h.hideLoader(g.target,r.relatedScopeView.loader),t&&t.length>0){var c=new Map,u=t.length;for(let e=0;e<t.length;e+=50){let i=[];i=u<50?t.slice(e,e+u):t.slice(e,e+50);for(var m=[],C=new Map,v=i,D=0;D<v.length;D++){var I=v[D];m.push(I.id),C.set(I.id,I)}var w=[];if(m.length>0){var _=p.commonPredicatedForFedSearch(),b=await p.callFederatedSearch(m,_);if(b&&b.results&&b.results.length>0)w=await p.processReportedAgainstFederatedSearch(b,C)}r.chgCRrelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,w),h.hideLoader(g.target,r.relatedScopeView.loader),c=new Map([...c,...C]),u-=50}if(c&&c.size>0){r.relatedScopeView.indexInfoDiv.show();var S=await d.recent();if(S&&S.results&&S.results.length>0){var y=p.filterNonIndexedDataNew(S,c);c.size!=y.length&&a.warn(o.CHG_GOV_Not_Accessable_Data,!0);var E=await p.processInformationForRecentReportedAgainst(y);h.fetchMaturityStateCSS(E),r.chgCRrelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,E)}}}else r.relatedScopeView.indexInfoDiv.hide();var O=p.getDefaultFilter(g.columns);g.treeDocument.setFilterModel(O),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgCRrelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgCRrelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgCRrelatedScopeTreeModel)})),0==g.treeDocument.getChildren().length?g.treeDocument._modelEvents.publish({event:"treeEmpty"}):g.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),f.updateViewBasedOnAccessBit(),f.changeView(),h.hideLoader(g.target,r.relatedScopeView.loader)}),(function(e){return h.hideLoader(g.target,r.relatedScopeView.loader),Promise.reject(e)}))},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);var t;f.ChgCRrelatedScopeDataGridModel.treeDocument;t=d.parseObjectInformation(e),f.ChgCRrelatedScopeDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()})),g.unsubscribe(`CR_RelatedScope:${widget.id}`),g.subscribe(`CR_RelatedScope:${widget.id}`,(function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRrelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRrelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRrelatedScopeTreeModel)}))})),g.unsubscribe(`${e.options.id} of ${widget.id}`),g.subscribe(`${e.options.id} of ${widget.id}`,(function(t){f.ChgCRrelatedScopeDataGridModel.filterView(t,e)})),g.unsubscribe(`${e.options.id} colorize ${widget.id}`),g.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){f.ChgCRrelatedScopeDataGridModel.enableColorizeView(t,e)})),g.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),g.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){f.ChgCRrelatedScopeDataGridModel.disableColorizeView(t,e)})),g.unsubscribe("updateIndexingIconForHideOrShowInCRReportedAgainst"),g.subscribe("updateIndexingIconForHideOrShowInCRReportedAgainst",(function(e){i.relatedScopeView.indexInfoDiv.show()})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-related-scope-object-selection-update")]||this.modelEvents.subscribe({event:"cr-related-scope-object-selection-update"},(function(e){f.handleObjectSelectionUpdate(e)}))},addExistingHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Reported Against",action:"CR>Reported Against>Add"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=f.ChgCRrelatedScopeDataGridModel.treeDocument.getAllDescendants();f.createExcludeListForSearch(t);const i=r.activateSearch();l.getGlobalVariable().is3DSpace&&i.socket.subscribeServer("SearchComServer",getTopWindow()),r.search(o.CHG_GOV_RelatedScope,"Program,Project Space,Model,Products,VPMReference,RFLVPMLogicalReference",f.OnSearchComplete,"relatedScope",i,void 0,void 0,{condition:"addExistingRelatedScope",extendedQuery:""})},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][8]&&null!=e[n][8]?e[n][8]:e[n][0],updateAction:"CONNECT",service:e[n][7]&&e[n][7].includes(":")?e[n][7].split(":")[0]:e[n][7],type:e[n][2],environment:l.getGlobalVariable().tenant});i.length&&(t.hideEmptyView(),f.ChgCRrelatedScopeDataGridModel.addExistingChildren(i))},globalSubscribeForCRRelatedScopeView:function(){s.addObserver("ChgCRrelatedScopeDataGridLayout","CO-AccessBit-Update",f.handleAccessBitUpdate),s.addObserver("ChgCRrelatedScopeDataGridLayout","Lifecycle.Modification",f.handleForMaturityUpdate),s.addObserver("ChgCRrelatedScopeDataGridLayout","CO-Properties-Update",f.handlePropertiesUpdateForRelatedScope)},handleAccessBitUpdate:function(e){"false"==e.accessBits.ManageReportedAgainst?(f.accessBit=!1,f.updateViewBasedOnAccessBit()):(f.accessBit=!0,f.updateViewBasedOnAccessBit())},updateViewBasedOnAccessBit:function(){0==f.accessBit&&f.relatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("add",{visibleFlag:!1})},removeHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Reported Against",action:"CR>Reported Against>Remove"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const i=f.treeDocument.getSelectedNodes();if(i.length>0){let e=[];for(var n=0;n<i.length;n++)e.push({id:i[n].options.grid.id,type:i[n].options.grid.type,updateAction:"DISCONNECT"});f.ChgCRrelatedScopeDataGridModel.removeExistingChildren(e).then((function(e){0==f.treeDocument.getAllDescendants().length&&t.showEmptyView()}),(function(e){}))}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){e.count>0&&f.accessBit?f.relatedScopeView.toolbar.updateNodeModel("remove",{visibleFlag:!0}):f.relatedScopeView.toolbar.updateNodeModel("remove",{visibleFlag:!1})},handleForMaturityUpdate:function(e){if(e){let t=f.treeDocument.getSelectedNodes();h.getHandleForMaturityUpdate(JSON.parse(e),t)}},handlePropertiesUpdateForRelatedScope:function(e){var t=f.ChgCRrelatedScopeTreeModel;t&&m.handlePropertiesOnUpdate(t,e)}};return f.globalSubscribeForCRRelatedScopeView(),f})),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCOAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f){"use strict";var v={getDataToBuildAddMemberPanel:function(e){var t=this;v.teamlayoutModel=e.model,v.id=e.id,v.options=e,v.modelForChangeCoordinator=new d,v.modelForAssignee=new d,v.modelForApprover=new d,v.modelForFollower=new d,t.filterByTrigramHandler(),v.accessBitAssignee=t.getAccessBitBoolean(v.options.accessBits.ManageAssignees),v.accessBitApprover=t.getAccessBitBoolean(v.options.accessBits.ManageRouteTemplates),v.accessBitFollower=t.getAccessBitBoolean(v.options.accessBits.ManageFollowers),v.accessBitCoordinator=t.generateAccessBitForCoordinator()},getAccessBitBoolean:function(e){const t=!/^(true|1)$/i.test(e);return console.log("accessBit",e),t},generateAccessBitForCoordinator:function(){const e=v.options.accessBits,t=e.SwapCoordinator,i=e.SetCoordinator;return void 0!==t&&!0===t?this.getAccessBitBoolean(t):void 0!==i&&!0===i?this.getAccessBitBoolean(i):void 0},setDataForAddMember:function(t){var i=[];return i.push({label:u.CHG_GOV_DataGrid_Column_ChangeCoordinator,id:"changeCoordinator",model:v.modelForChangeCoordinator,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_CCO",placeholder:u.CHG_Add_Member_Type_To_Search,customFilterMessage:u.CHG_No_Search_found,disabled:v.accessBitCoordinator,multiSearchMode:!1,supportType:["person"]}),i.push({label:u.CHG_GOV_Members_DataGrid_Assignee,id:"assignee",model:v.modelForAssignee,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Assignee",placeholder:u.CHG_Add_Member_Type_To_Search,customFilterMessage:u.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"],disabled:v.accessBitAssignee}),i.push({label:u.CHG_GOV_Members_DataGrid_Approver,id:"approver",model:v.modelForApprover,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Approver",customFilterMessage:u.CHG_No_Search_found,multiSearchMode:!0,supportType:["routetemplate"],disabled:v.accessBitApprover}),i.push({label:u.CHG_GOV_Members_DataGrid_InformedUser,id:"follower",model:v.modelForFollower,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Follower",placeholder:u.CHG_Add_Member_Type_To_Search,customFilterMessage:u.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"],disabled:v.accessBitFollower}),{title:u.CHG_Member_AddMember_Title,objectTitle:v.objectTitle,target:v.options.target,fields:i,addMemberSubmitHandler:this.addmember,searchFromModelAndUniqAndAdd:n.searchFromModelAndUniqAndAdd,teamlayoutModel:v.teamlayoutModel,makeDroppable:e.makeDroppable,type:"ChangeOrder"}},setApproversDiv:function(){v.approverDivDisable=!1,v.approversSupportType=["person","routetemplate"],"Route Template"===C.reviewerType.typeOfReviewer&&0==v.accessBitApprover?v.approverDivDisable=!0:"Person"===C.reviewerType.typeOfReviewer&&(v.approversSupportType=["person"],v.approverDivDisable=v.accessBitApprover)},launchAddMemberPanel:function(){var e={commandInfo:{type:"Change Request",facet:"Members",action:"CR>Members>Add Member"}};m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=v.setDataForAddMember(),i=new g(t);(new h).buildAddMemberDialog(i)},addmember:async function(e,t){let i=e.assignee,o=e.approver?e.approver:"",a=e.changeCoordinator,s=e.follower;var r=f.makeUpdateMemberJson("CONNECT",i,o,s,a,t),l=v.id;try{for(var d=await C.updateMembers(t,l,r),c=n.processMemberList(d,!0),p=await new Promise(((e,t)=>{require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(t){e(t)}))})),u=p.membersTreeModel.getAllDescendants(),g=[],h=0;h<c.length;h++){var m=c[h];if("Route Template"!=m.type){"Coordinator"==m.role&&(f.isChangeCoordinatorConnected=!0,p.isChangeCoordinatorExists=!0);for(var D=m.id,I=!1,w=0;w<u.length;w++)if(D==u[w].options.grid.id){I=!0;break}if(1==I){p.membersTreeModel.prepareUpdate();var _=u[w].options.grid.role,b="";if(m.role.includes(",")){var S=m.role.split(",");for(let e=0;e<S.length;e++)b+=", "+f.getRoleNLSValue(S[e].trim()),u[w].options.grid.roles.push(S[e].trim())}else b=", "+f.getRoleNLSValue(m.role),u[w].options.grid.roles.push(m.role);var y=u[w].options.grid.role,E=","+m.role;u[w].options.grid.roleList=_.concat(b),u[w].options.grid.role=y.concat(E),g.push(u[w].options.grid),p.membersTreeModel.pushUpdate()}else g.push(m)}else g.push(m),f.isRouteTemplateConnected=!0}g.length>0&&p.addNodesInLayout(g)}catch(e){console.error(e)}},filterByTrigramHandler:function(){v.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new p).getTrigramNameFilter()),v.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new p).getTrigramNameFilter()),v.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new p).getTrigramNameFilter()),v.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new p).getTrigramNameFilter())}};return v})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p){"use strict";var u={showRMBMenuOnGrid:function(e){return new Promise((function(t,i){const o=[];let a=!1,c=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),p=[],g=[],h=[];c.forEach((e=>{p.push(e.options.grid.id),g.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&h.push(e.options.grid.serviceBasedObjId)})),c.length>1&&(a=!0);const m=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),C=e.cellInfos.nodeModel.options.grid.id,f=e.cellInfos.nodeModel.options.grid.type,v=e.cellInfos.nodeModel.options.grid.name,D=e.cellInfos.nodeModel.options.grid.displayType,I=e.cellInfos.nodeModel.options.grid.serviceBasedObjId;let w=[];w.push(f),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(w=w.concat(e.cellInfos.nodeModel.options.grid.kind));const _={objectId:null!=I?I:C,objectType:f,objectTaxonomies:w,displayName:v,displayType:D,facetName:"dependency"},b=m.openWith(_);let S={};S.objectID=C,S.objectTitle=v,S.objectType=f,S.serviceId="3DSpace",S.label=e.cellInfos.nodeModel.options.grid.title,S.changeType="Change Request",S.facet="Affected Items",S.action="CR>Change Impacts",a?(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(u.getRelationalExplorerMenu(g)),h.length>0&&(o.push(d.getMaturityMenu(void 0,h)),o.push(u.getTransferMenu(e)),o.push(r.getDownloadMenu(h)),!h.length>1&&o.push(r.getPreviewMenu(h))),t(o)):(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(u.getRelationalExplorerMenu(g)),b.then((i=>{i&&o.push(i),h.length>0&&(o.push(d.getMaturityMenu(e)),o.push(u.getTransferMenu(e))),o.push(u.getChangeImpacts(S)),s.getDocuments(h).then((function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(o.push(r.getDownloadMenu(h)),o.push(r.getPreviewMenu(h))),t(o)})).catch((e=>{console.log(e),t(o)}))})))}))},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Move"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)"CSD"!=n[a].options.grid.sourceType&&o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(o)}))}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_Change_Impact_Command_Label,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Change Impacts"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Relations"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){t.openRelationalExplorer(e)}))}}}}};return u})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownView",["UWA/Core","UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Menu/ContextualMenu","DS/Controls/Find","DS/Controls/Label","DS/Controls/Button","DS/Controls/ComboBox","DS/Controls/TooltipModel","DS/Controls/Loader","DS/Utilities/Utils","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgComponentUtils","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","require","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O,G){"use strict";return t.extend({init:function(e){this._parent(e),this.options=e,this.fdURCDGV=null,this.fdRCTilesView=null,this.accessBits=this.options.contextDetails.userAccess,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:y.getGlobalVariable().get3DSpaceURL(),securityContext:y.getGlobalVariable().getSecurityContext(),isNative:y.getGlobalVariable().isNative}}},render:function(){if(this.options.fdTarget){let t=this,n=D.getURCColumns(this.options),l={treeDocument:null,columns:n,allowUnsafeHTMLContent:!1,showModelChangesFlag:!1,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:G.CHG_GOV_DataGrid_PlaceHolder_Fetch_RealizedChange,identifier:"CAFlowdownURCDGV",useWidgetPreferencesFlag:!0,showContextualMenuColumnFlag:!0,useWidgetPreferencesFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1){let i=null;return i=e.cellInfos.columnID&&7===e.cellInfos.columnID?e.cellInfos.nodeModel.options.grid.before_ref_details?{id:e.cellInfos.nodeModel.options.grid.before_details.id,objectId:e.cellInfos.nodeModel.options.grid.before_ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0],displayName:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:identifier"][0],displayType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.before_details?{id:e.cellInfos.nodeModel.options.grid.before_details.id,objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0],displayName:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:identifier"][0],displayType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.ref_details?{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.type,displayName:e.cellInfos.nodeModel.options.grid.ref_details.name,displayType:e.cellInfos.nodeModel.options.grid.ref_details.typeNLS}:{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.typeNLS}:e.cellInfos.nodeModel.options.grid.ref_details?{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.type,displayName:e.cellInfos.nodeModel.options.grid.ref_details.name,displayType:e.cellInfos.nodeModel.options.grid.ref_details.typeNLS}:{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.typeNLS},y.getGlobalVariable().isNative?D.getNativeContextualMenu(i,e,!(!t.accessBits.FlowdownTo||"true"!=t.accessBits.FlowdownTo)):D.getDashboardContextualMenu(i,e,!(!t.accessBits.FlowdownTo||"true"!=t.accessBits.FlowdownTo))}e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!0,insertRow:!1})}return i},onDragStartRowHeader:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,b.readyDragContent(e,i)},onDragStartCell:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds;var n={};8==i.columnID&&1==i.nodeModel.options.grid.selected_proposed_items.length?(n.objectId=i.nodeModel.options.grid.selected_proposed_items[0].id,n.objectType=i.nodeModel.options.grid.selected_proposed_items[0].type,n.displayName=i.nodeModel.options.grid.selected_proposed_items[0].displayName,n.displayType=i.nodeModel.options.grid.selected_proposed_items[0].displayType,n.i3dx=i.nodeModel.options.grid.selected_proposed_items[0].i3dx,n.serviceId=i.nodeModel.options.grid.selected_proposed_items[0].serviceId,b.readyDragContent(e,i,n)):9==i.columnID&&1==i.nodeModel.options.grid.selected_resolution_items.length?(n.objectId=i.nodeModel.options.grid.selected_resolution_items[0].id,n.objectType=i.nodeModel.options.grid.selected_resolution_items[0].type,n.displayName=i.nodeModel.options.grid.selected_resolution_items[0].displayName,n.displayType=i.nodeModel.options.grid.selected_resolution_items[0].displayType,n.i3dx=i.nodeModel.options.grid.selected_resolution_items[0].i3dx,n.serviceId=i.nodeModel.options.grid.selected_resolution_items[0].serviceId,b.readyDragContent(e,i,n)):b.readyDragContent(e,i)}};l=e.merge(l,this.options),this.fdURCDGV=new i(l),this.fdURCDGV.setToolbar(v.getFlowdownURCToolbarDefinition(this.options)),this.fdURCDGV.getCustomViewsManager().onCustomViewsSave=function(e,i){I.onCustomViewsSave(e,i,t.options.custom_view_options)},this.fdURCDGV.registerReusableCellContent({id:"fdURCRevColId",buildContent:function(){return new e.createElement("div",{class:"realizedRevCol",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px",width:20,height:20}})}}),this.fdURCDGV.registerReusableCellContent({id:"fdURCEmptyColId",buildContent:function(){return new e.createElement("div",{class:"realizedEmptyCol",styles:{"padding-left":"5px",width:20,height:20}})}}),n[4].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.fdURCDGV.reuseCellContent("fdURCRevColId");i.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.fdURCDGV.reuseCellContent("fdURCEmptyColId"))},this.findWidget=new s({displayMatchCaseToggle:!1,relatedWidget:this.fdURCDGV,onFindRequest:this.fdURCDGV.setFindStr,onFindPreviousResult:this.fdURCDGV.goToPreviousMatchingCell,onFindNextResult:this.fdURCDGV.goToNextMatchingCell,onFindClose:this.fdURCDGV.onFindClose}),this.mainContainer=e.createElement("div",{id:"fd-realized-main-container",styles:{width:"100%",height:"100%",display:"inline-block"}}),this.headerDiv=e.createElement("div",{id:"fd-realized-header-div",styles:{}}),this.headerLabelDiv=e.createElement("div",{id:"fd-realized-header-label-div"}),this.labelDiv=e.createElement("div",{id:"fd-realized-label-div",text:G.CHG_GOV_UCA,styles:{color:"#77797C",fontWeight:"bold",marginRight:"5px",paddingLeft:"11px"}}),this.labelDiv.tooltipInfos=new c({title:G.CHG_GOV_UCA,position:"left"}),this.caCBDiv=e.createElement("div",{id:"fd-ca-cb-div",styles:{marginRight:"5px"}}),this.caCBBox=new d({elementsList:this.options.ucaList,enableSearchFlag:!1}),this.caCBBox.addEventListener("change",(function(e){C.publish("ECM_GOV_Flowdown_GET_URC:"+(widget?widget.id:""),t.caCBBox.value)})),this.caCBBox.inject(this.caCBDiv),this.indexInfoDiv=e.createElement("div",{id:"realized-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new r({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new c({title:G.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.labelDiv.inject(this.headerLabelDiv),this.caCBDiv.inject(this.headerLabelDiv),this.indexInfoDiv.inject(this.headerLabelDiv),this.headerLabelDiv.inject(this.headerDiv),this.findViewDiv=e.createElement("div",{id:"fd-realized-find-view-div"}),this.findWidget.inject(this.findViewDiv),this.findViewDiv.inject(this.headerDiv),this.toolbarDiv=e.createElement("div",{id:"fd-realized-toolbar-div",styles:{minWidth:"100px"}}),this.fdURCDGV.getToolbar().inject(this.toolbarDiv),this.toolbarDiv.inject(this.headerDiv),this.fdURCDGVDiv=e.createElement("div",{id:"fd-realized-dgv-div",styles:{width:"100%",height:"calc( 100% - 32px )",position:"relative"}}),this.fdURCDGV.inject(this.fdURCDGVDiv),this.mainContainer.addContent(this.headerDiv),this.mainContainer.addContent(this.fdURCDGVDiv),this.mainContainer.inject(this.options.fdTarget),this.options.custom_view_options.dgvHandle=this.fdURCDGV,this.options.custom_view_options.ootb_columns=[...n],this.options.custom_view_options.dgvDiv=this.mainContainer,this.findWidget.hide();let u={flowdown_status:{stdTemplate:"enumCombo",semantics:{possibleValues:{"Analysis Pending":G.CHG_GOV_AnalysisPending,Ignored:G.CHG_GOV_Ignored,"Flowdown Pending":G.CHG_GOV_FlowdownPending,"Flowdown Complete":G.CHG_GOV_FlowdownComplete},valueType:"enumValueToProperty"}}};this.fdURCDGV.getTypeRepresentationFactory().registerTypeRepresentations(u),this.fdURCDGV.addEventListener("postEdit",(function(e,t){10==t.columnID&&C.publish("FDDGV_UPDATE_FD_STATUS:"+(widget?widget.id:""),t.nodeModel.options.grid)})),this.fdURCDGV.addEventListener("allCellsRendered",(function(){t.fdURCDGV.buildStatusBar([{type:o.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:G.CHG_GOV_StatusBar_TotalItems+(null==t.fdURCDGV.getTreeDocument()?0:t.fdURCDGV.getTreeDocument().getAllDescendants().length)}},{type:o.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:G.CHG_GOV_StatusBar_SelectedItems+(null==t.fdURCDGV.getTreeDocument()?0:t.fdURCDGV.getTreeDocument().getSelectedNodes().length)}}])})),this.fdURCDGV.addEventListener(m.POINTERHIT,(function(e,i){if(1==e.multipleHitCount){if(i&&4===i.columnID)"realizedRevCol"===e.target.className&&I.launchVersionExplorer({id:"TRUE"===i.nodeModel.options.grid.isInstanceOperation?i.nodeModel.options.grid.ref_details.id:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.type,name:i.nodeModel.options.grid.name});else if(i&&7===i.columnID){if("realized_op_previous_obj_revision"===e.target.className)I.launchVersionExplorer({id:e.target.parentElement.getAttribute("id"),type:e.target.parentElement.getAttribute("type"),name:e.target.parentElement.getAttribute("name")});else if(e.target.className.contains("realized_op_previous_obj_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};a.buildAndDisplayContextualMenu(e.target,t)}}else if(i&&8===i.columnID)if("selected_proposed_revision"===e.target.className)I.launchVersionExplorer({id:"NEW_MIB"==i.nodeModel.options.grid.selected_proposed_items[0].sourceType?i.nodeModel.options.grid.selected_proposed_items[0].serviceBasedObjId:i.nodeModel.options.grid.selected_proposed_items[0].id,type:i.nodeModel.options.grid.selected_proposed_items[0].type,name:i.nodeModel.options.grid.selected_proposed_items[0].name});else if(e.target.className.contains("selected_proposed_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};a.buildAndDisplayContextualMenu(e.target,t)}else"selected_proposed_multiple"===e.target.className&&(t.sel_prop_dgv=w.launchDGV(i.nodeModel.options.grid.selected_proposed_items,{target:widget.body,title:G.CHG_GOV_Selected_Proposed,remove_req:t.accessBits.FlowdownTo&&"true"==t.accessBits.FlowdownTo?"FD_Proposed":void 0}));else if(i&&9===i.columnID)if("selected_resolution_revision"===e.target.className)I.launchVersionExplorer({id:"NEW_MIB"==i.nodeModel.options.grid.selected_resolution_items[0].sourceType?i.nodeModel.options.grid.selected_resolution_items[0].serviceBasedObjId:i.nodeModel.options.grid.selected_resolution_items[0].id,type:i.nodeModel.options.grid.selected_resolution_items[0].type,name:i.nodeModel.options.grid.selected_resolution_items[0].name});else if(e.target.className.contains("selected_resolution_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};a.buildAndDisplayContextualMenu(e.target,t)}else"selected_resolution_multiple"===e.target.className&&(t.sel_res_dgv=w.launchDGV(i.nodeModel.options.grid.selected_resolution_items,{target:widget.body,title:G.CHG_GOV_Selected_Resolution,remove_req:t.accessBits.FlowdownTo&&"true"==t.accessBits.FlowdownTo?"FD_Resolution":void 0}))}else 2==e.multipleHitCount&&i.nodeModel.select(!0)})),this.globalSubscribeForFlowdownGridView(),this.handleAccessBitUpdate(this),this.loader=(new p).inject(this.options.fdTarget);let g=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];I.registerCustomEventsOnDGV(g,this.fdURCDGV,this.options.custom_view_options)}},dropHandler:function(e){},globalSubscribeForFlowdownGridView:function(){g.addObserver("ChgCAFlowdownView","CO-AccessBit-Update",this.handleAccessBitUpdate.bind(this))},handleAccessBitUpdate:function(e){var t=this;e.id==t.options.contextDetails.id&&(t.accessBits=e.accessBits,"false"==e.accessBits.FlowdownTo?t.fdURCDGV.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!1}):t.fdURCDGV.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!0}))},loadCustomColumns:function(){let e=S.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&_.restoreCustomViews(t,this.options.custom_view_options)}},registerDGVTreeDocEvents:function(){var e=this;this.fdURCDGV.getTreeDocument().getXSO().onAdd((function(t){e.publishProperties(t),e.fdURCDGV.getTreeDocument().getSelectedNodes().some((function(e){return(void 0!==e.options.grid.before_details||void 0!==e.options.grid.before_ref_details)&&"Remove Usage"!==e.options.grid.change&&"Configured Removal"!==e.options.grid.change}))&&e.fdURCDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!0})})),this.fdURCDGV.getTreeDocument().getXSO().onRemove((function(t){e.publishProperties(t),e.fdURCDGV.getTreeDocument().getSelectedNodes().some((function(e){return(void 0!==e.options.grid.before_details||void 0!==e.options.grid.before_ref_details)&&"Remove Usage"!==e.options.grid.change&&"Configured Removal"!==e.options.grid.change}))?e.fdURCDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!0}):e.fdURCDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!1})}))},editFlowdownDialogHandler:function(e){var t={};t.model=e,t.caID=this.options.contextDetails.id;var i=new ChgCAProposedForm(t),n=new ChgSlideinForm;n.buildSlideIn(i),n.showSlideIn()},publishProperties:function(e){this.fdURCDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:G.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),this.options.applicationChannel.publish({event:"update_object_select",data:{node:e,contextID:this.options.contextDetails.id,contextType:this.options.contextDetails.isKindOfType,isNodeAdded:!0}})},prepareUpdateView:function(){this.fdURCDGV.prepareUpdateView()},pushUpdateView:function(){this.fdURCDGV.pushUpdateView()},updateRenderedRow:function(e){this.fdURCDGV.updateRenderedRow(e,{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1})},setTreeDocument:function(e){this.fdURCDGV.treeDocument&&this.fdURCDGV.treeDocument.empty(),this.fdURCDGV.treeDocument=e,this.registerDGVTreeDocEvents()},expandCollapseNodesInDGV:function(e){"EXPAND"===e?this.fdURCDGV.treeDocument.expandAll():"COLLAPSE"===e&&this.fdURCDGV.treeDocument.collapseAll()},toggleFindViewInDGV:function(e){!1===this.findWidget.visibleFlag?(this.findWidget.show(),this.findWidget.focus()):!0===this.findWidget.visibleFlag&&this.findWidget.hide()},updateDGVForEmptyView:function(){this.fdURCDGV.getToolbar().updateNodeModel("cmd_find",{visibleFlag:!1}),this.fdURCDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!1}),this.fdURCDGV.getToolbar().updateNodeModel("expand_collapse_menu",{visibleFlag:!1}),this.fdURCDGV.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!1}),this.fdURCDGV.placeholder=G.CHG_GOV_DataGrid_PlaceHolder_No_RealizedChange,this.indexInfoDiv.hide()},updateDGVForNonEmptyView:function(){this.fdURCDGV.getToolbar().updateNodeModel("cmd_find",{visibleFlag:!0}),this.fdURCDGV.getToolbar().updateNodeModel("change_details_menu",{visibleFlag:!1}),this.fdURCDGV.getToolbar().updateNodeModel("expand_collapse_menu",{visibleFlag:!0}),this.fdURCDGV.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!(!this.accessBits.FlowdownTo||"true"!=this.accessBits.FlowdownTo)}),this.fdURCDGV.placeholder=G.CHG_GOV_DataGrid_PlaceHolder_Fetch_RealizedChange,this.labelDiv.show(),this.indexInfoDiv.hide()},updateDGVForIndexInfoView:function(){this.indexInfoDiv.show()},updateTaggerFilter:function(){var e=this;"false"==y.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(),t._cleanBIFilterProxy(),t.cleanPathTag();var i=new Set;e.fdURCDGV.treeDocument.getAllDescendants().forEach((e=>{var t=e.options.grid;if("FALSE"==t.isInstanceOperation&&t.where_details&&t.where_details.id){var n=t.where_details.id;i.add(n)}else if("TRUE"==t.isInstanceOperation){if(t.ref_details&&t.ref_details.id){var o=t.ref_details.id;i.add(o)}if(t.after_details&&t.after_details.id){var a=t.after_details.id;i.add(a)}}}));var n=[];i.forEach((e=>n.push(e)));t._onSetPathTagsForProposedRealized(n,{options:{id:"caFlowdownRCDGV"}})}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownController",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownURCModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","UWA/Class/Model","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDependencyServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgRealizedServices","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgNativeInitService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f){"use strict";return e.Class.extend({init:function(e){this._parent(e),this.options=e,this.subscribeToPlatformEvents(),this.flowdownView=null},createFlowdownView:async function(){let e=this;this.options.fdTarget.setStyles({position:"relative"}),this.options.ucaList=[];let t=c.changeActionDependencyModel;if(t){let i=t.get("upstreamDependencyObjects");if(i&&i.dependencyLinks&&Array.isArray(i.dependencyLinks)){i.dependencyLinks.forEach((function(t,i){if("Flowdown"===t.dependencyValueType&&"Cancelled"!=t.state){let i={value:t.id.substring(4),label:t.title,icon:"change-action",description:t.title};e.options.ucaList.push(i)}}))}}this.flowdownView=new i(this.options),await this.flowdownView.render(),this.loadURCData(this.options.ucaList[0].value),this.flowdownView.fdURCDGV.onDragOverCell=async function(e,t){return(8==t.columnID||9==t.columnID)&&(e.preventDefault(),t.cellView.elements.container.addClassName("cell-hovered"),void 0!==t&&(t.dropPosition="middle"),!0)},this.flowdownView.fdURCDGV.onDragLeaveCell=async function(e,t){return e.preventDefault(),t.cellView.elements.container.removeClassName("cell-hovered"),!0},this.flowdownView.fdURCDGV.onDropCell=async function(t,i){if(8==i.columnID||9==i.columnID){var n=[];i.cellView.elements.container.removeClassName("cell-hovered"),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.dataTransfer&&t.dataTransfer.dropEffect&&(t.dataTransfer.dropEffect="copy");var o=t.dataTransfer.getData("text");if((o=JSON.parse(o)).data.items.forEach((function(e,t){e.path&&e.path.length>1?n.push(e.path[e.path.length-2].resourceid):n.push(e.objectId)})),i.nodeModel.options&&i.nodeModel.options.grid){let t=i.nodeModel.options.grid.where_details.id,o=i.nodeModel.options.grid.activity_id,a={where_id:t,origin_ca_id:e.options.origin_ca_id,target_ca_id:e.options.caid,realized_activity_id:o,cmd:"",proposedToAdd:n,callback:e.updateSelectedProposed.bind(e)};8==i.columnID?a.cmd="AddProposedFromRelations":a.cmd="AddResolutionFromRelations",await h.flowdownRealizedChanges(a)}}return!0}},loadURCData:async function(e){this.options.origin_ca_id=e,a.showLoader(this.options.fdTarget.parentElement,this.flowdownView.loader),this.flowdownURCModel&&this.flowdownURCModel.resetModel(),this.flowdownURCModel=new n,this.flowdownURCModel.createTreeDocument();let t=await r.getTimestamp(),i=l.processTimestampData(t),o=await r.getCARealizedChanges(e,"TRACKED",i,!0,this.options.caid).catch((e=>{console.error(e),p.error(C.CHG_GOV_GET_REALIZED_FAIL),a.hideLoader(this.options.fdTarget.parentElement,this.flowdownView.loader)}));if(1==o.success&&200==o.statusCode)try{let e=l.getPoliciesFromFedResponse(o.data),t=await r.getStatesAttributes(e);a.addCSSMaturityClasses(e,"wux-controls-label",t),this.flowdownView.prepareUpdateView();var s=await l.processCARealizedChangesData(o.data).catch((e=>{console.error(e),p.error(C.CHG_GOV_PARSE_REALIZED_KO),a.hideLoader(this.options.fdTarget.parentElement,this.flowdownView.loader)}));if(this.flowdownURCModel.updateTreeDocument(s.realized_changes),this.flowdownURCModel.setFilterModel(),this.flowdownURCModel.registerCustomFilter(),this.flowdownView.setTreeDocument(this.flowdownURCModel.getTreeDocument()),this.options.isSelected){this.flowdownView.updateTaggerFilter();let e=g.getCurrentModel();e.userAccess=this.options.contextDetails.userAccess,g.setCurrModel(e),g.setCallbacksForOpenWith("FlowdownURCDGV")}0===this.flowdownURCModel.getTreeDocument().getAllDescendants().length?this.flowdownView.updateDGVForEmptyView():this.flowdownView.updateDGVForNonEmptyView(),this.flowdownView.pushUpdateView(),a.hideLoader(this.options.fdTarget.parentElement,this.flowdownView.loader),!1!==s.AllIndexed&&!1!==s.AllOK||this.flowdownView.updateDGVForIndexInfoView(),this.flowdownView.loadCustomColumns()}catch(e){console.error(e),p.error(C.CHG_GOV_ADD_REALIZED_KO),a.hideLoader(this.options.fdTarget.parentElement,this.flowdownView.loader)}else console.error(error),p.error(C.CHG_GOV_GET_REALIZED_RESPONSE_KO),a.hideLoader(this.options.fdTarget.parentElement,this.flowdownView.loader)},updateSelectedProposed:async function(e,t){let i=this.flowdownURCModel.getTreeDocument().getAllDescendants().filter((e=>e.options.grid.activity_id===t.realized_activity_id))[0];var n;if(e&&e.data[0])if(e.data[0].proposedToRemove){for(let t=0;t<e.data[0].proposedToRemove.length;t++){let n=e.data[0].proposedToRemove[t];for(let e=0;e<i.options.grid.selected_proposed_items.length;e++)if(i.options.grid.selected_proposed_items[e].id===n.id){i.options.grid.selected_proposed_items.splice(e,1);break}}this.flowdownView.sel_prop_dgv&&this.flowdownView.sel_prop_dgv.removeNodes(e.data[0].proposedToRemove),this.flowdownView.prepareUpdateView(),i.options.grid.selected_proposed=this.flowdownURCModel.getSelectedProposed(i.options.grid),i.options.grid.flowdown_status="Flowdown Pending",i.options.grid.flowdown_statusORG="Flowdown Pending",this.flowdownView.updateRenderedRow(i._getRowID()),this.flowdownView.pushUpdateView(),u.getGlobalVariable().CHGRefreshProposedForFlowdownChanges=!0}else if(e.data[0].resolutionToRemove){for(let t=0;t<e.data[0].resolutionToRemove.length;t++){let n=e.data[0].resolutionToRemove[t];for(let e=0;e<i.options.grid.selected_resolution_items.length;e++)if(i.options.grid.selected_resolution_items[e].id===n.id){i.options.grid.selected_resolution_items.splice(e,1);break}}this.flowdownView.sel_res_dgv&&this.flowdownView.sel_res_dgv.removeNodes(e.data[0].resolutionToRemove),this.flowdownView.prepareUpdateView(),i.options.grid.selected_resolution=this.flowdownURCModel.getSelectedResolution(i.options.grid),i.options.grid.flowdown_status="Flowdown Pending",i.options.grid.flowdown_statusORG="Flowdown Pending",this.flowdownView.updateRenderedRow(i._getRowID()),this.flowdownView.pushUpdateView()}else if(e.data[0].proposedToAdd&&e.data[0].proposedToAdd.length>0){if(this.flowdownView.prepareUpdateView(),e.data[0].proposedToAdd[0]&&e.data[0].proposedToAdd[0].idsOfNonIndexedData&&(n=e.data[0].proposedToAdd[0].idsOfNonIndexedData,e.data[0].proposedToAdd.splice(0,1)),n&&n.length>0){var o=new Map,a=n.length,s=50;for(let e=0;e<n.length;e+=s){let t;t=a<s?n.slice(e,e+a):n.slice(e,e+s);for(var r=[],c=new Map,g=0;g<t.length;g++){var h=t[g];r.push(h.id),c.set(h.id,h)}if(r.length>0){var m=l.commonPredicatedForFedSearch();(I=await l.callFederatedSearch(r,m))&&I.results&&I.results.length>0&&(D=l.processCAProposedChangeResolutionFedSearch(I,c)),D&&D.length>0&&D.forEach((function(e){i.options.grid.selected_proposed_items?0===i.options.grid.selected_proposed_items.filter((t=>t.id===e.id)).length&&i.options.grid.selected_proposed_items.push(e):(i.options.grid.selected_proposed_items=[],i.options.grid.selected_proposed_items.push(e))}))}o=new Map([...o,...c]),a-=s}if(o&&o.size>0)if((v=await d.recent())&&v.results&&v.results.length>0){var f=l.filterNonIndexedDataNew(v,o);o.size!=f.length&&p.warn(C.CHG_GOV_Not_Accessable_Data),(w=await l.processInformationForRecentResolution(f))&&w.length>0&&w.forEach((function(e){i.options.grid.selected_proposed_items?0===i.options.grid.selected_proposed_items.filter((t=>t.id===e.id)).length&&i.options.grid.selected_proposed_items.push(e):(i.options.grid.selected_proposed_items=[],i.options.grid.selected_proposed_items.push(e))}))}}for(let t=0;t<e.data[0].proposedToAdd.length;t++){let n=e.data[0].proposedToAdd[t],o=n.type,a=n.status,s=await d.getNLSValuesPromise({"ds6w:type":[o],"ds6w:status":[a]}),r=s["ds6w:type"][n.type],l=n.status?s["ds6w:status"][n.status]:"",c=n.status?s["ds6w:status"][n.status]:"";n.typeNLS=r,n.maturityWithBadge=l,n.maturityNLS=c,i.options.grid.selected_proposed_items?0===i.options.grid.selected_proposed_items.filter((e=>e.id===n.id)).length&&i.options.grid.selected_proposed_items.push(n):(i.options.grid.selected_proposed_items=[],i.options.grid.selected_proposed_items.push(n))}i.options.grid.selected_proposed=this.flowdownURCModel.getSelectedProposed(i.options.grid),(i.options.grid.selected_proposed_items&&i.options.grid.selected_proposed_items.length>0||i.options.grid.selected_resolution_items&&i.options.grid.selected_resolution_items.length>0)&&(i.options.grid.flowdown_status="Flowdown Pending",i.options.grid.flowdown_statusORG="Flowdown Pending"),this.flowdownView.updateRenderedRow(i._getRowID()),this.flowdownView.pushUpdateView(),u.getGlobalVariable().CHGRefreshProposedForFlowdownChanges=!0}else if(e.data[0].resolutionToAdd){if(this.flowdownView.prepareUpdateView(),e.data[0].resolutionToAdd[0]&&e.data[0].resolutionToAdd[0].idsOfNonIndexedData&&(n=e.data[0].resolutionToAdd[0].idsOfNonIndexedData,e.data[0].resolutionToAdd.splice(0,1)),n&&n.length>0){var v;o=new Map,a=n.length,s=50;for(let e=0;e<n.length;e+=s){let t;t=a<s?n.slice(e,e+a):n.slice(e,e+s);var D;for(r=[],c=new Map,g=0;g<t.length;g++){h=t[g];r.push(h.id),c.set(h.id,h)}if(r.length>0){var I;m=l.commonPredicatedForFedSearch();(I=await l.callFederatedSearch(r,m))&&I.results&&I.results.length>0&&(D=l.processCAProposedChangeResolutionFedSearch(I,c)),D&&D.length>0&&D.forEach((function(e){i.options.grid.selected_resolution_items?0===i.options.grid.selected_resolution_items.filter((t=>t.id===e.id)).length&&i.options.grid.selected_resolution_items.push(e):(i.options.grid.selected_resolution_items=[],i.options.grid.selected_resolution_items.push(e))}))}o=new Map([...o,...c]),a-=s}if(o&&o.size>0)if((v=await d.recent())&&v.results&&v.results.length>0){var w;f=l.filterNonIndexedDataNew(v,o);o.size!=f.length&&p.warn(C.CHG_GOV_Not_Accessable_Data),(w=await l.processInformationForRecentResolution(f))&&w.length>0&&w.forEach((function(e){i.options.grid.selected_resolution_items?0===i.options.grid.selected_resolution_items.filter((t=>t.id===e.id)).length&&i.options.grid.selected_resolution_items.push(e):(i.options.grid.selected_resolution_items=[],i.options.grid.selected_resolution_items.push(e))}))}}for(let t=0;t<e.data[0].resolutionToAdd.length;t++){let n=e.data[0].resolutionToAdd[t],o=n.type,a=n.status,s=await d.getNLSValuesPromise({"ds6w:type":[o],"ds6w:status":[a]}),r=s["ds6w:type"][n.type],l=n.status?s["ds6w:status"][n.status]:"",c=n.status?s["ds6w:status"][n.status]:"";n.typeNLS=r,n.maturityWithBadge=l,n.maturityNLS=c,i.options.grid.selected_resolution_items?0===i.options.grid.selected_resolution_items.filter((e=>e.id===n.id)).length&&i.options.grid.selected_resolution_items.push(n):(i.options.grid.selected_resolution_items=[],i.options.grid.selected_resolution_items.push(n))}i.options.grid.selected_resolution=this.flowdownURCModel.getSelectedResolution(i.options.grid),(i.options.grid.selected_proposed_items&&i.options.grid.selected_proposed_items.length>0||i.options.grid.selected_resolution_items&&i.options.grid.selected_resolution_items.length>0)&&(i.options.grid.flowdown_status="Flowdown Pending",i.options.grid.flowdown_statusORG="Flowdown Pending"),this.flowdownView.updateRenderedRow(i._getRowID()),this.flowdownView.pushUpdateView()}},updateFlowdownStatus:function(e,t){let i=this.populateOptions();i.callback=this.updateSelectedProposedforFDStatus.bind(this),i.failureCallback=this.revertFDStatusForUpdateFailure.bind(this),"Analysis Pending"==e.flowdown_status?e.selected_proposed_items&&e.selected_proposed_items.length>0||e.selected_resolution_items&&e.selected_resolution_items.length>0?(p.error(C.CHG_GOV_Flowdown_Status_Change_Fail),t.revertFDStatusForUpdateFailure(C.CHG_GOV_Flowdown_Status_Change_Fail,i)):(i.cmd="AnalysisPending",h.flowdownRealizedChanges(i)):"Flowdown Pending"==e.flowdown_status?(i.cmd="FlowdownPending",h.flowdownRealizedChanges(i)):"Ignored"==e.flowdown_status?e.selected_proposed_items&&e.selected_proposed_items.length>0||e.selected_resolution_items&&e.selected_resolution_items.length>0?(p.error(C.CHG_GOV_Flowdown_Status_Change_Fail),t.revertFDStatusForUpdateFailure(C.CHG_GOV_Flowdown_Status_Change_Fail,i)):(i.cmd="Ignored",h.flowdownRealizedChanges(i)):"Flowdown Complete"==e.flowdown_status&&(i.cmd="FlowdownComplete",h.flowdownRealizedChanges(i))},populateOptions:function(){let e={},t=this.flowdownURCModel.getTreeDocument().getSelectedNodes(),i=t[0].options.grid.where_details.id,n=t[0].options.grid.activity_id;return e={where_id:i,origin_ca_id:this.options.origin_ca_id,target_ca_id:this.options.caid,realized_activity_id:n,callback:this.updateSelectedProposed.bind(this)},e},updateSelectedProposedforFDStatus:async function(e,t){let i=this.flowdownURCModel.getTreeDocument().getAllDescendants(),n=[];n=n.concat(t.realized_activity_id),this.flowdownView.prepareUpdateView();for(let e of n){let n=i.filter((t=>t.options.grid.activity_id===e))[0];"AnalysisPending"==t.cmd?n.options.grid.flowdown_status="Analysis Pending":"FlowdownPending"==t.cmd?n.options.grid.flowdown_status="Flowdown Pending":"Ignored"==t.cmd?n.options.grid.flowdown_status="Ignored":"FlowdownComplete"==t.cmd&&(n.options.grid.flowdown_status="Flowdown Complete"),n.options.grid.flowdown_statusORG=n.options.grid.flowdown_status,n.options.grid.isUpstreamUpdated="FALSE",n.options.grid.chgObjName=this.flowdownURCModel.createCustomNameField(n.options.grid),this.flowdownView.updateRenderedRow(n._getRowID())}this.flowdownView.pushUpdateView()},revertFDStatusForUpdateFailure:async function(e,t){let i=this.flowdownURCModel.getTreeDocument().getAllDescendants(),n=[];n=n.concat(t.realized_activity_id),this.flowdownView.prepareUpdateView();for(let e of n){let t=i.filter((t=>t.options.grid.activity_id===e))[0];t.options.grid.flowdown_status=t.options.grid.flowdown_statusORG,this.flowdownView.updateRenderedRow(t._getRowID())}this.flowdownView.pushUpdateView()},updateMassValue:function(e){var t=!1,i="";let n=[],o=[],a={};a.origin_ca_id=this.options.origin_ca_id,a.target_ca_id=this.options.caid;for(let r of e){var s=r.options.grid;"Analysis Pending"==s.flowdown_status?s.selected_proposed_items&&s.selected_proposed_items.length>0||s.selected_resolution_items&&s.selected_resolution_items.length>0?(a.realized_activity_id=s.activity_id,this.revertFDStatusForUpdateFailure(C.CHG_GOV_Flowdown_Status_Change_Fail,a),t=!0):(n.push(s.where_details.id),o.push(s.activity_id),i="AnalysisPending"):"Flowdown Pending"==s.flowdown_status?(n.push(s.where_details.id),o.push(s.activity_id),i="FlowdownPending"):"Ignored"==s.flowdown_status?s.selected_proposed_items&&s.selected_proposed_items.length>0||s.selected_resolution_items&&s.selected_resolution_items.length>0?(a.realized_activity_id=s.activity_id,this.revertFDStatusForUpdateFailure(C.CHG_GOV_Flowdown_Status_Change_Fail,a),t=!0):(n.push(s.where_details.id),o.push(s.activity_id),i="Ignored"):"Flowdown Complete"==s.flowdown_status&&(n.push(s.where_details.id),o.push(s.activity_id),i="FlowdownComplete")}t&&p.warn(C.CHG_GOV_MASSUPDATE_Flowdown_Status_Change_Fail,!0),o.length>0&&(a.realized_activity_id=o,a.where_id=n,a.cmd=i,a.callback=this.updateSelectedProposedforFDStatus.bind(this),a.failureCallback=this.revertFDStatusForUpdateFailure.bind(this),h.flowdownRealizedChanges(a))},subscribeToPlatformEvents:function(){var i=this;t.unsubscribe("FDDGV_UPDATE_FD_STATUS:"+(widget?widget.id:"")),t.subscribe("FDDGV_UPDATE_FD_STATUS:"+(widget?widget.id:""),(function(e){console.log("Update Flowdown Status"),i.updateFlowdownStatus(e,i)})),t.unsubscribe("FDDGV_ADD_PROPOSED_FROM_RELATIONS:"+(widget?widget.id:"")),t.subscribe("FDDGV_ADD_PROPOSED_FROM_RELATIONS:"+(widget?widget.id:""),(function(n){console.log("From Relations");let o=i.populateOptions();if(!e.is(o.realized_activity_id))return;let a=new e.Class.Model;if(a.set("id",n.selectedNodeIDs[0]),a.set("objectInfo",n.selectedNodeTitle),a.set("objectRevision",n.selectedNodeRevision),o.model=a,o.cmd="AddProposedFromRelations",o.CHG_GOV_RELATIONAL_EXPLORER_HEADING=C.CHG_GOV_RELATIONAL_EXPLORER_HEADING,o.CHG_GOV_CLOSE=C.CHG_GOV_CLOSE,t.unsubscribe("ENORIPE-InApp-"+widget.id+"ECM_GOV_FlowdownProposedDGV/onOK"),t.subscribe("ENORIPE-InApp-"+widget.id+"ECM_GOV_FlowdownProposedDGV/onOK",(async function(e){o.proposedToAdd=e.map((e=>e.id));await h.flowdownRealizedChanges(o)})),u.getGlobalVariable().isNative)h.loadRelationsTab(o);else{const e=widget.id+"ECM_GOV_FlowdownProposedDGV";g.launchTransientWidget(e,n.selectedNodeIDs,"ENORIPE_AP")}})),t.unsubscribe("ECM_GOV_FlowdownDGV_ChangeDetails:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_FlowdownDGV_ChangeDetails:"+(widget?widget.id:""),(function(e){const t=i.flowdownURCModel.getTreeDocument().getSelectedNodes();if(t.length>0){let i,n=[],a=[];t.forEach((function(e){i=o.fetchReleventIdsforBeforeCommands(e),void 0===i.activityReferenceID&&void 0===i.activityInstanceID||(n.push(i.activityReferenceID),a.push(i.activityInstanceID?i.activityInstanceID:i.activityReferenceID))}));let s,r=n,l=a;s=("ExploreInMSB"===e.action||"ExploreinContext"===e.action)&&l||r,u.getGlobalVariable().isNative?f.DispatchEventToWin(e.action,s):require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){e.openRelationalExplorer(s)}))}})),t.unsubscribe("FDDGV_ADD_PROPOSED_WITH_SEARCH:"+(widget?widget.id:"")),t.subscribe("FDDGV_ADD_PROPOSED_WITH_SEARCH:"+(widget?widget.id:""),(function(t){console.log("With Search");let n=i.populateOptions();e.is(n.realized_activity_id)&&(n.cmd="AddProposedWithSearch",n.NLS=C.CHG_GOV_Selected_Proposed,h.launchSearchForSelectedProposed(n))})),t.unsubscribe("FDDGV_ADD_RESOLUTION_WITH_SEARCH:"+(widget?widget.id:"")),t.subscribe("FDDGV_ADD_RESOLUTION_WITH_SEARCH:"+(widget?widget.id:""),(function(t){console.log("resolution With Search");let n=i.populateOptions();e.is(n.realized_activity_id)&&(n.cmd="AddResolutionWithSearch",n.NLS=C.CHG_GOV_Selected_Resolution,h.launchSearchForSelectedProposed(n))})),t.unsubscribe("FDDGV_ADD_RESOLUTION_FROM_RELATIONS:"+(widget?widget.id:"")),t.subscribe("FDDGV_ADD_RESOLUTION_FROM_RELATIONS:"+(widget?widget.id:""),(function(n){let o=i.populateOptions();if(!e.is(o.realized_activity_id))return;let a=new e.Class.Model;if(a.set("id",n.selectedNodeIDs[0]),a.set("objectInfo",n.selectedNodeTitle),a.set("objectRevision",n.selectedNodeRevision),o.model=a,o.cmd="AddResolutionFromRelations",o.CHG_GOV_RELATIONAL_EXPLORER_HEADING=C.CHG_GOV_RELATIONAL_EXPLORER_HEADING,o.CHG_GOV_CLOSE=C.CHG_GOV_CLOSE,t.unsubscribe("ENORIPE-InApp-"+widget.id+"ECM_GOV_FlowdownResolutionDGV/onOK"),t.subscribe("ENORIPE-InApp-"+widget.id+"ECM_GOV_FlowdownResolutionDGV/onOK",(async function(e){o.proposedToAdd=e.map((e=>e.id));await h.flowdownRealizedChanges(o)})),u.getGlobalVariable().isNative)h.loadRelationsTab(o);else{const e=widget.id+"ECM_GOV_FlowdownResolutionDGV";g.launchTransientWidget(e,n.selectedNodeIDs,"ENORIPE_AP")}})),t.unsubscribe("FDDGV_REMOVE_PROPOSED:"+(widget?widget.id:"")),t.subscribe("FDDGV_REMOVE_PROPOSED:"+(widget?widget.id:""),(function(e){console.log("Remove Proposed From Flowdown");let t=i.populateOptions();t.cmd="RemoveProposed",t.proposedToRemove=e,h.flowdownRealizedChanges(t)})),t.unsubscribe("FDDGV_REMOVE_RESOLUTION:"+(widget?widget.id:"")),t.subscribe("FDDGV_REMOVE_RESOLUTION:"+(widget?widget.id:""),(function(e){console.log("Remove Resolution From Flowdown");let t=i.populateOptions();t.cmd="RemoveResolution",t.resolutionToRemove=e,h.flowdownRealizedChanges(t)})),t.unsubscribe("ECM_GOV_Flowdown_GET_URC:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Flowdown_GET_URC:"+(widget?widget.id:""),(function(e){i.loadURCData(e)})),t.unsubscribe("ECM_GOV_FlowdownURC_EXPAND_COLLAPSE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_FlowdownURC_EXPAND_COLLAPSE:"+(widget?widget.id:""),(function(e){i.flowdownView.expandCollapseNodesInDGV(e.action)})),t.unsubscribe("ECM_GOV_FlowdownURC_FIND:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_FlowdownURC_FIND:"+(widget?widget.id:""),(function(e){i.flowdownView.toggleFindViewInDGV(e)})),t.unsubscribe(`caFlowdownRCDGV:${widget.id}`),t.subscribe(`caFlowdownRCDGV:${widget.id}`,(function(){i.flowdownView.updateTaggerFilter()})),t.unsubscribe(`caFlowdownRCDGV of ${widget.id}`),t.subscribe(`caFlowdownRCDGV of ${widget.id}`,(function(e){i.flowdownURCModel.filterView(e)})),t.unsubscribe("ECM_GOV_FlowdownDGV_EDIT:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_FlowdownDGV_EDIT:"+(widget?widget.id:""),(function(e){let t;i.flowdownView.fdURCDGV.showModelMassUpdateDialog();let n=i.flowdownView.fdURCDGV._modelMassUpdateDialog.buttons.Ok.elements.button,o=i.flowdownView.fdURCDGV._modelMassUpdateDialog.buttons.Apply.elements.button;var a=document.getElementsByClassName("wux-controls-abstract wux-controls-toggle wux-controls-radio");t=a&&a[a.length-1].getChildren()[0].hasClassName("wux-controls-radio-on")?i.flowdownURCModel.getTreeDocument().getAllDescendants():i.flowdownURCModel.getTreeDocument().getSelectedNodes(),n.addEventListener("click",(function(){i.updateMassValue(t)})),o.addEventListener("click",(function(){i.updateMassValue(t)}))}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridContextualMenu","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_){"use strict";return e.extend({init:function(e){this._parent(e),this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:_.getGlobalVariable().get3DSpaceURL(),securityContext:_.getGlobalVariable().getSecurityContext(),isNative:_.getGlobalVariable().isNative}};var i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t;var n=this._modelEvents;this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),f.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").removeClassName("minified-header-height"))})),widget.addEvents({onSearch:function(e){n.publish({event:"cr-aff-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"cr-aff-DataGrid-on-reset-search",data:{query:e},context:i})}})},loadCustomColumns:function(){let e=I.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&w.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){try{var e=this.processColumns(),t=this,s={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,identifier:"chgCRAffectedItemsGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>=0)return m.showRMBMenuOnGrid(e).then((function(e){return e}));t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){d.readyDragContent(e,t)},onDragStartCell:function(e,t){d.readyDragContent(e,t)}};s=UWA.merge(s,this.options);var p={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new o(s),this.chgGridView.cellSelection="none",this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){v.onCustomViewsSave(e,i,t.options.custom_view_options)};let y=this.chgGridView;this._modelEvents.publish({event:"hideEmpty-datagrid",data:y}),this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},(function(e){if("false"==_.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.chgGridView.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},(function(e){var i=t.chgGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new r(p);var C={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return m.showRMBMenuOnGrid(e).then((function(e){return e}))}};this.tileView.onContextualEvent=C;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),l.toolbar=this.chgGridView.setToolbar(l.writetoolbarDefinition(this.options)),this.toolbar=l.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",(function(){t.chgGridView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])})),t.chgGridView.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)}));var f=t.chgGridView.getTreeDocument().getXSO(),D=i.debounce((function(e){e&&e.length&&(e=e[0]);var i=t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+0}}));var o=f.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)}),5);f.onPostAdd(D),f.onPostRemove(D),t.tileView.addEventListener(n.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount)console.log("AffectedItem_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel});else if(i&&4==i.columnID){var n={};n.cellInfos=i,v.executeMaturity(n)}},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-affectedItems-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-affectedItems-grid-div"});var I=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-affectedItems-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"affectedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new g({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new h({title:u.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(I),this.toolbar.inject(I);var w=UWA.createElement("div",{class:"content-affectedItems-grid-div expanded-header-height"}),b=UWA.createElement("div",{class:"content-affectedItems-tile-div affectedItemsTileView expanded-header-height"}),S=UWA.createElement("div",{class:"hideView",id:"affectedItemsEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(S),this.chgGridView.inject(w),this.tileView.inject(b),S.inject(b),this.chgGridViewContainer.addContent(I),this.chgGridViewContainer.addContent(w),this.chgGridViewContainer.addContent(b),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=w;let E=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];v.registerCustomEventsOnDGV(E,this.chgGridView,this.options.custom_view_options),this.loader=(new a).inject(this.options.target)}catch(e){console.log(e)}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"cr-affected-item-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"cr-affected-item-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";var h={showRMBMenuOnGrid:function(e){return new Promise((function(t,i){const a=[];let c=!1,p=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),u=[],g=[],m=[];p.forEach((e=>{u.push(e.options.grid.id),g.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&m.push(e.options.grid.serviceBasedObjId)})),p.length>1&&(c=!0);const C=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),f=e.cellInfos.nodeModel.options.grid.id,v=e.cellInfos.nodeModel.options.grid.type,D=e.cellInfos.nodeModel.options.grid.name,I=e.cellInfos.nodeModel.options.grid.displayType,w=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,_=[];_.push(v),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&_.concat(e.cellInfos.nodeModel.options.grid.kind);const b={objectId:null!=w?w:f,objectType:v,objectTaxonomies:_,displayName:D,displayType:I,facetName:"dependency"};let S={};S.objectID=f,S.objectTitle=D,S.objectType=v,S.serviceId="3DSpace",S.label=e.cellInfos.nodeModel.options.grid.title,S.changeType="Investigation Request",S.facet="Affected Items",S.action="IR>Change Impacts";const y=C.openWith(b);let E={};E.objectID=f,E.objectTitle=D;var O=!1;"true"===o.getGlobalVariable().ECM_EnableChangeImpactsEnforcementForCR&&(O=!0),c?(m.length>0&&a.push(n.createPropertyPushItem(m)),a.push(h.getRelationalExplorerMenu(g)),m.length>0&&(a.push(r.getDownloadMenu(m)),!m.length>1&&a.push(r.getPreviewMenu(m))),t(a)):(m.length>0&&a.push(n.createPropertyPushItem(m)),a.push(h.getRelationalExplorerMenu(g)),y.then((e=>{e&&a.push(e),m.length,O&&a.push(d.getChangeImpacts(S)),s.getDocuments(m).then((function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(a.push(r.getDownloadMenu(m)),a.push(r.getPreviewMenu(m))),t(a)})).catch((e=>{console.log(e),t(a)}))})))}))},showRMBMenuOnGridForDispositionCell:async function(e,t,i){let a=[];try{e.cellInfos.nodeModel.options.grid.dispositionInformation[0];e.cellInfos.nodeModel.options.grid.approvalStatusModel&&await g.getColumnApprovalStatusMenu(e.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){a.push(e)}))}catch(e){console.error(e)}return new Promise((function(s,r){let l=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),d={model:e.cellInfos.nodeModel.getTreeDocument(),dispositionID:l[0]._options.grid.dispositionInformation?l[0]._options.grid.dispositionInformation[0].dispostionId:void 0,approversList:l[0]._options.grid.dispositionInformation?l[0]._options.grid.dispositionInformation[0].approvers:""};const c=[];let p,g=e.cellInfos.nodeModel.options.grid.dispositionInformation;if(g&&g[0]&&g[0].dispostionId){let r=e.cellInfos.nodeModel.options.grid.id,l=[];l.push(r),p=g[0].dispostionId;let m=[];m.push(p),c.push(n.createPropertyPushItem(m)),c.push(h.getRelationalExplorerMenu(m));let C={node:e.cellInfos.nodeModel,selectedNodeIds:m[0],arrayOFaffectedItems:l,funcationality:"reviseDisposition",context:"ManageScope"};if("true"===o.getGlobalVariable().isFullLicence&&("true"===g[0].dispositionAccessBits[0].Refine&&c.push(u.reviseDisposition(C)),"true"===g[0].dispositionAccessBits[0].Replace&&(c.push(u.replaceDisposition(t,m[0],l,e)),c.push(u.replaceByExistingDisposition(t,e))),"true"===g[0].dispositionAccessBits[0].Remove&&c.push(u.removeDisposition(m[0],l,e,i))),"true"===g[0].dispositionAccessBits[0]["Transfer Ownership"]&&"true"===g[0].dispositionAccessBits[0].Move&&c.push(u.getDispositionTransferMenu(e)),"true"===o.getGlobalVariable().isFullLicence&&"true"===g[0].dispositionAccessBits[0]["Manage Approver"]&&c.push(h.getManageApprovers(d)),a.length>0)for(let e=0;e<a[0].length;e++)c.push(a[0][e]);s(c)}else s(c)}))},showRMBMenuOnGridForResolvedByCell:function(e){return new Promise((function(t,i){const a=[];let s=e.cellInfos.nodeModel.options.grid.dispositionInformation;if(s&&s[0]&&s[0].resolvedByInformation&&s[0].resolvedByInformation[0]){let i;if(s[0].resolvedByInformation[0].indexResolvedBy&&s[0].resolvedByInformation[0].indexResolvedBy[0]?i=s[0].resolvedByInformation[0].indexResolvedBy[0]:s[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&s[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]&&(i=s[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]),null!=i){let r=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),d=(s[0].dispostionId,i.resolvedById),c=i.resolvedByName,p=i.resolvedByType,g=[];g.push(d),a.push(n.createPropertyPushItem(g)),a.push(h.getRelationalExplorerMenu(g));let m={node:e.cellInfos.nodeModel,resolvedByIds:g,funcationality:"removeResolvedBy"};"true"==o.getGlobalVariable().isFullLicence&&s&&"true"===s[0].dispositionAccessBits[0]["Manage Resolved By"]&&a.push(u.removeResolvedBy(m));let C={objectId:d,objectType:p,displayName:c,displayType:p},f=[],v=r.openWith(C);f.push(v),Promise.all(f).then((function(e){console.log(e),e[0]&&a.push(e[0]),t(a)}))}else t(a)}else t(a)}))},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Relations"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){t.openRelationalExplorer(e)}))}}}},getManageApprovers:function(e){return{id:"ManageApprovers",type:"PushItem",title:t.CHG_GOV_Disposition_ManageApprovers,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-user-pencil"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"IR>Affected Items>RMB>ManageApprovers"}};p.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),l("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout").addApproverHandler(e)}}}}};return h})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView2",["UWA/Core","UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Controls/Find","DS/Controls/Loader","DS/Utilities/Utils","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Menu/ContextualMenu","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgSlideinForm","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedForm","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/util/ChgComponentUtils","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O,G){"use strict";return t.extend({init:function(e){var t=this;this._parent(e),this.options=e,this.proposedDGV=null,this.accessBits=this.options.contextDetails.userAccess,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}};var i=this.options.contextDetails._modelEvents;i&&i.publish&&widget.addEvents({onSearch:function(e){i.publish({event:"canew-DataGrid-on-search",data:{query:e},context:t})},onResetSearch:function(e){i.publish({event:"canew-DataGrid-on-reset-search",data:{query:e},context:t})}})},render:function(){if(this.options.target){let D=this,I=p.getColumns(this.options),w={treeDocument:null,columns:I,allowUnsafeHTMLContent:!1,showModelChangesFlag:!1,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:G.CHG_GOV_DataGrid_PlaceHolder_Fetch_ProposedChange,identifier:"CAProposedChangesDGV",showContextualMenuColumnFlag:!0,useWidgetPreferencesFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return h.getGlobalVariable().isNative?p.getNativeContextualMenu(e):p.getDashboardContextualMenu(e);e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!0,insertRow:!1})}return t},onDragStartRowHeader:function(e,t){t.contextChangeType=D.options.contextDetails.isKindOfType,t.contextChangeId=D.options.contextDetails.id,t.caContextData=D.options.contextDetails.contextIds,u.readyDragContent(e,t)},onDragStartCell:function(e,t){t.contextChangeType=D.options.contextDetails.isKindOfType,t.contextChangeId=D.options.contextDetails.id,t.caContextData=D.options.contextDetails.contextIds,u.readyDragContent(e,t)}};w=e.merge(w,this.options),this.proposedDGV=new i(w),this.proposedDGV.cellSelection="none",this.proposedDGV.setToolbar(c.getProposedChangesToolbarDefinition(this.options)),this.proposedDGV.getCustomViewsManager().onCustomViewsSave=function(e,t){g.onCustomViewsSave(e,t,D.options.custom_view_options)},this.proposedDGV.columnDefinitionUpdated=!1,this.proposedDGV.registerReusableCellContent({id:"proposedRevColId",buildContent:function(){return new e.Element("div",{class:"proposedRevCol",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px",width:20,height:20}})}}),this.proposedDGV.registerReusableCellContent({id:"proposedEmptyColId",buildContent:function(){return new e.Element("div",{styles:{"padding-left":"5px",width:20,height:20}})}}),I[4].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var t=D.proposedDGV.reuseCellContent("proposedRevColId");t.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(t)}else e.cellView.setReusableContent(D.proposedDGV.reuseCellContent("proposedEmptyColId"))};let _={};_.notStartedKey=G.CHG_GOV_Proposed_ProposalStatus_NotStarted,_.startedKey=G.CHG_GOV_Proposed_ProposalStatus_Started,_.partialKey=G.CHG_GOV_Proposed_ProposalStatus_Partial,_.completedKey=G.CHG_GOV_Proposed_ProposalStatus_Complete,_.rejectedKey=G.CHG_GOV_Proposed_ProposalStatus_Rejected;let E={proposedStatus:{stdTemplate:"enumCombo",semantics:{possibleValues:_,valueType:"enumValueToProperty"}}};if(this.proposedDGV.getTypeRepresentationFactory().registerTypeRepresentations(E),this.proposedDGV.addEventListener("allCellsRendered",(function(){D.proposedDGV.buildStatusBar([{type:o.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:G.CHG_GOV_StatusBar_TotalItems+(null==D.proposedDGV.getTreeDocument()?0:D.proposedDGV.getTreeDocument().getAllDescendants().length)}},{type:o.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:G.CHG_GOV_StatusBar_SelectedItems+(null==D.proposedDGV.getTreeDocument()?0:D.proposedDGV.getTreeDocument().getSelectedNodes().length)}}])})),this.proposedDGV.addEventListener(d.POINTERHIT,(function(e,t){if(1==e.multipleHitCount){if(t&&4===t.columnID)"proposedRevCol"===e.target.className&&g.launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.sourceType?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,name:t.nodeModel.options.grid.name});else if(t&&3===t.columnID){if(e.target.className.contains("fonticon-flow-branch-list"))if("completedKey"==t.nodeModel.options.grid.proposedStatus)y.error(G.CHG_GOV_Proposed_Revision_Replace_Status);else{var i={id:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,proposedOperation:t.nodeModel.options.grid.proposedOperation,action:"replaceByRevision"};b.publish("ECM_GOV_ProposedDGV_LaunchVersionExplorer:"+(widget?widget.id:""),i)}}else if(t&&12===t.columnID){if("proposed_resolution_revision"===e.target.className)g.launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.resolution[0].sourceType?t.nodeModel.options.grid.resolution[0].serviceBasedObjId:t.nodeModel.options.grid.resolution[0].id,type:t.nodeModel.options.grid.resolution[0].type,name:t.nodeModel.options.grid.resolution[0].name});else if(e.target.className.contains("proposed_resolution_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};m.buildAndDisplayContextualMenu(e.target,t)}else if("proposed_resolution_multiple"===e.target.className){var n=t.nodeModel.options.grid;b.publish("ECM_GOV_ProposedDGV_DisplayResolutionDGV:"+(widget?widget.id:""),n)}}else if(t&&13===t.columnID){if("proposed_fdFrom_revision"===e.target.className)g.launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.fdFrom[0].sourceType?t.nodeModel.options.grid.fdFrom[0].serviceBasedObjId:t.nodeModel.options.grid.fdFrom[0].id,type:t.nodeModel.options.grid.fdFrom[0].type,name:t.nodeModel.options.grid.fdFrom[0].name});else if(e.target.className.contains("proposed_fdFrom_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};m.buildAndDisplayContextualMenu(e.target,t)}else if("proposed_fdFrom_multiple"===e.target.className){var o=t.nodeModel.options.grid.fdFrom;S.getNLSForProcessedList("CAProposedChange",o).then((function(){O.launchDGV(o,{target:widget.body,title:G.CHG_GOV_Flowdown_From})}))}}else if(t&&14===t.columnID)if("proposed_fdFor_revision"===e.target.className)g.launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.fdFor[0].sourceType?t.nodeModel.options.grid.fdFor[0].serviceBasedObjId:t.nodeModel.options.grid.fdFor[0].id,type:t.nodeModel.options.grid.fdFor[0].type,name:t.nodeModel.options.grid.fdFor[0].name});else if(e.target.className.contains("proposed_fdFor_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};m.buildAndDisplayContextualMenu(e.target,t)}else if("proposed_fdFor_multiple"===e.target.className){var a=t.nodeModel.options.grid.fdFor;S.getNLSForProcessedList("CAProposedChange",a).then((function(){O.launchDGV(a,{target:widget.body,title:G.CHG_GOV_Flowdown_For})}))}}else if(2==e.multipleHitCount&&(t.nodeModel.select(!0),D.options.applicationChannel.publish({event:"update-property-panel-data",data:{context:t.nodeModel,PhysicalID:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type}}),t&&6!==t.columnID))if(h.getGlobalVariable().is3DSpace){localRequire("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else D.options.applicationChannel.publish({event:"information-panel-open",data:null})})),this.findWidget=new a({displayMatchCaseToggle:!1,relatedWidget:this.proposedDGV,onFindRequest:this.proposedDGV.setFindStr,onFindPreviousResult:this.proposedDGV.goToPreviousMatchingCell,onFindNextResult:this.proposedDGV.goToNextMatchingCell,onFindClose:this.proposedDGV.onFindClose}),!h.getGlobalVariable().isNative&&"true"==h.getGlobalVariable().ECM_EnableChangeControlGranularity){this.dropzones=e.createElement("div",{styles:{position:"absolute","z-index":5e4,"justify-content":"space-around","align-items":"center"},class:"chg-proposed-dropzones"});for(var t=[{id:"referenceDrop",icon:"drag-drop",title:G.CHG_GOV_Proposed_Add_Reference},{id:"instanceDrop",icon:"drag-drop",title:G.CHG_GOV_Proposed_Add_Instance}],n=0;n<t.length;n++){var r=e.createElement("div",{class:"proposed-dgv-dropZoneGlobal "+t[n].id,draggable:!1}),l=e.createElement("div",{class:"proposed-dgv-dropZone "+t[n].id,draggable:!1}).inject(r),v=e.createElement("div",{class:"proposed-dgv-dropIconAndText "+t[n].id}).inject(l);e.createElement("i",{class:"proposed-dgv_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-"+t[n].icon}).inject(v),e.createElement("h3",{class:"proposed-dgv_txt "+t[n].id,text:t[n].title}).inject(v),r.inject(this.dropzones)}this.droppable=e.createElement("div",{styles:{width:"100%",position:"relative"},class:"chg-proposed-droppable"})}this.mainContainer=e.createElement("div",{id:"proposed-main-container",styles:{width:"100%",height:"100%",display:"inline-block"}}),this.headerDiv=e.createElement("div",{id:"proposed-header-div",styles:{}}),this.headerLabelDiv=e.createElement("div",{id:"proposed-header-label-div"}),this.indexInfoDiv=e.createElement("div",{id:"proposed-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new C({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new f({title:G.CHG_GOV_Proposed_Index_Info,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(this.headerLabelDiv),this.headerLabelDiv.inject(this.headerDiv),this.findViewDiv=e.createElement("div",{id:"proposed-find-view-div"}),this.findWidget.inject(this.findViewDiv),this.findViewDiv.inject(this.headerDiv),this.toolbarDiv=e.createElement("div",{id:"proposed-toolbar-div",styles:{minWidth:"250px"}}),this.proposedDGV.getToolbar().inject(this.toolbarDiv),this.toolbarDiv.inject(this.headerDiv),this.proposedDGVDiv=e.createElement("div",{id:"proposed-dgv-div",styles:{}}),this.proposedDGV.inject(this.proposedDGVDiv),this.mainContainer.addContent(this.headerDiv),h.getGlobalVariable().isNative||"true"!=h.getGlobalVariable().ECM_EnableChangeControlGranularity?this.mainContainer.addContent(this.proposedDGVDiv):(this.proposedDGVDiv.inject(this.droppable),this.dropzones.inject(this.droppable),this.dropzones.hide(),this.mainContainer.addContent(this.droppable)),this.mainContainer.inject(this.options.target),this.options.custom_view_options.dgvHandle=this.proposedDGV,this.options.custom_view_options.ootb_columns=[...I],this.options.custom_view_options.dgvDiv=this.proposedDGVDiv,this.findWidget.hide(),this.globalSubscribeForProposedGridView(),this.handleAccessBitUpdate(this),this.loader=(new s).inject(this.options.target);let N=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];g.registerCustomEventsOnDGV(N,this.proposedDGV,this.options.custom_view_options)}},globalSubscribeForProposedGridView:function(){var e=this;E.addObserver("ChgCAProposedChangesView2","CO-AccessBit-Update",e.handleAccessBitUpdate.bind(this)),this.options&&this.options.contextDetails&&this.options.contextDetails._modelEvents&&this.options.contextDetails._modelEvents.unsubscribe&&(this.options.contextDetails._modelEvents.unsubscribe({event:"canew-DataGrid-on-search"}),this.options.contextDetails._modelEvents.subscribe({event:"canew-DataGrid-on-search"},(function(t){if("false"==h.getGlobalVariable().slidePanelTagger){var i=t.query;if(i){var n=0,o=e.proposedDGV.getTreeDocument();o.withTransactionUpdate((function(){o.getAllDescendants().forEach((function(e){e.isVisible()&&e.options.grid.title&&!e.options.grid.name.toLowerCase().contains(i.toLowerCase())&&!e.options.grid.title.toUpperCase().contains(i.toUpperCase())?e.hide():!e.isVisible()&&e.options.grid.title&&(e.options.grid.name.toLowerCase().contains(i.toLowerCase())||e.options.grid.title.toUpperCase().contains(i.toUpperCase()))&&(e.show(),n++)}))})),0==n&&(this.proposedDGV.placeholder=G.CHG_GOV_DataGrid_PlaceHolder_No_ProposedChange)}}})),this.options.contextDetails._modelEvents.subscribe({event:"canew-DataGrid-on-reset-search"},(function(t){var i=e.proposedDGV.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})))},handleAccessBitUpdate:function(e){var t=this;e.id==t.options.contextDetails.id&&(t.accessBits=e.accessBits,"false"==e.accessBits.AddProposed?(t.proposedDGV.getToolbar().updateNodeModel("addProposed",{visibleFlag:!1}),t.proposedDGV.getToolbar().updateNodeModel("defineProposed",{visibleFlag:!1}),t.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!1}),t.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!1})):(t.proposedDGV.getToolbar().updateNodeModel("addProposed",{visibleFlag:!0}),t.proposedDGV.getToolbar().updateNodeModel("defineProposed",{visibleFlag:!0}),t.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!0}),t.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!0})),"false"==e.accessBits.DeleteProposed?t.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!1}):t.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!0}))},loadCustomColumns:function(){let e=D.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},registerDGVTreeDocEvents:function(){var e=this;this.proposedDGV.getTreeDocument().getXSO().onAdd((function(t){"true"==e.accessBits.AddProposed&&(e.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!0}),e.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!0})),e.proposedDGV.getToolbar().updateNodeModel("downloadProposed",{visibleFlag:!0}),"true"==e.accessBits.DeleteProposed&&e.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!0}),e.proposedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:G.CHG_GOV_StatusBar_SelectedItems+e.proposedDGV.getTreeDocument().getSelectedNodes().length}}),e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType,isNodeAdded:!0}})})),this.proposedDGV.getTreeDocument().getXSO().onRemove((function(t){e.proposedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:G.CHG_GOV_StatusBar_SelectedItems+t.getTreeDocument().getSelectedNodes().length}}),0==t.getTreeDocument().getSelectedNodes().length?(e.toolbarDiv.setStyles({minWidth:"155px"}),e.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!1}),e.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!1}),e.proposedDGV.getToolbar().updateNodeModel("downloadProposed",{visibleFlag:!1}),e.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!1}),e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType,isNodeAdded:!1}})):e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType}})}))},prepareUpdateView:function(){this.proposedDGV.prepareUpdateView()},pushUpdateView:function(){this.proposedDGV.pushUpdateView()},setTreeDocument:function(e){this.proposedDGV.treeDocument=e,this.registerDGVTreeDocEvents()},selectNodesInDGV:function(e){var t;this.proposedDGV.treeDocument.unselectAll();var i=this.proposedDGV.treeDocument.getAllDescendants(),n=i.length;e.forEach((e=>{for(var o,a=e.split("|")[0],s=e.split("|")[1],r=0,l=0;l<n;l++){if(i[l].options.grid.id===s){i[l].select(),t=this.proposedDGV.layout.getCellsFromNodeModel(i[l])[0],r=1;break}i[l].options.grid.id===a&&(o=i[l])}!r&&o&&(o.select(),t=this.proposedDGV.layout.getCellsFromNodeModel(o)[0])})),t&&this.proposedDGV.scrollToCellAt({cellID:t})},toggleFindViewInDGV:function(e){this.proposedDGV.treeDocument.getSelectedNodes().length>0?this.toolbarDiv.setStyles({minWidth:"250px"}):this.toolbarDiv.setStyles({minWidth:"155px"}),!1===this.findWidget.visibleFlag?(this.findWidget.show(),this.findWidget.focus()):!0===this.findWidget.visibleFlag&&this.findWidget.hide()},addProposedDialogHandler:function(e){(e={model:void 0}).caID=this.options.contextDetails.id;var t=new w(e),i=new I;i.buildSlideIn(t),i.showSlideIn()},editProposedDialogHandler:function(e){var t={};t.model=e,t.caID=this.options.contextDetails.id;var i=new w(t),n=new I;n.buildSlideIn(i),n.showSlideIn()},updateDGVForEmptyView:function(){this.proposedDGV.getToolbar().updateNodeModel("findProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("downloadProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!1}),this.proposedDGV.placeholder=G.CHG_GOV_DataGrid_PlaceHolder_No_ProposedChange},updateDGVForNonEmptyView:function(){var e=this,t=e.proposedDGV.getTreeDocument().getSelectedNodes();t&&t.length>0?(e.updateToolbarVisibility("changeAssessmentProposed","true"===e.accessBits.AddProposed),e.updateToolbarVisibility("editProposed","true"===e.accessBits.AddProposed),e.updateToolbarVisibility("downloadProposed",!0),e.updateToolbarVisibility("removeProposed","true"===e.accessBits.DeleteProposed)):(e.updateToolbarVisibility("changeAssessmentProposed",!1),e.updateToolbarVisibility("editProposed",!1),e.updateToolbarVisibility("downloadProposed",!1),e.updateToolbarVisibility("removeProposed",!1)),e.updateToolbarVisibility("findProposed",!0),e.proposedDGV.placeholder=G.CHG_GOV_DataGrid_PlaceHolder_Fetch_ProposedChange},updateToolbarVisibility:function(e,t){this.proposedDGV.getToolbar().updateNodeModel(e,{visibleFlag:t})},updateDGVForIndexInfoView:function(){this.indexInfoDiv.show()},updateTaggerFilter:function(){var e=this;"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(),t._cleanBIFilterProxy(),t.cleanPathTag();var i=new Set;e.proposedDGV.treeDocument.getAllDescendants().forEach((e=>{var t=e.options.grid.id;i.add(t)}));var n=[];i.forEach((e=>n.push(e)));t._onSetPathTagsForProposedRealized(n,{options:{id:"caProposedChangesDGV"}})}))}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemView",["UWA/Core","UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Controls/Find","DS/Controls/Loader","DS/Utilities/Utils","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Menu/ContextualMenu","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgSlideinForm","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedForm","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y){"use strict";return t.extend({init:function(e){this._parent(e),this.options=e,this.resolutionDGV=null},render:function(){if(this.options.target){let t=this,n={treeDocument:null,columns:p.getColumns(),allowUnsafeHTMLContent:!1,showModelChangesFlag:!1,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:y.CHG_GOV_DataGrid_PlaceHolder_Fetch_Resolution,identifier:"CAResolutionDGV",showContextualMenuColumnFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return h.getGlobalVariable().isNative?p.getNativeContextualMenu(e,t.options.proposedParam):p.getDashboardContextualMenu(e,t.options.proposedParam);e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!0})}return i},onDragStartRowHeader:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,u.readyDragContent(e,i)},onDragStartCell:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,u.readyDragContent(e,i)}};n=e.merge(n,this.options),this.resolutionDGV=new i(n),this.resolutionDGV.cellSelection="none",this.resolutionDGV.columnDefinitionUpdated=!1,this.resolutionDGV.registerReusableCellContent({id:"resolutionRevColId",buildContent:function(){return new e.Element("div",{class:"resolutionRevCol",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px",width:20,height:20}})}}),this.resolutionDGV.registerReusableCellContent({id:"resolutionEmptyColId",buildContent:function(){return new e.Element("div",{styles:{"padding-left":"5px",width:20,height:20}})}}),this.resolutionDGV.columns[3].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.resolutionDGV.reuseCellContent("resolutionRevColId");i.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.resolutionDGV.reuseCellContent("resolutionEmptyColId"))},this.resolutionDGV.addEventListener("allCellsRendered",(function(){t.resolutionDGV.buildStatusBar([{type:o.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:y.CHG_GOV_StatusBar_TotalItems+(null==t.resolutionDGV.getTreeDocument()?0:t.resolutionDGV.getTreeDocument().getAllDescendants().length)}},{type:o.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:y.CHG_GOV_StatusBar_SelectedItems+(null==t.resolutionDGV.getTreeDocument()?0:t.resolutionDGV.getTreeDocument().getSelectedNodes().length)}}])})),this.resolutionDGV.addEventListener(d.POINTERHIT,(function(e,t){1==e.multipleHitCount&&t&&3===t.columnID&&"resolutionRevCol"===e.target.className&&g.launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.sourceType?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,name:t.nodeModel.options.grid.name})})),this.mainContainer=e.createElement("div",{id:"resolution-main-container",styles:{width:"100%",height:"100%",display:"inline-block"}}),this.resolutionDGVDiv=e.createElement("div",{id:"resolution-dgv-div",styles:{}}),this.resolutionDGV.inject(this.resolutionDGVDiv),this.mainContainer.addContent(this.resolutionDGVDiv),this.mainContainer.inject(this.options.target),this.loader=(new s).inject(this.options.target),b.unsubscribe("ECM_GOV_ProposedDGV_RemoveResolutionPopup:"+(widget?widget.id:"")),b.subscribe("ECM_GOV_ProposedDGV_RemoveResolutionPopup:"+(widget?widget.id:""),(function(e){t.removeResolutionRow(e)}))}},removeResolutionRow:function(e){var t=this;e.forEach((function(e){let i=t.resolutionDGV.getTreeDocument().getRoots().find((t=>t.getAttributeValue("id")===e.id));t.resolutionDGV.getTreeDocument().removeRoot(i)})),0==t.resolutionDGV.getTreeDocument().getRoots().length&&t.updateDGVForEmptyView()},registerDGVTreeDocEvents:function(){var e=this;this.resolutionDGV.getTreeDocument().getXSO().onAdd((function(t){e.resolutionDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:y.CHG_GOV_StatusBar_SelectedItems+e.resolutionDGV.getTreeDocument().getSelectedNodes().length}})})),this.resolutionDGV.getTreeDocument().getXSO().onRemove((function(t){e.resolutionDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:y.CHG_GOV_StatusBar_SelectedItems+t.getTreeDocument().getSelectedNodes().length}})}))},prepareUpdateView:function(){this.resolutionDGV.prepareUpdateView()},pushUpdateView:function(){this.resolutionDGV.pushUpdateView()},setTreeDocument:function(e){this.resolutionDGV.treeDocument=e,this.registerDGVTreeDocEvents()},updateDGVForEmptyView:function(){this.resolutionDGV.placeholder=y.CHG_GOV_DataGrid_PlaceHolder_No_Resolution},updateDGVForNonEmptyView:function(){this.resolutionDGV.placeholder=y.CHG_GOV_DataGrid_PlaceHolder_Fetch_Resolution},updateDGVForIndexInfoView:function(){this.indexInfoDiv.show()}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesController",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView2","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgInfraService","DS/UIKIT/Mask","DS/Windows/Dialog","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemModel","DS/ENOXVersionExplorerController/VersionExplorerController","DS/ENOXVersionExplorerUtils/VersionExplorerEnums","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/Utilities/Dom","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgInfodialog"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y){"use strict";return e.Class.extend({init:function(e){this._parent(e),this.options=e,this.subscribeToPlatformEvents(),this.proposedChangesView=null,this.resolutionItemsView=null,this.accessBits=this.options.contextDetails.userAccess,this.proposedNode,this._dnd={actual:null,count:0}},createProposedChangesView:async function(){this.options.target.setStyles({position:"relative"}),this.proposedChangesView=new i(this.options),await this.proposedChangesView.render(),c.getGlobalVariable().isNative||"true"!=c.getGlobalVariable().ECM_EnableChangeControlGranularity?a.makeDroppable(this.options.target,this.dropHandler.bind(this)):this._addDropEvent(this.proposedChangesView.droppable),this.loadProposedChangesData()},_addDropEvent:function(t){var i=this,n=0;let o=i.proposedChangesView.dropzones;t.addEventListener("drop",(function(n){t.removeClassName("dragenter"),i.proposedChangesView.proposedDGVDiv.style.opacity="1",o.hide(),i._dnd.count=0,n.stopPropagation();var a=n.dataTransfer.getData(n.dataTransfer.types[0]),s={};if(e.is(a)&&""!=a){s=JSON.parse(a);var r=p.checkTenantInforamation(s);if(0!=r.TenantInfoMissing.length)l.error(NLSKeys.CHG_GOV_Pref_PlatformMissing_Error);else if(0!=r.DiffTenantData.length)l.error(NLSKeys.CHG_GOV_Pref_PlatformDoesNotMatch_Error);else{s=p.removeDuplicatesToBeDroppedObjects(s);var d=p.filterBasedOnServiceId(s);if(d.incorrectServiceInfo&&Array.isArray(d.incorrectServiceInfo)&&d.incorrectServiceInfo.length>0){var c=NLSKeys.CHG_GOV_WARN_DROP_SKIPPED+"<br/>";for(var u in d.incorrectServiceInfo)c+=d.incorrectServiceInfo[u]+"<br/>";l.warn(c,"false")}}}n.defaultPrevented||(n.preventDefault(),i._dnd.actual.classList.contains("referenceDrop")?i.dropHandler(s.data.items):i._dnd.actual.classList.contains("instanceDrop")&&i.dropHandler_Instance(s.data.items))})),document.addEventListener("dragover",(function(e){e.preventDefault()})),t.addEventListener("dragenter",(function(e){0===i._dnd.count&&(i.proposedChangesView.proposedDGVDiv.style.opacity="0.4",t.addClassName("dragenter"),o.show(),o.addClassName("dropzone-flex"));var a=b.firstParentWithClass(e.target,"proposed-dgv-dropZoneGlobal");if(a){var s=a.querySelector(".proposed-dgv-dropZone");i._dnd.actual!==s&&(i._dnd.actual&&i._dnd.actual.classList.remove("zoneHighlighted"),s.classList.add("zoneHighlighted"),i._dnd.actual=s)}i._dnd.count++,n++,e.stopPropagation()})),t.addEventListener("mouseenter",(function(){t.hasClassName("dragenter")&&n++})),t.addEventListener("mouseleave",(function(){t.hasClassName("dragenter")&&--n<=0&&t.removeClassName("dragenter")})),t.addEventListener("dragleave",function(e){i._dnd.count--,0===i._dnd.count&&(i.proposedChangesView.proposedDGVDiv.style.opacity="1",t.removeClassName("dragenter"),o.hide()),e.target===i._dnd.actual&&(i._dnd.actual.classList.remove("zoneHighlighted"),i._dnd.actual=null),0===--n&&(t.removeClassName("dragenter"),o.hide()),e.stopPropagation()}.bind(i))},loadProposedChangesData:async function(){var e=this;c.getGlobalVariable().CHGRefreshProposedForFlowdownChanges=!1,d.showLoader(this.options.target,this.proposedChangesView.loader),this.proposedChangesModel&&this.proposedChangesModel.resetModel(),this.proposedChangesModel=new n,this.proposedChangesModel.createTreeDocument(),this.proposedChangesModel.registerCustomFilter();let t=await s.getCAProposedChanges(this.options.contextDetails.id,this.options.flowdownRequired).catch((e=>{console.error(e),l.error(S.CHG_GOV_GET_PROPOSED_FAIL),d.hideLoader(this.options.target,this.proposedChangesView.loader)}));if(1==t.success&&200==t.statusCode)try{var i;this.proposedChangesView.prepareUpdateView(),t.data&&t.data[0]&&t.data[0].proposed&&t.data[0].proposed[0]&&t.data[0].proposed[0].idsOfNonIndexedData&&(i=t.data[0].proposed[0].idsOfNonIndexedData,t.data[0].proposed.splice(0,1));var a=await r.processCAProposedChangesData(t.data);this.proposedChangesModel.updateTreeDocument(a.proposed,this.accessBits);let n=await s.getStatesAttributes(a.policies);if(d.addCSSMaturityClasses(a.policies,"wux-controls-label",n),this.proposedChangesView.setTreeDocument(this.proposedChangesModel.getTreeDocument()),this.proposedChangesView.pushUpdateView(),d.hideLoader(this.options.target,this.proposedChangesView.loader),i&&i.length>0){var g=new Map,h=i.length;for(let e=0;e<i.length;e+=50){let t;t=h<50?i.slice(e,e+h):i.slice(e,e+50);for(var m,C=[],f=new Map,v=0;v<t.length;v++){var D=t[v];C.push(D.id),f.set(D.id,D)}if(C.length>0){var I=r.commonPredicatedForFedSearch(),w=await r.callFederatedSearch(C,I);w&&w.results&&w.results.length>0&&(m=await r.processCAProposedChangesFedSearch(w,f)),m&&m.proposed&&m.proposed.length>0&&(this.proposedChangesView.prepareUpdateView(),this.proposedChangesModel.updateTreeDocument(m.proposed,this.accessBits),this.proposedChangesView.setTreeDocument(this.proposedChangesModel.getTreeDocument()),this.proposedChangesView.pushUpdateView())}g=new Map([...g,...f]),h-=50}if(g&&g.size>0){e.proposedChangesView.indexInfoDiv.show();var _=await u.recent();if(_&&_.results&&_.results.length>0){var b=r.filterNonIndexedDataNew(_,g);g.size!=b.length&&l.warn(S.CHG_GOV_Not_Accessable_Data);var y=await r.processInformationForRecentProposed(b);if(y&&y.proposed&&y.proposed.length>0){this.proposedChangesView.prepareUpdateView(),this.proposedChangesModel.updateTreeDocument(y.proposed,this.accessBits);let e=await s.getStatesAttributes(y.policies);d.addCSSMaturityClasses(y.policies,"wux-controls-label",e),this.proposedChangesView.setTreeDocument(this.proposedChangesModel.getTreeDocument()),this.proposedChangesView.pushUpdateView()}}}}else e.proposedChangesView.indexInfoDiv.hide();0===this.proposedChangesModel.getTreeDocument().getAllDescendants().length?this.proposedChangesView.updateDGVForEmptyView():this.proposedChangesView.updateDGVForNonEmptyView();var E=r.getDefaultFilter(o.getColumns(this.options));if(this.proposedChangesModel.getTreeDocument().setFilterModel(E),"true"==a.deletedOrUnaccessiblePropFound&&this.proposedChangesView.updateDGVForIndexInfoView(),this.proposedChangesView.loadCustomColumns(),this.options.isSelected){this.proposedChangesView.updateTaggerFilter();let e=p.getCurrentModel();e.userAccess=this.accessBits,p.setCurrModel(e),p.setCallbacksForOpenWith("ProposedDGV")}}catch(e){console.error(e),l.error(S.CHG_GOV_ADD_PROPOSED_KO),d.hideLoader(this.options.target,this.proposedChangesView.loader)}else console.error(error),l.error(S.CHG_GOV_GET_PROPOSED_RESPONSE_KO),d.hideLoader(this.options.target,this.proposedChangesView.loader);this.proposedChangesView.proposedDGV.addEventListener("postEdit",(function(t,i){8==i.columnID&&e.updateReasonForChange(i),11==i.columnID&&e.updateStatus(i)}))},subscribeToPlatformEvents:function(){var i=this;t.unsubscribe("ECM_GOV_ProposedDGV_FIND:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_FIND:"+(widget?widget.id:""),(function(e){i.proposedChangesView.toggleFindViewInDGV(e)})),t.unsubscribe("ECM_GOV_ProposedDGV_ADD:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_ADD:"+(widget?widget.id:""),(function(e){i.addProposedHandler(e)})),t.unsubscribe("ECM_GOV_ProposedDGV_DEFINE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_DEFINE:"+(widget?widget.id:""),(function(e){i.proposedChangesView.addProposedDialogHandler(e)})),t.unsubscribe("ECM_GOV_ProposedDGV_ADD_ASSESSMENT:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_ADD_ASSESSMENT:"+(widget?widget.id:""),(function(e){let t=i.proposedChangesModel.getTreeDocument().getSelectedNodes().map((e=>e.options.grid.id));const n=widget.id+"ECM_GOV_ProposedDGV";c.getGlobalVariable().isNative?w.DispatchEventToWin("ChangeAssessment",t):p.launchTransientWidget(n,t,"ENORIPE_AP")})),t.unsubscribe("ECM_GOV_ProposedDGV_LaunchVersionExplorer:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_LaunchVersionExplorer:"+(widget?widget.id:""),(function(e){i.launchRevisionExplorer(e)})),t.unsubscribe("ECM_GOV_ProposedDGV_SearchResolution:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_SearchResolution:"+(widget?widget.id:""),(function(e){i.searchResolution(e)})),t.unsubscribe("ECM_GOV_ProposedDGV_SearchResolution_Native:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_SearchResolution_Native:"+(widget?widget.id:""),(function(e){let t=e.split("~");for(var n=!1,o=[],a={id:i.proposedNode.id,type:i.proposedNode.type,proposedOperation:i.proposedNode.proposedOperation,updateAction:"CONNECT"},s=0;s<t.length;s++){var r=t[s].split(",");r[0].contains("uuid:")?n=!0:o.push({id:r[0],service:"3dSpace",type:r[4]})}1==n&&l.warn(S.CHG_GOV_OrchestrateCA_Unsupported_Message),a.resolution=o;var d=[a];i.addResolution(d)})),t.unsubscribe("ECM_GOV_ProposedDGV_RemoveResolution:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_RemoveResolution:"+(widget?widget.id:""),(function(e){i.removeResolution(e)})),t.unsubscribe("ECM_GOV_ProposedDGV_DisplayResolutionDGV:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_DisplayResolutionDGV:"+(widget?widget.id:""),(function(e){i.displayResolutionDGV(e)})),t.unsubscribe("ENORIPE-InApp-"+widget.id+"ECM_GOV_ProposedDGV/onOK"),t.subscribe("ENORIPE-InApp-"+widget.id+"ECM_GOV_ProposedDGV/onOK",(function(e){for(var t=[],n=!1,o=0;o<e.length;o++)e[o].id.includes("<uuid:")?n=!0:(e[o].service||(e[o].service="3DSpace"),t.push({id:e[o].id,updateAction:"CONNECT",service:e[o].service,type:e[o].type}));n&&l.error(S.CHG_GOV_Proposed_Add_Not_Supported),t.length&&i.addProposed(t)})),t.unsubscribe("ECM_GOV_Proposed_Edit:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Edit:"+(widget?widget.id:""),(function(e){i.editProposed(e)})),t.unsubscribe("ECM_GOV_ProposedDGV_EDIT:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_EDIT:"+(widget?widget.id:""),(function(e){let t=i.proposedChangesModel.getTreeDocument().getSelectedNodes(),n=[];t.forEach((function(e){var t=e.options.grid;t.hasOwnProperty("id")&&void 0!==t.id&&null!==t.id&&""!==t.id.trim&&n.push(t)})),i.proposedChangesView.editProposedDialogHandler(n)})),t.unsubscribe("ECM_GOV_Proposed_Download:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Download:"+(widget?widget.id:""),(function(e){let t=i.proposedChangesModel.getTreeDocument().getSelectedNodes().map((e=>e.options.grid.serviceBasedObjId));d.download(t)})),t.unsubscribe("ECM_GOV_Proposed_Remove:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Remove:"+(widget?widget.id:""),(function(e){i.removeProposed()})),t.unsubscribe("ECM_GOV_Proposed_Add:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Add:"+(widget?widget.id:""),(function(e){i.addProposed(e)})),t.unsubscribe("ECM_GOV_Proposed_Add_Native:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Add_Native:"+(widget?widget.id:""),(function(e){let t=e.split("~");for(var n=!1,o=[],a=0;a<t.length;a++){var s=t[a].split(",");s[0].contains("uuid:")?n=!0:o.push({id:s[0],service:"3dSpace",type:s[4],updateAction:"CONNECT"})}1==n&&l.warn(S.CHG_GOV_OrchestrateCA_Unsupported_Message),i.addProposed(o)})),t.unsubscribe(`caProposedChangesDGV:${widget.id}`),t.subscribe(`caProposedChangesDGV:${widget.id}`,(function(){if(1==c.getGlobalVariable().CHGRefreshProposedForFlowdownChanges)i.loadProposedChangesData();else if(i.proposedChangesView.updateTaggerFilter(),Object.keys(i.proposedChangesView.proposedDGV.getTreeDocument().getXSO()._items).length>0){let e=i.proposedChangesView.proposedDGV.getTreeDocument().getXSO()._items;for(let t in e)i.options.applicationChannel.publish({event:"update_object_select",data:{node:e[t],contextID:i.options.contextDetails.id,contextType:i.options.contextDetails.isKindOfType,isNodeAdded:!0}})}else i.options.applicationChannel.publish({event:"update_object_select",data:{node:i.proposedChangesModel.treeDocument._getTrueRoot(),contextID:i.options.contextDetails.id,contextType:i.options.contextDetails.isKindOfType,isNodeAdded:!1}})})),t.unsubscribe(`caProposedChangesDGV of ${widget.id}`),t.subscribe(`caProposedChangesDGV of ${widget.id}`,(function(e){i.proposedChangesModel.filterView(e)})),t.unsubscribe("CrossHighlighting:proposed"+(widget?widget.id:"")),t.subscribe("CrossHighlighting:proposed"+(widget?widget.id:""),(function(t){if(e.is(t))if(t.indexOf(",")>-1){var n=t.split(",");i.proposedChangesView.selectNodesInDGV(n)}else i.proposedChangesView.selectNodesInDGV([t])}))},launchRevisionExplorer:function(t){var i=this,n=t.id,o=t.type,a=t.proposedOperation,s=t.action,r=e.createElement("div",{styles:{height:"100%",width:"100%"}});this.versionExplorer=new v({versionGraphContainer:r,selectionMode:D.SELECTION_MODES.SINGLE_SELECT_ONLY,autoUpdate:!0,showToolbar:!1,displayMode:D.DISPLAY_MODES.SUBWAY_VIEW,widget:widget});var d={};d.displayMode=D.DISPLAY_MODES.SUBWAY_VIEW,I.loadUserSettingsPromise(d).then((function(){i.versionExplorer.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:n,tenantId:c.getGlobalVariable().tenant,type:o,securityContext:c.getGlobalVariable().getSecurityContext().replace("ctx::",""),dataModelType:D.DATA_MODEL_TYPES.MODEL_ER}),i.versionExplorer.subscribeEvent("ENOXVersionExplorerModalOK",(function(e){var t=[];if(e&&Array.isArray(e))for(var r=0;r<e.length;r++){var d=e[r];if(d&&d._options&&d._options.data){var c=d._options.data;t.push({id:c.id,service:c.serviceId,type:c.type})}}if(t.length>0){var p={id:n,type:o,proposedOperation:a,updateAction:""};if("addResolution"==s){for(var u=[],g=0;g<t.length;g++)u.push({id:t[g].id,service:t[g].service,type:t[g].type});p.resolution=u;var h=[p];p.updateAction="CONNECT",i.addResolution(h)}else if("replaceByRevision"==s){var m=[];for(g=0;g<t.length;g++)m.push({id:t[g].id,service:t[g].service,type:t[g].type});p.revision=m;h=[p];p.updateAction="REVISE",i.replaceByRevision(h)}}else l.warn(S.CHG_GOV_Proposed_Resolution_No_Object_Selected)})),i.versionExplorer.subscribeEvent("ENOXVersionExplorerModalCancel",(function(){}))})),this.versionExplorer.showDialog({clientX:0,clientY:0},widget.body,!0)},searchResolution:function(e){if(c.getGlobalVariable().isNative){this.proposedNode=e;w.DispatchEventToWin("Add_Resolution","AddResolutionItem")}else{let n={condition:"addResolutionItem",extendedQuery:""};const o=p.activateSearch();c.getGlobalVariable().is3DSpace&&o.socket.subscribeServer("SearchComServer",getTopWindow());var t=c.getGlobalVariable().proposedSearchType,i=!1;"false"==c.getGlobalVariable().CHG_EnableNonChangeGovernedToCA?i=!0:t=!1,p.search(S.CHG_GOV_Proposed_AddResolution,t,this.OnSearchResolutionComplete.bind(this,e),"resolutionItem",o,void 0,void 0,n,void 0,"",i)}},OnSearchResolutionComplete:function(e,t){for(var i={id:e.id,type:e.type,proposedOperation:e.proposedOperation,updateAction:"CONNECT"},n=[],o=0;o<t.length;o++)n.push({id:t[o][8]?t[o][8]:t[o][0],service:t[o][7]&&t[o][7].includes(":")?t[o][7].split(":")[0]:t[o][7],type:t[o][2]});i.resolution=n;var a=[i];this.addResolution(a)},displayResolutionDGV:function(t){var i=this,n=new f;n.createTreeDocument();try{var o=t.resolution;r.getNLSForProcessedList("CAProposedChange",o).then((function(){var a=new e.Element("div",{styles:{height:"100%"}}),s=(new h({title:S.CHG_GOV_Proposed_Resolution,content:a,height:360,width:550,resizableFlag:!0,modalFlag:!1,identifier:"WebUX_PANEL_ECM_ITEMS"}),{target:a,proposedParam:{id:t.id,type:t.type,proposedOperation:t.proposedOperation,removeProposedAccess:t.removeProposedAccess}}),l=new m(s);l.render(),l.prepareUpdateView(),n.updateTreeDocument(o),l.setTreeDocument(n.getTreeDocument()),0===n.getTreeDocument().getAllDescendants().length?l.updateDGVForEmptyView():l.updateDGVForNonEmptyView();var c=r.getDefaultFilter(C.getColumns());n.getTreeDocument().setFilterModel(c),l.pushUpdateView(),d.hideLoader(i.options.target,l.loader)}),(function(){resolve(o)}))}catch(e){console.error(e),l.error(S.CHG_GOV_GET_RESOLUTION_FAIL),d.hideLoader(this.options.target,resolutionItemView.loader)}},removeResolution:async function(e){var i=this.options.contextDetails.id,n=document.getElementById("caProposedChange");"undefined"!=n&&null!=n&&g.mask(n);var o,a=await s.removeResolution(i,e);t.publish("ECM_GOV_ProposedDGV_RemoveResolutionPopup:"+(widget?widget.id:""),e[0].resolution);var l=[],d=this.proposedChangesModel.getProposedStatus(a.data[0]);if(a.data[0].resolution&&a.data[0].resolution.length>0&&(a.data[0].resolution&&a.data[0].resolution[0]&&a.data[0].resolution[0].idsOfNonIndexedData&&(o=a.data[0].resolution[0].idsOfNonIndexedData,a.data[0].resolution.splice(0,1)),a.data[0].resolution.length>0&&a.data[0].resolution.forEach((function(e){var t=r.getProposedNodeData(e);l.push(t)}))),o&&o.length>0){var c=new Map,p=o.length;for(let e=0;e<p;e+=50){let t;t=p<50?o.slice(e,e+p):o.slice(e,e+50);for(var h,m=[],C=new Map,f=0;f<t.length;f++){var v=t[f];m.push(v.id),C.set(v.id,v)}if(m.length>0){var D=r.commonPredicatedForFedSearch(),I=await r.callFederatedSearch(m,D);I&&I.results&&I.results.length>0&&(h=r.processCAProposedChangeResolutionFedSearch(I,C)),h&&h.length>0&&(l=l.concat(h))}c=new Map([...c,...C]),p-=50}if(c&&c.size>0){var w=await u.recent();if(w&&w.results&&w.results.length>0){var _=r.filterNonIndexedDataNew(w,c);c.size!=_.length&&console.log("Some data for resolution is not accessible");var b=r.processInformationForRecentResolution(_);b&&b.length>0&&(l=l.concat(b))}}}l&&this.updateResolutionInfo(l,d,e[0].id),g.unmask(n)},addResolution:async function(e){var t=this.options.contextDetails.id,i=document.getElementById("caProposedChange");"undefined"!=i&&null!=i&&g.mask(i);var n,o=await s.addResolution(t,e).catch((e=>{g.unmask(i)})),a=[],l=this.proposedChangesModel.getProposedStatus(o.data[0]);if(o.data[0].resolution&&o.data[0].resolution.length>0&&(o.data[0].resolution&&o.data[0].resolution[0]&&o.data[0].resolution[0].idsOfNonIndexedData&&(n=o.data[0].resolution[0].idsOfNonIndexedData,o.data[0].resolution.splice(0,1)),o.data[0].resolution.length>0&&o.data[0].resolution.forEach((function(e){var t=r.getProposedNodeData(e);a.push(t)}))),n&&n.length>0){var d=new Map,c=n.length;for(let e=0;e<c;e+=50){let t;t=c<50?n.slice(e,e+c):n.slice(e,e+50);for(var p,h=[],m=new Map,C=0;C<t.length;C++){var f=t[C];h.push(f.id),m.set(f.id,f)}if(h.length>0){var v=r.commonPredicatedForFedSearch(),D=await r.callFederatedSearch(h,v);D&&D.results&&D.results.length>0&&(p=r.processCAProposedChangeResolutionFedSearch(D,m)),p&&p.length>0&&(a=a.concat(p))}d=new Map([...d,...m]),c-=50}if(d&&d.size>0){var I=await u.recent();if(I&&I.results&&I.results.length>0){var w=r.filterNonIndexedDataNew(I,d);d.size!=w.length&&console.log("Some data for resolution is not accessible");var _=r.processInformationForRecentResolution(w);_&&_.length>0&&(a=a.concat(_))}}}a&&a.length>0&&this.updateResolutionInfo(a,l,e[0].id),g.unmask(i)},updateResolutionInfo:function(e,t,i){let n=this.proposedChangesModel.getTreeDocument().getRoots().find((e=>e.getAttributeValue("id")===i));n.setAttribute("resolution",e),n.setAttribute("proposedStatus",t);var o={resolution:e},a=this.proposedChangesModel.getResolvedByDetails(o);n.setAttribute("resolvedBy",a)},replaceByRevision:function(e){var t=this,i=this.options.contextDetails.id,n=document.getElementById("caProposedChange");"undefined"!=n&&null!=n&&g.mask(n),s.replaceProposedByRevision(i,e).then((function(i){t.proposedChangesModel.getTreeDocument().unselectAll();let o=t.proposedChangesModel.getTreeDocument().getRoots().find((t=>t.getAttributeValue("id")===e[0].id));t.proposedChangesModel.getTreeDocument().removeRoot(o),t.addProposedNode(i),g.unmask(n)}),(function(e){g.unmask(n)}))},addProposedHandler:function(e){if(c.getGlobalVariable().isNative){w.DispatchEventToWin("Add_Proposed","AddProposedChange")}else{let e={condition:"addExistingProposed",extendedQuery:""};const n=p.activateSearch();c.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow());var t=c.getGlobalVariable().proposedSearchType,i=!1;"false"==c.getGlobalVariable().CHG_EnableNonChangeGovernedToCA?i=!0:t=!1,p.search(S.CHG_GOV_Proposed_Add,t,this.OnSearchComplete.bind(this),"proposedChange",n,void 0,void 0,e,void 0,"",i)}},OnSearchComplete:async function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2]});if(t.length){await this.addProposed(t);let e=this.options.custom_view_options;null!=e&&d.loadCustomColumns(e)}},dropHandler:async function(e){if(e&&e.length>0){var t=u.parseObjectInformation(e);if(t.length>0){var i={};c.getGlobalVariable().isNative?i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DnD>Add Proposed Changes (Desktop App)"}:i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DnD>Add Proposed Changes"},_.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),await this.addProposed(t);let e=this.options.custom_view_options;null!=e&&d.loadCustomColumns(e)}}else l.error(S.CHG_GOV_Common_Drop_Error)},dropHandler_Instance:async function(e){if(e&&e.length>0){var t=u.parseInstanceObjectInformation(e);if(t.length>0){var i={};c.getGlobalVariable().isNative?i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DnD>Add Proposed Changes (Desktop App) - Add as Instance"}:i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DnD>Add Proposed Changes - Add as Instance"},_.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),await this.addProposed(t)}}else l.error(S.CHG_GOV_Common_Drop_Error)},editProposed:function(e){var t=this,i=this.options.contextDetails.id,n=document.getElementById("caProposedChange");"undefined"!=n&&null!=n&&g.mask(n),s.editProposed(i,e).then((function(e){t.editProposedNode(e)}),(function(e){g.unmask(n)}))},editProposedNode:function(e){var t=this,i=document.getElementById("caProposedChange");e.data.forEach((function(e){let i={};if(e.parent_referenceId){var n=t.proposedChangesModel.getTreeDocument().getSelectedNodes();let m={};for(var o=!1,a=0;a<n.length&&(e.activity.forEach((function(e){if(e.proposedPID==n[a].getAttributeValue("proposedPID"))return i=n[a],m=e,void(o=!0)})),!o);a++);var s=t.proposedChangesModel.getChangeDetails(m),r=m.proposedOperation,l=m.computedOperation,d=m.targetState,c=m.computedActivityWhy,p=t.proposedChangesModel.getChange(m),u=t.proposedChangesModel.getProposedActivityIconName(m),g=m.proposedWhy,h=t.proposedChangesModel.getProposedStatus(m)}else{i=t.proposedChangesModel.getTreeDocument().getSelectedNodes().find((t=>t.getAttributeValue("proposedPID")===e.proposedPID));s=t.proposedChangesModel.getChangeDetails(e),r=e.proposedOperation,l=e.computedOperation,d=e.targetState,c=e.computedActivityWhy,p=t.proposedChangesModel.getChange(e),u=t.proposedChangesModel.getProposedActivityIconName(e),g=e.proposedWhy,h=t.proposedChangesModel.getProposedStatus(e)}i.prepareUpdate(),i.setAttribute("change_details",s),i.setAttribute("proposedOperation",r),i.setAttribute("computedOperation",l),i.setAttribute("targetState",d),i.setAttribute("computedActivityWhy",c),i.setAttribute("change",p),i.setAttribute("activityIcon",u),i.setAttribute("reasonForChange",g),i.setAttribute("proposedStatus",h),i.pushUpdate()})),g.unmask(i)},addProposed:async function(e){var t=this,i=this.options.contextDetails.id,n=document.getElementById("caProposedChange");"undefined"!=n&&null!=n&&g.mask(n),await s.addProposed(i,e).then((function(e){t.addProposedNode(e)}),(function(e){g.unmask(n)}))},addProposedNode:async function(e){var t,i=this,n=document.getElementById("caProposedChange");if(e.data[0]&&e.data[0].idsOfNonIndexedData&&(t=e.data[0].idsOfNonIndexedData,e.data.splice(0,1)),t&&t.length>0){var o=new Map,a=t.length;for(let e=0;e<t.length;e+=50){let n;n=a<50?t.slice(e,e+a):t.slice(e,e+50);for(var c,p=[],h=new Map,m=0;m<n.length;m++){var C=n[m];p.push(C.id),h.set(C.id,C)}if(p.length>0){var f=r.commonPredicatedForFedSearch(),v=await r.callFederatedSearch(p,f);v&&v.results&&v.results.length>0&&(c=await r.processCAProposedChangesFedSearch(v,h)),c&&c.proposed&&c.proposed.length>0&&(i.proposedChangesView.prepareUpdateView(),i.proposedChangesModel.updateTreeDocument(c.proposed,i.accessBits),i.proposedChangesView.setTreeDocument(i.proposedChangesModel.getTreeDocument()),i.proposedChangesView.pushUpdateView(),i.proposedChangesModel.getTreeDocument().getAllDescendants().length>0&&i.proposedChangesView.updateDGVForNonEmptyView())}o=new Map([...o,...h]),a-=50}if(o&&o.size>0){i.proposedChangesView.indexInfoDiv.show();var D=await u.recent();if(D&&D.results&&D.results.length>0){var I=r.filterNonIndexedDataNew(D,o);o.size!=I.length&&l.warn(S.CHG_GOV_Not_Accessable_Data);var w=await r.processInformationForRecentProposed(I);if(w&&w.proposed&&w.proposed.length>0){i.proposedChangesView.prepareUpdateView(),i.proposedChangesModel.updateTreeDocument(w.proposed,i.accessBits);let e=await s.getStatesAttributes(w.policies);d.addCSSMaturityClasses(w.policies,"wux-controls-label",e),i.proposedChangesView.setTreeDocument(i.proposedChangesModel.getTreeDocument()),i.proposedChangesView.pushUpdateView(),i.proposedChangesModel.getTreeDocument().getAllDescendants().length>0&&i.proposedChangesView.updateDGVForNonEmptyView()}}}}e.data&&e.data.length>0?((C=[{proposed:""}])[0].proposed=e.data,r.processCAProposedChangesData(C).then((function(e){i.proposedChangesModel.updateTreeDocument(e.proposed,i.accessBits),i.proposedChangesView.setTreeDocument(i.proposedChangesModel.getTreeDocument()),i.proposedChangesView.pushUpdateView(),i.proposedChangesModel.getTreeDocument().getAllDescendants().length>0&&i.proposedChangesView.updateDGVForNonEmptyView(),g.unmask(n)}))):g.unmask(n)},removeProposed:function(){var e=this,t=[...this.proposedChangesModel.getTreeDocument().getSelectedNodes()];if(console.log(y),t.length){let o=t.length,a=!1;for(let e=0;e<o;e++)if(t[e].options.grid&&t[e].options.grid.containsChangeRequired&&"true"==t[e].options.grid.containsChangeRequired){a=!0;break}if(0==a)e.removeProposedProcess(t,e);else{var i=[{label:S.CHG_GOV_OK_Button_Label,handler:function(){e.removeProposedProcess(t,e),y.closeDialog()},className:"primary"},{label:S.CHG_GOV_CANCEL_Button_Label,handler:function(){console.log("Cancel Clicked"),y.closeDialog()},className:"default"}],n={title:S.CHG_GOV_Proposed_Remove_Title,content:S.CHG_GOV_Proposed_Remove_Content,buttonArray:i};y.launchInfoDailog(n)}}else l.error(S.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},removeProposedProcess:function(e,t){console.log("ok clicked");for(var i=[],n=0;n<e.length;n++){if(e[n].options.grid.fdFrom&&e[n].options.grid.fdFrom.length>0)return void l.warn(S.CHG_GOV_Flowdown_Proposed_Removal_Warning);i.push({id:e[n].options.grid.instanceId?e[n].options.grid.instanceId:e[n].options.grid.id,parent_referenceId:e[n].options.grid.parent_referenceId?e[n].options.grid.parent_referenceId:"",operationType:e[n].options.grid.proposedOperation,updateAction:"DISCONNECT"})}if(i.length>0){let n=document.getElementById("caProposedChange");n&&!g.isMasked(n)&&g.mask(n);var o=t.options.contextDetails.id;s.removeProposedChange(o,i).then((function([i,n]){if(t.proposedChangesModel.getTreeDocument().unselectAll(),null!=n)for(let t=0;t<e.length;t++){let i=!1;for(let o=0;o<n.length;o++)if(e[t].options.grid.id==n[o]){e.splice(t,1),i=!0;break}1==i&&t--}let o=[];if(i.data&&i.data.length>0&&i.data[0].removedObjectIds&&i.data[0].removedObjectIds.length>0)for(var a=0;a<e.length;a++)e[a].options.grid.instanceId?i.data[0].removedObjectIds.includes(e[a].options.grid.instanceId)&&o.push(e[a]):i.data[0].removedObjectIds.includes(e[a].options.grid.id)&&o.push(e[a]);for(a=0;a<o.length;a++)t.proposedChangesModel.getTreeDocument().removeRoot(o[a]);if(c.getGlobalVariable().is3DSpace){let e=document.getElementById("caProposedChangeFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("caProposedChange");e&&g.isMasked(e)&&g.unmask(e)}0==t.proposedChangesModel.getTreeDocument().getChildren().length&&t.proposedChangesView.updateDGVForEmptyView(),null!=n&&0!=n.length||l.success(S.CHG_GOV_Proposed_Remove_Success)}),(function(e){if(t.proposedChangesModel.getTreeDocument().unselectAll(),c.getGlobalVariable().is3DSpace){let e=document.getElementById("caProposedChangeFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("caProposedChange");e&&g.isMasked(e)&&g.unmask(e)}}))}},updateReasonForChange:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.instanceId?e.nodeModel.options.grid.instanceId:e.nodeModel.options.grid.id,parent_referenceId:e.nodeModel.options.grid.parent_referenceId?e.nodeModel.options.grid.parent_referenceId:"",type:e.nodeModel.options.grid.instanceType?e.nodeModel.options.grid.instanceType:e.nodeModel.options.grid.type,serviceName:e.nodeModel.options.grid.serviceName,proposedOperation:e.nodeModel.options.grid.proposedOperation,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),s.updateProposedChangeReasonForChange(i,this.options.contextDetails.id).then((e=>{console.log("updated on backend")}))}},updateStatus:function(e){var t=this;if(e.nodeModel){let i="";"startedKey"==e.nodeModel.options.grid.proposedStatus?i="Started":"notStartedKey"==e.nodeModel.options.grid.proposedStatus?i="Not Started":"partialKey"==e.nodeModel.options.grid.proposedStatus?i="Partial":"completedKey"==e.nodeModel.options.grid.proposedStatus?i="Complete":"rejectedKey"==e.nodeModel.options.grid.proposedStatus&&(i="Rejected");let n={id:e.nodeModel.options.grid.instanceId?e.nodeModel.options.grid.instanceId:e.nodeModel.options.grid.id,parent_referenceId:e.nodeModel.options.grid.parent_referenceId?e.nodeModel.options.grid.parent_referenceId:"",type:e.nodeModel.options.grid.instanceType?e.nodeModel.options.grid.instanceType:e.nodeModel.options.grid.type,serviceName:e.nodeModel.options.grid.serviceName,proposedOperation:e.nodeModel.options.grid.proposedOperation,proposedStatus:i},o=[];o.push(n),s.updateProposedChangeStatus(o,this.options.contextDetails.id).then((function(e){if(e&&e.data&&Array.isArray(e.data)){var i="";e.data.forEach((function(e){if(e.error&&""!=e.error){let o=t.proposedChangesModel.getTreeDocument().getRoots().find((t=>t.getAttributeValue("id")===e.id&&t.getAttributeValue("proposedOperation")===e.proposedOperation));o.prepareUpdate();var n=t.proposedChangesModel.getProposedStatus(e);o.setAttribute("proposedStatus",n),o.pushUpdate(),i=e.error+"\n"}})),""!=i&&(i=i.slice(0,-1),l.error(i))}}))}}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAContextContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c={showRMBMenuOnGrid:function(e){return new Promise((function(t,i){const a=[];let s=!1,r=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),p=[],u=[],g=[];r.forEach((e=>{p.push(e.options.grid.id),u.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&g.push(e.options.grid.serviceBasedObjId)})),r.length>1&&(s=!0);const h={};h.selectedNodeIDs=u;const m=d("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),C=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,f=e.cellInfos.nodeModel.options.grid.type,v=e.cellInfos.nodeModel.options.grid.name,D=e.cellInfos.nodeModel.options.grid.displayType;let I=[];I.push(f),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(I=I.concat(e.cellInfos.nodeModel.options.grid.kind));const w={objectId:C,objectType:f,objectTaxonomies:I,displayName:v,displayType:D,facetName:"dependency"};(b={}).objectID=e.cellInfos.nodeModel.options.grid.id;const _=m.openWith(w);var b;s?(g.length>0&&a.push(n.createPropertyPushItem(g)),a.push(l.getRelationalExplorerMenu(h)),o.getGlobalVariable().isNative&&(a.push(m.getExploreMenu(that,b)),a.push(m.getExploreWithMenu(that,b)),a.push(m.getOpenMenu(that,b)),a.push(m.getOpenAdvMenu(null,b)),a.push(m.getOpenROMenu(null,b))),g.length>0&&(a.push(l.getMaturityMenu(void 0,g)),a.push(c.getTransferMenu(e))),t(a)):((b={}).objectID=e.cellInfos.nodeModel.options.grid.id,g.length>0&&a.push(n.createPropertyPushItem(g)),a.push(l.getRelationalExplorerMenu(h)),_.then((i=>{o.getGlobalVariable().isNative&&(a.push(m.getExploreMenu(that,b)),a.push(m.getExploreWithMenu(that,b)),a.push(m.getOpenMenu(that,b)),a.push(m.getOpenAdvMenu(null,b)),a.push(m.getOpenROMenu(null,b))),i&&a.push(i),g.length>0&&(a.push(l.getMaturityMenu(void 0,g)),a.push(c.getTransferMenu(e))),t(a)})))}))},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)i[o].options.grid.sourceType&&"CSD"!=i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}}};return c})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView",["DS/ENOChangeActionUX/scripts/Views/CANewProposedView","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesController","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s,r,l){"use strict";return{createProposedChangesView:function(t){var i={};i=UWA.merge(i,t),this._modelEvents=i.contextDetails._modelEvents,this.id=i.id;let d=i.contextDetails.title;var c="pid:"+i.id,p=t.contextDetails.userAccess;i.targetclassName=i.target.className;let u={id:c,name:i.contextDetails.name,title:d,description:i.contextDetails.description,severity:i.contextDetails.severity,maturity:i.contextDetails.maturity,invokedFrom:"gov",isSelected:i.isSelected,init_options:i};i.target.empty();let g=i.target;var h=UWA.createElement("div",{id:"proposedDGV",class:"proposedDGV",styles:{display:"none",height:"100%"}}),m=UWA.createElement("div",{id:"proposedLTV",class:"proposedLTV",styles:{display:"none",height:"100%"}});h.inject(g),m.inject(g);let C=n.getUserPreference(o.keys.viewKeys.PROPOSED_DEF_VIEW),f=!1;var v=l.getGlobalVariable();f=!(!v.isNative||1!=v.Enable_TileView_Native)||widget.getPreference("tileViewPreference").value,C&&"LTV"===C&&f?m.show():h.show();let D=new new e._createView_TestProposed("div","test-proposed-facet",!0,u);D.container=m,D.model={id:c,name:i.contextDetails.name,title:d,description:i.contextDetails.description,severity:i.contextDetails.severity,maturity:i.contextDetails.maturity,invokedFrom:"gov",isSelected:i.isSelected,get:function(e){return"userAccess"==e?p:"id"==e?c:"synopsis"===e?d:void 0},fetch:function(e){console.log("dummy fetch called...!"),r.publish("load-dependency"+widget.id,c),e.onComplete()}},m.addContent(D.render());var I=a.clone(i||{},!1);I.target=h,new s(I).createProposedChangesView()}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAContextContextualMenu","DS/PlatformAPI/PlatformAPI","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.contextDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),p.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-context-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-context-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").removeClassName("minified-header-height"))}));var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"chg-context-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"chg-context-DataGrid-on-reset-search",data:{query:e},context:i})}})},render:function(){try{let t=this.processColumns(),o=this,p={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:d.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(e).then((function(e){return e}));t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};p=UWA.merge(p,this.options);let C={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.contextDataGridView=new i(p),this.contextDataGridView.cellSelection="none",this._modelEvents.unsubscribe({event:"chg-context-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"chg-context-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"chg-context-DataGrid-on-search"},(function(e){if("true"==h.getGlobalVariable().slidePanelTagger){var t=e.query;if(t){var i=o.contextDataGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var i=e.options.grid.title.toLowerCase().contains(t.toLowerCase())||e.options.grid.name.toLowerCase().contains(t.toLowerCase());e.isVisible()&&!i?e.hide():!e.isVisible()&&i&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"chg-context-DataGrid-on-reset-search"},(function(e){var t=o.contextDataGridView.getTreeDocument();t.withTransactionUpdate((function(){t.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new a(C);var e={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(e).then((function(e){return e}))}};this.tileView.onContextualEvent=e;let f={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.contextDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(f),s.toolbar=this.contextDataGridView.setToolbar(s.writetoolbarDefinition()),this.toolbar=s.toolbar,this.contextDataGridView.addEventListener("allCellsRendered",(function(){o.contextDataGridView.buildStatusBar([{type:l.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_TotalItems+o.contextDataGridView.getTreeDocument().getAllDescendants().length}},{type:l.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_SelectedItems+o.contextDataGridView.getTreeDocument().getSelectedNodes().length}}]),o.tileView.buildStatusBar([{type:l.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_TotalItems+o.tileView.getTreeDocument().getAllDescendants().length}},{type:l.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_SelectedItems+o.tileView.getTreeDocument().getSelectedNodes().length}}])})),o.contextDataGridView.getTreeDocument().getXSO().onAdd((function(e){if(o.contextDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+o.contextDataGridView.getTreeDocument().getSelectedNodes().length}}),o.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+o.contextDataGridView.getTreeDocument().getSelectedNodes().length}}),h.getGlobalVariable().isNative){var t;t=o.contextDataGridView.getTreeDocument().getSelectedNodes();for(var i=[],n=0;n<t.length;n++)i.push(t[n].options.grid.id);m.DispatchEventToWin("Add_to_CSO",i.toString())}})),o.contextDataGridView.getTreeDocument().getXSO().onRemove((function(e){if(o.contextDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),o.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),h.getGlobalVariable().isNative){var t;t=o.contextDataGridView.getTreeDocument().getSelectedNodes();for(var i=[],n=0;n<t.length;n++)i.push(t[n].options.grid.id);m.DispatchEventToWin("Add_to_CSO",i.toString())}})),document.getElementById("outer-context-grid-div")&&document.getElementById("outer-context-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-context-grid-div",class:"outer-context-grid-div"});let v=UWA.createElement("div",{class:"toolbar-context-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"affectedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new u({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new g({title:d.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(v),this.toolbar.inject(v);let D=UWA.createElement("div",{class:"content-context-grid-div expanded-header-height"}),I=UWA.createElement("div",{styles:{height:"100%"},class:"content-context-tile-div contextTileView expanded-header-height"}),w=UWA.createElement("div",{class:"hideView",id:"contextEmptyTileViewDiv"});UWA.createElement("div",{html:d.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(w),this.contextDataGridView.inject(D),this.tileView.inject(I),w.inject(I),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.addContent(D),this.chgGridViewContainer.addContent(I),this.loader=(new n).inject(this.options.target)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.contextDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil"],(function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout"],(function(e){e.coGridView.coDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout((function(){t.changeView("TileView")}),100)}))},showEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/context/ChgCAcontextDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";let D={createContextView:function(t,s){var r=this;let u={};u=UWA.merge(u,s),u.target=t,u.columns=i.getColumns(),this.ChgCAcontextDataGridModel=new n(u.id),this.id=u.id,this.modelEvents=u.modelEvents,this.treeDocument=u.treeDocument=this.ChgCAcontextDataGridModel.createTreeDocument(),r.ChgCAContextTreeModel=u.treeDocument,this.subscribeToModelEvents(u.treeDocument),g.makeDroppable(u.target,r.dropHandler),this.contextView=new e(u),C.showLoader(u.target,this.contextView.loader),D.changeView();this.contextView.chgGridView;c.getCAContext(s.id).then((async function(e){var t={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(t=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var i=await p.processCAContextItems(e);r.chgCAcontextDataGridModel=new n(s.id);e.data.map((e=>e.policy)).filter((function(e,t,i){return t==i.indexOf(e)}));if(C.fetchMaturityStateCSS(i),r.chgCAcontextDataGridModel.loadContextData(u.treeDocument,i),C.hideLoader(u.target,r.contextView.loader),t&&t.length>0){var c=new Map,g=t.length;for(let e=0;e<t.length;e+=50){let i=[];i=g<50?t.slice(e,e+g):t.slice(e,e+50);for(var h=[],m=new Map,f=i,v=0;v<f.length;v++){var I=f[v];h.push(I.id),m.set(I.id,I)}var w=[];if(h.length>0){var _=p.commonPredicatedForFedSearch(),b=await p.callFederatedSearch(h,_);if(b&&b.results&&b.results.length>0)w=await p.processCAContextItemsFederatedSearch(b,m)}r.chgCAcontextDataGridModel.loadContextData(u.treeDocument,w),C.hideLoader(u.target,r.contextView.loader),c=new Map([...c,...m]),g-=50}if(c&&c.size>0){r.contextView.indexInfoDiv.show();var S=await d.recent();if(S&&S.results&&S.results.length>0){var y=p.filterNonIndexedDataNew(S,c);c.size!=y.length&&a.warn(o.CHG_GOV_Not_Accessable_Data,!0);var E=await p.processInformationForRecentCAContext(y);C.fetchMaturityStateCSS(E),r.chgCAcontextDataGridModel.loadContextData(u.treeDocument,E)}}}else r.contextView.indexInfoDiv.hide();var O=p.getDefaultFilter(u.columns);u.treeDocument.setFilterModel(O),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgCAContextTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgCAContextTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgCAContextTreeModel)})),0==u.treeDocument.getChildren().length?u.treeDocument._modelEvents.publish({event:"treeEmpty"}):u.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),D.changeView(),C.hideLoader(u.target,r.contextView.loader)}),(function(e){return Promise.reject(e)}))},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);var t;D.ChgCAcontextDataGridModel.treeDocument;t=d.parseObjectInformation(e),D.ChgCAcontextDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()})),h.unsubscribe(`CA_Context:${widget.id}`),h.subscribe(`CA_Context:${widget.id}`,(function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCAContextTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCAContextTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCAContextTreeModel)}))})),h.unsubscribe(`${e.options.id} of ${widget.id}`),h.subscribe(`${e.options.id} of ${widget.id}`,(function(t){D.ChgCAcontextDataGridModel.filterView(t,e)})),h.unsubscribe(`${e.options.id} colorize ${widget.id}`),h.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){D.ChgCAcontextDataGridModel.enableColorizeView(t,e)})),h.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),h.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){D.ChgCAcontextDataGridModel.disableColorizeView(t,e)})),h.unsubscribe("updateIndexingIconForHideOrShowInContextItem"),h.subscribe("updateIndexingIconForHideOrShowInContextItem",(function(e){i.contextView.indexInfoDiv.show()}))},addExistingHandler:function(){var e={commandInfo:{type:"Change Action",facet:"Context",action:"CA>Context>Add"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=D.ChgCAcontextDataGridModel.treeDocument.getAllDescendants(),i=D.createExcludeListForSearch(t);if(l.getGlobalVariable().isNative){u.DispatchEventToWin("CHG_Add_Context","CHG_Add_Context")}else{let e={condition:"addExistingContexts",extendedQuery:i};const t=r.activateSearch();l.getGlobalVariable().is3DSpace&&t.socket.subscribeServer("SearchComServer",getTopWindow());r.search(o.CHG_GOV_AddExistingContext,"",D.OnSearchComplete,"contexts",t,void 0,void 0,e,void 0,"",!1)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){if(l.getGlobalVariable().isNative){let t=e.split("~"),l=[];for(var i=0;i<t.length;i++)l.push(t[i]);var n=!1;let c=[];for(var s=0;s<t.length;s++){var r=l[s].split(",");if(r[0].contains("uuid:"))n=!0;else{var d=[];d.push(r[0]),d.push(r[1]),d.push(r[4]),d.push(r[5]),d.push(""),d.push(r[2]),d.push(r[3]),d.push("3DSpace"),c.push(d)}}1==n&&a.warn(o.CHG_GOV_WARN_DATA_IGNORED),e=c}let c=[];for(i=0;i<e.length;i++)c.push({id:e[i][8]&&null!=e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2],environment:l.getGlobalVariable().tenant});c.length&&(t.hideEmptyView(),D.ChgCAcontextDataGridModel.addExistingChildren(c))},globalSubscribeForCAContextView:function(){s.addObserver("ChgCAcontextDataGridLayout","CO-AccessBit-Update",D.handleAccessBitUpdate),s.addObserver("ChgCAcontextDataGridLayout","Lifecycle.Modification",D.handleForMaturityUpdate),s.addObserver("ChgCAcontextDataGridLayout","CO-Properties-Update",D.handlePropertiesUpdateForCAContext)},handleAccessBitUpdate:function(e){"false"==e.accessBits.AddContext?(D.accessBit=!1,D.contextView.contextDataGridView.getToolbar().updateNodeModel("add",{disabled:!0}),D.contextView.contextDataGridView.getToolbar().updateNodeModel("remove",{disabled:!0})):(D.accessBit=!0,D.contextView.contextDataGridView.getToolbar().updateNodeModel("add",{disabled:!1}),D.contextView.contextDataGridView.getToolbar().updateNodeModel("remove",{disabled:!1}))},removeHandler:function(){var e={commandInfo:{type:"Change Action",facet:"Context",action:"CA>Context>Remove"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const i=D.treeDocument.getSelectedNodes();if(i.length>0){let e=[];for(var n=0;n<i.length;n++)e.push({id:i[n].options.grid.id,type:i[n].options.grid.type,updateAction:"DISCONNECT"});D.ChgCAcontextDataGridModel.removeExistingChildren(e).then((function(e){0==D.treeDocument.getAllDescendants().length&&t.showEmptyView()}),(function(e){}))}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleForMaturityUpdate:function(e){if(e){let t=D.treeDocument.getSelectedNodes();C.getHandleForMaturityUpdate(JSON.parse(e),t)}},handlePropertiesUpdateForCAContext:function(e){var t=D.ChgCAContextTreeModel;t&&f.handlePropertiesOnUpdate(t,e)}};return D.globalSubscribeForCAContextView(),D})),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCAAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";var D={getDataToBuildAddMemberPanel:function(e){var t=this;D.teamlayoutModel=e.model,D.id=e.id,D.objectTitle=e.objectTitle,D.options=e,D.modelForChangeCoordinator=new u,D.modelForAssignee=new u,D.modelForApprover=new u,D.modelForFollower=new u,t.filterByTrigramHandler(),D.accessBitAssignee=t.getAccessBitBoolean(D.options.accessBits.AddContributor),D.accessBitApprover=t.getAccessBitBoolean(D.options.accessBits.AddReviewer),D.accessBitFollower=t.getAccessBitBoolean(D.options.accessBits.AddFollower)},getAccessBitBoolean:function(e){const t=!/^(true|1)$/i.test(e);return console.log("accessBit",e),t},setDataForAddMember:function(e){var t=this,n=[];return n.push({label:m.CHG_GOV_Members_DataGrid_Assignee,id:"assignee",model:D.modelForAssignee,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Assignee",placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"],disabled:D.accessBitAssignee}),n.push({label:m.CHG_GOV_Members_DataGrid_Approver,id:"approver",model:D.modelForApprover,getListOfUsers:t.getMembersListForApprover,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Approver",placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,supportType:D.approversSupportType,disabled:D.approverDivDisable}),n.push({label:m.CHG_GOV_Members_DataGrid_InformedUser,id:"follower",model:D.modelForFollower,getListOfUsers:t.getMembersListForFollower,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Follower",placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"],disabled:D.accessBitFollower}),{title:m.CHG_Member_AddMember_Title,objectTitle:D.objectTitle,target:D.options.target,fields:n,addMemberSubmitHandler:t.addmember,teamlayoutModel:D.teamlayoutModel,makeDroppable:i.makeDroppable,type:"ChangeAction"}},setApproversDiv:function(){D.approverDivDisable=!1,D.approversSupportType=["person","routetemplate"],1==D.accessBitApprover||"Route Template"===f.reviewerType.typeOfReviewer&&0==D.accessBitApprover?D.approverDivDisable=!0:"Person"===f.reviewerType.typeOfReviewer&&(D.approversSupportType=["person"],D.approverDivDisable=D.accessBitApprover)},launchAddMemberPanel:function(){var i={commandInfo:{type:"Change Action",facet:"Members",action:"CR>Members>Add Member"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),D.setApproversDiv();var n=D.setDataForAddMember(),o=new e(n);(new t).buildAddMemberDialog(o)},filterByTrigramHandler:function(){D.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new h).getTrigramNameFilter()),D.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new h).getTrigramNameFilter()),D.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new h).getTrigramNameFilter()),D.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new h).getTrigramNameFilter())},dragAndDropHandler:function(){var e=D.options.target.querySelector("#memberFieldElementchangeCoordinator");i.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForChangeCoordinatorField:function(e){return e},addmember:function(e,t){let i=e.assignee,n=e.approver,o=e.follower;var s=D.id;let r=n.person||[],l=n.routetemplate||[];if(r.length>0&&l.length>0){if(!(o.person.length>0||i.person.length>0||o.group.length>0||i.group.length>0))return void d.error(m.CHG_GOV_CA_Members_Approvers_RouteTemplate_and_Person_error);d.warn(m.CHG_GOV_CA_Members_Approvers_RouteTemplate_and_Person_error),n.person=[],n.routetemplate=[]}if(l.length>1){if(!(o.person.length>0||i.person.length>0||o.group.length>0||i.group.length>0))return void d.error(m.CHG_GOV_CA_Members_Approvers_RouteTemplate_and_Person_error);d.warn(m.CHG_GOV_CA_Members_Approvers_RouteTemplate_and_Person_error),n.person=[],n.routetemplate=[]}var c=v.makeUpdateMemberJson("CONNECT",i,n,o,"",t);f.updateMembers(t,s,c).then((function(e){var t=a.processMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(e){for(var i=e.membersTreeModel.getAllDescendants(),n=[],o=0;o<t.length;o++){var a=t[o];if("approver"==a.role){if("Route Template"==a.type){n.push(a),f.reviewerType.typeOfReviewer="Route Template",D.typeOfApprover="Route Template";continue}"Person"==a.type&&(f.reviewerType.typeOfReviewer="Person",D.typeOfApprover="Person")}"Coordinator"==a.role&&(v.isChangeCoordinatorConnected=!0);for(var s=a.id,r=!1,l=0;l<i.length;l++)if(s==i[l].options.grid.id){r=!0;break}if(1==r){e.membersTreeModel.prepareUpdate();i[l].options.grid.role;let t=a.role,o="";if(t.includes(",")){let e=t.split(",");for(let t=0;t<e.length;t++)o+=", "+v.getRoleNLSValue(e[t].trim()),i[l].options.grid.roles.push(e[t].trim())}else o=", "+v.getRoleNLSValue(t),i[l].options.grid.roles.push(t);i[l].options.grid.role;i[l].options.grid.roleList+=o,i[l].options.grid.role+=","+t,n.push(i[l].options.grid),e.membersTreeModel.pushUpdate()}else n.push(a)}n.length>0&&e.addNodesInLayout(n)}))}))}};return D})),define("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgGovernanceUX/scripts/model/ChgCODataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/ProgressBar","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_){"use strict";var b={loadRealTimeCODataPromise:function(e){return new Promise((function(t,i){n.getTimestamp().then((function(a){var s=o.processTimestampData(a);n.getConfiguredChangeOrderList({indexed:!1,simplifiedJSON:!0,timestamp:s,filter:e}).then((function(e){o.processedCOSummaryList(e,b.extns).then((function(i){t({realTimeData:e,processedCOList:i})}))}),(function(e){i(e)}))}),(function(e){i(e)}))}))},loadIndexedCODataPromise:function(e){return new Promise((function(t,i){n.getConfiguredChangeOrderList(e).then((function(e){o.processedCOSummaryList(e,b.extns).then((function(i){t({COSummaryList:e,processedCOList:i})}),(function(e){i(e)}))}),(function(e){i(e)}))}))},postProcessing:function(){var e=this;0==e.treeDocument.getChildren().length?e.treeDocument._modelEvents.publish({event:"coSummaryEmpty"}):e.treeDocument._modelEvents.publish({event:"coSummaryNotEmpty"}),e.globalSubscribeCOSummary(),e.coGridView.loadCustomColumns(),I.hideLoader(e.options.target,e.coGridView.loader)},updateTagger:function(){var e=this;"false"==a.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)}))},createChangeOrderView:async function(n){var a=this;n.target.setStyles({position:"relative"}),this._pathChangeOrdersSummary=[g._KEY,g._VIEWS_PREFERENCES,g._LIST_VIEW,g._FILTERVIEW];let s=h.getFilter(this._pathChangeOrdersSummary);var r={};r=UWA.merge(r,n),this.options=r,b.extns=await D.getExtensions("Change Order"),r.columns=t.getColumns(),a.ChgCODataGridModel=new i,a.treeDocument=r.treeDocument=a.ChgCODataGridModel.createTreeDocument(),a.ChgCOlayoutModel=a.treeDocument,a.ChgCODataGridModel.registerCustomFilter();var l=o.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(l),a.coGridView=new e(r),a.coGridView.render(),I.showLoader(r.target,a.coGridView.loader),a.subscribeToModelEvents(a.treeDocument);var d="";"inactive"===s?d="inactiveCO":(d="activeCO",h.updateFilter(a._pathChangeOrdersSummary,"activeCO")),a.updateGrid(d)},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_FetchChgOrder,this.updateTagger()},updateGrid:async function(e){var t=this,i=r.toolbar.getNodeModelByID("filter");if("activeCO"==e&&(i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected"),t.preUpdateProcessing(),"inactiveCO"!=e){var n=await t.loadRealTimeCODataPromise(e);I.fetchMaturityStateCSS(n.processedCOList),t.ChgCODataGridModel.loadChangeOrderData(t.treeDocument,n.processedCOList)}t.params.filter=e,t.loadIndexedCODataPromise(t.params).then((async function(e){I.fetchMaturityStateCSS(e.processedCOList),t.ChgCODataGridModel.loadIndexedChangeOrders(t.treeDocument,e.processedCOList),t.currentPage=parseInt(e.COSummaryList.summary["Current Page"]),t.totalPages=parseInt(e.COSummaryList.summary["Total Pages"]),t.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_NoChgOrder,t.currentPage<t.totalPages?(t.updateTagger(),t.coGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.coGridView.coDatagrid.onInfiniteScroll((function(e){t.getNextPageChangeOrders("DGV")})),t.coGridView.coTilesView.onInfiniteScroll((function(e){t.getNextPageChangeOrders("RTV")}))):(t.updateTagger(),t.coGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())}))},getNextPageChangeOrders:async function(e){var t=this;if(t.currentPage<t.totalPages){I.showLoader(t.options.target,t.coGridView.loader),t.params.pageNumber++,t.currentPage++;let i=await t.loadIndexedCODataPromise(t.params);t.ChgCODataGridModel.loadIndexedChangeOrders(t.treeDocument,i.processedCOList),t.updateTagger(),t.coGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),"DGV"===e?t.coGridView.coDatagrid.infiniteScrollProcessDone():t.coGridView.coTilesView.infiniteScrollProcessDone()}},changeView:function(){t.changeView("GridView")},refreshLayout:function(e){var t=this.ChgCOlayoutModel;(new i).updateNodeIndexed(t,e),this.coGridView.coDatagrid.ensureNodeModelVisible(this.ChgCOlayoutModel.getChildren()[0],!1)},removeDataFromGrid:function(e,t){b.ChgCOlayoutModel.getChildren();for(var i=0;i<e.length;i++){var n=e[i];b.ChgCOlayoutModel.search({shouldStop:function(e){return e.options.grid.id===n&&(b.removingNode(e),!0)}}),0==b.ChgCOlayoutModel.getChildren().length&&b.ChgCOlayoutModel._modelEvents.publish({event:"coSummaryEmpty"})}},removingNode:function(e){this.ChgCOlayoutModel.removeRoot(e)},globalSubscribeCOSummary:function(){u.addObserver("ChgCODataGridLayout","ENOLC_MOVE_CMD_UPDATE",b.handleForCOSummaryTransfer),u.addObserver("ChgCODataGridLayout","CO-Properties-Update",b.handleForUpdatingFromPropertyPanel),u.addObserver("ChgCODataGridLayout","Lifecycle.Modification",b.handleForMaturityUpdate),u.addObserver("ChgCODataGridLayout","applicability:update:notification",b.handleForApplicabilityUpdate)},handleForUpdatingFromPropertyPanel:function(e){var t=b.ChgCOlayoutModel;t&&w.handlePropertiesOnUpdate(t,e)},handleForCOSummaryTransfer:function(e){var n,o,a=b.ChgCOlayoutModel.getAllDescendants(),s=[];Object.keys(e.data.attributes).forEach((function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,s.push(i.id)}));for(var r=0;r<s.length;r++){n=s[r];for(var l=0;l<a.length;l++){if(a[l].options.grid.id==n.id){var d=a[l].options.grid.name;if(n.newOwnerId&&n.newOwnerFullName){var c=n.newOwnerId;a[l].options.grid.owner=c;var p=n.newOwnerFullName;a[l].options.grid.ownerFullName=p}if(n.newOrganization){var u=n.newOrganization;a[l].options.grid.orgnaizationNLS=u}if(n.newCollabSpace){var g=n.newCollabSpace;a[l].options.grid.collabspaceNLS=g}""==n.newOwnerId?(c=a[l].options.grid.owner,p=a[l].options.grid.ownerFullName,o=t.createCustomOwner(c,p)):o=t.createCustomOwner(c,p);var h={};h.name=d,h.title=a[l].options.grid.title,h.severity=a[l].options.grid.severity,h.severityNLS=a[l].options.grid.severityNLS,h.ownerFullName=p,h.maturityNLS=a[l].options.grid.maturityNLS;var m=d+" | "+p,C=i.prototype.createCustomTooltip(h);a[l].updateOptions({grid:{collabspaceNLS:a[l].options.grid.collabspaceNLS,organizationNLS:a[l].options.grid.organizationNLS,owner:a[l].options.grid.owner,ownerFullName:a[l].options.grid.ownerFullName,co_Owner:o},customTooltip:C,subLabel:m})}}}},loadingViewPreference:function(){var e=v("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=c.MOBILE_CUTOFF){var t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(p.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{var i=e.getCASummaryViewDesktop();void 0===i||"GridView"===i?this.changeView():p.changeView()}},filterView:function(e){t.filterView(e.filter),b.updateGrid(e.filter)},subscribeToModelEvents:function(e){let t=this;e._modelEvents.subscribe({event:"coSummaryEmpty"},(function(e){p.showEmptyView(),b.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_NoChgOrder})),e._modelEvents.subscribe({event:"coSummaryNotEmpty"},(function(e){p.hideEmptyView()})),C.unsubscribe(`${e.options.id}:${widget.id}`),C.subscribe(`${e.options.id}:${widget.id}`,(function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.treeDocument),e._cleanBIFilterProxy();let i={data:{roots:t.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(i,t.treeDocument)}))})),C.unsubscribe(`${e.options.id} of ${widget.id}`),C.subscribe(`${e.options.id} of ${widget.id}`,(function(e){b.ChgCODataGridModel.filterView(e)})),C.unsubscribe(`${e.options.id} colorize ${widget.id}`),C.subscribe(`${e.options.id} colorize ${widget.id}`,(function(e){b.ChgCODataGridModel.enableColorizeView(e)})),C.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),C.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(e){b.ChgCODataGridModel.disableColorizeView(e)})),C.unsubscribe("updateRouteContent-"+widget.id),C.subscribe("updateRouteContent-"+widget.id,(function(e){if("true"==a.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=_.getApprovalStatusValue(e);var t=b.ChgCODataGridModel.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach((e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS?n.maturity_NLS:n.maturityNLS,maturityWithBadge:n.maturity_NLS?n.maturity_NLS:n.maturityNLS}})}))}}))},handleForMaturityUpdate:function(e){if(e){let t=JSON.parse(e),i=b.ChgCOlayoutModel.getSelectedNodes();I.getHandleForMaturityUpdate(t,i),b.treeDocument.prepareUpdate(),I.getUpdatedApprovalStatusColumn(t,i).then((function(){b.treeDocument.pushUpdate()}))}},handleForApplicabilityUpdate:async function(e){if(e&&b.ChgCODataGridModel){let t=b.ChgCODataGridModel.treeDocument.getSelectedNodes(),i=JSON.parse(e);I.handleForApplicabilityUpdateEvent(t,i),b.treeDocument.prepareUpdate(),b.treeDocument.pushUpdate()}}};return b.globalSubscribeCOSummary(),b})),define("DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/Controls/Label","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","DS/Controls/ComboBox","DS/Controls/Button","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D){"use strict";var I=m.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),w=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"irDispositions",useAsyncPreExpand:!0});return e.onPreExpand((async function(e){console.log("Into the treeDocument for dispostion")})),e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",I)},loadDispositionsItemsData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crDispositionsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crDispositions");e&&h.isMasked(e)&&h.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=e.dispositionName+" | "+e.dispositionType;var n=e.dispositionCurrentState;e.maturityWithBadge=e.dispositionCurrentState,e.icon=e.dispostionIcon,e.previewIcon=e.dispositionPreviewIcon;let a={...e};var s;e.dispositionInformation=e.dispositionInformation?e.dispositionInformation:[a],e.dispositionId=e.dispostionId,e.name=e.dispositionName,e.type=e.dispositionObjType;var r=this.getCustomTooltip(e);s=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.dispositionName)+"</a>":e.dispositionName;let l=e.dispositionType;if(l&&(e.dispositionType="DOCUMENT"==l?"documentKey":"NO_FIX"==l?"notFixKey":"FIX"==l?"fixKey":"NOT_IMPACTED"==l?"notImpactedTypeKey":"noneKey"),e.dispositionRevision=e.dispositionRevision,e&&e.dispostionId){e.dispositionName=D.dispositionNameMethodWOMenu(e.dispostionIcon,e.dispositionName),e.dispositionMaturity=e.dispositionCurrentStateNLS;var d=e.dispositionInformation[0].dispositionAccessBits[0]["Manage Approver"],c=e.dispositionInformation[0].dispositionAccessBits[0]["Manage Resolved By"];e.approversList=e.approvers,e.approvers&&e.approvers.length>0?e.approvers=D.addApproversUserIconMethod(e.approvers):"true"===o.getGlobalVariable().isFullLicence&&"true"===d&&(e.approvers=D.addApproversDefaultMethod());var p=e.ResolvedByInformation;if(p&&p.length>0){let t=p[0].resolvedByName?p[0].resolvedByName:"",i=p[0].resolvedByIcon?p[0].resolvedByIcon:"";e.resolvedByName=t,e.dispositionResolvedBy=D.resolvedByNameMethod("",t,i)}else"true"===o.getGlobalVariable().isFullLicence&&"true"===c&&(e.dispositionResolvedBy=this.resolvedByDefaultForDispostion());e.AffectedItemInformation.length>0?e.affectedItemsLabel=D.getAffectedItemsMethod(e):e.affectedItemsLabel=D.getDefaultAffectedItemsMethod()}else e.dispositionName=this.defaultDispositionNameValue(),e.affectedItemsLabel=D.getDefaultAffectedItemsMethod();return new i({label:s,subLabel:t,description:n,grid:e,icons:[e.icon],thumbnail:e.previewIcon,customTooltip:r,contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return e.dispositionName+"\n"+a.CHG_GOV_DataGrid_Column_Type+": "+e.dispositionType+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.dispositionCurrentState},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var i=w.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(var n=i.length-1;n>=0;n--)e.addRoot(i[n],0);e.pushUpdate()},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map((t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}}))},UWA.is(i,"array")&&i.forEach((function(e){var t=e.color,i=e.id;n(t,i)}))},defaultDispositionNameValue:function(){var e=new UWA.Element("div"),t=new UWA.Element("div",{class:"chgIRAffectedCreateNewDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",left:0,top:0}}),i=new UWA.Element("div",{class:"chgIRAffectedAddExistingDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",left:"33.33%",top:0}}),n=new UWA.Element("div",{class:"chgIRAffectedDragAndDropDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",right:0,top:0}});return t.inject(e),i.inject(e),n.inject(e),t.addContent({tag:"span",class:"chgIRAffectedCreateNewDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-plus wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Create_Disposition,styles:{"font-size":"1.2em",cursor:"pointer"}}),i.addContent({tag:"span",class:"chgIRAffectedAddExistingDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-down-right wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Add_Existing_Disposition,styles:{"font-size":"1.2em",cursor:"pointer"}}),n.addContent({tag:"span",class:"chgIRAffectedAddExistingDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-drag-drop wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Drag_And_Drop_Disposition,styles:{"font-size":"1.2em",cursor:"pointer",right:0}}),e.outerHTML},resolvedByDefaultForDispostion:function(){var e=new UWA.Element("div"),t=new UWA.Element("div",{class:"chgIRAffectedCreateNewCAResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",left:0,top:0}}),i=new UWA.Element("div",{class:"chgIRAffectedCreateAddExistingCAResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",left:"33.33%",top:0}}),n=new UWA.Element("div",{class:"chgIRAffectedAddExistingCADragAndDropResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",right:0,top:0}});return t.inject(e),i.inject(e),n.inject(e),t.addContent({tag:"span",class:"chgIRAffectedCreateNewCAResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-plus wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Create_Resolved_By,styles:{"font-size":"1.2em",cursor:"pointer"}}),i.addContent({tag:"span",class:"chgIRAffectedCreateAddExistingCAResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-down-right wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Add_Existing_ResolvedBy,styles:{"font-size":"1.2em",cursor:"pointer"}}),n.addContent({tag:"span",class:"chgIRAffectedAddExistingCADragAndDropResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-drag-drop wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Drag_And_Drop_ResolvedBy,styles:{"font-size":"1.2em",cursor:"pointer",right:0}}),e.outerHTML},disableColorizeView:function(){this.treeDocument.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return w})),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsIRtab/ChgChangeImpactsIRTabRolledUpDGModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/UIKIT/Mask"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g){"use strict";var h=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e){this._parent(e)},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(i),i.outerHTML},getAffectedItemsHTMLObject:function(e){let t=e.occurencePathArray.join("\n"),i=UWA.createElement("div",{class:"proposedDetail_div"});let n=[];if(e.affectedItemCount>1)n.push({tag:"span",allowUnsafeHTMLContent:!0,class:"impacted_item_count",text:a.CHG_GOV_Change_Impacts_IR_Tab_RolledUp_AffectedItems_Multiple,title:t,styles:{color:"#368ec4","padding-left":"5px",cursor:"pointer","font-size":"1.2em"}});else{const i=e.impactedByItemInformation.slice(-1)[0];n.push({tag:"img",allowUnsafeHTMLContent:!0,src:i.icon,styles:{"padding-left":"5px"}},{tag:"span",allowUnsafeHTMLContent:!0,class:"affected_item_detail_obj_label",text:i.title,title:t,styles:{"padding-left":"5px"}},{tag:"span",class:"affected_item_detail_obj_revision",allowUnsafeHTMLContent:!0,text:i.revision,styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer",width:"20px",height:"20px","padding-left":"5px"}})}return i.setContent(n),i.outerHTML},getOccurencePath:function(e){const t=e.impactedByItemInformation.map((e=>`${e.title} ${e.revision?e.revision:""}`)).join(" \\ ");return e.occurencePath=t,console.log(e.occurencePath),t},processSecondaryScopeAnalysisEntry:function(e){const t=new Map,i=[];for(const n of e)"True"!==n.isSecondary?"False"===n.isSecondary&&(n.impactedByItemInformation.length>1?i.push({...n,dispositionInformation:[]}):i.push({...n})):n.dispositionInformation&&n.dispositionInformation.length&&t.set(n.id,[...n.dispositionInformation]);for(const e of i){const i=t.get(e.id);e.dispositionInformation=i?[...i]:e.dispositionInformation||[]}return i},getUniqueImpactedIrs:async function(e){const t=this.processSecondaryScopeAnalysisEntry(e),i=[];for(const e of t){this.getOccurencePath(e);const t=i.find((t=>t.name===e.name));t?(t.impactedByItemInformation.push(...e.impactedByItemInformation),e.dispositionInformation&&e.dispositionInformation.length&&(t.dispositionInformation||(t.dispositionInformation=[]),t.dispositionInformation.push(...e.dispositionInformation)),t.occurencePathArray.push(e.occurencePath),t.affectedItemCount++):i.push({...e,impactedByItemInformation:[...e.impactedByItemInformation],dispositionInformation:e.dispositionInformation?[...e.dispositionInformation]:[],affectedItemCount:1,occurencePathArray:[e.occurencePath]})}return i},loadIRImpactsRolledUpData:async function(e,t,i,n){e.prepareUpdate();var a=await this.createTreeDocumentNodeModel(t,i,n);if(e.addRoot(a),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&g.isMasked(e)&&g.unmask(e)}},createTreeDocumentNodeModel:async function(e,t,i){var n=[];let o=await this.getUniqueImpactedIrs(e),a=[];await u.getColumnApprovalStatusValue(p.createPayloadApprovalStatusValue(e)).then((function(e){e&&a.push(e)}));for(var s=0;s<o.length;s++){var r=await this.createTreeNode(o[s],t,i,a);n.push(r)}return n},createTreeNode:async function(e,t,n,a){let s=c("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),r=`${e.name} | ${e.typeNLS}`,l=e.currentNLS;var d;e.maturityWithBadge=e.currentNLS,e.businessStateName=e.businessState,e.co_name=e.name,e.ownerFullName=e.owner_fullname[0],a&&e.dispositionInformation[0]&&a[0][e.dispositionInformation[0].dispostionId]&&(e.ApprovalStatus=a[0][e.dispositionInformation[0].dispostionId].approvalStatus,e.approvalStatusModel=a[0][e.dispositionInformation[0].dispostionId].approvalStatusModel);var u=this.getCustomTooltip(e);d=o.getGlobalVariable().is3DSpace?`<a onclick='findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId=${e.id}">${UWA.String.escapeHTML(e.title)}</a>`:e.title,e.impactedByItemInformation&&e.impactedByItemInformation[0]&&(e.affectedItems=this.getAffectedItemsHTMLObject(e));let g=e.dispositionInformation?e.dispositionInformation[0]:"";if(g?g.dispostionId:""){e.dispositionMaturity=g.dispositionCurrentStateNLS,e.dispositionIcon=g.dispositionIcon?g.dispositionIcon:g.dispostionIcon,e.dispositionName=s.dispositionNameMethod(e.dispositionIcon,g.dispositionName);var h=g.dispositionAccessBits[0]["Manage Approver"],m=g.dispositionAccessBits[0]["Manage Resolved By"];g.approvers&&g.approvers.length>0?e.approvers=s.addApproversUserIconMethod(g.approvers):"true"===o.getGlobalVariable().isFullLicence&&"true"===h&&(e.approvers=s.addApproversDefaultMethod());let t=g.dispositionType;if(t&&(e.dispositionType="DOCUMENT"==t?"documentKey":"NO_FIX"==t?"notFixKey":"FIX"==t?"fixKey":"NOT_IMPACTED"==t?"notImpactedTypeKey":"noneKey"),e.dispositionRevision=g.dispositionRevision,g.resolvedByInformation&&g.resolvedByInformation[0]){var C=g.resolvedByInformation[0];if(C.indexResolvedBy&&C.indexResolvedBy.length>0){let t=C.indexResolvedBy[0].resolvedByName||"",i=C.indexResolvedBy[0].resolvedByIcon||"";e.dispositionResolvedBy=s.resolvedByNameMethod("",t,i)}else if(C.non3DSpaceNonIndexedDataForResolvedBy&&C.non3DSpaceNonIndexedDataForResolvedBy.length>0){let t=await p.resolvedByInformationForCrossServiceAndRecents(C.non3DSpaceNonIndexedDataForResolvedBy),i=t[0]&&t[0].resolvedByName||"",n=t[0]&&t[0].resolvedByIcon||"";e.dispositionResolvedBy=s.resolvedByNameMethod("",i,n),e.dispositionInformation.resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy=t}else"true"===o.getGlobalVariable().isFullLicence&&"true"===m&&(e.dispositionResolvedBy=s.resolvedByDefaultForDispostion())}else"true"===o.getGlobalVariable().isFullLicence&&"true"===m&&(e.dispositionResolvedBy=s.resolvedByDefaultForDispostion())}else{let t={};t.accessBits=e.accessBits?e.accessBits[0]:void 0,e.dispositionName=s.defaultDispositionNameValue(t)}return new i({label:d,subLabel:r,description:l,productID:n,grid:e,icons:[e.icon],thumbnail:e.thumbnail,customTooltip:u,children:[],contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getAutoCompleteForApprovers:function(){}});return m})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/UIKIT/Mask","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O){"use strict";var G={createDispositionsView:function(t,o){var r=this;t.target.setStyles({position:"relative"}),this.contextId=t.id;var l={};l=UWA.merge(l,t),p.makeDroppable(l.target,r.dropHandler),l.modelEvents=o,this.modelEvents=o,l.columns=i.getColumns(),this.ChgIRDispositionsDataGridModel=new n(l.id,l.contextDetails),this.treeDocument=l.treeDocument=this.ChgIRDispositionsDataGridModel.createTreeDocument(),this.ChgIRDispositionsDataGridModel.registerCustomFilter(),r.ChgIRDispositionsTreeModel=l.treeDocument,this.subscribeToModelEvents(l.treeDocument),this.ChgIRDispositionsView=new e(l),_.showLoader(l.target,this.ChgIRDispositionsView.loader);let d=this.ChgIRDispositionsView.chgGridView;a.getIRDispositions(t.id,!0).then((async function(e){console.log("Dispositions list: "+e);let i=w("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil");var o=await i.enrichDispositionInfo(e.data);if(r.chgIRDispositionsDataGridModel=new n(t.id),0==o.length){if(h.getGlobalVariable().is3DSpace){console.log("unmasking dispostions item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&I.isMasked(e)&&I.unmask(e)}else _.hideLoader(l.target,r.ChgIRDispositionsView.loader);r.modelEvents.publish({event:"showEmpty-datagrid",data:d})}_.fetchMaturityStateCSS(o),r.chgIRDispositionsDataGridModel.loadDispositionsItemsData(l.treeDocument,o),G.changeView(),_.hideLoader(l.target,r.ChgIRDispositionsView.loader);var a=s.getDefaultFilter(l.columns);l.treeDocument.setFilterModel(a),l.isSelected&&"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgIRDispositionsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgIRDispositionsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgIRDispositionsTreeModel)})),0==l.treeDocument.getChildren().length?l.treeDocument._modelEvents.publish({event:"treeEmpty"}):l.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),G.ChgIRDispositionsView.chgGridView.addEventListener("postEdit",(function(e,t){i.changeDispositionType(t)})),G.changeView(),r.ChgIRDispositionsView.loadCustomColumns(),_.hideLoader(l.target,r.ChgIRDispositionsView.loader)}),(function(e){if(h.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&I.isMasked(e)&&I.unmask(e)}else _.hideLoader(l.target,r.ChgIRDispositionsView.loader);return Promise.reject(e)})),this.ChgIRDispositionsView.chgGridView.addEventListener("postEdit",(function(e,t){}))},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){t.hideEmptyView()})),C.unsubscribe(`irDispositions:${widget.id}`),C.subscribe(`irDispositions:${widget.id}`,(function(){if("false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgIRDispositionsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgIRDispositionsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgIRDispositionsTreeModel)})),Object.keys(i.ChgIRDispositionsView.options.treeDocument.getXSO()._items).length>0){let e=i.ChgIRDispositionsView.options.treeDocument.getXSO()._items;for(let t in e)i.ChgIRDispositionsView.onSelectionChange(i.ChgIRDispositionsView._modelEvents,e[t],i.ChgIRDispositionsView.id,i.ChgIRDispositionsView.options.contextDetails.isKindOfType,!0)}else i.ChgIRDispositionsView.onSelectionChange(i.ChgIRDispositionsView._modelEvents,i.ChgIRDispositionsView.options.treeDocument._getTrueRoot(),i.ChgIRDispositionsView.id,i.ChgIRDispositionsView.options.contextDetails.isKindOfType,!1)})),C.unsubscribe(`${e.options.id} of ${widget.id}`),C.subscribe(`${e.options.id} of ${widget.id}`,(function(e){G.ChgIRDispositionsDataGridModel.filterView(e)})),C.unsubscribe(`${e.options.id} colorize ${widget.id}`),C.subscribe(`${e.options.id} colorize ${widget.id}`,(function(e){G.ChgIRDispositionsDataGridModel.enableColorizeView(e)})),C.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),C.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(e){G.ChgIRDispositionsDataGridModel.disableColorizeView(e)})),C.unsubscribe("updateDispositionGrid"+(widget?widget.id:"")),C.subscribe("updateDispositionGrid"+(widget?widget.id:""),(async function(e){if("update"==e.action){if(e.dispInfo&&e.dispInfo[0].ApprovalStatus&&null!=e.dispInfo[0].ApprovalStatus.icon){var t={data:e.dispInfo},i=await E.getColumnApprovalStatusValue(s.createPayloadApprovalStatusValue(t));i&&i[e.dispInfo[0].dispostionId]&&(e.dispInfo[0].ApprovalStatus=i[e.dispInfo[0].dispostionId].approvalStatus,e.dispInfo[0].approvalStatusModel=i[e.dispInfo[0].dispostionId].approvalStatusModel)}if(e.dispInfo[0].resolvedByInformation&&e.dispInfo[0].resolvedByInformation[0]&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById){let t=e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById;var o=(await f.recent()).results,a=[],r={resolvedById:t};for(let e=0;e<o.length;e++){let i=o[e].attributes.filter((e=>"resourceid"==e.name)).map((e=>e.value));if(i&&1==i.length&&t===i[0]){var l={};l.nonIndexedData=o[e].attributes,l.nonIndexedModelerData=r,a.push(l)}}var d=await s.processInformationForRecentResolvedByDisposition(a);e.dispInfo[0].resolvedByInformation=[],e.dispInfo[0].resolvedByInformation.push({non3DSpaceNonIndexedDataForResolvedBy:d})}G.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid.dispositionInformation&&t.options.grid.dispositionInformation[0]&&t.options.grid.dispositionInformation[0].dispostionId==e.dispositionId&&O.updateDispositionInfo(t,e.dispInfo)}))}else if("createDisposition"==e.action){if(G.contextId==e.investigationRequestId){var c=await n.prototype.createTreeDocumentNodeModel(e.dispInfo);G.treeDocument.prepareUpdate(),G.treeDocument.addRoot(c),G.treeDocument.pushUpdate()}}else if("remove"==e.action){G.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid.dispositionInformation&&t.options.grid.dispositionInformation[0]&&t.options.grid.dispositionInformation[0].dispostionId==e.dispositionId&&t.remove()}))}else if("removeDisposition"==e.action){G.treeDocument.getAllDescendants().forEach((async t=>{t.options.grid&&t.options.grid.id==e.dispositionId&&t.remove()}))}})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-on-dblclick"},(function(e){if(h.getGlobalVariable().is3DSpace){w("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else G.modelEvents.publish({event:"information-panel-open",data:null})})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-Update-on-dispostion")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-Update-on-dispostion"},(function(e){var t=G.treeDocument.getAllDescendants();e.forEach((e=>{for(var i=0;i<t.length;i++)e.options.grid.dispositionInformation&&e.options.grid.dispositionInformation[0].dispostionId==t[i].options.grid.dispositionId&&t[i].updateOptions({grid:{dispositionCurrentState:e.options.grid.dispositionInformation[0].dispositionCurrentState,dispositionMaturity:e.options.grid.dispositionInformation[0].dispositionCurrentStateNLS,dispositionType:e.options.grid.dispositionType,ApprovalStatus:e.options.grid.dispositionInformation[0].ApprovalStatus,approvers:e.options.grid.approvers,dispositionResolvedBy:e.options.grid.dispositionResolvedBy}})}))})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("ir-disposition-item-object-selection-update")]||this.modelEvents.subscribe({event:"ir-disposition-item-object-selection-update"},(function(e){G.handleObjectSelectionUpdate(e)}))},handlePropertiesUpdateForDispostion:function(e){var t=G.ChgIRDispositionsTreeModel;t&&b.handlePropertiesOnUpdate(t,e)},handleAccessBitUpdate:function(e){e.id==G.contextId&&(console.log("ChgIRDispositonsDataGridLayout handleAccessBitUpdate"+e),"false"==e.accessBits.ManageAffectedItem?(G.accessBitManageAffectedItem=!1,G.ChgIRDispositionsView.chgGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1})):G.accessBitManageAffectedItem=!0,e.accessBits.ManageChangeAnalysis)},handleObjectSelectionUpdate:function(e){},handleForMaturityUpdate:function(e){if(e){JSON.parse(e);let t=G.treeDocument.getSelectedNodes();"Disposition"==JSON.parse(e).Refresh.modified[0].policy?O.getHandleForDispostionMaturity(JSON.parse(e),t,G.contextId):_.getHandleForMaturityUpdate(JSON.parse(e),t)}},handleForDispositionTransfer:async function(e){e&&a.getObjectTypeInformation(e.data.paths).then((function(t){if(t&&"Disposition"==t.data[0].type){var i={dispositionIdsArray:e.data.paths,contextId:G.contextId};O.transferDisposition(i)}}))},globalSubscribeForAffectedItemsBasisView:function(){g.addObserver("ChgIRDispositonsDataGridLayout","CO-AccessBit-Update",G.handleAccessBitUpdate),g.addObserver("ChgIRDispositonsDataGridLayout","CO-Properties-Update",G.handlePropertiesUpdateForDispostion),g.addObserver("ChgIRDispositonsDataGridLayout","ENOLC_MOVE_CMD_UPDATE",G.handleForDispositionTransfer)},addApproverHandler:function(e){console.log("Handler called for add approver"),e.type="Disposition",y.getDataToBuildAddMemberPanel(e),y.launchAddMemberPanel()}};return G.globalSubscribeForAffectedItemsBasisView(),G})),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r){"use strict";var l={showRMBMenuOnGrid:function(e){return new Promise((function(t,i){const o=[];let a=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();let c=[],p=[],u=[];d.forEach((e=>{c.push(e.options.grid.id),p.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&u.push(e.options.grid.serviceBasedObjId)})),d.length>1&&(a=!0);const g=s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),h=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,m=e.cellInfos.nodeModel.options.grid.type,C=e.cellInfos.nodeModel.options.grid.name,f=e.cellInfos.nodeModel.options.grid.displayType;let v=[];v.push(m),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(v=v.concat(e.cellInfos.nodeModel.options.grid.kind));const D={objectId:h,objectType:m,objectTaxonomies:v,displayName:C,displayType:f,facetName:"dependency"},I=g.openWith(D);a?(u.length>0&&o.push(n.createPropertyPushItem(u)),o.push(l.getRelationalExplorerMenu(p)),u.length>0&&(o.push(r.getMaturityMenu(void 0,u)),o.push(l.getTransferMenu(e))),t(o)):(u.length>0&&o.push(n.createPropertyPushItem(c)),o.push(l.getRelationalExplorerMenu(p)),I.then((i=>{i&&o.push(i),u.length>0&&(o.push(r.getMaturityMenu(void 0,u)),o.push(l.getTransferMenu(e))),t(o)})))}))},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)i[o].options.grid.sourceType&&"CSD"!=i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(t){t.openRelationalExplorer(e)}))}}}}};return l})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h){"use strict";var m=u.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),C=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"crOrchestration",useAsyncPreExpand:!0});return e.onPreExpand((function(e){var t=e.target.options.grid.id;if(console.log("call for children"+e.target),t){let n=!0;"ChangeOrder"==e.target.options.grid.isKindOfType?r.getChangeOrchestration(t,n).then((function(e){i(e),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],(function(e){e.orchestrationGridView.loadCustomColumns()}))}),(function(e){return Promise.reject(e)})):"ChangeRequest"==e.target.options.grid.isKindOfType&&r.getCRChangeOrchestration(t,n).then((function(e){i(e),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],(function(e){e.orchestrationGridView.loadCustomColumns()}))}),(function(e){return Promise.reject(e)}))}function i(t){l.processCRChangeOrchestration(t).then((function(t){var i=C.prototype.createTreeDocumentNodeModel(t);if(e.target.hasChildren())for(var n=!1,o=e.target.getChildren(),a=0;a<i.length;a++){n=!1;for(var s=0;s<o.length;s++)if(o[s].options.grid.id==i[a].options.grid.id){n=!0;break}n||e.target.addChild(i[s])}else e.target.addChild(i);e.target.preExpandDone()}))}})),e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},loadChangeOrchestrationData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&p.isMasked(e)&&p.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomNameField(e);e.chgObjName=t;var n=this.createCustomSeverity(e);e.sev=n;var a=this.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=a;var s=this.createCustomOwnerField(e);e.chgObjOwner=s;var r=e.name+" | "+e.ownerFullName,l=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var d,c=this.getStatusBarIcons(e),p=this.statusbarIconsTooltips(e),u=this.getCustomTooltip(e);return d=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:d,subLabel:r,description:l,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:c,statusbarIconsTooltips:p,customTooltip:u,useAsyncPreExpand:!0})},createCustomNameField:function(e){var t=new UWA.Element("div",{class:"wux-tweakers-string"}),i=UWA.createElement("span",{html:e.name});i.style.setProperty("text-overflow","ellipsis"),i.inject(t);var n=new UWA.Element("div",{class:"iconsDiv"});if(e.ecm_change_on_hold&&"true"==e.ecm_change_on_hold.toLowerCase()){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(t),t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{var l=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(i);var d=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),d.inject(t)}return t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var l=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(a);var d=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),d.inject(n),n.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),e.ecm_change_on_hold&&"true"==e.ecm_change_on_hold.toLowerCase()&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),e.ecm_change_on_hold&&"true"==e.ecm_change_on_hold.toLowerCase()&&t.push(a.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},addNewChildren:function(e){var t=this;let i="Change Request";if(this.treeDocument.getSelectedNodes().length>1)c.error(a.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{this.treeDocument.getSelectedNodes().length?(this.treeDocument.getSelectedNodes()[0].options.grid.id,i="Change Order"):this.contextID;var n=document.getElementById("outer-orchestration-grid-div");"undefined"!=n&&null!=n&&p.mask(n),"Change Order"==e.type?r.getChangeOrderInfo(e.objectID).then((function(e){l.processedChangeOrchestrationSummaryList(e).then((function(e){h.fetchMaturityStateCSS(e),C.prototype.addNodesInLayoutModel(t.treeDocument,e,!0),p.unmask(n)}))}),(function(e){p.unmask(n)})):"Change Action"==e.type?r.getNewCADetails(e.objectID).then((function(e){var t=l.processChangeActionInContext(e),i=t.processData;h.fetchMaturityStateCSS(t.processData),console.log(i),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],(function(e){e.addNodesInLayout(i),p.unmask(n)}))}),(function(e){p.unmask(n)})):"Change Request"==e.type&&r.getChangeRequestInfo(e.objectID).then((function(e){h.fetchMaturityStateCSS(e.data),l.processedChangeOrchestrationSummaryList(e).then((function(e){C.prototype.addNodesInLayoutModel(t.treeDocument,e),p.unmask(n)}))}),(function(e){p.unmask(n)}))}},addExistingChildren:function(e,t){var i,n=this;let o="Change Request";t?(i=t.id,o=t.targetType):this.treeDocument.getSelectedNodes().length?(i=this.treeDocument.getSelectedNodes()[0].options.grid.id,o="Change Order"):i=this.contextID;var a=document.getElementById("outer-orchestration-grid-div");"undefined"!=a&&null!=a&&p.mask(a),r.addExistingInCRChangeOrchestration(i,o,e).then((function(e){l.processCRChangeOrchestration(e).then((function(e){C.prototype.addNodesInLayoutModel(n.treeDocument,e,!1,t),p.unmask(a)}))}),(function(e){p.unmask(a)}))},addNodesInLayoutModel:function(e,t,i=!1,n){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var o,a,s=C.prototype.createTreeDocumentNodeModel(t);if(n&&n.id){o=!1;for(let t of e.getAllDescendants())if(t.options.grid.id==n.id){a=t;break}}else e.getSelectedNodes().length?(o=!1,a=e.getSelectedNodes()[0]):o=!0;if(o){if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(s);else for(var r=s.length-1;r>=0;r--)e.addRoot(s[r],0);if(e.pushUpdate(),i)try{let e=g("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var l=t[0];e.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:l,View:"Change Orchestration"})}catch(e){console.log(e)}}else if(null==a.getChildren())e.addRoot(s,0);else{if(a.prepareUpdate(),0==a.getChildren().length)a.addChild(s);else for(r=s.length-1;r>=0;r--)a.addChild(s[r],0);a.pushUpdate(),a.isExpanded()||a.expand()}},removeChildren:function(){var e=this,t=e.treeDocument.getSelectedNodes();if(t.length){var i=t[0].getParent().options.grid.id;let u=t[0].getParent().options.grid.isKindOfChangeRequest?"Change Request":"Change Order";var n,s;void 0===i?(n=e.contextID,u="Change Request",s=!0):(n=i,s=!1);var l=[];l.push({id:t[0].options.grid.id,type:t[0].options.grid.type});for(var d=0;d<t.length;d++)if("ChangeAction"===t[d].options.grid.isKindOfType){if(c.error(a.CHG_GOV_ChangeOrchestration_CA_Not_Removed),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&p.isMasked(e)&&p.unmask(e)}return}for(d=1;d<t.length;d++){if(i!==t[d].getParent().options.grid.id){if(c.error(a.CHG_GOV_ChangeOrchestration_Toolbar_Invalid_Selection),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&p.isMasked(e)&&p.unmask(e)}return}l.push({id:t[d].options.grid.id,type:t[d].options.grid.type})}r.removeInCRChangeOrchestration(n,u,l).then((function(i){if(s){for(var n=0;n<t.length;n++)e.treeDocument.removeRoot(t[n]);0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"})}else{var r=t[0].getParent();r.prepareUpdate();for(n=0;n<t.length;n++)r.removeChild(t[n]);r.pushUpdate()}if(o.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&p.isMasked(e)&&p.unmask(e)}c.success(a.CHG_GOV_ChangeOrchestration_Toolbar_Remove_Success)}),(function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&p.isMasked(e)&&p.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&p.isMasked(e)&&p.unmask(e)}}))}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map((i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}}))},UWA.is(n,"array")&&n.forEach((function(e){var t=e.color,i=e.id;o(t,i)}))},disableColorizeView:function(e,t){t.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return C})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O,G){"use strict";var N={contextId:null,treeDocument:null,accessBit:null,contextDetails:null,createChangeOrchestrationView:function(t,o){var r=this;t.target.setStyles({position:"relative"}),r.contextId=t.id,r.copyOptions=t,r.contextDetails=t.contextDetails;var l=t.contextDetails.access,d={};d=UWA.merge(d,t),l.accessBits.ManageImplementingChanges&&"true"===l.accessBits.ManageImplementingChanges&&u.makeDroppable(d.target,r.dropHandler),d.modelEvents=o,this.modelEvents=o,d.columns=i.getColumns(),r.ChgOrchestrationDataGridModel=new n(d.id,d.contextDetails),d.model=r.ChgOrchestrationDataGridModel,r.treeDocument=d.treeDocument=r.ChgOrchestrationDataGridModel.createTreeDocument(),r.ChgCOlayoutModel=d.treeDocument,r.ChgOrchestrationDataGridModel.registerCustomFilter(),r.subscribeToModelEvents(d.treeDocument),r.ChgOrchestrationTreeModel=d.treeDocument,r.orchestrationGridView=new e(d),y.showLoader(d.target,r.orchestrationGridView.loader);let c=r.orchestrationGridView.chgOrchestrationGrid;I.publish("CO-AccessBit-Update",l),a.getCRChangeOrchestration(t.id).then((function(e){console.log("Orchestration list: "+e),s.processCRChangeOrchestration(e).then((function(e){if(r.chgOrchestrationDataGridModel=new n(t.id),0==e.length){if(v.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&_.isMasked(e)&&_.unmask(e)}else y.hideLoader(d.target,r.orchestrationGridView.loader);r.modelEvents.publish({event:"showEmpty-datagrid",data:c})}y.fetchMaturityStateCSS(e),r.chgOrchestrationDataGridModel.loadChangeOrchestrationData(d.treeDocument,e),r.orchestrationGridView.loadCustomColumns();var i=s.getDefaultFilter(d.columns);d.treeDocument.setFilterModel(i),d.isSelected&&"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgOrchestrationTreeModel)})),0==d.treeDocument.getChildren().length?d.treeDocument._modelEvents.publish({event:"treeEmpty"}):d.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),N.changeView(),y.hideLoader(d.target,r.orchestrationGridView.loader)}))}),(function(e){if(v.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&_.isMasked(e)&&_.unmask(e)}else y.hideLoader(d.target,r.orchestrationGridView.loader);return Promise.reject(e)}))},dropHandler(e){console.log("dropHandler called"+e);var t=N.ChgOrchestrationDataGridModel.treeDocument,i=[],n="";var o=v.getGlobalVariable().changeActionSubTypes,a=v.getGlobalVariable().subTypes;if(1==o.length){for(var s=0;s<e.length;s++)if(a.includes(e[s].objectType)&&o[0]&&o[0].value&&o[0].value.includes(e[s].objectType))return void l.error(r.CHG_CA_ADD_VIA_IA_ERROR)}else{for(let{value:e}of o)i.push(e);for(s=0;s<e.length;s++)if(a.includes(e[s].objectType)&&i.includes(e[s].objectType))return void l.error(r.CHG_CA_ADD_VIA_IA_ERROR)}for(s=0;s<e.length;s++)a.includes(e[s].objectType)||i.includes(e[s].objectType)||(n=n+e[s].displayName+",");if(""!=n)return n+=r.CHG_IMPLEMENTING_CHNAGE_ERROR,void l.error(n);if(t.getSelectedNodes().length>1)l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else if(1==t.getSelectedNodes().length&&t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{var d=[];for(s=0;s<e.length;s++)if(d.push({id:e[s].objectId,type:e[s].objectType}),t.getSelectedNodes().length&&t.getSelectedNodes()[0].options.grid.id==d[s].id)return void l.error(r.CHG_GOV_ChangeOrchestration_DRAG_DROP_ERROR+e[s].displayName);if(d.length){var c,p,u=[{label:r.CHG_GOV_OK_Button_Label,handler:function(){N.ChgOrchestrationDataGridModel.addExistingChildren(d),g.closeDialog()},className:"primary"},{label:r.CHG_GOV_CANCEL_Button_Label,handler:function(){g.closeDialog()},className:"default"}];if(0===t.getSelectedNodes().length?(c=N.ChgOrchestrationDataGridModel.contextDetails.name,p=N.ChgOrchestrationDataGridModel.contextDetails.title):(c=t.getSelectedNodes()[0].options.grid.name,p=t.getSelectedNodes()[0].options.grid.title),v.getGlobalVariable().is3DSpace&&null!=window.parent.currentBC.label){c=window.parent.currentBC.label;var h=r.CHG_GOV_ChangeOrchestration_Drop_Content+"("+c+")<br>"+r.CHG_GOV_ChangeOrchestration_Drop_Confirmation}else h=r.CHG_GOV_ChangeOrchestration_Drop_Content+p+"("+c+")<br>"+r.CHG_GOV_ChangeOrchestration_Drop_Confirmation;var m={title:r.CHG_GOV_ChangeOrchestration_Drop_Info_Title,content:h,buttonArray:u};g.launchInfoDailog(m)}}},refreshLayout:function(e){var t=this.ChgOrchestrationTreeModel;(new n).updateNodeIndexed(t,e)},addNodesInLayout:function(e){N.ChgOrchestrationDataGridModel.addNodesInLayoutModel(this.ChgOrchestrationTreeModel,e)},refreshGrid:function(e,t,i,n){},changeView:function(e){try{if(v.getGlobalVariable().is3DSpace){let e=N.treeDocument.getAllDescendants();for(var t of(N.treeDocument.prepareUpdate(),e)){let e='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+t.options.grid.id+"\"'>"+UWA.String.escapeHTML(t.options.grid.title)+"</a>";t.updateOptions({label:e})}N.treeDocument.pushUpdate()}}catch(e){console.log(e)}i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()})),I.unsubscribe(`crOrchestration:${widget.id}`),I.subscribe(`crOrchestration:${widget.id}`,(function(){if("false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgOrchestrationTreeModel)})),Object.keys(i.orchestrationGridView.options.treeDocument.getXSO()._items).length>0){let e=i.orchestrationGridView.options.treeDocument.getXSO()._items;for(let t in e)i.orchestrationGridView.onSelectionChange(i.orchestrationGridView._modelEvents,e[t],i.orchestrationGridView.id,i.orchestrationGridView.options.contextDetails.isKindOfType,!0)}else i.orchestrationGridView.onSelectionChange(i.orchestrationGridView._modelEvents,i.orchestrationGridView.options.treeDocument._getTrueRoot(),i.orchestrationGridView.id,i.orchestrationGridView.options.contextDetails.isKindOfType,!1)})),I.unsubscribe(`${e.options.id} of ${widget.id}`),I.subscribe(`${e.options.id} of ${widget.id}`,(function(t){N.chgOrchestrationDataGridModel.filterView(t,e)})),I.unsubscribe(`${e.options.id} colorize ${widget.id}`),I.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){N.chgOrchestrationDataGridModel.enableColorizeView(t,e)})),I.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),I.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){N.chgOrchestrationDataGridModel.disableColorizeView(t,e)})),I.unsubscribe("updateRouteContent-"+widget.id),I.subscribe("updateRouteContent-"+widget.id,(function(e){if("true"==v.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=O.getApprovalStatusValue(e);var t=N.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach((e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS?n.maturity_NLS:n.maturityNLS,maturityWithBadge:n.maturity_NLS?n.maturity_NLS:n.maturityNLS}})}));I.publish("idcard-header-update-maturity")}})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CROrchestration-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"CROrchestration-DataGrid-on-dblclick"},(function(e){if(v.getGlobalVariable().is3DSpace){S("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else if("ChangeOrder"==e.model.isKindOfType||"ChangeRequest"==e.model.isKindOfType||"ChangeAction"==e.model.isKindOfType){let t,i={level:""},n=!1,o=C.getRouter().getState().name;o==m.ROUTE_CR_DETAILS||o==m.ROUTE_CR_DETAILS_LEVEL3PLUS?1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL1,i.level1Node={id:e.model.id,title:e.model.title},i.level="level1"):2==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level1Node=e.parentModel,i.level="level2"):3==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level1Node=e.gradParentModel,i.level="level3"):(n=!0,i.rootNode=e.model,i.level="root"):o==m.ROUTE_CR_ORCHESTRATION_LEVEL1?1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):2==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level="level3"):n=!0:o==m.ROUTE_CR_ORCHESTRATION_LEVEL2&&1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0,1!=n&&o!=m.ROUTE_CR_ORCHESTRATION_LEVEL3||(t=e.model&&"ChangeRequest"==e.model.isKindOfType?m.ROUTE_CR_DETAILS_LEVEL3PLUS:e.model&&"ChangeOrder"==e.model.isKindOfType?m.ROUTE_CO_DETAILS:m.ROUTE_CA_DETAILS,i.level="root",i=e),C.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:i})}else N.modelEvents.publish({event:"information-panel-open",data:null})})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-orchestration-object-selection-update")]||this.modelEvents.subscribe({event:"cr-orchestration-object-selection-update"},(function(e){N.handleObjectSelectionUpdate(e)})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-orchestration-grid-update-CA-Creation")]||this.modelEvents.subscribe({event:"cr-orchestration-grid-update-CA-Creation"},(function(e){let t={contextDetails:N.contextDetails,id:N.contextId},i=N.orchestrationGridView.chgOrchestrationGrid;N.action=e.action,a.getCRChangeOrchestration(t.id).then((function(e){let o=[];s.processCRChangeOrchestration(e).then((function(e){if(N.chgOrchestrationDataGridModel=new n(t.id,t.contextDetails),0==e.length){if(v.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&_.isMasked(e)&&_.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&_.isMasked(e)&&_.unmask(e)}N.modelEvents.publish({event:"showEmpty-datagrid",data:i})}let a=N.treeDocument.getAllDescendants(),s=!1;if("Add"===N.action)for(let t of e){for(let e of a){if(t.id===e.options.grid.id){s=!0;break}s=!1}!1===s&&o.push(t)}else if("delete"===N.action){let t=!1;for(let i of a){for(let n of e){if(n.id===i.options.grid.id){t=!0;break}t=!1}!1===t&&N.treeDocument.removeRoot(i)}}else if("remove"===N.action){let t=!1;for(let i of a){for(let n of e){if(n.id===i.options.grid.id){t=!0;break}t=!1}!1===t&&N.treeDocument.removeRoot(i)}}N.chgOrchestrationDataGridModel.loadChangeOrchestrationData(N.treeDocument,o),0==N.treeDocument.getChildren().length?N.treeDocument._modelEvents.publish({event:"treeEmpty"}):N.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),N.changeView()}))}),(function(e){return Promise.reject(e)}))}))},createChangeActionInContext:function(){let e=N.ChgOrchestrationTreeModel;if(e.getSelectedNodes().length)if(e.getSelectedNodes().length>1||e.getSelectedNodes()[0].options.grid.isKindOfChangeAction)e.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let t={parentID:e.getSelectedNodes()[0].options.grid.id};d.createNewChangeActionInContext(t)}else{let e={parentID:N.contextId};d.createNewChangeActionInContext(e)}},createChangeOrderInContext:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>New Change Order"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=N.ChgOrchestrationTreeModel;if(t.getSelectedNodes().length)if(t.getSelectedNodes().length>1||t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)t.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let e={parentID:t.getSelectedNodes()[0].options.grid.id};d.createNewChangeOrderInContext(e)}else{let e={parentID:N.contextId};d.createNewChangeOrderInContext(e)}},createChangeRequestInContext:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>New Change Request"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=N.ChgOrchestrationTreeModel;if(t.getSelectedNodes().length)if(t.getSelectedNodes().length>1||"ChangeRequest"!=t.getSelectedNodes()[0].options.grid.isKindOfType)t.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):"Change Request"!=t.getSelectedNodes()[0].options.grid.isKindOfType&&l.error(r.CHG_GOV_ChangeOrchestration_Add_ChangeRequest_Not_Allowed);else{let e={parentID:t.getSelectedNodes()[0].options.grid.id};d.createChangeRequestInContext(e)}else{let e={parentID:N.contextId};d.createChangeRequestInContext(e)}},addExistingHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Add Existing"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});N.contextId;let t={condition:"addExistingCROrchestration",extendedQuery:'AND (NOT ecm_95_ca_95_is_95_implementing_95_cr:"TRUE") AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"Prepare")'};var i=N.ChgOrchestrationTreeModel;if(0===i.getSelectedNodes().length||1===i.getSelectedNodes().length&&!i.getSelectedNodes()[0].options.grid.isKindOfChangeAction)if(v.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=Change Order:ECM_CHANGE_ON_HOLD!=TRUE:CURRENT!=policy_Cancelled.state_Cancelled:CURRENT=policy_FasttrackChange.state_Prepare&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var n=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,N.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n)}else{var a=o.activateSearch();o.search("Add Existing","Change Order",N.OnSearchComplete,"changeOrchestration",a,void 0,void 0,t)}else i.getSelectedNodes().length&&i.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed)},OnSearchComplete:function(e){var t=v.getGlobalVariable().changeActionSubTypes,i=[],n=v.getGlobalVariable().subTypes;if(1==t.length){for(var o=0;o<e.length;o++)if(n.includes(e[o][2])&&t[0]&&t[0].value&&t[0].value.includes(e[o][2]))return void l.error(r.CHG_CA_ADD_VIA_IA_ERROR)}else{for(let{value:e}of t)i.push(e);for(o=0;o<e.length;o++)if(n.includes(e[o][2])&&i.includes(e[o][2]))return void l.error(r.CHG_CA_ADD_VIA_IA_ERROR)}var a=[];for(o=0;o<e.length;o++)a.push({id:e[o][0],type:e[o][2]});a.length&&N.ChgOrchestrationDataGridModel.addExistingChildren(a)},isCRInSelectedList:function(e){var t=!1;return e.forEach((function(e){"ChangeRequest"!=e.options.grid.isKindOfType||(t=!0)})),t},removeHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Remove"}};if(E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),N.isCRInSelectedList(N.ChgOrchestrationTreeModel.getSelectedNodes()))l.error(r.CHG_GOV_ChangeOrchestration_Remove_ChangeRequest_Not_Allowed);else if(0!=N.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes().length){if(v.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&_.mask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&_.mask(e)}N.ChgOrchestrationDataGridModel.removeChildren()}},deleteHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Delete"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("deleteHandler!");var t=N.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();if(t.length){for(var i=[],n=0;n<t.length;n++){var o=t[n],a={physicalid:o.options.grid.id,nodeName:o.options.grid.name,nodeTitle:o.options.grid.title};i.push(a)}var s=document.getElementById("outer-orchestration-grid-div");p.deleteNodes(i,s,N.removeDeletedNodesUsingIDs)}},mergeChangeAction:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Merge Change Action"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=N.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();const i=[];for(let e of t)i.push(e.options.grid.id);let n=[],o={changeActionIds:i};n.push(o),a.mergeChangeAction(n).then((function(e){a.getNewCADetails(e.data[0].id).then((function(e){var t=s.processChangeActionInContext(e).processData;N.addNodesInLayout(t);var i=N.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();for(let e of i)e.updateOptions({grid:{maturityNLS:"Canceled",maturityWithBadge:"Canceled"}})}))}))},globalSubscribeForCOOrchestrationView:function(){h.addObserver("ChgCROrchestrationDataGridLayout","CO-AccessBit-Update",N.handleAccessBitUpdate),h.addObserver("ChgCROrchestrationDataGridLayout","CO-Properties-Update",N.handlePropertiesUpdate),h.addObserver("ChgCROrchestrationDataGridLayout","ENOLC_MOVE_CMD_UPDATE",N.handleCROrchestrationViewTransfer),h.addObserver("ChgCROrchestrationDataGridLayout","Lifecycle.Modification",N.handleForMaturityUpdate),h.addObserver("ChgCROrchestrationDataGridLayout","applicability:update:notification",N.handleForApplicabilityUpdate)},handleCROrchestrationViewTransfer:function(e){var t,n,o=N.ChgOrchestrationTreeModel.getAllDescendants(),a=[];Object.keys(e.data.attributes).forEach((function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)}));for(var s=0;s<a.length;s++){t=a[s];for(var r=0;r<o.length;r++){if(o[r].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;o[r].options.grid.owner=l,o[r].options.grid.ownerFullName=t.newOwnerFullName;var d=t.newOwnerFullName}if(t.newOrganization){var c=t.newOrganization;o[r].options.grid.orgnaizationNLS=c}if(t.newCollabSpace){var p=t.newCollabSpace;o[r].options.grid.collabspaceNLS=p}""==t.newOwnerId?(l=o[r].options.grid.owner,d=o[r].options.grid.ownerFullName,n=i.createCustomOwner(l,d)):n=i.createCustomOwner(l,d);var u=o[r].options.grid.name,g={};g.name=u,g.title=o[r].options.grid.title,g.severity=o[r].options.grid.severity,g.severityNLS=o[r].options.grid.severityNLS,g.ownerFullName=d,g.maturityNLS=o[r].options.grid.maturityNLS;var h=N.ChgCROrchestrationDataGridModel.getCustomTooltip(g),m=u+" | "+d;o[r].updateOptions({label:o[r].options.grid.title,grid:{collabspaceNLS:o[r].options.grid.collabspaceNLS,organizationNLS:o[r].options.grid.organizationNLS,owner:o[r].options.grid.ownerFullName,chgObjOwner:n},customTooltip:h,subLabel:m})}}}},handlePropertiesUpdate:function(e){var t=N.ChgOrchestrationTreeModel;t&&G.handlePropertiesOnUpdate(t,e)},handleAccessBitUpdate:function(e){e.id==N.contextId&&("true"!==v.getGlobalVariable().isFullLicence&&"true"!==v.getGlobalVariable().isDerivativeLicense||"false"===e.accessBits.Hold&&"false"===e.accessBits.ManageImplementingChanges&&N.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!1}),"false"==e.accessBits.CROrchestrationMergeCA?N.accessBitMergeCA=!1:N.accessBitMergeCA=!0,"false"==e.accessBits.CROrchestrationRemove?N.accessBitRemove=!1:N.accessBitRemove=!0,"false"==e.accessBits.CROrchestrationDelete?N.accessBitDelete=!1:N.accessBitDelete=!0)},handleObjectSelectionUpdate:function(e){e.count>1&&N.accessBitMergeCA?N.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!0}):N.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!1}),e.count>0?(N.accessBitDelete&&N.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!0}),N.accessBitRemove&&N.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0})):(N.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!1}),N.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1}))},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];N.ChgOrchestrationTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==N.ChgOrchestrationTreeModel.getChildren().length&&N.ChgOrchestrationTreeModel._modelEvents.publish({event:"treeEmpty"})},handleForMaturityUpdate:async function(e){if(e&&N.ChgOrchestrationDataGridModel){let t=N.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes(),i=JSON.parse(e);y.getHandleForMaturityUpdate(i,t),N.treeDocument.prepareUpdate(),y.getUpdatedApprovalStatusColumn(i,t).then((function(){N.treeDocument.pushUpdate()}))}},handleForApplicabilityUpdate:async function(e){if(e&&N.ChgOrchestrationDataGridModel){let t=N.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes(),i=JSON.parse(e);y.handleForApplicabilityUpdateEvent(t,i),N.treeDocument.prepareUpdate(),N.treeDocument.pushUpdate()}}};return N.globalSubscribeForCOOrchestrationView(),N})),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Label","DS/Controls/TooltipModel","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridContextualMenu","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.relatedScopeDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",(function(e){e.value?(i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").removeClassName("minified-header-height"))}));var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"chg-relatedScope-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"chg-relatedScope-DataGrid-on-reset-search",data:{query:e},context:i})}})},render:function(){try{let e=this.processColumns(),t=this,a={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return h.showRMBMenuOnGrid(e).then((function(e){return e}));t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};a=UWA.merge(a,this.options);let g={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.relatedScopeDataGridView=new n(a),this.relatedScopeDataGridView.cellSelection="none",this._modelEvents.unsubscribe({event:"chg-relatedScope-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"chg-relatedScope-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"chg-relatedScope-DataGrid-on-search"},(function(e){if("true"==C.getGlobalVariable().slidePanelTagger){var i=e.query;if(i){var n=t.relatedScopeDataGridView.getTreeDocument();n.withTransactionUpdate((function(){n.getAllDescendants().forEach((function(e){if(e.options.grid.title&&e.options.grid.name){var t=e.options.grid.title.toLowerCase().contains(i.toLowerCase())||e.options.grid.name.toLowerCase().contains(i.toLowerCase());e.isVisible()&&!t?e.hide():!e.isVisible()&&t&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"chg-relatedScope-DataGrid-on-reset-search"},(function(e){var i=t.relatedScopeDataGridView.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.tileView=new s(g),t.relatedScopeDataGridView.getTreeDocument().getXSO().onAdd((function(e){let i;t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"co-related-scope-object-selection-update",data:{count:i}})})),t.relatedScopeDataGridView.getTreeDocument().getXSO().onRemove((function(e){t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"co-related-scope-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}));let f={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return h.showRMBMenuOnGrid(e).then((function(e){return e}))}};this.tileView.onContextualEvent=f;let v={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.relatedScopeDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(v),r.toolbar=this.relatedScopeDataGridView.setToolbar(r.writetoolbarDefinition()),this.toolbar=r.toolbar,this.relatedScopeDataGridView.addEventListener("allCellsRendered",(function(){t.relatedScopeDataGridView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])})),this.relatedScopeDataGridView.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&4===t.columnID){var i={};i.cellInfos=t,m.executeMaturity(i)}},document.getElementById("outer-CO-relatedScope-grid-div")&&document.getElementById("outer-CO-relatedScope-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CO-relatedScope-grid-div",class:"outer-CO-relatedScope-grid-div"});let D=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-relatedScope-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"relatedScope-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new p({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new u({title:c.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(D),this.toolbar.inject(D);let I=UWA.createElement("div",{class:"content-CO-relatedScope-grid-div expanded-header-height"}),w=UWA.createElement("div",{styles:{height:"100%"},class:"content-CO-relatedScope-tile-div relatedScopeTileView expanded-header-height"}),_=UWA.createElement("div",{class:"hideView",id:"COrelatedScopeEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(_),this.relatedScopeDataGridView.inject(I),this.tileView.inject(w),_.inject(w),this.chgGridViewContainer.addContent(D),this.chgGridViewContainer.addContent(I),this.chgGridViewContainer.addContent(w),this.loader=(new o).inject(this.options.target)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.relatedScopeDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeView","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/relatedScope/ChgRelatedScopeDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require","DS/UIKIT/Mask"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f){"use strict";let v={createRelatedScopeView:function(t,s){var r=this;let g={};this.chgCRImpactBasisView="",g=UWA.merge(g,s),g.target=t,g.columns=i.getColumns(),this.ChgRelatedScopeDataGridModel=new n(g.id),this.modelEvents=g.modelEvents,r.treeDocument=g.treeDocument=r.ChgRelatedScopeDataGridModel.createTreeDocument(),r.ChgRelatedScopeTreeModel=g.treeDocument,r.ChgRelatedScopeDataGridModel.registerCustomFilter(),u.makeDroppable(g.target,r.dropHandler),this.subscribeToModelEvents(g.treeDocument),r.chgCORelatedScopeView=new e(g),h.showLoader(g.target,this.chgCORelatedScopeView.loader),v.changeView(),c.getCORelatedScope(s.id).then((async function(e){var t={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(t=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var i=await p.processedChangeRequestRelatedScope(e);if(r.chgRelatedScopeDataGridModel=new n(s.id),h.fetchMaturityStateCSS(i),r.chgRelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,i),h.hideLoader(g.target,r.chgCORelatedScopeView.loader),t&&t.length>0){var c=new Map,u=t.length;for(let e=0;e<t.length;e+=50){let i=[];i=u<50?t.slice(e,e+u):t.slice(e,e+50);for(var m=[],C=new Map,f=i,D=0;D<f.length;D++){var I=f[D];m.push(I.id),C.set(I.id,I)}var w=[];if(m.length>0){var _=p.commonPredicatedForFedSearch(),b=await p.callFederatedSearch(m,_);if(b&&b.results&&b.results.length>0)w=await p.processReportedAgainstFederatedSearch(b,C)}r.chgRelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,w),h.hideLoader(g.target,r.chgCORelatedScopeView.loader),c=new Map([...c,...C]),u-=50}if(c&&c.size>0){r.chgCORelatedScopeView.indexInfoDiv.show();var S=await d.recent();if(S&&S.results&&S.results.length>0){var y=p.filterNonIndexedDataNew(S,c);c.size!=y.length&&a.warn(o.CHG_GOV_Not_Accessable_Data,!0);var E=await p.processInformationForRecentReportedAgainst(y);h.fetchMaturityStateCSS(E),r.chgRelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,E)}}}else r.chgCORelatedScopeView.indexInfoDiv.hide();var O=p.getDefaultFilter(g.columns);g.treeDocument.setFilterModel(O),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgRelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgRelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgRelatedScopeTreeModel)})),0==g.treeDocument.getChildren().length?g.treeDocument._modelEvents.publish({event:"treeEmpty"}):g.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),v.updateViewBasedOnAccessBit(),v.changeView(),h.hideLoader(g.target,r.chgCORelatedScopeView.loader)}),(function(e){return Promise.reject(e)}))},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);var t;v.ChgRelatedScopeDataGridModel.treeDocument;t=d.parseObjectInformation(e),v.ChgRelatedScopeDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()})),g.unsubscribe(`CO_RelatedScope:${widget.id}`),g.subscribe(`CO_RelatedScope:${widget.id}`,(function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgRelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgRelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgRelatedScopeTreeModel)}))})),g.unsubscribe(`${e.options.id} of ${widget.id}`),g.subscribe(`${e.options.id} of ${widget.id}`,(function(t){v.ChgRelatedScopeDataGridModel.filterView(t,e)})),g.unsubscribe(`${e.options.id} colorize ${widget.id}`),g.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){v.ChgRelatedScopeDataGridModel.enableColorizeView(t,e)})),g.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),g.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){v.ChgRelatedScopeDataGridModel.disableColorizeView(t,e)})),g.unsubscribe("updateIndexingIconForHideOrShowInCOReportedAgainst"),g.subscribe("updateIndexingIconForHideOrShowInCOReportedAgainst",(function(e){i.chgCORelatedScopeView.indexInfoDiv.show()})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-related-scope-object-selection-update")]||this.modelEvents.subscribe({event:"co-related-scope-object-selection-update"},(function(e){v.handleObjectSelectionUpdate(e)}))},addExistingHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Reported Against",action:"CO>Reported Against>Add"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=v.ChgRelatedScopeDataGridModel.treeDocument.getAllDescendants();v.createExcludeListForSearch(t);const i=r.activateSearch();l.getGlobalVariable().is3DSpace&&i.socket.subscribeServer("SearchComServer",getTopWindow()),r.search(o.CHG_GOV_RelatedScope,"Program,Project Space,Model,Products,VPMReference,RFLVPMLogicalReference",v.OnSearchComplete,"relatedScope",i,void 0,void 0,{condition:"addExistingRelatedScope",extendedQuery:""})},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][8]&&null!=e[n][8]?e[n][8]:e[n][0],updateAction:"CONNECT",service:e[n][7]&&e[n][7].includes(":")?e[n][7].split(":")[0]:e[n][7],type:e[n][2],environment:l.getGlobalVariable().tenant});i.length&&(t.hideEmptyView(),v.ChgRelatedScopeDataGridModel.addExistingChildren(i))},removeHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Reported Against",action:"CO>Reported Against>Remove"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const i=v.treeDocument.getSelectedNodes();if(i.length>0){let e=[];for(var n=0;n<i.length;n++)e.push({id:i[n].options.grid.id,type:i[n].options.grid.type,updateAction:"DISCONNECT"});v.ChgRelatedScopeDataGridModel.removeExistingChildren(e).then((function(e){0==v.treeDocument.getAllDescendants().length&&t.showEmptyView()}),(function(e){}))}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},globalSubscribeForCORelatedScopeView:function(){s.addObserver("ChgCOrelatedScopeDataGridLayout","CO-AccessBit-Update",v.handleAccessBitUpdate),s.addObserver("ChgRelatedScopeDataGridLayout","Lifecycle.Modification",v.handleForMaturityUpdate),s.addObserver("ChgRelatedScopeDataGridLayout","CO-Properties-Update",v.handlePropertiesUpdateForRelatedScope)},handleAccessBitUpdate:function(e){"false"==e.accessBits.ManageReportedAgainst?(v.accessBit=!1,v.updateViewBasedOnAccessBit()):(v.accessBit=!0,v.updateViewBasedOnAccessBit())},updateViewBasedOnAccessBit:function(){0==v.accessBit?(v.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1}),v.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1})):(v.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!0}),v.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}))},handleObjectSelectionUpdate:function(e){0===e.count?v.chgCORelatedScopeView.toolbar.updateNodeModel("remove",{disabled:!0}):v.chgCORelatedScopeView.toolbar.updateNodeModel("remove",{disabled:!1})},handleForMaturityUpdate:function(e){if(e){let t=v.treeDocument.getSelectedNodes();h.getHandleForMaturityUpdate(JSON.parse(e),t)}},handlePropertiesUpdateForRelatedScope:function(e){var t=v.ChgRelatedScopeTreeModel;t&&m.handlePropertiesOnUpdate(t,e)}};return v.globalSubscribeForCORelatedScopeView(),v})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactedItem/ChgCRImpacedItemDataGridModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemCreateNewCA","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","UWA/Core","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_){"use strict";let b={createImpactedItemView:async function(t,i,a,s){var d=this;t.setStyles({position:"relative"}),b.impactsContent=t;let c={};i.modelEvents?(c.modelEvents=i.modelEvents,i=i[0]):i=i[0],this.contextId=i.physicalId,c=UWA.merge(c,i),this.modelEvents=c.modelEvents,c.target=t,c.columns=n.getColumns(i.accessBits),this.impactAnalysisSelectedNodes=a,this.ChgCRImpacedItemDataGridModel=new o(c.grid.parentCRId,c.physicalId),u.makeDroppable(c.target,d.dropHandler),d.treeDocument=c.treeDocument=d.ChgCRImpacedItemDataGridModel.createTreeDocument(),d.ChgImpacedItemTreeModel=c.treeDocument,d.ChgCRImpacedItemDataGridModel.registerCustomFilter(),d.chgCRImpactedItemView=new e(c),w.showLoader(c.target,d.chgCRImpactedItemView.loader),this.subscribeToModelEvents(c.treeDocument);b.changeImpactView({view:"GridView"}),await g.getImpactAnalysisFacet(c.grid.id,"impactedItems").then((async e=>{var t={},i={};e.data[0]&&e.data[0].impactedItems&&e.data[0].impactedItems[0]&&e.data[0].impactedItems[0].non3DSpaceNonIndexedData&&(t=e.data[0].impactedItems[0].non3DSpaceNonIndexedData,e.data[0].impactedItems[0].mapping&&(i=e.data[0].impactedItems[0].mapping),e.data[0].impactedItems.splice(0,1));var n=await h.processIAImpactsForGet(e.data[0].impactedItems);if(await d.ChgCRImpacedItemDataGridModel.loadImpactedItem(c.treeDocument,n),w.fetchMaturityStateCSS(n),w.hideLoader(c.target,d.chgCRImpactedItemView.loader),i.length>0&&await d.ChgCRImpacedItemDataGridModel.i3dxInformationFilteringAndCalling(t,i,c.treeDocument),t&&t.length>0){var o=new Map,a=t.length,u=125;for(let i=0;i<t.length;i+=u){let n=[];n=a<u?t.slice(i,i+a):t.slice(i,i+u);for(var g=[],m=new Map,v=n,D=0;D<v.length;D++){var I=v[D];g.push(I.id),m.set(I.id,I)}var _=[];if(g.length>0){var S=h.commonPredicatedForFedSearch(),y=await h.callFederatedSearch(g,S);y&&y.results&&y.results.length>0&&(_=await h.processIAImpactsFederatedSearch(y,m))}d.ChgCRImpacedItemDataGridModel.loadImpactedItem(c.treeDocument,_),o=new Map([...o,...m]),a-=u,e.data[0].impactedItems=[...e.data[0].impactedItems,..._]}if(o&&o.size>0){d.chgCRImpactedItemView.indexInfoDiv.show();var E=await f.recent();if(E&&E.results&&E.results.length>0){var O=h.filterNonIndexedDataNew(E,o);o.size!=O.length&&l.warn(r.CHG_GOV_Not_Accessable_Data);var G=[];O.length>0&&(G=await h.processInformationForRecentIAImpacts(O),w.fetchMaturityStateCSS(G)),d.ChgCRImpacedItemDataGridModel.loadImpactedItem(c.treeDocument,G),e.data[0].impactedItems=[...e.data[0].impactedItems,...G]}}}else d.chgCRImpactedItemView.indexInfoDiv.hide();var N=h.getDefaultFilter(c.columns);if(c.treeDocument.setFilterModel(N),"true"==p.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(d.ChgImpacedItemTreeModel),e._cleanBIFilterProxy();let t={data:{roots:d.ChgImpacedItemTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,d.ChgImpacedItemTreeModel)})),0==c.treeDocument.getChildren().length)c.treeDocument._modelEvents.publish({event:"treeEmpty"});else{c.treeDocument._modelEvents.publish({event:"treeNotEmpty"});let t=e.data[0].impactedItems.map((e=>({id:e.id}))),i=e.data[0].id;d.ChgCRImpacedItemDataGridModel.addCAInfoForImpactedItems(t,i)}!0===s&&l.message(r.CHG_Orchestration_complete),b.chgCRImpactedItemView.chgGridView.addEventListener("postEdit",(function(e,t){b.updateReasonForChangeValue(t),b.updateStatusOfImpactedItem(t)}));let A=document.querySelector("#impactItem-mainContainer");A&&C.isMasked(A)&&C.unmask(A),w.hideLoader(c.target,d.chgCRImpactedItemView.loader)})),d.chgCRImpactedItemView.loadCustomColumns()},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),g.updateImpactItemReasonForChangeValue(i,b.contextId).then((e=>{console.log("updated on backend")}))}},i3dxInformationFilteringAndCalling:async function(e,t){let i=t.length;var n=p.getGlobalVariable().tenant,o=p.getGlobalVariable().tenantMappings.find((e=>e.platformId===n));for(let n=0;n<i;n++){let i=t[n],d=i.uris,c=d.length,p=i.ServiceInfo,u=i.RelativePath,g=o[p];if(null==g||null==u)continue;let m=g+u;for(let t=0;t<d.length;t+=50){var a=[],s=new Map;let i=[];i=c<50?d.slice(t,t+c):d.slice(t,t+50);for(let t=0;t<i.length;t++){const n=i[t],o=e.findIndex((e=>e.id===n));if(-1!==o){const t=e.splice(o,1)[0];a.push(t),s.set(t.id,t)}}try{var r=await f.fetchbyService({ids:i,url:m});console.log("Result of is "+r);var l=await h.processIAImpactsWithi3dxItems(r,s);console.log("Node information with NLS value"+l),await this.ChgCRImpacedItemDataGridModel.loadImpactBasisData(this.treeDocument,l)}catch(e){console.log(e)}console.log("The sliced array is "+i),c-=50}console.log("The modeler information is "+a),console.log("The modeler information is "+s)}},updateStatusOfImpactedItem:function(e){if(e.nodeModel){let t="";t="impactedKey"==e.nodeModel.options.grid.impact?"IMPACTED":"NOTIMPACTED";let i={id:e.nodeModel.options.grid.id,impactedItem:t},n=[];n.push(i),g.updateStatusOfImpactedItem(n,b.contextId).then((e=>{console.log("updated on backend")}))}},massUpdateHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Mass Update"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),b.chgCRImpactedItemView.chgGridView.showModelMassUpdateDialog();let t=b.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog.buttons.Ok.elements.button,i=b.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog.buttons.Apply.elements.button;t.addEventListener("click",(function(){b.updateMassValue()})),i.addEventListener("click",(function(){b.updateMassValue()}))},updateMassValue:function(){let e=b.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants();if(1==b.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog._dataGridView.model[0].isSelected()){let t=[];for(let i of e){let e=b.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog._dataGridView.model[0]._options.grid.value;void 0===i.options.grid.reasonForChange&&(i.options.grid.reasonForChange=e);let n={id:i.options.grid.id,reasonForChange:i.options.grid.reasonForChange};t.push(n)}g.updateImpactItemReasonForChangeValue(t,b.contextId).then((e=>{console.log("updated on backend")}))}if(1==b.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog._dataGridView.model[1].isSelected()){let t=[];for(let i of e){let e="";e="impactedKey"==i.options.grid.impact?"IMPACTED":"NOTIMPACTED";let n={id:i.options.grid.id,impactedItem:e};t.push(n)}g.updateStatusOfImpactedItem(t,b.contextId).then((e=>{console.log("updated on backend")}))}},subscribeToModelEvents:function(e){var t=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){console.log("subscribeToModelEvents treeEmpty"),i.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){console.log("subscribeToModelEvents treeNotEmpty"),i.hideEmptyView()})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CA-Creation-Update")]||this.modelEvents.subscribe({event:"CA-Creation-Update"},(function(e){b.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"Add"}})})),m.unsubscribe(`IA_ImpactItem:${widget.id}`),m.subscribe(`IA_ImpactItem:${widget.id}`,(function(e){"true"==p.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgImpacedItemTreeModel),e._cleanBIFilterProxy();let i={data:{roots:t.ChgImpacedItemTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(i,t.ChgImpacedItemTreeModel)}))})),m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,(function(t){b.ChgCRImpacedItemDataGridModel.filterView(t,e)})),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){b.ChgCRImpacedItemDataGridModel.enableColorizeView(t,e)})),m.unsubscribe("updateIndexingIconForHideOrShowInImpacts"),m.subscribe("updateIndexingIconForHideOrShowInImpacts",(function(e){t.chgCRImpactedItemView.indexInfoDiv.show()})),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){b.ChgCRImpacedItemDataGridModel.disableColorizeView(t,e)})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-impactedItem-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-impactedItem-object-selection-update"},(function(e){b.handleObjectSelectionUpdate(e)}))},changeImpactView:function(e){if("GridView"==e.view)(t=b.chgCRImpactedItemView.getToolbar().getNodeModelByID("view"))&&"view-list"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:r.CHG_TOOLTIP_GRID_VIEW}),t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected",(i=b.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&i.addClassName("currentView"),(n=b.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&n.removeClassName("currentView"),(o=b.impactsContent.getElement(".content-impactedItem-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=b.impactsContent.getElement(".content-impactedItem-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==e.view){var t,i,n,o,a;(t=b.chgCRImpactedItemView.getToolbar().getNodeModelByID("view"))&&"view-small-tile"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:r.CHG_TOOLTIP_TILE_VIEW}),t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected",(i=b.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&i.removeClassName("currentView"),(n=b.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&n.addClassName("currentView"),(o=b.impactsContent.getElement(".content-impactedItem-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=b.impactsContent.getElement(".content-impactedItem-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},dropHandler(e){console.log("dropHandler called"+e);b.ChgCRImpacedItemDataGridModel.treeDocument;var t=[];t=f.parseObjectInformation(e);let i=b.treeDocument.getAllDescendants().map((e=>e.options.grid.id)),n=e.map((e=>e.objectId));var o=[],a=0;for(let e=0;e<n.length;e++)for(let t=0;t<i.length;t++)n[e]==i[t]&&(o[a]=e,a++);o.length>0&&l.warn(r.CHG_GOV_NODE_PRESENT_WARN_IMPACTED_ITEM,!0);for(let e=0;e<o.length;e++)t.splice(o[e]-e,1);t.length>0&&b.ChgCRImpacedItemDataGridModel.addExistingChildren(t).then((function(e){b.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:e.data}})}),(function(e){}))},addExistingHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Add Impact"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=b.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingImpactedItems",extendedQuery:b.createExcludeListForSearch(t)};const n=c.activateSearch();p.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),c.search(r.CHG_GOV_ImpactBasis_Toolbar_AddImpactedItem,"",b.OnSearchComplete,"impactedItems",n,void 0,void 0,i)},addNewChangeAction:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Add to New Change Action"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t={parentID:b.ChgCRImpacedItemDataGridModel.impactAnalysisId},i=b.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();s.createNewChangeActionInImpactedItemContext(t,i)},addExistingChangeAction:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Add to Existing Change Action"}};if(I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),p.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeAction:CURRENT=policy_ChangeAction.state_Prepare:ECM_CHANGE_ON_HOLD!=TRUE&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var t=function(i){if(i.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,console.log(e),b.OnSearchCompleteCA(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",t)}else console.log("inside EVENT")};window.addEventListener("storage",t)}else{let e={condition:"addExistingCROrchestration",extendedQuery:'current:"Prepare" AND (NOT flattenedtaxonomies:"interfaces/Change On Hold")'};var i=c.activateSearch("","Change Action");c.search(r.CHG_GOV_Affected_Item_AddExisting_CA,"Change Action",b.OnSearchCompleteCA,"addExistingChangeAction",i,void 0,void 0,e)}},_OrchestrateChangeActions:function(){let e=[],t=[],i=b.ChgCRImpacedItemDataGridModel.impactAnalysisId,n=b.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();if(0==n.length){let e=b.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants();for(let i of e){let e={};e.id=i.options.grid.id,e.type=i.options.grid.type,e.service=i.options.grid.serviceName,t.push(e)}}else for(let e of n){let i={};i.id=e.options.grid.id,i.type=e.options.grid.type,i.service=e.options.grid.serviceName,t.push(i)}let o={orchestrateItemIds:t,dispatchType:widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action"};e.push(o),e[0].orchestrateItemIds&&e[0].orchestrateItemIds.length>0&&g.orchestrateChangeAction(e,i).then((function(e){if(null!=e.data[0].relelements&&0!=Object.keys(e.data[0].relelements).length){let e,t={grid:b.impactAnalysisSelectedNodes[0].options.grid,physicalId:b.impactAnalysisSelectedNodes[0].options.grid.id,type:b.impactAnalysisSelectedNodes[0].options.grid.type,accessBits:b.impactAnalysisSelectedNodes[0].options.accessBits},i=[];i.push(t),document.querySelector("#impactItem-mainContainer")&&(e=document.querySelector("#impactItem-mainContainer"),e.empty(),C.mask(e)),i.modelEvents=b.modelEvents,b.createImpactedItemView(e,i,b.impactAnalysisSelectedNodes,!0),b.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"Add"}}),b.modelEvents.publish({event:"CA-Creation-Update-ImpactedItem",data:{}})}else l.error(r.CHG_Alredy_Orchestrate)}))},createExcludeListForSearch:function(e){let t=[];for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchCompleteCA:function(e){const t=[],i=[];let o=b.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();for(let e of o)t.push(e.options.grid.id),i.push({id:e.options.grid.id,service:e.options.grid.serviceName,type:e.options.grid.type});const a=[];for(let[t]of e)a.push(t);let s=[];for(let e of a){let t={id:e,proposedInformation:i,updateAction:"CONNECT"};s.push(t)}let d=b.ChgCRImpacedItemDataGridModel.impactAnalysisId;0!=a.length&&0!=i.length&&g.connecteCAwithImpactedItem(s,d).then((function(e){let i=e.data[0].connectedProposedIds;if(0!=e.data[0].errorReport.length){var a=e.data[0].errorReport,s=[];for(var d in a)s+=a[d]+"<br/>";l.warn(s,"false")}else l.success(r.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_ChangeAction_Product_Success);s=[];let c=e.data;for(let e of c){e.id;let a=e.proposedIds,s=h.processChangeAction(e);for(let e of a)if(t.includes(e))for(let t of o)if(0!=i.length&&i.includes(t.options.grid.id)&&t.options.grid.id==e){t.options.grid.proposedChangeActionsData.push(s);let e=n.getProposedColumnBasedOnData(t.options.grid.proposedChangeActionsData);t.updateOptions({grid:{proposedChangeAction:e}})}}}))},OnSearchComplete:function(e){var t=[];let n=b.treeDocument.getAllDescendants().map((e=>e.options.grid.id));for(var o=!1,a=0;a<e.length;a++)n.includes(e[a][0])?o=!0:t.push({id:e[a][8]&&null!=e[a][8]?e[a][8]:e[a][0],type:e[a][2],service:e[a][7]&&e[a][7].includes(":")?e[a][7].split(":")[0]:e[a][7],environment:p.getGlobalVariable().tenant,updateAction:"CONNECT"});o&&l.warn(r.CHG_GOV_NODE_PRESENT_WARN_IMPACTED_ITEM,!0),t.length&&(i.hideEmptyView(),b.ChgCRImpacedItemDataGridModel.addExistingChildren(t).then((function(e){b.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:e.data}})}),(function(e){})))},removeHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Remove"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=b.treeDocument.getSelectedNodes();for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,type:t[n].options.grid.type,updateAction:"DISCONNECT"});b.ChgCRImpacedItemDataGridModel.removeChildren(i).then((function(e){b.modelEvents.publish({event:"update-impact-items",data:{operation:"DISCONNECT",context:e}})}),(function(e){}))},changeAssessmentHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Change Assessment"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=b.treeDocument.getSelectedNodes();if(t&&t.length>0){let e=[];t.forEach((t=>{e.push(t.options.grid.serviceBasedObjId)}));const i=widget.id+"ChgCRImpactedItemDataGridLayout";c.launchTransientWidget(i,e,"ENORIPE_AP")}else l.error(r.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleChangeAssessmentOK:function(e){if(e.length){var t=!1;for(let i=0;i<e.length;i++)e[i].id.includes("uuid:")?(t=!0,e.splice(i,1),i--):(e[i].updateAction="CONNECT",e[i].service="3DSpace");t&&l.error(r.CHG_GOV_Relation_Cross_Service_NotSupported_Error),e.length&&b.ChgCRImpacedItemDataGridModel.addExistingChildren(e)}},handleObjectSelectionUpdate:function(e){e.count>0?("true"===e.accessBits.RemoveImpactedItems&&b.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),"true"===e.accessBits.AddImpactedItems&&(b.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!0}),b.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!0})),p.getGlobalVariable().is3DSpace&&(b.chgCRImpactedItemView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="enabled"),b.chgCRImpactedItemView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[2].state="enabled"):(b.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),b.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!1}),b.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!1}),b.chgCRImpactedItemView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[2].state="disabled")},handleForMaturityUpdate:function(e){if(e){JSON.parse(e);let t=b.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();w.getHandleForMaturityUpdate(JSON.parse(e),t)}},globalSubscribeForImpactedItemView:function(){d.addObserver("ChgCRImpactedItemDataGridLayout","ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",b.handleChangeAssessmentOK),d.addObserver("ChgCRImpactedItemDataGridLayout","Lifecycle.Modification",b.handleForMaturityUpdate),d.addObserver("ChgCRImpactedItemDataGridLayout","CO-Properties-Update",b.handlePropertiesUpdateForImpactedItems)},handlePropertiesUpdateForImpactedItems:function(e){var t=b.ChgImpacedItemTreeModel;t&&_.handlePropertiesOnUpdate(t,e)}};return b.globalSubscribeForImpactedItemView(),b})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridModel","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactedItem/ChgCRImpacedItemDataGridModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/components/ChgCommonDailog","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgImpactAnalysisServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/UIKIT/Mask","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O,G,N,A,V,M,T,R,U,x,P,F,L,H){"use strict";var B={createImpactAnalysisView:function(t,i){var o=this;t.target.setStyles({position:"relative"}),this.contextId=t.id,this.copyOption=t,this.contextDetails=t.contextDetails;var s=t.contextDetails.access;B.rolledUpIA=!1;var r={};let l;(r=UWA.merge(r,t)).modelEvents=i,this.modelEvents=i,r.columns=n.getColumns(),this.ChgCRImpactAnalysisDataGridModel=new a(r.id,r.contextDetails),o.treeDocument=r.treeDocument=o.ChgCRImpactAnalysisDataGridModel.createTreeDocument(),o.ChgCRImpactAnalysisTreeModel=r.treeDocument,o.ChgCRImpactAnalysisDataGridModel.registerCustomFilter(),o.subscribeToModelEvents(r.treeDocument),o.chgCRImpactAnalysisView=new e(r),o.chgCRImpactAnalysisView.chgGridView.placeholder="",L.showLoader(t.target,o.chgCRImpactAnalysisView.loader),l="ChangeAnalysis"==r.contextDetails.isKindOfType?d.getImpactAnalysisFromId(t.id):d.getCRImpactAnalysis(t.id),l.then((async function(e){let i=await x.getExtensions("Change Analysis");var n=c.processCRImpactAnalysis(e,t.id,i);L.fetchMaturityStateCSS(n),await o.ChgCRImpactAnalysisDataGridModel.loadImpactAnalysisData(r.treeDocument,n);var a=c.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(a),E.publish("CO-AccessBit-Update",s),r.isSelected&&"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(o.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:o.ChgCRImpactAnalysisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,o.ChgCRImpactAnalysisTreeModel)})),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),o.chgCRImpactAnalysisView.chgGridView.getCellsXSO().onPostAdd((function(e){e.forEach((function(e){o.chgCRImpactAnalysisView.chgGridView.getCellIDFromXSOElement(e)}))})),B.changeView(),B.handleObjectSelectionUpdate({count:0});let l="",d=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;if(console.log(d),null!=d){let e=[N._KEY,N._VIEWS_PREFERENCES,N._CHANGE_REQUESTS_DETAILS];l=G.getTab(e);let t=B.treeDocument.getAllDescendants();if("crAssessment"==l)for(let e=0;e<t.length;e++){if(t[e].options.grid.id==d.data.items[0].IAid){B.treeDocument.getAllDescendants()[e].select(),B.modelEvents.publish({event:"triptych-show-panel",data:"right"}),B.modelEvents.publish({event:"information-panel-visible",data:null});break}}}if(o.chgCRImpactAnalysisView.loadCustomColumns(),0==e.data.length){A.toolbar.getNodeModelByID("impactedItems").updateOptions({visibleFlag:!1}),o.chgCRImpactAnalysisView.chgGridView.placeholder=p.CHG_GOV_Empty_DataGrid_PlaceHolder}L.hideLoader(r.target,o.chgCRImpactAnalysisView.loader)}),(function(e){return L.hideLoader(r.target,o.chgCRImpactAnalysisView.loader),Promise.reject(e)}))},refreshGrid:function(e){let t=this,i=A.toolbar.getNodeModelByID("filter"),o=A.toolbar.getNodeModelByID("impactedItems"),a=(i.options.grid.semantics.label,i.options.grid.data.menu[0].state),s=i.options.grid.data.menu[1].state,r=i.options.grid.data.menu[2].state;"selected"==a?(e={filterView:"activeIA"},B.inactiveCA=!1,B.rolledUpIA=!1):"selected"==s?(e={filterView:"inactiveIA"},B.inactiveCA=!0,B.rolledUpIA=!1):"selected"==r&&(e={filterView:"rolledUpIA"},B.rolledUpIA=!0,B.inactiveCA=!1);let l=this.ChgCRImpactAnalysisDataGridModel.contextID;t.chgCRImpactAnalysisView.chgGridView.placeholder="",L.showLoader(t.chgCRImpactAnalysisView.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div"),t.chgCRImpactAnalysisView.loader),d.getCRImpactAnalysis(l,e).then((async function(e){L.hideLoader(t.chgCRImpactAnalysisView.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div"),t.chgCRImpactAnalysisView.loader),0==e.data.length?(o.updateOptions({visibleFlag:!1}),t.chgCRImpactAnalysisView.chgGridView.placeholder=p.CHG_GOV_Empty_DataGrid_PlaceHolder):o.updateOptions({visibleFlag:!0});var i=c.processCRImpactAnalysis(e,l);L.fetchMaturityStateCSS(i),await t.ChgCRImpactAnalysisDataGridModel.loadImpactAnalysisData(B.ChgCRImpactAnalysisTreeModel,i),t.chgCRImpactAnalysisView.loadCustomColumns(),v.getGlobalVariable().is3DSpace||"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let i=t.ChgCRImpactAnalysisTreeModel.getAllDescendants();if(1==i.length){B.treeDocument._modelEvents.publish({event:"treeNotEmpty"});let e="";if(1==B.treeDocument.getAllDescendants().length){e=!0;for(let t of B.treeDocument.getAllDescendants())if("ia_Total"===t.options.grid.id){e=!1;break}}let t=B.inactiveCA;!0!==e||t||B.rolledUpIA||B.modelEvents.publish({event:"add_aggregation_row_datagrid",data:{treeDocument:B.treeDocument}})}n.changeView("GridView");let o={data:{roots:i}};e.cleanPathTag(),e._onSetPathTags(o,t.ChgCRImpactAnalysisTreeModel),B.handleObjectSelectionUpdate({count:0})}))}),(function(e){return Promise.reject(e)}))},changeView:function(e){let t="";if(0!=B.treeDocument.getAllDescendants().length){t=!0;for(let e of B.treeDocument.getAllDescendants())if("ia_Total"===e.options.grid.id){t=!1;break}}let i=B.inactiveCA;!0!==t||i||B.rolledUpIA||B.modelEvents.publish({event:"add_aggregation_row_datagrid",data:{treeDocument:B.treeDocument}}),n.changeView("GridView")},subscribeToModelEvents:function(e){let t=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){i.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){i.hideEmptyView()})),E.unsubscribe(`crImpactAnalysis:${widget.id}`),E.subscribe(`crImpactAnalysis:${widget.id}`,(function(){if("false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let i={data:{roots:t.ChgCRImpactAnalysisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(i,t.ChgCRImpactAnalysisTreeModel)})),Object.keys(t.chgCRImpactAnalysisView.options.treeDocument.getXSO()._items).length>0){let e=t.chgCRImpactAnalysisView.options.treeDocument.getXSO()._items;for(let i in e)t.chgCRImpactAnalysisView.onSelectionChange(t.chgCRImpactAnalysisView._modelEvents,e[i],t.chgCRImpactAnalysisView.id,t.chgCRImpactAnalysisView.options.contextDetails.isKindOfType,!0)}else t.chgCRImpactAnalysisView.onSelectionChange(t.chgCRImpactAnalysisView._modelEvents,t.chgCRImpactAnalysisView.options.treeDocument._getTrueRoot(),t.chgCRImpactAnalysisView.id,t.chgCRImpactAnalysisView.options.contextDetails.isKindOfType,!1)})),E.unsubscribe(`${e.options.id} of ${widget.id}`),E.subscribe(`${e.options.id} of ${widget.id}`,(function(t){B.ChgCRImpactAnalysisDataGridModel.filterView(t,e)})),E.unsubscribe(`${e.options.id} colorize ${widget.id}`),E.subscribe(`${e.options.id} colorize ${widget.id}`,(function(t){B.ChgCRImpactAnalysisDataGridModel.enableColorizeView(t,e)})),E.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),E.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(t){B.ChgCRImpactAnalysisDataGridModel.disableColorizeView(t,e)})),E.unsubscribe("updateIAGrid"+(widget?widget.id:"")),E.subscribe("updateIAGrid"+(widget?widget.id:""),(async function(e){var t=B.treeDocument.getAllDescendants().filter((e=>"Aggregation"!==e.options.grid.title)).map((e=>e.options.grid)),i=await P.getColumnApprovalStatusValue(c.createPayloadApprovalStatusValue(t)),n=B.treeDocument.getSelectedNodes();i&&i[n[0].options.grid.id]&&n[0].updateOptions({grid:{ApprovalStatus:i[n[0].options.grid.id].approvalStatus,approvalStatusModel:i[n[0].options.grid.id].approvalStatusModel}})})),E.unsubscribe("updateRouteContent-"+widget.id),E.subscribe("updateRouteContent-"+widget.id,(async function(e){B.chgCRImpactAnalysisView.chgGridView.prepareUpdateView(),B.chgCRImpactAnalysisView.chgGridView.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0),e="string"==typeof results?JSON.parse(e):e,e=P.getApprovalStatusValue(e);var t=B.chgCRImpactAnalysisView.chgGridView.treeDocument.getSelectedNodes();const i=Object.entries(e),n=i[0][0],o=i[0][1];var a=(await d.getImpactAnalysisUserAccess(t[0].options.grid.id)).data[0].dataelements;a=c.processAccessBitIA(a);const s=await d.getImpactAnalysisFromId(t[0].options.grid.id);n==t[0].options.grid.id&&(t[0].options.accessBits=a,t[0].updateOptions({grid:{ApprovalStatus:o.approvalStatus,approvalStatusModel:o.approvalStatusModel,maturity:s.data[0].current,maturityNLS:s.data[0].currentNLS}}))})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-object-selection-update"},(function(e){B.handleObjectSelectionUpdate(e)})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update_AnalysisBasis_count_IA_grid")]||this.modelEvents.subscribe({event:"update_AnalysisBasis_count_IA_grid"},(function(e){B.updateAnalysisBasisCountOnGrid(e)})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-impact-basis")]||this.modelEvents.subscribe({event:"update-impact-basis"},(function(e){if("CONNECT"==e.operation){let t=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactBasis+e.context.length;t.updateOptions({grid:{countImpactBasis:i}})}if("DISCONNECT"==e.operation){let t=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactBasis-e.context.length;t.updateOptions({grid:{countImpactBasis:i}}),0==w.treeDocument.getChildren().length&&w.treeDocument._modelEvents.publish({event:"treeEmpty"})}})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-impact-items")]||this.modelEvents.subscribe({event:"update-impact-items"},(function(e){if("CONNECT"==e.operation){let t=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactedItems+e.context.length;t.updateOptions({grid:{countImpactedItems:i}})}if("DISCONNECT"==e.operation){let t=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactedItems-e.context.length;t.updateOptions({grid:{countImpactedItems:i}}),0==_.treeDocument.getChildren().length&&_.treeDocument._modelEvents.publish({event:"treeEmpty"})}})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-contributor")]||this.modelEvents.subscribe({event:"update-contributor"},(function(e){if("CONNECT"==e.operation){let t=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countContributors+e.context.length;t.updateOptions({grid:{countContributors:i}})}if("DISCONNECT"==e.operation){let t=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countContributors-e.context.length;t.updateOptions({grid:{countContributors:i}})}})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("IA-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"IA-DataGrid-on-dblclick"},(function(e,t){if(v.getGlobalVariable().is3DSpace){F("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else B.modelEvents.publish({event:"information-panel-open",data:null})})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("IA-DataGrid-on-click")]||this.modelEvents.subscribe({event:"IA-DataGrid-on-click"},(function(e){4===e.column_id?t.launchVersionExplorer(e.ia_id,e.ia_name,e.ia_type):(5===e.column_id||6===e.column_id)&&e.cr_ids.length>1&&t.launchCRPopupView(e)}))},launchCRPopupView:function(e){var t=[];e.cr_ids.forEach((function(e){t.push(e.Id)})),0!==t.length?require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgChangeRequestDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel"],(function(e,i,n,o){!async function(){var n=new o;B.crPopupTreeDocument=n.createTreeDocument(),n.registerCustomFilter(),B.crDGV=null,B.crPopupDiv=UWA.createElement("div",{styles:{height:"100%"}});var a={isManagingCRPopup:!0,target:B.crPopupDiv,columns:i.getColumns(),showModelChangesFlag:!1,treeDocument:B.crPopupTreeDocument,postMaturityCallback:function(e){d.getChangeRequestInfo(t.toString()).then((function(e){c.processedCRSummaryList(e).then((function(e){B.crPopupTreeDocument=n.createTreeDocument(),n.loadIndexedChangeRequests(B.crPopupTreeDocument,e),B.crDGV.crDatagrid.treeDocument=B.crPopupTreeDocument,B.crDGV.crTilesView.treeDocument=B.crPopupTreeDocument,B.crDGV.crTilesView.loadApplicativeModel(B.crPopupTreeDocument)}))}))}};v.getGlobalVariable().customeViewCRList=[],B.crDGV=new e(a),await B.crDGV.render(),d.getChangeRequestInfo(t.toString()).then((function(e){c.processedCRSummaryList(e).then((function(e){n.loadIndexedChangeRequests(B.crPopupTreeDocument,e),B.crDGV.crDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],B.crDGV.reapplySortModel(),B.changeCRView({view:"TileView"})}))}));var s=new M({identifier:"WebUX_IMF_ECM_CR_POPUP"});new T({immersiveFrame:s,title:p.CHG_GOV_IA_CR_POPUP,content:B.crPopupDiv,width:540,height:640,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_CR_POPUP"});s.inject(widget.body)}()})):u.error(p.CHG_GOV_NO_MANAGING_CR)},launchVersionExplorer:function(e,t,i){var n=UWA.createElement("div",{styles:{height:"100%"}}),o=new R({versionGraphContainer:n}),a=[{"3DSpace":v.getGlobalVariable().baseURL,platformId:v.getGlobalVariable().tenant}];U.setOption("platform_services",a),o.setSingleSelectionMode(),o.setCheckVersionExternalFunction("ENOXVersionExplorerOpenVersion",(function(e){return!1})),o.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:e,securityContext:v.getGlobalVariable().getSecurityContext(),tenantId:v.getGlobalVariable().tenant,type:i,context:null,onComplete:function(){}});var s=new M({identifier:"WebUX_IMF_ECM_VERSION_EXP"});new T({immersiveFrame:s,title:p.CHG_GOV_IA_VERSION_EXP_REFINEMENT+t,content:n,height:360,width:620,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_VERSION_EXP"});s.inject(widget.body)},updateAnalysisBasisCountOnGrid:function(e){for(let t of e){let e=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getAllDescendants();for(let i of e)if(i.options.grid.id===t.id){let e=i.options.grid.countImpactBasis+t.affectedItemIds.length;i.updateOptions({grid:{countImpactBasis:e}}),e=0;break}}},duplicateImpactAnalysis:function({contextCRId:e}){var t={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Duplicate Impact Analysis"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});let i=[],n={id:B.treeDocument.getSelectedNodes()[0].options.grid.id};i.push(n),d.duplicateImpactAnalysis(e,i).then((function(e){""!=e.data[0].id&&B.ChgCRImpactAnalysisDataGridModel.addNodeInModelFromId(e.data[0].id)}))},cancelHandler:function({contextCRId:e}){let t={chgPhysicalId:e,boxTitle:p.CHG_GOV_ImpactAnalysis_Toolbar_CancelImpactAnalysis,subTitle:p.CHG_CO_Cancel_SubTitle,txtPlaceHolder:p.CHG_CO_Cancel_PlaceHolder,DoneCallback:function(t){let i=B.treeDocument.getSelectedNodes(),n={data:[]};for(let e=0;e<i.length;e++)n.data.push({id:i[e].options.grid.id,reason:t.userComment});d.cancelRelatedImpactAnalysis(e,n).then((function(e){for(let t=0;t<e.data.length;t++)for(let o=0;o<i.length;o++)if(e.data[t].id==i[o].options.grid.id){i[o].options.grid.maturity=e.data[t].current,i[o].options.grid.maturityNLS=e.data[t].currentNLS,i[o].options.grid.name=e.data[t].name,i[o].options.grid.cancelComment=n.data[0].reason;let a={maturity:i[o].options.grid.maturity,cancelComment:i[o].options.grid.cancelComment,name:i[o].options.grid.name},s=B.createCustomNameField(a);i[o].updateOptions({grid:{maturity:i[o].options.grid.maturity,maturityNLS:i[o].options.grid.maturityNLS,ia_name:s,cancelComment:i[o].options.grid.cancelComment,pushCancelIcon:!0}})}u.success(p.CHG_CANCEL_NOTICE),F("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil").filterView("activeIA")})),I.closeDialog()},CancelCallback:function(){I.closeDialog()}};var i={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Cancel"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),I.launchInfoDailog(t)},createCustomNameField:function(e){var t=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(t);var i=new UWA.Element("div",{class:"iconsDiv"});if("Cancelled"==e.maturity){var n=new UWA.Element("div",{class:"gridIconContainer",title:e.cancelComment});UWA.createElement("div",{class:"fonticon fonticon-block"}).inject(n),n.inject(i)}return i.inject(t),t.outerHTML},refreshHandler:function(){B.ChgCRImpactAnalysisTreeModel.empty();B.refreshGrid({filterView:"activeIA"})},deleteHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Delete"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=B.treeDocument.getSelectedNodes().filter((e=>"ia_Total"!=e.options.grid.id));if(t.length>0){for(var i=[],n=0;n<t.length;n++){var o=t[n],a={physicalid:o.options.grid.id,nodeName:o.options.grid.name,nodeTitle:o.options.grid.title,parentCRId:o.options.grid.parentCRId};i.push(a)}h.deleteNodes(i,void 0,B.refreshHandler,void 0,"ImpactAnalysis")}else u.error(p.CHG_SELECT_IA_FOR_DELETE)},globalSubscribeForCRImpactAnalysisView:function(){f.addObserver("ChgCRImpactAnalysisDataGridLayout","CO-AccessBit-Update",B.handleAccessBitUpdate),f.addObserver("ChgCRImpactAnalysisDataGridLayout","ENOLC_MOVE_CMD_UPDATE",B.handleForImpactAnalysisTransfer),f.addObserver("ChgCRImpactAnalysisDataGridLayout","Lifecycle.Modification",B.handleForMaturityUpdate),f.addObserver("ChgCRImpactAnalysisDataGridLayout","CO-Properties-Update",B.handlePropertiesUpdateForImpactAnalysis),f.addObserver("ChgCRImpactAnalysisDataGridLayout","co-update-attachment-complete",B.handleForAttachmentCount),f.addObserver("ChgCRImpactAnalysisDataGridLayout","update-impact-anlysis-grid",B.handleForUpdateImpactAnlysisGrid),f.addObserver("ChgCRImpactAnalysisDataGridLayout","CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",B.handleForAccessBitUpdateImpactAnalysis)},handlePropertiesUpdateForImpactAnalysis:function(e){var t=B.ChgCRImpactAnalysisTreeModel;let i=b.attrMap;if(t){for(var n=t.getAllDescendants(),o=e.objectId,a=0;a<n.length;a++){if(n[a].options.grid.id==o){if(e&&e.Title){let t,o=e.Title.value,s=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Benefit Impact"].value),r=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Cost Impact"].value),l=parseFloat(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Validation Effort"].value),d=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Risk Impact"].value),c=parseFloat(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Implementation Effort"].value),p=e["Abstract Change Analysis.Completion Date Due"].value,u=e["Abstract Change Analysis.Start Date Estimated"].value,g=e["Abstract Change Analysis.Completion Date Estimated"].value,h=e["Abstract Change Analysis.Completion Date Actual"].value;e["Abstract Change Analysis.Start Date Actual"]&&(t=e["Abstract Change Analysis.Start Date Actual"].value),n[a].options.grid.title=o,n[a].options.grid.benefitImpact=s,n[a].options.grid.costImpact=r,n[a].options.grid.validationEffort=l,n[a].options.grid.riskImpact=d,n[a].options.grid.implementationEffort=c,n[a].options.label=o,n[a].options.grid.dueDate=p,n[a].options.grid.estimatedStartDate=u,n[a].options.grid.estimatedEndDate=g,n[a].options.grid.startDateActual=t,n[a].options.grid.completionDateActual=h,i.forEach((t=>{t.forEach(((t,i,o)=>{if(e[t]&&t==e[t]._identifier){let o=i;n[a].updateOptions({label:n[a].options.label,grid:{[o]:e[t].value}})}}))}))}n[a].updateOptions({label:n[a].options.label,grid:{title:n[a].options.grid.title,benefitImpact:n[a].options.grid.benefitImpact,costImpact:n[a].options.grid.costImpact,validationEffort:n[a].options.grid.validationEffort,riskImpact:n[a].options.grid.riskImpact,implementationEffort:n[a].options.grid.implementationEffort,dueDate:n[a].options.grid.dueDate,estimatedStartDate:n[a].options.grid.estimatedStartDate,estimatedEndDate:n[a].options.grid.estimatedEndDate,startDateActual:n[a].options.grid.startDateActual,completionDateActual:n[a].options.grid.completionDateActual}})}}n[n.length-1].updateOptions()}},handleForAttachmentCount:function(e){if("CONNECT"==e.operation){let t=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countAttachment+e.referentials.attached.length;t.updateOptions({grid:{countAttachment:i}})}if("DISCONNECT"==e.operation){let t=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countAttachment-e.referentials.detached.length;t.updateOptions({grid:{countAttachment:i}})}},handleForImpactAnalysisTransfer:function(e){var t,i,o=B.ChgCRImpactAnalysisTreeModel.getAllDescendants(),a=[];Object.keys(e.data.attributes).forEach((function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)}));for(var s=0;s<a.length;s++){t=a[s];for(var r=0;r<o.length;r++){if(o[r].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;o[r].options.grid.owner=l,o[r].options.grid.ownerFullName=t.newOwnerFullName;var d=t.newOwnerFullName}if(t.newOrganization){var c=t.newOrganization;o[r].options.grid.orgnaization=c}if(t.newCollabSpace){var p=t.newCollabSpace;o[r].options.grid.collabspace=p}""==t.newOwnerId?(l=o[r].options.grid.owner,d=o[r].options.grid.ownerFullName,i=n.createCustomOwner(l,d)):i=n.createCustomOwner(l,d);var u=o[r].options.grid.name,g={};g.name=u,g.title=o[r].options.grid.title,g.severity=o[r].options.grid.severity,g.severityNLS=o[r].options.grid.severityNLS,g.ownerFullName=d,g.maturityNLS=o[r].options.grid.maturityNLS;var h=B.ChgCRImpactAnalysisDataGridModel.getCustomTooltip(g),m=u+" | "+d;o[r].updateOptions({label:o[r].options.grid.title,grid:{collabspace:o[r].options.grid.collabspace,organization:o[r].options.grid.organization,owner:o[r].options.grid.ownerFullName,chgObjOwner:i},customTooltip:h,subLabel:m})}}}},handleForMaturityUpdate:function(e){e&&("Change Analysis"==JSON.parse(e).Refresh.modified[0].policy&&B.refreshHandler())},handleForUpdateImpactAnlysisGrid:function(e){B.ChgCRImpactAnalysisDataGridModel.addNodeInModelFromId(e.selectedObjID)},handleAccessBitUpdate:function(e){e.id==B.contextId&&("false"==e.accessBits.ManageChangeAnalysis?B.accessBit=!1:B.accessBit=!0)},handleForAccessBitUpdateImpactAnalysis:function(e){B.getSelectedNodes()&&B.getSelectedNodes()[0].options.grid.id==e.id&&(B.getSelectedNodes()[0].options.accessBits=e.accessBits)},handleObjectSelectionUpdate:function(e){1===e.count&&B.accessBit?(1==B.inactiveCA?B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}):B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!0}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("refine",{visibleFlag:!0})):(B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("refine",{visibleFlag:!1})),e.count>0&&B.accessBit?(B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{visibleFlag:!0}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!0}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IADispatchMenu",{visibleFlag:!0})):(B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IADispatchMenu",{visibleFlag:!1})),null!=B.inactiveCA&&1==B.inactiveCA?(B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IAMenu",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IADispatchMenu",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("refine",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!1})):null!=B.rolledUpIA&&1==B.rolledUpIA?(B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IAMenu",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IADispatchMenu",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("refine",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!1}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{visibleFlag:!1})):B.accessBit&&(B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IAMenu",{visibleFlag:!0}),B.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("newImpactAnalysis",{visibleFlag:!0}))},removeDeletedNodesUsingIDs:function(e){v.getGlobalVariable().deletionData={wid:widget.id,deletedIDs:e,nav:"CR_IA"},e.length+1===B.treeDocument.getAllDescendants().length&&B.modelEvents.publish({event:"remove_aggregation_row_datagrid",data:{treeDocument:B.treeDocument}});for(var t=0;t<e.length;t++){var i=e[t];B.treeDocument.search({shouldStop:function(e){return e.options.grid.id===i&&(e.remove(),!0)}})}0==B.treeDocument.getChildren().length&&B.treeDocument._modelEvents.publish({event:"treeEmpty"})},getSelectedNodes:function(){return B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()},impactsHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Impacts"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var i=[],n="",a=B.treeDocument.getSelectedNodes().filter((e=>"ia_Total"!=e.options.grid.id));0===a.length&&(a=(a=B.treeDocument.getAllDescendants()).filter((e=>"ia_Total"!=e.options.grid.id)));for(var r=0;r<a.length;r++){var l=a[r].options.grid.id;i.push(l),n+=l,r<a.length-1&&(n+=",")}B.impactsContent=new UWA.Element("div",{styles:{height:"100%"}});var g={target:B.impactsContent,grid:a[0].options.grid,columns:o.getColumns(a[0].options.accessBits,!0),physicalId:i,type:a[0].options.grid.type,accessBits:a[0].options.accessBits,isReadOnly:!0};let h=new s(g.grid.parentCRId,i);g.treeDocument=h.createTreeDocument();h.registerCustomFilter(),B.chgCRImpactedItemView=null,d.getImpactAnalysisFromId(n,"impactedItems").then((async e=>{for(var i=0;i<e.data.length;i++){var n=e.data[i];if(n.impactedItems){var o={};n&&n.impactedItems&&n.impactedItems[0]&&n.impactedItems[0].non3DSpaceNonIndexedData&&(o=n.impactedItems[0].non3DSpaceNonIndexedData,n.impactedItems.splice(0,1));var a=await c.processIAImpactsForGet(n.impactedItems);if(h.loadImpactedItem(g.treeDocument,a),L.fetchMaturityStateCSS(a),o&&o.length>0){var s=new Map,r=o.length,l=125;for(let t=0;t<o.length;t+=l){let i=[];i=r<l?o.slice(t,t+r):o.slice(t,t+l);for(var d=[],m=new Map,C=i,f=0;f<C.length;f++){var v=C[f];d.push(v.id),m.set(v.id,v)}var I=[];if(d.length>0){var w=c.commonPredicatedForFedSearch(),_=await c.callFederatedSearch(d,w);_&&_.results&&_.results.length>0&&(I=await c.processIAImpactsFederatedSearch(_,m))}h.loadImpactedItem(g.treeDocument,I),s=new Map([...s,...m]),r-=l,e.data[0].impactedItems=[...e.data[0].impactedItems,...I]}if(s&&s.size>0){var b=await D.recent();if(b&&b.results&&b.results.length>0){var S=c.filterNonIndexedDataNew(b,s);s.size!=S.length&&u.warn(p.CHG_GOV_Not_Accessable_Data);var y=[];S.length>0&&(y=await c.processInformationForRecentIAImpacts(S),L.fetchMaturityStateCSS(y)),h.loadImpactedItem(g.treeDocument,y),e.data[0].impactedItems=[...e.data[0].impactedItems,...y]}}}}}B.chgCRImpactedItemView=new t(g);let E=e.data[0].impactedItems.map((e=>({id:e.id}))),O="";for(f=0;f<e.data.length-1;f++)O+=e.data[f].id+",";O+=e.data[f].id,h.addCAInfoForImpactedItems(E,O),B.changeImpactView({view:"GridView"})}));var m=new M({identifier:"WebUX_IMF_ECM_IMPACTS"});new T({immersiveFrame:m,title:p.ECM_CR_IA_IMPACTED_ITEMS,content:B.impactsContent,height:360,width:420,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_IMPACTS"});m.inject(widget.body)},changeCRView:function(e){if("GridView"==e.view)(t=B.crDGV.crDatagrid.getToolbar().getNodeModelByID("view"))&&"view-list"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:p.CHG_TOOLTIP_GRID_VIEW}),t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected",(i=B.crPopupDiv.getElement(".toolbar-cr-div .wux-ui-3ds-view-list"))&&i.addClassName("currentView"),(n=B.crPopupDiv.getElement(".toolbar-cr-div .wux-ui-3ds-view-small-tile"))&&n.removeClassName("currentView"),(o=B.crPopupDiv.getElement(".crgridView"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=B.crPopupDiv.getElement(".crtileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==e.view){var t,i,n,o,a;(t=B.crDGV.crDatagrid.getToolbar().getNodeModelByID("view"))&&"view-small-tile"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:p.CHG_TOOLTIP_TILE_VIEW}),t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected",(i=B.crPopupDiv.getElement(".toolbar-cr-div .wux-ui-3ds-view-list"))&&i.removeClassName("currentView"),(n=B.crPopupDiv.getElement(".toolbar-cr-div .wux-ui-3ds-view-small-tile"))&&n.addClassName("currentView"),(o=B.crPopupDiv.getElement(".crgridView"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=B.crPopupDiv.getElement(".crtileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},changeImpactView:function(e){if("GridView"==e.view)(t=B.chgCRImpactedItemView.getToolbar().getNodeModelByID("view"))&&"view-list"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:p.CHG_TOOLTIP_GRID_VIEW}),t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected",(i=B.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&i.addClassName("currentView"),(n=B.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&n.removeClassName("currentView"),(o=B.impactsContent.getElement(".content-impactedItem-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=B.impactsContent.getElement(".content-impactedItem-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==e.view){var t,i,n,o,a;(t=B.chgCRImpactedItemView.getToolbar().getNodeModelByID("view"))&&"view-small-tile"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:p.CHG_TOOLTIP_TILE_VIEW}),t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected",(i=B.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&i.removeClassName("currentView"),(n=B.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&n.addClassName("currentView"),(o=B.impactsContent.getElement(".content-impactedItem-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=B.impactsContent.getElement(".content-impactedItem-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},filterActiveView:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Filter by Active IA"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("calling filter view..."),n.filterView("activeIA")},filterInActiveView:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Filter by Inactive IA"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("calling filter view..."),n.filterView("inactiveIA")},filterRolledUpView:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Filter by Rolled-up IA"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),n.filterView("rolledUpIA")},addIAFromParentCRDialog:function({contextCRId:e}){if(v.getGlobalVariable().is3DSpace);else{var t=l.activateSearch();l.search(p.CHG_GOV_Add_From_ParentCR,"Change Analysis",B.OnSearchCompleteForAddIAFromPrentCR,void 0,t,void 0,void 0,void 0)}},OnSearchCompleteForAddIAFromPrentCR:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i][0]);t.length},dispatchToNewSubCRDialog:function({contextCRId:e}){var t={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Dispatch to New"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});const i=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes().filter((e=>"ia_Total"!=e.options.grid.id));if(i.length>0){let t={parentID:e,selectedIDs:[],postComplete:function(){n.filterView("activeIA"),u.success(p.CHG_GOV_Dispacth_OK)}};i.forEach((function(e){t.selectedIDs.push(e.options.grid.id)})),r.createChangeRequestInContext(t)}else u.error(p.CHG_GOV_SELECT_IA_FOR_Dispacth)},dispatchToExistingSubCRDialog:function({contextCRId:e}){var t={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Dispatch to Existing"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),B.contextCRId=e;let i={condition:"addChildChangeRequest",extendedQuery:" AND (ecm_95_cr_95_governing_95_cr_95_id:"+e+")"};if(B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes().filter((e=>"ia_Total"!=e.options.grid.id)).length>0)if(v.getGlobalVariable().is3DSpace);else{var n=l.activateSearch(!0);l.search(p.CHG_GOV_Dispatch_To_Existing_SubCR,"Change Request",B.OnSearchCompleteForSubCR,void 0,n,void 0,void 0,i)}else u.error(p.CHG_GOV_SELECT_IA_FOR_Dispacth)},OnSearchCompleteForSubCR:function(e){let t=[];const i=B.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes().filter((e=>"ia_Total"!=e.options.grid.id));for(let i=0;i<e.length;i++)t.push(e[i][0]);if(t.length){let e={id:t,impactAnalysisIds:[]};i.forEach((function(t){e.impactAnalysisIds.push(t.options.grid.id)})),d.dispatchImpactAnalysisToSubCR(B.contextCRId,new Array(e)).then((function(e){!0===e.success&&200===e.statusCode?(n.filterView("activeIA"),u.success(p.CHG_GOV_Dispacth_OK)):u.error(p.CHG_GOV_Dispacth_KO)}))}},refineImpactAnalysis:function({contextCRId:e}){var t={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Refine"}};H.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});let i=B.treeDocument.getSelectedNodes();if(1==i.filter((e=>"ia_Total"!=e.options.grid.id)).length){let t=[];t.push({id:i[0].options.grid.id}),d.refineImpactAnalysis(e,t).then((function(e){!0===e.success&&200===e.statusCode&&""!=e.data[0].id?(n.filterView("activeIA"),u.success(p.CHG_GOV_Refine_OK)):u.error(p.CHG_GOV_Refine_KO)}))}else u.error(p.CHG_SELECT_SINGLE_IA_FOR_DELETE)}};return B.globalSubscribeForCRImpactAnalysisView(),B})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a){"use strict";let s=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"impactBasis-mainContainer"}))},onTabClickAction:function(e){console.log("action tab clicked.............")},updateFacet:function(){if(1==this.getModel().isMergedModel())return;this.elements.container.empty();let e=n.getSelectedNodes();e.length&&(this.options.data[0].grid=e[0].options.grid,this.options.data[0].physicalId=e[0].options.grid.id,this.options.data[0].type=e[0].options.grid.type,this.options.data[0].accessBits=e[0].options.accessBits,o.getGlobalVariable().IAAccessBitsData&&o.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&o.getGlobalVariable().IAAccessBitsData.iaID===e[0].options.grid.id&&(this.options.data[0].accessBits=o.getGlobalVariable().IAAccessBitsData.accessBits),i.createImpactBasisView(this.elements.container,this.options.data))},switchFacet:function(e){console.log("_switchFacet.......................")},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return s})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgDataService","UWA/Class/Model","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"impactItem-mainContainer"}))},updateFacet:function(){let e;this.elements.container.empty();let t=l.getSelectedNodes();2==t.length&&("Aggregation"==t[0]._options.label?e=0:"Aggregation"==t[1]._options.label&&(e=1),1==e&&t.splice(1,1),0==e&&t.splice(0,1)),t.length&&1==t.length&&"ChangeAnalysis"==d.getGlobalVariable().lastSelectedInfoType&&(this.options.data[0].grid=t[0].options.grid,this.options.data[0].physicalId=t[0].options.grid.id,this.options.data[0].type=t[0].options.grid.type,this.options.data[0].accessBits=t[0].options.accessBits,d.getGlobalVariable().IAAccessBitsData&&d.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&d.getGlobalVariable().IAAccessBitsData.iaID===t[0].options.grid.id&&(this.options.data[0].accessBits=d.getGlobalVariable().IAAccessBitsData.accessBits),r.createImpactedItemView(this.elements.container,this.options.data,t))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}});return c})),define("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m){"use strict";return{showRMBMenuOnGrid:async function(e,t,n,o){let a=[];try{"true"==l.getGlobalVariable().CHG_APPROVAL_COLUMN&&t.cellInfos.nodeModel.options.grid.approvalStatusModel&&await h.getColumnApprovalStatusMenu(t.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){a.push(e)}))}catch(e){console.error(e)}return new Promise((function(s,d){let c=u("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),h=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const m=h.map((e=>e.options.grid.id));let C={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType};if(!0===n){let n=[];n.push(r.createPropertyPushItem(m)),n.push(i.getRelationalExplorerMenu(e,t)),n.push(g.getMaturityMenu(t,void 0,o)),c.openWith(C).then((e=>{n.splice(2,0,e),s(n)}))}else{let n="false";h.length>1&&(n="true"),C.facetName="dependency";let d=[];d.push(r.createPropertyPushItem(m)),d.push(i.getRelationalExplorerMenu(e,t)),[].push(C);let f=u("DS/ENOChgServices/scripts/services/ChgDataService"),v=null,D=c.openWith(C),I=[],w=document.getElementById("outer-co-div");I.push(D),"false"==n&&(v=f.getChangeRequestUserAccess(t.cellInfos.nodeModel.options.grid.id),I.push(v)),Promise.all(I).then((function(r){if(r[0]&&d.push(r[0]),d.push(g.getMaturityMenu(t,void 0,o)),d.push(p.getCopyLink(h)),"false"==n){if(r[1]&&"true"==r[1].data[0].dataelements.TransferOwnership&&d.push(i.getTransferMenu(e,t)),"true"==r[1].data[0].dataelements.Delete&&d.push(i.getDeleteMenu(e,t,w)),"true"==l.getGlobalVariable().CHG_APPROVAL_COLUMN&&a.length>0)for(let e=0;e<a[0].length;e++)d.push(a[0][e])}else d.push(i.getTransferMenu(e,t)),d.push(i.getDeleteMenu(e,t,w));s(d)}))}}))},createCRAssessmentTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-assessment-container"),t.target=n,a.createImpactAnalysisView(t,i),n},createCRAffectedItemsTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-affectedItems-container"),t.target=n,o.createAffectedItemsView(t,i),n},createCROrchestrationTab:function(t,i){let o=e.createElement("div");return o.classList.add("chg-orchestration-container"),t.target=o,n.createChangeOrchestrationView(t,i),o},createCRMembersTab:function(t){l.getGlobalVariable().ECM_EnableAddMemberGenericComponent;let i=e.createElement("div");return i.classList.add("chg-member-container"),t.target=i,m.createMembersNewTab(t),i},createCRApprovalsTab:function(t,i){let n=e.createElement("div"),o=e.createElement("div"),a=e.createElement("div");o.classList.add("chg-Approval-container"),a.classList.add("chg-Approval-Header-container");let r=e.createElement("div",{id:"chg-Task-container"});return n.appendChild(o),t.target=o,t.targetHeader=a,t.taskContainer=r,s.createApprovalsView(t),o},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:organizationResponsible","ds6w:modified","ds6w:created"];for(let t of n)e.delete(t);return e.forEach(((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)})),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:c.getGetCellValueFunction(i,t)}}}})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgChangeRequestDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridReportViewToolbar","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D){"use strict";return e.extend({init:function(e){this.options=e,this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}},this._modelEvents=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.crDatagridView=""},loadCustomColumns:function(){let e=v.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&D.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){let t=this.processColumns(),g=this;var e={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,placeholder:"",identifier:"chgCRSummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(g,e,g.options.isManagingCRPopup,g.options.postMaturityCallback).then((function(e){return e}));e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){s.readyDragContent(e,t)},onDragStartCell:function(e,t){s.readyDragContent(e,t)}};e=UWA.merge(e,this.options),this.crDatagrid=new n(e),this.crDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){f.onCustomViewsSave(e,t,g.options.custom_view_options)},this.crTilesView=new u({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){s.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});let C={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(g,e,g.options.isManagingCRPopup,g.options.postMaturityCallback).then((function(e){return e}))}};this.crTilesView.onContextualEvent=C;let v={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:l.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:l.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},D={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}},I={expandInput:{stdTemplate:"expandInputtemplate"}},w={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.crDatagrid.getTypeRepresentationFactory().registerTypeTemplates(w),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(I),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(D),this.options.isManagingCRPopup?this.crDatagrid.setToolbar(m.writetoolbarDefinition(this.options)):(this.crDatagrid.setToolbar(a.writetoolbarDefination(this.options)),a.toolbar=this.crDatagrid.getToolbar()),this.crDatagrid.getToolbar().typeRepresentationFactory.registerTypeTemplates(w),this.crDatagrid.getToolbar().typeRepresentationFactory.registerTypeRepresentations(I),this.crDatagrid.getToolbar().addEventListener("onReady",(function(e){let t=g.crDatagrid.getToolbar().getNodeModelByID("addNewBlankCAId");t&&t._associatedView.registerkeyDownCallback(p.createBlankChangeOrder)})),this.crDatagrid.addEventListener("allCellsRendered",(function(){g.crDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.crDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.crDatagrid.getTreeDocument().getSelectedNodes().length}}]),g.crTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.crTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.crTilesView.getTreeDocument().getSelectedNodes().length}}])})),g.crDatagrid.addEventListener(i.POINTERHIT,(function(e,t){g.onItemClick(e,t)})),g.crDatagrid.getTreeDocument().getXSO().onAdd((function(e){g.duplicateCmdController(e),g.crDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.crDatagrid.getTreeDocument().getSelectedNodes().length}}),g.crTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.crDatagrid.getTreeDocument().getSelectedNodes().length}}),g._modelEvents.publish({event:"cr-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})})),g.crDatagrid.getTreeDocument().getXSO().onRemove((function(e){g.duplicateCmdController(e),g.crDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.crTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?g._modelEvents.publish({event:"cr-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):g._modelEvents.publish({event:"cr-DataGrid-on-unselect",data:{model:e,context:e},context:e})})),g.crTilesView.addEventListener(i.POINTERHIT,(function(e,t){g.onItemClick(e,t)})),this.onItemClick=f.debouncingHandler((function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(e.multipleHitCount>=2)t.nodeModel.select(!0),g._modelEvents.publish({event:"cr-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel});else if(t&&2==t.columnID){var i={};i.cellInfos=t,f.executeMaturity(i)}}),500),this.crDatagridView=UWA.createElement("div",{id:"outer-cr-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-cr-div"});let _=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-cr-div"});this.crDatagrid.getToolbar().getContent().inject(_);let b=UWA.createElement("div",{class:"content-cr-div crgridView showView"}),S=UWA.createElement("div",{class:"crtileView hideView"}),y=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_DataGrid_PlaceHolder_ChgRequest}).inject(y),this.crDatagrid.inject(b),this.crTilesView.inject(S),y.inject(S),this.crDatagridView.addContent(_),this.crDatagridView.addContent(b),this.crDatagridView.addContent(S),this.crDatagridView.inject(this.options.target),this.crDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.unsubscribe({event:"cr-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"cr-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"cr-DataGrid-on-search"},(function(e){if("false"==h.getGlobalVariable().slidePanelTagger){var t=e.query;if(t){var i=g.crDatagrid.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){if(e.options.grid.title){var i=e.options.grid.title.toLowerCase().contains(t.toLowerCase())||e.options.grid.name.toLowerCase().contains(t.toLowerCase());e.isVisible()&&!i?e.hide():!e.isVisible()&&i&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"cr-DataGrid-on-reset-search"},(function(e){var t=g.crDatagrid.getTreeDocument();t.withTransactionUpdate((function(){t.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.options.custom_view_options.dgvHandle=this.crDatagrid,this.options.custom_view_options.ootb_columns=[...t],this.options.custom_view_options.dgvDiv=b,this.loader=(new o).inject(this.options.target);let E=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];f.registerCustomEventsOnDGV(E,this.crDatagrid,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.crDatagrid.reapplySortModel()},duplicateCmdController:function(e){let t=this,i=e.getTreeDocument();i.getSelectedNodes()&&1===i.getSelectedNodes().length&&"Cancelled"!=i.getSelectedNodes()[0].options.grid.maturity?t.crDatagrid.getToolbar().updateNodeModel("duplicateCR",{disabled:!1}):t.crDatagrid.getToolbar().updateNodeModel("duplicateCR",{disabled:!0})},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgChangeRequestDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgServices/scripts/services/ChgErrors","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b){"use strict";let S={loadRealTimeCRDataPromise:function(e){return new Promise((function(t,i){n.getTimestamp().then((function(a){var s=o.processTimestampData(a);n.getConfiguredChangeRequestList({indexed:!1,simplifiedJSON:!0,timestamp:s,filter:e}).then((function(e){o.processedCRSummaryList(e,S.extns).then((function(i){t({realTimeData:e,processedCRList:i})}))}),(function(e){i(e)}))}),(function(e){i(e)}))}))},loadIndexedCRDataPromise:function(e){return new Promise((function(t,i){n.getConfiguredChangeRequestList(e).then((function(e){o.processedCRSummaryList(e,S.extns).then((function(i){t({CRSummaryList:e,processedCRList:i})}),(function(e){i(e)}))}),(function(e){i(e)}))}))},postProcessing:function(){var e=this;0==e.treeDocument.getChildren().length?e.treeDocument._modelEvents.publish({event:"crSummaryEmpty"}):e.treeDocument._modelEvents.publish({event:"crSummaryNotEmpty"}),e.globalSubscribeCOSummaryUpdateFromPropertyPanel(),e.globalSubscribeForTransferFromCOSummaryView(),e.globalSubscribeForMaturityUpdate(),e.globalSubscribeForApplicabilityUpdate(),e.crGridView.loadCustomColumns(),I.hideLoader(e.options.target,e.crGridView.loader)},updateTagger:function(){var e=this;"false"==c.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)}))},createChangeRequestView:async function(n){var a=this;n.target.setStyles({position:"relative"}),this._pathChangeRequestSummary=[u._KEY,u._VIEWS_PREFERENCES,u._LIST_VIEW,u._FILTERVIEW];var s=p.getFilter(this._pathChangeRequestSummary),r={};r=UWA.merge(r,n),this.options=r,S.extns=await D.getExtensions("Change Request"),r.columns=t.getColumns(),a.ChgCRDataGridModel=new i,a.treeDocument=r.treeDocument=a.ChgCRDataGridModel.createTreeDocument(),a.ChgCRlayoutModel=a.treeDocument,a.ChgCRDataGridModel.registerCustomFilter();var l=o.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(l),a.crGridView=new e(r),a.crGridView.render(),I.showLoader(r.target,a.crGridView.loader),a.subscribeToModelEvents(a.treeDocument);var d="";"inactive"===s?d="inactiveCR":(d="activeCR",p.updateFilter(a._pathChangeRequestSummary,"activeCR")),a.updateGrid(d)},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_FetchChgRequest,this.updateTagger()},updateGrid:async function(e){var t=this,i=a.toolbar.getNodeModelByID("filter");if("activeCR"==e&&(i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected"),t.preUpdateProcessing(),"inactiveCR"!=e){var n=await t.loadRealTimeCRDataPromise(e);I.fetchMaturityStateCSS(n.processedCRList),t.ChgCRDataGridModel.loadChangeRequestData(t.treeDocument,n.processedCRList)}t.params.filter=e,t.loadIndexedCRDataPromise(t.params).then((async function(e){I.fetchMaturityStateCSS(e.CRSummaryList.data),t.ChgCRDataGridModel.loadIndexedChangeRequests(t.treeDocument,e.processedCRList),t.currentPage=parseInt(e.CRSummaryList.summary["Current Page"]),t.totalPages=parseInt(e.CRSummaryList.summary["Total Pages"]),t.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_NoChgRequest,t.currentPage<t.totalPages?(t.updateTagger(),t.crGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.crGridView.crDatagrid.onInfiniteScroll((async function(e){t.getNextPageChangeRequests("DGV")})),t.crGridView.crTilesView.onInfiniteScroll((async function(e){t.getNextPageChangeRequests("RTV")}))):(t.updateTagger(),t.crGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())}))},getNextPageChangeRequests:async function(e){var t=this;if(t.currentPage<t.totalPages){I.showLoader(t.options.target,t.crGridView.loader),t.params.pageNumber++,t.currentPage++;let i=await t.loadIndexedCRDataPromise(t.params);t.ChgCRDataGridModel.loadIndexedChangeRequests(t.treeDocument,i.processedCRList),t.updateTagger(),t.crGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),"DGV"===e?t.crGridView.crDatagrid.infiniteScrollProcessDone():t.crGridView.crTilesView.infiniteScrollProcessDone()}},changeView:function(){t.changeView("GridView")},refreshLayout:function(e){let t=this.ChgCRlayoutModel;(new i).updateNodeIndexed(t,e),this.crGridView.crDatagrid.ensureNodeModelVisible(this.ChgCRlayoutModel.getChildren()[0],!1)},removeDataFromGrid:function(e,t){S.ChgCRlayoutModel.getChildren();for(let t=0;t<e.length;t++){let i=e[t];S.ChgCRlayoutModel.search({shouldStop:function(e){return e.options.grid.id===i&&(S.removingNode(e),!0)}}),0==S.ChgCRlayoutModel.getChildren().length&&S.ChgCRlayoutModel._modelEvents.publish({event:"crSummaryEmpty"})}},removingNode:function(e){this.ChgCRlayoutModel.removeRoot(e)},globalSubscribeCOSummaryUpdateFromPropertyPanel:function(){l.addObserver("ChgCRDataGridLayout","CO-Properties-Update",this.handleForUpdatingFromPropertyPanel)},globalSubscribeForTransferFromCOSummaryView:function(){l.addObserver("ChgCRDataGridLayout","ENOLC_MOVE_CMD_UPDATE",this.handleForCOSummaryTransfer)},globalSubscribeForMaturityUpdate:function(){l.addObserver("ChgCRDataGridLayout","Lifecycle.Modification",this.handleForMaturityUpdate)},globalSubscribeForApplicabilityUpdate:function(){l.addObserver("ChgCRDataGridLayout","applicability:update:notification",this.handleForApplicabilityUpdate)},handleForUpdatingFromPropertyPanel:function(e){let t=S.ChgCRlayoutModel;t&&w.handlePropertiesOnUpdate(t,e)},handleForCOSummaryTransfer:function(e){let n,o=S.ChgCRlayoutModel.getAllDescendants(),a=[],s="",r="";Object.keys(e.data.attributes).forEach((function(t){let i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)}));for(let e=0;e<a.length;e++){n=a[e];for(let e=0;e<o.length;e++){if(o[e].options.grid.id==n.id){if(n.newOwnerId&&n.newOwnerFullName&&(r=o[e].options.grid.name,s=n.newOwnerId,o[e].options.grid.owner=s,o[e].options.grid.ownerFullName=n.newOwnerFullName),n.newOrganization){let t=n.newOrganization;o[e].options.grid.orgnaizationNLS=t}if(n.newCollabSpace){let t=n.newCollabSpace;o[e].options.grid.collabspaceNLS=t}let a=n.newOwnerFullName,p=t.createCustomOwner(s,a);var l={};l.name=r,l.title=o[e].options.grid.title,l.severity=o[e].options.grid.severity,l.severityNLS=o[e].options.grid.severityNLS,l.ownerFullName=a,l.maturityNLS=o[e].options.grid.maturityNLS;var d=r+" | "+a,c=i.prototype.createCustomTooltip(l);o[e].updateOptions({grid:{collabspaceNLS:o[e].options.grid.collabspaceNLS,organizationNLS:o[e].options.grid.organizationNLS,owner:o[e].options.grid.owner,ownerFullName:o[e].options.grid.ownerFullName,co_Owner:p},customTooltip:c,subLabel:d})}}}},loadingViewPreference:function(){let e=v("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=s.MOBILE_CUTOFF){let t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(r.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{let t=e.getCASummaryViewDesktop();void 0===t||"GridView"===t?this.changeView():r.changeView()}},filterView:function(e){t.filterView(e.filter),S.updateGrid(e.filter)},duplicateChangeRequest:function(){var e={commandInfo:{type:"Change Request",facet:"My Change Requests",action:"CR>My Change Requests>Duplicate CR"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=[],i={id:S.ChgCRlayoutModel.getSelectedNodes()[0].options.grid.id,type:S.ChgCRlayoutModel.getSelectedNodes()[0].options.grid.type,policy:S.ChgCRlayoutModel.getSelectedNodes()[0].options.grid.policy,title:S.ChgCRlayoutModel.getSelectedNodes()[0].options.grid.title};t.push(i),n.duplicateChangeRequestCR(t).then((function(e){if(S.params&&S.params.filter&&"activeCR"==S.params.filter){var t=e.data[0].id;S.loadRealTimeCRDataPromise("activeCR").then((function(e){var i=[];if(e&&e.processedCRList){var n=e.processedCRList;for(let e=0;e<n.length;e++)if(n[e].id==t){i.push(n[e]);break}i.length>0&&S.ChgCRDataGridModel.loadChangeRequestData(S.ChgCRDataGridModel.treeDocument,i,"true")}}))}if(e.data[0]["warn report"]){const t=e.data[0]["warn report"];for(var i="",n=0;n<t.length;n++)i=i+t[n].message+"<br/>";_.warn(h.CHG_GOV_Change_Request_Duplicate_Message+e.data[0].name+"<br/>"+h.CHG_GOV_Error_Duplicate_Message+"<br/>"+i)}else _.success(h.CHG_GOV_Change_Request_Duplicate_Message+e.data[0].name)}))},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"crSummaryEmpty"},(function(e){r.showEmptyView(),S.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_NoChgRequest})),e._modelEvents.subscribe({event:"crSummaryNotEmpty"},(function(e){r.hideEmptyView()})),m.unsubscribe(`${e.options.id}:${widget.id}`),m.subscribe(`${e.options.id}:${widget.id}`,(function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.treeDocument),e._cleanBIFilterProxy();let t={data:{roots:that.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,that.treeDocument)}))})),m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,(function(e){S.ChgCRDataGridModel.filterView(e)})),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,(function(e){S.ChgCRDataGridModel.enableColorizeView(e)})),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(e){S.ChgCRDataGridModel.disableColorizeView(e)})),m.unsubscribe("updateRouteContent-"+widget.id),m.subscribe("updateRouteContent-"+widget.id,(function(e){if("true"==c.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=b.getApprovalStatusValue(e);var t=S.ChgCRDataGridModel.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach((e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS?n.maturity_NLS:n.maturityNLS,maturityWithBadge:n.maturity_NLS?n.maturity_NLS:n.maturityNLS}})}))}}))},handleForMaturityUpdate:function(e){if(e){let t=JSON.parse(e),i=S.ChgCRlayoutModel.getSelectedNodes();I.getHandleForMaturityUpdate(t,i),S.treeDocument.prepareUpdate(),I.getUpdatedApprovalStatusColumn(t,i).then((function(){S.treeDocument.pushUpdate()}))}},handleForApplicabilityUpdate:async function(e){if(e&&S.ChgCRDataGridModel){let t=S.ChgCRDataGridModel.treeDocument.getSelectedNodes(),i=JSON.parse(e);I.handleForApplicabilityUpdateEvent(t,i),S.treeDocument.prepareUpdate(),S.treeDocument.pushUpdate()}}};return S})),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridModel","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridView","DS/Controls/Button","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","require","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C){"use strict";var f={createMembersNewTab:function(e){console.log("In teh new view");var t=this;t.view=e;var i={};(i=UWA.merge(i,e)).columns=n.getColumns();let a=e.contextDetails.id;t.id=a,f.objectType=e.contextDetails.isKindOfType;let s=f.objectType,r=new o(e.contextDetails);this.membersDataGridModel=r,f.businessSubstateIR=r.businessSubstateIR,i.treeDocument=r.createTreeDocument(),r.setFilterModel(r.getFilterModel()),r.registerCustomFilter(),t.membersTreeModel=i.treeDocument,t.subscribeToModelEvents(i.treeDocument);var l=new c(i);t.membersDataGridView=l,t._customizeColumnRendering(i.columns);t.membersDataGridView.membersDatagrid;return t.loadMembersData(i.treeDocument,a,s)},loadMembersData:async function(e,t,i){try{const n=await g.getMembersByObjectType(t,i);console.log("Member list: "+n);let o=l.processMembersList(n);if(this.processMembersList=o,0==o.length){let e=document.getElementById("caMembers");e&&u.isMasked(e)&&u.unmask(e),this._modelEvents.publish({event:"showEmpty-datagrid",data:gridoption})}this.membersDataGridModel.loadMembersData(e,o,i)}catch(e){let t=document.getElementById("caMembers");return t&&u.isMasked(t)&&u.unmask(t),Promise.reject(e)}},_customizeColumnRendering:function(e){var t=this;e.forEach((function(e){switch(e.dataIndex){case"tree":e.onCellRequest=t.rendering.title.bind(t);break;case"user":default:break;case"ContextualMenuColumn":e.hasCellValue=t.rendering.contextualMenuColumn.bind(t)}}))},rendering:{title:function(e){var t="";if(e.nodeModel.options.grid.isRoot){var i=this.getRoleTranslations(),n=e.nodeModel.options.grid.nonNLSRole,o=e.nodeModel.getNumberOfChildren();n&&i[n]&&(t=UWA.createElement("span",{class:"member-title",html:i[n]+" ("+o+")"}))}else t=this.membersDataGridModel.createCustomPersonNameField(e.nodeModel);t.computeContentSize=function(){return this.getChildren().length>0&&this.getChildren()[1]?this.getChildren()[1].getDimensions().width+50:this.getDimensions().width+50},e.cellView.setReusableContent(t)},contextualMenuColumn:function(e){let t=!0;return t=!e.nodeModel.options.grid.isRoot,t}},getRoleTranslations:function(){return{owner:e.CHG_GOV_Members_DataGrid_Owner,contributor:e.CHG_GOV_Members_DataGrid_Assignee,approver:e.CHG_GOV_Members_DataGrid_Approver,follower:e.CHG_GOV_Members_DataGrid_InformedUser,coordinator:e.CHG_GOV_Members_DataGrid_ChangeCoordinators,changeCoordinator:e.CHG_GOV_DataGrid_Column_ChangeCoordinator}},changeView:function(e){n.changeView("GridView")},addNodesInLayout:function(e){f.membersDataGridModel.addNodesInLayoutModel(this.membersTreeModel,e)},subscribeToModelEvents:function(e){var t=this;m.unsubscribe(`caMembers:${widget.id}`),m.subscribe(`caMembers:${widget.id}`,(function(){t.membersDataGridView._modelEvents.publish({event:"update_object_select",data:{node:t.membersDataGridView.options.treeDocument._getTrueRoot(),contextID:t.membersDataGridView.options.contextDetails.id,contextType:t.membersDataGridView.options.contextDetails.isKindOfType,isNodeAdded:!1}})})),m.unsubscribe(`irMembers:${widget.id}`),m.subscribe(`irMembers:${widget.id}`,(function(){t.membersDataGridView._modelEvents.publish({event:"update_object_select",data:{node:t.membersDataGridView.options.treeDocument._getTrueRoot(),contextID:t.membersDataGridView.options.contextDetails.id,contextType:t.membersDataGridView.options.contextDetails.isKindOfType,isNodeAdded:!1}})}))},handleAccessBitUpdate:function(e){let t=e.accessBits;f.accessBitSetCoordinator=t["Manage Coordinator"]||t.SetCoordinator||"false",f.addFollowerAccessBit=t["Manage Follower"]||t.AddFollower||t.ManageFollowers||"false",f.addContributorAccessBit=t["Manage Assignee"]||t.AddContributor||t.ManageAssignees||"false",f.addReviewerAccessBit=t["Manage Route Templates"]||t.AddReviewer||t.ManageRouteTemplates||"false",f.swapCoordinatorAccessBit=t.SwapCoordinator||"false",f.unSetCoordinatorAccessBit=t.UnsetCoordinator||"false",f.removeContributor=t.RemoveContributor||"false",f.removeFollower=t.RemoveFollower||"false",f.removeReviewer=t.RemoveReviewer||"false"},globalSubscribeForMembersTeamView:function(){a.addObserver("ChgMembersNewDataGridLayout","CO-AccessBit-Update",f.handleAccessBitUpdate)},updatePersonRole:function(t,i,o,a,s){if(i.role.includes("Coordinator")&&"DISCONNECT"===i.Coordinator&&o&&"Define"!=o)return console.log("Error: The Coordinator role cannot be removed."),void d.warn(e.CHG_Warn_Member_Remove_Owner_Coordinator);if(console.log("updatePersonRole"),0==f.membersDataGridModel.treeDocument.getSelectedNodes().length);else{var r={person:[],group:[]},l={person:[],routetemplate:""},c={person:[],group:[]},p={person:[],group:[]};let e=i.role,t=Array.isArray(e)?i[e[0]]:i[e],o="",s="",d="",g=this.objectType;"Route Template"!=i.currentObjType&&"Group"!=i.currentObjType||(o=f.membersDataGridModel.treeDocument.getSelectedNodes()[0].options.grid.id),"Person"==i.currentObjType&&(s=f.membersDataGridModel.treeDocument.getSelectedNodes()[0].options.grid.userId),d=f.membersDataGridModel.treeDocument.getSelectedNodes()[0].options.grid.fullName;f.membersDataGridModel.treeDocument.getChildren();(e.indexOf("Coordinator")>=0||e.indexOf("Change Coordinator")>=0)&&("Person"==i.currentObjType?p.person.push(s):"Group"==i.currentObjType&&p.group.push(o)),e.indexOf("contributor")>=0&&("Person"==i.currentObjType?r.person.push(s):"Group"==i.currentObjType&&r.group.push(o)),e.indexOf("follower")>=0&&("Person"==i.currentObjType?c.person.push(s):"Group"==i.currentObjType&&c.group.push(o)),e.indexOf("approver")>=0&&("Person"==i.currentObjType?l.person.push(s):"Route Template"==i.currentObjType&&(l.routetemplate=o));var u=n.makeUpdateMemberJson(t,r,l,c,p,g);if("DISCONNECT"===t&&!0===i.showConfirmation)f.showConfirmationDialog(u,d,a);else{const e="CONNECT"!==t;f.updateTreeDocumentMembersWithRole(u,e,i.role)}}},isChangeCoordinatorExists:!1,refreshFlag:!1,updateTreeDocumentMembersWithRole:function(t,i,o){var a=this;let s=a.objectType;if(""!=t){let r=f.id;g.updateMembers(s,r,t).then((function(t){let r=f.membersDataGridModel.treeDocument,l=r.getSelectedNodes()[0];if(!0===i){const e=r.getRoots();for(const t of e){const e=t.getChildren();if(e){for(const i of e)if(i.options.grid.id===l.options.grid.id){let e=t.options.grid.nonNLSRole.toLowerCase();if("changecoordinator"==e&&(e="coordinator"),e===o.toLowerCase()){if(t.removeChild(i),l.options.grid.roles=l.options.grid.roles.filter((e=>e!==o)),console.log(`Removed ${i} from parent with role: ${e}`),"ChangeAction"===s&&a.updateApproverType(e,t,i),"InvestigationRequest"==s&&"coordinator"==e){let e={isChangeCoordinatorExists:!0};a.handleInvestigationMaturityUpdate(e)}break}}}else console.log("No child nodes found for parent")}}else if(""!=o&&1==t.success){r.prepareUpdate();let i=l.options.grid.role,c=n.getRoleNLSValue(i),p=","+o,u=n.getRoleNLSValue(o),h=u+",";if(u=", "+u,t.data.length>0){let e=c.concat(u);l.options.description=e,l.setAttribute("roleList",e),l.options.grid.role=i.concat(p),l.options.grid.roles.push(o),"approver"==o&&(g.reviewerType.typeOfReviewer="Person")}else{let e=c.replace(u,"");e=e.replace(h,""),l.setAttribute("roleList",e),l.options.description=e,l.options.grid.role=i.split(",").filter((e=>e!=p.replace(/,/g,""))).join(",");let t=l.options.grid.roles.filter((function(e,t,i){return e!=o}));if(l.options.grid.roles=t,"approver"==o){let e=r.getChildren(),t=!1;for(var d=0;d<e.length;d++){if(e[d].options.grid.role.indexOf("approver")>=0){t=!0;break}}0==t&&(g.reviewerType.typeOfReviewer="")}}t.data.forEach((function(e){console.log(e),e.role=o,e.fullName=e.name}));let m=[];if(m.push(l.options.grid),f.addNodesInLayout(m),r.pushUpdate(),"InvestigationRequest"==s){let t={};t.isChangeCoordinatorExists=u.contains(e.CHG_GOV_Members_DataGrid_IR_Coordinator),a.handleInvestigationMaturityUpdate(t)}}}))}},updateApproverType(e,t,i){if("approver"===e&&"Person"===i._options.grid.type){const e=t.getChildren?.();0==(Array.isArray(e)?e.filter((e=>"Person"===e._options.grid.type)):[]).length&&(g.reviewerType.typeOfReviewer="")}},showConfirmationDialog:function(e,n,o){var a,s=new i({}),r=this.unSetCoordinatorAccessBit,l=document.getElementById("outer-member-grid-div");s.inject(l),a=Array.isArray(e)&&e.length>1||1==o?C.CHG_Member_Remove_Title:C.CHG_Member_Remove_Title+` -  ${n}`,new t({immersiveFrame:s,title:a,content:C.CHG_Member_Remove_Error_Message,activeFlag:!1,modelFlag:!0,width:500,buttons:{No:new p({label:C.CHG_Member_Remove_Modal_CancelButton,onClick:function(e){console.log("Cancel clicked"),s.destroy(),f.unmaskAndDestroy()}}),Yes:new p({label:C.CHG_Member_Remove_Modal_RemoveButton,onClick:function(e){s.destroy(),f.membersDataGridModel.removeChildren(r,f.businessSubstateIR)}})}}).addEventListener("close",(function(e){s&&s.destroy(),f.unmaskAndDestroy()}))},unmaskAndDestroy:function(){let e=document.getElementById("caMembers");e&&u.isMasked(e)&&u.unmask(e)},removeHandler:function(){let e=f.objectType,t=h("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var i={};if(i.commandInfo={type:e,facet:"Members",action:e+">Members>Remove"},t.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),0!=f.membersDataGridModel.treeDocument.getSelectedNodes().length){let e=document.getElementById("caMembers");e&&u.mask(e)}let n=f.membersDataGridModel.treeDocument.getSelectedNodes(),o=n.map((e=>e.options.grid)),a=n.map((e=>e.options.grid.fullName));f.showConfirmationDialog(o,a,!0)},handleObjectSelectionUpdate:function(e){e.count>0?f.membersDataGridView.toolbar.updateNodeModel("remove",{visibleFlag:!0}):f.membersDataGridView.toolbar.updateNodeModel("remove",{visibleFlag:!1})},handleInvestigationMaturityUpdate:function(e){if(e.isChangeCoordinatorExists){f.isChangeCoordinatorExists=!0,h("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout").treeDocument.getAllDescendants().length>0&&(f.refreshFlag=!0,m.publish("idcard-header-update-substatematurity",{}))}}};return f.globalSubscribeForMembersTeamView(),f})),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil",["UWA/Core","DS/CoreEvents/ModelEvents","DS/Controls/Button","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownController","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","require","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesController"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D){"use strict";return{showRMBMenuOnGrid:async function(e,t){let i=[];try{"true"==c.getGlobalVariable().CHG_APPROVAL_COLUMN&&t.cellInfos.nodeModel.options.grid.approvalStatusModel&&await d.getColumnApprovalStatusMenu(t.cellInfos.nodeModel.options.grid.approvalStatusModel).then((function(e){i.push(e)}))}catch(e){console.error(e)}return new Promise((function(n,a){let s="false",r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const l=r.map((e=>e.options.grid.id));r.length>1&&(s="true");let d=[];d.push(u.createPropertyPushItem(l)),d.push(o.getRelationalExplorerMenu(e,t));let p={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(p);let g=f("DS/ENOChgServices/scripts/services/ChgDataService"),m=null,C=f("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(p),v=[],D=document.getElementById("outer-co-div");v.push(C),"false"==s&&(m=g.getChangeActionUserAccess(t.cellInfos.nodeModel.options.grid.id),v.push(m)),Promise.all(v).then((function(a){if(a[0]&&d.push(a[0]),d.push(o.getMaturityMenu(t)),d.push(h.getCopyLink(r)),"false"==s?(a[1]&&"true"==a[1].data[0].Transfer&&d.push(o.getTransferMenu(e,t)),"true"==a[1].data[0].Delete&&d.push(o.getDeleteMenu(e,t,D))):(d.push(o.getTransferMenu(e,t)),d.push(o.getDeleteMenu(e,t,D))),"true"==c.getGlobalVariable().CHG_APPROVAL_COLUMN&&i.length>0)for(let e=0;e<i[0].length;e++)d.push(i[0][e]);n(d)}))}))},createMembersNewTab:function(t){c.getGlobalVariable().ECM_EnableAddMemberGenericComponent;let i=e.createElement("div");return i.classList.add("chg-member-container"),t.target=i,console.log("calling new members view"),v.createMembersNewTab(t),i},createProposedChangeTab:function(t){let i=e.createElement("div");return i.classList.add("chg-proposed-container"),t.target=i,a.createProposedChangesView(t),i},createFlowdownTab:function(t){let i=e.createElement("div");i.classList.add("chg-flowdown-container");let n={};return n=e.merge(n,t),n.fdTarget=i,n.caid=t.id,i.empty(),new s(n).createFlowdownView(),i},createRealizedChangeTab:function(t){let i={};i=e.merge(i,t);let n=e.createElement("div");n.classList.add("chg-realized-container"),i.target=n;let o=m.getUserPreference(C.keys.viewKeys.REALIZED_DEF_VIEW),a=!1,s=c.getGlobalVariable();return a=!(!s.isNative||1!=s.Enable_TileView_Native)||widget.getPreference("tileViewPreference").value,(i.cmd&&"LTV"===i.cmd||o&&"LTV"===o)&&a?r.createRealizedChangesView(i):new D(i).createRealizedChangesView(),n},createApprovalsTab:function(t,i){let n=e.createElement("div"),o=new e.Element("div"),a=e.createElement("div");a.classList.add("chg-Approval-container"),o.classList.add("chg-Approval-Header-container");let s=e.createElement("div",{id:"chg-Task-container"});return n.appendChild(a),t.target=a,t.targetHeader=o,t.taskContainer=s,l.createApprovalsView(t),a},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:organizationResponsible","ds6w:modified","ds6w:created"];for(let t of n)e.delete(t);return e.forEach(((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)})),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:g.getGetCellValueFunction(i,t)}}}})),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewFeaturesUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","require","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices"],(function(e,t,i,n,o,a,s,r){"use strict";var l={showRMBMenuOnGrid:async function(e,t,i){var a=this,s=e.objectType,d=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),c=d[0].options.grid.roles,p=d.length>1?"true":"false",u={currentObjType:d[0].options.grid.type,changeObjectType:s,Coordinator:c.indexOf("Coordinator")>=0?"DISCONNECT":"CONNECT",contributor:c.indexOf("contributor")>=0?"DISCONNECT":"CONNECT",approver:c.indexOf("approver")>=0?"DISCONNECT":"CONNECT",follower:c.indexOf("follower")>=0?"DISCONNECT":"CONNECT",owner:c.indexOf("owner")>=0?"DISCONNECT":"CONNECT"};u.role=u.role||[],d[0].options.grid.roles&&d[0].options.grid.roles.includes("owner")&&u.role.push("owner");var g="";"false"===p&&(g=o("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"));var h=[],m=t.cellInfos.nodeModel.options.grid.id,C=t.cellInfos.nodeModel.options.grid.type,f=t.cellInfos.nodeModel.options.grid.name,v=t.cellInfos.nodeModel.options.grid.displayType;"Group"===C&&(C="foaf:Group",f=t.cellInfos.nodeModel.options.grid.fullName,v=t.cellInfos.nodeModel.options.grid.type);var D={objectId:m,objectType:C,displayName:f,displayType:v,facetName:"dependency"},I=[],w=n.openWith(D);try{I.push(await w)}catch(e){console.error(e)}if("Person"===u.currentObjType){const e=("ChangeRequest"===u.changeObjectType||"ChangeOrder"===u.changeObjectType)&&"true"===g.swapCoordinatorAccessBit?"SwapCoordinator":"SetCoordinator";"true"!==g.accessBitSetCoordinator&&"true"!==g.swapCoordinatorAccessBit&&"DISCONNECT"!==u.Coordinator||h.push(l.getChangeCoordinatorMenu(a,t,u,i,e)),"true"===g.addContributorAccessBit&&h.push(l.getContributorMenu(a,t,u)),"InvestigationRequest"!==s&&"ChangeRequest"!==s&&"ChangeOrder"!==s&&(""!=r.reviewerType.typeOfReviewer&&"Person"!==r.reviewerType.typeOfReviewer||"true"!=g.addReviewerAccessBit||h.push(l.getReviewerMenu(a,t,u))),"true"===g.addFollowerAccessBit&&h.push(l.getFollowerMenu(a,t,u))}else if("Group"===u.currentObjType){const e="ChangeRequest"===u.changeObjectType,n=e&&"true"===g.swapCoordinatorAccessBit?"SwapCoordinator":"SetCoordinator";!e||"true"!==g.accessBitSetCoordinator&&"true"!==g.swapCoordinatorAccessBit&&"DISCONNECT"!==u.Coordinator||h.push(l.getChangeCoordinatorMenu(a,t,u,i,n)),"true"===g.addContributorAccessBit&&h.push(l.getContributorMenu(a,t,u)),"true"===g.addFollowerAccessBit&&h.push(l.getFollowerMenu(a,t,u))}return h.push(l.getDeleteMenu(a,t,u,i,p)),I[0]&&h.push(I[0]),h},getContributorMenu:function(t,i,n){var a={type:"CheckItem",title:e.CHG_Member_Menu_Assignees,action:{callback:function(){var e=o("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout");console.log("contributor : "+n.contributor),n.role="contributor",e.updatePersonRole(i.cellInfos,n)}}};return"DISCONNECT"==n.contributor&&(a.state="selected"),a},getReviewerMenu:function(t,i,n){var a={type:"CheckItem",title:e.CHG_Member_Menu_Approvers,action:{callback:function(){var e=o("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout");console.log("approver : "+n.approver),n.role="approver",e.updatePersonRole(i.cellInfos,n)}}};return"DISCONNECT"==n.approver&&(a.state="selected"),a},getFollowerMenu:function(t,i,n){var o={type:"CheckItem",title:e.CHG_Member_Menu_Follower,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(e){console.log("follower : "+n.follower),n.role="follower",e.updatePersonRole(i.cellInfos,n)}))}}};return"DISCONNECT"==n.follower&&(o.state="selected"),o},getDeleteMenu:function(t,i,n,o,a){var r={type:"PushItem",title:e.CHG_Member_Menu_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(){if("DISCONNECT"===n.Coordinator&&"InvestigationRequest"===n.changeObjectType&&o&&"Define"!==o){if(console.log("Error: The Coordinator role cannot be removed in this business state."),"DISCONNECT"!=n.follower&&"DISCONNECT"!=n.contributor&&s.warn(e.CHG_Warn_Member_Remove_Owner_Coordinator),"DISCONNECT"!==n.contributor&&"DISCONNECT"!==n.follower||!(n.role.length>0)||"owner"!==n.role[0])return;n.role=[]}require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(e){console.log("remove "),"DISCONNECT"==n.Coordinator&&"InvestigationRequest"===n.changeObjectType&&o&&"Define"!==o||"DISCONNECT"==n.Coordinator&&n.role.push("Coordinator"),"DISCONNECT"==n.follower&&n.role.push("follower"),"DISCONNECT"==n.approver&&n.role.push("approver"),"DISCONNECT"==n.contributor&&n.role.push("contributor"),n.showConfirmation=!0;let t=!1;"true"==a&&(t=!0),e.updatePersonRole(i.cellInfos,n,o,t,!0)}))}}};return r},getChangeCoordinatorMenu:function(t,i,n,o){if("InvestigationRequest"==n.changeObjectType)var a={type:"CheckItem",title:e.CHG_GOV_Members_DataGrid_IR_Coordinator,action:{callback:function(){if("DISCONNECT"===n.Coordinator&&"Define"!=o)return console.log("Error: The Coordinator role cannot be removed."),void s.warn(e.CHG_Warn_Member_Remove_Owner_Coordinator);console.log("Callback is executed!");require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(e){console.log("Coordinator: "+n.Coordinator),n.role="Coordinator",e.updatePersonRole(i.cellInfos,n,o),console.log("updatePersonRole called")}))}}};else a={type:"CheckItem",title:e.CHG_Member_Menu_Change_Coordinator,action:{callback:function(){console.log("Callback is executed!");require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(e){console.log("Coordinator: "+n.Coordinator),n.role="Coordinator",e.updatePersonRole(i.cellInfos,n),console.log("updatePersonRole called")}))}}};return"DISCONNECT"==n.Coordinator&&(a.state="selected",console.log('Menu state set to "selected"')),console.log("Menu state:",a.state),a}};return l})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgChangeActionDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";return e.extend({init:function(e){this._parent(e),this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}},this._modelEvents=null,"undefined"!=e&&"undefined"!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.caDatagridView=""},loadCustomColumns:function(){let e=f.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){let t=this.processColumns(),g=this;var e={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCASummaryGrid",useWidgetPreferencesFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(g,e).then((function(e){return e}));e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){s.readyDragContent(e,t)},onDragStartCell:function(e,t){s.readyDragContent(e,t)}};e=UWA.merge(e,this.options),this.caDatagrid=new n(e),this.caDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){C.onCustomViewsSave(e,t,g.options.custom_view_options)},this.caTilesView=new u({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useWidgetPreferencesFlag:!0,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){s.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});let m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(g,e).then((function(e){return e}))}};this.caTilesView.onContextualEvent=m;let f={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:l.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:l.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},v={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}},D={expandInput:{stdTemplate:"expandInputtemplate"}},I={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.caDatagrid.getTypeRepresentationFactory().registerTypeTemplates(I),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(D),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),a.toolbar=this.caDatagrid.setToolbar(a.writetoolbarDefination(this.options)),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(I),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(D),g.toolbar.addEventListener("onReady",(function(e){let t=g.toolbar.getNodeModelByID("addNewBlankCAId");t&&t._associatedView.registerkeyDownCallback(p.createBlankChangeOrder)})),this.caDatagrid.addEventListener("allCellsRendered",(function(){g.caDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.caDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.caDatagrid.getTreeDocument().getSelectedNodes().length}}]),g.caTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.caTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.caTilesView.getTreeDocument().getSelectedNodes().length}}])})),g.caDatagrid.addEventListener(i.POINTERHIT,(function(e,t){g.onItemClick(e,t)})),g.caDatagrid.getTreeDocument().getXSO().onAdd((function(e){g.duplicateCmdController(e),g.caDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.caDatagrid.getTreeDocument().getSelectedNodes().length}}),g.caTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.caDatagrid.getTreeDocument().getSelectedNodes().length}}),g._modelEvents.publish({event:"ca-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})})),g.caDatagrid.getTreeDocument().getXSO().onRemove((function(e){g.duplicateCmdController(e),g.caDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.caTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?g._modelEvents.publish({event:"ca-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):g._modelEvents.publish({event:"ca-DataGrid-on-unselect",data:{model:e,context:e},context:e})})),g.caTilesView.addEventListener(i.POINTERHIT,(function(e,t){g.onItemClick(e,t)})),this.onItemClick=C.debouncingHandler((function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount)t.nodeModel.select(!0),g._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel});else if(t&&2==t.columnID){var i={};i.cellInfos=t,C.executeMaturity(i)}}),500),this.caDatagridView=UWA.createElement("div",{id:"outer-ca-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-ca-div"});let w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-ca-div"});this.toolbar.inject(w);let _=UWA.createElement("div",{class:"content-ca-div cagridView showView"}),b=UWA.createElement("div",{class:"catileView hideView"}),S=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_DataGrid_PlaceHolder_NoChgAction}).inject(S),this.caDatagrid.inject(_),this.caTilesView.inject(b),S.inject(b),this.caDatagridView.addContent(w),this.caDatagridView.addContent(_),this.caDatagridView.addContent(b),this.caDatagridView.inject(this.options.target),this.caDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.unsubscribe({event:"ca-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"ca-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"ca-DataGrid-on-search"},(function(e){if("false"==h.getGlobalVariable().slidePanelTagger){var t=e.query;if(t){var i=g.caDatagrid.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){if(e.options.grid.title){var i=e.options.grid.title.toLowerCase().contains(t.toLowerCase())||e.options.grid.name.toLowerCase().contains(t.toLowerCase());e.isVisible()&&!i?e.hide():!e.isVisible()&&i&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"ca-DataGrid-on-reset-search"},(function(e){var t=g.caDatagrid.getTreeDocument();t.withTransactionUpdate((function(){t.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.options.custom_view_options.dgvHandle=this.caDatagrid,this.options.custom_view_options.ootb_columns=[...t],this.options.custom_view_options.dgvDiv=_,this.loader=(new o).inject(this.options.target);let y=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];C.registerCustomEventsOnDGV(y,this.caDatagrid,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.caDatagrid.reapplySortModel()},duplicateCmdController:function(e){let t=this,i=e.getTreeDocument();i.getSelectedNodes()&&1===i.getSelectedNodes().length&&"Cancelled"!=i.getSelectedNodes()[0].options.grid.maturity?t.toolbar.updateNodeModel("duplicateCA",{disabled:!1}):t.toolbar.updateNodeModel("duplicateCA",{disabled:!0})},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",["UWA/Class","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgChangeActionDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/model/changeAction/ChgCADataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgErrors","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S){"use strict";let y={loadRealTimeCADataPromise:function(e){return new Promise((function(t,i){o.getTimestamp().then((function(n){var s=a.processTimestampData(n);o.getConfiguredChangeActionList({indexed:!1,simplifiedJSON:!0,timestamp:s,filter:e}).then((function(e){a.processedCASummaryList(e,y.extns).then((function(i){t({realTimeData:e,processedCAList:i})}))}),(function(e){i(e)}))}),(function(e){i(e)}))}))},loadIndexedCADataPromise:function(e){return new Promise((function(t,i){o.getConfiguredChangeActionList(e).then((function(e){a.processedCASummaryList(e,y.extns).then((function(i){t({CASummaryList:e,processedCAList:i})}),(function(e){i(e)}))}),(function(e){i(e)}))}))},postProcessing:function(){var e=this;0==e.treeDocument.getChildren().length?e.treeDocument._modelEvents.publish({event:"caSummaryEmpty"}):e.treeDocument._modelEvents.publish({event:"caSummaryNotEmpty"}),e.globalSubscribeCOSummaryUpdateFromPropertyPanel(),e.globalSubscribeForTransferFromCOSummaryView(),e.globalSubscribeForCAGroupCreation(),e.globalSubscribeForMaturityUpdate(),e.globalSubscribeForApplicabilityUpdate(),e.caGridView.loadCustomColumns(),b.hideLoader(e.options.target,e.caGridView.loader)},updateTagger:function(){var e=this;p.getGlobalVariable().isNative||"false"!=p.getGlobalVariable().slidePanelTagger||require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)}))},createChangeActionView:async function(e){var o=this;e.target.setStyles({position:"relative"}),this._pathChangeActionSummary=[g._KEY,g._VIEWS_PREFERENCES,g._LIST_VIEW,g._FILTERVIEW];var s=u.getFilter(this._pathChangeActionSummary),r={};r=UWA.merge(r,e),this.options=r,y.extns=await _.getExtensions("Change Action"),r.columns=i.getColumns(),o.ChgCADataGridModel=new n,o.treeDocument=r.treeDocument=o.ChgCADataGridModel.createTreeDocument(),o.ChgCAlayoutModel=o.treeDocument,o.ChgCADataGridModel.registerCustomFilter();var l=a.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(l),o.caGridView=new t(r),o.caGridView.render(),b.showLoader(r.target,o.caGridView.loader),o.subscribeToModelEvents(o.treeDocument);var d="";"inactive"===s?d="inactiveCA":(d="activeCA",u.updateFilter(o._pathChangeActionSummary,"activeCA")),o.updateGrid(d)},changeView:function(){i.changeView("GridView")},refreshLayout:function(e){let t=this.ChgCAlayoutModel;this.ChgCADataGridModel.updateNodeIndexed(t,e),this.caGridView.caDatagrid.ensureNodeModelVisible(this.ChgCAlayoutModel.getChildren()[0],!1)},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.caGridView.caDatagrid.placeholder=f.CHG_GOV_DataGrid_PlaceHolder_FetchChgAction,this.updateTagger()},updateGrid:async function(e){var t=this,i=s.toolbar.getNodeModelByID("filter");if("activeCA"==e&&(i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected"),t.preUpdateProcessing(),"inactiveCA"!=e){var n=await t.loadRealTimeCADataPromise(e);b.fetchMaturityStateCSS(n.processedCAList),t.ChgCADataGridModel.loadChangeActionData(t.treeDocument,n.processedCAList)}t.params.filter=e,t.loadIndexedCADataPromise(t.params).then((async function(e){b.fetchMaturityStateCSS(e.processedCAList),t.ChgCADataGridModel.loadIndexedChangeActions(t.treeDocument,e.processedCAList),t.currentPage=parseInt(e.CASummaryList.summary["Current Page"]),t.totalPages=parseInt(e.CASummaryList.summary["Total Pages"]),t.caGridView.caDatagrid.placeholder=f.CHG_GOV_DataGrid_PlaceHolder_NoChgAction,t.currentPage<t.totalPages?(t.updateTagger(),t.caGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.caGridView.caDatagrid.onInfiniteScroll((async function(e){t.getNextPageChangeActions("DGV")})),t.caGridView.caTilesView.onInfiniteScroll((async function(e){t.getNextPageChangeActions("RTV")}))):(t.updateTagger(),t.caGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())}))},getNextPageChangeActions:async function(e){var t=this;if(t.currentPage<t.totalPages){b.showLoader(t.options.target,t.caGridView.loader),t.params.pageNumber++,t.currentPage++;let i=await t.loadIndexedCADataPromise(t.params);t.ChgCADataGridModel.loadIndexedChangeActions(t.treeDocument,i.processedCAList),t.updateTagger(),t.caGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),"DGV"===e?t.caGridView.caDatagrid.infiniteScrollProcessDone():t.caGridView.caTilesView.infiniteScrollProcessDone()}},removeDataFromGrid:function(e,t){y.ChgCAlayoutModel.getChildren();for(let t=0;t<e.length;t++){let i=e[t];y.ChgCAlayoutModel.search({shouldStop:function(e){return e.options.grid.id===i&&(y.removingNode(e),!0)}}),0==y.ChgCAlayoutModel.getChildren().length&&y.ChgCAlayoutModel._modelEvents.publish({event:"caSummaryEmpty"})}},removingNode:function(e){this.ChgCAlayoutModel.removeRoot(e)},sortBySeverity:function(){s.sortingData.menu[1].fonticon.content=s.sortingData.menu[1].fonticon.content.replace(" icon-blue","");let e=y.caGridView,t=s.toolbar.getNodeModelByID("sorting");s.sortingData.menu[0].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(s.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.caDatagrid.sortModel=[{dataIndex:"severityNLS",sort:"asc"}]):(s.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.caDatagrid.sortModel=[{dataIndex:"severityNLS",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:s.sortingData}})},sortByMaturity:function(){s.sortingData.menu[0].fonticon.content=s.sortingData.menu[0].fonticon.content.replace(" icon-blue","");let e=y.caGridView,t=s.toolbar.getNodeModelByID("sorting");s.sortingData.menu[1].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(s.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.caDatagrid.sortModel=[{dataIndex:"maturityWithBadge",sort:"asc"}]):(s.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.caDatagrid.sortModel=[{dataIndex:"maturityWithBadge",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:s.sortingData}})},globalSubscribeCOSummaryUpdateFromPropertyPanel:function(){d.addObserver("ChgCADataGridLayout","CO-Properties-Update",this.handleForUpdatingFromPropertyPanel)},globalSubscribeForTransferFromCOSummaryView:function(){d.addObserver("ChgCADataGridLayout","ENOLC_MOVE_CMD_UPDATE",this.handleForCOSummaryTransfer)},globalSubscribeForCAGroupCreation:function(){d.addObserver("ChgCADataGridLayout","CA-Group-Update",this.handleForUpdatingGroup)},globalSubscribeForMaturityUpdate:function(){d.addObserver("ChgCADataGridLayout","Lifecycle.Modification",this.handleForMaturityUpdate)},globalSubscribeForApplicabilityUpdate:function(){d.addObserver("ChgCADataGridLayout","applicability:update:notification",this.handleForApplicabilityUpdate)},handleForUpdatingGroup:function(e){for(var t=y.ChgCAlayoutModel.getAllDescendants(),i=0;i<e.changeactions.length;i++)for(var n=e.changeactions[i].replace("pid:",""),o=0;o<t.length;o++)if(t[o].options.grid.id==n){var a=y.createCustoTooltipForGivenNode(t[o],e);t[o].updateOptions({grid:{"ds6w:changeActionGroup":e.title},customTooltip:a})}var s=document.getElementById("outer-ca-div");s&&D.unmask(s)},createDescForGivenNode:function(e,t){var i="",n="-";null!=e.options.grid.dueDate&&null!=e.options.grid.dueDate&&(n=e.options.grid.dueDate);i=e.options.grid.maturity;return"-"!=n&&(i=i+" | "+n),""!=t.title&&(i=i+" | "+t.title),i},createCustoTooltipForGivenNode:function(e,t){var i="-";null!=e.options.grid.dueDate&&null!=e.options.grid.dueDate&&(i=e.options.grid.dueDate);var n=f.CHG_GOV_DataGrid_Column_Title+": "+e.options.grid.title+"\n"+f.CHG_GOV_DataGrid_Column_Name+": "+e.options.grid.name+"\n"+f.CHG_GOV_DataGrid_Column_Severity+": "+e.options.grid.severity+"\n"+f.CHG_GOV_DataGrid_Column_Owner+": "+e.options.grid.owner+"\n"+f.CHG_GOV_DataGrid_Column_Maturity+": "+e.options.grid.maturity;return"-"!=i&&(n=n+"\n"+f.CHG_GOV_DataGrid_Column_DueDate+": "+i),""!=t.title&&(n=n+"\n"+f.CHG_GOV_DataGrid_Column_Group+": "+t.title),n},handleForUpdatingFromPropertyPanel:function(e){let t=y.ChgCAlayoutModel;t&&S.handlePropertiesOnUpdate(t,e)},handleForCOSummaryTransfer:function(e){let t,o=y.ChgCAlayoutModel.getAllDescendants(),a=[],s="",r="";Object.keys(e.data.attributes).forEach((function(t){let i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)}));for(let e=0;e<a.length;e++){t=a[e];for(let e=0;e<o.length;e++){if(o[e].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName&&(r=o[e].options.grid.name,s=t.newOwnerId,o[e].options.grid.owner=s,o[e].options.grid.ownerFullName=t.newOwnerFullName),t.newOrganization){let i=t.newOrganization;o[e].options.grid.orgnaizationNLS=i}if(t.newCollabSpace){let i=t.newCollabSpace;o[e].options.grid.collabspaceNLS=i}let a=t.newOwnerFullName,p=i.createCustomOwner(s,a);var l={};l.name=r,l.title=o[e].options.grid.title,l.severity=o[e].options.grid.severity,l.severityNLS=o[e].options.grid.severityNLS,l.ownerFullName=a,l.maturityNLS=o[e].options.grid.maturityNLS;var d=r+" | "+a,c=n.prototype.createCustomTooltip(l);o[e].updateOptions({grid:{collabspaceNLS:o[e].options.grid.collabspaceNLS,organizationNLS:o[e].options.grid.organizationNLS,owner:o[e].options.grid.owner,ownerFullName:o[e].options.grid.ownerFullName,co_Owner:p},customTooltip:c,subLabel:d})}}}},loadingViewPreference:function(){let e=w("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=r.MOBILE_CUTOFF){let t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(l.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{let t=e.getCASummaryViewDesktop();void 0===t||"GridView"===t?this.changeView():l.changeView()}},filterView:function(e){i.filterView(e.filter),y.updateGrid(e.filter)},duplicateChangeAction:function(){var e={commandInfo:{type:"Change Action",facet:"My Change Actions",action:"CA>My Change Actions>Duplicate CA"}};w("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=y.ChgCAlayoutModel.getSelectedNodes()[0].options.grid.id;o.duplicateChangeActionCA(t).then((function(e){if(y.params&&y.params.filter&&"activeCA"==y.params.filter){var t=e.data[0].id;y.loadRealTimeCADataPromise("activeCA").then((function(e){var i=[];if(e&&e.processedCAList){var n=e.processedCAList;for(let e=0;e<n.length;e++)if(n[e].id==t){i.push(n[e]);break}i.length>0&&y.ChgCADataGridModel.loadChangeActionData(y.ChgCADataGridModel.treeDocument,i,"true")}}))}I.success(f.CHG_GOV_Change_Action_Duplicate_Message+e.data[1].id)}))},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"caSummaryEmpty"},(function(e){l.showEmptyView(),y.caGridView.caDatagrid.placeholder=f.CHG_GOV_DataGrid_PlaceHolder_NoChgAction})),e._modelEvents.subscribe({event:"caSummaryNotEmpty"},(function(e){l.hideEmptyView()})),m.subscribe(`${e.options.id}:${widget.id}`,(function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.treeDocument),e._cleanBIFilterProxy();let t={data:{roots:that.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,that.treeDocument)}))})),m.subscribe(`${e.options.id} of ${widget.id}`,(function(e){y.ChgCADataGridModel.filterView(e)})),m.subscribe(`${e.options.id} colorize ${widget.id}`,(function(e){y.ChgCADataGridModel.enableColorizeView(e)})),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(e){y.ChgCADataGridModel.disableColorizeView(e)})),widget.updateRouteContentToken&&m.unsubscribe(widget.updateRouteContentToken),m.unsubscribe("updateRouteContent-"+widget.id),m.subscribe("updateRouteContent-"+widget.id,(function(e){if("true"==p.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=v.getApprovalStatusValue(e);var t=y.ChgCADataGridModel.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach((e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS?n.maturity_NLS:n.maturityNLS,maturityWithBadge:n.maturity_NLS?n.maturity_NLS:n.maturityNLS}})}))}}))},assignGroupToCAs:function(){var e=y.ChgCAlayoutModel.getSelectedNodes(),t=[];if(e.length>0)if(y.CheckGroupCreateCondition(e)){for(var i=0;i<e.length;i++){var n="pid:"+e[i].options.grid.id;t.push(n)}var o=e[0].options.grid.groupId;""==o||null==o?o="":o.indexOf("pid:")>-1||(o="pid:"+o);var a={facetName:"createGroupFromSummary",ChangeActionList:t,oldGroupId:o,oldGroupTitle:e[0].options.grid.group};require(["DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup"],(function(e){e.createGroup(a)}))}else I.error(f.CHG_GROUP_MULTI_CREATE_WARN);else I.error(f.CHG_GROUP_CREATE_WARN)},CheckGroupCreateCondition:function(e){for(var t=!0,i=e[0].options.grid.groupId,n=1;n<e.length;n++){if(i!=e[n].options.grid.groupId){t=!1;break}}return t},handleForMaturityUpdate:function(e){if(e){let t=JSON.parse(e),i=y.ChgCAlayoutModel.getSelectedNodes();b.getHandleForMaturityUpdate(t,i),y.treeDocument.prepareUpdate(),b.getUpdatedApprovalStatusColumn(t,i).then((function(){y.treeDocument.pushUpdate()}))}},handleForApplicabilityUpdate:async function(e){if(e&&y.ChgCADataGridModel){let t=y.ChgCADataGridModel.treeDocument.getSelectedNodes(),i=JSON.parse(e);b.handleForApplicabilityUpdateEvent(t,i),y.treeDocument.prepareUpdate(),y.treeDocument.pushUpdate()}}};return y})),define("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestFeaturesUtil","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y){"use strict";var E=Object.create(null);return E.getColumns=function(){let e=[];return e.push(b.getColumnDefinition({dataIndex:"titleTree"})),e.push(b.getColumnDefinition({dataIndex:"co_name"})),e.push(b.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(b.getColumnDefinition({dataIndex:"businessStateName"})),e.push(b.getColumnDefinition({dataIndex:"severityNLS"})),e.push(b.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(b.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(b.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(b.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(b.getColumnDefinition({dataIndex:"applicabilityNLS"})),e.push(b.getColumnDefinition({dataIndex:"modificationDate"})),e.push(b.getColumnDefinition({dataIndex:"creationDate"})),e},E.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:n.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},E.showNotification=function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=v,D.setNotificationManager(window.notifs)),a?D.inject(a):D.elements.container.isInjected()||D.inject(),window.notifs.addNotif(r)},E.getRelationalExplorerMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],(function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[];for(let e=0;e<t.length;e++){let i=t[e].options.grid.id;o.push(i)}e.openRelationalExplorer(n||o)}))}}}},E.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<t.length;e++)n.push(t[e].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],(function(e){e.launchTransferDialog(n)}))}}}},E.getOpen=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Welcome_Activity_Open_Change_Orders,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-open"},action:{callback:function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();console.log("Opening it");var n={};n.model=t[0].options.grid,u.navigate(o.ROUTE_IR_DETAILS,{id:n.model.id,name:n.model.name,title:n.model.title,nodeModel:n})}}}},E.getDeleteMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){let e=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),t=[];for(let i=0;i<e.length;i++){let n=e[i],o={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(o)}let o=require("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout");s.deleteNodes(t,n,o.removeDataFromGrid)}}}},E.changeView=function(t){if(widget.body.getDimensions().width<=o.MOBILE_CUTOFF?a.updateCASummaryViewMobile(t):a.updateCASummaryViewDesktop(t),"GridView"==t){this.currentView="Grid";let t=i.toolbar.getNodeModelByID("view");t&&"view-list"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected";let n=document.querySelector(".crgridView");n&&(n.removeClassName("hideView"),n.removeClassName("nonVisible"),n.addClassName("showView"));let o=document.querySelector(".crtileView");o&&(o.removeClassName("showView"),o.addClassName("hideView"))}else if("TileView"==t){this.currentView="Tile";let t=i.toolbar.getNodeModelByID("view");t&&"view-small-tile"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected";let n=document.querySelector(".crgridView");n&&(n.removeClassName("showView"),n.addClassName("hideView"));let o=document.querySelector(".crtileView");o&&(o.removeClassName("hideView"),o.addClassName("showView"))}},E.createCustomSeverity=function(e,t){let i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);let a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},E.createCustomOwner=function(e,t){let i="/api/user/getpicture/login/"+t+"/format/normal",o=n.getGlobalVariable().computeSwymUrl(i),a=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),l="";if(n.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{let e=r.getAvatarDetails(t);l=UWA.createElement("div",{html:e.avatarStr,class:"avatarIcon"}),l.style.setProperty("background",e.avatarColor)}l.inject(s);let d=UWA.createElement("span",{class:"userName",html:t});return s.inject(a),d.inject(a),a.outerHTML},E.createHeaderFieldsJSON=function(t){return new Promise((function(i,o){let a={"ds6w:project":[t.model.collabspace],"ds6w:organizationResponsible":[t.model.organization]};g.getNLSValuesPromise(a).then((function(o){let a=o["ds6w:organizationResponsible"][t.model.organization],s=o["ds6w:project"][t.model.collabspace],r={id:t.model.id,name:t.model.name,revision:t.model.revision,type:t.model.type,policy:t.model.policy,title:t.model.title,thumbnail:t.model.thumbnail,iconURL:t.model.iconURL,minified:!1,onHold:t.model.onHold,isKindOfType:t.model.isKindOfType,businessState:t.model.businessState,allowedTransitionStatesList:t.model.allowedTransitionStatesList,attributes:{layout:[["maturity","maturitySubstate","collabSpace"],["owner","orgnaization"]],mapping:{owner:{fieldNLS:e.CHG_GOV_DataGrid_Column_Owner,valueActual:t.model.owner,valueDisplay:t.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},collabSpace:{fieldNLS:e.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:t.model.collabspace,valueDisplay:s,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},maturity:{fieldNLS:e.CHG_GOV_DataGrid_Column_Maturity,valueActual:t.model.maturity,valueDisplay:t.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},maturitySubstate:{fieldNLS:e.CHG_IR_Maturity_Substate,valueActual:t.model.businessState,valueDisplay:t.model.businessState,transitionStates:t.model.allowedTransitionStatesList,showLoader:!1,displayWhenMinified:!0,editable:!0,allowContextualMenuFlag:!0,icon:"chevron-down wux-ui-3ds"},orgnaization:{fieldNLS:e.CHG_GOV_DataGrid_Column_Organization,valueActual:t.model.organization,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"}}},freeSpaces:[{type:"text",data:t.model.description}],menuItems:[{id:"chgRequestClarification",text:e.CHG_GOV_Investigation_Header_Menu_Request_Clarification,fonticon:"fonticon fonticon-reply",accessBit:"Cancel"},{id:"chgProvideClarification",text:e.CHG_GOV_Investigation_Header_Menu_Provide_Clarification,fonticon:"fonticon fonticon-forward",accessBit:"Cancel"},{id:"chgCancel",text:e.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"}]};"true"==n.getGlobalVariable().CHG_CR_DUPLICATE&&r.menuItems.push({id:"chgDuplicateCR",text:e.CHG_GOV_Change_Request_Duplicate_Header_Dropdown,fonticon:"fonticon fonticon-copy",accessBit:"Edit"}),i(r)}))}))},E.getIRTabs=function(e,t,i){this._pathRequestsDetails=[d._KEY,d._VIEWS_PREFERENCES,d._INVESTIGATION_REQUESTS_DETAILS];var n=l.getTab(this._pathRequestsDetails);let o="irAffectedItems";o=""==n?"irAffectedItems":n,console.log(n);let a=this.getIRMembersTab(e,t,o),s=this.getIRAffectedItemsTab(e,t,o,i),r=this.getIRAttachmentsTab(e,t,o,i),c=this.getIRIssuesTab(e,t,o,i);return[s,this.getIRDispositionsTab(e,t,o,i),a,r,c]},E.getIRMembersTab=(t,i,n)=>{let o=!1;return"irMembers"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Members,isSelected:o,value:"irMembers",index:2,content:t.createIRMembersTab(i),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}},E.getIRAffectedItemsTab=(t,i,n,o)=>{let a=!1;return"irAffectedItems"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_AffectedItems,isSelected:a,value:"irAffectedItems",index:0,content:t.createIRAffectedItemsTab(i,o),icon:{iconName:"change-request-attention",fontIconFamily:WUXManagedFontIcons.Font3DS}}},E.getIRAttachmentsTab=(t,i,n,o)=>{let a=!1;return"irAttachments"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Header_Attachments,isSelected:a,value:"irAttachments",index:3,content:t.createIRAttachmentsTab(i,o),icon:{iconName:"attach",fontIconFamily:WUXManagedFontIcons.Font3DS}}},E.getIRIssuesTab=(t,i,n,o)=>{let a=!1;return"irIssues"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Header_Issue,isSelected:a,value:"irIssues",index:4,content:t.createIRIssuesTab(i,o),icon:{iconName:"issue-type",fontIconFamily:WUXManagedFontIcons.Font3DS}}},E.getIRDispositionsTab=(t,i,n,o)=>{let a=!1;return"irDispositions"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Disposition_Tab,isSelected:a,value:"irDispositions",index:1,content:t.createIRDispositionsTab(i,o),icon:{iconName:"disposition",fontIconFamily:WUXManagedFontIcons.Font3DS}}},E.getInvestigationRequestModelForIDCard=function(e){return new Promise((function(t,i){c.getInvestigationRequestInfo(e).then((function(e){p.processedCRSummaryList(e).then((function(e){var i={model:e[0]};t(i)}))}))}))},E.displayObjectInfoInsideIDcard=function(e,t=!1){var i=this;c.getInvestigationRequestInfo(e).then((function(e){p.processedIRSummaryList(e).then((function(n){var a={model:n[0]};i.createHeaderFieldsJSON(a).then((function(i){var a={model:i};if(t)try{let t=y("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");(i=n[0]).dueDate=e.data[0].dueDate,t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:i})}catch(e){console.log(e)}u.navigate(o.ROUTE_IR_DETAILS,{id:i.id,name:i.name,title:i.title,nodeModel:a,mode:"outsideCall"},{reload:!0})}))}))}),(function(e){var t=document.getElementsByClassName("moduleWrapper")[0];return t&&_.isMasked(t)&&_.unmask(t),Promise.reject(e)}))},E.filterView=function(e){if("activeCR"==e)(t=i.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected";else if("inactiveCR"==e){var t;(t=i.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected"}},E})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil"],(function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout"],(function(e){e.irGridView.irDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout((function(){t.changeView("TileView")}),100)}))},showEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}})),define("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f){"use strict";return{showRMBMenuOnGrid:function(e,t,i,o){return new Promise((function(o,a){let s=g("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const d=r.map((e=>e.options.grid.id));let c={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType};if(!0===i){let i=[];i.push(l.createPropertyPushItem(d)),i.push(n.getRelationalExplorerMenu(e,t)),s.openWith(c).then((e=>{i.splice(2,0,e),o(i)}))}else{let i="false";r.length>1&&(i="true"),c.facetName="dependency";let a=[];a.push(l.createPropertyPushItem(d)),a.push(n.getRelationalExplorerMenu(e,t)),[].push(c);let p=g("DS/ENOChgServices/scripts/services/ChgDataService"),h=null,m=s.openWith(c),C=[],f=document.getElementById("outer-co-div");C.push(m),"false"==i&&(h=p.getInvestigationRequestUserAccess(t.cellInfos.nodeModel.options.grid.id),C.push(h)),Promise.all(C).then((function(s){s[0]&&a.push(s[0]),a.push(u.getCopyLink(r)),"false"==i?(s[1]&&"true"==s[1].data[0].dataelements["Transfer Ownership"]&&a.push(n.getTransferMenu(e,t)),"true"==s[1].data[0].dataelements.Delete&&a.push(n.getDeleteMenu(e,t,f)),a.unshift(n.getOpen(e,t))):(a.push(n.getTransferMenu(e,t)),a.push(n.getDeleteMenu(e,t,f))),o(a)}))}}))},createIRAffectedItemsTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-affectedItems-container"),t.target=n,a.createAffectedItemsView(t,i),n},createIRMembersTab:function(t){let i=e.createElement("div");return i.classList.add("chg-member-container"),t.target=i,m.createMembersNewTab(t),i},createIRAttachmentsTab:function(t,i){let n=e.createElement("div");n.classList.add("chg-member-container"),t.target=n,t.target.setContent("");var o={id:t.id,target:t.target,parentType:t.type,nodeModel:t.contextDetails.model,channel:i};return g("DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView").create(o,"false"==t.contextDetails.access.accessBits.Attachment),n},createIRIssuesTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-affectedItems-container"),t.target=n,C.createIssueView(t.target,t,i),n},createIRDispositionsTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-affectedItems-container"),t.target=n,f.createDispositionsView(t,i),n},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:organizationResponsible","ds6w:modified","ds6w:created"];for(let t of n)e.delete(t);return e.forEach(((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)})),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:p.getGetCellValueFunction(i,t)}}}})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgInvestigateRequestDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";return e.extend({init:function(e){this.options=e,this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}},this._modelEvents=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.irDatagridView=""},loadCustomColumns:function(){let e=f.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){let t=this.processColumns(),g=this;var e={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,useWidgetPreferencesFlag:!0,placeholder:"",identifier:"chgIRSummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(g,e,g.options.isManagingCRPopup,g.options.postMaturityCallback).then((function(e){return e}));e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){s.readyDragContent(e,t)},onDragStartCell:function(e,t){s.readyDragContent(e,t)}};e=UWA.merge(e,this.options),this.irDatagrid=new n(e),this.irDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){C.onCustomViewsSave(e,t,g.options.custom_view_options)},this.irTilesView=new u({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){s.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});let m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(g,e,g.options.isManagingCRPopup,g.options.postMaturityCallback).then((function(e){return e}))}};this.irTilesView.onContextualEvent=m;let f={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:l.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:l.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},v={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}};try{new c}catch(e){console.log(e)}this.irDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),this.irDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),this.irDatagrid.setToolbar(a.writetoolbarDefination(this.options)),a.toolbar=this.irDatagrid.getToolbar(),this.irDatagrid.getToolbar().addEventListener("onReady",(function(e){let t=g.irDatagrid.getToolbar().getNodeModelByID("addNewBlankCAId");t&&t._associatedView.registerkeyDownCallback(p.createBlankChangeOrder)})),this.irDatagrid.addEventListener("allCellsRendered",(function(){g.irDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.irDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.irDatagrid.getTreeDocument().getSelectedNodes().length}}]),g.irTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.irTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.irTilesView.getTreeDocument().getSelectedNodes().length}}])})),g.irDatagrid.addEventListener(i.POINTERHIT,(function(e,t){g.onItemClick(e,t)})),g.irDatagrid.getTreeDocument().getXSO().onAdd((function(e){g.irDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.irDatagrid.getTreeDocument().getSelectedNodes().length}}),g.irTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.irDatagrid.getTreeDocument().getSelectedNodes().length}}),g._modelEvents.publish({event:"ir-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})})),g.irDatagrid.getTreeDocument().getXSO().onRemove((function(e){g.irDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.irTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?g._modelEvents.publish({event:"ir-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):g._modelEvents.publish({event:"ir-DataGrid-on-unselect",data:{model:e,context:e},context:e})})),g.irTilesView.addEventListener(i.POINTERHIT,(function(e,t){g.onItemClick(e,t)})),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount)t.nodeModel.select(!0),g._modelEvents.publish({event:"ir-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel});else if(t&&2==t.columnID);},this.irDatagridView=UWA.createElement("div",{id:"outer-cr-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-cr-div"});let D=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-cr-div"});this.irDatagrid.getToolbar().getContent().inject(D);let I=UWA.createElement("div",{class:"content-cr-div crgridView showView"}),w=UWA.createElement("div",{class:"crtileView hideView"}),_=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_DataGrid_PlaceHolder_NoInvestigationRequest}).inject(_),this.irDatagrid.inject(I),this.irTilesView.inject(w),_.inject(w),this.irDatagridView.addContent(D),this.irDatagridView.addContent(I),this.irDatagridView.addContent(w),this.irDatagridView.inject(this.options.target),this.irDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.unsubscribe({event:"ir-DataGrid-on-search"}),this._modelEvents.unsubscribe({event:"ir-DataGrid-on-reset-search"}),this._modelEvents.subscribe({event:"ir-DataGrid-on-search"},(function(e){if("false"==h.getGlobalVariable().slidePanelTagger){var t=e.query;if(t){var i=g.irDatagrid.getTreeDocument();i.withTransactionUpdate((function(){i.getAllDescendants().forEach((function(e){if(e.options.grid.title){var i=e.options.grid.title.toLowerCase().contains(t.toLowerCase())||e.options.grid.name.toLowerCase().contains(t.toLowerCase());e.isVisible()&&!i?e.hide():!e.isVisible()&&i&&e.show()}}))}))}}})),this._modelEvents.subscribe({event:"ir-DataGrid-on-reset-search"},(function(e){var t=g.irDatagrid.getTreeDocument();t.withTransactionUpdate((function(){t.getAllDescendants().forEach((function(e){e.isVisible()||e.show()}))}))})),this.options.custom_view_options.dgvHandle=this.irDatagrid,this.options.custom_view_options.ootb_columns=[...t],this.options.custom_view_options.dgvDiv=I,this.loader=(new o).inject(this.options.target);let b=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];C.registerCustomEventsOnDGV(b,this.irDatagrid,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.irDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgInvestigateRequestDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel","DS/ENOChgGovernanceUX/scripts/model/investigationRequest/ChgIRDataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRTileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgServices/scripts/services/ChgErrors"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E){"use strict";let O={loadRealTimeIRDataPromise:function(e){return new Promise((function(t,i){a.getTimestamp().then((function(n){var o=s.processTimestampData(n);a.getConfiguredInvestigationRequestList({indexed:!1,simplifiedJSON:!0,timestamp:o,filter:e}).then((function(e){s.processedIRSummaryList(e).then((function(i){t({realTimeData:e,processedIRList:i})}))}),(function(e){i(e)}))}),(function(e){i(e)}))}))},loadIndexedIRDataPromise:function(e){return new Promise((function(t,i){a.getConfiguredInvestigationRequestList(e).then((function(e){s.processedIRSummaryList(e).then((function(i){t({IRSummaryList:e,processedIRList:i})}),(function(e){i(e)}))}),(function(e){i(e)}))}))},postProcessing:function(){var e=this;0==e.treeDocument.getChildren().length?e.treeDocument._modelEvents.publish({event:"irSummaryEmpty"}):e.treeDocument._modelEvents.publish({event:"irSummaryNotEmpty"}),e.globalSubscribeForTransferFromCOSummaryView(),e.globalSubscribeForMaturityUpdate(),e.globalSubscribeIRSummaryUpdateFromPropertyPanel(),e.irGridView.loadCustomColumns(),S.hideLoader(e.options.target,e.irGridView.loader)},updateTagger:function(){var e=this;"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)}))},createInvestigationRequestView:function(t){var n=this;t.target.setStyles({position:"relative"});var a={};a=UWA.merge(a,t),this.options=a,a.columns=i.getColumns(),n.ChgIRDataGridModel=new o,n.treeDocument=a.treeDocument=n.ChgIRDataGridModel.createTreeDocument(),n.ChgIRlayoutModel=n.treeDocument,n.ChgIRDataGridModel.registerCustomFilter();var r=s.getDefaultFilter(a.columns);a.treeDocument.setFilterModel(r),n.irGridView=new e(a),n.irGridView.render(),S.showLoader(a.target,n.irGridView.loader),n.subscribeToModelEvents(n.treeDocument);n.updateGrid("")},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.irGridView.irDatagrid.placeholder=v.CHG_GOV_DataGrid_PlaceHolder_FetchInvestigationRequest,this.updateTagger()},updateGrid:async function(e){var t=this;if(t.preUpdateProcessing(),"inactiveIR"!=e){var i=await t.loadRealTimeIRDataPromise(e);S.fetchMaturityStateCSS(i.processedIRList),t.ChgIRDataGridModel.loadInvestigationRequestData(t.treeDocument,i.processedIRList)}t.params.filter=e,t.loadIndexedIRDataPromise(t.params).then((async function(e){S.fetchMaturityStateCSS(e.IRSummaryList.data),await t.ChgIRDataGridModel.loadIndexedInvestigationRequest(t.treeDocument,e.processedIRList),t.currentPage=parseInt(e.IRSummaryList.summary["Current Page"]),t.totalPages=parseInt(e.IRSummaryList.summary["Total Pages"]),t.irGridView.irDatagrid.placeholder=v.CHG_GOV_DataGrid_PlaceHolder_NoInvestigationRequest,t.currentPage<t.totalPages?(t.updateTagger(),t.irGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.irGridView.irDatagrid.onInfiniteScroll((async function(e){t.getNextPageInvestigationRequests("DGV")})),t.irGridView.irTilesView.onInfiniteScroll((async function(e){t.getNextPageInvestigationRequests("RTV")}))):(t.updateTagger(),t.irGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())}))},getNextPageInvestigationRequests:async function(e){var t=this;if(t.currentPage<t.totalPages){S.showLoader(t.options.target,t.irGridView.loader),t.params.pageNumber++,t.currentPage++;let i=await t.loadIndexedIRDataPromise(t.params);t.ChgIRDataGridModel.loadIndexedInvestigationRequest(t.treeDocument,i.processedIRList),t.updateTagger(),t.irGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),"DGV"===e?t.irGridView.irDatagrid.infiniteScrollProcessDone():t.irGridView.irTilesView.infiniteScrollProcessDone()}},changeView:function(){i.changeView("GridView")},removeDataFromGrid:function(e,t){O.ChgIRlayoutModel.getChildren();for(let t=0;t<e.length;t++){let i=e[t];O.ChgIRlayoutModel.search({shouldStop:function(e){return e.options.grid.id===i&&(O.removingNode(e),!0)}}),0==O.ChgIRlayoutModel.getChildren().length&&O.ChgIRlayoutModel._modelEvents.publish({event:"irSummaryEmpty"})}},removingNode:function(e){this.ChgIRlayoutModel.removeRoot(e)},globalSubscribeIRSummaryUpdateFromPropertyPanel:function(){u.addObserver("ChgIRDataGridLayout","CO-Properties-Update",this.handleForUpdatingFromPropertyPanel)},globalSubscribeForTransferFromCOSummaryView:function(){u.addObserver("ChgIRDataGridLayout","ENOLC_MOVE_CMD_UPDATE",this.handleForCOSummaryTransfer)},globalSubscribeForMaturityUpdate:function(){u.addObserver("ChgIRDataGridLayout","Lifecycle.Modification",this.handleForMaturityUpdate)},handleForUpdatingFromPropertyPanel:function(e){let t=O.ChgIRlayoutModel;t&&y.handlePropertiesOnUpdate(t,e)},handleForCOSummaryTransfer:function(e){let t,n=O.ChgIRlayoutModel.getAllDescendants(),a=[],s="",r="";Object.keys(e.data.attributes).forEach((function(t){let i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)}));for(let e=0;e<a.length;e++){t=a[e];for(let e=0;e<n.length;e++){if(n[e].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName&&(r=n[e].options.grid.name,s=t.newOwnerId,n[e].options.grid.owner=s,n[e].options.grid.ownerFullName=t.newOwnerFullName),t.newOrganization){let i=t.newOrganization;n[e].options.grid.orgnaizationNLS=i}if(t.newCollabSpace){let i=t.newCollabSpace;n[e].options.grid.collabspaceNLS=i}let a=t.newOwnerFullName,p=i.createCustomOwner(s,a);var l={};l.name=r,l.title=n[e].options.grid.title,l.severity=n[e].options.grid.severity,l.severityNLS=n[e].options.grid.severityNLS,l.ownerFullName=a,l.maturityNLS=n[e].options.grid.maturityNLS;var d=r+" | "+a,c=o.prototype.createCustomTooltip(l);n[e].updateOptions({grid:{collabspaceNLS:n[e].options.grid.collabspaceNLS,organizationNLS:n[e].options.grid.organizationNLS,owner:n[e].options.grid.owner,ownerFullName:n[e].options.grid.ownerFullName,co_Owner:p},customTooltip:c,subLabel:d})}}}},loadingViewPreference:function(){let e=_("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=d.MOBILE_CUTOFF){let t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(p.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{let t=e.getCASummaryViewDesktop();void 0===t||"GridView"===t?this.changeView():p.changeView()}},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"irSummaryEmpty"},(function(e){p.showEmptyView()})),e._modelEvents.subscribe({event:"irSummaryNotEmpty"},(function(e){p.hideEmptyView()})),D.unsubscribe(`${e.options.id}:${widget.id}`),D.subscribe(`${e.options.id}:${widget.id}`,(function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.treeDocument),e._cleanBIFilterProxy();let t={data:{roots:that.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,that.treeDocument)}))})),D.unsubscribe(`${e.options.id} of ${widget.id}`),D.subscribe(`${e.options.id} of ${widget.id}`,(function(e){O.ChgIRDataGridModel.filterView(e)})),D.unsubscribe(`${e.options.id} colorize ${widget.id}`),D.subscribe(`${e.options.id} colorize ${widget.id}`,(function(e){})),D.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),D.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(e){}))},handleForMaturityUpdate:function(e){if(e){let t=O.ChgIRlayoutModel.getSelectedNodes();S.getHandleForMaturityUpdate(JSON.parse(e),t)}}};return O})),define("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome",["DS/ENOChgServices/scripts/services/ChgNativeInitService","UWA/Core","DS/CoreEvents/ModelEvents","DS/ENOChgGovernanceUX/scripts/components/zApplicationFrame/ChgGovzApplicationFrame","DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalVariable","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/components/tab/ChgGovernanceTab","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAdaptor","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/ChgIDCardHeaderEventsUtility","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/router/ChgGovRouterConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/view/recents/recentlyOpened/ChgRecentlyOpenedView","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgGovInit","DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCreateChangeRequest","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgCreateInvestigationRequest","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCreateChangeAction","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout","DS/UIKIT/Mask","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesController","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesController","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownController","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestFeaturesUtil","DS/ENOChgServices/scripts/services/ChgDependencyServices","require","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O,G,N,A,V,M,T,R,U,x,P,F,L,H,B,k,W,X,j,q,z,K,$,J,Y,Q,Z,ee){"use strict";var te={initHome:function(e){this._welcomePanelComponent=new o,this._applicationContainer=document.createElement("div"),t.extendElement(this._applicationContainer),widget.body.setContent(this._applicationContainer),s.getImmersiveFrame().inject(this._applicationContainer),this._zApplicationFrame=new n,this._zApplicationFrame._init(this._applicationChannel,C,this._welcomePanelComponent),s.getImmersiveFrame().setContentInBackgroundLayer(this._zApplicationFrame),this.infoPanel=this._zApplicationFrame._triptychWrapper.getRightPanelContainer(),this._welcomePanelComponent.init(this._applicationChannel,C,this._zApplicationFrame._triptychWrapper.getLeftPanelContainerTriptych()),this._applicationChannel.publish({event:"triptych-set-size",data:{side:"left",size:d.LEFT_PANEL_SIZE_EXPANDED}}),C.start("/home")},init:function(e,t){m.init();f.initialize();var n={name:"appChannelModleEvent"};this._applicationChannel=new i(n),this._subscribeToEvents(),C.setDependency("applicationChannel",this._applicationChannel),C.setDependency("xChangeApp",this),this.initHome(t),this.updateCRTab()},updateCRTab:function(){let e=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;console.log(e),null!=e&&"crAssessment"===e.data.items[0].tabName&&(this._pathChangeRequestsDetails=[H._KEY,H._VIEWS_PREFERENCES,H._CHANGE_REQUESTS_DETAILS],this.contentX3D=e,v.updateTab(this._pathChangeRequestsDetails,"crAssessment"),r.publish(`crImpactAnalysis:${widget.id}`,{}))},openWithIDCard:function(e,t){this.init(e,t);var i={};let n=t.extData.objectId;i.context=n,"Change Order"==t.extData.parentType?(te.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(n)):"Change Request"==t.extData.parentType?(te.launchPropertyPanelContext(i),V.displayObjectInfoInsideIDcard(n)):"Change Action"==t.extData.parentType?(te.launchPropertyPanelContext(i),R.displayObjectInfoInsideIDcard(n)):"Investigation Request"==t.extData.parentType&&(te.launchPropertyPanelContext(i),J.displayObjectInfoInsideIDcard(n))},clearContent:function(){if(this.govContainer&&this.govContainer.hasChildNodes())if(void 0!==window.__karma__){var e=this.govContainer.childNodes;for(let t=0;t<e.length;t++)e[t].remove()}else this.govContainer.innerHTML=""},makeDropPayload:function(e){let t=e[0].objectId;var i={};i.context=t,1==e.length?I.getObjectTypeInformation(t).then((function(e){"Change Order"==e?(te.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(t)):"Change Request"==e?"true"===P.getGlobalVariable().CHG_CHANGE_REQUEST&&(te.launchPropertyPanelContext(i),V.displayObjectInfoInsideIDcard(t)):"Change Action"==e?(te.launchPropertyPanelContext(i),R.displayObjectInfoInsideIDcard(t)):"Investigation Request"==e?(te.launchPropertyPanelContext(i),J.displayObjectInfoInsideIDcard(t)):""==e&&_.warn(a.CHG_GOV_Block_NotSupported_Drop)})):_.warn(a.CHG_GOV_Block_Multi_Drop)},loadingMyChangeOrders:function(){var e=this;this._applicationChannel;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_MY_CHANGE_ORDERS}}),this._container=t.createElement("div"),this._container.classList.add("changeorder-landingpage"),C.setDependency("landingpage",this._container);this._zApplicationFrame._triptychWrapper.getMainPanelContainer();D.makeDroppable(this._container,(function(e){te.makeDropPayload(e)})),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(this._container);var i={};i.modelEvents=this._applicationChannel,i.target=this._container,l.createChangeOrderView(i),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("co-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"co-DataGrid-on-dblclick"},(function(e){g.displayObjectInfoInsideIDcard(e.model.id)}));var n=this._applicationChannel;widget.addEvents({onSearch:function(t){n.publish({event:"co-DataGrid-on-search",data:{query:t},context:e})},onResetSearch:function(t){n.publish({event:"co-DataGrid-on-reset-search",data:{query:t},context:e})}}),this._applicationChannel.subscribe({event:"co-DataGrid-on-click"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!0,node:t.context};e.notifySelection(i)}})),this._applicationChannel.subscribe({event:"co-DataGrid-on-unselect"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}})),this._applicationChannel.subscribe({event:"co-DataGrid-on-unselect-all"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}}))},_initRecentContent:function(){var e=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_RECENTY_OPENED}}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("load-info-panel-chg-recents")]||this._applicationChannel.subscribe({event:"load-info-panel-chg-recents"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.context.options.grid.id,contextType:t.context.options.grid.type,isNodeAdded:!0,node:t.context};e.notifySelection(i)}})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("recent-DataGrid-on-unselect-all")]||this._applicationChannel.subscribe({event:"recent-DataGrid-on-unselect-all"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}})),t.createElement("div").classList.add("outerRecentlyOpenedDiv");var i=t.createElement("div");i.classList.add("firstROChildDiv"),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i);var n={};n.target=i,n._applicationChannel=this._applicationChannel;var o=new S(n);D.makeDroppable(i,(function(e){te.makeDropPayload(e)})),o.globalSubscribeForRecentlyOpenedView()},_initChangeRequestContent:function(){var e=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_MY_CHANGE_REQUESTS}});var i=t.createElement("div");i.classList.add("outerMYCRDiv");var n=t.createElement("div");n.classList.add("mainMyCRDiv");var o={};o.target=n,o.modelEvents=this._applicationChannel,n.inject(i),D.makeDroppable(i,(function(e){te.makeDropPayload(e)})),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i),A.createChangeRequestView(o);var a=this._applicationChannel;this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("cr-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"cr-DataGrid-on-dblclick"},(function(e){C.navigate(d.ROUTE_CR_DETAILS,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:e})})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("cr-DataGrid-on-click")]||this._applicationChannel.subscribe({event:"cr-DataGrid-on-click"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!0,node:t.context};e.notifySelection(i)}})),this._applicationChannel.subscribe({event:"cr-DataGrid-on-unselect"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}})),this._applicationChannel.subscribe({event:"cr-DataGrid-on-unselect-all"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}})),widget.addEvents({onSearch:function(t){a.publish({event:"cr-DataGrid-on-search",data:{query:t},context:e})},onResetSearch:function(t){a.publish({event:"cr-DataGrid-on-reset-search",data:{query:t},context:e})}})},_initChangeInvestigationRequestContent:function(){var e=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_MY_INVESTIGATION_REQUESTS}});var i=t.createElement("div");i.classList.add("outerMYIRDiv");var n=t.createElement("div");n.classList.add("mainMyIRDiv");var o={};o.target=n,o.modelEvents=this._applicationChannel,n.inject(i),D.makeDroppable(i,(function(e){te.makeDropPayload(e)})),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i),x.createInvestigationRequestView(o);var a=this._applicationChannel;this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ir-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"ir-DataGrid-on-dblclick"},(function(e){C.navigate(d.ROUTE_IR_DETAILS,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:e})})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ir-DataGrid-on-click")]||this._applicationChannel.subscribe({event:"ir-DataGrid-on-click"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!0,node:t.context};e.notifySelection(i)}})),this._applicationChannel.subscribe({event:"ir-DataGrid-on-unselect"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}})),this._applicationChannel.subscribe({event:"ir-DataGrid-on-unselect-all"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}})),widget.addEvents({onSearch:function(t){a.publish({event:"ir-DataGrid-on-search",data:{query:t},context:e})},onResetSearch:function(t){a.publish({event:"ir-DataGrid-on-reset-search",data:{query:t},context:e})}})},_initChangeActionContent:function(){var e=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_MY_CHANGE_ACTIONS}});var i=t.createElement("div");i.classList.add("outerMYCADiv");var n=t.createElement("div");n.classList.add("mainMyCADiv");var o={};o.target=n,o.modelEvents=this._applicationChannel,n.inject(i),D.makeDroppable(i,(function(e){te.makeDropPayload(e)})),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i),B.createChangeActionView(o);var a=this._applicationChannel;this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ca-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"ca-DataGrid-on-dblclick"},(function(e){C.navigate(d.ROUTE_CA_DETAILS,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:e})})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ca-DataGrid-on-click")]||this._applicationChannel.subscribe({event:"ca-DataGrid-on-click"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!0,node:t.context};e.notifySelection(i)}})),this._applicationChannel.subscribe({event:"ca-DataGrid-on-unselect"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}})),this._applicationChannel.subscribe({event:"ca-DataGrid-on-unselect-all"},(function(t){if(t.context.getTreeDocument()){e.launchPropertyPanel(t);let i={contextId:t.model.id,contextType:t.model.type,isNodeAdded:!1,node:t.context};e.notifySelection(i)}})),widget.addEvents({onSearch:function(t){a.publish({event:"ca-DataGrid-on-search",data:{query:t},context:e})},onResetSearch:function(t){a.publish({event:"ca-DataGrid-on-reset-search",data:{query:t},context:e})}})},_initWelcomePanel:function(){this._welcomePanelComponent.init(this._applicationChannel,C,this._zApplicationFrame._triptychWrapper.getLeftPanelContainer())},_initWelcomePanelDeactivate:function(){this._welcomePanelComponent.init(this._applicationChannel,C,this._zApplicationFrame._triptychWrapper.getLeftPanelContainerTriptych())},reactivateWP:function(e){if(e||1!=this._isWPActivated){widget.body.offsetWidth>d.MOBILE_BREAKPOINT&&this._applicationChannel.publish({event:"triptych-show-panel",data:"left"}),this._applicationChannel.publish({event:"show-welcomepanel-icon"}),this._applicationChannel.publish({event:"topbar-show-title"});var t=this;this._tokenSub=this._applicationChannel.subscribe({event:"resizing-triptych-container"},(function(e){e<d.MOBILE_BREAKPOINT?t._applicationChannel.publish({event:"triptych-hide-panel",data:"left"}):t._applicationChannel.publish({event:"triptych-show-panel",data:"left"})})),this._isWPActivated=!0}},deactivateWP:function(e){e||0!=this._isWPActivated?(this._applicationChannel.publish({event:"triptych-hide-panel",data:"left"}),this._applicationChannel.publish({event:"hide-welcomepanel-icon"}),this._applicationChannel.publish({event:"topbar-hide-title"}),this._tokenSub&&this._applicationChannel.unsubscribe(this._tokenSub),this._isWPActivated=!1):this._applicationChannel.publish({event:"topbar-hide-title"})},showIDCard:function(t,i){var n=this;let o={},a=Z("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome");if("ChangeOrder"==t.model.isKindOfType)o.context=t.model.id,o.type="ChangeOrder",a.launchPropertyPanelContext(o),n.buildIDCardViewForCO(t,i);else if("ChangeRequest"==t.model.isKindOfType)o.context=t.model.id,o.type="ChangeRequest",a.launchPropertyPanelContext(o),n.buildIDCardViewForCR(t,i);else if("ChangeAction"==t.model.isKindOfType){if(o.context=t.model.id,o.type="ChangeAction",a.launchPropertyPanelContext(o),n.buildIDCardViewForCA(t,i),P.getGlobalVariable().isNative&&"true"==P.getGlobalVariable().CHG_NATIVE_BREADCRUMB){t=t.model.id;e.DispatchEventToWin("Native_CA_SUMMARY_PAGE",t)}}else"InvestigationRequest"==t.model.isKindOfType?(o.context=t.model.id,o.type="InvestigationRequest",a.launchPropertyPanelContext(o),n.buildIDCardViewForIR(t,i)):n.buildIDCardViewForCO(t,i)},buildIDCardViewForCO:function(e,i){var n=this;I.getChangeOrderUserAccess(e.model.id).then((function(o){var a=o.data[0].id,s=(o.data[0].type,o.data[0].dataelements);s=w.processAccessBitCO(s);var l={id:a,type:e.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var d=document.getElementsByClassName("moduleWrapper")[0];d&&k.isMasked(d)&&k.unmask(d);let u=t.createElement("div");if(u.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(u),u){u.setContent("");var h=t.createElement("div");h.classList.add("outerContainerDiv"),h.inject(u);var C=t.createElement("div");C.classList.add("outerContainerHeaderDiv"),C.inject(h),C.innerHTML="<h1>Change Order Header</h1>";var f=t.createElement("div");if(f.classList.add("outerContainerTabDiv"),f.inject(h),"outsideCall"==i){var v=e.model;p.createIDCardHeader(C,v,l)}else g.createHeaderFieldsJSON(e).then((function(e){p.createIDCardHeader(C,e,l)}));let o;D.makeDroppable(C,(function(e){te.makeDropPayload(e)})),e.model.maturity?o=e.model.maturity:e.model.attributes&&e.model.attributes.mapping&&e.model.attributes.mapping.maturity&&e.model.attributes.mapping.maturity.valueActual&&(o=e.model.attributes.mapping.maturity.valueActual);var I={};I.id=e.model.id,I.contextDetails={id:I.id,name:e.model.name,title:e.model.title,maturity:o,isKindOfType:e.model.isKindOfType,_modelEvents:n._applicationChannel,access:l};var _=g.getTabs(n,I);I.tabs=_,c.createGovTab(f,I);var b=e.model.id;m.setId(b);var S={};S.id=e.model.id,S.type=e.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(S))}}))},updatingRecent:function(e){this._pathRecents=[H._KEY,H._VIEWS_PREFERENCES,H._RECENTLY_OPENED],v.updateRecents(this._pathRecents,e)},getRecents:function(){this._pathRecents=[H._KEY,H._VIEWS_PREFERENCES,H._RECENTLY_OPENED];var e=v.getRecents(this._pathRecents);return e&&(e=(e=JSON.parse(e)).slice(0,parseInt(widget.getPreference("recentlyOpenedCount").value)),e=JSON.stringify(e)),e},addRecentItemsIdsInPreference:function(e){let t=this,i=[],n=t.getRecents();if(""==n)i.push(e),t.updatingRecent(JSON.stringify(i));else{let i=JSON.parse(n),o=t.checkExistingIdAndRemoved(i,e);o.unshift(e),t.updatingRecent(JSON.stringify(o))}},checkExistingIdAndRemoved:function(e,t){var i=e.indexOf(t);return i>=0&&e.splice(i,1),e},buildIDCardViewForCR:function(e,i){var n=this;I.getChangeRequestUserAccess(e.model.id).then((function(o){var a=e.model.id,s=(o.data[0].type,o.data[0].dataelements);s=w.processAccessBitCR(s);var l={id:a,type:e.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var d=document.getElementsByClassName("moduleWrapper")[0];d&&k.isMasked(d)&&k.unmask(d);let u=t.createElement("div");if(u.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(u),u){u.setContent("");var g=t.createElement("div");g.classList.add("outerContainerDiv"),g.inject(u);var h=t.createElement("div");h.classList.add("outerContainerHeaderDiv"),h.inject(g),h.innerHTML="<h1>Change Order Header</h1>";var C=t.createElement("div");if(C.classList.add("outerContainerTabDiv"),C.inject(g),"outsideCall"==i){var f=e.model;p.createIDCardHeader(h,f,l)}else V.createHeaderFieldsJSON(e).then((function(e){p.createIDCardHeader(h,e,l)}));let o;D.makeDroppable(h,(function(e){te.makeDropPayload(e)})),e.model.maturity?o=e.model.maturity:e.model.attributes&&e.model.attributes.mapping&&e.model.attributes.mapping.maturity&&e.model.attributes.mapping.maturity.valueActual&&(o=e.model.attributes.mapping.maturity.valueActual);var v={};v.id=e.model.id,v.contextDetails={id:v.id,name:e.model.name,title:e.model.title,maturity:o,isKindOfType:e.model.isKindOfType,_modelEvents:n._applicationChannel,access:l,attributes:e.model.attributes};var I=V.getCRTabs(M,v,n._applicationChannel);v.tabs=I,c.createGovTab(C,v);var _=e.model.id;m.setId(_);var b={};b.id=e.model.id,b.type=e.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(b))}}))},buildIDCardViewForCA:function(e,i){var n=this;P.getGlobalVariable().CHGRefreshProposedForFlowdownChanges=!1;var o=[];o.push(I.getChangeActionUserAccess(e.model.id)),o.push(I.getCAContext(e.model.id)),o.push(I.getChangeGroupData(e.model.id)),o.push(m.dependencyModel.fetchDependency("pid:"+e.model.id)),Promise.all(o).then((function(o){let a=o[0].data[0].id,s=o[0].data[0];s=w.processAccessBitCA(s);let l=w.processedChangeActionContext(o[1]),d=o[2].changeaction.group;var u=[];Array.isArray(l)&&l.forEach((function(e){var t=e.id;t&&u.push(t)}));var g={id:a,type:e.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",g);var h=document.getElementsByClassName("moduleWrapper")[0];h&&k.isMasked(h)&&k.unmask(h);let C=t.createElement("div");if(C.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(C),C){C.setContent("");var f=t.createElement("div");f.classList.add("outerContainerDiv"),f.inject(C);var v=t.createElement("div");v.classList.add("outerContainerHeaderDiv"),v.inject(f),v.innerHTML="<h1>Change Action Header</h1>";var I=t.createElement("div");if(I.classList.add("outerContainerTabDiv"),I.inject(f),"outsideCall"==i){var _=e.model;p.createIDCardHeader(v,_,g)}else R.createHeaderFieldsJSON(e).then((function(e){p.createIDCardHeader(v,e,g)}));let o;D.makeDroppable(v,(function(e){te.makeDropPayload(e)})),e.model.maturity?o=e.model.maturity:e.model.attributes&&e.model.attributes.mapping&&e.model.attributes.mapping.maturity&&e.model.attributes.mapping.maturity.valueActual&&(o=e.model.attributes.mapping.maturity.valueActual);var b={};let a=Q.changeActionDependencyModel.get("flowdownDependencyCount"),r="false";Number(a)&&Number(a)>0&&(r="true"),b.flowdownRequired=r,b.id=e.model.id,b.applicationChannel=te._applicationChannel,b.contextDetails={isCAGrouped:null==d?"false":"true",id:b.id,name:e.model.name,title:e.model.title,description:e.model.description,severity:e.model.severity,maturity:o,isKindOfType:e.model.isKindOfType,_modelEvents:n._applicationChannel,userAccess:s,contextIds:u},te.realized_options_copy=b,te.realized_options_copy.cmd=void 0,te.realized_options_copy.outerContainerTabDiv=I,te.proposed_options_copy=b,te.proposed_options_copy.outerContainerTabDiv=I;var S=R.getTabs(U,b,n._applicationChannel);b.tabs=S,te._options=b,c.createGovTab(I,b);var y=e.model.id;m.setId(y);var E={};E.id=e.model.id,E.type=e.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(E))}}))},buildIDCardViewForIR:function(e,i){var n=this;I.getInvestigationRequestUserAccess(e.model.id).then((async function(o){var a=e.model.id,s=(o.data[0].type,o.data[0].dataelements);e.model.allowedTransitionStatesList||await I.getInvestigationRequestInfo(a).then((function(t){e.model.allowedTransitionStatesList=t.data[0].allowedTransitionList[0].transitionStates?t.data[0].allowedTransitionList[0].transitionStates:[]})),s=w.processAccessBitIR(s);var l={id:a,type:e.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var d=document.getElementsByClassName("moduleWrapper")[0];d&&k.isMasked(d)&&k.unmask(d);let u=t.createElement("div");if(u.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(u),u){u.setContent("");var g=t.createElement("div");g.classList.add("outerContainerDiv"),g.inject(u);var h=t.createElement("div");h.classList.add("outerContainerHeaderDiv"),h.inject(g),h.innerHTML="<h1>Investigation Request Header</h1>";var C=t.createElement("div");if(C.classList.add("outerContainerTabDiv"),C.inject(g),"outsideCall"==i){var f=e.model;p.createIDCardHeader(h,f,l)}else J.createHeaderFieldsJSON(e).then((function(e){p.createIDCardHeader(h,e,l)}));D.makeDroppable(h,(function(e){te.makeDropPayload(e)}));var v={};v.id=e.model.id,v.type=e.model.isKindOfType,v.contextDetails={id:v.id,name:e.model.name,title:e.model.title,isKindOfType:e.model.isKindOfType,_modelEvents:n._applicationChannel,access:l,attributes:e.model.attributes,model:e.model};var _=J.getIRTabs(Y,v,n._applicationChannel);v.tabs=_,c.createGovTab(C,v);var b=e.model.id;m.setId(b);var S={};S.id=e.model.id,S.type=e.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(S))}}))},createOrchestrationTab:function(e){var i=t.createElement("div");return i.classList.add("chg-orchestration-container"),e.target=i,h.createChangeOrchestrationView(e,this._applicationChannel),i},createMembersTab:function(e){P.getGlobalVariable().ECM_EnableAddMemberGenericComponent;var i=t.createElement("div");return i.classList.add("chg-member-container"),e.target=i,ee.createMembersNewTab(e),i},createApprovalsTab:function(e,i){let n=t.createElement("div"),o=t.createElement("div"),a=t.createElement("div");o.classList.add("chg-Approval-container"),a.classList.add("chg-Approval-Header-container");let s=t.createElement("div",{id:"chg-Task-container"});return n.appendChild(o),e.target=o,e.targetHeader=a,e.taskContainer=s,O.createApprovalsView(e),o},launchPropertyPanelContext:function(e){var t=[],i={physicalId:e.context,metatype:"businessobject",type:e.type,modelEvents:this._applicationChannel,facetSelect:e.facetSelect,isViaHeader:e.isViaHeader};if(P.getGlobalVariable().lastSelectedInfoType!=e.type&&(P.getGlobalVariable().lastSelectedInfoType=e.type),t.push(i),this.propertyCmp){var n=t;this.propertyCmp.setState(n,!0)}else{var o={objectInfo:t},a=new u;a.start(o),this.propertyCmp=a}m.makePropertyViewVisible(this.infoPanel)},launchPropertyPanel:function(e){const t=e.context.getTreeDocument().getSelectedNodes().filter((e=>"ia_Total"!=e.options.grid.id));var i=[];if(t.length>0)i=this.createJsonForInfoPanel(t,e.isContextDiffrent),P.getGlobalVariable().lastSelectedInfoType!=i[0].type&&(P.getGlobalVariable().lastSelectedInfoType=i[0].type);else{if(1!==e.context.getTreeDocument()._updateCnt)return;var n={physicalId:e.PhysicalID,metatype:"businessobject",type:e.type,modelEvents:this._applicationChannel};P.getGlobalVariable().lastSelectedInfoType=e.type,i.push(n)}if(this.propertyCmp)this.propertyCmp.setState(i,!0);else{var o={objectInfo:i},a=new u;a.start(o),this.propertyCmp=a}m.makePropertyViewVisible(this.infoPanel)},launchInformationPanel:function(e){var t=[];if(e.node&&void 0!==e.node.getTreeDocument&&e.node.getTreeDocument()){const n=e.node.getTreeDocument().getSelectedNodes().filter((e=>"ia_Total"!=e.options.grid.id));if(n.length>0)t=this.createJsonForInfoPanel(n),P.getGlobalVariable().lastSelectedInfoType!=t[0].type&&(P.getGlobalVariable().lastSelectedInfoType=t[0].type);else{if(0!=n.length)return;var i={physicalId:e.contextID,metatype:"businessobject",type:e.contextType,modelEvents:this._applicationChannel};P.getGlobalVariable().lastSelectedInfoType=e.contextType,t.push(i)}}else{i={physicalId:e.contextID,metatype:"businessobject",type:e.contextType,modelEvents:this._applicationChannel};P.getGlobalVariable().lastSelectedInfoType=e.contextType,t.push(i)}if(this.propertyCmp)this.propertyCmp.setState(t,!0);else{var n={objectInfo:t},o=new u;o.start(n),this.propertyCmp=o}m.makePropertyViewVisible(this.infoPanel)},notifySelection:function(t){var i=[],n={},o=[],a=[];if(t.node&&void 0!==t.node.getTreeDocument&&t.node.getTreeDocument()){let e=t.node.getTreeDocument().getSelectedNodes();for(let t=0;t<e.length;t++)if("ia_Total"!=e[t].options.grid.id){let s=e[t].options.grid.id;s&&e[t].options.grid.id.includes("i3dx")&&o.push(),a.push([e[t].options.grid.id]),n[e[t].options.grid.id]={id:e[t].options.grid.id,name:e[t].options.grid.name,title:e[t].options.grid.title,type:e[t].options.grid.type},i.push(s)}var s=window.widget,l=s.getValue("appId")+"_"+s.id,d={metadata:{uid:Math.random(),originUid:Math.random(),appid:l,originWidgetId:s.id,timestamp:Math.floor(Date.now())},data:{paths:a,i3dxIds:o,attributes:n,version:"1.1",tenant:P.getGlobalVariable().tenant}};if("ia_Total"!=t.node.options.grid.id&&t.isNodeAdded){let e=t.node.options.grid.id,i=t.node.options.grid.name,o=t.node.options.grid.title,a=t.node.options.grid.type;var c=[];c.push(e);[].push(c),r.publish("DS/PADUtils/PADCommandProxy/select",d);var p={operation:"select",operationVersion:"1.0",appId:s.id,appName:s.getValue("appId"),content:{version:"1.1",id:e,name:i,title:o,type:a}};r.publish("webinwin:web:notification",JSON.stringify(p));n={[e]:{id:e,name:i,title:o,type:a}};var u={metadata:{appId:s.id,appName:s.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[e],attributes:n},version:"1.0"};r.publish("DS/Object/select",u);var g={objectId:e,envId:P.getGlobalVariable().tenant,contextId:P.getGlobalVariable().getSecurityContext()};P.getGlobalVariable().compassSocket.dispatchEvent("onSetObject",g,P.getGlobalVariable().compassSocketName)}else"ia_Total"==t.node.options.grid.id||t.isNodeAdded||r.publish("DS/PADUtils/PADCommandProxy/select",d)}e.DispatchEventToWin("Add_to_CSO",i.toString())},initializePropertyPanelwithEmptyData:function(){var e=[],t={objectInfo:e},i=new u;i.start(t),this.propertyCmp=i;var n=e;this.propertyCmp.setState(n,!0),m.makePropertyViewVisible(this.infoPanel)},createJsonForInfoPanel:function(e){var t=[];for(let i=0;i<e.length;i++){let n={physicalId:e[i].options.grid.ref_details?e[i].options.grid.ref_details.id:e[i].options.grid.id,metatype:"businessobject",type:e[i].options.grid.isKindOfType?e[i].options.grid.isKindOfType:e[i].options.grid.ref_details?e[i].options.grid.ref_details.dataelements["ds6w:type"][0]:e[i].options.grid.type,grid:e[i].options.grid,modelEvents:this._applicationChannel};t.push(n)}return t},_subscribeToEvents:function(){var i=this;r.unsubscribe("launch_change_action"+(widget?widget.id:"")),r.subscribe("launch_change_action"+(widget?widget.id:""),(function(t){if(P.getGlobalVariable().isNative)e.DispatchEventToWin("OpenCATransferTo",t.id);else{let e={};e.context=t.id,"Change Order"==t.objectType?(e.type="ChangeOrder",i.launchPropertyPanelContext(e),g.displayObjectInfoInsideIDcard(t.id,!0)):(e.type="ChangeAction",i.launchPropertyPanelContext(e),R.displayObjectInfoInsideIDcard(t.id,!0))}})),r.unsubscribe("ca-dblclick-on-dependency-facet"+(widget?widget.id:"")),r.subscribe("ca-dblclick-on-dependency-facet"+(widget?widget.id:""),(function(e){let t={};t.context=e.id,t.type="ChangeAction",i.launchPropertyPanelContext(t),R.displayObjectInfoInsideIDcard(e.id,!0)})),r.unsubscribe("ECM_GOV_Realized_DGV_ON:"+(widget?widget.id:"")),r.subscribe("ECM_GOV_Realized_DGV_ON:"+(widget?widget.id:""),(function(e){K.saveUserPreference({[$.keys.viewKeys.REALIZED_DEF_VIEW]:"DGV"}),te.realized_options_copy.cmd="DGV",e.init_options.target=document.querySelector("."+e.init_options.targetclassName),e.init_options.target.empty(),e.init_options.applicationChannel=te._applicationChannel,new q(e.init_options).createRealizedChangesView()})),r.unsubscribe("ECM_GOV_Realized_LTV_ON:"+(widget?widget.id:"")),r.subscribe("ECM_GOV_Realized_LTV_ON:"+(widget?widget.id:""),(function(){K.saveUserPreference({[$.keys.viewKeys.REALIZED_DEF_VIEW]:"LTV"}),te.realized_options_copy.cmd="LTV",te.realized_options_copy.outerContainerTabDiv.empty();let e=R.getRealizedChangeTab(U,te.realized_options_copy,"RealizedChange");var t=te.realized_options_copy.tabs;Array.isArray(t)&&t.forEach((function(e){e.value&&"caRealizedChange"!=e.value&&(e.isSelected=!1)})),te.realized_options_copy.tabs[2]=e,c.createGovTab(te.realized_options_copy.outerContainerTabDiv,te.realized_options_copy);var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>Large Tile View"}};W.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i})})),r.unsubscribe("ECM_GOV_ProposedDGV_ON:"+(widget?widget.id:"")),r.subscribe("ECM_GOV_ProposedDGV_ON:"+(widget?widget.id:""),(function(e){K.saveUserPreference({[$.keys.viewKeys.PROPOSED_DEF_VIEW]:"DGV"}),document.querySelector(".proposedDGV").show(),document.querySelector(".proposedLTV").hide()})),r.unsubscribe("ECM_GOV_ProposedDGV_OFF:"+(widget?widget.id:"")),r.subscribe("ECM_GOV_ProposedDGV_OFF:"+(widget?widget.id:""),(function(){K.saveUserPreference({[$.keys.viewKeys.PROPOSED_DEF_VIEW]:"LTV"}),document.querySelector(".proposedDGV").hide(),document.querySelector(".proposedLTV").show();var e={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>Large Tile View"}};W.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e})})),this._applicationChannel.subscribe({event:"welcome-panel-action-selected"},(function(e){i.postActionClickFlags&&i.postActionClickFlags.isClickProcessing||(i.postActionClickFlags={isClickProcessing:!1},e&&e.id===d.PATH_NEW_CHANGE_REQUEST&&(G.launchCreateChangeRequestDialog(i.postActionClickFlags),i.postActionClickFlags.isClickProcessing=!0),e&&e.id===d.PATH_NEW_INVESTIGATION_REQUEST?(N.launchCreateInvestigationRequestDialog(i.postActionClickFlags),i.postActionClickFlags.isClickProcessing=!0):e&&e.id===d.PATH_NEW_CHANGE_ORDER?(console.log("...........  open create dailog for CO creation...................."),F.createChangeOrder(i.postActionClickFlags),i.postActionClickFlags.isClickProcessing=!0):e&&e.id===d.PATH_OPEN_CHANGE_ORDER?i.openChangeOrderFromActivity():e&&e.id===d.PATH_NEW_CHANGE_ACTION&&(console.log("...........  open create dailog for CA creation...................."),T.launchCreateChangeActionDialog(i.postActionClickFlags),i.postActionClickFlags.isClickProcessing=!0))})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("update-property-panel-data")]||this._applicationChannel.subscribe({event:"update-property-panel-data"},(function(e){if(e.context.getTreeDocument()){if(P.getGlobalVariable().deletionData&&P.getGlobalVariable().deletionData.wid==widget.id&&"CR_IA"==P.getGlobalVariable().deletionData.nav&&P.getGlobalVariable().deletionData.deletedIDs.includes(e.context.options.grid.id))return;i.launchPropertyPanel(e)}})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("update_object_select")]||this._applicationChannel.subscribe({event:"update_object_select"},(function(e){e.node&&(i.launchInformationPanel(e),i.notifySelection(e))})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("update-property-panel-contextdata")]||this._applicationChannel.subscribe({event:"update-property-panel-contextdata"},(function(e){e.context&&"string"==typeof e.context&&i.launchPropertyPanelContext(e)})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("hideEmpty-datagrid")]||this._applicationChannel.subscribe({event:"hideEmpty-datagrid"},(function(e){e.elements.poolContainerSync.getChildren()[1].empty()})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("showEmpty-datagrid")]||this._applicationChannel.subscribe({event:"showEmpty-datagrid"},(function(e){var i=t.createElement("div",{html:a.CHG_GOV_Empty_DataGrid_PlaceHolder});null!=e.elements.poolContainerSync.getChildren()[1]&&""==e.elements.poolContainerSync.getChildren()[1].innerHTML&&e.elements.poolContainerSync.getChildren()[1].appendChild(i)})),this._applicationChannel.subscribe({event:"triptych-leaving-mobile"},(function(e){0!=i._isWPActivated&&i._applicationChannel.publish({event:"triptych-show-panel",data:"left"})})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("add_aggregation_row_datagrid")]||this._applicationChannel.subscribe({event:"add_aggregation_row_datagrid"},(function(e){"true"==P.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&e.treeDocument.addRoot(new X({label:a.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:a.CHG_GOV_IA_LastColumn_label}}))})),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("remove_aggregation_row_datagrid")]||this._applicationChannel.subscribe({event:"remove_aggregation_row_datagrid"},(function(e){const t=e.treeDocument.getAllDescendants().filter((e=>"ia_Total"===e.options.grid.id));e.treeDocument.removeRoot(t[0])}))},openChangeOrderFromActivity:function(){let e=b.activateSearch("Change Order"),t="Change Order";"true"===P.getGlobalVariable().CHG_CHANGE_REQUEST&&(t+=",Change Request"),t+=",Change Action",t+=",Investigation Request",b.search(a.CHG_GOV_Welcome_Activity_Open_Change_Orders,t,this.OnSearchComplete,"changeorderopen",e)},OnSearchComplete:function(e){let t=e[0][0];if(1==e.length){let i={};i.context=e[0][0],I.getObjectTypeInformation(t).then((function(e){"Change Order"==e?(te.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(t)):"Change Request"==e?"true"===P.getGlobalVariable().CHG_CHANGE_REQUEST&&(te.launchPropertyPanelContext(i),V.displayObjectInfoInsideIDcard(t)):"Change Action"==e?(te.launchPropertyPanelContext(i),R.displayObjectInfoInsideIDcard(t)):"Investigation Request"==e?(te.launchPropertyPanelContext(i),J.displayObjectInfoInsideIDcard(t)):""==e&&_.warn(a.CHG_GOV_Block_NotSupported_Drop)}))}},openIDCard:function(e,t){I.getObjectTypeInformation(e).then((function(t){"Change Order"==t?g.getChangeOrderModelForIDCard(e).then((function(e){te.showIDCard(e)})):"Change Request"==t?"true"===P.getGlobalVariable().CHG_CHANGE_REQUEST&&V.getChangeRequestModelForIDCard(e).then((function(e){te.showIDCard(e)})):"Change Action"==t?R.getChangeActionModelForIDCard(e).then((function(e){te.showIDCard(e)})):"Investigation Request"==t&&J.getInvestigationRequestModelForIDCard(e).then((function(e){te.showIDCard(e)}))}))},onRefresh:function(){var e=document.querySelector(".dropdown-menu");e&&e.hide(),y.setInfraValue().then((function(e){new E({type:"ChangeOrder",information:e}).loadInfraForGovWidget().then((function(e){var t=v.getRouteInfo();if(t&&t.name==d.ROUTE_MY_CHANGE_ORDERS)C.navigate(d.ROUTE_MY_CHANGE_ORDERS,{isRefresh:!0},{reload:!0});else if(t&&t.name==d.ROUTE_CO_DETAILS)g.displayObjectInfoInsideIDcard(t.params.changeOrderId);else if(t&&t.name==d.ROUTE_CR_DETAILS)V.displayObjectInfoInsideIDcard(t.params.changeRequestId);else if(t&&t.name==d.ROUTE_CA_DETAILS)R.displayObjectInfoInsideIDcard(t.params.changeRequestId);else if(t&&t.name==d.ROUTE_IR_DETAILS)J.displayObjectInfoInsideIDcard(t.params.changeRequestId);else if(t&&t.name==d.ROUTE_MY_CHANGE_REQUESTS)C.navigate(d.ROUTE_MY_CHANGE_REQUESTS,{isRefresh:!0},{reload:!0});else if(t&&t.name==d.ROUTE_MY_INVESTIGATION_REQUESTS)C.navigate(d.ROUTE_MY_INVESTIGATION_REQUESTS,{isRefresh:!0},{reload:!0});else if(t&&t.name==d.ROUTE_MY_CHANGE_ACTIONS)C.navigate(d.ROUTE_MY_CHANGE_ACTIONS,{isRefresh:!0},{reload:!0});else if(t&&(t.name.includes(d.ROUTE_CR_ORCHESTRATION_LEVEL1)||t.name.includes(d.ROUTE_CO_ORCHESTRATION_LEVEL1))){let e=[H._KEY,H._MODEL],i=v.getPreference(e),n={};n.rootNode=i[H._ID_CARD],n.level1Node=i[H._ORCHESTRATION_LEVEL1],n.level="level1",(t.name.includes(d.ROUTE_CR_ORCHESTRATION_LEVEL2)||t.name.includes(d.ROUTE_CO_ORCHESTRATION_LEVEL2))&&(n.level2Node=i[H._ORCHESTRATION_LEVEL2],n.level="level2"),(t.name.includes(d.ROUTE_CR_ORCHESTRATION_LEVEL3)||t.name.includes(d.ROUTE_CO_ORCHESTRATION_LEVEL3))&&(n.level3Node=i[H._ORCHESTRATION_LEVEL3],n.level="level3");let o=t.name;C.navigate(o,{id:t.params.changeOrderId,name:t.params.changeOrderName,title:t.params.changeOrderTitle,nodeModel:n},{reload:!0})}else C.navigate(d.ROUTE_RECENTY_OPENED,{},{reload:!0})}))}))}};return te})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/UIKIT/Mask","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y,E,O){"use strict";var G={createAffectedItemsView:function(n,l){var d=this;n.target.setStyles({position:"relative"}),this.contextId=n.id;var p={};p=UWA.merge(p,n),c.makeDroppable(p.target,d.dropHandler),p.modelEvents=l,this.modelEvents=l,p.columns=t.getColumns(),this.ChgIRAffectedItemsDataGridModel=new i(p.id,p.contextDetails),this.treeDocument=p.treeDocument=this.ChgIRAffectedItemsDataGridModel.createTreeDocument(),this.ChgIRAffectedItemsDataGridModel.registerCustomFilter(),d.ChgIRAffectedItemsTreeModel=p.treeDocument,this.subscribeToModelEvents(p.treeDocument),this.chgIRAffectedItemsView=new e(p),w.showLoader(p.target,this.chgIRAffectedItemsView.loader);let u=this.chgIRAffectedItemsView.chgGridView;o.getIRAffectedItems(n.id,!0).then((async function(e){console.log("AffectedItems list: "+e);var t={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(t=e.data[0].non3DSpaceNonIndexedData,e.data.splice(0,1));var o=await a.processIRAffectedItems(e),l=[],c=[];for(let e=0;e<o.length;e++)o[e].isAffectedUsages&&"true"==o[e].isAffectedUsages?c.push(o[e]):l.push(o[e]);if(o=[],o=l.concat(c),d.chgIRAffectedItemsDataGridModel=new i(n.id),0==o.length){if(g.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&D.isMasked(e)&&D.unmask(e)}else w.hideLoader(p.target,d.chgIRAffectedItemsView.loader);d.modelEvents.publish({event:"showEmpty-datagrid",data:u})}if(w.fetchMaturityStateCSS(o),await d.chgIRAffectedItemsDataGridModel.loadAffectedItemsData(p.treeDocument,o,p.contextDetails.access),w.hideLoader(p.target,d.chgIRAffectedItemsView.loader),t&&t.length>0){var h=new Map,m=t.length;for(let e=0;e<t.length;e+=50){let i=[];i=m<50?t.slice(e,e+m):t.slice(e,e+50);for(var f=[],v=new Map,I=i,_=0;_<I.length;_++){var b=I[_];f.push(b.id),v.set(b.id,b)}var S=[];if(f.length>0){var y=a.commonPredicatedForFedSearch(),O=await a.callFederatedSearch(f,y);if(O&&O.results&&O.results.length>0)S=await a.processIRAffectedItemsFederatedSearch(O,v)}await d.chgIRAffectedItemsDataGridModel.loadAffectedItemsData(p.treeDocument,S),w.hideLoader(p.target,d.chgIRAffectedItemsView.loader),h=new Map([...h,...v]),m-=50}if(h&&h.size>0){d.chgIRAffectedItemsView.indexInfoDiv.show();var N=await C.recent();if(N&&N.results&&N.results.length>0){var A=a.filterNonIndexedDataNew(N,h);h.size!=A.length&&r.warn(s.CHG_GOV_Not_Accessable_Data,!0);var V=await a.processInformationForRecentIRAffected(A);w.fetchMaturityStateCSS(V),await d.chgIRAffectedItemsDataGridModel.loadAffectedItemsData(p.treeDocument,V,p.contextDetails.access)}}}else d.chgIRAffectedItemsView.indexInfoDiv.hide();var M=a.getDefaultFilter(p.columns);p.treeDocument.setFilterModel(M),p.isSelected&&"false"==g.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(d.ChgIRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:d.ChgIRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,d.ChgIRAffectedItemsTreeModel)})),0==p.treeDocument.getChildren().length?p.treeDocument._modelEvents.publish({event:"treeEmpty"}):p.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),G.chgIRAffectedItemsView.chgGridView.addEventListener("postEdit",(function(e,t){E.changeDispositionType(t)})),d.chgIRAffectedItemsView.loadCustomColumns(),w.hideLoader(p.target,d.chgIRAffectedItemsView.loader)}),(function(e){if(g.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&D.isMasked(e)&&D.unmask(e)}else w.hideLoader(p.target,d.chgIRAffectedItemsView.loader);return Promise.reject(e)}))},async dropHandler(e){G.ChgIRAffectedItemsDataGridModel.treeDocument;var t=G.ChgIRAffectedItemsDataGridModel.contextDetails.access,i=[];i=C.parseObjectInformation(e);let n=G.treeDocument.getAllDescendants().map((e=>e.options.grid.id)),o=e.map((e=>e.objectId));var a=[],l=0;for(let e=0;e<o.length;e++)for(let t=0;t<n.length;t++)o[e]==n[t]&&(a[l]=e,l++);a.length>0&&r.warn(s.CHG_GOV_NODE_PRESENT_WARN_AFFECTED_ITEM,!0);for(let e=0;e<a.length;e++)i.splice(a[e]-e,1);if(i.length>0&&"true"===t.accessBits["Manage Reported Against"]){await G.ChgIRAffectedItemsDataGridModel.addExistingChildren(i);let e=G.chgIRAffectedItemsView.options.custom_view_options;null!=e&&w.loadCustomColumns(e)}else"false"===t.accessBits["Manage Reported Against"]?r.error(s.CHG_GOV_ChangeOrchestration_AddExisting_No_Access):r.error(s.CHG_GOV_Common_Drop_Error)},subscribeToModelEvents:function(e){var t=this;m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,(function(e){G.ChgIRAffectedItemsDataGridModel.filterView(e)})),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,(function(e){G.ChgIRAffectedItemsDataGridModel.enableColorizeView(e)})),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(e){G.ChgIRAffectedItemsDataGridModel.disableColorizeView(e)})),m.unsubscribe(`irAffectedItems:${widget.id}`),m.subscribe(`irAffectedItems:${widget.id}`,(function(e){if("false"==g.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgIRAffectedItemsTreeModel),e._cleanBIFilterProxy();let i={data:{roots:t.ChgIRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(i,t.ChgIRAffectedItemsTreeModel)})),Object.keys(G.chgIRAffectedItemsView.options.treeDocument.getXSO()._items).length>0){let e=G.chgIRAffectedItemsView.options.treeDocument.getXSO()._items;for(let t in e)G.chgIRAffectedItemsView.onSelectionChange(G.chgIRAffectedItemsView._modelEvents,e[t],G.chgIRAffectedItemsView.id,G.chgIRAffectedItemsView.options.contextDetails.isKindOfType,!0)}else G.chgIRAffectedItemsView.onSelectionChange(G.chgIRAffectedItemsView._modelEvents,G.chgIRAffectedItemsView.options.treeDocument._getTrueRoot(),G.chgIRAffectedItemsView.id,G.chgIRAffectedItemsView.options.contextDetails.isKindOfType,!1)})),m.unsubscribe("updateAffectedItemsGrid"+(widget?widget.id:"")),m.subscribe("updateAffectedItemsGrid"+(widget?widget.id:""),(async function(e){if("update"==e.action){if(e.dispInfo&&e.dispInfo[0].ApprovalStatus&&null!=e.dispInfo[0].ApprovalStatus.icon){var t={data:e.dispInfo},n=await O.getColumnApprovalStatusValue(a.createPayloadApprovalStatusValue(t));n&&n[e.dispInfo[0].dispostionId]&&(e.dispInfo[0].ApprovalStatus=n[e.dispInfo[0].dispostionId].approvalStatus,e.dispInfo[0].approvalStatusModel=n[e.dispInfo[0].dispostionId].approvalStatusModel)}if(e.dispInfo[0].resolvedByInformation&&e.dispInfo[0].resolvedByInformation[0]&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]&&e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById){let t=e.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById;var o=(await C.recent()).results,s=[],r={resolvedById:t};for(let e=0;e<o.length;e++){let i=o[e].attributes.filter((e=>"resourceid"==e.name)).map((e=>e.value));if(i&&1==i.length&&t===i[0]){var l={};l.nonIndexedData=o[e].attributes,l.nonIndexedModelerData=r,s.push(l)}}var d=await a.processInformationForRecentResolvedByDisposition(s);e.dispInfo[0].resolvedByInformation=[],e.dispInfo[0].resolvedByInformation.push({non3DSpaceNonIndexedDataForResolvedBy:d})}(c=G.treeDocument.getAllDescendants()).forEach((async t=>{t.options.grid.dispositionInformation&&t.options.grid.dispositionInformation[0]&&t.options.grid.dispositionInformation[0].dispostionId==e.dispositionId&&E.updateDispositionInfo(t,e.dispInfo)}))}else if("replaceDisposition"==e.action){var c=G.treeDocument.getAllDescendants();G.ChgIRAffectedItemsDataGridModel.contextID==e.investigationRequestId&&c.forEach((async t=>{t.options.grid&&t.options.grid.id==e.affectedItemId&&E.updateDispositionInfo(t,e.dispInfo)}))}else if("createUpdateAffectedUsage"==e.action){if((c=G.treeDocument.getAllDescendants()).some((t=>t.options.grid.id==e.affectedUsageInfo.affectedItemId)))G.ChgIRAffectedItemsDataGridModel.contextID==e.affectedUsageInfo.investigationRequestId&&c.forEach((async t=>{t.options.grid&&t.options.grid.id==e.affectedUsageInfo.affectedItemId&&E.updateDispositionInfo(t,e.dispInfo)}));else{var p=G.ChgIRAffectedItemsDataGridModel.contextDetails.access;e.affectedUsageInfo.nodeModel.dispositionInformation=e.dispInfo;var u=await i.prototype.createTreeDocumentNodeModel([e.affectedUsageInfo.nodeModel],p);G.treeDocument.prepareUpdate(),G.treeDocument.addRoot(u),G.treeDocument.pushUpdate()}}else if("createDisposition"==e.action){if(G.contextId==e.investigationRequestId)(c=G.treeDocument.getAllDescendants()).forEach((async t=>{t.options.grid&&t.options.grid.id==e.affectedItemId&&E.updateDispositionInfo(t,e.dispInfo)}))}else if("removeDisposition"==e.action){c=G.treeDocument.getAllDescendants(),p=G.ChgIRAffectedItemsDataGridModel.contextDetails.access;c.forEach((async t=>{let i=t.options.grid;i.dispositionInformation&&i.dispositionInformation[0]&&t.options.grid.dispositionInformation[0].dispostionId==e.dispositionId&&i&&i.id==e.affectedItemId&&t.updateOptions({grid:{dispositionName:w.defaultDispositionNameValue(p),dispositionResolvedBy:void 0,dispositionType:void 0,dispositionMaturity:void 0,ApprovalStatus:void 0,approvalStatusModel:void 0,approvers:void 0,dispositionInformation:void 0,dispositionRevision:void 0}})}))}})),m.unsubscribe("updateDisposition"+(widget?widget.id:"")),m.subscribe("updateDisposition"+(widget?widget.id:""),(async function(e){var t={data:e.dispInfo},n=await O.getColumnApprovalStatusValue(a.createPayloadApprovalStatusValue(t));for(let t=0;t<e.dispInfo.length;t++){var o=[];if(o.push(e.dispInfo[t]),"update"==e.action){n&&n[e.dispInfo[t].dispostionId]&&(e.dispInfo[t].ApprovalStatus=n[e.dispInfo[t].dispostionId].approvalStatus,e.dispInfo[t].approvalStatusModel=n[e.dispInfo[t].dispostionId].approvalStatusModel),(s=G.treeDocument.getAllDescendants()).forEach((async i=>{var n=i.options.grid;n.dispositionInformation&&n.dispositionInformation[0]&&n.dispositionInformation[0].dispostionId==e.dispInfo[t].dispostionId&&E.updateDispositionInfo(i,o)}));let i=I("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler");if(i&&i.chgGovDataGridView){(s=i.chgGovDataGridView.options.treeDocument.getAllDescendants()).forEach((async i=>{var n=i.options.grid;n.dispositionInformation&&n.dispositionInformation[0]&&n.dispositionInformation[0].dispostionId==e.dispInfo[t].dispostionId&&E.updateDispositionInfo(i,o)}));let n=i.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Apply.elements.button,a=i.chgGovDataGridView.dgView._modelMassUpdateDialog.buttons.Ok.elements.button;n.dsModel.disabled=!1,a.dsModel.disabled=!1;let r=document.getElementsByClassName("wux-windows-window-mask-content");r&&r.length>1&&e.buttonFlag&&"OK"==e.buttonFlag&&D.unmask(r[r.length-2])}let a=I("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler");if(a&&a.chgAffectUsageDataGridView){(s=a.chgAffectUsageDataGridView.options.treeDocument.getAllDescendants()).forEach((async i=>{var n=i.options.grid;n.dispositionInformation&&n.dispositionInformation[0]&&n.dispositionInformation[0].dispostionId==e.dispInfo[t].dispostionId&&E.updateDispositionInfo(i,o)}));let i=a.chgAffectUsageDataGridView.affectedUsageDgView._modelMassUpdateDialog.buttons.Apply.elements.button,n=a.chgAffectUsageDataGridView.affectedUsageDgView._modelMassUpdateDialog.buttons.Ok.elements.button;i.dsModel.disabled=!1,n.dsModel.disabled=!1;let r=document.getElementsByClassName("wux-windows-window-mask-content");r&&r.length>1&&e.buttonFlag&&"OK"==e.buttonFlag&&D.unmask(r[r.length-2])}(s=I("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout").treeDocument.getAllDescendants()).forEach((async i=>{var n=i.options.grid;n.dispositionInformation&&n.dispositionInformation[0]&&n.dispositionInformation[0].dispostionId==e.dispInfo[t].dispostionId&&E.updateDispositionInfo(i,o)}))}else if("replaceDisposition"==e.action){var s=G.treeDocument.getAllDescendants();G.ChgIRAffectedItemsDataGridModel.contextID==e.investigationRequestId&&s.forEach((async t=>{t.options.grid&&t.options.grid.id==e.affectedItemId&&E.updateDispositionInfo(t,o)}))}else if("createUpdateAffectedUsage"==e.action){if((s=G.treeDocument.getAllDescendants()).some((t=>t.options.grid.id==e.affectedUsageInfo.affectedItemId)))s.forEach((async t=>{t.options.grid&&t.options.grid.id==e.affectedUsageInfo.affectedItemId&&E.updateDispositionInfo(t,o)}));else{var r=G.ChgIRAffectedItemsDataGridModel.contextDetails.access;e.affectedUsageInfo.nodeModel.dispositionInformation=o;var l=await i.prototype.createTreeDocumentNodeModel([e.affectedUsageInfo.nodeModel],r);G.treeDocument.prepareUpdate(),G.treeDocument.addRoot(l),G.treeDocument.pushUpdate()}}else if("createDisposition"==e.action){if(G.contextId==e.investigationRequestId)(s=G.treeDocument.getAllDescendants()).forEach((async t=>{t.options.grid&&t.options.grid.id==e.affectedItemId&&E.updateDispositionInfo(t,o)}))}else if("removeDisposition"==e.action){s=G.treeDocument.getAllDescendants(),r=G.ChgIRAffectedItemsDataGridModel.contextDetails.access;s.forEach((async i=>{let n=i.options.grid;n.dispositionInformation&&n.dispositionInformation[0]&&i.options.grid.dispositionInformation[0].dispostionId==e.dispInfo[t].dispostionId&&n&&n.id==e.affectedItemId&&i.updateOptions({grid:{dispositionName:w.defaultDispositionNameValue(r),dispositionResolvedBy:void 0,dispositionType:void 0,dispositionMaturity:void 0,ApprovalStatus:void 0,approvalStatusModel:void 0,approvers:void 0,dispositionInformation:void 0,dispositionRevision:void 0}})}))}}})),m.unsubscribe("updateRouteContent-"+widget.id),m.subscribe("updateRouteContent-"+widget.id,(async function(e){e="string"==typeof e?JSON.parse(e):e,e=O.getApprovalStatusValue(e);let t=Object.keys(e)[0],i=await o.getDispositionInfo(G.ChgIRAffectedItemsDataGridModel.contextID,[{dispositionIds:[t]}]),n=await E.enrichDispositionInfo(i.data[0].doTargetDisposition),a="update";m.publish("updateAffectedItemsGrid"+(widget?widget.id:""),{dispositionId:t,dispInfo:n,action:a}),m.publish("updateDispositionGrid"+(widget?widget.id:""),{dispositionId:t,dispInfo:n,action:a}),m.publish("updateAffectedUsageGrid"+(widget?widget.id:""),{dispositionId:t,dispInfo:n,action:a}),m.publish("updateChangeImpactsGrid"+(widget?widget.id:""),{dispositionId:t,dispInfo:n,action:a})})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-on-dblclick"},(function(e){if(g.getGlobalVariable().is3DSpace){I("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else G.modelEvents.publish({event:"information-panel-open",data:null})})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("ir-affected-item-object-selection-update")]||this.modelEvents.subscribe({event:"ir-affected-item-object-selection-update"},(function(e){G.handleObjectSelectionUpdate(e)}))},addExistingHandler:function(){console.log("addExistingHandler cr affecteditems!");var e={commandInfo:{type:"Investigation Request",facet:"Affected Items",action:"IR>Affected Items>Add Reported Item"}};b.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=G.ChgIRAffectedItemsDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingAffectedItem",extendedQuery:G.createExcludeListForSearch(t)};const o=n.activateSearch();g.getGlobalVariable().is3DSpace&&o.socket.subscribeServer("SearchComServer",getTopWindow()),n.search(s.CHG_GOV_AffectedItems_AddExisting_Search_Header,"",G.OnSearchComplete,"changeAffectedItems",o,void 0,void 0,i)},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:async function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][8]&&null!=e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2],environment:g.getGlobalVariable().tenant});if(t.length){await G.ChgIRAffectedItemsDataGridModel.addExistingChildren(t);let e=G.chgIRAffectedItemsView.options.custom_view_options;null!=e&&w.loadCustomColumns(e)}},removeHandler:function(){console.log("removeHandler!");var e={commandInfo:{type:"Investigation Request",facet:"Affected Items",action:"IR>Affected Items>Remove"}};if(b.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=G.ChgIRAffectedItemsDataGridModel.treeDocument.getSelectedNodes().length)if(g.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&D.mask(e)}else{let e=document.getElementById("crAffectedItems");e&&D.mask(e)}G.ChgIRAffectedItemsDataGridModel.removeChildren()},handleAccessBitUpdate:function(e){e.id==G.contextId&&(console.log("ChgIRAffectedItemsDataGridLayout handleAccessBitUpdate"+e),"false"==e.accessBits.ManageAffectedItem?(G.accessBitManageAffectedItem=!1,G.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1})):G.accessBitManageAffectedItem=!0,e.accessBits.ManageChangeAnalysis)},handleObjectSelectionUpdate:function(e){if(e.count>0){if(G.accessBitManageAffectedItem){this.treeDocument.getSelectedNodes().some((e=>!e.options.grid.affectedAsIR||"Affected"==e.options.grid.affectedAsIR&&"false"==e.options.grid.isAffectedUsages))?G.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1}):G.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),1===e.count&&this.treeDocument.getSelectedNodes()[0]&&"Reported"==this.treeDocument.getSelectedNodes()[0].options.grid.affectedAsIR?G.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("manageScope",{visibleFlag:!0}):G.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("manageScope",{visibleFlag:!1})}G.accessBitManageChangeAnalysis&&(G.chgIRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="enabled")}else G.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),G.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("manageScope",{visibleFlag:!1})},manageScopeHandler:function(){var e={commandInfo:{type:"Investigation Request",facet:"Affected Items",action:"IR>Affected Items>Manage Scope"}};b.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=G.treeDocument.getSelectedNodes(),i=t[0]._options.grid.scopeAnalysisId,n=G.ChgIRAffectedItemsDataGridModel.contextID,o=G.ChgIRAffectedItemsDataGridModel.contextDetails;t&&t.length>0?y.launchManageScopeView(t[0],i,n,o):r.error(s.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleForMaturityUpdate:function(e){if(e){JSON.parse(e);let t=G.treeDocument.getSelectedNodes();"Disposition"==JSON.parse(e).Refresh.modified[0].policy||w.getHandleForMaturityUpdate(JSON.parse(e),t)}},handleDispositionMaturityEvent:function(e){G.modelEvents.publish({event:"AffectedItem-DataGrid-Update-on-dispostion",data:e})},globalSubscribeForAffectedItemsBasisView:function(){u.addObserver("ChgIRAffectedItemsDataGridLayout","CO-AccessBit-Update",G.handleAccessBitUpdate),u.addObserver("ChgIRAffectedItemsDataGridLayout","Lifecycle.Modification",G.handleForMaturityUpdate)},addApproverHandler:function(e){console.log("Handler called for add approver"),e.type="Disposition",S.getDataToBuildAddMemberPanel(e),S.launchAddMemberPanel()}};return G.globalSubscribeForAffectedItemsBasisView(),G})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENONewWidget/ENONewLauncher"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h){"use strict";var m=a.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),C=e.extend({init:function(e){this._parent(e),C.contextDetails=e.contextDetails},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.onPreExpand((async function(e){var t=this;t.modedEventInfo=e,console.log(c),require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler"],(function(e){console.log(c);let i=e.investigationRequestId,n=t.modedEventInfo.data.nodeModel.options.grid.id;var o=[];o.push({id:n}),d.getAllAffectedUsages(i,o).then((async function(e){console.log(e);var i=void 0;if(e.data&&e.data[0]&&e.data[0].AffectedUsagesInfo&&e.data[0].AffectedUsagesInfo.length>0&&(i=e.data[0].AffectedUsagesInfo)[0]&&i[0].non3DSpaceNonIndexedData&&(i[0].non3DSpaceNonIndexedData,i[0].mapping&&i[0].mapping,i.splice(0,1)),null!=i){var n={};n.data=i;var o=await p.processIRAffectedItems(n);o.forEach((e=>{e.isAffectedUsages=!0}));var a=await C.prototype.createTreeDocumentNodeModel(o);if(t.modedEventInfo.target.hasChildren())for(var s=!1,r=t.modedEventInfo.target.getChildren(),l=0;l<a.length;l++){s=!1;for(var d=0;d<r.length;d++)if(r[d].options.grid.id==a[l].options.grid.id){s=!0;break}s||t.modedEventInfo.target.addChild(a[d])}else t.modedEventInfo.target.addChild(a)}t.modedEventInfo.target.preExpandDone()}),(function(e){reject(e)}))}))})),this.setTreeDocument(e),e},createTreeDocumentNodeModel:async function(e){let t=[];for(let i=0;i<e.length;i++){let n=await this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:async function(e){let t=e.name+" | "+e.typeNLS;var n,o=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var a=this.getCustomTooltip(e);if(n=s.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,e.dispositionInformation&&e.dispositionInformation[0]&&e.dispositionInformation[0].dispostionId){var r=e.dispositionInformation[0].dispositionAccessBits[0]["Manage Approver"],d=e.dispositionInformation[0].dispositionAccessBits[0]["Manage Resolved By"];e.dispositionMaturity=e.dispositionInformation[0].dispositionCurrentStateNLS,e.dispositionName=l.dispositionNameMethod(e.dispositionInformation[0].dispostionIcon,e.dispositionInformation[0].dispositionName),e.dispositionInformation[0].approvers&&e.dispositionInformation[0].approvers.length>0?e.approvers=l.addApproversUserIconMethod(e.dispositionInformation[0].approvers):"true"===s.getGlobalVariable().isFullLicence&&"true"===r&&(e.approvers=l.addApproversDefaultMethod());let t=e.dispositionInformation[0].dispositionType;if(t&&(e.dispositionType="DOCUMENT"==t?"documentKey":"NO_FIX"==t?"notFixKey":"FIX"==t?"fixKey":"NOT_IMPACTED"==t?"notImpactedTypeKey":"noneKey"),e.dispositionRevision=e.dispositionInformation[0].dispositionRevision,e.dispositionInformation[0]&&e.dispositionInformation[0].resolvedByInformation&&e.dispositionInformation[0].resolvedByInformation[0]&&(e.dispositionInformation[0].resolvedByInformation[0].indexResolvedBy&&e.dispositionInformation[0].resolvedByInformation[0].indexResolvedBy.length>0||e.dispositionInformation[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&e.dispositionInformation[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy.length>0)){var c=e.dispositionInformation[0].resolvedByInformation[0];if(c.indexResolvedBy&&c.indexResolvedBy.length>0){let t=c.indexResolvedBy[0].resolvedByName?c.indexResolvedBy[0].resolvedByName:"",i=c.indexResolvedBy[0].resolvedByIcon?c.indexResolvedBy[0].resolvedByIcon:"";e.dispositionResolvedBy=l.resolvedByNameMethod("",t,i)}else if(c.non3DSpaceNonIndexedDataForResolvedBy&&c.non3DSpaceNonIndexedDataForResolvedBy.length>0){let t=await p.resolvedByInformationForCrossServiceAndRecents(c.non3DSpaceNonIndexedDataForResolvedBy),i=t[0]&&t[0].resolvedByName?t[0].resolvedByName:"",n=t[0]&&t[0].resolvedByIcon?t[0].resolvedByIcon:"";e.dispositionResolvedBy=l.resolvedByNameMethod("",i,n),e.dispositionInformation[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy=t}}else"true"===s.getGlobalVariable().isFullLicence&&"true"===d&&(e.dispositionResolvedBy=l.resolvedByDefaultForDispostion())}else e.dispositionName=l.defaultDispositionNameValue(C.contextDetails.access);return new i({label:n,subLabel:t,description:o,grid:e,icons:[e.icon],thumbnail:e.thumbnail,customTooltip:a,children:[],contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return e.name&&e.currentNLS?o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=s.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),a="";if(s.getGlobalVariable().isSwymInstalled)a=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);a=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"}),a.style.setProperty("background",t.avatarColor)}a.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},createCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.Title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.Name+"\n"+o.CHG_GOV_DataGrid_Column_Severity+": "+e.Severity+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.Owner+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.State},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var a=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(a),a.inject(n)}return n.inject(i),i.outerHTML},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});let i=this.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},loadAffectedUsageData:async function(e,t){e.prepareUpdate();var i=await this.createTreeDocumentNodeModel(t);i.sort(((e,t)=>e.options.grid.revision.localeCompare(t.options.grid.revision)));for(var n=0;n<i.length;n++)e.addChild(i[n]);e.pushUpdate()},createNewDispositionInAffectedUsages:async function(e,t,i,n){try{var o=await d.createDispositionFromIR(e,t)}catch(e){n.chgAffectUsageDataGridView.hideSpinner()}let a=o.data[0].dispositionType,s=null,r=o.data[0].dispositionRevision,c=o.data[0].dispositionOwner,p=o.data[0].dispositionOwnerFullName,u=o.data[0].dispositionIcon?o.data[0].dispositionIcon:o.data[0].icon;a&&(s="DOCUMENT"==a?"documentKey":"NO_FIX"==a?"notFixKey":"FIX"==a?"fixKey":"NOT_IMPACTED"==a?"notImpactedTypeKey":"noneKey"),i.options.grid.dispositionInformation=[],i.options.grid.dispositionInformation[0]={dispostionId:o.data[0].id,dispositionName:o.data[0].dispositionName,dispositionCurrentState:o.data[0].dispositionCurrentState,dispositionPolicy:o.data[0].dispositionPolicy,dispositionType:a,dispositionRevision:r,dispositionOwner:c,dispositionOwnerFullName:p,dispositionIcon:u},i.updateOptions({grid:{dispositionName:l.dispositionNameMethod(o.data[0].icon,o.data[0].dispositionName),dispositionMaturity:o.data[0].dispositionCurrentStateNLS,dispositionType:s,dispositionRevision:r,dispositionOwner:p}}),console.log(o)},changeApprovalStatus:async function(e,t){e&&t&&e.updateOptions({grid:{ApprovalStatus:t.approvalStatus,approvalStatusModel:t.approvalStatusModel,maturityNLS:t.maturity_NLS,maturityWithBadge:t.maturity_NLS}})}});return C})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageDataGridView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageToolbar","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageContextualMenu","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridCol","DS/UIKIT/Input/Button","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgServices/scripts/services/ChgDataProcess","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b){"use strict";return e.extend({init:function(e){this._parent(e);this._modelEvents=null,this._toolbar=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new n},render:function(){var e=this;if(this.options.treeDocument&&this.options.target){var n={treeDocument:this.options.treeDocument,columns:this.options.columns,cellSelection:"none",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:d.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"dgViewFor_AffectedUsage",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!0,onContextualEvent:function(t){var i=[];if(t.context="AffectedUsage",t&&t.collectionView&&t.cellInfos){if(t.cellInfos.rowID>=0&&5==t.cellInfos.columnID)return m.showRMBMenuOnGridForDispositionCell(t,e.options.investigationRequestId,e.options.contextDetails.access).then((function(e){return e}));if(t.cellInfos.rowID>=0&&12==t.cellInfos.columnID)return m.showRMBMenuOnGridForResolvedByCell(t).then((function(e){return e}));if(t.cellInfos.rowID>=0)return m.showRMBMenuOnGrid(t).then((function(e){return e}));i=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){t.draggedNodes&&1==t.draggedNodes.length&&5==t.columnID?c.readyDragContentForDisposition(e,t):t.draggedNodes&&1==t.draggedNodes.length&&12==t.columnID?c.readyDragContentForResolvedBy(e,t):r.readyDragContent(e,t)}};n=UWA.merge(n,this.options),this.affectedUsageDgView=new t(n),this.affectedUsageDgView.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map((e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);s.getGlobalVariable().customeViewCOList=e}}}))},this.affectedUsageDgView.registerReusableCellContent({id:"RevColId",buildContent:function(){return new UWA.Element("div",{class:"RevColId",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}})}}),this.affectedUsageDgView.registerReusableCellContent({id:"revEmptyColId",buildContent:function(){return new UWA.Element("div",{styles:{"padding-left":"5px"}})}}),this.options.columns[2].onCellRequest=function(t){if(t.nodeModel.getAttributeValue("revision")&&""!==t.nodeModel.getAttributeValue("revision")){var i=e.affectedUsageDgView.reuseCellContent("RevColId");i.setContent(t.nodeModel.getAttributeValue("revision")),t.cellView.setReusableContent(i)}else t.cellView.setReusableContent(e.affectedUsageDgView.reuseCellContent("revEmptyColId"))},this.options.columns[5].children[1].onCellRequest=function(t){if(t.nodeModel.getAttributeValue("dispositionRevision")&&""!==t.nodeModel.getAttributeValue("dispositionRevision")){var i=e.affectedUsageDgView.reuseCellContent("RevColId");i.setContent(t.nodeModel.getAttributeValue("dispositionRevision")),t.cellView.setReusableContent(i)}else t.cellView.setReusableContent(e.affectedUsageDgView.reuseCellContent("revEmptyColId"))},a.unsubscribe("ChgGov_delayed_columns_model_updated"+widget.id),a.subscribe("ChgGov_delayed_columns_model_updated"+widget.id,(function(t){e.affectedUsageDgView.prepareUpdateView(),e.affectedUsageDgView.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0)})),a.unsubscribe("updateAffectedUsageGrid"+(widget?widget.id:"")),a.subscribe("updateAffectedUsageGrid"+(widget?widget.id:""),(async function(t){if("update"==t.action){if(t.dispInfo&&t.dispInfo[0].ApprovalStatus&&null!=t.dispInfo[0].ApprovalStatus.icon){var i={data:t.dispInfo},n=await v.getColumnApprovalStatusValue(_.createPayloadApprovalStatusValue(i));n&&n[t.dispInfo[0].dispostionId]&&(t.dispInfo[0].ApprovalStatus=n[t.dispInfo[0].dispostionId].approvalStatus,t.dispInfo[0].approvalStatusModel=n[t.dispInfo[0].dispostionId].approvalStatusModel)}if(t.dispInfo[0].resolvedByInformation&&t.dispInfo[0].resolvedByInformation[0]&&t.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy&&t.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0]&&t.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById){let e=t.dispInfo[0].resolvedByInformation[0].non3DSpaceNonIndexedDataForResolvedBy[0].resolvedById;var o=(await r.recent()).results,a=[],s={resolvedById:e};for(let t=0;t<o.length;t++){let i=o[t].attributes.filter((e=>"resourceid"==e.name)).map((e=>e.value));if(i&&1==i.length&&e===i[0]){var l={};l.nonIndexedData=o[t].attributes,l.nonIndexedModelerData=s,a.push(l)}}var d=await _.processInformationForRecentResolvedByDisposition(a);t.dispInfo[0].resolvedByInformation=[],t.dispInfo[0].resolvedByInformation.push({non3DSpaceNonIndexedDataForResolvedBy:d})}(p=e.options.treeDocument.getAllDescendants()).forEach((async e=>{e.options.grid.dispositionInformation&&e.options.grid.dispositionInformation[0]&&e.options.grid.dispositionInformation[0].dispostionId==t.dispositionId&&I.updateDispositionInfo(e,t.dispInfo)}))}else if("replaceDisposition"==t.action){(p=e.options.treeDocument.getAllDescendants()).forEach((async e=>{e.options.grid&&e.options.grid.id==t.affectedItemId&&I.updateDispositionInfo(e,t.dispInfo)}))}else if("createDisposition"==t.action){(p=e.options.treeDocument.getAllDescendants()).forEach((async e=>{e.options.grid&&e.options.grid.id==t.affectedItemId&&I.updateDispositionInfo(e,t.dispInfo)}))}else if("removeDisposition"==t.action){var p=e.options.treeDocument.getAllDescendants(),u=e.options.contextDetails.access;p.forEach((async e=>{let i=e.options.grid;i.dispositionInformation&&i.dispositionInformation[0]&&e.options.grid.dispositionInformation[0].dispostionId==t.dispositionId&&i&&i.id==t.affectedItemId&&e.updateOptions({grid:{dispositionName:c.defaultDispositionNameValue(u),dispositionResolvedBy:void 0,dispositionType:void 0,dispositionMaturity:void 0,ApprovalStatus:void 0,approvalStatusModel:void 0,approvers:void 0,dispositionInformation:void 0,dispositionRevision:void 0}})}))}})),g.toolbar=this.affectedUsageDgView.setToolbar(g.writetoolbarDefinition()),this.toolbar=g.toolbar,this.affectedUsageDgView.buildStatusBar([{type:i.STATUS.NB_ITEMS},{type:i.STATUS.NB_SELECTED_ROWS}]),this.affectedUsageDgView.getTreeDocument().getXSO().onAdd((function(e){})),this.affectedUsageDgView.getTreeDocument().getXSO().onRemove((function(e){})),this.affectedUsageDgView.addEventListener(o.POINTERHIT,(function(t,i){e.onItemClick(t,i)})),this.affectedUsageDgView.addEventListener("postEdit",(function(e,t){I.changeDispositionType(t)})),this.affectedUsageDgView.addEventListener("postEdit",(function(t,i){11==i.columnID&&e.updateApproversForDisposition(i)})),this.affectedUsageDgView.onDropCell=function(t,i){if(5==i.columnID||12==i.columnID)if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.dataTransfer&&t.dataTransfer.dropEffect&&(t.dataTransfer.dropEffect="copy"),5==i.columnID)if(i.cellModel.contains("chgIRAffectedDragAndDropDisposition")){var n=t.dataTransfer.getData("text");if(i.nodeModel.options&&i.nodeModel.options.grid){let t={node:i.nodeModel,data:n,investigationRequestId:e.options.investigationRequestId,functionality:"dragAndDropDisposition",context:"ManageScope"};I.dragAndDropDisposition(t)}else D.warn(d.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else D.warn(d.CHG_GOV_Investigation_Request_Disposition_Already_There);else if(i.cellModel.contains("chgIRAffectedAddExistingCADragAndDropResolvedby")){n=t.dataTransfer.getData("text");if(i.nodeModel.options.grid.dispositionInformation&&i.nodeModel.options.grid.dispositionInformation[0]&&i.nodeModel.options.grid.dispositionInformation[0].dispostionId){let e={node:i.nodeModel,data:n,functionality:"dragAndDropResolvedBy"};I.dragAndDropResolvedBy(e)}else D.warn(d.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else D.warn(d.CHG_GOV_Investigation_Request_Disposition_ResolvedBy_Already_There);return!0},document.getElementById("outer-manageScopeAffectedUsage-grid-div")&&document.getElementById("outer-manageScopeAffectedUsage-grid-div").destroy(),this.affectedUsageDgViewContainer=UWA.createElement("div",{id:"outer-manageScopeAffectedUsage-grid-div",class:"outer-manageScopeAffectedUsage-grid-div"});let l=UWA.createElement("div",{class:"toolbar-manageScopeAffectedUsage-grid-div"});this.toolbar.inject(l),this.affectedUsageDGView=UWA.createElement("div",{class:"content-manageScopeAffectedUsage-grid-div"});let p=UWA.createElement("div",{class:"footer-manageScopeAffectedUsage-grid-div"}),u=UWA.createElement("div",{class:"buttons-manageScopeAffectedUsage-grid-div"});new f({value:d.CHG_GOV_Button_Close,className:"primary"}).inject(u).addEvent("onClick",(function(){e.closeHandler()})),u.inject(p),this.affectedUsageDgView.inject(this.affectedUsageDGView),this.affectedUsageDgViewContainer.addContent(l),this.affectedUsageDgViewContainer.addContent(this.affectedUsageDGView),this.affectedUsageDgViewContainer.addContent(p),this.affectedUsageDgViewContainer.inject(this.options.target),this.affectedUsageDgViewContainer.setStyle("width",this.options.target.offsetWidth)}},closeHandler:function(){b("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler").manageScopePanel.close(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],(function(e){e.onRefresh()}))},refresh:function(){this.render()},onItemClick:function(e,t){var i=this;if(t&&t.nodeModel){if(1==e.multipleHitCount)if(i._modelEvents.publish({event:"ChgManageScopeAffectedUsage_DGV_onClick",data:t.nodeModel,context:t.nodeModel}),t&&5==t.columnID){if(e.target.className.contains("chgIRAffectedCreateNewDisposition")){var n={commandInfo:{type:"Investigation Request",facet:"Affected Usage",action:"IR>Affected Usage>Create Disposition"}};w.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),console.log("Create Disposition called");var o={model:t.nodeModel.options.grid,InvestigationRequestId:this.options.investigationRequestId,context:t.nodeModel,parentImpactedById:this.options&&this.options.physicalId?this.options.physicalId:void 0};require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler"],(function(e){console.log(e),o.model&&o.model.isAffectedUsages&&1==o.model.isAffectedUsages?I.createDispositionThroughVerticalAssessment(o):I.createDisposition(o)}))}else if(e.target.className.contains("chgIRAffectedAddExistingDisposition")){n={commandInfo:{type:"Investigation Request",facet:"Affected Usage",action:"IR>Affected Usage>Add Existing Disposition"}};w.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n});o={grid:t.nodeModel.options.grid,investigationRequestId:this.options.investigationRequestId,functionality:"AddExistingDisposition",primaryImpactedBy:this.options&&this.options.physicalId?this.options.physicalId:void 0,context:"ManageScope"};I.addExistingDispositionHandler(o)}else if(e.target.className.contains("disposition_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};p.buildAndDisplayContextualMenu(e.target,t)}}else if(t&&11==t.columnID){if(e.target.className.contains("chgIRDispositionAddApprover")){e.target.getOffsets().x,e.target.getOffsets().y;require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler"],(function(e){let i={id:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,model:t.nodeModel.getTreeDocument(),objectTitle:t.nodeModel.options.grid.title,dispositionID:t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0].dispostionId?t.nodeModel.options.grid.dispositionInformation[0].dispostionId:void 0};e.addApproverHandler(i)}))}}else if(t&&9==t.columnID){var a={};a.cellInfos=t;let e=a.cellInfos.nodeModel.options.grid.dispositionInformation,i=this.options.contextDetails.id;e&&e[0]&&e[0].dispostionId&&e[0].dispositionAccessBits&&("true"===e[0].dispositionAccessBits[0].Promote||"true"===e[0].dispositionAccessBits[0].Demote)&&c.executeMaturityForDisposition(a,i,I.getHandleForDispostionMaturity)}else if(!t||2!==t.columnID&&6!==t.columnID){if(t&&12===t.columnID)if(null==t.nodeModel.options.grid.dispositionInformation||""==t.nodeModel.options.grid.dispositionInformation)D.warn(d.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else{o={model:t.nodeModel.options.grid,InvestigationRequestId:this.options.investigationRequestId,context:t.nodeModel,parentImpactedById:this.options&&this.options.physicalId?this.options.physicalId:void 0};if(e.target.className.contains("chgIRAffectedCreateNewCAResolvedby"))if(null==t.nodeModel.options.grid.dispositionInformation||""==t.nodeModel.options.grid.dispositionInformation)D.warn(d.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else{n={commandInfo:{type:"Investigation Request",facet:"Affected Usage",action:"IR>Affected Usage>ResolvedBy>Create Change Action"}};w.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],(function(e){let t={node:i.options.treeDocument.getSelectedNodes()[0],invstigationRequestId:i.options.id,funcationality:"addResolvedBy"};I.createResolvedByInDispositionIR(t)}))}else if(e.target.className.contains("chgIRAffectedCreateAddExistingCAResolvedby")){console.log("Add existing called ResolvedBy ");n={commandInfo:{type:"Investigation Request",facet:"Affected Usage",action:"IR>Affected Usage>ResolvedBy>Add Existing Change Action or Task"}};w.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n});let e={node:i.options.treeDocument.getSelectedNodes()[0],invstigationRequestId:i.options.id,funcationality:"addExistingResolvedBy"};I.addExistingResolvedByHandler(e)}else if(e.target.className.contains("resolvedby_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};p.buildAndDisplayContextualMenu(e.target,t)}}}else"RevColId"===e.target.className&&(6===t.columnID?c.launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.sourceType?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.dispositionInformation[0].dispostionId,type:d.CHG_GOV_AffectedItems_Disposition,name:t.nodeModel.options.grid.dispositionInformation[0].dispositionName}):c.launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.sourceType?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,name:t.nodeModel.options.grid.name}));2==e.multipleHitCount&&(i._modelEvents.publish({event:"ChgGov_DGV_onDbClick",data:t.nodeModel,context:t.nodeModel}),t.nodeModel.select(!0))}},showSpinner:function(){console.log("show spinner"),u.mask(this.options.target)},hideSpinner:function(){console.log("hide spinner"),u.unmask(this.options.target)},reapplySortModel:function(){this.affectedUsageDgView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}},updateApproversForDisposition:function(e){console.log("update aapprivers handler");let t=e.nodeModel._options.grid.approvers,i=e.nodeModel._options.grid.dispositionInformation[0].approvers;console.log("approvers",t);const n={approver:{person:[],routetemplate:[]}};t.forEach((e=>{const t=(e.type||e.value.type).toLowerCase(),i=e.userid?"userid":"identifier",o=e[i]||e.value[i];"person"===t||"group"===t?n.approver[t].push(o):"route template"===t&&n.approver.routetemplate.push(e.id)}));let o=e.nodeModel._options.grid.dispositionInformation[0].dispostionId;b("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler").addmember(n,"Disposition",o,i)}})})),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler",["DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionDataGridView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionGridCols","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionGridModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridCol","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageDataGridView","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Tab","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/TreeDocument","require","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y){"use strict";var E={launchManageScopeView:async function(i,o,s,r){var c=this;this.scopeAnalysisId=o,this.investigationRequestId=s;let p=i.options.label;E.affectedRevisionContent=new UWA.Element("div",{id:"affectedRevisionDiv",styles:{height:"100%"}}),E.affectedUsageContent=new UWA.Element("div",{id:"affectedUsageDiv",styles:{height:"100%"}});var u=new t({identifier:"WebUX_IMF_ECM_MANAGE_SCOPE"}),g=new UWA.Element("div",{class:"dialogBoxTabs",id:"ChangeImpactParentDiv"}),h=new d({displayStyle:"strip"});h.inject(g),h.add({label:l.CHG_GOV_ManageScope_AffectedRevision_Label,value:"affectedRevisionTab",content:E.affectedRevisionContent,icon:{iconName:"flow-branch-list",fontIconFamily:1},isSelected:!0}),h.add({label:l.CHG_GOV_ManageScope_AffectedUsage_Label,value:"affectedUsageTab",content:E.affectedUsageContent,icon:{iconName:"where-used",fontIconFamily:1}}),u.reactToPointerEventsFlag=!1,this.manageScopePanel=new e({immersiveFrame:u,title:l.CHG_GOV_AffectedItems_Toolbar_ManageScope+": "+p,content:g,height:500,width:1e3,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_MANAGE_SCOPE"}),u.inject(widget.body),this.manageScopePanel.addEventListener("keydown",(function(e){console.log("checking the key pressed ",e.which),27==e.which&&u.remove()}));var m={physicalId:i.options.grid.serviceBasedObjId,selectedNodeData:i,immersiveFrame:u,investigationRequestId:s,contextDetails:r};try{this.loadAffectedRevisionData(m,n.getColumns(),E.affectedRevisionContent,o),"AffectedUsageTab"==h.value[0]&&this.loadAffectedUsageData(m,a.getColumns(),E.affectedUsageContent,c.scopeAnalysisId),h.addEventListener("tabButtonClick",(function(e){e.options.value&&"affectedUsageTab"==e.options.value&&c.loadAffectedUsageData(m,a.getColumns(),E.affectedUsageContent,c.scopeAnalysisId,c.investigationRequestId)}))}catch(e){console.error(e)}},loadAffectedRevisionData:async function(e,t,n,a){e.target=n,e.columns=t,E.affectedRevisionDGModel=new o,e.treeDocument=E.affectedRevisionDGModel.createTreeDocument(),E.affectedRevisionDGModel.registerCustomFilter(),E.chgAffectRevisionDataGridView=null,E.chgAffectRevisionDataGridView=new i(e),E.chgAffectRevisionDataGridView.render(a,e)},loadAffectedUsageData:async function(e,t,i,n,o){if(e.target=i,e.columns=t,E.affectedUsageDGModel=new s(e),e.treeDocument=E.affectedUsageDGModel.createTreeDocument(),this.subscribeToModelEvents(e.treeDocument),E.affectedUsageDGModel.registerCustomFilter(),E.chgAffectUsageDataGridView=null,E.chgAffectUsageDataGridView=new r(e),E.chgAffectUsageDataGridView.render(),S.makeDroppable(e.target,E.dropHandler),n){E.chgAffectUsageDataGridView.showSpinner();var a=await c.getAffectedItemsOnExpand(n),d={};if(a.data[0]&&a.data[0].non3DSpaceNonIndexedData&&(d=a.data[0].non3DSpaceNonIndexedData,a.data[0].mapping&&(storeMappingOfi3dx=a.data[0].mapping),a.data.splice(0,1)),a.data.length>0){var g=await p.processIRAffectedItems(a,e.physicalId);E.affectedUsageDGModel.loadAffectedUsageData(e.treeDocument,g)}if(d&&d.length>0){var m=new Map,C=d.length;for(let t=0;t<d.length;t+=50){let i=[];i=C<50?d.slice(t,t+C):d.slice(t,t+50);for(var f=[],D=new Map,I=i,w=0;w<I.length;w++){var _=I[w];f.push(_.id),D.set(_.id,_)}var b=[];if(f.length>0){var y=p.commonPredicatedForFedSearch(),O=await p.callFederatedSearch(f,y);if(O&&O.results&&O.results.length>0)b=await p.processIRAffectedItemsFederatedSearch(O,D)}b.length>0&&E.affectedUsageDGModel.loadAffectedUsageData(e.treeDocument,b),m=new Map([...m,...D]),C-=50}if(m&&m.size>0){h.publish("updateIndexingIconForHideOrShowInAffectedItem",{});var G=await u.recent();if(G&&G.results&&G.results.length>0){var N=p.filterNonIndexedDataNew(G,m);m.size!=N.length&&v.warn(l.CHG_GOV_Not_Accessable_Data);var A=[];N.length>0&&(A=await p.processInformationForRecentIRAffected(N)),A.length>0&&E.affectedUsageDGModel.loadAffectedUsageData(e.treeDocument,A)}}}E.chgAffectUsageDataGridView.hideSpinner()}},subscribeToModelEvents:function(e){},addApproverHandler:function(e){console.log("Handler called for add approver"),e.type="Disposition",g.getDataToBuildAddMemberPanel(e),g.launchAddMemberPanel()},dropHandler(e){console.log("Cannot drop item in this view")}};return E})),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsCreateIA","DS/UIKIT/Mask","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v,D,I,w,_,b,S,y){"use strict";var E={createAffectedItemsView:async function(t,o){var d=this;t.target.setStyles({position:"relative"}),this.contextId=t.id;var c={};c=UWA.merge(c,t),u.makeDroppable(c.target,d.dropHandler),c.modelEvents=o,this.modelEvents=o,c.columns=i.getColumns(),this.ChgCRAffectedItemsDataGridModel=new n(c.id,c.contextDetails),this.treeDocument=c.treeDocument=this.ChgCRAffectedItemsDataGridModel.createTreeDocument(),this.ChgCRAffectedItemsDataGridModel.registerCustomFilter(),d.ChgCRAffectedItemsTreeModel=c.treeDocument,this.subscribeToModelEvents(c.treeDocument),this.chgCRAffectedItemsView=new e(c),b.showLoader(c.target,this.chgCRAffectedItemsView.loader);let p=this.chgCRAffectedItemsView.chgGridView;await a.getCRAffectedItems(t.id,!0).then((async function(e){console.log("AffectedItems list: "+e);var i={},o={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(o=e.data[0].mapping),e.data.splice(0,1));var a=await s.processCRAffectedItems(e);if(d.chgCRAffectedItemsDataGridModel=new n(t.id),0==a.length){if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&w.isMasked(e)&&w.unmask(e)}else b.hideLoader(c.target,d.chgCRAffectedItemsView.loader);d.modelEvents.publish({event:"showEmpty-datagrid",data:p})}if(b.fetchMaturityStateCSS(a),await d.chgCRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,a),E.changeView(),b.hideLoader(c.target,d.chgCRAffectedItemsView.loader),o.length>0&&await d.chgCRAffectedItemsDataGridModel.i3dxInformationFilteringAndCalling(i,o,c.treeDocument),i&&i.length>0){var u=new Map,g=i.length;for(let e=0;e<i.length;e+=50){let t=[];t=g<50?i.slice(e,e+g):i.slice(e,e+50);for(var h=[],C=new Map,f=t,D=0;D<f.length;D++){var I=f[D];h.push(I.id),C.set(I.id,I)}var _=[];if(h.length>0){var S=s.commonPredicatedForFedSearch(),y=await s.callFederatedSearch(h,S);if(y&&y.results&&y.results.length>0)_=await s.processCRAffectedItemsFederatedSearch(y,C)}await d.chgCRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,_),b.hideLoader(c.target,d.chgCRAffectedItemsView.loader),u=new Map([...u,...C]),g-=50}if(u&&u.size>0){d.chgCRAffectedItemsView.indexInfoDiv.show();var O=await v.recent();if(O&&O.results&&O.results.length>0){var G=s.filterNonIndexedDataNew(O,u);u.size!=G.length&&l.warn(r.CHG_GOV_Not_Accessable_Data,!0);var N=await s.processInformationForRecentCRAffected(G);b.fetchMaturityStateCSS(N),d.chgCRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,N)}}}else d.chgCRAffectedItemsView.indexInfoDiv.hide();var A=s.getDefaultFilter(c.columns);c.treeDocument.setFilterModel(A),c.isSelected&&"false"==m.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(d.ChgCRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:d.ChgCRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,d.ChgCRAffectedItemsTreeModel)})),0==c.treeDocument.getChildren().length?c.treeDocument._modelEvents.publish({event:"treeEmpty"}):c.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),E.changeView(),b.hideLoader(c.target,d.chgCRAffectedItemsView.loader)}),(function(e){if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&w.isMasked(e)&&w.unmask(e)}else b.hideLoader(c.target,d.chgCRAffectedItemsView.loader);return Promise.reject(e)})),d.chgCRAffectedItemsView.loadCustomColumns(),this.chgCRAffectedItemsView.chgGridView.addEventListener("postEdit",(function(e,t){E.updateReasonForChangeValue(t)}))},async dropHandler(e){var t;E.ChgCRAffectedItemsDataGridModel.treeDocument;t=v.parseObjectInformation(e);E.treeDocument.getAllDescendants().map((e=>e.options.grid.id)),e.map((e=>e.objectId));if(t.length>0){await E.ChgCRAffectedItemsDataGridModel.addExistingChildren(t);let e=E.chgCRAffectedItemsView.options.custom_view_options;null!=e&&b.loadCustomColumns(e)}else l.error(r.CHG_GOV_Common_Drop_Error)},changeView:function(e){try{if(m.getGlobalVariable().is3DSpace){let e=E.treeDocument.getAllDescendants();for(var t of(E.treeDocument.prepareUpdate(),e)){let e='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+t.options.grid.id+"\"'>"+UWA.String.escapeHTML(t.options.grid.title)+"</a>";t.updateOptions({label:e})}E.treeDocument.pushUpdate()}}catch(e){console.log(e)}i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},(function(e){t.showEmptyView()})),e._modelEvents.subscribe({event:"treeNotEmpty"},(function(e){t.hideEmptyView()})),f.unsubscribe(`crAffectedItems:${widget.id}`),f.subscribe(`crAffectedItems:${widget.id}`,(function(){if("false"==m.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],(function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRAffectedItemsTreeModel)})),Object.keys(i.chgCRAffectedItemsView.options.treeDocument.getXSO()._items).length>0){let e=i.chgCRAffectedItemsView.options.treeDocument.getXSO()._items;for(let t in e)i.chgCRAffectedItemsView.onSelectionChange(i.chgCRAffectedItemsView._modelEvents,e[t],i.chgCRAffectedItemsView.id,i.chgCRAffectedItemsView.options.contextDetails.isKindOfType,!0)}else i.chgCRAffectedItemsView.onSelectionChange(i.chgCRAffectedItemsView._modelEvents,i.chgCRAffectedItemsView.options.treeDocument._getTrueRoot(),i.chgCRAffectedItemsView.id,i.chgCRAffectedItemsView.options.contextDetails.isKindOfType,!1)})),f.unsubscribe(`${e.options.id} of ${widget.id}`),f.subscribe(`${e.options.id} of ${widget.id}`,(function(e){E.ChgCRAffectedItemsDataGridModel.filterView(e)})),f.unsubscribe(`${e.options.id} colorize ${widget.id}`),f.subscribe(`${e.options.id} colorize ${widget.id}`,(function(e){E.ChgCRAffectedItemsDataGridModel.enableColorizeView(e)})),f.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),f.subscribe(`${e.options.id} uncolorize ${widget.id}`,(function(e){E.ChgCRAffectedItemsDataGridModel.disableColorizeView(e)})),f.unsubscribe("updateIndexingIconForHideOrShowInAffectedItem"),f.subscribe("updateIndexingIconForHideOrShowInAffectedItem",(function(e){i.chgCRAffectedItemsView.indexInfoDiv.show()})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-on-dblclick"},(function(e){if(m.getGlobalVariable().is3DSpace){_("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else E.modelEvents.publish({event:"information-panel-open",data:null})})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("remove_AnalysisBasis_count_AI_grid")]||this.modelEvents.subscribe({event:"remove_AnalysisBasis_count_AI_grid"},(function(e){E.updateImpactAnalysisCountOnGrid(e)})),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-affected-item-object-selection-update")]||this.modelEvents.subscribe({event:"cr-affected-item-object-selection-update"},(function(e){E.handleObjectSelectionUpdate(e)}))},massUpdateHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Mass Update"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),E.chgCRAffectedItemsView.chgGridView.showModelMassUpdateDialog();let t=E.chgCRAffectedItemsView.chgGridView._modelMassUpdateDialog.buttons.Ok.elements.button,i=E.chgCRAffectedItemsView.chgGridView._modelMassUpdateDialog.buttons.Apply.elements.button;t.addEventListener("click",(function(){E.updateMassValue()})),i.addEventListener("click",(function(){E.updateMassValue()}))},updateMassValue:function(){let e=E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants(),t=[];for(let i of e){let e={id:i.options.grid.id,reasonForChange:i.options.grid.reasonForChange};null!=e.reasonForChange||(e.reasonForChange=""),t.push(e)}t.length>0&&a.updateAIReasonForChangeValue(t,E.contextId).then((e=>{console.log("updated on backend")}))},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),a.updateAIReasonForChangeValue(i,E.contextId).then((e=>{console.log("updated on backend")}))}},updateImpactAnalysisCountOnGrid:function(e){let t=E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants();for(let i of e.selectedAnalysisBasis)for(let e of t)if(i.options.grid.id==e.options.grid.id){let t=e.options.grid.countImpactAnalysis-1;e.updateOptions({grid:{countImpactAnalysis:t}})}},addExistingHandler:function(){console.log("addExistingHandler cr affecteditems!");var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add Affected Item"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingAffectedItem",extendedQuery:E.createExcludeListForSearch(t)};const n=o.activateSearch();m.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),o.search(r.CHG_GOV_AffectedItems_AddExisting_Search_Header,"",E.OnSearchComplete,"changeAffectedItems",n,void 0,void 0,i)},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:async function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][8]&&null!=e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2],environment:m.getGlobalVariable().tenant});if(t.length){await E.ChgCRAffectedItemsDataGridModel.addExistingChildren(t);let e=E.chgCRAffectedItemsView.options.custom_view_options;null!=e&&b.loadCustomColumns(e)}},OnSearchCompleteIA:function(e){console.log(e);var t=[];for(let[i]of e)t.push({id:i});let i=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();var n=[];for(let e of i)n.push({id:e.options.grid.id,service:e.options.grid.serviceName,type:e.options.grid.type,environment:m.getGlobalVariable().tenant});let o=[];o.push({impactAnalysisIds:t,objectIdToSend:n,updateAction:"CONNECT"}),0!=t.length&&0!=n.length&&a.connecteIAwithAffactedItem(o).then((function(e){!0===e.success&&e.data.length==e.items&&l.success(r.CHG_GOV_Affected_Item_Objects_Processed_Success_Analysis_Basis);let t=0,i=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let n of i){for(let i of e.data)i&&i.affectedItemIds&&i.affectedItemIds.includes(n.options.grid.id)&&t++;let i=n.options.grid.countImpactAnalysis+t;n.updateOptions({grid:{countImpactAnalysis:i}}),t=0}t=0,E.modelEvents.publish({event:"update_AnalysisBasis_count_IA_grid",data:e.data})}))},removeHandler:function(){console.log("removeHandler!");var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Remove"}};if(y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes().length)if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&w.mask(e)}else{let e=document.getElementById("crAffectedItems");e&&w.mask(e);let t=document.getElementById("affectedItem-index-data-info-div");t&&E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes().length==E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants().length&&(t.style.display="none")}E.ChgCRAffectedItemsDataGridModel.removeChildren()},handlePropertiesUpdateForAffectedItem:function(e){var t=E.ChgCRAffectedItemsTreeModel;t&&S.handlePropertiesOnUpdate(t,e)},_orchestrateImpactAnalysis:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Orchestrate Impact Analysis"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=[],i=[],n=E.contextId,o=E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants().length,s=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let e of s){let t={};t.id=e.options.grid.id,t.type=e.options.grid.type,t.service=e.options.grid.serviceName,i.push(t)}let d={orchestrateItemIds:i};t.push(d),0!=o?a.orchestrateImpactAnalysis(t,n).then((function(e){if(!0===e.success){_("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh(),l.success(r.CHG_GOV_AffectedItems_OrchestrateImpactAnalysis_Success)}})):l.error(r.CHG_GOV_AffectedItems_OrchestrateImpactAnalysis_Error)},createImpactAnalysisInContext:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add to New Impact Analysis"}};_("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t={contextCRId:E.contextId};h.CHG_CR_AFF_IA="true";let i=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();console.log(E.modelEvents),I.launchAffectedItemsCreateNewIADialog(t,i,E.modelEvents)},addExistingImpactAnalysisInContext:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add to Existing Impact Analysis"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=a.getCRImpactAnalysis(E.contextId),i=E.contextId;console.log(i),t.then((function(e){var t=s.processCRImpactAnalysis(e,E.contextId);let n=[];for(const e of t)"In Work"===e.maturity&&n.push(e.id);let a={condition:"addExistingImpactAnalysis",extendedQuery:E.createFinalIncludeListFrSearch(n)};if(m.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeAnalysis&includeOIDprogram=enoECMChangeRequestUX:getConnectedImpactAnalysis&objectid="+i+"&table=AEFGeneralSearchResults&selection=single&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var r=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,E.OnSearchCompleteIA(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",r)}else console.log("inside EVENT")};window.addEventListener("storage",r)}var l=o.activateSearch("impact analysis","IA_ImpactAnalysis");o.search("Add Existing",m.getGlobalVariable().proposedSearchType,E.OnSearchCompleteIA,"addExistingImpactAnalysis",l,void 0,void 0,a)}),(function(e){return Promise.reject(e)}))},moveAffactedItemToOtherCR:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Move to Change Request"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t={condition:"addExistingCROrchestration",extendedQuery:'AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND ( current: "Prepare" OR current: "In Work") AND (NOT physicalid:"'+E.contextId+'")'};if(m.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeRequest:ECM_CHANGE_ON_HOLD!=TRUE:CURRENT=policy_RequestForChange.state_Prepare,policy_RequestForChange.state_InWork&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var i=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,E.OnSearchCompleteCR(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",i)}else console.log("inside EVENT")};window.addEventListener("storage",i)}else{var n=o.activateSearch("","Change Request");o.search("Add Existing","Change Request",E.OnSearchCompleteCR,"changeOrchestration",n,void 0,void 0,t)}},OnSearchCompleteCR:function(e){let t=[],i="";console.log(e);let n=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let e of n)t.push(e.options.grid.id);for(let[t]of e)i=t;let o=[],s={toId:i,affectedItemIds:t};o.push(s),o[0].toId==E.contextId?l.warn(r.CHG_GOV_ChangeRequest_AffectedItems_Same_CR_Warning,!0):(console.log("CHGCRAffactedItem Moce IA to CR"+o),a.moveAffactedItemToOtherCR(o,E.contextId).then((function([e,t]){!0===e.success&&null==t&&l.success(r.CHG_GOV_Affected_Item_Objects_Processed_Success);var i=[...E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes()];if(t)for(let e=0;e<i.length;e++)t.includes(i[e].options.grid.id)&&(i.splice(e,1),e--);for(var n=0;n<i.length;n++)E.ChgCRAffectedItemsDataGridModel.treeDocument.removeRoot(i[n])})))},createFinalIncludeListFrSearch:function(e){let t="(";for(let i=0;i<e.length;i++)t=t+"physicalid:"+e[i],i!=e.length-1&&(t+=" OR ");return t+=")",t},changeEditibility:function(e){let t=E.chgCRAffectedItemsView.options.columns;for(let i of t)if("reasonForChange"===i.dataIndex){i.editableFlag=e;break}},handleAccessBitUpdate:function(e){e.id==E.contextId&&(console.log("ChgCRAffectedItemsDataGridLayout handleAccessBitUpdate"+e),"false"==e.accessBits.ManageAffectedItem?(E.accessBitManageAffectedItem=!1,E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1}),E.changeEditibility(!1)):(E.accessBitManageAffectedItem=!0,E.changeEditibility(!0)),"false"==e.accessBits.ManageChangeAnalysis?(E.accessBitManageChangeAnalysis=!1,E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("create",{visibleFlag:!1})):(E.accessBitManageChangeAnalysis=!0,E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("create",{visibleFlag:!0})))},handleObjectSelectionUpdate:function(e){e.count>0?(E.accessBitManageAffectedItem&&(E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!0}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!0}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("moveToCR",{visibleFlag:!0})),E.accessBitManageChangeAnalysis&&(E.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="enabled"),E.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[2].state="enabled"):(E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!1}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!1}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("moveToCR",{visibleFlag:!1}),E.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="disabled",E.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[2].state="disabled")},changeAssessmentHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Change Assessment"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=E.treeDocument.getSelectedNodes();if(t&&t.length>0){let e=[];t.forEach((t=>{e.push(t.options.grid.serviceBasedObjId)}));const i=widget.id+"ChgCRAffectedItemsDataGridLayout";o.launchTransientWidget(i,e,"ENORIPE_AP")}else l.error(r.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleForMaturityUpdate:function(e){if(e){JSON.parse(e);let t=E.treeDocument.getSelectedNodes();b.getHandleForMaturityUpdate(JSON.parse(e),t)}},globalSubscribeForAffectedItemsBasisView:function(){h.addObserver("ChgCRAffectedItemsDataGridLayout","ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",E.handleChangeAssessmentOK),h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-AccessBit-Update",E.handleAccessBitUpdate),h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-Properties-Update",E.handlePropertiesUpdateForAffectedItem),h.addObserver("ChgCRAffectedItemsDataGridLayout","Lifecycle.Modification",E.handleForMaturityUpdate)},handleChangeAssessmentOK:function(e){if(e.length){var t=!1;for(let i=0;i<e.length;i++)e[i].id.includes("uuid:")?(t=!0,e.splice(i,1),i--):(e[i].updateAction="CONNECT",e[i].service="3DSpace");t&&l.error(r.CHG_GOV_Relation_Cross_Service_NotSupported_Error),e.length&&E.ChgCRAffectedItemsDataGridModel.addExistingChildren(e)}}};return E.globalSubscribeForAffectedItemsBasisView(),E})),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout","require"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f){"use strict";var v=h.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),D=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"craffectedItems",useAsyncPreExpand:!0});return e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",v)},loadAffectedItemsData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&g.isMasked(e)&&g.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName;var n,a=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var s=this.getCustomTooltip(e);return n=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:n,subLabel:t,description:a,grid:e,icons:[e.icon],thumbnail:e.thumbnail,customTooltip:s,contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return e.name&&e.maturityNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:async function(e){var t=this,i=this.contextID,n=document.getElementById("outer-affectedItems-grid-div");"undefined"!=n&&null!=n&&g.mask(n),await r.addExistingInCRAffectedItems(i,e).then((async function(e){console.log(m),console.log("AffectedItems list: "+e);var i={},o={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(o=e.data[0].mapping),e.data.splice(0,1));var s=await l.processCRAffectedItems(e);if(D.prototype.addNodesInLayoutModel(t.treeDocument,s),"undefined"!=n&&null!=n&&g.unmask(n),o.length>0&&await D.prototype.i3dxInformationFilteringAndCalling(i,o,t.treeDocument),i&&i.length>0){var r=new Map,d=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=d<50?i.slice(e,e+d):i.slice(e,e+50);for(var h=[],C=new Map,f=n,v=0;v<f.length;v++){var I=f[v];h.push(I.id),C.set(I.id,I)}var w=[];if(h.length>0){var _=l.commonPredicatedForFedSearch(),b=await l.callFederatedSearch(h,_);if(b&&b.results&&b.results.length>0)w=await l.processCRAffectedItemsFederatedSearch(b,C)}D.prototype.addNodesInLayoutModel(t.treeDocument,w),r=new Map([...r,...C]),d-=50}if(r&&r.size>0){u.publish("updateIndexingIconForHideOrShowInAffectedItem",{});var S=await p.recent();if(S&&S.results&&S.results.length>0){var y=l.filterNonIndexedDataNew(S,r);r.size!=y.length&&c.warn(a.CHG_GOV_Not_Accessable_Data);var E=[];y.length>0&&(E=await l.processInformationForRecentCRAffected(y)),D.prototype.addNodesInLayoutModel(t.treeDocument,E)}}}"undefined"!=n&&null!=n&&g.unmask(n)}),(function(e){g.unmask(n)}))},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var i=D.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(var n=i.length-1;n>=0;n--)e.addRoot(i[n],0);e.pushUpdate()},removeChildren:function(){var e=this,t=[...this.treeDocument.getSelectedNodes()];if(this.treeDocument.unselectAll(),t.length){for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,updateAction:"DISCONNECT"});var s=this.contextID;r.removeCRAffectedItems(s,i).then((function([i,n]){if(null!=n)for(let e=0;e<t.length;e++){let i=!1;for(let o=0;o<n.length;o++)if(t[e].options.grid.id==n[o]){t.splice(e,1),i=!0;break}1==i&&e--}for(var s=0;s<t.length;s++)e.treeDocument.removeRoot(t[s]);if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&g.isMasked(e)&&g.unmask(e)}0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"}),null!=n&&0!=n.length||c.success(a.CHG_GOV_AffectedItems_Remove)}),(function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&g.isMasked(e)&&g.unmask(e)}}))}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},i3dxInformationFilteringAndCalling:async function(e,t,i){var n=i;let a=t.length;var s=o.getGlobalVariable().tenant,r=o.getGlobalVariable().tenantMappings.find((e=>e.platformId===s));for(let i=0;i<a;i++){let o=t[i],a=o.uris,s=a.length,h=o.ServiceInfo,m=o.RelativePath,C=r[h];if(null==C||null==m)continue;let f=C+m;for(let t=0;t<a.length;t+=50){var d=[],c=new Map;let i=[];i=s<50?a.slice(t,t+s):a.slice(t,t+50);for(let t=0;t<i.length;t++){const n=i[t],o=e.findIndex((e=>e.id===n));if(-1!==o){const t=e.splice(o,1)[0];d.push(t),c.set(t.id,t)}}try{var u=await p.fetchbyService({ids:i,url:f});console.log("Result of is "+u);var g=await l.processCRAffectedWithi3dxItems(u,c);console.log("Node information with NLS value"+g),await D.prototype.addNodesInLayoutModel(n,g)}catch(e){console.log(e)}console.log("The sliced array is "+i),s-=50}}},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map((t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}}))},UWA.is(i,"array")&&i.forEach((function(e){var t=e.color,i=e.id;n(t,i)}))},disableColorizeView:function(){this.treeDocument.getAllDescendants().map((e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})}))}});return D})),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridView"],(function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.writetoolbarDefinition=function(t){const i=this.getAddMemberModule(t.isKindOfType);return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_AddMember,position:"far",category:"addRemove",action:{module:i,func:"launchAddMemberPanel"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Remove,position:"far",category:"addRemove",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout",func:"removeHandler"}}}]}},n.getAddMemberModule=function(e){t.getGlobalVariable().ECM_EnableAddMemberGenericComponent;let i="";switch(e){case"InvestigationRequest":i="DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgIRAddMemberHandler";break;case"ChangeRequest":i="DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCRAddMemberHandler";break;case"ChangeAction":i="DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCAAddMemberHandler";break;case"ChangeOrder":i="DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCOAddMemberHandler"}return i},n})),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","require","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCAAddMemberHandler","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewFeaturesUtil","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgIRAddMemberHandler","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCRAddMemberHandler","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCOAddMemberHandler","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler"],(function(e,t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,C,f,v){"use strict";var D=e.extend({init:function(e){this._parent(e);var t=this;this._modelEvents=null,this._modelEvents=e.contextDetails._modelEvents,this.objectType=e.contextDetails.isKindOfType,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),d.subscribe("idcard-header-minified",(function(e){e.value?(t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").addClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("minified-header-height")):(t.membersDatagridView.getElement(".content-member-grid-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("minified-header-height"))}))},render:function(){try{var e=this.processColumns(),t=this,p={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:r.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},filterViewOptions:{ignoreGroupingNodes:!1},showContextualMenuColumnFlag:!0,onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1){let i=c("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewFeaturesUtil");if("InvestigationRequest"==t.options.contextDetails.isKindOfType)var n=t.options.contextDetails.model.businessState?t.options.contextDetails.model.businessState:t.options.contextDetails.model.attributes.mapping.maturitySubstate.valueActual;if(1==e.cellInfos.nodeModel._options.grid.isRoot)return;return i.showRMBMenuOnGrid(t,e,n).then((function(e){return e}))}e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){a.readyDragContent(e,t)},onDragStartCell:function(e,t){a.readyDragContent(e,t)}};p=UWA.merge(p,this.options);var u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.membersDatagrid=new n(p),this.membersDatagrid.rowSelection="multiple",this.membersDatagrid.cellSelection="none";let S=this.membersDatagrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:S}),this.tileView=new o(u);var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return h.showRMBMenuOnGrid(t,e).then((function(e){return e}))}};this.tileView.onContextualEvent=m;var C={expandInput:{stdTemplate:"expandInputtemplate"}},f={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new l}catch(e){console.log(e)}this.membersDatagrid.getTypeRepresentationFactory().registerTypeTemplates(f),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(C),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),g.toolbar=this.membersDatagrid.setToolbar(g.writetoolbarDefinition(this.options.contextDetails)),this.toolbar=g.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(f),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(C);t=this;this.subscribeToModelEvents(this.options.treeDocument),this.membersDatagrid.addEventListener("allCellsRendered",(function(){t.membersDatagrid.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:r.CHG_GOV_StatusBar_TotalItems+t.membersDatagrid.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:r.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:r.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:r.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])})),t.membersDatagrid.getTreeDocument().getXSO().onAdd((function(e){let i;(e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),d.publish("members-object-selection-update"+(widget?widget.id:""),{count:i}),t.membersDatagrid.elements.statusBar)&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:r.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:r.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}))})),t.membersDatagrid.getTreeDocument().getXSO().onRemove((function(e){let i;(i=e.getTreeDocument().getSelectedNodes().length,0==i&&d.publish("members-object-selection-update"+(widget?widget.id:""),{count:i}),t.membersDatagrid.elements.statusBar)&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:r.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:r.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}))})),t.membersDatagrid.addEventListener(i.POINTERHIT,(function(e,i){console.log(">>>>>>>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),t.onItemClick(e,i)})),this.tileView.addEventListener(i.POINTERHIT,(function(e,i){t.onItemClick(e,i)})),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("ca-DataGrid-on-dblclick"),i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.membersDatagridView=UWA.createElement("div",{id:"outer-member-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-member-grid-div"});var v=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-member-grid-div"});this.toolbar.inject(v);var D=UWA.createElement("div",{class:"content-member-grid-div expanded-header-height"}),I=(UWA.createElement("div",{class:"content-member-tile-div membertileView expanded-header-height"}),UWA.createElement("div",{styles:{position:"relative"},class:"content-member-filter-div memberfilterView hideView"})),w=UWA.createElement("div",{styles:{position:"relative"},class:"content-add-member-div addmemberView hideView"}),_=UWA.createElement("div",{class:"hideView",id:"memberEmptyTileViewDiv"});UWA.createElement("div",{html:r.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(_);this.options.treeDocument;var b={id:this.options.contextDetails.id,type:this.options.contextDetails.isKindOfType,target:w,model:this.options.treeDocument,objectTitle:this.options.contextDetails.title};this.handleAddMemberHandler(b),this.membersDatagrid.inject(D),this.membersDatagridView.addContent(v),this.membersDatagridView.addContent(I),this.membersDatagridView.addContent(w),this.membersDatagridView.addContent(D)}catch(e){}},subscribeToModelEvents:function(e){d.unsubscribe("members-object-selection-update"+(widget?widget.id:"")),d.subscribe("members-object-selection-update"+(widget?widget.id:""),(function(e){c("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout").handleObjectSelectionUpdate(e)}))},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}},handleAddMemberHandler:function(e){p.getGlobalVariable().ECM_EnableAddMemberGenericComponent;const t=e.type,i=this.options&&this.options.contextDetails&&this.options.contextDetails.access&&this.options.contextDetails.access.accessBits||this.options&&this.options.contextDetails&&this.options.contextDetails.userAccess||null;e.accessBits=i,console.log(e.accessBits);try{switch(t){case"InvestigationRequest":m.getDataToBuildAddMemberPanel(e);break;case"Disposition":v.getDataToBuildAddMemberPanel(e);break;case"ChangeRequest":C.getDataToBuildAddMemberPanel(e);break;case"ChangeAction":u.getDataToBuildAddMemberPanel(e);break;case"ChangeOrder":f.getDataToBuildAddMemberPanel(e);break;default:console.error("Unsupported action type:",t)}}catch(e){console.error("Error handling add member:",e)}}});return D}));