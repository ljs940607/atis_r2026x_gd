define("DS/DELPPWProcessAuthoringModule/UpperViewsModule",["UWA/Core","DS/DELPPWTreeListAuthoringModule/TreeListAuthoringBaseModule"],(function(e,n){"use strict";return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","SelectionBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","UXFactoryBehavior","ProcessImplementBehavior","CapableResourceLinkBehaviour","ViewBehavior","ExpandFilterBehavior","LoadObjectBehavior","LinkBehavior","TLV3DViewerBehavior","RootsBehavior","MfgProcessBehavior","MfgProcessCrossHighlightBehavior","MfgItemQuantityGroupingBehavior","CfgColumnsBehavior"],creator:function(t,o,i,r,a,c,d,s,u,h,f,l,g,p,v,B,y,R,P,A,T,w,C,m,I,b){var S,E,L,M,O,N,D,k,V,U,x,j,W,F,H,X,G=new(0,n.creator)(t,o,i,r,a,d,s,u,h,f,l,g,p,v,R),z=[],Z=[];return E=function(n){var t,o=!1;return e.is(n)&&(t=a.getPPRType(n),o=z.indexOf(t)>-1),o},L=function(n){var t=!1;return e.is(n)&&e.is(n.get)&&(t=Z.indexOf(n.get("type"))>-1),t},M=function(){var e=[];i.getSelectedNodes().forEach((function(n){e.push({nodeId:n.getInstancePID()||n.getReferencePID(),isSelected:n.isSelected(),absPath:n.getAbsolutePath()})})),e.length>0&&t.notify("reComputeCrossHighlight",[e])},O=function(n,o,r){var a=!1;n=e.is(n,"array")?n:[n],i.withTransactionUpdate((function(){n.forEach((function(e){var n;E(n=e)&&(G.onAddReference(n,o,r),a=!0)}))})),e.is(S)&&a&&t.notify(S,{state:!0})},N=function(n){var t=!1,o=[];n=e.is(n,"array")?n:[n],i.withTransactionUpdate((function(){n.forEach((function(n){!function(n,o){var r,a;L(n)&&(r=n.get("from"),a=n.get("to"),e.is(o,"array")&&o.length>0&&o.indexOf(a)>-1||(o.push(a),f.isDocConnection(n)?i.updateDocAttributes(r):i.isNodeAdded(a)&&(i.updateAttributes(n),t=!0)))}(n,o)})),t&&M()}))},D=function(n){var t=[],o=function(n,t){var o,r;L(n)&&(o=n.get("to"),e.is(t,"array")&&t.length>0&&t.indexOf(o)>-1||(t.push(o),i.isNodeAdded(o)||(r=a.getReference(o),e.is(r)&&i.addNode(r,{loadChildren:!0}),M())))};e.is(n,"array")?i.withTransactionUpdate((function(){n.forEach((function(e){o(e,t)}))})):o(n,t)},U=function(n){var t=function(e){(E(e)||L(e))&&G.onChangeIRPC(e)};e.is(n,"array")?i.withTransactionUpdate((function(){n.forEach((function(e){t(e)}))})):t(n)},k=function(n){var t=function(e){E(e)&&G.onRemoveRefOrInst(e)};e.is(n,"array")?i.withTransactionUpdate((function(){n.forEach((function(e){t(e)}))})):t(n)},V=function(n){var o,r=!1;n=e.is(n,"array")?n:[n],o=function(n){var o,c;e.is(n)?L(n)&&(o=n.get("from"),c=n.get("to"),f.isDocConnection(n)?i.updateDocAttributes(o):("ProcessImplementLink"!==n.get("type")&&"PartialProcessImplementLink"!==n.get("type")||!Array.isArray(n.get("to"))||2===n.get("to").length&&a.isInstance(n.get("to")[0])&&a.isReference(n.get("to")[n.get("to").length-1])&&(c=n.get("to")[0]),i.isNodeAdded(c)&&(i.updateAttributes(n),r=!0))):t.debug("ERROR: No model defined")},i.withTransactionUpdate((function(){n.forEach((function(e){o(e)})),r&&M()}))},x=function(e){var n=a.getReferenceModel(e.newInstPIDArray[0]);E(n)&&G.onReparentInstances(e)},j=function(e){var n=a.getReferenceModel(e);E(n)&&G.onReparentBegin(e)},W=function(e){var n=a.getReferenceModel(e);E(n)&&G.onReparentEnd(e)},F=function(n){var t,o;if(e.is(n)&&(e.is(n.selectedNodeIds)&&e.is(n.selectedNodeIds.length>0)&&n.selectedNodeIds.forEach((function(e){i.unSelectNode(e)})),e.is(n.changed)))if(e.is(n.changed.childOccurencePath)){if(t=i.getNodeModel(n.changed.childOccurencePath),e.is(t)&&t.length>0)for(o=0;o<t.length;o++)if(t[o].getAbsolutePath().join()===n.changed.childOccurencePath.join()){t[o].select();break}}else if(t=i.getNodeModel(n.changed.nodeId),e.is(t)&&t.length>0)for(o=0;o<t.length;o++)t[o].isRoot(!0)&&t[o].select()},H=function(e){var n=[];(e=Array.isArray(e)?e:[e]).forEach((function(e){var t=a.getReferenceModel(e[0]);E(t)&&n.push(e)})),n.length>0&&G.onAddOccurrence(n)},function(){var e=t.getId();t.setProperties({visibleFlag:!0,title:u.getNLSValue("View."+e+".Title")})},X=function(){o.manageToolBarItemsAvailability()},{listenTo:function(){return e.extend(G.listenTo(),{referenceAdded:O,connectionAdded:N,addLinkedObject:D,referenceRemoved:k,instanceRemoved:k,connectionRemoved:V,referenceChanged:U,instanceChanged:U,connectionChanged:U,reparent:x,reparentBegin:j,reparentEnd:W,EGraphNodeSelect:F,updateCrossHighlight:M,addOccurrece:H,select:X})},onStart:function(n){if(G.onStart(n),!n.pprTypes||!n.linkTypes)throw new Error(t.getId()+": UpperViewsModule initialization failed");z=n.pprTypes,Z=n.linkTypes,S=e.is(n.views)&&e.is(n.views.treeListView)?n.views.treeListView.viewToggleCommand:void 0},onStop:function(){G.onStop()}}}}})),define("DS/DELPPWProcessAuthoringModule/RoutingsModule",["UWA/Core","DS/DELPPWTreeListAuthoringModule/TreeListAuthoringBaseModule"],(function(e,n){"use strict";return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","SelectionBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","UXFactoryBehavior","ProcessImplementBehavior","CapableResourceLinkBehaviour","ViewBehavior","ExpandFilterBehavior","LoadObjectBehavior","TLV3DViewerBehavior","RootsBehavior","LinkBehavior","ProductFlowLinkBehavior","CfgColumnsBehavior","MfgProcessBehavior","MfgProcessCrossHighlightBehavior","OperationTimeBehavior","OrderbySequenceBehavior"],creator:function(t,o,i,r,a,c,d,s,u,h,f,l,g,p,v,B,y,R,P,A,T,w,C,m,I,b,S,E){var L,M,O,N,D,k,V,U,x,j,W,F,H,X,G,z,Z,q,Q,J=new(0,n.creator)(t,o,i,r,a,d,s,u,h,f,l,g,p,v,R),K=[],Y=[],$=[];return N=function(n){var t,o=!1;return e.is(n)&&(t=a.getPPRType(n),o=K.indexOf(t)>-1),o},D=function(n){var t=!1;return e.is(n)&&e.is(n.get)&&(t=Y.indexOf(n.get("type"))>-1),t},k=function(e){return $.indexOf(e)>-1},V=function(){var e=[];i.getSelectedNodes().forEach((function(n){e.push({nodeId:n.getInstancePID()||n.getReferencePID(),isSelected:n.isSelected(),absPath:n.getAbsolutePath()})})),e.length>0&&t.notify("reComputeCrossHighlight",[e])},U=function(n,o,r){var a=!1;n=e.is(n,"array")?n:[n],i.withTransactionUpdate((function(){n.forEach((function(e){var n;N(n=e)&&(J.onAddReference(n,o,r),a=!0)}))})),e.is(L)&&a&&t.notify(L,{state:!0})},H=function(n,o){var r;e.is(n)&&i.isNodeAdded(n)&&(r=a.getImpactedConnections([n]),t.notify("connectionAdded",[r,o]))},x=function(n,o){var r=!1,a=[];o=o||{},n=e.is(n,"array")?n:[n],i.withTransactionUpdate((function(){n.forEach((function(n){!function(n,a){var c,d,s,u,h=!e.is(o.loadRelatedobjectsToView)||o.loadRelatedobjectsToView;D(n)&&("SecondaryCandidateResourceLink"===n.get("type")&&(n=w.cloneSecondaryCapableRscLinkWithFromAttr(n)),c=n.get("from"),d=n.get("to"),s=n.get("type"),u=c,e.is(a,"array")&&a.length>0&&a.indexOf(d)>-1||(a.push(d),f.isDocConnection(n)?i.updateDocAttributes(c):i.isNodeAdded(c)&&(e.is(M)&&M.linkType===s?i.updateBadge(u,M.badgeIcon):e.is(O)&&O.linkType===s&&i.updateBadge(u,O.badgeIcon),i.updateAttributes(n),r=!0,k(s)&&h&&t.notify("addLinkedObject",[n]))))}(n,a)})),r&&V()}))},W=function(n){var o,r=!1,a=[];n=e.is(n,"array")?n:[n],o=function(n){var o,c;e.is(n)?D(n)&&("SecondaryCandidateResourceLink"===n.get("type")&&(n=w.cloneSecondaryCapableRscLinkWithFromAttr(n)),c=n.get("from"),f.isDocConnection(n)?i.updateDocAttributes(c):(o=n.get("type"),e.is(o,"string")?i.isNodeAdded(c)&&((e.is(M)&&M.linkType===o||e.is(O)&&O.linkType===o)&&a.push(c),i.updateAttributes(n),r=!0):t.debug("Could not get connection type"))):t.debug("ERROR: No model defined")},i.withTransactionUpdate((function(){n.forEach((function(e){o(e)})),r&&V(),a.length>0&&i.updateBadge(a,null)}))},F=function(n){var t=function(e){(N(e)||D(e))&&J.onChangeIRPC(e)};e.is(n,"array")?i.withTransactionUpdate((function(){n.forEach((function(e){t(e)}))})):t(n)},j=function(n){var t=function(e){N(e)&&J.onRemoveRefOrInst(e)};e.is(n,"array")?i.withTransactionUpdate((function(){n.forEach((function(e){t(e)}))})):t(n)},X=function(e){var n=a.getReferenceModel(e.newInstPIDArray[0]);N(n)&&J.onReparentInstances(e)},G=function(e){var n=a.getReferenceModel(e);N(n)&&J.onReparentBegin(e)},z=function(e){var n=a.getReferenceModel(e);N(n)&&J.onReparentEnd(e)},Z=function(n){var t,o;if(e.is(n)&&(e.is(n.selectedNodeIds)&&e.is(n.selectedNodeIds.length>0)&&n.selectedNodeIds.forEach((function(e){i.unSelectNode(e)})),e.is(n.changed)))if(e.is(n.changed.childOccurencePath)){if(t=i.getNodeModel(n.changed.childOccurencePath),e.is(t)&&t.length>0)for(o=0;o<t.length;o++)if(t[o].getAbsolutePath().join()===n.changed.childOccurencePath.join()){t[o].select();break}}else if(t=i.getNodeModel(n.changed.nodeId),e.is(t)&&t.length>0)for(o=0;o<t.length;o++)t[o].isRoot(!0)&&t[o].select()},q=function(e){var n=[];(e=Array.isArray(e)?e:[e]).forEach((function(e){var t=a.getReferenceModel(e[0]);N(t)&&n.push(e)})),n.length>0&&J.onAddOccurrence(n)},Q=function(){o.manageToolBarItemsAvailability()},{name:"RoutingsModule",listenTo:function(){return e.extend(J.listenTo(),{referenceAdded:U,connectionAdded:x,addOccurrece:q,referenceRemoved:j,instanceRemoved:j,connectionRemoved:W,referenceChanged:F,instanceChanged:F,connectionChanged:F,addRootNode:H,reparent:X,reparentBegin:G,reparentEnd:z,EGraphNodeSelect:Z,updateCrossHighlight:V,select:Q})},onStart:function(n){if(J.onStart(n),!n.pprTypes||!n.linkTypes)throw new Error(t.getId()+": RoutingsModule initialization failed");K=n.pprTypes,Y=n.linkTypes,L=e.is(n.views)&&e.is(n.views.treeListView)?n.views.treeListView.viewToggleCommand:void 0,$=e.is(n.loadConectedObjLinkTypes)?n.loadConectedObjLinkTypes:[],M=e.is(n.displayBadgeProcessScope)?n.displayBadgeProcessScope:null,O=e.is(n.displayBadgePartialProcessScope)?n.displayBadgePartialProcessScope:null},onStop:function(){J.onStop()}}}}}));