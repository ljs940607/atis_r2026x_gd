define("DS/DELWKOAuxiliaryModule/DELWKOFindWOToastMessageCloud",["UWA/Class","DS/Controls/Button","DS/DELPPWWebServices_FD02/WebserviceUtils"],(function(e,t,n){"use strict";return e.extend({contentToastView:null,contentView:null,init:function(e){this.contentToastView=UWA.createElement("div",{id:"toastMessage"}).inject(e)},onClose:function(){var e=this;e.contentToastView&&(e.contentToastView.className=e.contentToastView.className.replace("show",""))},buildToastMessage:function(e,i){var o=this;o.contentToastView.getChildren().length&&o.contentToastView.removeChild(o.contentToastView.getChildren()[0]),o.contentView=UWA.createElement("div");var a=document.createElement("img"),l="",r="";0===e?(l="I_Info",r="#f1f3f4"):1===e?(l="I_Warning",r="#ffe893"):2===e?(l="I_Error",r="#fff0ee"):3===e&&(l="I_Success",r="#edf6eb"),a.setAttribute("src",n.get3DSpaceUrl()+"/webapps/ParameterizationSkeleton/assets/icons/"+l+".png"),o.contentView.setStyles({"background-color":r}),o.contentView.setHTML(i),o.contentView.prepend(a);var s=new t({displayStyle:"icon",icon:{iconName:"close",fontIconFamily:WUXManagedFontIcons.Font3DS},iconSize:"0.5",onClick:function(){o.onClose.call(o)}});return s.elements.container.setStyles({"border-style":"none"}),o.contentView.appendChild(s.elements.container),o.contentView.inject(o.contentToastView),o.contentToastView},showToastMessage:function(e,t){var n=this;n.buildToastMessage(e,t),""===n.contentToastView.className&&(n.contentToastView.className="show",setTimeout((function(){n.contentToastView.className=n.contentToastView.className.replace("show","")}),4e3))}})})),define("DS/DELWKOAuxiliaryModule/DELWKOFindWODialogCloud",["UWA/Class","UWA/Core","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/Label","DS/Controls/ComboBox","DS/Controls/DatePicker","DS/Controls/LineEditor","DS/DELWKOIRPCModels/DELWKOWorkOrderReferenceModel","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/DELWKOAuxiliaryModule/DELWKOFindWOToastMessageCloud","i18n!DS/DELWKOAuxiliaryModule/assets/nls/DELWKOFindWODialogCloud","i18n!DS/DELWKOIRPCModels/assets/nls/DELWKOWorkOrderReferenceState","css!DS/DELWKOAuxiliaryModule/assets/css/DELWKOFindWODialogCloud.css"],(function(e,t,n,i,o,a,l,r,s,c,d,u,g,f){"use strict";return e.extend({_dialog:null,_allowedStates:[{label:f.FIRM,value:"FIRM"},{label:f.RELEASED_FOR_EXECUTION,value:"RELEASED_FOR_EXECUTION"},{label:f.READY_FOR_EXECUTION,value:"READY_FOR_EXECUTION"},{label:f.WORK_IN_PROGRESS,value:"WORK_IN_PROGRESS"},{label:f.COMPLETED,value:"COMPLETED"},{label:f.CLOSED,value:"CLOSED"},{label:f.CANCELLED,value:"CANCELLED"},{label:f.ABORTED,value:"ABORTED"}],init:function(e){var t=this,o=new n({});this._dialog=new i({immersiveFrame:o,title:g.findDialog,content:this.buildView(e),activeFlag:!1}),this._dialog.close=()=>{t.setVisibleFlag(!1)},o.inject(e.container)},buildView:function(e){var n=this,i=t.createElement("div",{class:"contentModalFindWOView"}),c=t.createElement("div",{class:"productionPlanDivView"}),f=new a({value:g.ProductionPlan});f.elements.container.setStyles({"text-align":"left",width:"40%"}),f.inject(c);var v=[];n._productionPlanComboBox=new l({requiredFlag:!0}),n._productionPlanComboBox.elements.container.setStyles({width:"55%"});var h=d.getProductionPlan_v2();t.Promise.all([h]).then((function(e){e.forEach((e=>{e.forEach((e=>{e.content.forEach((e=>{v.push({label:e.title,value:e.id})}))}))})),n._productionPlanComboBox.elementsList=v})),n._productionPlanComboBox.inject(c),c.inject(i);var m=t.createElement("div",{class:"woStateDivView"}),w=new a({value:g.WOMaturityState});w.elements.container.setStyles({"text-align":"left",width:"40%"}),w.inject(m);var D=new l({elementsList:this._allowedStates,requiredFlag:!0});D.elements.container.setStyles({width:"55%"}),D.inject(m),m.inject(i);var p=t.createElement("div",{class:"woNoDivView"}),S=new a({value:g.WONumber});S.elements.container.setStyles({"text-align":"left",width:"40%"}),S.inject(p);var y=new s({});y.elements.container.setStyles({width:"55%"}),y.inject(p),p.inject(i);var E=t.createElement("div",{class:"scheduledDateDivView"}),C=new a({value:g.ScheduledStartDateRange});C.elements.container.setStyles({"text-align":"left",width:"40%"}),C.inject(E);var A=new r({value:void 0}).inject(E);A.elements.container.setStyles({width:"25%"}),new a({value:g.ScheduledStartToDateRange}).elements.container.setStyles({"text-align":"left",width:"7%"}).inject(E);var L=new r({value:void 0}).inject(E);L.elements.container.setStyles({width:"25%"}),E.inject(i);var T=new u(i);T.contentToastView.setStyles({border:"1px solid black",position:"absolute","z-index":"1",bottom:"50px",width:"80%","margin-left":"10%"});var b=t.createElement("div",{class:"footerWOModalDivView"}).inject(i);return new o({label:g.Search,emphasize:"primary",displayStyle:"icon",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},iconSize:"0.5",onClick:function(){t.is(e)&&t.is(e.callback)&&e.callback.onHideAll();var i=new Map,o=new Map,a=void 0;t.is(D.selectedIndex)&&D.selectedIndex>-1&&(a=D.elementsList[D.selectedIndex].value),t.is(a)&&o.set("state",!0);var l=void 0;t.is(n._productionPlanComboBox.selectedIndex)&&n._productionPlanComboBox.selectedIndex>-1&&(l=[n._productionPlanComboBox.elementsList[n._productionPlanComboBox.selectedIndex].value]),t.is(l)?o.set("productionplan",!0):i.set("productionplan",!1);var r=y.value;t.is(r)&&""!=r&&o.set("woname",!0);var s=A.value;t.is(s)&&(s=new Date(s.toDateString()),o.set("scheduledStartFromDate",!0));var c=L.value;t.is(c)&&(c=new Date(c.toDateString()),o.set("scheduledStartToDate",!0));var u=!0;if(i.forEach(((e,t)=>{e||(u=!1)})),t.is(u)&&!0===u){var f=d.getWorkOrderFromProductionPlan(l,a);t.Promise.all([f]).then((function(n){n.forEach((n=>{n.forEach((n=>{n.forEach((n=>{n.content.forEach((n=>{var i=!0,a=n.name,l=n.scheduledStartDate;if(!0===o.get("woname")&&(t.is(a)?t.is(r)&&!a.toUpperCase().includes(r.toUpperCase())&&(i=!1):i=!1),!0===o.get("scheduledStartFromDate")&&new Date(l)<s&&(i=!1),!0===o.get("scheduledStartToDate")&&new Date(l)>c&&(i=!1),i){n.type="DELLmiWorkOrderReference";var u=d.fetchRefOnCloud(n);t.Promise.all([u]).then((function(n){t.is(e)&&t.is(e.callback)&&e.callback.onAddReference(n)}))}}))}))}))})),d.fetchRefList([],{withLinksResolved:!1,onComplete:function(n){t.is(e)&&t.is(e.callback)&&e.callback.onAddReference(n.instancesAndReferences)}})}))}else T.showToastMessage(2,g.ProductionPlanErrorMsg)}}).inject(b),new o({label:g.Clear,emphasize:"primary",displayStyle:"icon",icon:{iconName:"search-delete",fontIconFamily:WUXManagedFontIcons.Font3DS},iconSize:"0.5",onClick:function(){D.selectedIndex=-1,n._productionPlanComboBox.selectedIndex=-1,A.value=void 0,L.value=void 0,y.value=""}}).inject(b),i},setVisibleFlag:function(e){this._dialog.visibleFlag=e},fetchProductionPlan:function(){var e=this,n=[],i=d.getProductionPlan_v2();t.Promise.all([i]).then((function(t){t.forEach((e=>{e.forEach((e=>{e.content.forEach((e=>{n.push({label:e.title,value:e.id})}))}))})),e._productionPlanComboBox.elementsList=n}))}})})),define("DS/DELWKOAuxiliaryModule/DELWKOAuxiliaryModuleCloud",["UWA/Core","DS/DELWKOAuxiliaryModule/DELWKOFindWODialogCloud","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/DELPPWResourceServices_FD02/ResourceUtils","i18n!DS/DELWKOAuxiliaryModule/assets/nls/DELWKOFindWODialogCloud"],(function(e,t,n,i,o){"use strict";return{behaviors:["WUXNodeModelBehavior","UXFactoryBehavior","TreeListViewBehavior","ModelBehavior","LinkBehavior","ResourceBehavior","SearchBehavior","RefreshBehavior","ViewBehavior","TaggerBehavior","DuplicateAdvBehavior","LoadObjectBehavior","MfgProcessBehavior","RootsBehavior"],creator:function(n,a,l,r,s,c,d,u,g,f,v,h,m,w,D){var p,S,y,E,C=[],A=[],L=function(t){var n,i=function(t){var i=!1;return e.is(t)&&e.is(t.get,"function")&&(t.isConnection()?i=A.indexOf(t.get("type"))>-1:(n=s.getPPRType(t),i=C.indexOf(n)>-1)),i};return Array.isArray(t,"array")?t.every((function(e){return i(e)})):i(t)},T=function(){return C.indexOf("PROCESS")>-1||C.indexOf("SERVICE")>-1},b=function(t){var i,o,l,r={forceDBMode:!0,silent:!0,onComplete:function(t){e.is(t)?s.createRefOrInst({isInstanceOf:t.get("PID")},l.get("PID")):n.debug("Child reference fetch failed")}};i=a.getSelectedNodes(),e.is(i,"array")&&e.is(t)&&(o=i[0].getID(),l=s.getReferenceModel(o),t.forEach((function(e){s.fetchRoot(e.id,r)})))},V=function(){var t=n.getId(),i=!1,o=n.getPreferenceValue("widgetLayoutValues");return e.is(o)&&(i=""!==e.Json.decode(o)[t]),i};return{listenTo:function(){return{addToAuxiliaryView:this.addToAuxiliaryView,toggleAuxPanel:this.onToggleAuxPanel,widgetLayoutChanged:this.onWidgetLayoutChanged}},onStart:function(s){var c,u=this,g=n.getElement(),v=g.getElementsByClassName("tree-list-container")[0],h=l.getComponent("WUXFrameWindowsManager").getFrameWindow(n.getAppContext()),m=e.is(widget.getValue("isMFNToggleAuxiliaryViewVisible"))?"MFN":"MGA",w=widget.getValue("isViewPersistanceOn");if(y=l.getComponent("WUXDockAreaEnum"),!e.is(s.pprTypes)||!e.is(s.linkTypes))throw new Error(n.getId()+": TreeListAuthoringModule initialization failed");C=s.pprTypes,A=s.linkTypes,p=e.is(s.displayBadge)?s.displayBadge:null,S=e.is(s.displayBadgePS)?s.displayBadgePS:null,E=l.create("Panel",{title:d.getNLSValue("View.AUXILIARY.Title"),identifier:"AuxiliaryPanel",minWidth:300,minHeight:250,height:250,width:300,immersiveFrame:h.getImmersiveFrame(),content:g,visibleFlag:!1,resizableFlag:!0,closeButtonFlag:!1,useBordersFlag:!0,collapsibleFlag:!1,verticallyStretchableFlag:!0}),f.registerViewforWidgetLayout({viewID:n.getId(),viewType:"treeListView",dockArea:y.LeftDockArea}),c=w?widget.getValue("is"+m+"ToggleAuxiliaryViewVisible"):V();var D=document.createElement("div");D.className="divToolbar",D.style.position="absolute",v.appendChild(D);var L=document.createElement("div");L.className="divGridView",v.appendChild(L),r.loadDocument(a.getWUXNodeModel()),r.getContent().inject(L),r.getContent().style.top="30px";r.getDataGridView().setToolbar({entries:[{id:"findDialogId",dataElements:{typeRepresentation:"functionIcon",icon:i.getIconURLFromKey("SearchWorkOrder"),value:function(){u._findDialog.setVisibleFlag(!u._findDialog._dialog.visibleFlag)},tooltip:o.findDialog}}]}).inject(D);u._findDialog=new t({container:g,callback:u}),u._findDialog.setVisibleFlag(!1),n.notify("toggleCmdCheckHeaderState",{cmdName:"ToggleAuxiliaryView",cmdState:c})},onStop:function(){e.is(E)&&(E.remove(),E=void 0),f.unregisterViewforWidgetLayout(n.getId(),"treeListView")},onAddReference:function(t){t=e.is(t,"array")?t:[t],a.withTransactionUpdate((function(){t.forEach((function(t){!function(t){L(t)&&e.is(t.get("PID"))&&a.addNode(t,{silentMode:!0,withLinksResolved:!1,auxiliaryView:!0})}(t)}))}))},onAddInstance:function(t){var n={silentMode:!0,withLinksResolved:!1},i=function(e){a.addNode(e,n)};e.is(t,"array")?a.withTransactionUpdate((function(){t.forEach((function(e){i(e)}))})):i(t)},onAddConnection:function(t){var n=function(t){var n,i;L(t)&&(i=t.get("from"),n=t.get("type"),e.is(p)&&p.linkType===n?a.updateBadge(i,p.badgeIcon):e.is(S)&&S.linkType===n&&a.updateBadge(i,S.badgeIcon))};e.is(t,"array")?a.withTransactionUpdate((function(){t.forEach((function(e){n(e)}))})):n(t)},onChangeIRPC:function(t){var n=function(e){L(e)&&a.updateAttributes(e)};e.is(t,"array")?a.withTransactionUpdate((function(){t.forEach((function(e){n(e)}))})):n(t)},onRemoveRefOrInst:function(e){var t=[];e=Array.isArray(e)?e:[e],a.withTransactionUpdate((function(){e.forEach((function(e){t.push(e.get("PID"))})),t.length>0&&a.removeNodes(t)}))},onRemoveConnection:function(t){var i=[],o=function(t){var o,a;L(t)&&(o=t.get("type"),e.is(o,"string")?(a=t.get("from"),(e.is(p)&&p.linkType===o||e.is(S)&&S.linkType===o)&&i.push(a)):n.debug("Could not get connection type"))};a.withTransactionUpdate((function(){e.is(t,"array")?t.forEach((function(e){o(e)})):o(t),i.length>0&&a.updateBadge(i,null)}))},onHideAll:function(){a.onHideAll()},onToggleAuxPanel:function(e){var t,n,i,o=this;n=function(){o._findDialog.fetchProductionPlan(),E.visibleFlag||(E._getPositionFromPreferences()||(E.currentDockArea=y.LeftDockArea),E.show()),(t=E.immersiveFrame.getDockingElement(E.currentDockArea))&&(t.collapseDockingZoneFlag=!1)},i=function(){E.visibleFlag&&(E.hide(),a.unSelectAll())},!0===e.state?n():i()},onExpandAll:function(){var t=a.getSelectedNodes();e.is(t,"array")&&t.length>0&&a.expandNode(t)},onCollapseAll:function(){var t=a.getSelectedNodes();e.is(t,"array")&&t.length>0&&a.collapseNode(t)},onWidgetLayoutChanged:function(){var e,t,i=V();E.currentDockArea=y.LeftDockArea,E._saveDockAreaInPreferences(),e=E.currentDockArea,(t=E.immersiveFrame.getDockingElement(e)).getContainedVisibleWindows().length<=0&&(t.visibleDockingZoneFlag=!1),n.notify("toggleCmdCheckHeaderState",{cmdName:"ToggleAuxiliaryView",cmdState:i}),n.notify("AuxLayoutCommandsToggled")},onReparentInstances:function(e){a.reparent(e)},onReparentBegin:function(e){a.isNodeAdded(e)&&(a.showOverlay(),a.unSelectAll())},onReparentEnd:function(e){a.isNodeAdded(e)&&a.removeOverlay()},addToAuxiliaryView:function(t,i){if(L([t])){var o,r,s,c,u,g,f=i||{},v={},h="V_Name",m=d.getNLSValue(n.getId()),w=0,D=!!e.is(f.forceDBMode)&&f.forceDBMode,p=!!e.is(f.askAddToAuxConfirmation)&&f.askAddToAuxConfirmation,S={withLinksResolved:!1,forceDBMode:D,onAddToTreeListComplete:function(e){w++,n.log(d.getNLSValue("AuxiliaryModule.AddRoot.Title",{objectName:e.get(h),view:m}),u),w===t.length&&(E.visibleFlag||n.notify("toggleCmdCheckHeaderState",{cmdName:"ToggleAuxiliaryView",cmdState:!0}),0===w&&n.info(d.getNLSValue("AuxiliaryModule.AddRootSuccess.Title",{view:m}),u))}};t=e.is(t,"array")?t:[t],o=function(){u=n.log(d.getNLSValue("AuxiliaryModule.AddRoot.LogMessage",{view:m})),t.forEach((function(t){g=a.validate(t),e.is(g)?(v[g.param]=g.paramValue,c=d.getNLSValue(g.key,v,"ValidationError"),n.warn(c,u),w++):a.addNode(t,S)}))},e.is(t)&&(p?(r=d.getNLSValue("Confirmation.AddAsNewRoot"),s=d.getNLSValue("Confirmation.AreYouSure"),l.showConfirmation(s,r,{attributes:[h],models:t},(function(t){e.is(t)&&t&&o()}))):o())}},onSearchAndAddInstance:function(){var e,t,n=a.getSelectedNodesInfo();1===n.length&&T()&&(t="RESOURCE"!==(e=s.getReferenceModel(n[0].id,!0)).get("PPRTYPE")?s.getValidChildTypes(e):["VPMReference"],u.showSearchDialoguAndActivate(b,{types:t}))},onInsertAsCopy:function(){var e,t=a.getSelectedNodesInfo();1===t.length&&T()&&(e=s.getReferenceModel(t[0].id,!0),u.showSearchDialoguAndActivate(b,{types:s.getValidChildTypes(e),command:"duplicate"}))}}}}}));