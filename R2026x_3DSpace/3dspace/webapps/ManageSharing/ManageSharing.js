define("DS/ManageSharing/services/ManageSharingAlert",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],(function(e,t){"use strict";return{_notif_manager:null,displayNotification:function(o){null===this._notif_manager&&(this._notif_manager=e,t.setNotificationManager(this._notif_manager),t.setStackingPolicy(3));var i="info";UWA.is(o.eventID)&&"primary"!==o.eventID&&(i=o.eventID),o.hasOwnProperty("hasHtml")||(o.hasHtml=!1);var n={level:i,title:o.title||"",subtitle:o.subtitle||"",message:o.msg,allowUnsafeHTML:o.hasHtml,sticky:o.sticky||!1,category:o.category||""};o.action&&(n.action=o.action),this._notif_manager.addNotif(n)},clearNotifications:function(){t.removeNotifications("","")}}})),define("DS/ManageSharing/utils/ShareModelServices",["UWA/Core","UWA/Class","DS/TreeModel/TreeNodeModel","WebappsUtils/WebappsUtils","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","i18n!DS/ManageSharing/assets/nls/SharingNLS"],(function(e,t,o,i,n,r){"use strict";function a(){this.data={},this.swymURL=""}return a.prototype={getImageFile:function(e,t,o){this.swymURL=o;var i="";return""!=o&&(i=o+e+"/"),i},getAvatarDetails:function(e){var t={},o=[[7,139,250],[249,87,83],[111,188,75],[158,132,106],[170,75,178],[26,153,123],[245,100,163],[255,138,46]];if(null!=e&&null!==e){var i=e.match(/\b\w/g),n=i[0].toUpperCase(),r=i[i.length-1].toUpperCase(),a=n+r,s=Math.ceil((n.charCodeAt(0)+r.charCodeAt(0))%o.length),l="rgb("+o[s][0]+","+o[s][1]+","+o[s][2]+")";t.name=e,t.avatarStr=a,t.avatarColor=l}return t},_populateOwnershipMap:function(e,t,o,i){if(t.has(e)){var n=t.get(e),r=n.objectID,a=[];Array.isArray(r)?(r.push(o.objectID),n.objectID=r):(a.push(r),a.push(o.objectID),n.objectID=a);var s=[],l=n.logicalAccess_ObjectIDs;Array.isArray(l)?(l.push(i),n.templogicalAccess_ObjectIDs=l):(s.push(l),s.push(i),n.logicalAccess_ObjectIDs=s),n.inheritedPath.length>0?o.inheritedPath.length>0&&n.inheritedPath.push(o.inheritedPath):n.inheritedPath=o.inheritedPath,o.rights!==n.rights&&(n.rights="Varies"),t.set(e,n)}else t.set(e,o)},_createModels_PID_Ownership:function(e,t,o,n,a,s){var l=this,c="",d=new Map;l.logicalNLSMap=n,l.rightsToNodeOptionsMap=t,l.attributeList=a,l.sharingReport=s;var u="",h=e.length;e.forEach((function(e){if(e.hasOwnProperty("swymURL")&&(c=e.swymURL),null!=e&&null!=e&&e.hasOwnProperty("objectID")){var t=e.objectID,o=e.ownership;null!=o&&null!=o&&Array.isArray(o)&&o.forEach((function(e){var o=e.owner;if(null!==o){var n=null,a="",s="";e.hasOwnProperty("access")&&(s=(n=e.access).logical),e.hasOwnProperty("inheritedPath")&&(a=e.inheritedPath);var h="",p="",g="",f="",w="",_="",m="",v="",b="",y="",S="",C="";if(y=o.comment,o.hasOwnProperty("person")){g=o.person.personID,h=o.person.personFirstName,p=o.person.personLastName;var I="fonticon fonticon-user";""==(f=o.person.personFullName)&&(f=g),C=g.substring(0,g.indexOf("_PRJ")),""!=(A=l.getImageFile(C,f,c))&&null!=A&&null!=A||("user-image-avatar",A=S=i.getWebappsAssetUrl("ManageSharing","img/icon_Person.png"));var V={objectID:t,personID:C,personFirstName:h,personLastName:p,personFullName:f,rights:s,logicalAccess_ObjectIDs:x={id:t,access:s},inheritedPath:a,picture:A,comment:y,icon:I};l._populateOwnershipMap(C,d,V,x)}if(o.hasOwnProperty("collabSpace")){_=o.collabSpace.collabSpaceID,""==f&&(o.collabSpace.hasOwnProperty("collabSpaceTitle")&&(v=o.collabSpace.collabSpaceTitle),f=""!=v?v:_),o.hasOwnProperty("organization")&&(w=o.organization.orgID,o.organization.hasOwnProperty("orgTitle")&&(f=f+"/"+(b=o.organization.orgTitle))),y=o.comment;I="fonticon fonticon-discovery-project";S=i.getWebappsAssetUrl("ManageSharing","img/Collab_Space_Thumbnail.png");V={objectID:t,orgID:w,collabSpaceID:_,orgTitle:b,collabSpaceTitle:v,personFullName:f,rights:s,logicalAccess_ObjectIDs:x={id:t,access:s},inheritedPath:a,picture:A=S,comment:y,icon:I};C=_+"_"+w,l._populateOwnershipMap(C,d,V,x)}var D="";if(o.hasOwnProperty("group")){y=o.comment,o.group.groupURI,C=o.group.groupURI,I="fonticon fonticon-users-group",f=o.group.groupTitle,m=o.group.groupURI,D=o.group.groupTitle,S=i.getWebappsAssetUrl("ManageSharing","img/User_Group.png");var A,x;V={objectID:t,groupURI:m,groupTitle:D,personFullName:f,rights:s,logicalAccess_ObjectIDs:x={id:t,access:s},inheritedPath:a,picture:A=S,comment:y,icon:I};l._populateOwnershipMap(C,d,V,x)}var E=d.get(C);E.personID=g,E.personFirstName=h,E.personLastName=p,E.personFullName=f,E.orgID=w,E.collabSpaceID=_,E.groupURI=m,""!=f?E.label=f:""!==w?E.label=w:""!==m&&(E.label=m);var P={objectID:t,personID:g,personFirstName:h,personLastName:p,personFullName:f,orgID:w,collabSpaceID:_,groupURI:m,rights:n,logicalRights:E.rights,inheritedPath:a,picture:E.picture,thumbnail:E.thumbnail,icon:E.icon,orgTitle:b,collabSpaceTitle:v,groupTitle:D};E.grid=P,E.customTooltip=f,E.multipleTitleLineNumber=!0;var O=l.attributeList[t].name,R=l.attributeList[t].typeDisplayName;null==R&&(R=l.attributeList[t].type);var T=l.attributeList[t].Revision;null==T&&(T="");var M=l.attributeList[t].organizationTitle;null==M&&(M=l.attributeList[t].organization);var N=l.attributeList[t].project,L=l.attributeList[t].responsibleName;null==L&&(L="");var U=l.logicalNLSMap[n.logical];null==U&&(U=r.get(n.logical)),u=u+'\n"'+O.replace(/"/g,'\\"')+'","'+R.replace(/"/g,'\\"')+'","'+T.replace(/"/g,'\\"')+'","'+M.replace(/"/g,'\\"')+'","'+N.replace(/"/g,'\\"')+'","'+L.replace(/"/g,'\\"')+'","'+f.replace(/"/g,'\\"')+'","'+U.replace(/"/g,'\\"')+'",';var k=[];let F={};Object.keys(l.logicalNLSMap).forEach((function(e){var t=l.logicalNLSMap[e];F[t]=e,k.push(t)}));var G=r.remove;k.push(G),E.menuIdObj=F,E.contextualMenu=k}}))}})),d.forEach(((e,o)=>{var i=e.logicalAccess_ObjectIDs,n=new Map;if(Array.isArray(i))for(var a=0;a<i.length;a++)if(n.has(i[a].access)){s=n.get(i[a].access)+1;n.set(i[a].access,s)}else{var s=1;n.set(i[a].access,s)}else{s=1;n.set(i.access,s)}var c="",d="",u=0;n.forEach(((e,t)=>{u+=e;var o=l.logicalNLSMap[t];null==o&&(o=r.get(t)),d=r.get(o),c=1==e?""!=c?c+", "+r.get(d)+"("+e+" "+r.get("Object")+")":c+r.get(d)+"("+e+" "+r.get("Object")+")":""!=c?c+", "+r.get(d)+"("+e+" "+r.get("Objects")+")":c+r.get(d)+"("+e+" "+r.get("Objects")+")"}));var p=h-u,g="";if(p>0&&(e.None_Objects=p,e.grid.None_Objects=p,e.grid.None_Filter="None",g=1==p?", "+r.get("None")+" ("+p+" "+r.get("Object")+")":", "+r.get("None")+" ("+p+" "+r.get("Objects")+")"),e.subLabel=c+g,e.inheritedPath.length>0&&(e.subLabel=e.subLabel+" "+r.get("Inherited")+" (1 "+r.get("Objects")+")"),(n.size>1||p>0)&&(d=r.get("Varies")),e.header=d,null!=t&&""!=d&&0==t.hasOwnProperty(d)){var f=[];f.push(e),t[d]=f}else t[d].push(e)})),s._Report=u},_createModelForAddMember:function(t){new Object;if(t){t._attributes&&t._attributes.revision&&t._attributes.revision.value&&(t.revision=t._attributes.revision.value),t._attributes&&t._attributes.owner&&t._attributes.owner.valueDB&&(t.ownerFullName=t._attributes.owner.valueDB),t._attributes&&t._attributes.type&&t._attributes.type.valueDB&&(t.typeDisplayName=t._attributes.objectId.valueDB),t._attributes&&t._attributes.type_icon_url&&(t.urlIcon=t._attributes.type_icon_url),t._attributes&&t._attributes.owner&&t._attributes.owner.value&&(t.owner=t._attributes.owner.value),t._attributes&&t._attributes.label&&(t.label=t._attributes.label),t._attributes&&t._attributes.objectId&&(t.id=t._attributes.objectId),t._attributes&&t._attributes.label&&(t.label=t._attributes.label),t._attributes&&t._attributes.owner&&t._attributes.owner.value&&(t.owner=t._attributes.owner.value),t._attributes&&t._attributes._DS_ATTR_type&&(t.type=t._attributes._DS_ATTR_type);var o=e.extend(t,{getRevision:function(){return t.revision},getOwnerFullName:function(){return t.ownerfullName},getTypeDisplayName:function(){return t.typeDisplayName},getUrlIcon:function(){return t.urlIcon},getOwner:function(){return t.owner},getLabel:function(){return t.label},getID:function(){return t.id},getLabel:function(){return t.label},getOwner:function(){return t.owner},getType:function(){return t.type},getDisplayName:function(){return t.label},getSelectedNodes:function(){return[this]},object:{revision:t.revision,ownerFullName:t.ownerFullName,icons:[t.urlIcon]},options:void 0});return t.grid||(t.grid=""),o}},isServicesInitialized:function(){return!1},_createAccessListFromResponse:function(e,t){var o={};null!=t&&void 0!==t&&t.hasOwnProperty("response")&&Array.isArray(t.response)&&t.response.forEach((function(t){if(t.hasOwnProperty("objectID")){if(e!=t.objectID)return;if(t.hasOwnProperty("access")&&Array.isArray(t.access))t.access.forEach((function(e){e.hasOwnProperty("logical")&&e.hasOwnProperty("nls")&&("emxFramework.Access.ReaderR"===e.nls&&(e.nls="Can Read (Restricted)"),o[e.logical]=e.nls)}))}}));return o},_createNLSAccessListFromResponse:function(e,t){var o={};null!=t&&void 0!==t&&t.hasOwnProperty("response")&&Array.isArray(t.response)&&t.response.forEach((function(t){if(t.hasOwnProperty("objectID")){if(e!=t.objectID)return;if(t.hasOwnProperty("access")&&Array.isArray(t.access))t.access.forEach((function(e){e.hasOwnProperty("logical")&&e.hasOwnProperty("nls")&&(o[e.nls]=e.logical)}))}}));return o},_createAttributeListFromResponse:function(e,t){var o={};null!=t&&void 0!==t&&t.hasOwnProperty("response")&&Array.isArray(t.response)&&t.response.forEach((function(e){e.hasOwnProperty("physicalId")&&(o[e.physicalId]=e)}));return o}},new a})),define("DS/ManageSharing/services/ManageServicesSettings",["UWA/Class","UWA/Class/Options","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/PlatformAPI/PlatformAPI","DS/WAFData/WAFData"],(function(e,t,o,i,n){"use strict";var r,a={CATIAV5:{name:"CATIAV5",require:"DS/ENOXCADCATIAV5UI/ENOXCADFileNameValidation"}},s=null;try{require(["DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext"],(function(e){r=e}),(function(){console.log("ManageServicesSettings: CfgAuthoringContext not available.")}))}catch(e){console.log("ManageServicesSettings: exception loading CfgAuthoringContext.")}var l=e.singleton(t,{folder_json:null,tenant:"",options:{wintop:!1},init:function(e){this._parent(),this._roles=null,this._userInfo=null},instance:function(){return this},getTenant:function(){return this.tenant},setTenant:function(e){this.tenant=e},getInstance:function(e){try{this.init(e)}catch(e){}for(var t in e)this.options[t]=e[t];return this},get3DSpaceUrl:function(e){var t=location.protocol+"//"+location.hostname,o="3DSpace";return e&&(e.serverUrl=t,e.serverUri=o),t+"/"+o},get3DSpaceBaseUrl:function(e){if(!UWA.is(this.getOption("platform_services"),"array"))throw new Error("Platform services not initialize yet");var t;try{for(var o=0;o<this.getOption("platform_services").length;o++)if(this.getOption("platform_services")[o].platformId==e){t=this.getOption("platform_services")[o]["3DSpace"];break}}catch(e){t=this.get3DSpaceUrl()}return t},get3DSpaceWSUrl:function(e,t,o){e&&""!=e||(e=widget.getValue("x3dPlatformId")||"OnPremise");var i=this.get3DSpaceBaseUrl(e)+t+(t.indexOf("?")<0?"?":"&")+"tenant="+e;return null!=o&&null!=o&&(i=i+"&"+o),i},getServerURL:function(){var e="";return o.getPlatformServices({onComplete:function(t){e=t[0]["3DSpace"]}}),e},getPlatformUrl:function(e,t){var o=location.protocol+"//"+location.hostname,i=e;return t&&(t.serverUrl=o,t.serverUri=i),o+"/"+i},getPlatformBaseUrl:function(e,t){if(!UWA.is(this.getOption("platform_services"),"array"))throw new Error("Platform services not initialize yet");var o;try{for(var i=0;i<this.getOption("platform_services").length;i++)if(this.getOption("platform_services")[i].platformId==t){o=this.getOption("platform_services")[i][e];break}}catch(e){o=this.getPlatformUrl()}return o},getPlatformWSUrl:function(e,t,o,i){null!=t&&null!=t&&""!=t||(t="OnPremise");var n=this.getPlatformBaseUrl(e,t)+o+"?tenant="+t;return null!=i&&null!=i&&(n=n+"&"+i),n},app_initialization:function(e,t){var i=this,n=!1;try{UWA.is(this.getOption("platform_services"),"array")||(n=!0)}catch(e){n=!0}n?t?(i.setOption("platform_services",t),e()):o.getPlatformServices({onComplete:function(t){i.setOption("platform_services",t),void 0!==window.widget&&window.widget&&void 0!==window.widget.getValue("x3dPlatformId")&&window.widget.getValue("x3dPlatformId")&&window.widget.getValue("x3dPlatformId").trim().length>0?i.tenant=window.widget.getValue("x3dPlatformId"):i.tenant=t[0].platformId,i.getEnforceFolderLinkSetting(),e()},onFailure:function(t){e()}}):e()},setFolderCommunicationChannel:function(e){e&&e.getCurrentFolder&&this.setCurrentFolder(e.getCurrentFolder()),i.subscribe("FolderEditor.CurrentFolder",this.setCurrentFolder.bind(this)),i.subscribe("FolderEditor.ActiveFolder",(function(e){void 0===e.origin?s=e:widget.id===e.origin&&""==(s=e).id&&(s.id=null),require(["DS/ManageSharing/services/ManageServicesSettings"],(function(e){e.getActiveFolder=function(){return s}}))})),require(["DS/PlatformAPI/PlatformAPI"],(function(e){e.publish("FolderEditor.ActiveFolderCallBack",null)}))},setCurrentFolder:function(e){this.folder_json=JSON.parse(e)},getCurrentFolderID:function(){return null!=this.folder_json&&this.folder_json.hasOwnProperty("FolderID")?this.folder_json.FolderID:null},getCurrentFolderSecurityContext:function(){return null!=this.folder_json&&this.folder_json.hasOwnProperty("SecurityContext")?this.folder_json.SecurityContext:null},hasPARRole:function(e){var t=this;void 0===t._hasPARRole?(t._hasPARRole=!1,this.hasRole((o=>{t._hasPARRole=o,e(t._hasPARRole)}),["InternalDS","PAR","PAU","UWE"])):e(t._hasPARRole)},getGrantedRoles:function(e){let t=this;if(Array.isArray(this._roles)&&this._roles.length)e(this._roles);else try{o.getGrantedRoles((function(o){t._roles=o,e(t._roles)}))}catch(t){e([])}},hasRole:function(e,t){var o=!1;this.getGrantedRoles((i=>{for(var n=0;n<i.length&!o;n++)for(var r=0;r<t.length;r++)if(i[n]&&i[n].id===t[r]){o=!0;break}e(o)}))},getServices:function(){return this.options.wintop?(void 0!==this.options.platform_services&&this.options.platform_services.length>0&&void 0!==this.options.platform_services[0].platformId&&(this.tenant=this.options.platform_services[0].platformId),l.getInstance(this.options)):l},getEnforceFolderLinkSettingAsync:function(e){if(void 0!==this._enforceFolderLink)e(null,this._enforceFolderLink);else{if(void 0!==this._enforceFolderLinkReturned&&0==this._enforceFolderLinkReturned)return void e(null,this._enforceFolderLink);this._enforceFolderLinkReturned=!1;var t=this.getServices().get3DSpaceWSUrl(this.tenant,"/resources/lifecycle/product/getEnforceFolderSetting",null),o=this,i={type:"json",method:"POST",proxy:"passport",authentication:"passport",data:UWA.Json.encode(""),headers:l.getHeaders(),onComplete:function(t){o._enforceFolderLinkReturned=!0;var i=t.result;i&&"true"===i&&(o._enforceFolderLink=!0),i&&"false"===i&&(o._enforceFolderLink=!1),e(null,o._enforceFolderLink)},onFailure:function(t){o._enforceFolderLinkReturned=!0,console.log("getEnforceFolderLinkSetting: Failure..."+t),e("getEnforceFolderLinkSetting: Failure..."+t)},onTimeout:function(){o._enforceFolderLinkReturned=!0,console.log("getEnforceFolderLinkSetting: A connection timeout occured."),e("getEnforceFolderLinkSetting: A connection timeout occured.")}};n.handleRequest(t,i)}},getEnforceFolderLinkSetting:function(){return void 0!==this._enforceFolderLink?this._enforceFolderLink:void this.getEnforceFolderLinkSettingAsync((function(){}))},isLogicalDeleteActive:function(e){e(!1)},getHeaders:function(e){var t={Accept:"application/json","Content-Type":"application/json","Accept-Language":widget.lang};if(e&&(t.SecurityContext=encodeURIComponent(decodeURIComponent(e))),r)try{var o=r.get();o.change.id.length>0&&(t["DS-Change-Authoring-Context"]="pid:"+o.change.id),o.evolution.id.length>0&&(t["DS-Configuration-Authoring-Context"]="pid:"+o.evolution.id)}catch(e){}return t},isOpenWithCATIAV5Available:function(e){this.hasPARRole(e)},getCADvalidityService:function(e){return new Promise((function(t,o){var i=a[e];if(null!=i){var n=i.require;require([n],(function(e){t(e)}),(function(){o("No Mapping found")}))}else o("No Mapping found")}))},getCurrentUserPromise:function(){return new Promise(((e,t)=>{null!=this.userInfo?e(userInfo):o.getUser({onComplete:e,onFailure:()=>{}})}))}});return l})),define("DS/ManageSharing/utils/SharingViewConstants",[],(function(){return{TYPE_LARGE_RESPONSIVE_TILE:1,TYPE_DATA_GRID:2,TYPE_SMALL_RESPONSIVE_TILE:3,TYPE_LARGE_RESPONSIVE_TILE_STRING:"Tile View",TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING:"Group Tile View",TYPE_LARGE_RESPONSIVE_TILE_SORTED_ASC_STRING:"Sorted Asc Tile View",TYPE_LARGE_RESPONSIVE_TILE_STRING_DESC_STRING:"Sorted Desc Tile View",TYPE_LARGE_RESPONSIVE_LIST_STRING:"List View"}})),define("DS/ManageSharing/views/Mediator",["DS/CoreEvents/ModelEvents"],(function(e){"use strict";var t=function(){new e};return t.prototype.createNewChannel=function(){return new e},t})),define("DS/ManageSharing/views/SharingCollectionViewUI",["DS/TreeModel/TreeDocument","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveLargeTilesCollectionView","DS/Controls/Accordeon","DS/ManageSharing/views/Mediator","DS/Handlebars/Handlebars","DS/ManageSharing/utils/SharingViewConstants","text!DS/ManageSharing/views/SharingCollectionView.html","i18n!DS/ManageSharing/assets/nls/SharingNLS","DS/TreeModel/DataModelSet","DS/Tweakers/GeneratedToolbar","DS/WebappsUtils/WebappsUtils","DS/ManageSharing/utils/ShareModelServices","UWA/Core","DS/Controls/Toggle","DS/Controls/ButtonGroup","DS/Controls/LineEditor","DS/SearchWidget/SearchWidget","DS/SearchWidget/SearchWidgetConstant","DS/UIKIT/Input/Select","DS/UIKIT/Input/Button","DS/ManageSharing/services/ManageSharingAlert"],(function(e,t,o,i,n,r,a,s,l,c,d,u,h,p,g,f,w,_,m,v,b,y){"use strict";var S={useDragAndDrop:!1,pageScrollValueTriggeringInfiniteScroll:.5,domId:"sharing-accordion-tileview",height:"inherit",displayTitleTooltip:!0,displayPropertiesTooltip:!0,useDragAndDrop:!1,useNativeScroller:!0,displayedOptionalCellProperties:["contextualMenu","activeFlag"],selectionBehavior:{canInteractiveMultiselectWithCheckboxClick:!0,unselectAllOnEmptyArea:!0,toggle:!0}},C=function(){this.currentView=a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,this.listOfAddedMembers=[]};return C.prototype.getIconItems=function(){var e=this,t=[];for(const i in e.shareInfo.accessLogicalNlsMap)if((0!=e.shareInfo.LifecycleConfidentialityEnabled||"ReaderR"!=i)&&e.shareInfo.accessLogicalNlsMap.hasOwnProperty(i)){var o={id:i,type:"PushItem",title:e.shareInfo.accessLogicalNlsMap[i],action:{callback:this.onSetAccess.bind(this,i)},tooltip:l[i]};t.push(o)}return{entries:[{id:"share",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"forward ",fontIconFamily:1},label:l["topbar-share"],className:"sharing-share",position:"far",category:"1",disabled:1!=this.validObject,value:this.onShare.bind(this),tooltip:l["topbar-share"]}},{id:"exportCSV",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"export",fontIconFamily:1},label:l["topbar-export"],className:"sharing-exportCSV",position:"far",category:"1",value:this.onExportCSV.bind(this),tooltip:l["topbar-export"]}},{id:"setAccess",type:"PushItem",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"exchange",fontIconFamily:1},className:"sharing-set-access",position:"far",category:"1",value:{menu:t},tooltip:l["set-access"]}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},label:l.remove,className:"sharing-delete",position:"far",category:"1",disabled:!0,value:this.onDelete.bind(this),tooltip:l.remove}},{id:"filter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"filter",fontIconFamily:1},label:l["Parameter.Add.QuickToTable"],className:"sharing-filter-view",position:"far",category:"1",value:this.onFilter.bind(this),tooltip:l.filter}},{id:"select-all",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"select-on",fontIconFamily:1},label:l.SelectAll,className:"selectAll",position:"far",category:"2",value:this.onSelectAll.bind(this),tooltip:l.SelectAll}},{id:"group",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"group",fontIconFamily:1},label:l.groupView,className:"sharing-group-view",position:"far",category:"2",disabled:!1,value:this.onChangeViewToGroupView.bind(this),tooltip:l.groupView}},{id:"listView",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"view-list",fontIconFamily:1},label:l.listView,className:"sharing-list-view",position:"far",category:"2",value:this.onChangeViewToListView.bind(this),tooltip:l.listView}},{id:"sort-asc",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"alpha-sorting-a-z",fontIconFamily:1},label:l.sortAscListView,className:"sharing-asc-list-view",position:"far",category:"2",value:this.onChangeViewToSortAscListView.bind(this),tooltip:l.sortAscListView}},{id:"sort-desc",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"alpha-sorting-z-a",fontIconFamily:1},label:l.sortDescListView,className:"sharing-desc-list-view",position:"far",category:"2",value:this.onChangeViewToSortDescListView.bind(this),tooltip:l.sortDescListView}}]}},C.prototype.AddUser=function(){var e=this,t=!1,o="";o=e.searchWidget.getNewOwner();var i=e.selectRightNewUser.getValue(),n="";if(i.length>0){if(n=i[0],null===o||""===o)return t;o.hasOwnProperty("userGrp")&&(o.group={groupURI:o.userGrp.id,groupTitle:o.userGrp.label},delete o.userGrp);var r={ownership:{InitRights:"",operation:"ADD",owner:o,access:{logical:n}},isTrueComment:!0,isTrueInheritedPath:!0};return e.listOfAddedMembers.push(r),t=!0}},C.prototype.addSearchBox=function(e){var t=this,o=t.listOfAddedMembers.length;e="  "+e;var i=p.createElement("span",{id:"addedItem"+o,class:"SH_AddedItemContainer"}),n=p.createElement("span",{class:"SH_TextForItemContainer",text:e}).inject(i);p.createElement("span",{id:o,class:"SH_TextForItemContainer",text:"x"}).inject(n).addEventListener("click",(function(){i.setStyle("display","none"),t.DeleteUser(this.id)})),t.showMember.show(),i.inject(t.showMember)},C.prototype.DeleteUser=function(e){var t=parseInt(e)-1;this.listOfAddedMembers.splice(t,1)},C.prototype.ownerAlreadyExist=function(e){var t=[],o=!1;return this.listOfAddedMembers.every((function(i,n){var r=i.ownership.owner;if(r.hasOwnProperty("person")||e.hasOwnProperty("person")){if(!r.hasOwnProperty("person")||!e.hasOwnProperty("person"))return!0;if(r.person.personID!=e.person.personID)return!0}if(r.hasOwnProperty("collabSpace")||e.hasOwnProperty("collabSpace")){if(!r.hasOwnProperty("collabSpace")||!e.hasOwnProperty("collabSpace"))return!0;if(r.collabSpace.collabSpaceID!=e.collabSpace.collabSpaceID)return!0}if(r.hasOwnProperty("organization")||e.hasOwnProperty("organization")){if(!r.hasOwnProperty("organization")||!e.hasOwnProperty("organization"))return!0;if(r.organization.orgID!=e.organization.orgID)return!0}if(r.hasOwnProperty("group")||e.hasOwnProperty("group")){if(!r.hasOwnProperty("group")||!e.hasOwnProperty("group"))return!0;if(r.group.groupURI!=e.group.groupURI)return!0}return(r.hasOwnProperty("comment")||e.hasOwnProperty("comment"))&&r.hasOwnProperty("comment")&&e.hasOwnProperty("comment")&&r.comment==e.comment&&(o=!0),t.push({Index:n,IsSame:o}),!0})),t},C.prototype.createJSONArrayModif=function(){var e=[];if(1==this.isReadOnly)return e;for(var t=this,o=t.listOfAddedMembers.length,i=0;i<o;i++){var n=null,r=t.listOfAddedMembers[i];n=r.ownership.owner;var a=!0,s=!0;r.hasOwnProperty("isTrueComment")&&(a=r.isTrueComment),r.hasOwnProperty("isTrueInheritedPath")&&(s=r.isTrueInheritedPath);var l="";1==t.options.activeComment&&(l=t.table.getCellValue(lines[i],"Comments"));var c=r.ownership.InitRights,d="Reader";r.hasOwnProperty("ownership")&&(d=r.ownership.access.logical);var u=!1;null!=d&&""!=d||(u=!0);var h=!1;null!=c&&""!=c||(h=!0);var p=!1;if(""!=l&&l!=n.comment&&(p=!0),1==h&&0==u&&(1==p&&(n.comment=l),e.push({operation:{operation:"ADD",owner:n,access:{logical:d}},isTrueComment:!0,isTrueInheritedPath:!0,action:"ADD"})),0==h&&1==u&&e.push({operation:{operation:"REMOVE",owner:n,access:{logical:"Empty"}},isTrueComment:a,isTrueInheritedPath:s,action:"REMOVE"}),0==h&&0==u)if(1==p){var g=JSONUtil.decode(JSONUtil.encode(n));g.comment=l,e.push({operation:{operation:"ADD",owner:g,access:{logical:d}},isTrueComment:!0,isTrueInheritedPath:!0,action:"ADD"})}else d!=c&&e.push({operation:{operation:"ADD",owner:n,access:{logical:d}},isTrueComment:a,isTrueInheritedPath:s,action:"MODIFY"})}return e},C.prototype.modifyDataPCS=function(){var e=this,t=e.createJSONArrayModif(),o=[],i=e.shareInfo.listOfIDs,n=new Array;if(t.length>0){t.forEach((function(e){var t=e.operation;n.push(t)})),i.forEach((function(e){o.push({objectID:e,ownership:n})}));var r={ownershipVector:o};e.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:r})}},C.prototype.init=function(e){var c=this;this.options=e,this.validObject=e.validObject,this._allData=e.data,this._model=e.model,this._gridModel=e.gridModel,this._groupedGridModel=e.groupedGridModel,this._toolbarChannel=(new n).createNewChannel(),this.LifecycleConfidentialityEnabled=e.LifecycleConfidentialityEnabled,this.checkAccessToShareCmdFlag=e.checkAccessToShareCmdFlag;var m=r.compile(s)();e.container||(e.container=e._triptychWrapper.getMainPanelContainer()),e.container.innerHTML=m,e.columnsConfiguration=[{dataIndex:"tree"},{text:"logicalRights",dataIndex:"logicalRights"},{text:"personID",dataIndex:"personID"},{text:"personFirstName",dataIndex:"personFirstName"},{text:"personLastName",dataIndex:"personLastName"},{text:"personFullName",dataIndex:"personFullName"},{text:"orgID",dataIndex:"orgID"},{text:"collabSpaceID",dataIndex:"collabSpaceID"}],e.views=[a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,a.TYPE_LARGE_RESPONSIVE_TILE_STRING,a.TYPE_LARGE_RESPONSIVE_TILE_SORTED_ASC_STRING,a.TYPE_LARGE_RESPONSIVE_TILE_SORTED_DESC_STRING],this._columnsConfiguration=e.columnsConfiguration,this.viewContainer=e.container.querySelector(".sharingcollectionview-content-container"),this.collectionViewEvents=e.collectionViewEvents,this._selectedItems=[],e.withmultisel&&(this.toolbarOptions.withmultisel=!0),e.sort;const C=d.prototype.createTreeDocument(this.getIconItems());this._shareLayoutDiv=e.container.querySelector(".sharingcollectionview-share-container"),this._shareAreaDiv=new p.Element("div",{class:"share-item-view-container highlighted"}).inject(this._shareLayoutDiv),c.tableAddMember=p.createElement("table").inject(c._shareAreaDiv),c.addMEmberContainer=p.createElement("tbody").inject(c.tableAddMember),c.addMemberTR=p.createElement("tr",{class:"tr-addMember"}).inject(c.addMEmberContainer),this._shareAreaDiv.setStyle("display","flex"),this._shareAreaDiv.setStyle("height","65px"),this._shareAreaDiv.setStyle("overflow-y","scroll"),this.SearchTD=p.createElement("td").inject(this.addMemberTR),c.showMember=p.createElement("div",{class:"SH_AddedMomberContainer",id:"member_Reader"}).inject(this.SearchTD),this.SearchTD.setStyle("width","65%"),c.searchWidget=_.getSearchWidget(_.RESTRICTED,{className:"share-item-view-wrapper",ForbiddenChar:'"#$@%,?\\<>[]|:',MaxNumber:"5",MaxSize:"300",topClassHeight:"",position:"auto",serverName:"",serverUri:"",serverUrl:"",exttype:"userGrp",showEmptyCategory:!1,hint:l.SearchPlaceHolder,events:{onValid:function(){c.AddUser()&&c.addSearchBox(this.searchInput.getValue()),this.searchInput.setValue("")},onUnvalid:function(){1==c.options.activeComment&&c.searchComment.hide()},onError:function(e){c.eventData={eventID:"error",msg:l.get("searchFailed")},y.displayNotification(c.eventData)}}}),c.searchWidget.inject(c.SearchTD),c.searchWidget.container.container.getElementsByClassName("AR_SearchButton").SW_SearchInputButton.setStyle("display","none"),this.selectRightNewUser=new v({nativeSelect:!0,placeholder:!1}),this.searchRight=p.createElement("td",{class:"AR_NewSelectRightColumn AR_SpanNew","data-rec-id":"datarecSelectRightColumnSpanNew",html:""}),this.selectRightNewUser.inject(this.searchRight),this.searchRight.inject(c._shareAreaDiv),this.searchRight.setStyle("width","35%"),this.searchRight.setStyle("padding-top","20px"),this.searchRight.setStyle("padding-left","8px");var I=null;(I=new b({attributes:{title:l.Share},value:"",name:"applyShare",className:"default medium applyShare",icon:"forward",tooltip:l.Share})).getContent().setAttribute("data-rec-id","dataRecAddUser"),I.elements.icon.setAttribute("data-rec-id","dataRecAddUserIcon"),I.addEvents({onClick:function(){c.modifyDataPCS()}}),this.searchAdd=p.createElement("td",{class:"AR_AddUserColumn AR_SpanNew","data-rec-id":"datarecAddUserColumnSpanNew",html:""}),I.inject(this.searchAdd),this.searchAdd.inject(c._shareAreaDiv),this.searchAdd.setStyle("padding-left","8px"),this.searchAdd.setStyle("padding-top","20px");var V=[];this.options.RightList.forEach((function(e,t){if(0==c.LifecycleConfidentialityEnabled&&"ReaderR"!=e.logical)var o={label:e.nls,value:e.logical};else if(c.LifecycleConfidentialityEnabled)o={label:e.nls,value:e.logical};null!=o&&V.push(o)})),this.selectRightNewUser.add(V,!0),V.length>0&&this.selectRightNewUser.setValue(V[0]),this.selectRightNewUser.addEvents({onChange:function(){for(var e=this.getValue(),t=0;t<c.listOfAddedMembers.length;t++)c.listOfAddedMembers[t].ownership.access.logical=e[0]}}),this._shareLayoutDiv.hidden=!0,this._filterLayoutDiv=e.container.querySelector(".sharingcollectionview-filter-container"),this._searchAreaDiv=new p.Element("div",{class:"search-area-display"}).inject(this._filterLayoutDiv),this._searchInput=new w({placeholder:l.Filter,id:"search_userName",class:"search-input",value:"",sizeInCharNumber:75,selectAllOnFocus:!0}).inject(this._searchAreaDiv),c.searchWidget.setSelectedItemList(this.shareInfo.SelectedItems),this._checkButtonGroupDiv=new p.Element("div",{class:"check-button-group"}).inject(this._filterLayoutDiv),this._checkButtonGroupDiv.setStyle("display","flex"),this._checkButtonGroupDiv.setStyle("flex-direction","row"),this._checkButtonGroupDiv.setStyle("flex-wrap","wrap");c=this;if(this._searchInput.addEventListener("change",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTileSearchString(c._searchInput.value)})),this._canEditCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canEditButton=new g({type:"checkbox",label:l.get("CanEdit"),value:0,checkFlag:!0}),this._canEditCBGroup.addChild(this._canEditButton),this._canEditCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Author",c._canEditButton.checkFlag)})),this._canReadCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canReadButton=new g({type:"checkbox",label:l.get("CanRead"),value:0,checkFlag:!0}),this._canReadCBGroup.addChild(this._canReadButton),this._canReadCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Reader",c._canReadButton.checkFlag)})),this._canReadRestrictionCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canReadRestrictionButton=new g({type:"checkbox",label:l.get("CanReadRestriction"),value:0,checkFlag:!0}),this._canReadRestrictionCBGroup.addChild(this._canReadRestrictionButton),this._canReadRestrictionCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("ReaderR",c._canReadRestrictionButton.checkFlag)})),this._canViewCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canViewButton=new g({type:"checkbox",label:l.get("CanView"),value:2,checkFlag:!0}),this._canViewCBGroup.addChild(this._canViewButton),this._canViewCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Viewer",c._canViewButton.checkFlag)})),this._canManageCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canManageButton=new g({type:"checkbox",label:l.get("CanManage"),value:3,checkFlag:!0}),this._canManageCBGroup.addChild(this._canManageButton),this._canManageCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Owner",c._canManageButton.checkFlag)})),this._canAddRemoveAttachmentsCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canAddRemoveAttachmentsButton=new g({type:"checkbox",label:l.get("CanAddRemoveAttachments"),value:4,checkFlag:!0}),this._canAddRemoveAttachmentsCBGroup.addChild(this._canAddRemoveAttachmentsButton),this._canAddRemoveAttachmentsCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("CanAddRemoveAttachments",c._canAddRemoveAttachmentsButton.checkFlag)})),this._leaderCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._leaderButton=new g({type:"checkbox",label:l.get("Leader"),value:3,checkFlag:!0}),this._leaderCBGroup.addChild(this._leaderButton),this._leaderCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Leader",c._leaderButton.checkFlag)})),this._projectLeadCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._projectLeadButton=new g({type:"checkbox",label:l.get("ProjectLeadFilter"),value:3,checkFlag:!0}),this._projectLeadCBGroup.addChild(this._projectLeadButton),this._projectLeadCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Project Lead",c._projectLeadButton.checkFlag)})),this._projectMemberCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._projectMemberButton=new g({type:"checkbox",label:l.get("ProjectMemberFilter"),value:3,checkFlag:!0}),this._projectMemberCBGroup.addChild(this._projectMemberButton),this._projectMemberCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Project Member",c._projectMemberButton.checkFlag)})),this._showUsersWithInheritedPermissionCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._showUsersWithInheritedPermissionButton=new g({type:"checkbox",label:l.get("Inherited"),value:5,checkFlag:!0}),this._showUsersWithInheritedPermissionCBGroup.addChild(this._showUsersWithInheritedPermissionButton),this._showUsersWithInheritedPermissionCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Show users with inherited permission",c._showUsersWithInheritedPermissionButton.checkFlag)})),this._readCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._readButton=new g({type:"checkbox",label:l.get("Read"),value:6,checkFlag:!0}),this._readCBGroup.addChild(this._readButton),this._readCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Read",c._readButton.checkFlag)})),this._addCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._addButton=new g({type:"checkbox",label:l.get("Add"),value:7,checkFlag:!0}),this._addCBGroup.addChild(this._addButton),this._addCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Add",c._addButton.checkFlag)})),this._basicCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._basicButton=new g({type:"checkbox",label:l.get("Basic"),value:8,checkFlag:!0}),this._basicCBGroup.addChild(this._basicButton),this._basicCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Basic",c._basicButton.checkFlag)})),this._readWriteCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._readWriteButton=new g({type:"checkbox",label:l.get("ReadWrite"),value:9,checkFlag:!0}),this._readWriteCBGroup.addChild(this._readWriteButton),this._readWriteCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Read Write",c._readWriteButton.checkFlag)})),this._removeCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._removeButton=new g({type:"checkbox",label:l.get("Remove"),value:10,checkFlag:!0}),this._removeCBGroup.addChild(this._removeButton),this._removeCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("remove",c._removeButton.checkFlag)})),this._addRemoveCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._addRemoveButton=new g({type:"checkbox",label:l.get("AddRemove"),value:11,checkFlag:!0}),this._addRemoveCBGroup.addChild(this._addRemoveButton),this._addRemoveCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Add Remove",c._addRemoveButton.checkFlag)})),this._fullCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._fullButton=new g({type:"checkbox",label:l.get("Full"),value:12,checkFlag:!0}),this._fullCBGroup.addChild(this._fullButton),this._fullCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Full",c._fullButton.checkFlag)})),this._variesCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._variesButton=new g({type:"checkbox",label:l.get("Varies"),value:12,checkFlag:!0}),this._variesCBGroup.addChild(this._variesButton),this._variesCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Varies",c._variesButton.checkFlag)})),this._noneCBGroup=new f({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._noneButton=new g({type:"checkbox",label:l.get("None"),value:12,checkFlag:!0}),this._noneCBGroup.addChild(this._noneButton),this._noneCBGroup.addEventListener("click",(function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("None",c._noneButton.checkFlag)})),this.contextualMenuHandling=function(e){var t=[];if(e&&e.cellInfos&&e.cellInfos.cellModel){var o=[];if(e.cellInfos.cellModel.__dataModelSet&&null!=e.cellInfos.cellModel.__dataModelSet._listOfDataModels?e.cellInfos.cellModel.__dataModelSet&&e.cellInfos.cellModel.__dataModelSet._listOfDataModels&&e.cellInfos.cellModel.__dataModelSet._listOfDataModels[e.cellInfos.cellModel.__dataModelID]._data&&(o=e.cellInfos.cellModel.__dataModelSet._listOfDataModels[e.cellInfos.cellModel.__dataModelID]._data.contextualMenu):o=e.cellInfos.cellModel._options.contextualMenu,o.indexOf("Remove")<o.length-1){var i=o.indexOf("Remove");o[i]="RemoveAccess"}for(var n=0;n<o.length;n++){var r="";null!=c.options.accessListToNlsValues&&(r=c.options.accessListToNlsValues[o[n]]),void 0!==r&&""!==r||(r=o[n]);var a=l[r];null!=a&&(r=a),0===o[n].localeCompare(l.remove)?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(t){var o={operation:"delete",selectedItems:e.cellInfos.manager.getTreeDocument().getSelectedNodes()};c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-delete",data:o})}}}):r===l.Author?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Author",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ReaderR&&c.LifecycleConfidentialityEnabled?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"ReaderR",c.shareInfo.listOfIDs);i.hasOwnProperty("ownershipVector")&&i.ownershipVector.length>0&&i.ownershipVector[0].hasOwnProperty("ownership")&&i.ownershipVector[0].ownership.length>0&&i.ownershipVector[0].ownership[0].hasOwnProperty("owner")&&(i.ownershipVector[0].ownership[0].owner.hasOwnProperty("collabSpace")&&i.ownershipVector[0].ownership[0].owner.hasOwnProperty("organization")?(c.eventData={eventID:"error",msg:l.get("ReaderRAccessToGrpsCSORG")},y.displayNotification(c.eventData)):c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i}))}}}):r===l.Reader?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Reader",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Viewer?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Viewer",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Owner?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Owner",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Read?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Read",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Add?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Add",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Basic?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Basic",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ReadWrite?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Read Write",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.AddRemove?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Add Remove",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Full?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Full",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.RemoveAccess?t.push({type:"PushItem",title:"Remove",icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Remove",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.CanAddRemoveAttachments?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"CanAddRemoveAttachments",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Leader?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Leader",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ProjectLead?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Project Lead",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ProjectMember?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Project Member",c.shareInfo.listOfIDs);c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):o[n].contains(l.CompareInheritedPermission)&&t.push({type:"PushItem",title:o[n],icon:""}),t.push({type:"SeparatorItem"})}}return t},this._getDatatoUpdateOwnership=function(e,t,o){for(var i="",n="",r="",a="",s="",l="",c="",d="",u="",h="",p=[],g="",f=0;f<e.length;f++){e[f].options.hasOwnProperty("comment")&&(g=e[f].options.comment),e[f].options.hasOwnProperty("personFirstName")&&(i=e[f].options.personFirstName),e[f].options.hasOwnProperty("personLastName")&&(n=e[f].options.personLastName),e[f].options.hasOwnProperty("personFullName")&&(r=e[f].options.personFullName),e[f].options.hasOwnProperty("personID")&&(a=e[f].options.personID),e[f].options.hasOwnProperty("orgID")&&(s=e[f].options.orgID),e[f].options.hasOwnProperty("collabSpaceID")&&(l=e[f].options.collabSpaceID),e[f].options.hasOwnProperty("collabSpaceTitle")&&(c=e[f].options.collabSpaceTitle),e[f].options.hasOwnProperty("orgTitle")&&(d=e[f].options.orgTitle),e[f].options.hasOwnProperty("groupURI")&&(u=e[f].options.groupURI),e[f].options.hasOwnProperty("groupTitle")&&(h=e[f].options.groupTitle);var w={operation:"ADD",owner:0!=a.length?{person:{personFirstName:i,personFullName:r,personID:a,personLastName:n},comment:g}:""!=u&&""!=h?{comment:"-",group:{groupURI:u,groupTitle:h}}:{comment:"-",organization:{orgID:s,orgTitle:d},collabSpace:{collabSpaceID:l,collabSpaceTitle:c}},access:{logical:t}};p.push(w)}var _=[];return o.forEach((function(e){_.push({objectID:e,ownership:p})})),{ownershipVector:_}},this.noOfSelectedItems=0,this._titleGroupCollection=function(t){var i=new o(S);i.onSelectionAdd((function(e){c._toolbar.updateNodeModel("setAccess",{disabled:!1}),e._options.hasOwnProperty("isAggrShape")&&e._options.isAggrShape?(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()):(e._options.hasOwnProperty("validObjectID")&&0==e._options.validObjectID&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.updateNodeModel("share",{disabled:!0}),c._toolbar.pushUpdateView()),0==c.noOfSelectedItems&&(0==c.noOfSelectedItems&&0===e.options.contextualMenu.length?c._toolbar.updateNodeModel("delete",{disabled:!0}):c._toolbar.updateNodeModel("delete",{disabled:!1}),c._toolbar.pushUpdateView())),c.noOfSelectedItems++})),i.onSelectionRemove((function(e){c.noOfSelectedItems--,0==c.noOfSelectedItems&&c._toolbar.updateNodeModel("setAccess",{disabled:!0}),e._options.hasOwnProperty("isAggrShape")&&e._options.isAggrShape&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()),0==c.noOfSelectedItems&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()),0==c.validObject&&(c._toolbar.updateNodeModel("share",{disabled:!0}),c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView())}));var n={callback:function(e){return c.contextualMenuHandling(e)}};return i.onContextualEvent=n,e.onPostCellRequest&&i.onPostCellRequest(e.onPostCellRequest),e.onContextualEventCallback&&(i.onContextualEvent={callback:e.onContextualEventCallback}),i},e.container.getElementsByClassName("wux-controls-buttongroup wux-controls-abstract").length>0)for(var D=e.container.getElementsByClassName("wux-controls-buttongroup wux-controls-abstract").length,A=0;A<D;A++)e.container.getElementsByClassName("wux-controls-buttongroup wux-controls-abstract")[A].setStyle("margin-right","8px");e.container.getElement(".sharingcollectionview-filter-container").setStyle("padding-bottom","8px"),e.container.getElement(".sharingcollectionview-filter-container").setStyle("display","none");var x=!0;e.hasOwnProperty("validObject")&&0==e.validObject&&(x=!1),this._toolbar=new d({overflowManagement:"dropdown",direction:"horizontal",items:C,validObject:x}),this._toolbarContainer=e.container.querySelector(".sharingcollectionview-toolbar-container"),this._toolbar.inject(this._toolbarContainer),this.currentView=e.currentView?e.currentView:a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING;e.onPostCellRequest=function(e){var t=e.cellView;if(p.is(t)&&p.is(t.contentView)){t=e.cellView;var o=e.cellModel;if(p.is(o)&&p.is(o._options)){let t="",i="fonticon fonticon-user",n="fonticon fonticon-discovery-project";if(e.cellView.contentView.picture="",p.is(o._options.personID)&&(t=o._options.personID),""!=t){let r=null;if(r=h.swymURL,null==r||""===r){let t=o._options.personFullName,i=h.getAvatarDetails(t);e.cellView.contentView.elements.picture.style["background-image"]="",e.cellView.contentView.elements.picture.style.background=i.avatarColor,e.cellView.contentView.elements.picture.style.cursor="auto",e.cellView.contentView.elements.picture.style["text-align"]="center",e.cellView.contentView.elements.picture.style.width="50px",e.cellView.contentView.elements.picture.style.height="50px",e.cellView.contentView.elements.picture.style.padding="5px",e.cellView.contentView.elements.picture.style["vertical-align"]="middle",e.cellView.contentView.elements.picture.style.display="table-cell",e.cellView.contentView.elements.picture.innerHTML=i.avatarStr,e.cellView.contentView.elements.picture.style["font-size"]="30px",e.cellView.contentView.elements.picture.style["border-radius"]="50%",e.cellView.contentView.elements.picture.style.color="white"}else{e.cellView.contentView.elements.picture.style["background-position"]="center center",e.cellView.contentView.elements.picture.style["background-color"]="#f9f9f9",e.cellView.contentView.elements.picture.style["user-select"]="none",e.cellView.contentView.elements.picture.style["background-size"]="cover",e.cellView.contentView.elements.picture.style["background-repeat"]="no-repeat",e.cellView.contentView.elements.picture.style.position="relative",e.cellView.contentView.elements.picture.style.width="80px",e.cellView.contentView.elements.picture.style.height="60px",e.cellView.contentView.elements.picture.style["border-radius"]="0%";let o=r+"/api/user/getpicture/login/"+t.split("_PRJ")[0]+"/format/normal";e.cellView.contentView.picture=n,e.cellView.contentView.elements.hasOwnProperty("checkbox")&&e.cellView.contentView.elements.checkbox.hide(),e.cellView.contentView.hasOwnProperty("checkbox")&&e.cellView.contentView.checkbox.hide(),e.cellView.contentView.elements.picture.style["background-image"]="url("+o+")"}o._options.icon=i,e.cellView.contentView.icon=i}else if(e.cellView.contentView.elements.picture.style["background-position"]="center center",e.cellView.contentView.elements.picture.style["background-color"]="#f9f9f9",e.cellView.contentView.elements.picture.style["user-select"]="none",e.cellView.contentView.elements.picture.style["background-size"]="cover",e.cellView.contentView.elements.picture.style["background-repeat"]="no-repeat",e.cellView.contentView.elements.picture.style.position="relative",e.cellView.contentView.elements.picture.style.width="80px",e.cellView.contentView.elements.picture.style.height="60px",e.cellView.contentView.elements.picture.style["border-radius"]="0%",p.is(o._options.collabSpaceID)&&""!=o._options.collabSpaceID){let t=u.getWebappsAssetUrl("ManageSharing","img/Collab_Space_Thumbnail.png");o._options.icon=n,o._options.picture=t,o._options.thumbnail=t,e.cellView.contentView.picture=n,e.cellView.contentView.elements.hasOwnProperty("checkbox")&&e.cellView.contentView.elements.checkbox.hide(),e.cellView.contentView.hasOwnProperty("checkbox")&&e.cellView.contentView.checkbox.hide()}else if(p.is(o._options.userGrpID)&&""!=o._options.userGrpID){let t=u.getWebappsAssetUrl("ManageSharing","img/User_Group.png");e.cellView.contentView.picture=t,e.cellView.contentView.elements.hasOwnProperty("checkbox")&&e.cellView.contentView.elements.checkbox.hide(),e.cellView.contentView.hasOwnProperty("checkbox")&&e.cellView.contentView.checkbox.hide()}}if(p.is(o.__dataModelSet)&&p.is(o.__dataModelSet._listOfDataModels)&&p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID])){let t="",i="fonticon fonticon-user",n="fonticon fonticon-discovery-project";if(e.cellView.contentView.picture="",p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID]._data)&&p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.personID)&&(t=o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.personID),""!=t){let r=null;if(r=h.swymURL,null==r){let t=o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.personFullName,i=h.getAvatarDetails(t);e.cellView.contentView.elements.picture.style["background-image"]="",e.cellView.contentView.elements.picture.style.background=i.avatarColor,e.cellView.contentView.elements.picture.style.cursor="auto",e.cellView.contentView.elements.picture.style["text-align"]="center",e.cellView.contentView.elements.picture.style.width="50px",e.cellView.contentView.elements.picture.style.height="50px",e.cellView.contentView.elements.picture.style.padding="5px",e.cellView.contentView.elements.picture.style["vertical-align"]="middle",e.cellView.contentView.elements.picture.style.display="table-cell",e.cellView.contentView.elements.picture.innerHTML=i.avatarStr,e.cellView.contentView.elements.picture.style["font-size"]="30px",e.cellView.contentView.elements.picture.style["border-radius"]="50%",e.cellView.contentView.elements.picture.style.color="white"}else{e.cellView.contentView.elements.picture.style["background-position"]="center center",e.cellView.contentView.elements.picture.style["background-color"]="#f9f9f9",e.cellView.contentView.elements.picture.style["user-select"]="none",e.cellView.contentView.elements.picture.style["background-size"]="cover",e.cellView.contentView.elements.picture.style["background-repeat"]="no-repeat",e.cellView.contentView.elements.picture.style.position="relative",e.cellView.contentView.elements.picture.style.width="80px",e.cellView.contentView.elements.picture.style.height="60px",e.cellView.contentView.elements.picture.style["border-radius"]="0%";let o=r+"/api/user/getpicture/login/"+t.split("_PRJ")[0]+"/format/normal";e.cellView.contentView.elements.picture.style["background-image"]=o,e.cellView.contentView.picture=n,e.cellView.contentView.elements.hasOwnProperty("checkbox")&&e.cellView.contentView.elements.checkbox.hide(),e.cellView.contentView.hasOwnProperty("checkbox")&&e.cellView.contentView.checkbox.hide(),e.cellView.contentView.elements.picture.style["background-image"]="url("+o+")"}o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.icon=i,e.cellView.contentView.icon=i}else if(e.cellView.contentView.elements.picture.style["background-position"]="center center",e.cellView.contentView.elements.picture.style["background-color"]="#f9f9f9",e.cellView.contentView.elements.picture.style["user-select"]="none",e.cellView.contentView.elements.picture.style["background-size"]="cover",e.cellView.contentView.elements.picture.style["background-repeat"]="no-repeat",e.cellView.contentView.elements.picture.style.position="relative",e.cellView.contentView.elements.picture.style.width="80px",e.cellView.contentView.elements.picture.style.height="60px",e.cellView.contentView.elements.picture.style["border-radius"]="0%",p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.collabSpaceID)&&""!=o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.collabSpaceID){let t=u.getWebappsAssetUrl("ManageSharing","img/Collab_Space_Thumbnail.png");o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.icon=n,o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.picture=t,o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.thumbnail=t,e.cellView.contentView.picture=n,e.cellView.contentView.elements.hasOwnProperty("checkbox")&&e.cellView.contentView.elements.checkbox.hide(),e.cellView.contentView.hasOwnProperty("checkbox")&&e.cellView.contentView.checkbox.hide()}else if(p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.userGrpID)&&""!=o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.userGrpID){let t=u.getWebappsAssetUrl("ManageSharing","img/User_Group.png");e.cellView.contentView.elements.hasOwnProperty("checkbox")&&e.cellView.contentView.elements.checkbox.hide(),e.cellView.contentView.hasOwnProperty("checkbox")&&e.cellView.contentView.checkbox.hide(),e.cellView.contentView.picture=t}}}};var E=new o(S);E.onSelectionAdd((function(e){e._options.hasOwnProperty("isAggrShape")&&e._options.isAggrShape?(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()):0==c.noOfSelectedItems&&(c._toolbar.updateNodeModel("delete",{disabled:!1}),c._toolbar.pushUpdateView()),c.noOfSelectedItems++})),E.onSelectionRemove((function(e){c.noOfSelectedItems--,e._options.hasOwnProperty("isAggrShape")&&e._options.isAggrShape&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()),0==c.noOfSelectedItems&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView())}));var P={callback:function(e){return c.contextualMenuHandling(e)}};E.onContextualEvent=P,this._tilecollectionView=E,e.onPostCellRequest&&E.onPostCellRequest(e.onPostCellRequest),this._tilecollectionGroupViewCollection={},this.accordeonContainer=new p.Element("div",{class:"accordeon-section-container"}),this._accordeonView=new i({class:"accordeonView",styles:{width:"100%"},exclusive:!1});c=this;e.groupHeaders&&(this.accordeonHeaders=e.groupHeaders,Array.isArray(e.groupHeaders)&&e.groupHeaders.forEach((function(e){c._tilecollectionGroupViewCollection[e]=c._titleGroupCollection(e)})));let O={selectionMode:"row",columns:this._columnsConfiguration,showSelectionCheckBoxesFlag:"OnOver",cellSelection:"single",pageScrollValueTriggeringInfiniteScroll:.5,placeholder:" abc "};this._dataGridView=new t(O),this._dataGridView.onReady((function(){e.groupingOptions&&(c.groupingOptionsforViewSwitch=e.groupingOptions,c._dataGridView.prepareUpdateView(),c._dataGridView.groupRows(e.groupingOptions),c._dataGridView.pushUpdateView())})),e.onContextualEventCallback&&(this._tilecollectionView.onContextualEvent={callback:e.onContextualEventCallback}),this._subscribeToEvents(e),c._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING})},C.prototype._filterAccordionTileSearchString=function(e){var t=this._gridModel,o=t.getRoots();t.prepareUpdate(),o.forEach((t=>{C.prototype._hideShowRow(e,t,this.options)})),this._gridModel.pushUpdate();var i=this;Object.keys(this._groupedGridModel).forEach((function(t){i._groupedGridModel[t].prepareUpdate(),i._groupedGridModel[t].getRoots().forEach((t=>{C.prototype._hideShowRow(e,t,i.options)})),i._groupedGridModel[t].pushUpdate()}))},C.prototype._hideShowRow=function(e,t,o){if(e){var i=new RegExp(e,"i"),n=!1;if(t.options.children){t.options.children.forEach((t=>{C.prototype._hideShowRow(e,t,o)}))}else{if(o.columnToSearch)o.columnToSearch.forEach((e=>{n=n||i.test(t.options.grid[e])}));else Object.keys(t.options.grid).forEach((e=>{n=n||i.test(t.options.grid[e])}));n?t.show():t.hide(!0)}}else if(t.options.children){t.options.children.forEach((t=>{C.prototype._hideShowRow(e,t,o)}))}else t.show()},C.prototype._filterAccordionTile=function(e,t){for(var o=this.accordeonContainer.getElementsByClassName("wux-controls-expander-header").length,i="",n=0;n<o;n++){var r=this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].getElementsByClassName("headerTitle")[0].innerText.indexOf("(");" "==this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].getElementsByClassName("headerTitle")[0].innerText[r-1]&&(r-=1),i=this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].getElementsByClassName("headerTitle")[0].innerText.slice(0,r),this.options.accessListToNlsValues.hasOwnProperty(i)&&this.options.accessListToNlsValues[i].contains(e)&&(t?this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].show():this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].hide())}var a=this._gridModel,s=a.getRoots();a.prepareUpdate(),s.forEach((o=>{C.prototype._hideShowRowListView(e,o,this.options,t)})),this._gridModel.pushUpdate();var l=this;Object.keys(this._groupedGridModel).forEach((function(o){l._groupedGridModel[o].prepareUpdate(),l._groupedGridModel[o].getRoots().forEach((o=>{C.prototype._hideShowRowListView(e,o,l.options,t)})),l._groupedGridModel[o].pushUpdate()}))},C.prototype._hideShowRowListView=function(e,t,o,i){if(e){var n=new RegExp(e,"i"),r=!1;if(t.options.children){t.options.children.forEach((t=>{C.prototype._hideShowRowListView(e,t,o,i)}))}else{if(o.columnToSearch)o.columnToSearch.forEach((e=>{r=r||n.test(t.options.grid[e])}));else Object.keys(t.options.grid).forEach((e=>{r=r||n.test(t.options.grid[e])}));1==i&&(r&&t.show(),t.options.inheritedPath.length>0&&t.options.subLabel.contains("Inherited")&&e.contains(l.ShowUsersWithInheritedPermission)&&t.show()),0==i&&(r&&t.hide(!0),t.options.inheritedPath.length>0&&t.options.subLabel.contains("Inherited")&&e.contains(l.ShowUsersWithInheritedPermission)&&t.hide(!0))}}else if(t.options.children){t.options.children.forEach((t=>{C.prototype._hideShowRowListView(e,t,o,i)}))}else t.show()},C.prototype._subscribeToEvents=function(e){var t=this,o=(t._tilecollectionView.getModel(),this._gridModel.getXSO());t._toolbarChannel.subscribe({event:"enox-collection-toolbar-switch-view-activated"},(function(e){t.viewContainer.innerHTML="",null===widget.body&&1===navigator.userAgentData.brands.length&&-1!==navigator.userAgentData.brands[0].brand.indexOf("Chromium")&&t._toolbar.updateNodeModel("share",{disabled:!0}),e===a.TYPE_LARGE_RESPONSIVE_TILE_STRING?(t._tilecollectionView.getContent().inject(t.viewContainer),t.currentView=a.TYPE_LARGE_RESPONSIVE_TILE_STRING,t._toolbar.prepareUpdateView(),t._toolbar.updateNodeModel("filter",{disabled:!1}),t._toolbar.updateNodeModel("group",{disabled:!1}),t._toolbar.updateNodeModel("listView",{disabled:!0}),t._toolbar.updateNodeModel("sort-asc",{disabled:!1}),t._toolbar.updateNodeModel("sort-desc",{disabled:!1}),t._toolbar.updateNodeModel("delete",{disabled:!0}),t._toolbar.updateNodeModel("setAccess",{disabled:!0}),t.noOfSelectedItems=0,t._toolbar.pushUpdateView(),0==t._filterLayoutDiv.isHidden()?t.viewContainer.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView")[0].setStyle("top","125px"):t.viewContainer.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView").length>0&&t.viewContainer.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView")[0].setStyle("top","50px"),t.checkNoDataFoundMessage()):e===a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING?(t._accordeonView&&(t._accordeonView.getContent().inject(t.accordeonContainer),t.accordeonContainer.inject(t.viewContainer)),t.currentView=a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,t._toolbar.prepareUpdateView(),0===t.accordeonContainer.getElementsByClassName("wux-controls-expander-header").length?(t._toolbar.updateNodeModel("filter",{disabled:!0}),t._toolbar.updateNodeModel("group",{disabled:!0}),t._toolbar.updateNodeModel("listView",{disabled:!0}),t._toolbar.updateNodeModel("sort-asc",{disabled:!0}),t._toolbar.updateNodeModel("sort-desc",{disabled:!0}),t._toolbar.updateNodeModel("delete",{disabled:!0}),t._toolbar.updateNodeModel("setAccess",{disabled:!0}),t.noOfSelectedItems=0):(t._toolbar.updateNodeModel("filter",{disabled:!1}),t._toolbar.updateNodeModel("group",{disabled:!0}),t._toolbar.updateNodeModel("listView",{disabled:!1}),t._toolbar.updateNodeModel("sort-asc",{disabled:!1}),t._toolbar.updateNodeModel("sort-desc",{disabled:!1}),t._toolbar.updateNodeModel("delete",{disabled:!0}),t._toolbar.updateNodeModel("setAccess",{disabled:!0}),t.noOfSelectedItems=0),t._toolbar.pushUpdateView(),t.checkNoDataFoundMessage()):e===a.TYPE_LARGE_RESPONSIVE_TILE_SORTED_ASC_STRING&&(t._tilecollectionView.getContent().inject(t.viewContainer),t.currentView=a.TYPE_LARGE_RESPONSIVE_TILE_STRING,t.checkNoDataFoundMessage())})),t._toolbarChannel.subscribe({event:"enox-collection-toolbar-sort-activated"},(function(e){var o={sortAttribute:e.sortAttribute,sortOrder:e.sortOrder},i="asc"===o.sortOrder.toLowerCase()?1:-1;t._tilecollectionView.treeDocument.prepareUpdate(),t._tilecollectionView.treeDocument._getTrueRoot().sortChildren({isRecursive:!0,sortFunction:function(e,t){try{return console.log("TreeNode MODEL A "+e.getSortableAttributeValue(o.sortAttribute)+"/n"),console.log("TreeNode MODEL B "+t.getSortableAttributeValue(o.sortAttribute)+"/n"),i*e.getSortableAttributeValue(o.sortAttribute).localeCompare(t.getSortableAttributeValue(o.sortAttribute))}catch(e){}return 0}}),t._tilecollectionView.treeDocument.pushUpdate(),t._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_STRING})})),t._toolbarChannel.subscribe({event:"enox-collection-toolbar-filter-search-value"},(function(e){t.collectionViewEvents.publish({event:"filter-on-search",data:e.searchValue[0]})})),o.onChange((function(){var e=t._gridModel.getSelectedNodes();e.map((function(e){return e._options.grid.id}));t._selectedItems=[],0!==e.length?(t._selectedItems=e,t._toolbar.updateNodeModel("setAccess",{disabled:!1})):0==e.length&&t._toolbar.updateNodeModel("setAccess",{disabled:!0}),t.collectionViewEvents.publish({event:"xsourcing-collectionview-selection-updated",data:{selectedItems:t._selectedItems}})})),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-disable-toolbar-button"},(function(e){t._toolbar.prepareUpdateView(),t._toolbar.updateNodeModel(e,{disabled:!0}),t._toolbar.pushUpdateView(),t._toolbarChannel.publish({event:"enox-collection-toolbar-disable-action",data:e})})),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-updateModel"},(function(e){})),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-enable-toolbar-button"},(function(e){t._toolbar.prepareUpdateView(),t._toolbar.updateNodeModel(e,{disabled:!1}),t._toolbar.pushUpdateView()})),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-update-count"},(function(){t._updateCount()})),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-load-full-model"},(function(){t.options.groupingOptions&&t._dataGridView.groupRows()}))},C.prototype.setModel=function(e){this._dataGridView.treeDocument=e,this._tilecollectionView.treeDocument=e,this._tilecollectionView.loadApplicativeModel(e),this._updateCount()},C.prototype.invalidateLayout=function(){var e=this;e.viewContainer.innerHTML="",this.currentView===a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING?(e._accordeonView&&e._accordeonView.getContent().inject(e.accordeonContainer),e.accordeonContainer.inject(e.viewContainer)):this._tilecollectionView.getContent().inject(this.viewContainer)},C.prototype.setGroupedModel=function(e){var t=this,o=Object.keys(e);t._accordeonView&&t._accordeonView.clear();o.forEach((function(o){if(t._accordeonView){var i=p.createElement("div",{class:"accordeonDiv",styles:{width:"100%"}});if(t._tilecollectionGroupViewCollection.hasOwnProperty(o)||(t._tilecollectionGroupViewCollection[o]=t._titleGroupCollection(o)),t._tilecollectionGroupViewCollection.hasOwnProperty(o)&&t._tilecollectionGroupViewCollection[o]&&e[o]._numberOfNodesInDocument>0){t._tilecollectionGroupViewCollection[o].treeDocument=e[o];var n=e[o].getRoots().length;n,t._tilecollectionGroupViewCollection[o].height=function(e,t){switch(e){case 1:return 110;case 2:return 182}if(e>2)return 70*e+(42+10*(e-2))}(n),t._tilecollectionGroupViewCollection[o].loadApplicativeModel(e[o]),t._accordeonView.addItem({header:o+" ( "+n+" )",content:t._tilecollectionGroupViewCollection[o].getContent().inject(i)})}}})),t._groupedGridModel=e,t._updateCountForAccordeon();var i=250;null!==t.accordeonContainer.getParent()&&null!==t.accordeonContainer.getParent().getParent()&&null!==t.accordeonContainer.getParent().getParent().getParent()&&null!==t.accordeonContainer.getParent().getParent().getParent().getParent()&&t.accordeonContainer.getParent().getParent().getParent().getParent().hasClassName("facetContainer")&&(i=t.accordeonContainer.getParent().getParent().getParent().getParent().getStyle("height").replace("px","")),i-=60,t.accordeonContainer.getElementsByClassName("wux-controls-abstract wux-controls-accordeon-container")[0].setStyle("height",i),t.accordeonContainer.getElementsByClassName("wux-controls-abstract wux-controls-accordeon-container")[0].setStyle("overflow-y","auto");for(var n=0;n<t.accordeonContainer.getElementsByClassName("wux-scroller wux-ui-is-rendered").length;n++)t.accordeonContainer.getElementsByClassName("wux-scroller wux-ui-is-rendered")[n].setStyle("overflow-y","hidden")},C.prototype._updateCount=function(){var e="";!1===this.options.showNodeCount?e="":(e=0,e=this._tilecollectionView&&this._tilecollectionView.treeDocument?this._tilecollectionView.treeDocument.getAllDescendants().length:this._tilecollectionGroupView&&this._tilecollectionGroupView.treeDocument?this._tilecollectionGroupView.treeDocument.getAllDescendants().length:this._dataGridView.treeDocument?this._dataGridView.treeDocument.getAllDescendants().length:0),this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:this.currentView}),this._toolbarChannel.publish({event:"enox-collection-toolbar-items-count-update",data:e}),this.checkNoDataFoundMessage()},C.prototype._updateCountForAccordeon=function(){var e=this,t="";if(!1===e.options.showNodeCount)t="";else{t=0;var o=Object.keys(this._tilecollectionGroupViewCollection);o.length>0&&o.forEach((function(o){e._tilecollectionGroupViewCollection[o]&&(t+=e._tilecollectionGroupViewCollection[o].treeDocument.getAllDescendants())}))}this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING}),this._toolbarChannel.publish({event:"enox-collection-toolbar-items-count-update",data:t}),this.checkNoDataFoundMessage()},C.prototype.addExpander=function(e){var t=new p.Element("div",{styles:{height:"100%"}}),o=e.container.querySelector(".sharingcollectionview-content-container");o.style.height=e.expander.height?e.expander.height:"250px",this._expander=new WUXExpander({style:e.expander.style?e.expander.style:"simple",header:e.expander.expanderHeader?e.expander.expanderHeader:"",body:o,allowUnsafeHTMLHeader:!1,expandedFlag:!!e.expander.expandedFlag&&e.expander.expandedFlag}).inject(t),t.inject(e.container)},C.prototype.checkNoDataFoundMessage=function(){if(this._dataGridView.treeDocument){var e=null;if(e=null==widget.body?null:widget.getElement('[id="no-object-found-"]'),0!==this._dataGridView.treeDocument.getAllDescendants().length)e&&e.remove();else if((!e||e.parentNode!==this.viewContainer)&&"Grid View"!==this.currentView){this._noObjectAvailableDiv=p.createElement("div",{class:"fonticon fonticon-forward"}),this.viewContainer.style.textAlign="center",this._noObjectAvailableDiv.setStyle("font-size","72px"),this._noObjectAvailableDiv.setStyle("color","#b4b6ba"),this._noObjectAvailableDiv.setStyle("text-align","center"),this._notSharedDiv=p.createElement("div",{text:p.i18n("NotShared")}),this._notSharedDiv.setStyle("font-size","18px"),this._notSharedDiv.setStyle("color","#b4b6ba"),this._notSharedDiv.setStyle("text-align","center"),this.viewContainer.innerHTML="",this.viewContainer.appendChild(this._noObjectAvailableDiv),this.viewContainer.appendChild(this._notSharedDiv),this._toolbar.updateNodeModel("filter",{disabled:!0}),this._toolbar.updateNodeModel("group",{disabled:!0}),this._toolbar.updateNodeModel("listView",{disabled:!0}),this._toolbar.updateNodeModel("sort-asc",{disabled:!0}),this._toolbar.updateNodeModel("sort-desc",{disabled:!0}),this._toolbar.updateNodeModel("delete",{disabled:!0}),this._toolbar.updateNodeModel("exportCSV",{disabled:!0}),this._toolbar.updateNodeModel("setAccess",{disabled:!0}),this._toolbar.updateNodeModel("select-all",{disabled:!0});var t=this;let e=document.querySelector(".sharingWidget"),o=0;o=window.__karma__?131:e.clientHeight,o<130?(this._noObjectAvailableDiv.setStyle("display","none"),this._notSharedDiv.setStyle("padding","30px"),this._notSharedDiv.setStyle("font-size","24px"),o<90&&this._notSharedDiv.setStyle("display","none")):(this._noObjectAvailableDiv.setStyle("display","block"),this._notSharedDiv.setStyle("font-size","18px"),this._notSharedDiv.setStyle("padding","0px"),this._notSharedDiv.setStyle("text-align","center"),o<90?this._notSharedDiv.setStyle("display","none"):this._notSharedDiv.setStyle("display","block")),window.onresize=function(){let e=document.querySelector(".sharingWidget").clientHeight;e<130?(t._noObjectAvailableDiv.setStyle("display","none"),t._notSharedDiv.setStyle("padding","30px"),t._notSharedDiv.setStyle("font-size","24px"),e<90&&t._notSharedDiv.setStyle("display","none")):(t._noObjectAvailableDiv.setStyle("display","block"),t._notSharedDiv.setStyle("font-size","18px"),t._notSharedDiv.setStyle("padding","0px"),t._notSharedDiv.setStyle("text-align","center"),e<90?t._notSharedDiv.setStyle("display","none"):t._notSharedDiv.setStyle("display","block"))}}}},C.prototype.checkIfExceedsDeleteLimit=function(e){return!1},C.prototype.onChangeViewToListView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_STRING})},C.prototype.onChangeViewToGroupView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING})},C.prototype.onChangeViewToSortAscListView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-sort-activated",data:{sortAttribute:"label",sortOrder:"asc"}})},C.prototype.onChangeViewToSortDescListView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-sort-activated",data:{sortAttribute:"label",sortOrder:"desc"}})},C.prototype.onSetAccess=function(e){Array.prototype.extend=function(e){e&&Array.isArray(e)&&e.forEach((function(e){this.push(e)}),this)};var t=[],o=this;if(this.currentView===a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING){var i=Object.keys(this._tilecollectionGroupViewCollection),n=[];i.forEach((function(e){o._groupedGridModel[e]&&(n=o._tilecollectionGroupViewCollection[e].treeDocument.getSelectedNodes(),t.extend(n))}))}else t=this._tilecollectionView.treeDocument.getSelectedNodes();if(t.length>0){var r={operation:"setAccess",selectedItems:t,access:e};this.collectionViewEvents.publish({event:"enox-collection-setaccess-operation",data:r})}},C.prototype.onDelete=function(){Array.prototype.extend=function(e){e&&Array.isArray(e)&&e.forEach((function(e){this.push(e)}),this)};var e=[],t=this;if(this.currentView===a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING){var o=Object.keys(this._tilecollectionGroupViewCollection),i=[];o.forEach((function(o){t._groupedGridModel[o]&&(i=t._tilecollectionGroupViewCollection[o].treeDocument.getSelectedNodes(),e.extend(i))}))}else e=this._tilecollectionView.treeDocument.getSelectedNodes();var n={operation:"delete",selectedItems:e,access:"Empty"};this.collectionViewEvents.publish({event:"enox-collection-delete-operation",data:n})},C.prototype.updateView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:this.currentView})},C.prototype.onExportCSV=function(e){var t=new Date,o=" "+(t.getMonth()+1)+"_"+t.getDate()+"_"+t.getFullYear()+" "+t.getHours()+"_"+t.getMinutes()+"_"+t.getSeconds(),i=l.SharingReport+o;this.collectionViewEvents.publish({event:"xsourcing-collectionview-exportcsv",data:i})},C.prototype.onShare=function(){this._shareLayoutDiv.hidden?(this._shareLayoutDiv.hidden=!1,this._tilecollectionView.elements.container.setStyle("top","100px")):(this._shareLayoutDiv.hidden=!0,this._tilecollectionView.elements.container.setStyle("top","50px"))},C.prototype.onFilter=function(){this.collectionViewEvents.publish({event:"enox-collection-filter-operation",data:this.currentView})},C.prototype.onSelectAll=function(){if(this.currentView===a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING)this._titleGroupCollection();else this._tilecollectionView.selectAllVisibleNodes()},C})),define("DS/ManageSharing/model/SharingAccordionModel",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/WebappsUtils/WebappsUtils","DS/ManageSharing/utils/ShareModelServices","i18n!DS/ManageSharing/assets/nls/SharingNLS"],(function(e,t,o,i,n,r){"use strict";let a={useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},id:"sharing-widget",class:"sharing-widget",selection:{nodes:!0,rowHeaders:!1,columnHeaders:!1,toggle:!0,canMultiSelect:!0}};return{getModel:(t,i,r,s,l,c)=>function(t,i,r,s,l,c){let d,u=new o,h=new e(a);return h.dataModelSet=u,h.prepareUpdate(),d=t.response,n._createModels_PID_Ownership(d,i,r,s,l,c),c=n.sharingReport,Object.keys(i).forEach((function(e){i[e].length})),h.pushUpdate(),h}(t,i,r,s,l,c),destroy:()=>{model=new e({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!1}})}}})),define("DS/ManageSharing/views/SharingCollectionView",["UWA/Class","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/TreeModel/TreeDocument","DS/ManageSharing/views/SharingCollectionViewUI"],(function(e,t,o,i,n){"use strict";var r=function(){this._xsourcingCollectionViewUI=new n};return r.prototype.init=function(e){this.options=e,this._data=this.options.data,this._dataModelSet=new o,this._model=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{toggle:!0,canMultiSelect:!0},dataModelSet:this._dataModelSet}),this._gridModel=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{toggle:!0,canMultiSelect:!0}}),this._groupedGridModel={},this._groupedModel={},this._groupedDataModelSet={},e.gridModel=this._gridModel,e.groupedGridModel=this._groupedGridModel,e.model=this._model;var t=this;if(e.groupHeaders&&Array.isArray(e.groupHeaders)){e.groupHeaders.length;this._groupHeaders=e.groupHeaders,e.groupHeaders.forEach((function(e){t._groupedGridModel[e]=new i,t._groupedDataModelSet[e]=new o,t._groupedModel[e]=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{toggle:!0,canMultiSelect:!0},dataModelSet:t._groupedDataModelSet[e]})}))}this.collectionViewEvents=e.collectionViewEvents,this.collectionViewEvents||(this.collectionViewEvents=e._mediator.createNewChannel()),e.collectionViewEvents=this.collectionViewEvents,this._xsourcingCollectionViewUI.init(e),this._setData(this.options.data),this.subscribeToEvents(e)},r.prototype.subscribeToEvents=function(e){},r.prototype._setData=function(e){var o,n=this;this._model.empty(),this._gridModel.empty(),(o=Object.keys(this._groupedGridModel)).forEach((function(e){n._groupedGridModel[e].empty()})),this._model.prepareUpdate(),this._gridModel.prepareUpdate(),o.forEach((function(e){n._groupedGridModel[e].prepareUpdate()}));for(var r={},a=0;a<e.length;a++){e[a];t.prototype.getSortableAttributeValue=function(e){for(var t=this.getSortableAttributes(),o=0;o<t.length;o++)if(t[o].name===e)return t[o].value},t.prototype.getSortableAttributes=function(){var e=[];return this.options?(e.push({name:"label",value:this.options.label}),e.push({name:"logical",value:this.options.logical}),e.push({name:"subLabel",value:this.options.subLabel}),e.push({name:"header",value:this.options.header}),e):(console.error(" you need to call basic method before !"),e)};var s=t.createTreeNodeDataModel(this._dataModelSet,e[a]),l="";if(l=e[a].hasOwnProperty("access")?e[a].access:e[a].header,this._groupedDataModelSet[l]&&this._groupedModel[l]){var c=t.createTreeNodeDataModel(this._groupedDataModelSet[l],e[a]);this._groupedModel[l].addChild(c)}this._model.addChild(s);var d=new t(e[a]);if(this._gridModel.addRoot(s),r.hasOwnProperty(l))r[l].push(e[a]);else{var u=[];u.push(e[a]),r[l]=u}this._groupedGridModel.hasOwnProperty(l)||(this._groupedGridModel[l]=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{nodes:!0,toggle:!0,canMultiSelect:!0}})),this._groupedGridModel[l].addRoot(d)}this._gridModel.pushUpdate(),this._model.pushUpdate(),(o=Object.keys(this._groupedGridModel)).forEach((function(e){n._groupedGridModel[e].pushUpdate()})),this._xsourcingCollectionViewUI.hasOwnProperty("currentViewAtTimeOfShareLaunch")&&null!=this._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch?("Group Tile View"==this._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch?(this._xsourcingCollectionViewUI.setModel(this._gridModel),this._xsourcingCollectionViewUI.setGroupedModel(this._groupedGridModel)):this._xsourcingCollectionViewUI.setModel(this._gridModel),this._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch=void 0):""==this._xsourcingCollectionViewUI.options.lastCurrentView||"Group Tile View"===this._xsourcingCollectionViewUI.options.lastCurrentView?(this._xsourcingCollectionViewUI.setModel(this._gridModel),this._xsourcingCollectionViewUI.setGroupedModel(this._groupedGridModel)):this._xsourcingCollectionViewUI.setModel(this._gridModel)},r})),define("DS/ManageSharing/services/ManageServices",["UWA/Array","UWA/Class","UWA/Class/Options","UWA/Class/Promise","DS/ManageSharing/services/ManageServicesSettings","DS/WAFData/WAFData","DS/WidgetServices/WidgetServices","DS/UIKIT/SuperModal","DS/ENOCollabToolsUI/tracker/ENOCollabTrackerBackEnd","i18n!DS/ManageSharing/assets/nls/SharingNLS"],(function(e,t,o,i,n,r,a,s,l,c){"use strict";var d=864e5;function u(e,t,o,i,n,s,l){var c=-1!=e.indexOf("?")?"&":"?",d=i.tenant?i.tenant:"OnPremise",u=i.url3DSpace+e+c+"tenant="+d,h={headers:{"Accept-Language":a.getLanguage(),Accept:"application/json","Content-Type":"application/json",SecurityContext:encodeURIComponent(i.securityContext)},method:1==t?"POST":"GET",type:"json",timeout:n,proxy:"passport",onComplete:s,onFailure:l};t&&(h.data=o),r.authenticatedRequest(u,h)}function h(e,t,o,i,n,r){var a=-1!=e.indexOf("?")?"&":"?",s=e;for(var l in t)s+=a+l+"="+t[l],a="&";u(s,!1,null,o,i,n,r)}function p(e,t,o,i,n,r){u(e,!0,UWA.Json.encode(t),o,i,n,r)}var g=t.singleton(o,{init:function(){this._mergeSupportedScope=null},isBaselineMode:function(e,t){var o=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(e){1==e.isConfiguredBaseline&&(o=!0)})),o},isFirstSemantic:function(e,t){var o=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){Array.isArray(t.semantic)&&t.semantic.indexOf("FIRST")>=0&&(e?e===t.id&&(o=!0):o=!0)})),o},isAnyEffectivityBasedMode:function(e,t){var o=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){Array.isArray(t.mode)&&(t.mode.indexOf("effectivity_based")>=0||t.mode.indexOf("effectivity_based_reused")>=0||t.mode.indexOf("effectivity_based_model")>=0)&&(e?e===t.id&&(o=!0):o=!0)})),o},isEffectivityBasedOrEffectivityBasedReuseMode:function(e,t){var o=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){Array.isArray(t.mode)&&(t.mode.indexOf("effectivity_based")>=0||t.mode.indexOf("effectivity_based_reused")>=0)&&(e?e===t.id&&(o=!0):o=!0)})),o},isEffectivityBasedReuseMode:function(e,t){var o=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){Array.isArray(t.mode)&&t.mode.indexOf("effectivity_based_reused")>=0&&(e?e===t.id&&(o=!0):o=!0)})),o},getRevisionMode:function(e,t){var o=null;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){e&&e===t.id&&(o=t.mode.indexOf("effectivity_based")>=0?"effectivity_based":t.mode.indexOf("effectivity_based_reused")>=0?"effectivity_based_reused":t.mode.indexOf("effectivity_based_model")>=0?"effectivity_based_model":t.mode)})),o},getgraphProprietary:function(e,t){var o=null;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach((function(t){e&&e===t.id&&(o=t.graphProprietary)})),o},getMergeSupportedScope:function(e){var t=this;return UWA.is(t._mergeSupportedScope)?i.resolve(t._mergeSupportedScope):new i((function(o,i){g.getSecurityContextPromise(n.getTenant(),e).then((function(e){try{var a=n.get3DSpaceWSUrl(n.getTenant(),"/resources/v1/dslc/getmergeallowlist",null)}catch(e){i(e)}r.authenticatedRequest(a,{method:"GET",headers:n.getHeaders(encodeURIComponent(e)),timeout:6e5,onComplete:function(e){e.MergeAllowList?(t._mergeSupportedScope=e.MergeAllowList,o(t._mergeSupportedScope)):(e.status||e.error||(console.log("missing status in response of getmergeallowlist"),i("missing status in response of getmergeallowlist")),i(e.error))},onFailure:function(e,t){var o=g.parseWebServiceError(e,t);i(o)},type:"json"})}))}))},fetchSubTypesFromServer:function(e,t,o,i){if(e.payload){var a=n.get3DSpaceWSUrl(n.getTenant(),"/resources/v1/FolderManagement/Folder/getSubTypes",null);r.authenticatedRequest(a,{method:"POST",headers:n.getHeaders(),timeout:864e5,data:UWA.Json.encode(e.payload),type:"json",onComplete:t,onFailure:o,onTimeout:i})}},getAllowedSemanticsPromise:function(e,t,o){var i=[];return e.forEach((function(e){i.push({id:e})})),new UWA.Class.Promise((function(e,a){g.getSecurityContextPromise(n.getTenant(),t).then((function(t){var s={allowedSemantics:i,output:{infos:"version"}};o&&o.nlsintents&&(s.output.nlsintents=!0);var l=JSON.stringify(s),c=null;o&&o.scope&&(c="scope="+o.scope);var d=n.get3DSpaceWSUrl(n.getTenant(),"/resources/v1/dslc/getallowedsemantics",c);r.authenticatedRequest(d,{method:"POST",headers:n.getHeaders(encodeURIComponent(t)),timeout:6e5,onComplete:function(t){e(t)},data:l,onFailure:function(e,t){var o=g.parseWebServiceError(e,t);a(o)},type:"json"})}))}))},getVersionNumberProposalPromise:function(e,t,o,i){var a=[];return e.forEach((function(e){var i={copyId:e};t&&(i.ancestors=[{semantic:t,id:e}]),o&&(i.prefix=o),a.push(i)})),new UWA.Class.Promise((function(e,t){g.getSecurityContextPromise(n.getTenant(),i).then((function(o){var i={addRequests:a},s=JSON.stringify(i),l=n.get3DSpaceWSUrl(n.getTenant(),"/resources/v1/dslc/getversionnumberproposal",null);r.authenticatedRequest(l,{method:"POST",headers:n.getHeaders(encodeURIComponent(o)),timeout:6e5,onComplete:function(t){e(t)},data:s,onFailure:function(e,o){var i=g.parseWebServiceError(e,o);t(i)},type:"json"})}))}))},_getAncestorsPromise:function(e,t){return new UWA.Class.Promise((function(t,o){g.getSecurityContextPromise(n.getTenant()).then((function(i){var a=n.get3DSpaceWSUrl(n.getTenant(),"/resources/v1/dslc/versiongraph/"+e,null);r.authenticatedRequest(a,{method:"GET",headers:n.getHeaders(encodeURIComponent(i)),timeout:6e5,onComplete:function(o){var i=JSON.parse(o).graphs[0].versions.find((t=>t.id===e)).ancestors;t(i)},data:"",onFailure:function(e,t){var i=g.parseWebServiceError(e,t);o(i)}})}))}))},hasFilter:function(e,t){return e&&e._biFilter&&e._biFilter.hasFilter?e._biFilter.hasFilter(t):e&&e.hasFilter?e.hasFilter(t):{hasFilter:!1}},getPublicFilterSpecificationPromise:function(e,t){return new i((function(o,i){e&&e._biFilter&&e._biFilter.getPublicFilterSpecification?(e._biFilter.addEvent(t.eventName,function(i){e._biFilter.removeEvent(t.eventName),o(i)}.bind(this)),e._biFilter.getPublicFilterSpecification(t)):i("No available API to retrieve filter in session...")}))},getPublicVDRPFilterSpecificationPromise:function(e,t){var o,a=this,s=n.getTenant();return new i((function(i,l){g.getSecurityContextPromise(s,e).then((function(e){return o=e,a.getCsrfKeyPromise(s)})).then((e=>{var a=n.get3DSpaceWSUrl(s,"/resources/v1/modeler/dsadvfilter/dsadvfilter:VDRPFilter/"+t+"?$mask=dsadvfilter:VDRPFilterMask.VDRPFilterSpec",null),c=n.getHeaders(encodeURIComponent(o));c.ENO_CSRF_TOKEN=e.value;r.authenticatedRequest(a,{method:"GET",headers:c,type:"json",onComplete:function(e){i(e.member[0])},onFailure:function(e,t){var o=g.parseWebServiceError(e,t);l(o)}})}))}))},getVDRPExpandSpecPromise:function(e,t){var o=n.getTenant();return new i((function(i,a){g.getSecurityContextPromise(o,e).then((function(e){var s=n.get3DSpaceWSUrl(o,"/resources/FilterBIAPI/Filter/getVDRPExpandSpec",null);r.authenticatedRequest(s,{method:"POST",headers:n.getHeaders(encodeURIComponent(e)),type:"json",onComplete:function(e){i(e.batch.expands)},data:JSON.stringify(t),onFailure:function(e,t){var o=g.parseWebServiceError(e,t);a(o)}})}))}))},createFirstConfigurationRevisionPromise:function(e,t,o){return new UWA.Class.Promise((function(i,a){g.getSecurityContextPromise(n.getTenant()).then((function(s){var l={addRequests:[{copyId:e,code:t,ancestors:[{id:e,semantic:"FIRST"}],attributes:[{name:"description",value:o}]}]},c=JSON.stringify(l),d=n.get3DSpaceWSUrl(n.getTenant(),"/resources/v1/dslc/addversions",null);r.authenticatedRequest(d,{method:"POST",headers:n.getHeaders(encodeURIComponent(s)),timeout:6e5,onComplete:function(e){i(e)},data:c,onFailure:function(e,t){var o=g.parseWebServiceError(e,t);a(o)},type:"json"})}))}))},getAssemblyInfo:function(e,t,o,i){""!=t?g.listAttributes(e,[t],["name","owner","modified.generic","originated.generic","attribute[PLMEntity.V_description]"],(function(e){var t=e.results[0],i=t.physicalid,n=t.name,r=t.ownerFullName;null==r&&(r=t.owner);var a=t["modified.generic"],s=t["originated.generic"],l=t["attribute[PLMEntity.V_description]"];null==l&&(l="");o({physicalid:i,title:n,owner:r,mod:a,originated:s,desc:l,thumbnailUrl:""})}),(function(e){i(e)})):o(null)},expandAssembly2D:function(e,t,o,i){this.expandAssemblyWithIntent(e,t,"explore_2D",o,i)},expandAssembly3D:function(e,t,o,i){this.expandAssemblyWithIntent(e,t,"explore_3D",o,i)},expandAssemblyWithIntent:function(e,t,o,i,a){var s={intent:o,debug:!1,type_filter_bo:["CATProduct","CATProcess","CATPart","CATDrawing","CATAnalysis","VPMReference","VPMRepReference","CATIA Embedded Component","3DShape","CATIA CGR","CATShape","CATIA V4 Model","CATIA Design Table"],roots:[{id:t}],level:"-1",source:"cstorage",select_bo:["did","resourceid","relcount","physicalid","ds6w:label","ds6w:reserved","ds6wg:revision","ds6w:description","ds6w:modified","ds6w:created","ds6w:responsible","type_icon_url","ds6w:type","ds6w:policy","ds6w:organizationResponsible","ds6w:project","ds6w:reservedBy","thumbnail_2d","thumbnail_3d"],authored:!0},l=n.get3DSpaceWSUrl(e,"/resources/enopad/navigate/expand",null);r.authenticatedRequest(l,{method:"POST",headers:n.getHeaders(),timeout:864e5,data:JSON.stringify(s),type:"json",onComplete:function(e){i(e)},onFailure:function(e){a(e)},onTimeout:function(){a("timeout")}})},formatDate:function(e,t){return e=(e=a.formatDate(e,!0)).replace(", "," ")},listAttributes:function(e,t,o,i,n){for(var r=[],a=t.length,s=0;s<a;s++){var l=t[s];r.push({physicalid:l})}var c={data:r,attributes:o};this.post(e,"/resources/lifecycle/product/attributeList",c,(function(e){i(e)}),(function(e){n(e)}))},listAttributesPromise:function(e,t,o){var i=this;return new UWA.Class.Promise((function(n,r){i.listAttributes(e,t,o,(function(e){n(e)}),(function(e){r(e)}))}))},getAttributeDisplayName:function(e){return"revision"==e||"code"==e?c.rev:"owner"==e?c.owner:"description"==e||"PLMEntity.V_description"==e?c.desc:"policy"==e||"policyTranslated"==e||"policy_nls"===e?c.policy:"modified"==e?c.mDate:"originated"==e||"creationDate"===e?c.cDate:"type"==e||"type_nls"===e?c.type:"project"==e?c.collSpace:"isdup"==e?c.isDup:"islast"==e?c.isLastRev:"title"==e||"displayName"==e?c.title:"newTitle"==e?c.newTitle:"ispublished"==e?c.published:"current"==e||"maturitystate"===e?c.maturitystate:"maturityNls"==e||"maturity_nls"==e?c.maturity:"PLMReference.V_versionComment"==e?c.comment:"locked"==e||"reserved"==e?c.reserved:"reservedby"==e||"locker"==e?c.reservedby:"organization"==e?c.organization:"vault"==e?c.vault:"maturity"==e?c.maturity:"instanceTitle"==e?c.instanceTitle:c[e]},getAttributeDisplayNames:function(e){for(var t=[],o=e.length,i=0;i<o;i++){var n=this.getAttributeDisplayName(e[i]);t.push(n)}return t},get:function(e,t,o,i,a){var s=this,l=Date.now().toString();o["timestamp"+l]=l,g.getSecurityContext(e,(function(l){var d=n.get3DSpaceWSUrl(e,t,null);for(var u in-1!=d.indexOf("?")?d+="&":d+="?",o){d+=u+"="+o[u]+"&"}r.authenticatedRequest(d,{method:"GET",headers:n.getHeaders(l),timeout:864e5,type:"json",onComplete:function(e){i(e)},onFailure:function(e,t){s.onWebServiceError(a,e,t)},onTimeout:function(){s.onWebServiceError(a,null,c.timeout)}})}),(function(e){s.onWebServiceError(a,null,e)}))},post:function(e,t,o,i,a){var s=this;g.getSecurityContextPromise(e).then((function(l){var d=n.get3DSpaceWSUrl(e,t,null);r.authenticatedRequest(d,{method:"POST",headers:n.getHeaders(l),timeout:864e5,data:UWA.Json.encode(o),type:"json",onComplete:function(e){i(e)},onFailure:function(e,t){s.onWebServiceError(a,e,t)},onTimeout:function(){s.onWebServiceError(a,null,c.timeout)}})}))},_getSecurityContextFromPreferencesOrOptions:function(e){if("function"==typeof widget.hasPreference&&widget.hasPreference("xPref_CREDENTIAL")){var t=widget.getPreference("xPref_CREDENTIAL");if(void 0!==t.value&&null!==t.value&&t.hasOwnProperty("value"))return"ctx::"+t.value}if("function"==typeof widget.hasPreference&&null!=widget.getPreference("pad_security_ctx"))return widget.getPreference("pad_security_ctx").value;if("function"==typeof widget.hasPreference&&widget.hasPreference("securityContext"))return widget.getPreference("securityContext").value;var o=n.getOption(e,null);return o&&o.hasOwnProperty("defaultValue")?"ctx::"+o.defaultValue:null},getSecurityContextForCollaborativeSharingCommands:function(){var e={tenant:{label:"onPremises",value:""},SecurityContext:""};if(e.tenant.value=n.getTenant(),widget.hasPreference("xPref_CREDENTIAL")){var t=widget.getPreference("xPref_CREDENTIAL");return void 0!==t.value&&null!==t.value&&t.hasOwnProperty("value")&&(e.SecurityContext="ctx::"+t.value),e}return null!=widget.getPreference("pad_security_ctx")?widget.getPreference("pad_security_ctx").value:null},_getSecurityContextFromContext:function(e){if(!e)return null;if("function"!=typeof e.getSecurityContext)return null;var t=e.getSecurityContext();return t&&t.hasOwnProperty("SecurityContext")?t.SecurityContext:null},getSecurityContextPromise:function(e,t){var o=this._getSecurityContextFromContext(t),i=this._getSecurityContextFromPreferencesOrOptions(e);return o?new UWA.Class.Promise.resolve(o):i?new UWA.Class.Promise.resolve(i):(this._getSecCtxPromise||(this._getSecCtxPromise=new UWA.Class.Promise((function(t,o){g.getSecurityContext(e,(function(e){t(e)}),(function(e){o(e)}))}))),this._getSecCtxPromise)},getSecurityContext:function(e,t,o){var i=n.get3DSpaceWSUrl(e,"/resources/pno/person/getsecuritycontext",null);r.authenticatedRequest(i,{type:"json",method:"GET",proxy:"passport",headers:n.getHeaders(),timeout:6e5,onComplete:function(e){var i="";if(null!=e&&""!=e&&e.hasOwnProperty("SecurityContext")&&null!=e.SecurityContext){(i=e.SecurityContext.replace("ctx::","")).trim().length>0&&(i="ctx::"+e.SecurityContext),t(i)}else o(c.ErrorSecurityContextEmpty)},onFailure:function(e,t){console.log("getSecurityContext:Failure..."+e),g.onWebServiceError(o,e,t)},ontimeout:function(){console.log("getSecurityContext: A connection timeout occurred."),g.onWebServiceError(o,null,c.connectionTimeout)}})},getSecurityContextList:function(e,t){var o=e;n.get3DSpaceWSUrl(e,"/resources/modeler/pno/person","current=true&select=preferredcredentials&select=collabspaces");require(["DS/ENOXWidgetPreferences/js/ENOXWidgetPreferences"],(function(e){var i=e.getCredentialPreferenceKey(),r=e.getPlatformPreferenceKey();if(!1===widget.hasPreference(r))console.log(widget.hasPreference(r)),console.log(widget.getPreference(r)),e.addPlatformSelectionPreferenceToWidget({roles:["CSV"]});else{var a=widget.getPreference(r);console.log(a),e.addPlatformSelectionPreferenceToWidget(a)}e.addCredentialPreferenceToWidget({usePreferredCredentials:!0},1).then((function(){var e=widget.getValue(i),r=widget.preferences[0].label,a=widget.preferences[0].options;n.setOption(o,{label:r,name:"xPref_CREDENTIAL",options:a,type:"list",value:e}),t()}),(function(){}))}),(function(){}))},getCsrfKeyPromise:function(e){var t=this;return new UWA.Class.Promise((function(o,i){t._csrfKey?o(t._csrfKey):g.getCsrfKey(e,(function(e){t._csrfKey=e,o(t._csrfKey)}),(function(e){i(e)}))}))},getCsrfKey:function(e,t,o){var i=n.get3DSpaceWSUrl(e,"/resources/v1/application/E6WFoundation/CSRF",null);r.authenticatedRequest(i,{type:"json",method:"GET",proxy:"passport",headers:n.getHeaders(),timeout:6e5,onComplete:function(e){e&&e.csrf?t(e.csrf):o(c.ErrorCsrfKeyEmpty)},onFailure:function(e,t){console.log("getCsrfKey:Failure..."+e),g.onWebServiceError(o,e,t)},ontimeout:function(){console.log("getCsrfKey: A connection timeout occurred."),g.onWebServiceError(o,null,c.connectionTimeout)}})},_makeRequest:function(e,t,o){var i,n=this;if(o.headers)for(var a in o.headers)t[a]=o.headers[a];var s={method:o.method,proxy:"passport",headers:t,timeout:6e5,onComplete:o.onSuccess,onFailure:function(r,a,s){401!==i.xhr.status&&0!==i.xhr.status||!o.retryIfUnauthorized?401!==i.xhr.status&&0!==i.xhr.status||!o.oauth?n.onWebServiceError(o.onError,r,a,i.xhr.status,s):n._oauthAuthenticateUser(o.oauth,o.tenant,o.onError):(o.retryIfUnauthorized=!1,n._makeRequest(e,t,o))},ontimeout:function(){n.onWebServiceError(o.onError,null,c.timeout)}};o.data&&(s.data=o.data),i=r.authenticatedRequest(e,s)},_getAuthorizationHeaderPromise:function(e,t,o,i){return new UWA.Class.Promise((function(n,r){var a="DS/OAuthSimple/OAuthSimple";require([a],(function(){var r="xrequestedwith=xmlhttprequest",a=t.split("?");t=a[0],a.length>1&&(r=a[1]+"&"+r),o&&Object.keys(o).forEach((function(e){r+="&"+e+"="+encodeURIComponent(o[e])}));var s=(new OAuthSimple).sign({action:e,path:t,parameters:r,signatures:{consumer_key:i.oauth_consumer_key,shared_secret:i.oauth_consumer_secret,access_token:i.oauth_token,oauth_secret:i.oauth_token_secret}});n(s.header)}),(function(e){(e.requireModules&&e.requireModules[0])===a&&r(c.ErrorOAuthSimple)}))}))},oauthRequest:function(e,t,o,i){var n=this;this._getOauthInfoPromise(e,t).then((function(e){return n._getAuthorizationHeaderPromise(i.method,o,i.data,e)})).then((function(r){var a={Accept:"application/rdf+xml",Authorization:r};i.oauth=e,i.tenant=t,n._makeRequest(o,a,i)})).catch((function(e){i.onError(e)}))},_getOauthInfoPromise:function(e,t){return new UWA.Class.Promise((function(o,i){g._getOauthInfo(e,t,(function(e){o(e)}),(function(e){i(e)}))}))},_getOauthInfo:function(e,t,o,i){var a=this,s=n.getPlatformWSUrl("3DPassport",t,"/oauth/access_token/"+e,null);r.authenticatedRequest(s,{type:"json",method:"GET",proxy:"passport",headers:n.getHeaders(),timeout:6e5,onComplete:function(n){"no.token.found"===n.error?a._oauthAuthenticateUser(e,t,i):n.error?i(n.error):o(n)},onFailure:function(e,t){console.log("_getOauthInfo:Failure..."+e),g.onWebServiceError(i,e,t)},ontimeout:function(){console.log("_getOauthInfo: A connection timeout occurred."),g.onWebServiceError(i,null,c.connectionTimeout)}})},_oauthAuthenticateUser:function(e,t,o){this._getAuthenticationUrlPromise(e,t).then((function(t){var i=new s({events:{onHide:function(){o(c.authorizationRequired)}},renderTo:document.body}),n=c.replace(c.authorizationDialogBody,{identityProvider:e,authenticationUrl:t}),r=n.indexOf("target=");n=[n.slice(0,r),"onclick=\"if (typeof dscef !== 'undefined') {dscef.sendString('launchOSLCAuthorization', '"+t+"'); return false;}\"",n.slice(r)].join(" "),i.dialog({body:n,title:c.authorizationDialogTitle,buttons:[{className:"primary",value:c.ok,action:function(e){e.hide()}}]})}),(function(e){o(e)}))},_getAuthenticationUrlPromise:function(e,t){return new UWA.Class.Promise((function(o,i){g._getAuthenticationUrl(e,t,(function(e){o(e)}),(function(e){i(e)}))}))},_getAuthenticationUrl:function(e,t,o,i){var a=n.getPlatformWSUrl("3DPassport",t,"/oauth/authenticate/"+e,null);r.authenticatedRequest(a,{type:"json",method:"GET",proxy:"passport",headers:n.getHeaders(),timeout:6e5,onComplete:function(e){e.redirect_uri?o(e.redirect_uri):i(c.authenticationError)},onFailure:function(e,t){console.log("_getAuthenticationUrl:Failure..."+e),g.onWebServiceError(i,e,t)},ontimeout:function(){console.log("_getAuthenticationUrl: A connection timeout occurred."),g.onWebServiceError(i,null,c.connectionTimeout)}})},showWebServiceError:function(e,t,o,i){var n=null,r=null;"function"==typeof t?r=t:(n=t,r=o);var a=e;e.hasOwnProperty("error")?a=e.error:e.hasOwnProperty("message")&&(a=e.message);var s=g._parseWebServiceError(a,n,i);r(s.message,s.isNotificationInfo,s.title,s.subtitle,s.submessage)},parseWebServiceError:function(e,t,o){return this._parseWebServiceError(e,t,o,null).message},_parseWebServiceError:function(e,t,o,i){var n=e,r=null,a=null,s=null;if(null!=i&&i.trim().length>0&&(s=c.replace(c.backgroundNotifMsgWithCommandName,{commandName:i})),!t||"object"!=typeof t||e instanceof Error){if("string"==typeof e||e instanceof Error){var l=e;e instanceof Error&&(l=e.message),l.startsWith("NetworkError:")?l.endsWith('return ResponseCode with value "0".')?n=c.noConnection:l.endsWith('return ResponseCode with value "401".')||l.endsWith('return ResponseCode with value "403".')?n=c.unauthorized:l.endsWith('return ResponseCode with value "504".')?(n=null!==s?UWA.is(o,"boolean")&&o?s:c.timedOut+" "+c.verifyConnection:UWA.is(o,"boolean")&&o?c.backgroundNotifMsg:c.timedOut+" "+c.verifyConnection,r=c.timedOut,a=c.verifyConnection):n=l.endsWith('return ResponseCode with value "500".')&&t&&"object"==typeof t&&t.message?t.message:l.endsWith('return ResponseCode with value "500".')&&t&&"object"==typeof t.error&&t.error.message?t.error.message:c.webServiceError:l.startsWith("The request has timedout")?(n=null!==s?UWA.is(o,"boolean")&&o?s:c.timedOut+" "+c.verifyConnection:UWA.is(o,"boolean")&&o?c.backgroundNotifMsg:c.timedOut+" "+c.verifyConnection,r=c.timedOut,a=c.verifyConnection):"string"==typeof l?n=l:"null"===e&&(n=c.webServiceError)}}else t.error&&t.error.message?n=t.error.message:t.message?n=t.message:t.errorMessage&&(n=t.errorMessage);return{message:n,isNotificationInfo:n===c.backgroundNotifMsg||n===s,title:r,subtitle:a,submessage:null}},onWebServiceError:function(e,t,o,i,n){e(g.parseWebServiceError(t,o),i,n)},getCurrentAppName:function(e){var t=null;return e?(e.hasOwnProperty("widget")&&"object"==typeof e.widget?e.widget.hasOwnProperty("data")&&(e.widget.data.hasOwnProperty("appId")||e.widget.data.hasOwnProperty("x3dAppId"))&&(e.widget.data.hasOwnProperty("appId")?t=e.widget.data.appId:e.widget.data.hasOwnProperty("x3dAppId")&&(t=e.widget.data.x3dAppId)):e.hasOwnProperty("options")?!e.options.hasOwnProperty("x3dAppId")||"ENOPRSU_AP"!=e.options.x3dAppId&&"ENOPSTR_AP"!=e.options.x3dAppId||(t=e.options.x3dAppId):"undefined"!=typeof widget&&widget.hasOwnProperty("data")&&widget.data.hasOwnProperty("appId")&&(t=widget.data.appId),t):t},getDeletedItems:function(e,t){var o=this;n.app_initialization((function(){g.getSecurityContext(this.tenant,(function(i){var a=n.get3DSpaceWSUrl(o.tenant,"/resources/lifecycle/Delete/deleteditems",null);r.authenticatedRequest(a,{method:"POST",headers:n.getHeaders(i),timeout:6e5,onComplete:function(t){console.log("getDeletedItems: onComplete:"+t),e(t)},data:"",onFailure:function(e,o){var i=g.parseWebServiceError(e,o);console.log("Failed to retrive data from the server"),t(i)},ontimeout:function(e){console.log("Timeout error"),t(c.timeout)},type:"json"})}))}))},isDECType:function(e){return e.startsWith("CAT")},_getAppId:function(e){try{return e.getValue("appId")}catch(e){return""}},isInLifecycleWidget:function(e){return"ENOLCMI_AP"===g._getAppId(e)},isInPSEditorWidget:function(e){return"ENOPSTE_AP"===g._getAppId(e)},isInXCADEditorWidget:function(e){return"ENOSTDE_AP"===g._getAppId(e)},translationServicePromise:function(e,t){var o=this;return new UWA.Class.Promise((function(i,n){o.post(e,"/resources/lifecycle/util/i18n",t,(function(e){i(e)}),(function(e){n(e)}))}))},getEffectivityPromise:function(e){return new UWAPromise((t=>{this.loadEffectivities(e,(e=>{var o=this.formatEffectivities(e);t(o)}))}))},formatEffectivities:function(e){var t=[];if(null==e)return console.log("unexpected effectivity"),t;var o=e.expressions;if(null==o)return console.log("unexpected effectivity"),t;for(var i=Object.keys(o),n=i.length,r=0;r<n;r++){var a=i[r],s=o[a],l=s.hasEffectivity;if("ERROR"!=l){var d=[],u={metatype:"effectivity",physicalID:a,data:d};t.push(u);var h="YES"==l?c.Yes:c.No;if(d.push({name:"Effectivity",nls:c.Effectivity,type:"string",value:[h]}),"NO"!=l){var p=s.content;if(null!=p){var g=p.Variant;null!=g&&d.push({name:"VariantOption",nls:c.VariantOption,type:"string",value:g});var f="",w="",_=p.Evolution;null!=_&&(f=null==_.Current?"":_.Current,w=null==_.Projected?"":_.Projected,d.push({name:"CurrentEvolution",nls:c.CurrentEvolution,type:"string",value:[f]}),d.push({name:"ProjectedEvolution",nls:["ProjectedEvolution"],type:"string",value:[w]}))}else console.log("unexpected effectivity")}}}return{results:t}},loadEffectivities:function(e,t){var o="/resources/modeler/configuration/navigationServices/getMultipleFilterableObjectInfo?timestamp="+(new Date).getTime().toString(),i={version:"1.0",output:{targetFormat:"TXT",withDescription:"YES",view:"ALL",domains:"ALL"},pidList:"["+e.join(",")+"]"};this.doPost(o,i,widget.getValue("x3dPlatformId"),widget.securityContext,function(e){t(e)}.bind(this),function(e){t({expressions:{}})}.bind(this))},getPropertiesPromise:function(e,t,o,n){return new i((function(i,r){("GET"==n?h:p)(e,o,t,d,i,r)}))},doPost:function(e,t,o,i,r,a){p(e,t,{url3DSpace:n.get3DSpaceBaseUrl(o),tenant:o,securityContext:i},d,r,a)},loadAttrs:function(e,t,o,r,a,s,c,d,u,h){for(var p=null,g=[],f=[],w=[],_=[],m=[],v=[],b=[],y={objectIds:[],serviceIds:[],tenant:a,securityContext:widget.securityContext},S=0;S<e.length;S++)"3DSpace"===t[S]?m.push(e[S]):"3dportfolio"===t[S]?_.push(e[S]):(y.objectIds.push(e[S]),y.serviceIds.push(t[S]));if(r.indexOf(1)>=0)for(S=0;S<o.length;S++)v.push(o[S]);if(r.indexOf(2)>=0)for(S=0;S<o.length;S++)b.push(o[S]);if(_.length){var C="",I="";if(null!=u)C="/"+u.typeInfo["dsxpfl:PortfolioVersion"].attributes.url,I=u.typeInfo["dsxpfl:PortfolioVersion"].url;else if(h&&h._RDF_SETTINGS&&h._RDF_SETTINGS._BASE_URL)I=h._RDF_SETTINGS._BASE_URL.replace("/3drdfpersist/v0","/3dportfolio"),C="/getAttrs";g.push(this.getPropertiesPromise(C,{securityContext:widget.securityContext,tenant:a,url3DSpace:I},{objectIds:_.join(",")},"GET"))}else m.length?(p={debug_properties:"",readonly:"false",navigateToMain:"true",attributes:"true",plmparameters:"true",busIDs:m,relIDs:[],lIds:[]},l.enrichRequestWithMetrics(p,{UXName:c}),g.push(this.getPropertiesPromise("/resources/v1/collabServices/attributes/op/read",{tenant:a,securityContext:widget.securityContext,url3DSpace:n.get3DSpaceBaseUrl(a)},p,"POST"))):null!=d&&y.objectIds.length&&g.push(this.getFederatedAttributesPromise(y));v.length&&(p={debug_properties:"",readonly:"false",navigateToMain:"false",attributes:"true",plmparameters:"true",busIDs:[],relIDs:v,lIds:[]},f.push(this.getPropertiesPromise("/resources/v1/collabServices/attributes/op/read",{tenant:a,securityContext:widget.securityContext,url3DSpace:n.get3DSpaceBaseUrl(a)},p,"POST"))),b.length&&w.push(this.getEffectivityPromise(b));var V=g.concat(f).concat(w);i.allSettled(V).then((function(e){for(var t=[],o=0;o<e.length;o++)if("rejected"!==e[o].state){var i=e[o].value;void 0!==i&&void 0!==i.results&&null!==i.results&&(t=t.concat(i.results))}s(t)}))}});return g})),define("DS/ManageSharing/controller/SharingWidgetController",["UWA/Controls/Abstract","UWA/Json","UWA/Promise","DS/WidgetServices/WidgetServices","DS/WAFData/WAFData","DS/ManageSharing/services/ManageServices","DS/ManageSharing/services/ManageServicesSettings","DS/ManageSharing/services/ManageSharingAlert"],(function(e,t,o,i,n,r,a,s){var l=void 0;function c(e,t){var o=null;if(null!==e&&e.hasOwnProperty("inputs")&&(o=e.inputs),null!==e&&e.hasOwnProperty("modelArray")&&e.modelArray,window.__karma__&&(l="ctx::VPLMProjectLeader.MyCompany.3DS Collab Space"),null!=widget){var r="";if(widget.hasOwnProperty("pad_security_ctx"))0!=(r=widget.pad_security_ctx).indexOf("ctx::")&&(r="ctx::"+r);else if("function"==typeof widget.hasPreference&&null!=widget.getPreference("pad_security_ctx"))r=widget.getPreference("pad_security_ctx").value;else if("function"==typeof widget.hasPreference&&widget.hasPreference("xPref_CREDENTIAL")){void 0!==(c=widget.getPreference("xPref_CREDENTIAL")).value&&null!==c.value&&c.hasOwnProperty("value")&&(r="ctx::"+c.value)}else if("function"==typeof widget.hasPreference&&widget.hasPreference("securityContext")){var c;void 0!==(c=widget.getPreference("securityContext")).value&&null!==c.value&&c.hasOwnProperty("value")&&(r=0==c.value.indexOf("ctx::")?c.value:"ctx::"+c.value)}r.length>0&&(l=r)}"string"==typeof l&&l.length&&function(e){var r,l={Accept:"application/ds-json","Content-Type":"application/ds-json"};l["Accept-Language"]=widget.lang,o.serviceURI.contains("http")&&DEBUG_MODE?(r=o.serviceURI,"GET"===o.method&&delete l["Content-Type"]):o.serviceURI.contains("search")?r=a.getPlatformWSUrl("3DSearch",tenantId,o.serviceURI,null):(r=i.getFullUrl()+o.serviceURI,l.SecurityContext=encodeURIComponent(e));"GET"===o.method&&(r+=(r.indexOf("?")>=0?"&":"?")+"timestamp="+Date.now().toString());n.authenticatedRequest(r,{method:o.method,headers:l,timeout:6e5,data:void 0===o.data?"":o.data,type:"json",onComplete:function(e){!function(e){var i=this;if("failure"===e.status||!1===e.success){var n=UWA.i18n("OperationFailed");if(e.hasOwnProperty("ownershipVector")&&e.ownershipVector.length>0&&e.ownershipVector[0].hasOwnProperty("ownership")&&e.ownershipVector[0].ownership.length>0&&e.ownershipVector[0].ownership[0].hasOwnProperty("result")&&e.ownershipVector[0].ownership[0].result.hasOwnProperty("message")&&(n=e.ownershipVector[0].ownership[0].result.message),(a=o.serviceURI.indexOf("update"))>=1){var r={response:e};t.dispatchEvent("refreshViewOnUpdate",r)}else i.eventData={eventID:"error",msg:n},s.displayNotification(i.eventData)}else{var a=o.serviceURI.indexOf("update");if(o.serviceURI.indexOf("getExpressions")>=1){var l=!1;e.hasOwnProperty("LifecycleConfidentialityEnabled")&&(l=e.LifecycleConfidentialityEnabled);var c=!0;e.hasOwnProperty("CommandAvailability")&&(c=e.CommandAvailability);r={LifecycleConfidentialityEnabled:l,CommandAvailability:c};t.dispatchEvent("fetchedExpressionList",r)}if(a<=1){logicalAccessService=o.serviceURI.indexOf("logicalaccess");var d=o.serviceURI.indexOf("getAttributesForAccessRights");if(-1===logicalAccessService){if(-1===d){if(o.serviceURI.indexOf("shareChecker")>-1&&e.hasOwnProperty("results")&&Array.isArray(e.results)&&e.results.length>0&&e.results[0].invalidList){r={response:e.results[0],invalidData:e.results[0].invalidList};t.dispatchEvent("onCompleteShareCheckerValidation",r)}if(e.hasOwnProperty("ownershipVector")){e.ownershipVector;r={response:e.ownershipVector};t.dispatchEvent("fetchedOwnershipData",r)}}else if(e.hasOwnProperty("results")){r={response:e.results,completionData:e.completionData};t.dispatchEvent("fetchedAttributeList",r)}}else{if(e.hasOwnProperty("accessList")){e.accessList;r={response:e.accessList};t.dispatchEvent("fetchedAccessList",r)}}}else{r={response:e};t.dispatchEvent("refreshViewOnUpdate",r)}}}(e)},onTimeout:function(e){var t={eventID:"error",msg:e.message};s.displayNotification(t)},onFailure:function(e){var t={eventID:"error",msg:e.message};s.displayNotification(t)}})}(l)}var d=e.extend({getExpressions:function(){return this._returnPromise({method:"GET",serviceURI:"/resources/accessRightServices/ar/getExpressions"})},getListOfAttributesForObject:function(e,o){var i='{ "requests": ';Array.isArray(e)&&null!=e&&e.length>0&&(i+=t.encode(e)+"}");var n={method:"POST",serviceURI:"/resources/accessRightServices/ar/getAttributesForAccessRights",data:i};return this._returnPromise(n)},getListOfLogicalRightsForObject:function(e,o){var i='{ "businessObject": ';Array.isArray(e)&&null!=e&&e.length>0&&(i+=t.encode(e)+"}");var n={method:"POST",serviceURI:0===e[0].objectID.indexOf("cid:")?"/resources/lifecycle/ownership/logicalaccess":"/resources/pno/ownership/logicalaccess",data:i};return this._returnPromise(n)},_doShareChecker:function(e,o){var i=[];Array.isArray(e)&&null!=e&&e.length>0&&(i=e),dataToSend=t.encode({requests:i});var n={method:"POST",serviceURI:0===e[0].objectID.indexOf("cid:")?"/resources/lifecycle/ownership/shareChecker":"/resources/accessRightServices/ar/shareChecker",data:dataToSend};return this._returnPromise(n)},getAccess:function(e,o){var i='{ "businessObject": ';Array.isArray(e)&&null!=e&&e.length>0&&(i+=t.encode(e)+"}");var n={method:"POST",serviceURI:0===e[0].objectID.indexOf("cid:")?"/resources/lifecycle/ownership":"/resources/pno/ownership",data:i};return this._returnPromise(n,o)},_returnPromise:function(e,t){var i=this;return new o((function(o,n){c({inputs:e,modelArray:t},i),console.log("test")}))},removeAccess:function(e,t,o){if(null!=e&&Array.isArray(e)){var i=[],n=t;e.forEach((function(e){var t={},r=(e.options.objectID,e.options.userGrpID),a=e.options.personID,s=null,l=null;null!=a&&""!=a&&(s={personID:e.options.personID});var c=e.options.orgID,d=e.options.collabSpaceID;null!=c&&""!=c&&(c={orgID:e.options.orgID},d={collabSpaceID:e.options.collabSpaceID}),null!=r&&""!=r&&(l={groupTitle:e.options.groupTitle,groupURI:e.options.groupURI}),t.access={logical:o},t.inheritedPath=e.options.inheritedPath,t.operation="Empty"==o?"REMOVE":"ADD";var u=e.options.comment;null!=c&&(t.owner={comment:u,collabSpace:d,organization:c}),null!=s&&(t.owner={comment:u,person:s}),null!=l&&(t.owner={comment:u,group:l});var h=[];h.push(t),n.forEach((function(e){i.push({objectID:e,ownership:h})}))}));var s={ownershipVector:i},l=this;r.getSecurityContextPromise(a.getTenant()).then((function(e){l.getCompleteData(s,e)})).catch((function(e){reject(e)}))}},getCompleteData:function(e,o){var r=this,l=a.getHeaders(encodeURIComponent(o));l.SecurityContext=encodeURIComponent(o);for(var c=i.getFullUrl()+"/resources/accessRightServices/ar/getCompletedData",d=[],u=0;u<e.ownershipVector.length;u++)null==e.ownershipVector[u].objectID&&null==e.ownershipVector[u].objectID||d.push(e.ownershipVector[u].objectID);var h=t.encode({requests:d});n.authenticatedRequest(c,{method:"POST",headers:l,timeout:6e5,data:h,type:"json",onComplete:function(t){if("failure"===t.status||!1===t.success){reject(t);var o={error:t.status};caller.dispatchEvent("failedGettingOwnershipDatq",o)}else{if(null!=t.results[0].invalidList&&t.results[0].invalidList.length>0){t.results[0].invalidList.forEach((function(t){for(var o=0;o<e.ownershipVector.length;o++)e.ownershipVector[o].objectID===t&&e.ownershipVector.splice(o,1)}))}else if(null!=t.results[0].validList&&t.results[0].validList.length>0&&t.results[0].validList.length>e.ownershipVector.length){var i=[];i=t.results[0].validList,expandedOwnershipItems=[],i.forEach((function(t){for(var o=!0,i=0;i<e.ownershipVector.length;i++)if(e.ownershipVector[i].objectID==t){o=!1;break}o&&expandedOwnershipItems.push({objectID:t,ownership:e.ownershipVector[0].ownership})})),expandedOwnershipItems.forEach((function(t){e.ownershipVector.push(t)}))}r.commitWithSCPCS(e)}},onTimeout:function(e){var t={eventID:"error",msg:e.message};s.displayNotification(t)},onFailure:function(e){var t={eventID:"error",msg:e.message};s.displayNotification(t)}})},commitWithSCPCS:function(e){var o=t.encode(e),i={method:"POST",serviceURI:0===e.ownershipVector[0].objectID.indexOf("cid:")?"/resources/lifecycle/ownership/update":"/resources/pno/ownership/update",data:o};return this._returnPromise(i,null)},updateAccess:function(e,t){this.getCompleteData(e,t)},send3DNotification:function(e){var o=this;r.getSecurityContextPromise(i.getTenantID()).then((function(n){var r=a.getHeaders(encodeURIComponent(n));i.get3DSpaceUrlAsync({onComplete:function(n){var a=i.getRealPath("assets/transferOwnership.json",widget),s="",l="PUT",c="",d=e;if(2==i.getProdLevel()){a=n+"/resources/lifecycle/3dnotification/notifymoveshare";a+="?command=share&",c="passport",l="PUT",s=t.encode({requests:d})}var u=i.getTenantID();u&&(a+="tenant="+u),r["Accept-Language"]=widget.lang,i.partitionedAuthenticatedRequest(a,{type:"json",method:l,proxy:c,headers:r,maxChunkSize:19,cancelCallback:function(){return!1},partisionedProgressLabel:"sending notification..",progressBarContext:o.ManageButtonLeft,progressBarWaitContext:o.container,symultaneousRequest:!0,data:s,timeout:36e5,onComplete:function(e){},onFailure:function(e,t,o){},onTimeout:function(e){}})}})})).catch((function(e){reject(e)}))}});return d})),define("DS/ManageSharing/ManageSharing",["DS/EditPropWidget/facets/Common/FacetsBase","UWA/Core","UWA/Class/Model","UWA/Widget","DS/ManageSharing/controller/SharingWidgetController","DS/ManageSharing/services/ManageServicesSettings","UWA/Controls/ThemedScroller","DS/ManageSharing/utils/ShareModelServices","DS/TreeModel/TreeDocument","DS/EditPropWidget/constants/EditPropConstants","WebappsUtils/WebappsUtils","DS/CoreEvents/ModelEvents","DS/ApplicationFrame/Command","DS/ApplicationFrame/CommandsManager","DS/ApplicationFrame/CommandFactory","DS/ManageSharing/utils/SharingViewConstants","DS/PlatformAPI/PlatformAPI","DS/TreeModel/TreeNodeModel","DS/Controls/ResponsiveTileView","DS/WidgetServices/WidgetServices","DS/ManageSharing/model/SharingAccordionModel","DS/ManageSharing/views/SharingCollectionView","DS/ManageSharing/views/Mediator","DS/ReportingPanel/ReportPanelExport","DS/ManageSharing/services/ManageSharingAlert","i18n!DS/ManageSharing/assets/nls/SharingNLS","DS/ReportingPanel/ReportingPanel"],(function(e,t,o,i,n,r,a,s,l,c,d,u,h,p,g,f,w,_,m,v,b,y,S,C,I,V,D){"use strict";var A=new u;return e.extend({defaultOptions:{className:"sharingWidget"},_eventListeners:[],init:function(e){this._parent(e),this.lastCurrentView="";var t=this;t.getModel();t._initUI(),t._emptyView=null,t._controller=new n({events:{fetchedOwnershipData:function(e){v.get3DSwymUrlAsync({onComplete:function(o){null==o&&(o=""),e.response[0].swymURL=o,t._buildAccordionModel(e)}})},refreshViewOnUpdate:function(e){var o="<button>"+V.LaunchReport+"</button>";e.response.hasOwnProperty("ownershipVector")&&(t.shareUpdateResponse=e.response,e.response.success&&0==t.shareInfo.listOfInvalidIDs.length?t.eventData={eventID:"success",hasHtml:!0,sticky:!1,title:V.Success}:(e.response.success&&t.shareInfo.listOfInvalidIDs.length>0||0==e.response.success)&&(t.eventData={eventID:"error",hasHtml:!0,sticky:!0,title:V.SharingReport1,subtitle:V.partialFailure,message:o,action:{label:V.LaunchReport,callback:function(){t.showErrorReporting(t.shareUpdateResponse,t.shareInfo.SelectedItems)}}}),e=e.response.ownershipVector,I.displayNotification(t.eventData)),t.do3DNotification(e),t.onRefresh()},fetchedAccessList:function(e){t._buildAccessList(e)},fetchedAttributeList:function(e){t._buildAttributeList(e)},onCompleteShareCheckerValidation:function(e){t._validateSelection(e)},fetchedExpressionList:function(e){t._buildExpressionList(e)}}}),w.subscribe("ENOLC_RIGHTS_UPDATED",(function(e){var o=e.data.paths;t._updateTree(o)}))},_initUI:function(){var e=this.elements.container=UWA.createElement("div",{name:"sharing-widget",class:"sharingWidget"});this.elements.content=UWA.createElement("div",{class:"content_Sharing"}).inject(e);this.elements.content.setStyle("width","100%"),this.elements.content.setStyle("height","100%"),(this.elements.contentScroll=UWA.createElement("div",{class:"contentScroll_Sharing",width:"98%",height:"100%"})).inject(this.elements.content)},_initDataModels:function(){this._modelArray=new Array,this._rightsToNodeOptionsMap=new Object,this._idToNodeOptionsMap=new Object,this._collection=null,this._accessListToNlsValues=null,this._TreeDocument=null,this._AccordionModelView=null,this.accordeonContainer=null,this._ListOfTileViewCollection=[],this._sortedTileLayout=null,this._sortedTileLayoutDiv=null,this._searchView=null,this._currentModelId=null,this.searchData={},this.searchTextBox=null,this._scroller=(new a).inject(this.elements.content),this._scroller.getContent().setStyle("height","100%"),this._scrollerContainer=UWA.createElement("div",{id:"sharingScrollerContainer",class:"sharingScrollerContainer"}),this._scroller.getInnerElement().setContent(this._scrollerContainer),this._currentView=f.TYPE_LARGE_RESPONSIVE_TILE,this.elements.contentScroll.inject(this.elements.content),this._AccordionModel=null,this.subscribeToEvents(),self._emptyView=null},_emptyDataModels:function(){var e=this;null!=e._modelArray&&delete e._modelArray,e._groups&&delete e._groups,e._rightsToNodeOptionsMap&&delete e._rightsToNodeOptionsMap,e._rightsToTreeDocumentMap&&delete e._rightsToTreeDocumentMap,e._idToRightsMap&&delete e._idToRightsMap,e._idToNodeOptionsMap&&delete e._idToNodeOptionsMap,e._idToTreeNodeMap&&delete e._idToTreeNodeMap,e.rightsToAccordeonIndex&&delete e._rightsToAccordeonIndex,e._AccordionModelView&&(delete e._AccordionModelView,e._AccordionModelView=null),e._TreeDocument&&(e._TreeDocument.empty(),delete e._TreeDocument,e._TreeDocument=null),this._ListOfTileViewCollection=[],this.searchData={},this.searchTextBox=null,this._emptyView=null,self._UWAModelArray&&(self._UWAModelArray=[]),this._collection=null,this._accessListToNlsValues=null},_buildExpressionList:function(e){var t=this;null!=e&&null!=e&&(e.hasOwnProperty("LifecycleConfidentialityEnabled")&&(t.LifecycleConfidentialityEnabled=e.LifecycleConfidentialityEnabled),t._CommandAvailability=!0,e.hasOwnProperty("CommandAvailability")&&(t._CommandAvailability=e.CommandAvailability))},_buildAttributeList:function(e){var t=this;null!=e&&null!=e&&(t._isTypeSupportedToCommand=!0,e.hasOwnProperty("completionData")&&0==e.completionData.validList.length&&(t._isTypeSupportedToCommand=!1),t._CommandAvailability=!0,e.hasOwnProperty("CommandAvailability")&&(t._CommandAvailability=e.CommandAvailability),t._attributeList={},t._attributeList=s._createAttributeListFromResponse(t.currentModelId,e),null==t.currentModelId?t._buildView({idList:t.shareInfo.listOfIDs}):t._buildView({idList:[{id:t.currentModelId}]}))},_buildAccessList:function(e){var t=this;null!=e&&null!=e&&(t.showLoader(),t._accessListToNlsValues={},t._accessListToNlsValues=s._createAccessListFromResponse(t.currentModelId,e),t._NlsValuesToaccessList=s._createNLSAccessListFromResponse(t.currentModelId,e))},_validateSelection:function(e){var t=this;if(null!=e&&null!=e){t._isObjectValid=!0;e.response;if(e.hasOwnProperty("invalidData")&&e.invalidData.length>0)t._isObjectValid=!1;else t._sharingOptions}},_buildView:function(e){this._getRights(e)},_getRights:function(e){var t=[];if(e.hasOwnProperty("idList")){t=[];for(var o=0;o<e.idList.length;o++)e.idList[o].hasOwnProperty("id")?t.push({objectID:e.idList[o].id}):t.push({objectID:e.idList[o]});this._controller.getAccess(t,this._modelArray)}},_checkAccessToShareCmd:function(){var e=this,t="",o=r.getTenant();if(null!=widget){var i="";if(widget.hasOwnProperty("pad_security_ctx"))0!=(i=widget.pad_security_ctx).indexOf("ctx::")&&(i="ctx::"+i);else if("function"==typeof widget.hasPreference&&null!=widget.getPreference("pad_security_ctx"))i=widget.getPreference("pad_security_ctx").value;else if("function"==typeof widget.hasPreference&&widget.hasPreference("xPref_CREDENTIAL")){var n=widget.getPreference("xPref_CREDENTIAL");void 0!==n.value&&null!==n.value&&n.hasOwnProperty("value")&&(i="ctx::"+n.value)}else"function"==typeof widget.hasPreference&&null!=widget.getPreference("securityContext")&&(i=widget.getPreference("securityContext").value);i.length>0&&(t=i)}let a=CredentialList.loadCredentials(o);UWA.Promise.all([a,t]).then((t=>{t.length<2||!UWA.is(t[0],"array")?console.error("Missing credentials"):CredentialList.filterCredentials(o,t[0],"accessRight").then((t=>{t.length;0==t.length?e.checkAccessToShareCmdFlag=!1:e.checkAccessToShareCmdFlag=!0})).catch((e=>{console.error("FAiled to call credential filter svc, error:",e)}))}))},_getExpressions:function(){this._controller.getExpressions()},_getAttributesOfSelectedItems:function(e){var t=[];if(e.hasOwnProperty("idList")){t=[];for(var o=0;o<e.idList.length;o++)t.push(e.idList[o].id);this._controller.getListOfAttributesForObject(t,[])}},_getAccessRightsToNlsList:function(e){var t=[];if(e.hasOwnProperty("idList")){t=[];for(var o=0;o<e.idList.length;o++)t.push({objectID:e.idList[o].id});this._controller.getListOfLogicalRightsForObject(t,[])}},_doShareCheckerWidget:function(e){this._sharingOptions=e;var t=[];if(e.hasOwnProperty("idList")){t=[];for(var o=0;o<e.idList.length;o++)t.push({objectID:e.idList[o].id});this._controller._doShareChecker(t,[])}},onRefresh:function(){this.updateFacet()},hide:function(){this._isVisible=!1,this.elements.container.hide()},show:function(){this._isVisible=!0,this.elements.container.show()},updateFacet:function(){if(null!=this.sharingCollectionView&&(this.lastCurrentView=this.sharingCollectionView._xsourcingCollectionViewUI.currentView),this.options.flagShareDialogLaunch){var e=(l=this).options.tenant;l._controller.tenantId=e,r.setTenant(e),widget.setValue("x3dPlatformId",e);for(var t=[],o=0;o<l.shareInfo.listOfIDs.length;o++)t.push({id:l.shareInfo.listOfIDs[o],type:l.shareInfo.SelectedItemsMap[l.shareInfo.listOfIDs[o]].type});l._initDataModels(),l._isObjectValid=!0,l.shareInfo.listOfInvalidIDs.length>0&&(l._isObjectValid=!1),l.checkAccessToShareCmdFlag=!0;var i={completionData:{invalidList:l.shareInfo.listOfInvalidIDs,validList:l.shareInfo.listOfIDs},results:l.shareInfo.SelectedItems},n={response:i.results,completionData:i.completionData};l._buildAttributeList(n);n={LifecycleConfidentialityEnabled:l.shareInfo.LifecycleConfidentialityEnabled,CommandAvailability:!0};l._buildExpressionList(n);var a={response:l.shareInfo.AccessRightModelList};l._buildAccessList(a),l.elements.container.show()}else{var s=this.getModel();if(s){if(s.getAllAttributes()&&"relationship"==s.getAllAttributes().metatype)return;var l;(l=this).elements.contentScroll.empty(),r.app_initialization((function(){var e=s.getTenant(),t=(s.getAllAttributes(),s.get("objectId"));"relationship"==s.get("metatype")&&(t=s.get("selReferenceID")),l.currentModelId!==t?(l.currentModelId=t,l.elements.content.empty(),l._emptyDataModels()):l.elements.content.empty();var o=s.get("type"),i=s.get("_DS_ATTR_type"),n=void 0;window.__karma__&&(e="OnPremise"),l._3DSpaceURL=r.get3DSpaceBaseUrl(e),l._3DSWYMURL=r.getPlatformBaseUrl("3DSwym",e),null!=i&&(n=null!=i.valueDB?i.valueDB:i),null==n&&(n=null!=o?o.valueDB:l.cacheType),l.cacheType=n,widget.setValue("x3dPlatformId",e);var a={idList:[{id:l.currentModelId,type:i}]};l._initDataModels(),0!==l.currentModelId.indexOf("cid:")&&l._doShareCheckerWidget(a),l._checkAccessToShareCmd(),l._getAttributesOfSelectedItems(a),l._getExpressions(),setTimeout((function(){l._getAccessRightsToNlsList(a)}),100)}))}}},showErrorReporting:function(e,t){var o=this,i=[],n=[];if(e&&e.ownershipVector)for(var r=e.ownershipVector.length,a=0;a<r;a++){var s=[],l=e.ownershipVector[a];if(l){var c=l.ownership,d="access right success",u=!1;0==o.isODT&&(d=UWA.i18n("accessRightSuccess"));for(var h=0;h<c.length;h++){var p=c[h];if(p.hasOwnProperty("result")){d="access right failure",0==o.isODT&&(d=p.result.message),u=!0;break}}for(var g=0;g<t.length;g++){var f="",w="";if(o.options.odtmode?(f=t[g].physicalId,w=t[g].name):(f=t[g].getID(),w=t[g].getName()),f===e.ownershipVector[a].objectID){t[g].status=d,s.push(f),u?(s.push(UWA.i18n("Share_Fail_Status")),s.push("Failed")):(s.push(UWA.i18n("Share_Success_Status")),s.push("Success")),s.push(w),s.push(t[g].typeDisplayName),s.push(t[g].Revision),s.push(t[g].organizationTitle),s.push(t[g].collabSpaceTitle),s.push(t[g].responsibleName),s.push(d),i.push(s);for(var _=e.ownershipVector[a].objectID,m=l.ownership,v=0;v<m.length;v++){var b=c[v],y={},S="",C="",I="",V="";if(b.access&&b.access.logical){var A=b.access.logical;V=o.shareInfo.accessLogicalNlsMap[A]}var x=o.timeStamp;b.owner.person&&(S=(S=b.owner.person.personID).replace("_PRJ",""));var E="",P="";b.owner.collabSpace&&(C=b.owner.collabSpace.collabSpaceID,I=b.owner.collabSpace.collabSpaceTitle,b.owner.organization&&(E=b.owner.organization.orgID,P=b.owner.organization.orgTitle));var O="",R="";b.owner.group&&(O=b.owner.group.groupURI,R=b.owner.group.groupTitle);var T="";T=o.options.odtmode?t[g].name:t[g].getName(),y.objectID=_,y.objectName=T,y.userID=S,y.csID=C,y.csTitle=I,y.orgID=E,y.orgTitle=P,y.grpID=O,y.grpTitle=R,y.nlsAccess=V,y.cestamp=x,n.push(y)}}}}}var M=o.shareInfo.listOfInvalidIDs;if(M.length>0)for(g=0;g<t.length;g++){s=[],f="",w="";if(o.options.odtmode?(f=t[g].physicalId,w=t[g].name):(f=t[g].getID(),w=t[g].getName()),-1!=M.indexOf(f)){d=ARNls.get("ShareCheckerBlockedMessage");t[g].status=d,s.push(f),s.push(UWA.i18n("Share_Fail_Status")),s.push("Failed"),s.push(w),s.push(t[g].typeDisplayName),s.push(t[g].Revision),s.push(t[g].organizationTitle),s.push(t[g].collabSpaceTitle),s.push(t[g].responsibleName),s.push(d),i.push(s)}}o.send3DNotification(n);var N=UWA.i18n("AR_Status"),L=UWA.i18n("AR_Title"),U=UWA.i18n("AR_Sum_Type"),k=UWA.i18n("AR_Revision"),G=UWA.i18n("AR_Sum_Org"),F=UWA.i18n("AR_Sum_Collab"),B=UWA.i18n("AR_Sum_Resp"),j=UWA.i18n("AR_Result"),W=[{text:"ID",dataIndex:"ID",isHidden:!0},{text:"StatusToolTipColumn",dataIndex:"statusTooltip",isHidden:!0,tooltipColumn:"Status"},{text:N,dataIndex:"Status",typeRepresentation:"icon"},{text:L,dataIndex:L},{text:U,dataIndex:U},{text:k,dataIndex:k},{text:G,dataIndex:G},{text:F,dataIndex:F},{text:B,dataIndex:B},{text:j,dataIndex:j}];D.launchReportingPanel(i,W,null),o.dispatchEvent("onCancel")},_buildAccordionModel:function(e){var t=this;if(null==e||null==e)return;t._rightsToNodeOptionsMap={},t._sharingReport={},t._AccordionModel=b.getModel(e,t._rightsToNodeOptionsMap,t._accessListToNlsValues,t.shareInfo.accessLogicalNlsMap,t._attributeList,t._sharingReport);var o=new y;o._xsourcingCollectionViewUI.shareInfo=t.shareInfo;var i={},n=t._isObjectValid;i.container=t.elements.container,i.validObject=n,i.sort=[{id:"title",text:"rights",type:"string"}];var r=[];let a=Object.keys(t._rightsToNodeOptionsMap);a&&a.forEach((function(e){let o=t._rightsToNodeOptionsMap[e];if(null!=o&&Array.isArray(o))for(var i=0;i<o.length;i++)null!=t._attributeList&&t._attributeList.hasOwnProperty(o[i].objectID)&&(o[i].type=t._attributeList[o[i].objectID].type,o[i].isAggrShape="3DPart"==t._attributeList[o[i].objectID].PLMEntity&&"3DShape"==t._attributeList[o[i].objectID].type,o[i].isAggrShape&&(o[i].contextualMenu=[])),0==t._isTypeSupportedToCommand&&(o[i].contextualMenu=[]),0==t._CommandAvailability&&(o[i].contextualMenu=[]),0==t._isObjectValid?(o[i].contextualMenu=[],o[i].validObjectID=!1):o[i].validObjectID=!0,r.indexOf(o[i])<0&&r.push(o[i])})),i.data=r,i.lastCurrentView=t.lastCurrentView,i.applicationChannelEvents=[],i.applicationChannelEvents.push({eventName:"add-model"}),i.views=[f.TYPE_LARGE_RESPONSIVE_TILE_STRING,f.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,f.TYPE_LARGE_RESPONSIVE_TILE_SORTED_ASC_STRING,f.TYPE_LARGE_RESPONSIVE_TILE_SORTED_DESC_STRING],i.currentView=f.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,i._mediator=new S;var s=a;i.groupHeaders=s,i.groupingOptions={dataIndexesToGroup:["logicalRights"]},i.accessListToNlsValues=t.shareInfo.accessLogicalNlsMap,i.RightList=t.shareInfo.AccessRightModelList[0]._RightList,t.hasOwnProperty("sharingCollectionView")&&t.sharingCollectionView._xsourcingCollectionViewUI.hasOwnProperty("currentViewAtTimeOfShareLaunch")&&null!=t.sharingCollectionView._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch&&(o._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch=t.sharingCollectionView._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch),i.LifecycleConfidentialityEnabled=t.LifecycleConfidentialityEnabled,i.checkAccessToShareCmdFlag=t.checkAccessToShareCmdFlag,o.init(i),t.sharingCollectionView=o,o.collectionViewEvents.subscribe({event:"enox-collection-share-operation"},(function(e){t._addNewMembers()})),o.collectionViewEvents.subscribe({event:"enox-collection-filter-operation"},(function(e){if(t.elements.container.getElementsByClassName("sharingcollectionview-filter-container")[0].isHidden()){t.elements.container.getElementsByClassName("sharingcollectionview-filter-container")[0].show(),f.TYPE_LARGE_RESPONSIVE_TILE_STRING===e&&t.elements.container.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView")[0].setStyle("top","125px"),t.sharingCollectionView._xsourcingCollectionViewUI._canReadCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canEditCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canViewCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canManageCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canAddRemoveAttachmentsCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._showUsersWithInheritedPermissionCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._readCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._addCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._basicCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._readWriteCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._removeCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._addRemoveCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._fullCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._leaderCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._projectLeadCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._projectMemberCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canReadRestrictionCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._noneCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._variesCBGroup.hide(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Reader"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canReadCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Author"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canEditCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Viewer"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canViewCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Owner"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canManageCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("CanAddRemoveAttachments"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canAddRemoveAttachmentsCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Read"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._readCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Add"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._addCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Basic"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._basicCBGroup.show(),(t.sharingCollectionView._groupHeaders.indexOf(V.get("ReadWrite"))>=0||t.sharingCollectionView._groupHeaders.indexOf(V.get("Read Write"))>=0)&&t.sharingCollectionView._xsourcingCollectionViewUI._readWriteCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("remove"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._removeCBGroup.show(),(t.sharingCollectionView._groupHeaders.indexOf(V.get("AddRemove"))>=0||t.sharingCollectionView._groupHeaders.indexOf(V.get("Add Remove"))>=0)&&t.sharingCollectionView._xsourcingCollectionViewUI._addRemoveCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Full"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._fullCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Leader"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._leaderCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Project Lead"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._projectLeadCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Project Member"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._projectMemberCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(V.get("Varies"))>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._variesCBGroup.show();for(var o=0;o<t.sharingCollectionView._data.length;o++)if(t.sharingCollectionView._data[o].hasOwnProperty("None_Objects")){t.sharingCollectionView._xsourcingCollectionViewUI._noneCBGroup.show();break}var i=!1;if(t.sharingCollectionView&&t.sharingCollectionView._data&&t.sharingCollectionView._data.length>0)for(o=0;o<t.sharingCollectionView._data.length;o++)if(t.sharingCollectionView._data[o].inheritedPath.length>0){i=!0;break}i?t.sharingCollectionView._xsourcingCollectionViewUI._showUsersWithInheritedPermissionCBGroup.show():t.sharingCollectionView._xsourcingCollectionViewUI._showUsersWithInheritedPermissionCBGroup.hide()}else t.elements.container.getElementsByClassName("sharingcollectionview-filter-container")[0].hide(),f.TYPE_LARGE_RESPONSIVE_TILE_STRING===e&&t.elements.container.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView")[0].setStyle("top","50px")})),o.collectionViewEvents.subscribe({event:"xsourcing-collectionview-cell-dblclick"},(function(e){})),o.collectionViewEvents.subscribe({event:"xsourcing-collectionview-selection-updated"},(function(e){e.selectedItems.length>0?1==t._isObjectValid?o.collectionViewEvents.publish({event:"xsourcing-collectionview-enable-toolbar-button",data:"delete"}):(o.collectionViewEvents.publish({event:"xsourcing-collectionview-disable-toolbar-button",data:"delete"}),o.collectionViewEvents.publish({event:"xsourcing-collectionview-disable-toolbar-button",data:"share"})):o.collectionViewEvents.publish({event:"xsourcing-collectionview-disable-toolbar-button",data:"delete"})})),o.collectionViewEvents.subscribe({event:"enox-collection-setaccess-operation"},(function(e){e.selectedItems&&Array.isArray(e.selectedItems)&&(!1===t._CommandAvailability&&(t.eventData={eventID:"error",msg:V.get("ChangeAccessBlockedForCurrentResponsibility")},I.displayNotification(t.eventData)),!1===t.checkAccessToShareCmdFlag?(t.eventData={eventID:"error",msg:V.get("ChangeAccessBlockedForCurrentResponsibility")},I.displayNotification(t.eventData)):t._controller.removeAccess(e.selectedItems,t.shareInfo.listOfIDs,e.access))})),o.collectionViewEvents.subscribe({event:"enox-collection-delete-operation"},(function(e){e.selectedItems&&Array.isArray(e.selectedItems)&&(!1===t._CommandAvailability&&(t.eventData={eventID:"error",msg:V.get("RemoveAccessBlockedForCurrentResponsibility")},I.displayNotification(t.eventData)),!1===t.checkAccessToShareCmdFlag?(t.eventData={eventID:"error",msg:V.get("RemoveAccessBlockedForCurrentResponsibility")},I.displayNotification(t.eventData)):t._controller.removeAccess(e.selectedItems,t.shareInfo.listOfIDs,"Empty"))})),o.collectionViewEvents.subscribe({event:"enox-ctxMenu-operation-delete"},(function(e){e.selectedItems&&Array.isArray(e.selectedItems)&&(!1===t.checkAccessToShareCmdFlag?(t.eventData={eventID:"error",msg:V.get("RemoveAccessBlockedForCurrentResponsibility")},I.displayNotification(t.eventData)):t._controller.removeAccess(e.selectedItems,t.shareInfo.listOfIDs,"Empty"))})),o.collectionViewEvents.subscribe({event:"enox-ctxMenu-operation-change-access"},(function(e){e&&(!1===t._CommandAvailability&&(t.eventData={eventID:"error",msg:V.get("RemoveAccessBlockedForCurrentResponsibility")},I.displayNotification(t.eventData)),!1===t.checkAccessToShareCmdFlag?(t.eventData={eventID:"error",msg:V.get("ShareBlockedForCurrentResponsibility")},I.displayNotification(t.eventData)):t._controller.updateAccess(e,t.shareInfo.widgetSecurityContext))})),o.collectionViewEvents.subscribe({event:"xsourcing-collectionview-updateModel"},(function(e){e&&Array.isArray(e)&&o.handleModelUpdate(e)})),o.collectionViewEvents.subscribe({event:"xsourcing-collectionview-exportcsv"},(function(e){var o="Title,Type,Revision,Organization,Collaborative Space,Owner,Ownership,Access";o+=t._sharingReport._Report,(new C).downloadFile(e,o,".csv",!0)})),t.hideLoader()},_addNewMembers:function(){var e=this.getModel();p.getCommand("ActionBar_ShareCmd");this.sharingCollectionView._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch=this.sharingCollectionView._xsourcingCollectionViewUI.currentView;var t=s._createModelForAddMember(e),o=this,i="DS/ENOCollabSharingCmds/commands/ShareCmd/ActionBar_ShareCmd".replace(/\./g,"/");require(["DS/ApplicationFrame/CommandFactory",i],(function(e,i){var n=e._createCommand(i,{ID:"ActionBar_ShareCmd"});n.options={},n.options.context=t,n.options.sharingWebUI=o,n.beginExecute(),n.execute(),n.endExecute()}))},subscribeToEvents:function(){var e=this;A.subscribe({event:"sharing-delete-access"},(function(t){if(e._controller&&t){var o=[];o.push(t),e._controller.removeAccess(o,e.shareInfo.listOfIDs)}})),A.subscribe({event:"onSaveInCache"},(function(e){}))},do3DNotification:function(e){var t=this,o=[];if("object"==typeof e&&null!==e&&e.hasOwnProperty("response")){var i=e.response;if(Array.isArray(i)&&1==i.length){var n=i[0],r=n.objectID;if(n.ownership&&Array.isArray(n.ownership)&&1==n.ownership.length){var a=n.ownership[0];if(a.access&&a.access.logical){if("Empty"==a.access.logical)return;var s,l=r,c={},d="",u="",h="",p="",g="",f="",w="",_=t._create_UUID(),m=a.access.logical;s=t._accessListToNlsValues[m],a.owner.person&&(d=(d=a.owner.person.personID).replace("_PRJ","")),a.owner.collabSpace&&(u=a.owner.collabSpace.collabSpaceID,h=a.owner.collabSpace.collabSpaceTitle,a.owner.organization&&(p=a.owner.organization.orgID,g=a.owner.organization.orgTitle)),a.owner.group&&(f=a.owner.group.groupURI,w=a.owner.group.groupTitle);var v="";if(t.getModel()){var b=t.getModel();b.getAllAttributes().label&&(v=b.getAllAttributes().label)}c.objectID=l,c.objectName=v,c.userID=d,c.csID=u,c.csTitle=h,c.orgID=p,c.orgTitle=g,c.grpID=f,c.grpTitle=w,c.nlsAccess=s,c.cestamp=_,o.push(c),t.send3DNotification(o)}}}}},send3DNotification:function(e){for(var t=[],o=0;o<e.length;o++)t.push({objectID:e[o].objectID,objectName:e[o].objectName,userID:e[o].userID,CSID:e[o].csID,OrgID:e[o].orgID,CSTitle:e[o].csTitle,OrgTitle:e[o].orgTitle,GrpID:e[o].grpID,GrpTitle:e[o].grpTitle,nlsAccess:e[o].nlsAccess,cestamp:e[o].cestamp});this._controller.send3DNotification(t)},_create_UUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)}))}})}));