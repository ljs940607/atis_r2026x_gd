define("DS/i3DXCompass/Controls/Search",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Input/Text","DS/UIKIT/Tooltip"],(function(e,t,n,i){"use strict";var s=e.i18n;return t.extend({className:"compass-search",defaultOptions:{typeDelay:500},isActive:!1,currentText:"",typeTimeout:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=this,o=this.container=e.createElement("div",{class:this.className}),a=this.elements={};a.button=e.createElement("div",{class:this.className+"-button fonticon fonticon-search",events:{click:function(){t.dispatchEvent("onToggle")}}}).inject(o),new i({position:"left",target:a.button,className:"compass-tooltip",body:s("Search")}),a.reset=e.createElement("button",{class:this.className+"-text-reset close fonticon fonticon-clear",styles:{"font-size":"18px"},attributes:{type:"button","aria-hidden":!0},events:{click:function(){t.dispatchEvent("onReset")}}}),new i({position:"right",target:a.reset,className:"compass-tooltip",body:s("Clear search")}),a.text=new n({className:this.className+"-text",placeholder:s("searchapps"),attributes:{events:{keyup:function(){t.dispatchEvent("onKeyUp")}}}}),a.textWrapper=e.createElement("div",{class:this.className+"-text-wrapper",html:[a.reset,a.text]}).inject(o),o.addClassName(this.className)},onToggle:function(){var e=!this.isActive;this.container.toggleClassName("active",e),e?this.elements.text.setFocus():this.dispatchEvent("onReset"),this.isActive=e},onReset:function(){var e=this.elements.text;""!==this.currentText&&(window.clearTimeout(this.typeTimeout),e.setValue(""),this.currentText="",this.dispatchEvent("onSearch","")),e.setFocus()},onKeyUp:function(){var e=this,t=this.elements.text.getValue().toLowerCase();t!==this.currentText&&(this.currentText=t,window.clearTimeout(this.typeTimeout),this.typeTimeout=window.setTimeout((function(){e.dispatchEvent("onSearch",t)}),this.options.typeDelay))},hide:function(){this.container.addClassName("transparent")},show:function(){this.container.removeClassName("transparent")},blur:function(){this.elements.text.setFocus(!1)}})})),define("DS/i3DXCompass/Types",["UWA/Core"],(function(e){"use strict";var t={},n=null;return t.get=function(){return e.log("get Types"),e.log("Types = "+JSON.stringify(n)),n},t.set=function(t){e.log("Set Types"),n=t},t.reset=function(){n=null},t})),define("DS/i3DXCompass/Controls/IframeLoader",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Mask"],(function(e,t,n){"use strict";var i="compass-iframe-loader-failed";return t.extend({defaultOptions:{src:"",text:"",timeout:15e3,frameId:"3DCommerceRoleDescription"},className:"compass-iframe-loader",init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=this.options,i=this.elements=[];i.container=e.createElement("div",{class:this.className}),t.src&&""!==t.src&&!this._isUrl(t.src)?this.buildText(t.src):t.src&&""!==t.src&&this._isUrl(t.src)&&!this.getFailed()?(n.mask(i.container),this.launchTimeout(),i.iframe=e.createElement("iframe",{src:t.src,allowfullscreen:!0}).inject(i.container)):t.src&&""!==t.src&&this._isUrl(t.src)&&this.getFailed()?(this.buildText(),this.launchTimeout(),i.iframe=e.createElement("iframe",{src:t.src,class:"hidden",allowfullscreen:!0}).inject(i.container)):this.buildText()},buildText:function(t){this.elements.container.setContent(e.createElement("div",{class:t?this.className+"-text-description":this.className+"-text",html:t||this.options.text}))},_isUrl:function(e){return new RegExp("^(https?:\\/\\/)((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[\\(\\)-a-z\\d%_.~+]*)*(\\?[\\(\\);&a-z,\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},launchTimeout:function(){var t=this,i=this.elements,s=function(){removeEventListener("message",o),clearTimeout(a)},o=function(o){var a=o.data;a.id===t.options.frameId&&(s(),0===a.code?(i.iframe.addClassName("visible"),i.iframe.removeClassName("hidden"),"number"===e.typeOf(a.height)&&i.iframe.setStyle("height",a.height),i.container.getElement("."+t.className+"-text")&&i.container.getElement("."+t.className+"-text").addClassName("hidden")):t.buildText(),n.unmask(i.container),t.setFailed(!1))},a=setTimeout((function(){s(),n.unmask(i.container),t.buildText(),t.setFailed(!0)}),this.options.timeout);addEventListener("message",o)},getFailed:function(){try{return"true"===sessionStorage.getItem(i)}catch(t){return e.log(t),!1}},setFailed:function(t){var n=t?"true":"false";try{sessionStorage.setItem(i,n)}catch(t){e.log(t)}}})})),define("DS/i3DXCompass/View/CheckOutView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Mask","DS/i3DXCompassServices/i3DXCompassPubSub"],(function(e,t,n,i,s){"use strict";return t.extend({tagName:"div",className:"check-out",setup:function(e){return e.buyComponent&&(this.buyComponent=e.buyComponent),this},_buildIcon:function(){var t=this.model.get("brand");return t&&(t=t.toUpperCase()),0===this.model.get("id").indexOf("RAP-")&&(t="DEFAULT_CUSTOM"),"3DEXP PLATFORM"===t&&(t="PLATFORM"),n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.svg",t||"PLATFORM"))},_getTemplate:function(){return[{tag:"mpf-buy-wrapper"}]},render:function(){this.container.setContent(this._getTemplate());var e={product:this.model.get("externalIds")||this.model.get("acronym")},t=this.container.getElement("mpf-buy-wrapper");return i.mask(t),require(["DS/MPFClickAndBuyComponent/ClickAndBuyWrapper"],(function(n){n.getClickAndBuyComponent(e).then((function(e){e.addEvent("addAdditionalItems",(function(){s.publish("navigateToHome")})),t.setContent(e.render()),i.unmask(t)}),(function(){t.setContent("Contact us")}))})),this}})})),define("DS/i3DXCompass/Controls/Message",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Spinner"],(function(e,t,n){"use strict";return t.extend({options:{className:"compass-overlay"},init:function(){var t=this.elements={text:e.createElement("div",{class:this.options.className+"-text"}),spinner:new n({className:this.options.className+"-spinner compass-spinner",animate:!1})};t.container=e.createElement("div",{class:this.options.className,styles:{display:"none"},html:[t.text,t.spinner]})},show:function(e,t){var n=this.elements;window.clearTimeout(this.timeoutVar),n.text.setContent(e||""),t?n.spinner.show():n.spinner.hide(),n.container.show()},hide:function(e){e?this.timeoutVar=window.setTimeout(this.hide.bind(this),e):this.elements.container.hide()}})})),define("DS/i3DXCompass/EventManager",["UWA/Core","UWA/Class","UWA/Class/Events"],(function(e,t,n){"use strict";return new(t.extend(n))})),define("DS/i3DXCompass/X3DContent",["UWA/Core"],(function(e){"use strict";var t={},n={};return t.getX3DContent=function(){return e.log("get X3DContent"),e.log("Content = "+JSON.stringify(n)),n},t.setX3DContent=function(t){e.log("set X3DContent"),n=t},t})),define("i3DXCompass/X3DContent",["DS/i3DXCompass/X3DContent"],(function(e){"use strict";return e})),define("DS/i3DXCompass/CacheManager",["UWA/Core","UWA/Class","UWA/Utils","UWA/Storage","UWA/Storage/Adapter/Dom"],(function(e,t,n,i){"use strict";var s,o,a=new i({adapter:"Dom",database:"3DCompass"});return t.singleton({setup:function(e,t){s=e,e||(a=null),o=t},setRequestCache:function(e,t){this.setCache(e.url+JSON.stringify(e.data),t)},getRequestCache:function(e){return this.getCache(e.url+JSON.stringify(e.data))},setCache:function(e,t,i){if(a)try{i?(t.cachedChecksum=this._getKeyUID(e+i),a.set(n.getCheckSum(e),t)):a.set(this._getKeyUID(e),t)}catch(e){a=null}},getCache:function(e,t,i){var s=null;if(t||(t=864e5),"dsrtv:"===window.location.protocol&&(t=null,i=null),a)try{i?(s=a.get(n.getCheckSum(e),t))&&s.cachedChecksum!==this._getKeyUID(e+i)&&(s=null):s=a.get(this._getKeyUID(e),t)}catch(e){a=null}return s},_getKeyUID:function(e){var t=n.getCheckSum(e+o+s+"420.1.0");if("dsrtv:"===window.location.protocol){var i=e.split("/");i.length>0&&(t=i[i.length-1])}return t},_getUser:function(){return s}})})),define("DS/i3DXCompass/View/SuggestionListView",["UWA/Core","UWA/Class/View","DS/UIKIT/Spinner"],(function(e,t,n){"use strict";var i={className:"suggestion-section",suggestionsRendered:!1,attachEvents:function(){var e=this.collection;e.addEvent("onRemove",this.removeSug.bind(this)),e.addEvent("onMultipleAdd",this.renderSuggestions.bind(this))},render:function(){var t=this.elements.loader=e.createElement("div",{class:"compass-loading",html:new n({visible:!0,className:"compass-spinner"})});return this.suggestionsRendered&&t.hide(),this.container.addContent(t),this},renderSuggestions:function(){var t=this.elements,n=this.collection.map((function(e){return{tag:"li",class:"suggestion-item",html:[{tag:"img",class:"suggestion-item-icon",src:e.get("thumbnailUrl")},{class:"suggestion-item-description",html:[{class:"suggestion-item-title",text:e.get("title")},{class:"suggestion-item-baseline",text:e.get("baseline")}]}],"data-id":e.get("productId")}})),i=t.list;return i||(i=t.list=e.createElement("ul",{class:"suggestion-list"}).inject(this.container)),i.setContent(n),this.unmask(),this.attachEvents(),this.suggestionsRendered=!0,this},refresh:function(){var e=this;this.suggestionsRendered&&(this.mask(),this.collection.fetch({onComplete:function(){e.unmask()},onFailure:function(){e.unmask()}}))},removeSug:function(e){var t=this.getSugElmt(e);t&&t.destroy()},getSugElmt:function(t){return this.getElement(e.String.format('[data-id="{0}"]',t.id))},mask:function(){var e=this.elements.loader;e&&e.show()},unmask:function(){var e=this.elements.loader;e&&e.hide()}};return t.extend(i)})),define("DS/i3DXCompass/MarketingData",[],(function(){"use strict";return{services:{X3DENGI_AP:{id:"X3DENGI_AP",title:"ENGINEERING",description:"Engineering As a Service",icon:"v3/Services_images/620x120_Engineering_Services_Mobile.jpg"},X3DPRIN_AP:{id:"X3DPRIN_AP",title:"MAKE",description:"Manufacturing As a Service",icon:"v3/Services_images/620x120_Make_Services_Mobile.jpg"},X3DPSLY_AP:{id:"X3DPSLY_AP",title:"PART SUPPLY",description:"Components As a Service",icon:"v3/Services_images/620x120_Part_Supply_Services_Mobile.jpg"},X3DINNO_AP:{id:"X3DINNO_AP",title:"Virtual Twin Experiences",description:"Business Transformation As a Service",icon:"v3/Services_images/620x120_Business_Experiences_Mobile.png"}}}})),define("DS/i3DXCompass/Model/Install",["UWA/Core","UWA/Class/Model","UWA/Class/Collection"],(function(e,t,n){"use strict";var i=t.extend({idAttribute:"appsId"}),s=n.extend({model:i});return t.extend({isCompatible:function(e){return!0},isAvailableForInstallation:function(){return 5!==this.get("status")&&6!==this.get("status")},setup:function(){this._apps=new s(this.get("apps")),this.addEvent("onChange:apps",(function(e,t){this._apps.set(t)}))},_extractVersion:function(e){var t=e?e.split("."):[];return{release:t.length>0?parseInt(t[0],10):0,fd:t.length>1?parseInt(t[1],10):0,pinpoint:t.length>2?parseInt(t[2],10):0}},_isOptionalContent:function(){return"CNT"===this.get("type")},_containsPinpoint:function(){var e=this._extractVersion(this.get("SPlevel")),t=this._extractVersion(this.get("targetSPLevel"));return e.pinpoint>0||t.pinpoint>0},_isSameFD:function(){var e=this._extractVersion(this.get("SPlevel")),t=this._extractVersion(this.get("targetSPLevel"));return e.fd===t.fd},_isSameRelease:function(){var e=this._extractVersion(this.get("SPlevel")),t=this._extractVersion(this.get("targetSPLevel"));return e.release===t.release},getInstallationMode:function(){var e="Maintenance",t=this._extractVersion(this.get("SPlevel")),n=this._extractVersion(this.get("targetSPLevel"));return t&&n&&this._isSameRelease()&&!this._isSameFD()&&this._containsPinpoint()&&(e="Both"),e}})})),define("DS/i3DXCompass/Model/Product",["UWA/Core","UWA/Class/Model"],(function(e,t){"use strict";return t.extend({})})),define("DS/i3DXCompass/View/PortfolioSectionView",["UWA/Core","UWA/Class/View"],(function(e,t){"use strict";return t.extend({tagName:"portfolio-section",render:function(){return this.options.title&&this.container.addClassName("has-title"),this.options.background&&this.container.addClassName("has-background"),this.options.subTitle&&this.container.addClassName("has-subtitle"),this.container.setContent(this._buildContent()),this},_buildContent:function(){var e=this.options.title,t=this.options.subTitle,n=this.options.content,i=[];return e&&i.push({tag:"h2",class:this.tagName+"-title font-3dslight",text:e}),t&&i.push({class:this.tagName+"-subtitle font-3dslight",text:t}),n&&i.push(n),{tag:"portfolio-section-content",html:i}}})})),define("DS/i3DXCompass/Model/Suggestion",["UWA/Core","UWA/Utils","UWA/Class/Model"],(function(e,t,n){"use strict";return n.extend({idAttribute:"productId",setup:function(){}})})),define("DS/i3DXCompass/Model/PlatformModel",["UWA/Core","UWA/Class/Model"],(function(e,t){"use strict";return t.extend({setup:function(t){return e.log("This model has been initialized."),this}})})),define("DS/i3DXCompass/TopBarManager",["UWA/Core"],(function(e){"use strict";var t=e.i18n,n={topBarProxy:null,menu:null,events:{},initialized:!1,MenuItem:null,_roles:null,init:function(e){require(["DS/TopBarProxy/TopBarProxy","DS/TopBarProxy/Menu","DS/TopBarProxy/MenuItem"],(function(i,s,o){n.menu=new s,n.topBarProxy=new i({id:e.topBarId}),n.initialized=!0,n.topBarProxy.addContent({profile:[new o({label:t("myroles"),submenu:n.menu,multiSelect:!0})]}),n.events.onRoleChange=e.onRoleChange,n.MenuItem=o,n._roles&&n.setRoles(n._roles)}))},setRoles:function(e){var i,s=n.MenuItem;n.initialized?(n._roles&&(n._roles=null),i=e.map((function(e){return new s({roleId:e.get("id"),label:e.get("title"),selected:e.get("active"),selectable:!0,onExecute:function(e){n.events.onRoleChange(e.get("roleId"),!e.get("selected"))}})})),e.length>1?(n.topBarProxy.setContent({profile:[new s({label:t("myroles"),submenu:n.menu,multiSelect:!0})]}),n.menu.reset(),n.menu.add(i)):(n.topBarProxy.empty(),n.menu.reset())):n._roles=e},removeRole:function(e){var t=n.getRoleItem(e);t&&(n.menu.remove(t),n.menu.length<=1&&n.topBarProxy.empty())},setChecked:function(e){var t=n.getRoleItem(e);t&&t.set("selected",e.get("active"))},containsRole:function(e){return!!n.getRoleItem(e)},getRoleItem:function(e){if(n.menu)return n.menu.findWhere({roleId:e.id})}};return n})),define("DS/i3DXCompass/Tools",["UWA/Core","UWA/Element","UWA/Utils","DS/i3DXCompass/EventManager"],(function(e,t,n,i){"use strict";var s,o,a=!1,l=!1,r=null,c=!1,d=[],p=!0,u=null,m="en",h={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},f={os:null,browser:null,FEATURE_BETA_ACTIVATION:{},detectOs:function(){var e=f.getUserAgent().toLowerCase();e.indexOf("windows")>-1?f.os=e.indexOf("windows nt 10")>-1?"windows10":"windows":e.match(/(ipad|iphone|ipod)/g)?f.os="ios":e.indexOf("mac")>-1?f.os="macos":e.indexOf("android")>-1?f.os="android":e.indexOf("linux")>-1?f.os="linux":f.os="unknown"},isLinuxOs:function(){return"linux"===this.getOs()},isIphone:function(){var e=f.getUserAgent().toLowerCase();return/iphone/i.test(e)},_detectBrowser:function(){var e=n.Client.Engine;window.navigator.userAgent.indexOf("Edge")>-1?f.browser="edge":e.ie?f.browser="internet explorer":f.browser=e.name},_fetchOsDistribution:function(){var e=f.getUserAgent().toLowerCase().match(/.* (\(.*)\) .*/m),t=null;if(e.length>1){var n=e[1].split(";");n.length>1&&-1===n[1].indexOf("linux")&&(t=n[1].trim())}return t},getOs:function(){return f.os||f.detectOs(),f.os},getOsDistribution:function(){return f.osDistribution||(f.osDistribution=f._fetchOsDistribution()),f.osDistribution},getBrowser:function(){return f.browser||f._detectBrowser(),f.browser},getMajorIosVersion:function(){if(!f.iosVersion&&/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);f.iosVersion=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)],e.log("iOS version = "+f.iosVersion[0]+"."+f.iosVersion[1]+"."+f.iosVersion[2])}return f.iosVersion&&f.iosVersion[0]},getUserAgent:function(){return navigator.userAgent},arrayFind:function(e,t,n){var i;return e.some((function(e){if(t.call(n,e))return i=e,!0})),i},forEachOwnProperty:function(e,t,n){Object.keys(e).forEach((function(i){t.call(n,e[i],i)}))},pushUnique:function(e,t){-1===e.indexOf(t)&&e.push(t)},unshiftUnique:function(e,t){-1===e.indexOf(t)&&e.unshift(t)},moveToFirst:function(e,t){var n=e.indexOf(t);-1!==n&&e.unshift(e.splice(n,1)[0])},includes:function(e,t){return t.every((function(t){return-1!==e.indexOf(t)}))},intersection:function(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))},removeDoublons:function(e){var t=[];return e.forEach((function(e){f.pushUnique(t,e)})),t},customLaunchWebApp:function(){return!1},enableWidgetDrag:function(){},instanciateWidget:function(){},onRoleChange:function(){},setCustomFunction:function(e,t){["customLaunchWebApp","enableWidgetDrag","instanciateWidget","onRoleChange"].indexOf(e)>-1&&(f[e]=t)},disableSelect:function(){t.setStyles.call(document.body,{"-webkit-touch-callout":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})},enableSelect:function(){t.setStyles.call(document.body,{"-webkit-touch-callout":"","-webkit-tap-highlight-color":"","-webkit-user-select":"","-moz-user-select":"","-ms-user-select":"","user-select":""})},isOverElement:function(e,t,n){return e.x>t.x&&e.x<t.x+n.width&&e.y>t.y&&e.y<t.y+n.height},isSameApp:function(e,t){return!!n.matchUrl(e,t)&&(n.parseUrl(e).directoryPath||"/").split("/")[1]===(n.parseUrl(t).directoryPath||"/").split("/")[1]},isBase64:function(e){return new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$").test(e)},isBase64Image:function(e){return e.indexOf("data:image")>-1&&e.indexOf(";base64,")>-1&&(e=e.split(";base64,")[1]),this.isBase64(e)},htmlEntityDecode:function(t){return e.createElement("div",{html:t}).getText()},now:Date.now||function(){return(new Date).getTime()},debounce:function(e,t,n){var i,s,o,a,l,r=function(){var c=f.now()-a;c<t&&c>=0?i=setTimeout(r,t-c):(i=null,n||(l=e.apply(o,s),i||(o=s=null)))};return function(){o=this,s=arguments,a=f.now();var c=n&&!i;return i||(i=setTimeout(r,t)),c&&(l=e.apply(o,s),o=s=null),l}},compareVersion:function(e,t){var n,i,s;for(e=e.split("."),t=t.split("."),i=Math.min(e.length,t.length),n=0;n<i;n++)if(0!==(s=parseInt(e[n],10)-parseInt(t[n],10)))return s;return e.length-t.length},i18n:function(t){var n=e.i18n(t);return n&&(n=n.replace("3DEXPERIENCE","<b>3D</b>EXPERIENCE")),n},isSmartphone:function(){return n.Client.getSize().width<959&&n.Client.getSize().height<570},isCarouselSmallSize:function(){return n.Client.getSize().width<1292&&n.Client.getSize().width>691},isValidMarketAppUrl:function(e){return/^[a-z]*:\/\/\?-.*/.test(e)},isOpenFullSize:function(){return this.isCompassV2()?n.Client.getSize().width<959:n.Client.getSize().width<641},isBetaModeActivated:function(t){var n=!1,i="3DCompass-"+t;if(void 0===this.FEATURE_BETA_ACTIVATION[i])try{n=!!e.is(localStorage.getItem(i)),this.FEATURE_BETA_ACTIVATION[i]=n}catch(t){e.log(t)}else n=this.FEATURE_BETA_ACTIVATION[i];return n},setCompassVersion:function(e){s=e||"V1"},isCompassV2:function(){return"V2"===this.getCompassVersion()},isDisableGoBack:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("role=true")>-1||window.location.pathname.indexOf("rootroles")>-1},isCompassV3:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3")>-1||"V3"===this.getCompassVersion()||"V32"===this.getCompassVersion()||"V34"===this.getCompassVersion()},isCompassV32:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3.2")>-1||window.location.search.toLowerCase().indexOf("3dcompass_v3.4")>-1||"V32"===this.getCompassVersion()||"V34"===this.getCompassVersion()},isCompassV34:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3.4")>-1||"V34"===this.getCompassVersion()},isCompassV34_debug:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3.4")>-1||"V34"===this.getCompassVersion()},isPlaygroundVisible:function(){return!(window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("playground=false")>-1)},isCompassV3MainStream:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3_main")>-1},isCompassV3ActiveGroup:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3_activeGroup")>-1},isSupportQuickLink:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3_supportquicklink")>-1||!0===a},isSupportAddToFavorite:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_addtofavorite")>-1},isSupportQuickLinkFixMobileApp:function(){return document.querySelector("body.support-quick-link-fix-mobile-app")||!0===l},getCompassVersion:function(){return s},setCurrentQuadrant:function(e){o=e||this.isCompassV3()?e:"north"},setSupportQuickLink:function(e){a="V2"===e},setSupportQuickLinkFixMobileApp:function(e){l=e},getCurrentQuadrant:function(){return o},setShowCustom:function(e){p=e},getShowCustom:function(){return p||window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcp_show_custom")>-1},setIsMultiTenant:function(e){r=e},getIsMultiTenant:function(){return r},setTenantList:function(e){d=e},getTenantList:function(){return d},setPortfolioUrl:function(e){u=e},setBusinessExperienceAvailable:function(e){c=e},isBusinessExperienceAvailable:function(){return c},getPortfolioAssetTemplateUrl:function(t,n){if(u&&""!==u){if(-1===n.indexOf(u))return u+e.String.format("/assets/{0}/{1}",t,n)}else if(this.isCompassV34_debug()&&-1===n.indexOf("https://my3dexperience-portfolio.3dexperience.3ds.com"))return e.String.format("https://my3dexperience-portfolio.3dexperience.3ds.com/public/{0}/{1}",t,n);return n},getPortfolioApiTemplateUrl:function(t){return u&&""!==u?u+e.String.format("/data/{0}_{1}.json",t,m):e.String.format("https://my3dexperience-portfolio.3dexperience.3ds.com/api/v1/categories/type/{0}",t)},getPortfolioApiTemplateUrlNoNLS:function(t){return u&&""!==u?u+e.String.format("/data/{0}.json",t):e.String.format("https://my3dexperience-portfolio.3dexperience.3ds.com/api/v1/categories/type/{0}",t)},setLang:function(e){m=e},getAddinModeURL:function(){var e="";return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("addinmode=catiav5")>-1?e={value:"catiav5"}:window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("addinmode=solidworks")>-1?e={value:"solidworks"}:window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("addinmode=xvl")>-1&&(e={value:"xvl"}),e},manageSeoTags:function(e,t){var n=null,i=null,s=null;if(e){n=e.get?e.get("title"):e.title,(i=e.get?e.get("tagLine"):e.tagLine)||(i=e.get?e.get("description"):e.description)&&(i=i.substring(0,150));var o=e.collection&&e.collection.url;"function"==typeof o&&(o=o()),-1===(s=o?(this.getFullRootPath()+"rootroles/"+(t||this.toSeoUrl(n))).replace(/\/\//g,"/"):window.location.href.replace(window.location.search,"")).indexOf("://")&&(s=s.replace(":/","://"))}require(["DS/PlatformAPI/PlatformAPI"],(function(e){e.publish("mde.navigation.update.seo",{title:n,description:i,canonical:s})}))},publishFullScreenSeo:function(){require(["DS/PlatformAPI/PlatformAPI"],(function(e){e.publish("mde.navigation.update.seo",{fullPage:!0})}))},getFullRootPath:function(){return window.location.origin+this.getRootPath()},getRootPath:function(){return window.location.pathname.split("compass-world")[0]+"/compass-world/"||"/compass-world/"},toSeoUrl:function(e){var t=e.toString();return"function"==typeof t.normalize&&(t=t.normalize("NFD")),t.replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").toLowerCase().replace(/&/g,"-and-").replace(/[^a-z0-9\-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")},hasWebpSupport:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0==e.toDataURL("image/webp").indexOf("data:image/webp")},_supportBigUrl:function(e){var t=this.getBrowser();return!(("internet explorer"===t||"edge"===t)&&e.length>2045)},dispatchLauncherErrorEvent:function(e){switch(e.returnCode){case 100:i.dispatchEvent("onShowMessage",f.i18n("launcherbusyretry"));break;case 141:i.dispatchEvent("onShowMessage",f.i18n("errorcode141"));break;case 152:i.dispatchEvent("onShowMessage",f.i18n("installationerroraccess"));break;case 155:i.dispatchEvent("onShowMessage",f.i18n("installationerrordiskspace"));break;case 157:i.dispatchEvent("onShowMessage",f.i18n("installationcancelled"));break;case 225:i.dispatchEvent("onShowMessage",f.i18n("errorcode225"));break;case 227:i.dispatchEvent("onShowMessage",f.i18n("errorcode227"));break;default:i.dispatchEvent("onShowMessage",f.i18n("installationerror"))}i.dispatchEvent("onHideMessage",5e3)},escape:function(e){var t;for(t in h)h.hasOwnProperty(t)&&e&&(e=e.replace(new RegExp(t,"g"),h[t]));return e},unescape:function(e){var t;for(t in h)h.hasOwnProperty(t)&&e&&(e=e.replace(new RegExp(h[t],"g"),t));return e},getTextFromHtml:function(t){var n=document.createElement("div");return e.is(t,"string")&&""!==t&&(t=this.unescape(t),t=this.escape(t),n.innerHTML=t,t=n.childNodes[0].nodeValue),t}};return f})),define("DS/i3DXCompass/Feature",["UWA/Core","DS/i3DXCompass/Tools","DS/i3DXCompass/CacheManager"],(function(e,t,n){"use strict";var i,s,o=!1,a=!1,l=!1,r={},c=!1,d=!1,p=!1,u=null,m=null,h=!0,f=!1,g=!1,v={compassPanelSize:function(){},setCloud:function(e){d=e},getCompassId:function(){return null},enableBetaShoppingCart:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("feature-shopping-cart")>-1},supportPushState:function(){return t.isSupportQuickLink()||!e.is(n._getUser())&&!v.isMobileAppEnvironment()||window.location.href.indexOf("-3dprint.")>-1||window.location.href.indexOf("-ifweloop.")>-1},setNoPushStateNavigation:function(){p=!0},setExtraWhereUsedRoles:function(e){i=e},getExtraWhereUsedRoles:function(){return i},setRequestRole:function(e){h=e},canRequestRole:function(){return h},needPushState:function(){return!p||(p=!1,!1)},isBuyEnabledWorld:function(e){return"WORLD"===e&&v.isBuyEnabled()},isBuyEnabled:function(){return!v.isMobileAppEnvironment()&&!v.isOnPremiseEnvironment()},isOnPremiseEnvironment:function(){return!d},isMobileAppEnvironment:function(){return window.ds&&"MOBILE"===window.ds.env&&!0!==window.ds.isDesktopApp},isMobileAppEnvironnementV2:function(){return this.isMobileAppEnvironment()&&this.isCompassStandalone()},isCompassStandalone:function(){return document.body.hasClassName("compass-standalone-v3")},isNativeApplicationEnvironment:function(){return"undefined"!=typeof compassRichWithCef&&compassRichWithCef},isNativeApplicationOfflineEnvironment:function(){return"dsrtv:"===window.location.protocol},compassPanelFullSize:function(){v.compassPanelSize("FULL_WIDTH"),t.publishFullScreenSeo()},compassPanelRestoreDefaultSize:function(){v.compassPanelSize("DEFAULT")},enableBetaUnlockComingSoon:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("iscomingsoonunlocked")>-1},enableMockFUN105351:function(){return window.location.search.indexOf&&window.location.search.indexOf("enableMockFUN105351")>-1},enableMockFUN125890:function(){return window.location.search.indexOf&&-1===window.location.search.indexOf("enableMockFUN125890=false")&&!v.isOnPremiseEnvironment()&&!v.isNativeApplicationEnvironment()},setLockInstallation:function(e){o=e},isLockInstallation:function(){return o},setLockInstallationUpdate:function(e){a=e},setLockUninstallationUpdate:function(e){l=e},isLockInstallationUpdate:function(){return a},isLockUninstallation:function(){return l},isCurrentPlatform:function(){return!this.activeDropDownRoleAndAppsDisplayed()||!(!this.getPreferences()||"currentPlatform"!==this.getPreferences().forceSelectTenant)},setPreferences:function(e){r=e&&"forceSelectTenant"===e.forceSelectTenant?{forceSelectTenant:"allPlatform"}:e},setUpdatedPreferences:function(e){c=e},getUpdatedPreferences:function(){return c},isCurrentPathnamePortfolioRoot:function(e){return null!==e.match(/welcome\/[a-z/]*compass-world[/]*$/g)},getPreferences:function(){return r||{}},setExclusionsCollection:function(e){s=e},getExclusionsCollection:function(){return s},isDelegatedToRichClientLaunchApp:function(e){return v.isNativeApplicationEnvironment()&&(!e||"3dexperience.exe"===e.toLowerCase()||"3dexperience"===e.toLowerCase())},setPortolioUrlLocale:function(e){u=e},getPortfolioUrlLocale:function(){return u},setContactFormConfiguration:function(e){m=e},getContactFormConfiguration:function(){return m},isSeoActivated:function(){return!0},isContactFormActivated:function(){return!0},isSolutionDetailActivated:function(){return!0},isFastPortfolioNavigation:function(){return document.location.pathname.indexOf("/offers")>-1||document.location.pathname.indexOf("/rootroles")>-1},isPortfolioNavigation:function(){return document.location.pathname.indexOf("/compass-world/")>-1},isCollaborativeBusinessInnovatorNavigation:function(){return document.location.pathname.indexOf("/collaborative-business-innovator")>-1},is3dswymerNavigation:function(){return document.location.pathname.indexOf("/3d-swymer")>-1||document.location.pathname.indexOf("/3dswymer")>-1},getBrandFromPacking:function(){return window.location.search.indexOf&&window.location.search.indexOf("getBrandFromPacking")>-1},isBusinessExperienceV3Activated:function(){return window.location.search.indexOf&&window.location.search.indexOf("isBusinessExperienceV3")>-1},getIsAlreadyDisplayedCEFUpdateModal:function(){return f},setIsAlreadyDisplayedCEFUpdateModal:function(e){f=e},isSourceForLaunchAppEnabled:function(){return window.location.search.indexOf&&window.location.search.indexOf("activeSourceForLaunch=true")>-1},activeDropDownRoleAndAppsDisplayed:function(){return window.location.search.indexOf&&window.location.search.indexOf("activeDropDownRoleAndAppsDisplayed=true")>-1},setLinuxCompatibleEnv:function(e){g=!!e},isLinuxCompatibleEnv:function(){return g},isInstallationsCanBeProposed:function(){return!t.isLinuxOs()||this.isLinuxCompatibleEnv()}};return v})),define("DS/i3DXCompass/UsageTracker",["UWA/Core","DS/Usage/TrackerAPI","DS/i3DXCompass/Tools"],(function(e,t,n){"use strict";var i="";return{_IDS:{compass:{quadrant:{north:"compass.quadrant.north",east:"compass.quadrant.east",south:"compass.quadrant.south",west:"compass.quadrant.west",play:"compass.quadrant.play"},cross:"compass.cross",role:"compass.role",roleFavorite:"compass.role.favorite",app:"compass.app",appFavorite:"compass.app.favorite",section:"compass.section"}},inc:function(e,t,n,i){},getCompassVersion:function(e){return""===i&&(i=n.getCompassVersion()),i},clickQuadrant:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickQuadrant",persDim:{pd1:e.quadrant}})},clickApp:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickApp",persDim:{pd1:e.quadrant,pd2:e.appId,pd3:e.appName}})},clickCockpitByRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickCockpitByRole",persDim:{pd2:e.cockpitId,pd3:e.cockpitName,pd4:e.platformId}})},clickBusinessCockpit:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickBusinessCockpit",persDim:{pd2:e.cockpitId,pd3:e.cockpitName,pd4:e.usageId}})},clickBusinessMethod:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickBusinessMethod",persDim:{pd2:e.businessMethodId,pd3:e.businessMethodName,pd4:e.usageId}})},clickBusinessRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickBusinessRole",persDim:{pd2:e.businessRoleId,pd3:e.businessRoleName}})},activateRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"activateRole",persDim:{pd1:e.quadrant,pd2:e.roleId,pd3:e.roleName,pd6:e.roleId,pd15:e.roleName}})},desactivateRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"desactivateRole",persDim:{pd1:e.quadrant,pd2:e.roleId,pd3:e.roleName,pd6:e.roleId,pd15:e.roleName}})},requestRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"requestRole",persDim:{pd1:e.quadrant||"",pd2:e.roleId||"",pd3:e.roleName||"",pd6:e.roleId||"",pd15:e.roleName||""}})},openSection:function(e){this.compassInc({eventCategory:"compass",eventAction:"openSection",persDim:{pd4:e.sectionName}})},closeSection:function(e){this.compassInc({eventCategory:"compass",eventAction:"closeSection",persDim:{pd4:e.sectionName}})},addRoleToFavorite:function(e){this.compassInc({eventCategory:"compass",eventAction:"addRoleToFavorite",persDim:{pd2:e.roleId,pd3:e.roleName,pd6:e.roleId,pd15:e.roleName}})},addAppToFavorite:function(e){this.compassInc({eventCategory:"compass",eventAction:"addAppToFavorite",persDim:{pd2:e.appId,pd3:e.appName}})},removeAppToFavorite:function(e){this.compassInc({eventCategory:"compass",eventAction:"removeAppToFavorite",persDim:{pd2:e.appId,pd3:e.appName}})},compassClose:function(){this.compassInc({eventCategory:"compass",eventAction:"compassClose"})},compassOpen:function(){this.compassInc({eventCategory:"compass",eventAction:"compassOpen"})},goHome:function(e){this.compassInc({eventCategory:"compass",eventAction:"goHome"}),e&&this.trackPageView(e)},clickBack:function(e){this.compassInc({eventCategory:"compass",eventAction:"goBack"}),e&&this.trackPageView(e)},trackPageView:function(t){var n=e.clone(t);this.compassInc({pageURL:t.pageURL||window.location.pathname,pageTitle:n.pageTitle,persDim:{pd2:n.id||"",pd3:n.title||"",pd16:n.parentPage||"",pd6:n.id||"",pd15:n.title||""}},!0)},compassInc:function(n,i){var s=e.clone(n)||{};s.persDim||(s.persDim={}),s.persDim.pd10=this.getCompassVersion(),s.appID="X3DMYAP_AP",s.scope="3DCompass",i?t.trackPageView(s):t.trackPageEvent(s)}}})),define("DS/i3DXCompass/View/DemoPassportLogin",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/UsageTracker"],(function(e,t,n,i){"use strict";return t.extend({tagName:"div",className:"demoPassportLogin",setup:function(e){return this},render:function(){console.log("render");return this.container.setContent(['<div class="image-passport"><img src="https://eu1-ds-iam.3dexperience.3ds.com/3DPassport/resources/img/3dexperience/3DEXLoginCompassTxt_BLUE@2X.png"></img></div>',{class:"passport-wrap",html:['<div class="header-passport">3DEXPERIENCE ID</div>','<div class="input-group"><span class="input-group-addon"><i class="fonticon fonticon-user"> </i></span><input type="text" value="fhu" class="form-control" placeholder="Email or username"></div>','<div class="input-group"><span class="input-group-addon"><i class="fonticon fonticon-lock"> </i></span><input type="password" value="********" class="form-control" placeholder="Password"></div>','<button class="btn btn-default login-form" type="submit">Log in</button>']}]),this.container.getElement(".login-form").addEvent("click",(function(){window.location.href=window.location.href+"/userId:"+Date.now()})),this}})})),define("DS/i3DXCompass/View/RoleView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature","DS/UIKIT/Tooltip"],(function(e,t,n,i,s,o){"use strict";var a=function(e){var t=e.get?e.get("title"):e.title;return(e.get?e.get("slug"):e.slug)||i.toSeoUrl(t)},l=function(e,t){var n="",o=s.getPortfolioUrlLocale()?s.getPortfolioUrlLocale()+"/":"";return e&&(n=e.map((function(e){return a(e)})).join("/")),t&&(n+="/"),(i.getRootPath()+o+n+(t?a(t):"")).replace(/\/\//g,"/")};return t.extend({tagName:"div",className:"item-view-v3",domEvents:{click:"_onItemClickOnce"},clickable:!1,_onItemClick:function(t){e.Event.stop(t),this.clickable&&(this.dispatchEvent("onItemClick",[this.model,this.container]),!0!==this.disableSeoTags&&s.supportPushState()&&s.needPushState()&&(history.pushState("",this.model.get("title"),l(this.options.navigation,this.model)),i.manageSeoTags(this.model,a(this.model))))},setup:function(e){var t;this.appsList=e.appsCollection,this.clickable=e.clickable,e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.container.setAttribute("data-id",this.model.get("acronym")||this.model.get("id")),this.container.setAttribute("data-search",this.model.get("title")),this.model.get("type")&&this.container.setAttribute("data-type",this.model.get("type")),this.options.navigation&&(t=l(this.options.navigation,this.model),this.container.setAttribute("href",t),this.container.setAttribute("data-seo",t)),this.clickable&&this.container.setAttribute("data-click",""),!0===this.options.disableSeoTags&&(this.disableSeoTags=this.options.disableSeoTags),this._onItemClick&&(this._onItemClickOnce=i.debounce(this._onItemClick,500,!0).bind(this))},render:function(){return this.container.setContent(this._getTemplate()),this},_getTemplate:function(){var t,s=null;this.options.defaultIcon?((t=this.model.get("brand")||this.options.brand)&&(t=t.toUpperCase()),-1===this.options.defaultIcon.indexOf("Role")&&(t=t?"_"+t:""),s=n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}",e.String.format(this.options.defaultIcon,t)))):((t=this.model.get("brand")||this.options.brand)&&(t=t.toUpperCase()),0===this.model.get("id").indexOf("RAP-")&&(t="DEFAULT_CUSTOM"),"3DEXP PLATFORM"===t&&(t="PLATFORM"),s=n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.svg",t||"PLATFORM")));return[{tag:"img",class:0===this.model.get("id").indexOf("RAP-")&&this.model.get("icon")&&-1===this.model.get("icon").indexOf("ROLE_64")?"custom-with-image":"",src:this.model.get("icon")&&this.model.get("icon").indexOf("ROLE_64")>-1||this.options.defaultIcon?s:this.model.get("icon"),events:{error:function(){this.hasAttribute("data-error")||(this.setAttribute("data-error",!0),this.src=n.getWebappsAssetUrl("i3DXCompass","v3.1/images/role/PLATFORM_Role.svg"))}}},{class:"icon-wrapper "+this.options.additionalClassNameImage,styles:{"margin-left":"-64","z-index":"1"},html:{class:"icon-group",html:this._buildGroup()}},{class:"item-view-content-wrapper title",text:i.getTextFromHtml(this.model.get("title"))}]},_buildGroup:function(){var t;this.options.defaultIcon?((t=this.model.get("brand")||this.options.brand)&&(t=t.toUpperCase()),-1===this.options.defaultIcon.indexOf("Role")&&(t=t?"_"+t:""),n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}",e.String.format(this.options.defaultIcon,t)))):((t=this.model.get("brand")||this.options.brand)&&(t=t.toUpperCase()),0===this.model.get("id").indexOf("RAP-")&&(t="DEFAULT_CUSTOM"),"3DEXP PLATFORM"===t&&(t="PLATFORM"),n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.svg",t||"PLATFORM")));return{class:"icon-group-item",styles:{position:"relative"},tag:"div",html:[this.options.showRequestIcon?{class:"role-icon-request fonticon "+(this.model.get("requested")?" fonticon-hourglass":" fonticon-check")+(this.model.get("requested")?" role-icon-requested":"")}:null]}}})})),define("DS/i3DXCompass/Collection/PortfolioCollection",["UWA/Core","DS/WAFData/WAFData","UWA/Data","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o,a){"use strict";var l="3dcompass-portfolio";return i.extend({fetchPromise:function(n){var i,s,o=this,a=e.is(this.url,"function")?this.url():this.url;return i=e.Promise.deferred(),n||(n={}),n.proxy=null,n.ajax=t.request,n.cache=6e4,n.onComplete=function(e,t,n){i.resolve(o),caches.open(l).then((function(e){var i=a+(o.data?JSON.stringify(o.data):"");return-1===Object.keys(n.responseHeaders).indexOf("Date")&&(n.responseHeaders.Date=new Date),e.put(i,new Response(JSON.stringify(t),{headers:n.responseHeaders}))}))},n.onFailure=function(){caches.open(l).then((function(e){var t=a+(o.data?JSON.stringify(o.data):"");return e.match(t)})).catch((function(e){i.reject(o)})).then((function(e){if(e)return e.json();i.reject(o)})).then((function(e){e&&((s=o.parse(e))?(o.set(s),o.dispatchEvent("onSync"),i.resolve(o)):i.reject(o))}))},o.fetch(n),i.promise},parse:function(e){return e.map((function(e){return e.brand&&"3DExp Platform"!==e.brand||(e.brand="PLATFORM"),e.iconTemplate?e.iconTemplate=s.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return s.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return s.getPortfolioAssetTemplateUrl(e.id,t)}))),e}))}})})),define("DS/i3DXCompass/View/AppView",["UWA/Core","UWA/Utils","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Tools","DS/UIKIT/Tooltip"],(function(e,t,n,i,s,o){"use strict";return n.extend({tagName:"div",className:"item-view-v3",domEvents:{click:"click","click .settings-img":"clickSettings"},clickable:!1,click:function(e){!e.target.hasClassName("settings-img")&&this.clickable&&this.dispatchEvent("onItemClick",[this.model,this.container])},clickSettings:function(t){this.clickable&&(e.Event.stop(t),this.dispatchEvent("onClickSettings",[this.model,this.container]))},setup:function(e){if(this.clickable=e.clickable,this.desableImgWidget=e.desableImgWidget,this.renderOnce=s.debounce(this.render,500,!0).bind(this),this.model&&this.model.addEvent("onChange:icon",this.renderOnce.bind(this)),e.filterUsage&&(this.filterUsage=e.filterUsage),this.model.isFamily&&this.model.isFamily()&&this.model.updateFamilyModel(),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.options.additionalAttribute)for(var t in this.options.additionalAttribute)this.options.additionalAttribute.hasOwnProperty(t)&&this.container.setAttribute(t,this.options.additionalAttribute[t]);this.container.setAttribute("data-id",this.model.get("id")),this.container.setAttribute("data-search",this.model.get("title")),this.model.get("quadrant")&&this.container.setAttribute("data-quadrant",this.model.get("quadrant")),this.clickable&&this.container.setAttribute("data-click",""),(this.model.isWidget&&this.model.isWidget()||this.model.isA2X&&this.model.isA2X())&&!this.desableImgWidget&&(s.enableWidgetDrag(this.container,this.model.toJSON()),this.container.addClassName("widget-item")),this.model.isFamily&&this.model.isFamily()&&this.model.getChildrenForFamilyApp().Widget&&(s.enableWidgetDrag(this.container,this.model.getChildrenForFamilyApp().Widget.toJSON()),this.container.addClassName("widget-item"))},_injectTooltip:function(){this.tooltip&&this.tooltip.destroy(),this.tooltip=this.model.get("tooltip")?new o({target:this.container.getElement(".item-view-content-wrapper"),delay:{show:300},body:this.createSpanTitleTooltip(this.model.get("tooltip")),position:"bottom left",className:"compass-small-tooltip"}):null},createSpanTitleTooltip:function(t){return e.createElement("span",{text:s.getTextFromHtml(t)})},render:function(){return this.container.setContent(this._getTemplate()),setTimeout(function(){this._lazyLoadImages(),this._injectTooltip()}.bind(this),0),this},_getTemplate:function(){var e={tag:"div",class:"img-unselect",styles:{"z-index":"2",height:"64px",width:"64px","background-size":"64px","background-repeat":"no-repeat","background-position":"50% 50%"},events:{error:function(){this.styles["background-image"]="url("+i.getWebappsAssetUrl("i3DXCompass","images/s.gif")+")"}}},t=this.model.get("icon")&&this.model.get("icon").indexOf("ROLE_64")>-1||this.options.defaultIcon?"":this.model.get("icon");return""===t&&(t=i.getWebappsAssetUrl("i3DXCompass","images/3DExpPlatform_Default.png")),"IntersectionObserver"in window?(e["data-src"]=t,e.loading="lazy",e.styles["background-image"]="url("+i.getWebappsAssetUrl("i3DXCompass","images/s.gif")+")"):e.styles["background-image"]="url("+t+")",[e,{class:"icon-wrapper "+this.options.additionalClassNameImage,styles:{position:"absolute","z-index":"1"},html:{class:"icon-group",html:this._buildGroup()}},{class:"item-view-content-wrapper title",text:this.model.get("title")},this.checkNeedSettingsMenu()?this.buildSettingsElmt():null]},checkNeedSettingsMenu:function(){var e=this,t=0;return this.model.get("usages")&&this.filterUsage&&this.filterUsage.indexOf&&this.model.get("usages").forEach((function(n){e.filterUsage.indexOf(n.id)>-1&&(t+=1)})),this.model.needSettingsMenu&&this.model.needSettingsMenu()&&this.clickable&&(!this.filterUsage||t>1)},buildSettingsElmt:function(){return e.createElement("div",{class:"settings-img fonticon fonticon-chevron-down"})},_buildGroup:function(){var t=null;if(this.options.defaultIcon)t=i.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}",this.options.defaultIcon));else{var n=this.model.get("brand")||this.options.brand;t=i.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.svg",n||"PLATFORM"))}var s={tag:"img",events:{error:function(){this.src=i.getWebappsAssetUrl("i3DXCompass","images/3DExpPlatform_Default.png")}}},o=!this.model.get("icon")&&t||this.model.get("icon").indexOf("ROLE_64")>-1||this.options.defaultIcon?t:this.model.get("icon");return""===o&&(o=i.getWebappsAssetUrl("i3DXCompass","images/3DExpPlatform_Default.png")),s["data-src"]=o,s.loading="lazy",{class:"icon-group-item",styles:{position:"relative"},tag:"div",html:[this.model.get("granted")||this.model.get("buy")?null:{class:"icon-request",tag:"img",src:i.getWebappsAssetUrl("i3DXCompass","v3.1/images/Request_Badge.png")},!this.model.get("granted")&&this.model.get("buy")?{class:"icon-request",tag:"img",src:i.getWebappsAssetUrl("i3DXCompass","v3.1/images/Buy_Badge.png")}:null]}},_lazyLoadImages:function(){const e=this.container.getElements('[loading="lazy"]');if("IntersectionObserver"in window){const t=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting||void 0===e.isIntersecting){const t=e.target;"lazy"===t.getAttribute("loading")&&("img"===t.getTagName()?t.src=t.dataset.src:t.style["background-image"]="url("+t.dataset.src+")",t.setAttribute("loading","done"),t.removeAttribute("data-src"))}}))}));e.forEach((function(e){t.observe(e)}))}else e.forEach((function(e){"img"===e.getTagName()?e.src=e.dataset.src:e.style["background-image"]="url("+e.dataset.src+")"}))}})})),define("DS/i3DXCompass/Controls/BusinessExperienceSettings",["UWA/Core","DS/UIKIT/DropdownMenu","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature","DS/i3DXCompass/EventManager","UWA/Utils","UWA/Class/Model"],(function(e,t,n,i,s,o,a){"use strict";var l=e.i18n;return t.extend({init:function(e){var t,n=this;n.target=e.target,n.filterUsage=e.filterUsage,e.target.getOffsets(),n.target.addClassName("active"),this.model=e.model,t={items:this.getItems(),renderTo:e.renderTo||document.body,target:n.target,events:e.events},this._parent(t),this.trigger=e.trigger},buildSkeleton:function(){this._parent(),this.elements.container.addClassName("compass-app-settings")},getItems:function(){var e,t=this,n=[],i=[],s=!1;return this.model&&this.model.get("usages")&&this.model.get("usages").length>0?n=this.model.get("usages"):this.model&&this.model.get("platforms")&&this.model.get("platforms").length>1&&(n=this.model.get("platforms"),s=!0),n.forEach((function(n){(t.filterUsage&&t.filterUsage.length>0&&t.filterUsage.indexOf(n.id)>-1||!t.filterUsage)&&(e="",t.model.is_X3DBEMA_AP()&&t.model.get("appModel")&&t.model.get("appModel").get("platforms")&&(e=new a(t.model.get("appModel").get("platforms").detect((function(e){return e.id===n.id}))),s=!0),i.push({id:s&&n.get?n.get("platformId"):e?e.get("id"):n.id,text:s&&n.get?n.get("displayName"):e?e.get("name"):n.title,selected:s&&n.get?t.model.preferedUsageId===n.get("platformId"):e?t.model.preferedUsageId===e.get("id"):t.model.preferedUsageId===n.id,handler:function(e){t.launchUsage(t.model,n)}}))})),i},updateItem:function(e){this._parent(e)},launchUsage:function(t,n){var i=e.String.format(l("Launching {0}"),this.model.get("title"));s.dispatchEvent("onShowMessage",[i,5e3]),t.isDashboard()?this.model.savePreferedUsageId(n.get("platformId")):t.launchBusinessExperience(n),this._hide()},_hide:function(){this.hide(),this.destroy(),this.target.removeClassName("active")},onClickOutside:function(e){var t=e.target;t&&t===this.trigger&&e.stopPropagation(),this._hide()}})})),define("DS/i3DXCompass/View/BusinessMethodsListView",["UWA/Class/View","DS/i3DXCompass/Tools","DS/i3DXCompass/View/AppView","DS/i3DXCompass/Controls/BusinessExperienceSettings","UWA/Utils/Client","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(e,t,n,i,s,o){"use strict";return e.extend({tagName:"div",className:"items-view-business-methods",setting:"",setup:function(e){return e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.renderOnce=t.debounce(this.render,50,!0).bind(this),e.filterUsage&&(this.filterUsage=e.filterUsage),this.collection&&(this.collection.addEvent("onAdd",this.renderOnce.bind(this)),this.collection.addEvent("onRemove",this.renderOnce.bind(this)),this.collection.addEvent("onChange",this.renderOnce.bind(this)),this.collection.length>0&&this.renderOnce()),this},buildSetting:function(e,t){var n=t.getElement(".settings-img").getOffsets(),o=s.getScrolls();this.setting=new i({model:e,target:t.getElement(".settings-img"),renderTo:document.body,filterUsage:this.filterUsage,position:{x:n.x-o.x,y:n.y-o.y+25}})},render:function(){var e=this;if(this.collection&&this.collection.forEach){var t=[],i=this.collection.size();this.collection.forEach((function(s,a){o.getAppInfo({appId:s.get("appId"),onComplete:function(o){i--,o.error||(s.updateModel(o),t[a]=new n({model:s,clickable:!0,additionalClassName:"app-item",filterUsage:e.filterUsage,additionalClassNameImage:o.brand?"is-"+o.brand.replace(" ","-"):"",events:{onHide:function(){e.setting&&e.setting.hide(),e.setting=""},onItemClick:function(t){t.launchBusinessExperience(t.getFistUsage(e.filterUsage))},onClickSettings:function(t,n){e.setting&&e.setting._hide(),e.setting="",e.buildSetting(t,n),e.setting.show()}}}).render()),0===i&&e.container.setContent(t.map((function(e){return e})))}})})),this.collection.length>0&&this.dispatchEvent("onShowBusinessMethodsSection")}return this}})})),define("DS/i3DXCompass/Controls/ScrollAccordion",["UWA/Core","UWA/Utils/Client","UWA/Event","UWA/Element","UWA/Controls/Abstract","DS/i3DXCompass/Tools","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/UIKIT/SuperModal"],(function(e,t,n,i,s,o,a,l,r){"use strict";var c=o.i18n,d={defaultOptions:{className:"",sections:1,scrollable:!1,scrollSize:40},className:"compass-scroll-accordion",scrolled:0,sumHeight:0,containerHeight:0,scrollbarHeight:0,scrollMove:0,moved:!1,scrolling:!1,titleHeight:52,adjustDelay:300,adjustTimeoutId:null,fromAdjusScrolls:0,init:function(e){if(this._parent(e),e.data)e.sections!==e.data.length&&(this.options.sections=this.options.data.length);else{for(var t=e.sections-1,n=[];t>=0;t--)n.push({title:"",html:null,open:!0,visible:!0});this.options.data=n}this.sectionsByName={},this.buildSkeleton()},buildSkeleton:function(){var t,n,i,s,a,r,d,p,u,m,h,f,g=this,v=this.elements={container:e.createElement("div",{class:this.className+" smooth-scroll "+this.options.className}),wrapper:e.createElement("div",{class:this.className+"-wrapper"+("ios"===o.getOs()?" iosVersion":"")}),sections:[],sectionTitles:[],sectionContents:[],sectionContentWrappers:[]},C=0,y=this.options.sections,b=this.styles=[];for(h=e.createElement("div",{class:"delete-favorite",html:{tag:"span",class:"fonticon fonticon-trash"},events:{click:function(t){e.Event.stop(t),g._confirmModal()}}}),new l({position:"right",target:h,body:c("clickRemoveFavorite")});C<y;C++)f=(t=this.options.data[C]).parent?this.getParentElm(t.parent).elm:null,s=e.createElement("span",{class:this.className+"-section-title-icon "+("fonticon fonticon-"+t.icon||"")}),a=e.createElement("span",{class:this.className+"-section-title-text",text:t.title}),i=e.createElement("div",{class:this.className+"-section-title-wrapper"+(t.parent?" child":""),html:[s,a,{tag:"span",class:this.className+"-section-title-arrow fonticon fonticon-right-dir"},{tag:"span",class:this.className+"-section-title-arrow fonticon fonticon-down-dir"},"favorite"===t.id?t.html[0].collection.length>0?h:h.addClassName("hide"):""]}),u=v.sectionTitles.length,m=t.open?0:this.marginTopClosedSection(t),n=e.createElement("div",{class:this.className+"-section-title"+(t.icon?" has-icon":""),html:i,"data-sectionnum":u}),t.parent&&n.setAttribute("data-parent",t.parent),r=e.createElement("div",{class:this.className+"-section-content","data-sectionnum":u,html:t.html}),d=e.createElement("div",{class:this.className+"-section-content-wrapper",html:r,styles:{"margin-top":m}}),v.sectionTitles.push({container:n,icon:s,text:a}),v.sectionContents.push(r),v.sectionContentWrappers.push(d),p=e.createElement("div",{class:this.className+"-section"+(t.open?"":" closed")+(f&&!f.open?" hidden":"")+(t.name?" "+t.name:"")+(!1===t.visible?" not-visible":""),attributes:{"data-id":t.id},html:[n,{class:this.className+"-section-content-container",html:d}]}),v.sections.push(p),p.inject(v.wrapper),b.push({margin:m,height:0,closed:!t.open,scrollable:!!t.open,visible:!1!==t.visible}),t.name&&(this.sectionsByName[t.name]=u);v.wrapper.inject(v.container),this.options.scroller&&(v.scrollbar=e.createElement("div",{class:this.className+"-scrollbar"}),v.scrollbarWrapper=e.createElement("div",{class:this.className+"-scrollbar-wrapper",html:v.scrollbar}).inject(v.container)),this.initEvents()},marginTopClosedSection:function(e){for(var t=o.isSmartphone()?2:4,n=-1e4,i=0;i<e.html.length;i++)e.html[i].collection&&(n=Math.min(-141*e.html[i].collection.length/t,n));return n},setContent:function(e,t){var n=this.getSectionNum(e),i=this.elements.sectionContents[n];i&&i.setContent(t)},setTitle:function(e,t,n){var i,s,o,a,l=this.getSectionNum(e);l&&(i=this.elements.sectionTitles[l])&&(s=i.container,o=i.text,a=i.icon,o.setText(t),n?(s.addClassName("has-icon"),a.className=this.className+"-section-title-icon",a.addClassName(n)):s.removeClassName("has-icon"))},initEvents:function(){var e=this.eventHandler=this.handleEvent.bind(this),n=this.scrollbarEventHandler=this.handleScrollbarEvent.bind(this),i=this.titleEventHandler=this.handleTitleEvent.bind(this),s=this.eventNames={start:"touchstart",move:"touchmove",stop:"touchend",cancel:"touchcancel"};t.Features.touchEvents||(window.PointerEvent?(s=this.eventNames={start:"pointerdown",move:"pointermove",stop:"pointerup",cancel:"pointerup"},this.elements.wrapper.setStyle("touch-action","none")):window.MSPointerEvent&&(s=this.eventNames={start:"MSPointerDown",move:"MSPointerMove",stop:"MSPointerUp",cancel:"MSPointerUp"},this.elements.wrapper.setStyle("touch-action","none"))),this.options.scroller&&(this.elements.container.addEvent("mousewheel",e),this.elements.sectionContents.invoke("addEvent","transitionEnd",e),this.elements.container.addEvent(s.start,e),this.elements.container.addEvent("click",e,!1,0,!0),this.elements.scrollbar.addEvent("mousedown",n),this.elements.scrollbarWrapper.addEvent("transitionEnd",n)),this.elements.sectionContents.invoke("addEvent","resize",e),this.elements.container.addEvent("resize",e),this.elements.sectionTitles.forEach((function(e){e.container.addEvent("click",i)}))},handleEvent:function(t){var n,i=this.eventNames;if(e.log("event:"+t.type),void 0===t.pointerType||"mouse"!==t.pointerType)switch(t.type){case i.start:n=this.dispatchEvent("onScrollInit",[t]);break;case i.move:n=this.dispatchEvent("onScrollMove",[t]);break;case i.cancel:case i.stop:n=this.dispatchEvent("onScrollStop",[t]);break;case"DOMMouseScroll":case"onmousewheel":case"mousewheel":n=this.dispatchEvent("onMouseWheel",[t]);break;case"onclick":case"click":n=this.dispatchEvent("onClick",[t]);break;case"transitionEnd":case"otransitionend":case"MSTransitionEnd":case"transitionend":case"webkitTransitionEnd":n=this.dispatchEvent("onScrollEnd",[t]);break;case"resize":n=t.target===this.elements.container?this.dispatchEvent("onContainerResize",[t]):this.dispatchEvent("onContentResize",[t])}return n},handleScrollbarEvent:function(e){var t;switch(e.type){case"mousedown":t=this.dispatchEvent("onScrollbarInit",[e]);break;case"mousemove":t=this.dispatchEvent("onScrollbarMove",[e]);break;case"mouseup":t=this.dispatchEvent("onScrollbarStop",[e]);break;case"transitionEnd":case"otransitionend":case"MSTransitionEnd":case"transitionend":case"webkitTransitionEnd":t=this.dispatchEvent("onScrollbarToggle",[e])}return t},handleTitleEvent:function(e){var t;switch(e.type){case"onclick":case"click":t=this.dispatchEvent("onTitleClick",[e])}return t},onTitleClick:function(e){var t=this,n=e.currentTarget.getData("sectionnum"),i=this.elements.container.getElements("[data-parent="+e.currentTarget.getParent().getAttribute("data-id")+"]");this.toggleSection(n),i.forEach((function(e){var i=t.elements.sections[n];i.hasClassName("closed")?(t.closeSection(e.getData("sectionnum")),i.hasClassName("hidden")||e.addClassName("hidden")):(t.openSection(e.getData("sectionnum")),e.removeClassName("hidden"),e.getParent().hasClassName("hidden")&&e.getParent().removeClassName("hidden"))})),i.length&&setTimeout((function(){t.dispatchEvent("onToggleSection")}),800)},onClick:function(e){this.moved&&e.stopPropagation()},onMouseWheel:function(t){var i=n.wheelDelta(t)*this.options.scrollSize;e.log(n.wheelDelta(t)),e.log(n.wheelDelta(this.options.scrollSize)),e.log(i),this.scrolling=!0,this.scroll(i),t.preventDefault()},onScrollInit:function(e){var t=n.getPosition(e).y,s=this.eventNames,o=this.eventHandler;this.scrollMove=t,this.refMove=t,this.refTime=Date.now(),this.firstMove=t,this.moved=!1,i.addEvent.call(window,s.move,o),i.addEvent.call(window,s.stop,o),i.addEvent.call(window,s.cancel,o),this.elements.container.removeClassName("smooth-scroll"),this.scrolling=!0},onScrollMove:function(e){var t=n.getPosition(e).y,i=t-this.scrollMove,s=Date.now();this.scrollMove=t,this.scroll(i),s-this.refTime>300&&(this.refMove=t,this.refTime=s),!this.moved&&Math.abs(t-this.firstMove)>10&&(this.moved=!0),e.preventDefault()},onScrollStop:function(e){var t,s,o,a,l=this.eventNames,r=this.eventHandler;i.removeEvent.call(window,l.move,r),i.removeEvent.call(window,l.stop,r),i.removeEvent.call(window,l.cancel,r),this.elements.container.addClassName("smooth-scroll"),e&&(t=n.getPosition(e).y,s=Date.now()-this.refTime,a=(o=t-this.refMove)/s*300,Math.abs(o)>10&&s<=300?this.scroll(a):this.scrolling=!1)},onScrollbarInit:function(e){var t=n.getPosition(e).y,s=this.scrollbarEventHandler;0===n.whichButton(e)&&(this.scrollMove=t,i.addEvent.call(window,"mousemove",s),i.addEvent.call(window,"mouseup",s),this.elements.container.removeClassName("smooth-scroll"),this.elements.scrollbar.addClassName("grabbing")),e.stopPropagation()},onScrollbarMove:function(e){var t=n.getPosition(e).y,i=this.scrollableHeight,s=(t-this.scrollMove)*(i-this.sumHeight)/(this.scrollbarWrapperHeight-this.scrollbarHeight);this.scrollMove=t,this.scroll(s),e.preventDefault()},onScrollbarStop:function(){var e=this.scrollbarEventHandler;i.removeEvent.call(window,"mousemove",e),i.removeEvent.call(window,"mouseup",e),this.elements.container.addClassName("smooth-scroll"),this.elements.scrollbar.removeClassName("grabbing"),this.scrolling=!1},onScrollbarToggle:function(){var e=this.elements.scrollbarWrapper;0===e.getStyle("opacity")&&e.hide()},onScrollEnd:function(){this.scrolling=!1},onContainerResize:function(){var t,n=parseInt(this.elements.wrapper.getStyle("height"),10),i=this.styles,s=0;if(n!==this.containerHeight&&this.options.scroller){for(this.containerHeight=n,this.scrollbarWrapperHeight=n-12,t=this.styles.length-1;t>=0;t--)i[t].visible&&s++;e.log("containerHeight:"+n),e.log("visibleSections"+s),e.log("this.titleHeight"+this.titleHeight),this.scrollableHeight=n-s*this.titleHeight,this.dispatchEvent("onAdjustScrolls")}},onContentResize:function(e){var t=e.target,n=t.getData("sectionnum"),i=this.elements.sectionContentWrappers[n],s=this.styles[n],o=s.margin,a=parseInt(t.getStyle("height"),10);"NaN"===a.toString()&&(a=s.height),a!==s.height&&(s.height=a,i.setStyle("height",a),(!s.scrollable||o<-a)&&(i.setStyle("margin-top",-a),s.margin=-a),this.options.scroller&&(this.sumHeight=this.styles.reduce((function(e,t){return e+(t.closed&&!t.scrollable&&t.visible?0:t.height)}),0),o<-a&&s.scrollable&&(this.scrolled+=o-s.margin),this.dispatchEvent("onAdjustScrolls")))},scroll:function(e){var t,n,i,s,o,a,l,r=e>0,c=this.elements.sectionContentWrappers,d=this.scrollableHeight,p=this.sumHeight,u=this.scrolled,m=r?c.length-1:0,h=r?-1:c.length;for(void 0===d&&(this.onContainerResize(),d=this.scrollableHeight);m!==h&&(o=this.styles[m],t=c[m],a=d-(p-u),!(0===e||e<0&&a>=0));r?m--:m++)o.scrollable&&o.visible&&(n=o.margin,i=o.height,a=e<0?Math.max(e,a):e,s=Math.max(Math.min(n+a,0),-i),t.setStyle("margin-top",s),o.margin=s,e-=l=s-n,u-=l);this.scrolled!==u&&this.dispatchEvent("onScroll",u-this.scrolled),this.scrolled=u,1!==this.fromAdjusScrolls&&(e>=0&&u<1?this.dispatchEvent("onScrollTop"):this.dispatchEvent("onScrollDown")),1===this.fromAdjusScrolls&&(this.fromAdjusScrolls=0),this.updateScrollbarPosition(),this.updateSectionStyles()},onAdjustScrolls:function(){this.adjustTimeoutId||(this.adjustTimeoutId=setTimeout(this.adjustScrolls.bind(this),this.adjustDelay))},adjustScrolls:function(){var e=this.scrollableHeight-(this.sumHeight-this.scrolled);this.adjustTimeoutId=null,e>0&&(this.fromAdjusScrolls=1,this.scroll(e)),this.updateScrollbar(),this.updateScrollbarPosition(),this.updateSectionStyles()},unScroll:function(e){for(var t,n=this.styles,i=n.length-1,s=0;i>=e;i--)(t=n[i]).scrollable&&t.visible&&(s-=t.margin);this.scroll(s)},updateScrollbar:function(){var e,t=this.scrollableHeight,n=this.sumHeight,i=this.elements,s=i.scrollbarWrapper,o=i.scrollbar;t>=n?(s.setStyle("opacity",0),i.container.removeClassName("has-scroller")):(e=t*this.scrollbarWrapperHeight/n,o.setStyle("height",e),s.show(),s.setStyle("opacity",1),this.scrollbarHeight=e,i.container.addClassName("has-scroller"))},updateScrollbarPosition:function(){var e=this.scrollableHeight,t=(this.scrollbarHeight-this.scrollbarWrapperHeight)*this.scrolled/(e-this.sumHeight);this.elements.scrollbar.setStyle("top",t)},updateSectionStyles:function(){for(var e,t,n,i,s,o,a,l,r,c=this.styles,d=this.elements.sections,p=c.length,u=p-1;u>=0;u--){e=c[u],t=null,i=d[u],n=e.height+e.margin<1,r=!(this.options.data&&!this.options.data[u].parent),a=!this.options.data||this.options.data[u].parent||r?this.options.data&&this.options.data[u].parent?this.getChildrenIndex(this.getParentElm(this.options.data[u].parent).index):[]:this.getChildrenIndex(u),o=!0,l=!0;for(var m=0;m<a.length;m++)c[a[m]].height+c[a[m]].margin<1==!1&&(r?l=!1:o=!1);if(e.scrollable&&(n&&o?(i.addClassName("closed"),e.closed=!0):(i.removeClassName("closed"),e.closed=!1)),n){for(s=u+1;s<p;s++)if(c[s].scrollable){t=c[s];break}(i.getChildren().length&&i.getChildren()[0].getAttribute("data-parent")&&i.hasClassName("closed")||r&&l)&&i.getChildren().length&&i.getChildren()[0].addClassName("hidden"),t&&t.margin<=-1?i.getAttribute("data-parent")&&i.addClassName("scrolled"):(i.getAttribute("data-parent")&&i.removeClassName("scrolled"),i.getChildren().length&&i.getChildren()[0].getAttribute("data-parent")&&!this.elements.container.getElement("[data-id="+i.getChildren()[0].getAttribute("data-parent")+"]").hasClassName("closed")&&i.getChildren()[0].removeClassName("hidden"))}else i.getAttribute("data-parent")&&i.removeClassName("scrolled"),i.getChildren().length&&i.getChildren()[0].getAttribute("data-parent")&&!this.elements.container.getElement("[data-id="+i.getChildren()[0].getAttribute("data-parent")+"]").hasClassName("closed")&&i.getChildren()[0].removeClassName("hidden")}},toggleSection:function(e){var t=this.elements.sectionContentWrappers[e],n=this.elements.sections[e],i=this.styles[e],s=i.closed,o=i.scrollable,l=this.options.scroller,r=s?0:-i.height;i.closed=!s,i.scrollable=s,l&&s?(o||(this.sumHeight+=i.height,this.scrolled-=i.margin),this.updateScrollbar(),this.unScroll(e)):(n.toggleClassName("closed"),t.setStyle("margin-top",r),l&&(s?this.sumHeight+=i.height:(this.sumHeight-=i.height,this.scrolled+=i.margin),i.margin=r),this.dispatchEvent("onAdjustScrolls"));var c=n.getAttribute("data-id");s?a.openSection({sectionName:c}):a.closeSection({sectionName:c}),this.dispatchEvent("onToggleSection")},showSection:function(t){var n=this.getSectionNum(t),i=this.elements.sections[n],s=this.styles[n];e.log("show section: "+t),s.visible||(s.visible=!0,this.scrollableHeight-=this.titleHeight,s.scrollable&&(this.sumHeight+=s.height,this.scrolled-=s.margin),i.removeClassName("not-visible"),this.dispatchEvent("onAdjustScrolls"))},hideSection:function(t){var n=this.getSectionNum(t),i=this.elements.sections[n],s=this.styles[n];e.log("hide section: "+t),s.visible&&(s.visible=!1,this.scrollableHeight+=this.titleHeight,s.scrollable&&(this.sumHeight-=s.height,this.scrolled+=s.margin),i.addClassName("not-visible"),this.dispatchEvent("onAdjustScrolls"))},getSectionNum:function(t){return"string"===e.typeOf(t)?this.sectionsByName[t]:t},closeSection:function(e){var t=this.getSectionNum(e);this.styles[t].closed||this.toggleSection(t)},openSection:function(e){var t=this.getSectionNum(e);this.styles[t].closed&&this.toggleSection(t)},getVisibleHeight:function(e){var t,n=this.getSectionNum(e);if(!(n>=this.options.sections))return(t=this.styles[n]).height+t.margin},showTempHeight:function(e,t){var n=this.getSectionNum(e),i=this.getVisibleHeight(n),s=this.styles[n];t>i&&this.elements.sectionContentWrappers[n].setStyle("margin-top",t-s.height)},hideTempHeight:function(e){var t=this.getSectionNum(e),n=this.styles[t];this.elements.sectionContentWrappers[t].setStyle("margin-top",n.margin)},isScrolling:function(){return this.scrolling},_confirmModal:function(){var e=this;new r({closable:!1}).dialog({body:c("confirmRemoveFavorite"),title:c("Remove all favorite Apps"),buttons:[{className:"primary",value:c("Remove"),action:function(t){e.dispatchEvent("onRemoveAllFavoriteApp"),t.hide()}},{value:c("cancel"),action:function(e){e.hide()}}]})},hideDeleteZone:function(){e.log("hideDeleteZone"),this.deleteZone.hide()},hideDeleteZone1:function(){e.log("hideDeleteZone1"),this.deleteZone.hide()},getPositionSection:function(e){var t;return this.options.data.forEach((function(n,i){n.id===e&&(t=i)})),t},getParentElm:function(e){for(var t=this.options.data,n=0;n<t.length;n++)if(t[n].id===e)return{index:n,elm:t[n]};return null},getChildrenIndex:function(e){for(var t=this.options.data,n=[],i=e+1;i<t.length;i++){if(t[e].id!==t[i].parent)return n;n.push(i)}return n}};return s.extend(d)})),define("DS/i3DXCompass/View/AppListView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/Tools","DS/UIKIT/Tooltip","DS/i3DXCompass/CacheManager"],(function(e,t,n,i,s){"use strict";return t.extend({tagName:"ul",className:"experience-list",setup:function(e){var t=this,n=this.collection;this.tooltips=[],this.customClass=e.customClass,this.favorite=e.favorite,this.draggable=e.draggable,this.customFilters=e.customFilters||{},n.addEvent("onMultipleAdd",this.addMultipleApp.bind(this)),n.addEvent("onRemove",this.removeApp.bind(this)),n.addEvent("onReorderApp",t.reorderApp.bind(t)),n.addEvent("onChange",t.updateItem.bind(t))},render:function(){var e=this.collection.filterApps(this.getFilters());return this.cleanTooltips(),this.container.setContent(this.buildAppSkeleton(e)),this.customClass&&this.container.addClassName(this.customClass),this.updateEmptyClass(),this},cleanTooltips:function(){this.tooltips.length>0&&(this.tooltips.invoke("destroy"),this.tooltips=[])},search:function(e){this.setCustomFilter("searched",e),this.render()},filterApps:function(e){this.setCustomFilter("appIds",e),this.render()},setCustomFilter:function(e,t){this.customFilters[e]=t||null},buildAppSkeleton:function(t){var n=this,i=[];return t.forEach((function(e){i.push(n.buildApp(e))})),i.push(e.createElement("li",{class:"clearfix"})),i},buildApp:function(t){var s,o=e.Utils.Client.Features.touchEvents,a=t.get("icon"),l=e.createElement("img",{class:"icon",id:"icon-"+t.get("id"),src:a,events:{error:function(){this.removeEvent("error"),this.src=this.src.substring(0,this.src.lastIndexOf("/"))+"/Default_App_Icon.png"},dragstart:function(e){this.draggable&&e.preventDefault()}}}),r=e.createElement("div",{text:t.get("title"),class:"title"}),c=e.createElement("li",{class:"exp-item"+(this.draggable?" drag-app":"")+(t.isRole()?" role"+(t.get("active")?" active":"")+(t.get("requested")?" requested":""):""),"data-id":t.id,"data-favorite-order":t.get("favoriteOrder"),html:[l,r]}),d=e.createElement("span",{text:n.getTextFromHtml(t.get("tooltip")||t.escape("title"))});return!o&&d&&(s=new i({className:"compass-small-tooltip",position:"bottom",target:c,delay:{show:1e3},body:d}),this.tooltips.push(s)),t.needSettingsMenu()&&this.buildSettingsElmt().inject(c),(t.isWidget()||t.isA2X())&&(n.enableWidgetDrag(c,t.toJSON()),c.addClassName("widget-item")),t.isFamily()&&t.getChildrenForFamilyApp().Widget&&(n.enableWidgetDrag(c,t.getChildrenForFamilyApp().Widget.toJSON()),c.addClassName("widget-item")),t.isRole()&&t.get("granted")&&e.createElement("div",{class:"expand-img fonticon fonticon-right-open"}).inject(c),c},buildSettingsElmt:function(){return e.createElement("div",{class:"settings-img fonticon fonticon-right-open"})},getFilters:function(){var e=[],t=this.customFilters;return t.searched&&e.push({key:"searched",value:t.searched}),t.appIds&&e.push({key:"appIds",value:t.appIds}),e},changeApp:function(e){e.matchesFilters(this.getFilters())?this.addAppElmt(e):this.removeAppElmt(e)},addApp:function(e){e.matchesFilters(this.getFilters())&&this.addAppElmt(e)},addMultipleApp:function(e){e.length<5?e.forEach(this.addApp,this):this.render()},reorderApp:function(e){var t;e.matchesFilters(this.getFilters())&&(t=this.addAppElmt(e),this.favorite&&t.setData("favorite-order",e.get("favoriteOrder")))},removeApp:function(e){e.matchesFilters(this.getFilters())&&this.removeAppElmt(e)},addAppElmt:function(e){for(var t,n=!1,i=this.getAppElmt(e)||this.buildApp(e),s=this.collection.getPrevious(e);!n;)s?(t=this.getAppElmt(s))?(i.inject(t,"after"),n=!0):s=this.collection.getPrevious(s):(i.inject(this.container,"top"),n=!0);return this.updateEmptyClass(),i},removeAppElmt:function(e){var t=this.getAppElmt(e);t&&t.destroy(),this.updateEmptyClass()},getAppElmt:function(t){return this.getElement(e.String.format('[data-id="{0}"]',t.get("id")))},updateEmptyClass:function(){this.customFilters.searched||0!==this.collection.count(this.getFilters())?this.container.removeClassName("empty"):this.container.addClassName("empty")},addSettingsElmt:function(e,t){t&&!t.getElement(".settings-img")&&this.buildSettingsElmt().inject(t)},removeSettingsElmt:function(e,t){var n=t&&t.getElement(".settings-img");n&&n.destroy()},changePlatforms:function(e,t){e.needSettingsMenu()?this.addSettingsElmt(e,t):this.removeSettingsElmt(e,t)},updateItem:function(t){var i=this.getAppElmt(t),s=t._changed;i&&(e.is(s.active)&&i.toggleClassName("active",s.active),e.is(s.requested)&&i.toggleClassName("requested",s.requested),e.is(s.title)&&i.getElement(".title").setText(s.title),e.is(s.icon)&&i.getElement(".icon").setAttribute("src",s.icon),e.is(s.platforms)&&this.changePlatforms(t,i),t.isWidget()&&(e.is(s.title)||e.is(s.icon)||e.is(s.launchInfos)||e.is(s.config))&&n.enableWidgetDrag(i,t.toJSON()),t.isFamily()&&t.getChildrenForFamilyApp().Widget&&(e.is(s.title)||e.is(s.icon)||e.is(s.launchInfos)||e.is(s.config))&&n.enableWidgetDrag(i,t.getChildrenForFamilyApp().Widget.toJSON()))}})})),define("DS/i3DXCompass/InterCom",["UWA/Utils/InterCom","DS/i3DXCompass/Tools"],(function(e,t){"use strict";var n={initialize:function(i,s){var o=n.eventServer=new e.Server(i,{isPublic:!0});t.forEachOwnProperty(s,(function(e,t){o.addListener(t,e)}))},fireEvent:function(e,t){n.eventServer&&n.eventServer.dispatchEvent(e,t)}};return n})),define("DS/i3DXCompass/Model/GroupModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/UIKIT/SuperModal"],(function(e,t,n,i,s,o){"use strict";return n.extend({setup:function(){"group"===this.get("type")?(this.set("canDelete",!0),this.set("canEdit",!0),this.set("defaultIcon","v3.1/images/Groups")):(this.set("canDelete",!1),this.set("canEdit",!1))},save:function(){},remove:function(){},updateTitle:function(e){this.set("title",e)},updateApp:function(e){this.set("appList",e)},deleteGroup:function(){var t=this;new o({closable:!1}).confirm(e.i18n("confirmRemoveFavorite"),e.i18n("confirmation"),(function(e){e&&t.dispatchEvent("onRemoveGroup")}))}})})),define("DS/i3DXCompass/Collection/PortfolioRoleCollection",["UWA/Core","UWA/Class/Model","DS/i3DXCompass/Collection/PortfolioCollection","DS/i3DXCompass/Tools"],(function(e,t,n,i){"use strict";return n.extend({model:t,url:function(){return i.getPortfolioApiTemplateUrl("rootroles")},parse:function(e){return e.map((function(e){return e.brand&&"3DExp Platform"!==e.brand||(e.brand="PLATFORM"),e.iconTemplate?e.iconTemplate=i.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return i.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return i.getPortfolioAssetTemplateUrl(e.id,t)}))),e}))}})})),define("DS/i3DXCompass/ServiceApi/PortfolioApi",["UWA/Core","DS/i3DXCompass/Collection/PortfolioRoleCollection"],(function(e,t){"use strict";var n=[],i=new t,s=!1,o=function(e){var t=i.find((function(t){return t.get("acronym")===e&&!t.get("contact")}));return t&&(t=t.toJSON()),t},a=function(){n.forEach((function(e){setTimeout(e.callback,0,o(e.id))})),n.length=0};return{getPortolioRole:function(t,l){t&&l&&"function"===e.typeOf(l)&&function(t,l){i.size()>0?l(o(t)):(n.push({id:t,callback:l}),s||(s=!0,i.fetchPromise().then((function(){s=!1,a()}),(function(){s=!1,e.log("fetch: onFailure")}))))}(t,l)},_private:{callbacks:n,fireCallbacks:a}}})),define("DS/i3DXCompass/View/BasketView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Mask","DS/i3DXCompass/Feature","DS/i3DXCompassServices/i3DXCompassPubSub"],(function(e,t,n,i,s,o){"use strict";return t.extend({tagName:"div",className:"basket-view",setup:function(e){return this},_getTemplate:function(){return[{class:this.className+"-header",html:[{class:"title",text:"buy"}]},{tag:"mpf-buy-wrapper"}]},render:function(){var e=this.container;return i.mask(e),require(["DS/MPFMyCartSummary/MyCartSummaryFactory"],(function(t){t.createMyCartSummary().then((function(t){t.addEvent("addAdditionalItems",(function(){o.publish("navigateToHome")})),e.setContent(t.render()),i.unmask(e)}))})),this}})})),define("DS/i3DXCompass/View/RoleSeoView",["UWA/Core","DS/i3DXCompass/View/RoleView","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature","DS/UIKIT/Tooltip"],(function(e,t,n,i,s,o){"use strict";return t.extend({tagName:"a"})})),define("DS/i3DXCompass/Csrf",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/i3DXCompass/Tools"],(function(e,t,n,i){"use strict";var s=null,o=null,a=null;return{initialize:function(e,t){s=e,o=t},request:function(t,s,a){var l,r=function(t){"function"==typeof a.onFailure?a.onFailure.apply(this,arguments):(e.log("ERROR"),e.log(t))};return l={timeout:15e3,method:"GET",type:"json",headers:{Accept:"application/json","Accept-Language":o},proxy:"passport",data:{os:i.detectOs()},cache:-1,onComplete:function(t){var n;t.code&&"0"!==t.code||t.error?(n=t.message&&""!==t.message?t.message:t.error&&t.error.type?t.error.type:t.error?t.error:t,t.error&&"java.net.SocketTimeoutException: Read timed out"===t.error.status&&e.log(e.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget")),"function"==typeof a.onFailure?a.onFailure(t):e.log(n)):"function"==typeof a.onComplete&&a.onComplete(t)},onFailure:r,onTimeout:function(t){e.log(e.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget")),r(t)}},n.authenticatedRequest(t,l)},formatUrl:function(e){return 0===e.indexOf("http")?e:s+""+e},getTokenCSRF:function(){return a},getOrGenerateTokenCSRF:function(t){a="Pending",this.request(this.formatUrl("security/csrf"),{},{onComplete:function(n){e.log(n),a=n["X-DS-CSRFTOKEN"],t&&t.context.request&&t.context.request(t.options)},onFailure:function(n){e.log(n),a=null,t&&t.callbacks&&"function"==typeof t.callbacks.onFailure&&t.callbacks.onFailure(n)}})}}})),define("DS/i3DXCompass/Data",["UWA/Core","UWA/Utils","UWA/Ajax","UWA/Data","DS/i3DXCompass/InterCom","DS/i3DXCompass/EventManager","DS/WebappsUtils/WebappsUtils","DS/WAFData/WAFData","DS/i3DXCompass/CacheManager","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompass/Tools","UWA/Storage","DS/i3DXCompass/Csrf","DS/i3DXCompass/Feature","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","UWA/Storage/Adapter/Object"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h){"use strict";var f,g,v,C=e.i18n,y={root:null,saveSectionTimeout:0,initialize:function(t,n){t.myAppsBaseUrl=t.myAppsBaseUrl.replace("/resources/AppsMngt","");var i=t.myAppsBaseUrl.replace(/\/$/,"")+"/resources/AppsMngt/";if(u.initialize(i,t.lang),this.myAppsBaseUrl=i,this.getAppsUrl=i+"apps/compass",t.platform&&(this.setSelectedPlatform(t.platform),this.toFramePlatform=t.platform),t.userId?(this.getAppsUrl=i+"apps/compass",this._urlCompassUri="apps/compass"):(this.getAppsUrl=i+"apps/public/compass",this._urlCompassUri="apps/public/compass"),t.addinMode){this.addinMode=t.addinMode;try{localStorage.setItem("3DCompass-addinMode",JSON.stringify(t.addinMode))}catch(e){}}else try{var s=localStorage.getItem("3DCompass-addinMode");s?this.addinMode=JSON.parse(s):d.getAddinModeURL()&&(this.addinMode=d.getAddinModeURL(),localStorage.setItem("3DCompass-addinMode",JSON.stringify(d.getAddinModeURL())))}catch(e){try{d.getAddinModeURL()&&(this.addinMode=d.getAddinModeURL(),localStorage.setItem("3DCompass-addinMode",JSON.stringify(d.getAddinModeURL())))}catch(e){}}r.setup(t.userId,t.lang),this._registryUriInfo="api/v1/public/registry/info",this._setPreferencesUri="user/setPreferences",this._getPreferencesUri="user/getPreferences",this._setFavoriteUri="user/setFavorite",this._setSectionUri="apps/compass/section",this._getProcessDetailsUri="apps/licenses",this._requestRoleUri="role/request",this._tryRoleUri="role/try",this._encryptUri="security/encrypt",this._decryptUri="security/decrypt",this._getSuggestionsUri="role/suggestions",this._getAppInfoUri="apps",this._getFeatureCompassUri="infos/feature/compass",this._preferenceUri="api/v1/compass/preference",this._getPreferencesUserUri="user/preference",this._mediaUri="media",this.setPreferencesUrl=i+"user/setPreferences",this.getPreferencesUrl=i+"user/getPreferences",this.setFavoriteUrl=i+"user/setFavorite",this.setSectionUrl=i+"apps/compass/section",this.getProcessDetailsUrl=i+"apps/licenses",this.requestRoleUrl=i+"role/request",this.tryRoleUrl=i+"role/try",this.encryptUrl=i+"security/encrypt",this.decryptUrl=i+"security/decrypt",this.getSuggestionsUrl=i+"role/suggestions",this.getAppInfoUrl=i+"apps",this.getFeatureCompass=i+"infos/feature/compass",this.preference=i+"api/v1/compass/preference",this.getPreferencesUserUrl=i+"user/preference",this.media=i+"media",t.myAppsBaseUrl&&!t.registryUrl&&this._formatRegistryUrl(t.myAppsBaseUrl),t.passportUrl&&(this.passportUrl=t.passportUrl),this.onlineInstallUrl=null,this.buildTransactionId=null,f=e.extend({},t),this.root=n,this.lang=t.lang,o.dispatchEvent("onInitialized")},request:function(n){var s,o,a,c=this,d={Accept:n.Accept||"application/json","Accept-Language":f?f.lang:null},p=n.proxy;"POST"!==n.method&&"PUT"!==n.method||!n.contentType||(d["Content-Type"]=n.contentType,d["X-DS-CSRFTOKEN"]=u.getTokenCSRF()),n.headers&&(d=e.merge(d,n.headers)),a=function(e,t){e&&(e.code&&e.code.indexOf&&-1!==e.code.indexOf("CSRF")||e.indexOf&&-1!==e.indexOf("CSRF"))||t&&(t.code&&t.code.indexOf&&-1!==t.code.indexOf("CSRF")||t.indexOf&&-1!==t.indexOf("CSRF"))?(u.initialize(c.myAppsBaseUrl,c.lang),u.getOrGenerateTokenCSRF({context:c,options:n})):n.onFailure&&(t?n.onFailure(t):n.onFailure(e))},s={timeout:void 0!==n.timeout?n.timeout:15e3,cache:y._getCacheLevel(n),method:n.method||"GET",type:n.type||"json",headers:d,proxy:"none"!==p&&r._getUser()?p||"passport":null,data:n.postData,onComplete:n.onComplete,onFailure:a},n.urlParams&&(n.urlParams.debug=(void 0===v&&(v=-1!==window.location.search.indexOf("debug")),!1!==v||null));var m=e.Utils.getQueryString(window.location.href,"ticket");return m&&"passport"===s.proxy&&(n.urlParams||(n.urlParams={}),n.urlParams.ticket=m),o=n.url+(n.urlParams?"?"+t.toQueryString(n.urlParams):""),y._isCorsAvailable(n)||n.urlParams&&n.urlParams.cors?"passport"===s.proxy?l.authenticatedRequest(o,s):l.request(o,s):i.request(o,s)},_getAppsUrl:function(){return this.myAppsBaseUrl+this._urlCompassUri},_getSetPreferencesUrl:function(){return this.myAppsBaseUrl+this._setPreferencesUri},_getPreferencesUrl:function(){return this.myAppsBaseUrl+this._getPreferencesUri},_setFavoriteUrl:function(){return this.myAppsBaseUrl+this._setFavoriteUri},_setSectionUrl:function(){return this.myAppsBaseUrl+this._setSectionUri},_getProcessDetailsUrl:function(){return this.myAppsBaseUrl+this._getProcessDetailsUri},_getRegistryURLInfo:function(){return this.myAppsBaseUrl+this._registryUriInfo},_requestRoleUrl:function(){return this.myAppsBaseUrl+this._requestRoleUri},_tryRoleUrl:function(){return this.myAppsBaseUrl+this._tryRoleUri},_encryptUrl:function(){return this.myAppsBaseUrl+this._encryptUri},_decryptUrl:function(){return this.myAppsBaseUrl+this._decryptUri},_getSuggestionsUrl:function(){return this.myAppsBaseUrl+this._getSuggestionsUri},_getAppInfoUrl:function(){return this.myAppsBaseUrl+this._getAppInfoUri},_getFeatureCompass:function(){return this.myAppsBaseUrl+this._getFeatureCompassUri},_getPreferencesUserUrl:function(){return this.myAppsBaseUrl+this._getPreferencesUserUri},_mediaUrl:function(){return this.myAppsBaseUrl+this._mediaUri},_request:function(){return m.isMobileAppEnvironment()?l.authenticatedRequest:i.request},_getCacheLevel:function(e){var t=d.getBrowser(),n=0;return"internet explorer"!==t&&"edge"!==t||(n=-1),void 0!==e.cache?e.cache:n},get3DDashboardUrl:function(e){var t=this;this.dashboardUrl?e&&e(this.dashboardUrl):this._get3DDashboardUrl({},(function(n){n.length>0&&n[0].services.length>0&&(t.dashboardUrl=n[0].services[0].url),e&&e(t.dashboardUrl)}))},_get3DDashboardUrl:function(e,t){h.getServicesByPlatform({platforms:e.platform&&e.platform.length>0?e.platform:[this.selectedPlatform],services:["3DDashboard"],config:{url:this._getRegistryURL()}}).then(t,t)},getBusinessExperienceUrl:function(e,t){"dsrtv:"!==window.location.protocol?h.getServicesByPlatform({platforms:e.platform&&e.platform.length>0?e.platform:[this.selectedPlatform],services:["businessexperience"],config:{url:this._getRegistryURL()}}).then(t,t):t()},setPreferences:function(e){var t={url:y._getSetPreferencesUrl(),urlParams:e,onComplete:function(e){0===e.code?o.dispatchEvent("onShowMessage",[e.message,5e3]):o.dispatchEvent("onShowMessage",[e.message||C("errorsavingpreferences"),5e3])},onFailure:function(e){o.dispatchEvent("onShowMessage",[e&&e.message||C("errorsavingpreferences"),5e3])}};y.request(t)},getPreferences:function(t){e.is(r._getUser())&&y.request({url:y._getPreferencesUserUrl(),type:"json",Accept:"text/plain",urlParams:t.urlParams,onComplete:function(e){t.onComplete&&t.onComplete(e)},onFailure:function(e){t.onFailure&&t.onFailure(e)}})},saveSectionStatus:function(e){clearTimeout(y.saveSectionTimeout),y.saveSectionTimeout=setTimeout((function(){y.request({method:"PUT",url:y._setSectionUrl(),contentType:"application/x-www-form-urlencoded",postData:{name:"value",value:e},cache:null})}),1100)},setPreference:function(e){var t={url:y._getSetPreferencesUrl(),urlParams:{name:e.name,value:e.value},cache:null,onComplete:function(t){t&&0===t.code?e&&e.onComplete&&e.onComplete():e&&e.onFailure&&e.onFailure()},onFailure:function(t,n){e&&e.onFailure&&e.onFailure()}};y.request(t)},getCasTgc:function(n){var i,s=this,o="ios"===d.getOs(),r={timeout:15e3,method:"GET",type:"json",onFailure:function(){n.onComplete()}},c=null,u=function(){r.onComplete=function(c){c.result?function(c){var d=t.encodeUrl(t.buildUrl(window.location,a.getWebappsBaseUrl()+"i3DXCompass/gettgc.html")),p=n.passportUrl.replace(/\/$/,"")+"/",u=t.buildUrl(p,"cas/getcastgc?userid="+f.userId+"&service=V6&ticket="+c+"&callback="+d),m=new RegExp("castgc=(.*-cas)");r.type="text",r.onComplete=function(t){if(t.data)"com.ds.compass"===(t=JSON.parse(t.data)).target&&(i.destroy(),window.removeEventListener("message",r.onComplete),"notgc"===t.castgc?n.onComplete():(o?g=t.castgc:s.storage.set("casTGC",t.castgc),n.onComplete(t.castgc)));else if(m.test(t)){e.log("CORS request succeeded");var a=m.exec(t);o?g=a[1]:s.storage.set("casTGC",a[1]),n.onComplete(a[1])}else n.onComplete()},r.onFailure=function(e){n.onComplete()},r.responseType="";try{l.request(u,r)}catch(t){e.log("CORS request failed"),window.addEventListener("message",(function(e){s.storage.set("casTGC",e),r.onComplete(e)})),i=e.createElement("iframe",{src:u,class:"tgc-frame",styles:{border:"none",width:"0px",height:"0px"}}).inject(y.root)}}(c.result):n.onComplete()},l.request(f.proxyTicketUrl+(new Date).getTime(),r)};if(this.storage||(this.storage=new p({adapter:"Object",database:"compass"})),o)if(g)n.onComplete(g);else{try{g=s.storage.get("casTGC",5e3)}catch(e){}n.passportUrl?u():n.onComplete()}else{try{c=s.storage.get("casTGC",5e3)}catch(e){}c?n.onComplete(c):n.passportUrl?u():n.onComplete()}},getCasTransientUrl:function(i){var s,o={timeout:15e3,method:"GET",type:"json",onFailure:function(){i.onComplete()}},a=i.passportUrl.replace(/\/$/,"")+"/",l=t.buildUrl(a,"api/authenticated/cas/transient");o.type="json",o.onComplete=function(t){var n;if(t)try{(t=JSON.parse(t)).x3ds_reauth_url&&(n=t.x3ds_reauth_url)}catch(t){e.log("Authentication issue"),e.log(t)}i.onComplete(n)},o.onFailure=function(){i.onComplete()};try{(s=n.getRequest(l,o)).withCredentials=!0,s.send()}catch(t){e.log("CORS FAIL: getTransientUrl"),i.onComplete("")}},fetchPassportUrlForPlatform:function(e,t){h.getServicesByPlatform({platforms:e,services:["3dpassport"],config:{url:this._getRegistryURL()}}).then(t,t)},getCasTgcAndCasTransientUrl:function(t){var n,i,s=this,a=2,l=function(s){0===--a&&(e.is(n)&&e.is(i)?t.onComplete(n,i,s):(o.dispatchEvent("onShowMessage",C("sessionExpirationTitle")),c.getPlatformServices({onComplete:function(t){e.log(t)}})))};s.fetchPassportUrlForPlatform(t.platform?[t.platform]:[this.selectedPlatform],(function(t){e.log(t);var o="";t&&t[0]&&t[0].services[0]&&(o=(o=t[0].services[0].url).replace("/cas","")),s.getCasTgc({passportUrl:o,onComplete:function(e){n=e,l(o)}}),s.getCasTransientUrl({passportUrl:o,onComplete:function(e){i=e,l(o)}})}))},_isCorsAvailable:function(e){var t=y.myAppsBaseUrl;return!t&&"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl&&(t=COMPASS_CONFIG.myAppsBaseUrl),e.url&&e.url.indexOf&&(e.url.indexOf(t)>-1||e.url.indexOf("resources/compass/api")>-1||e.url.indexOf("-compass.")>-1)},_formatRegistryUrl:function(e){var t=this;e.indexOf("-apps.")>0||e.indexOf("-compass.")>0?y.request({url:this._getRegistryURLInfo(),onComplete:function(n){n&&n.services&&n.services.length>0?t.registryUrl=n.services[0].url:e.indexOf("-apps.")>0?t.registryUrl=e.replace("-apps.","-registry.").replace("/enovia",""):e.indexOf("-compass.")>0&&(t.registryUrl=e.replace("-compass.","-registry.").replace("/enovia",""))},onFailure:function(){e.indexOf("-apps.")>0?t.registryUrl=e.replace("-apps.","-registry.").replace("/enovia",""):e.indexOf("-compass.")>0&&(t.registryUrl=e.replace("-compass.","-registry.").replace("/enovia",""))}}):setTimeout((function(){this.registryUrl=e.replace("AppsMngt/","AppsMngtRegistry/")}),0)},_getRegistryURL:function(){return y.registryUrl},setSelectedPlatform:function(t,n){var i=this;if(e.is(i.getSelectedPlatform())&&!0!==n)e.is(i.getSelectedPlatform())&&(i.selectedPlatform=i.getSelectedPlatform());else{try{sessionStorage.setItem("3DCompass-selectedPlatform",t)}catch(e){}i.selectedPlatform=t}},getSelectedPlatform:function(){try{return sessionStorage.getItem("3DCompass-selectedPlatform")}catch(e){return this.selectedPlatform}},resetSelectedPlatform:function(){try{return sessionStorage.removeItem("3DCompass-selectedPlatform")}catch(e){}}};return y})),define("DS/i3DXCompass/ServiceApi/UserStartupApi",["UWA/Core","DS/i3DXCompass/Data","DS/i3DXCompass/CacheManager"],(function(e,t,n){"use strict";var i,s,o,a,l,r=!1,c=!1,d=[],p=function(){var e=u();return e?e+"user/startup":null},u=function(){return t.myAppsBaseUrl||l},m=function(e){return e=e||"",p()+a+e},h=function(e){return i||(i=n.getCache(m(e),144e5)),i},f=function(){var e=h();return e?e.split("@@@")[0]:null},g=function(e){d.forEach((function(t){t[e]&&setTimeout(t[e],0,s)})),d.length=0},v=function(e){if(!p()&&(e.config&&e.config.myAppsBaseUrl||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl)&&(l=(l=(l=e.config&&e.config.myAppsBaseUrl?e.config.myAppsBaseUrl:COMPASS_CONFIG.myAppsBaseUrl).replace("/resources/AppsMngt","")).replace(/\/$/,"")+"/resources/AppsMngt/"),e.config&&e.config.userId&&e.config.lang&&n.setup(e.config.userId,e.config.lang),!p())throw new Exception("No url found for myAppsBaseUrl");var i,o;c=!0,i=e.platform,o=h(i),s=o?JSON.parse(o.split("@@@")[1]):null;var a={cors:!0,platform:e.platform,roles:!0};t.request({url:p(),urlParams:a,headers:{"Accept-Language":e&&e.config?e.config.lang:null,"Last-Modified":f()},onComplete:function(t,i){var o=i&&(i["Last-Modified"]||i["Last-Modified".toLowerCase()]);r=!0,t&&(i&&o&&0===t.code&&!1===t.pending&&function(e,t,i){n.setCache(m(i),e+"@@@"+JSON.stringify(t))}(o,t,e.platform),s=t),g("onComplete"),c=!1},onFailure:function(){g(s?"onComplete":"onFailure"),c=!1}})};return{fetch:function(t){t&&"function"===e.typeOf(t.onComplete)&&(t.config&&t.config.userId&&(a=t.config.userId),function(e){var t=Date.now();r&&(!o||t-o<2e4)?e.onComplete(s):(o=t,d.push({onComplete:e.onComplete,onFailure:e.onFailure}),c||v(e))}({platform:t.platform,config:t.config,onComplete:t.onComplete,onFailure:t.onFailure}))}}})),define("DS/i3DXCompass/DaemonManager",["UWA/Core","UWA/Utils","UWA/Json","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/UIKIT/Alert","DS/UIKIT/Modal","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Spinner","DS/UIKIT/Popover","DS/UIKIT/Input/Select","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h){"use strict";var f="isDaemonBusy",g="discoverAllInstall",v="startV6install",C="createShortcutFromV6Install",y="installMedia",b="uninstall",S="selfUpdate",w="runScript",E="ds6w:what/dp3ds:{0}/{1}",D=[g,v,C,y,S,b,w],A=o.i18n,I=null,N={version:"1.0",msi:"0",frameId:"16086506-8109-4ac5-82d6-3e2f550fd401",ports:{localHttp:[20250,33150,40550,20250,33150,40550],localHttps:[20300,33200,40600,20300,33200,40600],myApps:void 0},daemonBase:"http://127.0.0.1",defaultFramePort:4444,framePort:null,framePath:"{0}:{1}/iframe?version={2}&id={3}#origin:{4}",frameOrigin:"{0}:{1}",frame:null,catEnvConfig:null,scriptsConfiguration:[],functionPath:"{0}:{1}/{2}?version={3}&castgc={4}&cryptws={5}&arg={6}&x3ds_transient_auth_url={7}",functionPathNoCrypt:"{0}:{1}/{2}?version={3}&arg={4}",requestPath:"{0}:{1}/{2}",origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+(window.location.pathname?"/"+window.location.pathname:""),timeout:2500,storageId:"compass-daemon-port",dpInfo:null,installing:!1,installed:!1,init:function(t,n){var i=parseInt(localStorage.getItem(N.storageId),10),s=N.getLocalPorts();e.is(i,"number")&&(-1===s.indexOf(i)?o.unshiftUnique(s,i):o.moveToFirst(s,i)),N.root=t,N.cloud=n},getFramePath:function(t){return e.String.format(N.framePath,N.daemonBase,t,N.version,N.frameId,encodeURIComponent(N.origin))},getFrameOrigin:function(){return e.String.format(N.frameOrigin,N.daemonBase,N.framePort)},parseMessage:function(e){return e},cryptArg:function(t){s.request({url:s._encryptUrl(),method:"POST",type:"text",Accept:"text/plain",contentType:"application/x-www-form-urlencoded",postData:{value:t.arg},timeout:6e5,onComplete:function(e){s.getCasTgcAndCasTransientUrl({onComplete:function(n,i){t.onComplete({encrypted:e,tgc:n||"",x3dAuthUrl:i||""})}})},onFailure:function(n){e.log(n),t.onFailure()}})},buildMessage:function(t){var i,o,a=t.data,l=a.arg.functionName;l===f?(i=e.String.format(N.requestPath,N.daemonBase,N.framePort,a.arg.functionName),t.onComplete({id:a.id,data:i})):(o=n.encode(a.arg),-1===D.indexOf(l)?(i=e.String.format(N.functionPathNoCrypt,N.daemonBase,N.framePort,"function",N.version,encodeURIComponent(o)),t.onComplete({id:a.id,data:i})):N.cryptArg({arg:o,onComplete:function(n){i=e.String.format(N.functionPath,N.daemonBase,N.framePort,"function",N.version,encodeURIComponent(n.tgc),encodeURIComponent(s._decryptUrl()),encodeURIComponent(n.encrypted),encodeURIComponent(n.x3dAuthUrl)),t.onComplete({id:a.id,data:i})},onFailure:t.onFailure}))},request:function(n){var i,s,o,a=n.onFailure||function(){},l=function(){o=t.getUUID(),s=function(e){var t=N.parseMessage(e.data),i=t.id,l=t.data;i===o&&(s&&window.removeEventListener("message",s),0===l.returnCode?n.onComplete(l.content):103===l.returnCode||104===l.returnCode?N.showUpgradeModal({onComplete:function(){N.request(n)},onFailure:a}):a({returnCode:l.returnCode,commentary:l.commentary}))},window.addEventListener("message",s),i={id:o,arg:{functionName:n.functionName,params:n.params||{}}},N.buildMessage({data:i,onComplete:function(t){e.log(t),N.frame.contentWindow.postMessage(t,N.getFrameOrigin())},onFailure:a}),e.log(i)};N.installing?setTimeout((function(){N.installed?l():N.installDaemon({onComplete:function(){l()},onFailure:a,silent:n.silent})}),3e3):N.installed?l():N.installDaemon({onComplete:function(){l()},onFailure:a,silent:n.silent})},getLocalPorts:function(){return 0===N.daemonBase.indexOf("https://")?N.ports.localHttps:N.ports.localHttp},installDaemon:function(t){e.log("install daemon");var n=0,i=N.getLocalPorts(),o=i[n],a=function(){!0!==t.silent?N.getDpInfo({onComplete:function(e){N.showModal(t,e)}}):(e.log("launchApp event: silent mode is activated"),N.installing=!1,t.onFailure({}))},l={silent:t.silent,onComplete:t.onComplete,onFailure:t.onFailure,onPortFailure:function(){var t=N.ports.myApps;++n<i.length?(o=i[n],N.installDaemonOnPort(l,o)):n===i.length?e.is(t,"number")?N.installDaemonOnPort(l,t):null===t?a():s.request({url:s._getPreferencesUrl(),type:"text",urlParams:{name:N.storageId},onComplete:function(n){var s=parseInt(n,10);e.is(s,"number")&&-1===i.indexOf(s)?(t=N.ports.myApps=s,N.installDaemonOnPort(l,t)):(N.ports.myApps=null,a())},onFailure:function(){a()}}):a()}};N.installDaemonOnPort(l,o)},installDaemonOnPort:function(t,n,i){var a,l,r;N.installing=!0,r=function(a){var c,d,p=N.parseMessage(a.data);p.id===N.frameId&&(e.log("iframe loaded"),window.removeEventListener("message",r),window.clearTimeout(l),a.origin&&((c=a.origin.split(":")).length>=2&&(d=parseInt(c[2],10)),d!==n&&(N.frame.src=N.getFramePath(d),n=d)),N.framePort=n,localStorage.setItem(N.storageId,N.framePort),i&&s.request({url:s._getSetPreferencesUrl(),urlParams:{name:N.storageId,value:N.framePort}}),N.installing=!1,e.log("Daemon MSI version: "+p.data.msi),e.log("Daemon version: "+p.data.daemon),N.msi=p.data.msi||N.msi,N.version=p.data.daemon||N.version,N.installerType=p.data.type,!0!==t.silent?(N.installed=!0,N.getDpInfo({onComplete:function(n){var i=(n=n[0]).version,a=!n.options||n.options&&!0!==n.options.forceUpdate;null===i||o.compareVersion(N.msi,i)>=0?t.onComplete():(t.onOutdated&&(t.onOutdated(),t.onOutdated=void 0),p.data.daemon&&o.compareVersion(N.version,"2.0")>=0?s.request({url:s._getProcessDetailsUrl(),urlParams:{os:o.getOs()},onComplete:function(e){N.installationPaths=e.installationPaths||[],N.showSelfUpdateModal(t,a)}}):N.showUpgradeModal(t,!0)),e.log("DP version: "+i)}})):t.onComplete&&t.onComplete())},window.addEventListener("message",r),l=window.setTimeout((function(){e.log("frame not loaded:"+N.getFramePath(n)),window.removeEventListener("message",r),a.destroy(),t.onPortFailure()}),N.timeout),a=N.frame=e.createElement("iframe",{src:N.getFramePath(n),class:"daemon-frame",styles:{border:"none",width:"0px",height:"0px"}}).inject(N.root)},uninstallDaemon:function(){N.frame.destroy(),N.installed=!1},_buildDownloadButton:function(e,t,n){var i;return 1===e.length?i=new c({value:o.htmlEntityDecode(A("downloadlauncher")),className:"primary "+t,events:{onClick:function(){window.open(e[0].url),this.disable(),this.setClassName("default "+t),n.enable(),n.setClassName("primary")}}}):(i=new c({value:o.htmlEntityDecode(A("downloadlauncher")),className:"primary "+t,dropdown:{position:"bottom right",items:e.map((function(e){return{"data-url":e.url,text:o.htmlEntityDecode(e.tags.indexOf("ds6w:what/dp3ds:linux-distro/debian")>-1?A("downloadlauncherDeb"):A("downloadlauncherRpm"))}}))}})).addEvent("onDropdownClick",(function(e,i){console.log(i),window.open(i["data-url"]),this.disable(),this.setClassName("default "+t),n.enable(),n.setClassName("primary")})),i},showModal:function(t,n){var s=t.onComplete,o=t.onFailure,a=new c({value:A("continue"),className:"primary",disabled:!0,events:{onClick:function(){var n=parseInt(u.getValue(),10);e.is(n,"number")?(m.show(),t.onComplete=function(){S.hide(),s()},t.onPortFailure=function(){S.getContent().getElement(".modal-content").addClassName("failure"),b.setStyle("height",y.getSize().height+16),m.hide()},t.onOutdated=function(){S.hide()},N.installDaemonOnPort(t,n,!0)):(t.onComplete=s,t.onFailure=o,t.onOutdated=void 0,i.dispatchEvent("onShowMessage",["",3e4,!0]),S.hide(),N.installDaemon(t))}}}),u=new r({value:N.framePort,className:"daemon-port-input",events:{onChange:function(){a.enable(),a.setClassName("primary")},onClick:function(){a.enable(),a.setClassName("primary")},onKeyDown:function(){a.enable(),a.setClassName("primary")}}}),m=e.createElement("div",{class:"compass-loading",styles:{display:"none"},html:new d({visible:!0,className:"compass-spinner"})}),h=e.createElement("div",{tag:"span",class:"fonticon fonticon-info-circled"}),f=e.createElement("div",{tag:"span",class:"fonticon fonticon-info-circled"}),g=n&&n.length>0&&n[0].url?e.createElement("div",{class:"download-wrapper",html:[{tag:"div",class:"compass-java-desc",html:A("launcherfirstvisit")},{tag:"ul",html:[{tag:"li",class:"compass-java-desc",text:A("downloadlauncherclicking")},this._buildDownloadButton(n,"large block download-daemon-btn",a),{tag:"li",class:"compass-java-desc",text:A("installlauncherrunning")},{tag:"li",class:"compass-java-desc",html:[e.String.format(A("clickcontinue"),"<b>","</b>"),{text:A("youcaninstallrun")}]}]}]}):e.createElement("div",{class:"compass-java-desc",html:A("downloadlauncheradmin")}),v=e.createElement("div",{class:"more-wrapper",html:[{tag:"div",class:"compass-java-desc",html:A("alreadyinstalledlauncher")},{tag:"ul",html:[{tag:"li",class:"compass-java-desc",html:[A("launcherdiagnostics"),h]},{tag:"li",class:"compass-java-desc",html:[A("portchanged"),{class:"change-port",html:[{tag:"span",text:A("changeport")},u,f]}]}]}]}),C=e.createElement("div",{class:"more-container",styles:{height:0},html:v}),y=e.createElement("div",{class:"compass-java-desc alert-message alert-error",html:[A("portunreachable")]}),b=e.createElement("div",{class:"alert-wrapper",html:y}),S=new l({className:"compass-modal daemon-wrapper-modal",closable:!0,visible:!0,events:{onHide:function(){N.installing=!1,S.destroy()}},header:"<h4>"+A("welcomelauncher")+"</h4>",body:e.createElement("div",{class:"daemon-modal",html:[b,g,{class:"divider"},new c({value:A("troubleshootbtn"),icon:"right-dir",className:"link",events:{onClick:function(){this.setFocus(!1),C.toggleClassName("open"),C.hasClassName("open")?(this.setIcon("down-dir"),C.setStyle("height",v.getSize().height+16)):(this.setIcon("right-dir"),C.setStyle("height",""))}}}),C,m]}),footer:[a,{tag:"button",class:"btn btn-default",text:A("cancel"),events:{click:function(){S.hide()}}}]}).inject(document.body);new p({target:h,className:"compass-popover list-style-type-disc",position:"right",trigger:"hover",body:[{tag:"li",html:e.String.format(A("checksystrayicon"),'<span class="compass-systray"></span>')},{tag:"li",html:A("dontseelaunchermenu")}]}),new p({target:f,className:"compass-popover list-style-type-decimal",position:"right",trigger:"hover",body:{tag:"ul",html:[{tag:"li",html:e.String.format(A("clicksystrayicon"),'<span class="compass-systray"></span>')},{tag:"li",text:A("copyportnumber")},{tag:"li",text:A("pasteportnumber")},{tag:"li",html:e.String.format(A("clickcontinue"),"<b>","</b>")}]}}),i.dispatchEvent("onHideMessage")},showUpgradeModal:function(t,n){var s=!1,a=!1,r=N.dpInfo&&N.dpInfo[0]?N.dpInfo[0]:null,d=r?r.url:null,p="large block download-daemon-btn",u=new c({value:A("continue"),className:"primary",disabled:!0,events:{onClick:function(){s=!0,i.dispatchEvent("onShowMessage",["",3e4,!0]),m.hide()}}}),m=new l({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){m.destroy(),s?a?t.onComplete():(N.uninstallDaemon(),N.installDaemon(t)):N.uninstallDaemon()}},header:"<h4>"+A("launcherupdate")+"</h4>",body:e.createElement("div",{class:"daemon-modal",html:r?[{tag:"div",class:"compass-java-desc",html:e.String.format(A("updateinfos"),"","",r.version,(r.size/1e6).toFixed(2))},{tag:"div",class:"compass-java-desc",text:"1. "+A("downloadupdateclicking")},new c({value:o.htmlEntityDecode(A("downloadlauncher")),className:"primary "+p,events:{onClick:function(){window.open(d),this.disable(),this.setClassName("default "+p),u.enable(),u.setClassName("primary")}}}),{tag:"div",class:"compass-java-desc",text:e.String.format("2. "+A("installupdaterunning"),"3DEXPERIENCELauncher")},{tag:"div",class:"compass-java-desc",html:e.String.format("3. "+A("clickcontinue"),"<b>","</b>")}]:{tag:"div",class:"compass-java-desc",text:A("updatelauncheradmin")}}),footer:d?[u,n?new c({value:A("proceedanyway"),events:{onClick:function(){s=!0,a=!0,i.dispatchEvent("onShowMessage",["",3e4,!0]),m.hide()}}}):null]:null}).inject(document.body);i.dispatchEvent("onHideMessage")},showSelfUpdateModal:function(t,n){var s=!1,o=!1,r=N.dpInfo&&N.dpInfo[0]?N.dpInfo[0]:null,d=r?r.url:null,p="large block download-daemon-btn",u=N._buildInstallationPaths(),m=new c({value:A("continue"),className:"primary",disabled:!0,events:{onClick:function(){s=!0,i.dispatchEvent("onShowMessage",["",3e4,!0]),f.hide()}}}),h=new c({value:A("proceedanyway"),events:{onClick:function(){s=!0,o=!0,i.dispatchEvent("onShowMessage",["",3e4,!0]),f.hide()}}}),f=new l({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){f.destroy(),s?o?t.onComplete():(N.uninstallDaemon(),N.installDaemon(t)):N.uninstallDaemon()}},header:"<h4>"+A("launcherupdate")+"</h4>",body:e.createElement("div",{class:"daemon-modal",html:d?[{tag:"div",class:"compass-java-desc",html:e.String.format(A("updateinfos"),'<a href="'+r.url+'">',"</a>",r.version,(r.size/1e6).toFixed(2))},{tag:"div",class:"compass-java-desc",text:"1. "+A("startselfupdateclicking")},new c({value:A("startselfupdate"),className:"primary "+p,events:{onClick:function(){var t,n=this;!u.path&&u.pathSelect&&"cloud"!==u.pathSelect.getValue()[0]&&(t=u.pathSelect.getValue()[0]),h.disable(),N.selfUpdate({path:t,onComplete:function(){m.enable(),m.setClassName("primary")},onFailure:function(t){e.log("Self update failed with code "+t.returnCode+" ("+t.commentary+")"),new a({visible:!0}).inject(f.getBody(),"top").add({className:"error",message:A("selfupdateerror")}),n.enable(),n.setClassName("primary "+p)}}),this.disable(),this.setClassName("default "+p)}}}),{tag:"div",class:"compass-java-desc",text:"2. "+A("selfupdaterunning")},{tag:"div",class:"compass-java-desc",html:e.String.format("3. "+A("clickcontinue"),"<b>","</b>")},u.pathElmt]:{tag:"div",class:"compass-java-desc",text:A("updatelauncheradmin")}}),footer:d?[m,n?h:null]:null}).inject(document.body);i.dispatchEvent("onHideMessage")},selfUpdate:function(e){e.functionName=S,e.params||(e.params={}),e.params.url=N.dpInfo[0].url,e.params.hash=N.dpInfo[0].md5,e.params.size=N.dpInfo[0].size,e.path&&(e.params.dataStoragePath=e.path),N.request(e)},discoverAllInstall:function(e){e.functionName=g,N.request(e)},startV6install:function(t,n){var s;t.functionName=v,t.params||(t.params={}),t.params.fileArgStrings=[],I&&(t.params.fileArgStrings.push({name:"-file",content:I}),this._addOpenFromWebArg(t),this._removeObjectFromLaunchInfos(t)),t.file&&t.file.name&&t.file.content&&(t.params.fileArgStrings.push({name:t.file.name,content:t.file.content}),this._addOpenFromWebArg(t),this._removeObjectFromLaunchInfos(t)),this._addRegistryUrl(t),e.log(t.params.fileArgStrings),e.merge(t.params,N._getCatEnvInformation(t.params,n)),(s=N.scriptsConfiguration.detect((function(e){return e.id===n.getPlatformId()})))&&s.beforeLaunch?N.launchScript({params:{name:s.beforeLaunch,params:e.String.format('-tenant "{0}" -user "{1}" -id "{2}" -name "{3}" -version "{4}"',n.getPlatformId(),m._getUser(),n.get("id"),n.get("title"),t.install.get("longName"))},onComplete:function(){N.request(t)},onFailure:function(e){i.dispatchEvent("onShowMessage",e.commentary)}}):N.request(t)},_getCatEnvInformation:function(e,t){var n;if(N.catEnvConfig){var i=e.argString.match(/-tenant=([^ ]+)/),s=null;i&&i.length>1?(s=i[1],t&&(n=t.getPreferredCatEnv(s)),n||(n=N.catEnvConfig.detect((function(e){return e.id===s||e.platformId===s})))&&n.catEnvDetails&&1===n.catEnvDetails.length&&(n=n.catEnvDetails[0])):N.catEnvConfig.length>0&&(n=N.catEnvConfig[0]),n&&n.direnv&&n.env&&(n={dirEnv:n.direnv,catEnvFileName:n.env})}return n},_addOpenFromWebArg:function(e){e&&e.params&&e.params.argString&&-1===e.params.argString.indexOf("-e CATUNILoadFromWebCmdHdr Open")&&(e.params.argString+=" -e CATUNILoadFromWebCmdHdr Open")},_addRegistryUrl:function(e){e&&e.params&&e.params.argString&&-1===e.params.argString.indexOf("-RegistryUrl")&&s.registryUrl?e.params.argString+=" -RegistryUrl="+s.registryUrl:e&&e.argString&&-1===e.argString.indexOf("-RegistryUrl")&&s.registryUrl&&(e.argString+=" -RegistryUrl="+s.registryUrl),e&&e.params&&e.params.argString&&-1===e.params.argString.indexOf("-3DRegistryURL")&&s.registryUrl?e.params.argString+=" -3DRegistryURL="+s.registryUrl:e&&e.argString&&-1===e.argString.indexOf("-3DRegistryURL")&&s.registryUrl&&(e.argString+=" -3DRegistryURL="+s.registryUrl)},_removeObjectFromLaunchInfos:function(e){e&&e.params&&e.params.argString&&e.params.argString.indexOf("-object")>-1&&(e.params.argString=e.params.argString.replace(/ -object ([^ ]+)/,"")),e&&e.params&&e.params.argString&&e.params.argString.indexOf("-objectType")>-1&&(e.params.argString=e.params.argString.replace(/ -objectType "([^"]+)"/,""))},createV6Shortcut:function(t,n){var s,a,l=n.get("icon"),r=o.isBase64Image(l)?l:l.substring(l.lastIndexOf("/")+1,l.lastIndexOf(".")),c=" - "+t.get("name"),d=o.htmlEntityDecode(n.get("title")),p=n.get("tooltip")?o.htmlEntityDecode(n.get("tooltip")):d,u={instID:t.get("daemonId"),exeName:n.getExeName(),argString:n.getShortcutLaunchInfos(),scName:d+c,iconRelPath:r,scDesc:"",nativeLauncherName:n.get("launcher")};i.dispatchEvent("onShowMessage",e.String.format(A("creatingshortcut"),p)),d!==p&&(u.scDesc=p+c),this._addRegistryUrl(u),a=function(){s={functionName:C,params:u,onComplete:function(){i.dispatchEvent("onShowMessage",A("shortcutcreated")),i.dispatchEvent("onHideMessage",5e3)},onFailure:function(t){e.log(t),i.dispatchEvent("onShowMessage",A("shortcutcreatingerror")),i.dispatchEvent("onHideMessage",5e3)}},e.merge(s.params,N._getCatEnvInformation(s.params,n)),N.request(s)},l&&n&&n.get&&0===n.get("id").indexOf("MAP-")?N.convertToBase64Uri(l,(function(e){u.iconRelPath=e,a()})):a()},convertToBase64Uri:function(t,n){var i=-1===t.indexOf("?")?"?":"&",s=e.createElement("img",{className:"hidden",src:t+i+"xrequestedwith=xmlhttprequest",attributes:{crossOrigin:"anonymous"},styles:{height:"64px",width:"64px",display:"none"}});s.addEventListener("load",(function(t){n(function(t){var n=e.createElement("canvas"),i=n.getContext("2d");return n.width=t.width,n.height=t.height,i.drawImage(t,0,0),n.toDataURL("image/png")}(t.currentTarget)),s.destroy()})),s.inject(document.body)},uninstallMedia:function(e){e.functionName=b,N.request(e)},installMedia:function(t){var n=N.scriptsConfiguration.detect((function(e){return null!==e.id}));if(t.functionName=y,n&&n.afterInstallation){var s=e.clone(t.onComplete);t.onComplete=function(){s.call(arguments),N.launchScript({params:{name:n.afterInstallation},onComplete:function(){e.log("Success:"+n.afterInstallation)},onFailure:function(t){e.log(t.commentary)}})}}n&&n.beforeInstallation?N.launchScript({params:{name:n.beforeInstallation},onComplete:function(){N.request(t)},onFailure:function(e){i.dispatchEvent("onShowMessage",e.commentary)}}):N.request(t)},launchScript:function(e){e.functionName=w,N.request(e)},isDaemonBusy:function(e){e.functionName=f,N.request(e)},getDpInfo:function(t){if(N.cloud)if(N.dpInfo)t.onComplete(N.dpInfo);else{var n=o.getOs(),i=[e.String.format(E,"category","3DEXPERIENCELauncher"),e.String.format(E,"os",e.String.ucfirst(n))],a={id:(new Date).getTime(),method:"ResourcesV3::check",params:{tags:i,refine:s.clusterId}};s.request({url:s.onlineInstallUrl,proxy:"ajax",method:"POST",contentType:"application/json",postData:JSON.stringify(a),onComplete:function(e){var n=o.getOsDistribution();if(N.dpInfo=e.result.records,n){var i=N.dpInfo.filter((function(e){return e.tags.indexOf("ds6w:what/dp3ds:linux-distro/"+n)>-1}));i.length>0&&(N.dpInfo=i)}else N.installerType&&N.dpInfo.length>1&&(N.dpInfo=N.dpInfo.filter((function(e){return e.url.indexOf("."+N.installerType.toLowerCase())>-1})),console.log(N.dpInfo));t.onComplete(N.dpInfo)},onFailure:function(){t.onComplete([{version:null}])}})}else t.onComplete([{version:null}])},setStructure:function(e){I=e},resetStructure:function(){I=null},setLauncherConfig:function(e){var t=e.split(":"),n=parseInt(t[t.length-1],10);n&&(localStorage.setItem(N.storageId,n),e=e.replace(":"+n,"")),N.daemonBase=e},setCatEnvConfig:function(e){N.catEnvConfig=e},setScriptsConfiguration:function(e){N.scriptsConfiguration=e},_buildInstallationPaths:function(){var t,n,i,s,a=o.removeDoublons(N.installationPaths);return 0===a.length?t=null:(a.push({label:A("DefaultInstallationLocation"),value:"cloud"}),s=a.map((function(e,t){return{label:e.label||e,value:void 0!==e.value?e.value:e,selected:0===t}})),i=new u({placeholder:!1,options:s}),n=e.createElement("div",{class:"compass-install-path",html:[{tag:"div",class:"compass-install-desc",text:A("instfilelocation")},i]})),{path:t,pathSelect:i,pathElmt:n}}};return N})),define("DS/i3DXCompass/Collection/ProductList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Model/Product","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o){"use strict";return t.extend({model:s,installList:null,validData:!1,data:null,isValid:[],setup:function(e){this.installList=e.installList},sync:function(e,t,s){var o,a=this,l=!1;if("read"===e)o=this.data={},n.request({url:n._getProcessDetailsUrl(),urlParams:{os:i.getOs()},onComplete:function(e){var t,l=[],c=[];if(o.myapps=e,e.about&&e.about.forEach((function(e){"BuildTransactionID"===e.key&&(t=e.value,o.transactionId=t)})),e.cloud){if(e.env){e.env.forEach((function(e){e.licenses.forEach((function(e){i.pushUnique(l,e.id)}))})),a.installList.forEach((function(e){c.push(e.get("dpIdObj")),e.get("processes").forEach((function(e){i.pushUnique(l,e)}))}));var d={id:(new Date).getTime(),method:"CodeLevelV4::status",params:{podID:t,clusterID:n.clusterId,processes:l,installs:c,type:"CODE",selectedApp:s.appId,os:i.getOs()}};n.request({url:n.onlineInstallUrl,proxy:"ajax",method:"POST",contentType:"application/json",postData:JSON.stringify(d),onComplete:function(e){o.downloadplatform=e,r()},onFailure:function(){r()}})}}else s&&s.onComplete&&r()},onFailure:function(){r()}});function r(){!l&&s&&s.onComplete&&(l=!0,s.onComplete(o))}},parse:function(t){var n=[],i={},s=t.myapps,o=t.downloadplatform;return this.installList.forEach((function(t){t.get("processes").forEach((function(t){var s=i[t];e.is(s)||(n.push({id:t,env:[]}),i[t]=n.length-1)}))})),s&&s.env&&(s.env.forEach((function(t){t.licenses.forEach((function(s){var o=s.id,a=i[o];e.is(a)?(n[a].env.push(t.id),n[a].granted||(n[a].granted=!0,n[a].title=s.title,n[a].apps=s.apps)):(n.push(e.merge(s,{env:[t.id],granted:!0})),i[o]=n.length-1)}))})),o&&o.result&&o.result.stacks.forEach((function(e){e.processes.forEach((function(t){var s=i[t];n[s]&&(n[s].installType=e.installType,n[s].online=!0)}))}))),n},update:function(e){var t=this;this.fetch({appId:e.appId,onComplete:function(n,i,s){t.data=i,i.change=!0,e&&e.onComplete&&e.onComplete(n,i,s)}})},invalidate:function(){this.isValid=[]}})})),define("DS/i3DXCompass/Controls/Compass",["UWA/Core","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract","DS/i3DXCompass/Tools","DS/UIKIT/Tooltip","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/Data","DS/i3DXCompassServices/i3DXCompassPubSub","UWA/Utils","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o,a,l,r,c,d){"use strict";var p=0,u={defaultOptions:{defaultQuadrant:"north",useQuadrantsOnTouch:!0},slideTimeout:0,getCompassOverClassName:function(){return s.isCompassV3()&&this.elements&&this.elements.compassBase&&!this.elements.compassBase.hasClassName("animate")?c.Client.getSize().width<959?"compass-over-v3-icon":"compass-over-v3":"compass-over"},quadrantNames:{north:"",east:"",south:"",west:"",play:""},quadrantLinkMapping:{north:"X3DMCTY_AP",east:"X3DDASH_AP",west:"MAP-EJOMVJSXC",south:"MAP-HNRPQLSTN"},offsets:{north:{x:32,y:20},east:{x:64,y:32},south:{x:32,y:64},west:{x:20,y:32},play:{x:40,y:40}},tooltipsOffsets:{north:[{x:14,y:-23},{x:-12,y:-20}],east:[{x:30,y:0},{x:15,y:15}],south:[{x:14,y:23},{x:-12,y:32}],west:[{x:-20,y:0},{x:-37,y:17}],play:[{x:14,y:0},{x:0,y:5}]},quadrantAction:"Click",currentQuadrant:null,highlightedQuadrant:null,open:!1,closable:!0,typeCompassView:"compassBase",activePlay:!1,playParam:!1,init:function(t){this._parent(t),e.is(t.closable)&&(this.closable=t.closable),this.updateCurrentQuadrant(),this.buildSkeleton()},updateCurrentQuadrant:function(){this.currentQuadrant=s.getCurrentQuadrant()},buildSkeleton:function(){var t=this.elements={},i=this;t.compassSmallOver=e.createElement("div",{class:"compass-small-over"}),t.compassQuadrantPlay=e.createElement("div",{class:"quadrant-play"}),t.compassQuadrantPlaySmall=e.createElement("div",{class:s.isSupportQuickLink()?"quadrant-play-small "+this.currentQuadrant:"quadrant-play-small"}),t.compassSmall=(s.isCompassV3(),e.createElement("div",{class:"compass-small",html:[t.compassSmallOver,t.compassQuadrantPlaySmall],events:{click:function(e){1===p?setTimeout((function(){i.dispatchEvent("onCompassSmallClick",[e,n.Features.touchEvents]),p=0}),500):i.dispatchEvent("onCompassSmallClick",[e,n.Features.touchEvents])},mousemove:function(e){i.dispatchEvent("onCompassSmallOver",[e])},mouseout:function(){i.dispatchEvent("onCompassSmallOut")}}})),t.compassOver=e.createElement("div",{class:this.getCompassOverClassName()}),t.compassOn=e.createElement("div",{class:"compass-on"+(s.isCompassV2()||s.isCompassV3()?" "+this.currentQuadrant:"")}),t.compassBase=e.createElement("div",{class:"compass-base",html:[t.compassOver,t.compassOn,t.compassQuadrantPlay],events:{click:function(e){s.isCompassV3()?i.open?i.dispatchEvent("onCompassBaseClick",[e]):i.dispatchEvent("onOpenQuadrant",i.currentQuadrant):i.dispatchEvent("onCompassBaseClick",[e])},mousemove:function(e){if(s.isCompassV3()&&n.Features.touchEvents)return!0;i.dispatchEvent("onCompassBaseOver",[e])},mouseout:function(){i.dispatchEvent("onCompassBaseOut")},transitionEnd:i.updateOpenState.bind(i)}}),this.container=t.container=e.createElement("div",{class:"compass-ct",html:[t.compassSmall,t.compassBase]}),this.updateTopBarLog(this.currentQuadrant),this.hackIconTopBar()},getQuadrant:function(e,t,n,i,s,o){var a=e+t-o>0,l=o/2,r=(e-l)*(e-l)+(t-l)*(t-l);return r<i?r<n?"play":null:r>s?null:e-t>0?a?"east":"north":a?"south":"west"},initTranslate:function(){this.elements.tooltip=new o({target:this.elements.compassSmall,delay:{show:300},body:e.i18n("compassTooltipv3"),position:"right",className:"compass-small-tooltip"})},onCompassSmallClick:function(n,i){var o,a,l;o=t.getPosition(n),a=this.elements.compassSmall.getOffsets(),l=this.getQuadrant(o.x-a.x,o.y-a.y,256,256,1024,64),s.isCompassV2()?this.clickQuadrant(l):i&&!this.options.useQuadrantsOnTouch?this.clickQuadrant(this.currentQuadrant||this.options.defaultQuadrant):(e.log("click compass: clientX "+n.clientX+"; clientY "+n.clientY),l&&(this.quadrantAction="Open",this.clickQuadrant(l)))},onCompassBaseClick:function(e){var n,i,o;n=t.getPosition(e),i=this.elements.compassBase.getOffsets(),o=o=s.isCompassV2()?s.isOpenFullSize()?this.getQuadrant(n.x-i.x,n.y-i.y,2756,2756,8649,186):this.getQuadrant(n.x-i.x,n.y-i.y,256,256,1024,64):this.getQuadrant(n.x-i.x,n.y-i.y,1378,1378,3844,124),s.isCompassV2()?this.clickQuickLink(o):this.isPlayEvent(o)?(r.publish("activatePlayCallback",this.playParam),this.onActivePlay(!1),this.closeCompassOnActivePlay()):("play"!==o||s.isCompassV3())&&(this.quadrantAction="Click",this.clickQuadrant(o))},onCompassSmallOver:function(e){if(!(s.isSmartphone()||n.Features.touchEvents&&"ios"===s.getOs())){var i,o,a,l=this.elements,r=this.elements.tooltip,c=l.compassSmallOver,d=l.compassSmall,p=l.compassQuadrantPlay,u=l.compassQuadrantPlaySmall;i=t.getPosition(e),o=this.elements.compassSmall.getOffsets(),a=a=this.getQuadrant(i.x-o.x,i.y-o.y,256,256,1024,64),this.isPlayEvent(a)?(p.addClassName("over"),u.addClassName("over"),r.hide(),this.showTooltip(a),d.setStyle("cursor","pointer")):a!==this.highlightedQuadrant&&s.isSupportQuickLink()&&(this.highlightedQuadrant=a,c.className="compass-small-over",a?(r.hide(),this.showTooltip(a),c.addClassName(a),d.setStyle("cursor","")):d.setStyle("cursor","default"))}},closeCompassOnActivePlay:function(){s.isOpenFullSize()&&(this.dispatchEvent("onClose"),this.quadrantAction="Close")},onActivePlay:function(e,t,n){var i=this.elements,s=i.compassQuadrantPlay,o=i.compassQuadrantPlaySmall,a=document.body.getElement(".topbar-logo");a&&a.toggleClassName("play",e),e&&t&&(this.playParam=t),e!==this.activePlay&&(this.activePlay=e,e?(s.addClassName("play-activated"),o.addClassName("play-activated")):(s.setStyle("opacity",0),o.setStyle("opacity",0),setTimeout((function(){s.removeClassName("play-activated"),o.removeClassName("play-activated"),s.setStyle("opacity",1),o.setStyle("opacity",1)}),301),t&&r.publish("resetPlayCallback",t)))},onCompassSmallOut:function(){s.isSmartphone()||(this.elements.compassSmallOver.className="compass-small-over",this.highlightedQuadrant=null,this.elements.compassQuadrantPlay.removeClassName("over"),this.elements.compassQuadrantPlaySmall.removeClassName("over"))},onCompassBaseOver:function(e){var n,i,o,a=this.elements,l=a.compassOver,r=a.compassBase,c=this.elements.tooltip;n=t.getPosition(e),i=this.elements.compassBase.getOffsets(),(o=o=s.isCompassV2()?s.isOpenFullSize()?this.getQuadrant(n.x-i.x,n.y-i.y,2756,2756,8649,186):this.getQuadrant(n.x-i.x,n.y-i.y,256,256,1024,64):this.getQuadrant(n.x-i.x,n.y-i.y,1378,1378,3844,124))&&this.isPlayEvent(o)?(this.elements.compassQuadrantPlay.addClassName("over"),this.elements.compassQuadrantPlaySmall.addClassName("over"),this.elements.compassBase.setStyle("cursor","pointer")):o&&o!==this.highlightedQuadrant&&(this.highlightedQuadrant=o,l.className=this.getCompassOverClassName(),s.isCompassV3()?(r.setStyle("cursor","pointer"),this.elements.compassBase.hasClassName("animate")?(c.hide(),this.showTooltip(o,!1,!0,!0),setTimeout((function(){l.addClassName(o),l.addClassName("active-over")}),10)):(l.addClassName("over"),this.showTooltip("north","My 3DEXPERIENCE Compass",!0,!1))):"play"!==o||s.isCompassV2()?(l.addClassName(o),r.setStyle("cursor","")):r.setStyle("cursor","default"))},onCompassBaseOut:function(){s.isCompassV3()&&(this.elements.tooltip.hide(),this.elements.compassOver.className=this.getCompassOverClassName()),this.highlightedQuadrant=null,this.elements.compassQuadrantPlay.removeClassName("over"),this.elements.compassQuadrantPlaySmall.removeClassName("over")},clickQuickLink:function(e){this.currentQuadrant=e,this.quadrantAction="Close",this.open=!1,this.elements.compassOn.className="compass-on "+e,this.dispatchEvent("onOpenQuadrant",e),s.isOpenFullSize()&&this.dispatchEvent("onCloseCompassOverlayView"),a.clickQuadrant(e)},clickQuadrant:function(t){if(s.isSupportQuickLink()&&"play"!==t&&!this.open)return this.currentQuadrant=t,s.setCurrentQuadrant(t),r.publish("compassEvent",{quadrant:t}),void(this.elements.compassQuadrantPlaySmall.className="quadrant-play-small "+t);d.isMobileAppEnvironment()&&s.isSupportQuickLink()&&this.open&&!this.isPlayEvent(t)?"play"!==t&&(this.currentQuadrant=t,s.setCurrentQuadrant(t),this.dispatchEvent("onOpenQuadrant",t)):(s.isCompassV3()&&this.open&&this.closable&&!this.isPlayEvent(t)?!1===e.is(l.addinMode)&&(window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("myembeded")>-1?(s.setCurrentQuadrant(t),this.currentQuadrant=t,this.iframeMy||(this.iframeMy=e.createElement("iframe",{styles:{height:"100%",width:"100%",border:0},tag:"iframe"})),this.iframeMy.src="https://dsext001-eu1-215dsi0708-my3dexperience.3dexperience.3ds.com/#"+t.toLowerCase(),this.elements.compassOn.className="compass-on "+t,document.querySelector("compass-nav-second .active")&&document.querySelector("compass-nav-second .active").removeClassName&&document.querySelector("compass-nav-second .active").removeClassName("active"),document.querySelector("compass-nav-main .active")&&document.querySelector("compass-nav-main .active").removeClassName&&document.querySelector("compass-nav-main .active").removeClassName("active"),document.body.getElement("compass-content").setContent(this.iframeMy)):("play"!==t&&(s.setCurrentQuadrant(t),this.currentQuadrant=t,s.isSupportQuickLink()&&(this.elements.compassQuadrantPlaySmall.className="quadrant-play-small "+t,this.updateTopBarLog(t))),this.dispatchEvent("onClose"),this.quadrantAction="Close")):s.isCompassV3()&&this.open&&!this.closable&&!this.isPlayEvent(t)?"play"!==t&&(this.currentQuadrant=t,s.setCurrentQuadrant(t),this.dispatchEvent("onOpenQuadrant",t)):t===this.currentQuadrant&&this.open&&this.closable&&!this.isPlayEvent(t)?!1===e.is(l.addinMode)&&(p=1,setTimeout((function(){p=0}),500),this.dispatchEvent("onClose"),this.quadrantAction="Close"):(this.currentQuadrant=t,this.dispatchEvent("onOpenQuadrant",t)),a.clickQuadrant({quadrant:t}))},onClose:function(){this.open=!1,this.elements.compassBase.hasClassName("animate")&&this.elements.compassBase.removeClassName("animate"),s.isCompassV2()&&c.Client.getSize().width,this.container.removeClassName("open"),s.isSmartphone()&&document.body.getElement(".my-apps-panel").hasClassName("onSmartphone")?this.typeCompassView="compassSmall":this.typeCompassView="compassBase",document.querySelector(".topbar-logo")&&document.querySelector(".topbar-logo").className&&document.querySelector(".topbar-logo").className.indexOf&&document.querySelector(".topbar-logo").className.indexOf("default-compass-active")>-1&&(document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" default-compass-active",""))},isPlayEvent:function(e){return this.activePlay&&"play"===e},onOpenQuadrant:function(e){var t=this;s.isCompassV2()?this.open=!0:this.isPlayEvent(e)||(this.open||(this.open=!0,this.container.addClassName("open"),window.setTimeout((function(){t.elements.compassBase.addClassName("animate")}),50)),this.elements.compassOn.className=s.isCompassV3()?"compass-on ":"compass-on "+e)},updateOpenState:function(){this.open||s.isCompassV2()||s.isCompassV3()||this.container.removeClassName("open")},setQuadrantNames:function(e){var t=this.quadrantNames;t.north=e.north,t.east=e.east,t.south=e.south,t.west=e.west,t.play=e.play},resetQuadrant:function(){this.elements.compassQuadrantPlaySmall.removeClassName("east").removeClassName("west").removeClassName("north").removeClassName("south"),s.setCurrentQuadrant(null)},_getQuadrantRelatedOffset:function(e,t,n,i,s){var o=this.tooltipsOffsets&&this.tooltipsOffsets[e][i];if(o)return s?{x:2*o.x+t,y:2*o.y+n}:{x:o.x+t,y:o.y+n}},showTooltip:function(t,n,i,o){var a,l,r,c,d,p,u,m;this.quadrantNames[t]&&(l=i?this.elements.compassBase.getSize():this.elements.compassSmall.getSize(),this.elements.tooltip.options.target=i?this.elements.compassBase:this.elements.compassSmall,u=l.height/2,(a=this.elements.tooltip).setBody(n||(!1!==this.open||s.isSupportQuickLink()?this.quadrantNames[t]:e.i18n("compassTooltipv3"))),c=1===(r=(m=a.elements.container.getSize().height/25)>1&&("east"!==t&&"west"!==t||m>=2)?1:0)?"bottom bottom-left":"right",d=1===r?u:-u,p=1===r?-u:0,a.options.offset=this._getQuadrantRelatedOffset(t,d,p,r,o),""!==this.quadrantNames[t]&&(a.show(),a.updatePosition(c)))},updateTopBarLog:function(e){var t=document.body.getElement(".topbar-logo");s.isSupportQuickLink()&&document.querySelector(".topbar-logo")&&(document.querySelector(".topbar-logo").className&&-1===document.querySelector(".topbar-logo").className.indexOf("compass-v3")&&(document.querySelector(".topbar-logo").className+=" compass-v3"),document.querySelector(".topbar-logo").className&&-1===document.querySelector(".topbar-logo").className.indexOf(e)&&this.open&&(document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" north",""),document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" east",""),document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" west",""),document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" play",""),document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" south",""),document.querySelector(".topbar-logo").className+=" "+e)),c.Client.getSize().width<959&&!this.open&&t&&!t.hasClassName("default-compass")&&t.addClassName("default-compass")},disPatchCloseByClickQuadrant:function(){this.dispatchEvent("onClose")},hackIconTopBar:function(){var e=this;document.querySelector(".topbar-logo")&&document.querySelector(".topbar-logo").addEventListener("click",(function(t){c.Client.getSize().width<959&&!s.isSupportQuickLink()&&(e.open?(t.stopPropagation(),e.disPatchCloseByClickQuadrant(),document.querySelector(".topbar-logo").className&&document.querySelector(".topbar-logo").className.indexOf&&document.querySelector(".topbar-logo").className.indexOf("default-compass-active")>-1&&(document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" default-compass-active",""))):!e.open&&document.querySelector(".topbar-logo").className&&(document.querySelector(".topbar-logo").className+=" default-compass-active")),c.Client.getSize().width<959&&e.open&&document.querySelector(".topbar-logo").className&&(document.querySelector(".topbar-logo").className+=" default-compass")}))}};return i.extend(u)})),define("DS/i3DXCompass/Collection/InstallList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Model/Install","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data"],(function(e,t,n,i,s,o){"use strict";var a=e.i18n;return t.extend({model:n,parse:function(e){var t=this,n=[];return e.forEach((function(e){var i;e.lastBuildId&&("CODE"===e.type||"CNT"===e.type)&&t.isAvailableForCurrentEnvironment(e)&&(e.processes=(e.installedProcesses||[]).map((function(e){return e.split(".")[0]})),i=e.processes[0],e.dpId=e.lastBuildId+"+"+i,e.dpIdObj={ID:e.lastBuildId,process:i,golden:-1===(e.SPlevel||"").indexOf("."),release:"R"+e.level,SPLevel:e.SPlevel},e.name=(e.longName||e.GAlevel)+(e.registry_Identifier&&"!"!==e.registry_Identifier?" - "+e.registry_Identifier:""),e.daemonId=e.id,e.id=e.GAlevel+e.installationType+(e.registry_Identifier||""),n.push(e))})),n},isAvailableForCurrentEnvironment:function(e){var t=!0,n=o.buildTransactionId&&o.buildTransactionId.split("-")[0],i=e.installationType.indexOf("_Cloud")>-1;return(n>="R421"||""===n)&&e.installationType.toLowerCase().indexOf("desktop")>-1&&(t=o.cloud?i:!i),t},sync:function(e,t,n){if("read"===e)i.discoverAllInstall({onComplete:function(e){n&&n.onComplete&&n.onComplete(e)},onFailure:function(){s.dispatchEvent("onShowMessage",[a("unableinstalldata"),5e3]),n&&n.onFailure&&n.onFailure()},silent:n._silent})}})})),define("DS/i3DXCompass/ServiceApi/UserServiceApi",["UWA/Core","UWA/Utils","DS/i3DXCompass/Data","DS/i3DXCompass/CacheManager"],(function(e,t,n,i){"use strict";var s,o,a,l=!1,r=!1,c=[],d=function(){return p()?p()+"api/pull/self":null},p=function(){return n.myAppsBaseUrl||a},u=function(e){c.forEach((function(t){t[e]&&setTimeout(t[e],0,s)})),c.length=0},m=function(){r=!0,n.request({url:d(),headers:{"Last-Modified":undefined},onComplete:function(e,t){s=e,l=!0,t["Last-Modified"],u("onComplete"),r=!1},onFailure:function(){u(s?"onComplete":"onFailure"),r=!1}})},h=function(t){var n,p=Date.now();!d()&&(t.config&&t.config.myAppsBaseUrl||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl)&&(a=(a=(a=t.config&&t.config.myAppsBaseUrl?t.config.myAppsBaseUrl:COMPASS_CONFIG.myAppsBaseUrl).replace("/resources/AppsMngt","")).replace(/\/$/,"")+"/resources/AppsMngt/"),!i._getUser()&&(t.config&&t.config.userId||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.userId)&&(t.config&&t.config.userId?i.setup(t.config.userId,t.config.lang):i.setup(COMPASS_CONFIG.userId,COMPASS_CONFIG.lang)),l&&(!o||p-o<36e5)?t.onComplete(s):(o=p,c.push({onComplete:t.onComplete,onFailure:t.onFailure}),r||(d()?m():n=setInterval((function(){d()?(clearInterval(n),m()):e.log("wait for myapps url")}),200)))};return{getUser:function(t){t&&"function"===e.typeOf(t.onComplete)&&h({config:t.config,onComplete:function(n){var i=t.platformId;if(n=e.clone(n),t.platformId)if(n.platform=e.Array.detect(n.platforms,(function(e){return e.id===i})),delete n.platforms,n.platform)n.admin="admin"===n.platform.role;else if(n.admin=!1,t.onFailure)return t.onFailure();t.onComplete(n)},onFailure:t.onFailure})},_private:{callbacks:c,fireCallbacks:u,reset:function(){s=void 0,l=!1,r=!1}}}})),define("DS/i3DXCompass/View/PortfolioContactFormView",["UWA/Core","UWA/Class/View","DS/UIKIT/Mask","DS/i3DXCompass/ServiceApi/UserServiceApi","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature","DS/WebappsUtils/WebappsUtils","UWA/Utils"],(function(e,t,n,i,s,o,a,l){"use strict";var r=e.i18n,c=function(){return window.dsDashboardWindow&&window.dsDashboardWindow.parent&&window.dsDashboardWindow.parent.parent?window.dsDashboardWindow.parent.parent:window.parent.parent};return t.extend({tagName:"div",className:"view-portfolio-contact",_id:"LDP52696",assetUrl:"https://dassaultsystemes-mkt-stage5.campaign.adobe.com/dsx/embedWebApp.jssp",setup:function(e){this._uid=l.getUUID();var t=o.getContactFormConfiguration();t&&t.id&&t.assetUrl&&(this._id=t.id,this.assetUrl=t.assetUrl),e.id&&(this._id=e.id),e.assetUrl&&(this.assetUrl=e.assetUrl)},render:function(){var t=this,o={id:this._id,assetUrl:this.assetUrl,uid:this._uid,successMessage:r("Thank you for contacting Dassault Systmes. </br></br>Your request has been correctly sent and will be treated in the shortest possible time.")};if(s._getUser())i.getUser({onComplete:function(e){var i=btoa(JSON.stringify(o));t.container.setContent({tag:"iframe",src:a.getWebappsAssetUrl("i3DXCompass","iframes/portfolio-contact-form.html?"+i)}),window.addEventListener("message",t._receiveMessage.bind(t)),n.mask(t.container)}});else{var l=btoa(JSON.stringify(o)),c=e.createElement("iframe",{src:a.getWebappsAssetUrl("i3DXCompass","iframes/portfolio-contact-form.html?"+l)});t.container.setContent(c),window.addEventListener("message",t._receiveMessage.bind(t)),n.mask(t.container)}return this},_receiveMessage:function(t){var i=this,s=t&&t.data;if(s)try{(s=JSON.parse(s)).id==="portfolio-contact-form-"+this._uid&&("onSuccess"===s.action?i.dispatchEvent("onClose"):"onLoaded"===s.action?n.unmask(i.container):"onResize"===s.action&&i.container.getElement("iframe").setStyle("height",s.value))}catch(t){e.log(t)}},_injectFormScript:function(){if(window.DSxWebAppForm)this._getUserInfoAndLoadForm();else{var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.onload=this._getUserInfoAndLoadForm.bind(this),e.src=this.assetUrl,document.getElementsByTagName("head")[0].appendChild(e)}},_getUserInfoAndLoadForm:function(){var e=this;s._getUser()?i.getUser({onComplete:function(t){e._loadForm({takecontrol:function(e,t){document.body.getElementsByTagName("div")[0].innerHTML="Thank you for contacting Dassault Systmes. </br></br>Your request has been correctly sent and will be treated in the shortest possible time.",document.body.getElementsByTagName("div")[0].style.fontFamily="Arial",document.body.getElementsByTagName("div")[0].style.color="#3D3D3D",document.body.getElementsByTagName("div")[0].style.fontSize="14px",console.log("formulaire envoy"),setTimeout((function(){return c().postMessage(JSON.stringify({id:viewId,action:"onSuccess"}),origin),!0}),4e3)}})}}):e._loadForm({takecontrol:function(e,t){document.body.getElementsByTagName("div")[0].innerHTML="Thank you for contacting Dassault Systmes. </br></br>Your request has been correctly sent and will be treated in the shortest possible time.",document.body.getElementsByTagName("div")[0].style.fontFamily="Arial",document.body.getElementsByTagName("div")[0].style.color="#3D3D3D",document.body.getElementsByTagName("div")[0].style.fontSize="14px",console.log("formulaire envoy"),setTimeout((function(){return c().postMessage(JSON.stringify({id:viewId,action:"onSuccess"}),origin),!0}),5e3)}})},_loadForm:function(){window.DSxWebAppForm&&(DSxWebAppForm.loadForm(this._id,{takecontrol:function(e,t){document.body.getElementsByTagName("div")[0].innerHTML="Thank you for contacting Dassault Systmes. </br></br>Your request has been correctly sent and will be treated in the shortest possible time.",document.body.getElementsByTagName("div")[0].style.fontFamily="Arial",document.body.getElementsByTagName("div")[0].style.color="#3D3D3D",document.body.getElementsByTagName("div")[0].style.fontSize="14px",console.log("formulaire envoy"),setTimeout((function(){return c().postMessage(JSON.stringify({id:viewId,action:"onSuccess"}),origin),!0}),4e3)}}),n.unmask(this.container))},destroy:function(){return window.removeEventListener("message",this._receiveMessage.bind(this)),this._parent()}})})),define("DS/i3DXCompass/View/ContentOverlayView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/Tools","DS/UIKIT/Scroller","DS/UIKIT/Input/Button","DS/UIKIT/SuperModal","DS/i3DXCompass/Feature","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompass/Data","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Feature","DS/i3DXCompass/View/PortfolioContactFormView"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m){"use strict";var h=e.i18n,f="content-overlay",g={ME:"fonticon-user",WE:"fonticon-users",COMPANY:"fonticon-building-office",WORLD:"fonticon-globe"},v=t.extend({tagName:"div",i18n:e.i18n,tempRemove:[],className:"compass-v3 "+f+" "+f+"-hidden",domEvents:{"click .content-overlay-icon-more.fonticon-info":"clickMore","click .content-overlay-icon-more.to-request":"requestRole","click .content-overlay-header":"_backClick","click .content-overlay-go-home":"callGoHome","click .content-overlay-icon-more.fonticon-close":"_dispatchClose"},setup:function(e){this.title=e.title,this.icon=e.icon,this.icon2=e.icon2,this.view=e.view,this.model=e.model,this.canEdit=!!this.model&&this.model.get("canEdit"),this.isEditMode=this.options.isEditMode||!1,this.canDelete=!!this.model&&this.model.get("canDelete"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.tooltip=""},render:function(){var t;a.enableBetaShoppingCart()&&(t={class:f+"-footer",html:[{tag:"i",class:"fonticon fonticon-shopping-cart"},{text:e.i18n("{0} items").format("0")},new s({value:h("View Cart"),className:"primary",events:{onClick:function(e){}}})]}),this.container.setContent([this.buildHeader(),{id:"container-scroll",class:t?"with-footer":""},{id:"to-scroll",styles:{height:"100%"},html:this.view},t]);var n=this.container.getElement("#to-scroll"),o=this.container.getElement("#container-scroll");return this.scroller=new i({element:n}).inject(o),this},buildHeader:function(){var t,i,s,o,a,l,c,d=this;this.options.parentIcon&&(c=e.createElement("i",{class:"content-overlay-go-home fonticon "+g[this.options.parentIcon]}),new r({position:"bottom",target:c,className:"compass-small-tooltip",body:e.String.format(e.i18n("Back to {0}"),this.options.parentIcon)})),l=this.options.isDisableGoBack?e.createElement("i",{class:"content-overlay-back fonticon fonticon-chevron-left disable-go-back"}):e.createElement("i",{class:"content-overlay-back fonticon fonticon-chevron-left"}),this.options.isDisableGoBack||new r({position:"bottom",target:l,className:"compass-small-tooltip",body:e.i18n("Back")}),t=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-trash",events:{click:function(){d.deleteGroup()}}}),s=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-floppy ",styles:{display:"none"},events:{click:function(e){d.saveGroup(e),d.isEditMode||(s.hide(),i.show(),"favorite"!==d.model.get("id")&&(a.hide(),o.textContent=a.value,o.show()))}}}),i=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-pencil",events:{click:function(e){"favorite"!==d.model.get("id")&&(o.hide(),a.show()),s.show(),i.hide(),d.editGroup()}}}),a=e.createElement("input",{text:this.title,styles:{width:"86%",display:"none"},events:{click:function(t){e.Event.stopPropagation(t)}}}),o=e.createElement("h1",{html:{text:n.getTextFromHtml(this.title)}});var p=!1;return this.options&&this.options.request&&this.model.get("platforms")&&(p=!!this.model.get("platforms").detect((function(e){return!e.requested}))),{class:f+"-header",html:[c,l,this.icon?{tag:"i",class:"fonticon fonticon-"+this.icon}:null,o,this.canEdit?a:null,this.canDelete?t:null,this.canEdit?i:null,this.canEdit?s:null,this.options.info&&!this.canEdit?this._buildInfoIcon():null,this.options.request&&p?this._buildRequestButton():null,this.options.request&&!p?this._buildRequestedIcon():null,null,this.options.closable?this._buildCloseIcon():null]}},_injectBuyButtonIfNeeded:function(){var e=this,t=this.model.get("externalIds")||this.model.get("acronym");require(["DS/MPFPortfolioModel/PortfolioHelper"],(function(n){n.isAuthorizedToBuy(t).then((function(t){if(t){var n,i=e.container.getElement(".to-contact");e._buildBuyButton().inject(i||e.container.getElement(".content-overlay-header h1"),"after"),window.location.pathname.indexOf("/buy")>-1&&(n=e.container.getElement("[data-action=compass-buy]"))&&n.click()}}))}))},_buildBuyButton:function(){var e=this;return a.isCompassStandalone()&&c.getServiceUrl({serviceName:"my3dexperience",onComplete:function(t){t&&t.length>0&&(e.my3dexpUrl=t[0])}}),new s({value:h("Buy"),icon:"shopping-cart",className:"primary content-overlay-icon-more to-buy responsive-icon-text",attributes:{"data-action":"compass-buy"},events:{onClick:function(t){l.compassInc({eventCategory:"compass",eventAction:"compass-buy",persDim:{pd2:e.model.get("acronym"),pd3:e.model.get("title")}}),a.isNativeApplicationEnvironment()?c.getAppInfo({appId:"X3DMYEX_AP",onComplete:function(e){p.publish("launchAppCallback",e)}}):a.isCompassStandalone()?window.open(e.my3dexpUrl,"_blank"):e.clickBuy(t)}}})},_buildRequestButton:function(){var t,n,i=this.model,o=this,a={description:i.get("description"),platforms:[],buttonDisabled:!1,buttonText:h("request"),action:"sendRoleRequest"},l=i.get("platforms"),r=!0;return l.length>0?(a.platforms=l.reduce((function(t,n){return n.requested||(t.push({name:n.id,text:e.String.format(h("requeston"),n.name)}),r=!1),t}),[]),r&&(a.buttonDisabled=!0)):(i.get("requested")||i.get("granted"))&&(a.buttonDisabled=!0),a.platforms.length>1?t={className:"compass-modal-dropdown",items:a.platforms,renderTo:document.body,position:"bottom right",events:{onClick:function(t,n){e.Event.stopPropagation(t),t.stopPropagation(),o.dispatchEvent("onRequestRole",[i,n.name])}}}:1===a.platforms.length&&(n=a.platforms[0].name),new s({value:a.buttonText,className:a.buttonDisabled?"default":"primary",disabled:a.buttonDisabled,events:{onClick:function(s){e.Event.stopPropagation(s),s.stopPropagation(),t||o.dispatchEvent("onRequestRole",[i,n])}},dropdown:t})},_buildInfoIcon:function(){var t=this,n=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-info"});return this.tooltip=new r({position:"bottom",target:n,className:"compass-small-tooltip",body:e.i18n("About"),delay:{show:1e3,hide:10},events:{onShow:function(e){(this.options.target.isHidden()||t.container.isHidden())&&(this.tooltip.hide(),console.log("show hide"))}}}),n},_buildRequestedIcon:function(){var t=e.createElement("i",{class:"content-overlay-icon-more fonticon disabled fonticon-hourglass"});return new r({position:"bottom",target:t,className:"compass-small-tooltip",body:h("Role requested, awaiting validation")}),t},_buildCloseIcon:function(){var t=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-close"});return new r({position:"bottom",target:t,className:"compass-small-tooltip",body:h("Close")}),t},deleteGroup:function(t){var i=this;new o({closable:!1,renderTo:n.isOpenFullSize()?document.querySelector(".my-apps-panel.compass-v3"):""}).confirm(e.i18n("confirmRemoveFavorite"),e.i18n("confirmation"),(function(e){e&&(i.goHome(t,!0),i.dispatchEvent("onRemoveGroup",i.model))}))},saveGroup:function(t){var n=this;new o({closable:!1}).confirm(e.i18n("confirmRemoveFavorite"),e.i18n("confirmation"),(function(e){e&&(n.isEditMode=!1,n.container.removeClassName("editMode"),"favorite"===n.model.get("id")?n.dispatchEvent("onRemoveFavoriteV3",[n.tempRemove]):(n.tempRemove.forEach((function(e,t){n.model.get("appList").splice(n.model.get("appList").indexOf(e),1)})),n.model.get("appList").length>0?n.dispatchEvent("onSaveGroup",n.model):(n.goHome(t,!0),n.dispatchEvent("onRemoveGroup",n.model))))}))},editGroup:function(){this.isEditMode=!0,this.switchAppMode(),this.container.addClassName("editMode")},switchAppMode:function(){var t=this;this.container.getElements(".item-view-v3.app-item").forEach((function(n,i){n.getElement("fonticon-trash")||e.createElement("div",{styles:{"font-size":"25px"},class:" fonticon fonticon-trash",events:{click:function(i){e.Event.stopPropagation(i),t.tempRemove.push(n.getAttribute("data-id")),n.hide()}}}).inject(n.getElement(".item-view-content-wrapper"),"after"),n.getElement(".settings-img")&&n.getElement(".settings-img").hide(),n.addClassName("drag-app")}))},_backClick:function(e){return!!(this.options.isDisableGoBack||e&&e.target.hasClassName("content-overlay-icon-more"))||(!(!e||!e.target.hasClassName("content-overlay-go-home"))||(this.back(e),this.dispatchEvent("onBackClick"),void l.clickBack()))},back:function(e){var t=this,n=this.container.getElement("video");if(e&&e.target.hasClassName("content-overlay-icon-more"))return!0;if(e&&e.target.hasClassName("content-overlay-go-home"))return!0;if(this.container.addClassName(f+"-hidden"),setTimeout((function(){t.view&&t.view.destroy&&t.view.destroy(),t.destroy(),t=null}),301),n&&(n.remove(),n.destroy(),n=null),a.supportPushState()){var i=window.location.pathname.split("/"),s=i.splice(0,i.length-1).join("/"),o=s.split("/");o.indexOf("compass-world")===o.length-1&&(s=o.splice(0,o.length-1).join("/")),history.pushState("","",s)}this.dispatchEvent("onBack")},show:function(e){var t=this;this.render(),setTimeout((function(){t.container.removeClassName(f+"-hidden"),t.dispatchEvent("onShow")}),25)},clickMore:function(t){e.Event.stopPropagation(t),t.stopPropagation(),this.tooltip&&this.tooltip.hide(),this.dispatchEvent("onClickMore",this.model)},clickBuy:function(t,n){e.Event.stopPropagation(t),t.stopPropagation(),a.supportPushState()&&-1===window.location.pathname.indexOf("/buy")&&history.pushState("",this.model.get("title"),window.location.pathname+"/buy"),this.dispatchEvent("onClickBuy",[this.model,this.buyComponent])},callGoHome:function(e){this.dispatchEvent("callGoHomes",e)},goHome:function(e,t){var n=this;return!!(!t&&e&&e.target.hasClassName("content-overlay-icon-more")&&e.target.hasClassName("content-overlay-icon-more")&&e.target.hasClassName("content-overlay-icon-more"))||(!(t||!e||!e.target.hasClassName("content-overlay-header"))||(this.container.addClassName(f+"-hidden"),this.dispatchEvent("onBack",e),void setTimeout((function(){n.destroy()}),301)))},_dispatchClose:function(e){this.dispatchEvent("callGoHomes",e),this.dispatchEvent("onClose")},addBuildRequestedIcon:function(){var e=this._buildRequestedIcon();this.container.getElement(".content-overlay-header button")&&(this.container.getElement(".content-overlay-header button").destroy(),e.inject(this.container.getElement(".content-overlay-header .fonticon-close"),"before"))},rebuildRequestButton:function(){var e=this._buildRequestButton();this.container.getElement(".content-overlay-header button")&&(this.container.getElement(".content-overlay-header button").destroy(),e.inject(this.container.getElement(".content-overlay-header .fonticon-close"),"before"))},requestRole:function(t){var n=this;e.Event.stopPropagation(t),t.stopPropagation(),this.dispatchEvent("onRequestRole",this.model),setTimeout((function(){t.target.getParent();n.addBuildRequestedIcon()}),300)}});return v})),define("DS/i3DXCompass/View/ServicesView",["UWA/Core","UWA/Utils","UWA/Class/View","DS/UIKIT/Tooltip","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/X3DContent"],(function(e,t,n,i,s,o,a){"use strict";var l="service",r={className:l+"-section",_onClick:function(t){var n=t.get("url");"X3DPSLY_AP"===t.get("id")&&!0===e.is(o.addinMode)&&(n=this._manageAddinUrl(n)),s.isSameApp(n,window.location)||-1!==n.indexOf("addinmode")?window.open(n,"_self"):window.open(n,"_blank")},_manageAddinUrl:function(e){var t=o.addinMode&&o.addinMode.value;return o.cloud||(e=this._addQueryParams(e,"lockedapp",!0)),t&&(e=this._addQueryParams(e,"addinmode",t)),t&&"catiav5"===t.toLowerCase()&&(e=this._addQueryParams(e,"embeddedProfileId","CATIAV5")),t&&"xvl"===t.toLowerCase()&&(e=this._addQueryParams(e,"embeddedProfileId","XVL")),e},_addQueryParams:function(e,t,n){var i=-1===e.indexOf("?")?"?":"&";return e+i+t+"="+n},render:function(){return this.container.setContent(this._renderServices()),this},_renderServices:function(){var t=this.elements,n=this,s=this.collection.map((function(t){var s=e.createElement("li",{class:l+"-item",html:[{tag:"img",class:l+"-item-icon",src:t.get("icon"),events:{dragstart:function(e){e.preventDefault()}}},{tag:"div",class:l+"-item-title",text:t.get("title")}],"data-id":t.get("id"),events:{click:function(){n._onClick(t)}}});return new i({position:"bottom",target:s,delay:{show:1e3},body:t.get("description")||t.get("title")}),s})),o=t.list;return o||(o=t.list=e.createElement("ul",{class:l+"-list"})),o.setContent(s),o}};return n.extend(r)})),define("DS/i3DXCompass/Collection/ProductOptionalContentList",["UWA/Core","DS/i3DXCompass/Collection/ProductList","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature"],(function(e,t,n,i,s){"use strict";return t.extend({sync:function(e,t,s){var o,a=this,l=!1;if("read"===e)o=this.data={},n.request({url:n._getProcessDetailsUrl(),urlParams:{os:i.getOs()},onComplete:function(e){var t,l=[],c=[];if(o.myapps=e,e.about&&e.about.forEach((function(e){"BuildTransactionID"===e.key&&(t=e.value,o.transactionId=t)})),e.cloud){if(e.env){e.env.forEach((function(e){e.licenses.forEach((function(e){i.pushUnique(l,e.id)}))})),a.installList.forEach((function(e){c.push(e.get("dpIdObj")),e.get("processes").forEach((function(e){i.pushUnique(l,e)}))}));var d=d={id:(new Date).getTime(),method:"CodeLevelV4::status",params:{podID:t,clusterID:n.clusterId,processes:l,installs:c,type:"CNT",selectedApp:s.appId,os:i.getOs()}};n.request({url:n.onlineInstallUrl,proxy:"ajax",method:"POST",contentType:"application/json",postData:JSON.stringify(d),onComplete:function(e){o.downloadplatform=e,r()},onFailure:function(){r()}})}}else s&&s.onComplete&&r()},onFailure:function(){r()}});function r(){!l&&s&&s.onComplete&&(l=!0,s.onComplete(o))}}})})),define("DS/i3DXCompass/Collection/InstallOptionalContentList",["UWA/Core","DS/i3DXCompass/Model/Install","DS/i3DXCompass/Collection/InstallList","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data"],(function(e,t,n,i,s,o){"use strict";e.i18n;return n.extend({model:t,parse:function(e){var t=this,n=[];return e.forEach((function(e){var i;e.lastBuildId&&"CNT"===e.type&&t.isAvailableForCurrentEnvironment(e)&&(e.processes=(e.installedProcesses||[]).map((function(e){return e.split(".")[0]})),i=e.processes[0],e.dpId=e.lastBuildId+"+"+i,e.dpIdObj={ID:e.lastBuildId,process:i,golden:-1===(e.SPlevel||"").indexOf("."),release:"R"+e.level,SPLevel:e.SPlevel},e.name=(e.longName||e.GAlevel)+(e.registry_Identifier&&"!"!==e.registry_Identifier?" - "+e.registry_Identifier:""),e.daemonId=e.id,e.id=e.GAlevel+e.installationType+(e.registry_Identifier||""),n.push(e))})),n}})})),define("DS/i3DXCompass/Modal/DaysRemainingForUpdate",["UWA/Core","UWA/Utils","UWA/Class/View","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Spinner","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o,a,l,r,c){"use strict";var d=o.i18n;return n.extend({tagName:"div",className:"upade-available",init:function(e){this._parent(e)},setup:function(e){return this.options=e||{},this._parent(e)},buildTitle:function(e){return"<h4>"+d("3DEXPERIENCE Update available")+"</h4>"},buildInstallButton:function(){var e=this;return new l({value:d("updateallprocesses"),className:"primary large block download-daemon-btn",events:{onClick:function(){e.modal.hide(),e.options.updateAllCallback()}}})},buildUpdateLaterButton:function(){var e=this;return new l({value:d("proceedanyway"),className:"default",events:{onClick:function(){e.modal.hide(),e.options.updateLaterCallback()}}})},buildCancelButton:function(){var e=this;return new l({value:d("cancel"),className:"default",events:{onClick:function(){e.dispatchEvent("resetDisplayFlagDaysRemainingModal"),e.modal.hide()}}})},buildBodyDescription:function(){var t=e.createElement("span",{class:"fonticon fonticon-3x fonticon-fonticon fonticon-info blue-4",styles:{display:"block","padding-right":"20px"}});return e.createElement("div",{styles:{display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"normal","align-items":"center","align-content":"normal"},html:[t,{tag:"div",class:"compass-install-desc ",styles:{display:"block","line-height":"2em","margin-bottom":"5px"},html:e.String.format(d("{0} is ready to update your installation."),this.options.toUpdateTitle)+"</br>"+(this.options.preferredInstall.get("daysRemaining")>1?e.String.format(d("<b> {0} days </b> left until update is required."),this.options.preferredInstall.get("daysRemaining")):e.String.format(d("<b> {0} day </b> left until update is required."),this.options.preferredInstall.get("daysRemaining")))}]})},buildModal:function(){var e=this;this.modal=new a({closable:!0,visible:!0,className:"compass-modal",events:{onHide:function(){event&&event.target&&event.target.hasClassName("fonticon-cancel")&&e.dispatchEvent("resetDisplayFlagDaysRemainingModal"),e.modal.destroy()}},header:e.buildTitle(),body:{html:[{tag:"div",styles:{padding:"15px"},html:[e.buildBodyDescription(),this.buildInstallButton()]}]},footer:[e.buildUpdateLaterButton(),e.buildCancelButton()]}).inject(document.body)},render:function(){return this.container.setContent(this.buildModal()),this}})})),define("DS/i3DXCompass/Model/BusinessExperienceRoleDetailModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/WAFData/WAFData"],(function(e,t,n,i,s,o,a){"use strict";return n.extend({setup:function(e){this._url=this.get("businessExperienceUrl")+"/resources/BusinessExperienceAccess/v1/model/Role/"+this.get("id"),this.url=this.get("businessExperienceUrl")+"/resources/BusinessExperienceAccess/v1/model/Role/"+this.get("id")+"?"+t.toQueryString({tenant:this.get("platformId"),cors:!0})},launchBusinessExperience:function(){var e="#business-experience:"+this.get("id")+"/version:"+this.get("version");i.get3DDashboardUrl((function(t){var n=t+e;-1!==window.location.href.indexOf(t)?s._supportBigUrl(n)?window.location.hash=e:window.open(n,"_self"):window.open(n,"_blank")}))},updateModel:function(e){e.icon&&this.set("icon",e.icon)},needSettingsMenu:function(){return this.get("usages")&&this.get("usages").length>0},fetch:function(e){return e.businessMethodsCollection&&(this.businessMethodsCollection=e.businessMethodsCollection),e.businessExperienceCockpitsCollection&&(this.businessExperienceCockpitsCollection=e.businessExperienceCockpitsCollection),this._parent(e)},sync:function(e,t,n){var i=this;if("read"===e)return a.authenticatedRequest(i.url,{timeout:15e3,method:"GET",type:"json",headers:{Accept:"application/json"},onComplete:function(e,t){e&&(e.bms&&e.bms.map((function(e){e.platformId=i.get("platformId"),i.businessMethodsCollection.add(e)})),e.cockpits&&e.cockpits.map((function(e){e.platformId=i.get("platformId"),i.businessExperienceCockpitsCollection.add(e)})),n.onComplete(e))},onFailure:function(e,t){n.onFailure(t)}})}})})),define("DS/i3DXCompass/View/TopBarOverlayView",["UWA/Core","UWA/Class/View","DS/UIKIT/Input/Button","UWA/Utils","DS/i3DXCompass/Tools","DS/i3DXCompassServices/i3DXCompassPubSub"],(function(e,t,n,i,s,o){"use strict";return t.extend({tagName:"div",className:"compass-v3 top-bar-overlay",topBar:"",topBarAlreadyExist:!1,hideTopBarCenter:!1,open:!1,setup:function(e){this.defaultQuadrant=e.defaultQuadrant,this.logoClassName=e.logoClassName,this.setTopBar(),this.setCompass(),this.updateCompassQuadrantClass(this.compass.getElement(".compass-on"),e.defaultQuadrant),this.compass.getElement(".compass-ct").hasClassName("open")||this.compass.getElement(".compass-ct").addClassName("open"),this.topBarAlreadyExist||this.render()},render:function(){var e=this.compass,t=(this.topBar,e.getElement(".compass-on"));this.open=!0,this.updateCompassQuadrantClass(t,s.getCurrentQuadrant()),i.Client.getSize().width>649&&!document.querySelector(".topbar-cmd.fonticon.fonticon-close")?this.topBarAlreadyExist?(e.getElement(".compass-ct").hasClassName("open")||e.getElement(".compass-ct").addClassName("open"),document.querySelector(".topbar-center").style.display&&"none"===document.querySelector(".topbar-center").style.display&&(this.hideTopBarCenter=!0,document.querySelector(".topbar-center").style.display="block",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="none",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display="none"),this.manageSearch(),document.querySelector(".topbar-center .tagnav").hide(),document.querySelector(".topbar-center .menu").hide(),this.getCrossButton().show().inject(this.container),this.inject(this.topBar.lastElementChild,"after")):document.querySelector(".add-top-bar")||(this.container.addClassName("add-top-bar"),this.getTopBarHeader().show().inject(this.container),this.inject(document.body)):this.topBarAlreadyExist||document.querySelector(".add-top-bar")||(this.container.addClassName("add-top-bar"),this.getTopBarHeader().show().inject(this.container),this.inject(document.body))},updateCompassQuadrantClass:function(e,t){var n=e!==this.compass.getElement(".compass-on")?this.compass.getElement(".compass-on"):null;e.removeClassName&&(e.removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),s.isCompassV3()&&e===this.compass.getElement(".compass-on")&&this.open||e.addClassName(t)),n&&n.hasClassName&&!n.hasClassName(t)&&n.removeClassName&&(n.removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),!s.isCompassV3()&&this.open&&n.addClassName(t))},manageSearch:function(){var e=document.body.getElement(".search-active");e&&e.removeClassName("search-active");var t=document.body.getElement(".topbar-cmd.search.active");t&&t.removeClassName("active")},getTopBarHeader:function(){return e.createElement("div",{class:"topbar-header",html:{tag:"span",class:"topbar-app-brand",text:"My3DEXPERIENCE"}})},getCrossButton:function(){var t=this;return e.createElement("div",{class:"topbar-cmd fonticon fonticon-close",styles:this.topBarAlreadyExist?"":{position:"fixed",left:"90%"},events:{click:function(){t.dispatchEvent("onClose")}}})},closeCompassV2:function(e){var t=this,n=this.compass;this.topBar,n.getElement(".compass-on");t.open=!1,document.getElement(".topbar-cmd.fonticon.fonticon-close").remove(),t.remove(),document.querySelector("."+t.logoClassName).show(),e&&this.dispatchEvent("onClose"),t.hideTopBarCenter?(document.querySelector(".topbar-center").style.display="none",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display=""):document.querySelector(".topbar-center .tagnav").show(),i.Client.getSize().width>639&&n.getElement(".compass-ct").addClassName("open"),t.updateCompassQuadrantClass(t.compass.getElement(".compass-on"),s.getCurrentQuadrant()),t.hideTopBarCenter=!1,o.publish("compassCloseV32TopBar",{})},closeCompassV2FullSize:function(e){var t,n=this,o=this.compass,a=(this.topBar,document.querySelector("."+this.logoClassName));o.getElement(".compass-on"),o.getElement(".compass-over-v3");n.open=!1,i.Client.getSize().width<959&&(t=s.getCurrentQuadrant(),n.remove(),n.updateCompassQuadrantClass(a,t),this.topBarAlreadyExist&&(n.hideTopBarCenter?(document.querySelector(".topbar-center").style.display="none",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display=""):(document.querySelector(".topbar-center .tagnav").show(),document.querySelector(".topbar-center .menu").show())),e&&this.dispatchEvent("onClose")),n.hideTopBarCenter=!1},setTopBar:function(){document.querySelector("#topbar")&&(this.topBar=document.querySelector("#topbar"),this.topBarAlreadyExist=!0)},setCompass:function(){document.querySelector("#topbar")?this.compass=document.querySelector("#compass_ctn"):document.querySelector("#compass-container")&&(this.compass=document.querySelector("#compass-container"))}})})),define("DS/i3DXCompass/Collection/ProductCEFList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Collection/ProductList","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Model/Product","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o,a){"use strict";return t.extend({model:o,installList:null,validData:!1,data:null,isValid:[],setup:function(e){this.installCEFList=e.installCEFList},sync:function(e,t,n){var o,a=this,l=!1;if("read"===e)o=this.data={},i.request({url:i._getProcessDetailsUrl(),urlParams:{os:s.getOs()},onComplete:function(e){var t,l=[],c=[];if(o.myapps=e,e.about&&e.about.forEach((function(e){"BuildTransactionID"===e.key&&(t=e.value,o.transactionId=t)})),e.cloud){if(e.env){e.env.forEach((function(e){e.licenses.forEach((function(e){s.pushUnique(l,e.id)}))})),a.installCEFList.forEach((function(e){c.push(e.get("dpIdObj")),e.get("processes").forEach((function(e){s.pushUnique(l,e)}))}));var d={id:(new Date).getTime(),method:"CodeLevelV4::status",params:{podID:t,clusterID:i.clusterId,processes:["TECCEF_TP"],installs:c,type:"CODE",os:s.getOs()}};i.request({url:i.onlineInstallUrl,proxy:"ajax",method:"POST",contentType:"application/json",postData:JSON.stringify(d),onComplete:function(e){o.downloadplatform=e,r()},onFailure:function(){r()}})}}else n&&n.onComplete&&r()},onFailure:function(){r()}});function r(){!l&&n&&n.onComplete&&(l=!0,n.onComplete(o))}},parse:function(t){var n=[],i={},s=(t.myapps,t.downloadplatform);return s&&s.result&&s.result.stacks.forEach((function(t){t.processes.forEach((function(t){var s=i[t];e.is(s)||(n.push({id:t,env:[]}),i[t]=n.length-1)}))})),s&&s.result&&s.result.stacks.forEach((function(e){e.processes.forEach((function(t){var s=i[t];n[s]&&(n[s].installType=e.installType,n[s].online=!0)}))})),n},update:function(e){var t=this;this.fetch({appId:e.appId,onComplete:function(n,i,s){t.data=i,i.change=!0,e&&e.onComplete&&e.onComplete(n,i,s)}})},invalidate:function(){this.isValid=[]}})})),define("DS/i3DXCompass/i3DXCompassServices",["UWA/Core","UWA/Utils","DS/i3DXCompass/Data","DS/i3DXCompass/EventManager","DS/i3DXCompass/ServiceApi/UserServiceApi","DS/i3DXCompass/CacheManager","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o,a,l){"use strict";var r,c="api/v1/public/services",d="api/v1/services",p="_public",u="_role",m={},h={},f={},g={},v={},C=function(e){return e?e+(S()?d:c):null},y=function(){var e=b();return e?e+(S()?d:c):null},b=function(){return n.myAppsBaseUrl||r},S=function(){return o._getUser()},w=function(e,t){v[t].forEach((function(n){n[e]&&setTimeout(n[e],0,m[t])})),v[t].length=0},E=function(e){return A(e)?A(e).split("@@@")[0]:null},D=function(e){return A(e)?JSON.parse(A(e).split("@@@")[1]):null},A=function(e){return o.getCache(S()+e)},I=function(e){f[e]=!0;var t=e;t&&t.indexOf(p)>-1&&"null"!==t.split(p)[0]&&(t=t.split(p)[0]),t&&t.indexOf(u)>-1&&"null"!==t.split(u)[0]&&(t=t.split(u)[0]),t=null!==t&&t&&t.indexOf&&-1===t.indexOf("null")?t:null,n.registryUrl&&t?a.getServicesByPlatform({platforms:[t],services:["3dcompass"],config:{url:n.registryUrl}}).then((function(t){t.length>0?N(e,C(t[0].services[0].url+"/resources/AppsMngt/")):N(e,C(b()))}),(function(){N(e,C(b()))})):N(e,C(b()))},N=function(e,t){var i=!1,s=!1,a=e;a&&a.indexOf(p)>-1&&("null"!==a.split(p)[0]&&(a=a.split(p)[0]),i=!0),a&&a.indexOf(u)>-1&&"null"!==a.split(u)[0]&&(a=a.split(u)[0]),e&&e.indexOf(u)>-1&&"null"!==e.split(u)[1]&&(s=e.split(u)[1]);var l={cache:null,urlParams:{platformId:a=null!==a&&a&&a.indexOf&&-1===a.indexOf("null")?a:null,cors:!0},url:t,headers:{"Last-Modified":E(e)},onComplete:function(t,n){if(t&&0===t.code){null,null,m[e]=t.platforms,h[e]=!0;var i=n&&(n["Last-Modified"]||n["Last-Modified".toLowerCase()]);n&&i&&m[e]&&m[e].length>0&&function(e,t,n){o.setCache(S()+e,t+"@@@"+JSON.stringify(n))}(e,i,m[a]),w("onComplete",e)}else m[e]=D(e),m[e]?(h[e]=!0,w("onComplete",e)):w("onFailure",e);f[e]=!1},onFailure:function(){m[e]=D(),m[e]?(h[e]=!0,w("onComplete",e)):w("onFailure",e),f[e]=!1}};i&&(l.urlParams.publicPlatform=!0),s&&(l.urlParams.role=s),n.request(l)},k=function(t){var n=Date.now();t.platformId||(t.platformId=null),!y()&&(t.config&&t.config.myAppsBaseUrl||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl)&&(r=(r=(r=t.config&&t.config.myAppsBaseUrl?t.config.myAppsBaseUrl:COMPASS_CONFIG.myAppsBaseUrl).replace("/resources/AppsMngt","")).replace(/\/$/,"")+"/resources/AppsMngt/"),!S()&&(t.config&&t.config.userId||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.userId)&&(t.config&&t.config.userId?o.setup(t.config.userId,t.config.lang):o.setup(COMPASS_CONFIG.userId,COMPASS_CONFIG.lang));var s=t.platformId?3e5:216e5,a=t.platformId;t.publicPlatform&&(a+=p),t.role&&(a=a+u+t.role),h[a]&&m[a]&&(!g[a]||n-g[a]<s)?t.onComplete(e.clone(m[a])):(g[a]=n,v[a]||(v[a]=[]),v[a].push({onComplete:t.onComplete,onFailure:t.onFailure}),f[a]||(y()?I(a):i.addEventOnce("onInitialized",_)))},_=function(){y()&&Object.keys(v).forEach((function(e){I("null"===e?null:e)})),i.removeEvent("onInitialized",_)},P=function(e){return t.composeUrl(t.parseUrl(e))},T=function(t,n){var i={};if(n&&n.services)return n.services.forEach((function(e){(!t||t&&!0===e.public)&&(i[e.name]=P(e.url))})),l.isOnPremiseEnvironment()?e.merge({platformId:n.id,displayName:n.name},i):e.merge({platformId:n.id,displayName:n.name,type:n.type},i)},O=function(e,t){var n;if(t)return(n=t[e])?{platformId:t.platformId,url:n}:{platformId:t.platformId}},U=function(){},x=function(t,n){return e.clone(t.map(T.bind(null,n)))};i.addEvent("onMyAppsDataChange",(function(){}));var L={getUser:s.getUser,getPlatformServices:function(t){if(t&&"function"===e.typeOf(t.onComplete)){var n={platformId:t.platformId,config:t.config,onComplete:function(n){var i,s=t.platformId,o=t.caa,a=x(n,o);i=s?e.Array.detect(a,(function(e){return e.platformId===s})):a,t.onComplete(i)},onFailure:t.onFailure};t.public&&(n.publicPlatform=!0),t.role&&(n.role=t.role),k(n)}},getPlatformConfig:function(t){if(t&&"function"===e.typeOf(t.onComplete)){var n={platformId:t.platformId,config:t.config,onComplete:function(n){var i,s=t.platformId,o=t.key,a=e.clone(n);i=s?e.Array.detect(a,(function(e){return e.id===s})):a.map((function(t){var n=t.config;if(o&&e.is(n[o])){var i=n[o];(n={})[o]=i}return e.merge({platformId:t.id,displayName:t.name},n)})),s&&i&&(i=o&&e.is(i.config[o])?i.config[o]:o?void 0:i.config),t.onComplete(i)},onFailure:t.onFailure};t.public&&(n.publicPlatform=!0),t.role&&(n.role=t.role),k(n)}},getServiceUrl:function(t){if(t&&t.serviceName&&"function"===e.typeOf(t.onComplete)){var n={platformId:t.platformId,config:t.config,onComplete:function(n){var i,s,o,a=t.platformId,l=t.caa,r=x(n,l);a?(i=e.Array.detect(r,(function(e){return e.platformId===a})),(s=O(t.serviceName,i))&&(o=s.url)):o=r.map(O.bind(null,t.serviceName)),t.onComplete(o)},onFailure:t.onFailure};t.public&&(n.publicPlatform=!0),t.role&&(n.role=t.role),k(n)}},_private:{callbacks:v,fireCallbacks:w,fetchEnvironmentList:N,getEnvironmentList:k,normalizeUrl:P,extractUrls:T,extractUrl:O,reset:U}};return L})),define("DS/i3DXCompass/View/CompassOverlayView",["UWA/Core","UWA/Class/View","DS/UIKIT/Input/Button","UWA/Utils","DS/i3DXCompass/Tools"],(function(e,t,n,i,s){"use strict";return t.extend({tagName:"div",className:"V2 compass-modal-overlay modal-overlay in",topBar:"",compass:"",defaultQuadrant:"",logoClassName:"",hideTopBarCenter:!1,setup:function(e){this.defaultQuadrant=e.defaultQuadrant,this.logoClassName=e.logoClassName,this.setTopBar(e.logoClassName),this.setCompass()},render:function(){var e=this.compass,t=(this.topBar,e.getElement(".compass-on"));document.querySelector(".topbar-center").style.display&&"none"===document.querySelector(".topbar-center").style.display&&(this.hideTopBarCenter=!0,document.querySelector(".topbar-center").style.display="block",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="none",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display="none"),this.container.setContent(this.openCompassButton()),e.getElement(".compass-base").addClassName("animate"),e.getElement(".compass-ct").hasClassName("open")||e.getElement(".compass-ct").addClassName("open"),document.querySelector("."+this.logoClassName).hide(),this.manageSearch(),this.getCrossButton().show().inject(document.querySelector(".topbar-center")),document.querySelector(".topbar-center .tagnav").hide(),document.querySelector(".topbar-center .menu").hide(),this.updateCompassQuadrantClass(t,this.defaultQuadrant),this.inject(this.topBar,"after")},updateCompassQuadrantClass:function(e,t){var n=e!==this.compass.getElement(".compass-on")?this.compass.getElement(".compass-on"):null;e.removeClassName&&(e.removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),s.isCompassV3()&&e===this.compass.getElement(".compass-on")&&e.getParent(".compass-force-show")||e.addClassName(t)),n&&n.removeClassName&&(n.removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),!s.isCompassV3()&&e.getParent(".compass-force-show")&&n.addClassName(t))},manageSearch:function(){var e=document.body.getElement(".search-active");e&&e.removeClassName("search-active");var t=document.body.getElement(".topbar-cmd.search.active");t&&t.removeClassName("active")},getCrossButton:function(){var t=this;return e.createElement("div",{class:"top-bar-overlay compass-V2",html:{class:"topbar-cmd fonticon fonticon-close",events:{click:function(){t.closeCompassV2()}}}})},openCompassButton:function(){var e=this;return new n({value:"More applications",className:"primary btn-open-compass",styles:{position:"relative",top:"90%",left:"50%"},events:{onClick:function(){e.options.i3DXCompass.showAccordion(!0),e.closeCompassV2(),setTimeout((function(){document.querySelector(".my-apps-panel")&&!document.querySelector(".my-apps-panel").hasClassName("V2")&&document.querySelector(".my-apps-panel").addClassName("V2")}),300)}}})},closeCompassV2:function(){var e=this.compass;this.topBar,e.getElement(".compass-on");this.remove(),e.hide(),document.body.getElement(".topbar-logo").show(),document.querySelector("."+this.logoClassName).show(),document.querySelector(".top-bar-overlay.compass-V2").remove(),this.hideTopBarCenter?(document.querySelector(".topbar-center").style.display="none",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display=""):(document.querySelector(".topbar-center .tagnav").show(),document.querySelector(".topbar-center .menu").show()),i.Client.getSize().width<959&&e.getElement(".compass-ct").removeClassName("open"),e.removeClassName("compass-force-show"),e.getElementsByClassName("compass-base")[0].removeClassName("animate"),this.hideTopBarCenter=!1},closeCompassV2FullSize:function(){var e,t=this,n=this.compass,s=(this.topBar,document.querySelector("."+this.logoClassName)),o=(n.getElement(".compass-on"),n.getElement(".compass-over-v3"));i.Client.getSize().width<959&&(e=o.hasClassName("north")?"north":o.hasClassName("east")?"east":o.hasClassName("south")?"south":o.hasClassName("west")?"west":"play",t.remove(),n.hide(),document.body.getElement(".topbar-logo").show(),t.updateCompassQuadrantClass(s,e),s.show(),document.querySelector(".top-bar-overlay.compass-V2").remove(),t.hideTopBarCenter?(document.querySelector(".topbar-center").style.display="none",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display=""):(document.querySelector(".topbar-center .tagnav").show(),document.querySelector(".topbar-center .menu").show()),n.removeClassName("compass-force-show"),n.getElementsByClassName("compass-base")[0].removeClassName("animate")),t.hideTopBarCenter=!1},setTopBar:function(e){this.topBar=document.getElement("."+e).getParent()},setCompass:function(){this.compass=this.topBar.getElement("#compass_ctn")}})})),define("DS/i3DXCompass/View/ImageResponsiveView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Tools"],(function(e,t,n,i){"use strict";var s=[{max:"620",prefix:"small"},{min:"621",prefix:"medium"}];return t.extend({tagName:"picture",className:"picture-responsive",render:function(){return s=[{max:"620",prefix:"small"},{min:"621",max:"1600",prefix:"large"},{min:"1601",prefix:"largex2"}],this.container.setContent(this._getSources()),this},_getSources:function(){var e=[];return(this.model.get("icon")||this.model.get("iconTemplate"))&&(e=s.map(this._getSource.bind(this))).push(this._buidDefaultImg()),e},_getSource:function(e){return{tag:"source",srcset:this._getSrcsets(e.prefix),media:this._buildMediaQuery(e)}},_getSrcsets:function(e){var t=[this._getSrcset(e)];return t.push(this._getSrcset(e,-1===e.indexOf("x2")?"2x":null)),t.join(", ")},_getSrcset:function(t,i){var s="2x"===i?t+"x2":t;return this.model.get("iconTemplate")?e.String.format(this.model.get("iconTemplate"),s)+(i?" "+i:""):n.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("icon"),t,s))+(i?" "+i:"")},_buildMediaQuery:function(e){return(e.min?"(min-width: "+e.min+"px)":"")+(e.min&&e.max?" and ":"")+(e.max?"(max-width: "+e.max+"px)":"")},_buidDefaultImg:function(){var e=s[s.length-1].prefix;return{tag:"img",src:this._getSrcset(e)}}})})),define("DS/i3DXCompass/View/BannerResponsiveView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/ImageResponsiveView"],(function(e,t,n){"use strict";return t.extend({tagName:"div",className:"banner-responsive-view",render:function(){return this.container.setContent(this._getTemplate()),this},_getTemplate:function(){return{class:"icon-wrapper",html:[new n({model:this.model}).render(),{class:"banner-mask"}]}}})})),define("DS/i3DXCompass/View/DomainsDetailView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/BannerResponsiveView"],(function(e,t,n,i){"use strict";var s=t.extend({tagName:"div",className:"item-view-square",domEvents:{click:"click"},click:function(){this.dispatchEvent("onItemClick",this.model)},render:function(){return this.container.setContent(this._getTemplate()),this},_getTemplate:function(){return[{class:"item-view-content-wrapper",styles:{"background-image":"url("+n.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("icon"),"thumb",this.model.get("id")))+")"},html:[{class:"item-view-content",html:{class:"title",text:this.model.get("title")}}]}]}});return t.extend({tagName:"div",className:"solution-detail",setup:function(e){return this.header=e.header,this},get:function(){var e=this;return[this.header?{class:"marketing-header",html:[{tag:"header",text:this.model.get("title")},{class:"subheader",text:this.model.get("subTitle")}]}:null,new i({model:this.model}).render(),this.header||!this.model.get("description")?null:{class:"description",html:this.model.get("description").replace(/{URL_RESSOURCES}/g,n.getWebappsAssetUrl("i3DXCompass",""))},{class:"marketing-footer",html:[{tag:"header",text:"Sub-Domains"},{class:"items-view-square",html:this.collection.map((function(t){return new s({model:t,events:{onItemClick:function(t){e.dispatchEvent("onItemClick",t)}}}).render()}))}]}]},getBackgroundIcon:function(){var t=this.model.get("iconDetail"),i=this.model.get("icon");return t&&(t=this.model.get("iconDetail").startsWith("http")?this.model.get("iconDetail"):n.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("iconDetail"),"1440x128"))),i&&(i=this.model.get("icon").startsWith("http")?this.model.get("icon"):n.getWebappsAssetUrl("i3DXCompass",this.model.get("icon"))),t||i},render:function(){return this.container.setContent(this.get()),this}})})),define("DS/i3DXCompass/View/ProcessDetailView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/RoleView","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/BannerResponsiveView"],(function(e,t,n,i,s){"use strict";return t.extend({tagName:"div",className:"view-process-detail",render:function(){return this.container.setContent(this._getTemplate()),this},getBackgroundIcon:function(t){var n=this.model.get("iconDetail"),s=this.model.get("icon");return n&&(n=this.model.get("iconDetail").startsWith("http")?this.model.get("iconDetail"):i.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("iconDetail"),t))),s&&(s=this.model.get("icon").startsWith("http")?this.model.get("icon"):i.getWebappsAssetUrl("i3DXCompass",this.model.get("icon"))),n||s},_getTemplate:function(){var e=this;return[new s({model:this.model}).render(),this.model.get("description")?{class:"portfolio-description",html:this.model.get("description").replace(/{URL_RESSOURCES}/g,i.getWebappsAssetUrl("i3DXCompass",""))}:null,{class:"marketing-footer",html:[{tag:"header",text:"Roles"},{class:"items-roles-view",html:this.collection.map((function(t){return new n({brand:e.model.get("brand"),clickable:!0,model:t,events:{onItemClick:function(){e.dispatchEvent("onItemClick",t)}}}).render()}))}]}]}})})),define("DS/i3DXCompass/View/PortfolioGenericView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/BannerResponsiveView","DS/i3DXCompass/Collection/PortfolioCollection","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/Tools","DS/UIKIT/Carousel","DS/i3DXCompass/Feature","DS/UIKIT/Badge","DS/UIKIT/Tooltip","DS/i3DXCompass/View/PortfolioContactFormView","DS/i3DXCompass/View/ContentOverlayView","DS/i3DXCompass/Data","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature","DS/UIKIT/Input/Button","DS/i3DXCompass/View/PortfolioSectionView"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h,f,g,v){"use strict";var C=[],y=function(e){return e.id.toLowerCase().replace(/ /g,"")},b=function(e){return e.filter((function(e){return C[e]})).map((function(e){return C[e]}))},S=function(e){var t=e.get?e.get("title"):e.title;return(e.get?e.get("slug"):e.slug)||a.toSeoUrl(t)},w=function(e,t){var n="",i=r.getPortfolioUrlLocale()?r.getPortfolioUrlLocale()+"/":"";return e&&(n=e.map((function(e){return S(e)})).join("/")),t&&(n+="/"),(a.getRootPath()+i+n+(t?S(t):"")).replace(/\/\//g,"/")},E=t.extend({tagName:function(){return this.options.itemTagName||"a"},domEvents:{click:"click"},className:"portfolio-item",click:function(t){this.dispatchEvent("onItemClick",this.model),e.Event.stop(t),r.supportPushState()&&r.needPushState()&&(history.pushState("",this.model.get("title"),w(this.options.navigation,this.model)),a.manageSeoTags(this.model,S(this.model)))},setup:function(e){var t=this.model&&this.model.get("deployments")?["All"].concat(this.model.get("deployments")):null;return this.defaultIconsuffix=e.defaultIconsuffix||"thumb",t&&this.container.setAttribute("data-deployment",b(t).map((function(e){return y(e)})).join(",")),this},render:function(){var e=this.container,t=this._getTemplate(),n=w(this.options.navigation,this.model);return e.setAttribute("data-id",this.model.get("acronym")||this.model.get("id")),e.setAttribute("href",n),e.setAttribute("data-search",this.model.get("title")+(this.model.get("subTitle")?"/"+this.model.get("subTitle"):"")),e.setAttribute("data-seo",n),this.model.get("rank")&&e.setAttribute("data-rank",this.model.get("rank")),this.model&&this.model.get("comingSoon")&&e.addClassName("disabled"),e.setContent(t),this},_getTemplate:function(){var e=this.model.get("title").length>35;return{class:this._getPrefixedClassName("inner"),styles:{"background-image":"url("+this.getThumbnailIcon()+")"},html:{class:this._getPrefixedClassName("content"),html:[{class:this._getPrefixedClassName("title")+(e?" "+this._getPrefixedClassName("title-long"):""),html:this.model.get("title")},this.model.get("subTitle")?{class:this._getPrefixedClassName("subtitle"),text:this.model.get("subTitle")}:null,this._buildComingSoon()]}}},_buildComingSoon:function(){var e=null;return this.model&&this.model.get("comingSoon")&&(e={class:"coming-soon",tag:"img",src:n.getWebappsAssetUrl("i3DXCompass","/v3.2/Badge_Coming_Soon.png")}),e},_getPrefixedClassName:function(e){return this.className+"-"+e},getThumbnailIcon:function(){var t=window.devicePixelRatio>=2?this.defaultIconsuffix+"x2":this.defaultIconsuffix;return a.isCompassV32()||(t="thumb"),this.model.get("icon")?n.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("icon"),t,this.model.get("id"))):e.String.format(this.model.get("iconTemplate"),t,this.model.get("id"))}});return t.extend({tagName:"div",className:"portfolio",setup:function(t){if(!t.usageEntity)throw new Error("usageEntity options is mandatory");return t.itemsTitle&&(this.itemsTitle=t.itemsTitle),t.itemTagName&&(this.itemTagName=t.itemTagName),t.itemsDefaultIconsuffix&&(this.itemsDefaultIconsuffix=t.itemsDefaultIconsuffix),t.hideDescription&&(this.hideDescription=t.hideDescription),t.hideBanner&&(this.hideBanner=t.hideBanner),t.extendedDescription&&(this.extendedDescription=t.extendedDescription),t.buildBuy&&(this.buildBuy=t.buildBuy),this.model&&this.model.addEventOnce("onSync",this._onModelSync.bind(this)),this.renderOnce=a.debounce(this.render,500,!0).bind(this),this.collection&&(this.collection.addEvent("onSync",this.render.bind(this)),this.collection.addEvent("onAdd",this.renderOnce.bind(this)),this.collection.addEvent("onRemove",this.renderOnce.bind(this)),this.collection.addEvent("onChange",this.renderOnce.bind(this))),this._onItemClick&&(this._onItemClickOnce=a.debounce(this._onItemClick,500,!0).bind(this)),C={All:{id:"all",text:e.i18n("ALL")},"On Premise":{id:"onpremise",icon:"drive",text:e.i18n("On-premises")},"Public Cloud":{id:"cloud",icon:"cloud",text:e.i18n("On-cloud ")}},this._filterDeploymentsAndTranslate=b,this._deploymentToCode=y,this.model&&this.container.setAttribute("data-seo-current",w(t.navigation)),r.isBuyEnabled()&&this.refreshBascketFooter(),this},_onModelSync:function(){setTimeout(function(){this.collection=new s(this.model.get("data")),this.render()}.bind(this),25)},render:function(){var e=this.container,t=this.extendedDescription&&r.isSolutionDetailActivated();return e.setContent([this._buildBanner(),this._buildDescription(),t?this._buildBenefits():null,t?this._buildExtraContent():null,t?this._buildSuccessStory():null,t?this._buildDiscoverList():null,this._buildCourses(),this._buildFooter()]),setTimeout(function(){this._lazyLoadImages(),this._trackNavigation()}.bind(this),300),this},_isV32:function(){return!!this.model.get("tagLine")},_buildBanner:function(){return this.model&&!this.hideBanner?new i({model:this.model}).render():null},_buildTitleBanner:function(){return this.model&&!this.hideBanner&&this.model.get("title")?{tag:"portfolio-header-title",class:"font-3dslight",html:{text:this.model.get("title")}}:null},_buildTagLine:function(){var e=this.model&&this.model.get("tagLine");return this.hideDescription||!e?null:{tag:"h2",class:"font-3dssemibold",html:e}},_onContactUsClick:function(){var t=this;if(o.compassInc({eventCategory:"compass",eventAction:"compass-contact",persDim:{pd2:this.model.get("acronym"),pd3:this.model.get("title")}}),r.isOnPremiseEnvironment()||!r.isContactFormActivated())window.open("https://discover.3ds.com/my3dexperience-contact-sales","_blank");else{var n=new u({title:e.i18n("Contact us"),closable:!0,view:new p({events:{onClose:function(){n.back()}}}).render(),events:{onClose:function(){t.dispatchEvent("onClose")},callGoHomes:function(){n.back(),t.dispatchEvent("callGoHomes")}}}),i=t.container.getParent(".content-overlay").getParent().getElements(".content-overlay");n.inject(i[i.length-1]||t.container,"after"),n.show()}},_buildContactList:function(){var t,n=this.model,i=n.get("flyer"),s=[];return f.isMobileAppEnvironment()||(t=new g({className:"info",icon:"phone",id:"ContactListCallUs",value:e.i18n("Call Us")}),s.push(new g({className:"info",icon:"doc-log ",value:e.i18n("Contact Sales"),events:{onClick:this._onContactUsClick.bind(this)}}),t),new d({className:"compass-tooltip",position:"bottom",target:t.elements.container,trigger:"click touch",delay:{show:0,hide:0},body:"<div>"+e.i18n("USA & Canada: 1855 696 1125")+"</div><div>"+e.i18n("India: 1800 200 9276")+"</div> <div>"+e.i18n("Other English countries: +800 379 78 361")+"</div>"})),i&&s.push(new g({className:"info",icon:"download",value:i.text,events:{onClick:function(){var e=i.link;0!==e.indexOf("http")&&(e=a.getPortfolioAssetTemplateUrl(n.get("id"),e)),window.open(e,"_blank")}}})),{class:"portfolio-description-contact",html:s}},_buildTagList:function(){var e=this,t=null,n=this.model&&this.model.get("deployments")&&this.model.get("deployments").length>1?["All"].concat(this.model.get("deployments")):this.model&&this.model.get("deployments"),i=function(t){return t.length>1&&e.collection.find((function(e){return e.get("deployments").length!==t.length}))};if(n){var s=(n=b(n)).map((function(t){return new c({content:t.text,className:1===n.length||"all"===t.id?"primary":"do-disable",selectable:!0,closable:!1,id:t.id,icon:"onpremise"===t.id?"drive"+(i(n)?"":" -disabled"):"all"===t.id?"":"cloud"+(i(n)?"":" -disabled"),events:{onClick:function(){var t=this;this.elements.container.getParent(".portfolio-description-tags").getElements(".badge").forEach((function(e){e.getAttribute("id")===t.options.id?e.removeClassName("do-disable").addClassName("badge-primary"):e.removeClassName("badge-primary").removeClassName("do-disable").addClassName("do-disable")}));e.container.getElements("[data-deployment").forEach((function(e){e.getAttribute("data-deployment").indexOf(t.options.id)>-1?e.removeClassName("do-disable"):e.hasClassName("do-disable")||e.addClassName("do-disable")})),e.container.getElements("[data-deployment").find((function(e){return!e.isHidden()}))?e.container.getElement(".portfolio-items-empty").hide():e.container.getElement(".portfolio-items-empty").show()},onClose:function(){var t;this.elements.container.addClassName("disabled"),this.setClosable(!1),t=s.filter((function(e){return!1===e.elements.container.hasClassName("disabled")&&e})).map((function(e){return e.options.id})),e.container.getElements("[data-deployment").forEach((function(e){var n=!1;t.forEach((function(t){-1===e.getAttribute("data-deployment").indexOf(t)&&(n=!0)})),!1!==n||0===t.length?e.hide():e.show()})),e.container.getElements("[data-deployment").find((function(e){return!e.isHidden()}))?e.container.getElement(".portfolio-items-empty").hide():e.container.getElement(".portfolio-items-empty").show()}}})}));t={class:"portfolio-description-tags font-3dslight",html:s}}return t},_buildCourses:function(){var e=null;return this.model&&this.model.get("courses")&&(e=this.model.get("courses").map(this._buildCourse.bind(this))),e?{class:"courses",html:e}:null},_buildCourse:function(t){var i=e.createElement("div",{class:"course-wrapper",html:[{class:"course-wrapper-cnt",html:[{class:"course-content",html:[{class:"course-title",text:t.title},{class:"course-img",html:{tag:"img",src:n.getWebappsAssetUrl("i3DXCompass",e.String.format(t.icon,t.id,t.id))}},{class:"course-description",text:t.description},{html:[{class:"course-footer",text:t.version+" | "+t.duree+" | "+t.language}]}]},{class:"course-expand fonticon fonticon-chevron-down",tag:"i",events:{click:function(){i.getElement(".course-detail").toggleClassName("hidden")}}}]},{class:"course-detail hidden",html:t.data&&t.data.map((function(e){return{class:"course-detail-item",html:[{class:"course-detail-title",html:[{tag:"i",class:"fonticon fonticon-book-open"},{tag:"span",text:e.title}]},{class:"course-detail-duration",text:e.duration}]}}))}]});return i},stopVideo:function(){this.container.getElements(".portfolio-description video").forEach((function(e){e.pause()}))},_buildSuccessStory:function(){var t=this,n=null,i=[],s=this.model?this.model.get("successStory"):null;return s&&(s.subTitle&&i.push({class:"portfolio-success-story-subtitle",text:s.subTitle}),s.link&&s.thumbnail&&i.push({class:"portfolio-success-story-media",html:this._buildMedia(a.getPortfolioAssetTemplateUrl(this.model.get("id"),s.thumbnail)),events:{click:function(){this.setContent(t._buildMedia(s.link))}}}),n=new v({className:"portfolio-success-story",title:e.i18n("SUCCESS STORY"),subTitle:s.title,content:i}).render()),n},_buildBenefits:function(){var t=null;if(this.model.get("benefits")){var n=e.String.format(e.i18n("Benefits of {0}"),this.model.get("title"));this.model.get("benefits").indexOf("<ul><li>");-1!==this.model.get("benefits").indexOf("Benefits of")&&(n=this.model.get("benefits").substring(0,this.model.get("benefits").indexOf("</p>")).replace("<p>","").replace("<strong>","").replace("</strong>","")),t=new v({className:"portfolio-benefits",title:n,content:{tag:"div",class:"font-3dsregular",html:this.model.get("benefits")}}).render()}return t},_buildBenefit:function(){return this.model.get("benefits").replaceAll("<p>&nbsp;</p>","").replaceAll("<ul><li>",'<div class = "benefit-container"><h3 class="font-3dssemibold"><li>').replaceAll("</li></ul>","</h3>").replaceAll("</p>","</p></div>")},_buildDescription:function(){var t=this.model&&this.model.get("description"),n=this.model&&this.model.get("description")?{tag:"span",text:a.getTextFromHtml(this.model&&this.model.get("description"))}:"",i=this.model?a.isCarouselSmallSize()||!this.model.get("descriptionMediasTemplate")?this.model.get("descriptionMediasTemplate"):this.model.get("descriptionMedias"):null;if(!this.hideDescription&&t){var s=[{tag:"portfolio-header-background"},{tag:"portfolio-header",html:[this._buildTitleBanner(),this._buildTagLine()]},{tag:"portfolio-content",class:"font-3dslight",html:[this.model&&-1!==this.model.get("id").indexOf("RAP-")?n:t,this.extendedDescription&&r.isSolutionDetailActivated()||this.buildBuy?this._buildContactList():null]}];i&&(i.sort((function(e,t){return e.indexOf(".mp4")>-1?-1:1})),i.sort((function(e,t){return e.indexOf(".mp4")>-1?-1:e<t?0:1})),i.length>1?s.push({tag:"portfolio-video",html:new l({autoPlay:!1,infinite:!1,animation:"fade",arrows:!1,slides:e.createElement("div",{html:i.map(this._buildMedia.bind(this))}),slideSelector:"> video, > img",events:{onSlide:this.stopVideo.bind(this)}})}):s.push({tag:"portfolio-video",html:i.map(this._buildMedia.bind(this))})),t={tag:"portfolio-description",html:s}}return this.hideDescription?null:t},_buildExtraContent:function(){var t=null,n=this.model?this.model:null,i=n?n.get("extraContent"):null;return i&&(t={class:"portfolio-extra-content",html:{class:"portfolio-extra-content-inner",html:[{html:[{class:"portfolio-extra-content-title font-3dsregular",text:i.title},{class:"portfolio-extra-content-content font-3dslight",text:i.content}]},{class:"portfolio-extra-content-play-button",html:{class:"portfolio-button",html:[{text:i.button.text}],events:{click:function(){if(!i.gatedContent||e.is(h._getUser())){var t=i.button.link;0!==t.indexOf("http")&&(t=a.getPortfolioAssetTemplateUrl(n.get("id"),t)),window.open(t,"_blank")}else window.location.href=m.passportUrl+"/login?service="+encodeURIComponent(window.location.origin+window.location.pathname+window.location.hash)}}}}]}}),t},_buildDiscoverList:function(){var t=this,i=null,s=this.model?this.model.get("discover"):null,o=function(t){var i=window.devicePixelRatio>=2?"thumbx2":"thumb";return t.get("icon")?n.getWebappsAssetUrl("i3DXCompass",e.String.format(t.get("icon"),i,t.get("id"))):e.String.format(t.get("iconTemplate"),i,t.get("id"))};return s&&s.length>0&&(i=new v({className:"discover-section",background:!0,title:e.i18n("DISCOVER MORE SOLUTIONS"),content:{class:"discover-section-list",html:s.filter((function(e){return t.model.collection.get(e)})).map((function(n){var i=t.model.collection.get(n);return{tag:"portfolio-discover-card",html:[{tag:"portfolio-discover-card-header",styles:{"background-image":"url("+o(i)+")"}},{tag:"portfolio-discover-card-title",class:"text-ellipsis font-3dsregular",text:i.get("title")},{tag:"portfolio-discover-card-content",class:"font-3dsregular",text:i.get("tagLine")},{tag:"portfolio-discover-card-footer",html:{class:"portfolio-button font-3dssemibold",html:[{text:e.i18n("Learn more")},{tag:"i",class:"fonticon fonticon-chevron-right"}],events:{click:function(){t.model=i,t.render(),t.dispatchEvent("onDiscoverClick",i)}}}}]}}))}}).render()),i},_buildMedia:function(t,i){var s;return t.indexOf("youtu.be")>-1||t.indexOf("youtube.com")>-1?s=e.createElement("div",{class:"video-responsive",html:{tag:"iframe",src:t,type:"text/html",width:"640",height:"360",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}}):t.indexOf(".mp4")>-1?s=e.createElement("video",{tag:"video",playsinline:!0,muted:!0,controls:!0,disablepictureinpicture:!0,controlslist:"nodownload",poster:a.hasWebpSupport()?n.getWebappsAssetUrl("i3DXCompass","/video-poster.webp"):n.getWebappsAssetUrl("i3DXCompass","/video-poster.png"),html:[{tag:"source",src:t.replace(".mp4",".webm"),type:"video/webm"},{tag:"source",src:t,type:"video/mp4"}],events:{contextmenu:function(e){e.preventDefault()}}}):(s={tag:"img",alt:0===i?e.String.format(e.i18n("My 3DEXPERIENCE - {0}"),this.model.get("title")):e.String.format(e.i18n("My 3DEXPERIENCE - {0} - {1}"),this.model.get("title"),i)},t.indexOf(".png")&&a.hasWebpSupport()&&(t=t.replace(".png",".webp")),s.src=e.String.format(t,""),s.srcset=e.String.format("{0} 620w",e.String.format(t,"_620px"))),s},_getNavigationPath:function(){var e="";return this.options.navigation&&(e=this.options.navigation.map((function(e){return e.get?e.get("id"):e.id})).join("/")),e},_buildFooter:function(){var t=this,n=25,i=this.collection,s=this._getNavigationPath(),o=r.getExclusionsCollection(),a=[];o&&o.length>0&&i.length>0&&s&&s.length>0&&o.forEach((function(e){s.indexOf(e.get("id"))>-1&&e.get("data").forEach((function(e){i.remove(e)}))})),this.collection&&this.collection.length>0&&a.push(this._buildTagList());var l=e.createElement("div",{class:"portfolio-items",html:this.collection&&this.collection.slice(0,n).map(this._buildItem.bind(this))});if(a.push(l),a.push({class:"portfolio-items-empty",text:e.i18n("Please select an availability type: On-premises / On-cloud")}),this.list=new v({className:"section-footer",title:this.itemsTitle&&this.collection&&this.collection.length>0?this.itemsTitle:null,background:!0,content:a}).render(),this.collection&&this.collection.size()>n)for(var c=Math.ceil((this.collection.size()-n)/n),d=0;d<c;d++)requestAnimationFrame(function(i){t.collection.slice(n*(i+1),n*(i+2)).forEach((function(n){t._buildItem(n).getContent?l.appendChild(t._buildItem(n).getContent()):l.appendChild(e.createElement("div",t._buildItem(n)))}))}.bind(this,d));return this.list},_buildItem:function(e){var t=new E({defaultIconsuffix:this.itemsDefaultIconsuffix,navigation:this.options.navigation,model:e,itemTagName:this.itemTagName,events:{onItemClick:this._onItemClickOnce.bind(this)}});return this._renderBuildItem(t)},_renderBuildItem:function(e){return e.render()},_onItemClick:function(e){this.dispatchEvent("onItemClick",e)},_trackNavigation:function(){var e=this.options.usageEntity;o.trackPageView({pageURL:w(this.options.navigation),pageTitle:e,id:this.model?this.model.get("acronym")||this.model.get("id"):"",title:this.model?this.model.get("title"):"",parentPage:this.options.parentIcon})},_lazyLoadImages:function(){const e=this.container.getElements('[loading="lazy"]');if("IntersectionObserver"in window){const t=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting||void 0===e.isIntersecting){const t=e.target;"lazy"===t.getAttribute("loading")&&("img"===t.getTagName()?t.src=t.dataset.src:t.style["background-image"]="url("+t.dataset.src+")",t.setAttribute("loading","done"),t.removeAttribute("data-src"))}}))}));e.forEach((function(e){t.observe(e)}))}else e.forEach((function(e){e.src=e.dataset.src}))},refreshBascketFooter:function(){var e=this;("PORTFOLIOS_OPERATIONS"===e.options.usageEntity||"trading"===e.options.usageEntity||e.options.parentIcon||document.querySelector("#my-apps-ct compass-nav-main .tab-item.active .fonticon-globe"))&&require(["DS/MPFMiniCartComponent/MiniCartComponentFactory","DS/MPFMiniCartComponent/MiniCartComponent","UWA/Class/Listener"],(function(t,n,i){t.hasItems().then((function(t){t?"WORLD"!==e.options.parentIcon||document.querySelector("#my-apps-ct").hasClassName("compass-footer-visible")||document.querySelector("#my-apps-ct").addClassName("compass-footer-visible"):document.querySelector("#my-apps-ct").removeClassName("compass-footer-visible")}))}))}})})),define("DS/i3DXCompass/View/PortfolioBusinessExperienceRelationView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/PortfolioGenericView"],(function(e,t,n,i){"use strict";return i.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-business-experience-relation"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),e.itemsDefaultIconsuffix="small",this._parent(e)},_buildItem:function(e){for(var t=this,n=[],i=1;i<=5;i++)n.push({tag:"i",class:"fonticon fonticon-favorite-"+(i<=e.get("rating")?"on":"off")});return n.push({tag:"span",text:" ("+e.get("ratingCount")+")"}),{class:"portfolio-item-inner",html:[{class:"portfolio-item-image",html:e.get("icon")?{tag:"img",src:e.get("icon")}:null},{class:"portfolio-item-content",html:[{class:"content",html:[{class:"portfolio-item-title",text:e.get("title")},{class:"portfolio-item-rating",html:n},{class:"portfolio-item-logo",html:e.get("logo")?{tag:"img",src:e.get("icon")}:null}]},{class:"portfolio-item-description",text:e.get("descriptionShort")}]}],events:{click:function(){t.dispatchEvent("onItemClick",e)}}}}})})),define("DS/i3DXCompass/View/PortfolioDepth1View",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioGenericView","DS/i3DXCompass/Tools"],(function(e,t,n,i){"use strict";return n.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth1"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this._parent(e)}})})),define("DS/i3DXCompass/View/PortfolioDepth6View",["UWA/Core","DS/i3DXCompass/View/PortfolioGenericView","DS/i3DXCompass/View/AppView","DS/UIKIT/Tooltip","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/View/ContentOverlayView","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompass/Feature","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/View/PortfolioContactFormView","DS/UIKIT/Input/Button"],(function(e,t,n,i,s,o,a,l,r,c,d){"use strict";var p=e.i18n;return t.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth6"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),(e.contact||e.buy)&&(e.buildBuy=!0,this.buildBuy=!0),this._parent(e)},_buildItem:function(e){var t=new n({isApp:!0,isLazy:!0,additionalClassName:"app-item",additionalClassNameImage:e.get("brand")?"is-"+e.get("brand").replace(" ","-"):"",model:e,clickable:void 0===this.options.clickable||this.options.clickable,desableImgWidget:this.options&&!0===this.options.desableImgWidget,events:{onItemClick:this._onItemClick.bind(this),onClickSettings:this._onSettingsClick.bind(this)}}).render(),s=e&&e.get("deployments")?["All"].concat(e.get("deployments")):null;return s&&(new i({className:"compass-tooltip",position:"bottom",target:t.getContent(),trigger:"click touch",body:this._filterDeploymentsAndTranslate(s).map((function(e){return e.text})).join(" | ")}),t.getContent().setAttribute("data-deployment",this._filterDeploymentsAndTranslate(s).map(function(e){return this._deploymentToCode(e)}.bind(this)).join(","))),t},_onSettingsClick:function(e){this.dispatchEvent("_onSettingsClick",e)},_buildContactList:function(){this.model;var e=[];return!l.isMobileAppEnvironment()&&this.options.contact&&e.push(this._buildContactButton()),this.options.buy&&this._injectBuyButtonIfNeeded(),{class:"portfolio-description-contact",html:e}},_buildContactButton:function(){var t=this;return this.options.contact&&!l.isMobileAppEnvironment()?new d({value:p("Contact us"),className:"info to-contact",icon:"mail",events:{onClick:function(n){if(e.Event.stop(n),s.compassInc({eventCategory:"compass",eventAction:"compass-contact",persDim:{pd2:t.model.get("acronym"),pd3:t.model.get("title")}}),l.isOnPremiseEnvironment()||!l.isContactFormActivated())window.open(t.options.contact,"_blank");else{var i=new o({title:p("Contact us"),closable:!0,view:new c({events:{onClose:function(){i.back()}}}).render(),events:{onClose:function(){t.dispatchEvent("onClose")},callGoHomes:function(){i.back(),t.dispatchEvent("callGoHomes")}}}),a=t.container.getParent(".content-overlay").getParent(),r=a.getElements(".content-overlay");r[r.length-1]?i.inject(r[r.length-1],"after"):i.inject(a),i.show()}}}}):null},_injectBuyButtonIfNeeded:function(){var e=this,t=this.model.get("externalIds")||this.model.get("acronym");require(["DS/MPFPortfolioModel/PortfolioHelper"],(function(n){n.isAuthorizedToBuy(t).then((function(t){if(t){var n,i=e.container.getElement(".to-contact");i?e._buildBuyButton().inject(i,"before"):e._buildBuyButton().inject(e.container.getElement(".portfolio-description-contact")),window.location.pathname.indexOf("/buy")>-1&&(n=e.container.getElement("[data-action=compass-buy]"))&&n.click()}}))}))},_buildBuyButton:function(){var e=this;return l.isCompassStandalone()&&a.getServiceUrl({serviceName:"my3dexperience",onComplete:function(t){t&&t.length>0&&(e.my3dexpUrl=t[0])}}),new d({value:p("BUY"),icon:"shopping-cart",className:"primary",attributes:{"data-action":"compass-buy"},events:{onClick:function(t){s.compassInc({eventCategory:"compass",eventAction:"compass-buy",persDim:{pd2:e.model.get("acronym"),pd3:e.model.get("title")}}),l.isNativeApplicationEnvironment()?a.getAppInfo({appId:"X3DMYEX_AP",onComplete:function(e){r.publish("launchAppCallback",e)}}):l.isCompassStandalone()?window.open(e.my3dexpUrl,"_blank"):e.clickBuy(t)}}})},clickBuy:function(t,n){e.Event.stopPropagation(t),t.stopPropagation(),l.supportPushState()&&-1===window.location.pathname.indexOf("/buy")&&history.pushState("",this.model.get("title"),window.location.pathname+"/buy"),this.dispatchEvent("onClickBuy",[this.model,this.buyComponent])}})})),define("DS/i3DXCompass/View/PortfolioDepth3View",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioGenericView"],(function(e,t,n){"use strict";return n.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth3"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this._parent(e)}})})),define("DS/i3DXCompass/Collection/InstallCEFList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Model/Install","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data"],(function(e,t,n,i,s,o){"use strict";var a=e.i18n;return t.extend({model:n,parse:function(e){var t=this,n=[];return e.forEach((function(e){var i;e.lastBuildId&&t.isAvailableForCurrentEnvironment(e)&&(e.processes=(e.installedProcesses||[]).map((function(e){return e.split(".")[0]})),i=e.processes[0],e.dpId=e.lastBuildId+"+"+i,e.dpIdObj={ID:e.lastBuildId,process:i,golden:-1===(e.SPlevel||"").indexOf("."),release:"R"+e.level,SPLevel:e.SPlevel},e.name=(e.longName||e.GAlevel)+(e.registry_Identifier&&"!"!==e.registry_Identifier?" - "+e.registry_Identifier:""),e.daemonId=e.id,e.id=e.GAlevel+e.installationType+(e.registry_Identifier||""),n.push(e))})),n},isAvailableForCurrentEnvironment:function(e){var t=!0,n=o.buildTransactionId&&o.buildTransactionId.split("-")[0],i=e.installationType.indexOf("_Cloud")>-1;return(n>="R421"||""===n)&&e.installationType.toLowerCase().indexOf("desktop")>-1&&(t=o.cloud?i:!i),t},sync:function(e,t,n){if("read"===e)i.discoverAllInstall({onComplete:function(e){n&&n.onComplete&&n.onComplete(e)},onFailure:function(){s.dispatchEvent("onShowMessage",[a("unableinstalldata"),5e3]),n&&n.onFailure&&n.onFailure()},silent:n._silent})}})})),define("DS/i3DXCompass/InstallManager",["UWA/Core","UWA/Controls/Abstract","UWA/Controls/Input","UWA/Class/Model","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/EventManager","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/Collection/InstallList","DS/i3DXCompass/Collection/ProductList","DS/i3DXCompass/Collection/InstallOptionalContentList","DS/i3DXCompass/Collection/ProductOptionalContentList","DS/i3DXCompass/Collection/InstallCEFList","DS/i3DXCompass/Collection/ProductCEFList","DS/UIKIT/Modal","DS/UIKIT/Input/Select","DS/i3DXCompass/Feature","DS/UIKIT/Input/Button","DS/UIKIT/Spinner","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h,f,g,v,C,y,b){"use strict";var S=o.i18n,w=function(){return{tag:"div",styles:{padding:"20px",margin:"20px 0",border:"1px solid #eee","border-left-width":"5px","border-radius":"3px","text-align":"justify","border-left-color":"#E87B00"},html:[{tag:"p",text:S("outdated_installation_uninstall")},{tag:"p",html:S("outdated_installation_uninstall_warning")}]}},E=t.extend({defaultOptions:{},name:"compass-process-descriptor",buildSkeleton:function(){var t=this,n=this.elements,i=this.options.products.title;n.title=e.createElement("button",{class:"btn btn-primary btn-lg btn-block",html:i,events:{click:function(){t.dispatchEvent("onClick")}}}),n.container=e.createElement("div",{class:this.getClassNames(),html:[n.title]})},getContent:function(){return this.elements.container||this.buildSkeleton(),this.elements.container}}),D=i.extend({idAttribute:"codeLevel"}),A=s.extend({model:D,comparator:"place"}),I=i.extend({idAttribute:"installType",setup:function(){this._levels=new A(this.get("levels")),this.addEvent("onChange:levels",(function(e,t){this._levels.set(t)}))}}),N=s.extend({model:I}),k=i.extend({setup:function(){this._levels=new A(this.get("levels")),this.addEvent("onChange:levels",(function(e,t){this._levels.set(t)}))}}),_=s.extend({model:k}),P=null,T={INSTALL_NOTHING_TO_DO:0,INSTALL_PROPOSE_UPDATE:1,INSTALL_GA_ON_GA:2,INSTALL_FORCE_UPDATE:3,CEF_PRODUCT_VALUE:"TECCEF",NEW_INSTALL_NOTHING_TO_DO:0,NEW_INSTALL_PROPOSE_UPDATE:1,NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL:2,NEW_INSTALL_FORCE_UPDATE:3,NEW_INSTALL_FORCE_UPDATE_UNINSTALL:4,NEW_INSTALL_ADDITIONAL:5,NEW_INSTALL_ERROR:6,releases:[],installList:new c,productList:null,productOptionalContentList:null,stackList:new N,stackOptionalList:new N,installOptionalList:new p,installCEFList:null,productCEFList:null,installLevelList:new _,installLevelOptionalList:new _,init:function(e){T.installCEFList=T.installList,T.cloud=e,T.installList.addEvents({"onChange:lastBuildId":T.invalidateProductList,"onChange:processes":T.invalidateProductList,onAdd:T.invalidateProductList,onRemove:T.invalidateProductList}),T.installOptionalList.addEvents({"onChange:lastBuildId":T.invalidateProductList,"onChange:processes":T.invalidateProductList,onAdd:T.invalidateProductList,onRemove:T.invalidateProductList}),T.installCEFList.addEvents({"onChange:lastBuildId":T.invalidateProductList,"onChange:processes":T.invalidateProductList,onAdd:T.invalidateProductList,onRemove:T.invalidateProductList})},invalidateProductList:function(){T.productList&&T.productList.invalidate()},onlineInstallation:function(t,n,i,s,o,a,c,d){return n&&v.isLockInstallationUpdate()?(l.dispatchEvent("onShowMessage",S("isLockInstallationUpdate")),void l.dispatchEvent("onHideMessage",5e3)):v.isLockInstallation()?(l.dispatchEvent("onShowMessage",S("isLockInstallation")),void l.dispatchEvent("onHideMessage",5e3)):void r.isDaemonBusy({silent:o,onComplete:function(e){e?(l.dispatchEvent("onShowMessage",S("launcherbusyretry")),l.dispatchEvent("onHideMessage",5e3)):d?T.optionalContentInstallation(t,n,i,c):T.onlineInstallationMenu(t,n,i,s,o,a,null,c)},onFailure:function(t){e.log(t),l.dispatchEvent("onShowMessage",S("launcherunavailable")),l.dispatchEvent("onHideMessage",5e3)}})},removeInstallation:function(t,n){var i=[];if(v.isLockUninstallation())return l.dispatchEvent("onShowMessage",S("isLockUninstallation")),void l.dispatchEvent("onHideMessage",5e3);if(T.modal=new f({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){T.modal.destroy()}},header:"<h4>"+S("3dexperienceUninstallation")+"</h4>",body:"<div></div>",footer:[{tag:"button",class:"btn btn-primary",text:S("uninstall"),events:{click:function(){T.modal.hide(),T.uninstall(t)}}},{tag:"button",class:"btn btn-default",text:S("cancel"),events:{click:function(){T.modal.hide()}}}]}).inject(document.body),t.get("apps").length<=5){var s=t.get("apps").length;T.modal.setBody("<div>"+e.String.format(S("Are you sure you want to uninstall <b>{0}</b> ({1})?"),n.get("title"),t.get("longName"))+"</div>"),t.get("apps").forEach((function(o){b.getAppInfo({appId:o.appsId,onComplete:function(o){s--,o.title!==n.get("title")&&i.push(o.title),0===s&&(1===i.length?T.modal.setBody("<div>"+e.String.format(S("Are you sure you want to uninstall <b>{0}</b> ({1})?"),n.get("title"),t.get("longName"))+"</div>"):T.modal.setBody("<div>"+e.String.format(S("Are you sure you want to uninstall <b>{0}</b> ({1}) and <i>{2}</i> Apps?"),n.get("title"),t.get("longName"),i.join(", "))+"</div>"))}})}))}else T.modal.setBody("<div>"+e.String.format(S("Are you sure you want to uninstall <b>{0}</b> ({1}) and {2} related Apps?"),n.get("title"),t.get("longName"),t.get("apps").length)+"</div>")},uninstall:function(t){var n={installId:t.get("daemonId"),isInteractive:!0};l.dispatchEvent("onShowMessage",S("lauchingUninstallation")),l.dispatchEvent("onHideMessage",5e3),r.uninstallMedia({params:n,onComplete:function(){l.dispatchEvent("onShowMessage",S("uninstallationsuccess")),l.dispatchEvent("onHideMessage",5e3)},onFailure:function(t){e.log(t),o.dispatchLauncherErrorEvent(t)}})},optionalContentInstallation:function(t,n,i,s){var a,l,r,c,d,p,u,m=[],h=(o.removeDoublons(T.installationPaths),t.get("powerBy")&&t.get("powerBy").extendedApp&&t.get("powerBy").baseApp.extraInstall&&t.get("powerBy").baseApp.extraInstall!==licenseToInstall?function(){t.set("licenses",[{id:t.get("powerBy").baseApp.extraInstall}]),t.set("powerByBase",!0),require(["DS/i3DXCompassServices/i3DXCompassPubSub"],(function(e){e.publish("installApp",{appId:t.get("id")},(function(){t.set("licenses",[{id:t.get("powerBy").extendedApp.extraInstall}]),t.set("powerByBase",!1),t.unset("install")}))}))}:function(){e.log("Nothing to do for ExtraDriveInstall")});t.get("licenses").forEach((function(e){m.push(T.productOptionalContentList.get(e.id))})),l={title:e.String.format(S(n?"updateOptionalContentOfAllRolesContaining":"installOptionalContentOfAllRolesContaining"),t.get("title")),id:"allgrantedprocesses",products:m},c=i,a=(i=t.get("stackOptionContentList")._models[0]).get("installType"),T.productOptionalContentList.where({installType:a,granted:!0}),d=T.stackOptionalList.get(a),p=d._levels.last(),r=e.createElement("div",{html:[e.createElement("div",{class:"compass-install-desc compass-install-intro",html:n?e.String.format(S("readyupdate"),p.get("commercialName")):e.String.format(S("readyinstallation"),p.get("commercialName"))}),n?{tag:"div",class:"compass-install-desc",html:e.String.format(S("nbcompleteupdgraded"),p.get("commercialName"))}:null,n&&!0===n.get("uninstall")?w():"",new E({products:l,events:{onClick:function(e,t,i){var s=n?n.getInstallationMode():"Both";n&&(c=n),T.launchInstallation(e,c,p,s,u,t,i)}.bind(T,l,h)}}),undefined]}),T.modal=new f({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){T.modal.destroy()}},header:"<h4>"+S("3dexperienceinstallation")+"</h4>",body:r,footer:{tag:"button",class:"btn btn-default",text:S("cancel"),events:{click:function(){T.modal.hide()}}}}).inject(document.body)},onlineInstallationMenu:function(t,n,i,s,a,l,r,c){var d,p,u,m,h,v,C,y,b,D,A,I,N,k,_=[],O=[],U=o.removeDoublons(T.installationPaths);function x(e,t,i){var s=n?n.getInstallationMode():"Both";!A&&N&&"cloud"!==N.getValue()[0]&&(A=N.getValue()[0]),T.launchInstallation(e,C,D,s,A,t,i)}P||(P=t.extractMyAppsUrlFromLaunchInfo()),n?(n.get("processes").some((function(e){var t=T.productList.get(e);if(t.get("online")&&t.get("env").length>0)return O.push(t),!0})),0===O.length&&(d=n.get("installType"),O.push(T.productList.findWhere({granted:!0,installType:d}))),p={title:s?e.String.format(S("update"),t.get("title")):S("updateallprocesses"),id:"update",products:O}):(e.is(r)?_.push(T.productList.get(r)):t.get("licenses").forEach((function(e){var t=T.productList.get(e.id);t.get("installType")&&_.push(t)})),d=_[0].get("installType"),function(t,n){return t.length===n.length&&t.every((function(t){return e.Array.detect(n,(function(e){return t.get("id")===e.get("id")}))}))}(O=T.productList.where({installType:d,granted:!0}),_)||s||(u={title:S("installallgranted"),id:"allgrantedprocesses",products:O}),m={title:s?e.String.format(S("install"),t.get("title")):e.String.format(S("installallcontaining"),t.get("title")),id:u?"allcontainingprocesses":"allgrantedprocesses",products:_},i||(i=T.installList.find((function(e){return!0===e.get("online")&&e.get("installType")===d&&"CNT"!==e.get("type")&&e.isCompatible(T.releases)&&e.isAvailableForInstallation()})))),(C=n||i)?(y=T.installLevelList.get(C.get("dpId")),D=y._levels.last()):(b=T.stackList.get(d),D=b._levels.last()),v=e.createElement("div",{class:"compass-install-desc compass-install-intro",html:n?e.String.format(S("readyupdate"),D.get("commercialName")):e.String.format(S("readyinstallation"),l?C.get("name"):D.get("commercialName"))}),0===U.length?A=null:(U.push({label:S("DefaultInstallationLocation"),value:"cloud"}),k=U.map((function(e,t){return{label:e.label||e,value:void 0!==e.value?e.value:e,selected:0===t}})),N=new g({placeholder:!1,options:k}),I=e.createElement("div",{class:"compass-install-path",html:[{tag:"div",class:"compass-install-desc",text:S("instfilelocation")},N]}));var L=t.get("powerBy")&&t.get("powerBy").extendedApp&&t.get("powerBy").baseApp.extraInstall&&t.get("powerBy").baseApp.extraInstall!==r?function(){t.set("licenses",[{id:t.get("powerBy").baseApp.extraInstall}]),t.set("powerByBase",!0);var e=t.get("powerBy")?t.get("powerBy").baseApp.id:t.get("id");t.get("powerBy")&&t.collection.get(e)&&t.collection.get(e).set("licenses",[{id:t.get("powerBy").baseApp.extraInstall}]);require(["DS/i3DXCompassServices/i3DXCompassPubSub"],(function(n){n.publish("installApp",{appId:e},(function(){t.set("licenses",[{id:t.get("powerBy").extendedApp.extraInstall}]),t.set("powerByBase",!1),t.unset("install")}))}))}:function(){e.log("Nothing to do for ExtraDriveInstall")};!a||n&&!0===n.get("uninstall")||I?(h=e.createElement("div",{html:[v,n&&!0===n.get("uninstall")?w():"",!i||l||D.get("selectedInstall")?null:{tag:"div",class:"compass-install-desc",html:e.String.format(S("nbcompleteupdgraded"),D.get("commercialName"))},l?new E({products:{title:e.String.format(S("installalladditionalresources"))},events:{onClick:x.bind(T,u||m,L,l)}}):null,p&&!l?new E({products:p,events:{onClick:x.bind(T,p,L)}}):null,a||!u||l?null:[new E({products:u,events:{onClick:x.bind(T,u,L)}}),{tag:"div",class:"compass-install-desc",html:e.String.format(S("orinstallrelated"),t.get("title"))}],m&&!l?new E({products:m,events:{onClick:x.bind(T,m,L)}}):null,I]}),T.modal=new f({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){T.modal.destroy()}},header:"<h4>"+S("3dexperienceinstallation")+"</h4>",body:h,footer:{tag:"button",class:"btn btn-default",text:S("cancel"),events:{click:function(){T.modal.hide()}}}}).inject(document.body)):m?x.call(T,m,c):p&&x.call(T,p,c)},_getExtraInstall:function(e,t,n,i,s,o,a){T.onlineInstallationMenu(e,t,n,i,s,o,a)},launchInstallation:function(t,n,i,s,c,d,p){var u,m={},h=[],f=n?n.get("daemonId"):null;t.products.forEach((function(e){var t=e.get("env")[0];m[t]||(m[t]=[]),(!p||(p&&n&&n.get("processes").indexOf(e.get("id")))>-1)&&m[t].push(e.get("id"))})),Object.keys(m).forEach((function(e){m[e]&&m[e].length>0&&h.push({oiid:e,process:m[e]})})),u={clusterID:a.clusterId,processToInstallForOid:h,release:T.releaseForInstall,webServiceURL:a.onlineInstallUrl,type:n&&n.get("type")?n.get("type"):"DESKTOP_Cloud_Content"===i.get("codeType")?"CNT":"CODE",codeType:i.get("codeType"),levelType:s,codeLevel:p?n.get("lastBuildId"):i.get("codeLevel"),instVarData:{MyAppsURL:a.myAppsBaseUrl,Cas:null,PassportUrl:null,"3DRegistryURL":a.registryUrl,tenant:a.selectedPlatform},dataStoragePath:c||null,baseInstallIdForHF:f},p&&(u.installCnt=!0),u.osds="linux"===o.getOs()?"linux_a64":"win_b64",T.modal&&T.modal.hide(),a.getCasTgcAndCasTransientUrl({onComplete:function(t,i,s){if(e.log(u),u.instVarData.Cas=t,u.instVarData.x3ds_transient_auth_url=i,u.instVarData.PassportUrl=s,n&&n.get("uninstall")){var a=e.merge({release:n.get("level"),codeLevel:n.get("lastBuildId"),installId:f,uninstVarData:{uninstallType:"upgrade"}},u);r.uninstallMedia({params:a,onComplete:function(){u.baseInstallIdForHF=null,u.levelType="Both",r.installMedia({params:u,onComplete:function(){l.dispatchEvent("onShowMessage",S("installationsuccess")),l.dispatchEvent("onHideMessage",5e3),d&&("function"==typeof d?d():d.onComplete&&d.onComplete())},onFailure:function(t){e.log(t),o.dispatchLauncherErrorEvent(t),d&&("function"==typeof d?d():d.onFailure&&d.onFailure())}}),l.dispatchEvent("onShowMessage",S("launchinginstallation")),l.dispatchEvent("onHideMessage",5e3)},onFailure:function(t){e.log("onFailure"),e.log(t),o.dispatchLauncherErrorEvent(t)}})}else r.installMedia({params:u,onComplete:function(){l.dispatchEvent("onShowMessage",S("installationsuccess")),l.dispatchEvent("onHideMessage",5e3),d&&("function"==typeof d?d():d.onComplete&&d.onComplete())},onFailure:function(t){e.log(t),o.dispatchLauncherErrorEvent(t),d&&("function"==typeof d?d():d.onFailure&&d.onFailure())}}),l.dispatchEvent("onShowMessage",S("launchinginstallation")),l.dispatchEvent("onHideMessage",5e3)}})},getCompatibleAdditionalContent:function(t,n,i,s){var o=T.installOptionalList,a=T.productOptionalContentList,l=this;function r(e){var t=e.get("id"),n=e.get("thirdParty"),i={stack:"",installs:""};return e.get("powerBy")&&(t=e.get("powerBy").extendedApp?e.get("powerBy").extendedApp.id:e.get("powerBy").baseApp.id,(e.object&&"3DDrive"===e.object.serviceId||e.get("powerByBase"))&&(t=e.get("powerBy").baseApp.id)),i.installs=o.filter((function(e){return e.isCompatible(T.releases)&&(n&&!l.isInstallCEF(e.get("installedProcesses"))||e._apps.get(t))})),i.stack=T.stackOptionalList,i}a||(a=T.productOptionalContentList=new u({installList:o})),o.fetch({_silent:s,onComplete:function(){a.update({appId:l._retrieveAppIdForInstallation(t),onComplete:function(i,s){var o;s.change&&T.extractOptionalData(s),o=e.is(t,"array")?t.map(r):r(t),n(o[0].installs,o[0].stack)}})},onFailure:function(){i&&i()}})},_retrieveAppIdForInstallation:function(e){var t,n;return e&&(e.get?n=e:e.length>0&&(n=e[0])),n&&(t=n.get("powerBy")?n.get("powerBy").extendedApp?n.get("powerBy").extendedApp.id:n.get("powerBy").baseApp.id:n.get("id")),t},getCompatibleInstalls:function(t,n,i,s){var o=T.installList,a=T.productList,l=this;function r(e){var t,n=e.get("id"),i=e.get("thirdParty");return e.get("powerBy")?e.object&&"3DDrive"===e.object.serviceId||e.get("powerByBase")?(n=e.get("powerBy").baseApp.id,o.filter((function(e){return e.isCompatible(T.releases)&&(i&&!l.isInstallCEF(e.get("installedProcesses"))||e._apps.get(n))}))):(e.get("powerBy").extendedApp?(n=e.get("powerBy").extendedApp.id,0===(t=o.filter((function(e){return e.isCompatible(T.releases)&&(i&&!l.isInstallCEF(e.get("installedProcesses"))||e._apps.get(n))}))).length&&(n=e.get("powerBy").baseApp.id,t=o.filter((function(e){return e.isCompatible(T.releases)&&(i||e._apps.get(n))&&e.get("instruction")!==T.NEW_INSTALL_ERROR})))):(n=e.get("powerBy").baseApp.id,t=o.filter((function(e){return e.isCompatible(T.releases)&&(i&&!l.isInstallCEF(e.get("installedProcesses"))||e._apps.get(n))}))),t):o.filter((function(e){return e.isCompatible(T.releases)&&(i&&!l.isInstallCEF(e.get("installedProcesses"))||e._apps.get(n))}))}a||(a=T.productList=new d({installList:o})),o.fetch({_silent:s,onComplete:function(){var i=l._retrieveAppIdForInstallation(t);a.update({appId:i,onComplete:function(i,s){var o;!0===v.enableMockFUN125890()&&s&&s.downloadplatform&&s.downloadplatform.result&&s.downloadplatform.result.stacks&&s.downloadplatform.result.stacks.length>0&&s.downloadplatform.result.stacks[0].installType&&t[0].setInstallType(s.downloadplatform.result.stacks[0].installType),s.change&&T.extractDpData(s),o=e.is(t,"array")?t.map(r):r(t),n(o)}})},onFailure:function(){i&&i()}})},getCompatibleCEFContent:function(e,t,n,i){var s=T.installCEFList,o=T.productCEFList,a=(T.stackList,!1),l=this;o||(o=T.productCEFList=new h({installCEFList:s})),o.update({appId:l._retrieveAppIdForInstallation(e),onComplete:function(e,n){var i,s=[],o=[],l=T.installCEFList,r=T.stackList,c=[T.productCEFList._models[0]],d=n.downloadplatform.result.stacks[0].installType;n.change&&T.extractCEFData(n),l.length>0&&(s=l.filter((function(e){return e.get("installType")===d&&!0===e.get("online")&&e.isAvailableForInstallation()}))),0===s.length&&(o=r.filter((function(e){return e.get("installType")===d&&e.get("levels").filter((function(e){return 6!==e.status}))})),o.length>0&&(a=!0)),i=T.stackList.get(d)._levels.last(),t(s,o,a,d,c,i)}})},extractDpData:function(e){var t=T.releases=[];e.myapps&&(T.cloud=e.myapps.cloud,T.installationPaths=e.myapps.installationPaths||[]),e.downloadplatform&&e.downloadplatform.result&&e.downloadplatform.result.stacks&&(e.downloadplatform.result.stacks.forEach((function(e){e.levels.forEach((function(e){o.pushUnique(t,e.release.substr(1,3))}))})),T.stackList.set(e.downloadplatform.result.stacks),T.installLevelList.set(e.downloadplatform.result.installs),T.installList.forEach((function(e){var t=T.installLevelList.get(e.get("dpId")),n=t?function(e){var t=e;return e===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL?t=T.INSTALL_FORCE_UPDATE:e===T.NEW_INSTALL_ADDITIONAL||(e===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL?t=T.INSTALL_PROPOSE_UPDATE:e===T.NEW_INSTALL_ERROR&&(t=T.INSTALL_NOTHING_TO_DO)),t}(t.get("instruction")):0,i=t&&t._levels.length>0&&n!==T.INSTALL_NOTHING_TO_DO&&n!==T.INSTALL_GA_ON_GA,s=[],o=t?t.get("stack"):null;o&&(s=T.stackList.get(o)._levels.last().get("processes"));e.set({online:true,update:i,status:n,instruction:t.get("instruction"),uninstall:t.get("instruction")===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL||t.get("instruction")===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL,installType:o,onlineStackProcesses:s,targetSPLevel:t&&t._levels&&t._levels.length>0?t._levels.last().get("targetSPLevel"):null,daysRemaining:t.get("daysRemaining")})}))),e.transactionId&&(T.releaseForInstall=e.transactionId.split("-")[0]),0===t.length&&T.releaseForInstall&&T.releases.push(T.releaseForInstall.substr(1,3))},isInstallCEF:function(e){var t=this;return!!e.filter((function(e){return e.indexOf(t.CEF_PRODUCT_VALUE)>-1})).length>0},extractOptionalData:function(e){var t=T.releases=[];e.myapps&&(T.cloud=e.myapps.cloud,T.installationPaths=e.myapps.installationPaths||[]),e.downloadplatform&&e.downloadplatform.result&&e.downloadplatform.result.stacks&&(e.downloadplatform.result.stacks.forEach((function(e){e.levels.forEach((function(e){o.pushUnique(t,e.release.substr(1,3))}))})),T.stackOptionalList.set(e.downloadplatform.result.stacks),T.installLevelOptionalList.set(e.downloadplatform.result.installs),T.installOptionalList.forEach((function(e){var t=T.installLevelOptionalList.get(e.get("dpId")),n=t?function(e){var t=e;return e===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL?t=T.INSTALL_FORCE_UPDATE:e===T.NEW_INSTALL_ADDITIONAL||(e===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL?t=T.INSTALL_PROPOSE_UPDATE:e===T.NEW_INSTALL_ERROR&&(t=T.INSTALL_NOTHING_TO_DO)),t}(t.get("instruction")):0,i=t&&t._levels.length>0&&n!==T.INSTALL_NOTHING_TO_DO&&n!==T.INSTALL_GA_ON_GA,s=[],o=t?t.get("stack"):null;o&&(s=T.stackOptionalList.get(o)._levels.last().get("processes"));e.set({online:true,update:i,status:n,uninstall:t.get("instruction")===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL||t.get("instruction")===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL,installType:t?t.get("stack"):null,onlineStackProcesses:s,targetSPLevel:t&&t._levels&&t._levels.length>0?t._levels.last().get("targetSPLevel"):null,daysRemaining:t.get("daysRemaining")})}))),e.transactionId&&(T.releaseForInstall=e.transactionId.split("-")[0]),0===t.length&&T.releaseForInstall&&T.releases.push(T.releaseForInstall.substr(1,3))},extractCEFData:function(e){var t=T.releases=[],n=function(e){var t=e;return e===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL?t=T.INSTALL_FORCE_UPDATE:e===T.NEW_INSTALL_ADDITIONAL||(e===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL?t=T.INSTALL_PROPOSE_UPDATE:e===T.NEW_INSTALL_ERROR&&(t=T.INSTALL_NOTHING_TO_DO)),t};e.myapps&&(T.cloud=e.myapps.cloud,T.installationPaths=e.myapps.installationPaths||[]),e.downloadplatform&&e.downloadplatform.result&&e.downloadplatform.result.stacks&&(e.downloadplatform.result.stacks.forEach((function(e){e.levels.forEach((function(e){o.pushUnique(t,e.release.substr(1,3))}))})),T.stackList.set(e.downloadplatform.result.stacks),T.installLevelList.set(e.downloadplatform.result.installs),T.installCEFList.length>0?T.installCEFList.forEach((function(e){var t=T.installLevelList.get(e.get("dpId")),i=t?n(t.get("instruction")):0,s=t&&t._levels.length>0&&i!==T.INSTALL_NOTHING_TO_DO&&i!==T.INSTALL_GA_ON_GA,o=[],a=t?t.get("stack"):null;a&&(o=T.stackList.get(a)._levels.last().get("processes"));e.set({online:true,update:s,status:i,instruction:t.get("instruction"),uninstall:t.get("instruction")===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL||t.get("instruction")===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL,installType:a,onlineStackProcesses:o,targetSPLevel:t&&t._levels&&t._levels.length>0?t._levels.last().get("targetSPLevel"):null,daysRemaining:t.get("daysRemaining")})})):T.stackList.forEach((function(e){var t=e._levels.last(),i=t?n(t.get("status")):0,s=e&&e._levels.length>0&&i!==T.INSTALL_NOTHING_TO_DO&&i!==T.INSTALL_GA_ON_GA,o=[],a=e?e.get("installType"):null;a&&(o=t.get("processes")),e.set({online:true,installFromScratch:s,status:i,instruction:t.get("status"),uninstall:t.get("status")===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL||i===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL,installType:a,onlineStackProcesses:o,targetSPLevel:t?t.get("targetSPLevel"):null})}))),e.transactionId&&(T.releaseForInstall=e.transactionId.split("-")[0]),0===t.length&&T.releaseForInstall&&T.releases.push(T.releaseForInstall.substr(1,3))},getInstall:function(e){return T.installList.get(e)},getInstallOptional:function(e){return T.installOptionalList.get(e)},getInstallCEF:function(e){return T.installCEFList.get(e)},getCompatibleStackCEF:function(e,t){return-1===e.get("levels")[0].release.indexOf(T.release)},showMacDownloadPanel:function(t,n){var i=new C({value:" ",disabled:!0,className:"primary btn-lg block"}),s=(new y).inject(i.getContent()).show();a.request({url:a._mediaUrl()+"/"+t.id,urlParams:{rolesCompass:"O3DADAC_RP"},onComplete:function(e){e.result&&e.result.length>0&&(s.destroy(),i.setDisabled(!1),i.getContent().setContent(S("Download")),i.addEvent("onClick",(function(){window.open(e.result[0].codeLevels[0].volumes[0].url)})))}}),T.modal=new f({className:"compass-modal daemon-modal",closable:!0,visible:!0,events:{onHide:function(){T.modal.destroy()}},header:"<h4>"+t.get("title")+"</h4>",body:e.createElement("div",{class:"download-wrapper",html:[{tag:"ul",html:[{tag:"li",class:"compass-java-desc",text:S("downloadlauncherclicking")},i,{tag:"li",class:"compass-java-desc",text:S("installldownload")}]}]}),footer:{tag:"button",class:"btn btn-default",text:S("cancel"),events:{click:function(){T.modal.hide()}}}}).inject(document.body)}};return T})),define("DS/i3DXCompass/Model/App",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/InstallManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/X3DContent","UWA/Utils/Cookie","DS/i3DXCompass/Types","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Feature","DS/i3DXCompass/Modal/DaysRemainingForUpdate"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m){"use strict";var h="Native",f="Widget",g="Family",v=["DESKTOP_Cloud","ENOV5MA_AP","ENOUC5C_AP"],C=!1,y="X3DMCTY_AP",b={A2X_NATIVE_APP:null,setup:function(){this.set("lowerCaseTitle",(this.get("title")||"").toLowerCase())},isCustom:function(){return this.get("thirdParty")},isNative:function(){return this.get("type")===h},isFamily:function(){return this.get("type")===g},isChildFamilyApp:function(){return!!this.get("isFamily")},isNativeMarketApp:function(){return this.isNative()&&(i.isValidMarketAppUrl(this.get("launchInfos"))||this.get("platforms")&&this.get("platforms").length>0&&i.isValidMarketAppUrl(this.get("platforms")[0].launchInfos))},isWidgetSwym:function(){return this.get("id")===y},isA2X:function(){return"A2x"===this.get("type")||e.is(this.get("nativeInformation"))},isA2XWidget:function(){return this.isA2X()&&!u.isNativeApplicationEnvironment()},isWeb:function(){return"Web"===this.get("type")},isWidget:function(){return this.get("type")===f||this.isA2XWidget()},isAggregate:function(){return this.get("apps")&&this.get("apps").length>1},isRole:function(){return"Role"===this.get("type")},isServiceSwym:function(){return 2===this.get("service")},isServiceSpace:function(){return 1===this.get("service")},isBusinessProcessWidgetApp:function(){return"ENXBPPY_AP"===this.get("id")},isWindows:function(){return this.get("tooltip").indexOf("Windows")>-1},matchesFilters:function(t){var n=this;return t.every((function(t){var i=t.key,s=t.value;return"searched"===i?!s||-1!==n.get("lowerCaseTitle").indexOf(s)||n.get("tooltip")&&-1!==n.get("tooltip").toLowerCase().indexOf(s)||n.id&&(-1!==n.id.toLowerCase().indexOf("_ap")&&-1!==s.indexOf("_ap")&&-1!==n.id.toLowerCase().indexOf(s)||-1===n.id.toLowerCase().indexOf("_ap")&&-1!==n.id.toLowerCase().indexOf(s)):"appIds"===i?!s||-1!==s.indexOf(n.id):"visibleQuadrant"===i?!s||-1!==["north","west","south","east"].indexOf(n.get("quadrant")):"function"===e.typeOf(n[i])?n[i]()===s:n.get(i)===s}))},_isRemoteDisabled:function(){return"true"===c.get("3dremotevm")},getInstallType:function(){return this.get("installType")},isValidInstallTypeForCEF:function(){return v.indexOf(this.getInstallType())>-1||v.indexOf(this.get("id"))>-1},setInstallType:function(e){this.set("installType",e)},getOptionalContent:function(e,t){var n=this,i=[this],s=!1;e&&i.push(e),u.isInstallationsCanBeProposed()||(s=!0),a.getCompatibleAdditionalContent(i,(function(e,s){var o=e[0];e[1],n.get("install");if(o&&(e[0]=o.filter?o.filter((function(e){return o.get("status")!==a.NEW_INSTALL_ADDITIONAL&&o._isOptionalContent()})):o.get("status")!==a.NEW_INSTALL_ADDITIONAL&&o._isOptionalContent()?o:null),o=e[0],s){var l=!1;s._models[0]&&s._models[0].get("processes").forEach&&s._models[0].get("processes").forEach((function(e){i[0].get("licenses")&&i[0].get("licenses").forEach&&i[0].get("licenses").forEach((function(t){t.id===e&&(l=!0)}))})),l||(s=null)}n.set("stackOptionContentList",s),n.set("installOptionContentList",e),n.set("optionalContent",!!s),t()}),(function(){t()}),s)},getInstallList:function(e,t,n,i){var s=this,o=[this];u.isInstallationsCanBeProposed()||(i=!0),e&&o.push(e),a.getCompatibleInstalls(o,(function(e){var n,i=e[0],o=e[1]||[],l=s.get("install");e[0]=i.filter((function(e){return e.get("status")!==a.NEW_INSTALL_ADDITIONAL&&!(e._isOptionalContent()&&e.get("status")===a.INSTALL_NOTHING_TO_DO)})),i=e[0],s._isRemoteDisabled()&&(o=[],"remote"===l&&(l=null)),"remote"===l&&o.length>0?n=o[0]:(n=a.getInstall(l),-1===i.indexOf(n)&&(n=null,l=null),n||1!==i.length||0!==o.length||(l=(n=i[0]).get("id"),s.set("install",l))),n||0!==i.length||(o.length>0?(l="remote",n=o[0]):l=null),t(e,n,l)}),(function(){n&&n()}),i)},getCEFList:function(e,t,n,i){var s=this,o=[this];u.isInstallationsCanBeProposed()||(i=!0),e&&o.push(e),a.getCompatibleCEFContent(o,(function(e,n,i,o,l,r){var c,d,p=e[1]||[],u=s.get("install");e.length>0&&(e[0]=e.filter((function(e){return e.get("status")!==a.NEW_INSTALL_ADDITIONAL&&!(e._isOptionalContent()&&e.get("status")===a.INSTALL_NOTHING_TO_DO)})),c=e[0],s._isRemoteDisabled()&&(p=[],"remote"===u&&(u=null)),"remote"===u&&p.length>0?d=p[0]:(d=a.getInstall(u),-1===c.indexOf(d)&&(d=null,u=null),d||1!==c.length||0!==p.length||(u=(d=c[0]).get("id")))),d||0!==e.length||(p.length>0?(u="remote",d=p[0]):d=n),t(e,d,i,u,o,l,r)}),(function(){n&&n()}),i)},isOnlineInstallable:function(){var e=this.get("licenses"),t=a.productList;return!!(a.cloud&&this.isNative()&&!this.isNativeMarketApp()&&e.length>0&&e.every((function(e){return!(!t||!t.get(e.id))||(l.dispatchEvent("onMissingProcess"),!1)}))&&e.detect((function(e){return t.get(e.id).get("online")})))},canAdditionalContent:function(e){var t=this,n=e.find((function(e){return e.get("appList").indexOf(t.get("id"))>-1})),i=this.get("licenses").detect((function(e){return"E94"===e.id}));return a.cloud&&n&&!0===n.get("additionalContent")&&!i},canOptionalContent:function(e){var t=this,n=e.find((function(e){return e.get("appList").indexOf(t.get("id"))>-1}));return a.cloud&&n&&!0===n.get("optionalContent")},getLaunchInfos:function(t,n,i){var s,o=this.get("launchInfos"),a=function(e){return!e||"string"!=typeof e||!e.trim()};if(void 0!==this.object&&this.object.envId&&(s=this.get("platforms")&&this.get("platforms").detect(function(e){return e.id===this.object.envId}.bind(this)))&&(s.launchUrl||s.launchInfos)&&(o=this.isWidget()?s.launchUrl:s.launchInfos),(void 0!==this.object||d.get())&&this.isNative()){var l=this.object,c=r.getX3DContent();void 0===l&&c&&c.data&&c.data.items&&c.data.items.length>0&&(l=c.data.items[0],(s=this.get("platforms")&&this.get("platforms").detect((function(e){return e.id===l.envId})))&&(s.launchUrl||s.launchInfos)&&(o=this.isWidget()?s.launchUrl:s.launchInfos)),o&&(o=o.replace("-workbench ","--AppName="),void 0!==l&&(a(l.contextId)||-1!==(o+=n+"-Ctx"+n+'"'+l.contextId+'"').search("-Prfctx")&&(o=o.replace(n+"-Prfctx","")),a(l.objectId)||(o+=n+"-object"+n+l.objectId,a(l.serviceId)||(o+=n+"-serviceId"+n+l.serviceId),a(l.objectType)||(o+=n+"-objectType"+n+'"'+l.objectType+'"')),o+=n+"-e"+n+"CATUNILoadFromWebCmdHdr"+n+"Open"))}if(o&&this.get("powerBy")){var p=this.get("powerBy").extendedApp?this.get("powerBy").extendedApp.id:this.get("powerBy").baseApp.id;this.object&&"3DDrive"===this.object.serviceId&&(p=this.get("powerBy").baseApp.id),o=o.replace(this.get("id"),p)}return t&&(o+=n+'-Cas="CASTGC='+t+'"'),i&&(o+=n+'-x3ds_transient_auth_url="'+i+'"'),e.log(o),o},getShortcutLaunchInfos:function(){var e,t=this.get("shortcutLaunchInfos");return this.get("powerBy")&&(e=this.get("powerBy").extendedApp?this.get("powerBy").extendedApp.id:this.get("powerBy").baseApp.id,t=t.replace(this.get("id"),e)),t},install:function(e){var t=this,n=this.getRemoteApp();this.getInstallList(n,(function(i,s,o){var l="remote"===o,r=l?n:t;s?s.get("update")&&s.get("status")===a.INSTALL_FORCE_UPDATE||e.forceUpdate&&s.get("update")&&s.get("status")===a.INSTALL_PROPOSE_UPDATE?e&&!e.eventDetection?e.onFailure({error:"mandatory_update",install:s,app:r,remote:l}):e.onFailure({error:"recommended_update",install:s,app:r,remote:l}):e.onComplete({success:!0}):0===i[0].length&&0===(i[1]||[]).length?e.onFailure({error:"no_install_compatible",remoteAvailable:!!n}):e.onFailure({error:"no_install_selected"})}),(function(){e.onFailure({error:"unable_install_data"})}),e.silent)},_launchTransient:function(n,o){var a,l,c=this,d=this.object,p=r.getX3DContent();void 0===d&&p&&p.data&&p.data.items&&p.data.items.length>0&&(d=p.data.items[0]),void 0!==d&&this.isWeb()&&(this.isServiceSwym()?d.hasOwnProperty("contextId")&&"Swym"===d.contextId&&(n=d.objectId):this.isServiceSpace()&&n&&(n+=-1!==n.search("[?&]")?"&":"?",d.hasOwnProperty("contextId")?n+="SecurityContext="+t.encodeUrl(d.contextId)+"&objectId="+d.objectId:n+="&objectId="+d.objectId)),n&&e.is(s.addinMode)&&c._isCompatibleAddin(c)&&!c.isWidgetSwym()&&s.addinMode&&s.addinMode.value&&(n=this._addQueryParams(n,"addinmode",s.addinMode&&s.addinMode.value)),s.get3DDashboardUrl((function(t){var d="west"===i.getCurrentQuadrant()||"south"===i.getCurrentQuadrant();if(n&&e.is(s.addinMode)&&c.isWidgetSwym()&&s.addinMode&&s.addinMode.value&&(n=c._addQueryParams(t,"addinmode",s.addinMode&&s.addinMode.value,"app:"+y)),l=n.indexOf("-ifwe.")>-1||t&&n.toLowerCase().indexOf(t.toLowerCase())>-1,i.isCompassV2()&&window.location.search&&-1!==window.location.search.indexOf("debug")&&-1===n.indexOf("debug")&&(n=-1===n.indexOf("?")?n+"?debug"+(d?"&addinmode=catiav5":""):n.slice(0,n.indexOf("?")+1)+"debug&"+(d?"addinmode=catiav5&":"")+n.slice(n.indexOf("?")+1)),a=r.getX3DContent(),(c.isWidget()||l)&&(l||c.isServiceSwym()||c.isBusinessProcessWidgetApp())&&"object"===e.typeOf(a)&&0!==Object.keys(a).length&&(n+=(n.endsWith("/")?"":"/")+(n.contains("#")?"":"#")+"content:X3DContentId="+encodeURIComponent(JSON.stringify(a))),c._isCurrentApplicationDashboard(t,n,window.location.href)){var p=e.Utils.parseUrl(n).anchor;window.location.hash!==p&&window.location.hash!=="#"+p||(p+="/"),!1===e.is(s.addinMode)||c._isCompatibleAddin(c)?c._supportBigUrl(n)&&!a.target?window.location.hash=p:"blank"===a.target?window.open(n,"_blank"):window.open(n,"_self"):window.open(n,"_blank")}else i.isSameApp(n,window.location)?i.customLaunchWebApp(n)||(!1===e.is(s.addinMode)&&c.isWidget()||!1===e.is(s.addinMode)&&c.isServiceSpace()&&c.isWeb()?window.open(n,"_self"):window.open(n,"_blank")):c._isCompatibleAddin(c)?window.open(n,"_self"):window.open(n,"_blank");o.onComplete({success:!0})}))},_launchInfosIsDashboard:function(e,t){return e&&t.toLowerCase().indexOf(e.toLowerCase())>-1||t.indexOf("-ifwe.")>-1},_isCurrentApplicationDashboard:function(e,t,n){return this.isWidget()&&this._launchInfosIsDashboard(e,t)&&e&&(n.toLowerCase().indexOf(e.replace("https://","").toLowerCase())>-1||n.indexOf("-ifwe.")>-1)},_supportBigUrl:function(e){var t=i.getBrowser();return!(("internet explorer"===t||"edge"===t)&&e.length>2045)},_addQueryParams:function(e,t,n,i){var s,o=e,a="";return e.indexOf("#")>-1&&(o=e.split("#")[0],a=e.split("#")[1]),i&&(a?a+="/"+i:a=i),s=-1===o.indexOf("?")?"?":"&",o+s+t+"="+n+(a?"#"+a:"")},_isCompatibleAddin:function(t){var i=this;return e.is(s.addinMode)&&t.get("apps")&&t.get("apps").length>1?t.get("apps").detect((function(e){return i._isCompatibleAddin(new n(e))})):t.get("id")===y&&e.is(s.addinMode)?s.addinMode.value:e.is(s.addinMode)&&e.is(s.addinMode.value)&&t.get("addin")&&t.get("addin").detect((function(e){return e.toLowerCase()===s.addinMode.value.toLowerCase()}))},_launchTransition:function(t,n,i){var s=this,o={id:this.get("id"),launchInfos:i?i.launchInfos:this.get("launchInfos"),title:this.get("title"),brand:this.get("brand"),config:i?i.config:this.get("config"),compatibility:this.get("compatibility"),defaultPage:this.get("defaultPage"),type:this.get("type"),workbench:this.isA2X()&&this.getA2XNativeApp().get("workbench")||this.get("workbench"),success:function(){e.log("Success in transition")},failure:function(){s._launchTransient.call(s,t,n)}};n&&n.widgetId&&(o.widgetId=n.widgetId),require(["DS/AppFrameGlobal/AppFrame3DD"],(function(e){e.loadAppInfoAndDoTransition(o)}))},getPlatformId:function(){var e=null,t=this.get("platforms")&&this.get("platforms").detect(function(e){return void 0!==this.object&&this.object.envId?e.id===this.object.envId:e.preferred}.bind(this));return t?e=t.id:this.get("platforms")&&(e=this.get("platforms")[0].id),e},launch:function(t){var n,l,c,d=this,g=this.isWidget()?this.get("launchUrl"):this.get("launchInfos"),v=r.getX3DContent();if(g=this.isWidget()?!(this.isAggregate()&&!this.get("platformId"))&&this.get("launchUrl"):this.get("launchInfos"),void 0!==this.object&&this.object.envId?((n=this.get("platforms").detect(function(e){return e.id===this.object.envId}.bind(this)))&&(n.launchUrl||n.launchInfos)&&(g=this.isWidget()?n.launchUrl:n.launchInfos,n.config),!g&&this.isAggregate()&&this.isWidget()&&(g=this.get("launchUrl")),"R1132100503382"===this.object.envId&&g.match(/-/g).length>1&&(g=(g=g.replace(/:\/\/([A-z0-9]+)\-/,"://"+this.object.envId.toLowerCase()+"-")).replace(/\-([A-z0-9]+)\-/,"-eu1-"))):v&&v.data&&v.data.items&&v.data.items.length>0&&((n=this.get("platforms").detect((function(e){return e.id===v.data.items[0].envId})))&&(n.launchUrl||n.launchInfos)&&(g=this.isWidget()?n.launchUrl:n.launchInfos,n.config),(n||this.isServiceSwym()&&g)&&"R1132100503382"===v.data.items[0].envId&&g.match(/-/g).length>1&&(g=(g=g.replace(/:\/\/([A-z0-9]+)\-/,"://"+v.data.items[0].envId.toLowerCase()+"-")).replace(/\-([A-z0-9]+)\-/,"-eu1-"))),u.isDelegatedToRichClientLaunchApp(this.get("exeName"))&&!this.isNativeMarketApp()){var y=e.clone(this.toJSON());"CUSTOM"===y.brand&&(y.brand=""),p.publish("launchAppCallback",y),this.get("type")===h&&t.onComplete({success:!0})}else if("macos"===i.getOs()&&this.get("type")===h)t.onFailure({error:"macos_app_download",app:d});else if(g||u.isNativeApplicationEnvironment()&&this.get("type")===h){switch(this.isA2X()&&this.isA2XWidget()?f:this.isA2X()&&!this.isA2XWidget()?h:this.get("type")){case"Web":case f:this.get("transition")&&!1===e.is(s.addinMode)&&"openWith"!==t.origin?this._launchTransition(g,t,n):this._launchTransient(g,t);break;case h:"ios"===i.getOs()||"android"===i.getOs()?s.getCasTgcAndCasTransientUrl({platform:d.getPlatformId(),onComplete:function(n,s){var o=d.getLaunchInfos(n,"&",s);if(e.log("open "+o),8!==i.getMajorIosVersion())e.log("ios version != 8"),l=new Date,window.setTimeout((function(){e.log("setTimeout"),new Date-l<1200?(e.log("onFailure"),"ios"===i.getOs()?t.onFailure({error:"ios_app_not_installed"}):t.onFailure({error:"android_app_not_installed"})):(e.log("onComplete"),t.onComplete({success:!0}))}),1e3),window.location=o;else{e.log("ios version = 8");var a=e.createElement("iframe",{styles:{border:"none",width:1,height:1},src:o});e.log("inject iframe"),a.inject(document.body),l=new Date,setTimeout((function(){e.log("setTimeout"),new Date-l<1200?(e.log("onFailure"),"ios"===i.getOs()?t.onFailure({error:"ios_app_not_installed"}):t.onFailure({error:"android_app_not_installed"})):(e.log("onComplete"),t.onComplete({success:!0})),e.log("destroy iframe"),a.destroy()}),1e3)}}}):this.isNativeMarketApp()?s.getCasTgcAndCasTransientUrl({platform:d.getPlatformId(),onComplete:function(n,o){var a,r,c=d.getLaunchInfos(n,"&",o),p=i.getBrowser();if("internet explorer"===p||"edge"===p)navigator.msLaunchUri(c,(function(){e.log("success")}),(function(){e.log("onFailure"),t.onFailure({error:"windows10_app_not_installed"})}));else if("firefox"===p){var u=document.querySelector("#hiddenIframe")?document.querySelector("#hiddenIframe"):document.createElement("iframe");document.querySelector("#hiddenIframe")||(u.src="about:blank",u.id="hiddenIframe",u.style.display="none",document.body.appendChild(u));try{u.contentWindow.location.href=c}catch(n){e.log("onFailure"),t.onFailure({error:"windows10_app_not_installed"})}}else r=function(n){window.clearTimeout(a),e.log("onComplete"),t.onComplete({success:!0}),window.removeEventListener("blur",r)},window.focus(),e.log("open "+c),l=new Date,window.addEventListener("blur",r),a=window.setTimeout((function(){e.log("onFailure"),t.onFailure({error:"windows10_app_not_installed"}),window.removeEventListener("blur",r)}),4e3),!1===e.is(s.addinMode)?window.location=c:window.open(g,"_blank")}}):(c=this.getRemoteApp(),this.getInstallList(c,(function(n,i,l){var r="remote"===l,p=r?c:d,h=function(){d.setCatEnvConfig(),s.getCasTgcAndCasTransientUrl({platform:p.getPlatformId(),onComplete:function(n,s){var a={instID:i.get("daemonId"),exeName:t.support?p.getSupportExeName():p.getExeName(),envString:p.get("envInfos"),argString:p.getLaunchInfos(n," ",s),nativeLauncherName:p.get("launcher")};p.get("powerBy")&&d.object&&"3DDrive"===d.object.serviceId&&(a.exeName=p.get("powerBy").baseApp.exe),o.startV6install({install:i,file:t.file,params:a,onComplete:function(n){t.onComplete({success:!0,remote:r}),e.log(n)},onFailure:function(n){t.onFailure({error:"applet_error",returnCode:n.returnCode,remote:r}),e.log(n)}},p)}})};if(i)if(!1===C&&!u.isLockInstallation()&&!u.isLockInstallationUpdate()&&i.get("daysRemaining")&&i.get("daysRemaining")>0&&!p.isCustom()){C=!0;var f=a.installLevelList.get(i.get("dpId"))._levels.last();new m({preferredInstall:i,toUpdateTitle:f.get("commercialName"),updateAllCallback:function(){t.onFailure({error:"mandatory_update",install:i,app:p,remote:r,silent:!0})},updateLaterCallback:function(){h()},events:{resetDisplayFlagDaysRemainingModal:d.resetDisplayFlagDaysRemainingModal.bind(d)}}).render()}else i.get("update")&&i.get("status")===a.INSTALL_FORCE_UPDATE&&!p.isCustom()?t.onFailure({error:"mandatory_update",install:i,app:p,remote:r}):h();else 0===n[0].length&&0===(n[1]||[]).length?t.onFailure({error:"no_install_compatible",remoteAvailable:!!c}):t.onFailure({error:"no_install_selected"})}),(function(){t.onFailure({error:"unable_install_data"})}),t.silent))}}else t.onFailure({error:"no_launch_infos"})},setCatEnvConfig:function(){this.get("catEnvConfig")&&o.setCatEnvConfig([this.get("catEnvConfig")])},getExeName:function(){var e=this.get("exeName");return e&&"3dexperience"===e.toLowerCase()&&(e+=".exe"),"linux"===i.getOs()&&(e=!e||"3dexperience.exe"!==e.toLowerCase()&&"3dexperience"!==e.toLowerCase()?e.replace(".exe",""):"3DEXPERIENCE"),e},getSupportExeName:function(){var e=this.get("supportModeExeName");return"linux"===i.getOs()&&(e=e.replace(".exe","")),e},getCatEnvs:function(){},getPreferredCatEnv:function(t){var n,i=e.clone(t);return u.isOnPremiseEnvironment()&&(i=i.toLowerCase()),this.get("catEnvs")&&this.get("catEnvs")[i]&&(n=this.get("catEnvs")[i].detect((function(e){return e.preferred}))),n},needSettingsMenu:function(){var e=!this.isRole()&&(this.isFamily()&&(Object.keys(this.getChildrenForFamilyApp()).length>1||this.getPlatforms().length>1)||this.isNative()&&!this.isNativeMarketApp()||this.get("platforms").length>1||!!this.get("catEnvs")||this.isA2X());return"macos"===i.getOs()&&this.isNative()&&(e=!1),"ios"!==i.getOs()&&"android"!==i.getOs()||!this.isA2X()||(e=!1),u.isNativeApplicationEnvironment()&&(e=this.isA2X()||!this.isRole()&&!this.isNative()&&(this.get("platforms").length>1||Object.keys(this.getChildrenForFamilyApp()).length>1)),e},getRemoteApp:function(){var e,t=this.get("remoteInfos");if(t)return(e=this.clone()).set({launcher:t.launcher,exeName:t.exeName,launchInfos:t.remoteLaunchInfos,id:t.remoteAppId,licenses:t.licenses,title:t.title,install:"remote"}),e},addObjectToLaunchInfos:function(){},setObject:function(e){this.object=e},resetObject:function(){this.object&&delete this.object},setA2XNativeApp:function(e){this.A2X_NATIVE_APP||(this.A2X_NATIVE_APP=new e(this.get("nativeInformation")))},getA2XNativeApp:function(){return this.A2X_NATIVE_APP?this.A2X_NATIVE_APP:null},getParentForChildrenFamilyApp:function(){var e,t,n=this;return e=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"type",value:g}]),this.isChildFamilyApp()?(e.forEach((function(e,i){!t&&e.get("apps")&&e.get("apps").detect((function(e){return n.id===e.id}))&&(t=e)})),t):t},getChildrenForFamilyApp:function(){var e=[],t={};return this.isFamily()?(this.get("apps").forEach((function(t){e.push(t.id)})),(e.length>0?this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e}]):[]).forEach((function(e){e.isNative()&&e.isWindows()?t.Windows=e:e.isNative()&&e.get("licenses")&&e.get("licenses").length>0?t.native=e:t[e.get("type")]||(t[e.get("type")]=e)})),t):{}},getPlatforms:function(){var e=this,t=[],n=[],i=this.getChildrenForFamilyApp();if(this.isFamily())for(const e in i)i.hasOwnProperty(e)&&i[e].get("platforms").forEach((function(i){-1===n.indexOf(i.id)?(n.push(i.id),i.appType=i.appType?-1===i.appType.indexOf(e)?i.appType+e+";":i.appType:e+";",t.push(i)):t[n.indexOf(i.id)].appType=t[n.indexOf(i.id)].appType?-1===t[n.indexOf(i.id)].appType.indexOf(e)?t[n.indexOf(i.id)].appType+e+";":t[n.indexOf(i.id)].appType:e+";"}));else this.get("platforms").forEach((function(i){-1===n.indexOf(i.id)&&(i.appType=i.appType?i.appType.indexOf(e.get("type"))>-1?i.appType+e.get("type")+";":i.appType:e.get("type")+";",t.push(i))}));return t},updateFamilyModel:function(){if(this.isFamily()){var e=this.getChildrenForFamilyApp();u.isNativeApplicationEnvironment()&&e.native?(this.set("brand",e.native.get("brand")),this.set("icon",e.native.get("icon"))):!u.isNativeApplicationEnvironment()&&e.Widget?(this.set("brand",e.Widget.get("brand")),this.set("icon",e.Widget.get("icon"))):!u.isNativeApplicationEnvironment()&&e.web&&(this.set("brand",e.web.get("brand")),this.set("icon",e.web.get("icon")))}},extractMyAppsUrlFromLaunchInfo:function(){var e=null,t=this.getLaunchInfos();if(t||this.get("platforms")&&this.get("platforms").length>0&&(t=this.get("platforms")[0].launchInfos),t&&t.indexOf("-MyAppsURL=")>-1){var n=t.split("-MyAppsURL=");n.length>1&&(n=n[1])&&n.length>0&&(e=n.split(" ")[0])}return e},resetDisplayFlagDaysRemainingModal:function(){C=!1},canCheckCEF:function(){return!this.isNativeMarketApp()&&"macos"!==i.getOs()&&"ios"!==i.getOs()&&"android"!==i.getOs()}};return n.extend(b)})),define("DS/i3DXCompass/Collection/AppList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/Model/App","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o,a){"use strict";var l=2592e5,r={model:s,lastResponseId:null,request:null,filterKeys:[],selectedTenant:null,fetch:function(e){var t=this.request;return this.selectedTenant=i.selectedPlatform,t&&t.cancel(),this.request=this._parent(e)},onSync:function(){this.request=null},onError:function(){this.request=null},setup:function(e,t){this.myappsObject={},this.added=[],a.isNativeApplicationEnvironment()&&i.selectedPlatform||i.selectedPlatform&&a.getPreferences()&&"currentPlatform"===a.getPreferences().forceSelectTenant?this.selectedTenant=i.selectedPlatform:this.selectedTenant=null,t&&t.master&&this.setupSlave(t)},setupSlave:function(e){this.master=e.master,this.filters=e.filters,this.comparator=e.comparator,this.initFetch(),this.filterKeys=this.filters.map((function(e){return e.key})),this.master.addEvent("onChange",this.changeApp.bind(this)),this.master.addEvent("onMultipleAdd",this.filterAndAdd.bind(this)),this.master.addEvent("onRemove",this.removeApp.bind(this))},_getCacheKey:function(){var e=i._getAppsUrl();return e.indexOf("?")>0&&(e=e.slice(0,e.indexOf("?"))),e},_isNotEmptyResponse:function(e){return e.north&&e.west&&e.south&&e.east&&e.north.length>0&&e.west.length>0&&e.south.length>0&&e.east.length>0},updateLocalCache:function(e){var t=o.getCache(this._getCacheKey(),l);return t&&(t.preferences=e),o.setCache(this._getCacheKey(),t),!0},sync:function(e,t,s){var r,c=this,d=this.myappsObject,p=null;if("read"===e){var u=a.getExtraWhereUsedRoles();c.selectedTenant&&(u||(u=""),u+=c.selectedTenant),(p=o.getCache(c._getCacheKey(),l,u))&&!a.getExtraWhereUsedRoles()||(this.lastId=null),"dsrtv:"!==window.location.protocol&&(r=i.request({url:i._getAppsUrl(),urlParams:{platformId:c.selectedTenant,os:n.getOs(),envid:d.envId,objid:d.hasOwnProperty("objectId")&&(d.hasOwnProperty("envId")||d.hasOwnProperty("contextId"))?d.objectId:null,objtype:d.objectType||null,contextid:d.contextId||null,id:this.lastId||p&&p.id,processes:a.getExtraWhereUsedRoles()},onComplete:function(e){e&&0===e.code?c._isNotEmptyResponse(e)?(e.id&&e.id===c.lastId||c.myappsObjectSet||o.setCache(c._getCacheKey(),e,u),s&&s.onComplete&&(e.id&&e.id===c.lastId&&!c.myappsObjectSet||s.onComplete(e))):p&&JSON.stringify(p.preferences)!==JSON.stringify(e.preferences)&&(p.preferences=e.preferences,s.onComplete(p)):s&&s.onFailure&&s.onFailure(e)},onFailure:function(e){s&&s.onFailure&&s.onFailure(e)}})),p&&(p&&0===p.code?s&&s.onComplete&&setTimeout((function(){s.onComplete(p)}),5):s&&s.onFailure&&s.onFailure(p))}return r},_injectCustomDataFromRichClient:function(t){var n=e.clone(t),i=!1;try{i=localStorage.getItem("UseDataFromRichClient")}catch(e){console.log("localStorage not supported")}if(i){var s=[];try{s=JSON.parse(localStorage.getItem("AfrWebInWinCompassdata"));var o=[];s.app.forEach((function(e){e.platforms=[],e.icon||(e.icon=""),o.push(e.id),e.title||(e.title=e.id)})),n.roles.role.forEach((function(e){!0===e.granted&&(e.appList=e.appList.concat(o))})),n.north[0].apps=n.north[0].apps.concat(s.app)}catch(e){}}return n},parse:function(t,n){var i=[],s=[],o=[],l=[],r=[];return e.log("Compass refresh: parsing apps"),(t=this._injectCustomDataFromRichClient(t)).id&&t.id===this.lastId?(n.remove=!1,t.changed=!1):(this.myappsObjectSet||(this.lastId=t.id),a.setCloud(t.cloud),t.favorite&&t.favorite.apps&&(i=t.favorite.apps.split(",")),["north","west","south","east","other"].forEach((function(n){var c=t[n];c&&c.forEach((function(c,d){var p=1===d;c.apps.forEach((function(c){var d=0;if(c.favoriteOrder=i.indexOf(c.id),c.isFavorite=-1!==c.favoriteOrder,c.lma=p,c.quadrant=n,void 0===c.remoteInfos&&(c.remoteInfos=void 0),"MAP-AAAPBYSWX"===c.id?c.brand="SOLIDWORKS":"MAP-CATCDVEAP"===c.id&&(c.brand="CATIA"),!a.isOnPremiseEnvironment()&&!1===c.tenantAware&&c.launchInfos&&-1===c.id.indexOf("MAP-")){var u=c.launchInfos.match(/\/\/([a-zA-Z0-9]*)/);u&&u.length>1&&(c.platformId=u[1].toUpperCase())}if("Native"===c.type&&(c.catEnvs=[]),("Native"===c.type||""!==c.nativeInformation)&&c.platforms&&c.platforms.length>0&&t.config&&t.config.catEnv&&t.config.catEnv.length>0&&(c.catEnvs=[],c.catEnvConfig="",c.nativeInformation&&(c.nativeInformation.catEnvs=[],c.nativeInformation.catEnvConfig=""),d=0,t.config.catEnv.forEach((function(e){(a.isOnPremiseEnvironment()&&c.platforms.find((function(t){return t.id.toLowerCase()===e.platformId.toLowerCase()}))||!a.isOnPremiseEnvironment()&&c.platforms.find((function(t){return t.id===e.platformId})))&&(c.catEnvs[a.isOnPremiseEnvironment()?e.platformId.toLowerCase():e.platformId]=e.catEnvDetails,d+=e.catEnvDetails.length,t.config.catEnvPreferences&&t.config.catEnvPreferences.length>0&&t.config.catEnvPreferences.forEach((function(t){c.id===t.appId&&c.catEnvs[a.isOnPremiseEnvironment()?e.platformId.toLowerCase():e.platformId].forEach((function(n){n.name===t.catEnvName&&(n.preferred=!0,n.id=a.isOnPremiseEnvironment()?e.platformId.toLowerCase():e.platformId,(a.isOnPremiseEnvironment()&&c.platformId.toLowerCase()===t.platformId.toLowerCase()||!a.isOnPremiseEnvironment()&&c.platformId===t.platformId)&&(c.catEnvConfig=n))}))})))})),c.platforms&&1===c.platforms.length&&!c.catEnvConfig&&c.catEnvs.lenght>0&&1===d&&(c.catEnvConfig=Object.keys(c.catEnvs)[0]),c.nativeInformation&&(c.nativeInformation.catEnvs=c.catEnvs,c.nativeInformation.catEnvConfig=c.catEnvConfig)),l.indexOf(c.id)>-1){var m=null,h=s.detect((function(e,t){return m=t,e.id===c.id}));h&&(s[m]=e.merge(h,c))}else-1===o.indexOf(c.id)&&(s.push(c),o.push(c.id));c.apps&&c.apps.length>0&&c.apps.forEach((function(e){r.push(e)}))}))}))})),r.forEach((function(t){if(o.indexOf(t.id)>-1){var n=null,i=s.detect((function(e,i){return n=i,e.id===t.id}));i&&!1===i.trusted&&!0===t.trusted&&(s[n]=e.merge(t,i))}else s.push(t)})),t.roles&&t.roles.role.forEach((function(e){(e.favoriteOrder=-1,e.isFavorite=!1,e.lma=!1,"undefined"!=typeof compassRichWithCef)?e.appList.detect((function(t){return s.detect((function(n){return n.id===t&&(!e.granted||"other"!==n.quadrant)}))}))&&s.push(e):s.push(e)})),t.services&&t.services.data.forEach((function(e,t){e.favoriteOrder=-1,e.isFavorite=!1,e.lma=!1,s.push(e)})),t.bers&&this.extractBEElements(t.bers,s),t.changed=!0),s},set:function(){this.added.length=0,this._parent.apply(this,arguments),this.added.length>0&&this.dispatchEvent("onMultipleAdd",[this.added])},onAdd:function(e){this.added.push(e)},initFetch:function(){this.master&&this.filterAndAdd(this.master)},removeApp:function(e){this.get(e)&&this.remove(e)},filterAndAdd:function(e){var t=e.filter((function(e){return e.matchesFilters(this.filters)}),this);t.length>0&&this.add(t)},changeApp:function(t){var n=t._changed;this.filterKeys.some((function(t){return e.is(n[t])}))&&(t.matchesFilters(this.filters)?(this.add(t),this.dispatchEvent("onMultipleAdd",[[t]])):this.removeApp(t)),this.get(t)&&e.is(n[this.comparator])&&(this.sort(),this.dispatchEvent("onReorderApp",t))},filterApps:function(e){return this.filter((function(t){return t.matchesFilters(e)}))},getPrevious:function(e){var t=this.indexOf(e)-1;return t<0?null:this.at(t)},count:function(e){return this.reduce((function(t,n){return n.matchesFilters(e)?t+1:t}),0)},setObject:function(t){this.myappsObjectSet=t.hasOwnProperty("objectId"),this.myappsObjectSet?this.forEach((function(e){e.setObject(t)})):e.log("Object is not valid for setObject")},resetObject:function(){this.forEach((function(e){e.resetObject()}))},saveFavorites:function(){var e,t=this.pluck("id").join(",");e=a.isNativeApplicationEnvironment()&&i.selectedPlatform||i.selectedPlatform&&a.getPreferences()&&"currentPlatform"===a.getPreferences().forceSelectTenant?{platform:i.selectedPlatform,value:t}:{value:t},i.request({url:i._setFavoriteUrl(),method:"POST",contentType:"application/x-www-form-urlencoded",postData:e,onComplete:function(){},onFailure:function(){}})},saveRoles:function(e){},getSelectedRoleApps:function(){var e=[],t=this.where({active:!0});return this.length===t.length?null:(t.forEach((function(t){t.get("appList").forEach((function(t){n.pushUnique(e,t)}))})),e)},extractBEElements:function(t,n){var i,s=this,o={id:"",title:"",roleId:"",granted:!0,visible:!0,type:"Role",isRoleBE:!0,beList:[],cockpitList:[],usagesIdList:[],platforms:[],appList:[]},a={},l={},r={};(t=JSON.parse(t)).forEach((function(t,n){t.platforms.forEach((function(n,c){(s.selectedTenant&&n.id===s.selectedTenant||!s.selectedTenant)&&(i=t.roleId||t.title,r[i]||(r[i]=e.clone(o),r[i].id=t.id,r[i].title=t.title,r[i].roleId=t.roleId),r[i].platforms.find((function(e){return n.id===e.id}))||r[i].platforms.push({id:n.id,platformId:n.id,platformName:n.name}),n.bms&&n.bms.length>0&&n.bms.forEach((function(t){l[t.id]?t.usages.forEach((function(e){l[t.id].usages.find((function(t){return t.id===e.id}))||l[t.id].usages.push(e),-1===l[t.id].platforms.indexOf(n.id)&&l[t.id].platforms.push(n.id),-1===r[i].usagesIdList.indexOf(e.id)&&r[i].usagesIdList.push(e.id)})):(t.platformId=n.id,t.platformName=n.name,t.type="businessMethod",t.platforms=[n.id],t.usages.forEach((function(e){-1===r[i].usagesIdList.indexOf(e.id)&&r[i].usagesIdList.push(e.id)})),l[t.id]=e.clone(t)),-1===r[i].beList.indexOf(t.id)&&r[i].beList.push(t.id)})),n.cockpits&&n.cockpits.length>0&&n.cockpits.forEach((function(t,s){a[t.id]?t.usages.forEach((function(e){a[t.id].usages.find((function(t){return t.id===e.id}))||a[t.id].usages.push(e),-1===a[t.id].platforms.indexOf(n.id)&&a[t.id].platforms.push(n.id),-1===r[i].usagesIdList.indexOf(e.id)&&r[i].usagesIdList.push(e.id)})):(t.platformId=n.id,t.platformName=n.name,t.platforms=[n.id],t.type="cockpitBusiness",t.usages.forEach((function(e){-1===r[i].usagesIdList.indexOf(e.id)&&r[i].usagesIdList.push(e.id)})),a[t.id]=e.clone(t)),-1===r[i].cockpitList.indexOf(t.id)&&r[i].cockpitList.push(t.id)})))}))}));for(const e in r)r.hasOwnProperty(e)&&n.push(r[e]);for(const e in a)a.hasOwnProperty(e)&&n.push(a[e]);for(const e in l)l.hasOwnProperty(e)&&n.push(l[e])}};return t.extend(r)})),define("DS/i3DXCompass/Controls/Settings",["UWA/Core","DS/i3DXCompass/Tools","DS/i3DXCompass/InstallManager","DS/UIKIT/DropdownMenu","UWA/Utils","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o){"use strict";var a=e.i18n;return i.extend({customClass:"compass-app-settings",iconClass:"fonticon fonticon-check",clickInstallId:"clickinstall",clickInstallRemoteId:"clickremote",clickLaunchApp:"clicklaunchapp",clickOptionalContentInstall:"optionalContentInstall",clickOptionalContentStack:"optionalContentStack",clickConfig:"config",clickPlatform:"platform",init:function(t){if(t.isParentFamily)this.installItemsLength=this.getInstallWithouRemoteCount(t.familyOption.data.installs),this.app=t.familyOption.app,this.isForceSelectTenantActive=t.familyOption.isForceSelectTenantActive,t.familyOption={},this._parent(t);else{this.installItemsLength=this.getInstallWithouRemoteCount(t.data.installs),this.app=t.app,this.isForceSelectTenantActive=t.isForceSelectTenantActive;var n,i=this,l=t.data,r=l.installs,c=l.remoteInstall,d=l.platforms,p=t.preferredInstallId,u=t.processes,m=t.onlineInstallable,h=t.isInstallCanBeProposed,f=function(){var e=!1;return i.app.get("catEnvs")&&i.app.get("catEnvs").length>1?e=!0:i.app.get("catEnvs")&&Object.keys(i.app.get("catEnvs")).length>0&&Object.keys(i.app.get("catEnvs")).forEach((function(t){i.app.get("catEnvs")[t].length>1&&(e=!0)})),e},g=(this.app.isA2X()&&this.app.A2X_NATIVE_APP.get("optionalContent")||this.app.get("optionalContent"))&&h?this.getOptionalContentItem(u,m):null,v=r?r.filter((function(e){return!e._isOptionalContent()})).map((function(e){return this.getInstallItem(e,p,u,m,!1,t.shortcutEnabled,t.additionalContent)}),this):null,C=v&&0===v.length,y=this.app.get("platforms")&&f()&&(!C||c)?this.getCatEnvItemByPlatforms():!d||C&&!c?null:this.getPlatformsItems(d),b=y||[];C&&(v.push({className:"header no-install",html:e.String.format(a("noinstall"),t.appTitle)}),m&&h&&v.push({className:"download-link",name:this.clickInstallId,text:a("clickinstall")})),v&&t.remoteEnabled&&(v.push({className:"divider"}),c?v.push(this.getInstallItem(c,p,[],m,!0,!1)):m&&h&&v.push({className:"download-link",name:this.clickInstallRemoteId,text:e.String.format(a("install"),t.remoteAppTitle)})),y&&v&&b.push({className:"divider"}),b=b.concat(v||[]),g&&(b=b.concat(g||[])),o.isNativeApplicationEnvironment()&&this.app.isA2X()?(b=[]).push(this.getLaunchApp()):!C&&this.app.isA2X()&&b.push(this.getLaunchApp()),n={multiSelect:!0,maxItemsBeforeScroll:s.Client.getSize().height<400?5:s.Client.getSize().height<560?8:12,forceResponsive:f(),items:b,altPosition:function(){var e=i.elements,n=e.container.offsetWidth,s=e.container.offsetHeight,o=window.innerWidth,a=window.innerHeight,l=t.position.x,r=t.position.y;return l+n+20>o&&(l=o-n-20),r+s+20>a&&(r=a-s-20),{x:l,y:r}},renderTo:t.renderTo||document.body,target:t.target,events:t.events,shortcutEnabled:t.shortcutEnabled},this._parent(n)}this.trigger=t.trigger},buildSkeleton:function(){this._parent(),this.menus&&this.items.forEach(this.editItem,this),this.elements.container.addClassName(this.customClass)},editItem:function(t){var n=this,i=t.elements.container;t.html&&i.setContent(t.html);var s=e.createElement("icons");s.inject(i),"install"===t.type&&(i.setAttribute("data-type","install"),i.addClassName("has-install"),t.additionalContent&&!t.mand&&(i.addClassName("has-additional"),e.createElement("div",{class:"fonticon fonticon-install",title:a("additionalresources"),events:{click:function(){n.dispatchEvent("onClickAdditional",t.name),n.hideSettings()}}}).inject(s)),o.isOnPremiseEnvironment()||this.app.isCustom()||(i.addClassName("has-uninstall"),e.createElement("div",{class:"fonticon fonticon-drive-delete",title:a("uninstall"),events:{click:function(){n.dispatchEvent("onClickUninstall",t.name),n.hideSettings()}}}).inject(s)),t.optionalContent||!t.update&&!t.newProc||(i.addClassName("has-update"),e.createElement("div",{class:"fonticon fonticon-update"+(t.update?t.mand?" mand":" optional":t.newProc?" new":""),title:t.update?t.mand?a("updateneeded"):a("updateavailable"):t.newProc?a("newprocessesavailable"):"",events:{click:function(){t.newProc&&!t.update?n.dispatchEvent("onClickUpdate",["noInstallID",t.update]):n.dispatchEvent("onClickUpdate",[t.name,t.update]),n.hideSettings()}}}).inject(s)),t.shortcut&&(i.addClassName("has-shortcut"),e.createElement("div",{class:"fonticon fonticon-forward",title:a("createshortcut"),events:{click:function(){n.dispatchEvent("onClickShortcut",t.name)}}}).inject(s))),"optionalContentStack"!==t.type&&"optionalContentInstall"!==t.type||t.optionalContent&&(i.addClassName("has-optional-info"),e.createElement("div",{class:"fonticon fonticon-info",title:a("userassistance"),events:{click:function(i){e.Event.stop(i),n.dispatchEvent("onClickOptionalConentDocumentation",t.name)}}}).inject(s))},getPlatformsItems:function(e){var t=this,n=[];return e.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),e.forEach((function(e){n.push(t.getPlatformItem(e))})),n},getCatEnvItemByPlatforms:function(){var e,t=[],n=[],i=this;return this.app.get("platforms").sort(),this.app.get("platforms").forEach((function(s){i.app.get("catEnvs")[s.id]?(t=[],i.app.get("catEnvs")[s.id].forEach((function(e,n){t.push(i.getConfigItem(e,s))})),(e=i.getPlatformItem(s)).items=t,e.className="platform-item-responsive",n.push(e)):n.push(i.getPlatformItem(s))})),n},getConfigItem:function(e,t){return{text:e.name,name:e.name,platformId:t.id,type:"config",selected:!!e.preferred,preferred:!!e.preferred}},getPlatformItem:function(e){return{text:e.name,name:e.id,type:"platform",className:"platform-item",selected:!this.isForceSelectTenantActive&&e.preferred,preferred:!this.isForceSelectTenantActive&&e.preferred}},getLaunchApp:function(){return{text:this.app.isA2XWidget()?a("Launch as a Desktop app"):a("Launch as a Widget app"),name:this.clickLaunchApp,"data-type":this.clickLaunchApp,fonticon:"monitor",className:"launch-App-Setting"}},getOptionalContentItem:function(e,i){var s=this.app.isA2X()&&this.app.A2X_NATIVE_APP&&this.app.A2X_NATIVE_APP.get("optionalContent")?this.app.A2X_NATIVE_APP.get("installOptionContentList")&&this.app.A2X_NATIVE_APP.get("installOptionContentList")[0]:this.app.get("installOptionContentList")&&this.app.get("installOptionContentList")[0],o=this.app.isA2X()&&this.app.A2X_NATIVE_APP&&this.app.A2X_NATIVE_APP.get("optionalContent")?this.app.A2X_NATIVE_APP.get("stackOptionContentList"):this.app.get("stackOptionContentList"),l=null,r=[],c=!1;return s&&(e&&s.get("onlineStackProcesses")&&(r=t.intersection(e,s.get("onlineStackProcesses"))),c=i&&s.get("online")&&s.get("status")!==n.INSTALL_GA_ON_GA&&!t.includes(s.get("processes"),r)),s?s&&s.get("update")?l=a("updateoptionalcontentnow"):c&&(l=a("newoptionalcontent")):l=a("installoptionalcontentnow"),l?{text:l,name:s&&s.get("id")?s.get("id"):o.get("id"),type:s&&s.get("id")?"optionalContentInstall":"optionalContentStack",className:"install-item",icon:null,optionalContent:!0,update:s&&s.get("update")&&!this.app.isCustom(),shortcut:!1,newProc:!1}:null},getInstallItem:function(e,i,s,o,l,r,c){var d=l?"remote"===i:e.get("id")===i,p=[];return s&&e.get("onlineStackProcesses")&&(p=t.intersection(s,e.get("onlineStackProcesses"))),{text:l?a("remoteit"):e.get("name"),name:l?"remote":e.get("id"),type:"install",selected:d,additionalContent:c&&!0!==e.get("isContentInstalled"),preferred:d,mand:e.get("status")===n.INSTALL_FORCE_UPDATE&&!this.app.isCustom(),update:e.get("update")&&!this.app.isCustom(),shortcut:r,newProc:o&&e.get("online")&&e.get("status")!==n.INSTALL_GA_ON_GA&&!t.includes(e.get("processes"),p)&&!this.app.isCustom()}},getInstallWithouRemoteCount:function(e){return e?e.filter((function(e){return!e._isOptionalContent()})).length:0},onClick:function(e,t){var n=this,i=t.type,s={};if((i&&!e.target.hasClassName("fonticon-right-open")||!(t.elements.container.hasClassName("item item-back")||e.target.getParent(".item-submenu")||e.target.hasClassName("fonticon-right-open")||e.target.hasClassName("fonticon-left-open")))&&("install-item"!==t["data-type"]||1!==this.installItemsLength||"remote"===t.name||!e.target.hasClassName("install-item")&&!e.target.hasClassName("item-text"))){if(t.name===this.clickLaunchApp)return this.dispatchEvent("onClickLaunchApp"),void this.hideSettings();if(t.name===this.clickInstallId)return this.dispatchEvent("onClickInstall"),void this.hideSettings();if(t.name===this.clickInstallRemoteId)return this.dispatchEvent("onClickInstallRemote"),void this.hideSettings();if(t.type===this.clickOptionalContentStack||t.type===this.clickOptionalContentInstall)return n.dispatchEvent("onClickOptionalContent",[t.name,t.update,t.type]),void n.hideSettings();if(t.type===this.clickConfig){var o=n.updatePreferredConfig(t);return n.dispatchEvent("onConfigChange",[t]),void n.hideSettings(o)}"platform-item-responsive"===t.className&&t.items&&t.elements.container.querySelector(".fonticon-right-open")&&!n.isPreferredConfig(t.items)?t.elements.container.querySelector(".fonticon-right-open").click():(this.items.forEach((function(e){e.type===i&&e!==t&&e.preferred&&(e.icon=null,e.preferred=!1,n.updateItem(e))})),t.preferred=!0,n.updateItem(t),s[t.type]=t.name,this.dispatchEvent("onPlatformChange",s),t.type===this.clickPlatform&&n.hideSettings())}},isPreferredConfig:function(e){var t=!1;return e.forEach((function(e,n){!0===e.preferred&&(t=!0)})),t},updatePreferredConfig:function(e){var t=this,n=!1;return this.app.get("platforms").forEach((function(n){t.app.get("catEnvs")[n.id]&&t.app.get("catEnvs")[n.id].forEach((function(t,i){e.name===t.name&&e.platformId===n.id?t.preferred=!0:t.preferred=!1}))})),this.items.forEach((function(t){"config"===t.type&&t!==e&&t.preferred?(n=!0,t.preferred=!1,e.selected=!1):"config"!==t.type||t!==e||t.preferred||(n=!0,e.preferred=!0,e.selected=!0),"platform"===t.type&&(n=!0,t.preferred=!1,e.selected=!1)})),n},onClickOutside:function(e){var t=e.target;t&&t===this.trigger&&e.stopPropagation(),this.hideSettings()},hideSettings:function(e){var t={},n=this;this.items&&this.items.forEach((function(e){e.preferred&&(e.type===n.clickConfig?t[e.type]=e:t[e.type]=e.name)})),!1===e||!0===e?this.dispatchEvent("onHideSettings",[t,e]):this.dispatchEvent("onHideSettings",t),this.hide(),this.destroy()},updateItem:function(t){t.icon?t.elements.icon?t.elements.icon.className=t.icon:t.elements.icon=e.createElement("span",{class:t.icon}).inject(t.elements.container,"top"):t.elements.icon&&(t.elements.icon.destroy(),delete t.elements.icon),t.preferred&&!t.elements.container.hasClassName("selectable selected")?t.elements.container.addClassName("selectable selected"):!t.preferred&&t.elements.container.hasClassName("selectable selected")&&t.elements.container.removeClassName("selectable").removeClassName("selected")}})})),define("DS/i3DXCompass/Model/PortfolioBusinessExperienceModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Model/App","DS/i3DXCompass/X3DContent","DS/i3DXCompass/UsageTracker"],(function(e,t,n,i,s,o,a,l,r,c){"use strict";return n.extend({preferedUsageId:"",setup:function(){var t=this;this.isDashboard()&&this.get&&this.get("settingNeeded")&&i.getPreferences({urlParams:{name:this.get("modelId")},onComplete:function(e){e&&e.preferredUsageId&&(t.preferedUsageId=e.preferredUsageId)},onFailure:function(){e.log("cockpit prefered failed")}})},launchBusinessExperience:function(t){if(t){if(t.content){var n=JSON.parse(t.content);0!==Object.keys(n).length&&(this.is_X3DBEMA_AP()&&n.data&&!n.data.items&&(n.data={items:[{envId:t.id}]}),r.setX3DContent(n))}this.get("appModel")?this.get("appModel").launch({onComplete:function(){e.log("appModel onComplete"),r.setX3DContent({})},onFailure:function(){e.log("appModel onFailure"),r.setX3DContent({})}}):this.get("appId")&&a.publish("launchApp",{appId:this.get("appId")},(function(t){e.log(t),r.setX3DContent({}),t.error?e.log("launchApp onFailure ",t.error):e.log("launchApp ")})),this.isCockpit()?c.clickBusinessCockpit({cockpitId:this.get("id"),cockpitName:this.get("title"),usageId:t.id}):c.clickBusinessMethod({businessMethodId:this.get("id"),businessMethodName:this.get("title"),usageId:t.id})}},updateModel:function(e,t){var n=this;if(e.icon&&n.set("icon",e.icon),e){if(e.platforms&&e.platforms.length>0&&e.platforms.detect((function(e){return e.id.toLocaleLowerCase()===n.get("platformId").toLocaleLowerCase()}))){var i=e.platforms.detect((function(e){return e.id.toLocaleLowerCase()===n.get("platformId").toLocaleLowerCase()}));(i.launchUrl||e.launchUrl)&&(e.launchUrl=i.launchUrl||e.launchUrl),(i.config||e.config)&&(e.config=i.config||e.config),(i.checksum||e.checksum)&&(e.checksum=i.checksum||e.checksum),i.id&&(e.platformId=i.id),i.envInfos&&(e.envInfos=i.envInfos),i.shortcutLaunchInfos&&(e.shortcutLaunchInfos=i.shortcutLaunchInfos),i.remoteLaunchInfos&&e.remoteInfos&&(e.remoteInfos.remoteLaunchInfos=i.remoteLaunchInfos)}n.set("appModel",new l(e))}},updateX3DBEMA_AP:function(e){},needSettingsMenu:function(){return!!(this.get("usages")&&this.get("usages").length>1)||!!(this.get("platforms")&&this.get("platforms").length>1)},isDashboard:function(){return"cockpit"===this.get("type")},isCockpit:function(){return"cockpit-business"===this.get("type")},is_X3DBEMA_AP:function(){return"X3DBECC_AP"===this.get("appId")},getFistUsage:function(e){return e&&e.filter&&this.get("usages")&&this.get("usages").length>0?this.get("usages").filter((function(t){return e.indexOf(t.id)>-1}))[0]:this.get("usages")&&this.get("usages").length>0?this.get("usages")[0]:""},savePreferedUsageId:function(e){this.preferedUsageId=e,i.setPreferences({name:this.get("modelId"),value:JSON.stringify({cockpitType:this.get("type"),preferredUsageId:e})})}})})),define("DS/i3DXCompass/Collection/BusinessExperienceCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Model/PortfolioBusinessExperienceModel","DS/i3DXCompass/Data"],(function(e,t,n,i){"use strict";var s=[];return t.extend({isFetched:!1,model:n,nbCallback:0,isRegistryFetched:!1,tempData:{},setup:function(e,t){return this.addEvent("registryCallback",this.manageCallback),t.pathURL&&(this.pathURL=t.pathURL),t.type&&(this.type=t.type),t.urlList&&(this.urlList=t.urlList),t.updateStep&&(this.updateStep=t.updateStep),this._parent(t)},fetch:function(e){var t=this;if(t.nbCallback=0,t.tempData={},e.urlList&&(t.urlList=e.urlList),0!==t.urlList.length||e.url)return this._parent(e);s.push((function(){t.fetch(e)}))},sync:function(t,n,s){var o=this;if("read"===t){if(s.url){var a={cors:!0};return s.urlParams&&(a=e.merge(a,s.urlParams)),i.request({url:s.url+o.pathURL,urlParams:a,proxy:"passport",method:"GET",onComplete:function(e,t){e&&o.updateCollection(e,s,{id:o.urlList[0]&&o.urlList[0].id||"current"})},onFailure:function(e,t){o.updateCollection(t,s,o.urlList[0]&&o.urlList[0].id||"current")}})}(o.urlList.length>0||s.urlList&&s.urlList.length>0)&&o.urlList.forEach((function(e){if(e.services[0].url)try{i.request({url:e.services[0].url+o.pathURL,urlParams:{tenant:e.id,cors:!0},proxy:"passport",method:"GET",onComplete:function(t,n){t&&o.updateCollection(t,s,e)},onFailure:function(t,n){o.updateCollection(n,s,e)}})}catch(t){o.updateCollection([],s,e),console.log(t)}}))}},parse:function(e){var t=this,n=[];return e&&Object.keys(e).length>0&&Object.keys(e).forEach((function(i){e[i].forEach((function(e){e.platformId=i,t.urlList.detect((function(e){return e.id===i}))&&(e.businessExperienceUrl=t.urlList.detect((function(e){return e.id===i})).services[0].url),n.push(e)}))})),n},updateCollection:function(e,t,n){var i=this;i.nbCallback+=1,e&&Object.keys(e).length>0&&(i.tempData[n.id]=e),i.nbCallback===i.urlList.length&&(t&&t.onComplete&&Object.keys(i.tempData).length>0?(t.remove=!1,t.merge=!1,t.onComplete(i.tempData),i.updateStep&&i.updateStep(i.type,"Ready")):(t.onFailure(),i.updateStep&&i.updateStep(i.type,"Empty")))},manageCallback:function(e){e.urlList&&(this.urlList=e.urlList),s.forEach((function(e){setTimeout(e,0)}))}})})),define("DS/i3DXCompass/Collection/BusinessExperienceCockpitsCollection",["UWA/Core","DS/i3DXCompass/Collection/BusinessExperienceCollection","DS/WebappsUtils/WebappsUtils"],(function(e,t,n){"use strict";return t.extend({tempData:{},pathURL:"/resources/BusinessExperienceAccess/v1/model/Cockpit",parse:function(e){var t=[];return e&&Object.keys(e).length>0&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){e.platformId=n,e.settingNeeded=!0,e.granted=!0,e.brand="CUSTOM",e.type="cockpit-business",t.push(e)}))})),t}})})),define("DS/i3DXCompass/Collection/BusinessExperienceMethodsCollection",["UWA/Core","DS/i3DXCompass/Collection/BusinessExperienceCollection","DS/WebappsUtils/WebappsUtils"],(function(e,t,n){"use strict";return t.extend({tempData:{},pathURL:"/resources/BusinessExperienceAccess/v1/model/BusinessMethod",parse:function(t){var n,i=[];return t&&Object.keys(t).length>0&&Object.keys(t).forEach((function(s){t[s].forEach((function(t){n||(n=i.find((function(e){return"X3DBECC_AP"===e.appId}))),t.platformId=s,t.settingNeeded=!0,t.granted=!0,t.brand="CUSTOM",t.platforms=[s],"X3DBECC_AP"===t.appId&&n?(n.platforms.push(t.platformId),n.usages&&n.usages.concat&&(n.usages=n.usages.concat(t.usages)),n=e.merge(n,t)):i.push(t)}))})),i}})})),define("DS/i3DXCompass/View/PortfolioAsBusinessView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioDepth1View","DS/i3DXCompass/Tools","DS/i3DXCompass/Data"],(function(e,t,n,i,s){"use strict";return n.extend({setup:function(e){return this.container.addClassName("portfolio-depth1"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.hideServices=e.hideServices,this.hideBusinessExperience=e.hideBusinessExperience,this._parent(e)},_renderBuildItem:function(e){return("BUSINESS"===e.model.get("id")&&!0===this.hideBusinessExperience||"TRADING"===e.model.get("id")&&!0===this.hideServices)&&(e.container.className=e.container.className+" hidden"),e.render(),e}})})),define("DS/i3DXCompass/Collection/BusinessExperienceGenericCollection",["DS/i3DXCompass/Collection/PortfolioCollection","DS/i3DXCompass/Model/PortfolioBusinessExperienceModel"],(function(e,t){"use strict";return e.extend({model:t,comparator:"title",setup:function(e,t){t.master&&(this.master=t.master,this.master.addEvent("onChange",this.changeModel.bind(this)),this.master.addEvent("onMultipleAdd",this.filterAndAdd.bind(this)),this.master.addEvent("onRemove",this.removeModel.bind(this))),this.filterType=t.filterType},removeModel:function(e){this.get(e)&&this.remove(e)},changeModel:function(e){e._changed;this.get(e)&&this.sort()},filterAndAdd:function(e){var t=this;e.forEach((function(e){e.get("type")===t.filterType&&t.add(e.toJSON())}))}})})),define("DS/i3DXCompass/Collection/PlatformCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Model/PlatformModel"],(function(e,t,n){"use strict";return t.extend({serviceFilter:"",model:n,comparator:"displayName",setup:function(e,t){return t.serviceFilter&&(this.serviceFilter=t.serviceFilter),this._parent(e&&e.length>0?this.hydrate(e):e,t)},hydrate:function(e){var t=this,n=[];return e.forEach((function(e){if(e.services)e.services.forEach((function(e){t.serviceFilter&&t.serviceFilter===e.name&&n.push(e)}));else{var i=[],s={};Object.keys(e).forEach((function(n){t.serviceFilter&&n===t.serviceFilter?(s[n]=e[n],i.push(s)):t.serviceFilter||"displayName"!==n||"platformId"!==n||(s[n]=e[n],i.push(s))})),i.length>0&&n.push({id:e.platformId,displayName:e.displayName,services:i,servicesUrl:s})}})),n}})})),define("DS/i3DXCompass/Collection/BusinessExperienceRolesCollection",["UWA/Core","DS/i3DXCompass/Collection/BusinessExperienceCollection","DS/i3DXCompass/Model/BusinessExperienceRoleDetailModel"],(function(e,t,n){"use strict";return t.extend({tempData:{},pathURL:"/resources/BusinessExperienceAccess/v1/model/Role",model:n,parse:function(t){var n,i=this,s=[];return t&&Object.keys(t).length>0&&Object.keys(t).forEach((function(o){t[o].forEach((function(t){n=s.find((function(e){return e.id===t.id})),t.platformId=o,t.businessExperienceUrl=i.extractBusinessExperienceUrl(o),n?((n=e.merge(n,t)).platforms.push(t.platformId),n.businessExperienceUrls.push(t.businessExperienceUrl)):(t.platforms=[t.platformId],t.businessExperienceUrls=[t.businessExperienceUrl],s.push(t))}))})),s},extractBusinessExperienceUrl:function(e){return this.urlList.detect((function(t){return t.id===e}))?this.urlList.detect((function(t){return t.id===e})).services[0].url:""}})})),define("DS/i3DXCompass/Modal/CEFModal",["UWA/Core","UWA/Utils","UWA/Json","UWA/Class/View","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/UIKIT/Alert","DS/UIKIT/Modal","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Spinner","DS/UIKIT/Popover","DS/UIKIT/Input/Select","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature","DS/i3DXCompass/InstallManager"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h,f,g){"use strict";return i.extend({tagName:"div",className:"facet-cef",init:function(e){this._parent(e)},setup:function(e){return this.options=e||{},e.platform&&(this.platform=e.platform),this._parent(e)},buildNameCEF:function(e){var t,n=this;return n.options.level&&n.options.level.get("commercialName")?t=n.options.level.get("commercialName"):n.options.preferredInstall?!0===e&&n.options.preferredInstall.get("levels")?t=n.options.preferredInstall.get("levels")[0].commercialName:!1===e&&(t=n.options.preferredInstall.length>0?n.options.preferredInstall[0].get("longName"):n.options.preferredInstall.get("longName")):t=!1===e&&n.options.installLists?n.options.installLists.length>0?n.options.installLists[0].get("longName"):n.options.installLists.get("longName"):"Chromium Embedded Framework",t},buildModal:function(){var t=a.i18n,n=this,i=n.options.statusModal,s=n.options.preferredInstall,o=s?s.get("instruction"):null,l=n.options.isStackToInstall,c=new d({value:t("installation"===i?"installCEF":"updateCEF"),className:"primary large block download-daemon-btn",events:{onClick:function(){"installation"===i?(m.hide(),n.dispatchEvent("installCEF")):"update"===i&&(m.hide(),n.dispatchEvent("updateCEF"))}}}),p=new d({value:t("cancel"),className:"default",events:{onClick:function(){m.hide()}}}),u=new d({value:t("proceedanyway"),className:"default",events:{onClick:function(){f.setIsAlreadyDisplayedCEFUpdateModal(!0),m.hide(),n.dispatchEvent("launchApp")}}}),m=new r({closable:!0,visible:!0,events:{onHide:function(){m.destroy()}},header:'<h4 class="cef-title">'+e.String.format(e.i18n("titleCEF"))+"</h4>",body:{html:[{tag:"div",class:"compass-install-desc",styles:{"padding-right":"15px","padding-left":"15px"},html:[{tag:"p",class:"cef",text:e.String.format(e.i18n("{0} is ready to be installed"),n.buildNameCEF(l))},c]}]},footer:[1===o||2===o?u:p]}).inject(document.body)},isModalCanDisplayed:function(){return!f.getIsAlreadyDisplayedCEFUpdateModal()&&"update"===this.options.statusModal&&f.isInstallationsCanBeProposed()||"update"!==this.options.statusModal&&f.isInstallationsCanBeProposed()},render:function(){return this.isModalCanDisplayed()?this.container.setContent(this.buildModal()):this.dispatchEvent("launchApp"),this}})})),define("DS/i3DXCompass/Collection/UserPreferencesCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Data","DS/i3DXCompass/Model/GroupModel"],(function(e,t,n,i){"use strict";return t.extend({isFetched:!1,groupCollection:[],model:i,setup:function(e){return this.url=n.myAppsBaseUrl.replace("/resources/AppsMngt","")+"enovia/resources/compass/api/v1/preference",this._parent(e)},fetch:function(e){var t=this.request;return t&&t.cancel(),this.request=this._parent(e),this.request},sync:function(e,t,i){var s,o=this;if("read"===e)s=n.request({url:this.url,onComplete:function(e){o.isFetched=!0,e&&"object"==typeof e?i&&i.onComplete&&i.onComplete(e):i&&i.onFailure&&i.onFailure(e)},onFailure:function(e){i&&i.onFailure&&i.onFailure(e)}});return s},onAdd:function(e){},removeApp:function(e){this.get(e)&&this.remove(e)},getNameNewGroup:function(){var e="New Folder",t=1,n=[];for(this.forEach((function(e){n.push(e.get("title"))}));n.indexOf(e+" "+t)>-1;)t++;return e+" "+t},reorderPreference:function(e){e&&(e.forEach((function(e,t){this.get(e.id)?this.get(e.id).set("order",e.order):this.add(new i(e))})),this.save())},addNewGroup:function(e){e.id&&(e.order||(e.order=this.length+1),this.add(new i(e)),this.save())},save:function(){var e=JSON.stringify(this);n.request({url:this.url,method:"PUT",contentType:"application/x-www-form-urlencoded",postData:{value:e},onComplete:function(e){},onFailure:function(e){}})}})})),define("DS/i3DXCompass/View/PortfolioServicesView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioDepth1View","DS/i3DXCompass/Tools","DS/i3DXCompass/Data"],(function(e,t,n,i,s){"use strict";return n.extend({setup:function(e){return this.container.addClassName("portfolio-depth1"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),"ios"===i.getOs()||"macos"===i.getOs()?e.itemTagName="div":e.itemTagName="a",this._parent(e)},_renderBuildItem:function(t){return"Widget"===t.model.get("type")?(t.render(),t.container.addClassName("service"),i.enableWidgetDrag(t.container,t.model.toJSON()),t.container.addClassName("widget-item"),t.container.addClassName("drag-app"),e.createElement("i",{class:"fonticon fonticon-window fonticon-service-widget"}).inject(t.container.getElement(".portfolio-item-content")),"ios"!==i.getOs()&&"macos"!==i.getOs()||t.container.querySelector(".portfolio-item-content").addClassName("portfolio-item-content-draggable").removeClassName("portfolio-item-content")):(t.render(),t.container.addClassName("service")),t},_onClick:function(t){var n=t.model,o=n.get("url");"X3DPSLY_AP"===n.get("id")&&!0===e.is(s.addinMode)&&(o=this._manageAddinUrl(o)),i.isSameApp(o,window.location)||-1!==o.indexOf("addinmode")?window.open(o,"_self"):window.open(o,"_blank")},_manageAddinUrl:function(e){var t=s.addinMode&&s.addinMode.value;return s.cloud||(e=this._addQueryParams(e,"lockedapp",!0)),t&&(e=this._addQueryParams(e,"addinmode",t)),t&&"catiav5"===t.toLowerCase()&&(e=this._addQueryParams(e,"embeddedProfileId","CATIAV5")),t&&"xvl"===t.toLowerCase()&&(e=this._addQueryParams(e,"embeddedProfileId","XVL")),e},_addQueryParams:function(e,t,n){var i=-1===e.indexOf("?")?"?":"&";return e+i+t+"="+n}})})),define("DS/i3DXCompass/Collection/CockpitsByRolesCollection",["UWA/Core","DS/i3DXCompass/Collection/BusinessExperienceCollection","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Collection/PlatformCollection"],(function(e,t,n,i,s,o){"use strict";return t.extend({tempData:{},pathURL:"/api/contexts/context-by-roles",comparator:"title",isDisplayedMultiTenant:!1,dashboardPlatformList:"",setup:function(e,t){return t.master&&(this.master=t.master),this._parent(e,t)},fetch:function(e){return e&&e.urlParams&&(this._lastRoles=e.urlParams.roles),this._parent.apply(this,arguments)},parse:function(e){var t=this,n=[];return e&&Object.keys(e).length>0&&Object.keys(e).forEach((function(i){e[i].forEach((function(e){"cockpit"!==e.type||"ff7d96b6-9c6d-4bab-a06c-544b75909e70"===e.modelId&&"Web Feeds"===e.name||(e.platformId=i,e.settingNeeded=!1,e.granted=!0,e.brand="CUSTOM",e.thumbnail=t._getIconLink(e),e.defaultthumbnail="fonticon fonticon-chart-map-tree",e.title=e.name,e.tooltip=e.name,e.platforms=t.getTenantListForRoles(e.roles||[]),n.push(e))}))})),n},onAdd:function(e){return this.master.add(e),this._parent(e)},getTenantListForRoles:function(e){var t=[],n=this;return e.forEach((function(e){n.grantedRolesCollection.forEach((function(n){n.get("process")===e&&n.get("grantedPlatforms").forEach((function(e){-1===t.indexOf(e)&&t.push(e)}))}))})),this.dashboardPlatformList.filter((function(e){return t.indexOf(e.get("platformId"))>-1}))},updateTenantList:function(e){var t,n=this,a=s.getTenantList();n.urlList=[],a&&a.length&&(n.dashboardPlatformList=new o(a,{serviceFilter:"3DDashboard"})),a[0]&&a[0]["3DDashboard"]?((t=a.find((function(e){return e.platformId===i.selectedPlatform})))&&(n.urlList=[{id:t.platformId,services:[{id:"3DDashboard",url:t["3DDashboard"]}]}]),e&&"function"==typeof e&&e()):i._get3DDashboardUrl({platform:this.getTenantIds(a)},(function(s){s&&(n.dashboardPlatformList=new o(s,{serviceFilter:"3DDashboard"})),s&&s[0]&&((t=s.find((function(e){return e.id===i.selectedPlatform})))&&(n.urlList=[t]),e&&"function"==typeof e&&e())}))},formatRolesToString:function(e,t){var n=[];return e.forEach&&(this.grantedRolesCollection=e,e.forEach((function(e){e.get("process")&&(t||!t&&-1===e.get("id").indexOf("RAP-"))&&n.push(e.get("process"))}))),n.join(",")},getFirstURL:function(){return this.urlList&&this.urlList.length>0?this.urlList[0].services[0].url:""},getTenantIds:function(e){var t=[];return e.forEach((function(e){e.platformId&&t.push(e.platformId)})),t},_getIconLink:function(e){return e.thumbnail&&e.thumbnail.fingerprint?this.getFirstURL()+"/api/contexts/cockpit/"+e.modelId+"/thumbnail?checksum="+e.thumbnail.fingerprint:""}})})),define("DS/i3DXCompass/Controls/FamilyAppSettings",["UWA/Core","DS/UIKIT/DropdownMenu","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature","DS/i3DXCompass/EventManager","DS/i3DXCompass/Controls/Settings","DS/i3DXCompass/InstallManager","DS/i3DXCompass/Collection/InstallList","UWA/Utils"],(function(e,t,n,i,s,o,a,l,r){"use strict";var c=e.i18n;return o.extend({customClass:"compass-app-settings",iconClass:"fonticon fonticon-check",clickInstallId:"clickinstall",clickInstallRemoteId:"clickremote",clickOptionalContentInstall:"optionalContentInstall",clickOptionalContentStack:"optionalContentStack",clickConfig:"config",clickPlatform:"platform",init:function(t){this.familyApps=t.familyApps,this.platforms=t.data.platforms,this.isInstalled=t.data.installs&&t.data.installs.length>0,this.showMessage=t.events.showMessage,this.launchAppFamily=t.events.launchAppFamily,this.isForceSelectTenantActive=t.isForceSelectTenantActive,this.familyApps.native&&(t.app.set("optionalContent",this.familyApps.native.get("optionalContent")),t.app.set("catEnvs",this.familyApps.native.get("catEnvs")),t.app.set("installOptionContentList",this.familyApps.native.get("installOptionContentList")),t.app.set("stackOptionContentList",this.familyApps.native.get("stackOptionContentList"))),this.installItemsLength=this.getInstallWithouRemoteCount(t.data.installs),this.app=t.app,this.isForceSelectTenantActive=t.isForceSelectTenantActive;var n,i=this,s=t.data,o=s.installs,a=s.remoteInstall,l=s.platforms,d=t.preferredInstallId,p=t.processes,u=t.onlineInstallable,m=function(){var e=!1;return i.app.get("catEnvs")&&i.app.get("catEnvs").length>1?e=!0:i.app.get("catEnvs")&&Object.keys(i.app.get("catEnvs")).length>0&&Object.keys(i.app.get("catEnvs")).forEach((function(t){i.app.get("catEnvs")[t].length>1&&(e=!0)})),e},h=this.app.get("optionalContent")?this.getOptionalContentItem(p,u):null,f=o?o.filter((function(e){return!e._isOptionalContent()})).map((function(e){return this.getInstallItem(e,d,p,u,!1,t.shortcutEnabled,t.additionalContent)}),this):null,g=f&&0===f.length,v=(this.app.get("platforms").length>0||l)&&m()&&(!g||a||t.isfamilyApps)?this.getCatEnvItemByPlatforms():l&&(!g||a||t.isfamilyApps)||t.isfamilyApps&&t.familyApps.Windows?this.getPlatformsItems(l):null,C=v||[];g&&(f.push({className:"header no-install",html:s.error?s.error:e.String.format(c("noinstall"),t.appTitle)}),u&&f.push({className:"download-link",name:this.clickInstallId,text:c("clickinstall")})),f&&t.remoteEnabled&&(f.push({className:"divider"}),a?f.push(this.getInstallItem(a,d,[],u,!0,!1)):u&&f.push({className:"download-link",name:this.clickInstallRemoteId,text:e.String.format(c("install"),t.remoteAppTitle)})),v&&f&&C.push({className:"divider"}),C=C.concat(f||[]),h&&(C=C.concat(h||[])),n={familyOption:t,multiSelect:!0,maxItemsBeforeScroll:r.Client.getSize().height<400?5:r.Client.getSize().height<560?8:12,forceResponsive:m()||t.isfamilyApps,items:C,altPosition:function(){var e=i.elements,n=e.container.offsetWidth,s=e.container.offsetHeight,o=window.innerWidth,a=window.innerHeight,l=t.position.x,r=t.position.y;return l+n+20>o&&(l=o-n-20),r+s+20>a&&(r=a-s-20),{x:l,y:r}},renderTo:t.renderTo||document.body,target:t.target,events:t.events,shortcutEnabled:t.shortcutEnabled,isParentFamily:!0},this._parent(n),this.trigger=t.trigger},_getCatEnvItemByPlatforms:function(e){var t,n=[],i=[],s=this;return(e=e||this.app.get("platforms")).forEach((function(e){e.appType.indexOf("native")>-1&&s.app.get("catEnvs")[e.id]?(n=[],s.app.get("catEnvs")[e.id].forEach((function(t,i){n.push(s.getConfigItem(t,e))})),(t=s.getPlatformItem(e)).items=n,t.className="platform-item-responsive",i.push(t)):i.push(s.getPlatformItem(e))})),i},getCatEnvItemByPlatforms:function(){var e=this._getCatEnvItemByPlatforms(this.platforms),t=this.getFirstLevelPlatformView(),n=this.getFirstLevelLaunchAppView();return t.items=e,n?n.concat(t):[t]},getPlatformsItems:function(e){var t=e&&e.length>0?this._parent(e.sort()):[],n=this.getFirstLevelPlatformView(),i=this.getFirstLevelLaunchAppView();return t.length>1?n.items=t:(n.selected=!0,n.preferred=!0),i?i.concat(n):[n]},editItem:function(e){this._parent(e)},updateItem:function(e){-1===["launchApp","launchNative","launchWeb","platforms","launchMobile"].indexOf(e["data-type"])&&this._parent(e)},onClick:function(e,t){this._parent(e,t),this.clickOnLaunchApp&&this.canLaunchApp(this.familyApps[this.clickOnLaunchApp])&&("native"!==this.clickOnLaunchApp&&"Windows"!==this.clickOnLaunchApp||this.launchFamilyApp(this.clickOnLaunchApp),this.clickOnLaunchApp="")},getFirstLevelPlatformView:function(){var e=this,t=this.getFavoritePlatform();return this.firstLevelPlatformView={fonticon:"cloud-alt",text:t&&!this.isForceSelectTenantActive?t.id:c("Select platform "),"data-type":"select-platforms",handler:function(t,n,i){t.showNative&&e.items,console.log("getFirstLevelPlatformView first view")},onShow:function(e){this.showPlatform(!i.isNativeApplicationEnvironment()&&this.familyApps.Widget?"Widget":"native")}},this.firstLevelPlatformView},getFirstLevelLaunchAppView:function(){var t=this,n=[],s=[],o=Object.keys(this.familyApps).length,a=["Windows","Macos"];return this.familyApps.forEach&&this.familyApps.forEach((function(e){a.filter((function(t){return e.get("tooltip").indexOf(t)>-1}))})),!i.isNativeApplicationEnvironment()&&this.familyApps.native&&this.isInstalled?n.push({fonticon:"monitor","data-type":"launchNative",text:c("Launch as native app"),handler:function(e,n,i){t.canLaunchApp(this.familyApps.native)?t.launchFamilyApp("native"):t.showPlatform("native")}}):i.isNativeApplicationEnvironment()&&this.familyApps.Widget&&n.push({fonticon:"internet","data-type":"launchWeb",text:c("Launch as web app"),handler:function(e,n,i){t.canLaunchApp(this.familyApps.Widget)?t.launchFamilyApp("Widget"):t.showPlatform("Widget")}}),this.familyApps.Windows&&n.push({fonticon:"logo-windows","data-type":"launchMobile",text:e.String.format(c("Launch as {0} app"),a[0]),handler:function(e,n,i){t.canLaunchApp(this.familyApps.Windows)?t.launchFamilyApp("Windows"):t.showPlatform("Windows")}}),o>2&&this.isInstalled?(s.push({fonticon:"open-menu-dot","data-type":"launchApp",text:c("Launch as ..."),items:n,handler:function(e,t,n){console.log("You've taken some beautiful pictures ! ")}}),s):n},getFirstLevelInstallView:function(){var e=[];return e.push({fonticon:"install",text:c("R2022X FD02"),items:[],handler:function(e,t,n){console.log("You've taken some beautiful pictures ! ")}}),e},getFavoritePlatform:function(){var e,t=this.platforms;return(e=t.detect((function(e){return e.appType.indexOf("Widget")>-1&&!0===e.preferred})))||(e=t.detect((function(e){return!0===e.preferred}))),1!==t.length||e?e:t[0]},getCatEnv:function(){var e=[];this.familyApps&&this.familyApps.filter((function(e){return e.isNative()})).forEach((function(t){t.get("catEnvs").forEach((function(t){e.push(t)}))}))},getPlatformItem:function(e){var t;return(t=this._parent(e))&&(t.appType=e.appType||"widget"),t},getOptionalContentItem:function(e,t){if(!i.isNativeApplicationEnvironment())return this._parent(e,t)},getInstallItem:function(e,t,n,s,o,a,l){var r;if(!i.isNativeApplicationEnvironment())return(r=this._parent(e,t,n,s,o,a,l))&&(r["data-type"]="install-item",this.installItemsLength<2&&(r.selected=!1)),r},canLaunchApp:function(e){var t=this.isForceSelectTenantActive?null:1===this.platforms.length?this.platforms[0]:n.arrayFind(this.platforms,(function(e){return e.preferred}));return t&&e.get("platforms").detect((function(e){return t.id===e.id}))||0===e.get("platforms").length},showPlatform:function(e){s.dispatchEvent("onShowMessage",["Please select platform",5e3]),this.clickOnLaunchApp=e,this.menus.forEach((function(e){if(e.parentItem&&"Select platform "===e.parentItem.name)e.items.forEach((function(e){-1===e.appType.indexOf("native")?(e.disabled=!0,e.elements.container.hide()):(e.disabled=!1,e.elements.container.show())}));else if(e.parentItem&&"Launch as ..."===e.parentItem.name)!1===e.elements.container.isHidden()&&e.hide();else if(e.items.detect((function(e){return"select-platforms"===e["data-type"]}))){var t=e.items.detect((function(e){return"select-platforms"===e["data-type"]}));t.elements.container.getElement(".fonticon-right-open")?t.elements.container.getElement(".fonticon-right-open").click():t.show()}}))},launchFamilyApp:function(e){this.launchAppFamily(this.familyApps[e])},isPreferredConfig:function(e){var t=!1;return"native"!==this.clickOnLaunchApp||(e.forEach((function(e,n){!0===e.preferred&&(t=!0)})),t)}})})),define("DS/i3DXCompass/View/PortfolioDepth2View",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioGenericView"],(function(e,t,n){"use strict";return n.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth2"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this._parent(e)}})})),define("DS/i3DXCompass/View/CockpitView",["UWA/Core","UWA/Utils","DS/i3DXCompass/View/AppView","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Tooltip"],(function(e,t,n,i,s){"use strict";return n.extend({click:function(e){this.dispatchEvent("onItemClick",[this.model,this.container])},_getTemplate:function(){var e={tag:"div",styles:{"z-index":"2",height:"64px",width:"64px","background-size":"64px","background-repeat":"no-repeat","background-position":"50% 50%","margin-left":"calc(50% - 32px)"},events:{error:function(){this.styles["background-image"]="url("+i.getWebappsAssetUrl("i3DXCompass","images/s.gif")+")"}}},t=this.model.get("thumbnail")&&this.model.get("thumbnail").indexOf("ROLE_64")>-1||this.options.defaultIcon?"":this.model.get("thumbnail");return""===t?e.class=this.model.get("defaultthumbnail"):"IntersectionObserver"in window?(e["data-src"]=t,e.loading="lazy",e.styles["background-image"]="url("+i.getWebappsAssetUrl("i3DXCompass","images/s.gif")+")"):e.styles["background-image"]="url("+t+")",[e,{class:"item-view-content-wrapper title",text:this.model.get("title")},this.checkNeedSettingsMenu()?this.buildSettingsElmt():null]},checkNeedSettingsMenu:function(){var e=this,t=0;return this.model.get("usages")&&this.filterUsage&&this.filterUsage.indexOf&&this.model.get("usages").forEach((function(n){e.filterUsage.indexOf(n.id)>-1&&(t+=1)})),this.model.needSettingsMenu&&this.model.needSettingsMenu()&&this.clickable&&(!this.filterUsage||t>1)},buildSettingsElmt:function(){var t=this;return e.createElement("div",{class:"settings-img fonticon fonticon-chevron-down",events:{click:function(n){t.clickable&&(e.Event.stop(n),t.dispatchEvent("onClickSettings",[t.model,t.container]))}}})}})})),define("DS/i3DXCompass/View/CockpitsListView",["UWA/Core","UWA/Utils","UWA/Class/View","DS/UIKIT/Tooltip","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/X3DContent","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/CockpitView","DS/i3DXCompass/Controls/BusinessExperienceSettings","UWA/Utils/Client","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/Feature","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompass/Model/App"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h,f){"use strict";return n.extend({tagName:"div",className:"items-view-business-methods",setting:"",setup:function(e){var t=this;return e.additionalClassName&&this.container.addClassName(e.additionalClassName),e.filterUsage&&(this.filterUsage=e.filterUsage),this.renderOnce=s.debounce(this.render,50,!1).bind(this),this.collection&&(this.collection.addEvent("onAdd",this.renderOnce.bind(this)),this.collection.addEvent("onRemove",this.renderOnce.bind(this)),this.collection.addEvent("onChange",this.renderOnce.bind(this)),this.collection.length>0&&setTimeout((function(){t.renderOnce()}),10)),this},buildSetting:function(e,t){var n=this,i=t.getElement(".settings-img").getOffsets(),s=d.getScrolls();this.setting=new c({model:e,target:t.getElement(".settings-img"),renderTo:document.body,filterUsage:n.filterUsage,position:{x:i.x-s.x,y:i.y-s.y+25},events:{onUsage:function(e,t){n.launchCockpit(e,t)}}})},render:function(){var e=this;return this.collection&&this.collection.map&&(this.container.setContent(this.collection.map((function(t){return new r({model:t,clickable:!0,filterUsage:e.filterUsage,additionalClassName:"cockpit-item",events:{onHide:function(){var t=e.container.getElement(".settings-img.active");t&&t.removeClassName("active")},onItemClick:function(t,n){t.isDashboard()?t.preferedUsageId||!t.needSettingsMenu()?e.launchCockpit(t):(e.setting&&e.setting._hide(),e.setting="",e.buildSetting(t,n),e.setting.show()):t.launchBusinessExperience(t.getFistUsage(e.filterUsage)),t&&t.get&&t.get("modelId")?p.clickCockpitByRole({cockpitId:t.get("modelId"),cockpitName:t.get("name")}):t&&t.get&&p.clickBusinessCockpit({cockpitId:t.get("id"),cockpitName:t.get("title")})},onClickSettings:function(t,n){e.setting&&e.setting._hide(),e.setting="",e.buildSetting(t,n),e.setting.show()}}}).render()}))),this.dispatchEvent("onShowCockpitsSection")),this},launchCockpit:function(e,t){var n=this.collection;if(e.get("modelId")){var i,a,l,r,c="#dashboard:"+e.get("modelId");t?(a=t.get("platformId"),r=t.get("3DDashboard")):e.get("platforms")&&e.get("platforms").length>0?e.preferedUsageId?(r=e.get("platforms").find((function(t){return t.get("platformId")===e.preferedUsageId})),a=e.preferedUsageId,r=r?r.get("3DDashboard"):""):e.get("platforms")[0]&&(a=e.get("platforms")[0].get("platformId"),r=e.get("platforms")[0].get("3DDashboard")):(a=o.selectedPlatform||e.get("platformId"),(r=s.getTenantList().find((function(e){return o.selectedPlatform===e.platformId&&e["3DDashboard"]})))["3DDashboard"]&&(r=r["3DDashboard"])),i=r||n.getFirstURL(),l=i+"/"+c,u.isNativeApplicationEnvironment()?h.getAppInfo({appId:"X3DDASH_AP",onComplete:function(e){e.launchUrl=l,new f(e).launch()}}):-1!==window.location.href.indexOf("-ifwe.")&&-1!==i.indexOf(window.location.host)&&s._supportBigUrl(l)&&a===o.selectedPlatform?window.location.hash=c:window.open(l,"_blank")}}})})),define("DS/i3DXCompass/View/BusinessExperienceContentOverlayView",["UWA/Core","DS/i3DXCompass/View/ContentOverlayView","DS/i3DXCompass/Tools","DS/UIKIT/Scroller","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/i3DXCompass/View/BusinessMethodsListView","DS/i3DXCompass/Collection/BusinessExperienceMethodsCollection","DS/i3DXCompass/Collection/BusinessExperienceCockpitsCollection","DS/i3DXCompass/View/CockpitsListView","DS/UIKIT/Accordion","DS/UIKIT/Mask"],(function(e,t,n,i,s,o,a,l,r,c,d,p){"use strict";var u=e.i18n,m="content-overlay",h={ME:"fonticon-user",WE:"fonticon-users",COMPANY:"fonticon-building-office",WORLD:"fonticon-globe"};return t.extend({tagName:"div",i18n:e.i18n,tempRemove:[],className:"compass-v3 "+m+" "+m+"-hidden",domEvents:{"click .content-overlay-header":"_backClick","click .content-overlay-go-home":"callGoHome","click .content-overlay-icon-more.fonticon-close":"_dispatchClose"},setup:function(e){this.title=e.title,this.icon=e.icon,this.icon2=e.icon2,this.view=e.view,this.model=e.model,this.canEdit=!!this.model&&this.model.get("canEdit"),this.isEditMode=this.options.isEditMode||!1,this.canDelete=!!this.model&&this.model.get("canDelete"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.renderOnce=n.debounce(this.render,500,!0).bind(this),this.model&&(this.model.addEvent("onSync",this.render.bind(this)),this.model.addEvent("onAdd",this.renderOnce.bind(this)),this.model.addEvent("onRemove",this.renderOnce.bind(this)),this.model.addEvent("onChange",this.renderOnce.bind(this))),e.businessMethodCollection&&(this.businessExperienceMethodsCollection=new l(e.businessMethodCollection)),e.cockpitCollection&&(this.businessExperienceCockpitsCollection=new r(e.cockpitCollection))},render:function(){var e;this.container.setContent([this.buildHeader(),{id:"container-scroll",class:""},{id:"to-scroll",styles:{height:"100%"},html:this.buildAccordion()},e]);var t=this.container.getElement("#to-scroll"),n=this.container.getElement("#container-scroll");return this.scroller=new i({element:t}).inject(n),this.options.buy&&this._injectBuyButtonIfNeeded(),this},buildAccordion:function(){var t,n=this,i=e.createElement("div",{styles:{height:"100%"},html:new a({collection:n.businessExperienceMethodsCollection,filterUsage:n.model.get("usagesIdList"),additionalClassName:"items-roles-view compass-scroll-accordion-section my-apps-section"}).render()}),s=e.createElement("div",{styles:{height:"100%"},html:new c({collection:n.businessExperienceCockpitsCollection,filterUsage:n.model.get("usagesIdList"),additionalClassName:"items-roles-view compass-scroll-accordion-section my-apps-section"}).render()}),o=[];return n.businessExperienceMethodsCollection.length>0&&o.push({title:u("My Business Methods"),name:"apps",content:i,selected:!0,className:"compass-scroll-accordion-section my-apps-section"}),n.businessExperienceCockpitsCollection.length>0&&o.push({title:u("My Cockpits"),name:"cockpits",content:s,selected:!0,className:"compass-scroll-accordion-section my-apps-section"}),t=new d({exclusive:!1,className:"divided",animated:!0,items:o}),n.accordion=t,t},buildHeader:function(){var t,n,i;return this.options.parentIcon&&(n=e.createElement("i",{class:"content-overlay-go-home fonticon "+h[this.options.parentIcon]}),new o({position:"bottom",target:n,className:"compass-small-tooltip",body:e.String.format(e.i18n("Back to {0}"),this.options.parentIcon)})),t=this.options.isDisableGoBack?e.createElement("i",{class:"content-overlay-back fonticon fonticon-chevron-left disable-go-back"}):e.createElement("i",{class:"content-overlay-back fonticon fonticon-chevron-left"}),this.options.isDisableGoBack||new o({position:"bottom",target:t,className:"compass-small-tooltip",body:e.i18n("Back")}),i=e.createElement("h1",{html:this.title}),{class:m+"-header",html:[n,t,this.icon?{tag:"i",class:"fonticon fonticon-"+this.icon}:null,i,this.options.closable?this._buildCloseIcon():null]}},_injectBuyButtonIfNeeded:function(){},_buildBuyButton:function(){},_buildRequestButton:function(){},_buildRequestedIcon:function(){},_buildCloseIcon:function(){var t=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-close"});return new o({position:"bottom",target:t,className:"compass-small-tooltip",body:u("Close")}),t},deleteGroup:function(e){},saveGroup:function(e){},editGroup:function(){},switchAppMode:function(){},_backClick:function(e){return!!(this.options.isDisableGoBack||e&&e.target.hasClassName("content-overlay-icon-more"))||(!(!e||!e.target.hasClassName("content-overlay-go-home"))||(this.back(e),this.dispatchEvent("onBackClick"),void s.clickBack()))},back:function(e){var t=this;return!(!e||!e.target.hasClassName("content-overlay-icon-more"))||(!(!e||!e.target.hasClassName("content-overlay-go-home"))||(this.container.addClassName(m+"-hidden"),setTimeout((function(){t.view&&t.view.destroy&&t.view.destroy(),t.destroy(),t=null}),301),void this.dispatchEvent("onBack")))},show:function(e){var t=this;this.render(),setTimeout((function(){t.container.removeClassName(m+"-hidden"),t.dispatchEvent("onShow")}),25)},clickMore:function(e){},clickBuy:function(e,t){},callGoHome:function(e){this.dispatchEvent("callGoHomes",e)},goHome:function(e,t){var n=this;return!!(!t&&e&&e.target.hasClassName("content-overlay-icon-more")&&e.target.hasClassName("content-overlay-icon-more")&&e.target.hasClassName("content-overlay-icon-more"))||(!(t||!e||!e.target.hasClassName("content-overlay-header"))||(this.container.addClassName(m+"-hidden"),this.dispatchEvent("onBack",e),void setTimeout((function(){n.destroy()}),301)))},_dispatchClose:function(e){this.dispatchEvent("callGoHomes",e),this.dispatchEvent("onClose")},addBuildRequestedIcon:function(){},rebuildRequestButton:function(){},requestRole:function(e){},unMask:function(){this.container.getElement(".mask")&&p.unmask(this.container.getElement(".mask").getParent())},mask:function(){this.container.getElement(".mask")||p.mask(this.container.getElement("#container-scroll"))}})})),define("DS/i3DXCompass/View/PortfolioDepth4View",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/PortfolioGenericView"],(function(e,t,n,i){"use strict";return i.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth4"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),e.itemsDefaultIconsuffix="small",this._parent(e)},_renderBuildItem:function(t){(t.render(),t.model.get("brand"))&&e.createElement("img",{class:"process-brand",src:n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/process/{0}_Logo.svg",t.model.get("brand")))}).inject(t.container.getElement(".portfolio-item-content"),"top");return t}})})),define("DS/i3DXCompass/Controls/PreferencesSetting",["UWA/Core","DS/i3DXCompass/Tools","DS/UIKIT/DropdownMenu","DS/i3DXCompass/Feature","DS/UIKIT/Input/Toggle","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Data","DS/i3DXCompass/Feature","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient"],(function(e,t,n,i,s,o,a,l,r){"use strict";var c=e.i18n;return n.extend({init:function(e){var t={multiSelect:!0,items:this.getItems(e.hasRole),target:e.target,customClass:e.className,events:e.events,shortcutEnabled:e.shortcutEnabled};this.fonticonCog=e.target,this._parent(t),this.trigger=e.trigger},buildSkeleton:function(){this._parent()},buildAppDisplay:function(){return{selectable:!1,id:"Apps-display",attributes:{"parent-data-type":"view-style"},fonticon:!i.getPreferences().viewStyle||i.getPreferences()&&"standard"===i.getPreferences().viewStyle?"view-big-tile":"view-small-thb",text:c("Layout"),items:[{selectable:!0,id:"view-style-small",selected:i.getPreferences()&&"small"===i.getPreferences().viewStyle,"data-value":"small","data-type":"view-style",fonticon:"view-small-thb",text:c("Compact")},{selectable:!0,selected:!i.getPreferences().viewStyle||i.getPreferences()&&"standard"===i.getPreferences().viewStyle,id:"view-style-standard","data-value":"standard","data-type":"view-style",fonticon:"view-big-tile",text:c("Large")}]}},getPlatformsItems:function(t){var n=this,i=[{selectable:!0,"data-type":"select-platform",id:a.toFramePlatform,"data-value":"currentPlatform",selected:a.toFramePlatform===a.selectedPlatform,text:c("Current Platform")}];return t.sort((function(e,t){return e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})),t.forEach((function(t){t.platformId!=a.toFramePlatform?i.push(n.getPlatformItem(t,t.platformId===a.selectedPlatform)):i[0].text=e.String.format(c("Current Platform ({0})"),t.displayName)})),i},getPlatformItem:function(e,t){return{selectable:!0,"data-type":"select-platform",id:e.platformId,"data-value":e.platformId,selected:t,text:e.displayName}},buildPlatformFilter:function(){return{selectable:!1,id:"role-display",attributes:{"parent-data-type":"select-platform"},fonticon:"cloud-alt fonticon-2x",text:c("Roles & Apps display"),items:this.getPlatformsItems(t.getTenantList())}},isDisplayClass:function(e){return!t.getIsMultiTenant()||l.isNativeApplicationEnvironment()?"hidden":""},getItems:function(e){var n=[];return e&&n.push(this.buildAppDisplay()),t.getIsMultiTenant()&&!l.isNativeApplicationEnvironment()&&n.push(this.buildPlatformFilter()),n},onClick:function(e,t,n){if(!0!==n){var s=this,o=i.getPreferences()?i.getPreferences():{};"select-platform"===t["data-type"]?(a.setSelectedPlatform(t.id,!0),s.dispatchEvent("onUpdateTenant"),r.getServicesByPlatform({platforms:[t.id],services:["3dcompass"],config:{url:a.registryUrl}}).then((function(e){e.length>0&&(a.myAppsBaseUrl=e[0].services[0].url+"/resources/AppsMngt/"),o.forceSelectTenant=t.id,i.setPreferences(o),s.dispatchEvent("fetchAppList")}),(function(){}))):"view-style"===t["data-type"]&&s.dispatchEvent("save",["viewStyle",t["data-value"]]),s.updateParentContent(t),s.hide()}},updateParentContent:function(e){var t=e["data-type"],n=e.fonticon,i=this.getContent().getElement('[parent-data-type="'+t+'"]');"view-style"===t&&this.updateFonticon(i,n)},updateFonticon:function(e,t){!e.querySelector(".fonticon-"+t)&&e.querySelector(".fonticon")&&(e.querySelector(".fonticon").className=e.querySelector(".fonticon").className.replace(/fonticon-[a-zA-Z-]*/g,"fonticon-"+t))},updateDropDownPref:function(){var e=this.getContent().getElement("#role-display");t.getTenantList().length>1&&!e&&this.addItem(this.getItems())},updateFonticonCorColor:function(e){e&&this.fonticonCog&&!this.fonticonCog.hasClassName("active")?this.fonticonCog.addClassName("active"):!e&&this.fonticonCog&&this.fonticonCog.hasClassName("active")&&this.fonticonCog.removeClassName("active")},onHide:function(){this.updateFonticonCorColor(!1)},onShow:function(){this.updateFonticonCorColor(!0)}})})),define("DS/i3DXCompass/View/ProcessesView",["UWA/Core","UWA/Utils","UWA/Class/View","DS/UIKIT/Tooltip","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/X3DContent","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/RoleView","DS/i3DXCompass/View/BusinessExperienceContentOverlayView","DS/i3DXCompass/View/BusinessMethodsListView","DS/i3DXCompass/View/CockpitsListView","DS/i3DXCompass/UsageTracker"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u){"use strict";var m=[];n.extend({tagName:"div",className:"item-view-process",domEvents:{click:"click"},click:function(){this.dispatchEvent("onItemClick",this.model)},render:function(){return this.container.setContent(this._getTemplate()),this},_getTemplate:function(){return[{class:"icon-wrapper",html:{class:"responsive",tag:"img",src:this.model.get("icon")?this.model.get("icon").startsWith("http")?this.model.get("icon"):l.getWebappsAssetUrl("i3DXCompass",this.model.get("icon")):l.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.png","PLATFORM"))}},{class:"item-view-content-wrapper",html:{class:"item-view-content",html:{class:"title",text:this.model.get("title")}}}]}});return n.extend({tagName:"div",className:"items-view-process",setup:function(e){return e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.renderOnce=s.debounce(this.render,500,!0).bind(this),this.collection&&(this.collection.addEvent("onAdd",this.renderOnce.bind(this)),this.collection.addEvent("onRemove",this.renderOnce.bind(this)),this.collection.addEvent("onChange",this.renderOnce.bind(this))),this.events=e.events,this},render:function(){var e=this;return this.collection&&this.collection.map&&this.container.setContent(this.collection.map((function(t){return new r({model:t,clickable:!0,events:{onItemClick:function(t){e.clickRole(t)}}}).render()}))),this},clickRole:function(e){e.get("id");var t=new c({title:e.get("title"),closable:this._isNotAddin(),model:e,info:!1,buy:!1,request:!1,additionalClassName:"portfolio portfolio-depth6 portfolio-background-white editMode",parentIcon:"ME",events:this.events});this._injectOverlayOnTop(t),t.show(),u.clickBusinessRole({businessRoleId:e.get("id"),businessRoleName:e.get("title")})},_isNotAddin:function(){return!(e.is(o.addinMode)&&e.is(o.addinMode.value))},_injectOverlayOnTop:function(e){var t=this.container.getParent().getElements(".content-overlay");e.inject(t[t.length-1]||this.container.getParent(".my-apps-panel"),"after"),m.push(e),e.show()}})})),define("DS/i3DXCompass/View/PortfolioDepth5View",["UWA/Core","DS/i3DXCompass/View/PortfolioGenericView","DS/i3DXCompass/View/RoleSeoView","DS/UIKIT/Input/Button","DS/UIKIT/Tooltip","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o){"use strict";return t.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth5"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),e.defaultIcon&&(this.defaultIcon=e.defaultIcon),this._parent(e)},_buildItem:function(t){var a=new n({model:t,defaultIcon:t.get("contact")?"{0}_eRole.png":this.defaultIcon,navigation:this.options.navigation,clickable:!0,events:{onItemClick:function(){t.get("contact")||this._onItemClick.apply(this,arguments)}.bind(this)}}).render(),l=t&&t.get("deployments")?["All"].concat(t.get("deployments")):null;if(l&&a.getContent().setAttribute("data-deployment",this._filterDeploymentsAndTranslate(l).map(function(e){return this._deploymentToCode(e)}.bind(this)).join(",")),!o.isMobileAppEnvironment()&&t.get("contact"))var r=new s({position:"bottom",className:"compass-tooltip",target:a.getContent(),trigger:"click touch",body:{class:"compass-tooltip-know-more",html:[{text:e.String.format(e.i18n("Know more about {0}"),t.get("portfolioName")||t.get("title"))},new i({value:e.i18n("Contact us"),className:"primary",events:{onClick:function(){r.hide(),this._onContactUsClick()}.bind(this)}})]},events:{onShow:function(){setTimeout((function(){r.hide()}),2e3)}}});return a}})})),define("DS/i3DXCompass/View/BusinessExperienceMainView",["UWA/Core","DS/UIKIT/Accordion","DS/UIKIT/Scroller","UWA/Class/View","DS/i3DXCompass/View/ProcessesView","DS/i3DXCompass/Collection/BusinessExperienceRolesCollection","DS/i3DXCompass/Collection/BusinessExperienceMethodsCollection","DS/i3DXCompass/Collection/BusinessExperienceCockpitsCollection","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/View/BusinessMethodsListView","DS/i3DXCompass/View/CockpitsListView","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Mask","DS/i3DXCompass/Feature"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h){"use strict";var f=[],g=e.i18n,v=i.extend({tagName:"div",className:"scroll-container",isRegistryFetched:!1,urlList:[],collectionReady:{},setup:function(t){var n=this,i=function(e){return{urlList:n.urlList,updateStep:n.updateCollectionStep.bind(n),onFailure:n.updateView.bind(n),onComplete:n.updateView.bind(n),type:e}};return this.businessExperienceRolesCollection=new o(null,i("businessExperienceRoles")),this.businessExperienceMethodsCollection=new a(null,i("businessExperienceMethods")),this.businessExperienceCockpitsCollection=new l(null,i("businessExperienceCockpits")),this.events=t.events,this.wrapper=e.createElement("div",{styles:{height:"100%"}}),this.buildSubView(),n.getBEUrls(),this._parent.apply(this,arguments)},updateView:function(){return"Ready"===this.isCollectionReady()?(this.unMask(),this.wrapper.setContent(this.buildMeTabContent()),this.buildAndGetScrollableView(this.wrapper)):"Empty"===this.isCollectionReady()?(this.unMask(),this.wrapper.setContent(this.buildEmptyView()),this.buildAndGetScrollableView(this.wrapper)):void 0},render:function(){return"Ready"===this.isCollectionReady()||"Empty"===this.isCollectionReady()?this.updateView():(this.mask(),this)},buildSubView:function(){var t=this;this.elements.ProcessesView=e.createElement("div",{styles:{height:"100%"},html:new s({events:this.events,collection:t.businessExperienceRolesCollection,additionalClassName:"items-roles-view compass-scroll-accordion-section my-roles-section"}).render()}),this.elements.BusinessMethodsListView=e.createElement("div",{styles:{height:"100%"},html:new d({collection:t.businessExperienceMethodsCollection,additionalClassName:"items-roles-view compass-scroll-accordion-section my-apps-section"}).render()}),this.elements.CockpitsListView=e.createElement("div",{styles:{height:"100%"},html:new p({collection:t.businessExperienceCockpitsCollection,additionalClassName:"items-roles-view compass-scroll-accordion-section my-apps-section"}).render()})},buildMeTabContent:function(){var e,n=[];return this.collectionReady.businessExperienceRoles&&"Ready"===this.collectionReady.businessExperienceRoles&&n.push({title:g("myroles"),name:"roles",className:"compass-scroll-accordion-section my-roles-section",content:this.elements.ProcessesView,selected:!0}),this.collectionReady.businessExperienceMethods&&"Ready"===this.collectionReady.businessExperienceMethods&&n.push({title:g("My Business Methods"),name:"apps",content:this.elements.BusinessMethodsListView,selected:!0,className:"compass-scroll-accordion-section my-apps-section"}),this.collectionReady.businessExperienceCockpits&&"Ready"===this.collectionReady.businessExperienceCockpits&&n.push({title:g("My Cockpits"),name:"cockpits",content:this.elements.CockpitsListView,selected:!0,className:"compass-scroll-accordion-section my-apps-section"}),e=new t({exclusive:!1,className:"divided",animated:!0,items:n}),this.accordion=e,e},buildEmptyView:function(){var t=e.createElement("div",{class:"portfolio-empty-view",styles:{"align-items":"normal"},html:{class:"portfolio-empty-view-content-wrapper",html:[{tag:"div",class:"portfolio-empty-view-content-title",html:[{text:g("You don't have any Roles related to Virtual Twin Experiences")}]},{tag:"a",class:"portfolio-item",target:"_blank",styles:{color:"#ff000000"},html:[{tag:"div",class:"portfolio-item-inner",styles:{height:"120px","margin-top":"20px","background-position":"center center",display:"flex","background-repeat":"no-repeat",position:"relative","background-image":"url("+u.getWebappsAssetUrl("i3DXCompass","images/Discover_Business_Experiences.png")+")","justify-content":"center","align-items":"center"},html:[this.options.service&&this.options.service.get?{tag:"button",text:g("Discover Virtual Twin Experiences"),class:"btn btn-root",styles:{width:"60%",height:"40%",color:"#fff","border-color":"#368ec4","background-color":"#42a2da"}}:null]}]}]}});return this.options.service&&this.options.service.get&&this.options.service.get("url")&&t.getElement("a").setAttribute("href",this.options.service.get("url")),t},getBEUrls:function(e){var t=this;f=[],this.resetCollectionReady(),c.getTenantList().forEach((function(e,n){(e.platformId&&!t.isCurrentPlatform()||e.platformId===r.selectedPlatform&&!t.isCurrentPlatform())&&f.push(e.platformId)})),r.getBusinessExperienceUrl({platform:f},(function(e){t.isRegistryFetched=!0,e&&Object.keys(e).length>0?(t.urlList=e,t.businessExperienceRolesCollection.fetch({urlList:t.urlList}),t.businessExperienceMethodsCollection.fetch({urlList:t.urlList}),t.businessExperienceCockpitsCollection.fetch({urlList:t.urlList})):(t.collectionReady={businessExperienceRoles:"Empty",businessExperienceMethods:"Empty",businessExperienceCockpits:"Empty"},setTimeout((function(){t.updateView()}),10))}))},updateCollectionStep:function(e,t){var n=this;this.collectionReady[e]=t,!1!==this.isCollectionReady()&&setTimeout((function(){n.updateView()}),10)},resetCollectionReady:function(){this.collectionReady={businessExperienceRoles:"",businessExperienceMethods:"",businessExperienceCockpits:""}},isCollectionReady:function(){var e=this,t="Pending";return Object.keys(this.collectionReady).forEach((function(n,i){e.collectionReady[n]?("Ready"===e.collectionReady[n]&&""!==t||"Empty"===e.collectionReady[n]&&""!==t&&"Ready"!==t)&&(t=e.collectionReady[n]):t=e.collectionReady[n]})),""===t&&(t=!1),t},unMask:function(){this.container.getElement(".mask")&&m.unmask(this.container.getElement(".mask").getParent())},mask:function(){this.container.getElement(".mask")||m.mask(this.container)},buildAndGetScrollableView:function(t){e.createElement("div",{class:"scroll-container"});return new n({element:t}).inject(this.container),this.container},isCurrentPlatform:function(){return h.getPreferences()&&"currentPlatform"===h.getPreferences().forceSelectTenant}});return v})),define("DS/i3DXCompass/Collection/SuggestionList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Data","DS/i3DXCompass/Model/Suggestion"],(function(e,t,n,i){"use strict";var s={model:i,setup:function(){this.added=[]},sync:function(e,t,i){var s;if("read"===e)s=n.request({url:n._getSuggestionsUrl(),onComplete:function(e){e&&0===e.code?i&&i.onComplete&&i.onComplete(e):i&&i.onFailure&&i.onFailure(e)},onFailure:function(e){i&&i.onFailure&&i.onFailure(e)}});return s},parse:function(e){return e.suggestions},set:function(){this.added.length=0,this._parent.apply(this,arguments),this.added.length>0&&this.dispatchEvent("onMultipleAdd",[this.added])},onAdd:function(e){this.added.push(e)}};return t.extend(s)})),define("DS/i3DXCompass/View/CompassWrapperView31",["UWA/Core","UWA/Utils/Client","UWA/Class/View","UWA/Controls/Accordion","DS/UIKIT/Scroller","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/InstallManager","DS/i3DXCompass/TopBarManager","DS/i3DXCompass/Collection/AppList","DS/i3DXCompass/View/AppListView","DS/i3DXCompass/View/SuggestionListView","DS/i3DXCompass/Controls/Message","DS/i3DXCompass/Controls/Settings","DS/i3DXCompass/Controls/ScrollAccordion","DS/i3DXCompass/Controls/Search","DS/i3DXCompass/Controls/IframeLoader","DS/UIKIT/Modal","DS/UIKIT/Spinner","DS/UIKIT/Input/Button","DS/i3DXCompass/CacheManager","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Types","UWA/Utils/Cookie","DS/i3DXCompass/Controls/Compass","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/UIKIT/Toggler","DS/UIKIT/Input/Toggle","DS/i3DXCompass/View/RoleView","DS/i3DXCompass/View/ContentOverlayView","DS/i3DXCompass/MarketingData","UWA/Class/Model","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/CheckOutView","DS/i3DXCompass/View/BasketView","DS/i3DXCompass/View/PortfolioDepth3View","DS/i3DXCompass/View/PortfolioDepth4View","DS/i3DXCompass/View/PortfolioDepth2View","DS/i3DXCompass/View/PortfolioDepth1View","DS/i3DXCompass/Collection/PortfolioCollection","DS/i3DXCompass/View/PortfolioDepth5View","DS/i3DXCompass/View/PortfolioDepth6View","DS/i3DXCompass/View/AppView","DS/i3DXCompass/Model/GroupModel","DS/UIKIT/Accordion","DS/UIKIT/SuperModal","DS/i3DXCompass/Feature","DS/UIKIT/DropdownMenu","DS/UIKIT/Mask","DS/i3DXCompass/View/ServicesView","DS/i3DXCompass/Collection/PortfolioRoleCollection","DS/i3DXCompass/View/PortfolioServicesView","DS/i3DXCompass/View/PortfolioAsBusinessView","DS/i3DXCompass/Controls/PreferencesSetting","DS/i3DXCompass/Controls/FamilyAppSettings","DS/i3DXCompass/View/BusinessExperienceMainView","DS/i3DXCompass/View/CockpitsListView","DS/i3DXCompass/View/BusinessMethodsListView","DS/i3DXCompass/Collection/CockpitsByRolesCollection","DS/i3DXCompass/Collection/BusinessExperienceGenericCollection","DS/i3DXCompass/View/BusinessExperienceContentOverlayView","DS/i3DXCompass/Modal/CEFModal","DS/i3DXCompass/Feature","DS/i3DXCompass/Model/App"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h,f,g,v,C,y,b,S,w,E,D,A,I,N,k,_,P,T,O,U,x,L,R,M,F,X,B,W,V,q,j,H,Q,z,G,K,J,Z,Y,$,ee,te,ne,ie,se,oe,ae,le,re,ce,de,pe,ue,me){"use strict";var he=e.i18n,fe="ME",ge="0-0",ve="",Ce="X3DPRIN_AP",ye=0,be=0,Se=[],we={},Ee=!0,De=!0,Ae=!1,Ie="X3DINNO_AP",Ne=a.debounce((function(e){e&&(J.compassPanelRestoreDefaultSize(),setTimeout((function(){document.body.getElement(".topbar-compass")?document.body.getElement(".topbar-compass.compass-v3").show():document.body.getElement("#compass-container")&&(document.body.getElement("#compass-container.compass-v3").show(),document.querySelector(".compass-v3.top-bar-overlay.add-top-bar")&&(document.querySelector(".compass-v3.top-bar-overlay.add-top-bar").show(),D.publish("compassEvent",{topBarOverlay:"blue",size:"50px"}))),document.querySelector(".compass-standalone-login")&&document.querySelector(".compass-standalone-login").show(),D.publish("compassLogo",{hide:!1}),event&&"toggleSelection"!==event||(Ee=!0)}),100)),Oe.refreshBascketFooter()}),100,!1),ke=a.debounce((function(e){document.body.getElement(".topbar-compass")?document.body.getElement(".topbar-compass.compass-v3").hide():document.body.getElement("#compass-container")&&(document.body.getElement("#compass-container.compass-v3").hide(),document.querySelector(".compass-v3.top-bar-overlay.add-top-bar")&&(document.querySelector(".compass-v3.top-bar-overlay.add-top-bar").hide(),D.publish("compassEvent",{topBarOverlay:"white",size:"47px"}))),document.querySelector(".compass-standalone-login")&&document.querySelector(".compass-standalone-login").hide(),D.publish("compassLogo",{hide:!0}),Ee=!1,Te()}),100,!1),_e=function(e,t){Ne(e),t?(t.pop(),J.supportPushState()&&J.needPushState()&&a.manageSeoTags(t[t.length-1])):this._resetWorldNavigation(),Oe.refreshBascketFooter()},Pe=function(e){e&&e.stopPropagation(),Se.length>0&&(Se.reverse().forEach((function(e,t){setTimeout((function(){e.back()}),30*t)})),Se=[],Oe.refreshBascketFooter(),k.goHome({pageTitle:fe,parentPage:fe}))},Te=function(){var e=document.body.getElements(".compass-v3.content-overlay video");e.length>1&&e.pop(),e.forEach((function(e){e.pause()}))},Oe={tagName:"div",className:"windows10"===a.getOs()?"wind10 my-apps-panel compass-v3 ":"my-apps-panel compass-v3",domEvents:{"click .compass-close":"close","click .compass-nav-close-icon":"close","click .exp-item":"clickApp","click .suggestion-item":"clickSuggestion","click .settings-img":"clickSettings","click .expand-img":"clickExpand","click .all-roles-btn":"toggleAllRoles","click .expanded-role-close, .expanded-role-title":"hideRoleDetail","click .expanded-role-info":"clickRoleInfo","click .app-item":"clickApp"},canShowOptionCotent:!1,currentQuadrant:"",itemsPerLine:0,compassMainNav:3,compassSecondNav:0,setup:function(t){a.isSupportQuickLink()&&(this.container.className+=" support-quick-link"),this.options=t,l.addEvents({onShowMessage:this.showMessage.bind(this),onHideMessage:this.hideMessage.bind(this)}),e.is(E._getUser())||this.container.addClassName("compass-public"),this.roleV34Collection=new ee,D.subscribe("compassCloseV32TopBar",(function(e){Pe(),Ne(!0)})),this.options.reLoadQuadrant&&(this._reLoadQuadrant=a.debounce(this.options.reLoadQuadrant,500,!0).bind(this)),this.collections={grantedRoles:new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!0}]}),visibleRoles:new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!0},{key:"visible",value:!0}]})},this.preferencesCollection=t.preferencesCollection,this.collections.cockpitsByRolesCollection=new ce(null,{filterType:"cockpitBusiness",master:this.collection}),this.collections.businessMethodCollection=new ce(null,{filterType:"businessMethod",master:this.collection}),this.views={},this.sugCollection=t.sugCollection,this.container.addEvent("callGoHomes",Pe),this._renderContentOnToggleOnce=a.debounce(this._renderContentOnToggle,100,!1).bind(this),this._savePreferencesOnce=a.debounce(this._savePreferences,1e3,!1).bind(this)},updateEnableWidgetDrag:function(t,n,i,s){if(!n&&s&&(n=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]).find((function(e){return e.get("id")===s}))),n&&n.isFamily()&&(n=n.getChildrenForFamilyApp.Widget||n),i&&n.get("platforms").length>1){var o=e.clone(n.toJSON());o.platformId=""}a.enableWidgetDrag(t,o||n.toJSON())},createGroup:function(e,t){var n,i,s,o=this;s=o.options.preferencesCollection.getNameNewGroup(),"Favorite"===e.id?i=o.collections.favorite.map((function(e){return e.get("id")})):e.type&&"Group"!==e.type||!o.options.preferencesCollection.find((function(t){return t.get("id")===e.id&&"group"===t.get("type")}))?e.type&&"Role"!==e.type||!o.collections.visibleRoles.find((function(t){return t.get("id")===e.id}))?e.type&&"App"!==e.type||(i=[e.id]):i=o.collections.visibleRoles.find((function(t){return t.get("id")===e.id})).get("appList"):i=o.options.preferencesCollection.find((function(t){return t.get("id")===e.id&&"group"===t.get("type")})).get("appList"),"Favorite"===t?i=i.concat(o.collections.favorite.map((function(e){return e.get("id")})).get("appList")):t.type&&"Group"!==t.type||!o.options.preferencesCollection.find((function(e){return e.get("id")===t.id&&"group"===e.get("type")}))?t.type&&"Role"!==t.type||!o.collections.visibleRoles.find((function(e){return e.get("id")===t.id}))?t.type&&"App"!==t.type||i.push(t.id):i=i.concat(o.collections.visibleRoles.find((function(e){return e.get("id")===t.id})).get("appList")):i=i.concat(o.options.preferencesCollection.find((function(e){return e.get("id")===t.id&&"group"===e.get("type")})).get("appList")),n=new z({id:"GR_"+(new Date).getTime(),title:s,type:"group",appList:i,order:o.options.preferencesCollection.length+1}),this.options.preferencesCollection.add(n),this.options.preferencesCollection.save(),this.clickRole(n,!1,!0),we["0-0"]&&!we["0-0"].getElement('[data-id="'+n.get("id")+'"]')&&new O({model:n,additionalClassName:"drag-app",clickable:!0,events:{onItemClick:function(e,t){o.clickRole(e,!1,!0)}}}).render().inject(we["0-0"].getElement(".items-roles-view"))},addAppMain:function(e){var t=this;if(we["0-0"]&&!we["0-0"].getElement('[data-id="'+e+'"]')){var n=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]).find((function(t){return t.get("id")===e}));new Q({model:n,clickable:!0,appsCollection:this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e}]),additionalClassName:"app-item drag-app",events:{onItemClick:function(e,n){t.clickApp(e,n)},onClickSettings:t.clickSettings.bind(t)}}).render().inject(we["0-0"].getElement(".items-roles-view"))}},render:function(){var t=this.container;return(this.maskElmt=e.createElement("div",{class:"compass-loading",html:new S({visible:!0,className:"compass-spinner"})})).inject(t),t.hide(),this},renderAppsView:function(t){var n,i,s,l=this,r=this.elements,c=this.container,d=new f,p=this.collections,h=this.views;t?this.sectionData=t:t=this.sectionData,p.favorite=new u(null,{master:this.collection,comparator:"favoriteOrder",filters:[{key:"isFavorite",value:!0},{key:"visibleQuadrant",value:!0}]}),p.platformRoles=new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!1},{key:"visible",value:!0}]}),p.expandedRole=new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]}),p.apps={},p.lma={},s=p.grantedRoles.getSelectedRoleApps(),h.favorite=new m({collection:p.favorite,customFilters:{appIds:s},customClass:"favorite",favorite:!0,draggable:!0}),h.visibleRoles=new m({collection:p.visibleRoles,customClass:"roles",draggable:!0}),h.platformRoles=new m({collection:p.platformRoles,customClass:"roles not-available-roles",draggable:!1}),h.expandedRole=new m({collection:p.expandedRole,customFilters:{appIds:[]},draggable:!0}),h.apps={},h.lma={},this.options.sectionData=t,r.error&&(r.error.destroy(),delete r.error),this.forEachQuadrant((function(e){p.apps[e]=new u(null,{master:l.collection,comparator:"title",filters:[{key:"quadrant",value:e},{key:"lma",value:!1}]}),h.apps[e]=new m({collection:p.apps[e],customFilters:{appIds:s},customClass:e,draggable:!0}),p.lma[e]=new u(null,{master:l.collection,comparator:"title",filters:[{key:"quadrant",value:e},{key:"lma",value:!0}]}),h.lma[e]=new m({collection:p.lma[e],customClass:a.isCompassV2()?"favorite":e})})),t.eservices&&t.eservices.data&&t.eservices.data.length>0&&(p.eservices=new o(t.eservices.data),h.eservices=new $({collection:p.eservices})),this._needToShowMyRoles()||this.container.addClassName("compass-public"),c.addEvent("resize",(function(e){l.resizeAccordionData(e)})),a.isCompassV3()||(n=new C({events:{onSearch:function(e){l.searchInViews(e)}}}),!e.is(E._getUser())&&n&&n.container&&n.container.setStyle("visibility","hidden"),a.isCompassV32()&&n&&n.container&&n.container.hide(),n.inject(c),r.search=n),a.isCompassV32()||a.isCompassV34()||(i=this.buildAccordion());var g=[this.buildCompassNavMain(),this.buildSearch(),this.buildCompassNav(),this.builCompassContent()];e.createElement("compass-layout",{html:g}).inject(c),J.isBuyEnabled()&&this.buildCompassFooter(),d.inject(c),this.appsAccordion=i,this.message=d,this.resizeAccordionData(),p.grantedRoles.addEvent("onChange:active",this.changeRoles.bind(this)),p.grantedRoles.addEvent("onChange:appList",this.changeRoles.bind(this)),p.visibleRoles.addEvent("onChange:appList",this.changeRolesVisible.bind(this)),p.grantedRoles.addEvent("onRemove",this.changeRoles.bind(this)),p.visibleRoles.addEvent("onRemove",this.changeRolesVisible.bind(this)),p.grantedRoles.addEvent("onMultipleAdd",this.changeRoles.bind(this)),p.visibleRoles.addEvent("onMultipleAdd",this.changeRolesVisible.bind(this)),p.cockpitsByRolesCollection.addEvent("onChange:appList",this.changeRolesVisible.bind(this)),p.cockpitsByRolesCollection.addEvent("onRemove",this.changeRolesVisible.bind(this)),p.cockpitsByRolesCollection.addEvent("onMultipleAdd",this.changeRolesVisible.bind(this)),p.businessMethodCollection.addEvent("onChange:appList",this.changeRolesVisible.bind(this)),p.businessMethodCollection.addEvent("onRemove",this.changeRolesVisible.bind(this)),p.businessMethodCollection.addEvent("onMultipleAdd",this.changeRolesVisible.bind(this)),"dsrtv:"===window.location.protocol?l._renderContent():l.roleV34Collection.fetchPromise().then(l._renderContent.bind(l),l._renderContent.bind(l))},_isBusinessExperienceAvailable:function(){return a.isBusinessExperienceAvailable()||this._getInnovateService()},_getInnovateService:function(){return this.services&&this.services.length>0&&this.services.find((function(e){return e.id===Ie}))},_renderContent:function(){var t=this;J.getBrandFromPacking()||(t.collections.grantedRoles.forEach((function(e){var n=t.roleV34Collection.find((function(t){return t.get("acronym")===e.get("process")&&!t.get("contact")}));n&&e.set("brand",n.get("brand"))})),t.collections.platformRoles.forEach((function(e){var n=t.roleV34Collection.find((function(t){return t.get("acronym")===e.get("process")&&!t.get("contact")}));n&&e.set("brand",n.get("brand"))})));var n=document.querySelector("compass-nav-main div");new P({container:n,activeClass:"active",ignored:["disabled","not-selectable"],selected:function(){var n=e.is(E._getUser())&&this._needToShowMyRoles()?0:3,i=t.container.getElement("compass-nav-second");return J.supportPushState()&&window.location.pathname.indexOf("compass-world")>-1&&(n=3),0===n?(i.getElements(".tab-item")[0]&&i.getElements(".tab-item")[0].click(),i.hide(),t.container.hasClassName("compass-second-nav-hidden")||t.container.addClassName("compass-second-nav-hidden")):3===ge&&i&&i.isHidden()&&(i.show(),t.container.removeClassName("compass-second-nav-hidden")),n}.call(this),events:{onToggle:function(e,n,i){i&&(ye=n,t._renderContentOnToggleOnce(e,n,i),De&&(De=!1))}}});var i=document.querySelector("compass-nav-second div");new P({container:i,activeClass:"active",ignored:["disabled","not-selectable"],selected:!e.is(E._getUser())&&document.body.hasClassName("compass-standalone-v3")?1:0,events:{onToggle:function(e,n,i){i&&(be=n,t._renderContentOnToggleOnce(e,n,i))}}}),t.roleV34Collection.size()>0&&t.resetCache()},_setWorldNavigation:function(){if(J.supportPushState()&&!De){var e=window.location.pathname;-1===e.indexOf("compass-world")&&history.pushState("","",(e+"/compass-world").replace(/\/\//g,"/"))}},_resetWorldNavigation:function(){if(J.supportPushState()&&!De){var e=window.location.pathname;if(e.indexOf("compass-world")>-1){var t=e.split("compass-world")[0];t&&history.pushState("","",t.replace("//","/"))}}},updateCompanyNav:function(e){var t,n,i=this.container.getElement("compass-nav-main");i&&(n=i.querySelector(".fonticon-building-office")?i.querySelector(".fonticon-building-office").getParent("a"):"",t=i.querySelector(".fonticon-user")?i.querySelector(".fonticon-user"):i.querySelector(".fonticon-globe"),e&&n&&n.hasClassName("hidden")?n.removeClassName("disabled").removeClassName("hidden"):!1===e&&n&&!n.hasClassName("hidden")&&(n.addClassName("disabled hidden"),t&&t.click()))},updateSecondNav:function(){var e=this,t=this.container.getElement("compass-nav-second");"2-0"!==ge&&"2-1"!==ge&&e.services&&e.services.length>0?(t.show(),e.container.removeClassName("compass-second-nav-hidden")):e.services&&0===e.services.length&&(t.hide(),e.container.addClassName("compass-second-nav-hidden"))},_renderContentOnToggle:function(e){var t=this,n=this.container.getElement("compass-nav-second");if(ge=ye+"-"+be,e){var i,s=ve!==ge;"0-0"===ge||"0-1"===ge?(n.getElements(".tab-item")[0]&&n.getElements(".tab-item")[0].click(),n.hide(),t.container.hasClassName("compass-second-nav-hidden")||t.container.addClassName("compass-second-nav-hidden")):("3-1"===ge||"3-0"===ge)&&n&&n.isHidden()?(n.show(),t.container.removeClassName("compass-second-nav-hidden")):"2-0"!==ge&&"2-1"!==ge||!n||n.isHidden()||(n.hide(),t.container.addClassName("compass-second-nav-hidden")),we[ge]||("0-0"===ge?i=t.buildMeTabContent():"1-0"===ge?i=t.buildWeTabContent():"2-0"===ge||"2-1"===ge?i=t.buildCompanyTabContent():"3-0"===ge?i=t.buildWorldTabContent2():"3-1"===ge?i=t.showAsBusiness():t._isBusinessExperienceAvailable()&&(i=new oe({service:t._getInnovateService(),events:{callGoHomes:function(e){Pe(e)},onClose:function(){t.dispatchEvent("onClose")},onBack:function(){Ne(!0)},onShow:function(){ke(!0)}}}).render()),we[ge]=i),this.services=new o(t.options.sectionData&&t.options.sectionData.services&&t.options.sectionData.services.data||[]),0===ge.indexOf("0-")?(fe="ME",t._resetWorldNavigation()):0===ge.indexOf("1-")?(fe="WE",t._resetWorldNavigation()):0===ge.indexOf("2-")?(fe="COMPANY",t.container.addClassName("compass-second-nav-hidden"),t._resetWorldNavigation()):(0===ge.indexOf("3-")||0===ge.indexOf("4-"))&&(fe="WORLD"),!0!==Ae||"WORLD"!==fe||t.container.getParent().hasClassName("compass-footer-visible")?!1===Ae&&"WORLD"!==fe&&t.container.getParent().hasClassName("compass-footer-visible")&&t.container.getParent().removeClassName("compass-footer-visible"):t.container.getParent().addClassName("compass-footer-visible");var a={pageTitle:fe,parentPage:fe};"ME"===fe&&(J.getPreferences()&&J.getPreferences().viewStyle?a.title=J.getPreferences().viewStyle:a.title="standard"),s&&(ve=ge,k.trackPageView(a))}document.querySelector("compass-content").setContent(we[ge]);var l=this.search&&this.search.value.toLowerCase();this.search&&(""!==l&&this.search.focus(),t.filterViews("",l),this.inputSearchQuery&&this.inputSearchQuery.query&&(this.completeInputSearch(this.inputSearchQuery),this.inputSearchQuery=""))},showBusinessDetail:function(){var t=this,n=new o(t.options.sectionData&&t.options.sectionData.services&&t.options.sectionData.services.data||[]);return n.forEach((function(e){var t=e.get("id");x.services[t]&&(e.set("icon",x.services[t].icon),e.set("subTitle",x.services[t].description))})),t.buildAndGetScrollableView(e.createElement("div",{class:"world-tab",html:new te({usageEntity:"trading",hideDescription:!0,collection:n,events:{onItemClick:t._onClickService.bind(t)}}).render()}))},showBusinessDetailV32:function(e,t){var n,i,s=this,o=[e.toJSON()],a=this.services;this._getInnovateService()&&a.remove(Ie),a.forEach((function(e){var t=e.get("id");x.services[t]&&(e.set("icon",x.services[t].icon),e.set("subTitle",x.services[t].description))})),n=new te({usageEntity:"trading",hideDescription:!0,collection:a,events:{onItemClick:s._onClickService.bind(s)}}),i=new U({title:e.get("title"),closable:s._isNotAddin(),parentIcon:fe,model:e,view:n,buy:!1,events:{callGoHomes:function(e){Pe(e)},onClose:function(){s.dispatchEvent("onClose")},onGoHome:function(e){i.goHome(e)},onBack:_e.bind(this,t,o),onBackClick:function(){Se.pop()},onShow:function(){ke(t)}}}),n.render(),this._injectOverlayOnTop(i)},showAsBusiness:function(){var t=this,n=this._getInnovateService(),i="business",s=q.extend({model:L,url:R.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/data/business1.json",i))}),l=q.extend({model:L,url:a.getPortfolioApiTemplateUrl("world-business")}),r=new s,c=new l,d=new o,p=this.buildAndGetScrollableView(e.createElement("div",{text:"..."})),u=function(){n?x.services[Ie]&&(r.get(Ie).set("icon",x.services[Ie].icon),r.get(Ie).set("url",n.get("url")||n.get("launchUrl"))):r.remove(Ie);var s=r.toJSON();c.toJSON().forEach((function(e){s.push(e)})),d.add(s);var o=t.buildAndGetScrollableView(e.createElement("div",{class:"world-tab",html:new ne({usageEntity:i,hideDescription:!0,collection:d,itemsDefaultIconsuffix:"small",hideServices:!(t.services&&t.services.length>0),hideBusinessExperience:!!n,events:{onItemClick:function(e,n){"business_experiencesDetail"===e.get("childrenType")?t._onClickService(e):"TRADING"===e.get("childrenType")?t.showBusinessDetailV32(e,!0):"roles"===e.get("childrenType")?(t.showPlaygoundDetail(e,!0,[e.toJSON()],!0),J.compassPanelFullSize()):t._onClickService(e)}}}).render()}));p.setContent(o),t._navigateToContent(o)};return r.fetchPromise().then((function(){c.fetchPromise().then(u,(function(){e.log("ko"),p.setContent(t.showBusinessDetail())}))})),p},_onClickService:function(t){var n="Widget"===t.get("type")?t.get("launchUrl"):t.get("url");"undefined"!=typeof compassRichWithCef&&"dsrtv:"!==window.location.protocol?D.publish("launchAppCallback",e.merge(t.toJSON(),{launchInfos:t.get("url")})):("X3DPSLY_AP"!==t.get("id")&&t.get("id")!==Ce||!0!==e.is(r.addinMode)||(n=this._manageAddinUrl(n,t.get("id"))),a.isSameApp(n,window.location)||-1!==n.indexOf("addinmode")?window.open(n,"_self"):window.open(n,"_blank"))},_manageAddinUrl:function(e,t){var n=r.addinMode&&r.addinMode.value;return r.cloud||(e=this._addQueryParams(e,"lockedapp",!0)),n&&(e=this._addQueryParams(e,"addinmode",n)),n&&"catiav5"===n.toLowerCase()&&(e=t===Ce?this._addQueryParams(e,"source","catiav5"):this._addQueryParams(e,"embeddedProfileId","CATIAV5")),n&&"xvl"===n.toLowerCase()&&(e=t===Ce?this._addQueryParams(e,"source","xvl"):this._addQueryParams(e,"embeddedProfileId","XVL")),e},_addQueryParams:function(e,t,n){var i=-1===e.indexOf("?")?"?":"&";return e+i+t+"="+n},buildCloseIcon:function(){var t;return this.options.closable&&(t=e.createElement("i",{class:"compass-nav-close-icon fonticon fonticon-close compass-close"}),new _({position:"bottom",className:"compass-small-tooltip",target:t,body:he("Close")})),t},buildSearch:function(){var t=this;return this.clearSearchIcon=e.createElement("i",{class:"fonticon fonticon-clear hidden",events:{click:function(){t.clearSearchIcon.addClassName("hidden"),t.search.value="",t.filterViews("",""),t.search.focus()}}}),this.search=e.createElement("input",{tag:"input",class:"form-control compass-search-text",placeholder:he("Search"),events:{drop:function(e){var n=e.dataTransfer.getData("text");t.filterViews("",n),t.openSectionsCompassSearch(n),n.length>0&&t.clearSearchIcon.removeClassName("hidden")},keyup:function(){var e=this.value.toLowerCase();t.filterViews("",e),t.openSectionsCompassSearch(e),e.length>0&&t.clearSearchIcon.removeClassName("hidden")}}}),new _({position:"left",target:t.clearSearchIcon,className:"compass-small-tooltip",body:he("Clear Search")}),{tag:"compass-nav-search",html:this.options.buildSearch?{class:"input-group",html:[this.search,this.clearSearchIcon]}:e.createElement("div",{class:"search-content",styles:{height:"32px",display:"none"}})}},buildWeTabContent:function(){var t,n,i,s=this,a=new(o.extend({model:L,url:R.getWebappsAssetUrl("i3DXCompass","v3.1/data/industry.json")}));a.fetch({async:!1,onComplete:function(){t=a.get("01_TransportationMobility");var e=o.extend({model:L,url:R.getWebappsAssetUrl("i3DXCompass","v3.1/data/solution.json"),parse:function(e){return e.filter((function(e){return t.get("solutions").indexOf(e.id)>-1}))}});(n=new e).fetch({async:!1,onComplete:function(){var e=o.extend({model:L,url:R.getWebappsAssetUrl("i3DXCompass","v3.1/data/process.json"),parse:function(e){var t=[];return n.forEach((function(n){e.filter((function(e){return e.granted&&n.get("processes").indexOf(e.id)>-1})).forEach((function(e){t.push(e)}))})),t}});(i=new e).fetch()}})}});var l=new B({entity:"WE",itemsTitle:he("Processes"),model:t,collection:i,hideDescription:!0,events:{onItemClick:function(e,t){s.showProcessDetail(e,!0,!1)}}});return this.buildAndGetScrollableView(e.createElement("div",{html:[{class:"marketing-header",html:[{tag:"header",class:"subheader",text:t.get("title")}]},l]}))},buildMeTabContent:function(){var t,n=this,i=new ce(null,{filterType:"cockpitBusiness",master:this.collections.cockpitsByRolesCollection}),s=new ae({collection:i,additionalClassName:"items-roles-view",events:{onShowCockpitsSection:function(){t&&t.getItem("cockpits")&&t.getItem("cockpits").elements&&(t.getItem("cockpits").elements.container&&t.getItem("cockpits").elements.container.removeClassName("hidden"),t.getItem("cockpits").elements.content&&t.getItem("cockpits").elements.content.removeClassName("hidden"))}}}),o=new le({collection:this.collections.businessMethodCollection,additionalClassName:"items-roles-view",events:{onShowBusinessMethodsSection:function(){t&&t.getItem("businessMethods")&&t.getItem("businessMethods").elements&&(t.getItem("businessMethods").elements.container&&t.getItem("businessMethods").elements.container.removeClassName("hidden"),t.getItem("businessMethods").elements.content&&t.getItem("businessMethods").elements.content.removeClassName("hidden"))}}}),l=this.options.sectionData;if(e.is(E._getUser())&&"dsrtv:"!==window.location.protocol){n.cockpitsByRolesCollection=new re(null,{master:i});var c=n.cockpitsByRolesCollection.formatRolesToString(n.collections.visibleRoles.filter((function(e){return u||!u&&-1===e.get("id").indexOf("RAP-")})),a.getShowCustom());n.cockpitsByRolesCollection._lastRoles!==c?(n.cockpitsByRolesCollection._lastRoles=c,this.cockpitsByRolesCollection.updateTenantList((function(){s.collection.reset(),n.cockpitsByRolesCollection.reset(),s.collection.add(n.collections.cockpitsByRolesCollection.toJSON()),n.cockpitsByRolesCollection.fetch({url:n.cockpitsByRolesCollection.getFirstURL(),urlParams:{platforms:r.selectedPlatform,roles:c}})}))):s.render()}var d,p,u=a.getShowCustom(),m=[],h=[],f=n.collections.visibleRoles.filter((function(e){return u||!u&&-1===e.get("id").indexOf("RAP-")})).map((function(e){return new O({model:e,clickable:!0,appsCollection:n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e.get("appList")}]),additionalClassName:!0!==e.get("isRoleBE")?"drag-app role":"role",disableSeoTags:!0,events:{onItemClick:function(e,t){!0===e.get("isRoleBE")?n.clickRoleBE(e):n.clickRole(e,!1,!0)}}}).render()})),g=e.createElement("div",{styles:{height:"100%"},html:{class:"items-roles-view compass-scroll-accordion-section my-roles-section",html:f}}),v=e.createElement("div",{styles:{height:"100%"},html:{class:"items-roles-view compass-scroll-accordion-section favorite my-favorite-apps-section "+(n.collections.favorite&&0===n.collections.favorite.length?"empty":""),html:(p={},n.collections.favorite.forEach((function(e){var t=e.isChildFamilyApp()&&e.getParentForChildrenFamilyApp()||"";p[t.id]||m.push(new Q({model:t||e,clickable:!0,additionalAttribute:{"data-favorite-order":e.get("favoriteOrder")},additionalClassName:"app-item drag-app",additionalClassNameImage:(t||e).get("brand")?"is-"+(t||e).get("brand").replace(" ","-"):"",events:{onItemClick:function(e,t){n.clickApp(e,t)},onClickSettings:n.clickSettings.bind(n)}}).render()),t&&!p[t.id]&&(p[t.id]=e)})),m.push(e.createElement("li",{class:"clearfix"})),m)}}),C=e.createElement("div",{styles:{height:"100%"},html:{class:"items-roles-view compass-scroll-accordion-section my-apps-section",html:(n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]).forEach((function(e){e.isChildFamilyApp()||h.push(new Q({model:e,clickable:!0,additionalClassName:"app-item drag-app",additionalClassNameImage:e.get("brand")?"is-"+e.get("brand").replace(" ","-"):"",events:{onItemClick:function(e,t){n.clickApp(e,t)},onClickSettings:n.clickSettings.bind(n)}}).render())})),h)}}),y=e.createElement("div",{styles:{height:"100%"},html:s}),b=e.createElement("div",{styles:{height:"100%"},html:o});d=e.createElement("div",{class:"delete-favorite hide",attributes:{title:he("clickRemoveFavorite")},styles:{float:"right"},html:{tag:"span",class:"fonticon fonticon-trash",styles:{display:n.collections.favorite.length>0?"":"none"}}});var S=[{title:he("myroles"),name:"roles",className:"compass-scroll-accordion-section my-roles-section",content:g,selected:!l.roles.closed}];S.push({title:he("My Cockpits"),name:"cockpits",className:"compass-scroll-accordion-section my-apps-section my-cockpits-section"+(this.collections.cockpitsByRolesCollection.length>0?"":" hidden"),content:y,selected:!(!J.getPreferences()["me-cockpits-section"]||!1!==J.getPreferences()["me-cockpits-section"].closed)}),S.push({title:he("My Favorite Apps")+d.outerHTML,name:"favorite",content:v,selected:!l.favorite.closed,className:"compass-scroll-accordion-section favorite my-favorite-apps-section",handler:function(){event.target.hasClassName("fonticon-trash")&&(event.stopPropagation(),n._confirmModal())}}),S.push({title:he("My Apps"),name:"apps",content:C,selected:!l.north.closed,className:"compass-scroll-accordion-section my-apps-section"}),S.push({title:he("My Business Methods"),name:"businessMethods",className:"compass-scroll-accordion-section my-apps-section my-business-methods-section"+(this.collections.businessMethodCollection.length>0?"":" hidden"),content:b,selected:!(!J.getPreferences()["me-businessMethods-section"]||!1!==J.getPreferences()["me-businessMethods-section"].closed)}),t=new G({exclusive:!1,className:"divided",items:S}),n.accordion=t;var w=n.buildAndGetScrollableView(e.createElement("div",{html:t}));return d=n.accordion.getContent().getElement(".accordion-item .delete-favorite"),new _({position:"bottom",target:d,className:"compass-small-tooltip",body:he("clickRemoveFavorite")}),n.accordion.addEvent("onClick",n.saveSections.bind(n)),w},_confirmModal:function(){var e=this;new K({closable:!1,renderTo:a.isOpenFullSize()?document.querySelector(".my-apps-panel.compass-v3"):""}).dialog({body:he("confirmRemoveFavorite"),title:he("Remove all favorite Apps"),buttons:[{className:"primary",value:he("Remove"),action:function(t){e.removeAllFavoriteApp(),t.hide()}},{value:he("cancel"),action:function(e){e.hide()}}]})},buildAndGetScrollableView:function(t){var n=e.createElement("div",{class:"scroll-container"});return new s({element:t}).inject(n),n},buildWorldTabContent2:function(){var t=this,n=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrlNoNLS("exclusions"),parse:function(e){return Object.keys(e).map((function(t){return{id:t,data:e[t]}}))}}));n.fetchPromise(),J.setExclusionsCollection(n);var i,s,o=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("world")})),l=new V({entity:"portfolio",usageEntity:"PORTFOLIOS_OPERATIONS",hideDescription:!0,collection:o,itemsDefaultIconsuffix:"small",events:{onItemClick:function(e){"industries"===e.get("childrenType")?(i=[e.toJSON()],t.showIndustries(e,!0,i),J.compassPanelFullSize()):"domains"===e.get("childrenType")?(i=[e.toJSON()],s=!0,t.showWorksDetails(e,!0,!1,i,s),J.compassPanelFullSize()):"roles"===e.get("childrenType")?(i=[e.toJSON()],s=!0,t.showPlaygoundDetail(e,!0,i,s),J.compassPanelFullSize()):"solutions"===e.get("childrenType")?(e.get("comingSoon")&&J.enableBetaUnlockComingSoon()||!e.get("comingSoon"))&&(i=[e.toJSON()],t.showLifeDetails(e,!0,i),J.compassPanelFullSize()):"audiences"===e.get("childrenType")&&(i=[e.toJSON()],t.showWorksDetails(e,!0,!0,i),J.compassPanelFullSize())}}}),r=function(){l.getContent().setContent(e.createElement("div",{class:"portfolio-empty-view",html:{class:"portfolio-empty-view-content-wrapper",html:[{tag:"div",class:"portfolio-empty-view-content-title",html:[{text:he("No internet connection")}]},{tag:"div",class:"portfolio-empty-view-content",html:[{text:he("You don't have access to the 3DS solutions portfolio. Please check your internet connection.")}]},{class:"fonticon fonticon-offline",tag:"i"}]}}))};return o.fetchPromise().then((function(){if(0===o.size())r();else{var e=t.search&&t.search.value.toLowerCase();t.search&&t.filterViews("",e),t._navigateToContent(l)}}),r),this.buildAndGetScrollableView(e.createElement("div",{html:l.getContent()}))},_isNotAddin:function(){return!(e.is(r.addinMode)&&e.is(r.addinMode.value))},showLifeDetails:function(t,n,i){var s,o=this,l=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("solutionsexperiences"),parse:function(e){return e.filter((function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),t.get("exclusions")||t.set("exclusions",[]),-1===t.get("exclusions").indexOf(e.id)&&e.parents.detect((function(e){return e.id===t.get("id")}))}))}})),r=new X({model:t,usageEntity:"PORTFOLIO",itemsTitle:he("Solutions"),parentIcon:fe,navigation:i,header:!0,collection:l,events:{onItemClick:function(t,n){var s=e.clone(i);s.push(t.toJSON()),o.showSolutionDetail(t,!1,s,!0)}}});s=new U({title:t.get("title"),closable:o._isNotAddin(),parentIcon:fe,model:t,view:r,events:{callGoHomes:function(e){Pe(e)},onClose:function(){o.dispatchEvent("onClose")},onGoHome:function(e){s.goHome(e)},onBack:_e.bind(this,n,i),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}}),l.fetchPromise().then(this._navigateToContent.bind(this,s,i)),this._injectOverlayOnTop(s)},showEduDetailsV32:function(t,n,i){var s,o=this,l=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("portfolios"),parse:function(e){return(e=e.filter((function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),t.get("children").detect((function(t){return t.id===e.id&&(e.rank=t.rank),t.id===e.id}))}))).sort((function(e,t){return e.rank-t.rank})),e}})),r=new W({model:t,itemsTitle:he("AUDIENCES"),parentIcon:fe,usageEntity:"PORTFOLIO",navigation:i,collection:l,events:{onItemClick:function(t,n){var s=e.clone(i);s.push(t.toJSON()),o.showWorksDetails(t,!1,!0,s)}}});s=new U({title:t.get("title"),closable:o._isNotAddin(),parentIcon:fe,model:t,view:r,events:{callGoHomes:function(e){Pe(e)},onClose:function(){o.dispatchEvent("onClose")},onGoHome:function(e){s.goHome(e)},onBack:_e.bind(this,n,i),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}}),l.fetchPromise().then(this._navigateToContent.bind(this,s,i)),this._injectOverlayOnTop(s)},_goHome:Pe,showWorksDetails:function(t,n,i,s,o){var l,r=this,c=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("themes"),parse:function(e){return(e=e.filter((function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.parents.detect((function(e){return e.id===t.id}))}))).sort((function(e,t){return e.rank-t.rank})),e.sort((function(e,n){var i=e.parents.detect((function(e){return e.id===t.id})),s=n.parents.detect((function(e){return e.id===t.id}));return i.rank-s.rank})),e}})),d=new X({model:t,itemsTitle:he(i?"Audiences":"Domains"),usageEntity:i?"audience":"PORTFOLIO",parentIcon:fe,collection:c,navigation:s,events:{onItemClick:function(t,n){var a=i?{itemsTitle:he("OFFERS"),child:{itemsTitle:he("RELATED ROLES")}}:{itemsTitle:he("Sub-Domains"),child:{itemsTitle:he("Roles"),showBuy:o}},l=e.clone(s);l.push(t.toJSON()),r.showDomainsDetail(t,!1,!0,a,l)}}});l=new U({title:t.get("title"),closable:r._isNotAddin(),parentIcon:fe,model:t,view:d,events:{callGoHomes:function(e){Pe(e)},onClose:function(){r.dispatchEvent("onClose")},onGoHome:function(e){l.goHome(e)},onBack:_e.bind(this,n,s),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}}),c.fetchPromise().then(this._navigateToContent.bind(this,l,s)),this._injectOverlayOnTop(l)},showIndustries:function(t,n,i){var s=this,o=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("industries"),parse:function(e){return(e=e.filter((function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),-1===t.get("exclusions").indexOf(e.id)}))).sort((function(e,t){return e.rank-t.rank})),e}})),l=new W({usageEntity:"PORTFOLIO",model:t,itemsTitle:he("Industries"),parentIcon:fe,hideDescription:!0,navigation:i,collection:o,events:{onItemClick:function(t,n){var o=e.clone(i);o.push(t.toJSON()),s.showIndustrieDetail(t,"",o)}}}),r=new U({title:t.get("title"),model:t,closable:s._isNotAddin(),parentIcon:fe,view:l,events:{callGoHomes:function(e){Pe(e)},onClose:function(){s.dispatchEvent("onClose")},onGoHome:function(e){r.goHome(e)},onBack:_e.bind(this,n,i),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}});o.fetchPromise().then(this._navigateToContent.bind(this,r,i)),this._injectOverlayOnTop(r)},showBuy:function(t){var n=this,i=e.createElement("div",{class:"check-out-view",html:new M({model:t}).render()}),s=new U({title:he("Check Out"),model:t,view:i,closable:n._isNotAddin(),parentIcon:fe,events:{callGoHomes:function(e){Pe(e)},onClose:function(){n.dispatchEvent("onClose")},onGoHome:function(e){s.goHome(e)},onBack:function(){Ne(!1)},onBackClick:function(){Se.pop()},onShow:function(){ke(!1)}}});this._injectOverlayOnTop(s)},showBasketView:function(){var t=this;t.container.getParent().removeClassName("compass-footer-visible"),J.compassPanelFullSize();var n=e.createElement("div",{class:"basket-view",html:(new F).render()}),i=new U({title:he("Cart"),view:n,closable:t._isNotAddin(),parentIcon:fe,events:{callGoHomes:function(e){Pe(e),"WORLD"!==fe||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")},onClose:function(){t.dispatchEvent("onClose")},onGoHome:function(e){i.goHome(e),"WORLD"!==fe||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")},onBack:function(){var e=0===Se.length;_e.call(t,e,!1),"WORLD"!==fe||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")},onBackClick:function(){Se.pop();var e=0===Se.length;_e.call(t,e,!1),"WORLD"!==fe||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")},onShow:function(){ke(!1)}}});this._injectOverlayOnTop(i)},showPlaygoundDetail:function(t,n,i,s){var o,l,r=this;l=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("rootroles"),parse:function(e){return(e=e.filter((function(e){return e.brand||(e.brand="PLATFORM"),e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),t.get("children").detect((function(t){return t.id===e.id&&(e.rank=t.rank),t.id===e.id}))}))).sort((function(e,t){return e.rank-t.rank})),e}})),o=new U({title:t.get("title"),model:t,closable:r._isNotAddin(),parentIcon:fe,view:new X({usageEntity:"PORTFOLIO",parentIcon:fe,model:t,header:!0,hideDescription:!0,navigation:i,collection:l,events:{callGoHomes:function(e){Pe(e)},onClose:function(){r.dispatchEvent("onClose")},onGoHome:function(e){o.goHome(e)},onItemClick:function(t,n){var s=e.clone(i);s.push(t.toJSON()),r._onClickMoreV32(t,!1,s)}}}).render(),events:{onBack:_e.bind(this,n,i),onBackClick:function(){Se.pop()},onShow:function(){ke(n)},onClose:function(){r.dispatchEvent("onClose")},callGoHomes:function(e){Pe(e)}}}),this._injectOverlayOnTop(o),l.fetchPromise().then(this._navigateToContent.bind(this,o,i))},buildCompanyTabContent:function(){var t,n=this;return t=0===this.collections.platformRoles.length?e.createElement("div",{class:"portfolio-empty-view",html:{class:"portfolio-empty-view-content-wrapper",html:[{tag:"div",class:"portfolio-empty-view-content-title",text:he("All Company Roles are granted to you.")},{class:"fonticon fonticon-check",tag:"i"}]}}):e.createElement("div",{styles:{height:"100%"},html:{class:"items-roles-view my-roles-section",html:this.collections.platformRoles.map((function(e){return new O({model:e,showRequestIcon:!0,clickable:!0,disableSeoTags:!0,appsCollection:n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e.get("appList")}]),events:{onItemClick:function(e,t){n.clickRole(e,!1,!0,{request:!0})}}}).render()}))}}),this.buildAndGetScrollableView(e.createElement("div",{html:t}))},_contentLoaded:function(){return this._contentLoadedOnce||(this._contentLoadedOnce=a.debounce((function(){Y.unmask(document.body.getElement("#my-apps-ct"))}),500,!1)),this._contentLoadedOnce()},_maskContent:function(){return this._maskContentOnce||(this._maskContentOnce=a.debounce((function(){document.body.getElement("#my-apps-ct").getElement(".mask")||Y.mask(document.body.getElement("#my-apps-ct"))}),300,!0)),this._maskContentOnce()},showOffers:function(t){var n=this,i=new U({hideHeader:!0,model:t,view:e.createElement("div",{class:"check-out-view",html:new M({model:t}).render()}),closable:n._isNotAddin(),parentIcon:fe,events:{callGoHomes:function(e){Pe(e)},onClose:function(){n.dispatchEvent("onClose")},onGoHome:function(e){i.goHome(e)},onBack:function(){Ne(0===Se.length)},onBackClick:function(){Se.pop()},onShow:function(){ke(!1)}}});this._injectOverlayOnTop(i)},_navigateToContentFast:function(e){var t=this;if(document.body.addClassName("compass-no-transition"),J.supportPushState())if(window.location.pathname.indexOf("rootroles")>-1){if((i=window.location.pathname.split("rootroles")).length>1){var n=i[1].replace(/\//g,"");J.compassPanelFullSize(),t.roleV34Collection.fetchPromise().then((function(){var i=t.roleV34Collection.find((function(e){return a.toSeoUrl(e.get("title"))===n}));i&&(a.manageSeoTags(i),fe="WORLD",t._onClickMoreV32(i,!0,[]),setTimeout((function(){t._contentLoaded(),e(),document.body.removeClassName("compass-no-transition")}),200))}))}}else if(window.location.pathname.indexOf("offers")>-1){var i;if((i=window.location.pathname.split("offers")).length>1){var s=i[1].replace(/\//g,"");s&&(J.compassPanelFullSize(),this.showOffers(new L({id:s}),!0,[]),fe="WORLD",setTimeout((function(){t._contentLoaded(),e(),document.body.removeClassName("compass-no-transition")}),200))}}},_navigateToContent:function(t,n){var i=!1,s=this,o=["trading-experiences","data-science-experiences"],l=-1;J.supportPushState()&&!J.isFastPortfolioNavigation()&&setTimeout((function(){-1===l&&window.location.pathname.split("/").detect((function(e){return o.indexOf(e)>-1}))&&(l=1,s.getContent("compass-nav-second").isHidden()||2!==s.getContent().getElements("compass-nav-second .tab-item").length||s.getContent().getElements("compass-nav-second .tab-item")[1].hasClassName("active")||s.getContent().getElements("compass-nav-second .tab-item")[1].click());var r=window.location.pathname.split("/"),c=window.location.pathname.split("/buy")[0],d=J.isCollaborativeBusinessInnovatorNavigation()||J.is3dswymerNavigation();t&&t.getContent&&(t=t.getContent());for(var p=0,u=r.length;p<u;p++){var m=e.clone(r).splice(0,p+1).join("/"),h=t.getElement('[data-seo="'+m+'"]'),f=t.getElement("[data-seo-current]");if(d&&("collaborative-business-innovator"!==r[p]||h?"3d-swymer"!==r[p]||h?"3dswymer"!==r[p]||h||(h=t.getElement('[data-seo="'+m.replace("3dswymer","collaborative-business-innovator")+'"]')):h=t.getElement('[data-seo="'+m.replace("3d-swymer","collaborative-business-innovator")+'"]'):(h=t.getElement('[data-seo="'+m.replace("collaborative-business-innovator","3d-swymer")+'"]'))||(h=t.getElement('[data-seo="'+m.replace("collaborative-business-innovator","3dswymer")+'"]'))),h&&(s._maskContent(),ke(!0),J.setNoPushStateNavigation(),h.click(),h&&c===m&&(i=!0,n&&J.supportPushState()&&J.needPushState()&&a.manageSeoTags(n[n.length-1]))),f&&c===f.getAttribute("data-seo-current")||J.isCurrentPathnamePortfolioRoot(c)){i=!0,n&&J.supportPushState()&&J.needPushState()&&a.manageSeoTags(n[n.length-1]);break}}i&&setTimeout((function(){s._contentLoaded()}),200)}),25)},showDomainsDetail:function(t,n,i,s,o){s&&s.entity;var l=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("disciplines"),parse:function(e){return(e=e.filter((function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.parents.detect((function(e){return e.id===t.id}))}))).sort((function(e,n){var i=e.parents.detect((function(e){return e.id===t.id})),s=n.parents.detect((function(e){return e.id===t.id}));return i.rank-s.rank})),e}})),r=new B({usageEntity:"domain",parentIcon:fe,itemsTitle:s&&s.itemsTitle,model:t,collection:l,navigation:o,events:{onItemClick:function(n,a){var l=e.clone(o);l.push(n.toJSON()),s&&s.onItemClick?s.onItemClick(n,!1,l,i):(n.set("brand",t.get("brand")),c.showProcessDetail(n,!1,l,i,s))}}}),c=this,d=new U({title:t.get("title"),model:t,closable:c._isNotAddin(),parentIcon:fe,view:r,events:{callGoHomes:function(e){Pe(e)},onClose:function(){c.dispatchEvent("onClose")},onGoHome:function(e){d.goHome(e)},onBack:_e.bind(this,n,o),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}});l.fetchPromise().then(this._navigateToContent.bind(this,d,o)),this._injectOverlayOnTop(d)},showIndustrieDetail:function(t,n,i,s){var o=this,l=null;l=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("solutionsexperiences"),parse:function(e){return(e=e.filter((function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.parents.detect((function(e){return e.id===t.id}))}))).sort((function(e,n){var i=e.parents.detect((function(e){return e.id===t.id})),s=n.parents.detect((function(e){return e.id===t.id}));return i.rank-s.rank})),e}}));var r=new U({title:t.get("title"),model:t,closable:o._isNotAddin(),parentIcon:fe,view:new X({usageEntity:"industry",itemsTitle:he("Solutions"),parentIcon:fe,navigation:i,model:t,collection:l,buy:s,events:{onItemClick:function(t,n){var a=e.clone(i);a.push(t.toJSON()),o.showSolutionDetail(t,"",a,s)}}}),events:{callGoHomes:function(e){Pe(e)},onClose:function(){o.dispatchEvent("onClose")},onGoHome:function(e){r.goHome(e)},onBack:_e.bind(this,n,i),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}});l.fetchPromise().then(this._navigateToContent.bind(this,r,i)),this._injectOverlayOnTop(r)},_onClickMoreV32:function(t,n,i){var s=this,o=null;if(i&&i.length>0&&(o=i[0].contact),t.get("apps")){if(t.get("apps").sort((function(e,t){return e.rank-t.rank})),t.set("data",t.get("apps").map((function(t){var n=[];return n.length>0?t=n[0].toJSON():(t.id=t.externalId,t.title=t.name,t.icon=r.myAppsBaseUrl.replace("/resources/AppsMngt/","")+e.String.format("/widget/images/MyApps/{0}_AppIcon.svg",t.externalId)),t})),{silent:!0}),"IFW"===t.get("acronym")){var l=s.collection.filterApps([{key:"isRole",value:!1}]);t.set("data",t.get("data").filter((function(e){var t=l.detect((function(t){return t.get("id")===e.externalId}));return t&&(e.title=t.get("title")),e})),{silent:!0})}t.unset("apps",{silent:!0})}else if(t.get("appList")){0===(l=s.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:t.get("appList")}])).length&&(l=s.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:t.get("appList")}]));var c=s.roleV34Collection.find((function(e){return e.get("acronym")===t.get("process")}));c&&c.get("description")?t.set({description:c.get("description"),descriptionMedias:c.get("descriptionMedias"),tagLine:c.get("tagLine")},{silent:!0}):0!==t.get("id").indexOf("RAP-")&&t.set("description",he("noadditionalinfo"),{silent:!0}),t.set({data:l},{silent:!0})}var d=s.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:"X3DOPMR_AP"}]),p=null;d&&d.length>0&&(p=d[0].get("platforms").map((function(e){return{id:e.id,text:e.name}})));var u=new H({usageEntity:"role",itemsTitle:he("Apps"),additionalClassName:"ME"===fe?"me-view portfolio-roles-view":"COMPANY"===fe?"company-view portfolio-roles-view":"portfolio-roles-view",parentIcon:fe,navigation:i,clickable:!1,desableImgWidget:!0,model:t,contact:o||J.isFastPortfolioNavigation(),buy:J.isBuyEnabledWorld(fe)||J.isFastPortfolioNavigation(),events:{onClickBuy:s.showBuy.bind(s),callGoHomes:function(e){Pe(e)},onClose:function(){s.dispatchEvent("onClose")},onGoHome:function(e){m.goHome(e)},onItemClick:function(e,t){},onRequestRole:function(e,t){s.sendRoleRequest(e,t)}}});u._onModelSync();var m=new U({title:t.get("title"),model:t,closable:s._isNotAddin(),parentIcon:fe,adminPlatforms:p,contact:o||J.isFastPortfolioNavigation(),isDisableGoBack:a.isDisableGoBack(),buy:J.isBuyEnabledWorld(fe)||J.isFastPortfolioNavigation(),view:u,events:{onClickBuy:s.showBuy.bind(s),callGoHomes:function(e){Pe(e)},onClose:function(){s.dispatchEvent("onClose")},onBack:_e.bind(this,n,i),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}});this._injectOverlayOnTop(m)},showSolutionDetail:function(t,n,i,s,o){var l,r,c=this,d=null;d=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("processexperiences"),parse:function(e){return(e=e.filter((function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.parents.detect((function(e){return e.id===t.id}))}))).sort((function(e,n){var i=e.parents.detect((function(e){return e.id===t.id})),s=n.parents.detect((function(e){return e.id===t.id}));return i.rank-s.rank})),e}})),r=new B({usageEntity:"solution",itemsTitle:he("Processes"),extendedDescription:!0,parentIcon:fe,model:t,navigation:i,collection:d,events:{callGoHomes:function(e){Pe(e)},onClose:function(){c.dispatchEvent("onClose")},onGoHome:function(e){l.goHome(e)},onItemClick:function(t,n){var o=e.clone(i);o.push(t.toJSON()),c.showProcessDetail(t,!1,o,s,{child:{itemsTitle:he("Roles"),showBuy:s}})},onDiscoverClick:function(e){l.container.getElement(".content-overlay-header h1").setText(e.get("title")),l.container.getElement(".scroller-content").scrollTop=0}}}),l=new U({title:t.get("title"),model:t,closable:c._isNotAddin(),parentIcon:fe,view:r,events:{callGoHomes:function(e){Pe(e)},onClose:function(){c.dispatchEvent("onClose")},onBack:_e.bind(this,n,i),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}}),d.fetchPromise().then(this._navigateToContent.bind(this,l,i)),this._injectOverlayOnTop(l)},showProcessDetail:function(t,n,i,s,o){var l=new(q.extend({model:L,url:a.getPortfolioApiTemplateUrl("rootroles"),parse:function(e){return(e=e.filter((function(e){return e.brand||(e.brand="PLATFORM"),e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map((function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})))),e.parents.detect((function(e){return e.id===t.id}))}))).sort((function(e,n){var i=e.parents.detect((function(e){return e.id===t.id})),s=n.parents.detect((function(e){return e.id===t.id}));return i.rank-s.rank})),e}})),r=this,c=new U({title:t.get("title"),model:t,closable:r._isNotAddin(),parentIcon:fe,view:new j({itemsTitle:o&&o.child&&o.child.itemsTitle,parentIcon:fe,model:t,usageEntity:o&&o.itemsTitle?o.itemsTitle:"process",navigation:i,defaultIcon:"{0}_Role.svg",collection:l,events:{onItemClick:function(t,n){var s=r.collections.visibleRoles.get(t.get("id")),o=e.clone(i);o.push(t.toJSON()),s||(s=r.collections.platformRoles.get(t.get("id"))),r._onClickMoreV32(t,!1,o)},callGoHomes:function(e){Pe(e)},onClose:function(){r.dispatchEvent("onClose")},onGoHome:function(e){c.goHome(e)}}}),events:{callGoHomes:function(e){Pe(e)},onClose:function(){r.dispatchEvent("onClose")},onGoHome:function(e){c.goHome(e)},onBack:_e.bind(this,n,i),onBackClick:function(){Se.pop()},onShow:function(){ke(n)}}});l.fetchPromise().then(this._navigateToContent.bind(this,c,i)),this._injectOverlayOnTop(c)},showRoleDetailWithRequest:function(e){var t=e.get("id"),n=this,i=n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:this.collections.platformRoles.get(t).get("appList")}]),s=new U({title:e.get("title"),closable:n._isNotAddin(),model:e,icon2:"info",parentIcon:fe,view:e.get("appList").map((function(e){var t=i.detect((function(t){return t.get("id")===e}));return t?new Q({isApp:!0,additionalClassName:"app-item",model:t,appsCollection:n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:t.get("appList")}])}).render():null})),events:{callGoHomes:function(e){Pe(e)},onClose:function(){n.dispatchEvent("onClose")},onGoHome:function(e){s.goHome(e)},onClickMore:n._onClickMore.bind(n),onClickBuy:n.showBuy.bind(n)}});this._injectOverlayOnTop(s)},builCompassContent:function(){return this.tabContent={tag:"compass-content"},this.tabContent},buildCompassNavMain:function(){var t=-1,n=this._needToShowMyRoles()?this.buildSettingIcon():null,i=this,s=[{icon:"user",text:he("Compass_ME"),id:"ME"},{icon:"users",text:he("WE"),disabled:!0,hidden:!0,id:"WE"},{icon:"building-office",text:he("COMPANY"),id:"COMPANY",hidden:!J.canRequestRole(),disabled:!J.canRequestRole()},{icon:"globe",text:he("WORLD"),id:"WORLD"}],o=e.createElement("i",{class:"compass-nav-search-icon compass-search fonticon fonticon-search",events:{click:function(){i.container.toggleClassName("compass-search-open"),i.container.getElement(".compass-nav-search-icon").toggleClassName("active"),i.container.getElement("compass-nav-search input").focus(),i.search.value="",i.filterViews("","")},reset:function(){i.container.toggleClassName("compass-search-open"),i.container.getElement(".compass-nav-search-icon").toggleClassName("active"),i.clearSearchIcon.hasClassName("hidden")||i.clearSearchIcon.addClassName("hidden"),i.search.value="",i.filterViews("","")},open:function(){i.container.toggleClassName("compass-search-open"),i.container.getElement(".compass-nav-search-icon").toggleClassName("active"),i.container.getElement("compass-nav-search input").focus(),i.search.value="",i.filterViews("","")}}});new _({position:"left",target:o,className:"compass-tooltip",body:he("Search")}),"small"===J.getPreferences().viewStyle&&i.container.getParent().addClassName("compass-view-small");var a=null;return{tag:"compass-nav-main",html:[e.is(E._getUser())?i.buildCloseIcon():null,o,n,a,{class:"tab",tag:"div",html:s.map((function(e){return t++,{tag:"a",id:e.id,class:"tab-item"+(e.disabled?" disabled":"")+(e.hidden?" hidden":""),"data-index":4,events:{click:function(e){i.compassMainNav=t,document.querySelectorAll("compass-nav-second .tab-item")&&document.querySelectorAll("compass-nav-second .tab-item").length>1&&!document.querySelector("compass-nav-second .tab-item.active")&&document.querySelectorAll("compass-nav-second .tab-item")[i.compassSecondNav].addClassName("active"),document.querySelector(".compass-on")&&document.querySelector(".compass-on").removeClassName&&document.querySelector(".compass-on").removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),!0===Ae&&("WORLD"===e.currentTarget.id?i.container.getParent().hasClassName("compass-footer-visible")||setTimeout((function(){i.container.getParent().addClassName("compass-footer-visible")}),200):i.container.getParent().hasClassName("compass-footer-visible")&&i.container.getParent().removeClassName("compass-footer-visible"))}},html:[{class:"tab-item-border",html:{tag:"div",class:"fonticon fonticon-"+e.icon}},{class:"tab-item-text",text:e.text}]}}))}]}},buildSettingIcon:function(){var t=this,n=e.createElement("i",{class:"compass-nav-settings-icon compass-search fonticon fonticon-cog"});return new _({position:"right",target:n,className:"compass-small-tooltip",body:he("Preferences")}),n&&n.addEventListener("click",(function(e){t.dropDownPref&&t.dropDownPref.destroy(),t.dropDownPref=new ie({target:n,className:"compass-dropdown",hasRole:t._needToShowMyRoles(),events:{onUpdateTenant:function(){t.collection.lastId=null,"R1132100503382"===r.selectedPlatform&&(t._maskContent(),setTimeout((function(){window.location.reload()}),1100))},fetchAppList:function(e){t.options.reLoadQuadrant(e)},save:function(e,n){"viewStyle"===e&&t.container.getParent().toggleClassName("compass-view-small","small"===n),t._savePreferencesOnce(e,n)}}}),t.dropDownPref.show()})),n},updateDropDownPref:function(e,t){!0===e&&!1===e||(e=a.getIsMultiTenant()),t||(t="#force-select-tenant"),this.dropDownPref&&this.dropDownPref.getContent().getElement(t)&&(e&&this.dropDownPref.getContent().getElement(t).hasClassName("hidden")?this.dropDownPref.getContent().getElement(t).removeClassName("hidden"):!1!==this.dropDownPref||this.dropDownPref.getContent().getElement(t).hasClassName("hidden")||this.dropDownPref.getContent().getElement(t).addClassName("hidden"))},refreshBascketFooter:function(e){var t=function(){return document.querySelector("#my-apps-ct mpf-buy-wrapper")};!0!==e&&!1!==e||(Ae=e),setTimeout((function(){"WORLD"!==fe||t()||!Ae||document.querySelector("#my-apps-ct").hasClassName("compass-footer-visible")?!Ae&&document.querySelector("#my-apps-ct").hasClassName("compass-footer-visible")&&document.querySelector("#my-apps-ct").removeClassName("compass-footer-visible"):document.querySelector("#my-apps-ct").addClassName("compass-footer-visible")}),t()?300:0)},buildCompassFooter:function(){var t=this;e.createElement("compass-footer").inject(this.container,"bottom"),require(["DS/MPFMiniCartComponent/MiniCartComponentFactory","DS/MPFMiniCartComponent/MiniCartComponent","UWA/Class/Listener"],(function(e,n,i){var s=new i;e.hasItems().then((function(i){i?(Ae=!0,"WORLD"!==fe||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")):(Ae=!1,t.container.getParent().removeClassName("compass-footer-visible")),e.getMiniCartComponent().then((function(e){e.render().inject(document.querySelector("compass-footer")),s.listenTo(e,n.Events.BUTTON_CLICKED,(function(){J.supportPushState()&&-1===window.location.pathname.indexOf("/cart")&&history.pushState("","",window.location.pathname+"/cart"),t.showBasketView()}))}))}))}))},buildCompassNav:function(){var t=this,n=e.is(E._getUser())&&!this._needToShowMyRoles()&&a.getIsMultiTenant()?this.buildSettingIcon():null,i=[he("As a System of Operations"),he("As a Business Model")],s=e.createElement("a",{class:"tab-item",html:i[0],events:{click:function(){t.handlerItem(0)},mouseover:function(){null!==t.tooltipsItem1&&void 0!==t.tooltipsItem1&&(t.tooltipsItem1.destroy(),t.tooltipsItem1=null),t.isEllipsisActive(s)&&(t.tooltipsItem1=new _({position:"top",target:s,body:he("As a System of Operations")}).show())}}}),o=e.createElement("a",{class:"tab-item",html:i[1],events:{click:function(){t.handlerItem(1)},mouseover:function(){null!==t.tooltipsItem2&&void 0!==t.tooltipsItem2&&(t.tooltipsItem2.destroy(),t.tooltipsItem2=null),t.isEllipsisActive(o)&&(t.tooltipsItem2=new _({position:"top",target:o,body:he("As a Business Model")}).show())}}}),l=e.createElement("compass-nav-second",{html:[e.is(E._getUser())&&this._needToShowMyRoles()?null:t.buildCloseIcon(),n,{class:"tab tab-center",html:[s,o]}]});return this._isBusinessExperienceAvailable()||(t.container.addClassName("compass-second-nav-hidden"),l.hide()),l},isEllipsisActive:function(e){return e.offsetWidth<e.scrollWidth},handlerItem:function(e){var t=this;t.compassSecondNav=e,document.querySelector('compass-nav-main [data-index="'+t.compassMainNav+'"]')&&!document.querySelector('compass-nav-main [data-index="'+t.compassMainNav+'"]').hasClassName("active")&&document.querySelector('compass-nav-main [data-index="'+t.compassMainNav+'"]').addClassName("active"),document.querySelector(".compass-on")&&document.querySelector(".compass-on").removeClassName&&document.querySelector(".compass-on").removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south")},renderSuggestionsView:function(){this.getSuggestionsView().renderSuggestions(),this.appsAccordion&&this.getSuggestionsView().collection.length>0&&this.appsAccordion.showSection("suggestions-section")},getSuggestionsView:function(){var e=this.views;return e.suggestions||(e.suggestions=new h({collection:this.sugCollection})),e.suggestions},renderErrorView:function(t){var n=this.elements;n.error||(n.error=e.createElement("div",{class:"compass-error",text:t}).inject(this.container))},_needToShowMyRoles:function(){return this.collections.visibleRoles.length>0||this.collections.platformRoles.length>1},buildAccordion:function(){var t,n=this,i=this.options.sectionData,s=!1,l=[],r=this.views,c=this.elements,d=[],p=[],u=c.expandedRole=e.createElement("div",{tag:"div",class:"expanded-role",html:[{class:"expanded-role-title"},{tag:"span",class:"fonticon fonticon-left-open expanded-role-close"},{tag:"span",class:"fonticon fonticon-clear expanded-role-info"},this.views.expandedRole.render()]}),m=c.allRolesBtn=e.createElement("span",{class:"fonticon fonticon-down-dir fonticon-interact all-roles-btn"}),h=this.getSuggestionsView(),f=r.eservices;return e.Utils.Client.Features.touchEvents||new _({position:"bottom",target:m,className:"compass-small-tooltip",body:he("Show more roles")}),this.forEachQuadrant((function(t){d.push(r.apps[t].render()),!1===s&&r.apps[t].collection.size()>0&&(s=!0),d.push(e.createElement("div",{class:"alert-message alert-default noapps "+t,text:i[t].noapps})),p.push(r.lma[t].render())})),(i.services&&i.services.data&&i.services.data.length>0||f)&&l.push({id:"wrapperMP",title:he("3DEXPERIENCEMarketplace")||i.wrapperMP&&i.wrapperMP.title,html:f?e.createElement("div",{styles:{height:10}}):new $({collection:new o(i.services&&i.services.data||[])}).render(),open:!i.wrapperMP.closed,visible:!0,name:f?"learn-more-about-section":"services-section"}),f&&l.push({id:"eservices",parent:"wrapperMP",icon:"component",title:i.eservices&&i.eservices.title,html:r.eservices.render(),open:!i.eservices.closed,visible:!0,name:"services-section"}),f&&i.services&&i.services.data&&i.services.data.length>0&&l.push({id:"services",parent:"wrapperMP",icon:"globe",title:i.services&&i.services.title||he("MyCommunityServices"),html:new $({collection:new o(i.services&&i.services.data||[])}).render(),open:!i.services.closed,visible:!0,name:"services-section"}),l.push({id:"wrapperRole",title:i.wrapperRole.title||he("wrapperRole"),html:e.createElement("div",{styles:{height:10}}),open:!i.wrapperRole.closed,visible:!a.isCompassV2()&&e.is(E._getUser()),name:"learn-more-about-section"}),l.push({id:"roles",parent:a.isCompassV2()?"":"wrapperRole",title:i.roles.title,icon:"role roles",html:[r.visibleRoles.render(),e.createElement("div",{class:"alert-message alert-default noapps roles",text:i.roles.noapps}),r.platformRoles.render(),m,u],open:!i.roles.closed,visible:this._needToShowMyRoles(),name:"my-roles-section"}),e.is(E._getUser())&&l.push({id:"favorite",parent:a.isCompassV2()?"":"wrapperRole",title:i.favorite.title,icon:"star-empty favorite",html:[r.favorite.render(),e.createElement("div",{class:"alert-message alert-default noapps favorite",text:he("dropfavoriteappshere")})],open:!i.favorite.closed,visible:!0,name:"my-favorite-apps-section"}),a.isCompassV2()&&s?(t=l.length,this.forEachQuadrant((function(s){d[s]=[],d[s].push([r.apps[s].render(),e.createElement("div",{class:"alert-message alert-default noapps "+s,text:i[s].noapps})]),l.splice(t,0,{id:"apps-"+s,title:i[s].title,icon:n._getClassForQuadrant(s),html:d[s],open:!0,visible:!0,name:"my-apps-section-"+s})}))):s&&l.push({id:"apps",parent:a.isCompassV2()?"":"wrapperRole",title:"",html:d,open:!i.north.closed,visible:!0,name:"my-apps-section"}),e.is(e.Array.detect(p,(function(e){return!e.getContent().hasClassName("empty")})))&&l.push({id:"lma",title:i.lma.title,html:p,open:!i.lma.closed,visible:!0,name:"learn-more-about-section"}),l.push({id:"suggestions",title:i.suggestions.title,html:h.render(),open:!i.suggestions.closed,visible:h.suggestionsRendered,name:"suggestions-section"}),new v({className:"apps-accordion",sections:a.isCompassV2()?7:4,scroller:!0,data:l,events:{onToggleSection:this.saveSections.bind(this),onScrollTop:function(){n.dispatchEvent("onScrollTop")},onScrollDown:function(){n.dispatchEvent("onScrollDown")},onRemoveAllFavoriteApp:function(){n.removeAllFavoriteApp()}}})},resizeAccordionData:function(){var e,t=this.container.getSize().width+1-34,n=this.itemsPerLine;(e=Math.floor(t/88))!==n&&(this.container.removeClassName("items-per-line-"+n),this.container.addClassName("items-per-line-"+e),this.itemsPerLine=e)},saveSections:function(t){var n={};"cockpits"===t.name?this._savePreferences("me-cockpits-section",{closed:!t.isSelected}):"businessMethods"===t.name?this._savePreferences("me-businessMethods-section",{closed:!t.isSelected}):this.accordion&&(this.accordion.items.forEach((function(e){n[e.name]=!e.isSelected})),e.is(E._getUser())&&r.saveSectionStatus(JSON.stringify(n)))},_savePreferences:function(t,n,i){if(t&&n&&e.is(E._getUser())){var s=J.getPreferences(),o="forceSelectTenant"===t&&s&&s[t]!==n;s[t]=n,r.setPreference({name:"compass-settings",value:JSON.stringify(s),onComplete:function(){D.publish("compassSettings",s),i&&i.onComplete&&i.onComplete()}}),o||this.collection.updateLocalCache(s),k.compassInc({eventCategory:"compass",eventAction:"compass-settings",persDim:{pd2:t,pd3:n}}),J.getPreferences()[t]=n}},manageRoleSectionDisplay:function(){this.appsAccordion&&(this._needToShowMyRoles()?this.appsAccordion.showSection("my-roles-section"):(this.appsAccordion.hideSection("my-roles-section"),this.collections.visibleRoles.forEach((function(e){this.toggleRole(e,!0)}),this)))},_restCacheRebuild:function(){this.collections.favorite&&"0-0"===ge&&we&&!we["0-0"]?this._renderContentOnToggleOnce(!0):(!this.collections.favorite||!we||"2-0"!==ge&&"2-1"!==ge||we["2-0"]||we["2-1"])&&"3-1"!==ge&&"0-1"!==ge||this._renderContentOnToggleOnce(!0),this.dropDownPref&&this.dropDownPref.updateDropDownPref()},initTopBar:function(){var e=this.collections.visibleRoles;p.setRoles(e),e.addEvent("onChange:active",(function(e){p.setChecked(e)})),e.addEvent("onMultipleAdd",(function(){p.setRoles(e)})),e.addEvent("onRemove",(function(e){!0===e.get("granted")&&p.removeRole(e)}))},completeInputSearch:function(t){t.query&&this.search?(this.search.getParent&&this.search.getParent("compass-nav-search").isHidden()&&this.container.getElement(".compass-nav-search-icon.compass-search.fonticon-search")&&this.container.getElement(".compass-nav-search-icon.compass-search.fonticon-search").click(),this.search.value=t.query,this.search.focus(),e.Event.dispatchEvent(this.search,"keyup")):t.query&&(this.inputSearchQuery=t)},searchInViews:function(e){this.filterViews("search",e)},filterAppsInViews:function(e){this.filterViews("filterApps",e)},filterViews:function(t,n){n&&n.trim&&(n=n.trim()),we[ge]||this._renderContentOnToggle(!0),we[ge].getElements(".item-view-v3,.portfolio-item").forEach((function(i){var s;if("quadrant"===t)(s=i.getAttribute("data-quadrant"))&&!i.hasAttribute("data-favorite-order")&&(""===n||s&&s===n?i.show():i.hide());else{s=i.getAttribute("data-search");var o=i.getAttribute("title");if(s){var a=e.is(n,"string")&&n.match(/^\s*role(s|)\s*:/g),l=a?n.replace(/^\s*role(s|)\s*:/g,"").trim():"";!n||n&&!n.toLowerCase||!a&&s.toLowerCase().indexOf(n.toLowerCase())>-1||o&&o.toLowerCase().indexOf(n.toLowerCase())>-1||i.getAttribute("data-id").toLowerCase().replace(/(false|true)$/,"")===n.toLowerCase()||a&&"Role"===i.getAttribute("data-type")&&i.getAttribute("data-id").toLowerCase().indexOf(l.toLowerCase())>-1?i.show():i.hide()}}}))},clickApp:function(e,t){this._handleAppClick||(this._handleAppClick=a.debounce(this.handleAppClick,500,!0).bind(this)),t&&this._handleAppClick(e,t)},handleAppClick:function(t,n,i){var s=this,o=t.isNative()||t.isA2X()&&J.isNativeApplicationEnvironment();t.isA2X()&&(t.getA2XNativeApp()||t.setA2XNativeApp(me),t=o?t.getA2XNativeApp():t);var l,r,c=t.get("tooltip")||t.get("title"),p=t.canCheckCEF(),u=(k._IDS.compass.app,t.isRole()?t.get("process"):t.get("id")),m=t.get("title"),h=n.getParent("[data-id]")?n.getParent("[data-id]").getAttribute("data-id").indexOf("apps-")>-1?n.getParent("[data-id]").getAttribute("data-id").split("apps-")[1]:n.getParent("[data-id]").getAttribute("data-id"):"",f=(t.isWeb()||t.isWidget()||t.isFamily())&&!(!J.getPreferences()||"forceSelectTenant"!==J.getPreferences().forceSelectTenant),g=function(){var e=n.getElement(".settings-img");s.hideMessage(),e&&s.openSettings(t,e)},v=function(e,t){if(!0===ue.enableMockFUN125890()&&o&&p){var n=e.isA2X()&&e.getA2XNativeApp()||l&&l.native||e;n.getInstallList(y,(function(){n.isValidInstallTypeForCEF()&&!ue.isLockInstallation()?n.getCEFList(y,(function(e,i,o,a,l,r,c){s.getCEFModal(n,e,i,o,a,l,r,c,(function(){n.launch(t)}))})):n.launch(t)}))}else e.launch(t)},C={onComplete:function(n){s.options.closeOnLaunch&&s.dispatchEvent("onClose"),o&&(C.support?s.showMessage(he("supportactivated"),5e3):n.remote?s.showMessage(e.String.format(he("remoting"),c),5e3):s.showMessage(e.String.format(he("launching"),c),5e3),A.get()&&D.publish("setTypesCallback",e.merge({appId:t.get("id")},A.get())))},onFailure:function(e){switch(e.error){case"no_launch_infos":case"no_install_selected":var i=n.getElement(".settings-img");s.hideMessage(),i&&s.openSettings(t,i);break;case"no_install_compatible":if(s.hideMessage(),t.isOnlineInstallable()&&!e.remoteAvailable&&ue.isInstallationsCanBeProposed())d.onlineInstallation(t,null,null);else(i=n.getElement(".settings-img"))&&s.openSettings(t,i);break;case"mandatory_update":if(s.hideMessage(),ue.isInstallationsCanBeProposed())d.onlineInstallation(e.app,e.install,null,e.remote,e.silent);else(i=n.getElement(".settings-img"))&&s.openSettings(t,i);break;case"windows10_app_not_installed":s.hideMessage();var o="https://www.microsoft.com/store/apps/9wzdncrdjzv3";J.isNativeApplicationEnvironment()?window.open(o,"_blank"):window.location=o;break;case"macos_app_download":s.hideMessage(),d.showMacDownloadPanel(e.app);break;case"ios_app_not_installed":s.hideMessage(),a.isIphone()?window.location="https://itunes.apple.com/fr/app/3dplay-ar/id1455204301":window.location="https://itunes.apple.com/us/app/3dplay/id825988585?mt=8";break;case"android_app_not_installed":s.hideMessage(),window.location="https://play.google.com/store/apps/details?id=com.dsy.threedplayar";break;case"applet_error":a.dispatchLauncherErrorEvent(e)}}};t.isFamily()&&((l=t.getChildrenForFamilyApp()).native?r=l.native:l.widget?r=l.widget:l.web&&(r=l.web));var y=(r||t).getRemoteApp();if(o){if(t.get("supportModeExeName")){var S=new b({className:"compass-modal compass-modal-support",closable:!0,visible:!0,events:{onHide:function(){S.destroy()}},header:"<h4>"+he("supportmode")+"</h4>",body:he("supportactivated")+"<br>"+he("wantsupport"),footer:[e.createElement("button",{class:"btn btn-primary",text:he("yes"),events:{click:function(){C.support=!0,s.showMessage("",2e4,!0),v(t,C),S.hide()}}}),e.createElement("button",{class:"btn btn-default",text:he("no"),events:{click:function(){s.showMessage("",2e4,!0),v(t,C),S.hide()}}}),e.createElement("button",{class:"btn btn-default",text:he("cancel"),events:{click:function(){S.hide()}}})]}).inject(document.body);return void k.clickApp({quadrant:h,appId:u,appName:m})}this.showMessage("",2e4,!0)}else if(t.isRole())return t.get("granted")?(t.get("active")?"Deactive":"Active",this.toggleRole(t)):("OpenRequestModal",this.showRequestModal(t)),void k.requestRole({quadrant:h,roleId:u,roleName:m});if(k.clickApp({quadrant:h,appId:u,appName:m}),o&&A.get())C.onComplete({});else if(t.isFamily()){var w=t.getChildrenForFamilyApp();J.isNativeApplicationEnvironment()&&w.native&&A.get()?C.onComplete({}):J.isNativeApplicationEnvironment()&&w.native?t.launch(C):!J.isNativeApplicationEnvironment()&&w.Widget&&(f&&!i&&w.Widget.get("platforms")&&w.Widget.get("platforms").length>1?g():w.Widget.launch(C))}else f&&!i&&t.get("platforms")&&t.get("platforms").length>1?g():v(t,C)},getCEFModal:function(t,n,i,s,o,a,r,c,p){var u=this.getTheRightModalType(i,n,a,s);!(n&&0===n.length||i&&0!==i.get("instruction"))||ue.isLockInstallationUpdate()&&"update"===u||"installation"===u&&ue.isLockInstallationUpdate()?p():new pe({products:r,level:c,isStackToInstall:s,installLists:n.length>0?n=n[0][0]:n,preferredInstall:i?i.length>0?i=i[0]:i:null,preferredInstallId:o,statusModal:u,events:{installCEF:function(){d.launchInstallation({products:r},null,c,"Both",null,{onComplete:function(){l.dispatchEvent("onShowMessage",["Chromium Embedded Framework installation success",5e3]),e.log("CEF Installation has been success!")},onFailure:function(){e.log("CEF Installation has been failed!")}},!1)},updateCEF:function(){var t=n;d.launchInstallation({products:r},t,c,"Both",null,(function(t){e.log("CEF Update has been launched end!")}),!1)},launchApp:function(){p()}}}).render()},getTheRightModalType:function(e,t,n,i){var s;return 0===t.length&&!0===i?s="installation":e?null===n||null!==n&&!1===e.get("update")?s="installation":!0===e.get("update")&&(s="update"):s=t.length>0?!0===t[0][0].get("update")?"update":"installation":!0===e.get("update")?"update":"installation",s},handleInstallDetectionEvent:function(e,t,n){if(e.appId){var i=this.collection.get(e.appId);i.isNative()?i.install({forceUpdate:!0,eventDetection:!0,silent:!!n,onComplete:function(){t.onComplete()},onFailure:function(e){t.onFailure(e)}}):t.onFailure({error:"not_native_app"})}else t.onFailure({error:"no_app_id"})},handleInstallAppEvent:function(t,n){var i,s,o=t.appId;o?(i=this.collection.get(o),s=i.get("tooltip")||i.get("title"),i.isNative()?i.install({forceUpdate:!0,onComplete:function(){n.onComplete()},onFailure:function(t){var o=t.error;switch(o){case"no_install_compatible":i.isOnlineInstallable()&&!t.remoteAvailable?d.onlineInstallation(i,null,null,null,!0,null,n):n.onFailure({error:"no_install_compatible_no_online_installation"});break;case"mandatory_update":d.onlineInstallation(t.app,t.install,null,t.remote,!0,t.silent);break;case"applet_error":100===t.returnCode||t.remote?n.onFailure({error:o,message:he("launcherbusyretry")}):n.onFailure({error:o,message:e.String.format(he("launchingerror"),s)})}}}):n.onFailure({error:"not_native_app"})):n.onFailure({error:"no_app_id"})},handleLaunchAppEvent:function(t,n){if(e.is(t.appId)&&""!==t.appId){var i=this.collection.get(t.appId);if(i){e.log(i);var s=i.isNative(),o={origin:t.origin,silent:t.silent,onComplete:function(){n.onComplete({success:!0})},onFailure:function(e){switch(e.error){case"no_launch_infos":n.onFailure({error:"no_launch_infos"});break;case"no_install_selected":n.onFailure({error:"no_install_selected"});break;case"no_install_compatible":i.isOnlineInstallable()&&!e.remoteAvailable?n.onFailure({error:"no_install_compatible_online_installation"}):n.onFailure({error:"no_install_compatible_no_online_installation"});break;case"mandatory_update":n.onFailure({error:"mandatory_update_online_installation"});break;case"ios_app_not_installed":n.onFailure({error:"ios_app_not_installed"});break;case"android_app_not_installed":n.onFailure({error:"android_app_not_installed"});break;case"applet_error":n.onFailure({error:"applet_error"});break;case"unable_install_data":n.onFailure({error:"unable_install_data"})}}};if(t&&t.widgetId&&(o.widgetId=t.widgetId),t.fileName&&t.fileContent&&(o.file={name:t.fileName,content:t.fileContent}),s){if(i.get("supportModeExeName"))return void n.onFailure({error:"no_mode_selected"})}else if(i.isRole())return void n.onFailure({error:"app_is_a_role"});i.launch(o)}else n.onFailure({error:"no_app"})}else n.onFailure({error:"no_app_id"})},clickSuggestion:function(e){var t,n,i=e.target;(t=i.hasClassName("suggestion-item")?i:i.getParent(".suggestion-item"))&&(n=this.sugCollection.get(t.getAttribute("data-id")),this.handleSuggestionClick(n,t))},handleSuggestionClick:function(e){this.showTryModal(e)},showRequestModal:function(t){var n={description:t.get("description"),platforms:[],buttonDisabled:!1,buttonText:he("request"),action:"sendRoleRequest"},i=t.get("platforms"),s=!0;i.length>0?(n.platforms=i.reduce((function(t,n){return n.requested||(t.push({name:n.id,text:e.String.format(he("requeston"),n.name)}),s=!1),t}),[]),s&&(n.buttonDisabled=!0)):(t.get("requested")||t.get("granted"))&&(n.buttonDisabled=!0),this.showRoleModal(t,n)},showTryModal:function(t){var n={description:t.get("productUrl"),platforms:null,buttonDisabled:!1,buttonText:he("tryit"),action:"sendTryRequest"},i=t.get("checkResultsByPlatformId");i.length>1?n.platforms=i.reduce((function(t,n){return n.checkResult&&t.push({name:n.platformId,text:e.String.format(he("tryiton"),n.displayName)}),t}),[]):n.platforms=[],0!==n.platforms.length||i[0].checkResult||(n.buttonDisabled=!0),this.showRoleModal(t,n)},showRoleModal:function(e,t){var n,i,s,o=this,a=t.description,l=t.platforms;l.length>1?n={className:"compass-modal-dropdown",items:l,events:{onClick:function(n,s){o[t.action](e,s.name),i.hide()}}}:1===l.length&&(s=l[0].name),i=new b({className:"compass-modal compass-request-modal",closable:!0,visible:!0,events:{onHide:function(){i.destroy()}},header:"<h4>"+e.get("title")+"</h4>",body:new y({src:a,text:he("noadditionalinfo")}),footer:[new w({value:t.buttonText,className:t.buttonDisabled?"default":"primary",disabled:t.buttonDisabled,events:{onClick:function(){n||(o[t.action](e,s),i.hide())}},dropdown:n}),new w({value:he("cancel"),events:{onClick:function(){i.hide()}}})]}).inject(document.body)},clickRoleInfo:function(){var e=this.elements.expandedRole.getAttribute("data-id");this.showRequestModal(this.collection.get(e))},clickRoleBE:function(e){e.get("id");var t=this,n=new de({title:e.get("title"),closable:t._isNotAddin(),model:e,cockpitCollection:this.collections.cockpitsByRolesCollection.filter((function(t){return e.get("cockpitList").indexOf(t.id)>-1})),businessMethodCollection:this.collections.businessMethodCollection.filter((function(t){return e.get("beList").indexOf(t.id)>-1})),info:!1,buy:!1,request:!1,additionalClassName:"portfolio portfolio-depth6 portfolio-background-white editMode",parentIcon:"ME",events:{onBack:function(){Ne(true)},onBackClick:function(){("0-0"!==ge||we["0-0"])&&("2-0"!==ge&&"2-1"!==ge||we["2-0"]||we["2-1"])?Se.pop():(t._renderContentOnToggle(!0),Se=[])},onShow:function(){ke(true)},onGoHome:function(e){n.goHome(e)},callGoHomes:function(e){Pe(e)},onClose:function(){t.dispatchEvent("onClose")}}});this._injectOverlayOnTop(n),n.show(),k.clickBusinessRole({businessRoleId:e.get("id"),businessRoleName:e.get("title")})},clickRole:function(e,t,n,i){e.get("id");var s,o=this;s=i&&i.request?o.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:e.get("appList")}]):this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e.get("appList")}]);var a=new U({title:e.get("title"),closable:o._isNotAddin(),model:e,info:!t,buy:t,request:i&&i.request,additionalClassName:"Role"===e.get("type")&&"ME"===fe?"portfolio portfolio-depth6 portfolio-background-white editMode":"portfolio portfolio-depth6 portfolio-background-white",parentIcon:fe,view:{class:"portfolio-me-apps",html:s.map((function(t){return new Q({isApp:!0,additionalClassName:"Role"===e.get("type")&&"ME"===fe?"app-item drag-app":"app-item",additionalClassNameImage:t.get("brand")?"is-"+t.get("brand").replace(" ","-"):"",model:t,clickable:"ME"===fe,events:{onItemClick:function(e,t){a.isEditMode||o.clickApp(e,t)},onClickSettings:o.clickSettings.bind(o)}}).render()}))},events:{onClickMore:o._onClickMoreV32.bind(o),onClickBuy:o.showBuy.bind(o),onBack:function(){Ne(n)},onBackClick:function(){("0-0"!==ge||we["0-0"])&&("2-0"!==ge&&"2-1"!==ge||we["2-0"]||we["2-1"])?Se.pop():(o._renderContentOnToggle(!0),Se=[])},onShow:function(){ke(n)},onGoHome:function(e){a.goHome(e)},callGoHomes:function(e){Pe(e)},onClose:function(){o.dispatchEvent("onClose")},onRequestRole:function(e,t){o.sendRoleRequest(e,t)},onRemoveGroup:function(e){we["0-0"]&&we["0-0"].getElement('[data-id="'+e.get("id")+'"]')&&we["0-0"].getElement('[data-id="'+e.get("id")+'"]').destroy(),o.options.preferencesCollection.removeApp&&o.options.preferencesCollection.removeApp(e)},onRemoveFavoriteV3:function(e){e.forEach((function(e){o.removeFavoriteApp(e)}))}}});this._injectOverlayOnTop(a),a.show()},_injectOverlayOnTop:function(e){var t=this.container.getParent().getElements(".content-overlay");e.inject(t[t.length-1]||this.container,"after"),Se.push(e),e.show()},sendRoleRequest:function(t,n){var i=this,s=t.get("platforms"),o=function(){i.showMessage(he("Role has been requested."),5e3)};i.resetCache&&i.resetCache(),i.showMessage("",2e4,!0),r.request({url:r._requestRoleUrl(),method:"POST",contentType:"application/x-www-form-urlencoded",postData:{process:t.get("process"),platform:n},onComplete:function(e){if(e&&0===e.code){if(t.set("requested",!0),n&&s.some((function(e){if(e.id===n)return e.requested=!0,!0})),Se[Se.length-1]&&Se[Se.length-1].addBuildRequestedIcon)s.detect((function(e){return!1===e.requested}))?Se[Se.length-1].rebuildRequestButton():Se[Se.length-1].addBuildRequestedIcon();i.showMessage(e.message,5e3)}else o()},onFailure:o}),k.requestRole({roleId:t.get("process"),roleName:t.get("title")}),e.log("requested "+t.get("process")+":"+n)},sendTryRequest:function(t,n){var i=this,s=t.get("checkResultsByPlatformId"),o=function(){i.showMessage(he("trialrequestfailure"),5e3)};i.showMessage("",2e4,!0),n||(n=s[0].platformId),r.request({url:r._tryRoleUrl(),method:"POST",contentType:"application/x-www-form-urlencoded",postData:{process:t.get("productId"),platform:n},onComplete:function(e){e&&0===e.code?(i.showMessage(e.message,5e3),i.refreshSuggestions()):o()},onFailure:o}),e.log("try "+t.get("productId")+":"+n)},refreshSuggestions:function(){this.views.suggestions.refresh()},_isRemoteDisabled:function(){return void 0===this._removeDisabled&&(this._removeDisabled="true"===I.get("3dremotevm")),this._removeDisabled},openSettings:function(n,i){var s,o,l=this,p=!1;n.isFamily()&&(p=!0,(s=n.getChildrenForFamilyApp()).native?o=s.native:s.widget?o=s.widget:s.web&&(o=s.web)),n.isA2X()&&(n.setA2XNativeApp(me),o=n.getA2XNativeApp());var u,m=this._isRemoteDisabled(),h=(o||n).getRemoteApp(),f=n.getPlatforms(),v=(o||n).get("catEnvs"),C=(n.isFamily()||n.isWeb()||n.isWidget())&&!(!J.getPreferences()||"forceSelectTenant"!==J.getPreferences().forceSelectTenant),y=function(){u&&u.hide&&(u.hideSettings(),l.container.getElement(".scroll-container .scroller-content")&&l.container.getElement(".scroll-container .scroller-content").removeEventListener("scroll",y))},b=i.getOffsets(),S=t.getScrolls(),w=function(t,w,E){var D,A,I=C?null:a.arrayFind(f,(function(e){return e.preferred})),N=I?I.id:null,k=N,_=function(){u.hideSettings()};if("none"!==document.body.getElement(".my-apps-panel").style.display){t&&"undefined"==typeof compassRichWithCef&&(D=t[0],A=t[1]&&t[1].length>0?t[1][0]:null),i.addClassName("active"),l.appsAccordion&&l.appsAccordion.addEvent("onScroll",_);var P={data:{platforms:f.length>1||p?f:null,installs:D,remoteInstall:A,error:(o||n).get("error")},preferredInstallId:E,processes:(o||n).get("licenses").map((function(e){return e.id})),app:n,familyApps:s,isfamilyApps:p,container:l.container,appTitle:n.get("tooltip")||n.get("title"),remoteAppTitle:h?h.get("title"):null,onlineInstallable:!J.isNativeApplicationEnvironment()&&(o||n).isOnlineInstallable(),trigger:i,target:i,isInstallCanBeProposed:ue.isInstallationsCanBeProposed(),renderTo:document.body,position:{x:b.x-S.x,y:b.y-S.y+25},shortcutEnabled:!!N||1===f.length||!!(o||n).get("catEnvConfig"),remoteEnabled:!m&&!!(o||n).get("remoteInfos"),additionalContent:(o||n).canAdditionalContent(l.collections.grantedRoles),isForceSelectTenantActive:C,optionalContent:(o||n).canOptionalContent(l.collections.grantedRoles),events:{onClick:function(t){e.log("new settings")},onShow:function(){l.hideMessage()},onPlatformChange:function(t){var o=t.platform&&N!==t.platform,r=t.install&&E!==t.install;o&&f.forEach((function(i){(i.preferred=i.id===t.platform)&&(N=i.id,p?(s.Windows&&s.Windows.get("platforms").detect((function(e){return e.id===N}))&&(i=s.Windows.get("platforms").detect((function(e){return e.id===N})),s.Windows.set("launchInfos",i.launchInfos),s.Windows.set("envInfos",i.envInfos),s.Windows.set("shortcutLaunchInfos",i.shortcutLaunchInfos),i.remoteLaunchInfos&&s.Windows.get("remoteInfos")&&(s.Windows.get("remoteInfos").remoteLaunchInfos=i.remoteLaunchInfos)),s.Widget&&s.Widget.get("platforms").detect((function(e){return e.id===N}))&&((i=s.Widget.get("platforms").detect((function(e){return e.id===N}))).preferred=!0,s.Widget.set("launchInfos",i.launchInfos),s.Widget.set("launchUrl",i.launchUrl||(p&&s.Widget||n).get("launchUrl")),s.Widget.set("config",i.config||(p&&s.Widget||n).get("config")),s.Widget.set("checksum",i.checksum||(p&&s.Widget||n).get("checksum")),s.Widget.set("platformId",i.id),l.container.getParent().getElements(e.String.format('[data-id="{0}"]',n.get("id"))).forEach((function(t){if(C&&n.getPlatforms().length>1){var i=e.clone(s.Widget.toJSON());i.platformId=""}a.enableWidgetDrag(t,i||s.Widget.toJSON())}))),s.native&&s.native.get("platforms").detect((function(e){return e.id===N}))&&(i=s.native.get("platforms").detect((function(e){return e.id===N})),s.native.set("launchInfos",i.launchInfos),s.native.set("envInfos",i.envInfos),s.native.set("shortcutLaunchInfos",i.shortcutLaunchInfos),i.remoteLaunchInfos&&s.native.get("remoteInfos")&&(s.native.get("remoteInfos").remoteLaunchInfos=i.remoteLaunchInfos))):(n.set("launchInfos",i.launchInfos),(n.isWidget()||p&&s.Widget)&&((p&&s.Widget||n).set("launchUrl",i.launchUrl||(p&&s.Widget||n).get("launchUrl")),(p&&s.Widget||n).set("config",i.config||(p&&s.Widget||n).get("config")),(p&&s.Widget||n).set("checksum",i.checksum||(p&&s.Widget||n).get("checksum")),(p&&s.Widget||n).set("platformId",i.id),l.container.getParent().getElements(e.String.format('[data-id="{0}"]',n.get("id"))).forEach((function(t){if(C&&n.get("platforms").length>1){var i=e.clone((p&&s.Widget||n).toJSON());i.platformId=""}a.enableWidgetDrag(t,i||(p&&s.Widget||n).toJSON())}))),(n.isNative()||n.isA2X()&&n.getA2XNativeApp()||p&&s.native)&&((n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).set("envInfos",i.envInfos),(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).set("shortcutLaunchInfos",i.shortcutLaunchInfos),i.remoteLaunchInfos&&(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).get("remoteInfos")&&((n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).get("remoteInfos").remoteLaunchInfos=i.remoteLaunchInfos))))})),r&&(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).set("install",t.install),(n.isWeb()||n.isWidget()||p&&s.Widget)&&J.getPreferences()&&"forceSelectTenant"===J.getPreferences().forceSelectTenant&&o&&l.handleAppClick(n.isA2X()&&n.getA2XNativeApp()||p&&s.Widget||n,i.getParent("[data-id]"),!0)},onConfigChange:function(t){t.platformId&&v[t.platformId]&&(v[t.platformId].forEach((function(i,o){if(t.name===i.name){v[t.platformId][o].preferred=!0;var a=e.clone(v[t.platformId][o]);a.id=t.platformId,n.isA2X()&&n.getA2XNativeApp()&&n.getA2XNativeApp().set("catEnvConfig",a),(p&&s.native||n).set("catEnvConfig",a)}})),f.forEach((function(e){e.id===t.platformId&&((n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).set("envInfos",e.envInfos),(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).set("shortcutLaunchInfos",e.shortcutLaunchInfos),e.remoteLaunchInfos&&(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).get("remoteInfos")&&((n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).get("remoteInfos").remoteLaunchInfos=e.remoteLaunchInfos))})))},onHideSettings:function(e,t){var o=e.platform&&k!==e.platform,a=e.install&&E!==e.install;if(i.removeClassName("active"),l.appsAccordion&&l.appsAccordion.removeEvent("onScroll",_),o||a){if(p)for(const t in s)s.hasOwnProperty(t)&&r.setPreferences({appid:s[t].id,preferredPlatform:e.platform,preferredInstall:e.install});else r.setPreferences({appid:n.id,preferredPlatform:e.platform,preferredInstall:e.install});k=e.platform}else t&&e.config&&(r.setPreferences({appid:(p&&s.native||n).id,preferredPlatform:e.config.platformId,preferredCatEnv:e.config.name}),r.setPreferences({appid:(p&&s.native||n).id,preferredPlatform:e.config.platformId,preferredInstall:e.install}),k=e.config.platform)},onClickShortcut:function(e){c.createV6Shortcut(d.getInstall(e),n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n)},onClickUpdate:function(e,t){var i="remote"===e,o=i?A:d.getInstall(e);ue.isInstallationsCanBeProposed()&&(t?d.onlineInstallation(i?h:n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n,o,null,i):d.onlineInstallation(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n,null,o))},onClickInstall:function(){!0===ue.enableMockFUN125890()&&(n.isValidInstallTypeForCEF()&&n.canCheckCEF()||n.isA2X()&&n.getA2XNativeApp().isValidInstallTypeForCEF()&&n.getA2XNativeApp().canCheckCEF()||s&&s.native.isValidInstallTypeForCEF()&&s.native.canCheckCEF())?(n.isA2X()&&n.getA2XNativeApp()||s&&s.native||n).getCEFList(h,(function(e,t,i,o,a,r,c){l.getCEFModal(n,e,t,i,o,a,r,c,(function(){(n.isA2X()&&n.getA2XNativeApp()||s&&s.native||n).getInstallList((s&&s.native||n).remoteApp,(function(){d.onlineInstallation(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n,null,null)}))}))})):d.onlineInstallation(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n,null,null)},onClickOptionalConentDocumentation:function(){require(["DS/WebUAUtils/WebUAUtils"],(function(e){window.open(e.getHelpFullPath("EXP3DContentUserMap/content-r-wn.htm"))}))},onClickInstallRemote:function(){d.onlineInstallation(h,null,null,!0)},onClickAdditional:function(e){var t=d.getInstall(e);ue.isInstallationsCanBeProposed()&&d.onlineInstallation(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n,null,t,null,null,!0)},onClickOptionalContent:function(e,t,i){var o,a;"optionalContentInstall"===i?o=d.getInstallOptional(e):a=(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n).get("stackOptionContentList"),ue.isInstallationsCanBeProposed()&&d.onlineInstallation(n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n,!!t&&o,a,null,null,!1,!1,!0)},onClickUninstall:function(e){var t=d.getInstall(e);d.removeInstallation(t,n.isA2X()&&n.getA2XNativeApp()||p&&s.native||n)},onClickLaunchApp:function(){var e=!J.isNativeApplicationEnvironment()&&n.isA2X()&&n.getA2XNativeApp()||s&&s.native||n;l.handleAppClick(e,i,!(!J.getPreferences()||"forceSelectTenant"!==J.getPreferences().forceSelectTenant))},launchAppFamily:function(e){l.handleAppClick(e,i,!(!J.getPreferences()||"forceSelectTenant"!==J.getPreferences().forceSelectTenant))}}};u=p?new se(P):new g(P),l.container.getElement(".scroll-container .scroller-content")&&l.container.getElement(".scroll-container .scroller-content").addEventListener("scroll",y),u.show()}else l.hideMessage()};a.isCompassV3()||this.elements.search.blur(),this.showMessage("",3e4,!0),J.isNativeApplicationEnvironment()||!(n.isFamily()&&s.native||n.isNative()||n.isA2X())||n.isNativeMarketApp()||"ios"===a.getOs()||"macos"===a.getOs()?w():this.canShowOptionCotent?(n.isA2X()&&n.getA2XNativeApp()||s&&s.native||n).getOptionalContent(h,(function(){(n.isA2X()&&n.getA2XNativeApp()||s&&s.native||n).getInstallList(h,w)})):(n.isA2X()&&n.getA2XNativeApp()||s&&s.native||n).getInstallList(h,w)},clickSettings:function(e,t){var n=t.getElement(".settings-img");n&&this.openSettings(e,n)},longClickApp:function(e){var t=this.collection.get(e.getAttribute("data-id"));if(t.isRole())this.expandRoleDetail(t);else if(t.needSettingsMenu()){var n=e.getElement(".settings-img");n&&this.openSettings(t,n)}},clickExpand:function(e){var t=e.target.getParent(".exp-item").getAttribute("data-id"),n=this.collection.get(t);this.expandRoleDetail(n)},expandRoleDetail:function(e){var t=this.elements.expandedRole;this.views.expandedRole.filterApps(e.get("appList")),t.getElement(".expanded-role-title").setText(e.get("title")),t.setAttribute("data-id",e.id),this.container.addClassName("roles-expanded")},hideRoleDetail:function(){this.container.removeClassName("roles-expanded")},toggleAllRoles:function(){this.container.toggleClassName("all-roles"),this.elements.allRolesBtn.toggleClassName("fonticon-down-dir"),this.elements.allRolesBtn.toggleClassName("fonticon-up-dir")},close:function(){if(!ve){k._IDS.compass.cross;k.compassClose()}this.dispatchEvent("onClose"),ve=""},onClose:function(){ve="",J.isNativeApplicationEnvironment()||J.isMobileAppEnvironnementV2()?(D.publish("compassPanelOnHide",{}),this._reLoadQuadrant()):(this.container.hide(),Ne(!0,!0)),this._resetWorldNavigation()},open:function(){this.dispatchEvent("onOpen")},onOpen:function(){ve="",this.container.show(),(!Ee||Se&&Se.length>0)&&(ke(!0),Se&&Se[0]&&Se[0].options&&"WORLD"===Se[0].options.parentIcon&&J.compassPanelFullSize()),this.options.buildSearch&&this.openCompassSearch(),r.get3DDashboardUrl()},displayQuadrant:function(e){var t=this.currentQuadrant;if(e){if(a.isCompassV2()||a.isCompassV3()){var n="play"===e?"north":e;this.appsAccordion&&this.appsAccordion.setTitle("my-apps-section",this.options.sectionData[n].title,this._getClassForQuadrant(n))}else this.appsAccordion.setTitle("my-apps-section",this.options.sectionData[e].title,this._getClassForQuadrant(e));t!==e&&(this.container.removeClassName(t),this.container.addClassName(e),this.currentQuadrant=e)}},_getClassForQuadrant:function(e){var t={north:"social",west:"3d",east:"intelligence",south:"simulation"},n="";return t[e]&&(n=" fonticon fonticon-compass-"+t[e]),e+n},forEachQuadrant:function(e){for(var t=["north","west","south","east"],n=t.length-1;n>=0;n--)e(t[n])},showMessage:function(e,t,n){var i=this.message;i&&(i.show(e,n),t&&i.hide(t))},hideMessage:function(e){var t=this.message;t&&t.hide(e)},setCanShowOptionCotent:function(e){this.canShowOptionCotent=e},mask:function(){this.maskElmt.show()},unmask:function(){this.maskElmt.hide()},rebuildFavorite:function(e){var t=this.collections.favorite.get(e),n=this.collections.favorite.indexOf(t);this._rebuildFavorite(t,n)},setFavoriteRoleV3:function(e){var t=this.collections.favorite,n=1,i=t.length,s=this.collections.visibleRoles.get(e)?this.collections.visibleRoles.get(e).get("appList"):"";this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:s}]).forEach((function(e){e.set("favoriteOrder",i+n),e.set("isFavorite",!0),t.add(e),n++})),t.saveFavorites()},setFavoriteAppsV3:function(e){var t=this.collections.favorite,n=1,i=t.length;this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:e}]).forEach((function(e){e.set("favoriteOrder",i+n),e.set("isFavorite",!0),t.add(e),n++})),t.saveFavorites()},setFavoriteApps:function(e,t){var n=this,i=document.querySelector(".my-apps-panel .accordion-item .delete-favorite .fonticon-trash"),s=this.collections.favorite,o=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e}]);o&&i&&"none"===i.style.display&&(i.style.display=""),o.forEach((function(e){var i=e.isChildFamilyApp()&&e.getParentForChildrenFamilyApp()||"";i?(i.get("isFavorite")||n.addToFavorite(i,t),i.set("isFavorite",!0),t++):(e.get("isFavorite")||n.addToFavorite(e,t),e.set("isFavorite",!0),t++)})),a.isCompassV3()?this.getContent().getElement(".favorite").removeClassName("closed"):(this.getContent().getElement(".delete-favorite").hasClassName("hide")&&this.getContent().getElement(".delete-favorite").removeClassName("hide"),this.getContent().getElement(".my-favorite-apps-section").hasClassName("closed")&&this.getContent().getElement(".my-favorite-apps-section").removeClassName("closed")),document.body.getElements(".my-favorite-apps-section .item-view-v3").forEach((function(e,t){var n=e.getAttribute("data-id");s.get(n).set("favoriteOrder",t)})),s.saveFavorites()},reorderFavoriteApp:function(e){var t=this.collections.favorite.get(e);t&&this.views.favorite.reorderApp(t)},removeFavoriteApp:function(e){var t=this.collections.favorite,n=t.get(e),i=document.querySelector(".my-apps-panel .accordion-item .delete-favorite .fonticon-trash");n&&(n.set("isFavorite",!1),n.set("favoriteOrder",-1)),t.length<1&&i&&"none"!==i.style.display&&(i.style.display="none"),a.isCompassV3()&&t.length<1&&!this.getContent().getElement(".delete-favorite").hasClassName("hide")&&this.getContent().getElement(".delete-favorite").addClassName("hide"),t.saveFavorites()},removeAllFavoriteApp:function(){var e=this,t=this.collections.favorite,n=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"isFavorite",value:!0}]),i=document.querySelector(".my-apps-panel .accordion-item .delete-favorite .fonticon-trash");n.forEach((function(t){t.set("isFavorite",!1),t.set("favoriteOrder",-1),e.removeToFavorite(t)})),i&&"none"!==i.style.display&&(i.style.display="none"),this.getContent().getElement(".delete-favorite").hasClassName("hide")||this.getContent().getElement(".delete-favorite").addClassName("hide"),t.saveFavorites()},toggleRole:function(e,t){if(!0===t||!1===t?e.set("active",t):e.set("active",!e.get("active")),!e.get("brand")){var n=this.roleV34Collection.find((function(t){return t.get("acronym")===e.get("process")&&!t.get("contact")}));n&&("SSU"===e.get("process")?e.set("brand","SIMULIA"):e.set("brand",n.get("brand")))}},getVisibleHeight:function(e){return this.appsAccordion.getVisibleHeight(e)},showTempHeight:function(e,t){this.appsAccordion.showTempHeight(e,t)},resetCache:function(){we={}},hideTempHeight:function(e){this.appsAccordion.hideTempHeight(e)},closeSection:function(e){this.appsAccordion.closeSection(e)},isScrolling:function(){return this.appsAccordion.isScrolling()},stopScrolling:function(){this.appsAccordion.onScrollStop()},showDeleteZone:function(){var e;(e=this.getContent().getElement(".delete-favorite")).addClassName("show"),e.removeClassName("hide")},hideDeleteZone:function(){var e;(e=this.getContent().getElement(".delete-favorite")).removeClassName("active"),e.removeClassName("show")},changeRoles:function(){var e=this.collections.grantedRoles.getSelectedRoleApps();"2-0"!==ge&&"2-1"!==ge||this.filterAppsInViews(e),we&&we[ge]?this.collections.visibleRoles.forEach((function(e){this.toggleRole(e,!0)}),this):!we||"2-0"!==ge&&"2-1"!==ge||we["2-0"]||we["2-1"]||this._renderContentOnToggle(!0),this.dropDownPref&&this.dropDownPref.updateDropDownPref()},changeRolesVisible:function(){var e=this.collections.visibleRoles.getSelectedRoleApps();"0-0"===ge&&this.filterAppsInViews(e),we&&we[ge]?this.collections.visibleRoles.forEach((function(e){this.toggleRole(e,!0)}),this):we&&!we[ge]&&"0-0"===ge&&this._renderContentOnToggle(!0),this.dropDownPref&&this.dropDownPref.updateDropDownPref()},_rebuildFavorite:function(e,t){var n=this,i=new Q({model:e,additionalClassNameImage:e.get("brand")?"is-"+e.get("brand").replace(" ","-"):"",clickable:!0,additionalAttribute:{"data-favorite-order":e.get("favoriteOrder")},additionalClassName:"app-item drag-app",events:{onItemClick:function(e,t){n.clickApp(e,t)},onClickSettings:n.clickSettings.bind(n)}}).render(),s=we["0-0"].getElements(".my-favorite-apps-section .app-item,.exp-item"),o=s.detect((function(e,n){return n===t}));o?i.inject(o,"before"):0===t?i.inject(we["0-0"].getElement(".content-wrapper .items-roles-view.compass-scroll-accordion-section.favorite.my-favorite-apps-section  .clearfix"),"before"):i.inject(s[s.length-1],"after")},addToFavorite:function(e,t){var n=this,i=new Q({model:e,additionalClassNameImage:e.get("brand")?"is-"+e.get("brand").replace(" ","-"):"",clickable:!0,additionalAttribute:{"data-favorite-order":e.get("favoriteOrder")},additionalClassName:"app-item drag-app",events:{onItemClick:function(e,t){n.clickApp(e,t)},onClickSettings:n.clickSettings.bind(n)}}).render(),s=we["0-0"].getElements(".my-favorite-apps-section .app-item,.exp-item").detect((function(e,t){return e.hasClassName("exp-item")}));s?i.inject(s,"before"):we["0-0"]&&!we["0-0"].getElement('.my-favorite-apps-section [data-id="'+e.get("id")+'"]')&&i.inject(we["0-0"].getElement(".content-wrapper .items-roles-view.compass-scroll-accordion-section.favorite.my-favorite-apps-section  .clearfix"),"before")},removeToFavorite:function(e){we["0-0"]&&we["0-0"].getElement('[data-id="'+e.get("id")+'"]')&&we["0-0"].getElement('[data-id="'+e.get("id")+'"]').destroy()},clearCompassSearch:function(){this.search.getParent&&!this.search.getParent("compass-nav-search").isHidden()&&this.container.getElement(".compass-nav-search-icon.compass-search.fonticon-search")&&e.Event.dispatchEvent(this.container.getElement(".compass-nav-search-icon.compass-search.fonticon-search"),"reset")},openCompassSearch:function(){var t=this,n=setInterval((function(){let i=t.container.getElement("compass-nav-search input");i&&i.focus(),"0-0"===ge&&a.isSupportQuickLink()&&a.isOpenFullSize()&&t.search.getParent&&t.search.getParent("compass-nav-search").isHidden()&&t.container.getElement(".compass-nav-search-icon.compass-search.fonticon-search")&&e.Event.dispatchEvent(t.container.getElement(".compass-nav-search-icon.compass-search.fonticon-search"),"open"),(t.container.getElement("compass-nav-main .active")||t.container.getElement("compass-nav-main")&&t.container.getElement("compass-nav-main").isHidden())&&clearInterval(n)}),300)},openSectionsCompassSearch:function(e){var t=this;t.accordion&&t.accordion.selectAll&&(e.match(/^\s*role(s|)\s*:/g)?(t.accordion.unselectAll(),t.accordion.selectItem("roles")):t.accordion.selectAll())}};return n.extend(Oe)})),define("DS/i3DXCompass/View/MyApps",["UWA/Core","UWA/Utils/Client","UWA/Class/View","UWA/Controls/Accordion","UWA/Controls/Scroller","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/InstallManager","DS/i3DXCompass/TopBarManager","DS/i3DXCompass/Collection/AppList","DS/i3DXCompass/View/AppListView","DS/i3DXCompass/View/SuggestionListView","DS/i3DXCompass/Controls/Message","DS/i3DXCompass/Controls/Settings","DS/i3DXCompass/Controls/ScrollAccordion","DS/i3DXCompass/Controls/Search","DS/i3DXCompass/Controls/IframeLoader","DS/UIKIT/Modal","DS/UIKIT/Spinner","DS/UIKIT/Input/Button","DS/i3DXCompass/View/ServicesView","DS/i3DXCompass/CacheManager","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Types","UWA/Utils/Cookie","DS/i3DXCompass/Controls/Compass","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h,f,g,v,C,y,b,S,w,E,D,A,I,N,k,_,P){"use strict";var T=e.i18n,O={tagName:"div",className:"windows10"===a.getOs()?"wind10 my-apps-panel "+(a.isCompassV2()?"V2":""):"my-apps-panel"+(a.isCompassV2()?" V2":""),domEvents:{"click .compass-close":"close","click .exp-item":"clickApp","click .suggestion-item":"clickSuggestion","click .settings-img":"clickSettings","click .expand-img":"clickExpand","click .all-roles-btn":"toggleAllRoles","click .expanded-role-close, .expanded-role-title":"hideRoleDetail","click .expanded-role-info":"clickRoleInfo"},canShowOptionCotent:!1,currentQuadrant:"",itemsPerLine:0,setup:function(e){this.options=e,l.addEvents({onShowMessage:this.showMessage.bind(this),onHideMessage:this.hideMessage.bind(this)}),this.collections={grantedRoles:new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!0}]}),visibleRoles:new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!0},{key:"visible",value:!0}]})},this.views={},this.sugCollection=e.sugCollection},render:function(){var t,n=this.container;return(this.maskElmt=e.createElement("div",{class:"compass-loading",html:new S({visible:!0,className:"compass-spinner"})})).inject(n),this.options.closable&&(t=e.createElement("button",{class:"close compass-close fonticon fonticon-cancel",attributes:{type:"button","aria-hidden":!0}}),n.appendChild(t),new P({position:"left",target:t,body:T("Close")})),n.hide(),this},renderAppsView:function(t){var n,i,s,l=this,r=this.elements,c=this.container,d=new f,p=this.collections,h=this.views;p.favorite=new u(null,{master:this.collection,comparator:"favoriteOrder",filters:[{key:"isFavorite",value:!0},{key:"visibleQuadrant",value:!0}]}),p.platformRoles=new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!1},{key:"visible",value:!0}]}),p.expandedRole=new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]}),p.apps={},p.lma={},s=p.grantedRoles.getSelectedRoleApps(),h.favorite=new m({collection:p.favorite,customFilters:{appIds:s},customClass:"favorite",favorite:!0,draggable:!0}),h.visibleRoles=new m({collection:p.visibleRoles,customClass:"roles",draggable:!0}),h.platformRoles=new m({collection:p.platformRoles,customClass:"roles not-available-roles",draggable:!1}),h.expandedRole=new m({collection:p.expandedRole,customFilters:{appIds:[]},draggable:!0}),h.apps={},h.lma={},this.options.sectionData=t,r.error&&(r.error.destroy(),delete r.error),this.forEachQuadrant((function(e){p.apps[e]=new u(null,{master:l.collection,comparator:"title",filters:[{key:"quadrant",value:e},{key:"lma",value:!1}]}),h.apps[e]=new m({collection:p.apps[e],customFilters:{appIds:s},customClass:e,draggable:!0}),p.lma[e]=new u(null,{master:l.collection,comparator:"title",filters:[{key:"quadrant",value:e},{key:"lma",value:!0}]}),h.lma[e]=new m({collection:p.lma[e],customClass:a.isCompassV2()?"favorite":e})})),t.eservices&&t.eservices.data&&t.eservices.data.length>0&&(p.eservices=new o(t.eservices.data),h.eservices=new E({collection:p.eservices})),c.addEvent("resize",(function(e){l.resizeAccordionData(e)})),n=new C({events:{onSearch:function(e){l.searchInViews(e)}}}),e.is(D._getUser())||n.container.setStyle("visibility","hidden"),n.inject(c),r.search=n,i=this.buildAccordion(),e.createElement("div",{class:"compass-accordion-wrapper",html:i}).inject(c),d.inject(c),this.appsAccordion=i,this.message=d,this.resizeAccordionData(),p.grantedRoles.addEvent("onChange:active",this.changeRoles.bind(this)),p.grantedRoles.addEvent("onChange:appList",this.changeRoles.bind(this)),p.grantedRoles.addEvent("onRemove",this.changeRoles.bind(this)),p.grantedRoles.addEvent("onMultipleAdd",this.changeRoles.bind(this))},renderSuggestionsView:function(){this.getSuggestionsView().renderSuggestions(),this.appsAccordion&&this.getSuggestionsView().collection.length>0&&this.appsAccordion.showSection("suggestions-section")},getSuggestionsView:function(){var e=this.views;return e.suggestions||(e.suggestions=new h({collection:this.sugCollection})),e.suggestions},renderErrorView:function(t){var n=this.elements;n.error||(n.error=e.createElement("div",{class:"compass-error",text:t}).inject(this.container))},_needToShowMyRoles:function(){return this.collections.visibleRoles.length>1||this.collections.platformRoles.length>0},buildAccordion:function(){var t,n=this,i=this.options.sectionData,s=!1,l=[],r=this.views,c=this.elements,d=[],p=[],u=c.expandedRole=e.createElement("div",{tag:"div",class:"expanded-role",html:[{class:"expanded-role-title"},{tag:"span",class:"fonticon fonticon-left-open expanded-role-close"},{tag:"span",class:"fonticon fonticon-info-circled expanded-role-info"},this.views.expandedRole.render()]}),m=c.allRolesBtn=e.createElement("span",{class:"fonticon fonticon-down-dir fonticon-interact all-roles-btn"}),h=this.getSuggestionsView(),f=r.eservices;return e.Utils.Client.Features.touchEvents||new P({position:"left",target:m,body:T("Show more roles")}),this.forEachQuadrant((function(t){d.push(r.apps[t].render()),!1===s&&r.apps[t].collection.size()>0&&(s=!0),d.push(e.createElement("div",{class:"alert-message alert-default noapps "+t,text:i[t].noapps})),p.push(r.lma[t].render())})),(i.services&&i.services.data&&i.services.data.length>0||f)&&l.push({id:"wrapperMP",title:T("3DEXPERIENCEMarketplace")||i.wrapperMP&&i.wrapperMP.title,html:f?e.createElement("div",{styles:{height:10}}):new E({collection:new o(i.services&&i.services.data||[])}).render(),open:!i.wrapperMP.closed,visible:!0,name:f?"learn-more-about-section":"services-section"}),f&&l.push({id:"eservices",parent:"wrapperMP",icon:"component",title:i.eservices&&i.eservices.title,html:r.eservices.render(),open:!i.eservices.closed,visible:!0,name:"services-section"}),f&&i.services&&i.services.data&&i.services.data.length>0&&l.push({id:"services",parent:"wrapperMP",icon:"globe",title:i.services&&i.services.title||T("MyCommunityServices"),html:new E({collection:new o(i.services&&i.services.data||[])}).render(),open:!i.services.closed,visible:!0,name:"services-section"}),l.push({id:"wrapperRole",title:i.wrapperRole.title||T("wrapperRole"),html:e.createElement("div",{styles:{height:10}}),open:!i.wrapperRole.closed,visible:!a.isCompassV2()&&e.is(D._getUser()),name:"learn-more-about-section"}),l.push({id:"roles",parent:a.isCompassV2()?"":"wrapperRole",title:i.roles.title,icon:"role roles",html:[r.visibleRoles.render(),e.createElement("div",{class:"alert-message alert-default noapps roles",text:i.roles.noapps}),r.platformRoles.render(),m,u],open:!i.roles.closed,visible:this._needToShowMyRoles(),name:"my-roles-section"}),e.is(D._getUser())&&l.push({id:"favorite",parent:a.isCompassV2()?"":"wrapperRole",title:i.favorite.title,icon:"star-empty favorite",html:[r.favorite.render(),e.createElement("div",{class:"alert-message alert-default noapps favorite",text:T("dropfavoriteappshere")})],open:!i.favorite.closed,visible:!0,name:"my-favorite-apps-section"}),a.isCompassV2()&&s?(t=l.length,this.forEachQuadrant((function(s){d[s]=[],d[s].push([r.apps[s].render(),e.createElement("div",{class:"alert-message alert-default noapps "+s,text:i[s].noapps})]),l.splice(t,0,{id:"apps-"+s,title:i[s].title,icon:n._getClassForQuadrant(s),html:d[s],open:!0,//!sectionData.north.closed,
visible:!0,name:"my-apps-section-"+s})}))):s&&l.push({id:"apps",parent:a.isCompassV2()?"":"wrapperRole",title:"",html:d,open:!i.north.closed,visible:!0,name:"my-apps-section"}),e.is(e.Array.detect(p,(function(e){return!e.getContent().hasClassName("empty")})))&&l.push({id:"lma",title:i.lma.title,html:p,open:!i.lma.closed,visible:!0,name:"learn-more-about-section"}),l.push({id:"suggestions",title:i.suggestions.title,html:h.render(),open:!i.suggestions.closed,visible:h.suggestionsRendered,name:"suggestions-section"}),new v({className:"apps-accordion",sections:a.isCompassV2()?7:4,scroller:!0,data:l,events:{onToggleSection:this.saveSections.bind(this),onScrollTop:function(){n.dispatchEvent("onScrollTop")},onScrollDown:function(){n.dispatchEvent("onScrollDown")},onRemoveAllFavoriteApp:function(){n.removeAllFavoriteApp()}}})},resizeAccordionData:function(){var e,t=this.container.getSize().width+1-34,n=this.itemsPerLine;(e=Math.floor(t/88))!==n&&(this.container.removeClassName("items-per-line-"+n),this.container.addClassName("items-per-line-"+e),this.itemsPerLine=e)},saveSections:function(){var t={};this.container.getElements(".compass-accordion-wrapper .compass-scroll-accordion-section").forEach((function(e){t[e.getAttribute("data-id")]=e.hasClassName("closed")})),e.is(D._getUser())&&r.saveSectionStatus(JSON.stringify(t))},manageRoleSectionDisplay:function(){this.appsAccordion&&(this._needToShowMyRoles()?this.appsAccordion.showSection("my-roles-section"):(this.appsAccordion.hideSection("my-roles-section"),this.collections.visibleRoles.forEach((function(e){this.toggleRole(e,!0)}),this)))},initTopBar:function(){var e=this.collections.visibleRoles;p.setRoles(e),e.addEvent("onChange:active",(function(e){p.setChecked(e)})),e.addEvent("onMultipleAdd",(function(){p.setRoles(e)})),e.addEvent("onRemove",(function(e){!0===e.get("granted")&&p.removeRole(e)}))},searchInViews:function(e){this.filterViews("search",e)},filterAppsInViews:function(e){this.filterViews("filterApps",e)},filterViews:function(t,n){var i=this.views,s=e.is(n,"string")&&n.match(/^\s*role(s|)\s*:/g),o=s?n.replace(/^\s*role(s|)\s*:/g,"").trim():"",a=s?"":n;i.favorite[t](a),i.platformRoles[t](o),i.visibleRoles[t](o),this.forEachQuadrant((function(e){i.apps[e][t](a)}))},clickApp:function(e){var t,n,i=e.target;this._handleAppClick||(this._handleAppClick=a.debounce(this.handleAppClick,500,!0).bind(this)),i.hasClassName("exp-item")?t=i:(i.hasClassName("icon")||i.hasClassName("title"))&&(t=i.getParent()),t&&(n=this.collection.get(t.getAttribute("data-id")),this._handleAppClick(n,t))},handleAppClick:function(t,n){var i=this,s=t.get("tooltip")||t.get("title"),o=t.isNative(),l=(_._IDS.compass.app,t.isRole()?t.get("process"):t.get("id")),r=t.get("title"),c=n.getParent("[data-id]")?n.getParent("[data-id]").getAttribute("data-id").indexOf("apps-")>-1?n.getParent("[data-id]").getAttribute("data-id").split("apps-")[1]:n.getParent("[data-id]").getAttribute("data-id"):"",p={onComplete:function(n){i.options.closeOnLaunch&&i.dispatchEvent("onClose"),o&&(p.support?i.showMessage(T("supportactivated"),5e3):n.remote?i.showMessage(e.String.format(T("remoting"),s),5e3):i.showMessage(e.String.format(T("launching"),s),5e3),I.get()&&A.publish("setTypesCallback",e.merge({appId:t.get("id")},I.get())))},onFailure:function(o){switch(o.error){case"no_launch_infos":case"no_install_selected":i.hideMessage(),i.openSettings(t,n.getElement(".settings-img"));break;case"no_install_compatible":i.hideMessage(),t.isOnlineInstallable()&&!o.remoteAvailable?d.onlineInstallation(t,null,null):i.openSettings(t,n.getElement(".settings-img"));break;case"mandatory_update":i.hideMessage(),d.onlineInstallation(o.app,o.install,null,o.remote);break;case"windows10_app_not_installed":i.hideMessage(),window.location="https://www.microsoft.com/store/apps/9wzdncrdjzv3";break;case"ios_app_not_installed":i.hideMessage(),a.isIphone()?window.location="https://itunes.apple.com/fr/app/3dplay-ar/id1455204301":window.location="https://itunes.apple.com/us/app/3dplay/id825988585?mt=8";break;case"android_app_not_installed":i.hideMessage(),window.location="https://play.google.com/store/apps/details?id=com.dsy.threedplayar";break;case"applet_error":100===o.returnCode?i.showMessage(T("launcherbusyretry"),5e3):o.remote?i.showMessage(e.String.format(T("remotingerror"),s),5e3):i.showMessage(e.String.format(T("launchingerror"),s),5e3)}}};if(o){if(t.get("supportModeExeName")){var u=new b({className:"compass-modal compass-modal-support",closable:!0,visible:!0,events:{onHide:function(){u.destroy()}},header:"<h4>"+T("supportmode")+"</h4>",body:T("supportactivated")+"<br>"+T("wantsupport"),footer:[e.createElement("button",{class:"btn btn-primary",text:T("yes"),events:{click:function(){p.support=!0,i.showMessage("",2e4,!0),t.launch(p),u.hide()}}}),e.createElement("button",{class:"btn btn-default",text:T("no"),events:{click:function(){i.showMessage("",2e4,!0),t.launch(p),u.hide()}}}),e.createElement("button",{class:"btn btn-default",text:T("cancel"),events:{click:function(){u.hide()}}})]}).inject(document.body);return void _.clickApp({quadrant:c,appId:l,appName:r})}this.showMessage("",2e4,!0)}else if(t.isRole())return _._IDS.compass.role,void(t.get("granted")?(t.get("active")?("Deactive",_.desactivateRole({quadrant:c,roleId:l,roleName:r})):("Active",_.activateRole({quadrant:c,roleId:l,roleName:r})),this.toggleRole(t)):("OpenRequestModal",_.requestRole({quadrant:c,roleId:l,roleName:r}),this.showRequestModal(t)));_.clickApp({quadrant:c,appId:l,appName:r}),o&&I.get()?p.onComplete({}):t.launch(p)},handleInstallDetectionEvent:function(e,t,n){if(e.appId){var i=this.collection.get(e.appId);i.isNative()?i.install({forceUpdate:!0,eventDetection:!0,silent:!!n,onComplete:function(){t.onComplete()},onFailure:function(e){t.onFailure(e)}}):t.onFailure({error:"not_native_app"})}else t.onFailure({error:"no_app_id"})},handleInstallAppEvent:function(t,n){var i,s,o=t.appId;o?(i=this.collection.get(o),s=i.get("tooltip")||i.get("title"),i.isNative()?i.install({forceUpdate:!0,onComplete:function(){n.onComplete()},onFailure:function(t){var o=t.error;switch(o){case"no_install_compatible":i.isOnlineInstallable()&&!t.remoteAvailable?d.onlineInstallation(i,null,null,null,!0,null,n):n.onFailure({error:"no_install_compatible_no_online_installation"});break;case"mandatory_update":d.onlineInstallation(t.app,t.install,null,t.remote,!0);break;case"applet_error":100===t.returnCode||t.remote?n.onFailure({error:o,message:T("launcherbusyretry")}):n.onFailure({error:o,message:e.String.format(T("launchingerror"),s)})}}}):n.onFailure({error:"not_native_app"})):n.onFailure({error:"no_app_id"})},handleLaunchAppEvent:function(t,n){if(e.is(t.appId)&&""!==t.appId){var i=this.collection.get(t.appId);if(i){e.log(i);var s=i.isNative(),o={silent:t.silent,onComplete:function(){n.onComplete({success:!0})},onFailure:function(e){switch(e.error){case"no_launch_infos":n.onFailure({error:"no_launch_infos"});break;case"no_install_selected":n.onFailure({error:"no_install_selected"});break;case"no_install_compatible":i.isOnlineInstallable()&&!e.remoteAvailable?n.onFailure({error:"no_install_compatible_online_installation"}):n.onFailure({error:"no_install_compatible_no_online_installation"});break;case"mandatory_update":n.onFailure({error:"mandatory_update_online_installation"});break;case"ios_app_not_installed":n.onFailure({error:"ios_app_not_installed"});break;case"android_app_not_installed":n.onFailure({error:"android_app_not_installed"});break;case"applet_error":n.onFailure({error:"applet_error"});break;case"unable_install_data":n.onFailure({error:"unable_install_data"})}}};if(t.fileName&&t.fileContent&&(o.file={name:t.fileName,content:t.fileContent}),s){if(i.get("supportModeExeName"))return void n.onFailure({error:"no_mode_selected"})}else if(i.isRole())return void n.onFailure({error:"app_is_a_role"});i.launch(o)}else n.onFailure({error:"no_app"})}else n.onFailure({error:"no_app_id"})},clickSuggestion:function(e){var t,n,i=e.target;(t=i.hasClassName("suggestion-item")?i:i.getParent(".suggestion-item"))&&(n=this.sugCollection.get(t.getAttribute("data-id")),this.handleSuggestionClick(n,t))},handleSuggestionClick:function(e){this.showTryModal(e)},showRequestModal:function(t){var n={description:t.get("description"),platforms:[],buttonDisabled:!1,buttonText:T("request"),action:"sendRoleRequest"},i=t.get("platforms"),s=!0;i.length>0?(n.platforms=i.reduce((function(t,n){return n.requested||(t.push({name:n.id,text:e.String.format(T("requeston"),n.name)}),s=!1),t}),[]),s&&(n.buttonDisabled=!0)):(t.get("requested")||t.get("granted"))&&(n.buttonDisabled=!0),this.showRoleModal(t,n)},showTryModal:function(t){var n={description:t.get("productUrl"),platforms:null,buttonDisabled:!1,buttonText:T("tryit"),action:"sendTryRequest"},i=t.get("checkResultsByPlatformId");i.length>1?n.platforms=i.reduce((function(t,n){return n.checkResult&&t.push({name:n.platformId,text:e.String.format(T("tryiton"),n.displayName)}),t}),[]):n.platforms=[],0!==n.platforms.length||i[0].checkResult||(n.buttonDisabled=!0),this.showRoleModal(t,n)},showRoleModal:function(e,t){var n,i,s,o=this,a=t.description,l=t.platforms;l.length>1?n={className:"compass-modal-dropdown",items:l,events:{onClick:function(n,s){o[t.action](e,s.name),i.hide()}}}:1===l.length&&(s=l[0].name),i=new b({className:"compass-modal compass-request-modal",closable:!0,visible:!0,events:{onHide:function(){i.destroy()}},header:"<h4>"+e.get("title")+"</h4>",body:new y({src:a,text:T("noadditionalinfo")}),footer:[new w({value:t.buttonText,className:t.buttonDisabled?"default":"primary",disabled:t.buttonDisabled,events:{onClick:function(){n||(o[t.action](e,s),i.hide())}},dropdown:n}),new w({value:T("cancel"),events:{onClick:function(){i.hide()}}})]}).inject(document.body)},clickRoleInfo:function(){var e=this.elements.expandedRole.getAttribute("data-id");this.showRequestModal(this.collection.get(e))},sendRoleRequest:function(t,n){var i=this,s=t.get("platforms"),o=function(){i.showMessage(T("requestfailure"),5e3)};i.showMessage("",2e4,!0),r.request({url:r._requestRoleUrl(),method:"POST",contentType:"application/x-www-form-urlencoded",postData:{process:t.get("process"),platform:n},onComplete:function(e){e&&0===e.code?(t.set("requested",!0),n&&s.some((function(e){if(e.id===n)return e.requested=!0,!0})),i.showMessage(e.message,5e3)):o()},onFailure:o}),e.log("requested "+t.get("process")+":"+n)},sendTryRequest:function(t,n){var i=this,s=t.get("checkResultsByPlatformId"),o=function(){i.showMessage(T("trialrequestfailure"),5e3)};i.showMessage("",2e4,!0),n||(n=s[0].platformId),r.request({url:r._tryRoleUrl(),method:"POST",contentType:"application/x-www-form-urlencoded",postData:{process:t.get("productId"),platform:n},onComplete:function(e){e&&0===e.code?(i.showMessage(e.message,5e3),i.refreshSuggestions()):o()},onFailure:o}),e.log("try "+t.get("productId")+":"+n)},refreshSuggestions:function(){this.views.suggestions.refresh()},_isRemoteDisabled:function(){return void 0===this._removeDisabled&&(this._removeDisabled="true"===N.get("3dremotevm")),this._removeDisabled},openSettings:function(n,i){var s,o=this,l=this._isRemoteDisabled(),p=n.getRemoteApp(),u=n.get("platforms"),m=i.getOffsets(),h=t.getScrolls(),f=function(t,f,v){var C,y,b=a.arrayFind(u,(function(e){return e.preferred})),S=b?b.id:null,w=S,E=function(){s.hideSettings()};"none"!==document.body.getElement(".my-apps-panel").getStyle("display")?(t&&(C=t[0],y=t[1]&&t[1].length>0?t[1][0]:null),i.addClassName("active"),o.appsAccordion.addEvent("onScroll",E),(s=new g({data:{platforms:u.length>1?u:null,installs:C,remoteInstall:y,error:n.get("error")},preferredInstallId:v,processes:n.get("licenses").map((function(e){return e.id})),app:n,container:o.container,appTitle:n.get("tooltip")||n.get("title"),remoteAppTitle:p?p.get("title"):null,onlineInstallable:n.isOnlineInstallable(),trigger:i,target:i,position:{x:m.x-h.x+12,y:m.y-h.y},shortcutEnabled:!!S||1===u.length,remoteEnabled:!l&&!!n.get("remoteInfos"),additionalContent:n.canAdditionalContent(o.collections.grantedRoles),optionalContent:n.canOptionalContent(o.collections.grantedRoles),events:{onShow:function(){o.hideMessage()},onPlatformChange:function(t){var i=t.platform&&S!==t.platform,s=t.install&&v!==t.install;i&&u.forEach((function(i){(i.preferred=i.id===t.platform)&&(S=i.id,n.set("launchInfos",i.launchInfos),n.isWidget()&&(n.set("launchUrl",i.launchUrl||n.get("launchUrl")),n.set("config",i.config||n.get("config")),n.set("checksum",i.checksum||n.get("checksum")),n.set("platformId",i.id),o.container.getElements(e.String.format('[data-id="{0}"]',n.get("id"))).forEach((function(e){a.enableWidgetDrag(e,n.toJSON())}))),n.isNative()&&(n.set("envInfos",i.envInfos),n.set("shortcutLaunchInfos",i.shortcutLaunchInfos),i.remoteLaunchInfos&&n.get("remoteInfos")&&(n.get("remoteInfos").remoteLaunchInfos=i.remoteLaunchInfos)))})),s&&n.set("install",t.install)},onHideSettings:function(e){var t=e.platform&&w!==e.platform,s=e.install&&v!==e.install;i.removeClassName("active"),o.appsAccordion.removeEvent("onScroll",E),(t||s)&&(r.setPreferences({appid:n.id,preferredPlatform:e.platform,preferredInstall:e.install}),w=e.platform)},onClickShortcut:function(e){c.createV6Shortcut(d.getInstall(e),n)},onClickUpdate:function(e,t){var i="remote"===e,s=i?y:d.getInstall(e);t?d.onlineInstallation(i?p:n,s,null,i):d.onlineInstallation(n,null,s)},onClickInstall:function(){d.onlineInstallation(n,null,null)},onClickInstallRemote:function(){d.onlineInstallation(p,null,null,!0)},onClickAdditional:function(e){var t=d.getInstall(e);d.onlineInstallation(n,null,t,null,null,!0)},onClickOptionalContent:function(e,t,i){var s,o;"optionalContentInstall"===i?s=d.getInstallOptional(e):o=n.get("stackOptionContentList"),d.onlineInstallation(n,!!t&&s,o,null,null,!1,!1,!0)}}})).show()):o.hideMessage()};this.elements.search.blur(),this.showMessage("",3e4,!0),n.isNative()&&!n.isNativeMarketApp()&&"ios"!==a.getOs()?this.canShowOptionCotent?n.getOptionalContent(p,(function(){n.getInstallList(p,f)})):n.getInstallList(p,f):f()},clickSettings:function(e){var t=e.target,n=t.getParent(".exp-item").getAttribute("data-id"),i=this.collection.get(n);this.openSettings(i,t)},longClickApp:function(e){var t=this.collection.get(e.getAttribute("data-id"));t.isRole()?this.expandRoleDetail(t):t.needSettingsMenu()&&this.openSettings(t,e.getElement(".settings-img"))},clickExpand:function(e){var t=e.target.getParent(".exp-item").getAttribute("data-id"),n=this.collection.get(t);this.expandRoleDetail(n)},expandRoleDetail:function(e){var t=this.elements.expandedRole;this.views.expandedRole.filterApps(e.get("appList")),t.getElement(".expanded-role-title").setText(e.get("title")),t.setAttribute("data-id",e.id),this.container.addClassName("roles-expanded")},hideRoleDetail:function(){this.container.removeClassName("roles-expanded")},toggleAllRoles:function(){this.container.toggleClassName("all-roles"),this.elements.allRolesBtn.toggleClassName("fonticon-down-dir"),this.elements.allRolesBtn.toggleClassName("fonticon-up-dir")},close:function(){_._IDS.compass.cross;_.compassClose(),this.dispatchEvent("onClose")},onClose:function(){"undefined"==typeof compassRichWithCef?this.container.hide():A.publish("compassPanelOnHide",{})},open:function(){this.dispatchEvent("onOpen")},onOpen:function(){this.container.show(),r.get3DDashboardUrl()},displayQuadrant:function(e){var t=this.currentQuadrant;if(e){if(a.isCompassV2()){var n="play"===e?"north":e;this.appsAccordion.setTitle("my-apps-section",this.options.sectionData[n].title,this._getClassForQuadrant(n))}else this.appsAccordion.setTitle("my-apps-section",this.options.sectionData[e].title,this._getClassForQuadrant(e));t!==e&&(this.container.removeClassName(t),this.container.addClassName(e),this.currentQuadrant=e)}},_getClassForQuadrant:function(e){var t={north:"social",west:"3d",east:"intelligence",south:"simulation"},n="";return t[e]&&(n=" fonticon fonticon-compass-"+t[e]),e+n},forEachQuadrant:function(e){for(var t=["north","west","south","east"],n=t.length-1;n>=0;n--)e(t[n])},showMessage:function(e,t,n){var i=this.message;i&&(i.show(e,n),t&&i.hide(t))},hideMessage:function(e){var t=this.message;t&&t.hide(e)},setCanShowOptionCotent:function(e){this.canShowOptionCotent=e},mask:function(){this.maskElmt.show()},unmask:function(){this.maskElmt.hide()},setFavoriteApps:function(e,t){var n=t+e.length,i=this.collections.favorite,s=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:e}]);i.filter((function(e){return e.get("favoriteOrder")>=t})).forEach((function(e,t){-1===s.indexOf(e)&&e.set("favoriteOrder",n+t)})),s.forEach((function(e){e.set("favoriteOrder",t),e.set("isFavorite",!0),t++})),this.getContent().getElement(".delete-favorite").hasClassName("hide")&&this.getContent().getElement(".delete-favorite").removeClassName("hide"),this.getContent().getElement(".my-favorite-apps-section").hasClassName("closed")&&this.getContent().getElement(".my-favorite-apps-section").removeClassName("closed"),i.saveFavorites()},reorderFavoriteApp:function(e){var t=this.collections.favorite.get(e);t&&this.views.favorite.reorderApp(t)},removeFavoriteApp:function(e){var t=this.collections.favorite,n=t.get(e);n&&(n.set("isFavorite",!1),n.set("favoriteOrder",-1)),t.length<1&&!this.getContent().getElement(".delete-favorite").hasClassName("hide")&&this.getContent().getElement(".delete-favorite").addClassName("hide"),t.saveFavorites()},removeAllFavoriteApp:function(){var e=this.collections.favorite;this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"isFavorite",value:!0}]).forEach((function(e){e.set("isFavorite",!1),e.set("favoriteOrder",-1)})),this.getContent().getElement(".delete-favorite").hasClassName("hide")||this.getContent().getElement(".delete-favorite").addClassName("hide"),e.saveFavorites()},toggleRole:function(e,t){!0===t||!1===t?e.set("active",t):e.set("active",!e.get("active")),e.hasChanged("active")&&this.collections.grantedRoles.saveRoles({onComplete:function(){a.onRoleChange(e.get("process"),e.get("active"))}})},getVisibleHeight:function(e){return this.appsAccordion.getVisibleHeight(e)},showTempHeight:function(e,t){this.appsAccordion.showTempHeight(e,t)},hideTempHeight:function(e){this.appsAccordion.hideTempHeight(e)},closeSection:function(e){this.appsAccordion.closeSection(e)},isScrolling:function(){return this.appsAccordion.isScrolling()},stopScrolling:function(){this.appsAccordion.onScrollStop()},showDeleteZone:function(){var e;(e=this.getContent().getElement(".delete-favorite")).addClassName("show"),e.removeClassName("hide")},hideDeleteZone:function(){var e;(e=this.getContent().getElement(".delete-favorite")).removeClassName("active"),e.removeClassName("show")},changeRoles:function(){var e=this.collections.grantedRoles.getSelectedRoleApps();this.filterAppsInViews(e)}};return n.extend(O)})),define("DS/i3DXCompass/i3DXCompass",["UWA/Core","UWA/Controls/Abstract","UWA/Controls/Accordion","UWA/Controls/Scroller","UWA/Controls/ToolTip","UWA/Ajax","UWA/Data","UWA/Utils/InterCom","UWA/Event","UWA/Utils","UWA/Utils/Client","UWA/Json","UWA/Fx","UWA/Controls/Drag","UWA/Controls/Input","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Collection/AppList","DS/i3DXCompass/Collection/SuggestionList","DS/i3DXCompass/View/MyApps","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/InstallManager","DS/i3DXCompass/TopBarManager","DS/i3DXCompass/InterCom","DS/i3DXCompass/Controls/Compass","DS/UIKIT/Modal","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/X3DContent","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Types","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/i3DXCompassServices","DS/i3DXCompass/View/CompassOverlayView","DS/i3DXCompass/View/TopBarOverlayView","DS/i3DXCompass/View/CompassWrapperView31","DS/i3DXCompass/Collection/UserPreferencesCollection","DS/i3DXCompass/Feature","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient"],(function(e,t,n,i,s,o,a,l,r,c,d,p,u,m,h,f,g,v,C,y,b,S,w,E,D,A,I,N,k,_,P,T,O,U,x,L,R,M,F,X){"use strict";var B,W,V,q,j,H,Q,z,G,K,J,Z=null,Y="north",$="",ee={},te=[],ne=function(e){return Q.getElement(e)},ie={},se=e.i18n,oe={},ae={},le=!1,re=!1,ce=!1,de=!1,pe=!1,ue=!1,me=!1,he=[],fe=[],ge=function(t,n,i){try{var s=document.body.getElement("."+n);s.addEvent("click",(function(i){setTimeout((function(){document.querySelector(".my-apps-panel")&&!document.querySelector(".my-apps-panel").hasClassName("V2")&&(document.querySelector(".my-apps-panel").addClassName("V2"),document.querySelector("body").addClassName("compass-v2"))}),300),c.Client.getSize().width<959?(J=new x({i3DXCompass:t,logoClassName:n,defaultQuadrant:g.getCurrentQuadrant(),openCompass:t.showAccordion})).render():pe?z.dispatchEvent("onClose"):t.showAccordion(!0,Y),e.Event.stop(i)})),s.setStyle("cursor","pointer"),c.Client.getSize().width<959&&document.querySelector("body").addClassName("compass-v2"),s.addClassName(Y)}catch(e){setTimeout((function(){ge(t,n,i)}),300)}},ve=function(e,t){var n=t||g.getCurrentQuadrant()||$||Y;e&&oe.dispatchOpen(),pe||(pe=!0,B.onOpen(),F.isFastPortfolioNavigation()?(B._navigateToContentFast((function(){B.unmask(),oe.loadQuadrant(n),z.onOpenQuadrant(n)})),document.location.pathname.indexOf("/offers")>-1&&B.unmask()):(F.isPortfolioNavigation()&&!g.isSupportQuickLink()||z.onOpenQuadrant(n),oe.loadQuadrant(n)))},Ce=function(t){return e.is(f.addinMode)&&e.is(f.addinMode.value)&&t.addin&&t.addin.detect((function(e){return e.toLowerCase()===f.addinMode.value.toLowerCase()}))};return Z="dsrtv:"===window.location.protocol?{closable:!1,closeOnLaunch:!1,lang:"en",myAppsBaseUrl:"",proxyTicketUrl:window.location}:{closable:!1,closeOnLaunch:!1,lang:"en",myAppsBaseUrl:"",proxyTicketUrl:c.buildUrl(c.composeUrl(e.extend(c.parseUrl(window.location),{anchor:""})),"api/passport/ticket?url=V6")},ae.intercom={serverId:"com.ds.compass"},oe.initDrag=function(){var t,n,i,s,o,a,l,r,d,u,h,f,v,C,y,b="drag-app",S=!0,w=!1,E=g.isCompassV3()?".content-wrapper .items-roles-view.compass-scroll-accordion-section.favorite.my-favorite-apps-section":".experience-list.favorite",D=null,A=!1,I=!1,N=!1,k=!1,_=!1,P=!1,T=!0,U=!1,x=null,L=g.isCompassV3ActiveGroup(),R=function(){u=d.getData("favorite-order"),(D=e.createElement("li",{class:"compass-app-drag-hover exp-item drop-favorite",html:{tag:"div",html:[{tag:"div",class:"fonticon fonticon-plus-circled add"},{tag:"div",text:se("dropapphere"),class:"text"}]},"data-favorite-order":e.is(u,"number")?u:'"none"'})).inject(d,"before"),P&&n.removeClassName("empty"),r=window.setTimeout((function(){g.isCompassV3()||B.showTempHeight("my-favorite-apps-section",99),window.setTimeout(H.refreshCache,350)}),700),!g.isCompassV3()&&v&&B.closeSection("my-roles-section"),U=!0},M=function(){H.createDropZoneToME&&(H.createDropZoneToME.getParent(),H.createDropZoneToME.destroy(),H.createDropZoneToME="",H.refreshCache())},X=function(){if(H.newDropZone&&event){var e=event.clientX,t=event.clientY,n=H.newDropZone.getSize().width,i=H.newDropZone.getSize().height,s=H.newDropZone.getOffsets().x,o=H.newDropZone.getOffsets().y;return e<n+s&&e>s&&t<i+o&&t>o}return!1},W=function(n){var i;if(!H.newDropZone||H.newDropZone&&!X()){i=e.createElement("div",{styles:{height:t.getSize().height,width:"100px",transition:"width 300ms"},class:"order-app compass-app-drag-hover"}),H.newDropZone=i,H.newDropZone.inject(n,function(){if(n){var e=event.clientX,t=(event.clientY,n.getSize().width),i=(n.getSize().height,n.getOffsets().x);n.getOffsets().y;return e-13<i?"before":t+i<e+13?"after":"bottom"}}()),H.refreshCache(),H.newDropZone.setStyle("width",t.getSize().width+"px"),window.setTimeout((function(){H.refreshCache()}),350)}},j=function(){H.newDropZone&&!X()&&(H.newDropZone.style.width="0px",H.refreshCache(),window.setTimeout((function(){H.newDropZone&&(H.newDropZone.destroy(),H.newDropZone="")}),150),window.setTimeout((function(){H.refreshCache()}),350))},H=new m.Move({centerHandles:!0,snap:20,delegate:"."+b+", ."+b+" > *",zones:g.isCompassV3()?E:".scroller-content ."+b,handles:function(r){var c,p,u,m,y,D=r.target;if(_=!1,N=!1,k=!1,A=!1,i=!1,s=!1,P=!1,T=!0,U=!1,S=!0,!(document.querySelector(".favorite.my-favorite-apps-section.accordion-item")&&document.querySelector(".favorite.my-favorite-apps-section.accordion-item").hasClassName("active"))&&document.querySelector(".favorite.my-favorite-apps-section.accordion-item")&&document.querySelector(".favorite.my-favorite-apps-section.accordion-item").addClassName("active"),p=(t=D.hasClassName(b)?D:D.getParent()).getSize().width,u=t.getSize().height,C=!!t.getParent(".portfolio-me-apps"),w=D.hasClassName("widget-item")||t.hasClassName("widget-item"),n=ne(E),o=t.getAttribute("data-id"),a=t.getElement(".title")?t.getElement(".title").textContent:"",g.isCompassV3()&&(P=!!n&&n.hasClassName("empty"),n&&t.isInjected(n)?(l=n.getChildren().indexOf(t),t.getData("favorite-order"),x=e.createElement("div",{styles:{display:"none"}}).inject(document.body),t.inject(x),d=n.getChildren()[l],B.showDeleteZone(),I=!0):n&&(l=-1,n.getElement(e.String.format('[data-id="{0}"]',o))?T=!1:(d=n.getElement(".clearfix"),c=Q.getOffsets(),(v=!C&&t.getParent(".compass-scroll-accordion-section").hasClassName("my-roles-section"))?(h={x:c.x,y:t.getOffsets().y+3*t.getSize().height/2},f={width:Q.getSize().width,height:1e3}):(h={x:c.x,y:c.y},f={width:Q.getSize().width,height:t.getOffsets().y-c.y-t.getSize().height/2})),I=!1)),T&&l>=0&&R(),!g.isCompassV3()&&B.isScrolling()&&B.stopScrolling(),g.disableSelect(),window.setTimeout(H.refreshCache,1e3),g.isCompassV3()){w&&F.getPreferences().forceSelectTenant&&"forceSelectTenant"===(F.getPreferences()&&F.getPreferences().forceSelectTenant)&&t.getAttribute("data-data")&&!0===JSON.parse(t.getAttribute("data-data")).tenantAware&&""!==JSON.parse(t.getAttribute("data-data")).x3dPlatformId?(t.setAttribute("drag-enabled-force-select-tenant",!0),B.updateEnableWidgetDrag(t,!1,!0,o)):w&&F.getPreferences().forceSelectTenant&&"forceSelectTenant"!==(F.getPreferences()&&F.getPreferences().forceSelectTenant)&&t.getAttribute("data-data")&&!0===JSON.parse(t.getAttribute("data-data")).tenantAware&&""===JSON.parse(t.getAttribute("data-data")).x3dPlatformId&&t.getAttribute("drag-enabled-force-select-tenant")&&(t.removeAttribute("drag-enabled-force-select-tenant"),B.updateEnableWidgetDrag(t,!1,!1,o)),L&&t.getParent(".editMode")&&t.getParent(".editMode").getElement(".content-overlay-header")&&(m=t.getParent(".editMode").getElement(".content-overlay-header"),y=e.createElement("div",{class:"drop-manager-cancel",events:{mouseenter:function(){this.addClassName("hover")},mouseleave:function(){this.removeClassName("hover")}},html:'<div class="center"><span class="text">'+e.i18n("Drop here add to ME tab")+"</span></div>"}),H.createDropZoneToME=y,H.createDropZoneToME.inject(m),H.refreshCache());var O=e.clone(t);return O.getSize=t.getSize,O.setStyle=t.setStyle,O.setStyle("height",u),O.setStyle("width",p),O.querySelector(".icon-wrapper")&&O.querySelector(".icon-group")&&(O.querySelector(".icon-wrapper").setStyle=t.querySelector(".icon-group").setStyle,O.querySelector(".icon-wrapper").setStyle("width","64px"),O.querySelector(".icon-wrapper").setStyle("height","64px"),O.querySelector(".icon-group").setStyle=t.querySelector(".icon-group").setStyle,O.querySelector(".icon-group").setStyle("width","64px"),O.querySelector(".icon-group").setStyle("height","64px")),t.hasClassName("service")&&(O.querySelector(".portfolio-item-inner")&&(O.querySelector(".portfolio-item-inner").setStyle=t.querySelector(".portfolio-item-inner").setStyle,O.querySelector(".portfolio-item-inner").setStyle("height",t.querySelector(".portfolio-item-inner").getSize().height),O.querySelector(".portfolio-item-inner").setStyle("width",t.querySelector(".portfolio-item-inner").getSize().width)),O.querySelector(".portfolio-item-content-draggable")&&(O.querySelector(".portfolio-item-content-draggable").setStyle=t.querySelector(".portfolio-item-content-draggable").setStyle,O.querySelector(".portfolio-item-content-draggable").setStyle("height",t.querySelector(".portfolio-item-content-draggable").getSize().height),O.querySelector(".portfolio-item-content-draggable").setStyle("width",t.querySelector(".portfolio-item-content-draggable").getSize().width))),e.createElement("div",{class:t.hasClassName("service")?"compass-service-drag-icon":"compass-drag-icon",html:O}).inject(r.root)}return e.createElement("img",{class:"compass-drag-icon",src:t.getElement(".icon").src}).inject(r.root)},cancel:function(){return!0},stop:function(e){var n=[];y&&(clearInterval(y),y=""),k||(e.handles.destroy(),D&&D.destroy(),!N&&I&&(s?(t.remove(),B.removeFavoriteApp(o),O.removeAppToFavorite({appId:o,appName:a})):(e.zone&&e.zone.hasClassName("favorite")?B.reorderFavoriteApp(o):g.isCompassV3()&&B.rebuildFavorite(o),_=!0)),!_&&P&&ne(E).addClassName("empty"),D=null,window.clearTimeout(r),g.isCompassV3()||window.setTimeout((function(){B.hideTempHeight(1)}),500),x&&(x.destroy(),x=null),g.isCompassV3()&&B.getContent().getElement(".delete-favorite")&&B.hideDeleteZone(),L&&(e.zone&&e.zone.hasClassName("compass-app-drag-hover")&&e.zone.getAttribute("data-id")&&e.zone.removeClassName("compass-app-drag-hover"),H.newDropZone&&X()?(t.inject(H.newDropZone,"before"),j(),H.newDropZone.getParent(".items-roles-view")?(H.newDropZone.getParent(".items-roles-view").getElements("div").forEach((function(e,i){t.getAttribute("data-id")!==e.getAttribute("data-id")&&(e.getAttribute("data-id")?n.push({id:e.getAttribute("data-id"),type:e.getAttribute("data-type"),order:i}):n.push({id:t.getAttribute("data-id"),type:t.getAttribute("data-type"),order:i}))})),q.reorderPreference()):H.newDropZone.getParent(".portfolio-me-apps")&&H.newDropZone.getParent(".portfolio-me-apps").getElements("div").forEach((function(e,i){t.getAttribute("data-id")!==e.getAttribute("data-id")&&(e.getAttribute("data-id")?n.push(e.getAttribute("data-id")):n.push(t.getAttribute("data-id")))}))):H.createDropZoneToME&&function(){if(H.createDropZoneToME&&event){var e=event.clientX,t=event.clientY,n=H.createDropZoneToME.getSize().width,i=H.createDropZoneToME.getSize().height,s=H.createDropZoneToME.getOffsets().x,o=H.createDropZoneToME.getOffsets().y;return e<n+s&&e>s&&t<i+o&&t>o}return!1}()&&(M(),q.addNewGroup({id:t.getAttribute("data-id"),type:"App"}),B.addAppMain(t.getAttribute("data-id"))),H.newDropZone&&j(),H.createDropZoneToME&&M()),g.enableSelect(),k=!0)},enter:function(e){A=!0,g.isCompassV3()||(t.getAttribute("data-id")===e.zone.getAttribute("data-id")||e.zone.hasClassName(".order-app")||(!H.newDropZone||X())&&H.newDropZone?t.getAttribute("data-id")===e.zone.getAttribute("data-id")?(e.zone.removeClassName("compass-app-drag-hover"),j()):e.zone&&e.zone.getAttribute("data-id")&&e.zone.hasClassName("compass-app-drag-hover")&&H.newDropZone&&X()?e.zone.removeClassName("compass-app-drag-hover"):j():(e.zone.addClassName("compass-app-drag-hover"),j()))},leave:function(e){D&&D.removeClassName("active"),g.isCompassV3()||((H.newDropZone&&!X()||!H.newDropZone)&&e.zone.getAttribute("data-id")&&e.zone.hasClassName("compass-app-drag-hover")?(e.zone.removeClassName("compass-app-drag-hover"),H.newDropZone||W(e.zone)):H.newDropZone&&!X()?j():H.newDropZone||t.getAttribute("data-id")===e.zone.getAttribute("data-id")||W(e.zone)),i=!1,A=!1},drop:function(n){if(!N){var r,c=D?D.getData("favorite-order"):null,d=e.is(c,"number")?c:V.max("favoriteOrder").get("favoriteOrder")+1,p=[];return!s&&L?(t.getAttribute("data-id")===n.zone.getAttribute("data-id")||n.zone.hasClassName(".order-app")?n.zone.hasClassName(".order-app")&&(n.zone.getParent(".items-roles-view")?n.zone.getParent(".items-roles-view").getElements("div").forEach((function(e,n){t.getAttribute("data-id")!==e.getAttribute("data-id")&&p.push(e.getAttribute("data-id")||t.getAttribute("data-id"))})):n.zone.getParent(".portfolio-me-apps")):"favorite"===n.zone.getAttribute("data-id")?"Role"===t.getAttribute("data-type")?B.setFavoriteRoleV3(t.getAttribute("data-id")):"App"===t.getAttribute("data-type")&&B.setFavoriteAppsV3([t.getAttribute("data-id")]):B.createGroup({id:t.getAttribute("data-id"),type:t.getAttribute("data-type")},{id:n.zone.getAttribute("data-id"),type:n.zone.getAttribute("data-type")}),H.newDropZone&&j()):(s||(l>=0?(t.inject(D,"before"),i&&B.setFavoriteApps([o],d),_=!0):i&&(t.hasClassName("role")||"Role"===t.getAttribute("data-type")?(r=V.get(t.getAttribute("data-id")),B.setFavoriteApps(r.get("appList"),d),B.toggleRole(r,!0)):B.setFavoriteApps([o],d),_=!0),N=!0),"-1"===t.getAttribute("data-favorite-order")&&(e.is(r)?O.addRoleToFavorite({roleId:o,roleName:a}):O.addAppToFavorite({appId:o,appName:a}))),!1}},move:function(n){var o,a={x:n.startOrigin.x+n.currentDelta.x,y:n.startOrigin.y+n.currentDelta.y};if(g.isCompassV3()&&(c.Client.getSize().height<a.y+t.getSize().height/2?(o=document.querySelector(".my-apps-panel .no-native-scrollbars.scroller-content, .my-apps-panel .native-scrollbars.scroller-content"),y&&(clearInterval(y),y=""),o.scrollHeight>c.Client.getSize().height&&o.scrollTop<o.scrollHeight&&(y||(o.scroll({top:o.scrollTop+36}),H.refreshCache()),y=setInterval((function(){o.scroll({top:o.scrollTop+36}),H.refreshCache()}),250))):a.y<273?function(){var e=document.querySelector(".my-apps-panel .no-native-scrollbars.scroller-content, .my-apps-panel .native-scrollbars.scroller-content");y&&(clearInterval(y),y=""),e.scrollHeight>c.Client.getSize().height&&e.scrollTop>39&&(y||(e.scroll({top:e.scrollTop-36}),H.refreshCache()),y=setInterval((function(){e.scroll({top:e.scrollTop-36}),H.refreshCache()}),250))}():y&&(clearInterval(y),y="")),!t.hasClassName("service")&&g.isCompassV3()&&(c.Client.getSize().width>640||S)&&T&&!U&&g.isOverElement(a,h,f)&&R(),I){var l=B.getContent().getElement(".delete-favorite"),r=l.getOffsets(),d=l.getSize();g.isOverElement(a,r,d)?(l.addClassName("active"),s=!0):(l.removeClassName("active"),s=!1)}if(A){var u,m,v,C,b,w,E,N=n.placeholderCache.length;if(D){var k=D.getOffsets(),_=D.getSize();g.isOverElement(a,k,_)?(D.addClassName("active"),i=!0):(D.removeClassName("active"),i=!1)}for(u=0;u<N;u++)if(!(C=(m=n.placeholderCache[u]).element).hasClassName("drop-favorite")&&!C.hasClassName("clearfix")&&D&&(v=C.getSize(),b=m.position,g.isOverElement(a,b,v))){a.x>b.x+v.width/2?(E=(w=C.nextSibling)?w.getData("favorite-order"):null,D.inject(C,"after")):(E=C.getData("favorite-order"),D.inject(C,"before")),D.setAttribute("data-favorite-order",e.is(E,"number")?p.encode(E):'"none"'),H.refreshPlaceholderCache();break}}}})},oe.manageNewGrantedRole=function(){var e=[];K&&(K.forEach((function(t){var n=B.container.getElement(".exp-item[data-id="+t+"true]");n&&(e.push(n),n.addClassName("grow"),n.setStyles("opacity","0"))})),setTimeout((function(){e.forEach((function(e){e.setStyle("opacity",1).setStyle("transition","all .5s ease-in-out").removeClassName("grow")}))}),100),setTimeout((function(){e.forEach((function(e){e.setStyle("transition",null)})),K=null}),500))},oe.initDefaultTranslate=function(){se({unableinstalldata:"Unable to retrieve install data",erroroccurred:"An error occurred",noinstall:"Application is not installed.",createshortcut:"Create Desktop Shortcut",launching:"Launching {0}",remoting:"Remoting {0}",errorsavingpreferences:"An error occurred while saving the preferences",creatingshortcut:"Creating Desktop Shortcut for {0}",selectionupdated:"Your selection has been updated",shortcutcreated:"Shortcut Created",install:"Install {0}",shortcutcreatingerror:"Shortcut Creating Error",launchingerror:"{0} Launching Error",remotingerror:"{0} Remoting Error",installprocess:"Install {0}",installallgranted:"Install All Granted Roles",installallcontaining:"Install All Roles Containing {0}",updateallprocesses:"Update All Roles",update:"Update {0}","3dexperienceinstallation":"3DEXPERIENCE Installation",installationerror:"Installation Error",sessionExpirationTitle:"Your session has expired. A new login is required.",installationerrordiskspace:"Installation Error: Not enough disk space for download",installationcancelled:"Installation Cancelled",errorcode225:"Uninstallation Error: Please check all Microsoft Office applications are closed before updating",errorcode141:"The Environment Configuration File is invalid",errorcode227:"The uninstallation process has been cancelled.","3dexperienceUninstallation":"3DEXPERIENCE Uninstallation",installationsuccess:"Installation Success",launchinginstallation:"Launching Installation",uninstallationsuccess:"Uninstallation Success",lauchingUninstallation:"Launching Uninstallation",installCEF:"Install Chromium Embedded Framework",updateCEF:"Update Chromium Embedded Framework",titleCEF:"Chromium Embedded Framework Installation",clickinstall:"Install Now",remoteit:"Remote Mode",ok:"OK",readyinstallation:"{0} is ready to be installed",readyupdate:"{0} is ready to update your installation",updateavailable:"Update available",updateneeded:"Update needed",newprocessesavailable:"New roles available",orinstallrelated:"Or",nbcompleteupdgraded:"NB: the complete installation will be upgraded to {0}",instfilelocation:"Installation File Location",javainstallation:"Java Installation",javanotinstalled:"The required Java Runtime Environment is not installed on this computer.",pleaseinstalljava:"Please install it now, both 32bit and 64bit versions.",dropapphere:"Drop your app here",dropfavoriteappshere:"Drop your favorite apps here",missingprocesses:"Missing Roles",missingprocessesreloaded:"Some roles are missing. The Compass has been reloaded.",searchapps:"Search Apps",supportmode:"Support Mode",supportactivated:"Support Mode is activated for recording system traces.",wantsupport:"Do you want to start the app with support mode?",yes:"Yes",no:"No",cancel:"Cancel",removeapp:"Remove App",Close:"Close",continue:"Continue",proceedanyway:"Update later",welcomelauncher:"Welcome to the 3DEXPERIENCE Launcher",launcherfirstvisit:"If this is your first visit to the 3DEXPERIENCE platform, please download and install the 3DEXPERIENCE Launcher.",downloadlauncherclicking:"Click the button below:",downloadlauncher:"Download 3DEXPERIENCE Launcher",startselfupdate:"Start update now",installlauncherrunning:"Run the downloaded file to start install.",installldownload:"Run the downloaded file to start install.",youcaninstallrun:"You can now install new apps or run those already installed.",clickcontinue:"Click {0}Continue{1}.",downloadlauncheradmin:"If the 3DEXPERIENCE Launcher is not installed on your machine, please contact your administrator to install it.",updatelauncheradmin:"Please contact your administrator to install the update.",alreadyinstalledlauncher:"If you have already installed the 3DEXPERIENCE Launcher, one of the following issues may be preventing it from working:",launchernotstarted:"The 3DEXPERIENCE Launcher is not started.",portchanged:"The port number used by the 3DEXPERIENCE Launcher may have changed or a firewall or anti-virus software may be blocking the port.",changeport:"If required, enter the new one:",portunreachable:"The provided port is unreachable.",launcherupdate:"Update 3DEXPERIENCE Launcher",downloadupdateclicking:"Click the button bellow:",updateinfos:"A new update of 3DEXPERIENCE Launcher is available ({0}version {2} / {3}MB{1}).",startselfupdateclicking:"Start launcher update by clicking here:",installupdaterunning:"Install the update by running the downloaded file: {0}",selfupdaterunning:"Wait for the update to finish.",selfupdateerror:"Unable to update 3DEXPERIENCE Launcher. Please try again or download and install manually.",checksystrayicon:"Check that the 3DEXPERIENCE Launcher icon {0} is available in the Windows system tray.",dontseelaunchermenu:"If you do not see 3DEXPERIENCE Launcher on the menu, please contact your administrator.",clicksystrayicon:"In the system tray, right-click the 3DEXPERIENCE Launcher {0}",copyportnumber:"Copy the port number.",pasteportnumber:"Paste it in the field.",troubleshootbtn:"Troubleshooting",launcherbusyretry:"The 3DEXPERIENCE Launcher is currently performing an action. Please retry later.",launcherunavailable:"The 3DEXPERIENCE Launcher is currently unavailable. Please try again later.",canrequest:"You can request this role from your Administrator.",requeston:"Request on {0}",alreadyrequestedplatforms:"{0} has already been requested on all platforms.",alreadyrequested:"{0} has already been requested.",noadditionalinfo:"No additional information for this role",request:"Request",requestfailure:"Request Failure",trialrequestfailure:"Trial Request Failure",tryit:"Try it",tryiton:"Try it on {0}",myroles:"My Roles",installationerroraccess:"Installation Error: Unable to access the Installation File Location",youcaninstallandlaunch:"You can now install new apps or run those already installed.",installallcontentavailable:"Install all additional content",installalladditionalresources:"Install all additional resources",additionalcontentavailable:"Additional content available",additionalresources:"Additional Resources",uninstall:"Uninstall",clickRemoveFavorite:"Click to remove all your favorite apps. </br> Or drag & drop any favorite app to remove it.",confirmRemoveFavorite:"Are you sure you want to remove all your favorite apps?","Remove all favorite Apps":"Remove all favorite Apps",confirmation:"Confirmation","3DEXPERIENCEMarketplace":"3DEXPERIENCE Marketplace",Remove:"Remove",Cancel:"Cancel",wrapperRole:"3DEXPERIENCE Roles & Apps",DassaultSystemesCommunities:"Dassault Systemes Communities",MyCommunityServices:"My Community Services",MyEnterpriseServices:"My Enterprise Services",DefaultInstallationLocation:"Default",outdated_installation_uninstall:"An outdated installation has been detected on your computer.",outdated_installation_uninstall_warning:"To install the new version, <b>the outdated installation will be uninstalled automatically.</b>",launcherdiagnostics:"You can also run diagnostic tests from the 3DEXPERIENCE Launcher Options",updateoptionalcontentnow:"Update Optional Content Now",installoptionalcontentnow:"Install Optional Content Now",newoptionalcontent:"New Optional Content Available",installOptionalContentOfAllRolesContaining:"Install Optional Content Of All Roles Containing {0}",updateOptionalContentOfAllRolesContaining:"Update Optional Content Of All Roles Containing {0}",compassTooltipv3:"Roles, Apps & Solutions portfolio",AUDIENCES:"AUDIENCES","LEARNING EXPERIENCES":"LEARNING EXPERIENCES","RELATED ROLES":"RELATED ROLES","My Favorite Apps":"My Favorite Apps","My Apps":"My Apps",Industries:"Industries","Check Out":"Check Out","Sub-Domains":"Sub-Domains",Solutions:"Solutions",Apps:"Apps",Processes:"Processes",Compass_ME:"ME",COMPANY:"COMPANY",WORLD:"WORLD",WE:"WE","As a System of Operations":"As a System of Operations","As a Business Model":"As a Business Model","Contact us":"Contact us",Search:"Search",Buy:"Buy",BUY:"BUY",isLockInstallationUpdate:"Installation of applications update are locked by your Administrators",isLockInstallation:"Installation of new applications are locked by your Administrators",isLockUninstallation:"Uninstallation of applications are locked by your Administrators","Compact Apps":"Compact Apps",Compact:"Compact","Large Apps":"Large Apps",Large:"Large","All Company Roles are granted to you.":"All Company Roles are granted to you.","Role requested, awaiting validation":"Role requested, awaiting validation","Back to {0}":"Back to {0}",Back:"Back",Details:"Details","Role has been requested.":"Role has been requested.","Know more about {0}":"Know more about {0}",Domains:"Domains",Roles:"Roles","SUCCESS STORY":"SUCCESS STORY","On-premises":"On-premises","On-cloud ":"On-cloud ","Call Us":"Call Us","Contact Sales":"Contact Sales","INDUSTRY SOLUTION EXPERIENCE":"INDUSTRY SOLUTION EXPERIENCE","Learn more":"Learn more","Discover also":"Discover also","Clear Search":"Clear Search","Social & Collaborative":"Social & Collaborative","3D Modeling":"3D Modeling",Simulation:"Simulation","Information Intelligence":"Information Intelligence","Other English countries: +800 379 78 361":"Other English countries: +800 379 78 361","India: 1800 200 9276":"India: 1800 200 9276","USA & Canada: 1855 696 1125":"USA & Canada: 1855 696 1125","Please select an availability type: On-premises / On-cloud":"Please select an availability type: On-premises / On-cloud","My 3DEXPERIENCE - {0}":"My 3DEXPERIENCE - {0}","My 3DEXPERIENCE - {0} - {1}":"My 3DEXPERIENCE - {0} - {1}","View Cart":"View Cart","{0} items":"{0} items",userassistance:"User Assistance","Select Platform at App launch":"Select Platform at App launch",Preferences:"Preferences","Platform selection":"Platform selection",OFFERS:"OFFERS",Download:"Download","Current Platform":"Current Platform",Platform:"Platform","Clear search":"Clear search",Audiences:"Audiences","All with Platform confirmation at App launch":"All with Platform confirmation at App launch","Apps layout":"Apps layout",Layout:"Layout","All Platforms":"All Platforms",All:"All","Select platform ":"Select platform ","Roles & Apps display":"Roles & Apps display","Discover Business Experiences":"Discover Business Experiences","You don't have any Roles related to Business Experiences":"You don't have any Roles related to Business Experiences","My Business Methods":"My Business Methods","My Cockpits":"My Cockpits",About:"About",downloadlauncherRpm:"File .rpm",downloadlauncherDeb:"File .deb","Are you sure you want to uninstall <b>{0}</b> ({1})?":"Are you sure you want to uninstall <b>{0}</b> ({1})?","Are you sure you want to uninstall <b>{0}</b> ({1}) and {2} related Apps?":"Are you sure you want to uninstall <b>{0}</b> ({1}) and {2} related Apps?","Are you sure you want to uninstall <b>{0}</b> ({1}) and <i>{2}</i> Apps?":"Are you sure you want to uninstall <b>{0}</b> ({1}) and <i>{2}</i> Apps?","Benefits of {0}":"Benefits of {0}","DISCOVER MORE SOLUTIONS":"DISCOVER MORE SOLUTIONS","Drop here add to ME tab":"Drop here add to ME tab","Launch as ...":"Launch as ...","Launch as native app":"Launch as native app","Launch as web app":"Launch as web app","Launch as {0} app":"Launch as {0} app","Launching {0}":"Launching {0}","My 3DEXPERIENCE Compass":"My 3DEXPERIENCE Compass","No internet connection":"No internet connection","Show more roles":"Show more roles","You don't have access to the 3DS solutions portfolio. Please check your internet connection.":"You don't have access to the 3DS solutions portfolio. Please check your internet connection.","{0} is ready to be installed":"{0} is ready to be installed","<b> {0} day </b> left until installation is required.":"<b> {0} day </b> left until installation is required.","<b> {0} days </b> left until installation is required.":"<b> {0} days </b> left until installation is required.","{0} is ready to update your installation.":"{0} is ready to update your installation.","3DEXPERIENCE Update available":"3DEXPERIENCE Update available","<b> {0} days </b> left until update is required.":"<b> {0} days </b> left until update is required.","Current Platform ({0})":"Current Platform ({0})"})},oe.initTranslate=function(t,n){var i=Z.lang,s=0,o=e.is(P._getUser())?2:1,l=function(){(s+=1)===o&&(s=0,t())},r=N.getWebappsAssetUrl("i3DXCompass",e.String.format("lang/{0}.json",i)),c={timeout:15e3,method:"GET",type:"json",onComplete:function(t){e.log("loaded "+i+" translations"),se(t),g.setShowCustom(!0),g.setCompassVersion("V34"),f.request({url:f._getFeatureCompass(),Accept:"text/plain",onComplete:function(e){e&&e.portfolio&&("https://drtbebqlk4bjh.cloudfront.net/21x"===e.portfolio&&(e.portfolio="https://drtbebqlk4bjh.cloudfront.net/21xFD03"),g.setPortfolioUrl(e.portfolio),e.contactFormConfiguration&&F.setContactFormConfiguration(e.contactFormConfiguration)),l()},onFailure:function(){l()}}),e.is(P._getUser())&&f.request({url:f._getPreferencesUserUrl(),type:"json",Accept:"text/plain",urlParams:{name:"compass-settings"},onComplete:function(e){e?(e.forceSelectTenant||(e.forceSelectTenant=f.selectedPlatform?"currentPlatform":"allPlatform"),F.setPreferences(e)):(e={forceSelectTenant:f.selectedPlatform?"currentPlatform":"allPlatform"},F.setPreferences(e)),l()},onFailure:function(){l()}}),U.getPlatformServices({onComplete:function(e){e&&(g.setIsMultiTenant(e.length>1),g.setTenantList(e))},onFailure:function(){e.log("i3DXCompassServices.getPlatformServices failure")}})},onFailure:function(n){if(n instanceof TypeError)throw n;e.log("Failed to load "+i+" translations"),"en"!==i?(i="en",g.setLang(i),r=N.getWebappsAssetUrl("i3DXCompass",e.String.format("lang/{0}.json",i)),a.request(r,c)):t()}};"#_key"===i&&(i="en",se=function(){}),a.request(r,c)},oe.handleQuadrantClick=function(e){(!g.isSupportQuickLink()||document.body.hasClassName&&document.body.hasClassName("support-quick-link-fix-mobile-app"))&&(D.fireEvent("compassEvent",{quadrant:e}),_.publish("compassEvent",{quadrant:e}),g.setCurrentQuadrant(e)),("play"!==e||g.isCompassV3())&&(!g.isCompassV2()&&!B||B&&!B.onOpen?setTimeout((function(){B&&B.onOpen&&(pe||(pe=!0,B.onOpen(),oe.dispatchOpen()),oe.loadQuadrant(e))}),300):!g.isCompassV2()&&B.onOpen&&(pe||(pe=!0,B.onOpen(),oe.dispatchOpen()),oe.loadQuadrant(e)))},oe._refreshSectionStates=function(e,t){e.north.closed=t.north[0].closed,e.west.closed=t.west[0].closed,e.south.closed=t.south[0].closed,e.east.closed=t.east[0].closed,t.north&&t.north[1]&&(e.lma.closed=t.north[1].closed),e.favorite.closed=t.favorite.closed,e.roles.closed=t.roles.closed,e.suggestions.closed=t.suggestions.closed,t.services&&(e.services.closed=t.services.closed),t.eservices&&(e.eservices.closed=t.eservices.closed),e.wrapperMP.closed=t.wrapperMP.closed,e.wrapperRole.closed=t.wrapperRole.closed},oe.loadQuadrant=function(t){var n=function(e,t){ue=!0,"undefined"!=typeof compassRichWithCef&&(ue=!0),ce&&ue&&B&&B.resetCache&&(ue=!1,B.resetCache(),z.open&&B._restCacheRebuild&&B._restCacheRebuild()),e&&w.invalidateProductList(),B.manageRoleSectionDisplay(),oe.manageNewGrantedRole()};$=t,G=window.clearTimeout(G),ce?de?(B.displayQuadrant($),V.fetch({onComplete:function(e,t){t.eservices&&B.views.eservices&&(B.views.eservices.collection.set(t.eservices.data),B.views.eservices.render()),B.setCanShowOptionCotent(t.contentInstallation),F.setLockInstallation(t.lockInstallation),F.setLockInstallationUpdate(t.lockInstallationUpdate),F.setLockUninstallationUpdate(t.lockUninstallation),F.setLinuxCompatibleEnv(t.config.linuxCompatible),B.setCanShowOptionCotent(t.contentInstallation),F.setLockInstallation(t.lockInstallation),F.setLockInstallationUpdate(t.lockInstallationUpdate),F.setLockUninstallationUpdate(t.lockUninstallation),t.config&&t.config.launcherUrl&&t.config.launcherUrl[0]&&""!==t.config.launcherUrl[0].url&&b.setLauncherConfig(t.config.launcherUrl[0].url),t.config&&t.config.catEnv&&t.config.catEnv[0]&&(""!==t.config.catEnv[0].dir||t.config.catEnv[0].catEnvDetails&&t.config.catEnv[0].catEnvDetails[0]&&""!==t.config.catEnv[0].catEnvDetails[0].direnv)&&b.setCatEnvConfig(t.config.catEnv),t.config&&t.config.registryUrl&&(f.registryUrl=t.config.registryUrl),t.config&&t.config.scripts&&t.config.scripts.length>0&&b.setScriptsConfiguration(t.config.scripts),oe._refreshSectionStates(W,t),void 0!==t.requestRole&&F.canRequestRole()!==t.requestRole&&(F.setRequestRole(t.requestRole),B.updateCompanyNav(t.requestRole)),n(t.changed,t.changed)},onFailure:function(){B.showMessage(se("erroroccurred"),5e3),B.unmask(),n(!1)}})):(B.mask(),V.fetch({onComplete:function(e,t){de=!0,B.displayQuadrant($),B.unmask(),B.setCanShowOptionCotent(t.contentInstallation),F.setLockInstallation(t.lockInstallation),F.setLockInstallationUpdate(t.lockInstallationUpdate),F.setLockUninstallationUpdate(t.lockUninstallation),F.setLinuxCompatibleEnv(t.config.linuxCompatible),t.config&&t.config.catEnv&&t.config.catEnv[0]&&(""!==t.config.catEnv[0].dir||t.config.catEnv[0].catEnvDetails&&t.config.catEnv[0].catEnvDetails[0]&&""!==t.config.catEnv[0].catEnvDetails[0].direnv)&&b.setCatEnvConfig(t.config.catEnv),t.config&&t.config.registryUrl&&(f.registryUrl=t.config.registryUrl),t.config&&t.config.scripts&&t.config.scripts.length>0&&b.setScriptsConfiguration(t.config.scripts),oe._refreshSectionStates(W,t),void 0!==t.requestRole&&F.canRequestRole()!==t.requestRole&&(F.setRequestRole(t.requestRole),B.updateCompanyNav(t.requestRole)),n(t.changed,t.changed)},onFailure:function(){B.showMessage(se("erroroccurred"),5e3),B.unmask(),n(!1)}})):V.fetch({onComplete:function(t,i){if(F.setCloud(i.cloud),F.setLinuxCompatibleEnv(i.config.linuxCompatible),void 0!==i.requestRole&&F.setRequestRole(i.requestRole),W?oe._refreshSectionStates(W,i):(W={north:{title:i.north[0].title,closed:i.north[0].closed,noapps:i.north[0].noapps,icon:!0},west:{title:i.west[0].title,closed:i.west[0].closed,noapps:i.west[0].noapps,icon:!0},south:{title:i.south[0].title,closed:i.south[0].closed,noapps:i.south[0].noapps,icon:!0},east:{title:i.east[0].title,closed:i.east[0].closed,noapps:i.east[0].noapps,icon:!0},lma:i.north&&i.north[1]?{title:i.north[1].title,closed:i.north[1].closed,noapps:"",icon:!1}:null,favorite:{title:i.favorite.title,closed:i.favorite.closed,noapps:"",icon:!0},roles:{title:i.roles.title,closed:i.roles.closed,noapps:i.roles.noroles,icon:!0},suggestions:{title:i.suggestions.title,closed:i.suggestions.closed,icon:!1},services:i.services,eservices:i.eservices,wrapperMP:{title:i.wrapperMP.title,closed:i.wrapperMP.closed,icon:!1},wrapperRole:{title:i.wrapperRole.title,closed:i.wrapperRole.closed,icon:!1}},e.log("onCompassLoaded"),S.dispatchEvent("onCompassLoaded")),B.setCanShowOptionCotent(i.contentInstallation),F.setLockInstallation(i.lockInstallation),F.setLockInstallationUpdate(i.lockInstallationUpdate),F.setLockUninstallationUpdate(i.lockUninstallation),i.config&&i.config.launcherUrl&&i.config.launcherUrl[0]&&""!==i.config.launcherUrl[0].url&&b.setLauncherConfig(i.config.launcherUrl[0].url),i.config&&i.config.catEnv&&i.config.catEnv[0]&&(""!==i.config.catEnv[0].dir||i.config.catEnv[0].catEnvDetails&&i.config.catEnv[0].catEnvDetails[0]&&""!==i.config.catEnv[0].catEnvDetails[0].direnv)&&b.setCatEnvConfig(i.config.catEnv),i.config&&i.config.registryUrl&&(f.registryUrl=i.config.registryUrl),i.config&&i.config.scripts&&i.config.scripts.length>0&&b.setScriptsConfiguration(i.config.scripts),pe){if(!ce){var s=[];g.getTenantList().forEach((function(e,t){e.platformId&&s.push(e.platformId)})),f.getBusinessExperienceUrl({platform:s},(function(e){g.setBusinessExperienceAvailable(e&&e.length>0),B.renderAppsView(W)}))}ce=!0,de=!0,B.displayQuadrant($),B.unmask()}re||(re=!0,g.isCompassV3()?z.setQuadrantNames({north:se("Social & Collaborative"),west:se("3D Modeling"),south:se("Simulation"),east:se("Information Intelligence"),play:se("compassTooltipv3")}):z.setQuadrantNames({north:i.north[0].title,west:i.west[0].title,south:i.south[0].title,east:i.east[0].title,play:i.play[0].title}),f.onlineInstallUrl=i.install,f.clusterId=i.clusterId,f.buildTransactionId=i.build,w.init(i.cloud),f.cloud=i.cloud,b.init(H,i.cloud),he.forEach((function(e){setTimeout(e,0)})),he.length=0,fe.forEach((function(e){setTimeout(e,0)})),fe.length=0,Z.topBarId&&B.initTopBar()),n(i.changed)},onFailure:function(){B.renderErrorView(se("erroroccurred")),B.unmask(),n(!1)}})},ae.initialize=function(t){e.log("initializing Compass"),!t.platform&&g.isBetaModeActivated("switch-tenant")&&window.location.hostname&&(t.platform=window.location.hostname.slice(0,window.location.hostname.indexOf("-"))),Z=e.merge(t,Z),g.setCompassVersion(t.version&&"v2"===t.version.toLowerCase()?"V32":t.version),g.setSupportQuickLink(t.version),g.setCurrentQuadrant(g.isCompassV2()||g.isCompassV3()?t.defaultQuadrant:Y),Y=g.isCompassV2()||g.isCompassV3()?t.defaultQuadrant:Y,t.locale&&F.setPortolioUrlLocale(t.locale),P.setup(Z.userId,Z.lang),g.setLang(Z.lang),D.initialize(ae.intercom.serverId,{onSetObject:ae.setObject,onResetObject:ae.resetObject,onLaunchApp:ae.launchApp,onSetStructure:ae.setStructure,onResetStructure:ae.resetStructure,onShowAccordion:ae.showAccordion,onHideAccordion:ae.hideAccordion,onSetX3DContent:ae.setX3DContent,onResetX3DContent:ae.resetX3DContent}),_.subscribe("setObject",ae.setObject),_.subscribe("resetObject",ae.resetObject),_.subscribe("launchApp",ae.launchApp),_.subscribe("installApp",ae.installApp),_.subscribe("detectInstallApp",ae.detectInstallApp),_.subscribe("resetPlay",ae.resetPlay),_.subscribe("activatePlay",ae.activatePlay),_.subscribe("search",ae.completeInputSearch),_.subscribe("resetQuadrant",ae.resetQuadrant),_.subscribe("setStructure",ae.setStructure),_.subscribe("resetStructure",ae.resetStructure),_.subscribe("setTypes",ae.setTypes),_.subscribe("resetTypes",ae.resetTypes),_.subscribe("setX3DContent",ae.setX3DContent),_.subscribe("resetX3DContent",ae.resetX3DContent),"function"===e.typeOf(Z.launchOnSameDomain)&&(g.setCustomFunction("customLaunchWebApp",Z.launchOnSameDomain),delete Z.launchOnSameDomain),"function"===e.typeOf(Z.enableWidgetDrag)&&(g.setCustomFunction("enableWidgetDrag",Z.enableWidgetDrag),delete Z.enableWidgetDrag),"function"===e.typeOf(Z.instanciateWidget)&&(g.setCustomFunction("instanciateWidget",Z.instanciateWidget),delete Z.instanciateWidget),"function"===e.typeOf(Z.onRoleChange)&&(g.setCustomFunction("onRoleChange",Z.onRoleChange),delete Z.onRoleChange),"function"===e.typeOf(Z.onOpen)&&(oe.onOpen=Z.onOpen,delete Z.onOpen),"function"===e.typeOf(Z.onClose)&&(oe.onClose=Z.onClose,delete Z.onClose),-1===Z.proxyTicketUrl.indexOf("?")?Z.proxyTicketUrl+="?t=":Z.proxyTicketUrl+="&t=",Z.myAppsBaseURL&&(Z.myAppsBaseUrl=Z.myAppsBaseURL,delete Z.myAppsBaseURL,e.log("Compass: myAppsBaseURL init option is deprecated. Please use myAppsBaseUrl instead.")),"function"===e.typeOf(Z.setPanelMode)&&(F.compassPanelSize=Z.setPanelMode),pe=!1,oe.initDefaultTranslate(),Z.compassTarget?(H=e.extendElement(document.getElementById(Z.compassTarget)))||e.log("Compass: this compass target markup is not available!"):e.log("Compass: you must provide a target for Compass (compassTarget)!"),z=new A({closable:Z.closable,defaultQuadrant:Y,events:{onOpenQuadrant:function(e){g.isCompassV3(),oe.handleQuadrantClick(e)},onCloseCompassOverlayView:function(){J.closeCompassV2FullSize(!0)},onClose:function(){F.isNativeApplicationEnvironment()||F.isMobileAppEnvironnementV2()||(B.onClose(),oe.dispatchClose(),G=window.clearTimeout(G),pe=!1),g.isCompassV3()&&g.getCurrentQuadrant()&&(D.fireEvent("compassEvent",{quadrant:g.getCurrentQuadrant()}),_.publish("compassEvent",{quadrant:g.getCurrentQuadrant()}),g.setCurrentQuadrant(g.getCurrentQuadrant()))}}}).inject(H),F.isPortfolioNavigation()?(H.hide(),setTimeout((function(){z.inject(H)}),300)):z.inject(H),f.initialize(Z,H),g.isCompassV2()&&ge(this,t.logoClassName,t.defaultQuadrant),oe.initTranslate((function(){Z.topBarId&&!g.isCompassV3()&&E.init({topBarId:Z.topBarId,onRoleChange:function(e,t){var n=V.get(e);n&&B.toggleRole(n,t)}}),V=new v(null,{comparator:"title"}),q=new M([],{comparator:"order"}),j=new C,g.isCompassV3()?(z.initTranslate(),document.querySelector(".topbar-compass")?(document.querySelector(".topbar-compass").addClassName("compass-v3"),g.isSupportQuickLink()&&document.querySelector(".topbar-compass").addClassName("support-quick-link")):document.querySelector("#compass-container")&&document.querySelector("#compass-container").addClassName("compass-v3"),B=new R({buildSearch:!0,closable:Z.closable,collection:V,sugCollection:j,preferencesCollection:q,closeOnLaunch:Z.closeOnLaunch,reLoadQuadrant:function(e){de=!1,oe.loadQuadrant(e)},filter:{}}),F.supportPushState()&&_.subscribe("navigateToContent",(function(){document.location.pathname.indexOf("compass-world")>-1&&(ve(!0),B._goHome(),setTimeout((function(){B._navigateToContent(document.body.getElement(".portfolio.portfolio-depth1"))}),500))})),_.subscribe("navigateToHome",(function(){B._goHome()}))):B=new y({closable:Z.closable,collection:V,sugCollection:j,closeOnLaunch:Z.closeOnLaunch}),B.addEvent("onClose",(function(){F.isNativeApplicationEnvironment()||F.isMobileAppEnvironnementV2()||(z.onClose(),oe.dispatchClose(),G=window.clearTimeout(G),pe=!1)})),g.isSmartphone()&&(g.isCompassV2()||g.isCompassV3()||g.isCompassV3()||(B.addEvent("onScrollTop",(function(){z.switchCompassView(!1)})),B.addEvent("onScrollDown",(function(){z.switchCompassView(!0)}))),z.addEvent("onUnScroll",(function(e){0!==B.appsAccordion.scrolled&&B.appsAccordion.unScroll(0)}))),(Q=e.extendElement(document.getElementById(Z.appsTarget)))&&B.render().inject(Q),S.addEvent("onMissingProcess",(function(){if(!me){de=!1,oe.loadQuadrant($),me=!0;var e=new I({className:"compass-modal compass-modal-missing",closable:!0,visible:!0,events:{onHide:function(){me=!1,e.destroy()}},header:"<h4>"+se("missingprocesses")+"</h4>",body:se("missingprocessesreloaded")}).inject(document.body)}})),oe.initDrag(),F.isPortfolioNavigation()||oe.loadQuadrant(""!=$?$:Y),document.location.pathname.indexOf("compass-world")>-1&&ve(!0),Z.closable&&"undefined"==typeof compassRichWithCef||ve(""!=$?$:Y),_.publish("private.viewIsReady",{});require(["DS/PlatformAPI/PlatformAPI"],(function(e){e.subscribe("com.ds.compass:onGrantedRole",(function(e){V.lastId=void 0,de=!1,U._private.reset(),B.resetCache&&(ue=!0,B.resetCache()),oe.loadQuadrant($)})),e.subscribe("MpfCartUpdated",(function(e){B.refreshBascketFooter(e.nbItems>0)}))})),le=!0,f.get3DDashboardUrl(),document.location.pathname.indexOf("compass-world")>-1&&ve(!0),_._initCefSubscriberIfNeeded()}),t.version)},oe._manageUrlNavigation=function(t){var n=document.location.pathname;0===n.indexOf("/world/")&&e.log(n)},ae.showAccordion=ve,oe.dispatchOpen=function(){D.fireEvent("compassPanelOnShow",{}),_.publish("compassPanelOnShow",{}),oe.onOpen&&oe.onOpen()},ae.hideAccordion=function(e){pe&&(z.onClose(),B.onClose(),G=window.clearTimeout(G),pe=!1),e&&oe.dispatchClose()},ae.resetQuadrant=function(t){g.isSupportQuickLink()&&(e.log("Compass: resetPlay play quadrant"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),z.resetQuadrant())},ae.resetPlay=function(t){if(!g.isCompassV2()){var n={onComplete:function(){e.log("onComplete"),_.publish("resetPlayCallback",t)}};e.log("Compass: resetPlay play quadrant"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),z.onActivePlay(!1,t,n)}},ae.activatePlay=function(t){if(!g.isCompassV2()){var n={onComplete:function(){e.log("onComplete"),_.publish("activatePlayCallback",t)}};e.log("Compass: active play quadrant"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),z.onActivePlay(!0,t,n)}},ae.completeInputSearch=function(t){if(le){e.log("Compass: complete Input Search"),e.log("query = "+t.query),ve(!0),B.completeInputSearch(t)}},oe.dispatchClose=function(){B&&B.resetCache&&(ue=!0,B.resetCache()),D.fireEvent("compassPanelOnHide",{}),_.publish("compassPanelOnHide",{}),oe.onClose&&oe.onClose()},ae.isInitialized=function(){return le},ae.setObject=function(t){var n;e.log("Compass: set object"),e.log(t),"object"===e.typeOf(t)?(JSON.stringify(t)!==JSON.stringify(ie)&&B.showMessage(se("selectionupdated"),5e3),(ie=t).hasOwnProperty("cstorage")&&!ie.hasOwnProperty("envId")&&(ie.envId=ie.cstorage),ie.hasOwnProperty("cspace")&&!ie.hasOwnProperty("contextId")&&(ie.contextId=ie.cspace),(n=ie.serviceId)&&"string"==typeof n&&n.trim()||console.warn("setObject without key: serviceId is deprecated, please provide the source id of the object")):ie={},ae.resetStructure(),ae.resetTypes(),V.setObject(ie)},ae.resetObject=function(){e.log("Compass: reset object"),ie={},V.resetObject()},ae.setX3DContent=function(t){e.log("Compass: set content"),e.log(t),"object"===e.typeOf(t)&&0!==Object.keys(t).length&&(k.setX3DContent(t),_.publish("setX3DContentCallback",t))},ae.resetX3DContent=function(){e.log("Compass: reset content");k.setX3DContent({})},ae.installApp=function(t){var n={onComplete:function(){_.publish("installAppCallback",t)},onFailure:function(n){t=e.merge(t,n),_.publish("installAppCallback",t)}};e.log("Compass: install App"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),B.handleInstallAppEvent(t,n)},ae.detectInstallApp=function(t){var n={onComplete:function(){_.publish("detectInstallAppCallback",t)},onFailure:function(n){t=e.merge(t,n),_.publish("detectInstallAppCallback",t)}};e.log("Compass: detect install App"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),B.handleInstallDetectionEvent(t,n,!0)},ae.launchApp=function(t){e.log("Compass: launch App"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),e.log("silent = "+t.silent),e.log("fileName = "+t.fileName),e.log("fileContent = "+t.fileContent);var n={widgetId:t.widgetId,appId:t.appId,response:"",origin:t.origin},i={onComplete:function(){e.log("COMPLETE"),n.response="COMPLETE",D.fireEvent("launchApp",n),t._PUB_SUB_ID&&(n._PUB_SUB_ID=t._PUB_SUB_ID),_.publish("launchAppCallback",n)},onFailure:function(i){var s=i.error;e.log(s),n.response=s,D.fireEvent("launchApp",n),t._PUB_SUB_ID&&(n._PUB_SUB_ID=t._PUB_SUB_ID),_.publish("launchAppCallback",n)}};B.handleLaunchAppEvent(t,i)},ae.setStructure=function(t){e.log("Compass set structure"),e.log(t),"object"===e.typeOf(t)&&"string"===e.typeOf(t.structure)?(ae.resetObject(),ae.resetTypes(),b.setStructure(t.structure)):b.resetStructure()},ae.resetStructure=function(){e.log("reset structure"),b.resetStructure()},ae.setTypes=function(t){e.log("Compass set Types"),e.log(t),"object"===e.typeOf(t)?(T.set(t),ae.resetStructure(),V.resetObject()):T.reset()},ae.resetTypes=function(){e.log("reset Types"),T.reset()},ae.getAppInfo=function(t){var n;t&&t.appId&&"function"===e.typeOf(t.onComplete)?(n=function(){var n,i,s=!t.x3dPlatformId||f.selectedPlatform===t.x3dPlatformId,o=function(e){f.request({url:e,urlParams:{id:t.appId,platform:t.x3dPlatformId||f.selectedPlatform,v:V?V.lastId:Date.now()},onComplete:function(e){e&&(ee[d]=e),te[d].forEach((function(t){t.onComplete(e)})),te[d]=null},onFailure:function(){throw te[d].forEach((function(e){i&&(i.error=!0),e.onComplete(i)})),te[d]=null,new Error("No config found for App:"+t.appId)}})};if(s&&(n=ae._private._getAppList().get(t.appId))&&(i=e.clone(n.toJSON())),!0===e.is(f.addinMode)&&i&&i.apps&&i.apps.length>1){var a=[];i.apps.forEach((function(e){Ce(e)&&a.push(e)})),i.apps=a}if(n&&void 0!==n.object&&n.object.envId)n.get("platforms")&&n.get("platforms").detect((function(e){return e.id===n.object.envId}))&&(i.platformId=n.object.envId);else if(window.location.hash){var l={};if(window.location.hash.substring(1,window.location.hash.length).split("/").forEach((function(e){var t=e.split(":");l[t[0]]=t[1]})),l.content){var r=l.content.split("=");if(r.length>1){var c={};try{c=JSON.parse(decodeURIComponent(r[1]))}catch(t){e.log(t)}c&&c.data&&c.data.items&&c.data.items[0]&&c.data.items[0].envId&&(e.is(i)||(i={}),i.platformId=c.data.items[0].envId)}}}var d=t.appId;t.x3dPlatformId&&(d=t.x3dPlatformId+t.appId),!i&&ee[d]&&(i=ee[d]);var p=f._getAppInfoUrl();i&&e.is(i.trusted)&&!0===i.trusted?t.onComplete(i):(te[d]||(te[d]=[]),te[d].push(t),1===te[d].length&&(s?o(p):X.getServicesByPlatform({platforms:[t.x3dPlatformId],services:["3dcompass"],config:{url:f.registryUrl}}).then((function(e){e.length>0&&(p=e[0].services[0].url+"/resources/AppsMngt/"+f._getAppInfoUri),o(p)}),(function(){o(p)}))))},ae._private._isAppsDataInitialized()?n():he.push(n)):t&&"function"===e.typeOf(t.onComplete)&&t.onComplete(new Error("Mandatory params are missing"))},ae.getAppsInfo=function(t){var n;t&&"function"===e.typeOf(t.onComplete)?(n=function(){var n=[];t.data&&"array"===e.typeOf(t.data)?t.data.forEach((function(t){var i=ae._private._getAppList().get(t),s=i?i.toJSON():void 0;if(!0===e.is(f.addinMode)&&s&&s.apps&&s.apps.length>1){var o=[];s.apps.forEach((function(e){Ce(e)&&o.push(e)})),s.apps=o}s&&e.is(s.trusted)&&!0===s.trusted&&n.push(s)})):ae._private._getAppList().forEach((function(t){t&&e.is(t.get("trusted"))&&!0===t.get("trusted")&&n.push(t)})),t.onComplete(n)},ae._private._isAppsDataInitialized()?n():fe.push(n)):t&&"function"===e.typeOf(t.onComplete)&&t.onComplete(new Error("Mandatory params are missing"))},ae.getBusinessMethodApps=function(t){var n;t&&"function"===e.typeOf(t.onComplete)&&(n=function(){var e=[];ae._private._getAppList().forEach((function(t){t.get("businessMethod")&&e.push(t.toJSON())})),t.onComplete(e)},ae._private._isAppsDataInitialized()?n():fe.push(n))},ae.getBusinessExperiences=function(t){t&&"function"===e.typeOf(t.onComplete)&&function(){t.onComplete([])}()},ae.searchApplication=function(t){var n;t&&"function"===e.typeOf(t.onComplete)&&(n=function(){var e={count:0,data:[]};ae._private._getAppList().forEach((function(n){var i=n.get("id"),s=n.get("title"),o=n.get("platforms")&&0===n.get("platforms").length||n.get("platforms")&&n.get("platforms").detect((function(e){return e.id&&e.id.toLowerCase()===f.selectedPlatform.toLowerCase()})),a=["north","west","south","east"].indexOf(n.get("quadrant"))>-1,l=t.query,r=t.limit||3;i&&a&&o&&(i.toLowerCase().replace(/(false|true)$/,"")===l.toLowerCase()||s&&s.toLowerCase().indexOf(l.toLowerCase())>-1)&&(e.data.length<r&&e.data.push({id:n.get("id"),title:n.get("title"),type:n.get("type"),icon:n.get("icon"),brand:n.get("brand"),tooltip:n.get("tooltip")}),e.count+=1)})),t.onComplete(e)},ae._private._isAppsDataInitialized()?n():fe.push(n))},ae.onRoleChange=function(e,t){var n;e?(n=V.findWhere({process:e},{granted:!0}))&&B.toggleRole(n,t):(de=!1,pe&&oe.loadQuadrant($))},ae.resetCompassSelectedPlatform=function(e){e.newPlatform&&f.getSelectedPlatform()&&f.getSelectedPlatform()!==e.newPlatform&&f.resetSelectedPlatform()},ae._private={_setQuadrant:function(e){$=e,z&&(z.currentQuadrant=e)},_getMyAppsView:function(){return B},_getAppList:function(){return V},_isAppsDataInitialized:function(){return re},_loadQuadrant:oe.loadQuadrant},ae})),define("i3DXCompass/i3DXCompass",["DS/i3DXCompass/i3DXCompass"],(function(e){"use strict";return e})),define("DS/i3DXCompass/ServiceApi/GrantedRolesApi",["UWA/Core","DS/i3DXCompass/i3DXCompass","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/Collection/AppList","DS/i3DXCompass/CacheManager"],(function(e,t,n,i,s,o){"use strict";var a,l=[],r=function(e){l.forEach((function(t){setTimeout(t,0,e)})),l.length=0},c=function(){var e=[],n=a||t._private._getAppList();return n&&n.forEach((function(t){(function(e){return e.isRole()&&!0===e.get("granted")&&"CUSTOM"!==e.get("id")})(t)&&e.push({id:t.get("process"),name:t.get("title"),platforms:t.get("grantedPlatforms")})})),e},d=function(){r(c()),n.removeEvent(d)};return{getGrantedRoles:function(t){t&&"function"===e.typeOf(t)&&function(t){var r=c();r.length>0?t(r):(l.push(t),n.addEventOnce("onCompassLoaded",d),"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl&&!a&&(i.initialize(COMPASS_CONFIG),o.setup(COMPASS_CONFIG.userId,COMPASS_CONFIG.lang),(a=new s).fetch({onComplete:function(){n.dispatchEvent("onCompassLoaded",d)},onFailure:function(){e.log("AppList: onFailure")}})))}(t)},_private:{callbacks:l,fireCallbacks:r}}}));