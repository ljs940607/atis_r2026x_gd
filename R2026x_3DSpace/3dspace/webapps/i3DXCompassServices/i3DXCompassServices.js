define("DS/i3DXCompassServices/i3DXCompassServices",[],(function(){"use strict";var e="DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices",n=function(){var e={};function n(){return window.dsDashboardWindow&&window.dsDashboardWindow.top?window.dsDashboardWindow.top:top}return function(t,o){if(e[t])e[t]&&o(e[t]);else if(function(){var e;try{n().document,e=!0}catch(n){e=!1}return e}())try{n().require([t],(function(n){e[t]=n,o(n)}))}catch(n){try{require([t],(function(n){e[t]=n,o(n)}))}catch(e){o(null)}}else try{require([t],(function(n){e[t]=n,o(n)}))}catch(e){o(null)}}}();return{getPlatformServices:function(t){n(e,(function(e){e.getPlatformServices({caa:!0,platformId:t.platformId,onComplete:function(e){e?(t.platformId,t.onComplete(e)):t.onComplete()},onFailure:t.onFailure})}))},getCompatibleApps:function(e){n("DS/i3DXCompassPlatformServices/OpenWith",(function(n){var t=new n;return t.set3DXContent(e.content).retrieveCompatibleApps((function(n){t.set3DXContent(e.content),"function"==typeof e.onComplete&&e.onComplete(n)}))}))},getServiceUrl:function(t){n(e,(function(e){e.getServiceUrl({caa:!0,platformId:t.platformId,serviceName:t.serviceName,onComplete:function(e){e?(t.platformId,t.onComplete(e)):t.onComplete()},onFailure:t.onFailure})}))}}})),define("DS/i3DXCompassServices/i3DXCompassPubSub",["UWA/Utils","UWA/Core","UWA/Class/Model","UWA/Class/Collection"],(function(e,n,t,o){"use strict";var i,s="com.ds.compass",c=function(){return"undefined"!=typeof dscef},r=(i={},function(e,n){if(!i[e]&&function(){var e;try{top.document,e=!0}catch(n){e=!1}return e}())try{top.require([e],(function(t){i[e]=t,n(t)}))}catch(e){}else i[e]&&n(i[e])}),u={subscribe:function(e,n){r("DS/MessageBus/MessageBus",(function(t){t&&t.subscribe({channel:s,topic:e,callback:n})}))},publish:function(i,u,a){var f=this;r("DS/MessageBus/MessageBus",(function(r){var l=e.getUUID(),p={},b=n.clone(i);if(u){for(var d in u)u.hasOwnProperty(d)&&u[d]&&(u[d]instanceof t||u[d]instanceof o)&&u[d].toJSON&&(u[d]=u[d].toJSON());p=u?n.clone(u):{}}c()&&setTimeout((function(){dscef.sendString(b,JSON.stringify(p))}),500),r&&(u||(u={}),a&&(f.subscribe(i+"Callback",(function(e){e._PUB_SUB_ID===l&&(delete e._PUB_SUB_ID,f.unsubscribe(i+"Callback"),a.apply(f,arguments))})),-1===i.indexOf("Callback")&&(u._PUB_SUB_ID=l)),r.publish({channel:s,topic:i,data:u}))}))},unsubscribe:function(e){r("DS/MessageBus/MessageBus",(function(n){n&&n.unsubscribe({channel:s,topic:e})}))},_subscribe:function(){throw new Error("use the subscribe method instead of _subscribe")},_publish:function(){throw new Error("use the publish method instead of _publish")},_initCefSubscriberIfNeeded:function(){c()&&require(["DS/PlatformAPI/PlatformAPI"],(function(e){e.subscribe("webinwin:win:notification",(function(e){if(console.log("Received a webinwin:win:notification"),console.log(e),e="string"==typeof e?JSON.parse(e):e,console.log(e),e&&e.topic){var n={channel:s,topic:e.topic,data:e.data};console.log(n),r("DS/MessageBus/MessageBus",(function(e){e&&e.publish(n)}))}}))}))}};return u}));