/*!  COPYRIGHT DASSAULT SYSTEMES 2014   */
define("DS/SearchControlCenter/control/SCCColorPicker",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Element","UWA/Controls/Abstract","DS/Controls/Tab","DS/Controls/ColorPalette","DS/Controls/ColorChooser","DS/Controls/Popup","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNInfraUX/SearchPreferences"],(function(e,t,a,r,n,i,o,s,l,c,d){"use strict";return n.extend(a,{name:"scc-colorPicker",_colorPickerPopup:null,_tab:null,_defaultColorPalette:null,_recentColorPalette:null,_colorChooser:null,_currentColor:"#ffffff",divCustomColorChooser:null,_swatches_default:[{value:"#FEE000"},{value:"#009DDB"},{value:"#FF8A2E"},{value:"#9B2C98"},{value:"#00AA86"},{value:"#F564A3"},{value:"#8DDEE4"},{value:"#CC092F"},{value:"#E2D5CC"},{value:"#6FBC4B"},{value:"#70036B"},{value:"#002596"},{value:"#C6C68B"},{value:"#7F7F7F"},{value:"#4EA8B7"},{value:"#007A4C"},{value:"#ADADAD"},{value:"#127277"},{value:"#6D2815"},{value:"#000000"},{value:"#4D62BA"}],_swatches_recent:null,init:function(e){this._parent(e),this._buildUI(e)},_buildUI:function(t){e.is(t)&&e.is(t.initialValue)&&(this._currentColor=t.initialValue),this.elements.container=r.create("div",{class:"div-scc-color-picker"}),this.elements.content=r.create("div",{class:"scc_color_picker_"+t.colorPickerLabel.replace(/[/\s]/g,"_"),styles:{"border-radius":"5px",border:"1px solid #000000",background:this._currentColor,width:"39px",height:"39px"},events:{click:this._buildColorPickerUI.bind(this)}}).inject(this.elements.container)},_buildColorPickerUI:function(t){var a=this;e.is(a.divCustomColorChooser)&&e.is(a._colorPickerPopup)||(a.divCustomColorChooser=r.create("div",{class:"container-custom-color-picker",id:"container_custom_color_picker"}),a._tab=new i({displayStyle:"strip"}).inject(a.divCustomColorChooser),a._tab.add({label:c.get("SCCColorPicker.tab.ColorPalette.title"),isSelected:!0,content:a._buildColorPalette()}),a._tab.add({label:c.get("SCCColorPicker.tab.ColorChooser.title"),content:a._buildColorChooser()}),a._colorPickerPopup=new l({target:t.target,trigger:"click",toggleFlag:!1,position:"top",alignment:"near",offset:{x:5,y:-255},touchMode:!0}),a._colorPickerPopup.show(),a._colorPickerPopup.setBody(a.divCustomColorChooser),a._colorPickerPopup.addEventListener("hide",(function(e){e.stopPropagation(),a._cleanup()})))},_buildColorPalette:function(){var e=r.create("div",{class:"scc-custom-color-picker",id:"scc_custom_color_picker_palette_tab_container"}),t=r.create("div",{class:"div-scc-custom-color-picker",id:"div_scc_custom_color_picker_default"}).inject(e);r.create("p",{class:"scc-custom-color-picker-title",id:"scc_custom_color_picker_title_default",text:c.get("SCCColorPicker.ColorPalette.default.title")}).inject(t);if(this._defaultColorPalette=new o({swatches:this._swatches_default,domId:"color_palette_default",touchMode:!0}).inject(t),this._getRecentSwatches().length>0){var a=r.create("div",{class:"div-scc-custom-color-picker",id:"div_scc_custom_color_picker_recent"}).inject(e);r.create("p",{class:"scc-custom-color-picker-title",id:"scc_custom_color_picker_title_recent",text:c.get("SCCColorPicker.ColorPalette.recent.title")}).inject(a);this._recentColorPalette=new o({swatches:this._getRecentSwatches(),domId:"color_palette_recent",touchMode:!0}).inject(a),this._recentColorPalette.addEventListener("change",this._onColorChange.bind(this),!1)}return this._defaultColorPalette.addEventListener("change",this._onColorChange.bind(this),!1),e},_buildColorChooser:function(){var e=r.create("div",{class:"scc-custom-color-chooser .scc-chooser-tab-container",id:"scc_custom_color_chooser_palette_tab_container"});return this._colorChooser=new s({domId:"color_chooser",value:this._currentColor,referenceValue:this._currentColor,touchMode:!0}).inject(e),this._colorChooser.addEventListener("change",this._onColorChange.bind(this),!1),e},_onColorChange:function(t){t.stopPropagation();var a=this._getNewColor(t.dsModel.domId);if(e.is(a,"string")&&a.indexOf("#")<0&&(a="#"+a),this._currentColor!==a)this._currentColor=a,this.elements.content.setStyle("background",a),"color_chooser"===t.dsModel.domId&&this._storeRecentSwatches(a),this._cleanup(),this.dispatchEvent("onColorChange",{color:a,target:this.elements.container}),this._currentColor="#ffffff";else{if(!this._colorChooser.pointerdownCanvasP&&"color_chooser"===t.dsModel.domId)return;this._cleanup()}},_getNewColor:function(e){switch(e){case"color_chooser":return this._colorChooser.pointerdownCanvasP?this._colorChooser.value:this._currentColor;case"color_palette_default":return this._defaultColorPalette.value;case"color_palette_recent":return this._recentColorPalette.value;default:return this._currentColor}},_getCurrentColor:function(){return this._currentColor},_getRecentSwatches:function(){var t=d.getLocalStorageItem("_swatches_recent");return e.is(t)?JSON.parse(t):[]},_storeRecentSwatches:function(t){var a=JSON.parse(d.getLocalStorageItem("_swatches_recent"));e.is(a,"array")||(a=[]);var r=a.findIndex((e=>e.value.trim()===t.trim()));r>=0&&a.splice(r,1),a.length>=10&&a.shift(),a.push({value:t}),d.setLocalStorageItem("_swatches_recent",JSON.stringify(a))},_cleanup:function(){e.is(this._defaultColorPalette)&&(this._defaultColorPalette.destroy(),this._defaultColorPalette=null),e.is(this._recentColorPalette)&&(this._recentColorPalette.destroy(),this._recentColorPalette=null),e.is(this._colorChooser)&&(this._colorChooser.destroy(),this._colorChooser=null),e.is(this._tab)&&(this._tab.destroy(),this._tab=null),e.is(this._colorPickerPopup)&&(this._colorPickerPopup.destroy(),this._colorPickerPopup=null),e.is(this.divCustomColorChooser)&&(this.divCustomColorChooser.destroy(),this.divCustomColorChooser=null)}})})),define("DS/SearchControlCenter/Model/SearchControlCenterFacetListModel",["UWA/Core","UWA/Class/Model"],(function(e,t){"use strict";return t.extend({defaults:function(){return{id:"",title:"",subtitle:"",tooltip:"",domainid:"",facetJS:"",image:""}}})})),define("DS/SearchControlCenter/scripts/SearchcontrolCenterModel",["UWA/Element","UWA/Core","UWA/Class","UWA/Class/Debug"],(function(e,t,a,r){"use strict";var n=a.singleton(r,{_searchControlCenterSettingsJSON:{},_datasource_InternalName_Mapping:{},_types_InternalName_Mapping:{},_attributes_InternalName_Mapping:{},_local_AttributeDisplay_Cache_For_Types:[],_local_AttributeDisplay_Cache_For_6WTags:[],gate_Local_Attribute_Cache:function(){return this._local_AttributeDisplay_Cache_For_Types},clear_Local_Attribute_Cache:function(){this._local_AttributeDisplay_Cache_For_Types.length>0&&(this._local_AttributeDisplay_Cache_For_Types=[])},clear_Local_6WTags_Cache:function(){this._local_AttributeDisplay_Cache_For_6WTags.length>0&&(this._local_AttributeDisplay_Cache_For_6WTags=[])},initiate_Local_Attribute_Cache:function(e){this._local_AttributeDisplay_Cache_For_Types.length>0&&(this._local_AttributeDisplay_Cache_For_Types=[]),e.length>0&&(this._local_AttributeDisplay_Cache_For_Types=e)},update_Local_Attributes_Cache:function(e){var a=this._local_AttributeDisplay_Cache_For_Types,r=e.datasource,n=e.type,i=e.preferredAttributeList,o=e.excludeAttributeList,s=!1;if(a.length>0){e.attributes;if(t.is(a,"array")&&t.is(n,"string")&&t.is(r,"string"))for(var l=0;l<a.length;l++){var c=a[l];t.is(c)&&n===c.uri&&r===c.source&&(t.is(i,"array")&&i.length>0&&(c.predicates=i,s=!0),t.is(o,"array")&&o.length>0&&(c.excluded_predicates=o,s=!0))}}if(!1===s){var d=[],u={};u.source=r,u.uri=n,t.is(i,"array")&&i.length>0&&(u.predicates=i),t.is(o,"array")&&o.length>0&&(u.excluded_predicates=o),a.length>0?a.push(u):(d.push(u),this._local_AttributeDisplay_Cache_For_Types=d)}},setSettingsJSON:function(e){t.is(e)&&(this._searchControlCenterSettingsJSON=e)},gateSettingsJSON:function(){return this._searchControlCenterSettingsJSON},gateTabSettingJSON:function(e){let a={};if(t.is(e)&&t.is(e.facetID,"string")){let o,s=e.facetID,l=n._searchControlCenterSettingsJSON;if(t.is(e.settingsJSON)&&(l=e.settingsJSON),o=t.is(l,"string")?JSON.parse(l):l,t.is(o)){let e=Object.keys(o),n=null;for(let l=0;l<e.length;l++){let c=e[l];if(t.is(c)&&o.hasOwnProperty(c))if("search_settings"===c&&"SearchControl_General"===s){if(n=o.search_settings,t.is(n)){a=n,o.result_categories&&(a.result_categories=o.result_categories),o.search_synonyms&&(a.search_synonyms=o.search_synonyms);break}}else if("type_custo"===c&&"SearchControl_SearchTypes"===s)n=o.type_custo,t.is(n)&&(a.type_custo=n);else if("tagRelationships"===c&&"SearchControl_6WTags"===s)a.tagRelationships=o.tagRelationships;else if("tagColorization"===c&&"SearchControl_6WTags"===s)a.tagColorization=o.tagColorization;else if("hierarchical_predicates"===c&&"SearchControl_6WTags"===s)a.hierarchical_predicates=o.hierarchical_predicates;else if("controlledVocabulary"===c&&"SearchControl_6WTags"===s)a.controlledVocabulary=o.controlledVocabulary;else if("enterprise_ontology"===c&&"SearchControl_6WTags"===s)a.enterprise_ontology=o.enterprise_ontology;else if("current_enterprise_ontology_title"===c&&"SearchControl_6WTags"===s)a.current_enterprise_ontology_title=o.current_enterprise_ontology_title;else if("enterprise_ontology_history"===c&&"SearchControl_6WTags"===s)a.enterprise_ontology_history=o.enterprise_ontology_history;else if("companyTagsSearchSuggest"===c&&"SearchControl_6WTags"===s)a.companyTagsSearchSuggest=o.companyTagsSearchSuggest;else if("controlledVocabMode"===c&&"SearchControl_6WTags"===s)a.controlledVocabMode=o.controlledVocabMode;else if("attribute_custo"===c&&"SearchControl_6WTags"===s){if(n=o.attribute_custo,t.is(n)){if(n.hasOwnProperty("ds6w:type")){var r=n["ds6w:type"];if(t.is(r,"array"))for(var i=0;i<r.length;i++)if(UWA.is("AllDataSourcesandTypes"===r[i].source)){a=r[i];break}}n.hasOwnProperty("attributes_display")&&(a.attributes_display=n.attributes_display),n.hasOwnProperty("context_apps_predicates")&&(a.context_apps_predicates=n.context_apps_predicates)}}else"attribute_custo"===c&&"SearchControl_SearchTypes"===s?(n=o.attribute_custo,t.is(n)&&(a.attribute_custo=n)):"results_attributes_display_customization"===c&&"SearchControl_ResultsAttributesDisplay"===s?(n=o.results_attributes_display_customization,t.is(n)&&(a.results_attributes_display_customization=n)):"pqs"===c&&"SearchControl_PQ"===s&&(n=o.pqs,t.is(n)&&(a.pqs=n))}"SearchControl_6WTags"===s&&(n=o.search_settings,t.is(n)&&n.hasOwnProperty("rangeValuesClassification")&&(a.rangeValuesClassification=n.rangeValuesClassification))}}return a},updateSettingsJSON:function(e){var a,r,i,o=!1;if(a=t.is(e,"string")?JSON.parse(e):e,t.is(n._searchControlCenterSettingsJSON)?(r=t.is(n._searchControlCenterSettingsJSON,"string")?JSON.parse(n._searchControlCenterSettingsJSON):n._searchControlCenterSettingsJSON,t.is(r)&&(i=Object.keys(r))):o=!0,t.is(a))for(var s=Object.keys(a),l=0;l<s.length;l++){var c=s[l];if(t.is(c)&&a.hasOwnProperty(c))if("SearchControl_General"===c){var d=null,u=null;(h=a.SearchControl_General)&&h.result_categories&&(d=h.result_categories,delete h.result_categories),h&&h.search_synonyms&&(u=h.search_synonyms,delete h.search_synonyms),!0===o||0===i.length?(n._searchControlCenterSettingsJSON.search_settings=h,d&&(n._searchControlCenterSettingsJSON.result_categories=d),u&&(n._searchControlCenterSettingsJSON.search_synonyms=u)):(r.search_settings=h,d&&(r.result_categories=d),u&&(r.search_synonyms=u))}else if("SearchControl_SearchTypes"===c){var g=a.SearchControl_SearchTypes;if(!0===o||0===i.length)n._searchControlCenterSettingsJSON.type_custo=g;else if(i.length>0){let e=!1;for(let a=0;a<i.length;a++){let n=i[a];if(t.is(n)&&r.hasOwnProperty(n)&&"type_custo"===n){var p=r[n];p.type_display=g.type_display,p.SEARCH_INSTANCES=g.SEARCH_INSTANCES,p.filterOnResults=g.filterOnResults,p.easyTypeAccess=g.easyTypeAccess,p.excluded_types=g.excluded_types,p.default_datasourceandtype=g.default_datasourceandtype,e=!0}}!1===e&&(r.type_custo=g)}}else if("SearchControl_SearchAttributes"===c||"SearchControl_6WTags"===c){var h,_=!1,m=a.SearchControl_SearchAttributes;if(t.is(m)||(m=a.SearchControl_6WTags,_=!0),(h=n._searchControlCenterSettingsJSON.search_settings).rangeValuesClassification=m.rangeValuesClassification,m.tagRelationships&&(n._searchControlCenterSettingsJSON.tagRelationships=m.tagRelationships),m.tagColorization&&(n._searchControlCenterSettingsJSON.tagColorization=m.tagColorization),m.hierarchical_predicates&&(n._searchControlCenterSettingsJSON.hierarchical_predicates=m.hierarchical_predicates),m.enterprise_ontology&&(n._searchControlCenterSettingsJSON.enterprise_ontology=m.enterprise_ontology),m.current_enterprise_ontology_title&&(n._searchControlCenterSettingsJSON.current_enterprise_ontology_title=m.current_enterprise_ontology_title),m.enterprise_ontology_history&&(n._searchControlCenterSettingsJSON.enterprise_ontology_history=m.enterprise_ontology_history),m.hasOwnProperty("companyTagsSearchSuggest")&&(n._searchControlCenterSettingsJSON.companyTagsSearchSuggest=m.companyTagsSearchSuggest),m.hasOwnProperty("controlledVocabMode")&&(n._searchControlCenterSettingsJSON.controlledVocabMode=m.controlledVocabMode),!0!==o&&0!==i.length||(n._searchControlCenterSettingsJSON.attribute_custo=m),m.controlledVocabulary)n._searchControlCenterSettingsJSON.controlledVocabulary=m.controlledVocabulary;else if(i.length>0){let e=!1;for(let a=0;a<i.length;a++){let n=i[a];if(t.is(n)&&r.hasOwnProperty(n)&&"attribute_custo"===n){var f=r[n];_&&(f.attributes_display=m.attributes_display);var C=f["ds6w:type"],y=m["ds6w:type"];if(t.is(y)&&y.length>0&&!_)f["ds6w:type"]=y;else{var v,b=!1;if(t.is(y,"array")&&y.length>0)for(var S=0;S<y.length;S++)if(y[S].hasOwnProperty("source")&&"AllDataSourcesandTypes"===y[S].source){v=y[S];break}if(t.is(C,"array")&&C.length>0&&t.is(v)){for(var T=0;T<C.length;T++){var x=C[T];t.is(x)&&x.source===v.source&&(C[T]=v,b=!0)}!1===b&&C.push(y[0])}else t.is(y)&&(f["ds6w:type"]=y)}if(m.hasOwnProperty("context_apps_predicates"))if(f.hasOwnProperty("context_apps_predicates")){var w=f.context_apps_predicates,D=m.context_apps_predicates,A=(b=!1,Object.keys(D[0]));if(A.length>0){for(var I=0;I<w.length;I++)if(w[I].hasOwnProperty(A[0])){w[I]=D[0],b=!0;break}!1===b&&w.push(D[0])}}else f.context_apps_predicates=m.context_apps_predicates;e=!0}}!1===e&&(r.attribute_custo=m)}}else if("SearchControl_ColumnCusto"===c)r.column_custo=a.SearchControl_ColumnCusto;else if("SearchControl_ResultsAttributesDisplay"===c)r.results_attributes_display_customization=a.SearchControl_ResultsAttributesDisplay;else if("SearchControl_PQ"===c){(g=a.SearchControl_PQ)&&(n._searchControlCenterSettingsJSON.pqs=g)}}},setDatasourceInternalMapping:function(e){t.is(e)&&(this._datasource_InternalName_Mapping=e)},getDatasourceInternalMappingValue:function(e){var a=this._datasource_InternalName_Mapping;if(t.is(a)&&t.is(e,"string"))for(var r=Object.keys(a),n=0;n<r.length;n++)if(a[r[n]]===e)return r[n]},getDatasourceDisplayMappingValue:function(e){var a=this._datasource_InternalName_Mapping;if(t.is(a)&&t.is(e,"string"))for(var r=Object.keys(a),n=0;n<r.length;n++)if(r[n]===e)return a[r[n]]},setAttributesInternalMappingForAllDataSourcesAndTypes:function(e,a){t.is(a)&&(this._types_InternalName_Mapping[e]=a)},getAttributesInternalMappingValueForAllDataSourcesAndTypes:function(e,a){if(t.is(a,"string")&&t.is(e,"string")){var r=this._types_InternalName_Mapping[e];if(t.is(r))for(var n=Object.keys(r),i=0;i<n.length;i++)if(r[n[i]]===a)return n[i]}},getAttributesDisplayMappingValueForAllDataSourcesAndTypes:function(e,a){if(t.is(a,"string")&&t.is(e,"string"))for(var r=Object.keys(this._types_InternalName_Mapping),n=0;n<r.length;n++){if(e===r[n])return this._types_InternalName_Mapping[e][a]}},setTypeInternalMapping:function(e,a){t.is(a)&&(this._types_InternalName_Mapping[e]=a)},getTypeInternalMappingValue:function(e,a){if(t.is(a,"string")&&t.is(e,"string")){var r=this._types_InternalName_Mapping[e];if(t.is(r))for(var n=Object.keys(r),i=0;i<n.length;i++)if(r[n[i]]===a)return n[i]}},getTypeDisplayMappingValue:function(e,a){if(t.is(a,"string")&&t.is(e,"string"))for(var r=Object.keys(this._types_InternalName_Mapping),n=0;n<r.length;n++){if(e===r[n])return this._types_InternalName_Mapping[e][a]}},setAttributeInternalMapping:function(e,a,r){if(t.is(r)&&t.is(a,"string")&&t.is(e,"string")){var n={};n[a]=r;var i=Object.keys(this._attributes_InternalName_Mapping);if(i.length<=0)this._attributes_InternalName_Mapping[e]=n;else{for(var o=!1,s=0;s<i.length;s++)if(this._attributes_InternalName_Mapping[i[s]]===e){var l=this._attributes_InternalName_Mapping[i[s]];if(t.is(l)){l[a]=r,o=!0;break}}if(!1===o){var c=this._attributes_InternalName_Mapping[e];t.is(c)&&(c[a]=r)}}}},getAttributeInternalMapping:function(e,a,r){if(t.is(e,"string")&&t.is(a,"string")&&t.is(r,"string")){var n=this._attributes_InternalName_Mapping[e];if(t.is(n))for(var i=Object.keys(n),o=0;o<i.length;o++)if(i[o]===a)for(var s=n[i[o]],l=Object.keys(s),c=0;c<l.length;c++)if(s[l[c]]===r)return l[c]}}});return n})),define("DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept",["UWA/Core","UWA/Class/Debug","UWA/Class/Model","UWA/Class/Collection"],(function(e,t,a,r){"use strict";var n=a.extend(t,{setup:function(e){this.set("narrower",new r([],{model:n})),this.set("broader",new r([],{model:n}));let t=e.id.split(":");t.length>0&&this.set("ontology",t[0]+":")},getLabel:function(){return this.get("label")},getURI:function(){return this.get("uri")},getShortURI:function(){return this.id},getOntology:function(){return this.get("ontology")},setAsRootWConcept:function(){this.set("isRootWConcept",!0)},setAsRootConcept:function(){this.set("isRootConcept",!0)},IsARootConcept:function(){return this.get("isRootConcept")},getURIPath:function(){let e=[],t=this;for(;t;)e.push(t.getURI()),t=t.getBroaderConcept();return e.reverse()},getRootConcept:function(){let e,t;for(;Array.isArray(e=this.getBroaderConcept())&&e.length>0;)t=e,e[0].getRootConcept();if(t)return t[0].getURI()},getRootW:function(){return this.get("rootW")},getBroaderConcept:function(){return this.get("broader")},_addBroaderConcept:function(e){this.get("broader").add(e)},addNarrowerConcept:function(e){this.get("narrower").add(e),e._addBroaderConcept(this)},getNarrowerConcept:function(){return this.get("narrower").toArray()},setAsTaggable:function(){this.set("taggable",!0)},setAsDeprecated:function(){this.set("deprecated",!0)},canBeTagged:function(){return this.get("taggable")},isDeprecated:function(){return this.get("deprecated")}});return n})),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCInContextSearchManager",["UWA/Core","UWA/Class","DS/SNInfraUX/SearchCom","UWA/Utils/InterCom"],(function(e,t,a,r){"use strict";var n="socket_id_#scc_incontext_search#",i="widget_id_#scc_incontext_search#";return t.singleton({_socket:null,_selectedId:null,_selectedLabel:null,init:function(){this._socket=new r.Socket(n,{dispacthRetryInterval:0}),this._socket.subscribeServer("SearchComServer")},search:function(e){let t=this;return new Promise((function(a,r){let n=t._getInContextOptions(e);t._socket.dispatchEvent("RegisterContext",n),t._socket.addListener("RegisterContext_Response",(function(){t._socket.dispatchEvent("InContextSearch",n),t._socket.addListener("InContextSearch_Response",(function(e){t._searchSelecteObj(t,e).then((function(){let e={label:t._selectedLabel,id:t._selectedId};a(e),t._socket.addListener("onCloseTransient",t._cleanUpContext.bind(t))}),(function(){r()}))}),(function(){r("no object selected, cancel clicked")}))}),(function(){r("Company Tags For Search Suggest is not activated"),t._socket.addListener("onCloseTransient",t._cleanUpContext.bind(t))}))}))},_searchSelecteObj:function(e,t){console.log("In _searchSelecteObj");let a=this;return new Promise((function(e,r){"in_app_ok"===t.selected_command?(a._selectedLabel=t.selected_objects[0]["ds6w:label"],a._selectedId=t.selected_objects[0].resourceid,e(a._selectedId)):r()}))},getSelectedOject:function(){return this._selectedId},_getInContextOptions:function(e){return{widget_id:i,app_socket_id:n,title:e.title,default_search_criteria:"",search_criteria_to_display:"",precond:e.precond,default_with_precond:!0,mode:"furtive",search_criteria_to_display:"",source:[e.source]}},_cleanUpContext:function(){this._socket.dispatchEvent("UnregisterContext",{widget_id:i}),this._socket.removeListener("RegisterContext_Response"),this._socket.removeListener("onCloseTransient")},destroy:function(){this._socket.unsubscribeServer("SearchComServer"),this._socket=null}})})),define("DS/SearchControlCenter/Collection/SearchControlCenterFacetListCollection",["UWA/Core","UWA/Utils","UWA/Class/Collection","DS/SNSearchResultsCusto/utils/SearchResultsCustomizationPreferences","DS/SearchControlCenter/Model/SearchControlCenterFacetListModel","WebappsUtils/WebappsUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],(function(e,t,a,r,n,i,o,s){"use strict";return a.extend({model:n,setup:function(){e.log("SearchControlCenterFacetListCollection::setup"),this.url=i.getWebappsAssetUrl("SearchControlCenter","SearchControlCenter_Entries.json")},sync:function(t,a,r){e.log("SearchControlCenterFacetListCollection::sync"),r.proxy="passport",r.headers={"Accept-Language":widget.lang},this._parent.apply(this,[t,a,r])},parse:function(t){e.log("SearchControlCenterFacetListCollection::parse");var a=!1,r=!0,n=null;e.is(window)&&e.is(window.location)&&e.is(window.location.search,"string")&&(n=window.location.search.substring(1)),e.is(n,"string")&&n.length>0&&(n.indexOf("AdminColumnsSearch")>=0||n.indexOf("SearchDisplayName")>=0)&&(a=!1),-1===t.facets.findIndex((e=>"SearchControl_ResultsAttributesDisplay"===e.facetID))&&(r=!0,t.facets.splice(1,0,{facetID:"SearchControl_ResultsAttributesDisplay",srcJS:"DS/SearchControlCenter/scripts/SearchcontrolResultsAttributesDisplay",iconName:"search_attributesCustomization_fontIcon.png"}));var i,l,c=[];return Array.isArray(t.facets)&&t.facets.forEach((function(e){var t=!0;i=s[e.facetID],l=s[e.facetID+".subTitle"];var n=o.getURL()+"/webapps/SearchControlCenter/assets/img/"+e.iconName;"SearchControl_ColumnCusto"===e.facetID&&!1===a&&(t=!1),"SearchControl_ResultsAttributesDisplay"===e.facetID&&!1===r&&(t=!1),!0===t&&c.push({title:i,subtitle:l,introduction:"",image:n,facetJS:e.srcJS,domainid:e.facetID,id:e.facetID})})),c}})})),define("DS/SearchControlCenter/scripts/SearchControlCenterServices",["UWA/Element","UWA/Core","UWA/Promise","DS/UIKIT/Alert","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SNVocabAccess","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/SNResultUX/utils/SearchServices","DS/SNResultUX/utils/SearchViewOptions","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","css!DS/SearchControlCenter/SearchControlCenter","DS/SNResultUX/utils/ExternalComponentHelpers","DS/MessageBus/MessageBus","DS/SNInfraUX/tracker/SearchTrackerApi"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_){"use strict";var m={parentCardDiv:null,draggedCardBlock:null,platformID:null,platformDisplayName:null,_datasourceList:[],_datSourceToVocabID:{},_Service_Nls_promise:a.deferred(),_applyButton:null,_restoreButton:null,_buttonStatus:!1,_URL:null,_getAvailableSourcesPromise:{},createWdgAlert:function(){return new r({closable:!0,visible:!0,autoHide:!0,hideDelay:2500})},updateButtons:function(e,a){t.is(e)&&t.is(a)&&(this._applyButton=e,this._restoreButton=a)},isButtonDisabled:function(){return this._buttonStatus=!1,t.is(this._applyButton)&&t.is(this._restoreButton)&&!0===this._applyButton.isDisabled()&&!0===this._restoreButton.isDisabled()&&(this._buttonStatus=!0),this._buttonStatus},disableButtons:function(){t.is(this._applyButton)&&t.is(this._restoreButton)&&(!1===this._applyButton.isDisabled()&&this._applyButton.setDisabled(!0),!1===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!0))},enableButtons:function(){t.is(this._applyButton)&&t.is(this._restoreButton)&&(!0===this._applyButton.isDisabled()&&this._applyButton.setDisabled(!1),!0===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!1))},enableRestoreButton:function(){t.is(this._restoreButton)&&!0===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!1)},getButtonStatus:function(){return this._buttonStatus},reSetButtonStatus:function(){this._buttonStatus=!1},putMask:function(e){p.mask(e)},removeMask:function(e){p.unmask(e)},setPlatformID:function(e){t.is(e)&&(m.platformID=e)},getPlatformID:function(){if(t.is(m.platformID))return m.platformID},setPlatformDisplayName:function(e){t.is(e)&&(m.platformDisplayName=e)},getDataSourceList:function(e){var a=[],r=[];if(this._datasourceList.length>0)return this._datasourceList;if(t.is(m.platformID)){var n=i.getAvailableSources(m.platformID);if(t.is(n)){(e=e||{}).dataSources=n;var l=o.getValidDatasources(e);if(t.is(l)){if(t.is(l.dataSourceNames,"array")){r=l.dataSourceNames,r=c.filterSourceList(r);for(var d=0;d<r.length;d++)m._datSourceToVocabID[r[d]]=s.getVocabularyName(r[d])}t.is(l.dataSourceServices,"array")&&(a=l.dataSourceServices)}}return a.length>0&&this.getNLSValues(r,a,"ds6w:dataSource"),m._Service_Nls_promise.promise}},getVocabID:function(e){let a;return t.is(e)&&t.is(m._datSourceToVocabID)&&(a=m._datSourceToVocabID[e]),a},getNLSValues:function(e){var a={};a.dataSourceLists=e;var r=d.getNlsOfDataSources(a);if(t.is(r,"array")){var i={};i.AllDataSourcesandTypes=u.get("searchAttributes.DataSource.AllDataSourcesandTypes");for(var o=0;o<r.length;o++)i[e[o]]=r[o],m._datasourceList.push(r[o]);n.setDatasourceInternalMapping(i)}m._Service_Nls_promise.resolve(m._datasourceList)},getDatasourceInternalName:function(e){if(t.is(e))return n.getDatasourceInternalMappingValue(e)},getDatasourceDisplayName:function(e){if(t.is(e))return n.getDatasourceDisplayMappingValue(e)},updateAttributesMappingForAllDataSourcesAndTypes:function(e,a){t.is(e,"string")&&n.setAttributesInternalMappingForAllDataSourcesAndTypes(e,a)},getAttributesInternalNameForAllDataSourcesAndTypes:function(e,a){if(t.is(e))return n.getAttributesInternalMappingValueForAllDataSourcesAndTypes(e,a)},getAttributesDisplayNameForAllDataSourcesAndTypes:function(e,a){if(t.is(e))return n.getAttributesDisplayMappingValueForAllDataSourcesAndTypes(e,a)},updateTypesMapping:function(e,a){t.is(e,"string")&&n.setTypeInternalMapping(e,a)},getTypesInternalName:function(e,a){if(t.is(e))return n.getTypeInternalMappingValue(e,a)},getTypesDisplayName:function(e,a){if(t.is(e))return n.getTypeDisplayMappingValue(e,a)},updateAttributesMapping:function(e,a,r){t.is(e,"string")&&n.setAttributeInternalMapping(e,a,r)},getAttributesInternalName:function(e,a,r){if(t.is(e))return n.getAttributeInternalMapping(e,a,r)},getSettingsJSONFromTabName:function(e){if(t.is(e))return n.gateTabSettingJSON(e)},setLocalCacheForAttribute:function(e){if(t.is(e))return n.initiate_Local_Attribute_Cache(e)},updateLocalCacheForAttribute:function(e){if(t.is(e))return n.update_Local_Attributes_Cache(e)},getLocalCacheForAttribute:function(){return n.gate_Local_Attribute_Cache()},clearLocalCacheForAttribute:function(){return n.clear_Local_Attribute_Cache()},clearLocalCacheFor6WTags:function(){return n.clear_Local_6WTags_Cache()},encryptData:function(e,t){const a=e=>e.split("").map((e=>e.charCodeAt(0)));return t.split("").map(a).map((t=>a(e).reduce(((e,t)=>e^t),t))).map((e=>("0"+Number(e).toString(16)).substr(-2))).join("")},decryptData:function(e,t){return t.match(/.{1,2}/g).map((e=>parseInt(e,16))).map((t=>{return(a=e,a.split("").map((e=>e.charCodeAt(0)))).reduce(((e,t)=>e^t),t);var a})).map((e=>String.fromCharCode(e))).join("")},setURL:function(e){this.url=e},getURL:function(){return this.url},updateMemoryModel:function(e){t.is(e)&&n.setSettingsJSON(e)},getPredicatesList:function(){return new a((function(e,t){let a={onComplete:function(t){UWA.log("Got a predicates result!"+t),e(t)},onFailure:function(e){UWA.log("predicates service request Fail!"+e),t(e)},tenantId:m.platformID,lang:widget.lang,apiVersion:"R2021x"};l.getFedProperties(a)}))},isThisNotARootPredicate:function(e){return""!==e.subPropertyOf},getSettingsFromDB:function(){return n.gateSettingsJSON()},loadDataSourcesandClasses:function(){var e=this;return new a((function(t,r){e.getAvailableSources().then((function(r){r=r.filter((function(e){return e.status})),a.all(e.loadVocabClassesForSources(r)).then((function(e){t(e)}))}))}))},getAvailableSources:function(){let e=this,t=e.getPlatformID();if(!e._getAvailableSourcesPromise[t]){e._getAvailableSourcesPromise[t]=a.deferred();let r=i.getAvailableSources(t);r&&m._getAvailableSourcesPromise[t].resolve(r)}return m._getAvailableSourcesPromise[t].promise},loadVocabClassesForSources:function(e){let t=[],r=this.getPlatformID(),n=o.getLanguage();return e.forEach((e=>{e.status&&t.push(new a(((t,a)=>{s.loadVocabularyClasses({vocabId:e.service,tenantId:r,lang:n},t)})))})),t},trackerPublisher:function(e,a,r){if(t.is(a,"string")){const n={category:e,action:a,appId:"X3DOPSC_AP"};t.is(r,"object")&&(n.persDim={...r}),h.publish({channel:"SearchTrackerApi",topic:"hit",data:n})}else console.error("Invalid actionToBedefined:",a)}};return m})),define("DS/SearchControlCenter/scripts/SearchcontrolResultsAttributesDisplay",["UWA/Element","UWA/Core","DS/Controls/ComboBox","DS/Controls/Toggle","DS/SNInfraUX/SearchUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SNSearchResultsCusto/views/SearchResultsCustomizationPanel","DS/SNSearchResultsCusto/utils/SearchResultsCustomizationPreferences","DS/MessageBus/MessageBus"],(function(e,t,a,r,n,i,o,s,l,c,d,u){"use strict";return{activeCustoComboBox:null,customizationTool:null,deletingFromTenantSettings:!1,BETAcustomizationEnabled:!1,_activeCustoObject:{},onRenderFacet:function(t){this.tenant=i.platformID,d.loadCustomizationTenantSettings(this.tenant),this.BETAcustomizationEnabled=d.isBETAEnabled(),this._setActiveCustomization();var o=e.create("div",{class:"scc_main_div",id:"search-center-resultCusto"}).inject(t),g=e.create("div").inject(o);let p=e.create("div",{class:"search_center_general_tab_div  search_center_add_category_bottom "}).inject(g),h=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"Enable_option_customization_for_all_views"}).inject(p);this.divBETACustomizationToggle=new r({type:"switch",label:s.get("AttributesCustomization.enable_BETA_customization"),touchMode:!0,checkFlag:this.isBETAEnabled}).inject(h),this.divBETACustomizationToggle.addEventListener("change",function(){i.enableButtons(),!1===this.divBETACustomizationToggle.checkFlag?(this.BETAcustomizationEnabled=!1,_.addClassName("search_center_disable"),"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()&&(x.addClassName("search_center_disable"),this.custoManagementToolContainer.addClassName("search_center_disable"))):(this.BETAcustomizationEnabled=!0,_.removeClassName("search_center_disable"),"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()&&(x.removeClassName("search_center_disable"),this.custoManagementToolContainer.removeClassName("search_center_disable")))}.bind(this));var _=e.create("div").inject(o);_.setStyle("margin-bottom","40px"),this.BETAcustomizationEnabled||_.addClassName("search_center_disable");var m=e.create("div",{class:"search_center_div_left search_center_general_display_flex search_center_top_margin"}).inject(_);e.create("p",{class:"search_center_text_heading",text:s.get("AttributesCustomization.active_customization")}).inject(m);var f=e.create("div",{class:" search_center_general_display_flex",id:"customization-apply-tooltip"}).inject(_),C=e.create("div",{class:"search_center_general_display_flex "}).inject(f);e.create("p",{class:"search_center_text",text:s.get("AttributesCustomization.active_customization_label")}).inject(C);var y=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(f);l.popin(y,{trigger:"hover",position:"top",body:s.get("AttributesCustomization.active_customization_info")});var v=e.create("div",{class:"search_center_general_display_flex search_center_general_tab_div"}).inject(_),b=e.create("div",{class:"search_center_div_left"}).inject(v);b.setStyle("display","grid");var S=d.buildUserCustomizationList("admin"),T=S.findIndex((e=>e===this.activeCustoId));if(this.activeCustoComboBox=new a({elementsList:S,currentValue:S[T]||"Default",touchMode:!0,enableSearchFlag:!0}).inject(b),this.activeCustoComboBox.elements.container.setStyle("max-width","unset"),this.activeCustoComboBox.addEventListener("change",function(e){e.preventDefault(),d.switchActiveCustomization(e.dsModel.currentValue),this.activeCustoId=e.dsModel.currentValue,"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()&&(this.custoManagementToolContainer.empty(),this.disableTenantSetting=!0,this.customizationTool.setup(this,this.custoManagementToolContainer),this.deletingFromTenantSettings=!1),i.enableButtons()}.bind(this)),"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()){var x=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(o);e.create("p",{class:"search_center_text_heading",styles:{"margin-bottom":"10px"},text:s.get("AttributesCustomization.Results_Attributes_management_tool")}).inject(x),this.custoManagementToolContainer=e.create("div",{class:""}).inject(o),this.BETAcustomizationEnabled||(x.addClassName("search_center_disable"),this.custoManagementToolContainer.addClassName("search_center_disable")),this.customizationTool=new c,this.isSCC=!0,this.customizationTool.setup(this,this.custoManagementToolContainer)}u.subscribe({channel:"3dSearch_results_customization",topic:"3dSearch_new_customization_in_localStorage",callback:()=>{this._updateCustomizationSelector()}}),u.subscribe({channel:"3dSearch_results_customization",topic:"3dSearch_results_customization_edited",callback:e=>{this._updateCustomizationSelector(),i.enableButtons();let t=i.createWdgAlert();t.inject(widget.body,"top");let a=s.get("AttributesCustomization.apply_settings_edit_customization");t.add({className:"warning applyChangesAlert",message:a})}}),u.subscribe({channel:"3dSearch_results_customization",topic:"3dSearch_customization_deleted_from_localStorage",callback:()=>{this.deletingFromTenantSettings=!0,this._updateCustomizationSelector();let e=i.createWdgAlert();e.inject(widget.body,"top");let t=s.get("AttributesCustomization.apply_settings_delete_customization");e.add({className:"warning applyChangesAlert",message:t})}}),i.removeMask(widget.body)},getTabInputsToStore:function(){var e={SearchAttributesDisplayAdminDefinition:[]},a=d.getCustomizationById(this.activeCustoId);return t.is(a)&&(e=a.exportCustomizationToJSON("SearchAttributesDisplayAdminDefinition")),e.BETAcustomizationEnabled=this.BETAcustomizationEnabled,e},onResetTab:function(e){if(t.is(e)){var a=e.results_attributes_display_customization;if(t.is(a)&&(!0===a.BETAcustomizationEnabled?this.divBETACustomizationToggle.checkFlag=!0:this.divBETACustomizationToggle.checkFlag=!1),t.is(a)&&"Default"===a.active_customization){d.switchActiveCustomization("Default");var r=d.buildUserCustomizationList("admin"),i=r.findIndex((e=>"Default"===e));-1===i&&(i=0),this.activeCustoComboBox.currentValue=r[i],"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()&&(this.custoManagementToolContainer.empty(),this.customizationTool.setup(this,this.custoManagementToolContainer))}}},_setActiveCustomization:function(){var e=d.getActiveCustomization();t.is(e)?t.is(e.customizationId)?this.activeCustoId=e.customizationId:this.activeCustoId=e.getCustomizationId():this.activeCustoId="Default"},_updateCustomizationSelector:function(){var e=d.buildUserCustomizationList("admin"),t=e.findIndex((e=>e===this.activeCustoId));this.activeCustoComboBox.elementsList=e,this.activeCustoComboBox.currentValue=t}}})),define("DS/SearchControlCenter/scripts/SearchcontrolSearchTypes",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/Controls/ComboBox","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SNVocabAccess","DS/SNResultUX/utils/ExternalComponentHelpers","DS/WUXAutoComplete/AutoComplete"],(function(e,t,a,r,n,i,o,s,l,c){"use strict";let d={datasourceComboBox:null,defaultDatasourceComboBox:null,_defaultDatasource:null,_vocabClassPromises:{},_vocabPropertiesPromises:{},_attributesMap:{},_uriNamesOfPreferredTypes:[],_preferredDatasourceNames:[],_excludeDatasourceNames:[],_uriNamesOfExcludeType:[],_trackerData:[],onRenderFacet:function(n){o.trackerPublisher("SearchControlCenter","ClickOnTab",{pd1:"Advanced Search"});let s=e.create("div",{class:"scc_main_div",id:"search-center-Types"}).inject(n),u=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"confofDisplayTypeSpan"}).inject(s),g=e.create("div",{class:"search_center_div_toggle search_center_general_display_flex",id:"confofDisplayTypeText"}).inject(u);d.EditConfDisplayTypeON=new a({type:"switch",label:i.get("Advanced.EditConfDisplayType.title"),touchMode:!0,value:0}).inject(g),d.EditConfDisplayTypeON.addEventListener("change",function(){d._trackerData.push({category:"SearchControlCenter-ADT",action:"selectValue",pd1:"EnableOptionForAdvancesearchToggle",pd2:d.EditConfDisplayTypeON.checkFlag}),o.enableButtons(),!1===d.EditConfDisplayTypeON.checkFlag?(h.addClassName("search_center_disable"),f.addClassName("search_center_disable"),v.addClassName("search_center_disable"),S.addClassName("search_center_disable"),x.addClassName("search_center_disable"),D.addClassName("search_center_disable"),d.divAvailableTypesSpan.addClassName("search_center_disable"),d.divAvailableTypesSpan2.addClassName("search_center_disable"),d.divExcludedTypesSpan.addClassName("search_center_disable"),d.divExcludedTypesSpan2.addClassName("search_center_disable"),I.addClassName("search_center_disable"),W.addClassName("search_center_disable"),j.addClassName("search_center_disable"),E.addClassName("search_center_disable"),k.addClassName("search_center_disable"),R.addClassName("search_center_disable"),V.addClassName("search_center_disable"),L.addClassName("search_center_disable")):(h.removeClassName("search_center_disable"),f.removeClassName("search_center_disable"),v.removeClassName("search_center_disable"),S.removeClassName("search_center_disable"),x.removeClassName("search_center_disable"),D.removeClassName("search_center_disable"),d.divAvailableTypesSpan.removeClassName("search_center_disable"),d.divAvailableTypesSpan2.removeClassName("search_center_disable"),d.divExcludedTypesSpan.removeClassName("search_center_disable"),d.divExcludedTypesSpan2.removeClassName("search_center_disable"),I.removeClassName("search_center_disable"),W.removeClassName("search_center_disable"),j.removeClassName("search_center_disable"),E.removeClassName("search_center_disable"),k.removeClassName("search_center_disable"),R.removeClassName("search_center_disable"),V.removeClassName("search_center_disable"),L.removeClassName("search_center_disable"))}.bind(this));let p=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(g);l.popin(p,{trigger:"hover",position:"right",body:i.get("searchType.ConfigDisplayType.popover")});let h=e.create("div",{class:"search_center_general_tab_div search_center_disable search_center_margin ",id:"SearchonInstances"}).inject(s),_=e.create("div",{class:"search_center_div_toggle search_center_general_display_flex",id:"SearchonInstancesText"}).inject(h);d.SearchonInstancesON=new a({type:"switch",label:i.get("searchType.instanceSearch"),touchMode:!0,value:0}).inject(_),d.SearchonInstancesON.addEventListener("change",function(){d._trackerData.push({category:"SearchControlCenter-ADT",action:"selectValue",pd1:"SearchonInstancesToggle",pd2:d.SearchonInstancesON.checkFlag}),o.enableButtons(),!0===d.SearchonInstancesON.checkFlag?this._searchonInstances=!0:this._searchonInstances=!1}.bind(this));let m=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(_);l.popin(m,{trigger:"hover",position:"right",body:i.get("searchType.SerchOnInstances.popover")});let f=e.create("div",{class:"search_center_general_tab_div search_center_disable search_center_margin ",id:"FilterResults"}).inject(s),C=e.create("div",{class:"search_center_div_toggle search_center_general_display_flex",id:"FilterResultsText"}).inject(f);d.filterOnResultsOn=new a({type:"switch",label:i.get("searchType.FilterDupResults"),touchMode:!0,value:0}).inject(C),d.filterOnResultsOn.addEventListener("change",function(){d._trackerData.push({category:"SearchControlCenter-ADT",action:"selectValue",pd1:"filterOnResultsOnToggle",pd2:d.filterOnResultsOn.checkFlag}),o.enableButtons()}.bind(this));let y=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(C);l.popin(y,{trigger:"hover",position:"right",body:i.get("searchType.FilterOnResults.popover")});let v=e.create("div",{class:" search_center_general_tab_div ",id:"default_dataSource_display_span"}).inject(s),b=e.create("div",{class:" search_center_div_left_6w search_center_general_display_flex  ",id:"default_dataSource_display_text"}).inject(v),S=e.create("div",{class:"search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"default_datasource_display_span"}).inject(s),T=e.create("div",{class:"search_center_div_left_6w",id:"Default_Data_Source_Display_Combo"}).inject(S);e.create("p",{class:"search_center_text_heading",text:i.get("SearchType.DefaultDataSource")}).inject(b),d.defaultDatasourceComboBox=new r({placeholder:i.get("Choose_default_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(T),T.setStyle("display","grid"),d.defaultDatasourceComboBox.elements.container.setStyle("max-width","unset"),d.defaultDatasourceComboBox.addEventListener("change",(function(){let e=i.get("General.None");d.defaultDatasourceComboBox.currentValue===e&&(d.defaultDatasourceComboBox.selectedIndex=-1),o.enableButtons()}));let x=e.create("div",{class:"search_center_general_tab_div  search_center_disable search_center_top_margin",id:"datasource_display_span"}).inject(s),w=e.create("div",{class:" search_center_div_left_6w search_center_general_display_flex  ",id:"datasource_display_type_text"}).inject(x),D=e.create("div",{class:"search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"Data_Source_Display_Span"}).inject(s),A=e.create("div",{class:"search_center_div_left_6w",id:"Data_Source_Display_Combo"}).inject(D);e.create("p",{class:"search_center_text_heading",text:i.get("searchAttributes.DataSource")}).inject(w),d.DatasourceComboBox=new r({placeholder:i.get("Choose_data_source"),touchMode:!0,enableSearchFlag:!0}).inject(A),A.setStyle("display","grid"),d.DatasourceComboBox.elements.container.setStyle("max-width","unset"),d.divAvailableTypesSpan=e.create("div",{class:"search_center_general_tab_div  search_center_disable",id:"availabale_types_div"}).inject(s),d.divAvailableTypesText=e.create("div",{class:"  search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"available_types_text_div"}).inject(d.divAvailableTypesSpan),d.divAvailableTypesSpan2=e.create("div",{class:"search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"avaialable_types_span"}).inject(s),d.divAvailableTypesAutoComp=e.create("div",{class:"search_center_div_left_6w",id:"avaialble_types_autocomp"}).inject(d.divAvailableTypesSpan2),e.create("p",{class:"search_center_text_heading",text:i.get("SearchType.AvailableTypes")}).inject(d.divAvailableTypesText),d.availableTypesAutocomp=new c({allowFreeInputFlag:!1,placeholder:i.get("Search")}).inject(d.divAvailableTypesAutoComp),d.availableTypesAutocomp.elements.container.children[0].setStyles({"min-height":"38px",height:"auto"}),d.availableTypesAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.availableTypesAutocomp.addEventListener("change",(function(){o.enableButtons();let e=d.excludedTypesAutocomp.value,a=d.availableTypesAutocomp.value;if(a.length>0&&d.upsertTrackerEntryADT({category:"SearchControlCenter-ADT",action:"selectValue",pd1:"availableTypes",pd2:a}),a.length>0){let n=a[a.length-1];if(t.is(e)&&e.length>0){if(e.indexOf(n)>-1){let e=d.availableTypesAutocomp.selectedItems.length;d.availableTypesAutocomp._selectionChips.removeChip(e-1);a.splice(-1,1);d.availableTypesAutocomp.selectedItems.splice(-1,1);let t=i.get("SearchType.preferredTypeWarning");var r=o.createWdgAlert();r.inject(widget.body,"top"),r.add({className:"warning applyChangesAlert",message:t})}}}})),d.divExcludedTypesSpan=e.create("div",{class:"search_center_general_tab_div  search_center_disable",id:"excluded_types_div"}).inject(s),d.divExcludedTypesText=e.create("div",{class:"   search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"excluded_types_text_div"}).inject(d.divExcludedTypesSpan),d.divExcludedTypesSpan2=e.create("div",{class:"search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"excluded_types_text_div2"}).inject(s),d.divExcludedTypesAutoComp=e.create("div",{class:"search_center_div_left_6w",id:"excluded_types_autocomp_div"}).inject(d.divExcludedTypesSpan2),e.create("p",{class:"search_center_text_heading",text:i.get("SearchType.ExcludedTypes")}).inject(d.divExcludedTypesText),d.excludedTypesAutocomp=new c({allowFreeInputFlag:!1,placeholder:i.get("Search")}).inject(d.divExcludedTypesAutoComp),d.excludedTypesAutocomp.elements.container.children[0].setStyles({"min-height":"38px",height:"auto"}),d.excludedTypesAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.excludedTypesAutocomp.addEventListener("change",(function(){o.enableButtons();let e=d.excludedTypesAutocomp.value,a=d.availableTypesAutocomp.value;if(e.length>0&&d.upsertTrackerEntryADT({category:"SearchControlCenter-ADT",action:"selectValue",pd1:"excludedTypes",pd2:e}),e.length>0){let n=e[e.length-1];if(t.is(a)&&a.length>0){if(a.indexOf(n)>-1){let t=d.excludedTypesAutocomp.selectedItems.length;d.excludedTypesAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.excludedTypesAutocomp.selectedItems.splice(-1,1);let a=i.get("SearchType.excludeTypeWarning");var r=o.createWdgAlert();r.inject(widget.body,"top"),r.add({className:"warning applyChangesAlert",message:a})}}}})),d.DatasourceComboBox.addEventListener("change",(function(){o.enableButtons();let e=i.get("General.None");d.DatasourceComboBox.currentValue===e&&(d.DatasourceComboBox.selectedIndex=-1);let a=[];if(d.excludedTypesAutocomp.elementsTree=a,d.availableTypesAutocomp.elementsTree=a,t.is(d.DatasourceComboBox.currentValue)){l.mask(d.divAvailableTypesAutoComp),l.mask(d.divExcludedTypesAutoComp);let e=o.getDatasourceInternalName(d.DatasourceComboBox.currentValue);d._loadClasses({datasourceURI:e}).then((function(a){d.availableTypesAutocomp.elementsTree=a,d.excludedTypesAutocomp.elementsTree=a;let r=[];for(let a=0;a<d._uriNamesOfPreferredTypes.length;a++){let n=d._uriNamesOfPreferredTypes[a];if(t.is(n)&&e===d._preferredDatasourceNames[a]){let e=o.getTypesDisplayName(d._preferredDatasourceNames[a],n);r.push(e)}}d.availableTypesAutocomp.value=r;let n=[];for(let a=0;a<d._uriNamesOfExcludeType.length;a++){let r=d._uriNamesOfExcludeType[a];if(t.is(r)&&e===d._excludeDatasourceNames[a]){let e=o.getTypesDisplayName(d._excludeDatasourceNames[a],r);n.push(e)}}d.excludedTypesAutocomp.value=n,l.unmask(d.divAvailableTypesAutoComp),l.unmask(d.divExcludedTypesAutoComp),o.disableButtons()}))}o.disableButtons()}));e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-empty-div"}).inject(s),e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_add_bottom_border",id:"general-tab-border"}).inject(s);let I=e.create("div",{class:"search_center_general_tab_div  search_center_disable",id:"avail-properties_display_span"}).inject(s),P=e.create("div",{class:"main_Div_Padding search_center_add_category_bottom  search_center_div_left_6w search_center_general_display_flex ",id:"available_properties_text"}).inject(I),W=e.create("div",{class:"search_center_top_margin search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"available_properties_display_span"}).inject(s),N=e.create("div",{class:"search_center_div_left_6w",id:"Avail_PropertiesDisplay_Combo_datasource"}).inject(W);e.create("p",{class:"search_center_text_heading",text:i.get("SearchType.AvailableProperties")}).inject(P),d.availPropDatasourceComboBox=new r({placeholder:i.get("Select_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(N),N.setStyle("display","grid"),d.availPropDatasourceComboBox.elements.container.setStyle("max-width","unset");let j=e.create("div",{class:"search_center_top_margin search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"properties_type_display_span"}).inject(s),O=e.create("div",{class:"search_center_div_left_6w",id:"Avail_Properties_Typeselection"}).inject(j);d.availPropTypeComboBox=new r({placeholder:i.get("Select_type"),touchMode:!0,enableSearchFlag:!0}).inject(O),O.setStyle("display","grid"),d.availPropTypeComboBox.elements.container.setStyle("max-width","unset"),d.availPropDatasourceComboBox.addEventListener("change",(function(){o.enableButtons();let e=i.get("General.None");d.availPropDatasourceComboBox.currentValue===e&&(d.availPropDatasourceComboBox.selectedIndex=-1);let a=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue);t.is(a)&&(d.availPropTypeComboBox.elementsList=[],d._loadClasses({datasourceURI:a}).then((function(e){d.availPropTypeComboBox.elementsList=e})))}));let E=e.create("div",{class:"search_center_top_margin search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"available_properties_span"}).inject(s),B=e.create("div",{class:"search_center_div_left_6w",id:"Available_Property_Comp"}).inject(E);d.AvailablePropertyAutocomp=new c({multiSearchMode:!0,placeholder:i.get("Search")}).inject(B),d.AvailablePropertyAutocomp.elements.container.children[0].setStyles({"min-height":"38px",height:"auto"}),d.AvailablePropertyAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.AvailablePropertyAutocomp.addEventListener("change",(function(){o.enableButtons();let e=d.AvailablePropertyAutocomp.value;if(e.length>0){d.upsertTrackerEntryADT({category:"SearchControlCenter-ADT",action:"selectValue",pd1:"Available Properties",pd2:d.availPropDatasourceComboBox.currentValue,pd3:d.availPropTypeComboBox.currentValue,pd4:e});let r=e[e.length-1],n=!1,s=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),l=o.getTypesInternalName(s,d.availPropTypeComboBox.currentValue);if(t.is(d.availPropDatasourceComboBox.currentValue)&&t.is(d.availPropTypeComboBox.currentValue)){let e=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),a=o.getTypesInternalName(e,d.excludePropTypeComboBox.currentValue);if(s===e&&l===a){let e=d.ExcludedPropertyAutocomp.value;if(t.is(e)&&e.length>0){e.indexOf(r)>-1&&(n=!0)}}}if(!1===n){let e=o.getLocalCacheForAttribute();if(t.is(e)&&e.length>0)for(let a=0;a<e.length;a++){let i=e[a];if(l===i.uri&&s===i.source){let e=i.excluded_predicates;if(t.is(e)&&e.length>0){for(let t=0;t<e.length;t++){let e=i.excluded_predicates[t].uri;if(d._attributesMap[e]===r){n=!0;break}}}}if(!0===n)break}}if(!0===n){let t=d.AvailablePropertyAutocomp.selectedItems.length;d.AvailablePropertyAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.AvailablePropertyAutocomp.selectedItems.splice(-1,1);let r=i.get("searchAttributes.preferredAttrWarning");var a=o.createWdgAlert();a.inject(widget.body,"top"),a.add({className:"warning applyChangesAlert",message:r})}}})),d.availPropTypeComboBox.addEventListener("change",(function(){d.AvailablePropertyAutocomp.elementsTree=[];let e=d.availPropTypeComboBox.currentValue;if(e){let a=d.availPropDatasourceComboBox.currentValue+"+"+e;l.unmask(B),l.mask(B),d._fetchProperties({uniqueKey:a}).then((function(e){d.AvailablePropertyAutocomp.elementsTree=e;let a=o.getLocalCacheForAttribute();if(t.is(a)&&a.length>0){let e=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),r=o.getTypesInternalName(e,d.availPropTypeComboBox.currentValue);for(let n=0;n<a.length;n++){let i=a[n];if(r===i.uri&&e===i.source){let e=i.predicates;if(t.is(e)&&e.length>0){let t=[];for(let a=0;a<e.length;a++){let e=i.predicates[a].uri,r=d._attributesMap[e];t.push(r)}d.AvailablePropertyAutocomp.value=t;break}d.AvailablePropertyAutocomp.value=[]}}}o.disableButtons(),l.unmask(B)}))}o.disableButtons()}));let k=e.create("div",{class:"main_Div_Padding search_center_general_tab_div search_center_disable ",id:"exclude_properties_display_span"}).inject(s),F=e.create("div",{class:"search_center_add_category_bottom  search_center_div_left_6w search_center_general_display_flex ",id:"exculded_properties_text"}).inject(k),R=e.create("div",{class:"search_center_top_margin search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"exclude_properties_display"}).inject(s),M=e.create("div",{class:"search_center_div_left_6w",id:"ExcludePropertiesDisplay_datasource"}).inject(R);e.create("p",{class:"search_center_text_heading",text:i.get("SearchType.ExcludedProperties")}).inject(F),d.excludePropDatasourceComboBox=new r({placeholder:i.get("Select_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(M),M.setStyle("display","grid"),d.excludePropDatasourceComboBox.elements.container.setStyle("max-width","unset");let V=e.create("div",{class:"search_center_top_margin search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"exclude_propertiestype_span"}).inject(s),U=e.create("div",{class:"search_center_div_left_6w",id:"Exclude_PropertiesType_DisplayCombo"}).inject(V);d.excludePropTypeComboBox=new r({placeholder:i.get("Select_type"),touchMode:!0,enableSearchFlag:!0}).inject(U),U.setStyle("display","grid"),d.excludePropTypeComboBox.elements.container.setStyle("max-width","unset"),d.excludePropDatasourceComboBox.addEventListener("change",(function(){o.enableButtons();let e=i.get("General.None");d.excludePropTypeComboBox.currentValue===e&&(d.excludePropTypeComboBox.selectedIndex=-1);let a=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue);t.is(a)&&(d.excludePropTypeComboBox.elementsList=[],d._loadClasses({datasourceURI:a}).then((function(e){d.excludePropTypeComboBox.elementsList=e})))}));let L=e.create("div",{class:"search_center_top_margin search_center_general_tab_div  search_center_disable search_center_general_display_flex",id:"excluded_properties_span"}).inject(s),Q=e.create("div",{class:"search_center_div_left_6w",id:"Excluded_Property_Comp"}).inject(L);d.ExcludedPropertyAutocomp=new c({multiSearchMode:!0,placeholder:i.get("Search")}).inject(Q),d.ExcludedPropertyAutocomp.elements.container.children[0].setStyles({"min-height":"38px",height:"auto"}),d.ExcludedPropertyAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.ExcludedPropertyAutocomp.addEventListener("change",(function(){o.enableButtons();let e=d.ExcludedPropertyAutocomp.value;if(e.length>0){d.upsertTrackerEntryADT({category:"SearchControlCenter-ADT",action:"selectValue",pd1:"Exvluded Properties",pd2:d.excludePropDatasourceComboBox.currentValue,pd3:d.excludePropTypeComboBox.currentValue,pd4:e});let r=e[e.length-1],n=!1,s=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),l=o.getTypesInternalName(s,d.excludePropTypeComboBox.currentValue);if(t.is(d.availPropDatasourceComboBox.currentValue)&&t.is(d.availPropTypeComboBox.currentValue)){let e=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),t=o.getTypesInternalName(e,d.availPropTypeComboBox.currentValue);if(e===s&&t===l){let e=d.AvailablePropertyAutocomp.value;if(e.length>0){e.indexOf(r)>-1&&(n=!0)}}}if(!1===n){let e=o.getLocalCacheForAttribute();if(t.is(e)&&e.length>0)for(let a=0;a<e.length;a++){let i=e[a];if(l===i.uri&&s===i.source){let e=i.predicates;if(t.is(e)&&e.length>0){for(let t=0;t<e.length;t++){let e=i.predicates[t].uri;if(d._attributesMap[e]===r){n=!0;break}}}}if(!0===n)break}}if(!0===n){let t=d.ExcludedPropertyAutocomp.selectedItems.length;d.ExcludedPropertyAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.ExcludedPropertyAutocomp.selectedItems.splice(-1,1);let r=i.get("searchAttributes.excludeAttrWarning");var a=o.createWdgAlert();a.inject(widget.body,"top"),a.add({className:"warning applyChangesAlert",message:r})}}})),d.excludePropTypeComboBox.addEventListener("change",(function(){d.ExcludedPropertyAutocomp.elementsTree=[];let e=d.excludePropTypeComboBox.currentValue;if(e){let a=d.excludePropDatasourceComboBox.currentValue+"+"+e;l.unmask(Q),l.mask(Q),d._fetchProperties({uniqueKey:a}).then((function(e){d.ExcludedPropertyAutocomp.elementsTree=e;let a=o.getLocalCacheForAttribute();if(t.is(a)&&a.length>0){let e=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),r=o.getTypesInternalName(e,d.excludePropTypeComboBox.currentValue);for(let n=0;n<a.length;n++){let i=a[n];if(r===i.uri&&e===i.source){let e=i.excluded_predicates;if(t.is(e)&&e.length>0){let t=[];for(let a=0;a<e.length;a++){let e=i.excluded_predicates[a].uri,r=d._attributesMap[e];t.push(r)}d.ExcludedPropertyAutocomp.value=t}else d.ExcludedPropertyAutocomp.value=[]}}}o.disableButtons(),l.unmask(Q)}))}o.disableButtons()}));let z=[];if(z.push(i.get("General.None")),o._datasourceList.length>0){let e=o._datasourceList;if(t.is(e,"array")){let t=z.concat(e);d.DatasourceComboBox.elementsList=t,d.defaultDatasourceComboBox.elementsList=t,d.availPropDatasourceComboBox.elementsList=e,d.excludePropDatasourceComboBox.elementsList=e}}else o.getDataSourceList().then((function(e){if(t.is(e,"array")){let t=z.concat(e);d.DatasourceComboBox.elementsList=t,d.defaultDatasourceComboBox.elementsList=t,d.availPropDatasourceComboBox.elementsList=e,d.excludePropDatasourceComboBox.elementsList=e}}))},_loadClasses:function(e){if(!e||!e.datasourceURI)return null;let a=e.datasourceURI;if(!this._vocabClassPromises[e.datasourceURI]){this._vocabClassPromises[e.datasourceURI]=new Promise((function(e,r){let n={};n.vocabId=o._datSourceToVocabID[a],n.tenantId=o.platformID,n.lang=o._language,s.loadVocabularyClasses(n,(function(n){if(n.classInfos.length>0){let r=[],i={};for(let e=0;e<n.classInfos.length;e++)t.is(n.classInfos[e].nlsName,"string")&&t.is(n.classInfos[e].uri)&&(r.push(n.classInfos[e].nlsName),i[n.classInfos[e].uri]=n.classInfos[e].nlsName);o.updateTypesMapping(a,i),e(r)}else{let e=o.createWdgAlert(),t=i.get("SearchType.NoTypesWarning");e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:t}),r()}}))}))}return this._vocabClassPromises[e.datasourceURI]},_fetchProperties:function(e){if(!e||!e.uniqueKey)return null;if(!this._vocabPropertiesPromises[e.uniqueKey]){let a=e.uniqueKey;this._vocabPropertiesPromises[e.uniqueKey]=new Promise((function(e,r){let n=a.indexOf("+"),i=a.substring(0,n),l=a.substring(n+1),c=o.getDatasourceInternalName(i),u=o.getTypesInternalName(c,l);if(t.is(u)){let a={};a.className=u,a.tenantId=o.platformID,s.loadRelevantPredicates(a,(function(a){if(a.vocabularyPredicateInfo.length>0){a.vocabularyPredicateInfo.sort((function(e,a){let r=e.nlsName;t.is(r)||(r=e.uri),r=r.toUpperCase();let n=a.nlsName;return t.is(n)||(n=a.uri),n=n.toUpperCase(),r<n?-1:r>n?1:0}));let r=[];for(let e=0;e<a.vocabularyPredicateInfo.length;e++)if(t.is(a.vocabularyPredicateInfo[e].nlsName,"string")&&t.is(a.vocabularyPredicateInfo[e].uri)){if("ds6w:label"===a.vocabularyPredicateInfo[e].uri||"ds6w:identifier"===a.vocabularyPredicateInfo[e].uri||"ds6w:modified"===a.vocabularyPredicateInfo[e].uri||"ds6w:description"===a.vocabularyPredicateInfo[e].uri||"ds6w:responsible"===a.vocabularyPredicateInfo[e].uri||"ds6w:created"===a.vocabularyPredicateInfo[e].uri)continue;r.push(a.vocabularyPredicateInfo[e].nlsName),d._attributesMap[a.vocabularyPredicateInfo[e].uri]=a.vocabularyPredicateInfo[e].nlsName}o.updateAttributesMapping(c,u,d._attributesMap),e(r)}else r()}))}}))}return this._vocabPropertiesPromises[e.uniqueKey]},getTabInputsToStore:function(){d._trackerData&&(Object.values(d._trackerData).forEach((e=>{o.trackerPublisher(e.category,e.action,{pd1:e.pd1,pd2:e.pd2,pd3:e.pd3,pd4:e.pd4})})),d._trackerData=[]);let e={type_display:d.EditConfDisplayTypeON.checkFlag,SEARCH_INSTANCES:d.SearchonInstancesON.checkFlag,filterOnResults:d.filterOnResultsOn.checkFlag},a=[],r={},n=o.getDatasourceInternalName(d.defaultDatasourceComboBox.currentValue);t.is(n)&&(r.source=n,a.push(r)),e.default_datasourceandtype=a;let i=o.getDatasourceInternalName(d.DatasourceComboBox.currentValue),s=[],l=[],c=[];if(t.is(d.availableTypesAutocomp.selectedItems)){let e=d.availableTypesAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=o.getTypesInternalName(i,d.availableTypesAutocomp.selectedItems[a]._options.label),e.source=i,t.is(e.uri)&&t.is(e.source)&&(c.push(e),l.push(i),s.push(e.uri))}}let u=[],g=[],p=[];if(t.is(d.excludedTypesAutocomp.selectedItems)){let e=d.excludedTypesAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=o.getTypesInternalName(i,d.excludedTypesAutocomp.selectedItems[a]._options.label),e.source=i,t.is(e.uri)&&t.is(e.source)&&(p.push(e),u.push(e.uri),g.push(i))}}if(t.is(d._uriNamesOfPreferredTypes)){let t=[],a=[];for(let e=0;e<d._preferredDatasourceNames.length;e++)if(i!==d._preferredDatasourceNames[e]){t.push(d._uriNamesOfPreferredTypes[e]),a.push(d._preferredDatasourceNames[e]);let r={};r.uri=d._uriNamesOfPreferredTypes[e],r.source=d._preferredDatasourceNames[e],c.push(r)}d._uriNamesOfPreferredTypes=t,d._preferredDatasourceNames=a,s.length>1&&(d._uriNamesOfPreferredTypes=d._uriNamesOfPreferredTypes.concat(s),d._preferredDatasourceNames=d._preferredDatasourceNames.concat(l)),e.easyTypeAccess=c}if(t.is(d._uriNamesOfExcludeType)){let t=[],a=[];for(let e=0;e<d._excludeDatasourceNames.length;e++)if(i!==d._excludeDatasourceNames[e]){t.push(d._uriNamesOfExcludeType[e]),a.push(d._excludeDatasourceNames[e]);let r={};r.uri=d._uriNamesOfExcludeType[e],r.source=d._excludeDatasourceNames[e],p.push(r)}d._uriNamesOfExcludeType=t,d._excludeDatasourceNames=a,s.length>1&&(d._uriNamesOfExcludeType=d._uriNamesOfExcludeType.concat(u),d._excludeDatasourceNames=d._excludeDatasourceNames.concat(g)),e.excluded_types=p}let h={},_=[],m=o.getLocalCacheForAttribute();t.is(m,"array")&&m.length>0&&(_=m);let f={},C=o.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),y=o.getTypesInternalName(C,d.availPropTypeComboBox.currentValue),v=[];if(t.is(d.AvailablePropertyAutocomp.selectedItems)){let e=d.AvailablePropertyAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=o.getAttributesInternalName(C,y,d.AvailablePropertyAutocomp.selectedItems[a]._options.label),t.is(e.uri)&&v.push(e)}}v.length>0&&(f.datasource=C,f.type=y,f.preferredAttributeList=v,o.updateLocalCacheForAttribute(f));let b={},S=o.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),T=o.getTypesInternalName(S,d.excludePropTypeComboBox.currentValue),x=[];if(t.is(d.ExcludedPropertyAutocomp.selectedItems)){let e=d.ExcludedPropertyAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=o.getAttributesInternalName(S,T,d.ExcludedPropertyAutocomp.selectedItems[a]._options.label),t.is(e.uri)&&x.push(e)}}x.length>0&&(b.datasource=S,b.type=T,b.excludeAttributeList=x,o.updateLocalCacheForAttribute(b)),h["ds6w:type"]=o.getLocalCacheForAttribute();let w={};return w.SearchControl_SearchTypes=e,w.SearchControl_SearchAttributes=h,w},onResetTab:function(e){let a,r,n;if(a=t.is(e,"string")?JSON.parse(e):e,a.hasOwnProperty("type_custo")&&(r=a.type_custo),a.hasOwnProperty("attribute_custo")&&(n=a.attribute_custo),t.is(r)){if(r.hasOwnProperty("type_display")){let e=r.type_display;t.is(e)&&(d.EditConfDisplayTypeON.checkFlag=e)}if(r.hasOwnProperty("SEARCH_INSTANCES")){let e=r.SEARCH_INSTANCES;t.is(e)&&(d.SearchonInstancesON.checkFlag=e)}else d.SearchonInstancesON.checkFlag=!1;if(r.hasOwnProperty("filterOnResults")){let e=r.filterOnResults;t.is(e)&&(d.filterOnResultsOn.checkFlag=e)}else d.filterOnResultsOn.checkFlag=!1;if(r.hasOwnProperty("default_datasourceandtype")){let e=r.default_datasourceandtype;if(t.is(e)&&e.length>0){let t=e[e.length-1],a=o.getDatasourceDisplayName(t.source);d.defaultDatasourceComboBox.elementsList.length>0?d.defaultDatasourceComboBox.currentValue=a:d._defaultDatasource=a}else d.defaultDatasourceComboBox.selectedIndex=-1}else d.defaultDatasourceComboBox.selectedIndex=-1;let e=[],a=[],n=[],i=[];if(r.hasOwnProperty("easyTypeAccess")){let n=r.easyTypeAccess;if(t.is(n,"array"))for(let r=0;r<n.length;r++){let i=n[r].uri,o=n[r].source;t.is(o)&&a.push(o),t.is(i)&&e.push(i)}}if(d._uriNamesOfPreferredTypes=e,d._preferredDatasourceNames=a,r.hasOwnProperty("excluded_types")){let e=r.excluded_types;if(t.is(e,"array"))for(let a=0;a<e.length;a++){let r=e[a].uri,o=e[a].source;t.is(o)&&n.push(o),t.is(r)&&i.push(r)}}d._uriNamesOfExcludeType=i,d._excludeDatasourceNames=n;let s=null;a.length>0?s=a[0]:n.length>0&&(s=n[0]),t.is(s)&&(d.DatasourceComboBox.selectedIndex=-1,o.loadDataSourcesandClasses().then((function(e){if(t.is(e)){let e=o.getDatasourceDisplayName(s);d.DatasourceComboBox.currentValue=e}})))}if(t.is(n)&&(o.clearLocalCacheForAttribute(),n.hasOwnProperty("ds6w:type"))){let e=n["ds6w:type"];if(t.is(e,"array")&&e.length>0){let a=t.clone(e,!0);o.setLocalCacheForAttribute(a);let r=e.length,n=e[r-1],i=n.source;"AllDataSourcesandTypes"===i&&r>1&&(n=e[r-2]);let s=n.uri;if(t.is(s)){n.predicates,n.excluded_predicates;o.loadDataSourcesandClasses().then((function(e){if(t.is(e)){let e=o.getDatasourceDisplayName(i);d.availPropDatasourceComboBox.currentValue=e,d.excludePropDatasourceComboBox.currentValue=e,d._loadClasses({datasourceURI:i}).then((function(e){d.availPropTypeComboBox.elementsList=e,d.excludePropTypeComboBox.elementsList=e,d.availPropTypeComboBox.selectedIndex=-1,d.excludePropTypeComboBox.selectedIndex=-1;let t=o.getTypesDisplayName(i,s);d.availPropTypeComboBox.currentValue=t,d.excludePropTypeComboBox.currentValue=t}))}}))}else d.availPropDatasourceComboBox.selectedIndex=-1,d.excludePropDatasourceComboBox.selectedIndex=-1,d.availPropTypeComboBox.selectedIndex=-1,d.excludePropTypeComboBox.selectedIndex=-1,d.AvailablePropertyAutocomp.value=[],d.ExcludedPropertyAutocomp.value=[]}}o.removeMask(widget.body)},upsertTrackerEntryADT:function(e){Array.isArray(d._trackerData)||(d._trackerData=[]);const t=d._trackerData.findIndex((t=>t.pd1===e.pd1));-1!==t?d._trackerData[t]=e:d._trackerData.push(e)}};return d})),define("DS/SearchControlCenter/scripts/SearchcontrolColumnCusto",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/MessageBus/MessageBus","DS/SNInfraUX/Logger","css!DS/SearchControlCenter/SearchControlCenter","DS/SNInfraUX/SearchControlCenterFetchService","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNResultUX/utils/ExternalComponentHelpers"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g){"use strict";var p={importButton:null,fileChooser:null,jsonReader:null,_uploadeJsonFileName:null,displayCustoImportButton:null,displayCustoFileChooser:null,displayCustoJsonReader:null,_displayCustoUploadeJsonFileName:null,_columnCustoMemoryObject:null,_displayNameMemoryObject:null,_showColumnCusto:!1,_showDisplayNameCusto:!1,onRenderFacet:function(t){var a=null;UWA.is(window)&&UWA.is(window.location)&&UWA.is(window.location.search,"string")&&(a=window.location.search.substring(1)),UWA.is(a,"string")&&a.length>0&&a.indexOf("AdminColumnsSearch")>=0&&(this._showColumnCusto=!0),UWA.is(a,"string")&&a.length>0&&a.indexOf("SearchDisplayName")>=0&&(this._showDisplayNameCusto=!0);var r=e.create("div",{class:"search_center_columncusto_main_div",id:"search-type-tab-view-mode"}).inject(t);if(!0===this._showColumnCusto){var o=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r),l=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex",id:"search-type-display-text"}).inject(o);e.create("p",{class:"search_center_right_text",text:d.get("SearchColumnCusto.ImportColumnCusto")}).inject(l);var c=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r);e.create("div",{class:"search_center_div_left_columncusto_chooser search_center_general_display_flex",id:"search-type-display-text"}).inject(c);var u=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"90%",position:"relative"}}).inject(c),g=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{width:"50%",position:"center","margin-left":"5px"}}).inject(c);p.fileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:"Upload Search Column Customization",buttonText:"Browse",events:{onChange:this._onFileInputChange.bind(this)}}).inject(u);var h=this;p.importButton=new i({id:"import_button_id",value:d.get("importButton.title"),className:"default",disabled:!0,events:{onClick:function(){h._OnImportClick(),s.log("inside _OnImportClick() ")}}}).inject(g);var _=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-column-custo-display"}).inject(r),m=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex"}).inject(_);e.create("p",{class:"search_center_right_text",id:"search-column-custo-display-text"}).inject(m)}if(!0===this._showDisplayNameCusto){var f=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r),C=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex",id:"search-type-display-text"}).inject(f);e.create("p",{class:"search_center_right_text",text:d.get("SearchColumnCusto.ImportDisplayNameCusto")}).inject(C);var y=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r);e.create("div",{class:"search_center_div_left_columncusto_chooser search_center_general_display_flex",id:"search-type-display-text"}).inject(y);var v=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"90%",position:"relative"}}).inject(y),b=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{width:"50%",position:"center","margin-left":"5px"}}).inject(y);p.displayCustoFileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:d.get("SearchColumnCusto.UploadDisplayNameCusto"),buttonText:"Browse",events:{onChange:this._onDisplayNameFileInputChange.bind(this)}}).inject(v);h=this;p.displayCustoImportButton=new i({id:"import_button_id",value:d.get("importButton.title"),className:"default",disabled:!0,events:{onClick:function(){h._OnDisplayNameImportClick(),s.log("inside _OnDisplayNameImportClick() ")}}}).inject(b);var S=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-column-custo-display"}).inject(r),T=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex"}).inject(S);e.create("p",{class:"search_center_right_text",id:"search-displayname-custo-display-text"}).inject(T)}this.unmasking()},unmasking(){g.unmask(widget.body)},_onFileInputChange:function(e){var a=e.target.files[0].name;(this._uploadeJsonFileName=a,t.is(a,"string"))&&("json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(p.jsonReader=new FileReader,p.jsonReader.readAsText(e.target.files[0]),p.importButton.enable()):(p.importButton.disable(),p.fileChooser.clear(),alert(d.get("wrongJsonFileTypeSelectionWarning"))))},_OnImportClick:function(){document.getElementById("search-column-custo-display-text").innerHTML="The column custo file to upload: "+this._uploadeJsonFileName,p.importButton.disable(),u.enableButtons()},_onDisplayNameFileInputChange:function(e){var a=e.target.files[0].name;(this._displayCustoUploadeJsonFileName=a,t.is(a,"string"))&&("json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(p.displayCustoJsonReader=new FileReader,p.displayCustoJsonReader.readAsText(e.target.files[0]),p.displayCustoImportButton.enable()):(p.displayCustoImportButton.disable(),p.fileChooser.clear(),alert(d.get("wrongJsonFileTypeSelectionWarning"))))},_OnDisplayNameImportClick:function(){document.getElementById("search-displayname-custo-display-text").innerHTML="The display name custo file to upload: "+this._displayCustoUploadeJsonFileName,p.displayCustoImportButton.disable(),u.enableButtons()},getTabInputsToStore:function(){t.is(this._uploadeJsonFileName)&&(document.getElementById("search-column-custo-display-text").innerHTML="The column custo file applied: "+this._uploadeJsonFileName,p.importButton.disable()),t.is(this._displayCustoUploadeJsonFileName)&&(document.getElementById("search-displayname-custo-display-text").innerHTML="The display name custo file applied: "+this._displayCustoUploadeJsonFileName,p.displayCustoImportButton.disable()),u.enableRestoreButton();var e={},a={};if(t.is(this._uploadeJsonFileName)?(t.is(p.jsonReader.result)&&t.is(p.jsonReader.result)&&((e=JSON.parse(p.jsonReader.result)).uploadedColumnCustoFileName=this._uploadeJsonFileName),a.searchColumnCustoInputs=e):a.searchColumnCustoInputs=this._columnCustoMemoryObject,t.is(this._displayCustoUploadeJsonFileName)){var r={};t.is(p.displayCustoJsonReader.result)&&t.is(p.displayCustoJsonReader.result)&&((r=JSON.parse(p.displayCustoJsonReader.result)).uploadedDisplayCustoFileName=this._displayCustoUploadeJsonFileName),a.searchDisplayCustoInputs=r}else a.searchDisplayCustoInputs=this._displayNameMemoryObject;return a},onResetTab:function(e){c.getSearchSettings({tenantID:u.platformID}).then((function(e){var a;let r="",n="";if((a=t.is(e,"string")?JSON.parse(e):e).hasOwnProperty("column_custo")){var i=a.column_custo;t.is(i)&&i.hasOwnProperty("searchColumnCustoInputs")&&(p._columnCustoMemoryObject=i.searchColumnCustoInputs,t.is(p._columnCustoMemoryObject)&&t.is(p._columnCustoMemoryObject.uploadedColumnCustoFileName,"string")&&(r=p._columnCustoMemoryObject.uploadedColumnCustoFileName)),t.is(i)&&i.hasOwnProperty("searchDisplayCustoInputs")&&(p._displayNameMemoryObject=i.searchDisplayCustoInputs,t.is(p._displayNameMemoryObject)&&t.is(p._displayNameMemoryObject.uploadedDisplayCustoFileName,"string")&&(n=p._displayNameMemoryObject.uploadedDisplayCustoFileName))}!0===p._showColumnCusto&&(document.getElementById("search-column-custo-display-text").innerHTML=r.trim().length>0?"Current applied custo file: "+r:"There is no custom file applied yet."),!0===p._showDisplayNameCusto&&(document.getElementById("search-displayname-custo-display-text").innerHTML=n.trim().length>0?"Current applied display custo file: "+n:"There is no custom file applied yet.")}),(function(){})),this._uploadeJsonFileName=null,!0===p._showColumnCusto&&(p.fileChooser.clear(),p.importButton.disable())}};return p})),define("DS/SearchControlCenter/scripts/SearchcontrolExportImport",["UWA/Element","UWA/Core","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/SNInfraUX/Logger","DS/SNInfraUX/SNVocabAccess","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNResultUX/utils/SearchServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SNInfraUX/SearchControlCenterFetchService"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p){"use strict";let h={_importButton:null,_exportButton:null,_fileChooser:null,_jsonReader:null,_postURL:null,_uploadeJsonFileName:null,onRenderFacet:function(t){u.trackerPublisher("SearchControlCenter","ClickOnTab",{pd1:"ImportExportTab"});let i=e.create("div",{class:"scc_main_div",id:"scc_main_div"}).inject(t),o=e.create("div",{id:"search_center_main_div"}).inject(i),s=e.create("div",{class:"search_center_add_bottom_border search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(o);e.create("p",{class:"search_center_text_heading",text:d.get("ImportExport.Import_Search_Configuration")}).inject(s);let l=e.create("div",{class:"search_center_top_margin",id:"div_Import_UI_Display_Span"}).inject(o),c=e.create("div",{class:" ",id:"Configuration_file_text"}).inject(l);e.create("p",{text:d.get("ImportExport.Import_Configuration_File")}).inject(c);let g=e.create("div",{class:"search_center_general_display_flex ",id:"search-type-display-text"}).inject(l),p=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"75%",position:"relative"}}).inject(g),_=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{"margin-left":"5px"}}).inject(g);h._fileChooser=new a({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:d.get("ImportExport.Import_Button.SelectAFile"),buttonText:d.get("ImportExport.Import_Button.browse"),events:{onChange:this._onFileInputChange.bind(this)}}).inject(p);let m=this;h._importButton=new r({id:"import_button_id",value:d.get("ImportExport.Import_Button.title"),className:"default",disabled:!0,icon:"fonticon fonticon-upload",events:{onClick:function(){m._OnImportClick(),n.log("inside _OnImportClick() "),u.trackerPublisher("SearchControlCenter-IET","ClickOnImportButton",{pd1:"ImportButton"})}}}).inject(_);let f=e.create("div",{id:"search-column-custo-display"}).inject(l),C=e.create("div",{}).inject(f);e.create("p",{text:d.get("ImportExport.Import_Valid_with_Json"),id:"search-column-custo-display-text",class:"info_Details"}).inject(C);let y=e.create("div",{class:"main_Div_Padding",id:"search_center_main_div"}).inject(i),v=e.create("div",{class:"search_center_add_bottom_border search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(y);e.create("p",{class:"search_center_text_heading",text:d.get("ImportExport.Export_Search_Configuration")}).inject(v);let b=e.create("div",{class:"search_center_margin",id:"search-type-display"}).inject(y),S=e.create("div",{class:"search_center_import_export_border search_center_margin ",id:"search-type-display-text"}).inject(b);e.create("p",{class:"search_center_export_msgbox_margin",text:d.get("ImportExport.Export_Details_Text"),styles:{position:"center","font-size":"12px"}}).inject(S);let T=e.create("div",{class:"search_center_general_tab_div  ",id:"search-type-display-text"}).inject(b);h._exportButton=new r({id:"Export_button_id",value:d.get("ImportExport.Export_Button.title"),className:"default",icon:"fonticon fonticon-export",events:{onClick:function(){m._OnExportClick(),n.log("inside _OnExportClick() "),u.trackerPublisher("SearchControlCenter-IET","ClickOnButton",{pd1:"Export"})}}}).inject(T),u.removeMask(widget.body)},_onFileInputChange:function(e){let a=e.target.files[0].name;if(this._uploadeJsonFileName=a,t.is(a,"string")){"json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(h._jsonReader=new FileReader,h._jsonReader.readAsText(e.target.files[0]),h._importButton.enable()):(h._importButton.disable(),h._fileChooser.clear(),alert(d.get("wrongJsonFileTypeSelectionWarning")))}u.removeMask(widget.body)},_OnImportClick:function(){if(t.is(this._uploadeJsonFileName)&&t.is(h._jsonReader.result)){let e,a=u.decryptData("SCCConfiguration",h._jsonReader.result);try{e=JSON.parse(a)}catch(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("ImportExport.jsonmodified");t.add({className:"error applyChangesAlert",message:a})}t.is(e)&&this._validateImportedFile(e)}h._importButton.disable()},_OnExportClick:function(){let e=u.getSettingsFromDB(),t=JSON.stringify(e),a=u.encryptData("SCCConfiguration",t);this.downloadFile(a,"","application/json")},downloadFile:function(e,a,r){if(!t.is(e))return;if(!t.is(r))return;let n,i=document,o=i.createElement("a"),s=r;if(r=r||"application/octet-stream",r+=";charset=UTF-8,",!a){let e=new Date;a="SCC Export - "+e.getFullYear()+(e.getMonth()+1)+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()+".json"}let c,d="\ufeff";if(navigator.msSaveBlob&&!l.odtMode)return navigator.msSaveBlob(new Blob([d+e],{type:r}),a);"download"in o?(c=new Blob([d+e],{type:r}),n=URL.createObjectURL(c),o.setAttribute("download",a)):(UWAClient.Engine.safari&&UWAClient.Platform.ios?(c=new Blob([d+e],{type:s}),n=(window.URL?URL:window.webkitURL).createObjectURL(c)):n="data:"+r+d+encodeURIComponent(e),o.setAttribute("target","_blank"),o.setAttribute("download",a)),o.href=n,o.setAttribute("style","display:none;"),i.body.appendChild(o),setTimeout((function(){if(o.click)o.click();else if(document.createEvent){let e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),o.dispatchEvent(e)}i.body.removeChild(o)}),100)},_validateImportedFile:function(e){let a=this,r=e;t.is(r)&&u.loadDataSourcesandClasses().then((function(n){u.getAvailableSources();let i=[],o=[],s=!1;if(t.is(n,"array")&&n.forEach((function(e){i.push(e.classInfos)})),t.is(r)){let n={facetID:"SearchControl_General"};n.settingsJSON=r;u.getSettingsJSONFromTabName(n);n.facetID="SearchControl_6WTags";u.getSettingsJSONFromTabName(n);n.facetID="SearchControl_SearchTypes";let l=u.getSettingsJSONFromTabName(n);if(l.hasOwnProperty("type_custo")){let e=l.type_custo;if(!0===e.type_display){if(t.is(e.default_datasourceandtype)&&e.default_datasourceandtype.length>0){let a=e.default_datasourceandtype[0].source;if(t.is(a)){let e=u.getVocabID(a);t.is(e)||o.push(a)}}if(e.hasOwnProperty("easyTypeAccess")){e.easyTypeAccess.forEach((function(e){let t=e.uri,a=e.source;for(let e=0;e<i.size;e++)if(u.getVocabID(a)===i[e][0].service){i[e].findIndex((function(e){if(e.uri===t&&u.getVocabID(a)===e.service)return!0}))<0&&o.push(t);break}}))}if(e.hasOwnProperty("excluded_types")){e.excluded_types.forEach((function(e){let t=e.uri,a=e.source;for(let e=0;e<i.size;e++)if(u.getVocabID(a)===i[e][0].service){i[e].findIndex((function(e){if(e.uri===t&&u.getVocabID(a)===e.service)return!0}))<0&&o.push(t);break}}))}}}if(l.hasOwnProperty("attribute_custo")){let r=l.attribute_custo;if(r.hasOwnProperty("ds6w:type")){let n=r["ds6w:type"];if(t.is(n,"array")&&n.length>1){let r=n.length,l=[];for(let e=1;e<r;e++){let a=n[e];if(t.is(a)){let e=a.uri,t=a.source;for(let r=0;r<i.size;r++)if(u.getVocabID(t)===i[r][0].service){i[0].findIndex((function(r){if(r.uri===e&&u.getVocabID(t)===r.service)return l.push(a),!0}))<0&&o.push(e);break}}}l.length&&(s=!0,Promise.all(a._loadPredicatesOfTypes(l)).then((function(t){let r=l,n=t.length;for(let e=0;e<n;e++)r[e].uri===t[e].type&&r[e].predicates.forEach((function(a){let r=a.uri;t[e].vocabularyPredicateInfo.findIndex((function(e){if(e.uri===r)return!0}))<0&&o.push(r)}));a._manageImport(o,e)})))}}}!1===s&&a._manageImport(o,e)}}))},_loadPredicatesOfTypes:function(e){let t=[],a=u.getPlatformID();return e.forEach((e=>{e.uri&&t.push(new Promise(((t,r)=>{i.loadRelevantPredicates({className:e.uri,tenantId:a},t)})))})),t},_manageImport:function(e,a){let r=this;if(t.is(e,"array")&&e.length>0){let t="";t+="<br>"+d.get("ImportExport.Import_Failed_Message")+"<br><br>",e.forEach((function(e){t+="&nbsp;&nbsp;&nbsp;&nbsp;"+e+"<br>"})),g.modal({title:d.get("ImportExport.Import_Error"),content:t,visibleFlag:!0,CB:[{buttonKind:"YES",label:d.get("ImportExport.yesButton"),function:()=>{g.destroyModal()}}]})}else r._importIntoDB(a)},_importIntoDB:function(e){s.getServiceUrl({serviceName:"3DSpace",platformId:u.platformID,onComplete:function(t){if(UWA.is(t,"string")){h._postURL=t+"/resources/SNAPI/infra_services/searchsettings?tenant="+u.platformID;let a=e,r={timeout:5e4,method:"POST",data:JSON.stringify(a),type:"json",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(){u.updateMemoryModel(e),p._searchControlCenterSettingsJSONFromDB=a;let t=u.createWdgAlert();t.inject(widget.body,"top");let r=d.replace(d.get("ImportExport.successmsg"),{tenant_name:u.platformDisplayName});t.add({className:"success applyChangesAlert",message:r})},onFailure:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("ImportExport.failuremsg");a+=e,t.add({className:"error applyChangesAlert",message:a})},onTimeout:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("SearchInfra.timeoutmsg");a+=e,t.add({className:"error applyChangesAlert",message:a})}};o.authenticatedRequest(h._postURL,r)}},onFailure:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})},getTabInputsToStore:function(){},onResetTab:function(e){}};return h})),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils",["UWA/Core","UWA/Class","UWA/Promise","UWA/Class/Collection","DS/WAFData/WAFData","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNInfraUX/TaggerConfigAccess","DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept","DS/SearchControlCenter/scripts/SearchControlCenterServices"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p){"use strict";return t.singleton({init:function(){let t=s.getOption("rootWConcepts"),i=s.getOption("concepts_rootW_Mapping"),o=new r([],{model:g}),c=new r([],{model:g}),u=new Map,h=new Map,_=[],m=[],f=[],C=[],y=[],v=[],b=[],S=[],T=[],x={},w=[],D={};this.hasConcepts=function(){return o.length>0},this.getConcept=function(e){return o.get(e)},this.getCurrentConceptCollection=function(){return o},this.getOldConceptCollection=function(){return c},this.getConceptsInfo=function(){return x},this.getRenamedConcepts=function(){if(_.length>0)return _},this.getMovedConcepts=function(){if(m.length>0)return m},this.getDuplicateConcepts=function(){if(f.length>0)return f},this.getNewConcepts=function(){if(C.length>0)return C},this.getDeletedConcepts=function(){if(y.length>0)return y},this.getUnDeprecatedConcepts=function(){if(S.length>0)return S},this.getDeprecatedConcepts=function(){T=[],S=[];let e=b.length,t=v.length;if(e>0?b.forEach((function(e){v.forEach((function(t){e.getLabel()!=t.getLabel()&&T.push(t)}))})):T=v,e>t&&b.forEach((function(e){t>0?v.forEach((function(t){e.includes(t)||S.push(e)})):S=b})),T.length>0)return T},this.isConceptAvailable=function(e){if("string"==typeof e&&e)return h.has(e.toLowerCase())};let A=function(e){let t=new g({id:e.shortURI,uri:e.uri,label:e.label}),a=e.types;return Array.isArray(a)||(a=[]),t.set("types",a),-1!==a.indexOf("ds6wclassifier:Tag")&&t.setAsTaggable(),-1!==a.indexOf("owl:DeprecatedClass")&&t.setAsDeprecated(),u.set(e.label,!0),h.set(e.label.toLowerCase(),!0),t};this.SetDeprecatedConcepts=function(){b=v,v=[],o.forEach((function(e){!0===e.isDeprecated()&&v.push(e)}))},this._parseConceptsInfo=function(e,a,n){try{a=UWA.is(a,"string")?JSON.parse(a):a,x=a,c=o,o=function(e){let a=new r([],{model:g});return e.forEach((function(e){let r=a.get(e.shortURI);if(r)throw new Error(e.shortURI+" is already available from "+r.get("uri"));if(r=A(e),a.add(r),UWA.is(e.broader,"array")){let n=e.broader[0].shortURI;1==e.broader.length&&"ds6wclassifier:Root"===n?(r.setAsRootWConcept(),r.set("rootW",i[r.id.toLowerCase()])):e.broader.forEach((function(e){n=e.shortURI;let i=a.get(n);i||(i=A(e),a.add(i)),i.addNarrowerConcept(r),i.canBeTagged()&&r.setAsTaggable(),-1!=t.indexOf(i.id.toLowerCase())&&r.setAsRootConcept()}))}})),a}(a),n(a)}catch(e){console.log("FAILED to parse /3drdfpersist/resources/v1/ontologies/ response"),n([])}};let I=!0;this.CompareDataSets=function(t,a){if(_=[],C=[],y=[],m=[],f=[],0===t.length)return console.log("No previous Dataset To compare"),!0;if(t.length===a.length)t.forEach((function(t){a.forEach((function(a){if(t.get("label")!=a.get("label")&&t.get("uri")===a.get("uri")){let e={original_concept:t,renamed_concept:a};_.push(e)}if(t.getBroaderConcept().length>0&&t.get("uri")===a.get("uri")){if(!e.is(a.getBroaderConcept())&&a.getBroaderConcept().length>0)console.log("Father movement");else if(e.is(t.getBroaderConcept())&&t.getBroaderConcept().length>0&&t.getBroaderConcept().at(0).getURI()!=a.getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t,previous_father:t.getBroaderConcept().at(0),current_father:a.getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}}else if(e.is(t)&&t.get("label")===a.get("label")&&t.getURI()!=a.getURI()&&e.is(t.getBroaderConcept())&&a.getBroaderConcept().length>0&&e.is(t.getBroaderConcept())&&a.getBroaderConcept().length>0&&t.getBroaderConcept().at(0).getLabel()===a.getBroaderConcept().at(0).getLabel()){let e={org_concept:t,duplicate:a};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}}))}));else if(a.length>t.length)for(let r=0;r<a._models.length;r++){let n=!1;for(let i=0;i<t._models.length;i++){if(t._models[i].get("label")!=a._models[r].get("label")&&t._models[i].get("uri")===a._models[r].get("uri")){let e={original_concept:t._models[i],renamed_concept:a._models[r]};_.push(e)}if(e.is(t._models[i])&&t._models[i].get("label")===a._models[r].get("label")&&t._models[i].getURI()!=a._models[r].getURI()&&e.is(t._models[i].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&e.is(a._models[r].getBroaderConcept())&&a._models[r].getBroaderConcept().length>0&&t._models[i].getBroaderConcept().at(0).getLabel()===a._models[r].getBroaderConcept().at(0).getLabel()){let e={org_concept:t._models[i],duplicate:a._models[r]};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}if(t._models[i].get("uri")===a._models[r].get("uri")){if(n=!0,e.is(t._models[i])&&t._models[i].get("uri")===a._models[r].get("uri"))if(!e.is(a._models[r].getBroaderConcept())&&a._models[r].getBroaderConcept().length>0)console.log("Father Removed");else if(e.is(t._models[i].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&t._models[i].getBroaderConcept().at(0).getURI()!=a._models[r].getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t._models[i],previous_father:t._models[i].getBroaderConcept().at(0),current_father:a._models[r].getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}break}}n||C.push(a._models[r])}else if(a.length<t.length)for(let r=0;r<t._models.length;r++){let n=!1;for(let i=0;i<a._models.length;i++){if(t._models[r].get("label")!=a._models[i].get("label")&&t._models[r].get("uri")===a._models[i].get("uri")){let e={original_concept:t._models[r],renamed_concept:a._models[i]};_.push(e)}if(e.is(t._models[r])&&t._models[r].get("label")===a._models[i].get("label")&&t._models[r].getURI()!=a._models[i].getURI()&&e.is(t._models[r].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&e.is(a._models[i].getBroaderConcept())&&a._models[i].getBroaderConcept().length>0&&t._models[r].getBroaderConcept().at(0).getLabel()===a._models[i].getBroaderConcept().at(0).getLabel()){let e={org_concept:t._models[r],duplicate:a._models[i]};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}if(t._models[r].get("uri")===a._models[i].get("uri")){if(n=!0,t._models[r].getBroaderConcept().length>0&&t._models[r].get("uri")===a._models[i].get("uri"))if(e.is(a._models[i].getBroaderConcept())){if(e.is(t._models[r].getBroaderConcept())&&t._models[r].getBroaderConcept().length>0&&t._models[r].getBroaderConcept().at(0).getURI()!=a._models[i].getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t._models[r],previous_father:t._models[r].getBroaderConcept().at(0),current_father:a._models[i].getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}}else console.log("Father movement");break}}n||(y.push(t._models[r]),I=!1)}return I};this.getOntologyConceptsFromSessionId=function(t){let r=this;return console.log("Creating a new promise to retrive concepts for applicativeId="+t[0].applicativeId+", and datasetTitle="+t[0].datasetTitle),new a((function(a){(function(t){let a=t;return D[a]||(D[a]=new Promise((function(a,r){let n=e.is(p.platformID)?p.platformID:l.getActiveTenant();d.getServiceUrl({serviceName:t,platformId:n,onComplete:function(e){e?a(e):r()},onFailure:function(e){r(e)}})}))),D[a]})("ontology").then((function(e){if(e.length>0){var i={method:"GET",headers:{Accept:"application/json"},url:e+"/3drdfklet/resources/v2/ontologies/concepts?recurse=all&applicativeId="+t[0].applicativeId,onComplete:function(e){r._parseConceptsInfo(t[0].applicativeId,e,a),r.SetDeprecatedConcepts(),r.CompareDataSets(c,o),a()},onFailure:function(){console.log(`FAILED to retrieve concents in applicativeId=${t[0].applicativeId}`),a([])}};n.authenticatedRequest(i.url,i)}else console.log("_getSericeURL did not provide data in expected format"),a([])}),(function(){console.log("_getSericeURL FAILED"),a([])}))}))},this.getTagsForWPromise=function(t,r){return new a((function(a,i){let o={method:"GET",type:"text",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(r){w=[];let n=JSON.parse(r);e.is(n)&&UWA.is(n.data,"array")&&n.data.forEach((function(e){UWA.is(n.data[0].tag,"array")&&e.tag.forEach((function(e){let t={predicate:e.predicate,literal:e.object.literal};w.push(t)}))})),console.log("Fetched Company tags for : "+t),a({tags:w,fetchStatus:"success"})},onFailure:function(e){console.log("FAILED to retrieve company tags for:  "+t),i({tags:e,fetchStatus:"failure"})},onTimeout:function(){console.log("TIMEOUT during get comopany tags for: "+t),i("TIMEOUT during get comopany tags")}},s=e.is(p.platformID)?p.platformID:l.getActiveTenant(),c={predicate:t,literalValue:"*",tenant:s};n.authenticatedRequest(r+"/resources/6w/tags?"+e.Utils.toQueryString(c),o)}))}}}).init()})),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCPQManager",["UWA/Core","UWA/Class","UWA/Promise","UWA/Class/Collection","DS/WAFData/WAFData","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNInfraUX/TaggerConfigAccess","DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept","DS/SearchControlCenter/scripts/SearchControlCenterServices"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p){"use strict";return t.singleton({init:function(){let t=null,r={},i=null,o=null,s=null,c=null,u=null,g=null,h={},_=null,m={},f=function(t,a){for(var r in a)a.hasOwnProperty(r)&&(e.is(t[r],"array")?t[r]=t[r].concat(a[r]):e.is(t[r],"object")&&e.is(a[r],"object")?f(t[r],a[r]):t[r]||(t[r]=a[r]))};this.fetchPQs=function(){let C=e.is(p.platformID)?p.platformID:l.getActiveTenant();return m[C]||(m[C]=a.deferred(),function(t){let a=t;return r[a]||(r[a]=new Promise((function(a,r){let n=e.is(p.platformID)?p.platformID:l.getActiveTenant();d.getServiceUrl({serviceName:t,platformId:n,onComplete:function(e){e?a(e):r()},onFailure:function(e){r(e)}})}))),r[a]}("3DSpace").then((function(a){t=a,console.log("Space url = "+t);let r={method:"GET",type:"text",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(t){let a=JSON.parse(t);if(i=a.pqlist,o=a.nls,u=[],g=[],_=[],e.is(a.custom)){s=a.custom;for(var r=0,n=s.PQ.length;r<n;r++){s.PQ[r].custom=!0}}e.is(a.customnls)&&(c=a.customnls),e.is(i)&&i.PQ.forEach((function(e){u.push({id:e.pqid,value:e.value,abbreviations:e.abbreviations,title:o[e.pqid+".Title"]}),g.push({id:e.pqid,value:e.value,abbreviations:e.abbreviations,title:o[e.pqid+".Title"]})})),e.is(s)&&s.PQ.forEach((function(e){_.push({id:e.pqid,value:e.value,abbreviations:e.abbreviations,title:c[e.pqid+".Title"]})})),f(i,s),u.sort((function(e,t){return e.title<t.title?-1:e.title>t.title?1:0})),_.sort((function(e,t){return e.title<t.title?-1:e.title>t.title?1:0})),function(t){var a=void 0;if(e.is(t))for(var r=0;r<t.length;r++){var n=t[r].abbreviations;if(e.is(n))for(var i=n.split(","),o=0;o<i.length;o++){var s=i[o],l=s.toLowerCase();e.is(t[r].sort_order)&&1===(a=t[r].sort_order).length&&(a=a[0]);var c={pqPrefix:s,value:t[r].value,pqName:i[i.length-1],pqid:t[r].pqid,appData:t[r].appData,sort_order:a};h[l]=c}}}(u),m[C].resolve(a)},onFailure:function(e){console.log("FAILED to retrieve pqs"),m[C].reject(e)},onTimeout:function(){console.log("FAILED to retrieve pqs"),m[C].reject("TIMEOUT during pq retrival")}},d=l.getLanguage(),p={tenant:C,lang:d};n.authenticatedRequest(t+"/resources/SNAPI/pq_services/pqs?lang="+e.Utils.toQueryString(p),r)}),(function(){console.log("_getServiceURL for 3DSpace FAILED"),reject("_getServiceURL for 3DSpace FAILED")}))),m[C].promise},this.getStdPQs=function(){return u},this.getAllPQs=function(){return i.nbPQ=i.PQ.length,i},this.getAllCustomPQs=function(){return _},this.isAPQAbbrevation=function(e){var t=e.toString().toLowerCase();return"type"!==t&&t in h}}}).init()})),define("DS/SearchControlCenter/scripts/SearchcontrolPQ",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/UIKIT/Popover","DS/Controls/ComboBox","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/SNInfraUX/Logger","DS/SNInfraUX/SNVocabAccess","DS/SNInfraUX/SearchControlCenterFetchService","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNResultUX/utils/SearchServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNResultUX/utils/ExternalComponentHelpers","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/DataGridView/DataGridView","DS/Windows/ImmersiveFrame","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCPQManager","DS/UIKIT/Mask","DS/Controls/LineEditor","DS/MessageBus/MessageBus"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_,m,f,C,y,v,b,S,T,x,w,D){"use strict";let A={_pq:null,_pqnls:null,_CustomPQs:null,_CustomNls:null,_allPQ:null,_stdPQ:null,_selectedPQs:[],_selectedCustomPQs:[],_savedSelectedPQs:[],_savedSelectedCustomPQs:[],_trackerData:[],prefixInput:"",onRenderFacet:function(i){_.trackerPublisher("SearchControlCenter","ClickOnTab",{pd1:"PQTab"});let o=e.create("div",{class:"Main_PQ_div",id:"search-center-pq-main-div"}).inject(i),s=e.create("div",{class:"scc_tagsDisplay_div",id:"search-center-pq-toggle"}).inject(o),l=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"select_pq_span"}).inject(s),c=e.create("div",{class:"search_center_div_toggle search_center_general_display_flex",id:"Select_availabale_PQ"}).inject(l);A.SelectAvailPqON=new a({type:"switch",label:h.get("SearchcontrolPQ.EditPQtoggle.label"),touchMode:!0,value:1}).inject(c);let d=e.create("span",{class:"fonticon fonticon-info search_center_general_display_flex",styles:{"margin-left":"5px","margin-top":"6px"}}).inject(c);new r({target:d,className:".inverted",trigger:"hover",animate:"true",position:"right",body:h.get("SearchcontrolPQ.EditPQtoggle.popover"),title:""});let u=e.create("div",{class:" search_center_general_display_flex",id:"Search_availabale_PQ",styles:{position:"relative"}}).inject(l),g=e.create("div",{class:" search_center_general_display_flex",id:"divSearchEditor",styles:{}}).inject(u);A.searchInput=new w({placeholder:h.get("Search"),value:""}).inject(g);document.getElementById("divSearchEditor");A.searchInput.addEventListener("keydown",(function(e){"Enter"===e.key&&(console.log("Enter Press"),m.click())})),A.searchInput.addEventListener("uncommittedChange",(function(e){0===A.searchInput.valueToCommit.length&&(A.searchPQComboBox.selectedIndex=1,A.searchPQComboBox.currentValue=h.get("Show_all"))}));let p=e.create("div",{class:" ",id:"search_lense_div",styles:{position:"relative","margin-left":"-22px","margin-top":"3px"}}).inject(u),m=e.create("div",{class:"fonticon fonticon-search",id:"search_lense",styles:{"z-index":"10",position:"relative"}}).inject(p);m.addEventListener("click",(function(){console.log("Lense clicked");let e=[],a=A.searchInput.value.toLowerCase();A.upsertTrackerEntrypq({category:"SearchControlCenter-PQ",action:"selectValue",pd1:"searchedinPQ",pd2:a});T.isAPQAbbrevation(a);let r=A.dataGridView.getTreeDocument();r.search({match:function(r){if(t.is(r.nodeModel.getAttributeValue("PQ"))&&r.nodeModel.getAttributeValue("PQ").toLowerCase().includes(a)||t.is(r.nodeModel.getAttributeValue("Abbreviations"))&&r.nodeModel.getAttributeValue("Abbreviations").toLowerCase().includes(a)){let t={id:r.nodeModel.getAttributeValue("id"),Abbreviations:r.nodeModel.getAttributeValue("Abbreviations"),PQ:r.nodeModel.getAttributeValue("PQ"),value:r.nodeModel.getAttributeValue("value")};e.push(t)}}});let n=[];if(A._selectedPQs)for(let e=0;e<A._selectedPQs.length;e++)n.push(A._selectedPQs[e]);r._getTrueRoot().removeChildren(),r.prepareUpdate();let i=e.length;for(let t=0;t<i;t++){let a={id:(u=e[t]).id,Abbreviations:u.Abbreviations,PQ:u.PQ,value:u.value};var o=y.createTreeNodeDataModel(N,{label:a.PQ,grid:a});r.addChild(o)}r.expandAll(),r.pushUpdate(),r.search({match:function(e){n&&n.length>0&&n.forEach((function(t){e.nodeModel.getAttributeValue("id")===t.id&&e.nodeModel.select()}))}});let s=[],l=[];if(A._selectedCustomPQs)for(let e=0;e<A._selectedCustomPQs.length;e++)l.push(A._selectedCustomPQs[e]);let c=A.customdataGridView.getTreeDocument();c.search({match:function(e){if(e.nodeModel.getAttributeValue("PQ").toLowerCase().includes(a)||e.nodeModel.getAttributeValue("Abbreviations").toLowerCase().includes(a)){let t={id:e.nodeModel.getAttributeValue("id"),Abbreviations:e.nodeModel.getAttributeValue("Abbreviations"),PQ:e.nodeModel.getAttributeValue("PQ"),value:e.nodeModel.getAttributeValue("value")};s.push(t)}}}),c._getTrueRoot().removeChildren(),c.prepareUpdate();let d=s.length;for(let e=0;e<d;e++){var u;let t={id:(u=s[e]).id,Abbreviations:u.Abbreviations,PQ:u.PQ,value:u.value};o=y.createTreeNodeDataModel(N,{label:t.PQ,grid:t});c.addChild(o)}if(c.expandAll(),c.pushUpdate(),c.search({match:function(e){l&&l.length>0&&l.forEach((function(t){e.nodeModel.getAttributeValue("id")===t.id&&e.nodeModel.select()}))}}),n)for(let e=0;e<n.length;e++){let t=!1;A._selectedPQs.forEach((function(a){a.id===n[e].id&&(t=!0)})),!1===t&&A._selectedPQs.push(n[e])}if(l)for(let e=0;e<l.length;e++){let t=!1;A._selectedCustomPQs.forEach((function(a){a.id===l[e].id&&(t=!0)})),!1===t&&A._selectedCustomPQs.push(l[e])}}));let f=e.create("div",{id:"Select_PQ_combo"}).inject(u);f.setStyle("display","grid"),f.setStyles({display:"grid","margin-left":"20px",width:"150px"});var S=[{label:h.get("Show_all")},{label:h.get("Show_Selected")},{label:h.get("Show_unselected")}];if(A.searchPQComboBox=new n({elementsList:S,nbDisplayedElements:S.length,selectedIndex:-1,enableSearchFlag:!1}).inject(f),A.searchPQComboBox.addEventListener("change",(function(){if(A.searchPQComboBox.currentValue===S[0].label){let a=[];if(A._selectedPQs.length>0)for(let e=0;e<A._selectedPQs.length;e++)a.push(A._selectedPQs[e]);let r=A.dataGridView.getTreeDocument();r._getTrueRoot().removeChildren(),r.prepareUpdate();let n=A._stdPQ.length;for(let a=0;a<n;a++){let n={id:(t=A._stdPQ[a]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};var e=y.createTreeNodeDataModel(N,{label:n.title,grid:n});r.addChild(e)}if(r.expandAll(),r.pushUpdate(),r.search({match:function(e){a&&a.length>0&&a.forEach((function(t){e.nodeModel.getAttributeValue("id")===t.id&&e.nodeModel.select()}))}}),a)for(let e=0;e<a.length;e++){let t=!1;A._selectedPQs.forEach((function(r){r.id===a[e].id&&(t=!0)})),!1===t&&A._selectedPQs.push(a[e])}let i=[];if(A._selectedCustomPQs.length>0)for(let e=0;e<A._selectedCustomPQs.length;e++)i.push(A._selectedCustomPQs[e]);let o=A.customdataGridView.getTreeDocument();o._getTrueRoot().removeChildren(),o.prepareUpdate();let s=A._CustomPQs.length;for(let a=0;a<s;a++){let r={id:(t=A._CustomPQs[a]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=y.createTreeNodeDataModel(N,{label:r.title,grid:r});o.addChild(e)}if(o.expandAll(),o.pushUpdate(),o.search({match:function(e){i&&i.length>0&&i.forEach((function(t){e.nodeModel.getAttributeValue("id")===t.id&&e.nodeModel.select()}))}}),i)for(let e=0;e<i.length;e++){let t=!1;A._selectedCustomPQs.forEach((function(a){a.id===i[e].id&&(t=!0)})),!1===t&&A._selectedCustomPQs.push(i[e])}}if(A.searchPQComboBox.currentValue===S[1].label){let a=[];if(A._selectedPQs.length>0)for(let e=0;e<A._selectedPQs.length;e++)a.push(A._selectedPQs[e]);let r=A.dataGridView.getTreeDocument();r._getTrueRoot().removeChildren(),r.prepareUpdate();let n=a.length;for(let i=0;i<n;i++){let n={id:(t=a[i]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=y.createTreeNodeDataModel(N,{label:n.title,grid:n});r.addChild(e),e.select()}if(r.expandAll(),r.pushUpdate(),a)for(let e=0;e<a.length;e++){let t=!1;A._selectedPQs.forEach((function(r){r.id===a[e].id&&(t=!0)})),!1===t&&A._selectedPQs.push(a[e])}let i=[];if(A._selectedCustomPQs.length>0)for(let e=0;e<A._selectedCustomPQs.length;e++)i.push(A._selectedCustomPQs[e]);let o=A.customdataGridView.getTreeDocument();o._getTrueRoot().removeChildren(),o.prepareUpdate();let s=i.length;for(let a=0;a<s;a++){let r={id:(t=i[a]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=y.createTreeNodeDataModel(N,{label:r.title,grid:r});o.addChild(e),e.select()}if(o.expandAll(),o.pushUpdate(),i)for(let e=0;e<i.length;e++){let t=!1;A._selectedCustomPQs.forEach((function(a){a.id===i[e].id&&(t=!0)})),!1===t&&A._selectedCustomPQs.push(i[e])}}if(A.searchPQComboBox.currentValue===S[2].label){let a=[];if(A._selectedPQs.length>0)for(let e=0;e<A._selectedPQs.length;e++)a.push(A._selectedPQs[e]);let r=[];for(let e=0;e<A._stdPQ.length;e++)if(a.length>0){let t=!1;a.forEach((function(a){a.id===A._stdPQ[e].id&&(t=!0)})),!1===t&&r.push(A._stdPQ[e])}let n=A.dataGridView.getTreeDocument();if(n._getTrueRoot().removeChildren(),n.prepareUpdate(),r.length>0){let a=r.length;for(let i=0;i<a;i++){let a={id:(t=r[i]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=y.createTreeNodeDataModel(N,{label:a.PQ,grid:a});n.addChild(e)}}else if(0==a.length){let a=A._stdPQ.length;for(let r=0;r<a;r++){let a={id:(t=A._stdPQ[r]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=y.createTreeNodeDataModel(N,{label:a.PQ,grid:a});n.addChild(e)}}if(n.expandAll(),n.pushUpdate(),a)for(let e=0;e<a.length;e++){let t=!1;A._selectedPQs.forEach((function(r){r.id===a[e].id&&(t=!0)})),!1===t&&A._selectedPQs.push(a[e])}let i=[];if(A._selectedCustomPQs.length>0)for(let e=0;e<A._selectedCustomPQs.length;e++)i.push(A._selectedCustomPQs[e]);let o=[];for(let e=0;e<A._CustomPQs.length;e++){let t=!1;i.forEach((function(a){a.id===A._CustomPQs[e].id&&(t=!0)})),!1===t&&o.push(A._CustomPQs[e])}let s=A.customdataGridView.getTreeDocument();if(s._getTrueRoot().removeChildren(),s.prepareUpdate(),o.length>0){let a=o.length;for(let r=0;r<a;r++){let a={id:(t=o[r]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=y.createTreeNodeDataModel(N,{label:a.PQ,grid:a});s.addChild(e)}}else{let a=A._CustomPQs.length;for(let r=0;r<a;r++){var t;let a={id:(t=A._CustomPQs[r]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=y.createTreeNodeDataModel(N,{label:a.PQ,grid:a});n.addChild(e)}}if(s.expandAll(),s.pushUpdate(),i)for(let e=0;e<i.length;e++){let t=!1;A._selectedCustomPQs.forEach((function(a){a.id===i[e].id&&(t=!0)})),!1===t&&A._selectedCustomPQs.push(i[e])}}})),"OnPremise"===_.platformID){A.divCustomPQ=e.create("div",{class:"scc_tagsDisplay_div search_center_bottom_margin",id:"search-center-custom-pq"}).inject(o),A.divCustomPQText=e.create("div",{class:"search_center_div_left_new search_center_general_display_flex search_center_add_category_bottom",id:"div_custom_pq_text"}).inject(A.divCustomPQ),e.create("p",{class:"search_center_text_heading",text:h.get("Custom Predefined Queries")}).inject(A.divCustomPQText),A.div_Custom_tree=e.create("div",{class:" search_center_All_Sides_margin",id:"search-center-Custom-pq-tree"}).inject(A.divCustomPQ);var D=new v,I=new C({dataModelSet:D}),P=[{text:"Select All",customHeader:{updateContent(){A.customdataGridView.layout.columns[0].text="Select All ("+A._selectedCustomPQs.length+")"}},children:[{text:"PQ",dataIndex:"PQ"},{text:"Abbreviations",dataIndex:"Abbreviations"}]}];A.customdataGridView=new b({treeDocument:I,columns:P,showRowIndexFlag:!1,showSelectionCheckBoxesFlag:!0,maxVisibleRowCount:10,showOutlineFlag:!0,defaultColumnDef:{typeRepresentation:"string",sortableFlag:!1,height:"auto"}}).inject(A.div_Custom_tree),A.customdataGridView.elements.container.addClassName("pq-grid-container"),A.customdataGridView.layout.setColumnWidth("PQ",200),x.mask(A.divCustomPQ),T.fetchPQs().then((function(e){A._CustomPQs=T.getAllCustomPQs();let t=[];A._CustomPQs.forEach((function(e){let a={id:e.id,Abbreviations:e.abbreviations,PQ:e.title,value:e.value};t.push(a)})),I.prepareUpdate();for(var a=0,r=t.length;a<r;a++){var n=t[a],i=y.createTreeNodeDataModel(D,{label:n.title,grid:n});I.addChild(i)}I.expandAll(),I.pushUpdate(),x.unmask(A.divCustomPQ)}),(function(){x.unmask(A.divCustomPQ),console.log("_getServiceURL for 3DSpace FAILED"),reject("_getServiceURL for 3DSpace FAILED")})),A._selectedCustomPQs=[],A.customdataGridView.getNodesXSO().onPostAdd((function(e){e.forEach((function(e){let t={title:e.getAttributeValue("PQ"),abbreviations:e.getAttributeValue("Abbreviations"),id:e.getAttributeValue("id"),value:e.getAttributeValue("value")};A.onItemSelected(t,!0),_.enableButtons()}))})),A.customdataGridView.getNodesXSO().onPostRemove((function(e){e.forEach((function(e){let t={title:e.getAttributeValue("PQ"),abbreviations:e.getAttributeValue("Abbreviations"),id:e.getAttributeValue("id"),value:e.getAttributeValue("value")};A.onItemUnselected(t,!0),_.enableButtons()}))}))}A.divStandardPQ=e.create("div",{class:"scc_tagsDisplay_div",id:"search-center-standard-pq"}).inject(o);let W=e.create("div",{class:"search_center_div_left_new search_center_general_display_flex search_center_add_category_bottom",id:"div_standard_pq_text"}).inject(A.divStandardPQ);W.setStyle("margin-top","20px"),e.create("p",{class:"search_center_text_heading",text:h.get("Standard Predefined Queries")}).inject(W),A.div_standard_tree=e.create("div",{class:" search_center_All_Sides_margin",id:"search-center-standard-pq-tree"}).inject(A.divStandardPQ);var N=new v,j=new C({dataModelSet:N}),O=[{text:"Select All",customHeader:{updateContent(){A.customdataGridView.layout.columns[0].text="Select All ("+A._selectedPQs.length+")"}},children:[{text:"PQ",dataIndex:"PQ"},{text:"Abbreviations",dataIndex:"Abbreviations"}]}];A.dataGridView=new b({treeDocument:j,columns:O,showRowIndexFlag:!1,showSelectionCheckBoxesFlag:!0,maxVisibleRowCount:10,showOutlineFlag:!0,defaultColumnDef:{typeRepresentation:"string",height:"auto"}}).inject(A.div_standard_tree),A.dataGridView.elements.container.addClassName("pq-grid-container"),A.dataGridView.layout.setColumnWidth("PQ",200),x.mask(A.divStandardPQ),T.fetchPQs().then((function(e){A._stdPQ=T.getStdPQs(),A._allPQ=T.getAllPQs();let t=[];A._stdPQ.forEach((function(e){let a={id:e.id,Abbreviations:e.abbreviations,PQ:e.title,value:e.value};t.push(a)})),j.prepareUpdate();for(var a=0,r=t.length;a<r;a++){var n=t[a],i=y.createTreeNodeDataModel(N,{label:n.title,grid:n});j.addChild(i)}j.expandAll(),j.pushUpdate(),x.unmask(A.divStandardPQ)}),(function(){x.unmask(A.divStandardPQ),console.log("_getServiceURL for 3DSpace FAILED"),reject("_getServiceURL for 3DSpace FAILED")})),A._selectedPQs=[],A.dataGridView.getNodesXSO().onPostAdd((function(e){e.forEach((function(e){let t={title:e.getAttributeValue("PQ"),abbreviations:e.getAttributeValue("Abbreviations"),id:e.getAttributeValue("id"),value:e.getAttributeValue("value")};A.onItemSelected(t,!1),_.enableButtons()}))})),A.dataGridView.getNodesXSO().get((function(e){e.length})),A.dataGridView.getNodesXSO().onPostRemove((function(e){e.forEach((function(e){let t={title:e.getAttributeValue("PQ"),abbreviations:e.getAttributeValue("Abbreviations"),id:e.getAttributeValue("id"),value:e.getAttributeValue("value")};A.onItemUnselected(t,!1),_.enableButtons()}))})),!1===A.SelectAvailPqON.checkFlag?(A.divStandardPQ.addClassName("search_center_disable"),t.is(A.divCustomPQ)&&(A.divCustomPQText.addClassName("search_center_disable"),A.divCustomPQ.addClassName("search_center_disable")),u.addClassName("search_center_disable")):(A.divStandardPQ.removeClassName("search_center_disable"),t.is(A.divCustomPQ)&&(A.divCustomPQText.removeClassName("search_center_disable"),A.divCustomPQ.removeClassName("search_center_disable")),u.removeClassName("search_center_disable")),A.SelectAvailPqON.addEventListener("change",function(){A.upsertTrackerEntrypq({category:"SearchControlCenter-PQ",action:"selectValue",pd1:"PqToggle",pd2:A.SelectAvailPqON.checkFlag}),_.enableButtons(),!1===A.SelectAvailPqON.checkFlag?(A.divStandardPQ.addClassName("search_center_disable"),t.is(A.divCustomPQ)&&(A.divCustomPQ.addClassName("search_center_disable"),A.divCustomPQText.addClassName("search_center_disable")),u.addClassName("search_center_disable")):(A.divStandardPQ.removeClassName("search_center_disable"),t.is(A.divCustomPQ)&&(A.divCustomPQ.removeClassName("search_center_disable"),A.divCustomPQText.removeClassName("search_center_disable")),u.removeClassName("search_center_disable"))}.bind(this))},onItemSelected:function(e,t){if(!1===t){let t=!1;A._selectedPQs.forEach((function(a){a.id===e.id&&(t=!0)})),!1===t&&(A._selectedPQs.push(e),!0===A.SelectAvailPqON.checkFlag&&A.upsertTrackerEntrypq({category:"SearchControlCenter-PQ",action:"selectValue",pd1:"selectedPQ",pd2:A.title}))}if(!0===t){let t=!1;A._selectedCustomPQs.forEach((function(a){a.id===e.id&&(t=!0)})),!1===t&&(A._selectedCustomPQs.push(e),!0===A.SelectAvailPqON.checkFlag&&A.upsertTrackerEntrypq({category:"SearchControlCenter-PQ",action:"selectValue",pd1:"selectedCustomPQs",pd2:A._selectedCustomPQs.title}))}},onItemUnselected:function(e,t){if(A._selectedPQs.length>0&&!1===t)for(var a=0;a<A._selectedPQs.length;a++)A._selectedPQs[a].id===e.id&&A._selectedPQs.splice(a,1);if(A._selectedCustomPQs.length>0&&!0===t)for(a=0;a<A._selectedCustomPQs.length;a++)A._selectedCustomPQs[a].id===e.id&&A._selectedCustomPQs.splice(a,1)},getTabInputsToStore:function(){return A._trackerData&&Object.values(A._trackerData).forEach((e=>{_.trackerPublisher(e.category,e.action,{pd1:e.pd1,pd2:e.pd2,pd3:e.pd3})})),{all_pqs:A._allPQ,selected_pqs:A._selectedPQs,pq_filter_display:A.SelectAvailPqON.checkFlag,selected_custom_pqs:A._selectedCustomPQs}},onResetTab:function(e){let a;if(a=t.is(e,"string")?JSON.parse(e):e,A.searchPQComboBox.currentValue=h.get("Show_all"),t.is(a)){let e;if(a.hasOwnProperty("pqs")){e=a.pqs;let r=e.pq_filter_display;if(t.is(r)&&(A.SelectAvailPqON.checkFlag=r),e.selected_pqs){if(A._savedSelectedPQs=[],A._selectedPQs=[],e.selected_pqs)for(let t=0;t<e.selected_pqs.length;t++)A._savedSelectedPQs.includes(e.selected_pqs[t])||A._savedSelectedPQs.push(e.selected_pqs[t]),A._selectedPQs.includes(e.selected_pqs[t])||A._selectedPQs.push(e.selected_pqs[t])}else T.fetchPQs().then((function(e){A._stdPQ=T.getStdPQs(),A._allPQ=T.getAllPQs(),A._savedSelectedPQs=[],A._selectedPQs=[];for(let e=0;e<A._stdPQ.length;e++){let t=!1;A._savedSelectedPQs.forEach((function(a){a.id===A._stdPQ[e].id&&(t=!0)})),!1===t&&A._savedSelectedPQs.push(A._stdPQ[e])}}));if(e.selected_custom_pqs){if(A._savedSelectedCustomPQs=[],A._selectedCustomPQs=[],e.selected_custom_pqs)for(let t=0;t<e.selected_custom_pqs.length;t++)A._savedSelectedCustomPQs.includes(e.selected_custom_pqs[t])||A._savedSelectedCustomPQs.push(e.selected_custom_pqs[t]),A._selectedCustomPQs.includes(e.selected_custom_pqs[t])||A._selectedCustomPQs.push(e.selected_custom_pqs[t])}else T.fetchPQs().then((function(e){A._CustomPQs=T.getAllCustomPQs(),A._savedSelectedCustomPQs=[],A._selectedCustomPQs=[];for(let e=0;e<A._CustomPQs.length;e++){let t=!1;A._savedSelectedCustomPQs.forEach((function(a){a.id===A._CustomPQs[e].id&&(t=!0)})),!1===t&&A._savedSelectedCustomPQs.push(A._CustomPQs[e])}}));T.fetchPQs().then((function(t){if(A.dataGridView.getTreeDocument().search({match:function(t){t.nodeModel.unselect(),e.selected_pqs?e.selected_pqs.length>0&&e.selected_pqs.forEach((function(e){t.nodeModel.getAttributeValue("id")===e.id&&t.nodeModel.select()})):t.nodeModel.select()}}),"OnPremise"===_.platformID){A.customdataGridView.getTreeDocument().search({match:function(t){t.nodeModel.unselect(),e.selected_custom_pqs?e.selected_custom_pqs.length>0&&e.selected_custom_pqs.forEach((function(e){t.nodeModel.getAttributeValue("id")===e.id&&t.nodeModel.select()})):t.nodeModel.select()}})}_.disableButtons()}))}else T.fetchPQs().then((function(e){if(A.SelectAvailPqON.checkFlag=!1,A.dataGridView.getTreeDocument().search({match:function(e){e.nodeModel.select()}}),"OnPremise"===_.platformID){A.customdataGridView.getTreeDocument().search({match:function(e){e.nodeModel.select()}})}_.disableButtons()}))}else{if(A.SelectAvailPqON.checkFlag=!1,A.dataGridView.getTreeDocument().search({match:function(e){e.nodeModel.select()}}),"OnPremise"===_.platformID){A.customdataGridView.getTreeDocument().search({match:function(e){e.nodeModel.select()}})}}_.removeMask(widget.body)},upsertTrackerEntrypq:function(e){Array.isArray(A._trackerData)||(A._trackerData=[]);const t=A._trackerData.findIndex((t=>t.pd1===e.pd1));-1!==t?A._trackerData[t]=e:A._trackerData.push(e)}};return A})),define("DS/SearchControlCenter/scripts/SearchControlCenterInfra",["UWA/Element","UWA/Core","UWA/Promise","DS/UIKIT/Input/Button","DS/UIKIT/Accordion","DS/WAFData/WAFData","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/3DSearchControl_UIsettings.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchControlCenterFetchService","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/UIKIT/Alert","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchPreferences","DS/SNResultUX/utils/ExternalComponentHelpers"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_,m,f,C,y){"use strict";return{url3DSpacepromise:a.deferred(),CSVpromise:a.deferred(),initInfraPromise:a.deferred(),_postURL:null,_listOfFacets:[],_listOfFacetNames:[],uiRefresh:function(){this._listOfFacetNames.length>0?this._OnResetClick():this.init()},initInfra:function(){var e=this,a={onComplete:function(){var a={tenantID:p.platformID,key:"SCC_UI"};g.getSearchSettings(a).then((function(a){var r;r=t.is(a,"string")?JSON.parse(a):a,h.setSettingsJSON(r),e.initInfraPromise.resolve()}),(function(t){y.unmask(widget.body),e.initInfraPromise.reject();var a=p.createWdgAlert();a.inject(widget.body,"top");var r=s.get("SearchInfra.failuremsg");r+=t,a.add({className:"error",message:r})}))},onFailure:function(){e.initInfraPromise.reject(),y.unmask(widget.body),c.log("Login fails !!")}};return a.tenantID=widget.getValue("x3dPlatformId"),t.is(a.tenantID)&&""!==a.tenantID||(a.tenantID="OnPremise"),_.getServiceUrl({serviceName:"3DSearch",platformId:a.tenantID,onComplete:function(e){var r;t.is(e,"array")?r=e[0].url:t.is(e,"string")&&(r=e),t.is(r)&&(a.fedSearchURL=r),t.is(a.tenantID,"string")&&(d.login(a),p.setPlatformID(a.tenantID))},onFailure:function(e){var t=p.createWdgAlert();t.inject(widget.body,"top");var a=s.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error",message:a})}}),_.getPlatformConfig({serviceName:"3DSpace",onComplete:function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.platformId===a.tenantID){p.setPlatformDisplayName(r.displayName);break}}}}),this.initInfraPromise.promise},getDefaultPredicates:function(){var e=[],a=!1,r=C.getLocalStorageItem("TagNavigator-simplifiedTagger");return t.is(r)&&"true"===r&&(a=!0),a&&e.push({uri:"computedCountryInfo"}),e.push({uri:"ds6w:dataSource"}),e.push({uri:"ds6w:type"}),a||e.push({uri:"ds6w:category"}),e.push({uri:"ds6w:modified"}),a&&e.push({uri:"ds6w:created"}),e.push({uri:"ds6w:lastModifiedBy"}),e.push({uri:"ds6w:responsible"}),e},check3DSpaceAvailablity:function(){var e=widget.getValue("x3dPlatformId");t.is(e)&&""!==e||(e="OnPremise");var a=this;return _.getServiceUrl({serviceName:"3DSpace",platformId:e,onComplete:function(e){if(t.is(e))a.url3DSpacepromise.resolve(e);else{var r=new Error("no platform");a.url3DSpacepromise.reject(r)}},onFailure:function(){var e=new Error("no platform");a.url3DSpacepromise.reject(e)}}),this.url3DSpacepromise.promise},checkCSVAvailability:function(){var e=this;return f.getGrantedRoles((function(t){for(var a=!1,r=0;r<t.length;r++)if("CSV"===t[r].id){a=!0;break}if(a)e.CSVpromise.resolve(t);else{var n=new Error("no access");e.CSVpromise.reject(n)}})),this.CSVpromise.promise}}})),define("DS/SearchControlCenter/Views/SearchControlCenterLayoutView",["UWA/Core","UWA/Class/View","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Alert","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchControlCenterFetchService","DS/SearchControlCenter/scripts/SearchControlCenterInfra","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","text!DS/SearchControlCenter/assets/SearchControlCenter_defaults.json","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/WAFData/WAFData","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCPQManager"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_,m,f,C){"use strict";var y=t.extend({tagName:"div",className:"generic-detail",_postURL:null,_sccDefaultSettings:null,_containerSpan:null,init:function(e){e&&(this.model=e.model),this._parent.call(this,e),i.getPredicatesList(),i.loadDataSourcesandClasses(),C.fetchPQs()},setup:function(t){e.log("SCCLayoutView::setup!"),e.log(t)},render:function(){e.log("SCCLayoutView::render");var t=this;t._containerSpan=new e.Element("div",{class:"search_center_scroll",id:"search-control-center-general"}),t._containerSpan.inject(t.container),t._containerSpan.classList.add("search_center_container"),f.mask(widget.body),require([t.model._attributes.facetJS],(function(e){e.onRenderFacet(t._containerSpan);let a={facetID:t.model._attributes.id};var r=i.getSettingsJSONFromTabName(a);e.onResetTab(r),i.disableButtons()})),t.buttonContainer=new e.Element("div",{class:"search-control-buttonContainer"}),t.buttonContainer.inject(t.container);var a=new r({id:"id_in_app_apply",value:g.get("ApplyButton.title"),className:"default  primary in_app_search_center_btn",events:{onClick:function(){t._OnApplyClick(!1),h.log("inside _OnApplyClick() "),i.trackerPublisher("SearchControlCenter","ClickOnbutton",{pd1:"ApplyButtonClick"})}}}).inject(t.buttonContainer,"bottom"),n=new r({id:"id_in_app_cancel",value:g.get("CancelButton.title"),className:"default in_app_search_center_btn",events:{onClick:function(){t._OnCancelClick(),h.log("inside _OnCancelClick() "),i.trackerPublisher("SearchControlCenter","ClickOnbutton",{pd1:"CancelButtonClick"})}}}).inject(t.buttonContainer);new r({id:"id_in_app_restore",value:g.get("RestoreButton.title"),className:"default in_app_search_center_btn search_center_button_right_margin",events:{onClick:function(){t._OnResetClick(),h.log("inside _OnResetClick() "),i.trackerPublisher("SearchControlCenter","ClickOnbutton",{pd1:"RestoreButtonClick"})}}}).inject(t.buttonContainer);return i.updateButtons(a,n),i.disableButtons(),this},_OnCancelClick:function(){i.reSetButtonStatus();var e=this;require([e.model._attributes.facetJS],(function(t){var a={facetID:e.model._attributes.id},r=i.getSettingsJSONFromTabName(a);t.onResetTab(r),i.disableButtons()}))},_OnApplyClick:function(t){i.reSetButtonStatus();var a=this,r=t;require([a.model._attributes.facetJS],(function(t){var n=t.getTabInputsToStore();if(e.is(n)){var s=a.model._attributes.id,d={};"SearchControl_SearchTypes"===s?d=n:d[s]=n,c.updateSettingsJSON(d)}i.disableButtons(),l.getServiceUrl({serviceName:"3DSpace",platformId:i.platformID,onComplete:function(t){if(e.is(t,"string")){y._postURL=t+"/resources/SNAPI/infra_services/searchsettings?tenant="+i.platformID;var n=null;r?(n=a._sccDefaultSettings,!0!==_.getOption("allowEnterpriseDictionaryModification")&&(n.enterprise_ontology=c.gateSettingsJSON().enterprise_ontology)):n=c.gateSettingsJSON();var s={timeout:5e4,method:"POST",data:JSON.stringify(n),type:"json",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(){if(r){a._updateMemoryModel(),(t=i.createWdgAlert()).inject(widget.body,"top");var e=g.replace(g.get("SearchInfra.restoreToDefaultsuccessmsg"),{tenant_name:i.platformDisplayName});t.add({className:"success applyChangesAlert",message:e})}else{var t;o._searchControlCenterSettingsJSONFromDB=c._searchControlCenterSettingsJSON,(t=i.createWdgAlert()).inject(widget.body,"top");e=g.replace(g.get("SearchInfra.successmsg"),{tenant_name:i.platformDisplayName});t.add({className:"success applyChangesAlert",message:e})}a._updateUI()},onFailure:function(e){if(r){(a=i.createWdgAlert()).inject(widget.body,"top");var t=g.get("SearchInfra.restoreToDefaultfailuremsg");t+=e,a.add({className:"error applyChangesAlert",message:t})}else{var a;(a=i.createWdgAlert()).inject(widget.body,"top");t=g.get("SearchInfra.failuremsg");t+=e,a.add({className:"error applyChangesAlert",message:t})}},onTimeout:function(e){var t=i.createWdgAlert();t.inject(widget.body,"top");var a=g.get("SearchInfra.timeoutmsg");a+=e,t.add({className:"error applyChangesAlert",message:a})}};require(["DS/SNInfraUX/SearchSettings"],(function(e){(e.getOption("ODTLogs")||e.getOption("ODTLogs-SCCSettings"))&&h.warn("ODTLogs-SCCSettings:"+JSON.stringify(s))})),p.authenticatedRequest(y._postURL,s)}},onFailure:function(e){var t=i.createWdgAlert();t.inject(widget.body,"top");var a=g.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})}))},_OnResetClick:function(){var t=this;t.buttonContainer.addClassName("search_center_disable"),t._containerSpan.addClassName("search_center_disable"),f.modal({title:g.get("SearchInfra.restoreToDefaultHeader"),content:g.replace(g.get("SearchInfra.restoreToDefaultConfirmationmsg"),{tenant_name:i.platformDisplayName}),visibleFlag:!0,CB:[{buttonKind:"YES",label:g.get("SearchInfra.yesButton"),function:()=>{t._sccDefaultSettings=JSON.parse(d);let a=t._sccDefaultSettings.attribute_custo;a["ds6w:type"]=[];var r=a["ds6w:type"];let n=t._getdefault3DSearchPredicate();r.push(n),e.is(t._sccDefaultSettings)&&t._OnApplyClick(!0),t.buttonContainer.removeClassName("search_center_disable"),t._containerSpan.removeClassName("search_center_disable"),f.destroyModal()}},{buttonKind:"cancel",label:g.get("SearchInfra.noButton"),function:()=>{t.buttonContainer.removeClassName("search_center_disable"),t._containerSpan.removeClassName("search_center_disable"),f.destroyModal()}}]}),f._dialogs.no_key.elements._closeButton.addEventListener("click",(function(){t.buttonContainer.removeClassName("search_center_disable"),t._containerSpan.removeClassName("search_center_disable")}))},_updateMemoryModel:function(){var e=this;e._sccDefaultSettings&&(c.setSettingsJSON(e._sccDefaultSettings),o._searchControlCenterSettingsJSONFromDB=e._sccDefaultSettings,require([e.model._attributes.facetJS],(function(t){var a={facetID:e.model._attributes.id},r=i.getSettingsJSONFromTabName(a);t.onResetTab(r),i.disableButtons()})))},_updateUI:function(){let t=this;require([t.model._attributes.facetJS],(function(a){if(e.is(a)&&e.is(a.onUpdateUI,"function")){let e=t.model._attributes.id;a.onUpdateUI(e)}}))},_getdefault3DSearchPredicate:function(){let e={};return e.source="AllDataSourcesandTypes",o.getAppWisePredicates(m.getSearchAppId(),!0).then((t=>{let a=[];t.hasOwnProperty("preferred_predicates")&&t.preferred_predicates.length>0&&(a=t.preferred_predicates),null!=a&&(e.predicates=a)})),e},destroy:function(){this.stopListening(),this._parent.apply(this,arguments)}});return y})),define("DS/SearchControlCenter/scripts/SearchControlCenterWidget",["UWA/Core","UWA/Class/Model","UWA/Class/Collection","UWA/Class/View","WebappsUtils/WebappsUtils","DS/W3DXComponents/Skeleton","DS/W3DXComponents/ContentSet","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SearchControlCenter/Views/SearchControlCenterLayoutView","DS/SearchControlCenter/scripts/SearchControlCenterInfra","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],(function(e,t,a,r,n,i,o,s,l,c,d,u){"use strict";var g={bones:null,height:"auto",licenceAlert:null,unMaximizedHeight:null,generalViewOpts:{contents:{useInfiniteScroll:!1,usePullToRefresh:!1}},setBodyHeight:function(e){e&&("auto"!==e&&(e+="px"),widget.body.setStyle("height",e))},buildSkeleton:function(){var t=l;return new i({domains:{collection:"DS/SearchControlCenter/Collection/SearchControlCenterFacetListCollection",view:null,swipe:!1,viewOptions:g.generalViewOpts,idCardOptions:{actions:function(){return null},facets:function(){return[{text:"Edit",icon:"tools",handler:i.getRendererHandler(t)}]}}}},{root:"domains",startRoute:"/domains/SearchControl_General/?facet=0",useRootChannelView:!1,responsiveTrigger:function(){var e=widget.getView().type;return"channel"===widget.getValue("view")&&("maximized"===e||"fullscreen"===e)},events:{onItemClick:function(t){e.log(t)},onSlide:function(t,a){e.log(t),e.log(a)}}})},onLoad:function(){function t(e){var t=d.createWdgAlert();t.options.autoHide=!1,t.inject(widget.body,"top"),t.add({className:"warning",message:e})}g.bones&&g.bones.destroy(),d.putMask(widget.body),c.checkCSVAvailability().then((function(a){c.check3DSpaceAvailablity().then((function(a){c.initInfra().then((function(t){var a="";a=d.getPlatformID(),e.is(a)&&""!==a||(a=e.is(widget.getValue("x3dPlatformId"))?widget.getValue("x3dPlatformId"):"OnPremise",d.setPlatformID(a)),widget.setTitle(a),s.getServiceUrl({serviceName:"3DSpace",platformId:a,onComplete:function(e){d.setURL(e),g.bones=g.buildSkeleton(),widget.body.setContent(g.bones.render())},onFailure:function(e){var t=d.createWdgAlert();t.inject(widget.body,"top");var a=u.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})}),(function(e){t(u.get("html.InitInfra"))}))}),(function(e){t(u.get("html.platform"))})),d.removeMask(widget.body)}),(function(e){t(u.get("html.license")),d.removeMask(widget.body)}))},onRefresh:function(e){this.onLoad()},onViewChange:function(e){}};return g})),define("DS/SearchControlCenter/scripts/SCCSynonymsDictonary",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/SNResultUX/utils/ExternalComponentHelpers","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices"],(function(e,t,a,r,n,i,o,s){"use strict";return{importButton:null,fileChooser:null,checkboxActivateSynonyms:null,jsonReader:null,newSynonymsToStore:null,storedSynonyms:null,onRender:function(l){var c=this,d=e.create("div",{class:"search_center_div_left search_center_general_display_flex search_center_add_category_bottom main_Div_Padding",id:"general-tab-search_synonyms-text"}).inject(l);e.create("p",{class:"search_center_text_heading",text:o.get("GeneralTab.SearchSynonyms.title")}).inject(d);var u=e.create("div",{class:"search_center_top_margin search_center_div_left_6w search_center_general_display_flex",id:"general-tab-abbreviated-count"}).inject(l),g=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-synonyms-toggle"}).inject(u);this.checkboxActivateSynonyms=new a({type:"switch",label:o.get("GeneralTab.SearchSynonyms.checkbox.label"),className:"primary",touchMode:!0}).inject(g),this.checkboxActivateSynonyms.addEventListener("change",(function(){!t.is(c.storedSynonyms)&&c.checkboxActivateSynonyms.checkFlag||s.enableButtons(),c._setBrowseFileState(c.checkboxActivateSynonyms.checkFlag)}),!1);var p=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(u);i.popin(p,{trigger:"hover",position:"top",body:o.get("GeneralTab.SearchSynonyms.checkbox.info")}),this.divFileChooserSpan=e.create("div",{class:" search_center_disable",id:"div-file-chooser-span"}).inject(l);var h=e.create("div",{class:"",id:"div-file-chooser-lable"}).inject(this.divFileChooserSpan),_=(e.create("p",{class:"search_center_text",text:o.get("GeneralTab.SearchSynonyms.FileChooser.label"),styles:{}}).inject(h),e.create("div",{class:"search_center_div_left search_center_div_uidisplay search_center_general_display_flex",id:"search-type-display"}).inject(this.divFileChooserSpan)),m=e.create("div",{class:" ",id:"search-synonyms-file-chooser",styles:{width:"85%",position:"relative"}}).inject(_);this.fileChooser=new r({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.new"),buttonText:o.get("GeneralTab.SearchSynonyms.FileChooser.buttonText"),events:{onChange:this._onFileInputChange.bind(this)}}).inject(m);var f=e.create("div",{class:"",id:"search-synonyms-file-import",styles:{"margin-left":"5px","margin-right":"5px",width:"15%",position:"center"}}).inject(_),C=this;this.importButton=new n({id:"import_button_id",value:o.get("GeneralTab.SearchSynonyms.FileChooser.validate"),className:"default",disabled:!0,events:{onClick:function(){C._onImportClick()}}}).inject(f)},_onFileInputChange:function(e){var a=e.target.files[0],r=a.name;t.is(r,"string")&&("json"===r.slice(2+(r.lastIndexOf(".")-1>>>0))?t.is(this.storedSynonyms)?this._confirmAndReadFileAsText(a):this._readFileAsText(a):(this.importButton.disable(),this.fileChooser.clear(),this._showAlert(o.get("GeneralTab.SearchSynonyms.errors.JsonOnly"),"error")))},_onImportClick:function(){try{this._isValidJson(this.jsonReader)&&(s.enableButtons(),this._showAlert(o.get("GeneralTab.SearchSynonyms.success.ValidJson"),"success"))}catch(e){this.fileChooser.clear(),this._showAlert(e.message,"error")}this.importButton.disable()},_isValidJson:function(e){var a=null;if(!t.is(e.result))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.InvalidJson"));try{a=JSON.parse(e.result)}catch(e){throw new Error(o.get("GeneralTab.SearchSynonyms.errors.ParsingError"))}if(!t.is(a,"object"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"));return Object.keys(a).forEach((function(e){if(!t.is(a[e],"array"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"));a[e].forEach((e=>{if(!t.is(e,"string"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"))}))})),this.newSynonymsToStore=a,!0},updateTabInputsToStore:function(e){let a={};a.activateSnonyms=this.checkboxActivateSynonyms.checkFlag,a.synonyms=t.is(this.newSynonymsToStore)?this.newSynonymsToStore:this.storedSynonyms,e.search_synonyms=a},onResetTab:function(e){if(t.is(e)){var a=e.activateSnonyms;this.storedSynonyms=e.synonyms,this.checkboxActivateSynonyms.checkFlag=a,t.is(this.storedSynonyms)&&(this.fileChooser.elements.textfield.placeholder=o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.override"))}else this.fileChooser.elements.textfield.placeholder=o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.new"),this.checkboxActivateSynonyms.checkFlag=!1,this.storedSynonyms=null;this.fileChooser.clear(),this.importButton.disable()},_showAlert:function(e,t){var a=s.createWdgAlert();a.inject(widget.body,"top"),a.add({className:t,message:e})},_readFileAsText:function(e){"undefined"!=typeof FileReader&&(this.jsonReader=new FileReader,this.jsonReader.readAsText(e),this.importButton.enable())},_confirmAndReadFileAsText:function(e){var t=this;i.modal({title:o.get("GeneralTab.SearchSynonyms.warning.header"),content:o.get("GeneralTab.SearchSynonyms.warning.body"),CB:[{buttonKind:"YES",label:o.get("GeneralTab.SearchSynonyms.warning.button.Yes"),function:()=>{t._readFileAsText(e),i.destroyModal()}},{buttonKind:"no",label:o.get("GeneralTab.SearchSynonyms.warning.button.No"),function:()=>{t.fileChooser.clear(),t.importButton.disable(),i.destroyModal()}}]})},_setBrowseFileState:function(e){!0===e?this.divFileChooserSpan.removeClassName("search_center_disable"):this.divFileChooserSpan.addClassName("search_center_disable")}}})),define("DS/SearchControlCenter/scripts/ControlledVocabulary/ControlledVocabularyServices",["UWA/Core","UWA/Promise","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/WAFData/WAFData","DS/SNInfraUX/SearchUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(e,t,a,r,n,i,o){"use strict";return{_tenantOntologies:{},_tenantCommunities:{},_fetchSwymCommunities:function(e,t){var a=this;let r=i.getPlatformID(),n=this._tenantCommunities[r];return n||(n=new Promise((function(e){a._apiCalltoFetchSwymCommunities((function(t){e(t)}),(function(t){e([])}))})),this._tenantCommunities[r]=n),n},_apiCalltoFetchSwymCommunities:function(t,a){let s=i.getPlatformID();o.getServiceUrl({serviceName:"3DSearch",platformId:s,onComplete:function(i){!function(i){var o={label:"3DSearch-"+n.getUserId()+"-"+(new Date).getTime(),query:'[ds6w:type]:"swym:Community"',with_nls:!1,with_synthesis:!1,with_synthesis_hierarchical:!1,with_indexing_date:!1,select_file:[],source:["swym"],select_predicate:["ds6w:label"],tenant:s,nresults:1e3,refine:{},specific_source_parameter:{}},l={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:e.Json.encode(o),url:i+"/search",onComplete:function(e){try{e=JSON.parse(e)}catch(t){e=t}return t(e.results)},onFailure:function(e){try{e=JSON.parse(e)}catch(t){e=t}return a(e)}};r.authenticatedRequest(l.url,l)}(i)},onFailure:function(){a("FAILED to retrieve 3DSearch url for tenant")}})},_fetchOntologies:function(){let e=this,t=i.getPlatformID();var a=this._tenantOntologies[t];return a||(a=new Promise((function(t){e._apiCalltoFetchOntologies((function(e){t(e)}),(function(e){t([])}))})),this._tenantOntologies[t]=a),a},_apiCalltoFetchOntologies:function(e,t){var a=i.getPlatformID();o.getServiceUrl({serviceName:"ontology",platformId:a,onComplete:function(a){!function(a){var n={method:"GET",headers:{Accept:"application/json"},url:a+"/3drdfpersist/resources/v1/ontologies",onComplete:function(t){try{t=JSON.parse(t)}catch(e){t=e}return e(t)},onFailure:function(e){try{e=JSON.parse(e)}catch(t){e=t}return t(e)}};r.authenticatedRequest(n.url,n)}(a)},onFailure:function(){resolve([])}})}}})),define("DS/SearchControlCenter/scripts/ControlledOntology/OntologyDatasetsHelpers",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Promise","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/Api/SearchApi","DS/SNInfraUX/SearchRessources","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/Logger","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/SNInfraUX/SearchSettings","DS/SearchControlCenter/scripts/SearchControlCenterServices","text!DS/SearchControlCenter/assets/Ontology_Datasets.json","text!DS/SearchControlCenter/assets/Ontology_Datasets_user.json"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_,m,f){"use strict";let C=t.singleton(a,{_treeDocument:null,_distributionServiceURLPromise:null,_ontologyServiceURLPromise:null,_urldistribution:"/3drdfpersist/governance/v3/datasets/",_distribution:"/distributions?mask=standard",_urlontology:"/3drdfklet/resources/v2/ontologies/concepts?recurse=all&relation=broaderOf&offset=0&applicativeId=",_testQA:h.getOption("allowEnterpriseDictionaryModification"),init:function(){this._distributionServiceURLPromise=C._getSericeURLPromise("lakegovernance"),this._ontologyServiceURLPromise=C._getSericeURLPromise("ontology"),this._treeDocument=new o({useAsyncPreExpand:!0,shouldAcceptDrag:function(){return!1},shouldAcceptDrop:function(){return!1}})},buildSearchResults:function(t){let a=this;e.is(t)&&e.is(t.onComplete,"function")&&(e.is(a._treeDocument)&&e.is(a._treeDocument.destroy,"function")&&(a._treeDocument.destroy(),a._treeDocument=null),a._treeDocument=new o({useAsyncPreExpand:!0,shouldAcceptDrag:function(){return!1},shouldAcceptDrop:function(){return!1}}),g.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_buildSearchResults"),a._getResultPromise().then((async function(r){if(g.log("response OK"),a._treeDocument.prepareUpdate(),r.length>0){let t=JSON.parse(r);if(e.is(t.datasets)&&Array.isArray(t.datasets)){t.datasets.sort(((e,t)=>{const a=e.title?.toLowerCase()||"",r=t.title?.toLowerCase()||"";return a.localeCompare(r)})),console.log("Sorted datasets:",t.datasets.map((e=>e.title)));for(const r of t.datasets)if("dataset"===r["@type"]){let t={},n="",i=r.creator.substring(r.creator.indexOf(":")+1),o=new Date(r.modificationDate).toDateString();const l=await a._getCreatorInfo(i);e.is(l.results)&&l.results.forEach((e=>{e.attributes.forEach((e=>{"ds6w:label"===e.name&&(n=e.value)}))})),t.id=r["@id"],t.label=r.title+" | "+o+" | "+n,t.title=r.title,t.description=r.description,t.tooltip=r.description,t.creator=n,t.modificationdate=r.modificationDate;let c=new s(t);a._treeDocument.addRoot(c)}}}a._treeDocument.pushUpdate(),t.onComplete.call(void 0,a._treeDocument),g.groupEnd()}),(function(){if(g.log("response KO"),!0===a._testQA){require(["text!DS/SearchControlCenterPO/assets/DataSetOntology_tst.json"],(function(r){let n=JSON.parse(r);if(e.is(n,"array")){let r=n.length;a._treeDocument.prepareUpdate();for(let e=0;e<r;e++){let t=new s({id:n[e].dataset,label:n[e].datasetTitle});a._treeDocument.addRoot(t)}a._treeDocument.pushUpdate(),e.is(t.onFailure,"function")&&t.onFailure.call(void 0,a._treeDocument)}}))}g.groupEnd()})))},setselected:function(t){let a=this;if(!e.is(t,"array")||!e.is(a._treeDocument))return;let r=!1;a._treeDocument.prepareUpdate();let n=t.length,i=a._treeDocument.getRoots(),o=i.length;for(let a=0;a<n;a++){let n=t[a],s=n&&n.datasetTitle;if(e.is(s)&&s.length)for(let e=0;e<o;e++){let t=i[e];t&&t._options.label===s&&(t.select(),e=o,r=!0)}}return a._treeDocument.pushUpdate(),r},getConceptsOfConcept:function(t){if(e.is(t)&&e.is(t.onComplete,"function")&&e.is(t.applicativeId)){let a=this;C._getontologySericeURLPromise().then((function(r){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(a,r){let n=JSON.parse(a);e.is(n)&&t.onComplete.call(void 0,n)},onFailure:function(e){g.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::getConceptsOfConcept onFailure: ",e)}},o=r+a._urlontology+t.applicativeId;n.authenticatedRequest(o,i)}),(function(){reject("Failed to retireve distribution service url")}))}},getDataSetStructure:function(t){let a=this;if(g.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::getDataSetStructure"),!e.is(a._treeDocument)||!e.is(t)||!e.is(t.onComplete,"function"))return void g.groupEnd();let r=a._treeDocument.getXSO().get(),n=r.length;if(n){let i,o,s,l=r[n-1];i=e.is(l._options.id)?l._options.id:void 0,null!=i&&(o=i.replace("<",""),s=o.replace(">",""));let c={id:l._options.id,object:l._options,onComplete:function(a){if(e.is(a,"object")){let e={dataset:l._options.id,applicativeId:s,datasetTitle:l._options.title,"session@id":a["@id"],sessionTitle:a.title,creator:l._options.creator,modificationdate:l._options.modificationdate,label:l._options.label};t.onComplete.call(void 0,e),g.log("onComplete: ",e),g.groupEnd()}},onFailure:function(){if(!0===a._testQA){require(["text!DS/SearchControlCenterPO/assets/DataSetOntology_tst.json"],(function(a){let r=JSON.parse(a);for(let a=0;a<r.length;a++){let n=r[a];if(n.datasetTitle===l._options.label){e.is(t.onFailure,"function")&&t.onFailure.call(void 0,n),g.log("onFailure: ",n);break}}}))}g.groupEnd()}};a._querydistributions(c)}else t.onComplete.call(void 0,void 0),g.groupEnd()},clean:function(){e.is(this._treeDocument)&&e.is(this._treeDocument.removeRoots,"function")&&this._treeDocument.removeRoots(),e.is(this._treeDocument)&&e.is(this._treeDocument.destroy,"function")&&(this._treeDocument.destroy(),this._treeDocument=null)},destroy:function(){this._parent(),e.is(this._treeDocument)&&e.is(this._treeDocument.destroy,"function")&&(this._treeDocument.destroy(),this._treeDocument=null)},_getResultPromise:function(){let t=this;return new r((function(a,r){g.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_getResultPromise");let i=t._getTenant();require(["DS/UWPClientCode/PublicAPI","DS/PlatformAPI/PlatformAPI"],(function(t,o){var s;if(t.getApplicationConfiguration("app.urls.registry")||o.getApplicationConfiguration("app.urls.registry"))s=t.getApplicationConfiguration("app.urls.registry")||o.getApplicationConfiguration("app.urls.registry");else{s=`${t.getApplicationConfiguration("app.urls.myapps")||o.getApplicationConfiguration("app.urls.myapps")}/resources/AppsMngtRegistry/`}s?(g.log("registryUrl found, registryUrl="+s),p.getServicesByPlatform({platforms:[i],services:["lakegovernance"],config:{url:s}}).then((function(t){if(g.log("i3DXCompassRegistryClient.getServicesByPlatform returns: "+JSON.stringify(t)),Array.isArray(t)&&t.length>0&&Array.isArray(t[0].services)&&t[0].services.length>0&&t[0].services[0].url){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(t){a(e.extend(t))},onFailure:function(e){r(e)}},o=t[0].services[0].url+"/3drdfpersist/governance/v3/datasets";n.authenticatedRequest(o,i)}else g.error("i3DXCompassRegistryClient.getServicesByPlatform did not provide data in expected format"),a([])}),(function(){g.error("i3DXCompassRegistryClient.getServicesByPlatform FAILED"),a([])}))):(g.error("FAILED to retrieve registryUrl"),a([]))}))}))},_getCreatorInfo:function(t){let a=this;return new r((function(r,n){g.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_getCreatorInfo");let i=e.extend(a._buildSearchQuery(t),{onComplete:function(t){r(e.extend(t))},onFailure:function(e){n(e)}});g.log("searchOptions: ",i),l.search(i),g.groupEnd()}))},_buildSearchQuery:function(t){let a=this,r={usersgroup:{additional_query:' AND ([ds6w:identifier]:"'+t+'" OR [ds6w:resourceUid]:"'+t+'")'},swym:{additional_query:' AND ( resourceid:"iam:'+t+'" OR [ds6w:resourceUid]:"'+t+'")'}},n=JSON.parse(f);if(e.is(n,"object")){let e=a._getTenant(),i=n.nresults?n.nresults:h.getOption("max_selection_for_selectall",{tenant:e});n.label="3DSearch-"+t+"-"+(new Date).getTime(),n.tenant=e,n.nresults=i,n.specific_source_parameter=r}return n},_querydistributions:function(t){if(g.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_querydistributions"),!e.is(t)||!e.is(t.id))return;let a=this;C._getdistributionSericeURLPromise().then((function(r){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(a,r){let n=JSON.parse(a);if(e.is(n,"object")){let a=n.distributions;if(e.is(a,"array")){let r=a.length,n=0;for(;n<r;n++){let r=a[n];e.is(r,"object")&&t.onComplete.call(void 0,r)}}}},onFailure:function(e){g.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_querydistributions onFailure: ",e),t.onFailure.call(void 0,e)}},o=r+a._urldistribution+t.id+a._distribution;n.authenticatedRequest(o,i)}),(function(){reject("Failed to retireve distribution service url")}))},_getSericeURLPromise:function(e){let t=this;return new r((function(a,r){let n=t._getTenant();i.getServiceUrl({serviceName:e,platformId:n,onComplete:function(e){e||!0===t._testQA?a(e):r()},onFailure:function(e){r(e)}})}))},_getdistributionSericeURLPromise:function(){return this._distributionServiceURLPromise},_getontologySericeURLPromise:function(){return this._ontologyServiceURLPromise},_getTenant:function(){return e.is(_.platformID)?_.platformID:u.getActiveTenant()}});return C})),define("DS/SearchControlCenter/scripts/ControlledVocabulary/SCCControlledVocabulary",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SearchControlCenter/scripts/ControlledVocabulary/ControlledVocabularyServices","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNResultUX/utils/ExternalComponentHelpers"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g){"use strict";return{communityOntologyMapping:[],render:function(e){this._parentDiv=e,this.renderControlledSection(this._parentDiv)},getTabInputsToStore:function(){return this.communityOntologyMapping},getInputFromStore:function(e){let t=this;e&&(this.communityOntologyMapping=e.slice(0)),this.ontologies&&0===Object.keys(this.ontologies).length&&empty.constructor===Object||t.divCreatedCategoriesSection&&(t.divCreatedCategoriesSection.empty(),t.communityOntologyMapping.forEach(((e,a)=>{t.renderMappingsRow(t.divCreatedCategoriesSection,e)})))},renderControlledSection:function(t){this.mainControlDivSection=e.create("div",{class:"search_center_main_div ",id:"control-vocab-main"}).inject(t);var a=e.create("div",{class:"",id:"control-vocab-title"}).inject(this.mainControlDivSection);e.create("p",{class:"control_vocab_text_heading",text:u.get("6WTagsFilter.ControlledVocab.title")}).inject(a),this.renderActivateControlVocab(this.mainControlDivSection),this.renderCommunitySection(this.mainControlDivSection)},renderActivateControlVocab:function(t){var a=this,r=e.create("div",{class:"search_center_general_display_flex search_center_margin",id:"activate-control-vocab"}).inject(t),i=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"activate-control_vocab-toggle"}).inject(r);this.checkboxActivateControlVocab=new n({type:"checkbox",label:u.get("6WTagsFilter.ControlledVocab.CheckBox.label"),className:"primary",touchMode:"true"}).inject(i);var o=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(r);o.setStyle("color","#b4b6ba"),o.addEventListener("mouseover",this._manageMouseOver,!1),o.addEventListener("mouseout",this._manageMouseOut,!1),g.popin(o,{trigger:"hover",position:"top",body:u.get("InstantSearch.Activate_Instant_Search.popover")}),this.checkboxActivateControlVocab.addEventListener("change",(function(e){a.toggleDisableStateOfInputFields()}))},toggleDisableStateOfInputFields:function(){1==this.checkboxActivateControlVocab.checkFlag?this.divCategoriesSection.removeClassName("search_center_disable"):this.divCategoriesSection.addClassName("search_center_disable")},renderCommunitySection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"control_vocab_category_section search_center_disable"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection),this.renderMappings(this.divCategoriesSection)},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("control_vocab_add_category_row_span"),a},_createCommunityControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new s;this.communityAutocomplete=new o({placeholder:u.get("6WTagsFilter.ControlledVocab.Community.title"),touchMode:!0,enableSearchFlag:!0,elementsTree:n,multiSearchMode:!1}).inject(r),this.communityAutocomplete.elements.container.setStyle("max-width","unset"),this.communityAutocomplete.addEventListener("change",this._onChangeCommunity.bind(this)),c._fetchSwymCommunities().then((function(e){t.is(e,"array")&&e.length?e.forEach(((e,t)=>{if(e.hasOwnProperty("attributes")){let t,a;e.attributes.filter((function(e){if("internal"==e.format&&"resourceid"==e.name){let a=e.value.split(":");t=a[a.length-1]}"attribute"==e.format&&"ds6w:label"==e.name&&(a=e.value)})),n.addRoot(new l({label:a,value:t}))}})):console.log("The fed search failed")}));var i=this;return this.selectedCommunity,this.communityAutocomplete.addEventListener("change",(function(){i.enableAddCategoryButton()})),this.communityAutocomplete},_onChangeCommunity:function(e){if(this.communityAutocomplete.value){let e=this.communityAutocomplete.value,t=this.communityOntologyMapping.filter((function(t){return t.id==e}));t&&t.length&&(this._updateCommunity=t[0].id,this.updateCategoryButton.elements.container.setStyle("display","inline-flex"),this.updateCategoryButton._disabledState=!1,this.updateCategoryButton.disabled=!1,this.addCategoryButton.elements.container.setStyle("display","none"))}else this.updateCategoryButton.elements.container.setStyle("display","none"),this.addCategoryButton.elements.container.setStyle("display","inline-flex")},_createOntologyControl:function(a){let r=this;var n=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),i=new s;return this.ontologyAutocomplete=new o({placeholder:u.get("6WTagsFilter.ControlledVocab.Ontology.title"),touchMode:!0,enableSearchFlag:!0,elementsTree:i}).inject(n),this.ontologyAutocomplete.elements.container.setStyle("max-width","unset"),this.ontologiesObj={},c._fetchOntologies().then((function(e){t.is(e,"array")&&e.length?(e.forEach(((e,t)=>{"ds6wclassifier:"!==e.shortURI&&e.hasOwnProperty("label")&&(r.ontologiesObj[e.shortURI]=e.label,i.addRoot(new l({label:e.label,value:e.shortURI})))})),r.getInputFromStore()):console.log("The failure is because:"+e)})),this.ontologyAutocomplete.addEventListener("change",(function(){r.enableAddCategoryButton()})),this.ontologyAutocomplete},renderDisableFreeTagging:function(t){var a=e.create("div",{class:"search_center_general_display_flex search_center_margin",id:"disable-free-tagging"}).inject(t),r=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"disable-free-tagging-toggle"}).inject(a);this.checkboxDisableFreeTagging=new n({type:"checkbox",label:u.get("6WTagsFilter.ControlledVocab.DisableFreeTagging.label"),className:"primary",touchMode:"true"}).inject(r);var i=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(a);i.setStyle("color","#b4b6ba"),i.addEventListener("mouseover",this._manageMouseOver,!1),i.addEventListener("mouseout",this._manageMouseOut,!1),g.popin(i,{trigger:"hover",position:"top",body:u.get("InstantSearch.Activate_Instant_Search.popover")})},enableAddCategoryButton:function(){this.communityAutoCompleteDiv.value&&this.ontologyAutoCompleteDiv.value&&this.ontologyAutoCompleteDiv.value.length?(this.addCategoryButton.disabled=!1,d.enableButtons()):this.addCategoryButton.disabled=!0},renderAddButtonCategoryRow:function(t){var a=this,n=e.create("div",{class:"search_center_div_uidisplay search_center_margin search_center_category_add_add",id:"add-btn-control_vocab"}).inject(t);this.addCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:u.get("InstantSearch.Category.Action.AddNewCategory")}).inject(n),this.updateCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:u.get("6WTagsFilter.ControlledVocab.UpdateButton.label")}).inject(n),this.updateCategoryButton.elements.container.setStyle("display","none"),this.addCategoryButton.getContent().addEventListener("buttonclick",a._onAddClick.bind(a)),this.updateCategoryButton.getContent().addEventListener("buttonclick",a._onAddClick.bind(a,!0))},_onAddClick:function(e){let t=this,a={type:"swym:Community"};if(this._updateCommunity){this.communityOntologyMapping.forEach((e=>{if(e.id==t._updateCommunity){if(t.ontologyAutoCompleteDiv.selectedItems.length){t.ontologyAutoCompleteDiv.value.forEach(((a,r)=>{-1==e.ontologies.indexOf(a)&&e.ontologies.push(t.ontologyAutoCompleteDiv.value[r])}))}e.freeInput=t.checkboxDisableFreeTagging.checkFlag}}))}else a.id=t.communityAutoCompleteDiv.value,a.name=t.communityAutoCompleteDiv.selectedItems.getAttributeValue("label"),a.ontologies=t.ontologyAutoCompleteDiv.value,a.freeInput=t.checkboxDisableFreeTagging.checkFlag,t.communityOntologyMapping.push(a);console.log("The community mappings:"+JSON.stringify(t.communityOntologyMapping)),t.communityAutoCompleteDiv.value="",t.ontologyAutoCompleteDiv.value=[],t.checkboxDisableFreeTagging.checkFlag=!1,t.updateCategoryButton.elements.container.setStyle("display","none"),t.addCategoryButton.elements.container.setStyle("display","inline-flex"),this._updateCommunity=null,t.divCreatedCategoriesSection.empty(),t.communityOntologyMapping.forEach(((e,a)=>{t.renderMappingsRow(t.divCreatedCategoriesSection,e)}))},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{class:"search_center_add_category_section"}).inject(t);var a=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),r=this._createCommunityControl({class:"control_vocab_community_title",divRow:a}),n=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection}),i=this._createOntologyControl({class:"control_vocab_ontology_title",divRow:n}),o=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection});this.renderDisableFreeTagging(o);this.communityAutoCompleteDiv=r,this.ontologyAutoCompleteDiv=i,this.renderAddButtonCategoryRow(this.divAddCategoriesSection)},_createCategoryRowSpan:function(t){var a=e.create("div",{class:t.class}).inject(t.parentDiv);return a.addClassName("search_center_category_row_span"),a},_createCategoryRowHtmlDiv:function(t){var a=e.create("div",{class:t.class,html:this._getCategoryRowHtml(t)}).inject(t.parentDiv);return a.addClassName("search_center_category_row_html"),a},_getCategoryRowHtml:function(e){var t=this;let a=e.mappingInfo.ontologies.map((e=>t.ontologiesObj[e]));return e.mappingInfo.name+" - "+a},renderMappings:function(t){let a=this;this.divCreatedCategoriesSection=e.create("div",{class:"search_center_created_categories_section"}).inject(t),this.communityOntologyMapping&&this.communityOntologyMapping.length&&(this.divCreatedCategoriesSection.empty(),this.communityOntologyMapping.forEach(((e,t)=>{a.renderMappingsRow(a.divCreatedCategoriesSection,e)})))},renderMappingsRow:function(e,t){var a=this._createCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",parentDiv:e});this._createCategoryRowHtmlDiv({class:"search_center_general_tab_div search_center_margin",parentDiv:a,mappingInfo:t})}}})),define("DS/SearchControlCenter/scripts/SearchcontrolGeneralTabCategories",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/Controls/LineEditor","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/SNVocabAccess","DS/SNInfraUX/SearchResultCategories","DS/SearchControlCenter/scripts/SearchControlCenterServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/SearchControlCenter_defaults.json","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchPreferences","DS/SNResultUX/utils/ExternalComponentHelpers"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_,m,f,C,y){"use strict";var v="fake:dashboard",b=!1,S={_categories:null,_parentDiv:null,_vocabPromise:{},render:function(e){this._parentDiv=e},loadCategories:function(){if(S._categories.suggestion=S._categories.suggestion||{},!t.is(S._categories.suggestion.list,"array")){var e=JSON.parse(_);S._categories.suggestion.list=e.result_categories.suggestion.list.concat([])}S._categories.suggestion.list=S._categories.suggestion.list||[];for(var a=S._categories.suggestion.list.length-1;a>=0;a--)!1===S._categories.suggestion.list[a].active&&S._categories.suggestion.list.splice(a,1);return S._categories},getTabInputsToStore:function(e){return-1!==["iphone","ipad","android"].indexOf(f.getDeviceCategory())?(C.setItem("InstantSearchSCC",!1),void C.commit()):m.getOption("deactivate_FUN108944")?void 0:(e.result_categories=S._categories,e)},onResetTab:function(e){if(-1!==["iphone","ipad","android"].indexOf(f.getDeviceCategory()))return C.setItem("InstantSearchSCC",!1),void C.commit();m.getOption("deactivate_FUN108944")||(this._categories=t.is(e.result_categories)?t.clone(e.result_categories):{},this.loadCategories(),this.renderInstantSearchSection(this._parentDiv),this.setCategoriesSectionEnableState())},renderInstantSearchSection:function(t){this.divInstantSearchSection&&this.divInstantSearchSection.destroy(),this.divInstantSearchSection=e.create("div",{class:"",id:"general-tab-instantsearch-section"}).inject(t);var a=e.create("div",{class:"search_center_add_category_bottom search_center_div_left main_Div_Padding",id:"general-tab-instantsearch-title"}).inject(this.divInstantSearchSection);e.create("p",{class:"search_center_text_heading",text:h.get("General.Instant_search.Title")}).inject(a),this.renderCategoriesSection(this.divInstantSearchSection)},renderAdduton:function(a){var n=this,i=e.create("div",{class:"outer-div-search-suggest-categories search_center_div_left ",id:"general-tab-AddCategoriesButtonspan"}).inject(a),o=e.create("div",{class:"flex-container",id:"flex-container"}).inject(i),s=e.create("div",{class:"title-section",id:"general-tab-AddCategoriesButton-title"}).inject(o);e.create("p",{class:"search_center_text_heading",text:h.get("General.search_suggest.Title")}).inject(s);var l=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(o);y.popin(l,{trigger:"hover",position:"top",body:h.get("InstantSearch.Activate_Application_Category.popover")}),this.divAddCategoryButton=e.create("div",{class:"button-section",id:"add-search-result-category-add-button"}).inject(o),this.addnewCategoryButton=new r({displayStyle:"lite",label:"lite displayStyle",icon:{iconName:"plus",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(this.divAddCategoryButton),t.is(S._categories.suggestion.list)&&S._categories.suggestion.list.length>=3&&S.divAddCategoryButton.addClassName("search_center_disable"),this.addnewCategoryButton.getContent().addEventListener("buttonclick",(function(){n.divAddCategoriesSection.show(),n.divAddCategoriesSection.removeClassName("search_center_disable")}))},renderCategoriesSection:function(t){(this.mainSearchSuggestAddButton||this.divAddCategoriesSpan||this.divCategoriesSection)&&(this.mainSearchSuggestAddButton.remove(),this.divAddCategoriesSpan.remove(),this.divCategoriesSection.remove()),t||(t=this._parentDiv),this.mainSearchSuggestAddButton=e.create("div",{class:"search_center_category_section"}).inject(t),this.divAddCategoriesSpan=e.create("div",{class:"search_center_category_section"}).inject(t),this.divCategoriesSection=e.create("div",{class:"search_center_category_section"}).inject(t),this.renderAdduton(this.mainSearchSuggestAddButton),this.renderAddCategorySection(this.divAddCategoriesSpan),this.renderCategories(this.divCategoriesSection)},renderCategories:function(t){var r=this;return this._renderedCategories=[],this.divCreatedCategoriesSection=e.create("div",{class:"search_center_div_left  search_center_created_categories_section"}).inject(t),new a((function(e,t){var n=r.loadCategories(),i=[];n.suggestion.list.forEach((function(e,t){i.push(r.ensureVocabLoaded(e.source))}));var o=[];a.all(i).then((function(t){n.suggestion.list.forEach((function(e,a){o.push(r.renderCategoryRow(e,r.divCreatedCategoriesSection,t[a]))})),a.all(o).then(e)}))}))},setCategoriesSectionEnableState:function(){this.divCategoriesSection.removeClassName("search_center_disable")},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("search_center_add_category_row_span"),a},_createCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("search_center_category_row_span"),a},_createCategoryTitleControl:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.divRow),r=new s({placeholder:h.get("InstantSearch.Title_Instant_Search"),touchMode:!0}).inject(a);r.elements.container.setStyle("display","grid"),r.elements.container.setStyle("max-width","unset");var n=this;return r.addEventListener("change",(function(){var e=r.value.trim(),a=n._validateCategoryTitle(e,t.category_id);if(e&&a){if(!r.elements.container.hasClassName("result_category_input_error")){r.elements.container.addClassName("result_category_input_error");var i=g.createWdgAlert();i.inject(r.elements.container,"top");var o=h.get("InstantSearch.Category.DuplicateTitle",{title:a});i.add({className:"warning applyChangesAlert",message:o})}}else r.elements.container.removeClassName("result_category_input_error");n.enableAddCategoryButton()})),r},_createCategoryDatasourceControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new i({placeholder:h.get("Choose_data_source"),touchMode:!0,enableSearchFlag:!0,elementsList:[]}).inject(r);n.elements.container.setStyle("width","100%"),this.getDataSourceList().then((function(e){if(n.elementsList=e,t.is(a.selectedSource)){var r=e.indexOf(g.getDatasourceDisplayName(a.selectedSource));r>=0&&(n.selectedIndex=r)}}));var o=this;return n.addEventListener("change",(function(){o.enableAddCategoryButton()})),n},_createCategoryTypeControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new o({placeholder:h.get("Choose_type"),touchMode:!0,disabled:!0,enableSearchFlag:!0}).inject(r);function i(e,t){var a=[];return e.getChildren().forEach((function(e,r){t.indexOf(e.getAttributeValue("uri"))>=0&&a.push(e)})),a}function s(e){if(e.getChildren().length>0)n.elementsTree=e,n.disabled=!1,1==e.getChildren().length&&(n.selectedItems=i(e,e.getChildren()[0].getAttributeValue("uri")?[e.getChildren()[0].getAttributeValue("uri")]:[]),n.disabled=!0);else{n.disabled=!0;var t=g.createWdgAlert(),a=h.get("SearchType.NoTypesWarning");t.add({className:"warning applyChangesAlert",message:a})}l._promiseTypeListLoaded&&l._promiseTypeListLoaded.resolve(e)}n.elements.container.setStyle("max-width","unset");var l=this,c=a.datasourceComboBox;return c&&c.addEventListener("change",(function(){var e=g.getDatasourceInternalName(c.currentValue);l.ensureVocabLoaded(e).then(s)})),a.vocabTypesTreeDocument&&(s(a.vocabTypesTreeDocument),t.is(a.selectedTypes,"array")&&(n.selectedItems=i(a.vocabTypesTreeDocument,a.selectedTypes))),n.addEventListener("change",(function(){var e=n.selectedItems.length,t=m.getOption("instant_search_category_max_types");if(e>t){if(!n.elements.container.hasClassName("result_category_input_error")){n.elements.container.addClassName("result_category_input_error");var a=g.createWdgAlert();a.inject(n.elements.container,"top");var r=h.get("InstantSearch.Category.TypeCountMax",{max_count:t});a.add({className:"warning applyChangesAlert",message:r})}}else n.elements.container.removeClassName("result_category_input_error");l.enableAddCategoryButton()})),n},_getCategoryRowTitleHtml:function(e){return u.getCategoryTitleNls(e)},_getCategoryRowTitleAndSourceSeparatorHtml:function(){return" - "},_getCategoryRowSourceAndTypesSeparatorHtml:function(){return" - "},_getCategoryRowTypesSeparatorHtml:function(){return", "},_getCategoryRowSourceHtml:function(e){return"["+(g.getDatasourceDisplayName(e.source)||"Source Not Found")+"]"},_getCategoryRowTypesHtml:function(e,a){var r=this,n="";return t.is(e.types,"array")&&a.getChildren().forEach((function(t,a){var i=t.getAttributeValue("uri");e.types.indexOf(i)>=0?(n&&(n+=r._getCategoryRowTypesSeparatorHtml()),n+=g.getTypesDisplayName(e.source,i)):i==v&&(n+=t.getAttributeValue("nls"))})),n},_getCategoryRowHtml:function(e){var t=this,a=t._getCategoryRowTitleHtml(e.category);return a+=t._getCategoryRowTitleAndSourceSeparatorHtml(e),a+=t._getCategoryRowSourceHtml(e.category),a+=t._getCategoryRowSourceAndTypesSeparatorHtml(e),a+=t._getCategoryRowTypesHtml(e.category,e.model)},_createCategoryRowHtmlDiv:function(t){var a=e.create("div",{class:t.class,id:t.id,html:this._getCategoryRowHtml(t)}).inject(t.parentDiv);return a.addClassName("search_center_category_row_html"),a},_setSelectedDatasource:function(e){var a=this;this.getDataSourceList().then((function(r){if(a.datasourceComboBox.elementsList=r,t.is(e)){var n=r.indexOf(g.getDatasourceDisplayName(e));n>=0&&(a.datasourceComboBox.selectedIndex=n)}}))},_setSelectedTypes:function(e,t){var a=[];e.getChildren().forEach((function(e,r){t.indexOf(e.getAttributeValue("uri"))>=0&&a.push(e)})),this.typeAutocomplete.selectedItems=a},_setCategoryInEditMode:function(e){b=!0;var t=this;e.parentDiv.addClassName("search_category_row_in_edit"),t._categoryInMod=e.category.id,t._disableDeleteModifyAllCategories(),t.categoryTitleLine.value=u.getCategoryTitleNls(e.category),t._promiseTypeListLoaded=a.deferred(),t._promiseTypeListLoaded.promise.then((function(a){t._setSelectedTypes(a,e.category.types)})),t._setSelectedDatasource(e.category.source),t.cancelAddCategoryButton.show(),t.saveCategoryButton.show(),this.divAddCategoriesSection.show(),this.addButton.hide(),this.divAddCategoriesSection.removeClassName("search_center_disable")},_createCategoryRowActionsDiv:function(a){var r=this,n=e.create("div",{class:a.class,id:a.category.id+"main"}).inject(a.parentDiv);return n.addClassName("search_result_category_row_actions"),e.create("div",{class:"fonticon fonticon-1x fonticon-pencil search_result_category_row_action"}).inject(n).addEventListener("click",(function(){r._setCategoryInEditMode(a)}),!1),S.deleteAction=e.create("div",{class:"fonticon fonticon-trash search_result_category_row_action",id:a.category.id}).inject(n),S.deleteAction.addEventListener("click",(function(){r._removeCategoryModel(a.category.id),g.enableButtons();let e=a.category.id,n=document.getElementById(e);n=n.parentElement.parentElement,n.destroy(),t.is(S._categories.suggestion.list)&&S._categories.suggestion.list.length<=1&&S.deleteAction.addClassName("search_center_disable"),t.is(S._categories.suggestion.list)&&S._categories.suggestion.list.length>=3?S.divAddCategoryButton.addClassName("search_center_disable"):S.divAddCategoryButton.removeClassName("search_center_disable")}),!1),t.is(S._categories.suggestion.list)&&S._categories.suggestion.list.length<=1&&S.deleteAction.addClassName("search_center_disable"),n},renderCategoryRow:function(e,t,r){var n=this;return new a((function(a,i){var o=n._createCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"search-result-category-"+e.id,parentDiv:t});n._createCategoryRowHtmlDiv({class:"search_center_general_tab_div search_center_margin",id:"search-result-category-html-"+e.id,parentDiv:o,category:e,model:r}),n._createCategoryRowActionsDiv({class:"search_center_margin",model:r,category:e,parentDiv:o}),n._renderedCategories.push({id:e.id,div:o}),a()}))},enableAddCategoryButton:function(){0==b&&(this.categoryTitleLine.value.trim()&&!this.categoryTitleLine.elements.container.hasClassName("result_category_input_error")&&this.datasourceComboBox.currentValue&&!this.typeAutocomplete.elements.container.hasClassName("result_category_input_error")?(this.addButton.disabled=!1,this.divAddCategoryButton.removeClassName("search_center_disable")):(this.addButton.disabled=!0,this.divAddCategoryButton.addClassName("search_center_disable"))),1==b&&(this.categoryTitleLine.value.trim()&&!this.categoryTitleLine.elements.container.hasClassName("result_category_input_error")&&this.datasourceComboBox.currentValue&&!this.typeAutocomplete.elements.container.hasClassName("result_category_input_error")?this.saveCategoryButton.disabled=!1:this.saveCategoryButton.disabled=!0)},disable_datasourceComboBox:function(t){var a=this,n=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"add-search-result-category"}).inject(t),i=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex search_center_category_add_cancel",id:"add-search-result-category-cancel-button"}).inject(n);this.cancelAddCategoryButton=new r({touchMode:!0,disabled:!1,label:h.get("InstantSearch.Category.Action.CancelAddCategory")}).inject(i),this.cancelAddCategoryButton.getContent().addEventListener("buttonclick",(function(){a.renderCategoriesSection(),b=!1})),this.cancelAddCategoryButton.hide();var o=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex search_center_category_add_add",id:"save-search-result-category-add-button"}).inject(n);this.saveCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:h.get("InstantSearch.Category.Action.SaveCategory")}).inject(o),o.setStyle("padding","1px 10px 1px 10px"),this.saveCategoryButton.hide();var s=m.getOption("instant_search_category_max_categories");this._categories.suggestion.list.length>=s&&(t.addClassName("search_center_disable"),a.divAddCategoriesSection.hide()),this.saveCategoryButton.getContent().addEventListener("buttonclick",(function(){function e(e){a.typeAutocomplete.selectedItems&&a.typeAutocomplete.selectedItems.forEach((function(t,a){var r=t.getAttributeValue("uri");r&&(r==v&&(r="Dashboard",e.match_on="context_name"),e.types.push(r))}))}if(a._categoryInMod){var t={id:a._categoryInMod,custom:!0,name:a.categoryTitleLine.value,source:g.getDatasourceInternalName(a.datasourceComboBox.currentValue),types:[]};e(t),a._replaceCategoryModel(t)}else{var r={id:(new Date).getTime(),custom:!0,name:a.categoryTitleLine.value,source:g.getDatasourceInternalName(a.datasourceComboBox.currentValue),types:[]};e(r),a._addCategoryModel(r)}g.enableButtons(),a.renderCategoriesSection(),b=!1}))},renderAddCategorySection:function(t){var a=this;this.divAddCategoriesSection=e.create("div",{class:" search_center_div_left search_center_add_category_section"}).inject(t);var n=this._createAddCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),i=this._createCategoryTitleControl({class:"search_center_category_title",id:"search-result-category-title",divRow:n}),o=a._createCategoryDatasourceControl({class:"search_center_category_source",id:"add-search-result-category-source-combo",divRow:n});o.disabled=!1;var s=this._createAddCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection}),l=this._createCategoryTypeControl({class:"search_center_category_types",id:"add-search-result-category-type-combo",divRow:s,datasourceComboBox:o});let c=e.create("div",{class:"search_center_margin search_center_category_add",id:"addButtonSearchSuggest"}).inject(this.divAddCategoriesSection);this.addButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:h.get("InstantSearch.Category.Action.AddNewCategory")}).inject(c),this.addButton.getContent().addEventListener("buttonclick",(function(){function e(e){a.typeAutocomplete.selectedItems&&a.typeAutocomplete.selectedItems.forEach((function(t,a){var r=t.getAttributeValue("uri");r&&(r==v&&(r="Dashboard",e.match_on="context_name"),e.types.push(r))}))}if(a._categoryInMod){var t={id:a._categoryInMod,custom:!0,name:a.categoryTitleLine.value,source:g.getDatasourceInternalName(a.datasourceComboBox.currentValue),types:[]};e(t),a._replaceCategoryModel(t)}else{var r={id:(new Date).getTime(),custom:!0,name:a.categoryTitleLine.value,source:g.getDatasourceInternalName(a.datasourceComboBox.currentValue),types:[]};e(r),a._addCategoryModel(r)}g.enableButtons(),a.renderCategoriesSection()})),this.divAddCategoriesSection.hide(),this.categoryTitleLine=i,this.datasourceComboBox=o,this.typeAutocomplete=l,this._categoryInMod=null,a.disable_datasourceComboBox(this.divAddCategoriesSection)},_removeCategoryModel:function(e){for(var t=0;t<this._categories.suggestion.list.length;t++)if(this._categories.suggestion.list[t].id==e){this._categories.suggestion.list.splice(t,1);break}},_replaceCategoryModel:function(e){for(var t=0;t<this._categories.suggestion.list.length;t++)if(this._categories.suggestion.list[t].id==e.id){this._categories.suggestion.list.splice(t,1,e);break}},_validateCategoryTitle:function(e,t){for(var a=0;a<this._categories.suggestion.list.length;a++){var r=u.getCategoryTitleNls(this._categories.suggestion.list[a]);if(r.toLowerCase()==e.toLowerCase()&&(!this._categoryInMod||this._categoryInMod&&this._categories.suggestion.list[a].id!=this._categoryInMod))return r}return!1},_addCategoryModel:function(e){this._categories.suggestion.list.push(e),g.trackerPublisher("SearchsSuggestedCategories",{pd1:e.name,pd2:e.source,pd3:e.types})},_disableDeleteModifyAllCategories:function(){S._renderedCategories.forEach((function(e,t){e.div.addClassName("search_center_disable")}))},ensureVocabLoaded:function(e){var r=this;return this._vocabPromise[e]||(this._vocabPromise[e]=new a((function(a,n){r.getDataSourceList().then((function(){var r={};r.vocabId=g._datSourceToVocabID[e],r.tenantId=g.platformID,d.loadVocabularyClasses(r,(function(r){var n=[],i={},o=new l;if(o.prepareUpdate(),"dashboard"==e&&0==r.classInfos.length&&(r.classInfos=[{nlsName:h.get("Type.dashboard"),uri:v}]),"drive"==e){var s=new c({label:""});o.addRoot(s)}else for(let e=0;e<r.classInfos.length;e++)if(t.is(r.classInfos[e].nlsName,"string")&&t.is(r.classInfos[e].uri)){n.push(r.classInfos[e].nlsName),i[r.classInfos[e].uri]=r.classInfos[e].nlsName;s=new c({label:r.classInfos[e].nlsName,grid:{nls:r.classInfos[e].nlsName,uri:r.classInfos[e].uri}});o.addRoot(s)}o.pushUpdate(),g.updateTypesMapping(e,i),a(o)}))}))}))),this._vocabPromise[e]},getDataSourceList:function(){function e(e){for(var t=-1,a=e.concat(),r=0;r<a.length;r++)if("other"===g.getDatasourceInternalName(a[r])){t=r;break}return t>-1&&a.splice(t,1),a}return this._datasourceListPromise||(this._datasourceListPromise=new a((function(a,r){var n=m.getOption("dataSourcesToFilterFromAdvancedSearch");delete n.dashboard;var i=g.getDataSourceList({dataSourcesToFilterFromAdvancedSearch:n});t.is(i,"array")?a(e(i)):i.then((function(t){a(e(t))}))}))),this._datasourceListPromise}};return S})),define("DS/SearchControlCenter/scripts/ControlledOntology/SCCControlledOntology",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/WUXAutoComplete/AutoComplete","DS/Controls/ComboBox","DS/SNInfraUX/SearchSettings","DS/SearchControlCenter/scripts/ControlledOntology/OntologyDatasetsHelpers","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchControlCenterFetchService","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],(function(e,t,a,r,n,i,o,s,l,c,d,u){"use strict";return{_structureToStore:[],_structureStored:null,_mainControlDivSection:null,_warningReport:"",_deletedConcepts:!1,_hierarchicalFatherMovement:!1,_duplicateConcepts:!1,render:function(e){this._parentDiv=e,this.renderControlledSection(this._parentDiv)},destroy:function(){this._parent(),t.is(s)&&t.is(s.destroy,"function")&&(s.destroy(),s=null)},getTabInputsToStore:function(){let e=[];if(0===this._structureToStore.length){let a={facetID:"SearchControl_6WTags"},r=c.getSettingsJSONFromTabName(a);r.hasOwnProperty("enterprise_ontology")&&t.is(r.enterprise_ontology.dataset,"array")&&r.enterprise_ontology.dataset.length>0&&(e=[{dataset:r.enterprise_ontology.dataset[0].dataset,applicativeId:r.enterprise_ontology.dataset[0].applicativeId,datasetTitle:r.enterprise_ontology.dataset[0].datasetTitle,"session@id":r.enterprise_ontology.dataset[0]["session@id"],sessionTitle:r.enterprise_ontology.dataset[0].sessionTitle,creator:r.enterprise_ontology.dataset[0].creator,modificationdate:r.enterprise_ontology.dataset[0].modificationdate,label:r.enterprise_ontology.dataset[0].label}]),this._structureToStore=e}return this._structureToStore},getInputFromStore:function(e){!0===o.getOption("allowEnterpriseDictionaryModification")?(this._structureToStore=[],this._structureStored=e):t.is(e,"array")&&0!==e.length&&(this._structureStored=e,this._structureToStore=e)},getSelectedDatasetTitle:function(){return this.datasetAutocomplete.value},onUpdateUI:function(){let e=!1;(this._structureStored&&this._structureStored.length||this._structureToStore&&this._structureToStore.length)&&(e=!0),!0===e||(this.datasetAutocomplete.value="",this.datasetAutocomplete.elementsTree=void 0,s.clean(),this.buildSearchResults())},renderControlledSection:function(t){this._mainControlDivSection=e.create("div",{class:"search_center_main_div",id:"control-Ontology-main"}).inject(t);e.create("div",{class:"",id:"control-Ontology-title"}).inject(this._mainControlDivSection);this.renderDataSetSection(this._mainControlDivSection)},renderDataSetSection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"control_vocab_category_section"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection)},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{}).inject(t);var a=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),r=this._createDatasetControl({class:"control_vocab_community_title",divRow:a});this.datasetAutoCompleteDiv=r},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("control_vocab_add_category_row_span"),a},_createDatasetControl:function(t){let a=this;var r=e.create("div",{class:t.class,id:"Ontology_DataSet_Combo"}).inject(t.divRow);return a.datasetAutocomplete=new i({placeholder:u.get("6WTagsFilter.ControlledOntology.Dataset.title"),touchMode:!0,enableSearchFlag:!0,allowFreeInputFlag:!1,multiSearchMode:!0===o.getOption("allowEnterpriseDictionaryModification")}).inject(r),a.datasetAutocomplete.elements.container.setStyle("width","100%"),a.datasetAutocomplete.addEventListener("change",a._onChangeDataset.bind(a)),a.buildSearchResults(),a.datasetAutocomplete},buildSearchResults:function(){let e=this,a={onComplete:function(a){t.is(a)&&(e.datasetAutocomplete.elementsTree=a)},onFailure:function(a){t.is(a)&&(e.datasetAutocomplete.elementsTree=a)}};s.buildSearchResults(a)},_onChangeDataset:function(e){let a=this,r=!0,n=a.datasetAutocomplete.value;if(t.is(n,"array")){r=!1;let e=n.length;if(0===e)return void(a._structureToStore=[]);let t=!1,i=a._structureToStore.length;if(e<i)for(let r=i-1;r>=0;r--){let i=a._structureToStore[r];t=!0;for(let a=0;a<e;a++){if(n[a]===i.datasetTitle){t=!1;break}}!0===t&&(a._structureToStore.splice(r,1),r=-1)}if(!0===t)return}let i={onComplete:function(e){a._warningReport="",a._deletedConcepts=!1,a._hierarchicalFatherMovement=!1,a._duplicateConcepts=!1,a._addOrnotInDataSetStructure(e,r),l.getOntologyConceptsFromSessionId(a._structureToStore).then((function(){let e=l.getRenamedConcepts();e&&(a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig10")+"<br><br>",e.forEach((function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.original_concept.get("id")+" is renamed from "+e.original_concept.get("label")+" to "+e.renamed_concept.get("label")+"<br>"})));let r=l.getDeprecatedConcepts();r&&(a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig9")+"<br><br>",r.forEach((function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"})));let n=l.getUnDeprecatedConcepts();n&&(a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig8")+"<br><br>",n.forEach((function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"})));let i=l.getNewConcepts();t.is(i)&&(a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig7")+"<br><br>",i.forEach((function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"})));let o=l.getDeletedConcepts();t.is(o)&&(a._deletedConcepts=!0,a.areConceptsMoved()||a.areConceptsDuplicated()?a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig6")+"<br><br>":a._warningReport="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig6")+"<br>",o.forEach((function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"})));let s=l.getMovedConcepts();t.is(s)&&(a._hierarchicalFatherMovement=!0,a.areConceptsDeleted()||a.areConceptsDuplicated()?a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig5")+"<br><br>":a._warningReport="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig5")+"<br><br>",s.forEach((function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;<b>"+e.concept.get("id")+"</b> is moved from father <b>"+e.previous_father.get("id")+"</b> to father <b>"+e.current_father.get("id")+"</b><br>"})));let c=l.getDuplicateConcepts();t.is(c)&&(a._duplicateConcepts=!0,a.areConceptsDeleted()||a.areConceptsMoved()?a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig4")+"<br><br>":a._warningReport="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig4")+"<br><br>",c.forEach((function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;<b>"+e.org_concept.get("id")+"</b> is duplicated as <b>"+e.duplicate.get("id")+"</b> with label <b>"+e.duplicate.get("label")+"</b><br>"})))}),(function(){reject("Failed to compare datasets"),a._warningReport=u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig1")+"<br><br>"}))},onFailure:function(e){a._addOrnotInDataSetStructure(e,r)}};s.getDataSetStructure(i)},getWarningReport:function(){let e=this._warningReport;return""===e&&(e=u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig2")),this.getSelectedDatasetTitle()||(e=u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig1")),e},areConceptsDeleted:function(){return this._deletedConcepts},areConceptsMoved:function(){return this._hierarchicalFatherMovement},areConceptsDuplicated:function(){return this._duplicateConcepts},_addOrnotInDataSetStructure:function(e,a){let r=this,n=t.is(e)&&e.datasetTitle,i=!0,o=r._structureToStore.length-1;if(t.is(a)&&!0===a)r._structureToStore=[],i=!0;else for(let e=o;e>=0;e--){if(r._structureToStore[e].datasetTitle===n){r._structureToStore.splice(e,1),i=!1;break}}!0===i&&r._structureToStore.push(e)}}})),define("DS/SearchControlCenter/scripts/SearchcontrolGeneralTab",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/Editor","DS/Controls/Label","DS/MessageBus/MessageBus","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SearchcontrolGeneralTabCategories","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","i18n!DS/SNResultUX/assets/nls/SNResultUX.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNResultUX/utils/SearchViewOptions","DS/SearchControlCenter/scripts/SCCSynonymsDictonary","DS/SNResultUX/utils/ExternalComponentHelpers","DS/Controls/Expander","DS/SNInfraUX/SearchControlCenterFetchService","DS/UIKIT/Mask"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_,m,f,C,y){"use strict";var v={viewModeComboBox:null,deltaTimeComboBox:null,dateModeComboBox:null,csvSeparatorComboBox:null,revisionComboBox:null,numberResultComboBox:null,checkboxAbbreviatedcount:null,checkboxAccessPLMParameters:null,checkboxSuggestions:null,checkboxSnippets:null,checkboxForceAdvSearch:null,checkboxForceGuidedMode:null,checkboxForceNLQMode:null,_viewModeObject:{},_dateModeObject:{},_csvSeparatorObject:{},_revisionObject:{},_goldenResourcesObject:{},_moreSources:!1,_trackerData:[],onRenderFacet:function(n){var o=p.getOption("OneSearch");s.trackerPublisher("SearchControlCenter","ClickOnTab",{pd1:"genralTab"});var c=e.create("div",{class:"scc_main_div",id:"search-center-general0"}).inject(n),C=e.create("div",{class:" search_center_div_left_6w  search_center_add_category_bottom ",id:"general-tab-userInterfaceDisplay-text"}).inject(c);e.create("p",{class:"search_center_text_heading",text:d.get("General.Results_display")}).inject(C);var y=e.create("div",{class:"search_center_div_left_6w  search_center_top_margin",id:"general-tab-view-mode"}).inject(c),b=e.create("div",{class:" search_center_general_display_flex",id:"general-tab-view-mode-text"}).inject(y),S=e.create("div",{id:"general-tab-view-mode"}).inject(c),T=e.create("div",{class:"search_center_div_left",id:"general-tab-view-mode-combo"}).inject(S);e.create("p",{class:"search_center_text",text:d.get("Default_View_Mode_After_CacheCleaning")}).inject(b);var x=[],w=o;if(v._viewModeObject=h.getAvailableViews({simple_search_experience:w,getAllViews:!0}),t.is(v._viewModeObject)&&v._viewModeObject.length>0)for(let e=0;e<v._viewModeObject.length;e++){var D={},A=v._viewModeObject[e];D.labelItem=A.title,D.iconItem=A.icon,x.push(D)}v.viewModeComboBox=new r({elementsList:x,nbDisplayedElements:x.length,currentValue:x[0],touchMode:!0,enableSearchFlag:!0}).inject(T),T.setStyle("display","grid"),v.viewModeComboBox.elements.container.setStyle("max-width","unset"),e.create("p",{class:"info_Details",text:d.get("Default_View_Mode_After_CacheCleaning.popover")}).inject(S);var I=e.create("div",{class:" search_center_general_display_flex search_center_top_margin",id:"general-tab-recent-time"}).inject(c),P=e.create("div",{class:" search_center_general_display_flex",id:"general-tab-recent-time-text"}).inject(I),W=(S=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-tab-recent_content"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-recent-time-combo"}).inject(S));e.create("p",{class:"search_center_text",text:d.get("Recent_Content_Delta_Time")}).inject(P);var N=["5"+d.get("Minutes"),"10"+d.get("Minutes"),"15"+d.get("Minutes"),"20"+d.get("Minutes"),"25"+d.get("Minutes"),"30"+d.get("Minutes")];if(v.deltaTimeComboBox=new r({elementsList:N,nbDisplayedElements:N.length,currentValue:N[0],touchMode:!0,enableSearchFlag:!0}).inject(W),W.setStyle("display","grid"),v.deltaTimeComboBox.elements.container.setStyle("max-width","unset"),e.create("p",{class:"info_Details",text:d.get("Recent_Content_Delta_Time.popover")}).inject(W),v._dateModeObject=p.getOption("date_display_mode_array"),t.is(v._dateModeObject,"array")&&v._dateModeObject.length>0){var j=[];for(let e=1;e<v._dateModeObject.length;e++){var O=v._dateModeObject[e];t.is(O,"object")&&t.is(O.id,"string")?j.push(u.get(O.id+".title")):g.error("Bad definition of date_display_mode_array !!!",v._dateModeObject)}if(j.length>0){var E=e.create("div",{class:"search_center_general_tab_div ",id:"general-tab-date-mode"}).inject(c),B=e.create("div",{class:" search_center_general_display_flex search_center_top_margin",id:"general-tab-date-mode-text"}).inject(E),k=(S=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-tab-date_mode"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-date-mode-combo"}).inject(S));e.create("p",{class:"search_center_text",text:u.get("Default_Date_Mode")}).inject(B),v.dateModeComboBox=new r({elementsList:j,nbDisplayedElements:j.length,currentValue:j[0],touchMode:!0,enableSearchFlag:!0}).inject(k),k.setStyle("display","grid"),v.dateModeComboBox.elements.container.setStyle("max-width","unset")}}if(v._csvSeparatorObject=p.getOption("csvSeparatorArray"),t.is(v._csvSeparatorObject,"array")&&v._csvSeparatorObject.length>0){var F=[];for(let e=1;e<v._csvSeparatorObject.length;e++){var R=v._csvSeparatorObject[e];t.is(R,"object")&&t.is(R.id,"string")?F.push(u.get(R.id+".title")):g.error("Bad definition of csvSeparatorArray !!!",v._csvSeparatorObject)}if(F.length>0){var M=e.create("div",{class:"search_center_general_tab_div ",id:"general-tab-csv-mode"}).inject(c),V=e.create("div",{class:" search_center_general_display_flex search_center_top_margin",id:"general-tab-csv-mode-text"}).inject(M),U=(S=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-csv"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-csv-mode-combo"}).inject(S));e.create("p",{class:"search_center_text",text:u.get("Default_Csv_Separator")}).inject(V),v.csvSeparatorComboBox=new r({elementsList:F,nbDisplayedElements:F.length,domId:"combo-csv-mode",currentValue:F[0],touchMode:!0,enableSearchFlag:!0}).inject(U),U.setStyle("display","grid"),v.csvSeparatorComboBox.elements.container.setStyle("max-width","unset")}}if(v._revisionObject=p.getOption("show_search_results_revision_array"),t.is(v._revisionObject)&&v._revisionObject.length>0){var L=[];for(let e=0;e<v._revisionObject.length;e++){var Q=v._revisionObject[e];t.is(Q,"object")&&t.is(Q.id,"string")?L.push(u.get(Q.id+".title")):g.error("Bad definition of show_search_results_revision_array !!!",v._revisionObject)}if(L.length>0){var z=e.create("div",{class:"search_center_general_tab_div ",id:"general-tab-revision"}).inject(c),H=e.create("div",{class:" search_center_general_display_flex search_center_top_margin",id:"general-tab-revision-type-text"}).inject(z),G=(S=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-revision"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-revision-type-combo"}).inject(S));e.create("p",{class:"search_center_text",text:u.get("Show_Search_Results")}).inject(H),v.revisionComboBox=new r({elementsList:L,nbDisplayedElements:L.length,currentValue:L[0],touchMode:!0,enableSearchFlag:!0}).inject(G),G.setStyle("display","grid"),v.revisionComboBox.elements.container.setStyle("max-width","unset")}}var X=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-number-result"}).inject(c),J=e.create("div",{class:" search_center_general_display_flex search_center_top_margin",id:"general-tab-number-result-text"}).inject(X),q=(S=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-no_of_results"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-number-result-combo"}).inject(S));e.create("p",{class:"search_center_text",text:d.get("max_selection_for_selectall")}).inject(J);var K=["200"+d.get("Items"),"400"+d.get("Items"),"600"+d.get("Items"),"800"+d.get("Items"),"1000"+d.get("Items")];v.numberResultComboBox=new r({elementsList:K,nbDisplayedElements:K.length,currentValue:K[0],touchMode:!0,enableSearchFlag:!0}).inject(q),q.setStyle("display","grid"),v.numberResultComboBox.elements.container.setStyle("max-width","unset");var $=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-default-sort-option"}).inject(c),Y=e.create("div",{class:" search_center_general_display_flex search_center_top_margin",id:"general-tab-default-sort-option-text"}).inject($),Z=(S=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-sort_option"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-default-sort-option-combo"}).inject(S));Z.setStyle("display","grid"),e.create("p",{class:"search_center_text",text:d.get("GeneralTab.DefaultSort.title")}).inject(Y);var ee=[{label:u.get("sort_by")+" "+u.get("relevancySort"),trueLabel:u.get("relevancySort"),icon:"sorting"},{label:u.get("sort_by")+" "+u.get("ds6w:modified_SortDesc"),trueLabel:u.get("ds6w:modified_SortDesc"),icon:"date-sorting-1-31"},{label:u.get("sort_by")+" "+u.get("ds6w:modified_SortAsc"),trueLabel:u.get("ds6w:modified_SortAsc"),icon:"date-sorting-31-1"},{label:u.get("sort_by")+" "+u.get("ds6w:label_SortAsc"),trueLabel:u.get("ds6w:label_SortAsc"),icon:"alpha-sorting-a-z"},{label:u.get("sort_by")+" "+u.get("ds6w:label_SortDesc"),trueLabel:u.get("ds6w:label_SortDesc"),icon:"alpha-sorting-z-a"},{label:u.get("sort_by")+" "+u.get("ds6w:type"),trueLabel:u.get("ds6w:type"),icon:"tag-sorting"}];v.defaultSortOptionComboBox=new r({elementsList:ee,nbDisplayedElements:ee.length,selectedIndex:0,touchMode:!0,enableSearchFlag:!1,getMainElementCustomization:this.updateSortLabelCallback}).inject(Z),v.defaultSortOptionComboBox.addEventListener("change",(function(){v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Resultsdisplay",pd2:"Defaultresultsviewmode",pd3:v.defaultSortOptionComboBox.currentValue}),s.enableButtons()}));var te=e.create("div",{class:"search_center_div_left search_center_general_display_flex main_Div_Padding search_center_add_category_bottom",id:"general-tab-resultsdisplay-text"}).inject(c);e.create("p",{class:"search_center_text_heading",text:d.get("General.UI_display")}).inject(te);var ae=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"general-tab-abbreviated-count"}).inject(c),re=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-abbreviated-count-toggle"}).inject(ae);v.checkboxAbbreviatedcount=new a({type:"switch",label:d.get("QuantityDisplay.Abbreviated_count_display"),className:"primary",touchMode:!0}).inject(re);var ne=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ae);m.tooltip(ne,{position:"top",shortHelp:d.get("QuantityDisplay.Abbreviated_count_display.popover")});var ie=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-access-PLMParameters"}).inject(c),oe=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-PLMParameters-toggle"}).inject(ie);v.checkboxAccessPLMParameters=new a({type:"switch",label:d.get("Advancedsearch.Access_to_plmparameters.title"),className:"primary",touchMode:!0}).inject(oe);var se=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ie);m.tooltip(se,{position:"top",shortHelp:d.get("Advancedsearch.Access_to_plmparameters.popover")});var le=p.getOption("OneSearchOFF");if(t.is(o)&&!0===o&&!0!==le){var ce=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-suggestions"}).inject(c),de=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-Suggestions-toggle"}).inject(ce);v.checkboxSuggestions=new a({type:"switch",label:d.get("suggestion.title"),className:"primary",touchMode:!0}).inject(de);var ue=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ce);m.tooltip(ue,{position:"top",shortHelp:d.get("suggestion.popover")});var ge=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-snippets"}).inject(c),pe=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-Snippets-toggle"}).inject(ge);v.checkboxSnippets=new a({type:"switch",label:d.get("search_snippets.title"),className:"primary",touchMode:!0}).inject(pe);var he=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ge);m.tooltip(he,{position:"top",shortHelp:d.get("search_snippets.popover")}),v.checkboxSuggestions.addEventListener("change",(function(){v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:"DisplaySuggestionsToggle",pd3:v.checkboxSuggestions.checkFlag}),s.enableButtons()})),v.checkboxSnippets.addEventListener("change",(function(){v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:"DisplaySnippetsToggle",pd3:v.checkboxSnippets.checkFlag}),s.enableButtons()}))}var _e=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-force-AdvancedSearch"}).inject(c),me=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-force-AdvancedSearch-toggle"}).inject(_e);v.checkboxForceAdvSearch=new a({type:"switch",label:d.get("General.InContextSearch.forceAdvancedSearch.label"),className:"primary",touchMode:!0}).inject(me);var fe=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(_e);m.tooltip(fe,{position:"top",shortHelp:d.get("General.InContextSearch.forceAdvancedSearch.popover")}),v.checkboxForceAdvSearch.addEventListener("change",(function(){v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:"ForceAdvSearchMode",pd3:v.checkboxForceAdvSearch.checkFlag}),s.enableButtons()}));var Ce=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-force-GuidedMode"}).inject(c),ye=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-force-GuidedMode-toggle"}).inject(Ce);v.checkboxForceGuidedMode=new a({type:"switch",label:d.get("General.forceFullSearchMode.label"),className:"primary",touchMode:!0}).inject(ye);var ve=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(Ce);m.tooltip(ve,{position:"top",shortHelp:d.get("General.forceGuidedMode.popover")}),v.checkboxForceGuidedMode.addEventListener("change",(function(){v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:"ForceGuidedModeToggle",pd3:v.checkboxForceGuidedMode.checkFlag}),s.enableButtons()}));let be=p.getOption("SCCNLQMode");if(t.is(be)&&!0===be){var Se=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-force-NLQMode"}).inject(c),Te=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-force-NLQMode-toggle"}).inject(Se);v.checkboxForceNLQMode=new a({type:"switch",label:d.get("General.forceNLQMode.label"),className:"primary",touchMode:!0}).inject(Te),new i({value:d.get("search.dropdown.beta"),emphasize:"warning"}).inject(Se);var xe=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(Se);m.tooltip(xe,{position:"top",shortHelp:d.get("General.forceNLQMode.popover")}),v.checkboxForceNLQMode.addEventListener("change",(function(){v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:"ForceNLQModeToggle",pd3:v.checkboxForceNLQMode.checkFlag}),s.enableButtons()}))}if(_.onRender(c),l.render(c),this._isGoldenSourcesActivated()){var we=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex_vertical",id:"general-tab-soucesscope-span"}).inject(c),De=e.create("div",{class:"search_center_div_left search_center_general_display_flex search_center_add_category_bottom main_Div_Padding",id:"general-tab-soucesscope-text"}).inject(we);e.create("p",{class:"search_center_text_heading",text:d.get("General.SouceScope")}).inject(De);e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"general-tab-filler-span"}).inject(we);var Ae=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex_vertical",id:"general-tab-moresourcescontent-span"}).inject(c),Ie=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-moresources-span"}).inject(c),Pe=e.create("div",{id:"general-tab-more_sources-expander"}).inject(Ie);v.MoreSources=new f({header:d.get("General.More_sources"),body:Ae,expandedFlag:!1,style:"simple"}).inject(Pe),v.MoreSources.elements.bodyContainer.setStyle("width","100%"),v.MoreSources.addEventListener("expand",(function(){})),v.MoreSources.addEventListener("collapse",(function(){})),this.Masking(),s.getAvailableSources().then((function(t){if(t.length>0)for(let n=0;n<t.length;n++)if(!0===t[n].status)switch(t[n].name){case"swym":let t={nls:d.get("General.Communities_conversations"),name:"swym",service:"3Dswym",status:!0};v.CommunityNConversation=v._buildToggleOption(we,t.nls,!0,t);break;case"3dspace":let n={nls:d.get("General.Collaborative_spaces"),name:"3dspace",service:"3DSpace",status:!0};v.CollabSpces=v._buildToggleOption(we,n.nls,!0,n);break;case"globe":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Geospatial_Data"),name:"globe",service:"globe",status:!0};v._moreSources=!0,v.Geospatial_Data=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"geoscienceinterpretation":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Geoscience_Interpretation"),name:"geoscienceinterpretation",service:"geoscienceinterpretation",status:!0};v._moreSources=!0,v.Geoscience_Interpretation=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"geovia":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Geovia"),name:"geovia",service:"geoservice",status:!0};v._moreSources=!0,v.Geovia=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"materials":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Materials"),name:"materials",service:"materials",status:!0};v._moreSources=!0,v.Materials=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"inventory":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Inventory"),name:"inventory",service:"materials",status:!0};v._moreSources=!0,v.Inventory=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"molecularsimulation":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Molecular_simulation"),name:"molecularsimulation",service:"molecularsimulation",status:!0};v._moreSources=!0,v.Molecular_simulation=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"bioexperiment":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Bioexperiment"),name:"bioexperiment",service:"bioexperiment",status:!0};v._moreSources=!0,v.Bioexperiment=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"3dportfolio":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.3d_portfolio"),name:"3dportfolio",service:"3dportfolio",status:!0};v._moreSources=!0,v.Threed_portfolio=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"3dstructureddocument":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.3d_structured_document"),name:"3dstructureddocument",service:"3dstructureddocument",status:!0};v._moreSources=!0,v.Threed_structured_document=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"sourcing":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Sourcing"),name:"sourcing",service:"sourcing",status:!0};v._moreSources=!0,v.Sourcing=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"locationstate":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Location_state"),name:"locationstate",service:"locationstate",status:!0};v._moreSources=!0,v.Location_state=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"r2vsurvey":if(!0===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.Real_world_location"),name:"r2vsurvey",service:"r2vsurvey",status:!0};v._moreSources=!0,v.Real_world_location=v._buildToggleOption(Ae,e.nls,!0,e)}break;case"usersgroup":let i={nls:d.get("General.User_groups"),name:"usersgroup",service:"usersgroup",status:!0};v._moreSources=!0,v.UserGroups=v._buildToggleOption(Ae,i.nls,!0,i);break;case"dashboard":let o={nls:d.get("General.dashboard"),name:"dashboard",service:"3DDashboard",status:!0};v._moreSources=!0,v.ThreeDdashboard=v._buildToggleOption(Ae,o.nls,!0,o);break;case"drive":var r=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-onedrive-toggle"}).inject(we);v.Three3DExpDrive=new a({type:"switch",label:d.get("General.3dexp_drive"),className:"primary",touchMode:!0,checkFlag:!0}).inject(r);let l={nls:d.get("General.3dexp_drive"),name:"drive",service:"3DDrive",status:!0};v.Three3DExpDrive.addEventListener("change",(function(){s.enableButtons(),l.status=v.Three3DExpDrive.checkFlag,v._goldenResourcesObject["3dexpdrive"]=l}));break;case"3dplan":let c={nls:d.get("General.Project_planning"),name:"3dplan",service:"3DPlan",status:!0};v.ProjectPlanning=v._buildToggleOption(we,c.nls,!0,c);break;case"allothers":if(!1===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.All_Others"),name:"allothers",service:"allothers",status:!0};v._moreSources=!0,v.AllOthers=v._buildToggleOption(Ae,e.nls,!0,e)}}if(!1===v._isAllOtherDataSourcesActivated()){let e={nls:d.get("General.All_Others"),name:"allothers",service:"allothers",status:!0};v._moreSources=!0,v.AllOthers=v._buildToggleOption(Ae,e.nls,!0,e)}v.unMasking()})),this._setGoldenSourcesDefault()}v.viewModeComboBox.addEventListener("change",(function(){s.enableButtons(),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:"DefaultResultViewMode",pd3:v.viewModeComboBox.currentValue})})),v.deltaTimeComboBox.addEventListener("change",(function(){s.enableButtons(),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Resultsdisplay",pd2:"RecentContentAvailiablity",pd3:v.deltaTimeComboBox.currentValue})})),v.numberResultComboBox.addEventListener("change",(function(){s.enableButtons(),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Resultsdisplay",pd2:"NumberOfResults",pd3:v.numberResultComboBox.currentValue})})),v.checkboxAbbreviatedcount.addEventListener("change",(function(){s.enableButtons(),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:"NumericalAbbrevationToggle",pd3:v.checkboxAbbreviatedcount.checkFlag})})),v.checkboxAccessPLMParameters.addEventListener("change",(function(){s.enableButtons(),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:"PLMParametersToggle",pd3:v.checkboxAccessPLMParameters.checkFlag})})),v.dateModeComboBox.addEventListener("change",(function(){s.enableButtons(),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Resultsdisplay",pd2:"DisplayDateFormat",pd3:v.dateModeComboBox.currentValue})})),t.is(v.csvSeparatorComboBox)&&v.csvSeparatorComboBox.addEventListener("change",(function(){s.enableButtons(),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Resultsdisplay",pd2:"CSVSeparator",pd3:v.csvSeparatorComboBox.currentValue})})),v.revisionComboBox.addEventListener("change",(function(){s.enableButtons(),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"SelectValue",pd1:"Resultsdisplay",pd2:"SearchResultsRevisions",pd3:v.revisionComboBox.currentValue})})),this.unMasking()},unMasking(){s.removeMask(widget.body)},Masking(){s.putMask(widget.body)},_buildToggleOption:function(r,n,i,o){let l=null,c="";t.is(n)&&(c=n.replace(/\s+/g,"_"),c=c.replace(/&/g,"AND"));let u=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-"+c}).inject(r),g=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-"+c+"-toggle"}).inject(u);if("swym"===o.name&&(g.setStyles({"background-color":"lightgray"}),g.addClassName("search_center_disable")),l=new a({type:"switch",label:n,className:"primary",touchMode:!0,checkFlag:i}).inject(g),v._goldenResourcesObject[o.name]=o,"allothers"===o.name){var p=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(g);m.tooltip(p,{position:"top",shortHelp:d.get("General.AllOthers.popover")})}return l.addEventListener("change",(function(){let e="Enable_Disable"+n;console.log("tracker name =",e),v.upsertTrackerEntry({category:"SearchControlCenter-GT",action:"selectValue",pd1:"Userinterfacedisplay",pd2:e,pd3:l.checkFlag}),o.status=l.checkFlag,v._goldenResourcesObject[o.name]=o,s.enableButtons()})),l},_isAllOtherDataSourcesActivated:()=>!0===p.getOption("AllOtherDataSources"),_isGoldenSourcesActivated:()=>!0===p.getOption("GoldenSources"),_setGoldenSourcesDefault(){v._goldenResourcesObject={},v._goldenResourcesObject=C.getDefaultGoldenSources()},getTabInputsToStore:function(){v._trackerData&&Object.values(v._trackerData).forEach((e=>{s.trackerPublisher(e.category,e.action,{pd1:e.pd1,pd2:e.pd2,pd3:e.pd3})}));var e=v.deltaTimeComboBox.currentValue;t.is(e)&&(e=e.replace(d.get("Minutes"),""));var a=v.viewModeComboBox.currentValue;if(t.is(a))for(let e=0;e<v._viewModeObject.length;e++){var r=v._viewModeObject[e];if(a===r.title){a=r.id;break}}var n=v.numberResultComboBox.currentValue;t.is(n)&&(n=n.replace(d.get("Items"),""));var i=v.dateModeComboBox.currentValue;if(t.is(i))for(let e=0;e<v._dateModeObject.length;e++){var o=v._dateModeObject[e];if(i===u.get(o.id+".title")){i=o;break}}var c=t.is(v.csvSeparatorComboBox)?v.csvSeparatorComboBox.currentValue:u.get("COMMA.title");if(t.is(c))for(let e=0;e<v._csvSeparatorObject.length;e++){var g=v._csvSeparatorObject[e];if(c===u.get(g.id+".title")){c=g;break}}var h=v.revisionComboBox.currentValue;if(t.is(h))for(let e=0;e<v._revisionObject.length;e++){var m=v._revisionObject[e];if(h===u.get(m.id+".title")){h=m;break}}var f={},C=v.defaultSortOptionComboBox.selectedIndex;switch(C){case 0:f={label:"relevancySort",value:"relevance",type:"group"};break;case 1:f={label:"ds6w:modified_SortDesc",value:"ds6w:modified",order:"desc",type:"num"};break;case 2:f={label:"ds6w:modified_SortAsc",value:"ds6w:modified",order:"asc",type:"num"};break;case 3:f={label:"ds6w:label_SortAsc",value:"ds6w:label",order:"asc",type:"alpha"};break;case 4:f={label:"ds6w:label_SortDesc",value:"ds6w:label",order:"desc",type:"alpha"};break;case 5:f={label:"ds6w:type",value:"ds6w:type",type:"type"}}let y={};this._isGoldenSourcesActivated()&&Object.keys(v._goldenResourcesObject).forEach((e=>y[e]=v._goldenResourcesObject[e].status));var b={defaultViewModeAfterCacheCleaning:a,defaultDateMode:i,defaultCsvSeparator:c,defaultRevision:h,Recent_Content_Delta_Time:e,max_selection_for_selectall:n,preciseCount:!0!==v.checkboxAbbreviatedcount.checkFlag,enablePLM:v.checkboxAccessPLMParameters.checkFlag,forceAdvancedSearch:v.checkboxForceAdvSearch.checkFlag,GuidedMode:v.checkboxForceGuidedMode?v.checkboxForceGuidedMode.checkFlag:void 0,NLQModeEnabled:v.checkboxForceNLQMode?v.checkboxForceNLQMode.checkFlag:void 0,searchDefaultSort:f,searchDefaultSortIndex:C,GoldenDataSources:this._isGoldenSourcesActivated()?y:null},S=p.getOption("OneSearch"),T=p.getOption("OneSearchOFF");return t.is(S)&&!0===S&&!0!==T&&(b.suggest_admin=v.checkboxSuggestions.checkFlag,b.search_snippet_admin=v.checkboxSnippets.checkFlag),l.getTabInputsToStore(b),_.updateTabInputsToStore(b),b},onResetTab:function(e){var a;if(a=t.is(e,"string")?JSON.parse(e):e,t.is(a)){if(a.hasOwnProperty("defaultViewModeAfterCacheCleaning")){var r=a.defaultViewModeAfterCacheCleaning;if(t.is(r)){for(let e=0;e<v._viewModeObject.length;e++){var n=v._viewModeObject[e];if(r===n.id){r=n.title;break}}v.viewModeComboBox.currentValue=r}}if(a.hasOwnProperty("searchDefaultSortIndex")){var i=a.searchDefaultSortIndex;t.is(i)&&(v.defaultSortOptionComboBox.selectedIndex=i)}if(a.hasOwnProperty("Recent_Content_Delta_Time")){var o=a.Recent_Content_Delta_Time;t.is(o)&&(o+=d.get("Minutes"),v.deltaTimeComboBox.currentValue=o)}if(a.hasOwnProperty("max_selection_for_selectall")){var c=a.max_selection_for_selectall;t.is(c)&&(c+=d.get("Items"),v.numberResultComboBox.currentValue=c)}if(a.hasOwnProperty("defaultDateMode")){var g=a.defaultDateMode;if(t.is(g)){for(let e=0;e<v._dateModeObject.length;e++){var h=v._dateModeObject[e];if(g.id===h.id){g=u.get(h.id+".title");break}}v.dateModeComboBox.currentValue=g}}else t.is(v._dateModeObject)&&t.is(v._dateModeObject[0])&&(v.dateModeComboBox.currentValue=u.get(v._dateModeObject[0].id+".title"));if(v.csvSeparatorComboBox)if(a.hasOwnProperty("defaultCsvSeparator")){var m=a.defaultCsvSeparator;if(t.is(m)){for(let e=0;e<v._csvSeparatorObject.length;e++){var f=v._csvSeparatorObject[e];if(m.id===f.id){m=u.get(f.id+".title");break}}v.csvSeparatorComboBox.currentValue=m}}else t.is(v._csvSeparatorObject)&&t.is(v._csvSeparatorObject[0])&&(v.csvSeparatorComboBox.currentValue=u.get(v._csvSeparatorObject[0].id+".title"));if(a.hasOwnProperty("defaultRevision")){var C=a.defaultRevision;if(t.is(C)){for(let e=0;e<v._revisionObject.length;e++){var b=v._revisionObject[e];if(C.id===b.id){C=u.get(b.id+".title");break}}v.revisionComboBox.currentValue=C}}else v.revisionComboBox.currentValue=u.get(v._revisionObject[0].id+".title");if(a.hasOwnProperty("preciseCount")){var S=a.preciseCount;t.is(S)&&(v.checkboxAbbreviatedcount.checkFlag=!0!==S)}if(a.hasOwnProperty("enablePLM")){var T=a.enablePLM;t.is(T)&&(v.checkboxAccessPLMParameters.checkFlag=T)}if(a.hasOwnProperty("forceAdvancedSearch")){var x=a.forceAdvancedSearch;t.is(x)&&(v.checkboxForceAdvSearch.checkFlag=x)}if(a.hasOwnProperty("GuidedMode")){var w=a.GuidedMode;t.is(w)&&t.is(v.checkboxForceGuidedMode)&&(v.checkboxForceGuidedMode.checkFlag=w)}if(a.hasOwnProperty("NLQModeEnabled")){var D=a.NLQModeEnabled;t.is(D)&&t.is(v.checkboxForceNLQMode)&&(v.checkboxForceNLQMode.checkFlag=D)}var A=p.getOption("OneSearch"),I=p.getOption("OneSearchOFF");if(t.is(A)&&!0===A&&!0!==I){if(a.hasOwnProperty("suggest_admin")){var P=a.suggest_admin;t.is(P)&&(v.checkboxSuggestions.checkFlag=P)}else v.checkboxSuggestions.checkFlag=!0;if(a.hasOwnProperty("search_snippet_admin")){var W=a.search_snippet_admin;t.is(W)&&(v.checkboxSnippets.checkFlag=W)}else v.checkboxSnippets.checkFlag=!0}if(l.onResetTab(a),_.onResetTab(a.search_synonyms),this._isGoldenSourcesActivated()){let e={};a.hasOwnProperty("GoldenDataSources")?e=a.GoldenDataSources:(this._setGoldenSourcesDefault(),Object.keys(v._goldenResourcesObject).forEach((t=>e[t]=v._goldenResourcesObject[t].status))),y.mask(widget.body),s.getAvailableSources().then((function(a){if(Object.keys(e).length>0)for(let a=0;a<Object.keys(e).length;a++)switch(Object.keys(e)[a]){case"swym":t.is(v.CommunityNConversation)&&(v.CommunityNConversation.checkFlag=e[Object.keys(e)[a]]);break;case"3dspace":t.is(v.CollabSpces)&&(v.CollabSpces.checkFlag=e[Object.keys(e)[a]]);break;case"globe":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Geospatial_Data)&&(v.Geospatial_Data.checkFlag=e[Object.keys(e)[a]]);break;case"geoscienceinterpretation":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Geoscience_Interpretation)&&(v.Geoscience_Interpretation.checkFlag=e[Object.keys(e)[a]]);break;case"geovia":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Geovia)&&(v.Geovia.checkFlag=e[Object.keys(e)[a]]);break;case"materials":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Materials)&&(v.Materials.checkFlag=e[Object.keys(e)[a]]);break;case"inventory":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Inventory)&&(v.Inventory.checkFlag=e[Object.keys(e)[a]]);break;case"molecularsimulation":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Molecular_simulation)&&(v.Molecular_simulation.checkFlag=e[Object.keys(e)[a]]);break;case"bioexperiment":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Bioexperiment)&&(v.Bioexperiment.checkFlag=e[Object.keys(e)[a]]);break;case"3dportfolio":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Threed_portfolio)&&(v.Threed_portfolio.checkFlag=e[Object.keys(e)[a]]);break;case"3dstructureddocument":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Threed_structured_document)&&(v.Threed_structured_document.checkFlag=e[Object.keys(e)[a]]);break;case"sourcing":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Sourcing)&&(v.Sourcing.checkFlag=e[Object.keys(e)[a]]);break;case"locationstate":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Location_state)&&(v.Location_state.checkFlag=e[Object.keys(e)[a]]);break;case"r2vsurvey":!0===v._isAllOtherDataSourcesActivated()&&t.is(v.Real_world_location)&&(v.Real_world_location.checkFlag=e[Object.keys(e)[a]]);break;case"usersgroup":t.is(v.UserGroups)&&(v.UserGroups.checkFlag=e[Object.keys(e)[a]]);break;case"dashboard":t.is(v.ThreeDdashboard)&&(v.ThreeDdashboard.checkFlag=e[Object.keys(e)[a]]);break;case"3dexpdrive":t.is(v.Three3DExpDrive)&&(v.Three3DExpDrive.checkFlag=e[Object.keys(e)[a]]);break;case"3dplan":t.is(v.ProjectPlanning)&&(v.ProjectPlanning.checkFlag=e[Object.keys(e)[a]]);break;case"allothers":!1===v._isAllOtherDataSourcesActivated()&&t.is(v.AllOthers)&&(v.AllOthers.checkFlag=e[Object.keys(e)[a]])}s.disableButtons(),y.unmask(widget.body)}))}}},updateSortLabelCallback:function(){const e=this.elementsList[this.selectedIndex];return e&&e.trueLabel?{label:e.trueLabel}:{label:this.label}},upsertTrackerEntry:function(e){Array.isArray(v._trackerData)||(v._trackerData=[]);const t=v._trackerData.findIndex((t=>t.pd2===e.pd2));-1!==t?v._trackerData[t]=e:v._trackerData.push(e)}};return v})),define("DS/SearchControlCenter/scripts/SCCTagColorizationHelper",["UWA/Core","UWA/Promise","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/WAFData/WAFData","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchLogin","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchPreferences"],(function(e,t,a,r,n,i,o,s,l){"use strict";return{getAllPredicates:function(e){var r=this;return new t((function(t,n){var i={};r.getAllTags().then((function(n){var o=r._getPredicateValuesWithSource(n);r._mergeTags(o,e),i.sourceInfo=o,r.getPredicateValuesNls(o).then((function(e){var r=Object.keys(e).map((function(e){return e.split("/").pop()}));a.getResourcesInfo(r.join(","),{tenantId:s.getPlatformID(),onComplete:function(a){var r={};a.vocabularyElementNLSInfo.forEach((function(e){r[e.uri]=e.nlsName})),Object.keys(e).forEach((function(t){e[t].nls=r[t.split("/").pop()]})),i.colorization=e,t(i)},onFailure:function(){i.colorization={},t(i)}})}))}))}))},getAllTags:function(){var a=this;return new t((function(t,o){var c=e.is(n.getOption("tagColorQuery"))?n.getOption("tagColorQuery"):e.is(l.getItem("tagColorQuery"))?l.getItem("tagColorQuery"):"[ds6w:modified]>1970/01/01";l.setItem("tagColorQuery",c);var d={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({with_indexing_date:!0,with_nls:!1,label:"3DSearch-SCC-TagColorization"+i.getUserId()+"-"+(new Date).getTime(),locale:i.getLanguage(),query:c,refine:{},specific_source_parameter:{},select_predicate:["ds6w:label"],source:[],tenant:s.getPlatformID(),nresults:1,order_by:"desc",order_field:"relevance",start:0,with_synthesis:!0})};a.get3DSearchSericeURLPromise().then((function(e){d.onComplete=function(e){var r=JSON.parse(e),n=a._removeUnsupportedTagValues(r.facets);t(n)},d.onFailure=function(e){o(e)},r.authenticatedRequest(e+"/search",d)}))}))},_removeUnsupportedTagValues:function(t){var a=[];if(e.is(t,"array")){var r=n.getOption("tagColorization");a=t.filter((function(e){return r.supported_value_types.indexOf(e.type)>=0&&r.unsupported_predicates.indexOf(e.sixw)<0}))}return a},getPredicateValuesNls:function(a){var r=this;return new t((function(t,n){var i={},s={},l={};e.is(a)&&(Object.keys(a).forEach((function(e){i[e]||(i[e]=[]),Object.keys(a[e]).forEach((t=>{i[e].push({value:t,source:[o.getServiceFromSource(a[e][t])]})}))})),Object.keys(i).forEach((function(e){var t=e.split("/").pop();s[t]=i[e]})),r.getTagValuesNls(s).then((function(e){Object.keys(i).forEach((function(t){var a=t.split("/").pop();l[t]||(l[t]={values:e[a]})})),t(l)})))}))},getTagValuesNls:function(e){return new t((function(t,r){a.getNlsOfPropertiesValuesBySource(e,{tenantId:s.getPlatformID(),lang:i.getLanguage(),onComplete:function(e){t(e)},onFailure:function(){t({})}})}))},get3DSearchSericeURLPromise:function(){return i.getSericeURLPromise(s.getPlatformID(),"3DSearch")},_getPredicateValuesWithSource:function(t){var a={};return e.is(t,"array")&&t.forEach((t=>{if(e.is(t.object,"string")){var r=t.sixw;a[r]||(a[r]={}),a[r][t.object]=t.sources[0]}})),a},_mergeTags:function(t,a){e.is(t)&&e.is(a)&&Object.keys(a).forEach((r=>{e.is(t[r])?t[r]=e.merge(t[r],a[r]):t[r]=e.clone(a[r],!0)}))},getWTreeContentsForTagColorize:function(t){let a={predicates:[]},r=t.childElementCount;for(let i=0;i<r;i++){let r=t.children[i];if(e.is(r)){let e=r.childElementCount;for(let t=0;t<e;t++){let e=r.children[t],i=e.childElementCount;for(let t=0;t<i;t++){let r=e.children[t];if(r.classList.contains("wux-controls-expander")){let e=r.children[0].children[0];if(e.classList.contains("wux-controls-expander-header"))var n=e.textContent;let t=r.getElementsByClassName("wux-controls-expander-body")[0];if(t){let e=t.getElementsByClassName("include_tags");for(let t=0;t<e.length;t++){let r=e[t],i=r.children[0],o=i?i.style.backgroundColor:"",s=[];for(let e=1;e<r.children.length;e++){let t=r.children[e];"P"===t.tagName&&s.push(t.textContent.trim())}a.predicates.push({predicateTagLabel:n,predicatevaluecolor:o,predicateTagvalues:s})}}}}}}}let i={};return a.predicates.forEach((e=>{i[e.predicateTagLabel]||(i[e.predicateTagLabel]={predicateTagLabel:e.predicateTagLabel,predicatevaluecolor:e.predicatevaluecolor,predicateTagvalues:[]}),i[e.predicateTagLabel].predicateTagvalues.push(...e.predicateTagvalues)})),a.predicates=Object.values(i),a},collapseRootWArea:function(e){e.children[0].style.height="10px"},toggleRootWArea:function(e){e.children[0].style.height="130px"},ifExistInPredicates:function(t,a){if(e.is(a)&&e.is(t))return t.predicates.some((function(t){if(e.is(t,"object"))return t.predicateTagLabel===a}))},ifExistInPredicateValue:function(t,a){if(e.is(a)&&e.is(t))return t.predicates.some((function(t){return!(!e.is(t,"object")||t.predicateTagLabel!==a._includeTagPredicate)&&t.predicateTagvalues.some((function(e){return e===a._includeTagPredicateVal}))}))},getPredicateUri:function(t,a,r,n){if(e.is(a)&&e.is(t))if(!1===n){for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];if(!e.is(r))return;if(n.includes(r)&&i.values)for(let e in i.values)if(i.values[e]===a)return n}}else if(!0===n&&e.is(t))for(let e in t)if(t.hasOwnProperty(e)){if(t[e].nls===a)return e}},getPredicateNLS:function(t,a){if(e.is(a)&&e.is(t))for(let e in t)if(t.hasOwnProperty(e)){let r=t[e];if(e===a)return r.nls}},getPredicateDetails:function(t,a){if(e.is(a)&&e.is(t)){let r=Object.keys(a)[0];if(!e.is(r))return;const n={what:"what",who:"who",when:"when",where:"where",why:"why",how:"how"};let i=Object.keys(n).find((e=>r.includes(e)))||null,o=a[r];if(!e.is(o)||"object"!=typeof o)return;let s=this.getPredicateNLS(t,r),l=Object.keys(o)[0];if(!e.is(l))return;let c=o[l];if("string"!=typeof c)return;return{wValue:i,predicate:s,predicateValue:l,predicateValueColor:c}}}}})),define("DS/SearchControlCenter/scripts/SCCTagColorization",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/ComboBox","DS/SearchControlCenter/control/SCCColorPicker","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SCCTagColorizationHelper","DS/Controls/Toggle","DS/Controls/LineEditor","DS/SNInfraUX/SearchPreferences","DS/SNInfraUX/SearchSettings","DS/SNResultUX/utils/ExternalComponentHelpers","DS/Controls/Button","DS/TagNavigator/simplified/views/WrapperView","DS/TagNavigator/Predicate","DS/UIKIT/Modal","DS/WUXAutoComplete/AutoComplete","DS/Controls/Expander","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchcontrolGeneralTab"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_,m,f,C,y){"use strict";var v={_tagColorizeMap:null,_parentDiv:null,_predicateToCBMap:null,_includeWVal:"",_includeTagPredicate:"",_includeTagPredicateVal:"",_includeTagValCol:"",_filterTags:[],_allPredicates:[],predicateObj:[],_trackerData:[],render:function(e){this._parentDiv=e,this._tagColorizeMap={},this._predicateToCBMap=new Map,this.onRender()},onRender:function(a){var r=this;r.tabSettings=a;var n=t.is(r.tabSettings)&&t.is(r.tabSettings.sourceInfo)?r.tabSettings.sourceInfo:void 0;o.getAllPredicates(n).then((function(a){r.tagsToShowInCB=t.clone(a.colorization,!0),r._allPredicates=r.tagsToShowInCB,v._filterTags=r._filter6WRootPredicates(r.tagsToShowInCB),r.tagsSource=t.clone(a.sourceInfo,!0),r.div6WtagsColorizeSpan=e.create("div",{class:"scc_tagColorize_div",id:"search-center-tag-colorize"}).inject(r._parentDiv);var n=e.create("div",{class:"search_center_general_tab_div search_center_margin"}).inject(r.div6WtagsColorizeSpan),o=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"div_tag_olorize_text"}).inject(n);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:C.get("6WTagsFilter.ColorizeTagTitle")}).inject(o);let l=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_margin ",id:"tagColorizeSpan"}).inject(r.div6WtagsColorizeSpan);if(v.enableTagColorizeToggle=new s({type:"switch",label:C.get("6WTagsFilter.Tagcolorize.Toggle.label"),touchMode:!0,value:1}).inject(l),t.is(r.tabSettings)){if(!r.tabSettings.tagColorizeState)return;v.enableTagColorizeToggle.checkFlag=r.tabSettings.tagColorizeState}var c=e.create("div",{class:"search_center_div_tagcolrize_button search_center_general_display_flex ",id:"div_tag_colorize_card_combo_span"}).inject(r.div6WtagsColorizeSpan);let d=new g({label:C.get("6WTagsFilter.ColorizeTag.addbutton"),emphasize:"primary",displayStyle:"normal",domId:"tagColorize_AddButton",class:"button_tags"}).inject(c),h=new _({className:"site-reset",closable:!0,header:C.get("6WTagsFilter.ColorizeTag.addbutton.header"),body:"",footer:[v.tagColorizeAddButton=new g({label:C.get("6WTagsFilter.ColorizeTag.modal.text.add"),emphasize:"primary",displayStyle:"normal",domId:"tagColorize_Add_button",visibleFlag:!0,disabled:!0,onClick:function(){r._setIncludeTagValue(),v.tagColorizeAddButton.disabled=!0,h.hide()}}),new g({label:C.get("6WTagsFilter.ColorizeTag.modal.text.cancel"),emphasize:"primary",displayStyle:"normal",domId:"tagColorize_cancel_button",onClick:function(){h.hide(),r._clearTagValues(),v.tagColorizeAddButton.disabled=!0}})]}).inject(n);d.addEventListener("buttonclick",(function(){h.show()})),h.setBody(r._createModelBody("AddModal")),v.divWTreeWrapperView=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6Wtree_wrapper_Tagcolorize",styles:{"overflow- y":"auto","overflow- x":"auto"}}).inject(r.div6WtagsColorizeSpan),v.divWTreeWrapperView.addClassName("root-wrapper-view-scc");["What","Who","When","Where","Why","How"].forEach((t=>{v[`div${t}Content`]=e.create("div",{class:"What"===t?"search_center_div_allW search_center_only_grid search_center_top_margin":" search_center_only_grid search_center_top_margin",id:`content_${t}_SCCTagColorization`})}));const m=[{rootW:"ds6w:what",wExpandStatus:!0,expandDirection:"vertical",content:v.divWhatContent,noResize:!1,lang:"undefined"!=typeof widget?widget.lang:void 0},{rootW:"ds6w:who",wExpandStatus:!0,expandDirection:"vertical",content:v.divWhoContent,noResize:!1,lang:"undefined"!=typeof widget?widget.lang:void 0},{rootW:"ds6w:when",wExpandStatus:!0,expandDirection:"vertical",content:v.divWhenContent,noResize:!1,lang:"undefined"!=typeof widget?widget.lang:void 0},{rootW:"ds6w:where",wExpandStatus:!0,expandDirection:"vertical",content:v.divWhereContent,noResize:!1,lang:"undefined"!=typeof widget?widget.lang:void 0},{rootW:"ds6w:why",wExpandStatus:!0,expandDirection:"vertical",content:v.divWhyContent,noResize:!1,lang:"undefined"!=typeof widget?widget.lang:void 0},{rootW:"ds6w:how",wExpandStatus:!0,expandDirection:"vertical",content:v.divHowContent,noResize:!1,lang:"undefined"!=typeof widget?widget.lang:void 0}];for(let e of m){new p(e).render().inject(v.divWTreeWrapperView)}var f=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(o);u.tooltip(f,{position:"top",shortHelp:C.get("6WTagsFilter.ColorizeTag.PredicateComboBox.info")}),t.is(r.tabSettings)&&r._loadSavedPredicatesInTree(r.tabSettings.colorization),!1===v.enableTagColorizeToggle.checkFlag?(o.addClassName("search_center_disable"),v.divWTreeWrapperView.addClassName("search_center_disable"),c.addClassName("search_center_disable")):(o.removeClassName("search_center_disable"),v.divWTreeWrapperView.removeClassName("search_center_disable"),c.removeClassName("search_center_disable")),v.enableTagColorizeToggle.addEventListener("change",function(){i.enableButtons(),!1===v.enableTagColorizeToggle.checkFlag?(o.addClassName("search_center_disable"),v.divWTreeWrapperView.addClassName("search_center_disable"),c.addClassName("search_center_disable")):(o.removeClassName("search_center_disable"),v.divWTreeWrapperView.removeClassName("search_center_disable"),c.removeClassName("search_center_disable"))}.bind(this))})),i.disableButtons()},onResetTabTagColorize:function(e){var a=this;a.tabSettings=e,a._cleanUpColorizeTagsIn6WTree(),t.is(a.tabSettings)?(a._loadSavedPredicatesInTree(a.tabSettings.colorization),a.tabSettings.tagColorizeState&&t.is(v.enableTagColorizeToggle)&&(v.enableTagColorizeToggle.checkFlag=a.tabSettings.tagColorizeState)):t.is(v.enableTagColorizeToggle)&&(v.enableTagColorizeToggle.checkFlag=!1,a._cleanupUI())},_createModelBody:function(t){let a=this,i=[],o=e.create("div",{id:t+"-div",styles:{"min-height":"100px",width:"auto"}}),s=e.create("div",{id:t+"divTagColorize"}).inject(o),l=e.create("div",{id:t+"-combodiv"}).inject(s),c=[{label:h.getRootWDisplayName("what",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-what"},{label:h.getRootWDisplayName("who",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-who"},{label:h.getRootWDisplayName("when",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-when"},{label:h.getRootWDisplayName("where",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-where"},{label:h.getRootWDisplayName("why",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-why"},{label:h.getRootWDisplayName("how",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-how"}];v.wSelectCombo=new r({elementsList:c,class:"search_center_div_left_6w search_center_general_display_flex",placeholder:"Select a W category",touchMode:!0,enableSearchFlag:!1,actionOnClickFlag:!1,reachablePlaceholderFlag:!0}).inject(l),v.wSelectCombo.addEventListener("change",(function(){a._includeWVal=v.wSelectCombo.currentValue;let e=a._filterTags;switch(a._includeWVal){case"What":i=e.whatPredicates;break;case"Who":i=e.whoPredicates;break;case"When":i=e.whenPredicates;break;case"Where":i=e.wherePredicates;break;case"Why":i=e.whyPredicates;break;case"How":i=e.howPredicates}v.divTagsAutoComp.removeClassName("search_center_disable"),v.divValueToColorizeAutoComp.removeClassName("search_center_disable"),v.divColorPicker.removeClassName("search_center_disable"),a.predicateTagAutoComp.elementsTree=a._predicateToShow(i)}));let d=e.create("div",{class:"search_center_text_heading   ",id:"Tag_text_div"}).inject(s);v.divTagsAutoComp=e.create("div",{class:"search_center_general_tab_div",id:"Tag_div"}).inject(s),e.create("p",{text:C.get("6WTagsFilter.ColorizeTag.modal.text.tag")}).inject(d),v.predicateTagAutoComp=new m({multiSearchMode:!1,keepSearchResultsFlag:!1,allowFreeInputFlag:!1,placeholder:C.get("Search")}).inject(v.divTagsAutoComp);let u=e.create("div",{class:"search_center_text_heading   ",id:"Value_to_colorize_div"}).inject(s);return v.divValueToColorizeAutoComp=e.create("div",{class:"search_center_general_tab_div",id:"valueToColorize_Div"}).inject(s),e.create("p",{text:C.get("6WTagsFilter.ColorizeTag.modal.text.value")}).inject(u),v.tagValueToColorize=new m({multiSearchMode:!1,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,placeholder:C.get("Search")}).inject(v.divValueToColorizeAutoComp),v.predicateTagAutoComp.addEventListener("change",(function(){let e=v.predicateTagAutoComp.selectedItems;if(e&&e._options){let t=e._options.label;a.tagValueToColorize.elementsTree=a._selectedItemsValueToShow(t)}})),v.divColorPicker=e.create("div",{class:"search_center_text_heading   ",id:"color_picker_div"}).inject(s),e.create("p",{text:C.get("6WTagsFilter.ColorizeTag.modal.text.color")}).inject(v.divColorPicker),v.tagColorizeColorPicker=new n({initialValue:"#ffffff",colorPickerLabel:"tagColorize"}).inject(v.divColorPicker),v.tagColorizeColorPicker.addEvent("onColorChange",(function(e){let t=v.predicateTagAutoComp.selectedItems;a._includeTagPredicate=t._options.label;let r=v.tagValueToColorize.selectedItems;a._includeTagPredicateVal=r._options.label,a._includeTagValCol=e.color,e&&v.predicateTagAutoComp.selectedItems&&v.tagValueToColorize.selectedItems&&v.wSelectCombo.currentValue&&(v.tagColorizeAddButton.disabled=!1)})),v.divTagsAutoComp.addClassName("search_center_disable"),v.divValueToColorizeAutoComp.addClassName("search_center_disable"),v.divColorPicker.addClassName("search_center_disable"),o},_removePredicateValue:function(e,t,a){var r=e.target;i.enableButtons(),this._addToCBModel(this._predicateToCBMap.get(t),a,this.tagsToShowInCB[t].values[a]),this._removePredicateValueFromMemory(t,a),r.getParent().destroy()},getInputsToStore:function(){v._trackerData&&(Object.values(v._trackerData).forEach((e=>{i.trackerPublisher(e.category,e.action,{pd1:e.pd1,pd2:e.pd2,pd3:e.pd3,pd4:e.pd4,pd5:e.pd5})})),v._trackerData=[]);var e=this,a={};a.colorization=t.clone(this._tagColorizeMap,!0);var r={};return Object.keys(e._tagColorizeMap).forEach((t=>{Object.keys(e._tagColorizeMap[t]).forEach((a=>{r[t]||(r[t]={}),r[t][a]=e.tagsSource[t][a]}))})),a.sourceInfo=r,a.tagColorizeState=v.enableTagColorizeToggle.checkFlag,e.tabSettings=a,a},_storePredicateValuesInMemory:function(e,a,r){if(t.is(e)||t.is(a)||t.is(r)){let o,s=this.tagsToShowInCB[e].values;for(let e in s)s[e]===a&&(o=e);t.is(this._tagColorizeMap[e])||(this._tagColorizeMap[e]={});var n=this.tagsToShowInCB[e].values[o],i=this;Object.keys(this.tagsToShowInCB[e].values).forEach((function(t){i.tagsToShowInCB[e].values[t]==n&&(i._tagColorizeMap[e][t]=r)}))}},_removePredicateValueFromMemory:function(e,a){if(t.is(e)&&t.is(a)){var r=this.tagsToShowInCB[e].values[a],n=this;Object.keys(this._tagColorizeMap[e]).forEach((function(t){n.tagsToShowInCB[e].values[t]==r&&delete n._tagColorizeMap[e][t]}))}},_removePredicateFromMemory:function(e){t.is(e)&&delete this._tagColorizeMap[e]},_predicateToShow:function(e){var t=[];return Object.keys(e).forEach((function(a){t.push({label:e[a].nls,value:a})})),t},_selectedItemsValueToShow:function(e){var t=this,a=[],r={};return Object.keys(t.tagsToShowInCB).forEach((n=>{t.tagsToShowInCB[n].nls===e&&Object.keys(t.tagsToShowInCB[n].values).forEach((function(e){var i=t.tagsToShowInCB[n].values[e];r[i]||(a.push({label:i,value:e}),r[i]=!0)}))})),a},_cleanupUI:function(){this._tagColorizeMap={},this._predicateToCBMap.clear()},_filter6WRootPredicates:function(e){let t=[],a=[],r=[],n=[],i=[],o=[];const s={};return Object.keys(e).forEach((s=>{switch(!0){case s.startsWith("ds6w:how"):o.push(e[s]);break;case s.startsWith("ds6w:what"):t.push(e[s]);break;case s.startsWith("ds6w:when"):a.push(e[s]);break;case s.startsWith("ds6w:where"):n.push(e[s]);break;case s.startsWith("ds6w:who"):i.push(e[s]);break;case s.startsWith("ds6w:why"):r.push(e[s])}})),s.whatPredicates=t,s.whoPredicates=i,s.whenPredicates=a,s.wherePredicates=n,s.whyPredicates=r,s.howPredicates=o,s},_setIncludeTagValue:function(a){let r,n=this;if(t.is(a)){var s=o.getPredicateDetails(n._allPredicates,a);r=s.wValue.toLowerCase(),this.predicateObj._includeTagValCol=s.predicateValueColor,this.predicateObj._includeTagPredicateVal=s.predicateValue,this.predicateObj._includeTagPredicate=s.predicate;let e=o.getPredicateUri(n._allPredicates,s.predicateValue,r,!1);n._storePredicateValuesInMemory(e,s.predicateValue,s.predicateValueColor)}else{r=n._includeWVal.toLowerCase();let e=o.getPredicateUri(n._allPredicates,n._includeTagPredicate,r,!0);n._storePredicateValuesInMemory(e,n._includeTagPredicateVal,n._includeTagValCol),this.predicateObj._includeTagValCol=n._includeTagValCol,this.predicateObj._includeTagPredicateVal=n._includeTagPredicateVal,this.predicateObj._includeTagPredicate=n._includeTagPredicate,n._trackerData.push({category:"SearchControlCenter-6WTag",action:"selectValue",pd1:"Tag Colorization",pd2:"IncludeValue",pd3:n._includeTagPredicate,pd4:n._includeTagPredicateVal,pd5:n._includeTagValCol})}let l=(n._includeTagPredicate||s.predicate).replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_");v.mainContentOf6W=e.create("div",{class:l,id:"main_Content"+l}),v._handlePredicateInsertion(r,s),i.enableButtons(),v._clearTagValues()},_loadSavedPredicatesInTree:function(e){let a=this;t.is(e)&&Object.keys(e).length>0&&Object.keys(e).forEach((function(r){let n=e[r];if("object"==typeof n&&null!==n)Object.entries(n).forEach((([e,n])=>{if(t.is(a.tagsToShowInCB)){let t=a.tagsToShowInCB[r].values[e],i={[r]:{[t]:n}};a._setIncludeTagValue(i)}}));else{let e={[r]:n};a._setIncludeTagValue(e)}})),i.disableButtons()},_clearTagValues:function(){let e=this;e._includeWVal="",e._includeTagPredicate="",e._includeTagPredicateVal="",e._includeTagValCol="",v.wSelectCombo.elementsList=[];let t=[{label:h.getRootWDisplayName("what",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-what"},{label:h.getRootWDisplayName("who",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-who"},{label:h.getRootWDisplayName("when",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-when"},{label:h.getRootWDisplayName("where",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-where"},{label:h.getRootWDisplayName("why",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-why"},{label:h.getRootWDisplayName("how",!1,"undefined"!=typeof widget?widget.lang:void 0),icon:"fonticon fonticon-3ds-how"}];v.wSelectCombo.elementsList=t,v.predicateTagAutoComp.elementsTree=[],v.tagValueToColorize.elementsTree=[];const a=document.getElementsByClassName("scc_color_picker_tagColorize");a.length>0&&(a[0].style.backgroundColor="#ffffff"),v.divTagsAutoComp.addClassName("search_center_disable"),v.divValueToColorizeAutoComp.addClassName("search_center_disable"),v.divColorPicker.addClassName("search_center_disable")},_addInExisting:function(a,r,n,s){let l=this,c="",d=document.getElementById("6Wtree_wrapper_Tagcolorize"),u=a._includeTagPredicateVal.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_"),p=e.create("div",{id:"Add_in_existing"+u}),h=e.create("div",{class:"search_center_general_display_flex include_tags",id:"include-tag-div-contenttag-"+a._includeTagPredicateVal,styles:{display:"flex","align-items":"center","justify-content":"space-between",width:"100%",font:'1.1em / 1.3em Tahoma, Verdana, Arial, Helvetica, "Bitstream Vera Sans", sans-serif',gap:"10px"}}).inject(p),_=(e.create("span",{class:"backgroundColorDiv",id:s.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_"),styles:{"background-color":a._includeTagValCol||savedSetting.color,display:"inline-block",width:"25px",height:"25px","margin-left":"5px","margin-top":"2px"}}).inject(h),e.create("p",{id:"include-tag-div-text",text:a._includeTagPredicateVal||savedSetting.value,styles:{"margin-left":"10px","margin-top":"0","flex-grow":"1"}}).inject(h),e.create("div",{class:"search_center_general_display_flex",id:"divtrashbutton_"+u,styles:{"margin-left":"4px"}}).inject(h));new g({displayStyle:"lite",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(_).addEventListener("buttonclick",(function(){let e="divtrashbutton_"+u,t=document.getElementById(e),a="Add_in_existing"+u,r=t;if(t)for(;r&&(!r.id||!r.id.includes(a));)r=r.parentElement;const n={content_What_SCCTagColorization:"why",content_What_SCCTagColorization:"what",content_Where_SCCTagColorization:"where",content_When_SCCTagColorization:"when",content_How_SCCTagColorization:"how",content_Who_SCCTagColorization:"who"},s=Object.keys(n);let g=t;for(;g;){if(s.includes(g.id)){c=n[g.id];break}g=g.parentElement}const p=d.querySelector("#content-"+c).querySelectorAll(".wux-controls-expander-body");let h=0;p.forEach((e=>{const t=e.querySelectorAll(".include_tags");h+=t.length})),r.destroy();let _=u.replace(/_/g," "),m=o.getPredicateUri(l._allPredicates,_,c,!1);l._removePredicateValueFromMemory(m,_),i.enableButtons()}));let m=("#innerContent"+r+n).toLowerCase();if(t.is(d)){let e=d.querySelector(m);e&&p.inject(e)}},_updateTagColor:function(e,t,a){let r=o.getPredicateUri(this._allPredicates,e._includeTagPredicate,null,!0);this._storePredicateValuesInMemory(r,e._includeTagPredicateVal,e._includeTagValCol),i.enableButtons(),t.querySelectorAll("#"+a.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_")).forEach((t=>{t.style.backgroundColor=e._includeTagValCol})),v._clearTagValues()},_createExpanderUI:function(a,r,n,s){let l=this,c=document.getElementById("6Wtree_wrapper_Tagcolorize"),d=(l._includeTagPredicate||n.predicate).replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_"),u=(l._includeTagPredicateVal||n.predicateValue).replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_");v.divtreeContent=e.create("div",{id:"include-tag-div-treecontent",styles:{height:"auto",overflow:"visible",padding:"1px 10px 1px 1px"}}),v.mainDivIncludeContent=e.create("div",{id:"include-tag-div-contenttag"}).inject(v.divtreeContent);let p=("expander_"+a.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_")+r).toLowerCase();v.tagColorizeExpander=new f({style:"simple",header:a,body:v.mainContentOf6W,expandedFlag:!0,domId:p}).inject(v.mainDivIncludeContent);let h=("innerContent"+(l._includeWVal?l._includeWVal:n.wValue)+d).toLowerCase();v.innerContent=e.create("div",{id:h,styles:{}}).inject(v.mainContentOf6W);let _=e.create("div",{class:"search_center_general_display_flex include_tags",id:"include-tag-div-contenttag",styles:{display:"flex","align-items":"center","justify-content":"flex-start",width:"100%",font:'1.1em / 1.3em Tahoma, Verdana, Arial, Helvetica, "Bitstream Vera Sans", sans-serif',gap:"10px"}}).inject(v.innerContent),m=(e.create("span",{class:"backgroundColorDiv",id:s.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_"),styles:{"background-color":l._includeTagValCol?l._includeTagValCol:n.predicateValueColor,display:"inline-block",width:"25px",height:"25px","margin-left":"5px","margin-top":"2px"}}).inject(_),e.create("p",{text:l._includeTagPredicateVal?l._includeTagPredicateVal:n.predicateValue,id:"include-tag-div-text",styles:{"margin-left":"10px","margin-top":"0","flex-grow":"1"}}).inject(_),e.create("div",{class:"search_center_general_display_flex ",id:"divtrashbutton_"+u,styles:{"margin-left":"auto"}}).inject(_));new g({displayStyle:"lite",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(m).addEventListener("buttonclick",(function(e){let t="",a="divtrashbutton_"+u,r=document.getElementById(a);const n={content_Why_SCCTagColorization:"why",content_What_SCCTagColorization:"what",content_Where_SCCTagColorization:"where",content_When_SCCTagColorization:"when",content_How_SCCTagColorization:"how",content_Who_SCCTagColorization:"who"},s=Object.keys(n);let d=r,g=null;for(;d;)if(d=d.parentElement,d&&d.id.includes("innercontent")){g=d;break}for(;d;){if(s.includes(d.id)){t=n[d.id];break}d=d.parentElement}const p=d.querySelectorAll(".wux-controls-expander-body");let h=0;p.forEach((()=>{h++}));let _,m=g.querySelectorAll(".include_tags").length;if(h-1==0&&d&&m-1==0){let e=d.id.toLowerCase();if(e.includes("what")){let e=c.querySelector("#content-what");o.collapseRootWArea(e),t="what"}if(e.includes("who")){let e=c.querySelector("#content-who");o.collapseRootWArea(e),t="who"}if(e.includes("when")){let e=c.querySelector("#content-when");o.collapseRootWArea(e),t="when"}if(e.includes("where")){let e=c.querySelector("#content-where");o.collapseRootWArea(e),t="where"}if(e.includes("why")){let e=c.querySelector("#content-why");o.collapseRootWArea(e),t="why"}if(e.includes("how")){let e=c.querySelector("#content-how");o.collapseRootWArea(e),t="how"}}let f=u.replace(/_/g," ");if(h-1==0&&m-1==0){r.getParent().getParent().getParent().getParent().getParent().getParent().getParent().destroy(),_=o.getPredicateUri(l._allPredicates,f,t,!1),l._removePredicateFromMemory(_)}else if(h-1==0&&d&&m-1==1){r.getParent().destroy(),_=o.getPredicateUri(l._allPredicates,f,t,!1),l._removePredicateValueFromMemory(_,f)}else if(m>1){r.getParent().destroy(),_=o.getPredicateUri(l._allPredicates,f,t,!1),l._removePredicateValueFromMemory(_,f)}else if(m-1==0){g.getParent().getParent().getParent().getParent().getParent().destroy(),_=o.getPredicateUri(l._allPredicates,f,t,!1),l._removePredicateFromMemory(_)}i.enableButtons()}));const C={what:"divWhatContent",who:"divWhoContent",when:"divWhenContent",where:"divWhereContent",why:"divWhyContent",how:"divHowContent"};if(t.is(null)||t.is(l._includeTagPredicateVal)){const e=C[r];if(e&&(v.divtreeContent.inject(v[e]),t.is(c))){const e=c.querySelector(`#content-${r}`);e&&o.toggleRootWArea(e)}}},_handlePredicateInsertion:function(e,a){let r,n,i,s=document.getElementById("6Wtree_wrapper_Tagcolorize"),l=this,c=(l._includeTagPredicate||a.predicate).replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_");switch(i=t.is(a)?(a.predicate+a.predicateValue).toLowerCase().replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_"):(l._includeTagPredicate+l._includeTagPredicateVal).toLowerCase().replace(/[&\/\\#, +()$~%.'":*?<>{}]/g,"_"),e){case"what":r=o.getWTreeContentsForTagColorize(v.divWhatContent),n=l._includeTagPredicate||a.predicate;break;case"who":r=o.getWTreeContentsForTagColorize(v.divWhoContent),n=l._includeTagPredicate||a.predicate;break;case"when":r=o.getWTreeContentsForTagColorize(v.divWhenContent),n=l._includeTagPredicate||a.predicate;break;case"where":r=o.getWTreeContentsForTagColorize(v.divWhereContent),n=l._includeTagPredicate||a.predicate;break;case"why":r=o.getWTreeContentsForTagColorize(v.divWhyContent),n=l._includeTagPredicate||a.predicate;break;case"how":r=o.getWTreeContentsForTagColorize(v.divHowContent),n=l._includeTagPredicate||a.predicate;break;default:return}if(r){if(o.ifExistInPredicates(r,n)){if(o.ifExistInPredicateValue(r,v.predicateObj))return void l._updateTagColor(v.predicateObj,s,i);l._addInExisting(v.predicateObj,e,c,i)}else v._createExpanderUI(n,e,a,i)}},_cleanUpColorizeTagsIn6WTree:function(){let e=document.getElementById("6Wtree_wrapper_Tagcolorize");if(t.is(v.divWhatContent)){for(let t=v.divWhatContent.childElementCount-1;t>=0;t--)if(v.divWhatContent.childNodes[t].destroy(),0==v.divWhatContent.childElementCount){let t=e.querySelector("#content-what");o.collapseRootWArea(t)}}if(t.is(v.divWhoContent)){for(let t=v.divWhoContent.childElementCount-1;t>=0;t--)if(v.divWhoContent.childNodes[t].destroy(),0==v.divWhoContent.childElementCount){let t=e.querySelector("#content-who");o.collapseRootWArea(t)}}if(t.is(v.divWhenContent)){for(let t=v.divWhenContent.childElementCount-1;t>=0;t--)if(v.divWhenContent.childNodes[t].destroy(),0==v.divWhenContent.childElementCount){let t=e.querySelector("#content-when");o.collapseRootWArea(t)}}if(t.is(v.divWhereContent)){for(let t=v.divWhereContent.childElementCount-1;t>=0;t--)if(v.divWhereContent.childNodes[t].destroy(),0==v.divWhereContent.childElementCount){let t=e.querySelector("#content-where");o.collapseRootWArea(t)}}if(t.is(v.divWhyContent)){for(let t=v.divWhyContent.childElementCount-1;t>=0;t--)if(v.divWhyContent.childNodes[t].destroy(),0==v.divWhyContent.childElementCount){let t=e.querySelector("#content-why");o.collapseRootWArea(t)}}if(t.is(v.divHowContent)){for(let t=v.divHowContent.childElementCount-1;t>=0;t--)if(v.divHowContent.childNodes[t].destroy(),0==v.divHowContent.childElementCount){let t=e.querySelector("#content-how");o.collapseRootWArea(t)}}}};return v})),define("DS/SearchControlCenter/scripts/Searchcontrol6WTagsFilter",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/LineEditor","DS/Controls/Editor","DS/UIKIT/Popover","DS/UIKIT/Mask","DS/FedDictionaryAccess/FedDictionaryAccessAPI","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/SearchControlCenter_AllowedApps.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SCCTagColorization","DS/SearchControlCenter/scripts/ControlledVocabulary/SCCControlledVocabulary","DS/SearchControlCenter/scripts/ControlledOntology/SCCControlledOntology","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCInContextSearchManager","text!DS/SNInfraUX/assets/SearchcontrolCenter_TagRelationship.json","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/TaggerConfigAccess","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/SNInfraUX/SearchControlCenterFetchService","DS/UIKIT/Scroller","DS/SearchControlCenter/Views/SearchControlCenterLayoutView","DS/Controls/Button","DS/Controls/ButtonGroup","DS/SNInfraUX/SearchPreferences","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Windows/ImmersiveFrame","DS/TagNavigator/simplified/views/WrapperView","DS/TagNavigator/Predicate","DS/Controls/Label","DS/Utilities/WebUXColorEnums","DS/WUXAutoComplete/AutoComplete"],(function(e,t,a,r,n,i,o,s,l,c,d,u,g,p,h,_,m,f,C,y,v,b,S,T,x,w,D,A,I,P,W,N,j,O,E,B,k,F,R,M){"use strict";let V={preferredPredicatesComboBox:null,preferredWhatCards:null,preferredWhereCards:null,preferredWhoCards:null,preferredWhenCards:null,preferredHowCards:null,preferredWhyCards:null,excludedPredicatesComboBox:null,excludedWhatCards:null,excludedWhereCards:null,excludedWhoCards:null,excludedWhenCards:null,excludedHowCards:null,excludedWhyCards:null,checkboxAttributeDisplay:null,toggleActivateTagOperator:null,applicationCntxtComboBox:null,companyTagsSearchSuggest:null,toggleRangeValuesClassification:null,_attributesMap:{},_6WSubProperties:[],_6WPredicatesMap:[],_listOfDefaultAndTags:[],_listOfIrrelevantAndTags:[],_appsMap:{},_filter6WRootPredicatesPromise:a.deferred(),_rootWOfPredicatesPromise:a.deferred(),_datasetInput:null,iconurlInput:"",prefixInput:"",scrollerText:"",_expertGrp:"",_advocacyGrp:"",scrollerBody:{},_controlledVocabMode:!1,_includeTagVal:"",_includeTagUri:"",_excludeTagVal:"",_includeWVal:"",_includeDHierarchyTagVal:"",_operatorOR:"",_operatorAND:"",_operatorXOR:"",_operatortag:"",_textOnCard:"",_wPredicates:[],_trackerData:[],onRenderFacet:function(a){p.trackerPublisher("SearchControlCenter","ClickOnTab",{pd1:"Tags"});let i=e.create("div",{class:"scc_main_div",id:"search-center-6w1"}).inject(a);v.getOption("sccRangeValuesClassification")&&(V.toggleRangeValuesClassification=new r({type:"switch",label:u.get("6WTagsFilter.RangeValuesClassification.Toggle.label"),value:0,checkFlag:!0,touchMode:!0}).inject(i),V.toggleRangeValuesClassification.addEventListener("change",(function(){p.enableButtons()})));let o=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex  search_center_add_category_bottom",id:"tag_Display_Div_Span"}).inject(i);e.create("p",{class:"search_center_text_heading search_center_general_display_flex",text:u.get("6WTagsFilter.tagsDisplay.title")}).inject(o);let l=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"controlledVocabModeSpan"}).inject(i),c=(e.create("div",{class:"search_center_div_toggle search_center_general_display_flex",id:"Enable_option_to_edit_tags_categories"}).inject(l),e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"Select_Application_Configuration_Div_Span"}).inject(i));e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex",text:u.get("6WTagsFilter.SelectAppConfiguration.display")}).inject(c);let d=e.create("div",{class:"search_center_div_left_6w search_center_only_grid",id:"context-Application-6WTags-combo"}).inject(i),b=[],S=JSON.parse(g);if(t.is(S)&&S.hasOwnProperty("applications")&&t.is(S.applications,"array"))for(let be=0;be<S.applications.length;be++){let Se=S.applications[be];V._appsMap[Se.nlsName]=Se.appID,b.push(Se.nlsName)}V.applicationConfigComboBox=new n({elementsList:b,currentValue:b[0],selectedIndex:0,touchMode:!0,mainElementVisibleFlag:!0}).inject(d),V.applicationConfigComboBox.addEventListener("change",function(){p.enableButtons(),p.clearLocalCacheFor6WTags(),V.cleanUpAttributeTags();let e=V._getWtreeContents(V.divWhatContent);if(0===e.predicates.length&&0===e.excluded_predicates.length){let e=document.getElementById("content-what");V.collapseRootWArea(e)}let a=V._getWtreeContents(V.divWhoContent);if(0===a.predicates.length&&0===a.excluded_predicates.length){let e=document.getElementById("content-who");V.collapseRootWArea(e)}let r=V._getWtreeContents(V.divWhenContent);if(0===r.predicates.length&&0===r.excluded_predicates.length){let e=document.getElementById("content-when");V.collapseRootWArea(e)}let n=V._getWtreeContents(V.divWhereContent);if(0===n.predicates.length&&0===n.excluded_predicates.length){let e=document.getElementById("content-where");V.collapseRootWArea(e)}let i=V._getWtreeContents(V.divWhyContent);if(0===i.predicates.length&&0===i.excluded_predicates.length){let e=document.getElementById("content-why");V.collapseRootWArea(e)}let o=V._getWtreeContents(V.divHowContent);if(0===o.predicates.length&&0===o.excluded_predicates.length){let e=document.getElementById("content-how");V.collapseRootWArea(e)}D.getAppWisePredicates(V._appsMap[V.applicationConfigComboBox.currentValue],!1).then((function(e){let a=null,r=null;if(e.hasOwnProperty("preferred_predicates")&&(a=e.preferred_predicates),e.hasOwnProperty("excluded_predicates")&&(r=e.excluded_predicates),t.is(a)&&a.length>0)for(let e=0;e<a.length;e++){let t=a[e].uri,r=V._get6WVal(t),n={label:V._attributesMap[t],uri:t,wVal:r};V._includeTagValue(n)}if(t.is(r)&&r.length>0)for(let e=0;e<r.length;e++){let t=r[e].uri,a=V._get6WVal(t),n={label:V._attributesMap[t],uri:t,wVal:a};V._excludeTagValue(n)}}),(function(){console.log("Error: Default json for preferred predicates has not been defined yet for this APP")}))}.bind(this));let w=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"div_Select_App_Conf_Tag"}).inject(i);e.create("p",{class:"info_Details search_center_general_display_flex",text:u.get("6WTagsFilter.SelectAppConfigurationtagline.display")}).inject(w);let I=e.create("div",{class:"search_center_div_right_6w search_center_only_grid search_center_margin",id:"6WtagsButtonspan"}).inject(i),N=new W({type:"checkbox"}).inject(I),j=new P({label:u.get("SearchCenter6WTagsFilter.includetagin6WtreeButton.value"),emphasize:"primary",displayStyle:"normal",domId:"includeTag"});N.addChild(j);let O=new P({label:u.get("SearchCenter6WTagsFilterexcludetagin6WtreeButton.value"),emphasize:"secondary",displayStyle:"normal",domId:"ExcludeTag"});N.addChild(O);let E=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"controlledVocabToggleSpan"}).inject(i),k=this,F=new T({className:"site-reset",closable:!0,header:u.get("SearchCenter6WTagsFilter.includetagin6WtreeButton.value"),body:"",footer:[V.Include_button=new P({label:"Include",emphasize:"primary",displayStyle:"normal",domId:"Include_button",visibleFlag:!0,disabled:!0,onClick:function(){k._includeTagValue(),F.hide(),V.Include_button.disabled=!0,V.selectWComboForIncludeModal.elements.container.children[0].children[1].click()}}),new P({label:u.get("6WTagsFilter.ColorizeTag.modal.text.cancel"),emphasize:"primary",displayStyle:"normal",domId:"Include_cancel_button",onClick:function(){F.hide(),V.selectWComboForIncludeModal.elements.container.children[0].children[1].click(),V.Include_button.disabled=!0}})]}).inject(E);F.setBody(this._createModelBody("includeModal")),j.addEventListener("buttonclick",(function(){F.show()}));let R=new T({className:"site-reset",closable:!0,header:u.get("SearchCenter6WTagsFilterexcludetagin6WtreeButton.value"),body:"",footer:[V.Exclude_button=new P({label:"Exclude",emphasize:"primary",displayStyle:"normal",domId:"Exclude_button",visibleFlag:!0,disabled:!0,onClick:function(){k._excludeTagValue(),R.hide(),V.selectWComboForExcludeModal.elements.container.children[0].children[1].click(),V.Exclude_button.disabled=!0}}),new P({label:u.get("6WTagsFilter.ColorizeTag.modal.text.cancel"),emphasize:"primary",displayStyle:"normal",domId:"Exclude_cancel_button",onClick:function(){R.hide(),V.selectWComboForExcludeModal.elements.container.children[0].children[1].click(),V.Exclude_button.disabled=!0}})]}).inject(E);O.addEventListener("buttonclick",(function(){R.show()})),R.setBody(this._createModelBody("excludeModal")),V.divWtreeWrapperview=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6Wtree_wrapper",styles:{"overflow- y":"auto","overflow- x":"auto"}}).inject(i),V.divWtreeWrapperview.addClassName("root-wrapper-view-scc"),V.divWhatContent=e.create("div",{class:" search_center_only_grid search_center_top_margin",id:"6W_What_Content_div"}),V.divWhoContent=e.create("div",{class:" search_center_only_grid search_center_top_margin",id:"6W_Who_Content_div"}),V.divWhenContent=e.create("div",{class:" search_center_only_grid search_center_top_margin",id:"6W_When_Content_div"}),V.divWhereContent=e.create("div",{class:" search_center_only_grid search_center_top_margin",id:"6W_Where_Content_div"}),V.divWhyContent=e.create("div",{class:" search_center_only_grid search_center_top_margin",id:"6W_Why_Content_div"}),V.divHowContent=e.create("div",{class:" search_center_only_grid search_center_top_margin",id:"6W_How_Content_div"});const M=[{rootW:"ds6w:what",wExpandStatus:!0,expandDirection:"vertical",content:V.divWhatContent,noResize:!0,lang:this.getWidgetLan()},{rootW:"ds6w:who",wExpandStatus:!0,expandDirection:"vertical",content:V.divWhoContent,noResize:!1,lang:this.getWidgetLan()},{rootW:"ds6w:when",wExpandStatus:!0,expandDirection:"vertical",content:V.divWhenContent,noResize:!1,lang:this.getWidgetLan()},{rootW:"ds6w:where",wExpandStatus:!0,expandDirection:"vertical",content:V.divWhereContent,noResize:!1,lang:this.getWidgetLan()},{rootW:"ds6w:why",wExpandStatus:!0,expandDirection:"vertical",content:V.divWhyContent,noResize:!1,lang:this.getWidgetLan()},{rootW:"ds6w:how",wExpandStatus:!0,expandDirection:"vertical",content:V.divHowContent,noResize:!1,lang:this.getWidgetLan()}];for(let Te of M){new B(Te).render().inject(V.divWtreeWrapperview)}let U=e.create("div",{class:"scc_tagsOperator_div",id:"search-center-6w2"}).inject(a),L=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_add_category_bottom",id:"tagOperatorText"}).inject(U);e.create("p",{class:"scc_text_heading search_center_general_display_flex ",text:u.get("6WTagsFilter.tagOperator.title")}).inject(L);let Q=e.create("div",{class:"search_center_general_tab_div search_center_top_margin ",id:"tagoperatorSpan"}).inject(U),z=e.create("div",{class:"search_center_div_toggle search_center_general_display_flex ",id:"toggleenabletagoperatortext"}).inject(Q);V.toggleActivateTagOperator=new r({type:"switch",label:u.get("6WTagsFilter.TagOperator.Toggle.label"),value:0,touchMode:!0}).inject(z),V.toggleActivateTagOperator.addEventListener("change",function(){V.upsertTrackerEntrytag({category:"SearchControlCenter-Tag",action:"selectValue",pd1:"ActivateTagOperatortoggle",pd2:V.toggleActivateTagOperator.checkFlag}),p.enableButtons(),!1===V.toggleActivateTagOperator.checkFlag?(V.tagRelationshipCards.addClassName("search_center_disable"),X.addClassName("search_center_disable")):(V.tagRelationshipCards.removeClassName("search_center_disable"),X.removeClassName("search_center_disable"))}.bind(this));let H=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(z);new s({target:H,className:".inverted",trigger:"hover",animate:"true",position:"right",body:u.get("6WTagsFilter.tagOperator.popover"),title:""});let G=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"tag_Operator_Span"}).inject(U);e.create("p",{class:"info_Details search_center_general_display_flex",text:u.get("6WTagsFilter.Tagoperatortagline.display")}).inject(G);let X=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_disable search_center_top_margin",id:"tag_Operator_Button_Span"}).inject(U),J=new P({label:u.get("AddTagOperatorButton.value"),emphasize:"primary",displayStyle:"normal",domId:"add_tag_operator",class:"button_tags"}).inject(X),q=new T({className:"site-reset",closable:!0,header:u.get("AddTagOperatorButton.value"),body:"",footer:[V.tagOperatorModalAdd=new P({label:"Add",emphasize:"primary",displayStyle:"normal",domId:"Add_button",visibleFlag:!0,disabled:!0,onClick:function(){k._addtagOperator(),q.hide(),V.selectWComboForTagOperatorModal.elements.container.children[0].children[1].click(),V.tagOperatorModalAdd.disabled=!0}}),new P({label:u.get("6WTagsFilter.ColorizeTag.modal.text.cancel"),emphasize:"primary",displayStyle:"normal",domId:"Cancel_Add_button",onClick:function(){q.hide(),V.selectWComboForTagOperatorModal.elements.container.children[0].children[1].click(),V.tagOperatorModalAdd.disabled=!0}})]}).inject(E);q.setBody(this._createTagOperatorModal("tagOperatorModal")),J.addEventListener("buttonclick",(function(){q.show()})),V.divDatagrid=e.create("div",{class:"search_center_div_left_6w search_center_only_grid ",id:"Datagrid-div",styles:{"overflow- y":"auto","overflow- x":"auto",height:"auto"}}).inject(U),V.tagRelationshipCards=e.create("div",{class:"search_center_created_categories_section_header search_center_div_left_6w search_center_disable ",id:"tag_operator_tagRelationshipCards"}).inject(V.divDatagrid);let K=e.create("div",{class:"search_center_created_categories_section_header search_center_font_and_color search_center_general_tab_div",id:"Tag_operator_table_span"}).inject(V.tagRelationshipCards),$=(e.create("div",{class:"search_center_font_and_color",text:u.get("Tag.display"),Styles:{}}).inject(K),e.create("div",{class:" search_center_general_tab_div"}).inject(K)),Y=(e.create("div",{class:"search_center_font_and_color margin_left_right",id:"OperatorText",text:u.get("Operator.display")}).inject($),e.create("div",{class:"search_center_font_and_color  margin_left_right",text:u.get("Action.display"),Styles:{"margin-right":"1px"}}).inject($),V.tagRelationshipCards);if(Y.childElementCount>1?Y.show():Y.hide(),this._listOfDefaultAndTags.length<=0&&this._listOfIrrelevantAndTags.length<=0){let xe=JSON.parse(y);if(t.is(xe)&&xe.hasOwnProperty("Predicates_Default_AND")&&t.is(xe.Predicates_Default_AND,"array"))for(let we=0;we<xe.Predicates_Default_AND.length;we++){let De=xe.Predicates_Default_AND[we];this._listOfDefaultAndTags.push(De)}if(t.is(xe)&&xe.hasOwnProperty("Predicates_Irrelevant_AND")&&t.is(xe.Predicates_Irrelevant_AND,"array"))for(let Ae=0;Ae<xe.Predicates_Irrelevant_AND.length;Ae++){let Ie=xe.Predicates_Irrelevant_AND[Ae];this._listOfIrrelevantAndTags.push(Ie)}}let Z=e.create("div",{class:"scc_taghierarchical_div",id:"search-center-6w3"}).inject(a),ee=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_add_category_bottom ",id:"tagHierarchicalText"}).inject(Z);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:u.get("6WTagsFilter.taghierarchical.title")}).inject(ee);let te=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"taghierarchicalSpan"}).inject(Z),ae=e.create("div",{class:"search_center_div_toggle search_center_general_display_flex",id:"toggleenabletaghierarchicaltext"}).inject(te);V.EnableTagHierarchicalON=new r({type:"switch",label:u.get("6WTagsFilter.taghierarchicaltoggle.label"),touchMode:!0,value:0}).inject(ae),V.EnableTagHierarchicalON.addEventListener("change",function(){p.enableButtons(),!1===V.EnableTagHierarchicalON.checkFlag?(V.divDHierarchyWtree.addClassName("search_center_disable"),ne.addClassName("search_center_disable")):(V.divDHierarchyWtree.removeClassName("search_center_disable"),ne.removeClassName("search_center_disable"))}.bind(this));let re=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(ae);new s({target:re,className:".inverted",trigger:"hover",animate:"true",position:"right",body:u.get("6WTagsFilter.EditTagHierarchical.popover"),title:""});let ne=e.create("div",{class:"search_center_div_right_6w search_center_general_display_flex",id:"divAddDeepHierarchyTag"}).inject(Z),ie=new P({label:u.get("AddDeepHierarchyTagButton.value"),emphasize:"primary",displayStyle:"normal",domId:"adddeepHierarchytag",class:"info_Details search_center_div_right"}).inject(ne),oe=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"divAddDeepHierarchyTag"}).inject(i),se=new T({className:"site-reset",closable:!0,header:u.get("AddDeepHierarchyTagButton.value"),body:"",footer:[V.hierarchyAdd_button=new P({label:"Add",emphasize:"primary",displayStyle:"normal",domId:"addDeepHierarchy_addButton",visibleFlag:!0,disabled:!0,onClick:function(){k._includeDHierarchyTagValue(),se.hide(),V.selectWComboForHierarchyModal.elements.container.children[0].children[1].click(),V.hierarchyAdd_button.disabled=!0}}),new P({label:u.get("6WTagsFilter.ColorizeTag.modal.text.cancel"),emphasize:"primary",displayStyle:"normal",domId:"addDeepHierarchy_cancelButton",onClick:function(){se.hide(),V.selectWComboForHierarchyModal.elements.container.children[0].children[1].click(),V.hierarchyAdd_button.disabled=!0}})]}).inject(oe);ie.addEventListener("buttonclick",(function(){se.show()})),se.setBody(this._createModelBody("hierarchyModal")),V.divDHierarchyWtree=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6Wtree_hierarchy_wrapper",styles:{"overflow- y":"auto","overflow- x":"auto"}}).inject(Z),V.divDHierarchyWtree.addClassName("root-wrapper-view-scc"),V.divDHierarchyWhatContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhat_Content_div"}),V.divDHierarchyWhoContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWho_Content_div"}),V.divDHierarchyWhenContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhen_Content_div"}),V.divDHierarchyWhereContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhere_Content_div"}),V.divDHierarchyWhyContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhy_Content_div"}),V.divDHierarchyHowContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyHow_Content_div"});const le=[{rootW:"ds6w:what",wExpandStatus:!1,expandDirection:"vertical",content:V.divDHierarchyWhatContent,noResize:!0,lang:this.getWidgetLan()},{rootW:"ds6w:who",wExpandStatus:!1,expandDirection:"vertical",content:V.divDHierarchyWhoContent,noResize:!1,lang:this.getWidgetLan()},{rootW:"ds6w:when",wExpandStatus:!1,expandDirection:"vertical",content:V.divDHierarchyWhenContent,noResize:!1,lang:this.getWidgetLan()},{rootW:"ds6w:where",wExpandStatus:!1,expandDirection:"vertical",content:V.divDHierarchyWhereContent,noResize:!1,lang:this.getWidgetLan()},{rootW:"ds6w:why",wExpandStatus:!1,expandDirection:"vertical",content:V.divDHierarchyWhyContent,noResize:!1,lang:this.getWidgetLan()},{rootW:"ds6w:how",wExpandStatus:!1,expandDirection:"vertical",content:V.divDHierarchyHowContent,noResize:!1,lang:this.getWidgetLan()}];for(let Pe of le){new B(Pe).render().inject(V.divDHierarchyWtree)}!1===V.EnableTagHierarchicalON.checkFlag?(V.divDHierarchyWtree.addClassName("search_center_disable"),ne.addClassName("search_center_disable")):(V.divDHierarchyWtree.removeClassName("search_center_disable"),ne.removeClassName("search_center_disable"));let ce=e.create("div",{class:"scc_taghierarchical_div",id:"tagCororize_div"}).inject(a),de=e.create("div",{class:"scc_taghierarchical_div scc_company_tag",id:"company_tag_div"}).inject(a);if(!0===this._isCompanyTagsActivated()){let We=e.create("div",{class:"search_center_category_section1 "}).inject(de),Ne=(e.create("div",{class:"search_center_main_div"}).inject(de),e.create("div",{class:"search_center_main_div"}).inject(de),e.create("div",{id:"Company_Tag_Main_Div"}).inject(de)),je=e.create("div",{class:"companyTagsLevelDiv search_center_add_category_bottom"}).inject(Ne),Oe=(e.create("div",{class:"search_center_text companyTagsLevelSubDiv  ",id:"companyTagsHeader",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel1i.text")}).inject(je),e.create("div",{class:" search_center_margin",id:"currentDatasetSpan"}).inject(Ne)),Ee=e.create("div",{class:" search_center_general_display_flex",id:"currentDatasetText"}).inject(Oe);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel2i.text")}).inject(Ee);let Be=e.create("div",{class:" company_tag_display_flex_center",id:"datasetSelectSpan"}).inject(Oe);var ue=e.create("input",{type:"text",class:"form-control",id:"datasetInput",placeholder:u.get("6WTagsFilter.ControlledOntology.Dataset.title"),disabled:"true"}).inject(Be);this._datasetInput=ue,this.getCurrentDatasetTitle(ue);var ge=new T({id:"datasetSelectormodal",className:"site-reset",closable:!0,header:"<h4>"+u.get("6WTagsFilter.CompanyTags.datasetSelectormodal.header")+"</h4>",body:"",footer:[new x({id:"datasetSelectormodalUpdateBtn",value:u.get("6WTagsFilter.CompanyTags.datasetSelectormodal.updateBtn"),className:"primary",events:{onClick:function(){ge.hide(),he.hide(),Re.show(),V.statusBtn.hide();var e=m.getSelectedDatasetTitle();e&&ue.setAttribute("placeholder",e)}}}),new x({id:"datasetSelectormodalCancelBtn",value:u.get("6WTagsFilter.CompanyTags.datasetSelectormodal.cancelBtn"),className:"default",events:{onClick:function(){ge.hide()}}})]}).inject(Be);let ke=e.create("div",{id:"comboBoxDiv"});ge.setBody(ke);var pe=e.create("span",{}).inject(Be),he=new x({id:"updateDatasetBtn",value:u.get("6WTagsFilter.CompanyTags.updateDatasetBtn.value"),events:{onClick:function(){D.getSearchSettings({tenantID:p.platformID}).then((function(e){if(e.hasOwnProperty("enterprise_ontology")&&t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0){let t=[{dataset:e.enterprise_ontology.dataset[0].dataset,datasetTitle:e.enterprise_ontology.dataset[0].datasetTitle,sessionId:e.enterprise_ontology.dataset[0].sessionId,"session@id":e.enterprise_ontology.dataset[0]["session@id"],sessionTitle:e.enterprise_ontology.dataset[0].sessionTitle}];f.getOntologyConceptsFromSessionId(t).then((function(){console.log("First time test")}),(function(){reject("Fail: First in session")}))}e.hasOwnProperty("enterprise_ontology")&&t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0&&ue.setAttribute("placeholder",e.enterprise_ontology.dataset[0].datasetTitle)})),ge.show()}}}).inject(pe);let Fe=e.create("div",{id:"companyTagslevel2iii ",class:" "}).inject(Be),Re=e.create("div",{class:" "}).inject(Fe);new x({value:u.get("6WTagsFilter.CompanyTags.testNDeployBtn.value"),id:"testNDeployBtn",class:"companyTagslevel2iiiaBtn",className:"primary",events:{onClick:function(){_e.show(),_e.setBody(m.getWarningReport()),fe.enable(),(m.areConceptsDuplicated()||m.areConceptsMoved()||m.areConceptsDeleted()||!m.getSelectedDatasetTitle())&&fe.disable()}}}).inject(Re);Re.hide();let Me=e.create("div",{id:"companyTagslevelTestCancelBtn ",class:"companyTagsLevelSubDiv company_tag_display_flex_center"}).inject(Re);new x({value:u.get("6WTagsFilter.CompanyTags.testBtn.value"),id:"testBtn",class:"companyTagslevel2iiiaBtn",className:"default",events:{onClick:function(){Ce.show(),Ce.setBody(m.getWarningReport())}}}).inject(Me),new x({value:u.get("6WTagsFilter.CompanyTags.cancelUpdateBtn.value"),id:"cancelUpdateBtn",class:"companyTagslevel2iiiaBtn",className:"default",events:{onClick:function(){Re.hide(),he.show(),k.getCurrentDatasetTitle(ue)}}}).inject(Me);let Ve=e.create("div",{class:"search_center_text companyTagsLevelSubDiv"}).inject(Fe);var _e=new T({className:"site-reset",closable:!0,header:"<h4>"+u.get("6WTagsFilter.CompanyTags.statusModal.header")+"</h4>",footer:[]}).inject(Ve);_e.hide();var me=e.create("div",{}),fe=new x({id:"statusModalFooterDeployBtn",value:u.get("6WTagsFilter.CompanyTags.deployBtn.value"),className:"primary",events:{onClick:function(){Re.hide(),V.statusBtn.show(),he.show(),_e.hide(),m.onUpdateUI(),k.clickOnApply(),k.scrollerText=m.getSelectedDatasetTitle()+"\n"+k.scrollerText,k.scrollerBody.setText(k.scrollerText),V.scrollerText&&"string"==typeof V.scrollerText&&""!==V.scrollerText.trim()?V.scrollerBody.style.backgroundColor="white":V.scrollerBody.style.backgroundColor="#f1f1f1"}}}).inject(me);new x({id:"statusModalFooterCancelDeployBtn",value:u.get("6WTagsFilter.CompanyTags.cancelDeployBtn.value"),className:"default",events:{onClick:function(){Re.hide(),he.show(),_e.hide(),k.getCurrentDatasetTitle(ue)}}}).inject(me);_e.setFooter(me);var Ce=new T({className:"site-reset",closable:!0,header:"<h4>"+u.get("6WTagsFilter.CompanyTags.statusModal2.header")+"</h4>",footer:[]}).inject(Ve);Ce.hide();var ye=e.create("div",{});new x({id:"statusModal2FooterCancelTestBtn",value:u.get("6WTagsFilter.CompanyTags.cancelDeployBtn.value"),className:"default",events:{onClick:function(){Ce.hide()}}}).inject(ye);Ce.setFooter(ye),V.statusBtn=new x({value:u.get("6WTagsFilter.CompanyTags.statusBtn.value"),className:" success btn-sm active companyTagStatus",events:{onClick:function(){V.statusBtn.setFocus(!1)}}}).inject(Ve),V.statusBtn.hide();let Ue=e.create("div",{class:" search_center_margin",id:"previousDeploymentSpan"}).inject(Ne),Le=e.create("div",{class:" search_center_general_display_flex",id:"previousDeploymentText"}).inject(Ue);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel3i.text")}).inject(Le);let Qe=e.create("div",{class:" search_center_general_display_flex",id:"previousDeploymentScroller"}).inject(Ue);this.scrollerBody=e.create("div",{id:"DataSetScroller",text:this.scrollerText?this.scrollerText:""}).inject(Qe),new A({element:this.scrollerBody}).inject(Qe);let ze=e.create("div",{class:" search_center_margin",id:"CompanyTagsIconUrl"}).inject(Ne),He=e.create("div",{class:" search_center_general_display_flex",id:"iconInputText"}).inject(ze);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel4i.text")}).inject(He);let Ge=e.create("div",{class:" search_center_general_display_flex",id:"companytagsicon"}).inject(ze);const Xe=u.get("6WTagsFilter.CompanyTags.companyTagsplaceholder1.text");V.iconurlInput=e.create("input",{type:"text",class:"form-control",id:"iconurlInput",placeholder:Xe,value:""}).inject(Ge),V.iconurlInput.addEventListener("change",function(){p.enableButtons(),this._iconurlInput=V.iconurlInput.value}.bind(this));let Je=e.create("div",{id:"iconUrlClose",class:" "}).inject(Ge);function qe(){V.iconurlInput.value="",this._iconurlInput=""}V.iconUrlClear=e.create("div",{class:" fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"iconUrlClear"}).inject(Je),V.iconUrlClear.setStyle("color","#b4b6ba"),V.iconUrlClear.addEventListener("click",qe,!1);let Ke=e.create("div",{class:" search_center_margin",id:"companyTagPrefix"}).inject(Ne),$e=e.create("div",{class:" search_center_general_display_flex",id:"prefixInputText"}).inject(Ke);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel5i.text")}).inject($e);let Ye=e.create("div",{class:" search_center_general_display_flex",id:"companytagprefixdiv"}).inject(Ke);const Ze=u.get("6WTagsFilter.CompanyTags.companyTagsplaceholder2.text");V.prefixInput=e.create("input",{type:"text",class:"form-control",id:"prefixInput",placeholder:Ze,value:""}).inject(Ye),V.prefixInput.addEventListener("change",function(){p.enableButtons(),this._prefixInput=V.prefixInput.value}.bind(this));let et=e.create("div",{id:"prefixClose",class:" "}).inject(Ye);function tt(){V.prefixInput.value="",this._prefixInput=""}V.prefixClear=e.create("div",{class:" fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"prefixClear"}).inject(et),V.prefixClear.setStyle("color","#b4b6ba"),V.prefixClear.addEventListener("click",tt,!1);let at=e.create("div",{class:"  search_center_margin ",id:"companyTagSuggest"}).inject(Ne),rt=e.create("div",{class:" search_center_general_display_flex search_center_margin",id:"search-center-TagSuggest-chkbox"}).inject(at);if(V.companyTagsSearchSuggest=new r({type:"switch",label:u.get("6WTagsFilter.CompanyTags.companyTagsSearchSuggests.specify.label"),className:"primary",checkFlag:!1,touchMode:!0}).inject(rt),V.companyTagsSearchSuggest.addEventListener("change",function(){p.enableButtons()}.bind(this)),!0===this._isExpertIdeationActivated()){let lt=e.create("div",{class:"search_center_add_category_section "}).inject(Ne),ct=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"companyTagexpertideation"}).inject(lt),dt=e.create("div",{class:" search_center_general_display_flex",id:"companyTagexpertideationText"}).inject(ct);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel7i.text")}).inject(dt);let ut=e.create("div",{class:" ",id:"companyTagexpertideationChoose"}).inject(ct);V.choose=new P({label:u.get("6WTagsFilter.CompanyTags.chooseBtn.value"),id:"chooseBtn",class:"search_center_text companyTagschooseBtn",className:"primary",domId:"Expertideation_chooseBtn"}).inject(ut),V.expertGroupDisplay=e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagslevel4i",text:""}).inject(ut);let gt=e.create("div",{id:"companyTagexpertideationClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(ct);function pt(){console.log("In expertGroupRemove"),V.expertGroupDisplay.setText(""),V.expertGroupDisplay.hide(),V.choose.show(),V.fontIconTrash.hide()}V.fontIconTrash=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x ",id:"expertIdeationFontIconTrash"}).inject(gt),V.fontIconTrash.addEventListener("click",pt,!1),V.fontIconTrash.hide(),V.expertGroupDisplay.hide(),V.expertGroupDisplay.getText().length>0&&(V.choose.hide(),V.fontIconTrash.show(),V.expertGroupDisplay.setText(V.expertGroupDisplay.getText()),V.expertGroupDisplay.show()),V.choose.addEventListener("buttonclick",function(){C.search({title:"User group Results",precond:'[ds6w:type]:"foaf:Group"',source:["usersgroup"]}).then((function(e){e.label&&(V.choose.hide(),V.fontIconTrash.show(),V.expertGroupDisplay.setText(e.label),V.expertGroupDisplay.show())}))}.bind(this))}if(!0===this._isDeleteCompanyTagActivated()){let ht=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_add_category_bottom",id:"deleteManualCompanyTagSpan"}).inject(Ne),_t=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"deleteManualCompanyTagText"}).inject(ht);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel8ii.text")}).inject(_t);let mt=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"deleteManualCompanyTagInput"}).inject(ht);new P({label:"lite-borders displayStyle",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(mt)}if(!0===this._isAdvocacyActivated()){let ft=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"companyTagadvocacyspan"}).inject(Ne),Ct=e.create("div",{class:" search_center_general_display_flex",id:"companyTagAdvocacyText"}).inject(ft);e.create("p",{class:"search_center_text",text:u.get("6WTagsFilter.CompanyTags.companyTagslevel9i.text")}).inject(Ct);let yt=e.create("div",{class:" ",id:"companyTagAdvocacyChoose"}).inject(ft);V.chooseAdvocacy=new P({label:u.get("6WTagsFilter.CompanyTags.chooseBtn.value"),id:"chooseAdvocacy",class:"search_center_text companyTagschooseBtn",className:"primary",domId:"Advocacy_chooseBtn"}).inject(yt),V.advocacyGroupDisplay=e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagslevel4i",text:""}).inject(yt);let vt=e.create("div",{id:"companyTagexpertideationClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(ft);function bt(){console.log("In advocacyGroupRemove"),V.advocacyGroupDisplay.setText(""),V.advocacyGroupDisplay.value="",V.advocacyGroupDisplay.hide(),V.chooseAdvocacy.show(),V.fontIconTrashA.hide()}V.fontIconTrashA=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x ",id:"advocacyFontIconTrash"}).inject(vt),V.fontIconTrashA.addEventListener("click",bt,!1),V.fontIconTrashA.hide(),V.advocacyGroupDisplay.hide(),V.chooseAdvocacy.addEventListener("buttonclick",function(){C.search({title:"Community Results",precond:'[ds6w:type]:"swym:Community"',source:["swym"]}).then((function(e){e.label&&(V.chooseAdvocacy.hide(),V.fontIconTrashA.show(),V.advocacyGroupDisplay.setText(e.label),V.advocacyGroupDisplay.value=e.id,V.advocacyGroupDisplay.show())}))}.bind(this))}let nt=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"controlledVocabModeSpan"}).inject(We),it=e.create("div",{class:" ",id:"controlledVocabModeText"}).inject(nt),ot=e.create("div",{class:"search_center_div_right ",id:"controlledVocabToggleSpan"}).inject(nt);V.ControlledVocabModeON=new r({type:"switch",label:u.get("6WTagsFilter.CompanyTags.controlledVocabMode.text"),touchMode:!0,value:0}).inject(it),V.ControlledVocabModeON.getContent().style.fontSize="14px",V.ControlledVocabModeON.addEventListener("change",function(){p.enableButtons(),!0===V.ControlledVocabModeON.checkFlag?this._controlledVocabMode=!0:this._controlledVocabMode=!1}.bind(this));let st=e.create("span",{class:"fonticon fonticon-info "}).inject(ot);if(new s({target:st,trigger:"hover",animate:"true",position:"top",body:u.get("6WTagsFilter.CompanyTags.ControlledVocab.popover"),title:""}),!0===this._isDeleteAllExistingCompanyTagActivated()){let St=e.create("div",{class:"search_center_add_category_section "}).inject(Ne),Tt=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"deleteTagsSpan"}).inject(St),xt=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"controlledVocabToggleSpan"}).inject(Tt);V.deletExistingCompanyTags=new P({label:u.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.value"),id:"deletExistingCompanyTags",class:"search_center_text",className:"error",emphasize:"high-attention"}).inject(xt);var ve=new T({className:"site-reset",closable:!0,header:u.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.value"),body:u.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.message"),footer:[new x({value:"Delete",className:"error",events:{onClick:function(){ve.hide()}}}),new x({id:"datasetSelectormodalCancelBtn_delete",value:"Cancel",className:"default",events:{onClick:function(){ve.hide()}}})]}).inject(xt);V.deletExistingCompanyTags.addEventListener("buttonclick",(function(){ve.show()}))}}v.getOption("tagsColorCustomize")&&h.render(ce),v.getOption("controlledVocabulary")&&(v.getOption("tagsColorCustomize")?_.render(de):_.render(ce)),!0===this._isCompanyTagsActivated()&&m.render(comboBoxDiv),this.unMasking()},unMasking(){p.removeMask(widget.body)},getPredicatesObject:function(){let e=this;return new a((function(t,a){let r={onComplete:function(e){UWA.log("Got a predicates result!"+e),t(e)},onFailure:function(e){UWA.log("predicates service request Fail!"+e),a(e)},tenantId:p.platformID,lang:e.getWidgetLan(),apiVersion:"R2021x"};c.getFedProperties(r)}))},getWidgetLan:function(){return widget.lang},getRootWOfPredicates:function(){let e=this;if(V._6WSubProperties.length>0){let a=null;V._6WSubProperties.forEach((e=>{a=t.is(a)?a+","+e:e}));let r={onComplete:function(a){UWA.log("Got a Root W of predicates result!"),t.is(a,"array")&&(V._6WPredicatesMap=a),e._rootWOfPredicatesPromise.resolve(a)},onFailure:function(t){UWA.log("getPropertiesRoots service request Fail!"+t),e._rootWOfPredicatesPromise.reject(t)},tenantId:p.platformID,lang:widget.lang};c.getPropertiesRoots(a,r)}return this._rootWOfPredicatesPromise.promise},isThisNotARootPredicates:function(e){return""!==e.subPropertyOf},filter6WRootPredicates:function(e){let a,r,n=this,i={},o={},s=[],l=[],c=[],d=[],g=[],p=[],h=[],_=V.applicationConfigComboBox.currentValue,m=(V._appsMap[_],new Set),f=new Set,C=new Set,y=new Set,v=new Set,b=new Set,S=new Set;for(r in e)if(e[r].properties.length>0){a=e[r].properties;let i=a.length;if(void 0!==a&&i>0){e[r].properties=a.filter(this.isThisNotARootPredicates),a.sort((function(e,t){return e.label.toUpperCase().localeCompare(t.label.toUpperCase())}));for(let u=0;u<i;u++){let i=a[u].label,_=a[u].curi;if(t.is(i)&&""!==i){"ds6w"!==r&&(i=i+" ("+e[r].label+")");let t={value:_,label:i,Wval:a[u].subPropertyOf};if(n._wPredicates.push(t),this._6WPredicatesMap&&this._6WPredicatesMap.length>0)for(let e=0;e<this._6WPredicatesMap.length;e++)if(_===this._6WPredicatesMap[e].curi){switch(this._6WPredicatesMap[e].lineage){case"ds6w:what":f.has(_)||(l.push(t),f.add(_));break;case"ds6w:where":v.has(_)||(g.push(t),v.add(_));break;case"ds6w:who":b.has(_)||(p.push(t),b.add(_));break;case"ds6w:when":C.has(_)||(c.push(t),C.add(_));break;case"ds6w:how":S.has(_)||(h.push(t),S.add(_));break;case"ds6w:why":y.has(_)||(d.push(t),y.add(_))}}m.has(i)||(s.push(i),m.add(i)),o[_]=i,V._attributesMap[_]=i,V._6WPredicatesMap[_]=a[u].subPropertyOf,V._6WSubProperties.push(_)}}}}let T=N.getLocalStorageItem("TagNavigator-simplifiedTagger");if(t.is(T)&&"true"===T){let e=u.get("SearchCenter6WTagsFilter.Predicates.OwnerCountry"),t="computedCountryInfo",a={value:t,label:e,Wval:"ds6w:where"};v.has(t)||(s.push(e),g.push(a),v.add(t)),o[t]=e,V._attributesMap[t]=e}return i.predicates=s,i.typeMap=o,i.whatpredicates=l,i.whopredicates=p,i.whenpredicates=c,i.wherepredicates=g,i.whypredicates=d,i.howpredicates=h,this._filter6WRootPredicatesPromise.resolve(),i},ifExistinPredicates:function(e,t){return e.predicates.some((function(e){return e.label===t}))},ifExistinExclPredicates:function(e,t){return e.excluded_predicates.some((function(e){return e.label===t}))},_includeTagValue:function(a){let r,n=this;t.is(a)?r=a.label.replace(/\s+/g,"_"):(r=n._includeTagVal.replace(/\s+/g,"_"),V.upsertTrackerEntrytag({category:"SearchControlCenter-Tag",action:"selectValue",pd1:"Tags Display",pd2:"IncludeValue",pd3:n._includeTagVal}));let i,o=e.create("div",{class:"search_center_general_display_flex",id:"include-tag-div-treecontent",styles:{height:"28px"}}),s=e.create("div",{class:"search_center_general_display_flex",id:"include-tag-div-contenttag"}).inject(o),l=e.create("div",{class:"search_center_general_display_flex",id:"divtrashbutton_"+r}).inject(s),c=new P({displayStyle:"lite",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(l);if(t.is(a)){e.create("p",{text:a.label,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px","font-size":"14px","font-family":"Arial"}}).inject(s).setAttribute("uri",a.uri)}else{e.create("p",{text:n._includeTagVal,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px","font-size":"14px","font-family":"Arial"}}).inject(s).setAttribute("uri",n._includeTagUri)}c.addEventListener("buttonclick",(function(e){let t="divtrashbutton_"+r,a=document.getElementById(t).getParent().getParent().getParent();if(a.childElementCount-1==0){let e=a.id;if(e.includes("What")){let e=document.getElementById("content-what");V.collapseRootWArea(e)}if(e.includes("Who")){let e=document.getElementById("content-who");V.collapseRootWArea(e)}if(e.includes("When")){let e=document.getElementById("content-when");V.collapseRootWArea(e)}if(e.includes("Where")){let e=document.getElementById("content-where");V.collapseRootWArea(e)}if(e.includes("How")){let e=document.getElementById("content-how");V.collapseRootWArea(e)}}o.destroy(),p.enableButtons()})),i=t.is(a)?a.wVal:n._includeWVal;let d=null,g=!1,h=!1,_=V._getWtreeContents(V.divWhatContent);if(0===_.predicates.length&&0===_.excluded_predicates.length){let e=document.getElementById("content-what");V.collapseRootWArea(e)}let m=V._getWtreeContents(V.divWhoContent);if(0===m.predicates.length&&0===m.excluded_predicates.length){let e=document.getElementById("content-who");V.collapseRootWArea(e)}let f=V._getWtreeContents(V.divWhenContent);if(0===f.predicates.length&&0===f.excluded_predicates.length){let e=document.getElementById("content-when");V.collapseRootWArea(e)}let C=V._getWtreeContents(V.divWhereContent);if(0===C.predicates.length&&0===C.excluded_predicates.length){let e=document.getElementById("content-where");V.collapseRootWArea(e)}let y=V._getWtreeContents(V.divWhyContent);if(0===y.predicates.length&&0===y.excluded_predicates.length){let e=document.getElementById("content-why");V.collapseRootWArea(e)}let v=V._getWtreeContents(V.divHowContent);if(0===v.predicates.length&&0===v.excluded_predicates.length){let e=document.getElementById("content-how");V.collapseRootWArea(e)}switch(i){case"What":if(t.is(a)?(g=V.ifExistinPredicates(_,a.label),h=V.ifExistinExclPredicates(_,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(_,n._includeTagVal),h=V.ifExistinExclPredicates(_,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhatContent);let e=document.getElementById("ds6w:what");V.toggleRootWArea(e)}break;case"Who":if(t.is(a)?(g=V.ifExistinPredicates(m,a.label),h=V.ifExistinExclPredicates(m,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(m,n._includeTagVal),h=V.ifExistinExclPredicates(m,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhoContent);let e=document.getElementById("ds6w:who");V.toggleRootWArea(e)}break;case"When":if(t.is(a)?(g=V.ifExistinPredicates(f,a.label),h=V.ifExistinExclPredicates(f,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(f,n._includeTagVal),h=V.ifExistinExclPredicates(f,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhenContent);let e=document.getElementById("ds6w:when");V.toggleRootWArea(e)}break;case"Where":if(t.is(a)?(g=V.ifExistinPredicates(C,a.label),h=V.ifExistinExclPredicates(C,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(C,n._includeTagVal),h=V.ifExistinExclPredicates(C,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhereContent);let e=document.getElementById("ds6w:where");V.toggleRootWArea(e)}break;case"Why":if(t.is(a)?(g=V.ifExistinPredicates(y,a.label),h=V.ifExistinExclPredicates(y,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(y,n._includeTagVal),h=V.ifExistinExclPredicates(y,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhyContent);let e=document.getElementById("ds6w:why");V.toggleRootWArea(e)}break;case"How":if(t.is(a)?(g=V.ifExistinPredicates(v,a.label),h=V.ifExistinExclPredicates(v,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(v,n._includeTagVal),h=V.ifExistinExclPredicates(v,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divHowContent);let e=document.getElementById("ds6w:how");V.toggleRootWArea(e)}}p.enableButtons()},_excludeTagValue:function(a){let r,n=this;t.is(a)?r=a.label.replace(/\s+/g,"_"):(r=n._includeTagVal.replace(/\s+/g,"_"),V.upsertTrackerEntrytag({category:"SearchControlCenter-Tag",action:"selectValue",pd1:"Tags Display",pd2:"ExcludeValue",pd3:n._includeTagVal}));let i,o=e.create("div",{class:"search_center_general_display_flex",id:"exclude-tag-div-treecontent",styles:{height:"28px"}}),s=e.create("div",{class:"search_center_general_display_flex",id:"exclude-tag-div-treecontent2"}).inject(o),l=e.create("div",{class:"search_center_general_display_flex semi_circle",id:"divtrashbutton_"+r}).inject(s),c=new P({displayStyle:"lite",emphasize:"high-attention",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(l);if(t.is(a)){e.create("p",{class:"strike_through",text:a.label,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",a.uri)}else{e.create("p",{class:"strike_through",text:n._includeTagVal,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",n._includeTagUri)}c.addEventListener("buttonclick",(function(){let e="divtrashbutton_"+r,t=document.getElementById(e).getParent().getParent().getParent();if(t.childElementCount-1==0){let e=t.id;if(e.includes("What")){let e=document.getElementById("content-what");V.collapseRootWArea(e)}if(e.includes("Who")){let e=document.getElementById("content-who");V.collapseRootWArea(e)}if(e.includes("When")){let e=document.getElementById("content-when");V.collapseRootWArea(e)}if(e.includes("Where")){let e=document.getElementById("content-where");V.collapseRootWArea(e)}if(e.includes("How")){let e=document.getElementById("content-how");V.collapseRootWArea(e)}}o.destroy(),p.enableButtons()})),i=t.is(a)?a.wVal:n._includeWVal;let d=null,g=!1,h=!1,_=V._getWtreeContents(V.divWhatContent);if(0===_.predicates.length&&0===_.excluded_predicates.length){let e=document.getElementById("content-what");V.collapseRootWArea(e)}let m=V._getWtreeContents(V.divWhoContent);if(0===m.predicates.length&&0===m.excluded_predicates.length){let e=document.getElementById("content-who");V.collapseRootWArea(e)}let f=V._getWtreeContents(V.divWhenContent);if(0===f.predicates.length&&0===f.excluded_predicates.length){let e=document.getElementById("content-when");V.collapseRootWArea(e)}let C=V._getWtreeContents(V.divWhereContent);if(0===C.predicates.length&&0===C.excluded_predicates.length){let e=document.getElementById("content-where");V.collapseRootWArea(e)}let y=V._getWtreeContents(V.divWhyContent);if(0===y.predicates.length&&0===y.excluded_predicates.length){let e=document.getElementById("content-why");V.collapseRootWArea(e)}let v=V._getWtreeContents(V.divHowContent);if(0===v.predicates.length&&0===v.excluded_predicates.length){let e=document.getElementById("content-how");V.collapseRootWArea(e)}switch(i){case"What":if(t.is(a)?(g=V.ifExistinPredicates(_,a.label),h=V.ifExistinExclPredicates(_,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(_,n._includeTagVal),h=V.ifExistinExclPredicates(_,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhatContent);let e=document.getElementById("ds6w:what");V.toggleRootWArea(e)}break;case"Who":if(t.is(a)?(g=V.ifExistinPredicates(m,a.label),h=V.ifExistinExclPredicates(m,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(m,n._includeTagVal),h=V.ifExistinExclPredicates(m,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhoContent);let e=document.getElementById("ds6w:who");V.toggleRootWArea(e)}break;case"When":if(t.is(a)?(g=V.ifExistinPredicates(f,a.label),h=V.ifExistinExclPredicates(f,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(f,n._includeTagVal),h=V.ifExistinExclPredicates(f,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhenContent);let e=document.getElementById("ds6w:when");V.toggleRootWArea(e)}break;case"Where":if(t.is(a)?(g=V.ifExistinPredicates(C,a.label),h=V.ifExistinExclPredicates(C,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(C,n._includeTagVal),h=V.ifExistinExclPredicates(C,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhereContent);let e=document.getElementById("ds6w:where");V.toggleRootWArea(e)}break;case"Why":if(t.is(a)?(g=V.ifExistinPredicates(y,a.label),h=V.ifExistinExclPredicates(y,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(y,n._includeTagVal),h=V.ifExistinExclPredicates(y,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divWhyContent);let e=document.getElementById("ds6w:why");V.toggleRootWArea(e)}break;case"How":if(t.is(a)?(g=V.ifExistinPredicates(v,a.label),h=V.ifExistinExclPredicates(v,a.label)):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(v,n._includeTagVal),h=V.ifExistinExclPredicates(v,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(h){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divHowContent);let e=document.getElementById("ds6w:how");V.toggleRootWArea(e)}}p.enableButtons()},_includeDHierarchyTagValue:function(a){let r,n=this;t.is(a)?r=a.label.replace(/\s+/g,"_"):(r=n._includeTagVal.replace(/\s+/g,"_"),V.upsertTrackerEntrytag({category:"SearchControlCenter-Tag",action:"selectValue",pd1:"Deep Hierarchy Tag",pd2:"IncludeValue",pd3:n._includeTagVal}));let i,o=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-div-treecontent",styles:{height:"28px"}}),s=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-div-contenttag"}).inject(o),l=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-divtrashbutton_"+r}).inject(s),c=new P({displayStyle:"lite",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(l);if(t.is(a)){e.create("p",{text:a.label,id:"includeDHierarchy-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",a.uri)}else{e.create("p",{text:n._includeTagVal,id:"includeDHierarchy-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(s).setAttribute("uri",n._includeTagUri)}c.addEventListener("buttonclick",(function(){o.destroy();let e=document.getElementById("6Wtree_hierarchy_wrapper");if(0===V._getWtreeContents(V.divDHierarchyWhatContent).predicates.length){let t=e.childNodes[0].getChildren()[0];V.collapseRootWArea(t)}if(0===V._getWtreeContents(V.divDHierarchyWhoContent).predicates.length){let t=e.childNodes[1].getChildren()[0];V.collapseRootWArea(t)}if(0===V._getWtreeContents(V.divDHierarchyWhenContent).predicates.length){let t=e.childNodes[2].getChildren()[0];V.collapseRootWArea(t)}if(0===V._getWtreeContents(V.divDHierarchyWhereContent).predicates.length){let t=e.childNodes[3].getChildren()[0];V.collapseRootWArea(t)}if(0===V._getWtreeContents(V.divDHierarchyWhyContent).predicates.length){let t=e.childNodes[4].getChildren()[0];V.collapseRootWArea(t)}if(0===V._getWtreeContents(V.divDHierarchyHowContent).predicates.length){let t=e.childNodes[5].getChildren()[0];V.collapseRootWArea(t)}p.enableButtons()})),i=t.is(a)?a.wVal:n._includeWVal;let d=null,g=!1,h=document.getElementById("6Wtree_hierarchy_wrapper"),_=V._getWtreeContents(V.divDHierarchyWhatContent);if(0===_.predicates.length){let e=h.childNodes[0].getChildren()[0];V.collapseRootWArea(e)}let m=V._getWtreeContents(V.divDHierarchyWhoContent);if(0===m.predicates.length){let e=h.childNodes[1].getChildren()[0];V.collapseRootWArea(e)}let f=V._getWtreeContents(V.divDHierarchyWhenContent);if(0===f.predicates.length){let e=h.childNodes[2].getChildren()[0];V.collapseRootWArea(e)}let C=V._getWtreeContents(V.divDHierarchyWhereContent);if(0===C.predicates.length){let e=h.childNodes[3].getChildren()[0];V.collapseRootWArea(e)}let y=V._getWtreeContents(V.divDHierarchyWhyContent);if(0===y.predicates.length){let e=h.childNodes[4].getChildren()[0];V.collapseRootWArea(e)}let b=V._getWtreeContents(V.divDHierarchyHowContent);if(0===b.predicates.length){let e=h.childNodes[5].getChildren()[0];V.collapseRootWArea(e)}let S=_.predicates.length+m.predicates.length+f.predicates.length+C.predicates.length+y.predicates.length+b.predicates.length,T=v.getOption("max_deep_hierarchy_tags");if(S>=T){d=u.get("SearchCenter6WTagsFilter.hierarchicalPredicates.Message.MaxReached"),d=u.replace(d,{max:T});let e=p.createWdgAlert();return e.inject(widget.body,"top"),void e.add({className:"error applyChangesAlert",message:d})}switch(i){case"What":if(t.is(a)?g=V.ifExistinPredicates(_,a.label):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(_,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divDHierarchyWhatContent);let e=h.childNodes[0].getChildren()[0].getChildren()[1];V.toggleRootWArea(e)}break;case"Who":if(t.is(a)?g=V.ifExistinPredicates(m,a.label):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(m,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divDHierarchyWhoContent);let e=h.childNodes[1].getChildren()[0].getChildren()[1];V.toggleRootWArea(e)}break;case"When":if(t.is(a)?g=V.ifExistinPredicates(f,a.label):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(f,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divDHierarchyWhenContent);let e=h.childNodes[2].getChildren()[0].getChildren()[1];V.toggleRootWArea(e)}break;case"Where":if(t.is(a)?g=V.ifExistinPredicates(C,a.label):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(C,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divDHierarchyWhereContent);let e=h.childNodes[3].getChildren()[0].getChildren()[1];V.toggleRootWArea(e)}break;case"Why":if(t.is(a)?g=V.ifExistinPredicates(y,a.label):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(y,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divDHierarchyWhyContent);let e=h.childNodes[4].getChildren()[0].getChildren()[1];V.toggleRootWArea(e)}break;case"How":if(t.is(a)?g=V.ifExistinPredicates(b,a.label):t.is(n._includeTagVal)&&(g=V.ifExistinPredicates(b,n._includeTagVal)),g){let e=p.createWdgAlert();e.inject(widget.body,"top"),d=u.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{o.inject(V.divDHierarchyHowContent);let e=h.childNodes[5].getChildren()[0].getChildren()[1];V.toggleRootWArea(e)}}p.enableButtons()},_addtagOperator:function(){let e=this;V.tagRelationshipCards.show();let a=e._getTagRelationshipCards(),r=a.length,n=[];for(let e=0;e<r;e++)n.push(a[e].uri);let i=e._textOnCard;if(t.is(i,"string")){let a="AllDataSourcesandTypes",r=p.getAttributesInternalNameForAllDataSourcesAndTypes(a,i),o=!1,s=null;if(t.is(r)){let t;if(n.length>0&&!1===o&&(t=n.indexOf(r),t>-1&&(s=u.get("searchAttributes.AttributeWarning"),o=!0)),!1===o){let t="OR";e._operatorOR?t="OR":e._operatorAND?t="AND":e._operatorXOR&&(t="XOR");let a={cardDiv:V.tagRelationshipCards,textOnCard:i,uri:r,tabName:"SearchControl_6WTags",operator:t};e.renderTagRelationshipRow(a),V.tagRelationshipCards.childNodes[0].hidden=!1,p.enableButtons()}else{let e=p.createWdgAlert();e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:s})}}}},_createTagOperatorModal:function(a){let n=this,i=e.create("div",{class:"search_center_div_left_6w",id:a+"-div",styles:{"min-height":"38px",width:"auto"}}),o=(e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex",id:a+"-text-div",text:u.get("Tag.display")}).inject(i),e.create("p",{class:"search_center_general_display_flex",id:a+"-combo-div"}).inject(i)),s=[{label:k.getRootWDisplayName("what",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-what"},{label:k.getRootWDisplayName("who",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-who"},{label:k.getRootWDisplayName("when",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-when"},{label:k.getRootWDisplayName("where",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-where"},{label:k.getRootWDisplayName("why",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-why"},{label:k.getRootWDisplayName("how",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-how"}];return V.getPredicatesObject().then((function(l){V.getRootWOfPredicates().then((function(c){let d=n.filter6WRootPredicates(l);p.updateAttributesMappingForAllDataSourcesAndTypes("AllDataSourcesandTypes",d.typeMap);let g=new j({shouldBeSelected:function(e){return"section"!==e.options.comboBoxSemantics}}),h={what:d.whatpredicates,who:d.whopredicates,when:d.whenpredicates,where:d.wherepredicates,why:d.whypredicates,how:d.howpredicates};Object.keys(h).forEach((function(e,t){let a=h[e],r=new O({label:s[t].label,icons:[{iconName:s[t].icon}],comboBoxSemantics:"section"});g.addRoot(r),a.forEach((function(e,t){r.addChild(new O({label:e.label,comboBoxSemantics:"subsection"}))}))})),V.selectWComboForTagOperatorModal=new M({multiSearchMode:!1,allowFreeInputFlag:!1,elementsTree:g,placeholder:u.get("SearchCenter6WTagsFilter.TagRelationship.AddPreferred_tags"),domId:"selectWComboForTagOperatorModal"}).inject(o),V.selectWComboForTagOperatorModal.elements.container.children[0].setStyles({width:"100%"}),V.selectWComboForTagOperatorModal.elements.container.children[0].children[0].setStyles({"font-size":"14px",height:"38px"}),g.expandAll();e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex search_center_top_margin",id:a+"-text-operator-display-div",text:u.get("Operator.display")}).inject(i);let _=e.create("p",{class:"search_center_general_display_flex search_center_top_margin",id:a+"-text-operator-radio-div"}).inject(i);_.addClassName("search_center_disable");let m=new r({type:"radio",label:"OR",value:0,id:a+"-OR",domId:"OR_Radio_toggle"}).inject(_),f=new r({type:"radio",label:"AND",value:0,domId:"AND_Radio_toggle"}).inject(_),C=new r({type:"radio",label:"XOR",value:1,domId:"XOR_Radio_toggle"}).inject(_);m.elements.container.addClassName("some-class"),f.elements.container.addClassName("some-class"),C.elements.container.addClassName("some-class"),m.addEventListener("change",function(){n._operatorOR=m.checkFlag}.bind(this)),f.addEventListener("change",function(){n._operatorAND=f.checkFlag}.bind(this)),C.addEventListener("change",function(){n._operatorXOR=C.checkFlag}.bind(this)),V.selectWComboForTagOperatorModal.addEventListener("change",(function(){if(n._textOnCard=V.selectWComboForTagOperatorModal.value,V.tagOperatorModalAdd.disabled=!1,t.is(n._textOnCard,"string")){let e="AllDataSourcesandTypes",t=p.getAttributesInternalNameForAllDataSourcesAndTypes(e,n._textOnCard);_.removeClassName("search_center_disable"),n._listOfIrrelevantAndTags.indexOf(t)>-1&&f.elements.container.addClassName("search_center_disable")}else _.addClassName("search_center_disable")}))}))})),i},_getTagRelationshipCards:function(){let e=[],a=V.tagRelationshipCards;if(!a)return console.error("tagRelationshipCards not found."),e;let r=a.childElementCount;for(let n=1;n<r;n++){let r=a.childNodes[n];if(t.is(r)){let a={},n=r.childNodes[0];a.header=n?n.textContent.trim():null;let i=r.childNodes[0];a.uri=i?i.getAttribute("sccURI"):null;let o=r.childNodes[1].childNodes[0].childNodes[0];t.is(o)&&t.is(o.dsModel)?a.operator=r.childNodes[1].childNodes[0].childNodes[0].dsModel.currentValue:a.operator=null,t.is(a.uri)&&e.push(a)}}return e},renderTagRelationshipRow:function(a){let r=a.textOnCard;r=r.replace(/\s+/g,"_"),V.upsertTrackerEntrytag({category:"SearchControlCenter-Tag",action:"selectValue",pd1:"Tags Operator",pd2:r,pd3:a.operator});let i=e.create("div",{class:"search_center_general_tab_div search_center_margin combo_height ",id:r}).inject(a.cardDiv);i.addClassName("search_center_category_row_span");let o=e.create("div",{class:"search_center_text ",id:r+"_Text_part",html:a.textOnCard,styles:{}}).inject(i);o.addClassName("search_center_category_row_html"),t.is(a.uri)&&o.setAttribute("sccuri",a.uri);let s=e.create("div",{class:"search_center_margin search_center_general_tab_div ",id:"divOperatorDeleteButtonSpan"}).inject(i),l=e.create("div",{class:"search_center_margin  ",id:r+"_Combo"}).inject(s),c=["OR","AND","XOR"];if(this._listOfIrrelevantAndTags.length>0&&t.is(a.uri)){this._listOfIrrelevantAndTags.indexOf(a.uri)>-1&&(c=["OR","XOR"])}V.operatorComboBox=new n({elementsList:c,touchMode:!0,mainElementVisibleFlag:!0}).inject(l),"OR"==a.operator?V.operatorComboBox.value="OR":"AND"==a.operator?V.operatorComboBox.value="AND":"XOR"==a.operator&&(V.operatorComboBox.value="XOR"),V.operatorComboBox.elements.container.setStyles({height:"31px",width:"100px"}),V.operatorComboBox.addEventListener("change",(function(){p.enableButtons()}));let d=e.create("div",{class:"fonticon fonticon-clear fonticon-trash scc_6wtags_tag_relationship_delete",id:r+"fontIconTrash"}).inject(s);d.setStyle("color","#b4b6ba"),d.addEventListener("click",(function(e){if(t.is(e.currentTarget.parentElement)){let t=e.currentTarget.parentElement.parentElement;t.destroy(),1===t.childNodes.length&&(t.childNodes[0].hidden=!0),p.enableButtons()}}),!1),d.addEventListener("mouseover",(function(e){e.currentTarget.setStyle("color","#3d3d3d")}),!1),d.addEventListener("mouseout",(function(e){e.currentTarget.setStyle("color","#b4b6ba")}),!1)},clickOnApply:function(){p.enableButtons();document.getElementById("id_in_app_apply").click(),p.disableButtons()},getTabInputsToStore:function(){V._trackerData&&(Object.values(V._trackerData).forEach((e=>{p.trackerPublisher(e.category,e.action,{pd1:e.pd1,pd2:e.pd2,pd3:e.pd3})})),V._trackerData=[]);let e={attributes_display:!0},a=[],r={},n={},i=[];if(t.is(i,"array")&&1===i.length)t.is(i[0].source)&&(r.source=i[0].source),t.is(i[0].predicates)&&(r.predicates=i[0].predicates),t.is(i[0].excluded_predicates)&&(r.excluded_predicates=i[0].excluded_predicates),a.push(r);else{var o=[],s=[];r.source="AllDataSourcesandTypes";let e=V._getWtreeContents(V.divWhatContent),t=V._getWtreeContents(V.divWhoContent),n=V._getWtreeContents(V.divWhenContent),i=V._getWtreeContents(V.divWhereContent),d=V._getWtreeContents(V.divWhyContent),u=V._getWtreeContents(V.divHowContent),g=e.predicates.length,p=e.excluded_predicates.length;for(let t=0;t<g;t++){(l={}).uri=e.predicates[t].uri,o.push(l)}for(let t=0;t<p;t++){(c={}).uri=e.excluded_predicates[t].uri,s.push(c)}g=t.predicates.length,p=t.excluded_predicates.length;for(let e=0;e<g;e++){(l={}).uri=t.predicates[e].uri,o.push(l)}for(let e=0;e<p;e++){(c={}).uri=t.excluded_predicates[e].uri,s.push(c)}g=n.predicates.length,p=n.excluded_predicates.length;for(let e=0;e<g;e++){(l={}).uri=n.predicates[e].uri,o.push(l)}for(let e=0;e<p;e++){(c={}).uri=n.excluded_predicates[e].uri,s.push(c)}g=i.predicates.length,p=i.excluded_predicates.length;for(let e=0;e<g;e++){(l={}).uri=i.predicates[e].uri,o.push(l)}for(let e=0;e<p;e++){(c={}).uri=i.excluded_predicates[e].uri,s.push(c)}g=d.predicates.length,p=d.excluded_predicates.length;for(let e=0;e<g;e++){(l={}).uri=d.predicates[e].uri,o.push(l)}for(let e=0;e<p;e++){(c={}).uri=d.excluded_predicates[e].uri,s.push(c)}g=u.predicates.length,p=u.excluded_predicates.length;for(let e=0;e<g;e++){var l;(l={}).uri=u.predicates[e].uri,o.push(l)}for(let e=0;e<p;e++){var c;(c={}).uri=u.excluded_predicates[e].uri,s.push(c)}r.excluded_predicates=s,r.predicates=o,a.push(r)}let d=[],u={},g={},f=V.applicationConfigComboBox.currentValue,C=V._appsMap[f];t.is(r.predicates)&&(g.preferred_predicates=r.predicates),t.is(r.excluded_predicates)&&(g.excluded_predicates=r.excluded_predicates),u[C]=g,d.push(u),e.context_apps_predicates=d,"X3DSEAR_AP"===C&&(e["ds6w:type"]=a);let y=V._getWtreeContents(V.divDHierarchyWhatContent),b=V._getWtreeContents(V.divDHierarchyWhoContent),S=V._getWtreeContents(V.divDHierarchyWhenContent),T=V._getWtreeContents(V.divDHierarchyWhereContent),x=V._getWtreeContents(V.divDHierarchyWhyContent),w=V._getWtreeContents(V.divDHierarchyHowContent),D=[],A=y.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=y.predicates[e].uri,D.push(t)}A=b.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=b.predicates[e].uri,D.push(t)}A=S.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=S.predicates[e].uri,D.push(t)}A=T.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=T.predicates[e].uri,D.push(t)}A=x.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=x.predicates[e].uri,D.push(t)}A=w.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=w.predicates[e].uri,D.push(t)}return n.predicates=D,!0===v.getOption("activate_hierarchical_tag_depth")&&(e.hierarchical_predicates={specify_hierarchical_predicates:V.EnableTagHierarchicalON.checkFlag,hierarchical_predicates:n.predicates},this._checkHierarchicalTagUpdate(e.hierarchical_predicates),this._prev_hierarchical_predicates=e.hierarchical_predicates),v.getOption("tagsColorCustomize")&&(e.tagColorization=h.getInputsToStore()),v.getOption("controlledVocabulary")&&(e.controlledVocabulary=_.getTabInputsToStore()),!0===this._isCompanyTagsActivated()&&(e.enterprise_ontology={dataset:m.getTabInputsToStore(),iconURL:V.iconurlInput.value,tagPrefix:V.prefixInput.value,expertUserGrp:this._isExpertIdeationActivated()?V.expertGroupDisplay.getText():"",advocacyCommunityId:this._isAdvocacyActivated()?V.advocacyGroupDisplay.value:"",advocacyCommunityLabel:this._isAdvocacyActivated()?V.advocacyGroupDisplay.getText():""},t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0&&(e.current_enterprise_ontology_title=e.enterprise_ontology.dataset[0].datasetTitle),e.enterprise_ontology_history=V.scrollerText,e.companyTagsSearchSuggest=!!this._isCompanyTagsActivated()&&V.companyTagsSearchSuggest.checkFlag,e.controlledVocabMode=this._controlledVocabMode),e.tagRelationships={activate_tag_relationship:V.toggleActivateTagOperator.checkFlag,tagRelationship_predicates:V._getTagRelationshipCards(),tagRelationship_IrrelevantOpert:V._getTagIrrelevantOperator()},V.toggleRangeValuesClassification&&(e.rangeValuesClassification=V.toggleRangeValuesClassification.checkFlag),e},_getTagIrrelevantOperator:function(){let e={};return e.irrelevantANDPredicates=this._listOfIrrelevantAndTags,e},onResetTab:function(e){let a,r=this,n=null,i=null;if(p.clearLocalCacheFor6WTags(),a=t.is(e,"string")?JSON.parse(e):e,t.is(a)){if(l.mask(widget.body),a.hasOwnProperty("rangeValuesClassification")&&V.toggleRangeValuesClassification){let e=a.rangeValuesClassification;t.is(e)&&(V.toggleRangeValuesClassification.checkFlag=e)}else V.toggleRangeValuesClassification&&(V.toggleRangeValuesClassification.checkFlag=!0);if(V.getPredicatesObject().then((function(e){let o=V.filter6WRootPredicates(e);V.getRootWOfPredicates().then((function(e){V.cleanUpAttributeTags(),p.updateAttributesMappingForAllDataSourcesAndTypes("AllDataSourcesandTypes",o.typeMap);let s=V._getKeyByValue(V._appsMap,"X3DSEAR_AP");if(t.is(s)&&(V.applicationConfigComboBox.currentValue=s),D.getAppWisePredicates(V._appsMap[V.applicationConfigComboBox.currentValue],!1).then((function(e){if(V.cleanUpAttributeTags(),e.hasOwnProperty("preferred_predicates")&&(n=e.preferred_predicates),e.hasOwnProperty("excluded_predicates")&&(i=e.excluded_predicates),t.is(n)&&n.length>0)for(let e=0;e<n.length;e++){let t=n[e].uri,a=V._get6WVal(t),r={label:V._attributesMap[t],uri:t,wVal:a};V._includeTagValue(r),p.disableButtons()}if(t.is(i)&&i.length>0)for(let e=0;e<i.length;e++){let t=i[e].uri,a=V._get6WVal(t),r={label:V._attributesMap[t],uri:t,wVal:a};V._excludeTagValue(r),p.disableButtons()}}),(function(){console.log("Error: Default json for preferred predicates has not been defined yet for this APP")})),a.hasOwnProperty("tagRelationships")){let e=a.tagRelationships;t.is(e)&&(t.is(V.tagRelationshipCards)&&r.cleanUpTagRelationCards(),V.toggleActivateTagOperator.checkFlag=e.activate_tag_relationship,t.is(e.tagRelationship_predicates)&&e.tagRelationship_predicates.length>0&&(V.tagRelationshipCards.show(),r.getPredicatesObject().then((function(t){r.getRootWOfPredicates().then((function(t){for(let t=0;t<e.tagRelationship_predicates.length;t++){let a=e.tagRelationship_predicates[t].uri,n=V._attributesMap[a],i={cardDiv:V.tagRelationshipCards,textOnCard:n,uri:a,tabName:"SearchControl_6WTags",operator:e.tagRelationship_predicates[t].operator};r.renderTagRelationshipRow(i)}V.tagRelationshipCards.childNodes[0].hidden=!1,p.disableButtons()}))}))))}else t.is(V.toggleActivateTagOperator)&&(V.toggleActivateTagOperator.checkFlag=!1),t.is(V.tagRelationshipCards)&&(r.cleanUpTagRelationCards(),r.getRootWOfPredicates().then((function(e){if(V.tagRelationshipCards.show(),t.is(r._listOfDefaultAndTags)&&r._listOfDefaultAndTags.length>0){for(let e=0;e<r._listOfDefaultAndTags.length;e++){let t=r._listOfDefaultAndTags[e],a=V._attributesMap[t],n={cardDiv:V.tagRelationshipCards,textOnCard:a,uri:t,tabName:"SearchControl_6WTags",operator:"AND"};r.renderTagRelationshipRow(n)}V.tagRelationshipCards.childNodes[0].hidden=!1,p.disableButtons()}if(t.is(r._listOfIrrelevantAndTags)&&r._listOfIrrelevantAndTags.length>0){for(let e=0;e<r._listOfIrrelevantAndTags.length;e++){let t=r._listOfIrrelevantAndTags[e],a=V._attributesMap[t],n={cardDiv:V.tagRelationshipCards,textOnCard:a,uri:t,tabName:"SearchControl_6WTags",operator:"OR"};r.renderTagRelationshipRow(n)}V.tagRelationshipCards.childNodes[0].hidden=!1,p.disableButtons()}})));if(!0===v.getOption("activate_hierarchical_tag_depth")){let e=a.hierarchical_predicates,r=[];if(t.is(e)?(V.EnableTagHierarchicalON.checkFlag=e.specify_hierarchical_predicates,V._prev_hierarchical_predicates=e,r=e.hierarchical_predicates):t.is(V.EnableTagHierarchicalON)&&(V.EnableTagHierarchicalON.checkFlag=!1),V._cleanUpHierarchyTags(),t.is(r)&&r.length>0)for(let e=0;e<r.length;e++){let t=r[e].uri,a=V._get6WVal(t),n={label:V._attributesMap[t],uri:t,wVal:a};V._includeDHierarchyTagValue(n)}}p.disableButtons(),l.unmask(widget.body)}))}),(function(){l.unmask(widget.body)})),!0===v.getOption("activate_hierarchical_tag_depth")){let e=a.hierarchical_predicates;t.is(e)?(V.EnableTagHierarchicalON.checkFlag=e.specify_hierarchical_predicates,V._prev_hierarchical_predicates=e):t.is(V.EnableTagHierarchicalON)&&(V.EnableTagHierarchicalON.checkFlag=!1),V._cleanUpHierarchyTags()}if(v.getOption("tagsColorCustomize")&&h.onResetTabTagColorize(e.tagColorization),v.getOption("controlledVocabulary")&&_.getInputFromStore(e.controlledVocabulary),!0===this._isCompanyTagsActivated()&&m.getInputFromStore(e.enterprise_ontology),a.hasOwnProperty("enterprise_ontology")){let e=a.enterprise_ontology;t.is(e)&&!0===this._isCompanyTagsActivated()&&(V.statusBtn.hide(),V.iconurlInput.value=e.iconURL,V.prefixInput.value=e.tagPrefix,!0===this._isExpertIdeationActivated()&&(V.expertGroupDisplay.setText(e.expertUserGrp),V.expertGroupDisplay.getText().length>0&&(V.choose.hide(),V.fontIconTrash.show(),V.expertGroupDisplay.show())),!0===this._isAdvocacyActivated()&&(V.advocacyGroupDisplay.setText(e.advocacyCommunityLabel),V.advocacyGroupDisplay.getText().length>0&&(V.chooseAdvocacy.hide(),V.fontIconTrashA.show(),V.advocacyGroupDisplay.show())))}!0===this._isCompanyTagsActivated()&&(V.companyTagsSearchSuggest.checkFlag=e.companyTagsSearchSuggest,V.scrollerText=e.enterprise_ontology_history,V.scrollerText=V.scrollerText?V.scrollerText:"",V.scrollerBody.setText(V.scrollerText),V.scrollerText&&"string"==typeof V.scrollerText&&""!==V.scrollerText.trim()?V.scrollerBody.style.backgroundColor="white":V.scrollerBody.style.backgroundColor="#f1f1f1",V.ControlledVocabModeON.checkFlag=e.controlledVocabMode)}},cleanUpTagRelationCards:function(){for(let e=V.tagRelationshipCards.childElementCount-1;e>0;e--){let a=V.tagRelationshipCards.childNodes[e];t.is(a)&&a.destroy()}V.tagRelationshipCards.childNodes[0].hidden=!0},_cleanUpHierarchyTags:function(){let e=V.divDHierarchyWhatContent.childElementCount;for(let t=e-1;t>=0;t--)V.divDHierarchyWhatContent.childNodes[t].destroy();e=V.divDHierarchyWhoContent.childElementCount;for(let t=e-1;t>=0;t--)V.divDHierarchyWhoContent.childNodes[t].destroy();e=V.divDHierarchyWhenContent.childElementCount;for(let t=e-1;t>=0;t--)V.divDHierarchyWhenContent.childNodes[t].destroy();e=V.divDHierarchyWhereContent.childElementCount;for(let t=e-1;t>=0;t--)V.divDHierarchyWhereContent.childNodes[t].destroy();e=V.divDHierarchyWhyContent.childElementCount;for(let t=e-1;t>=0;t--)V.divDHierarchyWhyContent.childNodes[t].destroy();e=V.divDHierarchyHowContent.childElementCount;for(let t=e-1;t>=0;t--)V.divDHierarchyHowContent.childNodes[t].destroy()},cleanUpAttributeTags:function(){let e=V.divWhatContent.childElementCount;for(let t=e-1;t>=0;t--)V.divWhatContent.childNodes[t].destroy();e=V.divWhoContent.childElementCount;for(let t=e-1;t>=0;t--)V.divWhoContent.childNodes[t].destroy();e=V.divWhenContent.childElementCount;for(let t=e-1;t>=0;t--)V.divWhenContent.childNodes[t].destroy();e=V.divWhereContent.childElementCount;for(let t=e-1;t>=0;t--)V.divWhereContent.childNodes[t].destroy();e=V.divWhyContent.childElementCount;for(let t=e-1;t>=0;t--)V.divWhyContent.childNodes[t].destroy();e=V.divHowContent.childElementCount;for(let t=e-1;t>=0;t--)V.divHowContent.childNodes[t].destroy()},_checkHierarchicalTagUpdate:function(e){let a=!1;if(t.is(this._prev_hierarchical_predicates))if(this._prev_hierarchical_predicates.specify_hierarchical_predicates!==e.specify_hierarchical_predicates)a=!0;else if(this._prev_hierarchical_predicates.hierarchical_predicates.length!==e.hierarchical_predicates.length)a=!0;else{let t=[];this._prev_hierarchical_predicates.hierarchical_predicates.forEach((e=>{t.push(e.uri)}));for(let r=0;r<e.hierarchical_predicates.length;r++)if(t.indexOf(e.hierarchical_predicates[r].uri)<0){a=!0;break}}else a=!0;e.version=a?""+ +new Date:this._prev_hierarchical_predicates.version},_isOntologyActivated:()=>!0===b.isInternalProduction()||!0===v.getOption("allowEnterpriseDictionaryModification"),_isCompanyTagsActivated:()=>"OnPremise"!==p.platformID,_isDeleteCompanyTagActivated:()=>!0===v.getOption("DeleteManualCompanyTag"),_isDeleteAllExistingCompanyTagActivated:()=>!0===v.getOption("DeleteAllExistingCompanyTag"),_isExpertIdeationActivated:()=>!0===v.getOption("ExpertIdeation"),_isAdvocacyActivated:()=>!0===v.getOption("AdvocacyAnnotation"),_get6WVal:function(e){let a=null,r=V._6WPredicatesMap.find((function(t){return t.curi===e}));return t.is(r)?("ds6w:what"===r.lineage&&(a="What"),"ds6w:where"===r.lineage&&(a="Where"),"ds6w:who"===r.lineage&&(a="Who"),"ds6w:when"===r.lineage&&(a="When"),"ds6w:how"===r.lineage&&(a="How"),"ds6w:why"===r.lineage&&(a="Why")):"computedCountryInfo"===e&&(a="Where"),a},_getWtreeContents:function(e){let a={},r=[],n=[],i=e.childElementCount;for(let a=0;a<i;a++){let i=e.childNodes[a];if(t.is(i)){let e=i.childElementCount;for(let a=0;a<e;a++){let e=i.childNodes[a];if(t.is(e)){let a=e.childElementCount;for(let i=0;i<a;i++){let a={},o={},s=e.childNodes[i].getAttribute("uri");t.is(s)&&("strike_through"===e.childNodes[i].className?(o.uri=e.childNodes[i].getAttribute("uri"),o.label=e.childNodes[i].textContent,n.push(o)):(a.uri=e.childNodes[i].getAttribute("uri"),a.label=e.childNodes[i].textContent,r.push(a)))}}}}}return a.predicates=r,a.excluded_predicates=n,a},_getKeyByValue:function(e,t){return Object.keys(e).find((a=>e[a]===t))},getCurrentDatasetTitle:function(e){D.getSearchSettings({tenantID:p.platformID}).then((function(a){if(a.hasOwnProperty("enterprise_ontology")&&t.is(a.enterprise_ontology.dataset,"array")&&a.enterprise_ontology.dataset.length>0){let t=a.enterprise_ontology.dataset[0].datasetTitle+" | "+a.enterprise_ontology.dataset[0].modificationdate+" | "+a.enterprise_ontology.dataset[0].creator;e.setAttribute("placeholder",t)}}))},collapseRootWArea:function(e){e.getChildren()[0].getChildren()[1].setStyles({"min-height":"0px"})},toggleRootWArea:function(e){var a,r,n,i,o=e.getElement(".rootw-arrow-container");e.getElement(".rootw-expander");if(e.getParent().getChildren()[0].getChildren()[1].setStyles({"min-height":"100px"}),e.hasClassName("hiddenW"),e.removeClassName("hiddenW"),o.addClassName("expanded"),o)for(n=0,i=(a=o.getParent().getChildren()).length;n<i;++n)(r=t.extendElement(a[n])).match(".root-container-inner")&&(t.extendElement(r.getChildren()[0]),r.setStyles({position:"relative",overflow:"hidden",opacity:1,height:"100%",visibility:"visible"})),r.match(".arrow")&&t.extendElement(r.getChildren()[0])},onUpdateUI:function(e){!0===this._isCompanyTagsActivated()&&m.onUpdateUI()},_createModelBody:function(t){let a=this,r=e.create("div",{class:"",id:t+"-div",styles:{"align-self":"center",width:"100%",height:"50px"}}),n=e.create("div",{class:" ",id:t+"-combodiv",styles:{float:"left",clear:"both",width:"100%",padding:"15px 1px 1px 1px"}}).inject(r),i=[{label:k.getRootWDisplayName("what",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-what"},{label:k.getRootWDisplayName("who",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-who"},{label:k.getRootWDisplayName("when",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-when"},{label:k.getRootWDisplayName("where",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-where"},{label:k.getRootWDisplayName("why",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-why"},{label:k.getRootWDisplayName("how",!1,this.getWidgetLan()),icon:"fonticon fonticon-3ds-how"}];return V.getPredicatesObject().then((function(e){V.getRootWOfPredicates().then((function(r){let o=a.filter6WRootPredicates(e),s=new j({shouldBeSelected:function(e){return"section"!==e.options.comboBoxSemantics}}),l={what:o.whatpredicates,who:o.whopredicates,when:o.whenpredicates,where:o.wherepredicates,why:o.whypredicates,how:o.howpredicates};Object.keys(l).forEach((function(e,t){let a=l[e],r=new O({label:i[t].label,icons:[{iconName:i[t].icon}],comboBoxSemantics:"section"});s.addRoot(r),a.forEach((function(e,t){r.addChild(new O({label:e.label,grid:e,comboBoxSemantics:"subsection"}))}))})),s.expandAll(),"includeModal"==t?V.selectWComboForIncludeModal=V._createWUXAutoCompleteBody(n,t,s):"excludeModal"==t?V.selectWComboForExcludeModal=V._createWUXAutoCompleteBody(n,t,s):"hierarchyModal"==t&&(V.selectWComboForHierarchyModal=V._createWUXAutoCompleteBody(n,t,s))}))})),r},_createWUXAutoCompleteBody:function(e,t,a){let r=this,n=new M({multiSearchMode:!1,allowFreeInputFlag:!1,elementsTree:a,placeholder:"Select a W category",domId:t+"selectWComboBox"}).inject(e);return n.elements.container.children[0].setStyles({width:"100%"}),n.elements.container.children[0].children[0].setStyles({"font-size":"14px",height:"38px"}),p.disableButtons(),n.addEventListener("change",(function(){r._includeTagVal=n.value;let e=r.getPredicateUri(r._wPredicates,r._includeTagVal);r._includeTagUri=e,r._includeWVal=r._get6WVal(e),"includeModal"==t?V.Include_button.disabled=!1:"excludeModal"==t?V.Exclude_button.disabled=!1:"hierarchyModal"==t&&(V.hierarchyAdd_button.disabled=!1)})),n},getPredicateUri:function(e,a){if(t.is(a)&&t.is(e))for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];if(!r.label)return;if(r.label===a)return r.value}},upsertTrackerEntrytag:function(e){Array.isArray(V._trackerData)||(V._trackerData=[]);const t=V._trackerData.findIndex((t=>t.pd1===e.pd1)),a=V._trackerData.findIndex((t=>t.pd2===e.pd2));-1!==t&&-1!==a?V._trackerData[t]=e:V._trackerData.push(e)}};return V}));