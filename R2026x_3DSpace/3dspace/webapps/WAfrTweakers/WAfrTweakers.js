define("DS/WAfrTweakers/TweakerUtilities",["UWA/Core","DS/Core/TooltipModel","DS/WebappsUtils/WebappsUtils","DS/WebUAUtils/WebUAUtils","DS/Utilities/Dom","DS/WAfrAcceleratorManager/AcceleratorManagerHelperUtilities"],(function(e,t,i,n,s,l){"use strict";function a(){return h.cloneTooltipModel(this)}function r(e){return Object.keys(e).filter((e=>e.startsWith("WebHelp")||e.startsWith("PanelHelp")))}function o(e,t,i,n){n=!!n;const s=r(i);for(const l of s)t[e+"."+l]=i[l],n&&delete i[l]}var h={computeIconPath:function(e){let t;var i=e.value;void 0===/(?:\.([^.]+))?$/.exec(i)[1]&&(i+=".png");var n="",s=i.split("/");return s.length>0?(n=s[0],s.shift(),t=require.toUrl("DS/"+n+"/assets/icons/"+s.join("/"))):console.error("Impossible to retrieve icon uri information"),t},applyResources:function(e){var t=e.elem;if(e.elem2)var i=e.elem2;var n=e.view;if(void 0!==t&&void 0!==n){if(void 0!==t.getI18n&&void 0!==t.getI18n()&&(e.title&&h.applyTitle({elem:t,view:n}),e.tooltipInfos)){if(i)var s={elem:t,elem2:i,view:n};else s={elem:t,view:n};e&&e.tooltipOptionsPosition&&(s.tooltipOptionsPosition=e.tooltipOptionsPosition),e&&e.appId&&(s.appId=e.appId),h.applyTooltipInfos(s)}e.icon&&h.applyIcon({elem:t,view:n})}},applyTitle:function(e){var t=e.elem,i=e.view;if(void 0===t||void 0===i)return;let n=t.getI18n(),s=n&&n.title?n.title:"NLS_NO_TITLE";i.label=s},applyTooltipInfos:function(e){var i=e.elem,s=e.view;if(e.elem2)var a=e.elem2;if(void 0!==i&&void 0!==s)if(void 0!==s.tooltipInfos)h.applyNewTooltipInfos({elem:i,elem2:a,target:s.tooltipInfos});else{var r=i.getId(),d=JSON.parse(JSON.stringify(i.getI18n()));d.allowUnsafeHTMLShortHelp=!0,d.allowUnsafeHTMLLongHelp=!0;var c={helpid:r,content:{}};if(e&&e.appId&&(c.appid=e.appId),d.hasOwnProperty("title"))if(a){var u=a.getAccelerator(),p=i.getAccelerator();if(u||p){var g=d.title,m="";u.keyboard&&(m=g+" ("+u.keyboard+")"),m&&(d.title=m)}}else{var b=i.getAccelerator();if(b){g=d.title,m="";b.keyboard&&(m=g+" ("+b.keyboard+")"),m&&(d.title=m)}}if(o(r,c.content,d,!0),d.mouseRelativePosition=!1,d.position="top",e&&e.tooltipOptionsPosition&&(d.position=e.tooltipOptionsPosition),d.hasOwnProperty("title")&&"Mac OS"===l.getOS()){d.title=d.title.split("Ctrl").join("⌘"),d.title=d.title.split("Alt").join("⌥"),d.title=d.title.split("Shift").join("⇧")}s.tooltipInfos=new t(d);var v=n.getMoreHelpCallback(c);v&&(s.tooltipInfos.moreHelpCB=v)}},applyIcon:function(e){var t=e.elem,i=e.view;void 0!==t&&void 0!==i&&void 0!==t.getIcon&&void 0!==t.getIcon()&&(i.icon=h.computeIconPath({value:t.getIcon().uri,elem:t}))},applyNewTooltipInfos:function(e){var t=e.elem,i=e.target,n=e.elem2;void 0!==t.getI18n&&void 0!==t.getI18n()&&void 0!==i&&this.replaceTooltipInfos({elem:t,elem2:n,source:t.getI18n(),target:i})},replaceTooltipInfos:function(e){var t=e.source,i=e.target;if(void 0!==t&&void 0!==i){if(void 0!==t.title)if(e.elem2){var s=e.elem2.getAccelerator(),a=e.elem.getAccelerator();if(s||a){var h="";if(s.keyboard&&(h=t.title+" ("+s.keyboard+")"),"Mac OS"===l.getOS()){var d="⌘",c="⌥",u="⇧";h=(h=(h=h.split("Ctrl").join(d)).split("Alt").join(c)).split("Shift").join(u)}h&&(i.title=h)}else i.title=t.title}else if(e.elem){var p=e.elem.getAccelerator();if(p){h="";if(p.keyboard&&(h=t.title+" ("+p.keyboard+")"),"Mac OS"===l.getOS()){d="⌘",c="⌥",u="⇧";h=(h=(h=h.split("Ctrl").join(d)).split("Alt").join(c)).split("Shift").join(u)}h&&(i.title=h)}else i.title=t.title}else i.title=t.title;else i.title=null;if(void 0!==t.shortHelp&&(i.shortHelp=t.shortHelp),void 0!==t.longHelp&&(i.longHelp=t.longHelp),void 0!==t.shortHelpImage&&(i.shortHelpImage=t.shortHelpImage),void 0!==t.longHelpImage&&(i.longHelpImage=t.longHelpImage),void 0!==t.shortHelpImageDimension&&(i.shortHelpImageDimension=t.shortHelpImageDimension),void 0!==t.longHelpImageDimension&&(i.longHelpImageDimension=t.longHelpImageDimension),e.elem&&r(t).length>0){var g=e.elem.getId(),m=JSON.parse(JSON.stringify(e.elem.getI18n())),b={helpid:g,content:{}};e&&e.appId&&(b.appid=e.appId),o(g,b.content,m,!1),i.moreHelpCB=n.getMoreHelpCallback(b)}else i.moreHelpCB&&(i.moreHelpCB=void 0)}},computeTooltipModelParameters:function(e){var t=e.elem;if(e.elem2)var i=e.elem2;if(void 0===t)return;var s=t.getId();if(t.getI18n()){var a=JSON.parse(JSON.stringify(t.getI18n()));a.allowUnsafeHTMLShortHelp=!0,a.allowUnsafeHTMLLongHelp=!0;var r={helpid:s,content:{}};if(e&&e.appId&&(r.appid=e.appId),a.hasOwnProperty("title"))if(i){var h=i.getAccelerator(),d=t.getAccelerator();if(h||d){var c=a.title,u="";h.keyboard&&(u=c+" ("+h.keyboard+")"),u&&(a.title=u)}}else{var p=t.getAccelerator();if(p){c=a.title,u="";p.keyboard&&(u=c+" ("+p.keyboard+")"),u&&(a.title=u)}}if(o(s,r.content,a,!0),a.mouseRelativePosition=!1,a.position="top",e&&e.tooltipOptionsPosition&&(a.position=e.tooltipOptionsPosition),a.hasOwnProperty("title")&&"Mac OS"===l.getOS()){a.title=a.title.split("Ctrl").join("⌘"),a.title=a.title.split("Alt").join("⌥"),a.title=a.title.split("Shift").join("⇧")}var g=n.getMoreHelpCallback(r);return g&&(a.moreHelpCB=g),a}},computeTooltipInfos:function(e){return new t(this.computeTooltipModelParameters(e))},getTitle:function(e){let t;if(e){let i=e.getI18n();t=i&&i.title?i.title:"NLS_NO_TITLE"}return t},getIcon:function(e){let t={src:""};if(e){const i=e.getIcon();i&&(i.type&&"base64"===i.type?t.src=i.uri:t.src=h.computeIconPath({value:i.uri}))}return t},cloneTooltipModel:function(e){let i=new t({title:e.title,shortHelp:e.shortHelp,longHelp:e.longHelp,shortHelpImage:e.shortHelpImage,longHelpImage:e.longHelpImage,shortHelpImageDimension:e.shortHelpImageDimension,longHelpImageDimension:e.longHelpImageDimension,moreHelpCB:e.moreHelpCB,position:e.position,mouseRelativePosition:!1,allowUnsafeHTMLShortHelp:!0,allowUnsafeHTMLLongHelp:!0});return i.clone=a,i},createCloneableTooltipModel:function(e){let t=this.computeTooltipInfos(e);return t&&(t.clone=a),t}};return h})),define("DS/WAfrTweakers/TweakerRadioHandlerLoopButton",["DS/Tweakers/TweakerBase","DS/Controls/Button","DS/WAfrTweakers/TweakerUtilities","DS/WAfrUtils/mod_Performances"],(function(e,t,i,n){"use strict";let s=n.Performances,l="[DS/WAfrTweakers/TweakerRadioHandlerLoopButton]",a=new s;return e.inherit({name:"tweakerHandlerRadioLoopButton",publishedProperties:{showLabelFlag:{defaultValue:!1,type:"boolean"}},init:function(e){let t=a.start([l,"[TweakerHandlerRadioLoopButton] init"].join(" "));this._subscriptions=[],this._appId=e.appId,this._parent(e),a.stop(t)},_build:function(){if(this._parent(),void 0===this.elements.container)throw new Error("this.elements.container is undefined");this.elements.container.addClassName("wafr-tweakers"),this.elements.container.addClassName("wafr-tweakers-radio-loop"),this.elements.internalView=new t({displayStyle:"icon",showLabelFlag:this.showLabelFlag}),this.elements.internalView.inject(this.elements.container)},_applyValue:function(e){this._parent(),this.value!==e&&(null!=e&&this._cleanSubscriptions(),this._registerForRadioStateChange(),this._registerForAvailabilityModes(),this._selectedItem=this.value.getSelectedItem(),this._selectedItem&&this._setSelectedItem(this._selectedItem.onCheckHandler))},_applyTouchMode:function(){},_applyShowLabelFlag:function(){let e=this.elements.internalView;this._selectedItem&&e&&e.showLabelFlag!==this.showLabelFlag&&(e.showLabelFlag=this.showLabelFlag,i.applyTitle({elem:this._selectedItem,view:e}))},handleEvents:function(){this.elements.internalView.addEventListener("buttonclick",function(){this._setNext()}.bind(this))},_registerForRadioStateChange:function(){let e=this.value;if(!e)throw new Error("No model");{let t=e.items,i=0,n=t.length;for(;i<n;++i)(function(t){let i=e.onItemStateEvent("SELECT",t.getId(),function(){this._setSelectedItem(t.onCheckHandler)}.bind(this));this._subscriptions.push({obj:e,funcName:"removeItemStateEventSubscription",token:i})}).call(this,t[i])}},_registerForAvailabilityModes:function(){let e=this.value,t=this.elements.internalView;if(e&&t){e.isExecutable()||(t.disabled=!0);let i=e.onAvailabilityEvent((function(e){t.disabled=!e.newValue}));this._subscriptions.push({obj:e,funcName:"removeAvailabilityEventSubscription",token:i})}},_cleanSubscriptions:function(){let e=this._subscriptions,t=null,i=null,n=null,s=null;for(;e.length>0;)t=e.pop(),i=t.obj,n=t.funcName,s=t.token,i&&n&&void 0!==s&&i[n](s)},_setSelectedItem:function(e){this._selectedItem!==e&&(this._selectedItem=e,i.applyResources({elem:e,view:this.elements.internalView,icon:!0,title:this.elements.internalView.showLabelFlag,tooltipInfos:!0,appId:this._appId?this._appId:void 0}),this._selectedItem.getI18n()&&this._selectedItem.getI18n().title&&this.elements.internalView.getContent().setAttribute("data-WAfrPageObjecUseOnlyHandler",this._selectedItem.getI18n().title))},_setNext:function(){let e=this.value,t=e.getSelectedItem(),i=t.getId(),n=e.items,s=n.length,l=0,a=!1,r=null;for(;!a&&l<s;)r=n[l].getId(),r===i?a=!0:++l;if(a){t.onCheckHandler.getI18n()&&t.onCheckHandler.getI18n().title&&this.elements.internalView.getContent().removeAttribute("data-WAfrPageObjecUseOnlyHandler");let i=n[(l+1)%s];if(i&&i.isExecutable()){let t=i.getId();e.setRadioItemState({radioHdlrItemId:t,state:!0})}else console.error(new Error("Impossible to execute. The item may be unavailable."));i.getI18n()&&i.getI18n().title&&this.elements.internalView.getContent().setAttribute("data-WAfrPageObjecUseOnlyHandler",i.getI18n().title)}}})})),define("DS/WAfrTweakers/TweakerHandlerSimple",["UWA/Core","DS/Tweakers/TweakerBase","DS/Utilities/TouchUtils","DS/WAfrTweakers/TweakerUtilities","DS/WAfrUtils/mod_Performances","DS/WAfrControls/WAfrUIButton"],(function(e,t,i,n,s,l){"use strict";var a=s.Performances,r="[DS/WAfrTweakers/TweakerHandlerSimple]",o=new a,h=o.start([r,"[Sync] TweakerBase.inherit"].join(" ")),d=t.inherit({name:"tweakerHandlerSimple",publishedProperties:{displayStyle:{defaultValue:"",type:"string"},showLabelFlag:{defaultValue:!1,type:"boolean"}},init:function(e){var t=o.start([r,"[Unknown] init"].join(" "));this.isMABAvailable=e.isMABAvailable,this._appId=e.appId,this._handlerTrigger=e.handlerTrigger,this._parent(e),o.stop(t)},buildView:function(){this._parent(),this.elements.container.addClassName("wafr-tweakers-simple"),this.elements.container.addClassName("wafr-tweakers")},_postBuildView(){this._parent();const e=this.value;let t={label:n.getTitle(e),icon:n.getIcon(e),touchFlag:this.touchMode,tooltip:n.createCloneableTooltipModel({elem:e,appId:this._appId?this._appId:void 0}),showLabelFlag:this.showLabelFlag};if(e&&!e.isExecutable()&&(t.disableFlag=!0),"flyout"!==this.displayStyle){if(e&&e.isFrontCmd){let e=Object.assign({showLabelFlag:!1},t);this.elements.frontCmd=new l(e)}}else t.displayStyle="dropdown";this.elements.internalView=new l(t),e&&e.getI18n()&&e.getI18n().title&&this.elements.internalView.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",e.getI18n().title),this.elements.container.appendChild(this.elements.internalView.getDom())},_updateView:function(e){let t=e.value,i=e.elements.internalView;if(i){const e=n.getTitle(t),s=n.getIcon(t);i.icon=s,i.label=e,i.tooltip=n.createCloneableTooltipModel({elem:t,appId:this._appId?this._appId:void 0}),t&&t.getI18n()&&t.getI18n().title&&i.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",t.getI18n().title)}},_applyDisplayStyle:function(e){this._parent(),this.elements.internalView&&(this.elements.internalView.displayStyle="flyout"===this.displayStyle?"dropdown":this.displayStyle)},_applyValue:function(e){if(this._parent(),e!==this.value&&(e&&(this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForCommandLifeCycle(),this._unregisterForIconChanged(),this._unregisterForI18nChanged(),!e.frontCmd||this.value&&this.value.frontCmd||this.elements.frontCmd&&this.elements.frontCmd.destroy()),this.value)){let e=this.value;this._registerForCommandLifeCycle({handler:e}),this._registerForAvailabilityModes(),this._registerForIsEnabledChangeEvent(),this._registerForIconChanged(),this._registerForI18nChanged();let t=this.elements.internalView;if(t)if(t.label=n.getTitle(e),t.icon=n.getIcon(e),t.tooltip=n.createCloneableTooltipModel({elem:this.value,appId:this._appId?this._appId:void 0}),t.disableFlag=!e.isExecutable(),this.elements.frontCmd){let i=this.elements.frontCmd;i.label=t.label,i.icon=t.icon,i.showLabelFlag=!1,i.tooltip=t.tooltip.clone(),i.disableFlag=!e.isExecutable()}else this.elements.frontCmd=new l({label:t.label,icon:t.icon,showLabelFlag:!1,tooltip:t.tooltip.clone(),disableFlag:!e.isExecutable()})}},_applyTouchMode:function(){this._parent(),void 0!==this.elements&&void 0!==this.elements.internalView&&void 0!==this.value&&(this.elements.internalView.touchFlag=Boolean(i.getTouchMode()))},_applyShowLabelFlag:function(){void 0!==this.elements&&void 0!==this.elements.internalView&&void 0!==this.value&&(this.elements.internalView.showLabelFlag=Boolean(this.showLabelFlag),this.showLabelFlag?this.elements.container.setAttributeNode(document.createAttribute("showlabel")):this.elements.container.removeAttribute("showlabel")),this._parent()},handleEvents:function(){var e=this,t=this.elements.internalView;let i={args:{handlerTrigger:e._handlerTrigger}};t.addListener("click",(function(t){void 0!==e.value&&void 0!==e.value.execute&&(e.value.registerFunctionalTestScripterStep(e.value.getI18n()?e.value.getI18n().title:""),e.value.execute(i))})),e.value&&e.value.isFrontCmd&&e.elements.frontCmd.addListener("click",(function(t){e.value.execute(i)}))},_registerForCommandLifeCycle:function(e){var t=this,i=e.handler;void 0!==i&&(void 0===t._subscriptionBEGIN&&(t._subscriptionBEGIN=i.onLifeCycleEvent("BEGIN",(()=>{this.elements.internalView.checkFlag=!0,void 0!==i.container&&void 0!==i.container.elements&&(i.container.elements.presenterButton.checkFlag=!0)}))),void 0===t._subscriptionEND&&(t._subscriptionEND=i.onLifeCycleEvent("END",(()=>{this.elements.internalView.checkFlag=!1,void 0!==i.container&&void 0!==i.container.elements&&view===i.container.currentValue.view&&(i.container.elements.presenterButton.checkFlag=!1)}))))},_unregisterForCommandLifeCycle:function(){const e=this.value;e&&(this._subscriptionBEGIN&&(e.removeLifeCycleEventSubscription(this._subscriptionBEGIN),delete this._subscriptionBEGIN),this._subscriptionEND&&(e.removeLifeCycleEventSubscription(this._subscriptionEND),delete this._subscriptionEND))},_registerForAvailabilityModes:function(){const e=this.value;e&&(this._subscriptionAVAILABILITY||(!e.isExecutable()&&this.elements.internalView&&(this.elements.internalView.disableFlag=!0),this._subscriptionAVAILABILITY=e.onAvailabilityEvent((t=>{this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable())}))))},_unregisterForAvailabilityModes:function(){const e=this.value;e&&this._subscriptionAVAILABILITY&&(e.removeAvailabilityEventSubscription(this._subscriptionAVAILABILITY),delete this._subscriptionAVAILABILITY)},_registerForIsEnabledChangeEvent:function(){const e=this.value;e&&(this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable()),this._subscriptionIS_ENABLED=e.onIsEnabledChangeEvent((()=>{e&&this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable())})))},_unregisterForIsEnabledChangeEvent:function(){const e=this.value;e&&this._subscriptionIS_ENABLED&&(e.removeIsEnabledChangeEventSubscription(this._subscriptionIS_ENABLED),delete this._subscriptionIS_ENABLED)},_registerForIconChanged:function(){let e=this.value;void 0!==e&&void 0===this._subscriptionICON&&(this._subscriptionICON=e.onIconChangedEvent((()=>{this.elements.internalView&&this._updateView(this)})))},_unregisterForIconChanged:function(){let e=this.value;e&&this._subscriptionICON&&(e.removeIconChangedEventSubscription(this._subscriptionICON),delete this._subscriptionICON)},_registerForI18nChanged:function(){let e=this.value;void 0!==e&&void 0===this._subscriptionTITLE&&(this._subscriptionTITLE=e.onI18nChangedEvent((()=>{this.elements.internalView&&this._updateView(this)})))},_unregisterForI18nChanged:function(){let e=this.value;e&&this._subscriptionTITLE&&(e.removeI18nChangedEventSubscription(this._subscriptionTITLE),delete this._subscriptionTITLE)},destroy(){this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForCommandLifeCycle(),this._unregisterForIconChanged(),this._unregisterForI18nChanged(),this.elements.frontCmd&&(this.elements.frontCmd.destroy(),delete this.elements.frontCmd),this.elements.internalView&&(this.elements.internalView.destroy(),delete this.elements.internalView),this._parent()}});return o.stop(h),d})),define("DS/WAfrTweakers/TweakerHandlerCommand",["UWA/Core","DS/Tweakers/TweakerBase","DS/WebappsUtils/WebappsUtils","DS/Utilities/TouchUtils","DS/WAfrTweakers/TweakerUtilities","DS/WAfrUtils/mod_Performances","DS/WAfrControls/WAfrUIButton"],(function(e,t,i,n,s,l,a){"use strict";var r=l.Performances,o="[DS/WAfrTweakers/TweakerHandlerCommand]",h=new r,d=h.start([o,"[Sync] TweakerBase.inherit"].join(" ")),c=t.inherit({name:"tweakerHandlerCommand",publishedProperties:{displayStyle:{defaultValue:"",type:"string"},showLabelFlag:{defaultValue:!1,type:"boolean"}},init:function(e){var t=h.start([o,"[Unknown] init"].join(" "));this.isMABAvailable=e.isMABAvailable,this._appId=e.appId,this._handlerTrigger=e.handlerTrigger,this._parent(e),h.stop(t)},buildView(){this._parent(),this.elements.container.addClassName("wafr-tweakers-command"),this.elements.container.addClassName("wafr-tweakers")},_postBuildView(){this._parent();const e=this.value;let t={label:s.getTitle(e),icon:s.getIcon(e),touchFlag:this.touchMode,tooltip:s.createCloneableTooltipModel({elem:e,appId:this._appId?this._appId:void 0}),showLabelFlag:this.showLabelFlag};if(e&&(e.isExecutable()||(t.disableFlag=!0),e.isFrontCmd)){let e=Object.assign(t);this.elements.frontCmd=new a(e)}"flyout"===this.displayStyle&&(t.displayStyle="dropdown"),this.elements.internalView=new a(t),this.value&&"EXECUTING"===this.value.getState()&&(this.elements.internalView.checkFlag=!0),this.value&&this.value.getI18n()&&this.value.getI18n().title&&this.elements.internalView.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",this.value.getI18n().title),this.elements.container.appendChild(this.elements.internalView.getDom())},_applyDisplayStyle:function(e){this._parent(),this.elements.internalView&&(this.elements.internalView.displayStyle="flyout"===this.displayStyle?"dropdown":this.displayStyle)},_applyValue:function(e){if(this._parent(),e!==this.value&&(e&&(this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForCommandLifeCycle(),!e.frontCmd||this.value&&this.value.frontCmd||this.elements.frontCmd&&this.elements.frontCmd.destroy()),this.value)){let e=this.value;this._registerForCommandLifeCycle({handler:e}),this._registerForAvailabilityModes(),this._registerForIsEnabledChangeEvent();let t=this.elements.internalView;if(t)if(t.label=s.getTitle(e),t.icon=s.getIcon(e),t.tooltip=s.createCloneableTooltipModel({elem:this.value,appId:this._appId?this._appId:void 0}),t.disableFlag=!e.isExecutable(),this.elements.frontCmd){let e=this.elements.frontCmd;e.label=t.label,e.icon=t.icon,e.showLabelFlag=this.showLabelFlag,e.tooltip=t.tooltip.clone(),e.disableFlag=t.disableFlag}else this.elements.frontCmd=new a({label:t.label,icon:t.icon,showLabelFlag:this.showLabelFlag,tooltip:t.tooltip.clone(),disableFlag:!e.isExecutable()})}},_applyTouchMode:function(){this._parent(),void 0!==this.elements&&void 0!==this.elements.internalView&&void 0!==this.value&&(this.elements.internalView.touchFlag=Boolean(n.getTouchMode()))},_applyShowLabelFlag:function(){void 0!==this.elements&&void 0!==this.elements.internalView&&void 0!==this.value&&(this.elements.internalView.showLabelFlag=Boolean(this.showLabelFlag),this.showLabelFlag?this.elements.container.setAttributeNode(document.createAttribute("showlabel")):this.elements.container.removeAttribute("showlabel")),this._parent()},handleEvents:function(){var e=this;this.elements.internalView.addListener("click",(function(t){void 0!==e.value&&void 0!==e.value.execute&&(e.value.registerFunctionalTestScripterStep(e.value.getI18n()?e.value.getI18n().title:""),e.value.execute({args:{handlerTrigger:e._handlerTrigger}}))})),e.value&&e.value.isFrontCmd&&e.elements.frontCmd.addListener("click",(function(t){e.value.execute()}))},_registerForCommandLifeCycle:function(e){var t=this,i=e.handler;void 0!==i&&(void 0===t._subscriptionBEGIN&&(t._subscriptionBEGIN=i.onLifeCycleEvent("BEGIN",(()=>{this.elements.internalView.checkFlag=!0,void 0!==i.container&&void 0!==i.container.elements&&(i.container.elements.presenterButton.checkFlag=!0)}))),void 0===t._subscriptionRESUME&&(t._subscriptionRESUME=i.onLifeCycleEvent("RESUME",(()=>{this.elements.internalView.disabledFlag=!1,void 0!==i.container&&void 0!==i.container.elements&&(i.container.elements.presenterButton.disabledFlag=!1)}))),void 0===t._subscriptionCANCEL&&(t._subscriptionCANCEL=i.onLifeCycleEvent("CANCEL",(()=>{this.elements.internalView.checkFlag=!1,void 0!==i.container&&void 0!==i.container.elements&&(i.container.elements.presenterButton.checkFlag=!1)}))),void 0===t._subscriptionEND&&(t._subscriptionEND=i.onLifeCycleEvent("END",(e=>{void 0!==e&&!0!==e.repeated&&(this.elements.internalView.checkFlag=!1,void 0!==i.container&&void 0!==i.container.elements&&this.elements.internalView===i.container.currentValue.view&&(i.container.elements.presenterButton.checkFlag=!1))}))),void 0===t._subscriptionCOMPUTE&&(t._subscriptionCOMPUTE=i.onLifeCycleEvent("COMPUTE",(()=>{this.elements.internalView.checkFlag=!0,void 0!==i.container&&void 0!==i.container.elements&&(i.container.elements.presenterButton.checkFlag=!0)}))))},_unregisterForCommandLifeCycle:function(){let e=this.value;e&&(this._subscriptionBEGIN&&(e.removeLifeCycleEventSubscription(this._subscriptionBEGIN),delete this._subscriptionBEGIN),this._subscriptionPAUSE&&(e.removeLifeCycleEventSubscription(this._subscriptionPAUSE),delete this._subscriptionPAUSE),this._subscriptionRESUME&&(e.removeLifeCycleEventSubscription(this._subscriptionRESUME),delete this._subscriptionRESUME),this._subscriptionCANCEL&&(e.removeLifeCycleEventSubscription(this._subscriptionCANCEL),delete this._subscriptionCANCEL),this._subscriptionEND&&(e.removeLifeCycleEventSubscription(this._subscriptionEND),delete this._subscriptionEND),this._subscriptionCOMPUTE&&(e.removeLifeCycleEventSubscription(this._subscriptionCOMPUTE),delete this._subscriptionCOMPUTE))},_registerForAvailabilityModes:function(){const e=this.value;e&&(this._subscriptionAVAILABILITY||(!e.isExecutable()&&this.elements.internalView&&(view.disableFlag=!0),this._subscriptionAVAILABILITY=e.onAvailabilityEvent((t=>{this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable())}))))},_unregisterForAvailabilityModes:function(){let e=this.value;e&&this._subscriptionAVAILABILITY&&(e.removeAvailabilityEventSubscription(this._subscriptionAVAILABILITY),delete this._subscriptionAVAILABILITY)},destroy(){this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForCommandLifeCycle(),this.elements.internalView&&(this.elements.internalView.destroy(),delete this.elements.internalView),this.elements.frontCmd&&(this.elements.frontCmd.destroy(),delete this.elements.frontCmd),this._parent()},_registerForIsEnabledChangeEvent:function(){const e=this.value;e&&(this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable()),this._subscriptionIS_ENABLED=e.onIsEnabledChangeEvent((()=>{e&&this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable())})))},_unregisterForIsEnabledChangeEvent:function(){let e=this.value;e&&this._subscriptionIS_ENABLED&&(e.removeIsEnabledChangeEventSubscription(this._subscriptionIS_ENABLED),delete this._subscriptionIS_ENABLED)}});return h.stop(d),c})),define("DS/WAfrTweakers/TweakerHandlerCheck",["UWA/Core","DS/Tweakers/TweakerBase","DS/Utilities/TouchUtils","DS/Controls/Toggle","DS/WebappsUtils/WebappsUtils","DS/WAfrTweakers/TweakerUtilities","DS/WAfrUtils/mod_Performances","DS/WAfrControls/WAfrUIButton","DS/CoreUtilities/ErrorManagement"],(function(e,t,i,n,s,l,a,r,o){"use strict";var h=a.Performances,d="[DS/WAfrTweakers/TweakerHandlerCheck]",c=new h;function u(e,t){let i=e.elements.internalView,n=e.value;if(i){i.checkFlag=t;const s=n.onCheckHandler,a=n.onUncheckHandler,r=t?s:a,o=t?a:s,h=l.getTitle(r),d=l.getIcon(r);i.icon=d,i.label=h,i.tooltip=l.createCloneableTooltipModel({elem:r,elem2:o,appId:e._appId?e._appId:void 0}),o&&o.getI18n()&&o.getI18n().title&&i.getDom().removeAttribute("data-WAfrPageObjecUseOnlyHandler"),r&&r.getI18n()&&r.getI18n().title&&i.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",r.getI18n().title)}}var p=c.start([d,"[Sync] TweakerBase.inherit"].join(" ")),g=t.inherit({name:"tweakerHandlerCheck",publishedProperties:{displayStyle:{defaultValue:"",type:"string"},showLabelFlag:{defaultValue:!1,type:"boolean"}},init:function(e){var t=c.start([d,"[Unknown] init"].join(" "));this._appId=e.appId,this._handlerTrigger=e.handlerTrigger,this._parent(e),c.stop(t)},buildView(){this._parent(),this.elements.container.addClassName("wafr-tweakers-check"),this.elements.container.addClassName("wafr-tweakers")},_postBuildView(){this._parent();let e=!1,t=null;this.value&&(e=Boolean(this.value.getState()),t=e?this.value.onCheckHandler:this.value.onUncheckHandler);let i={label:l.getTitle(t),icon:l.getIcon(t),touchFlag:this.touchMode,checkFlag:e,tooltip:this.value?l.createCloneableTooltipModel({elem:e?this.value.onCheckHandler:this.value.onUncheckHandler,elem2:e?this.value.onUncheckHandler:this.value.onCheckHandler,appId:this._appId?this._appId:void 0}):"",showLabelFlag:this.showLabelFlag};this.value&&!this.value.isExecutable()&&(i.disableFlag=!0),"flyout"!==this.displayStyle?i.showLabelFlag=this.showLabelFlag:i.displayStyle="dropdown",this.elements.internalView=new r(i),t&&t.getI18n()&&t.getI18n().title&&this.elements.internalView.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",t.getI18n().title),this.elements.container.appendChild(this.elements.internalView.getDom())},_applyDisplayStyle:function(e){this._parent(),this.elements.internalView&&(this.elements.internalView.displayStyle="flyout"===this.displayStyle?"dropdown":this.displayStyle)},_applyValue:function(e){if(this._parent(),e!==this.value&&(e&&(this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForCheckStateChange(),this._unregisterForIconChanged(),this._unregisterForI18nChanged()),this.value)){let e=this.value;this._registerForCheckStateChange({handler:e}),this._registerForAvailabilityModes(),this._registerForIsEnabledChangeEvent(),this._registerForIconChanged(),this._registerForI18nChanged();let t=this.elements.internalView;if(t){const i=e.getState(),n=i?e.onCheckHandler:e.onUncheckHandler;t.label=l.getTitle(n),t.icon=l.getIcon(n),t.tooltip=l.createCloneableTooltipModel({elem:n,elem2:i?e.onUncheckHandler:e.onCheckHandler,appId:this._appId?this._appId:void 0}),e.isExecutable()||(t.disableFlag=!0)}}},_applyTouchMode:function(){this._parent(),void 0!==this.elements&&void 0!==this.elements.internalView&&void 0!==this.value&&(this.elements.internalView.touchFlag=i.getTouchMode())},_applyShowLabelFlag:function(){void 0!==this.elements&&void 0!==this.elements.internalView&&void 0!==this.value&&(this.elements.internalView.showLabelFlag=Boolean(this.showLabelFlag),this.showLabelFlag?this.elements.container.setAttributeNode(document.createAttribute("showlabel")):this.elements.container.removeAttribute("showlabel")),this._parent()},handleEvents:function(){var e=this;this.elements.internalView.addListener("click",(function(t){let i=Boolean(e.value.getState());const n=!i;u(e,n);const s=i?e.value.onCheckHandler:e.value.onUncheckHandler;e.value.registerFunctionalTestScripterStep(s.getI18n()?s.getI18n().title:""),e.value.setState({origin:origin,state:n,args:{handlerTrigger:e._handlerTrigger},cb:t=>{if(!o.hasSucceeded(t)){let t=e.value.getState();t!==n&&u(e,t)}}})}))},_registerForCheckStateChange:function(e){var t=this,i=e.handler;void 0!==i&&(void 0===t._subscriptionCHECK&&(t._subscriptionCHECK=i.onStateEvent("CHECK",(()=>{u(this,!0)}))),void 0===t._subscriptionUNCHECK&&(t._subscriptionUNCHECK=i.onStateEvent("UNCHECK",(()=>{u(this,!1)}))))},_unregisterForCheckStateChange:function(){const e=this.value;e&&(this._subscriptionCHECK&&(e.removeStateEventSubscription(this._subscriptionCHECK),delete this._subscriptionCHECK),this._subscriptionUNCHECK&&(e.removeStateEventSubscription(this._subscriptionUNCHECK),delete this._subscriptionUNCHECK))},_registerForAvailabilityModes:function(){let e=this.value;e&&(this._subscriptionAVAILABILITY||(!e.isExecutable()&&this.elements.internalView&&(this.elements.internalView.disableFlag=!0),this._subscriptionAVAILABILITY=e.onAvailabilityEvent((t=>{this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable())}))))},_unregisterForAvailabilityModes:function(){let e=this.value;e&&this._subscriptionAVAILABILITY&&(e.removeAvailabilityEventSubscription(this._subscriptionAVAILABILITY),delete this._subscriptionAVAILABILITY)},_updateIcon:function(e){let t=this.elements.internalView;t&&(t.icon=l.getIcon(e))},_updateTitle:function(e,t){let i=this.elements.internalView;i&&(i.label=l.getTitle(e),i.tooltip=l.createCloneableTooltipModel({elem:e,elem2:t,appId:this._appId?this._appId:void 0}),t&&t.getI18n()&&t.getI18n().title&&i.getDom().removeAttribute("data-WAfrPageObjecUseOnlyHandler"),e&&e.getI18n()&&e.getI18n().title&&i.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",e.getI18n().title))},_registerForIconChanged:function(){let e=this.value;if(void 0!==e){let t=e.onCheckHandler,i=e.onUncheckHandler;const n=e.getState();n?e.onCheckHandler:e.onUncheckHandler;void 0!==t&&void 0!==i&&(1==n?void 0===this._subscriptionCheckICON&&(this._subscriptionCheckICON=t.onIconChangedEvent(this._updateIcon.bind(this,t))):void 0===this._subscriptionUnCheckICON&&(this._subscriptionUnCheckICON=i.onIconChangedEvent(this._updateIcon.bind(this,i))))}},_unregisterForIconChanged:function(){let e=this.value;if(void 0!==e){let t=e.onCheckHandler,i=e.onUncheckHandler;void 0!==t&&void 0!==i&&(t&&void 0!==this._subscriptionCheckICON&&(t.removeIconChangedEventSubscription(this._subscriptionCheckICON),delete this._subscriptionCheckICON),i&&void 0!==this._subscriptionUnCheckICON&&(i.removeIconChangedEventSubscription(this._subscriptionUnCheckICON),delete this._subscriptionUnCheckICON))}},_registerForI18nChanged:function(){let e=this.value;if(void 0!==e){let t=e.onCheckHandler,i=e.onUncheckHandler;void 0!==t&&void 0!==i&&(void 0===this._subscriptionCheckTITLE&&(this._subscriptionCheckTITLE=t.onI18nChangedEvent(this._updateTitle.bind(this,t,i))),void 0===this._subscriptionUnCheckTITLE&&(this._subscriptionUnCheckTITLE=i.onI18nChangedEvent(this._updateTitle.bind(this,i,t))))}},_unregisterForI18nChanged:function(){let e=this.value;if(void 0!==e){let t=e.onCheckHandler,i=e.onUncheckHandler;void 0!==t&&void 0!==i&&(t&&this._subscriptionCheckTITLE&&(t.removeI18nChangedEventSubscription(this._subscriptionCheckTITLE),delete this._subscriptionCheckTITLE),i&&this._subscriptionCheckTITLE&&(i.removeI18nChangedEventSubscription(this._subscriptionUnCheckTITLE),delete this._subscriptionUnCheckTITLE))}},destroy(){this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForCheckStateChange(),this._unregisterForIconChanged(),this._unregisterForI18nChanged(),this.elements.internalView&&(this.elements.internalView.destroy(),delete this.elements.internalView),this._parent()},_registerForIsEnabledChangeEvent:function(){const e=this.value;e&&(this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable()),this._subscriptionIS_ENABLED=e.onIsEnabledChangeEvent((()=>{e&&this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable())})))},_unregisterForIsEnabledChangeEvent:function(){const e=this.value;e&&this._subscriptionIS_ENABLED&&(e.removeIsEnabledChangeEventSubscription(this._subscriptionIS_ENABLED),delete this._subscriptionIS_ENABLED)}});return c.stop(p),g})),define("DS/WAfrTweakers/TweakerFlyout",["UWA/Core","DS/Tweakers/TweakerBase","DS/WAfrTweakers/TweakerUtilities","DS/Tweakers/TypeRepresentationFactory","text!DS/WAfrTweakers/assets/WAfrTypeRepresentations.json","text!DS/WAfrTweakers/assets/WAfrTypeTemplates.json","DS/WAfrUtils/mod_Performances","DS/WAfrTweakers/TweakerHandlerCheck","DS/WAfrTweakers/TweakerHandlerSimple","DS/WAfrTweakers/TweakerHandlerCommand"],(function(e,t,i,n,s,l,a,r,o,h){"use strict";throw new Error("DS/WAfrTweakers/TweakerFlyout is deprecated")})),define("DS/WAfrTweakers/TweakerHandlerSet",["UWA/Core","DS/Tweakers/TweakerBase","DS/Utilities/TouchUtils","DS/WAfrTweakers/TweakerUtilities","DS/WAfrUtils/mod_Performances","DS/WAfrControls/WAfrUIButton","DS/WAfrControls/WAfrUIFlyout","DS/WAfrControls/WAfrUISmallViewportActionBarFlyout"],(function(e,t,i,n,s,l,a,r){"use strict";var o=s.Performances,h="[DS/WAfrTweakers/TweakerHandlerSet]",d=new o;function c(e,t){return()=>e.removeLifeCycleEventSubscription(t)}function u(e,t){return()=>e.removeStateEventSubscription(t)}class p{constructor(e,t){this._view=e.elements.internalView,this._itemState=t}visitActionHandler(e){const t=this._view,i=this._itemState;t.setItemConfiguration(e.getId(),{checkFlag:i}),i&&(t.presenterItemId=e.getId())}visitCommandHandler(e){return this.visitActionHandler(e)}visitCheckHandler(e){const t=this._view,i=this._itemState,s=i?e.onCheckHandler:e.onUncheckHandler;t.setItemConfiguration(e.getId(),{label:n.getTitle(s),icon:n.getIcon(s),checkFlag:i,tooltip:n.createCloneableTooltipModel({elem:s,elem2:i?e.onUncheckHandler:e.onCheckHandler,appId:this._appId?this._appId:void 0})}),t.presenterItemId=e.getId()}visitRadioHandler(){throw new Error("RadioHandlers are not supported in a Set.")}}function g(e,t,i){let n=new p(e,i);return t.accept(n)}var m=d.start([h,"[Sync] TweakerBase.inherit"].join(" ")),b=t.inherit({name:"tweakerHandlerSet",publishedProperties:{displayStyle:{defaultValue:"",type:"string"},showLabelFlag:{defaultValue:!1,type:"boolean"}},init:function(e){var t=d.start([h,"[Unknown] init"].join(" "));this.isMABAvailable=e.isMABAvailable,this._appId=e.appId,this._handlerTrigger=e.handlerTrigger,this._parent(e),d.stop(t)},buildView:function(){this._parent(),this.elements.container.addClassName("wafr-tweakers-radio"),this.elements.container.addClassName("wafr-tweakers")},_postBuildView:function(){this._parent();const e=[];let t=this.value.items;for(let i of t){let t,s,l=i.accept({visitActionHandler:()=>!1,visitCommandHandler:()=>!1,visitCheckHandler:()=>!0,visitRadioHandler:()=>{throw new Error("RadioHandlers are not supported in a Set.")}}),a=i,r=null;l&&(r=i.getState(),a=r?i.onCheckHandler:i.onUncheckHandler),l?(t=n.createCloneableTooltipModel({elem:r?i.onCheckHandler:i.onUncheckHandler,elem2:r?i.onUncheckHandler:i.onCheckHandler,appId:this._appId?this._appId:void 0}),s=r?i.onCheckHandler:i.onUncheckHandler):(t=n.createCloneableTooltipModel({elem:i,appId:this._appId?this._appId:void 0}),s=i),e.push({id:i.getId(),label:n.getTitle(a),icon:n.getIcon(a),tooltip:t,disableFlag:!a.isExecutable(),showLabelFlag:this.showLabelFlag})}const i={touchFlag:Boolean(this.touchMode),itemsConfiguration:e,presenterItemId:e[0].id,showLabelFlag:this.showLabelFlag};if("svab"===this.displayStyle)this.elements.internalView=new r(i);else{this.elements.internalView=new a(i);let e=this.elements.internalView._private.items.reduce(((e,t)=>(e[t.id]=t,e)),{});for(let i of t){let t;if(t=i.accept({visitActionHandler:()=>!1,visitCommandHandler:()=>!1,visitCheckHandler:()=>!0,visitRadioHandler:()=>{throw new Error("RadioHandlers are not supported in a Set.")}})?i.getState()?i.onCheckHandler:i.onUncheckHandler:i,t&&t.getI18n()&&i.getId()&&t.getI18n().title){var s=t.getI18n().title+",";if(null!=this.elements.internalView.getDom().getAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers")){s=this.elements.internalView.getDom().getAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers")+s}this.elements.internalView.getDom().setAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers",s),e[i.getId()].button.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",t.getI18n().title)}}}this.elements.container.appendChild(this.elements.internalView.getDom()),this._registerForAvailabilityModes(),this._registerForIsEnabledChangeEvent(),this._registerForItemsLifeCycle()},_applyValue:function(e){if(this._parent(),e!==this.value){if(e)throw new Error("Replacing the value for a TweakerHandlerSet is not supported.");this._registerForAvailabilityModes(),this._registerForIsEnabledChangeEvent(),this._registerForItemsLifeCycle()}},_applyTouchMode:function(){this._parent(),this.elements.internalView&&(this.elements.internalView.touchFlag=i.getTouchMode())},_applyShowLabelFlag:function(){this._parent();let e=this.elements.internalView;e&&(e.showLabelFlag=this.showLabelFlag)},handleEvents:function(){let e=this.elements.internalView;if(!e)throw new Error("TweakerHandlerSet - view is null or undefined");e.addListener("change",(e=>{if(this.value){let t=e.detail.itemClicked,i=this.value.items.find((e=>e.getId()===t));if(!i)throw new Error("The clicked item is not part of the WAfrUIFlyout.");i.accept({visitActionHandler:e=>{e.registerFunctionalTestScripterStep(e.getI18n()?e.getI18n().title:""),e.execute({args:{handlerTrigger:this._handlerTrigger}})},visitCommandHandler:e=>{e.registerFunctionalTestScripterStep(e.getI18n()?e.getI18n().title:""),e.execute({args:{handlerTrigger:this._handlerTrigger}})},visitCheckHandler:e=>{let t=Boolean(e.getState());const i=t?e.onCheckHandler:e.onUncheckHandler;e.registerFunctionalTestScripterStep(i.getI18n()?i.getI18n().title:""),e.setState({state:!t,args:{handlerTrigger:this._handlerTrigger}})},visitRadioHandler:()=>{throw new Error("RadioHandlers are not supported in a Set.")}})}}))},_registerForAvailabilityModes:function(){const e=this.value.items,t=this.elements.internalView;if(e){const i=[];for(let n of e)n.isExecutable()&&t&&t.setItemConfiguration(n.getId(),{disableFlag:!1}),i.push({handler:n,token:n.onAvailabilityEvent((e=>{this.elements.internalView&&this.elements.internalView.setItemConfiguration(n.getId(),{disableFlag:!e.newValue})}))});this._subscriptionsAVAILABILITY=i}},_unregisterForAvailabilityModes:function(){const e=this._subscriptionsAVAILABILITY;if(e)for(let t of e)t&&t.handler&&t.handler.removeAvailabilityEventSubscription(t.token)},_registerForIsEnabledChangeEvent:function(){const e=this.value.items,t=this.elements.internalView;if(e){const i=[];for(let n of e)n.isExecutable()&&t&&t.setItemConfiguration(n.getId(),{disableFlag:!1}),i.push({handler:n,token:n.onIsEnabledChangeEvent((e=>{this.elements.internalView&&this.elements.internalView.setItemConfiguration(n.getId(),{disableFlag:!n.isExecutable()})}))});this._subscriptionsIS_ENABLED=i}},_unregisterForIsEnabledChangeEvent:function(){const e=this._subscriptionsIS_ENABLED;if(e)for(let t of e)t&&t.handler&&t.handler.removeIsEnabledChangeEventSubscription(t.token)},_registerForItemsLifeCycle:function(){if(this.elements.internalView&&!this._subscriptions){this._subscriptions=[];this.elements.internalView;const e=this.value.items;let t=this,i={visitActionHandler:e=>{let i=[],n=e.onLifeCycleEvent("BEGIN",(function(){g(t,e,!0)}));return i.push(c(e,n)),n=e.onLifeCycleEvent("END",(function(){g(t,e,!1)})),i.push(c(e,n)),i},visitCommandHandler:e=>{let i=[],n=e.onLifeCycleEvent("BEGIN",(function(){g(t,e,!0)}));return i.push(c(e,n)),n=e.onLifeCycleEvent("CANCEL",(()=>{g(t,e,!1)})),i.push(c(e,n)),n=e.onLifeCycleEvent("END",(i=>{void 0!==i&&!0!==i.repeated&&g(t,e,!1)})),i.push(c(e,n)),i},visitCheckHandler:e=>{let i=[],n=e.onStateEvent("CHECK",(function(){g(t,e,!0)}));return i.push(u(e,n)),n=e.onStateEvent("UNCHECK",(function(){g(t,e,!1)})),i.push(u(e,n)),i},visitRadioHandler:()=>{throw new Error("RadioHandlers are not supported in a Set.")}};for(let t of e)this._subscriptions.push(...t.accept(i))}},_unregisterForItemsLifeCycle:function(){let e=this._subscriptions;if(e)for(let t of e)t()},setExpandedContainerParent:function(e){if("svab"!==this.displayStyle)throw new Error('setExpandedContainerParent is only supported when this.displayStyle === "svab"');this.elements.internalView.setExpandedContainerParent(e)},onExpandState:function(e){if("svab"!==this.displayStyle)throw new Error('onExpandState is only supported when this.displayStyle === "svab"');this.elements.internalView.addListener("expandstate",e)},removeExpandStateCallback:function(e){if("svab"!==this.displayStyle)throw new Error('removeExpandStateCallback is only supported when this.displayStyle === "svab"');this.elements.internalView.removeListener("expandstate",e)},destroy:function(){this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForItemsLifeCycle(),this.elements.internalView&&(this.elements.internalView.destroy(),delete this.elements.internalView),this._parent()}});return d.stop(m),b})),define("DS/WAfrTweakers/TweakerHandlerRadio",["UWA/Core","DS/Tweakers/TweakerBase","DS/Utilities/TouchUtils","DS/WAfrTweakers/TweakerUtilities","DS/WAfrUtils/mod_Performances","DS/WAfrControls/WAfrUIButton","DS/WAfrControls/WAfrUIFlyout","DS/WAfrControls/WAfrUISmallViewportActionBarFlyout","DS/CoreUtilities/ErrorManagement"],(function(e,t,i,n,s,l,a,r,o){"use strict";var h=s.Performances,d="[DS/WAfrTweakers/TweakerHandlerRadio]",c=new h;function u(e){const t=e.value;let i={touchFlag:Boolean(e.touchMode),showLabelFlag:e.showLabelFlag},s=[];return t?(s=function(e){let t=[],i=e.value;if(i){const s=i.items;for(let l of s){let s=l.getState();const a=s?l.onCheckHandler:l.onUncheckHandler;t.push({id:l.getId(),label:n.getTitle(a),icon:n.getIcon(a),tooltip:n.createCloneableTooltipModel({elem:a,elem2:s?l.onUncheckHandler:l.onCheckHandler,appId:e._appId?e._appId:void 0}),checkFlag:s,disableFlag:!i.isExecutable(),showLabelFlag:e.showLabelFlag})}}return t}(e),0===s.length&&(s=[{id:"WAFR_TweakerHandlerRadioNoValue",label:"WAFR_TweakerHandlerRadioNoValueLabel",icon:{src:"WAFR_TweakerHandlerRadioNoValueIcon"}}]),i.presenterItemId=t.getSelectedItemId(),void 0===i.presenterItemId&&(i.presenterItemId=s[0].id)):(s=[{id:"WAFR_TweakerHandlerRadioNoValue",label:"WAFR_TweakerHandlerRadioNoValueLabel",icon:{src:"WAFR_TweakerHandlerRadioNoValueIcon"}}],i.presenterItemId="WAFR_TweakerHandlerRadioNoValue"),i.itemsConfiguration=s,i}function p(e){const t=e.value;if(t){let n=e.elements.internalView._private.items.reduce(((e,t)=>(e[t.id]=t,e)),{}),s=t.items;for(let t of s){const s=t.getState()?t.onCheckHandler:t.onUncheckHandler;if(s&&s.getI18n()&&t.getId()&&s.getI18n().title){var i=s.getI18n().title+",";if(null!=e.elements.internalView.getDom().getAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers"))i=e.elements.internalView.getDom().getAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers")+i;e.elements.internalView.getDom().setAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers",i),n[t.getId()].button.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",s.getI18n().title)}}const l=t.getSelectedItemId();let a=null,r=null;null!=l?(r=t.getSelectedItem(l),a=r.onCheckHandler):(r=t.items[0],a=r?.onUncheckHandler),a&&a.getI18n()&&a.getId()&&a.getI18n().title&&e.elements.internalView.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",a.getI18n().title)}}var g=c.start([d,"[Sync] TweakerBase.inherit"].join(" ")),m=t.inherit({name:"tweakerHandlerRadio",btnItems:void 0,publishedProperties:{displayStyle:{defaultValue:"flyout",type:"string"},showLabelFlag:{defaultValue:!1,type:"boolean"}},init:function(e){var t=c.start([d,"[Unknown] init"].join(" "));this.isMABAvailable=e.isMABAvailable,this._appId=e.appId,this._handlerTrigger=e.handlerTrigger,this._parent(e),c.stop(t)},buildView(){this._parent(),this.elements.container.addClassName("wafr-tweakers-radio"),this.elements.container.addClassName("wafr-tweakers")},_postBuildView(){if(this._parent(),"loop"===this.displayStyle){let e=this.value.getSelectedItem();e||(e=this.value.items[0]);let t=e.onCheckHandler;const i={label:n.getTitle(t),icon:n.getIcon(t),touchFlag:this.touchMode,tooltip:n.createCloneableTooltipModel({elem:t,appId:this._appId?this._appId:void 0}),checkFlag:Boolean(e.getState()),showLabelFlag:this.showLabelFlag};if(this.value&&!this.value.isExecutable()&&(i.disableFlag=!0),this.elements.internalView=new l(i),t&&t.getI18n()&&t.getId()&&t.getI18n().title){this.elements.internalView.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",t.getI18n().title)}}else{let e=u(this);"svab"===this.displayStyle?this.elements.internalView=new r(e):(this.elements.internalView=new a(e),p(this))}this.elements.container.appendChild(this.elements.internalView.getDom()),this._registerForAvailabilityModes(),this._registerForIsEnabledChangeEvent(),this._registerForRadioStateChange({}),this._registerForIconChanged(),this._registerForI18nChanged()},_updateView:function(e,t,i){let n=e.elements.internalView;"loop"===e.displayStyle?e._updateLoopItem(t,i):(i&&(n.presenterItemId=t.getId()),e._updateItem(t,i))},_applyValue:function(e){if(this._parent(),this.value&&(window.debugRadio||(window.debugRadio=[]),window.debugRadio.push(this)),e!==this.value&&(e&&(this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForRadioStateChange(),this._unregisterForIconChanged(),this._unregisterForI18nChanged()),this.value)){this._registerForAvailabilityModes(),this._registerForIsEnabledChangeEvent(),this._registerForRadioStateChange(),this._registerForIsEnabledChangeEvent(),this._registerForIconChanged(),this._registerForI18nChanged();let e=this.elements.internalView;if(e){let{presenterItemId:t,itemsConfiguration:i}=u(this);!function(e){let t=e.elements.internalView._private.items;for(let e of t)e.button.getDom().removeAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers");e.elements.internalView.getDom().removeAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers")}(this),e.setItems(t,i),p(this)}}},_applyTouchMode:function(){this._parent(),this.elements.internalView&&(this.elements.internalView.touchFlag=i.getTouchMode())},_applyShowLabelFlag:function(){this._parent();let e=this.elements.internalView;e&&(e.showLabelFlag=this.showLabelFlag)},handleEvents:function(){let e=this.elements.internalView;if(!e)throw new Error("TweakerHandlerRadio - view is null or undefined");"loop"===this.displayStyle?e.addListener("click",(()=>{let e=this.value,t=e.getSelectedItem().getId(),i=e.items,n=i.length,s=0,l=!1,a=null;for(;!l&&s<n;)a=i[s].getId(),a===t?l=!0:++s;if(l){let t=i[(s+1)%n];if(t&&t.isExecutable()){let i=t.getId();e.setRadioItemState({radioHdlrItemId:i,state:!0,args:{handlerTrigger:this._handlerTrigger}})}else console.error(new Error("Impossible to execute. The item may be unavailable."))}})):e.addListener("change",(e=>{if(this.value){const t=e.detail.itemClicked,i=this.value,n=i.isUnselectAuthorized();let s=i.getRadioItemState(t);if(s&&n||!s){const e=!s,n=i.getSelectedItem();let l=!1;n&&(l=i.getRadioItemState(n.getId()));const a=i.items.find((e=>e.getId()===t)),r=Boolean(a.getState())?a.onCheckHandler:a.onUncheckHandler;i.registerFunctionalTestScripterStep(r.getI18n().title),this._updateView(this,a,e),i.setRadioItemState({radioHdlrItemId:t,state:e,args:{handlerTrigger:"AfrActionBar"},cb:s=>{if(!o.hasSucceeded(s)){i.getRadioItemState(t)!==e&&(this._updateView(this,n,l),this._updateView(this,a,!e))}}})}}}))},_registerForRadioStateChange:function(e){var t=this,i=t.value;void 0!==i&&(void 0===t._subscriptionSELECT&&void 0===t._subscriptionUNSELECT&&(t._subscriptionSELECT=[],t._subscriptionUNSELECT=[],i.items.forEach((function(e){t._subscriptionSELECT.push(i.onItemStateEvent("SELECT",e.getId(),(function(){t._updateView(t,e,!0)}))),t._subscriptionUNSELECT.push(i.onItemStateEvent("UNSELECT",e.getId(),(function(){t._updateView(t,e,!1)})))}))))},_unregisterForRadioStateChange:function(){const e=this.value;if(e){let t=this._subscriptionSELECT;if(t&&t.length>0){for(let i of t)e.removeItemStateEventSubscription(i);delete this._subscriptionSELECT}if(t=this._subscriptionUNSELECT,t&&t.length>0){for(let i of t)e.removeItemStateEventSubscription(i);delete this._subscriptionUNSELECT}}},_registerForIconChanged:function(){var e=this,t=e.value;void 0!==t&&(void 0===e._subscriptionSELECT_ICON&&void 0===e._subscriptionUNSELECT_ICON&&(e._subscriptionSELECT_ICON=[],e._subscriptionUNSELECT_ICON=[],t.items.forEach((function(t){let i=t.onCheckHandler,n=t.onUncheckHandler;null!=i&&e._subscriptionSELECT_ICON.push(i.onIconChangedEvent(e._updateView.bind(e,t,!0))),null!=n&&e._subscriptionUNSELECT_ICON.push(n.onIconChangedEvent(e._updateView.bind(e,t,!0)))}))))},_unregisterForIconChanged:function(){const e=this.value;if(e){let t=this._subscriptionSELECT_ICON;if(t&&t.length>0){for(let i of t)e.removeIconChangedEventSubscription(i);delete this._subscriptionSELECT_ICON}if(t=this._subscriptionUNSELECT_ICON,t&&t.length>0){for(let i of t)e.removeIconChangedEventSubscription(i);delete this._subscriptionUNSELECT_ICON}}},_registerForI18nChanged:function(){var e=this,t=e.value;void 0!==t&&(void 0===e._subscriptionSELECT_TITLE&&void 0===e._subscriptionUNSELECT_TITLE&&(e._subscriptionSELECT_TITLE=[],e._subscriptionUNSELECT_TITLE=[],t.items.forEach((function(t){let i=t.onCheckHandler,n=t.onUncheckHandler;null!==i&&e._subscriptionSELECT_TITLE.push(i.onI18nChangedEvent(e._updateView.bind(e,t,!0))),null!==n&&e._subscriptionUNSELECT_TITLE.push(n.onI18nChangedEvent(e._updateView.bind(e,t,!0)))}))))},_unregisterForI18nChanged:function(){const e=this.value;if(void 0!==e){let t=this._subscriptionSELECT_TITLE;if(t&&t.length>0){for(let i of t)e.removeI18nChangedEventSubscription(i);delete this._subscriptionSELECT_TITLE}if(t=this._subscriptionUNSELECT_TITLE,t&&t.length>0){for(let i of t)e.removeI18nChangedEventSubscription(i);delete this._subscriptionUNSELECT_TITLE}}},_updateLoopItem(e,t){const i=this.elements.internalView;if(t){const t=e.onCheckHandler;i.checkFlag=!0,i.icon=n.getIcon(t),i.label=n.getTitle(t),i.tooltip=n.createCloneableTooltipModel({elem:t,appId:this._appId?this._appId:void 0});let s=i.getDom();s.removeAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers"),t.getI18n()&&t.getI18n().title&&s.setAttribute("data-WAfrPageObjecUseOnlyHandler",t.getI18n().title)}else i.checkFlag=!1},_updateIcon:function(e){let t=this.elements.internalView;t&&(t.icon=n.getIcon(e))},_updateTitle:function(e,t){let i=this.elements.internalView;i&&(i.label=n.getTitle(e),i.tooltip=n.createCloneableTooltipModel({elem:e,elem2:t,appId:this._appId?this._appId:void 0}),t&&t.getI18n()&&t.getI18n().title&&i.getDom().removeAttribute("data-WAfrPageObjecUseOnlyHandler"),e&&e.getI18n()&&e.getI18n().title&&i.getDom().setAttribute("data-WAfrPageObjecUseOnlyHandler",e.getI18n().title))},_updateItem(e,t){const i=t?e.onCheckHandler:e.onUncheckHandler;if(this.elements.internalView.setItemConfiguration(e.getId(),{label:n.getTitle(i),icon:n.getIcon(i),checkFlag:t,tooltip:n.createCloneableTooltipModel({elem:t?e.onCheckHandler:e.onUncheckHandler,elem2:t?e.onUncheckHandler:e.onCheckHandler,appId:this._appId?this._appId:void 0})}),"flyout"===this.displayStyle){let i=this.elements.internalView.getDom();i.removeAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers");let n=this.elements.internalView._private.items.reduce(((e,t)=>(e[t.id]=t,e)),{});const l=this.value.items;for(let a of l){let l=n[a.getId()].button.getDom();l.removeAttribute("data-WAfrPageObjecUseOnlyHandler");const r=(a===e?t:a.getState())?a.onCheckHandler:a.onUncheckHandler;if(r&&r.getI18n()&&r.getI18n().title){var s=r.getI18n().title+",";if(null!=i.getAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers")){s=i.getAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers")+s}i.setAttribute("data-WAfrPageObjectUseOnlyFlyoutHandlers",s),l.setAttribute("data-WAfrPageObjecUseOnlyHandler",r.getI18n().title)}a===e&&r&&r.getI18n()&&r.getI18n().title&&i.setAttribute("data-WAfrPageObjecUseOnlyHandler",r.getI18n().title)}}},_registerForAvailabilityModes:function(){const e=this.value;e&&(this._subscriptionAVAILABILITY||(!e.isExecutable()&&this.elements.internalView&&(this.elements.internalView.disableFlag=!0),this._subscriptionAVAILABILITY=e.onAvailabilityEvent((t=>{this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable())}))))},_unregisterForAvailabilityModes:function(){const e=this.value;e&&this._subscriptionAVAILABILITY&&(e.removeAvailabilityEventSubscription(this._subscriptionAVAILABILITY),delete this._subscriptionAVAILABILITY)},_registerForIsEnabledChangeEvent:function(){const e=this.value;e&&(this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable()),this._subscriptionIS_ENABLED=e.onIsEnabledChangeEvent((()=>{e&&this.elements.internalView&&(this.elements.internalView.disableFlag=!e.isExecutable())})))},_unregisterForIsEnabledChangeEvent:function(){const e=this.value;e&&this._subscriptionIS_ENABLED&&(e.removeIsEnabledChangeEventSubscription(this._subscriptionIS_ENABLED),delete this._subscriptionIS_ENABLED)},setExpandedContainerParent:function(e){if("svab"!==this.displayStyle)throw new Error('setExpandedContainerParent is only supported when this.displayStyle === "svab"');this.elements.internalView.setExpandedContainerParent(e)},onExpandState(e){if("svab"!==this.displayStyle)throw new Error('onExpandState is only supported when this.displayStyle === "svab"');this.elements.internalView.addListener("expandstate",e)},removeExpandStateCallback(e){if("svab"!==this.displayStyle)throw new Error('removeExpandStateCallback is only supported when this.displayStyle === "svab"');this.elements.internalView.removeListener("expandstate",e)},destroy:function(){this._unregisterForAvailabilityModes(),this._unregisterForIsEnabledChangeEvent(),this._unregisterForRadioStateChange(),this.elements.internalView&&(this.elements.internalView.destroy(),delete this.elements.internalView),this._parent()}});return c.stop(g),m})),define("DS/WAfrTweakers/TweakerHandlerGenerateMethods",["DS/WAfrTweakers/TweakerHandlerSimple","DS/WAfrTweakers/TweakerHandlerCommand","DS/WAfrTweakers/TweakerHandlerCheck","DS/WAfrTweakers/TweakerHandlerSet","DS/WAfrTweakers/TweakerHandlerRadio"],(function(e,t,i,n,s){"use strict";const l=Object.create(null);return l.checkHandler=function(e){return new i(e)},l.checkHandlerButton=function(e){return e.displayStyle="Toolbar",l.checkHandler(e)},l.actionHandler=function(t){return new e(t)},l.radioHandlerFlat=function(e){return new s(e)},l.radioHandler=function(e){return e.displayStyle="flyout",l.radioHandlerFlat(e)},l.commandHandler=function(e){return new t(e)},l.radioHandlerLoopButton=function(e){return e.displayStyle="loop",new s(e)},l.handlerSet=function(e){return new n(e)},l}));