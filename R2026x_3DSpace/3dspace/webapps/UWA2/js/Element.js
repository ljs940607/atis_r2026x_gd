define("UWA/Element",["UWA/Internal/Deprecate","UWA/Core","UWA/String","UWA/Array","UWA/Utils","UWA/Utils/Client","UWA/Dispatcher","UWA/Json","UWA/Event","vendors/webcomponents/MutationObserver"],(function(e,t,n,i,r,o,a,l,s,c){"use strict";var d=Boolean("object"==typeof MooTools&&MooTools.version),u=o.getVendorProperty,f=document.documentElement,h=function(t,n){return e.warn("new Element(...)","Use Element.create instead"),h.create(t,n)};h.create=function(e,n){var i=function(e,t){var n,i;return"iframe"===e&&t&&void 0!==t.name?((n=document.createElement("div")).innerHTML="<"+e+' name="'+t.name+'"/>',i=n.firstChild,delete t.name):"object"===e&&t&&void 0!==t.classid?(t.html?(i=document.createElement("div"),h.setHTML.call(i,t.html),i=h.getHTML.call(i)):i="",(n=document.createElement("div")).innerHTML="<"+e+' classid="'+t.classid+'">'+i+"</"+e+">",i=n.firstChild,delete t.html,delete t.classid):i=document.createElement(e),i}(e,n);return h.extend(i),t.is(n,"object")&&h.set.call(i,n),i},h.extend=function(){function n(t){var n="#document"===t.nodeName;for(var i in n&&e.warn("UWA.extendElement(document)"),h)h.hasOwnProperty(i)&&"create"!==i&&"extend"!==i&&(n&&i in t||(t[i]=h[i]))}var i={getProperty:window.Element.prototype.getProperty,getSize:function(){var e;return(e="body"===h.getTagName.call(this)?t.Utils.Client.getSize():h.getSize.call(this)).x=e.width,e.y=e.height,e},getCoordinates:function(e){var t=e?this.getPosition(e):this.getOffsets(),n=this.getSize(),i={left:t.x,top:t.y,width:n.x,height:n.y};return i.right=i.left+i.width,i.bottom=i.top+i.height,i}};return function(e){return e&&!e._isUwaExtended&&(d?function(e){delete e.fireEvent,n(e),t.extend(e,i)}(e):n(e),e._isUwaExtended=!0),e}}(),t.createElement=h.create,t.extendElement=h.extend;var m,p,g,v=(m=document.createElement("div"),p=/(^|,)/g,g=/(?:^|,)\s*[>+~]/,function(e,t,n,i){var r,o,a,l,s=i||g.test(t);return s?(n?(o=n.parentNode,l="uwa-private-get-element-selector-root-"+(1e8*Math.random()|0),n.setAttribute(l,"true"),r="["+l+"] ",i||o||(o=h.extend(m).grab(n))):(r="* ",o=n),t=t.replace(p,"$1"+r)):o=n,a=i?(h[e]||i[e]).call(i,t):(h[e]||o[e]).call(o,t),n&&s&&(n.removeAttribute(l),o===m&&o.removeChild(n)),a});function y(e){var t=e?e.indexOf(" "):-1;return t<0?{name:e}:{name:e.slice(0,t),selector:e.slice(t+1)}}var w,b,x,E,C,S,T,W,L,O,D,N,H,M,P,z,A,F,k=a.extend({Binding:a.Binding.extend({delegates:null,direct:!1,element:null,init:function(){this._parent.apply(this,arguments),this.delegates=[]},addDelegate:function(e){e?this.delegates.push(e):this.direct=!0},removeDelegate:function(e){e?this.delegates=this.delegates.filter((function(t){return t!==e})):this.direct=!1,this.direct||this.delegates.length||this.detach()},execute:function(e,t){var n,i,r,o;if(this.active){if(this.delegates.length)for(n=this.delegates.join(","),i=e[0],r=s.getElement(i);r&&r!==this.element&&!1!==o;)h.match.call(r,n,this.element)&&(i._uwaTarget=r,o=this._parent(e,t),i._uwaTarget=null),r=r.parentNode;this.direct&&!1!==o&&(o=this._parent(e,t))}return o},destroy:function(){this._parent(),delete this.element}}),init:function(e){this._parent(),this.element=e},addDelegation:function(e,t,n,i){var r=this.add(e,n,i);return r.addDelegate(t),r.element=this.element,r},removeDelegation:function(e,t){if(e){var n=this.bindings[this.indexOfListener(e)];n&&n.removeDelegate(t)}else i.invoke(this.bindings.slice(),"removeDelegate",t)},dispose:function(){this._parent(),delete this.element}});function j(e){var t="string"==typeof e.className?e.className:e.getAttribute("class");return t||""}function B(e,t){"string"==typeof e.className?e.className=t:e.setAttribute("class",t)}function U(e,t){"function"==typeof t?t=t():void 0===t&&(t=u(f,"on{}"+e,!0))&&(t=t.slice(2)),e!==t&&(h.Events[e]=function(n,i){if(!t)throw new Error("The event "+e+" is not supported on this platform");h.addEvent.call(i,t,n.handleEvent,!0),n.events[t]=n.handleEvent})}function _(){window.document&&(window.document.body&&t.extendElement(window.document.body),window.document.documentElement&&t.extendElement(window.document.documentElement))}return Object.assign(h,{set:function(e,i){var r,o,a=this;if(F||(F={html:h.setHTML,events:h.addEvents,id:function(e){this.id=e},class:function(e){this.className=e},value:function(e){this.value=e}},["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"].forEach((function(e){F[e.toLowerCase()]=function(t){this[e]=Boolean(t)}}))),t.is(e,"object"))for(r in e)e.hasOwnProperty(r)&&h.set.call(a,r,e[r]);else o=h["set"+n.capitalize(e)],t.is(o,"function")?o.apply(a,Array.prototype.slice.call(arguments,1)):F.hasOwnProperty(e)&&!1!==F[e].call(a,i)||a.setAttribute(e,i);return a},setAttributes:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.setAttribute(t,e[t]);return this},getTagName:function(){var e=this.tagName||this.nodeName;return e?e.toLowerCase():""},setText:function(e){return h.empty.call(this),h.appendText.call(this,e)},appendText:function(e){var t=this,n=h.getDocument.call(t);return t.appendChild(n.createTextNode(e)),t},getText:function(){var e=this;return"string"==typeof e.textContent?e.textContent:"string"==typeof e.innerText?e.innerText:""},setContent:function(){return h.empty.call(this),h.addContent.apply(this,arguments)},addContent:function(){function e(n,i,r){var o,a,l,s;for(t.is(n,"nodelist")&&(n=[].slice.call(n)),o=0,a=n.length;o<a;o++)if(s=n[o])if(s.nodeType)r.appendChild(s);else if("string"==typeof s||"number"==typeof s)if(/<|&#?\w+;/.test(s))for(l=i.createElement("div"),h.setHTML.call(l,s);l.firstChild;)r.appendChild(l.firstChild);else r.appendChild(i.createTextNode(s));else"function"!=typeof s.inject||Array.isArray(s)?"number"==typeof s.length?e(s,i,r):"object"==typeof s?(l=s.tag||"div",delete s.tag,r.appendChild(h.create(l,s)),s.tag=l):r.appendChild(i.createTextNode(s)):s.inject(r)}return function(){var t=this,n=h.getDocument.call(t),i=n.createDocumentFragment();return e(arguments,n,i),t.appendChild(i),t}}(),setHTML:function(e){var i,r=this;if("string"!=typeof e)h.setContent.call(r,e);else try{i=n.escapeHTMLEntities(e).replace('<?xml version="1.0" encoding="UTF-8"?>',"").replace(/&(?!#?[a-z0-9]+;)/gi,"&#38;"),r.innerHTML=i}catch(i){t.log("UWA.Element.setHTML error cause: "+i+' with HTML value "'+e+'"');try{r.innerHTML=n.stripTags(String(e))}catch(t){h.setText.call(r,e)}}return r},getHTML:function(){var e=this.innerHTML;return o.Engine.ie&&(e=e.replace(/< *(\/ *)?(\w+)/g,(function(e){return e.toLowerCase()}))),e},inject:function(e,t){var n,i=this,r=h.getDocument.call(i);return"bottom"===(t=t||"bottom")?e.appendChild(i):"top"===t?e.insertBefore(i,e.firstChild):((n=e.parentNode)||11===e.nodeType||(n=r.createDocumentFragment()).appendChild(e),n&&("after"===t?n.lastChild===e?n.appendChild(i):n.insertBefore(i,e.nextSibling):"before"===t&&n.insertBefore(i,e))),i},grab:function(e,t){return h.inject.call(e,this,t),this},isInjected:f.contains?function(e){var t=this;return(e=e||t.ownerDocument.documentElement)!==t&&(!e.contains||e.contains(t))}:f.compareDocumentPosition?function(e){return e=e||this.ownerDocument.documentElement,Boolean(16&e.compareDocumentPosition(this))}:function(e){var t=this;e=e||t.ownerDocument.documentElement;do{t=t.parentNode}while(t&&t.parentNode);return t===e},empty:function(e){for(var t,n=this;n.firstChild;)t=n.firstChild,e?h.destroy.call(t):n.removeChild(t);return n},remove:function(){var e=this,t=h.getParent.call(e);return t&&t.removeChild(e),e},destroy:function(){var e,t,n,i=this,r=h.remove,o=h.destroy,a=h.getChildren.call(i);for(t=0,n=a.length;t<n;t+=1)a[t].destroy&&o.call(a[t]);h.removeEvents.call(i),i!==(e=h.getDocument.call(i))&&i!==e.documentElement&&i!==e.body&&i!==h.getWindow.call(i)&&r.call(i)},getParent:function(e){var t=this.parentNode;if(e)for(;t&&1===t.nodeType&&!h.match.call(t,e);)t=t.parentNode;return t&&1!==t.nodeType&&(t=null),t?h.extend(t):null},getParents:function(e){for(var t=[],n=this;;){var i=n.getParent(e);if(!i)return t;t.push(i),n=i}},getClosest:function(e){var t=this;return h.match.call(t,e)?t:h.getParent.call(t,e)},getChildren:function(){return Array.prototype.filter.call(this.childNodes,(function(e){return 1===e.nodeType})).map(h.extend)},getDocument:function(){var e=this;return 9===e.nodeType?e:e.ownerDocument||e.document},getWindow:function(){var e=h.getDocument.call(this);return e&&(e.defaultView||e.parentWindow)},getOffsetParent:function(){var e;function t(){var t=document.createElement("div"),n=document.createElement("div");t.style.height="0",t.appendChild(n),e=n.offsetParent===t}function n(e){return/^(?:body|html)$/i.test(e.tagName)}function i(e){return e&&("static"!==h.getStyle.call(e,"position")||n(e))}function r(e){return i(e)||/^(?:table|td|th)$/i.test(e.tagName)}return function(){var o,a=this,l=h.getDocument.call(a),s=a.offsetParent||l&&l.body,c=h.getStyle.call(a,"position");if(!n(a)&&"fixed"!==c)if(void 0===e&&t(),e){for(o="static"===c?r:i;void 0!==(a=a.parentNode);)if(o(a)){s=a;break}}else try{s=a.offsetParent}catch(e){}return s&&(s=h.extend(s)),s}}(),getElements:function(e){return Array.prototype.map.call(v("querySelectorAll",e,this),h.extend,t)},getElement:function(e){return h.extend(v("querySelector",e,this))},match:function(e,t){return v("matchesSelector",e,t,this)},hasClassName:function(e){var t=j(this);return Boolean(t&&n.contains(t,e," "))},addClassName:function(e){return h.hasClassName.call(this,e)||B(this,(j(this).trim()+" "+e).trim()),this},removeClassName:function(e){return B(this,j(this).replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1").trim()),this},toggleClassName:function(e,n){var i=t.is(n)?n:!h.hasClassName.call(this,e);return t.Element[i?"addClassName":"removeClassName"].call(this,e)},setStyle:function(e,t){var n={};return n[e]=t,h.setStyles.call(this,n)},setStyles:function(){var e={},i={none:"",firefox:"-moz-",opera:"-o-",trident:"-ms-",webkit:"-webkit-"},r={columnCount:1,flex:1,flexGrow:1,flexShrink:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,strokeOpacity:1};function a(e){var t=[];return e.replace(/['"]/g,"").split(",").forEach((function(e){t.push('"'+e.trim()+'"')})),t.join(", ")}function l(n){var r=function(t,n){var r,a,l,s,c=t+n;if(e[c])r=e[c];else{for(a in r=!1,s=document.createElement("div").style,i)if(l=i[a]+n,s[t]=l,s[t]===l&&""!==l&&!o.Engine.ie){r=l;break}e[c]=r}return r}("cursor",n);return n=!1!==r?r:o.Engine.opera?"move":"url("+t.hosts.uwa+t.paths.css+"/base/cursor/"+("grabbing"===n?"closedhand":"openhand")+".cur)"+(o.Engine.ie?"":" 4 4")+", move"}return function(e){var i,o,s,c,d=this,u=d.style,f=[];for(c in e)e.hasOwnProperty(c)&&(s=e[c],"opacity"===(c=n.camelCase(c))?h.setOpacity.call(d,s):(""!==s&&null!==s&&isFinite(s)&&void 0===r[c]?s+="px":"none"===s&&"userSelect"===c&&void 0!==u.MozUserSelect?s="-moz-none":"fontFamily"===c?s=a(s):"cursor"===c&&("grabbing"!==s&&"grab"!==s||(s=l(s))),f.push({name:h.getStyleName.call(d,c),value:s})));for(i=0,o=f.length;i<o;i++){c=f[i].name,s=f[i].value;try{u[c]=s||0===s?s:""}catch(e){t.log('Unable to set style "'+c+'" with value "'+s+'"')}}return d}}(),getStyle:function(e,t){return h.getStyles.call(this,[e],t)[e]},getStyles:(z=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,A=/^margin/,document.defaultView&&document.defaultView.getComputedStyle?H=function(e,t,n){var i,r,o,a,l,s,c,d=e.ownerDocument,u=d.defaultView,f=h.getWindow.call(e).getComputedStyle(e,null),m=e.style;if(u&&f)for(i=0,r=t.length;i<r;i++)a=t[i],""!==(l=f[s=h.getStyleName.call(e,a)])&&"auto"!==l||h.isInjected.call(e,d.documentElement)||(l=m[s]),void 0===M&&(c=void 0,(c=document.createElement("div")).style.margin="1%",document.body.appendChild(c),M="1%"===(window.getComputedStyle(c,null)||{marginTop:0}).marginTop,document.body.removeChild(c)),M&&A.test(s)&&z.test(l)&&(o=m.width,m.width=l,l=f.width,m.width=o),n[a]=void 0!==l?l:m[a]||"";return n}:document.documentElement.currentStyle&&(H=function(e,t,n){var i,r,o,a,l,s,c,d=e.currentStyle,u=e.runtimeStyle,f=e.style;for(i=0,r=t.length;i<r;i++)a=t[i],c=h.getStyleName.call(e,a),l=d&&d[c],z.test(l)&&(o=f.left,(s=u&&u.left)&&(u.left=d.left),f.left="fontSize"===c?"1em":l||0,l=f.pixelLeft+"px",f.left=o,s&&(u.left=s)),n[a]=void 0!==l?l:e.style[a]||"";return n}),function(e,t){var n={},i=this;return-1===e.indexOf("opacity")||P||(P=!0,n.opacity=h.getOpacity.call(i,t),e.splice(e.indexOf("opacity"),1),P=!1),n=!1===t?function(e,t,n){var i,r,o,a=e.style;for(i=0,r=t.length;i<r;i++)n[o=t[i]]=a[o]||"";return n}(i,e,n):H(i,e,n)}),getStyleName:(O=o.Engine,D=O.name,N=["box-sizing","box-shadow","transform","transform-style","transition","transition-timing-function","transition-duration","transition-delay","transition-property","border-image","border-radius","text-stroke","font-smoothing","text-fillcolor","text-shadow","perspective","appearance","touch-callout","overflow-scrolling","mask","user-select"],r.memoize((function(e,t){var i,r,o=[],a={firefox:"-moz",opera:"-o",ie:t?"-ms":"ms",chrome:"-webkit",safari:"-webkit"};if("string"==typeof e){if("float"===(e=n.unCamelCase(e)))i=O.ie?"style-float":"css-float";else if(-1!==N.indexOf(e)){if(a[D])i=a[D]+"-"+e,o.push(i);else for(r in a)a.hasOwnProperty(r)&&(i=a[r]+"-"+e,-1===o.indexOf(i)&&o.push(i));i=0===(o=o.filter((function(e){return void 0!==f.style[n.camelCase(e)]}))).length?e:o.shift()}else i=e;t||(i=n.camelCase(i))}else i=e;return i}),(function(e){return e.join(".")}))),getOpacity:(S=function(){},T=o.Features.opacityCSS,W=o.Features.filterCSS,L=/alpha\(opacity=([\d.]+)\)/i,W&&!T?S=function(e,t){var n,i=1;return(n=h.getStyle.call(e,"filter",t).replace(/ /g,"").match(L))&&(i=n[1]/100),i}:T&&(S=function(e,t){var n=1,i=e.style,r=h.getStyle;return void 0!==i.opacity?n=r.call(e,"opacity",t):void 0!==i.MozOpacity&&(n=r.call(e,"MozOpacity",t)),parseFloat(Math.round(100*n)/100,10)}),function(e){return S(this,e)}),setOpacity:function(){var e=function(){},t=o.Features.opacityCSS;return o.Features.filterCSS&&!t?e=function(e,t,n){var i;t.zoom=1,n=1===n?"":"alpha(opacity="+100*n+")",t.MsFilter=n,t.filter=n,i=t.display,t.display="none",e.offsetHeight,t.display=i}:t&&(e=function(e,t,n){void 0!==t.opacity?t.opacity=n:void 0!==t.MozOpacity&&(t.MozOpacity=n)}),function(t){var n=this,i=n.style;return null!==t&&(t=(t=parseFloat(t,10))>1?1:t<1e-5?0:t),e(n,i,t),n}}(),hide:function(){return h.setStyle.call(this,"display","none")},show:function(){var e,t,n;function i(e){return h.getStyle.call(e,"display")}return n=r.memoize((function(n){var r,o=document,a=o.body,l=o.createElement(n);return a.appendChild(l),r=i(l),a.removeChild(l),"none"!==r&&""!==r||(e||((e=o.createElement("iframe")).frameBorder=e.width=e.height=0),a.appendChild(e),t&&e.createElement||((t=(e.contentWindow||e.contentDocument).document).write(("CSS1Compat"===o.compatMode?"<!doctype html>":"")+"<html><body>"),t.close()),l=t.createElement(n),t.body.appendChild(l),r=i(l),a.removeChild(e)),r})),function(){var e,t=this;return t.style&&("none"===(e=t.style.display)&&(e=t.style.display=""),""===e&&(t.style.display="none"===i(t)&&n(t.nodeName)||"")),t}}(),toggle:function(e){var n=t.is(e)?e:h.isHidden.call(this);return t.Element[n?"show":"hide"].call(this)},isHidden:function(){return"none"===h.getStyle.call(this,"display")},setTranslate:(C=o.Features.transitionsCSS?o.Features.matrixCSS?function(e,t){return{transform:"translate3d("+t+"px,"+e+"px, 0)"}}:function(e,t){return{transform:"translate("+t+"px,"+e+"px)"}}:function(e,t){return{top:e,left:t}},function(e,t){var n;return n=C(e=e||0,t=t||0),h.setStyles.call(this,n),this}),getComputedSize:(E={borderWidth:["borderLeftWidth","borderRightWidth"],borderHeight:["borderBottomWidth","borderTopWidth"],paddingWidth:["paddingLeft","paddingRight"],paddingHeight:["paddingTop","paddingBottom"],marginWidth:["marginLeft","marginRight"],marginHeight:["marginTop","marginBottom"],innerWidth:["borderWidth","paddingWidth"],innerHeight:["borderHeight","paddingHeight"],outerWidth:["marginWidth"],outerHeight:["marginHeight"]},function(){var e,t,i,o,a=r.toArray(arguments),l=0;for(e=0;e<a.length;e++)i=n.camelCase(a[e]),E[i]?(a.splice(e,1),a=a.concat(E[i]),e--):a.splice(e,1,i);for(o=h.getStyles.call(this,a),e=0,t=a.length;e<t;e++)i=a[e],l+=parseFloat(o[i],10)||0;return l}),getScrolls:function(){var e,n,i,r,a,l=this;return t.is(l,["window","document"])?n=o.getScrolls():(i=l.style,n={width:l.scrollWidth,height:l.scrollHeight,top:l.scrollTop,left:l.scrollLeft},void 0===x&&(r=document.createElement("div"),(a=document.createElement("div")).style.visibility="hidden",a.style.overflow="hidden",a.style.width="1px",r.style.overflow="visible",r.innerHTML="x",a.appendChild(r),f.appendChild(a),x=1===r.scrollWidth,f.removeChild(a)),x&&-1!==["","visible"].indexOf(h.getStyle.call(l,"overflow"))&&(e=i.overflow,i.overflow="hidden",n.width=l.scrollWidth,i.overflow=e)),n},getOffsets:function(){var e,t,n,i,r,a=/^t(?:able|d|h)$/i;function l(e){var t=e.ownerDocument.defaultView;return t?t.getComputedStyle(e,null):e.currentStyle}function s(e,t){return h.getStyle.call(e,t)}function c(){var o,a,l,c=document.body,d=parseInt(s(c,"marginTop"),10),u=document.createElement("div");u.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",c.insertBefore(u,c.firstChild),a=(o=u.firstChild).firstChild,l=o.nextSibling.firstChild.firstChild,e=5!==a.offsetTop,t=5===l.offsetTop,a.style.position="fixed",a.style.top="20px",n=20===a.offsetTop||15===a.offsetTop,a.style.position=a.style.top="",o.style.overflow="hidden",o.style.position="relative",i=-5===a.offsetTop,r=c.offsetTop!==d,c.removeChild(u)}function d(t){var n=t.offsetTop,i=t.offsetLeft;return void 0===e&&c(),r&&(n+=parseFloat(s(t,"marginTop"))||0,i+=parseFloat(s(t,"marginLeft"))||0),{x:i,y:n}}return void 0!==document.documentElement.getBoundingClientRect?function(){if(this===this.ownerDocument.body)return d(this);var e,t,n,i,r,a,l,s=this,c=h.getWindow.call(s),u=c.webkitConvertPointFromNodeToPage;if(s.getBoundingClientRect){i=h.getDocument.call(s).body,r=f.clientTop||i.clientTop||0,a=f.clientLeft||i.clientLeft||0,l=o.getScrolls();try{n=s.getBoundingClientRect()}catch(e){}n&&h.isInjected.call(s,f)?(e=n.left+l.x-r,t=n.top+l.y-a):(e=n?n.left:0,t=n?n.top:0)}else u&&(e=(n=u(s,new c.WebKitPoint(0,0))).x,t=n.y);return{x:e,y:t}}:function(){if(this===this.ownerDocument.body)return d(this);var r,o=this,s=o.offsetParent,u=h.getDocument.call(o).body,m=l(o),p=o.offsetTop,g=o.offsetLeft;for(void 0===e&&c(),o=o.parentNode;o&&o!==u&&o!==f&&11!==o.nodeType&&(!n||"fixed"!==m.position);)r=l(o),g-=o.scrollLeft,p-=o.scrollTop,o===s&&(g+=o.offsetLeft,p+=o.offsetTop,!e||t&&a.test(o.nodeName)||(g+=parseFloat(r.borderLeftWidth)||0,p+=parseFloat(r.borderTopWidth)||0),s=o.offsetParent),i&&"visible"!==r.overflow&&(g+=parseFloat(r.borderLeftWidth)||0,p+=parseFloat(r.borderTopWidth)||0),m=r,o=o.parentNode;return"relative"!==m.position&&"static"!==m.position||(g+=u.offsetLeft,p+=u.offsetTop),n&&"fixed"===m.position&&(g+=Math.max(f.scrollLeft,u.scrollLeft),p+=Math.max(f.scrollTop,u.scrollTop)),{x:g,y:p}}}(),getPosition:function(e,n){var i,r,o,a,l,s,c,d=this,u=h.getOffsetParent,f=h.getOffsets,m=h.getComputedSize,p=h.getSize,g=h.isInjected,v={x:0,y:0};if(!(e=e||u.call(d))||!g.call(d))return v;if(c=f.call(d),e!==h.getDocument.call(d)&&(i=/^(?:body|html)$/i.test(e.nodeName)?v:f.call(e),c.x-=parseFloat(m.call(d,"marginLeft"))||0,c.y-=parseFloat(m.call(d,"marginTop"))||0,i.x+=parseFloat(m.call(e,"borderLeftWidth"))||0,i.y+=parseFloat(m.call(e,"borderTopWidth"))||0,c.x-=i.x,c.y-=i.y,s=t.typeOf(n)))for("string"===s&&(n={x:n,y:n}),r=p.call(d),o=0;o<2;o+=1)l=o?"width":"height","center"===n[a=o?"x":"y"]?c[a]+=r[l]/2:(1===o&&"right"===n[a]||0===o&&"bottom"===n[a])&&(c[a]+=r[l]);return c},setPosition:(b={full:function(e,t){var n=h.getSize.call(this),i=e.x+e.width-t.x-n.width,r=e.y+e.height-t.y-n.height;i<0&&(t.x=Math.max(0,t.x+i)),r<0&&(t.y+=r)},"resize-max":function(e,t){h.setStyles.call(this,{maxWidth:e.x+e.width-t.x,maxHeight:e.y+e.height-t.y})},none:function(){}},function(e,n){n=n||{};var i,a,l=this,s=h.getDocument.call(l).body,c=h.getOffsetParent.call(l)||s,d=h.getOffsets.call(c),u=h.getOffsets.call(n.relative||c);return i=function(e,n,i,r,a){var l,s;switch(t.typeOf(r)){case!1:break;case"object":s={x:r.x+i.x,y:r.y+i.y,width:r.width,height:r.height};break;case"element":l=r;break;default:for(l=h.getOffsetParent.call(e);l&&l!==n&&1===l.nodeType&&"visible"===h.getStyle.call(l,"overflow");)l=l.parentNode;l&&1===l.nodeType||(l=n)}return l&&(l===n?s=t.merge(o.getScrolls(),o.getSize()):((s=h.getOffsets.call(l)).width=l.offsetWidth,s.height=l.offsetHeight)),s&&(s.x+=a,s.y+=a,s.width-=2*a,s.height-=2*a),s}(l,s,u,n.boundary,n.boundaryMargin||0),"number"==typeof e.length&&(a=h.getSize.call(l),r.splat(e).forEach((function(e){var t=u.x+e.x,n=u.y+e.y;e.score=(Math.min(i.x+i.width,t+a.width)-Math.max(i.x,t))*(Math.min(i.y+i.height,n+a.height)-Math.max(i.y,n))})),e.sort((function(e,t){return t.score-e.score})),e=e[0]),e={x:e.x+u.x,y:e.y+u.y},i&&(n.fit?"string"==typeof n.fit&&t.owns(b,n.fit)&&(n.fit=b[n.fit]):n.fit=b.full,e.x=Math.max(i.x,Math.min(e.x,i.x+i.width)),e.y=Math.max(i.y,Math.min(e.y,i.y+i.height)),n.fit.call(this,i,e)),h.setStyles.call(l,{top:e.y-d.y,left:e.x-d.x}),l}),getSize:function(){var e,n,i,r,a,l,s,c=this;return t.is(c,["window","document"])?s=o.getSize():(l=h.getStyle.bind(c),i=c.style,r=c.offsetWidth,a=c.offsetHeight,"none"===l("display")&&0===r&&0===a&&(n=i.display,e=i.visibility,i.visibility="visible",i.display="block",r=c.offsetWidth,a=c.offsetHeight,i.display=n,i.visibility=e),s={width:r,height:a}),s},getDimensions:function(){var e,t=h.getSize.call(this),n=t.width,i=t.height,r=h.getStyles.call(this,["maxWidth","maxHeight","minWidth","minHeight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight","borderBottomWidth","borderTopWidth","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);for(e in r)r[e]=parseFloat(r[e],10)||0;return{width:n,height:i,maxWidth:r.maxWidth||-1,maxHeight:r.maxHeight||-1,minWidth:r.minWidth||-1,minHeight:r.minHeight||-1,innerWidth:n-(r.borderLeftWidth+r.borderRightWidth+r.paddingLeft+r.paddingRight),innerHeight:i-(r.borderBottomWidth+r.borderTopWidth+r.paddingTop+r.paddingBottom),outerWidth:n+r.marginLeft+r.marginRight,outerHeight:i+r.marginTop+r.marginBottom}},isInViewport:function(e,t,n,i){var r,a,l,s,c,d,u=this,f=h.getOffsets,m=f.call(e),p=f.call(u),g=e.offsetHeight,v=e.offsetWidth,y=u.offsetWidth,w=u.offsetHeight,b=p.y,x=p.x,E=b+u.offsetHeight,C=x+u.offsetWidth;return t?(s=x<m.x+v&&x+y>m.x,c=b<m.y+g&&b+w>m.y):(s=x>=m.x&&x+y<=m.x+v,c=b>=m.y&&b+w<=m.y+g),d="x"===i?s:("y"===i||s)&&c,n&&(r=o.getScrolls(),a=o.getSize(),l={top:r.y,bottom:r.y+a.height,right:r.x+a.width,left:r.x},d=d&&b<l.bottom&&x<l.right&&E>l.top&&C>l.left),d},setData:function(e,i){var r,o=this,a=t.typeOf(i),s=t.typeOf(e);if("string"===s&&a)i=l.encode(i),o.dataset?o.dataset[n.camelCase(e)]=i:(e="data-"+n.unCamelCase(e),o.setAttribute?o.setAttribute(e,i):o[e]=i);else if("object"===s&&!a)for(r in e)e.hasOwnProperty(r)&&h.setData.call(o,r,e[r]);return o},getData:function(e){var i,r=this;return t.is(e,"string")&&(r.dataset?i=r.dataset[n.camelCase(e)]:(e="data-"+n.unCamelCase(e),i=r.getAttribute?r.getAttribute(e,i):r[e]=i)),t.is(i)?l.decode(i):void 0},removeData:function(e){var i=this;return t.is(e,"string")&&(i.dataset?i.dataset.hasOwnProperty(n.camelCase(e))&&delete i.dataset[n.camelCase(e)]:(e="data-"+n.unCamelCase(e),i.removeAttribute?i.removeAttribute(e):i[e]=null)),i},handleExternalLinks:function(e){return h.addEvent.call(this,"click",(function(t){if(!s.isDefaultPrevented(t)&&!s.whichKey(t)){for(var n,i=s.getElement(t),r=String(window.location).split("#")[0];i&&!n;)n="a"===h.getTagName.call(i)&&i.getAttribute("href")||h.getData.call(i,"href"),i=h.getParent.call(i);n&&0!==n.indexOf(r+"#")&&0!==n.indexOf("#")&&0!==n.indexOf("javascript")&&(e(n),s.stop(t))}})),this},addEvent:function(e,n,i,r,o){e=y(e);var a=this,l=n&&"function"==typeof n.handleEvent?n:a,s=function(e,n,i,r){t.is(e,"window")&&"resize"===n&&(i=!0);var o,a,l=e._events||{},s=!i&&h.Events[n],c=s?n+"Custom":n,u=l[c];return u||(a=new k(e),l[c]=u={dispatcher:a,handleEvent:function(e){if(d){var n=window.DOMEvent||window.Event;e=new n(e),["offsetY","offsetX","relatedTarget","button","metaKey","altKey","shiftKey","ctrlKey","clientY","clientX","screenY","screenX","which","pageY","pageX","layerY","layerX","charCode","keyCode","timeStamp","cancelable","bubbles","target","type","detail","wheelDelta","touches","changedTouches"].forEach((function(n){t.owns(e,n)||(e[n]=e.event[n])}))}void 0===e.timeStamp&&(e.timeStamp=Date.now()),a.dispatch([e])},events:{},bindings:[],timers:[]},o=u.handleEvent,e._events=l,s?s(u,e,{target:e,type:n}):e.addEventListener?e.addEventListener(n,o,r||!1):(e.attachEvent("on"+n,o),window.attachEvent("onunload",(function(){e.detachEvent("on"+n,o)})))),u}(this,e.name,i,o);return s.dispatcher.addDelegation(n,e.selector,l,r),"load"===e.name&&a.tagName&&"img"===a.tagName.toLowerCase()&&a.complete&&a.width>0&&s.dispatcher.dispatch(),a},addEvents:function(e,t,n,i){var r;for(r in e)e.hasOwnProperty(r)&&h.addEvent.call(this,r,e[r],t,n,i);return this},triggerEvent:function(e){var t=this,n=(t._events||{})[e],i={target:t,timeStamp:Date.now(),type:e};return n&&n.handleEvent(i),t},removeEvent:function(e,n,i){if(!t.is(e))return h.removeEvents.call(this);e=y(e);var r,o,a,l,s,c=this,d=c._events&&c._events[e.name+"Custom"],u=d?e.name+"Custom":e.name,f=c._events&&c._events[u];if(f&&(l=f.dispatcher,n||e.selector?l.removeDelegation(n,e.selector):l.removeAll(),0===l.getNumListeners())){for(a in delete c._events[u],s=f.events)s.hasOwnProperty(a)&&h.removeEvent.call(c,a,s[a]);if(f.timers)for(r=0,o=f.timers.length;r<o;r++)clearTimeout(f.timers[r]);if(f.bindings)for(r=0,o=f.bindings.length;r<o;r++)f.bindings[r].dispose();d||(c.removeEventListener?c.removeEventListener(u,f.handleEvent,i):c.detachEvent("on"+u,f.handleEvent)),l.dispose()}return c},removeEvents:function(e,t){var n,i=this,r=void 0!==e,o=r?e:i._events;for(n in o)o.hasOwnProperty(n)&&h.removeEvent.call(i,n,r?e[n]:null,t);return i},fillParent:function(e,t){e=e||"height";var i=this,r=t||h.getParent.call(i),o=h.setStyle.bind(i),a=n.ucfirst(e);return r&&(o("height","10000px"),o("height",r["offset"+a]-r["scroll"+a]+1e4+"px")),i},setSelectable:function(){function e(e){s.preventDefault(e)}return function(t){var n=this;return n.setAttribute("unselectable",t?"off":"on"),h.setStyles.call(n,{userSelect:t?"":"none",touchCallout:t?"":"none"}),h[t?"removeEvent":"addEvent"].call(n,"selectstart",e),n}}(),requestFullscreen:(w=u(f,"requestFullscreen")||u(f,"requestFullScreen"),w?function(){return w.call(this)}:function(){throw new Error("Element#requestFullscreen is not available in this platform")})}),h.Events={mouseleave:function(e,t,n){var i=e.handleEvent;t.addEventListener?(e.handleEvent=function(e){var t=e.relatedTarget;this===t||function(e,t){var n=!1;if(e!==t){for(;t&&t!==e;)t=t.parentNode;n=e===t}return n}(this,t)||i.call(this,n)},h.addEvent.call(t,"mouseout",e.handleEvent),e.events.mouseout=e.handleEvent):(h.addEvent.call(t,"mouseleave",i,!0),e.events.onmouseleave=i)},mouseenter:function(e,t,n){var i=e.handleEvent;t.addEventListener?(e.handleEvent=function(e){var t=e.relatedTarget;this===t||function(e,t){var n=!1;if(e!==t){for(;t&&t!==e;)t=t.parentNode;n=e===t}return n}(this,t)||i.call(this,n)},h.addEvent.call(t,"mouseover",e.handleEvent),e.events.mouseover=e.handleEvent):(h.addEvent.call(t,"mouseenter",i,!0),e.events.mouseenter=i)},mousewheel:function(e,t){var n=e.handleEvent,i=o.Engine.firefox?"DOMMouseScroll":"mousewheel";e.handleEvent=function(e){(e=e||window.event).wheel=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3,n(e)},h.addEvent.call(t,i,e.handleEvent,!0),e.events[i]=e.handleEvent},update:function(e,t,n){new c((function(t){var i=t[0];e.handleEvent(Object.assign(n,{record:i}))})).observe(t,{childList:!0,subtree:!0})},resize:function(){var e,n=new a;function i(e){var n;return(n=t.is(e,["window","document"])?[(n=o.getSize()).width,n.height,0,0]:[e.scrollWidth,e.scrollHeight,e.offsetWidth,e.offsetHeight]).join("x")}function r(){clearTimeout(e),n.dispatch(),n.getNumListeners()>0&&(e=setTimeout(r,200))}return function(e,o,a){var l,s=i(o),c="orientationchange";e.bindings.length>0||(e.timers=[l],window===o&&t.is(window[c])&&(h.addEvent.call(o,c,r),e.events[c]=r),e.bindings=[n.add((function(){var n=i(o),r=t.is(o,["window","document"])||h.isInjected.call(o);s!==n&&r&&(s=n,clearTimeout(l),l=setTimeout((function(){e.handleEvent(a)}),220))}))],r())}}()},U("fullscreenchange"),U("fullscreenerror"),U("transitionEnd",(function(){var e,n=document.createElement("fakeelement"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionEnd"};for(e in i)if(i.hasOwnProperty(e)&&t.is(n.style[e]))return i[e]})),f.matchesSelector||(h.matchesSelector=u(f,"matchesSelector")),document.exitFullscreen=u(document,"exitFullscreen")||u(document,"cancelFullScreen")||function(){throw new Error("Element#requestFullscreen is not available in this platform")},"fullscreenEnabled"in document||(document.fullscreenEnabled=u(document,"fullscreenEnabled")),function(){var e="fullscreenElement",t=u(document,e,!0)||u(document,"fullScreenElement",!0)||u(document,"currentFullScreenElement",!0);if(t&&t!==e)try{h.addEvent.call(document,"fullscreenchange",(function(){document[e]=document[t]})),document[e]=document[t]}catch(e){}}(),_(),s.onDomReady(_),t.namespace("Element",h,t,!0)}));