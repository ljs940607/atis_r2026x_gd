define("UWA/Class",["UWA/Core"],(function(n){"use strict";var t=!1,i=/xyz/.test((function(){n.xyz()})),e=i?/\b_parent\b/:/^/,r=i?/\b_previous\b/:/^/,o="__uwaPrivateConstructor",a=function(){},p=function(){};function s(n,t,i,o){i._original&&(i=i._original);var p,s=e.test(i),l=r.test(i);return s||l?("function"!=typeof t&&(t=o?a:n||a),"function"!=typeof n&&(n=l?a:t),p=function(){var e,r,o,a=this;return null!=a?(s&&(r=a._parent,a._parent=n),l&&(o=a._previous,a._previous=t),e=i.apply(a,arguments),s&&(a._parent=r),l&&(a._previous=o)):e=i.apply(a,arguments),e},p.displayName="(method wrapper)",p._original=i,p):i}function l(n){return function(){this._previous.apply(this,arguments),n.apply(this,arguments)}}return p.extend=function(){var i,e;return t=!0,i=new this,t=!1,e=function(){!t&&this[o]&&this[o].apply(this,arguments)},i.constructor=e,n.extend(e,{prototype:i,parent:this,extend:p.extend,singleton:p.singleton,implement:p.implement}),e.implement.apply(e,arguments),e},p.implement=function(){var t,i,e,r,a,p,u,c=this,f=c.prototype||c;for(t=0,i=arguments.length;t<i;t+=1){var y;for(r in e=arguments[t],"class"===(a=n.typeOf(e))||"function"===a?("function"===a&&(e.prototype[o]=l(e)),e=e.prototype):e.init&&(e[o]=e.init,delete e.init),y=e.name?e.name:f.name?n.owns(f,"name")?f.name:"("+f.name+" inheritor)":"(anonymous class)",e)"constructor"!==r&&(p=e[r],n.is(p,"function")?(u=("class"===a?arguments[t]:c).parent,p.displayName=y+"#"+(r===o?"init":r),f[r]=s(u&&u.prototype&&u.prototype[r],n.owns(f,r)&&f[r],p,"class"===a)):n.is(p,"plain")?(n.owns(f,r)||(f[r]=n.is(f[r],"plain")?n.clone(f[r]):{}),n.extend(f[r],p,!0)):f[r]=p)}return c},p.singleton=function(){var n,i=this.extend.apply(this,arguments),e=i.prototype,r=!1,o=[];function a(t){n[t]=function(){if(!r){if("throw"===n.uninitializedCalls)throw new Error("Singleton called before being initialized");if("ignore"===n.uninitializedCalls)return;n.init()}return n[t].apply(this,arguments)}}for(var p in t=!0,n=new i,t=!1,e)"function"==typeof e[p]&&"init"!==p&&"constructor"!==p&&(o.push(p),a(p));return n.init=function(){if(r)throw new Error("Singleton is already initialized");var t,e;for(r=!0,t=0,e=o.length;t<e;t++)delete n[o[t]];return i.apply(this,arguments),this},n},n.namespace("Class",p,n)}));