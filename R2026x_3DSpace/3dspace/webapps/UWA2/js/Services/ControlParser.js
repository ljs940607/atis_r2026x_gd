define("UWA/Services/ControlParser",["UWA/Core","UWA/Element"],(function(t,n){"use strict";var e,o=Object.create(null);function r(t,n){var e=t.getAttribute(n)||t.getAttribute("data-"+n);return t.removeAttribute(n),t.removeAttribute("data-"+n),e}function u(t,n){n||(n=t.prototype.name),o[n]=t}function a(n,e){var r,u,a,l,i=o[n];t.owns(o,n)?t.is(i,"string")?(u=e,a=(r=(r=i).split(" "))[0],l=r[1]?r[1].split("."):[],(window.require||window.curl)([a],(function(t){l.forEach((function(n){t=t[n]})),u(null,t)}))):e(null,i):e("Control "+n+" not found")}return u("UWA/Controls/Tag","uwa-tag"),u("UWA/Controls/Input Text","uwa-text"),u("UWA/Controls/Input Button","uwa-button"),u("UWA/Controls/Input File","uwa-file"),u("UWA/Controls/Input Select","uwa-select"),u("UWA/Controls/Input Checkbox","uwa-checkbox"),u("UWA/Controls/Input Radio","uwa-radio"),u("UWA/Controls/ColorPicker","uwa-colorpicker"),u("UWA/Controls/DatePicker","uwa-datepicker"),e={register:u,parse:function(e,o){o||(o={});var u,l=n.getElements.call(e,"[uwa-control],[data-uwa-control]"),i=l.length,c={};function s(t,n,e,r){i--,e?(u=e,o.onError&&o.onError(e)):function(t,n){t.indexOf("[]",t.length-2)>-1?(t=t.slice(0,-2),c[t]||(c[t]=[]),c[t].push(n)):c[t]=n}(n,r),0===i&&(o.onComplete&&o.onComplete(c,u),!u&&o.onSuccess&&o.onSuccess(c))}l.forEach((function(n,e){!function(n,e,o){a(e,(function(r,u){var a,l=function(t){var n=t.parentNode,e=t.nextSibling;return n&&n.removeChild(t),function(o){o||(o=t),o.inject?o.inject(e||n,e&&"before"):n.insertBefore(o,e)}}(n);if(!r){if(t.is(u,"class")){var i={element:n};n.className&&(i.className=n.className,n.className=""),a=new u(i)}else t.is(u,"function")&&(a=u(n));a?l(a):r="Can't build the control "+e}o(r,a)}))}(n,r(n,"uwa-control"),s.bind(null,e,r(n,"uwa-name")||"lostAndFound[]"))}))},_tests:{getControl:a}},t.namespace("Services/ControlParser",e,t)}));