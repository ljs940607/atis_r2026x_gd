define("UWA/Controls/Notify",["UWA/Core","UWA/Controls/Abstract","UWA/Event","UWA/Fx"],(function(t,e,s,n){"use strict";var o=e.extend({defaultOptions:{className:"",showOnInject:!0,closeOnClick:!0,transition:"quadOut",duration:500,fx:!0,from:"top",to:"bottom",max:0},messages:null,init:function(t){var e=this;e.messages=[],e._parent(t),e.options.messages&&e.addMessage(e.options.messages),e.buildSkeleton()},buildSkeleton:function(){var e=this,s=e.elements,n=e.options;s.container=t.createElement("div",{class:"uwa-notify",events:{resize:e.dispatchAsEventListener("onResize")}}),n.className&&s.container.addClassName(n.className)},showMessage:function(t){var e,s,n=this.messages;return(s=t?(s=n.indexOf(t))>-1&&n.splice(s,1)[0]:n.shift())&&(e=this.injectItem(s)),e},addMessage:function(t,e){this.messages.push(t),e&&this.showMessage(t)},addMessages:function(t){var e=this;t.forEach((function(t){e.messages.push(t)}))},getItems:function(){return this.getContent().getElements(".uwa-notify-item")},injectItem:function(e){var o,i,a=this,c=a.options,l=a.getContent(),r=a.getItems(),u=l.getOffsetParent().getDimensions(),m=0,f={},h={};return(i=t.createElement("div",{class:"uwa-notify-item",html:{tag:"div",class:"uwa-notify-msg",html:[{tag:"div",class:"uwa-notify-header"},{tag:"a",class:"uwa-notify-close",text:"Ã—",href:"#close"},{tag:"div",class:"uwa-notify-body",html:e},{tag:"div",class:"uwa-notify-footer"}]},styles:{visibility:"hidden",zIndex:String(100-r.length)}})).addEvent("click",(function(t){var e="onClick";s.getElement(t).hasClassName("uwa-notify-close")&&(e="onClose"),a.dispatchEvent(e,[t,i])})),r.forEach((function(t){m+=t.getDimensions().outerHeight})),i.inject(l),a.updateItems(),i.getPosition(),o=i.getDimensions(),"top"===c.to?h.top=m+"px":"bottom"===c.to&&(h.top=u.innerHeight-o.outerHeight-m+"px"),"top"===c.from?f.top=-o.outerHeight+"px":f.top=o.outerHeight+u.outerHeight+"px",i.setStyles({left:u.innerWidth/2-o.width/2+"px",visibility:"visible"}),c.fx?(c.fade&&(f.opacity=0,h.opacity=1),i.setStyles(f),new n(i,{transition:c.transition,duration:c.duration,events:{onStart:function(){i.addClassName("moving")},onComplete:function(){i.removeClassName("moving")}}}).start(h)):i.setStyles(h),i},updateItems:function(){var t=this,e=t.options,s=t.getContent(),n=t.getItems(),o=s.getOffsetParent().getDimensions(),i=0;n.forEach((function(t){var s,n=t.getDimensions();"top"===e.to?s=i:"bottom"===e.to&&(s=o.innerHeight-n.outerHeight-i),i+=n.outerHeight,t.hasClassName("moving")||t.setStyles({left:o.innerWidth/2-n.width/2+"px",top:s+"px"})}))},onPostInject:function(){this.options.showOnInject&&this.showMessage()},onResize:function(){this.updateItems()},onClose:function(t,e){var o=this;s.stop(t),e.hasClassName("closing")||new n(e,{events:{onStart:function(){e.addClassName("closing")},onComplete:function(){e.destroy(),o.updateItems()}}}).fade("out")},onClick:function(t,e){var n=s.getElement(t);(this.options.closeOnClick||n.hasClassName("uwa-notify-close"))&&this.dispatchEvent("onClose",[t,e])}});return t.namespace("Controls/Notify",o,t)}));