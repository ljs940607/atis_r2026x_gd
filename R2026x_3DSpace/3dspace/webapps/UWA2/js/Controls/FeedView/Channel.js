define("UWA/Controls/FeedView/Channel",["UWA/Core","UWA/String","UWA/Controls/FeedView/Carousel","UWA/Controls/Pager","UWA/Event"],(function(e,t,n,i,s){"use strict";var a=n.extend({eltMargin:20,displayPager:!1,viewName:"carousel channel",showItem:function(e){this._parent(e),this.presentedItem&&this.presentedItem.remove(),this.presentedItem=undefined,this.loadItemsImages()},buildItemImage:function(n,i){var s=this,a=s.options,r=a.images,o=n[i]||"",l=e.createElement("img"),d="",c=e.createElement("div",{class:"hentry"}),h=e.createElement("div",{class:"entry-image",html:l}),m=e.createElement("div",{class:"entry-title",html:{tag:"span",class:"title",html:n.title?t.stripTags(n.title):""}}),p=e.createElement("div",{class:"entry-share"}),g=e.createElement("div",{class:"item-date",text:n.date?t.parseRelativeTime(n.date.toString()):""}),u=e.createElement("div",{class:"item-dragAndFollow"}),f="",C=s.resizeItemImage.bind(s,c),v="no-image";return d=n.description||n.content||"",n[i]||(p.addClassName(v),m.addClassName(v),d=t.stripTags(d),d=t.cut(d,125),f=e.createElement("span",{class:"entry-description",text:d}),m.appendChild(f)),a.enableShare&&(a.shareFunction&&p.addEvent("click",this.share.bind(this)),h.appendChild(p)),c.appendChild(h),h.appendChild(m),c.appendChild(g),a.enableDragAndFollow&&c.appendChild(u),this.addItemImage({item:n,container:c,src:o,onLoad:function(){l.setAttribute("src",o),C()},onError:function(){l.destroy()},onLoading:function(){l.setAttribute("src",r.loader),C()}}),c},onResize:function(){this._parent();var e=this.elements.items.getChildren(),t=0;e.forEach((function(e){t+=e.offsetWidth+this.eltMargin}),this),this.elements.items.setStyle("width",t+"px"),this.refreshScroller(),this.pager&&this.refreshPager()},buildPager:function(t){if(this.displayPager){var n=this,s=e.merge({_root:!1,events:{onOffsetChange:function(e){var t=n.options.source.getItems();n.showItem(t[e])}}},n.options.pager);n.pager=new i(s),n.pager.inject(n.container,t)}},share:function(e){s.stopPropagation(e),this.options.shareFunction()}});return e.namespace("Controls/FeedView_Channel",a,e)}));