define("UWA/Environments/Android",["UWA/Core","UWA/String","UWA/Utils","UWA/Utils/Client","UWA/Element","UWA/Environment","UWA/Json","UWA/Data","UWA/Storage/Adapter/Android","UWA/Storage/Adapter/Object"],(function(e,t,n,i,o,r,s,d){"use strict";e.is(window.jsProxy)?(d.allowCrossOriginRequest=!0,e.log=function(e){window.jsProxy.log("UWA:"+e)}):window.jsProxy={setData:function(){},getData:function(){},setPreferences:function(){},setTitle:function(){}},d.useOfflineCache=!0;var h=r.extend({name:"android",onInit:function(){var t=document.body,n=o.getElement.bind(t);this.android=window.jsProxy,this.html={viewport:window,wrapper:n(".module"),header:n(".moduleHeader"),content:n(".moduleWrapper"),body:n(".moduleContent"),edit:n(".moduleEdit"),footer:n(".moduleFooter"),counter:n(".counter"),title:n(".title"),icon:n(".icon"),shareAction:n(".share"),refreshAction:n(".refresh"),editAction:n(".edit")},this.html.scroller=e.createElement("div",{class:"moduleScroller"}).inject(this.html.content,"before"),this.html.content.inject(this.html.scroller),this.html.content.addEvent("resize",this.dispatchEvent.bind(this,"onResize"))},onResize:function(){var e=this.html,t=i.getSize(),n=e.content.getScrolls(),o=n.width,r=t.height,s=r+"x"+n.height;if(r>0&&s!==this.prevHeight&&(this.prevHeight=s,this.html.scroller&&(["header","footer"].forEach((function(t){r-=e[t]?e[t].offsetHeight:0})),n.height>r?(e.scroller.setStyle("height","auto"),e.scroller.setStyle("min-height",r+"px")):(e.scroller.setStyle("height",r+"px"),e.scroller.setStyle("min-height","")))),this.prevWidth===o)return!1;this.prevWidth=o},onInitConfig:function(){var e,t,n,i=this,o=i.data.currentAdapter.database,r=[],d=i.widget.getPreferences();for(e=0,t=d.length;e<t;e++)(n=d[e]).name="uwa-"+o+"-"+n.name,r.push(n);i.android.setPreferences(s.encode(r)),i.widget.data={}},onUpdateTitle:function(e){this._parent(e),this.android.setTitle(t.stripTags(e))}});return e.namespace("Environments/Android",h,e)}));