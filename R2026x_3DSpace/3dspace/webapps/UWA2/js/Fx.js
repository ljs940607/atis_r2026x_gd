define("UWA/Fx",["UWA/Core","UWA/String","UWA/Class","UWA/Class/Options","UWA/Class/Events","UWA/Class/Timed","UWA/Element","UWA/Color"],(function(t,n,r,e,u,i,a,o){"use strict";function c(t){return-1!==["borderColor","backgroundColor","color"].indexOf(n.camelCase(t))}function s(t){var n=Number(t);return isNaN(n)&&(n=parseInt(t,10)),isNaN(n)?0:n}var f=r.extend(e,i,u,{defaultOptions:{transition:"linear",duration:500,unit:"px",wait:!1},element:null,from:null,to:null,current:null,init:function(t,n){var r=this;r.element=t,r.from={},r.to={},r.queue=[],r.setOptions(n)},tween:function(t,n,r){var e={};return e[t]=[n,r],this.start(e)},fade:function(t){t=void 0!==t?t:"toggle";var n="opacity",r=a.getOpacity.call(this.element),e={};switch(e[n]=[],t){case"in":e[n]=[r,1];break;case"out":e[n]=[r,0];break;case"show":e[n]=[1,1];break;case"hide":e[n]=[0,0];break;case"toggle":e[n]=r<1?[r,1]:[r,0];break;default:e[n]=[r,t]}return this.start(e)},start:function(t){var n=this;return n.options.wait&&n.hasAnimate("fx")?n.queue.push(t):(n.stop(),n.setSteps(t),n.dispatchEvent("onStart"),n.startTime=Date.now(),n.current={},n.animate()),n},pause:function(){return this.clearAnimate("fx"),this},stop:function(){var t=this;return t.pause(),t.from={},t.to={},t},setSteps:function(t){var r,e=this,u={},i={};for(r in t)if(t.hasOwnProperty(r))if(r=n.camelCase(r),Array.isArray(t[r])?(u[r]=t[r][0],i[r]=t[r][1]):(u[r]=a.getStyle.call(e.element,r),i[r]=t[r]),c(r)){var f=o.parse(u[r]).toObject(),h=o.parse(i[r]).toObject();u[r]=[f.r,f.g,f.b,f.alpha],i[r]=[h.r,h.g,h.b,h.alpha]}else u[r]=s(u[r]),i[r]=s(i[r]);e.from=u,e.to=i},compute:function(r,e){var u,i=this.options,a=i.transition,o=i.duration,c=t.typeOf(a);if("string"===c){if(!t.is(f.Transitions[a],"function"))throw new Error("Invalid UWA.FX transition option value.");a=f.Transitions[a]}else if("array"===c)a=f.Transitions.cubicBezier.apply(null,a);else if("function"!==c)throw new Error("Invalid UWA.FX transition option value.");if(u=o>0&&r!==e?a(this.currentTime,r,e-r,o):e,isNaN(u))throw new Error(n.format('Invalid UWA.FX transition computation value with from "{0}" to "{1}".',r,e));return u},animate:function(){var t,n=this,r=Date.now(),e=n.options.duration,u=n.startTime;r<u+e?n.currentTime=r-u:(n.currentTime=e,t=!0),n.dispatchEvent("onAnimate",[n.element,n.from,n.to]),t?(n.stop(),n.dispatchEvent("onComplete"),n.queue.length>0&&n.start(n.queue.shift()),n.lastTime=null):n.setAnimate("fx",n.animate),n.fps=1e3/(r-(n.lastTime||r)),n.lastTime=r},onAnimate:function(t,n,r){var e,u,i=this,o={};for(e in n)n.hasOwnProperty(e)&&(u=c(e)?"rgba("+Math.round(i.compute(n[e][0],r[e][0]))+","+Math.round(i.compute(n[e][1],r[e][1]))+","+Math.round(i.compute(n[e][2],r[e][2]))+","+i.compute(n[e][3],r[e][3])+")":i.compute(n[e],r[e]),i.current[e]!==u&&(o[e]=u));i.current=o,a.setStyles.call(t,o)}});return f.Transitions={linear:function(t,n,r,e){return r*t/e+n},quadIn:function(t,n,r,e){return r*(t/=e)*t+n},quadOut:function(t,n,r,e){return-r*(t/=e)*(t-2)+n},quadInOut:function(t,n,r,e){return(t/=e/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},cubicIn:function(t,n,r,e){return r*(t/=e)*t*t+n},cubicOut:function(t,n,r,e){return r*((t=t/e-1)*t*t+1)+n},cubicInOut:function(t,n,r,e){return(t/=e/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},quartIn:function(t,n,r,e){return r*(t/=e)*t*t*t+n},quartOut:function(t,n,r,e){return-r*((t=t/e-1)*t*t*t-1)+n},quartInOut:function(t,n,r,e){return(t/=e/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},quintIn:function(t,n,r,e){return r*(t/=e)*t*t*t*t+n},quintOut:function(t,n,r,e){return r*((t=t/e-1)*t*t*t*t+1)+n},quintInOut:function(t,n,r,e){return(t/=e/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},sineIn:function(t,n,r,e){return-r*Math.cos(t/e*(Math.PI/2))+r+n},sineOut:function(t,n,r,e){return r*Math.sin(t/e*(Math.PI/2))+n},sineInOut:function(t,n,r,e){return-r/2*(Math.cos(Math.PI*t/e)-1)+n},expoIn:function(t,n,r,e){return 0===t?n:r*Math.pow(2,10*(t/e-1))+n},expoOut:function(t,n,r,e){return t===e?n+r:r*(1-Math.pow(2,-10*t/e))+n},expoInOut:function(t,n,r,e){return 0===t?n:t===e?n+r:(t/=e/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(2-Math.pow(2,-10*--t))+n},circIn:function(t,n,r,e){return-r*(Math.sqrt(1-(t/=e)*t)-1)+n},circOut:function(t,n,r,e){return r*Math.sqrt(1-(t=t/e-1)*t)+n},circInOut:function(t,n,r,e){return(t/=e/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},backIn:function(t,n,r,e,u){return r*(t/=e)*t*(((u=u||1.70158)+1)*t-u)+n},backOut:function(t,n,r,e,u){return r*((t=t/e-1)*t*(((u=u||1.70158)+1)*t+u)+1)+n},backInOut:function(t,n,r,e,u){return u=u||1.70158,(t/=e/2)<1?r/2*(t*t*((1+(u*=1.525))*t-u))+n:r/2*((t-=2)*t*((1+(u*=1.525))*t+u)+2)+n},elasticIn:function(t,n,r,e,u,i){var a;return 0===t?n:1==(t/=e)?n+r:(i=i||.3*e,(u=u||1)<Math.abs(r)?(u=r,a=i/4):a=i/(2*Math.PI)*Math.asin(r/u),-u*Math.pow(2,10*(t-=1))*Math.sin((t*e-a)*(2*Math.PI)/i)+n)},elasticOut:function(t,n,r,e,u,i){var a;return 0===t?n:1==(t/=e)?n+r:(i=i||.3*e,(u=u||1)<Math.abs(r)?(u=r,a=i/4):a=i/(2*Math.PI)*Math.asin(r/u),u*Math.pow(2,-10*t)*Math.sin((t*e-a)*(2*Math.PI)/i)+r+n)},elasticInOut:function(t,n,r,e,u,i){var a,o;return 0===t?o=n:2==(t/=e/2)?o=n+r:(i=i||e*(.3*1.5),(u=u||1)<Math.abs(r)?(u=r,a=i/4):a=i/(2*Math.PI)*Math.asin(r/u),o=t<1?u*Math.pow(2,10*(t-=1))*Math.sin((t*e-a)*(2*Math.PI)/i)*-.5+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*e-a)*(2*Math.PI)/i)*.5+r+n),o},bounceIn:function(t,n,r,e){return r-f.Transitions.bounceOut(e-t,0,r,e)+n},bounceOut:function(t,n,r,e){return(t/=e)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},bounceInOut:function(t,n,r,e){var u=f.Transitions;return t<e/2?.5*u.bounceIn(2*t,0,r,e)+n:.5*u.bounceOut(2*t-e,0,r,e)+.5*r+n},quinticBezier:function(t,n,r,e,u,i){var a,o,c,s,f,h,l,p,b=i-t,m={a:b-(a=t)-(p=5*((u-t)/b+a)-20*((s=(e-t)/b)+(o=(n-t)/b))+30*(c=(r-t)/b))-(l=10*(s-a)+30*(o-c))-(h=10*(c-a)-4*(f=5*(o-a)))-f,b:p,c:l,d:h,e:f};return function(t,n,r,e){var u,i,a=t/e,o=a*a,c=o*t;return m.a||m.c?m.b||m.d?(u=o,i=o*a):i=c:(m.b||m.d)&&(u=c),n+r*(m.a*o+m.b*o+m.c*i+m.d*u+m.e*a)}},cubicBezier:function(){function t(t,n){return((n.ax*t+n.bx)*t+n.cx)*t}function n(t,n){return(3*n.ax*t+2*n.bx)*t+n.cx}function r(r,e,u){return function(t,n){return((n.ay*t+n.by)*t+n.cy)*t}(function(r,e,u){var i,a,o,c,s,f,h;for(c=r,i=0;i<8;i++){if(s=t(c,e)-r,Math.abs(s)<u)return c;if(f=n(c,e),Math.abs(f)<u)break;c-=s/f}if(o=1,(c=r)<(a=0))h=a;else if(c>o)h=o;else{for(;a<o;){if(s=t(c,e),Math.abs(s-r)<u)return c;r>s?a=c:o=c,c=.5*(o-a)+a}h=c}return h}(r,e,u),e)}return function(t,n,e,u){var i,a,o,c,s,f,h={ax:1-(o=3*(i=t))-(c=3*(e-i)-o),bx:c,cx:o,ay:1-(s=3*(a=n))-(f=3*(u-a)-s),by:f,cy:s};return function(t,n,e,u){var i=t/u,a=function(t){return 1e3/60/t/4}(u),o=r(i,h,a);return n*(1-o)+(n+e)*o}}}()},t.namespace("Fx",f,t)}));