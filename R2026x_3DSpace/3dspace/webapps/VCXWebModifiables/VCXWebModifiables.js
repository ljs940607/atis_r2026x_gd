define("DS/VCXWebModifiables/VCXModifiableServer",["require","exports"],(function(e,t){"use strict";return class{constructor(){this._HashTableModifiable={},this._maxID=0}unInitialize(){this._HashTableModifiable={},this._maxID=0}GetHashTable(){return this._HashTableModifiable}AddModifiable(e){var t=e.GetHashing();if(t){if(this._HashTableModifiable[t])return;var r=parseInt(t,16);r&&r>this._maxID&&(console.log("HASHING : update max ID, we should not go here anymore"),this._maxID=r)}else t=(this._maxID+1).toString(16),e.SetHashing(t),this._maxID++;this._HashTableModifiable[t]=e}RemoveModifiable(e){delete this._HashTableModifiable[e]}GetModifiableFromHashing(e){var t=this._HashTableModifiable[e];return void 0===t?null:t}}})),define("DS/VCXWebModifiables/VCXIModifiableView",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("DS/VCXWebModifiables/VCXAModifiableFormatPainter",["UWA/Class"],(function(e){"use strict";return e.extend({init:function(){this._parent()},getPropertiesFormatPainter:function(){return[]},getFormatPainterCompatibilityClass:function(){return this.GetObject().componentType}})})),define("DS/VCXWebModifiables/VCXLinkedPropertyManager",["DS/CoreEvents/Events","UWA/Class","DS/VCXWebProperties/VCXColor"],(function(e,t,r){"use strict";var i=t.extend({init:function(){this._links={},this._invertedlinks={},this._isInFollow=!1},initialize:function(){},unInitialize:function(){this._links={},this._invertedlinks={},this._isInFollow=!1},AddLink:function(t,r,i,o,n){var s=this._links[t];s||(this._links[t]=s={});var a=s[r];a||(s[r]=a={});var p=a[i];p||(a[i]=p={});var l=p[o];l||(p[o]=l={}),p[o]=l=n;var u=this._invertedlinks[i];u||(this._invertedlinks[i]=u={}),u[o]=!0,e.publish({event:"VCX_LINKS_ADDED"})},RemoveLink:function(e,t,r,i){var o,n=this._links[e];if(n){var s=n[t];if(s){var a=s[r];if(a&&void 0!==(o=a[i])){delete a[i],0==Object.keys(s[r]).length&&(delete s[r],0==Object.keys(n[t]).length&&(delete n[t],0==Object.keys(this._links[e]).length&&delete this._links[e]));var p=this._invertedlinks[r];p&&p[i]&&(delete p[i],0==Object.keys(this._invertedlinks[r]).length&&delete this._invertedlinks[r])}}}return o},RemoveLinks:function(t){for(var r=0;r<t.length;r++)this.RemoveLink(t[r].inID,t[r].inProp,t[r].outID,t[r].outProp);e.publish({event:"VCX_LINKS_REMOVED"})},GetLinksFromPropertyName:function(e,t){var r=[];for(var i in this._links)if(this._links.hasOwnProperty(i)){var o=this._links[i];if(o)for(var n in o)if(o.hasOwnProperty(n)){var s=o[n];if(s)for(var a=0;a<t.length;a++){var p=t[a];if(s.hasOwnProperty(p))if(s[p].hasOwnProperty(e)){var l={inID:i,inProp:n,outID:p,outProp:e};r.push(l)}}}}return r},GetLinksFromInComponentID:function(e){var t=[],r=this._links[e];if(r)for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];if(o)for(var n in o)if(o.hasOwnProperty(n)){var s=o[n];for(var a in s)if(s.hasOwnProperty(a)){var p={inID:e,inProp:i,outID:n,outProp:a};t.push(p)}}}return t},IsLinkedAndNotInFollow:function(e,t){if(!0===this._isInFollow)return!1;var r=this._invertedlinks[e];return!(!r||!r[t])},Follow:function(e,t,i){var o=this._experienceBase.ComponentsMap,n=this._isInFollow;this._isInFollow=!0;var s=this._links[e];if(s){var a=s[t];if(a)for(var p in a)if(a.hasOwnProperty(p)){var l=o.GetComponentFromID(p);if(l){var u=l.QueryInterface("VCXIModifiable");if(u){var f=a[p];for(var d in f)if(f.hasOwnProperty(d)){var h=u.GetProperty(d);if(h){var c=h.GetPropertyValue().GetType();if(i.GetType()===c)u.OnChangeProperty(d,i);else if("VCXPropertyValueInt"!==i.GetType()&&"VCXPropertyValueFloat"!==i.GetType()||"VCXPropertyValueColor"!==c){var y=i.ToString();h.GetPropertyValue().FromString(y),u.OnChangeProperty(d,h.GetPropertyValue())}else{var P,b,M=100-100*i.GetValue()/100;M<0&&(M=0),M>99?(P=255,b=0):M<50?(P=Math.floor(M/50*255),b=255):(P=255,b=Math.floor((50-M%50)/50*255)),0;var C=new r;C.SetRGBA(P/255,b/255,0,1),h.GetPropertyValue().SetValue(C),u.OnChangeProperty(d,h.GetPropertyValue())}u.OnChangePropertiesEnd()}}}}}}this._isInFollow=n},UpdateProperties:function(){var e=this._experienceBase.ComponentsMap;for(var t in this._links){var r=e.GetComponentFromID(t);if(r){var i=r.QueryInterface("VCXIModifiable");if(i&&this._links.hasOwnProperty(t)){var o=this._links[t];if(o)for(var n in o){var s=i.GetProperty(n);if(s){var a=s.GetPropertyValue();this.Follow(t,n,a)}}}}}}});return Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:function(){return"VCXLinkedPropertyManager"}}),i})),define("DS/VCXWebModifiables/VCXMetaPropertyDef",["UWA/Class"],(function(e){"use strict";return e.extend({init:function(e,t){this._propertyInfo=e,this._strType=t,this._strDefaultLabel=null},SetDefaultLabel:function(e){e&&(this._strDefaultLabel=e)},GetDefaultLabel:function(){return this._strDefaultLabel},SetPropertyInfo:function(e){this._propertyInfo=e},GetPropertyInfo:function(){return this._propertyInfo},SetType:function(e){this._strType=e},GetType:function(){return this._strType}})})),define("DS/VCXWebModifiables/VCXIModifiableFormatPainter",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("DS/VCXWebModifiables/VCXAModifiableView",["UWA/Class","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],(function(e,t){"use strict";return e.extend({init:function(){},getTranslatedProperty:function(e){let r={},i=e.group;i||(i=e.groupName&&this.getPropertyGroups()[e.groupName]);let o=e.propertyName;if(!o||"string"==typeof o){let t=this.QueryInterface("VCXIModifiable");o=e.propertyName&&t.GetProperty(e.propertyName)}let n,s,a,p=o&&o.GetPropertyInfo();if(i&&i.i18nGroup&&(n=i.i18nGroup),p&&p.Geti18n()&&(s=p.Geti18n()),p&&"Modifiable.Style"===p.GetPropertyName()&&(a=t),i&&(r.groupName=n&&n[i.getName()],r.groupName||(p&&p.Geti18n()?r.groupName=p.Geti18n()[i.getName()]:(console.warn("Group '"+i.getName()+"' 's translation not found in "),r.groupName=null))),o){n&&s&&n===s&&(r.propertyName=n[o.GetPropertyInfo().GetNLSID()]),n&&s&&n!==s&&(r.propertyName=s[o.GetPropertyInfo().GetNLSID()]),n&&n[o.GetPropertyInfo().GetNLSID()]&&(r.propertyName=n[o.GetPropertyInfo().GetNLSID()]),s&&s[o.GetPropertyInfo().GetNLSID()]&&(r.propertyName=s[o.GetPropertyInfo().GetNLSID()]),r.propertyName||(console.warn("Property '"+o.GetPropertyInfo().GetNLSID()+"' 's translation not found in "),r.propertyName=o.GetPropertyInfo().GetNLSID());let e=p&&p.GetMapChoiceEnum&&p.GetMapChoiceEnum();if(e){r.choice={};for(let t in e)s&&s[e[t]]&&(r.choice[t]=s[e[t]]),!r.choice[t]&&n&&n[e[t]]&&(r.choice[t]=n[e[t]]),!r.choice[t]&&a&&a[e[t]]&&(r.choice[t]=a[e[t]]),r.choice||console.warn(e[t]+" 's translation not found in i18nGroup file "+n+", neither in i18nProperty file "+s)}}return r},getAdditionalPropertySettings:function(){return this._parent()||{}},isHiddenFromPropPanel:function(){}})})),define("DS/VCXWebModifiables/VCXEnumTools",["require","exports"],(function(e,t){"use strict";return class{static generateMapChoiceFromEnumAndId(e,t,r){const i={},o=Array.isArray(r)&&r,n=Object.keys(e).filter((e=>Number.isNaN(+e)&&(!o||!o.includes(e))));return n&&n.forEach((r=>{const o=t?t+".":"";i[e[r]]=o+r})),i}}})),define("DS/VCXWebModifiables/VCXPropertiesObserver",["require","exports"],(function(e,t){"use strict";return class{constructor(){this._observedProperties=[],this._dirtyProperties=[]}add(e,t){var r=e.QueryInterface("VCXIModifiable");if(r&&t){var i=r.GetProperty(t),o=null;i&&(o=i.GetPropertyValue()),this._observedProperties.push({modifiable:r,propertyName:t,previousPropertyValue:null,currentPropertyValue:o,dirty:!0}),this._dirtyProperties.push(t)}}addAll(e){var t=e.QueryInterface("VCXIModifiable");if(t){let r=[];t.GetProperties().GetListPropertyNames(r);for(let t of r)this.add(e,t)}}removeProp(e,t){var r=e.QueryInterface("VCXIModifiable");this._observedProperties=this._observedProperties.filter((e=>e.modifiable!==r||e.propertyName!==t))}update(){for(var e=0;e<this._observedProperties.length;e++){var t=!1,r=this._observedProperties[e].modifiable.GetProperty(this._observedProperties[e].propertyName),i=null;r&&(i=r.GetPropertyValue());var o=this._observedProperties[e].currentPropertyValue;o?o.IsEqualTo(i)||(t=!0):i&&(t=!0),t&&(this._observedProperties[e].previousPropertyValue=o,this._observedProperties[e].currentPropertyValue=i,this._dirtyProperties.push(this._observedProperties[e].propertyName))}}dirtify(){this._dirtyProperties.push("CustomDirty")}reset(){this._dirtyProperties=[];for(var e=0;e<this._observedProperties.length;e++)this._observedProperties[e].dirty=!1}isDirty(){return this._dirtyProperties.length>0}isDirtyProperty(e){return this._dirtyProperties.includes(e)}clear(){this._dirtyProperties=[],this._observedProperties=[]}}})),define("DS/VCXWebModifiables/VCXMetaPropertyManager",["UWA/Class"],(function(e){"use strict";var t=e.extend({init:function(){this._MetaPropertyDef={}},initialize:function(){},unInitialize:function(){this._MetaPropertyDef={}},AddMetaPropertyDef:function(e){var t=e.GetPropertyInfo().GetPropertyName();this._MetaPropertyDef[t]=e},GetMetaPropertyDef:function(e){return this._MetaPropertyDef[e]}});return Object.defineProperty(t.prototype,"componentType",{enumerable:!0,get:function(){return"VCXMetaPropertyManager"}}),t})),define("DS/VCXWebModifiables/VCXIModifiable",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("DS/VCXWebModifiables/VCXModelChangeListener",["UWA/Class"],(function(e){"use strict";var t=e.extend({initialize:function(){this._changesFlag=-1},unInitialize:function(){},hasChanged:function(e,t){return t&&(this._changesFlag|=e),this._changesFlag&e},postUpdate:function(e){this._parent(e),this._changesFlag=0}});return Object.defineProperty(t.prototype,"componentType",{enumerable:!0,get:function(){return"VCXModelChangeListener"}}),t.FChangeFlag={BomID:1,Visibility:2,DressupVisibility:4,PartListID:8,PartListEnabled:16,PartListDescription:32},t})),define("DS/VCXWebModifiables/VCXModifiableView",["DS/VCXWebModifiables/VCXAModifiableView","DS/VCXWebProperties/VCXPropertyGroup","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],(function(e,t,r){"use strict";return e.extend({init:function(){},getAdditionalPropertySettings:function(){const e=this.QueryInterface("VCXIStylesHolder");if(e){let t={};return e.getAdditionalPropertySettings(t,r)}},mergePropertyGroups:function(e,t){for(const r in t)e[r]?e[r]=t[r].concat(e[r]):e[r]=t[r]},getPropertyGroups:function(e){e||(e={});var i=this.getGroupPropertiesOrders();e["Group.Essentials"]||(e["Group.Essentials"]=new t({groupID:"Group.Essentials"}),e["Group.Essentials"].i18nGroup=r),e["Group.Essentials"].setPropertiesOrder(i["Group.Essentials"]),e["Group.Essentials"].priority=0;const o=this.QueryInterface("VCXIStylesHolder");return o&&o.getPropertyGroups(e),this.GetObject()._experienceBase.ModifiablesAdvancedProperties&&(e["Group.Introspection"]||(e["Group.Introspection"]=new t({groupID:"Group.Introspection"}),e["Group.Introspection"].i18nGroup=r),e["Group.Introspection"].setPropertiesOrder(i["Group.Introspection"]),e["Group.Introspection"].priority=90,e["Group.Introspection"].addProperties([{propertyName:"Modifiable.ID",i18n:r},{propertyName:"Modifiable.Type",i18n:r},{propertyName:"Modifiable.Hashing",i18n:r},{propertyName:"Modifiable.Level",i18n:r},{propertyName:"Modifiable.HasChildren",i18n:r}])),e},getGroupPropertiesOrders:function(){return{"Group.Essentials":["Modifiable.Style"],"Group.Introspection":["Modifiable.ID","Modifiable.Type","Modifiable.Hashing","Modifiable.Level","Modifiable.HasChildren"]}},getCollapsedGroupsNames:function(){return[]}})})),define("DS/VCXWebModifiables/VCXModifiable",["UWA/Class","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebModifiables/VCXEnumTools","i18n!DS/VCXWebModifiables/assets/nls/VCXWebModifiables"],(function(e,t,r,i,o,n,s,a,p){"use strict";return e.extend({init:function(){this._metaPropSet=null,this._scenarioManager=null,this._linkedPropertyManager=null},GetMetaProperties:function(e){this._metaPropSet&&e.Merge(this._metaPropSet)},Build:function(){var e=this.GetObject();e._experienceBase&&e._experienceBase.getManager("VCXScenarioManager")&&e._experienceBase.getManager("VCXScenarioManager").ModifiableServer.AddModifiable(this)},GetType:function(){return"VCXModifiable"},SetHashing:function(e){this._hashing=e},GetHashing:function(){return this._hashing},OnChangeProperty:function(e,o){const n=this.QueryInterface("VCXIStylesHolder");if(n){const t=n.OnChangeProperty(e,o);if(t)return t}if("Meta."===e.slice(0,5)){null===this._metaPropSet&&(this._metaPropSet=new i);var s=this._metaPropSet.GetProperty(e);if(s)return s.SetPropertyValue(o.Clone()),!0;{let i=this.GetObject()._experienceBase.getManager("VCXMetaPropertyManager");var a=i&&i.GetMetaPropertyDef(e);if(a){var p=new t(a.GetPropertyInfo().Clone(),o.Clone());return this._metaPropSet.AddOrModifyProperty(p),!0}var l=new r(e,2);return l.SetVisible(!1),this._metaPropSet.AddOrModifyProperty(new t(l,o.Clone())),!0}}return!1},OnChangePropertiesEnd:function(){},GetInterpolator:function(e){return null},GetProperty:function(e){const i=this.QueryInterface("VCXIStylesHolder");if(i){const t=i.GetProperty(e,p);if(t)return t}var a=null;if("Modifiable."===e.slice(0,11)){if("Modifiable.ID"===e)(l=new o).SetValue(this.GetObject().GetID()),(P=new r(e,1,!1,p)).SetGroupId("Group.Introspection"),a=new t(P,l);else if("Modifiable.Type"===e){(l=new o).SetValue(this.GetObject().GetType()),(P=new r(e,1,!1,p)).SetGroupId("Group.Introspection"),a=new t(P,l)}else if("Modifiable.Hashing"===e){var l;(l=new o).SetValue(this.GetHashing()),(P=new r(e,1,!1,p)).SetGroupId("Group.Introspection"),a=new t(P,l)}else if("Modifiable.Level"===e){var u=-1;if((h=this.GetObject()).IsKindOf("VCXWebComponentOccurrence")&&!h.IsDressup)do{if(u++,!(c=h.QueryInterface("VCXIModelNavigable")))break;var f=c.getParent();if(!f)break;h=f.GetObject()}while(null!==h);var d=new n;d.SetValue(u),(P=new r(e,1,!1,p)).SetGroupId("Group.Introspection"),a=new t(P,d)}else if("Modifiable.HasChildren"===e){var h,c,y=!1;if((h=this.GetObject()).IsKindOf("VCXWebComponentOccurrence")&&!h.IsDressup)(c=h.QueryInterface("VCXIModelNavigable"))&&(y=c.getChildren().length>0);var P,b=new s;b.SetValue(y),(P=new r(e,1,!1,p)).SetGroupId("Group.Introspection"),a=new t(P,b)}}else if("Meta."===e.slice(0,5)&&this._metaPropSet){var M=this._metaPropSet.GetProperty(e);M&&(a=M.Clone())}return a},GetProperties:function(e){var t=new i;const r=this.QueryInterface("VCXIStylesHolder");return r&&r.GetProperties(t,p),this.GetMetaProperties(t),this.GetObject()._experienceBase.ModifiablesAdvancedProperties&&(t.AddOrModifyProperty(this.GetProperty("Modifiable.ID")),t.AddOrModifyProperty(this.GetProperty("Modifiable.Type")),t.AddOrModifyProperty(this.GetProperty("Modifiable.Hashing")),t.AddOrModifyProperty(this.GetProperty("Modifiable.Level")),t.AddOrModifyProperty(this.GetProperty("Modifiable.HasChildren"))),t},RequestModification:function(e,t){if(e){t.AddOrModifyProperty(this.GetHashing(),e);const r=this.QueryInterface("VCXIStylesHolder");r&&r.RequestModification(e,t)}},GetRequiredPropertiesForTransition:function(){return null},GetModifiedProperties:function(){return this._modifiedProperties},OnChangePropertyBegin:function(e,t){var r=this.GetObject(),i=this.GetHashing();if(this._scenarioManager||(this._scenarioManager=r._experienceBase.getManager("VCXScenarioManager")),this._scenarioManager.AddPropertyToRestoreSet(i,e),this._modifiedProperties||(this._modifiedProperties={}),this._modifiedProperties[e]=!0,this._linkedPropertyManager||(this._linkedPropertyManager=r._experienceBase.getManager("VCXLinkedPropertyManager")),this._linkedPropertyManager){if(this._linkedPropertyManager.IsLinkedAndNotInFollow(r.GetID(),e)){var o=r.QueryInterface("VCXIPulseBehavior");return!o||!o.GetIsPulsing()}this._linkedPropertyManager.Follow(r.GetID(),e,t)}return!1},IsLiving:function(){return!0},GetVirtualProperties:function(){return{}},_generateMapChoiceFromEnumAndId:function(e,t,r){return a.generateMapChoiceFromEnumAndId(e,t,r)}})})),define("DS/VCXWebModifiables/VCXMetaPropertyManagerModifiable",["require","exports","DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertySet"],(function(e,t,r,i,o,n,s){"use strict";return class extends r{constructor(){super(),this._Properties={}}SetProperty(e,t){var r=new i(e,i.EBehaviorType.Singleton);this._Properties[e]=new o(r,t.Clone())}Build(){super.Build(),this.SetProperty("Manager.Meta.Evaluated",new n)}OnChangeProperty(e,t){const r=this.GetProperty(e);r&&r.SetPropertyValue(t)}GetProperty(e){return this._Properties.hasOwnProperty(e)?this._Properties[e]:null}GetProperties(){var e=new s;for(var t in this._Properties)this._Properties.hasOwnProperty(t)&&e.AddOrModifyProperty(this._Properties[t]);return e}OnChangePropertiesEnd(){super.OnChangePropertiesEnd()}}}));