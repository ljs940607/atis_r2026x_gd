define("DS/DELCompareIntegration/utils/Iconlib",["UWA/Core","UWA/Json","DS/WebappsUtils/WebappsUtils","text!DS/DELCompareIntegration/assets/Icon_config.json"],(function(e,t,n,i){"use strict";let r;return{init:function(){r=t.decode(i)},getIconURLFromKey:function(t,i){let a,o="I_DELQuestionMark",s=t;e.is(i)&&(s+=".",s+=i);const l=r[s];if(e.is(l)){const t="icons/32/";return e.is(l)&&e.is(l.IconName)&&(o=l.IconName),a=n.getWebappsAssetUrl(l.ModuleName,t),a+o+".png"}return""}}})),define("DS/DELCompareIntegration/viewdefs/DELServiceAssemblyViewDef",["UWA/Core","DS/CompareWidget2/ViewDefModules/DefaultViewDefs_V2","DS/CompareWidget2/ViewDefModules/CreateAssembly_Options"],(function(e,t,n){"use strict";n.STRUCT_FETCH_OPTIONS.DATA_SOURCE="LC_IDX_SERVICE";let i={PLUGDEFS:{StructFetch:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_FETCH_plugin",Options:n.STRUCT_FETCH_OPTIONS}}};return i=e.merge({FRAMEWORK_OPTIONS:{customCompareActive:!0}},e.clone(i,!0)),e.merge(i.PLUGDEFS,t.PLUGDEFS),e.merge(i,t),e.extend(i,n),i})),define("DS/DELCompareIntegration/options/DELWI_OPTIONS",["UWA/Core","DS/CompareWidget2/ViewDefModules/CreateAssembly_ViewDefs"],(function(e,t){"use strict";let n={};return n.CV_PROPS={...t.STRUCT_FETCH_OPTIONS.CV_PROPS,Magnitude:"REF.magnitude",Label:"REF.Title"},n.PROPS={...t.STRUCT_FETCH_OPTIONS.PROPS,Magnitude:"REF.magnitude",Label:"REF.Title"},n.CUSTOM_RELATIONSHIP_NAMES=["TITLE"],n.CUSTOM_COMPARISONS={COMP_TITLE:[["Label","Label"],["EQ"]]},n.SYSTEM_RELATIONSHIP_NAMES=["LEFT_ONLY","RIGHT_ONLY","QUANTITY","DIFFERENT","UNRELATED"],{STRUCT_COMPARE_OPTIONS:n}})),define("DS/DELCompareIntegration/viewdefs/DELCreateAssemblyViewDef",["UWA/Core","DS/CompareWidget2/ViewDefModules/DefaultViewDefs_V2","DS/CompareWidget2/ViewDefModules/CreateAssembly_Options","DS/XSRCompare/compare/ViewDefs"],(function(e,t,n,i){"use strict";n.STRUCT_FETCH_OPTIONS.DATA_SOURCE="LC_IDX_SERVICE";let r={PLUGDEFS:{StructFetch:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_FETCH_plugin",Options:n.STRUCT_FETCH_OPTIONS}},VIEWDEFS:{},VIEWSETS:{}};const a=e.clone(t.VIEWDEFS);a.CHAR_VIEW=i.VIEWDEFS.CHAR_VIEW;return r=e.merge({FRAMEWORK_OPTIONS:{customCompareActive:!0}},e.clone(r,!0)),e.merge(r.PLUGDEFS,t.PLUGDEFS),e.merge(r.PLUGDEFS,i.PLUGDEFS),e.merge(r.VIEWDEFS,a),e.merge(r.VIEWSETS,{MFN_STRUCT_PROPS_INST_EFF_CHAR:{ROW:["STRUCT_VIEW_WITH_CUSTOM_ATTRS",{COL:[["PROP_VIEW","INSTANCE_VIEW","EFFECTIVITY_VIEW","CHAR_VIEW"]]}]}}),e.extend(r,n),r})),define("DS/DELCompareIntegration/utils/WebServiceUtils",["UWA/Core","DS/WAFData/WAFData"],(function(e,t){"use strict";return{fetchData:function(e,n){return function(e,n){return new Promise(((i,r)=>{const a=n;t.authenticatedRequest(e,{method:"GET",headers:{SecurityContext:a,"Content-Type":"application/json","Accept-Language":"en"},onComplete:function(e){i(e)},onFailure:function(e){r(e)}})}))}(e,n)},postData:function(e,n,i){return function(e,n,i){return new Promise(((r,a)=>{const o=i;t.authenticatedRequest(e,{method:"POST",data:JSON.stringify(n),headers:{SecurityContext:o,"Content-Type":"application/json","Accept-Language":"en"},onComplete:function(e){r(e)},onFailure:function(e){a(e)}})}))}(e,n,i)}}})),define("DS/DELCompareIntegration/utils/Either",(function(){"use strict";class e{static left(e){return new t(e)}static right(e){return new n(e)}static of(e){return new n(e)}constructor(e){this.value=e}}class t extends e{map(e){return this}flatMap(e){return this}getRightOrThrow(){throw new Error("Cannot call() right on left")}getLeft(){return this.value}orElse(e){return e}get isLeft(){return!0}get isRight(){return!1}}class n extends e{map(t){return e.of(t(this.value))}flatMap(e){return e(this.value)}getRight(){return this.value}getLeftOrThrow(){throw new Error("Cannot call() left on right")}orElse(e){return this.value}get isLeft(){return!1}get isRight(){return!0}}return e})),define("DS/DELCompareIntegration/utils/DbContextUtil",["UWA/Core"],(function(e){"use strict";let t=null;const n=function(e){let t={};return t.securityContext=e.getSecurityContext(),t.serviceName=e.getServiceName(),t.tenantName=e.getTenant(),t};return{getDbContext:function(e){return null===t&&(t={...n(e)}),t}}})),define("DS/DELCompareIntegration/utils/NLSUtil",["UWA/Core","DS/DELCompareIntegration/utils/WebServiceUtils","i18n!DS/DELCompareIntegration/assets/nls/DELCompareNLS"],(function(e,t,n){"use strict";let i,r;return{getNLS:function(){return e.is(i)||(i=n),i},getUnitsNLS:function(n,i,a,o){return function(n,i,a,o){return new Promise(((s,l)=>{if(e.is(r))s(r);else{const c=o(i,a,"/resources/dictionary/dimensions");t.fetchData(c,n).then((t=>{if(e.is(t)){const n=JSON.parse(t);e.is(n)&&e.is(n.results)&&(r=n.results.sort(((e,t)=>e.Name<t.Name?-1:e.Name>t.Name?1:0)))}s(r)})).catch((e=>{l(null)}))}}))}(n,i,a,o)}}})),define("DS/DELCompareIntegration/viewdefs/DELGeneralSystemViewDef",["UWA/Core","DS/CompareWidget2/ViewDefModules/ViewDefOptions","DS/CompareWidget2/ViewDefModules/CreateAssembly_ViewDefs","DS/DELCompareIntegration/options/DELWI_OPTIONS","DS/CompareWidget2/ViewDefModules/DSColors","DS/DELCompareIntegration/utils/NLSUtil"],(function(e,t,n,i,r,a){"use strict";const o=a.getNLS();t.STRUCT_FETCH_OPTIONS.DATA_SOURCE="LC_IDX_SERVICE",i.STRUCT_COMPARE_OPTIONS.CV_PROPS={...n.STRUCT_FETCH_OPTIONS.CV_PROPS,Magnitude:"REF.magnitude",Label:"REF.Title",concatenatedProperty:"REF.concatenatedProperty"},i.STRUCT_COMPARE_OPTIONS.PROPS={...n.STRUCT_FETCH_OPTIONS.PROPS,Magnitude:"REF.magnitude",Label:"REF.Title",concatenatedProperty:"REF.concatenatedProperty"},i.STRUCT_COMPARE_OPTIONS.CUSTOM_RELATIONSHIP_NAMES=[o.TITLE],i.STRUCT_COMPARE_OPTIONS.CUSTOM_COMPARISONS={COMP_TITLE:[["Label","Label"],["EQ"]]},i.STRUCT_COMPARE_OPTIONS.CUSTOM_MATCH_ADJUSTMENTS=[{NAME:"ATTRIBUTE_DIFFERENT",PROPSET:["concatenatedProperty"],FLAG_ON:"NEQ",IS_VISIBLE:!0,MATCH_ADJ:0},{NAME:"ATTRIBUTE_EQUAL",PROPSET:["concatenatedProperty"],FLAG_ON:"EQ",IS_VISIBLE:!0,MATCH_ADJ:0}];const s={AttrFetch:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_FETCH_plugin"},AttrCompare:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_COMPARE_plugin"},AttrDisplay:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_DISPLAY_plugin",Options:t.ATTRIBUTE_DISPLAY_OPTIONS},InstAttrFetch:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_FETCH_plugin",Options:t.INST_ATTR_FETCH_OPTIONS},InstAttrCompare:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_COMPARE_plugin"},InstAttrDisplay:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_DISPLAY_plugin",Options:t.INST_ATTR_DISPLAY_OPTIONS},View3DDisplay:{Path:"DS/CompareWidget2/plugins/VIEW3D/VIEW3D_DISPLAY_plugin",Options:t.STRUCT_DISPLAY_OPTIONS},View3DPrep:{Path:"DS/CompareWidget2/plugins/VIEW3D/VIEW3D_PREP_plugin"},StructFetch:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_FETCH_plugin",Options:t.STRUCT_FETCH_OPTIONS},StructCompare:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_COMPARE_plugin",Options:t.STRUCT_COMPARE_OPTIONS},GetRelations:{Path:"DS/CompareWidget2/plugins/STRUCTURE/GET_RELATIONS_plugin",Options:t.GET_RELATIONS_OPTIONS},CompareRels:{Path:"DS/CompareWidget2/plugins/STRUCTURE/REL_COMPARE_plugin",Options:t.COMPARE_REL_OPTIONS},StructCustAttrsPrep:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_CUST_ATTRS_PREP_plugin"},StructDisplay:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_DISPLAY_plugin",Options:t.STRUCT_DISPLAY_OPTIONS},StructListViewPrep:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_LIST_VIEW_PREP_PLUGIN"},Exporter:{Path:"DS/CompareWidget2/plugins/EXPORT/EXPORT_plugin",Options:t.STRUCT_DISPLAY_OPTIONS},FetchAttributesWI:{Path:"DS/DELCompareIntegration/plugins/DELWI_ATTR_FETCH_PLUGIN"},AttrCompareWI:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_COMPARE_plugin"},AttrDisplayWI:{Path:"DS/DELCompareIntegration/plugins/DELWI_ATTR_DISP_PLUGIN",Options:t.ATTRIBUTE_DISPLAY_OPTIONS},FetchStructureWI:{Path:"DS/DELCompareIntegration/plugins/DELWI_STRUCT_FETCH_PLUGIN"},StructCompareWI:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_COMPARE_plugin",Options:i.STRUCT_COMPARE_OPTIONS},StructDisplayWI:{Path:"DS/DELCompareIntegration/plugins/DELWI_STRUCT_DISP_PLUGIN",Options:{...t.STRUCT_DISPLAY_OPTIONS,CUSTOM_MATCH_ADJ_FLAGS:{ATTRIBUTE_DIFFERENT:{COLOR:r.colorDef.YELLOW,TOOLTIP_MODULE_PATH:"CompareWidget2/Tooltips",NLS:o.ATTRIBUTE_DIFFERENT},ATTRIBUTE_EQUAL:{COLOR:r.colorDef.GREEN2,TOOLTIP_MODULE_PATH:"CompareWidget2/Tooltips",NLS:o.ATTRIBUTE_EQUAL}},CUSTOM_NEW_CURRENT_SELECTION_EVENT:"DEL_CUSTOM_EVENT"}},StructListViewPrepWI:{Path:"DS/CompareWidget2/plugins/STRUCTURE/STRUCT_LIST_VIEW_PREP_PLUGIN"},ContentView:{Path:"DS/DELCompareIntegration/plugins/DELWI_TEXT_COMP_PLUGIN"},InstanceContentView:{Path:"DS/DELCompareIntegration/plugins/DELWI_INSTANCETXT_COMP_PLUGIN"},EffectivityFetch:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_FETCH_plugin",Options:t.EFFECTIVITY_FETCH_OPTIONS},EffectivityCompare:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_COMPARE_plugin"},EffectivityDisplay:{Path:"DS/CompareWidget2/plugins/ATTRIBUTE/ATTR_DISPLAY_plugin",Options:t.EFFECTIVITY_DISPLAY_OPTIONS}},l=e.merge({FRAMEWORK_OPTIONS:{customCompareActive:!0}},e.clone(t,!0));return e.merge({VIEWSETS:{WI_VIEW:{COL:[{ROW:[{COL:"STRUCT_VIEW"},{COL:"WI_STRUCT_VIEW"}]},{ROW:[{COL:{ROW:[["PROP_VIEW","INSTANCE_VIEW","EFFECTIVITY_VIEW"]]}},{COL:"WI_PROP_VIEW"}]},{ROW:[["CONTENT_VIEW","INSTANCE_CONTENT_VIEW"]]}]}},VIEWDEFS:{STRUCT_VIEW:["StructFetch","StructCompare","GetRelations","CompareRels","StructCustAttrsPrep","StructListViewPrep","StructDisplay","Exporter"],PROP_VIEW:["AttrFetch","AttrCompare","AttrDisplay"],INSTANCE_VIEW:["InstAttrFetch","InstAttrCompare","InstAttrDisplay"],WI_STRUCT_VIEW:["FetchStructureWI","StructCompareWI","StructListViewPrepWI","StructDisplayWI"],WI_PROP_VIEW:["FetchAttributesWI","AttrCompareWI","AttrDisplayWI"],CONTENT_VIEW:["ContentView"],EFFECTIVITY_VIEW:["EffectivityFetch","EffectivityCompare","EffectivityDisplay"],INSTANCE_CONTENT_VIEW:["InstanceContentView"]},PLUGDEFS:s},l)})),define("DS/DELCompareIntegration/plugins/DELWI_ATTR_FETCH_PLUGIN",["UWA/Core","DS/CompareWidget2/plugins/plugin","DS/CompareWidget2/plugins/DATA/attrCache","DS/CompareWidget2/plugins/DATA/attrValObjSet","DS/DELCompareIntegration/utils/Either","DS/DELCompareIntegration/utils/NLSUtil"],(function(e,t,n,i,r,a){"use strict";let o;const s=function(t){const n=this,a=t.data.selectedData,s=a[0].length>a[1].length?a[0]:a[1],l=[];if(a){if(0===s.length)return;if(n._isInstance);else if(n._isEffectivity);else{let e=!0;if("LIST"!==t.data.structDisplayMode)1!==s.length&&(e=!1);else{const t=s[0].ObjIDSpec.getPhysID();s.forEach((function(n){n.ObjIDSpec.getPhysID()!==t&&(e=!1)}))}if(!e)return void n.postEvent("REF_PROPS_OFF_TOO_MANY_SELECTED",{id:"attrFetch"})}a.forEach((function(e){if(null!==e&&e.length>0){const t=e[0],i=n._isInstance||n._isEffectivity?t.instObjIDSpec:t.ObjIDSpec;null!==i&&l.push(i)}}));let c=0;for(let e of l){let t=e.getPhysID();null!=t&&""!==t&&++c}if(0===c)n.postEvent("CONTENT_ROW_PROPERTIES_NOT_AVAILABLE",{id:"attrFetch"});else{const t=function(t){let n=[];const i=function(t,n,i){return Array.isArray(t)&&e.is(t[n])?r.of(t[n]):r.left(i)},a=function(t,n){return e.is(t)?r.of(t):r.left(n)},o=r.of(t).flatMap((e=>i(e,0,"element does not exist"))).flatMap((e=>i(e,0,"element does not exist"))).flatMap((e=>a(e.riNode,"object does not exist"))).flatMap((e=>"function"==typeof e.get_dbObj_REF?r.of(e.get_dbObj_REF()):r.left("dbObjRef is missing"))).flatMap((e=>"function"==typeof e.getAttrList?r.of(e.getAttrList()):r.left("attribute list is missing"))),s=r.of(t).flatMap((e=>i(e,1,"element does not exist"))).flatMap((e=>i(e,0,"element does not exist"))).flatMap((e=>a(e.riNode,"object does not exist"))).flatMap((e=>"function"==typeof e.get_dbObj_REF?r.of(e.get_dbObj_REF()):r.left("dbObjRef is missing"))).flatMap((e=>"function"==typeof e.getAttrList?r.of(e.getAttrList()):r.left("attribute list is missing")));if(o.isRight){const e=o.getRight(),{"REF.Type":t,id:i,concatenatedProperty:r}=e,a=JSON.parse(r);n.push({type:t,id:i,objAttributes:a})}if(s.isRight){const e=s.getRight(),{"REF.Type":t,id:i,concatenatedProperty:r}=e,a=JSON.parse(r);n.push({type:t,id:i,objAttributes:a})}return n}(a),s=t.map((t=>function(t,n){const r=t.objAttributes,a=t.type,s=t.id,l=Object.keys(r);let c=0;const u=new i(s,a,"","");return u.setDBContext(n.getSecurityContext(),n.getServiceName(),n.getTenant()),l.forEach((function(t){const n=r[t];if(!e.is(n,"object")){const e=o[t]||t;u.add(e,e,n,a,c)}c+=1})),u}(t,l[0])));n.updateOutput(s)}}},l=function(){this.postEvent("CONTENT_ROW_PROPERTIES_NOT_AVAILABLE",{id:"attrFetch"})};return t.extend({init:function(e,t,i,r){this._parent(e,t,i,r),this.enableDebugLabel("ATTR_CACHE"),this._isInstance=this._pluginOptions.isInstance,this._isEffectivity=this._pluginOptions.isEffectivity,this._DEBUG_isInstTxt=this._isInstance?"(INST)":this._isEffectivity?"(EFFECTIVITY)":"REF)",this._attrCache=new n(this._isInstance,this._isEffectivity,r),this._comparisonInProgress=!1,o=a.getNLS()},execute:function(e,t){this._parent(e,t),this.postEvent("CONTENT_ROW_PROPERTIES_NOT_AVAILABLE",{id:"attrFetch"})},onEnabled:function(){this.subscribeEvent("DEL_CUSTOM_EVENT",s.bind(this)),this.subscribeEvent("NEW_CURRENT_SELECTION_EVENT",l.bind(this))}})})),define("DS/DELCompareIntegration/utils/UrlDictionary",["UWA/Core","DS/DELCompareIntegration/utils/Either"],(function(e,t){"use strict";function n(e,...t){this.funcToEvaluate=e,this.numberOfArguments=e.length,this.queryParameters=t,this.getNumberOfArguments=function(){return this.numberOfArguments},this.getURLPathFunction=function(){return this.funcToEvaluate},this.getQueryParameters=function(){return this.queryParameters}}const i=function(e,t){return e+t.reduce(((e,t)=>e+"&"+t),"")},r={DELResourceParameterPlanReference:"ResourceParameterPlan",DELWkiDataCollectPlanReference:"DataCollectPlan",DELWkiDataCollectChecklistReference:"CheckList"},a={PLMSpecifyHowToCollectDataCnx:{GET:{fetchAttributes:new n(((e,t,n)=>`/resources/v1/modeler/dsprcs/dsprcs:${e}/${t}/dsprcs:DataCollectRow/${n}`),"$mask=dsprcs:DataCollectRowMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true")}},DELWkiDataCollectPlanReference:{GET:{fetchAggregatedItems:new n((e=>`/resources/v1/modeler/dsprcs/dsprcs:DataCollectPlan/${e}/dsprcs:DataCollectRow`),"$mask=dsprcs:DataCollectRowMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true"),fetchAttributes:new n((e=>`/resources/v1/modeler/dsprcs/dsprcs:DataCollectPlan/${e}`),"$mask=dsprcs:DataCollectPlanMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true")}},DELResourceParameterPlanReference:{GET:{fetchAggregatedItems:new n((e=>`/resources/v1/modeler/dsprcs/dsprcs:ResourceParameterPlan/${e}/dsprcs:ResourceParameterRow`),"$mask=dsprcs:ResourceParameterRowMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true"),fetchAttributes:new n((e=>`/resources/v1/modeler/dsprcs/dsprcs:ResourceParameterPlan/${e}`),"$mask=dsprcs:ResourceParameterPlanMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true")}},DELResourcePrmPlanSET:{GET:{fetchAttributes:new n(((e,t,n)=>`/resources/v1/modeler/dsprcs/dsprcs:${e}/${t}/dsprcs:ResourceParameterRow/${n}`),"$mask=dsprcs:ResourceParameterRowMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true")}},DELResourcePrmPlanGET:{GET:{fetchAttributes:new n(((e,t,n)=>`/resources/v1/modeler/dsprcs/dsprcs:${e}/${t}/dsprcs:ResourceParameterRow/${n}`),"$mask=dsprcs:ResourceParameterRowMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true")}},DELWkiDataCollectChecklistReference:{GET:{fetchAttributes:new n((e=>`/resources/v1/modeler/dsprcs/dsprcs:CheckList/${e}`),"$mask=dsprcs:CheckListMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true"),fetchAggregatedItems:new n((e=>`/resources/v1/modeler/dsprcs/dsprcs:CheckList/${e}/dsprcs:DataCollectRow`),"$mask=dsprcs:CheckListRowMask.Default","$fields=dsmveno:CustomerAttributes","$mva=true")}}},o=function(e,n){const i=e.getURLPathFunction();if(e.getNumberOfArguments()>n.length)return t.left("number of arguments is less than expected");const r=i(...n);return t.of(r)};return{replaceURLParameters:function(e,...t){return o(e,t)},fetchURLObject:function(e,t,n){return function(e,t,n){return a[e][t][n]}(e,t,n)},fetchTypeMap:function(){return r},formFinalUrl:function(e,n,r){return function(e,n,r){return function(a,...s){const l=o(a,s);if(l.isLeft)return l;const c=e(n,r,l.getRight());return t.right(i(c,a.getQueryParameters()))}}(e,r,n)},appendQueryParameters:function(e,t){return i(e,t)}}})),define("DS/DELCompareIntegration/utils/Utils",["UWA/Core","DS/WAFData/WAFData","DS/DELCompareIntegration/utils/Either","DS/DELCompareIntegration/utils/NLSUtil","DS/DELCompareIntegration/utils/WebServiceUtils"],(function(e,t,n,i,r){"use strict";const a="Excluded",o="Included",s=function(e){const t=function(){let e="";for(let t=0;t<32;t+=2)e+=String.fromCharCode(Math.floor(9*Math.random())+48),e+=String.fromCharCode(Math.floor(25*Math.random())+65);return e}();return{id:t,title:"title"+t,organization:"MyCompany",parent:e,physicalID:t,type:"instance",owner:"owner"}},l=function(t,i,r){const a=t.find(r);return e.is(a)?n.of(a):n.left(i())},c=function(t,i,r){return Array.isArray(t)&&e.is(t[i])?n.of(t[i]):n.left(r())},u=function(t,i){return e.is(i)?n.of(i):n.left(t())},p=function(t,i){return e.is(i)?n.of(i):n.left(t())},f=function(t){return n.of(t).flatMap((t=>function(t){const i=t.filter((t=>e.is(t.getPhysID()))).map((e=>e.getPhysID()));return i.length===t.length?n.of(i):n.left("ObjIDSpec does not have PID")}(t)))},E=function(t,n){return e.is(n)||(n=","),Array.isArray(t)&&t.length>0?t.reduce(((e,t)=>e.toString().length>0?`${e}${n} ${t}`:t),""):""},T=function(t,i,r){let a,o=0,s=t.length-1,c=Math.floor((o+s)/2);for(;o<=s;){if(t[c].Name===i){a=t[c];break}t[c].Name>i?(s=c-1,c=Math.floor((o+s)/2)):(o=c+1,c=Math.floor((o+s)/2))}return n.of(a).flatMap((t=>e.is(t.Units)?n.of(t.Units):n.left(null))).flatMap((e=>l(e,(()=>""),(e=>e.Name===r)))).flatMap((e=>u((()=>""),e.label))).orElse(r)},m=async function(t,n,r){let s={};switch(t.type){case"PLMSpecifyHowToCollectDataCnx":s=await function(t,n,r){return new Promise(((s,l)=>{i.getUnitsNLS(n.securityContext,n.serviceName,n.tenantName,r).then((n=>{const i="",{minLimit:r,maxLimit:l,controlMaxLimit:c,controlMinLimit:u}=t;let p={type:{1:"Real",2:"Integer",3:"Text",4:"Boolean",5:"Timestamp"}[t?.dcType]||i,collectMode:t?.mode||i,label:t?.label||i,numberOfMeasurements:t?.numberOfMeasurements?.toString()||i};const f=t?.dcType;if(e.owns(t,"possibleValues")){const n=t?.possibleValues;p.possibleValues=e.is(n)&&Array.isArray(n)?E(n,"|"):""}if(1===f&&(p.dimension=t?.magnitude||i),1===f||2===f){switch(r){case a:p.minValue=` > ${t?.minValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)||i}`;break;case o:p.minValue=` ≥ ${t?.minValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)||i}`;break;default:p.minValue=i}switch(l){case a:p.maxValue=` > ${t?.maxValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)||i}`;break;case o:p.maxValue=` ≤ ${t?.maxValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)||i}`;break;default:p.maxValue=i}switch(c){case a:p.controlMax=` > ${t?.controlMaxValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)||i}`;break;case o:p.controlMax=` ≤ ${t?.controlMaxValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)||i}`;break;default:p.controlMax=i}switch(u){case a:p.controlMin=` > ${t?.controlMinValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)||i}`;break;case o:p.controlMin=` ≥ ${t?.controlMinValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)||i}`;break;default:p.controlMin=i}p.value=t?.nominalValue?` ${t?.nominalValue?.value} ${T(n,t?.nominalValue?.magnitude,t?.nominalValue?.unit)}`:i}else 5===f&&(delete p.numberOfMeasurements,delete p.collectMode,p.format=t?.timestampFormat||i);if(Array.isArray(t.possibleValues)&&Array.isArray(t.unconformValues)){const e=new Set(t.unconformValues),n=t.possibleValues.filter((t=>!e.has(t)));p.conformanceValue=E(n)}s(p)})).catch((e=>{l(null)}))}))}(t,n,r);break;case"DELResourcePrmPlanSET":case"DELResourcePrmPlanGET":s=await function(t,n,r){return new Promise(((s,l)=>{i.getUnitsNLS(n.securityContext,n.serviceName,n.tenantName,r).then((n=>{let i={};const r="",{minLimit:l,maxLimit:c,controlMaxLimit:u,controlMinLimit:p,isValueSet:f,paramType:m,title:d}=t;if(i.label=d,i["Parameter Type"]=m,"Text"===m){const e=t?.possibleValues;i.value=Array.isArray(e)?E(e,"|"):r}else if("Integer"===m){const n=t?.possibleValues;i.value=Array.isArray(n)?E(n,"|"):r;const a=t?.maxValue?.value,o=t?.minValue?.value;i.maxValue="NotSet"===c?r:e.is(a)?a:r,i.minValue="NotSet"===l?r:e.is(o)?o:r}else{switch(p){case o:i.controlMin=` ≥ ${t?.controlMinValue?.value} ${T(n,t?.controlMinValue?.magnitude,t?.controlMinValue?.unit)}`;break;case a:i.controlMin=` > ${t?.controlMinValue?.value} ${T(n,t?.controlMinValue?.magnitude,t?.controlMinValue?.unit)}`;break;default:i.controlMin=r}switch(l){case o:i.minValue=` ≥ ${t?.minValue?.value} ${T(n,t?.minValue?.magnitude,t?.minValue?.unit)}`;break;case a:i.minValue=` > ${t?.minValue?.value} ${T(n,t?.minValue?.magnitude,t?.minValue?.unit)}`;break;default:i.minValue=r}switch(c){case o:i.maxValue=` ≤ ${t?.maxValue?.value} ${T(n,t?.maxValue?.magnitude,t?.maxValue?.unit)}`;break;case a:i.maxValue=` < ${t?.maxValue?.value} ${T(n,t?.maxValue?.magnitude,t?.maxValue?.unit)}`;break;default:i.maxValue=r}switch(u){case o:i.controlMax=` ≤ ${t?.controlMaxValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)}`;break;case a:i.controlMax=` < ${t?.controlMaxValue?.value} ${T(n,t?.controlMaxValue?.magnitude,t?.controlMaxValue?.unit)}`;break;default:i.controlMax=r}i.value=f?` ${t?.nominalValue?.value} ${T(n,t?.nominalValue?.magnitude,t?.nominalValue?.unit)}`:r}s(i)})).catch((e=>{l(e)}))}))}(t,n,r)}return s},d=function(t,i,a){return new Promise(((i,o)=>{r.fetchData(t,a).then((t=>{const r=JSON.parse(t),a=n.of(r).flatMap((e=>u((()=>""),e))).flatMap((t=>{return i=t,r="richText",e.is(i[r])?n.of(i[r]):n.left("no property found");var i,r})).orElse(null);i({richText:a})})).catch((()=>o(new Error("Failure while fetching values"))))}))};return{getInstanceObject:function(e){return s(e)},getRIRPath:function(t,n,i){return e.is(n)&&e.is(i)?{path:[t,n,i]}:{path:[t]}},getTransformedPropertyDataForWI:function(e,t,n){return m(e,t,n)},getRichTextForPID:function(e,t,n){return d(e,0,n)},fetchData:function(e,t){return r.fetchData(e,t)},postData:function(e,t,n){return r.postData(e,t,n)},getObjectType:function(e){return function(e){return l(e,(()=>"Object type is null"),(e=>null!==e.getObjType())).flatMap((e=>p((()=>"Object type is null"),e.getObjType())))}(e)},getSecurityContext:function(e){return function(e){return l(e,(()=>"security context is null"),(e=>null!==e.getSecurityContext())).flatMap((e=>p((()=>"security context is null"),e.getSecurityContext())))}(e)},getPIDs:function(e){return f(e)},getPIDFromObjIdSpec:function(e){return function(e){return u((()=>"ObjIDSpec is null"),e).flatMap((e=>p((()=>"pid is null"),e.getPhysID())))}(e)},getDCType:function(e){return function(e){let t="";switch(e){case 1:t="Real";break;case 2:t="Integer";break;case 3:t="Text";break;case 4:t="Boolean";break;case 5:t="Timestamp"}return t}(e)},getServiceName:function(e){return function(e){return n.of(e).flatMap((e=>c(e,0,(()=>"Array is empty")))).flatMap((e=>u((()=>"objIdSpec does not exist"),e.getServiceName()))).flatMap((e=>u((()=>""),e))).orElse("3DSpace")}(e)},getTenantName:function(e){return function(e){return n.of(e).flatMap((e=>c(e,0,(()=>"Array is empty")))).flatMap((e=>u((()=>"objIdSpec does not exist"),e.getTenant()))).flatMap((e=>u((()=>""),e))).orElse("")}(e)},generateDelimitedValueFromArr:function(e,t){return E(e,t)}}})),define("DS/DELCompareIntegration/plugins/DELWI_TEXT_PLUGIN",["UWA/Core","DS/VENHtmlDiff/HTMLDiff","DS/UIKIT/Mask","DS/DELCompareIntegration/utils/Utils","DS/DELCompareIntegration/utils/UrlDictionary"],(function(e,t,n,i,r){"use strict";const a=function(e){let t=this._outputPanel.elements;e&&e.visible?(t.compareTitle.show(),t.compareTitle.setHTML(e.text)):t.compareTitle.hide()},o=function(e){let t=this._outputPanel.elements;e.visibility?(t.standardToolbar.toolbarOtherItems.prepareUpdateView(),t.standardToolbar.toolbarOtherItems.updateNodeModel("leftText",{grid:{data:e.leftLegend},tooltip:e.leftLegend}),t.standardToolbar.toolbarOtherItems.updateNodeModel("rightText",{grid:{data:e.rightLegend},tooltip:e.rightLegend}),t.standardToolbar.toolbarOtherItems.pushUpdateView(),t.standardToolbar.toolbarContainer.show()):t.standardToolbar.toolbarContainer.hide()},s=function(e,t,n){let i=this._outputPanel.elements;o.call(this,n),a.call(this,t),i&&e?i.contentPanel.setHTML(e):i.contentPanel.setHTML("<h3> No Content To Compare </h3>")},l=function(e,n){let i="";!e&&n&&(e="<p></p>"),!n&&e&&(n="<p></p>"),e=e.replace(/↵/g,""),n=n.replace(/↵/g,"");return i=t.default(e,n,{ignoreWhiteSpaceDifferences:!0,matchGranularity:100,combineWords:!1}),i||""},c=function(e,t,n){return new Promise(((a,o)=>{const s=i.getSecurityContext(t);s.isLeft&&o(s.getLeft());const l=s.getRight(),c=i.getServiceName(t),u=i.getTenantName(t),p=e.map((e=>function(e,t,i){const a=n(t,i,"/resources/dsmfg/private/V0/invoke/getRichText");return r.appendQueryParameters(a,[`pid=${e}`])}(e,c,u))),f=e.map((e=>e)),E=p.map(((e,t)=>i.getRichTextForPID(e,{pid:f[t]},l)));Promise.allSettled(E).then((e=>{2!==e.filter((e=>"rejected"===e.status)).map((e=>e.reason)).length?a(e.map((e=>e.value))):a([])})).catch((e=>o(e)))}))},u=function(e){const t=i.getPIDFromObjIdSpec(e);return t.isRight?t.getRight():null},p=function(t){return!e.is(t)},f=function(e,t,n,i,r){const a=this,o=a._outputPanel.elements;let u={visible:!1,text:""};if(!t)return;const f=c.call(a,e,t);n.isMasked(o.container)||n.mask(o.container),f.then((function(e){if(!e)return i.visibility=!1,s.call(a,null,u,i),void(n.isMasked(o.container)&&n.unmask(o.container));if(e.reduce(((e,t)=>e&p.call(this,t.richText)),!0))return i.visibility=!1,s.call(a,null,u,i),void(n.isMasked(o.container)&&n.unmask(o.container));let t;const c=e.filter((e=>p.call(this,e.richText))).map((e=>e.richText)),f=e.map((e=>e.title?e.title:""));if(1===c.length){const e=c[0],n=f[0];t=e,u.text=n||"Custom Title",u.visible=!!u.text,i.visibility=!1}else t=l.call(a,c[0],c[1]),i.visibility=!0,i.leftLegend=`${r.contentInLeft}`,i.rightLegend=`${r.contentInRight}`,u.visible=!0,u.text=`${f[0]} v/s ${f[1]}`;s.call(a,t,u,i),n.isMasked(o.container)&&n.unmask(o.container)}))};return{compareHTML:function(e,t){return l.call(this,e,t)},updateCompareView:function(e,t,n){return s.call(this,e,t,n)},fetchRichText:function(e,t,n){return c.call(this,e,t,n)},fetchId:function(e){return u.call(this,e)},isRichTextAbsent:function(e){return p.call(this,e)},getDataAndUpdateView:function(e,t,n,i,r){f.call(this,e,t,n,i,r)}}})),define("DS/DELCompareIntegration/panels/DELWI_STRUCT_COMP_PANEL",["DS/CustomizableLayout/View","DS/CompareWidget2/plugins/STRUCTURE/ViewPanel/structComparePanel","DS/DELCompareIntegration/utils/NLSUtil"],(function(e,t,n){"use strict";const i=n.getNLS();return t.extend({getLabel:function(){return i.contentCompare},getName:function(){return"DATACOLLECTSTRUCT_VIEW"}})})),define("DS/DELCompareIntegration/plugins/DELWI_STRUCT_DISP_PLUGIN",["DS/CustomizableLayout/View","UWA/Core","DS/CompareWidget2/plugins/STRUCTURE/STRUCT_DISPLAY_plugin","DS/DELCompareIntegration/panels/DELWI_STRUCT_COMP_PANEL","DS/UIKIT/Mask","DS/DELCompareIntegration/utils/NLSUtil"],(function(e,t,n,i,r,a){"use strict";const o=function(){const e=this;t.is(e._outputPanel)&&e._outputPanel.clearView()};let s;return n.extend({onEnabled:function(){const e=this;s=a.getNLS();const t={eventName:"DATAPLAN_STRUCTURE_NOT_AVAILABLE",fn:function(){e.showMessage(s.structComparisonNotAvailable)}},n={eventName:"LOADING_COMPARE",fn:function(){const t=e._outputPanel.elements;r.isMasked(t.container)&&r.unmask(t.container),o.call(e),r.isMasked(t.container)||r.mask(t.container)}},i={eventName:"DATAPLAN_STRUCTURE_FAILED",fn:function(){e.showMessage(s.structComparisonFailed)}};return e.subscribeEvent(t.eventName,t.fn.bind(e)),e.subscribeEvent(n.eventName,n.fn.bind(e)),e.subscribeEvent(i.eventName,i.fn.bind(e)),e._parent()},showMessage:function(e){this._parent(e),this.reportOK()},createViewPanelObject:function(e,t){return new i(e,this._plugSvcs,t)}})})),define("DS/DELCompareIntegration/panels/DELWI_CONTENT_PANEL",["DS/CustomizableLayout/View","UWA/Core","DS/CompareWidget2/viewComponents/StandardCompareToolbar","DS/DELCompareIntegration/utils/NLSUtil","text!DS/DELCompareIntegration/assets/DELContentPanelSettings.json","css!DS/DELCompareIntegration/assets/DELCompare.css"],(function(e,t,n,i,r){"use strict";let a;return e.extend({init:function(e){a=i.getNLS(),this._parent(),this.buildSkeleton(e)},buildSkeleton:function(e){let n=this;this.elements.container=e,n.createToolBar(),n.elements.delCompareWindow=t.createElement("div",{id:"delCompareWindow"}),n.elements.compareTitle=t.createElement("div",{id:"compareTitle"}),n.elements.contentPanel=t.createElement("div",{id:"contentPanel"}),n.elements.compareTitle.inject(n.elements.delCompareWindow),n.elements.contentPanel.inject(n.elements.delCompareWindow),n.elements.delCompareWindow.inject(n.elements.container)},createToolBar:function(){let e=JSON.parse(r).reqToolbarMenuItem;this.elements.standardToolbar=new n(this.elements.container,this,{navigateDifferences:!1,showCompareLegend:!1,otherMenuItems:e})},destroy:function(){this.elements.container=null,this._buttons=null,this._plugSvcs=null},getLabel:function(){return a.richText},getName:function(){return"CompareHTML"},clearView:function(){this._buttons=null,this._plugSvcs=null}})})),define("DS/DELCompareIntegration/plugins/DELWI_TEXT_COMP_PLUGIN",["UWA/Core","DS/CompareWidget2/plugins/displayPlugin","DS/DELCompareIntegration/panels/DELWI_CONTENT_PANEL","DS/UIKIT/Mask","DS/DELCompareIntegration/utils/NLSUtil","DS/DELCompareIntegration/plugins/DELWI_TEXT_PLUGIN","DS/DELCompareIntegration/utils/Either"],(function(e,t,n,i,r,a,o){"use strict";let s,l={visibility:!1,rightLegend:"",leftLegend:""};const c=function(t,n){return o.of(t).flatMap((t=>e.is(t.riNode)?o.of(t.riNode):o.left())).flatMap((t=>e.is(t.get_dbObj_REF,"function")?o.of(t.get_dbObj_REF()):o.left())).flatMap((t=>e.is(t)?o.of(t):o.left())).flatMap((t=>e.is(t.getAttr,"function")?o.of(n(t)):o.left())).orElse(null)},u=function(e,t,n){return a.fetchRichText.call(this,e,t,n)},p=function(t,n,r,o){const c=this,p=c._outputPanel.elements;let f={visible:!1,text:""};if(!n)return;i.isMasked(p.container)||i.mask(p.container);u.call(c,t,n,r).then((function(t){if(t.reduce(((e,t)=>e&a.isRichTextAbsent.call(this,t.richText)),!0))return l.visibility=!1,a.updateCompareView.call(c,null,f,l),void(i.isMasked(p.container)&&i.unmask(p.container));let n;const r=t.filter((e=>!a.isRichTextAbsent.call(this,e.richText))).map((e=>e.richText));if(1===r.length){const e=r[0],t=o[0];n=e,f.text=t||"Custom Title",f.visible=!!f.text,l.visibility=!1}else n=a.compareHTML.call(c,r[0],r[1]),l.visibility=!0,l.leftLegend=`${s.contentInLeft}`,l.rightLegend=`${s.contentInRight}`,f.text=o[0]||o[1]?`${o[0]} v/s ${o[1]}`:null,e.is(f.text)?f.visible=!0:f.visible=!1;a.updateCompareView.call(c,n,f,l),i.isMasked(p.container)&&i.unmask(p.container)}))},f=function(t){const[n,i]=t.data.selectedData,r=t.target.makeServiceURL,o="DEL_CUSTOM_EVENT"===t.event?e=>e.getAttr("Title"):e=>e.getAttr("ds6w:label");let s=[],l=[],u=[];n.length>0&&(s.push(a.fetchId.call(this,n[0].ObjIDSpec)),l.push(n[0].ObjIDSpec),u.push(c(n[0],o))),i.length>0&&(s.push(a.fetchId.call(this,i[0].ObjIDSpec)),l.push(i[0].ObjIDSpec),u.push(c(i[0],o))),s=s.filter((t=>e.is(t))),l.length>0&&p.call(this,s,l,r,u)};return t.extend({createViewPanelObject:function(e){if(e)return new n(e);this.reportKO()},execute:function(e,t){s=r.getNLS();this._parent(e,t),this.reportOK()},onEnabled:function(){let e=this;return e._lastViewDisplayMode="none",e._lastWasRootsOnly=!1,e._isEnabled||(e.subscribeEvent("NEW_CURRENT_SELECTION_EVENT",f.bind(this)),e.subscribeEvent("DEL_CUSTOM_EVENT",f.bind(this))),e._parent()}})})),define("DS/DELCompareIntegration/panels/DELWI_ATTR_COMP_PANEL",["DS/CompareWidget2/plugins/ATTRIBUTE/ViewPanel/propsComparePanel","DS/CompareCommon/Utils","DS/DELCompareIntegration/utils/NLSUtil"],(function(e,t,n){"use strict";let i;return e.extend({init:function(e,t,r){i=n.getNLS(),this._parent(e,t,r)},getLabel:function(){return i.contentProperties},getName:function(){return"DATACOLLECT_VIEW"},getDomId:function(){return"datacollect"},isTitleAttr:function(e){return t.isTitleAttr(e,!0)}})})),define("DS/DELCompareIntegration/plugins/DELWI_ATTR_DISP_PLUGIN",["DS/CompareWidget2/plugins/displayPlugin","DS/DELCompareIntegration/panels/DELWI_ATTR_COMP_PANEL","i18n!DS/CompareWidget2/assets/nls/DisplayMessages","DS/DELCompareIntegration/utils/NLSUtil"],(function(e,t,n,i){"use strict";let r;return e.extend({onEnabled:function(){const e=this;r=i.getNLS();return{instProps:[{eventName:"INST_PROPS_UPDATE_IN_PROGRESS_EVENT",fn:e.onUpdateInProgress},{eventName:"INST_PROPS_FETCH_FAILED",fn:e.onAttrFetchFailure},{eventName:"NO_CURRENT_SELECTION_EVENT",fn:function(){e.showMessage(n.PROPS_UNAVAILABLE_NO_SELECTION)}},{eventName:"INST_PROPS_OFF_NONE_AVAILABLE",fn:function(){e.showMessageAndSignalOK("INST_PROPS_OFF_NONE_AVAILABLE_MSG")}},{eventName:"INST_PROPS_OFF_DURING_LIST_COMPARE",fn:function(){e.showMessageAndSignalOK("INST_PROPS_OFF_DURING_LIST_COMPARE_MSG")}},{eventName:"INST_PROPS_OFF_TOO_MANY_SELECTED",fn:function(){e.showMessageAndSignalOK("INST_PROPS_OFF_TOO_MANY_SELECTED_MSG")}},{eventName:"GROUP_PLACEHOLDER_SELECTED",fn:function(){e.showMessageAndSignalOK("GROUP_PLACEHOLDER_SELECTED_MSG")}}],effectivity:[{eventName:"EFFECTIVITY_UPDATE_IN_PROGRESS_EVENT",fn:e.onUpdateInProgress},{eventName:"EFFECTIVITY_FETCH_FAILED",fn:e.onAttrFetchFailure},{eventName:"NO_CURRENT_SELECTION_EVENT",fn:function(){e.showMessage(n.PROPS_UNAVAILABLE_NO_SELECTION)}},{eventName:"EFFECTIVITY_OFF_NONE_AVAILABLE",fn:function(){e.showMessageAndSignalOK("EFFECTIVITY_OFF_NONE_AVAILABLE_MSG")}},{eventName:"EFFECTIVITY_OFF_DURING_LIST_COMPARE",fn:function(){e.showMessageAndSignalOK("EFFECTIVITY_OFF_DURING_LIST_COMPARE_MSG")}},{eventName:"EFFECTIVITY_OFF_TOO_MANY_SELECTED",fn:function(){e.showMessageAndSignalOK("EFFECTIVITY_OFF_TOO_MANY_SELECTED_MSG")}},{eventName:"GROUP_PLACEHOLDER_SELECTED",fn:function(){e.showMessageAndSignalOK("GROUP_PLACEHOLDER_SELECTED_MSG")}}],refProps:[{eventName:"REF_PROPS_UPDATE_IN_PROGRESS_EVENT",fn:e.onUpdateInProgress},{eventName:"REF_PROPS_FETCH_FAILED",fn:e.onAttrFetchFailure},{eventName:"NO_CURRENT_SELECTION_EVENT",fn:function(){e.showMessage(n.PROPS_UNAVAILABLE_NO_SELECTION)}},{eventName:"REF_PROPS_OFF_NONE_AVAILABLE",fn:function(){e.showMessageAndSignalOK("REF_PROPS_OFF_NONE_AVAILABLE_MSG")}},{eventName:"REF_PROPS_OFF_TOO_MANY_SELECTED",fn:function(){e.showMessageAndSignalOK("REF_PROPS_OFF_TOO_MANY_SELECTED_MSG")}},{eventName:"GROUP_PLACEHOLDER_SELECTED",fn:function(){e.showMessageAndSignalOK("GROUP_PLACEHOLDER_SELECTED_MSG")}}],customEvents:[{eventName:"CONTENT_ROW_PROPERTIES_NOT_AVAILABLE",fn:function(){e.showMessageAndSignalOK(r.propComparisonNotAvailable)}}]}["InstAttrDisplay"===this._name?"instProps":"EffectivityDisplay"===this._name?"effectivity":"customEvents"].forEach((function(t){e.subscribeEvent(t.eventName,t.fn.bind(e))})),e._parent()},showMessageAndSignalOK:function(e){this.showMessage(e),this.reportOK()},onAttrFetchFailure:function(){this.showNotBusy()},createViewPanelObject:function(e,n){let i=null;return i=new t(e,this._plugSvcs,n),i},execute:function(e,t){const n=this;n._parent(e,t),n._outputPanel.showResults(e).then((function(e){n.showNotBusy(),n.reportOK(e)}),(function(e){n.reportKO(e)}))}})})),define("DS/DELCompareIntegration/panels/DELWI_INSTANCE_TXT_PANEL",["DS/CustomizableLayout/View","UWA/Core","DS/CompareWidget2/viewComponents/StandardCompareToolbar","DS/DELCompareIntegration/utils/NLSUtil","text!DS/DELCompareIntegration/assets/DELContentPanelSettings.json","css!DS/DELCompareIntegration/assets/DELCompare.css"],(function(e,t,n,i,r){"use strict";let a;return e.extend({init:function(e){a=i.getNLS(),this._parent(),this.buildSkeleton(e)},buildSkeleton:function(e){let n=this;this.elements.container=e,n.createToolBar(),n.elements.delCompareWindow=t.createElement("div",{id:"delinstCompareWindow"}),n.elements.compareTitle=t.createElement("div",{id:"compareInstTitle"}),n.elements.contentPanel=t.createElement("div",{id:"contentInstPanel"}),n.elements.compareTitle.inject(n.elements.delCompareWindow),n.elements.contentPanel.inject(n.elements.delCompareWindow),n.elements.delCompareWindow.inject(n.elements.container)},createToolBar:function(){let e=JSON.parse(r).reqToolbarMenuItem;this.elements.standardToolbar=new n(this.elements.container,this,{navigateDifferences:!1,showCompareLegend:!1,otherMenuItems:e})},destroy:function(){this.elements.container=null,this._buttons=null,this._plugSvcs=null},getLabel:function(){return a.richtextInstance},getName:function(){return"CompareHTML_INSTANCE"},clearView:function(){this._buttons=null,this._plugSvcs=null}})})),define("DS/DELCompareIntegration/plugins/DELWI_INSTANCETXT_COMP_PLUGIN",["UWA/Core","DS/CompareWidget2/plugins/displayPlugin","DS/DELCompareIntegration/panels/DELWI_INSTANCE_TXT_PANEL","DS/UIKIT/Mask","DS/DELCompareIntegration/utils/NLSUtil","DS/DELCompareIntegration/plugins/DELWI_TEXT_PLUGIN","DS/DELCompareIntegration/utils/Either"],(function(e,t,n,i,r,a,o){"use strict";let s,l={visibility:!1,rightLegend:"",leftLegend:""};const c=function(t){return o.of(t).flatMap((t=>e.is(t.riNode)?o.of(t.riNode):o.left())).flatMap((t=>e.is(t.get_dbObj_INST,"function")?o.of(t.get_dbObj_INST()):o.left())).flatMap((t=>e.is(t)?o.of(t):o.left())).flatMap((t=>e.is(t.getAttr,"function")?o.of(t.getAttr("ds6w:label")):o.left())).orElse(null)},u=function(e,t,n){return a.fetchRichText.call(this,e,t,n)},p=function(e,t,n,r){const o=this,c=o._outputPanel.elements;let p={visible:!1,text:""};i.isMasked(c.container)||i.mask(c.container);u.call(this,e,t,n).then((function(e){if(e.reduce(((e,t)=>e&a.isRichTextAbsent.call(this,t.richText)),!0))return l.visibility=!1,a.updateCompareView.call(o,null,p,l),void(i.isMasked(c.container)&&i.unmask(c.container));let t;const n=e.filter((e=>!a.isRichTextAbsent.call(this,e.richText))).map((e=>e.richText));if(1===n.length){const e=n[0],i=r[0];t=e,p.text=i||"Custom Title",p.visible=!!p.text,l.visibility=!1}else t=a.compareHTML.call(o,n[0],n[1]),l.visibility=!0,l.leftLegend=`${s.contentInLeft}`,l.rightLegend=`${s.contentInRight}`,p.visible=!0,p.text=`${s.contentInLeft} v/s ${s.contentInRight}`;a.updateCompareView.call(o,t,p,l),i.isMasked(c.container)&&i.unmask(c.container)}))},f=function(t){const[n,i]=t.data.selectedData;let r=[],o=[],s=[];const l=t.target.makeServiceURL;n.length>0&&(r.push(a.fetchId.call(this,n[0].instObjIDSpec)),o.push(n[0].ObjIDSpec),s.push(c(n[0]))),i.length>0&&(r.push(a.fetchId.call(this,i[0].instObjIDSpec)),o.push(i[0].ObjIDSpec),s.push(c(i[0]))),r=r.filter((t=>e.is(t))),o.length>0&&p.call(this,r,o,l,s)};return t.extend({createViewPanelObject:function(e){if(e)return new n(e);this.reportKO()},execute:function(e,t){s=r.getNLS();this._parent(e,t),this.reportOK()},onEnabled:function(){let e=this;return e._lastViewDisplayMode="none",e._lastWasRootsOnly=!1,e._isEnabled||e.subscribeEvent("NEW_CURRENT_SELECTION_EVENT",f.bind(this)),e._parent()}})})),define("DS/DELCompareIntegration/adapter/DELWI_ADAPTER",["DS/CompareWidget2/plugins/STRUCTURE/expansionAdapters/exAdapter","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/refInst_tree","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/refInst_node","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/dbObj","DS/DELCompareIntegration/utils/Utils","UWA/Core","UWA/Json","DS/DELCompareIntegration/utils/UrlDictionary","DS/DELCompareIntegration/utils/Iconlib","DS/DELCompareIntegration/utils/DbContextUtil"],(function(e,t,n,i,r,a,o,s,l,c){"use strict";const u=r,p=["DELWkiDataCollectPlanReference","DELResourceParameterPlanReference","DELWkiDataCollectChecklistReference"],f=["PLMSpecifyHowToCollectDataCnx","DELResourcePrmPlanGET","DELResourcePrmPlanSET"],E=function e(t,n,i){let o={...n};const s=Object.keys(t);for(const n of s){const s=a.is(i)?`${i}.${n}`:n;if(Array.isArray(t[n]))o[s]=r.generateDelimitedValueFromArr(t[n]);else if("object"==typeof t[n]){const i=e(t[n],{},s);o={...o,...i}}else o[s]=t[n].toString()}return o},T=function(e,t,n){return new Promise(((i,s)=>{const l=e.customerAttributes;r.getTransformedPropertyDataForWI(e,n,t).then((e=>{if(a.is(l)){const r=E(l,{},null);(function(e,t,n){const i=widget.data.lang,r=t(n.serviceName,n.tenantName,"/resources/dsmfg/private/V0/invoke/delAttributeI18NString"),a={listOfKeys:Object.keys(e),language:i};return new Promise(((e,t)=>{u.postData(r,a,n.securityContext).then((t=>{e(o.decode(t))})).catch((e=>{t(e)}))}))})(r,t,n).then((t=>{let n={};if(a.is(t)){Object.keys(r).forEach((e=>{const i=t[e],a=r[e];n[i]=a}))}else n={...r};i({...e,...n})}))}else i(e)})).catch((()=>{s(null)}))}))},m=function(e,t,n,i){e.forEach((e=>{if(a.is(e.id)){const n=t.build_dbObj(e);t.add_dbObj(n)}else a.is(e.path)?t.add_path(e.path):n.errout("Unknown entry in input:"+o.encode(e)+", skipping...")}));return t.buildTree(i)},d=function(e,t){this._dbObjArray=[],this._dbObjByPhysicalID={},this._plugSvcs=t,this._objIDSpec=e,this._pathArrayArray=[],this._typeIconsArrayArray=[]};d.prototype.build_dbObj=function(e){const t=new i,n=e.type,r=f.includes(n)||p.includes(n)?"REF.":"INST.";Object.keys(e).forEach((function(n){const i=e[n];"id"===n?(t.addAttr("physicalid",i),t.addAttr("id",i)):"title"===n||"label"===n?t.addAttr("Title",i):"revision"===n?t.addAttr("ds6wg:revision",i):"concatenatedProperty"===n?t.addAttr("concatenatedProperty",i):(n=r+n,t.addAttr(n,i))}));const a={};return a.smallURL=function(e,t){let n;if(p.includes(e))n=l.getIconURLFromKey(e);else if(f.includes(e))switch(e){case"PLMSpecifyHowToCollectDataCnx":n=l.getIconURLFromKey(e,u.getDCType(t.dcType));break;case"DELResourcePrmPlanGET":case"DELResourcePrmPlanSET":n=l.getIconURLFromKey(e,t.paramType);break;default:n=l.getIconURLFromKey(e)}else n="";return n}(n,e),t.addAttr("typeIcons",a),t},d.prototype.add_dbObj=function(e){let t=!0;return this._dbObjByPhysicalID[e.getAttr("id")]?(this._plugSvcs.errout("new node already in tree (byPhysID)"),t=!1):(this._dbObjByPhysicalID[e.getAttr("id")]=e,this._dbObjArray.push(e)),t},d.prototype.add_path=function(e){a.is(e)&&0!==e.length?e.length%2!=1?this._plugSvcs.errout("Invalid path; contains even number of entries (count *must* be odd)"):this._pathArrayArray.push(e):this._plugSvcs.errout("Attempt to add null or empty path to tree")},d.prototype._getdbObjByPhysicalID=function(e){return this._dbObjByPhysicalID[e]},d.prototype.add_typeIcons=function(e){this._typeIconsArrayArray.push(e)},d.prototype._isTreeNodeRefInstID=function(e,t,n){let i=!1;if(e.getAttr("REF.id")===t){e.getAttr("INST.id")===n&&(i=!0)}return i},d.prototype.buildTree=function(e){const i=this;let r=new t(this._objIDSpec);try{i._pathArrayArray.forEach((function(t){const o=t.length;let s=r.getRoot(),l=null,c=0,u=t[0],p=null,f=null,E=0;if(a.is(s)&&i._isTreeNodeRefInstID(s,u,p)){for(f=s,c=1,E=1;E<o;E+=2){p=t[E],u=t[E+1];let e=s.getChildArray(),n=e.length,r=!1;for(let t=0;t<n;t++){let n=e[t];if(i._isTreeNodeRefInstID(n,u,p)){r=!0,f=n,s=n;break}}if(!1===r)break}l=f,c=E}for(E=c;E<o;){const a=0===E;p=a?null:t[E++],u=t[E++];let o=i._getdbObjByPhysicalID(u),s=null;!1===a&&(s=i._getdbObjByPhysicalID(p));const c=new n(o,s);c.setDBContext(e),a?r.setRoot(c):(l.addChild(c),c.setParent(l)),l=c}}))}catch(e){r=null}return r};return e.singleton({jsClass:"PE2REFINST_TREE",convert:function(e,t,n,i,r,s){let f=new d(e,n);const E=c.getDbContext(e);l.init();let g=[];const S=t.member,_=e.getPhysID(),h=e.getObjType();return new Promise(((t,l)=>{if(p.includes(e.getObjType())){g.push(i);const e=a.is(S)&&Array.isArray(S)?S:[];if(e.length>0)(function(e,t,n,i,r){const a=function(e,t){return"DELResourceParameterPlanReference"===t?e.map((e=>({symbolicCapableResourceID:e.symbolicCapableResourceID,symbolicResourceParamID:e.symbolicResourceParamID,PID:e.id}))):[]}(e,r);if(0===a.length)return Promise.resolve([]);const s=t(n.serviceName,n.tenantName,"/resources/dsmfg/private/V0/invoke/getRPPRowTitleFromRP"),l={pidObjectArr:a,referencesPath:i};return new Promise(((e,t)=>{0===a.length&&e([]),u.postData(s,l,n.securityContext).then((t=>{e(o.decode(t))})).catch((e=>{t(e)}))}))})(e,r,E,s,h).then((i=>{const s=(c=i,e.map((e=>{const t=e.id,n=c[t];if(a.is(n)){const t={...e};return t.title=n,t}return e})));var c;const p=s.map((e=>T(e,r,E)));Promise.allSettled(p).then((e=>{e.forEach(((e,t)=>{if("fulfilled"===e.status){const n=e.value,i=s[t],[r,a]=function(e,t){const n=e.id,i=u.getInstanceObject(t),r=i.physicalID;return[i,u.getRIRPath(t,r,n)]}(i,_);i.concatenatedProperty=o.encode(n),g.push(r,i,a)}}));const i=m(g,f,n,E);f=null,t(i)})).catch((e=>{l(e)}))}));else{const e=u.getRIRPath(_);g.push(e);const i=m(g,f,n,E);f=null,t(i)}}else l(null)}))}})})),define("DS/DELCompareIntegration/plugins/DELWI_STRUCT_FETCH_PLUGIN",["UWA/Core","DS/CompareWidget2/plugins/plugin","DS/DELCompareIntegration/adapter/DELWI_ADAPTER","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/refInstTreeEditor","DS/CompareWidget2/support/typeHierMgr","DS/DELCompareIntegration/utils/Utils","DS/DELCompareIntegration/utils/UrlDictionary","DS/DELCompareIntegration/utils/Either","DS/DELCompareIntegration/utils/NLSUtil"],(function(e,t,n,i,r,a,o,s,l){"use strict";const c=["DELWkiDataCollectPlanReference","DELResourceParameterPlanReference","DELWkiDataCollectChecklistReference"],u=function(e){return e.filter((e=>"rejected"===e.status)).length>0};function p(e,t){var n=[],i=[],r=[],a={};t.forEach((function(e){var t=e.getObjIDSpec().getUniqueID();a[t]||(a[t]=[]),a[t].push(e)})),e.forEach((function(e){var t=e.getUniqueID(),i=a[t].pop();n.push(i),r.push(t)}));return Object.keys(a).forEach((function(e){a[e].forEach((function(e){i.push(e)}))})),{orderedTrees:n,extraTrees:i}}function f(e){const t={};e.forEach((function(e){e.visit_riTreeAndFN((function(e){const n=e.getAttr("REF.ds6w:type"),i=e.getAttr("INST.ds6w:type");return t[n]=!0,null!==i&&(t[i]=!0),!0}))}));const n=Object.keys(t);return r.loadUp(n)}const E=function t(n,i){if(null===n)return i;const r=s.of(n).flatMap((e=>"function"==typeof e.get_dbObj_REF?s.of(e.get_dbObj_REF()):s.left("dbObjRef is missing"))).flatMap((t=>e.is(t)&&"function"==typeof t.getAttrList?s.of(t.getAttrList()):s.left("attribute list is missing"))).flatMap((t=>e.is(t)?s.of(t):s.left("attribute list is null"))).flatMap((t=>e.is(t.physicalid)?s.of(t.physicalid):s.left("physical id is null"))).orElse(null);return r&&i.push(r),t(n.getParent(),i)},T=function(e){return[a.getSecurityContext(e),a.getServiceName(e),a.getTenantName(e)]},m=function(e,t,n){return new Promise(((i,r)=>{const s=a.getPIDs(e),[l,c,p]=T(e);s.isLeft&&r(s.getLeft()),l.isLeft&&r(l.getLeft());const f=l.getRight(),E=s.getRight(),m=o.fetchURLObject(t,"GET","fetchAggregatedItems"),d=o.formFinalUrl(n,p,c),g=E.map((e=>{const t=d(m,e);t.isLeft&&r(t.getLeft());const n=t.getRight();return a.fetchData(n,f)}));Promise.all(g).then((e=>{if(u(e))throw new Error("unable to fetch aggreagted Rows");const t=e.map((e=>JSON.parse(e)));i(t)})).catch((e=>{r(e)}))}))},d=function(t){const r=this,d=function(t){let n=[];const i=s.of(t).flatMap((t=>e.is(t.data)?s.of(t.data):s.left("data is not defined"))).flatMap((t=>e.is(t.selectedData)?s.of(t.selectedData):s.left("selectedData is not defined")));if(i.isLeft)return i;const[r,a]=i.getRight();return r.length>0&&n.push(r[0].ObjIDSpec),a.length>0&&n.push(a[0].ObjIDSpec),s.of(n)}(t),g=r._plugSvcs;d.isLeft&&r.reportKO(d.getLeft()),e.is(g)&&e.is(g.clearCurrentlySelectedRowIDs,"function")&&g.clearCurrentlySelectedRowIDs("WI_STRUCT_VIEW");const S=d.getRight(),_=a.getObjectType(S),h=t.target.makeServiceURL;_.isLeft&&r.reportKO(_.getLeft()),r.postEvent("LOADING_COMPARE",{id:"attrFetch"});const C=_.getRight();!function(e,t){const[n,i,r]=T(e);if(n.isLeft)return;const a=n.getRight();l.getUnitsNLS(a,i,r,t)}(S,h),2===S.length&&c.includes(C)?m(S,C,h).then((l=>{(function(e,t,n){return new Promise(((i,r)=>{const[s,l,c]=T(e),p=a.getPIDs(e);p.isLeft&&r(p.getLeft()),s.isLeft&&r(s.getLeft());const f=s.getRight(),E=p.getRight(),m=o.fetchURLObject(t,"GET","fetchAttributes"),d=o.formFinalUrl(n,c,l),g=E.map((e=>{const t=d(m,e);t.isLeft&&r(t.getLeft());const n=t.getRight();return a.fetchData(n,f)}));Promise.allSettled(g).then((e=>{if(u(e))throw new Error("unable to fetch attributes for parent objects");const t=e.map((e=>JSON.parse(e.value)));i(t)})).catch((e=>{r(e)}))}))})(S,C,h).then((a=>{let o=[],c=null;if("DELResourceParameterPlanReference"===C){const n=function(t){const n=s.of(t).flatMap((t=>e.is(t.data)?s.of(t.data):s.left("data is not defined"))).flatMap((t=>e.is(t.selectedData)?s.of(t.selectedData):s.left("selectedData is not defined")));if(n.isLeft)return n;const[i,r]=n.getRight(),a=[];return i.length>0&&a.push(i[0].riNode),r.length>0&&a.push(r[0].riNode),s.of(a)}(t);if(n.isRight){c=n.getRight().map((e=>E(e,[])))}}for(let t=0;t<2;t++){const i=e.is(c)&&e.is(c[t])?c[t]:null;o.push(n.convert(S[t],l[t],g,a[t].member[0],h,i))}Promise.allSettled(o).then((e=>{u(e)&&(r.postEvent("DATAPLAN_STRUCTURE_NOT_AVAILABLE",{id:"attrFetch"}),r.reportKO("Something went wrong"));const t=e.map((e=>e.value)),n=p(S,t);n.orderedTrees.forEach((function(e){var t=e.getEditCommands();null!==t&&i.applyCommands(e,t,n.extraTrees,g,!0)})),f(n.orderedTrees).then((function(e){r.reportOK(n.orderedTrees)}),(function(e){g.warnout("failed to load type hierarchies:: "+e),g.warnout("continuing..."),r.reportKO(n.orderedTrees)}))}))})).catch((function(e){r.reportKO(e),r.postEvent("DATAPLAN_STRUCTURE_FAILED",{id:"attrFetch"})}))})).catch((function(e){r.reportKO(e),r.postEvent("DATAPLAN_STRUCTURE_FAILED",{id:"attrFetch"})})):r.postEvent("DATAPLAN_STRUCTURE_NOT_AVAILABLE",{id:"attrFetch"})};return t.extend({init:function(e,t,n,i){this._parent(e,t,n,i)},execute:function(e,t){let r=this;const o=a.getObjectType(e);o.isLeft&&r.postEvent("DATAPLAN_STRUCTURE_NOT_AVAILABLE",{id:"attrFetch"});const s=o.getRight();c.includes(s)?(r._parent(e,t),e.length>0?m(e).then((t=>{a.getParentRefObject(e).then((a=>{const o=t;let s=[];for(let t=0;t<2;t++)s.push(n.convertV2(e[t],o[t],r._plugSvcs,a[t].member[0]));Promise.allSettled(s).then((t=>{if(u(t))throw new Error("Unable to generate the refInstTrees");const n=t.map((e=>e.value)),a=p(e,n);a.orderedTrees.forEach((function(e){var t=e.getEditCommands();null!==t&&i.applyCommands(e,t,a.extraTrees,r._plugSvcs,!0)})),f(a.orderedTrees).then((function(e){r.reportOK(a.orderedTrees)}),(function(e){r._plugSvcs.warnout("failed to load type hierarchies:: "+e),r._plugSvcs.warnout("continuing..."),r.reportOK(a.orderedTrees)}))}))}))})).catch((function(e){r.reportKO(e)})):r.reportOK(e)):r.postEvent("DATAPLAN_STRUCTURE_NOT_AVAILABLE",{id:"attrFetch"})},onEnabled:function(){this.subscribeEvent("NEW_CURRENT_SELECTION_EVENT",d.bind(this))}})}));