define("DS/DELPPWComponentsFactory/AppCore",["UWA/Core","UWA/Class","DS/DELModularWebAppCore/Core","text!DS/DELPPWComponentsFactory/assets/json/AuthorizedEvents.json","text!DS/DELPPWComponentsFactory/assets/json/XMLMapping.json","text!DS/DELPPWComponentsFactory/assets/json/ModelServiceOptions.json"],(function(e,n,t,i,o,a){"use strict";var r=null,s={},l="CREATECMDMOD",u={CreateCmdModule:"DS/DELPPWComponentsFactory/CreateCmdModule"},c={UXFactoryBehavior:"DS/DELPPWViewBehaviors/UXFactoryBehavior/UXFactoryBehavior",ResourceBehavior:"DS/DELPPWModelBehaviors/ResourceBehavior",ModelBehavior:"DS/DELPPWModelBehaviors/ModelBehavior"},d={AttributePlugin:"DS/DELPPWModelPlugins/AttributePlugin",ChangeActionPlugin:"DS/DELPPWModelPlugins/ChangeActionPlugin",DatabasePlugin:"DS/DELPPWModelPlugins/DatabasePlugin/DatabasePlugin",DicoPlugin:"DS/DELPPWModelPlugins/DicoPlugin",ResourcePlugin:"DS/DELPPWModelPlugins/ResourcePlugin/ResourcePlugin",WebServicePlugin:"DS/DELPPWModelPlugins/ResourcePlugin/WebServicePlugin",PlatformPlugin:"DS/DELPPWViewPlugins/TreeViewPlugin/PlatformPlugin",SelectionPlugin:"DS/DELPPWViewPlugins/SelectionPlugin/SelectionPlugin",UXComponentsPlugin:"DS/DELPPWViewPlugins/UXComponentsPlugin/UXComponentsPlugin",BIPlugin:"DS/DELPPWItemModelPlugins/BI/BIPlugin",BIMakeBuyPlugin:"DS/DELPPWItemModelPlugins/BI/BIMakeBuyPlugin",ProductImplementPlugin:"DS/DELPPWItemModelPlugins/ImplementPlugin/ProductImplementPlugin",ProcessImplementPlugin:"DS/DELPPWProcessModelPlugins/ImplementPlugin/ProcessImplementPlugin"},P={CommandsService:"DS/DELPPWFacetsApplicationServices/Commands/CommandsService",ConfigService:"DS/DELPPWServices/ConfigService/ConfigService",PreferenceService:"DS/DELPPWServices/PreferenceService/PreferenceService",LoggerService:"DS/DELPPWServices/LoggerService/LoggerService",ModelService:"DS/DELPPWServices/ModelService"};return r=n.singleton({_core:null,initCore:function(n){return new Promise((function(g,D){r._core=new t({appId:"DELTST_AP",widgetTrigram:"TST",immersiveFrame:n,isFacet:!0,cloudServiceName:"3dmfgitemsmgt",unAuthorizedTypes:["PRODUCT","PARTS"],appContext:{widget:{getId:function(){return widget.id},data:{appId:"DELTST_AP"}}},require:{module:u,behavior:c,plugin:d,service:P},resource:{iconCatalogPath:"DS/DELPPWFacets/assets/icons/catalog.json",commandsAvailabilityPath:"DS/DELPPWFacets/assets/json/CommandsAvailability.json",xmlConfiguration:e.Json.decode(o),selectionMappingPath:"DS/DELPPWFacets/assets/json/SelectionMapping.json",nlsFilePath:"DS/DELMFNApp/assets/nls/NLS",insertFormAttributeXML:"insertFormAttributeXML",indexMappingXML:"indexMappingXML",modelRelationsXML:"modelRelationsXML",modelCustomRelationsXML:"modelCustomRelationsXML",ItemOOTBFiltering:"ItemOOTBFiltering"},Mediator:{authorizedEvents:e.Json.decode(i)},ModelService:e.Json.decode(a),PreferenceService:{appConfigPath:"DS/DELPPWComponentsFactory/AppConfig"}}),r._core.useServices(["LoggerService","ConfigService","PreferenceService","ModelService","CommandsService"],(function(){r._core.createModule("CreateCmdModule",l,s,(function(){r._core.start(l,{insertFormAttributeXML:"insertFormAttributeXML"},(function(){var n=r._core.getInstance()[l];e.is(n)&&e.is(n.instance)?r._core.waitForBackgroundTasks().then((()=>{g()})):D()}))}))}))}))},getCore:function(){return r._core}})})),define("DS/DELPPWComponentsFactory/CreateCmdModule",["UWA/Core","DS/DELPPWInsertCmdModule/InsertUI"],(function(e,n){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","ResourceBehavior"],creator:function(t,i,o,a){var r,s,l=null;return s=function(n,i){var a=i||{},r=e.is(a.fatherPID,"string")&&a.fatherPID.length>0?a.fatherPID:null;a.onComplete=function(n,i,o){e.is(o)&&(o.message=n,o.creationStatus=!0,t.debug(o),t.notify("objectCreation",o))},a.onFailure=function(n,i){e.is(i)&&(i.message=n,i.creationStatus=!1,t.debug(i),t.notify("objectCreation",i))},t.debug((e.is(a.transactionUUID,"string")&&a.transactionUUID.length,a.transactionUUID)),o.createRefOrInst(n,r,a)},r=function(n){var t=n||{},i=e.is(t.referenceType,"string")&&t.referenceType.length>0?t.referenceType:null,o=!e.is(t.showDialog,"boolean")||t.showDialog,a=e.is(t.fatherPID,"string")&&t.fatherPID.length>0?t.fatherPID:null,r=e.is(t.transactionUUID,"string")&&t.transactionUUID.length>0?t.transactionUUID:null;l.isActive()&&l.destroyUI(),l.createDialog(i,s,o,null,null,{fatherPID:a,transactionUUID:r})},{listenTo:function(){return{InsertCmd:r}},onStart:function(e,r){l=new n(t,i,a,o),r()},onStop:function(){e.is(l)&&l.isActive()&&l.destroyUI(),l=null}}}}})),define("DS/DELPPWComponentsFactory/AppConfig",[],(function(){"use strict";return{preferences:[{name:"showDialog",label:"Preferences.ShowDialog",defaultValue:"true",type:"hidden"},{name:"navigateOnIndexedDB",type:"hidden",label:"Preferences.NavOnIndexedDB",defaultValue:"false"},{name:"oneDelmiaAggregationMode",label:"Preferences.oneDelmiaAggregationRules",defaultValue:"true",type:"hidden"},{name:"isXRevisionActivated",type:"hidden",label:"Preferences.isXRevisionActivated",defaultValue:!1},{name:"separator",label:"Preferences.Separator",defaultValue:"|",type:"hidden"},{name:"navigateOnIndex",options:[{value:"Database",label:"Database"},{value:"Index",label:"Index"},{value:"IndexRelationsOnDemand",label:"Index - Relations On Demand"}],label:"Preferences.NavOnIndex",defaultValue:"Index",type:"hidden"},{name:"organization",label:"Preferences.Org",options:[],defaultValue:"",onchange:"OrganizationUpdated",type:"hidden"},{name:"collaborativeSpace",label:"Preferences.CollabSpace",options:[],defaultValue:"",onchange:"CollabSpaceUpdated",type:"hidden"},{name:"role",label:"Preferences.Role",options:[],defaultValue:"",onchange:"RoleUpdated",type:"hidden"},{name:"custoParametersSet",label:"Preferences.CustoParametersSet",options:[],defaultValue:"",type:"hidden"},{name:"timeout",label:"Preferences.ServerTimeout",defaultValue:"600",onchange:"TimeoutUpdated",type:"hidden"},{name:"systemsViewColumns",type:"hidden",defaultValue:[]},{name:"consumedItemsColumns",type:"hidden",defaultValue:[]},{name:"capableResourcesColumns",type:"hidden",defaultValue:[]},{name:"forceDBModePreferences",type:"hidden",defaultValue:"false"},{name:"isManufacturingItemsVisible",type:"hidden",defaultValue:!0},{name:"isProductsPartsVisible",type:"hidden",defaultValue:!0},{name:"isMFNToggleAuxiliaryViewVisible",type:"hidden",defaultValue:!1},{name:"refreshBIOnAuthoring",type:"hidden",defaultValue:!0}]}})),define("DS/DELPPWComponentsFactory/ComponentsFactory",["UWA/Core","UWA/Utils","DS/DELPPWComponentsFactory/AppCore","css!DS/DELPPWComponentsFactory/DELPPWComponentsFactory.css"],(function(e,n,t){"use strict";return{init:function(n){var i=Promise.resolve();return e.is(t.getCore())||(i=t.initCore(n)),i},run:function(i,o){return new Promise((function(a,r){var s=t.getCore(),l=null,u=[],c=0,d=0,P=n.getUUID(),g=o||{},D=function(){var e=u.some((function(e){return e.creationStatus}));s.removeExternalListener(l),e?a(u):r(u)};if(e.is(s)){if("CreateObject"===i)g.transactionUUID=P,l=s.addExternalListener("objectCreation",(function(n){e.is(n)&&e.is(P,"string")&&P.length>0&&n.transactionUUID===P&&(c++,u.push(n),c===d&&D())})),e.is(g.showDialog)&&!g.showDialog?d=1:s.addExternalListenerOnce("objectCreationUIClosed",(function(n){e.is(n)&&e.is(P,"string")&&P.length>0&&n.transactionUUID===P&&(d=n.requestedCreation,c===d&&(0===d&&u.push({transactionUUID:n.transactionUUID,creationStatus:!1,referenceAttrs:null,instanceAttrs:null,message:"Creation dialog box has been closed by user without creation request"}),D()))})),s.getMediator().notify("InsertCmd",g)}else r("No App Core retrieved")}))}}}));