define("DS/CfgDictionary/CfgDictionaryMapperUtils",["UWA/Core","DS/CfgDictionary/CfgDictionaryTypeEnum"],(function(e,t){"use strict";var i={},r=function(e,i,r){"reference"===r.kind?e[r.rel_lid]={type:t.OPTION,parent:i,name:r.attributes._name,title:r.attributes._title,description:r.attributes._description,image:r.attributes._image,seqNumber:parseInt(r.attributes._sequenceNumber),default:r.attributes._default,kind:"reference"}:r.kind},a=function(e,i,r,a,n){var m=0;if("reference"===r.kind)for(e[r.lid]={type:t.VARIANT,parent:i,name:r.attributes._name,image:r.attributes._image,description:r.attributes._description,mandatory:"Mandatory"===a||"Primary"===a,seqNumber:n,values:[],kind:"reference",title:r.attributes._title,commercial:r.attributes._commercial},m=0;m<r.values.member.length;m+=1)e[r.lid].values.push(r.values.member[m].rel_lid),e[r.values.member[m].rel_lid]={type:t.VALUE,parent:r.lid,name:r.values.member[m].attributes._name,description:r.values.member[m].attributes._description,image:r.values.member[m].attributes._image,kind:"reference",seqNumber:parseInt(r.values.member[m].attributes._sequenceNumber),title:r.values.member[m].attributes._title,default:r.values.member[m].attributes._default},e[r.values.member[m].id]={type:t.VALUE,parent:r.lid,name:r.values.member[m].attributes._name,image:r.values.member[m].attributes._image,description:r.values.member[m].attributes._description,kind:"reference",seqNumber:parseInt(r.values.member[m].attributes._sequenceNumber),title:r.values.member[m].attributes._title,default:r.values.member[m].attributes._default}},n=function(e,i,m){var s=0;e[m.lid]={parent:i,name:m.attributes._name,image:m.attributes._image,type:t.VARIABILITY_GROUP,seqNumber:parseInt(m.attributes._sequenceNumber),content:[],title:m.attributes._title,commercial:m.attributes._commercial};var l=m.variants?m.variants.member:[];for(s=0;s<l.length;s+=1)a(e,m.lid,l[s]),e[m.lid].content.push(l[s].lid);var u=m.options?m.options.member:[];for(s=0;s<u.length;s+=1)r(e,m.lid,u[s]),u[s].rel_lid&&e[m.lid].content.push(u[s].rel_lid);var o=m.variabilityGroups?m.variabilityGroups.member:[];for(s=0;s<o.length;s+=1)n(e,m.lid,o[s]),e[m.lid].content.push(o[s].lid)},m=function(e,i){"instance"===i.kind&&(e[i.lid]={id:i.id,name:i.attributes._name,image:i.attributes._image,type:t.PARAMETER,min:i.attributes._minValue,max:i.attributes._maxValue,kind:"instance",description:i.attributes._description,title:i.attributes._title,commercial:i.attributes._commercial})};return i.dicoMinifiedV3ToMap=function(t){var i={},s=void 0,l=void 0;if(null!=t){if(t.member)return this.formatDicoFromGetRuleCriteria(t);if("3.0"!==t._version)return null;var u,o,b=0,p=t.portfolioClasses?t.portfolioClasses.member[0].portfolioComponents.member[0]:t,c=p.options?p.options.member:[],d=p.variants?p.variants.member:[],f=p.variabilityGroups?p.variabilityGroups.member:[],_=p.parameters?p.parameters.member:[],v=p.rules&&p.rules.member?p.rules.member:[];for(b=0;b<c.length;b+=1)r(i,null,c[b]);for(b=0;b<d.length;b+=1)"instance"===d[b].kind&&d[b].attributes&&(s=d[b].attributes._usage,l=parseInt(d[b].attributes._sequenceNumber)),a(i,null,d[b],s,l);for(b=0;b<f.length;b+=1)n(i,null,f[b]);for(b=0;b<v.length;b+=1)u=i,o=v[b],u[o.id]={name:o.attributes._title,type:o.attributes._type};for(b=0;b<_.length;b++)m(i,_[b]);return i}e.log("CfgDictionaryMapperUtils.dicoMinifiedV3ToMap : The dictionary wasn't define")},i.formatDicoFromGetRuleCriteria=function(t){var i={};if(t.member){for(var r=0;r<t.member.length;r++){var a=t.member[r];switch(a.type){case"Variant":i[a.busLogicalId]={name:a.name,title:a.title,type:a.type,parent:a.parent,image:a.image,values:[]};break;case"Variant Value":i[a.relLogicalId]={name:a.name,title:a.title,type:a.type,parent:a.parent,image:a.image},i[a.parent]?i[a.parent].values.push(a.relLogicalId):i[a.parent]={values:[a.relLogicalId]};break;case"Option Group":case"Option":i[a.relLogicalId]={name:a.name,title:a.title,type:a.type,parent:a.parent,image:a.image};break;default:e.log("Issue CfgDictionaryMapperUtils.formatDicoFromGetRuleCriteria : Variability no type","error")}}return i}return null},i}));