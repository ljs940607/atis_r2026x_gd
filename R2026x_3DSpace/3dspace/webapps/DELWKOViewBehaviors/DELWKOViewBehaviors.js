define("DS/DELWKOViewBehaviors/DELWKOTreeContextualMenu",["UWA/Core","DS/DELWKOModelServices/DELWKOCollectionUtils"],(function(e,t){"use strict";return function(n,i,o,a,l,r,s,d,u){var c,g,p,f,m,h,b=i.getComponent("WUXCommandsManager"),y=["Type","Reference","Column"],C=new Set(["CreateAssemblyAndScopeAltSubst","CreateProvideAndScopeAltSubst","CreateMaterialAndScopeAltSubst","CreateKitAndScopeAltSubst"]),I=new Set(["CreateAssemblyAndResultingProductAltSubst","CreateProvideAndResultingProductAltSubst","CreateMaterialAndResultingProductAltSubst","CreateKitAndResultingProductAltSubst"]);return f=function(t,i){var o,l,r,d,u,c,g,p,f,m=[],y=function(){return e.is(i.node)?i.selectedNodes[0].getNodeDepth()+1:0};switch(i=i||{},d=n.getAppContext(),t){case"SizeColumnToFit":i.handlers.onSizeColumnToFit(i.virtualColumnID);break;case"SizeAllColumnsToFit":i.handlers.onSizeAllColumnsToFit();break;case"SortAToZ":n.getBehavior("WUXNodeModelBehavior").setSortOptions(i.virtualColumnID,"asc"),i.handlers.onSortColumnContentAsc(i.virtualColumnID);break;case"SortZToA":n.getBehavior("WUXNodeModelBehavior").setSortOptions(i.virtualColumnID,"desc"),i.handlers.onSortColumnContentDesc(i.virtualColumnID);break;case"ClearSort":n.getBehavior("WUXNodeModelBehavior"),i.handlers.onClearSort();break;case"HideColumn":i.handlers.onHideColumn(i.virtualColumnID);break;case"PinColumn":i.handlers.onPinColumn(i.virtualColumnID);break;case"UnpinColumn":i.handlers.onUnpinColumn(i.virtualColumnID);break;case"EditInstruction":n.notify("editWorkInstruction",i.infos.objectToBeModified);break;case"EditDataCollectRow":n.notify("editDataCollectRow",i.infos.objectToBeModified);break;case"DeleteDataCollectRow":n.notify("deleteDataCollectRow");break;case"Type":case"Reference":h=s.getGroupingAdditonalColumns(),l=y(),i.handlers.onGroupRows(h[t],l);break;case"Column":l=y(),i.handlers.onGroupRows(i.column.dataIndex,l);break;case"ClearGroupBy":i.handlers.onRemoveGrouping();break;case"GroupByCriteria":i.column.label?r="type":i.column.dataIndex.contains(".")&&(r=i.column.dataIndex.split(".")[0]),i.handlers.onGroupByCriteria(r);break;case"UngroupByCriteria":i.column.label?r="type":i.column.dataIndex.contains(".")&&(r=i.column.dataIndex.split(".")[0]),i.handlers.onUngroupByCriteria(r);break;case"Quantity":u=i.getColumnIDFromDataIndex("V_ContQuantity.instance"),c=i.getColumnOrGroup(u),i.infos=a.getNodeAndColumnInfos(i.node,c),g=e.clone(i.infos.attributeInfo),e.is(g,"object")&&e.owns(g,"Protection")&&(g.Protection=1,i.infos.attributeInfo=g),i.selectedNodes.forEach((function(e){m.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})})),n.notify(t,[m,i.infos]);break;case"LoadIn3DViewer":case"ReframeIn3DViewer":f={nodeId:(p=i.selectedNodes[0]).getInstancePID()||p.getReferencePID(),absPath:p.getAbsolutePath()},n.notify(t,f);break;case"CreatePartialScopeOnHeaderOperation":n.notify("CreatePartialScopeLinkOnHeaderOperation",[i.node.getAbsolutePath()]);break;case"FilterColumn":var C=n.getBehavior("TreeListViewBehavior").getDataGridView();n.notify("FilterColumn",[C,i.column]);break;case"ResetFilterColumn":C=n.getBehavior("TreeListViewBehavior").getDataGridView();n.notify("ResetFilterColumn",[C,i.column]);break;default:o=b.getCommand(t,d),e.is(o)?(o.beginExecute(i),o.execute({sourceModuleId:n.getId()}),o.endExecute()):(o=b.getCommandCheckHeader(t,d),e.is(o)&&!1===o.getState()?(o.options.node={referencePID:i.node.getReferencePID(),instancePID:i.node.getInstancePID(),absPath:i.node.getAbsolutePath()},o.toggleState()):(i.selectedNodes.forEach((function(e){m.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})})),n.notify(t,[m,i.infos])))}},c=function(t,n){const i=n.options,o=i.restrictLinkCreation,a=i.mfgReferenceId,l=!!e.is(i.isContextMfgRoot,"boolean")&&i.isContextMfgRoot;let r="enabled";return"AddMfgItemToMBOMAltSub"===t?e.is(a)||(r="disabled"):"ReplaceByAlternate"===t?e.is(a)&&!l||(r="disabled"):e.is(o,"string")&&("ResultingProduct"===o?C.has(t)&&(r="disabled"):I.has(t)&&(r="disabled")),r},function(){return{type:"SeparatorItem"}},m=function(e){return{type:"TitleItem",title:o.getNLSValue(e,null,"ContextMenu.Header","Title")}},g=function(t,i,l,g){var p,m,v,D,T,V,w,S,M,L,E,A,x=!1;if(m="enabled",A=n.getAppContext(),e.is(t,"string"))T=t;else{if("object"!=typeof t)return void n.debug("Nodes should be an array of string or objects");e.is(t.text)&&e.is(t.command)&&(T=t.text,t=t.command)}if(v=o.getNLSValue(T,null,l,g),e.is(t))if("Refresh"===t&&s.isGroupingExist())m="disabled";else if("EditAttribute"===t)(a.isReadOnly(i.infos.attributeInfo,i.infos.attributeDef)||!a.doesAttributeExist(i.infos.objectToBeModified,i.infos.dataIndex)&&!a.isAttrApplicableForType(i.infos.objectToBeModified,i.infos.dataIndex)||d.isReferencesHasReadOnlyType(i.infos.objectToBeModified)||"isCoProduct"===i.column.displayType)&&(m="disabled");else if("HideIn3D"===t||"ShowIn3D"===t)V=i.selectedNodes,"HideIn3D"===t?(w=V.every((function(e){return!1===e.options.hideShow3D})),m=w?"disabled":"enabled"):"ShowIn3D"===t&&(S=V.every((function(e){return!0===e.options.hideShow3D})),m=S?"disabled":"enabled");else if("EditInstruction"===t){if(1!==(V=i.selectedNodes).length||!r.isWorkInstruction(i.infos.objectToBeModified))return;M="url("+o.getIconURLFromKey(i.infos.objectToBeModified.get("type"))+")",m="enabled"}else if("CreatePartialScopeOnHeaderOperation"===t){if(M="url("+o.getIconURLFromKey("PartialProcessImplementLink")+")",m="disabled",1===(V=i.selectedNodes).length&&!V[0].isRoot()){let t,n,i,o,a,l;if(t=V[0].getReferenceType(),n=d.isAKindOf(t,"DELLmiHeaderOperationReference"),n&&(a=u.findInstanceWhoseParentIsScoped(V[0].getAbsolutePath()),l=e.is(a,"object")?a.scopeLinks:[],l.length>0)){let e=l[0].get("from"),t=r.getReference(e);d.isAKindOf(t,"DELLmiWorkPlanSystemReference")&&(i=u.getImplLinksOfImplementing(V[0].getAbsolutePath()),o=i.length>0,m=o?"disabled":"enabled")}}}else if("EditDataCollectRow"===t)m=1===(V=i.selectedNodes).length?"enabled":"disabled";else if("DeleteDataCollectRow"===t)m="enabled";else if(y.indexOf(t)>=0){if(h=s.getGroupingAdditonalColumns(),"Column"===t&&e.is(i.column)){if(!i.column.groupableFlag)return;v=i.column.text,E=i.column.dataIndex}else E=h[t];(L=s.getColumnsForGrouping(n.getId())).length>0&&L.includes(E)&&(x=!0),m=i.selectedNodes.length<=1&&!x?"enabled":"disabled",M="url("+o.getIconURLFromKey("GroupBy")+")"}else if("ClearGroupBy"===t)L=s.getColumnsForGrouping(n.getId()),v=o.getNLSValue(t,null,l,g),M="url("+o.getIconURLFromKey("ClearGroupBy")+")",m=L.length>0?"enabled":"disabled";else if("SetSequencingMode"===t)1===i.selectedNodes.length&&(d.isAKindOf(i.infos.objectToBeModified,"DELLmiGeneralSystemReference")||d.isAKindOf(i.infos.objectToBeModified,"DELLmiWorkPlanSystemReference")||d.isAKindOf(i.infos.objectToBeModified,"DELLmiQtyControlProcessReference")||d.isAKindOf(i.infos.objectToBeModified,"DELLmiTransformationSystemReference")||d.isAKindOf(i.infos.objectToBeModified,"DELLmiTransferSystemReference")||d.isAKindOf(i.infos.objectToBeModified,"SourceSystem")||d.isAKindOf(i.infos.objectToBeModified,"SinkSystem")||d.isAKindOf(i.infos.objectToBeModified,"BufferSystem")||d.isAKindOf(i.infos.objectToBeModified,"DELLmiHeaderOperationReference")||d.isAKindOf(i.infos.objectToBeModified,"DELLmiGeneralOperationReference"))||(m="disabled");else if(C.has(t)||I.has(t)||"AddMfgItemToMBOMAltSub"===t||"ReplaceByAlternate"===t)m=1===i.selectedNodes.length?c(t,i.selectedNodes[0]):"disabled";else if("Quantity"===t){if(1!==(V=i.selectedNodes).length||V[0].isRoot()||"ProcessContinuousProvide"!==i.node.object.type)return;m="enabled",M="url("+o.getIconURLFromKey("EditQuantity")+")"}else if("LoadIn3DViewer"===t){const e=i.selectedNodes[0];m=u.isScoped(e.getReferencePID())?"enabled":"disabled"}else p=b.getCommand(t,A),e.is(p)||(p=b.getCommandCheckHeader(t,A)),e.is(p)&&(m=p.isEnabled()?"enabled":"disabled");return D=f.bind(null,t,i),{icon:e.is(M)?M:"url("+o.getIconURLFromKey(t)+")",type:"PushItem",title:v,label:v,sensitivity:m,state:m,callback:D,action:{callback:D}}},p=function(e){var t=!0;return["ExploreInWebApp"].indexOf(e)>-1&&l.isCloud()&&(t=!1),t},{getDefaultContextualMenu:function(){return["showAuxiliaryView","ProcessView","ItemsView","ResourcesView"]},buildContextualMenu:function(i,a,r,s){var d=[];return r=r||"Cmd",s=s||"Title",e.is(i,"array")?(i.forEach((function(i){var u,c,f,h=[];if(e.is(i,"object")&&e.is(i.groupName)){if("DocumentsCmds"===i.groupName&&!l.displayDocumentManagementCmds())return;if("GroupBy"===i.groupName&&e.is(a.params)&&(f={insertRow:!1,expandCollapse:!1,pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!1,filter:!0},u=a.params.collectionView.buildDefaultContextualMenu(a.params,f),e.is(u[0])&&d.push(u[0])),"3DViewer"===i.groupName&&1!==a.selectedNodes.length)return;if(!Array.isArray(i.commands))return n.debug('"commands" in a group should be an array'),null;i.commands.forEach((function(t){var n;n="SEPARATOR"===t?{type:"SeparatorItem"}:g(t,a,r,s),e.is(n)&&h.push(n)})),c=o.getNLSValue(i.groupName,null,r,s),u={icon:"url("+o.getIconURLFromKey(i.groupName)+")",type:"PushItem",title:c,label:c,state:"enabled",submenu:h},d.push(u)}else if(e.is(i,"object")&&e.is(i.headerName))d.push(m(i.headerName));else if(e.is(i,"string")&&"SEPARATOR"===i)d.push({type:"SeparatorItem"});else if(e.is(i,"string")&&"ApplyConfiguration"===i){var b=t.getReferenceModel(a.node._referencePID);if(e.is(b)){var y=t.getImpactedConnections(b.get("PID"),void 0,{});if(e.is(y)){var C=void 0;y.forEach((e=>{"DELIsGeneratedFromProcessFilteredBy"===e.get("type")&&(C=e)})),e.is(C)&&(u=g(i,a,r,s),e.is(u)&&d.push(u))}}}else p(i)&&(u=g(i,a,r,s),e.is(u)&&d.push(u))}),this),d):(n.debug("Nodes should be an array"),null)},onContextMenuCallback:function(e,t){return f(e,t)}}}})),define("DS/DELWKOViewBehaviors/DELWKOOrderQuantityColumnManager",["UWA/Core","DS/Utilities/Utils","DS/DELPPWResourceServices_FD02/ResourceUtils"],(function(e,t,n){"use strict";return function(i,o,a,l,r,s){var d=i.getBehavior("ModelBehavior"),u=function(t,n){var i,a,r,s,d={cellValue:"",isAttrExists:!1,unit:""},u=l.getAttributeInfoFromColumn(t);if(e.is(t.dicoType,"array")&&t.dicoType.length>0)for(r=t.dicoType.length,i=0;i<r;i++)if(a=t.dicoType[i]+"."+t.dataIndex,e.is(n.nodeModel)&&Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a)){s=o.getAttributeInfo(t.dicoType[i]+"."+u.dataIndex),e.is(s)&&(d.cellValue=n.nodeModel.options.grid[a]),d.isAttrExists=!0;break}return d};return{getMultiTypeCellValue:function(e){var t=this.getColumnOrGroup(e.columnID);return u(t,e).cellValue},getMultiTypeCellEditableState:function(e){var t,n;return s.areModuleColumnsImmutable(i.getId())?n=!1:(t=this.getColumnOrGroup(e.columnID),n=u(t,e).isAttrExists),n},getCellSemantics:function(t){if(!e.is(t.nodeModel))return{units:void 0};var i=function(e){return l.getFormattedValue(e)},a=void 0,r=this.getColumnOrGroup(t.columnID),s=l.getAttributeInfoFromColumn(r);if(e.is(r.dicoType,"array")&&r.dicoType.length>0)for(var u=r.dicoType.length,c=0;c<u;c++){var g=r.dicoType[c]+"."+r.dataIndex;if(e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options.grid,g)){a=o.getAttributeInfo(r.dicoType[c]+"."+s.dataIndex);if(e.is(a)){var p=a.Magnitude,f=void 0,m=d.getReferenceModel(t.nodeModel.getReferencePID());return e.is(m)&&(f=m.unit),{units:e.is(p)&&""!=p?n.getNLSForUnit(p,f):void 0,viewOptions:{customFormatter:i}}}}}return{units:void 0}},getCellTypeRepresentation:function(t){var n;if(!e.is(t))return"string";if(t.isHeader||!e.is(t.nodeModel))return"string";if(!e.is(t.nodeModel))return"float";var i=d.getReferenceModel(t.nodeModel.getReferencePID());if(e.is(i)){var o=Object.keys(i._attributes);if(e.is(o)){var a=t.dataIndex;a=a.substr(0,a.indexOf(".")),o.forEach((e=>{if(e.includes(a))switch(e){case"DELLmiWOQuantity_Each.V_OrderQuantity":case"DELLmiQtyToBeProducedPerTime_Each.V_QuantityToBeProducedPerTime":n="integer";break;default:n="float"}}))}}return n},setCellValue:t.debounce((function(t,n){var o,a,s=this;if(a=this.getColumnOrGroup(t.columnID),o=l.getNodeAndColumnInfos(t.nodeModel,a),l.isMultiValuated(o.attributeInfo),!l.doesAttributeExist(o.objectToBeModified,o.dataIndex)&&!l.isAttrApplicableForType(o.objectToBeModified,o.dataIndex))return i.warn(r.getNLSValue("TableView.AvailabilityFailure",{key:o.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(l.isInteger(o.attributeInfo)){var u=new RegExp("^[1-9][0-9]*$");if(!n.toString().test(u))return void i.warn(r.getNLSValue("TableView.InvalidIntegerValue",{attr:o.attributeNLSTitle,value:n}));n=Number.parseInt(n)}else if(l.isDouble(o.attributeInfo)){u=new RegExp("^([+]?([1-9][0-9]*)|(0))([.,][0-9]+)?");if(!n.toString().test(u))return void i.warn(r.getNLSValue("TableView.InvalidIntegerValue",{attr:o.attributeNLSTitle,value:n}));n=Number.parseFloat(n)}e.is(d)&&d.updateModelAttribute(o.objectToBeModified.id,o,n,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),s._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})}),100,!0)}}})),define("DS/DELWKOViewBehaviors/DELWKORefreshBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","DocumentPlugin"],creator:function(t,n,i,o,a){var l,r=function(){var t=o.getNLSValue("View."+n.getId()+".Title"),i=l.getRoots(),a=n.getBehavior("TreeListViewBehavior"),r={action:[],parameters:[]};l.emptyNodeModel(),e.is(i,"array")&&i.length>0&&(i.forEach((function(e,t){r.action[t]="addRoot",r.parameters[t]={rootReferencePID:e}})),a.processDropEffect(r).then((function(){n.notify("onRefreshedAll",[i]),n.info(o.getNLSValue("RefreshAll.Success",{view:t}))})).catch((function(){n.warn(o.getNLSValue("RefreshAll.Failure",{view:t}))})))},s=function(t){var r,s,d,u,c,g={noTimeout:!0},p=!!e.is(t.impactedChildren),f=function(t){var n=e.clone(t.impactedChildren),i=e.clone(t.impactedObjects);l.withTransactionUpdate((function(){n.forEach((function(e){l.updateNode(e,{loadChildren:!0})})),i.forEach((function(e){l.updateNode(e)}))}))};if(p)s=e.clone(t);else if((r=l.getSelectedNodesInfo().map((function(e){return e.id}))).length<1)return;n.notify("startProgress",g),p?(f(s),n.notify("stopProgress",g)):((s={impactedChildren:[],impactedObjects:[]}).impactedChildren=(d=[],u=[],c=[],r.forEach((function(t){var n=i.getReferenceModel(t);!function e(t){i.getImpacted(t,null,{}).forEach((function(e){i.removeConnection(e.get("PID"))}));var n=i.getInstancesFromCollection(t);-1===d.indexOf(t)&&d.unshift(t),u=u.concat(n),n.forEach((function(t){var n,o=t.get("PID"),a=i.getReferenceModel(o);n=i.getImpacted(o,!1,{onlyInstanceRelations:!0}),c=c.concat(n),e(a.get("PID")),a.setAdditionalInfo({queriedForChildren:!1})}))}(t),i.getImpacted(t,null,{}).forEach((function(e){c.push(e)})),e.is(a)&&a.removeDocumentConnections(t),n.setAdditionalInfo({queriedForDocuments:!1,queriedForChildren:!1,queriedForConnections:!1})})),i.removeInstance(u,{silent:!0}),i.removeConnection(c,{silent:!0}),n.notify("removeInstance",[u]),n.notify("removeConnection",[c]),d),i.getDescendantsFromServer(r,(function(e){f(s),p||(n.notify("addConnection",[e.connections,{loadRelatedobjectsToView:!1}]),n.notify("refreshImpacted",[s])),n.info(o.getNLSValue("RefreshSelected.Success",{view:o.getNLSValue("View."+n.getId()+".Title")})),n.notify("stopProgress",g)}),{fetchInverseRelations:!0,forceDBMode:!0,silentMode:!0,refreshMode:!0}))};return{listenTo:function(){return{refreshAll:r,RefreshCmd:s,refreshImpacted:s}},onStart:function(){l=n.getBehavior("WUXNodeModelBehavior")},onStop:function(){},onRefreshSelected:s}}}})),define("DS/DELWKOViewBehaviors/DELWKOConfirmationDialog",["UWA/Core","UWA/Controls/Abstract","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWWebServices_FD02/WebserviceUtils"],(function(e,t,n,i,o){"use strict";return function(a,l){var r,s=!(!e.is(l)||!e.is(l.check,"string")),d=e.is(l)&&e.is(l.messageType,"string")?l.messageType:void 0,u=t.extend({defaultOptions:{className:"confirmation-objectslist",appendObjects:!1,showColumnHeaders:!1},objectsTableBody:null,objectsTableHead:null,objectsTableFoot:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableHead=e.createElement("thead"),this.objectsTableFoot=e.createElement("tfoot"),this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableHead.inject(t),this.objectsTableBody.inject(t),this.objectsTableFoot.inject(t)},setData:function(t){var o,a,l=this,r=[],s=[],d=e.is(t)&&e.is(t.attributes,"array")?t.attributes:[],u=e.is(t)&&e.is(t.models,"array")?t.models:[];!1===l.options.appendObjects&&l.empty(),l.options.showColumnHeaders&&null!==l.objectsTableBody&&d.length>0&&(d.forEach((function(e){r.push({tag:"th",text:e})})),o=e.createElement("tr",{html:r}),l.objectsTableHead.appendChild(o)),null!==l.objectsTableBody&&u.length>0&&u.forEach((function(t){s=[],d.forEach((function(o){a=t.get(o),e.is(t)&&!0===t.isReference()?s.push({tag:"img",src:i.getIconURLFromKey(t.get("type"))}):s.push({tag:"img",src:i.getIconURLFromKey(n.getReferenceFromCollection(t.get("isInstanceOf")).get("type"))}),s.push({tag:"div",text:e.is(a)?a:"",styles:{display:"inline"}})})),s.length>0&&(o=e.createElement("tr",{html:s}),l.objectsTableBody.appendChild(o))}))},empty:function(){if(null!==this.objectsTableBody)for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return r=function(t,n,i,r,u){var c,g,p=e.createElement("div",{class:"confirmation-dialog-content-container"});if(e.is(d,"string")){var f=document.createElement("img"),m="";"Info"===d?m="I_Info":"Warning"===d?m="I_Warning":"Error"===d?m="I_Error":"Success"===d&&(m="I_Success"),f.setAttribute("src",o.get3DSpaceUrl()+"/webapps/ParameterizationSkeleton/assets/icons/"+m+".png"),p.appendChild(f)}e.is(n,"string")&&(n=e.createElement("span",{class:"confirmation-dialog-message",text:n})).inject(p),e.is(u)&&u.inject(p),s&&(g=a.create("Toggle",{type:"checkbox",checkFlag:!1,label:l.check})).inject(p),(c=a.create("Dialog",{title:t,domId:"ConfirmationUI-Dialog",content:p,minHeight:100,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Cancel:a.create("Button",{onClick:function(){c.close(),i.apply(null,[!1,r])}}),Ok:a.create("Button",{disabled:!1,emphasize:"primary",onClick:function(){c.close(),i.apply(null,[!0,r,e.is(g)?g.checkFlag:null])}})}})).close=function(){this.destroy(),n=null,t=null,c=null}},{show:function(t,n,i,o){var a,s,d;e.is(i)&&e.is(i.models)&&(a=i.models).length>0&&((d=new u(l)).setData(i),s=e.createElement("div",{class:"confirmation-objectList"}),d.getContent().inject(s)),r(t,n,o,a,s)}}}})),define("DS/DELWKOViewBehaviors/DELWKOFormUI",["UWA/Core","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI"],(function(e,t){"use strict";return function(n,i,o,a,l,r){var s,d=o.getComponent("Element"),u=o.getComponent("ComboBox"),c=o.getComponent("TreeDocument"),g=o.getComponent("TreeNodeModel"),p=o.getComponent("AutoComplete"),f=o.getComponent("LineEditor"),m=o.getComponent("Editor"),h=o.getComponent("Toggle"),b=o.getComponent("DatePicker"),y=o.getComponent("Accordeon"),C=o.getComponent("UnitsEditor"),I=o.getComponent("TooltipModel"),v=o.getComponent("RichTextEditor"),D=o.getComponent("InclusiveLineEditor"),T=o.getComponent("Chips"),V=!1,w=null,S=null,M={},L="inline-container",E=function(t,i){var o=new i({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:a.getNLSValue("FormUI.Placeholder.EnterAText")}),l=o.buildUI(n,t);return o._control.fieldType=t.fieldType,o._control.pattern=t.pattern,M[t.name]=o._control,l},A=function(t){var n=i.getPreferenceValue("separator"),o=new f({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:a.getNLSValue("FormUI.Placeholder.EnterAText")});return"Yes"===t.multiValue&&(o.placeholder=a.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:n}),o.autoCorrectFlag=!1),o.fieldType=t.fieldType,o.pattern=t.pattern,M[t.name]=o,o},x=function(t,n,i){var o,a,r,s=function(s){var d={};switch(s){case"magnitude":d.type="unitsEditor",d.value=l.getMagnitudeValue(n,i);break;case"multivalueRange":for(d.type="autoComplete",d.value=n,d.multiValue=!0,d.elementsList=[],o=0;o<i.AuthorizedValues.length;o++)r=l.getAuthorizedValueNLS(i,o),d.elementsList.push({label:r,value:l.getAuthorizedValueNLS(i,o)});i.labelMap=d.elementsList;break;case"range":for(d.type="select",d.value=l.isDate(i)?l.getFormattedDate(n):n,d.options=[],o=0;o<i.AuthorizedValues.length;o++)r=l.getAuthorizedValueNLS(i,o),d.options.push({label:r,value:l.getAuthorizedValueNLS(i,o)});break;case"multivalue":d.type="text",d.value=l.getValueAsString(n,l.getType(i),!1);break;case"date":d.type="date",d.value=e.is(n)&&"NULL"!==n&&""!==n?l.getDate(n):null,"datetime"===t.displayType&&(d.timePickerFlag=!0);break;case"multivalueDate":d.type="text",a=(a=l.getValueAsDateArray(n)).map((function(e){return l.getFormattedDate(e)})),d.value=l.getValueAsString(a,l.getType(i));break;case"boolean":d.type="checkbox",d.value="TRUE"===n||!0===n;break;case"multiLine":d.type="textarea",d.value="NULL"===n?"":n,d.pattern=l.getPattern(i),d.rows="6";break;case"richTextEditor":d.type="richTextEditor",d.value="NULL"===n?"":n;break;case"inclusiveLineEditor":d.type="inclusiveLineEditor",d.value=n,d.unit=i.unit,d.step=l.isDouble(i)?.1:1;break;case"chips":d.type="chips",d.value=n;break;case"search":d.type="search",d.value="",e.is(t.value)&&(d.value=t.value);break;case"select":case"customselect":d.type="select",d.options=n;break;default:d.type="text",l.isDouble(i)||l.isInteger(i)?d.value=l.getValueAsString(n,l.getType(i),!1):d.value="NULL"===n?"":n}return e.extend(t,d)};return t=l.hasMagnitude(i)?s("magnitude"):l.isMultiValuated(i)?l.hasRangeDefined(i)?s("multivalueRange"):l.isDate(i)?s("multivalueDate"):s("multivalue"):l.hasRangeDefined(i)?s("range"):l.isBoolean(i)?s("boolean"):l.isDate(i)?s("date"):l.isMultiLine(i)?s("multiLine"):l.isString(i)&&"richTextEditor"===t.displayType?s("richTextEditor"):(l.isInteger(i)||l.isDouble(i))&&"inclusiveLineEditor"===t.displayType?s("inclusiveLineEditor"):"chips"===t.displayType?s("chips"):"search"===t.displayType?s("search"):"select"===t.displayType||"customselect"===t.displayType?s("select"):s("text")},P=function(t,n){var i=t;return l.isMultiValuated(n)?(i=l.getValueAsArray(t),l.isDate(n)&&(i=l.hasRangeDefined(n)?i.map((function(e){return t=e,n.labelMap.some((function(e){return t===e.label&&(i=e.value,!0)})),i;var t,i})):i.map((function(e){return t="",n=new Date(e),isNaN(n.getTime())||(t=Math.floor(n.getTime()/1e3)),t.toString();var t,n})))):l.isBoolean(n)?i="true"===t?"TRUE":"FALSE":l.hasRangeDefined(n)?i=l.getAuthorizedValue(n,null,t):l.isDate(n)&&(i=t="NULL"!==t&&e.is(t)?t:""),i},R=function(t){var n=new m({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:a.getNLSValue("FormUI.Placeholder.EnterAText")});return n.fieldType=t.fieldType,M[t.name]=n,n},O=function(e){var t=new h({type:"switch",checkFlag:e.value,value:e.value,disabled:e.disabled});return t.fieldType=e.fieldType,M[e.name]=t,t},N=function(t){var n=e.is(t)?new b(t):new b;return n.fieldType=t.fieldType,M[t.name]=n,n},F=function(e,t){var n,i=[];for(n=0;n<e.elementsList.length;n++)i[n]={labelItem:e.elementsList[n].label,valueItem:e.elementsList[n].value};var o=new t({elementsList:i,actionOnClickFlag:!1,enableSearchFlag:!1,value:e.value,disabled:e.disabled});return o.fieldType=e.fieldType,M[e.name]=o,o},B=function(t,n){var i,o,a=[];for(o=0;o<t.elementsList.length;o++)a[o]={labelItem:t.elementsList[o].label,valueItem:t.elementsList[o].value};return(i=new u({elementsList:a,actionOnClickFlag:!1,enableSearchFlag:!1,value:t.value,disabled:t.disabled})).fieldType=t.fieldType,M[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n.bind(null,M)),i},U=function(e,t){var i=new t,o=i.buildUI(n,e);return M[e.name]=i.getAutoComplete(),o},k=function(e,i){var o=new t,a=o.buildUI(n,e);return M[e.name]=o.getAutoComplete(),a},W=function(t,n){var i,o,a;return o=new c({}),t.elementsList.forEach((function(e){a=new g({label:e.label,value:e.value}),o.addChild(a)})),i=new p({elementsTree:o,actionOnClickFlag:!1,enableSearchFlag:!1,multiSearchMode:t.multiValue}),e.is(t.value,"array")&&t.value.length>0&&(i.value=t.value),i.fieldType=t.fieldType,M[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n),i},_=function(t){var n,o,l=i.getPreferenceValue("separator");return n="null"!==t.value?t.value:"",o=new C({value:n,requiredFlag:t.mandatory,disabled:t.disabled,placeholder:a.getNLSValue("FormUI.Placeholder.EnterANumber"),pattern:"^[-+e]?[0-9e]+(.[0-9e]+)?$",autoCorrectFlag:!1}),e.is(t.magnitudeText,"string")&&o.setUnit(t.magnitudeText),"Yes"===t.multiValue&&(o.placeholder=a.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:l}),o.pattern="^(([0-9])+(.[0-9]*){0,1}|)*((([0-9])*(.[0-9]*){0,1})[0-9])$",o.autoCorrectFlag=!1),o.fieldType=t.fieldType,M[t.name]=o,o},j=function(e){var t=new v;return""!==e.value&&t.setData(e.value),t.fieldType=e.fieldType,M[e.name]=t,t},G=function(e){var t=new D(e);return t.fieldType=e.fieldType,M[e.name]=t,t},H=function(t){var n=new T({value:t.value,uniqueValue:!0,disabled:t.disabled});return n.addEventListener("change",(function(t){e.is(t)&&t.stopPropagation()})),n.fieldType=t.fieldType,M[t.name]=n,n},K=function(t,n){var i,o,a,l,r,s;for(e.is(t,"array")||(t=[t]),o=0;o<t.length;o++){switch(a=t[o],l=new e.Element("div",{class:"wux-field-container "+L}),new e.Element("h6",{class:"wux-textElement",text:a.label}).inject(l).tooltipInfos=new I({shortHelp:a.label}),r={name:a.name,value:a.value,mandatory:a.mandatory,disabled:a.disabled,fieldType:a.type,multiValue:a.multiValue,pattern:a.pattern},a.type){case"customtext":case"text":i=e.is(a.implementation)?E(r,a.customUI):A(r);break;case"textarea":i=R(r);break;case"checkbox":i=O(r);break;case"date":s={timePickerFlag:a.timePickerFlag||!1},e.extend(r,s),i=N(r);break;case"select":case"customselect":s={elementsList:a.options},e.extend(r,s),i=e.is(a.implementation)?F(r,a.customUI):B(r,a.attributeInfo.onChange);break;case"autoComplete":s={elementsList:a.elementsList},e.extend(r,s),i=W(r);break;case"search":r.url=a.url,r.precondition=a.precondition,r.listenCSOEvents=a.listenCSOEvents,r.populateCSOEvents=a.populateCSOEvents,r.serviceName=a.serviceName,r.entity=a.entity,e.extend(r,s),i=e.is(a.implementation)?U(r,a.customUI):k(r);break;case"unitsEditor":s={magnitudeText:a.magnitudeText,multiValue:a.multiValue},e.extend(r,s),i=_(r);break;case"richTextEditor":i=j(r);break;case"inclusiveLineEditor":r.unit=a.unit,r.stepValue=a.step,i=G(r);break;case"chips":i=H(r);break;default:i=A(r)}i.inject(l),l.inject(n)}},X=function(t,n){var i=a.getNLSValue(t),o=new e.Element("div",{class:"accordeon-section-container"}).inject(w);new y({items:[{header:"Wrong NLS key"!==i?i:t,content:n,expandedFlag:!0}],style:"filled-separate"}).inject(o)},z=function(t){var n,i,o,d,u,c,g,p,f,m=[],h=a.getNLSValue(S,null,"Type");for(e.is(t,"array")||(t=[t]),i=0;i<t.length;i++){if(n=t[i],o=e.is(n.attributeName)?n.attributeName:n.dicoType+"."+n.name,d=e.is(n.attributeInfo)?n.attributeInfo:r.getAttributeInfo(o),e.is(d)?(c=l.getFullName(d),p=e.is(a.getNLSValue(d.Name))&&d.Name!=a.getNLSValue(d.Name)?a.getNLSValue(d.Name):l.getNLS(d),f=l.getNLSForUnit(d)):(d="",c=o=n.name,p=a.getNLSValue(o),f=""),e.is(n.defaultValue))if(n.defaultValue.indexOf(",")>=0){u=[];for(var b=n.defaultValue.split(","),y=b.length,C=0;C<y;C++)u.push({label:a.getNLSValue(b[C]),value:b[C]})}else u=n.defaultValue;else u=e.is(s&&s[c])?s[c]:"PLMEntity.V_Name"===c&&S?h:l.getDefaultValue(d);if(g={name:c,mandatory:n.mandatory,label:p,attributeInfo:d,magnitudeText:f,multiValue:d.MultiValuated,disabled:n.disabled?1:n.readOnly||l.isReadOnly(d),defaultValue:u},e.is(n.value)?u=n.value:e.is(n.objectToBeModified)&&(u=n.objectToBeModified.get(n.dataIndex)),e.is(S)&&"ProcessContinuousProvide"===S&&e.is(n.readOnly)&&(g.disabled=n.readOnly),l.isDate(d)&&(g.displayType="DateTime"===n.displayType?"datetime":"date",e.is(n.defaultValue))){var I=new Date;I.setDate(I.getDate()+Number.parseInt(n.defaultValue)),g.value=I,u=g.value}l.isString(d)&&e.is(n.displayType)&&"richText"===n.displayType?g.displayType="richTextEditor":(l.isInteger(d)||l.isDouble(d))&&e.is(n.displayType)&&"inclusiveEditor"===n.displayType?g.displayType="inclusiveLineEditor":e.is(n.displayType)&&"chips"===n.displayType?(g.displayType="chips",g.valueType=d.Type):e.is(n.displayType)&&"select"===n.displayType?g.displayType="select":e.is(n.displayType)&&"search"===n.displayType||"customsearch"===n.displayType?(g.displayType="search",g.url=n.defaultValue,g.dicoType=n.dicoType,g.precondition=n.precondition,g.listenCSOEvents=n.listenCSOEvents,g.populateCSOEvents=n.populateCSOEvents,g.serviceName=n.serviceName,g.entity=n.entity,g.implementation=n.implementation,e.is(s)&&e.is(s[c])&&(g.value=s[c])):e.is(n.displayType)&&"customselect"===n.displayType&&(g.implementation=n.implementation,g.displayType=n.displayType),g.implementation=n.implementation,g=x(g,u,d),m.push(g)}return m},Q=function(t){return new e.Promise((function(n,i){var o=0,a=0;t.forEach((t=>{e.is(t.implementation)&&(o++,require([t.implementation],(function(e){a++,t.customUI=e,a===o&&n()})))})),0===o&&n()}))},q=function(t,n){var o,a,l=new d("div",{class:"section-container"});for(o in!1===n.headerAccordean?l.inject(w):t.name||(t.name=""),t)if(e.is(o))switch(o.toLowerCase()){case"name":X(t[o],l);break;case"attribute":if(a=z(t[o]),e.is(a)){Q(a).then((t=>{e.is(a)?K(a,l):i.debug("attributeInfo is not available")}))}else{if(!e.is(a))return void i.debug("attributeInfo is not available");K(a,l)}}l.addEvent("resize",(function(){var t,n,i,o;o=l.getElements(".wux-field-container"),(i=l.clientWidth)<290||i>290&&"block-container"===L?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(o)&&o.forEach((function(e){e.removeClassName(t),e.addClassName(n)}))}))},J=function(t){var n,o=t.sections;for(n in o)if(e.is(n))switch(n.toLowerCase()){case"section":e.is(o[n])&&(Array.isArray(o[n])?o[n].forEach(q):q(o[n],t));break;case"formstyle":e.is(o[n])&&("Vertical"===o[n]?L="block-container":"Horizontal"===o[n]&&(L="inline-container"))}!0===V&&(V=!1,i.debug(a.getNLSValue("InsertCmd.WarningConfiguration")))};return{createUI:function(t){t=t||{},w=new d("div",{class:"data-collection-form-UI"}),e.is(t.renderTo)?(e.is(t.type)&&(S=t.type.split("/")[1]||""),e.is(t.defaultValues)&&(s=t.defaultValues),J(t),w.inject(t.renderTo)):i.debug("no parent container is present to inject the mainContainer")},getFormStyle:function(){return L},destroy:function(){e.is(w)&&w.destroy(),M={}},getValues:function(){var t,n,i,o={};for(n in M)Object.prototype.hasOwnProperty.call(M,n)&&(i=r.getAttributeInfo(n),e.is(n)&&("select"===M[n].fieldType||"customselect"===M[n].fieldType?t=P(M[n].currentValue,i):"autoComplete"===M[n].fieldType?t=M[n].value?P(M[n].value.join("|"),i):P(M[n].value,i):"checkbox"===M[n].fieldType?(t=(t=M[n].checkFlag).toString(),t=P(t,i)):"date"===M[n].fieldType?t=P(M[n].value,i):"richTextEditor"===M[n].fieldType?t=M[n].getData():"inclusiveLineEditor"===M[n].fieldType?t=M[n].getValue():"chips"===M[n].fieldType?0===(t=M[n].value).length&&(t=""):t="search"===M[n].fieldType?M[n].value:e.is(M[n].requiredFlag)&&!M[n].requiredFlag?void 0:P(M[n].valueToCommit,i),e.is(t)&&(o[n]=t)));return o},validate:function(){var t,n,i,o,s={result:!0,message:null,more:null},d=[],u=[];for(t in M)if(e.is(M[t])&&M[t].changeSelection)return{result:!1};for(t in M)if(e.is(M[t])){if(o=a.getNLSValue(t),!0===M[t].requiredFlag&&""===M[t].value&&(s.result=!1,d.push(o)),"DELLmiProductionPlanReference.ProductionPlan"!==t&&"DELLmiWorkPlanSystemReference.MfgProcess"!==t&&"DELFmiFunctionReference.MfgItem"!==t||(void 0===M[t].value&&(u.push(a.getNLSValue(t.substring(t.indexOf(".")+1))),s.result=!1),e.is(M[t].selectedItems)&&0===Object.keys(M[t].selectedItems.options.data).length&&(u.push(a.getNLSValue(t.substring(t.indexOf(".")+1))),s.result=!1)),"PLMEntity.V_Name"===t){var c=r.getAttributeInfo(t);M[t].pattern=l.getPattern(c)}if("OrderQuantity"===t&&("EACH"===M.Magnitude.value?M[t].pattern="^[1-9][0-9]*$":M[t].pattern="^(0|[1-9][0-9]{0,2}(?:([, ][0-9]{3})*|[0-9]*))([. ][0-9]{1,3}){0,1}$"),"UoM"===t&&"EACH"!=M.Magnitude.value&&(e.is(M[t].value)||(u.push(o),s.result=!1)),"DELLmiUPRSystemReference.V_DueDate"===t){var g=new Date;M[t].value.getTime()<g.getTime()&&(u.push(o),s.result=!1),new Date(M[t].value).getFullYear()>9999&&(u.push(o),s.result=!1)}e.is(M[t].pattern)&&(n=new RegExp(M[t].pattern),""===(i=e.is(M[t].valueToCommit)?M[t].valueToCommit:"")||i.test(n)||(u.push(o),s.result=!1),"OrderQuantity"===t&&(M[t].pattern=""))}return s.result||(d.length>0&&u.length>0?s.message=a.getNLSValue("ModelBehavior.CreateReference.Failure.Multiple.New",{missingFields:d.join(", "),invalidFields:u.join(", ")}):d.length>0?s.message=a.getNLSValue("ModelBehavior.CreateReference.Failure.Single.New",{invalidFields:d.join(", ")}):u.length>0&&(s.message=a.getNLSValue("ModelBehavior.CreateReference.Failure.Single.New",{invalidFields:u.join(", ")}))),s},updateToDefaultValues:function(t){var n;for(n in M)e.is(M[n])&&e.is(t[n])&&(M[n].value=t[n])},updateAuthorizedList:function(t,n){!function(t,n,i){var o,a,r,s,d=[];if(e.is(n)&&(r=M[n],e.is(r)&&"select"===r.fieldType)){for(a=0;a<t.AuthorizedValues.length;a++)o=l.getAuthorizedValueNLS(t,a),d.push({labelItem:o,valueItem:l.getAuthorizedValueNLS(t,a)});s=e.is(i)?i:"",r.setProperties({elementsList:d,value:s})}}(t,n)}}}})),define("DS/DELWKOViewBehaviors/DELWKOPropertiesPanelUI",["UWA/Core","DS/Controls/Tab","DS/Controls/Expander","DS/DELPPWResourceServices_FD02/ResourceUtils","DS/DELPPWWebServices_FD02/WebserviceUtils","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud","DS/Controls/LineEditor","DS/Controls/SpinBox","DS/Controls/DatePicker","DS/Controls/ColorPicker","DS/Controls/Toggle","DS/Controls/Button","DS/Controls/Editor","i18n!DS/DELWKOApp/assets/nls/NLS","i18n!DS/DELWKOPropertiesModule/assets/nls/DELWKOPropertiesPanelUI","css!DS/DELWKOPropertiesModule/assets/css/DELWKOPropertiesPanelUI"],(function(e,t,n,i,o,a,l,r,s,d,u,c,g,p,f){"use strict";return function(n,m,h,b,y,C,I){var v=[],D=void 0,T=["id","PID","PPRTYPE"],V=["rejectReason"],w=function(t){var n={};return v.forEach((i=>{e.is(i)&&(i.get(t.key)!=t.value&&(n={key:t.key,value:t.value}))})),n},S=function(t){var n=a.getReferenceFromCollection(v[0]),l=e.createElement("div",{class:"idCardContainer"});l.setAttribute("style","display : flex"),l.inject(t);var r,s=e.createElement("div",{class:"thumbnail"}),d=n.get("type");r=i.getIconName(d),s.setAttribute("style","background-image: url('"+o.get3DSpaceUrl()+"/snresources/images/icons/large/"+r+"108x144.png');width: 144px;height: 108px"),s.inject(l);var u=e.createElement("div",{class:"propertiesHeader"});u.inject(l),u.setAttribute("style","display: inline-grid");var c=new e.Element("span",{class:"propertiesHeaderTitle"}).inject(u);c.setAttribute("style","margin-top : 3%; font-size: large; font-weight: bold; color: gray"),c.innerText=n.get("V_Name"),(c=new e.Element("span",{class:"propertiesHeaderTitle"}).inject(u)).innerText=n.get("owner")+" "+n.get("originated")},M=function t(n){var h=this,b=new c({displayStyle:"icon",icon:{iconName:"pencil",fontIconFamily:WUXManagedFontIcons.Font3DS}});b.addEventListener("buttonclick",(function(){if(e.is(h._modifAttr)){var n=!0;for(var[i,o]of h._modifAttr.entries()){var a=y.get(i),l=C.getMagnitude(i);l&&""!==l?parseFloat(a)===o&&(n=!1):a===o&&(n=!1)}if(n){var r=f.SomeAttributesEdition;m.warn(r)}else{h._editMode=!h._editMode,e.is(h._divContent)&&h._divContent.empty();var s=e.createElement("div",{class:"contentModalView"});S.call(h,s),t.call(h,s),h._div=s}}else{h._editMode=!h._editMode,e.is(h._divContent)&&h._divContent.empty();s=e.createElement("div",{class:"contentModalView"});S.call(h,s),t.call(h,s),h._div=s}})),b.elements.container.title=f.EditTooltip,b.elements.container.classList.add("editBtn"),b.inject(this._divContent);var y=a.getReferenceFromCollection(v[0]),D=Object.keys(y._attributes),M=Object.values(y._attributes),L=0,E=0,A=0;D.forEach((t=>{var n=I.getAttributeInfo(t);if(!T.includes(t)||"type"===t){var a=e.createElement("div",{class:"propertiesContent"});0===E||E-A==0?a.setAttribute("style","margin-top : 3%; display : flex"):a.setAttribute("style","display : flex"),E++,a.inject(this._divContent);var c=e.createElement("div",{class:"key",id:t}).inject(a),f=new e.Element("span",{class:"value"}).inject(c);if(c=e.createElement("div",{class:"value",id:M[L]}).inject(a),0===L&&c.setAttribute("style","margin-top : 3%"),"type"===t){f.innerText=p[t],c.setAttribute("style","display : contents");var m=e.createElement("div",{class:"typeds",id:"image"}).inject(c),b=i.getIconName(y.get("type"));m.setAttribute("style","background-image: url('"+o.get3DSpaceUrl()+"/snresources/images/icons/small/"+b+".png');width: 22px;height: 22px"),(f=new e.Element("span",{class:"value"}).inject(c)).innerText=p["Type."+y.get("type")]}else if("description"===t)f.innerText=p[t],(f=new e.Element("span",{class:"value"}).inject(c)).innerText=y.get(t);else if("V_GanttColor"===t)if(e.is(n)&&e.is(n.NLS)&&(f.innerText=n.NLS),c.setAttribute("style","display : inline-flex"),h._editMode){f=new d({identifier:t,value:y.get(t)}).inject(c);var v=function(t,n){var i=w({key:t.target.dsModel.identifier,value:n});e.is(i)&&Object.keys(i).length>0?(e.is(h._modifAttr)||(h._modifAttr=new Map),h._modifAttr.set(t.target.dsModel.identifier,n),h._saveBtn.visibleFlag=!0,h._cancelBtn.visibleFlag=!0):h._modifAttr=void 0},D=function(t){var n=t.target.dsModel.value;e.is(t.dsModel)&&e.is(t.dsModel.checkFlag)&&(n=t.dsModel.checkFlag),v(t,n)},S=function(t){var n=void 0;e.is(t.dsModel)&&e.is(t.dsModel.valueToCommit)&&(n=t.dsModel.valueToCommit),v(t,n)};f.addEventListener("change",D),f.addEventListener("uncommittedChange",S)}else(f=new e.Element("span",{class:"value"}).inject(c)).setStyles({"background-color":"#"+y.get(t),width:"9%",height:"75%"});else if(e.is(n)&&"description"!==t?f.innerText=n.NLS:f.innerText=p[t],"V_description"===t&&(A=E),V.includes(t)||!t.includes("V_OrderQuantity")&&C.isReadOnly(n)||!h._editMode)if(f=new e.Element("span",{class:"value"}).inject(c),C.isDate(n)){var x="";e.is(y.get(t))&&(x=new Intl.DateTimeFormat(widget.lang,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(new Date(y.get(t)))),f.innerText=x}else{if((F=C.getMagnitude(n))&&""!==F){N=y.unit,y.magnitude,R=y.get(t);e.is(N)&&Number.isNaN(y.get(t))?R=y.get(t).replace(N,""):N="TIME"===F?i.getNLSForUnit(F,""):i.getNLSForUnit(F,N),f.innerText=C.getFormattedValue(R,N)}else{R=y.get(t);e.is(R)||(R=""),C.isDouble(n)||C.isInteger(n)?f.innerText=C.getFormattedValue(R):f.innerText=R}}else{if(C.isDate(n)){var P=void 0;e.is(y.get(t))&&(P=y.get(t)),f=new s({identifier:t,value:P,timePickerFlag:!0}).inject(c)}else if(C.isDouble(n)||C.isInteger(n)){var R=y.get(t),O=1;if(C.isDouble(n)&&(O=.1),(F=C.getMagnitude(n))&&""!==F)if(t.includes("V_OrderQuantity")){var N=y.unit,R=y.get(t);e.is(N)&&Number.isNaN(y.get(t))?R=y.get(t).replace(N,""):N=i.getNLSForUnit(F,N),f=new r({minValue:0,value:R,units:N,identifier:t,stepValue:O,displayCustomizer:function(e){return C.getFormattedValue(e,N)}}).inject(c)}else{var F=C.getMagnitude(n),N=y.unit,R=(y.magnitude,y.get(t));e.is(N)&&Number.isNaN(y.get(t))&&(R=y.get(t).replace(N,"")),N="TIME"===F?i.getNLSForUnit(F,""):i.getNLSForUnit(F,N),f=new r({minValue:0,value:R,units:N,identifier:t,stepValue:O,displayCustomizer:function(e){return C.getFormattedValue(e,N)}}).inject(c)}else f=new r({minValue:0,identifier:t,value:R,stepValue:O,displayCustomizer:function(e){return C.getFormattedValue(e)}}).inject(c)}else C.isBoolean(n)?f=new u({type:"switch",identifier:t,checkFlag:y.get(t)}).inject(c):"V_description"===t?(f=new g({identifier:t,value:y.get(t),resizableFlag:!0}).inject(c)).elements.inputField.classList.add("editValue"):f=new l({identifier:t,value:y.get(t)}).inject(c);v=function(t,n){var i=w({key:t.target.dsModel.identifier,value:n});e.is(i)&&Object.keys(i).length>0?(e.is(h._modifAttr)||(h._modifAttr=new Map),h._modifAttr.set(t.target.dsModel.identifier,n),h._saveBtn.visibleFlag=!0,h._cancelBtn.visibleFlag=!0):h._modifAttr=void 0},D=function(t){var n=t.target.dsModel.value;e.is(t.dsModel)&&e.is(t.dsModel.checkFlag)&&(n=t.dsModel.checkFlag),v(t,n)},S=function(t){var n=void 0;e.is(t.dsModel)&&e.is(t.dsModel.valueToCommit)&&(n=t.dsModel.valueToCommit),v(t,n)};f.addEventListener("change",D),f.addEventListener("uncommittedChange",S),f.elements.container.classList.add("editValue")}}L++}));var x=e.createElement("div",{class:"propertiesContent"});x.setAttribute("style","margin-left : 35%; margin-top : 3%; display : flex"),x.inject(this._divContent),h._saveBtn=new c({label:f.Save,emphasize:"primary"}),h._saveBtn.addEventListener("buttonclick",(function(){var n=[];for(var[i,o]of h._modifAttr.entries()){var a={},l=I.getAttributeInfo(i);e.is(l)?(C.isDate(l)&&(o=new Date(o).toISOString()),a.instOrRef="reference",a.dataIndex=i,a.objectToBeModified=v[0],a.attributeInfo=l,a.attributeName=l.FullName,a.newValue=o):(a.instOrRef="reference",a.dataIndex=i,a.objectToBeModified=v[0],a.attributeInfo={},a.attributeName=i,a.newValue=o),n.push(a)}m.getBehavior("ModelBehavior").updateModelAttribute_v2(v[0].get("PID"),n,{onComplete:function(){h._editMode=!1,e.is(h._divContent)&&h._divContent.empty();var n=e.createElement("div",{class:"contentModalView"});S.call(h,n),t.call(h,n),h._div=n,h._modifAttr=void 0}})})),h._saveBtn.inject(x),h._saveBtn.visibleFlag=!1,h._cancelBtn=new c({label:f.Cancel,emphasize:"secondary"}),h._cancelBtn.elements.container.setAttribute("style","margin-left : 2%"),h._cancelBtn.addEventListener("buttonclick",(function(){e.is(h._divContent)&&h._divContent.empty();var n=e.createElement("div",{class:"contentModalView"});S.call(h,n),t.call(h,n),h._div=n,h._modifAttr=void 0})),h._cancelBtn.inject(x),h._cancelBtn.visibleFlag=!1};return{initDatas:function(n){var o=this;o._options=n,v=[],o._modifAttr=void 0,o._editMode=!1;var l=e.createElement("div",{class:"contentModalView"});if(e.is(o._options.refModels)&&o._options.refModels.length>1)o._options.refModels.forEach((e=>{v.push(a.getReferenceFromCollection(e))})),function(t){var n=e.createElement("div",{class:"idCardContainer"});n.setAttribute("style","display : flex"),n.inject(t);var i=e.createElement("div",{class:"propertiesHeader"});i.inject(n),i.setAttribute("style","display: inline-grid");var o=new e.Element("span",{class:"propertiesHeaderTitle"}).inject(i);o.setAttribute("style","margin-top : 3%; font-size: large; font-weight: bold; color: gray"),o.innerText+=v.length+" objects selected",(o=new e.Element("span",{class:"propertiesHeaderTitle"}).inject(i)).innerText="(multiple) ";var a=0;v.forEach((e=>{a>0&&(o.innerText+=", "),o.innerText+=e.get("V_Name"),a++}))}(l),function(n){var o=new t({displayStyle:"strip"});o.tabBar.centeredFlag=!1;var a=document.createElement("div");a.className="propertiesTab",o.elements.container.setStyle("margin-top","3%");var l=new Map;v.forEach((t=>{var n=Object.keys(t._attributes),o=Object.values(t._attributes),r=0,s=0,d=0;n.forEach((n=>{var u=I.getAttributeInfo(n);if(!T.includes(n)&&e.is(t.get(n))||"type"===n){var c=void 0;if(c=e.is(u)&&"description"!==n?l.get(u.NLS):l.get(p[n]),e.is(c))if("type"===n)(g=p["Type."+t.get("type")]).indexOf(c.innerText)<0&&(c.innerText="(multiple) "+c.innerText+", "+p["Type."+t.get("type")]);else if("V_GanttColor"===n)(b=new e.Element("div",{class:"value"}).inject(c.getParent())).setStyles({"background-color":"#"+t.get(n),width:"9%",height:"75%"});else{var g;(g=t.get(n).toString()).indexOf(c.innerText)<0&&(C.isDate(u)?(y="",e.is(t.get(n))&&(y=new Intl.DateTimeFormat(widget.lang,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(new Date(t.get(n)))),y.indexOf(c.innerText)<0&&(c.innerText.indexOf("("+f.Multiple+")")<0?c.innerText="("+f.Multiple+")"+c.innerText+", "+y:c.innerText=c.innerText+", "+y)):((v=C.getMagnitude(u))&&""!==v?(D=t.unit,t.magnitude,V=t.get(n),e.is(D)&&Number.isNaN(t.get(n))?V=t.get(n).replace(D,""):D="TIME"===v?i.getNLSForUnit(v,""):i.getNLSForUnit(v,D),g=C.getFormattedValue(V,D)):(V=t.get(n),e.is(V)||(V=""),g=C.isDouble(u)||C.isInteger(u)?C.getFormattedValue(V):V),c.innerText.indexOf("("+f.Multiple+")")<0?c.innerText="("+f.Multiple+") "+c.innerText+", "+g:c.innerText=c.innerText+", "+g))}else{var m=e.createElement("div",{class:"propertiesContent"});0===s||s-d==0?m.setAttribute("style","margin-top : 3%; display : flex"):m.setAttribute("style","display : flex"),s++,m.inject(a);var h=e.createElement("div",{class:"key",id:n}).inject(m),b=new e.Element("span",{class:"value"}).inject(h);if(e.is(u)&&"description"!==n?b.innerText=u.NLS:b.innerText=p[n],h=e.createElement("div",{class:"value",id:o[r]}).inject(m),0===r&&h.setAttribute("style","margin-top : 3%"),"type"===n)b.innerText=p[n],h.setAttribute("style","display : inline-flex"),(b=new e.Element("span",{class:"value"}).inject(h)).innerText=p["Type."+t.get("type")],l.set(p[n],b);else if("V_GanttColor"===n)h.setAttribute("style","display : inline-flex"),(b=new e.Element("div",{class:"value"}).inject(h)).setStyles({"background-color":"#"+t.get(n),width:"9%",height:"75%"}),l.set(u.NLS,b);else{if(b=new e.Element("span",{class:"value"}).inject(h),C.isDate(u)){var y="";e.is(t.get(n))&&(y=new Intl.DateTimeFormat(widget.lang,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(new Date(t.get(n)))),b.innerText=y}else{var v;if((v=C.getMagnitude(u))&&""!==v){var D=t.unit,V=(t.magnitude,t.get(n));e.is(D)&&Number.isNaN(t.get(n))?V=t.get(n).replace(D,""):D="TIME"===v?i.getNLSForUnit(v,""):i.getNLSForUnit(v,D),b.innerText=C.getFormattedValue(V,D)}else{V=t.get(n);e.is(V)||(V=""),C.isDouble(u)||C.isInteger(u)?b.innerText=C.getFormattedValue(V):b.innerText=V}}e.is(u)&&"description"!==n?l.set(u.NLS,b):l.set(p[n],b),"V_description"===n&&(d=s)}}}r++}))})),o.add({icon:{iconName:"properties",fontIconFamily:WUXManagedFontIcons.Font3DS},label:f.PropertiesTab,content:a,isSelected:!0}),o.inject(n)}(l);else if(e.is(o._options.refModels)&&1===o._options.refModels.length)o._options.refModels.forEach((e=>{v.push(a.getReferenceFromCollection(e))})),e.is(o._propertiesTab)?this._divContent.empty():(this._divContent=document.createElement("div"),this._divContent.className="propertiesTab",o._propertiesTab=new t({displayStyle:"strip"}),o._propertiesTab.tabBar.centeredFlag=!1,o._propertiesTab.elements.container.setStyle("margin-top","3%"),o._propertiesTab.add({icon:{iconName:"properties",fontIconFamily:WUXManagedFontIcons.Font3DS},label:f.PropertiesTab,content:o._divContent,isSelected:!0})),S.call(o,l),M.call(o,l),o._propertiesTab.inject(l);else{var r=e.createElement("div",{class:"propertiesContent"});r.setAttribute("style","display : flex");var s=new e.Element("span",{class:"value"}).inject(r);s.setAttribute("style","margin-left : 48%; margin-top : 48%"),s.innerText="no object select",r.inject(l)}D=l},getDiv:function(){return D},destroy:function(){}}}})),define("DS/DELWKOViewBehaviors/DELWKOEditAttributeBehavior",["UWA/Core","text!DS/DELWKOViewBehaviors/assets/json/MockAttributeInfo.json","text!DS/DELWKOViewBehaviors/assets/json/DELLmiExecTimeConstraintRelation.json","text!DS/DELPPWViewBehaviors_FD02/assets/json/EditAttributeFormEvents.json"],(function(e,t,n,i){"use strict";return{plugins:["UXComponentsPlugin","AttributePlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin"],creator:function(o,a,l,r,s,d,u){var c,g,p,f,m=l.getComponent("Button"),h=null,b=null,y=null,C=e.Json.decode(i),I=function(t,n){var i=g.createElement("div",{class:"section-container"}),o={attribute:t},a={};return e.is(n)&&e.is(n.formStyle)&&(a.formStyle=n.formStyle),a.section=o,b=g.create("FormUI",{sections:a,renderTo:i,headerAccordean:!1}),i},v=function(t,n){c=g.createElement("div",{class:"EditAttribute-Dialog"}),e.is(g)?(y=g.create("Dialog",e.merge(t,{domId:"EditAttributeUI-Dialog",content:c,resizableFlag:!0,modalFlag:!0,width:400,minWidth:290,buttons:{Cancel:new m({onClick:function(){y.close()}}),Ok:new m({disabled:!1,emphasize:"primary",onClick:function(){y.close()}})}}))).close=function(){this.destroy(),e.is(b)&&b.destroy(),e.is(c)&&c.destroy(),y=null}:a.debug("uxFactoryBehavior is not available.")},D=function(t){return new Promise((function(n,i){var o={},l=function(){a.notify("stopProgress",o),a.warn(s.getNLSValue("EditAttributeUI.retrieveDataFailure")),i()};if(!e.is(t))return a.debug("objectToBeModified is not available."),void i();a.notify("startProgress",o),d.fetchAttributes(t,{onComplete:function(){a.notify("stopProgress",o),n()},onFailure:l,onTimeout:l})}))},T=function(t){var n=d.getReference(t);return e.is(n)||(n=d.getInstance(t)),e.is(n)||(n=d.getConnection(t)),n};return{name:"EditAttributeBehavior",onStart:function(i){var o;g=a.getBehavior("UXFactoryBehavior"),a.getBehavior("ModelBehavior"),p=a.getBehavior("LinkBehavior"),e.is(i.editFormAttributesXML)&&(o=u.getXMLValues(i.editFormAttributesXML),h=o.convert("AttributesDescriptionList.Type","name")),f=e.Json.decode(t),e.Json.decode(n)},onStop:function(){},hasEditConfiguration:function(t){var n=!1,i=null;return e.is(h)?(i=T(t),e.is(i)&&e.is(h[i.get("type")])&&(n=!0)):a.debug("_editFormAttrsConfig is not available."),n},editConfiguredAttributes:function(t){var n,i,l,u,g,m,b,y,V=null,w={};m=d.getConnection(t),b=e.is(m)?m.get("type"):null,e.is(h)?(V=T(t),e.is(V)?(n=h[V.get("type")],C[V.get("type")]&&(y=C[V.get("type")]),e.is(n)?(l=n.Attribute,e.is(n.formStyle)&&(w.formStyle=n.formStyle),(u=r.getObjectAndAttributeInfos(l)).forEach((function(n){"ProcessImplementLinkOcc"===b&&"V_usage"===n.dataIndex&&(n.attributeInfo=f[n.dataIndex],n.attributeInfo.AuthorizedValues=function(t){var n,i,a,l,r,d,u=[];return i=(n=o.getPlugins("ImplementPlugin").instance).getRolesForTargrtObject(t),a=p.getConnection(t),l=n.getRoleFromModelOrComputed(a.get("PID")),e.is(l)&&"NULL"!==l&&(d=l.replace("*",""),r=i.indexOf(d),i.splice(r,1),i.unshift(l)),i.forEach((function(e){u.push({NLS:s.getNLSValue("Role."+e),Name:e})})),u}(t)),"DELLmiExecTimeConstraintRelation"===b&&"kind"===n.dataIndex&&(n.attributeInfo.NLS=s.getNLSValue("DELLmiExecTimeConstraintRelation.kind"))})),u.forEach((function(t,n){t.objectToBeModified=V,e.is(l[n].displayType)&&(t.displayType=l[n].displayType)})),D(V).then((function(){var t;(t=u.filter((function(t,n){t.readOnly=!0;e.is(t.attributeNLSTitle)?t.attributeNLSTitle:r.getNLS(t.attributeInfo);return(r.doesAttributeExist(V,t.dataIndex)||r.isAttrApplicableForType(V,t.attributeName))&&e.is(y)&&e.is(y[t.dataIndex])&&(t.events=y[t.dataIndex]),!0}))).length>0?(g=I(t,w),i={title:s.getNLSValue("AttributeUI.HeaderMulti")},d.isWorkInstruction(V)&&(i=e.merge({position:{my:"top",at:"top"},height:500,width:600},i)),v(i),g.inject(c)):a.warn(s.getNLSValue("EditAttributeUI.ConfigAttrNotAvilaibleOnObject"))}))):a.warn(s.getNLSValue("EditAttributeUI.NoAttributesConfigured"))):a.debug("objectToBeModified is not available.")):a.debug("_editFormAttrsConfig is not available.")},editAttribute:function(t,n){var i,o,l,d,u,g;e.is(n,"array")||(n=[n]),e.is(t,"array")||(t=[t]),u=n[0].objectToBeModified,D(u).then((function(){var p=!0;n.forEach((function(c){r.doesAttributeExist(u,c.dataIndex)||r.isAttrApplicableForType(u,c.dataIndex)?(o=e.is(c.attributeNLSTitle)?c.attributeNLSTitle:r.getNLS(c.attributeInfo),l=[],t.forEach((function(t){i=null,i="reference"===c.instOrRef&&e.is(t.referencePID)?t.referencePID:"instance"===c.instOrRef&&e.is(t.instancePID)?t.instancePID:t.id,e.is(i)&&l.push(i)})),d=n.length>1?s.getNLSValue("EditAttributeUI.HeaderMulti"):s.getNLSValue("EditAttributeUI.Header",{attributeName:o})):(p=!1,a.warn(s.getNLSValue("TableView.AvailabilityFailure",{key:o})))})),p&&(e.is(y)||(g=I(n),v({title:d}),g.inject(c)))}))},editRichTextAttribute:function(t,n){var i,o,a,l,d,u,p,f,m,h={},C=[],V=n.objectToBeModified,w=function(t){let n,i="reference"===t?a:l,o="reference"===t?p:u,r=[];e.is(i)&&(r.push(b.getValues()),r.forEach((t=>{for(n in t)t.hasOwnProperty(n)&&n===o.attributeInfo.FullName&&(o.value=e.is(t[n],"array")?t[n].join(""):t[n])})))};e.is(n,"array")&&(n=n[0]),e.is(t,"array")&&(t=t[0]),i=e.is(n.attributeNLSTitle)?n.attributeNLSTitle:r.getNLS(n.attributeInfo),f=T(t.referencePID),C.push(D(V)),e.is(t.instancePID)&&(m=T(t.instancePID),C.push(D(m))),Promise.allSettled(C).then((function(){if(h.reference={pid:t.referencePID,name:s.getNLSValue("EditAttributeUI.EditRichText.Reference.Prefix")+f.get("V_Name")},n.displayType="richText",(p={...n}).attributeInfo={...n.attributeInfo},p.attributeInfo.FullName+=".Ref",p.value=f.get("DELLmiRichText.V_RichText"),p.instOrRef="reference",e.is(m)&&(h.instance={pid:t.instancePID,name:s.getNLSValue("EditAttributeUI.EditRichText.Instance.Prefix")+m.get("PLM_ExternalID")},(u={...n}).attributeInfo={...n.attributeInfo},u.attributeInfo.FullName+=".Inst",u.objectToBeModified=m,u.value=m.get("DELLmiRichText.V_RichText"),u.instOrRef="instance"),o=s.getNLSValue("EditAttributeUI.Header",{attributeName:i}),!e.is(h.instance)&&(o+=" : "+h.reference.name),!e.is(y)){if(a=I(p,{formStyle:"Vertical"}),e.is(h.instance)){let e=g.getComponent("WUXTab");(d=new e({displayStyle:"strip"})).add({label:h.reference.name,isSelected:!0,content:a}),d.add({label:h.instance.name}),d.addEventListener("change",(function(e){1===e.dsModel.value[0]?(w("reference"),a.destroy(),l&&l.destroy(),l=I(u,{formStyle:"Vertical"}),e.dsModel.setPageContentFromValue(1,l)):0===e.dsModel.value[0]&&(w("instance"),l.destroy(),a.destroy(),a=I(p,{formStyle:"Vertical"}),e.dsModel.setPageContentFromValue(0,a))}))}v({title:o}),e.is(h.instance)?d.inject(c):a.inject(c)}}))}}}}})),define("DS/DELWKOViewBehaviors/DELWKOPriorityColumnManager",["UWA/Core","DS/Utilities/Utils","DS/DELPPWModelServices_FD02/BehaviorUtil"],(function(e,t,n){"use strict";return function(i,o,a,l,r,s){s.getGroupingAdditonalColumns();var d=i.getBehavior("ModelBehavior"),u=i.getBehavior("WUXNodeModelBehavior"),c=function(t,n){var i,a,r,s,d={cellValue:"",isAttrExists:!1,unit:""},u=l.getAttributeInfoFromColumn(t);if(e.is(t.dicoType,"array")&&t.dicoType.length>0)for(r=t.dicoType.length,i=0;i<r;i++)if(a=t.dicoType[i]+"."+t.dataIndex,e.is(n.nodeModel)&&Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a)){s=o.getAttributeInfo(t.dicoType[i]+"."+u.dataIndex),e.is(s)&&(l.hasMagnitude(s)?(d.unit=n.nodeModel.options.grid[a].replace(/[0-9\.]+/g,""),d.cellValue=n.nodeModel.options.grid[a],d.cellValue=l.getFormattedValue(d.cellValue,d.unit)):d.cellValue=n.nodeModel.options.grid[a]),d.isAttrExists=!0;break}if(""===d.cellValue){var c=l.getNodeAndColumnInfos(n.nodeModel,t);if(l.isDate(c.attributeInfo)){var g=l.hasRangeDefined(c.attributeInfo),p=n.nodeModel.options.grid[t.dataIndex];d.cellValue=g?e.is(p)?l.getFormattedDate(p):void 0:e.is(p)?l.getDate(p):void 0}}return d};return{getMultiTypeCellValue:function(e){var t=this.getColumnOrGroup(e.columnID);return c(t,e).cellValue},getMultiTypeCellRepresentation:function(t){var n="float";return e.is(t)&&e.is(t.Type)&&"Integer"===t.Type&&(n="integer"),n},getMultiTypeCellSemantics:function(e){var t=this.getColumnOrGroup(e.columnID);c(t,e);return{minValue:0,viewOptions:{customFormatter:function(e){return l.getFormattedValue(e)}}}},getMultiTypeCellEditableState:function(e){var t,n;return s.areModuleColumnsImmutable(i.getId())?n=!1:(t=this.getColumnOrGroup(e.columnID),n=c(t,e).isAttrExists),n},setValue:t.debounce((function(t,o){var s,u,c,g,p,f,m=this,h=[];if(f=this.getColumnOrGroup(t.columnID),g=l.getNodeAndColumnInfos(t.nodeModel,f),p=l.isMultiValuated(g.attributeInfo),!l.doesAttributeExist(g.objectToBeModified,g.dataIndex)&&!l.isAttrApplicableForType(g.objectToBeModified,g.dataIndex))return i.warn(r.getNLSValue("TableView.AvailabilityFailure",{key:g.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(l.isBoolean(g.attributeInfo))p&&(o=l.getValueAsArray(o,l.getType(g.attributeInfo)));else if(l.hasRangeDefined(g.attributeInfo,g.attributeDef)){if(!e.is(o))return;o=l.getAuthorizedValue(g.attributeInfo,g.attributeDef,o)}else if(l.isDate(g.attributeInfo)){if(o=e.is(o)?o:"",p)for(h=l.getValueAsArray(o),o=[],c=0;c<h.length;c++){if(u=new Date(h[c]),isNaN(u.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:h[c]})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o.push(Math.floor(u.getTime()/1e3))}else if(u=new Date(o),n.isCloud())o=u.toISOString();else{if(isNaN(u.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:o})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o=Math.floor(u.getTime()/1e3)}t.nodeModel.setAttribute(t.dataIndex,o),this.updateRenderedRow(t.rowID)}else if(p)o=l.getValueAsArray(o,l.getType(g.attributeInfo));else if(e.is(t.cellModel)){if(l.isInteger(g.attributeInfo)&&!Number.isInteger(o))return void i.warn(r.getNLSValue("TableView.InvalidIntegerValue",{attr:g.attributeNLSTitle,value:o}))}else if((s=l.getMaxLength(g.attributeInfo))>0&&o.length>s)return void i.warn(r.getNLSValue("TableView.MaxLengthFailure",{length:o.length,maxLength:s}));"V_SequencingMode"===g.dataIndex?a.setSequencingMode(g.objectToBeModified.id,o,{onFailure:function(){i.warn(r.getNLSValue("SetSequencingModeUI.UpdateFailure"))},onComplete:function(){i.info(r.getNLSValue("SetSequencingModeUI.UpdateSuccess")),i.notify("setSequencingMode")}}):e.is(d)&&d.updateModelAttribute(g.objectToBeModified.id,g,o,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),m._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})}),100,!0),getCellValue:function(t,n){var i=l.getNodeAndColumnInfos(n.nodeModel,t),o=l.isMultiValuated(i.attributeInfo),a=l.hasMagnitude(i.attributeInfo),s=l.hasRangeDefined(i.attributeInfo),d=n.nodeModel.options.grid[t.dataIndex];if("type"===i.attributeName&&(d=r.getNLSValue("Type."+d)),a){d=l.getMagnitudeValue(d,i.attributeInfo,!1);l.getNLSForUnit(i.attributeInfo)}else if(o)l.isDate(i.attributeInfo)&&d&&(d=d.map((function(e){return l.getFormattedDate(e)}))),d=l.getValueAsString(d,l.getType(i.attributeInfo));else if(l.isDate(i.attributeInfo))return d=s?e.is(d)?l.getFormattedDate(d):void 0:e.is(d)?l.getDate(d):void 0;return e.is(d)?d:""},hasCellValue:function(t){var n,i,o,r,s,d;if(e.is(t.nodeModel)&&u.isFakeNodeModel(t.nodeModel)||!e.is(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"NonEditable":case"URL":o=!0;break;case"BIEssentials":case"BIEssentialsAltSub":r=_getBICellValue(t),o=!(!e.is(r)||"transparent"===r.colorCode);break;case"DocMgmt":r=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(r,"array")&&r.length>0;break;case"MultiType":o=(r=c(n,t)).isAttrExists,i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),d=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||d):o=!1;break;default:i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),d=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||d):o=!1}return o}}}})),define("DS/DELWKOViewBehaviors/DELWKOColorColumnManager",["UWA/Core","DS/Utilities/Utils"],(function(e,t){"use strict";return function(n,i,o,a,l,r){var s=n.getBehavior("ModelBehavior");return{hasCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=a.getNodeAndColumnInfos(e.nodeModel,t),i=a.isAttrApplicableForType(n.objectToBeModified,n.attributeName);return Object.prototype.hasOwnProperty.call(e.nodeModel.options.grid,e.dataIndex)||i},getCellValue:function(e){return Object.prototype.hasOwnProperty.call(e.nodeModel.options.grid,e.dataIndex)?e.nodeModel.options.grid[e.dataIndex]:"#FFFFFF"},getCellRepresentation:function(e){return"color"},setCellValue:t.debounce((function(t,n){var i,o,l=this;o=this.getColumnOrGroup(t.columnID),i=a.getNodeAndColumnInfos(t.nodeModel,o),e.is(s)&&s.updateModelAttribute(i.objectToBeModified.id,i,n,{onFailure:function(){_onCellUpdateFailure(t.nodeModel),l._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})}),100,!0)}}})),define("DS/DELWKOViewBehaviors/DELWKOFilteringViewBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","PlatformPlugin","SelectionPlugin"],creator:function(e,t,n,i,o,a,l,r,s,d,u,c,g,p,f){var m=function(e){};return{listenTo:function(){return{FilterColumn:m}},onStart:function(e,t){t()},onStop:function(){}}}}})),define("DS/DELWKOViewBehaviors/DELWKOMfgProcessCrossHighlightBehavior",["UWA/Core"],(function(e){"use strict";return{plugins:["DatabasePlugin"],creator:function(t,n,i){var o,a,l,r,s,d,u,c,g,p,f,m,h,b,y,C,I,v="DELWKOMfgProcessCrossHighlightBehavior";return r=function(t){var i=n.getBehavior(t);return e.is(i)||n.debug(v+" : "+t+"behavior is not available "),i},d=function(){o=Object.create(null)},s=function(e,t){o[e.toString()]=t},u=function(e){delete o[e.toString()]},c=function(){return Object.keys(o).reduce((function(e,t){return e.concat(o[t])}),[])},g=function(){var t=r("WUXNodeModelBehavior"),i=a;return i&&e.is(t)&&t.isDocumentEmpty()&&(i=!1,n.debug(v+" : Not computing crossHighlight as document is empty")),i},p=function(t,o){var a,s,d=r("LinkBehavior"),u=[];if(e.is(d))if(a=i.getPPRType(t),s=l[a],Array.isArray(s)){var c=d.getConnectedObjects(t,o,{relationTypes:s});if(u=u.concat(c),"PROCESS"===a&&u.length>0)u.forEach((function(e){var t=d.getConnectedObjects(e,[],{relationTypes:"DELIsSerializedFromOp"});u=u.concat(t)}));else if(("WORKORDER"===a||"EXECHEADER"===a||"STEP"===a)&&u.length>0){u=[];var g=d.getConnectedObjects(t,[t],{relationTypes:s});(u=u.concat(g)).forEach((function(e){if(e instanceof Array){var t=e[0],n=i.getReferenceIdFromInstance(t),o=d.getConnectedObjects(n,[n],{relationTypes:s});u=u.concat(o);var a=d.getConnectedObjects(t,[t],{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]});u=u.concat(a)}else{a=d.getConnectedObjects(e,[e],{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]});u=u.concat(a)}}))}}else n.debug(v+" : Couldnt _computeConnectedObjs as crossHighLightLinkTypes config is not available for "+a);return u},f=function(t,n){var i,o,a,l,r;if(t.isVisible()){if(a=t,e.is(n))for(i=1;i<n.length&&(l=!1,r=a.getVisibleChildren(!1,!0),e.is(r)&&0!==r.length);i++){for(o=0;o<r.length;o++)if(r[o].getInstancePID()===n[i]){a=r[o],l=!0;break}if(!l)break}}else for(a=t.getParent();!a.isVisible();)a=a.getParent();return a},m=function(t){var n=r("WUXNodeModelBehavior"),o=[],a={},l={};return e.is(n)&&(n.getAllDescendants().forEach((function(t){var n,i,o;n=t.getReferencePID(),t.isRoot()?o=n:(i=t.getInstancePID(),o=t.getAbsolutePath().toString()),e.is(n)&&(e.is(a[n])||(a[n]=[]),a[n].push(o)),e.is(i)&&(e.is(a[i])||(a[i]=[]),a[i].push(o)),e.is(o)&&(l[o]=t)})),t.forEach((function(t){var n,r,s;Array.isArray(t)?(n=t[0],e.is(a[n])&&a[n].forEach((function(e){o.push(f(l[e],t))})),s=i.getInstance(n),e.is(s)&&(r=s.get("isAggregatedBy"),e.is(r)&&e.is(a[r])&&a[r].forEach((function(e){0===l[e].getChildren(!0).length&&o.push(f(l[e]))})))):e.is(a[t])&&a[t].forEach((function(e){o.push(f(l[e]))}))}))),o},h=function(e){var t,n=r("WUXNodeModelBehavior");n&&Array.isArray(e)&&e.length>0&&(t=m(e)).length>0&&n.withTransactionUpdate((function(){t.forEach((function(e){e.highlight()}))}))},b=function(){var e,t=r("WUXNodeModelBehavior");t&&(e=t.getHighlightedNodes(),Array.isArray(e)&&e.length>0&&t.withTransactionUpdate((function(){e.forEach((function(e){e.unhighlight()}))})))},y=function(){d()},C=function(t){var n;g()&&e.is(t)&&((t=Array.isArray(t)?t:[t]).forEach((function(t){var n,i,o=t.nodeId,a=t.isSelected,l=t.absPath;e.is(o)&&e.is(a)&&e.is(l)&&(i=l.length>0?l:o,a?(n=p(o,l),s(i,n)):u(i))})),b(),n=c(),h(n))},I=function(t){var i,o=r("WUXNodeModelBehavior");g()&&e.is(o)&&e.is(t)&&e.is(t.sourceId)&&e.is(t.changed)&&(i=t.changed,t.sourceId!==n.getId()&&i.isSelected&&o.unSelectAll(),C(i))},{listenTo:function(){return{refreshAll:y,select:I,reComputeCrossHighlight:C,onNodeExpanded:this.reHighlightMyView,onNodeCollapsed:this.reHighlightMyView}},onStart:function(t){a=!!e.is(t.enableCrossHighlight)&&t.enableCrossHighlight,l=e.is(t.crossHighLightLinkTypes)?t.crossHighLightLinkTypes:{},d()},onStop:function(){o=null},reHighlightMyView:function(){var e;g()&&o&&Object.keys(o).length>0&&(b(),e=c(),h(e))}}}}})),define("DS/DELWKOViewBehaviors/DELWKOTreeNodeModel",["UWA/Core","UWA/Class","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/TreeNodeModel"],(function(e,t,n){"use strict";var i=function(t){t=t||{},n.call(this,t),this.object={},this.options.grid["ds6w:type"]=this.getReferenceType(),this.object.type=this.getReferenceType(),e.is(t.defType)&&(this.object.defType=t.defType)};return(i.prototype=Object.create(n.prototype)).constructor=i,i.prototype.getAttributeValue=function(e){return"label"===e?this.getLabel():(Object.keys(this.options.grid).forEach((t=>{t.includes(e)&&(e=t)})),this.options.grid[e])},i.NODE_SOURCE=n.NODE_SOURCE,i})),define("DS/DELWKOViewBehaviors/DELWKOCellManagerCloud",["UWA/Core","DS/Utilities/Utils","DS/DELPPWModelServices_FD02/BehaviorUtil"],(function(e,t,n){"use strict";return function(i,o,a,l,r,s){var d=s.getGroupingAdditonalColumns(),u=i.getBehavior("ModelBehavior"),c=i.getBehavior("WUXNodeModelBehavior"),g=function(t){var n;return e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options,t.dataIndex)&&(n=t.nodeModel.options[t.dataIndex]),n},p=function(e,t){var n={};n.node=t.nodeModel;var o=t.nodeModel,l=a.getPPRType(o._referencePID);"WORKORDER"!==l&&"EXECHEADER"!==l&&"STEP"!==l||"AuxiliaryModule"!=i.getName()&&e.command&&s.executeCommand(e.command,n)},f=function(t,n){var i,a,r,s,d={cellValue:"",isAttrExists:!1,unit:""},u=l.getAttributeInfoFromColumn(t);if(e.is(t.dicoType,"array")&&t.dicoType.length>0)for(r=t.dicoType.length,i=0;i<r;i++)if(a=t.dicoType[i]+"."+t.dataIndex,e.is(n.nodeModel)&&Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a)){s=o.getAttributeInfo(t.dicoType[i]+"."+u.dataIndex),e.is(s)&&(l.hasMagnitude(s)?(d.unit=n.nodeModel.options.grid[a].replace(/[0-9\.]+/g,""),d.cellValue=n.nodeModel.options.grid[a],d.cellValue=l.getFormattedValue(d.cellValue,d.unit)):d.cellValue=n.nodeModel.options.grid[a]),d.isAttrExists=!0;break}if(""===d.cellValue){var c=l.getNodeAndColumnInfos(n.nodeModel,t);if(l.isDate(c.attributeInfo)){var g=l.hasRangeDefined(c.attributeInfo),p=n.nodeModel.options.grid[t.dataIndex];d.cellValue=g?e.is(p)?l.getFormattedDate(p):void 0:e.is(p)?l.getDate(p):void 0}}return d};return{getBICellValue:function(e){return g(e).colorCode},getMultiTypeCellValue:function(e){var t=this.getColumnOrGroup(e.columnID);return f(t,e).cellValue},getMultiTypeCellRepresentation:function(t){var n="float";return e.is(t)&&e.is(t.Type)&&"Date"===t.Type&&(n="datetime"),e.is(t)&&e.is(t.Type)&&"Integer"===t.Type&&(n="integer"),n},getMultiTypeCellSemantics:function(e){var t=this.getColumnOrGroup(e.columnID);return{units:f(t,e).unit,viewOptions:{customFormatter:function(e){return l.getFormattedValue(e)}}}},getMultiTypeCellEditableState:function(e){var t,n;return s.areModuleColumnsImmutable(i.getId())?n=!1:(t=this.getColumnOrGroup(e.columnID),n=f(t,e).isAttrExists),n},getBICellValueForExport:function(t){var n="";return e.is(t.cellModel,"string")?n=t.cellModel:(n=g(t),n=e.is(n)?n.tooltip:""),n},setValue:t.debounce((function(t,o){var s,d,c,g,p,f,m=this,h=[];if(f=this.getColumnOrGroup(t.columnID),g=l.getNodeAndColumnInfos(t.nodeModel,f),p=l.isMultiValuated(g.attributeInfo),!l.doesAttributeExist(g.objectToBeModified,g.dataIndex)&&!l.isAttrApplicableForType(g.objectToBeModified,g.dataIndex))return i.warn(r.getNLSValue("TableView.AvailabilityFailure",{key:g.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(l.isBoolean(g.attributeInfo))p&&(o=l.getValueAsArray(o,l.getType(g.attributeInfo)));else if(l.hasRangeDefined(g.attributeInfo,g.attributeDef)){if(!e.is(o))return;o=l.getAuthorizedValue(g.attributeInfo,g.attributeDef,o)}else if(l.isDate(g.attributeInfo)){if(o=e.is(o)?o:"",p)for(h=l.getValueAsArray(o),o=[],c=0;c<h.length;c++){if(d=new Date(h[c]),isNaN(d.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:h[c]})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o.push(Math.floor(d.getTime()/1e3))}else if(d=new Date(o),n.isCloud())o=d.toISOString();else{if(isNaN(d.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:o})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o=Math.floor(d.getTime()/1e3)}t.nodeModel.setAttribute(t.dataIndex,o),this.updateRenderedRow(t.rowID)}else if(p)o=l.getValueAsArray(o,l.getType(g.attributeInfo));else if(e.is(t.cellModel)){if(l.isInteger(g.attributeInfo)&&!Number.isInteger(o))return void i.warn(r.getNLSValue("TableView.InvalidIntegerValue",{attr:g.attributeNLSTitle,value:o}))}else if((s=l.getMaxLength(g.attributeInfo))>0&&o.length>s)return void i.warn(r.getNLSValue("TableView.MaxLengthFailure",{length:o.length,maxLength:s}));"V_SequencingMode"===g.dataIndex?a.setSequencingMode(g.objectToBeModified.id,o,{onFailure:function(){i.warn(r.getNLSValue("SetSequencingModeUI.UpdateFailure"))},onComplete:function(){i.info(r.getNLSValue("SetSequencingModeUI.UpdateSuccess")),i.notify("setSequencingMode")}}):e.is(u)&&u.updateModelAttribute(g.objectToBeModified.id,g,o,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),m._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})}),100,!0),getCellValue:function(t,n){var i=l.getNodeAndColumnInfos(n.nodeModel,t),o=l.isMultiValuated(i.attributeInfo),a=l.hasMagnitude(i.attributeInfo),s=l.hasRangeDefined(i.attributeInfo),d=n.nodeModel.options.grid[t.dataIndex];if("type"===i.attributeName&&(d=r.getNLSValue("Type."+d)),a){d=l.getMagnitudeValue(d,i.attributeInfo,!1);l.getNLSForUnit(i.attributeInfo)}else if(o)l.isDate(i.attributeInfo)&&d&&(d=d.map((function(e){return l.getFormattedDate(e)}))),d=l.getValueAsString(d,l.getType(i.attributeInfo));else if(l.isDate(i.attributeInfo))return d=s?e.is(d)?l.getFormattedDate(d):void 0:e.is(d)?l.getDate(d):void 0;return e.is(d)?d:""},getCustomStringCellValue:function(e){var t=e.nodeModel.getAttributeValue(e.dataIndex),n=r.getNLSValue("Column.MakeOrBuy.Make"),i=r.getNLSValue("Column.MakeOrBuy.Buy");return o.isAKindOf(t,"CreateKit")||o.isAKindOf(t,"CreateAssembly")||o.isAKindOf(t,"CreateMaterial")||o.isAKindOf(t,"Installation")?n:o.isAKindOf(t,"Provide")?i:""},getURLCellValue:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex);return(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=n.defaultValue),{label:i,func:p.bind(this,n,t),getLabel:function(){return this.label}}},getFullOwnerURL:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),o=e.is(i)?a.getReferenceModel(t.nodeModel._referencePID):null,l=e.is(o)?o.get("ds6w:responsible"):"";return{label:e.is(l)?l:e.is(i)?i:"",func:p.bind(this,n,t),getLabel:function(){return this.label}}},hasCellValue:function(t){var n,i,o,r,s,d;if(e.is(t.nodeModel)&&c.isFakeNodeModel(t.nodeModel)||!e.is(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"NonEditable":case"URL":o=!0;break;case"BIEssentials":case"BIEssentialsAltSub":r=g(t),o=!(!e.is(r)||"transparent"===r.colorCode);break;case"DocMgmt":r=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(r,"array")&&r.length>0;break;case"MultiType":o=(r=f(n,t)).isAttrExists,i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),d=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||d):o=!1;break;default:i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),d=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||d):o=!1}return o},getCellValueForDocMgt:function(e){var t;if(!e.isHeader&&(t=e.nodeModel.getAttributeValue(e.dataIndex),Array.isArray(t))){const e=t.length;if(1===e)return t[0].title;if(e>1)return`${t[0].title} ...`}return""},getURLCellValueForExport:function(t){var n=t.cellModel;return t.rowID>=0&&e.is(t.cellModel)&&(n=t.cellModel.getLabel()),n},getGroupingColumnCellValue:function(e){var t,n=this.getColumnOrGroup(e.columnID);return n.dataIndex===d.Type?(t=e.nodeModel.getReferenceType(),r.getNLSValue("Type."+t)):n.dataIndex===d.Reference?e.nodeModel.getReferencePID():void 0}}}})),define("DS/DELWKOViewBehaviors/DELWKOCellManager",["UWA/Core","DS/Utilities/Utils","DS/DELPPWModelServices_FD02/BehaviorUtil"],(function(e,t,n){"use strict";return function(i,o,a,l,r,s){var d=s.getGroupingAdditonalColumns(),u=i.getBehavior("ModelBehavior"),c=i.getBehavior("WUXNodeModelBehavior"),g=function(t){var n;return e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options,t.dataIndex)&&(n=t.nodeModel.options[t.dataIndex]),n},p=function(e,t){var n={};n.node=t.nodeModel,e.command&&s.executeCommand(e.command,n)},f=function(t,n){var i,a,r,s,d={cellValue:"",isAttrExists:!1,unit:""},u=l.getAttributeInfoFromColumn(t);if(e.is(t.dicoType,"array")&&t.dicoType.length>0)for(r=t.dicoType.length,i=0;i<r;i++){var c=l.getNodeAndColumnInfos(n.nodeModel,t),g=l.isAttrApplicableForType(c.objectToBeModified,c.dataIndex);if(a=t.dicoType[i]+"."+t.dataIndex,e.is(n.nodeModel)&&Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a)){s=o.getAttributeInfo(t.dicoType[i]+"."+u.dataIndex),e.is(s)&&l.hasMagnitude(s)&&(d.unit=l.getNLSForUnit(s)),d.cellValue=n.nodeModel.options.grid[a],d.isAttrExists=!0;break}if("MultiType"===t.displayType&&!l.isDate(c.attributeInfo)&&(!e.is(n.nodeModel)||!Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a))&&g){a=t.dataIndex,d.cellValue=n.nodeModel.options.grid[a],d.isAttrExists=!0;break}}if(""===d.cellValue){c=l.getNodeAndColumnInfos(n.nodeModel,t);if(l.isDate(c.attributeInfo)){var p=l.hasRangeDefined(c.attributeInfo),f=n.nodeModel.options.grid[t.dataIndex];d.cellValue=p?e.is(f)?l.getFormattedDate(f):void 0:e.is(f)?l.getDate(f):void 0}}return d};return{getBICellValue:function(e){return g(e).colorCode},getMultiTypeCellValue:function(e){var t=this.getColumnOrGroup(e.columnID);return f(t,e).cellValue},getMultiTypeCellSemantics:function(e){var t=this.getColumnOrGroup(e.columnID);return{units:f(t,e).unit}},getMultiTypeCellEditableState:function(e){var t,n;return s.areModuleColumnsImmutable(i.getId())?n=!1:(t=this.getColumnOrGroup(e.columnID),n=f(t,e).isAttrExists),n},getMultiTypeCellRepresentation:function(t){var n="float";return e.is(t)&&e.is(t.Type)&&"Date"===t.Type&&(n="datetime"),e.is(t)&&e.is(t.Type)&&"Integer"===t.Type&&(n="integer"),n},getBICellValueForExport:function(t){var n="";return e.is(t.cellModel,"string")?n=t.cellModel:(n=g(t),n=e.is(n)?n.tooltip:""),n},setValue:t.debounce((function(t,o){var s,d,c,g,p,f,m=this,h=[];if(f=this.getColumnOrGroup(t.columnID),g=l.getNodeAndColumnInfos(t.nodeModel,f),p=l.isMultiValuated(g.attributeInfo),!l.doesAttributeExist(g.objectToBeModified,g.dataIndex)&&!l.isAttrApplicableForType(g.objectToBeModified,g.dataIndex))return i.warn(r.getNLSValue("TableView.AvailabilityFailure",{key:g.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(l.isBoolean(g.attributeInfo))p&&(o=l.getValueAsArray(o,l.getType(g.attributeInfo)));else if(l.hasRangeDefined(g.attributeInfo,g.attributeDef)){if(!e.is(o))return;o=l.getAuthorizedValue(g.attributeInfo,g.attributeDef,o)}else if(l.isDate(g.attributeInfo)){if(o=e.is(o)?o:"",p)for(h=l.getValueAsArray(o),o=[],c=0;c<h.length;c++){if(d=new Date(h[c]),isNaN(d.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:h[c]})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o.push(Math.floor(d.getTime()/1e3))}else if(d=new Date(o),n.isCloud())o=d.toISOString();else{if(isNaN(d.getTime()))return i.warn(r.getNLSValue("TableView.InvalidDateMessage",{date:o})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o=Math.floor(d.getTime()/1e3)}t.nodeModel.setAttribute(t.dataIndex,o),this.updateRenderedRow(t.rowID)}else if(p)o=l.getValueAsArray(o,l.getType(g.attributeInfo));else if(e.is(t.cellModel)){if(l.isInteger(g.attributeInfo)&&!Number.isInteger(o))return void i.warn(r.getNLSValue("TableView.InvalidIntegerValue",{attr:g.attributeNLSTitle,value:o}))}else if((s=l.getMaxLength(g.attributeInfo))>0&&o.length>s)return void i.warn(r.getNLSValue("TableView.MaxLengthFailure",{length:o.length,maxLength:s}));"V_SequencingMode"===g.dataIndex?a.setSequencingMode(g.objectToBeModified.id,o,{onFailure:function(){i.warn(r.getNLSValue("SetSequencingModeUI.UpdateFailure"))},onComplete:function(){i.info(r.getNLSValue("SetSequencingModeUI.UpdateSuccess")),i.notify("setSequencingMode")}}):e.is(u)&&u.updateModelAttribute(g.objectToBeModified.id,g,o,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),m._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})}),100,!0),getCellValue:function(t,n){var i=l.getNodeAndColumnInfos(n.nodeModel,t),o=l.isMultiValuated(i.attributeInfo),a=l.hasMagnitude(i.attributeInfo),s=l.hasRangeDefined(i.attributeInfo),d=n.nodeModel.options.grid[t.dataIndex];if("type"===i.attributeName&&(d=r.getNLSValue("Type."+d)),a)d=l.getMagnitudeValue(d,i.attributeInfo,!1);else if(o)l.isDate(i.attributeInfo)&&d&&(d=d.map((function(e){return l.getFormattedDate(e)}))),d=l.getValueAsString(d,l.getType(i.attributeInfo));else if(l.isDate(i.attributeInfo))return d=s?e.is(d)?l.getFormattedDate(d):void 0:e.is(d)?l.getDate(d):void 0;return e.is(d)?d:""},getCustomStringCellValue:function(e){var t=e.nodeModel.getAttributeValue(e.dataIndex),n=r.getNLSValue("Column.MakeOrBuy.Make"),i=r.getNLSValue("Column.MakeOrBuy.Buy");return o.isAKindOf(t,"CreateKit")||o.isAKindOf(t,"CreateAssembly")||o.isAKindOf(t,"CreateMaterial")||o.isAKindOf(t,"Installation")?n:o.isAKindOf(t,"Provide")?i:""},getURLCellValue:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex);return(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=n.defaultValue),{label:i,func:p.bind(this,n,t),getLabel:function(){return this.label}}},getFullOwnerURL:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),o=e.is(i)?a.getReferenceModel(t.nodeModel._referencePID):null,l=e.is(o)?o.get("ds6w:responsible"):"";return{label:e.is(l)?l:e.is(i)?i:"",func:p.bind(this,n,t),getLabel:function(){return this.label}}},hasCellValue:function(t){var n,i,o,r,s,d;if(e.is(t.nodeModel)&&c.isFakeNodeModel(t.nodeModel)||!e.is(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"NonEditable":case"URL":o=!0;break;case"BIEssentials":case"BIEssentialsAltSub":r=g(t),o=!(!e.is(r)||"transparent"===r.colorCode);break;case"DocMgmt":r=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(r,"array")&&r.length>0;break;case"NonEditableMultiType":case"MultiType":o=(r=f(n,t)).isAttrExists,i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),d=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||d):o=!1;break;default:i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),d=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||d):o=!1}return o},getCellValueForDocMgt:function(e){var t;if(!e.isHeader&&(t=e.nodeModel.getAttributeValue(e.dataIndex),Array.isArray(t))){const e=t.length;if(1===e)return t[0].title;if(e>1)return`${t[0].title} ...`}return""},getURLCellValueForExport:function(t){var n=t.cellModel;return t.rowID>=0&&e.is(t.cellModel)&&(n=t.cellModel.getLabel()),n},getGroupingColumnCellValue:function(e){var t,n=this.getColumnOrGroup(e.columnID);return n.dataIndex===d.Type?(t=e.nodeModel.getReferenceType(),r.getNLSValue("Type."+t)):n.dataIndex===d.Reference?e.nodeModel.getReferencePID():void 0}}}})),define("DS/DELWKOViewBehaviors/DELWKOExpandFilterBehavior",["UWA/Core","UWA/Promise"],(function(e,t){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","ProxyPlugin","TreeViewPlugin","RootsPlugin","BIPlugin"],creator:function(n,i,o,a,l,r,s,d){var u,c,g,p,f,m,h,b,y,C,I,v,D,T,V,w,S,M,L=["union","intersection","minus"],E=["config_filter","sequence_filter","root_path_physicalid"],A=[];return f=function(t){var n;return n=i.getBehavior(t),e.is(n)||i.debug(t+"is not available"),n},m=function(t){var n=f("WUXNodeModelBehavior"),i=!1;return e.is(n)&&(i=n.getRoots().some((function(e){return-1!==t.indexOf(e)}))),i},h=function(t){var n,o,a,l=t||null,s=null,d=[];r.getActiveView()===i.getId()&&(l=e.is(l,"string")?JSON.parse(l):l,n=e.is(l)?l.CVQueryV2:{},d=e.is(l.filterRootIds)?l.filterRootIds:[],a=!!e.is(l.empty)&&l.empty,o=d.reduce((function(t,n){var i;return i=e.is(n,"array")&&n.length>0?n[0]:n,e.is(i,"string")&&t.push(i),t}),[]),m(o)&&(s=e.is(l.CVQuery3D)?l.CVQuery3D:null,a?y(o,n,s):b(o,n,s)))},b=function(n,l,r){var s={};i.notify("startProgress",s);var u=[];n.forEach((function(e){C(e,l),o.needToQueryForChildren(e)&&u.push(new t((function(t,n){var i=function(){n(a.getNLSValue("ExpandFilter.ApplyFilter.ExpandFailed"))},l={ordered:!1,context:this,doNotExpand:!0,expandLevel:-1,onFailure:i,onTimeout:i,onCancel:i};o.getDescendantsFromServer(e,(function(e){t(e)}),l)})))})),e.Promise.all(u).then((function(u){new t((function(t,i){var s,d=function(){i(a.getNLSValue("ExpandFilter.ApplyFilter.ExpandFailed"))};e.is(l)&&e.is(n)&&(s={ordered:!1,context:this,doNotExpand:!0,expandLevel:-1,filterQuery:l,filterQuery3d:r,onFailure:d,onTimeout:d,onCancel:d,forceDBMode:!1},o.getDescendantsFromServer(n,(function(e){t(e)}),s))})).then((function(t){var o;0===(e.is(t.instancesAndReferences)?t.instancesAndReferences:[]).length?i.warn(a.getNLSValue("ExpandFilter.EmptyResult.Message")):(o=f("Viewer3DBehavior"),e.is(o)&&(!0===p&&i.notify("Filter3DApplied"),!0===g&&o.unHideAll3D())),!0===d.getBICmdState()&&i.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),v(n,l),i.notify("stopProgress",s),i.notify("ExpandFilterApplied")}),(function(e){i.warn(e),i.notify("stopProgress",s)}))}))},y=function(t,n){var a=f("Viewer3DBehavior"),l={};0<t.length&&t.every((function(e){return""!==e}))&&(i.notify("startProgress",l),t.forEach((function(e){I(e),o.removeFilterFromCollection(e,n)})),e.is(a)&&(!0===p&&i.notify("Filter3DApplied"),!0===g&&a.unHideAll3D()),!0===d.getBICmdState()&&i.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),v(t),i.notify("stopProgress",l),i.notify("ExpandFilterRemoved"))},C=function(t,n){var i,o,a={operator:null,filters:[]};i=function(e,t){var n,i=null;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)>-1){i=n;break}return i}(n,L),e.is(i)&&(a.operator=i,o=n[i].expand,Array.isArray(o)&&(a.filters=o.map((function(e){var n={};return Object.keys(e).filter((function(n){var i,o,a,l=!1;return(i=E.indexOf(n)>-1)&&"root_path_physicalid"===n&&(o=e[n],Array.isArray(o)&&o.length>0&&(a=o[0],Array.isArray(a)&&(l=1===a.length&&a[0]===t))),!l&&i})).forEach((function(t){n[t]=e[t]})),n})))),a.originalFilterQuery=n,s.addRootFilter(t,a)},I=function(e){s.removeRootFilter(e)},v=function(t,n){var i,o=f("WUXNodeModelBehavior");i=e.is(n)?n:null,e.is(o)&&t.forEach((function(e){o.filterChildren(e,i)}))},D=function(){var t,n,i=f("WUXNodeModelBehavior");e.is(u)&&e.is(i)&&(n=c.appContext.widget,t=i.getRoots(),u.resetNGFilterUI({appId:n.data.app3DSharedId,widgetId:n.getId(),rootIds:t}))},T=function(){var t=o.isAuthoringMode(),n=f("WUXNodeModelBehavior"),l="ExpandFilter.AuthoringON.FilterDisabled";e.is(n)&&t&&n.isFilterAppliedInAnyRoot()&&(!0===d.getBICmdState()&&(i.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),l="ExpandFilter.AuthoringON.FilterAndBIDisabled"),D(),n.removeFilterFromAllRoots().forEach((function(e){I(e)})),i.info(a.getNLSValue(l)),i.notify("ExpandFilterRemovedOnAuthoring"))},V=function(e){f("TaggerBehavior").onColorize(e)},w=function(){f("TaggerBehavior").onUnColorize()},S=function(t){e.is(u)&&u.removeRoot(t)},M=function(){e.is(u)&&(r.getActiveView()!==i.getId()?u.deactivate():u.activate())},{listenTo:function(){return{authoringMode:T,removeRoot:S,activeViewChange:M}},onStart:function(t){var i,o;c=n.getConfig(),i=!!e.is(t.disableExpandFilter)&&t.disableExpandFilter,g=!!e.is(t.unhide3DOnFilterApplication,"boolean")&&t.unhide3DOnFilterApplication,p=!!e.is(t.support3DFilter,"boolean")&&t.support3DFilter,i||(o=c.appContext.widget.data,u=l.create(l.PROXY.FilterProxy,{processingMode:"appProcessing",appId:o.app3DSharedId,colorize:!0,volumeFilterAvailable:1,synthesis_priority:1,ExpandSynthesisON:!0,shareFilterSpec:!0}),e.is(u.setNGFilterOptions,"function")&&(u.setNGFilterOptions({expandServices:"progressive",appId:o.app3DSharedId}),u.setSynthesisMode("occurrence")),u.addEvent("ApplyNGFilter",h),u.addEvent("FilterBIColorize",V),u.addEvent("FilterBIUnColorize",w),A.push(n.addExternalListener("RemoveNGFilter",h)))},onStop:function(){var t,i;for(t=0,i=A.length;t<i;t++)n.removeExternalListener(A[t]);A=[],e.is(u)&&(u.removeEvent("ApplyNGFilter"),u.removeEvent("FilterBIColorize"),u.removeEvent("FilterBIUnColorize"),D(),u.destroy(),u=null)},resetFilterUI:function(){D()},clear:function(){var t=f("TaggerBehavior");e.is(u)&&(u.cleanProxy(),t.clear())},getFilterProxy:function(){return u},setTagsWithExpandSynthesis:function(t){var n,i=[t];e.is(u)&&(n={type_filter_bo:["PLMCoreReference"]},u.setTagsWithExpandSynthesis(i,n))},applyFilter:function(e,t){u.areRootsSharable(e.objIds,e.biProxyCtx).then((function(n){n.forEach((function(t){var n=t.rootId,i=t.hasFilter;u.removeRoot(n),!0===i&&u.shareFilterSpec({fromRootId:n,fromSourceCtx:e.biProxyCtx,fromDropOnFilter:!1,callback:function(e){1===e.success.length&&b([n],e.success[0].filter.CVQuery,null)}})})),t()}))}}}}})),define("DS/DELWKOViewBehaviors/DELWKORelationsUtilCloud",["UWA/Core"],(function(e){"use strict";return function(t,n,i,o,a,l){var r,s,d;return d=function(t,n,i,a){var l;return!(o.getImplementLinkType()===a&&(l=o.getPathToScope(i),!e.equals(t,l)&&!e.equals(n,l)))},r=function(l,r,s,d){var u,c,g,p,f,m,h,b={},y=[],C=e.is(l,"array")?l:[l];if(u=s||r,e.is(u)){for(y=n.getImpacted(u),g=t.getBehavior("LinkBehavior"),n.getReference(u),h=0;h<y.length;h++)switch((f=y[h]).get("type")){case"DELAsmProcessCanUseCnx":g.getSecondaryRscLinksFromPrimaryLink(f).forEach((function(e){(m=e.clone()).set("from",f.get("from")),y.splice(h+1,0,m),h+=1}));break;case"SecondaryCandidateResourceLink":p=g.getConnection(f.get("from")),e.is(p)&&((m=f.clone()).set("from",p.get("from")),y.splice(h,1,m))}return C.forEach((function(l){var u;"relation"===l.split(".")[1]&&(b[l]=[],(u=i.getRelationsConfiguredOnColumn(l))&&y.forEach((function(g){var p,f,m,h,y,C,I,v,D,T,V,w,S,M,L,E=g.get("from"),A=g.get("to"),x=g.get("type"),P=!1,R=null,O="",N=function(t){var n=function(t,n){var i="";return t.length>0?t.forEach((function(t){if("Relation"===n||"relation"===n){let n=g.get("type");if("ProcessImplementLinkOcc"!==n&&"ItemSpecOcc"!==n||"V_usage"!==t.name)V=e.is(g.get(t.name))?g.get(t.name):"";else{let e=o.getRoleFromModelOrComputed(g.get("PID"));V=e.nlsText}}else V=e.is(f.get(t.name))?f.get(t.name):"";""!==i&&(i+=" "),i+=V})):i=e.is(f)?f.get("V_Name")||f.get("name")||f.get("PLM_ExternalId"):a.getNLSValue("TableView.RelationsColumn.Unknown"),i}(t.displayAttribute,t.displayType);return e.is(n)&&n!=a.getNLSValue("TableView.RelationsColumn.Unknown")?(n="Relation"===t.displayType&&"Relation,Type"===t.attrSources.toString()?"("+n+")":n,T=function(t,n){return D=e.is(t)&&e.is(t.display_icon)?t.display_icon:null,T="relation"===D?x:n}(t.displayOptions,t.modelTypeName)):T="Warning",{Icon:T,Value:O+=n}};if(Array.isArray(E)&&Array.isArray(A)){if(E=(S=E)[S.length-1],A=(M=A)[M.length-1],Array.isArray(d)&&e.is(o.isImplementLinkValidForOccPath,"function")&&!o.isImplementLinkValidForOccPath(S,M,d))return}else Array.isArray(E)||!Array.isArray(A)||"ProcessImplementLink"!==x&&"ProcessImplementLinkOcc"!==x&&"ItemSpecOcc"!==x||(L=A[A.length-2],A=A[A.length-1]);if(p=s===E||r===E?A:E,h=e.is(x)?x:null,y=e.is(u[h])?u[h]:null,e.is(y)&&e.is(y.attribute_source)&&e.is(y.direction))switch(y.direction){case"To":P=s===E||r===E;break;case"From":P=s===A||r===A;break;case"Both":P=!0;break;default:P=!1,t.debug("Direction configured for "+h+" in XML is invalid.")}if(!0===P){p&&(Array.isArray(p)?f=n.getInstance(p[p.length-1]):L?(m=n.getInstance(L),f=n.getReferenceModel(p)):"ProcessImplementLink"===h&&n.isInstance(p)?(m=n.getInstance(p),f=n.getReferenceModel(m._attributes.isInstanceOf)):f=n.getReferenceModel(p));let t,o=y.attribute_source.split(",");for(O="",t=0;t<o.length;t++){switch(I=o[t]){case"Relation":C=h;break;case"Type":C=e.is(f)?f.get("type"):null}if(v=i.getRelationsColumnDisplayOptions(C),c=e.is(C)?u[C]:null,i.isObjectConstraint()&&l===i.getConstraintRelationName()?c&&(R=c):R=e.is(v.Attribute)?v.Attribute:[],0===t&&e.is(C)&&e.is(m)&&("Installation"===C||"Transform"===C)&&(O="("+m._attributes.PLM_ExternalID+") "),"ItemSpecOcc"===h){var F=n.getReferenceModel(f);if(e.is(F))C=F.get("V_discipline")}w=N({displayAttribute:R,displayType:I,displayOptions:v,modelTypeName:C,attrSources:o})}b[l].push({Icon:w.Icon,Value:w.Value})}})))})),b}},s=function(i,o,a){var l,s={},u=[],c=t.getBehavior("WUXNodeModelBehavior");if(e.is(c)){if(e.is(o))return n.getImpacted(o,!1,{excludeRelationTypes:["PrimaryResourceLinkDetail","SecondaryResourceLinkDetail"]}).forEach((function(t){var g,p,f,m,h=t.get("from"),b=t.get("to"),y=t.get("type");e.is(h,"array")&&e.is(b,"array")&&e.is(a,"array")&&(h=(f=h)[f.length-1],b=(m=b)[m.length-1],!d(f,m,a,y))||(p=o===h?b:h,e.is(p)&&(g=e.is(p,"array")?n.getInstance(p[p.length-1]):n.getReference(p),l=c.getNodeInfo(g.get("PID"),!0),e.is(l)&&(e.is(l.instancePID)?s=r(i,l.referencePID,l.instancePID,a):e.is(l.referencePID)&&(s=r(i,l.referencePID,null,a)),e.is(s)&&(u[g.id]={attributes:s}))))})),u}else t.debug("nodeModelBehavior is not available to update the relation attributes.")},{fillNodeOptions:function(o,s,d,u){var c,g,p=!e.is(d)?o.referencePID:d.PID,f=r(s,p,null,u),m=n.needToQueryForConnections(p),h=i.getInverseRelationNameSet(),b=t.getPreferenceValue("navigateOnIndex"),y="Index"===b;for(g in f)if(f.hasOwnProperty(g)){if(y&&m&&h.has(g)){e.is(o.grid[g])||(o.grid[g]=[{Value:a.getNLSValue("Info.RelationsNotLoaded.Title")}]);continue}Array.isArray(o.grid[g])?(o.grid[g]=o.grid[g].filter((function(e){return e.Value!==a.getNLSValue("Info.RelationsNotLoaded.Title")})),e.is(d)&&(o.grid[g]=o.grid[g].concat(f[g]))):o.grid[g]=f[g]}if("IndexRelationsOnDemand"===b&&m)for(c in o.grid)o.grid.hasOwnProperty(c)&&"relation"===c.split(".")[1]&&(l.isMGALoadRelationsOnDemand()?o.grid[c].push({Value:"",Icon:"LinksNotFetched"}):o.grid[c].push({Value:a.getNLSValue("Info.RelationsNotLoaded.Title"),Icon:null}));return o},getRelationAttributes:function(n,o,a){var l,d,u,c,g,p,f,m,h=[],b=[],y=t.getBehavior("WUXNodeModelBehavior");if(e.is(y)){if(l=function(t){f=y.getNodeInfo(t),e.is(f,"array")&&f.forEach((function(t){e.is(t.instancePID)?(m=e.is(t.absPath,"array")?t.absPath:null,p=r(o,t.referencePID,t.instancePID,m),b[t.absPath]={attributes:p}):e.is(t.referencePID)&&(p=r(o,t.referencePID),b[t.referencePID]={attributes:p})}))},n.isConnection())l(n.get("from")),Array.isArray(n.get("to"))&&"ProcessImplementLink"===n.get("type")?l(n.get("to")[n.get("to").length-1]):l(n.get("to"));else if(g=n.changedAttributes(),e.is(g))for(d=n.get("type"),c=i.getRelationsColumnDisplayOptions(d),e.is(c)?c.Attribute.forEach((function(e){h.push(e.name)})):h[0]="V_Name",u=0;u<h.length;u++)if(g.hasOwnProperty(h[u])){b=s(o,n.get("PID"),a);break}return b}t.debug("nodeModelBehavior is not available to update the relation attributes.")}}}})),define("DS/DELWKOViewBehaviors/DELWKORelationsColumnManager",["UWA/Core"],(function(e){"use strict";return function(t,n,i){var o,a,l={"SerializedFrom.relation":{command:"DELWKOWorkBookCmdHdr"},"AssetContext.relation":{command:"DELWKOFAMCmdHdr"},"Build.relation":{command:"DELWKOExploreInWebAppCmdHdr"}};return o=function(n){var o={},a=t.getBehavior("LinkBehavior"),r=t.getBehavior("ModelBehavior"),s=[];if(e.is(n.nodeModel)&&e.is(n.nodeModel.getInstancePID())&&null!=n.nodeModel.getInstancePID()){s=a.getImpactedConnections(n.nodeModel.getInstancePID()),r.getReferenceModel(n.nodeModel.getInstancePID()),s.forEach((t=>{e.is(t)&&"DELIsSerializedFromOp"===t._attributes.type&&(o.opmodel=t._attributes.to[0])}));var d=r.getRootReferenceFromInstance(n.nodeModel.getInstancePID());if(e.is(d))a.getImpactedConnections(d.get("PID")).forEach((t=>{e.is(t)&&"DELIsSerializedFrom"===t._attributes.type&&(o.sysmodel=t._attributes.to),e.is(t)&&"DELIsGeneratedFromProcessFilteredBy"===t._attributes.type&&(o.unitPID=t._attributes.to)}))}else s=a.getImpactedConnections(n.nodeModel.getReferencePID()),r.getReferenceModel(n.nodeModel.getReferencePID()),s.forEach((t=>{e.is(t)&&"DELIsSerializedFrom"===t._attributes.type&&(o.sysmodel=t._attributes.to),e.is(t)&&"DELIsGeneratedFromProcessFilteredBy"===t._attributes.type&&(o.unitPID=t._attributes.to)}));l[n.dataIndex]?(o.cellInfos=n,o.connections=s,i.executeCommand_V2(l[n.dataIndex].command,o)):(o.node=n.nodeModel,i.executeCommand("Relations",o))},a=function(a){var l,r=void 0,s=this,d=[],u=this.getColumnOrGroup(a.columnID),c=a.nodeModel.getAttributeValue(u.dataIndex);return e.is(c,"array")&&c.length>0&&((l=c).forEach((function(e){d.push({icon:{iconPath:n.getIconURLFromKey(e.Icon),iconSize:{width:"22px",height:"22px"}},label:e.Value,iconName:e.Icon,func:i.areModuleColumnsImmutable(t.getId())?null:o.bind(s,a),relations:l})})),d.func=i.areModuleColumnsImmutable(t.getId())?null:o.bind(s,a),r=d),r},{getCellValueForExport:function(t){var n,i,o="";return t.rowID<0?t.cellModel:(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),e.is(i,"array")&&i.forEach((function(t,n){e.is(t.Value)?o+=t.Value:o+=t.toString(),n!==i.length-1&&(o+=", ")})),o)},getCellValue:function(e){return a.call(this,e)},hasCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.options.grid;return Array.isArray(n[t.dataIndex])&&0!==n[t.dataIndex].length},getCellClassName:function(t){var n,i="";return e.is(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(t.dataIndex),i=Array.isArray(n)&&n.length>1?"relation-column-multivalued":"relation-column"),i},getCellSemantics:function(e){return{allowMultipleValuesFlag:!0,viewOptions:{multipleValuesSeparator:t.getPreferenceValue("separator")}}}}}})),define("DS/DELWKOViewBehaviors/DELWKOWUXNodeModelBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors_FD02/BulkTreeSearchHelper","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/TreeDocument","DS/DELWKOViewBehaviors/DELWKOTreeNodeModel","DS/DELPPWViewBehaviors_FD02/WUXNodeModelBehavior/Mutex"],(function(e,t,n,i,o,a){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","ImplementPlugin","KeyBindingPlugin","RootsPlugin","CfgColumnsPlugin","PlatformPlugin","DicoPlugin"],creator:function(l,r,s,d,u,c,g,p,f,m,h){var b,y,C,I,v,D,T,V,w,S,M,L,E,A,x,P,R,O,N,F,B,U,k,W,_,j,G,H,K,X,z,Q,q,J,Y,Z,$,ee,te,ne,ie,oe,ae,le,re,se,de,ue,ce,ge,pe,fe,me="noChildren",he="expanding",be="partiallyExpanded",ye="expanded",Ce="collapsed",Ie={virtualColumnID:null,sortOrder:null},ve=[],De=0,Te=new i({useAsyncPreExpand:!0,shouldAcceptDrag:function(t){return e.is(t.getReferencePID)},shouldAcceptDrop:function(t){var n=t.dropNode;return!e.is(n)||e.is(n.getReferencePID)}}),Ve=new n(Te,s);(b=Te.getXSO())&&b.onChange((function(t){var n,i,o,a,l,s,d,c,g,p=[],f=[],m=r.getBehavior("ViewBehavior");if(!re(t)){for(s=t.getInstancePID()||t.getReferencePID(),d=t.isSelected(),c=Te.getSelectedNodes(),g=t.getAbsolutePath(),i=0,o=c.length;i<o;i++)a=c[i],e.is(a)&&e.is(a.getReferencePID)&&(l=a.getInstancePID()||a.getReferencePID(),"MANAGECAPABLERESOURCESMOD"===r.getId()&&(l=a.getLinkPID()),p.push(l),f.push({id:l,path:a.getAbsolutePath()}));u.setSelection(r.getId(),f),n={sourceId:r.getId(),selectedNodeIds:p,changed:{nodeId:s,isSelected:d,absPath:g}},e.is(A)&&!0!==t.from3DViewer?A.crossHighlight(s,g,d):t.from3DViewer=null,e.is(m)&&!0===d&&m.setActiveView(),r.notify("select",n)}})),x=function(){var t,n,i=function(){};t=function(t){var n,i,o,a,l;if(t.preventDefault(),t.stopPropagation(),o=function(){var t,n=Te.getRoots();e.is(n)&&(t=n[0],e.is(t)&&t.select())},n=Te.getSelectedNodes())if(a=n[0])if(a.hasChildren()||a.getNextBrother())a.getNextVisibleNode().select(),a.unselect();else{if(a.isRoot(!0))return a.unselect(),void o();for(l=a.getParent();l&&!l.getNextBrother()&&!l.isRoot(!0);)l=l.getParent();if(i=l.getNextBrother())i.select(),a.unselect();else{if(!l.getPreviousBrother())return a.unselect(),void o();l.getPreviousBrother().select(),a.unselect()}}else o();else o()},n=function(t){var n,i,o=Te.getSelectedNodes(),a=function(){var t,n,i;t=Te.getRoots(),e.is(t,"array")&&t.length>0&&(i=(n=t[t.length-1]).getVisibleChildren(!1,!0),(e.is(i,"array")&&i.length>0?i[i.length-1]:n).select())};if(t.preventDefault(),t.stopPropagation(),o)if(n=o[0]){if(0===n._rowID)return n.unselect(),void a();i=n.getPreviousVisibleNode(),n.unselect(),i.select()}else a();else a()},g.createHandler({domElement:r.getElement(),onTab:t,onDownArrow:t,onShiftTab:n,onUpArrow:n,onCtrlA:function(e){Te.selectAll(),e.preventDefault(),e.stopPropagation()},onCtrlC:i,onCtrlV:i,onCtrlX:i,onSuppr:i,onBackspace:i})},P=function(t,n){var i,o;return n=n||!1,o=function(t){var i=[],o=null;return o=Te.getTreeNodeModel(t[0]),e.is(o)&&0!==o.length?("Installation"!==o[0]._type&&"Transform"!==o[0]._type||o[0]._referencePID!==t[t.length-1]||(n=!0,t=[t[0]]),1===t.length?n&&(o=o[0]):t.length>1&&(o.forEach((function(e){var n,o,a,l,r=e;for(n=1;n<t.length;n++){for(a=r.getChildren(!0),l=!1,o=0;o<a.length;o++)if(a[o].getInstancePID()===t[n]){r=a[o],l=!0;break}if(!l)break}l&&i.push(r)})),o=i.length>0?n?i[0]:i:null),o):null},Array.isArray(t)&&t.length>0?i=o(t):e.is(t,"string")?(i=Te.getTreeNodeModel(t,{returnFirstOne:n}),Array.isArray(i)&&i.length<1&&(i=null)):(r.debug("nodeId is not valid."),i=null),i},R=function(e,t){return Ve.getNodeModels(e,t)},O=function(e){var t,n,i=Te.getRoots(!0),o=null;for(n=i.length,t=0;t<n;t++)if(i[t].getReferencePID()===e){o=i[t];break}return o},N=function(){var e=Te.getRoots();return Array.isArray(e)&&e.length<=0},F=function(t,n,i,a){r.getBehavior("TaggerBehavior");var l,s,d,u,c,g=r.getBehavior("BIBehavior"),f=r.getBehavior("ExpandFilterBehavior"),m=!1,h={nodeOptions:{},taggerOptions:{}};return e.is(n)?(d=""!==(c=n.getAbsolutePath().toString())?c.concat(",",t.instancePID):t.instancePID,u=n.getRIRpath().join(",")+","+t.instancePID+","+t.referencePID):(d=t.referencePID,u=t.referencePID),g&&(h=g.getNodeOptions(d,u),e.merge(t,h.nodeOptions)),s=new o(t),e.is(n)?(!0===a&&(i=De++,m=!0),n.addChild(s,i,m)):(Te.addRoot(s),e.is(f)&&f.setTagsWithExpandSynthesis(s.getReferencePID()),!0!==N()&&(l=r.getBehavior("DropZoneViewBehavior"),e.is(l)&&l.hide()),!0===y&&p.addRoot(r.getId(),s.getID())),e.is(t.fromXEN)&&(s.stringIdentifier=t.referencePID,s.fromXEN=t.fromXEN),B(s),s},B=function(t){var n=!1;e.is(t.fromXEN)&&t.fromXEN&&(n=t.fromXEN),(e.is(I)||e.is(D)||e.is(v))&&(c.getScopeLinksOfImplementing(t.getID(),n).length>0?U(t,I.badgeIcon):c.getPartialScopeLinksOfImplementing(t.getID(),n).length>0?U(t,D.badgeIcon):c.getResultingProductLinksOfImplementing(t.getID(),n).length>0&&U(t,v.badgeIcon))},le=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)||/[/]?((\.|\.\.)*?([/]))*?(([a-zA-Z0-9_ ]+)\/)*?([a-zA-Z0-9_ ]+)\.([a-z]{2,})/.test(e)},U=function(t,n){var i=e.is(n)?d.getIconURLFromKey(n):"",o={bottomLeft:le(i)?{iconPath:i,iconSize:{width:"16px",height:"16px"}}:""};Array.isArray(t)?t.forEach((function(e){e.updateBadge(o)})):t.updateBadge(o)},J=function(e,t){var n,i,o=null;if(t&&(i=t.getChildren(!0),Array.isArray(i)&&i.length>0))for(n=0;n<i.length;n++)if(e===i[n].options.instancePID){o=i[n];break}return o},ue=function(t,n){var i,o,a,l=r.getBehavior("TreeListViewBehavior"),d=r.getBehavior("GraphViewBehavior");return n=n||{},i=o=l.getReferenceNodeOptions(t),e.is(d)&&(a=d.getReferenceNodeOptions(t),i.grid=e.merge(o.grid,a.grid)),e.is(n.fromXEN)&&(i.fromXEN=n.fromXEN),!n.fromXEN&&(s.needToQueryForChildren(t)||e.is(n.forceIntializeChildren)&&n.forceIntializeChildren)&&(i.children=[]),e.is(i.expandState===me)&&(i.children=[]),F(i)},ce=function(t,n,i,o,a){var l,d,u,c,g=r.getBehavior("TreeListViewBehavior"),p=r.getBehavior("GraphViewBehavior");return a=a||{},l=i.getAbsolutePath().concat(t.get("PID")),d=u=g.getInstanceNodeOptions(n,t,l),e.is(p)&&(c=p.getInstanceNodeOptions(n,t),d.grid=e.merge(u.grid,c.grid)),(s.needToQueryForChildren(n)||e.is(a.forceIntializeChildren)&&a.forceIntializeChildren)&&(d.children=[],e.is(a.fromXEN)&&(d.fromXEN=a.fromXEN)),P(d.referencePID,!0),a.isFlatView?F(d,null,o,a.isFlatView):F(d,i,o,a.isFlatView)},W=function(t,n,i){var o,a,l,d,u,c,g,p=i||{},f=r.getBehavior("TreeListViewBehavior"),m=e.is(p.onEndAddToNodeList,"function")?p.onEndAddToNodeList:null,b=!0;if(e.is(m)&&delete p.onEndAddToNodeList,g=function(t,n){l.getRoot(!0).isRootFiltered()?Z(l):s.needToQueryForChildren(t)?Z(l,be):Z(l),e.is(m)&&m(t,n)},!e.is(t,"string"))return r.debug("_addToNodeModelListRecursive: invalid PID."),void g(null,null);if(e.is(f)){if(c=function(){_(l,p),g(o,l)},e.is(n))if(a=s.getInstance(t),e.is(a)){if(o=s.getReferenceModelFromInstance(a),!e.is(o)||h.isAKindOf(o,"Document"))return;l=J(t,n),e.is(l)&&(l.getReferencePID()!==a.get("isInstanceOf")?(d=l._getLocalID(),n.removeChild(l)):(b=!1,u=f.getUpdateNodeOptions(a,l),X(t,u),k(a,l.getAbsolutePath()))),b&&(l=P(p.rootId,!0),p.rootNode=l,l=ce(a,o,n,d,p))}else o=s.getReference(t);else(o=s.getReference(t))&&(e.is(p.loadRootOnly)&&p.loadRootOnly&&(p.expandLevel=0),l=P(t,!0),e.is(l)&&(l.isRoot(!0)||e.is(p.updateItem)&&!0===p.updateItem)?(u=f.getUpdateNodeOptions(o),X(t,u)):l=ue(o,p));p.loadChildren?a?c():!V&&s.needToQueryForChildren(o)?e.is(p.loadRootOnly)&&p.loadRootOnly&&!s.needToQueryForConnections(o)?c():l._expandState!=me&&(p=e.merge(p,{silentMode:!0}),Z(l,he),s.getDescendantsFromServer(o.get("PID"),c,p)):!V&&e.is(p.withLinksResolved)&&p.withLinksResolved&&s.needToQueryForConnections(o)&&!0!==p.isFlatView?(Z(l,he),s.findMissingLinkedObjects(o.get("PID"),c,p)):l.hasChildren()?c():e.is(p.loadRootOnly)&&p.loadRootOnly&&!e.is(p.auxiliaryView)&&!s.needToQueryForConnections(o)?(g(o,l),Z(l,be)):g(me):g(o,l)}else r.debug("treeListViewBehavior is undefined")},_=function(t,n){var i,o=n||{},a=e.is(o.filterQuery)?o.filterQuery:null,l=r.getBehavior("TreeListViewBehavior");e.is(t)&&t.removeChildren(),Te.prepareUpdate(),i=s.getFilteredInstancesFromCollection(t.getReferencePID(),a),e.is(Ie)&&e.is(Ie.virtualColumnID)&&e.is(Ie.sortOrder)?l.getDataGridView().reapplySortModel():i=(i=(i=i.map((function(e,t){return{position:t,data:e}}))).sort((function(e,t){var n=e.data.get("V_TreeOrder"),i=t.data.get("V_TreeOrder");return n&&i?Number(n)-Number(i):e.position-t.position}))).map((function(e){return e.data})),i.forEach((function(e){W(e.id,t,o)})),Te.pushUpdate()},$=function(e){var t,n=!1,i=e.getReferencePID();return s.needToQueryForChildren(i)||(t=s.getInstancesFromCollection(i),n=e.getChildren(!0).length===t.length),n},j=function(t){var n,i,o,a,l,u,c,g,p,f,m=null,h=!1,b={};if(u=function(){r.notify("startProgress",b),m.prepareUpdate()},c=function(t){m.preExpandDone(),m.pushUpdate(),e.is(t)&&""!==t&&Z(m,t),r.notify("stopProgress",b),e.is(A)&&A.reHighlightMyView(),r.notify("onNodeExpanded")},o=function(){var t="";(!m.hasChildren()||!p||e.is(n.previousNodeState)&&n.previousNodeState[m.getReferencePID()]===be)&&_(m,{loadChildren:!0}),m.hasChildren()||(t=me),c(t);var i=r.getBehavior("TreeListViewBehavior").getDataGridView();if(e.is(i)){var o=i.getFilterViewManager();if(e.is(o)){var a=o.filterManager;if(e.is(a)){var l=a.getFilters().label;if(e.is(l)){var s=l.filterModel;e.is(s)&&e.is(s.nodes)&&s.nodes.length>0&&a.publish("filterModelChange",{propertyId:"label",filter:a.getFilters().label})}}}}},a=function(){r.warn(d.getNLSValue("Error.ExpandFailed.Title")),g.setAdditionalInfo({queriedForChildren:!1}),c(h?Ce:be)},l=function(){r.warn(d.getNLSValue("Info.ExpandCanceled.Title")),g.setAdditionalInfo({queriedForChildren:!1}),c(h?Ce:be)},e.is(t)&&e.is(t.data)&&e.is(t.data.nodeModel)){if(re(t.data.nodeModel))return void t.target.preExpandDone();if(n=t.data,m=n.nodeModel,g=s.getReference(m.getReferencePID()),e.is(g))if(u(),h=m.getRoot(!0).isRootFiltered(),V)c();else if(h)c();else{f=!!e.is(n.expandAll,"boolean")&&n.expandAll,p=!s.needToQueryForChildren(g);const t=fe(),r=new Set;t.length>0&&t.forEach((function(e){r.add(e.getReferencePID())})),m.options.expandState!==me||m.hasChildren()?p&&f&&r.size>0&&!r.has(g.get("PID"))||!f&&p?o():(i={ordered:!1,context:this,doNotExpand:!0,onFailure:a,onTimeout:a,onCancel:l},f&&(i.expandLevel=-1),p?o():s.getDescendantsFromServer(g.get("PID"),o,i)):m.hasChildren()||c(me)}}},G=function(){e.is(A)&&A.reHighlightMyView()},H=function(){r.notify("onNodeCollapsed")},K=function(t,n={}){if(e.is(n.label)&&t.setLabel(n.label),e.is(n.attributes))if(e.is(t._getRowID()))t.updateOptions({grid:n.attributes});else for(const[e,i]of Object.entries(n.attributes))t.options.grid[e]=i;B(t)},X=function(e,t){const n=t||{},i=Array.isArray(e)?P(e):P(e.split(","));if(Array.isArray(i)){Te.prepareUpdate();for(let e of i)K(e,n);Te.pushUpdate()}},z=function(e){e=e||{},Te.withTransactionUpdate((function(){var t;for(t in e)Object.hasOwnProperty.call(e,t)&&X(t,{attributes:e[t]})}))},Q=function(e,t){var n;Array.isArray(e)&&e.length>0&&(n=Te.searchTree(e)).length>0&&Te.withTransactionUpdate((function(){n.forEach((function(e){e.removeAttribute(t)}))}))},k=function(t,n){var i,o,a,l=r.getBehavior("TreeListViewBehavior");if(Te.prepareUpdate(),i=l.getRelationNodeOptions(t,n),e.is(i))for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a=i[o].attributes,e.is(a)&&X(o,{attributes:a}));Te.pushUpdate()},q=function(t){var n,i,o,a,l=s.getReference(t.getReferencePID()),d=r.getBehavior("TreeListViewBehavior"),u=r.getBehavior("GraphViewBehavior");(e.is(t)||e.is(d))&&(t.isRoot(!0)?(n=o=d.getReferenceNodeOptions(l),e.is(u)&&(a=u.getReferenceNodeOptions(l),n.grid=e.merge(o.grid,a.grid))):(i=s.getInstance(t.getInstancePID()),n=o=d.getInstanceNodeOptions(l,i,t.getAbsolutePath()),e.is(u)&&(a=u.getInstanceNodeOptions(l,i),n.grid=e.merge(o.grid,a.grid))),t.updateOptions(n),B(t))},Y=function(t,n){const i=(o=n,e=>o.filter((t=>((e,t)=>e===t.getReferencePID())(e,t)||((e,t)=>!!(e=>!e.isRoot())(t)&&e===t.getInstancePID())(e,t))));var o;const a=r.getBehavior("CfgColumnsBehavior");if(e.is(a)){let e={data:[],pids:[]};Te.prepareUpdate();try{a.getCombinedEntriesFromUpdatedAttributesObj(t).forEach((([t,n])=>{const o=a.trimAttributesBasedOnVisibleDataIndices(n),l=i(t);for(let e of l)K(e,{attributes:o});e.data.push(n),e.pids.push(t)})),r.notify("updateEffectivity",e)}finally{Te.pushUpdate()}}},Z=function(t,n){var i=n||null,o=t.getState();e.is(i)||(i=t.hasChildren()?t.isExpanded()?ye:Ce:me),!0===t.fromXEN?t.setState({state:me}):i!==o&&(i===he?t._expandState="expandingState":t.setState({state:i}))},ee=function(n){return new t((function(t,i){e.is(n,"function")?setTimeout((function(){e.is(T)?T.acquire().then((function(){const o=n();e.is(o.then,"function")?o.then((function(){T.release(),t()})).catch((function(e){T.release(),i(e)})):(T.release(),i("promiseSupplier is not returning a Promise"))})):i("_mutex is not initialized")}),5):i("Given promiseSupplier is not a function")}))},te=function(n){var i=r.getBehavior("TreeListViewBehavior");i.isInverseRelationColumnPresent()&&ee((()=>new t((function(t,i){var o,a,l,d=new Set,u=[];(o=n.filter((function(t){var n=!1;return!!e.is(t.options.areInverseRelationColumnsFilled,"boolean")&&t.options.areInverseRelationColumnsFilled||(s.needToQueryForConnections(t.getReferencePID())||e.is(t.getInstancePID())&&s.needToQueryForConnections(t.getInstancePID()))&&(n=!0),n}))).length>0?(o.forEach((function(t){var n=t.getInstancePID();e.is(n)&&d.add(n),d.add(t.getReferencePID())})),d.forEach((function(e){u.push(e)})),l=R(u),(a=l.found).forEach((function(e){e.options.areInverseRelationColumnsFilled=!1})),s.getInverseConnectionsFromServer(u,{onComplete:function(){a.forEach((function(e){q(e),e.options.areInverseRelationColumnsFilled=!0})),r.notify("nodesUpdatedInAsync",r.getId()),t()},onFailure:function(e){i(e)}})):t()})))).catch((function(e){r.log("Inverse Relation Column update failed. Reason: "+e)}))},ne=function(t,n){let i,o=null,a={};const l=function(){let t;return e.is(o)?t=o:(t=n.filter((function(e){return!re(e)})),o=t),t};m.isExpandFetchFetchEnabled()&&"Index"===r.getPreferenceValue("navigateOnIndex")&&!s.isAuthoringMode()&&te(l());const d=r.getBehavior("AltSubBIBehavior");e.is(d)&&d.isCmdActive()&&d.showBIStatus(l());const u=r.getBehavior("CfgColumnsBehavior");e.is(u)&&u.isAnyCfgColumnVisible()&&ie(l());const c=r.getBehavior("OperationTimeBehavior");e.is(c)&&c.isColumnVisible()&&(i=l().map((e=>e.getReferencePID())),a=e.extend(a,c.getUpdateOptionsForVisibleNodes(i),!0)),Object.keys(a).length>0&&z(a)};const we=e=>t=>{Te.prepareUpdate();for(let n of t)n.updateOptions({areCfgColumnsFilled:e});return Te.pushUpdate(),t};return ie=function(n){const i=we(!0),o=we(!1),a=r.getBehavior("CfgColumnsBehavior");e.is(a)&&ee((()=>function(n,a){return new t(((t,l)=>{const r=a.filter((t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled)));if(r.length>0){o(r);const e=n.getNodeIdsObjAsPerExternalSpec(r);n.updateAttributes(e).then((e=>{Y(e,r),i(r),t()})).catch((function(e){l("Something failed while updating Cfg attributes in Tree: "+e)}))}else t()}))}(a,n))).catch((function(e){r.log("Updating Configuration columns failed. Reason: "+e)}))},oe=function(e){var t=P(e);Array.isArray(t)&&t.forEach(q)},ae=function(){var t;r.getBehavior("TreeListViewBehavior").has3DHideShowColumn()&&(t=Te.getMatchingNodeModels((function(t){var n=t.options.hideShow3D,i=!1;return e.is(n,"boolean")&&(i=!1===n),i}))).length>0&&(Te.prepareUpdate(),t.forEach((function(e){e.updateOptions({hideShow3D:!0})})),Te.pushUpdate())},re=function(e){return e.getNodeSource()===o.NODE_SOURCE.GROUPING},se=function(e){return new o({label:d.getNLSValue(e),grid:{},useAsyncPreExpand:!1,referenceType:e+"Node",referencePID:e+"Node",hideShow3D:!0})},de=function(e){const t=(e=>{const{found:t}=R([e]);return t})(e).filter((e=>!e.isRoot()));return t},L=function(e){var t=this;t.withTransactionUpdate((function(){e.forEach((e=>{t.selectNode(e)}))}))},E=function(e){var t=this;t.withTransactionUpdate((function(){e.forEach((e=>{t.unSelectNode(e)}))}))},pe=function(e,t,n){var i=s.getReference(e);n&&(De=0),t.addNode(i,{forceDBMode:!1,isFlatView:n,rootId:e}),n||t.expandAllRoots(),Te.reapplyFilterModel()},ge=function(e){const{found:t}=R(e);return t},fe=function(){return Te._xso.get()},{listenTo:function(){return{changeSortIndex:this.onChangeSortIndex,Hide:this.onHideRootNode,HideAll:this.onHideAll,visibleNodesChanged:ne,updateRelationsColumn:oe,Filter3DApplied:ae,selectNodes:L,unSelectNodes:E,updateNodes:z,unsetNodeAttr:Q}},onStart:function(t){var n=s.isNavigateOnDemand();y=!!e.is(t.registerRoots)&&t.registerRoots,C=e.is(t.withLinksResolved,"boolean")?t.withLinksResolved:!n,I=e.is(t.displayBadge)?t.displayBadge:null,v=e.is(t.displayBadgeRPL)?t.displayBadgeRPL:null,D=e.is(t.displayBadgePS)?t.displayBadgePS:null,w=Te.onPreExpand(j),S=Te.onPreCollapse(G),M=Te.onPostCollapse(H),x(),A=r.getBehavior("CrossHighlightBehavior"),T=new a,V=!!e.is(t.noExpandServerCall,"boolean")&&t.noExpandServerCall},onStop:function(){Te.empty(),e.is(S)&&(this.removeEventListener(S),S=void 0),e.is(M)&&(this.removeEventListener(M),M=void 0),this.removePreExpandListener(),T.destroy(),T=null},removePreExpandListener:function(){e.is(w)&&(this.removeEventListener(w),w=null)},validate:function(t){var n;return e.is(t)&&e.is(O(t.get("PID")))&&((n={}).key="AlreadyRoot",n.param="referenceName",n.paramValue=t.get("V_Name")),n},getNodeModel:function(e,t){return P(e,t)},getNodeInfo:function(t,n){var i,o=null,a=P(t,n);return i=function(e){return{label:e.getLabel(),referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),referenceType:e.getReferenceType(),absPath:e.getAbsolutePath()}},Array.isArray(a)?o=a.map(i):e.is(a,"object")&&(o=i(a)),o},addNodeModel:function(e,t){return F(e,t)},removeNode:function(t,n){var i=r.getBehavior("TreeListViewBehavior"),o=[],a=r.getBehavior("TaggerBehavior"),l=function(){var t=r.getBehavior("DropZoneViewBehavior");N()&&e.is(t)&&(t.setIcon(t.iconEnum.DROPHERE),t.show()),e.is(n,"function")&&n()};(e.is(t,"string")?Te.searchTree(t):e.is(t,"array")?t:[t]).forEach((function(t){var n,l,s;i.getDataGridView().updateRenderedRow(t.getRowID()),e.is(a)&&(n=t.getAllDescendants(void 0,!0),e.is(n)&&(o=n.map((function(e){return{PID:e.getID(),Path:e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),event:"remove"}}))),o.push({PID:t.getID(),Path:t.isRoot(!0)?t.getReferencePID():t.getAbsolutePath().toString(),event:"remove"})),t.isRoot(!0)?(s=t.getID(),Te.removeRoot(t),!0===y&&p.removeRoot(r.getId(),s),r.notify("removeRoot",s)):(l=t.getParent())&&l.removeChild(t)})),e.is(a)?a.getNodeUpdatePromise(o).then(l).catch(l):l()},removeNodes:function(e,t){var n;Array.isArray(e)?(n=Te.searchTree(e),this.removeNode(n,t)):t()},hideNodes:function(t){var n,i,o=[],a={};e.is(t,"array")&&t.length>0&&(n=r.getBehavior("ExpandFilterBehavior"),e.is(n)&&n.resetFilterUI(),o=t.filter((function(t){return e.is(t)&&t.isRoot(!0)})),a={callback:this.removeNode,globalArray:o,context:this,blockSize:50},Te.prepareUpdate(),Te.getXSO().empty(!1),s.getExecuteByBlockPromise(a).then((function(){var t=[];Te.pushUpdate(),e.is(o,"array")&&o.length>0&&(o.forEach((function(e){var n=s.getReference(e.getID());t.push(n)})),r.notify("hideRootNode",[t])),i=p.getRoots(),e.is(i,"array")&&0===i.length&&s.resetCollections()})))},onHideRootNode:function(){this.hideNodes(Te.getSelectedNodes())},onHideAll:function(){this.hideNodes(Te.getRoots(!0))},updateCfgColumnsForCommandUpdates:function(e,n){const i=we(!0),o=ge(e);o.length>0&&ee((()=>(Y(n,o),i(o),t.resolve()))).catch((function(e){r.log("Updating Configuration columns failed. Reason: "+e)}))},onChangeSortIndex:function(t){var n=Te.getTreeNodeModel(t.get("PID"));e.is(n)&&(n.setAttribute("sortIndex",t.get("sortIndex")),n.getParent().sortChildren({isRecursive:!1,sortFunction:function(e,t){return e.options.grid.sortIndex<t.options.grid.sortIndex?-1:1}}))},isSelected:function(t){var n=P(t,!1),i=!1;return e.is(n,"array")&&(i=n.some((function(e){return e.isSelected()}))),i},isNodeAdded:function(t){var n=P(t,!0);return e.is(n)},selectNode:function(t){var n=P(t,!1);e.is(n,"array")&&n.forEach((function(e){e.isSelected()&&e.unselect(),e.select()}))},unSelectNode:function(t){var n=P(t,!1);e.is(n,"array")&&n.forEach((function(e){e.isSelected()&&e.unselect()}))},updateBadge:function(t,n){var i;Array.isArray(t)?(i=Te.searchTree(t),e.is(i)&&U(i,n)):e.is(t)&&(i=P(t,!1),e.is(i)&&U(i,n))},getWUXNodeModel:function(){return Te},unSelectAll:function(){Te.unselectAll()},withTransactionUpdate:function(e){Te.withTransactionUpdate(e)},prepareUpdate:function(){Te.prepareUpdate()},pushUpdate:function(){Te.pushUpdate()},getRoots:function(){return Te.getRoots(!0).map((function(e){return e.getReferencePID()}))},getRootNodes:function(){return Te.getRoots(!0)},getChildren:function(t){var n=P(t,!0),i=[];return e.is(n)&&(i=n.getChildrenPID()),i},getAllDescendants:function(){return Te.getAllDescendants(!0)},getVisibleNodesInViewport:function(){var t,n,i,o,a=r.getBehavior("TreeListViewBehavior").getTreeListViewManager(),l=[];if(e.is(a))for(i=(n=a.getDataGridViewLayout().getMinMaxVisibleRowIDs()).minRowID,t=a.getDataGridViewModel();i<=n.maxRowID;i++)o=t[i],re(o)||l.push(o);return l},getSelectedNodes:function(){return fe()},getHighlightedNodes:function(){return Te.getHighlightedNodes()},getSelectedNodesInfo:function(){return this.getSelectedNodes().map((function(e){return{id:e.getID(),absPath:e.getAbsolutePath()}}))},update3DNodeOptions:function(e){var t=this.getSelectedNodes();t.length>0&&(Te.prepareUpdate(),t.forEach((function(t){t.updateOptions({hideShow3D:e})})),Te.pushUpdate())},emptyNodeModel:function(){var t,n=r.getBehavior("ExpandFilterBehavior");if(e.is(n)&&n.clear(),Te.prepareUpdate(),e.is(Te)){const e=this.getSelectedNodes();Array.isArray(e)&&e.length>0&&Te._xso.empty(),Te.empty()}Te.pushUpdate(),Te._numberOfNodesInDocument<1&&(t=r.getBehavior("DropZoneViewBehavior"),e.is(t)&&t.show())},addEventListener:function(e,t){return Te.getModelEvents().addEventListener(e,t)},removeEventListener:function(e){Te.getModelEvents().unsubscribe(e)},addNode:function(t,n){var i,o,a,l,d,u=n||{},c=e.is(u.loadRootOnly,"boolean")?u.loadRootOnly:r.getPreferenceValue("loadRootOnly"),g=!e.is(u.loadChildren,"boolean")||u.loadChildren,p=!e.is(u.silentMode,"boolean")||u.silentMode,f=e.is(u.withLinksResolved,"boolean")?u.withLinksResolved:C,m=!!e.is(u.doNotExpand,"boolean")&&u.doNotExpand,h=!!e.is(u.forceDBMode,"boolean")&&u.forceDBMode,b=!!e.is(u.updateItem,"boolean")&&u.updateItem,y=e.is(u.onAddToTreeListFail,"function")?u.onAddToTreeListFail:null,I=e.is(u.onAddToTreeListComplete,"function")?u.onAddToTreeListComplete:null,v={noTimeout:!0},D=!!e.is(u.fromXEN,"boolean")&&u.fromXEN,T=!e.is(u.loadRelatedobjectsToView,"boolean")||u.loadRelatedobjectsToView;l=function(t,n){var i="";e.is(n)&&(i=n.getLabel(),q(n),r.notify("addRootNode",[n.getID(),{loadRelatedobjectsToView:T}])),r.notify("stopProgress",v),e.is(I,"function")&&I(t,i)},d=function(n){var i=Te.getTreeNodeModel(t.get("PID"));r.notify("stopProgress",v),Array.isArray(i)&&i.length>0&&i.forEach((function(e){e&&e.getState()===he&&(Z(e,Ce),e.options.children=[])})),e.is(y,"function")&&y(n)},"ROUTINGS"===r.getId()&&(p=!1),(u=e.merge(u,{loadChildren:g,silentMode:p,withLinksResolved:f,forceDBMode:h,updateItem:b,onFailure:d,loadRootOnly:c,fromXEN:D})).isFlatView=!!e.is(u.isFlatView,"boolean")&&u.isFlatView,Te.prepareUpdate(),t.isReference()?(r.notify("startProgress",v),u.onEndAddToNodeList=l,W(t.get("PID"),null,u)):t.isInstance()&&(o=s.getAggregatingReferenceModelFromInstance(t),a=s.needToQueryForChildren(o),e.is(o)&&(i=Te.searchTree(o.get("PID")),e.is(i)&&i.length>0&&i.forEach((function(e){var n,i={noTimeout:!0};r.notify("startProgress",i),n=e.getState(),W(t.get("PID"),e,u),a?(Z(e,be),m=!0):n===Ce?$(e)||(Z(e,be),m=!0):n===be&&(Z(e,be),m=!0),m||e.isExpanded()||e.expand(),r.notify("stopProgress",i)})))),Te.pushUpdate()},addOccurences:function(t){var n,i,o=[],a={},l=[],d=[];n=function(t,n){e.is(a[t])||(a[t]=[]),a[t].push(n)},i=function(t,n){var i=t.getState();e.is(n)&&n===be?Z(t,be):i===Ce&&($(t)?t.expand():Z(t,be))},t.forEach((function(e){o=o.concat(e.filter((e=>o.indexOf(e)<0)))})),Te.searchTree(o).forEach((function(t){var i=t.getReferencePID(),o=t.getInstancePID();e.is(i)&&(n(i,t),l.indexOf(i)<0&&l.push(i)),e.is(o)&&d.indexOf(o)<0&&d.push(o)})),t.forEach((function(e){e.forEach((function(t,o){var u,c,g,p,f,m;0===o?(c=e[o],l.indexOf(c)<0?(p=s.getReference(c),m=ue(p,{forceIntializeChildren:!0}),Z(m,be),n(c,m),l.push(c),r.notify("addRootNode",[c])):a[c].forEach((function(e){i(e)}))):o%2!=0&&(d.indexOf(t)<0?(u=e[o-1],c=e[o+1],g=a[u],p=s.getReference(c),f=s.getInstance(t),g.forEach((function(e){var o=e.getState();m=ce(f,p,e,null,{forceIntializeChildren:!0}),Z(m,be),i(e,o),n(c,m),d.push(t),l.indexOf(c)<0&&l.push(c)}))):(c=e[o+1],a[c].forEach((function(e){i(e.getParent())}))))}))}))},updateNodeODM:function(t,n){var i=P(t);n=n||{},e.is(i,"array")&&(Te.prepareUpdate(),i.forEach((function(e){e.setUpdatedByODM(!0)})),Te.pushUpdate())},updateNode:function(t,n){var i=P(t);n=n||{},e.is(i,"array")&&(Te.prepareUpdate(),i.forEach((function(t){e.is(n.loadChildren)&&n.loadChildren&&(_(t,n),(t.isSelected()||t.isRoot(!0))&&t.expand()),q(t)})),Te.pushUpdate())},updateAttributes:function(t){var n,i=r.getBehavior("TreeListViewBehavior");e.is(t)?(n=i.getUpdateNodeOptions(t),e.is(n)&&X(t.get("PID"),n),k(t)):r.debug("updateAttributes: Input model is undefined.")},updateDocAttributes:function(t){var n,i=r.getBehavior("TreeListViewBehavior");Te.prepareUpdate(),n=i.getDocumentNodeOptions(t),e.is(n)&&X(t,n),Te.pushUpdate()},reparent:function(t){var n,i,o,a,l,d,u,c=this,g={},p=function(e,t){return e.add(t)};e.is(t)&&(r.notify("startProgress",g),Te.prepareUpdate(),a=t.formerParentsPIDArray,l=t.movedInstPIDArray,Array.isArray(a)&&(d=a.reduce(p,new Set),u=new Set,Array.isArray(l)&&(u=l.reduce(p,u)),d.forEach((function(e){var t;t=P(e),Array.isArray(t)&&t.forEach((function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.filter((function(e){return u.has(e.getInstancePID())})).forEach((function(t){e.removeChild(t)}))}))}))),n=t.newParentPID,i=t.newInstPIDArray,e.is(n,"string")&&(o=P(n),Array.isArray(o)&&(o.forEach((function(e){e.removeChildren()})),Array.isArray(i)&&i.forEach((function(t){var n=s.getInstance(t);e.is(n)&&c.addNode(n)})))),Te.pushUpdate(),r.notify("stopProgress",g))},expandNode:function(e){var t=Array.isArray(e)?e:[e];t.length>1&&(t=t.filter((function(e,t,n){return e.getParents().every((function(e){return-1===n.indexOf(e)}))}))),t.forEach((function(e){e.expandAll()}))},collapseNode:function(e){var t,n;(Array.isArray(e)?e:[e]).forEach((function(e){n=e.getState(),e.hasChildren()&&n!==Ce&&(t=n,e.collapseAll(),t===be&&(e.removeChildren(),Z(e,be)))}))},expandAllRoots:function(){Te.getRoots(!0).forEach((function(e){e.expandAll()}))},isFilterAppliedInAnyRoot:function(){return Te.getRoots(!0).some((function(e){return e.isRootFiltered()}))},filterChildren:function(t,n){var i,o=this,a=n||null,l=!!e.is(a),r=l?{filterQuery:a}:{};i=O(t),e.is(i)&&(i.setRootFiltered(l),Te.withTransactionUpdate((function(){i.hasChildren()&&i.getChildren(!0).slice().forEach((function(e){o.removeNode(e)})),s.getFilteredInstancesFromCollection(i.getReferencePID(),a).forEach((function(e){o.addNode(e,r)})),l?s.needToQueryForChildren(i.getReferencePID())&&i.getState()===be&&Z(i):s.needToQueryForChildren(i.getReferencePID())&&i.getState()!==be&&Z(i,be)})))},removeFilterFromAllRoots:function(){var t,n=this;return t=Te.getRoots(!0).filter((function(e){return e.isRootFiltered()})),Te.prepareUpdate(),t.forEach((function(e){e.setRootFiltered(!1)})),Ve.traverseTreeListView((function(t){t.getState()===Ce&&(t.getChildren(!0).slice().forEach((function(e){n.removeNode(e)})),e.is(t.options.children)||(t.options.children=[])),Z(t,be)})),Te.pushUpdate(),t.map((function(e){return e.getReferencePID()}))},isDocumentEmpty:function(){return N()},setTaggerColor:function(e,t){var n;Array.isArray(e)&&(n=R(e).found,Array.isArray(n)&&n.length>0&&(Te.prepareUpdate(),n.forEach((function(e){e.updateOptions({color:t.color})})),Te.pushUpdate()))},getMutex:function(){return T},updateNodeOptions:function(t,n){var i;(i=R(t).found).length>0&&(Te.prepareUpdate(),i.forEach((function(t){var i=e.clone(n);t.updateOptions(i)})),Te.pushUpdate())},setSortOptions:function(e,t){Ie.virtualColumnID=e,Ie.sortOrder=t},isFakeNodeModel:function(e){return re(e)},getGroupingNode:function(e){return se(e)},addGroupingNode:function t(n,i,a,l,u){var c,g=[],p=r.getBehavior("TreeListViewBehavior");return e.is(a)&&a.length>0?(g=a.map((function(e){var t;return t=e.isReference()?p.getReferenceNodeOptions(e):p.getInstanceNodeOptions(s.getReferenceModelFromInstance(e),e),new o(t)})),c=new o({label:d.getNLSValue(n),children:g,grid:{},useAsyncPreExpand:!1,referenceType:n+"Node",referencePID:n+"Node",hideShow3D:!1}),i.addChild(c)):e.is(l)&&l?(c=new o({label:d.getNLSValue(n),grid:{},icons:[d.getIconURLFromKey(u)]}),i.addChild(c)):(c=se(n),i.addChild(c),Object.keys(a).forEach((function(e){t(e,c,a[e])}))),c.isExpanded()||c.expand(),c},addNodeToGroupNode:function(e,t,n){var i,a;return i=r.getBehavior("TreeListViewBehavior").getReferenceNodeOptions(e),a=new o(i),t.addChild(a,n),a},getTreeDocument:function(){return Te},showOverlay:function(){var t,n,i=d.getNLSValue("View.WaitMessage"),o=r.getBehavior("TreeListViewBehavior");if(e.is(o)){for(t=o.getDataGridView();ve.length>0;)ve.shift().resolve();n=e.Promise.deferred(),ve.push(n),t.displayModalLoader(i,(function(){n.promise.then((function(){t.removeModalLoader(i)}))}))}},removeOverlay:function(){1===ve.length&&ve.shift().resolve()},updateNodeState:function(e,t){Z(e,t)},getWhereUsedInstanceIds:function(e){return de(e).map((e=>e.getInstancePID()))},getWhereUsedInstanceIdsUnderParent:function(t){let n=[];const i=P(t);if(Array.isArray(i)&&i.length>0){const l=i.filter((t=>n=>e.equals(n.getAbsolutePath(),t))(t));if(1===l.length){const e=l[0];n=(a=e,a.getBrothers()).concat(e).filter((o=e.getReferencePID(),e=>e.getReferencePID()===o)).map((e=>e.getInstancePID()))}}var o,a;return n},resetConfigColumns:function(){const n=we(!1),i=(t,i)=>{const o=t.filter((t=>e.owns(t.options,"areCfgColumnsFilled")));o.length>0&&n(o),e.is(i,"function")&&i()},o=this;var a;(a=o.getAllDescendants(),new t((e=>{ee((()=>(e=>new t((t=>{const n={callback:i,globalArray:e,context:null,blockSize:100};s.getExecuteByBlockPromise(n).then((()=>{t()})).catch((()=>{t()}))})))(a))).then((function(){e()})).catch((function(t){r.log("Resetting Configuration columns failed. Reason: "+t),e()}))}))).then((function(){ie(o.getVisibleNodesInViewport())}))},getFlattenNodeModel:function(t,n){var i=this;e.is(t)&&t.forEach((function(e){pe(e,i,n)}))}}}}})),define("DS/DELWKOViewBehaviors/DELWKOViewBehavior",["UWA/Core","DS/DELWKOViewBehaviors/DELWKOFormUI","DS/DELWKOViewBehaviors/DELWKOPropertiesPanelUI","DS/DELWKOMaturityCmdModule/DELWKOMaturityCmdUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/SelectionControl","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/DataCollectionUI","DS/DELWKOComponentsFactory/DELWKOCreateWorkOrderFromProcessDataCollectionUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ImplementUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/ImplementedRevChooserUI","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/MfgItemCreateReportUI","DS/DELWKOViewBehaviors/DELWKOConfirmationDialog","DS/DELPPWViewBehaviors_FD02/UXFactoryBehavior/MessageDialog"],(function(e,t,n,i,o,a,l,r,s,d,u,c){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","WebServicePlugin","AttributePlugin","DicoPlugin","DatabasePlugin","SelectionPlugin","ImplementPlugin","PlatformPlugin"],creator:function(g,p,f,m,h,b,y,C,I,v,D){var T=function(e,t){var n=[null].concat(t),i=f.getComponent(e);return new(Function.prototype.bind.apply(i,n))};return{onStart:function(){},onStop:function(){},getComponent:function(e){return f.getComponent(e)},showConfirmation:function(e,t,n,i,o){new u(this,o).show(e,t,n,i)},showMessage:function(e,t){new c(this,p).show(e,t)},showWithMessage:function(e,t,n){new c(this,p).showWithMessage(e,t,n)},createElement:function(){var e=Array.prototype.slice.call(arguments);return T("Element",e)},create:function(u,c){var V,w,S,M,L,E=[],A=Array.prototype.slice.call(arguments,1);switch(u){case"Panel":L=this.getComponent("WUXDockAreaEnum"),(V=new(f.getComponent("Panel"))(c)).allowedDockAreas=L.LeftDockArea|L.RightDockArea;break;case"Tree":V=new(f.getComponent("Tree"))({height:"inherit",width:"100%",apiVersion:2,selection:{toggle:!1,canMultiSelect:!1},styles:{height:"100%",width:"100%"}});break;case"Dialog":S=f.getComponent("WUXFrameWindowsManager").getFrameWindow(p.getAppContext()),w={position:{my:"center",at:"center"},immersiveFrame:g.getConfig().isFacet?g.getConfig().immersiveFrame:S.getImmersiveFrame()},e.extend(c,w),(V=new(f.getComponent("CustomDialog"))(c)).addEventListener("contextmenu",(function(e){e.preventDefault()})),e.is(V.buttons.Ok)?V.buttons.Ok._giveFocus():V.buttons.Cancel&&V.buttons.Cancel._giveFocus(),V.addEventListener("keypress",(function(e){"Enter"===e.key&&(V.buttons.Ok&&!V.buttons.Ok.disabled&&V.buttons.Ok._isFocused()?V.buttons.Ok.onClick():V.buttons.Cancel&&!V.buttons.Cancel.disabled&&V.buttons.Cancel._isFocused()&&V.buttons.Cancel.onClick())}));break;case"Filter":(Array.isArray(c.filterToolbarSections)?c.filterToolbarSections:["PROCESS","SYSTEM","RESOURCE","PART","PRODUCT","PARENT","PPLAN","BUILDS"]).forEach((function(e){"PARENT"===e?E.push({item:e,iconElemName:"CreateInstance",isSelected:!1}):E.push({item:e,iconElemName:e,isSelected:!0})})),M=E.reduce((function(t,n){var i=m.getNLSValue("PPRTYPE."+n.item),o=m.getIconElem(n.iconElemName),a=!!e.is(n.isSelected,"boolean")&&n.isSelected;return t[n.item]={text:i,tooltipText:i,title:o,pinned:a},t}),{}),V=new(f.getComponent("Segmented"))({multiSelect:!0,data:M});break;case"SelectionControl":(V=new o(g,p,f,m,y)).createUI(c);break;case"FormUI":(V=new t(g,p,f,m,b,y)).createUI(c);break;case"DataCollectionUI":(V=new a(g,p,f,m,h,b,y)).createUI(c);break;case"DELWKOCreateWorkOrderFromProcessDataCollectionUI":(V=new l(g,p,f,m,h,b,y)).createUI(c);break;case"DELWKOPropertiesPanelUI":V=new n(g,p,f,m,h,b,y);break;case"DELWKOMaturityCmdUI":V=new i(g,p,f,m,h,b,y);break;case"ImplementUI":(V=new r(g,p,this,m,C,I,v)).createUI(c);break;case"ImplementedRevChooserUI":(V=new s(g,p,this,m,C,D,I)).createUI(c);break;case"MfgItemCreateReportUI":(V=new d(g,p,this,m,C,f)).displayReport(c);break;default:V=T(u,A)}return V}}}}})),define("DS/DELWKOViewBehaviors/DELWKOColumnManager",["UWA/Core","DS/DELWKOViewBehaviors/DELWKOCellManager","DS/DELWKOViewBehaviors/DELWKORelationsColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManagerMFN","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RWU/RWUColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MCRColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MSOColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/DataCollectRowColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/HideShow3DColumnManager","DS/DELPPWViewBehaviors_FD02/CfgColumnsBehavior/CfgCellManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RPColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/CoProduct/CoProductColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeColumnManager"],(function(e,t,n,i,o,a,l,r,s,d,u,c,g,p,f){"use strict";return function(m,h,b,y,C,I,v,D,T,V,w,S){var M,L,E,A,x,P,R,O,N,F=w.getGroupingAdditonalColumns(),B=h.getBehavior("WUXNodeModelBehavior"),U=new d(h,D),k=new t(h,I,C,v,D,w),W=new a(h,C,D,S,T),_=new c(h,I,C,D),j=new n(h,D,w),G=(new g(h,v,C,I,D),new p(h,v,C,I,D)),H=(new f(h,v,C,I),new r(h,I,C,v,D,w));return P=(P=(P=(P=(P=[]).concat(W.getNonModelDataIndexes())).concat(U.getNonModelDataIndexes())).concat(G.getNonModelDataIndexes())).concat(_.getNonModelDataIndexes()),L=function(t){var n,i,o,a,l={treeDataIndex:null,label:null,labelIsOnRef:null,dicoType:null},r=h.getPreferenceValue("separator");if(e.owns(t,"name")&&"Auxiliary"===t.name&&e.owns(t,"Label")&&e.is(t.Label.length)&&t.Label.length>1)for(l.treeDataIndex="",l.label="",l.dicoType="",o=t.Label,i=0;i<o.length;i++)l.treeDataIndex+=t.Label.dataIndex,l.dicoType+=t.Label.dicoType,n=l.treeDataIndex.split("."),l.label+=n[0],a=n[1],l.labelIsOnRef="instance"===a?!!e.is(l.labelIsOnRef)&&(l.labelIsOnRef&&!1):!e.is(l.labelIsOnRef)||l.labelIsOnRef&&!0,i+1!==o.length&&(l.label+=r,l.type+=r,l.dicoType+=r,l.treeDataIndex+=r);else e.owns(t,"Label")&&(l.treeDataIndex=t.Label.dataIndex,l.dicoType=t.Label.dicoType,n=l.treeDataIndex.split("."),l.label=n[0],a=n[1],l.labelIsOnRef="instance"!==a);return l},E=function(t){var n=[];return e.is(t.dicoType,"array")&&(n=t.dicoType.map((function(t){return e.is(t,"object")&&e.owns(t,"dicoType")?t.dicoType:t}))),n},A=function(t){let n=t;Array.isArray(n)||(n=[n]);const a=h.getBehavior("CfgColumnsBehavior");if(e.is(a)){const e=a.computeVisibleConfigColDataIndices(n);a.setVisibleCfgColDataIndices(e),n=a.filterCFGColumnsBasedOnAvailability(n)}return n.map((function(t){var n,a,r,d,c=!1,g=!1,p=!1,f={sortableFlag:!1,groupableFlag:!0,dataIndex:t.dataIndex,dicoType:t.dicoType,displayType:t.displayType,visibleFlag:!e.is(t.isHidden)||!t.isHidden,width:isNaN(t.width)?"auto":parseInt(t.width),minWidth:isNaN(t.minWidth)?100:parseInt(t.minWidth),text:v.getColumnDisplayValue(t),editionPolicy:"EditionOnClick",tooltipIndex:t.Tooltip,hasCellValue:k.hasCellValue,getCellValue:k.getCellValue.bind(k,t),getCellValueForExport:function(n){var i,o="",a=n.cellModel;return n.rowID<0?o=a:e.is(a)&&(c&&!g?(i=n.nodeModel.getAttributeValue(t.dataIndex),Array.isArray(i)&&(o=i.join())):o=e.is(a,"array")?a.join():a.toString()),o}};d=function(){return{units:a}};const m=v.getAttributeInfoFromColumn(t);var b=I.getAttributeInfo(m.attributeName);if(e.is(b)&&(g=v.hasRangeDefined(b),c=v.isMultiValuated(b),(p=v.hasMagnitude(b))&&(a=v.getNLSForUnit(b))),!e.is(t.displayType)||"MultiType"!==t.displayType&&"OrderQtyMultiType"!==t.displayType||(b=I.getAttributeInfo(m.dataIndex)),e.is(t.displayType)&&t.displayType.contains("URL")&&(r=w.getURLColumnInfo(t.dataIndex))&&(t.command=r.command,e.owns(r,"defaultValue")?t.defaultValue=r.defaultValue:t.defaultValue=""),!e.is(t.displayType)&&e.is(m)&&v.isDate(b)&&!g&!c&&(t.displayType="Date"),e.is(t.displayType))switch(f.editableFlag=!1,t.displayType){case"FullOwnerURL":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.getCellValue=k.getFullOwnerURL,f.command=w.areModuleColumnsImmutable(h.getId())?null:t.command,f.getCellValueForExport=k.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"CustomString":f.typeRepresentation="string",f.getCellValue=k.getCustomStringCellValue;break;case"URL":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.getCellValue=k.getURLCellValue,f.command=w.areModuleColumnsImmutable(h.getId())?null:t.command,f.defaultValue=t.defaultValue,f.getCellValueForExport=k.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"IconText":f.typeRepresentation="url",f.className="icon-text-column",f.hasCellValue=function(){return!0},f.getCellValue=function(e){var t=e.nodeModel.options.grid;return{label:t[e.dataIndex],getLabel:function(){return this.label},icon:{iconPath:t.cellInfo.IconUrl,iconSize:{width:"22px",height:"22px"}}}};break;case"Relation":f.typeRepresentation="url",f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=j.getCellValue,f.hasCellValue=j.hasCellValue,f.getCellValueForExport=j.getCellValueForExport;break;case"DocMgmt":f.className=w.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=k.getCellValueForDocMgt,f.getCellValueForExport=function(t){return e.is(t.cellModel,"array")&&t.cellModel.join(", "),e.is(t.cellModel)?t.cellModel.toString():""};break;case"BIEssentials":case"BIEssentialsAltSub":f.typeRepresentation="color",f.className="biessentials",f.groupableFlag=!1,f.getCellValue=k.getBICellValue,f.getCellValueForExport=k.getBICellValueForExport;break;case"MIL":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=i.getCellTypeRepresentation,f.setCellValue=i.setMILValue.bind(null,t),f.getCellClassName=i.getCellClassName,f.getCellValue=i.getCellValue,f.getCellSemantics=i.getCellSemantics,f.hasCellValue=i.hasMILCellValue,f.getCellEditableState=i.getCellEditableState;break;case"MANAGECAPABLERESOURCESMOD":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=l.getCellTypeRepresentation,f.setCellValue=l.setValue.bind(null,t),f.getCellClassName=l.getCellClassName,f.getCellValue=l.getCellValue,f.getCellSemantics=l.getCellSemantics,f.hasCellValue=l.hasCellValue,f.getCellEditableState=l.getCellEditableState;break;case"MANAGESTEPOPERATIONSUI":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=H.getCellTypeRepresentation,f.setCellValue=H.setValue.bind(null,t),f.getCellClassName=H.getCellClassName,f.getCellValue=H.getCellValue,f.getCellSemantics=H.getCellSemantics,f.hasCellValue=H.hasCellValue,f.getCellEditableState=H.getCellEditableState;break;case"DataCollectRow":f.getCellTypeRepresentation=s.getCellTypeRepresentation,f.getCellClassName=s.getCellClassName,f.getCellValue=s.getCellValue,f.getCellSemantics=s.getCellSemantics,f.hasCellValue=s.hasCellValue;break;case"CIM":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=o.getCellTypeRepresentation,f.setCellValue=o.setMILValue.bind(null,t),f.getCellClassName=o.getCellClassName,f.getCellValue=o.getCellValue,f.getCellSemantics=o.getCellSemantics,f.hasCellValue=o.hasMILCellValue,f.getCellEditableState=o.getCellEditableState;break;case"RWU":f.editionPolicy="RWU_Replace"===t.dataIndex?null:"EditionInPlace",f.getCellTypeRepresentation=W.getCellTypeRepresentation,f.setCellValue=W.setRWUValue.bind(null,t),f.getCellClassName=W.getCellClassName,f.getCellValue=W.getCellValue,f.getCellSemantics=W.getCellSemantics,f.hasCellValue=W.hasRWUCellValue,f.getCellEditableState=W.getCellEditableState,f.getCellGroupingKey=W.getRWUGroupingKeyForURLColumn;break;case"MultiType":f.dicoType=E(t),f.editionPolicy="EditionOnOver",f.editableFlag=!v.isReadOnly(b),f.getCellTypeRepresentation=k.getMultiTypeCellRepresentation.bind(null,b),f.groupableFlag=!1,f.getCellValue=k.getMultiTypeCellValue,f.getCellSemantics=k.getMultiTypeCellSemantics,f.setCellValue=k.setValue;break;case"CFG":f.groupableFlag=!1,f.getCellTypeRepresentation=u.getCellTypeRepresentation,f.getCellValue=u.getCellValue,f.hasCellValue=u.hasCellValue;break;case"Date":case"DateTime":f.editionPolicy="EditionOnOver",f.editableFlag=!v.isReadOnly(b),f.typeRepresentation="datetime",f.setCellValue=k.setValue,f.getCellValueForExport=function(e){var n="",i=e.cellModel,o="DateTime"===t.displayType;return e.rowID<0?n=i:i&&(n=v.getFormattedDate(i,o)),n};break;case"NonEditable":f.editableFlag=!1,v.isBoolean(b)&&(f.typeRepresentation="boolean");break;case"NonEditableMultiType":f.editableFlag=!1,f.dicoType=E(t),f.typeRepresentation="float",f.groupableFlag=!1,f.getCellValue=k.getMultiTypeCellValue,f.getCellSemantics=k.getMultiTypeCellSemantics,f.setCellValue=k.setValue}else f.editableFlag=!v.isReadOnly(b),n=v.getNodeAndColumnInfos(null,t),c&&!g?(f.typeRepresentation="string",f.editionPolicy="EditionInPlace"):g?(f.allowResetToUndefinedByUIFlag=!0,f.hasRangeDefined=!0,f.editionPolicy="EditionInPlace",f.typeRepresentation=t.dataIndex.replaceAll(".",""),f.authorizedValues=v.getAuthorizedValuesNLSList(n.attributeInfo,n.attributeDef),p&&(f.getCellSemantics=d)):p?(f.typeRepresentation="number",f.getCellSemantics=d):v.isBoolean(b)?f.typeRepresentation="boolean":v.isInteger(n.attributeInfo)?f.typeRepresentation="integer":v.isDouble(n.attributeInfo)&&(f.typeRepresentation="float"),f.setCellValue=k.setValue;return w.areModuleColumnsImmutable(h.getId())&&(f.editableFlag=!1),f}))},x=function(t,n){var i,o,a,l;return n=n||!1,N=t.Label.dataIndex,l=e.is(t.Label.minWidth)?t.Label.minWidth:null,o=w.getLabelInfo(h.getId()),e.is(t)&&e.is(t.name)?("Column.",a=D.getNLSValue("Column."+t.name)):a=v.getColumnDisplayValue(t.Label),(i={sortableFlag:!0,groupableFlag:!0,text:a,dataIndex:"tree",width:e.is(l)?"auto":n?"100%":"30%",minWidth:e.is(l)?l:150,dicoType:o.dicoType,label:o.attributeName,labelIsOnRef:o.labelIsOnRef,getCellValue:function(t){var n,i,o=t.nodeModel,a=null;return e.is(o)&&(B.isFakeNodeModel(o)&&o.getProperty()===F.Reference?(i=this.getColumnOrGroup(F.Reference),n=C.getReference(o.getIdentifier()),a=i.text+": "+n.get("V_Name")+" ("+o.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount+")"):a=o.getLabel()),a}}).editableFlag="NonEditable"!==t.Label.displayType,i.setCellValue=k.setValue,w.areModuleColumnsImmutable(h.getId())&&(i.editableFlag=!1),i},R=function(){var e,t,n=[];for(e in F)Object.prototype.hasOwnProperty.call(F,e)&&((t={sortableFlag:!1,editableFlag:!1,groupableFlag:!0,dataIndex:F[e],visibleFlag:!1,width:"auto",minWidth:100,editionPolicy:"EditionOnClick",hasCellValue:function(e){return!B.isFakeNodeModel(e.nodeModel)},getCellValue:k.getGroupingColumnCellValue}).text=v.getColumnDisplayValue(t),n.push(t));return n},O=function(){return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,dataIndex:"hide_show_3D",displayType:"hideShow3D",editionPolicy:"EditionOnOver",typeRepresentation:"visibility",alignment:"center",text:"",width:30,icon:D.getIconURLFromKey("3DColumnIcon"),hasCellValue:U.hasCellValue,getCellValue:U.getCellValue,setCellValue:U.setCellValue}},{getBlockAttributes:function(t){var n,i,o={boAttrName:[],roAttrName:[],otherAttrName:[]},a=!1,l=e.is(t.Columns)?t.Columns.Column:[],r=L(t),s=function(e,t){switch(t){case"reference":-1===o.boAttrName.indexOf(e)&&o.boAttrName.push(e);break;case"instance":-1===o.roAttrName.indexOf(e)&&o.roAttrName.push(e);break;default:-1===o.otherAttrName.indexOf(e)&&o.otherAttrName.push(e)}};return e.is(r.label)&&(e.is(r.labelIsOnRef,"boolean")?r.labelIsOnRef?s(r.label,"reference"):s(r.label,"instance"):s(r.label,null)),e.is(l,"array")||(l=[l]),l.forEach((function(t){var n=v.getAttributeInfoFromColumn(t),o=n.dataIndex,l=n.objType;if(!e.owns(t,"displayType")||"MultiType"!==t.displayType&&"NonEditableMultiType"!==t.displayType&&"OPTime"!==t.displayType)"instance"===l||"reference"===l?s(o,l):"relation"===l&&(a=!0,s(o,l));else switch(t.displayType){case"MultiType":case"NonEditableMultiType":t.dicoType=E(t),t.dicoType.forEach((function(e){s(i=e+"."+o,l)}));break;case"OPTime":s(i,l)}})),a&&(n=V.getAllRelationDisplayAttributes(),e.is(n,"array")&&n.forEach((function(e){s(e,"reference")}))),o},setReusablecontent:function(t){var n=function(n,i){var o,a={forceDBMode:!0,onComplete:function(){e.is(o)&&e.is(o.objectToBeModified)&&(o.objectToBeModified.setAdditionalInfo({isFetched:!0}),v.doesAttributeExist(o.objectToBeModified,o.dataIndex)||v.isAttrApplicableForType(o.objectToBeModified,o.dataIndex)||-1===P.indexOf(o.dataIndex)&&h.warn(D.getNLSValue("TableView.AvailabilityFailure",{key:o.attributeNLSTitle}))),e.is(i)&&e.is(i.cellView)&&t.updateRenderedRow(i.rowID,{updateCellContent:!0})}};n.preventDefault(),n.stopPropagation(),i&&(o=v.getNodeAndColumnInfos(i.nodeModel,i.cellView.collectionView.getColumnOrGroup(i.columnID)),!e.is(o.objectToBeModified)||v.doesAttributeExist(o.objectToBeModified,o.dataIndex)||o.objectToBeModified.getAdditionalInfo("isFetched")||("instance"===o.instOrRef?C.fetchInstance({PID:o.objectToBeModified.id},a):C.fetchRoot(o.objectToBeModified.id,a)))};y||(t.addEventListener("show",(function(e,t){h.debug("onEventShow fired"),n(e,t)})),t.addEventListener("activeCellChange",(function(t){const i=t.dsModel,o=i.getActiveCellID();if(o>=0&&i.isCellInEdition(o)){let a=i.getCellInfosAt(o);e.is(a)&&a.rowID>=0&&a.columnID>=0&&e.is(a.nodeModel)&&e.is(a.nodeModel.getReferencePID)&&(e.is(a.cellView)||(a.cellView={collectionView:i}),n(t,a))}h.debug("activeCellChange fired")})))},getColumnDataIndexByDisplayType:function(t,n){var i,o,a,l=[];if(!e.is(n))return this.getColumnsDataIndex(t);for(o=t.columns.length,i=1;i<o;i++)a=t.columns[i],e.is(a)&&e.owns(a,"dataIndex")&&e.owns(a,"displayType")&&a.displayType===n&&l.push(a.dataIndex);return l},getColumnsDataIndex:function(t,n){var i,o,a,l,r=[],s=!!e.is(n,"boolean")&&n;if(s||!e.is(M)){for(a=t.columns.length,e.is(t._treeDataIndex)&&r.push(t._treeDataIndex),i=1;i<a;i++)l=t.columns[i],o=!e.is(l.isExportable)||l.isExportable,e.is(l)&&e.owns(l,"dataIndex")&&o&&(s&&l.isHidden||(!e.owns(l,"displayType")||"MultiType"!==l.displayType&&"NonEditableMultiType"!==l.displayType?r.push(l.dataIndex):l.dicoType.forEach((function(e){r.push(e+"."+l.dataIndex)}))));s||(M=r)}else r=M;return r},createTreeListViewColumns:function(t,n,i,o){var a,l,r=[];return t.Columns&&t.Columns.Column&&(r=A(t.Columns.Column)),t.Label&&((a=x(t,0===r.length)).isExportable=!1,r.splice(0,0,a)),Array.isArray(b)&&(l=r.filter((function(e){return b.includes(e.dataIndex)}))).length>0&&(r=r.filter((function(e){return!b.includes(e.dataIndex)})),l.length>0&&r.unshift.apply(r,l)),(!e.is(t.addDefaultGroupingColumns)||e.is(t.addDefaultGroupingColumns,"boolean")&&!0===t.addDefaultGroupingColumns)&&(r=r.concat(R())),e.is(o)&&!0===o&&r.splice(0,0,O()),{columns:r,labelIsOnRef:e.is(t.Label)?a.labelIsOnRef:null,label:e.is(t.Label)?a.label:null}},manageColumn:function(e,t,n){n&&(!0===n.visible?e.showColumn(t):e.hideColumn(t))},getLabelColumnDataIndex:function(){return N}}}})),define("DS/DELWKOViewBehaviors/DELWKOTreeListViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXDragDrop","DS/DELWKOViewBehaviors/DELWKOTreeContextualMenu","DS/DELWKOViewBehaviors/DELWKOColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXActionDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXGenericLinksDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXManageCapableRscDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Relations/RelationsUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ToolTipManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/DataGridViewManager","DS/Utilities/Dom","DS/Core/PointerEvents","DS/DELWKOFilteringModule/DELWKOFilteringBaseFilter","DS/DELWKOFilteringModule/DELWKOFilteringSetFilterView"],(function(e,t,n,i,o,a,l,r,s,d,u,c,g,p,f,m,h){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","PlatformPlugin","SelectionPlugin"],creator:function(b,y,C,I,v,D,T,V,w,S,M,L,E,A,x){var P,R,O,N,F,B,U,k,W,_,j,G,H,K,X,z,Q,q,J,Y,Z,$,ee,te,ne,ie,oe,ae,le,re,se,de,ue,ce,ge,pe,fe,me={},he=new s(y,v,V,E,C,A),be=new d(y,v,w),ye=(new u(y,T,v,D),I.getComponent("DataGridView")),Ce=new c(y,S,C,v,D,T),Ie={placeholder:"",apiVersion:2,showSelectionCheckBoxesFlag:!0,rowSelection:"multiple",cellSelection:"none",showRowIndexFlag:!1,defaultColumnDef:{sortableFlag:!0,editionPolicy:"EditionOnOver",typeRepresentation:"string"},isEditable:!1,selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",rowGroupingOptions:{depth:0,hideGroupedColumns:!1},getCellTooltip:function(t){var n,i,o,a,l=this.getColumnOrGroup(t.columnID),r={longHelp:""},s=[],d=T.getAttributeInfoFromColumn(l),u=D.getAttributeInfo(d.attributeName),c=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader&&e.is(t.nodeModel)&&!e.is(t.nodeModel.getReferencePID))return r;switch(!e.is(l.displayType)&&e.is(d)&&T.isMultiValuated(u)&&(l.displayType="Multivalue"),l.displayType){case"URL":!t.isHeader&&e.is(t.cellModel)?r.longHelp=t.cellModel.label:r.longHelp=t.cellModel;break;case"MIL":case"CIM":o=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?r.longHelp="object"===e.typeOf(o)?o.getLabel():o:(a=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(a)?e.is(a.tooltip)?a.tooltip:a.getLabel():"");break;case"RWU":o=t.cellModel,t.isHeader||"RWU_Action"!==t.dataIndex?r.longHelp="object"===e.typeOf(o)?o.getLabel():o:(a=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(a)?e.is(a.tooltip)?a.tooltip:e.is(a.getLabel)?a.getLabel():"":"");break;case"Relation":case"Multivalue":if("Multivalue"!==l.displayType||t.isHeader||(c=T.getValueAsArray(t.nodeModel.options.grid[t.dataIndex])),"Relation"!==l.displayType||t.isHeader||(c=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(c)&&0!==c.length){for(T.isDate(u)&&(c=c.map((function(e){return T.getFormattedDate(e)}))),i=0;i<c.length;i++)n=c[i],s.push(e.is(n.Value)?n.Value:n);r.longHelp=T.getValueAsString(s,T.getType(u)).split(y.getPreferenceValue("separator")).join("\n")}else t.isHeader&&(r.longHelp=c);break;case"DocMgmt":if(t.isHeader||(c=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(c)&&0!==c.length){s=c.reduce(((e,t)=>("Reference Document"===t.type?e.Attachments.push(t.title):e.Specifications.push(t.title),e)),{Specifications:[],Attachments:[]});let e="";for(const[t,n]of Object.entries(s))Array.isArray(n)&&n.length>0&&(e+=t+":",n.forEach((t=>{e+="\n\t"+t})),e+="\n");r.longHelp=e}else t.isHeader&&(r.longHelp=c);break;case"hideShow3D":t.isHeader?r.longHelp=C.getNLSValue("HideShow3D.tooltip"):(o=t.cellModel,e.is(o,"boolean")&&(r.longHelp=o?C.getNLSValue("HideShow3D.hide3D"):C.getNLSValue("HideShow3D.show3D")));break;case"BIEssentials":case"BIEssentialsAltSub":t.isHeader?r.longHelp=t.cellModel:(o=t.nodeModel.options[t.dataIndex],r.longHelp=e.is(o)?o.tooltip:"");break;case"OPTime":t.isHeader?r.longHelp=t.cellModel:(o=t.nodeModel.getAttributeValue("V_OperationTime"),r.longHelp="string"===e.typeOf(o)&&"FetchInProgress"!==o?o:"");break;default:o=t.cellModel,t.isHeader||(e.is(o)?"object"===e.typeOf(o)?o=o.getLabel():T.isBoolean(u)?o="TRUE"===o?C.getNLSValue("TRUE"):C.getNLSValue("FALSE"):T.isDate(u)?o=T.getFormattedDate(o):T.hasRangeDefined(u)?o=t.cellModel:(T.isDouble(u)||T.isInteger(u))&&(o=T.getValueAsString(o,T.getType(u))):o=""),r.longHelp=o}return!t.isHeader&&e.is(t.nodeModel)&&(o=Ce.getTooltipValue(t),e.is(r.longHelp)&&(r.longHelp+=r.longHelp.length>0&&o.length>0?"\n\n":"",r.longHelp+=o)),r},getCellEditableState:function(e){var t,n=!0;return!0===e.isHeader?n=!1:"selection"===e.dataIndex?n=!0:(t=T.getNodeAndColumnInfos(e.nodeModel,e.parent.options.columns[e.virtualColumnID]),n=!T.isReadOnly(t.attributeInfo,t.attributeDef)),n}};return Q=function(){var e=P.getTreeDocument();e.getFilterManager().registerFilter("wkoFilter",m);const t=P.getFilterViewManager();t.registerFilterView("wkoSet",h),t.registerFilterView("wkoFilter",t.FILTERVIEWS_MAP.wkoSet);let n={label:{filterId:"wkoFilter",filterOptions:{keepChildren:!0,ensureVisible:!0}}};const i=P.columns.length;for(let e=0;e<i;e++){var o;if("url"===P.columns[e].typeRepresentation)"current.reference"===(o=P.columns[e].dataIndex)&&(n[o]={filterId:"set"});if("datetime"===P.columns[e].typeRepresentation)n[o=P.columns[e].dataIndex]={filterId:"dateWithCondition"}}e.setFilterModel(n)},q=function(s){var d;if(_=e.is(s.columnConfig)?s.columnConfig:L.getViewColumnPreferences(y.getId(),B),G=(s=s||{}).dataGridViewOptions?e.extend(Ie,s.dataGridViewOptions,!0):Ie,!e.is(_))throw new Error("_createTreeListView options not defined");if(G.contextualCommands&&(X=new n(y,I,C,T,A,v,L,D,E),G.onContextualEvent=function(t){var n,i,o,a,l=this,r=[],s={};if(e.is(t.cellInfos)&&(n=(o=t.cellInfos).nodeModel,a=o.manager,e.is(o.rowID))){if(-1===o.rowID){if(e.is(G.headerContextualCommands)){if(i=l.getColumnOrGroup(o.columnID),(s={node:n,selectedNodes:l.getTreeDocument().getXSO().get(),column:i,virtualColumnID:o.columnID,dataIndex:i.dataIndex,manager:a,handlers:{onSizeColumnToFit:function(e){a.sizeColumnToFit(e)},onSortColumnContentAsc:function(){a.sortColumn(i.dataIndex,"asc")},onSortColumnContentDesc:function(){a.sortColumn(i.dataIndex,"desc")},onClearSort:function(){a.clearSort()},onHideColumn:function(e){L.updateViewPreferences(y.getId(),i.dataIndex,{visibility:!1}),l.hideColumn(e,{isUserInteraction:!1})},onPinColumn:function(e){P.layout.columns[e].icon={},P.layout.columns[e].icon.iconName="pin",P.layout.columns[e].icon.fontIconFamily=WUXManagedFontIcons.Font3DS,P.layout.setColumnPinned(i.dataIndex,"left"),L.updateViewPreferences(y.getId(),i.dataIndex,{colPinned:"left"})},onUnpinColumn:function(e){P.layout.columns[e].icon={},P.layout.setColumnPinned(i.dataIndex,"unpinned"),L.updateViewPreferences(y.getId(),i.dataIndex,{colPinned:"unpinned"})},onGroupRows:function(e,t){var n;L.doesModuleHaveRecursiveGrouping(y.getId())?(n=i.dataIndex!==e?l.getColumnOrGroup(a.getColumnIndexByDataIndex(e)):i,de(n)):ae(e,t)},onRemoveGrouping:function(){L.doesModuleHaveRecursiveGrouping(y.getId())?ue():le()},onGroupByCriteria:function(e){y.getBehavior("GroupingViewBehavior").group(e)},onUngroupByCriteria:function(e){y.getBehavior("GroupingViewBehavior").ungroup(e)}}}).params=t,r=X.buildContextualMenu(G.headerContextualCommands,s),e.is(i.pinned)&&"unpinned"!=i.pinned){var d=-1,u=-1;r.forEach((e=>{d++,"PinColumn"!==e.title&&"Pin"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}else{d=-1,u=-1;r.forEach((e=>{d++,"UnpinColumn"!==e.title&&"Unpin"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}var c=l.getTreeDocument().getFilterManager().getFilters();if(e.is(c)){var g;if("tree"!=s.dataIndex?e.is(c[s.dataIndex])&&(g=c[s.dataIndex].filterModel):e.is(c.label)&&(g=c.label.filterModel),e.is(g)){d=-1,u=-1;r.forEach((e=>{d++,"FilterColumn"!==e.title&&"Apply Filter"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}else{d=-1,u=-1;r.forEach((e=>{d++,"ResetFilterColumn"!==e.title&&"Reset Filter"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}}else{d=-1,u=-1;r.forEach((e=>{d++,"FilterColumn"!==e.title&&"Apply Filter"!==e.title||(u=d)})),u>-1&&r.splice(u,1),d=-1,u=-1,r.forEach((e=>{d++,"ResetFilterColumn"!==e.title&&"Reset Filter"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}}"selection"===o.dataIndex||"taggerColor"===o.dataIndex||"hide_show_3D"===o.dataIndex?r.forEach((function(e){e.state="disabled"})):"tree"===o.dataIndex&&r.forEach((function(e){"Hide"===e.title&&(e.state="disabled")}))}else if(0<=o.rowID){if(!e.is(n.getReferencePID))return;e.is(n)&&(n.isSelected()||n.select()),i=l.getColumnOrGroup(o.columnID),(s={node:n,selectedNodes:l.getTreeDocument().getXSO().get(),column:i,getColumnIDFromDataIndex:function(e){return a.getColumnIndexByDataIndex(e)},getColumnOrGroup:function(e){return o.cellView.collectionView.getColumnOrGroup(e)},handlers:{onGroupRows:function(e,t){ae(e,t)},onRemoveGrouping:function(){le()}}}).infos=T.getNodeAndColumnInfos(n,i),r=X.buildContextualMenu(G.contextualCommands,s)}return r}}),e.is(s.pinnedColumns)&&(G.pinnedColumns=s.pinnedColumns),e.is(s.dataGridViewOptions)&&e.is(s.dataGridViewOptions.enableDragAndDrop,"boolean")&&!0===s.dataGridViewOptions.enableDragAndDrop){switch(G.cellDragEnabledFlag=!0,G.rowDragEnabledFlag=!0,d={acceptedTypes:s.pprTypes,pprTypesWithSupportedViews:e.is(s.pprTypesWithSupportedViews)?s.pprTypesWithSupportedViews:[],pprTypesWithSupportedRoot:e.is(s.pprTypesWithSupportedRoot)?s.pprTypesWithSupportedRoot:[]},s.dragDropManager){case"WUXActionDragDrop":d=e.extend(d,{linkTypes:s.linkTypes}),F=new o(b,y,C,v,D,S,M,A);break;case"WUXGenericLinksDragDrop":d=e.extend(d,{linkTypes:s.linkTypes}),F=new a(b,y,C,v,D,S,M,I);break;case"WUXManageCapableRscDragDrop":d=e.extend(d,{linkTypes:s.linkTypes}),F=new l(b,y,C,v,D,S,M,I);break;case"WUXDataCollectRowDragDrop":d=e.extend(d,{linkTypes:s.linkTypes}),F=new r(b,y,C,S,v);break;default:F=new t(b,y,C,v,D,S,M,A)}F.init(d),G=e.extend(G,F.getDDBehavior())}G.filterModel=s.filterModel,O=new i(b,y,j,K,v,D,T,C,I,V,L,x),H=O.createTreeListViewColumns(_,G.showTagger,G.showSelection,G.show3DHideShow)},z=function(t){var n,i,o=y.getPreferenceValue("separator");if(N=t,e.is(H)&&e.is(H.columns,"array")?G.columns=H.columns:G.columns=[],e.is(P))P.setProperties({columns:G.columns});else{G.treeDocument=t,P=new ye(G),R=new g(P),P.registerColumnsEnum();const n=y.getBehavior("CfgColumnsBehavior");if(e.is(n)){const e=n.getRequiredTypeRepresentations();P.registerColumnTypeRepresentations(e)}}if(p.addEventOnElement(P,P,f.POINTERUP,(function(e,t){var n=y.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"desc")})),p.addEventOnElement(P,P,f.POINTERDOWN,(function(e,t){var n=y.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"asc")})),e.is(G.toolbarOptions)&&Array.isArray(G.toolbarOptions.items)&&P.setToolbar(ce(G.toolbarOptions.items)),e.is(G.pinnedColumns)&&Array.isArray(G.pinnedColumns),_.Label)if("Auxiliary"===_.name&&e.is(_.Label.length)){for(P._treeDataIndex="",P._label="",P._types="",i=0;i<_.Label.length;i++)P._treeDataIndex+=i<_.Label.length-1?_.Label[i].dataIndex+o:_.Label[i].dataIndex,P._label+=i<_.Label.length-1?_.Label[i].dataIndex.split(".")[0]+o:_.Label[i].dataIndex.split(".")[0],P._types+=i<_.Label.length-1?_.Label[i].type+o:_.Label[i].type;P._labelIsOnRef=!0,P.isMultipleLabel=_.Label.length>1}else P._treeDataIndex=_.Label.dataIndex,P._label=H.label,P._labelIsOnRef=H.labelIsOnRef,P.isMultipleLabel=!1;e.is(G.setReusablecontent)&&!1===G.setReusablecontent||O.setReusablecontent(P),n=O.getBlockAttributes(_),v.setSelectPredicate(y.getId(),n)},Y=function(t){var n,i,o,a,l,r,s,d=t.type,u={icons:"",label:"",grid:{},useAsyncPreExpand:!0},c=y.getPreferenceValue("separator"),g=O.getColumnsDataIndex(P);if(P._labelIsOnRef){if(l="VPMReference"===d&&(e.is(t.V_usage,"array")&&t.V_usage.includes("3DPart")||e.is(t.V_usage,"string")&&"3DPart"===t.V_usage)?C.getIconURLFromKey("3DPart"):C.getIconURLFromKey(d),u.icons=[l],u.label="",e.is(P.isMultipleLabel)&&P.isMultipleLabel)for(o=P._label.split(c),a=P._types.split(c),s=0;s<o.length;s++)e.is(t.type)&&("undefined"===a[s]||"undefined"!==a[s]&&D.isAKindOf(t.type,a[s]))&&(r=""===u.label?"":c,e.owns(t,o[s])&&e.is(t[o[s]])&&(u.label+="NULL"!==t[o[s]]?r+t[o[s]]:""));e.owns(t,P._label)&&(u.label="NULL"!==t[P._label]?t[P._label]:"")}for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i=t[n],e.is(i)&&"NULL"!==i&&(e.is(g)&&g.forEach((e=>{e.includes(n+".reference")&&(u.grid[n+".reference"]=t[n])})),"PID"===n&&(u.referencePID=t[n]),"type"===n&&(u.referenceType=t[n]),"defType"===n&&(u.defType=i)));return he.fillNodeOptions(u,g),be.fillNodeOptions(u,g),e.is(me.show3DHideShow)&&!0===me.show3DHideShow&&(u.hideShow3D=!0),u},J=function(t,n,i){var o,a,l=O.getColumnsDataIndex(P),r=Y(t);for(o in!P._labelIsOnRef&&e.owns(n,P._label)&&(r.label="NULL"!==n[P._label]?n[P._label]:""),n)Object.prototype.hasOwnProperty.call(n,o)&&(a=n[o],e.is(a)&&"NULL"!==a&&(l&&l.indexOf(o+".instance")>=0?r.grid[o+".instance"]=n[o]:"PID"===o?r.instancePID=n[o]:"V_TreeOrder"===o&&(r.grid.V_TreeOrder=parseFloat(n[o]))));return he.fillNodeOptions(r,l,n,i),r},Z=function(t){var n,i,o,a=t.changedAttributes(),l=t.isInstance()?".instance":".reference",r=P._labelIsOnRef?".reference":".instance",s=O.getColumnsDataIndex(P),d={};if(!t.isConnection()&&e.is(a)){for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(o=n+l,e.is(s)&&s.forEach((e=>{e.includes(o)&&(d[o]="NULL"!==a[n]?a[n]:"")})),n===P._label&&r===l&&(i="NULL"!==a[n]?a[n]:""));return{label:i,attributes:d}}},$=function(){var e,t,n=[],i=R.getNumberOfRows();for(e=0;e<i;e++)t=R.getTreeNodeModelFromRowID(e),n.push(t.getReferencePID());return n},ee=function(){var t,n,i,o,a,l,r,s,d,u;if(k)for(i=L.getViewColumnPreferences(y.getId()),n=e.is(i)?i.Columns.Column:[],a=P.getColumnIndexByDataIndex("tree")+1,t=0;t<n.length;t++){if(s={},(o=n[t]).isHidden)P.isColumnHidden(o.dataIndex)||P.hideColumn(o.dataIndex);else{u=isNaN(o.width)?"auto":parseInt(o.width),P.getColumnWidth(o.dataIndex)!==u&&(s.width=u),u=isNaN(o.minWidth)?"100":parseInt(o.minWidth),P.getColumnMinWidth(o.dataIndex)!==u&&(s.minWidth=u),P.isColumnHidden(o.dataIndex)&&(s.visibleFlag=!0),e.Object.keys(s).length>0&&P.layout.setColumnOrGroupProperties(o.dataIndex,s),d=P.getColumnIndexByDataIndex(o.dataIndex),r=P.layout.getOrderedColumnsReverseIndexes(),l=P.layout.getOrderedColumnsIndexes();var c=P.layout.getColumnPinned(d);o.pinned!=c&&(P.layout.columns[d].icon={},"unpinned"!=o.pinned&&(P.layout.columns[d].icon.iconName="pin",P.layout.columns[d].icon.fontIconFamily=WUXManagedFontIcons.Font3DS),P.layout.setColumnPinned(d,o.pinned)),r[d]!==a&&P.moveColumn(o.dataIndex,l[a])}a++}},te=function(e){var t,n,i="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(63&n|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(63&n|128));return i},ne=function(e){return'"'+te(e).replace(/"/g,'""')+'"'},ie=function(e){G.showTagger&&P.updateNodeKPIColor(e)},oe=function(t){var n,i,o=[],a=t.collectionView;if(t.startNodeIndex>=0&&t.endNodeIndex>=0){for(n=t.startNodeIndex;n<=t.endNodeIndex;n++)i=a.model[n],e.is(i)&&o.push(i);o.length>0&&y.notify("visibleNodesChanged",[y.getId(),o])}},re=function(t){var n=L.getColumnsForGrouping(y.getId());((t=!!e.is(t,"boolean")&&t)||n.length>0)&&P.groupRows({dataIndexesToGroup:n})},se=function(t){var n;e.is(t.options)&&t.options.updateType===WUXModelUpdateTypes.Grouping&&(L.isGroupingExist()||y.notify("manageCommandsOnGrouping"),n=L.getColumnsForGrouping(y.getId()),e.is(U)&&0===n.length&&(y.getBehavior("WUXNodeModelBehavior").removeEventListener(U),U=void 0))},ae=function(t,n){var i;L.getColumnsForGrouping(y.getId(),!0).length>0&&P.rowGroupingOptions.depth!==n?y.warn(C.getNLSValue("TableView.InvalidGrouping")):(e.is(U)||(i=y.getBehavior("WUXNodeModelBehavior"),e.is(i)&&(U=i.addEventListener("pushUpdate",se))),P.rowGroupingOptions.depth=n,L.addColumnForGrouping(y.getId(),t),re(),y.notify("manageCommandsOnGrouping"))},le=function(){L.resetColumnsForGrouping(y.getId()),re(!0)},de=function(t){var n,i=y.getBehavior("GroupingViewBehavior"),o=t.dataIndex;e.is(i)&&!0===t.groupableFlag&&(L.resetColumnsForGrouping(y.getId()),L.addColumnForGrouping(y.getId(),o),"tree"===o&&(o=O.getLabelColumnDataIndex()),o.endsWith(".group")&&(o=L.getCollectionSpecificDataIndex(o)),n={dataIndex:o,title:t.text},i.group(n))},ue=function(){var t=y.getBehavior("GroupingViewBehavior");e.is(t)&&(L.resetColumnsForGrouping(y.getId()),t.clearGrouping())},ce=function(t){return{entries:t.map((function(t){var n,i=C.getIconURLFromKey(t.icon);return e.is(t.tooltip)&&(n={title:C.getNLSValue(t.tooltip.title),shortHelp:C.getNLSValue(t.tooltip.shortHelp)}),{id:t.id,dataElements:{typeRepresentation:e.is(t.typeRepresentation)?t.typeRepresentation:"functionIcon",position:e.is(t.position)?t.position:"far",category:e.is(t.category)?t.category:"0",icon:{iconPath:i,iconSize:{width:"22px",height:"22px"}},value:ge.bind(null,t.id),disabled:!!e.is(t.disabled)&&t.disabled,tooltip:n}}}))}},fe=function(e,t){var n,i,o;i=X.buildContextualMenu(e.children),n={position:{x:(o=t.dsModel.elements.container.getBoundingClientRect()).left+5,y:o.top+(o.height-5)}},WUXMenu.show(i,n)},ge=function(t,n){var i;i=G.toolbarOptions.items.find((function(e){return t===e.id})),e.is(i)&&e.is(i.children)?fe(i,n):e.is(G.toolbarOptions.actionHandler,"function")?G.toolbarOptions.actionHandler.call(null,t,n):e.is(X)&&X.onContextMenuCallback(t)},pe=function(t){var n;t=Array.isArray(t)?t:[t],P&&(n=P.getToolbar(),e.is(n)&&n.items.getChildren().forEach((function(e){var n=e.options.id,i=t.indexOf(n);e.updateOptions({disabled:-1===i})})))},{viewName:"treeListView",listenTo:function(){return{TreeViewPrefModified:ee,LoadDropContent:this.processDropContent}},onStart:function(t,n){t=t||{},e.is(t.pprTypes)&&e.is(t.columnConfigName)&&(e.is(t.hasReadOnlyTypes,"boolean")&&t.hasReadOnlyTypes&&(Ie.defaultColumnDef.getCellEditableState=function(t){let n=null;return e.is(t)&&e.is(t.nodeModel)&&e.is(t.nodeModel.object)&&(n=t.nodeModel.object.type||null),(!e.is(n)||!D.isReferencesHasReadOnlyType(n))&&P.getColumnOrGroup(t.dataIndex).editableFlag}),e.is(t.views)&&e.is(t.views.treeListView)&&(me=t.views.treeListView,Object.prototype.hasOwnProperty.call(me,"show3DHideShow")&&A.isSuppressHideShow3DColumn()&&(me.show3DHideShow=!1)),e.is(t.views.treeListView.toolTipConfigXML)&&Ce.init(t.views.treeListView.toolTipConfigXML),B=t.columnConfigName,(k=!!e.is(t.registerViewPreference)&&t.registerViewPreference)&&L.registerViewforColumnPref({viewID:y.getId(),columnConfigName:t.columnConfigName,viewIcon:t.moduleIcon}),j=Array.isArray(t.columnsBeforeTitle)?t.columnsBeforeTitle:null,!!e.is(t.immutableColumns,"boolean")&&t.immutableColumns&&L.registerModuleColumnsAsImmutable(y.getId()),K=!!e.is(t.noActiveCellChange,"boolean")&&t.noActiveCellChange,q({pprTypes:t.pprTypes,dataGridViewOptions:e.merge(me,{isEditable:!!e.is(t.isAuthoringAllowed)&&t.isAuthoringAllowed}),dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,pprTypesWithSupportedViews:Array.isArray(t.pprTypesWithSupportedViews)?t.pprTypesWithSupportedViews:null,pprTypesWithSupportedRoot:Array.isArray(t.pprTypesWithSupportedRoot)?t.pprTypesWithSupportedRoot:null,pinnedColumns:Array.isArray(t.pinnedColumns)?t.pinnedColumns:null,filterModel:t.filterModel}),!0===(W=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&L.registerViewforWidgetLayout({viewID:y.getId(),viewType:this.viewName})),n()},onStop:function(){e.is(P)&&P.remove(),k&&L.unRegisterViewforColumnPref(y.getId()),!0===W&&L.unregisterViewforWidgetLayout(y.getId(),this.viewName)},has3DHideShowColumn:function(){return!!e.is(me.show3DHideShow,"boolean")&&me.show3DHideShow},createTreeListView:function(t){var n,i,o="",a=me;t=t||{},e.is(t.dataGridViewOptions.identifier)&&(o=t.dataGridViewOptions.identifier),e.is(t.columnConfig)&&(i=t.columnConfig),e.is(t.dataGridViewOptions)&&(a=t.dataGridViewOptions),q({columnConfig:i,pprTypes:t.pprTypes,dataGridViewOptions:a,dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,identifier:o}),e.is(t.treeDocument)&&(z(t.treeDocument),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(t.treeListViewContainer)&&P.getContent().inject(t.treeListViewContainer),e.is(t.toolbarContainer)&&(n=P.getToolbar(),e.is(n)&&n.getContent().inject(t.toolbarContainer)))},getColumnsByDisplayType:function(e){var t,n,i=[],o=O.getColumnDataIndexByDisplayType(P,e),a=o.length;for(t=0;t<a;t++)n=o[t],i.push(n.split(".")[0]);return i},loadDocument:function(t){z(t),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(G)&&G.filterModel&&Q()},getContent:function(){var t=void 0;return e.is(P)&&(t=P.getContent()),t},manageColumn:function(t,n){if("taggerColor"!==t)return e.is(P)&&e.is(O)?O.manageColumn(P,t,n):void 0;ie(n.visible)},processDropEffect:function(e){return F.processDropEffect(e)},processDropContent:function(e,t){var n=new Event("Drag");return n.dataTransfer=new DataTransfer,n.dataTransfer.setData("Text",e),F.onTreeListViewDrop(n,t)},getTreeListViewManager:function(){var t=null;return e.is(R)&&(t=R),t},getLabelAttribute:function(){return P._label},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=Y(t.toJSON())),n},getInstanceNodeOptions:function(t,n,i){var o;return e.is(t)&&e.is(n)&&(o=J(t.toJSON(),n.toJSON(),i)),o},getRelationNodeOptions:function(e,t){var n=O.getColumnsDataIndex(P);return he.getRelationAttributes(e,n,t)},getDocumentNodeOptions:function(e){var t=O.getColumnsDataIndex(P);return{attributes:be.getDocumentNodeOptions(e,t)}},getUpdateNodeOptions:function(t){var n;return e.is(t)&&(n=Z(t)),n},getVisibleTableContentAsCSV:function(e){return te(P.getAsCSV({columnSeparator:e,addLevelInformation:!0,allColumns:!1,forceQuotes:!0}))},getConfiguredAttributesAsCSV:function(t,n){var i,o,a,l,r,s=[],d="";function u(e,n){var i,o;for(i=t[n].Attribute,o=0;o<i.length;o++)if((l=i[o].name)===e)return!0;return!1}for(i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(o=t[i].Attribute,a=0;a<o.length;a++)l=o[a].name,-1===s.indexOf(l)&&s.push(l);for(r=0;r<s.length;r++)0!==r&&(d+=n),d+=ne(s[r]);return d+="\r\n",$().forEach((function(o){var a,l,c;if(a=v.getReference(o),e.is(a)&&function(e){return Object.prototype.hasOwnProperty.call(t,e)}(i=a.get("type"))){for(r=0;r<s.length;r++)0!==r&&(d+=n),c=u(l=s[r],i)&&e.is(a.get(l))?String(a.get(l)):"",d+=ne(c);d+="\r\n"}})),d},isInverseRelationColumnPresent:function(){var t,n=!1,i=V.getInverseRelationNameSet();return i.size>0&&e.is(O)&&(t=O.getColumnsDataIndex(P),e.is(t,"array")&&(n=t.some((function(e){return i.has(e)})))),n},getDataGridView:function(){return P},getTreeDocument:function(){return N},getToolBarContent:function(){var e,t=null;return P&&(e=P.getToolbar())&&(t=e.getContent()),t},enableToolBarItems:function(e){pe(e)}}}}})),define("DS/DELWKOViewBehaviors/DELWKOColumnManagerCloud",["UWA/Core","DS/DELWKOViewBehaviors/DELWKOCellManagerCloud","DS/DELWKOViewBehaviors/DELWKORelationsColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/MIL/MILColumnManagerMFN","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RWU/RWUColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MCRColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ManageCapableResources/MSOColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/DataCollectRowColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/HideShow3DColumnManager","DS/DELPPWViewBehaviors_FD02/CfgColumnsBehavior/CfgCellManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/RPColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/CoProduct/CoProductColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeColumnManager","DS/DELWKOViewBehaviors/DELWKOOrderQuantityColumnManager","DS/DELWKOViewBehaviors/DELWKOPriorityColumnManager","DS/DELWKOViewBehaviors/DELWKOColorColumnManager"],(function(e,t,n,i,o,a,l,r,s,d,u,c,g,p,f,m,h,b){"use strict";return function(y,C,I,v,D,T,V,w,S,M,L,E){var A,x,P,R,O,N,F,B,U,k=L.getGroupingAdditonalColumns(),W=C.getBehavior("WUXNodeModelBehavior"),_=new d(C,w),j=new t(C,T,D,V,w,L),G=new a(C,D,w,E,S),H=new c(C,T,D,w),K=new n(C,w,L),X=(new g(C,V,D,T,w),new p(C,V,D,T,w)),z=(new f(C,V,D,T),new r(C,T,D,V,w,L)),Q=new m(C,T,D,V,w,L),q=new h(C,T,D,V,w,L),J=new b(C,T,D,V,w,L);return N=(N=(N=(N=(N=[]).concat(G.getNonModelDataIndexes())).concat(_.getNonModelDataIndexes())).concat(X.getNonModelDataIndexes())).concat(H.getNonModelDataIndexes()),x=function(t){var n,i,o,a,l={treeDataIndex:null,label:null,labelIsOnRef:null,dicoType:null},r=C.getPreferenceValue("separator");if(e.owns(t,"name")&&"Auxiliary"===t.name&&e.owns(t,"Label")&&e.is(t.Label.length)&&t.Label.length>1)for(l.treeDataIndex="",l.label="",l.dicoType="",o=t.Label,i=0;i<o.length;i++)l.treeDataIndex+=t.Label.dataIndex,l.dicoType+=t.Label.dicoType,n=l.treeDataIndex.split("."),l.label+=n[0],a=n[1],l.labelIsOnRef="instance"===a?!!e.is(l.labelIsOnRef)&&(l.labelIsOnRef&&!1):!e.is(l.labelIsOnRef)||l.labelIsOnRef&&!0,i+1!==o.length&&(l.label+=r,l.type+=r,l.dicoType+=r,l.treeDataIndex+=r);else e.owns(t,"Label")&&(l.treeDataIndex=t.Label.dataIndex,l.dicoType=t.Label.dicoType,n=l.treeDataIndex.split("."),l.label=n[0],a=n[1],l.labelIsOnRef="instance"!==a);return l},P=function(t){var n=[];return e.is(t.dicoType,"array")&&(n=t.dicoType.map((function(t){return e.is(t,"object")&&e.owns(t,"dicoType")?t.dicoType:t}))),n},R=function(t){let n=t;Array.isArray(n)||(n=[n]);const a=C.getBehavior("CfgColumnsBehavior");if(e.is(a)){const e=a.computeVisibleConfigColDataIndices(n);a.setVisibleCfgColDataIndices(e),n=a.filterCFGColumnsBasedOnAvailability(n)}return n.map((function(t){var n,a,r,d,c=!1,g=!1,p=!1,f={sortableFlag:!1,groupableFlag:!0,dataIndex:t.dataIndex,dicoType:t.dicoType,displayType:t.displayType,visibleFlag:!e.is(t.isHidden)||!t.isHidden,width:isNaN(t.width)?"auto":parseInt(t.width),minWidth:isNaN(t.minWidth)?100:parseInt(t.minWidth),text:V.getColumnDisplayValue(t),editionPolicy:"EditionOnOver",tooltipIndex:t.Tooltip,hasCellValue:j.hasCellValue,getCellValue:j.getCellValue.bind(j,t),getCellValueForExport:function(n){var i,o="",a=n.cellModel;return n.rowID<0?o=a:e.is(a)&&(c&&!g?(i=n.nodeModel.getAttributeValue(t.dataIndex),Array.isArray(i)&&(o=i.join())):o=e.is(a,"array")?a.join():a.toString()),o}};d=function(){return{minValue:0,units:a,viewOptions:{customFormatter:function(e){return V.getFormattedValue(e)}}}};var m=V.getAttributeInfoFromColumn(t),h=T.getAttributeInfo(m.attributeName);if(e.is(h)&&(g=V.hasRangeDefined(h),c=V.isMultiValuated(h),(p=V.hasMagnitude(h))&&(a=V.getNLSForUnit(h))),e.is(t.dataIndex)&&t.dataIndex.includes("PLM_ExternalID")&&(f.icon={iconName:"flow-cascade",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"}),!e.is(t.displayType)||"MultiType"!==t.displayType&&"OrderQtyMultiType"!==t.displayType&&"PriorityMultiType"!==t.displayType||(h=T.getAttributeInfo(m.dataIndex)),e.is(t.displayType)&&t.displayType.contains("URL")&&(r=L.getURLColumnInfo(t.dataIndex))&&(t.command=r.command,e.owns(r,"defaultValue")?t.defaultValue=r.defaultValue:t.defaultValue=""),!e.is(t.displayType)&&e.is(m)&&V.isDate(h)&&!g&!c&&(t.displayType="Date"),e.is(t.displayType))switch(f.editableFlag=!1,t.displayType){case"FullOwnerURL":f.typeRepresentation="url",f.className=L.areModuleColumnsImmutable(C.getId())?"icon-text-column":"url-column",f.getCellValue=j.getFullOwnerURL,f.command=L.areModuleColumnsImmutable(C.getId())?null:t.command,f.getCellValueForExport=j.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"CustomString":f.typeRepresentation="string",f.getCellValue=j.getCustomStringCellValue;break;case"URL":f.typeRepresentation="url",f.className=L.areModuleColumnsImmutable(C.getId())?"icon-text-column":"url-column",f.getCellValue=j.getURLCellValue,f.command=L.areModuleColumnsImmutable(C.getId())?null:t.command,f.defaultValue=t.defaultValue,f.getCellValueForExport=j.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"IconText":f.typeRepresentation="url",f.className="icon-text-column",f.hasCellValue=function(){return!0},f.getCellValue=function(e){var t=e.nodeModel.options.grid;return{label:t[e.dataIndex],getLabel:function(){return this.label},icon:{iconPath:t.cellInfo.IconUrl,iconSize:{width:"22px",height:"22px"}}}};break;case"Relation":f.typeRepresentation="url",f.className=L.areModuleColumnsImmutable(C.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=K.getCellValue,f.hasCellValue=K.hasCellValue,f.getCellValueForExport=K.getCellValueForExport,f.getCellSemantics=K.getCellSemantics;break;case"DocMgmt":f.className=L.areModuleColumnsImmutable(C.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=j.getCellValueForDocMgt,f.getCellValueForExport=function(t){return e.is(t.cellModel,"array")&&t.cellModel.join(", "),e.is(t.cellModel)?t.cellModel.toString():""};break;case"BIEssentials":case"BIEssentialsAltSub":f.typeRepresentation="color",f.className="biessentials",f.groupableFlag=!1,f.getCellValue=j.getBICellValue,f.getCellValueForExport=j.getBICellValueForExport;break;case"MIL":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=i.getCellTypeRepresentation,f.setCellValue=i.setMILValue.bind(null,t),f.getCellClassName=i.getCellClassName,f.getCellValue=i.getCellValue,f.getCellSemantics=i.getCellSemantics,f.hasCellValue=i.hasMILCellValue,f.getCellEditableState=i.getCellEditableState;break;case"MANAGECAPABLERESOURCESMOD":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=l.getCellTypeRepresentation,f.setCellValue=l.setValue.bind(null,t),f.getCellClassName=l.getCellClassName,f.getCellValue=l.getCellValue,f.getCellSemantics=l.getCellSemantics,f.hasCellValue=l.hasCellValue,f.getCellEditableState=l.getCellEditableState;break;case"MANAGESTEPOPERATIONSUI":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=z.getCellTypeRepresentation,f.setCellValue=z.setValue.bind(null,t),f.getCellClassName=z.getCellClassName,f.getCellValue=z.getCellValue,f.getCellSemantics=z.getCellSemantics,f.hasCellValue=z.hasCellValue,f.getCellEditableState=z.getCellEditableState;break;case"DataCollectRow":f.getCellTypeRepresentation=s.getCellTypeRepresentation,f.getCellClassName=s.getCellClassName,f.getCellValue=s.getCellValue,f.getCellSemantics=s.getCellSemantics,f.hasCellValue=s.hasCellValue;break;case"CIM":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=o.getCellTypeRepresentation,f.setCellValue=o.setMILValue.bind(null,t),f.getCellClassName=o.getCellClassName,f.getCellValue=o.getCellValue,f.getCellSemantics=o.getCellSemantics,f.hasCellValue=o.hasMILCellValue,f.getCellEditableState=o.getCellEditableState;break;case"RWU":f.editionPolicy="RWU_Replace"===t.dataIndex?null:"EditionInPlace",f.getCellTypeRepresentation=G.getCellTypeRepresentation,f.setCellValue=G.setRWUValue.bind(null,t),f.getCellClassName=G.getCellClassName,f.getCellValue=G.getCellValue,f.getCellSemantics=G.getCellSemantics,f.hasCellValue=G.hasRWUCellValue,f.getCellEditableState=G.getCellEditableState,f.getCellGroupingKey=G.getRWUGroupingKeyForURLColumn;break;case"MultiType":f.dicoType=P(t),f.editionPolicy="EditionOnOver",f.editableFlag=!V.isReadOnly(h),f.getCellTypeRepresentation=j.getMultiTypeCellRepresentation.bind(null,h),f.groupableFlag=!1,f.getCellValue=j.getMultiTypeCellValue,f.getCellSemantics=j.getMultiTypeCellSemantics,f.setCellValue=j.setValue;break;case"PriorityMultiType":f.dicoType=P(t),f.editionPolicy="EditionOnOver",f.editableFlag=!V.isReadOnly(h),f.getCellTypeRepresentation=q.getMultiTypeCellRepresentation.bind(null,h),f.groupableFlag=!1,f.getCellValue=q.getMultiTypeCellValue,f.getCellSemantics=q.getMultiTypeCellSemantics,f.setCellValue=q.setValue,f.hasCellValue=q.hasCellValue;break;case"OrderQtyMultiType":f.dicoType=P(t),f.editionPolicy="EditionOnOver",f.getCellEditableState=Q.getMultiTypeCellEditableState,f.getCellTypeRepresentation=Q.getCellTypeRepresentation,f.alignment="right",f.getCellValue=Q.getMultiTypeCellValue,f.getCellSemantics=Q.getCellSemantics,f.setCellValue=Q.setCellValue,f.hasCellValue=j.hasCellValue;break;case"Color":f.editionPolicy="EditionOnOver",f.editableFlag=!V.isReadOnly(h),f.getCellTypeRepresentation=J.getCellRepresentation.bind(null,h),f.getCellValue=J.getCellValue,f.setCellValue=J.setCellValue,f.hasCellValue=J.hasCellValue;break;case"CFG":f.groupableFlag=!1,f.getCellTypeRepresentation=u.getCellTypeRepresentation,f.getCellValue=u.getCellValue,f.hasCellValue=u.hasCellValue;break;case"Date":case"DateTime":f.editionPolicy="EditionOnOver",f.editableFlag=!V.isReadOnly(h),f.typeRepresentation="datetime",f.setCellValue=j.setValue,f.getCellValueForExport=function(e){var n="",i=e.cellModel,o="DateTime"===t.displayType;return e.rowID<0?n=i:i&&(n=V.getFormattedDate(i,o)),n};break;case"NonEditable":f.editableFlag=!1,V.isBoolean(h)?f.typeRepresentation="boolean":V.isDate(h)&&(f.typeRepresentation="datetime");break;case"NonEditableMultiType":f.editableFlag=!1,f.dicoType=P(t),f.getCellTypeRepresentation=j.getMultiTypeCellRepresentation.bind(null,h),f.groupableFlag=!1,f.getCellValue=j.getMultiTypeCellValue,f.getCellSemantics=j.getMultiTypeCellSemantics,f.setCellValue=j.setCellValue;break;case"NonEditableQtyMultiType":f.editableFlag=!1,f.dicoType=P(t),f.getCellTypeRepresentation=Q.getCellTypeRepresentation,f.alignment="right",f.getCellValue=Q.getMultiTypeCellValue,f.getCellSemantics=Q.getCellSemantics,f.setCellValue=Q.setCellValue,f.groupableFlag=!1}else f.editableFlag=!V.isReadOnly(h),n=V.getNodeAndColumnInfos(null,t),c&&!g?(f.typeRepresentation="string",f.editionPolicy="EditionInPlace"):g?(f.allowResetToUndefinedByUIFlag=!0,f.hasRangeDefined=!0,f.editionPolicy="EditionInPlace",f.typeRepresentation=t.dataIndex.replaceAll(".",""),f.authorizedValues=V.getAuthorizedValuesNLSList(n.attributeInfo,n.attributeDef),p&&(f.getCellSemantics=d)):p?(f.typeRepresentation="number",f.getCellSemantics=d):V.isBoolean(h)?f.typeRepresentation="boolean":V.isInteger(n.attributeInfo)?f.typeRepresentation="integer":V.isDouble(n.attributeInfo)&&(f.typeRepresentation="float"),f.setCellValue=j.setValue;return L.areModuleColumnsImmutable(C.getId())&&(f.editableFlag=!1),f}))},O=function(t,n){var i,o,a,l;return n=n||!1,U=t.Label.dataIndex,l=e.is(t.Label.minWidth)?t.Label.minWidth:null,o=L.getLabelInfo(C.getId()),e.is(t)&&e.is(t.name)?("Column.",a=w.getNLSValue("Column."+t.name)):a=V.getColumnDisplayValue(t.Label),(i={sortableFlag:!0,groupableFlag:!0,text:a,dataIndex:"tree",width:e.is(l)?"auto":n?"100%":"30%",minWidth:e.is(l)?l:150,dicoType:o.dicoType,label:o.attributeName,labelIsOnRef:o.labelIsOnRef,getCellValue:function(t){var n,i,o=t.nodeModel,a=null;return e.is(o)&&(W.isFakeNodeModel(o)&&o.getProperty()===k.Reference?(i=this.getColumnOrGroup(k.Reference),n=D.getReference(o.getIdentifier()),a=i.text+": "+n.get("V_Name")+" ("+o.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount+")"):a=o.getLabel()),a}}).editableFlag="NonEditable"!==t.Label.displayType,i.setCellValue=j.setValue,L.areModuleColumnsImmutable(C.getId())&&(i.editableFlag=!1),i},F=function(){var e,t,n=[];for(e in k)Object.prototype.hasOwnProperty.call(k,e)&&((t={sortableFlag:!1,editableFlag:!1,groupableFlag:!0,dataIndex:k[e],visibleFlag:!1,width:"auto",minWidth:100,editionPolicy:"EditionOnClick",hasCellValue:function(e){return!W.isFakeNodeModel(e.nodeModel)},getCellValue:j.getGroupingColumnCellValue}).text=V.getColumnDisplayValue(t),n.push(t));return n},B=function(){return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,dataIndex:"hide_show_3D",displayType:"hideShow3D",editionPolicy:"EditionOnOver",typeRepresentation:"visibility",alignment:"center",text:"",width:30,icon:w.getIconURLFromKey("3DColumnIcon"),hasCellValue:_.hasCellValue,getCellValue:_.getCellValue,setCellValue:_.setCellValue}},{getBlockAttributes:function(t){var n,i,o={boAttrName:[],roAttrName:[],otherAttrName:[]},a=!1,l=e.is(t.Columns)?t.Columns.Column:[],r=x(t),s=function(e,t){switch(t){case"reference":-1===o.boAttrName.indexOf(e)&&o.boAttrName.push(e);break;case"instance":-1===o.roAttrName.indexOf(e)&&o.roAttrName.push(e);break;default:-1===o.otherAttrName.indexOf(e)&&o.otherAttrName.push(e)}};return e.is(r.label)&&(e.is(r.labelIsOnRef,"boolean")?r.labelIsOnRef?s(r.label,"reference"):s(r.label,"instance"):s(r.label,null)),e.is(l,"array")||(l=[l]),l.forEach((function(t){var n=V.getAttributeInfoFromColumn(t),o=n.dataIndex,l=n.objType;if(!e.owns(t,"displayType")||"MultiType"!==t.displayType&&"PriorityMultiType"!==t.displayType&&"NonEditableMultiType"!==t.displayType&&"NonEditableQtyMultiType"!==t.displayType&&"OPTime"!==t.displayType)"instance"===l||"reference"===l?s(o,l):"relation"===l&&(a=!0,s(o,l));else switch(t.displayType){case"MultiType":case"PriorityMultiType":case"NonEditableMultiType":case"NonEditableQtyMultiType":t.dicoType=P(t),t.dicoType.forEach((function(e){s(i=e+"."+o,l)}));break;case"OPTime":s(i,l)}})),a&&(n=M.getAllRelationDisplayAttributes(),e.is(n,"array")&&n.forEach((function(e){s(e,"reference")}))),o},setReusablecontent:function(t){var n=function(n,i){var o,a={forceDBMode:!0,onComplete:function(){e.is(o)&&e.is(o.objectToBeModified)&&(o.objectToBeModified.setAdditionalInfo({isFetched:!0}),V.doesAttributeExist(o.objectToBeModified,o.dataIndex)||V.isAttrApplicableForType(o.objectToBeModified,o.dataIndex)||-1===N.indexOf(o.dataIndex)&&C.warn(w.getNLSValue("TableView.AvailabilityFailure",{key:o.attributeNLSTitle}))),e.is(i)&&e.is(i.cellView)&&t.updateRenderedRow(i.rowID,{updateCellContent:!0})}};n.preventDefault(),n.stopPropagation(),i&&(o=V.getNodeAndColumnInfos(i.nodeModel,i.cellView.collectionView.getColumnOrGroup(i.columnID)),!e.is(o.objectToBeModified)||V.doesAttributeExist(o.objectToBeModified,o.dataIndex)||o.objectToBeModified.getAdditionalInfo("isFetched")||("instance"===o.instOrRef?D.fetchInstance({PID:o.objectToBeModified.id},a):D.fetchRoot(o.objectToBeModified.id,a)))};v||(t.addEventListener("show",(function(e,t){C.debug("onEventShow fired"),n(e,t)})),t.addEventListener("activeCellChange",(function(t){const i=t.dsModel,o=i.getActiveCellID();if(o>=0&&i.isCellInEdition(o)){let a=i.getCellInfosAt(o);e.is(a)&&a.rowID>=0&&a.columnID>=0&&e.is(a.nodeModel)&&e.is(a.nodeModel.getReferencePID)&&(e.is(a.cellView)||(a.cellView={collectionView:i}),n(t,a))}C.debug("activeCellChange fired")})))},getColumnDataIndexByDisplayType:function(t,n){var i,o,a,l=[];if(!e.is(n))return this.getColumnsDataIndex(t);for(o=t.columns.length,i=1;i<o;i++)a=t.columns[i],e.is(a)&&e.owns(a,"dataIndex")&&e.owns(a,"displayType")&&a.displayType===n&&l.push(a.dataIndex);return l},getColumnsDataIndex:function(t,n){var i,o,a,l,r=[],s=!!e.is(n,"boolean")&&n;if(s||!e.is(A)){for(a=t.columns.length,e.is(t._treeDataIndex)&&r.push(t._treeDataIndex),i=1;i<a;i++)l=t.columns[i],o=!e.is(l.isExportable)||l.isExportable,e.is(l)&&e.owns(l,"dataIndex")&&o&&(s&&l.isHidden||(!e.owns(l,"displayType")||"OrderQtyMultiType"!==l.displayType&&"MultiType"!==l.displayType&&"PriorityMultiType"!==l.displayType&&"NonEditableMultiType"!==l.displayType&&"NonEditableQtyMultiType"!==l.displayType?r.push(l.dataIndex):l.dicoType.forEach((function(e){r.push(e+"."+l.dataIndex)}))));s||(A=r)}else r=A;return r},createTreeListViewColumns:function(t,n,i,o){var a,l,r=[];return t.Columns&&t.Columns.Column&&(r=R(t.Columns.Column)),t.Label&&((a=O(t,0===r.length)).isExportable=!1,r.splice(0,0,a)),Array.isArray(I)&&(l=r.filter((function(e){return I.includes(e.dataIndex)}))).length>0&&(r=r.filter((function(e){return!I.includes(e.dataIndex)})),l.length>0&&r.unshift.apply(r,l)),(!e.is(t.addDefaultGroupingColumns)||e.is(t.addDefaultGroupingColumns,"boolean")&&!0===t.addDefaultGroupingColumns)&&(r=r.concat(F())),e.is(o)&&!0===o&&r.splice(0,0,B()),{columns:r,labelIsOnRef:e.is(t.Label)?a.labelIsOnRef:null,label:e.is(t.Label)?a.label:null}},manageColumn:function(e,t,n){n&&(!0===n.visible?e.showColumn(t):e.hideColumn(t))},getLabelColumnDataIndex:function(){return U}}}})),define("DS/DELWKOViewBehaviors/DELWKOTreeListViewBehaviorCloud",["UWA/Core","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXDragDrop","DS/DELWKOViewBehaviors/DELWKOTreeContextualMenu","DS/DELWKOViewBehaviors/DELWKOColumnManagerCloud","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXActionDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXGenericLinksDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WUXManageCapableRscDragDrop","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop","DS/DELWKOViewBehaviors/DELWKORelationsUtilCloud","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/OperationTime/OperationTimeUtil","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/ToolTipManager","DS/DELPPWViewBehaviors_FD02/TreeListViewBehavior/DataGridViewManager","DS/Utilities/Dom","DS/Core/PointerEvents","DS/DELWKOFilteringModule/DELWKOFilteringBaseFilter","DS/DELWKOFilteringModule/DELWKOFilteringSetFilterView"],(function(e,t,n,i,o,a,l,r,s,d,u,c,g,p,f,m,h){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","PlatformPlugin","SelectionPlugin"],creator:function(b,y,C,I,v,D,T,V,w,S,M,L,E,A,x){var P,R,O,N,F,B,U,k,W,_,j,G,H,K,X,z,Q,q,J,Y,Z,$,ee,te,ne,ie,oe,ae,le,re,se,de,ue,ce,ge,pe,fe,me={},he=new s(y,v,V,E,C,A),be=new d(y,v,w),ye=(new u(y,T,v,D),I.getComponent("DataGridView")),Ce=new c(y,S,C,v,D,T),Ie={placeholder:"",apiVersion:2,showSelectionCheckBoxesFlag:!0,rowSelection:"multiple",cellSelection:"none",showRowIndexFlag:!1,defaultColumnDef:{sortableFlag:!0,editionPolicy:"EditionOnOver",typeRepresentation:"string"},isEditable:!1,selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",rowGroupingOptions:{depth:0,hideGroupedColumns:!1},getCellTooltip:function(t){var n,i,o,a=this.getColumnOrGroup(t.columnID),l={longHelp:""},r=[],s=T.getAttributeInfoFromColumn(a),d=D.getAttributeInfo(s.attributeName),u=t.cellModel;if(-1===t.columnID)return this.getCellDefaultTooltip(t);if(!t.isHeader&&e.is(t.nodeModel)&&!e.is(t.nodeModel.getReferencePID))return l;switch(!e.is(a.displayType)&&e.is(s)&&T.isMultiValuated(d)&&(a.displayType="Multivalue"),a.displayType){case"URL":!t.isHeader&&e.is(t.cellModel)?l.longHelp=t.cellModel.label:l.longHelp=t.cellModel;break;case"Relation":case"Multivalue":if("Multivalue"!==a.displayType||t.isHeader||(u=T.getValueAsArray(t.nodeModel.options.grid[t.dataIndex])),"Relation"!==a.displayType||t.isHeader||(u=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(u)&&0!==u.length){for(T.isDate(d)&&(u=u.map((function(e){return T.getFormattedDate(e)}))),i=0;i<u.length;i++)n=u[i],r.push(e.is(n.Value)?n.Value:n);l.longHelp=T.getValueAsString(r,T.getType(d)).split(y.getPreferenceValue("separator")).join("\n")}else t.isHeader&&(l.longHelp=u);break;case"hideShow3D":t.isHeader?l.longHelp=C.getNLSValue("HideShow3D.tooltip"):(o=t.cellModel,e.is(o,"boolean")&&(l.longHelp=o?C.getNLSValue("HideShow3D.hide3D"):C.getNLSValue("HideShow3D.show3D")));break;case"BIEssentials":case"BIEssentialsAltSub":t.isHeader?l.longHelp=t.cellModel:(o=t.nodeModel.options[t.dataIndex],l.longHelp=e.is(o)?o.tooltip:"");break;default:o=t.cellModel,t.isHeader||(e.is(o)?e.is(o)&&"function"==typeof o.getLabel&&"object"===e.typeOf(o)?o=o.getLabel():T.isBoolean(d)?o="TRUE"===o?C.getNLSValue("TRUE"):C.getNLSValue("FALSE"):T.isDate(d)?o=T.getFormattedDate(o):T.hasRangeDefined(d)?o=t.cellModel:(T.isDouble(d)||T.isInteger(d))&&(o=T.getValueAsString(o,T.getType(d))):o=""),l.longHelp=o}return!t.isHeader&&e.is(t.nodeModel)&&(o=Ce.getTooltipValue(t),e.is(l.longHelp)&&(l.longHelp+=l.longHelp.length>0&&o.length>0?"\n\n":"",l.longHelp+=o)),l},getCellEditableState:function(e){var t,n=!0;return!0===e.isHeader?n=!1:"selection"===e.dataIndex?n=!0:(t=T.getNodeAndColumnInfos(e.nodeModel,e.parent.options.columns[e.virtualColumnID]),n=!T.isReadOnly(t.attributeInfo,t.attributeDef)),n}};return Q=function(){var t=P.getTreeDocument();t.getFilterManager().registerFilter("wkoFilter",m);const n=P.getFilterViewManager();n.registerFilterView("wkoSet",h),n.registerFilterView("wkoFilter",n.FILTERVIEWS_MAP.wkoSet);let i={label:{filterId:"wkoFilter",filterOptions:{keepChildren:!0,ensureVisible:!0}}};const o=P.columns.length;for(let t=0;t<o;t++){var a=P.columns[t].dataIndex;"url"===P.columns[t].typeRepresentation&&"current.reference"===a&&(i[a]={filterId:"set"}),"orderNo.reference"===a?i[a]={filterId:"set"}:("datetime"===P.columns[t].typeRepresentation||e.is(P.columns[t].getCellTypeRepresentation,"function")&&"datetime"===P.columns[t].getCellTypeRepresentation())&&(i[a]={filterId:"dateWithCondition"})}t.setFilterModel(i)},q=function(s){var d;if(_=e.is(s.columnConfig)?s.columnConfig:L.getViewColumnPreferences(y.getId(),B),G=(s=s||{}).dataGridViewOptions?e.extend(Ie,s.dataGridViewOptions,!0):Ie,!e.is(_))throw new Error("_createTreeListView options not defined");if(G.contextualCommands&&(X=new n(y,I,C,T,A,v,L,D,E),G.onContextualEvent=function(t){var n,i,o,a,l=this,r=[],s={};if(e.is(t.cellInfos)&&(n=(o=t.cellInfos).nodeModel,a=o.manager,e.is(o.rowID))){if(-1===o.rowID){if(e.is(G.headerContextualCommands)){if(i=l.getColumnOrGroup(o.columnID),(s={node:n,selectedNodes:l.getTreeDocument().getXSO().get(),column:i,virtualColumnID:o.columnID,dataIndex:i.dataIndex,manager:a,handlers:{onSizeColumnToFit:function(e){a.sizeColumnToFit(e)},onSizeAllColumnsToFit:function(){a.sizeAllColumnsToFit({computeAllRows:!0})},onSortColumnContentAsc:function(){a.sortColumn(i.dataIndex,"asc")},onSortColumnContentDesc:function(){a.sortColumn(i.dataIndex,"desc")},onClearSort:function(){a.clearSort()},onHideColumn:function(e){L.updateViewPreferences(y.getId(),i.dataIndex,{visibility:!1}),l.hideColumn(e,{isUserInteraction:!1})},onPinColumn:function(e){P.layout.columns[e].icon={},P.layout.columns[e].icon.iconName="pin",P.layout.columns[e].icon.fontIconFamily=WUXManagedFontIcons.Font3DS,P.layout.setColumnPinned(i.dataIndex,"left"),L.updateViewPreferences(y.getId(),i.dataIndex,{colPinned:"left"})},onUnpinColumn:function(e){P.layout.columns[e].icon={},P.layout.setColumnPinned(i.dataIndex,"unpinned"),L.updateViewPreferences(y.getId(),i.dataIndex,{colPinned:"unpinned"})},onGroupRows:function(e,t){var n;L.doesModuleHaveRecursiveGrouping(y.getId())?(n=i.dataIndex!==e?l.getColumnOrGroup(a.getColumnIndexByDataIndex(e)):i,de(n)):ae(e,t)},onRemoveGrouping:function(){L.doesModuleHaveRecursiveGrouping(y.getId())?ue():le()},onGroupByCriteria:function(e){y.getBehavior("GroupingViewBehavior").group(e)},onUngroupByCriteria:function(e){y.getBehavior("GroupingViewBehavior").ungroup(e)}}}).params=t,r=X.buildContextualMenu(G.headerContextualCommands,s),e.is(i.pinned)&&"unpinned"!=i.pinned){var d=-1,u=-1;r.forEach((e=>{d++,"PinColumn"!==e.title&&"Pin"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}else{d=-1,u=-1;r.forEach((e=>{d++,"UnpinColumn"!==e.title&&"Unpin"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}var c=l.getTreeDocument().getFilterManager().getFilters(),g=i.dataIndex;if(e.is(i.dataIndex)&&"tree"===i.dataIndex&&(g="label"),e.is(c)&&Object.keys(c).includes(g)){var p;if("tree"!=s.dataIndex?e.is(c[s.dataIndex])&&(p=c[s.dataIndex].filterModel):e.is(c.label)&&(p=c.label.filterModel),e.is(p)){d=-1,u=-1;r.forEach((e=>{d++,"FilterColumn"!==e.title&&"Apply Filter"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}else{d=-1,u=-1;r.forEach((e=>{d++,"ResetFilterColumn"!==e.title&&"Reset Filter"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}}else{d=-1,u=-1;r.forEach((e=>{d++,"FilterColumn"!==e.title&&"Apply Filter"!==e.title||(u=d)})),u>-1&&r.splice(u,1),d=-1,u=-1,r.forEach((e=>{d++,"ResetFilterColumn"!==e.title&&"Reset Filter"!==e.title||(u=d)})),u>-1&&r.splice(u,1)}}"selection"===o.dataIndex||"taggerColor"===o.dataIndex||"hide_show_3D"===o.dataIndex?r.forEach((function(e){e.state="disabled"})):"tree"===o.dataIndex&&r.forEach((function(e){"Hide"===e.title&&(e.state="disabled")}))}else if(0<=o.rowID){if(!e.is(n.getReferencePID))return;e.is(n)&&(n.isSelected()||n.select()),i=l.getColumnOrGroup(o.columnID),(s={node:n,selectedNodes:l.getTreeDocument().getXSO().get(),column:i,getColumnIDFromDataIndex:function(e){return a.getColumnIndexByDataIndex(e)},getColumnOrGroup:function(e){return o.cellView.collectionView.getColumnOrGroup(e)},handlers:{onGroupRows:function(e,t){ae(e,t)},onRemoveGrouping:function(){le()}}}).infos=T.getNodeAndColumnInfos(n,i),r=X.buildContextualMenu(G.contextualCommands,s)}return r}}),e.is(s.pinnedColumns)&&(G.pinnedColumns=s.pinnedColumns),e.is(s.expandState)&&(G.expandState=s.expandState),e.is(s.dataGridViewOptions)&&e.is(s.dataGridViewOptions.enableDragAndDrop,"boolean")&&!0===s.dataGridViewOptions.enableDragAndDrop){switch(G.cellDragEnabledFlag=!0,G.rowDragEnabledFlag=!0,d={acceptedTypes:s.pprTypes,pprTypesWithSupportedViews:e.is(s.pprTypesWithSupportedViews)?s.pprTypesWithSupportedViews:[],pprTypesWithSupportedRoot:e.is(s.pprTypesWithSupportedRoot)?s.pprTypesWithSupportedRoot:[]},s.dragDropManager){case"WUXActionDragDrop":d=e.extend(d,{linkTypes:s.linkTypes}),F=new o(b,y,C,v,D,S,M,A);break;case"WUXGenericLinksDragDrop":d=e.extend(d,{linkTypes:s.linkTypes}),F=new a(b,y,C,v,D,S,M,I);break;case"WUXManageCapableRscDragDrop":d=e.extend(d,{linkTypes:s.linkTypes}),F=new l(b,y,C,v,D,S,M,I);break;case"WUXDataCollectRowDragDrop":d=e.extend(d,{linkTypes:s.linkTypes}),F=new r(b,y,C,S,v);break;default:F=new t(b,y,C,v,D,S,M,A)}F.init(d),G=e.extend(G,F.getDDBehavior())}G.filterModel=s.filterModel,O=new i(b,y,j,K,v,D,T,C,I,V,L,x),H=O.createTreeListViewColumns(_,G.showTagger,G.showSelection,G.show3DHideShow)},z=function(t){var n,i,o=y.getPreferenceValue("separator");if(N=t,e.is(H)&&e.is(H.columns,"array")?G.columns=H.columns:G.columns=[],e.is(P))P.setProperties({columns:G.columns});else{G.treeDocument=t,P=new ye(G),R=new g(P),P.registerColumnsEnum();const n=y.getBehavior("CfgColumnsBehavior");if(e.is(n)){const e=n.getRequiredTypeRepresentations();P.registerColumnTypeRepresentations(e)}}if(p.addEventOnElement(P,P,f.POINTERUP,(function(e,t){var n=y.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"desc")})),p.addEventOnElement(P,P,f.POINTERDOWN,(function(e,t){var n=y.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"asc")})),e.is(G.toolbarOptions)&&Array.isArray(G.toolbarOptions.items)&&P.setToolbar(ce(G.toolbarOptions.items)),e.is(G.pinnedColumns)&&Array.isArray(G.pinnedColumns),_.Label)if("Auxiliary"===_.name&&e.is(_.Label.length)){for(P._treeDataIndex="",P._label="",P._types="",i=0;i<_.Label.length;i++)P._treeDataIndex+=i<_.Label.length-1?_.Label[i].dataIndex+o:_.Label[i].dataIndex,P._label+=i<_.Label.length-1?_.Label[i].dataIndex.split(".")[0]+o:_.Label[i].dataIndex.split(".")[0],P._types+=i<_.Label.length-1?_.Label[i].type+o:_.Label[i].type;P._labelIsOnRef=!0,P.isMultipleLabel=_.Label.length>1}else P._treeDataIndex=_.Label.dataIndex,P._label=H.label,P._labelIsOnRef=H.labelIsOnRef,P.isMultipleLabel=!1;e.is(G.setReusablecontent)&&!1===G.setReusablecontent||O.setReusablecontent(P),n=O.getBlockAttributes(_),v.setSelectPredicate(y.getId(),n)},Y=function(t){var n,i,o,a,l,r,s,d=t.type,u={icons:"",label:"",grid:{},useAsyncPreExpand:!0},c=y.getPreferenceValue("separator"),g=O.getColumnsDataIndex(P);if(P._labelIsOnRef){if(l="VPMReference"===d&&(e.is(t.V_usage,"array")&&t.V_usage.includes("3DPart")||e.is(t.V_usage,"string")&&"3DPart"===t.V_usage)?C.getIconURLFromKey("3DPart"):C.getIconURLFromKey(d),u.icons=[l],u.label="",e.is(P.isMultipleLabel)&&P.isMultipleLabel)for(o=P._label.split(c),a=P._types.split(c),s=0;s<o.length;s++)e.is(t.type)&&("undefined"===a[s]||"undefined"!==a[s]&&D.isAKindOf(t.type,a[s]))&&(r=""===u.label?"":c,e.owns(t,o[s])&&e.is(t[o[s]])&&(u.label+="NULL"!==t[o[s]]?r+t[o[s]]:""));e.owns(t,P._label)&&(u.label="NULL"!==t[P._label]?t[P._label]:"")}for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i=t[n],e.is(i)&&"NULL"!==i&&(g&&g.indexOf(n+".reference")>=0?u.grid[n+".reference"]=t[n]:"PID"===n&&(u.referencePID=t[n]),"type"===n&&(u.referenceType=t[n]),"defType"===n&&(u.defType=i)));return he.fillNodeOptions(u,g),be.fillNodeOptions(u,g),e.is(me.show3DHideShow)&&!0===me.show3DHideShow&&(u.hideShow3D=!0),u},J=function(t,n,i){var o,a,l=O.getColumnsDataIndex(P),r=Y(t);for(o in!P._labelIsOnRef&&e.owns(n,P._label)&&(r.label="NULL"!==n[P._label]?n[P._label]:""),n)Object.prototype.hasOwnProperty.call(n,o)&&(a=n[o],e.is(a)&&"NULL"!==a&&(l&&l.indexOf(o+".instance")>=0?r.grid[o+".instance"]=n[o]:"PID"===o?r.instancePID=n[o]:"V_TreeOrder"===o&&(r.grid.V_TreeOrder=parseFloat(n[o]))));return he.fillNodeOptions(r,l,n,i),r},Z=function(t){var n,i,o,a=t.changedAttributes(),l=t.isInstance()?".instance":".reference",r=P._labelIsOnRef?".reference":".instance",s=O.getColumnsDataIndex(P),d={};if(!t.isConnection()&&e.is(a)){for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(o=n+l,e.is(s)&&s.forEach((e=>{e.includes(o)&&(d[o]="NULL"!==a[n]?a[n]:"")})),n===P._label&&r===l&&(i="NULL"!==a[n]?a[n]:""));return{label:i,attributes:d}}},$=function(){var e,t,n=[],i=R.getNumberOfRows();for(e=0;e<i;e++)t=R.getTreeNodeModelFromRowID(e),n.push(t.getReferencePID());return n},ee=function(){var t,n,i,o,a,l,r,s,d,u;if(k)for(i=L.getViewColumnPreferences(y.getId()),n=e.is(i)?i.Columns.Column:[],a=P.getColumnIndexByDataIndex("tree")+1,t=0;t<n.length;t++){if(s={},(o=n[t]).isHidden)P.isColumnHidden(o.dataIndex)||P.hideColumn(o.dataIndex);else{u=isNaN(o.width)?"auto":parseInt(o.width),P.getColumnWidth(o.dataIndex)!==u&&(s.width=u),u=isNaN(o.minWidth)?"100":parseInt(o.minWidth),P.getColumnMinWidth(o.dataIndex)!==u&&(s.minWidth=u),P.isColumnHidden(o.dataIndex)&&(s.visibleFlag=!0),e.Object.keys(s).length>0&&P.layout.setColumnOrGroupProperties(o.dataIndex,s),d=P.getColumnIndexByDataIndex(o.dataIndex),r=P.layout.getOrderedColumnsReverseIndexes(),l=P.layout.getOrderedColumnsIndexes();var c=P.layout.getColumnPinned(d);o.pinned!=c&&(P.layout.columns[d].icon={},"unpinned"!=o.pinned&&(P.layout.columns[d].icon.iconName="pin",P.layout.columns[d].icon.fontIconFamily=WUXManagedFontIcons.Font3DS),P.layout.setColumnPinned(d,o.pinned)),r[d]!==a&&P.moveColumn(o.dataIndex,l[a])}a++}},te=function(e){var t,n,i="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(63&n|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(63&n|128));return i},ne=function(e){return'"'+te(e).replace(/"/g,'""')+'"'},ie=function(e){G.showTagger&&P.updateNodeKPIColor(e)},oe=function(t){var n,i,o=[],a=t.collectionView;if(t.startNodeIndex>=0&&t.endNodeIndex>=0){for(n=t.startNodeIndex;n<=t.endNodeIndex;n++)i=a.model[n],e.is(i)&&o.push(i);o.length>0&&y.notify("visibleNodesChanged",[y.getId(),o])}},re=function(t){var n=L.getColumnsForGrouping(y.getId());((t=!!e.is(t,"boolean")&&t)||n.length>0)&&P.groupRows({dataIndexesToGroup:n})},se=function(t){var n;e.is(t.options)&&t.options.updateType===WUXModelUpdateTypes.Grouping&&(L.isGroupingExist()||y.notify("manageCommandsOnGrouping"),n=L.getColumnsForGrouping(y.getId()),e.is(U)&&0===n.length&&(y.getBehavior("WUXNodeModelBehavior").removeEventListener(U),U=void 0))},ae=function(t,n){var i;L.getColumnsForGrouping(y.getId(),!0).length>0&&P.rowGroupingOptions.depth!==n?y.warn(C.getNLSValue("TableView.InvalidGrouping")):(e.is(U)||(i=y.getBehavior("WUXNodeModelBehavior"),e.is(i)&&(U=i.addEventListener("pushUpdate",se))),P.rowGroupingOptions.depth=n,L.addColumnForGrouping(y.getId(),t),re(),y.notify("manageCommandsOnGrouping"))},le=function(){L.resetColumnsForGrouping(y.getId()),re(!0)},de=function(t){var n,i=y.getBehavior("GroupingViewBehavior"),o=t.dataIndex;e.is(i)&&!0===t.groupableFlag&&(L.resetColumnsForGrouping(y.getId()),L.addColumnForGrouping(y.getId(),o),"tree"===o&&(o=O.getLabelColumnDataIndex()),o.endsWith(".group")&&(o=L.getCollectionSpecificDataIndex(o)),n={dataIndex:o,title:t.text},i.group(n))},ue=function(){var t=y.getBehavior("GroupingViewBehavior");e.is(t)&&(L.resetColumnsForGrouping(y.getId()),t.clearGrouping())},ce=function(t){return{entries:t.map((function(t){var n,i=C.getIconURLFromKey(t.icon);return e.is(t.tooltip)&&(n={title:C.getNLSValue(t.tooltip.title),shortHelp:C.getNLSValue(t.tooltip.shortHelp)}),{id:t.id,dataElements:{typeRepresentation:e.is(t.typeRepresentation)?t.typeRepresentation:"functionIcon",position:e.is(t.position)?t.position:"far",category:e.is(t.category)?t.category:"0",icon:{iconPath:i,iconSize:{width:"22px",height:"22px"}},value:ge.bind(null,t.id),disabled:!!e.is(t.disabled)&&t.disabled,tooltip:n}}}))}},fe=function(e,t){var n,i,o;i=X.buildContextualMenu(e.children),n={position:{x:(o=t.dsModel.elements.container.getBoundingClientRect()).left+5,y:o.top+(o.height-5)}},WUXMenu.show(i,n)},ge=function(t,n){var i;i=G.toolbarOptions.items.find((function(e){return t===e.id})),e.is(i)&&e.is(i.children)?fe(i,n):e.is(G.toolbarOptions.actionHandler,"function")?G.toolbarOptions.actionHandler.call(null,t,n):e.is(X)&&X.onContextMenuCallback(t)},pe=function(t){var n;t=Array.isArray(t)?t:[t],P&&(n=P.getToolbar(),e.is(n)&&n.items.getChildren().forEach((function(e){var n=e.options.id,i=t.indexOf(n);e.updateOptions({disabled:-1===i})})))},{viewName:"treeListView",listenTo:function(){return{TreeViewPrefModified:ee,LoadDropContent:this.processDropContent}},onStart:function(t,n){t=t||{},e.is(t.pprTypes)&&e.is(t.columnConfigName)&&(e.is(t.hasReadOnlyTypes,"boolean")&&t.hasReadOnlyTypes&&(Ie.defaultColumnDef.getCellEditableState=function(t){let n=null;return e.is(t)&&e.is(t.nodeModel)&&e.is(t.nodeModel.object)&&(n=t.nodeModel.object.type||null),(!e.is(n)||!D.isReferencesHasReadOnlyType(n))&&P.getColumnOrGroup(t.dataIndex).editableFlag}),e.is(t.views)&&e.is(t.views.treeListView)&&(me=t.views.treeListView,Object.prototype.hasOwnProperty.call(me,"show3DHideShow")&&A.isSuppressHideShow3DColumn()&&(me.show3DHideShow=!1)),e.is(t.views.treeListView.toolTipConfigXML)&&Ce.init(t.views.treeListView.toolTipConfigXML),B=t.columnConfigName,(k=!!e.is(t.registerViewPreference)&&t.registerViewPreference)&&L.registerViewforColumnPref({viewID:y.getId(),columnConfigName:t.columnConfigName,viewIcon:t.moduleIcon}),j=Array.isArray(t.columnsBeforeTitle)?t.columnsBeforeTitle:null,!!e.is(t.immutableColumns,"boolean")&&t.immutableColumns&&L.registerModuleColumnsAsImmutable(y.getId()),K=!!e.is(t.noActiveCellChange,"boolean")&&t.noActiveCellChange,q({pprTypes:t.pprTypes,dataGridViewOptions:e.merge(me,{isEditable:!!e.is(t.isAuthoringAllowed)&&t.isAuthoringAllowed}),dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,pprTypesWithSupportedViews:Array.isArray(t.pprTypesWithSupportedViews)?t.pprTypesWithSupportedViews:null,pprTypesWithSupportedRoot:Array.isArray(t.pprTypesWithSupportedRoot)?t.pprTypesWithSupportedRoot:null,pinnedColumns:Array.isArray(t.pinnedColumns)?t.pinnedColumns:null,filterModel:t.filterModel,expandState:e.is(t.expandState)?t.expandState:void 0}),!0===(W=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&L.registerViewforWidgetLayout({viewID:y.getId(),viewType:this.viewName})),n()},onStop:function(){e.is(P)&&P.remove(),k&&L.unRegisterViewforColumnPref(y.getId()),!0===W&&L.unregisterViewforWidgetLayout(y.getId(),this.viewName)},has3DHideShowColumn:function(){return!!e.is(me.show3DHideShow,"boolean")&&me.show3DHideShow},createTreeListView:function(t){var n,i,o="",a=me;t=t||{},e.is(t.dataGridViewOptions.identifier)&&(o=t.dataGridViewOptions.identifier),e.is(t.columnConfig)&&(i=t.columnConfig),e.is(t.dataGridViewOptions)&&(a=t.dataGridViewOptions),q({columnConfig:i,pprTypes:t.pprTypes,dataGridViewOptions:a,dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,identifier:o}),e.is(t.treeDocument)&&(z(t.treeDocument),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(t.treeListViewContainer)&&P.getContent().inject(t.treeListViewContainer),e.is(t.toolbarContainer)&&(n=P.getToolbar(),e.is(n)&&n.getContent().inject(t.toolbarContainer)))},getColumnsByDisplayType:function(e){var t,n,i=[],o=O.getColumnDataIndexByDisplayType(P,e),a=o.length;for(t=0;t<a;t++)n=o[t],i.push(n.split(".")[0]);return i},loadDocument:function(t){z(t),e.is(P.onDelayedModelDataRequest,"function")||(P.onDelayedModelDataRequest=oe),e.is(G)&&G.filterModel&&Q()},getContent:function(){var t=void 0;return e.is(P)&&(t=P.getContent()),t},manageColumn:function(t,n){if("taggerColor"!==t)return e.is(P)&&e.is(O)?O.manageColumn(P,t,n):void 0;ie(n.visible)},processDropEffect:function(e){return F.processDropEffect(e)},processDropContent:function(e,t){var n=new Event("Drag");return n.dataTransfer=new DataTransfer,n.dataTransfer.setData("Text",e),F.onTreeListViewDrop(n,t)},getTreeListViewManager:function(){var t=null;return e.is(R)&&(t=R),t},getLabelAttribute:function(){return P._label},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=Y(t.toJSON()),e.is(G.expandState)&&(n.expandState=G.expandState)),n},getInstanceNodeOptions:function(t,n,i){var o;return e.is(t)&&e.is(n)&&(o=J(t.toJSON(),n.toJSON(),i)),o},getRelationNodeOptions:function(e,t){var n=O.getColumnsDataIndex(P);return he.getRelationAttributes(e,n,t)},getDocumentNodeOptions:function(e){var t=O.getColumnsDataIndex(P);return{attributes:be.getDocumentNodeOptions(e,t)}},getUpdateNodeOptions:function(t){var n;return e.is(t)&&(n=Z(t)),n},getVisibleTableContentAsCSV:function(e){return te(P.getAsCSV({columnSeparator:e,addLevelInformation:!0,allColumns:!1,forceQuotes:!0}))},getConfiguredAttributesAsCSV:function(t,n){var i,o,a,l,r,s=[],d="";function u(e,n){var i,o;for(i=t[n].Attribute,o=0;o<i.length;o++)if((l=i[o].name)===e)return!0;return!1}for(i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(o=t[i].Attribute,a=0;a<o.length;a++)l=o[a].name,-1===s.indexOf(l)&&s.push(l);for(r=0;r<s.length;r++)0!==r&&(d+=n),d+=ne(s[r]);return d+="\r\n",$().forEach((function(o){var a,l,c;if(a=v.getReference(o),e.is(a)&&function(e){return Object.prototype.hasOwnProperty.call(t,e)}(i=a.get("type"))){for(r=0;r<s.length;r++)0!==r&&(d+=n),c=u(l=s[r],i)&&e.is(a.get(l))?String(a.get(l)):"",d+=ne(c);d+="\r\n"}})),d},isInverseRelationColumnPresent:function(){var t,n=!1,i=V.getInverseRelationNameSet();return i.size>0&&e.is(O)&&(t=O.getColumnsDataIndex(P),e.is(t,"array")&&(n=t.some((function(e){return i.has(e)})))),n},getDataGridView:function(){return P},getTreeDocument:function(){return N},getToolBarContent:function(){var e,t=null;return P&&(e=P.getToolbar())&&(t=e.getContent()),t},enableToolBarItems:function(e){pe(e)}}}}}));