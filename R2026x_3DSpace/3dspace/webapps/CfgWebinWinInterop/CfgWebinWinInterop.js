define("DS/CfgWebinWinInterop/scripts/CfgWIWUtility",["DS/CfgBaseUX/scripts/CfgUtility","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX"],(function(e,i){"use strict";return{retrieveXRevdetails:function(e){var i=this;return new Promise((function(t,n){i.searchModeldetails(e).then((async function(e){var n=await i.convertSearchResponseToJson(e);UWA.is(n)&&n.length>0&&UWA.is(n[0].preview_url)&&""!=n[0].preview_url?t(n):i.getPrimaryImageFromLegacyDico(n).then((function(e){t(n)}))}))}))},retrieveModeldetails:function(t,n){var o=this;return new Promise((function(s,a){o.searchModeldetails(t).then((async function(t){var a=await o.convertSearchResponseToJson(t);UWA.is(a)&&a.length>0&&UWA.is(a[0].preview_url)&&""!=a[0].preview_url?s(a):(0!==a.length||n?!0===n&&s(a):(e.showNotifs("warning","",i.Model_Information_Unavailable),s(a)),o.getPrimaryImageFromLegacyDico(a).then((function(e){s(a)})))}))}))},retrieveModeldetailsForxRevision:async function(i){let t={referenceIds:[i]},n=await e.getMultipleConfigurationContextInfo(t),{modelsList:o}=await e.parseGetMultipleConfigurationContextResponse(n);return o},searchModeldetails:function(i){return new Promise((function(t,n){var o={with_indexing_date:!0,with_nls:!0,label:"model-info",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6wg:revision","ds6w:description","ds6w:identifier","ds6w:modified","ds6w:created","ds6w:responsible","ds6w:lastModifiedBy","ds6wg:marketing_Name"],select_file:["icon","thumbnail_2d"],order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:enoviaServerFilterWidget.tenant};"EXTERNAL"==enoviaServerFilterWidget.mode&&(o={with_indexing_date:!0,with_nls:!0,label:"model-info",locale:"en",select_predicate:["ds6wg:revision","ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:modified","ds6w:created","ds6w:responsible","ds6w:lastModifiedBy","ds6wg:marketing_Name"],select_file:["icon","thumbnail_2d"],order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:enoviaServerFilterWidget.tenant});var s="";i.forEach((function(e,i){s=0==i?"physicalid:"+e:s+" OR physicalid:"+e})),o.query=s;o=JSON.stringify(o);e.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",o,(function(e){t(e)}),(function(){n()}),!0,{isfederated:"true"})}))},getPrimaryImageFromLegacyDico:function(i){return new Promise((function(t,n){var o=0;i.forEach((function(s,a){var r="/resources/modeler/browsing/browseservice/pid:"+s.physicalID+"/configurationdictionary?";r+="image=1",e.makeWSCall(r,"POST","enovia","application/x-www-form-urlencoded","",(function(e){""!=e.image&&(s.preview_url=e.image),(o+=1)==i.length&&t(e)}),(function(e){n(e)}),!0)}))}))},convertSearchResponseToJson:async function(i){var t,n=[];if(i&&i.results){var o=[];if(i.results&&Array.isArray(i.results)&&i.results.length>0)for(let e of i.results)if(e&&Array.isArray(e.attributes)&&e.attributes.length>0)for(let i of e.attributes)i&&"ds6w:what/ds6w:status"===i.name&&i.value&&o.push(i.value);o&&Array.isArray(o)&&o.length>0&&(t=await e.readNLSvaluesOfAttributes(o));for(let o of i.results){var s={id:"temp",data:[],basicData:[]};s.basicData=o.attributes;for(let i of o.attributes){if("resourceid"==i.name&&(s.physicalID=i.value),"ds6w:label"==i.name){var a=[];a.push(i.value),s.data.push({name:"Marketing Name",value:a})}if("preview_url"==i.name&&(s.preview_url=i.value),"ds6w:who/ds6w:responsible"==i.name&&s.basicData.push({name:"owner",value:i.value}),"ds6w:identifier"==i.name&&s.basicData.push({name:"name",value:i.value}),"ds6w:what/ds6w:status"==i.name){var r=[];if(r.push(""),e.isDefined(i.dispValue))r.push(i.dispValue);else{let e=i.value;if(t&&t["ds6w:status"]){let n=t["ds6w:status"][e];n?r.push(n):r.push(i.value.split("Model."))}else r.push(i.value.split("Model."))}s.basicData.push({name:"current",value:r})}}n.push(s)}}return n}}})),define("DS/CfgWebinWinInterop/scripts/CfgWIWPropertiesDialog",["DS/EditPropWidget/constants/EditPropConstants","DS/CfgBaseUX/scripts/CfgPropertiesView"],(function(e,i){return{destroy(){widget.body.empty()},createPropertiesComponentInNative({itemID:t,mainContent:n}){this.propertiesOptions={itemID:t,parentDiv:n,displayType:e.STANDARD,setCloseButton:!1,readOnly:!0,extraNotif:!1,editMode:!1},i.createPropertiesComponent(this.propertiesOptions)}}})),define("DS/CfgWebinWinInterop/scripts/CfgWIWConfigurationRevisionDialogs",["DS/CfgBaseUX/scripts/CfgUtility","DS/CoreEvents/ModelEvents","DS/CfgBaseUX/scripts/CfgData","DS/CfgBaseUX/scripts/CfgContainerView","DS/CfgConfigurationRevisionUX/scripts/views/instance/CfgConfigurationRevisionVersionExplorerView","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],((e,i,t,n,o,s,a)=>{const r={destroy(){widget.body.empty()},async launchAddtoCRDialog(n){this.options=n,t.clear(),t.cfgAddInsToCfgRevActionEvents=new i,this.subscribeAddInstancesToCRActionEvents(),await this.isCRDefinedOnRoot()?(await this.createCRVersionExplorerView(),this.sendEventToWIW("AllowedSemanticsOK")):(this.sendEventToWIW("AllowedSemanticsKO"),e.showwarning(a.CfgRevMessageAttachModel,"error"))},async isCRDefinedOnRoot(){let i=await e.getAllowedSemantics(this.options.parentId);return e.isBaselineMode(this.options.parentId,i)&&0==e.isFirstSemantic(this.options.parentId,i)},async createCRVersionExplorerView(){const e={selectedInstanceList:this.options.instancesList,iRootId:this.options.parentId};this.CfgConfigurationRevisionVersionExplorerViewObj=await new o(e);const i=new UWA.Element("div",{html:this.CfgConfigurationRevisionVersionExplorerViewObj.render(),class:"wiwCfgCRVEContainer"});this.createAddInstancesToCRDialog(i)},createAddInstancesToCRDialog(e){const i={isHeader:!1,isFooter:!0,firstButtonText:s.OK_Button,secondButtonText:s.Cancel_Button,onButtonClickCB:this.onOkCancelClicked};this.instanceCRDialog=new n(i).render(),this.instanceCRDialog.inject(this.options.mainContent),this.instanceCRDialog.enableDisableFirstorSecondButton("firstButton",!0),e.inject(this.instanceCRDialog._body)},async onOkCancelClicked(e){"firstButton"===e.buttonId&&await r.CfgConfigurationRevisionVersionExplorerViewObj.saveContent(),"secondButton"===e.buttonId&&r.sendEventToWIW("Close")},sendEventToWIW(i,t=""){let n={eventName:"cfgAddInstancesToCR",operation:`${i}`,operationVersion:"1.0",content:`${t}`};e.sendNotificationWebInWin(n)},subscribeAddInstancesToCRActionEvents(){t.cfgAddInsToCfgRevActionEvents.subscribe({event:"enableOkButtonInInstanceCRDialog"},(()=>this.instanceCRDialog.enableDisableFirstorSecondButton("firstButton",!1))),t.cfgAddInsToCfgRevActionEvents.subscribe({event:"disableOkButtonInInstanceCRDialog"},(()=>this.instanceCRDialog.enableDisableFirstorSecondButton("firstButton",!0)))}};return r})),define("DS/CfgWebinWinInterop/scripts/CfgWIWConfigurationContextDialog",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CfgConfigurationContextUX/CfgEditMultipleConfigurationContextDialog","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],(function(e,i,t,n,o){"use strict";return{destroy:function(){widget.body.empty()},getOptions:function(){return{}},initConfigurationContext:async function(t){this.nativeOptions=t,this.isManufPLanAllowd=t.IsManufPlanAllowedFromNative;var n=this;if(t.parent=n.nativeOptions.mainContent,t.xRevisionPresent=!!t.xRevisionContent,t.xRevisionPresent)if(t.enabledAxis){let e=t.enabledAxis.findIndex((e=>"feature"==e));t.xRevisionContent.variantCriteria=-1!=e?"enabled":"disabled"}else t.xRevisionContent.variantCriteria="disabled";t.typesToSearch=["Model"];try{let e=await i.checkDecouplingActivation();e&&e.ExplicitVariantActivation&&t.typesToSearch.push("Products")}catch(e){console.error(e)}if(0!=t.modelIds.length){let o;if(t.xRevisionPresent){if(o=await e.retrieveModeldetails(t.modelIds,!0),0===o.length){let n={referenceIds:[t.xRevisionContent.referencePID]},s=await i.getMultipleConfigurationContextInfo(n);if(s.xRevisionContent&&s.xRevisionContent.length>0&&s.xRevisionContent[0].attachedScopes&&s.xRevisionContent[0].attachedScopes.length>0&&s.xRevisionContent[0].attachedScopes[0].attributes[0]&&"Model"!==s.xRevisionContent[0].attachedScopes[0].attributes[0].type){let i=await e.retrieveModeldetails([s.xRevisionContent[0].attachedScopes[0].modelPID],!0);o=i}}t.xRevisionContent.attachedScopes=[],t.modelIds.forEach((e=>{t.xRevisionContent.attachedScopes.push({scopePID:e,attributes:o})}))}else o=await e.retrieveModeldetails(t.modelIds),t.contextList=o;n.createContextView(t)}else n.createContextView(t)},createContextView:function(e){if(e.contextList)for(var i=0;i<e.contextList.length;i++)e.commonModelIDs.includes(e.contextList[i].physicalID)?e.contextList[i].isToPropagate=!1:e.contextList[i].isToPropagate=!0;var t={};if(e.enabledAxis)for(i=0;i<e.enabledAxis.length;i++)e.commonCriteria.includes(e.enabledAxis[i])?t[e.enabledAxis[i]]="true":t[e.enabledAxis[i]]="mixedState";e.xRevisionPresent&&(e.xRevisionContextList=[],e.xRevisionContextList.push(e.xRevisionContent)),e.enabledCriteriaArray=t,this.contextDialog=new n(e),this.contextDialog.renderNative(e)},onModelSearchOK:function(i){var t=this;i.IsManufPlanAllowedFromNative=this.isManufPLanAllowd,i.modelIds&&(i.modelIds=i.modelIds.split(",")),i.enabledAxis&&(i.enabledAxis=i.enabledAxis.split(",")),e.retrieveModeldetails(i.modelIds).then((function(e){if(i.contextList=e,i.contextList)for(var n=0;n<i.contextList.length;n++)i.contextList[n].isToPropagate=!1;t.contextDialog.onModelSearchOK(i)}))}}})),define("DS/CfgWebinWinInterop/scripts/CfgWIWDisplayEffectivityDialog",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/Controls/TooltipModel","DS/CfgBaseUX/scripts/CfgContainerView","DS/CfgBaseUX/scripts/CfgData","DS/CoreEvents/ModelEvents","DS/UIKIT/Mask","DS/CfgBaseUX/scripts/CfgXMLServices","DS/CfgEffectivityViewUX/scripts/CfgEffectivityViewFactory","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json","i18n!DS/CfgEffectivityViewUX/assets/nls/CfgEffectivityView","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css","css!DS/CfgFilterUX/CfgFilterUX.css"],(function(e,i,t,n,o,s,a,r,l,f,c,d,p){"use strict";return{destroy:function(){widget.body.empty()},getOptions:function(){var e={};return location.href.search("3DDashboard")>0&&(e.currentEffExp="",e.enoviaURL="https://vdevpril0196plp.dsone.3ds.com/3DSpace",e.tenantID="OnPremise",e.user="H37",e.mode="Native",e.federatedSearchURL="https://vdevpril0196plp.dsone.3ds.com/federated",e.currentEvolutionEff='<?xml version="1.0" encoding="UTF-8"?><CfgEffectivityExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression Domain="ConfigChange_Evolution"><Context HolderType="Model" HolderName="M-0000001" DescId="1"><AND><TreeSeries Type="ProductState" Name="M-0000001"><Tree><Root Name="M-0000001" Revision="A" DescId="2" IsExcluded="false"></Root></Tree></TreeSeries><Series Type="Unit" Name="M-0000001"><Interval><From Value="1" IsExcluded="false"></From></Interval></Series></AND></Context></Expression><Description><Context DescId="1" DisplayName="model1" CurrentState="Marketing"></Context><TreeSeries DescId="2" Revision="A" DisplayName="model1" CurrentState="Product Management"></TreeSeries></Description></CfgEffectivityExpression>',e.projectedEvolutionEff='<?xml version="1.0" encoding="UTF-8"?><CfgEffectivityExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression Domain="ConfigChange_Evolution"><Context HolderType="Model" HolderName="M-0000001" DescId="1"><AND><TreeSeries Type="ProductState" Name="M-0000001"><Tree><Root Name="M-0000001" Revision="A" DescId="2" IsExcluded="false"></Root></Tree></TreeSeries><Series Type="Unit" Name="M-0000001"><Interval><From Value="1" IsExcluded="false"></From></Interval></Series></AND></Context></Expression><Description><Context DescId="1" DisplayName="model1" CurrentState="Marketing"></Context><TreeSeries DescId="2" Revision="A" DisplayName="model1" CurrentState="Product Management"></TreeSeries></Description></CfgEffectivityExpression>',e.variantEff='<?xml version="1.0" encoding="UTF-8"?><CfgEffectivityExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression Domain="ConfigChange_Variant"><Context HolderType="Model" HolderName="M-0000001" DescId="1"><AND><Feature Type="ConfigFeature" Name="rating" DescId="2"><Feature Type="ConfigFeature" Name="110" DescId="3"></Feature><Feature Type="ConfigFeature" Name="220" DescId="4"></Feature></Feature><Feature Type="ConfigFeature" Name="color" DescId="5"><Feature Type="ConfigFeature" Name="green" DescId="6"></Feature><Feature Type="ConfigFeature" Name="red" DescId="7"></Feature></Feature></AND></Context></Expression><Description><Option DescId="4" DisplayName="220" Description="" SequenceOrder="1"></Option><Option DescId="7" DisplayName="red" Description="" SequenceOrder="1"></Option><Context DescId="1" DisplayName="model1" CurrentState="Marketing"></Context><Option DescId="3" DisplayName="110" Description="" SequenceOrder="1"></Option><Feature DescId="5" DisplayName="color" Description="" IsExclusive="true" Revision="-"></Feature><Feature DescId="2" DisplayName="rating" Description="" IsExclusive="true" Revision="-"></Feature><Option DescId="6" DisplayName="green" Description="" SequenceOrder="1"></Option></Description></CfgEffectivityExpression>'),e},onOkClicked:function(e){i.sendNotificationWebInWin({eventName:"cfgDisplayEffectivity",operation:"Close",operationVersion:"1.0",content:""})},createView:function(e){this.wiwEffectivityViewDiv.setContent(""),this.effViewInstance=this.cfgEffViewFactory.createInstance(e,this.wiwEffectivityViewDiv,!0),this.effViewInstance.render(),r.unmask(this.effViewContainer._body)},createOccurenceView:function(e){var t=this,n=!1;if(i.isDefined(t.options.data.instanceDetails)&&t.options.data.instanceDetails.refrenceIDarray&&t.options.data.instanceDetails.refrenceIDarray.length>0&&(n=!0),n){let i=t.effViewInstance;i.renderOccurrenceInfo(),r.mask(i.occurrenceView);let n={effViewData:e,occurrencesIds:t.options.data.instanceDetails.instanceIDarray,referencePathIds:t.options.data.instanceDetails.refrenceIDarray,occurrenceRequired:!0};t.effViewData=e,t.cfgEffViewFactory.loadOccurrenceEffectivities(n).then((function(e){r.unmask(t.wiwEffectivityViewDiv),r.unmask(i.occurrenceView),null!=e.effOccuData&&0!==Object.keys(e.effOccuData).length||0!=t.effViewData.effModels.length?i.updateOccurrenceInfo(e):(t.wiwEffectivityViewDiv.setHTML(d.NO_EFF_MSG),r.unmask(t.effViewContainer._body))}),(function(){r.unmask(t.wiwEffectivityViewDiv),r.unmask(i.occurrenceView)}))}else 0==e.effModels.length&&t.wiwEffectivityViewDiv.setHTML(d.NO_EFF_MSG)},updateEffectivityView:function(e){this.options=e;var t=this;this.wiwEffectivityViewDiv.setHTML("");var n=i.isDefined(e.data.instanceDetails)?e.data.instanceDetails.name+" "+e.data.instanceDetails.revision:"";this.wiwTitleDiv.innerText=n;let o=e.enoviaURL?e.enoviaURL:enoviaServerFilterWidget.baseURL;if(this.wiwIconDiv.children&&this.wiwIconDiv.children[0]&&(this.wiwIconDiv.children[0].src=o+"/snresources/images/icons/small/"+e.data.instanceDetails.icon+".png"),i.isDefined(e.displayMessage)&&""!=e.displayMessage)return this.wiwEffectivityViewDiv.setContent(e.displayMessage),void this.wiwTitleDiv.parentElement.hide();if(this.wiwTitleDiv.parentElement.show(),i.isDefined(e.data.modelConnectionsLoaded)&&0==e.data.modelConnectionsLoaded&&""!=e.data.instanceDetails.ID){let i=e.data.configurationRevision?e.data.configurationRevision:void 0;this.cfgEffViewFactory.loadEffectivities(e.data.instanceDetails.ID,e.tenantID,i).then((async function(e){t.createView(e),t.createOccurenceView(e)}),(function(e){t.errorHandling(p.loadEffectivities)}))}else t.prepareEffViewDataFromXML(e).then((function(e){null!=e.effData&&""==e.effData.officialEvolutionExpression&&""==e.effData.variantExpression?(t.wiwEffectivityViewDiv.setHTML(d.NO_EFF_MSG),r.unmask(t.effViewContainer._body)):t.createView(e)}),(function(e){t.errorHandling(p.prepareEffViewDataFromXML)}))},initEffectivityView:function(e){this.options=e;var t=this;t.CfgUXEnvVariables=JSON.parse(c);var s={isHeader:!1,isFooter:!0,firstButtonText:p.Close_Button,onButtonClickCB:t.onOkClicked};if(t.effViewContainer=new o(s).render(),t.effViewContainer.inject(e.mainContent),i.isDefined(e.displayHeader)&&1==e.displayHeader){var a=new UWA.createElement("div",{class:"wiwEffectivityViewHeaderDiv"}).inject(this.effViewContainer._body);this.wiwIconDiv=new UWA.createElement("div",{class:"wiwIconDiv"}).inject(a);let t=e.enoviaURL?e.enoviaURL:enoviaServerFilterWidget.baseURL;new UWA.createElement("img",{src:t+"/snresources/images/icons/small/"+e.data.instanceDetails.icon+".png"}).inject(this.wiwIconDiv),this.wiwTitleDiv=new UWA.createElement("div",{class:"wiwTitleDiv"}).inject(a);var l=i.isDefined(e.data.instanceDetails)?e.data.instanceDetails.name+" "+e.data.instanceDetails.revision:"";if(this.wiwTitleDiv.innerText=l,i.isDefined(e.multiInstance)&&1==e.multiInstance){var u=new UWA.createElement("div",{class:"wiwRefreshDiv",html:UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-refresh"})}).inject(a);u.tooltipInfos=new n({shortHelp:p.wiwRefreshEffectivity}),u.set({events:{click:function(e){i.sendNotificationWebInWin({eventName:"cfgDisplayEffectivity",operation:"Refresh",operationVersion:"1.0",content:""})}}})}}if(this.wiwEffectivityViewDiv=new UWA.createElement("div",{class:"wiwEffectivityViewDiv"}).inject(this.effViewContainer._body),i.isDefined(e.displayHeader)&&1==e.displayHeader&&this.wiwEffectivityViewDiv.addClassName("wiwEffectivityViewDivHeaderAvailable"),this.cfgEffViewFactory=new f,i.isDefined(e.displayMessage)&&""!=e.displayMessage)this.wiwEffectivityViewDiv.setContent(e.displayMessage);else if(r.mask(t.effViewContainer._body),i.isDefined(e.data.modelConnectionsLoaded)&&0==e.data.modelConnectionsLoaded&&""!=e.data.instanceDetails.ID){let i=e.data.configurationRevision?e.data.configurationRevision:void 0,n=e.tenantID?e.tenantID:enoviaServerFilterWidget.tenant;this.cfgEffViewFactory.loadEffectivities(e.data.instanceDetails.ID,n,i).then((async function(e){t.createView(e),t.createOccurenceView(e)}),(function(e){t.errorHandling(p.loadEffectivities)}))}else i.populateSecurityContext().then((function(n){i.populateDisplayExpressionXSLT().then((function(i){t.prepareEffViewDataFromXML(e).then((function(e){null!=e.effData&&""==e.effData.officialEvolutionExpression&&""==e.effData.variantExpression?(t.wiwEffectivityViewDiv.setHTML(d.NO_EFF_MSG),r.unmask(t.effViewContainer._body)):t.createView(e)}),(function(e){t.errorHandling(p.prepareEffViewDataFromXML)}))}),(function(e){t.errorHandling(p.populateDisplayExpressionXSLT)}))}),(function(e){t.errorHandling(p.populateSecurityContext)}))},errorHandling:function(e){""!=e&&i.showwarning(e,"error"),r.unmask(this.effViewContainer._body)},prepareEffViewDataFromXML:function(e){return new Promise((function(t,n){var o={instanceID:"",effData:{variantExpression:"",variantDisplayExpression:"",variantJSDisplayExpression:"",officialEvolutionExpression:"",projectedEvolutionExpression:"",officialEvolutionDisplayExpression:"",projectedEvolutionDisplayExpression:"",officialJSEvolutionDisplayExpression:"",projectedJSEvolutionDisplayExpression:""},modelData:[],effModels:[],isSearchKO:!1,isXRevisionEffectivity:!1},s=e.data.effectivityDetails;i.isDefined(s.currentEvolutionEff)&&""!=s.currentEvolutionEff&&(o.effData.officialEvolutionExpression=s.currentEvolutionEff,o.effData.officialEvolutionDisplayExpression=i.getDisplayExpressionUsingXSLT(o.effData.officialEvolutionExpression)),i.isDefined(s.projectedEvolutionEff)&&""!=s.projectedEvolutionEff&&(o.effData.projectedEvolutionExpression=s.projectedEvolutionEff,o.effData.projectedEvolutionDisplayExpression=i.getDisplayExpressionUsingXSLT(o.effData.projectedEvolutionExpression)),i.isDefined(s.variantEff)&&""!=s.variantEff&&(o.effData.variantExpression=s.variantEff,o.effData.variantDisplayExpression=i.getDisplayExpressionUsingXSLT(o.effData.variantExpression)),o.effData.officialJSEvolutionDisplayExpression=l.buildJSDisplayExpression(o.effData.officialEvolutionExpression,"EVOLUTION"),o.effData.projectedJSEvolutionDisplayExpression=l.buildJSDisplayExpression(o.effData.projectedEvolutionExpression,"EVOLUTION"),o.effData.variantJSDisplayExpression=l.buildJSDisplayExpression(o.effData.variantExpression,"VARIANT"),l.isxRevisionXML(o.effData.officialEvolutionExpression)?o.isXRevisionEffectivity=!0:o.isXRevisionEffectivity=!1,o.modelData=l.getModelsFromExpression(o.effData.officialEvolutionExpression,o.effData.variantExpression),i.getModelDataUsingSearchService(o.modelData).then((function(e){o.modelData=[],e.results&&e.results.forEach((function(e){o.modelData.push({modelID:i.getAttributeValue(e.attributes,"resourceid"),modelLabel:i.getAttributeValue(e.attributes,"ds6w:label"),modelName:i.getAttributeValue(e.attributes,"ds6w:identifier"),modelIcon:i.getAttributeValue(e.attributes,"type_icon_url")})})),t(o)}),(function(e){o.isSearchKO=!0,t(o)}))}))}}})),define("DS/CfgWebinWinInterop/scripts/CfgWIWEffectivityDialogs",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CfgBaseUX/scripts/CfgUXEnvVariables","DS/CfgBaseUX/scripts/CfgXMLServices","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],(function(e,i,t,n,o,s){"use strict";return{destroy:function(){widget.body.empty()},getOptions:function(){return{}},editEvolution:function(i){this.nativeOptions=i;var t,n,o=this,s={tenant:o.nativeOptions.tenantID,environment:o.nativeOptions.mode,mode:"EditEvolution",modelList:[],modelIds:o.nativeOptions.modelIds,enabledCritData:o.nativeOptions.enabledCriteria,Access:{SetEvolutionEffectvity:"true"},parent:o.nativeOptions.mainContent,parentElement:o.nativeOptions.mainContent,xRevisionContent:o.nativeOptions.xRevisionContent,dialogue:{okHandler:null,hasEffectivity:null,effExpressionXml:null}};""==o.nativeOptions.currentEffExp?t=!1:(console.log("Decoupled Evolution Effectivity"),t=!0,n=o.nativeOptions.currentEffExp),s.dialogue.hasEffectivity=t,s.dialogue.effExpressionXml=n,s.xRevisionContent?require(["DS/CfgEvolutionUX/CfgXRevisionEvolutionLayout"],(function(e){let i={xRevisionContent:s.xRevisionContent,parentElement:s.parentElement,onButtonClickCB:o.onOKCancelEffectivity,effExpressionXml:s.dialogue.effExpressionXml,hasEffectivity:s.dialogue.hasEffectivity,use:"EditEvolution",displayCompactMode:!0};(new e).create(i)})):e.retrieveModeldetails(o.nativeOptions.modelIds).then((function(e){s.modelList=e,require(["DS/CfgEvolutionUX/CfgEditEvolutionLayout"],(function(e){e.create(s)}))}))},onOKCancelEffectivity:function(e){const t=o.getxRevisionEvolutionExpression(e);let n=[];this.xRevisionContent&&n.push(this.xRevisionContent.referencePID);let s=!1;e.event&&(s=e.event.propagateSessionEffectivity);let a={globalEffectivityExpression:t,xRevReferenceIdsWithEffectivity:n,propagateSessionEffectivity:s,isExpressionModified:e.isExpressionModified};var r={eventName:"cfgEditEvolutionEffectivity",operation:"firstButton"==e.event.buttonId?"OK":"Cancel",operationVersion:"1.1",content:JSON.stringify(a)};i.sendNotificationWebInWin(r)},editVariant:async function(t){this.nativeOptions=t;var n=this;if(n.effOptions={evoEffXML:n.nativeOptions.currentEvoEffExp,varEffXML:n.nativeOptions.currentEffExp,hasEffectivity:""!=n.nativeOptions.currentEffExp,parent:n.nativeOptions.mainContent,parentElement:n.nativeOptions.mainContent,onlyModelVersion:"ExplicitVariant"===n.nativeOptions.CfgRevisionMode},t.xRevisionContent&&(n.effOptions.isEvolutionBasedOn="xRevision",n.effOptions.instanceID=t.instanceID?t.instanceID:"Dummy_ID",n.effOptions.parentID=t.parentID?t.parentID:"Dummy_Parent_ID",n.effOptions.workUnderCompiledForm=t.workUnderCompiledForm?t.workUnderCompiledForm:"",n.effOptions.ChangeAuthoringContext=t.ChangeAuthoringContext?t.ChangeAuthoringContext:"",n.effOptions.effectivityCompiledForm=t.effectivityCompiledForm),"EXTERNAL"==this.nativeOptions.mode){var o={configurable:this.nativeOptions.configurable,cfgDomain:"CFG_DOMAIN_CONFIG_CHANGE_VARIANT",typeExpr:"TypeXML",filterables:this.nativeOptions.filterables};if(null==this.nativeOptions.filterables||0==this.nativeOptions.filterables.length)n.effOptions.varEffXML="";else{var a=await i.getEffectivityContentforExternal(o);1==i.isDefined(a)&&(n.effOptions.varEffXML=a.expressions[0].expression)}if(this.nativeOptions.modelIds=[],"MODEL_VERSION"==this.nativeOptions.configurable.contextType)this.nativeOptions.modelIds.push(this.nativeOptions.configurable.contextPIDs[1]);else for(var r=0;r<this.nativeOptions.configurable.contextPIDs.length;r++)this.nativeOptions.modelIds.push(this.nativeOptions.configurable.contextPIDs[r]);n.effOptions.configurable=this.nativeOptions.configurable,n.effOptions.filterables=this.nativeOptions.filterables}let l;l=n.nativeOptions&&n.nativeOptions.xRevisionContent&&n.nativeOptions.xRevisionContent.referencePID?await e.retrieveModeldetailsForxRevision(n.nativeOptions.xRevisionContent.referencePID):await e.retrieveModeldetails(n.nativeOptions.modelIds),n.effOptions.contextData=l,i.populateDisplayExpressionXSLT().then((function(){require(["DS/CfgVariantEffectivityEditor/scripts/CfgVariantEffectivityInit"],(function(e){n.effOptions&&n.effOptions.contextData&&0===n.effOptions.contextData.length?i.showNotifs("warning","",s.Model_Not_Found):e.init(n.effOptions)}))}))},editSessionEffectivity:async function(i){this.nativeOptions=i;i.parent=this.nativeOptions.mainContent,i.mode="SessionEffectivity",i.environment="Native",i.tenant="OnPremise";i.Access={SetSessionEffectvity:"true"},i.iXml=i.currentEffExp,(i.iXml&&o.isxRevisionXML(i.iXml)||"TRUE"==i.isAutoProposed&&i.xRevisionContent)&&i.xRevisionContent.xRevisionGraph&&i.xRevisionContent.xRevisionGraph.physicalid.length>0?(i.isxRevisionEffectivity=!0,await e.retrieveXRevdetails([i.xRevisionContent.xRevisionGraph.physicalid]).then((function(e){if(e.length>0){let n=e[0].basicData.length;for(var t=0;t<n;t++){let n=e[0].basicData[t];"ds6w:who/ds6w:responsible"==n.name&&null!=n.value&&(i.xRevisionContent.responsible=n.value),"ds6w:what/ds6w:type"==n.name&&null!=n.value&&(i.xRevisionContent.type=n.value),"ds6w:label"==n.name&&null!=n.value&&(i.xRevisionContent.label=n.value),"ds6w:identifier"==n.name&&null!=n.value&&(i.xRevisionContent.identifier=n.value),"name"==n.name&&null!=n.value&&(i.xRevisionContent.name=n.value),"owner"==n.name&&null!=n.value&&(i.xRevisionContent.owner=n.value)}}})),require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],(function(e){e.createNative(i)}))):(i.isxRevisionEffectivity=!1,require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],(function(e){e.createNative(i)})))},onModelSearchOKSessionEff:function(i){i.modelIds?i.modelIds=i.modelIds.split(","):i.id&&(i.modelIds=i.id.split(",")),e.retrieveModeldetails(i.modelIds).then((function(e){i.modelIds=e,require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],(function(i){i.addModelFromNative(e)}))}))}}})),define("DS/CfgWebinWinInterop/scripts/CfgWIWAuthoringContext",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CoreEvents/ModelEvents","DS/CfgBaseUX/scripts/CfgData","DS/CfgAuthoringContextUX/scripts/CfgAuthContextChangeView","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","DS/CfgAuthoringContextUX/scripts/CfgCAListDialog","DS/CfgBaseUX/scripts/CfgContainerView","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],(function(e,i,t,n,o,s,a,r,l,f){"use strict";return{destroy:function(){widget.body.empty()},getOptions:function(){return{}},initAuthContextPowerBy:function(e){this.nativeOptions=e;var t=this,n={};if(n.parent=t.nativeOptions.mainContent,t.CfgAuthoringContextView=new s(n),t.CfgAuthoringContextView&&("powerBy"==t.nativeOptions.mode||"Native"==t.nativeOptions.mode)){i.sendNotificationWebInWin({eventName:"cfgAuthoringContext",operation:"Init_Complete",operationVersion:"1.0",content:{}})}},setAuthContextPowerBy:function(e){this.nativeOptions.mainContent&&this.nativeOptions.mainContent.inject(widget.body),UWA.is(e)?this.CfgAuthoringContextView&&this.CfgAuthoringContextView.setContext(e):console.log("setAuthContext | Options not set")},launchCAListView:function(e){var i={isHeader:!1,isFooter:!0,firstButtonText:f.OK_Button,secondButtonText:f.Cancel_Button,headerText:"",onButtonClickCB:this.onOkCancelClicked};this.caListViewContainer=new l(i).render(),this.caListViewContainer.inject(e.mainContent),this.caListViewContainer.enableDisableFirstorSecondButton("firstButton",!0),this.caListViewContainer.hideScrollBarInContainerBody(),o.clear(),o.caListActionEvents=new n,this.subscribeCAListActionEvents();var t={renderTo:new UWA.createElement("div",{class:"wiw-show-ca-list"}).inject(this.caListViewContainer._body)};r.createNative(t)},onOkCancelClicked:function(e){var t="firstButton"===e.buttonId?r.getSelectedCAItemForNative():{},n={eventName:"cfgShowCAList",operation:"firstButton"===e.buttonId?"OK":"Cancel",operationVersion:"1.0",content:JSON.stringify(t)};i.sendNotificationWebInWin(n)},subscribeCAListActionEvents:function(){o.caListActionEvents.subscribe({event:"enableOkButtonInCAListContainerView"},(()=>{this.caListViewContainer.enableDisableFirstorSecondButton("firstButton",!1)}))}}})),define("DS/CfgWebinWinInterop/scripts/CfgWIWFilterDialog",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CfgBaseUX/scripts/CfgContainerView","DS/CfgFilterUX/CfgFilterEditor","DS/CfgBaseUX/scripts/CfgData","DS/CoreEvents/ModelEvents","DS/UIKIT/Mask","DS/Controls/LineEditor","DS/Controls/TooltipModel","DS/CfgBaseUX/scripts/CfgXMLServices","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css","css!DS/CfgFilterUX/CfgFilterUX.css"],(function(e,i,t,n,o,s,a,r,l,f,c,d,p){"use strict";var u={destroy:function(){widget.body.empty()},getOptions:function(){return{}},onOkCancelClicked:function(e){if("firstButton"==e.buttonId&&""==u.filterNameEditor.value)return u.CfgFilterEditor.alertDiv.add({message:p.Error_missing_filter_title,style:{position:"absolute"},className:"error"}),u.CfgFilterEditor.alertDiv.elements.container.addClassName("CfgAlertstyle"),void u.CfgFilterEditor.alertDiv.show();var t="firstButton"==e.buttonId?u.CfgFilterEditor.getDataForWIWFilter():{};t.filterName=u.filterNameEditor.value,t.filterDescription=i.isDefined(u.filterDescriptionEditor)?u.filterDescriptionEditor.value:"";var n={eventName:"cfgConfigurationFilter",operation:"firstButton"==e.buttonId?"OK":"Cancel",operationVersion:"1.0",content:JSON.stringify(t)};i.sendNotificationWebInWin(n),u.CfgFilterEditor.sendConfigurationFilterTrackerEvent(t.filterXML)},onPCSearchOKFilter:function(e){u.CfgFilterEditor.onPCSearchOKFilter(e)},onCASearchOKFilter:function(e){u.CfgFilterEditor.onCASearchOKFilter(e)},execute:function(e){this.options=e;var t=this;s.ModelEvents=new a;i.checkDecouplingActivation().then((async function(e){console.log(e),s.configurationCriteria=e,!0===s.configurationCriteria.xRevisionActivation&&await i.getConfigurationSettings(),i.populateDisplayExpressionXSLT().then((function(){if(i.isDefined(t.options.iModelsList))t.options.iModelsList.length>0&&c.RetrieveConfiguratorDataFromFilterXML(t.options.expression).then((function(e){u.CfgFilterEditor=new o(t.options),u.CfgFilterEditor.render(),r.unmask(t.filterViewContainer._body)}),(function(e){t.errorHandling(p.RetrieveConfiguratorDataFromFilterXML)}));else if(t.options.rootId){const e={referenceIds:[t.options.rootId]};i.getMultipleConfigurationContextInfo(e).then((async e=>{let{refBasedOn:n,modelsList:s,...a}=await i.parseGetMultipleConfigurationContextResponse(e);if(t.options={...t.options,...a,filterBasedOn:n,iModelsList:s},t.options.filterBasedOn){if("Model"===t.options.filterBasedOn){if(t.options.unaccessibleModelList.length>0)return void t.errorHandling(p.Filter_unaccessiblecode_Error);if(0==t.options.iModelsList.length)return void t.errorHandling(p.Filter_Error_No_Model)}c.RetrieveConfiguratorDataFromFilterXML(t.options.expression).then((function(e){u.CfgFilterEditor=new o(t.options),u.CfgFilterEditor.render(),r.unmask(t.filterViewContainer._body)}),(function(e){t.errorHandling(p.RetrieveConfiguratorDataFromFilterXML)}))}else t.errorHandling(p.Filter_Root_Unconfigured)}),(e=>{console.error("getMultipleConfigurationContextInfo call failed"),console.log(e)}))}}),(function(e){t.errorHandling(p.populateDisplayExpressionXSLT)}))}))},errorHandling:function(e){""!=e&&null!=e&&null!=e&&i.showwarning(e,"error"),r.unmask(this.filterViewContainer._body)},createEditor:function(e){var i=new UWA.createElement("div",{class:"wiwFilterDiv"}).inject(this.filterViewContainer._body),t=new UWA.createElement("div",{class:"wiwFilterLabelDiv"}).inject(i);(new UWA.createElement("div",{class:"labelDiv"}).inject(t).setHTML(e.editorLabel),e.isMandatoryField)&&new UWA.createElement("div",{class:"wiwFilterAsteriskDiv"}).inject(t).addClassName("fonticon fonticon-asterisk-alt");"Predefined"!==this.filterType&&"Product Configuration"!==this.filterType||t.setStyle("min-width","120px");var n=new UWA.createElement("div",{class:"wiwFilterLineEdtrDiv"}).inject(i),o=new l({placeholder:e.placeholder,maxLength:e.maxSupportedLength}).inject(n);return o.addEventListener("uncommittedChange",(function(i){o.tooltipInfos=new f({shortHelp:o.valueToCommit}),0==o.valueToCommit.length&&e.isMandatoryField&&(u.CfgFilterEditor.alertDiv.add({message:p.Error_missing_filter_title,style:{position:"absolute"},className:"error"}),u.CfgFilterEditor.alertDiv.elements.container.addClassName("CfgAlertstyle"),u.CfgFilterEditor.alertDiv.show())})),o.value=e.editorValue,o.tooltipInfos=new f({shortHelp:e.editorValue}),o},initFilterDialog:function(e){try{var t=this;this.filterType=i.isDefined(e.FilterType)?e.FilterType:"";var o={isHeader:!1,isFooter:!0,firstButtonText:"Product Configuration"===this.filterType?null:d.CFG_Ok,secondButtonText:"Product Configuration"===this.filterType?p.Close_Button:d.CFG_Cancel,headerText:"",onButtonClickCB:t.onOkCancelClicked};t.filterViewContainer=new n(o).render(),t.filterViewContainer.inject(e.mainContent),this.wiwFilterAlertDiv=new UWA.createElement("div",{class:"wiwFilterAlertDiv"}).inject(t.filterViewContainer._body),r.mask(t.filterViewContainer._body);let f={editorLabel:p.Filter_Label_Title,editorValue:e.filterName,isMandatoryField:!0,maxSupportedLength:100,placeholder:p.titleEditorPlaceholder};if(this.filterNameEditor=this.createEditor(f),"Predefined"===this.filterType||"Product Configuration"===this.filterType){let i={editorLabel:p.Filter_Label_Description,editorValue:e.filterDescription,isMandatoryField:!1,maxSupportedLength:256,placeholder:p.descriptionEditorPlaceholder};this.filterDescriptionEditor=this.createEditor(i)}var a=new UWA.createElement("div",{class:"wiwFilteroperationDiv"}).inject(t.filterViewContainer._body);i.isDefined(this.filterDescriptionEditor)&&a.setStyle("height","calc( 100% - 71px)"),"Product Configuration"===this.filterType&&(t.filterViewContainer._body.getChildren().forEach((e=>{e.addClassName("wiwReadOnly")})),i.showwarning(p.PC_edit_warning,"info"),this.removeDateFromPCFilterXML(e));var l={rootId:e.rootId,expression:{},tenant:e.tenantID,platformUrl:e.enoviaURL,renderTo:a,renderToApp:a,displayCompactMode:!0,iModelsList:e.iModelsList,callback:function(){}};if(l.FilterType=e.FilterType,l.filterMode=e.filterMode,l.operation=e.operation,i.isDefined(e.crData)&&(e.crData=JSON.parse(e.crData),1!=e.crData.crFilter&&"true"!=e.crData.crFilter||(l.expression.configurationRevision=e.crData.crID,l.expression.modelId="")),i.isDefined(e.filterXML)&&""!=e.filterXML){if(l.expression.modelId=i.isDefined(e.modelId)?e.modelId:"",l.expression.filterXML=e.filterXML,i.isDefined(e.filterUXData)){e.filterUXData="{"+e.filterUXData+"}";try{e.filterUXData=JSON.parse(e.filterUXData)}catch(t){console.log(t),i.showwarning(p.exceptionOccured,"error"),e.filterUXData=void 0}i.isDefined(e.filterUXData)?(e.variants=e.filterUXData.variants,i.isDefined(e.filterUXData.PC)&&(e.PCID=e.filterUXData.PC.PCID),e.filterUXData.singleProductId&&(l.expression.singleProductId=e.filterUXData.singleProductId)):e.variants={displayExpression:"",xmlExpression:""}}else e.variants={displayExpression:"",xmlExpression:""};l.expression.variants=e.variants,i.isDefined(e.PCID)&&(l.PCID=e.PCID),l.expression.view=e.view}this.execute(l),s.ModelEvents.subscribe({event:"LaunchingDictionarySelection"},(function(i){s.renderTo=e.mainContent,s.renderToApp=e.mainContent,t.filterViewContainer&&t.filterViewContainer.hide()})),s.ModelEvents.subscribe({event:"ConfigRevisionDialogClosed"},(function(e){t.filterViewContainer&&t.filterViewContainer.show()})),s.ModelEvents.subscribe({event:"ProductStateDialogClosed"},(function(e){t.filterViewContainer&&t.filterViewContainer.show()})),s.ModelEvents.subscribe({event:"UnitsDialogClosed"},(function(e){t.filterViewContainer&&t.filterViewContainer.show()})),s.ModelEvents.subscribe({event:"ConfiguratorLaunched"},(function(i){s.renderTo=e.mainContent,s.renderToApp=e.mainContent,t.filterViewContainer&&t.filterViewContainer.hide()})),s.ModelEvents.subscribe({event:"ConfiguratorClosed"},(function(e){t.filterViewContainer&&t.filterViewContainer.show()})),s.ModelEvents.subscribe({event:"showWIWFilterContainer"},(function(e){t.filterViewContainer&&t.filterViewContainer.show()}))}catch(e){console.log(e),this.errorHandling(p.exceptionOccured)}},removeDateFromPCFilterXML:function(e){if(!i.isParamDefined(e.filterXML))return;let t=(new DOMParser).parseFromString(e.filterXML,"text/xml"),n=t.getElementsByTagName("FilterSelection");if(n&&n.length>0){let e=n[0],i=n[0].children;i&&1==i.length&&"Context"==i[0].tagName&&(e=i[0]);let o=t.getElementsByTagName("Date");o.length>0&&e.removeChild(o[0])}let o=new XMLSerializer;e.filterXML=o.serializeToString(t)}};return u})),define("DS/CfgWebinWinInterop/scripts/CfgWIWDialogs",["DS/CfgBaseUX/scripts/CfgController","DS/CfgTracker/CfgTracker","DS/CfgWebinWinInterop/scripts/CfgWIWConfigurationRevisionDialogs","DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CfgWebinWinInterop/scripts/CfgWIWEffectivityDialogs","DS/CfgWebinWinInterop/scripts/CfgWIWAuthoringContext","DS/CfgWebinWinInterop/scripts/CfgWIWConfigurationContextDialog","DS/CfgWebinWinInterop/scripts/CfgWIWFilterDialog","DS/CfgWebinWinInterop/scripts/CfgWIWDisplayEffectivityDialog","DS/CfgBaseUX/scripts/CfgCacheManager","DS/CfgWebinWinInterop/scripts/CfgWIWPropertiesDialog","DS/Windows/ImmersiveFrame","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],(function(e,i,t,n,o,s,a,r,l,f,c,d,p,u,v){"use strict";return{destroy:function(){widget.body.empty()},dummy:function(){},getOptions:function(){return location.href.search("3DDashboard"),{}},createNativeLayout:function(e){widget.body.empty(),widget.body.setStyle("height",document.body.parentElement.clientHeight+"px"),widget.addEvent("onResize",(function(){widget.body.setStyle("height",document.body.parentElement.clientHeight+"px")}));var i=this.mainContent=new UWA.createElement("div",{id:"cfgNative-main-container",class:"cfgNative-main-container"});if("powerBy"==this.nativeOptions.mode)i.inject(widget.body);else{var t=new u;t.setContentInBackgroundLayer(i),t.reactToPointerEventsFlag=!1,t.inject(widget.body)}},initWIWDialog:function(i){if(i.cfgWIWTraces&&console.log("initWIWDialog -"+JSON.stringify(i)),i.mode=null==i.mode?"Native":i.mode,i.modelIds&&(i.modelIds=i.modelIds.split(",")),i.xRevisionContent&&(i.xRevisionContent=JSON.parse(i.xRevisionContent)),i.enabledAxis){i.enabledAxis=i.enabledAxis.split(",");var t={feature:"false",productState:"false",unit:"false",contextualDate:"false",milestone:"false",manufacturingPlan:"false"};i.enabledAxis.forEach((function(e){e=e.replace(" ",""),t[e]="true"})),i.enabledCriteria=t}this.nativeOptions=i;var n=this;if(e.init("","",this.nativeOptions.mode),enoviaServerFilterWidget.tenant=this.nativeOptions.tenantID,enoviaServerFilterWidget.baseURL=this.nativeOptions.enoviaURL,enoviaServerFilterWidget.userID=this.nativeOptions.user,enoviaServerFilterWidget.federatedURL=this.nativeOptions.federatedSearchURL,enoviaServerFilterWidget.cfgWIWTraces=this.nativeOptions.cfgWIWTraces,this.nativeOptions.rolesData&&(enoviaServerFilterWidget.rolesData=JSON.parse(this.nativeOptions.rolesData)),o.isDefined(i.userSettings)&&""!=i.userSettings&&(i.userSettings=JSON.parse(i.userSettings),d.setInLocalStorage(i.userSettings)),i.compassURL)var s=new Promise((function(e,i){o.populateServiceUrls(n.nativeOptions.compassURL).then((function(){o.populateSecurityContext().then((function(){o.getPAndOAccess().then((function(i){enoviaServerFilterWidget.pandOAccess=i,n.createNativeLayout(),e()}))}))}))}));else s=new Promise((function(e,i){o.populateSecurityContext().then((function(){n.createNativeLayout(),e()}))}));return s},setMagicProbesDataForNativeScenario:function(e){let t={AppId:"Native",AppName:"RICH CLIENT APPLICATION",CommandName:e.iCommandName,CommandOperation:e.iOperation,ConfigMode:i.ConfigMode.CONTEXTUAL,ApplicationMode:i.ApplicationMode.NATIVEWIW};o.sendConfgurationCommandsClickEventForMagicProbes(t)},editEvolution:function(e){var t=this;this.initWIWDialog(e).then((function(){t.nativeOptions.mainContent=t.mainContent,a.editEvolution(t.nativeOptions);let e={iCommandName:i.Labels.EDIT_EVOLUTION_EFFECTIVITY,iOperation:"Edit_Evolution_Effectivity_Dialog_Open"};t.setMagicProbesDataForNativeScenario(e)}))},initAuthContext:function(e){var i=this;this.initWIWDialog(e).then((function(){i.nativeOptions.mainContent=i.mainContent,r.initAuthContextPowerBy(i.nativeOptions)}))},setAuthContext:function(e){enoviaServerFilterWidget.cfgWIWTraces&&console.log("setAuthContext -"+JSON.stringify(e)),r.setAuthContextPowerBy(e)},editVariant:function(e){var t=this;this.initWIWDialog(e).then((function(){t.nativeOptions.mainContent=t.mainContent,a.editVariant(t.nativeOptions);let e={iCommandName:i.Labels.EDIT_VARIANT_EFFECTIVITY,iOperation:"Edit_Variant_Effectivity_Single_Dialog_Open"};t.setMagicProbesDataForNativeScenario(e)}))},initConfigurationContext:function(e){var t=this;e.commonModelIDs&&(e.commonModelIDs=e.commonModelIDs.split(",")),e.commonCriteria&&(e.commonCriteria=e.commonCriteria.split(",")),o.isDefined(e.pandOAccess)&&""!=e.pandOAccess&&(e.pandOAccess=JSON.parse(e.pandOAccess)),this.initWIWDialog(e).then((function(){t.nativeOptions.mainContent=t.mainContent,l.initConfigurationContext(t.nativeOptions);let e={iCommandName:i.Labels.EDIT_CONFIGURATION_CONTEXT,iOperation:"Edit_Configuration_Context_Dialog_Open"};t.setMagicProbesDataForNativeScenario(e)}))},onModelSearchOK:function(e){enoviaServerFilterWidget.cfgWIWTraces&&console.log("onModelSearchOK -"+JSON.stringify(e)),l.onModelSearchOK(e)},editSessionEffectivity:function(e){var t=this;this.initWIWDialog(e).then((function(){t.nativeOptions.mainContent=t.mainContent,a.editSessionEffectivity(t.nativeOptions);let e={iCommandName:i.Labels.WORK_UNDER_AUTHORING_CONTEXT,iOperation:"Work_Under_Evolution_Effectivity_Set"};t.setMagicProbesDataForNativeScenario(e)}))},onModelSearchOKSessionEff:function(e){enoviaServerFilterWidget.cfgWIWTraces&&console.log("onModelSearchOKSessionEff -"+JSON.stringify(e)),a.onModelSearchOKSessionEff(e)},launchCAListView:function(e){this.initWIWDialog(e).then((()=>{this.nativeOptions.mainContent=this.mainContent,r.launchCAListView(this.nativeOptions)}))},addInstancesToCR:async function(e){await this.initWIWDialog(e),this.nativeOptions.mainContent=this.mainContent,t.launchAddtoCRDialog(this.nativeOptions)},launchPropertiesInNative:async function(e){await this.initWIWDialog(e),this.nativeOptions.mainContent=this.mainContent,p.createPropertiesComponentInNative(this.nativeOptions)},launchConfigurationFilter:function(e){var i=this;this.initWIWDialog(e).then((function(){if(o.isDefined(e.DictionaryList)&&""!=e.DictionaryList){var t=e.DictionaryList.split(",");0!=t.length&&n.retrieveModeldetails(t).then((function(t){i.nativeOptions.iModelsList=t,i.nativeOptions.mainContent=i.mainContent,console.log("launchConfigurationFilter-"+JSON.stringify(e)),f.initFilterDialog(i.nativeOptions)}))}else i.nativeOptions.mainContent=i.mainContent,console.log("launchConfigurationFilter-"+JSON.stringify(e)),f.initFilterDialog(i.nativeOptions)}))},onPCSearchOKFilter:function(e){enoviaServerFilterWidget.cfgWIWTraces&&console.log("onPCSearchOKFilter -"+JSON.stringify(e)),f.onPCSearchOKFilter(e)},onCASearchOKFilter:function(e){var i=e.id.split(",");f.onCASearchOKFilter({caIDArray:i})},displayEffectivity:function(e){var i=this;this.initWIWDialog(e).then((function(){i.nativeOptions.mainContent=i.mainContent,console.log("viewPropertiesEffectivity-"+JSON.stringify(e)),c.initEffectivityView(i.nativeOptions)}))},updateEffectivityView:function(e){console.log(" updateEffectivityView viewPropertiesEffectivity-"+JSON.stringify(e)),c.updateEffectivityView(e)}}}));