define("DS/XCADIFCDocument/IFCTessellatedRepresentation",["DS/XCADInputDocuments/XCADTessellatedRepresentation","DS/XCADInputDocuments/XCADRepresentation","DS/XCADInputDocuments/XCADFaceData","DS/XCADInputDocuments/XCADEdgeData","DS/Mesh/ThreeJS_Base"],(function(t,e,i,s,r){"use strict";var o=/([^,]+)/g,n=/\(([^)]+)\)/g;t.KindOfNode.NOD_SolidNode,t.KindOfNode.NOD_GP,t.KindOfGP.GP_Face;return t.extend((function(t,i){this._associatedDocument=t,this._ifcTokenizeArgs=t.ifcTokenizeArgs,this._representationType=e.XCAD_TESSELLATED_REPRESENTATION,this._ifcRepresentationIndex=i;var s=[];t.ifcTokenizeArgs(t.ifcEntities[i.substr(1)],s),this._rootNodes=[],t.ifcTokenizeArgs(s[3],this._rootNodes),this._verticelist={},this._idxCoordList=void 0,this._associatedDocument.CoordSystem.Coord=!1,this._associatedDocument.CoordSystem.Origin=void 0,this._associatedDocument.CoordSystem.Axis=void 0,this._associatedDocument.CoordSystem.RefDir=void 0,this._isNodeGP=!1}),{_fillVerticesList:function(t){let e=this._associatedDocument.ifcEntities[t];if(null!=e){let s=e.substr(e.indexOf("((")+2,e.indexOf("))")-2).match(n);this._verticelist[t]=[],this._idxCoordList=t;let r=[],c=0;null!=s&&(c=s.length);for(var i=0;i<c;i++)r=s[i].substr(1,s[i].length-2).match(o),3===r.length&&this._verticelist[t].push(r[0],r[1],r[2]),r=null}},_processTriangleStrips:function(t,e,i){var s=e.substr(1,e.length-2).match(n);if(null!==s){var c=null==i||1===i.length;let e=s.length;for(let n=0;n<e;n++){let e=s[n].substr(1,s[n].length-2).match(o);if(null==i){var a,u,d,l=new r.Vector3,h=new r.Vector3,f=new r.Vector3;a=3*(e[0]-1);var g=new r.Vector3(this._verticelist[this._idxCoordList][a],this._verticelist[this._idxCoordList][a+1],this._verticelist[this._idxCoordList][a+2]);u=3*(e[1]-1);var p=new r.Vector3(this._verticelist[this._idxCoordList][u],this._verticelist[this._idxCoordList][u+1],this._verticelist[this._idxCoordList][u+2]);d=3*(e[2]-1);var m=new r.Vector3(this._verticelist[this._idxCoordList][d],this._verticelist[this._idxCoordList][d+1],this._verticelist[this._idxCoordList][d+2]);l.subVectors(g,p),h.subVectors(g,m),f.crossVectors(l,h),f.normalize(),t.setNormalAt(a/3,f.getComponent(0).toString(),f.getComponent(1).toString(),f.getComponent(2).toString()),t.setNormalAt(u/3,f.getComponent(0).toString(),f.getComponent(1).toString(),f.getComponent(2).toString()),t.setNormalAt(d/3,f.getComponent(0).toString(),f.getComponent(1).toString(),f.getComponent(2).toString()),t.stripTrianglesIndices.push(a/3,u/3,d/3)}else{let s=e.length;for(let r=0;r<s;r++){let s=e[r];if(s-=1,t.stripTrianglesIndices.push(s),!c){let e=i[s].substr(1,i[s].length-2).match(o);t.setNormalAt(s,e[0],e[1],e[2]),e=null}}}t.nbVertexPerStripTriangle.push(e.length),e=null}}s=null},_processTriangleFans:function(t,e,i){throw"Error: not implemented method"},getChildren:function(t,e){var i=[];return i.push(t),i},getChild:function(t,e){throw"Error: not implemented method"},getChildCount:function(t,e){throw"Error: not implemented method"},getAssociatedTransfo:function(t){throw"Error: not implemented method"},getGeomSet:function(t){throw"Error: not implemented method"},getCircleData:function(t){throw"Error: not implemented method"},getConeData:function(t){throw"Error: not implemented method"},getCoordinateSystem:function(){return this._associatedDocument.CoordSystem},getCylinderData:function(t){throw"Error: not implemented method"},getVertexData:function(t){throw"Error: not implemented method"},getEdgeData:function(t){throw"Error: not implemented method"},getFaceData:function(t){var e=this._associatedDocument._ifcGetEntityType(t.substring(1)),s=[];this._ifcTokenizeArgs(e.second,s);var r=new i,o=s[0].substring(1);if(void 0===this._verticelist[o]&&this._fillVerticesList(o),null!=this._verticelist[o]){for(var c=this._verticelist[o].length,a=0,u=0;u<c/3;u++){for(var d=0;d<3;d++)r.vertices[3*u+d]=this._verticelist[o][a+d];a+=3}if(null!=s[1]){var l=s[1].substr(1,s[1].length-2).match(n);s[3].length>2&&this._processTriangleStrips(r,s[3],l)}}return r},getGPType:function(e){return t.KindOfGP.GP_Face},getNodeBoundingSphere:function(t){throw"Error: not implemented method"},getNodeColor:function(t){t=t.substring(1);var e=this._associatedDocument.overridingFaceColors[t];return void 0!==e?e:this._associatedDocument.bodyColors[t]},getNodeOrientationMatrix:function(t){throw"Error: not implemented method"},getNodeType:function(e){var i=t.KindOfNode.NOD_SolidNode;return this._isNodeGP?(this._isNodeGP=!1,i=t.KindOfNode.NOD_GP):this._isNodeGP=!0,i},getNodeUID:function(t){throw"Error: not implemented method"},getPlaneData:function(t){throw"Error: not implemented method"},getPointData:function(t){throw"Error: not implemented method"},getPolyLineData:function(t){throw"Error: not implemented method"},getRootNode:function(t){return this._rootNodes[t]},getRootNodesCount:function(){return this._rootNodes.length},getSAG:function(t){throw"Error: not implemented method"},getSphereData:function(t){throw"Error: not implemented method"},isIndexed:function(){return!0}})})),define("DS/XCADIFCDocument/IFCProductInstance",["DS/XCADInputDocuments/XCADProductInstance"],(function(t){"use strict";return t.extend((function(t,e){this._document=t,this._ifcProductInstance=e}),{getGeometricProperties:function(){throw"Error: not implemented method"},getInstanceAttributes:function(){var t=[];return t.push(this._ifcProductInstance.instanceName),t},getReferenceProduct:function(){return this._document.getProductReference(this._ifcProductInstance.productReferenceIdx)},getUID:function(){throw"Error: not implemented method"},getTransformation:function(){var t,e=this._ifcProductInstance.transfo;if(void 0!==e){var i=e.rotation.elements,s=e.translation;t=[[[i[0],i[1],i[2]],[i[3],i[4],i[5]],[i[6],i[7],i[8]]],[s.x,s.y,s.z]]}return t}})})),define("DS/XCADIFCDocument/IFCProductRepresentation",["DS/XCADInputDocuments/XCADProductRepresentation"],(function(t){"use strict";return t.extend((function(t,e,i){this._name=i,this._associatedDocument=t,this._representationType=e,this._rootProducts=[]}),{addRootProduct:function(t){this._rootProducts.push(t)}})})),define("DS/XCADIFCDocument/IFCProduct",["exports","DS/XCADInputDocuments/XCADProduct","DS/XCADIFCDocument/IFCProductInstance"],(function(t,e,i){"use strict";var s=e.extend((function(t,e){this._document=t,this._ifcProduct=e}),{getDocument:function(){var t=void 0;if(null!=this._ifcProduct){var e=this._ifcProduct.geomRep;null!=e&&((t=this._document)._internalRepresentationIndex=e.location)}return t},getFilePath:function(){},getGeometricProperties:function(){throw"Error: not implemented method"},getInstanceList:function(){var t=[];if(null!=this._ifcProduct)for(var e=this._ifcProduct.childrenList.length,s=0;s<e;s++){var r=new i(this._document,this._ifcProduct.childrenList[s]);null!=r&&t.push(r)}return t},getProductAttributes:function(){var t=[];return null!=this._ifcProduct?t.push(this._ifcProduct.referenceName):t.push("unknow"),t.push(""),t.push(""),t.push(""),t.push(""),t.push(e.SourceTypes.Unknown),t},getUID:function(){throw"Error: not implemented method"}});return t.IFCProduct=s,s})),define("DS/XCADIFCDocument/IFCInputDocument",["DS/XCADInputDocuments/XCADInputDocument","DS/XCADInputDocuments/XCADRepresentation","DS/XCADIFCDocument/IFCTessellatedRepresentation","DS/XCADIFCDocument/IFCProductRepresentation","DS/XCADIFCDocument/IFCProduct","DS/XCADInputDocuments/XCADFaceData","DS/Mesh/ThreeJS_Base","DS/XCADLoader/XCADError"],(function(t,e,i,s,r,o,n,c){"use strict";e.XCAD_TESSELLATED_REPRESENTATION;return t.extend((function(){this.tesselatedReps=[],this.ifcEntities=[],this.bodyColors=[],this.overridingFaceColors=[],this.assyProducts=[],this.nbInstPart=0,this.rootProducts=[],this.CoordSystem={Coord:!1,Origin:void 0,Axis:void 0,RefDir:void 0},this.assyProducts2=[],this.rootProducts2=[],this.productTypeMapping=[]}),{forceRead:void 0,zipped:!1,requestResponseType:"arraybuffer",tokenizeComplexArgs:function(t,e){var i=0,s="";e.length=0;for(var r=0;r<t.length;r++)"("===t[r]?(i>=1&&(s+=t[r]),i++):")"===t[r]?--i>=1&&(s+=t[r],1===i&&(e.push(s),s="")):s+=t[r]},tokenizeArrayArgs:function(t,e){var i="";e.length=0;for(var s=0;s<t.length;s++)"("!==t[s]&&(","===t[s]||")"===t[s]?(e.push(i),i=""):i+=t[s])},ifcTokenizeArgs:function(t,e){if(void 0!==t){e.length=0;t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).match(/(\'[a-zA-Z0-9\s.,+-_#()~:&$|\\\"]*\')*(\([()]*(\([^()]*\)[^()]*)*\))*(\([a-zA-Z0-9\s.,-_#]*\))*(\.[a-zA-Z0-9\s.,-_#]*\.)*(\#?\-?[0-9]+[.-E0-9]*)*(\$)*/g).filter((function(t){return""!=t})).forEach((t=>{"string"==typeof t&&t.startsWith("'")&&t.endsWith("'")&&(t=t.slice(1,-1));let i=[...t.matchAll(/\\X2\\[^\\]+\\X0\\/g)],s=0,r="",o=0;i.forEach((e=>{r+=t.substring(o,e.index),o=e.index+i[s][0].length;var n=i[s][0].substring(i[s][0].indexOf("\\X2\\")+4,i[s][0].indexOf("\\X0\\")).match(/.{1,4}/g);n.forEach(((t,e,i)=>{i[e]="0x"+t}));var c=String.fromCharCode.apply(String,n);r+=c,s++})),r+=t.substring(o,t.length);let n=r.indexOf("\\S\\");const c=/\\S\\./gi;if(n>0){let t=String.fromCharCode(128|r.substring(n+3,n+4).charCodeAt(0));r=r.replaceAll(c,t)}n=r.indexOf("\\X\\");const a=/\\X\\../gi;if(n>0){let t=String.fromCharCode(parseInt(r.substring(n+3,n+5),16));r=r.replaceAll(a,t)}e.push(r)}))}},_ifcGetEntityType:function(t){var e,i=this.ifcEntities[t];void 0!==i&&(e=i.match(/^\w+/)[0]);return{first:e,second:i}},close:function(){void 0!==this._internalRepresentationIndex&&delete this._internalRepresentationIndex},getProductReference:function(t){return new r(this,this.assyProducts[t])},getRootProducts:function(){return this.rootProducts},getRepresentation:function(t){var r;if(void 0!==this._internalRepresentationIndex)t===e.XCAD_TESSELLATED_REPRESENTATION&&(r=new i(this,this._internalRepresentationIndex));else if(2===Object.keys(this.assyProducts).length&&0!==this.tesselatedReps.length&&t===e.XCAD_TESSELLATED_REPRESENTATION)r=new i(this,this.tesselatedReps[0]);else if(Object.keys(this.assyProducts).length>2&&t===e.XCAD_PRODUCT_REPRESENTATION){r=new s(this,e.XCAD_PRODUCT_REPRESENTATION,"root");var o,n=this.getRootProducts();if(n.length>0)o=n[0];else for(var c in this.assyProducts)if(this.assyProducts[c].isRoot){o=c;break}var a=this.getProductReference(o);r.addRootProduct(a)}return r},initialize:async function(t){var e=[];if("string"==typeof t)e[0]=t;else{var i=268435456,s=new TextDecoder("utf-8");if(t.byteLength>i){let r=0,o=i,n=0;for(;o<t.byteLength;)e[n]=s.decode(t.slice(r,o)),n++,r=o+1,o+=i;e[n]=s.decode(t.slice(r,t.byteLength))}else e[0]=s.decode(t)}var r=!1;if(""!==e[0]){for(var o=1;o<e.length;o++){let t=e[o].indexOf("\n#"),i=e[o].substring(0,t+1);e[o-1]+=i,e[o]=e[o].slice(t+1,e[o].length)}if(null!=this.forceRead){let t=/FILE_SCHEMA\s*\(\s*\(\s*\'\s*IFC2X3\s*\'/,i=/FILE_SCHEMA\s*\(\s*\(\s*\'\s*IFC4\s*\'/,s=/FILE_SCHEMA\s*\(\s*\(\s*\'\s*IFC4X3_ADD2\s*\'/;(null!==e[0].match(t)||null!==e[0].match(i)||null!==e[0].match(s))&&(r=!0)}else null!==e[0].match(/FILE_SCHEMA\s*\(\s*\(\s*\'\s*IFC4/)&&(r=!0)}if(1!=r)return console.error("this IFC file format is not supported"),(a=new c).setError("XCADLoader/XCADLoader","error.IFC_UNSUPPORT",null),a;var a,u=!0;for(o=0;o<e.length;o++)null!=e[o].match(/#\d+=[ ]*IFCTRIANGULATEDFACESET/)&&(u=!1);if(null==this.forceRead&&!0===u)return console.error("Only IFC file with tessellated data are supported"),(a=new c).setError("XCADLoader/XCADLoader","error.NO_TESSELLATION",null),a;for(o=0;o<e.length;o++)e[o]=e[o].replace(/\/\*(.*?)\*\//gm,""),e[o]=e[o].replace(/\r?\n/g,""),e[o]=e[o].split(";");this.forceRead=!1,t="";var d=this,l=[],h=[],f=[],g="",p=[],m=[],v=[],C=[],E=/^(#[0-9]+)\=(.+)$/,A=/^\w+/,D="";for(o=0;o<e.length;o++){D=e[o];for(var _=0;_<D.length;_++){var P=D[_].replace(/\/\*[\s\S-'$]*?\*\/|([^\\:]|^)\/\/.*|<!--[\s\S]*?-->$/,"");let t=[...P.matchAll(/'[^']+'/g)],e=0,i="",s=0;t.forEach((r=>{i+=P.substring(s,r.index).replace(/\s+/g,""),s=r.index+t[e][0].length,i+=t[e][0],e++})),i+=P.substring(s,P.length).replace(/\s+/g,"");for(var T=(P=i).test(/\/\*[\s\S-'$]*?\*\/|([^\\:]|^)\/\/.*|<!--[\s\S]*?-->$/);1==T;)T=(P=P.replace(/\/\*[\s\S-'$]*?\*\/|([^\\:]|^)\/\/.*|<!--[\s\S]*?-->$/,"")).test(/\/\*[\s\S-'$]*?\*\/|([^\\:]|^)\/\/.*|<!--[\s\S]*?-->$/);var I=P.match(E);if(null!==(I=P.match(E))){var R=I[2].match(A);if(null===R)continue;if(null===R)console.error("IFCInputDocument::initialize entityType is null for tokens : "+I);else{var y=I[1].substr(1);switch(this.ifcEntities[y]=I[2],R[0]){case"IFCSHAPEREPRESENTATION":var S=[];d.ifcTokenizeArgs(I[2],S);var b=S[2];"Tessellation"==(b=b.replace("'",""))&&this.tesselatedReps.push(I[1]);break;case"IFCPROJECT":g=y;break;case"IFCRELAGGREGATES":l.push(y);break;case"IFCINDEXEDCOLOURMAP":v.push(y);break;case"IFCRELCONTAINEDINSPATIALSTRUCTURE":h.push(y);break;case"IFCRELDEFINESBYTYPE":f.push(y);break;case"IFCALIGNMENT":C.push(y),console.log("aligment"),d.rootProducts2.push("#"+y)}}}}e[o].length=0}for(var N=0;N<v.length;N++)x(v[N]);function L(t,e){var i=[];if(d.ifcTokenizeArgs(d.ifcEntities[t],i),e){var s=i[4].substr(1);void 0===p[s]&&(p[s]=[]),p[s].push(t)}else{s=i[5].substr(1);void 0===m[s]&&(m[s]=[]),m[s].push(t)}}for(N=0;N<h.length;N++)L(h[N],!1);for(N=0;N<l.length;N++)L(l[N],!0);for(N=0;N<f.length;N++){let t=[];d.ifcTokenizeArgs(d.ifcEntities[f[N]],t);let e=t[4].substring(1,t[4].length-1).split(",");if(void 0!==d.ifcEntities[t[5].substr(1)]){let i=d.ifcEntities[t[5].substr(1)].substring(0,d.ifcEntities[t[5].substr(1)].indexOf("("));for(var k=0;k<e.length;k++)d.productTypeMapping[e[k].substr(1)]=i}}function x(t){var e=[],i=[];d.ifcTokenizeArgs(d.ifcEntities[t],i);var s=i[0].substr(1),r=i[2].substr(1),o=[];d.ifcTokenizeArgs(d.ifcEntities[r],o);var n=[];d.tokenizeComplexArgs(o[0],n);for(var c=0;c<n.length;c++)n[c]=n[c].replace(",(","("),d.ifcTokenizeArgs(n[c],e);d.bodyColors[s]=[e[0],e[1],e[2]]}function F(t){if(null!=t){var e={},i=t.substr(1),s=d._ifcGetEntityType(i);if(void 0!==s.first||void 0!==s.second){var r=[];if(d.ifcTokenizeArgs(d.ifcEntities[i],r),null==r[1])return;var o=r[1].substr(1),c=[];if(d.ifcTokenizeArgs(d.ifcEntities[o],c),c.length<3)return;var a=[],u=[],l=[],h=[];c[0]=c[0].substr(1),c[1]=c[1].substr(1),c[2]=c[2].substr(1),d.ifcTokenizeArgs(d.ifcEntities[c[0]],a),d.ifcTokenizeArgs(a[0],u),d.ifcTokenizeArgs(d.ifcEntities[c[1]],a),d.ifcTokenizeArgs(a[0],l),d.ifcTokenizeArgs(d.ifcEntities[c[2]],a),d.ifcTokenizeArgs(a[0],h),e.rotation=new n.Matrix3;var f=new n.Vector3(l[0],l[1],l[2]),g=new n.Vector3(h[0],h[1],h[2]),p=new n.Vector3;return p.crossVectors(f,g),e.rotation.set(h[0],h[1],h[2],p.x,p.y,p.z,l[0],l[1],l[2]),e.translation=new n.Vector3(parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])),e}}}!function t(e,i,s=!1){var r="#"+e,o="#"+i,n=[];d.ifcTokenizeArgs(d.ifcEntities[e],n);var c=[];d.ifcTokenizeArgs(d.ifcEntities[i],c);d._ifcGetEntityType(e),d._ifcGetEntityType(i);var a=n[2],u=c[2];if(0==s){let t=!1;if(null==i&&(t=!0,d.rootProducts2.push("#"+e)),d.assyProducts2[e]={referenceName:a,isRoot:t,childrenList:[],geomRep:void 0},!t){var l={instanceName:a,productReferenceIdx:"#"+e,transfo:X=F(n[5])};d.assyProducts2[i].childrenList.push(l)}}var h=p[e],f=m[e],g=0,v=0,C=0;0==s&&void 0!==f&&void 0!==h&&t(e,i,!0);0==s&&void 0!==f?(g=5,v=4,C=f):void 0!==h&&(g=4,v=5,C=h);if(0!==g&&0!==C&&null!=n[5]&&null!=n[6]){var E=n[5].substr(1),A=d._ifcGetEntityType(E);if(void 0!==A.first||void 0!==A.second){var D=n[6].substr(1);if(void 0!==(H=d._ifcGetEntityType(D)).first||void 0!==H.second){var _=[];d.ifcTokenizeArgs(d.ifcEntities[D],_);var P=[],T=_[2];d.tokenizeArrayArgs(T,P);for(var I=0;I<P.length;I++){var R=P[I].substr(1),y=[];d.ifcTokenizeArgs(d.ifcEntities[R],y);var S=void 0;switch(B=(B=y[2]).replace("'","")){case"MappedRepresentation":var b=[];d.ifcTokenizeArgs(d.ifcEntities[R],b);var N=b[3].substr(2,b[3].length-3),L=[];d.ifcTokenizeArgs(d.ifcEntities[N],L);var k=L[0].substr(1),x=[];d.ifcTokenizeArgs(d.ifcEntities[k],x);var z=x[1].substr(1),w=[];d.ifcTokenizeArgs(d.ifcEntities[z],w),S=x[1];break;case"Tessellation":S=P[I]}r in d.assyProducts?d.assyProducts[r].geomRep={type:void 0,location:S}:0==d.rootProducts.length?(d.assyProducts[r]={referenceName:a,isRoot:!0,childrenList:[],geomRep:{type:void 0,location:S}},d.rootProducts.push(r)):d.assyProducts[r]={referenceName:a,isRoot:!1,childrenList:[],geomRep:{type:void 0,location:S}}}}else{var X=F(n[5]);if(0==d.rootProducts.length?(d.assyProducts[r]={referenceName:a,isRoot:!0,childrenList:[],geomRep:void 0},d.rootProducts.push(r)):d.assyProducts[r]={referenceName:a,isRoot:!1,childrenList:[],geomRep:void 0},o in d.assyProducts){l={instanceName:a,productReferenceIdx:r,transfo:X};d.assyProducts[o].childrenList.push(l)}}}for(var O=0;O<C.length;O++){var G=[];d.ifcTokenizeArgs(d.ifcEntities[C[O]],G);var V=[],M=G[v];d.tokenizeArrayArgs(M,V);var U=[];for(I=0;I<V.length;I++){var $=V[I].substr(1),K=d._ifcGetEntityType($);d.ifcTokenizeArgs(d.ifcEntities[$],U);K.first;t($,e)}}}else{var H=void 0;if(null!=n[6]){D=n[6].substr(1);H=d._ifcGetEntityType(D)}if(!H||void 0===H.first&&void 0===H.second){X=F(n[5]);if(0==d.rootProducts.length?(d.assyProducts[r]={referenceName:a,isRoot:!0,childrenList:[],geomRep:void 0},d.rootProducts.push(r)):d.assyProducts[r]={referenceName:a,isRoot:!1,childrenList:[],geomRep:void 0},o in d.assyProducts){l={instanceName:a,productReferenceIdx:r,transfo:X};d.assyProducts[o].childrenList.push(l)}}else{o in d.assyProducts||(0==d.rootProducts.length?(d.assyProducts[o]={referenceName:u,isRoot:!0,childrenList:[],geomRep:void 0},d.rootProducts.push(o)):d.assyProducts[o]={referenceName:u,isRoot:!1,childrenList:[],geomRep:void 0});_=[];d.ifcTokenizeArgs(d.ifcEntities[D],_);P=[],T=_[2];null!=_[2]&&d.tokenizeArrayArgs(T,P);for(I=0;I<P.length;I++){var B;R=P[I].substr(1),y=[];d.ifcTokenizeArgs(d.ifcEntities[R],y),null!=(B=y[2])&&(B=B.replace("'",""));S=void 0;switch(B){case"MappedRepresentation":b=[];d.ifcTokenizeArgs(d.ifcEntities[R],b);let t=(N=b[3].substr(2,b[3].length-3)).split(",");t.length>1&&(N=t[0]);L=[];d.ifcTokenizeArgs(d.ifcEntities[N],L);k=L[0].substr(1),x=[];d.ifcTokenizeArgs(d.ifcEntities[k],x);z=x[1].substr(1),w=[];d.ifcTokenizeArgs(d.ifcEntities[z],w),S=x[1];break;case"Tessellation":S=P[I]}if(r in d.assyProducts){d.assyProducts[r].isRoot=!1;var J=d.rootProducts.indexOf(r);-1!=J&&d.rootProducts.splice(J,1)}else d.assyProducts[r]={referenceName:a,isRoot:!1,childrenList:[],geomRep:{type:void 0,location:S}}}var X=F(n[5]);o in d.assyProducts&&d.assyProducts[o].childrenList.push({instanceName:a,productReferenceIdx:r,transfo:X}),d.assyProducts[r]&&void 0!==d.assyProducts[r].geomRep&&d.nbInstPart++}}}(g,void 0)}})}));