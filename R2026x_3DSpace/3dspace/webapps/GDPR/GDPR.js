define("DS/GDPR/Store",(function(){"use strict";String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var e="TC_PRIVACY",t=["status","privacyVersion","consentCategories","blockedOnCategories","creationTimestamp"],n=["necessary","functional","advertising"],o="%40",r="%2C",i={status:0,privacyVersion:"001",consentCategories:[],blockedOnCategories:1,creationTimestamp:Date.now()},a={getTopDomain:function(){var e,t=window.location.hostname,n="";if(window&&void 0!==window.electron)n=t;else if(!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(t)&&"localhost"!==t){for(e=t.split(".");e.length>2;)e.shift();n=e.join(".")}return n},getCookie:function(e){var t,n,o=[];try{o=document.cookie.split("; ")}catch(e){}return(t=o.filter((function(t){return t.split("=")[0]===e}))).length&&(n=t[0].split("=")[1]),n},setCookie:function(e,t,n,o){var r=new Date,i=new Date(r.setMonth(r.getMonth()+o)),a=e+"="+t;n&&(a+="; domain="+n),a+="; path=/",o&&(a+="; expires="+i.toUTCString()),a+="; Priority=High",document.cookie=a},getIndexFromRank:function(e){if(e=parseInt(e,10),Number.isInteger(e))return e-1;throw new Error("GDPR > Store : Cookie rank must be an integer")},getRankFromType:function(e){var t,o=0;for(t=n.length-1;t>=0;t--)if(n[t]===e){o=t+1;break}return o},decode:function(e,t){var o=t.includes(r)?t.split(r):t;if("consentCategories"===e)if(t)if(Array.isArray(o))o=o.map((function(e){var t=a.getIndexFromRank(e);return n[t]}));else{var i=a.getIndexFromRank(t);o=i?[n[i]]:o}else o=[n[0]];return o},encode:function(e){var n=a.getModel(),o="";return n.consentCategories=e.map((function(e){return a.getRankFromType(e)})),t.forEach((function(e){o+=n[e]+"@"})),o=o.replaceAll(",",r)},getModel:function(){var n=a.getCookie(e),r=[],s={...i};if(n){var c=n.indexOf(o)>=0?o:"@";r=n.split(c)}return r.forEach((function(e,n){var o=t[n];s[o]=a.decode(o,e)})),s},saveModel:function(t){var n,o=t.consents,r=t.domain||a.getTopDomain();Array.isArray(o)&&r&&(n=a.encode(o),a.setCookie(e,n,r,6))},validateCookie:function(){var n,s,c=a.getCookie(e);if(!c)return!1;var d,l,u=c.indexOf(o)>=0?o:"@",p=c.split(u);return(s=p.length-1===t.length&&parseInt(p[0],10)===i.status&&p[1]===i.privacyVersion&&parseInt(p[3],10)===i.blockedOnCategories&&(l=p[2].split(r).map(Number),Array.isArray(l)&&l.every((e=>0===e||2===e||3===e)))&&(d=parseInt(p[4],10),!isNaN(d)&&new Date(d).getFullYear()>2020))||(n=a.getTopDomain()||"3ds.com",a.setCookie(e,"",n,-1)),s}};return{get:a.getModel,save:a.saveModel,isEmpty:function(){return!a.getCookie(e)},getConsentCategories:function(){return this.get().consentCategories},isValid:function(){return!!a.validateCookie()}}})),define("DS/GDPR/Modal",["UWA/Core","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/Handlebars/Handlebars","DS/GDPR/Store","text!DS/GDPR/assets/templates/read/content.html","text!DS/GDPR/assets/templates/update/content.html","i18n!DS/GDPR/assets/nls/GDPR","css!DS/GDPR/GDPR"],(function(e,t,n,o,r,i,a,s){"use strict";var c,d,l;return d={replace:function(e,t){return e.replace(/\{([\w-]+)\}/g,(function(e,n){return void 0!==t[n]?t[n]:""}))}},c={read:function(){c._buildRead()},update:function(){c._buildUpdate()},close:function(){l.hide(),c.destroy()},destroy:function(){l&&(l.destroy(),l=null)},_build:function(e){var n;c.destroy(),(l=new t({className:["gdpr-modal",e.type].join(" "),closable:!1,escapeToClose:!1}).inject(document.body)).hide(),l.setHeader(e.header),l.setBody(e.body),(n=l.getFooter()).empty(),e.btns.forEach((function(e){e.inject(n)})),e.hideOverlay&&l.elements.overlay.classList.add("hide"),l.show()},_buildRead:function(){var t,a,l,u,p;c._build({type:"read",header:(a=e.createElement("div",{class:"title"}),l=e.createElement("h3",{class:"heading",text:s.readHeader}),u=e.createElement("span",{class:"fonticon fonticon-chevron-right"}),p=e.createElement("p",{class:"refuse",text:s.continueNecessaryCookie,events:{click:function(){r.save({consents:[]}),c.close()}}}),u.inject(p,"top"),p.inject(a,"top"),l.inject(a,"top"),a),body:o.compile(i)({content:s.readBodyContent,preferences:d.replace(s.readBodyPreferences,{privacyPolicyLink:"https://www.3ds.com/privacy-policy"})}),btns:(t=new n({value:s.managePreferences,events:{onClick:c.update}}),[new n({value:s.acceptAll,className:"primary",events:{onClick:function(){r.save({consents:["functional","advertising"]}),c.close()}}}),t]),hideOverlay:!0})},_buildUpdate:function(){var t;c._build({type:"update",header:"<h3>"+s.updateHeader+"</h3>",body:(t=r.get().consentCategories.reduce((function(e,t){return e[t]=!0,e}),{}),o.compile(a)(e.merge(e.merge(t,{updateBodyNecessaryCookies:d.replace(s.updateBodyNecessaryCookies,{necessaryCookiesUsedLink:"https://www.3ds.com/cookies/#Brick-a3c64c4e-23b5-4dd6-a626-d6058ced87f9"}),updateBodyFunctionalCookies:d.replace(s.updateBodyFunctionalCookies,{functionalCookiesUsedLink:"https://3ds.com/cookies/#Brick-4775c9d2-985d-43ca-86fb-36c99f870abd"}),seeListCookiesUsage:d.replace(s.seeListCookiesUsage,{cookiesUsedLink:"https://www.3ds.com/cookies/#Brick-f079cc59-1afc-489b-8968-547ffdf5c234"})}),s))),btns:[new n({value:s.savePreferences,className:"primary",events:{onClick:function(){var e=l.getBody().getElements(".cookie:checked").map((function(e){return e.value}));r.save({consents:e}),c.close()}}})],hideOverlay:!1})}}})),define("DS/GDPR/GDPR",["DS/GDPR/Modal","DS/GDPR/Store"],(function(e,t){"use strict";return{init:function(){!t.isEmpty()&&t.isValid()||this.start()},start:function(){e.read()}}}));