define("DS/XSRCommonComponents/facets/template/ReleaseSnapshotFacetView",["DS/WUXAutoComplete/AutoComplete","DS/XSRCommonComponents/utils/XInfraRequestUtil","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Controls/TooltipModel","i18n!DS/XSRCommonComponents/assets/nls/XSRCommonComponents"],(function(e,t,l,a,o,n){"use strict";return class{constructor(e){this.selectedType=e.type,this.validateFacet=e.onViewChange}build(){var t=this;t.treeDoc=new l;var a=UWA.createElement("div",{class:"xsr-plmnew-container",id:"ReleaseSnapshotCont"}),s=UWA.createElement("div",{class:"xsr-plmnew-autocomplete-container"});s.inject(a);var r=UWA.createElement("div",{class:"xsr-plmnew-autocomplete-label"}),p=UWA.createElement("label",{id:"xsr-plmnew-label"});p.innerText=n.label_Template,p.inject(r),p.tooltipInfos=new o({shortHelp:n.label_Template});var c=UWA.createElement("div",{class:"xsr-attrMand"});c.innerText="*",c.inject(r),r.inject(s);var i=UWA.createElement("div",{class:"xsr-plmnew-autocomplete-line"});return this.templateField=new e({domId:"xsr-template-auto-complete",placeholder:n.placholder_template,multiSearchMode:!1,elementsTree:t.treeDoc,allowFreeInputFlag:!1,allowResetToUndefinedByUIFlag:!1,keepSearchResultsFlag:!1}),this.templateField.inject(i),i.inject(s),this.templateField.addEventListener("change",(function(e){t.validateFacet()})),this.loadTemplate(this.selectedType),a}loadTemplate(e){this.templateField.value=void 0;var l=this;new t({id:"getSpecTemplates"}).invoke({data:{specType:e}}).then((e=>{var t=e.response;l.treeDoc.prepareUpdate(),l.treeDoc.empty(),Object.keys(t).forEach((function(e){var a=l.createNode(t[e].labelItem,t[e].valueItem);l.treeDoc.addRoot(a)})),l.treeDoc.pushUpdate(),t&&t.length>0?l.templateField.placeholder=n.placholder_template:l.templateField.placeholder=n.NoTemplateResults})).catch((e=>{console.log(e),l.templateField.placeholder=n.NoTemplateResults}))}getSelectedTemplate(){return this.templateField.value}createNode(e,t){return new a({label:e,value:t,tooltip:new o({shortHelp:e}),grid:{}})}}}));