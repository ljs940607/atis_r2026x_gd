define("DS/XSRCommonComponents/service/XSpecsCommonMenuBuilder",["UWA/Class","UWA/Promise","DS/Menu/Menu","DS/XSRCommonComponents/utils/Utils","DS/XSRCommonComponents/utils/OpenWithMenuProvider","DS/XSRCommonComponents/service/XSpecsActionsFactory","DS/XSRCommonComponents/service/CommandsService","DS/XSRCommonComponents/utils/RequestUtil","i18n!DS/XSRCommonComponents/assets/nls/XSRCommonComponents"],(function(t,e,n,o,i,s,a,u,m){"use strict";return t.singleton({MENU_KEY:{spec_mat_dsmat:["OpenWith","ReleaseBioMaterial","View3DSMaterialnformation"],spec_mat_dsmat_multisel:[],spec_mat_plm:["RemoveChild","RelatedObjects","Information"],spec_mat_plm_multisel:[],spec_mat_dsplmmat:["OpenWith","ReleaseBioMaterial","View3DSMaterialnformation",{TitleItem:m.label_PLMMaterial},"SeparatorItem","RelatedObjects","Information"],spec_mat_dsplmmat_multisel:[],copy_content:["RemoveMasterCopy","MasterCopyMaturity","RelatedObjects","Information","ViewContentInformation","DeleteMasterCopy"],copy_content_multisel:["RemoveMasterCopy"]},init(t){this._parent(t)},async getActionMenu(t,e,n){var o=this;if(t&&t.data&&t.data.length>1&&(n+="_multisel"),o.appsList=await i.getOpenWithMenu(t),!e)return this._getMenuList(t,n);this._getMenuList(t,n).then((function(t){o.showMenu(e,t)}))},async _getMenuList(t,n){var o=this;return new e((function(e,i){var a=o.MENU_KEY[n],u=[];a.forEach((async e=>{"string"!=typeof e?u.push({type:"TitleItem",title:e.TitleItem}):"SeparatorItem"===e?u.push({type:"SeparatorItem"}):"OpenWith"===e?o.appsList&&o.appsList.length>0&&u.push(o._buildMenuGroup(s.getActionMetaData(e),"PushItem","",o.appsList)):u.push(o._buildMenuEntry(s.getActionMetaData(e),"PushItem",e,t))})),e(u)}))},showMenu(t,e){t&&Array.isArray(e)&&n.show(e,{position:{x:t.x?t.x:t.left,y:t.y?t.y:t.bottom}})},_buildMenuEntry(t,e,n,i){var c,r;u.isSafarionIPadorPod()?(r=t.touchFonticon?t.touchFonticon:t.fonticon,c=t.touch_nls_key?t.touch_nls_key:t.nls_key,t.touchIcon&&o.getIconFormXSR(t.touchIcon)):(r=t.fonticon,c=t.nls_key,t.icon);var l={title:m[c],type:e,state:a.getCmdDisplayState(n,i),action:{this:this,callback:function(e){s.fireAction(t,i)}}};return l.fonticon={family:"DSFontIcon",content:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-"+r},l},_buildMenuGroup(t,e,n,i){var s,a=t.nls_key;u.isSafarionIPadorPod()?(s=t.touchFonticon?t.touchFonticon:t.fonticon,a=t.touch_nls_key?t.touch_nls_key:t.nls_key,t.touchIcon&&o.getIconFormXSR(t.touchIcon)):(s=t.fonticon,a=t.nls_key);var c={title:m[a],type:e,submenu:i,state:n};return c.fonticon={family:"DSFontIcon",content:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-"+s},c}})}));