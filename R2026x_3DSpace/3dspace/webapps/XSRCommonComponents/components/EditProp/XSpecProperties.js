define("DS/XSRCommonComponents/components/EditProp/XSpecProperties",["UWA/Core","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel","DS/XSRCommonComponents/utils/Constants","DS/XSRCommonComponents/utils/RequestUtil","DS/XSRCommonComponents/utils/Notification","DS/XSRCommonComponents/utils/Utils","DS/XSRCommonComponents/utils/TypeUtils","i18n!DS/XSRCommonComponents/assets/nls/XSRCommonComponents","css!DS/XSRCommonComponents/components/EditProp/XSpecProperties.css"],(function(e,t,i,o,s,a,n,c,r,p){"use strict";var l={Change:i.FACET_CHANGE,Properties:i.FACET_PROPERTIES,Comments:i.FACET_SWYMCOMMENTS,Sharing:i.FACET_SHARING,History:i.FACET_GENERALHISTORY,Files:i.FACET_FILES},d=function(){};return d.prototype.init=function(o){this.selectedItemID=o.id;var n=o.container;this.appCore=o.appCore,this.mfgSecurityContext=a.getSecurityContext().replace("ctx::","");var c=this,r=o.specModel;this.specModel=r;var d=!!o.readOnly&&o.readOnly,m=!!o.editMode&&o.editMode,u=o.execludeIDCard,C=[];if(o.facets)for(var S=o.facets.length,f=0;f<S;f++)if("Change"===o.facets[f]){if("Document"===this.specModel.options.grid["ds6w:type"])continue;C.push({id:i.FACET_CHANGE,options:{readOnly:!o.enableChangeRequired}})}else"Classifications"===o.facets[f]?C.push({require:"DS/ClassificationsFacet/ClassificationFacet",alwaysVisible:!1,facet:{name:"Classification",text:p.label_Classification,icon:"classification-book"},options:{securityContext:this.mfgSecurityContext}}):C.push({id:l[o.facets[f]]});else C.push(i.FACET_PROPERTIES),C.push(i.FACET_SWYMCOMMENTS),C.push(i.FACET_SHARING);c.container=e.createElement("div",{class:"xsr-properties-container"}),c.container.inject(n);var h=u?i.ONLY_EDIT_PROPERTIES:i.ALL,M=a.getSecurityContext().replace("ctx::",""),y={typeOfDisplay:h,selectionType:i.NO_SELECTION,facets:C,readOnly:d,extraNotif:!0,editMode:m,appId:s.XSR_APP_ID,events:{onNotification:function(e){c._notifyMessage(e.msg,e.eventID)}},context:{getSecurityContext:function(){return{SecurityContext:M}}}};c.editPropView=new t(y);var E=c.getPropModel(o);return c.editPropView.initDatas(E),c.editPropView.elements.container.inject(c.container),c.editPropView.elements.container.onResize(),c.editPropView},d.prototype._addCustomFacet=function(e,t){var i=!1;if(this.specModel&&this.specModel.getTypeActualName()&&(t==s.IDCARD||r.isRawMaterial(this.specModel.getTypeActualName())||r.isFormulatedProduct(this.specModel.getTypeActualName())?(r.isRawMaterial(this.specModel.getTypeActualName())||r.isFormulatedProduct(this.specModel.getTypeActualName()))&&(i=!1):i=!0),c.isPerformanceChar(this.specModel.getTypeActualName()))this.editPropView.addFacets([{require:"DS/ENOCharacteristicsApp/view/TestMethodFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"testMethods",icon:"molecule-candidate",text:p.label_TestMethod},options:{appContext:e,itemModel:this.specModel,itemId:this.selectedItemID,appId:s.XSR_APP_ID}},{require:"DS/ENOCharacteristicsApp/view/TestMethodFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"requirements",icon:"requirement-insert",text:p.label_Requirement},options:{appContext:e,itemModel:this.specModel,itemId:this.selectedItemID,appId:s.XSR_APP_ID}}]);else{this.specModel.getAttributeValue("isMEI")||this.editPropView.addFacets([{require:"DS/ENOXAlternateSubstitute/facets/AlternateFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"alternateFacet",icon:"exchange",text:p.label_Alternates},options:{appContext:e}}]);const t=[{require:"DS/DELPPWFacets/facets/ManufacturingIntentFacet",inheritance:!0,alwaysVisible:!0,services:["3DSpace"],actions:[{name:"Add",text:p.Add,icon:"fonticon fonticon-plus"}],content:null,facet:{name:"ManufactureIntent",icon:"factory",text:p.Manufacture_Facet_Title},options:{appContext:e,securityContext:this.mfgSecurityContext,immersiveFrame:e.immersiveFrame}},{require:"DS/ClassificationsFacet/ClassificationFacet",alwaysVisible:!0,facet:{name:"Classification",text:p.label_Classification,icon:"classification-book"},options:{securityContext:this.mfgSecurityContext}}];r.isRawMaterial(this.specModel.getTypeActualName())||r.isFormulatedProduct(this.specModel.getTypeActualName())||t.splice(1,0,{require:"DS/ENOMadeFromUX/view/MBMFFacet",alwaysVisible:i,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"specsMadeFromFacet",icon:"part-made-from",text:p.label_MakeFrom},options:{appContext:e,itemModel:this.specModel,SecurityContext:this.mfgSecurityContext,itemId:this.selectedItemID,appId:s.XSR_APP_ID}}),this.editPropView.addFacets(t)}},d.prototype.getPropModel=function(e){var t=null,i=[],n={};return e.i3dx&&(n.i3dx=e.i3dx,n.sourceName=e.sourceName,n.bioMaterialId=e.bioMaterialId),n.metatype=e.metatype||"businessobject",n.objectId=e.id,n.tenant=a.getPlatformId(),n.source=s.SERVICE_3DSPACE_NAME,i.push(n),(t=new o(i)).set("isTransient",!1),t.set("showSections",!1),i},d.prototype._notifyMessage=function(e,t){this.appCore&&!this.appCore.triptychManager.isRightPanelOpen()&&n.displayNotification({eventID:t,msg:e})},d.prototype.destroy=function(){},d}));