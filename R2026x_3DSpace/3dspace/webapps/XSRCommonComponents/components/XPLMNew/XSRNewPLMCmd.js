define("DS/XSRCommonComponents/components/XPLMNew/XSRNewPLMCmd",["DS/ENONewWidget/ENONew/Events","DS/ENONewWidget/command/NewContentCommandBase","DS/XSRCommonComponents/components/XPLMNew/XSRNewContentOptions","DS/XSRCommonComponents/utils/XSRMask","DS/XSRCommonComponents/utils/RequestUtil"],(function(e,t,n,i,o){"use strict";const s="tabView";return t.extend({XSR_FACET_MAP:{CALSSIFICATION_FACET:"classificationFacet",RELEASE_SNAP_TEMP_FACET:"releaseSnapshotFacet",MATERIAL_FACET:"MaterialFacet"},init:function(t){this.typeDB=t.typeDB,this.newType=t.newType,this.dialogHeader=t.dialogHeader,this.parentId=t.parentId?[t.parentId]:[],this.callbacks=t.callbacks,this.facetsKey=t.facetsKey,this.dAttrs=t.domainAttributes&&t.domainAttributes.length>0?t.domainAttributes:[],e.addEvent("onCreationDialogAction",(function(e){e&&"ready"===e.action&&i.unmaskLoader(widget.body)})),this._parent(t)},getType(){return this.newType},execute:function(){i.maskLoader(widget.body);var e=this.getCreateOptions();this.launchCreateNew(e)},getHeaders:function(){var e={SecurityContext:o.getSecurityContext()};return o.getWorkUnderHeaders()&&Object.assign(e,o.getWorkUnderHeaders()),e},getOptions:function(){var e=this;const t=(()=>{const e={header:{SecurityContext:o.getSecurityContext()},tenant:o.getPlatformId(),service:"",serviceBaseUrl:""};return Object.assign(e.header,o.getWorkUnderHeaders()),e})(),i=n.getFactesArr(this.facetsKey,this.typeDB);return{id:widget.id,context:t,silentMode:!1,notification:!0,type:e.typeDB,options:{preferedType:e.typeDB,parentPIDs:e.parentId,parentOrigin:[],domainAttributes:this.dAttrs},events:{onSuccess:e.callbacks.onSuccess.bind(this),onFailure:e.callbacks.onFailure.bind(this),onCancel:t=>{console.log("Dialog closed"),e.callbacks=void 0}},viewType:s,labelTopBar:e.dialogHeader,facets:i}}})}));