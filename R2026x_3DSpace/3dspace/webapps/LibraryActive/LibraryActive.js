define("DS/LibraryActive/service/LibraryTypeService",["UWA/Controls/Abstract"],(function(e,t){return e.singleton({TYPE_ROOT_LIBRARY_1:"General Library",TYPE_ROOT_LIBRARY_2:"Part Library",TYPE_ROOT_LIBRARY_3:"RootLibrary",TYPE_LIBRARY_1:"General Class",TYPE_LIBRARY_2:"Library",TYPE_LIBRARIES_SECTION:"LibrarySection_AllLibraries",TYPE_FAVORITES_SECTION:"LibrarySection_favorite",init:function(){},isRootLibrary:function(e){return e===this.TYPE_ROOT_LIBRARY_1||e===this.TYPE_ROOT_LIBRARY_2||e===this.TYPE_ROOT_LIBRARY_3},isLibrary:function(e){return e===this.TYPE_LIBRARY_1||e===this.TYPE_LIBRARY_2},inFamilyLibrary:function(e){return this.isRootLibrary(e)||this.isLibrary(e)},isSection:function(e){return e===this.TYPE_LIBRARIES_SECTION||e===this.TYPE_FAVORITES_SECTION}})})),define("DS/LibraryActive/commands/LibraryActiveCommands",["i18n!DS/LibraryActive/assets/nls/LibraryActive","DS/WidgetServices/WidgetServices","DS/WebappsUtils/WebappsUtils"],(function(e,t,i){"use strict";return{ExpandAllCmd:function(e,t){e.plmType;var i=[];"TREE"===t&&e&&i.push(e),i.length&&i.forEach((function(e){null===e.options.children||("TREE"===t||"Folder"===e.plmType||"LibrarySection_AllLibraries"===e.plmType?e.expand({expandLevel:"All"}):e.expandAll())}))},CollapseAllCmd:function(e,t){e.plmType;var i=[];"TREE"===t&&e&&i.push(e),i.length&&i.forEach((function(e){e.collapseAll()}))},_addCtxCmd:function(e,i,n,r){var a=!1;("separator"===n.type||!1!==n.spaceAvailability)&&(a=!0),a&&(t.isWebInWinEnvironment()&&!1===n.webInWinAvailability&&(a=!1),t.isWebInWinEnvironment()||!1!==n.dashboardAvailability||(a=!1)),a&&(r&&("separator"!==r.type||i.length>0)&&i.push(r),i.push(n))},GetContextualMenu:function(t,n){var r,a=this,s=[],o=!!t.white_Click&&t.white_Click;if(void 0===(r=!0===o?r=Folder_CSO.getCurrentFolder():t.nodeModel)&&(r=t),r.isFavorite)return s;var l={id:"cmd-expandAll",label:e.CMDExpandAll,icon:"url("+i.getWebappsAssetUrl("IPClassifyNav","icons/32/I_ExpandAll.png")+")",callback:function(){a.ExpandAllCmd(r,n)},searchAvailability:!0},c={id:"cmd-collapseAll",label:e.CMDCollapseAll,icon:"url("+i.getWebappsAssetUrl("IPClassifyNav","icons/32/I_CollapseAll.png")+")",callback:function(){a.CollapseAllCmd(r,n)},searchAvailability:!0};return this._addCtxCmd(n,s,l,{type:"separator"}),this._addCtxCmd(n,s,c),s}}})),define("DS/LibraryActive/service/LibraryActiveWebService",["DS/WAFData/WAFData","DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADUtilsServices","DS/WidgetServices/WidgetServices","DS/ClassificationProp/utils/ClassifPropControl"],(function(e,t,i,n,r){"use strict";return{favourites:function(e){this._performFetchQuery(e)},get3DSpaceUrl:function(){return new Promise((function(e,t){n.get3DSpaceUrlAsync({onComplete:function(t){e(t)},onFailure:function(e){t(e)}})}))},_performFetchQuery:function(e){var i=this;if(!UWA.is(e,"object"))throw new Error("Invalid inputs for LibraryActiveWebService._performFetchQuery");i.get3DSpaceUrl().then((function(n){var a={};UWA.extend(a,e);var s=t.getSetting("pad_security_ctx")||r.getContext(),o=n+"/cvservlet/fetch/v2";o+="?SecurityContext="+encodeURIComponent(s);var l=widget.lang?widget.lang:widget.getValue("lang");a.payload={},a.payload.physicalid=a.ids,a.payload.select_predicate=["ds6w:label","ds6w:type","physicalid","ds6w:classificationUsage"];var c=new Date,d=window.top.dsUserLogin?window.top.dsUserLogin:"unknown";return a.payload.label=("LibraryActiveFetch_"+d+"_"+c.getTime()).replace(new RegExp(" ","g"),"_").replace(new RegExp(",","g"),"").replace(new RegExp("/","g"),"-"),a.method="POST",a.headers={Accept:"application/json","content-type":"application/json","Accept-Language":l},a.type="json",a.data=UWA.Json.encode(a.payload),i._executeRequest(o,a,"Fetch")}))},performMultiClassify:function(e){var i=this;if(!UWA.is(e,"object")||!e.data)throw new Error("Invalid inputs for LibraryActiveWebService._performMultiClassify");i.get3DSpaceUrl().then((function(n){var r={};UWA.extend(r,e);var a=null;e.plmNewContextProvider&&"function"==typeof e.plmNewContextProvider&&(a=e.plmNewContextProvider()),a=a||t.getSetting("pad_security_ctx");var s=n+"/resources/IPClassificationReuse/classifiedItem/addMultipleClassification";s+="?SecurityContext="+encodeURIComponent(a);var o=widget.lang?widget.lang:widget.getValue("lang");r.payload={Classes:r.data.Classifications,ClassifyItems:r.data.ItemsToClassify};var l=new Date,c=window.top.dsUserLogin?window.top.dsUserLogin:"unknown";return r.payload.label=("LibraryActiveMultiClassify_"+c+"_"+l.getTime()).replace(new RegExp(" ","g"),"_").replace(new RegExp(",","g"),"").replace(new RegExp("/","g"),"-"),r.method="POST",r.headers={Accept:"application/json","content-type":"application/json","Accept-Language":o,SecurityContext:a},r.type="json",r.data=UWA.Json.encode(r.payload),i._executeRequest(s,r,"performMultiClassify")}))},fetchObjectsForFindInTree:function(e){var r=[];if(r.push(new Promise((function(e,t){n.get3DSearchUrlAsync({onComplete:function(t){e(t)},onFailure:function(e){t(e)}})}))),this.getSecurityContext()||r.push(this.initSecurityContext()),!UWA.is(e,"object"))throw new Error("Invalid inputs for LibraryActiveWebService.fetchObjectsForFindInTree");var a=this,s={};UWA.extend(s,e),Promise.allSettled(r).then((function(n){var r,o=n[0].value+"/search",l=widget.lang?widget.lang:widget.getValue("lang");s.payload={},s.payload.locale=l,e.searchFTSquery&&(s.payload.query='[ds6w:label]: "*'+((r=e.searchFTSquery).startsWith("*")&&(r=r.slice(1)),r.endsWith("*")&&(r=r.slice(0,-1)),r+'*"')),e.rscIdToSearch&&(s.payload.query="physicalid:"+e.rscIdToSearch),s.payload.select_bo=["physicalid","ds6w:type","ds6w:globalType","ds6w:label"],"LibrarySection_AllLibraries"===e.type?s.payload.specific_source_parameter={"3dspace":{search_in_context:{expand:{root_path_physicalid:e.pid,type_filter_rel:["Subclass"]}}}}:s.payload.specific_source_parameter={"3dspace":{search_in_context:{expand:{root_physicalid:e.pid,type_filter_rel:["Subclass"]}}}},s.payload.refine={"ds6w:what/ds6w:status":[{object:"Classification.Inactive",type:"string",field:"internal",excluded:"true"},{object:"Libraries.Inactive",type:"string",field:"internal",excluded:"true"},{object:"Classification.InWork",type:"string",field:"internal",excluded:"true"},{object:"Libraries.InWork",type:"string",field:"internal",excluded:"true"}]},s.payload.nresults=100,s.payload.source=["3dspace"],s.payload.login={"3dspace":{SecurityContext:a._securityContext}};var c=new Date,d=window.top.dsUserLogin?window.top.dsUserLogin:"unknown";return s.payload.label=("LibraryActiveFetchObjectsForFindInTree_"+d+"_"+c.getTime()).replace(new RegExp(" ","g"),"_").replace(new RegExp(",","g"),"").replace(new RegExp("/","g"),"-"),s.timeout=12e4,s.method="POST",s.payload.tenant=i.getPlatformId()||t.getSetting("x3dPlatformId"),s.headers={Accept:"application/json","content-type":"application/json","Accept-Language":l,SecurityContext:t.getSetting("pad_security_ctx")},s.type="json",s.data=UWA.Json.encode(s.payload),a._executeRequest(o,s,"_fetchObjectsForFindInTree")}))},_executeRequest:function(t,i,n){var r=Math.round(1e3*Math.random()).toString(),a=widget.id+"_"+widget.getTitle()+"_";window.top.performance.mark("libraryRequest_begin"+r);var s={};return UWA.extend(s,i),UWA.is(s.onTimeout,"function")||(s.onTimeout=function(){s.onFailure({type:"timeout",toString:function(){return"Request timed out"}})},s.onComplete=function(e){window.top.performance.mark("libraryRequest_end"+r);var t=window.top.performance.getEntriesByName("libraryRequest_begin"+r);t&&1===t.length&&(window.top.performance.measure(a+"_Request"+n,"libraryRequest_begin"+r,"libraryRequest_end"+r),window.top.performance.clearMarks("libraryRequest_end"+r),window.top.performance.clearMarks("libraryRequest_begin"+r)),i.onComplete(e)}),e.authenticatedRequest(t,s)}}})),define("DS/LibraryActive/LibraryActive",["DS/IPClassifyActive/IPClassifyActive","DS/IPClassifyActive/utils/IPClassifyActiveUtil","DS/IPClassifyActive/service/IPClassifyActiveWebService","DS/LibraryActive/service/LibraryActiveWebService","i18n!DS/LibraryActive/assets/nls/LibraryActive","DS/WebappsUtils/WebappsUtils","DS/LibraryActive/commands/LibraryActiveCommands","DS/LibraryActive/service/LibraryTypeService","text!DS/LibraryActive/assets/LibraryActive_setting.json","DS/IPClassifyUtil/IPClassifyUtility","DS/IPClassifyUtil/IPClassifyPreference","DS/WidgetServices/WidgetServices","i18n!DS/LibraryActive/assets/nls/LibraryActiveFindInTree","DS/ClassificationProp/utils/ClassifPropControl"],(function(e,t,i,n,r,a,s,o,l,c,d,u,p,y){"use strict";var f=a.getWebappsAssetUrl("LibraryEditor","icons/librarysectionall.png"),v=a.getWebappsAssetUrl("LibraryEditor","icons/libraryfavorites.png");return e.extend({name:"LibraryActive",_rootNodeFavorite:null,_rootNodeFolders:null,_rootNodeTrash:null,_requestInfo:{},_searchKeys:{},_pathInfo:{},_subBookmarkExpand:{},_favoriteSection:o.TYPE_FAVORITES_SECTION,_allSection:o.TYPE_LIBRARIES_SECTION,_supportedTypesForDropAtFindIn:["General Class"],_findInTreeNLS:p,init:function(e){if(this._LibraryActiveWebService=Object.assign({},i),this._LibraryActiveWebService.fetchObjectsForFindInTree=n.fetchObjectsForFindInTree,this._LibraryActiveWebService.performMultiClassify=n.performMultiClassify,this._LibraryActiveWebService.getSearchQuery=function(){if(e.multiSelectionComponent&&e.multiSelectionComponent.rootLibraries){var t=e.multiSelectionComponent.rootLibraries;if(Array.isArray(t)&&t.length>0){var i="";return t.forEach((function(e){i=i?i+" OR "+e:e})),"physicalid: ("+i+') AND flattenedtaxonomies:"types/General Library"'}return'flattenedtaxonomies:"types/General Library"'}if(y.getSearchQueryFilter()){return'((flattenedtaxonomies:"types/General Library")) AND ([ds6w:classificationUsage]:'+y.getSearchQueryFilter()+")"}return'flattenedtaxonomies:"types/General Library"'},this._LibraryActiveWebService.navigatePathRelArray=function(){return["Subclass"]},this._LibraryActiveWebService.getType_filter_bo=function(){return["General Library","General Class"]},e.isMaturityFilterDisabled||(this._LibraryActiveWebService.getRefineFilter=function(){return{"ds6w:what/ds6w:status":[{object:"Classification.Inactive",type:"string",field:"internal",excluded:"true"},{object:"Libraries.Inactive",type:"string",field:"internal",excluded:"true"},{object:"Classification.InWork",type:"string",field:"internal",excluded:"true"},{object:"Libraries.InWork",type:"string",field:"internal",excluded:"true"}]}},this._LibraryActiveWebService.getActiveMaturityFilter=function(e){return"("+e+") AND (([ds6w:status]:Classification.Active) OR ([ds6w:status]:Libraries.Active) OR ([ds6w:status]:Classification.Obsolete) OR ([ds6w:status]:Libraries.Obsolete))"}),this._LibraryActiveWebService.generateSearchQuery=function(e,t){var i=t?' AND NOT physicalid: "'+t+'"':"";return e.startsWith("*")&&(e=e.slice(1)),e.endsWith("*")&&(e=e.slice(0,-1)),'(flattenedtaxonomies:("types/General Library" OR "types/General Class")) AND (label: "*'+e+'*")'+i},this._LibraryActiveWebService.getLabel=function(e){return"IPClass-"+(window.dsUserLogin?window.dsUserLogin:"unknown")+"-"+(new Date).getTime()},this._LibraryActiveWebService.getSpecific_source_parameter=function(e,t){return{"3dspace":{search_in_context:{expand:{root_physicalid:e,expand_iter:t?"-1":"1",type_filter_bo:["General Library","General Class"]}}}}},e.multiSelectionComponent&&!e.multiSelectionComponent.NLS&&(e.multiSelectionComponent.NLS=r.multiSelectionComponent,e.multiSelectionComponent.componentTitle&&(e.multiSelectionComponent.NLS.widget_name=e.multiSelectionComponent.componentTitle),e.multiSelectionComponent.OKButtonLabel&&(e.multiSelectionComponent.NLS.button_OK=e.multiSelectionComponent.OKButtonLabel)),e.dataProvider={},e.dataProvider.widgetEventsProvider={set:"LibraryActive.onSet",classify:"LibraryActive.onClassify",cancel:"LibraryActive.onCancel",selection:"LibraryEditor.Public.Library"},e.dataProvider.widgetDataProvider={isValidType:function(e){return o.inFamilyLibrary(e)},getObjectForPublication:function(e){return e&&o.inFamilyLibrary(e.getType())?{objectID:e.getID(),objectLabel:e.getLabel()}:null},getWidgetName:function(){return e.topBarLabel?e.topBarLabel:r.activeClassification_cmd},getWidgetIcon:function(){return e.panelIcon?e.panelIcon:"library"},getSettings:function(){return JSON.parse(l)}},this._parent(e),u.isReplayedODT()){var t=this.nestedMenuInContext.popover.getContent().id;window[t]=this}},_getWebServiceRef:function(){return this._LibraryActiveWebService},onSetActive:function(e){e&&"function"==typeof e&&(this.onSetActive=e)},_getPlmType:function(e){return e},_getRootIcon:function(){return f},_getFavoritesIcon:function(){return v},_getRootName:function(){return r.name_Section_AllLibraries},_getFavoritesName:function(){return r.name_Section_FavoriteLibraries},_getActiveIcon:function(e){return e?"wux-ui-3ds wux-ui-3ds-wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-library-class":"library-class"},_getFocusBtnTooltip:function(){return r.activeClassification_btn_focus},_showMessageWhileEmpty:function(e){return e?r.activeClassification_msg_empty:r.activeClassification_msg_noclassfoud},_getIcon:function(e){var t="Definition";if(!e)return{iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-library-class"};t=e.classUsage||e["ds6w:classificationUsage"];var i="";return"General Class"==e.type||"General Class"==e["ds6w:type"]||"General Class"==e.plmType?(i={iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-library-class"},"Definition"==t&&(i={iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-library-class-filled"})):"General Library"!=e.type&&"General Library"!=e["ds6w:type"]&&"General Library"!=e.plmType||(i={iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-library"},"Standard"==t&&(i={iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-library-lined"})),i},couldBeExpand:function(e){return"General Library"===e.plmType||"General Class"===e.plmType},couldBeValid:function(e,t,i,n,r){var a=!1,s="expandAllCmd"===r||"favoriteCmd"===r,o=t.getSelectedNodes(),l=o.length;if(t&&l>0){if(0==i&&l>1)return!1;if(t.getRoots()[0].isSelected()||t.getRoots()[1].isSelected())return!1;a=!0;for(var c=0;c<o.length;++c)if(!s&&"General Library"===o[c].getType()){a=!1;break}}return a},couldBeSelected:function(e){return!0},_setFavorites:function(e){var t=Array.isArray(e.favoriteFolders)?e.favoriteFolders:[e.favoriteFolders],i=c.getTenantAwarePreferenceName("ipcFavoriteList_v1");d.set(i,t,!1,!1),e.onComplete(t)},getFavorites:function(e){return this._getWebServiceRef().getUserPreferences({name:c.getTenantAwarePreferenceName("ipcFavoriteList_v1"),onComplete:function(i){var r={};if(i&&i.length>0&&"{}"!==i){var a=JSON.parse(t.jsonUnzip(i)),s=[];if(a.forEach((function(e){s.push(e.id),r[e.id]=e.name})),s.length<=0)return void e.onComplete(s);n.favourites({ids:s,onComplete:function(t){for(var i=t.results?t.results:[],n=[],a=0;a<i.length;++a){for(var s={},o=i[a].attributes,l=0;l<o.length;++l)"physicalid"===o[l].name?s.id=o[l].value:"ds6w:type"===o[l].name&&(s.plmType=o[l].value,s.type=o[l].value),"ds6w:classificationUsage"===o[l].name&&(s.classUsage=o[l].value);s.name=r[s.id],n.push(s)}e.onComplete&&e.onComplete(n)}})}else e.onComplete&&e.onComplete([])},onFailure:function(t){e.onFailure&&e.onFailure(t)}})},_getContextualMenu:function(e,t){return s.GetContextualMenu(e,t)}})})),define("DS/LibraryActive/commands/ActionBar_ActiveClassificationCmd",["DS/ApplicationFrame/CommandCheckHeader","i18n!DS/LibraryActive/assets/nls/LibraryActive","DS/IPClassifyActive/utils/IPClassifyActiveCommunication","DS/IPClassifyActive/utils/IPClassifyActiveUtil","DS/LibraryActive/LibraryActive"],(function(e,t,i,n,r){"use strict";return e.extend({labelTopBar:t.activeClassification_cmd,isInsert:!0,datas:{},_activeClassificationId:"",_activeClassification:{},init:function(e){var t=this;this._parent(e,{mode:"exclusive",isAsynchronous:!1});var a=widget.getValue("activeClassification_"+widget.id);if(a){a=n.jsonUnzip(a);try{a=JSON.parse(a)}catch(e){a=null}}var s=widget.getValue("activeClassification_pause_"+widget.id);if((!a||!a.id)&&s){s=n.jsonUnzip(s);try{s=JSON.parse(s)}catch(e){s=null}}a&&a.id&&(this._activeClassificationId=a.id,this.dispatchEvent(a.id,a.label),this.setState(!0,!1)),i.subscribe("LibraryEditor.ActiveLibraryCallBack",(function(e){null!==e||i.publish("LibraryEditor.ActiveLibrary",t._activeClassification)})),this.onStateChange((function(){t.popover||(t.popover=new r({container:document.body.querySelector('[data-command="ActionBar_ActiveClassificationCmd"]')}),a&&a.id?t.popover.nestedMenuInContext.setActiveNode(a.id,a.label):s&&s.id&&t.popover.nestedMenuInContext.setActiveNode_pause(s.id,s.label),t.popover.showPopover(),t._checkAndUpdateState(),t.popover.addEvent("onSetActive",(function(e){t._activeClassificationId=e.getID?e.getID():"",t.setState(e,!1);var i=e.getID?e.getID():"",r=e.getLabel?e.getLabel():"";t.dispatchEvent(i,r);var a={id:i,label:r};if(a=JSON.stringify(a),a=n.jsonZip(a),widget.setValue("activeClassification_"+widget.id,a),e.isPause){var s=JSON.stringify(e.isPause);s=n.jsonZip(s),widget.setValue("activeClassification_pause_"+widget.id,s)}else widget.setValue("activeClassification_pause_"+widget.id,{id:"",label:""})}))),t._checkAndUpdateState()}))},dispatchEvent:function(e,t){this._activeClassification={origin:widget.id,id:e,label:t,sc:widget.getPreference("pad_security_ctx")&&widget.getPreference("pad_security_ctx").value},i.publish("LibraryEditor.ActiveLibrary",this._activeClassification)},_checkAndUpdateState:function(){var e=this;this._activeClassificationId&&!0!==this.getState()?setTimeout((function(){e.setState(!0,!1)}),0):this._activeClassificationId||!1===this.getState()||setTimeout((function(){e.setState(!1,!1)}),0)}})})),define("DS/LibraryActive/commands/ActionBar_MultipleClassificationCmd",["UWA/Core","DS/ApplicationFrame/Command","DS/PADUtils/PADContext","DS/LibraryActive/LibraryActive","DS/PADUtils/PADSettingsMgt"],(function(e,t,i,n,r){"use strict";var a=t.extend({labelTopBar:e.i18n("Classify In Libraries"),init:function(e){this.context=i.get(),this._parent(e,{mode:"exclusive",isAsynchronous:!1})},execute:function(e,t){if(!e){e={};var a=[];if(this.context||(this.context=i.get()),this.context&&this.context.getSelectedNodes&&this.context.getSelectedNodes().forEach((function(e){a.push(e.id)})),a.length>0&&(e.objects=a),this.context||(this.context=i.get()),this.context&&this.context.getInitParams){var s=this.context.getInitParams();s&&(s.securityContext&&(e.securityContext=s.securityContext),s.tenantId&&(e.tenantId=s.tenantId))}}if(t||(this.context||(this.context=i.get()),this.context&&this.context.getClassifCustomization&&(t=this.context.getClassifCustomization())),t||(t={}),e.securityContext&&r.setSetting("pad_security_ctx",e.securityContext),e.tenantId&&r.setSetting("x3dPlatformId",e.tenantId),e.objects||"Chooser"===t.launchMode){var o=new n({selectionMode:t.selectionMode||"DefaultMulti",dialogButtons:t.dialogButtons||!0,favoriteButton:t.favoriteButton||!0,multiSelectionComponent:{withClassify:e.objects.length>0||"Classify"===t.launchMode,inputObjects:e.objects,launchDialog:!0,rootLibraries:t.RootLibraries,componentTitle:t.ComponentTitle,OKButtonLabel:t.OKButtonLabel},couldBeValid:function(e,t,i){var n=!1;let r=0;for(let e=0;e<arguments.length;e++)null!=arguments[e]&&(r+=1);var a=2==r,s=t.getSelectedNodes(),o=s.length;if(t&&o>0){if(0==i&&o>1)return!1;if(t.getRoots()[0].isSelected()||t.getRoots()[1].isSelected())return!1;n=!0;for(var l=0;l<s.length;++l)if(a&&"General Library"===s[l].getType()){n=!1;break}}return n},couldBeSelected:function(e){return!0}}),l=o.nestedMenuInContext.nestedMenu;l&&l.popover&&(l.popover.height=400,l.popover.width=350),o.nestedMenuInContext.addEvent("onClassifyMultiple",(function(t){console.log("onClassifyMultiple published, data = "+t.chosenClasses),console.log("Selected End Items paramData = "+e.objects)})),o.nestedMenuInContext.addEvent("onSelectorCancel",(function(e){console.log("onSelectorCancel published")}))}},endExecute:function(){}});return a})),define("DS/LibraryActive/LibrarySelectorWebInWin",["UWA/Widget","DS/i3DXCompass/Data","DS/PADUtils/PADProbes","DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADUtilsServices","DS/IPClassifyUtil/IPClassifyUtility","DS/LibraryActive/LibraryActive","DS/IPClassifyActive/utils/IPClassifyActiveCommunication","DS/IPClassifyActive/utils/WidgetDataProvider","UWA/Drivers/Alone"],(function(e,t,i,n,r,a,s,o,l,c){var d=window.librarySelector.params;window.widget=new e,console.log("Inside LibrarySelectorWebInWin"),widget.setValue("noCompass",!0),d.userId&&(window.top.dsUserLogin=d.userId),n.setSetting("pad_security_ctx",d.securityContext);var u=d.tenantId||a.getTenantId();u&&(widget.setValue("x3dPlatformId",u),n.setSetting("x3dPlatformId",u)),widget.body=UWA.createElement("div",{class:"librarySelector",styles:{height:"100%",width:"100%"}}),t.initialize({myAppsBaseUrl:d.myAppsUrl,userId:d.userId,passportUrl:"",proxyTicketUrl:""}),document.body.innerHTML="",window.top.performance.mark("createWidget_begin"),r.app_initialization((function(){var e=new s({selectionMode:d.selectionMode,dialogButtons:"true"===d.dialogButtons,favoriteButton:"true"===d.favoriteButton,multiSelectionComponent:{withClassify:"Classify"===d.launchMode,inputObjects:d.objects,rootLibraries:d.RootLibraries,componentTitle:d.ComponentTitle,OKButtonLabel:d.OKButtonLabel},couldBeValid:function(e,t,i){var n=!1,r=2===arguments.length,a=t.getSelectedNodes(),s=a.length;if(t&&s>0){if(0==i&&s>1)return!1;if(t.getRoots()[0].isSelected()||t.getRoots()[1].isSelected())return!1;n=!0;for(var o=0;o<a.length;++o)if(r&&"General Library"===a[o].getType()){n=!1;break}}return n},couldBeSelected:function(e){return!0}});widget.body.setContent(e.nestedMenuInContext.getMultiSelectorContainer()),widget.body.inject(document.body,"top"),e.nestedMenuInContext.addEvent("onClassifyMultiple",(function(e){console.log("onClassifyMultiple published, data = "+e.chosenClasses);var t=l.getEventNameProvider();t&&t.classify&&o.publish(t.classify,e.chosenClasses,!0)})),e.nestedMenuInContext.addEvent("onSelectorCancel",(function(e){console.log("onSelectorCancel published");var t=l.getEventNameProvider();t&&t.cancel&&o.publish(t.cancel,!0,!0)}))})),widget.dispatchEvent("onLoad"),widget.dispatchEvent("onRefresh"),widget.dispatchEvent("onDestroy"),widget.dispatchEvent("onResize")}));