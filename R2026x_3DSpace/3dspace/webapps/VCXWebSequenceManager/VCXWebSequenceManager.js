var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSequenceManager/VCXScenarioSequence",["require","exports","DS/CoreEvents/Events","DS/VCXWebComponents/VCXWebComponentBaseExperience"],(function(e,t,n,r){"use strict";r=__importDefault(r);class i extends r.default{constructor(){super(),this._listScenariosId=[],this._sequenceType=0,this._name=""}GetType(){return this.componentType}GetListScenariosId(){return this._listScenariosId}GetIndexOfScenario(e){return this._listScenariosId.indexOf(e)}FindScenario(e){return-1!==this.GetIndexOfScenario(e)}PushScenario(e){this.FindScenario(e)||this._listScenariosId.push(e)}InsertScenarioAtIndex(e,t){this.FindScenario(e)||this._listScenariosId.splice(t,0,e)}InsertScenarioAfter(e,t){if(!this.FindScenario(e)){var n=this.GetIndexOfScenario(t);this._listScenariosId.splice(n+1,0,e)}}RemoveScenario(e){var t=this.GetIndexOfScenario(e);t>=0&&this._listScenariosId.splice(t,1)}GetPreviousScenarioId(e){var t="",n=this.GetIndexOfScenario(e);return n>0&&(n--,t=this._listScenariosId[n]),t}GetNextScenarioId(e){var t="",n=this.GetIndexOfScenario(e);return-1!==n&&n!==this._listScenariosId.length-1&&(n++,t=this._listScenariosId[n]),t}Clone(e){if(e){e._listScenariosId=[...this.GetListScenariosId()];var t,n=this.QueryInterface("VCXIModifiable");n&&(t=n.GetProperties());var r=e.QueryInterface("VCXIModifiable");if(r&&t)for(var i in t.map)if(t._map.hasOwnProperty(i)){var s=t.GetProperty(i);r.OnChangeProperty(i,s.GetPropertyValue())}}}SetSequenceType(e){this._sequenceType=e}GetSequenceType(){return this._sequenceType}SetName(e){this._name!==e&&(this._name=e,n.publish({event:"VCX_SEQUENCE_NAME_CHANGED",data:this}))}GetName(){return this._name}MoveScenario(e,t){if(void 0!==t){var n=this.GetIndexOfScenario(e);n>=0&&n!==t&&this._listScenariosId.splice(t,0,this._listScenariosId.splice(n,1)[0])}else this.RemoveScenario(e),this.PushScenario(e)}}return Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:()=>"VCXScenarioSequence"}),i})),define("DS/VCXWebSequenceManager/VCXModifiableSequence",["DS/CoreEvents/Events","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebModifiables/VCXModifiable","i18n!DS/VCXWebSequenceManager/assets/nls/VCXWebSequenceManager"],(function(e,t,n,r,i,s,o,c,a){"use strict";return c.extend({init:function(){this._parent(),this._name="",this._sequenceDescription="",this._scenarioSequence=null},OnChangeProperty:function(e,t){"Actor.Name"===e?this.GetObject().SetName(t.GetValue()):"Actor.Description"===e?this._sequenceDescription=t.GetValue():"Actor.Sequence.Type"===e?this.GetObject().SetSequenceType(t.GetValue()):this._parent(e,t)},GetProperty:function(e){var o=null;if("Actor.Name"===e)(c=new t).SetValue(this.GetObject().GetName()),o=new r(new i(e,i.EBehaviorType.Singleton,!0,a),c);else if("Actor.Description"===e){var c;(c=new t).SetValue(this._sequenceDescription),o=new r(new i(e,i.EBehaviorType.Singleton,!0,a),c)}else if("Actor.Sequence.Type"===e){var u=new n;u.SetValue(this.GetObject().GetSequenceType());var S=new s(e,i.EBehaviorType.Singleton,!0,a);S.SetMapChoiceEnum({0:"sequence.type.scenarios",1:"sequence.type.layers",2:"sequence.type.CAD"}),S.SetVisible(!1),o=new r(S,u)}else o=this._parent(e);return o},GetProperties:function(){var e=new o;return e.AddOrModifyProperty(this.GetProperty("Actor.Name")),e.AddOrModifyProperty(this.GetProperty("Actor.Description")),e.AddOrModifyProperty(this.GetProperty("Actor.Sequence.Type")),e}})})),define("DS/VCXWebSequenceManager/VCXModifiableSequenceManager",["DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXPropertySet"],(function(e,t){"use strict";return e.extend({init:function(){this._parent()},OnChangeProperty:function(e,t){return!0},GetProperty:function(e){return null},GetProperties:function(){return new t}})}));__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/VCXWebSequenceManager/VCXSequenceManager",["require","exports","DS/CoreEvents/Events","DS/VCXWebComponents/VCXWebComponentBaseExperience"],(function(e,t,n,r){"use strict";r=__importDefault(r);class i extends r.default{constructor(){super(...arguments),this._listSequences=[],this._maxIndex=0}initialize(){this._listSequences=[],this._maxIndex=0}uninitialize(){this._listSequences=[],this._maxIndex=0}GetListSequences(){return this._listSequences}GetListSequencesFromType(e){for(var t=[],n=0;n<this._listSequences.length;n++){var r=this._listSequences[n];r.GetSequenceType()===e&&t.push(r)}return t}GetIndexOfSequence(e){return this._listSequences.indexOf(e)}GetSequenceFromId(e){for(var t=0;t<this._listSequences.length;t++){if(this._listSequences[t].GetID()===e)return this._listSequences[t]}return null}GetSequenceFromScenarioId(e){for(var t=null,n=0;n<this._listSequences.length;n++){var r=this._listSequences[n];if(r.FindScenario(e)){t=r;break}}return t}PushSequence(e){e.GetID()?this._listSequences.push(e):console.log("VCXSequenceManager::InsertSequenceAfter -> ID of sequence empty! you need to call CmdChangeComponent Before"),this._maxIndex++}RemoveSequence(e){var t=this.GetSequenceFromId(e);if(t){var n=this.GetIndexOfSequence(t);this._listSequences.splice(n,1)}}PushScenarioInSequence(e,t){var n=this.GetSequenceFromId(t);n||(n=this._listSequences[0]),n.PushScenario(e)}InsertScenarioAfter(e,t,n){var r=this.GetSequenceFromId(t);r?.InsertScenarioAfter(e,n)}InsertScenarioAtIndex(e,t,n){var r=this.GetSequenceFromId(t);r?.InsertScenarioAtIndex(e,n)}RemoveScenarioFromSequence(e){var t=this.GetSequenceFromScenarioId(e);t&&t.RemoveScenario(e)}GetPreviousScenarioId(e){var t="",n=this.GetSequenceFromScenarioId(e);return n&&(t=n.GetPreviousScenarioId(e)),t}GetNextScenarioId(e){var t="",n=this.GetSequenceFromScenarioId(e);return n&&(t=n.GetNextScenarioId(e)),t}GetPreviousSequence(e,t){var n=null,r=this.GetIndexOfSequence(e);if(r>0)if(t)for(r--;r>=0;r--){var i=this._listSequences[r];if(-1!=t.indexOf(i.GetSequenceType()))return n=this._listSequences[r]}else r--,n=this._listSequences[r];return n}GetNextSequence(e,t){var n=null,r=this.GetIndexOfSequence(e);if(r<this._listSequences.length-1)if(t)for(r++;r<this._listSequences.length;r++){var i=this._listSequences[r];if(-1!=t.indexOf(i.GetSequenceType()))return n=this._listSequences[r]}else r++,n=this._listSequences[r];return n}GetListScenariosInSequence(e,t){for(var n=[],r=this._experienceBase.getManager("VCXScenarioManager").GetScenarios(),i=e.GetListScenariosId(),s=0;s<i.length;s++){let e=r[i[s]];t&&e.GetConcealed&&e.GetConcealed()||(n[s]=e)}return n.filter((e=>e))}GetOrderedListOfAllScenariosIds(e){let t=[];if(this.GetListSequencesFromType(0).forEach((e=>{t=t.concat(e.GetListScenariosId())})),e){let e=this._experienceBase.getManager("VCXScenarioManager").GetScenarios(),n=[...t];t=[],n.forEach((n=>{e[n]&&!e[n].GetConcealed()&&t.push(n)}))}return t}InsertSequenceAfter(e,t){if(e.GetID()){var n=this.GetIndexOfSequence(t);this._listSequences.splice(n+1,0,e)}else console.log("VCXSequenceManager::InsertSequenceAfter -> ID of sequence empty! you need to call CmdChangeComponent Before");this._maxIndex++}MoveScenarioInSequence(e,t,n){var r=this.GetSequenceFromScenarioId(e);if(r)if(r.GetID()===t)r.MoveScenario(e,n);else{r.RemoveScenario(e);var i=this.GetSequenceFromId(t);if(!i)return;void 0!==n?i.InsertScenarioAtIndex(e,n):i.PushScenario(e)}}GetCurrentSequenceID(){var e=this._experienceBase.getManager("VCXScenarioManager").GetCurrentScenario(),t=this.GetSequenceFromScenarioId(e);return t?t.GetID():null}}return Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:()=>"VCXSequenceManager"}),i}));