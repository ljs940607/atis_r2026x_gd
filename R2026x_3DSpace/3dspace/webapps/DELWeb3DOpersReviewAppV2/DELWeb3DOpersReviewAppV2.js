define("DS/DELWeb3DOpersReviewAppV2/components/LinkManagerComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/ENOXInterWdgCom/LinkManager"],(function(e,t,i){"use strict";const n="link",o="unlink",s="onAppReady",a="onGetAppStatus",r="onWidgetLinked",l="onWidgetUnlinked";return class extends e{constructor(e){super(e),this._widgetLink=null,this._attemptedCustomSubscriptions=new Map,this._matchingFeatures=[],this._widgetsToUnlink=[],this._appReady=!1,this.configModulePath=e.appConfigPath}async initialize(){let e=this;await super.initialize();const t=parent.require;return this.compOptions=await this.loadJson(this.configModulePath),this._setUpWindowsEvent(),new Promise((i=>{window.__karma__?(this.logger.warn("We are in karma test environment, thus preventing the use of WidgetLink."),i()):t(["DS/WidgetLink/WidgetLink"],(t=>{this._widgetLink=t.get(widget),widget&&(this._widgetLink.setLinkability(e.compOptions.widget_linkability),this._setMatchingFeatures(this._widgetLink.getLinked()),this._widgetLink=t.get(widget),widget.link=this._widgetLink),this._appReady=!1,this._widgetLink.addEventListener(n,this._onLink.bind(this)),this._widgetLink.addEventListener(o,this._onUnLink.bind(this)),this._setUpLinkEvents(),i()}))}))}async clean(){await super.clean()}async destroy(){await super.destroy()}_subscribeToModelEvents(){const e=[{eventName:"onDelWebOERAppReady",callback:this._onAppReady.bind(this)},{eventName:"getAppStatus",callback:this._onGetAppStatus.bind(this)}];let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents);e.forEach((e=>{t.subscribe({event:e.eventName},e.callback)}))}_publish(e,t){this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents).publish({event:e,data:{data:t},origin:this.name})}_onAppReady(){this._appReady=!0,this._publish(s,{status:!0}),this._notifyUnLink(),this._notifyLink()}_onGetAppStatus(){this._publish(a,{status:this._appReady})}_setUpWindowsEvent(){let e,t,i=this;if(globalThis&&globalThis.dsDashboardWindow&&globalThis.dsDashboardWindow.top&&(e=globalThis.dsDashboardWindow.top,t=e.parent),e&&t){let n=e.location.origin,o=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents),s=i.compOptions.eventsPrefix,a=i.compOptions.eventsToSubscribe,r=i.compOptions.eventsToPublish;e.addEventListener("message",(e=>{if((!e||e.origin!==n)&&e&&e.source===t){let t=e.data||{},n=t.event||null,r=UWA.is(n,"string")?n.replace(s,""):null,l=t.params||{};if(r)for(let e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&e===r)switch(a[e].type){case"ModelEvent":o.publish({event:a[e].internalEvent,data:l});break;case"handler":i.executeCommand({handlerId:a[e].handlerId,args:l});break;case"API":i.getComponentFromIdentifier(a[e].componentId)[a[e].func](l)}}}));for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e)){let i=r[e].internalEvent?r[e].internalEvent:e;o.subscribe({event:i},(function(i){if(i){let n=r[e].externalEvent?a[e].externalEvent:e,o=s+n;t.postMessage({event:o,params:i.data},"*")}}))}}}_setUpLinkEvents(){var e,i=this,n=i.compOptions.eventsPrefix,o=i.compOptions.eventsToSubscribe,s=i.compOptions.eventsToPublish;e=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents);for(let s in o)Object.prototype.hasOwnProperty.call(o,s)&&i.subscribe(n+s,(a=>{switch(i.logger.debug(`Widget Link Event ${n+s} invoked with params`,a),o[s].type){case"ModelEvent":e.publish({event:o[s].internalEvent,data:a});break;case"handler":i.executeCommand({handlerId:o[s].handlerId,args:a});break;case"API":i.getComponentFromIdentifier(o[s].componentId)[o[s].func](a)}t.trackChanges({executionContext:i.getExecutionContext(),category:"LinkabilityEvents",action:s,label:s})}));for(let t in s)if(Object.prototype.hasOwnProperty.call(s,t)){let a=s[t].internalEvent?s[t].internalEvent:t;e.subscribe({event:a},(function(e){if(e){let a=s[t].externalEvent?o[t].externalEvent:t;i.logger.debug(`Widget Link Event ${n+t} published with params`,e.data),i.publish(n+a,e.data)}}))}this._subscribeToModelEvents()}_getFeature(e,t){let i,n,o;return t&&(i=t.split("/"),n=i[i.length-1],o=e[n].feature),o}_setMatchingFeatures(e){let t=[];e&&e.forEach((e=>{t=[...t,...e.matchLinkability().matchingFeatures]})),this.logger.debug(`Widget Linked with matching features ${t}`),this._matchingFeatures=t}_notify(e,t){let i=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents);!0===this._appReady&&e.forEach((e=>{i.publish({event:t,data:{data:e,origin:this.name}})}))}_notifyLink(){let e=this._widgetLink.getLinked();e.forEach((e=>{this.setSourceWidgetId(e.id)})),this._notify(e,r)}_notifyUnLink(){this.setSourceWidgetId(this.getComponentFromIdentifier("DELCommonUtilsServices").getWidgetId()),this._notify(this._widgetsToUnlink,l),this._widgetsToUnlink=[]}_onLink(e){this.logger.debug("Widget Linked - ",e.link.id,e.link.appId,e.link.isLinked()),t.trackChanges({executionContext:this.getExecutionContext(),category:"LinkApp",action:"LinkApp",label:"LinkApp",dims:{pd1:e.link.appId}}),this._setMatchingFeatures(this._widgetLink.getLinked()),this._subscribeAfterLink(),this._notifyLink()}_onUnLink(e){let t=e.link;this.logger.debug("Widget Linked - ",e.link.id,e.link.appId,e.link.isLinked()),t&&(this._setMatchingFeatures(this._widgetLink.getLinked()),this._subscribeAfterLink(),this._widgetsToUnlink.push(t),this._notifyUnLink())}_subscribeAfterLink(){for(const[e,t]of this._attemptedCustomSubscriptions)this.unsubscribe(e),this.subscribe(e,t)}setSourceWidgetId(e){i.setSourceWidgetId(e)}getSourceWidgetId(){return i.getSourceWidgetId()}subscribe(e,t){if(this._widgetLink){let i=this._getFeature(this.compOptions.eventsToSubscribe,e);if(this._attemptedCustomSubscriptions.set(e,t),this._matchingFeatures.includes(i))return this.logger.debug(`Subscribe Widget Link ${e} of feature ${i} in widget ${widget.id}`),this._widgetLink.subscribe(e,t)}}unsubscribe(e){if(this._widgetLink)return this._widgetLink.unsubscribe(e)}publish(e,t){if(this._widgetLink&&this._widgetLink.getLinked().length>0){let i=this._getFeature(this.compOptions.eventsToPublish,e);this._matchingFeatures.includes(i)&&(this.logger.debug(`Publish Widget Link ${e} of feature ${i} in widget ${widget.id}`),this._widgetLink.publish(e,t))}}isLinked(){let e,t=!1;return this._widgetLink&&(e=this._widgetLink.getLinked(),t=!!(e&&e.length>0)),t}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.isLinked=this.isLinked.bind(this),this.publicAPI}}})),define("DS/DELWeb3DOpersReviewAppV2/AppMain",["DS/WAfrAppManager/App","DS/UIKIT/Mask","DS/Logger/Logger"],(function(e,t,i){"use strict";return class extends e{constructor(e){super(e),this._showMask(),this.logger=i.getLogger("AppMain")}setUp(e){if("true"!==this.getExecutionContext().getContext().DELWebOERAppReady){this.logger.log("OER: SetUp Done");this.getExecutionContext().getComponent(WAfrStandardComponentKey.HandlerComponent).setCheckState({id:"DELWebOERToggleDataGridViewCmd",state:!0}),this.getExecutionContext().setContext("DELWebOERAppReady",!0),this.modelEvents.publish({event:"onDelWebOERAppReady",data:{data:{appReady:!0},origin:"DELWeb3DOpersReviewAppV2"}})}e.done()}setUpWS(e){let t=this;this.modelEvents=this.getExecutionContext().getComponent(WAfrStandardComponentKey.ModelEvents),this.homePageCpt=this.getExecutionContext().getComponent("mod_WelcomeScreen"),this.homePageCpt.showWelcomeScreen(),this.logger.log("OER: Welcome Screen Displayed"),this.getExecutionContext().getComponent("Application").loadDataFromCache(),window.localStorage.setItem("ENO3DViewStatusBarExpandState",!1),this.getExecutionContext().getComponent(WAfrStandardComponentKey.UIComponent).showMainComponent(),this._removeMask(),localStorage.getItem("DELOER.Activate.GraphView")&&(t.logger.log("Graph Variable is activated, initializing graph view"),this.getExecutionContext().setContext("graphView",!0)),this.getExecutionContext().gotoApp().then((function(){t.logger.log("OER: GotoApp Done")})),e.done()}_showMask(){t.mask(document.getElementsByClassName("wux-applicationframe-execution-context")[0])}_removeMask(){t.unmask(document.getElementsByClassName("wux-applicationframe-execution-context")[0])}}})),define("DS/DELWeb3DOpersReviewAppV2/model/DELWebOERProcessResourceViewModel",["UWA/Core","UWA/Class","DS/DELWebOERTableViewComp/model/DELWebOERTableViewModel"],(function(e,t,i){"use strict";const n="resourceid",o="ds6w:label",s="ds6w:type",a="from",r="to",l="ro.SymbolicID.V_SymbolicID";return i.extend({init:function(e){this._parent(e),this.store=this.executionContext.getComponent("Store")||null,this.dispatch=this.store?this.store.useDispatch():null},addInstance:function(e){this.store&&this.dispatch&&this.dispatch(this.store.actions.addInstance({id:e[n],type:e[s],label:e[o],from:e[a],to:e[r],symbolicID:e[l]}))}})})),define("DS/DELWeb3DOpersReviewAppV2/mixins/HideShowColumnMixin",["UWA/Core"],(function(e){"use strict";const t="hideShow3D";return{updateHideShowColumn:function(e,i){let n=this.getTableView();n&&(n.updateColumn(t,{disabled:!e,visibleFlag:e}),i&&this.getModel().reset3DVisibility())}}})),define("DS/DELWeb3DOpersReviewAppV2/components/WidgetProxyComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent"],(function(e){"use strict";function t(t){e.call(this,t)}return t.prototype=Object.create(e.prototype),t.prototype.getSessionWidget=function(){return widget||this.getWidgetComponent()},t.prototype.getWidgetDOM=function(){return widget?widget.body.firstChild:null},t.prototype.getExposedComponent=function(){},t})),define("DS/DELWeb3DOpersReviewAppV2/mixins/CommandsAvailabilityMixin",["UWA/Core","DS/DELWebOERCommonUtils/utils/XSOManager"],(function(e,t){"use strict";const i="pprTypes";let n=function(e){this.publish({event:"updateCommandAvailability",data:e})},o=function(){this.publish({event:"resetCommandAvailability"})},s=function(){let t=this,s=this.getComponentFromIdentifier("SessionModel").get("roots");o.call(t),e.is(s,"array")&&s.length>0&&s.forEach((function(e){n.call(t,{data:{[i]:{[e.pprType]:!0}}})}))},a=function(){let e=this.cso.get().length>0;n.call(this,{data:{selection:{selection:e}}})},r=function(e){e&&e.data&&n.call(this,{data:{transitions:{[e.data]:!0}}})},l=function(t){let s=this;t&&e.is(t.data,"array")&&t.data.length>0?t.data.forEach((function(e){n.call(s,{data:{[i]:{[e.pprType]:!0}}})})):o.call(this)},d=function(){this.cso=t.getCSO(),this.csoTokens=[],this.csoTokens.push(this.cso.onPostAdd(a.bind(this))),this.csoTokens.push(this.cso.onPostRemove(a.bind(this)))},p=function(){var e=this,t=this.getComponentFromIdentifier(WAfrStandardComponentKey.ModelEvents),i=[{eventName:{event:"onModelChange:roots"},callback:l.bind(this),handler:t},{eventName:{event:"onModelChange:mode"},callback:r.bind(this),handler:t},{eventName:{event:"onRefresh"},callback:s.bind(this),handler:t}];e.eventTokens=[],i.forEach((function(t){e.eventTokens.push(t.handler.subscribe(t.eventName,t.callback))}))};return{subscribeToCommandsAvailability:function(){d.call(this),p.call(this)},unsubscribeToCommandsAvailability:function(){let e=this;e.csoTokens.forEach((function(t){e.cso.unsubscribe(t)})),e.eventTokens.forEach((function(t){e.unsubscribe(t)}))}}})),define("DS/DELWeb3DOpersReviewAppV2/view/DELOpenContentUI",["UWA/Core","DS/Controls/Button","i18n!DS/DELWeb3DOpersReviewAppV2/assets/nls/DELWeb3DOpersReviewAppV2","css!DS/DELWeb3DOpersReviewAppV2/assets/css/App.css"],(function(e,t,i){"use strict";return function(n){let o=e.Element.create("div",{class:"del-dnd-search-container"});e.Element.create("i",{class:"wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop"}).inject(o),e.Element.create("h5",{class:"",text:i.get("DropContentHere.Title")}).inject(o),e.Element.create("div",{class:"separator",text:i.get("Or.Title")}).inject(o);let s=new t({domId:"searchButton",label:i.get("SearchForContent.Title"),emphasize:"primary"});return n&&n.searchCB&&s.addEventListener("buttonclick",n.searchCB),s.inject(o),{getView:function(){return o},hide:function(){o.hide()},show:function(){o.show()}}}}));var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("DS/DELWeb3DOpersReviewAppV2/components/DELWebOERDynamicWKIsComp",["require","exports","DS/DELWebOERCommonUtils/DELWebBaseComponent"],(function(e,t,i){"use strict";i=__importDefault(i);class n extends i.default{constructor(e){super(e)}async initialize(){await super.initialize()}getPathFromSymbolicId(e){let t=[],i=this.getComponentFromIdentifier("Store");if(i&&i.getIsPositioningID){let t=i.getIsPositioningID({symbolicID:e});t&&(e=t)}if(i&&i.getRelationsFromSymbolicLinks){let n=i.getRelationsFromSymbolicLinks({symbolicIDs:[e]});t=n&&n.path&&n.path.length>0?n.path[0]:[]}return t}async clean(){await super.clean()}async destroy(){await super.destroy()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.getPathFromSymbolicId=this.getPathFromSymbolicId.bind(this),this.publicAPI}}return n})),define("DS/DELWeb3DOpersReviewAppV2/components/MBOMComp",["DS/DELWebOERTableViewComp/TableViewComp"],(function(e){"use strict";const t="ro.DELFmiUseCaseExt.V_UseCase.instance";return class extends e{constructor(e){super(e)}async initialize(){await super.initialize()}async addRoots(e={}){await super.addRoots(e),this.updateMaterialColumn(this.isMaterialColumnEnabled())}isMaterialColumnEnabled(){return this.getRoots().filter((e=>e&&e.outofScope)).length>0}updateMaterialColumn(e,i=!1){let n=this.getTableView();n&&(n.updateColumn(t,{disabled:!e,visibleFlag:e}),i&&this.getModel().resetPartFab())}}})),define("DS/DELWeb3DOpersReviewAppV2/components/ViewerComp",["DS/PlatformAPI/PlatformAPI","DS/CoreEvents/Events","DS/Selection/CSOManager","DS/Selection/PSOManager","DS/DELWebCommonControls/DELWebLinkInfra","DS/DELWebViewerWafrComponent/DELWeb3DViewerComponent","DS/DELWebOERCommonUtils/utils/NodeUtils","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin","DS/DELWebOERCommonUtils/mixins/RootActionHandlerExtMixin"],(function(e,t,i,n,o,s,a,r,l,d){"use strict";const p="onApplyNGFilter";class c extends s{constructor(e){super(e),this.rootsLoaded=[],this._modelEventsTokens=[],this._platformTokens=[],this._visuTokens=[]}async initialize(){let e=await r.fetchMePreferenceValue({Repository:"3DOperationsViewerRepository",PreferenceName:"DELOER_PXPONPREMISEBUILDUP"});await super.initialize(),this.subscribeEvents(),this.createInfraController(),this.getViewerBehavior().updateOptions({NodeInfraBuildUp:!UWA.is(e,"boolean")||e})}createInfraController(){let e=this,t={matchKeys:["SBOM","MBOM","PRODUCT","RESOURCE"],restrictKeys:["PROCESS"],proxy:e.getFilterProxy(),NGFUXId:e.getNGFUXID(),shareContent:!0};e.widgetLinkInfraController=new o(t),[{eventToAdd:"onAddRoots",type:"event",event:"loadData"},{eventToAdd:"onRemoveRoots",type:"handler",handlerId:"DELWebOERRemoveRoots"},{eventToAdd:"onRemoveAll",type:"handler",handlerId:"DELWebOERClean"}].forEach((t=>{e.widgetLinkInfraController.addEvent(t.eventToAdd,(async function(i={}){switch(t.type){case"event":e.publish({event:t.event,data:i});break;case"handler":e.executeCommand({handlerId:t.handlerId,args:i})}}))}))}subscribeEvents(){let i=this,n=function(e,t){i.publish({event:e,data:{data:t}})},o={ModelEvents:{"onModelChange:roots":i.onRootsChange,onRefresh:i.onRefresh,onSearch:i.search,"onModelChange:mode":i.onModeChange,onBuildUpActivated:i.onBuildUpActivated,onBuildUpDeactivated:i.onBuildUpDeactivated},Platform:{"DS/PADUtils/PADCommandProxy/focus":function(e){e&&e.data&&UWA.is(e.data.paths,"array")&&e.data.paths.forEach((e=>{this.publish({event:"onFocus",data:{data:{path:e}}})}))}},FilterBIProxy:{FilterBIColorize:n.bind(n,"onBIColorize"),FilterBIUnColorize:n.bind(n,"onBIUnColorize"),ApplyNGFilter:function(e){let t,n=i.getFilterProxy();e&&e.filterRootIds&&(t=e.filterRootIds[0],e.CVQueryV2||(e.CVQueryV2=n.getFilterSpec(t,{V2:{}})),i.publish({event:p,data:{data:e}}))}},WUXEvents:{"/VISU/":i._onVisuChange}};for(let e in o.ModelEvents)Object.prototype.hasOwnProperty.call(o.ModelEvents,e)&&i._modelEventsTokens.push(i.subscribe({event:e},o.ModelEvents[e].bind(i)));Object.keys(o.Platform).forEach((t=>{i._platformTokens.push(e.subscribe(t,o.Platform[t].bind(i)))}));let s=this.getFilterProxy();if(s)for(let e in o.FilterBIProxy)Object.prototype.hasOwnProperty.call(o.FilterBIProxy,e)&&s.addEvent(e,o.FilterBIProxy[e]);for(let e in o.WUXEvents)Object.prototype.hasOwnProperty.call(o.WUXEvents,e)&&i._visuTokens.push(t.subscribe({event:e},o.WUXEvents[e].bind(i)))}_onVisuChange(e={}){"@onClickEvent"===e.eventType&&"@pickNothing"===e.eventID&&this.publish({event:"onClickOnEmptyArea"})}unsubscribeEvents(){this._modelEventsTokens.length>0&&(this._modelEventsTokens.forEach((e=>{this.unsubscribe(e)})),this._modelEventsTokens=[]),this._platformTokens.length>0&&(this._platformTokens.forEach((t=>{e.unsubscribe(t)})),this._platformTokens=[]),this._visuTokens.length>0&&(this._visuTokens.forEach((e=>{t.unsubscribe(e)})),this._visuTokens=[])}async clean(){this.unsubscribeEvents(),await super.clean()}async destroy(){await super.destroy()}search(e={}){this.getViewerBehavior().search({searchQuery:e.data})}async onRefresh(){let e=this;await this.getViewerBehavior().refresh(!0).then((function(){let t=e.getRoots();e.addRoots({items:t},!0)})).fail((function(e){}))}onBuildUpActivated(){let e=this.getViewerBehavior().getMode();this.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:e}})}onBuildUpDeactivated(){this.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:"Graphics"}})}getRoots(){return this.rootsLoaded}async removeRoots(e={}){const t="DELWeb3DViewerRemoveRoots";let i=this,n=e.items||[];if(UWA.is(n,"array")){let e=i.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);e.hasHandler(t)?e.executeHandler({id:t,args:{items:n}}):i.logger.warn(`${t} Handler not found, please include correct package in your app id card`),n.forEach((e=>{i.rootsLoaded.some((t=>t.id===e.id))&&(i.rootsLoaded=i.rootsLoaded.filter((t=>t.id!==e.id)))}))}i.widgetLinkInfraController.removeRoots({items:n,dispatchEvent:!1})}async addRoots(e={},t){const i="DELWeb3DViewerAddRoots";let n=this,o=e.items||[];if(UWA.is(o,"array")){let e=n.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);e.hasHandler(i)?e.executeHandler({id:i,args:{results:o,version:"V2",defaultShow:!0,displayNotif:!0,forceStop:t}}):n.logger.warn(`${i} Handler not found, please include correct package in your app id card`),o.forEach((e=>{n.rootsLoaded.some((t=>t.id===e.id))&&(n.rootsLoaded=n.rootsLoaded.filter((t=>t.id!==e.id))),n.rootsLoaded.push(e)}))}}async _activateBuildup(e={}){let t=this;await t.getViewerBehavior().setOperation({...e.data,clear:!0}).then((()=>{t.publish({event:"onBuildUpActivated",data:{data:e.data}})})).fail((i=>{t.publish({event:"onBuildUpActivateFailed",data:{data:i.input,error:i.error}}),i&&i.error&&"DELVIEWER_E003"===i.error.code&&(t.logger.error("Connection to Manufacturing Compute Service lost.",i.error),t.publish({event:"onBuildupConnectionFailed",data:{data:e.data,error:i.error}}))}))}async empty(){let e=(this.getRoots()||[]).some((e=>!0===e.filterUpdated));await this.getViewerBehavior().empty({filterUpdated:e}),this.widgetLinkInfraController.removeAll({dispatchEvent:!1}),this.rootsLoaded=[],this.publish({event:"DS/DELWebViewer/onEmpty"})}async onModeChange(e={}){let t=this,i=e.data;switch(i){case"BuildUp":t.getViewerBehavior().setMode({mode:i});break;case"WorkInstructions":await this.executeCommand({handlerId:"DELWebOERLoadXGenCompCmd",args:{displayLoader:!0}}),t.getViewerBehavior().setMode({mode:i})}}setBuildUpGlobalSettings(e){let t=this;return this.getViewerBehavior().setBuildUpGlobalSettings(e).then((e=>t.publish({event:"onSetBuildUpGlobalSettings",data:{data:e.output}})))}getBuildUpGlobalSettings(e){let t=this;return this.getViewerBehavior().getBuildUpGlobalSettings(e).then((e=>t.publish({event:"onGetBuildUpGlobalSettings",data:{data:e.output}})))}getBuildUpGlobalContent(e){let t=this;return this.getViewerBehavior().getBuildUpGlobalContent(e).then((e=>t.publish({event:"onGetBuildUpGlobalContent",data:{data:e.output}})))}getSelectionManager(){return i}getSelectedPaths(){return i.get().map((e=>a.getRirPath(e)))}getPSOManager(){return n}clearOnlySelection(){i.empty()}highlightLinkedViews(e={}){let t=this;try{"WorkInstructions"===t.getComponentFromIdentifier("SessionModel").get("mode")&&this.getViewerBehavior().highlightLinkedViews(e)}catch(e){t.logger.log(e)}}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.addRoots=this.addRoots.bind(this),this.publicAPI.removeRoots=this.removeRoots.bind(this),this.publicAPI.getRoots=this.getRoots.bind(this),this.publicAPI.empty=this.empty.bind(this),this.publicAPI.setMode=this.getViewerBehavior().setMode.bind(this),this.publicAPI.updateOptions=this.getViewerBehavior().updateOptions.bind(this),this.publicAPI.getViewerBehavior=this.getViewerBehavior.bind(this),this.publicAPI.getSelectionManager=this.getSelectionManager.bind(this),this.publicAPI.highlight=this.highlight.bind(this),this.publicAPI.unhighlight=this.unhighlight.bind(this),this.publicAPI.getSelectedPaths=this.getSelectedPaths.bind(this),this.publicAPI.clearOnlySelection=this.clearOnlySelection.bind(this),this.publicAPI.getPSOManager=this.getPSOManager.bind(this),this.publicAPI.preHighlight=this.getViewerBehavior().preHighlightNode.bind(this),this.publicAPI.unPreHighlight=this.getViewerBehavior().unPreHighlightNode.bind(this),this.publicAPI.highlightLinkedViews=this.highlightLinkedViews.bind(this),this.publicAPI.setBuildUpGlobalSettings=this.setBuildUpGlobalSettings.bind(this),this.publicAPI.getBuildUpGlobalSettings=this.getBuildUpGlobalSettings.bind(this),this.publicAPI.getBuildUpGlobalContent=this.getBuildUpGlobalContent.bind(this),this.publicAPI.selectNode=this.getViewerBehavior().selectNode.bind(this),this.publicAPI.unSelectNode=this.getViewerBehavior().unSelectNode.bind(this),this.publicAPI.hideNode=this.getViewerBehavior().hideNode.bind(this),this.publicAPI.showNode=this.getViewerBehavior().showNode.bind(this),this.publicAPI.setReframe=this.getViewerBehavior().setReframe.bind(this),this.publicAPI.setGraphicProperties=this.getViewerBehavior().setGraphicProperties.bind(this),this.publicAPI.removeGraphicProperties=this.getViewerBehavior().removeGraphicProperties.bind(this),this.publicAPI}}return c.prototype.mixinProperties(c,l),c.prototype.mixinProperties(c,d),c})),define("DS/DELWeb3DOpersReviewAppV2/mixins/ManageAppPreferencesMixin",["DS/PADUtils/PADSettingsMgt","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin"],(function(e,t){"use strict";const i="Preferences",n="roots",o="installVolumeOffSet",s="installAutoApplyVolume",a="autoReload",r="defaultPickability",l="DELWebViewer",d="SessionModel",p="ITEM",c="PRODUCT",h="SHAPE";return{_getOptionsFromPreferences:function(e={},t){let n,o=this.getWidgetComponent(),s=this.getComponentFromIdentifier(i);return Object.keys(e).forEach((i=>{if(t||s.isPreferencesModified([i])){let t=e[i];n||(n={}),n[t.key]="NEG_VALUE"===t.value?!o.getValue(i):o.getValue(i)}})),n},_getDELWebViewerOptions:function(e){let t,n=this.getComponentFromIdentifier(i);return t=this._getOptionsFromPreferences({defaultViewerMode:{key:"defaultViewerMode"},usePublishedContent:{key:"dynamicBuildUp",value:"NEG_VALUE"},defaultPickability:{key:"defaultPickability"}},e),n.isPreferencesModified([a])&&(t||(t={}),t.startUpView=this._getStartupViewOptions()),t},_getStartupViewOptions:function(){let e=this.getWidgetComponent(),t=this.getComponentFromIdentifier("WidgetLinkManager");return{setViewpoint:!e.getValue(a),enable:!t.isLinked()}},_getENOPADViewerOptions:function(e){let t=this.getComponentFromIdentifier(i),n=this._getOptionsFromPreferences({webTimeout:{key:"webapi_timeout"}},e);return(t.isPreferencesModified([r])||e)&&(n||(n={}),n.enopad3dviewer_selectionFilter=t.getValue(r)===p?c:h),n},_getProcessViewOptions:function(e){return this._getOptionsFromPreferences({defaultViewerMode:{key:"defaultViewerMode"},usePublishedContent:{key:"usePublishedContent"}},e)},updateOptions:function(t){let i=this.getComponentFromIdentifier(l),n=this._getDELWebViewerOptions(t),o=this._getENOPADViewerOptions(t),s=this._getProcessViewOptions(t);e.updateWidgetPreferences(),o&&Object.keys(o).forEach((t=>{e.setSetting(t,o[t])})),n&&(i.updateOptions(n),n.defaultViewerMode&&i.setMode({mode:n.defaultViewerMode})),s&&this.getComponentFromIdentifier("PROCESS").setOptions(s)},refresh:function(){let e=this,a=e.getComponentFromIdentifier(d).get(n),r=e.getComponentFromIdentifier(i);if(function(){let e=a||[];return function(e){return e&&t.isProcess(e.pprType)}(e[0])&&function(e){let t=!1;if(e&&UWA.is(e.scopedMfg,"array")){t=e.scopedMfg.filter((e=>e.occurrence)).length>0}return t}(e[0])&&r.isPreferencesModified([o,s])}()){let t=a[0];e.open({items:[{id:t.id,withFilter:t.withFilter}]})}else e._publish("onRefresh")}}})),define("DS/DELWeb3DOpersReviewAppV2/components/AppLayoutComponent",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/Utilities/TouchUtils","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebCommonControls/DELWebPanel"],(function(e,t,i,n){"use strict";return class extends e{constructor(e){if(super(e),!e.configPath)throw new Error("Invalid input, configPath is mandatory");this.configPath=e.configPath,this.PPRPANELS={}}async initialize(){await super.initialize(),this.config=await this.loadJson(this.configPath),this._subscribeEvents()}_subscribeEvents(){[{eventName:{event:"onModelChange:roots"},callback:this.onRootsChange},{eventName:{event:"onToggleDataGridview"},callback:this.onToggleDataGridview},{eventName:{event:"onModelChange:mode"},callback:this.onModeChange},{eventName:{event:"onDELWebOERPERTViewCmdOpen"},callback:this.onDELWebOERPERTViewCmdStateChange.bind(this,!0)},{eventName:{event:"onDELWebOERPERTViewCmdClose"},callback:this.onDELWebOERPERTViewCmdStateChange.bind(this,!1)}].forEach((e=>{this.subscribe(e.eventName,e.callback.bind(this))}))}onModeChange(e){let t,i=this,n=e.data||null,o={};if(this.config&&this.config.modes&&this.config.modes[n]){let e=this.config.modes[n],s=this.getToggleDataGridViewCommandState();Object.keys(e).forEach((t=>{if(i.PPRPANELS[t]){let n=i.PPRPANELS[t].currentDockArea;o[n]?UWA.is(o[n].collapseDockingZoneFlag,"boolean")&&!1!==o[n].collapseDockingZoneFlag&&(o[n].collapseDockingZoneFlag=e[t].collapseDockingZoneFlag):(o[n]={},o[n].collapseDockingZoneFlag=e[t].collapseDockingZoneFlag)}})),Object.keys(e).forEach((n=>{let a;if(i.PPRPANELS[n]){Object.keys(e[n]).forEach((r=>{switch(r){case"visible":i.PPRPANELS[n].visibleFlag=s&&e[n].visible;break;case"collapseDockingZoneFlag":a=i.PPRPANELS[n].currentDockArea,t=i.PPRPANELS[n].immersiveFrame.getDockingElement(a),t&&(t.collapseDockingZoneFlag=o[a].collapseDockingZoneFlag)}}))}}))}}onDELWebOERPERTViewCmdStateChange(e){let t=this.PPRPANELS&&this.PPRPANELS.PROCESS?this.PPRPANELS.PROCESS:null;if(t){let i=t.immersiveFrame.getDockingElement(t.currentDockArea);i&&(i.collapseDockingZoneFlag=e)}}getToggleDataGridViewCommandState(){return this.getCheckState({id:"DELWebOERToggleDataGridViewCmd"})}commandEnabled(){return this.isCheckExecutable("DELWebOERToggleDataGridViewCmd")}onToggleDataGridview(e={}){let t=!UWA.is(e.data.state,"boolean")||e.data.state;Object.keys(this.PPRPANELS).forEach((e=>t?this.PPRPANELS[e].show():this.PPRPANELS[e].hide()))}async onRootsChange(e={}){let t=this,i=e.data;UWA.is(i)&&0!==i.length?(t._updateLayout(i),i.forEach((e=>{t.prepareLayout(e.pprType)}))):await t.empty()}_getPanelOptions(e){let n=this.getComponentFromIdentifier(WAfrStandardComponentKey.UIFrame),o=e.name+"View";return{identifier:o,domId:o,icon:{iconPath:i.getAssetsUrl(e.icon.moduleName,e.icon.path),iconSize:{height:t.getTouchMode()?"22px":"16px",width:t.getTouchMode()?"22px":"16px"}},immersiveFrame:n.getImmersiveFrame(),currentDockArea:e.dockArea?WUXDockAreaEnum[e.dockArea]:WUXDockAreaEnum.LeftDockArea}}_snapPanels(e,t){let i,n=t,o=Object.keys(this.PPRPANELS).filter((i=>i!==t&&this.PPRPANELS[i].currentDockArea===e));if(o.length>0)for(i=o.length-1;i>=0;i--)this.PPRPANELS[o[i]].attachToWindow(this.PPRPANELS[n],WUXSnapAreaEnum.InsideArea,"before"),n=o[i]}_removePanel(e){this.getComponentFromIdentifier(e).removeContainer(),this.PPRPANELS[e].destroy(),delete this.PPRPANELS[e]}_updateLayout(e){var t=[...new Set(e.map((e=>e.pprType)))];Object.keys(this.PPRPANELS).forEach((e=>{e&&!t.includes(e)&&this._removePanel(e)}))}prepareLayout(e){var t,i=this.getToggleDataGridViewCommandState();this.commandEnabled()?UWA.is(this.config.LAYOUT[e],"array")?this.config.LAYOUT[e].forEach((e=>{if("PANEL"===e.type)t=this.config.VIEWOPTIONS&&this.config.VIEWOPTIONS.PANEL?this.config.VIEWOPTIONS.PANEL:{},Object.assign(t,this._getPanelOptions(e)),this.PPRPANELS[e.name]||(this.PPRPANELS[e.name]=new n(t),this.PPRPANELS[e.name].visibleFlag=i,this.getComponentFromIdentifier(e.name).setContainer(this.PPRPANELS[e.name].getContentContainer())),!0===e.snap&&this._snapPanels(WUXDockAreaEnum[e.dockArea],e.name)})):this.logger.error("Unable to create layout as configuration is not available for type : ",e):this.logger.debug("Toggle 2D structure command is disabled, layout cannot be prepared")}getContentContainer(e){if(UWA.is(this.PPRPANELS[e]))return this.PPRPANELS[e].getContentContainer();this.logger.error("Layout not available for type : ",e)}async empty(){Object.keys(this.PPRPANELS).forEach((e=>{this._removePanel(e)})),this.PPRPANELS={}}async clean(){this.empty(),await super.clean()}async destroy(){this.clean(),await super.destroy()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.prepareLayout=this.prepareLayout.bind(this),this.publicAPI.getContentContainer=this.getContentContainer.bind(this),this.publicAPI.empty=this.empty.bind(this),this.publicAPI}}})),define("DS/DELWeb3DOpersReviewAppV2/components/ContextualMenu3DComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/Selection/CSOManager"],(function(e,t,i){"use strict";const n="DELWebOERStatusBarState",o="DELWebOERViewerAmbience";function s(t){e.call(this,t),this._identifiers={view:t.viewIdentifier},this._contextConfigPath=t.ctxOptions,this._nlsAMDPath=t.nlsAMDPath,this._contextConfig=[],this._nls=null,this._nlsAMDPromises=[],this._wafrContextContainer=null,this._isContextBarVisible=!1,this._view=null}return s.prototype=Object.create(e.prototype),s.prototype.initialize=async function(){this._identifiers.view&&this._contextConfigPath||UWA.Promise.reject("Invalid parameters sent from .wafrapp file"),!0!==this._isComponentInitialized&&(this._view=this.getComponentFromIdentifier(this._identifiers.view),await this._loadConfigurationFromFile(),this._nls=await this.loadNLS(this._nlsAMDPath),this._updateCommandState(),this._setWafrContextBar(),await this._contextReady())},s.prototype.clean=function(){return new Promise((function(e){e()}))},s.prototype.destroy=function(){return new Promise((function(e){e()}))},s.prototype._loadConfigurationFromFile=async function(){for(let e=0;e<this._contextConfigPath.length;++e){let t=await this.loadJson(this._contextConfigPath[e]);this._contextConfig.push(t)}},s.prototype._updateCommandState=function(){for(let e=0;e<this._contextConfig.length;++e)for(let t=0;t<this._contextConfig[e].ContextMenu.onEmptiness.length;++t){const i=this._contextConfig[e].ContextMenu.onEmptiness[t];if(i.submenu)for(let e=0;e<i.submenu.length;++e)if("DELWebOERToggleStatusBarCmd"===i.submenu[e].handlerId){let e=window.localStorage.getItem(n);this.getCommandHandler().setCheckState({id:"DELWebOERToggleStatusBarCmd",state:!e||"true"===e})}else i.submenu[e].handlerId===window.localStorage.getItem(o)&&(i.submenu[e].state="selected",this.executeCommand({handlerId:i.submenu[e].handlerId}))}},s.prototype._contextReady=function(){return new Promise((e=>{this.getExecutionContext().setContext("ContextReady",!0),this._isComponentInitialized=!0,e()}))},s.prototype._prepareContextMenu=function(e,n,s){let a=[],r=[];if(!0===(0===n.length))a=e.ContextMenu.onEmptiness;else{if(!(i.get().length>0&&this._view._areValidPaths(i.get())))return[];a=e.ContextMenu.onGeometry}for(let e=0;e<a.length;++e){let i=a[e],n=[];if(i.submenu){let e="ambience"===i.identifier;for(let s=0;s<i.submenu.length;++s)n.push({title:this._nls[i.submenu[s].handlerId],type:i.submenu[s].type,handlerId:i.submenu[s].handlerId,icon:i.submenu[s].iconPath?t.getAssetsUrl(i.submenu[s].module,i.submenu[s].iconPath):void 0,state:i.submenu[s].state,action:{this:this,callback:function(e,t,i){if(!0===i){for(let t=0;t<e.length;++t)e[t].state=void 0;e[t].state="selected",window.localStorage.setItem(o,e[t].handlerId)}this.executeCommand({handlerId:e[t].handlerId})}.bind(this,i.submenu,s,e)}})}const s={title:n.length>0?this._nls[i.identifier]:null,type:i.type,handlerId:n.length>0?null:i.handlerId,state:n.length>0?null:i.state,action:n.length>0?null:{this:this,callback:function(e){e&&this.executeCommand({handlerId:e})}.bind(this,i.handlerId)}};n.length>0&&(s.submenu=n),r.push(s)}return r},s.prototype._prepareContextBar=function(e,t,n){if(!0===(0===t.length))return[];if(i.get().length>0&&this._view._areValidPaths(i.get())){const t=this._view.getController().getRoots(),n=i.get();let o=!1;for(let e=0;e<n.length;++e){const i=this._view.streamPath(n[e].pathElement);for(let e=0;e<t.length;++e){let n=t[e].getModelIdentification();if(1===i.length&&n===i[0]){o=!0;break}}if(!0===o)break}return!0===o?e.ContextBar:{WAfrCtxBarRow1:{model:[e.ContextBar.WAfrCtxBarRow1.model[0]]}}}return[]},s.prototype._setWafrContextBar=function(){var e=this.getComponentFromIdentifier(WAfrStandardComponentKey.UIComponent);this._wafrContextContainer=e.getContextualUIComponentManager();for(let e=0;e<this._contextConfig.length;++e){const t={subscriberId:`DELWeb3DContextualBar-${e}`,merge:!0,onContextualMenuReady:function(e,t){return this._prepareContextMenu(e,this.getPickedPath(t),t)}.bind(this,this._contextConfig[e]),onContextualBarReady:function(e,t,i){return this._prepareContextBar(e,this.getPickedPath(i),i)}.bind(this,this._contextConfig[e])};this._wafrContextContainer.register(t)}},s.prototype.getPickedPath=function(e){return this._view.get3DViewer().pick({xPix:e.XmousePositionWithDevPxRatio,yPix:e.YmousePositionWithDevPxRatio},"mesh",!0).path},s.prototype.setContextBarVisibility=function(e){var t=this._wafrContextContainer.getContextualBar();!0===e?(this._isContextBarVisible=!0,t.show()):(this._isContextBarVisible=!1,t.hide())},s.prototype.canBeParallelized=function(){return!1},s.prototype.getExposedComponent=function(){},s})),define("DS/DELWeb3DOpersReviewAppV2/actions/StandardActions",["DS/Logger/Logger","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin","i18n!DS/DELWeb3DOpersReviewAppV2/assets/nls/DELWeb3DOpersReviewAppV2"],(function(e,t,i,n,o){"use strict";const s=e.getLogger("DS/DELWeb3DOpersReviewAppV2/actions/StandardActions"),a="toOpen",r="ds6w:label",l="Graphics";async function d({executionContext:e}){let t=e.getComponent(WAfrStandardComponentKey.HandlerComponent),i=e.getComponent("SessionModel").get("roots"),n=e.getComponent("DELWebViewer"),o=n.getRoots();i.length>0&&o.length!==i.length&&(await n.addRoots({items:i}),await t.executeHandler({id:"VisuIsoViewCmd"}))}async function p(e){if(!(e&&e.executionContext&&e.args))throw new Error("Invalid Input, make sure property executioncontext and args are present");let t=e.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent),i=e.args.originalHandlerId;await t.executeHandler({id:i,args:e.args})}return{activateGraphView:async function(e,t){try{let e=t.executionContext.getComponent("DELWebViewer"),i=e.getRoots();i&&i.length>0&&await e.empty(),await p(t)}catch(e){s.error(e)}finally{e()}},deactivateGraphView:async function(e,t){try{let e=t.executionContext;await p(t),await d({executionContext:e})}catch(e){s.error(e)}finally{e()}},activateBuildUp:async function(e,t){try{let e=t.executionContext,i=e.getComponent("DELGraphViewer");i&&await i.empty(),await d({executionContext:e}),await p(t)}catch(e){s.error(e)}finally{e()}},onOpen:async function(e,i){let d=i.executionContext,p=d.getComponent("SessionModel"),c=d.getComponent("DELCommonUtilsServices"),h=Promise.resolve(),u=d.getComponent("mod_WelcomeScreen"),m=d.getComponent("Application"),g=d.getComponent(WAfrStandardComponentKey.HandlerComponent),f=i.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents),b=i.executionContext.getComponent(WAfrStandardComponentKey.NotificationManager),C=i.args;f.publish({event:"COMPLETE_DEL_TPB"}),u.hideWelcomeScreen(),m&&m.resetAppOnProcessOpen(C.results),p.set(a,null),C.results&&h.then((async function(){C.results=C.results.map((e=>(e.filterProxy&&(delete e.filterProxy,delete e.filterProxies),e))),s.log("Open completed  - ",JSON.stringify(C));let e=[...C.results];if(e){e.forEach((async e=>{n.isProcess(e.pprType)&&(e.scopedMfg&&0!==e.scopedMfg.length||b.addNotif({level:"error",message:o.get("ScopedMfgNotFound.Error.Message")}))}));let t=e.filter((e=>!e.hasOwnProperty("label")));if(t.length>0){let e=t.map((e=>e.id)),i=await c.getAttributeForIds(e,[r]);t.forEach((e=>{i[e.id]&&(e.label=i[e.id][r])}))}}g.executeHandler({id:"DELWebOERAddRoots",args:{items:e}}),g.executeHandler({id:"DELWebOERSetMode",args:{mode:l}}),m.setOpenContentUIVisibility(!1),f.publish({event:"COMPLETE_DEL_TPB"}),u.hideWelcomeScreen(),performance.mark("OpenEnd");let i=performance.measure("Duration","OpenStart","OpenEnd");t.trackChanges({executionContext:d,category:"Performance",action:"RecordPerformance",label:"OpenedObjects",dims:{pd1:"True"},vals:{pv1:i?i.duration:null}})})),e()},onError:async function(e,i){let n=i.args;i.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents).publish({event:"COMPLETE_DEL_TPB"}),s.error(JSON.stringify(n)),performance.mark("OpenEnd");let o=performance.measure("Duration","OpenStart","OpenEnd");t.trackChanges({executionContext:i.executionContext,category:"Performance",action:"RecordPerformance",label:"OpenedObjects",dims:{pd1:"False",pd2:"openControl"},vals:{pv1:o?o.duration:null}}),e()},onCancel:async function(e,i){let n=i.executionContext.getComponent("DELWebViewer"),o=i.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents),s=i.executionContext.getComponent("SessionModel").get("roots");o.publish({event:"COMPLETE_DEL_TPB"}),UWA.is(s)||n.empty(),performance.mark("OpenEnd");let a=performance.measure("Duration","OpenStart","OpenEnd");t.trackChanges({executionContext:i.executionContext,category:"Performance",action:"RecordPerformance",label:"OpenedObjects",dims:{pd1:"False",pd2:"openControl"},vals:{pv1:a?a.duration:null}}),e()},removeAll:async function(e,t){let i=t.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent),n=t.executionContext.getComponent("mod_WelcomeScreen");n&&n.showWelcomeScreen(),i.hasHandler("DELWebOERClean")&&await i.executeHandler({id:"DELWebOERClean"}),e()},loadXGenComponents:function(e,t){const i={stepValue:1,simulateProgressInStep:!0,fullBarForEachStep:!0,steps:[{weight:100,text:o.get("Loader.Loading.Message")}]};let n=t.executionContext,a=n.getComponent(WAfrStandardComponentKey.ModelEvents),r=!!(t&&t.args&&UWA.is(t.args.displayLoader,"boolean"))&&t.args.displayLoader,l=n.getComponent("DELCommonUtilsServices"),d=n.getComponent(WAfrStandardComponentKey.WidgetProxyComponent);return s.debug("PlaySnapShot component intialized :"+UWA.is(n.getComponent("PlaySnapShot"))),s.debug("ModelAccess component intialized :"+UWA.is(n.getComponent("ModelAccess"))),new Promise((()=>{if(!0===l.isCloud()&&!1===d.getValue("usePublishedContent")&&"true"!==n.getContext().xGenWKIS){widget.enopadViewer=n.getComponent("Viewer");let t=a.subscribe({event:"onDidContextualComponentsUpdate"},(function(){s.debug("PlaySnapShot component intialized :"+UWA.is(n.getComponent("PlaySnapShot"))),s.debug("ModelAccess component intialized :"+UWA.is(n.getComponent("ModelAccess"))),a.unsubscribe(t),r&&a.publish({event:"COMPLETE_DEL_TPB"}),e()}));r&&a.publish({event:"START_DEL_TPB",data:i}),n.setContext("xGenWKIS",!0)}else e()}))}}})),define("DS/DELWeb3DOpersReviewAppV2/mixins/OpenControllerMixin",["UWA/Core","UWA/Class/Promise","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/DELWebOERCommonUtils/utils/CommonUtils","text!DS/DELWeb3DOpersReviewAppV2/assets/json/AppComponentConfig.json","i18n!DS/DELWeb3DOpersReviewAppV2/assets/nls/DELWeb3DOpersReviewAppV2"],(function(e,t,i,n,o,s){"use strict";const a="roots",r="usePublishedContent",l="DELOERStartupViewData",d="autoReload",p="SessionData",c="ViewerContentLoaded",h="TableViewContentLoaded",u="toOpen",m="DELWebOERAppReady",g="ds6w:type",f="ENOStrRefinementSpecification",b="onLoadDataComplete",C="onLoadDataFailure",E=JSON.parse(o);return{_open:async function(t){let n,o=this.getComponentFromIdentifier("SessionModel"),r=this.getComponentFromIdentifier("mod_WelcomeScreen"),l=this.getNotificationManager(),d=(o.get(a),this),p=async function(e){return await d.commonServicesComponent.executeRequestPromise(`${d.commonServicesComponent.get3DSpaceUrl()}/resources/v1/modeler/dsadvfilter/dsadvfilter:AdvFilter/${e.id}?$mask=dsadvfilter:AdvFilterMask.FilterSpec`,{method:"GET"})};if(t&&!0===t.clear&&await d.executeCommand({handlerId:"DELWebOERClean"}),t&&t.items&&t.items.length>0){let o=e.clone(t);await async function(t){let i=!0;if(t&&e.is(t.items,"array")&&t.items.length>0){let o=await d.commonServicesComponent.getTaxonomies(t.items.map((e=>e.id)));for(let a of t.items)if(o&&Object.keys(o).length===t.items.length&&o[a.id].includes(f))try{let t=await p(a);t&&e.is(t.member,"array")&&t.member.every((t=>e.is(t.referencedObject)&&e.is(t.referencedObject.identifier)))?t.member.forEach((e=>{a.id=e.referencedObject.identifier,a.withFilter=!0,a.publicFilterSpec={specification:e}})):d.logger.error("Invalid root object")}catch(e){i=!1,n=s.get("Error.FILTER.Failed.Message"),l.addNotif({level:"warning",message:n}),d.logger.error(n+": "+JSON.stringify(t)),d.logger.error("WebService Call Failed. Unable to fetch root and Filter spec",e)}}return i}(t)?(performance.mark("OpenStart"),await async function(){return t&&t.items?await async function(){var o,a=E.supported_types,r=E.unsupported_types,p=E.unsupported_multiroot_process_types,c=!0,h=await d.commonServicesComponent.getTaxonomies(t.items.map((e=>e.id))),u=function(e,n){i.trackChanges({executionContext:d.getExecutionContext(),category:"OpenedObjects",action:"LoadOpenedObjects",label:"OpenedObjects",dims:{pd1:e.type?e.type:e.pprType,pd2:e.pprType,pd3:t.length>1?"True":"False",pd4:n?"True":"False",pd5:e.withFilter?"True":"False"}})};if(h&&Object.keys(h).length===t.items.length){if(t.items.forEach((function(e){e.pprType=d.commonServicesComponent.getPPRType(h[e.id])})),t.items.length>1?(o=t.items.find((e=>p.some((t=>h[e.id].includes(t))))))?(c=!1,n=s.get("ProcessNotSupportedMultiRootScenarios.Error.Message"),u(o,c)):(o=t.items.find((e=>!a.some((t=>h[e.id].includes(t)))||r.some((t=>h[e.id].includes(t))))))&&u(o,c=!1):1===t.items.length&&!1===(c=a.some((e=>h[t.items[0].id].includes(e)))&&!r.some((e=>h[t.items[0].id].includes(e))))&&u(o=t.items[0],c),!1===c){if(void 0===n&&o&&o.id){let e=await d.commonServicesComponent.getAttributeForIds([o.id],[g]);n=s.replace(s.get("Error.TypesNotSupported.Message"),{type:e[o.id][g]})}e.is(n,"string")&&l.addNotif({level:"warning",message:n}),d.logger.error("Type not supported :",JSON.stringify(t))}}else n=s.get("NoObjectInformation.Error.Message"),l.addNotif({level:"warning",message:n}),c=!1,d.logger.error(n+": "+JSON.stringify(t));return c}():(d.logger.error("items property is missing, please check the format"),!1)}()?(r.addMRUItems({ids:o.items.map((e=>e.id))}),this.resetAppOnProcessOpen(t.items),this._openWithControl(t)):this.executeCommand({handlerId:"DELWebOEROnError",args:{error:{message:"Invalid input provided, please check the input"}}})):this.executeCommand({handlerId:"DELWebOEROnError",args:{error:{message:"Unable to fetch root from Advance filter"}}})}else this.executeCommand({handlerId:"DELWebOEROnCancel"})},_getPartFabricationState:async function(){let t=await n.fetchMePreferenceValue({Repository:"3DOperationsViewerRepository",PreferenceName:"DELOER_PARTFABRICATION"});return!e.is(t,"boolean")||t},_openWithControl:async function(e){let t=this,i=this.getComponentFromIdentifier("DELWebViewer"),n=this.getComponentFromIdentifier("PROCESS"),o=this.getComponentFromIdentifier("OpenControl"),s=this.getWidgetComponent();e&&e.items&&e.items.length>0?o.open({items:e.items.map((e=>({installVolumeOffSet:s.getValue("installVolumeOffSet"),installAutoApplyVolume:s.getValue("installAutoApplyVolume"),usePublication:s.getValue(r),...e}))),showForm:!0,enablePartFabrication:await t._getPartFabricationState(),version:"V3",filterProxies:{PROCESS:{filterProxy:n.getFilterProxy(),NGFUXId:n.getNGFUXID()},"3DViewer":{filterProxy:i.getDELViewerFilterProxy(),NGFUXId:i.getDELViewerNGFUXID()}},onOpen:{handler:"DELWebOEROnOpen"},onError:{handler:"DELWebOEROnError"},onCancel:{handler:"DELWebOEROnCancel"}}):this.executeCommand({handlerId:"DELWebOEROnCancel"})},open:async function(e){let t=this,i=t.getExecutionContext().getContext(),n=t.getComponentFromIdentifier("SessionModel"),o=function(){t.publish({event:"START_DEL_TPB",data:{stepValue:1,simulateProgressInStep:!0,fullBarForEachStep:!0,steps:[{weight:100,text:s.get("ProgressBar.Text.Loading")}]}})};n.set(u,null),t._checkLoadingStatus(e);try{i&&i[m]?(o(),t._open(e)):(n.set(u,e),o())}catch(t){this.executeCommand({handlerId:"DELWebOEROnError",args:{error:{message:`Failed to fetch attributes for the object id ${e.id} ${t.toString()}`}}})}},openWithCache:function(t){if(!this.getComponentFromIdentifier("WidgetLinkManager").isLinked()){let t,i=this,n=i.getComponentFromIdentifier("SessionModel").get(u),o=this.getWidgetComponent().getValue(d),a=this._getSessionData(),r=this.getWidgetComponent().getValue(l);if(o&&r){i.getNotificationManager().addNotif({level:"warning",title:s.get("Failed.StartupViewLoading.Title"),subtitle:s.get("Failed.StartupViewLoading.Subtitle"),message:s.get("Failed.StartupViewLoading.Message"),sticky:!1})}o&&a&&e.is(a.items,"array")?(t=a,t.items.forEach((e=>{e.reframe=!0,e.operation&&(e.operation={})}))):r&&!o?t=r.data:n&&(t=n),t&&i.open(t)}},checkLinkAndOpen:function(e){let t=this.getComponentFromIdentifier("WidgetLinkManager");this._publish("onDropData",e),t.isLinked()?this.logger.debug("Widget is linked, OER app will not open data"):this.open(e)},_checkLoadingStatus:function(e){var t=this,i=[],n=this.getComponentFromIdentifier("SessionModel"),o=function(){i&&i.length>0&&i.forEach((e=>{t.unsubscribe(e)})),i=[]},s=e&&e.items?e.items:[],r=function(i,r,l){let d=l&&l.id?l:l.data&&l.data.id?l.data:null;if(d&&s&&s.length>0){let l=0;s.forEach((e=>{e.id===d.id&&(e[i]=r)})),!1===r?(this._publish(C,{items:[d]}),o()):(s.forEach((e=>{!0!==e[c]||!0!==e[h]&&!1!==t.isCheckExecutable("DELWebOERToggleDataGridViewCmd")||l++})),l===s.length&&(this._publish(b,e),o(),this._setSessionData({items:n.get(a)||[]})))}};[{name:"onProcessLoadCompleted",callback:r.bind(this,c,!0)},{name:"onProcessLoadFailed",callback:r.bind(this,c,!0)},{name:"onRootAdded",callback:r.bind(this,c,!0)},{name:"onLoadingFailure",callback:r.bind(this,c,!1)},{name:"on2DRootAdded",callback:r.bind(this,h,!0)},{name:"on2DRootAddFailed",callback:r.bind(this,h,!1)}].forEach((e=>{i.push(t.subscribe({event:e.name},e.callback))}))},_getSessionData:function(){return this.getWidgetComponent().getValue(p)},_removeFilter:function(t){function i(e){e&&(e.filter||!0===e.withFilter)&&(e.withFilter=!1,delete e.filter)}t&&e.is(t.items,"array")&&t.items.length>0&&t.items.forEach((t=>{i(t),e.is(t.scopedMfg,"array")?t.scopedMfg.forEach(i):i(t.scopedMfg),e.is(t.resource,"array")?t.resource.forEach(i):i(t.resource)}))},_setSessionData:function(t){let i=e.clone(t);this._removeFilter(i),this.getWidgetComponent().setValue(p,i)},_toggleStartupView(e,t={}){let i=this.getWidgetComponent();e?i.setValue(l,t):i.deleteValue(l)},_isCacheAvailable(){let t=this.getWidgetComponent(),i=t.getValue(p);return e.is(t.getValue(l))||t.getValue(d)&&i&&e.is(i.items,"array")},_publish:function(e,t){this.publish({event:e,data:{data:t}})}}})),define("DS/DELWeb3DOpersReviewAppV2/components/ProcessMBOMComp",["DS/DELWeb3DOpersReviewAppV2/components/MBOMComp","DS/DELWeb3DOpersReviewAppV2/mixins/HideShowColumnMixin"],(function(e,t){"use strict";class i extends e{constructor(e){super(e)}async initialize(){await super.initialize(),[{eventName:{event:"onBuildUpActivated"},callback:this._onBuildUpActivated},{eventName:{event:"onBuildUpDeactivated"},callback:this._onBuildUpDeactivated},{eventName:{event:"DS/DELWebViewer/onEmpty"},callback:this.updateHideShowColumn.bind(this,!0,!0)}].forEach((e=>{this.subscribe(e.eventName,e.callback.bind(this))}))}_onBuildUpActivated(){this.updateHideShowColumn.call(this,!1,!0),this.isMaterialColumnEnabled()&&this.updateMaterialColumn.call(this,!1,!0)}_onBuildUpDeactivated(){this.updateHideShowColumn.call(this,!0,!0),this.isMaterialColumnEnabled()&&this.updateMaterialColumn.call(this,!0,!0)}async addRoots(e={}){let t=e.items||[],i=[];t.forEach((async e=>{UWA.is(e.scopedMfg,"array")?i=i.concat(e.scopedMfg):e.scopedMfg&&i.push(e.scopedMfg)})),await super.addRoots({items:i}),this.updateMaterialColumn(this.isMaterialColumnEnabled()),this.updateHideShowColumn(!0)}isMaterialColumnEnabled(){return this.getRoots().filter((e=>e&&e.scopedMfg&&e.scopedMfg.outofScope)).length>0}_onApplyFilter(e){let t,i,n,o=this,s=this.getRoots();s&&e&&e.data&&e.data.filterRootIds&&1===e.data.filterRootIds.length&&(t=!0!==e.data.empty?e.data.CVQueryV2.filter:null,i=e.data.filterRootIds[0],s.forEach((function(e){e&&e.scopedMfg&&(e.scopedMfg.id===i||e.scopedMfg.occurrence&&e.scopedMfg.occurrence[0]===i)&&(e.scopedMfg.filter=t)})),n=s.find((e=>e&&e.scopedMfg&&(e.scopedMfg.id===i||e.scopedMfg.occurrence&&e.scopedMfg.occurrence[0]===i))),n&&o.addRoots({items:[n]}))}async removeRoots(e={}){let t=e.items||[],i=[];t.forEach((async e=>{e.scopedMfg&&i.push(e.scopedMfg)})),await super.removeRoots({items:i})}getRoots(){return(super.getRoots()||[]).map((e=>({scopedMfg:e})))}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI}}return i.prototype.mixinProperties(i,t),i})),define("DS/DELWeb3DOpersReviewAppV2/components/AppComponent",["DS/UIKIT/Mask","DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADSharedSettings","DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWeb3DOpersReviewAppV2/mixins/OpenControllerMixin","DS/DELWeb3DOpersReviewAppV2/mixins/CommandsAvailabilityMixin","DS/DELWeb3DOpersReviewAppV2/mixins/ManageAppPreferencesMixin","DS/DELWeb3DOpersReviewAppV2Commands/DELOERRightSidePanel","DS/DELWebOERCommonUtils/mixins/TypesUtilsMixin","DS/DELWeb3DOpersReviewAppV2/view/DELOpenContentUI","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/PlatformAPI/PlatformAPI","i18n!DS/DELWeb3DOpersReviewAppV2/assets/nls/DELWeb3DOpersReviewAppV2","text!DS/DELWeb3DOpersReviewAppV2/assets/json/AppComponentConfig.json"],(function(e,t,i,n,o,s,a,r,l,d,p,c,h,u){"use strict";const m="DELCommonUtilsServices",g=JSON.parse(u),f={stepValue:1,simulateProgressInStep:!0,fullBarForEachStep:!0,steps:[{weight:100,text:h.get("LoadingGraph.Title")}]};class b extends n{constructor(e){super(e)}async initialize(){let e=this;if(await super.initialize(),this.commonServicesComponent=e.getComponentFromIdentifier(m),!this.commonServicesComponent)throw new Error(`Common services component with identifier ${m} not found, please make sure ${m} component is available`);if(g.sharedSettings){let t=e.getComponentFromIdentifier("Widget").getSessionWidget();i.addSharedSettings(t,g.sharedSettings),this.subscribeToCommandsAvailability(),[{eventName:{event:"open"},callback:e.checkLinkAndOpen},{eventName:{event:"loadData"},callback:e.open},{eventName:{event:"openWithFilter"},callback:e._openWithControl},{eventName:{event:"onUpdatePreferences"},callback:e.updateOptions},{eventName:{event:"onDelWebOERAppReady"},callback:e._onAppReady},{eventName:{event:"DS/DELWebViewer/onStartupViewSet"},callback:e._toggleStartupView.bind(e,!0)},{eventName:{event:"DS/DELWebViewer/onStartupViewRemoved"},callback:e._toggleStartupView.bind(e,!1)},{eventName:{event:"onWKIFailed"},callback:function(t){let i=e.getNotificationManager();t=t||{},e.logger.error(JSON.stringify(t)),i.addNotif({level:"warning",message:h.get("Warn.WKIFailed.Message")})}},{eventName:{event:"load2DStructure"},callback:e._load2DStructure},{eventName:{event:"remove2DStructure"},callback:e._remove2DStructure},{eventName:{event:"refresh"},callback:e._onRefresh.bind(e)},{eventName:{event:"getContent"},callback:e._onGetContent},{eventName:{event:"freeze"},callback:e._freeze},{eventName:{event:"unFreeze"},callback:e._unFreeze},{eventName:{event:"onWidgetLinked"},callback:e._onWidgetLinked},{eventName:{event:"onWidgetUnlinked"},callback:e._onWidgetUnlinked},{eventName:{event:"show2DStructure"},callback:e._toggle2DStructureVisibility.bind(e,!0)},{eventName:{event:"hide2DStructure"},callback:e._toggle2DStructureVisibility.bind(e,!1)},{eventName:{event:"setAppConfig"},callback:e._setAppConfig},{eventName:{event:"onModelChange:roots"},callback:e._onRootsChange},{eventName:{event:"DS/DELGraphViewer/onActivateGraphViewStart"},callback:e.onActivateGraphViewStart.bind(this)},{eventName:{event:"DS/DELGraphViewer/onActivateGraphViewCompleted"},callback:this.onActivateGraphViewCompleted.bind(this)},{eventName:{event:"DS/DELGraphViewer/onActivateGraphViewFailed"},callback:this.onActivateGraphViewFailed.bind(this)}].forEach((t=>{this.subscribe(t.eventName,t.callback.bind(e))})),e.getWidgetComponent().addEvent("onRefresh",e._onRefresh.bind(e)),e.getWidgetComponent().addEvent("onSearch",(function(t){e.publish({event:"onSearch",data:{data:t}})}))}let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.UIFrame);t&&(this._openContentUI=new d({searchCB:function(){e.executeCommand({handlerId:"SearchAndOpen"})}}),this._openContentUI.hide(),this._loaderLayer=t.addLayer(this._openContentUI.getView(),{top:0,bottom:0,right:0,left:0,height:"100%",width:"100%",pointerEvents:"none"}))}async onActivateGraphViewStart(){this.publish({event:"START_DEL_TPB",data:f})}async onActivateGraphViewCompleted(){this.publish({event:"COMPLETE_DEL_TPB",data:f})}async onActivateGraphViewFailed(){this.publish({event:"COMPLETE_DEL_TPB",data:f})}_onRootsChange(e){e&&UWA.is(e.data,"array")&&e.data.length>0?this._openContentUI.hide():this._openContentUI.show(),this._updateHeader(e)}_updateHeader(e){let t=this.getWidgetComponent(),i=null;e&&UWA.is(e.data,"array")&&e.data.length>0&&(i=e.data[0].label,e.data.length>1&&(i=h.get("HeaderUpdate.Title",{title:e.data[0].label,count:e.data.length-1}))),t.setTitleHeader({title:i})}_setAppConfig(e,t=!1){this._setAppConfigParams=e;let i,n,o=this,s=[];Object.keys(e).forEach((a=>{switch(a){case"commands":i=this.getCommandHandler(),n=function(e){let t,i=o.getCommandHandler();return t=i.hasRadioHandler(e)?"radio":i.hasCheckHandler(e)?"check":"default",t},UWA.is(e.commands,"array")&&(e.commands.forEach((e=>{if(e.handlerType=n(e.identifier),UWA.is(e.disable,"boolean")&&(e.force=!0!==t,e.disable=!0===t?!e.disable:e.disable,s.push(e)),UWA.is(e.state,"boolean")){let n=i.getCheckState({id:e.identifier});(!0===t?!e.state:e.state)!==n&&i.toggleCheck({id:e.identifier})}})),s.length>0&&o.getComponentFromIdentifier("CommandsAvailability").updateCommands(s));break;case"viewer":if(UWA.is(e.viewer,"array")){let t=o.getComponentFromIdentifier("DELWebViewer");e.viewer.forEach((e=>{t&&e&&UWA.is(e.name)&&UWA.is(e.value)&&t.updateOptions({[e.name]:e.value})}))}break;case"general":UWA.is(e.general,"array")&&e.general.forEach((e=>{if(e&&UWA.is(e.name)&&UWA.is(e.value)){let t;if("showDragAndDropPage"===e.name)t=o.getComponentFromIdentifier("DragAndDropPageComp"),t.toggleVisibilty(e.value)}}));break;case"preferences":if(UWA.is(e.preferences,"array")){let t=o.getComponentFromIdentifier("Preferences");e.preferences.forEach((e=>{t&&e&&UWA.is(e.name)&&UWA.is(e.value)&&t.setValue(e.name,e.value)})),o.getWidgetComponent().dispatchEvent("endEdit",{submitted:!0,needRefresh:!0}),o.getWidgetComponent().dispatchEvent("onRefresh")}}}))}async _fetchCustomAttributes(){let e,t,i=this,n=i.getComponentFromIdentifier(m),o={},s=g.Attributes;if(e=await async function(){let e;try{let t="/resources/delmia/param/configuration/getParameters?domainID=DEL3DOperationsViewer&familyID=DEL3DOperationsViewerAttributesDisplayFamily&paramID=DEL3DOperationsViewerAttributesListParam&argID=DEL3DOperationsViewerAttributesListArg";e=await n.executeRequestPromise(`${n.get3DSpaceUrl()+t}`,{method:"GET"})}catch(e){i.logger.error("Failed to retrieve custom attribute information",e)}return e}(),UWA.is(e,"array")&&e.length>0){e=function(e){const t=new Set;return e.filter((e=>{if(UWA.is(e.corpusType)&&UWA.is(e.attribute)&&UWA.is(e.entityType)){let n=`${e.corpusType}.${e.entityType}.${e.attribute}`;return t.has(n)?(i.logger.warn("Duplicate attribute data available ",e),!1):(t.add(n),!0)}return i.logger.error("Invalid attribute data as some of the values are missing (attribute, entityType, corpusType) ",e),!1}))}(e),t=await async function(e){let t;try{t=await n.executeRequestPromise(`${n.get3DSpaceUrl()}/resources/v2/delviewerservices/private/invoke/getIndexAttributeData`,{method:"POST",payload:{attributes:e}})}catch(e){i.logger.error("Failed to retrieve Index Attribute information : ",e)}return t}(e),t&&UWA.is(t.results,"array")&&t.results.forEach((e=>{UWA.is(o[e.corpusType],"array")||(o[e.corpusType]=[]),o[e.corpusType].push(e)})),Object.keys(o).forEach((e=>{o[e].sort(((e,t)=>parseInt(e.rowIndex)<parseInt(t.rowIndex)?-1:parseInt(e.rowIndex)>parseInt(t.rowIndex)?1:0))}));let a=s.CorpusTypeToComponentMap,r=[];Object.keys(o).forEach((e=>{let t=a[e];UWA.is(t,"array")&&t.length>0&&t.forEach((t=>{r.push(i.getComponentFromIdentifier(t).setColumnsForAttibutes([...o[e]]))}))}));try{await Promise.all(r)}catch(e){i.logger.error("Failed to set column attributes ",e)}}}async _onAppReady(){"WorkInstructions"===this.getWidgetComponent().getValue("defaultViewerMode")&&await this.executeCommand({handlerId:"DELWebOERLoadXGenCompCmd",args:{displayLoader:!1}}),await this._fetchCustomAttributes(),this._setMode("Graphics"),this._handleMePreferences(),this.updateOptions(!0),this._rightSidePanelCmd=new r({executionContext:this.getExecutionContext()}),this.openWithCache()}async _handleMePreferences(){let e=this.getComponentFromIdentifier("Viewer");try{await p.fetchMePreferences([{Repository:"VisualizationRepository",PreferenceNames:["Gravity"]},{Repository:"FrameGeneral",PreferenceNames:["ProjectionType"]}]).then((function(t){if(t&&t.repositories&&t.repositories.length){if(t.repositories[0].preferences&&1===t.repositories[0].preferences.length){const i="true"===t.repositories[0].preferences[0].value;e.getViewer().currentViewpoint.control.lockZ=i}if(t.repositories[1]&&t.repositories[1].preferences&&1===t.repositories[1].preferences.length){const i="Parallel"===t.repositories[1].preferences[0].value?1:0;e.getViewer().currentViewpoint.setProjectionType(i)}}}))}catch(e){console.warn("MePreference service error message",e)}c.subscribe("com.ds.mep:onPrefUpdate",(function(t){if(3===t.length&&t[1].preferences){const i=JSON.parse(t[1].preferences);for(let t=0;t<i.repositories.length;++t)if("VisualizationRepository"===i.repositories[t].name||"FrameGeneral"===i.repositories[t].name){const n=i.repositories[t].preferences;for(let t=0;t<n.length;++t){if("Gravity"===n[t].name&&e&&e.getViewer()&&e.getViewer().currentViewpoint){const i="true"===n[t].value;e.getViewer().currentViewpoint.control.lockZ=i}if("ProjectionType"===n[t].name){const i="Parallel"===n[t].value?1:0;e.getViewer().currentViewpoint.setProjectionType(i)}}}}}))}_onRefresh(){this._setMode("Graphics"),this.refresh()}_setMode(e){this.executeCommand({handlerId:"DELWebOERSetMode",args:{mode:e}})}_toggle2DStructureVisibility(e){const t=this.getExecutionContext().getComponent(WAfrStandardComponentKey.HandlerComponent);e!==t.getCheckState({id:"DELWebOERToggleDataGridViewCmd"})&&t.toggleCheck({id:"DELWebOERToggleDataGridViewCmd"})}_onWidgetLinked(){this.getComponentFromIdentifier("DELWebViewer").updateOptions({startUpView:this._getStartupViewOptions()})}_onWidgetUnlinked(){this.getComponentFromIdentifier("DELWebViewer").updateOptions({startUpView:this._getStartupViewOptions()}),this._setAppConfigParams&&UWA.is(this._setAppConfigParams.commands,"array")&&(this._setAppConfig(this._setAppConfigParams,!0),this._setAppConfigParams=null)}_load2DStructure(){let e=this;this.enableCheck("DELWebOERToggleDataGridViewCmd"),(this.getComponentFromIdentifier("SessionModel").get("roots")||[]).forEach((t=>{this.getComponentFromIdentifier("AppLayout").prepareLayout(t.pprType);let i={items:[t]};switch(t.pprType){case e.PPRTYPES.PROCESS:e.getComponentFromIdentifier("PROCESS").addRoots(i),e.getComponentFromIdentifier("PROCESS_MBOM").addRoots(i),e.getComponentFromIdentifier("PROCESS_RESOURCE").addRoots(i);break;case e.PPRTYPES.SERVICEPROCESS:e.getComponentFromIdentifier("PROCESS").addRoots(i),e.getComponentFromIdentifier("PROCESS_SBOM").addRoots(i),e.getComponentFromIdentifier("PROCESS_RESOURCE").addRoots(i);break;default:e.getComponentFromIdentifier(t.pprType).addRoots(i)}}))}_remove2DStructure(){this.logger.warn('"DS/DELExternalWidgetCom/Remove2DStructure" linkability event is deprecated, use setAppConfig to disable 2D structure');let e=this;this.getComponentFromIdentifier("AppLayout").empty(),(this.getComponentFromIdentifier("SessionModel").get("roots")||[]).forEach((t=>{switch(t.pprType){case e.PPRTYPES.PROCESS:e.getComponentFromIdentifier("PROCESS").empty(),e.getComponentFromIdentifier("PROCESS_MBOM").empty(),e.getComponentFromIdentifier("PROCESS_RESOURCE").empty();break;case e.PPRTYPES.SERVICEPROCESS:e.getComponentFromIdentifier("PROCESS").empty(),e.getComponentFromIdentifier("PROCESS_SBOM").empty(),e.getComponentFromIdentifier("PROCESS_RESOURCE").empty();break;default:e.getComponentFromIdentifier(t.pprType).empty()}})),this.disableCheck("DELWebOERToggleDataGridViewCmd")}_onGetContent(){this._publish("onGetContent",{items:this.getComponentFromIdentifier("SessionModel").get("roots")})}_freeze(){this._showMask()}_unFreeze(){this._removeMask()}async clean(){await super.clean(),this.unsubscribeToCommandsAvailability()}async destroy(){this._rightSidePanelCmd.destroy(),await super.destroy()}loadDataFromCache(){if(!this.getComponentFromIdentifier("WidgetLinkManager").isLinked())if(this._isCacheAvailable())this.publish({event:"START_DEL_TPB",data:{stepValue:1,simulateProgressInStep:!0,fullBarForEachStep:!0,steps:[{weight:100,text:h.get("ProgressBar.Text.AutoLoading")}]}});else{let e=this.getWidgetComponent().getValue("X3DContentId");if(e=UWA.is(e,"string")?JSON.parse(e):e,UWA.is(e)&&UWA.is(e.data)&&UWA.is(e.data.items,"array")&&e.data.items.length>0){let t={items:e.data.items.map((e=>({id:e.objectId,type:e.objectType,label:e.displayName,withFilter:!1})))};this.open(t)}}}setOpenContentUIVisibility(e){!0===e?this._openContentUI.show():this._openContentUI.hide()}async resetAppOnProcessOpen(e){let t=this.getComponentFromIdentifier("SessionModel").get("roots");if(t&&t.length>0&&(UWA.is(e,"array")&&1===e.length&&l.isProcess(e[0].pprType)||1===t.length&&l.isProcess(t[0].pprType))){let i=UWA.is(e,"array")&&1===e.length?e[0]:null;!i||1!==t.length||i.id!==t[0].id||!0!==t[0].withFilter&&!0!==i.withFilter||(t[0].filterUpdated=!0),await this.executeCommand({handlerId:"DELWebOERClean"}),this._setSessionData({})}}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.loadDataFromCache=this.loadDataFromCache.bind(this),this.publicAPI.setOpenContentUIVisibility=this.setOpenContentUIVisibility.bind(this),this.publicAPI.resetAppOnProcessOpen=this.resetAppOnProcessOpen.bind(this),this.publicAPI}_showMask(){e.mask(document.getElementsByClassName("wux-applicationframe-execution-context")[0])}_removeMask(){e.unmask(document.getElementsByClassName("wux-applicationframe-execution-context")[0])}}return b.prototype.mixinProperties(b,o),b.prototype.mixinProperties(b,s),b.prototype.mixinProperties(b,a),b.prototype.mixinProperties(b,l),b})),define("DS/DELWeb3DOpersReviewAppV2/components/ProcessResourceComp",["DS/DELWebOERTableViewComp/TableViewComp","DS/DELWeb3DOpersReviewAppV2/mixins/HideShowColumnMixin","DS/DELWeb3DOpersReviewAppV2/model/DELWebOERProcessResourceViewModel","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/mixins/IndexServicesMixin"],(function(e,t,i,n,o){"use strict";class s extends e{constructor(e){super(e)}async initialize(){await super.initialize(),[{eventName:{event:"onBuildUpActivated"},callback:this.updateHideShowColumn.bind(this,!1,!0)},{eventName:{event:"onBuildUpDeactivated"},callback:this.updateHideShowColumn.bind(this,!0,!0)},{eventName:{event:"DS/DELWebViewer/onEmpty"},callback:this.updateHideShowColumn.bind(this,!0,!0)}].forEach((e=>{this.subscribe(e.eventName,e.callback.bind(this))}))}async addRoots(e={}){let t=e.items||[],i=[];t.forEach((async e=>{UWA.is(e.resource,"array")?i=i.concat(e.resource):e.resource&&i.push(e.resource)})),await super.addRoots({items:i}),this.updateHideShowColumn(!0)}_onApplyFilter(){}async removeRoots(e={}){let t=e.items||[],i=[];t.forEach((async e=>{e.resource&&i.push(e.resource)})),await super.removeRoots({items:i})}getRoots(){return(super.getRoots()||[]).map((e=>({resource:e})))}createModel(e={}){this._model=new i({executionContext:this.getExecutionContext(),enableCrossPreHighlight:e.enableCrossPreHighlight,webservices:n.bindComponentToMixin(this,o),notifySelectionToPlatform:!1!==e.notifySelectionToPlatform||e.notifySelectionToPlatform})}}return s.prototype.mixinProperties(s,t),s}));