define("DS/ENORouteTemplateMgmt/Config/TemplateTabsConfig",["DS/Core/Core","UWA/Drivers/Alone","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i){"use strict";return[{label:i.tasks,id:"tasks",isSelected:!0,icon:{iconName:"task-route",fontIconFamily:WUXManagedFontIcons.Font3DS,orientation:"horizontal"},content:t.createElement("div",{id:"routeTasksContainer",class:"route-tasks-container"}),loader:"DS/ENORouteMgmt/Views/Loader/TaskGraphicalViewLoader"},{label:i.members,id:"members",icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS},allowClosableFlag:!1,content:t.createElement("div",{id:"routeMembersContainer",class:"route-members-container"}),loader:"DS/ENORouteMgmt/Views/RouteMembersView"},{label:i.appliesTo,id:"appliesTo",icon:{iconName:"compute",fontIconFamily:WUXManagedFontIcons.Font3DS},allowClosableFlag:!1,content:t.createElement("div",{id:"iTemplateAppliesToContainer",class:"itemplate-appliesTo-container"}),loader:"DS/ENORouteTemplateMgmt/Views/Loader/TemplateAppliesToLoader"}]})),define("DS/ENORouteTemplateMgmt/Services/InitiateTemplateServices",["UWA/Core","UWA/Class/Promise","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/ParseJSONUtil","DS/WAFData/WAFData"],(function(e,t,i,l,o){"use strict";let a,n,s;n=function(o){return new t((function(t,l){null==o.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(l){l.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(l){i.authenticateRequest(l+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){o.csrf=JSON.parse(e).csrf,t()}}))}})})):t()})).then((function(){return function(e){return new t((function(t,o){console.log("saveAsTemplate is called for wrong ODT");let a=i.getRouteTemplateServiceBaseURL(),n={};const s="ctx::"+e.data[0].dataelements.ctx;n.method="POST",n.headers={"Content-Type":"application/ds-json"},n.data=JSON.stringify(e),n.onComplete=function(e){let i=(new l).parseResp(JSON.parse(e)),o=JSON.parse(e);if(o.data[0].relateddata&&o.data[0].relateddata.tasks){let e=o.data[0].relateddata.tasks,t=r(e);i[0].assignees=t}t(i)},n.onFailure=function(e,t,i){o(JSON.parse(t))},i.authenticateRequest(a,n,s)}))}(o)}))},s=function(o){return new t((function(t,l){null==o.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(l){l.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(l){i.authenticateRequest(l+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){o.csrf=JSON.parse(e).csrf,t()}}))}})})):t()})).then((function(){return function(e){return new t((function(t,o){let a=i.getRouteTemplateServiceBaseURL()+"?action=activate",n={};const s="ctx::"+e.data[0].dataelements.ctx;n.method="POST",n.headers={"Content-Type":"application/ds-json"},n.data=JSON.stringify(e),n.onComplete=function(e){let i=(new l).parseResp(JSON.parse(e));t(i)},n.onFailure=function(e,t,i){o(JSON.parse(t))},i.authenticateRequest(a,n,s)}))}(o)}))};let r=function(e){let t=[];return e.forEach((function(e){if(t.indexOf(e.dataelements.taskAssignee)<0){let i="User Group";"Person"==e.dataelements.assigneeType&&(i=e.dataelements.assigneeType);let l=i+"~"+e.dataelements.taskAssigneeUsername+"~"+e.dataelements.taskAssignee;t.push(l)}})),t};return a={saveAsRouteTemplate:e=>n(e),createAndActivateRouteTemplate:e=>s(e),getESignConfigSetting:()=>new t((function(e,t){let l=i.get3DSpaceURL()+"/resources/bps/requiresESign",o={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(t){e(JSON.parse(t))},onFailure:function(e,i){i?(i="string"==typeof i?JSON.parse(i):i,t(i)):t(JSON.parse(e))}};i.authenticateRequest(l,o)}))},a})),define("DS/ENORouteTemplateMgmt/Views/Grid/TemplateAppliesToGridCustomColumn",["DS/Controls/TooltipModel","DS/i3DXCompassPlatformServices/OpenWith","DS/ENORouteMgmt/EnoviaBootstrap","DS/TransientWidget/TransientWidget","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i,l,o){"use strict";let a=function(e){let o=n(e),a=(new t).set3DXContent(o);var s={X3DContentId:JSON.stringify({protocol:"3DXContent",source:a._content.source,data:a._content.data,inAppMode:!0,inAppOptions:{relationSet:"AutoModeProfile",localUID:widget.id}}),x3dPlatformId:i.getTenantValue()};l.showWidget("ENXROUT_AP","",s,{mode:"transient"})},n=function(e,t){let l=[],o={envId:i.getTenantValue(),serviceId:"3DSpace",contextId:"",objectId:s(e,"TemplatePhysicalId"),objectType:"Route Template",displayName:s(e,"Name"),displayType:"Route Template",facetName:"realized",path:[{resourceid:s(e,"TemplatePhysicalId"),type:"Route Template"}]};return l.push(o),{protocol:"3DXContent",version:"1.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:l}}},s=function(e,t){let i="";return e&&e.options.grid.TemplatePhysicalId&&(i=e.options.grid[t]),i};return{onRouteNodeActionCellRequest:t=>function(t){let i;if(!t.isHeader&&(i=t.cellView.collectionView.reuseCellContent("_appliesToGrid_"),i)){i.removeEvents();const l=t.nodeModel.options.grid.Title,o=t.nodeModel.options.grid.Name,n=t.nodeModel.options.grid.AdditionalCriteria,s=t.nodeModel.options.grid.typeicon,r=(t.nodeModel.options.grid.TemplateUrl,o+" • "+n);i.getChildren()[0].src=s,i.getChildren()[1].getChildren()[0].getChildren()[0].setText(l),i.getChildren()[1].getChildren()[0].getChildren()[0].setStyle("cursor","pointer"),i.getChildren()[1].getChildren()[0].getChildren()[0].setStyle("color","#42a2da"),i.getChildren()[1].getChildren()[0].getChildren()[0].addEvent("click",(function(e){a(t.nodeModel)})),i.getChildren()[1].getChildren()[1].setText(o+" • "+n),i.getChildren()[1].getChildren()[0].getChildren()[0].tooltipInfos=new e({shortHelp:l,allowUnsafeHTMLShortHelp:!1}),i.getChildren()[1].getChildren()[1].tooltipInfos=new e({shortHelp:r,allowUnsafeHTMLShortHelp:!0}),t.cellView._setReusableContent(i)}}(t)}})),define("DS/ENORouteTemplateMgmt/Config/InitiateTemplateTabsConfig",["DS/Core/Core","UWA/Drivers/Alone","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i){"use strict";return[{label:i.properties,id:"properties",isSelected:!0,icon:{iconName:"attributes",fontIconFamily:WUXManagedFontIcons.Font3DS,orientation:"horizontal"},content:t.createElement("div",{id:"iTemplatePropertiesContainer",class:"itemplate-properties-container"}),loader:"DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplatePropertiesLoader"},{label:i.tasks,id:"tasks",icon:{iconName:"task-route",fontIconFamily:WUXManagedFontIcons.Font3DS},allowClosableFlag:!1,content:t.createElement("div",{id:"iTemplateTasksContainer",class:"itemplate-tasks-container"}),loader:"DS/ENORouteMgmt/Views/Loader/InitiateRouteTasksLoader"},{label:i.appliesTo,id:"appliesTo",icon:{iconName:"compute",fontIconFamily:WUXManagedFontIcons.Font3DS},allowClosableFlag:!1,content:t.createElement("div",{id:"iTemplateAppliesToContainer",class:"itemplate-appliesTo-container"}),loader:"DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplateAppliesToLoader"}]})),define("DS/ENORouteTemplateMgmt/Config/Toolbar/TemplateAppliesToTabToolbarConfig",["i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e){let t;return t={writetoolbarDefination:t=>function(t){let i={},l=[];return"Inactive"==t.state&&(t.Actions.includes("add.tasks")||t.Actions.includes("promote"))&&l.push({id:"editTask",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:WUXManagedFontIcons.Font3DS}},action:{module:"DS/ENORouteTemplateMgmt/Views/Loader/TemplateAppliesToLoader",func:"switchView",argument:{view:"edit"}},position:"far",category:"create",tooltip:e.editMode}),i.entries=l,i.typeRepresentations={taskViewDropDown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"},position:"far",tooltip:{text:"view",position:"far"}}},JSON.stringify(i)}(t),destroy:function(){_dataGrid.destroy(),_container.destroy()}},t})),define("DS/ENORouteTemplateMgmt/Utilities/TemplatePlaceHolderDragAndDrop",["UWA/Core","DS/DataDragAndDrop/DataDragAndDrop","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i){"use strict";let l={makeDroppable:function(i,l){let o=this;if(null!==i){o.dropInvite=i.getElement("#droppable"),o.dropInvite||(o.dropInvite=new e.createElement("div",{id:"droppable",class:"hidden"}).inject(i)),o.dropInvite.callback=l;let a={enter:o._manageOverAndEnterEvents.bind(o),over:o._manageOverAndEnterEvents.bind(o),drop:o._manageDropEvent.bind(o)};t.droppable(i,a)}},_manageOverAndEnterEvents:function(e,t){null==document.querySelector(".RouteTemplate-Placeholder-container")?this._addDroppableStyle(e):(this.dropInvite.removeClassName("hidden"),this.dropInvite.addClassName("show"),this._dropInviteContainer.show())},_addDroppableStyle:function(t){this._dropInviteContainer=e.createElement("div",{class:"RouteTemplate-Placeholder-container"}),this._dropInviteContainer.inject(t),e.createElement("div",{class:"drop-zone add-content",html:{tag:"div",class:"dropzonemsg-container",html:[{tag:"span",class:"fonticon fonticon-open fonticon-3x"},{tag:"p",class:"text-content",html:i.Open}]}}).inject(this._dropInviteContainer),this.dropInvite.removeClassName("hidden"),this.dropInvite.addClassName("show"),this._dropInviteContainer.addEventListener("dragleave",this._manageleaveEvents.bind(this))},_manageDropEvent:function(t,i){let l=this;if(""!==t&&null!=t)try{this._dropInviteContainer.hide();var o=(t=e.is(t,"string")?JSON.parse(t):t).data&&t.data.items?t.data.items:null;l.dropInvite.callback(o),l.dropInvite.removeClassName("droppable"),l.dropInvite.removeClassName("show"),l.dropInvite.addClassName("hidden")}catch(e){this._dropInviteContainer.hide(),l.dropInvite.removeClassName("droppable"),l.dropInvite.removeClassName("show"),l.dropInvite.addClassName("hidden")}else this._dropInviteContainer.hide(),l.dropInvite.callback(arguments[2]),l.dropInvite.removeClassName("droppable"),l.dropInvite.removeClassName("show"),l.dropInvite.addClassName("hidden")},_manageleaveEvents:function(e){this.dropInvite.removeClassName("droppable"),this.dropInvite.removeClassName("show"),this.dropInvite.addClassName("hidden"),e.stopPropagation(),e.preventDefault(),this._dropInviteContainer.hide()}};return l})),define("DS/ENORouteTemplateMgmt/Utilities/TemplateIdCardUtil",[],(function(){"use strict";var e={getTemplateDataUpdated:function(e){require(["DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteMgmt/Utilities/ParseJSONUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(t,i,l){t.fetchRouteTemplateById(e).then((e=>{widget.routeMgmtMediator.publish("template-data-updated",e[0]),widget.routeMgmtMediator.publish("template-idcard-data-updated",e[0]),"Active"===e[0].state?widget.routeMgmtMediator.publish("hide-edit-icon-in-tasks-tab"):widget.routeMgmtMediator.publish("show-edit-icon-in-tasks-tab"),widget.routeMgmtMediator.publish("template-maturity-change")}),(e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:l.errorRefresh,sticky:!1})}))}))}};return e})),define("DS/ENORouteTemplateMgmt/Model/RouteTemplateModel",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENORouteMgmt/Utilities/DataFormatter","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","DS/ENORouteMgmt/EnoviaBootstrap","DS/WebappsUtils/WebappsUtils","DS/ENORouteMgmt/Utilities/RouteViewUtils","DS/ENORouteMgmt/Components/TagNavigator","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i,l,o,a,n,s,r){"use strict";let d,c=new e,u=function(e,t,i,l,o){var a,n=e;return a=UWA.createElement("div",{class:"route-template-task-state-and-owner"}),UWA.createElement("span",{html:n,class:"route-template-state-title "+t.toUpperCase().replace(/ /g,"")}).inject(a),i.setStyle("display","inline"),i.setStyle("padding-left","3px"),i.set({title:o}),i.inject(a),a.outerHTML},p=function(e,l){c.prepareUpdate();var o=m(e),n=new t({label:e.title,id:e.id,width:300,grid:i.templateGridData(e),thumbnail:a.getWebappsAssetUrl("ENORouteMgmt","icons/144/I_RouteTemplate108x144.png"),subLabel:r[e.routeBasePurpose],description:u(e.stateNLS,e.state,o.ownerDiv,e.routeStatus,o.tooltip),icons:[a.getWebappsAssetUrl("ENORouteTemplateMgmt","icons/16/I_RouteTemplate16.png")],contextualMenu:["My context menu"],customTooltip:T(i.templateGridData(e))});return c.getXSO().add(n),c.addChild(n,0),c.unselectAll(),c.pushUpdate(),b(),void 0!==l&&0==l||widget.routeMgmtMediator.publish("initialize-IDCard-on-dblClick",{model:i.templateGridData(e)}),n},m=function(e){var t=new UWA.Element("div",{class:"members"}),i={},l="",a=e.ownerFullName;if(void 0!==a){var s=new UWA.Element("div",{class:"assignee"});let i,d="";i="/api/user/getpicture/login/"+e.owner+"/format/normal";let c=o.getSwymUrl()+i;if(l=l+a+",\n",null!=o.getSwymUrl())d=UWA.createElement("img",{class:"userIcon",src:c});else{var r=n.getAvatarDetails(a);d=UWA.createElement("div",{html:r.avatarStr,class:"avatarIcon"}),d.style.setProperty("background",r.avatarColor)}""!=d&&d.inject(s),s.inject(t)}return l=l.slice(0,-2),t.set({title:l}),e.assigneesdiv=t.outerHTML,i.ownerDiv=t,i.tooltip=l,i},f=function(e){return l.getRowModelById(c,e)},g=function(e){0==h()&&widget.routeMgmtMediator.publish("show-no-template-placeholder",e)},h=function(){let e=0;return c.getChildren().forEach((t=>{t._isHidden||e++})),e},b=function(){0!=h()&&widget.routeMgmtMediator.publish("hide-no-template-placeholder")},T=function(e){return r.title+": "+e.Title+"\n"+r.name+": "+e.Name+"\n"+r.IDcardMaturityState+": "+e.Maturity_State+"\n"+r.routeBasePurpose+": "+e.BasePurposeNLS+"\n"+r.revision+": "+e.revision+"\n"+r.IDcardOwner+": "+e.Owner},v=function(){widget.routeMgmtMediator.subscribe("template-back-to-summary",(function(e){d=void 0,widget.setValue("templateIdToBePersisted",void 0)})),c.subscribe({event:"filter"},(function(){setTimeout((function(){var e=[];c.__visibilityMap__&&c.__visibilityMap__.forEach(((t,i)=>{!0===t?e.push(i.options.id):i.unselect()})),s.getSearchResult({},e),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:c})}),1e3)}))};return{createModel:e=>function(e){return c.prepareUpdate(),e.forEach((function(e){var l=m(e),o=new t({label:e.title,id:e.id,width:300,grid:i.templateGridData(e),thumbnail:a.getWebappsAssetUrl("ENORouteMgmt","icons/144/I_RouteTemplate108x144.png"),subLabel:r[e.routeBasePurpose],description:u(e.stateNLS,e.state,l.ownerDiv,e.routeStatus,l.tooltip),icons:[a.getWebappsAssetUrl("ENORouteTemplateMgmt","icons/16/I_RouteTemplate16.png")],contextualMenu:["My context menu"],shouldAcceptDrop:!0,customTooltip:T(i.templateGridData(e))});c.addRoot(o)})),c.setFilterModel({label:{filterId:"stringRegexp"},Name:{filterId:"stringRegexp"},Maturity_State:{filterId:"set"},BasePurposeNLS:{filterId:"set"},Activity_StateNLS:{filterId:"set"},Description:{filterId:"stringRegexp"},revision:{filterId:"set"},Owner:{filterId:"set"}}),c.pushUpdate(),v(),c}(e),appendRows:(e,t)=>p(e,t),updateRow:e=>function(e){var t=m(e);if(e.id&&""!=e.id){var l=f(e.id);l.updateOptions({grid:i.templateGridData(e)}),l.updateOptions({label:e.title,subLabel:r[e.routeBasePurpose],description:u(e.stateNLS,e.state,t.ownerDiv,e.routeStatus,t.tooltip),customTooltip:T(i.templateGridData(e))});var o=c.getFilterManager();["label","Name","Maturity_State","Activity_StateNLS","Description","revision","Owner"].forEach((function(e){o.reapplyPropertyFilterModel(e)}))}}(e),getModel:()=>c,getSelectedRowsModel:()=>l.getSelectedRowsModel(c),getRowModelById:e=>f(e),getRowModelIndexById:e=>l.getRowModelIndexById(c,e),deleteRowModelByIndex:e=>function(e){l.deleteRowModelByIndex(c,e),g(c)}(e),deleteRowModelSelected:()=>function(){let e=l.deleteRowModelSelected(c);return g(c),e}(),deleteRowModelById:e=>function(e){l.deleteRowModelById(c,e),g(c)}(e),deleteRowModelByIds:e=>function(e){l.deleteRowModelByIds(c,e),g(c)}(e),destroy:()=>{c=new e},getOpenedRouteModel:()=>d,appendAllRows:e=>{var t;t=e,c.prepareUpdate(),t.forEach((e=>{var t=p(e,!1);c.addRoot(t)})),c.pushUpdate()}}})),define("DS/ENORouteTemplateMgmt/Services/RouteTemplateServices",["UWA/Core","UWA/Class/Promise","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/ParseJSONUtil","DS/WAFData/WAFData"],(function(e,t,i,l,o){"use strict";let a,n,s,r,d,c,u,p,m,f,g,h,b,T,v,y,w;n=function(e){return new t((function(t,o){let a=i.getRouteTemplateServiceBaseURL()+"/"+e,n={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t((new l).parseResp(JSON.parse(e)))},onFailure:function(e){o(e)}};i.authenticateRequest(a,n)}))};let S=function(e){return-1===e.indexOf("?")?"?":"&"};s=function(e){return new t((function(t,o){let a=i.getRouteTemplateServiceBaseURL()+"/"+e+"/history",n={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t((new l).parseResp(JSON.parse(e)))},onFailure:function(e){o(e)}};i.authenticateRequest(a,n)}))},d=function(){return new t((function(e,t){let o=i.getRouteTemplateServiceBaseURL(),a=widget.getValue("templateStateFilter");a?o+=S(o)+"stateFilter="+a:""==a&&(o+=S(o)+"stateFilter=undefined");let n=widget.getValue("templateOwnershipFilter");n?o+=S(o)+"ownershipFilter="+n:""==n&&(o+=S(o)+"ownershipFilter=undefined");let s=widget.getValue("objectLimit");s&&(o+=S(o)+"objectLimit="+s);let r={method:"GET",timeout:0,headers:{"Content-Type":"application/ds-json"},onComplete:function(t){let i=(new l).parseResp(JSON.parse(t));e(i)},onFailure:function(e){t(e)}};i.authenticateRequest(o,r)}))},f=function(a){return new t((function(t,l){null==a.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(l){l.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(i){o.authenticatedRequest(i+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){a.csrf=JSON.parse(e).csrf,t()}}))}})})):t()})).then((function(){return function(e){return new t((function(t,o){let a=i.getRouteTemplateServiceBaseURL()+"/ids?query=IncludeDataElements",n={method:"POST",headers:{"Content-Type":"application/ds-json"}};n.data=JSON.stringify(e),n.onComplete=function(e){t((new l).parseResp(JSON.parse(e)))},n.onFailure=function(e,t){t?(t="string"==typeof t?JSON.parse(t):t,o(t)):o(e)},i.authenticateRequest(a,n)}))}(a)}))},r=function(o,a){return new t((function(t,l){null==o.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(l){l.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(l){i.authenticateRequest(l+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){o.csrf=JSON.parse(e).csrf,t()}}))}})})):t()})).then((function(){return function(e,o){return new t((function(t,a){let n=i.getRouteTemplateServiceBaseURL()+"/"+o,s={method:"PUT",headers:{"Content-Type":"application/ds-json"}};s.data=JSON.stringify(e),s.onComplete=function(e){let i=(new l).parseResp(JSON.parse(e));t(i)},s.onFailure=function(e,t,i){a(JSON.parse(t))},i.authenticateRequest(n,s)}))}(o,a)}))},c=function(o){return new t((function(t,l){null==o.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(l){l.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(l){i.authenticateRequest(l+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){o.csrf=JSON.parse(e).csrf,t()}}))}})})):t()})).then((function(){return function(e){return new t((function(t,o){let a=i.getRouteTemplateServiceBaseURL(),n={method:"PUT",headers:{"Content-Type":"application/ds-json"}};n.data=JSON.stringify(e),n.onComplete=function(e){let i=(new l).parseResp(JSON.parse(e));t(i)},n.onFailure=function(e,t,i){o(JSON.parse(t))},i.authenticateRequest(a,n)}))}(o)}))},u=function(o,a){return new t((function(t,l){null==o.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(l){l.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(l){i.authenticateRequest(l+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){o.csrf=JSON.parse(e).csrf,t()}}))}})})):t()})).then((function(){return function(e,o){return new t((function(t,a){let n=i.getRouteTemplateServiceBaseURL()+"/"+o+"/revise",s={method:"POST",headers:{"Content-Type":"application/ds-json"}};s.data=JSON.stringify(e),s.onComplete=function(e){let i=(new l).parseResp(JSON.parse(e));t(i)},s.onFailure=function(e,t,i){a(t)},i.authenticateRequest(n,s)}))}(o,a)}))},g=function(e){return new t((function(t,o){let a=i.getRouteTemplateServiceBaseURL()+"/"+e+"/applicabilities",n={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t((new l).parseResp(JSON.parse(e)))},onFailure:function(e){o(e)}};i.authenticateRequest(a,n)}))},h=function(l){return new t((function(t,o){null==l.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(o){o.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(o){i.authenticateRequest(o+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){l.csrf=JSON.parse(e).csrf,t()}}))}})})):t()})).then((function(){return function(e){return new t((function(t,l){let o=i.get3DSpaceURL()+"/resources/v3/e6w/service/TypeAttributes/fetch",a={method:"POST",headers:{"Content-Type":"application/ds-json"}};a.data=JSON.stringify(e),a.onComplete=function(e){t(JSON.parse(e))},a.onFailure=function(e){l(e)},i.authenticateRequest(o,a)}))}(l)}))},v=function(){return new t((function(e,t){let l=i.get3DSpaceURL()+"/resources/enocsmrest/admin/collabspaces",o={method:"GET",timeout:0,headers:{"Content-Type":"application/ds-json"},onComplete:function(t){e(JSON.parse(t))},onFailure:function(e){t(e)}};i.authenticateRequest(l,o)}))},y=function(e){return new t((function(t,l){let o=i.get3DSpaceURL()+"/resources/pno/collaborativespace/"+e+"/organizations",a={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t(JSON.parse(e))},onFailure:function(e){l(e)}};i.authenticateRequest(o,a)}))},b=function(e){return new t((function(t,l){let o=i.get3DSpaceURL()+"/resources/ParamWS/lifecycle/topology?policy="+e,a={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t(JSON.parse(e))},onFailure:function(e){l(e)}};i.authenticateRequest(o,a)}))},T=function(){return new t((function(e,t){let l=i.get3DSpaceURL()+"/resources/bps/getSupportedPolicies",o={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(t){e(JSON.parse(t))},onFailure:function(e){t(e)}};i.authenticateRequest(l,o)}))},p=function(l,o,a){return new t((function(t,o){null==l.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(o){o.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(o){i.authenticateRequest(o+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){l.csrf=JSON.parse(e).csrf,t()}}))}})})):t()})).then((function(){return function(e,l,o){return new t((function(t,a){let n=i.getRouteTemplateServiceBaseURL()+"/"+o+"/"+l,s={method:"PUT",headers:{"Content-Type":"application/ds-json"}};s.data=JSON.stringify(e),s.onComplete=function(e){t(e)},s.onFailure=function(e,t,i){a(t)},i.authenticateRequest(n,s)}))}(l,o,a)}))},m=function(e){return new t((function(t,l){let o=i.getRouteTemplateServiceBaseURL()+"/"+e+"/linktemplate",a={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t(JSON.parse(e))},onFailure:function(e){l(e)}};i.authenticateRequest(o,a)}))},w=function(e){return new t((function(t,l){let o=i.getRouteServiceBaseURL()+"/getAllSubTypes?type="+e,a={method:"GET",timeout:0,headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t(JSON.parse(e))},onFailure:function(e){l(e)}};i.authenticateRequest(o,a)}))};return a={fetchRouteTemplateById:e=>n(e),fetchAllRouteTemplates:()=>d(),fetchRouteTemplateByIds:e=>f(e),updateRouteTemplate:(e,t)=>r(e,t),updateAppliesToData:(l,o)=>function(l,o){return new t((function(t,a){let n=i.getRouteTemplateServiceBaseURL()+"/"+o+"/applicabilities";var s={};(s=e.extend(s,i.getSyncOptions(),!0)).method="POST",s.type="json",s.timeout=0,s.headers={"Content-Type":"application/ds-json"},s.wait=!0,s.data=JSON.stringify(l),s.onComplete=function(e){t(e)},s.onFailure=function(e,t){a(t||e)},i.authenticateRequest(n,s)}))}(l,o),deleteTemplate:e=>c(e),reviseRouteTemplate:(e,t)=>u(e,t),fetchRouteTemplateHistory:e=>s(e),fetchRouteTemplateAppliesTo:e=>g(e),fetchAttributeList:e=>h(e),fetchSupportedPolicies:()=>T(),fetchCollabSpaces:()=>v(),fetchOrganizationFromCollabSpaces:e=>y(e),fetchStateTransitions:e=>b(e),changeTemplateState:(e,t,i)=>p(e,t,i),linkedTemplates:e=>m(e),getSimilarAppliesToTemplates:(l,o,a,n)=>function(l,o,a,n){return new t((function(t,s){let r=i.getRouteTemplateServiceBaseURL()+"/listOfapplicabilities?policy="+l+"&type="+o+"&tostate="+a+"&fromstate="+n;var d={};(d=e.extend(d,i.getSyncOptions(),!0)).method="GET",d.type="json",d.timeout=0,d.headers={"Content-Type":"application/ds-json"},d.wait=!0,d.onComplete=function(e){t(e)},d.onFailure=function(e,t){s(t||e)},i.authenticateRequest(r,d)}))}(l,o,a,n),getSubTypes:e=>w(e)},a})),define("DS/ENORouteTemplateMgmt/Model/RouteTemplateInfoHistoryModel",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/WebappsUtils/WebappsUtils","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i,l){"use strict";let o=new e({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!1}});return{getModel:e=>function(e){let a,n,s,r,d,c,u;return o.prepareUpdate(),e.forEach((function(e){for(a=e.routeTemplateAction,n=a.length-1;n>=0;n--){if(s=e.routeTemplateAction[n],u=e.description[n],"revisehistory"==s)d=l.replace(l[s+"des"],{tag2:e.description[n],tag1:e.userName[n]});else if("changeownerhistory"==s){var p=u.split("|");d=l.replace(l[s+"des"],{tag2:p[1],tag3:p[0],tag1:e.userName[n]})}else d=l.replace(l[s+"des"],{tag1:e.userName[n]});r=e.Time[n],c=i.getWebappsAssetUrl("ENORouteTemplateMgmt","icons/144/I_RouteTemplate108x144.png");var m=new t({label:l[s],subLabel:r,thumbnail:c,description:d});o.addRoot(m)}})),o.pushUpdate(),o}(e),destroy:()=>{o=new e({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!1}})}}})),define("DS/ENORouteTemplateMgmt/Config/AppliesToBasicField",["i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e){"use strict";return[{type:"date",name:"originated",label:e.originated,multivalue:"false",default:""}]})),define("DS/ENORouteTemplateMgmt/Utilities/DragAndDropOnTemplateSummary",["UWA/Core","DS/DataDragAndDrop/DataDragAndDrop","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i){"use strict";let l={makeDroppable:function(e,i){let l=this;if(null!==e){l.dropInvite=e,l.dropInvite.callback=i;let o={enter:l._manageOverAndEnterEvents.bind(l),over:l._manageOverAndEnterEvents.bind(l),drop:l._manageDropEvent.bind(l)};t.droppable(e,o)}},_manageOverAndEnterEvents:function(e,t){null==document.querySelector(".RTC-Template-drop-container")?this._addDroppableStyle(e):this._dropInviteContainer.show()},_addDroppableStyle:function(t){this._dropInviteContainer=e.createElement("div",{class:"RTC-Template-drop-container"}),this._dropInviteContainer.inject(t),e.createElement("div",{class:"drop-zone add-content",html:{tag:"div",class:"dropzonemsg-container",html:[{tag:"span",class:"fonticon fonticon-open fonticon-3x"},{tag:"p",class:"text-content",html:i.Open}]}}).inject(this._dropInviteContainer),this._dropInviteContainer.addEventListener("dragleave",this._manageleaveEvents.bind(this))},_manageDropEvent:function(t,i){let l=this;if(""!==t&&null!=t)try{this._dropInviteContainer.hide();var o=(t=e.is(t,"string")?JSON.parse(t):t).data&&t.data.items?t.data.items:null;l.dropInvite.callback(o),this._dropInviteContainer&&this._dropInviteContainer.parentNode.removeChild(this._dropInviteContainer)}catch(e){this._dropInviteContainer.hide(),this._dropInviteContainer.parentNode&&this._dropInviteContainer.parentNode.removeChild(this._dropInviteContainer)}else this._dropInviteContainer.hide(),l.dropInvite.callback(arguments[2]),this._dropInviteContainer&&this._dropInviteContainer.parentNode.removeChild(this._dropInviteContainer)},_manageleaveEvents:function(e){e.stopPropagation(),e.preventDefault(),this._dropInviteContainer.hide(),this._dropInviteContainer&&this._dropInviteContainer.parentNode.removeChild(this._dropInviteContainer)}};return l})),define("DS/ENORouteTemplateMgmt/Model/RemoveRouteTemplateConfirmationModel",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/WebappsUtils/WebappsUtils","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i,l){"use strict";let o=new e,a=function(e){let t;return t=0==e.hasDeleteAccess?{icon:"wrong wux-ui-3ds"}:{icon:"check wux-ui-3ds"},t};return{createModel:l=>function(l){return o=new e,o.prepareUpdate(),l.forEach((function(e){e.Deleteicon=a(e);var l=new t({label:e.Title,id:e.id,width:300,grid:{Maturity_State:e.Maturity_State,revision:e.revision,state:e.state,Deleteicon:e.Deleteicon},icons:[i.getWebappsAssetUrl("ENORouteTemplateMgmt","icons/16/I_RouteTemplate16.png")]});o.addRoot(l)})),o.pushUpdate(),o}(l),getModel:()=>o}})),define("DS/ENORouteTemplateMgmt/Model/InitiateTemplateAppliesToGridViewModel",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENORouteMgmt/Utilities/ContentStateBlockingUtils","DS/ENORouteMgmt/Utilities/PlaceHolder","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","DS/ENORouteMgmt/Utilities/ContentTargetMaturityUtils","DS/ENORouteMgmt/Utilities/RouteViewUtils","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/Utils","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i,l,o,a,n,s,r,d){"use strict";let c=new e,u=function(e,t,i,l,o,a,n){return""===l?d.additionalCriteria+" : "+d.credentials:e||l?l?d.additionalCriteria+" : "+a+"."+n:((null!=o.match("attribute\\[(.*?)\\]\\s(~~|>|<)\\s+'(.*?)'")||null!=o.match("attribute\\[(.*?)\\]\\s(>)\\s+'(.*?)'\\s+(&&)+\\s+attribute\\[(.*?)\\]\\s(<)\\s+'(.*?)'")||null!=o.match("\\((.*?)\\s(~~|>|<)\\s+'(.*?)'")||o.match("\\((.*?)\\s(>)\\s+'(.*?)'\\s+(&&)+\\s+(.*?)\\s(<)\\s+'(.*?)'"))&&(t="between"==i?r.getLocaleTime(new Date(t.split("%")[0]),!0)+" "+d.and+" "+r.getLocaleTime(new Date(t.split("%")[1]),!0):r.getLocaleTime(new Date(t),!0)),d.additionalCriteria+" : "+e+" "+d[i]+" "+t):d.noAdditionalCriteria};return{createModel:e=>function(e){return c.prepareUpdate(),e&&e.forEach((function(e){e=e.dataelements;var i=new t({label:e.name,width:300,dataIndex:"tree",grid:{Title:e.appliesToTemplateTitle,Name:e.appliesToTemplateName,FromState:e.fromState_nls,ToState:e.toState_nls,Type:e.objType_nls,Policy:e.objPolicy_nls,AdditionalCriteria:u(e.attributeName_nls,e.attributeValue,e.attributeCondition,e.collaboration,e.criteria,e.project_title,e.organization_title),typeicon:s.get3DSpaceURL()+"/snresources/images/icons/small/iconSmallRouteTemplate.png",TemplatePhysicalId:e.physicalId},icons:[e.type_icon_url]});c.addRoot(i)})),c.pushUpdate(),c}(e),getModel:()=>c,destroy:()=>{c=new e}}})),define("DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplateAvailabilityChooser",["DS/ENORouteMgmt/Controller/RouteServicesController","DS/Utilities/Dom","DS/ENORouteMgmt/Utilities/Search/SearchUtil","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l){"use strict";return{}})),define("DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplateLinkTemplateChooser",["DS/ENORouteMgmt/Controller/RouteServicesController","DS/Utilities/Dom","DS/ENORouteMgmt/Utilities/Search/SearchUtil","DS/TreeModel/TreeNodeModel","DS/Controls/TooltipModel","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a){"use strict";let n,s=!1;var r=function(e,t){var i;t&&(i=new l({label:t[0]["ds6w:label"],value:t[0].id,status:t[0]["ds6w:status_value"],category:t[0]["ds6w:category"]}),n.fields.linkedTemplateField.selectedItems=i)};return{init:(e,t)=>function(e,t){n=t;var l=e.dsModel,o=UWA.Utils.getUUID();require(["DS/SNInfraUX/SearchCom"],(function(e){var t=e.createSocket({socket_id:o}),a=i.getRefinementToSnN(o,"linkTemplate",!1,["Route Template"]);if(a.precond=i.getPrecondForLinkTemplateSearch(),!UWA.is(t))throw new Error("Socket not initialized");t.dispatchEvent("RegisterContext",a),t.addListener("Selected_Objects_search",r.bind(l,"")),t.dispatchEvent("InContextSearch",a)}))}(e,t),destroy:()=>{_routeProperties={}},getPrecondForLinkedTemplateSearch:()=>{return(e={}).precond=i.getPrecondForLinkTemplateSearch(),e;var e},changeHandlerLinkedFortemplateField:e=>function(e){if(s)s=!1;else{if(e.fields.linkedTemplateField.selectedItems){let t=e.fields.linkedTemplateField.selectedItems.options.status;if("Released"!=t&&"Route Template.Active"!=t){let i;"Draft"==t||"Route Template.Inactive"==t?i=a.errorSelectedInactiveTemplate:"Archived"!=t&&"Route Template.Archive"!=t||(i=a.errorSelectedArchiveTemplate),widget.notify.handler().addNotif({level:"error",subtitle:i,sticky:!1}),s=!0,e.fields.linkedTemplateField.selectedItems=void 0}}if(e.fields.linkedTemplateField.selectedItems&&e.fields.linkedTemplateField.selectedItems.options){if(e.fields.linkedTemplateField._editor.elements.inputField.value==e.fields.linkedTemplateField.selectedItems.options.label){if(e.linkTemplateCompleteActionField.className="",e.demoteOnRejectionField.className="",e.formFields.querySelector("#rcaForLinkedTemplate").removeClassName("fonticon-chooser-scope-display"),e.formFields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate #linkTemplateCompleteActionField")[0]){e.formFields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate #linkTemplateCompleteActionField")[0].innerText=a.replace(a.routeCompletionActionForSelectedTemplate,{tag1:e.fields.linkedTemplateField.selectedItems.options.label});let t=e.formFields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate #linkTemplateCompleteActionField")[0].innerText;e.formFields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate #linkTemplateCompleteActionField")[0].tooltipInfos=new o({shortHelp:t,allowUnsafeHTMLShortHelp:!0})}e.fields.linkedTemplateField.selectedItems.options.category&&e.fields.linkedTemplateField.selectedItems.options.category.includes("Promote Connected Object")?e.fields.routeCompletionAction.selectedIndex=1:e.fields.routeCompletionAction.selectedIndex=0}}else e.linkTemplateCompleteActionField.className="fonticon-chooser-scope-display",e.demoteOnRejectionField.className="fonticon-chooser-scope-display",e.formFields.querySelector("#rcaForLinkedTemplate").addClassName("fonticon-chooser-scope-display")}}(e)}})),define("DS/ENORouteTemplateMgmt/Config/Toolbar/TemplateSummaryToolbarConfig",["DS/ENORouteMgmt/Utilities/RouteWidgetPersistency","DS/ENORouteMgmt/Utilities/EnoWidgetDataUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i){let l,o={menu:[{type:"CheckItem",title:i.tileView,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENORouteTemplateMgmt/Views/ToggleViews",func:"doToggleView",argument:{view:"TileView",curPage:"TemplateSummary"}},tooltip:i.tileView},{type:"CheckItem",title:i.gridView,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENORouteTemplateMgmt/Views/ToggleViews",func:"doToggleView",argument:{view:"GridView",curPage:"TemplateSummary"}},tooltip:i.gridView}]};let a=function(l){var a=function(e){var l={menu:[{type:"CheckItem",title:i.filterOwnedbyme,state:e.indexOf("owned")>-1?"selected":"unselected",id:"owned",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeOwnerFilter",argument:{type:"owner",filter:"owned"}},tooltip:i.filterOwnedbymeTooltip},{type:"CheckItem",title:i.filterSharedwithme,state:e.indexOf("shared")>-1?"selected":"unselected",id:"assigned",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeOwnerFilter",argument:{type:"owner",filter:"shared"}},tooltip:i.filterSharedwithmeTooltip},{type:"SeparatorItem",title:""}]},o=t.getStateTemplateNLS(),a={type:"CheckItem",state:e.indexOf("Draft")>-1?"selected":"unselected",id:"draft",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeStateFilter",argument:{type:"state",filter:"Draft"}},tooltip:i.filterDraftTooltip};return o&&o.Inactive?a.title=o.Inactive:a.title=i.filterDraft,l.menu.push(a),a={type:"CheckItem",state:e.indexOf("Released")>-1?"selected":"unselected",id:"released",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeStateFilter",argument:{type:"state",filter:"Released"}},tooltip:i.filterReleasedTooltip},o&&o.Active?a.title=o.Active:a.title=i.filterReleased,l.menu.push(a),a={type:"CheckItem",state:e.indexOf("Archived")>-1?"selected":"unselected",id:"archived",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeStateFilter",argument:{type:"state",filter:"Archived"}},tooltip:i.filterArchivedTooltip},o&&o.Archive?a.title=o.Archive:a.title=i.filterArchived,l.menu.push(a),l}(l),n=e.getViewPersistency("TemplateSummaryPage","GridView"),s="selected"===n?"unselected":"selected";o.menu[1].state=n,o.menu[0].state=s;var r={entries:[{id:"filter",dataElements:{typeRepresentation:"filterdropdown",icon:{iconName:"list-filter",fontIconFamily:1},position:"far",value:a},category:"status",tooltip:i.filter},{id:"view",className:"routeViews",dataElements:{typeRepresentation:"viewdropdown",icon:{iconName:"selected"==n?"view-list":"view-small-tile",fontIconFamily:1},value:o},position:"far",tooltip:i.switchView,category:"action"},{id:"changeOwner",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-change",fontIconFamily:WUXManagedFontIcons.Font3DS},action:{module:"DS/ENORouteTemplateMgmt/Views/Dialogs/TemplateChangeOwnershipDialog",func:"templateChangeOwner"}},position:"far",category:"action",tooltip:i.changeOwner},{id:"deleteRoute",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:WUXManagedFontIcons.Font3DS},action:{module:"DS/ENORouteTemplateMgmt/Views/Dialogs/RemoveTemplate",func:"removeConfirmation"}},position:"far",category:"action",tooltip:i.Delete},{id:"information",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:WUXManagedFontIcons.Font3DS},action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"openPropertiesView"}},position:"far",category:"action",tooltip:i.Information}],typeRepresentations:{sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}},filterdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"},position:"far",tooltip:{text:"Filter",position:"far"}},viewdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"},position:"far",tooltip:{text:"view",position:"far"}}}};return JSON.stringify(r)};return l={writetoolbarDefination:e=>a(e),destroy:function(){_dataGrid.destroy(),_container.destroy()}},l})),define("DS/ENORouteTemplateMgmt/Utilities/DragAndDropOnRoutetemplateIDcard",["UWA/Core","DS/DataDragAndDrop/DataDragAndDrop"],(function(e,t){"use strict";let i={makeDroppable:function(i,l){let o=this;if(null!==i){o.dropInvite=i.getElement("#droppable"),o.dropInvite||(o.dropInvite=new e.createElement("div",{id:"droppable",class:"hidden"}).inject(i)),o.dropInvite.callback=l;let a={enter:o._manageDragEvents.bind(o),leave:o._manageDragEvents.bind(o),over:o._manageDragEvents.bind(o),drop:o._manageDropEvent.bind(o)};t.droppable(i,a)}},_manageDragEvents:function(e,t){let i=this;switch(t.type){case"dragenter":i._addDroppableStyle(e),e.setStyles({borderStyle:"solid",borderColor:"#368ec4",borderWidth:"1px"});break;case"dragleave":t.stopPropagation(),t.preventDefault(),e.setStyle("borderWidth","0px");var l=t.target.className;if("droppable show"==l){i._removeDroppableStyle();break}if(l=l.replaceAll(" ","."),e&&null!=e.querySelector("."+l)){var o=e.querySelector("#dataGridContentsDivToolbar");o&&null!=o.querySelector("."+l)&&i._removeDroppableStyle(),(o=e.querySelector(".create-iRouteContent-help"))&&null!=o.querySelector("."+l)&&i._removeDroppableStyle();break}i._removeDroppableStyle();break;case"dragover":i._addDroppableStyle(),e.setStyles({borderStyle:"solid",borderColor:"#368ec4",borderWidth:"1px"})}return!0},_removeDroppableStyle:function(){this.dropInvite.removeClassName("droppable"),this.dropInvite.removeClassName("show"),this.dropInvite.addClassName("hidden")},_addDroppableStyle:function(e){this.dropInvite.addClassName("droppable"),this.dropInvite.removeClassName("hidden"),this.dropInvite.addClassName("show")},_manageDropEvent:function(t,i){let l=this;if(""!==t&&null!=t)try{i.setStyle("borderWidth","0px");var o=(t=e.is(t,"string")?JSON.parse(t):t).data&&t.data.items?t.data.items:null;l.dropInvite.callback(o),l.dropInvite.removeClassName("droppable"),l.dropInvite.removeClassName("show"),l.dropInvite.addClassName("hidden")}catch(e){i.setStyle("borderWidth","0px"),l.dropInvite.removeClassName("droppable"),l.dropInvite.removeClassName("show"),l.dropInvite.addClassName("hidden")}else i.setStyle("borderWidth","0px"),l.dropInvite.callback(arguments[2]),l.dropInvite.removeClassName("droppable"),l.dropInvite.removeClassName("show"),l.dropInvite.addClassName("hidden")}};return i})),define("DS/ENORouteTemplateMgmt/Utilities/DragAndDropOnRouteTemplateTileView",["UWA/Core","DS/DataDragAndDrop/DataDragAndDrop","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i){"use strict";let l={makeDroppable:function(e,i){let l=this;if(null!==e){l.dropInvite=e,l.dropInvite.callback=i;let o={enter:l._manageOverAndEnterEvents.bind(l),over:l._manageOverAndEnterEvents.bind(l),drop:l._manageDropEvent.bind(l)};t.droppable(e,o)}},_manageOverAndEnterEvents:function(e,t){null==document.querySelector(".RTC-Template-drop-container")?this._addDroppableStyle(e):this._dropInviteContainer.show()},_addDroppableStyle:function(t){this._dropInviteContainer=e.createElement("div",{class:"RTC-Template-drop-container"}),this._dropInviteContainer.inject(t),e.createElement("div",{class:"drop-zone add-content",html:{tag:"div",class:"dropzonemsg-container",html:[{tag:"span",class:"fonticon fonticon-open fonticon-3x"},{tag:"p",class:"text-content",html:i.Open}]}}).inject(this._dropInviteContainer),this._dropInviteContainer.addEventListener("dragleave",this._manageleaveEvents.bind(this))},_manageDropEvent:function(t,i){let l=this;if(""!==t&&null!=t)try{var o=(t=e.is(t,"string")?JSON.parse(t):t).data&&t.data.items?t.data.items:null;l.dropInvite.callback(o);let i=document.querySelector("#TemplateTileViewContainer");i&&i.removeChild(this._dropInviteContainer)}catch(e){let t=document.querySelector("#TemplateTileViewContainer");t&&t.removeChild(this._dropInviteContainer)}else{l.dropInvite.callback(arguments[2]);let e=document.querySelector("#TemplateTileViewContainer");e&&e.removeChild(this._dropInviteContainer)}},_manageleaveEvents:function(e){e.stopPropagation(),e.preventDefault(),this._dropInviteContainer.hide(),this._dropInviteContainer&&this._dropInviteContainer.parentNode.removeChild(this._dropInviteContainer)}};return l})),define("DS/ENORouteTemplateMgmt/Controller/TemplateServicesController",["DS/ENORouteTemplateMgmt/Services/RouteTemplateServices","DS/ENORouteTemplateMgmt/Services/InitiateTemplateServices","UWA/Promise","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i,l){"use strict";let o,a=function(e,t){500===t.statusCode?widget.notify.handler().addNotif({level:"error",subtitle:l.unexpectedError,sticky:!0}):e(t)};return o={fetchAllRouteTemplates:function(){return new i((function(t,i){e.fetchAllRouteTemplates().then((e=>{t(e)}),(e=>{a(i,e)}))}))},createAndActivateRouteTemplate:function(e){return new i((function(i,l){t.createAndActivateRouteTemplate(e).then((e=>{i(e)}),(e=>{a(l,e)}))}))},fetchRouteTemplateHistory:function(t){return new i((function(i,l){e.fetchRouteTemplateHistory(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},saveAsRouteTemplate:function(e){return new i((function(i,l){t.saveAsRouteTemplate(e).then((e=>{i(e)}),(e=>{a(l,e)}))}))},updateRouteTemplate:function(t,l){return new i((function(i,o){e.updateRouteTemplate(t,l).then((e=>{i(e)}),(e=>{a(o,e)}))}))},deleteTemplate:function(t){return new i((function(i,l){e.deleteTemplate(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},reviseRouteTemplate:function(t,l){return new i((function(i,o){e.reviseRouteTemplate(t,l).then((e=>{i(e)}),(e=>{a(o,e)}))}))},fetchRouteTemplateById:function(t){return new i((function(i,l){e.fetchRouteTemplateById(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},fetchRouteTemplateByIds:function(t){return new i((function(i,l){e.fetchRouteTemplateByIds(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},changeTemplateState:function(t,l,o){return new i((function(i,n){e.changeTemplateState(t,l,o).then((e=>{i(e)}),(e=>{a(n,e)}))}))},linkedTemplates:function(t){return new i((function(i,l){e.linkedTemplates(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},getESignConfigSetting:function(){return new i((function(e,i){t.getESignConfigSetting().then((t=>{e(t)}),(e=>{a(i,e)}))}))},fetchRouteTemplateAppliesTo:function(t){return new i((function(i,l){e.fetchRouteTemplateAppliesTo(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},fetchAttributeList:function(t){return new i((function(i,l){e.fetchAttributeList(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},fetchSupportedPolicies:function(){return new i((function(t,i){e.fetchSupportedPolicies().then((e=>{t(e)}),(e=>{a(i,e)}))}))},fetchCollabSpaces:function(t){return new i((function(i,l){e.fetchCollabSpaces(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},fetchOrganizationFromCollabSpaces:function(t){return new i((function(i,l){e.fetchOrganizationFromCollabSpaces(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},fetchStateTransitions:function(t){return new i((function(i,l){e.fetchStateTransitions(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))},updateAppliesToData:function(t,l){return new i((function(i,o){e.updateAppliesToData(t,l).then((e=>{i(e)}),(e=>{a(o,e)}))}))},getSimilarAppliesToTemplates:function(t,l,o,n){return new i((function(i,s){e.getSimilarAppliesToTemplates(t,l,o,n).then((e=>{i(e)}),(e=>{a(s,e)}))}))},getSubTypes:function(t){return new i((function(i,l){e.getSubTypes(t).then((e=>{i(e)}),(e=>{a(l,e)}))}))}},o})),define("DS/ENORouteTemplateMgmt/Actions/TemplateActions",["DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/ParseJSONUtil","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o){"use strict";let a;return a={updateRouteTemplate:(t,l)=>function(t,l){return new Promise((function(o,a){var n=(new i).createDataForRequest(t);e.updateRouteTemplate(n,l).then((e=>o(e)),(e=>a(e)))}))}(t,l),DeleteTemplate:(t,i)=>function(t,i){let a=[];t.forEach((e=>{let t={};t.id=e,t.type="Route Template",t.updateAction="DELETE",a.push(t)}));let n={csrf:widget.data.csrf,data:a};e.deleteTemplate(n).then((e=>{var i=o.successRemoveTemplate;1==t.length&&(i=o.successRemoveTemplateSingle),i=i.replace("{count}",t.length),widget.notify.handler().addNotif({level:"success",subtitle:i,sticky:!1}),widget.routeMgmtMediator.publish("template-summary-delete-row-by-ids",{model:t}),widget.routeMgmtMediator.publish("template-data-deleted",{model:t}),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:l.getModel()})}),(e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:o.errorRemove,sticky:!1})}))}(t),changeTemplateState:(t,l,a)=>function(t,l,a){var n=(new i).createCSRFForRequest();e.changeTemplateState(n,l,t).then((e=>{if("notifyAdmin"!==l){var t=o.changeStateSuccess;widget.notify.handler().addNotif({level:"success",subtitle:t,sticky:!1});var n=(new i).parseResp(JSON.parse(e));n[0].noTitleUpdate=!0,widget.routeMgmtMediator.publish("template-data-updated",n[0]),a&&(widget.routeMgmtMediator.publish("template-idcard-data-updated",n[0]),widget.routeMgmtMediator.publish("redraw-graph",n[0]),widget.routeMgmtMediator.publish("redraw-AppliesTo",n[0]),"activate"===l?widget.routeMgmtMediator.publish("hide-edit-icon-in-tasks-tab"):widget.routeMgmtMediator.publish("show-edit-icon-in-tasks-tab"),widget.routeMgmtMediator.publish("template-maturity-change"))}else widget.notify.handler().addNotif({level:"success",subtitle:o.notifyAdmin,sticky:!1})}),(e=>{var t=JSON.parse(e),i=t.internalError?t.internalError:t.error;t.error?widget.notify.handler().addNotif({level:"error",subtitle:i,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:o.changeStateError,sticky:!1})}))}(t,l,a),reviseRouteTemplate:(t,l)=>function(t){return new Promise((function(l,o){var a=(new i).createCSRFForRequest();e.reviseRouteTemplate(a,t).then((e=>l(e)),(e=>o(e)))}))}(t),refreshTemplateObjectOnChangeOwner:(i,a)=>function(i,a){var n=[];let s;for(var r=0;r<i.data.length;r++)if(-1!=i.data[r].options.grid.Actions.indexOf("changeowner")){var d={};d.id=i.data[r].options.grid.id,n.push(d)}s={data:n},e.fetchRouteTemplateByIds(s).then((e=>{for(var i=[],o=t.getLoginUser(),n=widget.getValue("templatefilters"),s=0;s<e.length;s++)-1!=n.indexOf("shared")?"idCard"==a?(e[s].noTitleUpdate=!0,widget.routeMgmtMediator.publish("template-data-updated",e[s]),widget.routeMgmtMediator.publish("template-idcard-data-updated",e[s]),widget.routeMgmtMediator.publish("redraw-graph",e[s])):l.updateRow(e[s]):e[s].owner!=o&&i.push(e[s].id);l.deleteRowModelByIds(i),widget.routeMgmtMediator.publish("template-summary-refresh"),"idCard"==a&&(e[0].owner&&(e[0].owner==o?widget.routeMgmtMediator.publish("show-edit-icon-in-tasks-tab"):i.length>0?widget.routeMgmtMediator.publish("route-task-close-click-view-mode"):(widget.routeMgmtMediator.publish("hide-edit-icon-in-tasks-tab"),widget.routeMgmtMediator.publish("hide-plus-icon-in-tasks-toolbar"),widget.routeMgmtMediator.publish("hide-remove-icon-in-tasks-toolbar"))),widget.routeMgmtMediator.publish("template-data-deleted",{model:i})),widget.routeMgmtMediator.publish("template-tag-data-updated"),widget.routeMgmtMediator.publish("update-members-on-change-owner")}),(e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:o.infoRefreshError,sticky:!1})}))}(i,a),renderRevisionsDialog:e=>function(e){require(["DS/LifecycleCmd/HistoryCmd"],(function(t){var i=[{options:{physicalid:e},getID:function(){return e}}];(t=new t({ID:"revisions_cmd_ID",context:{getSelectedNodes:()=>i}})).begin()}))}(e)},a})),define("DS/ENORouteTemplateMgmt/Services/LifeCycleServices",["DS/ENORouteTemplateMgmt/Utilities/TemplateIdCardUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t){"use strict";return{lifeCycle:t=>function(t){require(["DS/LifecycleCmd/MaturityCmd"],(function(i){var l=[],o=t.id;l.push({physicalid:o}),(new i).executeAsync(l).then((function(){e.getTemplateDataUpdated(o)}))}))}(t)}})),define("DS/ENORouteTemplateMgmt/Views/Grid/TemplateGridCustomColumns",["DS/Controls/Button","DS/Controls/TooltipModel","DS/ENORouteMgmt/EnoviaBootstrap","UWA/Drivers/Alone","DS/ENORouteMgmt/Utilities/RouteViewUtils","DS/ENORouteTemplateMgmt/Services/LifeCycleServices","DS/ENORouteMgmt/Utilities/DataFormatter","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/LifecycleControls/EditPropDialog","DS/TransientWidget/TransientWidget","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i,l,o,a,n,s,r,d,c){"use strict";return{onRouteNodeStateCellRequest:e=>function(e){let t;if(!e.isHeader&&(t=e.cellView.collectionView.reuseCellContent("_state_"),t)){t.getChildren()[0].removeEvents();let i=e.nodeModel.options.grid.state;t.getChildren()[0].setHTML(e.nodeModel.options.grid.Maturity_State),t.getChildren()[0].setAttribute("class","route-template-state-title "+i.toUpperCase().replace(/ /g,"")),t.getChildren()[0].addEvent("click",(function(e){var t=s.getSelectedRowsModel(),i=n.templateGridData(t.data[0].options.grid);a.lifeCycle(i)})),e.cellView._setReusableContent(t)}}(e),onRouteNodeActionCellRequest:e=>function(e){let i;e.isHeader||(i=e.cellView.collectionView.reuseCellContent("_actions_"),i&&require(["DS/ENORouteMgmt/Views/Menu/RouteContextualMenu"],(function(l){var o=[];o.push(e.nodeModel.options.grid.id),i.setHTML(l.routeGridCheveron(e.nodeModel.options.grid.Actions,o)),i.tooltipInfos=new t({shortHelp:c.actions,allowUnsafeHTMLShortHelp:!0}),i.setStyle(),e.cellView._setReusableContent(i)})))}(e),onRouteNodeOwnerCellRequest:e=>function(e){let t;if(!e.isHeader&&(t=e.cellView.collectionView.reuseCellContent("_owner_"),t)){t.removeEvents();var l=e.nodeModel.options.grid.OwnerFullName,a=e.nodeModel.options.grid.UserName,n=e.nodeModel.options.grid.OwnerId,s="/api/user/getpicture/login/"+a+"/format/normal",c=o.getAvatarDetails(l),u=i.getSwymUrl()+s;null!=i.getSwymUrl()?(t.getChildren()[0].getChildren()[0].src=u,t.setStyle("cursor","pointer"),t.addEvent("click",(function(e){console.log("User icon clicked"),d.showWidget("X3DPRFL_AP","",{login:a,url:i.getSwymUrl()+"?profile="+a},{mode:"panel",height:700,width:800})}))):(t.setStyle("cursor","pointer"),t.getChildren()[0].getChildren()[0].setHTML(c.avatarStr),t.getChildren()[0].getChildren()[0].setStyle("background",c.avatarColor),t.addEvent("click",(function(e){var t={_context:i.getSecurityContextValue(),_selection:[{getID:function(){return n}}],getSecurityContext:function(){return this._context},getSelectedNodes:function(){return this._selection},displayNotification:function(){}};(new r).launchProperties(t)}))),t.getChildren()[1].setText(l),e.cellView._setReusableContent(t)}}(e),onRemoveTemplateNodeStateCellRequest:e=>function(e){let t;if(!e.isHeader&&(t=e.cellView.collectionView.reuseCellContent("_state_"),t)){let i=e.nodeModel.options.grid.state;t.getChildren()[0].setHTML(e.nodeModel.options.grid.Maturity_State),t.getChildren()[0].setAttribute("class","route-template-state-title "+i.toUpperCase().replace(/ /g,"")),t.setStyle("cursor","default"),e.cellView._setReusableContent(t)}}(e)}})),define("DS/ENORouteTemplateMgmt/Views/InitiateTemplatePropertiesView",["DS/Controls/LineEditor","DS/Controls/Editor","DS/Controls/Accordeon","DS/Controls/ButtonGroup","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Utilities/Dom","DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplateLinkTemplateChooser","DS/ENORouteMgmt/Views/Loader/InitiateRouteScopeChooser","DS/ENORouteMgmt/Views/Form/ENORouteAutoComplete","DS/ENORouteMgmt/Utilities/RouteViewUtils","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/InitiatePropertiesCustomAttributeUtility","DS/ENORouteMgmt/Utilities/EnoWidgetDataUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r,d,c,u,p,m,f,g){"use strict";let h,b,T,v=function(i,s){let d,u,f,v;h.formFields=new UWA.Element("div",{id:"InitiateTemplatePropertiesContainer",class:""}),h.templateAvailabilityField=new UWA.Element("div",{id:"SeachAvailabilityField",class:"fonticon-chooser-scope-display"}),h.startRouteOnCompletionField=new UWA.Element("div",{id:"startRouteOnCompletionField"}),h.linkTemplateCompleteActionField=new UWA.Element("div",{id:"linkTemplateCompleteActionField",class:"fonticon-chooser-scope-display"}),h.demoteOnRejectionField=new UWA.Element("div",{id:"demoteOnRejectionField",class:"fonticon-chooser-scope-display"}),h.fields={},h.formFields.inject(i),d=w("initiate-Route-Field",h.formFields),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{class:"required",text:g.title}).inject(u),b.tooltipInfos=R(g.title),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(b),h.fields.name=new e({pattern:"[^./#,\\[\\]\\$\\^@\\*\\?%:'\"\\\\<>;|]+",sizeInCharNumber:61}),h.fields.name.domId="Template_name",h.fields.name.inject(v),T=S("templateTitleInfo",g.initiateRouteTemplateTitleHelp,u),h.fields.name.addEventListener("uncommittedChange",(function(e){widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons",{properties:h})})),d=w("initiate-Route-Field",h.formFields),d.setAttribute("id","initiateRouteFieldCollabSpace"),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{text:g.collaborativeSpace}).inject(u),b.tooltipInfos=R(g.collaborativeSpace),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(b);let C=[],F=[],E=widget.getValue("usedCollaborativeSpace");s.credentialResponseData.credentials.forEach((e=>{if(e.ctxtitle){C.some((t=>t.prjname===e.prjname))||C.push({prjtitle:e.prjtitle?e.prjtitle:e.prjname,prjname:e.prjname,prjvisi:e.prjvisi}),F.push(e.ctxname)}}));let M,A=p.getSecurityContextValue().split("ctx::")[1],N=s.credentialResponseData.credentials.findIndex((e=>e.ctxname===A));if(E){if(M=C.findIndex((e=>e.prjname===E.prjname)),M>-1){const[e]=C.splice(M,1);C.unshift(e)}}else if(N>-1){let e=C.findIndex((e=>e.prjname===A.split(".")[2]));const[t]=C.splice(e,1);C.unshift(t)}h.fields.collaborativeSpace=new n({disabled:!1,elementsList:C.map((function(e){return{label:e.prjtitle,value:e.prjname,visibility:e.prjvisi}})),enableSearchFlag:!1,placeholder:g.collaborativeSpacePlaceholder,reachablePlaceholderFlag:(void 0===E||-1==M)&&-1==N&&C.length>1}).inject(v),h.fields.ctx=F,h.fields.collaborativeSpace.domId="collaborativeSpace",1===C.length&&(h.fields.collaborativeSpace.disabled=!0),h.fields.collaborativeSpace.inject(v),T=S("collaborativeSpaceinfo",g.collaborativeSpaceInfo,u),d=w("initiate-Route-Field",h.formFields),d.setAttribute("id","initiateRouteFieldOrg"),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{text:g.Organization}).inject(u),b.tooltipInfos=R(g.Organization),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(b);let D,I=[],O=widget.getValue("usedOrganization");if(s.credentialResponseData.credentials.forEach((e=>{if(e.ctxtitle&&e.prjname===h.fields.collaborativeSpace.value){I.some((t=>t.orgname===e.orgname))||I.push({orgname:e.orgname,orgtitle:e.orgtitle})}})),O){if(D=I.findIndex((e=>e.orgname===O.orgname)),D>-1){const[e]=I.splice(D,1);I.unshift(e)}}else if(N>-1){let e=I.findIndex((e=>e.orgname===A.split(".")[1]));const[t]=I.splice(e,1);I.unshift(t)}h.fields.organization=new n({disabled:!1,elementsList:I.map((function(e){return{label:e.orgtitle,value:e.orgname}})),enableSearchFlag:!1,placeholder:g.orgPlaceholder,reachablePlaceholderFlag:(null==O||-1==D)&&-1==N&&I.length>1}).inject(v),I.length<2&&document.getElementById("initiateRouteFieldOrg").classList.add("hideInitiateRouteFieldOrg"),h.fields.collaborativeSpace.addEventListener("change",(function(){I=[],s.credentialResponseData.credentials.forEach((e=>{if(e.ctxname&&e.prjname===h.fields.collaborativeSpace.value){I.some((t=>t.orgname===e.orgname))||I.push({orgname:e.orgname,orgtitle:e.orgtitle})}})),I.length>1?(document.getElementById("initiateRouteFieldOrg").classList.remove("hideInitiateRouteFieldOrg"),h.fields.organization.disabled=!1):document.getElementById("initiateRouteFieldOrg").classList.add("hideInitiateRouteFieldOrg"),h.fields.organization.elementsList=I.map((function(e){return{label:e.orgtitle,value:e.orgname}})),h.fields.organization.selectedIndex=0,widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons",{properties:h}),widget.routeMgmtMediator.publish("initiate-appliesTo-check-templateCollabSpace",!0)})),h.fields.organization.addEventListener("change",(function(){widget.routeMgmtMediator.publish("initiateRoute-on-ScopeSelection",{scopeId:h.fields.buttonGroupScope.value,scopePhyId:""}),widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons",{properties:h}),widget.setValue("templateOrgnization",h.fields.organization.value)})),widget.setValue("templateOrgnization",h.fields.organization.value),h.fields.organization.domId="organization",1==I.length&&null==O&&(h.fields.organization.disabled=!0),T=S("organizationInfo",g.organizationInfo,u),h.fields.organization.inject(v),d=w("initiate-Route-Field",h.formFields),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{text:g.description}).inject(u),b.tooltipInfos=R(g.description),b.setAttribute("id","template_Description_label"),b.style.marginTop="11px",h.fields.descField=new t({widthInCharNumber:63,nbRows:3,newLineMode:"enter"}),h.fields.descField.domId="Template_description",h.fields.descField.inject(v),h.templateAvailabilityFieldDiv=new UWA.Element("div",{id:"SeachAvailabilityFieldDiv",class:"fonticon-chooser-scope-display"}),h.templateAvailabilityFieldDiv.inject(h.formFields),h.fields.buttonGroupAvailability=new l({type:"radio"}),h.fields.buttonGroupAvailability.addChild(new a({type:"radio",label:g.availabilityUser,value:"User"})),h.fields.buttonGroupAvailability.addChild(new a({type:"radio",label:g.availabilityEnterprise,value:"Enterprise",checkFlag:!0})),h.fields.buttonGroupAvailability.addChild(new a({type:"radio",label:g.availabilityBookMark,value:"BookMark"})),h.fields.buttonGroupAvailability.inject(h.templateAvailabilityFieldDiv),h.fields.buttonGroupAvailability.addEventListener("change",(function(e){})),h.fields.availabilityField=new e({availabilityType:"Enterprise",availabilityId:"",availabilityName:"",sizeInCharNumber:48,value:y(),displayClearFieldButtonFlag:!1}),h.fields.availabilityField.inject(h.templateAvailabilityField),h.fields.availabilityField.addEventListener("change",(function(e){})),new UWA.Element("div",{html:"&nbsp;"}).inject(h.templateAvailabilityField),h.fields.availabilityChooser=new o({icon:{iconName:"search"}}),h.fields.availabilityChooser.getContent().addEventListener("buttonclick",(function(){})),h.fields.availabilityChooser.inject(h.templateAvailabilityField),h.templateAvailabilityField.inject(h.formFields),d=w("initiate-Route-Field",h.formFields),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),d.setAttribute("id","routeBasePurposeField"),b=new UWA.Element("h5",{class:"required",text:g.routeBasePurpose}).inject(u),b.tooltipInfos=R(g.routeBasePurpose),h.fields.routePurpose=new n({elementsList:[g.standard,g.Approval,g.Review],enableSearchFlag:!1}).inject(v),T=S("templateBaseInfo",g.initiateRouteTemplateBasePurposeHelp,u),h.fields.routePurpose.addEventListener("change",(function(e){let t=e.dsModel.selectedIndex;t=t=0==t?"Standard":1==t?"Approval":"Review",widget.routeMgmtMediator.publish("initiateRoute-on-RouteBasePurposeSelection",{basePurpose:t}),"All"!=s.routeESignConfigSetting&&"RouteSpecific"!=s.routeESignConfigSetting||("Approval"==t||"Standard"==t?(document.getElementById("approvalWithSign").style.display="block",document.getElementById("approvalEsignInfo").style.display="block",h.fields.approvalWithSign.visibleFlag=!0):(h.fields.approvalWithSign.visibleFlag=!1,document.getElementById("approvalWithSign").style.display="none",document.getElementById("approvalEsignInfo").style.display="none")),"Approval"==t||"Review"==t?(h.startRouteOnCompletionField.className="fonticon-chooser-scope-display",h.linkTemplateCompleteActionField.className="fonticon-chooser-scope-display",h.demoteOnRejectionField.className="fonticon-chooser-scope-display",document.querySelector("#templateStartRouteOnCompletion").addClassName("fonticon-chooser-scope-display"),document.querySelector("#rcaForLinkedTemplate").addClassName("fonticon-chooser-scope-display")):(h.startRouteOnCompletionField.className="",document.querySelector("#templateStartRouteOnCompletion").hasClassName("fonticon-chooser-scope-display")&&document.querySelector("#templateStartRouteOnCompletion").removeClassName("fonticon-chooser-scope-display"),h.fields.linkedTemplateField.selectedItems&&(document.querySelector("#rcaForLinkedTemplate").hasClassName("fonticon-chooser-scope-display")&&document.querySelector("#rcaForLinkedTemplate").removeClassName("fonticon-chooser-scope-display"),h.linkTemplateCompleteActionField.className="",h.demoteOnRejectionField.className=""))})),d=w("initiate-Route-Field",h.formFields),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{class:"required",text:g.routeCompletionAction}).inject(u),b.tooltipInfos=R(g.routeCompletionAction);var k=0,U=new UWA.Element("div",{id:"completeActionDiv",class:""}).inject(v);null!=widget.getValue("templateCompletionAction")&&(k=widget.getValue("templateCompletionAction")),h.fields.completionAction=new n({elementsList:[g.notifyRouteOwner,g.promoteConnectedObject],enableSearchFlag:!1,selectedIndex:k}),h.fields.completionAction.addEventListener("change",(function(e){widget.setValue("templateCompletionAction",h.fields.completionAction.selectedIndex)})),h.fields.completionAction.inject(U),T=S("templateCompletionInfo",g.initiateRouteTemplateCompletionActionHelp,u),d=w("initiate-Route-Field-LinkedTemplate",h.formFields),d.setAttribute("id","templateStartRouteOnCompletion"),u=w("initiate-Route-Field-Label-LinkedTemplate",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value-LinkedTemplate",d),b=new UWA.Element("h5",{text:g.StartRouteOnCompletion}).inject(u),b.tooltipInfos=R(g.StartRouteOnCompletion);var V=new UWA.Element("div",{id:"startRouteOnCompletionFieldChooser",class:"fonticon-chooser-display"}),x={isMultiSearchMode:!1};x.placeHolderValue=g.typeToSearch,x.minLengthToType=3,x.isFreeInputAllowed=!1,x.toKeepSearchResultsFlag=!1,x.getPrecond=function(){return r.getPrecondForLinkedTemplateSearch()},x.getChangeHandler=function(){return r.changeHandlerLinkedFortemplateField(h)},h.fields.linkedTemplateField=c.drawAutoCompleteComponent(x),h.fields.linkedTemplateField.inject(V),new UWA.Element("div",{html:"&nbsp;"}).inject(V),h.fields.templateChooser=new o({icon:{iconName:"search"}}),h.fields.templateChooser.inject(V),h.fields.templateChooser.getContent().addEventListener("buttonclick",(function(){r.init(event,h)})),V.inject(v),T=S("startRouteOnCompletionInfo",g.initiateRouteTemplateStartOnCompletionHelp,u),h.startRouteOnCompletionField.inject(h.formFields),d=w("initiate-Route-Field-LinkedTemplate",h.linkTemplateCompleteActionField),d.setAttribute("id","rcaForLinkedTemplate"),u=w("initiate-Route-Field-Label-LinkedTemplate",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value-LinkedTemplate",d),d.classList.add("fonticon-chooser-scope-display"),b=new UWA.Element("h5",{class:"required",id:"linkTemplateCompleteActionField"}).inject(u),h.fields.routeCompletionAction=new n({elementsList:[g.notifyRouteOwner,g.promoteConnectedObject],enableSearchFlag:!1}),h.fields.routeCompletionAction.inject(v),T=S("routeCompletionInfo",g.initiateRouteTemplateCompletionActionHelp,u),d.inject(h.formFields),d=w("initiate-Route-Field",h.demoteOnRejectionField),d.setAttribute("id","demoteContentOnTaskRejection"),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{class:"required",id:"demoteOnRejectionField",text:g.DemoteOnRejection}).inject(u),b.tooltipInfos=R(g.DemoteOnRejection),h.fields.demoteOnRejection=new n({elementsList:[g.no,g.yes],enableSearchFlag:!1}),h.fields.demoteOnRejection.inject(v),T=S("templateDemoteOnRejectionInfo",g.initiateRouteTemplateDemoteOnRejectionHelp,u),h.demoteOnRejectionField.inject(h.formFields),d=w("initiate-Route-Field",h.formFields),d.setAttribute("id","templateScopeId"),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{class:"required",text:g.routeScope}).inject(u),b.tooltipInfos=R(g.routeScope),h.fields.buttonGroupScope=new l({type:"radio"}),h.fields.buttonGroupScope.addChild(new a({type:"radio",label:g.scopeAll,value:"All"})),h.fields.buttonGroupScope.addChild(new a({type:"radio",label:g.scopeOrg,value:"Organization",checkFlag:!0})),h.fields.buttonGroupScope.inject(v),T=S("templateScopeInfo",g.initiateRouteTemplateScopeHelp,u),h.fields.buttonGroupScope.addEventListener("change",(function(e){widget.routeMgmtMediator.publish("initiateRoute-on-ScopeSelection",{scopeId:e.dsModel.value,scopePhyId:""})})),d=w("initiate-Route-Field",h.formFields),d.setAttribute("id","RouteTaskEditSettings"),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{class:"required",text:g.routeTaskEdits}).inject(u),b.tooltipInfos=R(g.routeTaskEdits),h.fields.routeTaskEdits=new n({elementsList:[g.ModifyDeleteTaskList,g.ExtendTaskList,g.ModifyTaskList,g.MaintainExactTaskList],enableSearchFlag:!1}),h.fields.routeTaskEdits.inject(v),T=S("templateTaskEditInfo",g.initiateRouteTemplateTaskEditSettingHelp,u),d=w("initiate-Route-Field",h.formFields),d.setAttribute("id","AutoStopOnRejectionTemplate"),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{class:"required",text:g.routeAutoStopOnRejection}).inject(u),b.tooltipInfos=R(g.routeAutoStopOnRejection),h.fields.routeAutoStopOnRejection=new n({elementsList:[g.immediate,g.deferred],enableSearchFlag:!1}),h.fields.routeAutoStopOnRejection.inject(v),T=S("templateAutoStopInfo",g.initiateRouteTemplateAutoStopOnRejectionHelp,u),d=w("initiate-Route-Field",h.formFields),d.setAttribute("id","revertUserGroupsAssignMent"),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{class1:"required",id:"PreserveTaskOwner",text:g.PreserveTaskOwnerLabel}).inject(u),b.tooltipInfos=R(g.PreserveTaskOwnerLabel),h.fields.buttonGroupPTO=new l({type:"radio"});let j=new a({type:"radio",label:g.PreserveTaskOwnerSelect2,value:"Retain",checkFlag:!0});j.tooltipInfos=R(g.PreserveTaskOwnerSelect2);let W=new a({type:"radio",label:g.PreserveTaskOwnerSelect1,value:"Reset"});W.tooltipInfos=R(g.PreserveTaskOwnerSelect1),h.fields.buttonGroupPTO.addChild(j),h.fields.buttonGroupPTO.addChild(W),h.fields.buttonGroupPTO.inject(v),T=S("templateRevertUserGroupInfo",g.initiateRouteTemplateRevertUserGroupHelp,u),d=w("initiate-Route-Field",h.formFields),d.setAttribute("id","SelectUsersfromUserGroupTemplate"),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),b=new UWA.Element("h5",{class:"required",id:"selectUsersFromUserGroup",text:g.ChooseUsersFromUG}).inject(u),b.tooltipInfos=R(g.ChooseUsersFromUG),h.fields.buttonGroupChooseUG=new l({type:"radio"}),h.fields.buttonGroupChooseUG.addChild(new a({type:"radio",label:g.no,value:"False",checkFlag:!0})),h.fields.buttonGroupChooseUG.addChild(new a({type:"radio",label:g.yes,value:"True"})),h.fields.buttonGroupChooseUG.inject(v),T=S("templateSelectUserInfo",g.initiateRouteTemplateSelectUserHelp,u),widget.routeMgmtMediator.publish("InitiateTemplate-on-chooseUGSelection",{chooseUserFromUG:"False",Type:"Route Template"}),h.fields.buttonGroupChooseUG.addEventListener("change",(function(e){"True"==e.dsModel.value?(h.fields.buttonGroupPTO.selectIndex(0),h.fields.buttonGroupPTO.getButton(1).disabled=!0):h.fields.buttonGroupPTO.getButton(1).disabled=!1,widget.routeMgmtMediator.publish("InitiateTemplate-on-chooseUGSelection",{chooseUserFromUG:e.dsModel.value[0],Type:"Route Template"})})),"RouteSpecific"!=s.routeESignConfigSetting&&"All"!=s.routeESignConfigSetting||(d=w("initiate-Route-Field",h.formFields),u=w("initiate-Route-Field-Label",d),f=new UWA.Element("div").inject(d),f.style.width="2%",v=w("initiate-Route-Field-Value",d),d.setAttribute("id","approveWithSignatureField"),b=new UWA.Element("h5",{class:"required",id:"approvalWithSign",text:g.routeRequiresESign}).inject(u),b.tooltipInfos=R(g.routeRequiresESign),h.fields.approvalWithSign=new l({type:"radio"}),h.fields.approvalWithSign.addChild(new a({type:"radio",label:g.no,value:"False",checkFlag:!0})),h.fields.approvalWithSign.addChild(new a({type:"radio",label:g.yes,value:"True"})),"All"==s.routeESignConfigSetting&&(h.fields.approvalWithSign.selectIndex(1),h.fields.approvalWithSign.getButton(0).disabled=!0),h.fields.approvalWithSign.inject(v),T=S("approvalEsignInfo",g.initiateRouteTemplateEsignHelp,u)),h.fields.name.elements.inputField.focus(),m.renderCustomAttributes(h,"Template")},y=function(){return null==widget.getPreference("organization")&&""!=widget.getPreference("organization")?widget.data.pad_security_ctx.split("ctx::")[1].split(".")[1]:widget.getPreference("organization").value},w=function(e,t){return u.createNewElement(e,t)},S=function(e,t,i){return u.createTooltipElement(e,t,i)},R=function(e){return u.getElementToolTip(e)};return{build:(e,t)=>function(e,t){h={},u.makeResponsiveCss("initiateRouteTemplate",".template-initiate-properties-container"),v(e,t)}(e,t),destroy:()=>{h={}},getProperties:()=>h}})),define("DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplatePropertiesLoader",["DS/ENORouteTemplateMgmt/Views/InitiateTemplatePropertiesView","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t){"use strict";let i={};return{init:function(t){this.showView()||(i.container=new UWA.Element("div",{html:"",id:"InitiateTemplateFormView",class:"template-initiate-properties-container"}),i.container.inject(document.querySelector("#iRouteTabsContainer")),e.build(i.container,t))},hideView:function(){document.querySelector("#InitiateTemplateFormView")&&document.querySelector("#InitiateTemplateFormView").getChildren().length>0&&(document.getElementById("InitiateTemplateFormView").style.display="none")},showView:function(){return!!(document.querySelector("#InitiateTemplateFormView")&&document.querySelector("#InitiateTemplateFormView").getChildren().length>0)&&(document.getElementById("InitiateTemplateFormView").style.display="block",!0)},destroy:function(){e.destroy()},getModel:function(){return e.getProperties()}}})),define("DS/ENORouteTemplateMgmt/Views/TemplateInfoPropWidget",["DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteMgmt/EnoviaBootstrap","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o){return{getOptions:function(t){let i=!0;"Active"!=t.model.actualState&&-1!=t.model.Actions.indexOf("modify")&&(i=!1);let a=[e.FACET_PROPERTIES];return{typeOfDisplay:e.ALL,selectionType:e.NO_SELECTION,facets:a,editMode:!1,readOnly:i,context:{getSecurityContext:function(){return{SecurityContext:l.getSecurityContextValue()}}},extraNotif:!0,disableAddExtensionButton:!0,actions:[{name:"action_close_panel",text:o.infoCloseAction,icon:"close",handler:function(){widget.routeMgmtMediator.publish("route-info-close-click",{info:"Route Template"})}}]}},getPropModel:function(e){var a=[],n=new t({metatype:"businessobject",objectId:e,source:"3DSpace",tenant:l.getTenantValue()});return n.set("isTransient",!1),n.addEvent("onSave",(function(t){i.fetchRouteTemplateById(e).then((e=>{e[0].requestFrom="editPropWidget",widget.routeMgmtMediator.publish("template-idcard-data-updated",e[0]),widget.routeMgmtMediator.publish("template-data-updated",e[0])}),(e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:o.infoRefreshError,sticky:!1})}))})),a.push(n),a},addFacets:function(e,t){let i=this.getFacets(t);e.addFacets(i)},getFacets:function(e){return[{alwaysVisible:!0,require:"DS/ENORIPE_Relations/views/RelationsTab",facet:{name:"relations",text:o.relations_tab,icon:"object-related"}},{alwaysVisible:!0,require:"DS/ENORouteTemplateMgmt/Views/TemplateRelatedObjInfo",options:{model:e.model},facet:{name:"options",text:o.infoRelationTab,icon:"cog"}},{alwaysCalled:!0,alwaysVisible:!0,visible:!0,inheritance:!0,require:"DS/ENORouteTemplateMgmt/Views/RouteTemplateHistory",options:{id:e.model.id},facet:{name:"history",text:o.infoHistoryTab,icon:"navigation-history"}},{alwaysVisible:!0,require:"DS/EditPropWidget/facets/SwymComments/SwymComments",facet:{name:"social",text:o.comments,icon:"comment"}}]}}})),define("DS/ENORouteTemplateMgmt/Config/TemplateSummaryGridViewConfig",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateGridCustomColumns","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t){"use strict";return[{text:t.title,dataIndex:"tree",editableFlag:!1,pinned:"left"},{text:t.name,dataIndex:"Name",editableFlag:!1},{text:t.maturityState,dataIndex:"Maturity_State",editableFlag:!1,onCellRequest:e.onRouteNodeStateCellRequest},{text:t.routeBasePurpose,dataIndex:"BasePurposeNLS",editableFlag:!1},{text:t.description,dataIndex:"Description",editableFlag:!1},{text:t.revision,dataIndex:"revision",editableFlag:!1},{text:t.owner,dataIndex:"Owner",editableFlag:!1,onCellRequest:e.onRouteNodeOwnerCellRequest}]})),define("DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView",["DS/ENORouteTemplateMgmt/Config/TemplateSummaryGridViewConfig","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","DS/ENORouteTemplateMgmt/Utilities/DragAndDropOnTemplateSummary","DS/ENORouteMgmt/Utilities/DragAndDropManager","DS/ENORouteTemplateMgmt/Config/Toolbar/TemplateSummaryToolbarConfig","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i,l,o,a){"use strict";let n,s,r={},d=function(e,t){l._onTemplatesummaryDropManager(e)},c=function(){var e=widget.getValue("templatefilters");return null==e?(widget.setValue("templatefilters",["owned","shared","Draft","Released"]),["owned","shared","Draft","Released"]):e};return{build:a=>function(a){let u=widget.getValue("TemplateSummary-ShowView"),p="data-grid-container showView nonVisible";u&&"TileView"==u&&(p="data-grid-container hideView");var m=UWA.createElement("div",{id:"TemplatedataGridViewContainer",class:p});i.makeDroppable(m,d);let f=o.writetoolbarDefination(c());1==UWA.Utils.Client.Features.touchEvents&&(r.showRowCount=!0),r.cellDragEnabledFlag=!0,r.identifier="TemplateSummaryDataGridView";let g=t.build(a,e,f,m,r);return n=t.dataGridViewToolbar(),s=t.dataGridView(),s.onDragStartCell=function(e,t){return l.getContentForDrag(e,t),!0},s.onDragEndCell=function(e,t){e.target.removeClassName("wux-ui-state-activated wux-ui-state-highlighted")},g}(a),registerListners:()=>registerListners(),destroy:()=>{_dataGrid.destroy()},getGridViewToolbar:()=>n,getDataGridInstance:()=>s}})),define("DS/ENORouteTemplateMgmt/Views/ToggleViews",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t){"use strict";let i,l,o;return{doToggleView:function(a){if("TemplateSummary"===a.curPage)i=".data-grid-container",l=".tile-view-container",o=e.getGridViewToolbar().getNodeModelByID("view");else Console.log("Incorrect arguments in config file.");if(e.getDataGridInstance().getModel().getFilterViewManager().filterManager.isDataFiltered()&&0==e.getDataGridInstance().getModel().getRowModelLength()&&"GridView"!=a.view)widget.notify.handler().addNotif({level:"warning",subtitle:t.tileViewWarningDetails,sticky:!1});else if(widget.setValue(a.curPage+"-ShowView",a.view),"GridView"==a.view)o.options.grid.data.menu[1].state="selected",o.options.grid.data.menu[0].state="unselected",o&&"view-list"!=o.options.grid.semantics.icon.iconName&&o.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}}}),(n=document.querySelector(i))&&(n.removeClassName("hideView"),n.removeClassName("nonVisible"),n.addClassName("showView")),(s=document.querySelector(l))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==a.view){var n,s;o.options.grid.data.menu[1].state="unselected",o.options.grid.data.menu[0].state="selected",o&&"view-small-tile"!=o.options.grid.semantics.icon.iconName&&o.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}}}),(n=document.querySelector(i))&&(n.removeClassName("showView"),n.addClassName("hideView")),(s=document.querySelector(l))&&(s.removeClassName("hideView"),s.addClassName("showView"))}}}})),define("DS/ENORouteTemplateMgmt/Actions/InitiateTemplateActions",["DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/WAFData/WAFData","UWA/Core","DS/ENORouteMgmt/Utilities/Utils","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/ParseJSONUtil","DS/ENORouteMgmt/Utilities/InitiatePropertiesCustomAttributeUtility","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s){"use strict";let r,d=function(e){const t=e.fields.ctx.findIndex((t=>{const i=t.split(".");return i[1]===e.fields.organization.value&&i[2]===e.fields.collaborativeSpace.value}));var i={title:e.fields.name.value.trim(),description:e.fields.descField.value,collaborativeSpace:e.fields.collaborativeSpace.value,organization:e.fields.organization.value,ctx:e.fields.ctx[t],attrAvailabilityType:"Organization",attrAvailabilityId:"",routeBasePurpose:0==e.fields.routePurpose.selectedIndex?"Standard":1==e.fields.routePurpose.selectedIndex?"Approval":"Review",attRestrictMembers:u(e),taskEditSetting:0==e.fields.routeTaskEdits.selectedIndex?"Modify/Delete Task List":1==e.fields.routeTaskEdits.selectedIndex?"Extend Task List":2==e.fields.routeTaskEdits.selectedIndex?"Modify Task List":"Maintain Exact Task List",AutoStopOnRejection:0==e.fields.routeAutoStopOnRejection.selectedIndex?"Immediate":"Deferred",preserveTaskOwner:"Retain"==e.fields.buttonGroupPTO.value[0]?"False":"True",selectUsersFromUserGroup:"True"==e.fields.buttonGroupChooseUG.value[0]?"True":"False",completionAction:0==e.fields.completionAction.selectedIndex?"Notify Route Owner":"Promote Connected Object"};return widget.setValue("usedCollaborativeSpace",{prjtitle:e.fields.collaborativeSpace.label,prjname:e.fields.collaborativeSpace.value}),widget.setValue("usedOrganization",{orgtitle:e.fields.organization.label,orgname:e.fields.organization.value}),0==e.fields.routePurpose.selectedIndex&&e.fields.linkedTemplateField.selectedItems&&(i.linkedRouteTemplateId=e.fields.linkedTemplateField.selectedItems.options.value,i.routeCompletionAction=0==e.fields.routeCompletionAction.selectedIndex?"Notify Route Owner":"Promote Connected Object",i.DemoteOnRejection=0==e.fields.demoteOnRejection.selectedIndex?"No":"Yes"),e.fields.approvalWithSign&&e.fields.approvalWithSign.visibleFlag&&(i.routeRequiresESign="True"==e.fields.approvalWithSign.value[0]?"True":"False"),n.addCustomAttrInfo(i,e.fields,"Template"),i},c=function(e,t){var i={tasks:[]};return e.forEach((e=>{let l="";e.taskDueDate&&""!=e.taskDueDate&&(l=new Date(e.taskDueDate).toISOString());var o=e.chooseUsersFromUg;("TRUE"==e.routeOwnerTask||"Group"!=e.assigneeType&&"Group Proxy"!=e.assigneeType||"False"==t.fields.buttonGroupChooseUG.value[0])&&(o="False"),i.tasks.push({dataelements:{allowDelegation:e.allowDelegation,assigneeId:1==e.routeOwnerTask?"contextUser":e.assigneeId,assigneeSetDueDate:e.assigneeSetDueDate,instructions:e.instructions,parallelNodeProcessionRule:e.parallelNodeProcessionRule,taskAction:e.taskAction,taskOrder:e.taskOrder,taskDueDate:l,title:e.title,reviewTask:e.needsOwnerReview,dateOffsetFrom:e.dateOffsetFrom,dueDateOffset:e.dueDateOffset,needsOwnerReview:e.needsOwnerReview,routeOwnerTask:e.routeOwnerTask,routeOwnerUGChoice:e.routeOwnerUGChoice,chooseUsersFromUg:o,routeTaskPriority:e.routeTaskPriority}})})),i},u=function(e){if(e.fields.buttonGroupScope){var t=e.fields.buttonGroupScope.value[0];return"scope"==t?e.fields.scopeField.options.scopePhyId:t}if(e.fields.scopeField)return e.fields.scopeField.options.scopePhyId},p=function(e){var t=[],i=e.maturityState.selectedItems.options.value,l=i.split("|")[0],o=i.split("|")[1];if(t.push({dataelements:{objType:e.type.selectedItems.options.value,objPolicy:e.policy.selectedItems.options.value,fromState:l,toState:o,notifyAdmin:e.notifyAdmin}}),e.criteriaCheckbox.checkFlag&&("Credentials"==e.criteriaSelection.value?t[0].dataelements.collaboration=" ":"Attribute"==e.criteriaSelection.value&&(t[0].dataelements.attributeName=e.attributeName.selectedItems._options.grid.name,t[0].dataelements.attributeCondition=e.attributeCases.value,"date"==e.attributeName.selectedItems._options.grid.type?"between"==e.attributeCases.value?Date.parse(e.attributeValue.value.toGMTString())>Date.parse(e.attributeValue1.value.toGMTString())?t[0].dataelements.attributeValue=new Date(e.attributeValue1.value).toISOString()+"%"+new Date(e.attributeValue.value).toISOString():t[0].dataelements.attributeValue=new Date(e.attributeValue.value).toISOString()+"%"+new Date(e.attributeValue1.value).toISOString():t[0].dataelements.attributeValue=new Date(e.attributeValue.value).toISOString():t[0].dataelements.attributeValue=e.attributeValue.value)),e.subTypeCheckbox.checkFlag){var a=e.subType.selectedItems;if(null!=a){for(var n=[],s=0;s<a.length;s++)n.push(a[s].options.value);t[0].dataelements.itemsForExactType=n}}return t};return r={saveAsDraftTemplate:(t,i,l)=>function(t,i,l){return new Promise((function(o,n){var s=d(t);s=(new a).createDataForRequest(s),null!=i&&(s.data[0].relateddata=c(i,t)),l&&l[0]&&l[0].info&&l[0].info.enableApplicability.checkFlag&&(null==s.data[0].relateddata&&(s.data[0].relateddata={}),s.data[0].relateddata.applicabilities=p(l[0].info)),e.saveAsRouteTemplate(s).then((e=>o(e)),(e=>n(e)))}))}(t,i,l),createAndActivateRouteTemplate:(t,i)=>function(t,i){var l;return new Promise((function(o,n){var s=d(t);s=(new a).createDataForRequest(s),null!=i&&(s.data[0].relateddata=c(i,t)),e.createAndActivateRouteTemplate(s).then((e=>{l=e[0].id,o(e)}),(e=>n(e)))})).then((function(){return new Promise((function(t,i){e.fetchRouteTemplateById(l).then((e=>{t(e)}),(e=>i(e)))}))}))}(t,i)},r})),define("DS/ENORouteTemplateMgmt/Views/TemplateHeaderView",["DS/WebappsUtils/WebappsUtils","DS/ResizeSensor/js/ResizeSensor","DS/ENORouteMgmt/Utilities/IdCardUtil","DS/RouteWebAppUX/RouteTracker/RouteCloudProbeUtils","DS/ENORouteTemplateMgmt/Actions/TemplateActions","DS/ENORouteTemplateMgmt/Services/LifeCycleServices","DS/ENORouteMgmt/Utilities/DataFormatter","DS/ENORouteMgmt/EnoviaBootstrap","DS/LifecycleControls/EditPropDialog","DS/TransientWidget/TransientWidget","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r,d,c){"use strict";let u;var p=function(e){this.container=e};p.prototype.resizeSensor=function(){new t(u,(function(){i.resizeIDCard(u.offsetWidth)}))},p.prototype.resizeIDCard=function(){i.resizeIDCard(u.offsetWidth)},p.prototype.init=function(t,i){u=new UWA.Element("div",{id:"routeIdCard",class:""}),this.container.appendChild(u);var o=new UWA.Element("div",{id:"infoAndThumbnailSec",class:"id-card-info-and-thumbnail-section"});u.appendChild(o);UWA.createElement("div",{id:"routeHome",class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-home fonticon-display fonticon-color-display",title:c.home,styles:{"font-size":"20px"},events:{click:function(e){g()}}}).inject(o);var p=new UWA.Element("div",{id:"thumbnailSection",class:"id-card-thumbnail-section",html:[UWA.createElement("div",{class:"id-card-thumbnail",styles:{"background-image":"url("+e.getWebappsAssetUrl("ENORouteMgmt","icons/144/I_RouteTemplate108x144.png")+")"}})]});o.appendChild(p);var h=new UWA.Element("div",{id:"infoSec",class:"id-card-info-section no-bottom-border"});o.appendChild(h);var b=new UWA.Element("div",{id:"infoHeaderSec",class:"id-card-header-section"});h.appendChild(b);var T=new UWA.Element("div",{id:"infoHeaderSecTitle",class:"id-card-title-section"});b.appendChild(T),UWA.createElement("h4",{title:t.model.Title,text:t.model.Title}).inject(T);let v=widget.getValue("templateIdCardPersistency"),y="wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-expand-down fonticon-display fonticon-color-display",w=c.idCardHeaderActionExpand;v&&"maximized"==v&&(y="wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-expand-up fonticon-display fonticon-color-display",w=c.idCardHeaderActionCollapse);var S=new UWA.Element("div",{id:"infoHeaderSecAction",class:"id-card-actions-section"});b.appendChild(S),UWA.createElement("div",{id:"expandCollapse",class:y,title:w,styles:{"font-size":"20px"},events:{click:function(e){m()}}}).inject(S);var R={},C=[],F={options:{}};F.options.grid=t.model;let E=t.model.OwnerId;C.push(F),R.data=C,require(["DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu"],(function(e){e.templateIdCardCheveron(R,t).inject(S)}));var M="fonticon-color-display";i&&(M="fonticon-color-active"),UWA.createElement("div",{id:"routeInfoIcon",title:c.idCardHeaderActionInfo,class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-info fonticon-display "+M+" ",styles:{"font-size":"20px"},events:{click:function(e){l.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Properties"}),widget.getValue("propWidgetOpen")?widget.routeMgmtMediator.publish("route-info-close-click",{info:"Route Template"}):widget.routeMgmtMediator.publish("route-header-info-click",{model:t.model,info:"Route Template"})}}}).inject(S);var A=new UWA.Element("div",{id:"infoDetailedSec",class:"id-card-detailed-info-section"});h.appendChild(A);var N=n.templateGridData(t.model),D=new UWA.Element("div",{id:"channel1",class:"properties-channel"});A.appendChild(D);var I=UWA.createElement("div",{html:[UWA.createElement("label",{html:c.IDcardOwner+"&nbsp;:&nbsp;",class:""}),UWA.createElement("a",{html:t.model.OwnerFullName,class:""})]});null!=s.getSwymUrl()?(I.getChildren()[1].setStyle("cursor","pointer"),I.removeEvents(),I.addEvent("click",(function(e){d.showWidget("X3DPRFL_AP","",{login:t.model.UserName,url:s.getSwymUrl()+"?profile="+t.model.UserName},{mode:"panel",height:700,width:800})}))):(I.getChildren()[1].setStyle("cursor","pointer"),I.removeEvents(),I.addEvent("click",(function(e){var t={_context:s.getSecurityContextValue(),_selection:[{getID:function(){return E}}],getSecurityContext:function(){return this._context},getSelectedNodes:function(){return this._selection},displayNotification:function(){}};(new r).launchProperties(t)}))),I.inject(D),require(["DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu"],(function(e){UWA.createElement("div",{class:"",html:[UWA.createElement("label",{class:"",html:c.IDcardMaturityState+"&nbsp;:"}),UWA.createElement("span",{class:"route-template-state-title "+t.model.state.toUpperCase().replace(/ /g,""),html:"&nbsp;"+t.model.Maturity_State+"&nbsp;",events:{click:function(){a.lifeCycle(N)}},styles:{cursor:"pointer",margin:"0 5px 0 5px"}}),UWA.createElement("span",{html:e.templateIdCardStateCheveron(t.model),class:"",styles:{"margin-left":"5px"}})]}).inject(D)}));var O=t.model.ProjectTitle;O||(O=t.model.Project),UWA.createElement("div",{html:[UWA.createElement("label",{html:c.IDcardCollSpace+"&nbsp;:&nbsp;",class:""}),UWA.createElement("span",{html:O,class:""})]}).inject(D);var k=new UWA.Element("div",{id:"channel2",class:"properties-channel"});A.appendChild(k),UWA.createElement("div",{html:[UWA.createElement("label",{html:c.revision+"&nbsp;:&nbsp;",class:""}),UWA.createElement("span",{html:f(t.model.id,t.model.revision),class:""})]}).inject(k);var U=new Date(t.model.Modified);UWA.createElement("div",{html:[UWA.createElement("label",{html:c.IDcardModified+"&nbsp;:&nbsp;",class:""}),UWA.createElement("span",{html:U.toGMTString().parseRelativeTime(),class:""})]}).inject(k);var V=new UWA.Element("div",{id:"channel3",class:"properties-channel"});A.appendChild(V),UWA.createElement("div",{class:"id-card-description",html:[UWA.createElement("span",{text:t.model.Description,title:t.model.Description,class:""})]}).inject(V)},p.prototype.destroyContainer=function(){this.container.destroy()},p.prototype.destroyContent=function(){u.destroy()};let m=function(){var e=document.querySelector("#expandCollapse"),t=document.querySelector("#templateHeaderContainer");document.querySelector("#graph_canvas_view");let i=document.querySelector(".route-graph-task-container");if(e.className.indexOf("wux-ui-3ds-expand-up")>-1){if(e.className=e.className.replace("wux-ui-3ds-expand-up","wux-ui-3ds-expand-down"),t.classList.add("minimized"),e.title=c.idCardHeaderActionExpand,(l=document.querySelector("#thumbnailSection"))&&l.className.indexOf("id-card-thumbnail-remove")>-1)(o=document.querySelector("#infoSec")).classList.remove("id-info-section-align"),o.classList.add("id-info-section-align-minimized");null!=i&&i.setStyle("height","calc(100% - 96px)"),widget.setValue("templateIdCardPersistency","minimized")}else{var l,o;if(e.className=e.className.replace("wux-ui-3ds-expand-down","wux-ui-3ds-expand-up"),t.classList.remove("minimized"),e.title=c.idCardHeaderActionCollapse,(l=document.querySelector("#thumbnailSection"))&&l.className.indexOf("id-card-thumbnail-remove")>-1)(o=document.querySelector("#infoSec")).classList.remove("id-info-section-align-minimized"),o.classList.add("id-info-section-align");null!=i&&i.style.removeProperty("height"),widget.setValue("templateIdCardPersistency","maximized")}},f=function(e,t){var i=UWA.createElement("a");return i.set({title:c.revision,text:t,phyId:e,revision:t,class:"cursorPointer",events:{click:function(){o.renderRevisionsDialog(this.getAttribute("phyid"))}}}),i},g=function(){widget.routeMgmtMediator.publish("route-triptych-show-toggle-button"),widget.routeMgmtMediator.publish("template-back-to-summary"),widget.routeMgmtMediator.publish("template-tag-data-updated"),widget.routeMgmtMediator.publish("route-task-close-click-view-mode"),widget.routeMgmtMediator.publish("route-task-close-click-edit-mode"),require(["DS/ENORouteTemplateMgmt/Model/RouteTemplateModel"],(function(e){widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:e.getModel()})})),widget.setValue("openedTemplateId",void 0),widget.setValue("templateIdToBePersisted",void 0),widget.setValue("taskIdTobePersisted",void 0),document.getElementById("add-appliesTo-grid-section-container")?.remove()};return p})),define("DS/ENORouteTemplateMgmt/Views/InitiateTemplateTabsView",["DS/Controls/TabBar","DS/ENORouteMgmt/Components/Mediator","DS/ENORouteTemplateMgmt/Config/InitiateTemplateTabsConfig"],(function(e,t,i){"use strict";let l,o,a={},n={},s=function(e,t){this.container=e,n=t,c()},r=function(e){let t=e.options.value;if(void 0===t&&(t=e.dsModel.buttonGroup.value[0]),t!==o){var i=["properties","tasks","appliesTo"];a[i[t]].init(n),void 0!==o&&a[i[o]].hideView(),o=t}};s.prototype.init=function(){l=new e({displayStyle:"strip",showComboBoxFlag:!0,editableFlag:!1,multiSelFlag:!1,reindexFlag:!0,centeredFlag:!1,allowUnsafeHTMLOnTabButton:!0}),i.forEach((e=>{l.add(e)})),l.inject(this.container),d()};let d=function(){new Promise((function(e,t){let l=[];i.forEach(((e,t)=>{""!=e.loader&&(l[t]=new Promise((function(t,i){require([e.loader],(function(i){a[e.id]=i,t()}))})))})),Promise.all(l).then((()=>{e()}))})).then((function(){let e={options:{}};e.options.value=0,r(e),l.addEventListener("tabButtonClick",(function(e){r(e)})),l.addEventListener("change",(function(e){r(e)}))}),(function(){}))};s.prototype.destroy=function(){try{o=void 0,Object.keys(a).map((e=>{a[e].destroy()})),l.destroy(),n={},this.container.destroy()}catch(e){}},s.getModel=function(e){return a[e].getModel()},s.getPropertiesModel=function(){a.properties.getModel()},s.getContentModel=function(){a.contents.getModel()},s.getTasksModel=function(){a.tasks.getModel()},s.getAppliesToModel=function(){a.appliesTo.getModel()};let c=function(){null==widget.routeMgmtMediator&&(widget.routeMgmtMediator=new t),widget.routeMgmtMediator.subscribe("initiateRoute-on-TemplateSelection",(function(e){e.template&&e.template.length>0&&e.template[0].id?(n.templateId=e.template[0].id,n.chooseUserFromGroup=e.chooseUserFromUG):(n.templateId="",n.chooseUserFromGroup="No")})),widget.routeMgmtMediator.subscribe("initiateRoute-on-ScopeSelection",(function(e){n.scopeId=e.scopeId,n.scopePhyId=e.scopePhyId,n.ScopeMembers=e.ScopeMembers})),widget.routeMgmtMediator.subscribe("initiateRoute-on-RouteBasePurposeSelection",(function(e){e.basePurpose&&(n.routeBasePurpose=e.basePurpose)})),widget.routeMgmtMediator.subscribe("InitiateTemplate-on-chooseUGSelection",(function(e){e.chooseUserFromUG&&e.Type&&(n.chooseUserFromGroup=e.chooseUserFromUG,n.Type=e.Type)}))};return s})),define("DS/ENORouteTemplateMgmt/Views/Dialogs/InitiateTemplateDialog",["DS/ENORouteTemplateMgmt/Views/InitiateTemplateTabsView","DS/ENORouteTemplateMgmt/Actions/InitiateTemplateActions","DS/ENORouteMgmt/Utilities/Utils","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/Controls/Button","DS/ENORouteMgmt/EnoviaBootstrap","DS/RouteWebAppUX/RouteTracker/RouteCloudProbeUtils","DS/ENORouteMgmt/Utilities/RouteViewUtils","DS/ENORouteMgmt/Views/Form/FormValidation","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i,l,o,a,n,s,r,d,c,u){"use strict";let p,m,f,g,h={},b=function(e){e&&e.credentials.length<=1&&!e.credentials.some((e=>e.ctxname))?widget.notify.handler().addNotif({level:"error",title:u.errorCreateRouteTemplateForRoleTitle,subtitle:u.errorCreateRouteTemplateForRoleSubTitle,message:u.errorCreateRouteTemplateForRoleMsg,sticky:!1}):(h={},h.credentialResponseData=e,h.scopeId="Organization",h.routeBasePurpose="Standard",h.chooseUserFromGroup="False",a.getESignConfigSetting().then((function(e){h.routeESignConfigSetting=e.routeESignConfigSetting,T()})))},T=function(){let i=new UWA.Element("div",{html:"",id:"initiateTemplate"});p=new UWA.Element("div",{id:"iRouteTabsContainer",class:"template-facets-container"}),f=!1,g=!1,new e(p,h).init(),p.inject(i);var a=new o;a.inject(document.body),m=new l({title:u.newTemplate,modalFlag:!0,width:600,height:500,minWidth:290,minHeight:250,content:i,domId:"RouteImmersiveFrame",immersiveFrame:a,resizableFlag:!0,buttons:{Ok:new n({disabled:!0,domId:"releaseButton",emphasize:"primary",label:u.release,allowUnsafeHTMLLabel:!0,onClick:function(e){r.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Release"});let i=S();y(i)&&c.validateRouteCustomAttrInfo(h,i.fields,"Template")&&(e.dsModel.label=u.buttonProgress,e.dsModel.disabled=!0,m.buttons.Apply.disabled=!0,m.buttons.Cancel.disabled=!0,t.createAndActivateRouteTemplate(i,R()).then((t=>{var i="";i=t[0].title.length>30?t[0].title.substring(0,27)+"...":t[0].title;var l={level:"success",subtitle:u.replace(u.successCreatedAndReleased,{tag1:i}),sticky:!1,allowUnsafeHTML:!1};widget.routeMgmtMediator.publish("template-summary-append-rows",{data:t[0]}),widget.routeMgmtMediator.publish("template-created",t[0]),e.dsModel.dialog.close(),widget.routeMgmtMediator.publish("template-summary-show-message",{message:l}),widget.routeMgmtMediator.publish("refresh-homepage-after-template-created",{data:t[0]}),widget.routeMgmtMediator.publish("template-deactivate-tag-data")}),(t=>{e.dsModel.label=u.release,e.dsModel.disabled=!1,m.buttons.Apply.disabled=!1,m.buttons.Cancel.disabled=!1,-1!=t.error.indexOf(u.ErrorChooseUsers)?widget.notify.handler().addNotif({level:"error",subtitle:u.UnresolvedTasksError,sticky:!1}):t&&t.error.toLowerCase().indexOf("no create access")>-1?widget.notify.handler().addNotif({level:"error",title:u.errorCreateRouteTemplateForRoleTitle,subtitle:u.errorCreateRouteTemplateForRoleSubTitle,message:u.errorCreateRouteTemplateForRoleMsg,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1})})))}}),Save:new n({disabled:!0,domId:"notifyforActivation",emphasize:"primary",label:u.notifyforActivation,allowUnsafeHTMLLabel:!0,visibleFlag:!1,onClick:function(e){let i=S();if(0==document.querySelector("#RouteImmersiveFrame #releaseButton").dsModel.disabled&&(f=!0),!y(i))return;if(!c.validateRouteCustomAttrInfo(h,i.fields,"Template"))return;let l=R();e.dsModel.label=u.buttonProgress,e.dsModel.disabled=!0,m.buttons.Ok.disabled=!0,m.buttons.Cancel.disabled=!0;var o=C();o&&o.length>0&&1==o[0].info.enableApplicability.checkFlag&&(o[0].info.notifyAdmin="true"),t.saveAsDraftTemplate(i,l,o).then((t=>{var i="";if(i=t[0].title.length>30?t[0].title.substring(0,27)+"...":t[0].title,o&&o.length>0&&1==o[0].info.enableApplicability.checkFlag){t[0].applicableTo="TRUE";var l,a=s.getSecurityContextValue();if(a&&a.split(".")&&(l=a.split(".")[0]),l&&!l.includes("VPLMAdmin")){var n=t[0].actions.indexOf("promote");-1!=n&&(t[0].actions[n]="notifyAdmin")}}var r={level:"success",subtitle:u.replace(u.successNotifyForAdmin,{tag1:i}),sticky:!1,allowUnsafeHTML:!1};widget.routeMgmtMediator.publish("template-summary-append-rows",{data:t[0]}),widget.routeMgmtMediator.publish("template-created",t[0]),e.dsModel.dialog.close(),widget.routeMgmtMediator.publish("template-summary-show-message",{message:r}),widget.routeMgmtMediator.publish("refresh-homepage-after-template-created",{data:t[0]}),widget.routeMgmtMediator.publish("template-deactivate-tag-data")}),(t=>{e.dsModel.label=u.notifyforActivation,e.dsModel.disabled=!1,1==f&&(m.buttons.Ok.disabled=!1),m.buttons.Cancel.disabled=!1,t&&t.error.toLowerCase().indexOf("no create access")>-1?widget.notify.handler().addNotif({level:"error",title:u.errorCreateRouteTemplateForRoleTitle,subtitle:u.errorCreateRouteTemplateForRoleSubTitle,message:u.errorCreateRouteTemplateForRoleMsg,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1})}))}}),Apply:new n({disabled:!0,emphasize:"secondary",domId:"applyButton",label:u.saveAsDraft,allowUnsafeHTMLLabel:!0,onClick:function(e){r.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Save as Draft"});let i=S();if(0==document.querySelector("#RouteImmersiveFrame #releaseButton").dsModel.disabled&&(f=!0),!y(i))return;if(!c.validateRouteCustomAttrInfo(h,i.fields,"Template"))return;let l=R();e.dsModel.label=u.buttonProgress,e.dsModel.disabled=!0,m.buttons.Ok.disabled=!0,m.buttons.Cancel.disabled=!0;var o=C();o&&o.length>0&&1==o[0].info.enableApplicability.checkFlag&&(o[0].info.notifyAdmin="false"),t.saveAsDraftTemplate(i,l,o).then((t=>{var i="";if(i=t[0].title.length>30?t[0].title.substring(0,27)+"...":t[0].title,o&&o.length>0&&1==o[0].info.enableApplicability.checkFlag){t[0].applicableTo="TRUE";var l,a=s.getSecurityContextValue();if(a&&a.split(".")&&(l=a.split(".")[0]),l&&!l.includes("VPLMAdmin")){var n=t[0].actions.indexOf("promote");-1!=n&&(t[0].actions[n]="notifyAdmin")}}var r={level:"success",subtitle:u.replace(u.successCreate,{tag1:i}),sticky:!1,allowUnsafeHTML:!1};widget.routeMgmtMediator.publish("template-summary-append-rows",{data:t[0]}),widget.routeMgmtMediator.publish("template-created",t[0]),e.dsModel.dialog.close(),widget.routeMgmtMediator.publish("template-summary-show-message",{message:r}),widget.routeMgmtMediator.publish("refresh-homepage-after-template-created",{data:t[0]}),widget.routeMgmtMediator.publish("template-deactivate-tag-data")}),(t=>{e.dsModel.label=u.saveAsDraft,e.dsModel.disabled=!1,1==f&&(m.buttons.Ok.disabled=!1),m.buttons.Cancel.disabled=!1,t&&t.error.toLowerCase().indexOf("no create access")>-1?widget.notify.handler().addNotif({level:"error",title:u.errorCreateRouteTemplateForRoleTitle,subtitle:u.errorCreateRouteTemplateForRoleSubTitle,message:u.errorCreateRouteTemplateForRoleMsg,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1})}))}}),Cancel:new n({label:u.cancel,domId:"cancelButton",emphasize:"secondary",allowUnsafeHTMLLabel:!0,onClick:function(e){e.dsModel.dialog.close(),widget.setValue("isDialogOpened",!1)}})}}),v(),m.addEventListener("close",(function(t){widget.notify.notifview().removeNotifications(),new e(p).destroy(),widget.setValue("isDialogOpened",!1)}))},v=function(){widget.routeMgmtMediator.subscribe("initiate-template-toggle-dialogbuttons",(function(){w()})),widget.routeMgmtMediator.subscribe("initiate-route-toggle-dialogbuttons",(function(){w()}))},y=function(e){return!e.fields.linkedTemplateField.selectedItems||""==e.fields.linkedTemplateField.selectedItems.options.label||""!=e.fields.linkedTemplateField.selectedItems.options.value&&null!=e.fields.linkedTemplateField.selectedItems.options.value||(widget.notify.handler().addNotif({level:"error",subtitle:u.linkedTemplateSelectMessage,sticky:!1}),!1)};var w=function(){let e,t=S(),i=R(),l=C();if(l[0]&&l[0].info&&(e=l[0].info),t&&t.formFields){{t.formFields.getChildren();var o=t.fields.name.elements.inputField.value;let l=!1;e&&1==e.enableApplicability.checkFlag&&(null==e.policy.selectedItems||null==e.type.selectedItems||null==e.maturityState.selectedItems?l=!0:1!=e.subTypeCheckbox.checkFlag||null!=e.subType.selectedItems&&0!=e.subType.selectedItems.length?1==e.criteriaCheckbox.checkFlag&&("Credentials"==e.criteriaSelection.value?l=!1:"Attribute"==e.criteriaSelection.value?(null==e.attributeName.selectedItems||"isempty"!==e.attributeCases.value&&"isnotempty"!==e.attributeCases.value&&""==e.attributeValue.value)&&(l=!0):l=!0):l=!0);var a=t.fields.collaborativeSpace.value,n=t.fields.organization.value;""!=o.trim()&&a&&""!=a.trim()&&n&&""!=n.trim()&&(Array.isArray(i)&&i.length>=0||void 0===i)&&!l?(m.buttons.Apply.disabled=!1,g=!0):(m.buttons.Apply.disabled=!0,g=!1)}f=!!(i&&Array.isArray(i)&&i.length>0),g&&f?(m.buttons.Save.disabled=!1,m.buttons.Ok.disabled=!1):(m.buttons.Save.disabled=!0,m.buttons.Ok.disabled=!0)}};let S=function(){return e.getModel("properties")},R=function(){return e.getModel("tasks")},C=function(){return e.getModel("appliesTo")};return{InitiateTemplateDialog:()=>{d.fetchCredentials("newTemplateDialog").then((function(e){b(e)}))},getDialog:()=>m,getPropertiesModel:()=>S()}})),define("DS/ENORouteTemplateMgmt/Views/Dialogs/TemplateNewRevision",["DS/WAFData/WAFData","UWA/Core","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/Controls/Button","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","DS/ENORouteMgmt/Actions/RouteActions","DS/ENORouteTemplateMgmt/Actions/TemplateActions","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r,d){"use strict";let c,u,p=function(e,t){r.reviseRouteTemplate(e,t).then((i=>{var l=d.successRevise;widget.notify.handler().addNotif({level:"success",subtitle:l,sticky:!1});var o={};o.data=i[0],o.action=t,widget.routeMgmtMediator.publish("template-summary-delete-row-by-ids",{model:e}),widget.routeMgmtMediator.publish("template-summary-append-rows",o)}),(e=>{var t=JSON.parse(e);t.error?widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:d.errorRevise,sticky:!1})})),u.close()};return c={newRevisionConfirmation:(e,t)=>function(e,t){if(e.data,e.data.length<1)return void widget.notify.handler().addNotif({level:"warning",subtitle:d.ErrorTemplateReviseSelection,sticky:!1});var a=[],n=!1;let s=new l;s.inject(document.body);let r=new UWA.Element("div",{id:"reviseTemplateWarning",class:""});var c=d.reviseTemplateHeader+e.data[0].options.grid.Title;"TRUE"==e.data[0].options.grid.reviseAccess?(a.push(e.data[0].options.grid.id),r.appendChild(UWA.createElement("div",{class:"",html:d.reviseTemplateWarning}))):(n=!0,r.appendChild(UWA.createElement("div",{class:"",html:d.reviseTemplateWarningDetail2Single}))),u=new i({modalFlag:!0,width:500,height:200,title:c,content:r,domId:"RouteImmersiveFrame",immersiveFrame:s,buttons:{Ok:new o({label:d.Revise,disabled:n,onClick:function(e){e.dsModel.dialog,p(a,t)}}),Cancel:new o({onClick:function(e){e.dsModel.dialog.close()}})}})}(e,t)},c})),define("DS/ENORouteTemplateMgmt/Config/RemoveTemplateGridViewConfig",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateGridCustomColumns","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t){"use strict";return[{text:t.title,dataIndex:"tree",editableFlag:!1,pinned:"left"},{text:t.maturityState,dataIndex:"Maturity_State",editableFlag:!1,onCellRequest:e.onRemoveTemplateNodeStateCellRequest},{text:t.revision,dataIndex:"revision",editableFlag:!1},{text:t.accessCheck,dataIndex:"Deleteicon",editableFlag:!1,typeRepresentation:"user"}]})),define("DS/ENORouteTemplateMgmt/Config/InitiateAppliesToGridViewConfig",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateAppliesToGridCustomColumn","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t){"use strict";return[{dataIndex:"Title",visibility:!0,onCellRequest:e.onRouteNodeActionCellRequest}]})),define("DS/ENORouteTemplateMgmt/Utilities/TemplatePlaceHolder",["DS/Controls/Button","DS/ENORouteTemplateMgmt/Views/Dialogs/InitiateTemplateDialog","DS/ENORouteTemplateMgmt/Utilities/TemplatePlaceHolderDragAndDrop","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i,l){"use strict";let o=function(e,o){let n=e.getElement(".no-templates-to-show-container");if(e.querySelector(".tile-view-container").setStyle("display","none"),e.querySelector(".data-grid-container").setStyle("display","none"),null!==n)return widget.routeMgmtMediator.publish("template-back-to-summary"),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:o}),n;var s=UWA.createElement("span",{class:"no-templates-to-show-filter-shortcut fonticon fonticon-list-filter",title:l.filter}),r=UWA.createElement("span",{class:"no-templates-to-show-create-shortcut fonticon fonticon-plus",title:l.newRouteTemplate}),d=UWA.createElement("div",{class:"no-templates-to-show-container",html:[UWA.createElement("div",{class:"no-templates-to-show",html:[UWA.createElement("div",{class:"pin",html:'<span class="fonticon fonticon-5x fonticon-template"></span>'}),UWA.createElement("span",{class:"no-templates-to-show-label",html:l.templatetitles.placeholder.label}),UWA.createElement("div",{class:"no-templates-to-show-sub-container",html:UWA.createElement("span",{html:l.replace(l.templatetitles.placeholder.sub,{filter:s.outerHTML,create:r.outerHTML})})})]})]});i.makeDroppable(d,a),d.getElement(".no-templates-to-show-filter-shortcut").addEventListener("click",(function(){document.querySelector(".widget-container").getElementsByClassName("wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-list-filter wux-ui-3ds-lg")[0].click()})),d.getElement(".no-templates-to-show-create-shortcut").addEventListener("click",(function(){t.InitiateTemplateDialog()})),e.appendChild(d),widget.routeMgmtMediator.publish("template-back-to-summary"),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:o})},a=function(e,t){require(["DS/ENORouteMgmt/Utilities/DragAndDropManager"],(function(t){t._onRoutesummaryDropManager(e)}))},n=function(e){let t=e.getElement(".no-templates-to-show-container");null!==t&&(e.querySelector(".tile-view-container").removeAttribute("style"),e.querySelector(".data-grid-container").removeAttribute("style"),t.destroy())};return{showeErrorPlaceholder:e=>function(e){let t=e.querySelector(".generic-error-container");if(e.querySelector(".tile-view-container")&&e.querySelector(".tile-view-container").setStyle("display","none"),e.querySelector(".data-grid-container")&&e.querySelector(".data-grid-container").setStyle("display","none"),e.querySelector("#dataGridDivToolbar")&&e.querySelector("#dataGridDivToolbar").setStyle("display","none"),e.querySelector("#TemplatedataGridDivToolbar")&&e.querySelector("#TemplatedataGridDivToolbar").setStyle("display","none"),e.querySelector("#TemplatedataGridDivToolbar")&&e.querySelector("#TemplatedataGridDivToolbar").setStyle("display","none"),null===t){var i=UWA.createElement("div",{class:"generic-error-container",html:[UWA.createElement("div",{class:"generic-error",html:[UWA.createElement("span",{class:"generic-error-label",html:l.loading})]})]});e.appendChild(i)}else t.removeAttribute("style")}(e),hideeErrorPlaceholder:e=>function(e){let t=e.getElement(".generic-error-container");null!==t&&t.setStyle("display","none")}(e),showEmptyRouteTemplatePlaceholder:(e,t)=>o(e,t),hideEmptyRouteTemplatePlaceholder:e=>n(e),registerListeners:()=>(widget.routeMgmtMediator.subscribe("show-no-template-placeholder",(function(e){o(document.querySelector(".widget-container"),e)})),void widget.routeMgmtMediator.subscribe("hide-no-template-placeholder",(function(e){n(document.querySelector(".widget-container"))})))}})),define("DS/ENORouteTemplateMgmt/Views/Dialogs/RemoveTemplate",["DS/WAFData/WAFData","UWA/Core","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/Controls/Button","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","DS/ENORouteTemplateMgmt/Actions/TemplateActions","DS/RouteWebAppUX/RouteTracker/RouteCloudProbeUtils","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","DS/ENORouteTemplateMgmt/Config/RemoveTemplateGridViewConfig","DS/WebappsUtils/WebappsUtils","DS/Controls/ButtonGroup","DS/Controls/Toggle","DS/ENORouteTemplateMgmt/Model/RemoveRouteTemplateConfirmationModel","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r,d,c,u,p,m,f,g){"use strict";let h,b,T={},v=function(e,t){if(r.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Delete"}),void 0===e.data&&(e=a.getSelectedRowsModel()),e.data.length<1)return void widget.notify.handler().addNotif({level:"warning",subtitle:g.ErrorTemplateRemoveSelection,sticky:!1});var n=[],s=[],h=[],v=[];let w=[];for(var S=0;S<e.data.length;S++)w.push(e.data[S].options.grid),-1==e.data[S].options.grid.Actions.indexOf("delete")||null!=e.data[S].options.grid.routeCompletionAction&&""!=e.data[S].options.grid.routeCompletionAction||null!=e.data[S].options.grid.linkedRouteTemplateId&&""!=e.data[S].options.grid.linkedRouteTemplateId||"Active"==e.data[S].options.grid.actualState?(w[S].hasDeleteAccess=!1,s.push(e.data[S].options.grid.id),v.push(e.data[S].options.grid.Title)):(w[S].hasDeleteAccess=!0,n.push(e.data[S].options.grid.id),h.push(e.data[S].options.grid.Title));let R=new l;R.inject(document.body);let C=new UWA.Element("div",{id:"content",class:""}),F=new UWA.Element("div",{id:"removeRouteWarning",class:""});F.inject(C),c[3].visibleFlag=!1;var E,M,A,N,D="",I=!0,O="",k=!1;if(F.appendChild(UWA.createElement("div",{class:"warningicon",html:[{tag:"img",src:u.getWebappsAssetUrl("ENORouteMgmt","icons/32/MOM-Alerts.png")}]})),1==e.data.length)1==n.length?(k=!0,O=(O=g.removeTemplateWarning).replace("{template}",h),F.appendChild(UWA.createElement("div",{class:"",text:O})),E=400,M="auto",D=(D=g.removeTemplateHeaderSingle).replace("{count}",h),F.appendChild(UWA.createElement("div",{class:"",html:g.removeTemplateWarningDetailSingle}))):(D=g.removeTemplateHeader2,O=(O=g.removeTemplateWarningDetail2Single).replace("{template}",v),F.appendChild(UWA.createElement("div",{class:"",html:O})));else{f.createModel(w);let e=f.getModel(),t=(A=e,N=UWA.createElement("div",{id:"removeRoute-dataGridViewContainer",class:"removeRoute-gridView-View"}),T.cellDragEnabledFlag=!1,T.showRowBorderFlag=!0,T.showOutlineFlag=!0,T.showAlternateBackgroundFlag=!0,T.layoutOptions={rowsHeader:!1,columnsHeader:!0,rowSpacing:5,cellWidth:2},T.showContextualMenuColumnFlag=!1,d.confirmationDialogueBuild(A,c,!1,N,T));E="auto",M="auto";let i=n.length+s.length;i<5?t.setStyle("height",50*i+"px"):t.setStyle("height","200px"),C.appendChild(t),s.length>0&&(c[3].visibleFlag=!0),0==n.length?(D=g.removeTemplateHeader2,F.appendChild(UWA.createElement("div",{class:"",html:g.removeTemplateWarningDetail2})),new UWA.Element("div",{html:"&nbsp;"}).inject(F),new UWA.Element("div",{html:"&nbsp;"}).inject(F),I=!0):(D=1==n.length?(D=g.removeTemplateHeaderSingle).replace("{count}",h):(D=g.removeTemplateHeader).replace("{count}",n.length),k=!0,F.appendChild(UWA.createElement("div",{class:"",html:g.removeTemplateWarning2})),F.appendChild(UWA.createElement("div",{class:"",html:g.removeTemplateWarningDetailSingle})))}if(1==k){new UWA.Element("div",{html:"&nbsp;"}).inject(F);var U=new p({type:"checkbox"});U.addChild(new m({type:"checkbox",label:g.removeTemplateConfirmationButton,checkFlag:!1})),U.inject(F),U.addEventListener("buttonclick",(function(e){var t=e.dsModel.checkFlag;b.buttons.Ok.disabled=1!=t}))}b=new i({modalFlag:!0,width:E,height:M,title:D,content:C,domId:"RouteImmersiveFrame",immersiveFrame:R,resizableFlag:!0,buttons:{Ok:new o({label:g.Delete,domId:"RemoveRouteTemplateButton",disabled:I,onClick:function(e){e.dsModel.dialog;y(n,t)}}),Cancel:new o({onClick:function(e){e.dsModel.dialog.close()}})}})},y=function(e,t){s.DeleteTemplate(e,t),b.close()};return h={removeConfirmation:(e,t)=>v(e,t),getDialog:()=>b},h})),define("DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToGridView",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/DataGridView/DataGridView","DS/ENORouteTemplateMgmt/Model/InitiateTemplateAppliesToGridViewModel","DS/ENORouteTemplateMgmt/Config/InitiateAppliesToGridViewConfig","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r){"use strict";let d,c,u,p,m={},f=null,g=function(){o.destroy()},h=function(e,t){var i=UWA.createElement("div",{id:"initiateTemplate-AppliesTo-grid-container",class:"initiateTemplate-AppliesTo-grid-container"});const l=e.data.length;m.showRowBorderFlag=!0,m.showOutlineFlag=!0,m.showAlternateBackgroundFlag=!1,m.layoutOptions={rowsHeader:!1,columnsHeader:!1,cellHeight:45,rowSelection:"none"},d=o.createModel(e.data),s.build(d,a,null,i,m).inject(t),document.querySelector("#initiateTemplate-AppliesTo-grid-container").setStyle("height",46*l)},b=function(e){const t=e&&e.criteriaCheckbox&&e.criteriaCheckbox.checkFlag,i=e&&e.criteriaSelection&&e.criteriaSelection.value;e&&e.attributeName&&e.attributeName.value,e&&e.attributeCases&&e.attributeCases.value,e&&e.collabSpace&&e.collabSpace.value;let l={};return l.data=f&&f.data,t&&(l.data=l.data.filter((e=>{if(t)return i?"Attribute"===i?!!e.dataelements.attributeName:void 0!==e.dataelements.collaboration:""!==e.dataelements.criteria}))),l};return{build:(e,t,i)=>function(e,t,i){const l=t&&t.policy.value,o=t&&t.type.value,a=t&&t.maturityState.value;let s=document.getElementById("initiateTemplate-AppliesTo-grid-container");return s&&s.remove(),l&&o&&a?(g(),new Promise((function(s,r){if(c!=l||u!=o||p!=a){var d=a.split("|")[0],m=a.split("|")[1];c=l,u=o,p=a,n.getSimilarAppliesToTemplates(l,o,m,d).then((l=>{if(l.data.length>0){let o;l.data=l.data.filter((e=>!(e.dataelements.physicalId===i||"true"!==e.dataelements.isLatestRevision&&"TRUE"!==e.dataelements.isLatestRevision||"Active"!==e.dataelements.currentState&&"Inactive"!==e.dataelements.currentState))),l.data.sort(((e,t)=>{const i=e.dataelements.appliesToTemplateTitle,l=t.dataelements.appliesToTemplateTitle;return isNaN(i)||isNaN(l)?isNaN(i)?isNaN(l)?i.localeCompare(l):1:-1:i-l})),f=l,o=b(t),h(o,e),s(o)}else f=l,s(l)}),(e=>{r(e)}))}else{let i=b(t);h(i,e),s(i)}}))):new Promise((function(e,t){t([])}))}(e,t,i),destroy:()=>{g()},getModel:()=>{o.getModel()},resetOldValues:()=>{c=null,u=null,p=null}}})),define("DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToGridSection",["DS/Controls/Toggle","DS/Controls/TooltipModel","DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToGridView","DS/Controls/Accordeon","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o){"use strict";let a,n={},s={},r=!1,d=null,c=function(e,t){return document.getElementById("add-appliesTo-grid-section-container")||(n=UWA.createElement("div",{class:"add-appliesTo-grid-section-container fonticon-chooser-scope-display",id:"add-appliesTo-grid-section-container"}).inject(e),n.fields={},n.fields.gridSection=UWA.createElement("div",{class:"add-appliesTo-grid-section-container-grid"}).inject(n),n.accordeanField=UWA.createElement("div",{}).inject(n),s=UWA.createElement("div",{id:"accordeon-header-section",class:"accordeon-header-section"}),s.numberOfSimilarTemplates=UWA.createElement("h6",{class:"accordeon-number-section",id:"accordeon-number-section"}).inject(s),a=new l({items:[{header:o.criteriaMatchingTemplates,customHeader:s,customHeaderPosition:"near",content:n.fields.gridSection}],exclusive:r,style:"simple"}),a.addEventListener("expand",(function(e){r=!0})),a.addEventListener("collapse",(function(e){r=!1})),a.inject(n.accordeanField),document.querySelector("#add-appliesTo-grid-section-container .wux-controls-expander-header").removeAttribute("tabIndex")),new Promise((function(e,l){i.build(n.fields.gridSection,t,d).then((t=>e(t)),(e=>l(e))).catch((e=>console.log(e)))}))};return{build:(e,t)=>c(e,t),destroy:()=>{n={}},updateGridViewSection:(e,i)=>function(e,i){const l=i&&i.policy.value,a=i&&i.type.value,s=i&&i.maturityState.value;if(void 0!==l&&void 0!==a&&void 0!==s)return new Promise((function(l,a){c(e,i).then((e=>{if(e.data.length>0){n.classList.remove("fonticon-chooser-scope-display"),n.accordeanField.getChildren()[0].querySelector("#accordeon-number-section").innerText=" ("+e.data.length+")";const i=o.criteriaMatchingTemplates+" ("+e.data.length+")";document.querySelector("#add-appliesTo-grid-section-container .wux-controls-expander-header").tooltipInfos=new t({shortHelp:i,allowUnsafeHTMLShortHelp:!0})}else n.classList&&!n.classList.contains("fonticon-chooser-scope-display")&&n.classList.add("fonticon-chooser-scope-display");l(e)}),(e=>{a(e)}))}));n&&n.classList&&!n.classList.contains("fonticon-chooser-scope-display")&&n.classList.add("fonticon-chooser-scope-display")}(e,i),setTemplatePhysicalId:e=>{!function(e){d=e}(e)},resetOldValues:()=>{i.resetOldValues()}}})),define("DS/ENORouteTemplateMgmt/Views/RouteTemplateHistory",["DS/EditPropWidget/facets/Common/FacetsBase","DS/ENORouteMgmt/Components/Wrappers/WrapperLargeTileView","DS/ENORouteTemplateMgmt/Model/RouteTemplateInfoHistoryModel","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController"],(function(e,t,i,l){"use strict";var o=e.extend({init:function(){widget.propWidgetHistoryOpen=!0,this._parent.apply(this,arguments);this.elements.container=UWA.createElement("div",{id:"routeTemplateHistory",class:"routeTemplateHistory"})},updateFacet:function(){let e=this.getModel();if(1==e.isMergedModel())return;if(!e)return!1;this.elements.container.setContent("");let t=e.get("objectId");l.fetchRouteTemplateHistory(t).then((function(e){i.destroy();let t=a(e);n(t).inject(document.querySelector(".routeTemplateHistory"))}))},destroyComponent:function(){},onResize:function(){},onRefresh:function(){this.updateFacet()}}),a=function(e){return i.getModel(e)};let n=function(e){var i=UWA.createElement("div",{id:"routeTemplateInfoHistoryContainer",class:""});return t.build(e,i)};return o})),define("DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToView",["DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/DatePicker","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/WUXAutoComplete/AutoComplete","DS/Controls/LineEditor","DS/ENORouteTemplateMgmt/Views/Dialogs/InitiateTemplateDialog","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToGridSection","DS/ENORouteMgmt/Utilities/RouteViewUtils","DS/Controls/TooltipModel","DS/ENORouteTemplateMgmt/Config/AppliesToBasicField","DS/ENORouteMgmt/Utilities/EnoWidgetDataUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r,d,c,u,p,m,f){"use strict";let g,h,b,T,v,y,w,S=function(){let i,n,c,p;const m=document.getElementById("child-appliesTo-1");var h;g.formBody=new UWA.Element("div",{id:"newAppliesToPropertiesformBody",class:"new-appliesTo-prop-body"}),g.formFields=new UWA.Element("div",{id:"newAppliesToPropertiesContainer",class:""}),g.typeField=new UWA.Element("div",{id:"typeFieldDiv",class:"fonticon-chooser-scope-display"}),g.subTypeSelectionCheckBox=new UWA.Element("div",{id:"subTypeSelectionCheckBox",class:"fonticon-chooser-scope-display"}),g.subTypeField=new UWA.Element("div",{id:"subTypeField",class:"fonticon-chooser-scope-display"}),g.policyField=new UWA.Element("div",{id:"policyFieldDiv",class:"fonticon-chooser-scope-display"}),g.maturityTransitionField=new UWA.Element("div",{id:"maturityTransitionFieldDiv",class:"fonticon-chooser-scope-display"}),g.criteriaSelectionCheckBox=new UWA.Element("div",{id:"criteriaSelectionCheckBox",class:"fonticon-chooser-scope-display"}),g.criteriaSelectionField=new UWA.Element("div",{id:"criteriaSelectionField",class:"fonticon-chooser-scope-display"}),g.attributeNameField=new UWA.Element("div",{id:"attributeNameField",class:"fonticon-chooser-scope-display"}),g.attributeValueField=new UWA.Element("div",{id:"attributeValueField",class:""}),g.fields={},g.formFields.inject(g.formBody),g.appliesToSelection=new UWA.Element("div",{id:"appliesToSelection"}).inject(g.formFields),g.fields.enableApplicability=new e({type:"checkbox",label:f.enableApplicability}).inject(g.appliesToSelection),g.appliesToSelection.tooltipInfos=A(f.enableApplicability),g.fields.enableApplicability.addEventListener("change",(function(e){if(!k()){widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons");var t=s.getDialog();1==e.dsModel.checkFlag?(d.updateGridViewSection(m,g.fields),g.policyField.className="",null!=g.fields.policy.selectedItems&&(g.typeField.className="",g.maturityTransitionField.className="",g.fields.type.selectedItems&&(g.criteriaSelectionCheckBox.className="",0!=g.fields.subTypeCheckbox.checkFlag&&(g.subTypeField.className="")),0!=g.fields.criteriaCheckbox.checkFlag&&(g.criteriaSelectionField.className="","Attribute"==g.fields.criteriaSelection.value&&(g.attributeNameField.className="",g.attributeValueField.className=""))),t.buttons.Save.visibleFlag=!0,t.buttons.Ok.visibleFlag=!1):(d.updateGridViewSection(),g.typeField.className="fonticon-chooser-scope-display",g.subTypeSelectionCheckBox.className="fonticon-chooser-scope-display",g.subTypeField.className="fonticon-chooser-scope-display",g.policyField.className="fonticon-chooser-scope-display",g.maturityTransitionField.className="fonticon-chooser-scope-display",g.criteriaSelectionCheckBox.className="fonticon-chooser-scope-display",g.criteriaSelectionField.className="fonticon-chooser-scope-display",g.attributeNameField.className="fonticon-chooser-scope-display",g.attributeValueField.className="fonticon-chooser-scope-display",t.buttons.Save.visibleFlag=!1,t.buttons.Ok.visibleFlag=!0)}})),i=E("initiate-Template-AppliesTo-Field",g.policyField),n=E("initiate-Template-AppliesTo-Field-Label",i),c=new UWA.Element("div").inject(i),c.style.width="2%",p=E("initiate-Template-AppliesTo-Field-Value",i),(h=new UWA.Element("h5",{id:"policyField",class:"required",text:f.appliesToPolicy}).inject(n)).tooltipInfos=A(f.appliesToPolicy),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(h),g.fields.policy=new a({multiSearchMode:!1,elementsTree:[],allowFreeInputFlag:!1}).inject(p),M("appiliesToPolicyInfo",f.appliesToPolicyHelp,n),g.policyField.inject(g.formFields),g.fields.policy.addEventListener("change",(function(e){d.updateGridViewSection(m,g.fields),widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons"),g.fields.policy.selectedItems?(null!=g.fields.type.selectedItems&&(g.fields.type.selectedItems=void 0),C(g.fields.policy.selectedItems.options.value),g.maturityTransitionField.className="",g.typeField.className="",g.fields.type.selectedItems&&(g.criteriaSelectionCheckBox.className="")):(g.fields.maturityState.elementsTree=new o,g.fields.type.selectedItems=void 0,g.fields.subType.selectedItems=void 0,g.fields.criteriaCheckbox.checkFlag=!1,g.maturityTransitionField.className="fonticon-chooser-scope-display",g.typeField.className="fonticon-chooser-scope-display",g.subTypeSelectionCheckBox.className="fonticon-chooser-scope-display",g.subTypeField.className="fonticon-chooser-scope-display",g.criteriaSelectionCheckBox.className="fonticon-chooser-scope-display",g.criteriaSelectionField.className="fonticon-chooser-scope-display",g.attributeNameField.className="fonticon-chooser-scope-display",g.attributeValueField.className="fonticon-chooser-scope-display")})),i=E("initiate-Template-AppliesTo-Field",g.typeField),n=E("initiate-Template-AppliesTo-Field-Label",i),c=new UWA.Element("div").inject(i),c.style.width="2%",p=E("initiate-Template-AppliesTo-Field-Value",i),p.style.marginTop="10px !important",(h=new UWA.Element("h5",{id:"typeField",text:f.appliesToType}).inject(n)).tooltipInfos=A(f.appliesToType),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(h),g.fields.type=new a({multiSearchMode:!1,allowFreeInputFlag:!1,elementsTree:function(){return new Promise((function(e,t){r.fetchStateTransitions(g.fields.policy.selectedItems.options.value.replaceAll(" ","%20")).then((t=>{t&&t.governedType&&R(t.governedType,e)}))}))}}).inject(p),M("appiliesToTypeInfo",f.appliesToTypeHelp,n),g.typeField.inject(g.formFields),g.fields.type.addEventListener("change",(function(e){d.updateGridViewSection(m,g.fields),widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons");let t=g.fields.type.selectedItems;t?(null!=g.fields.subType.selectedItems&&(g.fields.subType.selectedItems=void 0),g.criteriaSelectionCheckBox.className="",g.subTypeSelectionCheckBox.className="",F(t.options.value)):(g.subTypeSelectionCheckBox.className="fonticon-chooser-scope-display",g.subTypeField.className="fonticon-chooser-scope-display",g.fields.subTypeCheckbox.checkFlag=!1,g.criteriaSelectionCheckBox.className="fonticon-chooser-scope-display",g.fields.criteriaCheckbox.checkFlag=!1,g.fields.criteriaSelection.selectedIndex=-1,g.fields.attributeCases.selectedIndex=0,g.fields.attributeName.elementsTree=new o,g.fields.subType.selectedItems=void 0)})),g.typeField.inject(g.formFields),g.fields.subTypeCheckbox=new e({type:"checkbox",label:f.subTypeSelection}).inject(g.subTypeSelectionCheckBox),g.fields.subTypeCheckbox.addEventListener("change",(function(e){widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons"),1==e.dsModel.checkFlag?g.subTypeField.className="":g.subTypeField.className="fonticon-chooser-scope-display"})),g.subTypeSelectionCheckBox.tooltipInfos=A(f.subTypeSelection),g.subTypeSelectionCheckBox.inject(g.formFields),i=E("initiate-Template-AppliesTo-Field",g.subTypeField),n=E("initiate-Template-AppliesTo-Field-Label",i),c=new UWA.Element("div").inject(i),c.style.width="2%",p=E("initiate-Template-AppliesTo-Field-Value",i),(h=new UWA.Element("h5",{class:"required",text:f.applyToSelectedType}).inject(n)).tooltipInfos=A(f.applyToSelectedType),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(h),g.fields.subType=new a({multiSearchMode:!0,allowFreeInputFlag:!1,elementsTree:function(){return new Promise((function(e,t){var i=new o;r.getSubTypes(g.fields.type.selectedItems.options.value).then((t=>{if(t&&t.data[0]){var o=new l({label:g.fields.type.selectedItems.options.label,value:g.fields.type.selectedItems.options.value});j(o,t.data[0].children),i.addChild(o),i.expandAll(),e(i)}}))}))}}).inject(p),g.subTypeField.inject(g.formFields),M("appiliesToSubTypeInfo",f.applyToSelectedTypeHelp,n),g.fields.subType.addEventListener("change",(function(e){widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons")})),i=E("initiate-Template-AppliesTo-Field",g.maturityTransitionField),n=E("initiate-Template-AppliesTo-Field-Label",i),c=new UWA.Element("div").inject(i),c.style.width="2%",p=E("initiate-Template-AppliesTo-Field-Value",i),(h=new UWA.Element("h5",{id:"maturityTransitionField",class:"required",text:f.maturityTransition}).inject(n)).tooltipInfos=A(f.maturityTransition),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(h),g.fields.maturityState=new a({multiSearchMode:!1,elementsTree:[],allowFreeInputFlag:!1}).inject(p),M("appiliesToMaturityTrasnitionInfo",f.maturityTransitionHelp,n),g.maturityTransitionField.inject(g.formFields),g.fields.maturityState.addEventListener("change",(function(e){d.updateGridViewSection(m,g.fields),widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons")})),g.fields.criteriaCheckbox=new e({type:"checkbox",label:f.criteriaCheckbox}).inject(g.criteriaSelectionCheckBox),g.criteriaSelectionCheckBox.tooltipInfos=A(f.criteriaCheckbox),g.criteriaSelectionCheckBox.inject(g.formFields),g.fields.criteriaCheckbox.addEventListener("change",(function(e){widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons"),d.updateGridViewSection(m,g.fields),1==e.dsModel.checkFlag?(g.criteriaSelectionField.className="","Attribute"==g.fields.criteriaSelection.value&&(g.attributeNameField.className="",null!=g.fields.attributeName.selectedItems&&(g.attributeValueField.className=""))):(g.criteriaSelectionField.className="fonticon-chooser-scope-display",g.attributeNameField.className="fonticon-chooser-scope-display",g.attributeValueField.className="fonticon-chooser-scope-display")})),i=E("initiate-Template-AppliesTo-Field",g.criteriaSelectionField),n=E("initiate-Template-AppliesTo-Field-Label",i),c=new UWA.Element("div").inject(i),c.style.width="2%",p=E("initiate-Template-AppliesTo-Field-Value",i),(h=new UWA.Element("h5",{class:"required",text:f.criteria}).inject(n)).tooltipInfos=A(f.criteria),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(h),g.fields.criteriaSelection=new t({elementsList:[{label:f.appliesToAttribute,value:"Attribute"},{label:f.credentials,value:"Credentials"}],enableSearchFlag:!1,placeholder:f.criteriaSelection,reachablePlaceholderFlag:!0}).inject(p),M("appiliesToCriteriaSelectionInfo",f.criteriaSelectionHelp,n),g.criteriaSelectionField.inject(g.formFields),g.fields.criteriaSelection.addEventListener("change",(function(e){d.updateGridViewSection(m,g.fields),widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons"),1==e.dsModel.selectedIndex?(g.attributeNameField.className="fonticon-chooser-scope-display",g.attributeValueField.className="fonticon-chooser-scope-display"):0==e.dsModel.selectedIndex?(g.attributeNameField.className="",null!=g.fields.attributeName.selectedItems&&(g.attributeValueField.className="")):(g.fields.attributeName.value=void 0,g.attributeNameField.className="fonticon-chooser-scope-display",g.attributeValueField.className="fonticon-chooser-scope-display")})),i=E("initiate-Template-AppliesTo-Field",g.attributeNameField),n=E("initiate-Template-AppliesTo-Field-Label",i),c=new UWA.Element("div").inject(i),c.style.width="2%",p=E("initiate-Template-AppliesTo-Field-Value",i),(h=new UWA.Element("h5",{class:"required",text:f.appliesToAttributeName}).inject(n)).tooltipInfos=A(f.appliesToAttributeName),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(h);let b=E("initiateAppliesToAttribute",p);g.fields.attributeName=new a({multiSearchMode:!1,elementsTree:[],allowFreeInputFlag:!1}).inject(b),M("appiliesToAttributeNameInfo",f.appliesToAttributeNameHelp,n),g.fields.attributeName.addEventListener("change",(function(e){N(),widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons")})),c=new UWA.Element("div").inject(p),c.style.width="2%";let T=E("initiateAppliesToAttributeComboboxField",p);return g.fields.attributeCases=new t({elementsList:[f.is],enableSearchFlag:!1}).inject(T),g.attributeNameField.inject(g.formFields),g.fields.attributeCases.tooltipInfos=new u({shortHelp:g.fields.attributeCases.currentLabel}),g},R=function(e,t){for(var i=new o,a=0;a<e.length;a++)if(v.includes(e[a].typeID)&&!y[g.fields.policy.selectedItems.options.value].includes(e[a].typeID)){var n=new l({label:w[e[a].typeID],value:e[a].typeID});i.addChild(n)}t(i)},C=function(e){r.fetchStateTransitions(e.replaceAll(" ","%20")).then((t=>{var i=t.state,a={},n=0,s={},r=[];if(i)for(var d=0;d<i.length;d++)"true"==i[d].isDefault&&(a[i[d].id]=i[d].stateUserName,s[i[d].id]=n,r[n++]=i[d].id);var c=t.transition;if(c){g.fields.maturityState.elementsTree=new o;var u=b[e],p=[];e:for(d=0;d<c.length;d++)if("false"==c[d].isForbidden&&s[c[d].sourceState]<s[c[d].targetState]&&!p.includes(c[d].sourceState+"|"+c[d].targetState)){for(var m=0;m<u.length;m++)if(c[d].sourceState==u[m].sourceState&&c[d].targetState==u[m].targetState)continue e;p.push(c[d].sourceState+"|"+c[d].targetState)}for(d=0;d<r.length;d++)for(m=d+1;m<r.length;m++)if(p.includes(r[d]+"|"+r[m])){var f=new l({label:a[r[d]]+" to "+a[r[m]],value:r[d]+"|"+r[m]});g.fields.maturityState.elementsTree.addChild(f)}g.fields.maturityState._applyElementsTree()}}))},F=function(e){var t={data:[]},i={};i.name=e,t.data.push(i),r.fetchAttributeList(t).then((t=>{var i=t.data[0].attributes;if(i){null!=g.fields.attributeName.selectedItems&&(g.fields.attributeName.selectedItems=void 0),i=i.concat(p),g.fields.attributeName.elementsTree=new o;for(var a=T[e],n=0;n<i.length;n++)if(!a.includes(i[n].name)){var s;s=i[n].label.contains("emxFramework.Attribute")?i[n].name:i[n].label;var r=new l({label:s});r.options.grid=i[n],g.fields.attributeName.elementsTree.addChild(r)}g.fields.attributeName._applyElementsTree()}}))},E=function(e,t){return c.createNewElement(e,t)},M=function(e,t,i){return c.createTooltipElement(e,t,i)},A=function(e){return c.getElementToolTip(e)},N=function(e,t){if(g.attributeValueField.innerHTML="",void 0!==g.fields.attributeName.value){g.attributeValueField.innerHTML="",g.attributeValueField.className="";let e=E("initiate-Template-AppliesTo-Field",g.attributeValueField),t=E("initiate-Template-AppliesTo-Field-Label",e);new UWA.Element("div").inject(e).style.width="2%";let i=E("initiate-Template-AppliesTo-Field-Value",e),l=new UWA.Element("h5",{class:"required",text:f.appliesToAttributeValue}).inject(t);l.tooltipInfos=A(f.appliesToAttributeValue),document.getElementsByClassName("initiateAppliesToAttributeComboboxField")[0].innerHTML="";let o=document.getElementsByClassName("initiateAppliesToAttributeComboboxField")[0];UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(l);const a=[{label:f.is,value:"is"},{label:f.contains,value:"contains"},{label:f.startswith,value:"startswith"},{label:f.endswith,value:"endswith"},{label:f.isnot,value:"isnot"},{label:f.isempty,value:"isempty"},{label:f.isnotempty,value:"isnotempty"}],n=[{label:f.is,value:"is"},{label:f.greaterthan,value:"greaterthan"},{label:f.lessthan,value:"lessthan"},{label:f.isnot,value:"isnot"},{label:f.isempty,value:"isempty"},{label:f.isnotempty,value:"isnotempty"}],s=[{label:f.true,value:"true"},{label:f.false,value:"false"}],r=[{label:f.iscreatedafter,value:"iscreatedafter"},{label:f.iscreatedbefore,value:"iscreatedbefore"},{label:f.between,value:"between"}],d="[^./#,\\[\\]\\$\\^@\\*\\?%:'\"\\\\<>;|]+",c="[0-9]*",p="[0-9]*.[0-9]*",m="comboBox",h="textField",b="datePicker",T=g.fields.attributeName.selectedItems.options;f.is;if("string"==T.grid.type)if(T.grid.range){let e=x(T.grid.rangeLabel,T.grid.range);g.fields.attributeCases=V(m,o),g.fields.attributeValue=V(m,i,e,!0)}else g.fields.attributeCases=V(m,o,a,!1),g.fields.attributeValue=V(h,i,"",!1,d);else if("boolean"==T.grid.type)if(T.grid.range){let e=x(T.grid.rangeLabel,T.grid.range);g.fields.attributeCases=V(m,o),g.fields.attributeValue=V(m,i,e,!1)}else g.fields.attributeCases=V(m,o),g.fields.attributeValue=V(m,i,s,!1);else if("integer"==T.grid.type)if(T.grid.range){let e=x(T.grid.rangeLabel,T.grid.range);g.fields.attributeCases=V(m,o),g.fields.attributeValue=V(m,i,e,!0)}else g.fields.attributeCases=V(m,o,n,!1),g.fields.attributeValue=V(h,i,"",!1,c);else if("real"==T.grid.type)if(T.grid.range){let e=x(T.grid.rangeLabel,T.grid.range);g.fields.attributeCases=V(m,o),g.fields.attributeValue=V(m,i,e,!0)}else g.fields.attributeCases=V(m,o,n,!1),g.fields.attributeValue=V(h,i,"",!1,p);else"date"==T.grid.type&&(g.fields.attributeCases=V(m,o,r,!1),g.fields.attributeValue=V(b,i,"",!1));g.fields.attributeCases.tooltipInfos=new u({shortHelp:g.fields.attributeCases.currentLabel}),M("appiliesToAttributeValueInfo",f.appliesToAttributeValueHelp,t),g.attributeValueField.inject(g.formFields),g.fields.attributeValue.addEventListener("change",(function(e){g.fields.attributeValue.value=e.dsModel.value,widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons")})),g.fields.attributeCases.addEventListener("change",(function(e){g.fields.attributeCases.tooltipInfos=new u({shortHelp:e.dsModel.currentLabel}),widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons"),g.fields.attributeName.selectedItems&&"date"==g.fields.attributeName.selectedItems._options.grid.type?(g.attributeValueField.querySelector(".initiate-Template-AppliesTo-Field-Value").innerHTML="",U(g.attributeValueField.querySelector(".initiate-Template-AppliesTo-Field-Value"))):"isempty"===g.fields.attributeCases.value||"isnotempty"===g.fields.attributeCases.value?D():I()}))}},D=function(){g.attributeValueField.className="fonticon-chooser-scope-display"},I=function(){g.attributeValueField.className=""},O=function(){widget.routeMgmtMediator.subscribe("initiate-appliesTo-check-templateCollabSpace",(function(e){k(e)}))},k=function(e){var t=s.getPropertiesModel(),i=t.fields.collaborativeSpace.selectedIndex;return-1==i&&1==g.fields.enableApplicability.checkFlag?(g.fields.enableApplicability.checkFlag=!1,widget.notify.handler().addNotif({level:"warning",subtitle:f.selectOrganizationMessage,sticky:!1}),!0):"Public"!=t.fields.collaborativeSpace.elementsList[i].visibility&&1==g.fields.enableApplicability.checkFlag&&(g.fields.enableApplicability.checkFlag=!1,e||widget.notify.handler().addNotif({level:"warning",subtitle:f.appliesToCreatePageCollabSpaceMsg,sticky:!1}),!0)},U=function(e){if(null==g.fields.attributeValue&&(g.fields.attributeValue=new i({value:new Date,timePickerFlag:!0,timePickerPrecision:"sec"})),"between"==g.fields.attributeCases.value){var t=new UWA.Element("div",{id:"dateField",class:""});t.style.width="100%";var l=new UWA.Element("div",{id:"dateFrom",class:""}),o=new UWA.Element("div",{id:"dateTo",class:""});g.fields.attributeValue.inject(l),new UWA.Element("div",{html:"&nbsp;"}).inject(l),new UWA.Element("div",{id:"dateValueSeparator",text:f.and}).inject(l),l.inject(t),null==g.fields.attributeValue1&&(g.fields.attributeValue1=new i({value:new Date,timePickerFlag:!0,timePickerPrecision:"sec"})),g.fields.attributeValue1.inject(o),o.inject(t),t.inject(e)}else g.fields.attributeValue.inject(e)};const V=function(e,l,o,a=!1,s=""){switch(e){case"textField":return new n({pattern:s,autoCommitFlag:!0}).inject(l);case"comboBox":return new t({elementsList:o||[{label:f.is,value:"is"}],enableSearchFlag:!1,multiSelFlag:a}).inject(l);case"datePicker":return new i({value:new Date,timePickerFlag:!0,timePickerPrecision:"sec"}).inject(l)}},x=function(e,t){let i=[];let l=0;return e.forEach((e=>{i.push({label:e,value:t[l]}),l++})),i.sort(((e,t)=>isNaN(e.label)||isNaN(t.label)?isNaN(e.label)?isNaN(t.label)&&e.label.toLowerCase()<t.label.toLowerCase()?-1:1:-1:e.label-t.label)),i};let j=function(e,t){if(0!=t.length)for(var i=0;i<t.length;i++){var o=t[i].dataelements.name_nls;o.contains("emxFramework.Type")&&(o=t[i].dataelements.name);var a=new l({label:o,value:t[i].dataelements.name});e.addChild(a),t[i].children.length>0&&j(a,t[i].children)}};return{build:(e,t)=>function(e){return h={},b={},T={},y={},w={},v=m.getRouteContentSearchTypes(),c.makeResponsiveCss("initiateRouteTemplateAppliesTo",".template-initiate-appliesTo-container"),v=v?v.split(","):"",r.fetchSupportedPolicies().then((e=>{if(g.fields.policy.elementsTree=new o,e&&e.lifecycleDescription){for(var t=0;t<e.lifecycleDescription.length;t++){var i=new l({label:e.lifecycleDescription[t].title,value:e.lifecycleDescription[t].id});b[e.lifecycleDescription[t].id]=e.lifecycleDescription[t].forbiddenTransitions,y[e.lifecycleDescription[t].id]=e.lifecycleDescription[t].forbiddenTypes;for(var a=e.lifecycleDescription[t].governedType,n=[],s=0;s<a.length;s++)v.includes(a[s].typeID)&&(w[a[s].typeID]=a[s].typeNLS,n.push(a[s].typeID+"~"+a[s].typeNLS),T[a[s].typeID]=a[s].forbiddenAttributes);h[e.lifecycleDescription[t].id]=n,g.fields.policy.elementsTree.addChild(i)}g.fields.policy._applyElementsTree()}})),g={},O(),S(e)}(e),destroy:()=>{g={}},getProperties:()=>g}})),define("DS/ENORouteTemplateMgmt/Views/Form/TemplateAppliesToInViewMode",["DS/ENORouteMgmt/Utilities/RouteViewUtils","DS/ENORouteMgmt/Utilities/Utils","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToGridSection","DS/PlatformAPI/PlatformAPI","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a){"use strict";let n=function(t,i){return e.createNewElement(t,i)},s=function(t){return e.getElementToolTip(t)};return{build:(o,r,d)=>function(o,r,d){e.makeResponsiveCss("routeTemplateAppliesTo",".template-appliesTo-container");let c,u,p,m,f={};var g=o.getChildren()[0].options.grid,h=g.fromState_nls,b=g.toState_nls;h.contains("emxFramework.State")&&(h=g.fromState),b.contains("emxFramework.State")&&(b=g.toState);var T=h+" to "+b;f.formFields=new UWA.Element("div",{id:"AppliesToPropertiesformBodyInViewMode",class:"appliesTo-prop-body-in-view-mode"}),f.formFields.inject(r),f.fields={},c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value ",c),m.style.marginTop="10px !important";var v,y=new UWA.Element("h5",{id:"policyField",text:a.appliesToPolicy}).inject(u);if(y.tooltipInfos=s(a.appliesToPolicy),f.fields.policyValue=new UWA.Element("span",{text:g.objPolicy_nls,class:"valueReadOnly",id:"policyFieldValue"}),f.fields.policyValue.tooltipInfos=s(g.objPolicy_nls),f.fields.policyValue.style.width="100%",f.fields.policyValue.inject(m),c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value",c),m.style.marginTop="10px !important",(y=new UWA.Element("h5",{id:"typeField",text:a.appliesToType}).inject(u)).tooltipInfos=s(a.appliesToType),f.fields.typeValue=new UWA.Element("span",{text:g.objType_nls,class:"valueReadOnly",id:"typeFieldValue"}),f.fields.typeValue.tooltipInfos=s(g.objType_nls),f.fields.typeValue.style.width="100%",f.fields.typeValue.inject(m),""!=g.subType&&null!=g.subType){var w=g.subType.split(","),S="";for(let e=0;e<w.length;e++)S+=w[e].split("~")[1],e!=w.length-1&&(S+=",");c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value",c),m.style.marginTop="10px !important",(y=new UWA.Element("h5",{id:"subTypeField",text:a.applyToSelectedType}).inject(u)).tooltipInfos=s(a.applyToSelectedType),f.fields.subTypeValue=new UWA.Element("span",{text:S,class:"valueReadOnly",id:"subTypeFieldValue"}),f.fields.subTypeValue.tooltipInfos=s(S),f.fields.subTypeValue.style.width="100%",f.fields.subTypeValue.inject(m)}if(c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value",c),m.style.marginTop="10px !important",(y=new UWA.Element("h5",{id:"maturityTransitionField",text:a.maturityTransition}).inject(u)).tooltipInfos=s(a.maturityTransition),f.fields.maturityTransitionValue=new UWA.Element("span",{text:T,class:"valueReadOnly",id:"maturityTransitioFieldValue"}),f.fields.maturityTransitionValue.tooltipInfos=s(T),f.fields.maturityTransitionValue.style.width="100%",f.fields.maturityTransitionValue.inject(m),(g.attributeName||null!=g.collaboration)&&(v=g.attributeName?a.appliesToAttribute:a.credentials,c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value",c),m.style.marginTop="10px !important",(y=new UWA.Element("h5",{id:"selectedCriteriaField",text:a.selectedCriteria}).inject(u)).tooltipInfos=s(a.selectedCriteria),f.fields.selectedCriteriaValue=new UWA.Element("span",{text:v,class:"valueReadOnly",id:"selectedCriteriaFieldValue"}),f.fields.selectedCriteriaValue.tooltipInfos=s(v),f.fields.selectedCriteriaValue.style.width="100%",f.fields.selectedCriteriaValue.inject(m)),g.attributeName){c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value",c),m.style.marginTop="10px !important",(y=new UWA.Element("h5",{id:"attributeNameField",text:a.appliesToAttributeName}).inject(u)).tooltipInfos=s(a.appliesToAttributeName);const e=g.attributeCondition;var R=g.attributeName_nls+"&nbsp;&nbsp; "+a[e];f.fields.attributeNameValue=new UWA.Element("span",{html:R,id:"attributeNameFieldValue"}),f.fields.attributeNameValue.tooltipInfos=s(R);let i=n("initiateAppliesToAttributeName valueReadOnly",m);i.tooltipInfos=s(g.attributeName_nls),i.tooltipInfos=s(g.attributeName_nls),f.fields.attributeNameValue.inject(i),c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value",c),m.style.marginTop="10px !important",(y=new UWA.Element("h5",{id:"attributeValueField",text:a.appliesToAttributeValue}).inject(u)).tooltipInfos=s(a.appliesToAttributeValue);var C=g.attributeValue;(null!=g.criteria.match("attribute\\[(.*?)\\]\\s(~~|>|<)\\s+'(.*?)'")||null!=g.criteria.match("attribute\\[(.*?)\\]\\s(>)\\s+'(.*?)'\\s+(&&)+\\s+attribute\\[(.*?)\\]\\s(<)\\s+'(.*?)'")||null!=g.criteria.match("\\((.*?)\\s(~~|>|<)\\s+'(.*?)'")||g.criteria.match("\\((.*?)\\s(>)\\s+'(.*?)'\\s+(&&)+\\s+(.*?)\\s(<)\\s+'(.*?)'"))&&(C="between"==e?t.getLocaleTime(new Date(C.split("%")[0]),!0)+" and "+t.getLocaleTime(new Date(C.split("%")[1]),!0):t.getLocaleTime(new Date(C),!0)),f.fields.attributeValue=new UWA.Element("span",{text:C,class:"valueReadOnly",id:"attributeValueFieldValue"}),f.fields.attributeValue.tooltipInfos=s(C),f.fields.attributeValue.style.width="100%",f.fields.attributeValue.inject(m),"isempty"!==e&&"isnotempty"!==e||c.classList.add("fonticon-chooser-scope-display")}if(""!=g.collaboration&&g.project_title&&g.organization_title&&(c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value",c),m.style.marginTop="10px !important",(y=new UWA.Element("h5",{id:"collaborativeSpaceField",text:a.appliesToCollabSpace}).inject(u)).tooltipInfos=s(a.appliesToCollabSpace),f.fields.collaborativeSpaceValue=new UWA.Element("span",{text:g.project_title,class:"valueReadOnly",id:"collabSpaceFieldValue"}),f.fields.collaborativeSpaceValue.tooltipInfos=s(g.project_title),f.fields.collaborativeSpaceValue.style.width="100%",f.fields.collaborativeSpaceValue.inject(m),c=n("initiate-Template-AppliesTo-Field",f.formFields),u=n("initiate-Template-AppliesTo-Field-Label",c),p=new UWA.Element("div").inject(c),p.style.width="2%",m=n("initiate-Template-AppliesTo-Field-Value",c),m.style.marginTop="10px !important",(y=new UWA.Element("h5",{id:"organizationField",text:a.Organization}).inject(u)).tooltipInfos=s(a.Organization),f.fields.organizationValue=new UWA.Element("span",{text:g.organization_title,class:"valueReadOnly",id:"organizationFieldValue"}),f.fields.organizationValue.tooltipInfos=s(g.organization_title),f.fields.organizationValue.style.width="100%",f.fields.organizationValue.inject(m)),g){var F,E=i.getSecurityContextValue(),M=i.getLoginUser();if(E&&E.split(".")&&(F=E.split(".")[0]),F&&(F.includes("VPLMAdmin")||M===d)){let e={policy:{},type:{},maturityState:{},criteriaCheckbox:{},criteriaSelection:{}};e.policy.value=g.objPolicy,e.type.value=g.objType,e.maturityState.value=g.fromState+"|"+g.toState,e.criteriaCheckbox.checkFlag=""!==g.criteria,e.criteriaSelection.value=e.criteriaCheckbox.checkFlag&&void 0===g.collaboration?"Attribute":"Credentials",l.updateGridViewSection(f.formFields,e)}}}(o,r,d),destroy:()=>{_appliesToProperties=void 0},getAppliesToForm:()=>{}}})),define("DS/ENORouteTemplateMgmt/Components/Wrappers/CreateAppliesToWrapper",["DS/TreeModel/TreeDocument","DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToView","DS/Controls/Button","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l){"use strict";let o=[],a=0,n=function(){let e=document.querySelector(".add-appliesTo-parent-container");a+=1;let i=UWA.createElement("div",{id:"child-appliesTo-"+a,class:"add-appliesTo-child-container"}).inject(e),l=t.build(i);l.formBody.inject(i);let n={};n.id=i.id,n.info=l.fields,o.push(n)};return{build:e=>function(e){UWA.createElement("div",{class:"add-appliesTo-parent-container"}).inject(e),n()}(e),destroy:()=>{a=0,o=[]},getModel:()=>o}})),define("DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplateAppliesToLoader",["DS/ENORouteTemplateMgmt/Components/Wrappers/CreateAppliesToWrapper","DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToGridSection","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],(function(e,t,i){"use strict";let l={};return{init:function(i){this.showView()||(l.container=new UWA.Element("div",{html:"",id:"InitiateTemplateAppliesToFormView",class:"template-initiate-appliesTo-container"}),l.container.inject(document.querySelector("#iRouteTabsContainer")),e.build(l.container),t.setTemplatePhysicalId(null),t.resetOldValues())},hideView:function(){document.querySelector("#InitiateTemplateAppliesToFormView")&&document.querySelector("#InitiateTemplateAppliesToFormView").getChildren().length>0&&(document.getElementById("InitiateTemplateAppliesToFormView").style.display="none")},showView:function(){return!!(document.querySelector("#InitiateTemplateAppliesToFormView")&&document.querySelector("#InitiateTemplateAppliesToFormView").getChildren().length>0)&&(document.getElementById("InitiateTemplateAppliesToFormView").style.display="block",!0)},destroy:function(){e.destroy()},getModel:function(){return e.getModel()}}})),define("DS/ENORouteTemplateMgmt/Model/RouteTemplateAppliesToModel",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENORouteTemplateMgmt/Config/AppliesToBasicField","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i,l){"use strict";let o=new e;return{createModel:e=>function(e){return o.prepareUpdate(),e.forEach((function(e){var a=new t({width:300,grid:{id:e.id,name:e.name,type:e.type,subType:e.subType,objPolicy:e.objPolicy,objPolicy_nls:e.objPolicy_nls,objType:e.objType,objType_nls:e.objType_nls,attributeName:e.attributeName,attributeName_nls:e.attributeName_nls,attributeValue:e.attributeValue,fromState:e.fromState,fromState_nls:e.fromState_nls,toState:e.toState,toState_nls:e.toState_nls,attributeCondition:e.attributeCondition,criteria:e.criteria,subTypeCriteria:e.subTypeCriteria,collaboration:e.collaboration,project_title:e.project_title,organization_title:e.organization_title}});a.options.grid.objPolicy_nls.contains("emxFramework.Policy")&&(a.options.grid.objPolicy_nls=a.options.grid.objPolicy),a.options.grid.objType_nls.contains("emxFramework.Type")&&(a.options.grid.objType_nls=a.options.grid.objType),a.options.grid.attributeName_nls&&a.options.grid.attributeName_nls.contains("emxFramework.Attribute")&&(a.options.grid.attributeName_nls=a.options.grid.attributeName),a.options.grid.fromState_nls.contains("emxFramework.State")&&(a.options.grid.fromState_nls=a.options.grid.fromState),a.options.grid.toState_nls.contains("emxFramework.State")&&(a.options.grid.toState_nls=a.options.grid.toState),a.options.grid.collaboration&&(null!=a.options.grid.project_title&&""!=a.options.grid.project_title||(a.options.grid.project_title=a.options.grid.collaboration.split(".")[0]),null!=a.options.grid.organization_title&&""!=a.options.grid.organization_title||(a.options.grid.organization_title=a.options.grid.collaboration.split(".")[1]));for(let e=0;e<i.length;e++)i[e].name==a.options.grid.attributeName&&(a.options.grid.attributeName_nls=l[a.options.grid.attributeName]);o.addRoot(a)})),o.pushUpdate(),o}(e),getModel:()=>o,destroy:()=>{o=new e}}})),define("DS/ENORouteTemplateMgmt/Views/Dialogs/TemplateChangeOwnershipDialog",["DS/ENORouteTemplateMgmt/Actions/TemplateActions","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_TransferOwnershipCmd","DS/RouteWebAppUX/RouteTracker/RouteCloudProbeUtils","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a){return{templateChangeOwner:(n,s)=>function(n,s){if(o.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Change Owner"}),void 0===n.data&&(n=t.getSelectedRowsModel()),n.data.length<1)widget.notify.handler().addNotif({level:"warning",subtitle:a.ErrorTemplateChangeOwner,sticky:!1});else{var r=[];n.data.forEach((function(e){var t={getID:function(){return e.options.grid.id},getLabel:function(){return e.options.grid.Title}};r.push(t)}));var d={SecurityContext:i.getSecurityContextValue()},c=new l({ID:"ActionBar_TransferOwnershipCmd_",context:{getSecurityContext:function(){return d},getSelectedNodes:function(){return r}}});c.onEnd((function(){var t=setInterval((function(){c.transferOwnershipPanel&&c.transferOwnershipPanel.addEvent&&(clearInterval(t),c.transferOwnershipPanel.addEvent("onClose",(function(){null!=event&&"readystatechange"!==event.type||e.refreshTemplateObjectOnChangeOwner(n,s)})))}))}),200),c.begin()}}(n,s)}})),define("DS/ENORouteTemplateMgmt/Views/TemplateTabsView",["DS/Controls/TabBar","DS/ENORouteTemplateMgmt/Config/TemplateTabsConfig","DS/ENORouteMgmt/Utilities/RouteWidgetPersistency"],(function(e,t,i){"use strict";let l,o,a={},n={},s=function(e,t){n=t,this.container=e};var r=["tasks","members","appliesTo"];let d=function(e){let t=e.options.value;void 0===t&&(t=e.dsModel.buttonGroup.value[0]),t!==o&&(a[r[t]].init(n),void 0!==o&&a[r[o]].hideView(),o=t,widget.setValue("TemplateTabs-ShowView",t))};s.prototype.init=function(){l=new e({displayStyle:"strip",showComboBoxFlag:!0,editableFlag:!1,multiSelFlag:!1,reindexFlag:!0,centeredFlag:!1,allowUnsafeHTMLOnTabButton:!0}),t.forEach((e=>{let t=i.getTabPersistency("TemplateTabsPage");e.id==r[t]?e.isSelected=!0:e.isSelected=!1,l.add(e)})),l.inject(this.container),c()};let c=function(){new Promise((function(e,i){let l=[];t.forEach(((e,t)=>{""!=e.loader&&(l[t]=new Promise((function(t,i){require([e.loader],(function(i){a[e.id]=i,t()}))})))})),Promise.all(l).then((()=>{e()}))})).then((function(){let e={options:{}},t=i.getTabPersistency("TemplateTabsPage");e.options.value=t,d(e),l.addEventListener("tabButtonClick",(function(e){d(e)})),l.addEventListener("change",(function(e){d(e)}))}),(function(){}))};return s.prototype.destroy=function(){try{o=void 0,Object.keys(a).map((e=>{a[e].destroy()})),null!=l&&l.destroy(),n={},this.container.destroy()}catch(e){}},s})),define("DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu",["DS/Menu/Menu","DS/ENORouteTemplateMgmt/Views/Dialogs/RemoveTemplate","DS/ENORouteTemplateMgmt/Views/Dialogs/TemplateNewRevision","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteTemplateMgmt/Services/LifeCycleServices","DS/ENORouteTemplateMgmt/Actions/TemplateActions","DS/ENORouteMgmt/Views/Dialogs/InitiateRouteDialog","DS/ENORouteTemplateMgmt/Views/Dialogs/TemplateChangeOwnershipDialog","DS/RouteWebAppUX/Views/Menu/AttachmentContextualMenuItems","DS/RouteWebAppUX/RouteTracker/RouteCloudProbeUtils","DS/ENORouteMgmt/Utilities/EnoWidgetDataUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r,d,c,u){"use strict";let p,m=function(e,i){let l=!0;1===e.data.length&&(-1==e.data[0].options.grid.Actions.indexOf("delete")||null!=e.data[0].options.grid.routeCompletionAction&&""!=e.data[0].options.grid.routeCompletionAction||null!=e.data[0].options.grid.linkedRouteTemplateId&&""!=e.data[0].options.grid.linkedRouteTemplateId||"Active"==e.data[0].options.grid.actualState)&&(l=!1);var o=[];return l&&o.push({name:u.Delete,title:u.Delete,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},data:null,action:{callback:function(){t.removeConfirmation(e,i)}}}),o},f=function(e,t){let l=!0;1===e.data.length&&-1==e.data[0].options.grid.Actions.indexOf("revise")&&(l=!1);var o=[];return l&&o.push({name:u.newRevision,title:u.newRevision,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-line-add"},data:null,action:{callback:function(){d.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - New Revision"}),i.newRevisionConfirmation(e,t)}}}),o},g=function(e,t){var i=[];return i.push({name:u.revisions,title:u.revisions,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch-list"},data:null,action:{callback:function(){a.renderRevisionsDialog(e.data[0].options.grid.id)}}}),i},h=function(e){var t=[];return t.push({name:u.Open,title:u.Open,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-open"},data:null,action:{callback:function(){widget.routeMgmtMediator.publish("initialize-IDCard-on-dblClick",{model:e})}}}),t},b=function(e){var t=[];return t.push({name:u.createRouteFromTemplate,title:u.createRouteFromTemplate,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},data:null,action:{callback:function(){d.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Create route from template"});var t={templateId:e.id,Actions:e.Actions};n.InitiateRouteDialog(t)}}}),t},T=function(e,t){var i=[];return i.push({name:u.changeOwner,title:u.changeOwner,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-user-change"},data:null,action:{callback:function(){s.templateChangeOwner(e,t)}}}),i},v=function(e){var t=[];return t.push({name:u.maturity,title:u.maturity,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collaborative-lifecycle-management"},data:null,action:{callback:function(){d.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Maturity"}),o.lifeCycle(e)}}}),t},y=function(e,t){var i=[];return e.Actions?(e.Actions.forEach((l=>{var o,n,s,r;if("promote"==l&&"Inactive"==e.state?(o="activate",n=u.setToState+c.getStateTemplateNLS().Active,s=c.getStateTemplateNLS().Active,r="promote"):"promote"==l&&"Active"==e.state?(o="archive",n=u.setToState+c.getStateTemplateNLS().Archive,s=c.getStateTemplateNLS().Archive,r="archive"):"demote"==l&&"Active"==e.state?(o="deactivate",n=u.setToState+c.getStateTemplateNLS().Inactive,s=c.getStateTemplateNLS().Inactive,r="demote"):"demote"==l&&"Archive"==e.state?(o="reactivate",n=u.setToState+c.getStateTemplateNLS().Active,s=c.getStateTemplateNLS().Active,r="release"):1===e.Actions.findIndex((e=>e.includes("notifyAdmin")))&&"add.tasks"==l&&"Inactive"==e.state&&"TRUE"==e.applicableTo&&(o="notifyAdmin",n=u.notifyforActivation,s="notifyAdmin",r="promote"),o&&(i.push({name:s,title:n,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-status-change template-maturity-icon-"+r},data:null,action:{callback:function(){d.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Set to "+s}),a.changeTemplateState(e.id,o,t)}}}),"notifyAdmin"==o)){var p=i.length;"notifyAdmin"==i[p-1].name&&(i[p-1].fonticon.content="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-bell-user")}})),i):i};return p={templateTileCheveron:(e,t)=>{return i=l.getSelectedRowsModel(),o=[],1===i.data.length&&(o=o.concat(h(i.data[0]._options.grid)),"Active"===i.data[0]._options.grid.actualState&&(o=o.concat(b(i.data[0]._options.grid))),o=(o=o.concat(y(i.data[0]._options.grid,!1))).concat(f(i,!1)),-1!=i.data[0].options.grid.Actions.indexOf("changeowner")&&(o=o.concat(T(i,"summaryPage"))),o=(o=o.concat(r.getCopyLink(i.data))).concat(g(i,!1))),i.data.length>1&&(o=o.concat(T(i,"summaryPage"))),o.concat(m(i,!1));var i,o},templateIdCardStateCheveron:t=>function(t){return t.Actions?-1!==t.Actions.findIndex((e=>e.includes("promote")))||-1!==t.Actions.findIndex((e=>e.includes("demote")))||-1!==t.Actions.findIndex((e=>e.includes("notifyAdmin")))?UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-chevron-down ",title:u.idCardHeaderTemplateActivityState,styles:{"font-size":"18px","line-height":"24px"},events:{click:function(i){var l=i.target.getBoundingClientRect(),o={position:{x:l.left,y:l.top+20}},a=y(t,!0);1!==t.Actions.findIndex((e=>e.includes("promote")))&&1!==t.Actions.findIndex((e=>e.includes("demote")))||(a=a.concat(v(t))),e.show(a,o)}}}):void 0:""}(t),templateGridRightClick:(t,i)=>function(t,i){t.preventDefault(),t.stopPropagation();var o=t.target.getBoundingClientRect(),a={position:{x:o.left,y:o.top+20}},n=l.getSelectedRowsModel(),s=[];1===n.data.length&&(s=s.concat(h(i)),"Active"===i.actualState&&(s=s.concat(b(n.data[0].options.grid))),s=(s=s.concat(y(i))).concat(f(n,!1)),-1!=n.data[0].options.grid.Actions.indexOf("changeowner")&&(s=s.concat(T(n,"summaryPage"))),s=(s=s.concat(r.getCopyLink(n.data))).concat(g(n,!1))),s=s.concat(m(n,!1)),n.data.length>1&&(s=s.concat(T(n,"summaryPage"))),e.show(s,a)}(t,i),templateIdCardCheveron:t=>function(t){return UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-3x wux-ui-3ds-chevron-down fonticon-display fonticon-color-display",title:u.idCardHeaderActionTemplateAction,styles:{"padding-top":"0px"},events:{click:function(i){var l=i.target.getBoundingClientRect(),o={position:{x:l.left,y:l.top+20}},a=[];a=(a=a.concat(g(t,!0))).concat(f(t,!0)),"Active"===t.data[0].options.grid.actualState&&(a=a.concat(b(t.data[0].options.grid))),-1!=t.data[0].options.grid.Actions.indexOf("changeowner")&&(a=a.concat(T(t,"idCard"))),a=(a=a.concat(m(t,!0))).concat(r.getCopyLink(t.data)),e.show(a,o)}}})}(t)},p})),define("DS/ENORouteTemplateMgmt/Views/TemplateIDCardView",["DS/ENORouteTemplateMgmt/Views/TemplateHeaderView","DS/ENORouteTemplateMgmt/Views/TemplateTabsView","DS/ENORouteMgmt/Utilities/IdCardUtil","DS/ENORouteMgmt/Utilities/DataFormatter","DS/ENORouteTemplateMgmt/Views/RouteTemplateHistory","DS/ENORouteTemplateMgmt/Utilities/DragAndDropOnRoutetemplateIDcard","DS/ENORouteMgmt/Utilities/DragAndDropManager"],(function(e,t,i,l,o,a,n){"use strict";let s,r,d,c,u;var p=function(e){this.rightPanel=e,s=new UWA.Element("div",{id:"templateHeaderContainer",class:"route-header-container"}),a.makeDroppable(s,m);let t=widget.getValue("templateIdCardPersistency");t&&"maximized"==t?s.addClassName("maximized"):s.addClassName("minimized"),r=new UWA.Element("div",{id:"routeFacetsContainer",class:"route-facets-container"})};let m=function(e,t){n._onRoutesummaryDropManager(e)};return p.prototype.init=function(o){var a=o.model.id;widget.setValue("templateIdToBePersisted",a),new e(s).destroyContainer(),new t(r).destroy(),c&&widget.routeMgmtMediator.unsubscribe(c),u&&widget.routeMgmtMediator.unsubscribe(u);new e(s).init(o,!1),d=o.model.id,new t(r,o).init(),this.rightPanel.appendChild(s),this.rightPanel.appendChild(r);let n=new e(s);n.resizeSensor(),n.resizeIDCard(),c=widget.routeMgmtMediator.subscribe("template-idcard-data-updated",(function(t){var o={model:l.templateGridData(t)};if(o.model.id==d){var a=i.infoIconIsActive();let l=new e(s);l.destroyContent(),l.init(o,a),l.resizeSensor(),l.resizeIDCard(),widget.propWidgetOpen&&(t.requestFrom&&"editPropWidget"==t.requestFrom||widget.routeMgmtMediator.publish("route-header-info-click",{model:o.model,info:"Route Template"}))}})),u=widget.routeMgmtMediator.subscribe("template-data-deleted",(function(e){e.model.includes(d)&&require(["DS/ENORouteTemplateMgmt/Views/TemplateSummaryView"],(function(e){e.backToTemplateSummary()}))}))},p.prototype.destroy=function(){this.rightPanel.destroy()},p})),define("DS/ENORouteTemplateMgmt/Views/Tile/TemplateSummaryTileView",["DS/WAFData/WAFData","UWA/Core","DS/ENORouteMgmt/Components/Wrappers/WrapperTileView","DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu","DS/WebappsUtils/WebappsUtils","DS/Core/PointerEvents","DS/ENORouteMgmt/Utilities/DragAndDropManager","DS/ENORouteTemplateMgmt/Utilities/DragAndDropOnRouteTemplateTileView","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i,l,o,a,n,s,r){"use strict";let d,c,u=function(e,t){n._onTemplatesummaryDropManager(e)},p=function(){let e=i.tileView();e.onDragStartCell=function(e,t){n.getContentForDrag(e,t)},e.onDragEndCell=function(e,t){e.target.removeClassName("wux-ui-state-activated wux-ui-state-highlighted")}};return{build:e=>function(e){c=e||new TreeDocument({useAsyncPreExpand:!0});let l=widget.getValue("TemplateSummary-ShowView"),o="tile-view-container hideView";l&&"TileView"==l&&(o="tile-view-container showView"),d=t.createElement("div",{id:"TemplateTileViewContainer",class:o}),s.makeDroppable(d,u);let a=i.build(c,d,!0);return p(),a}(e),contexualMenuCallback:()=>{i.tileView().onContextualEvent={callback:function(e){var t=[];if(e&&e.cellInfos&&e.cellInfos.cellModel){var i=c.getSelectedNodes(),o=i[0].options.grid.Actions,a=i[0]._options.grid.id;t=l.templateTileCheveron(o,a)}return t}}},destroy:()=>{_myResponsiveTilesView.destroy()},getTileViewInstance:()=>i.tileView()}})),define("DS/ENORouteTemplateMgmt/Views/Loader/EditTemplateLinkTemplateChooser",["DS/ENORouteMgmt/Utilities/Search/SearchUtil","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/TreeModel/TreeNodeModel","DS/Controls/TooltipModel","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o){"use strict";let a,n=!1;var s=function(e,t){var l;t&&(l=new i({label:t[0]["ds6w:label"],value:t[0].id,status:t[0]["ds6w:status_value"],category:t[0]["ds6w:category"]}),a.fields.linkedTemplateField.selectedItems=l)};let r=function(e,t){if("Standard"==e.model.BasePurpose){if(""!=e.model.linkedRouteTemplate&&null==t.fields.linkedTemplateField.selectedItems||null!=t.fields.linkedTemplateField.selectedItems&&e.model.linkedRouteTemplate!=t.fields.linkedTemplateField.selectedItems.options.label)return void(t.button.style.visibility="visible");if(""==t.linkTemplateCompleteActionField.className&&t.fields.routeCompletionAction.value!=e.model.routeCompletionAction)return void(t.button.style.visibility="visible");if(""==t.demoteOnRejectionField.className&&t.fields.demoteOnRejection.value!=e.model.DemoteOnRejection)return void(t.button.style.visibility="visible")}"False"!=e.model.selectUsersFromUserGroup||e.model.preserveTaskOwner==t.fields.buttonGroupPTO.value[0]?t.button.style.visibility="hidden":t.button.style.visibility="visible"};return{init:(t,i,l)=>function(t,i,l){a=i;var o=t.dsModel,n=UWA.Utils.getUUID();require(["DS/SNInfraUX/SearchCom"],(function(t){var i=t.createSocket({socket_id:n}),a=e.getRefinementToSnN(n,"linkTemplate",!1,["Route Template"]),r=e.getPrecondForLinkTemplateEditSearch(l);if(a.precond=r.precond,""!=l&&(a.resourceid_not_in=r.resourceid_not_in),!UWA.is(i))throw new Error("Socket not initialized");i.dispatchEvent("RegisterContext",a),i.addListener("Selected_Objects_search",s.bind(o,"")),i.dispatchEvent("InContextSearch",a)}))}(t,i,l),destroy:()=>{a={}},getPrecondForLinkedTemplateSearch:i=>function(i){return new Promise((function(l,o){var a={};""!=i.model.linkedRouteTemplateId&&null!=i.model.linkedRouteTemplateId?t.linkedTemplates(i.model.id).then((t=>{a=e.getPrecondForLinkTemplateEditSearch(t),l(a)}),(e=>{e.error&&widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}),o()})):(a=e.getPrecondForLinkTemplateEditSearch(),l(a))}))}(i),changeHandlerLinkedFortemplateField:(e,t)=>function(e,t){if(n)n=!1;else{if(t.fields.linkedTemplateField.selectedItems){let e=t.fields.linkedTemplateField.selectedItems.options.status;if("Released"!=e&&"Route Template.Active"!=e){let i;"Draft"==e||"Route Template.Inactive"==e?i=o.errorSelectedInactiveTemplate:"Archived"!=e&&"Route Template.Archive"!=e||(i=o.errorSelectedArchiveTemplate),widget.notify.handler().addNotif({level:"error",subtitle:i,sticky:!1}),n=!0,t.fields.linkedTemplateField.selectedItems=void 0}}if(t.fields.linkedTemplateField.selectedItems&&t.fields.linkedTemplateField.selectedItems.options){if(t.fields.linkedTemplateField._editor.elements.inputField.value!=t.fields.linkedTemplateField.selectedItems.options.label)return;{t.linkTemplateCompleteActionField.className="",t.demoteOnRejectionField.className="";let e=t.fields.querySelectorAll(".initiate-Route-Field-LinkedTemplate"),i=t.fields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate"),a=t.fields.querySelectorAll(".initiate-Route-Field-Value-LinkedTemplate");for(let t=0;t<e.length;t++)e[t].classList.remove("fonticon-chooser-scope-display"),i[t].classList.remove("fonticon-chooser-scope-display"),a[t].classList.remove("fonticon-chooser-scope-display");if(t.fields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate #linkTemplateCompleteActionField")[0]){t.fields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate #linkTemplateCompleteActionField")[0].innerText=o.replace(o.routeCompletionActionForSelectedTemplate,{tag1:t.fields.linkedTemplateField.selectedItems.options.label});let e=t.fields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate #linkTemplateCompleteActionField")[0].innerText;t.fields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate #linkTemplateCompleteActionField")[0].tooltipInfos=new l({shortHelp:e,allowUnsafeHTMLShortHelp:!0})}t.fields.linkedTemplateField.selectedItems.options.category&&t.fields.linkedTemplateField.selectedItems.options.category.includes("Promote Connected Object")&&t.fields.routeCompletionAction?t.fields.routeCompletionAction.selectedIndex=1:t.fields.routeCompletionAction&&(t.fields.routeCompletionAction.selectedIndex=0)}}else{t.linkTemplateCompleteActionField.className="fonticon-chooser-scope-display",t.demoteOnRejectionField.className="fonticon-chooser-scope-display";let e=t.fields.querySelectorAll(".initiate-Route-Field-LinkedTemplate"),i=t.fields.querySelectorAll(".initiate-Route-Field-Label-LinkedTemplate"),l=t.fields.querySelectorAll(".initiate-Route-Field-Value-LinkedTemplate");for(let t=0;t<e.length;t++)e[t].classList.add("fonticon-chooser-scope-display"),i[t].classList.add("fonticon-chooser-scope-display"),l[t].classList.add("fonticon-chooser-scope-display")}null==t.fields.linkedTemplateField.options.isSelected&&r(e,t),null!=t.fields.linkedTemplateField.options.isSelected&&(t.fields.linkedTemplateField.options.isSelected=void 0)}}(e,t),checkForFieldChange:(e,t)=>r(e,t)}})),define("DS/ENORouteTemplateMgmt/Views/TemplateSummaryView",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","DS/ENORouteTemplateMgmt/Config/Toolbar/TemplateSummaryToolbarConfig","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","DS/ENORouteMgmt/Components/Wrappers/WrapperTileView","DS/ENORouteTemplateMgmt/Views/Tile/TemplateSummaryTileView","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteTemplateMgmt/Utilities/TemplatePlaceHolder","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/Utilities/Array","DS/Core/PointerEvents","DS/ENORouteMgmt/Views/RouteHomeSplitView","DS/ENORouteTemplateMgmt/Views/TemplateIDCardView","DS/ENORouteMgmt/Utilities/IdCardUtil","DS/ENORouteTemplateMgmt/Views/TemplateInfoPropWidget","DS/ENORouteMgmt/Services/RouteServices","DS/ENORouteMgmt/Utilities/Utils","DS/ENORouteMgmt/Components/TagNavigator","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i,l,o,a,n,s,r,d,c,u,p,m,f,g,h,b,T){"use strict";let v=[],y=function(e){n.createModel(e);let t=C();return a.getSecurityContextValue()?s.hideeErrorPlaceholder(t):(R(t),widget.notify.handler().addNotif({title:T.errorCreateRouteTemplateForRoleTitle,subtitle:T.errorCreateRouteTemplateForRoleSubTitle,message:T.errorCreateRouteTemplateForRoleMsg,level:"warning",sticky:!1})),t},w=function(e){R(document.querySelector(".widget-container"));var t="";try{t=JSON.parse(e)}catch(e){}t.error?widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:T.infoRefreshError,sticky:!1})},S=function(){let e;return void 0!==widget.data.ids&&(e=widget.data.ids),widget.data.contentId&&(e=widget.data.contentId),widget.data.templateId&&(e=widget.data.templateId),e};function R(e){e||(e=new UWA.Element("div",{class:"widget-container"})).inject(widget.body),s.hideEmptyRouteTemplatePlaceholder(e),s.showeErrorPlaceholder(e)}let C=function(t){widget.setValue("HomePage","route_templates");var i=n.getModel();let l=e.build(i),a=o.build(i);o.contexualMenuCallback(),P();let r,d=e.getGridViewToolbar(),c=document.querySelector(".widget-container");r=c||new UWA.Element("div",{class:"widget-container"});let u=UWA.createElement("div",{id:"TemplatedataGridDivToolbar",class:"toolbar-container"}).inject(r);d.inject(u),l.inject(r),a.inject(r);var p=[];if(0==i.getChildren().length)s.showEmptyRouteTemplatePlaceholder(r,i);else{i.prepareUpdate();var m=0;i.getChildren().forEach((e=>{p.push(e.options.id),e._isHidden&&m++})),i.pushUpdate(),m==i.getChildren().length&&s.showEmptyRouteTemplatePlaceholder(r,i)}return widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:i}),s.registerListeners(),p.length>1e3&&widget.notify.handler().addNotif({message:T.taggerWarning,level:"warning",sticky:!1}),O(p),r},F=function(){let e=I(),t="";e.indexOf("Draft")>-1&&(t+="Inactive,"),e.indexOf("Released")>-1&&(t+="Active,"),e.indexOf("Archived")>-1&&(t+="Archive,"),""==t||(t=t.slice(0,-1)),widget.setValue("templateStateFilter",t)},E=function(){let e=I(),t="";e.indexOf("shared")>-1&&(t+="Assigned,"),e.indexOf("owned")>-1&&(t+="Owned,"),""==t||(t=t.slice(0,-1)),widget.setValue("templateOwnershipFilter",t)},M=function(t){let i=e.getDataGridInstance(),l=o.getTileViewInstance();t?(i.displayModalLoader(T.loadingTemplatesMessage),l.displayModalLoader(T.loadingTemplatesMessage)):(i.removeModalLoader(T.loadingTemplatesMessage),l.removeModalLoader(T.loadingTemplatesMessage))},A=function(e){var t=n.getModel(),i=b.getTaggerVariable(),l=b.getSearchWithInTypedValue();t.prepareUpdate(),d.optimizedForEach(t.getChildren(),(function(t){null==l&&0==Object.keys(i.getCurrentFilter().allfilters).length||e.includes(t.options.id)?t.show():t.hide()}));t.getChildren().forEach((e=>{e._isHidden&&0})),t.pushUpdate(),document.querySelector(".right-container")&&"0px"==document.querySelector(".right-container").getStyle("width")&&widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:t})},N=function(e){a.getLoginUser(),I();if(e)(M(!0),F(),E(),new Promise((function(e,t){r.fetchAllRouteTemplates().then((t=>{M(!1);var i=n.getModel();i.prepareUpdate(),i.removeRoots(),i.pushUpdate();let l=document.querySelector(".widget-container");null!=l&&(0==t.length?s.showEmptyRouteTemplatePlaceholder(l,i):s.hideEmptyRouteTemplatePlaceholder(l)),n.appendAllRows(t),G(),e(t)}),(e=>{_dataGridView.removeModalLoader()}))}))).then((e=>{let t=n.getModel(),i=t.getFilterManager();["label","Name","Maturity_State","BasePurposeNLS","Activity_StateNLS","Description","revision","Owner"].forEach((function(e){i.reapplyPropertyFilterModel(e)})),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:t}),widget.routeMgmtMediator.publish("template-tag-data-updated")}),(e=>{w(e)}));else{var t=n.getModel();let e=t.getSelectedNodes();t.prepareUpdate(),d.optimizedForEach(t.getChildren(),(function(e){e.show()}));var i=0;t.getChildren().forEach((e=>{e._isHidden&&i++})),t.pushUpdate();var l=[];t.__visibilityMap__&&t.__visibilityMap__.forEach(((e,t)=>{!1===e&&l.push(t.options.id)})),e&&1==e.length&&(e[0]._isHidden||l.includes(e[0]._options.id))&&k(),(0==e.length||document.querySelector(".right-container")&&"0px"==document.querySelector(".right-container").getStyle("width"))&&widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:t});let o=document.querySelector(".widget-container");null!=o&&(t.getChildren().length==i?s.showEmptyRouteTemplatePlaceholder(o,t):s.hideEmptyRouteTemplatePlaceholder(o)),widget.routeMgmtMediator.publish("template-tag-data-updated")}h.refreshRightPanel("Route Template",n)},D=function(e,t){var i=[];b.getSearchResult(e,t).then((t=>{if(t.results)for(var l=0;l<t.results.length;l++)i.push(t.results[l].attributes[0].value);A(i),t.infos&&t.infos.nmatches>1e3&&b.getSearchResult(e,i)}))},I=function(){var e=widget.getValue("templatefilters");return S()?(widget.setValue("templatefilters",["owned","shared","Draft","Released"]),["owned","shared","Draft","Released"]):null==e?(widget.setValue("templatefilters",["owned","Draft","Released"]),["owned","Draft","Released"]):e},O=function(e){var t=b.setTaggerProxy("Template");t.addEvent("onFilterChange",(function(e){var t=L(),i=b.getSearchWithInTypedValue(),l=b.getTaggerVariable().getCurrentFilter();t.length>1e3&&null==i&&(t=t.slice(0,1e3)),D(l.allfilters,t)}));var i=t.getCurrentFilter().allfilters;if(0==e.length)b.setTagsForSummaryPage([]);else{e.length>1e3&&(e=e.slice(0,1e3));var l=b.getSearchWithInTypedValue(),o=[];b.getSearchResult(i,e).then((e=>{if(e.results)for(var i=0;i<e.results.length;i++)o.push(e.results[i].attributes[0].value);(null!=l||Object.keys(t.getCurrentFilter().allfilters).length>0)&&A(o)}))}},k=function(){widget.routeMgmtMediator.publish("template-back-to-summary"),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:n.getModel()}),widget.setValue("openedTemplateId",void 0),document.getElementById("add-appliesTo-grid-section-container")?.remove()},U=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid?2==e.multipleHitCount?(t.nodeModel.select(!0),B(t.nodeModel.options.grid)):e.ctrlKey||e.shiftKey||h.refreshRightPanel("Route Template",n,t.nodeModel.options.grid):h.refreshRightPanel("Route Template",n)},V=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount&&(t.nodeModel.select(!0),B(t.nodeModel.options.grid))},x=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.button&&(require(["DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu"],(function(i){i.templateGridRightClick(e,t.nodeModel.options.grid)})),h.refreshRightPanel("Route Template",n,t.nodeModel.options.grid))},j=function(e,t){h.refreshRightPanel("Route Template",n)},W=function(e,t){h.refreshRightPanel("Route Template",n),widget.setValue("right-panel-peristed-id",void 0)},L=function(){var e=n.getModel(),t=[];return e.getChildren().forEach((e=>{t.push(e.options.id)})),t},P=function(){let e=i.dataGridView();e.addEventListener(c.POINTERHIT,U),e.addEventListener("contextmenu",x),l.tileView().addEventListener(c.POINTERHIT,V),e.getTreeDocument().getXSO().onAdd(j),e.getTreeDocument().getXSO().onRemove(W),_()},_=function(){q();let t=widget.routeMgmtMediator.subscribe("template-summary-append-rows",(function(t){let i=n.appendRows(t.data,t.action);e.getDataGridInstance().ensureNodeModelVisible(i,!0),i.select()}));v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-show-message",(function(e){widget.notify.handler().addNotif(e.message)})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-delete-rows",(function(e){n.deleteRowModelByIndex(e),widget.routeMgmtMediator.publish("template-tag-data-updated")})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-delete-row-by-ids",(function(e){e.model.length>0&&n.deleteRowModelByIds(e.model),h.refreshRightPanel("Route Template",n),widget.routeMgmtMediator.publish("template-tag-data-updated")})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-delete-selected-rows",(function(){n.deleteRowModelSelected(),h.refreshRightPanel("Route Template",n),widget.routeMgmtMediator.publish("template-tag-data-updated")})),v.push(t),t=widget.routeMgmtMediator.subscribe("route-template-DataGrid-on-drop",(function(e){B(e)})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-data-updated",(function(e){n.updateRow(e),N()})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-new-route-show-message",(function(e){widget.notify.handler().addNotif(e.message)})),v.push(t),t=widget.routeMgmtMediator.subscribe("initialize-IDCard-on-dblClick",(function(e){let t=n.getRowModelById(e.model.id);t&&t.select(!0),B(e)})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-info-panel",(function(e){f.render(e.container,e.templatedata)})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-tag-data-updated",(function(e){var t=L(),i=b.getTaggerVariable(),l=i.getCurrentFilter();t.length>1e3&&(t=t.slice(0,1e3)),t.length>0?D(l.allfilters,t):b.setTagsForSummaryPage([]),i.activate()})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-refresh",(function(){N()})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-deactivate-tag-data",(function(e){var t=b.getTaggerVariable();t&&t.deactivate()})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-search-within-data",(function(e){var t=L(),i=b.getTaggerVariable().getCurrentFilter();D(i.allfilters,t)})),v.push(t),t=widget.routeMgmtMediator.subscribe("template-reset-search-within-data",(function(e){var t=L(),i=b.getTaggerVariable().getCurrentFilter();t.length>1e3&&(t=t.slice(0,1e3)),D(i.allfilters,t)})),v.push(t)},q=function(){v.forEach(((e,t)=>{widget.routeMgmtMediator.unsubscribe(e)})),v=[]},G=function(){let e=S();if(!e&&widget.getValue("openedTemplateId")&&(e=widget.getValue("openedTemplateId"),widget.setValue("openedTemplateId",void 0)),void 0===e&&(e=widget.getValue("templateIdToBePersisted")),e){void 0!==widget.data.ids&&(widget.data.ids=void 0),widget.data.contentId&&(widget.data.contentId=void 0),widget.data.templateId&&(widget.data.templateId=void 0);let t=n.getRowModelById(e);t?(t.select(!0),B(t.options.grid)):k()}},B=function(e){let t=(new u).getExistingRightViewWrapper();t.innerHTML="";let i=new p(t),l={};l=e.model?e:{model:e},i.init(l),m.collapseIcon("template"),widget.routeMgmtMediator.publish("route-template-DataGrid-on-dblclick",l)};return{build:()=>function(){let e=S();return e?new Promise((function(t,i){r.fetchRouteTemplateById(e).then((e=>{let i=y(e);t(i)}),(e=>{w(e)}))})):(F(),E(),new Promise((function(e,t){r.fetchAllRouteTemplates().then((t=>{n.destroy();let i=y(t);e(i)}),(e=>{w(e)}))})))}(),getFilterPreferences:()=>I(),updateFilterPreferences:(e,t)=>function(e,t){var i=[...widget.getValue("templatefilters")];const l=i.indexOf(e);t?l<=-1&&i.push(e):l>-1&&i.splice(l,1),widget.setValue("templatefilters",i)}(e,t),destroyAndRedrawwithFilters:()=>{N(!0)},destroy:()=>{n.destroy(),e.destroy(),o.destroy(),q()},backToTemplateSummary:()=>k(),getModel:()=>getSummaryModel(),openSelected:()=>G(),activateInfoIcon:()=>{h.activateInfoIcon(e)},inActivateInfoIcon:()=>{h.inActivateInfoIcon(e)},onSummaryPageDblClick:e=>B(e)}})),define("DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","DS/ENORouteTemplateMgmt/Views/TemplateSummaryView","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/RouteWebAppUX/RouteTracker/RouteCloudProbeUtils"],(function(e,t,i,l){"use strict";var o=Object.create(null);o.currentView="Grid",o.previousView="Grid";var a=function(i,l){var o=e.getGridViewToolbar().getNodeModelByID("filter"),a=!0;if("owner"==i.type)"owned"==i.filter?"selected"==o.options.grid.data.menu[0].state?(o.options.grid.data.menu[0].state="unselected",a=!1):o.options.grid.data.menu[0].state="selected":"shared"==i.filter&&("selected"==o.options.grid.data.menu[1].state?(o.options.grid.data.menu[1].state="unselected",a=!1):o.options.grid.data.menu[1].state="selected"),t.updateFilterPreferences(i.filter,a),t.destroyAndRedrawwithFilters(),o&&"list-ok"!=o.options.grid.semantics.icon.iconName&&o.updateOptions({label:"list-ok"});else if("state"==i.type){o=e.getGridViewToolbar().getNodeModelByID("filter"),a=!0;"Released"==i.filter?("selected"==o.options.grid.data.menu[4].state?(o.options.grid.data.menu[4].state="unselected",a=!1):o.options.grid.data.menu[4].state="selected",i.filter="Released"):"Draft"==i.filter?("selected"==o.options.grid.data.menu[3].state?(o.options.grid.data.menu[3].state="unselected",a=!1):o.options.grid.data.menu[3].state="selected",i.filter="Draft"):"Archived"==i.filter&&("selected"==o.options.grid.data.menu[5].state?(o.options.grid.data.menu[5].state="unselected",a=!1):o.options.grid.data.menu[5].state="selected",i.filter="Archived"),t.updateFilterPreferences(i.filter,a),t.destroyAndRedrawwithFilters(),o&&"list-delete"!=o.options.grid.semantics.icon.iconName&&o.updateOptions({label:"list-delete"})}};return{changeOwnerFilter:e=>function(e){a(e)}(e),changeStateFilter:e=>function(e){a(e)}(e),openPropertiesView:e=>function(e){l.sendRouteTrackerEvent({event:"TemplateCommand",value:"Template - Properties"}),console.log(e);let t=i.getSelectedRowsModel();if(1==t.data.length){let e=t.data[0].options.grid;t.model=e}widget.getValue("propWidgetOpen")?widget.routeMgmtMediator.publish("route-info-close-click",{info:"Route Template"}):widget.routeMgmtMediator.publish("route-header-info-click",{model:t.model,info:"Route Template",openedFrom:"toolbar"})}(e)}})),define("DS/ENORouteTemplateMgmt/Views/Grid/TemplateAppliesToDataGridView",["DS/ENORouteTemplateMgmt/Config/Toolbar/TemplateAppliesToTabToolbarConfig","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView"],(function(e,t){"use strict";let i,l,o={};return{build:(a,n)=>function(a,n){var s=UWA.createElement("div",{id:"TemplateAppliesToDataGridView",class:"hideView"});let r=e.writetoolbarDefination(n);1==UWA.Utils.Client.Features.touchEvents&&(o.showRowCount=!0),o.cellDragEnabledFlag=!0,o.identifier="TemplateAppliesToDataGridView";let d=t.build(a,"",r,s,o);return i=t.dataGridViewToolbar(),l=t.dataGridView(),d}(a,n),registerListners:()=>registerListners(),destroy:()=>{_dataGrid.destroy()},getGridViewToolbar:()=>i,getDataGridInstance:()=>l}})),define("DS/ENORouteTemplateMgmt/Actions/TemplateAppliesToAction",["DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t){"use strict";let i=function(e,t){var i,l,o,a,n,s,r,d,c=[],u=[];if(e.enableApplicability.checkFlag&&(i=e.policy.selectedItems.options.value,l=e.type.selectedItems.options.value,r=e.maturityState.selectedItems.options.value.split("|")[0],d=e.maturityState.selectedItems.options.value.split("|")[1],e.criteriaCheckbox.checkFlag&&("Credentials"==e.criteriaSelection.value?s=e.collabSpace.selectedItems&&e.organization.selectedItems?e.collabSpace.selectedItems.options.value+"."+e.organization.selectedItems.options.value:"":"Attribute"==e.criteriaSelection.value&&(o=e.attributeName.selectedItems.options.grid.name,a="date"==e.attributeName.selectedItems.options.grid.type?"between"==e.attributeCases.value?Date.parse(e.attributeValue.value.toGMTString())>Date.parse(e.attributeValue1.value.toGMTString())?new Date(e.attributeValue1.value).toISOString()+"%"+new Date(e.attributeValue.value).toISOString():new Date(e.attributeValue.value).toISOString()+"%"+new Date(e.attributeValue1.value).toISOString():new Date(e.attributeValue.value).toISOString():e.attributeValue.value,n=e.attributeCases.value))),e.subTypeCheckbox.checkFlag){var p=e.subType.selectedItems;if(null!=p)for(var m=0;m<p.length;m++)u.push(p[m].options.value)}var f={};t.getChildren().length>0&&(f=t.getChildren()[0].options.grid);var g={dataelements:{}};if(f.id&&(g.id=f.id,g.type=f.type),f.objPolicy!=i&&(g.dataelements.objPolicy=i),f.objType!=l&&(g.dataelements.objType=l),f.fromState==r&&f.toState==d||(g.dataelements.fromState=r,g.dataelements.toState=d),0!=e.criteriaCheckbox.checkFlag||null==f.attributeName&&null==f.attributeValue&&null==f.collaboration?(f.attributeName==o&&f.attributeValue==a&&f.attributeCondition==n||(g.dataelements.attributeName=o,g.dataelements.attributeValue=a,g.dataelements.attributeCondition=n),f.collaboration!=s&&(g.dataelements.collaboration=s)):g.dataelements.criteria=" ",0==e.subTypeCheckbox.checkFlag)null==f.subType&&""==f.subType||(g.dataelements.itemsForExactType=" ");else if(null==f.subType||""==f.subType)g.dataelements.itemsForExactType=u;else{var h=f.subType.split(","),b=[];for(let e=0;e<h.length;e++)b.push(h[e].split("~")[0]);b.sort().toString()!=u.sort().toString()&&(g.dataelements.itemsForExactType=u)}return null==g.id?g.updateAction="CREATE":g.id&&e.enableApplicability.checkFlag?g.updateAction="MODIFY":g.updateAction="DELETE",c.push(g),{csrf:widget.data.csrf,data:c}};return{updateTemplateAppliesTo:(l,o,a)=>function(l,o,a){return new Promise((function(n,s){var r=i(l,o);e.updateAppliesToData(r,a).then((i=>{e.fetchRouteTemplateById(a).then((e=>{n(i),widget.routeMgmtMediator.publish("template-idcard-data-updated",e[0])}),(e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:t.infoRefreshError,sticky:!1}),s(e)}))}),(e=>{e&&e.error&&widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}),s(e)}))}))}(l,o,a)}})),define("DS/ENORouteTemplateMgmt/Views/Form/RelatedObjectForm",["DS/Controls/LineEditor","DS/Controls/Editor","DS/Controls/ButtonGroup","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/ENORouteTemplateMgmt/Views/Loader/EditTemplateLinkTemplateChooser","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/ENORouteTemplateMgmt/Actions/TemplateActions","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/TreeModel/TreeNodeModel","DS/ENORouteMgmt/Views/Form/ENORouteAutoComplete","DS/ENORouteMgmt/Utilities/RouteViewUtils","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r,d,c,u,p,m,f,g){let h,b,T=function(e,t){return f.createNewElement(e,t)},v=function(e,t,i){return f.createTooltipElement(e,t,i)},y=function(e){return f.getElementToolTip(e)},w=function(e,t){f.makeResponsiveCss("initiateRouteTemplate","#TemplateRelatedObjectFields");var w=document.querySelector(".RelatedObjectContainer");w.innerHTML="",h.linkTemplateCompleteActionField=new UWA.Element("div",{id:"linkTemplateCompleteActionField",class:"fonticon-chooser-scope-display"}),h.demoteOnRejectionField=new UWA.Element("div",{id:"demoteOnRejectionField",class:"fonticon-chooser-scope-display"});var C=new UWA.Element("div",{class:"Space2",html:"&nbsp;"});h.button={};var F=new UWA.Element("div",{html:"<br><br>"});if(h.fields=new UWA.Element("div",{id:"RelatedObjectFields",class:"RelatedObjectFields",styles:{height:"calc(100% - 84px)"}}),"Inactive"==t.model.actualState&&-1!=t.model.Actions.indexOf("modify")&&(h.Toolbar=new UWA.Element("div",{id:"EditToolbar",class:"wux-button-icon-placeholder"}),new UWA.Element("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-pencil wux-ui-3ds-lg",title:g.editMode,styles:{"font-size":"20px",position:"absolute",right:"16px",cursor:"pointer",height:"auto"},events:{click:function(e){if(null==document.getElementById("button"))R.build("edit",t);else{if(!S(t,h))return d.setNotificationManager(r),void r.addNotif({level:"error",subtitle:g.relatedErrorMessage,sticky:!1});R.build("view",t)}}}}).inject(h.Toolbar),F.inject(h.Toolbar),h.Toolbar.inject(w),h.fields.addEventListener("dblclick",(function(i){"view"==e&&R.build("edit",t)}))),h.fields.inject(w),"Standard"==t.model.BasePurpose){if(""!=t.model.linkedRouteTemplate&&(h.linkTemplateCompleteActionField.className="",h.demoteOnRejectionField.className=""),h.fields.startRouteOnCompletionField=new UWA.Element("div",{id:"startRouteOnCompletionField"}),initiateRouteField=T("initiate-Route-Field",h.fields.startRouteOnCompletionField),initiateRouteFieldLabel=T("initiate-Route-Field-Label",initiateRouteField),initiateRouteFieldWidth=new UWA.Element("div").inject(initiateRouteField),initiateRouteFieldWidth.style.width="2%",initiateRouteFieldValue=T("initiate-Route-Field-Value",initiateRouteField),new UWA.Element("h5",{text:g.StartRouteOnCompletion}).inject(initiateRouteFieldLabel).tooltipInfos=y(g.StartRouteOnCompletion),"edit"==e){b=v("startRouteOnCompletion",g.initiateRouteTemplateStartOnCompletionHelp,initiateRouteFieldLabel);var E,M=new UWA.Element("div",{id:"startRouteOnCompletionFieldChooser",class:"fonticon-chooser-display"}),A={};if(A.isMultiSearchMode=!1,A.placeHolderValue=g.typeToSearch,A.minLengthToType=3,A.isFreeInputAllowed=!1,A.toKeepSearchResultsFlag=!1,A.getPrecond=function(){return n.getPrecondForLinkedTemplateSearch(t)},A.getChangeHandler=function(){return n.changeHandlerLinkedFortemplateField(t,h)},h.fields.linkedTemplateField=m.drawAutoCompleteComponent(A),h.fields.linkedTemplateField.inject(M),null!=t.model.linkedRouteTemplateId&&""!=t.model.linkedRouteTemplateId)E=new p({label:t.model.linkedRouteTemplate,value:t.model.linkedRouteTemplateId,status:"Released"}),h.fields.linkedTemplateField.options.isSelected=!0,h.fields.linkedTemplateField.selectedItems=E;new UWA.Element("div",{html:"&nbsp;"}).inject(M),h.fields.templateChooser=new l({icon:{iconName:"search"}}),h.fields.templateChooser.inject(M),h.fields.templateChooser.getContent().addEventListener("buttonclick",(function(e){var i="";""!=t.model.linkedRouteTemplateId&&null!=t.model.linkedRouteTemplateId?u.linkedTemplates(t.model.id).then((t=>{i=t,n.init(e,h,i)}),(e=>{e.error&&widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1})})):n.init(e,h,i)})),M.inject(initiateRouteFieldValue),h.fields.startRouteOnCompletionField.inject(h.fields)}else{let e=new UWA.Element("span",{html:t.model.linkedRouteTemplate}).inject(initiateRouteFieldValue);if(e.addClassName("valueReadOnly"),e.tooltipInfos=y(t.model.linkedRouteTemplate),h.fields.startRouteOnCompletionField.inject(h.fields),""!=h.linkTemplateCompleteActionField.className)C.inject(h.fields);else{var N=document.querySelector(".Space2");null!=N&&N.remove()}}initiateRouteField=T("initiate-Route-Field-LinkedTemplate",h.linkTemplateCompleteActionField),initiateRouteFieldLabel=T("initiate-Route-Field-Label-LinkedTemplate",initiateRouteField),initiateRouteFieldWidth=new UWA.Element("div").inject(initiateRouteField),initiateRouteFieldWidth.style.width="2%",initiateRouteFieldValue=T("initiate-Route-Field-Value-LinkedTemplate",initiateRouteField),""==t.model.linkedRouteTemplate&&initiateRouteField.classList.add("fonticon-chooser-scope-display");let i=g.replace(g.routeCompletionActionForSelectedTemplate,{tag1:t.model.linkedRouteTemplate});if(new UWA.Element("h5",{class:"required",id:"linkTemplateCompleteActionField",text:i}).inject(initiateRouteFieldLabel).tooltipInfos=y(i),"edit"==e){let e;b=v("routeCompletionActionFor",g.initiateRouteTemplateCompletionActionHelp,initiateRouteFieldLabel);let i={};i.label=g.promoteConnectedObject,i.value="Promote Connected Object";let l={};l.label=g.notifyRouteOwner,l.value="Notify Route Owner",e="Promote Connected Object"==t.model.routeCompletionAction?1:0,h.fields.routeCompletionAction=new a({elementsList:[l,i],enableSearchFlag:!1,selectedIndex:e}),h.fields.routeCompletionAction.domId="rcaforTemplateInInfoPanel",h.fields.routeCompletionAction.inject(initiateRouteFieldValue),h.fields.routeCompletionAction.addEventListener("change",(function(e){n.checkForFieldChange(t,h)}))}else{var D;D="Promote Connected Object"==t.model.routeCompletionAction?g.promoteConnectedObject:g.notifyRouteOwner,new UWA.Element("span",{html:D}).inject(initiateRouteFieldValue).addClassName("valueReadOnly")}if(initiateRouteField.inject(h.fields),initiateRouteField=T("initiate-Route-Field",h.demoteOnRejectionField),initiateRouteFieldLabel=T("initiate-Route-Field-Label",initiateRouteField),initiateRouteFieldWidth=new UWA.Element("div").inject(initiateRouteField),initiateRouteFieldWidth.style.width="2%",initiateRouteFieldValue=T("initiate-Route-Field-Value",initiateRouteField),new UWA.Element("h5",{class:"required",id:"demoteOnRejection",text:g.DemoteOnRejection}).inject(initiateRouteFieldLabel).tooltipInfos=y(g.DemoteOnRejection),"edit"==e){let e;b=v("demoteOnRejection",g.initiateRouteTemplateDemoteOnRejectionHelp,initiateRouteFieldLabel);let i={};i.label=g.no,i.value="No";let l={};l.label=g.yes,l.value="Yes",e="Yes"==t.model.DemoteOnRejection?1:0,h.fields.demoteOnRejection=new a({elementsList:[i,l],enableSearchFlag:!1,selectedIndex:e}),h.fields.demoteOnRejection.inject(initiateRouteFieldValue),h.fields.demoteOnRejection.addEventListener("change",(function(e){n.checkForFieldChange(t,h)}))}else{var I;I="No"==t.model.DemoteOnRejection?g.no:g.yes,new UWA.Element("span",{html:I}).inject(initiateRouteFieldValue).addClassName("valueReadOnly")}h.demoteOnRejectionField.inject(h.fields)}let O=t.model.Scope[0];if("All"!=t.model.Scope[0]&&"Organization"!=t.model.Scope[0]||(O="Organization"==t.model.Scope[0]?g.scopeOrg:g.scopeAll),initiateRouteField=T("initiate-Route-Field",h.fields),initiateRouteFieldLabel=T("initiate-Route-Field-Label",initiateRouteField),initiateRouteFieldWidth=new UWA.Element("div").inject(initiateRouteField),initiateRouteFieldWidth.style.width="2%",initiateRouteFieldValue=T("initiate-Route-Field-Value",initiateRouteField),new UWA.Element("h5",{class:"required",html:g.routeScope}).inject(initiateRouteFieldLabel).tooltipInfos=y(g.routeScope),new UWA.Element("span",{html:O}).inject(initiateRouteFieldValue).addClassName("valueReadOnly"),initiateRouteField=T("initiate-Route-Field",h.fields),initiateRouteFieldLabel=T("initiate-Route-Field-Label",initiateRouteField),initiateRouteFieldWidth=new UWA.Element("div").inject(initiateRouteField),initiateRouteFieldWidth.style.width="2%",initiateRouteFieldValue=T("initiate-Route-Field-Value",initiateRouteField),new UWA.Element("h5",{class1:"required",id:"PreserveTaskOwner",text:g.PreserveTaskOwnerLabel}).inject(initiateRouteFieldLabel).tooltipInfos=y(g.PreserveTaskOwnerLabel),"edit"==e&&"False"==t.model.selectUsersFromUserGroup){b=v("optionRevertUserGroup",g.initiateRouteTemplateRevertUserGroupHelp,initiateRouteFieldLabel);let e=!1,l=!1;"False"==t.model.preserveTaskOwner?l=!0:e=!0;let a=new o({type:"radio",label:g.PreserveTaskOwnerSelect2,value:"False",checkFlag:l});a.tooltipInfos=y(g.PreserveTaskOwnerSelect2);let s=new o({type:"radio",label:g.PreserveTaskOwnerSelect1,value:"True",checkFlag:e});s.tooltipInfos=y(g.PreserveTaskOwnerSelect2),h.fields.buttonGroupPTO=new i({type:"radio"}),h.fields.buttonGroupPTO.addChild(a),h.fields.buttonGroupPTO.addChild(s),h.fields.buttonGroupPTO.inject(initiateRouteFieldValue),h.fields.buttonGroupPTO.addEventListener("change",(function(e){n.checkForFieldChange(t,h)}))}else{let e;e="False"==t.model.preserveTaskOwner?g.PreserveTaskOwnerSelect2:g.PreserveTaskOwnerSelect1;let i=new UWA.Element("div",{html:e}).inject(initiateRouteFieldValue);i.addClassName("valueReadOnly"),i.tooltipInfos=y(e)}var k;if(initiateRouteField=T("initiate-Route-Field",h.fields),initiateRouteFieldLabel=T("initiate-Route-Field-Label",initiateRouteField),initiateRouteFieldWidth=new UWA.Element("div").inject(initiateRouteField),initiateRouteFieldWidth.style.width="2%",initiateRouteFieldValue=T("initiate-Route-Field-Value",initiateRouteField),new UWA.Element("h5",{class:"required",id:"selectUsersFromUserGroup",text:g.ChooseUsersFromUG}).inject(initiateRouteFieldLabel).tooltipInfos=y(g.ChooseUsersFromUG),k="True"!=t.model.selectUsersFromUserGroup?g.no:g.yes,new UWA.Element("span",{html:k}).inject(initiateRouteFieldValue).addClassName("valueReadOnly"),"edit"==e){h.button=new UWA.Element("div",{id:"button",class:"wux-button-icon-placeholder",styles:{bottom:"0px",float:"right",height:"40px"}}).inject(w);var U=new s({name:g.save,value:g.save,className:"primary default medium"});U.inject(h.button),U.addEvents({onClick:function(){var e={};if("Standard"==t.model.BasePurpose){if(""!=t.model.linkedRouteTemplate&&null==h.fields.linkedTemplateField.selectedItems||null!=h.fields.linkedTemplateField.selectedItems&&t.model.linkedRouteTemplate!=h.fields.linkedTemplateField.selectedItems.options.label){if(h.fields.linkedTemplateField.selectedItems&&""!=h.fields.linkedTemplateField.selectedItems.options.label&&(""==h.fields.linkedTemplateField.selectedItems.options.value||null==h.fields.linkedTemplateField.selectedItems.options.value))return d.setNotificationManager(r),void r.addNotif({level:"error",subtitle:g.linkedTemplateSelectMessage,sticky:!1});""!=t.model.linkedRouteTemplate&&null==h.fields.linkedTemplateField.selectedItems?e.linkedRouteTemplateId="":e.linkedRouteTemplateId=h.fields.linkedTemplateField.selectedItems.options.value,null==h.fields.linkedTemplateField.selectedItems?(e.routeCompletionAction="",e.DemoteOnRejection=""):(e.routeCompletionAction=h.fields.routeCompletionAction.value,e.DemoteOnRejection=h.fields.demoteOnRejection.value)}""==h.linkTemplateCompleteActionField.className&&h.fields.routeCompletionAction.value!=t.model.routeCompletionAction&&(e.routeCompletionAction=h.fields.routeCompletionAction.value),""==h.demoteOnRejectionField.className&&h.fields.demoteOnRejection.value!=t.model.DemoteOnRejection&&(e.DemoteOnRejection=h.fields.demoteOnRejection.value)}"False"==t.model.selectUsersFromUserGroup&&t.model.preserveTaskOwner!=h.fields.buttonGroupPTO.value[0]&&(e.preserveTaskOwner=h.fields.buttonGroupPTO.value[0]),c.updateRouteTemplate(e,t.model.id).then((e=>{widget.notify.handler().addNotif({level:"success",subtitle:g.relatedSuccessfulMesaage,sticky:!1}),null!=e[0].linkedRouteTemplate?t.model.linkedRouteTemplate=e[0].linkedRouteTemplate:t.model.linkedRouteTemplate="",null!=e[0].linkedRouteTemplateId?t.model.linkedRouteTemplateId=e[0].linkedRouteTemplateId:t.model.linkedRouteTemplateId="",null!=e[0].routeCompletionAction?t.model.routeCompletionAction=e[0].routeCompletionAction:t.model.routeCompletionAction="",null!=e[0].DemoteOnRejection?t.model.DemoteOnRejection=e[0].DemoteOnRejection:t.model.DemoteOnRejection="","False"==e[0].selectUsersFromUserGroup&&(t.model.preserveTaskOwner=e[0].preserveTaskOwner),R.build("edit",t),widget.routeMgmtMediator.publish("template-data-updated",e[0])}),(e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:g.errorModify,sticky:!1})}))}});C=new UWA.Element("div",{html:"&nbsp;",styles:{display:"inline-block"}}).inject(h.button);var V=new s({name:g.cancel,value:g.cancel,className:"default medium"});V.addEvents({onClick:function(){R.build("edit",t)}}),V.inject(h.button),h.button.style.visibility="hidden"}},S=function(e,t){if("Standard"==e.model.BasePurpose){if(""!=e.model.linkedRouteTemplate&&null==t.fields.linkedTemplateField.selectedItems||null!=t.fields.linkedTemplateField.selectedItems&&e.model.linkedRouteTemplate!=t.fields.linkedTemplateField.selectedItems.options.label)return!1;if(""==t.linkTemplateCompleteActionField.className&&t.fields.routeCompletionAction.value!=e.model.routeCompletionAction)return!1;if(""==t.demoteOnRejectionField.className&&t.fields.demoteOnRejection.value!=e.model.DemoteOnRejection)return!1}return"False"!=e.model.selectUsersFromUserGroup||e.model.preserveTaskOwner==t.fields.buttonGroupPTO.value[0]},R={build:(e,t)=>function(e,t){h={},w(e,t)}(e,t)};return R})),define("DS/ENORouteTemplateMgmt/Views/TemplateRelatedObjInfo",["DS/EditPropWidget/facets/Common/FacetsBase","DS/ENORouteTemplateMgmt/Views/Form/RelatedObjectForm","DS/ENORouteMgmt/Controller/RouteServicesController","DS/ENORouteMgmt/Utilities/DataFormatter","DS/ENORouteMgmt/Utilities/RouteViewUtils","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a){"use strict";let n,s,r,d;var c=e.extend({init:function(){this._parent.apply(this,arguments),this.elements.container=new UWA.Element("div",{id:"TemplateRelatedObjectFields",class:""})},updateFacet:function(){let e=this,t=e.getModel();if(1==t.isMergedModel())return;if(!t)return!1;let o=t.get("objectId");i.fetchRouteTemplateById(o).then((function(t){e.elements.container.setContent("");let i={};t&&t.data&&t.data.length>0&&(t.data[0].dataelements.id=t.data[0].id,i=l.templateGridData(t.data[0].dataelements)),m(i).inject(e.elements.container)}))},destroyComponent:function(){},onResize:function(){},onRefresh:function(){this.updateFacet()}});let u=function(e,t){return o.createNewElement(e,t)},p=function(e){return o.getElementToolTip(e)},m=function(e){o.makeResponsiveCss("initiateRouteTemplate","#TemplateRelatedObjectFields");let i={};if(i=new UWA.Element("div",{id:"RelatedObjectContainer",class:"RelatedObjectContainer",styles:{top:"2px",height:"100%"}}),i.fields={},i.formFields=new UWA.Element("div",{id:"",class:"RelatedObjectFields",styles:{height:"calc(100% - 84px)"}}),"Inactive"==e.actualState&&-1!=e.Actions.indexOf("modify")){var l=new UWA.Element("div",{html:"<br><br>"});i.Toolbar=new UWA.Element("div",{id:"EditToolbar",class:"wux-button-icon-placeholder"}),new UWA.Element("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-pencil wux-ui-3ds-lg",title:a.editMode,styles:{"font-size":"20px",position:"absolute",right:"16px",cursor:"pointer",margin:"0px",height:"auto"},events:{click:function(i){let l={};l.model=e,t.build("edit",l)}}}).inject(i.Toolbar),l.inject(i.Toolbar),i.Toolbar.inject(i),i.formFields.addEventListener("dblclick",(function(i){let l={};l.model=e,t.build("edit",l)}))}if(i.formFields.inject(i),"Standard"==e.BasePurpose){null==e.linkedRouteTemplate&&(e.linkedRouteTemplate="",e.linkedRouteTemplateId=""),n=u("initiate-Route-Field",i.formFields),s=u("initiate-Route-Field-Label",n),r=new UWA.Element("div").inject(n),r.style.width="2%",d=u("initiate-Route-Field-Value",n),new UWA.Element("h5",{text:a.StartRouteOnCompletion,class:"required"}).inject(s).tooltipInfos=p(a.StartRouteOnCompletion);let t=new UWA.Element("div",{html:e.linkedRouteTemplate}).inject(d);if(t.addClassName("valueReadOnly"),t.tooltipInfos=p(e.linkedRouteTemplate),""!=e.linkedRouteTemplate){var c;null==e.routeCompletionAction&&(e.routeCompletionAction=""),c="Promote Connected Object"==e.routeCompletionAction?a.promoteConnectedObject:a.notifyRouteOwner,n=u("initiate-Route-Field",i.formFields),s=u("initiate-Route-Field-Label",n),r=new UWA.Element("div").inject(n),r.style.width="2%",d=u("initiate-Route-Field-Value",n),new UWA.Element("h5",{text:a.replace(a.routeCompletionActionForSelectedTemplate,{tag1:e.linkedRouteTemplate}),class:"required"}).inject(s).tooltipInfos=p(e.linkedRouteTemplate);let t=new UWA.Element("span",{html:c}).inject(d);var m;t.tooltipInfos=p(c),t.addClassName("valueReadOnly"),null==e.DemoteOnRejection&&(e.DemoteOnRejection=""),m="No"==e.DemoteOnRejection?a.no:a.yes,n=u("initiate-Route-Field",i.formFields),s=u("initiate-Route-Field-Label",n),r=new UWA.Element("div").inject(n),r.style.width="2%",d=u("initiate-Route-Field-Value",n),new UWA.Element("h5",{text:a.DemoteOnRejection,class:"required"}).inject(s).tooltipInfos=p(a.DemoteOnRejection),new UWA.Element("div",{html:m}).inject(d).addClassName("valueReadOnly")}}let f,g=e.Scope[0];"All"!=e.Scope[0]&&"Organization"!=e.Scope[0]||(g="Organization"==e.Scope[0]?a.scopeOrg:a.scopeAll),n=u("initiate-Route-Field",i.formFields),s=u("initiate-Route-Field-Label",n),r=new UWA.Element("div").inject(n),r.style.width="2%",d=u("initiate-Route-Field-Value",n),new UWA.Element("h5",{text:a.routeScope,class:"required"}).inject(s).tooltipInfos=p(a.routeScope),new UWA.Element("span",{html:g}).inject(d).addClassName("valueReadOnly"),f="False"==e.preserveTaskOwner?a.PreserveTaskOwnerSelect2:a.PreserveTaskOwnerSelect1,n=u("initiate-Route-Field",i.formFields),s=u("initiate-Route-Field-Label",n),r=new UWA.Element("div").inject(n),r.style.width="2%",d=u("initiate-Route-Field-Value",n),new UWA.Element("h5",{text:a.PreserveTaskOwnerLabel,class:"required"}).inject(s).tooltipInfos=p(a.PreserveTaskOwnerLabel);let h=new UWA.Element("div",{html:f}).inject(d);var b;return h.addClassName("valueReadOnly"),h.tooltipInfos=p(f),b="True"!=e.selectUsersFromUserGroup?a.no:a.yes,n=u("initiate-Route-Field",i.formFields),s=u("initiate-Route-Field-Label",n),r=new UWA.Element("div").inject(n),r.style.width="2%",d=u("initiate-Route-Field-Value",n),new UWA.Element("h5",{text:a.ChooseUsersFromUG,class:"required"}).inject(s).tooltipInfos=p(a.ChooseUsersFromUG),new UWA.Element("span",{html:b}).inject(d).addClassName("valueReadOnly"),i};return c})),define("DS/ENORouteTemplateMgmt/Views/Form/TemplateAppliesToInEditMode",["DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteTemplateMgmt/Actions/TemplateAppliesToAction","DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToGridSection","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/DatePicker","DS/Controls/ComboBox","DS/TreeModel/TreeNodeModel","DS/TreeModel/TreeDocument","DS/WUXAutoComplete/AutoComplete","DS/Controls/LineEditor","DS/ENORouteMgmt/Utilities/PlaceHolder","DS/ENORouteMgmt/Utilities/RouteViewUtils","DS/Controls/TooltipModel","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteTemplateMgmt/Config/AppliesToBasicField","DS/ENORouteMgmt/Utilities/EnoWidgetDataUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],(function(e,t,i,l,o,a,n,s,r,d,c,u,p,m,f,g,h,b){"use strict";let T,v,y,w,S,R,C,F,E,M,A,N=function(t,i,l){var o;S={},R={},C={},M={},A={},y=t,F={},F.policy=!1,F.type=!1,F.subType=!1,F.maturityState=!1,F.attributeCases=!1,F.attributeName=!1,F.attributeValue=!1,F.collabSpace=!1,F.organization=!1,w=l,t.getChildren().length>0&&(o=t.getChildren()[0].options.grid),E=h.getRouteContentSearchTypes(),E=E?E.split(","):"",p.makeResponsiveCss("routeTemplateAppliesTo",".template-appliesTo-containe "),T={},e.fetchSupportedPolicies().then((e=>{if(T.appliesToSelection.className="",v.formFooter.className="",T.fields.policy.elementsTree=new r,e&&e.lifecycleDescription){for(var t,i=0;i<e.lifecycleDescription.length;i++){var l=new s({label:e.lifecycleDescription[i].title,value:e.lifecycleDescription[i].id});R[e.lifecycleDescription[i].id]=e.lifecycleDescription[i].forbiddenTransitions,M[e.lifecycleDescription[i].id]=e.lifecycleDescription[i].forbiddenTypes;for(var a=e.lifecycleDescription[i].governedType,n=[],d=0;d<a.length;d++)E.includes(a[d].typeID)&&(A[a[d].typeID]=a[d].typeNLS,n.push(a[d].typeID+"~"+a[d].typeNLS),C[a[d].typeID]=a[d].forbiddenAttributes);S[e.lifecycleDescription[i].id]=n,T.fields.policy.elementsTree.addChild(l),0==F.policy&&o&&e.lifecycleDescription[i].id==o.objPolicy&&(F.policy=!0,t=l)}T.fields.policy._applyElementsTree(),t&&(T.fields.policy.selectedItems=t,T.policyField.className="",o&&o.attributeName&&(T.fields.criteriaCheckbox.checkFlag=!0,T.fields.criteriaSelection.value="Attribute"),o&&null!=o.collaboration&&(T.fields.criteriaCheckbox.checkFlag=!0,T.fields.criteriaSelection.value="Credentials",(J()&&w.Actions&&w.Actions.includes("promote")||o&&null!=o.collaboration&&""!=o.collaboration)&&(T.collabSpaceField.className="",null!=T.fields.collabSpace.selectedItems&&(T.organizationField.className=""))))}}),(e=>console.log(e))),D(i)},D=function(t){let l,a,c,u;var p=!0;0==y.getChildren().length&&(p=!1);document.getElementById("#appliesToContainer");var f;T.formFields=new UWA.Element("div",{id:"appliesToPropertiesformBodyInEditMode",class:"appliesTo-prop-body-in-edit-mode"}),T.typeField=new UWA.Element("div",{id:"typeFieldDiv",class:"fonticon-chooser-scope-display"}),T.subTypeSelectionCheckBox=new UWA.Element("div",{id:"subTypeSelectionCheckBox",class:"fonticon-chooser-scope-display"}),T.subTypeField=new UWA.Element("div",{id:"subTypeField",class:"fonticon-chooser-scope-display"}),T.policyField=new UWA.Element("div",{id:"policyFieldDiv",class:"fonticon-chooser-scope-display"}),T.maturityTransitionField=new UWA.Element("div",{id:"maturityTransitionFieldDiv",class:"fonticon-chooser-scope-display"}),T.criteriaSelectionCheckBox=new UWA.Element("div",{id:"criteriaSelectionCheckBox",class:"fonticon-chooser-scope-display"}),T.criteriaSelectionField=new UWA.Element("div",{id:"criteriaSelectionField",class:"fonticon-chooser-scope-display"}),T.attributeNameField=new UWA.Element("div",{id:"attributeNameField",class:"fonticon-chooser-scope-display"}),T.attributeValueField=new UWA.Element("div",{id:"attributeValueField",class:""}),T.collabSpaceField=new UWA.Element("div",{id:"collabSpaceField",class:"fonticon-chooser-scope-display"}),T.organizationField=new UWA.Element("div",{id:"organizationField",class:"fonticon-chooser-scope-display"}),T.fields={},T.formFields.inject(t),T.appliesToSelection=new UWA.Element("div",{id:"appliesToSelection",class:"fonticon-chooser-scope-display"}).inject(T.formFields),T.fields.enableApplicability=new o({type:"checkbox",label:b.enableApplicability,checkFlag:p}).inject(T.appliesToSelection),T.appliesToSelection.tooltipInfos=P(b.enableApplicability),T.fields.enableApplicability.addEventListener("change",(function(e){var l;1==e.dsModel.checkFlag?(i.updateGridViewSection(t,T.fields),T.policyField.className="",null!=T.fields.policy.selectedItems&&(T.typeField.className="",T.maturityTransitionField.className="",T.fields.type.selectedItems&&(T.criteriaSelectionCheckBox.className="",T.subTypeSelectionCheckBox.className="",0!=T.fields.subTypeCheckbox.checkFlag&&(T.subTypeField.className="")),0!=T.fields.criteriaCheckbox.checkFlag&&(T.criteriaSelectionField.className="","Credentials"==T.fields.criteriaSelection.value?(y.getChildren().length>0&&(l=y.getChildren()[0].options.grid),(J()&&w.Actions&&w.Actions.includes("promote")||l&&null!=l.collaboration&&""!=l.collaboration)&&(T.collabSpaceField.className="",null!=T.fields.collabSpace.selectedItems&&(T.organizationField.className=""))):"Attribute"==T.fields.criteriaSelection.value&&(T.attributeNameField.className="",T.attributeValueField.className="")))):(i.updateGridViewSection(),T.typeField.className="fonticon-chooser-scope-display",T.subTypeSelectionCheckBox.className="fonticon-chooser-scope-display",T.subTypeField.className="fonticon-chooser-scope-display",T.policyField.className="fonticon-chooser-scope-display",T.maturityTransitionField.className="fonticon-chooser-scope-display",T.criteriaSelectionCheckBox.className="fonticon-chooser-scope-display",T.criteriaSelectionField.className="fonticon-chooser-scope-display",T.attributeNameField.className="fonticon-chooser-scope-display",T.attributeValueField.className="fonticon-chooser-scope-display",T.collabSpaceField.className="fonticon-chooser-scope-display",T.organizationField.className="fonticon-chooser-scope-display");v.buttons.save.disabled=j()})),l=W("initiate-Template-AppliesTo-Field",T.policyField),a=W("initiate-Template-AppliesTo-Field-Label",l),c=new UWA.Element("div").inject(l),c.style.width="2%",u=W("initiate-Template-AppliesTo-Field-Value",l),(f=new UWA.Element("h5",{id:"policyField",class:"required",text:b.appliesToPolicy}).inject(a)).tooltipInfos=P(b.appliesToPolicy),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(f),T.fields.policy=new d({multiSearchMode:!1,elementsTree:[],allowFreeInputFlag:!1}).inject(u),L("appiliesToPolicyInfo",b.appliesToPolicyHelp,a),T.policyField.inject(T.formFields),T.fields.policy.addEventListener("change",(function(e){let l=T.fields.policy.selectedItems;i.updateGridViewSection(t,T.fields),l?(null!=T.fields.type.selectedItems&&(T.fields.type.selectedItems=void 0),k(T.fields.policy.selectedItems.options.value),O(),T.maturityTransitionField.className="",T.typeField.className="",T.fields.type.selectedItems&&(T.criteriaSelectionCheckBox.className="")):(T.fields.maturityState.elementsTree=new r,T.fields.type.selectedItems=void 0,T.fields.subType.selectedItems=void 0,T.fields.subTypeCheckbox.checkFlag=!1,T.fields.criteriaCheckbox.checkFlag=!1,T.maturityTransitionField.className="fonticon-chooser-scope-display",T.typeField.className="fonticon-chooser-scope-display",T.criteriaSelectionCheckBox.className="fonticon-chooser-scope-display",T.criteriaSelectionField.className="fonticon-chooser-scope-display",T.attributeNameField.className="fonticon-chooser-scope-display",T.attributeValueField.className="fonticon-chooser-scope-display",T.collabSpaceField.className="fonticon-chooser-scope-display",T.organizationField.className="fonticon-chooser-scope-display"),v.buttons.save.disabled=j()})),l=W("initiate-Template-AppliesTo-Field",T.typeField),a=W("initiate-Template-AppliesTo-Field-Label",l),c=new UWA.Element("div").inject(l),c.style.width="2%",u=W("initiate-Template-AppliesTo-Field-Value",l),u.style.marginTop="10px !important",(f=new UWA.Element("h5",{id:"typeField",text:b.appliesToType}).inject(a)).tooltipInfos=P(b.appliesToType),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(f),T.fields.type=new d({multiSearchMode:!1,allowFreeInputFlag:!1,elementsTree:function(){return new Promise((function(t,i){e.fetchStateTransitions(T.fields.policy.selectedItems.options.value.replaceAll(" ","%20")).then((e=>{e&&e.governedType&&I(e.governedType,t)}))}))}}).inject(u),L("appiliesToTypeInfo",b.appliesToTypeHelp,a),T.typeField.inject(T.formFields),T.fields.type.addEventListener("change",(function(e){i.updateGridViewSection(t,T.fields);let l=T.fields.type.selectedItems;l?(null!=T.fields.subType.selectedItems&&(T.fields.subType.selectedItems=void 0),T.subTypeSelectionCheckBox.className="",T.criteriaSelectionCheckBox.className="",X(),U(l.options.value),V()):(T.subTypeSelectionCheckBox.className="fonticon-chooser-scope-display",T.subTypeField.className="fonticon-chooser-scope-display",T.fields.subTypeCheckbox.checkFlag=!1,T.criteriaSelectionCheckBox.className="fonticon-chooser-scope-display",T.fields.criteriaCheckbox.checkFlag=!1,T.fields.criteriaSelection.selectedIndex=-1,T.fields.attributeCases.selectedIndex=0,T.fields.attributeName.elementsTree=new r,T.fields.subType.selectedItems=void 0),v.buttons.save.disabled=j()})),T.typeField.inject(T.formFields),T.fields.subTypeCheckbox=new o({type:"checkbox",label:b.subTypeSelection}).inject(T.subTypeSelectionCheckBox),T.fields.subTypeCheckbox.addEventListener("change",(function(e){1==e.dsModel.checkFlag?T.subTypeField.className="":T.subTypeField.className="fonticon-chooser-scope-display",v.buttons.save.disabled=j()})),T.subTypeSelectionCheckBox.tooltipInfos=P(b.subTypeSelection),T.subTypeSelectionCheckBox.inject(T.formFields),l=W("initiate-Template-AppliesTo-Field",T.subTypeField),a=W("initiate-Template-AppliesTo-Field-Label",l),c=new UWA.Element("div").inject(l),c.style.width="2%",u=W("initiate-Template-AppliesTo-Field-Value",l),(f=new UWA.Element("h5",{class:"required",text:b.applyToSelectedType}).inject(a)).tooltipInfos=P(b.applyToSelectedType),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(f),T.fields.subType=new d({multiSearchMode:!0,elementsTree:[],allowFreeInputFlag:!1,elementsTree:function(){return new Promise((function(t,i){var l=new r;e.getSubTypes(T.fields.type.selectedItems.options.value).then((e=>{if(e&&e.data[0]){var i=new s({label:T.fields.type.selectedItems.options.label,value:T.fields.type.selectedItems.options.value});K(i,e.data[0].children),l.addChild(i),l.expandAll(),t(l)}}))}))}}).inject(u),T.subTypeField.inject(T.formFields),L("appiliesToSubTypeInfo",b.applyToSelectedTypeHelp,a),T.fields.subType.addEventListener("change",(function(e){v.buttons.save.disabled=j()})),l=W("initiate-Template-AppliesTo-Field",T.maturityTransitionField),a=W("initiate-Template-AppliesTo-Field-Label",l),c=new UWA.Element("div").inject(l),c.style.width="2%",u=W("initiate-Template-AppliesTo-Field-Value",l),(f=new UWA.Element("h5",{id:"maturityTransitionField",class:"required",text:b.maturityTransition}).inject(a)).tooltipInfos=P(b.maturityTransition),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(f),T.fields.maturityState=new d({multiSearchMode:!1,elementsTree:[],allowFreeInputFlag:!1}).inject(u),L("appiliesToMaturityTrasnitionInfo",b.maturityTransitionHelp,a),T.maturityTransitionField.inject(T.formFields),T.fields.maturityState.addEventListener("change",(function(e){i.updateGridViewSection(t,T.fields),v.buttons.save.disabled=j()})),T.fields.criteriaCheckbox=new o({type:"checkbox",label:b.criteriaCheckbox}).inject(T.criteriaSelectionCheckBox),T.criteriaSelectionCheckBox.tooltipInfos=P(b.criteriaCheckbox),T.criteriaSelectionCheckBox.inject(T.formFields),T.fields.criteriaCheckbox.addEventListener("change",(function(e){var l;(i.updateGridViewSection(t,T.fields),1==e.dsModel.checkFlag)?(T.criteriaSelectionField.className="","Credentials"==T.fields.criteriaSelection.value?(y.getChildren().length>0&&(l=y.getChildren()[0].options.grid),(J()&&w.Actions&&w.Actions.includes("promote")||l&&null!=l.collaboration&&""!=l.collaboration)&&(T.collabSpaceField.className="",null!=T.fields.collabSpace.selectedItems&&(T.organizationField.className=""))):"Attribute"==T.fields.criteriaSelection.value&&(T.attributeNameField.className="",null!=T.fields.attributeName.selectedItems&&(T.attributeValueField.className=""))):(T.criteriaSelectionField.className="fonticon-chooser-scope-display",T.attributeNameField.className="fonticon-chooser-scope-display",T.attributeValueField.className="fonticon-chooser-scope-display",T.collabSpaceField.className="fonticon-chooser-scope-display",T.organizationField.className="fonticon-chooser-scope-display");v.buttons.save.disabled=j()})),l=W("initiate-Template-AppliesTo-Field",T.criteriaSelectionField),a=W("initiate-Template-AppliesTo-Field-Label",l),c=new UWA.Element("div").inject(l),c.style.width="2%",u=W("initiate-Template-AppliesTo-Field-Value",l),(f=new UWA.Element("h5",{class:"required",text:b.criteria}).inject(a)).tooltipInfos=P(b.criteria),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(f),T.fields.criteriaSelection=new n({elementsList:[{label:b.appliesToAttribute,value:"Attribute"},{label:b.credentials,value:"Credentials"}],enableSearchFlag:!1,placeholder:b.criteriaSelection,reachablePlaceholderFlag:!0}).inject(u),L("appiliesToCriteriaSelectionInfo",b.criteriaSelectionHelp,a),T.criteriaSelectionField.inject(T.formFields),T.fields.criteriaSelection.addEventListener("change",(function(e){var l;(i.updateGridViewSection(t,T.fields),1==e.dsModel.selectedIndex)?(T.attributeNameField.className="fonticon-chooser-scope-display",T.attributeValueField.className="fonticon-chooser-scope-display",y.getChildren().length>0&&(l=y.getChildren()[0].options.grid),(J()&&w.Actions&&w.Actions.includes("promote")||l&&null!=l.collaboration&&""!=l.collaboration)&&(T.collabSpaceField.className="",null!=T.fields.collabSpace.selectedItems&&(T.organizationField.className=""))):0==e.dsModel.selectedIndex?(T.collabSpaceField.className="fonticon-chooser-scope-display",T.organizationField.className="fonticon-chooser-scope-display",T.attributeNameField.className="",null!=T.fields.attributeName.selectedItems&&(T.attributeValueField.className="")):(T.fields.attributeName.value=void 0,T.collabSpaceField.className="fonticon-chooser-scope-display",T.organizationField.className="fonticon-chooser-scope-display",T.attributeNameField.className="fonticon-chooser-scope-display",T.attributeValueField.className="fonticon-chooser-scope-display");v.buttons.save.disabled=j()})),l=W("initiate-Template-AppliesTo-Field",T.attributeNameField),a=W("initiate-Template-AppliesTo-Field-Label",l),c=new UWA.Element("div").inject(l),c.style.width="2%",u=W("initiate-Template-AppliesTo-Field-Value",l),(f=new UWA.Element("h5",{class:"required",text:b.appliesToAttributeName}).inject(a)).tooltipInfos=P(b.appliesToAttributeName),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(f);let g=W("initiateAppliesToAttribute",u);T.fields.attributeName=new d({multiSearchMode:!1,elementsTree:[],allowFreeInputFlag:!1}).inject(g),L("appiliesToAttributeNameInfo",b.appliesToAttributeNameHelp,a),T.fields.attributeName.addEventListener("change",(function(e){q(),v.buttons.save.disabled=j()})),c=new UWA.Element("div").inject(u),c.style.width="2%";let h=W("initiateAppliesToAttributeComboboxField",u);return T.fields.attributeCases=new n({elementsList:[b.is],enableSearchFlag:!1,actionOnClickFlag:!0}).inject(h),T.fields.attributeCases.tooltipInfos=new m({shortHelp:T.fields.attributeCases.currentLabel}),T.fields.attributeCases.addEventListener("change",(function(e){T.fields.attributeCases.tooltipInfos=new m({shortHelp:e.dsModel.currentLabel}),v.buttons.save.disabled=j()})),T.attributeNameField.inject(T.formFields),l=W("initiate-Template-AppliesTo-Field",T.collabSpaceField),a=W("initiate-Template-AppliesTo-Field-Label",l),c=new UWA.Element("div").inject(l),c.style.width="2%",u=W("initiate-Template-AppliesTo-Field-Value",l),(f=new UWA.Element("h5",{id:"collabSpaceField",class:"required",text:b.appliesToCollabSpace}).inject(a)).tooltipInfos=P(b.appliesToCollabSpace),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(f),T.fields.collabSpace=new d({multiSearchMode:!1,allowFreeInputFlag:!1,elementsTree:function(){return new Promise((function(t,i){var l=new r;e.fetchCollabSpaces().then((e=>{if(e&&e.items)for(var i=0;i<e.items.length;i++){var o=new s({label:e.items[i].title,value:e.items[i].name});l.addChild(o)}t(l)}))}))}}).inject(u),L("appiliesToCollabSpaceInfo",b.appliesToCollabSpaceHelp,a),T.collabSpaceField.inject(T.formFields),T.fields.collabSpace.addEventListener("change",(function(e){null!=T.fields.collabSpace.selectedItems?(x(T.fields.collabSpace.selectedItems.options.value),T.organizationField.className=""):T.organizationField.className="fonticon-chooser-scope-display",v.buttons.save.disabled=j()})),l=W("initiate-Template-AppliesTo-Field",T.organizationField),a=W("initiate-Template-AppliesTo-Field-Label",l),c=new UWA.Element("div").inject(l),c.style.width="2%",u=W("initiate-Template-AppliesTo-Field-Value",l),(f=new UWA.Element("h5",{id:"OrganizationField",class:"required",text:b.Organization}).inject(a)).tooltipInfos=P(b.Organization),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(f),T.fields.organization=new d({multiSearchMode:!1,elementsTree:[],allowFreeInputFlag:!1}).inject(u),L("appiliesToCollabSpaceInfo",b.organizationHelp,a),T.organizationField.inject(T.formFields),T.fields.organization.addEventListener("change",(function(e){v.buttons.save.disabled=j()})),T},I=function(e,t){for(var i=new r,l=0;l<e.length;l++)if(E.includes(e[l].typeID)&&!M[T.fields.policy.selectedItems.options.value].includes(e[l].typeID)){var o=new s({label:A[e[l].typeID],value:e[l].typeID});i.addChild(o)}t(i)},O=function(){if(0==F.type&&y.getChildren().length>0&&y.getChildren()[0].options.grid&&y.getChildren()[0].options.grid.objType&&""!=y.getChildren()[0].options.grid.objType){var e=y.getChildren()[0].options.grid,t=new s({label:e.objType_nls,value:e.objType});T.fields.type.selectedItems=t,F.type=!0}},k=function(t){e.fetchStateTransitions(t.replaceAll(" ","%20")).then((e=>{var i=e.state,l={},o=0,a={},n=[];if(i)for(var d=0;d<i.length;d++)"true"==i[d].isDefault&&(l[i[d].id]=i[d].stateUserName,a[i[d].id]=o,n[o++]=i[d].id);var c,u,p=e.transition;if(y.getChildren().length>0&&(u=y.getChildren()[0].options.grid),p){T.fields.maturityState.elementsTree=new r;var m=R[t],f=[];e:for(d=0;d<p.length;d++)if("false"==p[d].isForbidden&&a[p[d].sourceState]<a[p[d].targetState]&&!f.includes(p[d].sourceState+"|"+p[d].targetState)){for(var g=0;g<m.length;g++)if(p[d].sourceState==m[g].sourceState&&p[d].targetState==m[g].targetState)continue e;f.push(p[d].sourceState+"|"+p[d].targetState)}for(d=0;d<n.length;d++)for(g=d+1;g<n.length;g++)if(f.includes(n[d]+"|"+n[g])){var h=new s({label:l[n[d]]+" to "+l[n[g]],value:n[d]+"|"+n[g]});0==F.maturityState&&u&&u.fromState==n[d]&&u.toState==n[g]&&(F.maturityState=!0,c=h),T.fields.maturityState.elementsTree.addChild(h)}T.fields.maturityState._applyElementsTree(),c&&(T.fields.maturityState.selectedItems=c,c=void 0)}}))},U=function(t){var i={data:[]},l={};l.name=t,i.data.push(l),e.fetchAttributeList(i).then((e=>{var i=e.data[0].attributes;if(i=i.concat(g)){null!=T.fields.attributeName.selectedItems&&(T.fields.attributeName.selectedItems=void 0),T.fields.attributeName.elementsTree=new r;for(var l,o=C[t],a=0;a<i.length;a++)if(!o.includes(i[a].name)){var n;n=i[a].label.contains("emxFramework.Attribute")?i[a].name:i[a].label;var d,c=new s({label:n,value:i[a].name});c.options.grid=i[a],y.getChildren().length>0&&(d=y.getChildren()[0].options.grid),0==F.attributeName&&d&&i[a].name==d.attributeName&&(F.attributeName=!0,l=c,T.fields.criteriaCheckbox.checkFlag=!0),T.fields.attributeName.elementsTree.addChild(c)}T.fields.attributeName._applyElementsTree(),l&&(T.fields.attributeName.selectedItems=l)}}))},V=function(){var e,t;y.getChildren().length>0&&(t=y.getChildren()[0].options.grid),0==F.collabSpace&&t&&t.collaboration&&t.project_title&&t.organization_title&&(F.collabSpace=!0,e=new s({label:t.project_title,value:t.collaboration.split(".")[0]}),T.fields.collabSpace.selectedItems=e,w.Actions&&!w.Actions.includes("promote")&&w.Actions.includes("add.tasks")&&(T.fields.collabSpace.disabled=!0))},x=function(t){var i,l;t=t.replaceAll(" ","%20"),T.fields.organization.elementsTree=new r,y.getChildren().length>0&&(l=y.getChildren()[0].options.grid),w.Actions&&!w.Actions.includes("promote")&&w.Actions.includes("add.tasks")?0==F.organization&&l&&l.collaboration&&l.organization_title&&(F.organization=!0,i=new s({label:l.organization_title,value:l.collaboration.split(".")[1]}),T.fields.organization.selectedItems=i,T.fields.organization.disabled=!0):e.fetchOrganizationFromCollabSpaces(t).then((e=>{if(e&&e.organizations){for(var t=0;t<e.organizations.length;t++){var l,o=new s({label:e.organizations[t].title,value:e.organizations[t].name});y.getChildren().length>0&&(l=y.getChildren()[0].options.grid),0==F.organization&&l&&l.collaboration&&e.organizations[t].name==l.collaboration.split(".")[1]&&(F.organization=!0,i=o),T.fields.organization.elementsTree.addChild(o)}T.fields.organization._applyElementsTree(),i&&(T.fields.organization.selectedItems=i)}}))},j=function(){var e,t,i,l,o,a,n,s,r,d;if(0==T.fields.enableApplicability.checkFlag&&y.getChildren().length>0)return!1;if(y.getChildren().length>0){var c=y.getChildren()[0].options.grid;e=c.objPolicy,t=c.objType,i=c.fromState,l=c.toState,o=c.attributeName,a=c.attributeValue,n=c.attributeCondition,s=c.collaboration,r=c.criteria,d=c.subType}if(null==T.fields.policy.selectedItems||null==T.fields.type.selectedItems||null==T.fields.maturityState.selectedItems)return!0;if(T.fields.criteriaCheckbox.checkFlag){if(-1==T.fields.criteriaSelection.selectedIndex)return!0;if("Attribute"==T.fields.criteriaSelection.value){if(null==T.fields.attributeName.selectedItems)return!0;if(T.fields.attributeValue&&"isempty"!==T.fields.attributeCases.value&&"isnotempty"!=T.fields.attributeCases.value&&""==T.fields.attributeValue.value)return!0}if("Credentials"==T.fields.criteriaSelection.value){if(""==T.collabSpaceField.className&&null==T.fields.collabSpace.selectedItems)return!0;if(""==T.organizationField.className&&null==T.fields.organization.selectedItems)return!0}}if(T.fields.subTypeCheckbox.checkFlag&&(null==T.fields.subType.selectedItems||0==T.fields.subType.selectedItems.length))return!0;if(T.fields.policy.selectedItems.options.value!=e)return!1;if(T.fields.type.selectedItems.options.value!=t)return!1;if(T.fields.maturityState.selectedItems.options.value.split("|")[0]!=i)return!1;if(T.fields.maturityState.selectedItems.options.value.split("|")[1]!=l)return!1;if(0==T.fields.subTypeCheckbox.checkFlag&&0==T.fields.criteriaCheckbox.checkFlag&&(""==d||null==d)&&""==r)return!0;if(0==T.fields.subTypeCheckbox.checkFlag&&""!=d&&null!=d)return!1;if(0==T.fields.criteriaCheckbox.checkFlag&&""!=r)return!1;if(1==T.fields.subTypeCheckbox.checkFlag){if(null==d||""==d)return!1;for(var u=T.fields.subType.selectedItems,p=[],m=0;m<u.length;m++)p.push(u[m].options.value);var f=c.subType.split(","),g=[];for(let e=0;e<f.length;e++)g.push(f[e].split("~")[0]);if(g.sort().toString()!=p.sort().toString())return!1}if(1==T.fields.criteriaCheckbox.checkFlag){if("Attribute"==T.fields.criteriaSelection.value){if(""==r)return!1;if(T.fields.attributeName.selectedItems.options.value!=o)return!1;if(T.fields.attributeCases.value!=n)return!1;if(T.fields.attributeValue&&"isempty"!==T.fields.attributeCases.value&&"isnotempty"!==T.fields.attributeCases.value&&T.fields.attributeValue.value!=a){if("date"!=T.fields.attributeName.selectedItems.options.grid.type)return!1;var h=a;if(a&&a.contains("%")&&(h=a.split("%")[0]),Date.parse(T.fields.attributeValue.value.toGMTString())!=Date.parse(new Date(h).toGMTString()))return!1}if(T.fields.attributeValue1&&"between"==T.fields.attributeCases.value&&a&&a.contains("%")&&Date.parse(T.fields.attributeValue1.value.toGMTString())!=Date.parse(new Date(a.split("%")[1]).toGMTString()))return!1}if("Credentials"==T.fields.criteriaSelection.value){if("fonticon-chooser-scope-display"==T.collabSpaceField.className&&"fonticon-chooser-scope-display"==T.organizationField.className&&""==s)return!0;if(""==r)return!1;if(null==s)return!1;if(T.fields.collabSpace.selectedItems.options.value!=s.split(".")[0])return!1;if(T.fields.organization.selectedItems.options.value!=s.split(".")[1])return!1}}return!0},W=function(e,t){return p.createNewElement(e,t)},L=function(e,t,i){return p.createTooltipElement(e,t,i)},P=function(e){return p.getElementToolTip(e)},_=function(e,t){if(null==T.fields.attributeValue){var i=new Date;t&&(i=t.contains("%")?new Date(t.split("%")[0]):new Date(t)),T.fields.attributeValue=new a({value:i,timePickerFlag:!0,timePickerPrecision:"sec"})}if("between"==T.fields.attributeCases.value){var l=new UWA.Element("div",{id:"dateField",class:""});l.style.width="100%";var o=new UWA.Element("div",{id:"dateFrom",class:""}),n=new UWA.Element("div",{id:"dateTo",class:""});T.fields.attributeValue.inject(o),new UWA.Element("div",{html:"&nbsp;"}).inject(o),new UWA.Element("div",{id:"dateValueSeparator",text:b.and}).inject(o),o.inject(l);i=new Date;t&&(i=new Date(t.split("%")[1])),null==T.fields.attributeValue1&&(T.fields.attributeValue1=new a({value:i,timePickerFlag:!0,timePickerPrecision:"sec"})),T.fields.attributeValue1.inject(n),T.fields.attributeValue1.addEventListener("change",(function(e){T.fields.attributeValue1.value=e.dsModel.value,v.buttons.save&&(v.buttons.save.disabled=j())})),n.inject(l),l.inject(e)}else T.fields.attributeValue.inject(e)},q=function(e,t){if(T.attributeValueField.innerHTML="",void 0!==T.fields.attributeName.value){T.attributeValueField.innerHTML="",T.attributeValueField.className="";let e=W("initiate-Template-AppliesTo-Field",T.attributeValueField),t=W("initiate-Template-AppliesTo-Field-Label",e);new UWA.Element("div").inject(e).style.width="2%";let i=W("initiate-Template-AppliesTo-Field-Value",e),l=new UWA.Element("h5",{class:"required",text:b.appliesToAttributeValue}).inject(t);l.tooltipInfos=P(b.appliesToAttributeValue),document.getElementsByClassName("initiateAppliesToAttributeComboboxField")[0].innerHTML="";let o=document.getElementsByClassName("initiateAppliesToAttributeComboboxField")[0];UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(l);const a=[{label:b.is,value:"is"},{label:b.contains,value:"contains"},{label:b.startswith,value:"startswith"},{label:b.endswith,value:"endswith"},{label:b.isnot,value:"isnot"},{label:b.isempty,value:"isempty"},{label:b.isnotempty,value:"isnotempty"}],n=[{label:b.is,value:"is"},{label:b.greaterthan,value:"greaterthan"},{label:b.lessthan,value:"lessthan"},{label:b.isnot,value:"isnot"},{label:b.isempty,value:"isempty"},{label:b.isnotempty,value:"isnotempty"}],s=[{label:b.true,value:"true"},{label:b.false,value:"false"}],r=[{label:b.iscreatedafter,value:"iscreatedafter"},{label:b.iscreatedbefore,value:"iscreatedbefore"},{label:b.between,value:"between"}],d="[^./#,\\[\\]\\$\\^@\\*\\?%:'\"\\\\<>;|]+",c="[0-9]*",u="[0-9]*.[0-9]*",p="comboBox",f="textField",g="datePicker",h=T.fields.attributeName.selectedItems.options;b.is;if("string"==h.grid.type)if(h.grid.range){let e=H(h.grid.rangeLabel,h.grid.range);T.fields.attributeCases=z(p,o),T.fields.attributeValue=z(p,i,e,!0)}else T.fields.attributeCases=z(p,o,a),T.fields.attributeValue=z(f,i,"",!1,d);else if("boolean"==h.grid.type)if(h.grid.range){let e=H(h.grid.rangeLabel,h.grid.range);T.fields.attributeCases=z(p,o),T.fields.attributeValue=z(p,i,e,!1)}else T.fields.attributeCases=z(p,o),T.fields.attributeValue=z(p,i,s,!1);else if("integer"==h.grid.type)if(h.grid.range){let e=H(h.grid.rangeLabel,h.grid.range);T.fields.attributeCases=z(p,o),T.fields.attributeValue=z(p,i,e,!0)}else T.fields.attributeCases=z(p,o,n),T.fields.attributeValue=z(f,i,"",!1,c);else if("real"==h.grid.type)if(h.grid.range){let e=H(h.grid.rangeLabel,h.grid.range);T.fields.attributeCases=z(p,o),T.fields.attributeValue=z(p,i,e,!0)}else T.fields.attributeCases=z(p,o,n),T.fields.attributeValue=z(f,i,"",!1,u);else"date"==h.grid.type&&(T.fields.attributeCases=z(p,o,r),T.fields.attributeValue=z(g,i,"",!1));L("appiliesToAttributeValueInfo",b.appliesToAttributeValueHelp,t),T.attributeValueField.inject(T.formFields),"isempty"!==T.fields.attributeCases.value&&"isnotempty"!==T.fields.attributeCases.value||G(),T.fields.attributeCases.tooltipInfos=new m({shortHelp:T.fields.attributeCases.currentLabel}),T.fields.attributeCases.addEventListener("change",(function(e){T.fields.attributeCases.tooltipInfos=new m({shortHelp:e.dsModel.currentLabel}),v.buttons.save&&(v.buttons.save.disabled=j()),T.fields.attributeName.selectedItems&&"date"==T.fields.attributeName.selectedItems._options.grid.type&&(T.attributeValueField.querySelector(".initiate-Template-AppliesTo-Field-Value").innerHTML="",_(T.attributeValueField.querySelector(".initiate-Template-AppliesTo-Field-Value"))),"isempty"===T.fields.attributeCases.value||"isnotempty"===T.fields.attributeCases.value?G():B()})),T.fields.attributeValue.addEventListener("change",(function(e){T.fields.attributeValue.value=e.dsModel.value,v.buttons.save&&(v.buttons.save.disabled=j())}))}},G=function(){T.attributeValueField.className="fonticon-chooser-scope-display"},B=function(){T.attributeValueField.className=""};const z=function(e,t,i,l,o=""){let s;if(0==F.attributeValue&&null!=l&&y.getAllDescendants()[0]&&y.getAllDescendants()[0].options.grid.attributeValue&&y.getAllDescendants()[0].options.grid.attributeName===T.fields.attributeName.value&&(F.attributeValue=!0,s=y.getAllDescendants()[0].options.grid.attributeValue.split(","),"textField"===e&&s&&(s=s[0]),"datePicker"===e&&s))return _(t,s[0]),T.fields.attributeValue;switch(void 0===l?(0==F.attributeCases&&y.getAllDescendants()[0]&&y.getAllDescendants()[0].options&&y.getAllDescendants()[0].options.grid.attributeCondition&&(F.attributeCases=!0,s=y.getAllDescendants()[0].options.grid.attributeCondition),l=!1):l||""!==o||"datePicker"==e?"datePicker"==e&&null==s&&(s=new Date):s&&(s=s[0]),e){case"textField":return new c({pattern:o,autoCommitFlag:!0,value:s||""}).inject(t);case"comboBox":return new n({elementsList:i||[{label:b.is,value:"is"}],enableSearchFlag:!1,multiSelFlag:l,value:s||[]}).inject(t);case"datePicker":return new a({value:s,timePickerFlag:!0,timePickerPrecision:"sec"}).inject(t)}},H=function(e,t){let i=[];let l=0;return e.forEach((e=>{i.push({label:e,value:t[l]}),l++})),i.sort(((e,t)=>isNaN(e.label)||isNaN(t.label)?isNaN(e.label)?isNaN(t.label)&&e.label.toLowerCase()<t.label.toLowerCase()?-1:1:-1:e.label-t.label)),i};let J=function(){var e,t=f.getSecurityContextValue();return t&&t.split(".")&&(e=t.split(".")[0]),!(!e||!e.includes("VPLMAdmin"))},X=function(){if(0==F.subType&&y.getChildren().length>0&&y.getChildren()[0].options.grid&&y.getChildren()[0].options.grid.subType&&""!=y.getChildren()[0].options.grid.subType){T.fields.subTypeCheckbox.checkFlag=!0;var e=y.getChildren()[0].options.grid.subType.split(","),t=[];for(let l=0;l<e.length;l++){var i=new s({label:e[l].split("~")[1],value:e[l].split("~")[0]});t.push(i)}F.subType=!0,T.fields.subType.selectedItems=t}},K=function(e,t){if(0!=t.length)for(var i=0;i<t.length;i++){var l=t[i].dataelements.name_nls;l.contains("emxFramework.Type")&&(l=t[i].dataelements.name);var o=new s({label:l,value:t[i].dataelements.name});e.addChild(o),t[i].children.length>0&&K(o,t[i].children)}};return{build:(e,t,i)=>N(e,t,i),destroy:()=>{T={}},getAppliesToForm:()=>T,addFooter:e=>function(e){v={},v.buttons={},v.formFooter=new UWA.Element("div",{id:"appliesToFormFooter",class:"fonticon-chooser-scope-display"}),v.formFooter.inject(e),v.buttons.save=new l({label:b.save,emphasize:"primary",disabled:!0}).inject(v.formFooter),v.buttons.save.addEventListener("buttonclick",(function(){t.updateTemplateAppliesTo(T.fields,y,w.id).then((e=>{widget.routeMgmtMediator.publish("redraw-AppliesTo")}))})),v.buttons.cancel=new l({label:b.cancel,emphasize:"secondary"}).inject(v.formFooter),v.buttons.cancel.addEventListener("buttonclick",(function(){v.buttons.save.disabled=!0,document.querySelector("#appliesToContainer")&&document.querySelector("#appliesToContainer").empty(),y.getChildren().length>0?(N(y,document.querySelector("#appliesToContainer"),w),i.build(document.querySelector("#appliesToContainer")).then((e=>console.log("Success")),(e=>console.log("Failure")))):(document.querySelector("#appliesToFormFooter")&&document.querySelector("#appliesToFormFooter").destroy(),u.showEmptyAppliesPlaceholder(document.querySelector("#appliesToContainer")))}))}(e),checkIfAnyFieldIsModified:()=>function(){var e,t,i,l,o,a,n,s,r,d;if(y.getChildren().length>0){var c=y.getChildren()[0].options.grid;e=c.objPolicy,t=c.objType,i=c.fromState,l=c.toState,o=c.attributeName,a=c.attributeValue,n=c.attributeCondition,s=c.collaboration,c.organization_title,r=c.criteria,d=c.subType}const u=T.fields;return!!((u.policy.selectedItems&&u.policy.selectedItems.options.value)!==e||(u.type.selectedItems&&u.type.selectedItems.options.value)!==t||0===y.getChildren().length&&u.enableApplicability.checkFlag||y.getChildren().length>0&&!u.enableApplicability.checkFlag||i!==(u.maturityState.selectedItems&&u.maturityState.selectedItems.options.value.split("|")[0])&&l!==(u.maturityState.selectedItems&&u.maturityState.selectedItems.options.value.split("|")[1])||(()=>{if((""===d||null==d)&&u.subTypeCheckbox.checkFlag)return!0;if(""!==d&&void 0!==d&&0==u.subTypeCheckbox.checkFlag)return!0;var e=u.subType.selectedItems,t=[];if(u.subTypeCheckbox.checkFlag){if(null!=e)for(var i=0;i<e.length;i++)t.push(e[i].options.value);var l=[];null!=c.subType&&(l=c.subType.split(","));var o=[];for(let e=0;e<l.length;e++)o.push(l[e].split("~")[0]);if(o.sort().toString()!=t.sort().toString())return!0}return!1})()||""===r&&u.criteriaCheckbox.checkFlag||void 0!==r&&""!==r&&!u.criteriaCheckbox.checkFlag||""===r&&-1!=u.criteriaSelection.selectedIndex&&u.criteriaCheckbox.checkFlag||void 0!==o&&"Attribute"!==u.criteriaSelection.value||void 0!==s&&"Credentials"!==u.criteriaSelection.value||function(){if("Credentials"===u.criteriaSelection.value&&u.criteriaCheckbox.checkFlag){if(void 0===(u.collabSpace.selectedItems&&u.collabSpace.selectedItems.options.value)&&""===s)return!1;if((u.collabSpace.selectedItems&&u.collabSpace.selectedItems.options.value)!=(s&&s.split(".")[0])||(u.organization.selectedItems&&u.organization.selectedItems.options.value)!=(s&&s.split(".")[1]))return!0}return!1}()||(()=>{if("Attribute"===u.criteriaSelection.value&&u.criteriaCheckbox.checkFlag){if(u.attributeCases.value!==n||(u.attributeName.selectedItems&&u.attributeName.selectedItems.options.value)!==o)return!0;if(u.attributeName.selectedItems&&"date"==u.attributeName.selectedItems.options.grid.type){var e=a;if("between"==u.attributeCases.value&&(e=a.split("%")[0],Date.parse(u.attributeValue1.value.toGMTString())!=Date.parse(new Date(a.split("%")[1]).toGMTString())))return!0;if(Date.parse(u.attributeValue.value.toGMTString())!=Date.parse(new Date(e).toGMTString()))return!0}else if(u.attributeValue.value!==a)return!0}return!1})())}()}})),define("DS/ENORouteTemplateMgmt/Views/Loader/TemplateAppliesToLoader",["UWA/Drivers/Alone","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteTemplateMgmt/Model/RouteTemplateAppliesToModel","DS/ENORouteTemplateMgmt/Views/Grid/TemplateAppliesToDataGridView","DS/ENORouteTemplateMgmt/Views/Form/TemplateAppliesToInViewMode","DS/ENORouteTemplateMgmt/Views/Form/TemplateAppliesToInEditMode","DS/ENORouteTemplateMgmt/Views/InitiateTemplateAppliesToGridSection","DS/ENORouteMgmt/Utilities/PlaceHolder","DS/ENORouteMgmt/Utilities/DataFormatter","DS/Controls/Button","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],(function(e,t,i,l,o,a,n,s,r,d,c,u,p){"use strict";let m,f,g=[];let h={init:function(d,c){if(f=d.model?d.model:d,!this.showView()){m={},c?m.container=c:(m.container=e.createElement("div",{id:"templateAppliesToFormView",class:"template-appliesTo-container"}),m.container.inject(document.querySelector(".route-facets-container")));let a=UWA.createElement("div",{id:"dataGridAppliesToDivToolbar",class:"toolbar-container",styles:{width:"100%"}}).inject(m.container),r=UWA.createElement("div",{id:"appliesToContainer",class:"appliesToContainer"}).inject(m.container),d=(UWA.createElement("div",{id:"appliesToFooter",class:"appliesToFooter"}).inject(m.container),i.getModel());l.build(d,f);n.setTemplatePhysicalId(f.id),n.resetOldValues(),l.getGridViewToolbar().inject(a),t.fetchRouteTemplateAppliesTo(f.id).then((function(e){i.destroy(),i.createModel(e);let t=i.getModel();if(0==e.length){let e=!1;"Active"==f.state&&(e=!0),s.showEmptyAppliesPlaceholder(m.container,e),v()}else o.build(t,r,f.UserName);u()}))}let u=function(){let e=widget.routeMgmtMediator.subscribe("redraw-AppliesTo",(function(e){void 0!==e&&(e=r.templateGridData(e)),b(e)}));g.push(e),e=widget.routeMgmtMediator.subscribe("redraw-AppliesTo-edit",(function(e){T(e)})),g.push(e),e=widget.routeMgmtMediator.subscribe("disable-edit-icon-in-AppliesTo-tab",(function(){v()})),g.push(e),e=widget.routeMgmtMediator.subscribe("enable-edit-icon-in-AppliesTo-tab",(function(){y()})),g.push(e)},b=function(e){let t=document.querySelector("#templateAppliesToFormView");var i;t&&(i=t.style.display),t&&(t.destroy(),e&&(f=e),h.init(f)),i&&"none"==i&&h.hideView(),g.forEach((e=>{widget.routeMgmtMediator.unsubscribe(e)}))},T=function(){if("Public"!=f.ProjectVisibility)return void widget.notify.handler().addNotif({level:"warning",subtitle:p.appliesToEditPageCollabSpaceMsg,sticky:!1});s.hideEmptyAppliesPlaceholder();let e=i.getModel();a.build(e,document.querySelector("#appliesToContainer"),f),a.addFooter(document.querySelector("#appliesToFooter"))},v=function(){let e=l.getGridViewToolbar().getNodeModelByID("editTask");e&&e._associatedView.elements.container.querySelector(".wux-controls-button")&&(e._associatedView.elements.container.querySelector(".wux-controls-button").removeAttribute("style"),e._associatedView.elements.container.querySelector(".wux-controls-button").dsModel.disabled=!0)},y=function(){let e=l.getGridViewToolbar().getNodeModelByID("editTask");e&&e._associatedView.elements.container.querySelector(".wux-controls-button")&&(e._associatedView.elements.container.querySelector(".wux-controls-button").setStyle("color","rgb(54, 142, 196)"),e._associatedView.elements.container.querySelector(".wux-controls-button").dsModel.disabled=!1)}},hideView:function(){null!=document.getElementById("templateAppliesToFormView")&&(document.getElementById("templateAppliesToFormView").style.display="none")},showView:function(){return null!=document.getElementById("templateAppliesToFormView")&&(document.getElementById("templateAppliesToFormView").style.display="block",!0)},switchView:function(e){var t=document.querySelector("#appliesToFormFooter");let n=l.getGridViewToolbar().getNodeModelByID("editTask"),r=i.getModel();if(null==t)document.querySelector("#appliesToContainer")&&document.querySelector("#appliesToContainer").empty(),n&&n._associatedView.elements.container.querySelector(".wux-controls-button")&&n._associatedView.elements.container.querySelector(".wux-controls-button").setStyle("color","rgb(54, 142, 196)"),a.build(r,document.querySelector("#appliesToContainer"),f),a.addFooter(document.querySelector("#appliesToFooter"));else{if(a.checkIfAnyFieldIsModified()){let e=new u;e.inject(document.body);new c({modalFlag:!0,width:350,height:150,title:p.switchToViewMode,content:p.switchToViewModeConfirmationAppliesTo,immersiveFrame:e,buttons:{Ok:new d({label:p.ok,disabled:!1,onClick:function(e){e.dsModel;e.dsModel.dialog.close(),document.querySelector("#appliesToContainer")&&document.querySelector("#appliesToContainer").empty(),document.querySelector("#appliesToFormFooter")&&document.querySelector("#appliesToFormFooter").destroy(),n&&n._associatedView.elements.container.querySelector(".wux-controls-button")&&n._associatedView.elements.container.querySelector(".wux-controls-button").removeAttribute("style"),r.getChildren().length>0?o.build(r,document.querySelector("#appliesToContainer"),f.UserName):s.showEmptyAppliesPlaceholder(m.container)}}),Cancel:new d({label:p.cancel,onClick:function(e){e.dsModel.dialog.close()}})}})}else document.querySelector("#appliesToContainer")&&document.querySelector("#appliesToContainer").empty(),document.querySelector("#appliesToFormFooter")&&document.querySelector("#appliesToFormFooter").destroy(),n&&n._associatedView.elements.container.querySelector(".wux-controls-button")&&n._associatedView.elements.container.querySelector(".wux-controls-button").removeAttribute("style"),r.getChildren().length>0?o.build(r,document.querySelector("#appliesToContainer"),f.UserName):s.showEmptyAppliesPlaceholder(m.container)}},destroy:function(){m={},g.forEach((e=>{widget.routeMgmtMediator.unsubscribe(e)}))}};return h}));