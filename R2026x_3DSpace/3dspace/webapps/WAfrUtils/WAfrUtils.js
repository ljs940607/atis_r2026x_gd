define("DS/WAfrUtils/mod_APIRegistry",[],(function(){"use strict";return{APIRegistry:class{constructor(){this._private=Object.create(null),this._private.apis=new Map}register(e,t){if(!e)throw new Error("Missing identifier.");if(!t)throw new Error("Missing api.");const r=this._private.apis;if(r.has(e))throw new Error(`${e} already registered.`);t.registry=this,r.set(e,t)}unregister(e){if(!e)throw new Error("Missing identifier");const t=this._private.apis;if(!t.has(e))throw new Error(`${e} is not registered.`);t.get(e).registry=null,t.delete(e)}get(e){if(!e)throw new Error("Missing identifier");const t=this._private.apis;if(!t.has(e))throw new Error(`${e} is not registered.`);return t.get(e).get()}waitDispose(){let e=[];for(const[t,r]of this._private.apis)e.push(r.waitDispose());return Promise.all(e)}},AbstractAPI:class{constructor(){this._private=Object.create(null),this._private.pendingExecution=0,this._private.waitForDispose=!1,this._private.disposeResolve=null,this._private.registry=null}set registry(e){if(this._private.registry&&e)throw new Error("Cannot set another registry.");this._private.registry=e}get registry(){return this._private.registry}async execute(...e){return Promise.reject("Abstract execute must be reimplemented by subclasses.")}get(){return async(...e)=>{if(!this._private||this._private.waitForDispose)return Promise.reject("Cannot execute a disposed API.");let t;return++this._private.pendingExecution,t=await this.execute(...e),--this._private.pendingExecution,this._private.waitForDispose&&this._private.pendingExecution<=0&&this._dispose(),t}}_dispose(){const e=this._private.disposeResolve;delete this._private,e()}async waitDispose(){if(this._private.waitForDispose=!0,!(this._private.pendingExecution<=0))return new Promise(((e,t)=>{this._private.disposeResolve=e}));this._dispose()}}}})),define("DS/WAfrUtils/Logger",[],(function(){"use strict";let e=!1;const t=localStorage.getItem("DEBUG_WAFR_LOGGER");var r;function i(...t){e&&console.error("[WAFR-LOGGER]",...t)}return null!==t&&("string"==typeof t&&"true"===t||"boolean"==typeof t&&t)&&(r=!0,console.warn("[DEBUG] DS/WAfrUtils/Logger: Debug mode activated.","\n[DEBUG] DO NOT USE IN PRODUCTION.","\n[DEBUG] DO NOT USE IF YOU ARE NOT PART OF THE WAFR TEAM.",'\n[DEBUG] Be sure to activate "Verbose" level in the DevTools to see all logs.'),e=Boolean(r)),{getDebugMode:function(){return e},log:function(...t){e&&console.log("[WAFR-LOGGER]",...t)},warn:function(...t){e&&console.warn("[WAFR-LOGGER]",...t)},debug:function(...t){e&&console.debug("[WAFR-LOGGER]",...t)},error:i,severe:i}})),define("DS/WAfrUtils/mod_PromiseUtils",[],(function(){"use strict";const e=Object.create(null);return e.promisifiedRequire=function(e){return new Promise(((t,r)=>{require([e],t,r)}))},e})),define("DS/WAfrUtils/mod_Performances",[],(function(){"use strict";var e="[WAFR]",t=e+"[STD]",r=e+"[INC]",i=t+"b_",n=t+"e_",o=r+"b_",s=r+"e_";function a(){this._private=Object.create(null),this._private._probes=[]}function p(e){var i,n=performance.getEntriesByType("measure").filter((function(e){return-1!==e.name.indexOf(t)})).map((function(r){var i=r.name.replace(t,"");if(e&&e.removeTimestamp){var n=i.split("_");n.pop(),i=n.join("_")}return{name:i,startTime:r.startTime,duration:r.duration}})),a=performance.getEntriesByType("mark").filter((function(e){return-1!==e.name.indexOf(r)})),p=(i="name",a.reduce((function(e,t){const r=t[i];return e[r]=e[r]||[],e[r].push(t),e}),{})),c=Object.keys(p).filter((function(e){return-1!==e.indexOf(o)})),u=c.map((function(t){var r=t.replace(o,"");if(e&&e.removeTimestamp){var i=r.split("_");i.pop(),r=i.join("_")}var n={name:r,count:p[t].length},a=t.replace(o,s),c=p[t],u=c.length,l=p[a],f=l.length,m=Math.min(u,f);if(f>u)throw new Error("Internal Error");for(var g=0,d=0;d<m;++d)g+=l[d].startTime-c[d].startTime;return n.totalTime=g,n}));return{stdMeasures:n,incMeasures:u}}return a.prototype.isProdMode=function(){var e=!0;return"true"===localStorage.getItem("DEBUG_WAFR_PERFORMANCE")&&(e=!1),e},a.prototype.start=function(e){if(!this.isProdMode()){var t=this._private._probes,r=t.length,n=(new Date).valueOf(),o={label:e,timestamp:n},s=i+e+"_"+n;performance.mark(s);var a=performance.getEntriesByName(s);return o.start=a[a.length-1],t[r]=o,r}},a.prototype.stop=function(e){if(!this.isProdMode()){var r=this._private._probes[e];if(!r||!r.start)throw new Error("Trying to stop a measure without a corresponding start item");var o=r.label+"_"+r.timestamp,s=n+o,a=t+o;performance.mark(s);var p=performance.getEntriesByName(s);r.stop=p[p.length-1],performance.measure(a,i+o,s),p=performance.getEntriesByName(a),r.measure=p[p.length-1]}},a.prototype.log=function(e){if(!this.isProdMode())for(var t=0,r=this._private._probes,i=r.length,n=null;t<i;++t)(n=r[t]).measure?e.log(n):"INCREMENTAL"!==n.type||void 0===n.isActive||n.isActive||e.log(n)},a.prototype.startIncrementalProbe=function(e){if(!this.isProdMode()){var t=this._private._probes,r=t.length,i={label:e,timestamp:(new Date).valueOf(),type:"INCREMENTAL",totalTime:0,isActive:!0,count:0};return t[r]=i,r}},a.prototype.startIncrement=function(e){if(!this.isProdMode()){var t=this._private._probes[e];if(!t||t.lastStart||!t.isActive)throw new Error("Trying to start to increment a probe without defining it OR without stoping the previous increment transaction.");var r=t.label+"_"+t.timestamp,i=o+r;performance.mark(i);var n=performance.getEntriesByName(i);t.lastStart=n[n.length-1]}},a.prototype.stopIncrement=function(e){if(!this.isProdMode()){var t=this._private._probes[e];if(!(t&&t.lastStart&&t.isActive))throw new Error("Trying to stop to increment a probe without defining it OR without staring it.");var r=t.label+"_"+t.timestamp,i=s+r;performance.mark(i);var n=performance.getEntriesByName(i),o=n[n.length-1];t.totalTime+=o.startTime-t.lastStart.startTime,delete t.lastStart,++t.count}},a.prototype.stopIncrementalProbe=function(e){if(!this.isProdMode()){var t=this._private._probes[e];if(!t||!t.totalTime)throw new Error("Trying to stop a probe which does not exist");console.debug("⏱️",t.label+"_"+t.timestamp,"count:",t.count,"duration:",t.totalTime,"ms"),t.isActive=!1}},{Performances:a,logProbes:function(){var e=p(),t=e.stdMeasures,r=e.incMeasures;if(-1===window.navigator.userAgent.indexOf("MSIE ")&&-1===window.navigator.userAgent.indexOf("Trident/")){var i="[WAFR] Performances";console.groupCollapsed(i);var n=i+" - Standard";console.groupCollapsed(n),console.table(t,["name","startTime","duration"]),console.groupEnd(n);var o=i+" - Incremental";console.groupCollapsed(o),console.table(r,["name","count","totalTime"]),console.groupEnd(o),console.groupEnd(i)}return{stdMeasures:t,incMeasures:r}},getProbes:p}})),define("DS/WAfrUtils/mod_ConcatenationUtils",[],(function(){"use strict";const e=Object.create(null);return e.hasConfigurationFor=function(e,t){return Boolean(e&&t&&e.stdConf&&e.stdConf[t])},e.getConfigurationFor=function(e,t){let r;return e&&t&&e.stdConf&&e.stdConf[t]&&(r=e.stdConf[t]),r},e.getConfiguration=function(e){let t;return e&&e.stdConf&&(t=e.stdConf),t},e}));