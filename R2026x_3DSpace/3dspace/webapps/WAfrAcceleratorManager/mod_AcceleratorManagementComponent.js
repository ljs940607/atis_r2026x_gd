define("DS/WAfrAcceleratorManager/mod_AcceleratorManagementComponent",["DS/WAfrHandlers/mod_HandlerComponent","UWA/Class/Promise","DS/WAfrUtils/Logger","DS/WAfrAcceleratorManager/AcceleratorManagerHelperUtilities"],(function(e,t,r,a){"use strict";var o=Object.create(null);function n(){return t.resolve()}return o.DEFAULT_COMPONENT_NAME="AFR_AcceleratorManagementComponent",o.AcceleratorManagementComponent=function(){this.defaultHandlerAcceleratorMap={},this.checkHandlerAcceleratorMap={},this.radioHandlerAcceleratorMap={},this.allAcceleratorMap={},this.keyMap={}},o.AcceleratorManagementComponent.prototype.getExposedComponentCtor=function(){var e=this;function t(){}return t.prototype.addAcceleratorToDefaultMap=e.addAcceleratorToDefaultMap.bind(e),t.prototype.addAcceleratorToCheckMap=e.addAcceleratorToCheckMap.bind(e),t.prototype.addAcceleratorToRadioMap=e.addAcceleratorToRadioMap.bind(e),t.prototype.getAllAcceleratorMap=e.getAllAcceleratorMap.bind(e),t.prototype.initialize=n,t.prototype.clean=n,t.prototype.destroy=n,t},o.AcceleratorManagementComponent.DEFAULT_COMPONENT_NAME=o.DEFAULT_COMPONENT_NAME,o.AcceleratorManagementComponent.prototype.initialize=function(){this.getExecutionContext().getUiContainer();this.os=a.getOS(),this.browser=a.getBrowser();var e=this;return document.addEventListener("keydown",(function(t){if(e.keyMap[t.keyCode]||(e.keyMap[t.keyCode]=!0),!t.altKey&&e.keyMap[18]&&delete e.keyMap[18],!t.shiftKey&&e.keyMap[16]&&delete e.keyMap[16],"Windows"===e.os?!t.ctrlKey&&e.keyMap[17]&&delete e.keyMap[17]:"Mac OS"===e.os&&"Firefox"===e.browser&&(!t.metaKey&&e.keyMap[224]?delete e.keyMap[224]:"Safari"===e.browser&&(t.metaKey||(e.keyMap[91]?delete e.keyMap[91]:e.keyMap[93]&&delete e.keyMap[93]))),function(t){var r=[],o=[];("Windows"===e.os||"Mac OS"===e.os||"Linux"===e.os)&&(r=a.getModifierKeysArray(),o=a.getRejectKeysArray());var n=Object.keys(t),c=n.filter((function(e){return!o.includes(e)}));if(n.length!==c.length)return delete t[(n=n.filter((function(e){return!r.includes(e)})))[0]],!1;for(var l=0;l<c.length;l++)if(!r.includes(c[l]))return!0;return!1}(e.keyMap)){var o,n=0;if("Windows"===e.os||"Linux"===e.os){var c="",l=0,i=0,p=0;for(var d in e.keyMap)e.keyMap[d]&&(17===Number(d)?l=1:18===Number(d)?i=1:16===Number(d)?p=1:t.keyCode===Number(d)&&(M=32===Number(d)?t.code:t.key));l&&(c="Ctrl+"),i&&(c+="Alt+"),p&&(c+="Shift+"),c=(c+=M).toLowerCase(),e.allAcceleratorMap[c]&&(n=1,t.preventDefault())}else if("Mac OS"===e.os){c="";var M,A=0;i=0,p=0;for(var d in e.keyMap)e.keyMap[d]&&(224===Number(d)&&"Firefox"===e.browser||(91===Number(d)||93===Number(d))&&"Safari"===e.browser?A=1:18===Number(d)?i=1:16===Number(d)?p=1:t.keyCode===Number(d)&&(M=t.code));A&&(c="Ctrl+"),i&&(c+="Alt+"),p&&(c+="Shift+"),c=(c=(c=(c+=M).toLowerCase()).replace("dight","")).replace("key",""),e.allAcceleratorMap[c]&&(n=1,t.preventDefault())}if(M&&n)(o=e.radioHandlerAccelerator(c))||(o=e.checkHandlerAccelerator(c)),o||(o=e.defaultHandlerAccelerator(c)),delete e.keyMap[t.keyCode];else M&&!n&&(r.log("This accelerator combination is not registered against any Command/Action"),delete e.keyMap[t.keyCode])}})),document.addEventListener("keyup",(function(t){delete e.keyMap[t.keyCode]})),t.resolve()},o.AcceleratorManagementComponent.prototype.addAcceleratorToDefaultMap=function(e,t){e&&t&&(this.defaultHandlerAcceleratorMap[e]=t)},o.AcceleratorManagementComponent.prototype.addAcceleratorToCheckMap=function(e,t){e&&t&&(this.checkHandlerAcceleratorMap[e]=t)},o.AcceleratorManagementComponent.prototype.addAcceleratorToRadioMap=function(e,t){e&&t&&(this.radioHandlerAcceleratorMap[e]=t)},o.AcceleratorManagementComponent.prototype.defaultHandlerAccelerator=function(t){var r=!1,a=this.getExecutionContext();if(this.defaultHandlerAcceleratorMap[t]&&(r=!0,a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._hdlrMap)){var o=a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._hdlrMap[this.defaultHandlerAcceleratorMap[t]];void 0!==o&&void 0!==o.execute&&o.execute()}return r},o.AcceleratorManagementComponent.prototype.checkHandlerAccelerator=function(t){var r=!1,a=this.getExecutionContext();for(var o in this.checkHandlerAcceleratorMap)if(this.checkHandlerAcceleratorMap.hasOwnProperty(o)){var n=o,c=this.checkHandlerAcceleratorMap[n].accelerator;if(c){if(t===c)if(r=!0,a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._chkHdlrMap)!1===(l=a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._chkHdlrMap[n]).getState()?l.setState(!0):l.setState(!1)}else{var l;if(this.checkHandlerAcceleratorMap[n].check)if(this.checkHandlerAcceleratorMap[n].check[t])if(r=!0,a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._chkHdlrMap)!1===(l=a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._chkHdlrMap[n]).getState()&&l.setState(!0);if(this.checkHandlerAcceleratorMap[n].uncheck&&!r)if(this.checkHandlerAcceleratorMap[n].uncheck[t])if(r=!0,a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._chkHdlrMap)!0===(l=a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._chkHdlrMap[n]).getState()&&l.setState(!1)}if(r)return!0}return!1},o.AcceleratorManagementComponent.prototype.radioHandlerAccelerator=function(t){var r=!1,a=this.getExecutionContext();for(var o in this.radioHandlerAcceleratorMap)if(this.radioHandlerAcceleratorMap.hasOwnProperty(o)){var n=o,c=this.radioHandlerAcceleratorMap[n].items;for(var l in c)if(c.hasOwnProperty(l)){var i=l,p=c[i].accelerator;if(p){if(t===p){r=!0;var d=!1;if(a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._radioHdlrMap){var M=(s=a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._radioHdlrMap[n]).getElements();for(var A of M)if(A.getId()===i){f=A;break}d=!(!f||!1!==f.getState()),s.setRadioItemState({radioHdlrItemId:i,state:d})}}}else{if(c[i].check)if(c[i].check[t]&&(r=!0,a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._radioHdlrMap)){M=(s=a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._radioHdlrMap[n]).getElements();for(var A of M)if(A.getId()===i){f=A;break}!1===f.getState()&&s.setRadioItemState({radioHdlrItemId:i,state:!0})}if(c[i].uncheck&&!r)if(c[i].uncheck[t]&&(r=!0,a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._radioHdlrMap)){var s,f;M=(s=a.getComponent(e.DEFAULT_COMPONENT_NAME)._private._radioHdlrMap[n]).getElements();for(var A of M)if(A.getId()===i){f=A;break}!0===f.getState()&&s.setRadioItemState({radioHdlrItemId:i,state:!1})}}if(r)return!0}}return!1},o.AcceleratorManagementComponent.prototype.clean=function(){this.defaultHandlerAcceleratorMap={},this.checkHandlerAcceleratorMap={},this.radioHandlerAcceleratorMap={},this.allAcceleratorMap={},this.keyMap={}},o.AcceleratorManagementComponent.prototype.destroy=function(){delete this.defaultHandlerAcceleratorMap,delete this.checkHandlerAcceleratorMap,delete this.radioHandlerAcceleratorMap,delete this.allAcceleratorMap,delete this.keyMap},o.AcceleratorManagementComponent.prototype.getAllAcceleratorMap=function(){return this.allAcceleratorMap},o}));