define("DS/WAfrAcceleratorManager/mod_AcceleratorInterpreter",["DS/WAfrAcceleratorManager/mod_AcceleratorManagementComponent","DS/WAfrUtils/Logger"],(function(e,r){"use strict";var a={};function c(){this.componentName=e.DEFAULT_COMPONENT_NAME}c.prototype.enrich=function(e,r,a){if(!e||!r)throw new Error("Missing parameters");return this.interpret(e,r,a)},c.prototype.interpret=function(r,a,c){var t=e.DEFAULT_COMPONENT_NAME;if(c&&c.componentId&&(t=c.componentId),this._executionContext=a,this._acceleratorComponent=a.getComponent(t),r){if(r.handlers){var o=r.handlers;if(o&&o.default){var n=o.default;this.interpretDefaultHandler(n)}if(o&&o.check){var i=o.check;this.interpretCheckHandler(i)}}if(r.radioGroup){var l=r.radioGroup;this.interpretRadioHandler(l)}}return Promise.resolve()},c.prototype.interpretDefaultHandler=function(e){for(var a=0;a<e.length;a++){var c="";if(e[a].accelerator&&e[a].accelerator.keyboard&&(c=e[a].accelerator.keyboard),c){var t=this.checkModifierKeysSequence(c);this._acceleratorComponent.allAcceleratorMap[t]?r.log("Command/action ",e[a].identifier," cannot get registered against accelerator ",c,"as it is already used by some another command/action"):(this._acceleratorComponent.addAcceleratorToDefaultMap(t,e[a].identifier),this._acceleratorComponent.allAcceleratorMap[t]=e[a].identifier)}}},c.prototype.interpretCheckHandler=function(e){for(var a=0;a<e.length;a++){var c=e[a].identifier,t={};if(e[a].accelerator&&e[a].accelerator.keyboard){var o=this.checkModifierKeysSequence(e[a].accelerator.keyboard);o&&(this._acceleratorComponent.allAcceleratorMap[o]?r.log("Command/action ",c," cannot get registered against accelerator ",o," as it is already used by some another command/action"):(t.accelerator=o,this._acceleratorComponent.addAcceleratorToCheckMap(c,t),this._acceleratorComponent.allAcceleratorMap[o]=c))}else{var n="",i="";e[a].check&&e[a].check.accelerator&&e[a].check.accelerator.keyboard&&(n=e[a].check.accelerator.keyboard,n=this.checkModifierKeysSequence(n)),e[a].uncheck&&e[a].uncheck.accelerator&&e[a].uncheck.accelerator.keyboard&&(i=e[a].uncheck.accelerator.keyboard,i=this.checkModifierKeysSequence(i)),n&&(this._acceleratorComponent.allAcceleratorMap[n]?r.log("Command/action ",e[a].check.identifier," cannot get registered against accelerator ",n," as it is already used by some another command/action"):(t.check={},t.check[n]=e[a].check.identifier,this._acceleratorComponent.allAcceleratorMap[n]=e[a].check.identifier)),i&&(this._acceleratorComponent.allAcceleratorMap[i]?r.log("Command/action ",e[a].uncheck.identifier," cannot get registered against accelerator ",i," as it is already used by some another command/action"):(t.uncheck={},t.uncheck[i]=e[a].uncheck.identifier,this._acceleratorComponent.allAcceleratorMap[i]=e[a].uncheck.identifier)),(n||i)&&this._acceleratorComponent.addAcceleratorToCheckMap(c,t)}}},c.prototype.interpretRadioHandler=function(e){for(var a in e)if(e.hasOwnProperty(a))for(var c=e[a],t=0;t<c.length;t++){for(var o=c[t].identifier,n={items:{}},i=c[t].items,l=0;l<i.length;l++){var s=i[l].identifier;if(n.items[s]={},i[l].accelerator&&i[l].accelerator.keyboard){var d=i[l].accelerator.keyboard,h=this.checkModifierKeysSequence(d);h&&(this._acceleratorComponent.allAcceleratorMap[h]?r.log("Command/action ",s," cannot get registered against accelerator ",h," as it is already used by some another command/action"):(n.items[s].accelerator=h,this._acceleratorComponent.allAcceleratorMap[h]=s))}else{var m,p;i[l].check&&i[l].check.accelerator&&i[l].check.accelerator.keyboard&&(m=i[l].check.accelerator.keyboard,m=this.checkModifierKeysSequence(m)),i[l].uncheck&&i[l].uncheck.accelerator&&i[l].uncheck.accelerator.keyboard&&(p=i[l].uncheck.accelerator.keyboard,p=this.checkModifierKeysSequence(p)),m&&(this._acceleratorComponent.allAcceleratorMap[m]?r.log("Command/action ",i[l].check.identifier," cannot get registered against accelerator ",m," as it is already used by some another command/action"):(n.items[s].check={},n.items[s].check[m]=i[l].check.identifier,this._acceleratorComponent.allAcceleratorMap[m]=i[l].check.identifier)),p&&(this._acceleratorComponent.allAcceleratorMap[p]?r.log("Command/action ",i[l].uncheck.identifier," cannot get registered against accelerator ",p," as it is already used by some another command/action"):(n.items[s].uncheck={},n.items[s].uncheck[p]=i[l].uncheck.identifier,this._acceleratorComponent.allAcceleratorMap[p]=i[l].uncheck.identifier))}}this._acceleratorComponent.addAcceleratorToRadioMap(o,n)}},c.prototype.checkModifierKeysSequence=function(e){var r,a="",c=e.split("+"),t=!1,o=!1,n=!1;for(var i of c)"ctrl"===(i=i.toLowerCase())?t=!0:"alt"===i?o=!0:"shift"===i?n=!0:r=i;return t&&(a+="Ctrl+"),o&&(a+="Alt+"),n&&(a+="Shift+"),(a+=r).toLowerCase()};var t=Object.create(null);return t.generateInterpreter=function(e,r){var t=c;return void 0!==a[e]&&(t=a[e]),Promise.resolve(new t)},t}));