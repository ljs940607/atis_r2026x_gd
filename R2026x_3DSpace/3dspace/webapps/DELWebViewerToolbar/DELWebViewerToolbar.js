define("DS/DELWebViewerToolbar/ToolbarContext",[],(function(){"use strict";var e,t=function(){var e;return{set:function(t){e=t},get:function(){return e}}};return UWA.is(e)||(e=new t),e})),define("DS/DELWebViewerToolbar/ViewListColumnManager",["DS/DELWebViewerUtils/Utils"],(function(e){"use strict";const t={Columns:{Title:{dataIndex:"tree",text:"Title",pinned:"left",editionPolicy:"EditionOnOver",width:"250px",height:"40px"},Maturity:{dataIndex:"status",text:"Maturity State",kind:"string",width:100,height:"40px",editableFlag:!1,typeRepresentation:"tag",className:"lc-maturity-state",alignment:"center",customisation:{exportable:{lock:!1,value:!0}},visibleFlag:!0,getCellClassName:function(e){var t;return-1!==e.rowID&&(t=e&&e.nodeModel&&e.nodeModel.options&&e.nodeModel.options.grid&&e.nodeModel.options.grid.status),t}},BuildUpCategory:{dataIndex:"category",text:"BuildUp Category",typeRepresentation:"string",height:"40px"},HideShow3D:{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,dataIndex:"hideShow3D",editionPolicy:"EditionInPlace",typeRepresentation:"independantBoolean",alignment:"center",pinned:"right",text:"",width:30,icon:e.getAssetsUrl("DEL3DViewer","icons/32/I_ShowHide.png"),getCellValue:function(e){return e.nodeModel.options.grid.hideShow3D}}},WorkInstructions:{columnPropertiesToOverride:{Title:{getCellKPIColor:null},HideShow3D:{visibleFlag:!1}}},BuildUp:{columnPropertiesToOverride:{Title:{getCellKPIColor:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options.grid.color)return e.nodeModel.options.grid.color}},HideShow3D:{visibleFlag:!0}}}};return{getColumns:function(e){let o=t.Columns;if(t[e]&&t[e].columnPropertiesToOverride){let i=t[e].columnPropertiesToOverride;Object.keys(i).forEach((e=>{o[e]={...o[e],...i[e]}}))}return o}}})),define("DS/DELWebViewerToolbar/DisplayOptionsColumns",[],(function(){"use strict";return{HideShow3D:{text:"Visibility",sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,alignment:"center",dataIndex:"visibility",editionPolicy:"EditionInPlace",typeRepresentation:"visibility",getCellValue:function(e){return e.nodeModel.options.grid.visibility}},Category:{dataIndex:"category",text:"Category",typeRepresentation:"string"},Transparency:{text:"Transparency",dataIndex:"opacity",typeRepresentation:"opacity",editionPolicy:"EditionInPlace",editableFlag:"true",alignment:"center",semantics:{minValue:0,maxValue:1,stepValue:.1,colorFrom:"transparent",colorTo:"#368EC4"}},ShowColor:{text:"Color ON/OFF",dataIndex:"withColor",typeRepresentation:"independantBoolean",editionPolicy:"EditionInPlace",editableFlag:"true",alignment:"center"},Color:{text:"Color",dataIndex:"color",typeRepresentation:"color",editableFlag:"true",editionPolicy:"EditionInPlace",alignment:"center"}}})),define("DS/DELWebViewerToolbar/commands/ToolbarConfig/ToolbarConfig",["UWA/Core","DS/DELWebViewerUtils/Utils"],(function(e,t){"use strict";return{getConfiguration:function(e){return{entries:[{id:"ShowBuildUpColors",dataElements:{typeRepresentation:"customBoolean",tooltip:{title:e.getNLSValue("ToolBar.ShowBuildUpColors.Label"),shortHelp:e.getNLSValue("ToolBar.ShowBuildUpColors.Tooltip.ShortHelp"),longHelp:e.getNLSValue("ToolBar.ShowBuildUpColors.Tooltip.LongHelp")},value:!0,onNodeUpdate:{module:"DS/DELWebViewerToolbar/commands/ShowBuildupColorsCmd",func:"execute"},possibleValues:[{value:!0,icon:{iconPath:t.getAssetsUrl("DEL3DViewer","icons/32/I_ShowPBUColor.png"),className:"ShowBuildUpColors"}},{value:!1,icon:{iconPath:t.getAssetsUrl("DEL3DViewer","icons/32/I_Color_OFF.png"),className:"ShowBuildUpColors"}}],category:"2"}},{id:"3DViewList",dataElements:{typeRepresentation:"customBoolean",tooltip:{title:e.getNLSValue("ToolBar.3DViewList.Label"),shortHelp:e.getNLSValue("ToolBar.3DViewList.Tooltip.ShortHelp"),longHelp:e.getNLSValue("ToolBar.3DViewList.Tooltip.LongHelp")},onNodeUpdate:{module:"DS/DELWebViewerToolbar/commands/View3DList",func:"execute"},value:!1,possibleValues:[{value:!0,icon:{iconPath:t.getAssetsUrl("DEL3DViewer","icons/32/I_3DViewList_ON.png"),className:"3DViewList"}},{value:!1,icon:{iconPath:t.getAssetsUrl("DEL3DViewer","icons/32/I_3DViewList_OFF.png"),className:"3DViewList"}}],category:"2"}},{id:"BuildUpDisplayOptions",dataElements:{typeRepresentation:"customBoolean",tooltip:{title:e.getNLSValue("ToolBar.BuildUpDisplayOptions.Label"),shortHelp:e.getNLSValue("ToolBar.BuildUpDisplayOptions.Tooltip.ShortHelp"),longHelp:e.getNLSValue("ToolBar.BuildUpDisplayOptions.Tooltip.LongHelp")},onNodeUpdate:{module:"DS/DELWebViewerToolbar/commands/BuildupDisplayOptionsCmd",func:"execute"},value:!1,possibleValues:[{value:!0,icon:{iconPath:t.getAssetsUrl("DEL3DViewer","icons/32/I_DisplayOptions.png"),className:"BuildUpDisplayOptions"}},{value:!1,icon:{iconPath:t.getAssetsUrl("DEL3DViewer","icons/32/I_DisplayOptions.png"),className:"BuildUpDisplayOptions"}}],category:"2"}},{id:"Reset",dataElements:{typeRepresentation:"functionIcon",tooltip:{title:e.getNLSValue("ToolBar.Reset.Label"),shortHelp:e.getNLSValue("ToolBar.Reset.Tooltip.ShortHelp"),longHelp:e.getNLSValue("ToolBar.Reset.Tooltip.LongHelp")},value:{module:"DS/DELWebViewerToolbar/commands/ResetCmd",func:"execute"},icon:{iconPath:t.getAssetsUrl("DEL3DViewer","icons/32/I_DELResetBuildUp.png"),className:"Reset"},category:"2"}}],WorkInstructions:{entriesToOverride:[{id:"ShowBuildUpColors",dataElements:{disabled:!0}},{id:"3DViewList",dataElements:{disabled:!1}},{id:"BuildUpDisplayOptions",dataElements:{disabled:!1}},{id:"Reset",dataElements:{disabled:!0}}]},BuildUp:{entriesToOverride:[{id:"ShowBuildUpColors",dataElements:{disabled:!1}},{id:"3DViewList",dataElements:{disabled:!1}},{id:"BuildUpDisplayOptions",dataElements:{disabled:!1}},{id:"Reset",dataElements:{disabled:!1}}]}}}}})),define("DS/DELWebViewerToolbar/ToolbarController",["UWA/Core","DS/DELWebViewerToolbar/ToolbarContext","DS/DELPPRData/Buildup/BuildUpSettings","DS/DELWebViewerToolbar/commands/ToolbarConfig/ToolbarConfig"],(function(e,t,o,i){"use strict";return function(n,l,a,r){const s=r.getOption("mappingKeys");var d,c=i.getConfiguration(r),u=r.getOption("eventCollection").getViewerCtrlEventHnd(),p=function(){u.publish(u.events.onToolbarDestroy,{})},g=async function(){let e,t=a.getInstance("BuildUpBehaviorModelService"),o=n.getInstance("WorkInstructionBehavior");switch(l.getMode()){case s.VIEWERMODES.WORKINSTRUCTIONS:o&&(e=await o.getCurrentBuildUpSettings());break;case s.VIEWERMODES.BUILDUP:t&&(e=t.getBuildUpGlobalSettings())}return e},b=async function(t={}){t.mode&&await async function(e){e&&c[e]&&c[e].entriesToOverride&&c[e].entriesToOverride.forEach((e=>{d.updateNodeModel({commandId:e.id,...e.dataElements})}))}(t.mode),function(t){let i,n,l;t&&(n=d.getNodeModel({commandId:"ShowBuildUpColors"}),i=n&&n.options&&n.options.grid&&e.is(n.options.grid.data,"boolean")?n.options.grid.data:null,l=o.isBuildUpColorsEnabled(t),i!==l&&d.updateNodeModel({commandId:"ShowBuildUpColors",grid:{data:l}}))}(await g()),u.publish(u.events.onToolbarUpdate,t)};return Object.assign(r,{toolbar:c.entries}),r.getOption("quickToolBar")&&(t.set({viewerInterface:l,modelInterface:a,toolbarInterface:{getBuildUpSettings:g},options:r}),(d=l.getToolBar()).create(c.entries),d.hide(),b({mode:l.getMode()}),u.subscribe(u.events.onSetModeComplete,(function(){p(),b({mode:l.getMode()})})),u.subscribe(u.events.onSelectView,b),u.subscribe(u.events.onGlobalBuildUpComplete,b)),{reset:function(){d&&(p(),d.reset(),d.hide())}}}})),define("DS/DELWebViewerToolbar/commands/View3DList",["UWA/Core","DS/DELWebViewerToolbar/ToolbarContext","DS/DELWebViewerToolbar/ViewListColumnManager","DS/DELWebViewerUtils/Utils","DS/DELPPRData/Buildup/BuildUpSettings","text!DS/DELWebViewerToolbar/assets/json/BuildUpCategory.json"],(function(e,t,o,i,n,l){"use strict";var a,r=function(){var a,r,s="3DViewList",d=[],c=function(){var e=t.get().options.getOption("eventCollection").getViewerCtrlEventHnd();a&&(a.destroy(),a=null),d.forEach((function(t){e.unSubscribe(t)})),d=[]},u=function u(){var p=t.get(),g=p.modelInterface,b=p.viewerInterface,h=p.toolbarInterface,m=p.options,D=m.getOption("mappingKeys"),f=JSON.parse(l),y=g.getDataManager().get("currentBuildupContent"),S=function(){let e=o.getColumns(b.getMode());for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&("HideShow3D"!==t&&(e[t].text=m.getNLSValue("3DViewList.Title."+t)),e[t].description=m.getNLSValue("3DViewList.Description."+t));return Object.values(e)},C=function(t){return t&&e.is(t.path,"array")&&t.path.length>0?t.path[0]:null},w=function(o){var i,n=e.Promise.resolve({results:[]});return o&&o.id&&o.pathFilter&&o.pathFilter.length>0&&(i=b.getFilterSpec({id:o.id}),o.filter=i?i.filter:null,n=g.getProgressiveExpandData(function(o){var i=t.get().options.getOption("dynamicBuildUp"),n={batch:{expands:[{label:"3DViewList Expand",root:{physical_id:o.id},filter:function(){let t=[],i=[];return(o=o||{}).filter&&t.push(o.filter),function(t){let o;t&&t.length>0&&(o=e.is(t[0],"string")?[t]:t,i=i.concat(o.map((e=>({physical_id_path:e})))))}(o.pathFilter),i.length>0&&t.push({prefix_filter:{prefix_path:i}}),0===t.length&&t.push({all:1}),{and:{filters:t}}}()}]},outputs:{select_object:["physicalid","ds6w:label","ds6w:type","ds6w:status","IPML.IconName"],hits:{predefined_computation:["icons"]}}};if(o.isMfg){let e=i?"(flattenedtaxonomies:reltypes/DELFmiFunctionInstance)":"((flattenedtaxonomies:reltypes/DELFmiFunctionInstance)) OR ((flattenedtaxonomies:types/DELFmiProcessImplementCnx)) OR((flattenedtaxonomies:types/DELFmiProcessOutputPrereqMaterializationCnx)) OR ((flattenedtaxonomies:reltypes/VPMInstance)) OR((flattenedtaxonomies:reltypes/VPMRepInstance))";n.batch.expands[0].graph={descending_condition_relation:{uql:e}}}return n}(o))),n},E=function(e,t){a.updateHideShowColumn(t,e)};g&&b&&y&&y.graphicData&&y.graphicData.length>0&&(a?Promise.resolve(a):b.getComponentPromise(s,{executionContext:m.getOption("executionContext"),columns:S(),readOnly:b.getMode()===D.VIEWERMODES.WORKINSTRUCTIONS,event:m.getOption("eventCollection").getViewerCtrlEventHnd(),getNLSValue:m.getNLSValue}).then((e=>{a=e}))).then((async function(){var t,o,l;a?(a.toggleProgressBar(!0),t=await async function(){var e={mfgItems:[],resources:[]},t=n.getParsedBuildUpSettings(await h.getBuildUpSettings());return y.graphicData.forEach((function(o){o.category&&o.visibility&&(-1!==Object.keys(t).indexOf(o.category)?e.mfgItems.push(o):e.resources.push(o))})),e}(),l=w({id:C(t.mfgItems[0]),pathFilter:t.mfgItems.map((e=>e.path)),isMfg:!0}),o=w({id:C(t.resources[0]),pathFilter:t.resources.map((e=>e.path))}),e.Promise.all([l,o]).then((function(e){var o=[];e&&e.length>0&&e.forEach((function(e){e&&e.results&&e.results.length>0&&(o=o.concat(e.results))})),o.length>0?(a.create(function(e){var o,n=[],l=(o={},e.forEach((function(e){e&&e.resourceid&&(o[e.resourceid]=e)})),o);return t.mfgItems.concat(t.resources).forEach((function(e){var t,o=e.path,a=o[o.length-1],s=l[a],d=Object.keys(f).indexOf(e.category)>-1?f[e.category]:f.resource,c=b.getHideShowBehavior().getCurrentVisibility(o);s&&n.push({label:s[D.EXPANDENUM.LABEL]?s[D.EXPANDENUM.LABEL]:"",grid:{color:e.color?e.color:"",status:s[D.EXPANDENUM.STATUS]?s[D.EXPANDENUM.STATUS].split(".")[1]:"",category:m.getNLSValue(d),path:o,hideShow3D:!1!==c},icons:Object.keys(f).indexOf(e.category)>-1?[s[D.EXPANDENUM.ICON]]:[(t=s[D.EXPANDENUM.IPML_ICON],r||(r=i.get3DSpaceUrl()+"/snresources/images/icons/small/"),t?r+t+".png":"")]})})),n}(o)),a.onSelect((function(e){b.highlightNode({path:[e.options.grid.path],highlight:e.isSelected()})})),a.onShowHide((function(e){var t=e.data.nodeModel,o=t.getAttributeValue("hideShow3D"),i=t.getAttributeValue("path"),n=b.getHideShowBehavior();i&&(o?n.showNode({path:i}):n.hideNode({path:i}))}))):(a.toggleProgressBar(!1),a.reset())})).catch((function(){a.toggleProgressBar(!1)}))):(a.toggleProgressBar(!1),a.reset()),function(){var e=m.getOption("eventCollection").getViewerCtrlEventHnd(),t={onGlobalBuildUpRemoved:c,onToolbarDestroy:c,onBuildupResetCmdComplete:u,onGlobalBuildUpComplete:u,onHighlightNode:a.highlight,onUnHighlightNode:a.unHighlight,onUnSelectNode:a.unSelect,onHideNode:E.bind(null,!1),onShowNode:E.bind(null,!0)};if(0===d.length)for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&d.push(e.subscribe(e.events[o],t[o]))}()}))};return{execute:function(t){var o,n;t&&t.context&&t.context.nodeModel&&t.context.nodeModel.options&&(n=(o=t.context.nodeModel.options).grid&&e.is(o.grid.data,"boolean")&&o.grid.data,i.trackChanges({category:"QuickActionToolBar",action:"Show_View_list",label:s,dims:{pd1:n}}),n?u():c())},destroy:c}};return e.is(a)||(a=new r),a})),define("DS/DELWebViewerToolbar/commands/ShowBuildupColorsCmd",["UWA/Core","DS/DELWebViewerToolbar/ToolbarContext","DS/DELWebViewerUtils/Utils"],(function(e,t,o){"use strict";var i,n=function(){var i="ShowBuildUpColors";return{execute:function(n){var l,a,r=t.get().options.getOption("eventCollection").getViewerCtrlEventHnd();n&&n.context&&n.context.nodeModel&&n.context.nodeModel.options&&(a=(l=n.context.nodeModel.options).grid&&e.is(l.grid.data,"boolean")&&l.grid.data?l.grid.data:null,o.trackChanges({category:"QuickActionToolBar",action:"Show_Buildup_Color_On_OFF",label:i,dims:{pd1:a}}),r.publish(r.events.onShowBuildupColorChange,{commandId:i,state:a}))},destroy:function(){}}};return e.is(i)||(i=new n),i})),define("DS/DELWebViewerToolbar/commands/ResetCmd",["UWA/Core","DS/DELWebViewerToolbar/ToolbarContext","DS/DELWebViewerUtils/Utils"],(function(e,t,o){"use strict";var i,n=function(){return{execute:function(){o.trackChanges({category:"QuickActionToolBar",action:"Reset_Visibility",label:"Reset"});let e=t.get(),i=e.viewerInterface,n=e.options.getOption("eventCollection").getViewerCtrlEventHnd();i.getHideShowBehavior().reset(),i.render(),n.publish(n.events.onBuildupResetCmdComplete,{success:!0})},destroy:function(){}}};return e.is(i)||(i=new n),i})),define("DS/DELWebViewerToolbar/commands/BuildupDisplayOptionsCmd",["UWA/Core","DS/DELWebViewerToolbar/ToolbarContext","DS/DELWebViewerToolbar/DisplayOptionsColumns","DS/DELPPRData/Buildup/BuildUpSettings","DS/DELWebViewerUtils/Utils","text!DS/DELWebViewerToolbar/assets/json/BuildUpDisplayOptionsToolbar.json"],(function(e,t,o,i,n,l){"use strict";var a,r=function(){var a,r,s,d="BuildUpDisplayOptions",c={current:"BuildUp.Category.Current",previousinsystem:"BuildUp.Category.PreviousInSystem",previousfromprevioussystem:"BuildUp.Category.Previous",disassembled:"BuildUp.Category.Removed",context:"BuildUp.Category.Context",parallel:"BuildUp.Category.Parallel"},u=[],p=function(e){for(let t in o)Object.prototype.hasOwnProperty.call(o,t)&&(o[t].text=e.getNLSValue("DisplayOptions.Title."+t),o[t].description=e.getNLSValue("DisplayOptions.Description."+t));return Object.values(o)},g=function(){a&&(a.destroy(),a=null),u.forEach((function(e){e.handler.unSubscribe(e.token)})),u=[]},b=async function(o){let n,l,a=t.get()||{},r=a.toolbarInterface;var s,d,u;o&&a&&r&&(s=await r.getBuildUpSettings(),d=[],(u=i.getParsedBuildUpSettings(s))&&Object.keys(c).forEach((function(e){var t=u[e];t&&d.push(Object.assign({},t,{category:e},{color:i.getCategoryColor(s,e)}))})),n=d,l=function(t,o){var i=[];return e.is(t,"array")&&t.length>0&&o&&t.forEach((function(e){var t=o.getNLSValue(c[e.category]);i.push({label:t,text:e.text,grid:{visibility:e.visibility,category:t,opacity:parseInt(e.opacity)/255,withColor:e.withColor,color:e.color},categoryName:e.category})})),i}(n,a.options),o.create(l))},h=async function(){b(a)},m=function(){var o=t.get(),i=o.viewerInterface,n=o.options,c=n.getOption("mappingKeys");r=n.getOption("eventCollection").getViewerCtrlEventHnd(),s=n.getOption("eventCollection").getModelCtrlEventHnd(),i.getComponentPromise(d,{columns:p(n),executionContext:n.getOption("executionContext"),toolbarConfig:JSON.parse(l,(function(t,o){return e.is(o,"string")&&o.includes("NLS.")?n.getNLSValue(o.substring(4)):o})),readOnly:i.getMode()===c.VIEWERMODES.WORKINSTRUCTIONS,event:r,getNLSValue:n.getNLSValue}).then((async function(e){e&&(!function(){if(r&&s){let e=[{name:r.events.onGlobalBuildUpRemoved,callback:g,handler:r},{name:r.events.onToolbarUpdate,callback:h,handler:r},{name:r.events.onToolbarDestroy,callback:g,handler:r}];if(0===u.length)for(let t of e)u.push({handler:t.handler,token:t.handler.subscribe(t.name,t.callback)})}}(),a=e,b(e))}))};return{execute:function(t){var o,i;t&&t.context&&t.context.nodeModel&&t.context.nodeModel.options&&(i=(o=t.context.nodeModel.options).grid&&e.is(o.grid.data,"boolean")&&o.grid.data,n.trackChanges({category:"QuickActionToolBar",action:"Display_Buildup_options",label:d,dims:{pd1:i}}),i?m():g())},reset:function(){let e,o=t.get();o&&o.options&&o.options.getOption&&(e=o.options.getOption("eventCollection").getViewerCtrlEventHnd(),e.publish(e.events.onBuildUpDisplayOptionsReset))},destroy:g}};return e.is(a)||(a=new r),a}));