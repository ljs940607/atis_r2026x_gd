define("DS/DELMCBUserDefAdmin/utils/PlatformServices",["UWA/Class/Promise","UWA/Core","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/PlatformAPI/PlatformAPI","DS/WAFData/WAFData"],(function(e,t,i,o,n){"use strict";var r="?tenant=",a="onpremise",l=0,s=1,c=2,u=0;let p=null,d={};const m={platformServices:p,securityContexts:d,getCurrentTenantIndex:function(){const e=window.widget;if(!Array.isArray(p))throw new Error("Platform services have not been initialized correctly");let i="";i="undefined"!=typeof dscef?this.parseTenantIdFromURL():e.getValue("x3dPlatformId");let o=-1;if(t.is(i,"string"))for(let e=0;e<p.length;e++)p[e].platformId===i&&(o=e);return-1===o?0:o},getSecurityContexts:function(t){var i={},o=window.widget;return i.method="GET",i.headers={Accept:"application/json","Content-Type":"application/json","Accept-Language":o.lang?o.lang:o.getValue("lang")},i.cache=-1,new e((function(e,o){i.onComplete=function(t){e(JSON.parse(t))},i.onFailure=function(e){o(e)};var r=m.getCurrentTenantIndex(),a=p[r].platformId;n.authenticatedRequest(t+"/resources/modeler/pno/person?tenant="+a+"&current=true&select=preferredcredentials&select=collabspaces",i)})).then((function(e){var t,i=function(e,t,i){return"ctx::"+i+"."+t+"."+e},o=function(e,t,i){return""===t?e+" ● "+i:e+" ● "+t+" ● "+i},n=function(e){var t="",i="",o="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];switch(n){case"organization":t=r.name;break;case"role":i=r.name,o=r.nls?r.nls:i}}return{org:t,role:i,roleNls:o}},r=e.pid,a=[],l="",s="",c="";for(var p in e.preferredcredentials)if(e.preferredcredentials.hasOwnProperty(p)){var d=e.preferredcredentials[p];switch(p){case"collabspace":l=d.name;break;case"organization":s=d.name;break;case"role":c=d.name}}t=i(l,s,c);var m=[];for(var g in e.collabspaces)if(e.collabspaces.hasOwnProperty(g))for(var f=e.collabspaces[g],v=0;v<f.couples.length;v++){var P=n(f.couples[v]);m.push(P.org)}var D=m.every((function(e,t,i){return e===i[m.length-1]}));for(var y in e.collabspaces)if(e.collabspaces.hasOwnProperty(y))for(var S=e.collabspaces[y],h=0;h<S.couples.length;h++){var b=n(S.couples[h]),C=i(S.name,b.org,b.role),w=S.title?S.title:S.name,I={csName:w,label:o(w,D?"":b.org,b.roleNls),value:C};t===C&&(I.isDefault=!0),a.push(I)}return""!==l&&""!==s&&""!==c||a.length>0&&(t=a[u].value),{userId:r,securityContext:t,cspaces:a}}))},parseTenantIdFromURL:function(){let e=null;const t=window.top.location.href.split("?");if(t instanceof Array)for(let i=0;i<t.length;i++)if(t[i].indexOf("tenantID")>-1){e=t[i].split("=")[1]}return e},getWebInWinOptions:function(t){if("","undefined"!=typeof dscef){var i=location.href.split("?"),o=(i[1].split("="),i[2].split("=")[1].split(";")),n=o[0].split(":"),r=o[1].split(":"),a=o[2].split(":"),l=o[3].split(":"),s=o[4].split(":"),c=o[5].split(":");n[1],r[1],a[1],l[1],s[1],c[1];return new e((function(e,t){window.dscef.getMyAppsURL().then((function(i){i?e({myAppsBaseUrl:i,userId:c[1],lang:widget.lang?widget.lang:widget.getValue("lang")}):t(new Error("Issue while retrieveing the my apps url"))}))}))}return e.resolve("")}};return{_internals:m,async init(){var t=this;if(null!==p)return e.resolve();let o=await m.getWebInWinOptions({});return new e((function(e,n){i.getPlatformServices({config:o,onComplete:function(i){p=t._internals.platformServices=i,e()},onFailure:function(e){n(e)}})})).then((function(){return m.getSecurityContexts(t.get3DSpaceUrl())})).then((function(e){return d=t._internals.securityContexts=e,t}))},isCloudEnvironment:function(){var e=!1,i=window.widget.getValue("x3dPlatformId");t.is(i,"string")&&""!==i&&(e=-1===i.toLowerCase().indexOf(a));return e},get3DSpaceUrl:function(){var e=m.getCurrentTenantIndex();if(void 0===p[e]["3DSpace"])throw new Error("No 3DSpace URL available for this tenant");return p[e]["3DSpace"]},getSecurityContexts:function(){return d},getSecurityContext:function(){var e,i=window.widget;if(e=i.hasPreference("securityContext")&&i.getPreference("securityContext")?i.getPreference("securityContext").value:i.getValue("securityContext"),t.is(e,"string")&&e.contains("ctx::")){var o=e.split("::");return o[o.length-1]}return e},getTenants:function(){var e=[];for(var t in p)p.hasOwnProperty(t)&&e.push({label:p[t].displayName,value:p[t].platformId});return{platforms:e,tenant:this.getTenant()}},getTenant:function(){var e=m.getCurrentTenantIndex();return p[e].platformId},getCurrentCredentials:function(){var e=this.getSecurityContext().split(".");return 3!==e.length?{role:"",organization:"",collaborativeSpace:""}:{role:e[l],organization:e[s],collaborativeSpace:e[c]}},getUserName:function(){return o.getUser().login},getUserImage:function(e,t){var i="";return t&&"mini"===t.format&&(i="/format/mini"),this.assembleURLFor3DSwym("/api/user/getpicture/login/"+e+i)},assembleURLFor3DSpace:function(e,i){const o=this;let n="";if(t.is(i,"string")&&i.length>0){if("&"!==i.charAt(0))throw new Error("The parameters argument should start with &");n=i}else n="";let a="";return-1===e.indexOf(r)&&(a=r+o.getTenant()),o.get3DSpaceUrl()+e+a+n},assembleURLFor3DSwym:function(e,i){const o=this;let n="";if(t.is(i,"string")&&i.length>0){if("&"!==i.charAt(0))throw new Error("The parameters argument should start with &");n=i}else n="";let a="";return-1===e.indexOf(r)&&(a=r+o.getTenant()),o.get3DSwymUrl()+e+a+n}}})),define("DS/DELMCBUserDefAdmin/utils/CodeGenerator",["UWA/Core","text!DS/DELMCBUserDefAdmin/assets/PrimitivesDef.json"],(function(e,t){var i,o=function(e){for(var t=[],i=[],o=(e=(e=String(e)).toString(),!0),n=0;o||r>=0;){o=!1;var r=e.search("//@"),a=e.search("@//");if(r>=0){e.substring(1,4);t[n]=e.substring(r+3,a);let o=(e=(e=e.replace("//@","")).replace("@//","")).search("//comment@"),l=e.search("@comment//");o>=0&&l>=0&&(i[n]=e.substring(o+10,l),e=(e=e.replace("//comment@","")).replace("@comment//","")),n++}}return[t,i]},n=function(e){e.forEach(((t,i)=>e[i]=t.trim()));let t="",i="";return e.forEach(((o,n)=>{isNaN(o)?(e=>-1!=e.indexOf("\\[")+2&&-1!=e.lastIndexOf("]"))(o)?t+=(e=>{let t=e.indexOf("\\[")+2,i=e.lastIndexOf("]"),o=e.substring(t+1,i);if(e=e.slice(0,t),!isNaN(o))return"resultStep"+e+".get("+o+")"})(o):t+=o:t+="resultStep"+o,n!==e.length-1&&(t+=".merge(",i+=")")})),t+i};return{getPrimitives:function(){return null==i&&(i=JSON.parse(t)),i},getTagsFromJSCode:function(e){for(var t=[],[i,n]=o(e),r=0;r<i.length;r++){const e=/(?<!\|)\|(?!\|)/;let o=i[r].split(e);t.push({primitive:o[0],input1:o[1],input2:o[2],input3:o[3],inputCommment:n[r]})}return t},generateJSCode:function(e,t){const o="    ",r="        ",a=r+r+r+r+o;var l="";new Set;const s={PRD:"Product",SEL_PRD:"Product",PRCS:"Process",SEL_PRCS:"Process",PROD_SYS:"System",SEL_PROD_SYS:"System",WK_PL:"WorkPlan",SEL_WK_PL:"WorkPlan",RSC:"Resource",SEL_RSC:"Resource",CPBL_RSC:"capableResource",SEL_CPBL_RSC:"capableResource"};let c=0;t.forEach((function(e){var t=e.options.grid;(e=>{let t=new Set;return e.forEach((e=>{e&&e.includes("SEL_")&&e.split(",").forEach((e=>e.includes("SEL_")?t.add(e):null))})),t})([t.input1,t.input2,t.input3]).forEach((e=>{l+=",\n",l+=a+'{name:"'+e+'", type:"NavigationSet"}'})),c+=1}));var u,p,d='var params = proc.declareParameters([{name:"PRD",  type:"NavigationSet"},\n'+a+'{name:"PRCS", type:"NavigationSet"},\n'+a+'{name:"PROD_SYS",  type:"NavigationSet"},\n'+a+'{name:"WK_PL",  type:"NavigationSet"},\n'+a+'{name:"RSC",  type:"NavigationSet"},\n'+a+'{name:"CPBL_RSC",  type:"NavigationSet"}'+l+"],\n"+a+'[{name:"ConfigurationsVal", type:"Filters"}]);\n\nvar DELPPRExpandPrimitive = Java.type("com.dassault_systemes.pprcompletion.primitives.DELPPRExpandPrimitive");\nvar DELPPRFilterPrimitive = Java.type("com.dassault_systemes.pprcompletion.primitives.DELPPRFilterPrimitive");\nvar ExpandPrimitivesIndex = Java.type("com.dassault_systemes.pprcompletion.primitives.DELPPRExpandPrimitive");\nvar PrimitiveContext3D \t = Java.type("com.dassault_systemes.pprcompletion.primitives.DELPPRContext3DPrimitive");\nvar ExpandPrimitives     = Java.type("com.dassault_systemes.completion.service.ExpandPrimitives");\nvar NavigationPrimitives = Java.type("com.dassault_systemes.completion.service.NavigationPrimitives");\nvar I3DNavigationPrimitives = Java.type("com.dassault_systemes.pprcompletion.primitives.DELPPRNavigatePrimitive");\nvar FsxNavigationPrimitives = Java.type("com.dassault_systemes.fsx.completion.service.FsxNavigationPrimitives");\nvar FilterServices \t\t= Java.type("com.dassault_systemes.completion.service.FilterServices");\nvar CompletionServicesConstants = Java.type("com.dassault_systemes.completion.service.CompletionServicesConstants");\nvar PrimitiveScope = Java.type("com.dassault_systemes.pprcompletion.primitives.DELPPRScopePrimitive");\nvar DebugTimer = Java.type("com.dassault_systemes.completionServices.base.DebugTimer");\nvar System = Java.type("java.lang.System");\nvar navSets = [PRD, PRCS, PROD_SYS, WK_PL, RSC, CPBL_RSC];\n\nmql.startTransaction(false);\n\nCompletionProcedure.runFunction (ConfigurationsVal, navSets, function(context, outputData) {\n\n'+o+'var CurrCompletionID = "'+e.ProcID+'";\n\n';for(p=0;p<c;p++){if("Open"===(u=t[p].options.grid).primitive||"stopAt"===u.primitive){C(u);continue}let e=i.find((e=>e.id===u.primitive));if(!e)continue;let r=p+1;var m=u.input1.replace(/\s+/g,"").split(","),g=n(m),f="";if(void 0!==u.input2){let t=(f=u.input2.trim()).split(",");if("cutOccurrences"===u.primitive)d+=o+(D="var clause_"+r)+" = "+f+";\n",f="clause_"+r;else void 0!==e.arg2&&"NAVSET"==e.arg2&&(f=n(t));f.length>0&&(f=", "+f)}var v="";if(void 0!==u.input3){let t=(v=u.input3.replace(/\s+/g,"")).split(",");"ModifyContextWithProximityVolume"===u.primitive||"ModifyContextWithBoundingBoxVolume"===u.primitive?v="DELPPRFilterPrimitive.VolumeMode."+v:void 0!==e.arg3&&"NAVSET"==e.arg3&&(v=n(t)),v.length>0&&(v=", "+v)}var P=e.xclass,D="var resultStep"+r,y="";e.arg2&&void 0!==u.input2&&(y="|"+u.input2);var S="";if(e.arg3&&void 0!==u.input3&&(S="|"+u.input3),d+=o+"//@"+u.primitive+"|"+u.input1+y+S+"@//\t#"+r+"\n","string"!=typeof u.inputCommment&&(u.inputCommment=""),d+=o+"//comment@"+u.inputCommment+"@comment//\n",d+=o+"var Step"+r+'Timer = new DebugTimer (context, 0, "resultStep'+r+'", true);\n',"merge"===u.primitive)isNaN(m[0])?d+=o+D+" = "+m[0]+" = "+g+";\n":d+=o+D+" = resultStep"+m[0]+" = "+g+";\n";else{let e=u.primitive;"fastenersAnalysisBothSidesLegacy"===e&&(e="fastenersAnalysisBothSides");var h="context, ";"compact"!==u.primitive&&"keepRoot"!==u.primitive||(h=""),d+=o+D+" = "+P+"."+e+" ("+h+g+f+v+");\n"}d+=o+"Step"+r+"Timer.complete();\n\n"}function b(e){let o=e.split(","),n=parseInt(o[0]);if(isNaN(n))return s[o[0]];let r=t[n-1].options.grid,a=i.find((e=>e.id===r.primitive));return a?"IdentifyFromInput"===a.returntype?b(r.input1):"Array"===a.returntype?o[0].includes("[0]")?s.PRD:o[0].includes("[1]")?s.PRCS:"None":a.returntype:"None"}function C(e){let t="";"Open"===e.primitive?d+=o+"//@Open|"+e.input1+"|1@//\n":"stopAt"===u.primitive&&(d+=o+"//@stopAt|"+e.input1+"|1@//\n",t="StopAt"),"string"!=typeof e.inputCommment&&(e.inputCommment=""),d+=o+"//comment@"+e.inputCommment+"@comment//\n";let i=e.input1.split(","),r=[],a=[],l=[],s=[],c=[],p=[];for(let e=0;e<i.length;e++){let t;i[e]=i[e].trim(),t=b(i[e]),"Product"==t?r.push(i[e]):"Process"==t?a.push(i[e]):"System"==t?l.push(i[e]):"Resource"==t?s.push(i[e]):"WorkPlan"==t?c.push(i[e]):"capableResource"==t&&p.push(i[e])}r.length>0&&(d+=o+`outputData.add ("${t}Product", `+n(r)+");\n"),a.length>0&&(d+=o+`outputData.add ("${t}Process", `+n(a)+");\n"),l.length>0&&(d+=o+`outputData.add ("${t}System", `+n(l)+");\n"),c.length>0&&(d+=o+`outputData.add ("${t}WorkPlan", `+n(c)+");\n"),s.length>0&&(d+=o+`outputData.add ("${t}Resource", `+n(s)+");\n"),p.length>0&&(d+=o+`outputData.add ("${t}capableResource", `+n(p)+");\n"),d+="\n"}return d+="});\n\n",d+="mql.abortTransaction();"}}})),define("DS/DELMCBUserDefAdmin/utils/Services",["DS/WAFData/WAFData","UWA/Class/Promise","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/DELMCBUserDefAdmin/utils/PlatformServices"],(function(e,t,i,o,n){"use strict";const r=function(e){const t=e&&UWA.is(e.version,"string")?e.version:"1.0";return{Accept:"application/json","Content-Type":"application/json","Accept-Language":window.widget.lang,"DS-API-Version":t,SecurityContext:"ctx::"+n.getSecurityContext()}};return{FetchProcedureDetails:function(i){return new t(((t,o)=>{var a={method:"POST"};a.headers=r(),a.data=JSON.stringify({ProcID:i.ProcID}),a.cache=-1,a.onComplete=function(e){t(e)},a.onFailure=function(e){console.log("GetProcedureDetails failure response:"),console.log(e),o(e)},e.authenticatedRequest(n.assembleURLFor3DSpace("/resources/delmcb/api/UDOWebServices/GetProcedureDetails"),a)}))},DeployProcedure:function(i){return new t(((t,o)=>{i.ProcUsageContext_Open=!0,i.ProcUsageContext_XPDM=!1;var a={method:"POST"};a.headers=r(),a.data=JSON.stringify(i),a.cache=-1,a.onComplete=function(e){t(e)},a.onFailure=function(e){console.log("Deploy failure response:"),console.log(e),o(e)},e.authenticatedRequest(n.assembleURLFor3DSpace("/resources/delmcb/api/UDOWebServices/Deploy"),a)}))},FetchListOfProcedures:function(){return new t(((t,i)=>{var o={method:"GET"};o.headers=r(),o.type="json",o.timeout=6e5,o.cache=-1,o.onComplete=function(e){t(e.Scenarios)},o.onFailure=function(e){console.log("GetProcedureList failure response:"),console.log(e),i(e)},e.authenticatedRequest(n.assembleURLFor3DSpace("/resources/delmcb/api/UDOWebServices/GetProcedureList"),o)}))},DeleteProcedure:function(i){return new t(((t,o)=>{var a={method:"POST"};a.headers=r(),a.cache=-1,a.data=JSON.stringify({ProcID:i}),a.onComplete=function(e){t(e)},a.onFailure=function(e){console.log("Delete failure response:"),console.log(e),o(e)},e.authenticatedRequest(n.assembleURLFor3DSpace("/resources/delmcb/api/UDOWebServices/Delete"),a)}))},ImportProceduresBatch:function(i){return new t((async(t,o)=>{const a=new FormData;Object.entries(i).forEach((e=>{a.append(e[0],e[1])}));var l={method:"POST"};l.headers=r(),delete l.headers["Content-Type"],l.cache=-1,l.data=a,l.onComplete=function(e){t(e)},l.onFailure=function(e){console.log("Delete failure response:"),console.log(e),o(e)},await e.authenticatedRequest(n.assembleURLFor3DSpace("/resources/delmcb/api/UDOWebServices/DeployProceduresService"),l)}))},NotificationMessage(e,t,n,r){window.notifs=i,o.setNotificationManager(window.notifs);var a={level:n,title:e,message:t,sticky:!1};r?o.inject(r):o.inject(document.body),window.notifs.addNotif(a)},async GetCummulativeJSON(e){let i=[];const o=[];for(let t in e)o.push(this.ProcedureInfoAsJson(e[t].options.grid));return await t.all(o).then((e=>{for(var t=0;t<e.length;t++)i.push(e[t])})),i},ProcedureInfoAsJson(e){return this.FetchProcedureDetails(e).then((t=>{var i={};for(var o in e)"ModificationTime"!==o&&(i[o]=e[o]);let n=JSON.parse(t);i.ProcID;n.code=n.code.replace("program",""),n.code=n.code.replace(i.ProcID,""),n.code=n.code.replace("code = ","");let r={...i,...n};return r.code=r.code.replace(/&/g,"&amp;"),r}))}}})),define("DS/DELMCBUserDefAdmin/ProcedureEditor",["UWA/Core","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/TooltipModel","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/DataGridView/DataGridView","DS/DELMCBUserDefAdmin/utils/CodeGenerator","DS/DELMCBUserDefAdmin/utils/Services","i18n!DS/DELMCBUserDefAdmin/assets/nls/DELMCBUserDefAdmin","text!DS/DELMCBUserDefAdmin/assets/Applist.json","text!DS/DELMCBUserDefAdmin/assets//PrimitivesDef.json","DS/Form/Form","DS/Core/WebUXGlobalEnums"],(function(e,t,i,o,n,r,a,l,s,c,u,p,d,m){"use strict";var g,f=null,v=null,P={ProcID:"",modProg:!1,ProcCategory:"Custo",ProcUsageContext_Open:!0,ProcUsageContext_XPDM:!1,ProcDisplayName:"",ProcShortDescription:"",ProcVisibility:"DEV",ProcAction:[],ProcInputObjType:"",ProcOpenApp:"",JavascriptCode:"",ProcWinWeb:"WIN_AND_WEB"},D=!1,y=new Set;const S=["MCB_OPEN","MCB_EXPLORE","MCB_REVISION","MCB_SHARE"],h={PRD:"Product",SEL_PRD:"Product",PRCS:"Process",SEL_PRCS:"Process",PROD_SYS:"System",SEL_PROD_SYS:"System",WK_PL:"Workplan",SEL_WK_PL:"Workplan",RSC:"Resource",SEL_RSC:"Resource",CPBL_RSC:"capableResource",SEL_CPBL_RSC:"capableResource"};var b=!1;return{Launch:function(C,w,I){if(null!=f)return;var E=JSON.parse(JSON.stringify(P));""!=C&&(v=C.ProcID,E=JSON.parse(JSON.stringify(C)));var M=JSON.parse(p),N={};M.forEach((e=>{N[e.id]={},e.hasOwnProperty("input1")&&(N[e.id].input1=e.input1),e.hasOwnProperty("input2")&&(N[e.id].input2=e.input2),e.hasOwnProperty("input3")&&(N[e.id].input3=e.input3),e.hasOwnProperty("returntype")&&(N[e.id].returntype=e.returntype),e.hasOwnProperty("pattern1")&&(N[e.id].pattern1=e.pattern1),e.hasOwnProperty("pattern2")&&(N[e.id].pattern2=e.pattern2),e.hasOwnProperty("pattern3")&&(N[e.id].pattern3=e.pattern3)}));var A=document.createElement("div");A.className="container-proceditor-panel";const O=[{label:c.get("visible.inwork"),value:"DEV"},{label:c.get("visible.production"),value:"ALL"},{label:c.get("visible.obsolete"),value:"OBSOLETE"}],F=[{label:c.get("nodetype.any"),value:"Any"},{label:c.get("nodetype.product"),value:"EBOM"},{label:c.get("nodetype.item"),value:"MBOM"},{label:c.get("nodetype.workplan"),value:"Workplan"},{label:c.get("nodetype.system"),value:"System"},{label:c.get("nodetype.resource"),value:"Resource"}],R=[{label:c.get("winWebType.win_and_web"),value:"WIN_AND_WEB"},{label:c.get("winWebType.web"),value:"WEB"},{label:c.get("winWebType.win"),value:"WIN"}];let L=[];for(let e in JSON.parse(u).apps)JSON.parse(u).apps.hasOwnProperty(e)&&L.push({value:e,label:JSON.parse(u).apps[e]});var x=new d({invalidDisplayPolicy:m.InvalidDisplayPolicy.Always,model:[{id:"ProcID",label:c.get("title.procedureID"),typeRepresentation:"string",value:E.ProcID,readOnly:!1,requiredFlag:!0,helpText:c.get("error.procedureID"),semantics:{pattern:"^[A-Za-z0-9_\\-]+(\\.\\d+){3}$"},invalidTooltip:new o({title:c.get("error.invalidInput"),shortHelp:c.get("error.procedureID"),mouseRelativePosition:!1,position:"bottom"}),onNodeLiveUpdate:({value:e})=>{const t=new RegExp("^[A-Za-z0-9_-]+(\\.\\d+){3}$");if(U.disabled=!0,t.test(e)){var i=[];v&&(i=v.split("."));var o=e.split(".");"Custo"!==E.ProcCategory&&i[0]===o[0]||(U.disabled=!1)}}},{id:"ProcDisplayName",label:c.get("title.procedureName"),typeRepresentation:"string",value:E.ProcDisplayName,readOnly:!1,requiredFlag:!0,semantics:{pattern:".*\\S.*"}},{id:"ProcShortDescription",label:c.get("title.procedureDesc"),requiredFlag:!0,typeRepresentation:"multilineString",height:40,value:E.ProcShortDescription,context:"stdTemplate",semantics:{pattern:".*\\S.*"}},{id:"ProcVisibility",label:c.get("title.procedureVisibility"),requiredFlag:!0,typeRepresentation:"customEnumMember",semantics:{possibleValues:O},value:E.ProcVisibility},{id:"ProcAction",label:c.get("title.procedureAction"),requiredFlag:!0,typeRepresentation:"string",value:"string"!=typeof E.ProcAction?["MCB_OPEN","MCB_EXPLORE","MCB_REVISION","MCB_SHARE"]:"BOTH"===E.ProcAction.split(",")[0]?["MCB_OPEN","MCB_EXPLORE"]:E.ProcAction.split(","),semantics:{allowMultipleValuesFlag:!0,possibleValues:[{label:c.get("action.udo"),value:"MCB_OPEN"},{label:c.get("action.ude"),value:"MCB_EXPLORE"},{label:c.get("action.udr"),value:"MCB_REVISION"},{label:c.get("action.uds"),value:"MCB_SHARE"}]},requiredFlag:!0,tooltip:new o({title:c.get("action.title"),shortHelp:c.get("action.shortHelp")}),onNodeLiveUpdate:({value:e})=>{G.updateColumnView("primitive",{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1}),g.getRoots().forEach((e=>{e&&e._options&&e._options.grid&&"stopAt"===e._options.grid.primitive&&e.updateOptions({label:"",grid:{input1:"",input2:"",input3:"",inputCommment:"",primitive:""}})}))}},{id:"ProcNodeType",label:c.get("title.procedureNodeType"),requiredFlag:!0,typeRepresentation:"customEnumMember",semantics:{possibleValues:F},value:E.ProcNodeType&&""!==E.ProcNodeType?E.ProcNodeType:F[0].value,requiredFlag:!0},{id:"ProcOpenApp",label:c.get("title.openinapp"),requiredFlag:!0,typeRepresentation:"customEnumMember",semantics:{possibleValues:L},value:E.ProcOpenApp&&""!==E.ProcOpenApp?E.ProcOpenApp:L[0].value,requiredFlag:!0},{id:"ProcWinWeb",label:c.get("title.winOrWeb"),requiredFlag:!0,typeRepresentation:"customEnumMember",semantics:{possibleValues:R},value:function(){if(E.hasOwnProperty("ProcWinWeb"))return E.ProcWinWeb}(),requiredFlag:!0}]}).inject(A);let T="Custo"!=E.ProcCategory,_=new i({displayStyle:"smartIcon",label:"User Assistance",showLabelFlag:!0,icon:{iconName:"info",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){window.open("https://dsua.dsone.3ds.com/internal/English/?show=DelMsbUserMap/delmsb-ad-c-UDO-Procedure.htm&contextscope=all#r-navigateFromMBOMToEBOM","_blank","width=800,height=600")},tooltipInfos:new o({title:c.get("userAssistanceTooltipTitle"),shortHelp:c.get("userAssistanceTooltipBody")})}),U=new i({label:c.get("button.deploy"),disabled:T,onClick:e=>{if(x.getModelItem().every((e=>!1===e.invalidState&&e.value.length>0))){if(!1===b){if(G.getRowModelLength()<2)return void s.NotificationMessage(c.get("error.validationFailed"),c.get("error.MinimumNbStep"),"error",A);if(y.size)return s.NotificationMessage(c.get("error.validationFailed"),c.get("error.invalidInputs"),"error",A),void(D||(D=!0,y.forEach((e=>{G.updateCellView(e,{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1})}))))}E.ProcCategory="Custo",E.ProcID=x.getModelItem("ProcID").value,E.ProcDisplayName=x.getModelItem("ProcDisplayName").value,E.ProcShortDescription=x.getModelItem("ProcShortDescription").value,E.ProcVisibility=x.getModelItem("ProcVisibility").value,E.ProcAction=x.getModelItem("ProcAction").value.join(","),E.ProcNodeType=x.getModelItem("ProcNodeType").value,E.ProcOpenApp=x.getModelItem("ProcOpenApp").value,E.ProcWinWeb=x.getModelItem("ProcWinWeb").value,!1===b&&(E.JavascriptCode=l.generateJSCode(E,g.getChildren())),E.modProg=!1,null!=v&&v==E.ProcID&&(E.modProg=!0),s.DeployProcedure(E).then((e=>{var t=JSON.parse(e);if("S_OK"==t.result){E.ModificationTime=(new Date).toLocaleString();var i=[];i[0]=E,I&&I(i);var o=c.replace(c.get("msg.deploySuccess"),{procx:E.ProcID});s.NotificationMessage(c.get("msg.deploySuccessTitle"),o,"info")}else s.NotificationMessage(c.get("msg.deployFailTitle"),t.error_msg,"error")})),f.close(),f=null}else s.NotificationMessage(c.get("msg.deployFailTitle"),c.get("msg.missingProcProperties"),"error",A)}});f=new t({immersiveFrame:w,title:c.get("title.editProcedure"),content:A,height:750,width:1e3,resizableFlag:!0,activeFlag:!1,modalFlag:!0,buttons:{Ok:U,Cancel:new i({label:c.get("button.cancel"),onClick:function(e){f.close(),f=null}}),Help:_},minWidth:500});var B=document.getElementsByClassName("wux-controls-abstract wux-controls-button wux-ui-state-secondary wux-ui-style-smartIcon")[5];B.style.position="absolute",B.style.left="0px",f.addEventListener("close",(function(e){f&&(y.clear(),f=null,D=!1)}));var W=new e.Element("div");if(W.className="container-proceditor-table",W.inject(A),(g=new n).onNodeModelUpdate((function(e){y.clear(),G.updateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1})})),""!=C)s.FetchProcedureDetails(E).then((t=>{let i=JSON.parse(t);E.ProcAction=i.ProcAction,E.ProcAction||(E.ProcAction=S.join(","));var o=E.ProcAction.split(",");"string"!=typeof E.ProcAction&&(o=["MCB_OPEN","MCB_EXPLORE","MCB_REVISION","MCB_SHARE"]),"BOTH"===E.ProcAction.split(",")[0]&&(o=["MCB_OPEN","MCB_EXPLORE"]),x.updateModelItem("ProcAction",{value:o}),E.ProcNodeType=i.ProcNodeType,x.updateModelItem("ProcNodeType",{value:E.ProcNodeType}),E.ProcOpenApp=i.ProcOpenApp,E.ProcOpenApp&&""!==E.ProcOpenApp&&x.updateModelItem("ProcOpenApp",{value:E.ProcOpenApp}),E.hasOwnProperty("ProcWinWeb")&&x.updateModelItem("ProcWinWeb",{value:E.ProcWinWeb});let n="program   "+E.ProcID+" \n     code = ";i.code=i.code.replace(n,""),E.JavascriptCode=i.code;var a=l.getTagsFromJSCode(i.code);if(0===a.length){b=!0;var s=new e.Element("div");s.className="codeEditorContainer";var c=new e.Element("code");c.inject(s),c.innerText=i.code,W.empty(),s.inject(W)}else g.prepareUpdate(),a.forEach((function(e){var t=new r({label:e.primitive,grid:e});g.addRoot(t)})),g.pushUpdate()}));else{g.prepareUpdate();for(let e=0;e<6;e++){var V=new r({label:"",grid:{primitive:e<5?"":c.get("primitive.Open"),input1:"",input2:"",input3:"",inputCommment:""}});g.addRoot(V)}g.pushUpdate()}function k(t){let i=new RegExp("^[0-9]+\\[[0-9]+\\]$","g");if(!isNaN(t)){t=parseInt(t);let i=G.getNodeModelAtRowID(t-1)?.getAttributeValue("primitive"),o=N[i]?N[i].returntype:void 0;if(e.equals(o,"IdentifyFromInput")){let e=G.getNodeModelAtRowID(t-1)?.getAttributeValue("input1"),i=e?e.split(","):void 0;if(!i||!i.length)return;o=k(i[0])}return o}if(i.test(t)){let e=t.match(/\d+/g);if(0==e[1])return"Product";if(1==e[1])return"Process"}return h[t]}function J(e){let t="valid-editable-field",i="pattern"+e.columnID,o=e.nodeModel._options.grid.primitive;if(N[o]&&N[o].hasOwnProperty(i)){new RegExp(N[o][i],"g").test(e.cellModel)&&function(e){let t=N[e.nodeModel._options.grid.primitive],i="input"+e.columnID,o=e.cellModel.split(",");if(!t[i])return!0;let n="";for(let r=0;r<o.length;r++){if(o[r]=o[r].trim(),!isNaN(o[r])&&o[r]>e.nodeModel._rowID)return!1;let a=k(o[r]);if(!a)return!1;if("Any"!==t[i]&&!t[i].includes(a))return!1;if("Open"!==e.nodeModel._options.grid.primitive&&"stopAt"!=e.nodeModel._options.grid.primitive)if(""===n)n=a;else if(n!==a)return!1}return!0}(e)?y.delete(e.cellID):(y.add(e.cellID),t=D?"incorrect-input-field":t),console.log(y)}else t="non-editable-field";return t}function j(e){return e.nodeModel?J(e):""}const q=[{text:c.get("title.step"),dataIndex:"primitive",editableFlag:!0,sortableFlag:!1,editionPolicy:"EditionOnClick",getCellTypeRepresentation:function(e){let t=x.getModelItem("ProcAction");return t&&t.value&&1===t.value.length&&t.value[0]===S[2]?"primitivesEnumType2":"primitivesEnumType"},getCellClassName:function(e){let t="valid-editable-field";return e&&e.rowID>0&&e.cellModel&&!e.cellModel.length?(y.add(e.cellID),t=D?"incorrect-input-field":t):y.delete(e.cellID),t}},{text:c.get("title.param1"),dataIndex:"input1",typeRepresentation:"string",editableFlag:!0,sortableFlag:!1,editionPolicy:"EditionOnClick",hasCellValue:function(e){if(e.columnID>0&&e.rowID>=0){let t=e.nodeModel.getAttributeValue("primitive");if(!N[t])return e.nodeModel._options.grid.input1="",!1}return!0},getCellClassName:j},{text:c.get("title.param2"),dataIndex:"input2",typeRepresentation:"string",editableFlag:!0,sortableFlag:!1,editionPolicy:"EditionOnClick",hasCellValue:function(e){if(e.columnID>0&&e.rowID>=0){let t=e.nodeModel.getAttributeValue("primitive");if(N[t]&&!N[t].pattern2)return e.nodeModel._options.grid.input2="",!1}return!0},getCellClassName:j},{text:c.get("title.param3"),dataIndex:"input3",typeRepresentation:"string",editableFlag:!0,sortableFlag:!1,editionPolicy:"EditionOnClick",hasCellValue:function(e){if(e&&e.columnID>0&&e.rowID>=0){let t=e.nodeModel.getAttributeValue("primitive");if(N[t]&&!N[t].pattern3)return e.nodeModel._options.grid.input3="",!1}return!0},getCellClassName:j},{text:c.get("title.comments"),dataIndex:"inputCommment",typeRepresentation:"string",editableFlag:!0,sortableFlag:!1,editionPolicy:"EditionOnClick",className:"valid-editable-field",hasCellValue:function(e){if(e&&e.columnID>0&&e.rowID>=0){if(e.nodeModel.getAttributeValue("primitive"))return!0}return!1},getCellClassName:function(e){let t="non-editable-field";if(e&&e.columnID>0&&e.rowID>=0){e.nodeModel.getAttributeValue("primitive")&&(t="valid-editable-field")}return t}}];var X=e.createElement("div",{class:"proceduregridContainer",styles:{height:"380px",width:"100%",position:"relative","margin-Top":"10px"}});X.inject(W);var G=new a({treeDocument:g,columns:q,fontIconFamily:WUXManagedFontIcons.font3DS,rowDragEnabledFlag:!0,showModelChangesFlag:!0,rowSelection:"multiple",cellSelection:"single",defaultColumnDef:{editableFlag:!0},getCellTooltip:function(e){if(e.columnID>0&&e.rowID>=0){let t=l.getPrimitives(),i=e.nodeModel.getAttributeValue("primitive"),o=e.nodeModel.getAttributeValue("inputCommment"),n=t.find((e=>e.id===i));if(n){let t="primitive."+n.id+".tooltip"+e.columnID,i=c.get(t);return i===t&&(i=c.get("primitive.tooltip.unused")),4==e.columnID&&(i=""!=o&&null!=o?o:c.get("emptyComment.tooltip")),{shortHelp:i,updateModel:!1}}}return G.getCellDefaultTooltip(e)}});G.inject(X);var z={},H={},K={};l.getPrimitives().forEach((function(e){z[e.id]=c.get("primitive."+e.id)})),Object.keys(z).sort(((e,t)=>z[e]<z[t]?-1:z[e]>z[t]?1:0)).forEach((e=>{H[e]=z[e]})),Object.assign(K,H),delete H.stopAt;var $={primitivesEnumType:{stdTemplate:"enumCombo",semantics:{possibleValues:H,valueType:"enumValueToProperty"}}};G.getTypeRepresentationFactory().registerTypeRepresentations(JSON.stringify($));var Y={primitivesEnumType2:{stdTemplate:"enumCombo",semantics:{possibleValues:K,valueType:"enumValueToProperty"}}};G.getTypeRepresentationFactory().registerTypeRepresentations(JSON.stringify(Y));let Z=function(e,t){D=!0;const i=["input1","input2","input3"];for(let o=e+1;o<G.getModelLength();o++){let n=G.getNodeModelAtRowID(o).getAttributeValue("primitive");for(let r=0;r<i.length&&N[n]&&void 0!==N[n][i[r]];r++){let n=G.getNodeModelAtRowID(o)._options.grid[i[r]].trim().split(",").reduce(((i,o,n)=>{if(isNaN(o))return i+(n>0?", ":"")+o;let r="";return""!=o&&(r=parseInt(o),t?r>e&&r++:r>e&&r--),i+(n>0?", ":"")+r}),"");G.getNodeModelAtRowID(o).setAttribute(i[r],n)}}};G.onContextualEvent=function(e){let t=G.getNodesXSO().get();if(Array.isArray(t)&&0!==t.length||(t=[e.cellInfos.nodeModel]),!t.every((e=>"Open"!==e._options.grid.primitive)))return new Array;let i=e.collectionView.buildDefaultContextualMenu(e,{insertRow:1===t.length});return i.push({type:"PushItem",title:c.get("menu.deleterow"),action:{callback:function(){t.forEach((e=>{Z(e._rowID,!1),e.remove()}))}}}),i},G.insertRowCallback=function(e,t,i){Z(t,!0),e.setLabel("Inserted By InsertRow Cmd"),e.updateOptions({grid:{primitive:"",input1:"",input2:"",input3:"",inputCommment:""}})},w.inject(document.body)}}})),define("DS/DELMCBUserDefAdmin/DELMCBUserDefAdmin",["UWA/Core","DS/Windows/ImmersiveFrame","DS/Windows/Panel","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/Label","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Tweakers/GeneratedToolbar","DS/DataGridView/DataGridView","DS/DELMCBUserDefAdmin/ProcedureEditor","DS/DELMCBUserDefAdmin/utils/Services","DS/DELMCBUserDefAdmin/utils/PlatformServices","i18n!DS/DELMCBUserDefAdmin/assets/nls/DELMCBUserDefAdmin","DS/AdminUI_JSZipTools/JSZip","DS/UIKIT/Mask"],(function(e,t,i,o,n,r,a,l,s,c,u,p,d,m,g,f){"use strict";let v=null,P=null;var D=null,y=null;const S={async init(){const t=window.widget;await d.init();const i=d.getSecurityContexts();document.body.empty(),t.addPreference({name:"securityContext",type:"list",label:m.get("preferences.securityContext"),options:i.cspaces,defaultValue:i.securityContext});const o=d.getTenants();!0===d.isCloudEnvironment()&&e.is(o,"object")&&t.addPreference({name:"x3dPlatformId",type:"list",label:m.get("preferences.tenant"),options:o.platforms,defaultValue:o.tenant})},AddProcedurestoList:function(e){v.prepareUpdate(),e.forEach((function(e){"DEV"==e.ProcVisibility?e.ProcVisibilityDisplay=m.get("visible.inwork"):"ALL"==e.ProcVisibility?e.ProcVisibilityDisplay=m.get("visible.production"):"OBSOLETE"==e.ProcVisibility&&(e.ProcVisibilityDisplay=m.get("visible.obsolete"));let t="lightgrey";"Custo"!==e.ProcCategory&&(t="limegreen");let i=v.getRoots().find((t=>t.getAttributeValue("label")===e.ProcID));if(delete e.JavascriptCode,delete e.modProg,i)i.updateOptions({label:e.ProcID,grid:e,color:t});else{var o=new l({label:e.ProcID,grid:e,color:t});v.addRoot(o)}})),v.pushUpdate()},NewProcedure:function(){u.Launch("",P,S.AddProcedurestoList)},OpenProcedure:function(){let e=v.getSelectedNodes();if(e.length>0){let t=e[0].options.grid;u.Launch(t,P,S.AddProcedurestoList)}},DeleteProcedure:function(){let e=v.getSelectedNodes();if(0===e.length)return;let t=e.map((e=>e.options.label)).join("<br>"),i=m.get("delete.message"),r=new o({immersiveFrame:P,title:m.get("delete.title"),content:i+"<br>"+t,activeFlag:!1,buttons:{No:new n({onClick:function(e){r.close()}}),Yes:new n({onClick:function(t){let i="",o=0,a=0,l=[];e.forEach((e=>{let t=e.options.label,n=p.DeleteProcedure(t).then((n=>{if("S_OK"==JSON.parse(n).result){v.prepareUpdate(),v.removeRoot(e),v.pushUpdate(),o++;var l=m.replace(m.get("msg.deleteSuccess"),{procx:t});i+=l+"<br>"}else{a++;l=m.replace(m.get("msg.deleteFailMessage"),{procx:t});i+=l+"<br>"}r.title=m.get("delete.titleMessage"),r.content=i}));l.push(n)})),Promise.all(l).then((()=>{var t=m.get("msg.deleteSuccessTitle"),i=m.get("msg.deleteSuccessMessage"),n="info";o!=e.length&&a>0?(t=m.get("msg.deleteFailTitle"),i=m.get("msg.deletePartialFailMessage"),n="warning"):a===e.length&&(t=m.get("msg.deleteFailTitle"),i=m.get("msg.deleteAllFailMessage"),n="error"),p.NotificationMessage(t,i,n)})).finally((()=>{t.dsModel.dialog.customButtonsDefinition=[],t.dsModel.dialog.buttons={Close:new n({onClick:function(e){r.close()}})}}))}})}});r.show()},async ExportProcedure(){let e=v.getSelectedNodes();var t=await p.GetCummulativeJSON(e);let i={},o=new g;t.forEach((e=>{i[e.ProcID]={},Object.keys(e).forEach((t=>{"ProcID"!==t&&"code"!==t&&(i[e.ProcID][t]=e[t])})),o.file(e.ProcID+".udoproc.js",e.code)}));let n=JSON.stringify(i,null,2);o.file("Properties.json",n);let r=new Date,a=`procedures_${r.getFullYear()+"_"+(r.getMonth()+1)+"_"+r.getDate()+"_"+r.getHours()+"_"+r.getMinutes()+"_"+r.getSeconds()}.zip`;o.generateAsync({type:"blob"}).then((e=>{let t=document.createElement("a");t.href=URL.createObjectURL(e),t.setAttribute("download",a),document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},ImportProcedures:function(){var t=document.createElement("div");t.className="import-file";var i=new e.Controls.Input.File({attributes:{id:"ImportFileInput",accept:".zip"},className:"zip-file-input"}).inject(t),r=new o({immersiveFrame:P,title:m.get("title.importProcedure"),content:t,activeFlag:!1,width:800,visibleFlag:!0,modalFlag:!0,customButtonsDefinition:[{label:m.get("button.importProcedures"),emphasize:"primary",onClick:async function(e){f.mask(y),r.content=m.get("msg.importInProgress")+"<br>",e.dsModel.dialog.customButtonsDefinition=[],e.dsModel.dialog.buttons={Close:new n({onClick:function(e){r.close()}})},0===i.getInputElement().files.length&&(f.unmask(y),r.content=m.get("error.fileNotSelected"),e.dsModel.dialog.customButtonsDefinition=[],e.dsModel.dialog.buttons={Close:new n({onClick:function(e){r.close()}})});const t=i.getInputElement().files[0],o=await g.loadAsync(t);let a={};const l=[];let s=[];var c=[],u=[];u.push(p.FetchListOfProcedures().then((e=>{if(e.forEach((e=>{s.push(e.ProcID)})),s.length>0)return Promise.resolve()}))),await Promise.all(u),o.forEach((function(e,t){l.push(t.async("blob").then((async function(t){let i;if(e.endsWith(".json"))i=new File([t],e,{type:"application/json"}),a.Properties=i;else if(e.endsWith(".js")){i=new File([t],e,{type:"text/javascript"});let o=e.replace(".udoproc.js","");s.includes(o)?c.push(o):a[o]=i}})))})),await Promise.all(l),p.ImportProceduresBatch(a).then((t=>{let i=JSON.parse(t);if(f.unmask(y),r.content="",c.forEach((e=>{var t=m.replace(m.get("msg.procedureExistsAlready"),{procx:e});r.content+=t+"<br>"})),"E_FAIL"===i.result)return void(r.content=m.get("msg.deployFailTitle")+": "+i.message);var o=[];new Promise((e=>{const t=new FileReader;t.readAsText(a.Properties),t.addEventListener("load",(()=>{e(t.result)}),!1)})).then((e=>{let t=JSON.parse(e);var n=[];Object.keys(i).forEach((e=>{if(r.visibleFlag=!0,"S_OK"==i[e].result){let i=t[e];i.ProcID=e,i.ModificationTime=new Date,o.push(i),n.push(i.ProcID)}else if(!r.content.includes(e)){let o=t[e];o.ProcID=e,c.push(o.ProcID),r.content+=e+": "+m.get("msg.deployFailTitle")+" "+i[e].message+"<br>"}})),S.AddProcedurestoList(o),Object.keys(i).length==n.length?(p.NotificationMessage(m.get("msg.importSuccessTitle"),m.get("msg.allImportSuccess"),"info"),r.visibleFlag=!1):Object.keys(i).length==c.length?(p.NotificationMessage(m.get("msg.importFailTitle"),m.get("msg.allImportFail"),"error"),r.modalFlag=!1):(r.modalFlag=!1,r.title=m.get("msg.importFailTitle"),r.visibleFlag=!0,n.length>0&&n.forEach((e=>{var t=m.replace(m.get("msg.deploySuccess"),{procx:e});r.content+=t+"<br>"})),p.NotificationMessage(m.get("msg.partialImportTitle"),m.get("msg.partialImportMessage"),"warning"))})),e.dsModel.dialog.customButtonsDefinition=[],e.dsModel.dialog.buttons={Close:new n({onClick:function(e){r.close()}})}})).catch((function(){f.unmask(y),r.modalFlag=!1,p.NotificationMessage(m.get("msg.importFailTitle"),m.get("msg.importFailMessage"),"error"),r.content=m.get("msg.importFailMessage"),e.dsModel.dialog.customButtonsDefinition=[],e.dsModel.dialog.buttons={Close:new n({onClick:function(e){r.close()}})}}))},role:WUXCustomButtonRoleEnum.Validate}]})},async LaunchPanel(){await S.init(),P=new t({identifier:"MainPage"}),(y=document.createElement("div")).className="container-proclist-panel";var o={entries:[{id:"newProcedure",dataElements:{typeRepresentation:"functionIcon",tooltip:m.get("command.createProc"),label:"Add",icon:{iconName:"plus",fontIconFamily:1},action:{module:"DS/DELMCBUserDefAdmin/DELMCBUserDefAdmin",func:"NewProcedure"},position:"far",category:"1"}},{id:"deleteProcedure",tooltip:m.get("command.deleteProc"),disabled:1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},position:"far",category:"1",action:{module:"DS/DELMCBUserDefAdmin/DELMCBUserDefAdmin",func:"DeleteProcedure"}}},{id:"openProcedure",tooltip:m.get("command.openProc"),disabled:1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"open",fontIconFamily:1},position:"far",category:"1",action:{module:"DS/DELMCBUserDefAdmin/DELMCBUserDefAdmin",func:"OpenProcedure"}}},{id:"exportProcedure",tooltip:m.get("command.exportProc"),disabled:1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"export",fontIconFamily:1},position:"far",category:"1",action:{module:"DS/DELMCBUserDefAdmin/DELMCBUserDefAdmin",func:"ExportProcedure"}}},{id:"importprocedures",tooltip:m.get("command.importProc"),disabled:0,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"import",fontIconFamily:1},position:"far",category:"1",action:{module:"DS/DELMCBUserDefAdmin/DELMCBUserDefAdmin",func:"ImportProcedures"}}}]},n=s.prototype.createTreeDocument(o),r=new s({items:n});r.inject(y);var l=new e.Element("div");l.className="container-proclist-table",l.inject(y),v=new a;var u=[{text:m.get("title.procedureID"),dataIndex:"ProcID",typeRepresentation:"string"},{text:m.get("title.procedureName"),dataIndex:"ProcDisplayName"},{text:m.get("title.procedureDesc"),dataIndex:"ProcShortDescription"},{text:m.get("title.procedureVisibility"),dataIndex:"ProcVisibilityDisplay"},{text:m.get("title.procedureModificationDate"),dataIndex:"ModificationTime",typeRepresentation:"date"}],d=(D=new c({treeDocument:v,columns:u,fontIconFamily:WUXManagedFontIcons.font3DS,showModelChangesFlag:!0,rowSelection:"multiple",cellSelection:"none",showNodeKPIColorFlag:!0,cellActivationFeedback:"none",cellPreselectionFeedback:"row",filterViewOptions:{maxAppliedFilterCount:1}}).inject(l)).getNodesXSO();v.getFilterManager().setPropertyFilterModel("ProcVisibilityDisplay",{filterId:"number"});const g=()=>{let e=D.getNodesXSO().get();r.updateNodeModel("openProcedure",{disabled:1!==e.length});let t=!0;e.length&&e.every((e=>"Custo"===e._options.grid.ProcCategory))&&(t=!1),r.updateNodeModel("deleteProcedure",{disabled:t}),r.updateNodeModel("exportProcedure",{disabled:0===e.length})};d.onPostAdd(g),d.onPostRemove(g);new i({immersiveFrame:P,content:y,allowedDockAreas:"WUXDockAreaEnum.NoneDockArea",maximizedFlag:!0,titleBarVisibleFlag:!1,collapsibleFlag:!1,floatableFlag:!1,showTitleFlag:!1,identifier:"WebUIPanelDocumentation_ProcListPanel"});P.inject(document.body),p.FetchListOfProcedures().then((e=>{S.AddProcedurestoList(e)}))}};return{NewProcedure:function(){S.NewProcedure()},OpenProcedure:function(){S.OpenProcedure()},DeleteProcedure:function(){S.DeleteProcedure()},LaunchPanel(){S.LaunchPanel()},ExportProcedure(){S.ExportProcedure()},ImportProcedures(){S.ImportProcedures()}}}));