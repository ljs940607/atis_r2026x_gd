define("DS/BrowsingStructureAPI/utils/BrowsingStructureWebServicesUtil",["UWA/Core","DS/WAFData/WAFData","DS/WidgetServices/WidgetServices","DS/IPClassifyUXUtil/service/IPClassifyUXUtilWebService","i18n!DS/BrowsingStructureAPI/assets/nls/BrowsingStructureAPI"],(function(e,t,r,n,o){"use strict";return{get3DSearchUrl:function(){return new Promise((function(e,t){r.get3DSearchUrlAsync({onComplete:e,onFailure:t})}))},get3DSpaceUrl:function(){return new Promise((function(e,t){r.get3DSpaceUrlAsync({onComplete:e,onFailure:t})}))},getSecurityContext:function(){return"ctx::"+widget.getValue("xPref_CREDENTIAL")},createCSRFTokens:function(e,t){var r=e,n=t+"/resources/v1/application/CSRF";r.method="GET",this._executeRequest(n,r,"BSDAPI-createCSRFToken")},_executeRequest:function(e,t,r){return n._executeRequest(e,t,r)}}})),define("DS/BrowsingStructureAPI/service/BrowsingStructureAPI",["UWA/Core","DS/IPClassifyUtil/IPClassifyUtility","DS/IPClassifyUXUtil/service/IPClassifyUXUtilWebService","DS/BrowsingStructureAPI/utils/BrowsingStructureWebServicesUtil"],(function(e,t,r,n){"use strict";function o(e,t,r){var n={itemsID:e,nodesToAttach:t,nodesToDetach:r};return s.updateNodes(n)}var s={addToBrowsingNode:function(e){if(!e.hasOwnProperty("itemsID")||0===e.itemsID.length||!e.hasOwnProperty("targetId")||0===e.targetId.length)throw new Error("BSD API Error : missing parameter");return o(e.itemsID,e.targetId,[])},removeFromBrowsingNode:function(e){if(!e.hasOwnProperty("itemsID")||0===e.itemsID.length||!e.hasOwnProperty("sourceId")||0===e.sourceId.length)throw new Error("BSD API Error : missing parameter");return o(e.itemsID,[],e.sourceId)},moveToBrowsingNode:function(e){if(!(e.hasOwnProperty("itemsID")&&0!==e.itemsID.length&&(e.hasOwnProperty("targetId")&&0!==e.targetId.length||e.hasOwnProperty("sourceId")&&0!==e.sourceId.length)))throw new Error("BSD API Error : missing parameter");return e.hasOwnProperty("targetId")&&0!==e.targetId.length||(e.targetId=[]),e.hasOwnProperty("sourceId")&&0!==e.sourceId.length||(e.sourceId=[]),o(e.itemsID,e.targetId,e.sourceId)},updateNodes:function(t){var n={};e.extend(n,t);return n.method="POST",n.headers={Accept:"application/json","content-type":"application/json"},n.type="json",n.payload={items:t.itemsID,nodesToAdd:t.nodesToAttach,nodesToRemove:t.nodesToDetach},n.data=e.Json.encode(n.payload),r._executeQuery("/resources/v1/TerminologyManagement/Terminologies/updateNodes",{...n,withCSRF:!0,withChangeCtx:!0,inSource:"3DSpace"},"updateNodes")},getBrowsingStructureTree:function(t){if(!t.hasOwnProperty("itemsID")||0===t.itemsID.length)throw new Error("BSD API Error : missing parameter");return new Promise((function(r,o){n.get3DSpaceUrl().then((s=>{var i={},a=s+"/cvservlet/progressiveexpand/v2?output_format=cvjson";return i.method="POST",i.headers={Accept:"application/json","content-type":"application/json"},i.withSecurityToken=!0,i.type="json",i.payload={batch:{expands:[{label:"BSDAPI_getBrowsingStructureTree",root:{physical_id:t.itemsID},parameters:{graph_advise:1},graph:{descending_condition_relation:{uql:"(taxonomies:Sub Term)"}},filter:{all:1}}]},outputs:{select_object:["ds6w:label","ds6w:type","physicalid","ds6w:created","ds6w:modified"],select_relation:["physicalid"],format:"entity_relation_occurrence"}},i.onComplete=function(e){r(e)},i.onFailure=function(e){o(e)},i.data=e.Json.encode(i.payload),n._executeRequest(a,i,"getBrowsingStructureTree")}))}))}};return s}));