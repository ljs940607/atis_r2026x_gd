define("DS/DELPXPBIConnector/DELBIPXPDTO",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BIPXPDTO=void 0;t.BIPXPDTO=class{constructor(e,t,r,o){this.ebomRIIPath=e,this.mbomRIIPath=t,this.accountabilityReportPath=null!=r?r:"PathValue",this.accountabilityReportFormat=null!=o?o:"FormatValue"}getebomRIIPath(){return this.ebomRIIPath}getmbomRIIPath(){return this.mbomRIIPath}getAccountabilityReportPath(){return this.accountabilityReportPath}getAccountabiltyReportFormat(){return this.accountabilityReportFormat}}})),define("DS/DELPXPBIConnector/DELPXPUtils",["require","exports","DS/DELPXPSessionManager/DELPXPContextType"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PXPUtils=void 0;class o{static createQueryCondition(e,t){return{"@class":"QueryCondition",conditionPredicate:e,conditionObject:{type:"d",object:{type:"s",data:t}}}}static createQueryObject(e,t){return{"Query~1":{objectsType:e,conditions:t}}}static createURI(e,t){let o,n="";switch(e){case r.RequestType.RequestType_Command:o="Command",void 0!==t["Command~1"]&&(n=t["Command~1"].commandName);break;case r.RequestType.RequestType_Read:o="Read";break;case r.RequestType.RequestType_Query:o="Query",void 0!==t["Query~1"]&&(n=t["Query~1"].objectsType);break;default:o="Default"}return"/"+o+"/"+n}static timeoutPromise(e,t){return Promise.race([e,new Promise(((e,r)=>{setTimeout((()=>r("No response recieved from server")),t)}))])}static getObjectType(e){return this.objectType[e]}}t.PXPUtils=o,o.objectType={accountabilityReport:"accountability/v1/accountabilityreport"}})),define("DS/DELPXPBIConnector/errors/ErrorBase",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBase=void 0;class r extends Error{constructor({type:e,message:t,cause:r}){super(t),this.type=e,this.message=t,this.cause=r}}t.ErrorBase=r})),define("DS/DELPXPBIConnector/errors/Errors",["require","exports","DS/DELPXPBIConnector/errors/ErrorBase"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PXPError=t.BadInputError=void 0;class o extends r.ErrorBase{constructor({message:e,cause:t}){super({type:"BAD_INPUT",message:e,cause:t})}}t.BadInputError=o;class n extends r.ErrorBase{constructor({message:e,cause:t}){super({type:"PXP_ERROR",message:e,cause:t})}}t.PXPError=n})),define("DS/DELPXPBIConnector/DELPXPBIContextImpl",["require","exports","DS/DELPXPFoundations/DELPXPFoundations","DS/DELPXPSessionManager/DELPXPContextType","DS/DELPXPComponentsUtils/DELPXPBackendConnect","DS/DELPXPBIConnector/DELPXPUtils","DS/PlatformAPI/PlatformAPI","DS/Logger/Logger","DS/DELPXPBIConnector/errors/Errors"],(function(e,t,r,o,n,i,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectToBINode=function(e,t,r){return new P(e,t,r).createEndpointClient(r)},t.queryAcountabilityReport=function(e,t){return l(e,t)};const u=a.getLogger("PXP.BIAccountability");class P{constructor(e,t,r){var o;this.defaultNode="PXPEndpointServerAccountabilityComponentV0",this.defaultClientName="PXPBiClient",this.id=e,this._endpoint=null;const n=null!==(o=null==r?void 0:r.node)&&void 0!==o?o:this.defaultNode;this.endpointAddress={endpoint:n,identifier:this.getIdentifier(t,r)}}getCurrentUser(e){var t,r;let o;try{o=s.getUser()}catch(e){o=void 0}return null!==(r=null!==(t=null==e?void 0:e.user)&&void 0!==t?t:null==o?void 0:o.login)&&void 0!==r?r:"USR"}getIdentifier(e,t){return`${this.getCurrentUser(t)}/${e.endpointIdentifier}/${this.id}`}isConnected(){return null!=this._endpoint&&this._endpoint.isConnected()}getEndpointClient(){return this._endpoint}getInstanceID(){return null}request(e,t){const o=new r.Transport(r.EventType.object,t);if(null!==this._endpoint){const r=i.PXPUtils.createURI(e,t);return this._endpoint.request(r,o)}return Promise.resolve(new r.Transport(r.EventType.error))}async createEndpointClient(e){var t,o;let i={...(null==e?void 0:e.widget)&&{widget:e.widget},...(null==e?void 0:e.serverUrl)&&{serverUrl:e.serverUrl}};try{const s=await(0,n.ConnectToPXPBackend)(i);this.serverUrl=null===(t=s.hypervisorUrl)||void 0===t?void 0:t.toString();const a={serverUrl:s.hypervisorUrl,clientName:null!==(o=null==e?void 0:e.clientName)&&void 0!==o?o:this.defaultClientName+this.id,authentication:r.AuthProfile.ServiceWithTGT()},c=await(0,r.ConnectToBusEK)("BISession",a),P=await c.ConnectToEndpoint(this.endpointAddress);this._endpoint=P,u.info(this._endpoint)}catch(e){throw new c.PXPError({message:"Error connecting to PXP Backend",cause:e})}return this}}const l=function(e,t){return new Promise(((n,s)=>{const a=t.getebomRIIPath(),P=t.getmbomRIIPath(),l=t.getAccountabilityReportPath(),d=t.getAccountabiltyReportFormat(),p=e.getEndpointClient();if(!P||!a)return void s(new c.BadInputError({message:"Mbom or Ebom path is null"}));if(!p)return void s(new c.BadInputError({message:"Endpoint Client is null"}));const y={"Create~1":{"@class":"Create~1",actionId:"96a5155e-4c9a-461a-8f83-7467f4aa0ae0",objectsToCreate:[{"@class":"SessionRootV1~2",id:null,physicalId:`${a}`,type:"RootType_EngItem"}],objectsType:"SessionRoot",system:""}},m={"Create~1":{"@class":"Create~1",actionId:"96a5155e-4c9a-461a-8f83-7467f4aa0ae0",objectsToCreate:[{"@class":"SessionRootV1~2",id:null,physicalId:`${P}`,type:"RootType_MfgItem"}],objectsType:"SessionRoot",system:""}};new r.Transport(r.EventType.object,y),new r.Transport(r.EventType.object,m);const I=[i.PXPUtils.createQueryCondition("engineeringRoot",a),i.PXPUtils.createQueryCondition("manufacturingRoot",P),i.PXPUtils.createQueryCondition("accountabilityReportFormat",d),i.PXPUtils.createQueryCondition("accountabilityReportPath",l)],h=i.PXPUtils.getObjectType("accountabilityReport"),E=i.PXPUtils.createQueryObject(h,I);e.request(o.RequestType.RequestType_Query,E).then((e=>{u.info(e),n(e)})).catch((e=>{s(new c.PXPError({message:"Error fetching accountability report",cause:e}))}))}))}})),define("DS/DELPXPBIConnector/DELPXPBIAPI",["require","exports","DS/DELPXPBIConnector/DELBIPXPDTO","DS/DELPXPBIConnector/DELPXPBIContextImpl","DS/DELPXPSessionManager/DELPXPSessionManager"],(function(e,t,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conectToNode=function(e,t,r){return(0,o.connectToBINode)(e,t,r)},t.fetchAccountabilityReport=function(e,t){const n=new r.BIPXPDTO(t.ebom.getRIIPath(),t.mbom.getRIIPath());return(0,o.queryAcountabilityReport)(e,n)},t.getSessionId=function(){return(0,n.createPXPSession)()}}));