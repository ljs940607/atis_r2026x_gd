define("DS/i3DXCompassCore/CacheManager",["UWA/Core","UWA/Class","UWA/Utils","UWA/Storage","UWA/Storage/Adapter/Dom"],(function(e,t,s,i){"use strict";var n,r,o=864e5,a=new i({adapter:"Dom",database:"3DCompass"}),c={};return t.singleton({setup:function(e,t){n=e,e||(a=null),t&&(r=t)},CACHE_STRATEGY_STATIC:1,CACHE_STRATEGY_NO_WAIT:2,LONG_LIFE_TIME:o,setRequestCache:function(e,t,s){s&&s.cacheStrategy===this.CACHE_STRATEGY_STATIC?this.setLocalCache(e.url+JSON.stringify(s.data),t):this.setCache(e.url+JSON.stringify(s.data),t)},getRequestCache:function(e,t){var s=t.cacheTTL;return t&&t.cacheStrategy===this.CACHE_STRATEGY_STATIC?this.getLocalCache(e.url+JSON.stringify(t.data),s):this.getCache(e.url+JSON.stringify(t.data),s)},setLocalCache:function(e,t){c[e]=t},getLocalCache:function(e){return c[e]},setCache:function(e,t){if(a)try{a.set(this._getKeyUID(e),t)}catch(e){a=null}},getCache:function(e,t){var s=null;if(t||(t=o),a)try{s=a.get(this._getKeyUID(e),t)}catch(e){a=null}return s},_getKeyUID:function(e){return s.getCheckSum(e+r+n+undefined)},_getUser:function(){return n}})})),define("DS/i3DXCompassCore/Utils",["UWA/Core","UWA/Class","UWA/Utils"],(function(e,t,s){"use strict";var i,n,r=null,o=(new Date).getTimezoneOffset(),a=null,c={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},u={},l=["platform-management-2"],p=null,f=null;return{getVersion:function(){return"420.0.0"},getTimezoneOffset:function(){return o},isTouchActivate:function(){return null===a&&(a=e.Utils.Client.Features.touchEvents),a},isUrl:function(e){return(0===e.indexOf("http")||0===e.indexOf("https"))&&s.isValidUrl(e)},isBase64:function(e){return new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$").test(e)},isBase64Image:function(e){return e.indexOf("data:image")>-1&&e.indexOf(";base64,")>-1&&(e=e.split(";base64,")[1]),this.isBase64(e)},getFileName:function(e){var t=(e=e.replace(/\\/g,"/")).lastIndexOf("/");return e.substr(t+1)},getFileExtension:function(e){var t=e.lastIndexOf("."),s="";return t>-1&&(s=e.toLowerCase().substr(t+1)),s},msToHoursMin:function(e){var t=Math.floor(e/36e5);return{hours:t,minutes:Math.round((e-36e5*t)/6e4)}},escapeDomSelector:function(e){return e=(e=(e=e.replace(/:/g,"\\:")).replace(/\./g,"\\.")).replace(/@/g,"\\@")},escape:function(e){var t;for(t in c)c.hasOwnProperty(t)&&e&&(e=e.replace(new RegExp(t,"g"),c[t]));return e},unescape:function(e){var t;for(t in c)c.hasOwnProperty(t)&&e&&(e=e.replace(new RegExp(c[t],"g"),t));return e},getTextFromHtml:function(t){var s=document.createElement("div");return e.is(t,"string")&&""!==t&&(t=this.unescape(t),t=this.escape(t),s.innerHTML=t,t=s.childNodes[0].nodeValue),t},getUUID:function(){return s.getCheckSum(s.getUUID())},detectOs:function(){var e=navigator.userAgent.toLowerCase();return null===r&&(r=e.indexOf("windows")>-1?"windows":e.match(/(ipad|iphone|ipod)/g)?"ios":e.indexOf("mac")>-1?"macos":e.indexOf("android")>-1?"android":e.indexOf("linux")>-1?"linux":"unknown"),r},merge:function(e,t){var s,i=Object.prototype.hasOwnProperty;for(s in t)i.call(t,s)&&void 0===e[s]&&(e[s]=t[s]);return e},removeUselessPort:function(e){return"string"==typeof e&&(e=e.replace(":443/","/").replace(":80/","/")),e},isEmptyString:function(e){return!e||"string"!=typeof e||!e.trim()},isBetaModeActivated:function(t){var s=!1,i="3DCompass-"+t;if(void 0===u[i])try{s=!!e.is(localStorage.getItem(i)),u[i]=s}catch(t){e.log(t)}else s=u[i];return s},i18n:function(t){var s=e.i18n(t);return s&&(s=s.replace("3DEXPERIENCE","<b>3D</b>EXPERIENCE")),s},getParentModule:(n={},function(e,t){if(!n[e]&&function(){var e;try{parent.document,e=!0}catch(t){e=!1}return e}())try{parent.require([e],(function(s){n[e]=s,t(s)}))}catch(s){try{require([e],(function(s){n[e]=s,t(s)}))}catch(e){}}else n[e]?setTimeout((function(){t(n[e])}),0):require([e],(function(s){n[e]=s,t(s)}))}),getRoleColor:function(e,t){var s={"-1":"pending",0:"member",1:"admin",2:"deny",3:"contractor"};return!0===t?"color-indicator-"+(s[e]||s[-1]):{"-1":"pending",0:"warning",1:"info",2:"error",3:"contractor"}[e]},getAgreementValue:function(e){return e?"1":"0"},isCheckedAgreement:function(e){return"1"===e},scrollToElement:function(e){!this.isFrame()&&document.body&&(document.body.scrollTop=document.body.getElement(e).getPosition().y+64)},scrollToElementInIframe:function(e){document.body.getElement(".scroller-content")&&(document.body.getElement(".scroller-content").scrollTop=document.body.getElement(e).getPosition().y+64)},extractEmails:function(e){return e.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)},manageSupportOfMultiModal:function(){var e="platform-management-modal-open";document.body.addClassName(e),setTimeout((function(){document.body.getElement(".platform-management-2.modal")&&document.body.addClassName("modal-open"),document.body.removeClassName(e)}),50)},getPlatformManagementWrapperClassName:function(t){return 1===l.length&&(l.push(this.detectOs()),this.isTouchActivate()&&l.push("is-touch"),l=l.join(" ")),e.is(t,"string")?l+" "+t:l},isFrame:function(){return null===p&&(p=document.location!==top.location),p},downScaleCanvas:function(e,t){if(1===t)return e;if(t<0||t>1)throw new Error("scale must be a positive number <1 ");var s=t*t,i=e.width,n=e.height,r=Math.ceil(i*t),o=Math.ceil(n*t),a=0,c=0,u=0,l=0,p=0,f=0,h=0,d=0,g=0,m=0,C=0,D=0,y=0,S=0,A=0,x=!1,U=!1,v=e.getContext("2d").getImageData(0,0,i,n).data,P=new Float32Array(4*i*n),O=0,T=0,M=0,b=0;for(c=0;c<n;c++)for(p=c*t,f=4*(g=Math.floor(p))*r,(U=g!==Math.floor(p+t))&&(S=g+1-p,A=p+t-g-1),a=0;a<i;a++,u+=4)l=a*t,h=f+4*(d=Math.floor(l)),(x=d!==Math.floor(l+t))&&(D=d+1-l,y=l+t-d-1),O=v[u],T=v[u+1],M=v[u+2],b=v[u+3],x||U?x&&!U?(m=D*t,P[h]+=O*m,P[h+1]+=T*m,P[h+2]+=M*m,P[h+3]+=b*m,C=y*t,P[h+4]+=O*C,P[h+5]+=T*C,P[h+6]+=M*C,P[h+7]+=b*C):U&&!x?(m=S*t,P[h]+=O*m,P[h+1]+=T*m,P[h+2]+=M*m,P[h+3]+=b*m,C=A*t,P[h+4*r]+=O*C,P[h+4*r+1]+=T*C,P[h+4*r+2]+=M*C,P[h+4*r+3]+=b*C):(m=D*S,P[h]+=O*m,P[h+1]+=T*m,P[h+2]+=M*m,P[h+3]+=b*m,C=y*S,P[h+4]+=O*C,P[h+5]+=T*C,P[h+6]+=M*C,P[h+7]+=b*C,C=D*A,P[h+4*r]+=O*C,P[h+4*r+1]+=T*C,P[h+4*r+2]+=M*C,P[h+4*r+3]+=b*C,C=y*A,P[h+4*r+4]+=O*C,P[h+4*r+5]+=T*C,P[h+4*r+6]+=M*C,P[h+4*r+7]+=b*C):(P[h]+=O*s,P[h+1]+=T*s,P[h+2]+=M*s,P[h+3]+=b*s);var w=document.createElement("canvas");w.width=r,w.height=o;var E=w.getContext("2d"),X=E.getImageData(0,0,r,o),F=X.data,R=0;for(u=0,h=0;R<r*o;u+=4,h+=4,R++)F[h]=Math.ceil(P[u]),F[h+1]=Math.ceil(P[u+1]),F[h+2]=Math.ceil(P[u+2]),F[h+3]=Math.ceil(P[u+3]);return E.putImageData(X,0,0),w},isEmail:function(e){return/^([a-zA-Z0-9_.\-'+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},getLang:function(){return f||this.getWidget().lang},setLang:function(e){f=e},getWidget:function(){return i},setWidget:function(e){i=e},isValidFilePathTxt:function(e){if(e.indexOf(";")>-1){return/^((([^/\\:*?"><|]*[^/\\:*?"><| ])?(([a-zA-Z]:)|(%[^%]+%)|(\$[^$]+))((\\|\/)[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|([^/\\:*?"><|]*[^/\\:*?"><| ])(\\\\[^/\\:*?"><| ]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\[[a-z0-9]+\])(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+)\.txt;){1,}(([^/\\:*?"><|]*[^/\\:*?"><| ])?(([a-zA-Z]:)|(%[^%]+%)|(\$[^$]+))((\\|\/)[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|([^/\\:*?"><|]*[^/\\:*?"><| ])(\\\\[^/\\:*?"><| ]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\[[a-z0-9]+\])(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+)\.txt$/.test(e)}if(-1===e.indexOf(";")){return e.endsWith(".txt")&&/^(([^/\\:*?"><|]*[^/\\:*?"><| ])?(([a-zA-Z]:)|(%[^%]+%)|(\$[^$]+))((\\|\/)[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|([^/\\:*?"><|]*[^/\\:*?"><| ])(\\\\[^/\\:*?"><| ]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\[[a-z0-9]+\])(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+)\.txt$/.test(e)}},isValidFilePathTxtLinux:function(e){if(e.indexOf(";")>-1){return/^(([^/\\:*?"><|]*[^/\\:*?"><| ])?[\$\/]([^/:?"'<>|\\ $]+\/)*[^/:?"'<>|\\ $]+.txt;){1,}([^/\\:*?"><|]*[^/\\:*?"><| ])?[\$\/]([^/:?"'<>|\\ $]+\/)*[^/:?"'<>|\\ $]+.txt$/.test(e)}if(-1===e.indexOf(";")){return/^([^/\\:*?"><|]*[^/\\:*?"><| ])?[\$\/]([^/:?"'<>|\\ $]+\/)*[^/:?"'<>|\\ $]+.txt$/.test(e)}},isValidPathLinux:function(e){return/^([^/\\:*?"><|]*[^/\\:*?"><| ])?[\$\/]([^/:?"'<>|\\ $]+\/)*[^/:?"'<>|\\ $]+$/.test(e)},isValidScript:function(e){var t=['"',"*",":","<",">","?","\\","|",127].detect((function(t){return e.indexOf(t)>-1}));return e.endsWith(".bat")&&!t},isValidScriptLinux:function(e){var t=['"',"*",":","<",">","?","\\","|",127].detect((function(t){return e.indexOf(t)>-1}));return e.endsWith(".sh")&&!t},isHttpsUrl:function(e){return 0===e.indexOf("https")&&s.isValidUrl(e)},isUNC:function(e){var t=(e.match(new RegExp("%","g"))||[]).length;return t>0&&t%2==0||/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/.test(e)},isUsingJsonContent:function(){return!1}}})),define("DS/i3DXCompassCore/UsageTracker",["UWA/Core","DS/Usage/TrackerAPI"],(function(e,t){"use strict";return{_IDS:{compass:{quadrant:{north:"compass.quadrant.north",east:"compass.quadrant.east",south:"compass.quadrant.south",west:"compass.quadrant.west",play:"compass.quadrant.play"},cross:"compass.cross",role:"compass.role",roleFavorite:"compass.role.favorite",app:"compass.app",appFavorite:"compass.app.favorite",section:"compass.section"}},inc:function(e,t,s,i){},sync:function(e,s){t.getTracker("3DCompass-"+e).set(s)}}})),define("DS/i3DXCompassCore/Controls/Gauge",["UWA/Core","UWA/Controls/Abstract"],(function(e,t){"use strict";return t.extend({defaultOptions:{backgroundColor:"#ecf0f1",separatorColor:"#2c3e50",lowColor:"#EA4F37",mediumColor:"#e87b00",highColor:"#edca00",fullColor:"#57b847",lowPercent:25,mediumPercent:50,highPercent:75,height:80,width:80,text:"",percent:0,className:"",reversed:!1},init:function(e){this._parent(e),this.buildContainer()},toUrl:function(){return this.url},buildContainer:function(){var t,s,i,n=e.createElement("canvas",{height:this.options.height,width:this.options.width,styles:{width:"100%",height:"auto"}}),r=n.getContext("2d"),o=n.width,a=n.height,c=this.options.percent/100*360,u=this.options.fullColor;r.clearRect(0,0,o,a),r.beginPath(),r.strokeStyle=this.options.backgroundColor,r.lineWidth=4,r.arc(a/2,o/2,a/2-2,0,2*Math.PI,!1),r.stroke(),s=c*Math.PI/180,r.beginPath(),u=this.options.percent<this.options.lowPercent?this.options.reversed?this.options.fullColor:this.options.lowColor:this.options.percent<this.options.mediumPercent?this.options.reversed?this.options.highColor:this.options.mediumColor:this.options.percent<this.options.highPercent?this.options.reversed?this.options.mediumColor:this.options.highColor:this.options.reversed?this.options.lowColor:this.options.fullColor,r.strokeStyle=u,r.lineWidth=4,r.arc(o/2,a/2,a/2-2,-90*Math.PI/180,s-90*Math.PI/180,!1),r.stroke(),r.fillStyle=u,r.font=Math.floor(this.options.width/4)+"px arial",t=Math.floor(c/360*100)+"%",i=r.measureText(t).width,r.fillText(t,o/2-i/2,a/2+.7*Math.floor(this.options.width/4)/2),this.url=n.toDataURL(),this.elements.container=e.createElement("div",{class:this.options.className||"",styles:{width:"100%",height:"auto"},html:[""!==this.options.text?{styles:{"text-align":"center",padding:"5px"},text:this.options.text}:null,{tag:"img",src:this.url,styles:{width:"100%",height:"auto"}}]})}})})),define("DS/i3DXCompassCore/Controls/PlatformNotify",["UWA/Core","DS/UIKIT/Alert"],(function(e,t){"use strict";return{message:function(e,s){(!this.notifier||document.body.getElement&&!document.body.getElement(".platform-management-notify"))&&(this.notifier=new t({closable:!0,visible:!0,autoHide:!0,hideDelay:3e3,className:"platform-management-notify"}).inject(document.body,"top")),this.notifier.add({className:s,message:e})},success:function(e){this.message(e,"success")},alert:function(e){this.message(e,"error")},warn:function(e){this.message(e,"warning")},info:function(e){this.message(e,"info")}}})),define("DS/i3DXCompassCore/Csrf",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/i3DXCompassCore/CacheManager","DS/i3DXCompassCore/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Controls/PlatformNotify"],(function(e,t,s,i,n,r,o){"use strict";var a=null,c="app.urls.myapps",u=null;return{request:function(t,i,r){var a,c,u={Accept:"application/json","Accept-Language":n.getLang()},l=function(t){"function"==typeof r.onFailure?r.onFailure.apply(this,arguments):(e.log("ERROR"),e.log(t))};return a={os:n.detectOs()},u["X-Utc-Offset"]=n.getTimezoneOffset(),c={timeout:15e3,method:"GET",type:"json",headers:u,proxy:"passport",data:a,cache:-1,onComplete:function(t){var s;t.code&&"0"!==t.code||t.error?(s=t.message&&""!==t.message?t.message:t.error&&t.error.type?t.error.type:t.error?t.error:t,t.error&&"java.net.SocketTimeoutException: Read timed out"===t.error.status&&o.warn(e.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget")),"function"==typeof r.onFailure?r.onFailure(t):o.alert(s)):"function"==typeof r.onComplete&&r.onComplete(t)},onFailure:l,onTimeout:function(t){o.warn(e.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget")),l(t)}},s.authenticatedRequest(t,c)},formatUrl:function(e){return null!==a&&""!==a||(a=r.getApplicationConfiguration(c))||(r.getAllApplicationConfigurations(!0),void 0===(a=r.getApplicationConfiguration(c))&&(a=window.origin+"/enovia")),0===e.indexOf("http")?e:a+"/resources/AppsMngt/"+e},getTokenCSRF:function(e){return null===u&&"Pending"!==u?this.getOrGenerateTokenCSRF(e):u},getOrGenerateTokenCSRF:function(t){u="Pending",this.request(this.formatUrl("security/csrf"),{},{onComplete:function(e){u=e["X-DS-CSRFTOKEN"],n.isUsingJsonContent()&&t&&t.options&&t.options.data&&"string"==typeof t.options.data&&(t.options.data=JSON.parse(t.options.data)),t&&t.context.sync?t.context.sync(t.method,t.collection,t.options):t&&t.context.request&&(t.url?t.context.request(t.url,t.params,t.callbacks,t.method):t.context.request(t.options))},onFailure:function(s){e.log(s),u=null,t&&t.callbacks&&"function"==typeof t.callbacks.onFailure&&t.callbacks.onFailure(s)}})}}})),define("DS/i3DXCompassCore/RequestOptions",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/i3DXCompassCore/CacheManager","DS/i3DXCompassCore/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Controls/PlatformNotify","DS/i3DXCompassCore/Csrf"],(function(e,t,s,i,n,r,o,a){"use strict";var c,u,l=null,p="/resources/AppsMngt/",f="app.urls.myapps";return{_fetched:!1,_inProgress:!1,isFetched:function(){return this._fetched},isInProgress:function(){return this._inProgress},options:{timeout:6e4,type:"json",headers:{Accept:"application/json","X-Utc-Offset":n.getTimezoneOffset()},data:{os:n.detectOs(),debug:(void 0===u&&(u=-1!==window.location.search.indexOf("debug")),!1!==u||null)},proxy:"passport"},setup:function(e,t){return t=this.mergeOptions(t||{}),this.options=t,this.url&&("function"==typeof this.url?this.urlRoot&&this.collection.url&&(this.url=this.formatUrl(this.url())):this.url=this.formatUrl(this.url)),this._parent(e,t)},setupLanguage:function(e){c=e},sync:function(t,r,u){var l=this,p=u.onComplete,f=u.onFailure,h=null;if(l._inProgress=!0,u=this.mergeOptions(u),c&&!u.headers["Accept-Language"]&&(u.headers["Accept-Language"]=c),"patch"===t?(t="update",u.attrs&&(u.data=e.merge(u.data,u.attrs))):"update"!==t&&"create"!==t||(u.data=e.merge(u.data,r.toJSON(u))),"update"!==t&&"create"!==t&&"delete"!==t||(u.headers["X-DS-CSRFTOKEN"]=a.getTokenCSRF(),n.isUsingJsonContent()&&"create"!==t?(u.headers["Content-Type"]="application/json",u.data.users&&(u.data.users=JSON.parse(u.data.users)),u.data=JSON.stringify(u.data)):u.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8"),u.cache&&u.headers["Accept-Language"]&&u.data&&(u.data["Accept-Language"]=u.headers["Accept-Language"]),u.onComplete=function(e){var s;l._inProgress=!1,e&&(e.code&&e.code.indexOf&&-1!==e.code.indexOf("CSRF")||e.indexOf&&-1!==e.indexOf("CSRF"))?a.getOrGenerateTokenCSRF({context:l,method:t,collection:r,options:u}):e&&(e.code&&"0"!==e.code||e.error)?(s=e.message&&""!==e.message?e.message:e.error&&e.error.type?e.error.type:e.error?e.error:e,f?f(e):o.alert(s)):("read"===t&&(l._fetched=!0,(u.cacheTTL||u.cacheStrategy===i.CACHE_STRATEGY_STATIC)&&i.setRequestCache(l,e,u)),p&&(h&&JSON.stringify(h)===JSON.stringify(e)||p(e)))},u.onFailure=function(s,i){l._inProgress=!1,i&&(i.code&&i.code.indexOf&&-1!==i.code.indexOf("CSRF")||i.indexOf&&-1!==i.indexOf("CSRF"))||s&&(s.code&&s.code.indexOf&&-1!==s.code.indexOf("CSRF")||s.indexOf&&-1!==s.indexOf("CSRF"))?a.getOrGenerateTokenCSRF({context:l,method:t,collection:r,options:u,callbacks:{onFailure:f,onComplete:p}}):f?f(s):(e.log("ERROR"),e.log(s))},u.onTimeout=function(t){o.warn(e.i18n("Action is still pending... Please wait a few seconds and refresh your widget")),f&&f(t)},u.cacheTTL&&!u.cacheStrategy&&(u.cacheStrategy=i.CACHE_STRATEGY_NO_WAIT),(h=i.getRequestCache(this,u))&&setTimeout((function(){p(h)}),5),!h||u.cacheStrategy!==i.CACHE_STRATEGY_STATIC)return this._requestOptions=e.merge({ajax:s.authenticatedRequest},u),this._parent(t,r,this._requestOptions)},formatUrl:function(e){return null!==l&&""!==l||(l=r.getApplicationConfiguration(f))||(r.getAllApplicationConfigurations(!0),void 0===(l=r.getApplicationConfiguration(f))&&(l=window.origin+"/enovia")),0===e.indexOf("http")?e:this.getOptionsUrl(l)+(this.options.backendPath||this.getBackPath(p))+e},getBackendAsset:function(e){return n.removeUselessPort(this.formatUrl(e).replace(p,"/widget/images/MyApps/"))},getOptionsUrl:function(e){return e},getBackPath:function(e){return e},mergeOptions:function(e){var t=n.merge(e.data||{},this.options.data);return(e=n.merge(e||{},this.options)).data=t,e}}})),define("DS/i3DXCompassCore/Model/i3DXCompassModel",["UWA/Core","UWA/Class/Model","DS/i3DXCompassCore/RequestOptions"],(function(e,t,s){"use strict";return t.extend(s)})),define("DS/i3DXCompassCore/Model/UserRightModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/CacheManager"],(function(e,t,s){"use strict";return t.extend({url:"environment/listroles",sync:function(t,i,n){return this._parent(t,i,e.merge(n,{cache:s.LONG_LIFE_TIME}))}})})),define("DS/i3DXCompassCore/Model/PlatformModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils"],(function(e,t,s){"use strict";return t.extend({url:"platform",getId:function(){return this.get("id")},canCrossCompany:function(){return this.get("crossCompany")},canCrossCompanyExtended:function(){return this.get("crossCompanyExtended")},getCrossCompanyRoles:function(){return this.get("crossCompanyRoles")||[]},isOnPremise:function(){var e=this.get("isOnPremise");return void 0===e&&this.get("id")&&(e=this.get("id").toLowerCase()==="OnPremise".toLowerCase()),e},hasError:function(){return s.isBetaModeActivated("subscription-error")||this.get("subscriptionError")},isPlatform:function(){return!0===this.get("platform")},isStaging:function(){return!0===this.get("staging")}})})),define("DS/i3DXCompassCore/Model/ProcessModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/Controls/Gauge"],(function(e,t,s,i){"use strict";return t.extend({idAttribute:"uid",url:"role",hasFree:function(e){return void 0===e&&(e=0),!1===this.get("withLicenses")||this.canCrossCompany()||this.isTPA()||this.isCustom()||0!==this.get("free")&&this.get("free")>=e},isOption:function(){return this.get("option")},isCasual:function(){return this.get("casual")>0},isTPA:function(){return e.is(this.get("type"))&&"WA"!==this.get("type")&&"WU"!==this.get("type")},isSelfExp:function(){return!0===this.get("selfexp")},getPercent:function(){var e=100*(this.get("total")-this.get("free"))/this.get("total");return Math.min(e,100)},getType:function(){return this.isTPA()?"apps":"license"},getDisplayType:function(){return this.isTPA()?this.escape("type"):null},isDisabled:function(e,t){var s=!1;return this.isSelfExp()?s=!this.get("granted")||!(!0===this.get("remove")&&""===this.get("expire")):e?s=!this.get("granted")||!1===this.get("remove"):this.isCustom()?s=!1:this.isTPA()?s=!1===this.get("private"):(s=!1===this.get("granted")&&!this.hasFree()||!0===this.get("granted")&&!1===this.get("remove"))||!t||this.hasFree(t)||(s=!0),s},getCasual:function(){return this.isCustom()?null:this.get("casual")},isCustom:function(){var t=e.is(this.get("custom"))?this.get("custom"):this.get("icon");return!this.isTPA()&&t},getIcon:function(){return this.isTPA()?this.get("icon")||s.getAsset("3DExpPlatform_Default.png"):this.isCustom()||0===this.get("total")?this.get("icon")||s.getAsset("ROLE_64_granted.png"):this.isSelfExp()?s.getAsset("selfexp-logo.png"):new i({height:120,width:120,reversed:!0,percent:this.getPercent()}).toUrl()},canCrossCompany:function(){return!0===this.get("crossCompany")},isWA:function(){return"WA"===this.get("type")},isWU:function(){return"WU"===this.get("type")},_hasPrereq:function(){return this.get("prereq")&&this.get("prereq").process&&this.get("prereq").process.length>0},isAssignDisabled:function(e,t){var s=!1;return!1===e&&(s=0===this.get("free")),void 0!==t&&(s=this.get("free")<t),this.get("licensedDisabled")||s},isAssignSelected:function(){}})})),define("DS/i3DXCompassCore/Collection/i3DXCompassCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompassCore/RequestOptions"],(function(e,t,s){"use strict";return t.extend(s)})),define("DS/i3DXCompassCore/Collection/PaginatedCollection",["UWA/Core","DS/i3DXCompassCore/Collection/i3DXCompassCollection","DS/i3DXCompassCore/Utils"],(function(e,t,s){"use strict";return t.extend({options:{data:{query:null,platform:null,sort:null,sort_direction:null,offset:null}},count:0,setParams:function(e){return this.options.data=s.merge(e,this.options.data),this},getParams:function(){return this.options.data},setPlatform:function(e){return this.getParams().platform=e,this},setSortField:function(e){return this.getParams().sort=e,this},setQuery:function(e){return this.getParams().query=e,this},getOffset:function(){return this.getParams().offset||0},setOffset:function(e){return this.getParams().offset=e,this},setLimit:function(e){return this.getParams().limit=e,this},getQuery:function(){return this.getParams().query},setMaxLimit:function(e){return this.count=e,this},setSortDirection:function(e){return this.getParams().sort_direction=e,this},getLimit:function(){return this.getParams().limit||this.size()},getMaxLimit:function(){return this.count},getPreviousOffset:function(){var e=this.getOffset();return this.hasPrevious()&&(e=parseInt(this.getOffset(),10)-parseInt(this.getLimit(),10)),e},getNextOffset:function(){var e=this.getOffset();return this.hasNext()&&(e=parseInt(this.getOffset(),10)+parseInt(this.getLimit(),10)),e},hasNext:function(){return this.getOffset()+this.getLimit()<this.getMaxLimit()},hasPrevious:function(){return this.getOffset()-this.getLimit()>0},hasPagination:function(){return this.getMaxLimit()>this.getLimit()}})})),define("DS/i3DXCompassCore/Model/ImportModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Collection/PaginatedCollection"],(function(e,t,s){"use strict";return t.extend({url:"massivesynchro",_users:null,_status:null,canRetry:function(){return 0!==this.get("status")&&4!==this.get("status")&&3!==this.get("status")},inProgress:function(){return 3===this.get("status")},fileUploadError:function(){return 4===this.get("status")},setup:function(){var e=this;this._parent.apply(this,arguments),this._users=new s([],{url:this.url,data:{offset:0,limit:25}}),this._status=new s,this._users.setMaxLimit(this.get("count")),this.addEvent("onChange:users",(function(t,s){e._users.set(s)})),this.addEvent("onChange:count",(function(t,s){e._users.setMaxLimit(s)})),this.addEvent("onChange:statuslist",(function(t,s){e._status.set(s)}))}})})),define("DS/i3DXCompassCore/Model/AppModel",["UWA/Core","DS/i3DXCompassCore/Model/ProcessModel"],(function(e,t){"use strict";return t.extend({url:"app/custom"})})),define("DS/i3DXCompassCore/Collection/AppsCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/AppModel"],(function(e,t,s){"use strict";return t.extend({url:"app/custom",model:s,parse:function(e){return this.setMaxLimit(e.count),e.data}})})),define("DS/i3DXCompassCore/Collection/ProcessCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/ProcessModel"],(function(e,t,s){"use strict";return t.extend({url:"role",model:s,parse:function(e){return this.setMaxLimit(e.count),e.data||e.roles},toJSONString:function(e){var t=[];return this.forEach((function(s){var i={id:s.get("uid")};!1===e&&(i.licensed=!1),t.push(i)})),JSON.stringify(t)}})})),define("DS/i3DXCompassCore/Model/CustomRoleModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils"],(function(e,t,s){"use strict";return t.extend({idAttribute:"uid",url:"role",hasFree:function(e){return void 0===e&&(e=0),!1===this.get("withLicenses")||this.canCrossCompany()||this.isTPA()||this.isCustom()||0!==this.get("free")&&this.get("free")>=e},isOption:function(){return this.get("option")},isCasual:function(){return this.get("casual")>0},isTPA:function(){return!1},isSelfExp:function(){return!0===this.get("selfexp")},getPercent:function(){var e=100*(this.get("total")-this.get("free"))/this.get("total");return Math.min(e,100)},getType:function(){return this.isTPA()?"apps":"license"},getNbApp:function(){return this.get("relationships").applications.data.length},getDisplayType:function(){return this.isTPA()?this.escape("type"):null},isDisabled:function(e,t){var s=!1;return this.isSelfExp()?s=!this.get("granted")||!(!0===this.get("remove")&&""===this.get("expire")):e?s=!this.get("granted")||!1===this.get("remove"):this.isCustom()?s=!1:this.isTPA()?s=!1===this.get("private"):(s=!1===this.get("granted")&&!this.hasFree()||!0===this.get("granted")&&!1===this.get("remove"))||!t||this.hasFree(t)||(s=!0),s},getCasual:function(){return this.isCustom()?null:this.get("casual")},getTitle:function(){return this.get("attributes").name},isCustom:function(){return this.get("attributes").custom},getIcon:function(){return this.isTPA()?this.get("icon")||s.getAsset("3DExpPlatform_Default.png"):this.isCustom()||0===this.get("total")?this.get("attributes").icon||s.getAsset("ROLE_64_granted.png"):void 0},canCrossCompany:function(){return!0===this.get("crossCompany")},isWA:function(){return!1},isWU:function(){return!1},_hasPrereq:function(){return!1},isAssignDisabled:function(e,t){var s=!1;return!1===e&&(s=0===this.get("free")),void 0!==t&&(s=this.get("free")<t),this.get("licensedDisabled")||s},isAssignSelected:function(){}})})),define("DS/i3DXCompassCore/Collection/CustomRoleCollection",["DS/i3DXCompassCore/Collection/ProcessCollection","DS/i3DXCompassCore/Model/CustomRoleModel"],(function(e,t){"use strict";return e.extend({url:"api/custom/roles",model:t,parse:function(e){return this.setMaxLimit(e.count),e.data||e.roles}})})),define("DS/i3DXCompassCore/Utils/Ajax",["UWA/Core","UWA/Class","UWA/Data","DS/i3DXCompassCore/Controls/PlatformNotify","UWA/Class/Options","DS/i3DXCompassCore/Utils","UWA/Storage","DS/WAFData/WAFData","DS/i3DXCompassCore/Csrf","i18n!DS/i3DXCompassCore/assets/nls/i3DXCompassCore","UWA/Storage/Adapter/Dom"],(function(e,t,s,i,n,r,o,a,c,u){"use strict";return t.extend(n,{defaultOptions:{url:"",callbacks:{},params:{}},init:function(e){this.setOptions(e)},request:function(t,s,n,o){var l,p,f,h=this,d={Accept:"application/json","Accept-Language":r.getLang()},g="passport";return s=e.merge({os:r.detectOs()},s),f=function(i,r){r&&(r.code&&r.code.indexOf&&-1!==r.code.indexOf("CSRF")||r.indexOf&&-1!==r.indexOf("CSRF"))||i&&(i.code&&i.code.indexOf&&-1!==i.code.indexOf("CSRF")||i.indexOf&&-1!==i.indexOf("CSRF"))?c.getOrGenerateTokenCSRF({context:h,url:t,params:s,callbacks:n,method:o}):"function"==typeof n.onFailure?n.onFailure.apply(this,arguments):(e.log("ERROR"),e.log(i))},o=o||"GET",null===s.proxy?g=null:s.proxy&&(g=s.proxy),l=s,"POST"!==o&&"PUT"!==o&&"DELETE"!==o||(d["X-DS-CSRFTOKEN"]=c.getTokenCSRF(),r.isUsingJsonContent()&&"POST"!==o?(d["Content-Type"]="application/json",l=JSON.stringify(l)):d["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8"),d["X-Utc-Offset"]=r.getTimezoneOffset(),p={timeout:15e3,method:o,type:s.responseType||"json",headers:d,proxy:g,data:l,cache:-1,onComplete:function(e){var r;e&&(e.code&&e.code&&e.code.indexOf&&-1!==e.code.indexOf("CSRF")||e.indexOf&&-1!==e.indexOf("CSRF"))?c.getOrGenerateTokenCSRF({context:h,url:t,params:s,callbacks:n,method:o}):e.code&&"0"!==e.code||e.error?(r=e.message&&""!==e.message?e.message:e.error&&e.error.type?e.error.type:e.error?e.error:e,e.error&&"java.net.SocketTimeoutException: Read timed out"===e.error.status&&i.warn(u.get("Action is still pending... Please wait a few seconds and refresh your widget")),"function"==typeof n.onFailure?n.onFailure(e):i.alert(r)):"function"==typeof n.onComplete&&n.onComplete(e)},onFailure:f,onTimeout:function(e){i.warn(u.get("Action is still pending... Please wait a few seconds and refresh your widget")),f(e)}},a.authenticatedRequest(t,p)},get:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"GET")},post:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"POST")},put:function(){this.request(this.options.url,this.options.params,this.options.callbacks,"PUT")},doDelete:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"DELETE")},create:function(){return this.post()},update:function(){return this.put()}})})),define("DS/i3DXCompassCore/Utils/Data",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/WebappsUtils/WebappsUtils","DS/i3DXCompassCore/Utils/Ajax","DS/i3DXCompassCore/Utils"],(function(e,t,s,i){"use strict";var n={proxy:{baseUrl:"",baseUrlBackend:"{0}/resources/AppsMngt/",getpreferences:"{0}user/getPreferences",setpreferences:"{0}user/setPreferences",licensesUser:"{0}licenses/user",removeAllRoles:"{0}/licenses/allroles",faillurePage:"{0}uploadfile/message?error=true",faillurePageImport:"{0}massivesynchro/upload/result?success=false",eServiceError:"{0}/enovia/eServiceError.jsp",removefile:"{0}environment/removefile",platformInvite:"{0}platform/invite",userSupportMode:"{0}user/supportmode",massiveSynchroStart:"{0}massivesynchro/start",massiveSynchroFile:"{0}massivesynchro/file"},formatUrl:function(e){return""===n.proxy.baseUrl&&(n.proxy.baseUrl=t.getApplicationConfiguration("app.urls.myapps"),n.proxy.baseUrl||(t.getAllApplicationConfigurations(!0),n.proxy.baseUrl=t.getApplicationConfiguration("app.urls.myapps")),n.proxy.baseUrlBackend=n.proxy.baseUrlBackend.format(n.proxy.baseUrl)),e.format(n.proxy.baseUrlBackend)}};return{get:function(e){return n.proxy[e]?n.formatUrl(n.proxy[e]):""},getUrl:function(e){return n.proxy[e]?n.formatUrl(n.proxy[e]):""},createLicensesUser:function(e,t){return new i({url:n.formatUrl(n.proxy.licensesUser),params:e,callbacks:t}).create()},updateLicensesUser:function(e,t){return new i({url:n.formatUrl(n.proxy.licensesUser),params:e,callbacks:t}).update()},deleteLicensesUser:function(e){return new i({url:n.formatUrl(n.proxy.licensesUser),params:e.params||{},callbacks:e.callbacks||{}}).doDelete()},removeAllRoles:function(e){return new i({url:n.formatUrl(n.proxy.removeAllRoles),params:e.data||{},callbacks:e.callbacks||{}}).doDelete()},removeFile:function(e,t){return new i({url:n.formatUrl(n.proxy.removefile),params:e,callbacks:t}).get()},getPreferences:function(t,s){return t=e.merge({responseType:"text"},t),new i({url:n.formatUrl(n.proxy.getpreferences),params:t,callbacks:s}).get()},setSupportMode:function(e){return new i({url:n.formatUrl(n.proxy.userSupportMode),params:e.params,callbacks:e.callbacks}).create()},platformInvite:function(e,t){return new i({url:n.formatUrl(n.proxy.platformInvite),params:e,callbacks:t}).create()},startImport:function(e){return new i({url:n.formatUrl(n.proxy.massiveSynchroStart),params:e.params||{},callbacks:e.callbacks||{}}).post()},getImportFile:function(e){return new i({url:n.formatUrl(n.proxy.massiveSynchroFile),params:e.params||{},callbacks:e.callbacks||{}}).get()}}})),define("DS/i3DXCompassCore/Model/PreferencesModel",["UWA/Core","UWA/Class/Model","UWA/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Utils/Data","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/CacheManager"],(function(e,t,s,i,n,r,o){"use strict";var a="pm-preferences";return new(t.extend({backendModel:new t,defaults:{membersMaxPerPage:"25",membersSortField:"Last Name",membersSortDirection:"asc",membersDisplayPicture:"true",processesMaxPerPage:"25",processesSortDirection:"asc",advancedMode:!1,displayMode:"grid"},isGridLayout:function(){return this._displayMode||(this._displayMode=o.getCache("displayMode-"+r.getWidget(),0)||this.get("displayMode")),"grid"===this._displayMode},shouldLoadPicture:function(){return!0===this.get("membersDisplayPicture")||"true"===this.get("membersDisplayPicture")},setLayout:function(e){this._displayMode=e,o.setCache("displayMode-"+r.getWidget(),e),r.getWidget().setValue("displayMode",e)},isFetched:!1,setup:function(){return this.createUid(),this},createUid:function(){return this.id=o._getKeyUID(a),this.id},sync:function(e,t,s){var i=this;if("read"===e)i.isFetched||this.fetchLocal()?(i.isFetched=!0,s.onComplete.call(i)):this.fetchRemote(s.onComplete)},fetchLocal:function(){var t,s=!1;try{(t=sessionStorage.getItem(this.id))&&(this.set(JSON.parse(t)),s=!0)}catch(t){e.log(t)}return s},fetchRemote:function(e){var t=this;n.getPreferences({name:a},{onComplete:function(i){var n;""!==i&&(n=JSON.parse(s.base64Decode(i.replace("_","="))))&&(t.set(n),this.isFetched=!1),t.saveLocal(),e.call(t)}})},saveLocal:function(){var t=!1;try{sessionStorage.setItem(this.id,JSON.stringify(this.toJSON())),t=!0}catch(t){e.log(t)}return t},clear:function(){var t=this._parent();try{sessionStorage.removeItem(this.id)}catch(t){e.log(t)}return this.isFetched=!1,this.set(this.defaults),t}}))})),define("DS/i3DXCompassCore/Model/MemberDetailsModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/WebappsUtils/WebappsUtils","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/Utils/Data"],(function(e,t,s,i,n){"use strict";return t.extend({url:"user",idAttribute:"id",defaults:{user:"",firstname:"",lastname:"",email:"",platform:"",platformName:"",role:"",agreement:"",active:null,supportMode:null,legal:null,processes:null,apps:null,remove:!0,deny:!1},setup:function(e,t){return this.get("email")&&this.set("email",this.get("email").toLowerCase()),this._parent(e,t)},getUserFullName:function(t){var s=this.escape("firstname")?e.String.ucfirst(this.escape("firstname")):"",i=this.escape("lastname")?e.String.ucfirst(this.escape("lastname")):"",n="";return""===s&&(s=this.escape("firstName")?e.String.ucfirst(this.escape("firstName")):""),""===i&&(i=this.escape("lastName")?e.String.ucfirst(this.escape("lastName")):""),""!==s.trim()&&""!==i.trim()?n=s.trim()+" "+i.trim():this.escape("email")&&""!==this.escape("email").trim()?n=this.escape("email").trim():this.escape("id")&&""!==this.escape("id").trim()&&(n=this.escape("id").trim()),t&&this.escape("id").length<=4&&(n=n+" - "+this.escape("id").toUpperCase()),n},getUserId:function(){return this.get("id")||this.get("id")||this.get("email").toLowerCase()},getProfile:function(t,n){var r;return t&&""!==n&&e.is(n)?r=e.String.format("{0}/api/media/streammediasprite/idList/{1}?{2}",n,this.getSpriteItem(),this.get("cacheBuster")?""+this.get("cacheBuster"):this.get("agreement")):(r=i.isCheckedAgreement(this.get("agreement"))?"default-profile-contractor.png":"default-profile.png",r=s.getWebappsAssetUrl("PlatformManagement","")+r),r},getSpriteItem:function(){return(""===this.get("firstname")?this.get("email"):this.get("id"))+":7:6"},isDeny:function(){return"2"===this.get("role")},isContractor:function(){return i.isCheckedAgreement(this.get("agreement"))},isCasual:function(){return this.get("casual")>0},removeLicense:function(t,s,i){n.deleteLicensesUser(e.merge({params:{user:this.get("id"),licenses:s.canCrossCompany()?JSON.stringify([{id:t.get("uid"),licensed:t.get("licensed"),restricted:t.get("restricted")}]):JSON.stringify([{id:t.get("uid")}]),type:t.getType(),platform:s.getId()}},{callbacks:i}))},addLicense:function(e,t,s,i){n.createLicensesUser({user:this.get("id"),licenses:JSON.stringify(e),type:t,platform:s.getId()},i)},updateLicense:function(e,t,s,i){n.updateLicensesUser({user:this.get("id"),licenses:JSON.stringify(e),type:t,platform:s.getId()},i)}})})),define("DS/i3DXCompassCore/Collection/MemberCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/MemberDetailsModel"],(function(e,t,s){"use strict";return t.extend({url:"user",model:s,sync:function(e,t,s){return this._parent(e,t,s)},parse:function(e){return this.setMaxLimit(e.count),e.tag&&this.setTags(e.tag),e.data||e.users},setTags:function(e){this.tags=e},getTags:function(){return this.tags}})}));