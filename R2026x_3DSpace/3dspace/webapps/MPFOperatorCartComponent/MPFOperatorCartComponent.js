define("DS/MPFOperatorCartComponent/OperatorCartComponent",["require","exports","UWA/Core","UWA/Class/View","DS/UIKIT/Input/Text","DS/UIKIT/Input/Select","DS/UIKIT/Input/Button","DS/MPFOrderListComponent/OrderListPage","i18n!DS/MPFOperatorCartComponent/assets/nls/MPFOperatorCartComponent","css!DS/MPFOperatorCartComponent/MPFOperatorCartComponent.css","DS/MPFBuyer/BuyerType"],(function(e,t,r,a,s,c,n,o,i,h,p){"use strict";var l,u;!function(e){e.OrderId="orderId",e.Seller="seller",e.Buyer="buyer"}(l||(l={})),function(e){e.RE_ORDER="reOrder",e.FORWARD="forward",e.OPEN_CART="openCart"}(u||(u={}));return a.extend({className:"mpf-operator-cart",setup(e){this.carts=e.carts,this.me=e.me,this.searchOption=l.OrderId,this.exportOrderFactory=e.exportOrderFactory,this.serviceViewFactory=e.serviceViewFactory,this.searchSelect=this._createSearchSelect(),this.searchInput=this._createSearchInput(),this.searchButton=this._createSearchButton(),this.cartResultList=this._createCartResultList(),this.searchHeader=this._createSearchHeader()},render(){return this.container.setContent([this.searchHeader,this.cartResultList.render()]),this},_createSearchHeader(){return r.createElement("div",{class:"mpf-search-header",html:[{tag:"div",class:"mpf-search-options",html:[{tag:"span",text:i.get("filterBy")},this.searchSelect]},this.searchInput,this.searchButton]})},_createSearchSelect(){return new c({className:"mpf-search-options-select",options:[{value:l.OrderId,label:i.get("orderId")},{value:l.Seller,label:i.get("seller")},{value:l.Buyer,label:i.get("buyer")}],value:l.OrderId,placeholder:!1,events:{onChange:this._selectChanged.bind(this)}})},async _selectChanged(e){this.searchOption=e.target.value,this.searchInput=await this._createSearchInput(),this.searchHeader=await this._createSearchHeader(),this.render()},_createSearchInput(){let e="";return this.searchOption===l.OrderId?e=i.get("enterOrderId"):this.searchOption===l.Seller?e=i.get("enterSeller"):this.searchOption===l.Buyer&&(e=i.get("enterBuyer")),new s({className:"mpf-search-input",placeholder:e,name:"searchOption",events:{onChange:()=>{this.searchInput.setClassName("mpf-search-input")}}})},_createSearchButton(){return new n({className:"primary mpf-search-button",value:i.get("search"),events:{onClick:this._onSearch.bind(this)}})},async _onSearch(){if(this._validate())try{const e={orderName:"",seller:"",buyer:""};switch(this.searchOption){case l.OrderId:e.orderName=this.searchInput.getValue(),this.cartResultList.operatorSearch(e);break;case l.Seller:e.seller=this.searchInput.getValue(),this.cartResultList.operatorSearch(e);break;case l.Buyer:e.buyer=this.searchInput.getValue(),this.cartResultList.operatorSearch(e)}}catch(e){"Error.RequestWithWrongInputArgs"===e.response.errorCode?this.searchInput.setClassName("mpf-search-input mpf-error"):console.error(e)}},_validate(){return!!this.searchInput.getValue().trim()||(this.searchInput.setClassName("mpf-search-input mpf-error"),!1)},_createCartResultList(){const e=new o({carts:this.carts,me:this.me,exportOrderFactory:this.exportOrderFactory,buyerType:p.UNKNOWN,serviceViewFactory:this.serviceViewFactory});return this.listenTo(e,u.RE_ORDER,(e=>{this.dispatchEvent(u.RE_ORDER,{cart:e})})),this.listenTo(e,u.FORWARD,(e=>{this.dispatchEvent(u.FORWARD,{cart:e})})),this.listenTo(e,u.OPEN_CART,(e=>{this.dispatchEvent(u.OPEN_CART,{cart:e})})),e}})})),define("DS/MPFOperatorCartComponent/OperatorCartComponentFactory",["require","exports","DS/MPFConnector/MarketplaceConnector","DS/MPFModelFactory/MPFFactoriesV2","DS/MPFCartModel/CartFactory","DS/MPFOperatorCartComponent/OperatorCartComponent","DS/MPFPersonModel/PersonFactory"],(function(e,t,r,a,s,c,n){"use strict";return{async createComponent(e){const t=await r.fetchPromise(),o=a.getInstance(t),[i,h,p]=await o.getFactories([a.Types.CART,a.Types.PERSON,a.Types.EXPORT_ORDER]),l=i.createCollection(s.Types.CART_SEARCH),u=h.createModel(n.Types.ME);return await u.fetchPromise(),new c({carts:l,me:u,exportOrderFactory:p,serviceViewFactory:e.serviceViewFactory})}}}));