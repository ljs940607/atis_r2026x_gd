define("DS/DeleteWidget/DeleteWidget",["DS/LifecycleServices/LifecycleObjectList","css!DS/DeleteWidget/DeleteWidget","UWA/Core","UWA/Controls/Abstract","DS/LifecycleServices/LifecycleCommandManager","DS/LifecycleServices/LifecyclePerfTimer","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls","i18n!DS/LifecycleServices/assets/nls/LifecycleServicesNls","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleControls/CommandDialog","DS/WAFData/WAFData","DS/LifecycleCmd/MessageMediator","DS/ReportingPanel/ReportingPanel","DS/ENOCollabToolsUI/tracker/ENOCollabTracker","DS/ENOCollabToolsUI/tracker/ENOCollabTrackerBackEnd","DS/LifecycleControls/DataGridViewContainer","DS/LifecycleServices/HTMLTemplating","DS/PlatformAPI/PlatformAPI","DS/LifecycleControls/DelayedMask"],(function(e,t,i,o,s,n,r,a,l,c,d,p,u,h,m,f,y,g,v,D){"use strict";var _=["Workspace","Workspace Vault"],C=null;function x(){return null==C&&(C=v.getUser()),C}function S(){var e=x(),t="";return void 0!==e&&(t=e.firstName+" "+e.lastName),t}return o.extend({physicalid:"",securityContext:null,context:null,tenant:null,operationType:"delete",refreshType:"",_commandResult:!1,_initialSelection:null,_isMultiSelect:!1,_isBookmark:!1,_isconditionalCheckbox:!1,_cmdDlg:null,init:function(e){UWA.is(e,"string")&&(this.operationType=e),this.deleteOptions=[];var t=this;this._perfTimer=n,this._perfTimer.init("Delete"),this._perfTimer.start("CommandUIDurationDelete"),this.commandManager=new s,this.commandManager.addEvent("onModifyOptions",(function(e){t.deleteOptions=e.options,t.deleteOptionsObjects=e.objects,e.options&&e.options.length>0&&(!0===e.options[0].value?!1===t._isconditionalCheckbox&&t.conditionalCheckbox(!0):!1===t._isMultiSelect&&!1===t._isBookmark&&t.conditionalCheckbox(!1))})),this.commandManager.addEvent("onModifyConditional",(function(e){!0===e.value?t._cmdDlg.updateUI():t._cmdDlg._disableOK()}))},conditionalCheckbox:function(e){var t=this;t._cmdDlg&&(!0===e?(t.commandManager.setDisplayStateConditionalDeleteCheckbox(!0),t._cmdDlg._disableOK()):(t.commandManager.setDisplayStateConditionalDeleteCheckbox(!1),t._cmdDlg.updateUI()))},executeCmd:function(e,t,i){const o=new Set;var s,n,r=0,a=e.length,l=[],c=0;for(r=0;r<a;r++)n=(s=e[r]).physicalid,o.add(n),o.size>c&&(c++,l.push(s));this.addEvent("onReady",(function(e){this._initialSelection=l,l.length>1?this._showMultiselUI(l):this._showCommandUI(l)}),this),this.addEvent("onComplete",(function(e){i()})),this.context=t.context,this.setObjects(l),this.trackAppContent(l)},launchReportingPanel:function(e){if(e.hasOwnProperty("report")&&0!==e.report.length){var t=[];for(var i in e.report){var o=e.report[i],s=o.isinput,n=[],l=o.physicalids[0];n.push(l),n.push(r.deleteFailedShort),n.push("Failed"),null!=(D=o["attribute[PLMEntity.V_Name]"])&&0!==D.length||(D=o.name),n.push(D);var c=o.displaytype;n.push(c);var d=o.revision;n.push(d),n.push(o.stateUserName);var p=void 0,u=o.reserved,m=o.reservedby;if("TRUE"==u?u=!0:"FALSE"!=u&&""!==u||(u=!1),void 0===u)p="";else if(!0===u){var f=(k=void 0,b=void 0,k=x(),b="",void 0!==k&&(b=k.login),b),y=S(),g=!0;m.trim().length>0&&((g=m.toUpperCase().trim()===f.toUpperCase().trim()||!1)||(g=m.toUpperCase().trim()===y.toUpperCase().trim()||!1)),p=g?"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-key lc_dgv_lock":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-lock lc_dgv_lock_other"}else!1===u&&(p="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-lock-open lc_dgv_unlock");n.push(p);var v=o.error;n.push(v),"true"==s?n.push(r.deleteSelected):n.push(r.deleteAdded),n.push(r.deleteFailedShort),t.push(n)}if(e.hasOwnProperty("results")&&0!==e.results.length)for(var i in e.results){var D,_=e.results[i],C=_.isinput;n=[],l=_.physicalid;n.push(l),n.push(r.deleteSuccessfulShort),n.push("Success"),null!=(D=_["attribute[PLMEntity.V_Name]"])&&0!==D.length||(D=_.name),n.push(D);c=_.displaytype;n.push(c);d=_.revision;n.push(d),n.push(""),n.push(""),n.push(""),"true"==C?n.push(r.deleteSelected):n.push(r.deleteAdded),n.push(r.deleteSuccessfulShort),t.push(n)}var O=[{text:"ID",dataIndex:"ID",isHidden:!0},{text:"StatusToolTipColumn",dataIndex:"statusTooltip",isHidden:!0,tooltipColumn:"Status"},{text:r.status,dataIndex:"Status",typeRepresentation:"icon"},{text:r.title,dataIndex:"Title"},{text:r.type,dataIndex:"Type"},{text:r.revision,dataIndex:"Revision",width:70,resizableFlag:!1},{text:a.maturitystate,dataIndex:"Current",width:100,resizableFlag:!1},{text:r.Lock,dataIndex:"Reserved",typeRepresentation:"icon",width:50,resizableFlag:!1},{text:r.message,dataIndex:"Message"},{text:r.deleteObjects,dataIndex:"Selected",isHidden:!0,isFilter:!0,filterOptions:[{value:r.deleteSelected,default:"on",tooltip:r.deleteSelectedToolTip},{value:r.deleteAdded,default:"off",tooltip:r.deleteAddedToolTip}]},{text:r.deleteResults,dataIndex:"Results",isHidden:!0,isFilter:!0,filterOptions:[{value:r.deleteSuccessfulShort,default:"on",tooltip:r.deleteSuccessfulShort},{value:r.deleteFailedShort,default:"on",tooltip:r.deleteFailedShort}]}];h.launchReportingPanel(t,O,null)}var k,b},getResult:function(){return this._commandResult},_showMultiselUI:function(e){var t=this,i=!1,o=!1,s=0,n=0;t._isMultiSelect=!0;var l="",p=e.length;for(n=0;n<p;n++){var u=e[n];if(u.type&&_.indexOf(u.type)>=0){if(!1===i&&u.hasOwnProperty("displayName"))if(u.hasOwnProperty("revision")&&null!=u.revision&&u.revision.trimEnd().trimStart().length>0){var h=u.revision;l=u.displayName.concat(" ").concat(h),u.displayName.endsWith(h)&&(l=u.displayName)}else l=u.displayName,u.hasOwnProperty("name")&&l.startsWith(u.name)&&(l=u.name);i=!0,t._isBookmark=!0,s++}if(this.hasOwnProperty("deleteOptionsObjects")&&this.deleteOptionsObjects)for(var m=0;m<this.deleteOptionsObjects.length;m++)if(u.physicalid==this.deleteOptionsObjects[m].physicalid){e[n].preCheckStatus="waiting";break}l=UWA.String.escapeHTML(l)}s>0&&s<e.length&&(o=!0),this.deleteContent=UWA.createElement("div",{class:"lcm-delete-content css_grid_container dlg_cmd_content"});var f=document.createElement("div");f.className="delete-multi-message";var v=document.createElement("div");v.className="delete_popup_warning";var D=UWA.createElement("div",{styles:{height:"100%","padding-right":"5px"}}),C=c.get3DSpaceBaseUrl(widget.getValue("x3dPlatformId"))+"/webapps/IterationsWidget/assets/images/warning.png";D.innerHTML='<img src="'+C+'"></img>',v.appendChild(D);var x=r.doDelete+r.questionMark+"<br>"+r.doDeleteDetails;i&&(x=o?1===s?r.doDeleteSingleBookmarkMixedDetails+"<br>"+a.replace(r.doDeleteSingleBookmarkMixed,{bookmarkName:l}):r.doDeleteMultipleBookmarkMixedDetails+"<br>"+r.doDeleteMultipleBookmarksMixed:r.doDeleteMultipleBookmarkDetails+"<br>"+r.doDeleteMultipleBookmarks),f.innerHTML=x,v.appendChild(f),this.deleteContent.appendChild(v),this.deleteContent.appendChild(this.commandManager.buildConditionalDeletePanel(r.deleteCannotBeRecovered)),this.objectsList=new y({idName:"dgvContainer",clickToShowDGV:!1,showLock:!0,showRowSelect:!0,showPreStatus:!0},e),this.objectsList.inject(this.deleteContent);var S=r.delete_+" - "+e.length+" "+r.deleteObjects;t._cmdDlg=new d;var O=t._cmdDlg.create(this.deleteContent,{title:S,closeButton:!0,resizable:!0,imageUrl:e[0].imageUrl||"",OKBtnText:r.delete_,OKBtnType:"delete",onOk:function(){t._executeDelete((function(){t._perfTimer.start("CommandExecutionDurationDelete"),O.destroy(),t._onComplete(),t._cmdDlg.destroy()}))},onClose:function(){t._onComplete()}});this.objectsList.model.getModelEvents().subscribe({event:"nodeModelUpdate"},(function(e){if(t._isMultiSelect&&t.objectsList){var i=[];t.objectsList.model.getRoots().forEach(((e,t)=>{var o=e.options.grid;if(!o.attrExclude){var s={physicalid:o.id};i.push(s)}})),0==i.length?t._cmdDlg._disableOK():t.commandManager._conditionalInput.checkFlag&&t._cmdDlg._okButton.enable()}})),t._cmdDlg._disableOK(),this._isMultiSelect&&(O.elements.container.addClassName("multiSel"),t._executeCheckAccess((function(e){var i=t.objectsList.model.getRoots();if(e&&e.hasOwnProperty("results"))for(var o=0;o<e.results.length;o++)for(var s=e.results[o].physicalid,n=e.results[o].hasDeleteAccess,r=0;r<i.length;r++){var a=i[r];if(a.options.grid.id==s){var l=!1;n||(l=!0),a.updateOptions({grid:{preCheckStatus:n,attrExclude:l}});break}}}))),O.inject(widget.body),O.setNewSize({});var k=O.getModalBodySize(),b=this._isMultiSelect?310:236;b=this._isMultiSelect?b+25*(e.length-2):b,!this._isMultiSelect&&g.isTouchMode()&&(b+=24),O.setNewSize({width:k.width,height:b}),t._perfTimer.stop("CommandUIDurationDelete")},_showCommandUI:function(e){var t=this;e&&UWA.is(e,"array")&&e.length>0&&e[0].physicalid&&t._executeSingleCheckAccess(e[0].physicalid,(function(i){if(i&&i.hasOwnProperty("results"))if(i.results[0].hasDeleteAccess){var o="",s=null;if(e&&UWA.is(e,"array")&&e.length>0&&e[0].hasOwnProperty("revision")&&e[0].hasOwnProperty("displayName")){var n=e[0].revision;null!=n&&n.trimStart().trimEnd().length>0?(o=e[0].displayName.concat(" ").concat(n),e[0].displayName.endsWith(n)&&(o=e[0].displayName)):(o=e[0].displayName,e[0].hasOwnProperty("type")&&_.indexOf(e[0].type)>=0&&e[0].hasOwnProperty("name")&&o.startsWith(e[0].name)&&(o=e[0].name));var a=r.delete_;if(e[0].hasOwnProperty("type")&&(s=e[0].type),""==o){if(e[0].hasOwnProperty("type")&&(a=r.delete_+" - "+s),e[0].hasOwnProperty("typeDisplayName")){var l=e[0].typeDisplayName;a=r.delete_+" - "+l}}else a=r.delete_+" - "+o}o=UWA.String.escapeHTML(o);var c=t._renderDialogContent(o,s);t._cmdDlg=new d;var p=t._cmdDlg.create(c,{title:a,OKBtnText:r.delete_,OKBtnType:"delete",closeButton:!0,imageUrl:e[0].imageUrl||"",onOk:function(){t._executeDelete((function(){t._perfTimer.start("CommandExecutionDurationDelete"),p.destroy(),t._onComplete(),t._cmdDlg.destroy()}))},onClose:function(){t._onComplete()}});_.indexOf(s)>=0&&(t._isBookmark=!0,t.conditionalCheckbox(!0)),p.inject(widget.body),p.setNewSize({}),t.fakeFunctionForODT(p),t._perfTimer.stop("CommandUIDurationDelete")}else{var u=r.deleteYouCannot,h=r.deleteSecurityError,m={title:u,message:"",subtitle:h,eventID:"error"};t.showComplexNotification(m,h);var f={report:[{isinput:"true",physicalids:[e[0].physicalid],"attribute[PLMEntity.V_Name]":e[0].displayName,revision:e[0].revision,stateUserName:e[0].current,reserved:e[0].locked,reservedby:e[0].lockedBy,displaytype:e[0].typeDisplayName,error:h}]};t.launchReportingPanel(f),t._onComplete(),t._perfTimer.stop("CommandUIDurationDelete")}}))},fakeFunctionForODT:function(e){return!!e},_renderDialogContent:function(e,t){var i=UWA.String.escapeHTML(e),o=document.createElement("div");o.className="delete_popup css_grid_container dlg_cmd_content";var s,n=document.createElement("div");n.className="delete-single-message";var l=document.createElement("div");l.className="delete_popup_warning";var d=UWA.createElement("div",{styles:{height:"100%","padding-right":"5px"}}),p=c.get3DSpaceBaseUrl(widget.getValue("x3dPlatformId"))+"/webapps/IterationsWidget/assets/images/warning.png";return d.innerHTML='<img src="'+p+'"></img>',l.appendChild(d),s=t&&_.indexOf(t)>=0?null==r.doDeleteSingleBookmark?a.replace("Do you want to permanently delete the {bookmarkName} hierarchy? The content is removed",{bookmarkName:e}):r.doDeleteSingleBookmarkDetails+" "+a.replace(r.doDeleteSingleBookmark,{bookmarkName:e}):r.doDeleteMessage+i+r.questionMark+"<br>"+r.doDeleteDetails,n.innerHTML=s,l.appendChild(n),o.appendChild(l),this.deleteOptions&&this.deleteOptions[0]&&this.deleteOptions[0].key&&"wholeStructure"===this.deleteOptions[0].key&&this.deleteOptions[0].type&&"checkbox"===this.deleteOptions[0].type?(this.deleteOptions[0].conditional=!0,this.deleteOptions[0].conditionaltext=r.deleteCannotBeRecovered,o.appendChild(this.commandManager.buildCheckboxOptionPanel(this.deleteOptions))):t&&_.indexOf(t)>=0&&(o.appendChild(this.commandManager.buildConditionalDeletePanel(r.deleteCannotBeRecovered)),o.appendChild(this.commandManager.buildCheckboxOptionPanel(this.deleteOptions))),o},_onComplete:function(){this.dispatchEvent("onComplete",{})},setObjects:function(e){var t=this;if(0===e.length)throw r.noObject;if(1===e.length){var i=[];if((s={}).data=e,(n=e[0]).hasOwnProperty("physicalid")&&""===n.physicalid)throw r.epmtyPhysicalId;this.physicalid=n.physicalid,i.push({physicalid:this.physicalid}),this.dataPIDs=i,this.tenant=n.tenant,this.commandManager.setTenant(this.tenant),this.commandManager.addEvent("onCompleteGetOptions",(function(e){document.body.style.cursor="default",this.deleteOptions=e.options,this.deleteOptionsObjects=e.objects,this.refreshType="Delete",this.dispatchEvent("onReady",{})}),this);var o={data:[{physicalid:this.physicalid}],command:"Delete"};this._perfTimer.start("Delete: getOptions"),this.commandManager.getOptions(o,(function(e,i){t._perfTimer.stop("Delete: getOptions"),t.showError(e),t._refreshInvalidObjects(i),t._onComplete()}))}else{var s;(s={}).data=e;for(var n,a=(n=e[0]).tenant,l=[],c=(i=[],0);c<s.data.length;++c){var d=e[c];if(d.hasOwnProperty("physicalid")&&""===d.physicalid)throw r.epmtyPhysicalId;if(d.tenant!=a)throw r.MultipleTenants;l.push(d.physicalid),i.push({physicalid:d.physicalid})}this.pids=l,this.dataPIDs=i,this.tenant=a,this.commandManager.setTenant(this.tenant);let p=new D(widget.body,500,r.loadingText);this.commandManager.addEvent("onCompleteGetOptions",(function(e){document.body.style.cursor="default",p.unmask(),this.deleteOptions=e.options,this.deleteOptionsObjects=e.objects,this.refreshType="Delete",this.dispatchEvent("onReady",{})}),this);o={data:i,command:"Delete"};this._perfTimer.start("Delete: getOptions"),this.commandManager.getOptions(o,(function(e,i){t._perfTimer.stop("Delete: getOptions"),t.showError(e),t._refreshInvalidObjects(i),t._onComplete()}))}},_executeCheckAccess:function(e){var t=this,i={};if(this._isMultiSelect&&this.objectsList)for(var o=this.objectsList.model.getRoots(),s=Math.ceil(o.length/20),n=0;n<s;n++){for(var a=[],c=20*n;c<Math.min(20*(n+1),o.length);c++){var d={physicalid:o[c].options.grid.id};a.push(d)}i.data=a,i.notificationTimeout=300,console.log("Prepare CheckAccess Input:"),console.log(i);var p=JSON.stringify(i);if(null!=t.context&&"function"==typeof t.context.getSecurityContext){var u=t.context.getSecurityContext();t.securityContext=u.SecurityContext,t.DeleteCheckAccessRequest(p,e,!1)}else l.getSecurityContextPromise().then((function(i){null==i?(t.showError({errorMsg:r.ErrorSecurityContextEmpty}),e()):(t.securityContext=i,t.DeleteCheckAccessRequest(p,e,!1))})).catch((function(i){t.showError({errorMsg:i}),e()}))}},_executeSingleCheckAccess:function(e,t){var i=this,o={},s=[{physicalid:e}];o.data=s,o.notificationTimeout=300,console.log("Prepare CheckAccess Input:"),console.log(o);var n=!1;window.__karma__&&(n=!0);var a=JSON.stringify(o);if(null!=i.context&&"function"==typeof i.context.getSecurityContext){var c=i.context.getSecurityContext();i.securityContext=c.SecurityContext,i.DeleteCheckAccessRequest(a,t,n)}else l.getSecurityContextPromise().then((function(e){null==e?(i.showError({errorMsg:r.ErrorSecurityContextEmpty}),t()):(i.securityContext=e,i.DeleteCheckAccessRequest(a,t,n))})).catch((function(e){i.showError({errorMsg:e}),t()}))},_executeDelete:function(e){var t={},i=this.dataPIDs;this._isMultiSelect&&this.objectsList&&(i=[],this.objectsList.model.getRoots().forEach(((e,t)=>{var o=e.options.grid;if(!o.attrExclude){var s={physicalid:o.id};i.push(s)}})));t.data=i,t.notificationTimeout=300,"restore"!=this.operationType&&(t.options=this.deleteOptions),console.log("Prepare Delete/Restore Input:"),console.log(t);f.enrichRequestWithMetrics(t,{UXName:"Delete"});var o=JSON.stringify(t),s=this;if(t.data.length>0){document.body.style.cursor="wait";var n=function(){document.body.style.cursor="default",e()};if(null!=s.context&&"function"==typeof s.context.getSecurityContext){var a=s.context.getSecurityContext();s.securityContext=a.SecurityContext,s.DeleteServiceRequest(o,n)}else l.getSecurityContextPromise().then((function(e){null==e?(s.showError({errorMsg:r.ErrorSecurityContextEmpty}),n()):(s.securityContext=e,s.DeleteServiceRequest(o,n))})).catch((function(e){s.showError({errorMsg:e}),n()}))}else s.showNotification(r.deleteNotEligible),s._cmdDlg._okButton.enable(),s._cmdDlg._cancelButton.enable()},_refreshInvalidObjects:function(e){if(e&&UWA.is(e.report,"array")){var t=this._getInvalidObjectIDs(e.report);if(!(t.length<1)){for(var i=[],o=0;o<t.length;++o)i.push({physicalid:t[o]});this._refreshObjects("Delete",i)}}},_getInvalidObjectIDs:function(e){for(var t=[],i=0;i<e.length;++i)if(UWA.is(e[i].errorcode,"number")&&(1===e[i].errorcode||100===e[i].errorcode||101===e[i].errorcode))if(UWA.is(e[i].physicalids,"array"))for(var o=e[i].physicalids,s=0;s<o.length;++s)t.push(o[s]);else UWA.is(e[i].physicalid)&&t.push(e[i].physicalid);return t},showComplexNotification(e,t){"function"==typeof this.context.displayNotification?this.context.displayNotification(e):alert(t)},showNotification:function(e,t){if("function"==typeof this.context.displayNotification){var i={eventID:"string"==typeof t?t:"primary",msg:e};this.context.displayNotification(i)}else alert(e)},showError:function(e){if(void 0!==this.context&&null!==this.context&&"function"==typeof this.context.displayNotification){var t=e.message||e,i="error";null!=e&&e&&e.hasOwnProperty("isNotificationInfo")&&e.isNotificationInfo&&(i="info");var o=!1;null!=e&&e&&e.hasOwnProperty("sticky")&&(o=e.sticky);var s={eventID:i,msg:t.split?t.split("\n").join("<br>"):t,sticky:o};this.context.displayNotification(s)}else alert(e)},_refreshObjects:function(e,t,i){var o={created:[],deleted:[],modified:[],restored:[]};o.context=this.context;var s=function(e,t,i){e.forEach((function(e){t.push({physicalid:e.physicalid,operation:i,impl:e.impl})}))};t&&s(t,o.deleted,e),i&&s(i,o.restored,e),u.dispatchEvent("onModification",o)},_refreshFromSuccessResponse:function(e){var t=[],i=[];e.results.forEach((function(e){"restore"===this.operationType?i.push(e):t.push(e)}),this),this._refreshObjects(this.refreshType,t,i)},DeleteCheckAccessRequest:function(e,t,i){var o=this;this._commandResult=!1;var s="";0==i&&(s=c.get3DSpaceWSUrl(this.tenant,"/resources/lifecycle/Delete/checkDeleteAccess",null));var n=function(e){console.log("delete check access: COMPLETED"),console.log(e),null!=e?(e.hasOwnProperty("results")&&0!==e.results.length&&(o._commandResult=!0),t(e)):t()};0==i?p.authenticatedRequest(s,{method:"POST",headers:c.getHeaders(encodeURIComponent(this.securityContext)),timeout:288e5,onComplete:n,data:e,onFailure:function(e,i){t()},onTimeout:function(e){t()},type:"json"}):n({report:[],results:[{hasDeleteAccess:"true",physicalid:JSON.parse(e).data[0].physicalid}],status:"success"})},DeleteServiceRequest:function(e,t){var i=this;this._commandResult=!1;var o=c.get3DSpaceWSUrl(this.tenant,"/resources/lifecycle/Delete/structure",null);i._perfTimer.start("Delete: structure"),p.authenticatedRequest(o,{method:"POST",headers:c.getHeaders(encodeURIComponent(this.securityContext)),timeout:288e5,onComplete:function(e){var o;if(i._perfTimer.stop("Delete: structure"),console.log("delete: COMPLETED"),console.log(e),null!=e)if(e.hasOwnProperty("results")&&0!==e.results.length&&(i._commandResult=!0),i.launchReportingPanel(e),t(),!0===i._commandResult){if(e.hasOwnProperty("report")&&0!==e.report.length){var s=e.report.length;o=r.deletePartialSuccessful+": "+s+" ",o+=1===s?r.deleteIgnoredObject:r.deleteIgnoredObjects}else o=r.deleteSuccessful;i.showNotification(o),i._perfTimer.stop("CommandExecutionDurationDelete");var n=["CommandUIDurationDelete","CommandExecutionDurationDelete","Delete: structure","Delete: getOptions"];e.hasOwnProperty("PerfAndInfo")?i._perfTimer.printTimeShowDialogAndProcess(n,i.securityContext,e.PerfAndInfo):i._perfTimer.printTimeShowDialogAndProcess(n,i.securityContext),i._refreshFromSuccessResponse(e)}else{o=e.hasOwnProperty("errormessage")?e.errormessage:r.deleteFailed,"restore"===i.operationType&&(o=r.restoreFailed),i.showError(o),i._perfTimer.stop("CommandExecutionDurationDelete");n=["CommandUIDurationDelete","CommandExecutionDurationDelete","Delete: structure","Delete: getOptions"];i._perfTimer.printTimeShowDialogAndProcess(n,i.securityContext),i._refreshInvalidObjects(e)}else t()},data:e,onFailure:function(e,o){i._perfTimer.stop("Delete: structure");var s=l._parseWebServiceError(e,o,!0,"Delete");void 0!==s&&void 0!==s&&s.hasOwnProperty("message")?(s.errorMsg=s.message,s.type="error",s.hasOwnProperty("isNotificationInfo")&&s.isNotificationInfo&&(s.type="info")):s.errorMsg=l.parseWebServiceError(e,o,!0),s.sticky=!0,i.showError(s),console.log("Failed to retrive data from the server"),t()},onTimeout:function(e){i._perfTimer.stop("Delete: structure"),(e=l._parseWebServiceError(e,null,!0,"Delete")).sticky=!0,i.showError(e),t()},type:"json"})},trackAppContent:function(e){var t=this,i={UXName:"Delete",models:e};t.trackerEvent=m.createInitActionEvent(i,t.trackerEvent),m.checkAndTrackPageEvent(t.trackerEvent)}})}));