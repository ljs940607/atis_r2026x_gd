define("DS/RTUserPresenceAPI/RTUPavatar",["UWA/Class/View","DS/UIKIT/Tooltip"],(function(e){"use strict";return e.extend({tagName:"div",className:"RTUPavatar",render:function(){return this.container.setContent([{tag:"img",class:"img-responsive img-rounded",src:this.model.get("avatarUrl"),alt:this.model.get("username")}]),this},inject:function(e){return this.container.inject(e),this},destroy:function(){return this.stopListening(),this._parent()},setup:function(){this.listenTo(this.model,"onChange:avatarUrl",this.render)}})})),define("DS/RTUserPresenceAPI/RTUPuser",["UWA/Class/Model"],(function(e){"use strict";return e.extend({defaults:{login:"noLogin",presence:"Offline",username:"username",noAvatar:!1,avatarUrl:"./resources/en/1/webapps/InstantMessaging/assets/avatarDefault.png"}})})),define("DS/RTUserPresenceAPI/RTUPbadge",["UWA/Class/View","DS/UIKIT/Tooltip"],(function(e,t){const n={online:"#57B847",busy:"#EA4F37",dnd:"#EA4F37",away:"#FEE000",offline:"#ADADAD",ooo:"#9B2C98"},s={online:"fonticon-status-ok",busy:"fonticon-record",dnd:"fonticon-status-noway",away:"fonticon-status-clock",offline:"fonticon-status-empty",ooo:"fonticon-status-out-of-office"};return e.extend({tagName:"div",className:"RTUPbadge",render:function(e){const t=(this.model.get("presence")||"Unknown").toLowerCase(),r=n[t]||n.offline,i=s[t]||s.offline;return this.container.setContent([{tag:"span",class:"fonticon "+i,styles:{background:r}}]),this.container.getElement(".fonticon").addClassName=function(){},"fonticon-3ds-why"==i?this.hide():this.show(),this},setup:function(){this.listenTo(this.model,"onChange:presence",this.render)},inject:function(e){return this.container.inject(e),this},destroy:function(){return this.stopListening(),this._parent()}})})),define("DS/RTUserPresenceAPI/RTUserPresenceAPI",["UWA/Class/View","DS/RTUserPresenceAPI/RTUPbadge","DS/RTUserPresenceAPI/RTUPavatar","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/RTAPIManager/RTAPIManager","css!../RTUserPresenceAPI/RTUserPresenceAPI.css"],(function(e,t,n,s,r){"use strict";return e.extend({tagName:"div",className:"RTUPAPI",setup:function(e){if(!e.login)return console.error("RTUserPresenceAPI needs login");if(!e.tenantId)return console.error("RTUserPresenceAPI needs tenantId");e.tenant=e.tenantId;var i,a=r.setUser(e);this.user=a,this.tenant=e.tenantId,this.noAvatar=e.noAvatar,this.noTooltip="boolean"!=typeof e.noTooltip||e.noTooltip,this.swymUrl=e.swymUrl;try{this.swymUrl=this.swymUrl||document.IMCall.vmCall.$store.state.swymUrl}catch(e){this.swymUrl=this.swymUrl}if(e.devEnv)a.set({avatarUrl:"./assets/avatarDefault.png"});else if(this.swymUrl||e.noAvatar||a.get("hasAvatar")||!e.tenantId){if(!this.swymUrl)return console.error("RTUserPresenceAPI impossible to compute avatar url");this.user.set({avatarUrl:this.swymUrl+"/api/user/getpicture/login/"+e.login}),this.user.set({hasAvatar:!0})}else s.getServiceUrl({serviceName:"3DSwym",platformId:e.tenantId,onComplete:(i=this,function(t){i.user.set({avatarUrl:t+"/api/user/getpicture/login/"+e.login}),i.user.set({hasAvatar:!0}),i.swymUrl=t}),onFailure:function(e){console.error("RTUserPresenceAPI failed to retrieved 3DSwym url via i3DXCompassPlatformServices.getServiceUrl")}});return this.noAvatar||(this.avatar=new n({model:a,id:"AvatarView-"+a.cid})),this.badge=new t({model:a,id:`BadgeView-${a.cid}`}),e.size&&(this.container.style.width=e.size,this.container.style.height=e.size,"80px"==e.size&&this.container.addClassName("big")),e.onclick&&(this.container.onclick=e.onclick,this.container.addClassName("clickable")),e.renderTo?this.render().inject(e.renderTo):this.render(),this},platformListener:function(e){return r._platformListener(e)},render:function(){return this.container.setContent([]),!this.noAvatar&&this.avatar&&this.avatar.render().inject(this.container),this.badge.render({noAvatar:this.noAvatar}).inject(this.container),this},inject:function(e){return this.container.inject(e)},destroy:function(){return this.stopListening(),this.avatar&&this.avatar.destroy(),this.badge&&this.badge.destroy(),this._parent()}})}));