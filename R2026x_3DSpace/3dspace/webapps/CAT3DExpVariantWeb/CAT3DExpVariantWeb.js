define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],(function(e,t){"use strict";return t.singleton({VariantType:{All:0,Undefined:1,Material:2,Visibility:3,Package:4,Conditional:5,EnoviaDictionary:6,OptionGroup:7},VisibilityEffect:{visible:"1",invisible:"0"},interfaceName:"CATI3DExpVariant",required:{listVariantValues:function(){},getType:function(){},getCurrent:function(){},listTargets:function(){},getVariantValue:function(){},getVariantValueFromPathOfIds:function(){},setCurrent:function(){},getVariantsMgr:function(){}},optional:{}})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariantValue",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],(function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DExpVariantValue",required:{getType:function(){},getVariant:function(){},activate:function(){},deactivate:function(){}},optional:{}})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariantsMgr",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],(function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DExpVariantsMgr",required:{listAllVariantsMgrs:function(){},listVariants:function(){},getVariant:function(){},getVariantFromPathOfIds:function(){}},optional:{}})})),define("DS/CAT3DExpVariantWeb/managers/XCTEWSEExperienceVariantManager",["UWA/Core","UWA/Class"],(function(e,t){"use strict";return t.extend({onExperienceReady:function(e){this.GetObject().setExperience(e)},onPreDisposeExperience:function(){}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariantsMgr",["UWA/Core","UWA/Class","UWA/Class/Listener","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return e.Class.extend(n,{Dispose:function(){this.stopListening()},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"actors.CHANGED",this._buildChildren.bind(this)),this._buildChildren(),this.GetObject()._experienceBase.getManager("CAT3DExpVariantManager").initializeVariantsMgr(this)},_buildChildren:function(){if(this.QueryInterface("CATI3DExperienceObject").HasVariable("scenes")){const e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("scenes");for(let t=0;t<e.length;t++){const n=e[t].QueryInterface("CATI3DExperienceObject").GetValueByName("actors");for(let e=0;e<n.length;e++)n[e].QueryInterface("CATI3DExpVariantsMgr")}}const e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("actors");for(let t=0;t<e.length;t++)e[t].QueryInterface("CATI3DExpVariantsMgr")},listAllVariantsMgrs:function(e=a.VariantType.All){let t=[];this.listVariants(e).length>0&&t.push(this);let n=this.QueryInterface("CATI3DExperienceObject").GetValueByName("actors");for(let a=0;a<n.length;a++){let r=n[a].QueryInterface("CATI3DExpVariantsMgr");r&&(t=t.concat(r.listAllVariantsMgrs(e)))}return t},listVariants:function(e=a.VariantType.All){let t=this.QueryInterface("CATI3DExperienceObject");if(!t.HasVariable("variants"))return[];let n=t.GetValueByName("variants");if(a.VariantType.All===e)return n;let r=[];for(let t=0;t<n.length;t++)n[t].QueryInterface("CATI3DExpVariant").getType()===e&&r.push(n[t]);return r},getVariant:function(e,t=a.VariantType.All){let n=this.QueryInterface("CATI3DExperienceObject");if(!n.HasVariable("variants"))return;let r=n.GetValueByName("variants");for(let n=0;n<r.length;n++)if(r[n].QueryInterface("CATI3DExperienceObject").GetValueByName("_varName")===e&&(a.VariantType.All===t||r[n].QueryInterface("CATI3DExpVariant").getType()===t))return r[n]},getVariantFromPathOfIds:function(e,t=a.VariantType.All){let n=this.QueryInterface("CATI3DExperienceObject").GetValueByName("variants");for(let r=0;r<n.length;r++)if(n[r].QueryInterface("CATI3DExperienceObject").GetPathOfIds().isEqual(e)&&(a.VariantType.All===t||n[r].QueryInterface("CATI3DExpVariant").getType()===t))return n[r]}})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVisibilityValue",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariantValue"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpVisibilityValue",required:e.merge({getVisibleTargets:function(){},getInvisibleTargets:function(){}},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpMaterialVariant",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpMaterialVariant",required:e.merge({},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpPackageValue",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariantValue"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpPackageValue",required:e.merge({getEffects:function(){}},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpEnoviaDictionaryValue",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariantValue"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpEnoviaDictionaryValue",required:e.merge({},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpMaterialValue",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariantValue"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpMaterialValue",required:e.merge({getValueMaterial:function(){}},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpOptionGroupVariant",["UWA/Core","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n){"use strict";return t.singleton({interfaceName:"CATI3DExpOptionGroupVariant",required:e.merge({setCurrents:function(){},getCurrents:function(){},addCurrent:function(){},removeCurrent:function(){},saveCurrents:function(){},getSavedCurrents:function(){}},n.required),optional:e.merge({},n.optional)})})),localStorage.setItem("XCTVSEStateWasm_USE_JSONV2",!0),define("DS/CAT3DExpVariantWeb/managers/CAT3DExpVariantManager",["UWA/Core","UWA/Class","DS/XCTVSEStateWasm/XCTVSEStateWasm","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return t.extend({Dispose:function(){delete this._vseStae},setExperience:function(e){e.QueryInterface("CATI3DExpVariantsMgr")},getVSEState:function(){return this._vseStae||(this._vseStae=new n.XCTVSState),this._vseStae},initializeVariantsMgr:function(e){const t=e.listVariants(a.VariantType.Conditional).map((t=>this._writeConditionalExpression(t,e))),n=e.listVariants().map((t=>this._extractVariantAsJSON(t,e))),r={VariantManagerID:e.QueryInterface("CATI3DExperienceObject").GetPathOfIds().toString("/"),ConditionalExpressions:t,Variants:n,Option:"Full"},i=this.getVSEState().initializeState(JSON.stringify({InitialState:[r]}));"S_OK"===!JSON.parse(i).ReturnType&&console.warn("CAT3DExpVariantManager : Initialize State Failed")},computeState:function(e){const t=e.getVariantsMgr(),n=t.QueryInterface("CATI3DExperienceObject").GetPathOfIds(),a=e.QueryInterface("CATI3DExperienceObject").GetPathOfIds(),r=e.QueryInterface("CATI3DExpOptionGroupVariant");let i;if(r)i=r.getCurrents();else{const t=e.getCurrent();i=t?[t]:[]}const s=this.getVSEState().computeState(JSON.stringify({ComputeState:[{VariantManagerID:n.toString("/"),Variants:[{IDs:a.getRelativePathOfIds(n),Currents:i.map((e=>e.QueryInterface("CATI3DExperienceObject").GetPathOfIds().getRelativePathOfIds(a)))}]}]})),c=JSON.parse(s);if("S_OK"===!c.ReturnType)return void console.warn("CAT3DExpVariantManager : Compute State Failed");const u=c.ComputeState;if(1!==u.length)return void console.warn("CAT3DExpVariantManager : Compute State Failed");const o=u[0];o.ConditionalVariants.forEach((e=>{this._getVariantFromRelativeIds(t,e.IDs).QueryInterface("CATI3DExpConditionalVariant").setStatus(e.Status)}));o.Variants.forEach((e=>{const n=this._getVariantFromRelativeIds(t,e.IDs),a=n.QueryInterface("CATI3DExpVariant"),r=n.QueryInterface("CATI3DExpOptionGroupVariant"),i=e.Currents;if(r){const e=i.map((e=>this._getVariantValueFromRelativeId(a,e)));r.setCurrents(e)}else{if(i.length>1)return void console.warn("Only OptionGroup Variant could have multiple currents values");const e=1===i.length?this._getVariantValueFromRelativeId(a,i[0]):null;a.setCurrent(e)}}))},_getVariantFromRelativeIds:function(e,t){const n=e.QueryInterface("CATI3DExperienceObject").GetPathOfIds();return n.addRelativeIds(t),this._experienceBase.ComponentsMap.GetComponentFromID(n.toString())},_getVariantValueFromRelativeId:function(e,t){const n=e.QueryInterface("CATI3DExperienceObject").GetPathOfIds();return n.addRelativeIds(t),this._experienceBase.ComponentsMap.GetComponentFromID(n.toString())},_extractVariantAsJSON:function(e,t){const n=e.QueryInterface("CATI3DExperienceObject"),a=e.QueryInterface("CATI3DExpOptionGroupVariant");let r;if(a)r=a.getCurrents();else{const t=e.QueryInterface("CATI3DExpVariant").getCurrent();r=t?[t]:[]}return{IDs:n.GetPathOfIds().getRelativePathOfIds(t.QueryInterface("CATI3DExperienceObject").GetPathOfIds()),Prototype:n.GetType(!0),Name:n.GetValueByName("_varName"),AlternativeName:n.GetValueByName("Alternative Name"),SourceModel:n.GetValueByName("Source Model"),Values:n.GetValueByName("values").map((e=>this._extractValueAsJSON(e))),Currents:r.map((e=>e.QueryInterface("CATI3DExperienceObject").GetPathOfIds().getRelativePathOfIds(n.GetPathOfIds())))}},_extractValueAsJSON:function(e){const t=e.QueryInterface("CATI3DExperienceObject"),n=t.GetParent(),a={IDs:t.GetPathOfIds().getRelativePathOfIds(n.QueryInterface("CATI3DExperienceObject").GetPathOfIds()),Prototype:t.GetType(!0),Name:t.GetValueByName("_varName"),AlternativeName:t.GetValueByName("Alternative Name")},r=e.QueryInterface("CATI3DExpPackageValue");return r&&(a.Effects=r.getEffects().map((e=>e.QueryInterface("CATI3DExperienceObject").GetPathOfIds().toString("/")))),a},_writeConditionalExpression:function(e,t){const n=e.QueryInterface("CATI3DExpConditionalVariant").getEffectivityXMLExpression(),a=(new DOMParser).parseFromString(n,"application/xml").getElementsByTagName("Context"),r=[];for(let e=0;e<a.length;e++){const n=this._writeContextConditionalExpressionFirstElement(a[e],t);n&&r.push(n)}let i;return 0===r.length?console.warn("CAT3DExpVariantManager : Cant compute conditional Expression"):i=1===r.length?r[0]:{OR:r},{IDs:e.QueryInterface("CATI3DExperienceObject").GetPathOfIds().getRelativePathOfIds(t.QueryInterface("CATI3DExperienceObject").GetPathOfIds()),Expression:i}},_writeContextConditionalExpressionFirstElement:function(e,t){const n=e.getAttribute("HolderName"),a=e.children;if(1===a.length)return this._writeExpression(a[0],t,n);console.warn("CAT3DExpVariantManager : Cant compute conditional Expression first element")},_writeContextConditionalExpressionNextElements:function(e,t,n){const a=e.children,r=[];for(let e=0;e<a.length;e++)r.push(this._writeExpression(a[e],t,n));return r},_writeExpression:function(e,t,n){const a=e.tagName;if("Feature"!==a){const r={};return r[a]=this._writeContextConditionalExpressionNextElements(e,t,n),r}let r=n+"_"+e.getAttribute("Name");const i=t.listVariants();let s,c=i.find((e=>e.QueryInterface("CATI3DExperienceObject").GetValueByName("_varName")===r));if(c){const t=[],n=e.children;for(let e=0;e<n.length;e++)t.push(n[e].getAttribute("Name"));const a=c.QueryInterface("CATI3DExpVariant").listVariantValues();s=t.map((e=>a.find((t=>t.QueryInterface("CATI3DExperienceObject").GetValueByName("_varName")===e))))}else{const t=e.getElementsByTagName("Feature");if(1===t.length){const e=t[0].getAttribute("Name");r=r+"_"+e}c=i.find((e=>e.QueryInterface("CATI3DExperienceObject").GetValueByName("_varName")===r));s=[c.QueryInterface("CATI3DExpVariant").listVariantValues().find((e=>"On"===e.QueryInterface("CATI3DExperienceObject").GetValueByName("_varName")))]}return{Feature:{IDs:c.QueryInterface("CATI3DExperienceObject").GetPathOfIds().toString("/"),possibleValues:s.map((e=>e.QueryInterface("CATI3DExperienceObject").GetPathOfIds().getRelativePathOfIds(c.QueryInterface("CATI3DExperienceObject").GetPathOfIds())))}}},GetType:function(){return"CAT3DExpVariantManager"}})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVisibilityVariant",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpVisibilityVariant",required:e.merge({},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpEnoviaDictionaryVariant",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpEnoviaDictionaryVariant",required:e.merge({},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpPackageVariant",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpPackageVariant",required:e.merge({},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/interfaces/CATI3DExpConditionalVariant",["UWA/Core","UWA/Class","DS/WebComponentModeler/CATWebInterface","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return n.singleton({interfaceName:"CATI3DExpConditionalVariant",required:e.merge({getEffectivityXMLExpression:function(){},setStatus:function(){}},a.required),optional:e.merge({},a.optional)})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariant",["UWA/Core","UWA/Class","UWA/Class/Listener","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return e.Class.extend(n,{Build:function(){const e=this.GetObject()._experienceBase.getManager("CAT3DExpVariantManager");let t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("current");this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"current.CHANGED",(n=>{if(t!==n){t=n,e.computeState(this);const a=this.GetObject()._experienceBase.getManager("CAT3DExperienceESExportManager");if(null!=a){const e=a.getProjectedESObject(this.GetObject());null!=e&&e.doDispatchEvent("ValueModified",e.getCurrentValue())}}}))},Dispose:function(){this.stopListening()},listVariantValues:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("values")},getType:function(){return this.GetObject().IsKindOf("ConditionalVariant_Spec")?a.VariantType.Conditional:this.GetObject().IsKindOf("OptionGroupVariant_Spec")?a.VariantType.OptionGroup:this.GetObject().IsKindOf("EnoviaDictionaryVariant2_Spec")?a.VariantType.EnoviaDictionary:this.GetObject().IsKindOf("MaterialVariant2_Spec")?a.VariantType.Material:this.GetObject().IsKindOf("PackageVariant2_Spec")?a.VariantType.Package:this.GetObject().IsKindOf("VisibilityVariant2_Spec")?a.VariantType.Visibility:a.VariantType.Undefined},getCurrent:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("current")},listTargets:function(){return this.QueryInterface("CATI3DExperienceObject").HasVariable("targets")?this.QueryInterface("CATI3DExperienceObject").GetValueByName("targets"):[]},getVariantValue:function(e){let t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("values");for(let n=0;n<t.length;n++)if(t[n].QueryInterface("CATI3DExperienceObject").GetValueByName("_varName")===e)return t[n]},getVariantValueFromPathOfIds:function(e){let t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("values");for(let n=0;n<t.length;n++)if(t[n].QueryInterface("CATI3DExperienceObject").GetPathOfIds().isEqual(e))return t[n]},setCurrent:function(e,t=!0){let n=this.QueryInterface("CATI3DExperienceObject").GetValueByName("current");if(n!==e)return!n||!t&&e||n.QueryInterface("CATI3DExpVariantValue").deactivate(),e&&e.QueryInterface("CATI3DExpVariantValue").activate(),this.QueryInterface("CATI3DExperienceObject").SetValueByName("current",e)},getVariantsMgr:function(){return this.QueryInterface("CATI3DExperienceObject").GetParent()}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpConditionalVariant",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariant"],(function(e,t,n){"use strict";return n.extend({listTargets:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("true").map((e=>e.QueryInterface("CATI3DExpVariantValue").getVariant()))},getEffectivityXMLExpression:function(){let e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("expression");if(1===e.length)return e[0]},setStatus:function(e){let t;t=e?this.QueryInterface("CATI3DExperienceObject").GetValueByName("true"):this.QueryInterface("CATI3DExperienceObject").GetValueByName("false");for(let e=0;e<t.length;e++){t[e].QueryInterface("CATI3DExpVariantValue").getVariant().QueryInterface("CATI3DExpVariant").setCurrent(t[e])}}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpEnoviaDictionaryVariant",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariant"],(function(e,t,n){"use strict";return n.extend({})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpMaterialVariant",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariant"],(function(e,t,n){"use strict";return n.extend({setCurrent:function(e,t=!1){this._parent(e,t)}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpOptionGroupVariant",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariant"],(function(e,t,n){"use strict";return n.extend({Build:function(){this._savedCurrents=[];const e=this.GetObject()._experienceBase.getManager("CAT3DExpVariantManager");this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"currents.CHANGED",(()=>{e.computeState(this)}))},Dispose:function(){delete this._savedCurrents},getCurrent:function(){},setCurrent:function(e){this.addCurrent(e)},setCurrents:function(e){const t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("currents");t.forEach((t=>{-1===e.indexOf(t)&&this.removeCurrent(t)})),e.forEach((n=>{-1===t.indexOf(n)&&this.addCurrent(e)}))},getCurrents:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("currents")},addCurrent:function(e){const t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("currents");t.indexOf(e)>=0||(t.push(e),e.QueryInterface("CATI3DExpVariantValue").activate(),this.QueryInterface("CATI3DExperienceObject").SetValueByName("currents",t))},removeCurrent:function(e){const t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("currents"),n=t.indexOf(e);-1!==n?(t.splice(n,1),e.QueryInterface("CATI3DExpVariantValue").deactivate(),this.QueryInterface("CATI3DExperienceObject").SetValueByName("currents",t)):console.log("CATE3DExpOptionGroupVariant.removeCurrent Failed, VariantValue is not in currents variable")},saveCurrents:function(){this._savedCurrents=this.getCurrents().slice()},getSavedCurrents:function(){return this._savedCurrents}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpPackageVariant",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariant"],(function(e,t,n){"use strict";return n.extend({listTargets:function(){let e=[],t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("values"),n=[];for(let e=0;e<t.length;e++){let a=t[e].QueryInterface("CATI3DExpPackageValue");if(!a)continue;let r=a.getEffects();n=n.concat(r.map((e=>e.QueryInterface("CATI3DExperienceObject").GetParent())))}for(let t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpVisibilityVariant",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariant"],(function(e,t,n){"use strict";return n.extend({})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariantValue",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n){"use strict";return e.Class.extend({getType:function(){return this.GetObject().IsKindOf("EnoviaDictionaryValue_Spec")?n.VariantType.EnoviaDictionary:this.GetObject().IsKindOf("MaterialValue_Spec")?n.VariantType.Material:this.GetObject().IsKindOf("PackageValue_Spec")?n.VariantType.Package:this.GetObject().IsKindOf("VisibilityValue_Spec")?n.VariantType.Visibility:n.VariantType.Undefined},getVariant:function(){return this.QueryInterface("CATI3DExperienceObject").GetParent()},activate:function(){},deactivate:function(){}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpEnoviaDictionaryValue",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariantValue"],(function(e,t,n){"use strict";return n.extend({})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpMaterialValue",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariantValue"],(function(e,t,n){"use strict";return n.extend({getValueMaterial:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("effect")},activate:function(){const e=this.getValueMaterial(),t=this.getVariant().QueryInterface("CATI3DExpVariant").listTargets();if(e)for(let e=0;e<t.length;e++)this._delegateToTarget(t[e]);else for(let e=0;e<t.length;e++)this._removeDelegationToTarget(t[e])},deactivate:function(){const e=this.getVariant().QueryInterface("CATI3DExpVariant").listTargets();for(let t=0;t<e.length;t++)this._removeDelegationToTarget(e[t])},_delegateToTarget:function(e){const t=this.getValueMaterial();if(!t)return;const n=e.QueryInterface("CATI3DExperienceDelegate");n&&n.setDelegate(t)},_removeDelegationToTarget:function(e){const t=e.QueryInterface("CATI3DExperienceDelegate");t&&t.setDelegate(null)}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpPackageValue",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariantValue"],(function(e,t,n){"use strict";return n.extend({getEffects:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("effects")},activate:function(){this.getEffects().map((e=>{let t=e.QueryInterface("CATI3DExpVariantValue");t&&t.getVariant().QueryInterface("CATI3DExpVariant").setCurrent(e)}))}})})),define("DS/CAT3DExpVariantWeb/extensions/CATE3DExpVisibilityValue",["UWA/Core","UWA/Class","DS/CAT3DExpVariantWeb/extensions/CATE3DExpVariantValue","DS/CAT3DExpVariantWeb/interfaces/CATI3DExpVariant"],(function(e,t,n,a){"use strict";return n.extend({getVisibleTargets:function(){return this._getTargets(a.VisibilityEffect.visible)},getInvisibleTargets:function(){return this._getTargets(a.VisibilityEffect.invisible)},_getTargets:function(e){let t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("effects"),n=this.getVariant().QueryInterface("CATI3DExpVariant").listTargets(),a=[];if(t.length!==n.length)return console.error("CATE3DExpVisibilityValue._getTargets : Effects and targets should have the same size"),a;for(let r=0;r<n.length;r++)t[r]===e&&a.push(n[r]);return a},activate:function(){this.getVisibleTargets().map((e=>{e.QueryInterface("CATI3DExperienceObject").SetValueByName("visible",!0)})),this.getInvisibleTargets().map((e=>{e.QueryInterface("CATI3DExperienceObject").SetValueByName("visible",!1)}))},deactivate:function(){this.getInvisibleTargets().map((e=>{e.QueryInterface("CATI3DExperienceObject").SetValueByName("visible",!0)}))}})}));