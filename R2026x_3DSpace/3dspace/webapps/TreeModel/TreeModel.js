define("DS/TreeModel/typings/types",[],(()=>{}));var __spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};define("DS/TreeModel/ModelUtils",["require","exports"],(function(e,t){"use strict";var n=[];function o(e){for(var t=0;t<n.length;t++)if(n[t].treeDocument===e)return t;return-1}return function(){function e(){}return e.bindEventOnDocument=function(e,t,n,o){e&&t&&(e._listeners||(e._listeners=[]),e._listeners.push(t.subscribe({event:n},o)))},e.cleanBindingOnDocument=function(e,t){e&&e._listeners&&t&&(e._listeners.forEach((function(e){t.unsubscribe(e)})),e._listeners=[])},e.sortNodesByRowID=function(e){e&&e.sort((function(e,t){return e._getRowID()-t._getRowID()}))},e.moveNodes=function(e,t,n){n||(n={}),void 0===n.direction&&(n.direction=1),n.isSortedArray||this.sortNodesByRowID(e);for(var o=t.getParent(),i=e.length-1;i>=0;i--)e[i].__keepSelection=!0,e[i].remove();if(0===n.direction){var r=t.getChildren()?t.getChildren().length:0;return t.addChild(e),0===r&&t.expand(),t}var s=t._getLocalID();for(i=e.length-1;i>=0;i--){var a=s+(n.direction>0?1:0);o.addChild(e[i],a),delete e[i].__keepSelection}return o},e.getHierarchySet=function(e){for(var t=new Set,n=0;n<e.length;n++)for(var o=e[n];o&&!o._isTrueRoot();){var i=t.size;if(t.add(o),i===t.size)break;o=o.getParent()}return t},e.saveTreeDocumentOrder=function(e){if(e){var t=function(e){var t=[],n=e._getTrueRoot(),o=e.getRoots();return o&&o.length>0&&t.push({node:n,children:__spreadArray([],o,!0)}),e.processDescendants({processNode:function(e){var n=e.nodeModel,o=n.getChildren();o&&o.length>0&&t.push({node:n,children:__spreadArray([],o,!0)})}}),t}(e),i=o(e);i>=0?n[i].snapshot=t:n.push({treeDocument:e,snapshot:t})}},e.destroyTreeDocumentOrderSnapshot=function(e){if(e){var t=o(e);t>=0&&n.splice(t,1)}},e.getTreeDocumentSnapShot=function(e){if(e)for(var t=0;t<n.length;t++)if(n[t].treeDocument===e)return n[t].snapshot;return null},e.restoreTreeDocumentOrder=function(e){if(e){var t=o(e);if(t>=0){var i=n[t].snapshot;i.length>0&&(e._requireRowsIndexing(),e.prepareUpdate(),e.executeWithoutEvents((function(){var t=e.getUseChangeTransactionMode();e.setUseChangeTransactionMode(!1);for(var n=0;n<i.length;n++){var o=i[n],r=o.children,s=o.node.getChildren();if(o.node&&(o.node.getTreeDocument()===e||1!==o.node.getNodeSource())&&r)for(var a=0;a<r.length;a++)s&&s[a]===r[a]||r[a].getTreeDocument()!==e||o.node.addChild(r[a],a,{treeDocument:e})}e.setUseChangeTransactionMode(t)})),e.pushUpdate())}}},e.getNodesToPreselectOrSelect=function(e,t,n){for(var o,i=[],r=function(r){var s=t[r];if(!s)return"continue";e.options.shouldBeSelected.call(e,s)&&i.push(s);var a=e.options.shouldSelectParents.call(e,s);if(a&&(o||(o=new Map,n&&n.forEach((function(e){return o.set(e._getID(),e)}))),i.length&&o.set(s._getID(),s)),e.options.shouldSelectDescendants.call(e,s)&&s.processDescendants({processNode:function(t){var n=t.nodeModel;if(n.isHidden()||n.isFiltered())return{shouldProcessDescendants:!1};e.options.shouldBeSelected.call(e,n)&&(i.push(n),o&&o.set(n._getID(),n))}}),a)for(var l=s.getParents(),d=void 0,p=new Map,u=function(t,n){var r=!0,s=(d=l[t])._getID();return e.options.shouldBeSelected.call(e,d)?(d.processDescendants({processNode:function(t){var n=t.nodeModel;return p.get(n._getID())||n.isHidden()||n.isFiltered()?{shouldProcessDescendants:!1}:e.options.shouldBeSelected.call(e,n)&&!o.get(n._getID())?(r=!1,{stopProcessing:!0}):void 0}}),r?(i.push(d),o.set(s,d),p.set(s,d),e.options.shouldSelectParents.call(e,d)?void 0:"break"):"break"):"continue"},h=0,c=l.length;h<c;++h){if("break"===u(h))break}},s=0;s<t.length;s++)r(s);return i},e.getTreeDocumentDepth=function(e){var t=0;return e.processDescendants({onlyVisibleNodes:!0,processNode:function(e){e&&e.nodeModel&&(t=Math.max(e.nodeModel.getNodeDepth(),t))}}),t},e}()}));var __extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/DataSourceBase",["require","exports","DS/Core/BaseComponent","DS/CoreEvents/ModelEvents","DS/Core/WebUXComponents","./typings/types"],(function(e,t,n,o,i){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{numberOfRowsPerRequest:{defaultValue:100,type:"integer"},rowsOffsetToTriggerRequest:{defaultValue:20,type:"integer"}}},enumerable:!1,configurable:!0}),t.prototype._preBuild=function(e){this._modelEvents=new o},t.prototype.getModelItems=function(e){},t.prototype.hasModelStructureRequest=function(){return!1},t.prototype.getModelStructure=function(e){},t.prototype.getGroupedModelItems=function(e){},t.prototype.getCurrentFindResult=function(e){},t.prototype.pushUpdatesNotifications=function(e,t){this._modelEvents.publish({event:"pushUpdatesNotifications",data:{dataToUpdateArray:e,callback:t}})},t.prototype.convertPushUpdatesNotificationsWithContext=function(e,t){return e},t.prototype.setFilterModel=function(e){this._modelEvents.publish({event:"filterModelChange",data:{filterModel:e}})},t.prototype.reapplyFilterModel=function(){this._modelEvents.publish({event:"reapplyFilterModel",data:{}})},t.prototype.getFilterManager=function(){return this._getRowModelFilterManager&&"function"==typeof this._getRowModelFilterManager?this._getRowModelFilterManager():void 0},t.prototype.onNodeModelUpdate=function(e,t,n){},t}(n);return i.addClass(r,"DataSourceBase"),r})),define("DS/TreeModel/DataModelSet",["require","exports","DS/CoreEvents/ModelEvents","UWA/Core"],(function(e,t,n,o){"use strict";var i=-1,r=function(){function e(e){this._id=i++,this._setData(e),this._modelEvents=new n({target:this})}return e.prototype._getData=function(e){return this._data},e.prototype._setData=function(e){this._data=e},e.prototype._getID=function(){return this._id},e.prototype._getDataModelSet=function(){return this._dataModelSet},e.prototype._getModelEvents=function(){return this._modelEvents},e.prototype._setDataModelSet=function(e){this._dataModelSet=e},e.prototype._getInfos=function(){return{}},e.prototype.update=function(e){void 0!==e&&o.extend(this._data,e,!0),this._modelEvents.publish({event:"DataModel:update",data:e,context:this})},e}();return function(){function e(){this._listOfDataModels={}}return e.prototype.getDataModel=function(e){return this._listOfDataModels[e]},e.prototype.createDataModel=function(e){var t=new r(e);return t._setDataModelSet(this),this._listOfDataModels[t._getID()]=t,t},e}()}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/BaseFilter",["require","exports","UWA/Core","DS/Core/BaseComponent","DS/Core/WebUXComponents","DS/CoreBase/WebUXGlobalEnums"],(function(e,t,n,o,i,r){"use strict";var s=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(this,t)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{filterManager:{defaultValue:null,type:"object",readOnly:!0},filterId:{defaultValue:"",type:"string",readOnly:!0},propertyId:{defaultValue:"",type:"string",readOnly:!0},filterModel:{defaultValue:void 0,type:"object"},defaultFilterModel:{defaultValue:null,type:"object",noNeedToApplyFlag:!0},filterOptions:{defaultValue:void 0,type:"object"}}},enumerable:!1,configurable:!0}),t.prototype.getFilterByValuesId=function(){return"set"},t.prototype.getFilterByConditionId=function(){return this.filterId},t.prototype.isDataFiltered=function(e){return!1},t.prototype.isEmpty=function(e,t){return!1},t.prototype.reset=function(){this.filterModel=this.defaultFilterModel},t.prototype.canBeReset=function(){return!this.filterModelsAreEqual(this.filterModel,this.defaultFilterModel)},t.prototype.filterModelsAreEqual=function(e,t){return!(e&&!n.equals(e,{})&&!n.equals(e,[])||t&&!n.equals(t,{})&&!n.equals(t,[]))||n.equals(e,t)},t.prototype._build=function(){this._listOfFilteredData=[]},t.prototype.destroy=function(){this._listOfFilteredData.forEach((function(e){e.decrementFilteredCount()})),this._listOfFilteredData=[],e.prototype.destroy.call(this)},t.prototype._resetFilterCpt=function(){this._listOfFilteredData.forEach((function(e){e.decrementFilteredCount()})),this._listOfFilteredData=[]},t.prototype._applyFilterModel=function(e){var t=this.filterManager;if(t){var n=t.model;if(n&&n.prepareUpdate&&n.prepareUpdate(),this._resetFilterCpt(),!this.filterModel)return t.publish("filterModelChange",{propertyId:this.propertyId,filter:this}),t.filterModel[this.propertyId]&&delete t.filterModel[this.propertyId].filterModel,void(n&&n.pushUpdate&&n.pushUpdate({updateType:r.WUXModelUpdateTypes.Filtering}));t.filterModel[this.propertyId].filterModel=this.filterModel;var o=this;if(n&&n.processDescendants){this.filterOptions&&this.filterOptions.keepChildren&&n.processDescendants({treeTraversalOrder:"preOrder",processNode:function(e){if(!e.nodeModel.canBeFiltered(o.propertyId)||!o.isDataFiltered(e.nodeModel))return o._keepNodeAndChildren(e.nodeModel),{shouldProcessDescendants:!1}}});var i=this.isEmpty();n.processDescendants({treeTraversalOrder:"postOrder",processNode:function(e){var t=!0;if(!0===e.nodeModel._preventFiltering)return delete e.nodeModel._preventFiltering,void delete e.nodeModel._keepNode;(e.nodeModel._keepNode&&(delete e.nodeModel._keepNode,t=!1),t&&e.nodeModel.canBeFiltered(o.propertyId)&&o.isDataFiltered(e.nodeModel))?(e.nodeModel.incrementFilteredCount(),o._listOfFilteredData.push(e.nodeModel)):e.nodeModel.isFiltered()||e.nodeModel.getParents().forEach((function(e){e._preventFiltering=!0,o.filterOptions&&o.filterOptions.ensureVisible&&!i&&!e.isExpanded()&&e.expand()}))}})}t.publish("filterModelChange",{propertyId:this.propertyId,filter:this}),n&&n.pushUpdate&&n.pushUpdate({updateType:r.WUXModelUpdateTypes.Filtering})}},t.prototype._applyFilterOptions=function(e){},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("filterModel")&&this._applyFilterModel(t.filterModel)},t.prototype._keepNodeAndChildren=function(e){if(e){e._keepNode=!0;var t=e.getChildren();if(t){var n=this;t.forEach((function(e){n._keepNodeAndChildren(e)}))}}},t.prototype.getListOfFilteredData=function(){return this._listOfFilteredData},t.prototype.getAttributeValueForFiltering=function(e,t){if(e)return e.options&&e.options.getAttributeValueForFiltering?e.options.getAttributeValueForFiltering.call(e,t):e.getAttributeValue(t)},t}(o);return i.addClass(s,"filter"),s}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/ConditionAndSetBaseFilter",["require","exports","DS/TreeModel/BaseFilter","DS/Core/WebUXComponents"],(function(e,t,n,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isDataFiltered=function(e){if(!this.filterModel)return!1;var t=this._getOrCreateCurrentFilter();return!!t&&t.isDataFiltered(e)},t.prototype.isEmpty=function(e,t){var n=void 0!==e?e:this.filterModel;if(!n)return!0;var o=void 0!==t?t:this.filterManager?this.filterManager.model:null,i=this._getOrCreateCurrentFilter(n);return!i||i.isEmpty(e,o)},t.prototype._createFilter=function(e){var t=null,n=this.filterManager;if(n&&e){var o=n.getFilterClassName(e);o&&(t=new o({filterManager:null,propertyId:this.propertyId,filterModel:this.filterModel,filterId:e,filterOptions:this.filterOptions}))}return t},t.prototype._getOrCreateFilterWithArray=function(){return this._filterWithArray||(this._filterWithArray=this._createFilter(this.getFilterByValuesId())),this._filterWithArray},t.prototype._getOrCreateFilterWithCondition=function(){return this._filterWithCondition&&this._filterWithCondition.filterId===this.getFilterByConditionId()||(this._filterWithCondition=this._createFilter(this.getFilterByConditionId())),this._filterWithCondition},t.prototype._getOrCreateCurrentFilter=function(e){var t=void 0!==e?e:this.filterModel;return Array.isArray(t)?this._getOrCreateFilterWithArray():this._getOrCreateFilterWithCondition()},t.prototype._getCurrentFilter=function(){return Array.isArray(this.filterModel)?this._filterWithArray:this._filterWithCondition},t.prototype._applyFilterModel=function(t){var n=this._getCurrentFilter();n&&(n.filterModel=this.filterModel),e.prototype._applyFilterModel.call(this,t)},t.prototype._applyFilterOptions=function(t){var n=this._getCurrentFilter();n&&(n.filterOptions=this.filterOptions),e.prototype._applyFilterOptions.call(this,t)},t}(n);return o.addClass(i,"conditionandsetfilter"),i}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/ConditionBaseFilter",["require","exports","DS/TreeModel/BaseFilter","DS/Core/WebUXComponents"],(function(e,t,n,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isDataFiltered=function(e){var t=this.getAttributeValueForFiltering(e,this.propertyId),n=this.filterModel;if(!n||!n.condition1)return!1;for(var o=Object.keys(n).length-(void 0!==n.operator?1:0),i=1;i<=o;i++){var r=n["condition"+i],s=this.isConditionMatched(r,t);if(!n.operator)return!s;if("and"===n.operator&&!s)return!0;if("or"===n.operator&&s)return!1}return n.operator&&"or"===n.operator},t.prototype.isEmpty=function(e,t){var n=void 0!==e?e:this.filterModel;return!n||!n.condition1||this.isConditionEmpty(n.condition1)},t.prototype.isConditionEmpty=function(e){return!0},t.prototype.isConditionMatched=function(e,t){return!1},t}(n);return o.addClass(i,"conditionbasefilter"),i}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/SetFilter",["require","exports","DS/TreeModel/BaseFilter","UWA/Core","DS/Core/WebUXComponents"],(function(e,t,n,o,i){"use strict";var r=function(e,t){var n=this;if(Array.isArray(t))return!t.some((function(t){return e.some((function(e){return n._areEquals(e,t)}))}));for(var o=0;o<e.length;o++)if(this._areEquals(e[o],t))return!1;return!0},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isDataFiltered=function(e){if(!this.filterModel)return!1;var t=this.getAttributeValueForFiltering(e,this.propertyId);return 0!==this.filterModel.length&&r.call(this,this.filterModel,t)},t.prototype.isEmpty=function(e,t){var n=void 0!==t?t:this.filterManager?this.filterManager.model:null;if(!n||!n.search)return!0;var o=void 0!==e?e:this.filterModel;if(!o||0===o.length)return!0;var i=!1,s=this;return n.search({shouldStop:function(){return i},match:function(e){var t=s.getAttributeValueForFiltering(e.nodeModel,s.propertyId);r.call(s,o,t)&&(i=!0)},useTransaction:!1}),!i},t.prototype._areEquals=function(e,t){return o.equals(e,t)},t}(n);return i.addClass(s,"setfilter"),s}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/StringRegExpFilter",["require","exports","DS/TreeModel/ConditionBaseFilter","DS/Utilities/StringUtils","DS/Core/WebUXComponents"],(function(e,t,n,o,i){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isConditionEmpty=function(e){return!e||"empty"!==e.type&&"notEmpty"!==e.type&&(void 0===e.filter||null===e.filter||""===e.filter)},t.prototype.isConditionMatched=function(e,t){if(!e||""===e.filter)return!0;if("empty"===e.type)return""===t||null==t;if("notEmpty"===e.type)return!(""===t||null==t);var n=void 0,i=e.filter;try{switch(e.type){case"contains":case"notContain":n=new RegExp(o.toComparable(i,{toLowerCase:!1}),"i");break;case"equal":case"notEqual":n=new RegExp("^("+o.toComparable(i,{toLowerCase:!1})+")$","i");break;case"startsWith":n=new RegExp("^("+o.toComparable(i,{toLowerCase:!1})+")","i");break;case"endsWith":n=new RegExp("("+o.toComparable(i,{toLowerCase:!1})+")$","i")}}catch(e){return!1}if(!n)return!0;var r=o.toComparable(t,{toLowerCase:!1});void 0===r&&(r="");var s=n.test(r);return"notEqual"!==e.type&&"notContain"!==e.type||(s=!s),s},t}(n);return i.addClass(r,"stringregexpfilter"),r})),define("DS/TreeModel/TreeNodeModel",["UWA/Core","DS/CoreEvents/ModelEvents","DS/Utilities/Debug","DS/Utilities/Utils","DS/Utilities/Array","DS/Utilities/Data","DS/Utilities/TreeUtils","DS/TreeModel/ModelUtils","DS/CoreBase/WebUXGlobalEnums"],(function(e,t,n,o,i,r,s,a){"use strict";var l=-1;const d={noChildren:"noExpandState",noChildrenCollapsed:"noExpandStateExpand",noChildrenExpanded:"noExpandStateCollapse",expanding:"expandingState",partiallyExpanded:"partiallyExpandedState",expanded:"collapseState",collapsed:"expandState"},p={noExpandState:"noChildren",noExpandStateExpand:"noChildrenCollapsed",noExpandStateCollapse:"noChildrenExpanded",expandingState:"expanding",partiallyExpandedState:"partiallyExpanded",collapseState:"expanded",expandState:"collapsed"};function u(n){var o=this;this.defaultOptions={label:void 0,badges:{topLeft:null,topRight:null,bottomLeft:null,bottomRight:null},icons:[],grid:{},children:null,data:{},useAsyncPreExpand:void 0,getAttributeValueForFiltering:function(e){return o.getAttributeValue(e)}},this._options=e.extend(e.clone(this.defaultOptions),n);o=this;if(Object.defineProperty(this,"options",{get:function(){if(o._isUsingDataModel()){var t={getAttributeValueForFiltering:function(e){return o.getAttributeValue(e)}};return o._getDataModel()._data=e.extend(t,o._getDataModel()._data),o._getDataModel()._data}return o._options},set:function(e){o._isUsingDataModel()?o._getDataModel()._setData(e):o._options=e}}),o._listOfChildren=null,Object.defineProperty(this,"__children",{get:function(){return o._isUsingDataModel()?o._listOfChildren:o.options.children},set:function(e){o._isUsingDataModel()?o._listOfChildren=e:o.options.children=e}}),this._modelEvents=new t({target:this}),this._id=l++,this._nodeIsAsync=!1,this._isHighlighted=!1,this._isHidden=!1,this.__expandAllCounter=0,this._nodeDepth=-1,this._rowID=null,this._parentNode=null,this._expandState="noExpandState",this.__dataModelID=null,this.options.children){this._preventResetChildren=0===this.options.children.length,this._expandState="expandState";var i=this.options.children;this.__children=[],this.options.children=[],this.addChild(i)}this._setChangeStates(WUXModelChangeStates.Unchanged),this.options._isTrueRoot&&(u.prototype.addRoot=function(e,t){return this.addChild(e,t)});o=this;this._modelEvents.subscribe({event:"DataModel:update"},(function(e){e.stopPropagation(),o.withTransactionUpdate((function(){o.notifyModelUpdate(e.data.grid)}))}))}function h(e){u.call(this,e)}u.prototype._setDataModel=function(e){this.__dataModelSet=e._getDataModelSet(),this.__dataModelID=e._getID(),e._getModelEvents()._addParent(this.getModelEvents()),this.notifyModelUpdate()},u.prototype._removeDataModel=function(e){void 0!==this.__dataModelID&&this.__dataModelSet&&(e._getModelEvents()._unsetParent(this.getModelEvents()),this.__dataModelID=null,this.__dataModelSet=null),this.notifyModelUpdate()},u.prototype._getDataModel=function(){return this.__dataModelSet.getDataModel(this.__dataModelID)},u.prototype._isUsingDataModel=function(){return null!==this.__dataModelID&&void 0!==this.__dataModelID},u.prototype.getModelEvents=function(){return this._modelEvents},u.prototype.addEventListener=function(e,t){return this.getModelEvents().addEventListener(e,t)},u.prototype.removeEventListener=function(e){this.getModelEvents().unsubscribe(e)},u.prototype._getRowID=function(e){return this.getRowID(e)},u.prototype.getRowID=function(e){return(e||null===this._rowID)&&(this._rowID=this._computeRowID()),this._rowID},u.prototype._getID=function(){return this._id},u.prototype.addChild=function(e,t,o){var i,r="[TreeNodeModel] -- Add child --";if(n.beginMeasure(r),Array.isArray(e))i=this._loadModel(e,this,t,o);else{if(e instanceof u){if(e.isAscendantOf(this))return void console.warn("TreeNodeModel: Cannot add a parent node as a child");var s=e.getParent();s&&s.removeChild(e,!0,o)}i=this._loadModel([e],this,t,o)}return n.endMeasure(r),i},u.prototype.moveChild=function(e,t,n){e.__keepSelection=!0,this.addChild(e,t,n),delete e.__keepSelection},u.prototype.notifyModelUpdate=function(e,t){var n=this._getNodeInfos();e&&(n.attributes=e),t&&(n.previousAttributes=t),this._modelEvents.publish({event:"nodeModelUpdate",data:n,context:this})},u.prototype.setAttribute=function(e,t){if(!this.options.grid.hasOwnProperty(e)||Array.isArray(t)&&this.options.grid[e]!==t||0!==o.compare(this.options.grid[e],t)){let s=this.options.grid[e];if((!this._referenceValues||!this._referenceValues.hasOwnProperty(e))&&this.options.grid.hasOwnProperty(e)&&0!==o.compare(s,t)){var n=this.getTreeDocument();!this._changeTransactionModeDisabled&&n&&n.getUseChangeTransactionMode()&&(this.setReferenceValue(e,s),this._setChangeStates(WUXModelChangeStates.AttributesChanged,"add"))}this.options.grid[e]=t;var i=this._getNodeInfos();i.changedAttribute=e,i.changedAttributeValue=t,this._modelEvents.publish({event:"attributeChanged",data:i,context:this});var r={};r[e]=t;let a={};a[e]=s,this.notifyModelUpdate(r,a)}},u.prototype.removeAttribute=function(e){if(this.options.grid.hasOwnProperty(e)){delete this.options.grid[e];var t=this._getNodeInfos();t.changedAttribute=e,this._modelEvents.publish({event:"attributeChanged",data:t,context:this});var n={};n[e]=void 0,this.notifyModelUpdate(n)}},u.prototype.updateOptions=function(e){var t={};let n={};if(e&&e.grid){var i=this.getTreeDocument();for(var r in e.grid)this.options.grid[r]!==e.grid[r]&&(n[r]=this.options.grid[r],t[r]=e.grid[r],this._referenceValues&&this._referenceValues.hasOwnProperty(r)||!this.options.grid.hasOwnProperty(r)||this._changeTransactionModeDisabled||!i||!i.getUseChangeTransactionMode()||(this.setReferenceValue(r,this.options.grid[r]),this._setChangeStates(WUXModelChangeStates.AttributesChanged,"add")))}if(e&&e.hasOwnProperty("label")&&(n.label=this.options.label,t.label=e.label,!this._referenceLabel&&this.getLabel()!==e.label)){i=this.getTreeDocument();!this._changeTransactionModeDisabled&&i&&i.getUseChangeTransactionMode()&&(this.setReferenceLabel(this.getLabel()),this._setChangeStates(WUXModelChangeStates.AttributesChanged,"add"))}this._isUsingDataModel()?this._getDataModel().update(e):("object"==typeof e&&null!==e&&o.extendObjectInstanceWithNewInside(this.options,e,!0),this.withTransactionUpdate((function(){this.notifyModelUpdate(t,n)})))},u.prototype.onAttributeChange=function(e){return this._modelEvents.subscribe({event:"attributeChanged"},e)},u.prototype.getReferenceValue=function(e){return this._referenceValues&&this._referenceValues.hasOwnProperty(e)?this._referenceValues[e]:this.options.grid[e]},u.prototype.hasReferenceValue=function(e){return this._referenceValues&&this._referenceValues.hasOwnProperty(e)},u.prototype.getReferenceValues=function(){return this._referenceValues},u.prototype.setReferenceValue=function(t,n){this._referenceValues||(this._referenceValues={}),this._referenceValues[t]=e.clone(n,!1),0!==o.compare(this.options.grid[t],n)&&this._setChangeStates(WUXModelChangeStates.AttributesChanged,"add")},u.prototype.getReferenceLabel=function(){return this._referenceLabel?this._referenceLabel:this.getLabel()},u.prototype.setReferenceLabel=function(e){this._referenceLabel=e,0!==o.compare(this.getLabel(),e)&&this._setChangeStates(WUXModelChangeStates.AttributesChanged,"add")},u.prototype.resetToReferenceValues=function(){var t=this._changeTransactionModeDisabled;if(this._changeTransactionModeDisabled=!0,this._setChangeStates(WUXModelChangeStates.AttributesChanged,"remove"),this._referenceValues){var n=this,i={};Object.keys(this._referenceValues).forEach((function(t){n.options.grid.hasOwnProperty(t)&&0!==o.compare(n.options.grid[t],n._referenceValues[t])&&(i[t]=e.clone(n._referenceValues[t],!1))})),this._referenceValues=null,this.updateOptions({grid:i})}this._referenceLabel&&(this.setLabel(this._referenceLabel),this._referenceLabel=null),this._changeTransactionModeDisabled=t},u.prototype.setValuesAsReference=function(){this._setChangeStates(WUXModelChangeStates.AttributesChanged,"remove"),(this._referenceValues||this._referenceLabel)&&(this._referenceValues=null,this._referenceLabel=null,this.notifyModelUpdate())},u.prototype.getChangeStates=function(){return this._changeStates},u.prototype._setChangeStates=function(e,t){var n=this._changeStates;"add"===t?this._changeStates|=e:"remove"===t?this._changeStates&=~e:this._changeStates=e;var o=this.getTreeDocument();o&&(n===WUXModelChangeStates.Unchanged&&this._changeStates!==WUXModelChangeStates.Unchanged?o._managePendingChanges("add"):n!==WUXModelChangeStates.Unchanged&&this._changeStates===WUXModelChangeStates.Unchanged&&o._managePendingChanges("remove"))},u.prototype.cancelChanges=function(e){if(e){var t=this.getChildren();if(t)for(var n=t.length;n>=0;n--){var o=t[n];o&&o.cancelChanges(!0)}}if(this._changeStates&WUXModelChangeStates.NodeAdded){var i=this.getParent();i&&i.removeChild(this,!0)}else this._changeStates&WUXModelChangeStates.AttributesChanged&&this.resetToReferenceValues(),this._changeStates&WUXModelChangeStates.NodeToBeRemoved&&(this._setChangeStates(WUXModelChangeStates.NodeToBeRemoved,"remove"),this.notifyModelUpdate());this._setChangeStates(WUXModelChangeStates.Unchanged)},u.prototype.acceptChanges=function(e){var t=0;if(e){var n=this.getChildren();if(n)for(var o=n.length;o>=0;o--){var i=n[o];if(i)t|=i.acceptChanges(!0)}}if(this._changeStates&WUXModelChangeStates.NodeToBeRemoved){var r=this.getParent();r&&r.removeChild(this,!0),t|=WUXModelUpdateTypes.Removal}else this._changeStates&WUXModelChangeStates.AttributesChanged&&(this.setValuesAsReference(),t|=WUXModelUpdateTypes.AttributesChange),this._changeStates&WUXModelChangeStates.NodeAdded&&(this._changeStates&=~WUXModelChangeStates.NodeAdded,this.notifyModelUpdate(),t|=WUXModelUpdateTypes.Addition);return this._setChangeStates(WUXModelChangeStates.Unchanged),{updateType:t}},u.prototype.prepareUpdate=function(){this._modelEvents.publish({event:"prepareUpdate",data:this._getNodeInfos(),context:this})},u.prototype.pushUpdate=function(e){this._modelEvents.publish({event:"pushUpdatePrivate",data:this._getNodeInfos(),context:this,options:e}),this._modelEvents.publish({event:"pushUpdate",data:this._getNodeInfos(),context:this,options:e})},u.prototype.insertBefore=function(e,t){if(this.prepareUpdate(),t){e.getParent()&&e.remove();var n=t._getLocalID();this.addChild(e,n)}else this.addChild(e);this.pushUpdate({updateType:WUXModelUpdateTypes.Addition})},u.prototype.insertAfter=function(e,t){if(this.prepareUpdate(),t){e.getParent()&&e.remove();var n=t._getLocalID();this.addChild(e,n+1)}else this.addChild(e);this.pushUpdate({updateType:WUXModelUpdateTypes.Addition})},u.prototype._setParent=function(e){this._parentNode=e,this._nodeDepth=e.getNodeDepth()+1},u.prototype._unsetParent=function(){this._parentNode=null,this._nodeDepth=-1},u.prototype.highlight=function(){this._isHighlighted=!0,this._modelEvents.publish({event:"highlight",data:this._getNodeInfos(),context:this})},u.prototype.unhighlight=function(){this._isHighlighted=!1,this._modelEvents.publish({event:"unhighlight",data:this._getNodeInfos(),context:this})},u.prototype.onHighlight=function(e){return this._modelEvents.subscribe({event:"highlight"},e)},u.prototype.onUnhighlight=function(e){return this._modelEvents.subscribe({event:"unhighlight"},e)},u.prototype.isHighlighted=function(){return this._isHighlighted},u.prototype.preSelect=function(e){var t=this.getTreeDocument();if(t){let n=t.getPXSO(),o=t.getXSO();if(this.isPreSelected()){if(n.get().length>1){let i;e||(i=[...o.get(),...n.get()]);let r=a.getNodesToPreselectOrSelect(t,[this],i);r.length&&(this.prepareUpdate(),e&&(1===r.length?n.unique(this):(n.empty(!0),n.add(r))),this._isPreSelected=!0,this.pushUpdate({updateType:WUXModelUpdateTypes.PreSelection}))}}else{let i;e||(i=[...o.get(),...n.get()]);let r=a.getNodesToPreselectOrSelect(t,[this],i);r.length&&(this.prepareUpdate(),e?1===r.length?n.unique(this):(n.empty(!0),n.add(r)):n.add(r),this._isPreSelected=!0,this.pushUpdate({updateType:WUXModelUpdateTypes.PreSelection}))}}else console.warn("You tried to pre-select a treeNode which is not attached to a tree document")},u.prototype.unPreSelect=function(){if(this.isPreSelected()){var e=this.getTreeDocument();if(e){this.prepareUpdate();let t=[this];e.options.shouldUnselectDescendants.call(e,this)&&this.processDescendants({processNode:function(n){let o=n.nodeModel;if(o.isHidden()||o.isFiltered())return{shouldProcessDescendants:!1};e.options.shouldBeSelected.call(e,n.nodeModel)&&t.push(n.nodeModel)}}),e.options.shouldSelectParents.call(e,this)&&i.optimizedForEach(this.getParents(),(function(n){e.getPXSO().isIn(n)&&t.push(n)})),e.getPXSO().remove(t),this._isPreSelected=!1,this.pushUpdate({updateType:WUXModelUpdateTypes.PreSelection})}else console.warn("You tried to pre-select a treeNode which is not attached to a tree document")}},u.prototype.isPreSelected=function(){var e=this.getTreeDocument();return e?e.getPXSO().isIn(this):this._isPreSelected},u.prototype.select=function(e){var t=this.getTreeDocument();if(t){let o=t.getXSO();if(this.isSelected({treeDocument:t})){let i=o.get();if(i.length>1){let o=a.getNodesToPreselectOrSelect(t,[this],e?null:i);if(o.length){if(this.prepareUpdate(),e){n=t.getXSO().get();1===o.length?t.getXSO().unique(this):(t.getXSO().empty(!0),t.getXSO().add(o)),n.forEach((function(e){e.selectionChangeIsNotFromUI()}))}this._isSelected=!0,this.selectionChangeIsNotFromUI(),this.pushUpdate({updateType:WUXModelUpdateTypes.Selection})}}}else{let i=a.getNodesToPreselectOrSelect(t,[this],e?null:o.get());if(i.length){if(this.prepareUpdate(),e){var n=o.get();1===i.length?t.getXSO().unique(this):(t.getXSO().empty(!0),t.getXSO().add(i)),n.forEach((function(e){e.selectionChangeIsNotFromUI()}))}else t.getXSO().add(i);this._isSelected=!0,this.selectionChangeIsNotFromUI(),this.pushUpdate({updateType:WUXModelUpdateTypes.Selection})}}}else console.warn("You tried to select a treeNode which is not attached to a tree document")},u.prototype.isSelectionChangeFromUI=function(){return Boolean(this.__selectionChangeisFromUI)},u.prototype.selectionChangeIsFromUI=function(){this.__selectionChangeisFromUI=!0},u.prototype.selectionChangeIsNotFromUI=function(){this.__selectionChangeisFromUI=!1},u.prototype.unselect=function(e){if(this.isSelected(e)){var t=e&&e.treeDocument?e.treeDocument:this.getTreeDocument();if(t){this.prepareUpdate();let e=[this];t.options.shouldUnselectDescendants.call(t,this)&&this.processDescendants({processNode:function(t){e.push(t.nodeModel)}}),t.options.shouldUnselectParents.call(t,this)&&(e=[...e,...this.getParents(!1)]),t.getXSO().remove(e),this._isSelected=!1,this.pushUpdate({updateType:WUXModelUpdateTypes.Selection})}else console.warn("You tried to select a treeNode which is not attached to a tree document")}},u.prototype.onSelect=function(e){return this._modelEvents.subscribe({event:"select"},e)},u.prototype.onUnselect=function(e){return this._modelEvents.subscribe({event:"unselect"},e)},u.prototype.onPreselect=function(e){return this._modelEvents.subscribe({event:"preselect"},e)},u.prototype.onUnpreselect=function(e){return this._modelEvents.subscribe({event:"unpreselect"},e)},u.prototype.isSelected=function(e){var t=e&&e.treeDocument?e.treeDocument:this.getTreeDocument();return t?t.getXSO().isIn(this):this._isSelected},u.prototype.hide=function(e){if(!0!==this._isHidden){this.prepareUpdate(),this._isHidden=!0,e||(this.unhighlight(),this.unselect()),this._rowID=null,this.processDescendants({treeDocument:this.getTreeDocument(),onlyVisibleNodes:!1,processNode:function(e){e&&e.nodeModel&&(e.nodeModel._rowID=null)}}),this._modelEvents.publish({event:"hide",data:this._getNodeInfos(),context:this});var t=this.getFirstVisibleParent();t&&t._updateExpanderState(),this.pushUpdate({updateType:WUXModelUpdateTypes.VisibilityChange})}},u.prototype.show=function(){this.prepareUpdate(),this._isHidden=!1,this._modelEvents.publish({event:"show",data:this._getNodeInfos(),context:this});var e=this.getFirstVisibleParent();e&&e._updateExpanderState(),this.pushUpdate({updateType:WUXModelUpdateTypes.VisibilityChange})},u.prototype.isHidden=function(){return this._isHidden},u.prototype.hideChildNodes=function(){this.withTransactionUpdate((function(){this.hasChildren()&&(this.getChildren().forEach((function(e){e.hide()})),this._updateExpanderState())}))},u.prototype.showChildNodes=function(){this.withTransactionUpdate((function(){this.hasChildren()&&(this.getChildren().forEach((function(e){e.show()})),this._updateExpanderState())}))},u.prototype._loadModel=function(t,n,o,i){this.prepareUpdate();for(var r,s=t.length,a=0;a<s;a++){var l,d=t[a];d instanceof u?l=d:(l={},(l=e.extend({label:void 0,icons:[],grid:{},badges:null,data:null,manager:null},d)).children=void 0,l.manager=void 0,delete l.expandedState),n&&(r=n._addChild(l,o,i)),d instanceof u||!d.children||(d.children.length>0?this._loadModel(d.children,r,void 0,i):(r.__children=[],r._expandState="expandState"),"expanded"!==d.expandedState&&"partiallyExpanded"!==d.expandedState||(r.expand(),r.setState({state:d.expandedState})))}return this.pushUpdate({updateType:WUXModelUpdateTypes.Addition}),r},u.prototype.isDestroyed=function(){return!this||null===this.options},u.prototype.destroy=function(){if(this.__isDestroying=!0,this.getParent()&&this.remove(),this.hasChildren()){[...this.getChildren()].forEach((function(e){e.destroy()}))}for(var e in this._modelEvents.unsubscribeAll(),this._modelEvents=null,delete this._modelEvents,this.defaultOptions=null,this)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=null);delete this.__isDestroying},u.prototype._propagateDepth=function(){if(this.hasChildren()){var e=this;this.getChildren().forEach((function(t){t._nodeDepth=e.getNodeDepth()+1,t._propagateDepth()}))}},u.prototype._addChild=function(e,t,n){var o=this._addChildNode(e,t,n);o._nodeDepth=this.getNodeDepth()+1,o._propagateDepth();var i=o._getNodeInfos();return i.nodeIndex=o._localID,this._modelEvents.publish({event:"addChild",data:i,context:this}),o},u.prototype.getNthChild=function(e){if(this.getChildren())return this.getChildren()[e]},u.prototype.getLastChild=function(){return this.getChildren()[this.getChildren().length-1]},u.prototype._dump=function(t,n){n||(n={}),t=e.extend({properties:[function(){return{property:"label",value:this.options.label}},function(){return{property:"grid",value:this.options.grid}},function(){return{property:"icons",value:this.options.icons}}]},t);var o=this;t.properties.forEach((function(t){if("function"===e.typeOf(t)){var i=t.call(o);n[i.property]=i.value}}));var i=this.getChildren();return i?(n.children=[],i.forEach((function(e){n.children.push(e._dump(t))})),n):n},u.prototype.dump=function(e,t){return this._dump(e,t)},u.prototype.isAscendantOf=function(e){for(var t=e;t&&!t.options.isRoot;){if(t===this)return!0;t=t.getParent()}return!1},u.prototype.isVisible=function(){return this._isVisible()},u.prototype._getLocalID=function(){var e=this.getParent();if(e){var t=e.getChildren();let o=0;if(t)for(var n=0;n<t.length;n++){if(t[n]===this)return o;void 0===t[n].options.multipleNodesRep?o++:o+=t[n].options.multipleNodesRep}return o}return 0},u.prototype._isTrueRoot=function(){return!!this.options&&this.options._isTrueRoot},u.prototype.remove=function(e){var t=this.getParent();if(t)return t.removeChild(this,e);console.warn("Cannot remove this node because its father is undefined")},u.prototype.empty=function(){this.withTransactionUpdate((()=>{this.getModelEvents().publish({event:"empty"});for(var e=this.getChildren()||[],t=e.length-1;t>=0;t--)e[t].remove();this._getFakeNodesTable()&&(this.__groupingInformation=void 0,delete this.__groupingInformation)}))},u.prototype.removeChild=function(e,t,n){if(void 0!==e){var o;this.prepareUpdate();var i,r=this.getChildren();"number"==typeof e?e=r[i=e]:i=r.indexOf(e);var s=n&&n.treeDocument?n.treeDocument:this.getTreeDocument();if(!this._changeTransactionModeDisabled&&s&&s.getUseChangeTransactionMode()&&!t)!e||e._changeStates&WUXModelChangeStates.NodeToBeRemoved||(e._setChangeStates(WUXModelChangeStates.NodeToBeRemoved,"add"),e.notifyModelUpdate());else{if(this._modelEvents.publish({event:"preRemoveChild",data:e._getNodeInfos(),context:this}),e._unsetParent(),e._detach(null),-1!==i&&(o=r.splice(i,1)[0]),0!==r.length||this._preventResetChildren||(this.__children=null),!this.__isDestroying){for(var a=!0,l=0;l<r.length;l++)if(r[l]._isSelfVisible()){a=!1;break}a&&this._updateExpanderState(n)}this._modelEvents.publish({event:"removeChild",data:e._getNodeInfos(),context:this})}return this.pushUpdate({updateType:WUXModelUpdateTypes.Removal}),o}console.warn("Cannot remove an undefined child")},u.prototype.removeChildren=function(e){this.prepareUpdate();var t=[],n=this.getChildren();if(e&&!1===e.sendEventForEachNode){var o=e&&e.treeDocument?e.treeDocument:this.getTreeDocument(),i=!0,r=!this._changeTransactionModeDisabled&&o&&o.getUseChangeTransactionMode();r||this._modelEvents.publish({event:"preRemoveChildren",data:n,context:this});for(a=0;a<n.length;a++){var s=n[a];s._isSelfVisible()&&(i=!1),r?(r=!0,!s||s._changeStates&WUXModelChangeStates.NodeToBeRemoved||(s._setChangeStates(WUXModelChangeStates.NodeToBeRemoved,"add"),s.notifyModelUpdate())):(t.push(s),s._unsetParent(),s._detach(null))}r||(i&&this._updateExpanderState(e),this.__children=null,this._modelEvents.publish({event:"removeChildren",data:n,context:this}))}else if(n)for(var a=n.length-1;a>=0;a--)t.push(this.removeChild(n[0],void 0,e));return this.pushUpdate({updateType:WUXModelUpdateTypes.Removal}),t},u.prototype._addChildNode=function(e,t,n){var o,i=n&&n.treeDocument?n.treeDocument:this.getTreeDocument();if(e instanceof u){var r=(o=e).getParent();r&&r.removeChild(o,!0,n)}else{o=new(i&&i.options.nodeModelClass?i.options.nodeModelClass:u)(e)}return i?o._modelEvents._setParent(i._getTrueRoot()._modelEvents):o._modelEvents._setParent(this._modelEvents),this.__children||(this.__children=[]),void 0===t?t=this.__children.push(o)-1:this.__children.splice(t,0,o),o._localID=t,o._parentNode=this,this._updateExpanderState(n),!this._changeTransactionModeDisabled&&i&&i.getUseChangeTransactionMode()&&o._setChangeStates(WUXModelChangeStates.NodeAdded,"add"),o},u.prototype._detach=function(){this._rowID=null,delete this.__trueRoot,this.hasChildren()&&i.optimizedForEach(this.getChildren(),(function(e,t){e._detach()}))},u.prototype.isExpanded=function(){if(this.hasNoRepresentation())return!0;var e=this.getState();return"expanded"===e||"partiallyExpanded"===e||"noChildrenExpanded"===e},u.prototype.onPreExpand=function(e){return this._modelEvents.subscribe({event:"preExpand"},e)},u.prototype.onPreExpandAll=function(e){return this._modelEvents.subscribe({event:"preExpandAll"},e)},u.prototype.onPostExpand=function(e){return this._modelEvents.subscribe({event:"postExpand"},e)},u.prototype.onPreCollapse=function(e){return this._modelEvents.subscribe({event:"preCollapse"},e)},u.prototype.onPostCollapse=function(e){return this._modelEvents.subscribe({event:"postCollapse"},e)},u.prototype.preExpandDone=function(t){t=e.extend({preventExpandAll:!1,state:"expanded"},t);var n=this.getTree();n&&n._syncRowIndexes(),this._modelEvents.publish({event:"PRE_EXPAND_DONE",context:this,data:t})},u.prototype._getNodeInfos=function(){return{nodeModel:this,virtualRowID:this._rowID,nodeLocalID:this._localID}},u.prototype.setState=function(t){null!==(t=e.extend({state:null},t)).state&&("noChildren"===this.getState()&&"expanding"===t.state||(this.prepareUpdate(),this._expandState=d[t.state],this._modelEvents.publish({event:"expandStateChange",context:this,data:t}),this.pushUpdate({updateType:WUXModelUpdateTypes.Expand})))},u.prototype.getState=function(){return p[this._expandState]},u.prototype.expand=function(e){return this._privateExpand(e)},u.prototype.expandNLevels=function(t){return t=e.extend({expandAll:!1,numberOfLevelsToExpand:1},t),this._privateExpand(t)},u.prototype._privateExpand=function(t,o,r){var a=this,l=t&&t.treeDocument?t.treeDocument:this.getTreeDocument(),p=void 0!==a.options.useAsyncPreExpand?a.options.useAsyncPreExpand:!!l&&l.options.useAsyncPreExpand;if(t=e.extend({expandAll:!1,interactiveExpandAll:!1,numberOfLevelsToExpand:1,onExpandComplete:function(e){}},t),void 0===o&&(o=0),o++,void 0===r&&(r=this,this.__expandAllCounter=0),p){r._beginOfSubExpand(t);var u=a.getChildren(),h=!0;if(u&&0===u.length&&(h=!1),u)for(var c=0;c<u.length;c++)if(u[c]._isSelfVisible()){h=!1;break}if(h&&"expandState"!==a._expandState&&"noExpandStateExpand"!==a._expandState)t.onExpandComplete&&t.onExpandComplete.call(a,t),r._endOfSubExpand(t);else{a.setState({state:"expanding"});var f=e.extend(a._getNodeInfos(),t),_=function(e,s){if(void 0===s&&(s="expanded"),a._expandState=d[s],a._isExpanded=!0,a._modelEvents.publish({event:"expand",data:f,context:a}),n.log(3,"TreeNodeModel","3) expand ",a.options.label),t.expandAll||o<t.numberOfLevelsToExpand){var l=a.getVisibleChildren();l&&!e?i.optimizedForEach(l,(function(e,n){e._privateExpand(t,o,r)})):t.onExpandComplete&&t.onExpandComplete.call(a,t)}a._modelEvents.publish({event:"postExpandPrivate",data:f,context:a}),r._endOfSubExpand(t),a._modelEvents.publish({event:"postExpand",data:f,context:a}),n.log(3,"TreeNodeModel","4) post expand on ",a.options.label)};n.log(3,"TreeNodeModel","watching pre expand on ",a.options.label),a._modelEvents.subscribeOnce({event:"PRE_EXPAND_DONE"},(function(e){n.log(3,"TreeNodeModel","2) async pre expand done! ",a.options.label),_.call(this,e.data.preventExpandAll,e.data.state)})),n.log(3,"TreeNodeModel","1) pre expand ",a.options.label),a._modelEvents.publish({event:"preExpandPrivate",data:f,context:a}),a._modelEvents.publish({event:"preExpand",data:f,context:a})}}else{let o=!1,i=function(i){o=!0,r._beginOfSubExpand(t),"expandState"===i._expandState&&i.setState({state:"expanding"});var s=e.extend(i._getNodeInfos(),t);n.log(3,"TreeNodeModel","1) pre expand ",i.options.label),a._modelEvents.publish({event:"preExpandPrivate",data:s,context:i}),a._modelEvents.publish({event:"preExpand",data:s,context:i}),n.log(3,"TreeNodeModel","2) async pre expand done! ",i.options.label);let l="expanded";"noExpandStateExpand"===i._expandState&&(l="noChildrenExpanded"),i._expandState=d[l],i._isExpanded=!0,i._modelEvents.publish({event:"expand",data:s,context:i}),n.log(3,"TreeNodeModel","3) expand ",i.options.label)},l=function(o){var i=e.extend(o._getNodeInfos(),t);o._modelEvents.publish({event:"postExpandPrivate",data:i,context:o}),r._endOfSubExpand(t),o._modelEvents.publish({event:"postExpand",data:i,context:o}),n.log(3,"TreeNodeModel","4) post expand on ",o.options.label)},p=function(e,n){if(e.options.useAsyncPreExpand)return e._privateExpand(t,n,r),{processSelf:!1,processChildren:!1};var o=e.getChildren(),i=!0;if(o&&o.length)for(var s=0;s<o.length;s++)if(!1===o[s].isHidden()&&!1===o[s].isFiltered()){i=!1;break}return i&&"expandState"!==a._expandState?{processSelf:!1,processChildren:!1}:t.expandAll||n<t.numberOfLevelsToExpand-1?{processSelf:!0,processChildren:!0}:{processSelf:!0,processChildren:!1}};s.processTreeIterative(this,{functionName:"getChildren"},{preCallback:i,postCallback:l},p,"preAndPostOrder"),o||(r._beginOfSubExpand(t),t.onExpandComplete&&t.onExpandComplete.call(a,t),r._endOfSubExpand(t))}},u.prototype._beginOfSubExpand=function(e){this.prepareUpdate(),this.__expandAllCounter++,1===this.__expandAllCounter&&e&&e.expandAll&&this._modelEvents.publish({event:"preExpandAll",data:this._getNodeInfos(),context:this})},u.prototype._endOfSubExpand=function(e){this.__expandAllCounter--,this.pushUpdate({updateType:WUXModelUpdateTypes.Expand}),0===this.__expandAllCounter&&e&&e.expandAll&&this._modelEvents.publish({event:"postExpandAll",data:this._getNodeInfos(),context:this}),this.__expandAllCounter<0&&console.error("too many calls of _endOfSubExpand")},u.prototype.withTransactionUpdate=function(e){if(e){var t;this.prepareUpdate();try{t=e.call(this,this._getNodeInfos())}finally{this.pushUpdate(t)}}},u.prototype.expandAll=function(e){this.prepareUpdate(),this.options._isTrueRoot||this.expand({expandAll:!0,onExpandComplete:e&&e.onExpandComplete}),this.pushUpdate({updateType:WUXModelUpdateTypes.Expand})},u.prototype.processDescendants=function(t){return t=e.extend({async:!1,onlyVisibleNodes:!1,processNode:function(e){},treeTraversalOrder:"preOrder",onComplete:function(){}},t),this._getDescendantAndProcess(void 0,t)},u.prototype._getDescendantAndProcess=function(t,n){let o=this;(n=e.extend({async:!1,onlyVisibleNodes:!1,treeTraversalOrder:"preOrder"},n)).treeDocument||(n.treeDocument=this.getTreeDocument()),void 0===t?t=[]:t.push(this);var i=this.getChildren();if(i)if(void 0===n.onCompleteCB){let e=function(e){if(e===o)return{processSelf:!1,processChildren:!0};let t=!n.onlyVisibleNodes||e.isExpanded();return{processSelf:(!n.onlyVisibleNodes||(n.treeDocument&&n.treeDocument._isNodeVisibleCache(e)||!n.treeDocument&&e.isVisible()))&&e!==o,processChildren:t}},i=function(e){let o;return void 0!==n.processNode&&(o=n.processNode.call(e,e._getNodeInfos())),t.push(e),{stopProcessing:!!o&&o.stopProcessing,processChildren:!o||o.shouldProcessDescendants}};s.processTreeIterative(this,{functionName:"getChildren"},i,e,n.treeTraversalOrder)}else r.forEach(i,(function(e){"postOrder"===n.treeTraversalOrder&&e._getDescendantAndProcess(t,n),void 0!==n.processNode&&n.processNode.call(e,e._getNodeInfos()),"preOrder"===n.treeTraversalOrder&&e._getDescendantAndProcess(t,n)}),50,n.onCompleteCB);return t},u.prototype.getAllDescendants=function(e){return this._getDescendantAndProcess(void 0,e)},u.prototype.collapseAll=function(){this.prepareUpdate(),this._modelEvents.publish({event:"preCollapseAll",data:this._getNodeInfos(),context:this}),this.options._isTrueRoot||this.collapse(),this.processDescendants({processNode:function(){this.collapse()}}),this._modelEvents.publish({event:"postCollapseAll",data:this._getNodeInfos(),context:this}),this.pushUpdate({updateType:WUXModelUpdateTypes.Expand})},u.prototype.matchSearch=function(){!0!==this._isMatchingSearch&&(this._isMatchingSearch=!0,this.prepareUpdate(),this._modelEvents.publish({event:"matchSearch",data:this._getNodeInfos(),context:this}),this.pushUpdate())},u.prototype.unmatchSearch=function(){!1!==this._isMatchingSearch&&(this._isMatchingSearch=!1,this.prepareUpdate(),this._modelEvents.publish({event:"unmatchSearch",data:this._getNodeInfos(),context:this}),this.pushUpdate())},u.prototype.isMatchingSearch=function(){return this._isMatchingSearch},u.prototype.collapse=function(e){this.hasNoRepresentation()||(void 0===e&&(e={notify:!0}),e.notify&&(this.prepareUpdate(),this._modelEvents.publish({event:"preCollapse",data:{nodeModel:this,virtualRowID:this._rowID},context:this})),"noChildrenExpanded"===this.getState()?(this._expandState="noExpandStateExpand",this._isExpanded=!1):(this.getChildren()||"expanded"===this.getState())&&(this._expandState="expandState",this._isExpanded=!1),e.notify&&(this._modelEvents.publish({event:"collapse",data:{nodeModel:this,virtualRowID:this._rowID},context:this}),this._modelEvents.publish({event:"postCollapse",data:{nodeModel:this,virtualRowID:this._rowID},context:this}),this.pushUpdate({updateType:WUXModelUpdateTypes.Expand})))},u.prototype.search=function(t,n){var o={nodeModel:this};if(!(t=e.extend({match:function(e){},shouldStop:function(e){return!1},useTransaction:!0},t)).shouldStop(this)){if(t.useTransaction&&this.prepareUpdate(),void 0===n)n=[];else t.match(o)&&n.push(this);var i=this.getChildren();return i&&i.forEach((function(e){e.search(t,n)})),this._modelEvents.publish({event:"search",data:this._getNodeInfos(),context:this}),t.useTransaction&&this.pushUpdate(),n}},u.prototype.getNumberOfDescendants=function(e){void 0===e&&(e=0);var t=this.getChildren();if(t){for(var n=0;n<t.length;n++)void 0!==t[n].options.multipleNodesRep?e+=t[n].options.multipleNodesRep:e++;t.forEach((function(t){e=t.getNumberOfDescendants(e)}))}return e},u.prototype.getNumberOfVisibleDescendants=function(e){void 0===e&&(e=0);var t=this.getVisibleChildren();if(t){for(var n=0;n<t.length;n++)void 0!==t[n].options.multipleNodesRep?e+=t[n].options.multipleNodesRep:t[n].hasRowID()&&e++;t.forEach((function(t){e=t.getNumberOfVisibleDescendants(e)}))}return e},u.prototype.getTree=function(){if(this.options._isTrueRoot)return this.options.tree;var e=this.getRoot();return e?e._tree:void 0},u.prototype.getRoot=function(){for(var e=this;e&&!e.isRoot();)e=e.getParent();return e},u.prototype.getPath=function(){var e=[];return e.push(this),this._getAndProcessParents((function(t){e.push(t.nodeModel)})),e.reverse()},u.prototype.buildPath=function(t){var n={path:"",buildPath:function(e,t,n){return e+(void 0===t.options.label?"":t.options.label)+"/"}};return t=e.extend(n,t),this.getPath().forEach((function(e,n){t.path=t.buildPath.call(e,t.path,e,n)})),t.path},u.prototype._getAndProcessParents=function(e){for(var t=this;t&&!t.isRoot();)(t=t.getParent())&&void 0!==e&&e.call(t,t._getNodeInfos());return t},u.prototype._getTrueRoot=function(){var e=this;if(!this.__trueRoot){for(;e&&!e._isTrueRoot()&&!e.__trueRoot;)e=e.getParent();if(e)for(this.__trueRoot=e&&e.__trueRoot?e.__trueRoot:e,e=this.getParent();e&&!e._isTrueRoot()&&!e.__trueRoot;)e.__trueRoot=this.__trueRoot,e=e.getParent()}return this.__trueRoot},u.prototype.getTreeDocument=function(){var e=this._getTrueRoot();if(e)return e._treeDocument},u.prototype.reverseExpand=function(){for(var e=this;e&&!e.isRoot();)(e=e.getParent()).isExpanded()||e.expand()},u.prototype.getParents=function(e){for(var t=this,n=[];t;)!(t=t.getParent())||!e&&t.options._isTrueRoot||n.push(t);return n},u.prototype.getFirstVisibleParent=function(e){let t=this;for(;t;)if(t=t.getParent(),t&&(e||!t._isTrueRoot())&&t.isVisible())return t},u.prototype.getBrothers=function(){var e=this.getParent(),t=this;if(e)return e.getChildren().filter((function(e){return e!==t}))},u.prototype.getNextBrother=function(){var e=this.getParent();if(e){var t=e.getChildren();if(t){var n=t.indexOf(this);if(n>-1){if(n+1<t.length)return t[n+1];e.getNextBrother()}}}},u.prototype.getPreviousBrother=function(){var e=this.getParent();if(e){var t=e.getChildren();if(t){var n=t.indexOf(this);if(n>0)return t[n-1]}}},u.prototype._getLastVisibleNode=function(){if(!1===this.hasChildren()||!0===this.hasChildren()&&!1===this.isExpanded())return this;var e=this.getChildren();return e[e.length-1]._getLastVisibleNode()},u.prototype.getPreviousNode=function(){var e,t=this.getPreviousBrother();t?e=!1===t.hasChildren()||!0===t.hasChildren()&&!1===t.isExpanded()?t:t._getLastVisibleNode():e=this.getParent();if(!e._isTrueRoot())return e},u.prototype.getNextNode=function(e){if(this.hasChildren()&&!e)return this.getChildren()[0];var t=this.getNextBrother();if(t)return t;var n=this.getParent();return n?n.getNextNode(!0):void 0},u.prototype.getNextVisibleNode=function(){var e=this.getNextNode(this.hasChildren()&&!this.isExpanded());return e&&!1===e.isVisible()?e.getNextVisibleNode():e},u.prototype.getPreviousVisibleNode=function(){var e=this.getPreviousNode();return e&&!1===e.isVisible()?e.getPreviousVisibleNode():e},u.prototype._getPreviousBrothers=function(){var e=[],t=this.getParent();if(t)for(var n=t.getChildren(),o=n.indexOf(this),i=0;i<o;i++)e.push(n[i]);return e},u.prototype._computeRowID=function(){if(this.isVisible()&&this.hasRowID()){var e=0,t=function(t){t._getPreviousBrothers().filter((function(e){return e.isVisible()&&e.hasRowID()})).forEach((function(t){e=e+t.getNumberOfVisibleDescendants()+1,void 0!==t.options.multipleNodesRep&&(e=e+t.options.multipleNodesRep-1)}))};t(this);var n=this.getParents(!0).filter((function(e){return(e.isVisible()||e._isTrueRoot())&&e.hasRowID()}));if(n.length>1)for(var o=0;o<n.length;o++){var i=n[o];i.options._isTrueRoot||(e++,void 0!==i.options.multipleNodesRep&&(e=e+i.options.multipleNodesRep-1)),t(i)}return e}return null},u.prototype.hasChildren=function(){var e=this.getChildren();return!!(e&&e.length>0)},u.prototype.canBeExpandedAll=function(){if(this.canBeExpanded()){if(!this.hasChildren())return!0;for(var e=this.getChildren(),t=0;t<e.length;t++)if(e[t].canBeExpanded())return!0}return!1},u.prototype.canBeExpanded=function(){return"noChildren"!==this.getState()&&"noChildrenCollapsed"!==this.getState()&&"noChildrenExpanded"!==this.getState()},u.prototype.getParent=function(){return this._parentNode},u.prototype.isLastChild=function(){if(!this.getParent())return!1;for(var e=this.getParent().getChildren(),t=e.indexOf(this)+1;t<e.length;t++){if(e[t]._isSelfVisible())return!1}return!0},u.prototype.getNthParent=function(e){for(var t=this,n=0;t&&n<e;)t=t.getParent(),n++;return t},u.prototype.getNodeDepth=function(){return null===this._nodeDepth&&void 0===this._nodeDepth&&(this._nodeDepth=this.getParents().length),this._nodeDepth},u.prototype.isRoot=function(){var e=this.getParent();return!(0!==this.getNodeDepth()||!e||!e._isTrueRoot())},u.prototype._isVisible=function(e){let t;if(e&&(t=e.get(this)),void 0===t){let e=this;for(t=!0;!0===t&&e&&(t=e._getVisibility(),!e.isRoot());)e=e.getParent(),e||(t=!1)}return e&&e.set(this,t),t},u.prototype._getVisibility=function(){if(this.isHidden()||this.isFiltered())return!1;if(!this.isRoot()){var e=this.getParent();if(e&&!e.isExpanded())return!1}return!0},u.prototype._isSelfVisible=function(){if(this.isHidden()||this.isFiltered())return!1;if(this.hasNoRepresentation()){let e=this.getChildren();if(e&&Array.isArray(e))for(let t=0;t<e.length;t++)if(e[t]._isSelfVisible())return!0;return!1}return!0},u.prototype.setHasAsyncChildren=function(e){Array.isArray(this.__children)&&this.__children.length>0||(this.__children=e?[]:void 0,this._updateExpanderState())},u.prototype._updateExpanderState=function(t){var n=this.getChildren(),o=this._expandState;switch(e.typeOf(n)){case"string":this._expandState="asyncState",this._nodeIsAsync=!0;break;case"array":var i=!0;if(0===n.length){let e=!1;if(void 0!==this.options.useAsyncPreExpand)e=this.options.useAsyncPreExpand;else{const n=t&&t.treeDocument?t.treeDocument:this.getTreeDocument();n&&(e=n.options.useAsyncPreExpand)}e&&(i=!1)}else for(var r=0;r<n.length;r++)if(n[r]._isSelfVisible()){i=!1;break}i?this.isExpanded()?this._expandState="noExpandStateCollapse":this._expandState="noExpandStateExpand":this.isExpanded()?this._expandState="collapseState":this._expandState="expandState",this._nodeIsAsync=!1;break;default:this._expandState="noExpandState"}if(o!==this._expandState&&(this.prepareUpdate(),this.pushUpdate({updateType:WUXModelUpdateTypes.Expand}),this.hasNoRepresentation())){let e=this.getParent();e&&e._updateExpanderState()}},u.prototype.getChildren=function(){return this.__children},u.prototype.getNumberOfChildren=function(){var e=this.getChildren();return e?e.length:0},u.prototype.getAllDirectChildrenCount=function(){var e=this.getChildren();if(e){let t=0;for(let n=0;n<e.length;n++)if(void 0!==e[n].options.multipleNodesRep){if(isNaN(e[n].options.multipleNodesRep))throw'ERROR: "TreeNodeModel.options.multipleNodesRep" MUST BE AN INTEGER!!!!!!!!!';t+=e[n].options.multipleNodesRep}else t++;return t}return 0},u.prototype.getVisibleChildren=function(e){var t=this.getChildren();if(Array.isArray(t)&&t.length>0){if(e)return t.filter((function(e){return!e.isHidden()}));{let e=this.getTreeDocument();return t.filter((function(t){return e?e._isNodeVisibleCache(t):t.isVisible()}))}}},u.prototype.getNumberOfVisibleChildren=function(e){var t=0,n=this.getChildren();return Array.isArray(n)&&n.length>0&&(e?n.forEach((function(e){e.isHidden()||t++})):n.forEach((function(e){e.isVisible()&&t++}))),t},u.prototype.getLabel=function(){return this.options.label},u.prototype.getIcons=function(){return this.options.icons},u.prototype.setIcons=function(e){this.updateOptions({icons:e})},u.prototype.setLabel=function(e){this.updateOptions({label:e})},u.prototype.setBadges=function(t){if(null!==t){this.options.badges||(this.options.badges={});var n=e.extend(this.options.badges,t);this.updateOptions({badges:n})}else this.options.badges=null,this.updateOptions({badges:null})},u.prototype.getBadges=function(){return this.options.badges},u.prototype.hasBadges=function(){var e=this.getBadges();return!!e&&Object.keys(e).some((function(t){return e[t]}))},u.prototype.sortChildren=function(t){if(t=e.extend({isRecursive:!1,sortFunction:function(e,t){return(void 0===e.options.label?"":e.options.label)<(void 0===t.options.label?"":t.options.label)?-1:1}},t),this.hasChildren()){this.prepareUpdate();var n=this.getChildren();if(n.sort(t.sortFunction),t.isRecursive)for(var o=0,i=n.length;o<i;o++)n[o].hasChildren()&&n[o].sortChildren(t);this._modelEvents.publish({event:"sortChildren",data:this._getNodeInfos(),context:this}),this.pushUpdate({updateType:WUXModelUpdateTypes.Sorting})}},h.prototype=Object.create(u.prototype),h.prototype.constructor=h,h.prototype._unsetParent=function(){let e=this.getParent();if(e){let t=e._getFakeNodesTable();t&&delete t[this.getIdentifier()]}let t=this.getOriginalChildrenInformation();if(u.prototype._unsetParent.call(this),e)for(;e&&e.getNodeSource()===u.NODE_SOURCE.GROUPING;){let n=e.getParent();g.call(e,t),e=n}},h.prototype.removeChildren=function(e){u.prototype.removeChildren.call(this,e),this.remove()},h.prototype._isFromOriginalModel=function(){return!1},u.prototype._isFromOriginalModel=function(){return!0},u.NODE_SOURCE={MODEL:0,GROUPING:1},u.prototype.getNodeSource=function(){return u.NODE_SOURCE.MODEL},h.prototype.getNodeSource=function(){return u.NODE_SOURCE.GROUPING},h.prototype._canBeGrouped=function(){return console.debug("[TreeNodeModel] Use of deprecated API '_canBeGrouped' to be replaced by 'getNodeSource'."),!1},u.prototype._canBeGrouped=function(){return console.debug("[TreeNodeModel] Use of deprecated API '_canBeGrouped' to be replaced by 'getNodeSource'."),!0},h.prototype.getIdentifier=function(){return this._options.identifier},u.prototype._getFakeNodesTable=function(){return this.__groupingInformation&&this.__groupingInformation.fakeNodesTable},h.prototype.getProperty=function(){return this._options.property},h.prototype.getOriginalChildrenInformation=function(){return Object.assign({},this._options.originalChildrenInformation)};const c=function(){const e=this._getTrueRoot();if(!e.__groupingCallbackSet){e.__groupingCallbackSet=!0;const t=function(t){const n=t.data.nodeModel,o=n.getParent();if(!n||!n._isFromOriginalModel()||!o||o._isFromOriginalModel())return;e.prepareUpdate();const i=o.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount,r=y.call(o).notHiddenNotFilteredChildrenCount-i,s=o.getParent();s._isFromOriginalModel()&&f.call(o,s._groupingOptions);for(let e=o.getParent();!e._isFromOriginalModel();e=e.getParent()){const t=e.getOriginalChildrenInformation();t.notHiddenNotFilteredChildrenCount+=r,_.call(e,t);const n=e.getParent();n._isFromOriginalModel()&&f.call(e,n._groupingOptions)}e.pushUpdate({updateType:WUXModelUpdateTypes.Grouping})};e.addEventListener("show",t),e.addEventListener("hide",t);const n=function(e){if(e.getNodeSource()===u.NODE_SOURCE.MODEL){const t=e.getChildren();t&&t.length>0&&t.forEach((t=>{t.getNodeSource()!==u.NODE_SOURCE.MODEL&&(y.call(t),f.call(t,e._groupingOptions))}))}};e.addEventListener("filter",(function(){n(e),e.processDescendants({processNode:function(e){n(e.nodeModel)}})}))}},f=function(e){if(this.getNodeSource()===u.NODE_SOURCE.MODEL)return this;const t=this.getChildren();let n=[];if(t&&t.forEach((function(t){n=n.concat(f.call(t,e))})),e.updateGroupingNodeOptions)e.updateGroupingNodeOptions.call(this,n);else{const e=this.getOriginalChildrenInformation();this.updateOptions({label:this.getProperty()+": "+this.getIdentifier()+" ("+e.notHiddenNotFilteredChildrenCount+")"})}return n},_=function(e){this.getNodeSource()!==u.NODE_SOURCE.MODEL&&(e.childrenCount===this._options.originalChildrenInformation.childrenCount&&e.notHiddenNotFilteredChildrenCount===this._options.originalChildrenInformation.notHiddenNotFilteredChildrenCount||(this._options.originalChildrenInformation=Object.assign({},e)),e.notHiddenNotFilteredChildrenCount>0?(this.isHidden()&&this.show(),this.isExpanded()||this.expand()):this.isHidden()||this.hide(),this.getParent()&&0===e.childrenCount&&this.remove())},g=function(e){const t=Object.assign({},this.getOriginalChildrenInformation());t.childrenCount-=e.childrenCount,t.notHiddenNotFilteredChildrenCount-=e.notHiddenNotFilteredChildrenCount,_.call(this,t)},y=function(){if(this.getNodeSource()===u.NODE_SOURCE.MODEL)return{childrenCount:1,notHiddenNotFilteredChildrenCount:this.isHidden()||this.isFiltered()?0:1};let e=0,t=0;const n=this.getChildren();if(n)for(var o=n.length;o>0;o--){const i=n[o-1],r=y.call(i);e+=r.childrenCount,t+=r.notHiddenNotFilteredChildrenCount,0===r.childrenCount&&delete this._getFakeNodesTable()[i.getIdentifier()]}return _.call(this,{childrenCount:e,notHiddenNotFilteredChildrenCount:t}),{childrenCount:e,notHiddenNotFilteredChildrenCount:t}},v=function(e){let t=this.getChildren();t&&t.length>0&&(t=t.slice(0),t&&t.length>0&&t.forEach((t=>{t.getNodeSource()!==u.NODE_SOURCE.MODEL&&(y.call(t),f.call(t,e))})))},C=function(e,t){const n=this._getFakeNodesTable();let o=n[t];return o||(o=new h({property:e,identifier:t,originalChildrenInformation:{childrenCount:0,notHiddenNotFilteredChildrenCount:0}}),o.__groupingInformation={fakeNodesTable:{}},n[t]=o,this.addChild(o)),o.isHidden()&&o.show(),o},m=function(e,t){let n="";return n=e.getNodeGroupingKey?e.getNodeGroupingKey(this,t):this.getAttributeValue(t),void 0!==n&&""!==n||(n="NA"),n},b=function(e){this.__groupingTemp.sourceGroupingKeysDesc=Object.assign(...e.propertiesToGroup.map((e=>({[e]:{}}))));const t=this.getChildren();for(let n=0;n<t.length;n++){const o=t[n];o.__initialIdxInParentChildren=n,o.__tempParentGrouping={canBeGrouped:!1,sourceKeys:[]},o.getNodeSource()!==u.NODE_SOURCE.MODEL||e.canNodeBeGrouped&&!e.canNodeBeGrouped(o)||(o.__tempParentGrouping.canBeGrouped=!0,e.propertiesToGroup.forEach((t=>{const n=m.call(o,e,t);o.__tempParentGrouping.sourceKeys.push(n),this.__groupingTemp.sourceGroupingKeysDesc[t][n]=null})))}for(let e in this.__groupingTemp.sourceGroupingKeysDesc)this.__groupingTemp.sourceGroupingKeysDesc[e]=Object.keys(this.__groupingTemp.sourceGroupingKeysDesc[e])},E=async function(e){if(!this.hasChildren())return;b.call(this,e);const t=e.mapGroupingKeys(this.__groupingTemp.sourceGroupingKeysDesc);if(t instanceof Promise){const e=await t;this.__groupingTemp.mappedGroupingKeysDesc=e}else this.__groupingTemp.mappedGroupingKeysDesc=t;const n=this.getChildren();for(let t=0;t<n.length;){const o=n[t];if(o.__tempParentGrouping&&o.__tempParentGrouping.canBeGrouped){let t=this;o.__tempParentGrouping.sourceKeys.forEach(((n,o)=>{const i=e.propertiesToGroup[o],r=this.__groupingTemp.mappedGroupingKeysDesc[i][n],s=C.call(t,i,r);t=s})),o.getParent()!==t&&t.moveChild(o)}else t++;delete o.__tempParentGrouping}},x=function(e,t,n){if(!n||0===n.length)return void(e.getParent()!==this&&this.moveChild(e));const o=n.shift(),i=m.call(e,t,o),r=C.call(this,o,i);x.call(r,e,t,n)},M=function(e){const t=this.getChildren();if(!t)return;let n=0;for(let o=0;o<t.length;){const i=t[o];if(i.__initialIdxInParentChildren=n++,i.getNodeSource()!==u.NODE_SOURCE.MODEL||e.canNodeBeGrouped&&!e.canNodeBeGrouped(i))o++;else{const t=e.propertiesToGroup.slice();x.call(this,i,e,t)}}},D=function(e){this.__groupingTemp={useChangeTransMode:!1};const t=this.getTreeDocument();this.__groupingTemp.useChangeTransMode=t.getUseChangeTransactionMode(),t.setUseChangeTransactionMode(!1),this.ungroupChildren(e&&e.propertiesToGroup),this._groupingOptions||(this._groupingOptions=e)},S=function(){this._modelEvents.publish({event:"groupChildren",data:this._getNodeInfos(),context:this});this.getTreeDocument().setUseChangeTransactionMode(this.__groupingTemp.useChangeTransMode),delete this.__groupingTemp,this.pushUpdate({updateType:WUXModelUpdateTypes.Grouping})};return h.prototype.groupChildren=async function(e){},u.prototype.groupChildren=async function(e){this.prepareUpdate(),D.call(this,e),e&&e.propertiesToGroup&&e.propertiesToGroup.length>0&&(this.__groupingInformation||(this.__groupingInformation={fakeNodesTable:{}}),c.call(this),e.mapGroupingKeys&&e.mapGroupingKeys instanceof Function?await E.call(this,e):M.call(this,e),v.call(this,e)),S.call(this)},h.prototype._removeGrouping=function(e,t,n,o){var i=this.getChildren();if(i&&i.length>0){for(var r=o||!t||t.length<=n||t[n]!==this.getProperty(),s=i.length;s>0;s--){var a=i[s-1];a._removeGrouping(e,t,n+1,r)&&delete this._getFakeNodesTable()[a.getIdentifier()]}return r?this.remove(!0):this.hide(),r}},u.prototype._removeGrouping=function(e,t,n,o){return e!==this.getParent()&&e.moveChild(this),!1},h.prototype.ungroupChildren=function(e){},u.prototype.ungroupChildren=function(e){const t=this.getChildren();if(t&&0!==t.length&&this._getFakeNodesTable()){for(let n=t.length;n>0;n--){const o=t[n-1];if(o._isFromOriginalModel())continue;o._removeGrouping(this,e,0,!1)&&delete this._getFakeNodesTable()[o.getIdentifier()]}0===Object.keys(this._getFakeNodesTable()).length&&(this.__groupingInformation=void 0,delete this.__groupingInformation),t.sort((function(e,t){return void 0===e.__initialIdxInParentChildren?void 0===t.__initialIdxInParentChildren?0:1:void 0===t.__initialIdxInParentChildren?void 0===e.__initialIdxInParentChildren?0:-1:e.__initialIdxInParentChildren<t.__initialIdxInParentChildren?-1:1}))}},u.prototype.getAttributeValue=function(e){return"label"===e?this.getLabel():this.options.grid[e]},u.prototype.isFiltered=function(){return void 0!==this.__filterCpt&&this.__filterCpt>0},h.prototype.canBeFiltered=function(){return!1},u.prototype.canBeFiltered=function(e){return!0},u.prototype.hasNoRepresentation=function(){return!1},u.prototype.hasRowID=function(){return!this.hasNoRepresentation()},u.prototype.incrementFilteredCount=function(){this.__filterCpt||(this.__filterCpt=0),this.__filterCpt++,this._rowID=null},u.prototype.decrementFilteredCount=function(){if(this.__filterCpt--,0===this.__filterCpt){let e=this.getParent();e&&e._updateExpanderState()}},u.prototype.getFilteredCount=function(){return void 0===this.__filterCpt&&(this.__filterCpt=0),this.__filterCpt},u.extendNode=function(t){var n=function(n){t.defaultOptions&&(this.defaultOptions=e.extend(e.clone(u.prototype.defaultOptions),t.defaultOptions)),void 0===this.defaultOptions&&(this.defaultOptions={}),this.options=e.extend(this.defaultOptions,n),u.call(this,n)};for(var o in(n.prototype=Object.create(this.prototype)).constructor=n,n.extendNode=this.extendNode,t){var i=t[o];"defaultOptions"!==o&&(n.prototype[o]="function"==typeof i?function(e,t,n){return function(){const o=this._parent;e.prototype[t]&&(this._parent=e.prototype[t]);const i=n.apply(this,arguments);return this._parent=o,i}}(u,o,i):i)}return n},u.prototype.selectAll=function(){var e=this.getTreeDocument();if(e){var t=this;this.withTransactionUpdate((function(){var n=[];t.processDescendants({processNode:function(t){e.options.shouldBeSelected.call(e,t.nodeModel)&&n.push(t.nodeModel)}}),e.getXSO().add(n)}))}},u.prototype.areAllChildrenSelected=function(){var e=!0;if(this.hasChildren())for(var t=this.getChildren(),n=0;n<t.length&&e;n++)!1===t[n].isSelected()&&(e=!1);return e},u.prototype.areAllChildrenUnselected=function(){var e=!0;if(this.hasChildren())for(var t=this.getChildren(),n=0;n<t.length&&e;n++)!0===t[n].isSelected()&&(e=!1);return e},u.prototype.unselectAll=function(e){let t=e&&e.treeDocument?e.treeDocument:void 0;this.withTransactionUpdate((function(){this.processDescendants({processNode:function(t){t.nodeModel.unselect(e)},treeDocument:t})}))},u.createTreeNodeDataModel=function(e,t){var n=new u,o=e.createDataModel(t);return n._setDataModel(o),n},u.prototype.getStructurePath=function(){return this.buildPath({buildPath:function(e,t,n){return e+t._getLocalID()+"/"}})},u.prototype.buildStringIdentifierArray=function(){var e=[],t=this.getParents(!0);if(t.length>1)for(var n=t.length-2;n>=0;n--){let o=t[n].stringIdentifier?t[n].stringIdentifier:void 0===t[n].options.label?"":t[n].options.label;e.push(o)}if(t.length>0){let t=this.stringIdentifier?this.stringIdentifier:void 0===this.options.label?"":this.options.label;e.push(t)}return e},u}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/DateFilter",["require","exports","DS/TreeModel/ConditionAndSetBaseFilter","DS/Core/WebUXComponents"],(function(e,t,n,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getFilterByValuesId=function(){return"dateSet"},t.prototype.getFilterByConditionId=function(){return"dateWithCondition"},t}(n);return o.addClass(i,"datefilter"),i}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/DateSetFilter",["require","exports","DS/TreeModel/SetFilter","DS/Utilities/DateUtils","DS/Core/WebUXComponents"],(function(e,t,n,o,i){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._areEquals=function(e,t){var n=o.convertToDate(e),i=o.convertToDate(t);return o.areDatesEqual(n,i,"day")},t}(n);return i.addClass(r,"dateSetfilter"),r}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/StringStdExpFilter",["require","exports","DS/TreeModel/StringRegExpFilter","DS/Core/WebUXComponents"],(function(e,t,n,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isConditionMatched=function(t,n){var o=Object.assign({},t,{filter:t.filter?t.filter.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):void 0});return e.prototype.isConditionMatched.call(this,o,n)},t}(n);return o.addClass(i,"stringstdexpfilter"),i})),define("DS/TreeModel/TreeNodeModelProxy",["DS/TreeModel/TreeNodeModel","DS/Utilities/Array"],(function(e,t){"use strict";function n(t){e.call(this,t)}var o;function i(t){var o,i=this.getTreeDocument();if(i&&i.options&&(o=i.options.proxy),void 0!==o){o.options;var r=n[o.type];if(r){var s=r[t];if(s)return s.call(this)}}return e.prototype[t].call(this)}function r(t){var o,i=this.getTreeDocument();if(i&&i.options&&(o=i.options.proxy),void 0!==o){var r=o.options,s=n[o.type];if(s){var a=s[t];if(a)return a.call(this,r)}}return e.prototype[t].call(this)}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.setCurrentContext=function(e){e&&(o=e.document)},n.prototype.isRoot=function(){return i.call(this,"isRoot")},n.prototype._isTrueRoot=function(){return r.call(this,"_isTrueRoot")},n.prototype.getTreeDocument=function(){if(o)return o;if(this._treeDocument)return this._treeDocument;var e=this.getParent();return null!=e?e.getTreeDocument():void 0},n.prototype.addChild=function(t,n){var o;if(t instanceof Array)o=this._loadModel(t,this);else{if(t instanceof e){var i=t.getParent();i&&i.removeChild(t)}o=this._loadModel([t],this,n)}return o},n.prototype.getNodeDepth=function(){return i.call(this,"getNodeDepth")},n.prototype.getParents=function(e){for(var t=this,n=[];t;)!(t=t.getParent())||!e&&t._isTrueRoot()||n.push(t),t&&t._isTrueRoot()&&(t=void 0);return n},n.SUBSET={isRoot:function(){return this.getParent()._isTrueRoot()},_isTrueRoot:function(e){return this===e.target},getNodeDepth:function(){return this.getParents().length}},n.FLATTEN={getNodeDepth:function(){return 0},getChildren:function(){return this._isTrueRoot()?this.getAllDescendants():[]}},n}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/DateWithConditionFilter",["require","exports","DS/TreeModel/ConditionBaseFilter","DS/Utilities/DateUtils","DS/Core/WebUXComponents"],(function(e,t,n,o,i){"use strict";var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isConditionEmpty=function(e){return!e||(Array.isArray(e.filter)&&"range"===e.type?void 0===e.filter[0]||void 0===e.filter[1]:"empty"!==e.type&&"notEmpty"!==e.type&&(void 0===e.filter||null===e.filter||""===e.filter))},t.prototype.isConditionMatched=function(e,t){if(this.isConditionEmpty(e))return!0;switch(t=o.convertToDate(t),e.type){case"range":return!!(Array.isArray(e.filter)&&e.filter.length>=2&&e.filter[0]instanceof Date&&e.filter[1]instanceof Date)&&o.isDateInBetween(t,e.filter[0],e.filter[1],"day");case"equal":return o.areDatesEqual(t,e.filter,"day");case"notEqual":return!o.areDatesEqual(t,e.filter,"day");case"lessThan":return-1===o.compare(t,e.filter,"day");case"lessThanOrEqual":return-1===(n=o.compare(t,e.filter,"day"))||0===n;case"greaterThan":return 1===o.compare(t,e.filter,"day");case"greaterThanOrEqual":var n;return 1===(n=o.compare(t,e.filter,"day"))||0===n;case"empty":return""===t||null==t;case"notEmpty":return!(""===t||null==t);default:return!0}},t}(n);return i.addClass(r,"dateWithConditionFilter"),r}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/StringFilter",["require","exports","DS/TreeModel/ConditionAndSetBaseFilter","DS/Core/WebUXComponents"],(function(e,t,n,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getFilterByConditionId=function(){return this.filterOptions&&this.filterOptions.allowRegexp?"stringRegexp":"stringStdexp"},t}(n);return o.addClass(i,"stringfilter"),i}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/NumberWithConditionFilter",["require","exports","DS/TreeModel/ConditionBaseFilter","DS/Core/WebUXComponents"],(function(e,t,n,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isConditionEmpty=function(e){return!e||(Array.isArray(e.filter)&&"range"===e.type?void 0===e.filter[0]||void 0===e.filter[1]:"empty"!==e.type&&"notEmpty"!==e.type&&(void 0===e.filter||null===e.filter||""===e.filter))},t.prototype.isConditionMatched=function(e,t){if(this.isConditionEmpty(e))return!0;switch(e.type){case"range":return t>=e.filter[0]&&t<=e.filter[1];case"equal":return t===e.filter;case"notEqual":return t!==e.filter;case"lessThan":return t<e.filter;case"lessThanOrEqual":return t<=e.filter;case"greaterThan":return t>e.filter;case"greaterThanOrEqual":return t>=e.filter;case"empty":return""===t||null==t;case"notEmpty":return!(""===t||null==t);default:return!0}},t}(n);return o.addClass(i,"numberWithConditionFilter"),i}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/NumberFilter",["require","exports","DS/TreeModel/ConditionAndSetBaseFilter","DS/Core/WebUXComponents"],(function(e,t,n,o){"use strict";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getFilterByConditionId=function(){return"numberWithCondition"},t}(n);return o.addClass(i,"numberfilter"),i}));__extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();define("DS/TreeModel/FilterManager",["require","exports","DS/Core/BaseComponent","DS/CoreEvents/ModelEvents","DS/TreeModel/SetFilter","DS/TreeModel/StringRegExpFilter","DS/TreeModel/StringStdExpFilter","DS/TreeModel/StringFilter","DS/TreeModel/NumberFilter","DS/TreeModel/NumberWithConditionFilter","DS/TreeModel/DateFilter","DS/TreeModel/DateSetFilter","DS/TreeModel/DateWithConditionFilter","DS/Core/WebUXComponents"],(function(e,t,n,o,i,r,s,a,l,d,p,u,h,c){"use strict";var f=function(e,t,n){var o=0,i=this._listOfFilters[e];if(void 0!==i){if(i.filterId===t.filterId)return i.filterOptions=t.filterOptions,i.filterModel=t.filterModel,n&&this._keepDefaultFilterModelFlag||(i.defaultFilterModel=t.filterModel),3;i.destroy(),this._listOfFilters[e]=void 0,delete this._listOfFilters[e],o=1}this.filterModel[e]=t;var r=this.FILTERS_MAP[t.filterId];return r?(this._listOfFilters[e]=new r({filterManager:this,propertyId:e,filterModel:t.filterModel,defaultFilterModel:void 0,filterId:t.filterId,filterOptions:t.filterOptions}),this._keepDefaultFilterModelFlag||(this._listOfFilters[e].defaultFilterModel=t.filterModel),1+o):(console.log("No filter has been registered for id ",t.filterId),0)};function _(e){this._keepDefaultFilterModelFlag++;var t=e();return this._keepDefaultFilterModelFlag--,t}var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{model:{defaultValue:void 0,type:"object",readOnly:!0},filterModel:{defaultValue:{},type:"object"}}},enumerable:!1,configurable:!0}),t.prototype.registerFilter=function(e,t){this.FILTERS_MAP[e]=t},t.prototype.getFilterClassName=function(e){return this.FILTERS_MAP[e]},t.prototype.setPropertyFilterModel=function(e,t,n){var o=this;0===(n&&(n.isUserInteraction||n.keepDefaultFilterModel)?_.call(this,(function(){return f.call(o,e,t,n)})):f.call(this,e,t,n))&&(this.filterModel[e]=void 0,delete this.filterModel[e],this.publish("filterModelChange",{propertyId:e,filter:void 0}))},t.prototype.resetPropertyFilterModel=function(e){var t=this._listOfFilters[e];t&&t.reset()},t.prototype.reapplyPropertyFilterModel=function(e){var t=this._listOfFilters[e];void 0!==t&&t._applyFilterModel()},t.prototype.subscribe=function(e,t){return this._modelEvents.subscribe({event:e},t)},t.prototype.unsubscribe=function(e){return this._modelEvents.unsubscribe(e)},t.prototype.publish=function(e,t){0===this._preventPublishEvent&&this._modelEvents.publish({event:e,data:t,context:this})},t.prototype.isDataFiltered=function(e){for(var t in this._listOfFilters)if(this._listOfFilters[t].isDataFiltered(e))return!0;return!1},t.prototype.getFilters=function(){return this._listOfFilters},t.prototype._build=function(){this.FILTERS_MAP={set:i,dateSet:u,string:a,stringStdexp:s,stringRegexp:r,number:l,numberWithCondition:d,date:p,dateWithCondition:h},this._listOfFilters={},this._modelEvents=new o,this._preventPublishEvent=0,this._keepDefaultFilterModelFlag=0},t.prototype.setFilterModel=function(e,t){var n=this;t&&t.keepDefaultFilterModel?_.call(this,(function(){n.filterModel=e})):this.filterModel=e},t.prototype._applyFilterModel=function(e,t){var n=this,o=Object.keys(this._listOfFilters),i=Object.keys(this.filterModel);this._preventPublishEvent++,i.forEach((function(e){n._listOfFilters[e]&&(n._listOfFilters[e].filterId===n.filterModel[e].filterId&&n._listOfFilters[e].filterModelsAreEqual(n._listOfFilters[e].filterModel,n.filterModel[e].filterModel)||n._listOfFilters[e]._resetFilterCpt())})),i.forEach((function(e){0===f.call(n,e,n.filterModel[e],t)&&(n.filterModel[e]=void 0,delete n.filterModel[e]);var i=o.indexOf(e);-1!==i&&o.splice(i,1)})),o.forEach((function(e){n._listOfFilters[e].destroy(),delete n._listOfFilters[e]})),this._preventPublishEvent--,this.publish("filterModelChange")},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("filterModel")&&this._applyFilterModel(t.filterModel)},t}(n);return c.addClass(g,"filtermanager"),g})),define("DS/TreeModel/TreeDocument",["UWA/Core","UWA/Class","DS/TreeModel/TreeNodeModel","DS/Selection/XSO","DS/CoreEvents/ModelEvents","DS/Utilities/Array","DS/Utilities/Data","DS/TreeModel/FilterManager"],(function(e,t,n,o,i,r,s,a){"use strict";return t.extend({defaultOptions:{dataModelSet:null,useAsyncPreExpand:!1,shouldBeSelected:function(e){return!0},shouldSelectDescendants:function(e){return!1},shouldUnselectDescendants:function(e){return!1},shouldSelectParents:function(e){return!1},shouldUnselectParents:function(e){return!1},shouldBeEditable:function(e){return!0},shouldAcceptDrag:function(e){return!0},shouldAcceptDrop:function(e){return!0},insert:function(e,t,n){this.withTransactionUpdate((function(){t.insertBefore(e,n)}),this)},nodeModelClass:n},init:function(t){this._parent(t),this._isExpandingCounter=0,this.options=e.extend(e.clone(this.defaultOptions),t),this._modelEvents=new i;let n=function(e,t){return e._getID()===t._getID()},r=function(e){return e._getID()};this._xso=new o({getElementID:r,useUniqueID:!0,areEquals:n}),this._pxso=new o({getElementID:r,useUniqueID:!0,areEquals:n}),this._listeners=[],this._XSOEventListeners=[],this._PXSOEventListeners=[],this._numberOfNodesInDocument=0,this._useChangeTransactionMode=!1,this._pendingChangesCount=0,this._createTrueRoot(),!0===this.options.useAsyncPreExpand&&this.onPreExpand((function(e){e.target.preExpandDone()}))},getModelEvents:function(){return this._trueRoot?this._trueRoot._modelEvents:null},_bindEventOnDocument:function(e,t){this._listeners.push(this._trueRoot._modelEvents.subscribe({event:e},t))},_bindEventOnXSO:function(e,t){this._XSOEventListeners.push(this.getXSO()[e](t))},_bindEventOnPXSO:function(e,t){this._PXSOEventListeners.push(this.getPXSO()[e](t))},_isNodeVisibleCache:function(e){this.__visibilityMap__||(this.__visibilityMap__=new Map);let t=this.__visibilityMap__.get(e);return void 0===t&&(t=e._isVisible(this.__visibilityMap__)),t},_cleanVisibilityCache:function(){this.__visibilityMap__=void 0},_cleanBindings:function(){let e=this;this._listeners.forEach((function(t){e._trueRoot._modelEvents.unsubscribe(t)})),this._listeners=[];let t=this.getXSO();this._XSOEventListeners.forEach((function(e){t.unsubscribe(e)})),this._XSOEventListeners=[];let n=this.getPXSO();this._PXSOEventListeners.forEach((function(e){n.unsubscribe(e)})),this._PXSOEventListeners=[]},destroy:function(){const e=this._getTrueRoot();if(e){e._modelEvents.publish({event:"preDestroyDocument"}),this._cleanBindings(),e._treeDocument=null;let t=e.getChildren();t=Array.isArray(t)?[...t]:[],e.empty();for(const e of t)e.destroy();e.destroy()}this._trueRoot=null,this._xso=null,this._pxso=null},isDestroyed:function(){return null===this._trueRoot},isInTransaction:function(){return this._updateCnt>0},_observeEvents:function(){let e=this;function t(t){e._isExpandingCounter--,0===e._isExpandingCounter&&e._requireRowsIndexing()}this._cleanBindings(),this._updateCnt=0,this._bindEventOnDocument("active",(function(t){e._activeNode&&e._activeNode.inactive(),e._activeNode=t.target})),this._bindEventOnDocument("addChild",(function(t){e._requireRowsIndexing(),e._numberOfNodesInDocument++})),this._bindEventOnDocument("removeChild",(function(t){e._requireRowsIndexing(),e._numberOfNodesInDocument--})),this._bindEventOnDocument("removeChildren",(function(t){let n=t.data,o=n?n.length:0;e._requireRowsIndexing(),e._numberOfNodesInDocument-=o})),this._bindEventOnDocument("hide",(function(t){e._requireRowsIndexing()})),this._bindEventOnDocument("show",(function(t){e._requireRowsIndexing()})),this._bindEventOnDocument("preRemoveChild",(function(t){let n=t.data.nodeModel;n.__keepSelection||(n.unselect({treeDocument:e}),n.unselectAll({treeDocument:e}))})),this._bindEventOnDocument("preRemoveChildren",(function(t){let n=t.data;for(let t=0;t<n;t++){let o=n[t];o.__keepSelection||(o.unselect({treeDocument:e}),o.unselectAll({treeDocument:e}))}})),this._bindEventOnDocument("preExpandAll",(function(t){e._isExpandingCounter++})),this._bindEventOnDocument("documentPreExpandAll",(function(t){e._isExpandingCounter++})),this._bindEventOnDocument("preExpandPrivate",(function(t){e._isExpandingCounter++})),this._bindEventOnDocument("postExpandAll",t),this._bindEventOnDocument("documentPostExpandAll",t),this._bindEventOnDocument("postExpandPrivate",t),this._bindEventOnDocument("collapse",(function(){e._requireRowsIndexing()})),this._bindEventOnDocument("postCollapse",(function(){e._requireRowsIndexing()})),this._bindEventOnDocument("postCollapseAll",(function(){e._requireRowsIndexing()})),this._bindEventOnDocument("sortChildren",(function(){e._requireRowsIndexing()})),this._bindEventOnDocument("filter",(function(){e._requireRowsIndexing()})),this._bindEventOnDocument("prepareUpdate",(function(){e._updateCnt++})),this._bindEventOnDocument("pushUpdatePrivate",(function(t){if(e._updateCnt<=0?console.warn("A call has been made on pushUpdate without a previous call to prepareUpdate"):(e._updatePendingType||(e._updatePendingType=0),t.options&&t.options.updateType&&(e._updatePendingType=e._updatePendingType|t.options.updateType)),e._updateCnt-1==0){e._updatePendingType&WUXModelUpdateTypes.Expand&&t.data&&t.data.nodeModel&&!1===t.data.nodeModel.isExpanded()&&!0===t.data.nodeModel.hasChildren()&&(t.data.nodeModel.processDescendants({treeDocument:this,onlyVisibleNodes:!1,processNode:function(e){e&&e.nodeModel&&(e.nodeModel._rowID=null)}}),e._requireRowsIndexing()),!0===e.__requireRowsIndexing&&e._indexRowIndexes(),e._getTrueRoot()._modelEvents.publish({event:"modelUpdate",context:e,options:{updateType:e._updatePendingType},data:t.data}),e._updatePendingType=0}})),this._bindEventOnDocument("pushUpdate",(function(t){e._updateCnt--,e._updateCnt<0&&console.warn("A call has been made on pushUpdate without a previous call to prepareUpdate"),e._updateCnt}));let n=function(t,n){e.prepareUpdate(),t.forEach((function(e){e._isSelected=n,e._modelEvents.publish({event:n?"select":"unselect",data:e._getNodeInfos(),context:e}),e.isSelectionChangeFromUI()&&e.selectionChangeIsNotFromUI()})),e.pushUpdate({updateType:WUXModelUpdateTypes.Selection})};this._bindEventOnXSO("onPostAdd",(function(e){n(e,!0)})),this._bindEventOnXSO("onPostRemove",(function(e){n(e,!1)}));let o=function(e,t){e.forEach((function(e){e._isPreSelected=t,e._modelEvents.publish({event:t?"preselect":"unpreselect",data:e._getNodeInfos(),context:e})}))};this._bindEventOnPXSO("onPostAdd",(function(e){o(e,!0)})),this._bindEventOnPXSO("onPreRemove",(function(e){o(e,!1)})),this._bindEventOnPXSO("onPostRemove",(function(e){o(e,!1)})),this._bindEventOnXSO("onPreEmpty",(function(t){e.prepareUpdate(),t.forEach((function(e){e._isSelected=!1}))})),this._bindEventOnXSO("onEmpty",(function(t){e.pushUpdate({updateType:WUXModelUpdateTypes.Selection})}))},_requireRowsIndexing:function(){this.__requireRowsIndexing=!0,this._cleanVisibilityCache()},_indexRowIndexes:function(){let e=-1;this.processDescendants({onlyVisibleNodes:!0,processNode:function(t){let n=t.nodeModel;n.hasRowID()&&(void 0!==n.options.multipleNodesRep?e+=n.options.multipleNodesRep:e++,n._rowID=e)}}),this.__requireRowsIndexing=!1},getXSO:function(){return this._xso},getPXSO:function(){return this._pxso},_createTrueRoot:function(e){if(void 0===e){let e=this.options.nodeModelClass||n;this._trueRoot=new e({_isTrueRoot:!0,label:void 0,useAsyncPreExpand:this.options.useAsyncPreExpand})}else this._trueRoot=e,this._trueRoot.options.label="trueroot",this._trueRoot.options._isTrueRoot=!0,this._trueRoot.options.useAsyncPreExpand=e.options.useAsyncPreExpand,this._trueRoot._rowID=-1;this._trueRoot._treeDocument=this,this.getModelEvents()._addParent(this._modelEvents),this._observeEvents()},usesAsyncDndCallbacks:function(){return!1},_shouldAcceptDrop:function(e){return this.options.shouldAcceptDrop.call(e.target,e.target._getNodeInfos())},subscribe:function(e,t){return this.getModelEvents().subscribe(e,t)},unsubscribe:function(e){return this.getModelEvents().unsubscribe(e)},addEventListener:function(e,t){return this.getModelEvents().addEventListener(e,t)},removeEventListener:function(e){this.getModelEvents().unsubscribe(e)},addModelEventListener:function(e,t){return this.getModelEvents().addEventListener(e,t)},loadModel:function(e,t,n){return void 0===t&&(t=this._trueRoot),this._trueRoot._treeDocument=this,this._trueRoot._loadModel(e,t,n)},_getTrueRoot:function(){return this._trueRoot},_getRealTrueRoot:function(){return this._trueRoot},addRoot:function(e,t){return this._getTrueRoot().addChild(e,t,{treeDocument:this})},addChild:function(e,t){return this._getTrueRoot().addChild(e,t,{treeDocument:this})},insertBefore:function(e,t){return this._getTrueRoot().insertBefore(e,t)},removeRoot:function(e){return this._getTrueRoot().removeChild(e)},removeRoots:function(){let e=[],t=this;return this.withTransactionUpdate((function(){let n=t.getRoots();for(let t=n.length-1;t>=0;t--)e.unshift(n[t]),n[t].remove()})),this.getModelEvents().publish({event:"documentRemoveRoots",data:e}),e},expandNLevels:function(e){let t=this._getTrueRoot().getChildren();t&&(this.prepareUpdate(),r.optimizedForEach(t,(function(t,n){t.expandNLevels(e)})),this.pushUpdate({updateType:WUXModelUpdateTypes.Expand}))},expandAll:function(){let e=this._getTrueRoot(),t=e.getChildren();if(t){this.prepareUpdate(),e._modelEvents.publish({event:"documentPreExpandAll",data:e._getNodeInfos(),context:e});let n=0,o=e._endOfSubExpand;e._endOfSubExpand=function(i){o.call(e,i),0===this.__expandAllCounter&&(n++,n===t.length&&e._modelEvents.publish({event:"documentPostExpandAll",data:e._getNodeInfos(),context:e}))};let i=this;r.optimizedForEach(t,(function(t,n){t._privateExpand({expandAll:!0,treeDocument:i},void 0,e)})),this.pushUpdate({updateType:WUXModelUpdateTypes.Expand})}},collapseAll:function(){let e=this._getTrueRoot(),t=this._getTrueRoot().getChildren();t&&(this.prepareUpdate(),e._modelEvents.publish({event:"documentPreCollapseAll",data:e._getNodeInfos(),context:e}),r.optimizedForEach(t,(function(e,t){e.collapseAll()})),e._modelEvents.publish({event:"documentPostCollapseAll",data:e._getNodeInfos(),context:e}),this.pushUpdate({updateType:WUXModelUpdateTypes.Expand}))},getAllDescendants:function(e){let t=this._getTrueRoot();if(t)return t.getAllDescendants(e)},_dump:function(e){return this._getTrueRoot()._dump(e)},dump:function(e){return this._dump(e)},getNthRoot:function(e){if(this._getTrueRoot().getChildren())return this._getTrueRoot().getChildren()[e]},getRoots:function(){return this.getChildren()},buildPath:function(e){return this._getTrueRoot().buildPath(e)},getChildren:function(){return this._getTrueRoot().getChildren()||[]},computeNodeFromLabels:function(e){if(!e||0===e.length)return null;let t=[],n=this._getTrueRoot();return e.find((function(e){let o=n.getChildren();return!o||(n=o.find((function(t){return t.getLabel()===e})),!n)||(t.push(n),!1)})),t.length>0?t[t.length-1]:null},prepareUpdate:function(){const e=this._getRealTrueRoot();if(e)return e.prepareUpdate()},pushUpdate:function(e){const t=this._getRealTrueRoot();if(t)return t.pushUpdate(e)},withTransactionUpdate:function(e){return this._getRealTrueRoot().withTransactionUpdate(e)},executeWithoutEvents:function(e){if(e){let t=this.getModelEvents();t.disableEvents(),e.call(this),t.enableEvents()}},getSelectedNodes:function(){return this._xso.get()},processSelectedNodes:function(t){t=e.extend({processNode:function(e){},onComplete:function(){}},t),this.prepareUpdate();let n=this;s.forEach(this.getXSO().get(),(function(e){void 0!==t.processNode&&t.processNode.call(e,e._getNodeInfos())}),50,(function(){t.onComplete(),n.pushUpdate()}))},processDescendants:function(e){e||(e={}),e.treeDocument=this,this._getTrueRoot().processDescendants(e)},getNumberOfVisibleDescendants:function(){let e=0;return this.processDescendants({onlyVisibleNodes:!0,processNode:function(){e++}}),e},selectAll:function(){this._getTrueRoot().selectAll()},unselectAll:function(){this.getXSO().empty()},isEveryNodeSelected:function(){return this.getXSO().get().length&&this._numberOfNodesInDocument===this.getXSO().get().length},isExpanding:function(){return this._isExpandingCounter>0},isEmptying:function(){return!0===this._isEmptying},getExpandingCounter:function(){return this._isExpandingCounter},empty:function(){this._isEmptying=!0,this.unselectAll(),this._getTrueRoot().empty(),this._numberOfNodesInDocument=0,this._isEmptying=!1},setUseChangeTransactionMode:function(e){this._useChangeTransactionMode=e},getUseChangeTransactionMode:function(){return this._useChangeTransactionMode},cancelChanges:function(){let e=this;this.withTransactionUpdate((function(){e._getTrueRoot().cancelChanges(!0)})),this._managePendingChanges("reset")},acceptChanges:function(){let e=this;this.withTransactionUpdate((function(){return e._getTrueRoot().acceptChanges(!0)})),this._managePendingChanges("reset")},hasPendingChanges:function(){return this._pendingChangesCount>0},_managePendingChanges:function(e){let t=this._pendingChangesCount;this._pendingChangesCount="reset"!==e?this._pendingChangesCount+("add"===e?1:-1):0,(0===t&&0!==this._pendingChangesCount||0!==t&&0===this._pendingChangesCount)&&this._getTrueRoot()._modelEvents.publish({event:"pendingStateChange"})},resetToReferenceValues:function(){let e=this;this.withTransactionUpdate((function(){e.processDescendants({treeTraversalOrder:"postOrder",processNode:function(e){e.nodeModel.resetToReferenceValues()}})}))},setValuesAsReference:function(){let e=this;this.withTransactionUpdate((function(){e.processDescendants({treeTraversalOrder:"postOrder",processNode:function(e){e.nodeModel.setValuesAsReference()}})}))},onNodeModelUpdate:function(e){return this.getModelEvents().subscribe({event:"nodeModelUpdate"},e)},onPreExpand:function(e){return this.getModelEvents().unsubscribeAll({event:"preExpand"}),this.getModelEvents().subscribe({event:"preExpand"},e)},onUpdate:function(e){return this.getModelEvents().subscribe({event:"modelUpdate"},e)},onPreExpandAll:function(e){return this.getModelEvents().subscribe({event:"preExpandAll"},e)},onPostExpand:function(e){return this.getModelEvents().subscribe({event:"postExpand"},e)},onPreCollapse:function(e){return this.getModelEvents().subscribe({event:"preCollapse"},e)},onPostCollapse:function(e){return this.getModelEvents().subscribe({event:"postCollapse"},e)},search:function(e){return this._getTrueRoot().search(e)},groupRoots:async function(e){await this._getTrueRoot().groupChildren(e),this.getModelEvents().publish({event:"groupNodes",data:[this._getTrueRoot()._getNodeInfos()],context:this})},ungroupRoots:function(){this._getTrueRoot().ungroupChildren()},groupNodes:async function(e,t,o){const i=[];let r;if("function"!=typeof e&&(r=Array.isArray(e)?e:[e],r.sort(((e,t)=>t-e))),r&&1===r.length&&0===r[0])await this._getTrueRoot().groupChildren(t),i.push(this._getTrueRoot()._getNodeInfos());else{if(t&&t.mapGroupingKeys&&t.mapGroupingKeys instanceof Function){const e=t.mapGroupingKeys,n={},o=async t=>{const o={},i={};for(let e in t)if(o[e]={},void 0!==n[e]){const r=[];for(let i of t[e])void 0===n[e][i]?r.push(i):o[e][i]=n[e][i];r.length>0&&(i[e]=r)}else i[e]=t[e];if(Object.keys(i).length>0){const t=await e(i);for(let e in i)void 0===n[e]&&(n[e]={}),i[e].forEach((i=>{n[e][i]=t[e][i],o[e][i]=t[e][i]}))}return o};t.mapGroupingKeys=o}const s=async t=>{if(r){const e=r.indexOf(t);return{shouldGroup:1===r.length&&-1===r[0]||-1!==e,maxDepthReached:0===e}}return{shouldGroup:await e.call(this,t),maxDepthReached:o&&o.maxDepth===t}},a=async(e,o)=>{const r=e.getNodeSource()===n.NODE_SOURCE.GROUPING;let l={shouldGroup:!1,maxDepthReached:!1};if(!r&&(l=await s(o),l.maxDepthReached))return void(l.shouldGroup&&(await e.groupChildren(t),i.push(e._getNodeInfos())));const d=e.getChildren();if(d){for(let e=0;e<d.length;e++)await a(d[e],o+(r?0:1));!r&&l.shouldGroup&&(await e.groupChildren(t),i.push(e._getNodeInfos()))}};await a(this._getTrueRoot(),0)}this.getModelEvents().publish({event:"groupNodes",data:i,context:this})},ungroupNodes:async function(e,t){const n=[];let o;if("function"!=typeof e&&(o=Array.isArray(e)?e:[e],o.sort(((e,t)=>e-t))),o&&1===o.length&&0===o[0])this._getTrueRoot().ungroupChildren(),n.push(this._getTrueRoot()._getNodeInfos());else{const i=async n=>{if(o){const e=o.indexOf(n);return{shouldGroup:1===o.length&&-1===o[0]||-1!==e,maxDepthReached:e===o.length-1}}return{shouldGroup:await e.call(this,n),maxDepthReached:t&&t.maxDepth===n}},r=async(e,t)=>{const o=await i(t);if(o.shouldGroup&&(e.ungroupChildren(),n.push(e._getNodeInfos())),o.maxDepthReached)return;const s=e.getChildren();if(s)for(let e=0;e<s.length;e++)await r(s[e],t+1)};await r(this._getTrueRoot(),0)}this.getModelEvents().publish({event:"groupNodes",data:n,context:this})},_createFilterManager:function(e){if(!this._filterManager){this._filterManager=new a({model:this,filterModel:e||{}});let t=this,n=this._getTrueRoot();this._filterManager.subscribe("filterModelChange",(function(e){t.processDescendants({processNode(e){e&&e.nodeModel&&e.nodeModel._updateExpanderState()}});let o=n._getNodeInfos();o.filter=e?e.filter:void 0,o.propertyId=e?e.propertyId:void 0,n._modelEvents.publish({event:"filter",data:o,context:n})})),n._modelEvents.publish({event:"filter",data:n._getNodeInfos(),context:n})}},setFilterModel:function(t,n){this._filterManager&&e.equals(this._filterManager.filterModel,t)||(this.prepareUpdate(),this._filterManager?this._filterManager.setFilterModel(t,n):this._createFilterManager(t),this.pushUpdate({updateType:WUXModelUpdateTypes.Filtering}))},reapplyFilterModel:function(){if(!this._filterManager)return;this.prepareUpdate();let e={},t=this._filterManager.getFilters();if(t)for(let n in t)t[n]&&(e[n]=t[n].defaultFilterModel);let n=this._filterManager.filterModel;this._filterManager.filterModel={},this._filterManager.filterModel=n;let o=this._filterManager.getFilters();if(o)for(let t in o)e.hasOwnProperty(t)&&(o[t].defaultFilterModel=e[t]);this.pushUpdate({updateType:WUXModelUpdateTypes.Filtering})},getFilterManager:function(){return this._filterManager||this._createFilterManager(),this._filterManager},flattenTreeDocument:function(e){let t=[],n=this,o=!1,i=0;return setTimeout((function(){let r=function(e,t){return void 0===t&&(t=[]),(e.isVisible()||e._isTrueRoot())&&(e._isTrueRoot()||t.push(e),e.hasChildren()&&e.getChildren().forEach((function(e){r(e,t)}))),t},s=function(){0===i&&(o&&(t.length=0,r(n._getTrueRoot(),t),o=!1),e&&e.onUpdate&&e.onUpdate({flattenedTreeDocument:t}))};o=!0,s(),n.addEventListener("prepareUpdate",(function(){i++,s()})),n.addEventListener("pushUpdate",(function(){i>0&&(i--,s())})),["addChild","removeChild","hide","show","expand","collapse"].forEach((function(e){n.addEventListener(e,(function(){o=!0,s()}))}))})),t},getNodeFromStructurePath:function(e){let t,n;if(Array.isArray(e)?n=e:"string"==typeof e&&(n=e.split("/"),n.pop()),Array.isArray(n)&&n.length){t=this._getTrueRoot();for(let e=0;e<n.length&&t;e++){let o=n[e],i=t.getChildren()?t.getChildren():[],r=-1;t=void 0;for(let e=0;e<i.length;e++)if(void 0===i[e].options.multipleNodesRep?r++:r+=i[e].options.multipleNodesRep,r==o){if(t=void 0===i[e].options.multipleNodesRep||i[e].isExpanded()?i[e]:void 0,void 0===t)return t;break}}}return t},getNodesFromIdentifierStringArray:function(e){let t={};if(!e)return t;t.nbNotFoundItems=e.length,t.nodeModelArray=[];let n=this._getTrueRoot();for(const o of e){let e=n.getChildren();if(!e)return t;let i=!1;for(const r of e){if((r.stringIdentifier?r.stringIdentifier:r.options.label)===o){i=!0,t.nbNotFoundItems--,t.nodeModelArray.push(r),n=r;break}}if(!i)return t}return t}})})),define("DS/TreeModel/TreeDocumentProxy",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModelProxy"],(function(e,t){"use strict";var n=e.extend({defaultOptions:{proxy:void 0,nodeModelClass:t,baseDocument:void 0},init:function(e){this._parent(e),e&&e.baseDocument&&this._createTrueRoot(e.baseDocument._trueRoot)},_getTrueRoot:function(){if(void 0!==this.options.proxy){var t=this.options.proxy,o=t.options,i=t.type,r=n[i];if(r&&r._getTrueRoot)return r._getTrueRoot.call(this,o)}return e.prototype._getTrueRoot.call(this)}});return n.SUBSET={_getTrueRoot:function(e){return e.target}},n}));