define("DS/E6WCommonUI/ToolbarUtil",["UWA/Core","DS/Tweakers/GeneratedToolbar","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i){"use strict";var n=function(e){return i.get(e)};const o="table",a="tile",s="largeTile",r="kanban",l="timeline";var d={tile:"fonticon fonticon-view-small-tile",largeTile:"fonticon fonticon-view-big-tile ",table:"fonticon fonticon-view-list",kanban:"fonticon fonticon-chart-kanban",timeline:"fonticon fonticon-chart-timeline",smallCards:"fonticon fonticon-view-small-tile",largeCards:"fonticon fonticon-view-big-tile ",taskTable:"fonticon fonticon-view-list"};const c={value:r,label:n("E6WCommonUI.Label.Kanban"),tooltip:n("E6WCommonUI.Label.Kanban"),icon:{iconName:d[r],fontIconFamily:1}},u={value:l,label:n("E6WCommonUI.Label.Timeline"),tooltip:n("E6WCommonUI.Label.Timeline"),icon:{iconName:d[l],fontIconFamily:1}},h={value:o,label:n("E6WCommonUI.Label.Table"),tooltip:n("E6WCommonUI.Label.Table"),icon:{iconName:d[o],fontIconFamily:1}},m={value:a,label:n("E6WCommonUI.Label.SmallTiles"),tooltip:n("E6WCommonUI.Label.SmallTiles"),icon:{iconName:d[a],fontIconFamily:1}},p={value:s,label:n("E6WCommonUI.Label.LargeTiles"),tooltip:n("E6WCommonUI.Label.LargeTiles"),icon:{iconName:d[s],fontIconFamily:1}},f={[r]:c,[o]:h,[l]:u,[a]:m,[s]:p},g={createViewSwitcher:function(i){let n=e.clone(i||{},!1);var o={entries:[{id:n.id,dataElements:{typeRepresentation:"layout",value:f[n.currentView],possibleValues:n.viewMenus,icon:{iconName:d[n.currentView],fontIconFamily:1}},onNodeUpdate:function(e){let t=e.getAttributeValue("data")?.hasOwnProperty("value")?e.getAttributeValue("data").value:e.getAttributeValue("data");t&&n.callback&&n.callback(t)}}]};let a=t.prototype.createTreeDocument(o);return new t({overflowManagement:"dropdown",direction:"horizontal",items:a})}};return g.KANBAN=r,g.TIMELINE=l,g.TILE=a,g.LARGE_TILE=s,g.TABLE=o,g.KANBAN_MODEL=c,g.TIMELINE_MODEL=u,g.TILE_MODEL=m,g.LARGE_TILE_MODEL=p,g.TABLE_MODEL=h,g})),define("DS/E6WCommonUI/WidgetUtils",["UWA/Core"],(function(e){"use strict";String.prototype.htmlEncode=function(){var e=this.toString();return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#x27;")).replace(/\//g,"&#x2F;")).replace(/`/g,"&#x60;")).replace(/=/g,"&#x3D;")},String.prototype.htmlDecode=function(){var e=this.toString();return(e=(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")).replace(/&#x60;/g,"`")).replace(/&#x3D;/g,"=")).hexDecode()},String.prototype.hexDecode=function(){for(var e=this.toString(),t=e.split("&#x");t.length;){var i,n,o="0x"+t.pop().split(";")[0];!isNaN(parseFloat(o))&&isFinite(o)&&(i=String.fromCharCode(o),n=new RegExp("&#x"+o.substring(2)+";","g"),e=e.replace(n,i))}return e};var t={doNotOverrideDropEffect:!1,makeHTML5Date:function(t){if(!t)return"";var i;if(t instanceof Date)i=t;else{var n=t;e.is(t,"string")&&(n=parseInt(t,10)),isNaN(n)||(i=new Date(n))}if(i){var o=i.getDate();o=o<10?"0"+o:o;var a=i.getMonth()+1;return a=a<10?"0"+a:a,i.getFullYear()+"-"+a+"-"+o}return""},topWindowcache:null,getTopWindow:function(e){if(this.topWindowcache)return this.topWindowcache;for(var t=window;t&&t.parent!==t;)try{if(t.parent.test="temp","temp"!==t.parent.test)break;t=t.parent}catch(e){break}if(e)try{for(;t.opener&&t.opener.top&&(t.opener.top.test="temp2","temp2"===t.opener.top.test);)t=t.opener.top}catch(e){}return this.topWindowcache=t,this.topWindowcache},addDragDropListeners:function(){document.addEventListener("dragover",(function(e){(e=e||event).preventDefault(),t.doNotOverrideDropEffect&&(e.dataTransfer.dropEffect="copy"),t.doNotOverrideDropEffect=!1}),!1),document.addEventListener("drop",(function(e){(e=e||event).preventDefault()}),!1)},getSessionId:function(){return"session-"+widget.id+".widgetViewModeBeforePreview"},restoreWidgetViewModeBeforePreview:function(){var e=sessionStorage.getItem(this.getSessionId());e&&(widget.dispatchEvent("onViewRequest",{type:e}),sessionStorage.removeItem(this.getSessionId()))}};return t})),define("DS/E6WCommonUI/PlatformManager",["UWA/Core","UWA/Array","UWA/Class/Events","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/PlatformAPI/PlatformAPI","UWA/Utils"],(function(e,t,i,n,o,a){"use strict";function s(){return void 0!==window.widget}let r;require(["DS/Utilities/LanguageUtils"],(function(e){try{r=e}catch(e){console.log(e)}}));var l=i.extend({_serviceData:[],_rolesData:[],initPlatformServiceData:function(e){e=e||{},this.isServiceDataLoaded()?e.onComplete&&e.onComplete():n.getPlatformServices({onComplete:function(t){l._instance.storePlatformServiceData(t),e.tenant&&l._instance.setTenant(e.tenant),e.onComplete&&e.onComplete()}})},filterCollabSpaces:function(e,t){n.getAppInfo({appId:window.widget.getValue("appId"),onComplete:function(i){var n=[...e]||[],o=i&&i.platforms&&i.platforms.map((e=>e.id));n=n.filter((e=>o.includes(e.platformId))),t(n)}})},isXppViewer:function(){return Boolean(this._isXppViewer)},setXppViewer:function(e){this._isXppViewer=e},storePlatformServiceData:function(e){this._serviceData=e,this.dispatchEvent("serviceDataLoaded")},isServiceDataLoaded:function(){return 0!==this._serviceData.length},setServiceUrl:function(e,t){const i=this.getTenantServiceData();i&&(i[e]=t)},getServiceUrl:function(e,t){var i=this.getTenantServiceData();if(!i||!i[e]){if(t)return!1;throw new Error("Service data not loaded")}return i[e]},getServiceUrlWithCallback:function(e,t){n.getServiceUrl({serviceName:e,platformId:this.getTenant(),onComplete:t})},getTenant:function(){return s()?widget.getValue("x3dPlatformId"):this._tenant},setTenant:function(e){s()?widget.setValue("x3dPlatformId",e):this._tenant=e},isOnPremise:function(){return"OnPremise"===this.getTenant()},isInternalProduction:function(){return"DSEXT001"===this.getTenant()||widget&&"DSEXT001"===widget.getValue("fakeInternalProd")},getTenantServiceData:function(e){var i=e||this.getTenant();return t.detect(this._serviceData,(function(e){return e.platformId===i}))},fetchRolesData:function(){n.getGrantedRoles((e=>this.setRolesData(e)))},setRolesData:function(e){this._rolesData=e,this.setXPPLicenseStatus(),this.dispatchEvent("rolesDataLoaded")},hasLoadedRolesData:function(){return this._rolesData.length>0},hasRole:function(t){if(this.hasLoadedRolesData()){var i=e.Array.detect(this._rolesData,(function(e){return"InternalDS"===e.id})),n=e.Array.detect(this._rolesData,(function(e){return e.id===t})),o=n&&-1!==n.platforms.indexOf(this.getTenant());return Boolean(i||o)}throw new Error("Fetching of Roles Data is not finished.")},hasSimulationRole:function(){var e=this;return["SPF","SPF-OC","MDO","MDO-OC","SPI","SPI-OC","SEI","SEI-OC"].some((function(t){return e.hasRole(t)}))},setAuthorized:function(e,t){this["_"+e+"Authorized"]=t},hasRiskRole:function(){return this.isAuthorized("DPM")||this.isAuthorized("RSK")},isXPPAuthorized:function(){return!!this.hasOwnProperty("_XPPAuthorized")&&(this._XPPAuthorized||(this._XPPAuthorized=this.hasRole("XPP")||this.hasRole("CTR")),this._XPPAuthorized)},isAuthorized:function(e){return this["_"+e+"Authorized"]||this.hasRole(e)},setXPPAuthorized:function(e){this._XPPAuthorized=e,this.setXPPLicenseStatus(),this.dispatchEvent("xppAuthorizedLoaded")},hasXPPAuthorizationChecked:function(){return this.hasOwnProperty("_XPPAuthorized")},setXPPLicenseStatus:function(){this.hasLoadedRolesData()&&this.hasXPPAuthorizationChecked()&&!this.isXPPAuthorized()&&(this._XPPLicenseOK=!1)},isXPPLicenseOK:function(){return!this.hasOwnProperty("_XPPLicenseOK")||this._XPPLicenseOK},clearCachedServiceData:function(){this._serviceData=[],this._rolesData=[]},hasAccess:function(e){try{return Boolean(this.getServiceUrl(e))}catch(e){return!1}},getDateFormatRegion:function(){return r?r.regionalFormatLanguage:widget.lang},getCurrentLanguage:function(){return widget.lang},getWeekNumber:function(e){if(void 0===e)return"";var t=new Date(e.valueOf()),i=(e.getDay()+6)%7;t.setDate(t.getDate()-i+3);var n=t.valueOf();return t.setMonth(0,1),4!==t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((n-t)/6048e5)},setContextUserUid:function(e){this._userUid=e,this.dispatchEvent("userUidSet")},getContextUserUid:function(){return this._userUid},getContextUser:function(){return window.enoviaServer.user},getContextUserName:function(){var e=o.getUser();return e.firstName+" "+e.lastName},setInvalidTenant:function(e){this._invalidTenant=e},getInvalidTenant:function(){return this._invalidTenant}});return l._instance=l._instance||new l,l._instance})),define("DS/E6WCommonUI/FileSaver",[],(function(){"use strict";var e=window;function t(e,t,i){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){o(n.response,t,i)},n.onerror=function(){console.error("could not download file")},n.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(i){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="download"in HTMLAnchorElement.prototype?function(o,a,s){var r=e.URL||e.webkitURL,l=document.createElement("a");a=a||o.name||"download",l.download=a,l.rel="noopener","string"==typeof o?(l.href=o,l.origin!==location.origin?i(l.href)?t(o,a,s):n(l,l.target="_blank"):n(l)):(l.href=r.createObjectURL(o),setTimeout((function(){r.revokeObjectURL(l.href)}),4e4),setTimeout((function(){n(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,a){if(o=o||e.name||"download","string"==typeof e)if(i(e))t(e,o,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){n(s)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,a),o)}:function(i,n,o,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof i)return t(i,n,o);var s="application/octet-stream"===i.type,r=/constructor/i.test(e.HTMLElement)||e.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&r)&&"object"==typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},d.readAsDataURL(i)}else{var c=e.URL||e.webkitURL,u=c.createObjectURL(i);a?a.location=u:location.href=u,a=null,setTimeout((function(){c.revokeObjectURL(u)}),4e4)}};return{saveAs:o}})),define("DS/E6WCommonUI/CompassUtil",["DS/i3DXCompassServices/i3DXCompassPubSub","DS/PlatformAPI/PlatformAPI"],(function(e,t){"use strict";return{openCompassWithModel:function(t,i){var n;(i&&i.transferObject||t.getTransferObject)&&(n=i&&i.transferObject||t.getTransferObject&&t.getTransferObject()),n&&(e.publish("setObject",n.data.items[0]),e.publish("setX3DContent",n))},publishOnPlatformAPI:function(e,i){i.getTransferObject&&t.publish(e,i.getTransferObject())}}})),define("DS/E6WCommonUI/NumberUtils",["UWA/Core"],(function(e){"use strict";return{digitsToASCII:function(e){return function(){var e=new RegExp("([0-9٠-٩۰-۹߀-߉๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９]|\ud801[\udca0-\udca9]|\ud804[\udcf0-\udcf9\uddd0-\uddd9\udef0-\udef9]|\ud805[\udc50-\udc59\udcd0-\udcd9\ude50-\ude59\udec0-\udec9\udf30-\udf39]|\ud806[\udce0-\udce9]|\ud807[\udc50-\udc59]|\ud81a[\ude60-\ude69]|\ud81a[\udf50-\udf59]|\ud83a[\udd50-\udd59])|([०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯෦-෯᥆-᥏]|\ud804[\udc66-\udc6f\udd36-\udd3f])|(\ud835[\udfce-\udfff])","g");function t(e,t,i,n){var o=e.charCodeAt(e.length-1),a=t?15&o:i?o-6&15:n?(o-206&63)%10:null;return String.fromCharCode(48+a)}return function(i){return i.replace(e,t)}}()(e)}}})),define("DS/E6WCommonUI/Collections/MergingCollection",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Class/Listener"],(function(e,t,i,n){"use strict";var o=i.extend(n,{_uwaClassName:"MergingCollection",sortedModels:null,_models:{},addSubCollection:function(t,i){this._subCollections||(this._subCollections=[]);var n=e.clone(i||{},!1);n.previousModels=this.toArray(),this._subCollections.push(t),this.listenTo(t,"onAnyEvent",(function(e,t){switch(e){case"onRemove":this.sortedModels&&this.indexOf(t)>-1&&this.sortedModels.splice(this.indexOf(t),1);break;case"onReset":this._updateModelTimeout=this._updateModelTimeout||setTimeout((()=>{this._updateModelTimeout=void 0,this.updateModels()}),0)}var i=Array.prototype.slice.call(arguments,1);this.dispatchEvent(e,i)})),i&&i.silent||this.dispatchEvent("onReset",[this,n])},_arrayReturningFunction:function(e){return this._subCollections?(this.sort(),Array.prototype.concat.apply([],this._subCollections.map(e))):[]},toArray:function(){return this.sort(),this._arrayReturningFunction((function(e){return e.toArray()}))},size:function(){var e=0;return this._subCollections&&this._subCollections.forEach((function(t){e+=t.size()})),e},toJSON:function(){return this._arrayReturningFunction((function(e){return e.toJSON()}))},get:function(){var e;this.sort();for(var t=this._subCollections,i=t.length,n=0;n<i;n++){var o=t[n];if(e=o.get.apply(o,arguments))break}return e},indexOf:function(e){return this.sort(),this.sortedModels.indexOf(e)},at:function(e){return this.sort(),this.sortedModels.at(e)},complete:function(){for(var t=this._subCollections,i=t.length,n=0;n<i;n++){var o=t[n];e.is(o.complete,"function")&&o.complete.apply(o,arguments)}this.sort()},updateModels:function(){this._models={};var e=this;this._subCollections.forEach((function(t){t._models.forEach((function(t){e._models[t.id]=t}))})),delete this.sortedModels},sort:function(){if((!this.sortedModels||this.sortedModels.length!==this.size())&&this.size()>0){this.updateModels();var e=Object.values(this._models);this.sortedModels=e.sort((function(e,t){let i=new Date(e.get("endDate")),n=new Date(t.get("endDate"));return i.getTime()!==n.getTime()?i.getTime()-n.getTime():e.get("title")!==t.get("title")?e.get("title").toLowerCase().localeCompare(t.get("title").toLowerCase()):0})),this.sortedModels.length>0&&this.dispatchEvent("sortComplete",[this])}},contains:function(e){return-1!==this.indexOf(e)}});return Object.defineProperty(o.prototype,"length",{get:function(){return this.size()}}),Object.defineProperty(o.prototype,"completing",{get:function(){return Boolean(this._subCollections.find((e=>e.completing)))}}),o})),define("DS/E6WCommonUI/CommonUIHandlebarsHelper",["DS/Handlebars/Handlebars4","text!DS/E6WCommonUI/assets/templates/showhidearrow.html.handlebars","text!DS/E6WCommonUI/assets/templates/attachURL.html.handlebars","text!DS/E6WCommonUI/assets/templates/labelWithTooltip.html.handlebars","text!DS/E6WCommonUI/assets/templates/treeEncapsulator.html.handlebars"],(function(e,t,i,n,o){"use strict";const a={registerPartials:function(){a._partialsRegistered||(e.registerPartial("showHideArrow",t),e.registerPartial("attachURL",i),e.registerPartial("treeNodeEncapsulator",o),e.registerPartial("labelWithTooltip",n),a._partialsRegistered=!0)}};return a})),define("DS/E6WCommonUI/E6WCommonUIConstants",["UWA/Core","DS/RDFFoundation/Models/RDFFoundationConstants"],(function(e,t){"use strict";var i={WORKING_HOURS_IN_A_DAY:8,LOGICAL_USER_TYPE:"dsplan:LogicalUser",URL_TYPE:"dsplan:url",WORK_CONTEXT_ATTR:"dsxplan:hasWorkContext",CHECKLIST_ITEM_TYPE:"dsplan:ChecklistItem",JS_TYPE_ATTR:"dsxplan:jsType",DSLC_TITLE_ATTR:"dsxplan:label",USER_GROUP_TYPE:"foaf:Group",PERSON_TYPE:"pno:Person",ASSIGNED_TASK_ATTR:"dsplan:hasAssignedTasks",ACTUAL_DELIVERABLE_ATTR:"dsplan:actualDeliverable",ATTACHMENT_ATTR:"dsplan:hasAttachment",BOOKMARK_FOR_FILE_REPOSITORY:"dsplan:hasBookmark",PROJECT_TEMPLATE_TYPE:"dsplan:ProjectPlanningTemplate",IMAGE_TILE_ATTR:"image_tile",IMAGE_THUMBNAIL_ATTR:"image_thumbnail",CANDIDATE_ASSIGNEE_ATTR:"dsxplan:hasCandidateAssignee",TAGS_DATA:"tagsData",USER_TAGS:"userTags",SERVICE_3DPLAN:"3dplan",SERVICE_3DSWYM:"3DSwym",START_DATE_MIN_ATTR:"dsplan:startDateIntervalMin",START_DATE_MAX_ATTR:"dsplan:startDateIntervalMax",END_DATE_MIN_ATTR:"dsplan:endDateIntervalMin",END_DATE_MAX_ATTR:"dsplan:endDateIntervalMax",PROJECT_START_DATE_ATTR:"dsplan:projectStartDate",PROJECT_END_DATE_ATTR:"dsplan:projectEndDate",ACTUAL_START_DATE:"dsplan:actualStartDate",ACTUAL_END_DATE:"dsplan:actualEndDate",ACTUAL_START_ATTR:"actualStartDate",ACTUAL_FINISH_ATTR:"actualFinishDate",ENDDATE_ATTR:"dsplan:estimatedEndDate",STARTDATE_ATTR:"dsplan:estimatedStartDate",USER_DEFINED_START_DATE_ATTR:"dsxplan:userDefinedStart",USER_DEFINED_END_DATE_ATTR:"dsxplan:userDefinedEnd",ESTIMATED_START_DATE:"estimatedStartDate",ESTIMATED_DUE_DATE:"dueDate",PLANNED_START_LABEL:"Planned Start",ACTUAL_START_LABEL:"Actual Start",PLANNED_END_LABEL:"Planned End",ACTUAL_END_LABEL:"Actual End",APP_3DPLAN:"ENXPLAN_AP",APP_TSK:"ENOTASK_AP",STATE_ATTR:"dscom:hasMaturity",TSK_STATE_ATTR:"state",COMPLETE_PERCENT_ATTR:"dsplan:percentageCompletion",TSK_COMPLETE_PERCENT_ATTR:"percentComplete",UNIQUE_OBJECT_ID_ATTR:"dsxplan:enterpriseIdentificationNumber",GOVERNING_PROCESS_MODEL_ATTR:"dsplan:hasProcessModel",GOVERNING_PROCESS_INSTANCE_ATTR:"dsplan:hasProcessInstance",OWNER_RESPONSIBILITY_ATTR:"ownerResponsibilityModel",ASSIGNEE_RESPONSIBILITIES_ATTR:"assigneeResponsibilityModels",TEAM_MEMBERS:"team_members",PROXY_TYPE:"dscom:ProxyType",DEFAULT_PROFILE_IMG_PATH:"DS/RDFFoundation/assets/img/defaultProfile.png",SAVE_COMPLETED:"saveCompleted",PRIORITY_LOW_ICON:"fonticon-low",PRIORITY_MEDIUM_ICON:"fonticon-medium",PRIORITY_HIGH_ICON:"fonticon-high",PRIORITY_URGENT_ICON:"fonticon-alert",PRIORITY_HIGH:"dsxplan:High",PRIORITY_MEDIUM:"dsxplan:Medium",PRIORITY_LOW:"dsxplan:Low",PRIORITY_URGENT:"dsxplan:Urgent"};return e.merge(i,t),i})),define("DS/E6WCommonUI/TopBarSearchDispatcher",["UWA/Core","UWA/Class/Events","UWA/Class/Listener"],(function(e,t,i){"use strict";var n=t.extend(i,{_uwaClassName:"TopBarSearchDispatcher",listenToTopBarSearch:function(){this.listenTo(widget,{onSearch:this._dispatchSearchEvent,onResetSearch:this._dispatchResetSearch})},_dispatchSearchEvent:function(e){this._search=e,this.dispatchEvent("onTopBarSearch",arguments)},_dispatchResetSearch:function(){delete this._search,this.dispatchEvent("onTopBarResetSearch",arguments)},getSearchString:function(){return this._search},getSearchStringConvertedToRegex:function(){var e=this._search,t="";return e?/[*?]/.test(e)?(e.split("").forEach((e=>{switch(e){case"*":t=t.concat(".*");break;case"?":t=t.concat(".");break;default:t=t.concat(e)}})),t):t=".*"+e+".*":""}});return n._instance=n._instance||new n,n._instance})),define("DS/E6WCommonUI/Views/CustomizedAutocomplete",["DS/UIKIT/Autocomplete"],(function(e){"use strict";var t=0,i=e.extend({init:function(){this._cid=t++,this._parent.apply(this,arguments),this.options.infoMessageCallback&&(this._infoMessageElement=UWA.createElement("div",{class:"info-message-bar",html:[{tag:"span",class:"fonticon fonticon-info"},{class:"info-message",tag:"span"}]}))},_shouldDropUp:function(e){var t=this.boundingElement||document.documentElement;return(e||this.getContent().getOffsets().y+this.elements.inputContainer.getDimensions().height)+this.elements.suggestsContainer.getSize().height>(t.clientHeight||window.innerHeight)+(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)},setBoundingElement:function(e){this.boundingElement=e},reset:function(){this._parent.apply(this,arguments),this.dispatchEvent("onHideSuggests")},getSuggestions:function(e){"function"==typeof this.options.noResultsMessageCallback&&(this.options.noResultsMessage=this.options.noResultsMessageCallback(e)),e.length>=this.options.minLengthBeforeSearch?this._parent.apply(this,arguments):this.reset(),this.options.infoMessageCallback&&setTimeout((()=>{this._infoMessageElement.getElements("span")[1].setText(this.options.infoMessageCallback(e)),this._infoMessageElement.inject(this.elements.suggestsContainer,"top")}),0)},onUpdateSuggests:function(){this._isDestroyed||(this._parent.apply(this,arguments),this.options.infoMessageCallback&&this.elements.suggestsContainer.setStyle("height",parseInt(this.elements.suggestsContainer.getStyle("height"))+20))},destroy:function(){this._isDestroyed=!0,this._infoMessageElement&&(this._infoMessageElement.destroy(),this._infoMessageElement=void 0),this._parent.apply(this,arguments)},isSelected:function(){if(!this._isDestroyed)return this._parent.apply(this,arguments)}});return i})),define("DS/E6WCommonUI/UnitBezier",["UWA/Class"],(function(e){"use strict";return e.extend({epsilon:1e-6,init:function(){this.cx=1.26,this.bx=3*(.58-.42)-this.cx,this.ax=1-this.cx-this.bx,this.cy=0,this.by=3-this.cy,this.ay=1-this.cy-this.by},sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){var i,n,o,a,s,r;for(o=e,r=0;r<8;r++){if(a=this.sampleCurveX(o)-e,Math.abs(a)<t)return o;if(s=this.sampleCurveDerivativeX(o),Math.abs(s)<t)break;o-=a/s}if((o=e)<(i=0))return i;if(o>(n=1))return n;for(;i<n;){if(a=this.sampleCurveX(o),Math.abs(a-e)<t)return o;e>a?i=o:n=o,o=.5*(n-i)+i}return o},solve:function(e,t){var i=t||this.epsilon;return this.sampleCurveY(this.solveCurveX(e,i))}})})),define("DS/E6WCommonUI/TimelineIteratorMixin",["UWA/Class"],(function(e){"use strict";var t={HOUR:1,DAY:2,WEEK:3,MONTH:4,YEAR:5},i=e.extend({init:function(e){this.current=new Date,this._start=new Date,this._end=new Date,this._dateline=e.dateline,this.scale=t.DAY,this.increment=1},start:function(){if(this.current=new Date(this._start.getTime()),this.scale===t.YEAR&&(this.current.setFullYear(this.increment*Math.floor(this.current.getFullYear()/this.increment)),this.current.setMonth(0),this.current.setDate(1),this.current.setHours(0)),this.scale===t.MONTH&&(this.current.setDate(1),this.current.setHours(0)),this.scale===t.DAY&&this.current.setHours(0),this.current.setMinutes(0),1!==this.increment)switch(this.scale){case t.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.increment);break;case t.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.increment+1);break;case t.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.increment);break;case t.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.increment)}},end:function(){return isNaN(this.current.getTime())||isNaN(this._end.getTime())||this.current.getTime()>this._end.getTime()},next:function(){var e=this.current.getTime();if(this.current.getMonth()<6)switch(this.scale){case t.HOUR:this.current=new Date(this.current.getTime()+1e3*this.increment*60*60);var i=this.current.getHours();this.current.setHours(i-i%this.increment);break;case t.DAY:this.current.setDate(this.current.getDate()+this.increment);break;case t.MONTH:this.current.setMonth(this.current.getMonth()+this.increment);break;case t.YEAR:this.current.setFullYear(this.current.getFullYear()+this.increment)}else switch(this.scale){case t.HOUR:this.current.setHours(this.current.getHours()+this.increment);break;case t.DAY:this.current.setDate(this.current.getDate()+this.increment);break;case t.MONTH:this.current.setMonth(this.current.getMonth()+this.increment);break;case t.YEAR:this.current.setFullYear(this.current.getFullYear()+this.increment)}if(1!==this.increment)switch(this.scale){case t.HOUR:this.current.getHours()<this.increment&&this.current.setHours(0);break;case t.DAY:this.current.getDate()<this.increment+1&&this.current.setDate(1);break;case t.MONTH:this.current.getMonth()<this.increment&&this.current.setMonth(0)}this.current.getTime()===e&&(this.current=new Date(this._end.getTime()))},getCurrent:function(){return this.current},getRange:function(){return(this._end.getTime()-this._start.getTime())/this._dateline.getDatesWidth()*11400}});return i.SCALE=t,i})),define("DS/E6WCommonUI/TagUtils",["DS/E6WCommonUI/PlatformManager","DS/RDFFoundation/RDFUtils","DS/WAFData/WAFData"],(function(e,t,i){"use strict";return{getTagInfo:function(n){const o=(n.isRDF?e.getServiceUrl("6WTags",!0):e.getServiceUrl("3DSpace",!0))+"/resources/6w/tags?xrequestedwith=xmlhttprequest&tenant="+e.getTenant(),a={tag:[{subject:[{uri:n.getTagPrefix&&n.getTagPrefix()+encodeURIComponent(t.jsonURIToSparqlURI(n.id))}]}]};i.authenticatedRequest(o,{method:"POST",headers:{"Content-Type":"application/json"},type:"json",data:JSON.stringify(a),onComplete:function(e){var t=[];e.results&&e.data&&e.data[0].tag.forEach((e=>{var i={};i.type=e.predicate.split(":")[1],i.value=e.object.literal,t.push(i)})),n.set("tagsData",t,{dontRegisterChange:!0})},onFailure:function(){console.log("unable to get tags")}})}}})),define("DS/E6WCommonUI/ApolloUtils",["UWA/Core","UWA/Class/Events","DS/RDFFoundation/RDFUtils","DS/RDFFoundation/Collections/CollectionTaggerHelper","DS/RDFFoundation/FederatedSearchUtil","DS/E6WCommonUI/PlatformManager","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s){"use strict";var r=["what","when","where","who","why","how"],l={"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Kernel/label>":"dsxplan:label","<urn:x-arq:DefaultGraph> <http://www.3ds.com/vocabularies/ds6w/type>":"@type",estimatedEnd:"dsxplan:estimatedEndDate",estimatedStart:"dsxplan:estimatedStartDate",created:"dspol:creationDate",modified:"dspol:modificationDate",actualStart:"dsxplan:actualStartDate",actualEnd:"dsxplan:actualEndDate","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectIndexId>":"dsxplan:workscopeParent","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/workDecompositionParentIndex>":"dsxplan:workDecompositionParent","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectMilestoneIndexId>":"dsxplan:workscopeParent","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentTaskIndexId>":"dsxplan:taskParent","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/jsType>":"dsxplan:jsType","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/comment>":"dsxplan:comment","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/logicalAssignee>":"dsplan:hasAssignee","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasRolledUpInfo>":"dsxplan:hasRolledUpInfo"},d={"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Kernel/owner>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAssignee>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/logicalAssignee>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/com/hasMaturity>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasPriority>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/resolution>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAttachment>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/actualDeliverable>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectIndexId>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectMilestoneIndexId>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/workDecompositionParentIndex>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasMilestone>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasGate>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasFromConstraint>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentTaskIndexId>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/xPlan/from>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/xPlan/to>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/isRolledUpInfoFor>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasRolledUpInfo>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasWorkContext>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasScheduleError>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasReferenceProject>":!0};const c={"dsplan:LogicalUser":"dsplan:MVMask.Milestone.Basic"};var u,h={"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Kernel/owner>":"foaf:Person","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAssignee>":"foaf:Person","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/logicalAssignee>":"dsplan:LogicalUser","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectIndexId>":"dsplan:Project","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectMilestoneIndexId>":"dsplan:Project","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/workDecompositionParentIndex>":"dsplan:Project","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasMilestone>":"dsplan:Milestone","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasGate>":"dsplan:Gate","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentTaskIndexId>":"dsplan:Task","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/isRolledUpInfoFor>":"dsplan:Project","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasRolledUpInfo>":"dsplan:RolledUpInfo","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasFromConstraint>":"dsplan:TemporalConstraint","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasWorkContext>":function(e){return"dsplan:Task"===e["dsxplan:jsType"]?"dscom:ComponentProxy":"dsplan:Project"},"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasReferenceProject>":"dsplan:Project"},m={"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAttachment>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/actualDeliverable>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAssignee>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/logicalAssignee>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasMilestone>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasGate>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasReferenceProject>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasWorkContext>":!0},p=i.inverseMapping(i.typeDictionary.context),f={"ds6w:who/ds6w:responsible":"ownerFilter","ds6w:who/ds6w:assignee":"assigneeFilter","ds6w:where/ds6w:context/ds6w:parent":"parentFilter","ds6w:why/ds6w:priority":"priorityFilter","ds6w:what/ds6w:status":"stateFilter","ds6w:what":"whatFilter","ds6w:who":"whoFilter","ds6w:when":"whenFilter","ds6w:where":"whereFilter","ds6w:why":"whyFilter","ds6w:how":"howFilter","ds6w:when/ds6w:ends/ds6w:actualEnd":"actualEndFilter","ds6w:when/ds6w:ends/ds6w:plannedEnd":"plannedEndFilter","ds6w:when/ds6w:starts/ds6w:plannedStart":"plannedStartFilter","ds6w:when/ds6w:starts/ds6w:actualStart":"actualStartFilter","ds6w:when/ds6w:created":"createdFilter","ds6w:when/ds6w:modified":"modifiedFilter","ds6w:what/ds6w:type":"typeFilter","ds6w:where/ds6w:context/ds6w:community":"communityFilter","ds6w:what/ds6w:storyPoints":"storyPointsFilter"},g=i.inverseMapping(f),E=new RegExp("<.*> <(.*)>"),v={};var _=t.extend({_deletedModels:{},parse:function(t){var n=this,o=[],a=0;_.modelsToComplete={};var s=function(e){var t,i=e.match(/"(.*?)"/);return i.length>1&&(t=i[1]),t};try{t&&t.forEach((function(t){if(t&&t.stringPredicates){var r={},l=i.removeBracketLongURI(t.stringPredicates["<urn:x-arq:DefaultGraph> <http://www.3ds.com/vocabularies/ds6w/resourceUid>"][0]);if(n.userDeletedModel(l))a++;else{r["@id"]=l;const a={},d=i.getObjectById(l);let c=t.datetimePredicates&&t.datetimePredicates["<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Policy/modificationDate>"]&&t.datetimePredicates["<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Policy/modificationDate>"][0];c&&!c.endsWith("Z")&&(c+="Z"),d&&new Date(d.get("dspol:modificationDate"))>new Date(c)&&(a.noOverwrite=!0,a.fetchedAttributes=d.getFetchedAttributes()),n.addPredicatesToObject(r,t.datetimePredicates,e.merge({isDate:!0},a)),n.addPredicatesToObject(r,t.doublePredicates,a),n.addPredicatesToObject(r,t.longPredicates,a),n.addPredicatesToObject(r,t.stringPredicates,a),n.addPredicatesToObject(r,t.booleanPredicates,a),["<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectIndexId>","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/workDecompositionParentIndex>","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectMilestoneIndexId>","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentTaskIndexId>","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasRolledUpInfo>"].forEach((function(e){t.uriPredicates[e]||(t.uriPredicates[e]=t.stringPredicates[e])})),n._parseUriPredicates(r,t,a),r._tagData=t.tags,r.explicitTagsData=n.getApolloExplicitTagsData(t.tags),r._workscopeParent=t.workscopeParent,t.intervalMin&&(r["dsplan:durationIntervalMin"]=s(t.intervalMin)),t.intervalMax&&(r["dsplan:durationIntervalMax"]=s(t.intervalMax)),t.duration&&(r["dsplan:estimatedDuration"]=s(t.duration)),u.addMask(r),o.push(r)}}}))}catch(e){console.error(e.message),console.error(e.stack)}const r=i.getBatchGenerator();return Object.entries(_.modelsToComplete).forEach((([e,t])=>{i.complete(t.Constructor,t.ids,{mask:e,batchGenerator:r})})),r.sendBatch(),_.modelsToComplete={},{models:o,deletedModelsFound:a}},getApolloExplicitTagsData:function(t){var i;return t&&r.forEach((function(n){var o=t[n];o&&(i||(i={}),i[n]||(i[n]=[]),e.is(o,"array")?i[n]=i[n].concat(o):i[n].push(o))})),i},_parseUriPredicates:function(e,t,i){for(var n in t.uriPredicates){var o=this.getAttributeFromPredicate(n);if(o){if(!i.noOverwrite||!i.fetchedAttributes[o]){var a=t.uriPredicates[n];m[n]?(e[o]=e[o]||{"@type":"Collection","@id":e["@id"]+"/"+o,member:[]},a.forEach(function(t){e[o].member.push(this._parseNestedObject(t,n,e))}.bind(this))):a&&d[n]&&(e[o]=this._parseNestedObject(a[0],n,e))}}else console.error(`No attribute mapping for ${n}. Skipping it.`)}},_parseNestedObject:function(t,n,o){if(!d[n])return;var a=this.getClientId(t),s={"@id":a};if(!i.getObjectById(a)){let t=h[n];if(t){e.is(t,"function")&&(t=t(o)),s["dsxplan:jsType"]=t;const n=c[t];n&&(_.modelsToComplete[n]=_.modelsToComplete[n]||{ids:[]},_.modelsToComplete[n]={Constructor:_.modelsToComplete[n].Constructor||i.getModelConstructor(s),ids:[..._.modelsToComplete[n].ids,a]})}}return s},addPredicatesToObject:function(t,i,n){const o=e.clone(n||{},!1);for(var a in i)if(i[a]){if("<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Kernel/comment>"===a&&("dsplan:Milestone"===t["dsxplan:jsType"]||"dsplan:Gate"===t["dsxplan:jsType"]))continue;var s=i[a][0],r=this.getAttributeFromPredicate(a);if(n.noOverwrite&&n.fetchedAttributes[r])continue;r&&e.is(s)&&(o.isDate&&!s.endsWith("Z")&&(s+="Z"),t[r]=s)}},getAttributeFromPredicate:function(e){if(v[e])return v[e];if(l[e])v[e]=l[e];else{var t=e.match(E)[1];v[e]=this.longToShortURI(t)}return v[e]},longToShortURI:function(e){var t=e.split("/"),i=t.pop(),n=t.join("/")+"/";return p[n]?`${p[n]}:${i}`:(console.error(`${n} does not have short URI defined in ApolloUtils.js`),e)},parseTags:function(e){var t=JSON.parse(e),n=[],a={};if(t.body.outputs)for(var r in t.body.outputs)Object.values(t.body.outputs[r].views).forEach((function(e){var t=e.data.axes[0].dimensions[0].ticks;t&&e.data.points.forEach((function(o,r){if(!t[o[0][0]]||!t[o[0][0]].value)return;var l=!1;let d=t[o[0][0]].value;d&&d.match&&d.match(/(\d\d\d\d\/\d\d\/\d\d)/)&&(l=!0);const c=(u=e.data.axes[0].name,g[u]||u);var u,h={object:d?d.toString():d,sixw:c,count:o[1][0],type:l?"date":isNaN(d)?"string":"double"};if("ds6w:what/ds6w:status"===c&&(h.dispValue=s.get(`E6WCommonUI.Tag.${d}`)),"ds6w:where/ds6w:context/ds6w:community"===h.sixw){var m=i.removeBracketLongURI(h.object);m&&(m=m.substring(m.indexOf("_")+1)),a[m]=h}else n.push(h)}))}));var l={onComplete:function(e){var t=e.results;if(t&&t.length){for(var i=[],o=0;o<t.length;o++){var s=a[t[o].attributes.find((e=>"resourceid"===e.name)).value];s.dispValue=t[o].attributes.find((e=>"ds6w:label"===e.name)).value,i.push(s)}u.dispatchEvent("onCommunityDataLoaded",[n.concat(i)])}}};return function(e,t){for(var i=[],n=0;n<e.length;n++)i.push('[ds6w:resourceUid]:"'+e[n]+'"');if(i.length>0){var a={sources:["swym"],nresults:i.length+10,query:i,select_predicate:["ds6w:label","ds6w:type","ds6w:resourceUid"],delimeter:" BOR ",onComplete:function(e){t.onComplete&&t.onComplete(e)},onFailure:function(e){t.onFailure&&t.onFailure(e)}};o.sendRequestWithDelimiter(a)}}(Object.keys(a),l),n},createFilterParams:function(e){var t=[],i=this;for(var o in e){var a=[];e[o].forEach((function(e){if("date"===e.type){var s=n.getFromAndToDateFromDateTagFilter(e.object);s.to&&t.push({key:i.getServiceVariableForTag(o)+"To",value:JSON.stringify(s.to.toISOString())}),s.from&&t.push({key:i.getServiceVariableForTag(o)+"From",value:JSON.stringify(s.from.toISOString())})}else"double"===e.type?a.push(parseFloat(e.object)):a.push(e.object)})),a.length>0&&t.push({key:i.getServiceVariableForTag(o),value:JSON.stringify(a)})}return t},onModelDeleted:function(e){this._deletedModels[e.id]=!0},userDeletedModel:function(e){return this._deletedModels[e]},sendInitialRequest:function(){i.request(this.getServiceLoginUrl(),{ignoreDictionary:!0,method:"GET"})},getServiceUrl:function(){return a.getServiceUrl("3dplan",!0)+"/3drdfindexfts/services/customdataquery"},getServiceLoginUrl:function(){return a.getServiceUrl("3dplan",!0)+"/3drdfindexfts/services/login"},addMask:function(e){var t;switch(e["dsxplan:jsType"]){case"dsplan:Project":case"dsplan:xProject":t="dsplan:MVMask.WorkPackage.Apollo";break;case"dsplan:Task":t="dsplan:MVMask.Task.Apollo";break;case"dsplan:Milestone":case"dsplan:Gate":t="dsplan:MVMask.Milestone.Complex"}t&&(e["@mask"]=t)},getClientId:function(e){var t=e;return e.startsWith("<uuid")?t=i.removeBracketLongURI(e):e.startsWith("<http")&&(t=e.match(/<(.*)>/)[1],t=this.longToShortURI(t)),t}});return(u=new _).PROJECT_TAGS_SERVICE="custom_ProjectTaskTags",u.getServiceVariableForTag=function(e){let t=f[e];return t=t||f[e.replaceAll("sixw:","")],t||e},u.APOLLO_EXPLICIT_TAG_KEYS=r,u})),define("DS/E6WCommonUI/UIHelper",["UWA/Core","UWA/Utils/Client","UWA/Utils/InterCom","UWA/Promise","DS/UIKIT/Alert","DS/UIKIT/SuperModal","DS/UIKIT/Mask","DS/UIKIT/Tooltip","DS/UIKIT/Modal","DS/UIKIT/DropdownMenu","DS/Handlebars/Handlebars4","DS/RDFFoundation/RDFUtils","DS/RDFFoundation/MemberUtils","DS/RDFFoundation/ProjectTypeUtils","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/E6WCommonUI/FileSaver","DS/E6WCommonUI/PlatformManager","DS/E6WCommonUI/E6WCommonUIConstants","DS/i3DXCompassPlatformServices/OpenWith","DS/WAFData/WAFData","DS/Usage/TrackerAPI","DS/Notifications/NotificationsManagerAbstract","i18n!DS/RDFFoundation/assets/nls/RDFFoundationNLS","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d,c,u,h,m,p,f,g,E,v,_,D,C,w,T,b){"use strict";f.setNotificationManager(p);var y=b.get("E6WCommonUI.Info.LoadingData"),A={autoHide:!0,closable:!0,closeOnClick:!1,className:"eno6wcommonui-alert-root"},S={"dsplan:Task":b.get("E6WCommonUI.Label.Task"),"dsplan:Milestone":b.get("E6WCommonUI.Label.Milestone"),"dsplan:Gate":b.get("E6WCommonUI.Label.Gate"),"dsplan:Project":b.get("E6WCommonUI.Label.Project"),"dsplan:xProject":b.get("E6WCommonUI.Label.xProject"),"dsplan:ProjectPlanningTemplate":T.get("xPlan.Label.Template"),"pno:Person":b.get("E6WCommonUI.Label.Person"),"dsplan:LogicalUser":b.get("E6WCommonUI.Label.LogicalUser"),"dsplan:url":b.get("E6WCommonUI.Label.Link")},I=["Simulation","Simulation Template"];let U=c.compile("{{message}}");var M,R={ALLOWED_TAGS:["br","p","strong"]},x={trackPageEvent:function(t){var i=e.clone(t,!1),n=window.widget&&window.widget.getValue("appId");n===v.APP_3DPLAN?i.scope="3DPlan":n===v.APP_TSK&&(i.scope="CollabTask"),i.appID=n,i.tenant=E.getTenant(),i.eventAction=i.eventAction||i.eventCategory,C.trackPageEvent(i)},trackPageView:function(t){var i=e.clone(t,!1);i.appID=widget.getValue("appId"),i.tenant=E.getTenant(),C.trackPageView(i)},removeFromArray:function(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)},enrichObjectFromSearch:u.enrichObjectFromSearch,drag21compliant:function(e){e&&e.data&&e.data.items&&e.data.items.forEach((e=>delete e.objectTaxonomies))},extraDragForSwym:function(e){try{"3DSwym"===e.data.items[0].serviceId&&(widget.socket||(widget.socket=new i.Socket("DetailsDisplayView"+widget.id),widget.socket.subscribeServer("ifweServer",window.parent)),widget.socket.dispatchEvent("SwymContentDragStarted",e))}catch(e){console.log(e)}},getParentTypesFromMap:function(e){return this.parentTypesMap[e]},addToParentTypesMap:function(e,t){this.parentTypesMap[e]=t},destroyOpenWith:function(e){e.openWith&&(delete e.openWith._content,delete e.openWith._dropdown,e.openWith._appsList&&(e.openWith._appsList.request&&e.openWith._appsList.request.cancel(),delete e.openWith._appsList)),delete e.openWith},addOpenWith:function(e){let t;return e.view.openWith&&this.destroyOpenWith(e.view),e.view.openWith=new _,e.view.openWith.set3DXContent(e.modelData).retrieveCompatibleApps((function(i){i.length>0&&(t=e.dropdownMenu.addItem({id:"OpenWith",title:"Open With",text:b.get("E6WCommonUI.Label.OpenWith"),fonticon:"open-menu-dot",index:0}),i.forEach((function(t){e.dropdownMenu.addItem(x.compatibleAppToMenuItem(t))})))})),t},showMultiEditWarning:function(e){if(e&&e.length>20)return x.displayWarning(x.i18n("E6WCommonUI.Label.LimitMultiSelectEdit")),!0},compatibleAppToMenuItem:function(e){return{name:e.text,text:e.text,type:"PushItem",title:e.text,icon:e.icon,handler:e.handler,parentItemId:"OpenWith",action:e.handler}},launchPreviewGroupMembers:function(e,t){let i=require("DS/i3DXRDFGroupViewer/js/GroupViewer");var n=require("DS/RDFFoundation/SecurityContextUtils").getDefaultSecurityContext().split("::")[1],o={platformId:E.getTenant(),groupId:e,language:E.getCurrentLanguage()};if(E.isOnPremise()&&(o.securityContext=n),t||"undefined"==typeof widget||(t=widget.elements.body),i){this._modal&&this._modal.destroy&&this._modal.destroy();var a=new i(o);this._modal=new l({closable:!0,renderTo:t,className:"group-viewer",header:x.i18n("E6WCommonUI.Label.PreviewGroupMembers"),body:a.render()}),this._modal.getBody().addClassName("members-view"),this._modal.show()}},pictureAPIConfig:{defaultSwym:"https://dsext001-eu1-215dsi0708-3dswym.3dexperience.3ds.com",pictureAPIPrefix:"/api/user/getpicture/login/",pictureAPISuffixMini:"/format/mini",pictureAPISuffixNormal:"/format/normal"},i18n:function(e){return e?(window.WidgetConstants&&window.WidgetConstants.str||console.error("getWidgetConstant called too early (prior to constants initialization) "),(window.WidgetConstants&&window.WidgetConstants.str?window.WidgetConstants.str[e]:null)||b.get(e)):""},userPictureURL:function(e,t,i){var n="";if(!i||"Group"!==i.type&&"Group Proxy"!==i.type){if(e&&window.enoviaServer){var o=this.pictureAPIConfig.pictureAPISuffixMini,a=window.enoviaServer.swym;"normal"===t&&(o=this.pictureAPIConfig.pictureAPISuffixNormal),n=a?a+this.pictureAPIConfig.pictureAPIPrefix+e+o:""}}else n=i.imageUrl;return n},isIpad:function(){return t.Platform.ipad},isAndroid:function(){return t.Platform.android},isIOS:function(){return t.Platform.ios},isSurface:function(){return t.Platform.tablet&&(t.Platform.win32||t.Platform.win64)},isMobile:function(){return this.isIpad()||this.isAndroid()||this.isSurface()},isTouchExceptTablet:function(){return!(!this.isMobile()&&!t.Platform.ios)&&!t.Platform.tablet},isTouchDevice:function(){return Boolean("ontouchstart"in window||window.navigator.msMaxTouchPoints)},isIE:function(){return t.Engine.ie},isEdge:function(){return-1!==window.navigator.userAgent.indexOf("Edge/")},isWidgetNarrow:function(){return window.innerWidth<450},parentTypesMap:{},DATA_KEY_LIST:[void 0!==t.Engine.ie||-1!==window.navigator.userAgent.indexOf("Edge/")?"text":"text/plain","text/searchitems","dragObjectDetails"],isDataTransferTypeSupported:function(e){var t=!1;return e.types&&(t=this.DATA_KEY_LIST.some((function(t){for(var i=0;i<e.types.length;i++)return e.types[i].toLowerCase()===t;return!1}))),t},saveBlobToFile:function(t,i){var n=new Blob([t],{type:"text/plain;charset=utf-8"}),o=i.get("title"),a=(o?o.replace(/[*/?\\<>:"]/g,"_"):"")+"_"+e.Date.strftime(new Date,"%m%d%Y")+".csv";g.saveAs(n,a)},isIconURL:function(e){return e&&(e.contains("images/icons")||e.contains("assets/img"))},getTransferObject:function(t){var i=e.clone(t,!1);i.serviceId=i.serviceId||"3DSpace";let n=i.source,o=i.i3dx?"2.1":"1.0";return"2.1"===o&&(delete i.objectType_Internal,delete i.displayType,i.image&&(!i.displayIcon&&x.isIconURL(i.image)?i.displayIcon=i.image:i.displayPreview=i.image,delete i.image),delete i.source),{protocol:"3DXContent",version:o,source:n,data:{items:[i]}}},launchDocumentInfo:function(e){var t=e.model.get("id")||e.model.indexModel&&e.model.indexModel.id;require(["DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/EditPropComponent","DS/RDFFoundation/SecurityContextUtils"],(function(i,n,o){var a={appId:widget.data.appId,readOnly:!0,displayType:"POPUP",getSecurityContext:function(){return o.getDefaultSecurityContext()},getSelectedNodes:function(){return[{tenant:e.model.get("tenant")||e.options&&e.options.tenant,type:e.model.get("type"),source:e.model.get("source"),getID:function(){return t}}]},indexModeParameter:!0,disableAddExtensionButton:!0,displayNotification:function(e){console.log(e.msg)}},s=[],r=new i({tenant:e.model.get("tenant")||e.options&&e.options.tenant,objectId:t,metatype:e.model.get("type")});s.push(r),new n(a).show(s);var l=document.getElementsByClassName("EPP_PopupDialFake")&&document.getElementsByClassName("EPP_PopupDialFake")[0];l&&l.hide&&l.hide()}))},i3dx:function(e){return e.get("i3dx")||"i3dx:"+e.serviceHosting+"!"+e.id},getDataTransferJSON:function(t){var i,n,o=["0.1","1.0","1.1","2.0","2.1"];return this.DATA_KEY_LIST.some((function(a){if(i=t.getData(a),e.is(i,"string"))try{i=JSON.parse(i)}catch(e){return!1}return(n=i.version&&"3DXContent"===i.protocol)?-1===o.indexOf(i.version)&&(n=!1):n=!1,n})),n?i:(x.displayError(x.i18n("E6WCommonUI.Alert.InvalidDataDropped")),!1)},dateForJSON:function(e,t,i,n){var o=e;return o=n&&n.dataForRendering?e&&{actualValue:o.getTime().toString(),displayValue:isNaN(o)?"":i&&i.getLocaleDate(o)}:"UTC"===t?isNaN(o.getTime())?"":o.toISOString():e.getTime()},getIntlDateFormat:function(e){var t=e,i=new Date(e);return"Invalid Date"!==i.toString()&&(t={actualValue:i,displayValue:isNaN(i.getTime())?t:x.DATE_FORMAT.format(i)}),t},getIntlDateTimeFormat:function(e){var t=e,i=new Date(e);return"Invalid Date"!==i.toString()&&(t={actualValue:i,displayValue:isNaN(i.getTime())?t:`${x.DATE_LONG_FORMAT.format(i)} (${x.TIME_FORMAT.format(i)})`}),t},getIntLongDateFormat:function(e){var t=e,i=new Date(e);return"Invalid Date"!==i.toString()&&(t={actualValue:i,displayValue:isNaN(i.getTime())?t:`${x.DATE_LONG_FORMAT.format(i)}`}),t},setHelper:function(t,i,n){var o,a=n;return t?e.is(t,"object")?(o=t,a=i||{}):((o={})[t]=i,a=n||{}):a=i,{attrs:o,options:a}},match:function(e,t){return!(!e||!t)&&(e=e.toLowerCase(),t=t.toLowerCase(),-1===e.indexOf("*")?-1!==t.indexOf(e):new RegExp("^"+e.split("*").join(".*")+"$").test(t))},processDroppedObjectPreview:function(e,t,i){t.onload=function(){x.scaleImage(this,null,null,i),window.URL.revokeObjectURL(this.src)},t.onerror=function(){i(null),window.URL.revokeObjectURL(this.src)};var n={method:"GET",type:"blob",onComplete:function(e){var i=new Blob([e]);t.src=window.URL.createObjectURL(i)},onFailure:function(){i(null)}};D.authenticatedRequest(e,n)},processDroppedImage:function(e,t,i){var n=e[0],o=n.name,a=n.type;t.onload=function(){window.URL.revokeObjectURL(this.src),x.scaleImage(this,o,a,i)},t.src=window.URL.createObjectURL(n)},openFileExplorer:function(t){var i={id:"fileUploadButton",type:"file",accept:t.accept};e.Utils.Client.Platform.ios||x.isSurface()||x.isAndroid()||!0===t.single||(i.multiple=!0);var n=e.createElement("input",{attributes:i,styles:{display:"none"},events:{change:function(){n.destroy(),t.callback&&t.callback(this.files)}}});n.inject(document.body),n.click()},scaleImage:function(e,t,i,n,o){var a=document.createElement("canvas"),s=a.getContext("2d");let r=o||{},l=r.maxWidth||160,d=r.maxHeight||120,c=r.maxByteSize||16300;var u=e.naturalWidth,h=e.naturalHeight,m=Math.min(d/h,l/u);m<1&&(h*=m,u*=m);for(var p,f=1;a.width=u,a.height=h,s.fillStyle="white",s.fillRect(0,0,a.width,a.height),s.drawImage(e,0,0,u,h),(p=a.toDataURL("image/jpeg",f)).length>c;)f-=.05;n(p)},initializeAlert:function(e){widget.alerter=new o(A),x.injectAlerter(e);let t=widget.getValue("appId");"ENXPLAN_AP"!==t&&"ENOTASP_AP"!==t||(w.prototype.addNotif=function(e){x.displayMessage({message:e.message||e.title||e.subtitle,className:e.level,noEscape:e.noEscape})})},displayMessage:function(t,i){if(t.message&&(t.message=t.noEscape?this.sanitizeMessage(t.message):this.escapeHTML(t.message)),e.clone(t||{},!1).showWebUX)p.addNotif(t);else{if(!widget.alerter)return console.log("No alerter defined. This must be done by the application."),!1;widget.alerter.setOptions&&(i?widget.alerter.setOptions(i):widget.alerter.setOptions(A)),widget.alerter.elements&&!widget.alerter.elements.container.isInjected()&&x.injectAlerter(x.getAlertInjectionLocation(),"top"),widget.alerter.add(t),widget.alerter.show()}return!0},injectAlerter:function(e){widget.alerter.inject(e,"top"),widget.alerter._lastInjectedTo=e},displayMessageBasedOnType:function(e){var t=e.msg,i=e.msgType;switch(e.msgType){case"warning":return this.displayWarning(t);case"info":return this.displayInfo(t);case"error":return this.displayError(t);case"success":return this.displaySuccess(t);case"primary":return this.displayPrimary(t);default:var n={message:t,className:i};return this.displayMessage(n)}},displaySuccess:function(e,t){return this.displayMessage({message:e,className:"success",noEscape:t&&t.noEscape})},displayError:function(t,i){var n=e.clone(i||{},!1);return e.merge(n,{message:t,className:"error"}),this.displayMessage(n,{hideDelay:n.hideDelay||4e3})},displayInfo:function(e,t,i){return this.displayMessage({message:e,className:"info",noEscape:i&&i.noEscape},{hideDelay:t||4e3})},displayWarning:function(e,t,i){return this.displayMessage({message:e,className:"warning",noEscape:i&&i.noEscape},{hideDelay:t||4e3})},displayPrimary:function(e,t){return this.displayMessage({message:e,className:"primary",noEscape:t&&t.noEscape})},getAlertInjectionLocation:function(){return widget.alerter&&widget.alerter._lastInjectedTo},updateDocumentConfirmation:function(e,t,i,n){if(e.length>1)x.displayError(b.get("E6WCommonUI.Alert.MultipleFilesNotSupported"));else{var o=e[0],s=t.get("title"),r=o.name,l={nameA:x.escapeHTML(r),nameB:x.escapeHTML(s)};if("DriveFile"!==t.get("ds6w:type")&&(r=this.getFileNameWithoutExtension(r),l={nameA:x.escapeHTML(r),nameB:x.escapeHTML(r)}),s!==r){var d={title:b.get("E6WCommonUI.Label.Update")+" "+s,body:b.replace(b.get("E6WCommonUI.Alert.UpdateDifferentFileNames"),l),buttons:[{className:"primary",value:b.get("E6WCommonUI.Label.Update"),action:function(e){e.hide(),i(o,t,n)}},{value:b.get("E6WCommonUI.Label.Cancel"),action:function(e){e.hide()}}]};new a({renderTo:document.body,className:"eno-common-apps-modal"}).dialog(d)}else i(o,t)}},getFileNameWithoutExtension:function(e){var t=e.lastIndexOf(".");return-1!==t&&(e=e.substring(0,t)),e},widgetInPreviewMode:function(){return widget.id&&-1!==widget.id.indexOf("preview")&&!widget.getValue("addinmode")},showLoadingMessage:function(e,t){e&&!s.isMasked(e)&&s.mask(e,t||y)},hideLoadingMessage:function(e){e&&s.unmask(e)},dropdownMenuHasItems:function(e){if(e instanceof d||e.items){if(e.items){return e.items.filter((function(e){return!e.className||!e.className.contains("hidden")})).length>0}return!1}return!0},viewProfileHandler:function(t){let i=e.clone(t||{},!1),n=require("DS/TransientWidget/TransientWidget");var o=function(e){let t=h.getUserNameForSwymUserProfile(i.memberModel);n.isWidgetOpen(widget.data.appId)?(e=e+"/v3/home?profile="+t,window.open(e,"_blank")):n.showWidget("X3DPRFL_AP","",{url:e,login:t},{mode:"panel",height:800,width:700})};window.enoviaServer&&window.enoviaServer.swym?o(window.enoviaServer.swym):E.getServiceUrlWithCallback("3DSwym",o)},showAndUpdateContextualDropdownMenuPosition:function(e,t,i){try{e.options.contextual=!0,i&&!x.dropdownMenuHasItems(e)||e.show(),e._originalEventObject=t,e.updatePosition(t)}catch(e){console.log("exception while udpating contextual menu")}},_alreadyHasObjectInRelatedData:function(t,i,n){var o=t.get(i)||[],a=o.detect||o.find;return a&&a.call(o,(function(t){return!e.is(t,"string")&&(e.equals(t.id,n)||t.get("physicalId")===n||t.get("dsaccess:accountName")===n||"iam:"+t.get("dsaccess:accountName")===n||t.get("groupURI")&&t.get("groupURI")===n)}),n)},setHeaderMetaTag:function(){var e=top.document.getElementsByName("viewport");e&&e.length&&e[0].setAttribute("content","user-scalable=0, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height")},disableBrowserDefaultPinchZoom:function(){t.Platform.ios&&document.documentElement.addEventListener("touchstart",(function(e){e.touches.length>1&&(e.stopPropagation(),e.preventDefault())}),{passive:!1})},isWedoTask:function(e){return"swym:WeDo"===e},isConstraint:function(e){return"dsplan:TemporalConstraint"===e||"dsplan:ControlledTemporalConstraint"===e},isTask:function(e){return"dsplan:Task"===e||x.isWedoTask(e)||"Task"===e},isProject:function(e){return m.isProject(e)},isTemplate:function(e){return m.isTemplate(e)},isTaskAnyType:function(e){return x.isTask(e)||"Inbox Task"===e},isGate:function(e){return"Gate"===e||"dsplan:Gate"===e},isMilestone:function(e){return"Milestone"===e||"dsplan:Milestone"===e},isPhaseTask:function(e){return"Phase"===e},getObjectDataFromDataTransfer:function(e){const t=x.getDataTransferJSON(e);return t?t.data.items.map(V):[]},dropdownMenuItemToWebuxMenuItem:function(t){const i={submenu:t.submenu,type:"PushItem",title:t.title||t.text,state:t.disabled?"disabled":"enabled",fonticon:e.is(t.fonticon,"object")?t.fonticon:{content:`wux-ui-3ds wux-ui-3ds-${t.fonticon}`}};return(t.handler||t.func)&&(i.action={callback:t.handler||t.func}),i},isWidgetInSidePanel:function(){return!(!widget||!widget.getView()||"sidepanel"!==widget.getView().type)}};function V(e){var t={},i=e.objectId;return"foaf:Group"!==e.objectType&&e.resourceUid&&(i=h.addUUIDToURI(e.resourceUid)),t.id=i,t.title=e.displayName,t.serviceId=e.serviceId,t.tenant=e.envId,t.image=e.image||e.displayPreview,t.type=e.objectType,t.i3dx=e.i3dx,"pno:Person"===e.objectType&&(t.accountName=u.splitUri(e.objectId)[1]),t}function W(e){var t={};x.enrichObjectFromSearch(e);var i=e.sourceId?e.sourceId.split(":")[1]:window.enoviaServer.tenant,n=e.id,o=e.objectType;return e.resourceUid&&!n.startsWith("mailto:")&&o&&"Group"!==o&&(n=h.preProcessPersonObject(e.resourceUid,e)),t.id=n,t.title=e.label||e["ds6w:label"],t.serviceId=e.serviceId||e.sourceId||"3DSpace",t.tenant=i,t.image=e.image||e.type_icon_url,t.type=e["ds6w:type_value"]||e["ds6w:type"],"pno:Person"===t.type&&(t.accountName=e.login||h.getAccountNameForUser(n,e.resourceUid)),t}let P,O,N,L,F;return x.getTenantErrorMessage=function(e,t){return b.replace(b.get("E6WCommonUI.Alert.FailedToAttachObjectWithDifferentTenant"),{TENANT1:e,TENANT2:t})},x.displayAlreadyAttachedErrorMessage=function(e,t,i){var n;n="Person"===t.get("type")||"pno:Person"===t.get("type")?b.replace(b.get("E6WCommonUI.Warning.AlreadyAssociated"),{TASK_NAME:e,ALREADY:t.get("name")}):"foaf:Group"===t.get("type")||"Group"===t.get("type")||"Group Proxy"===t.get("type")?b.replace(b.get("E6WCommonUI.Warning.GroupAlreadyAssociated"),{TASK_NAME:e,ALREADY:t.get("name")}):t.getObjectType()===v.LOGICAL_USER_TYPE?b.replace(b.get("E6WCommonUI.Warning.LogicalUserAlreadyAssociated"),{TASK_NAME:e,ALREADY:t.get("name")}):I.includes(t.get("type"))?b.replace(b.get("E6WCommonUI.Warning.ProcessAlreadyAttached"),{PARENT_NAME:e,EXISTING_CHILD_NAME:t.get("title")}):b.replace(b.get("E6WCommonUI.Warning.AlreadyAttached"),{PARENT_NAME:e,EXISTING_CHILD_NAME:t.get("title")}),x.displayError(n)},x.getObjectDataFromDropSearchOrTypeAhead=function(e){var t;return e.dropObj?t=V(e.dropObj):e.detailedObject&&(t=W(e.detailedObject)),t},x.normalizedToJson=function(t,i){return"function"==typeof t.dataForRendering?t.dataForRendering(i):"function"==typeof t.toJSON?t.toJSON(i):e.clone(t,!1)},x.copyTextToClipboard=function(e){var t=document.createElement("INPUT");t.setAttribute("type","text"),t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,999999),document.execCommand("copy"),document.body.removeChild(t)},x.isLoggedInUser=function(e){return e&&e.toUpperCase()===window.enoviaServer.user.toUpperCase()},x.isModelOwnerTheLoggedInUser=function(e){var t=e.get("dskern:owner");return t&&x.isLoggedInUser(t.get("dsaccess:accountName"))},x.getNewRouteIndexFromManagmentView=function(e,t){var i=t.collection,n=i.indexOf(e);return n===i.size()-1&&(n-=1),n},x.getDaysStringForDate=function(e){let t="Days",i=0;return void 0!==e&&(i=u.xsdDayTimeDurationToMilliseconds(e)/(60*v.WORKING_HOURS_IN_A_DAY*60*1e3)),1===i&&(t="Day"),t},x.validateObjectTenant=function(){var e=widget.getValue("X3DContentId");if(e){var t=(e=JSON.parse(widget.getValue("X3DContentId"))).data.items[0],i=E.getTenant();if(t&&t.envId!==i){var n=b.get("E6WComonUI.Warning.TenantMismatch");x.displayWarning(b.replace(n,{TENANT:t.envId}),1e4)}}},x.translateType=function(e){return S[e]||e},x.isValidDate=function(e){return e instanceof Date&&!isNaN(e)},x.isFileNotFound=function(e){return!!(e&&e.errorMsg&&e.errorMsg.contains("404"))},x.fixDisplayMessageMethod=function(){x.displayMessage=x.workaroundDisplayMessage},x.assignToSelfButtonConfig=function(e){var t=e;return{id:"assignToSelfItem",iconClass:e?"fonticon-user-ok disabled":"fonticon-user-ok",callback:function(){t||this.model.assignToSelf(this.options)},toolTip:x.i18n("E6WCommonUI.Command.AssignToSelf")}},x.getDefaultImage=function(e){return x.isTask(e["dsxplan:jsType"])?require.toUrl("E6WCommonApps/assets/img/iconSmallTask.png"):m.getDefaultProjectImage(e["dsplan:projectType"],{isTemplate:e["dsplan:isTemplate"]})},x.loadJSDependency=function(e){return new n((function(t,i){require([e],(function(e){t(e)}),(function(e){i(e)}))}))},x.escapeHTML=function(e){return U({message:e})},x.sanitizeMessage=function(e){if(!M)try{M=require("DS/ENODOMPurify/ENODOMPurify")}catch(t){return console.log(t),e}return M?M.sanitize(e,R):e},x.createTooltip=function(e,t,i){return new r({target:e,body:t||"",position:i||"bottom"})},x.wrapError=function(e,t){try{return e()}catch(e){if(console.error(e),t)return t()}},x.getWeekNumber=E.getWeekNumber,Object.defineProperty(x,"DATE_FORMAT",{get:()=>(P||(P=new Intl.DateTimeFormat(E.getDateFormatRegion(),{year:"numeric",month:"short",day:"numeric"})),P)}),Object.defineProperty(x,"DATE_FORMAT_EN",{get:()=>(F||(F=new Intl.DateTimeFormat("en-us",{year:"numeric",month:"short",day:"numeric"})),F)}),Object.defineProperty(x,"DATE_LONG_FORMAT",{get:()=>(O||(O=new Intl.DateTimeFormat(E.getCurrentLanguage(),{weekday:"long",year:"numeric",month:"long",day:"numeric"})),O)}),Object.defineProperty(x,"TIME_FORMAT",{get:()=>(N||(N=new Intl.DateTimeFormat(E.getCurrentLanguage(),{hour:"numeric",minute:"numeric"})),N)}),Object.defineProperty(x,"TIME_SECONDS_FORMAT",{get:()=>(L||(L=new Intl.DateTimeFormat(E.getCurrentLanguage(),{hour:"numeric",minute:"numeric",second:"numeric"})),L)}),x.IMAGE_MAX_WIDTH=160,x.IMAGE_MAX_HEIGHT=120,x.IMAGE_MAX_BYTE_SIZE=16300,x.LONG_MSG_DELAY=15e3,x.workaroundDisplayMessage=x.displayMessage,x.getObjectDataFromFedSearchOrTypeAheadData=W,x})),define("DS/E6WCommonUI/Models/BulkModel",["UWA/Core","UWA/Class/Model","DS/E6WCommonUI/UIHelper","DS/RDFFoundation/RDFUtils"],(function(e,t,i,n){"use strict";var o=t.extend({_uwaClassName:"BulkModel",setup:function(e){var t=this;if(!(Array.isArray(e)&&e.length>0))throw new Error("Invalid arguments: an array of one or more models should be passed");this.constructor=e[0].constructor,this.models=e,this.models.forEach((function(e){t.listenTo(e,"onAnyEvent",(function(e){var i=Array.prototype.slice.call(arguments,1);t.dispatchEvent(e,i)}))}))},get:function(e){return"solveCounter"===e?this._parent.apply(this,arguments):this.models.reduce(((t,i)=>{let n=i.get(e);return n&&t.push(n),t}),[])},getSolveOptions:function(){let e={};return{additionalElementsToSolve:this.models.reduce(((t,i)=>{if(i.shouldWeSolve({assumeChanges:!0})){let n=i.id||i.get("@id");e[n]=!0,t.push(n)}return t}),[]),additionalParentElementsToSolve:this.models.reduce(((t,i)=>{let n=i.id||i.get("@id");if(e.hasOwnProperty(n)){var o=i.getParent(),a=o&&o.id;a&&t.push(a)}return t}),[])}},fetchForProperty:function(){let e=n.getBatchGenerator();this.models.forEach((function(t){t.fetchForProperty&&t.fetchForProperty({batchBuilder:e,fromMassEdit:!0})})),e.sendBatch()},hasSameModels:function(e){return this.models.length===e.models.length&&this.models.every((function(t){e.models.includes(t)}))},getObjectType:function(){return this.models[0].getObjectType()},isTask:function(){return"Task"===this.getObjectType()},isGate:function(){return"Gate"===this.getObjectType()},isMilestone:function(){return"Milestone"===this.getObjectType()},isMilestoneOrGate:function(){return this.isMilestone()||this.isGate()},isProjectTask:function(){return this.models[0].isProjectTask()},isRouteTask:function(){return this.models[0].isRouteTask()},isIteropTask:function(){return this.models[0].isIteropTask()},isRDFTask:function(){return this.models[0].isRDFTask()},isProject:function(){return i.isProject(this.models[0].get("dsxplan:jsType"))},isDPMMilestoneGate:function(){return this.models[0].isDPMMilestoneGate&&this.models[0].isDPMMilestoneGate()},subscriptionsEnabled:function(){return this.models[0].subscriptionsEnabled()},hasFetchedAccessData:function(){return!1},canDelete:function(){return!0},canAssignToSelf:function(){let e=this.models.every((function(e){return e.hasPermissionToAssignToSelf()})),t=this.models.some((function(e){return e.isAssignedToCurrentUser()}));return e&&!t},getCustomFields:function(){}});return Object.defineProperty(o.prototype,"isRDF",{get:function(){return this.models.every((function(e){return e.isRDF}))},set:function(e){this.models.forEach((function(t){t.isRDF=e}))}}),o})),define("DS/E6WCommonUI/Views/E6WHandlebarsHelpers",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/WidgetUtils","DS/E6WCommonUI/UIHelper"],(function(e,t,i,n){"use strict";var o={};if(!t.helpers.userPictureUrl){var a={registerHelper:function(e,i){t.registerHelper(e,i)}};a.registerHelper("userPictureUrl",(function(e,t,i){return e?n.userPictureURL(e,void 0,{type:t,imageUrl:i}):""})),a.registerHelper("assetImageURL",(function(e){return e?require.toUrl(e):""})),a.registerHelper("makeHTML5Date",(function(e){return i.makeHTML5Date(e)})),a.registerHelper("i18n",(function(e){return o.i18n(e)}));t.registerHelper("eachLimit",function(e){return function(t,i,n){var o,a="",s=t?t.length:0,r=s>i&&i>0?i:s,l=n&&n.hash&&n.hash.startingIndex||0;if(n.data&&(o=e.createFrame(n.data)),"number"!=typeof s)a=n.fn(t);else{for(var d=0,c=r;d<c;d++)o&&(o.index=d,o.indexWithOffset=d+l),a+=n.fn(t[d],{data:o});r!==s&&(a+=n.inverse(this,{data:o}))}return a}}(t)),a.registerHelper("E6Wif",(function(e,t,i){return e===t?i.fn(this):i.inverse(this)})),a.registerHelper("readOnlyValue",(function(e){return isNaN(e)?void 0===e?"--":e:e&&0!==parseInt(e)&&0!==parseFloat(e)?e:"--"})),a.registerHelper("ifEmpty",(function(t,i){return t&&e.is(t,"array")&&t.length>0||t&&0!==parseInt(t)&&0!==parseFloat(t)?i.inverse(this):i.fn(this)})),t.registerHelper("isdefined",(function(e){return void 0!==e})),a.registerHelper("concat",(function(){var e="";for(var t in arguments)"object"!=typeof arguments[t]&&(e+=arguments[t]);return e})),t.registerHelper("sum",(function(e,t){return e+t}))}return o})),define("DS/E6WCommonUI/MultiEdit/MultiEditHelper",["UWA/Core","DS/E6WCommonUI/UIHelper","DS/Controls/Popup","DS/E6WCommonUI/E6WCommonUIConstants","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o){"use strict";var a=function(e){return o.get(e)},s={Draft:a("E6WCommonUI.Label.Draft"),"To Do":a("E6WCommonUI.Label.ToDo"),"In Work":a("E6WCommonUI.Label.InWork"),"In Approval":a("E6WCommonUI.Label.InApproval"),"On Hold":a("E6WCommonUI.Label.OnHold"),Completed:a("E6WCommonUI.Label.Completed"),Done:a("E6WCommonUI.Label.Done"),Create:a("E6WCommonUI.Label.Draft"),Assign:a("E6WCommonUI.Label.ToDo"),Active:a("E6WCommonUI.Label.InWork"),Review:a("E6WCommonUI.Label.InApproval"),Complete:a("E6WCommonUI.Label.Completed"),"dsxplan:Low":a("E6WCommonUI.Label.Low"),"dsxplan:Medium":a("E6WCommonUI.Label.Medium"),"dsxplan:High":a("E6WCommonUI.Label.High"),"dsxplan:Urgent":a("E6WCommonUI.Label.Urgent"),Low:a("E6WCommonUI.Label.Low"),Medium:a("E6WCommonUI.Label.Medium"),High:a("E6WCommonUI.Label.High"),Urgent:a("E6WCommonUI.Label.Urgent"),"dsxplan:Open":a("E6WCommonUI.Label.ToDo"),"dsxplan:Draft":a("E6WCommonUI.Label.Draft"),"dsxplan:InProgress":a("E6WCommonUI.Label.InWork"),"dsxplan:Done":a("E6WCommonUI.Label.Completed"),"dsxplan:OnHold":a("E6WCommonUI.Label.OnHold"),"dsplan:xProject":a("E6WCommonUI.Tag.dsplan:xProject"),"dsplan:Project":a("E6WCommonUI.Tag.dsplan:Project"),"Resource Levelling":a("E6WCommonUI.Label.TimeAndResource"),"Temporal Scheduling":a("E6WCommonUI.Label.TimeOnly"),"dsplan:Milestone":a("E6WCommonUI.Label.Milestone"),"dsxnpi:MilestoneLaunched":a("E6WCommonUI.Label.MilestoneLaunched"),"dsxnpi:MilestonePlanned":a("E6WCommonUI.Label.MilestonePlanned"),"dsxnpi:MilestoneDefined":a("E6WCommonUI.Label.MilestoneDefined"),"dsxnpi:MilestoneDesigned":a("E6WCommonUI.Label.MilestoneDesigned"),"dsxnpi:MilestoneDeveloped":a("E6WCommonUI.Label.MilestoneDeveloped"),"dsxnpi:MilestoneApproved":a("E6WCommonUI.Label.MilestoneApproved"),"dsxnpi:MilestoneDeployed":a("E6WCommonUI.Label.MilestoneDeployed"),"dsxnpi:MilestoneClosed":a("E6WCommonUI.Label.MilestoneClosed")};return{getUniqueAttrValues:function(t,i){let n=e.is(i.map,"function")&&i.map((e=>{if("number"===t.type||"range"===t.type)return void 0!==e[t.name]&&null!==e[t.name]||(e[t.name]=0),"range"===t.type?{label:e[t.name]+"%",value:e[t.name]}:e[t.name];if("uom"===t.type){let i=e.estimatedDurationInputUnit,n=parseFloat(e[t.name])+" "+t.uomValues[i||0],o=e[t.toleranceName];return o>0&&(n+=" "+t.toleranceLabel+" "+o),{label:n,value:parseFloat(e[t.name]),unit:i,offsetValue:o}}if(e[t.name]&&e[t.name].displayValue)return e[t.name];if(Array.isArray(e[t.name])){let i={};for(let n=0;n<e[t.name].length;n++){const o=e[t.name][n];t.attributeToDisplay&&(i[o[t.attributeToDisplay]]=o),o["@id"]&&(i[o["@id"]]=o),o.title&&(i[o.title]=o),o.displayValue&&(i[o.displayValue]=o)}return i}return Array.isArray(e[t.name])||"object"!=typeof e[t.name]?e[t.name]?s[e[t.name]]||e[t.name]:void 0!==e[t.name]&&null!==e[t.name]?e[t.name]:void 0:t.attributeToDisplay?{label:e[t.name][t.attributeToDisplay],value:e[t.name]}:e[t.name]["@id"]?{label:e[t.name].title||s[e[t.name]["@id"]],value:e[t.name]["@id"]}:e[t.name].displayValue?{label:e[t.name].displayValue,value:e[t.name].actualValue}:e[t.name].title?{label:e[t.name].title,value:e[t.name]}:e[t.name]}));"date"!==t.type&&"startStop"!==t.type||(n=n.filter(((e,t,i)=>{if(e&&e.displayValue){let n="Invalid Date"===new Date(e.displayValue).toString()?e.displayValue:new Date(e.displayValue).toISOString();return e.actualValue="Invalid Date"!==new Date(e.actualValue).toString()?e.actualValue:n,t===i.findIndex((t=>t&&t.displayValue===e.displayValue))}if(e&&e.label)return e.value="Invalid Date"===!new Date(e.value).toString()?e.value:new Date(e.label).toISOString(),t===i.findIndex((t=>t&&t.label===e.label))})));if(n.every((e=>void 0!==e)))return Array.from(new Set(n.map(JSON.stringify))).map(JSON.parse)},getComboBoxOptions:function(e,o){let r={enableSearchFlag:!1,actionOnClickFlag:!1,popupSizeAdjustPolicy:i.SizeAdjustPolicyEnum.Crop,selectedIndex:0},l=[];for(let i=0;i<o.length;i++){let a=o[i];var d;if("object"==typeof a&&Object.keys(a).length>0)if(a.label)d={label:s[a.label]||a.label,value:a.value},"uom"===e.type&&("estimatedDurationInputValue"===e.name&&(d.unit=a.unit),d.value=[a.value,a.offsetValue]);else if("date"===e.type||"startStop"===e.type){var c=new Date(a.actualValue);"Invalid Date"===c.toString()&&(c=new Date(a.displayValue||a)),d={label:t.getIntLongDateFormat(a.value||a).displayValue,value:c},e.name!==n.ESTIMATED_START_DATE&&e.name!==n.ESTIMATED_DUE_DATE||(d.label=t.getIntlDateFormat(a.actualValue||a).displayValue)}else d=a.actualValue?{label:a.displayValue,value:a.actualValue}:{label:Object.keys(a)[0],value:a[Object.keys(a)[0]].actualValue||a[Object.keys(a)[0]]};else d={label:s[a]||a,value:a};l.push(d)}return l.length>0?r.elementsList=[{label:a("E6WCommonUI.Label.MutipleValues")}].concat(l):r.elementsList=null,r},isActualDateOfCompletedTask:function(e,t){return"Complete"===t.state&&(e.name===n.ACTUAL_START_ATTR||e.name===n.ACTUAL_FINISH_ATTR)}}})),define("DS/E6WCommonUI/SubscribeUtilBase",["UWA/Core","UWA/Utils","UWA/Class/Events","DS/E6WCommonUI/UIHelper","DS/PlatformAPI/PlatformAPI","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a){"use strict";const s="onActivityComplete",r="complete",l="fail";var d={i18n:function(){return a.get.bind(a)},getMessage:function(e){var t=e&&this.i18n(e.reason);return e.args&&(t=a.replace(t,n.escapeHTML(e.args))),t},subscribeActivity:function(i,n){var a=e.clone(n||{},!1),s=a.uuid||t.getUUID(),r="XApp.Magic.Feedback."+s,l={name:i,id:s};return o.subscribe(r,(function(e){d.processMessage(l,e)})),a.start&&d.startActivity(i,s,n),s},processMessage:function(e,t){var i=t.type,n=d.getMessage(t);d.events.dispatchEvent("onActivityProgress",{activity:e,loaded:t.loaded,total:t.total,type:i,log:n}),i!==r&&i!==l||(e.msgType=i,d.completeActivity(e))},completeActivity:function(t){d.events.dispatchEvent(s,e.merge(t,{msgType:r}))},startActivity:function(t,i,n){const o=e.clone(n||{},!1);d.events.dispatchEvent("onActivityStart",[{name:t,id:i},o])}};return d.ACTIVITY_COMPLETE=s,d.MESSAGE_COMPLETE=r,d.MESSAGE_FAIL=l,d.events=new i,d})),define("DS/E6WCommonUI/Search",["UWA/Core","UWA/Utils/InterCom","UWA/Utils","DS/RDFFoundation/MemberUtils","DS/E6WCommonUI/PlatformManager"],(function(e,t,i,n,o){"use strict";var a=["3dspace","drive"],s=function(e,n){this.socketName="search_socket_"+i.getUUID(),this.socket=new t.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var o=this;this.socket.addListener("onCloseTransient",(function(){o.unregister()}));var a=this.options({title:"iTitle"});n&&(a.idcard_activated=!0)};return s.prototype.destroy=function(){var e={};e.widget_id=widget&&widget.id||enoviaServer.widgetId,this.socket.dispatchEvent("UnregisterContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.removeListener("onCloseTransient"),this.socket.disconnect()},s.prototype.options=function(t){var i,n=e.clone(t||{},!1),o=((i={title:"",types:"",role:"",default_search_criteria:""}).app_socket_id=this.socketName,i.mode="furtive",i.widget_id=widget.id,i.default_with_precond=!0,i.show_precond=!1,i.idcard_activated=!1,i.select_result_max_idcard=!1,i.source=["3dspace"],i.tenant=window.enoviaServer?enoviaServer.tenant:widget.getValue("x3dPlatformId"),i.precond="",i.excluded_types={},i.callback=null,i);n.excludedSearchTypes&&(o.excluded_types=n.excludedSearchTypes),e.extend(o,n);let a=o.fieldConfig;delete o.fieldConfig;let r=o.default_search_criteria;if(a?o.specific_source_parameter=s.computeSourceParameters(a,r):(!function(t){if(e.is(t.types,"object")){var i="Config not supported by 3dsearch. If you specify types for any source, you must do so for all sources",n=e.is(t.source,"array")?t.source:[t.source],o=Object.keys(t.types);if(o.length!==n.length)throw new Error(i);for(var a=0;a<o.length;a++){const e=o[a];if(-1===n.indexOf(e)||!e||0===e.length)throw new Error(i)}}}(o),o.precond||(o.precond=s.buildSearchTypeQuery(o.types,o))),o.additionalQuery)if(e.is(o.additionalQuery,"string")){var l=o.precond||"";o.precond=l+o.additionalQuery}else for(const e of Object.keys(o.additionalQuery)){let t=o.specific_source_parameter[e];t&&t.additional_query?o.specific_source_parameter[e].additional_query+=o.additionalQuery[e]:(t={},t[e].additional_query=o.additionalQuery[e],o.specific_source_parameter[e]=t)}return o},s.prototype.activate=function(t){var i=this,n=this.options(t),o=n.callback;e.is(o,"function")||(n.mode="default"),this.callback=o;var a={};a.widget_id=widget&&widget.id||enoviaServer.widgetId,this.socket.dispatchEvent("UnregisterContext",a),this.socket.addListener("RegisterContext_Response",(function(){i.socket.dispatchEvent("InContextSearch",n),i.socket.removeListener("RegisterContext_Response")})),this.socket.dispatchEvent("RegisterContext",n)},s.prototype.isAvailable=function(){return e.is(this.socket)},s.prototype.objectsSelected=function(e){this.callback&&this.callback(e)},s.prototype.unregister=function(){var e={widget_id:widget&&widget.id||enoviaServer.widgetId};this.socket.dispatchEvent("UnregisterContext",e)},s.buildSearchTypeQuery=function(t,i){var n;if(t){if(e.is(t,"string")){var o=i.source||["3dspace"];if(-1===(o=e.is(o,"array")?o:[i.source]).indexOf("3dspace")&&o.length)throw new Error("types as string only supported for 3dspace source as it is a backward compatibility feature");t={"3dspace":t.split(",")}}var a=Object.keys(t),r=a.length;n="(";for(var l=0;l<r;l++){0!==l&&(n+=" OR ");var d=a[l],c=t[d];e.is(c,"string")&&(c=[c]),n+=s.buildSearchTypeQueryForSource(d,c,i)}if(i.excluded_types)n+=Object.keys(i.excluded_types).length>0?") AND NOT "+s.buildSearchTypeQuery(i.excluded_types,{exclude:!0}):")";else n+=")"}else i.excluded_types&&(n=" NOT "+s.buildSearchTypeQuery(i.excluded_types,{exclude:!0}));return n},s.buildSearchTypeQueryForSource=function(e,t,i){var n,o=s.isM1BasedSource(e);if(n=o?"flattenedtaxonomies:":"[ds6w:type]:",n+="(","swym"===e&&t&&-1!==t.indexOf("pno:Person")&&i&&!i.exclude&&i.excludePendingUser&&(n="ut_state:1 && "+n),t)for(var a=0;a<t.length;a++){var r=t[a];0!==a&&(n+=" OR "),n+=o?'"types/'+r.trim()+'"':'"'+r.trim()+'"'}return n+=")"},s.isM1BasedSource=function(e){return-1!==a.indexOf(e)},s.computeSourceParameters=function(t,i){var n=e.clone(t.excludeSearchTypes||{},!1),o={};a.forEach((function(i){(e.is(t.searchSource,"array")&&-1!==t.searchSource.indexOf(i)||t.searchSource===i)&&(n[i]||(n[i]=["Person","Security Context"]))}));var r,l=t.searchSourceTypes;return l&&(r={types:l,specificSourceParameter:o,excludePendingUser:t.excludePendingUser,agoraMode:t.agoraMode},s._buildSpecificSourceParameter(r,i)),r={types:n,specificSourceParameter:o,exclude:!0,agoraMode:t.agoraMode},s._buildSpecificSourceParameter(r,i),o},s._buildSpecificSourceParameter=function(e,t){for(var i=e.specificSourceParameter,o=e.types,a=e.agoraMode,r=Object.keys(o),l=r.length,d=0;d<l;d++){var c=r[d],u=o[c],h=i[c],m=h&&h.additional_query||"";if(m&&(m+=" AND "),e.exclude&&(m+="NOT "),t&&"usersgroup"in e.types){if("swym"===c&&(m=" AND personOrGroup:("+t.replace(/\*/,"")+")"),"usersgroup"===c){m=" AND [ds6w:label]:("+(t.includes("*")?t:n.escapeRegExp(t)+"*")+")"}}else m+=s.buildSearchTypeQueryForSource(c,u,e);i[c]={additional_query:m,...a&&{agoraMode:a}}}return i},s.prototype.activateQueryBuilder=function(t){const i=e.clone(t||{},!1);this.socket.removeListener("IncontextBuildQuery_Response"),this.socket.addListener("IncontextBuildQuery_Response",(e=>{t.callback&&t.callback(e)}));const n={widget_id:window.widget.id,app_socket_id:this.socketName,tenant:o.getTenant(),suggestions:{show_classification_attributes:!0,show_company_tags:!0,types:i.searchSourceTypes?this.buildInContextTypes(i.searchSourceTypes):void 0}};this.socket.dispatchEvent("IncontextBuildQuery",n)},s.prototype.buildInContextTypes=function(e){const t={drive:"ds6wg","3dspace":"ds6wg",swym:"swym"};return Object.keys(e).reduce(((i,n)=>(e[n].forEach((e=>{i.push({uri:t[n]?`${t[n]}:${e}`:e})})),i)),[])},s.QUERY_BUILDER_RESP_OK="OK",s})),define("DS/E6WCommonUI/SvgUtils",["UWA/Core","DS/E6WCommonUI/UnitBezier"],(function(e,t){"use strict";var i={createSVGElement:function(t,i){var n=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg",t));return i&&n.setAttributes(i),this.convertToAnimatableSVG(n),Object.defineProperty(n,"offsetHeight",{get:function(){try{return this.getBBox?this.getBBox().height:0}catch(e){return 0}}}),Object.defineProperty(n,"offsetWidth",{get:function(){try{return this.getBBox?this.getBBox().width:0}catch(e){return 0}}}),n},convertToAnimatableSVG:function(i){return i.animationFrameTimestamps={},i.setAttribute=function(e){var t=this.animationFrameTimestamps[e];t&&(window.cancelAnimationFrame(t),delete this.animationFrameTimestamps[e]),this.__proto__.setAttribute.apply(this,arguments)}.bind(i),i.animateAttribute=function(n,o,a){var s,r=null,l=i.getAttribute(n),d=0,c=this,u=function(e){delete c.animationFrameTimestamps[n],r||(r=e);var t=e-r;if(t<a){var i=parseFloat(l+d*s.solve(t/a));c.setAttribute(n,i),c.animationFrameTimestamps[n]=window.requestAnimationFrame(u)}else c.setAttribute(n,o)};["x","y","width","x2","cx"].indexOf(n)>-1?(l=l?parseFloat(l):0,a=a||"0.5s",s=new t({easeOut:(d=o-l)<0}),c.animationFrameTimestamps[n]=window.requestAnimationFrame(u)):(e.log("Animate not defined for attribute "+n+". Just setting it."),i.setAttribute(n,o))}.bind(i),-1!==this.displayPosition}};return i})),define("DS/E6WCommonUI/Views/FoundationBaseView",["UWA/Core","UWA/Element","UWA/Event","UWA/Class/View","DS/E6WCommonUI/SvgUtils"],(function(e,t,i,n,o){"use strict";var a=new WeakMap,s=t.prototype.constructor.hasClassName;t.prototype.constructor.hasClassName=function(e){if(this instanceof SVGElement){var t=this.className.baseVal;return t&&t.contains(e," ")}return s.apply(this,arguments)};var r=t.prototype.constructor.addClassName;t.prototype.constructor.addClassName=function(e){return this instanceof SVGElement?(this.hasClassName(e)||this.setAttribute("class",this.getAttribute("class")+" "+e),this):r.apply(this,arguments)};var l=t.prototype.constructor.removeClassName;t.prototype.constructor.removeClassName=function(e){if(this instanceof SVGElement){var t=this.getAttribute("class")||"";return this.setAttribute("class",t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1").trim()),this}return l.apply(this,arguments)};var d=n.extend({tagName:"div",id:function(){var e;return this.collection?e=this.collection.extid:this.model&&(e=this.model.id),e},_startOfSetup:Function.prototype,_endOfdestroy:Function.prototype,setup:function(e){return this._startOfSetup(),a.set(this.container,this),this._parentView=e?e.parentView:void 0,e},init:function(t){var i=t&&t.tagName||this.tagName,n=t&&t.className||this.className,o=t&&t.id||this.id;if(!t||!t.container){var a=/^svg:(.*)/.exec(i);if(a){this.model=t&&t.model,this.collection=t&&t.collection;var s=t&&t.attributes||this.attributes||{};n&&(n=e.is(n,"function")?n.call(this):n,s.class=n),this.container=this.createSVGElement(a[1],s),o&&(e.is(o,"function")&&(o=o.call(this)),this.container.id=o)}}return this._parent.apply(this,arguments)},addChildView:function(e){return this._childrenViews?this._childrenViews.push(e):this._childrenViews=[e],e._parentView||(e._parentView=this),e},cleanUpChildren:function(){var t=this;this._childrenViews&&(e.clone(this._childrenViews,!1).forEach((function(i){t.stopListening(i),i._parentView===t?e.is(i.destroy,"function")&&i.destroy():console.log("parentView of childView is inconsistent, check for bugs")})),delete this._childrenViews)},removeChildView:function(e){if(this._childrenViews){var t=this._childrenViews.indexOf(e);if(-1!==t)return this._childrenViews.splice(t,1),e._parentView===this&&delete e._parentView,!0}return!1},destroy:function(){this.isDestroyed?console.log("FoundationBaseView: View destroyed twice. Check for bug."):(this.dispatchEvent("onDestroy"),this.cleanUpChildren(),this.stopListening(),this.collection=null,this.model=null,this._parentView&&this._parentView.removeChildView(this),this._parent(),this.container&&e.is(this.container,"empty")&&this.container.empty(!0),this.container=null,this._parentView=null,this.isDestroyed=!0,this._endOfdestroy())},setDefaultImages:function(e){for(var t=(e||this.container).getElements("img"),i=t.length,n=function(){this.removeEvent("error"),this.src=""},o=0;o<i;o++){t[o].addEvent("error",n)}},createSVGElement:function(e,t){return o.createSVGElement(e,t)},escapeCssId:function(e){return e.replace(/[:=? ~!@$%^&*()+,./';"><[\]{}|`#]/g,"\\$&")}});return d.getViewFromContainer=function(e){return e&&a.get(e)},d})),define("DS/E6WCommonUI/Views/DetailsDisplaySharedView",["UWA/Core","DS/Controls/TooltipModel","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/E6WHandlebarsHelpers","DS/E6WCommonUI/CommonUIHandlebarsHelper","DS/E6WCommonUI/UIHelper","DS/Controls/Button","DS/Controls/Popup","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=n.extend({_uwaClassName:"E6WCommonUIDetailsDisplaySharedView",tagName:"div",className:"details-display-shared-view ddv-field form-group ",name:"E6WCommonUI.DetailsDisplaySharedView",id:function(){return this._config.type+"Property_"+this.cid},canReadWrite:function(){return"true"===this._config.readWrite||"boolean"==typeof this._config.readWrite&&this._config.readWrite},init:function(t){a.registerPartials();var i=e.clone(t||{},!1);this._config=i.config,this._parent.apply(this,arguments),this.setConfiguredTemplate()},setConfig:function(e){this._config=e,this.setConfiguredTemplate()},setup:function(t){var i=e.clone(t||{},!1);this._options=i;var n=i.i18n;n&&(this.i18n=n),this.tenant=i.tenant,this.model&&this._config&&this.addModelEvents(),this._setContainerAttributes(),this._parent.apply(this,arguments)},setConfiguredTemplate:function(){if(this.compiledTemplate){var e=o.i18n;o.i18n=d.get.bind(d);var t=this._config;t.viewId="_"+this.cid;var n=this.compiledTemplate(t);t.template=i.compile(n),o.i18n=e}},template:function(e){var t=e.data,i=o.i18n;o.i18n=d.get.bind(d);var n=this._config.template(t);return o.i18n=i,n},_setContainerAttributes:function(){var e=this._config;e.className&&this.container.toggleClassName(e.className,!0),e.W&&this.container.toggleClassName("sixdub "+e.W,!0),this.container.setAttribute("data-field-type",e.type),this.container.setAttribute("data-field-name",e.name),this.container.setAttribute("data-field-index",e.index)},enableRefreshView:()=>!0,addModelEvents:function(){var e=this._config;this.model&&this.model.addEvent&&(this.listenTo(this.model,"onChange:"+e.name,(function(e,t,i){i&&i.detailsDisplayViewDebounce||!1===this._config.enableRefreshView||!this.enableRefreshView()||this.refreshView(t)})),e.endDateAttribute&&this.listenTo(this.model,"onChange:"+e.endDateAttribute,(function(){this.render()})),this.listenTo(this.model,"onValidationFailure",this._highlightValidationErrors),this.listenTo(this.model,"onValidationSuccess",this._clearValidationErrors))},refreshView:function(){this.render()},resetModel:function(e){e!==this.model&&(this.model&&this.stopListening(this.model),this.model=e,this.addModelEvents(),this._highlightValidationErrors())},_highlightValidationErrors:function(){if(this._clearValidationErrors(),this.model&&this.model.validationError&&this.model.validationError.fields){var e=this._config,t=!1,i=this.getContainerElement(),n=e.name;if(-1!==this.model.validationError.fields.indexOf(n)){t=!0;var o=this.model.validationError.messages&&this.model.validationError.messages[n];o&&this._displayValidationError(o,i)}i&&i.toggleClassName("has-error",t)}},_displayValidationError:function(i,n){var o=n&&n.getElementsByClassName("wux-ui-3ds-error");o&&o.length>0?o[0].tooltipInfos=new t({shortHelp:i}):(this._errorSpanNode||(this._errorSpanNode=e.createElement("span",{class:"text-error"})),this._errorSpanNode.inject(this.getContainerElement()),this._errorSpanNode.setText(i))},getContainerElement:function(){return this.container},_clearValidationErrors:function(){var e=this.getContainerElement(),t=e&&e.getElementsByClassName("errorTooltips");this._errorSpanNode&&this._errorSpanNode.remove(),e&&e.toggleClassName("has-error",!1),t&&t.length>0&&(t[0].hidden=!0)},normalizedSet:function(t,i,n){var o,a=t.validationError,s=e.clone(i||{},!1);return s.detailsDisplayViewDebounce=!0,e.is(t.set,"function")?(s.whisper=!0,o=t.set(i.name,n,s)):o=t[i.name]=n,a&&!t.validationError&&e.is(t.dispatchEvent,"function")&&t.dispatchEvent("onValidationSuccess"),o},normalizedGet:function(t,i){return t&&i?e.is(t.get,"function")?t.get(i):t[i]:""},render:function(t){if(!this.model)return this;var i=e.clone(t||{},!1).data;i=this._getData(i),this.undelegateDOMEvents();var n=this._config.readWrite;n||(n=!1),this.container.toggleClassName("editable",Boolean(n&&i.canEdit)),this.container.setHTML(this.template({data:i})),this.delegateDOMEvents(),this._highlightValidationErrors(),this._addTooltip();const o=require("DS/Utilities/TouchUtils");return o&&o.getTouchMode()&&this.container.toggleAttribute("touch-mode",!0),this},_addTooltip:function(){if(this._config.tooltipTitle){const e=this.getTooltipElement();e&&(e.tooltipInfos=new t({title:this._config.tooltipTitle,shortHelp:this._config.tooltipBody}))}if(this._config.customTooltips){var i=this.container.getElement("#labelIcons"),n=[];i&&(this._config.customTooltips.forEach((o=>{var a=e.createElement("span",{class:"fonticon fonticon-"+o.iconClass});a.tooltipInfos=new t({title:o.tooltipTitle,shortHelp:o.tooltipBody,allowUnsafeHTMLShortHelp:!0}),"startStop"===this._config.type?n.push(a):a.inject(i)})),"startStop"===this._config.type&&(i=this.container.getElements("#labelIcons")).forEach(((e,t)=>{n[t].inject(e)})))}},getTooltipElement:function(){return this.getElement(".field-label .field-label-actions .fonticon-info")},getDataOptions:function(){return{attributes:[this._config.name,"canEdit"],level:0}},getExpanded:function(){return this._parentView&&this._parentView.isExpanded(this._config.name)},setExpanded:function(){return this._parentView&&this._parentView.setExpanded(this._config.name)},removeExpanded:function(){return this._parentView&&this._parentView.removeExpanded(this._config.name)},_getData:function(e){var t=e;if(!e&&this.model){var i=this.getDataOptions();t=s.normalizedToJson(this.model,i)}return t}});return c.events={menuOpened:"menuOpened"},c})),define("DS/E6WCommonUI/Views/PriorityView",["UWA/Core","DS/UIKIT/Input/Button","DS/UIKIT/Input/ButtonGroup","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/E6WCommonUI/E6WCommonUIConstants","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a){"use strict";var s=function(e){return a.get(e)},r=n.extend({_uwaClassName:"PriorityView",id:function(){return"PriorityView_"+this.cid},setup:function(){this._parent.apply(this,arguments),this.titleElement=this.createPriorityButtonGroupTitle(),this.priorityButtonGroup=this.createPriorityButtonGroup()},render:function(){this.container.empty();let e=this._config.readWrite;e||(e=!1);let t=!this.normalizedGet(this.model,"canEdit")||!e;return this.priorityButtonGroup.setDisabled(t),this.titleElement.inject(this.container),this.priorityButtonGroup.inject(this.container),this},createPriorityButtonGroup:function(){var e=this.model.get(this._config.name);e&&e.id&&(e=e&&e.id),this._config.priorityMapping&&(e=this._config.priorityMapping[e]);var n=new i({type:"radio",buttons:[new t({name:o.PRIORITY_LOW,className:"success large",icon:"low",attributes:{title:s("E6WCommonUI.Label.Low")},active:e===o.PRIORITY_LOW}),new t({name:o.PRIORITY_MEDIUM,className:"info large",icon:"medium",attributes:{title:s("E6WCommonUI.Label.Medium")},active:e===o.PRIORITY_MEDIUM}),new t({name:o.PRIORITY_HIGH,className:"warning large",icon:"high",attributes:{title:s("E6WCommonUI.Label.High")},active:e===o.PRIORITY_HIGH}),new t({name:o.PRIORITY_URGENT,className:"error large",icon:"alert",attributes:{title:s("E6WCommonUI.Label.Urgent")},active:e===o.PRIORITY_URGENT})],events:{onClick:this.onClickButton.bind(this)}});return n.setClassName("item-priority"),n},createPriorityButtonGroupTitle:function(){return e.createElement("label",{text:s("E6WCommonUI.Label.Priority")})},destroy:function(){this.priorityButtonGroup.destroy(),this._parent.apply(this,arguments)},onClickButton:function(e,t){this.model.set(this._config.name,t.options.name)}});return r})),define("DS/E6WCommonUI/Views/TextAreaView",["UWA/Core","DS/Handlebars/Handlebars4","DS/UIKIT/Tooltip","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/E6WCommonUI/E6WCommonUIConstants","text!DS/E6WCommonUI/assets/templates/textarea.html.handlebars"],(function(e,t,i,n,o,a,s){"use strict";var r=0,l=t.compile(s),d="showing-more",c=".content",u=o.extend({_uwaClassName:"E6WCommonUITextAreaView",tagName:"div",name:"E6WCommonUI.TextAreaView",domEvents:{"click .show-more":"_textAreaShowMore","click .show-less":"_textAreaShowLess","input textarea.content ":"_inputDataEntry"},addModelEvents:function(){this._parent.apply(this,arguments),this.model.addEvent&&this.listenTo(this.model,"onChange:"+this._config.name,this._postTreatmentTextArea)},setup:function(){this._tooltips=[],this._parent.apply(this,arguments)},render:function(){var e=this;this.removeEventListener();var t=this._parent.apply(this,arguments);this.addEventListener(),this.container.toggleClassName("hide-links",!0);var n=this.getElements(".tag-content");return n&&n.forEach((function(t){e._tooltips.push(new i({target:t,body:t.getText()}))})),t},refreshView:function(){this._parent.apply(this,arguments),this._postTreatmentTextArea()},destroy:function(){this.removeEventListener(),this._tooltips.forEach((function(e){e.destroy()})),this._tooltips=[],this._parent.apply(this,arguments)},addEventListener:function(){var e=this.container.getElement("textarea,input");e&&(e.addEventListener("focus",this._textAreaShowMore.bind(this)),this._config.required&&(this._blurListener=this._onBlurInputDataEntry.bind(this),e.addEventListener("blur",this._blurListener)))},removeEventListener:function(){if(this.container){var e=this.container.getElement("textarea,input");e&&e.removeEventListener("blur",this._blurListener)}},_getInputValue:function(){var e,t=(e=this.canReadWrite()&&this.normalizedGet(this.model,"canEdit")?this.getElement(".content"):this.getElement(".read-only")).value;return this._config.removeCarriageReturns&&(t=t.replace(/\n/g," "),e.value=t),t},_inputDataEntry:function(){this.normalizedSet(this.model,this._config,this._getInputValue()),this._postTreatmentTextArea(this._config)},_onBlurInputDataEntry:function(){var e=this._getInputValue().trim();e!==this.normalizedGet(this.model,this._config.name)&&this.normalizedSet(this.model,this._config,e),!(this.model.validationError&&this.model.validationError.fields)&&this._config.required&&this.container.toggleClassName("has-error",!e||0===e.length)},_textAreaShowMore:function(){this.container.toggleClassName(d,!0)},_textAreaShowLess:function(t){e.Event.getElement(t).getClosest(".form-group").toggleClassName(d,!1),this._postTreatmentTextArea()},_postTreatmentTextArea:function(){var e,t=this._config;"text"===t.type&&(e=!0);var i=this.getContentElement();if(i){var n=this.getElement("style");if(n){var o="",a="",s="";try{r||(r=this.getLineHeight()),e&&(i.style.transition="none",i.style.height=r+"px"),this._viewAllHeight=this.getViewAllHeight();var l=this.getDesiredHeight();"textarea"!==t.type&&"RichText"!==t.type||(this._viewAllHeight<=l&&(this._viewAllHeight=l),this.container.toggleClassName("hide-links",isNaN(this._viewAllHeight)||isNaN(l)||this._viewAllHeight<=l)),o=this.getRegularStyle(),a=this.getFocusStyle(),s=this.getShowingMoreStyle(),n.setHTML(o+a+s)}finally{e&&(i.style.height="",window.requestAnimationFrame((function(){i.style.transition=""})))}}}},getContentElement:function(){return this.getElement(c)},getHeightCalculatorElement:function(){return this.getElement(".height-calculator")},getSelectorBase:function(){return"#"+this._config.type+"Property_"+this.cid},getSelector:function(){return this.getSelectorBase()+" "+c},getSelectorFocus:function(){return this.getSelector()+":focus"},getLineHeight:function(){var e=this.getContentElement();return parseInt(e.getStyle("lineHeight"),10)},getDesiredHeight:function(){return this._config.numberOfDisplayLines*r},getFocusDesiredHeight:function(){return this._config.numberOfEditableLines*r},getShowingMoreStyle:function(){return"#"+this._config.type+"Property_"+this.cid+".showing-more "+c+this.getViewAllTextStyle()},getViewAllTextStyle:function(){return"{\n height:"+this._viewAllHeight+"px;\n line-height:"+r+"px;}"},getRegularStyle:function(){var e="",t=this.getSelector();if("text"===this._config.type)e=t+this.getViewAllTextStyle();else{var i=this.getDesiredHeight();isNaN(i)||(e=t+" { \n height:"+i+"px;\n line-height:"+r+"px; \n}\n")}return e},getFocusStyle:function(){var e="",t=this.getSelectorFocus(),i=this.getFocusDesiredHeight();return isNaN(i)||(e=t+" { \n height:"+i+"px;\r }\n"),e},getViewAllHeight:function(){var e,t=this.getContentElement(),i=this.getHeightCalculatorElement(),n=r;return i&&(e="SPAN"===t.tagName?t.textContent:(e=this.getTextValue()).htmlDecode().replace(/&nbsp;/g," ").replace(/(<([^>]+)>)/gi,""),i.textContent=e,i.style.lineHeight!==r+"px"&&(i.style.lineHeight=r+"px"),n=i.scrollHeight),n},getTextValue:function(){return this.getContentElement().value}});return u.prototype.compiledTemplate=l,u})),define("DS/E6WCommonUI/Views/DateView",["UWA/Core","DS/Handlebars/Handlebars4","DS/Controls/DatePicker","DS/RDFFoundation/UserPreferences","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/date.html.handlebars"],(function(e,t,i,n,o,a){"use strict";var s=t.compile(a),r=!1,l=o.extend({_uwaClassName:"E6WCommonUIDateView",tagName:"div",name:"E6WCommonUI.DateView",domEvents:{'change input.data-entry[type="date"]':"dateDataEntry","keyup input.input-date":"dateDataEntry"},setup:function(){this._parent.apply(this,arguments),this._datePickers=[]},render:function(){var e=this._parent.apply(this,arguments);this._setupUIKITDatePickers();var t=this.container.getElements(".read-only"),i=this.model.get(this._config.name),o=i&&i.actualValue;return!n.getHideWeekLabel()&&this._config.showWeekNumbers&&t&&t.forEach((e=>{!isNaN(o)&&(e.innerText+=n.getWeekNumber(o))})),e},_setupUIKITDatePickers:function(){this._datePickers.forEach((e=>e.destroy())),this._datePickers=[];for(var e=this.getElements("input[type=date]"),t=e.length,i=this.dateDataEntry.bind(this),n=0;n<t;n++){var o=e[n],a=this._getInputDate(o,i);a.addEventListener("change",i),this._completeCurInput(o,a),this.addChildView(a),this._datePickers.push(a),this._appendWeekNumbers(a)}},getDataOptions:function(){const e=this._parent.apply(this,arguments);return this._config.endDateAttribute&&e.attributes.push(this._config.endDateAttribute),e},_getInputDate:function(t,n){var o=this._config,a=o.name,s=t.getParent(),r="";"startStop"===o.type&&o.endDateAttribute&&s.hasClassName("stop")&&(a=o.endDateAttribute,r=".stop"),"startStop"===o.type&&s.hasClassName("start")&&(r=".start");var l=this.normalizedGet(this.model,a);l&&l.actualValue&&(l=l.actualValue);var d={events:{onChange:n},allowTextEdition:void 0===o.allowTextEdition||o.allowTextEdition,renderTo:this.container.getElement(".input-group"+r)};return o.min instanceof Date&&(d.minValue=new Date(o.min.getTime())),o.max instanceof Date&&(d.maxValue=new Date(o.max.getTime())),e.is(l,"string")&&l?d.value=new Date(parseInt(l,10)):l instanceof Date?d.value=isNaN(l)?"":l:e.is(l,"number")&&l&&(d.value=new Date(parseInt(l,10))),this._childrenViews||(this._childrenViews=[]),d.value||(d.value=void 0),d.required||(d.allowUndefinedFlag=!0),d.showWeekNumbers=o.showWeekNumbers,new i(d)},_completeCurInput:function(e,t){var i=e.getParent();this.addChildView(t),e.remove(),t.inject(i)},dateDataEntry:function(t){const i=this._datePickers.find((e=>e.elements.container===t.target));if(i&&i.value&&setTimeout((()=>this._appendWeekNumbers(i)),0,this),t.ctrlKey||17===t.keyCode)r=!0;else if(r&&67===t.keyCode)r=!1;else{var n=e.Event.getElement(t),o=t.dsModel&&t.dsModel.value;if(this._config){var a=o;if(t.firedBy)a=t.firedBy.getDate()?t.firedBy.getDate().getTime():"";else if(o)a=new Date(o).getTime();var s=this._config.name;"startStop"===this._config.type&&this._config.endDateAttribute&&n.closest(".input-group").hasClassName("stop")&&(s=this._config.endDateAttribute);var l=e.clone(this._config,!1);l.name=s;var d=isNaN(a)?"":{actualValue:a};this.normalizedSet(this.model,l,d)}}},_appendWeekNumbers:function(e){e&&e.value&&!n.getHideWeekLabel()&&this._config.showWeekNumbers&&(e.elements.inputField.value+=n.getWeekNumber(new Date(e.value)))}});return l.prototype.compiledTemplate=s,l})),define("DS/E6WCommonUI/Views/NumberView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/number.html.handlebars","DS/E6WCommonUI/NumberUtils"],(function(e,t,i,n,o,a){"use strict";var s=t.compile(o),r=n.extend({_uwaClassName:"E6WCommonUINumberView",tagName:"div",name:"E6WCommonUI.NumberView",domEvents:{'input input.data-entry[type="number-as-text"]':"_numberDataEntry"},render:function(e){var t=this._parent.apply(this,arguments);return this._postTreatmentNumber(e),t},_numberDataEntry:function(t){var i=e.Event.getElement(t),n=this._config,o=a.digitsToASCII(i.value),s=n.name;n.toleranceName&&i.getClosest(".field-group").hasClassName("tolerance")&&(s=n.toleranceName);var r=this.normalizedGet(this.model,s);if(-1!==o.indexOf(",")&&(o=o.replace(/,/g,".")),this.earlyInputCheck(o))i.value=isNaN(r)?"":r;else if(o||!(n.allowEmpty||void 0===n.allowEmpty&&!1===n.required)){var l=parseFloat(o,10),d=parseFloat(n.minimumValue,10),c=parseFloat(n.maximumValue,10);!isNaN(d)&&!isNaN(l)&&l<d&&(l=r,i.value=l),!isNaN(c)&&!isNaN(l)&&l>c&&(l=r,i.value=l);var u=!1;o||"dsxplan:reminderDays"!==s?o=this._getActualValueBasedOnNumValue(l):(o=void 0,u=!0),(u||this.isValidInput(o))&&this.normalizedSet(this.model,{name:s,validate:n.validate},o)}else this.normalizedSet(this.model,{name:s,validate:n.validate},void 0)},matchesPattern:function(e){var t=new RegExp("^-?[0-9]*[,.]?[0-9]*$");return this._config&&this._config.integerOnly?t=new RegExp("^[0-9]*$"):this._config.minimumValue>=0&&(t=new RegExp("^[0-9]*[,.]?[0-9]*$")),t.test(e)},earlyInputCheck:function(e){return!this.matchesPattern(e)||isNaN(e)},isValidInput:function(e){return!isNaN(e)},_getActualValueBasedOnNumValue:function(e){return String(e)},_postTreatmentNumber:function(e){var t,i=this._config,n=this.getElement("input"),o=e&&e.data&&e.data[this._config.name]?e.data[this._config.name]:this.normalizedGet(this.model,i.name),a=this.getElement(".tolerance input"),s=e&&e.data&&e.data[this._config.toleranceName]||this.normalizedGet(this.model,this._config.toleranceName);null!=(o=null===o?0:o)&&n&&(t=o.actualValue||0===o.actualValue?o.actualValue:o,t=(t=i.integerOnly?parseInt(t):parseFloat(t)).toLocaleString(widget.lang,{useGrouping:!1,maximumFractionDigits:this._config.maximumFractionDigits}),n.value=t),a&&s&&(a.value=s)}});return r.prototype.compiledTemplate=s,r})),define("DS/E6WCommonUI/Views/RangeView",["UWA/Core","DS/Handlebars/Handlebars4","DS/Controls/Slider","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/range.html.handlebars"],(function(e,t,i,n,o,a){"use strict";var s=t.compile(a),r=o.extend({_uwaClassName:"E6WCommonUIRangeView",tagName:"div",name:"E6WCommonUI.RangeView",domEvents:{},render:function(){var e=this._parent.apply(this,arguments);return this._postTreatmentRange(),e},destroy:function(){this._parent.apply(this,arguments),this._slider&&(this._slider.destroy(),delete this._slider)},_onSliderEndEdit:function(e){if(!this.dontUpdateModel)try{var t=this._config,i=this._slider.value;if("number"!=typeof i||isNaN(i))return void console.error("Invalid slider value:",i);this.normalizedSet(this.model,t,i)}catch(e){console.error("Error updating model on slider end edit:",e)}},_postTreatmentReadOnlyMode:Function.prototype,_postTreatmentRange:function(){var t=this._config,n=this.normalizedGet(this.model,t.name),o="[data-field-name='"+t.name+"'] .range",a=this.getElement(o),s=t.step||Math.round((t.maximumValue||100)-(t.minimumValue||0))/10;s=Math.round(s);var r={value:n=void 0!==n?Math.round(n):0,suffix:t.percents?"%":t.suffix||"",minValue:t.minimumValue||0,maxValue:t.maximumValue||100,stepValue:s};this.canReadWrite()&&this.normalizedGet(this.model,"canEdit")||(r.disabled=!0);const l=this._parentView&&e.is(this._parentView._config,"array")&&this._parentView._config.find((e=>"dscom:hasMaturity"===e.name));l&&l.disable&&(r.disabled=!0),this._slider&&this._slider.destroy(),this._slider=new i(r),this._slider.addEventListener("endEdit",this._onSliderEndEdit.bind(this)),Object.defineProperty(t,"control",{value:this._slider,enumerable:!1,configurable:!0,writable:!0}),this._slider.inject(a),r.disabled&&this._postTreatmentReadOnlyMode(this._slider,a)}});return r.prototype.compiledTemplate=s,r})),define("DS/E6WCommonUI/Views/SelectView",["UWA/Core","DS/UIKIT/Tooltip","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/RDFFoundation/RDFUtils","DS/Controls/ComboBox","text!DS/E6WCommonUI/assets/templates/select.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l){"use strict";var d=i.compile(r),c=o.extend({_uwaClassName:"E6WCommonUISelectView",tagName:"div",name:"E6WCommonUI.SelectView",domEvents:{"change select.data-entry":"_selectDataEntry"},setup:function(){this._parent.apply(this,arguments),e.is(this._config.values,"function")&&(this._valuesFunc=this._config.values,this._config.values=this._valuesFunc(),this._valuesFunc.dispatchEvent?this.listenTo(this._valuesFunc,"onChange",(function(){this._updateValuesAndRender()})):this.canReadWrite()&&this._config.dispatcher&&this.listenTo(this._config.dispatcher,"onChange",(function(){this._updateValuesAndRender()}))),this._tooltip=[]},_updateValuesAndRender:function(){this._updateValues(),this.setConfiguredTemplate(),this.render()},render:function(){var e=this._parent.apply(this,arguments),t=[];if(this._selectElement=this.getElement("select"),this._selectElement&&("undefined"==typeof widget||widget&&widget.useUIKitSelect)){if(this._config&&this._config.values&&this._config.values.length)for(var i,n=0;n<this._config.values.length;n++)(i=this._config.values[n]).icon?t.push({valueItem:i.actualValue,labelItem:i.displayValue,iconItem:{iconPath:i.icon}}):i.fontIcon?t.push({valueItem:i.actualValue,labelItem:i.displayValue,iconItem:{iconName:i.fontIcon}}):t.push({valueItem:i.actualValue,labelItem:i.displayValue,description:i.tooltip});this._select=new s({enableSearchFlag:!1,actionOnClickFlag:!1,elementsList:t,disabled:this._config.disable}),this._select.inject(this._selectElement.parentElement,"top"),this._selectElement.destroy(),delete this._selectElement}return this._postTreatmentSelect(),this._select&&this._select.addEventListener("change",this._selectDataEntry.bind(this)),e},destroy:function(){this._select&&this._select.destroy(),delete this._select,this._parent()},_selectDataEntry:function(){var e=this._config,t=this._select?this._select.value:this._selectElement.value,i=e.values.detect((function(e){return e.actualValue===t}));this.normalizedSet(this.model,e,i),this.handleHelperText(e)},handleHelperText:function(t){if(e.is(t.helperTextFunc,"function")){var i=t.helperTextFunc(this.model),n=this.container.getElement(".form-control-helper-text");n&&n.setText(i)}},_postTreatmentSelect:function(){var e=this._config,t=this.normalizedGet(this.model,e.name);if(e.isObject&&(t=t&&t.id),this.canReadWrite()&&this.normalizedGet(this.model,"canEdit")){var i=t&&t.actualValue||t;this._select?this._select.value=i:this._selectElement&&(this._selectElement.value=i)}else if(t){for(var n=e.values&&e.values.length||0,o=t&&t.displayValue||t,a=t&&t.actualValue||t,s=0;s<n;s++){var r=e.values[s];if(r.actualValue===a){o=r.displayValue;break}}this.getElement("span.read-only").setText(o),this.handleHelperText(e)}},_updateValues:function(){this._valuesFunc&&(this._config.values=this._valuesFunc())}});return c.prototype.compiledTemplate=d,c})),define("DS/E6WCommonUI/MultiEdit/MultiDetailsDisplaySharedView",["UWA/Core","DS/UIKIT/Tooltip","UWA/Element","DS/Handlebars/Handlebars4","DS/Controls/Button","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/E6WCommonUI/Views/E6WHandlebarsHelpers","DS/E6WCommonUI/MultiEdit/MultiEditHelper","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS","text!DS/E6WCommonUI/assets/templates/multiEditField.html.handlebars"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=n.compile(d),u=function(e){return l.get(e)},h=a.extend({_uwaClassName:"MultiDetailsDisplaySharedView",tagName:"div",name:"E6WCommonUI.MultiDetailsDisplaySharedView",className:"details-display-shared-view ddv-field form-group ",id:function(){return"MultiDetailsDisplaySharedView_"+this.cid},setup:function(e){this._renderToggleButtons=e.renderToggleButtons,this._parent.apply(this,arguments)},setupAddNewView:function(){throw new Error("In MultiDetailsDisplaySharedView setupAddNewView, this should be implemented in subclass.")},setupChooseExistingView:function(){throw new Error("In MultiDetailsDisplaySharedView setupChooseExistingView, this should be implemented in subclass.")},render:function(t){if(!this.model)return this;var i=e.clone(t||{},!1).data||[];this.undelegateDOMEvents(),this.delegateDOMEvents();let n=i.every((e=>e.canEdit||r.isActualDateOfCompletedTask(this._config,e)));var o=this._config.readWrite;o||(o=!1),this.container.setHTML(this.template({data:i,canEdit:n}));let a=o&&n;this.container.toggleClassName("editable",a);let s=r.getUniqueAttrValues(this._config,i);return a&&(this._inputElement=this.getElement(".input-group:not(.multi-object,.multi-object-edit-button)"),this._setupViews(s),this._select&&this._switchToChooseExistingMode()),this},_getInputValue:function(){var e=this.getElement("input.data-entry"),t=e.value;return this._config.removeCarriageReturns&&(t=t.replace(/\n/g," "),e.value=t),t},setValueOnCloneModel:function(e){this.normalizedSet(this.model,this._config,e)},template:function(e){var t=e.data,i=s.i18n;s.i18n=l.get.bind(l);let n=r.getUniqueAttrValues(this._config,t),o="",a=[];if(1===n.length)o=n[0],"object"==typeof o&&(o.label&&(o=u("E6WCommonUI.Label."+o.label)),o.displayValue&&(o=o.displayValue)),a.push(o);else if(0===n.length)o="--";else{for(let e=0;e<n.length;e++){let t=n[e];"object"==typeof t&&(t.label&&(t=t.label),t.displayValue&&(t=t.displayValue)),a.push(t)}o=u("E6WCommonUI.Label.MutipleValues")}var d={values:o,labels:a?a.join(", "):"",canEdit:e.canEdit},c=this._config.template(d);return s.i18n=i,c},resetModel:function(e){this.model&&e.hasSameModels(this.model)||(this.model&&this.stopListening(this.model),this.model=e,this.addModelEvents(),this._highlightValidationErrors())},_setupViews:function(e){let t=e.length>1;t&&this._renderToggleButtons&&this._setupToggleButtons(),this.setupAddNewView(e),t&&this.setupChooseExistingView(e),this.listenTo(this._parentView,"onScroll",(()=>{this.dispatchEvent("onScroll")}))},_switchToChooseExistingMode:function(){this._addNewButton&&this._addNewButton.elements.container.removeClassName("hide"),this._chooseExistingButton&&this._chooseExistingButton.elements.container.addClassName("hide"),this.hideAddNewView(),this.showChooseExistingView()},_switchToAddNewMode:function(){this._addNewButton&&this._addNewButton.elements.container.addClassName("hide"),this._chooseExistingButton&&this._chooseExistingButton.elements.container.removeClassName("hide"),this.hideChooseExistingView(),this.showAddNewView()},_setupToggleButtons:function(){var e=this;this._addNewButton=new o({name:"addNewValue",icon:"plus",attributes:{title:u("E6WCommonUI.Label.AddNewValue")}}),this._addnewTooltip=new t({target:this._addNewButton.elements.button,body:u("E6WCommonUI.Label.AddNewValue")}),this._chooseExistingButton=new o({name:"chooseExistingValue",icon:"close",attributes:{title:u("E6WCommonUI.Label.ChooseExistingValue")}}),this._chooseExistingTooltip=new t({target:this._chooseExistingButton.elements.button,body:u("E6WCommonUI.Label.ChooseExistingValue")}),this._addNewButton.addEventListener("buttonclick",(function(){e._switchToAddNewMode()})),this._addNewButton.inject(this.container.getElement(".multi-object-edit-button")),this._chooseExistingButton.addEventListener("buttonclick",(function(){e._switchToChooseExistingMode()})),this._chooseExistingButton.inject(this.container.getElement(".multi-object-edit-button"))},destroy:function(){this._addNewButton&&this._addNewButton.destroy(),delete this._addNewButton,this._chooseExistingButton&&this._chooseExistingButton.destroy(),delete this._chooseExistingButton,this._parent()}});return h.prototype.compiledTemplate=c,h.i18n=u,h})),define("DS/E6WCommonUI/Views/CheckBoxView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/checkbox.html.handlebars"],(function(e,t,i,n,o){"use strict";var a=t.compile(o),s=n.extend({_uwaClassName:"E6WCommonUICheckBoxView",tagName:"div",name:"E6WCommonUI.CheckBoxView",domEvents:{'change input.data-entry[type="checkbox"]':"_checkBoxDataEntry"},_checkBoxDataEntry:function(){var e,t=this._config;e=this._config.useBoolean?this.getElement("input").checked:String(this.getElement("input").checked).toUpperCase(),this.normalizedSet(this.model,t,e)}});return s.prototype.compiledTemplate=a,s})),define("DS/E6WCommonUI/Views/TextView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/TextAreaView","text!DS/E6WCommonUI/assets/templates/text.html.handlebars"],(function(e,t,i,n,o){"use strict";var a=t.compile(o),s=n.extend({_uwaClassName:"E6WCommonUITextView",tagName:"div",name:"E6WCommonUI.TextView",domEvents:{'input input.data-entry[type="text"]':"_inputDataEntry"}});return s.prototype.compiledTemplate=a,s})),define("DS/E6WCommonUI/Views/UomView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/NumberView","DS/Controls/ComboBox","text!DS/E6WCommonUI/assets/templates/uom.html.handlebars"],(function(e,t,i,n,o,a){"use strict";var s=t.compile(a),r=n.extend({_uwaClassName:"E6WCommonUIUomView",tagName:"div",name:"E6WCommonUI.UomView",domEvents:{"change select.ddv-uom":"_uomDataEntry"},render:function(){var e=this._parent.apply(this,arguments),t=[];if(this._selectElement=this.getElement("select.ddv-uom"),this._selectElement&&widget&&widget.useUIKitSelect){if(this._config&&this._config.uomValues&&this._config.uomValues.length)for(var i,n=0;n<this._config.uomValues.length;n++)i=this._config.uomValues[n],t.push({valueItem:i,labelItem:i});this._select=new o({className:"ddv-uom",enableSearchFlag:!1,actionOnClickFlag:!1,elementsList:t}),this._select.inject(this._selectElement.parentElement),this._selectElement.destroy(),delete this._selectElement}return this._postTreatmentNumber(),this._select&&this._select.addEventListener("change",this._uomDataEntry.bind(this)),e},destroy:function(){this._select&&this._select.destroy(),delete this._select,this._parent()},_uomDataEntry:function(t){var i=e.Event.getElement(t).getClosest(".form-group");if(i){for(var n,o=i.getElements("input"),a=0;a<o.length;a++)this._numberDataEntry({target:o[a]});this._config.unitAttribute&&(n=this._select?this._select.selectedIndex:this.getElement("select.ddv-uom").selectedIndex,this.normalizedSet(this.model,{name:this._config.unitAttribute,validate:this._config.validate},n))}},_getActualValueBasedOnNumValue:function(e){var t,i;return this._config.unitAttribute?this._parent.apply(this,arguments):(t=this._select?this._select.selectedIndex:this.getElement("select.ddv-uom").selectedIndex,i=this._config.conversionTable[t],String(e/i))},_postTreatmentNumber:function(){if(this._parent.apply(this,arguments),this._config.unitAttribute){var e=this.normalizedGet(this.model,this._config.unitAttribute);if(e>=0&&e<this._config.uomValues.length)if(this._select)this._select.selectedIndex=e;else{var t=this.getElement("select.ddv-uom");t&&(t.selectedIndex=e)}this.postTreatmentReadOnlyMode(e)}},postTreatmentReadOnlyMode:function(e){var t=this.getElement("span.read-only");if(t){var i=this.normalizedGet(this.model,this._config.name);i=i&&0!==parseFloat(i)?i:"--",t.textContent=i+" "+this._config.uomValues[e]}}});return r.prototype.compiledTemplate=s,r})),define("DS/E6WCommonUI/MultiEdit/MultiEditUomView",["DS/E6WCommonUI/Views/UomView","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t){"use strict";var i=e.extend({_uwaClassName:"E6WCommonUIMultiEditUomView",tagName:"div",name:"E6WCommonUI.MultiEditUomView",postTreatmentReadOnlyMode:function(){this._options&&this._options.fieldValues&&this._options.fieldValues.length>1||this._parent.apply(this,arguments)},_postTreatmentNumber:function(){var e;if(this._parent.apply(this,arguments),this._options&&this._options.fieldValues&&this._options.fieldValues.length>1){var i=this.getElement("span.read-only");if(i){i.textContent=(e="E6WCommonUI.Label.MutipleValues",t.get(e));var n=this.getElement(".field-group.tolerance");n&&n.remove()}}}});return i})),define("DS/E6WCommonUI/Views/MultiEditUomView",["DS/E6WCommonUI/MultiEdit/MultiEditUomView"],(function(e){"use strict";return e})),define("DS/E6WCommonUI/FeatureFlagUtils",["DS/E6WCommonUI/PlatformManager"],(function(e){"use strict";return{is3DViewerEnabled:function(){return e._is3DViewerPresent},userGroupsEnabled:function(){return window.widget&&window.widget.getValue("assignedToUserGroups")},referencedSimulationsEnabled:function(){return e.hasLoadedRolesData()&&e.hasSimulationRole()&&window.widget.getValue("referencedSimulations")},riskManagementEnabled:function(){return e.hasLoadedRolesData()&&e.hasRiskRole()}}})),define("DS/E6WCommonUI/Models/DropValidator",["UWA/Core","DS/RDFFoundation/RDFUtils","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/PlatformManager","DS/E6WCommonUI/FeatureFlagUtils","DS/E6WCommonUI/E6WCommonUIConstants","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s){"use strict";var r={validateDroppedObject:function(e,i){var n=r._validateType(e,i);if(!n&&i.validateSameTenant&&(n=r.validateTenant(e)),!n){var o=i.searchSource;i.dropTypes&&(o=o?i.searchSource.concat(Object.keys(i.dropTypes)):Object.keys(i.dropTypes)),n=r._validateSource(t.sourceFromService(e.serviceId),o)}n||"pno:Person"!==e.objectType||i.excludePendingUser&&0===e.objectId.indexOf("mailto:")&&(n=s.get("E6WComonUI.Error.CantAddPendingPersons"));const a=t.getObjectById(e.objectId);return!n&&"commonTaskParent"===i.name&&a&&a.isStandaloneTask&&a.isStandaloneTask()&&(n=s.get("E6WCommonUI.Alert.StandAloneTasksAsParents")),n},validateTenant:function(e){var t;return e.envId!==n.getTenant()&&(t=i.getTenantErrorMessage(e.envId,n.getTenant())),t},_validateSource:function(e,t){var n;return-1===(t&&t.length>0?t.slice(0):["3dspace"]).indexOf(e)&&("3dplan"===e&&(e=s.get("E6WCommonUI.Label.ProjectPlanning")),n=s.replace(s.get("E6WCommonUI.Alert.FailedToAttachObjectBadSource"),{SOURCE:e}),n=i.escapeHTML(n)),n},_validateType:function(e,n){var o=!1,l=e.objectType,d=e.displayType,c=t.sourceFromService(e.serviceId);let u=n.searchSourceTypes&&n.searchSourceTypes[c];u&&(o=-1===u.indexOf(l));var h,m=n.searchSource&&n.searchSource.indexOf(c)>-1;if(u&&n.dropTypes&&n.dropTypes[c]?o=o&&m&&-1===n.dropTypes[c].indexOf(l):!m&&n.dropTypes&&n.dropTypes[c]&&(o=-1===n.dropTypes[c].indexOf(l)),n.searchTypes){var p=n.searchTypes.split(",");o=o||-1===p.indexOf(l)}if(!o&&n.excludeSearchTypes){var f=r._getExcludedSearchTypeArray(c,n);o=f.length&&-1!==f.indexOf(l)}return o||"URL"!==l&&"dsplan:url"!==l||(o=n.name===a.WORK_CONTEXT_ATTR&&!n.allowUrlLink),o&&(h=s.replace(s.get("E6WCommonUI.Alert.FailedToAttachObjectBadType"),{TYPE:d||i.translateType(l)}),h=i.escapeHTML(h)),h},_getExcludedSearchTypeArray:function(t,i){var n=i.excludeSearchTypes;return e.is(n,"object")?i.excludeSearchTypes[t]||[]:n.split(",")},PERSON_DROP_TYPES:{"3dspace":["Person"],swym:["pno:Person"]}};return r.RDF_ASSIGNEE_DROP_TYPES={swym:[a.PERSON_TYPE],"3dplan":["dsplan:LogicalUser"]},r.MEMBER_DROP_TYPES={swym:["pno:Person"],usersgroup:["foaf:Group"]},r})),define("DS/E6WCommonUI/MultiEdit/MultiPriorityView",["UWA/Core","UWA/Element","DS/Controls/ComboBox","DS/UIKIT/Input/Button","DS/UIKIT/Input/ButtonGroup","DS/E6WCommonUI/E6WCommonUIConstants","DS/E6WCommonUI/MultiEdit/MultiDetailsDisplaySharedView","DS/E6WCommonUI/MultiEdit/MultiEditHelper"],(function(e,t,i,n,o,a,s,r){"use strict";var l=s.i18n,d="Medium",c="High",u="Urgent",h=s.extend({_uwaClassName:"MultiPriorityView",className:"details-display-shared-view ddv-field form-group ",id:function(){return"MultiPriorityView_"+this.cid},setup:function(e){e.renderToggleButtons=!0,this._parent.apply(this,arguments)},setupAddNewView:function(e){this.fieldView=this.createPriorityButtonGroup(e),this.fieldView.inject(this._inputElement),this.multiEditGroup=this.container.getElement(".multi-object"),this.multiEditGroup&&this.multiEditGroup.addClassName("hide")},setupChooseExistingView:function(e){this._setupCombobox(e)},hideChooseExistingView:function(){this.multiEditGroup.addClassName("hide")},showChooseExistingView:function(){this.multiEditGroup.removeClassName("hide")},_setupCombobox:function(e){this._select=new i(r.getComboBoxOptions(this._config,e)),this.container.getElement(".input-group-wrapper")&&(this._select.inject(this.multiEditGroup),this.addChildView(this._select),this._select&&this._select.addEventListener("change",this._selectDataEntry.bind(this)))},hideAddNewView:function(){this.container.getElement(".input-group:not(.multi-object,.multi-object-edit-button)")&&this.container.getElement(".input-group:not(.multi-object,.multi-object-edit-button)").addClassName("hide")},showAddNewView:function(){this.container.getElement(".input-group:not(.multi-object,.multi-object-edit-button)")&&this.container.getElement(".input-group:not(.multi-object,.multi-object-edit-button)").removeClassName("hide")},createPriorityButtonGroup:function(e){var t=this.model.get(this._config.name);if(t&&t.id&&(t=t&&t.id),1===e.length){var i=e[0];i.label&&(t=i.label)}e.length<=1&&this.container.getElement(".input-group:not(.multi-object,.multi-object-edit-button)")&&this.container.getElement(".input-group:not(.multi-object,.multi-object-edit-button)").style.setProperty("margin-left","0"),this._config.priorityMapping&&(t=this._config.priorityMapping[t]);var s=new o({type:"radio",buttons:[new n({name:a.PRIORITY_LOW,className:"success large",icon:"low",attributes:{title:l("E6WCommonUI.Label.Low")},active:"Low"===t}),new n({name:a.PRIORITY_MEDIUM,className:"info large",icon:"medium",attributes:{title:l("E6WCommonUI.Label.Medium")},active:t===d}),new n({name:a.PRIORITY_HIGH,className:"warning large",icon:"high",attributes:{title:l("E6WCommonUI.Label.High")},active:t===c}),new n({name:a.PRIORITY_URGENT,className:"error large",icon:"alert",attributes:{title:l("E6WCommonUI.Label.Urgent")},active:t===u})],events:{onClick:this.onClickButton.bind(this)}});return s.setClassName("item-priority"),s},_selectDataEntry:function(){var e;switch(e=0===this._select.selectedIndex?void 0:this._select?this._select.value:this._selectElement.value){case"Low":e=a.PRIORITY_LOW;break;case d:e=a.PRIORITY_MEDIUM;break;case c:e=a.PRIORITY_HIGH;break;case u:e=a.PRIORITY_URGENT}this.setValueOnCloneModel(e)},destroy:function(){this._select&&this._select.destroy(),delete this._select,this._parent()},onClickButton:function(e,t){this.setValueOnCloneModel(t.options.name)}});return h})),define("DS/E6WCommonUI/MultiEdit/MultiRangeView",["DS/E6WCommonUI/Views/RangeView","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t){"use strict";var i=e.extend({_postTreatmentReadOnlyMode:function(e,i){var n;if(this._options&&this._options.fieldValues&&this._options.fieldValues.length>1){i.remove(e),UWA.createElement("span",{class:"read-only",html:(n="E6WCommonUI.Label.MutipleValues",t.get(n))}).inject(this.getElement(".input-element"))}else this._parent.apply(this,arguments)}});return i})),define("DS/E6WCommonUI/MultiEdit/MultiEditFieldView",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Class/Listener","UWA/Class/Model","UWA/Element","DS/UIKIT/Tooltip","DS/Controls/ComboBox","DS/Controls/Button","DS/E6WCommonUI/Views/TextView","DS/E6WCommonUI/Views/TextAreaView","DS/E6WCommonUI/Views/SelectView","DS/E6WCommonUI/Views/CheckBoxView","DS/E6WCommonUI/Views/DateView","DS/E6WCommonUI/Views/NumberView","DS/E6WCommonUI/MultiEdit/MultiRangeView","DS/E6WCommonUI/MultiEdit/MultiEditUomView","DS/E6WCommonUI/MultiEdit/MultiDetailsDisplaySharedView","DS/E6WCommonUI/MultiEdit/MultiEditHelper","DS/E6WCommonUI/E6WCommonUIConstants","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d,c,u,h,m,p,f,g,E,v,_,D){"use strict";var C=function(e){return D.get(e)},w={[C("E6WCommonUI.Label.ToDo")]:"dsxplan:Open",[C("E6WCommonUI.Label.InWork")]:"dsxplan:InProgress",[C("E6WCommonUI.Label.Done")]:"dsxplan:Done",[C("E6WCommonUI.Label.Completed")]:"dsxplan:Done",[C("E6WCommonUI.Label.Draft")]:"dsxplan:Draft",[C("E6WCommonUI.Label.OnHold")]:"dsxplan:OnHold","Time Only":"Temporal Scheduling","Time and Resource":"Resource Levelling"},T={[C("E6WCommonUI.Label.Draft")]:"Create",[C("E6WCommonUI.Label.ToDo")]:"Assign",[C("E6WCommonUI.Label.InWork")]:"Active",[C("E6WCommonUI.Label.InApproval")]:"Review",[C("E6WCommonUI.Label.Completed")]:"Complete",[C("E6WCommonUI.Label.Done")]:"Done"},b="dsplan:durationRange",y=E.extend(i,n,{_uwaClassName:"MultiEditFieldView",init:function(t){t.renderToggleButtons=!0,this._config=t.config,this.uniqueDates=t.dateValues||{},this._config.label=this._config.fieldLabel||this._config.label,this._parent.apply(this,arguments);var i={};i[this._config.name]=null,i.canEdit=!0,this.displayModel=new o(i),this._fakeContainer=e.createElement("div"),Object.defineProperty(this,"container",{get:()=>this.getContainerElement()||this._fakeContainer,set:Function.prototype})},_inputDataEntry:function(){this.setValueOnCloneModel(this._getInputValue())},_getInputValue:function(){var e=this.getElement("input.data-entry"),t=e.value;return this._config.removeCarriageReturns&&(t=t.replace(/\n/g," "),e.value=t),t},setupChooseExistingView:function(e){this._setupCombobox(e)},isDurationField:function(e){return"dsplan:duration"===e.name||"estimatedDurationInputValue"===e.name},resetModel:function(e){e!==this.model&&(this.model&&this.stopListening(this.model),this.model=e,this.addModelEvents(),this._highlightValidationErrors())},getDataOptions:function(){return this._config.accPointsName?{attributes:[this._config.name,this._config.accPointsName,"canEdit"],level:0}:{attributes:[this._config.name,"canEdit"],level:0}},_highlightValidationErrors:function(){var e=this._config.name;if("dsplan:actualStartDate"===e||"dsplan:actualEndDate"===e||"dsplan:duration"===e||"dsplan:durationRange"===e||e===_.ACTUAL_START_ATTR||e===_.ACTUAL_FINISH_ATTR||"dsplan:startDateIntervalMin"===e||"dsplan:endDateIntervalMax"===e)return this._parent.apply(this,arguments)},_clearValidationErrors:function(){var e=this.getContainerElement(),t=e&&e.getElement(".form-control-error-text");return t&&t.remove(),this._parent.apply(this,arguments)},render:function(t){var i=e.clone(this._config||{},!1),n=t&&(t.data||[]);if(0===(n=n||[]).length)return this.container;let o=n.every((function(e){return e.canEdit||v.isActualDateOfCompletedTask(i,e)})),s={canEdit:o};this.displayModel.set("canEdit",o);var r=v.getUniqueAttrValues(this._config,n),l={model:this.displayModel,config:i,data:s,fieldValues:r};if("uom"===i.type&&i.fieldLabel&&delete i.label,this.fieldView=this.fetchView(i.type,l),this.multiEditGroup=new a("div",{class:"input-group multi-object"}),this.multiEditButtonGroup=new a("div",{class:"input-group multi-object-edit-button"}),this.isDurationField(i)){let t=e.clone(i||{},!1);if(1===r.length){var d=r[0];let e=d.unit;null!==d.value&&void 0!==d.value&&(d.label,d=d.value),t.name=i.unitAttribute,this.fieldView.normalizedSet(this.displayModel,t,e),t.name=b,this.fieldView.normalizedSet(this.displayModel,t,r[0].offsetValue||0)}else!this.displayModel.get(i.name)&&this.fieldView.normalizedSet(this.displayModel,i,1),t.name=b,!this.displayModel.get(b)&&this.fieldView.normalizedSet(this.displayModel,t,0)}if(r&&1===r.length&&this._config.multiEditShowEmpty)r.push({displayValue:"",actualValue:""});else if(r&&1===r.length){let e=this.getDefaultValue(r[0],this._config,o);!this.displayModel.get(i.name)&&this.fieldView.normalizedSet(this.displayModel,i,e),s[i.name]=e}else!(r&&r.length>1)||o&&i.readWrite||(s[i.name]=this.getReadOnlyValue(this._config,r[0]));this.isDurationField(i)&&(s[b]=this.displayModel.get(b)||0),"range"===i.type&&this.model.model&&this.model.model.isDPMMilestoneGate()&&(l.config.step=100),this.fieldView.render(l);var c=this;return this.listenTo(this.displayModel,"onChange:"+i.name,(function(e,t){c.setValueOnCloneModel(t)})),this.listenTo(this.displayModel,"onChange:"+b,(function(e,t){c._config.name=b,c.setValueOnCloneModel(t)})),i.unitAttribute&&this.listenTo(this.displayModel,"onChange:"+i.unitAttribute,((e,t)=>{c._config.name=i.unitAttribute,c.setValueOnCloneModel(t),c._config.name=i.name})),r&&r.length>1&&o&&i.readWrite?(this._setupToggleButtons(),this._setupCombobox(r),this._switchToChooseExistingMode()):this._switchToAddNewMode(),this},getReadOnlyValue:function(e,t){let i,n=C("E6WCommonUI.Label.MutipleValues");return"uom"===e.type?i="--":"select"===e.type?(e.values.push({actualValue:"disabled",displayValue:n}),i="disabled",!this.displayModel.get(e.name)&&this.fieldView.normalizedSet(this.displayModel,e,"disabled")):i=t.displayValue?{actualValue:"",displayValue:n}:t.label?{label:n,value:""}:n,i},getDefaultValue:function(e,t,i){if(null!==(e="state"===t.name?T[e]||e:w[e]||e).value&&void 0!==e.value&&(e=e.value),"date"===t.type){if(!i||!t.readWrite)return e;var n=new Date(e.actualValue||e);"Invalid Date"===n.toString()&&(n=new Date(e.displayValue||e)),e=n}return e},setValueOnCloneModel:function(t){if(this.isDurationField(this._config)){let i="object"==typeof t?t:[];this.fieldView.normalizedSet(this.model,this._config,i[0]||t);let n=e.clone(this._config||{},!1);n.name=this._config.toleranceName,this.fieldView.normalizedSet(this.model,n,i[1]||this.displayModel.get(b)||0)}else this.fieldView.normalizedSet(this.model,this._config,t)},_setupCombobox:function(e){if(this._select=new r(v.getComboBoxOptions(this._config,e)),this.container.getElement(".input-group-wrapper")){let e=new a("div",{class:"input-element"});this._select.inject(e),e.inject(this.multiEditGroup),this.multiEditGroup.inject(this.container.getElement(".input-group-wrapper")),this._select&&this._select.addEventListener("change",this._selectDataEntry.bind(this))}},getContainerElement:function(){return this.fieldView&&this.fieldView.container},_setupToggleButtons:function(){var e=this;this._addNewButton=new l({name:"addNewValue",icon:"plus",attributes:{title:C("E6WCommonUI.Label.AddNewValue")}}),this._addnewTooltip=new s({target:this._addNewButton.elements.button,body:C("E6WCommonUI.Label.AddNewValue")}),this._chooseExistingButton=new l({name:"chooseExistingValue",icon:"close",attributes:{title:C("E6WCommonUI.Label.ChooseExistingValue")}}),this._chooseExistingTooltip=new s({target:this._chooseExistingButton.elements.button,body:C("E6WCommonUI.Label.ChooseExistingValue")}),this._addNewButton.addEventListener("buttonclick",(function(){if(e._switchToAddNewMode(),"select"===e.fieldView._config.type){let t=e.fieldView._config.values[0];t=t.actualValue||t,e.setValueOnCloneModel(t)}}));let t=new a("div",{class:"input-element"});this._addNewButton.inject(t),this._chooseExistingButton.addEventListener("buttonclick",(function(){e._switchToChooseExistingMode()})),this._chooseExistingButton.inject(t),this.container.getElement(".input-group-wrapper")&&(t.inject(this.multiEditButtonGroup),this.multiEditButtonGroup.inject(this.container.getElement(".input-group-wrapper"),"top"))},_switchToChooseExistingMode:function(){this._addNewButton&&this._addNewButton.elements.container.removeClassName("hide"),this._chooseExistingButton&&this._chooseExistingButton.elements.container.addClassName("hide"),this.hideAddNewView(),this.showChooseExistingView()},_switchToAddNewMode:function(){this._addNewButton&&this._addNewButton.elements.container.addClassName("hide"),this._chooseExistingButton&&this._chooseExistingButton.elements.container.removeClassName("hide"),this.hideChooseExistingView(),this.showAddNewView()},hideAddNewView:function(){let e=this.fieldView.getElements(".input-group:not(.multi-object,.multi-object-edit-button)");if(e.length>0)for(let t=0;t<e.length;t++){e[t].addClassName("hide")}let t=this.fieldView.getElements(".field-group");if(t.length>1)for(let e=1;e<t.length;e++){t[e].addClassName("hide")}},showAddNewView:function(){let e=this.fieldView.getElements(".input-group:not(.multi-object,.multi-object-edit-button)");if(e.length>0)for(let t=0;t<e.length;t++){e[t].removeClassName("hide")}let t=this.fieldView.getElements(".field-group");if(t.length>1)for(let e=1;e<t.length;e++){t[e].removeClassName("hide")}},hideChooseExistingView:function(){this.multiEditGroup.addClassName("hide")},showChooseExistingView:function(){this.multiEditGroup.removeClassName("hide")},fetchView:function(e,t){var i;const n={...t,_parentMultiFiedView:this};switch(e){case"text":default:i=new d(n);break;case"textarea":i=new c(n);break;case"select":i=new u(n);break;case"checkbox":i=new h(n);break;case"date":i=new m(n);break;case"number":i=new p(n);break;case"range":i=new f(n);break;case"uom":i=new g(n)}return i},_selectDataEntry:function(){var e;if(e=this._select&&0===this._select.selectedIndex?void 0:this._select?this._select.value:this._selectElement.value,"select"===this._config.type)e="state"===this._config.name?T[e]?T[e]:e:w[e]||e;if(this.setValueOnCloneModel(e),"estimatedDurationInputValue"===this._config.name){this._config.name=this._config.unitAttribute;var t=this._select.elementsList.find((t=>t.value===e));t&&this.setValueOnCloneModel(t.unit)}},removeEvent:function(){this.fieldView&&this.fieldView.removeEvent(this,arguments)},_postTreatmentTextArea:()=>{},destroy:function(){this._select&&this._select.destroy(),delete this._select,this._parent(),this.fieldView&&this.fieldView.destroy(),delete this.fieldView,this._fakeContainer.destroy(),delete this._fakeContainer}});return y})),define("DS/E6WCommonUI/MultiEdit/MultiStartStopView",["UWA/Core","UWA/Class","DS/E6WCommonUI/MultiEdit/MultiEditFieldView","DS/E6WCommonUI/E6WCommonUIConstants","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o){"use strict";return t.extend({_uwaClassName:"MultiStartStopView",tagName:"div",name:"E6WCommonUI.MultiStartStopView",id:function(){return"MultiStartStopView_"+this.cid},init:function(t){var i=e.clone(t||{},!1);this.dateViews=[],this.createDateFields(i)},createDateFields:function(t){let i=t.config;var a=t.model&&t.model.getDatesType(i.name)||{};let s={canEditStartDate:i.canEditStartDate,canEditEndDate:i.canEditEndDate,multiCustomView:i.multiCustomView,readWrite:i.readWrite,isStartDateManualAttribute:i.isStartDateManualAttribute,isEndDateManualAttribute:i.isEndDateManualAttribute,type:"date",validate:!0,index:7};if(a[n.STARTDATE_ATTR]){let i=e.clone(s||{},!1);i.label=o.get("E6WCommonUI.Label.PlannedStartDate"),i.name=n.STARTDATE_ATTR,t.config=i,t.dateValues=a[n.STARTDATE_ATTR];let r=this.getMultiEditFieldView(t);if(t.config.isStartDateManualAttribute){let e=r.setValueOnCloneModel;r.setValueOnCloneModel=function(i){e.apply(this,[i]),r.fieldView.normalizedSet(r.model,{name:t.config.isStartDateManualAttribute},!0)}}this.dateViews.push(r)}if(a[n.ENDDATE_ATTR]){let i=e.clone(s||{},!1);i.name=n.ENDDATE_ATTR,i.label=o.get("E6WCommonUI.Label.PlannedEndDate"),i.endDateAttribute=n.ENDDATE_ATTR,t.config=i,t.dateValues=a[n.ENDDATE_ATTR];let r=this.getMultiEditFieldView(t);if(t.config.isEndDateManualAttribute){let e=r.setValueOnCloneModel;r.setValueOnCloneModel=function(i){e.apply(this,[i]),r.fieldView.normalizedSet(r.model,{name:t.config.isEndDateManualAttribute},!0)}}this.dateViews.push(r)}if(a[n.ACTUAL_START_DATE]){let i=e.clone(s||{},!1);i.label=o.get("E6WCommonUI.Label.ActualStart"),i.name=n.ACTUAL_START_DATE,t.config=i,t.dateValues=a[n.ACTUAL_START_DATE];let r=this.getMultiEditFieldView(t);this.dateViews.push(r)}if(a[n.ACTUAL_END_DATE]){let i=e.clone(s||{},!1);i.label=o.get("E6WCommonUI.Label.ActualEnd"),i.name=n.ACTUAL_END_DATE,i.endDateAttribute=n.ACTUAL_END_DATE,t.config=i,t.dateValues=a[n.ACTUAL_END_DATE];let r=this.getMultiEditFieldView(t);this.dateViews.push(r)}if(a[n.ACTUAL_START_ATTR]){let r=e.clone(s||{},!1);r.label=o.get("E6WCommonUI.Label.ActualStartDate"),r.name=n.ACTUAL_START_ATTR,r.group=i.group,t.config=r,t.dateValues=a[n.ACTUAL_START_ATTR];let l=this.getMultiEditFieldView(t);this.dateViews.push(l)}if(a[n.ACTUAL_FINISH_ATTR]){let r=e.clone(s||{},!1);r.label=o.get("E6WCommonUI.Label.ActualFinishDate"),r.name=n.ACTUAL_FINISH_ATTR,r.endDateAttribute=n.ACTUAL_FINISH_ATTR,r.group=i.group,t.config=r,t.dateValues=a[n.ACTUAL_FINISH_ATTR];let l=this.getMultiEditFieldView(t);this.dateViews.push(l)}if(a[n.ESTIMATED_START_DATE]){let i=e.clone(s||{},!1);i.label=o.get("E6WCommonUI.Label.EstimatedStartDate"),i.name=n.ESTIMATED_START_DATE,t.config=i,t.dateValues=a[n.ESTIMATED_START_DATE];let r=this.getMultiEditFieldView(t);this.dateViews.push(r)}if(a[n.ESTIMATED_DUE_DATE]){let i=e.clone(s||{},!1);i.label=o.get("E6WCommonUI.Label.EstimatedFinishDate"),i.name=n.ESTIMATED_DUE_DATE,i.endDateAttribute=n.ESTIMATED_DUE_DATE,t.config=i,t.dateValues=a[n.ESTIMATED_DUE_DATE];let r=this.getMultiEditFieldView(t);this.dateViews.push(r)}if(a[n.START_DATE_MIN_ATTR]){let r=e.clone(s||{},!1);r.label=o.get("E6WCommonUI.Label.ProjectStartDate"),r.multiEditShowEmpty=i.multiEditShowEmpty,r.name=n.START_DATE_MIN_ATTR,t.config=r,t.dateValues=a[n.START_DATE_MIN_ATTR];let l=this.getMultiEditFieldView(t);this.dateViews.push(l)}if(a[n.END_DATE_MAX_ATTR]){let r=e.clone(s||{},!1);r.name=n.END_DATE_MAX_ATTR,r.label=o.get("E6WCommonUI.Label.ProjectEndDate"),r.multiEditShowEmpty=i.multiEditShowEmpty,r.endDateAttribute=n.END_DATE_MAX_ATTR,t.config=r,t.dateValues=a[n.END_DATE_MAX_ATTR];let l=this.getMultiEditFieldView(t);this.dateViews.push(l)}},getMultiEditFieldView:function(e){return new i(e)}})})),define("DS/E6WCommonUI/Views/MultiStartStopView",["DS/E6WCommonUI/MultiEdit/MultiStartStopView"],(function(e){"use strict";return e})),define("DS/E6WCommonUI/Views/ToggleView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/Controls/Toggle","DS/Controls/ButtonGroup","DS/Controls/TooltipModel","text!DS/E6WCommonUI/assets/templates/toggle.html.handlebars"],(function(e,t,i,n,o,a,s){"use strict";var r=t.compile(s),l=i.extend({_uwaClassName:"E6WCommonUIToggleView",tagName:"div",name:"E6WCommonUI.ToggleView",setup:function(){this._parent.apply(this,arguments),e.is(this._config.values,"function")&&(this._valuesFunc=this._config.values,this._config.values=this._valuesFunc(),this._valuesFunc.dispatchEvent?this.listenTo(this._valuesFunc,"onChange",(function(){this._updateValuesAndRender()})):this.canReadWrite()&&this._config.dispatcher&&this.listenTo(this._config.dispatcher,"onChange",(function(){this._updateValuesAndRender()})))},_updateValuesAndRender:function(){this._updateValues(),this.setConfiguredTemplate(),this.render()},render:function(){var e=this._parent.apply(this,arguments);this.inputContainer=this.getElement(".input-element");var t=this._config,i=this.normalizedGet(this.model,t.name);if(this.canReadWrite()&&this.normalizedGet(this.model,"canEdit")){this._buttonGroup=new o({type:this._config.toggleType});var s=this.normalizedGet(this.model,this._config.name);if(this._config&&this._config.values&&this._config.values.length){for(var r=0;r<this._config.values.length;r++){let e=this._config.values[r];if(e.icon){var l=new n({type:this._config.toggleType,value:e.actualValue,label:e.displayValue,allowUnsafeHTMLLabel:!0,checkFlag:s&&s===e.actualValue,tooltipInfos:e.helperText?new a({title:e.displayValue,shortHelp:e.helperText}):null});this._buttonGroup.addChild(l),l.elements.label.innerHTML=`<img src="${e.icon}" /> ${e.displayValue}`+(e.helperText?'<i class="fonticon fonticon-info" style="margin-left:5px" />':"")}else e.fontIcon?this._buttonGroup.addChild(new n({type:this._config.type,value:e.actualValue,label:e.displayValue,icon:e.fontIcon,checkFlag:s&&s===e.actualValue,tooltipInfos:e.helperText?new a({title:e.displayValue,shortHelp:e.helperText}):null})):this._buttonGroup.addChild(new n({type:this._config.type,value:e.actualValue,label:e.displayValue,checkFlag:s&&s===e.actualValue,tooltipInfos:e.helperText?new a({title:e.displayValue,shortHelp:e.helperText}):null}))}var d=this;this._buttonGroup&&this._buttonGroup.addEventListener("change",(function(){var e=d._config,t=d._buttonGroup.value,i=e.values.detect((function(e){return e.actualValue===t[0]}));d.normalizedSet(d.model,e,i)}))}this._buttonGroup.inject(this.inputContainer.parentElement,"top"),this.inputContainer.destroy(),delete this.inputContainer}else if(i){for(var c=t.values&&t.values.length||0,u=i&&i.displayValue||i,h=i&&i.actualValue||i,m=0;m<c;m++){var p=t.values[m];if(p.actualValue===h){u=p.displayValue;break}}this.getElement("span").setText(u)}return e},destroy:function(){this._buttonGroup&&this._buttonGroup.destroy(),delete this._buttonGroup,this._parent()},_updateValues:function(){this._valuesFunc&&(this._config.values=this._valuesFunc())}});return l.prototype.compiledTemplate=r,l})),define("DS/E6WCommonUI/DragUtil",["DS/E6WCommonUI/UIHelper"],(function(e){"use strict";var t={setDragModels:function(e){this._dragModels=e},getDragModels:function(){return this._dragModels},setDragTransferData:function(e,i){var n=JSON.stringify(i);event.dataTransfer.clearData(),event.dataTransfer.setData(t.getDragDataKey(),n),event.dataTransfer.setData("text",n)},getDragDataKey:function(){return e.isIE()||e.isEdge()?"text":"text/searchitems"},setDragView:function(e){this._view=e},getDragView:function(){return this._view}};return t})),define("DS/E6WCommonUI/MultiEdit/MultiEditRequestBuilder",["UWA/Core","UWA/Class","DS/E6WCommonUI/SubscribeUtilBase","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n){"use strict";var o=t.extend({init:function(e){this.ajax=this.ajax.bind(this),this.requests=[],this._baseUrl=e.baseUrl,this._mask=e.mask,this._ajax=e.ajax},ajax:function(t,i){var n=e.clone(i||{},!1);n.url=t,this.requests.push(n)},sendRequest:function(t){var o=e.clone(t||{},!1);if(0===this.requests.length)return;let a={method:"POST"},s=this.requests.map((function(e){return e.onComplete})),r=this.requests.map((function(e){return e.onFailure})),l=this.requests.map((function(e){return JSON.parse(e.data)}));const d=(c="E6WCommonUI.Label.SavingChanges",n.get(c));var c;let u=i.subscribeActivity(d,{start:!0});return a.data=JSON.stringify([{data:l,identifier:u}]),a.onComplete=function(t){let n=JSON.parse(t),a=n.member;if(e.is(a,"array"))for(let e=0;e<n.member.length;e++){let t=a[e];s[e](t)}else for(let e=0;e<r.length;e++)r[e](new Error("Multi edit failure"),t);i.completeActivity({id:u,name:d}),e.is(o.onComplete,"function")&&o.onComplete.apply(this,arguments)},a.onFailure=function(t,i){for(let e=0;e<r.length;e++)r[e](t,i);e.is(o.onFailure,"function")&&o.onFailure.apply(this,arguments)},this._ajax(this._baseUrl+"?$mask="+this._mask,a)}});return o})),define("DS/E6WCommonUI/LinkDialog",["UWA/Core","UWA/Class","UWA/Utils","UWA/Class/Listener","UWA/Class/Model","DS/Windows/Dialog","DS/Controls/Button","DS/RDFFoundation/Models/URLModel","DS/E6WCommonUI/E6WCommonUIConstants","DS/E6WCommonUI/UIHelper","DS/RDFFoundation/RDFUtils","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var h=function(e){return u.get(e)},m=t.extend({destroy:function(){this._detailsView&&this._detailsView.destroy(),delete this._detailsView,this._parent.apply(this,arguments)},init:function(t){this._parent.apply(this,arguments);var i=e.clone(t||{},!1);this._initialModel=i.urlModel;let o=i.urlModel,a=i.parentModel;this.fieldName=i.fieldName,this._listener=new n,this._hasChanged=!1;var s=!1;o?(this.model=o,this.model.set("canEdit",!0)):(this.model=new r({canEdit:!0,parentNode:a.id}),s=!0);var l=this;require(["DS/E6WCommonUI/Views/DetailsDisplayView"],(e=>{l.callback=i.callback,l._detailsView=new e({model:l.model}),l._detailsView.setConfig(this.getLinkConfig()),l.renderDialog(s,a),l._detailsView.render(),l._setDisabledClassOnCreateButton(!0),l._listener.listenTo(l.model,"onChange:title",l.validate.bind(l)),l._listener.listenTo(l.model,"onChange:dsplan:linkURL",l.validate.bind(l))}))},validate:function(e,t,i){if(this._hasChanged=!0,this._detailsView.isModelValid()){this._setDisabledClassOnCreateButton(!1);let t=/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi;if(e.get("dsplan:linkURL")){!(!e.get("dsplan:linkURL").contains(" ")&&e.get("dsplan:linkURL").match(t))&&this._setDisabledClassOnCreateButton(!0)}}else this._setDisabledClassOnCreateButton(!0)},_setDisabledClassOnCreateButton:function(e){this.dialog.buttons.Save.disabled=e},getLinkConfig:function(){var e=this;return[{readWrite:!0,name:"title",label:h("E6WCommonUI.Label.Title"),type:"text",maxLength:128,required:!0,removeCarriageReturns:!0,validate:!0,events:{onChange:function(){e._setDisabledClassOnCreateButton()}}},{label:h("E6WCommonUI.Label.URL"),name:"dsplan:linkURL",type:"textarea",readWrite:!0,required:!0,numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:2048,removeCarriageReturns:!0,validate:!0}]},renderDialog:function(e,t){var i=this;let n={};n.Save=new s({label:h(e?"E6WCommonUI.Label.Create":"E6WCommonUI.Label.Save"),onClick:function(n){i.saveAction(e,t,n)}}),n.Cancel=new s({onClick:function(){i._hasChanged&&i._initialModel&&i.model.rollbackChanges(i.model._changedAttributesSinceLastSave,[],i._initialModel._attributes),i.dialog.destroy()}}),this.dialog=new a({content:this._detailsView,title:h(e?"E6WCommonUI.Label.NewLink":"E6WCommonUI.Label.EditLink"),buttons:n,height:320,width:500,minWidth:500,minHeight:200,modalFlag:!0,resizableFlag:!0,checkboxInfos:e?{label:h("E6WCommonUI.Label.Repeat"),checkFlag:!1}:null})},resetDialog:function(e){this.model=new r({canEdit:!0,parentNode:e.id}),this._detailsView.resetModel(this.model),this._listener.listenTo(this.model,"onChange:title",this.validate.bind(this)),this._listener.listenTo(this.model,"onChange:dsplan:linkURL",this.validate.bind(this)),this._setDisabledClassOnCreateButton(!0)},saveAction:function(t,n){let o=this.model;if(this._detailsView.isModelValid()){let l={};var a=l.onFailure;if(t){var s=c.getBatchGenerator();delete o.collection,o.set("@id","<uuid:"+i.getUUID()+">"),o.forcedNew=!0,delete o._skeletonId,o.save(void 0,{ajax:s.ajax,newTransaction:!0,onFailure:function(e,t){t&&401===t["@code"]?d.displayError(u.get("E6WCommonUI.Error.noAccessOnObject")):d.displayError(u.get("E6WCommonUI.Error.UrlLinkCreationFailed")),a&&a(arguments)}}),n.model&&n.model.addObjects&&n.model.addObjects([o],n.model.dslcMapping[this.fieldName]?n.model.dslcMapping[this.fieldName]:this.fieldName,void 0,{silentOnChange:!0,at:0,values:[o]}),l.changed=!0,l.ajax=s.ajax,l.newTransaction=!0;var r=this;l.onComplete=function(){r.dialog.checkboxInfos&&r.dialog.checkboxInfos.checkFlag?r.resetDialog(n):r.dialog.destroy()},n.model&&n.model.save(void 0,l),l=e.clone(l||{},!1),delete l.ajax,delete l.onComplete,delete l.onFailure,s.sendBatch(l)}else o.set("parentNode",n.id)&&o.sync("update",o,l),this.dialog.destroy()}}});return m})),define("DS/E6WCommonUI/URLUtils",["UWA/Core","DS/RDFFoundation/RDFUtils","DS/RDFFoundation/SecurityContextUtils","DS/RDFFoundation/Models/ComponentProxyModel","DS/RDFFoundation/Models/URLModel","DS/E6WCommonUI/PlatformManager","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/LinkDialog","DS/WAFData/WAFData","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=function(e){return d.get(e)};const u={createOrEditLink:function(t){let n=e.clone(t||{},!1),o=i.getDefaultSecurityContext(),l=n&&n.modelToBeEdited,c=n.fieldName,u=n.cloneModel,h=n.isRDF;if(h){new r({urlModel:l,parentModel:u,fieldName:c})}else u&&!u.model.urlRoot&&(u.model.urlRoot="/resources/v1/modeler/tasks"),s.loadJSDependency("DS/ENOProjectMgmtCommonComponents/components/CommonInitializer").then((e=>{let t={isComponent:!0,loadLinks:!0,fieldName:c,currentModel:h?void 0:u,securityContext:window.enoviaServer.space||o,callback:function(e){l||u.model.updateRelatedObjectWithNewEntry(e._attributes,c)},onFailure:function(){arguments&&arguments[1]&&arguments[1].error?s.displayError(arguments[1].error):s.displayError(d.get("E6WCommonUI.Error.UrlLinkCreationFailed"))}};l&&(l.set("canEdit",a.hasAccess("3DSpace")),t.model=l),new e(t)}))},createURLForRDFObjects:function(i,n,a){let s=e.clone(a||{},!1),r=t.getObjectById(n.id);if(r){var l=new o({title:r.get("title")||r.get("name"),"dsplan:linkURL":r.get("dsplan:linkURL")||r.get("linkURL"),parentNode:i.id});s.onComplete=function(e){if(s.callback){let t=e&&e.id;s.urlModel=l,t&&s.callback(s)}},s.onFailure=function(){u.onFailureFunc(s)},l.save({},s)}},deleteUrlLinkFor3DPlan:function(i,n,o){let a=e.clone(o||{},!1);return t.request(t.expandUrl("/invoke/dsxplan:deleteURLObject"),{method:"POST",noStringify:!0,type:"json",data:JSON.stringify([{urlId:n.id,parentNode:i.id}]),onComplete:function(){a.callback&&a.callback({})},onFailure:function(){u.onFailureFunc(a)}})},onFailureFunc:function(t){let i=e.clone(t||{},!1);"add"===i.operation?s.displayError(c("E6WCommonUI.Error.UrlLinkCreationFailed")):s.displayError(c("E6WCommonUI.Error.UrlLinkDeletionFailed")),i.callback&&i.callback({onFailure:!0})},createOrDeleteURLForERTasks:function(t){let n=e.clone(t||{},!1),o=n.targetObj,s=n.model,r=n&&n.csrf;const d=a.getServiceUrl("3DSpace",!0)+"/resources/v1/modeler/tasks/"+s.get("id")+"?$include=none";let c={id:s.get("id"),type:s.get("type"),updateAction:"MODIFY",relateddata:{}};for(let e in o)o[e].forEach((t=>{c.relateddata[e]?c.relateddata[e].push(u.createERDataElements(t,e,n)):c.relateddata[e]=[u.createERDataElements(t,e,n)]}));l.authenticatedRequest(d,{method:"PUT",headers:{"Content-Type":"application/json",securityContext:i.getDefaultSecurityContext()},type:"json",data:JSON.stringify({csrf:r,data:[c]}),onComplete:function(e){let t=e&&e.data&&e.data[0]&&e.data[0].relateddata;if(t&&t[n.fieldName]&&t[n.fieldName][0]&&t[n.fieldName][0].id){let e=t&&t[n.fieldName]&&t[n.fieldName][0]&&t[n.fieldName][0].id;e&&n.callback(e)}else{if(t)for(let e in t)t[e].forEach((t=>{s.updateRelatedObjectWithNewEntry(t,e)}));n.callback&&n.callback({})}},onFailure:function(){u.onFailureFunc(n)}})},createERDataElements:function(e,t,i){return"add"===i.operation?{type:e.get("type"),serviceId:"3DSpace",updateAction:"CREATE",dataelements:{title:e.get("name")||e.get("title"),linkURL:e.get("linkURL"),description:e.get("description")||" "}}:"remove"===i.operation?(i.model.removeObject(t,e),{serviceId:"3DSpace",updateAction:"DISCONNECT",id:e.id,type:"URL"}):void 0}};return u})),define("DS/E6WCommonUI/Views/ObjectView",["UWA/Core","UWA/Class/Collection","DS/Handlebars/Handlebars4","UWA/Controls/Drag","UWA/Class/Promise","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/E6WCommonUI/Search","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/DragUtil","DS/E6WCommonUI/Views/CustomizedAutocomplete","DS/E6WCommonUI/Models/DropValidator","DS/E6WCommonUI/URLUtils","DS/RDFFoundation/FederatedSearchUtil","DS/RDFFoundation/RDFUtils","DS/RDFFoundation/Models/ComponentProxyModel","text!DS/E6WCommonUI/assets/templates/object.html.handlebars","text!DS/E6WCommonUI/assets/templates/memberDrop.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d,c,u,h,m,p,f,g,E){"use strict";var v=i.compile(f),_="drag-over";r.isIE()||r.isEdge();function D(e){e.preventDefault()}var C=a.extend({_uwaClassName:"E6WCommonUIObjectView",tagName:"div",name:"E6WCommonUI.ObjectView",domEvents:{"dragenter .drop-target":"handleDragEnter","dragover .drop-target":"handleDragOver","dragleave .drop-target":"handleDragLeave","drop .drop-target":"handleDrop","dragend .drop-target":"handleDragEnd","click .object-list a":"objectClick","click ul:not(.placeholder-only)":"_activateObjectField","click button.ds-group-plus":"_activateObjectField","click button.ds-group-upload":"_uploadToObjectList","click button.ds-group-link-url":"_attachUrlToObject","click button.clear-all":"_clearAll","click .custom-button":"_onClickCustomButton",'keypress .ds-group-add input[type="text"]':"_keyUpInputAddObject",'input .ds-group-add input[type="text"]':"_enableDisableSearch","click label":"_preventLabelDefault","click input":"_onInputClicked","keyup input":"_onKeyUp"},i18n:function(e,t){return t||e},_clearAll:function(){this.model.removeAllValues(this._config.name)},getDataOptions:function(){var e=this._parent.apply(this,arguments);e.level=1;var t=e.attributes.indexOf("canEdit");return e.attributes.splice(t,1,"physicalId",this._config.attributeToDisplay,this._config.imageAttribute,"busType","type","hasfiles"),e},_getData:function(){var e=this._parent.apply(this,arguments);return e.hasOwnProperty("canEdit")||(e.canEdit=this.normalizedGet(this.model,"canEdit")),e},setup:function(e){this._parentContainerId=e.detailDisplayViewId,this._parent.apply(this,arguments);this.canReadWrite()&&(this.search=this._config.search||new s("",!1,"furtive")),this.context=e&&e.context,this._createAutocomplete()},_getMinLengthBeforeSearch:function(){var e=this._config.minLengthBeforeAutocomplete;return void 0===e&&(e=2),e},_createAutocomplete:function(){let e={disabled:!0,cid:this.cid,placeholder:this._config.placeHolder||"",minLengthBeforeSearch:this._getMinLengthBeforeSearch(),noResultsMessage:E.get("emxFoundation.Label.NoResultsFound"),datasets:[{configuration:{templateEngine:this._addAutoCompleteItemToContainer.bind(this),remoteSearchEngine:this._getAndSendAutoCompleteRequest.bind(this)}}],infoMessageCallback:this._config.infoMessageCallback};this._config.noResultsMessageCallback&&(e.noResultsMessageCallback=this._config.noResultsMessageCallback),this.autoCompleteControl=new d(e),this.autoCompleteControl.elements.input.addClassName("form-control"),this._config.placeHolderOnly&&(this.autoCompleteControl.elements.input.readOnly=!0)},_preventLabelDefault:function(e){return e.preventDefault(),!1},render:function(t){var i=e.clone(t||{},!1);this.removeAutoCompleteFromDOM(),this.autoCompleteControl.setBoundingElement(i.boundingElement);var n=this._parent.apply(this,arguments);return this._postTreatmentObjectList(),this._listenToSubModels(),this.setDefaultImages(),this.autoCompleteControl.enable(),n},_submodelCallback:function(){this.render()},_listenToSubModels:function(){this.stopListening(null,null,this._submodelCallback);var t=this.normalizedGet(this.model,this._config.name);e.is(t,"array")||(t=t?[t]:[]);for(var i=t.length,n=0;n<i;n++){var o=t[n];o&&o.addEvent&&(this.listenTo(o,"onChange",this._submodelCallback),this.listenTo(o,"onModelAccessChanged",this._submodelCallback))}},checkDialogDeactivation:function(t,i){if(t!==i){if(this){var n=this.container.getElement("ul");n&&(n.toggleClassName("active",!1),e.is(t.activationCallback,"function")&&t.activationCallback(t.name,!1))}}},_uploadToObjectList:function(){var e=this,t=this._config;r.openFileExplorer({callback:function(i){t.customAdd?t.customAdd.call(e,void 0,e._options,i):e.model&&e.model.model&&e.model.model.uploadFiles?e.model.model.uploadFiles(i,t.name,{config:t,cloneModel:e.model}):e._addToModel(i)},accept:t.accept})},_attachUrlToObject:function(e){let t={fieldName:this._config.name,isRDF:this.model&&this.model.model&&this.model.model.isRDF,cloneModel:this.model,computeDragDataFromModel:this.computeDragDataFromModel,modelToBeEdited:e&&e.model};u.createOrEditLink(t)},_addToModel:function(t,i){var n=e.clone(i||this._options||{},!1),o=this._config,a=this.normalizedGet(this.model,o.name);if(o.singleObjectOnly&&a&&e.is(a,"array")&&a.length>0&&e.is(this.model.remove,"function")){var s=n.singleObjectRemove;n.singleObjectRemove=!0,this.model.remove(o.name,0,n),n.singleObjectRemove=s}return o.customAdd?o.customAdd.call(this,t,n):this.modelAdd(o.name,t,n)},_onClickCustomButton:function(t){t.preventDefault&&t.preventDefault();var i=e.Event.getElement(t),n=this._config,o=i.getAttribute("data-custom-button-index");o=parseInt(o);var a=n.customButtons;a&&a[o].callback.call(this,a)},handleDragEnter:function(t){e.Event.getElement(t).addClassName(_)},handleDragLeave:function(t){e.Event.getElement(t).removeClassName(_)},handleDragOver:function(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect="copy",e.Event.getElement(t).addClassName(_),!1},handleDrop:function(t){this.getElement(".object-list")&&this.getElement(".object-list").removeClassName(_),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var i=this.getElement("input");i&&(i.value="",i.removeClassName(_),this.autoCompleteControl.reset());var n=this._config,o=e.clone(this._options||{},!1);if((o.config=n,o.objectView=this,n.dropHandler)&&(e.is(n.dropHandler,"function")?n.dropHandler:this.model.dropHandler).call(this.model,t.dataTransfer,n,o))return!1;return t.dataTransfer.files&&t.dataTransfer.files.length?this._handleDroppedFiles(t.dataTransfer.files):!this.validateDroppedObjects(t.dataTransfer)&&this.dropHandler(t.dataTransfer,n,o)},dropHandler:function(e){var t=r.getDataTransferJSON(e);return t&&this.processDropData(t),!1},_handleDroppedFiles:function(e){var t=this._config;if(t.allowFileManagement&&this.canReadWrite()&&this.normalizedGet(this.model,"canEdit")){if(t.accept){for(var i=t.accept.toLowerCase().split(","),n=e.length,o=[],a=0;a<n;a++){var s=e[a],r=s.name,l=r.lastIndexOf(".");if(-1!==l){var d=r.substring(l);-1!==i.indexOf(d.toLowerCase())&&o.push(s)}}if(e=o,!o.length)return!1}return this.model&&this.model.model&&this.model.model.uploadFiles?this.model.model.uploadFiles(e,t.name,{config:t,cloneModel:this.model}):this._addToModel(e),!1}if(!t.allowFileManagement){var c=E.get("E6WCommonUI.Error.DroppingFilesNotSupported");c&&this._displayErrorMessage(c)}return!0},_displayErrorMessage:function(e){this._parentView&&this._parentView._displayMessage?e&&this._parentView._displayMessage({msg:e,msgType:"error"}):r.displayError(e)},validateDroppedObjects:function(e){for(var t,i=r.getDataTransferJSON(e).data.items,n=0;n<i.length&&!t;n++){var o=i[n];(t=this.validateDroppedObject(o))&&t&&this._displayErrorMessage(t)}return Boolean(t)},validateDroppedObject:function(e){return c.validateDroppedObject(e,this._config)},processDropData:function(t){for(var i=t.data.items,n=i.length,o=this._config,a=!1,s=0;s<n;s++){var r=i[s],l=r.displayName;e.is(this.model.preprocessPersonObject,"function")&&this.model.preprocessPersonObject(r);var d=e.clone(this._options||{},!1);d.config=o,d.dropObj=r;var c=this._addToModel(r.objectId,d);if(c&&c.length>0){a=!0;var u,h=c[0];u="person"===o.type?"firstname":this._config.attributeToDisplay,this.normalizedGet(h,u)||this.normalizedSet(h,{name:u},l)}}a&&this.render()},getDataIdFromObjectClick:function(e){return e.getClosest("li").getAttribute("data-id")},objectClick:function(i,n){var o=e.clone(n||{},!1),a=e.Event.getElement(i),s=this._config;i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),i.clickedOnObject=!0;var l,d,c=this.getDataIdFromObjectClick(a),u=h.filterSearchSources(s.searchSource),m=this.normalizedGet(this.model,s.name);if(e.is(m,"array")||m instanceof t||(m=[m]),m&&m.length>0)for(var p=m.length,f=0;f<p;f++){var g=m.at?m.at(f):m[f],v=r.normalizedToJson(g,{attributes:["physicalId"]});if(e.is(v,"array"))for(var _=v.length,D=0;D<_;D++)if(v[D].physicalId===c||v[D].id===c){v=v[D];break}if(v.physicalId===c||v.id===c){l=g,d=g.find&&g.find((function(e){return e.get("resourceid")&&e.get("resourceid")===c||e.id===c}));break}}if(o.model=d||l,!s.linkCallback||!s.linkCallback.call(this,c,o)){var C=E.get("emxFoundation.Label.ObjectDetails");o={title:C=C.replace("%NAME%",a.getText()),source:u,tenant:undefined,role:this.context,idcard_activated:!0,select_result_max_idcard:!0,default_search_criteria:"physicalid:"+c,fieldConfig:this._config},this.search&&this.search.activate(o)}return!0},_onKeyUp:function(e){"Tab"===e.key&&this._activateObjectField(e)},_activateObjectField:function(t){t.preventDefault&&t.preventDefault();var i=this.dropdownMenu&&this.dropdownMenu.isVisible;if(!t.clickedOnObject&&!i){var n=this._config,o=this.getElement("ul");if(this.canReadWrite()&&this.normalizedGet(this.model,"canEdit")&&o){o.toggleClassName("active",!0),e.is(n.activationCallback,"function")&&n.activationCallback(n.name,!0);var a=o.getElement("input");a&&a.focus()}}},handleDragEnd:function(t){e.Event.getElement(t).removeClassName(_)},_postTreatmentObjectList:function(e){if(e||(e=this._config),e.typeAheadCallback&&this.canReadWrite()&&this._postTreatmentObjectListAutocomplete(e),this.postTreatmentObjectListClickHandlers(e),"object"===e.type||"person"===e.type){var t=this.getElement(".ds-group-add .btn");t&&(t.disabled=this.shouldDisableSearch())}},getSearchOptions:function(){var t=this._config,i=this.getElement("input"),n=i.value.trim().split(",").map((function(e){return e.trim()}));n=this.getFederatedQueryCriteria(n,t);var o=this.getFederatedQueryPreCondition(t),a=h.filterSearchSources(t.searchSource),s=a&&t.searchSourceTypes||t.searchTypes;if(e.is(s,"object")&&a){var r={};a.forEach((function(e){r[e]=s[e]})),s=r}var l=t.excludeSearchTypes;s||(s="person"===t.type?"Person":"");var d=t.searchTitle;return d||(d=""),i.value="",this._toggleSearchButton(i),{title:d,source:a,role:this.context,types:s,multiSel:!0!==t.singleObjectOnly,default_search_criteria:n,precond:o,excludedSearchTypes:l,callback:this._searchCallback.bind(this),additionalQuery:this._config.additionalQuery,fieldConfig:this._config}},_onSearchButtonClick:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.doSearch(),this.autoCompleteControl.reset()},doSearch:function(){this.search&&this.search.activate(this.getSearchOptions())},getFederatedQueryCriteria:function(e,t){var i={criteria:e,fieldConfig:t};return h.getFederatedQueryCriteria(i)},getFederatedQueryPreCondition:function(e){var t;return e&&"person"===e.type&&e.userRole&&e.searchSource&&-1!==e.searchSource.indexOf("3dspace")&&(t='userrole:"'+e.userRole+'"'),t},postTreatmentObjectListClickHandlers:function(t){var i,n=this,o=this;if(e.is(this.model.add,"function")){var a=o.getElement("button.ds-search"),s=o.getElement(".fonticon-clear");if(a&&(a.addEvent("click",this._onSearchButtonClick.bind(this)),r.createTooltip(a,r.i18n("E6WCommonUI.Label.Search"),"Top")),s){let e=o.getElement("#clearAllButton");e?r.createTooltip(e,r.i18n("E6WCommonUI.Label.ClearAll"),"Top"):r.createTooltip(s,r.i18n("E6WCommonUI.Label.Clear"),"Top")}}if(e.is(this.model.remove,"function"))for(var l=function(i,o){o.stopPropagation();var a=e.clone(n._options||{},!1);a.config=t;var s=this.getAttribute("data-field-name");n.model.remove(s,i,a)},d=o.getElements(".ds-group-remove"),c=d.length,u=0;u<c;u++){var h=d[u];i=h.getClosest("button"),r.createTooltip(i,r.i18n("E6WCommonUI.Label.ClearField")),i.addEvent("click",l.bind(h,u))}for(var m=o.getElements(".fonticon-download"),p=m.length,f=0;f<p;f++){var g=m[f];(i=g.getClosest("button")).addEvent("click",this.objectClickDownload.bind(this)),this._donwloadAddedCode(g)}this._makeDraggableAndDroppable()},_donwloadAddedCode:Function.prototype,_makeDraggableAndDroppable:function(){var e=this.container.getElements('[draggable="true"]');r.isIpad()||r.isAndroid()||this._makeDraggableAndDroppableUWA();for(var t=0;t<e.length;t++){var i=e[t];i&&i.addEvent("dragstart",this._dragHandler.bind(this,i.getParent()))}},_dragHandler:function(e,t){var i=this.computeDragDataFromElement(e);t.dataTransfer.effectAllowed="copy",r.drag21compliant(i),l.setDragTransferData(t,i),r.extraDragForSwym(i)},getDataIdFromElement:function(e){return e.getClosest("li").getAttribute("data-id")},getModelFromCard:function(e){var t=this.getDataIdFromElement(e),i=this,n=this.normalizedGet(this.model,this._config.name),o=n;return n.forEach&&n.forEach((function(e){i._normalizedGetPhysicalId(e)!==t&&i.normalizedGet(e,"groupURI")!==t||(o=e)})),o},_normalizedGetPhysicalId:function(e){var t=this.normalizedGet(e,"physicalId");return t||(t=r.normalizedToJson(e).physicalId),t},computeDragDataFromModel:function(e){var t,i=this.model&&this.model.model;if(e.getTransferObject){var n={};i&&(n.parentObject=i),t=e.getTransferObject(n)}else{var o=this.normalizedGet(e,"type")||this.normalizedGet(e,"busType");t=r.getTransferObject({source:window.widget.getValue("appId")||"X3DCSMA_AP",envId:this.tenant||window.widget.getValue("x3dPlatformId"),contextId:this.context,objectId:this._normalizedGetPhysicalId(e),objectType:o,objectType_Internal:o,displayName:this.normalizedGet(e,this._config.attributeToDisplay)})}return t},computeDragDataFromElement:function(e){var t=this.getModelFromCard(e);return this.computeDragDataFromModel(t)},_iPadScrollIssueFix:function(e){r.isIpad()&&(e?document.body.addEventListener("touchmove",D,{passive:!1}):document.body.removeEventListener("touchmove",D))},_makeDraggableAndDroppableUWA:function(){this.dragControl&&this.dragControl.destroy();var t=this;this.dragControl=new n.Move({container:widget.body,root:this.container,zoneCss:".drop-target",zones:function(){return widget.body.getElements(this.options.zoneCss)},delegate:".draggable-item *",centerHandles:!0,handles:function(i){var n=i.target.getParent(".draggable-item");i.elemToClone=n;var o=e.Element.extend(n.cloneNode(!0));o.setStyle("width",n.offsetWidth),o.setStyle("height",n.offsetHeight);for(var a=o.getElements("button"),s=0;s<a.length;s++)a[s].remove();var r=e.createElement("ul",{class:"object-list"});o.inject(r);var l=e.createElement("div",{styles:{position:"absolute",zIndex:100}});l.toggleClassName("draggable-helper",!0),r.inject(l);var d=t._config.appendTo?t._config.appendTo:"body",c=n.getClosest(d);return l.inject(c),l},start:function(e){if(e.currentEvent instanceof MouseEvent)return!1;var i=e.target.getParent(".draggable-item");i.toggleClassName("ui-being-dragged",!0);var n=t.computeDragDataFromElement(i);return i.setData(C.DRAG_DATA_TAG,n),t._iPadScrollIssueFix(!0),!0},stop:function(e){var i=e.elemToClone;i.toggleClassName("ui-being-dragged",!1),i.toggleClassName("drag",!1),e.handles.destroy(),t._iPadScrollIssueFix()},enter:function(e){var t=e.zone;e.accept()&&(t.toggleClassName(_,!0),t.dispatchEvent(e.getCustomEvent("dragenter")))},leave:function(e){e.zone.toggleClassName(_,!1)},drop:function(e){var t=e.zone;t.toggleClassName(_,!1),e.accept()&&t.dispatchEvent(e.getCustomEvent("drop"))}}),this.dragControl.accept=function(){return this.target.getClosest(this.options.zoneCss)!==this.zone},this.dragControl.getCustomEvent=function(e){var t=this.target.getParent(".draggable-item").getData(C.DRAG_DATA_TAG);t.getData=function(){return this};var i=new window.Event(e,{bubbles:!0});return i.dataTransfer=t,i}},objectClickDownload:function(t,i){var n=e.Event.getElement(t);t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.clickedOnObject=!0;var o=this.getDataIdFromElement(n);return this.download({pid:o,tenant:i&&this.normalizedGet(i,"dscom:Tenant"),serviceId:i&&this.normalizedGet(i,"dscom:ServiceHosting")}),!0},download:function(t){var i;t=t||{};var n=this,o=e.clone(t,!1);return o.autoDownload=!0,o.csrf=this.model.csrf,o.onFailure=function(e){var i=E.get("E6WCommonUI.Error.DownloadFailed");r.isFileNotFound(e)&&(i=E.get("E6WCommonUI.Info.itemNotFound")),n._parentView._displayMessage({msg:i,msgType:"error"}),t.onFailure&&t.onFailure()},this._options.DocumentManagement&&(i=this._options.DocumentManagement.downloadDocument(o.pid,void 0,Boolean(t.checkout),o)),i},processAutoCompleteData:function(e){return e},_addAutoCompleteItemToContainer:function(t,n,o){var a=this.processAutoCompleteData(o);if("pno:Person"===a["ds6w:type"]||this._config&&"person"===this._config.type){t.style="padding-left:10px";var s=i.compile(g);t.setHTML&&t.setHTML(s({memberObj:o}))}else{let i=this._config&&this._config.getObjectTooltip&&this._config.getObjectTooltip({model:o&&o.model});i&&(t.title=i);var r=e.createElement("span",{class:"thumbnail profile-image"});a.image&&e.createElement("img",{draggable:"false",src:a.image,title:i||a.label,"data-actualvalue":a.value,events:{contextmenu:function(){return!1}}}).inject(r),r.inject(t),e.createElement("span",{text:a.label}).inject(t)}},_getExistingIds:function(){var e={},t=this.getExistingObjs(this._config.name);return t&&(Array.isArray(t)||(t=[t]),t.forEach((function(t){e[t.id]=!0}))),e},_getAndSendAutoCompleteRequest:function(t,i){var n=this;return new o((function(o){var a=C.filter.bind(void 0,(function(i){var a={};a.dataset=t;var s=[];e.is(i,"array")&&i.forEach((function(e){e.handler=n.onAutocompleteSelect.bind(n,n._config,e),s.push(e)})),a.matchingItems=s,o(a)}),n._getExistingIds());n._previousTypeaheadRequest&&n._previousTypeaheadRequest.cancel&&n._previousTypeaheadRequest.cancel(),n._previousTypeaheadRequest=n._config.typeAheadCallback(n._config,i,a,{model:n.model})}))},removeAutoCompleteFromDOM:function(){this.autoCompleteControl&&this.autoCompleteControl.remove()},_postTreatmentObjectListAutocomplete:function(){if(this.normalizedGet(this.model,"canEdit")&&this.canReadWrite()&&this.getElement("li.chooser")){var e=this.getElement("input");e&&e.remove(),this.autoCompleteControl.inject(this.getElement("li.chooser"),"top")}},_searchCallback:function(t,i){for(var n=[],o=t.length,a=!1,s=i&&i.fromAutoComplete,l=0;l<o;l++){var d=t[l];if(!s&&"object"==typeof d){var u=e.clone(d,!1);if(r.enrichObjectFromSearch(u),a=c._validateType(u,this._config))continue}d.id?(r.enrichObjectFromSearch(d),n.push(d.id)):n.push(d)}a&&r.displayError(E.get("E6WCommonUI.Alert.FailedToAddBadObjectType"));var h=n.join(","),m=e.clone(this._options||{},!1);if(m.detailedObjects=t,m.config=this._config,this._config.singleObjectOnly&&t&&t.length>0&&h.length>0)return h=n[0],m.detailedObjects=[t[0]],void this._addToModel(h,m);h.length>0&&this.modelAdd(this._config.name,h,m)},modelAdd:function(t,i,n){return this._config.customAdd?this._config.customAdd.call(this,i,n):e.is(this.model.add,"function")?this.model.add.apply(this.model,arguments):void 0},destroy:function(){this.search&&this.search.destroy(),delete this.search,this.autoCompleteControl.disable(),document.removeEventListener("click",this.autoCompleteControl.events.document.click,!0),this.autoCompleteControl.destroy(),delete this.autoCompleteControl,this._parent()},_keyUpInputAddObject:function(t){if("Enter"===t.key){var i=e.Event.getElement(t).getClosest(".form-group").getElement(".ds-group-add .btn");i.disabled||i.click()}},_enableDisableSearch:function(t){var i=e.Event.getElement(t);this._toggleSearchButton(i)},_toggleSearchButton:function(){var e=this.getElement(".ds-group-add .btn");e&&(e.disabled=this.shouldDisableSearch())},onAutocompleteSelect:function(t,i){var n=e.clone(i,!1);n.id=i.value||i.id,delete n.value,this._searchCallback([n],{fromAutoComplete:!0}),this.autoCompleteControl&&this.autoCompleteControl.reset()},getExistingObjs:function(e){return this.normalizedGet(this.model,e)},showAutoComplete:function(){var e=this.getElement("input");this.autoCompleteControl&&this.autoCompleteControl.getSuggestions(e.value)},_onInputClicked:function(){this.getElement("input").value.length>=this._getMinLengthBeforeSearch()&&this.showAutoComplete()},shouldDisableSearch:function(){var e=this.getElement("input")?this.getElement("input").value:"";if(e&&e.length>0)return!1;if(this._config.searchSourceTypes){const e=Object.keys(this._config.searchSourceTypes);return this._config.searchSource&&this._config.searchSource.find((t=>!e.includes(t)))}return!this._config.searchTypes},getCardById:function(e){return this.container.getElement('li[data-id="'+e+'"]')}});return C.filter=function(e,t,i){e(i.filter((function(e){return!t[e.value]})))},C.prototype.compiledTemplate=v,C.DRAG_DATA_TAG="dragDataTransfer",C.DROP_CLASS_NAME=_,C})),define("DS/E6WCommonUI/Views/StartStopView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DateView","DS/Controls/TooltipModel","text!DS/E6WCommonUI/assets/templates/startstop.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s){"use strict";var r=t.compile(a),l=n.extend({_uwaClassName:"E6WCommonUIStartStopView",tagName:"div",name:"E6WCommonUI.StartStopView",_highlightValidationErrors:function(){if(this.model&&this.model.validationError&&this.model.validationError.fields){var e=this._config,t=!1,i=this.container,n=e.name;if(-1!==this.model.validationError.fields.indexOf(e.name)){t=!0,n=e.name;var a=i&&i.getElement(".start");a&&a.toggleClassName("has-error",t)}if(-1!==this.model.validationError.fields.indexOf(e.endDateAttribute)){t=!0,n=e.endDateAttribute;var r=i&&i.getElement(".stop");r&&r.toggleClassName("has-error",t)}var l=this.model.validationError.messages&&this.model.validationError.messages[n],d=i&&i.getElementsByClassName("wux-ui-3ds-error");t&&d&&d.length>0&&(i.toggleClassName("has-error",t),d[0].tooltipInfos=new o({shortHelp:l||(c="E6WCommonUI.Error.startStopValidation",s.get(c))}))}var c},_clearValidationErrors:function(){this._errorSpanNode&&this._errorSpanNode.remove();var e=this.container,t=e&&e.getElement(".start");t&&t.toggleClassName("has-error",!1);var i=e&&e.getElement(".stop");i&&i.toggleClassName("has-error",!1),e.toggleClassName("has-error",!1)},template:function(){var e=arguments[0].data;return e&&!0===e.canEdit&&this.setEditFlagOnFields(e),this._parent.apply(this,arguments)},setEditFlagOnFields:function(t){var i=!0;this._config.hasOwnProperty("canEditStartDate")&&(i=e.is(this._config.canEditStartDate,"function")?this._config.canEditStartDate(this.model):this._config.canEditStartDate),t.canEditStartDate=i,i=!0,this._config.hasOwnProperty("canEditEndDate")&&(i=e.is(this._config.canEditEndDate,"function")?this._config.canEditEndDate(this.model):this._config.canEditEndDate),t.canEditEndDate=i},moveLabelPosition:function(e){var t;t=this.container.getElement(".input-group.start");var i=this.container.getElement(".start label");t&&i&&t.grab(i,e),t=this.container.getElement(".input-group.stop");var n=this.container.getElement(".stop label");t&&n&&t.grab(n,e)},render:function(){return this._parent.apply(this,arguments),this._config.hasOwnProperty("labelPosition")&&"top"===this._config.labelPosition&&this.moveLabelPosition("top"),this}});return l.prototype.compiledTemplate=r,l})),define("DS/E6WCommonUI/Views/ObjectCardView",["UWA/Core","DS/UIKIT/DropdownMenu","DS/RDFFoundation/Models/ComponentProxyModel","DS/E6WCommonUI/Views/ObjectView","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/CompassUtil","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/Handlebars/Handlebars4","DS/UIKIT/Tooltip","DS/Controls/TooltipModel","text!DS/E6WCommonUI/assets/templates/objectCard.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d,c,u,h){"use strict";var m=function(e){return h.get(e)},p=l.compile(u),f=function(e){return!e||!e.hasViewAccess||e.hasViewAccess()},g=n.extend({_uwaClassName:"ObjectCardView",domEvents:{"click li.object-card":"_onClickObjectField"},setup:function(){var e=this;this._tooltips=[],this.container.addEventListener("contextmenu",(function(t){return e.createAndShowContextMenu(t),!1}),!1),this._parent.apply(this,arguments)},render:function(){var t=e.Element.extend(document.activeElement),i=this.container===t.getClosest(".ddv-field");this._parent.apply(this,arguments);var n=this,o=this.getElements(".fonticon-down-open"),a=n.getElement(".btn.ds-group-plus");0===o.length&&a&&!this._config.placeHolderOnly&&a.toggleClassName("disabled",!0),o.forEach((function(e){n._tooltips.push(new d({target:e,body:m("E6WCommonUI.Label.Menu")}))}));const s=this.getElement("#uploadButton");s&&n._tooltips.push(new d({target:s,body:m("E6WCommonUI.Label.Upload")}));const r=this.getElement("#newLinkButton");r&&n._tooltips.push(new d({target:r,body:m("E6WCommonUI.Label.NewLink")}));if(this.getElements(".custom-button").forEach(((e,t)=>{n._tooltips.push(new d({target:e,body:n._config.customButtons[t].toolTip}))})),a){let e,t;"person"===n._config.type?(e=m("E6WCommonUI.Label.AddMember"),t="top"):"group"===n._config.type?(e=m("E6WCommonUI.Label.AddUserGroup"),t="left"):(e=this._config.addExistingTooltip?this._config.addExistingTooltip:m("E6WCommonUI.Label.AddExisting"),t="top"),n._tooltips.push(new d({target:a,body:e,position:t}))}let l=this.getElements(".revision-details .wux-ui-3ds");return l&&l.length&&l.forEach((e=>{e.hasClassName("wux-ui-3ds-check")?e.tooltipInfos=new c({title:m("E6WCommonUI.Tooltip.LatestRevision")}):e.tooltipInfos=new c({title:m("E6WCommonUI.Tooltip.NotLatestRevision")})})),i&&this.container.getElement("ul").click(),this._addDummyCard(),this},_addDummyCard:function(){this._clearDummyCard();let e=this._config.limit,t=this.normalizedGet(this.model,this._config.name);if(t&&t.length>e){let i=t.length-e,n=this._getInfoMessageForDummycard(i);this._injectDummyCard(n)}},_clearDummyCard:function(){this._dummyListNode&&this._dummyListNode.remove()},_getInfoMessageForDummycard:function(e){return h.replace(h.get("E6WCommonUI.Label.DummyCard"),{OBJECT_COUNT:e})},_injectDummyCard:function(t){this._dummyListNode||(this._dummyListNode=e.createElement("li",{class:"text-info object-card",contextMenu:!1,styles:{display:"grid","text-align":"center"},events:{click:function(t){t.stopPropagation(),e.Event.stop(t)},contextmenu:function(t){t.stopPropagation(),e.Event.stop(t)}}}));var i=this.container.getElement(".object-list");i&&this._dummyListNode.inject(i),this._dummyListNode.setText(t)},_onClickObjectField:function(t){if(t.preventDefault&&t.preventDefault(),!t.clickedOnObject){var i=e.Event.getElement(t),n=i.getClosest("li");this.deactivateAllListElements(n),n&&n.addClassName("active"),this.selectInCompass(i)}},addOpenWith:function(e){o.addOpenWith({view:this,dropdownMenu:this.dropdownMenu,modelData:this.computeDragDataFromModel(e)})},selectInCompass:function(e){var t=e.model?e.model:this.getModelFromCard(e),i=this.normalizedGet(t,"type")||t&&(t.get("type")||t.getObjectType&&t.getObjectType());if(i&&-1===i.indexOf("Person")){var n=this.computeDragDataFromElement(e);a.openCompassWithModel(t,{transferObject:n})}},_dontActivateObjectField:function(){},checkDialogDeactivation:function(e,t){this._parent(e,t),e!==t&&this.deactivateAllListElements()},deactivateAllListElements:function(){var e=this.container.getElements("li");e&&e.forEach((function(e){e.toggleClassName("active",!1)}))},getObjectsArray:function(){return this.normalizedGet(this.model,this._config.name)},getActiveModel:function(t){var i,n=this.getObjectsArray(),o=this;return n&&(e.is(n,"array")||n instanceof e.Class.Collection)?n.some((function(e){return(t===o.normalizedGet(e,"physicalId")||t===o.normalizedGet(e,"groupURI")||t===o.normalizedGet(e,"objectId"))&&(i=e,!0)})):t===this.normalizedGet(n,"physicalId")&&(i=n),i},postTreatmentObjectListClickHandlers:function(e){this._parent(e),this._addDropDownMenuListener()},_addDropDownMenuListener:function(){for(var e=this,t=e.getElements(".fonticon-down-open"),i=t.length,n=0;n<i;n++){t[n].getClosest("button").addEvent("click",(function(t){e.createMenu(t,{target:this}),e._showDropDownMenu(e.dropdownMenu)}))}},_showDropDownMenu:function(e,t){t&&!o.dropdownMenuHasItems(e)||e.show()},createAndShowContextMenu:function(e){this.createMenu(e),o.showAndUpdateContextualDropdownMenuPosition(this.dropdownMenu,e,!0)},createMenu:function(t,i){t.stopPropagation(),t.preventDefault();var n=e.Event.getElement(t),o=n.getClosest(".object-card").getAttribute("data-id"),a=this.getElements(".object-card").findIndex((function(e){return e.getAttribute("data-id")===o})),s=e.clone(this._options||{},!1);s.config=this._config;var r={target:i&&i.target||n,options:s,event:t,index:a,model:this.getActiveModel(o)};this.dropdownMenu&&this.dropdownMenu.destroy(),this.createMenuButtons(r)},createMenuButtons:function(e){this.checkDialogDeactivation();var t,i=this;e.model&&(t=!0===(t=this.normalizedGet(e.model,"hasfiles"))||"TRUE"===t);const n={target:e.target,items:[],events:{onClickOutside:function(){this.menus&&this.destroy(),delete i.dropdownMenu},onHide:function(){this.menus&&this.destroy(),delete i.dropdownMenu}},currentModel:this.normalizedGet(this.model,this._config.name)};e.zIndex&&(n.zindex=e.zIndex),i.createDropdownMenu(n),e.model&&"swym:WeDo"!==e.model.get("dsxplan:jsType")&&this.addOpenAndOpenWith(e),(this._config.getDropDownMenuItems&&this._config.getDropDownMenuItems.call(this,t,e)||this.getDropDownMenuItems(t,e)).forEach((function(e){i.dropdownMenu.addItem(e)}))},createDropdownMenu:function(e){this.dropdownMenu=new t(e),this.dispatchEvent(s.events.menuOpened,[this.dropdownMenu])},getMenuItems:function(e){return[this.getDownloadButton(e),this.getRemoveItemButton(e)]},needPropertiesButton:function(e){let t=!1,i=e&&("pno:Person"===e.type||"Person"===e.type);try{require("DS/TransientWidget/TransientWidget");t=!0}catch(e){t=!1}return e.model&&f(e.model)&&(!e.model.canShowProperties||e.model.canShowProperties())&&!(i&&t&&g._has3DSwym)},getDropDownMenuItems:function(t,n){var o=e.clone(n||{},!1);o.canDownload=t;var a=o.model&&this.normalizedGet(o.model,"type");o.type=a;var s=this.getMenuItems(o);let r=this.needPropertiesButton(o);var l=o.model&&("foaf:Group"===o.model.get("ds6w:type")||"Group"===o.model.get("type")||"Group Proxy"===o.model.get("type")||"foaf:Group"===o.model.get("type"));try{let e=require("DS/i3DXRDFGroupViewer/js/GroupViewer");l&&e&&s.unshift(this.getShowMembersButton(o,this.getGroupViewerContainer()))}catch(e){}if(!r||n.isUrl||o.model instanceof i&&o.model.isCSLOnly()||s.unshift(this.getPropertiesButton(o),this.getDocumentInfoMenuConfig(o)),s.length&&"propertiesButton"===s[0].name&&s[0].className&&"disabled"===s[0].className&&s.shift(),a&&-1!==a.indexOf("Person")||l){var d=s.findIndex((e=>"downloadButton"===e.name));-1!==d&&s.splice(d,1)}if("pno:Person"!==a&&"Person"!==a||r||s.unshift(this.getViewProfileButtonConfig(o)),e.is(this.model.updateDocument,"function")){var c=this.getUpdateButton(o);s.splice(2,0,c)}return n.isUrl&&s.unshift({text:m("E6WCommonUI.Label.Edit"),id:"EditURL",fonticon:"fonticon fonticon-pencil",disabled:!this.normalizedGet(this.model,"canEdit"),handler:this._attachUrlToObject.bind(this,n)}),s},shouldDisable:function(e){return e._hasViewAccess?!e._hasViewAccess:e.get("memberPersonModel")?!e.get("memberPersonModel")._hasViewAccess:void 0},getUpdateButton:function(e){var t=this,i=e.model,n=this.normalizedGet(e.model,"hasfiles");return n=!0===n||"TRUE"===n,{text:m("E6WCommonUI.Label.Update"),id:"documentUpdateButton",fonticon:"update",className:n?null:"disabled",handler:function(){e.documentUpdateHandler?e.documentUpdateHandler(i,t.model.updateDocument):o.openFileExplorer({callback:function(e){o.updateDocumentConfirmation(e,i,t.model.updateDocument)}})}}},removeItemButtonHandler:function(e){this.model.remove(this._config.name,e.index,e.options)},getRemoveItemButton:function(e){var t=this.canReadWrite();let i=e&&e.isUrl;return t||(t=!1),{text:m(i?"E6WCommonUI.Label.Delete":"E6WCommonUI.Label.Remove"),name:"remove-button",fonticon:i?"trash":"remove",className:this.normalizedGet(this.model,"canEdit")&&t?null:"disabled hidden",handler:this.removeItemButtonHandler.bind(this,e)}},getPropertiesButton:function(e){var t=this;return{text:m("E6WCommonUI.Label.Properties"),fonticon:"attributes",handler:function(){t.objectClick(e.event,e)},name:"propertiesButton"}},getDocumentInfoMenuConfig:function(e){return{text:m("E6WCommonUI.Label.Information"),fonticon:"info",className:!e.canDownload||e.model&&"3DDrive"===e.model.get("dscom:ServiceHosting")?"hidden":null,handler:()=>o.launchDocumentInfo(e),name:"documentInfoButton"}},getDownloadButton:function(e){var t=this;return{text:m("E6WCommonUI.Label.Download"),fonticon:"download",className:e.canDownload?null:"disabled",handler:function(){t.objectClickDownload(e.event,e.model)},name:"downloadButton"}},getShowMembersButton:function(e,t){var i;return e.model&&(i=this.shouldDisable(e.model)?"disabled":null),{text:o.i18n("E6WCommonUI.Label.ShowMembers"),fonticon:"users-group",className:i,handler:function(){var i=e.model.get("physicalId")||e.model.id;e.model&&["Group","Group Proxy"].indexOf(e.model.get("type"))>-1&&(i=e.model.get("groupURI")),o.launchPreviewGroupMembers(i,t)},name:"showMembersButton"}},getViewProfileButtonConfig:function(t){var i,n=e.clone(t||{},!1);return i=n.model&&"TeamMemberResponsibilityModel"===n.model._uwaClassName?n.model.get("memberPersonModel"):n.model,{text:m("E6WCommonUI.Label.ViewProfile"),id:"profile",fonticon:"eye",handler:function(){o.viewProfileHandler({memberModel:i})}}},destroy:function(){this.dropdownMenu&&this.dropdownMenu.destroy(),this._clearDummyCard(),this._tooltips.forEach((function(e){e.destroy()})),this._tooltips=[],this._parent.apply(this,arguments)},getGroupViewerContainer:Function.prototype,addOpenAndOpenWith:Function.prototype});return g.prototype.modelHasViewAccess=f,g.prototype.compiledTemplate=p,r.getServiceUrl({serviceName:"3DSwym",platformId:window.widget&&window.widget.getValue("x3dPlatformId"),onComplete:e=>{g._has3DSwym=e}}),g})),define("DS/E6WCommonUI/Views/PersonView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/ObjectView","DS/E6WCommonUI/Models/DropValidator","DS/E6WCommonUI/UIHelper","text!DS/E6WCommonUI/assets/templates/person.html.handlebars"],(function(e,t,i,n,o,a){"use strict";var s=t.compile(a),r=i.extend({_uwaClassName:"E6WCommonUIPersonView",tagName:"div",name:"E6WCommonUI.PersonView",init:function(t){this._dropTypes=e.clone(t&&t.config&&t.config.dropTypes||{},!1),this._dropTypes["3dspace"]=this._dropTypes["3dspace"]||[],this._dropTypes.swym=this._dropTypes.swym||[],this._dropTypes["3dspace"]=this._dropTypes["3dspace"].concat("Person"),this._dropTypes.swym=this._dropTypes.swym.concat("pno:Person"),this._parent(t)},processAutoCompleteData:function(t){var i=e.clone(t,!1);return!i.image&&i.name&&(i.image=o.userPictureURL(i.name)),i},validateDroppedObject:function(t){return n.validateDroppedObject(t,e.extend(this._config,{dropTypes:this._dropTypes}))}});return r.prototype.compiledTemplate=s,r})),define("DS/E6WCommonUI/MultiEdit/MultiObjectCardView",["UWA/Core","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/Views/E6WHandlebarsHelpers","DS/E6WCommonUI/Views/ObjectCardView","DS/E6WCommonUI/E6WCommonUIConstants","DS/Handlebars/Handlebars4","DS/RDFFoundation/MemberUtils","DS/UIKIT/Tooltip","text!DS/E6WCommonUI/assets/templates/multiObjectCard.html.handlebars","text!DS/E6WCommonUI/assets/templates/multiEditField.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d,c){"use strict";var u=function(e){return c.get(e)},h=a.compile(l),m=a.compile(d),p=n.extend({_uwaClassName:"MultiObjectCardView",domEvents:{"click button.clear-all":"_clearAll"},_clearAll:function(){this.model.removeAllValues(this._config.name)},getDataIdFromElement:function(e){return e.getAttribute("data-id")},getDataIdFromObjectClick:function(e){var t=e.getClosest(".object-card");return this.getDataIdFromElement(t)},getModelFromCard:function(e){var t=this.getDataIdFromElement(e),i=this,n=this.getObjectsArray();let o=n;return n.forEach&&n.forEach((function(e){i._normalizedGetPhysicalId(e)!==t&&i.normalizedGet(e,"groupURI")!==t&&e.id!==t||(o=e)})),o},render:function(t){var n=e.clone(t||{},!1).data;n=this._getData(n);let s=this.getObjectsArray(),l=Array.from(new Set(s.map(JSON.stringify))).map(JSON.parse);if(n.canEdit&&this._config.readWrite||1===l.length){this._parent.apply(this,arguments);var d=this.getElements(".fonticon-down-open");const e=this.getElement("#clearAllButton");0!==d.length&&this._config.name!==o.TEAM_MEMBERS||!e||e.toggleClassName("disabled",!0),e&&this._tooltips.push(new r({target:e,body:u("E6WCommonUI.Label.ClearAll")}));let t=this.getElement("#assignToSelfItem");t&&(this._config.readWrite&&!this.model.canAssignToSelf(this.model.get(this._config.name))||t.toggleClassName("disabled",!0))}else{var h=i.i18n;i.i18n=c.get.bind(c);let e="",t=[];if(0===l.length)e="--";else{for(let e=0;e<l.length;e++){let i=l[e];"object"==typeof i&&(i.label&&(i=i.label),i.displayValue&&(i=i.displayValue)),t.push(i)}e=u("E6WCommonUI.Label.MutipleValues")}n.values=e,n.labels=t?t.join(", "):"",n.canEdit=!1;let o=this._config,s=m(o);o.readOnlyTemplate=a.compile(s),this.container.setHTML(o.readOnlyTemplate({values:e,labels:t?t.join(", "):""})),i.i18n=h}},getUniquePersonValues:function(e){var t=this;let i=[];return e.forEach((function(e){i.some((function(i){return t.isSameUser(e,i)}))||i.push(e)})),i},getUpdatedCommonValues:function(e,t){var i=this;if(!t)return[];if(0===e.length)t.forEach((function(t){e.push(t)}));else{let n=[];e.forEach((function(e){t.some((function(t){return i.isSameUser(e,t)}))&&n.push(e)})),e=n}return e},isSameUser:function(e,t){return this.getIdFromDataValue(e)===this.getIdFromDataValue(t)},setReadOnlyConfiguredTemplate:function(){var e=i.i18n;i.i18n=c.get.bind(c);var t=this._config;t.viewId="_"+this.cid;var n=m(t);t.template=a.compile(n),i.i18n=e},readOnlyTemplate:function(e){this.setReadOnlyConfiguredTemplate();var t=e.data;return m(t)},template:function(e){var t=this;this.data=e.data;var n=i.i18n;i.i18n=c.get.bind(c),this.data.forEach((function(e){t.commonValues.some((function(i){return t.isSameUser(i,e)}))&&(e.appliesToAll=!0)}));let o={};o[t._config.name]=this.data,this.data.canEdit&&(o.canEdit=this.data.canEdit);var a=this._config.template(o);return i.i18n=n,a},getObjectsArray:function(){return this.normalizedGet(this.model,this._config.name)||[]},getDataOptions:function(){var e;return this._config.accPointsName&&(e={attributes:[this._config.name,this._config.accPointsName,"canEdit"],level:0}),(e={attributes:[this._config.name,"canEdit"],level:0}).level=1,e.attributes.push("physicalId",this._config.attributeToDisplay,this._config.imageAttribute,"busType","type","hasfiles"),e},_getData:function(e){var i=e;if(!e&&this.model){var n=this.getDataOptions();i=t.normalizedToJson(this.model,n)}let o=i.every((function(e){return e.canEdit})),a=[],s=[],r=!0,l=this._config.singleObjectOnly;for(let e=0;e<i.length;e++){let t=i[e][this._config.name];t&&(t.canEdit=i[e].canEdit),r&&(s=l?this.getUpdatedCommonValues(s,[t]):this.getUpdatedCommonValues(s,t),0===s.length&&(r=!1)),Array.isArray(t)?a=a.concat(t):t&&a.push(t)}return this.commonValues=s,a=this.getUniquePersonValues(a),a.canEdit=o,a},getExistingObjs:function(e){let t=[],i=this.model.get(e);return Array.isArray(i)?t=t.concat(i):t.push(i),t},_getMinLengthBeforeSearch:function(){return 2},_onClickObjectField:function(t){if(t.preventDefault&&t.preventDefault(),!t.clickedOnObject){var i=e.Event.getElement(t).getClosest("li");this.deactivateAllListElements(i),i&&i.addClassName("active")}},getRemoveItemButton:function(){let e=this._parent.apply(this,arguments);return this._config.disableRemove&&(e.className="disabled hidden"),e},removeItemButtonHandler:function(e){let t=this.data[e.index],i=this.getIdFromDataValue(t);this.model.removeById(this._config.name,i,e.options)},getMenuItems:function(e){var t=[this.getRemoveItemButton(e)];return this._config.singleObjectOnly?this._config.readWrite&&t.splice(0,0,this.getReplaceAllButton(e)):t.splice(0,0,this.getPropagateButton(e),this.getReplaceAllButton(e)),t},_showDropDownMenu:function(e){this._parent(e,!0)},getPropagateButton:function(e){var t=this,i=this.canReadWrite();return i||(i=!1),{text:u("E6WCommonUI.Label.Propagate"),name:"propagate-button",fonticon:"propagate",disabled:this.data[e.index].appliesToAll||!1,className:t.normalizedGet(t.model,"canEdit")&&i?null:"disabled hidden",handler:function(){let i=t.getTargetObjectModel(e);t.model.add(t._config.name,i,e.options)}}},getIdFromDataValue:function(e){let t;return t=e&&e.resourceUid?e.resourceUid.startsWith("<")?e.resourceUid.slice(1,-1):s.addUUIDToURI(e.resourceUid):e&&e.physicalId?e.physicalId.startsWith("<")?e.physicalId.slice(1,-1):e.physicalId:e&&e["@id"]?e["@id"]:e&&e.id,t},getTargetObjectModel:function(e){let t=this.data[e.index],i=this.getIdFromDataValue(t);return this.getObjectsArray(this._config.name).find((function(e){return e.id===i||e.get("physicalId")===i}))},getReplaceAllButton:function(e){var t=this,i=this.canReadWrite();return i||(i=!1),{text:u("E6WCommonUI.Label.ReplaceAll"),name:"replaceall-button",disabled:t.data&&1===t.data.length,fonticon:"replace",className:t.normalizedGet(t.model,"canEdit")&&i?null:"disabled hidden",handler:function(){let i=t.getTargetObjectModel(e);t._config.singleObjectOnly?t.model.replaceSingleValue(t._config.name,i,e.options):t.model.replaceAll(t._config.name,i,e.options)}}},getCardById:function(e){return this.container.getElement('div[data-id="'+e+'"]')}});return p.prototype.compiledTemplate=h,p})),define("DS/E6WCommonUI/Views/MultiObjectCardView",["DS/E6WCommonUI/MultiEdit/MultiObjectCardView"],(function(e){"use strict";return e})),define("DS/E6WCommonUI/Views/DetailsDisplayView",["UWA/Core","UWA/Class/Model","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/TextView","DS/E6WCommonUI/Views/TextAreaView","DS/E6WCommonUI/Views/SelectView","DS/E6WCommonUI/Views/ToggleView","DS/E6WCommonUI/Views/CheckBoxView","DS/E6WCommonUI/Views/DateView","DS/E6WCommonUI/Views/NumberView","DS/E6WCommonUI/Views/ObjectView","DS/E6WCommonUI/Views/PersonView","DS/E6WCommonUI/Views/RangeView","DS/E6WCommonUI/Views/StartStopView","DS/E6WCommonUI/Views/UomView","DS/E6WCommonUI/Views/E6WHandlebarsHelpers","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/E6WCommonUI/E6WCommonUIConstants","text!DS/E6WCommonUI/assets/templates/meta.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS","css!DS/E6WCommonUI/E6WCommonUI","css!DS/UIKIT/UIKIT"],(function(e,t,i,n,o,a,s,r,l,d,c,u,h,m,p,f,g,E,v,_,D,C){"use strict";E.fixDisplayMessageMethod();var w=n.extend({_uwaClassName:"DetailsDisplayView",getHtmlFromTemplate:i.compile(D),className:"ds-dialog ds-detail-display ddv-view",id:function(){return"detailDisplayView"+this.cid},domEvents:{"click .form-section-title":"_showGroupProperties"},i18n:function(e,t){return t||e},_displayMessage:function(e){this._options.displayMessage?this._options.displayMessage.apply(this,arguments):E.displayMessageBasedOnType(e)},setup:function(t){var i=e.clone(t||{},!1);this._options=i,this._parent.apply(this,arguments);var n=this;this._expandedGroups={},document.body.addEventListener("click",(function(t){if(n._config)for(var i=e.Event.getElement(t),o=n._getConfigFromElement(i),a=n._config.length,s=0;s<a;s++){var r=n._config[s];switch(r.type){case"object":case"person":var l=n._getChildViewBasedOnConfig(r);l&&e.is(l.checkDialogDeactivation,"function")&&l.checkDialogDeactivation(r,o)}}}))},isExpanded:function(e){return this._expandedGroups[e]},setExpanded:function(e){this._expandedGroups[e]=!0},removeExpanded:function(e){this._expandedGroups[e]&&delete this._expandedGroups[e]},getChildViewBasedOnConfig:function(e){for(var t,i=this._childrenViews,n=0;n<i.length;n++){var o=i[n];if(o._config&&o._config.type===e.type&&o._config.name===e.name){t=o;break}}return t},_getChildViewBasedOnConfig:function(e){return this._configMap.get(e)},_resizeHandler:function(){var e=this;!function(){var t=e.container.clientWidth,i=e._config.length,n=0!==t&&t!==e.previousResizeWidth;n&&(e.previousResizeWidth=t);for(var o=0;o<i;o++){var a=e._config[o];switch(a.type){case"text":if(n&&("boolean"==typeof a.readWrite&&a.readWrite||"true"===a.readWrite)&&v.prototype.normalizedGet(e.model,"canEdit")){var s=e._getChildViewBasedOnConfig(a);s&&s._postTreatmentTextArea()}break;case"textarea":if(n){var r=e._getChildViewBasedOnConfig(a);r&&r._postTreatmentTextArea()}}}}()},_dataForRenderingWithWhiteListAttributes:function(){var t=[],i={};this._childrenViews.forEach((function(e){var i=e.getDataOptions(),n=t[i.level];n||(n=t[i.level]={}),i.attributes.forEach((function(e){n[e]=!0}))}));for(var n=0;n<t.length;n++){var o=t[n];o&&e.extend(i,E.normalizedToJson(this.model,{level:n,attributes:Object.keys(o)}))}return i},_setChildViews:function(t){var i=this._childrenViews;if(i)for(var n=this._dataForRenderingWithWhiteListAttributes(),o=0;o<i.length;o++){var a=i[o],s=a._config;a.model||(a.model=this.model);var r={data:n};e.merge(r,t),a.render(r),this.options.postChildViewRender&&this.options.postChildViewRender.call(a),this.injectFieldViewForConfig(s,a)}},injectFieldViewForConfig:function(e,t){var i=e.group?e.group.actualValue||e.group:void 0;i?t.inject(this.container.getElement("#_"+this.cid+this.groupMap[i].actualValue+" .form-section-body")):this.container.getElement(".form-section")&&e.name!==_.USER_TAGS?t.inject(this.container.getElement(".form-section"),"before"):t.inject(this.container.getElement(".form.form-vertical"))},_template:function(e){for(var t=0;t<this._config.length;t++){var i=this._config[t];if(i.required&&!i.hideRequiredLegend){e.required=!0,e.requiredLegend=C.get("emxFoundation.Label.RequiredFieldLegend");break}}return Object.keys(this.groupMap).length>0&&(e.groupNames=this.groupMap,e.viewid="_"+this.cid),this.getHtmlFromTemplate(e)},_filterConfigIntoGroups:function(){for(var e=this._config,t={},i=0;i<e.length;i++){var n=e[i],o=n.group?n.group.actualValue||n.group:void 0;if(o){var a=t[o];a?o&&a.push(n):(t[o]=[n],t[o].displayValue=o,t[o].actualValue="G"+i)}}return t},render:function(e){var t;if(!this._config)return this;t=Object.keys(this._expandedGroups);var i={};return i.openedGroups=t,this.container.setHTML(this._template(i)),this._setChildViews(e),this.dispatchEvent("onFinishRender"),delete this.previousResizeWidth,this.container.isInjected()?this._resizeHandler():this.listenToOnce(this,"onPostInject",this._resizeHandler),this._toggleGroups(t,!0),this},setConfig:function(t){this._config=t.map((function(t){return e.clone(t,!1)})),this._config.options=e.clone(t.options||{},!1),this.groupMap=this._filterConfigIntoGroups(),delete t.options,this.cleanUpChildren();for(var i=0;i<this._config.length;i++){var n=this._config[i];n.index=i;var o=e.clone(this._options||{},!1);e.extend(o,{config:n,model:this.model}),this._createAndAddChildView(n,o)}},cleanUpChildren:function(){return this._configMap=new WeakMap,this._parent.apply(this,arguments)},_createAndAddChildView:function(t,i){var n,g=e.clone(i||{},!1);if(g.detailDisplayViewId="#"+(e.is(this.id,"function")?this.id():this.id),g.parentView=this,t.customView)n=new t.customView(g);else switch(t.type){case"text":n=new o(g);break;case"textarea":n=new a(g);break;case"select":n=new s(g);break;case"toggle":n=new r(g);break;case"checkbox":n=new l(g);break;case"date":n=new d(g);break;case"number":n=new c(g);break;case"object":n=new u(g);break;case"person":n=new h(g);break;case"range":n=new m(g);break;case"startStop":n=new p(g);break;case"uom":n=new f(g)}n&&(this._configMap.set(t,n),this.addChildView(n),this.listenTo(n,v.events.menuOpened,(function(e){this.dropdownMenu&&this.dropdownMenu.destroy(),this.dropdownMenu=e})))},resetModel:function(t,i,n){var o=e.clone(n||{},!1);if(t!==this.model){var a=Object.keys(this._expandedGroups);this._childrenViews&&this._toggleGroups(a,i);var s=this._childrenViews;if(s)for(var r=0;r<s.length;r++)s[r].resetModel(t);this.model=t,!o.noRender&&this.render()}},_toggleGroups:function(e,t){var i=this;e&&e.forEach((function(e){if(e&&e.length>0){var n=i.getFieldViewByName(e);n&&n.container.toggleClassName("expanded",t),t||(i._expandedGroups={})}}))},destroy:function(){delete this._configMap,this._parent()},_showGroupProperties:function(t){var i=e.Event.getElement(t);e.extendElement(i.parentElement).toggleClassName("expanded")},_getConfigFromElement:function(e){var t,i=e.getClosest(".ddv-field");if(i){var n=i.getAttribute("data-field-index");n=parseInt(n,10),t=this._config[n]}return t},isModelValid:function(){for(var e=this._config,t=0;t<e.length;t++)if(e[t].required&&!v.prototype.normalizedGet(this.model,e[t].name))return!1;return!0},getFieldViewByName:function(e){var t;return this._childrenViews.some((function(i){return i._config.name===e&&(t=i,!0)})),t},dispatchScrollToElementEvent:function(e){this.dispatchEvent("scrollToElement",e)},handleParentScroll:function(){this.dispatchEvent("onScroll")}});return w})),define("DS/E6WCommonUI/Models/CloneModel",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Class/Listener","UWA/Class/Collection","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/URLUtils","DS/E6WCommonUI/E6WCommonUIConstants"],(function(e,t,i,n,o,a,s,r){"use strict";function l(e,t){var i;if(t)for(var n=0;n<t.length;n++){var o=t[n];if(o.id===e){i=o;break}}return i}var d=t.extend(i,{init:function(e,t){this.config=t&&t.config||{imageAttribute:"image",attributeToDisplay:"title"},this.file=e},get:function(e){return"canEdit"!==e&&(e===this.config.imageAttribute&&this.file?this.file.FileName?"":window.URL.createObjectURL(this.file):e===this.config.attributeToDisplay&&this.file instanceof window.File?this.file.name:this.file.FileName)},toJSON:function(){var e={};return e[this.config.imageAttribute]=this.get(this.config.imageAttribute),e[this.config.attributeToDisplay]=this.get(this.config.attributeToDisplay),e.canEdit=this.get("canEdit"),e}}),c=t.extend(i,n,{_uwaClassName:"CloneModel",FileValue:d,i18n:function(e,t){return t||e},init:function(t,i){var n=e.clone(i||{},!1);n.i18n&&(this.i18n=i.i18n),this.model=t,e.is(this.model.addEvent,"function")&&this.listenTo(this.model,"onAnyEvent",(function(e){if(0===e.indexOf("onChange")){var t=Array.prototype.slice.call(arguments,1);t[0]=this,this.dispatchEvent(e,t)}})),this.localAttributes={},this.localRelatedData={},this._options=n,this.childCloneModels=[],Object.defineProperty(this,"csrf",{get:function(){return this.model.csrf}}),Object.defineProperty(this,"id",{get:function(){return this.model.id}}),e.is(this.model.updateDocument,"function")&&(this.updateDocument=this.model.updateDocument.bind(this.model))},getOrCreateChildCloneModel:function(e,t){let i=this.childCloneModels.find((function(t){return e===t.model}));if(i)return i;let n=new c(e);return this.addChildCloneModel(n,t),n},addChildCloneModel:function(e,t){const i=this;this.childCloneModels.includes(e)||(this.listenTo(e,"onChange",(function(e,n){i.modificationsPending=!0,i.localRelatedData[t]=i.localRelatedData[t]||[],i.localRelatedData[t].some((function(e){return"modify"===e.operation}))||n&&n.fromServer||(i.localRelatedData[t].push({operation:"modify"}),i.dispatchEvent("onChange:modificationsPending"))})),this.childCloneModels.push(e))},createWhitelistMap:function(e){var t,i=e||{};if(i.attributes){t={};for(var n=i.attributes.length,o=0;o<n;o++){t[i.attributes[o]]=!0}}return t},_dataForRendering:function(){return e.is(this.dataForRendering,"function")?this.dataForRendering.apply(this,arguments):e.is(this.toJSON,"function")?this.toJSON():e.clone(this,!1)},toJSON:function(){var t=e.is(this.model.toJSON,"function")?this.model.toJSON.apply(this.model,arguments):e.clone(this.model,!1);return this._overlayAttributes(t),t},dataForRendering:function(){if(this.model){var e=this._dataForRendering.apply(this.model,arguments);return this._overlayAttributes(e),e}return{}},_overlayAttributes:function(t){for(var i=t,n=Object.keys(this.localRelatedData),o=n.length,a=0;a<o;a++){for(var s=n[a],r=this.get(s),l=r?r.length:0,d=[],c=0;c<l;c++){var u=r.at?r.at(c):r[c];d.push(this._dataForRendering.call(u))}i[s]=d}var h=Object.keys(this.localAttributes);o=h.length;for(var m=0;m<o;m++){var p=h[m],f=this.localAttributes[p];e.is(f,"object")&&(f=this._dataForRendering.call(f)),i[p]=f}return i},_hasModifiedProperty:function(e){return!(!this.localAttributes.hasOwnProperty(e)&&!this.localRelatedData.hasOwnProperty(e))},get:function(t){var i=this.localRelatedData[t],n=this.model?this.model.get(t):null;if(!i){var a=this.localAttributes[t];return void 0!==a?a:n}(n=n||[])instanceof o&&(n=n.toArray());for(var s=i.length,r=0;r<s;r++){var l,d=i[r];if("add"===d.operation)l=d.value,n&&n.unshift?n.unshift(l):n=[l];else if("remove"===d.operation)if(e.is(n.toArray,"function")&&(n=n.toArray()),!e.is(n,"string")&&e.is(n.indexOf,"function")){var c=n.indexOf(d.value);n.splice(c,1)}else(n===d.value||e.is(n,"string")&&n===d.value.id)&&(n=void 0)}return n},set:function(t,i,n){var o=e.clone(n||{},!1),a=i,s=o&&o.whisper;s&&delete o.silent;var l=o&&o.silent;this.localAttributes[t]=a;var d=this.modificationsPending;this.modificationsPending=!0,l||s||this.dispatchEvent("onChange",[this,n]),l||s||this.dispatchEvent("onChange:"+t,[this,i,n]),l||d===this.modificationsPending||this.dispatchEvent("onChange:modificationsPending",[this]),t!==r.STATE_ATTR&&t!==r.TSK_STATE_ATTR||this.dispatchEvent("onChange:"+t,[this,i,n]),o&&o.validate&&this.validate&&(this.validationError=this.validate(this.toJSON(),o),!l&&this.validationError?this.dispatchEvent("onValidationFailure"):this.dispatchEvent("onValidationSuccess"))},add:function(i,n,o){var a;e.is(n,"array")||n instanceof window.FileList?a=n:n instanceof t?a=[n]:e.is(n.split,"function")&&(a=n.split(",").map((function(e){return e.trim()})));for(var s=a.length,r=[],d=!1,c=!1,u=e.clone(o||{},!1),h=0;h<s;h++){var m=a[h];u.detailedObject=l(m,u.detailedObjects);var p=this.addIndividualObject(i,m,void 0,u);p.ret&&r.push(p.ret),d=d||p.changed,c=c||p.changedModificationPending}return c&&this.dispatchEvent("onChange:modificationsPending",[this]),d&&(u.operation="add",u.added=r,this._fireRelationshipChangeEvents(i,u)),r},addIndividualObject:function(t,i,n,o){o=o||{};var s,r=this.localRelatedData[t];r||(r=this.localRelatedData[t]=[]);var l=!1,d=this.modificationsPending,c=o.DocumentManagement&&o.DocumentManagement.MSFDocumentClient;if(!e.is(i,"string")){if(c&&c.IsConnectedToMSFClient()||i instanceof window.File||i instanceof window.Blob){var u=i,h=new this.FileValue(u,o),m={operation:"add",input:u,value:h};return m.isThumbnail=o&&o.config&&o.config.isThumbnail,r.push(m),this.modificationsPending=!0,u&&(s=h),{ret:s,changed:!0,changedModificationPending:this.modificationsPending!==d}}return this.addIndividualObjectAsModel(t,i,{multiEdit:o.multiEdit})}var p=a._alreadyHasObjectInRelatedData(this,t,i);if(p)return o&&!o.multiEdit&&a.displayAlreadyAttachedErrorMessage(this.get("title"),p),{ret:s,changed:l,changedModificationPending:this.modificationsPending!==d};var f,g=n||this.getObjectToBeAdded(t,i,o);g&&e.is(this.model.addEvent,"function")&&e.is(this.model.removeEvent,"function")&&this.listenTo(g,"onDestroy",(function(){var i=e.clone(o||{},!1);this._removeByValueFromLocalRelatedData(t,g)&&this._fireRelationshipChangeEvents(t,i),this.stopListening(g)}));var E=r.length,v=void 0!==g;for(f=E-1;v&&f>=0;f--){var _=r[f];if(_.value.id===i&&(v=!1,"remove"===_.operation))r.splice(f,1),l=!0}return v&&(r.push({operation:"add",input:g.id,value:g}),this.modificationsPending=!0,l=!0),{ret:s=g,changed:l,changedModificationPending:this.modificationsPending!==d}},addIndividualObjectAsModel:function(e,t,i){this.localRelatedData[e]=this.localRelatedData[e]||[];var n=a._alreadyHasObjectInRelatedData(this,e,t.id);if(n&&!t.isNew())return i&&!i.multiEdit&&a.displayAlreadyAttachedErrorMessage(this.get("title"),n),{ret:void 0,changed:!1,changedModificationPending:!1};var o=this.modificationsPending;return this.localRelatedData[e].push({operation:"add",input:t,value:t}),this.modificationsPending=!0,{ret:t,changed:!0,changedModificationPending:this.modificationsPending!==o}},getObjectToBeAdded:function(t,i,n){var o,a,s,r;n&&n.dropObj&&n.dropObj.serviceId?(a=n.dropObj.serviceId,s=n.dropObj.envId):n&&n.detailedObject&&(a=n.detailedObject.serviceId),n&&n.dropObj&&"URL"===n.dropObj.objectType&&(r="$fields=description"),r?r+=",islast":r="$fields=islast";let l="3DSpace"!==a;return o=e.is(this.model.collection.getRelatedObject,"function")&&this.model.collection.getRelatedObject(t,i,l,void 0,{attributes:{service:a,tenant:s},urlParam:r}),l&&"3DDrive"!==a&&(o.serviceId=a,o.fetch()),o},remove:function(t,i,n){var a=e.clone(n||{},!1);a.at=i;var s,r=this.get(t);e.is(r,"array")?s=r[i]:e.is(r.at,"function")&&(s=r.at(i)),s||e.is(r,"array")||r instanceof o||(s=r),s&&this._removeByValue(t,s,a)},removeAll:function(t,i){var n=e.clone(i||{},!1);let o=this.get(t)||[];var a=this.localRelatedData[t];a||(a=this.localRelatedData[t]=[]),o.forEach(((e,t)=>{var n={operation:"remove",input:t,value:e};i&&i.config&&i.config.isThumbnail&&(n.isThumbnail=!0),a.push(n)})),n.operation="remove",n.removed=o,this.modificationsPending=!0,this.dispatchEvent("onChange:modificationsPending",[this]),this._fireRelationshipChangeEvents(t,n)},_removeByValue:function(t,i,n){var o=e.clone(n||{},!1),a=n.at||0,s=this.localAttributes[t];if(!s||this.model.get(t)){var r=this.localRelatedData[t];if(r||(r=this.localRelatedData[t]=[]),!this._removeByValueFromLocalRelatedData(t,i)){var l={operation:"remove",input:a,value:i};n&&n.config&&n.config.isThumbnail&&(l.isThumbnail=!0),r.push(l),this.modificationsPending=!0,this.dispatchEvent("onChange:modificationsPending",[this])}o.operation="remove",o.removed=i,this._fireRelationshipChangeEvents(t,o)}else{delete this.localAttributes[t],o.operation="remove",o.removed=s,this._fireRelationshipChangeEvents(t,o);var d=Object.keys(this.localAttributes),c=Object.keys(this.localRelatedData);0===d.length&&0===c.length&&(this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]))}},_removeByValueFromLocalRelatedData:function(e,t){var i=this.localRelatedData[e],n=!1;if(i)for(var o=i.length-1;o>=0;o--){var a=i[o];if(a.value===t&&(n=!0,"add"===a.operation))if(i.splice(o,1),0===i.length){delete this.localRelatedData[e];var s=Object.keys(this.localAttributes),r=Object.keys(this.localRelatedData);0===s.length&&0===r.length&&(this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]))}}return n},cancel:function(){var e=this.localAttributes,t=this.localRelatedData;if(this.localAttributes={},this.localRelatedData={},this.modificationsPending){this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]),this.dispatchEvent("onChange",[this]);var i=Object.keys(e);i.push.apply(i,Object.keys(t));for(var n=i.length,o=0;o<n;o++)this.dispatchEvent("onChange:"+i[o])}},save:function(t){var i=e.clone(t||{});this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]);var n=this._saveRelatedData(i)||i.changed,o=this.localAttributes;Object.keys(o).length?n=!0:o=null,this.localAttributes={},n&&this._modelSave(o,i)},_modelSave:function(t,i){var n=e.clone(i||{},!1);e.merge(n,this._options),this.model.save(t,n)},_saveRelatedData:function(t){var i=!1,n=this.localRelatedData,o=Object.keys(n);this.localRelatedData={},this.childCloneModels=[];for(var a=o.length,s=0;s<a;s++){var r=o[s],l=n[r];if(l)for(var d=l.length,c=0;c<d;c++){var u=l[c];"add"===u.operation?u.input instanceof window.File||u.input.FileName?this.model._addFile(r,u,t):(e.is(this.model.addObjects,"function")&&this.model.addObjects([u.input],r,void 0,{silentOnChange:!0,at:0,values:[u.value]}),i=!0):"remove"===u.operation?u.isThumbnail?e.is(this.model.removeThumbnail,"function")&&this.model.removeThumbnail(r,u.value,{silentOnChange:!0}):(e.is(this.model.removeObject,"function")&&this.model.removeObject(r,u.value,{silentOnChange:!0}),i=!0):"modify"===u.operation&&(i=!0)}}return i},destroy:function(){this.stopListening(),delete this.model},isValid:function(e){return!this.validate||!this.validate(this.toJSON(),e)},_fireRelationshipChangeEvents:function(e,t,i,n){t&&t.silent||(n||(this.dispatchEvent("onChange:"+e,[this,t]),"add"===t.operation?this.dispatchEvent("onAdd:"+e,[this,t]):"remove"===t.operation&&this.dispatchEvent("onRemove:"+e,[this,t])),i||this.dispatchEvent("onChange",[this,t]))},isAttributeBeingRemoved:function(e){return this._hasModifiedProperty(e)&&!this.localAttributes[e]},_onURLUpdate:function(t){var i=e.clone(t||{},!1);(i.proxyModel||i.urlModel)&&(i.attribute!==r.WORK_CONTEXT_ATTR||a.isProject(this.model.get("dsxplan:jsType"))?this.addIndividualObjectAsModel(i.attribute,i.proxyModel||i.urlModel):(delete this.localAttributes[r.WORK_CONTEXT_ATTR],this.set(r.WORK_CONTEXT_ATTR,i.proxyModel||i.urlModel))),this.urlUpdated=!0,this.dispatchEvent("onUrlUpdate"),i.onFailure&&this.dispatchEvent("onUrlFailure")},_checkUrlOfWorkContext:function(e,t){let i=this.model.get(r.WORK_CONTEXT_ATTR);!e||e===i||"URL"!==e.get("type")&&"dsplan:url"!==e.get("dsxplan:jsType")||(!i||"URL"!==i.get("type")&&"dsplan:url"!==i.get("dsxplan:jsType")||s.deleteUrlLinkFor3DPlan(this.model,e,{}),t&&(t[r.WORK_CONTEXT_ATTR]=[e]))},_addToModelArray:function(e,t,i){e[t]?e[t].push(i):e[t]=[i]},_isUrlAttached:function(e){var t=this;let i=!1;if(this.urlUpdated)return i;let n=t.model.isRDF,o={},a={};for(let n in e.localRelatedData)e.localRelatedData&&Object.keys(e.localRelatedData).length>0&&e.localRelatedData[n].forEach(((e,s)=>{let r=e.value&&e.value.get("type")||e.value&&e.value.get("dsxplan:jsType");"URL"!==r&&"dsplan:url"!==r||(i=!0,"add"===e.operation?(t._addToModelArray(o,n,e.value),t.localRelatedData[n][s]={}):"remove"===e.operation&&t._addToModelArray(a,n,e.value))}));if(n&&i){let e={};e.callback=this._onURLUpdate.bind(this);for(const t in o)if(Object.hasOwnProperty.call(o,t)){const i=o[t];e.attribute=t;for(let t=0;t<i.length;t++){const n=i[t];s.createURLForRDFObjects(this.model,n,e)}}Object.keys(a).length&&(this.stopListening(this.model,r.SAVE_COMPLETED),this.listenToOnce(this.model,r.SAVE_COMPLETED,(()=>{for(const t in a)if(Object.hasOwnProperty.call(a,t)){const i=a[t];e.attribute=t;for(let t=0;t<i.length;t++){const n=i[t];s.deleteUrlLinkFor3DPlan(this.model,n,e)}}})),!Object.keys(o).length&&this._onURLUpdate())}else i&&(Object.keys(o).length>0&&t.checkAndSetCSRF({targetObj:o,model:t.model,operation:"add",callback:t._onURLUpdate.bind(this)},s.createOrDeleteURLForERTasks),!Object.keys(o).length&&Object.keys(a).length>0&&this._onURLUpdate());return i}});return c.FileValue=d,c})),define("DS/E6WCommonUI/Models/BulkCloneModel",["UWA/Class/Model","DS/E6WCommonUI/Models/CloneModel","DS/E6WCommonUI/MultiEdit/MultiEditRequestBuilder","DS/E6WCommonUI/UIHelper","UWA/Core","UWA/Class/Collection","UWA/Class/Events","UWA/Class/Listener","DS/RDFFoundation/BusinessProcessUtils","DS/RDFFoundation/Models/ResultModel","DS/RDFFoundation/RDFUtils","DS/E6WCommonUI/E6WCommonUIConstants","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],(function(e,t,i,n,o,a,s,r,l,d,c,u,h){"use strict";u.PLANNED_START_LABEL,u.PLANNED_END_LABEL,u.ACTUAL_START_LABEL,u.ACTUAL_END_LABEL;var m={Create:!0,Assign:!1,Active:!1,Review:!0,Complete:!0},p=t.extend(s,r,{_uwaClassName:"BulkCloneModel",init:function(e,t,i,n){var o=this;this.model=e,this.models=[],this.model.models.forEach((function(e){let a=new t(e,i);a.scopesTypes=n.scopesTypes,a.projectTypes=n.projectTypes,a.contentsTypes=n.contentsTypes,o.models.push(a),o.listenTo(a,"onAnyEvent",(function(e){var t=Array.prototype.slice.call(arguments,1);o.dispatchEvent(e,t)}))}))},dataForRendering:function(e){return this.models.map((function(t){return t.dataForRendering(e)}))},toJSON:function(e){return this.models.map((function(t){return t.toJSON(e)}))},get:function(e){let t=new Set;return this.models.forEach((function(i){let n=i.get(e);if(n){let i,o;Array.isArray(n)?i=n:n instanceof a?(i=n.toArray(),e!==u.ASSIGNEE_RESPONSIBILITIES_ATTR&&e!==u.TEAM_MEMBERS||(i=i.map((e=>e.get("memberPersonModel"))))):o=e===u.OWNER_RESPONSIBILITY_ATTR?n.get("memberPersonModel"):n,i?i.forEach((e=>t.add(e))):o&&t.add(o)}})),Array.from(t)},add:function(e,t,i){this.modificationsPending=!0,i.multiEdit=!0,this.dispatchEvent("onChange:modificationsPending",[this]),this.models.forEach((function(n){i.addAsSingleValue?n.add(e,t,i):n.add(e,[t],i)}))},replaceAll:function(e,t,i){this.removeAllValues(e),this.add(e,t,i)},replaceSingleValue:function(e,t,i){i.addAsSingleValue=!0,this.add(e,t,i)},removeAllValues:function(e){this.models.forEach((function(t){t.removeAll(e)}))},remove:function(e,t,i){this.modificationsPending=!0,this.dispatchEvent("onChange:modificationsPending",[this]),this.models.forEach((function(n){n.remove(e,t,i)}))},removeById:function(e,t,i){this.modificationsPending=!0,this.dispatchEvent("onChange:modificationsPending",[this]),this.models.forEach((function(n){let o,a=n.get(e);a.length>0&&(o=a.find((function(e){return e.id===t||e.get("physicalId")===t})),o&&n._removeByValue(e,o,i))}))},canAssignToSelf:function(e){let t=this.models.every((e=>e.model.hasPermissionToAssignToSelf())),i=this.models.some((t=>t.model.isAssignedToCurrentUser(e)));return t&&i},assignToSelf:function(e){e.multiEdit=!0,this.models.forEach((function(t){t.assignToSelf(e)}))},set:function(e,t,i){var n=o.clone(i||{},!1);n&&n.whisper&&delete n.silent;var a=n&&n.silent;this.modificationsPending=!0,this.dispatchEvent("onChange:modificationsPending",[this]);const s=window.enoviaServer&&enoviaServer.useFD01CodeFor3DPlan;("dscom:hasMaturity"===e&&!s||"dsplan:hasPriority"===e)&&(t=t&&t.actualValue?t.actualValue:t)&&(t=c.getObjectForAdding(d,t));var r=[],l={};this.models.forEach((n=>{this.fixedStartStopCheck(e,n),e&&n.set(e,t,i),("dsplan:duration"===e||"dsplan:durationRange"===e)&&delete n.localAttributes["dsplan:estimatedEndDate"],n.validationError&&n.validationError.fields&&(r=[...new Set([...r,...n.validationError.fields])],l={...l,...n.validationError.messages})})),this.validationError={fields:r,messages:l},!a&&this.validationError&&this.validationError.fields&&this.validationError.fields.length>0?this.dispatchEvent("onValidationFailure"):this.dispatchEvent("onValidationSuccess")},fixedStartStopCheck:function(e,t){if(e===u.STARTDATE_ATTR||e===u.ENDDATE_ATTR){let i=e===u.STARTDATE_ATTR?u.USER_DEFINED_START_DATE_ATTR:u.USER_DEFINED_END_DATE_ATTR;!t.get(i)&&this.set(i,"true")}},attrIsDate:function(e){return e===u.ENDDATE_ATTR||e===u.STARTDATE_ATTR||e===u.ACTUAL_START_DATE||e===u.ACTUAL_END_DATE||e===u.ESTIMATED_START_DATE||e===u.ESTIMATED_DUE_DATE||"actualStartDate"===e||"actualStartEnd"===e},validateDate:function(e,t){(e===u.ACTUAL_START_DATE||"actualStartDate"===e)&&new Date(t.actualValue||t)>new Date||(e===u.ACTUAL_END_DATE||"actualStartEnd"===e)&&new Date(t.actualValue||t)>new Date?this.dispatchEvent("onValidationFailure"):this.dispatchEvent("onValidationSuccess")},shouldSetModel:function(e,t,i){var n=!0;if((e===u.STARTDATE_ATTR&&t.get(u.ACTUAL_START_DATE)||e===u.ENDDATE_ATTR&&t.get(u.ACTUAL_END_DATE)||e===u.STARTDATE_ATTR&&!t.get(u.USER_DEFINED_START_DATE_ATTR)||e===u.ENDDATE_ATTR&&!t.get(u.USER_DEFINED_END_DATE_ATTR)||e===u.ESTIMATED_START_DATE&&!m[t.get("state")]||e===u.ESTIMATED_DUE_DATE&&"complete"===t.get("state"))&&(n=!1),e===u.ACTUAL_START_DATE){let e=new Date(i.actualValue);(t.localAttributes[u.ACTUAL_END_DATE]&&t.localAttributes[u.ACTUAL_END_DATE]<e||t.get(u.ACTUAL_END_DATE)&&t.get(u.ACTUAL_END_DATE).actualValue<e)&&(n=!1)}if(e===u.ACTUAL_END_DATE){let e=new Date(i.actualValue);(t.localAttributes[u.ACTUAL_START_DATE]&&t.localAttributes[u.ACTUAL_START_DATE]>e||t.get(u.ACTUAL_START_DATE).actualValue>e)&&(n=!1)}return n},isActualDate:function(e){return e===u.ACTUAL_START_DATE||"actualStartDate"===e||e===u.ACTUAL_END_DATE||"actualStartEnd"===e},hasSameModels:function(e){return this.models.length===e.models.length&&this.models.every((function(t){e.models.includes(t)}))},getDatesType:function(e){var t={};return this.models.forEach((i=>{let n=i.model;if(n.isRDFTask()){var o=i.localAttributes[u.COMPLETE_PERCENT_ATTR]||n.get(u.COMPLETE_PERCENT_ATTR),a=i.localAttributes[u.STATE_ATTR]||n.get(u.STATE_ATTR);(o||a)&&(0===o||"dsxplan:Open"===a.id?(i.get(u.STARTDATE_ATTR)&&this.addDatesTypes(u.STARTDATE_ATTR,i.get(u.STARTDATE_ATTR),t),i.get(u.ENDDATE_ATTR)&&this.addDatesTypes(u.ENDDATE_ATTR,i.get(u.ENDDATE_ATTR),t)):o>0&&o<100||"dsxplan:InProgress"===a.id?(i.get(u.STARTDATE_ATTR)&&this.addDatesTypes(u.STARTDATE_ATTR,i.get(u.STARTDATE_ATTR),t),i.get(u.ENDDATE_ATTR)&&this.addDatesTypes(u.ENDDATE_ATTR,i.get(u.ENDDATE_ATTR),t),i.get(u.ACTUAL_START_DATE)&&this.addDatesTypes(u.ACTUAL_START_DATE,i.get(u.ACTUAL_START_DATE),t)):100!==o&&"dsxplan:Done"!==a.id||(i.get(u.STARTDATE_ATTR)&&this.addDatesTypes(u.STARTDATE_ATTR,i.get(u.STARTDATE_ATTR),t),i.get(u.ENDDATE_ATTR)&&this.addDatesTypes(u.ENDDATE_ATTR,i.get(u.ENDDATE_ATTR),t),i.get(u.ACTUAL_START_DATE)&&this.addDatesTypes(u.ACTUAL_START_DATE,i.get(u.ACTUAL_START_DATE),t),i.get(u.ACTUAL_END_DATE)&&this.addDatesTypes(u.ACTUAL_END_DATE,i.get(u.ACTUAL_END_DATE),t)))}else e===u.ACTUAL_START_ATTR||e===u.ACTUAL_FINISH_ATTR?(n.get(u.ACTUAL_START_ATTR)&&this.addDatesTypes(u.ACTUAL_START_ATTR,n.get("actualStartDate"),t),n.get(u.ACTUAL_FINISH_ATTR)&&this.addDatesTypes(u.ACTUAL_FINISH_ATTR,n.get("actualFinishDate"),t)):e!==u.ESTIMATED_START_DATE&&e!==u.ESTIMATED_DUE_DATE||(n.get(u.ESTIMATED_START_DATE)&&this.addDatesTypes(u.ESTIMATED_START_DATE,n.get("estimatedStartDate"),t),n.get(u.ESTIMATED_DUE_DATE)&&this.addDatesTypes(u.ESTIMATED_DUE_DATE,n.get("dueDate"),t))})),t},addDatesTypes:function(e,t,i){i[e]?i[e].push(t):i[e]=[t]},cancel:function(){this.modificationsPending=!1,this.models.forEach((function(e){e.cancel()}))},save:function(e){var t=this,i=o.clone(e||{},!1);if(i.isMassEdit=!0,"dsxplan:InProgress"===(this.models&&this.models[0]&&this.models[0].localAttributes&&this.models[0].localAttributes["dscom:hasMaturity"]&&this.models[0].localAttributes["dscom:hasMaturity"].id)){const e=c.getBatchGenerator(),o=[];var n={batch:e,onComplete:function(){e.sendBatch({onComplete:function(){i.autoStartProcessInstanceForMultiEdit=!0,t.massEditSave(i)},onFailure:function(){console.log("failed to save proxy model")}})}};l.startProcessForMassEdit(this.models,o,n)}else this.massEditSave(i)},massEditSave:function(e){this.model.isTask()&&this.model.isRDFTask()||this.model.isMilestoneOrGate()?this.sendMultiEditRequest(e):(this.modificationsPending=!1,this.models.forEach((function(t){t.save(e)})))},sendMultiEditRequest:function(e){var t=o.clone(e||{},!1);this.multiEditRequestBuilder=new i({ajax:c.request,baseUrl:c.expandUrl("","v1")+"invoke/dsxplan:massEdit",mask:t.workscopePropertyMask?"dsplan:MVMask.WorkPackage.Property":"dsplan:MVMask.Task.Property"}),e.ajax=this.multiEditRequestBuilder.ajax,this.modificationsPending=!1;const n=this.model;this.models.forEach((function(t){t.save(e)})),this.multiEditRequestBuilder.sendRequest({onFailure:()=>{n.dispatchEvent("massEditFailed")},onComplete:()=>{n.dispatchEvent("massEditSuccedded")}})}});return Object.defineProperty(p.prototype,"modificationsPending",{get:function(){return this.models.some((function(e){return e.modificationsPending}))},set:function(e){this.models.forEach((function(t){t.modificationsPending=e})),this.dispatchEvent("onChange:modificationsPending",[this])}}),p})),define("DS/E6WCommonUI/MultiEdit/MultiDetailsDisplayView",["UWA/Core","DS/E6WCommonUI/Views/DetailsDisplayView","DS/E6WCommonUI/MultiEdit/MultiPriorityView","DS/E6WCommonUI/MultiEdit/MultiStartStopView","DS/E6WCommonUI/MultiEdit/MultiEditFieldView","DS/E6WCommonUI/UIHelper"],(function(e,t,i,n,o,a){"use strict";var s=["object","dependencies","userTags","RichText","textarea","checkbox","dsplan:storyPoints","actualDuration","originatorInfo","ownerInfo","project","dsplan:projectType","story-points"];return t.extend({_uwaClassName:"MultiDetailsDisplayView",_createAndAddChildView:function(t,i){var n,o=e.clone(i||{},!1);if(o.detailDisplayViewId="#"+(e.is(this.id,"function")?this.id():this.id),delete o.parentView,!(s.includes(t.type)||s.includes(t.name)||t.isObject)){if(t.readWrite)if(t.multiCustomView){if(t.disableMultiEdit&&"startStop"===t.type)return;n=new t.multiCustomView(o)}else n=this.getMultiEditFieldView(o);else if("startStop"===t.type){if(t.disableMultiEdit)return;n=t.multiCustomView&&new t.multiCustomView(o)}else t.multiCustomView?n=new t.multiCustomView(o):("text"===t.type&&!t.neverEditable||"uom"===t.type||"select"===t.type)&&(n=this.getMultiEditFieldView(o));n&&(n.dateViews?n.dateViews.length>0?n.dateViews.forEach((e=>{this._configMap.set(e._config,e),this.addChildView(e)})):this.groupMap.More&&(this.groupMap={}):(this._configMap.set(t,n),this.addChildView(n)))}},injectFieldViewForConfig:function(e,t){let i=t.container?t.container:t;this._parent(e,i)},getMultiEditFieldView:function(e){return new o(e)},_dataForRenderingWithWhiteListAttributes:function(){var t=[],i=[];this._childrenViews.forEach((function(e){var i=e.getDataOptions(),n=t[i.level];n||(n=t[i.level]={}),i.attributes.forEach((function(e){n[e]=!0}))}));for(var n=0;n<t.length;n++){var o=t[n];if(o)if(0===i.length)i=i.concat(a.normalizedToJson(this.model,{level:n,attributes:Object.keys(o)}));else{let t=a.normalizedToJson(this.model,{level:n,attributes:Object.keys(o)});for(let n=0;n<t.length;n++){let o=i[n];e.extend(o,t[n])}}}return i}})})),define("DS/E6WCommonUI/Views/MultiDetailsDisplayView",["DS/E6WCommonUI/MultiEdit/MultiDetailsDisplayView"],(function(e){"use strict";return e}));