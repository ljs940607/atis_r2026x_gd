function updateHrefTag(e,t){var n=$("#"+e.id+"proslauncher"),a=e.id,o=e.dataset.href,i=e.dataset.title,r=(e.dataset.label,buildHrefTag(o,a,e.dataset.target,i,"&#x2713;","left pointer launcherbtn launchersubmitbtn",t));n.replaceWith(r)}function buildHrefTag(e,t,n,a,o,i,r){return t+="proslauncher",""===n||"content"===n||"popup"===n?"<button onclick=\"showNonModalDialog('{0}', '930', '650', 'true')\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(e,t,r,i,o):"slidein"!==n?"<button onclick=\"{0};hideLauncher();return false;\" id='{1}' title='{2}' target='{3}' class='{4}'>{5}</button>".format(e,t,r,n,i,o):"<button onclick=\"getTopWindow().showSlideInDialog('{0}', 'true');hideLauncher();return true;\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(e,t,r,i,o)}function hideLauncher(){$(".prosactionlauncher").hide(),$(".proslauncherMenu").show()}function showLauncher(e){$(".prosactionlauncher").hide(),$(".proslauncherMenu").hide(),$("#"+e+".prosactionlauncher").fadeIn(1e3)}define("DS/ENOProcessStepsUX/scripts/SearchConfiguration",["UWA/Core","UWA/Utils/InterCom","UWA/Class/Model","DS/ENOjquery/ENOjquery"],(function(e,t,n,a){"use strict";var o=function(e){this.multiSelectVal=e,this.socketName="search_socket_"+(new Date).getTime(),this.socket=new t.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var n=this.options();this.socket.dispatchEvent("RegisterContext",n)};return o.prototype.destroy=function(){var e={};e.widget_id=widget.id,this.socket.dispatchEvent("unregisterSearchContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.disconnect()},o.prototype.options=function(e,t,n,o,i,r){var s={};return s.title=e,s.multiSel=this.multiSelectVal,s.mode="furtive",s.app_socket_id=this.socketName,s.widget_id=widget.id,s.default_with_precond=!0,s.show_precond=!1,s.idcard_activated=!1,s.role=n,t&&(s.precond="(",t=t.split(","),a.each(t,(function(e,t){0!==e&&(s.precond+=" OR "),s.precond+='flattenedtaxonomies:"types/'+t.trim()+'"'})),s.precond+=")",""!=i&&(s.precond+=i)),o&&(s.default_search_criteria=o),r&&(s.precond=r),s},o.prototype.activate=function(e,t,n,a,o,i,r){var s=this.options(e,t,n,o,i,r);this.callback=a,this.socket.dispatchEvent("InContextSearch",s)},o.prototype.isAvailable=function(){return e.is(this.socket)},o.prototype.objectsSelected=function(e){var t=[];if(this.callback){for(var a=0;a<e.length;a++){var o={},i=new n(e[a]);o.id=i.get("id"),o.identifier=i.get("ds6w:identifier"),o.type=i.get("ds6w:type"),o.policy=i.get("ds6w:policy"),o.type_icon_url=i.get("type_icon_url"),o.label=i.get("ds6w:label"),t.push(o)}this.callback(t)}},o})),define("DS/ENOProcessStepsUX/scripts/ProcessStep",["DS/ENOjquery/ENOjquery"],(function(e){"use strict";return{ProcessStep:function(t){this.allMandTasksComplete=!0,e.extend(this,t)}}})),define("DS/ENOProcessStepsUX/scripts/ProcessStepsUtil",["DS/PlatformAPI/PlatformAPI","UWA/Core","UWA/Class/Promise","DS/i3DXCompassServices/i3DXCompassServices","DS/WAFData/WAFData","DS/UIKIT/Alert","DS/ENOjquery/ENOjquery"],(function(e,t,n,a,o,i,r){"use strict";var s={executeOperation:function(e,t,n){var a=document.getElementById("accordianTasks"),o=document.getElementById("overlay"),i=(document.getElementById("detailsDisplay"),a.getAttribute("rootObjectId")),s=findFrame(getTopWindow(),"PROSProcessSteps"),l=null;o.style.display="block",s||(s=findFrame(getTopWindow(),"detailsDisplay")),l=s?s.location.href:getTopWindow().location.href,$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(l);return null!=t?t[1]||0:""};var c=$.urlParam("selectedProposedItem"),d=$.urlParam("selectedAffectedItems");r.ajax({url:"./enoPROSProcessStepsActions.jsp?objectId="+e+"&rootobjectId="+i+"&operationName="+t,async:!0,cache:!1,complete:function(e){document.getElementById("overlay").style.display="none";var t=e.responseText,a="begin_process_msg:",o=t.lastIndexOf(a)+18,i=":end_process_msg",r=(t=t.substr(o,t.length)).lastIndexOf(i),l=t.substr(0,r);setTimeout((function(){if(l&&alert(l),"true"==n){getTopWindow().RefreshHeader(),getTopWindow().deletePageCache();var e=null;e=s?s.location.href:getTopWindow().location.href,c&&d&&(e+="&selectedProposedItem="+c+"&selectedAffectedItems="+d),s.location.href=e}}),200)}})},handleDoubleClick:function(e){var t="../documentcontrol/enoDCLExecute.jsp?dclAction=ENODCLDocumentUI:enableDocumentInApproval&validateToken=false"+("&objectId="+e+"&suiteKey=DocumentControl");emxUICore.getDataPost(t),refreshFrame()},acceptTask:function(e){submitWithCSRF(e,findFrame(getTopWindow(),"listHidden")),getTopWindow().findFrame(getTopWindow(),"detailsDisplay").location.href=getTopWindow().findFrame(getTopWindow(),"detailsDisplay").location.href},showTooltip:function(e,t){if(document.getElementById(e).style.visibility="visible",""!=t){var n=document.getElementById(t);n&&(n.style.visibility="hidden"),showRoute(t)}},hideTooltip:function(e,t){if(document.getElementById(e).style.visibility="hidden",""!=t){var n=document.getElementById(t);n&&(n.style.visibility="hidden")}},showRoute:function(e){var t="&objectId="+e+"&suiteKey=DocumentControl",n=emxUICore.getDataPost("../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENODCLDocumentUI:getApproversImage",t);document.getElementById(e+"Images").innerHTML=n},openTreePage:function(e){var t="../common/emxTree.jsp?mode=insert&objectId="+e;getTopWindow().showModalDialog(t,250,250,!0)},openHistoryPage:function(e){var t="../audittrail/Execute.jsp?executeAction=ENOAuditTrails:preProcessHistory&structuralHistory=false&mode=";t+="&objectId="+e,getTopWindow().showModalDialog(t,250,250,!0)},openConditionsPage:function(e){var t="../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENOQuestionUI:getPromoteBlockingConditionsHTML&validateToken=false&mqlNoticeMode=true&objectId="+e,n=emxUICore.getDataPost(t),a=document.getElementById(e+"Blocking");a.innerHTML=n.substring(1),a.style.visibility="visible"},openLifecycle:function(e){var t="../common/emxLifecycle.jsp?toolbar=AEFLifecycleMenuToolBar&header=emxFramework.Lifecycle.LifeCyclePageHeading&export=false";showModalDialog(t+="&mode=advanced&objectId="+e,250,250,!0)},openEditPage:function(e,t){var n="";"Change Order"==t&&(n+="../common/emxForm.jsp?form=type_ChangeOrderSlidein&formHeader=EnterpriseChangeMgt.Heading.EditCO&HelpMarker=emxhelpchangeorderedit&mode=edit&submitAction=doNothing&preProcessJavaScript=preProcessInEditCO&postProcessJPO=enoECMChangeOrder:coPostProcessJPO&type=type_ChangeOrder&postProcessURL=../enterprisechangemgt/ECMCommonRefresh.jsp?functionality=editCOFromRMB",n+="&objectId="+e+"&parentOID="+e,n+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"),"Change Action"==t&&(n+="../common/emxForm.jsp?form=type_ChangeActionSlidein&formHeader=EnterpriseChangeMgt.Heading.EditCA&HelpMarker=emxhelpchangeactionedit&mode=edit&submitAction=doNothing&type=type_ChangeAction&postProcessURL=../enterprisechangemgt/ECMCommonRefresh.jsp?functionality=editCAFromRMB",n+="&objectId="+e+"&parentOID="+e,n+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"),"Quality System Document"==t&&(n+="../documentcontrol/enoDCLExecute.jsp?dclAction=ENODCLDocumentUI:showDocumentEditView&validateToken=false",n+="&objectId="+e+"&parentOID="+e,n+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"),getTopWindow().showSlideInDialog(n,!0),findFrame(getTopWindow(),"DCMyDocumentsTab").emxEditableTable.refreshStructureWithOutSort()},openViewPage:function(e){var t="../common/emxNavigator.jsp?mode=insert&objectId="+e;t+="&HelpMarker=emxhelpchangeorderedit",getTopWindow().showModalDialog(t,250,250,!0)},openViewPageDiv:function(e){var t="&objectId="+e+"&suiteKey=DocumentControl",n=emxUICore.getDataPost("../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENODCLDocumentUI:getBasicProperties",t),a=document.getElementById(e);a.innerHTML=n,a.style.visibility="visible"},format:function(){var e=arguments;return arguments[0].replace(/{(\d+)}/g,(function(t,n){return void 0!==e[n]?e[n+1]:t}))},resizeIframe:function(e){var t=e.contentDocument?e.contentDocument:e.contentWindow.document,n=getDocHeight(t);e.style.height=n+"px"},getDocHeight:function(e){var t=(e=e||document).body,n=e.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)},getDelimitedStringFromList:function(e,t){var n=e;if(n.length>1){var a=n.toString().split(",");n=a.join(t)}return n},getNonNullValue:function(e){return null==e?"":e},getStepTitleImage:function(e){if(null==statusIconImage)return"";e='<img src="../common/images/'+e+'" width="16px" height="15px" alt=""/>'},getStatusIcon:function(e,t,n,a){var o=e.status,i="false",r="";return"false"===t&&"false"===n&&(i="true"),"Optional"===e.taskType?r="OK"===o?"iconcircle complete checked icon":"iconcircle ps-active alert-iconcircle icon":"true"===n?r="KO"===o?"iconcircle stopped error icon":"iconcircle complete checked icon":"true"!==t&&"true"!==i||(r="true"===t&&"OK"===o?"iconcircle complete checked icon":"WIP"===o||"NA"===o||"hold"===o?"iconcircle pendingArrow icon":"KO"===o?"iconcircle stopped error icon":"stop"===o&&"true"===t?"<div class='octagonStatus'><div class='octagon'></div></div>":"iconcircle future icon"),"true"===t&&"stop"===o?r:(a&&(r+=" enoprocstpes-disabled"),"<div class='{0}'></div>".format(r))},getTitleTag:function(e,t,n){return t&&n?e+'&nbsp;&nbsp;<div class="'+t+'">'+n+"</div>":e},makeWSCall:function(e,t,n,a,i,r,l,c,d){s.getCSRFToken(t.myAppsURL).then((function(s){var u=e,p="";p=d||"POST";var m="enovia",f="application/json",h=(new Date).getTime();u=-1==u.indexOf("?")?u+"?tenant="+t.tenant+"&timestamp="+h:u+"&tenant="+t.tenant+"&timestamp="+h;var g=t.securityContext,v="";t.proxy&&(v=t.proxy),a=a||function(){},i=i||function(){};var S="";"undefined"!=typeof widget&&(S=widget.getValue("lang"),widget.lang&&(S=widget.lang));var b={};b.method=p,b.timeout="",b.type="json",m&&(b.auth={passport_target:m}),b.proxy=v,b.headers=g?{Accept:"application/json","Content-Type":f,SecurityContext:g,ENO_CSRF_TOKEN:s,"Accept-Language":S}:{Accept:"application/json","Content-Type":f,ENO_CSRF_TOKEN:s,"Accept-Language":S},n&&(b.data=n),b.onComplete=function(e){a(e,JSON.parse(n),r,l)},b.onFailure=function(e,t){console.log("Error in calling url: "+u),console.log("Additional Details:: httpMethod: "+p+" authentication: "+m+" securityContext: "+g+" ContentType: "+f),console.log("Error Detail: "+e),console.log("Error Data: "+JSON.stringify(t)),i(e,t)},b.onTimeout=function(){console.log("Timedout for url: "+u)},b.async=null==c||c,o.authenticatedRequest(u,b)}))},getFederatedSearchDataPromise:function(e){var t=this;return new n((function(n,a){if(!e.searchPayLoad.login){let t={};t["3dspace"]={SecurityContext:e.securityContext},e.searchPayLoad.login=t}var i="";"undefined"!=typeof widget&&(i=widget.getValue("lang"),widget.lang&&(i=widget.lang)),o.authenticatedRequest(e.mySearchURL+"/search",{method:"POST",type:"json",headers:{"Content-Type":"application/json",SecurityContext:e.securityContext,"Accept-Language":i},onComplete:function(e){n(e)},data:UWA.Json.encode(e.searchPayLoad),onFailure:function(e,n){n&&t.app.logger.error("Error Fetching Data From Search Index"),a(e)},onTimeout:function(e){a(e)}})}))},getCSRFToken:function(e,t){var a=this;return a.app||(a.app=t),new n((function(t,n){var i={},r=e+"/resources/v1/application/CSRF";i.method="GET",i.proxy="passport",i.onComplete=function(e){a.app&&a.app.logger.info("CSRF Token retrieved successfully"),t(e.csrf.value)},i.onFailure=function(e){a.app&&a.app.logger.error("Error while getting CSRF token"),n(e)},i.type="json",o.authenticatedRequest(r,i)}))},FileDropSelectHandlerColumn:function(e,t,n,a,o,i,r,l,c,d,u,p,m,f){s.functionOne(e,t,n,a,o,i,r,l,c,d,u,p,m,""),s.functionTwo(a)},functionOne:function(e,t,n,a,o,i,r,s,l,c,d,u,p,m){var f=$.Deferred();return FileSelectHandler(e,t,n,a,o,i,r,s,l,c,d,u,p,m),f},functionTwo:function(e){s.onfileDrop(e)},onDragLeaveFile:function(e,t){FileDragHoverColumn(e,t)},onfileDrop:function(e){document.getElementById(e).className="dropProgressColumn";for(var t=document.getElementById(e).children,n=0;n<=t.length-1;n++)t[n].parentNode.removeChild(t[n]);t=document.getElementById(e).children;for(n=0;n<=t.length-1;n++)t[n].parentNode.removeChild(t[n])},refreshFrame:function(){var e=findFrame(getTopWindow(),"detailsDisplay");e.location.href=e.location.href},getObjectHref:function(e,t){return"<a href='#' class='callout-link' objectid='{0}'>{1}</a>".format(e,t)},isWidget:function(){var e="";try{e=widget}catch(e){}return e},error:function(e){this.message(e,"error")},success:function(e){this.message(e,"success")},warn:function(e){this.message(e,"warning")},info:function(e){this.message(e,"primary")},message:function(e,t){null!=this.alertPS&&this.alertPS.hide();var n=!0;"error"==t&&(n=!1),this.alertPS=new i({closable:!0,visible:!0,autoHide:n,hideDelay:5e3,className:"wp-alert"}).inject(document.body,"top"),this.alertPS.add({className:t,message:e})}};return s})),define("DS/ENOProcessStepsUX/scripts/PlatformServices",["UWA/Core","UWA/Promise","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],(function(e,t,n){"use strict";var a=function(){};return a.prototype.initializePlatform=function(e){var t=this;n.getPlatformServices({platformId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",onComplete:function(n){if(null===n){n.options=e,(0,e.onFailure)("cannot retrieve platform data")}else{var a={};Array.isArray(n)?t.platformurls=a.platformurls=n[0]:t.platformurls=a.platformurls=n,widget.platformServices=t,a.options,(0,e.onComplete)(a)}},onFailure:function(t){(0,e.onFailure)(t)}})},a.prototype.get3DSpaceURL=function(){return this.getURL("3DSpace")},a.prototype.getTenantId=function(){return this.getURL("platformId")},a.prototype.get3DSearchURL=function(){return this.getURL("3DSearch")},a.prototype.getURL=function(e){return this.platformurls[e]||""},a.prototype.getCurrentUser=function(){return new Promise((function(e,t){n.getUser({onComplete:function(t){e({id:t.id,email:t.email,firstName:t.firstname,lastName:t.lastname})},onFailure:t})}))},a})),define("DS/ENOProcessStepsUX/scripts/ProcessStepsModals",["DS/UIKIT/Form","DS/UIKIT/Modal","UWA/Core","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/UIKIT/Input/Button"],(function(e,t,n,a,o){"use strict";var i={modalHeader:null,modalFooterButtons:null,modalBody:null,modalObject:null,_createModal:function(){var e=i.createFooterButtons();return this.modalObject=new t({closable:!0,header:"<h4>"+i.modalHeader+"</h4>",body:i.createModalBody(),footer:e,events:{onHide:function(){i.modalObject.destroy()}.bind(i.modalObject)}}),this.modalObject},createFooterButtons:function(){for(var e=i.modalFooterButtons,t=[],n=0;n<e.buttons.length;n++)"Cancel"==e.buttons[n].buttonValue?t[n]=new o({value:a.PS_Cancel,events:{onClick:function(){i.modalObject.hide()}}}):t[n]=new o({value:e.buttons[n].buttonValue,className:"primary"});return t},createModalBody:function(){for(var t=i.modalBody.mBody,n=[],o=0;o<t.length;o++){var r=!1;"textarea"===t[o].fieldType&&(r=!0),n[o]={type:t[o].fieldType,value:t[o].fieldValue,label:t[o].fieldLabel,placeholder:t[o].fieldPlaceHolder,className:t[o].fieldClassName,rows:t[o].fieldRows,html:t[o].html,required:r}}return new e({fields:n,events:{onInvalid:function(){alert(a.PS_MandFieldMissing_error)}}})},clearModalValues:function(){this.modalHeader=null,this.modalFooterButtons=null,this.modalBody=null,this.modalObject=null}};return i})),define("DS/ENOProcessStepsUX/scripts/ProcessTask",["DS/ENOjquery/ENOjquery"],(function(e){"use strict";return{ProcessTask:function(t){this.calloutFlag=!1,this.parentCalloutFlag=!1,e.extend(this,t)}}})),define("DS/ENOProcessStepsUX/scripts/ProcessStepsSpinner",["DS/UIKIT/Mask"],(function(e){"use strict";var t={wait:!1,keepActive:!1,doWait:function(n,a){if(!1===t.keepActive&&t.isWaiting())t.endWait(n);else if(t.isWaiting())return;e.mask(n,a),t.wait=!0},endWait:function(n){t.isWaiting()&&(e.unmask(n),t.wait=!1,t.keepActive=!1)},isWaiting:function(){return t.wait}};return t})),define("DS/ENOProcessStepsUX/scripts/DCLFileContentView",["css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/UIKIT/Accordion","DS/ENOjquery/ENOjquery","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps"],(function(e,t,n,a,o){"use strict";return{_loadDocumentFiles:function(e){var a=e,i=a.renderTo,r=new UWA.Element("div",{styles:{height:"10%",width:"99.9%"}});r.setAttributes({id:"divForReferenceView"});var s="",l=e.myAppsURL+"/resources/dclProcessSteps/DCLProcessStepsService/getFileContentsData";t.makeWSCall(l,a,JSON.stringify(e),(function(e,t,a,i){var l=e.data,c=JSON.parse(l),d=new UWA.Element("table",{styles:{width:"100%",cursor:"default",padding:"0px"}}),u="";try{u=widget}catch(e){}var p=[];p=u?[o.PS_FileName,o.PS_Type,o.PS_Version,o.PS_Comments,o.PS_Originator,o.PS_ModifiedDate,o.PS_FileSize]:[o.PS_FileName,o.PS_Type,o.PS_Version,o.PS_Actions,o.PS_Comments,o.PS_Originator,o.PS_ModifiedDate,o.PS_FileSize];for(var m=document.createElement("tbody"),f=document.createElement("tr"),h=0;h<p.length;h++){var g=document.createElement("td");g.style.height="1px",g.style.border="0 solid #fff",g.style.borderLeftWidth="1px",g.style.borderBottomWidth="1px",g.style.padding="5px 8px 5px 8px";var v=document.createElement("div");v.style.top="0px",g.appendChild(v);var S=document.createTextNode(p[h]);v.appendChild(S),f.appendChild(g)}f.style.backgroundColor="#e2e4e3",f.style.fontWeight="bold",m.appendChild(f);for(h=0;h<c.length;h++)for(var b=c[h].FileContents,y=0;y<b.length;y++){s=u?[b[y]["attribute[Title]"],b[y].type,b[y].revision,b[y].comments,b[y].owner,b[y].modified,b[y].size]:[b[y]["attribute[Title]"],b[y].type,b[y].revision,b[y].actionLink,b[y].comments,b[y].owner,b[y].modified,b[y].size];var w=document.createElement("tr");w.style.backgroundColor="#f4f5f6";for(var C=0;C<s.length;C++){var P=document.createElement("td");P.style.height="1px",P.style.border="0 solid #fff",P.style.borderLeftWidth="1px",P.style.borderBottomWidth="1px",P.style.padding="5px 8px 5px 8px";var k=document.createElement("div");k.style.top="0px",P.appendChild(k),k.innerHTML=s[C],w.appendChild(P),m.appendChild(w)}}d.addContent(m);new n({className:"styled divided filled",items:[{title:o.PS_FileContent,content:d,selected:!0}],events:{onOpen:function(){},onClose:function(){}}}).inject(r);a.appendChild(r)}),(function(e,t){console.log("onFailureCallback:errDetailds:"+e)}),i)}}})),define("DS/ENOProcessStepsUX/scripts/Settings",["UWA/Class","UWA/Promise","DS/ENOProcessStepsUX/scripts/PlatformServices","DS/WAFData/WAFData"],(function(e,t,n,a){"use strict";var o=e.singleton({init:function(){this.isPlatformInitialized=!0},getSetting:function(e){return widget[e]||""},getPlatformURLs:function(){return this.getSetting("platformServices")},loadPlatformServices:function(e){var t=this.getSetting("platformServices");""==t?this.addplatformService(e):e(t)},addplatformService:function(e){var a=this;new t((function(e,t){var a={onComplete:e,onFailure:t};n.prototype.initializePlatform(a)})).then((function(e){return new t((function(e,t){var n=o.getPlatformURLs(),a={url:n.get3DSpaceURL()+"/resources/pno/person/getsecuritycontext?tenant="+n.getTenantId(),onComplete:function(t){var n=JSON.parse(t);widget.getValue("pad_security_ctx")||o.addSetting("pad_security_ctx",n.SecurityContext),e(t)},onFailure:t};o.callCustomService(a)}))})).then((function(t){e(a)}),(function(e){console.log(e)}))},addSetting:function(e,t){if(!this.isPlatformInitialized)throw new Error("Platformservices not initialized");widget[e]&&console.log("Setting is already in use"),widget[e]=t},callCustomService:function(e){e.method=e.method||"GET",e.headers=e.headers||{Accept:"application/json"},e.proxy=e.proxy||"passport",e.withoutSC||(e.SecurityContext=o.getSetting("pad_security_ctx")),a.authenticatedRequest(e.url,e)}});return o})),define("DS/ENOProcessStepsUX/scripts/ProcessStepsWidgetActions",["DS/ENOProcessStepsUX/scripts/SearchConfiguration","css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/UIKIT/SuperModal","DS/ENOProcessStepsUX/scripts/ProcessStepsModals","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","UWA/Core","DS/ENOProcessStepsUX/scripts/Settings","DS/ENOProcessStepsUX/scripts/ProcessStepsSpinner","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/Panels/SidePanel","DS/UIKIT/Input/Button","DS/UIKIT/Form","DS/UIKIT/Autocomplete"],(function(e,t,n,a,o,i,r,s,l,c,d,u,p){"use strict";var m={callback:function(e){alert("back...")},executeViewAction:function(e){var t=e.currentTarget.attributes[0].value.split(":"),n=t[0],a=t[1],o=e.currentTarget.attributes[1].value,i=e.currentTarget.attributes[2].value,r=e.currentTarget.attributes[3].value,s=e.currentTarget.attributes[6].value,l={refJS:n,refMethod:a,title:i};l.viewObjectId=r,l.optionJson=s,"slideIn"==o?m.openActionInSlideIn(l):"popup"==o?m.openActionInPopup(l):m.executeAction(l)},refresh:function(){var e=r.getSetting("data");e.renderTo.innerHTML="",require(["DS/ENOProcessStepsUX/scripts/ProcessStepsView"],(function(t){t.prototype._createView_ProcessSteps(e)}))},refreshUserDefinedCallback:function(){var e=r.getSetting("data");e.data.callback&&e.data.callback()},executeTaskAction:function(e){var t=m.refresh,n=e.currentTarget.attributes[0].value.split(":"),a=n[0],o=n[1],i=e.currentTarget.attributes[1].value,r=e.currentTarget.attributes[2].value,s=e.currentTarget.attributes[3].value,l=e.currentTarget.attributes[6].value,c=e.currentTarget.attributes[7].value,d={refJS:a,refMethod:o,title:r};d.refresh=t,d.actionObjectId=s,d.that=this,d.actionTargetState=l,d.optionJson=c,"slideIn"==i?m.openActionInSlideIn(d):"popup"==i?m.openActionInPopup(d):m.executeAction(d)},executeAction:function(e){require([e.refJS],(function(t){var n=e.refMethod;try{(new t)[n](e)}catch(a){t[n](e)}}))},openActionInPopup:function(e){var t=new UWA.Element("div",{});for(var a in"")e[a]=""[a];e.renderTo=t,require([e.refJS],(function(t){var n=e.refMethod;try{(new t)[n](e)}catch(a){t[n](e)}})),new n({renderTo:widget.body}).dialog({body:t,title:e.title})},openActionInSlideIn:function(e){var t=new UWA.Element("div",{}),n={};for(var a in n)e[a]=n[a];e.renderTo=t,require([e.refJS],(function(t){var n=e.refMethod;try{(new t)[n](e)}catch(a){t[n](e)}}));var o=new c({side:"right","z-index":1e3,width:300});o.appendChild(t),o.elements.container.children[0].style.height="100%",o.elements.container.children[1].style.height="100%",o.elements.content.classList.add("sidepanel-content-wrapper"),o.elements.container.children[0].classList.add("sidepanel-content");var i=new UWA.Element("div",{class:"modal modal-root",styles:{display:"block"}}),r=new UWA.Element("div",{class:"modal-overlay in"}),s=UWA.createElement("div",{id:"sidePanelData",class:"modal-wrap"}),l=UWA.createElement("div",{id:"sidePanel-container"});widget.body.appendChild(l),s.empty(),o.inject(s),s.inject(i),i.inject(l),r.inject(l);var d=new UWA.Element("div",{text:e.title,class:"action-bar"}).inject(t);new UWA.Element("div",{class:"preview-icon fonticon fonticon-cancel btn-without-label btn-with-icon actionsContainer",events:{click:function(){document.getElementById("sidePanel-container").destroy()}}}).inject(d)},handleContextMenuClickPromote:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Approver_Comments,l.PS_Reviewer_Comments_Promotion,l.PS_Promote,l.PS_NeedsReviewApprove)},handleContextMenuClickPromoteTask:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Reviewer_Comments,l.PS_Reviewer_Comments_Promotion,l.PS_Promote,l.PS_NeedsReviewApprove)},handleContextMenuClickDemote:function(e){JSON.parse(e.optionJson),e.actionObjectId;e.isOwnerReviewerSame="true",this.openSlideInGenericTask(e,l.PS_Approver_Comments,l.PS_Reviewer_Comments_Demotion,l.PS_Demote,l.PS_NeedsReviewReject)},handleContextMenuClickDemoteTask:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Reviewer_Comments,l.PS_Reviewer_Comments_Demotion,l.PS_Demote,l.PS_NeedsReviewReject)},handleContextMenuClickComplete:function(e){this.checkTaskComment(e,l.PS_Comments,l.PS_Comments,l.PS_Complete,l.PS_completeTask)},handleContextMenuClickCompleteTask:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Comments,l.PS_Complete,l.PS_completeTask)},handleContextMenuClickEdit:function(e){JSON.parse(e.optionJson),e.actionObjectId;e.isOwnerReviewerSame="true",this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Comments,l.PS_Done,l.PS_editTask)},handleContextMenuClickEditTask:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Comments,l.PS_Done,l.PS_editTask)},handleContextMenuClickApproveTask:function(e){this.checkTaskComment(e,l.PS_Comments,l.PS_Approval_Comments,l.PS_Approve,l.PS_Approve)},checkTaskComment:function(e,t,n,a,i){var r=JSON.parse(e.optionJson),l=e.actionObjectId,c=r.myAppsURL+"/resources/processSteps/ProcessStepsService/getTaskComments/"+l;o.makeWSCall(c,r,null,(function(o){null==o.comments||""==o.comments||0==o.comments.length?(e.isOwnerReviewerSame="true",e.that.openSlideInGenericTask(e,t,n,a,i)):(e.comment=o.comments,e.that.setApproveOrRejectFortask(i,e,null))}),(function(e,t){s.endWait(widget.body);var n=t.errorMessage;null!=n&&""!=n&&o.error(n)}),null,null,null,"POST")},setApproveOrRejectFortask:function(e,t,n){var a=i.extendElement(document.body).getElements(".reason_input"),c=t.actionObjectId,d=JSON.parse(t.optionJson);if(null!=a&&a[0]&&""==a[0].value)a[0].getParent(".form-group").addClassName("has-error"),o.warn(l.PS_CommentsMissing_error);else{"Approve"==e&&"Reject"==e||(e==l.PS_Approve?e="Approve":e==l.PS_Reject&&(e="Reject"));var u=JSON.stringify({action:e,isOwnerReviewerSame:null!=t.isOwnerReviewerSame&&t.isOwnerReviewerSame,comments:null!=t.comment?t.comment:"Done"}),p=function(e,t){s.endWait(widget.body);var n=t.errorMessage?t.errorMessage:t.Result;null!=n&&""!=n&&o.error(n)},m=function(e){s.endWait(widget.body),(0,t.refresh)(),t.that.refreshUserDefinedCallback()},f=function(e){o.makeWSCall(g,d,u,m,p,null,null,null,"PUT")},h=function(e){var n={data:[{dataelements:{reAssignComments:"",routeId:t.routeId,taskId:t.actionObjectId,newAssigneeId:widget.getValue("x3dPlatformId")&&"OnPremise"===widget.getValue("x3dPlatformId")?e.mapper[t.newOwner.value]:e.ObjIds[0],newAssigneeType:t.newOwner.type,taskAssigneeName:t.newOwner.label,taskAssigneeUserName:t.newOwner.name,type:"Inbox Task",isChangeAssignee:"true"}}]};t.myAppsURL=d.myAppsURL;let a=d.myAppsURL+"/resources/v1/modeler/routes/"+t.routeId+"/tasks/"+t.actionObjectId;o.makeWSCall(a,t,JSON.stringify(n),f,p,null,null,null,"PUT")},g=d.myAppsURL+"/resources/processSteps/ProcessStepsService/updateTask/pid=pid:"+c,v={};if(e===l.PS_editTask&&t.newOwner&&t.newOwner.value!==t.orginalOwner.value){let e=t.newOwner.value;if(r.getSetting("userSyncService").length>0)v.endpoint=d.myAppsURL+r.getSetting("userSyncService"),v.postData=JSON.stringify({phyIds:[t.newOwner.value]}),o.makeWSCall(v.endpoint,d,v.postData,h,p,null,null,null,"POST");else if("OnPremise"===widget.getValue("x3dPlatformId")){let t={mapper:{}};t.mapper[e]=e,h(t)}else{let t={ObjIds:[]};t.ObjIds=[e],h(t)}}else f();s.doWait(widget.body),n&&n.destroy()}},handleContextMenuClickApprove:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Approval_Comments,l.PS_Approve,l.PS_Approve)},onRefresh:function(){var e=document.getElementById("sidePanel-container");document.getElementsByClassName("triptych-main withtransition")[0].style.cssText="width:auto;",e.destroy()},openSlideInGenericTask:function(t,n,a,i,r){var m=new UWA.Element("div",{}),f=new c({side:"right","z-index":1e3,height:"100%",width:300});f.appendChild(m),f.elements.container.children[0].style.height="100%",f.elements.container.children[1].style.height="100%",f.elements.content.classList.add("sidepanel-content-wrapper"),f.elements.container.children[0].classList.add("sidepanel-content");f.elements.panel.setStyles({"background-color":"#FFFFFF"});var h=new UWA.Element("div",{class:"modal modal-root",styles:{display:"block"}}),g=new UWA.Element("div",{class:"modal-overlay in"}),v=UWA.createElement("div",{id:"sidePanelData"}),S=UWA.createElement("div",{id:"sidePanel-container"});widget.body.appendChild(S),v.empty(),f.inject(v),v.inject(h),h.inject(S),g.inject(S);var b=document.getElementsByClassName("triptych-right withtransition borderRight close"),y=!1;0===b.length&&(b=document.getElementsByClassName("triptych-right withtransition borderRight open"),y=!0);var w=document.getElementsByClassName("triptych-main withtransition"),C=document.getElementById("sidePanelData");C.children[0].children[0].style.setProperty("border-left","1px solid #D3D3D3",""),C.children[0].children[0].style.setProperty("border-radius","0",""),w[0].style.cssText="width:80%;",b[0].style.cssText=y?"width:0%;":"width:20%;";var P=document.getElementById("sidePanel-container");null!=P.getChildren()[1]&&P.removeChild(P.getChildren()[1]);var k=JSON.parse(t.optionJson),T=function(e,t){s.endWait(widget.body);var n=t.errorMessage;null!=n&&""!=n&&o.error(n)},D=function(s){var c=s.data,f=new UWA.Element("div",{class:"action-bar"}).inject(m);t.routeId=k.routeId,t.orginalOwner=t.newOwner={label:k.ownerName,email:k.ownerEmail,selected:!0,value:k.ownerObjectId};var h='([ds6w:type]:(Group) OR [ds6w:status]:(Public)) OR ([ds6w:type]:Person AND current:Active) OR [ds6w:type]:"foaf:Group"  OR (flattenedtaxonomies:"types/Person" AND current:"active")';let g=k.mySearchURL,v={multiSelect:!1,className:"autocomplete-procesSteps-sidePanel",placeholder:l.PS_Autocomplete_Placeholder,minLengthBeforeSearch:3,typeDelayBeforeSearch:500,datasets:{configuration:{templateEngine:function(e,t,n){e.addClassName("default-template people-search-template");let a=UWA.createElement("div",{html:n.label,class:"item-label"}),o=UWA.createElement("img",{src:n.picture}),i=UWA.createElement("div");o.addClassName("people-search-img"),i.setHTML([o,a]),e.setContent(i.innerHTML)},remoteSearchEngine:function(e,t){var n;return new Promise((function(a,i){var r={with_indexing_date:!0,with_synthesis:!0,with_nls:!1,label:"viewer",order_field:"ds6w:label",order_by:"asc",nresults:500,select_predicate:["ds6w:label","ds6w:type","ds6w:identifier"],select_file:["icon","thumbnail_2d"],query:h,specific_source_parameter:{},tenant:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise"};"***"!==t&&(r.specific_source_parameter["3dspace"]={additional_query:"AND ([ds6w:label]:(*"+t+"*) OR [ds6w:identifier]:(*"+t+"*))"}),"OnPremise"!==r.tenant&&(r.specific_source_parameter.usersgroup={additional_query:"AND [ds6w:label]:(*"+t+"*)"});var s={searchPayLoad:r,mySearchURL:g};o.getFederatedSearchDataPromise(s).then((function(t){n={},S.removeDataset("defaultDataset");var o=[];t.results&&t.results.forEach((function(e){var t,n,a,i,r;e.attributes.forEach((function(e){"ds6w:label"===e.name&&(t=e.value),"resourceid"===e.name&&(n=e.value),"ds6w:identifier"===e.name&&(a=e.value),"ds6w:what/ds6w:type"===e.name&&(i="foaf:Group"===e.value?e.value.split(":")[1]:e.value),"preview_url"===e.name&&(r=e.value)}));var s={name:a,label:t,value:n,picture:r,type:i};o.push(s)})),e.items=o,n.dataset=e,n.matchingItems=o,a(n)}),(function(t){t.type="error",t.dataset=e,i(t)}))}))}}},events:{onSelect:function(e){t.newOwner={},console.log(e),t.newOwner.label=e.label,t.newOwner.name=e.name,t.newOwner.value=e.value,t.newOwner.type=e.type,console.log(t.newOwner)},onUnselect:function(e){t.newOwner={},S.removeDataset("defaultDataset")}}};var S=new p(v);S.getContent().setStyles({position:"relative",width:"100%"});var C={name:"defaultDataset",items:[t.orginalOwner]};S.addDataset(C);let T=new d({icon:"search"});T.getContent().setStyles({position:"relative",float:"right"});T.addEvent("onClick",(function(){var n=new e(!1),a=S.elements.input.value;n.activate("User",null,null,(e=>{t.newOwner.value=e[0].id,t.newOwner.name=e[0].identifier,t.newOwner.type=e[0].type,t.newOwner.label=e[0].label,t.newOwner.picture=e[0].type_icon_url,t.newOwner.selected=!0,S.removeDataset("defaultDataset");var n={name:"defaultDataset",items:[t.newOwner]};S.addDataset(n)}),a,'AND current: Active OR [ds6w:type]:"foaf:Group")',h)}));let D=UWA.createElement("span",{html:`<span style='margin-top : 15% !important;font-size : 14px !important; font-weight: bold'>${l.PS_Assignee}</span><span style='margin-top: 15% !important; font-size : 14px !important; color : #e87b00'>&nbsp;*</span>`}),O=UWA.createElement("div",{html:[S,T],styles:{position:"relative",width:"auto",display:"flex",direction:"row","margin-bottom":"15px"}});r!==l.PS_editTask&&(D.hide(),O.hide()),D.inject(f),O.inject(f);var I=new u({fields:[{type:"text",label:n,pattern:"[a-zA-Z]+",placeholder:a,multiline:!0,rows:4,required:"true"==c}]});I.getContent().setStyles({"margin-top":"10%"});var A=function(e){var n=e.srcElement.value;n.length>0?t.comment=n:t.comment=null};I.elements.container.addEvent("change",A),I.elements.container[0].addEvent("keyup",A),I.inject(f);var x=new d({value:l.PS_Cancel,class:"warning",events:{onClick:function(e){P.destroy(),y?(b[0].style.cssText="width:450px;",w[0].style.cssText="width:auto; right: 450px;"):(b[0].style.cssText="width:0%;",w[0].style.cssText="width:auto;")}}});x.getContent().setStyles({"margin-top":"20%",float:"right"}),x.inject(f);var E=new d({value:i,class:"primary",events:{onClick:function(e){0===Object.keys(t.newOwner).length?o.warn(l.PS_Invalid_User):"true"==c&&null==t.comment?o.warn(l.PS_CommentsMissing_error):"true"==c&&null!=t.comment&&t.comment.length>0?(t.that.setApproveOrRejectFortask(r,t,null),P.destroy(),y?b[0].style.cssText="width:auto; width:450px;":(b[0].style.cssText="width:0%;",w[0].style.cssText="width:auto;")):(t.that.setApproveOrRejectFortask(r,t,null),P.destroy(),w[0].style.cssText="width:auto;",y?(b[0].style.cssText="width:450px;",w[0].style.cssText="right: 450px;"):b[0].style.cssText="width:0%;")}}});E.getContent().setStyles({"margin-top":"20%","margin-right":"5%",float:"right"}),E.inject(f)},O=t.actionObjectId;if(r==l.PS_Approve||r==l.PS_Reject){var I=k.myAppsURL+"/resources/processSteps/ProcessStepsService/showTaskComments/"+O,A=k.myAppsURL+"/resources/processSteps/ProcessStepsService/checkForComments/"+O;o.makeWSCall(I,k,null,(function(e){"true"==e.data?D(e):o.makeWSCall(A,k,null,D,T,null,null,null,"POST")}),T,null,null,null,"POST")}else if(r==l.PS_NeedsReviewApprove||r==l.PS_NeedsReviewReject){A=k.myAppsURL+"/resources/processSteps/ProcessStepsService/canEditReviewerComments/"+O;o.makeWSCall(A,k,null,D,T,null,null,null,"POST")}else if(r==l.PS_editTask||r==l.PS_completeTask){var x=JSON.parse('{"data": "true"}');D(x)}widget.addEvent("onRefresh",this.onRefresh)},handleContextMenuClickRejectTask:function(e){this.checkTaskComment(e,l.PS_Comments,l.PS_Rejection_Comments,l.PS_Reject,l.PS_Reject)},handleContextMenuClickReject:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Rejection_Comments,l.PS_Reject,l.PS_Reject)},handleContextMenuClickAccept:function(e){var t=JSON.parse(e.optionJson),n="pid:"+e.actionObjectId,a=t.myAppsURL+"/resources/processSteps/ProcessStepsService/accept/"+n;s.doWait(widget.body),o.makeWSCall(a,t,null,(function(n){((0,e.refresh)(),t.callback)&&(0,optionJson.callback)();o.success("CA_NLS.ECM_CA_Task_Accept_Success"),s.endWait(widget.body)}),null,null,null,null,"PUT")},handleContextMenuClickRestart:function(e){},openProperties:function(e){new UWA.Element("div",{})},search:function(t){var n=new e(!0),a=m.callback;n.activate("Add Reference Document","Quality System Document","VPLMProjectLeader",a,null,"")}};return m})),define("DS/ENOProcessStepsUX/scripts/ProcessSteps",["DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/ENOProcessStepsUX/scripts/ProcessStep","DS/ENOProcessStepsUX/scripts/ProcessTask","DS/PlatformAPI/PlatformAPI","UWA/Core","UWA/Data","UWA/Class/Promise","DS/i3DXCompassServices/i3DXCompassServices","DS/ENOjquery/ENOjquery","css!DS/ENOProcessStepsUX/ENOProcessStepsUX","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/ENOProcessStepsUX/scripts/ProcessStepsWidgetActions"],(function(e,t,n,a,o,i,r,s,l,c,d,u){"use strict";var p={loadReferenceView:function(t,n,a,o){var i=p.getInputDataJSON(t,n,"","","",o),r=o.myAppsURL+"/resources/processSteps/ProcessStepsService/getReferenceViewURL";e.makeWSCall(r,o,i,(function(e,n,a,r){var s=e.data,c=JSON.parse(s),d=c[0].RefernceJS,u=c[0].RefernceMethod,p=c[0].AMD,m=document.getElementById("ReferenceView");if(null==m&&(m=a),"false"==p)document.getElementById("ReferenceView").innerHTML="",l("#ReferenceView").load(d,{objectId:t,MCSURL:o.myAppsURL});else{var f=u;require([d],(function(e){var t=e[f];return(i=JSON.parse(i)).renderTo=m,t(i)}))}}),(function(e,t){console.log("onReferenceViewFailureCallback:errDetailds:"+e)}),a)},loadProcessSteps:function(a,o,i,r){var s=p.getInputDataJSON(a,o,"","","",r),c=r.myAppsURL+"/resources/processSteps/ProcessStepsService/getProcessStepsData";e.makeWSCall(c,r,s,(function(a,i,s,c){for(var u=a.data,m=JSON.parse(u),f=p.getCarouselDiv(),h=0;h<m.length;h++){for(var g,v,S=m[h].ProcessSteps,b=p.getHeaderHTML(i),y=S.length,w=p.getDefaultLoadedStepNumber(t,S),C=0;C<S.length;C++){var P=(M=new t.ProcessStep(S[C])).sequenceNumber,k=M.title,T=(M.titleImage,M.description),D=C+1,O=M.objectIds,I=M.stepXMLStateSymName,A=M.isActiveStep,x=M.isElapsedStep,E=M.isStoppedStep,N=M.isWaitingStep,_=!("true"===M.isActiveStep||"true"===M.isElapsedStep||"true"===M.isStoppedStep||"true"===M.isWaitingStep),L=M.stepXMLPolicySymName,U="graph";console.log("stepTitle:"+k),"true"==A?(v=C+1,U="graph active ps-active",C===w-1&&(U+=" activegraphring loaded",g=M),"true"==E&&(U="graph stopped",C===w-1&&(U+=" stoppedgraphring loaded",g=M))):"true"==x?(U="graph complete",C===w-1&&(U+=" completegraphring loaded",g=M)):(U="graph",C===w-1&&(U+=" futuregraphring loaded",g=M));var R=0==C?"":"--\x3e",j=C==S.length-1?"\x3c!----\x3e":"\x3c!--",W=e.getDelimitedStringFromList(O,"|");null==g&&C==S.length-1&&(g=S[C],v=C+1),f+=R,f+='<div step="'+k+'" ',f+='sequence="'+P+'" ',f+='stepnumber="'+D+'" ',f+='objectId="'+W+'" ',f+='policy="'+L+'" ',f+='state="'+I+'" ',f+='isactive="'+A+'" ',f+='iselapsed="'+x+'" ',f+='isstopped="'+E+'" ',f+='isfuture="'+_+'" ',f+='totalnumsteps="'+y+'" ',f+='selectedAffectedItems="'+e.getNonNullValue(o)+'" ',f+='class="'+U+'"><span>'+D+"</span>",N&&(e.isWidget()?f+="<div class='octagonBadge' title=\"{1}\">".format(M.dependencyHref,M.dependencyLabel):f+='<div class=\'octagonBadge\' onclick="{0}" title="{1}">'.format(M.dependencyHref,M.dependencyLabel),f+="<div class='octagon'></div></div>"),f+="</div>"+j}f+="</div>",f+='<div class="steptitle">';var F="titletext";for(C=0;C<S.length;++C){k=(M=new t.ProcessStep(S[C])).title,A=M.isActiveStep,x=M.isElapsedStep,E=M.isStoppedStep;"true"==A?(F="titletext textactive","true"==E&&(F="titletext textstopped")):F="true"==x?"titletext textcomplete":"titletext textfuture",f+='<div class="'+F+'">'+k+"</div>"}f+="</div>",f+='<span class="fonticon fonticon-chevron-down collapseSummaryDown"></span>',f+='<div class="summary hiddenSummary">';for(C=0;C<S.length;++C){var M;T=(M=new t.ProcessStep(S[C])).description;f+='<div class="titletext summary">'+e.getNonNullValue(T)+"</div>"}f+="</div>",f+="</div>",f+='<div id="go-right" class="sliderarrows next"></div>',f+="</div>";var B="tablebanner",H="tasktable";if(g){"true"==g.isActiveStep?(B+=" tablebanneractive",H+=" tasktableactive","true"==g.isStoppedStep&&(B+=" tablebannerstopped",H+=" tasktablestopped")):"true"==g.isElapsedStep?(B+=" tablebannercomplete",H+=" tasktablecomplete"):(B+=" tablebannerfuture",H+=" tasktablefuture");var V="pointleft",J="pointright";"1"==w?V="":w==y&&(J="");k=g.title;f+=p.getAccordianTasksDiv(),f+=p.getTableBannerContent(w,k,y,g.isActiveStep,g.isElapsedStep,g.isStoppedStep),f+='<table id=taskTable class="'+H+'">',f+=b;var X=g.stepTasks,q=[],K=[],z=!0;for(C=0;C<X.length;C++){var G=new n.ProcessTask(X[C]);if(!X[C].ignore){"Mandatory"!==G.taskType&&"Dependency"!==G.taskType||"OK"===G.status||(K.push(G),1==z&&(z=!1));var $=null;X[C].dependeeType&&"all"===X[C].dependeeType?($=[]).push.apply($,K):X[C].dependeeTasks&&($=X[C].dependeeTasks);var Q=!("true"===g.isActiveStep||"true"===g.isElapsedStep||"true"===g.isStoppedStep||"true"===g.isWaitingStep),Z=p.getCallout(G,$,q,g.isActiveStep,g.isElapsedStep,Q),Y=!(!Z&&!0!==G.parentCalloutFlag);null!=G.comment&&(Y=!1);var ee=p.getTaskAction(G,Z);!0!==G.calloutFlag&&!0!==G.parentCalloutFlag||q.push(G.sequenceNumber);var te=e.getStatusIcon(G,g.isActiveStep,g.isElapsedStep,Y),ne=G.formattedDueDate,ae=G.formattedDueDateClass,oe=e.getTitleTag(G.title,ae,ne),ie=Y||Q||"NA"===G.status||"hold"===G.status?"enoprocstpes-disabled":"";f+="<tr>",f+='<td width="2%">'+te+"</td>",f+="<td><span class={0}>".format(ie)+oe+"</span><span class='callout-holder graphCallout'>{0}</span></td>".format(Z);var re=G.taskType;if(re="Mandatory"==re||"routetask"==re?d.PS_Mandatory:"Optional"==re?d.PS_Optional:d.PS_Dependency,f+="<td class={0}>".format(ie)+e.getNonNullValue(re)+"</td>",e.isWidget()){if(G.actionLauncher)ee=p.getLauncherDiv(G.actionLauncher,G.dashboardActionLabel),f+="<td class={0} taskAction".format(ie)+" >",f+="<div > "+ee+" </div>",f+="</td>";else{var se=G.dashboardActionImage.split("@"),le=G.dashboardActionHref.split("@"),ce=G.dashboardActionTargetLocation.split("@"),de=G.dashboardActionLabel.split("@");for(r.ownerName=e.getNonNullValue(X[C].owner),r.ownerObjectId=e.getNonNullValue(X[C].ownerObjectId),r.ownerEmail=e.getNonNullValue(X[C].ownerEmailId),r.routeId=e.getNonNullValue(X[C].viewObjectId),f+="<td class={0} taskAction".format(ie)+" >",h=0;h<se.length;h++)f+="<span href='"+le[h]+"' targetlocation='"+ce[h]+"' title='"+de[h]+"'  actionobjectId='"+G.actionObjectId+"' actionClick='true' class='"+se[h]+"' actionTargetState='"+G.targetState+"'  options='"+JSON.stringify(r)+"' > </span>";f+="</td>"}var ue=G.dashboardViewImage.split("@"),pe=G.dashboardViewHref.split("@"),me=G.dashboardViewTargetLocation.split("@"),fe=G.dashboardViewLabel.split("@");for(f+="<td class={0} taskAction".format(ie)+" >",h=0;h<ue.length;h++)f+="<span amdhref='"+pe[h]+"' targetlocation='"+me[h]+"' title='"+fe[h]+"'  viewObjectId='"+G.viewObjectId+"' viewClick='true' class='"+ue[h]+"' options='"+JSON.stringify(r)+"'>",ue[h]&&ue[h].indexOf("http")>=0&&(f+="<img src='"+ue[h]+"' ></img>"),f+="</span>";f+="</td>"}else f+="<td class={0}>".format(ie)+ee+"</td>",f+="<td class={0}>".format(ie)+e.getNonNullValue(G.viewHref)+"</td>";f+="<td class={0}>".format(ie)+p.getOwnerImageDiv(X[C].ownerImageURL,G.title,X[C].ownerEmailId,X[C].ownerImageTooltip)+"<div class='owner-name'>"+e.getNonNullValue(X[C].owner)+"</div></td>",i.showRoleColumn&&"true"===i.showRoleColumn&&(f+="<td class={0}>".format(ie)+e.getNonNullValue(G.role)+"</td>"),f+=" </tr>"}}}else{B+=" tablebannercomplete",H+=" tasktablecomplete",f=p.getAccordianTasksDiv(),f+='<div id=taskTableBanner class="'+B+'">',f+='<p class="alignleft m-all-0">'+v+". "+k+"</p>",f+='<div class="alignright">',f+='<div class="'+V+'"></div>';var he=d.PS_Step+" {0} "+d.PS_of+" {1}";f+='<p class="m-all-0 left p-l-half p-r-half">'+(he=he.format(v,y))+" </p>",f+='<div class="'+J+'"></div>',f+="</div>",f+="</div>",f+='<table id=taskTable class="'+H+'">',f+=b}if(f+="</table>",f+="</div>",f+="</div>",f+="</div>",f+="</div>",e.isWidget()||l("#accordianTasks").html(f),s){var ge=new UWA.Element("div",{styles:{height:"100%",width:"99.9%"}});ge.setAttributes({id:"divForProcessSteps"});var ve=p.getReferencetableDiv();ge.addContent(ve),ge.addContent(f),ge.inject(s)}return p.checkOverflow(!0),p.attachEventHandlers(s,r),l(".loading").remove(),f}}),(function(e,t){console.log("onFailureCallback:errDetailds:"+e)}),i)},attachEventHandlers:function(e,t){l(".collapseSummaryDown").click((function(){return l(".summary").toggleClass("showSummary"),l(".collapseSummaryDown").toggleClass("fonticon-chevron-up fonticon-chevron-down"),!1})),l(".graph").mouseover((function(){p.highlightStep(l(this))})),l(".graph").mouseout((function(){p.unhighlightStep(l(this))})),l(".graph").click((function(){p.loadTasksForStep(l(this),e,t)})),l("#go-right").click((function(){p.slideOnX("right")})),l("#go-left").click((function(){p.slideOnX("left")})),l(window).resize((function(){p.checkOverflow("true")})),p.attachTaskTableEventHandlers(t.myAppsURL,t.proxy,t.tenant,t.securityContext,e,t)},attachTaskTableEventHandlers:function(t,n,a,o,i,r){var s,c=l(".callout-link").attr("objectid");l(".pointleft").click((function(){p.loadPrevStep(t,n,a,o,i,r)})),l(".pointright").click((function(){p.loadNextStep(t,n,a,o,i,r)}));l(".infoPop").hover((function(){return s=setTimeout((function(){p.showCallout()}),500),!1}),(function(){return clearTimeout(s),!1})),l(".wux-ui-3ds-comment").hover((function(e){return s=setTimeout((function(){p.showCalloutComments(e.target.getAttribute("data-callout-id"))}),500),!1}),(function(){return clearTimeout(s),!1})),l(".wux-ui-3ds-text-note").hover((function(e){return s=setTimeout((function(){p.showCalloutInstructions(e.target.getAttribute("data-callout-instructions"))}),500),!1}),(function(){return clearTimeout(s),!1})),l(".boxclose").click((function(){return p.hideCallout(),!1})),l(".boxcloseComments").click((function(e){return p.hideCalloutComments(e.target.parentElement.id),!1})),l(".callout-link").click((function(){return e.openViewPage(c),!1})),l(".launcherradiobtn").click((function(){p.updateHrefTag(this,l(".launcherradiobtn").attr("submitLabel"))})),l(".left.pointer.launcherbtn").click((function(){p.hideLauncher()})),l(".proslauncherMenu").click((function(){p.showLauncher(this.name)})),l(".dashboardLauncherAction").click((function(e){u.executeTaskAction(e)})),l(".accepttask").click((function(){e.acceptTask(l("[title=Promote]").attr("accepturl"))})),l("[href*='executeOperation']").click((function(){e.executeOperation(this.attributes.objectid.value,"promote","true")}));var d=!1;l("[href*='handleDoubleClick']").click((function(){d||(d=!0,e.handleDoubleClick(this.attributes.objectid.value))})),l(".referencedocument").on("drop",(function(){var t=document.getElementById("divDrag10,1");t.className="dropProgressColumn",e.FileDropSelectHandlerColumn(event,l(".dropAreaColumn").attr("objectid"),"formDrag10,1","divDrag10,1","id[level1]=1,1.expandRow","0,0","null","Quality System Document","","","","","DOCUMENTS","isValidDnDOperation"),t.className="dropAreaColumn"})),l(".checkinfile").on("drop",(function(){var t=document.getElementById("divDrag00,0");t.className="dropProgressColumn",e.FileDropSelectHandlerColumn(event,l(".dropAreaColumn").attr("objectid"),"formDrag00,0","divDrag00,0","id[level1]=1,1.expandRow","0,0","null","Quality System Document","","","","","DOCUMENTS","isValidDnDOperation"),t.className="dropAreaColumn"})),l(".checkinfile").on("dragleave",(function(){e.onDragLeaveFile(event,"divDrag00,0")})),l("[actionClick='true']").click((function(e){u.executeTaskAction(e)})),l("[viewClick='true']").click((function(e){u.executeViewAction(e)}))},loadTaskCompleteCallback:function(e,t,n,a,o){},checkOverflow:function(e){var t=document.getElementsByClassName("slider")[0];if(t){var n=t.style.overflow;n&&"visible"!==n||(t.style.overflow="hidden");var a=t.clientWidth<t.scrollWidth;t.style.overflow=n;var o=l("div.slider").position(),i=l("div.carousel").position();if(!a){var r=l("div.slider").width(),s=l("div.carousel").width();(o.left!=parseInt(i.left)-4||r>s)&&(a=!0)}if(a?(l("#go-left").css("visibility","visible"),l("#go-right").css("visibility","visible")):(l("#go-left").css("visibility","hidden"),l("#go-right").css("visibility","hidden")),e){var c,d=l("div.loaded").outerWidth(!0),u=d*l("div.loaded").attr("stepnumber"),m=(l("div.loaded").offset(),l("div.slider")),f=p.getTranslatedX(m),h=0,g=f+u-d;g<parseInt(i.left)?c=f+(h=parseInt(i.left)-g):(h=f+u-t.clientWidth)>0&&(c=f-h),void 0!==c&&c!==f&&h>4&&p.doTranslateX(m,c)}}},loadNextStep:function(e,t,n,a,o,i){var r=l(".loaded").attr("stepnumber"),s=parseInt(r,10)+1,c=l("div[stepnumber='"+s+"']");p.loadTasksForStep(c,o,i),p.checkOverflow(!0)},loadPrevStep:function(e,t,n,a,o,i){var r=l(".loaded").attr("stepnumber"),s=parseInt(r,10)-1,c=l("div[stepnumber='"+s+"']");p.loadTasksForStep(c,o,i),p.checkOverflow(!0)},getSelectionColor:function(e){var t=l(e).css("background-color");return-1!=l.inArray(t,["rgb(86, 189, 234)","#56bdea"])?"#005685":-1!=l.inArray(t,["rgb(53, 209, 115)","#35d173"])?"#6e821e":-1!=l.inArray(t,["rgb(255, 148, 77)","#ff944d"])?"#cd0200":"#b8b8b8"},getHeaderHTML:function(e){var t='<thead class="fw-bold"><tr><th width="2%"></th><th>'+d.PS_Activities+"</th><th>"+d.PS_ActivityType+"</th>";return t+="<th>"+d.PS_Actions+"</th><th>"+d.PS_RelatedData+"</th>",t+="<th>"+d.PS_Owner+"</th>",e.showRoleColumn&&"true"===e.showRoleColumn&&(t+="<th>"+d.PS_Role+"</th>"),t+="</tr></thead>"},getDefaultLoadedStepNumber:function(e,t){for(var n="",a=0;a<t.length;a++){var o=new e.ProcessStep(t[a]),i=(o.sequenceNumber,o.title,o.titleImage,o.description,o.objectIds,o.stepXMLStateSymName,o.isActiveStep);o.isElapsedStep,o.stepXMLPolicySymName;if("true"==i){n=a+1;break}}return""===n&&(n=t.length),n},getCurrentLoadedStepNumber:function(){return l(".loaded").attr("stepnumber")},getAccordianTasksDiv:function(){return"<div>",'<div class="tableborder">','<div id="accordianTasks" style="display: table;width: 100%;"><div><div class="tableborder">'},getCarouselDiv:function(){return'<div id="carousel" class="carousel" style="overflow: hidden;"><div id="go-left" class="sliderarrows prev"></div><div class="slider"><div class="content">'},getReferencetableDiv:function(){return'<div id="ReferenceView" >'},loadTasksForStep:function(t,a,o){t.is("span")&&(t=t.parent());var i=t.attr("sequence"),r=t.attr("objectid"),s=t.attr("policy"),c=t.attr("state"),u=t.attr("selectedAffectedItems"),m=(t.attr("type"),o.myAppsURL+"/resources/processSteps/ProcessStepsService/getProcessTasksData"),f=p.getInputDataJSON(r,u,i,s,c,o);e.makeWSCall(m,o,f,(function(t,a,i,r){l("div.graph").css("box-shadow","none"),l("div.graph").css("color","white"),l("div.graph").removeClass("activegraphring"),l("div.graph").removeClass("completegraphring"),l("div.graph").removeClass("futuregraphring"),l("div.graph").removeClass("loaded"),l("div.graph").css("font-size","medium");var s=p.getSelectionColor(r);r.css("color",s),r.css("box-shadow","inset 0 0 0 3px "+s),r.addClass("loaded");r.attr("sequence"),r.attr("objectid"),r.attr("policy"),r.attr("state"),r.attr("selectedAffectedItems"),r.attr("type");for(var c=t.data,u=JSON.parse(c),m=p.getHeaderHTML(a),f=r.attr("stepnumber"),h=r.attr("step"),g=r.attr("totalnumsteps"),v=r.attr("isactive"),S=r.attr("iselapsed"),b=r.attr("isstopped"),y=r.attr("isfuture"),w=[],C=[],P=!0,k=(a.myAppsURL,0);k<u.length;k++)for(var T=u[k].ProcessTasks,D=0;D<T.length;D++){var O=new n.ProcessTask(T[D]);if(!O.ignore){var I=e.getStatusIcon(O,v,S),A=O.title,x=O.formattedDueDate,E=O.formattedDueDateClass,N=e.getTitleTag(A,E,x),_="";_=O.actionLauncher?p.getLauncherDiv(O.actionLauncher):O.actionHref;O.dependeeType,O.actionLauncher;"Mandatory"!==O.taskType&&"Dependency"!==O.taskType||"OK"===O.status||(C.push(O),1==P&&(P=!1));var L=null;O.dependeeType&&"all"===O.dependeeType?(L=[]).push.apply(L,C):O.dependeeTasks&&(L=O.dependeeTasks);var U=p.getCallout(O,L,w,v,S,y),R=!(!U&&!0!==O.parentCalloutFlag);null!=O.comment&&(R=!1);_=p.getTaskAction(O,U);!0!==O.calloutFlag&&!0!==O.parentCalloutFlag||w.push(O.sequenceNumber);I=e.getStatusIcon(O,v,S,R),x=O.formattedDueDate,E=O.formattedDueDateClass,N=e.getTitleTag(O.title,E,x);var j=R||"true"===y||"NA"===O.status||"hold"===O.status?"enoprocstpes-disabled":"";m+="<tr>",m+='<td width="2%" class={0}>'.format(j)+I+"</td>",m+="<td><span class={0}>".format(j)+N+"</span><span class='callout-holder'>{0}</span></td>".format(U);var W=O.taskType;if(W="Mandatory"==W||"routetask"==W?d.PS_Mandatory:"Optional"==W?d.PS_Optional:d.PS_Dependency,m+="<td class={0}>".format(j)+e.getNonNullValue(W)+"</td>",e.isWidget()){if(O.actionLauncher)_=p.getLauncherDiv(O.actionLauncher,O.dashboardActionLabel),m+="<td class={0} taskAction".format(j)+" >",m+="<div > "+_+" </div>",m+="</td>";else{var F=O.dashboardActionImage.split("@"),M=O.dashboardActionHref.split("@"),B=O.dashboardActionTargetLocation.split("@"),H=O.dashboardActionLabel.split("@");O.dashboardViewImage;for(m+="<td class={0} taskAction".format(j)+" >",k=0;k<F.length;k++)m+="<div amdhref='"+M[k]+"' targetlocation='"+B[k]+"' title='"+H[k]+"'  actionobjectId='"+O.actionObjectId+"' actionClick='true' class='"+F[k]+"' actionTargetState='"+O.targetState+"'  options='"+JSON.stringify(o)+"' > </div>";m+="</td>"}var V=O.dashboardViewImage.split("@"),J=O.dashboardViewHref.split("@"),X=O.dashboardViewTargetLocation.split("@"),q=O.dashboardViewLabel.split("@");for(m+="<td class={0} taskAction".format(j)+" >",k=0;k<V.length;k++)m+="<div amdhref='"+J[k]+"' targetlocation='"+X[k]+"' title='"+q[k]+"'  viewObjectId='"+O.viewObjectId+"' viewClick='true' class='"+V[k]+"' > </div>";m+="</td>"}else m+="<td class={0}>".format(j)+_+"</td>",m+="<td class={0}>".format(j)+e.getNonNullValue(O.viewHref)+"</td>";m+="<td class={0}>".format(j)+p.getOwnerImageDiv(O.ownerImageURL,O.title,O.ownerEmailId,O.ownerImageTooltip)+"<div class='owner-name'>"+e.getNonNullValue(O.owner)+"</div></td>",a.showRoleColumn&&"true"===a.showRoleColumn&&(m+="<td class={0}>".format(j)+e.getNonNullValue(O.role)+"</td>"),m+=" </tr>"}}var K=p.getTableBannerContent(f,h,g,v,S,b);l("#taskTableBanner")[0].outerHTML=K,l("#taskTable").html(m);var z=r.attr("class");-1!=z.indexOf("active")?(l("#taskTableBanner").attr("class","tablebanner tablebanneractive"),l("#taskTable").attr("class","tasktable tasktableactive")):-1!=z.indexOf("stopped")?(l("#taskTableBanner").attr("class","tablebanner tablebannerstopped"),l("#taskTable").attr("class","tasktable tasktablestopped")):-1!=z.indexOf("complete")?(l("#taskTable").attr("class","tasktable tasktablecomplete"),l("#taskTableBanner").attr("class","tablebanner tablebannercomplete")):(l("#taskTable").attr("class","tasktable tasktablefuture"),l("#taskTableBanner").attr("class","tablebanner tablebannerfuture")),p.attachTaskTableEventHandlers(a.myAppsURL,a.proxy,a.tenant,a.securityContext,i,o)}),(function(e,t){console.log("loadTaskFailureCallback:errDetailds:"+e)}),a,t)},getInputDataJSON:function(e,t,n,a,o,i){var r={};return r.objectId=e,r.selectedAffectedItems=t,r.myAppsURL=i.myAppsURL,r.proxy=i.proxy,r.tenant=i.tenant,r.securityContext=i.securityContext,r.inputSequence=n,r.inputStepPolicy=a,r.inputStepState=o,r.widgetui="true",r.MCSURL=i.myAppsURL,r.page="",r.timeZone=i.timeZone,null!=i&&i.page&&(r.page=i.page),r.showRoleColumn=!0,i.showRoleColumn&&(r.showRoleColumn=i.showRoleColumn),i.callback&&(r.callback=i.callback),JSON.stringify(r)},getTableBannerContent:function(e,t,n,a,o,i){var r="",s="tablebanner",l="pointleft",c="pointright";"true"==a?(s+=" tablebanneractive","true"==i&&(s+=" tablebannerstopped")):s+="true"==o?" tablebannercomplete":" tablebannerfuture","1"==e?l="":e==n&&(c=""),r+='<div id=taskTableBanner class="{0}">'.format(s),r+='<p class="alignleft m-all-0">{0}. {1}</p>'.format(e,t),r+='<div class="alignright">',r+='<div class="{0}"></div>'.format(l);var u=d.PS_Step+" {0} "+d.PS_of+" {1}";return r+='<p class="m-all-0 left p-l-half p-r-half">'+(u=u.format(e,n))+"</p>",r+='<div class="{0}"></div>'.format(c),r+="</div>",r+="</div>"},getLauncherDiv:function(t,n){return e.isWidget()?p.getLauncherDivForDashboard(t,n):p.getLauncherDivForSpace(t)},getLauncherDivForSpace:function(e){for(var t="",n=JSON.parse(e),a=n.closelabel,o=n.submitlabel,i=0;i<n.launchers.length;i++){var r=n.launchers[i];t+='<a  class="proslauncherMenu" class="left" name=\'{0}\'  title=\'{1}\'><img src=\'{2}\' width="23px" height="23px"/></a>'.format(r.name,r.label,r.image),t+='<div id="{0}" class="prosactionlauncher left m-l-1">'.format(r.name);for(var s="",l=0;l<n.launchers[i].inputs.length;++l){var c=n.launchers[i].inputs[l],d="";0===l&&(d="checked",s=c),t+='<input class="left launcherradiobtn" type="radio" name="{0}" id="{1}" value="{2}" submitLabel="{3}" onclick="updateHrefTag(this, \'{3}\')" data-href="{4}" data-target="{5}" data-title="{6}" data-label="{7}" {8}>'.format(r.name,r.name,c.name,o,encodeURI(c.href),c.target,c.label,c.label,d),t+='<label class="left" for="{0}"><img width="23px" height="23px" class="left" src="{1}" title="{2}"/></label>'.format(c.name,c.image,c.label)}t+=p.buildHrefTag(s.href,r.name,s.target,s.label,"","left pointer launcherbtn launchersubmitbtn",o),t+='<button onclick="hideLauncher();return false;" title="{0}" class="left pointer launcherbtn"></button>'.format(a),t+="</div>"}return t},getLauncherDivForDashboard:function(e,t){var n="",a=JSON.parse(e),o=a.closelabel,i=a.submitlabel;if(a=a.dashboardLaunchers)for(var r=0;r<a.length;r++){var s=a[r];n+="<a  class=\"proslauncherMenu\" class=\"left\" name='{0}'  title='{1}'><span class='{2}'/></a>".format(s.name,s.label,s.image),n+='<div id="{0}" class="prosactionlauncher left m-l-1">'.format(s.name);for(var l="",c=0;c<a[r].inputs.length;++c){var d=a[r].inputs[c],u="";0===c&&(u="checked",l=d),n+='<input checked class="left launcherradiobtn" type="radio" name="{0}" id="{1}" value="{2}" submitLabel="{3}" onclick="updateHrefTag(this, \'{3}\')" data-href="{4}" data-target="{5}" data-title="{6}" data-label="{7}" {8}>'.format("create1","Craete2","Crete3","create",encodeURI(d.href),d.target,"c1","c2",u),n+='<label class="left" for="{0}"><span   class="left {1}"  title="{2}"/></label>'.format(d.label,d.image,d.label)}n+=p.buildHrefTag(l.href,s.name,l.target,t,"","left pointer launcherbtn launchersubmitbtn",i),n+='<button onclick="hideLauncher();return false;" title="{0}" class="left pointer launcherbtn"></button>'.format(o),n+="</div>"}return n},buildHrefTag:function(t,n,a,o,i,r,s){return n+="proslauncher",e.isWidget()?""===a||"content"===a||"popup"===a?"<button href='"+t+"' targetlocation='"+a+"'  title='"+o+"' actionobjectId='"+n+"' class='dashboardLauncherAction  {0}'  >{1}</button>".format(r,""):"slidein"!==a?"<button  href='"+t+"' targetlocation='"+a+"'  title='"+o+"' actionobjectId='"+n+"' class='dashboardLauncherAction  {0}' >{1}</button>".format(r,""):"<button href='"+t+"' targetlocation='"+a+"'  title='"+o+"' actionobjectId='"+n+"'  class='dashboardLauncherAction  {0}'   >{1}</button>".format(r,""):""===a||"content"===a||"popup"===a?"<button onclick=\"showNonModalDialog('{0}', '930', '650', 'true')\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(t,n,s,r,i):"listHidden"==a?"<button onclick=\"javascript:submitWithCSRF('{0}', findFrame(getTopWindow(),'listHidden'));hideLauncher();return false;\" id='{1}' title='{2}' target='{3}' class='{4}'>{5}</button>".format(t+="&frameName=detailsDisplay",n,s,a,r,i):"slidein"!==a?"<button onclick=\"{0};hideLauncher();return false;\" id='{1}' title='{2}' target='{3}' class='{4}'>{5}</button>".format(t,n,s,a,r,i):"<button onclick=\"getTopWindow().showSlideInDialog('{0}', 'true');hideLauncher();return true;\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(t,n,s,r,i)},updateHrefTag:function(e,t){var n=l("#"+e.id+"proslauncher"),a=e.id,o=e.dataset.href,i=e.dataset.title,r=(e.dataset.label,e.dataset.target),s=p.buildHrefTag(o,a,r,i,"","left pointer launcherbtn launchersubmitbtn",t);n.replaceWith(s)},hideLauncher:function(){l(".prosactionlauncher").hide(),l(".proslauncherMenu").show()},showLauncher:function(e){l(".prosactionlauncher").hide(),l(".proslauncherMenu").hide(),l("#"+e+".prosactionlauncher").fadeIn(1e3)},highlightStep:function(e){if(e.is("span")&&(e=e.parent()),-1==e.attr("class").indexOf("loaded")){var t=p.getSelectionColor(e);e.css("color",t),e.css("box-shadow","inset 0 0 0 3px "+t+", 0 0 1em "+t)}},unhighlightStep:function(e){e.is("span")&&(e=e.parent()),-1==e.attr("class").indexOf("loaded")&&(e.css("color","white"),e.css("box-shadow","none"))},slideRight:function(){l(".slider").removeClass("move-left move-right"),l(".slider").addClass("move-right")},slideLeft:function(){l(".slider").removeClass("move-left move-right"),l(".slider").addClass("move-left")},slideOnX:function(e){var t=l("div.slider"),n=p.getTranslatedX(t),a=n;a="left"===e?n+200:n-200,p.doTranslateX(t,a),p.checkOverflow(!1)},doTranslateX:function(e,t){var n=t+"px";e.css("transform","translateX("+n+")"),e.css("-webkit-transform","translateX("+n+")"),e.css("-moz-transform","translateX("+n+")")},getTranslatedX:function(e){var t=e.css("transform")||e.css("-webkit-transform")||e.css("-moz-transform");if("none"==t)return 0;var n=t.replace(/[^0-9\-.,]/g,"").split(","),a=n[12]||n[4];return parseInt(a)},getTaskAction:function(t){return t.actionLauncher?p.getLauncherDiv(t.actionLauncher):e.getNonNullValue(t.actionHref)},getCallout:function(t,n,a,o,i,r){var s="";(e.isWidget()&&widget.myApps3DSpaceURL,null!=t.comment&&""!=t.comment)&&(s+=u='<a href="#bottom" class="balloon"><div data-callout-id="callout'+t.sequenceNumber+'" class="fonticon wux-ui-3ds-comment"></div><div   id="callout'+t.sequenceNumber+'" class="hidden-balloon"><a href="#" class="boxcloseComments"></a><div class="calloutContent"><ul class="plain-ul">',s+="<li><strong>"+d.PS_Comments+"</strong></li>",s+="</br>",s+="<li>"+t.comment+"</li>",null!=t.reviewerComment&&""!=t.reviewerComment&&(s+="</br>",s+="<li><strong>Reviewer Comment</strong></li>",s+="</br>",s+="<li>"+t.reviewerComment+"</li>"),s+="</ul></div></div></a>");if("true"!=r&&n){var l=!0,c=t.externalProcessPage?t.calloutHeader+" on "+e.getObjectHref(t.calloutLinkId,t.calloutLinkLabel):t.calloutHeader,u='<a href="#bottom" class="balloon"><div class="fonticon fonticon-info infoPop"></div><div id="callout" class="hidden-balloon"><a href="#" class="boxclose"></a><div class="calloutContent"><ul class="plain-ul">';if(t.dependeeType&&"all"===t.dependeeType)for(var m=0;m<n.length;m++)if(a.length>0&&-1!=a.indexOf(n[m].sequenceNumber))return t.parentCalloutFlag=!0,"";var f=[];for(m=0;m<n.length;m++){n[m].title&&n[m].title!==t.title&&n[m].status&&"OK"!==n[m].status&&l&&(a.length>0&&-1!=a.indexOf(n[m].sequenceNumber)?t.parentCalloutFlag=!0:(l=!1,s+=u));var h=n[m].routeTasks;if(h&&!1===t.parentCalloutFlag)for(var g=0;g<h.length;g++)h[g].status&&"WIP"===h[g].status&&(l&&(s+=u,l=!1),(f.length<=0||!f.includes(h[g].actionObjectId+"|"+h[g].title))&&(s+="<li>{0}</li>".format(e.getStatusIcon(h[g],o,i)+"<div class='balloon-task'>"+h[g].title+"</div>"),p.setProcessedTasks(h[g].actionObjectId,h[g].title,f)));else n[m]&&"OK"!==n[m].status&&n[m].title!==t.title&&!1===t.parentCalloutFlag&&(s+="<li><strong>{0}</strong></li>".format(c),s+="<br>",null!=n[m].stepTitle&&t.externalProcessPage&&(s+="<li>{0}</li>".format("Step : "+n[m].stepTitle)),(f.length<=0||!f.includes(n[m].actionObjectId+"|"+n[m].title))&&(s+="<li>{0}</li>".format(e.getStatusIcon(n[m],o,i)+"<div class='balloon-task'>"+p.text_truncate(n[m].title,"100")+"</div>"),p.setProcessedTasks(n[m].actionObjectId,n[m].title,f)))}l||(s+="</ul></div></div></a>",t.calloutFlag=!0)}if(null!=t.instructions&&""!=t.instructions){s+='<a href="#instructions" class="balloon"><div data-callout-instructions="callout_instructions'+t.sequenceNumber+'" class="fonticon wux-ui-3ds-text-note"></div><div  id="callout_instructions'+t.sequenceNumber+'"class="hidden-balloon"><a href="#" class="boxcloseComments"></a><div class="calloutContent"><ul class="plain-ul">',s+="<li><strong>"+d.PS_Instructions+"</strong></li>",s+="</br>",s+="<li>"+t.instructions+"</li>",s+="</ul></div>",s+="</a>"}return s},showCallout:function(){document.getElementById("callout").classList.remove("hidden-balloon"),document.getElementById("callout").classList.add("visible-balloon")},hideCallout:function(){document.getElementById("callout").classList.remove("visible-balloon"),document.getElementById("callout").classList.add("hidden-balloon")},showCalloutComments:function(e){document.getElementById(e).classList.remove("hidden-balloon"),document.getElementById(e).classList.add("visible-balloon")},showCalloutInstructions:function(e){document.getElementById(e).classList.remove("hidden-balloon"),document.getElementById(e).classList.add("visible-balloon")},hideCalloutComments:function(e){document.getElementById(e).classList.remove("visible-balloon"),document.getElementById(e).classList.add("hidden-balloon")},getOwnerImageDiv:function(e,t,n,a){var o="<div";return o+=e?' class="person-image" style="background-image: url("{0}");"'.format(encodeURI(e)):' class="person-solid icon"',n&&(o+=" onclick=\"location.href='mailTo:{0}?subject={1}'\"".format(n,encodeURI(t)),e||(o+=' style="cursor:pointer"')),a&&(o+=' title="{0}"'.format(a)),o+="></div>",e||(o+="&nbsp;&nbsp;&nbsp;&nbsp;"),o},text_truncate:function(e,t,n){return null==t&&(t=150),null==n&&(n="..."),e.length>t?e.substring(0,t-n.length)+n:e},setProcessedTasks:function(e,t,n){null!=e&&""!=e&&"undefined"!=e&&n.push(e+"|"+t)}};return p})),define("DS/ENOProcessStepsUX/scripts/ProcessStepsView",["UWA/Class/View","UWA/Core","UWA/Promise","DS/ENOProcessStepsUX/scripts/ProcessSteps","DS/ENOProcessStepsUX/scripts/Settings","DS/UIKIT/Scroller"],(function(e,t,n,a,o,i){"use strict";var r=function(){this._name="ProcessStepsView"};return r.prototype._createView_ProcessSteps=function(e){new n((function(e,t){o.loadPlatformServices(e)})).then((function(t){var n=e.id||e.objectId;n||(n=e.data.id);var r=e.myAppsURL?e.myAppsURL:o.getPlatformURLs().get3DSpaceURL(),s=e.mySearchURL?e.mySearchURL:o.getPlatformURLs().get3DSearchURL(),l=e.tenant?e.tenant:o.getPlatformURLs().getTenantId(),c=e.securityContext?e.securityContext:o.getSetting("pad_security_ctx"),d=!!e.userSyncService&&e.userSyncService,u=e.renderTo;!function(e){var t=document.createElement("div");t.classList.add("loading");for(var n=0;n<4;n++){var a=document.createElement("div");a.classList.add("loading-bar"),t.appendChild(a)}var o=document.createElement("span"),i=document.createTextNode("Loading...");o.appendChild(i),t.appendChild(o),e.appendChild(t)}(u),o.addSetting("data",e),o.addSetting("myApps3DSpaceURL",r),o.addSetting("myApps3DSearchURL",s),o.addSetting("userSyncService",d),e.myAppsURL=r,e.mySearchURL=s,e.tenant=l,e.securityContext=c,e.proxy="passport";var p=new UWA.Element("div",{id:"processStepsView",styles:{height:"100%"}}),m=new UWA.Element("div",{id:"ReferenceView"}),f=new UWA.Element("div",{id:"TableView"});a.loadReferenceView(n,"",m,e),a.loadProcessSteps(n,"",f,e),p.appendChild(m),p.appendChild(f),new i({element:p}).inject(u),u.appendChild(p)}))},r.prototype.refresh=function(){var e=o.getSetting("options");e.renderTo.innerHTML="",(new r)._createView_ProcessSteps(e)},r})),define("DS/ENOProcessStepsUX/scripts/ECMProposedChangeView",["css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/UIKIT/Accordion","DS/ENOjquery/ENOjquery","DS/ENOProcessStepsUX/scripts/ProcessSteps","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","UWA/Controls/Input"],(function(e,t,n,a,o,i,r){"use strict";return{_loadDocumentFiles:function(e){var r=e,s=r.renderTo,l=new UWA.Element("div",{styles:{height:"10%",width:"99.9%"}});l.setAttributes({id:"divForReferenceView"});var c="",d=r.myAppsURL+"/resources/ecmProcessSteps/ECMProcessStepsService/getProposedChangesData",u=r.myAppsURL+"/resources/ecmProcessSteps/ECMProcessStepsService/getRealizedChangesData",p=function(e,t,a,o){for(var s=e.data,d=JSON.parse(s),u=new UWA.Element("table",{styles:{width:"100%",cursor:"default"}}),p=!0,m="",h=["",i.PS_Title,i.PS_Type,i.PS_Name,i.PS_State,i.PS_Revision,i.PS_Actions,i.PS_ChangeInformation],g=document.createElement("tbody"),v=document.createElement("tr"),S=0;S<h.length;S++){var b=document.createElement("td");b.style.height="1px",b.style.border="0 solid #fff",b.style.borderLeftWidth="1px",b.style.borderBottomWidth="1px",b.style.padding="5px 8px 5px 8px";var y=document.createElement("div");y.style.top="0px",b.appendChild(y);var w=document.createTextNode(h[S]);y.appendChild(w),v.appendChild(b)}v.style.backgroundColor="#e2e4e3",v.style.fontWeight="bold",g.appendChild(v);for(S=0;S<d.length;S++){var C=d[S].ProposedItems,P=d[S].RealizedItems,k="";C?(p=!0,m=i.PS_ProposedChanges,k=C):P&&(p=!1,m=i.PS_RealizedChanges,k=P);d[S].selectedproposeditems;for(var T=0;T<k.length;T++){c=[k[T].title,k[T].type,k[T].name,k[T].current,k[T].revision,k[T].action,k[T].changeInfo];var D=document.createElement("tr");D.style.backgroundColor="#f4f5f6";var O=document.createElement("td");if(k.length>0){O.style.height="1px",O.style.border="0 solid #fff",O.style.borderLeftWidth="1px",O.style.borderBottomWidth="1px",O.style.padding="5px 8px 5px 8px",(A=document.createElement("div")).style.top="0px",O.appendChild(A);new UWA.Controls.Input.Checkbox({value:k[T].id,displayData:!0,id:k[T].id,events:{onClick:function(){f()}}}).inject(A);D.appendChild(O)}for(var I=0;I<c.length;I++){var A;(O=document.createElement("td")).style.height="1px",O.style.border="0 solid #fff",O.style.borderLeftWidth="1px",O.style.borderBottomWidth="1px",O.style.padding="5px 8px 5px 8px",(A=document.createElement("div")).style.top="0px",O.appendChild(A),A.innerHTML=c[I],D.appendChild(O)}g.appendChild(D)}}if(u.addContent(g),p||0!=k.length){new n({className:"filled",items:[{title:m,content:u,selected:!0}],events:{onOpen:function(e){null!=document.getElementById(e.id)&&(document.getElementById(e.id).getElementsByClassName("content-wrapper")[0].style.display="block")},onClose:function(e){null!=document.getElementById(e.id)&&(document.getElementById(e.id).getElementsByClassName("content-wrapper")[0].style.display="none")}}}).inject(l);var x=document.getElementsByClassName("accordion-item active");x.length>1&&(x[0].className="accordion-item")}a||(a=r.renderTo),a.appendChild(l)},m=function(e,t){console.log("onFailureCallback:errDetailds:"+e)},f=function(){var t="",n=a("input:checked"),i=e;i=i.objectId,n.each((function(e){t+=a(this).attr("value"),e<n.length-1&&(t+="|")}));r.myAppsURL;document.getElementById("accordianTasks").innerHTML="",o.loadProcessSteps(i,t,"",e)};new Promise(((n,a)=>{t.makeWSCall(d,r,JSON.stringify(e),(e=>{p(e),n()}),(e=>{m(e),a()}),s,!1)})).then((()=>new Promise(((n,a)=>{t.makeWSCall(u,r,JSON.stringify(e),(e=>{p(e),n()}),(e=>{m(e),a()}),s,!1)}))))}}}));