define("DS/SimReviewHomepage/SimReviewHomepage",["UWA/Core","UWA/Class","i18n!DS/SimReviewHomepage/assets/nls/Homepage","DS/WelcomeScreenView/WelcomeScreen","DS/WelcomeScreenView/WelcomeScreenButtonController","DS/WelcomeScreenView/WelcomeScreenMRUController","DS/WebappsUtils/WebappsUtils","DS/WebUtils/WebServices","DS/SPYLoader/SPYWSProxy"],(function(e,t,i,o,r,n,s,l,a){"use strict";const c="ds6w:label",d="PSR.mru";let p;return t.singleton({_prepareMRU:function(e,t){let i={items:e,controller:new n({simpleHit:!0,onHit:i=>{i&&e.forEach((e=>{e.id==i.id&&(this.container.hide(),t.onObjectOpened(e))}))},onContextualMenu:i=>{let o=[];return i&&(o=[{type:"PushItem",title:"Open",action:{callback:i=>{e.forEach((e=>{e.id==i.id&&(this.container.hide(),t.onObjectOpened(e))}))}}}]),o}})};this.container.setMRU(i);var o=document.querySelector(".afr-mru-panel");if(null!=o){o.classList.add("afr-mru-maximized");var r=document.getElementById("resize");null!=r&&r.remove()}},_processPreferences:function(e,t){let i=[],o=[];""!=e&&null!=e&&(i=JSON.parse(e),i=i.reverse()),0<i.length&&null!=i[0]&&i.forEach((e=>{let t={},i=e.Play3DXContent.data.items[0];t.id=i.displayName,t.displayName=i.displayName,t.displayType=i.displayType,t.envId=i.envId,t.image=i.image,t.modified=i.modified,t.objectId=i.objectId,t.objectType=i.objectType,t.provider=i.provider,t.requiredAuth=i.requiredAuth,t.serviceId=i.serviceId,o.push(t)}));a.getThumbnails(i,(e=>{let i=JSON.parse(e),r=[];i.results.forEach((e=>{let t=(e=>{let t={};return e.forEach((e=>{t[e.name]=e.value})),t})(e.attributes);o.forEach((e=>{t.resourceid==e.objectId&&(e.image=t.preview_url,e.title=t[c],null!=e.title&&""!=e.title&&r.push(e))}))})),this._prepareMRU(r,t)}),(e=>{console.error(e),this.thumbnailfetchRetries++,this.thumbnailfetchRetries>1?console.error("PSR Home Page - Error while fetching thumbnails : Stopping after 3 retries"):this._processPreferences(window.localStorage.getItem(d),t)}),(()=>{console.error("PSR Home Page - Timeout while fetching thumbnails")}))},init:function(e){p=this.container;var t="mruPSR"+e.tenant;let a={title:"Physics Simulation Review",subtitle:"Experience collaborative simulation data",background:s.getWebappsBaseUrl()+"/SimReviewHomepage/assets/images/bckg.jpg",linksCategories:[{id:"ContentAndKnowledge",i18n:{title:i.Content_And_Knowledge},links:[{id:"userAssist",i18n:{title:i.User_Assistance},icon:"user-help",url:e.UALink},{id:"whatsNew2",i18n:{title:i.Whats_New},icon:"megaphone",url:e.imwnLink}]},{id:"SocialNetworks",i18n:{title:i.Social_Networks},links:[{id:"SimuliaUsersCommunity",i18n:{title:i.Community},icon:"topbar-users",url:"https://dsext001-eu1-215dsi0708-3dswym.3dexperience.3ds.com/#community:07ascjMNRR-U2i0knw33Zw"}]}],buttons:{items:[{id:"open",i18n:{title:i.Open_Content},icon:"open",controller:new r({onAction:t=>(require(["DS/PADServices/utils/SearchUtils"],(t=>{let i={title:"Open Content",precond:"(types/DesignSight OR types/FEM)",search_criteria_to_display:"",showApplyButton:!1,applyButton_Nls:"",callback:t=>{let i,o=t[0],r=o.sourceid.split(":"),n=r[0],s=r[1];"3dspace"===n?i={provider:n,serviceId:n,objectId:o.id,objectType:o["ds6w:type_value"],displayName:o[c],displayType:o["ds6w:type"],requiredAuth:"passport",envId:s,contextid:o.contextid,modified:o["ds6w:modified_value"],image:null!=o.preview_url?o.preview_url:o.preview_url_value}:console.error("UNKNOWN ASSET PROVIDER"),null==i.envId&&(i.envId="OnPremise"),this.container.hide(),e.onObjectOpened(i)},cancel:function(e){}};t.inAppsSearch(i)})),Promise.resolve())})},{hasCustomContent:!0,id:"mru",i18n:{title:i.Most_Recent_Content},icon:"search-recent",controller:new r({onAction:i=>(this.thumbnailfetchRetries=0,l.myAppsPreference({preferenceName:t,onComplete:t=>{this._processPreferences(t,e)},onFailure:()=>{this._processPreferences(window.localStorage.getItem(d),e)}}),Promise.resolve())})}]},dragAndDrop:{callbacks:{onDragEnter:e=>Promise.resolve("OverFullPage"),onDrop:e=>{console.log("Object Drop"),this.container.hide()}}},guidedTour:{title:"Quick Tour",items:[{id:"OpenContent",type:"VIDEO",video:s.getWebappsBaseUrl()+"/SimReviewHomepage/assets/video/PSR_Homepage.mp4",title:i.GuidedTourOpen,text:i.GuidedTourOpenSub},{id:"ExploreResults",type:"VIDEO",video:s.getWebappsBaseUrl()+"/SimReviewHomepage/assets/video/PSR_Details.mp4",title:i.GuidedTourExplore,text:i.GuidedTourExploreSub},{id:"SynchronizeWidgets",type:"VIDEO",video:s.getWebappsBaseUrl()+"/SimReviewHomepage/assets/video/PSR_Sync.mp4",title:i.GuidedTourSync,text:i.GuidedTourSyncSub},{id:"toolbar1",type:"IMAGE",img:s.getWebappsBaseUrl()+"/SimReviewHomepage/assets/images/toolbar1.png",title:i.GuidedTourToolbar1,text:i.GuidedTourToolbarSub1},{id:"toolbar2",type:"IMAGE",img:s.getWebappsBaseUrl()+"/SimReviewHomepage/assets/images/toolbar2.png",title:i.GuidedTourToolbar2,text:i.GuidedTourToolbarSub2},{id:"toolbar3",type:"IMAGE",img:s.getWebappsBaseUrl()+"/SimReviewHomepage/assets/images/toolbar3.png",title:i.GuidedTourToolbar3,text:i.GuidedTourToolbarSub3}]}};a.buttons.items[1].controller.subscribe({event:"REMOVE_CUSTOM_CONTENT"},(()=>{let e={items:[],controller:new n({simpleHit:!0,onHit:e=>{},onContextualMenu:e=>{let t=[];return e&&(t=[]),t}})};this.container.setMRU(e);let t=this.container.getDOM().querySelector(".afr-mru-panel");t&&t.remove()})),this.container=new o(a)},getDOM:function(){return this.container.getDOM()},show:function(){console.log("homepage show"),this.container.show()},hide:function(){this.container.hide()}})})),define("DS/SimReviewHomepage/commands/CATSPYHomeCmd",["DS/ApplicationFrame/Command","DS/SimReviewHomepage/SimReviewHomepage"],(function(e,t){"use strict";return e.extend({beginExecute:function(){t.show()}})}));