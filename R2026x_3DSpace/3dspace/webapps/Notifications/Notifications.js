define("DS/Notifications/NotificationsManagerAbstract",["require","exports","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/CoreEvents/ModelEvents","UWA/Core","DS/TreeModel/typings/types"],(function(t,i,e,o,n,s){"use strict";function a(t){this._currentLengthHistory++;var i=new o({label:"",grid:t}),e=this.getHistory();e.addRoot(i),this._currentLengthHistory>this._lengthHistory&&(e.removeRoot(e.getNthRoot(0)),this._currentLengthHistory--)}return function(){function t(t){this._modelEvents=new n,this._counterNotifications=0,this._lengthHistory=200,this._currentLengthHistory=0,this._dataModel={options:t}}return t.prototype.addNotif=function(t){var i=s.clone(t);this._counterNotifications++,this._completeOptions(i);var e=this._buildModelFromOptions(this._counterNotifications,i);return a.call(this,e),this._modelEvents.publish({event:"notification_added",data:s.clone(e)}),this._counterNotifications},t.prototype.modifyNotif=function(t,i){var e,n=s.clone(i);this._completeOptions(n);for(var a=this._buildModelFromOptions(t,n),c=0;c<this._currentLengthHistory;c++){var r=this.getHistory().getNthRoot(c);if(r.options.grid.count===t){e=r.options.grid;var l=new o({label:"",grid:a});r.addChild(l);break}}this._modelEvents.publish({event:"notification_modified",data:{oldOptions:e,newOptions:s.clone(a)}})},t.prototype.setLengthHistory=function(t){if(!(this._lengthHistory==t||t<0)){for(;this._currentLengthHistory>t;this._currentLengthHistory--){var i=this.getHistory();i.removeRoot(i.getNthRoot(0))}this._lengthHistory=t}},t.prototype.getLengthHistory=function(){return this._lengthHistory},t.prototype.getNotifOptions=function(t){for(var i=0;i<this._currentLengthHistory;i++){var e=this.getHistory().getNthRoot(i);if(e.options.grid.count===t){var o=e.getChildren();return o?s.clone(o[o.length-1].options.grid):s.clone(e.options.grid)}}},t.prototype.getLastNthNotificationAdded=function(t){if(t>0&&t<=this._currentLengthHistory)return s.clone(this.getHistory().getNthRoot(this._currentLengthHistory-t).options.grid)},t.prototype.getDataModel=function(){return this._dataModel},t.prototype.getHistory=function(){return this._history||(this._history=new e),this._history},t.prototype.suscribeToNotificationAdded=function(t){return this._modelEvents.subscribe({event:"notification_added"},t)},t.prototype.unsuscribeToNotificationAdded=function(t){this._modelEvents.unsubscribe(t)},t.prototype.suscribeToNotificationModified=function(t){return this._modelEvents.subscribe({event:"notification_modified"},t)},t.prototype.unsuscribeToNotificationModified=function(t){this._modelEvents.unsubscribe(t)},t.prototype._buildModelFromOptions=function(t,i){return{count:t,options:i}},t.prototype._completeOptions=function(t){},t}()})),define("DS/Notifications/NotificationsManagerViewOnConsole",["require","exports"],(function(t,i){"use strict";function e(){}var o=void 0,n="",s=null,a=void 0;return function(){function t(i){t.options=i}return t.setNotificationManager=function(t){o!==t&&(o&&s&&(o.unsuscribeToNotificationAdded(s),s=void 0),o&&a&&(o.unsuscribeToNotificationModified(a),a=void 0),(o=t)&&(s=o.suscribeToNotificationAdded(this._displayNotification.bind(this)),a=o.suscribeToNotificationModified(this._displayNotification.bind(this))))},t._displayNotification=function(t){""!=n&&t.category!=n||(console.log(" "),console.log("###############################"),console.log("#### Notification received ####"),console.log("###############################"),console.log("Level : "+t.level),console.log("Title : "+t.title),console.log("Subtitle : "+t.title),console.log("Message : "+t.message))},t.setFilterDisplayedNotification=function(t){n!=t&&(n=t,e.call(this))},t.getFilterDisplayedNotification=function(){return n},t.clear=function(){console.clear()},t}()})),define("DS/Notifications/NotificationsManagerViewOnTreeListView",["UWA/Class","DS/Tree/TreeListView","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],(function(t,i,e,o){"use strict";function n(){var t={defaultCellHeight:30,apiVersion:2,columns:[{dataIndex:"tree",text:"Tree",isHidden:!0},{text:"Id",dataIndex:"count",width:75,onCellRequest:function(t){var i=t.cellView;if(t.nodeModel&&t.nodeModel.options){var e=t.nodeModel.options.grid;i.getContent().setContent(String(e.count))}}},{text:"Level",dataIndex:"level",width:100},{text:"Title",dataIndex:"title",width:"auto"},{text:"Subtitle",dataIndex:"subtitle",width:"auto"},{text:"Message",dataIndex:"message",width:"auto"},{text:"Number",dataIndex:"number",width:"auto"}],shouldCellAllowUnsafeHTMLContentAt:function(t){return!!(t.nodeModel&&t.nodeModel instanceof o)&&!0===t.nodeModel.getAttributeValue("allowUnsafeHTML")},roots:[],height:300,isSortable:!1,resize:{columns:!0,rows:!1}};this._treeListView=new i(t)}function s(){this._manager.getHistory().prepareUpdate();var t=this;this._manager.getHistory().search({match:function(i){var e=i.nodeModel._getRowID();i.nodeModel.options.grid.category.toLowerCase()===t._filter.toLowerCase()?t._treeListView.getManager().showRow(e):t._treeListView.getManager().hideRow(e)}});this._manager.getHistory().pushUpdate()}function a(t,i){return!(1&this._stackingPolicy&&t.level!==i.level)&&(!(2&this._stackingPolicy&&t.category!==i.category)&&(!(4&this._stackingPolicy&&t.title!==i.title)&&!(8&this._stackingPolicy&&t.subtitle!==i.subtitle)))}return t.singleton({defaultOptions:{},init:function(t){this._parent(t),n.call(this),this._manager=null,this._stackingPolicy=0,this._notificationsStacks={},this._filter="",this._tokenNotificationAdded=void 0},setNotificationManager:function(t){if(this._manager!==t)if(this._tokenNotificationAdded&&this._manager.unsuscribeToNotificationAdded(this._tokenNotificationAdded),this._manager=t,this._manager){this._buildDisplayedTreedocument(this._manager.getHistory());var i=this;this._tokenNotificationAdded=this._manager.suscribeToNotificationAdded((function(t){var e=i._manager.getHistory(),o=e.getAllDescendants()[e.getAllDescendants().length-1];i._onAddNotification(o);var n=i._lastManagedNode;i._treeListView.getManager().getScroller()&&i._treeListView.getManager().scrollToNode(n,"bottom"),n.select(!0),i._treeListView.getManager().updateView()}))}else this._treeListView.getManager().loadDocument()},setFilterDisplayedNotification:function(t){this._filter!==t&&(this._filter=t||"",this._manager&&s.call(this))},getFilterDisplayedNotification:function(){return this._filter},inject:function(t){this._treeListView.inject(t)},remove:function(t){this._treeListView.remove(t)},setStackingPolicy:function(t){this._stackingPolicy!=t&&(0!=t&&(t%2!=1||t>31)?console.log("NotificationsManagerOnScreen stackingPolicy wrong input value"):this._stackingPolicy=t)},getStackingPolicy:function(){return this._stackingPolicy},_buildDisplayedTreedocument:function(t){var i=void 0,o=this;t&&(i=new e,o._treeListView.getManager().loadDocument(i),t.getChildren().forEach((function(t,i){o._onAddNotification(t)})))},_onAddNotification:function(t){var i=void 0;if(0===this._stackingPolicy)(i=new o({label:t.options.label,grid:t.options.grid})).options.grid.number=1,this._treeListView.getManager().getDocument().addRoot(i);else{var e=this._getNotificationsStackIdentifier(t.options.grid);e&&this._notificationsStacks[e]&&(this._stackingPolicy<16||a.call(this,this._lastManagedNode.options.grid,t.options.grid))?(i=this._notificationsStacks[e]).updateOptions({grid:{number:i.options.grid.number+1}}):((i=new o({label:t.options.label,grid:t.options.grid})).options.grid.number=1,this._notificationsStacks[e]=i,this._treeListView.getManager().getDocument().addRoot(i))}this._lastManagedNode=i},_getNotificationsStackIdentifier:function(t){var i="";return 1&this._stackingPolicy&&(i+=t.level),2&this._stackingPolicy&&(i+=t.category),4&this._stackingPolicy&&(i+=t.title),8&this._stackingPolicy&&(i+=t.subtitle),i}})})),define("DS/Notifications/typings/types",[],(()=>{})),define("DS/Notifications/NotificationsManagerViewOnScreenInstance",["require","exports","DS/Core/PointerEvents","DS/Menu/ContextualMenu","DS/Utilities/Utils","i18n!DS/Notifications/assets/nls/translation","UWA/Core","DS/CoreBase/WebUXGlobalEnums","DS/CoreEvents/ModelEvents"],(function(t,i,e,o,n,s,a,c,r){"use strict";var l="info",f="warning",u="error",h="success";function d(){return!this.options.isStacked||1===this.options.notificationsStack.getNotificationsData().length||this.options.manager.getRemoveStackOnFirstTimeoutFlag()}function g(){return!1}function _(){return this._fadeOutPolicy===c.WUXNotificationsOnScreenFadeOutPolicy.Medium?5e3:this._fadeOutPolicy===c.WUXNotificationsOnScreenFadeOutPolicy.Fast?2500:1e4}function p(t){t.getDiv().parentNode&&t.getDiv().remove();for(var i=this._notifications,e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}}function y(t){var i=this._notificationsStacks[t];i&&1===i.length&&(this._notificationsStacks[t].pop(),delete this._notificationsStacks[t])}var m=function(){function t(t){this._animHasBegun=!1,this._disposeInProgress=!1,this.options=t,this.buildView()}return t.prototype.buildView=function(){this._notif=new a.Element("div",{class:"wux-notification-container"});var t=new a.Element("div",{class:"wux-notification-band"}).inject(this._notif);this._notifIcon=new a.Element("span",{class:"wux-notification-icon"}).inject(t);this._closeButton=new a.Element("button",{type:"button",class:"wux-notification-close wux-ui-3ds wux-ui-3ds-close"}).inject(this._notif),this._closeButton.tooltipInfos={shortHelp:s.get("close")};var i=this;this.options.isStacked||o.addEventListener(this.getDiv(),{callback:function(t){return[{type:"PushItem",title:s.get("close"),tooltip:s.get("closeTooltip"),action:{callback:function(){return i.dispose()}},context:"context_a"}]}});var c=function(){i.removeTimeout(),i.getDiv().setAttribute("isHighlighted","true")};this.getDiv().addEventListener("mouseenter",c);var r=function(){i.getDiv().setAttribute("isHighlighted","false"),i.addTimeoutAfter(_.call(i.options.manager)/2)};this.getDiv().addEventListener("mouseleave",r);var l=!1,f=!1,u=function(t){if(l)l=!1;else if(f)f=!1;else{this.removeEventListener("mouseenter",c),this.removeEventListener("mouseleave",r),this.removeEventListener(e.POINTERDOWN,u);var o=t.target===i._closeButton,n=g.call(i)?1e3:0;i.disposeAfter(n,o)}};this.getDiv().addEventListener(e.POINTERDOWN,(function(t){t.target.hasClassName("wux-notification-message")&&t.target.offsetHeight<t.target.scrollHeight&&t.offsetX>=t.target.offsetWidth-n.getScrollbarWidth()?l=!0:t.target===i._helpLink&&(f=!0),i.getDiv().addEventListener(e.POINTERUP,u)}))},t.prototype.getDiv=function(){return this._notif},t.prototype.setTouchMode=function(t){t?this.getDiv().setAttributeNode(document.createAttribute("touch-mode")):this.getDiv().removeAttribute("touch-mode")},t.prototype.setData=function(t){this.removeTimeout(),this._data=t,this.createCorrectElements(),this.addTimeoutAfter(_.call(this.options.manager)),this.getDiv().setAttribute("isHighlighted","true");var i=this;setTimeout((function(t){var e=i.getDiv();e&&e.setAttribute("isHighlighted","false")}),500)},t.prototype.createCorrectElements=function(){if(this._title&&(this._title.remove(),delete this._title),this._subtitle&&(this._subtitle.remove(),delete this._subtitle),this._message&&(this._message.remove(),delete this._message),this._action&&(this._action.remove(),delete this._action),this._data){if(""!==this._data.title&&(this._title=new a.Element("div",{class:"wux-notification-title"}),n.getUnsafeHTMLContentValueToApply(this._data.allowUnsafeHTML)?this._title.setContent(this._data.title):this._title.textContent=this._data.title,this._title.inject(this.getDiv())),""!==this._data.subtitle&&(this._subtitle=new a.Element("div",{class:"wux-notification-subtitle"}),n.getUnsafeHTMLContentValueToApply(this._data.allowUnsafeHTML)?this._subtitle.setContent(this._data.subtitle):this._subtitle.textContent=this._data.subtitle,this._subtitle.inject(this.getDiv())),""!==this._data.message&&(this._message=new a.Element("div",{class:"wux-notification-message"}),n.getUnsafeHTMLContentValueToApply(this._data.allowUnsafeHTML)?this._message.setContent(this._data.message):this._message.textContent=this._data.message,this._message.inject(this.getDiv())),this._data.helpResources&&Object.keys(this._data.helpResources).length>0&&(this._helpLink=n.createUAHelpLink(this._data.helpResources),this._helpLink&&this._helpLink.inject(this.getDiv())),""!==this._data.action.label){this._action=new a.Element("button",{type:"button",class:"wux-controls-button wux-notification-action"}),n.getUnsafeHTMLContentValueToApply(this._data.allowUnsafeHTML)?this._action.setContent(this._data.action.label):this._action.textContent=this._data.action.label,this._action.inject(this.getDiv());var t=this;this._action.addEventListener(e.POINTERUP,(function(i){t._data.action.callback.call(this),i.stopPropagation()}))}this._data.level===l?this._notifIcon.setAttribute("class","wux-notification-icon wux-ui-3ds wux-ui-3ds-info"):this._data.level===f?this._notifIcon.setAttribute("class","wux-notification-icon wux-ui-3ds wux-ui-3ds-attention"):this._data.level===h?this._notifIcon.setAttribute("class","wux-notification-icon wux-ui-3ds wux-ui-3ds-check"):this._data.level===u&&this._notifIcon.setAttribute("class","wux-notification-icon wux-ui-3ds wux-ui-3ds-error"),this.getDiv().setAttribute("notification-level",this._data.level),this.getDiv().setAttribute("notification-id",this._data.poNotifId),!0===this._data.sticky&&this.getDiv().setAttribute("sticky","")}},t.prototype.addTimeoutAfter=function(t){var i=this;this._data&&(this._data.sticky||(this._data.level===l||this._data.level===h?this._fadingTimeout=setTimeout((function(){d.call(i)&&(i._animHasBegun=!0,null!==i.getDiv().parentNode&&(i.getDiv().setAttribute("isFadingOut","true"),i.options.isStacked&&i.options.notificationsStack.getDiv().setAttribute("isFadingOut","true"))),i._resizeTimeout=setTimeout((function(){var t=d.call(i)?1e3:0;i.disposeAfter(t)}),1e3),i.options.manager._modelEvents.publish({event:"notificationOnScreen_animHasBegun",data:i})}),t-1e3):this._data.level===f&&(this._warningOpacityTimeout=setTimeout((function(){i._animHasBegun=!0,null!==i.getDiv().parentNode&&(i.getDiv().setAttribute("ghost","true"),i.options.isStacked&&i.options.notificationsStack.getDiv().setAttribute("ghost","true")),i.options.manager._modelEvents.publish({event:"notificationOnScreen_animHasBegun",data:i})}),t))))},t.prototype.removeTimeout=function(){this.clearTimeouts(),(this._animHasBegun||this._disposeInProgress)&&(this.getDiv().setAttribute("isFadingOut","false"),this.getDiv().setAttribute("isShrinking","false"),this.getDiv().setAttribute("ghost","false"),this.options.isStacked&&(this.options.notificationsStack.getDiv().setAttribute("isFadingOut","false"),this.options.notificationsStack.getDiv().setAttribute("ghost","false")),this._animHasBegun=!1,this._disposeInProgress=!1)},t.prototype.getCount=function(){return this._data.count},t.prototype.refreshTimeout=function(){this.removeTimeout(),this.addTimeoutAfter(_.call(this.options.manager))},t.prototype.clearTimeouts=function(){this._fadingTimeout&&clearTimeout(this._fadingTimeout),this._fadingTimeout=null,this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=null,this._disposeTimeout&&clearTimeout(this._disposeTimeout),this._disposeTimeout=null,this._warningOpacityTimeout&&clearTimeout(this._warningOpacityTimeout),this._warningOpacityTimeout=null},t.prototype.disposeAfter=function(t,i){var e=this.getDiv();if(!this._disposeInProgress&&e&&null!==e.parentNode)if(this._disposeInProgress=!0,0!==t){this.getDiv().setAttribute("isShrinking","true");var o=this;this._disposeTimeout=setTimeout((function(){return o.dispose(i)}),t),this.options.manager._modelEvents.publish({event:"notificationOnScreen_disposeInProgress",data:this})}else this.dispose(i)},t.prototype.dispose=function(t){this.clearTimeouts(),this.options.isStacked?t?this.options.notificationsStack.dispose():this.options.notificationsStack.removeIndex(0):p.call(this.options.manager,this),this.options.manager._modelEvents.publish({event:"notificationOnScreen_disposed",data:this})},t.prototype.destroy=function(){this._notif&&(this._notif.destroy(),this._notif=null),this._notifIcon&&(this._notifIcon.destroy(),this._notifIcon=null),this._closeButton&&(this._closeButton.destroy(),this._closeButton=null),this._title&&(this._title.destroy(),this._title=null),this._subtitle&&(this._subtitle.destroy(),this._subtitle=null),this._message&&(this._message.destroy(),this._message=null),this._action&&(this._action.destroy(),this._action=null)},t}(),v=function(){function t(t){this.options=t,this._poNotifId=t.poNotifId,this._notificationsData=[],this._notifsStackDiv=null,this._notificationOnScreen=null,this._notifPlaceholderDiv=null,this._nbNotifsStacked=null}return t.prototype.buildMainView=function(){this._mainFragment=document.createDocumentFragment(),this._notifsStackDiv=new a.Element("div",{class:"wux-notification-stack"}).inject(this._mainFragment),this._notifPlaceholderDiv=new a.Element("div",{class:"wux-notification-placeholder"}).inject(this._notifsStackDiv),this._multipleNotifsStacked=new a.Element("div",{class:"wux-notification-stacked-depth"}).inject(this._notifPlaceholderDiv),this._multipleNotifsStacked.setAttribute("style","display: none;"),this._multipleNotifsStacked.setAttribute("notification-level",this.options.level),this._notificationOnScreen=new m({poNotifId:this._poNotifId,isStacked:!0,notificationsStack:this,manager:this.options.manager}),this._notificationOnScreen.getDiv().inject(this._notifPlaceholderDiv),this._nbNotifsStacked=new a.Element("div",{class:"wux-notification-nb-stacked"}).inject(this._notifsStackDiv),this._nbNotifsStacked.setAttribute("style","display: none;"),"error"===this.options.level?this.options.manager.elements.container.insertBefore(this._mainFragment,this.options.manager.elements.container.firstChild):this.options.manager.elements.container.appendChild(this._mainFragment);var t=this;o.addEventListener(this.getDiv(),{callback:function(i){var e=t.getNotificationsData().length;return[{type:"PushItem",title:s.get(1===e?"close":"closeAll"),tooltip:s.get(1===e?"closeTooltip":"closeAllTooltip"),action:{callback:function(i){t.dispose()},context:"context_a"}}]}})},t.prototype.getDiv=function(){return this._notifsStackDiv},t.prototype.getNotificationsData=function(){return this._notificationsData},t.prototype.setTouchMode=function(t){this._notificationOnScreen.setTouchMode(t)},t.prototype.addNotification=function(t){this.getNotificationsData().push(t),1===this.getNotificationsData().length&&(this.buildMainView(),this.refreshContent()),this.updateNbNotifsStacked(),this.options.manager.getRemoveStackOnFirstTimeoutFlag()&&this._notificationOnScreen.refreshTimeout()},t.prototype.changeNotification=function(t){for(var i=this.getNotificationsData(),e=0;e<i.length;e++){if(i[e].count===t.count)return i[e]=t,0===e&&this.refreshContent(),0}return 1},t.prototype.refreshContent=function(){this._notificationOnScreen.setData(this.getNotificationsData()[0])},t.prototype.updateNbNotifsStacked=function(){var t=this.getNotificationsData().length;t>1?(this._nbNotifsStacked.textContent=t.toString(),2===t&&(this._nbNotifsStacked.setAttribute("style","display: block;"),this._multipleNotifsStacked.setAttribute("style","display: block;"),this.getDiv().setAttribute("multiple-notifications","true")),this._notificationOnScreen&&this._notificationOnScreen._closeButton&&(this._notificationOnScreen._closeButton.tooltipInfos.shortHelp=s.get("closeAll"))):1===t&&(this._nbNotifsStacked.setAttribute("style","display: none;"),this._multipleNotifsStacked.setAttribute("style","display: none;"),this.getDiv().setAttribute("multiple-notifications","false"),this._notificationOnScreen&&this._notificationOnScreen._closeButton&&(this._notificationOnScreen._closeButton.tooltipInfos.shortHelp=s.get("close")))},t.prototype.removeIndex=function(t){t<0||t>=this.getNotificationsData().length||(1===this.getNotificationsData().length||0===t&&this._notificationOnScreen._animHasBegun&&this.options.manager.getRemoveStackOnFirstTimeoutFlag()?this.dispose():(this.getNotificationsData().splice(t,1),this.updateNbNotifsStacked(),0===t&&this.refreshContent()))},t.prototype.removeNotification=function(t){for(var i=this.getNotificationsData(),e=0;e<i.length;e++){if(i[e].count===t)return this.removeIndex(e),0}return 1},t.prototype.removeNotifications=function(t){for(var i=this.getNotificationsData(),e=0;e<i.length;){t(i[e])?this.removeIndex(e):e++}},t.prototype.dispose=function(){var t=this.getNotificationsData();t.splice(0,t.length),this._notificationOnScreen.dispose(),this.getDiv().parentNode&&this.getDiv().parentNode.removeChild(this.getDiv()),y.call(this.options.manager,this.options.identifier)},t.prototype.destroy=function(){this._notificationsData=null,this._notifsStackDiv&&(this._notifsStackDiv.destroy(),this._notifsStackDiv=null),this._notificationOnScreen&&(this._notificationOnScreen.destroy(),this._notificationOnScreen=null),this._notifPlaceholderDiv&&(this._notifPlaceholderDiv.destroy(),this._notifPlaceholderDiv=null),this._multipleNotifsStacked&&(this._multipleNotifsStacked.destroy(),this._multipleNotifsStacked=null),this._nbNotifsStacked&&(this._nbNotifsStacked.destroy(),this._nbNotifsStacked=null)},t}();return function(){function t(){this._buildView(),this._modelEvents=new r,this._lastNotificationDisplayed=void 0,this._notificationsStacks={},this._notifications=[],this._manager=void 0,this._fadeOutPolicy=c.WUXNotificationsOnScreenFadeOutPolicy.Medium,this._filter="",this._stackingPolicy=0,this._removeStackOnFirstTimeout=!1,this._tokenNotificationAdded=void 0,this._tokenNotificationModified=void 0}return t.prototype._buildView=function(){this._notifScreen=new a.Element("ul",{class:"wux-notification-screen"}),this.elements={},this.elements.container=this._notifScreen,document.body.appendChild(this.elements.container)},t.prototype._getNotificationsStackIdentifier=function(t){var i="";return 1&this._stackingPolicy&&(i+=t.level),2&this._stackingPolicy&&(i+=t.category),4&this._stackingPolicy&&(i+=t.title),8&this._stackingPolicy&&(i+=t.subtitle),i},t.prototype._insertNonStackedNotification=function(t){var i=new m({poNotifId:t.poNotifId,isStacked:!1,manager:this});this._notifications.push(i),i.setData(t),"error"===t.level?this.elements.container.insertBefore(i.getDiv(),this.elements.container.firstChild):this.elements.container.appendChild(i.getDiv())},t.prototype._insertStackedNotification=function(t){var i=this._getNotificationsStackIdentifier(t);if(i){var e=this._notificationsStacks[i],o=void 0;e&&0!==e.length?16&this._stackingPolicy&&this._getNotificationsStackIdentifier(this._lastNotificationDisplayed)!==this._getNotificationsStackIdentifier(t)?(o=new v({manager:this,identifier:i,level:t.level}),this._notificationsStacks[i].push(o)):o=this._notificationsStacks[i][this._notificationsStacks[i].length-1]:(o=new v({manager:this,identifier:i,level:t.level}),this._notificationsStacks[i]=[o]),o.addNotification(t)}},t.prototype._updateNonStackedNotification=function(t){for(var i=0;i<this._notifications.length;i++){var e=this._notifications[i];if(e.getCount()===t.oldOptions.count){e.setData(t.newOptions),"error"===t.newOptions.level?this.elements.container.insertBefore(e.getDiv(),this.elements.container.firstChild):this.elements.container.appendChild(e.getDiv());break}}},t.prototype._updateStackedNotification=function(t){var i=this._getNotificationsStackIdentifier(t.oldOptions);i&&this._notificationsStacks[i]&&this._notificationsStacks[i].length&&(this._getNotificationsStackIdentifier(t.newOptions)===i?this._notificationsStacks[i].every((function(i){return i.changeNotification(t.newOptions)})):(this._notificationsStacks[i].every((function(i){return i.removeNotification(t.oldOptions.count)})),this._displayNotification(t.newOptions)))},t.prototype.getNotificationManager=function(){return this._manager},t.prototype.setNotificationManager=function(t){this._manager!==t&&(this._tokenNotificationAdded&&(this._manager.unsuscribeToNotificationAdded(this._tokenNotificationAdded),this._tokenNotificationAdded=void 0),this._tokenNotificationModified&&(this._manager.unsuscribeToNotificationModified(this._tokenNotificationModified),this._tokenNotificationModified=void 0),this._manager=t,this._manager&&(this._tokenNotificationAdded=this._manager.suscribeToNotificationAdded(this._displayNotification.bind(this)),this._tokenNotificationModified=this._manager.suscribeToNotificationModified(this._changeNotification.bind(this))),this._container||this.elements.container.parentElement===document.body||document.body.appendChild(this.elements.container))},t.prototype.inject=function(t){return t?(this.elements.container.inject(t),this._container=t):document.body.appendChild(this.elements.container),this},t.prototype.slide=function(t){void 0!==t.right?this._notifScreen.style.right=t.right+"px":void 0!==t.left?this._notifScreen.style.right=t.left+"px":this._notifScreen.style.right="10px",void 0!==t.top?(this._notifScreen.style.top=t.top+"px",this._notifScreen.style.bottom="initial"):void 0!==t.bottom?(this._notifScreen.style.top="initial",this._notifScreen.style.bottom=t.bottom+"px"):(this._notifScreen.style.top="10px",this._notifScreen.style.bottom="initial")},t.prototype.restorePosition=function(){this._notifScreen.style.right="10px"},t.prototype.setFadeOutPolicy=function(t){t===c.WUXNotificationsOnScreenFadeOutPolicy.Fast||t===c.WUXNotificationsOnScreenFadeOutPolicy.Medium||t===c.WUXNotificationsOnScreenFadeOutPolicy.Slow?this._fadeOutPolicy=t:window.console.error("Error in NotificationsManagerViewOnScreenInstance::setFadeOutPolicy, policy was not recognized")},t.prototype.getFadeOutPolicy=function(){return this._fadeOutPolicy},t.prototype.setFilterDisplayedNotification=function(t){this._filter!==t&&(this._filter=t||"")},t.prototype.getFilterDisplayedNotification=function(){return this._filter},t.prototype.setStackingPolicy=function(t){this._stackingPolicy!==t&&(0!==t&&(t%2!=1||t>31)?window.console.log("NotificationsManagerOnScreen stackingPolicy wrong input value"):this._stackingPolicy=t)},t.prototype.getStackingPolicy=function(){return this._stackingPolicy},t.prototype.setRemoveStackOnFirstTimeoutFlag=function(t){this._removeStackOnFirstTimeout=t},t.prototype.getRemoveStackOnFirstTimeoutFlag=function(){return this._removeStackOnFirstTimeout},t.prototype.removeLastNotificationDisplayed=function(){var t=this;if(this._lastNotificationDisplayed)if(0===this._stackingPolicy)this._notifications.every((function(i){return i.getCount()===t._lastNotificationDisplayed.count?(i.dispose(),t._lastNotificationDisplayed=void 0,0):1}));else{var i=this._getNotificationsStackIdentifier(this._lastNotificationDisplayed);i&&this._notificationsStacks[i]&&this._notificationsStacks[i].length&&(this._notificationsStacks[i].every((function(i){return i.removeNotification(t._lastNotificationDisplayed.count)})),this._lastNotificationDisplayed=void 0)}},t.prototype.removeNotification=function(t){var i=this;if(0===this._stackingPolicy)this._notifications.every((function(e){return e.getCount()===t?(e.dispose(),i._lastNotificationDisplayed&&i._lastNotificationDisplayed.count===t&&(i._lastNotificationDisplayed=void 0),0):1}));else for(var e in this._notificationsStacks){if(!this._notificationsStacks[e].every((function(i){return i.removeNotification(t)})))break}},t.prototype.removeNotifications=function(t,i){if(t||i){var e=function(e){return!(t&&e.category!==t||i&&e.level!==i)};if(0!==this._stackingPolicy){for(var o in this._notificationsStacks)this._notificationsStacks[o].forEach((function(t){t.removeNotifications(e)}));return}for(var n=0;n<this._notifications.length;)e(this._notifications[n]._data)?this._notifications[n].dispose():n++}else{for(var o in this._notificationsStacks)this._notificationsStacks[o].forEach((function(t){t.dispose()}));for(n=this._notifications.length;n>0;--n)this._notifications[n-1].dispose();this._lastNotificationDisplayed=void 0}},t.prototype.setTouchMode=function(t){for(var i in this._notificationsStacks)this._notificationsStacks[i].forEach((function(i){i.setTouchMode(t)}));for(var e=0;e<this._notifications.length;e++)this._notifications[e].setTouchMode(t)},t.prototype._displayNotification=function(t){""!==this._filter&&t.category!==this._filter||(0===this._stackingPolicy?this._insertNonStackedNotification(t):this._insertStackedNotification(t),this._lastNotificationDisplayed=t)},t.prototype._changeNotification=function(t){0===this._stackingPolicy?this._updateNonStackedNotification(t):this._updateStackedNotification(t),this._lastNotificationDisplayed&&t.newOptions.count===this._lastNotificationDisplayed.count&&(this._lastNotificationDisplayed=t.newOptions)},t}()})),define("DS/Notifications/NotificationsManagerViewOnScreen",["require","exports","DS/Notifications/NotificationsManagerViewOnScreenInstance","DS/Utilities/typings/types"],(function(t,i,e){"use strict";var o=new e;return function(){function t(){}return Object.defineProperty(t,"notifManagerViewOnScreen",{get:function(){return o},enumerable:!1,configurable:!0}),Object.defineProperty(t,"elements",{get:function(){return o.elements},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_notifScreen",{get:function(){return o._notifScreen},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_notifications",{get:function(){return o._notifications},enumerable:!1,configurable:!0}),t.getNotificationManager=function(){return t.notifManagerViewOnScreen.getNotificationManager()},t.setNotificationManager=function(i){return t.notifManagerViewOnScreen.setNotificationManager(i)},t.inject=function(i){return t.notifManagerViewOnScreen.inject(i)},t.slide=function(i){return t.notifManagerViewOnScreen.slide(i)},t.restorePosition=function(){return t.notifManagerViewOnScreen.restorePosition()},t.setFadeOutPolicy=function(i){return t.notifManagerViewOnScreen.setFadeOutPolicy(i)},t.getFadeOutPolicy=function(){return t.notifManagerViewOnScreen.getFadeOutPolicy()},t.setFilterDisplayedNotification=function(i){return t.notifManagerViewOnScreen.setFilterDisplayedNotification(i)},t.getFilterDisplayedNotification=function(){return t.notifManagerViewOnScreen.getFilterDisplayedNotification()},t.setStackingPolicy=function(i){return t.notifManagerViewOnScreen.setStackingPolicy(i)},t.getStackingPolicy=function(){return t.notifManagerViewOnScreen.getStackingPolicy()},t.setRemoveStackOnFirstTimeoutFlag=function(i){return t.notifManagerViewOnScreen.setRemoveStackOnFirstTimeoutFlag(i)},t.getRemoveStackOnFirstTimeoutFlag=function(){return t.notifManagerViewOnScreen.getRemoveStackOnFirstTimeoutFlag()},t.removeLastNotificationDisplayed=function(){return t.notifManagerViewOnScreen.removeLastNotificationDisplayed()},t.removeNotification=function(i){return t.notifManagerViewOnScreen.removeNotification(i)},t.removeNotifications=function(i,e){return t.notifManagerViewOnScreen.removeNotifications(i,e)},t.setTouchMode=function(i){return t.notifManagerViewOnScreen.setTouchMode(i)},t}()}));var __extends=this&&this.__extends||function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();define("DS/Notifications/NotificationsManagerMessages",["require","exports","DS/Notifications/NotificationsManagerAbstract"],(function(t,i,e){"use strict";return function(t){function i(i){var e=t.call(this,i)||this;return e._dataModel={level:"info",title:"",subtitle:"",message:"",icon:null,sticky:!1,category:"",action:{label:"",callback:function(){}},allowUnsafeHTML:!0},e}return __extends(i,t),i.prototype._completeOptions=function(t){t.level=t.level||"info",t.title=t.title||"",t.subtitle=t.subtitle||"",t.message=t.message||"",t.helpResources=t.helpResources||{},t.sticky=t.sticky||!1,t.category=t.category||"",t.allowUnsafeHTML=void 0===t.allowUnsafeHTML||t.allowUnsafeHTML,t.action?(t.action.label=t.action.label||"Action",t.action.callback=t.action.callback||function(){}):t.action={label:"",callback:function(){}}},i.prototype._buildModelFromOptions=function(t,i){return{poNotifId:i.poNotifId,count:t,level:i.level,title:i.title,subtitle:i.subtitle,message:i.message,helpResources:i.helpResources,icon:i.icon,sticky:i.sticky,category:i.category,action:i.action,allowUnsafeHTML:i.allowUnsafeHTML,options:i}},i}(e)})),define("DS/Notifications/NotificationsManagerUXMessages",["require","exports","DS/Notifications/NotificationsManagerMessages"],(function(t,i,e){"use strict";var o=new e;return function(){function t(){}return t.addNotif=function(t){return o.addNotif(t)},t.init=function(){},t.modifyNotif=function(t,i){return o.modifyNotif(t,i)},t.setLengthHistory=function(t){return o.setLengthHistory(t)},t.getLengthHistory=function(){return o.getLengthHistory()},t.getNotifOptions=function(t){return o.getNotifOptions(t)},t.getLastNthNotificationAdded=function(t){return o.getLastNthNotificationAdded(t)},t.getDataModel=function(){return o.getDataModel()},t.getHistory=function(){return o.getHistory()},t.suscribeToNotificationAdded=function(t){return o.suscribeToNotificationAdded(t)},t.unsuscribeToNotificationAdded=function(t){return o.unsuscribeToNotificationAdded(t)},t.suscribeToNotificationModified=function(t){return o.suscribeToNotificationModified(t)},t.unsuscribeToNotificationModified=function(t){return o.unsuscribeToNotificationModified(t)},t}()}));