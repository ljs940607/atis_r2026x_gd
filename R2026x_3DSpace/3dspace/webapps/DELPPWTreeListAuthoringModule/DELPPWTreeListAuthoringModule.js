define("DS/DELPPWTreeListAuthoringModule/TreeListAuthoringBaseModule",["UWA/Core"],(function(e){"use strict";return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","UXFactoryBehavior","ProductImplementBehavior","ProcessImplementBehavior","ViewBehavior","ExpandFilterBehavior"],creator:function(n,t,o,i,r,a,d,c,s,h,l,u,f,A,g){var p=function(t){var i,a,d,c,s={forceDBMode:!0,silent:!0,onComplete:function(t){e.is(t)?r.insertInstance({isInstanceOf:t.id,"PLMEntity.V_Name":t.get("PLMEntity.V_Name"),type:t.get("type"),isAggregatedBy:d.get("PID")},c):n.debug("Child reference fetch failed")}};i=o.getSelectedNodesInfo(),e.is(i,"array")&&e.is(t)&&(a=i[0].id,c=i[0].absPath,d=r.getReferenceModel(a),t.forEach((function(e){r.fetchRoot(e.id,s)})))};return{listenTo:function(){return{referenceAdded:this.onAddReference,instanceAdded:this.onAddInstance,connectionAdded:this.onAddConnection,referenceRemoved:this.onRemoveRefOrInst,instanceRemoved:this.onRemoveRefOrInst,connectionRemoved:this.onRemoveConnection,referenceChanged:this.onChangeIRPC,connectionChanged:this.onChangeIRPC,documentAdded:this.addDocumentConnections,EditAttribute:this.onEditAttribute,editRichText:this.onEditRichText,reparent:this.onReparentInstances,reparentBegin:this.onReparentBegin,reparentEnd:this.onReparentEnd,searchAndAddInstance:this.onSearchAndAddInstance,InsertAsCopy:this.onInsertAsCopy,expandAll:this.onExpandAll,collapseAll:this.onCollapseAll}},onStart:function(){var r,a=n.getElement(),d=a.getElementsByClassName("module-toolbar-container")[0],c=a.getElementsByClassName("tree-list-container")[0],s=a.getElementsByClassName("drop-zone-container")[0];s&&i.getContent().inject(s),t.loadDocument(o.getWUXNodeModel()),r=t.getToolBarContent(),e.is(r)&&(r.inject(d),c.addClassName("with-toolbar")),t.getContent().inject(c)},onStop:function(){},onAddReference:function(n,t,i){n=e.is(n,"array")?n:[n],o.withTransactionUpdate((function(){n.forEach((function(n){!function(n){var t={silentMode:!0,withLinksResolved:!1};e.is(i)&&(t=e.merge(i,t)),o.addNode(n,t)}(n)}))}))},onAddInstance:function(n,t){var i={silentMode:!0,withLinksResolved:!1},r=e.is(t)?e.merge(t,i):i,a=function(e){o.addNode(e,r)};e.is(n,"array")?o.withTransactionUpdate((function(){n.forEach((function(e){a(e)}))})):a(n)},onAddOccurrence:function(e){e=Array.isArray(e)?e:[e],o.withTransactionUpdate((function(){o.addOccurences(e)}))},addDocumentConnections:function(n){o.withTransactionUpdate((function(){e.is(n,"array")&&n.forEach((function(e){o.updateDocAttributes(e)}))}))},onChangeIRPC:function(e){e=Array.isArray(e)?e:[e],o.withTransactionUpdate((function(){e.forEach((function(e){o.updateAttributes(e)}))}))},onRemoveRefOrInst:function(e){var n=[];e=Array.isArray(e)?e:[e],o.withTransactionUpdate((function(){e.forEach((function(e){n.push(e.get("PID"))})),o.removeNodes(n)}))},onReparentInstances:function(e){o.reparent(e)},onReparentBegin:function(e){o.isNodeAdded(e)&&(o.showOverlay(),o.unSelectAll())},onReparentEnd:function(e){o.isNodeAdded(e)&&o.removeOverlay()},onExpandAll:function(){var n=o.getSelectedNodes();e.is(n,"array")&&n.length>0&&o.expandAll(n)},onCollapseAll:function(){var n=o.getSelectedNodes();e.is(n,"array")&&n.length>0&&o.collapseAll(n)},onEditAttribute:function(e,n){s.editAttribute(e,n)},onEditRichText:function(e,n){s.editRichTextAttribute(e,n)},onSearchAndAddInstance:function(){var e,n,t=o.getSelectedNodesInfo();1===t.length&&(n="RESOURCE"!==(e=r.getReferenceModel(t[0].id,!0)).get("PPRTYPE")?r.getValidChildTypes(e):["VPMReference","ErgoHuman"],d.showSearchDialoguAndActivate(p,{types:n}))},onInsertAsCopy:function(){var e,n=o.getSelectedNodesInfo();1===n.length&&(e=r.getReferenceModel(n[0].id,!0),d.showSearchDialoguAndActivate(p,{types:r.getValidChildTypes(e),command:"duplicate"}))}}}}}));